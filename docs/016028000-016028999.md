# StackOverflow 问答 16028000-16028999

# c++ - C++程序输出整数时异常退出

> ID：16028000
> 
> 赞同：1
> 
> 时间：2013-04-16T02:53:08.583
> 
> 标签：c++, cout

我在计算机的 cout 命令中有这个问题。我使用 MingW 和 Netbeans 来学习 C++。我尝试使用以下代码编译并运行程序。

```
#include <iostream>

int main(){
    int x = 5;
    int y = 7;
    std::cout << std::endl;
    std::cout << x + y << " " << x * y;
    std::cout << std::endl;
    return 0;
} 
```

此代码保存为 xycalculation.cpp，我使用`g++ -o xycalc.exe xycalculation.cpp`Windows XP SP2 计算机上的命令对其进行了编译。我在 PATH 中设置了这个环境变量。C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;D:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin;D:\MinGW\bin;D:\MinGW\ msys\1.0\bin

此代码编译良好并创建 xycalc.exe 文件。当我尝试通过命令行运行它时`xycalc.exe`，它会给我一条 Windows 错误消息并退出而不给出任何输出。

错误的详细信息，当我单击“有关此错误的更多信息，请单击此处”链接时显示如下。

```
AppName: xycalculation.exe   AppVer: 0.0.0.0     ModName: libstdc++-6.dll
ModVer: 0.0.0.0  Offset: 000952a0 
```

谁能给我指点来纠正这个问题？这对我继续学习这门语言会有很大的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:57:53.360

`-static-libgcc`将和添加`-static-libstdc++`到命令行以静态链接库或将它们与 exe 放在同一文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:00:24.650

您收到此错误的原因是因为默认情况下您的编译器不会编译`libstdc++`到您的程序中。

我使用代码块，但您可以通过使用 MinGW 编译器并尝试在控制台中的代码块之外运行程序来复制错误。

要解决此问题，您应该添加：

```
-static-libgcc (C) 
-static-libstdc++ (C++) 
```

到您的链接器标志，它将将库编译到您的 EXE 中（更大的 EXE，但它会运行）。

# search - 邮编搜索

> ID：16028002
> 
> 赞同：0
> 
> 时间：2013-04-16T02:53:29.150
> 
> 标签：search, mapping, postal-code

我不确定获得我想要的东西的最佳方法，所以我只会解释它的应用程序，并希望比我更聪明的人知道我需要什么。

我所追求的东西与 www.Autotrader.co.uk 上的内容几乎相同，其中用户输入完整的邮政编码和该邮政编码的搜索区域（半径）（1 英里/10 英里/100 英里等），然后只在显示搜索区域。

我想知道如何实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:01:57.267

按半径搜索... 通过应用经度和纬度的偏移量来搜索更容易，例如经度和纬度的 +/- 0.00001。但是使用这种方法，搜索区域将是矩形。

Google Maps API 可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T19:14:03.543

在这里，我将描述一种实现目标的方法：首先，我将获取每个用户的纬度和经度。您可以使用[Google 地理编码 API](https://developers.google.com/maps/documentation/geocoding/)。在存储用户数据的表中添加纬度和经度两列。然后，您可以计算用户之间的距离。这篇[文章](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)描述了你是如何做到这一点的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T13:58:13.840

首先需要将 Postcode 转换为地理信息，然后有很多方法可以计算两点之间的距离。所以基本上：

1.  使用[Google 的 Geocode API](https://developers.google.com/maps/documentation/geocoding/)将邮政编码转换为经度和纬度。
2.  计算两点之间的距离。[您可以在UK Postcode](http://www.ukpostcode.net/calculating-distance-between-two-postcodes-with-php-wiki-9.html)上找到一些信息。

现在，如果您要在数据库中搜索以找出像 Autotrader 这样的相关点数。最好预先计算所有结果并在有新点出现时缓存它们。它将提供更快的服务并最小化服务器的负载。

# ravendb - 使用 RavenDB 进行调试非常慢

> ID：16028011
> 
> 赞同：5
> 
> 时间：2013-04-16T02:54:47.307
> 
> 标签：ravendb

我正在使用 RavenDB 2.0.3.0 版。附加调试器后，涉及 RavenDB 的所有内容都运行得非常缓慢。每个查询需要几秒钟才能完成。

如果我在调试器刚刚坐在那里的时候按暂停，我总是看到它挂断了以下调用跟踪：

> Lucene.Net.dll!Lucene.Net.QueryParsers.FastCharStream.Refill() 第 91 行 C# Lucene.Net.dll!Lucene.Net.QueryParsers.FastCharStream.ReadChar() 第 53 行 C# Lucene.Net.dll!Lucene.Net。 QueryParsers.QueryParserTokenManager.JjMoveNfa_3(int startState, int curPos) 第 604 行 + 0x1b 字节 C# Lucene.Net.dll!Lucene.Net.QueryParsers.QueryParserTokenManager.JjMoveStringLiteralDfa0_3() 第 94 行 + 0xd 字节 C# Lucene.Net.dll!Lucene.Net .QueryParsers.QueryParserTokenManager.GetNextToken() 第 1379 行 + 0x9 字节 C# Lucene.Net.dll!Lucene.Net.QueryParsers.QueryParser.Jj_ntk() 第 1929 行 + 0x1d 字节 C# Lucene.Net.dll!Lucene.Net.QueryParsers.QueryParser .Clause(string field) Line 1373 + 0x1d bytes C# Lucene.Net.dll!Lucene.Net.QueryParsers.QueryParser.Query(string field) Line 1301 + 0xc bytes C# Lucene.Net.dll!Lucene。Net.QueryParsers.QueryParser.TopLevelQuery(string field) Line 1287 + 0xc bytes C# Lucene.Net.dll!Lucene.Net.QueryParsers.QueryParser.Parse(string query) Line 223 + 0xf bytes C# Raven.Database.dll!Raven. Database.Indexing.QueryBuilder.BuildQuery(string query, Raven.Abstractions.Data.IndexQuery indexQuery, Raven.Database.Indexing.RavenPerFieldAnalyzerWrapper 分析器) 第 56 行 + 0xe 字节 C# Raven.Database.dll!Raven.Database.Indexing.Index.IndexQueryOperation .GetLuceneQuery(string query, Raven.Abstractions.Data.IndexQuery indexQuery) 第 1120 行 + 0x1d 字节 C# Raven.Database.dll!Raven.Database.Indexing.Index.IndexQueryOperation.GetLuceneQuery() 第 1081 行 + 0x28 字节 C# Raven.Database。 dll!Raven.Database.Indexing.Index.IndexQueryOperation.Query() 第 803 行 + 0x26 字节 C# [外部代码] Raven.Database。dll!Raven.Database.DocumentDatabase.Query.AnonymousMethod__8e(Raven.Database.Storage.IStorageActionsAccessor actions) Line 1220 + 0x145 bytes C# Raven.Database.dll!Raven.Database.DocumentDatabase.Query(string index, Raven.Abstractions.Data. IndexQuery 查询）第 1237 行 C# Raven.Database.dll!Raven.Database.Queries.DynamicQueryRunner.ExecuteActualQuery（Raven.Abstractions.Data.IndexQuery 查询，Raven.Database.Data.DynamicQueryMapping 映射，System.Tuple touchTemporaryIndexResult，字符串 realQuery）第 82 行+ 0x32b 字节 C# Raven.Database.dll!Raven.Database.Queries.DynamicQueryRunner.ExecuteDynamicQuery(string entityName, Raven.Abstractions.Data.IndexQuery 查询) 第 49 行 + 0x15 字节 C# Raven.Database.dll!Raven.Database.Queries。 DynamicQueryExtensions.ExecuteDynamicQuery(Raven.Database.DocumentDatabase self, string entityName,Raven.Abstractions.Data.IndexQuery indexQuery) 第 19 行 + 0x11 字节 C# Raven.Client.Embedded.dll!Raven.Client.Embedded.EmbeddedDatabaseCommands.Query(string index, Raven.Abstractions.Data.IndexQuery query, string[] 包括， bool metadataOnly, bool indexEntriesOnly) 第 389 行 + 0x47 字节 C# Raven.Client.Lightweight.dll!Raven.Client.Document.AbstractDocumentQuery>.ExecuteActualQuery() 第 535 行 + 0x50 字节 C# Raven.Client.Lightweight.dll!Raven.Client。 Document.AbstractDocumentQuery>.InitSync() 第 518 行 C# Raven.Client.Lightweight.dll!Raven.Client.Document.AbstractDocumentQuery>.QueryResult.get() 第 505 行 C# Raven.Client.Lightweight.dll!Raven.Client.Linq。 RavenQueryProviderProcessor.ExecuteQuery() 第 1425 行 + 0x1b 字节 C# Raven.Client.Lightweight.dll!Raven.Client.Linq.RavenQueryProviderProcessor。执行（System.Linq.Expressions.Expression 表达式）第 1398 行 + 0x3d 字节 C#

如果我在没有附加调试器的情况下运行，一切都运行良好且快速......我在昨天之前从未遇到过这个问题。

我正在使用带有 DataDir=~\App_Data\RavenDB 的 EmbeddableDocumentStore。

我尝试删除 RavenDB 目录，但即使使用全新的数据库，Raven 仍然很慢。

知道出了什么问题或如何排除故障吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:20:19.917

如果您使用的是 IntelliTrace，请将其关闭。在异常设置中，标记 Just My Code 并且不要停止处理异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T09:01:35.630

我们有一段时间遇到同样的问题，直到我们发现我们正在为每个请求创建索引（由于 DocumentStore 的错误 IoC 注册）。

我们确保每个应用程序 init 调用该行一次，并且速度消失了：

```
IndexCreation.CreateIndexes(typeof(MyIndex).Assembly, store); 
```

# php - 在字符串中查找单词

> ID：16028012
> 
> 赞同：-7
> 
> 时间：2013-04-16T02:54:50.530
> 
> 标签：php, string

我正在努力完成这项工作。请帮忙

```
function rsfp_onSelectDate(day)
{
if(day strpos('Sunday') !== false));
{
    alert("We are Closed on Sunday");
    return false;
}
else return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:56:30.623

```
day strpos('Sunday') 
```

对我来说似乎无效，您应该尝试：

```
strpos($day, 'Sunday') 
```

反而。来自[在线文档](http://php.net/manual/en/function.strpos.php)：

> **`int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] )`**
> 
> *   在 haystack 字符串中查找第一次出现 needle 的数字位置。

* * *

正如一些诙谐的评论者所说，你不应该仅仅期望编写语法并期望它能够工作。这段代码似乎是 PHP 和 JavaScript 的某种奇怪的混合体。JS 会使用`indexOf`而不是`strpos`，但是 PHP 没有像 JS 那样的内置`alert`函数。此外，您的`day`变量将`$day`在 PHP 中。

# c# - 如何将标头中的用户名/密码传递给 SOAP WCF 服务

> ID：16028014
> 
> 赞同：29
> 
> 时间：2013-04-16T02:54:58.267
> 
> 标签：c#, asp.net, wcf, web-services, soap

我正在尝试使用第三方 Web 服务 [https://staging.identitymanagement.lexisnexis.com/identity-proofing/services/identityProofingServiceWS/v2?wsdl](https://staging.identitymanagement.lexisnexis.com/identity-proofing/services/identityProofingServiceWS/v2?wsdl)

我已经将它添加为服务参考，但我不确定如何传递标头的凭据。

如何使标头请求与此格式匹配？

```
<soapenv:Header>
    <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <wsse:UsernameToken wsu:Id="UsernameToken-49" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>12345/userID</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/ oasis-200401-wss-username-token-profile-1.0#PasswordText">password123</wsse:Password>
            <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">d+VxCZX1cH/ieMkKEr/ofA==</wsse:Nonce>
            <wsu:Created>2012-08-04T20:25:04.038Z</wsu:Created>
        </wsse:UsernameToken>
    </wsse:Security>
</soapenv:Header> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-17T03:24:48.830

楼上的答案太错误了！不要添加自定义标题。从您的示例 xml 来看，它是一个标准的 WS-Security 标头。WCF 绝对支持开箱即用。添加服务引用时，您应该在配置文件中为您创建 basicHttpBinding 绑定。您必须对其进行修改以包含具有模式 TransportWithMessageCredential 的安全元素和具有 clientCredentialType = UserName 的消息元素：

```
<basicHttpBinding>
  <binding name="usernameHttps">
    <security mode="TransportWithMessageCredential">
      <message clientCredentialType="UserName"/>
    </security>
  </binding>
</basicHttpBinding> 
```

上面的配置告诉 WCF 期望 SOAP 标头中的用户 ID/密码通过 HTTPS。然后，您可以在拨打电话之前在代码中设置 ID/密码：

```
var service = new MyServiceClient();
service.ClientCredentials.UserName.UserName = "username";
service.ClientCredentials.UserName.Password = "password"; 
```

除非这个特定的服务提供商偏离标准，否则它应该可以工作。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-16T07:45:55.050

可能有一种更聪明的方法，但您可以像这样手动添加标题：

```
var client = new IdentityProofingService.IdentityProofingWSClient();

using (new OperationContextScope(client.InnerChannel))
{
    OperationContext.Current.OutgoingMessageHeaders.Add(
        new SecurityHeader("UsernameToken-49", "12345/userID", "password123"));
    client.invokeIdentityService(new IdentityProofingRequest());
} 
```

这`SecurityHeader`是一个自定义实现的类，由于我选择使用属性来配置 XML 序列化，因此需要一些其他类：

```
public class SecurityHeader : MessageHeader
{
    private readonly UsernameToken _usernameToken;

    public SecurityHeader(string id, string username, string password)
    {
        _usernameToken = new UsernameToken(id, username, password);
    }

    public override string Name
    {
        get { return "Security"; }
    }

    public override string Namespace
    {
        get { return "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"; }
    }

    protected override void OnWriteHeaderContents(XmlDictionaryWriter writer, MessageVersion messageVersion)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(UsernameToken));
        serializer.Serialize(writer, _usernameToken);
    }
}

[XmlRoot(Namespace = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd")]
public class UsernameToken
{
    public UsernameToken()
    {
    }

    public UsernameToken(string id, string username, string password)
    {
        Id = id;
        Username = username;
        Password = new Password() {Value = password};
    }

    [XmlAttribute(Namespace = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd")]
    public string Id { get; set; }

    [XmlElement]
    public string Username { get; set; }

    [XmlElement]
    public Password Password { get; set; }
}

public class Password
{
    public Password()
    {
        Type = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText";
    }

    [XmlAttribute]
    public string Type { get; set; }

    [XmlText]
    public string Value { get; set; }
} 
```

我没有`Nonce`在 XML 中添加该位`UsernameToken`，但它与那个非常相似`Password`。该`Created`元素还需要添加，但它是一个简单的`[XmlElement]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T14:19:35.883

添加自定义的硬编码标头可能会起作用（有时也可能会被拒绝），但这完全是错误的方法。WSSE 的目的是安全。正是出于这个原因，Microsoft 发布了 Microsoft Web Services Enhancements 2.0 和随后的 WSE 3.0。您需要安装此软件包 ( [http://www.microsoft.com/en-us/download/details.aspx?id=14089](http://www.microsoft.com/en-us/download/details.aspx?id=14089) )。

该文档不容易理解，尤其是对于那些没有使用过 SOAP 和 WS-Addressing 的人。首先，“BasicHttpBinding”是 Soap 1.1，它不会为您提供与 WSHttpBinding 相同的消息头。安装软件包并查看示例。您将需要从 WSE 3.0 引用 DLL，并且您还需要正确设置您的消息。WS Addressing 标头有大量或变体。您正在寻找的是 UsernameToken 配置。

这是一个较长的解释，我应该为大家写一些东西，因为我在任何地方都找不到正确的答案。您至少需要从 WSE 3.0 包开始。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-14T13:50:42.543

显然，这篇文章已经存在了好几年了——但事实是我在寻找类似问题时确实找到了它。在我们的例子中，我们必须将用户名/密码信息添加到 Security 标头中。这与在安全标头之外添加标头信息不同。

执行此操作的正确方法（对于自定义绑定 / authenticationMode="CertificateOverTransport"）（如在 .Net 框架版本 4.6.1 上）是照常添加客户端凭据：

```
 client.ClientCredentials.UserName.UserName = "[username]";
    client.ClientCredentials.UserName.Password = "[password]"; 
```

然后在安全绑定元素中添加一个“令牌” - 因为当身份验证模式设置为证书时，默认情况下不会包含用户名/密码凭据。

您可以像这样设置此令牌：

```
 //Get the current binding 
    System.ServiceModel.Channels.Binding binding = client.Endpoint.Binding;
    //Get the binding elements 
    BindingElementCollection elements = binding.CreateBindingElements();
    //Locate the Security binding element
    SecurityBindingElement security = elements.Find<SecurityBindingElement>();

    //This should not be null - as we are using Certificate authentication anyway
    if (security != null)
    {
    UserNameSecurityTokenParameters uTokenParams = new UserNameSecurityTokenParameters();
    uTokenParams.InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient;
security.EndpointSupportingTokenParameters.SignedEncrypted.Add(uTokenParams);
    }

   client.Endpoint.Binding = new CustomBinding(elements.ToArray()); 
```

那应该这样做。如果没有上述代码（显式添加用户名令牌），即使在客户端凭据中设置用户名信息也可能不会导致将这些凭据传递给服务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-22T20:48:18.610

暗示WCF 开箱即用地支持*问题中提供的标头的答案是不正确的。*问题中的标头在 Us​​ernameToken 中包含**Nonce**和**Created**时间戳，这是 WCF 不支持的 WS-Security 规范的官方部分。**WCF 仅支持开箱即用的用户名和密码**。

如果您需要做的只是添加用户名和密码，那么 Sergey 的答案是最省力的方法。如果您需要添加任何其他字段，则需要提供自定义类来支持它们。

[我发现](https://weblog.west-wind.com/posts/2012/nov/24/wcf-wssecurity-and-wse-nonce-authentication)一种更优雅的方法是覆盖 ClientCredentials、ClientCredentialsSecurityTokenManager 和 WSSecurityTokenizer 类以支持其他属性。我提供了博客文章的链接，其中详细讨论了该方法，但这里是覆盖的示例代码：

```
public class CustomCredentials : ClientCredentials
{
    public CustomCredentials()
    { }

    protected CustomCredentials(CustomCredentials cc)
        : base(cc)
    { }

    public override System.IdentityModel.Selectors.SecurityTokenManager CreateSecurityTokenManager()
    {
        return new CustomSecurityTokenManager(this);
    }

    protected override ClientCredentials CloneCore()
    {
        return new CustomCredentials(this);
    }
}

public class CustomSecurityTokenManager : ClientCredentialsSecurityTokenManager
{
    public CustomSecurityTokenManager(CustomCredentials cred)
        : base(cred)
    { }

    public override System.IdentityModel.Selectors.SecurityTokenSerializer CreateSecurityTokenSerializer(System.IdentityModel.Selectors.SecurityTokenVersion version)
    {
        return new CustomTokenSerializer(System.ServiceModel.Security.SecurityVersion.WSSecurity11);
    }
}

public class CustomTokenSerializer : WSSecurityTokenSerializer
{
    public CustomTokenSerializer(SecurityVersion sv)
        : base(sv)
    { }

    protected override void WriteTokenCore(System.Xml.XmlWriter writer,
                                            System.IdentityModel.Tokens.SecurityToken token)
    {
        UserNameSecurityToken userToken = token as UserNameSecurityToken;

        string tokennamespace = "o";

        DateTime created = DateTime.Now;
        string createdStr = created.ToString("yyyy-MM-ddTHH:mm:ss.fffZ");

        // unique Nonce value - encode with SHA-1 for 'randomness'
        // in theory the nonce could just be the GUID by itself
        string phrase = Guid.NewGuid().ToString();
        var nonce = GetSHA1String(phrase);

        // in this case password is plain text
        // for digest mode password needs to be encoded as:
        // PasswordAsDigest = Base64(SHA-1(Nonce + Created + Password))
        // and profile needs to change to
        //string password = GetSHA1String(nonce + createdStr + userToken.Password);

        string password = userToken.Password;

        writer.WriteRaw(string.Format(
        "<{0}:UsernameToken u:Id=\"" + token.Id +
        "\" xmlns:u=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">" +
        "<{0}:Username>" + userToken.UserName + "</{0}:Username>" +
        "<{0}:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\">" +
        password + "</{0}:Password>" +
        "<{0}:Nonce EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\">" +
        nonce + "</{0}:Nonce>" +
        "<u:Created>" + createdStr + "</u:Created></{0}:UsernameToken>", tokennamespace));
    }

    protected string GetSHA1String(string phrase)
    {
        SHA1CryptoServiceProvider sha1Hasher = new SHA1CryptoServiceProvider();
        byte[] hashedDataBytes = sha1Hasher.ComputeHash(Encoding.UTF8.GetBytes(phrase));
        return Convert.ToBase64String(hashedDataBytes);
    }

} 
```

在创建客户端之前，您创建自定义绑定并手动向其添加安全、编码和传输元素。然后，用您的自定义实现替换默认 ClientCredentials 并像往常一样设置用户名和密码：

```
var security = TransportSecurityBindingElement.CreateUserNameOverTransportBindingElement();
    security.IncludeTimestamp = false;
    security.DefaultAlgorithmSuite = SecurityAlgorithmSuite.Basic256;
    security.MessageSecurityVersion = MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;

var encoding = new TextMessageEncodingBindingElement();
encoding.MessageVersion = MessageVersion.Soap11;

var transport = new HttpsTransportBindingElement();
transport.MaxReceivedMessageSize = 20000000; // 20 megs

binding.Elements.Add(security);
binding.Elements.Add(encoding);
binding.Elements.Add(transport);

RealTimeOnlineClient client = new RealTimeOnlineClient(binding,
    new EndpointAddress(url));

    client.ChannelFactory.Endpoint.EndpointBehaviors.Remove(client.ClientCredentials);
client.ChannelFactory.Endpoint.EndpointBehaviors.Add(new CustomCredentials());

client.ClientCredentials.UserName.UserName = username;
client.ClientCredentials.UserName.Password = password; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T04:11:33.667

假设您的名称`localhost`中有服务参考，`web.config`因此您可以按以下方式进行

```
localhost.Service objWebService = newlocalhost.Service();
localhost.AuthSoapHd objAuthSoapHeader = newlocalhost.AuthSoapHd();
string strUsrName =ConfigurationManager.AppSettings["UserName"];
string strPassword =ConfigurationManager.AppSettings["Password"];

objAuthSoapHeader.strUserName = strUsrName;
objAuthSoapHeader.strPassword = strPassword;

objWebService.AuthSoapHdValue =objAuthSoapHeader;
string str = objWebService.HelloWorld();

Response.Write(str); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-12T17:13:36.467

假设您正在使用 HttpWebRequest 和 HttpWebResponse 调用 Web 服务，因为 .Net 客户端不支持您尝试使用的 WSLD 的结构。

在这种情况下，您可以在标头上添加安全凭据，例如：

```
<soap:Envelpe>
<soap:Header>
    <wsse:Security soap:mustUnderstand='true' xmlns:wsse='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd' xmlns:wsu='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd'><wsse:UsernameToken wsu:Id='UsernameToken-3DAJDJSKJDHFJASDKJFKJ234JL2K3H2K3J42'><wsse:Username>YOU_USERNAME/wsse:Username><wsse:Password Type='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText'>YOU_PASSWORD</wsse:Password><wsse:Nonce EncodingType='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary'>3WSOKcKKm0jdi3943ts1AQ==</wsse:Nonce><wsu:Created>2015-01-12T16:46:58.386Z</wsu:Created></wsse:UsernameToken></wsse:Security>
</soapHeather>
<soap:Body>
</soap:Body>

</soap:Envelope> 
```

您可以使用 SOAPUI 获取 wsse 安全性，使用 http 日志。

请小心，因为这不是一个安全的场景。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-24T06:21:07.330

我从这里得到了一个更好的方法：[WCF: Creating Custom Headers, How To Add and Consume those Headers](http://omegacoder.com/?p=1075)

> **客户端标识自己**
> 这里的目标是让客户端提供某种信息，服务器可以使用这些信息来确定谁在发送消息。以下 C# 代码将添加一个名为 ClientId 的标头：

```
var cl = new ActiveDirectoryClient();

var eab = new EndpointAddressBuilder(cl.Endpoint.Address);

eab.Headers.Add( AddressHeader.CreateAddressHeader("ClientId",       // Header Name
                                                   string.Empty,     // Namespace
                                                    "OmegaClient")); // Header Value
cl.Endpoint.Address = eab.ToEndpointAddress();

// Now do an operation provided by the service.
cl.ProcessInfo("ABC"); 
```

> 该代码所做的是添加一个名为 ClientId 的端点标头，其值为 OmegaClient 以插入到没有命名空间的soap标头中。
> 
> **客户端配置文件**
> 中的自定义标头 自定义标头还有另一种方法。这可以在客户端的 Xml 配置文件中实现，其中通过将自定义标头指定为端点的一部分来发送所有消息，如下所示：

```
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IActiveDirectory" />
            </basicHttpBinding>
        </bindings>
        <client>
          <endpoint address="http://localhost:41863/ActiveDirectoryService.svc"
              binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IActiveDirectory"
              contract="ADService.IActiveDirectory" name="BasicHttpBinding_IActiveDirectory">
            <headers>
              <ClientId>Console_Client</ClientId>
            </headers>
          </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-21T08:23:18.803

我将 customBinding 添加到 web.config。

```
<configuration>
  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="CustomSoapBinding">
          <security includeTimestamp="false"
                    authenticationMode="UserNameOverTransport"
                    defaultAlgorithmSuite="Basic256"
                    requireDerivedKeys="false"
                    messageSecurityVersion="WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10">
          </security>
          <textMessageEncoding messageVersion="Soap11"></textMessageEncoding>
          <httpsTransport maxReceivedMessageSize="2000000000"/>
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint address="https://test.com:443/services/testService"
                binding="customBinding"
                bindingConfiguration="CustomSoapBinding"
                contract="testService.test"
                name="test" />
    </client>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0"
                      sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

添加 customBinding 后，我可以将用户名和密码传递给客户端服务，如下所示：

```
service.ClientCridentials.UserName.UserName = "testUser";
service.ClientCridentials.UserName.Password = "testPass"; 
```

通过这种方式，您可以将标头中的用户名、密码传递给 SOAP WCF 服务。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-16T16:08:20.127

如果这与此 Peoplesoft 问题有关：https: [//support.oracle.com/knowledge/PeopleSoft%20Enterprise/2370907_1.html](https://support.oracle.com/knowledge/PeopleSoft%20Enterprise/2370907_1.html)

我需要在 Soap 密码上设置该属性，而之前该属性并未在该标签上设置。

我只是在我的自定义绑定上设置 MessageSecurityVersion：

```
 CustomBinding customBinding = new CustomBinding();
            customBinding.Name = endpointName;
            customBinding.CloseTimeout = TimeSpan.FromMinutes(1);
            customBinding.OpenTimeout = TimeSpan.FromMinutes(1);
            customBinding.SendTimeout = TimeSpan.FromMinutes(20);
            customBinding.ReceiveTimeout = TimeSpan.FromMinutes(20);

            TextMessageEncodingBindingElement textMessageElement = new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8);
            customBinding.Elements.Add(textMessageElement);

            TransportSecurityBindingElement securityElement = SecurityBindingElement.CreateUserNameOverTransportBindingElement();
            securityElement.IncludeTimestamp = false;
            securityElement.MessageSecurityVersion = MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
            customBinding.Elements.Add(securityElement);

            // ORDER MATTERS: THIS HAS TO BE LAST!!! - HVT
            HttpsTransportBindingElement transportElement = new HttpsTransportBindingElement();
            transportElement.MaxBufferSize = int.MaxValue;
            transportElement.MaxReceivedMessageSize = int.MaxValue;
            customBinding.Elements.Add(transportElement);

            return customBinding; 
```

# jquery - jQuery - 改进代码并消除重复

> ID：16028015
> 
> 赞同：0
> 
> 时间：2013-04-16T02:55:01.513
> 
> 标签：jquery, jquery-selectors, maintainability

我对各种 jQuery 方法进行了一系列调用，我只是想知道是否有办法清理此代码，将其转换为我将选择器传递给的函数，或者任何其他可以使代码更易于管理的方法/可维护。我所拥有的是一个非常长的代码行列表，这些代码行有很多重复：

```
...
$('#boxcolor').on('change', function() {
    $('header').css('background-color', $('#boxcolor').val());
});
$('#color').on('change', function(){
    $('header').css('color',$('#color').val());
});
$('#size').keyup(function() {
    $('header').css('font-size', $('#size').val() + 'px');    
});
... 
```

任何建议都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T03:04:57.407

只是我的建议：

```
var header = $('header');

$('#boxcolor').change({
    property: 'background-color'
}, handler );

$('#color').change({
    property: 'color'
}, handler );

$('#size').keyup({
    property: 'font-size',
    unit: 'px'
}, handler );

function handler( e ) {
    header.css( e.data.property, $( this ).val() + ( e.data.unit || "" ) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:03:55.710

我没有看到很多可以重构的东西，但是，如果你总是选择标题，你可以这样做：

```
var changeHeaderStyles = function() {
   var header = $('header');
   //use a clousure here to only get the header once
   return function(cssObject) {
       $header.css(cssObject);
   }
}(); 

//Then..
$('#size').keyup(function() {
    changeHeaderStyles({ 'font-size': $('#size').val() + 'px' });    
}); 
```

因此，您可以一次更改多个样式，并且可以清楚地阅读正在发生的事情。

希望能帮助到你

# java - 使用 ServerSockets 和 Sockets 进行多线程 JUnit 测试

> ID：16028016
> 
> 赞同：1
> 
> 时间：2013-04-16T02:55:06.310
> 
> 标签：java, multithreading

我正在尝试为我编写的服务器/客户端编写 JUnit 测试，因此我创建了充当服务器的 Runnable，而我当前的线程充当客户端。在尝试写入客户端套接字的输出流之前，我在服务器 Runnable 上调用 start()。但是，我的程序总是在之后终止`Socket client = new Socket("hostname", 0);`，我不知道为什么。我的猜测是这是因为我试图在同一个测试中创建一个套接字和客户端？因此，将 ip 绑定为客户端并同时监听该 ip 会导致异常行为吗？这个对吗？我该如何解决这个困境？

```
public void test() {
        int result;
        String strMsg = "dasda";
        try {
            Thread serverThread = new Thread(new ServerRunnable());
            serverThread.start();
            Socket client = new Socket("hostname", 0);
            OutputStream os = client.getOutputStream();
            os.write(strMsg.getBytes());
            InputStream is = client.getInputStream();
            while (true){
                result = is.read();
                ByteBuffer bb = ByteBuffer.allocate(4);
                bb.putInt(result);
                String input = new String(bb.array());
                if (input=="Success") return;
            }
        } catch (IOException e1){
            fail("IOException on client");
        }

    }

    class ServerRunnable implements Runnable {
        ServerSocket server;
        public ServerRunnable(){
            server = new ServerSocket(0);
        }
        public void run(){
            try {
                active = true;
                    while (active) {
                     Socket sock = server.accept();
                    }
            } catch (IOException e1){
                fail("IOException in Server");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T03:10:58.027

`new ServerSocket(0)`将创建一个侦听任何空闲端口的服务器，该端口在每次运行测试时都会有所不同。 `new Socket("hostname", 0)`虽然正在尝试专门连接到端口 0，但这将失败。

由于您首先初始化服务器，因此您可以调用`getLocalPort()`以`ServerSocket`获取服务器正在侦听的端口，然后在创建客户端时使用此端口号`Socket`。

您可能还需要将主机从 更改为`"hostname"`，`"localhost"`以便它连接到本地计算机上的端口。

以下是根据您的代码改编的示例。要查看的主要项目是`Socket client = new Socket("localhost", sr.getPort());`

```
public void test() throws Exception {
    // start up the server
    ServerRunnable sr = new ServerRunnable();
    Thread serverThread = new Thread(sr);
    serverThread.start();

    // connect the client to the port the server is listening on
    Socket client = new Socket("localhost", sr.getPort());

    // client socket interactions go here

    client.close();
}

class ServerRunnable implements Runnable {
    private ServerSocket server;

    public ServerRunnable() throws IOException {
        // listen on any free port
        server = new ServerSocket(0);
    }

    public void run() {
        try {
            while (true) {
                Socket sock = server.accept();

                // normally you will need to start a thread to handle
                // the new socket so that the server will be able to accept
                // new connections but this may not be necessary for
                // unit testing where only a single connection occurs.

                sock.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public int getPort() {
        return server.getLocalPort();
    }
} 
```

# c - 我在 ubuntu12.04 中使用 Libtar 时的 strncpy() 核心转储

> ID：16028021
> 
> 赞同：0
> 
> 时间：2013-04-16T02:55:27.343
> 
> 标签：c, tar, strncpy

我在 encode.c:33 中跟踪 coredump。

源代码如下：

```
if (t->options & TAR_GNU) 
    strncpy(t->th_buf.magic, "ustar  ", 8);    // here is the coredump                                                                                                                                 
else
    .... 
```

函数调用栈是这样的：

```
0x4064d73a in strncpy (__len=8, __src=0x40663b34 "ustar  ", __dest=0x4104e5ed "") at /usr/include/i386-linux-gnu/bits/string3.h:121
0x4024e342 in __strncpy_chk () from /lib/i386-linux-gnu/libc.so.6
0x4024ee1a in __chk_fail () from /lib/i386-linux-gnu/libc.so.6
0x40250065 in __fortify_fail () from /lib/i386-linux-gnu/libc.so.6
0x401b739a in ?? () from /lib/i386-linux-gnu/libc.so.6
0x4017d825 in abort () from /lib/i386-linux-gnu/libc.so.6
0x4017a1df in raise () from /lib/i386-linux-gnu/libc.so.6
0x40064424 in __kernel_vsyscall ()
<signal handler called>
sig_coredump (sig=6) at mpm_common.c:1207 
```

t->th_buf.magic 是 tar_header 的结构，定义：

```
struct tar_header{
    ...;
    char magic[6];
    char version[2];
    ...;
} 
```

我很确定 strncpy 可以以这种方式使用。

就我而言， t->th_buf 已经有 malloc 了。

在 gdb 中：

```
(gdb) p t->th_buf
$5 = {name = "/TARFILE.C", '\000' <repeats 89 times>, mode = "100644 ", 
      uid = "    41", gid = "    41 ", size = "     207114 ", mtime = "12115070475 ", 
      chksum = "\000\000\000\000\000\000\000", typeflag = 48 '0', linkname = '\000' <repeats 99 times>, 
      magic = "\000\000\000\000\000", version = "\000",
      ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:59:08.037

您正在尝试复制 8 个字节：

```
strncpy(t->th_buf.magic, "ustar  ", 8); 
```

进入一个为 6 分配空间的缓冲区

```
char magic[6]; 
```

不去上班。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:59:10.317

`magic`只有 6 个字符，而您正在向其写入 8 个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T03:12:55.617

尽管您试图将 8 个字节复制到一个只能容纳 6 个字节的缓冲区中，但这通常不会成为问题。

它通常不是问题的原因是紧随其后的两字节字符数组完全能够处理缓冲区溢出：

```
struct tar_header{
    ...;
    char magic[6];
    char version[2];     // Can absorb extra two chars easily.
    ...;
} 
```

* * *

真正的问题`strncpy`是大多数人不明白它是如何工作的。

如果要复制的缓冲区大于您指定的大小，它基本上会停止在该大小处并且不再复制，*包括字符串末尾的空终止符。*

因此`strncpy`最终可能会给你一些*不是*C 字符串的东西，如果你随后尝试将它用作 C 字符串（例如将它传递给`strlen`），那么所有的地狱都可能会崩溃。

这就是为什么我更喜欢使用`strlen`check 后跟`strcpy`，假设数据不能在两个部分之间更改。这样，您就可以*保证*得到一个 C 字符串（或者您事先知道它）。

* * *

但是，这也不是这里的具体问题。

在您的调用堆栈中，有一个对检查函数的调用，`__strncpy_chk`如下所示：

```
char *
__strncpy_chk (s1, s2, n, s1len)
     char *s1;
     const char *s2;
     size_t n;
     size_t s1len;
{
    char c;
    char *s = s1;

    if (__builtin_expect (s1len < n, 0))
        __chk_fail ();
    :
    rest of function to copy the stuff.
} 
```

因此，它会*提前*检查源字符串对于您指定的长度是否太长，并且在尝试复制之前就失败了。这基本上是在执行我之前提到的相同步骤，但会强制崩溃，而不是您在自己的代码中知道它。

这就是您的错误的来源，运行时库中的一些额外安全性。

请记住，这个额外的检查只在[调试代码](https://github.com/lattera/glibc/blob/master/debug/strncpy_chk.c)中，而不是在[生产就绪代码](https://github.com/lattera/glibc/blob/master/string/strncpy.c)中。这样，您可以确认您在开发过程中所做的事情是正确的，而不会减慢您在现场的代码。

# jaxb - java 7 jaxb unmarshall 与 java 6 不兼容

> ID：16028023
> 
> 赞同：4
> 
> 时间：2013-04-16T02:55:32.330
> 
> 标签：jaxb, java-7, java-6

我的应用程序在 java 6 中运行良好，但是在我将 java 更新到版本 7 后，一些测试失败了。通过调试，我发现 jaxb 无法使用 java 7 正确解析某些 xml 文件。这是我的代码：

用于测试的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ma:recommendations xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ma="http://schemas.hyi.com/service/1.0"><responseTime>17</responseTime><requestId>MRECS-123a40a9-9cbe-4580-88a2-d88e86abcac8</requestId>
    <ma:recommendation>
        <id>pop1-a</id>
        <type></type>
        <name></name>
        <category></category>
        <rating>1.0</rating>
        <price></price>
        <currency></currency>
        <iconURI></iconURI>
        <downloadURI></downloadURI>
        <ratingCount></ratingCount>
        <downloadCount></downloadCount>
        <ma:extensions>
          <ma:extension ma:key="type">
            <ma:value>foo</ma:value>
          </ma:extension>
        </ma:extensions>
    </ma:recommendation>
</ma:recommendations> 
```

jaxb 无法再正确解析出扩展标签，它总是为扩展返回 null。

代码在这里：RecommendedItem .java

```
@XmlRootElement(namespace = XMLNamespace.URL)
@XmlAccessorType(XmlAccessType.NONE)
@XmlType()
public final class RecommendedItem implements Serializable {

    /**
     * Item type extension field name.
     */
    public static final String ITEM_TYPE_EXTENSION = "type";
    ....
    @XmlElement(name = "extensions", namespace = XMLNamespace.URL, required = false)
    private ExtensionMap _extensions;
    ... 
```

ExtensionMap.java

```
@XmlRootElement(namespace = XMLNamespace.URL)
@XmlAccessorType(XmlAccessType.NONE)
@XmlType(namespace = XMLNamespace.URL)
public final class ExtensionMap extends HashMap<String, String> {
    /** Serialized version unique identifier. */
    private static final long serialVersionUID = -7235844731135521813L;

    /**
     * Default constructor to support JAXB binding.
     */
    public ExtensionMap() {
        super();
    }
    /**
     * Default constructor to support JAXB binding.
     * @param capacity The expected capacity of the map.
     */
    public ExtensionMap(int capacity) {
        super(capacity);
    }

    /**
     * The list of wrapped Map entries that are structured for binding to XML
     * with JAXB.
     * 
     * @return The list of wrapped Map entries that are structured for binding
     *         to XML with JAXB.
     */
    @XmlElement(name = "extension", namespace = XMLNamespace.URL, required = false)
    @SuppressWarnings("unused")
    private List<ExtensionMapElement> getEntries() {
        return new ListAdapter();
    }
    /**
     * The list of wrapped Map entries that are structured for binding to XML
     * with JAXB.
     * 
     * @param entries The list of wrapped Map entries that are structured for binding
     *         to XML with JAXB.
     */
    @SuppressWarnings("unused")
    private void setEntries(List<ExtensionMapElement> entries) {
        if (entries != null) {
            for (ExtensionMapElement entry : entries) {
                put(entry.getKey(), entry.getValue());
            }
        }
    }

    /**
     * Adapter for the list collection.
     * 
     */
    private class ListAdapter implements List<ExtensionMapElement> {

        @Override
        public boolean add(ExtensionMapElement e) {
            put(e.getKey(), e.getValue());
            return true;
        }

        @Override
        public void add(int index, ExtensionMapElement element) {
            add(element);
        }

        @Override
        public boolean addAll(Collection<? extends ExtensionMapElement> c) {
            if (c != null) {
                for (ExtensionMapElement element : c) {
                    add(element);
                }
            }
            return true;
        }

        @Override
        public boolean addAll(int index, Collection<? extends ExtensionMapElement> c) {
            addAll(c);
            return true;
        }

        @Override
        public void clear() {
            ExtensionMap.this.clear();
        }

        @Override
        public boolean contains(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean containsAll(Collection<?> c) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ExtensionMapElement get(int index) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public int indexOf(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean isEmpty() {
            return ExtensionMap.this.isEmpty();
        }

        @Override
        public Iterator<ExtensionMapElement> iterator() {
            return new Iterator<ExtensionMapElement>() {
                private Iterator<Map.Entry<String, String>> _iter = ExtensionMap.this.entrySet().iterator();

                @Override
                public boolean hasNext() {
                    return _iter.hasNext();
                }

                @Override
                public ExtensionMapElement next() {
                    return new ExtensionMapElement(_iter.next());
                }

                @Override
                public void remove() {
                    throw new UnsupportedOperationException("Not supported yet.");
                }
            };
        }

        @Override
        public int lastIndexOf(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ListIterator<ExtensionMapElement> listIterator() {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ListIterator<ExtensionMapElement> listIterator(int index) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean remove(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ExtensionMapElement remove(int index) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean removeAll(Collection<?> c) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean retainAll(Collection<?> c) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ExtensionMapElement set(int index, ExtensionMapElement element) {
            add(element);
            return null;
        }

        @Override
        public int size() {
            return ExtensionMap.this.size();
        }

        @Override
        public List<ExtensionMapElement> subList(int fromIndex, int toIndex) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public Object[] toArray() {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public <T> T[] toArray(T[] a) {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    }
}
/**
 * A utility type that wraps map entries to support a mapping between a
 * {@link java.util.Map} interface and a class that can be bound to XML using
 * JAXB.
 */
@XmlRootElement(namespace = XMLNamespace.URL)
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(namespace = XMLNamespace.URL)
final class ExtensionMapElement implements Serializable {

    /**
     * Serialized version unique identifier.
     */
    private static final long serialVersionUID = 8211130122512683829L;

    /**
     * The key of the wrapped map entry.
     */
    @XmlAttribute(name = "key", namespace = XMLNamespace.URL, required = true)
    private String _key;

    /**
     * The value of the wrapped map entry.
     */
    @XmlElement(name = "value", namespace = XMLNamespace.URL, required = true)
    private String _value;

    /**
     * Default constructor to support JAXB Binding.
     */
    public ExtensionMapElement() {
    }

    /**
     * Wraps a map entry with an instance of this class.
     * 
     * @param e
     *            The map entry to wrap.
     */
    public ExtensionMapElement(Map.Entry<String, String> e) {
        _key = e.getKey();
        _value = e.getValue();
    }

    /**
     * The key of the wrapped map entry.
     * 
     * @return The key of the wrapped map entry.
     */
    public String getKey() {
        return _key;
    }

    /**
     * The value of the wrapped map entry.
     * 
     * @return The value of the wrapped map entry.
     */
    public String getValue() {
        return _value;
    }
} 
```

请帮忙。谢谢。

# ruby - nokogiri 将无法安装 - 错误：无法构建 gem 原生扩展

> ID：16028028
> 
> 赞同：13
> 
> 时间：2013-04-16T02:56:00.857
> 
> 标签：ruby, gem, nokogiri

在 ubuntu 12.04 上，我得到以下信息。

```
sudo apt-get install libxml2 libxml2-dev libxslt libxslt-dev
sudo gem install nokogiri
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:5:in `<main>'

Gem files will remain installed in /var/lib/gems/1.9.1/gems/nokogiri-1.5.9 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/nokogiri-1.5.9/ext/nokogiri/gem_make.out 
```

这是 ruby​​ 的 myh 版本

```
ruby --version
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux] 
```

我正在尝试安装与knife-ec2 for chef 一起使用。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-16T03:16:46.567

您应该有必要的必需软件包：

**红宝石**

```
sudo apt-get install ruby1.8-dev ruby1.8 ri1.8 rdoc1.8 irb1.8
sudo apt-get install libreadline-ruby1.8 libruby1.8 libopenssl-ruby 
```

**小切**

```
sudo apt-get install libxslt-dev libxml2-dev zlib1g-dev
sudo gem install nokogiri 
```

这应该解决这个问题。或者，请参阅[在 Ubuntu 12.10 上安装 Nokogiri (1.5.2) 的问题，](https://stackoverflow.com/questions/8003523/error-installing-nokogiri-1-5-0-with-rails-3-1-0-and-ubuntu)它也应该能够回答您的问题。供将来参考的指针。尝试研究stackoverflow或其他可能有答案的资源，因为您可能会发现您的问题已经解决了Wi

# delphi - 什么替代了 ToolServices.GetUnitCount？

> ID：16028039
> 
> 赞同：0
> 
> 时间：2013-04-16T02:56:58.210
> 
> 标签：delphi, delphi-xe2, delphi-xe

我正在尝试恢复和编译 XE2 下的一些旧资源。

有一个例程使用在 ExptIntf.pas（已弃用）中定义的“ToolServices.GetUnitCount”作为 ToolServices：TIToolServices = nil;

而且，TIToolServices 在 ToolIntf.pas （也已弃用）中定义为 TIToolServices = class(TInterface)

最后，GetUnitCount 被描述为“返回属于该项目的当前单元数”。

问题是：我如何（不使用 ExptIntf.pas 或 ToolIntf.pas）获得属于该项目的当前单元数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:03:07.107

正确的响应取决于您的代码的作用，但好的候选人可能是：

*   `IOTAProject40`

    ```
    { Return the number of owned modules }
    function GetModuleCount: Integer;
    { Return the Indexed owned Module Info }
    function GetModule(Index: Integer): IOTAModuleInfo;
    { Return the Project options } 
    ```

*   `IOTAProject140`

    ```
    { Returns a list of fully qualified file names.  This will contain files
      that do not show up in the project manager, for example, the project's
      .res file }
    procedure GetCompleteFileList(FileList: TStrings); 
    ```

两者都是`IOTAProject`界面的祖先，所以你手头有两种口味。要使用 Open Tools API，您必须使用该[`ToolsAPI`](http://docwiki.embarcadero.com/Libraries/XE3/en/ToolsAPI_Unit)单元。看看`source\ToolsAPI`你的 Delphi 安装文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:08:17.493

XE2 和 XE3 帮助文件中有关于['Extending API'](http://docwiki.embarcadero.com/RADStudio/XE3/en/Extending_the_IDE_Index)的文档，它为您提供有关使用模块和文件以及使用编辑器资源的信息。[“EditorViewAPI”](http://docwiki.embarcadero.com/CodeExamples/XE3/en/VCL.EditorViewAPI_Sample)的演示可能对您有所帮助。所有服务都可以通过 ToolsAPI 和 IOTAServices 接口获得。与早期版本相比，文档和示例要多得多。EditorViewAPI 是一个实际安装的示例应用程序，您可以对其进行试验以了解其工作原理。

# java - 使用域对象获取数据

> ID：16028042
> 
> 赞同：0
> 
> 时间：2013-04-16T02:57:38.433
> 
> 标签：java, hibernate

我有一个具有 id（自动生成）、person_id、airport_id、姓名、职位、状态的域对象。person_id 和 airport_id 组合可以唯一标识一行。

有没有办法填写这两个属性并通过休眠发送域对象，以便休眠自动填充其他字段。实现此目的的另一种方法是通过命名查询，但这是我的最后一个选择。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:18:11.917

如果您使用的是[HibernateTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/HibernateTemplate.html)，则可以利用方法[findByExample(Object)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/HibernateTemplate.html#findByExample%28java.lang.Object%29)。

其中，传递给`findByExample`方法的参数将是`criteria object`- 所以，在你的情况下，一个`entity`with`personId`和`airportId`set。的结果`findByExample(entity)`是一个`List`包含所有匹配实体的其他数据填充。

如果您使用的是普通休眠，则可以使用[Criteria](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Criteria.html)来实现。

```
Criteria c = session.createCriteria(YourEntity.class);
c.add(Restrictions.eq("personId", p_id_value));
c.add(Restrictions.eq("airportId", a_id_value)); 
c.list(); //This should again return a list containing all the matching entities with the values filled 
```

# maven - 如何从父 pom 'mvn jetty:run'？

> ID：16028051
> 
> 赞同：2
> 
> 时间：2013-04-16T02:58:40.007
> 
> 标签：maven, jetty

我有一个包含多个 .war 包的多模块项目。我希望能够在父 pom 上运行“mvn jetty:run”，并将每个子模块的 .wars 部署在同一个嵌入式码头实例上。

我能够从每个子模块成功运行“mvn jetty:run”，但是当我在父 pom 上运行它时，它会失败并跳过子模块。

尝试从父 pom 运行 'mvn jetty:run' 会导致以下结果：

> [错误] 无法在项目 FlashCards_App 上执行目标 org.mortbay.jetty:maven-jetty-plugin:6.1.16:run default-cli)：Webapp 源目录 C:\dev\sour ce_code\FlashCards_App\src\main\webapp不存在 -> [帮助 1]

确实，父 pom 上没有 webapp 目录。

这是我的pom的摘录。完整的文件可以在[这里找到](https://github.com/justinhrobbins/FlashCards_App/blob/e9e613e94051ba55bf1eaaa05a45438931c8fa84/pom.xml)。

```
<modules>
    <module>FlashCards_Domain</module>
    <module>FlashCards_GWT</module>
    <module>FlashCards_Service</module>
    <module>FlashCards_Service_SpringData</module>
    <module>FlashCards_Service_Jpa</module>
    <module>FlashCards_WebServices</module>
    <module>FlashCards_Struts</module>
    <module>FlashCards_Test</module>
</modules>
<build>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>${jetty.version}</version>
        </plugin>
    </plugins>
</build> 
```

这与 2009 年在[这篇文章](https://stackoverflow.com/questions/639616/how-do-i-deploy-multiple-peer-webapps-from-a-parent-pom)中提出的问题基本相同。已经有几年了，我想知道现在是否还有其他选择。上一篇文章提出了两种解决方案（1）使用 cargo 插件和（2）从子模块构建姐妹战争。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:09:35.573

你最好的办法可能是配置 jetty 插件来[运行多个 webapps](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html#running-more-than-one-webapp)。我不确定它是否可以从你的父 pom 中工作，所以你可能必须使用你的模块作为“启动器”webapp，或者在你的父项目中创建一个“虚拟 webapp”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-23T08:00:11.487

```
 <plugin>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>9.2.6.v20141205</version>
            <configuration>
                <scanIntervalSeconds>0</scanIntervalSeconds>
                <webApp>
                    <contextPath>/</contextPath>
                </webApp>
                <contextHandlers>
                    <contextHandler implementation="org.eclipse.jetty.maven.plugin.JettyWebAppContext">
                        <war>${project.basedir}/app1/target/app1.war</war>
                        <contextPath>/app1</contextPath>
                    </contextHandler>
                    <contextHandler implementation="org.eclipse.jetty.maven.plugin.JettyWebAppContext">
                        <war>${project.basedir}/app2/target/app2.war</war>
                        <contextPath>/app2</contextPath>
                    </contextHandler>
                </contextHandlers>
                <stopPort>9999</stopPort>
                <stopKey>STOP</stopKey>
            </configuration>
        </plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-23T13:29:58.767

> cd parent_module
> mvn jetty:run -pl sub_module

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-28T00:55:16.733

> cd parent_module
> mvn jetty:run -pl sub_module

要完成[@jiahut](https://stackoverflow.com/users/1517100/jiahut)答案：

```
$ mvn jetty:run --help
(...)
-am,--also-make                        If project list is specified, also
                                        build projects required by the
                                        list
-amd,--also-make-dependents            If project list is specified, also
                                        build projects that depend on
                                        projects on the list
(...)
-pl,--projects <arg>                   Comma-delimited list of specified 
                                        reactor projects to build instead
                                        of all projects. A project can be
                                        specified by [groupId]:artifactId
                                        or by its relative path 
```

[来自Apache Archiva](https://archiva.apache.org/developers/building.html)的示例：

```
mvn jetty:run -pl :archiva-webapp -am 
```

# php - 数组中的日期格式如何调整？

> ID：16028061
> 
> 赞同：0
> 
> 时间：2013-04-16T03:00:38.357
> 
> 标签：php, mysql, arrays

我不知道如何在从 MYSQL 中提取所有键的数组中仅隔离 Date 变量。我想让它格式化为 %M %d。我怎样才能把它从 $dataFields 数组中拉出来修改它然后放回去？关键是“日期”。

```
include('include/connect.php');

$table='currentJobs';

$sql="SELECT * FROM `".$table."`";
$result=mysql_query($sql,$dbLink);

$data=array();
$d=0;
while($row=mysql_fetch_assoc($result)){
    $dataFields=array();

    while(list($key,$value)=each($row)){
        $dataFields[]='<td class="'.$key.'" >'.$row[$key].'</td>';
        if ($d==0){
            $dataKeys[]='<th class="'.$key.'" >'.$key.'</th>';
        }
    }

    if ($d==0){
        $data[$d]='<tr>'.join('',$dataKeys).'<th class="actions">Actions</th></tr>';
        $d++;
    }   

    $data[$d]='<tr>'.join('',$dataFields).'<td>
        <a href="update.php?id='.$row['id'].'">Update</a></td></tr>';
    $d++;
}
mysql_free_result($result);

if ($d>0){
    echo '<table class="sortable">'.join('',$data).'</table>';
}
else {
    echo 'Sorry, data was not found';
}

mysql_close($dbLink); 
```

目前正在显示：

```
Date    Name    Phone   Bike_Year   Bike_Model  Current_Status  Service_Type ▴  Mechanic    Revenue Notes   Actions
0000-00-00  Test User   206-555-5555    2001    FLHRI   Checked In  Spec Service Interval   Johhny  840.30      Update 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:17:10.540

```
$sql="SELECT 
    date_format(date, '%M %d') AS date,
    Name,Phone,Bike_Year,Bike_Model,Current_Status  Service_Type,Mechanic,Revenue,Notes
FROM `".$table."`"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:14:36.723

这种方法效率低于 JOE LEE 建议的仅修改 SQL 中的格式。但无论哪种方式都有效，无论您喜欢哪种方式都应该有效。

```
if($key == 'Date'){
    $dataFields[]='<td class="'.$key.'" >'.date('M d',strtotime($row[$key])).'</td>';
} else {
    $dataFields[]='<td class="'.$key.'" >'.$row[$key].'</td>';
} 
```

或紧凑：

```
$dataFields[] = $key == 'Date' ? date('M d',strtotime($row[$key])) : $row[$key]; 
```

在此处查找日期格式选项： [http ://us1.php.net/manual/en/function.date.php](http://us1.php.net/manual/en/function.date.php)

# python - 确定列表中单词连贯模式的有效方法

> ID：16028063
> 
> 赞同：1
> 
> 时间：2013-04-16T03:01:09.043
> 
> 标签：python

假设我将这些短语存储在单词列表中：

```
** school education high support level -->    support education high school level support
** school education high support level -->    support education high school level level education
** school education high support level -->    education high school level support education school
** school education high support level -->    support education high school level support 
```

比较列表列表的元素并选择与所有成员最相似的模式的最有效方法是什么？

```
[['support', 'education', 'high', 'school', 'level', 'support'],
['support', 'education', 'high', 'school', 'level', 'level', 'education'],
['education', 'high', 'school', 'level', 'support', 'education', 'school'],
['support', 'education', 'high', 'school', 'level', 'support']] 
```

--- 产量

[支持、教育、高中、学校、水平]

**更新**

感谢您的意见和反馈。我含糊其辞，虽然我认为说这不是一个完全明确的问题会更准确。

(1) 绝对要保持**词序**

(2) 标准比仅仅保留存在的所有元素的集合要复杂一些（即 set(A) & set(B) 不是我真正想要的）

(3) 更像是“大部分存在的所有元素的集合”，这个词主要被定义为一些可调整的参数，比如在 60% 的情况下存在，或者 70% ......

我可以编写自己的函数（我确实做到了），但它很慢而且很麻烦。我认为必须有一些来自集合或 itertools 或类似模块的技巧才能更快地获取此解决方案。就像我了解了 Collections.Counter() 一样，我的函数切换并变得更快。我知道有一个 'bag' 或 'multiset' 选项，但没有用它来处理模糊集的概念，其中成员资格是由一个事物的许多示例中出现的概率定义的。

这就是为什么我要求提供反馈和对这些策略的见解。

# matlab - 对点进行分类并添加彩条

> ID：16028065
> 
> 赞同：1
> 
> 时间：2013-04-16T03:01:34.747
> 
> 标签：matlab

我有一个矩阵。

```
Mat_=[ x y z intensity];

e.g., intensity= rand(100,1) 
```

现在我想根据强度对我的观点进行着色和分类。说我想要 6 或 10 节课。我也想用彩条展示它。最好的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:16:04.483

您可以使用`kmeans`集群`intensity`成所需数量的集群。然后根据聚类强度得到的指标进行聚类（假设和`[x y z]`之间存在一一对应关系）。然后可能为每个集群分配不同的颜色，然后显示。`[x y z]``intensity`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:16:51.183

您可能想要这样：请注意，我不会将数据聚集成碎片，我只是将它们绘制在颜色栏中，并使用它们所具有的强度值。你可能想改变它，但我认为这并不难；）（提示：`mod`可能会有所帮助）。

PD：`kmeans`也可以

```
% Create data
[X,Y] = meshgrid(-2:.2:2, -2:.2:2);                                
Z = X .* exp(-X.^2 - Y.^2);

intensity= rand(size(X));

%Get max and min
m=min(min(intensity));
M=max(max(intensity));

%set colorbar property
caxis([m M]); 
colorbar();

%get colors by intensity
colors=zeros(size(X,1),size(X,2),3);
cmap=colormap('jet'); %change for other colormaps
for i=1:size(X,1)
    for j=1:size(X,2)
        colors(i,j,:)=cmap(round(intensity(i,j)*(size(cmap,1)-1)+1),:);     
    end
end
%plot
hold on
for i=1:size(X,1)
    for j=1:size(X,2)
       plot3(X(i,j),Y(i,j),Z(i,j),'.','Color',colors(i,j,:));  
    end
end
hold off 
```

![在此处输入图像描述](https://i.stack.imgur.com/6crPm.png)

# java - 二叉搜索树 bst

> ID：16028070
> 
> 赞同：0
> 
> 时间：2013-04-16T03:02:18.423
> 
> 标签：java, binary-search-tree

所以，我需要构建一个不平衡的二叉搜索树，创建一个平衡它的方法，我通过基于级别顺序遍历（或至少尝试）构建一个排序数组来做到这一点，然后打印出平衡的二叉搜索树。这是我的尝试，但它只输出内存位置。帮助 ！

```
 public class BalanceTree {
      public static BST balanceTree(int[]list){
       if(list.length==0)//if length is zero, then empty list, cannot balance
         return null;

       return balanceTree(list,0,list.length-1);}//recursively call balance 

     public static BST balanceTree(int[] list, int begin, int end){//take sorted array from unbalanced tree
       if (begin>end) 
         return null;
       int mid = (begin+end)/2;//find midpoint, assign as root node
       BST chld = new BST(list[mid]);
       chld.left = balanceTree(list,begin,mid-1);//assign as left child
       chld.right = balanceTree(list, mid+1,end);//assign as right child
       return chld;
     }

    public static void levelOrderPrint(Node node){
            int h = height(node);
            for(int i=1; i<=h;i++){
               printLevel(node,i); //print every level

            }
    }
     public static int height (Node t)//find height of tree
      {
        if (t.left == null && t.right == null) //leaf check
          return 0;
        else if (t.left == null)
          return 1 + height(t.right);
        else if (t.right == null)
          return 1 + height(t.left);
        else
          return 1 + Math.max(height(t.left),height(t.right));
      }

     public static void printLevel(Node node, int level){
            if(node ==null){
                return;
            }
            if(level == 1){
                System.out.println(node);
            }
            else if (level > 1){
                printLevel(node.left,level-1);
                printLevel(node.right,level-1);
            }
        }

     public static void main(String[] args) { 
      Node node = new Node(); 
      node.root=26; 
      int [] sortedArray = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26};

      System.out.println("Now Building Unbalanced Tree. Root Node: " + node.root); 
      node.insertNode(node, 25); 
      node.insertNode(node, 24);  
      node.insertNode(node, 23);  
      node.insertNode(node, 22);  
      node.insertNode(node, 21);  
      node.insertNode(node, 20);  
      node.insertNode(node, 19);  
      node.insertNode(node, 18);  
      node.insertNode(node, 17);  
      node.insertNode(node, 16);  
      node.insertNode(node, 15);  
      node.insertNode(node, 14);  
      node.insertNode(node, 13);  
      node.insertNode(node, 12);  
      node.insertNode(node, 11);  
      node.insertNode(node, 10);  
      node.insertNode(node, 9); 
      node.insertNode(node, 8);  
      node.insertNode(node, 7);  
      node.insertNode(node, 6);  
      node.insertNode(node, 5);  
      node.insertNode(node, 4);  
      node.insertNode(node, 3);  
      node.insertNode(node, 2);  
      node.insertNode(node, 1); 
      System.out.println("*********************************************");
      System.out.println("Now building balanced binary search tree: ");

      //int[] arr = 
      levelOrderPrint(node);// I know this should be the array " arr" which is passed into the balance tree method
    balanceTree(sortedArray,0,25);// I know this must use the array from the "levelorderPrint" method,
    //but i could not get it to compile, so i substituted in an already sorted array.

     } 
     }

      public class BST{//constructing bst node
       int val;
       BST left;
       BST right;
       BST(int x){
         val = x;}
     }
    public class Node {
 Node node;
 int root; 
 Node left; 
 Node right; 

 public void insertNode(Node node, int num) { //building unbalanced tree
  if(num < node.root) // if current node is less than root node, insert to the left
  { 
   while(node.left != null) 
   { 
    node = node.left; 
    if( num > node.root){ //if current node is greater than root node, insert to the right

     Node temp = new Node(); 
     temp.root = num; 
     node.right = temp; 
     System.out.println("Inserting "+ num + "" + "at right of" + node.root); 
    } 
   }
   Node temp = new Node(); 
   temp.root = num; 
   node.left = temp; 
   System.out.println("Inserting " +num + "" + "at left of" + node.root); 
  } 
 }

 public String toString(){

   return root+ "";

 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:07:03.853

Java 中的每个对象都实现了 toString() 方法。默认情况下（如在 Object 类中所写），对象将打印其“内存位置”。

为了能够在 Java 中打印对象，您需要覆盖 toString() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:22:59.433

在您的行`System.out.println(node);`中，您告诉 Java 调用`node.toString()`. 因为您没有`toString()`为自定义`Node`类创建自己的方法，Java 自动使用该`Object.toString()`方法，该方法返回内存地址。考虑在您的代码中添加如下内容：

```
public class Node {
    ...
    public String toString() {
        return root + "";
    }
    ...
} 
```

# html - 为什么 :not(p) 似乎在选择 标签？

> ID：16028074
> 
> 赞同：21
> 
> 时间：2013-04-16T03:02:34.603
> 
> 标签：html, css, css-selectors

我的 HTML 是这样的：

```
<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="stylesheet.css">
<head>
</head>
<body>
<p>hiya</p>
<h1>this is h1</h1>
<h2>this is h2</h2>
</body>
</html> 
```

我的 stylsheet.css 是这样的：

```
:not(p)
{
color:#ff0000;
} 
```

然而*一切*都是红色的，包括`<p>`. 我尝试过 Firefox 20、Internet Explorer 10 和 Chrome。它似乎没有比这更基本的了，但我无法弄清楚为什么这不起作用（`<p>`即防止变红）。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-16T03:07:49.920

`:not(p)`匹配`body`。

默认`color`值为`inherit`。

`p`没有样式集。

`p`因此从 继承其颜色`body`，即红色。

解决方案：明确定义你想要的红色，或者明确设置不同的颜色`p`（即不要使用`:not`），或者使用`:not(body):not(p)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T03:08:37.367

这看起来是因为您没有为 p 标签定义特定的样式。所以 :not(p) 甚至适用于 body 元素并继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:08:49.513

您可以创建一个单独的 id`<p>` 并且可以`not`在 css 中使用。

HTML

```
<p class="hiya" id="hiya">hiya</p>
<p class="hi" id="hi">hi</p>
<h1>this is h1</h1>
<h2>this is h2</h2> 
```

CSS

`p:not(#hiya) { color:#ff0000; }`

`<p>`这将为除了`<p>`id 为“hiya”的之外生成红色输出。

# regex - Libreoffice 将所有单元格引用更改为绝对/相对

> ID：16028084
> 
> 赞同：1
> 
> 时间：2013-04-16T03:04:23.983
> 
> 标签：regex, libreoffice

想知道是否有一个简单的正则表达式或其他方法可以用绝对引用替换电子表格中的相对引用公式的选择。

我想到了一些类似的东西

`search key: =(.*)([A-Z])([0-9])(.*)$`

和

`replace key: =$1\$$2\$$3$4`

但即使它有效，它也只会取代第一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T22:36:34.240

这对我有用：

搜索：

```
(?:(Sheet\d+\.)??([A-Z]{1,2}?)([1-9]+))* 
```

用。。。来代替：

```
$1\$$2\$$3 
```

**注意**：在已经有绝对引用的单元格或工作表上运行它（这与运行两次搜索和替换相同）会搞砸。

# php - 跟踪访问的最后一页

> ID：16028087
> 
> 赞同：4
> 
> 时间：2013-04-16T03:04:27.920
> 
> 标签：php, mysql, session, analytics, web-analytics

我正在尝试跟踪访问我网站的访问者。我正在使用 codeigniter 来开发网站。我感兴趣的是在他们关闭网页之前跟踪上次访问的页面。有什么办法吗？

我一直在想的是将他们上次访问的页面保存在会话中，然后在他们关闭时将信息保存在数据库中。当用户关闭浏览器或网站（浏览器中的选项卡）或单击链接（在网页中）并被重定向到另一个网站时会发生什么？它是否向服务器发送关闭连接请求？

跟踪它的最佳方法是什么？

还想提一下，访问者是公开的，他们无法登录网站。而且我正在使用谷歌分析，但是如何为我的网站创建自定义分析以获得更准确的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T03:09:04.183

在他们正在加载的当前页面上保存/更新数据库条目。这样，即使他们的计算机崩溃也没关系，它仍然会记录他们所在的最后一页。如果他们稍后返回网站，您甚至可以将它们恢复到最后的位置（如果您需要此功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:19:23.727

您可以将当前页面存储在用户的会话中，当会话被破坏时，您可以使用[`session-set-save-handler`](http://php.net/manual/en/function.session-set-save-handler.php).

此外，由于 HTTP 是无状态的，因此您永远不会收到关闭连接回调。

# c# - C#中(sender as)和(new)的区别

> ID：16028095
> 
> 赞同：0
> 
> 时间：2013-04-16T03:06:09.070
> 
> 标签：c#

我是 C# 新手，这些天我正在从 msdn.microsoft.com ( [http://msdn.microsoft.com/en-us/library/vstudio/dd492172.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd492172.aspx) ) 学习本教程，

本教程的一部分有一个声明可以使一个新对象成为think但我不确定数字上下控制，声明是：

```
NumericUpDown answerBox = sender as NumericUpDown; 
```

它在这个页面上（[http://msdn.microsoft.com/en-us/library/vstudio/dd492138.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd492138.aspx)）

问题是，这两个陈述之间有什么区别？以及两者的含义。

```
NumericUpDown answerBox = sender as NumericUpDown; 
```

和

```
NumericUpDown answerBox = new NumericUpDown(); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:09:47.370

如果将代码放回上下文中，您可以看到：

```
private void answer_Enter(object sender, EventArgs e)
{
    // Select the whole answer in the NumericUpDown control.
    NumericUpDown answerBox = sender as NumericUpDown;
} 
```

`object sender`已被定义为已传递给函数的调用`object`。`sender`

该行`sender as NumericUpDown;`正在做的是将其解析`object`为 a`NumericUpDown`以供在函数中使用。

所以 和 之间没有相似[`new`](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx)性[`as`](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:09:54.937

它们*非常*不同。

1.  `NumericUpDown answerBox = sender as NumericUpdown;`

    在这种情况下，您将传递给函数的对象转换为 type 的对象`NumericUpDown`，因此您可以安全地使用该类中定义的属性和方法。

2.  `NumericUpDown answerBox = new NumericUpDown();`

    在这种情况下，您将创建一个*全新*的类型对象`NumericUpDown`，该对象与传入的对象无关。您在此新实例上调用的任何方法或访问的属性都不会影响`sender`^*。
    [（*免责声明：除非该类使用静态成员做一些奇怪的事情）]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T03:10:45.663

这个创建了一个新的实例`NumericUpDown`：

```
 new NumericUpDown(); 
```

`As`用于执行兼容类型之间的转换。

```
sender as NumericUpDown; 
```

见 MSDN：

[作为](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)

[新的](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T03:11:12.670

当输入 NumericUpDown（教程让您订阅的事件）时，Windows 窗体会传递作为`sender`. `sender`是一个对象，这意味着任何东西都可以传入，因为许多对象都有这样的事件。您需要告诉编译器这`sender`是一个 NumericUpDown，这是第一个所做的。

第二个创建了一个全新的 NumericUpDown，它不在任何表单上，所以基本上没用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T03:11:37.247

第一个，实际上是获取对象“sender”并将其转换为“NumericUpDown”类型。它更接近于以下转换代码：“(NumericUpDown)sender”，主要区别在于如果“sender”的类型无法转换为 NumericUpDown 类型，则“as”运算符返回 null，而 (NumericUpDown)发件人将抛出 InvalidCastException。

第二条语句“NumericUpDown answerBox = new NumericUpDown()”是使用其无参数构造函数创建 NumericUpDown 类型的新实例。

# javascript - 自定义现有的 twitter 引导模式样式

> ID：16028099
> 
> 赞同：1
> 
> 时间：2013-04-16T03:06:39.290
> 
> 标签：javascript, html, css

所以我对 CSS 很陌生。我知道有一些继承，但除了字体之外，我并不总是确定它适用于何处。所以我想要做的是修改 twitter bootstrap modal 类。目前正在显示这些类的主干视图：

```
modal hide fade 
```

我想要做的是扩展模态视图的宽度和高度，但保持所有其他模态 CSS 属性完好无损。有没有办法做到这一点？在我自己的项目的 local.less 文件中，我首先尝试做我在谷歌上搜索的内容，即[如何更改 Twitter Bootstrap 模态框的默认宽度？](https://stackoverflow.com/questions/10169432/how-can-i-change-the-default-width-of-a-twitter-bootstrap-modal-box)

但我的观点不再是模态的了。它没有居中，也没有变暗的背景。所以我想我可以将 .modal 类从 twitter bootstrap 复制到我的 local.less 文件中，然后更改宽度/高度。所以我尝试了这个：

```
.modal-width-half (@modalWidth: 50%) {
  top: 50%;
  left: 50%;
  z-index: 1050;
  overflow: auto;
  width: @modalWidth;
  margin: -250px 0 0 -@modalWidth / 2;
  background-color: white;
  border: 1px solid #999999;
  border: 1px solid rgba(0, 0, 0, 0.3);
  *border: 1px solid #999999;
  /* IE6-7 */

  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px;
  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding-box;
  background-clip: padding-box;
} 
```

再一次，风格不是模态的。我有什么遗漏或做错了吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:04:58.167

我刚做了这个，可以分享你缺少的那条线。

在我更改模态宽度的承诺中，我必须更改`width`属性和[`margin-left`属性](https://github.com/balanced/balanced-dashboard/blob/visuals/static/less/modals.less#L32)。通过更改这两者，您将保持表单居中。

```
.modal {
  width: @modalWidth;
  margin-left: -@modalWidth / 2;
} 
```

当然，这将适用于您网站上的*所有*模态，如果您只想将其应用于一个模态，那么您可以自定义类名，例如

```
.my-modal { 
  width: @modalWidth; 
  margin-left: -@modalWidth / 2; 
} 
```

然后，您可以在 html 中引用此内容，例如：

```
<div class="modal fade open my-modal">...</div> 
```

只需确保 for 的定义`.my-modal`出现*在* `.modal`您的 less/css 文件中，否则该定义将被引导样式覆盖。

# mysql - 尝试重置表的自动增量值

> ID：16028101
> 
> 赞同：0
> 
> 时间：2013-04-16T03:06:56.963
> 
> 标签：mysql, sql, amazon-web-services, amazon-rds

首先，我已经完成了尝试重置值、GUI 和 CLI 的正常步骤，它说 x 行受到影响。

我拥有执行此操作所需的所有权限（除了我不知道的任何亚马逊特定权限），本地查询工作正常。

有没有办法修改我的表格自动递增编号，使其从 19 开始，而不是 1,000,021？

我试过的查询。

```
ALTER TABLE X AUTO_INCREMENT = 19 
```

我已授予所有表的所有权限，我什至尝试在特定 db.table 上专门向我的用户授予 ALTER。

任何洞察力或朝着正确方向的推动都会很可爱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:16:52.727

你的命令：

```
ALTER TABLE X AUTO_INCREMENT = 19 
```

仅当您的表不存在 id 19 的行时才有效。如果您尝试插入会导致插入冲突的新行，它将自动重置为自动增量列的最大现有值 + 1。换句话说，如果您有 id 19 和 1000020（最大值）的行，它将自动尝试插入时重置为 1000021。

# windows - plink 自动批处理脚本

> ID：16028107
> 
> 赞同：1
> 
> 时间：2013-04-16T03:08:13.507
> 
> 标签：windows, batch-file, ssh, plink

如果超时并自动重新连接，我将如何创建一个简单的批处理脚本（windows）来关闭当前的 plink 会话？

像这样的东西：

```
if "plink.exe" == "false" (
    "plink command to connect to SSH Server."
) 
```

或者可能

> if "plink.exe" == "false" ("批量打开新的 plink 实例")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T16:50:43.003

干得好。

```
@echo off
setlocal
:: modify this line as appropriate
set plink_args=-P 22 -i c:\path\to\private.ppk user@host
set errors=0

:loop

:: if "find" exits with a non-zero status, plink.exe isn't running.
( tasklist /fi "IMAGENAME eq plink.exe" | find /i "plink.exe" >NUL && (
    set errors=0
) ) || (
    start "" plink.exe %plink_args%
    set /a "errors+=1"
)

if %errors% geq 5 (
    echo Unable to connect %errors% times in a row.  Stopping.
    goto :EOF
)

:: pause for 10 seconds (-n seconds + 1)
ping -n 11 0.0.0.0 >NUL
goto loop 
```

* * *

您知道，如果您在 ssh 服务器上具有 root 访问权限，则可以修改`sshd_config`并让服务器每隔几分钟发送一次 no-op 数据包，以防止连接由于不活动而超时。这是我的示例片段`sshd_config`：

```
# noop anti-idle for 12 hours (10 minutes * 72)
ClientAliveInterval 600
ClientAliveCountMax 72 
```

将其添加到您的`sshd_config`并重新启动 ssh 守护程序。这可能会使您不必在客户端做一些如此骇人听闻的事情。

# android - Placing QR code scanner in a Fragment

> ID：16028115
> 
> 赞同：2
> 
> 时间：2013-04-16T03:09:26.153
> 
> 标签：android, android-fragments, qr-code

I am using an android QR code processing library - [android QR code](https://code.google.com/p/android-quick-response-code/). I am extending the DecoderActivity for scanner and now I want the scanner to be inside a fragment, I have used `LocalActivityManager` to embed Activity inside a fragment. Here is the code:

```
public class QrCodeProcessorFragment extends SherlockFragment {

private static final String KEY_STATE_BUNDLE = "localActivityManagerState";

private LocalActivityManager mLocalActivityManager;

Button generate_qr_code;

private QuickPayManagerActivity parent;

protected LocalActivityManager getLocalActivityManager() {
    return mLocalActivityManager;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle state = null;
    if (savedInstanceState != null) {
        state = savedInstanceState.getBundle(KEY_STATE_BUNDLE);
    }

    mLocalActivityManager = new LocalActivityManager(getActivity(), true);
    mLocalActivityManager.dispatchCreate(state);
}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // This is where you specify you activity class
    Intent i = new Intent(getSherlockActivity(), CaptureActivity.class);
    Window w = mLocalActivityManager.startActivity("tag", i);
    View currentView = w.getDecorView();
    ViewGroup vg = (ViewGroup) (currentView.getParent());
    if (vg != null)
        vg.removeView(currentView);

    currentView.setVisibility(View.VISIBLE);
    currentView.setFocusableInTouchMode(true);
    ((ViewGroup) currentView)
            .setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);

    return currentView;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBundle(KEY_STATE_BUNDLE,
            mLocalActivityManager.saveInstanceState());
}

@Override
public void onResume() {
    System.out.println("lam onresume");
    super.onResume();
    mLocalActivityManager.dispatchResume();
}

@Override
public void onPause() {
    System.out.println("lam onpause");
    super.onPause();
    mLocalActivityManager.dispatchPause(getActivity().isFinishing());
}

@Override
public void onStop() {
    super.onStop();
    mLocalActivityManager.dispatchStop();
}

@Override
public void onDestroy() {
    super.onDestroy();
    mLocalActivityManager.dispatchDestroy(getActivity().isFinishing());
}} 
```

QR scanner is not working now. I debugged the library code, it is expecting an activity instance and I am passing the activity instance which is inside the fragment. Hope I am clear on this. Please help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:02:49.570

I found a library called [Barcode Fragment library](https://code.google.com/p/barcodefragmentlib) which uses a fragment for hosting the scanner functionality. Works fine but hasn't supported portrait mode support, I have done changes to library as suggested in [here](https://code.google.com/p/zxing/issues/detail?id=178#c46). It worked like a charm :)

# ruby-on-rails - 如何增加 ActiveRecord 连接超时？

> ID：16028121
> 
> 赞同：8
> 
> 时间：2013-04-16T03:10:04.803
> 
> 标签：ruby-on-rails, ruby, activerecord

有没有办法增加 ActiveRecord 的连接超时？

当我有超过 25 个线程且池大小为 5 时，我不断收到此错误。

> (ActiveRecord::ConnectionTimeoutError) “无法在 5 秒内获得数据库连接（等待 5.000144774 秒）。当前最大池大小为 3；考虑增加它。”

如果没有办法增加连接超时，那么确保线程尽快使用连接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-16T16:39:38.363

根据[文档](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html)，您应该在数据库配置文件中设置“checkout_timeout”选项。

> **checkout_timeout：**在放弃和引发超时错误之前阻止和等待连接的秒数（默认为 5 秒）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T03:26:53.293

你可以加

```
pool: 5 
```

在你的 database.yml 中。

你也可以设置这个`checkout_timeout`值，但我不推荐它，因为你的应用程序可能需要更多的时间来回答它。如果在系统收到许多请求时抛出错误，最好只提供更多可能的同时连接，而不是让每个请求等待更长的时间才能完成。

# jquery - 如果横幅中的最后一个图像处于活动状态，则更改文本颜色

> ID：16028122
> 
> 赞同：0
> 
> 时间：2013-04-16T03:10:18.587
> 
> 标签：jquery, jquery-ui, bxslider

html:

```
<ul class="bxslider">
    <li><img src="image.jpg" alt="" /></li>
    <li><img src="image.jpg" alt="" /></li>
    <li><img src="image.jpg" alt="" /></li>
</ul>
<a id="selected" href="#">details</a> 
```

我使用**bxslider**，我想如果最后`image`是`active` `a#selected`会有一个类`.select`，这可能吗

示例：http: [//jsfiddle.net/NXzcx/83/](http://jsfiddle.net/NXzcx/83/)

js

```
$('.bxslider').bxSlider({
  auto: true,
  infiniteLoop: false,
  hideControlOnEnd: true,
});

$(document).ready(function(){
                if (slider.active.index == 0){
                $('#selected').addClass("select");
            }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:38:03.290

将`onAfterSlide`回调添加到`bxSlider`.

```
$('.bxslider').bxSlider({
    auto: true,
    infiniteLoop: false,
    hideControlOnEnd: true,
    onAfterSlide: function (currentSlide) {
        if(currentSlide == $('.bxslider').children('li.pager').length -1) {
            $('#selected').addClass("select");
        } else {
            $('#selected').removeClass("select");
        }
    }
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/rAYDr/1/)**

# html - 如何确保我的页面被operamini浏览器包裹？

> ID：16028126
> 
> 赞同：1
> 
> 时间：2013-04-16T03:10:45.793
> 
> 标签：html, css, opera, nokia-s40, opera-mini

我正在为 s40 等低端手机开发页面。但是，我还需要确保它可以在更大屏幕的手机上运行。我的页面在更大的屏幕上加载良好，但它的行为在诺基亚 s40 手机中的 Opera mini 中是随机的。有时页面被正确包裹，这就是我想要的。但其他时候我必须放大，这是绝对不想要的。这发生在没有对我的 html 或 css 文件进行任何更改的情况下。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:42:40.697

我建议您在[这里查看设备特定的媒体查询，并在](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)**Opera 移动模拟器**上测试您的移动浏览器或视口兼容性，您可以从 Opera 开发网站下载它。

# c# - 如何使用 C# 和反射来获取已实现的类类型而不是接口类型

> ID：16028129
> 
> 赞同：2
> 
> 时间：2013-04-16T03:11:12.207
> 
> 标签：c#, reflection, interface

**更新：**我的“问题”是由于对我使用反射的类的错误假设造成的。我在下面的问题是荒谬的，因为它没有那样做。但是我把它留在这里，以防代码片段有用。

我正在使用反射从位于**单独**程序集中的已编译类中生成视图模型。除了我从编译的程序集中返回的类型显示一个接口而不是作为接口的具体实现的类之外，大多数一切都在工作。

例如，在编译的程序集中，我定义了一个属性，如：

```
 public List<String> strings { get; set; } 
```

使用反射，我已经能够生成如下所示的相应属性（和完整的类）：

```
 public ICollection<String> strings { get; set; } 
```

我得到了这样做的类型（为简洁起见，严重剪断）：

```
 Type value = <...some passed in type...>
    String types = String.Join(",", value.GetGenericArguments().Select(t => t.Name).ToArray());

    String.Format("{0}<{1}>", value.GetGenericTypeDefinition(), types); 
```

有没有办法使用 Type 对象来确定返回的接口使用了什么具体实现？我猜没有，但我想我会问。

如果没有办法，除非有更好的建议，否则我正在考虑使用“最有可能的实现”查找给定接口（即您传入“ICollection”，我将其转换为具体的“列表”）？ ??

不一定需要“完美”的解决方案，因为它用于使用 T4 模板生成控制器、视图和视图模型（带有 automapper 和 Kendo UI）。因此，如果有一些事情要清理，那很好。因此，欢迎任何让我接近的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:29:21.070

好吧，我玩了一点反射，这就是我带来的：

```
 //Initial list with ints
    var items = new List<int> {1, 2, 3, 4, 5};
    //ICollection<int> reference
    var collectionOfItems = (ICollection<int>) items;

    //...

    //First of, get collection Type object
    var collectionType = collectionOfItems.GetType();
    //Next, let's grab generic arguments
    var genericArguments = collectionType.GetGenericArguments();

    //For each generic candidate type we need to construct it with collection's generic arguments
    var candidate = typeof(List<>).MakeGenericType(genericArguments);

    //Perform check
    if (collectionType.IsAssignableFrom(candidate))
        Console.WriteLine("Can be casted to {0}", candidate);
    else
        Console.WriteLine("Cannot be cated to {0}", candidate); 
```

是的，反射是可能的，但是您需要检查很多可能的类型（有些不是 BCL 类型也可以实现`ICollection`）。最好只用具体类型声明属性

# php - 当存在其他表单时，调用 HTML 文件的 PHP 表单不起作用

> ID：16028131
> 
> 赞同：1
> 
> 时间：2013-04-16T03:11:32.477
> 
> 标签：php, html, forms

我在使用“include”命令调用的 PHP 文件中有多个表单。如果我将包含命令放在 HTML 页面中的其他表单之前，那么它可以工作。问题是我需要在其他表单下方调用“包含”命令。我想出的解决方案是在页面开头调用PHP文件并隐藏div。然后我在解决问题的页面底部再次调用了该文件。还有其他解决方案吗？为什么要这样做？

非工作示例：

```
 <form></form>
    <form></form>
    include 'phpfilewithotherforms.php'; 
```

工作示例但不可行：

```
 include 'phpfilewithotherforms.php';
    <form></form>
    <form></form> 
```

工作示例：

```
 <div style="display:none;">include 'phpfilewithotherforms,php';</div>
    <form></form>
    <form></form>
    include 'phpfilewithotherforms.php'; 
```

我正在调用的 PHP 文件示例：

```
 while($row = mysql_fetch_array($result))
    {
    echo "<div style='padding:20px;margin:15px;background:offwhite;border-style:solid;border-width:1px;border-color:lightgray;'>" .
    "<form method='post' name='example'>" .
    "<span class='detail'><b>Title:</b>  " .  
    $row['mytitle'] .
    "      " .
    "<input type='hidden' value='" . stripslashes($row['mytitle']) . "' . name='title'>" .
    "<span style='float:right'>" .
    "<input type='submit' value='Edit' name='edit'>" .
    "<input type='submit' value='Preview' name='preview'>" .
    "</span>" .
    "</form>" .
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:37:24.647

我通常在 HTML 中编写 PHP`<? PHP CODE ?>`

```
<div style="display:none;"><?include 'phpfilewithotherforms,php';?></div> 
```

你想念那些吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:22:27.963

你必须按顺序工作。我会将包含的文件一分为二，一个包含表单之前所需的代码，另一个包含表单之后所需的代码。

# android - 在设备中运行 android 应用程序时不显示 Unicode 字符

> ID：16028132
> 
> 赞同：1
> 
> 时间：2013-04-16T03:11:34.580
> 
> 标签：android, unicode

我在我的 android 应用程序中使用 unicode 字符。当我在模拟器中运行应用程序时它工作正常，但是当我在真实设备中运行它时，不显示 unicode 字符。我知道我的真实设备中缺少 unicode 字体，但我想知道的是如何在我的包中包含 unicode 字体，以便在我将它安装到我想要的任何位置时包含它。我看到了一些将字体放入 assets 文件夹并更改应用程序中每个组件的字体的示例。但是，我需要一个更简单的解决方案。

干杯！

# c# - 设置 DataSource 时从 ListBox 中删除项目

> ID：16028133
> 
> 赞同：4
> 
> 时间：2013-04-16T03:11:36.430
> 
> 标签：c#, listbox, listboxitem

请参阅我有一个具有多个值的 HashSet，这些值可以包含例如**4141234567**、**4241234567**、**4261234567**等数字。我在我的 UserControl 中放了一个 radioButton1，当我单击它时，我希望只有 414 和 424 的数字保留在我的 ListBox 中，为此我编写了以下代码：

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
    {
        var bdHashSet = new HashSet<string>(bd);

        if (openFileDialog1.FileName.ToString() != "")
        {
            foreach (var item in bdHashSet)
            {
                if (item.Substring(1, 3) != "414" || item.Substring(1, 3) != "424")
                {
                    listBox1.Items.Remove(item);
                }
            }
        }
    } 
```

但是当我运行代码时，我得到了这个错误：

> 设置 DataSource 属性时无法修改项目集合。

从列表中删除不需要的项目而不从 HashSet 中删除它们的正确方法是什么？我稍后会为以 0416 和 0426 开头的数字添加一个 optionButton 以及一个 optionButton 来用原始值填充 listBox，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:21:32.873

尝试

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    var bdHashSet = new HashSet<string>(bd);

    listBox1.Datasource = null;
    listBox1.Datasource =  bdHashSet.Where(s => (s.StartsWith("414") || s.StartsWith("424"))).ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:27:12.557

试试这个：

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    var bdHashSet = new HashSet<string>(bd);
    listBox1.Datasource = bdHashSet.Select(s => (s.Substring(1, 3) == "414" || s.Substring(1, 3) == "424"));

    //After setting the data source, you need to bind the data
    listBox1.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:25:56.467

我认为您可以使用 linq 选择元素，然后将结果重新分配给 listBox。这样你就不需要从列表中删除元素，你可以保留 HashSet 的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T13:18:45.903

您可以使用`BindingSource`对象。将其与 DataSource 绑定，然后使用该`RemoveAt()`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-09T12:12:32.733

试试这个 ：

```
DataRow dr = ((DataRowView)listBox1.SelectedItem).Row;
((DataTable)listBox1.DataSource).Rows.Remove(dr); 
```

# jquery - 无法使用 jquery 从标签中获取 href 的值

> ID：16028135
> 
> 赞同：0
> 
> 时间：2013-04-16T03:11:37.803
> 
> 标签：jquery

我正在尝试使用“标题”类获取`href`值。`<a>`这里的结果应该是路径`"../../images/packages2/agra1.jpg"`，但不知何故它不起作用。这是我的 HTML：

```
 <div id="packgeImages">
        <ul>
<li><a class="title" href="../../images/packages2/agra1.jpg" rel="shadowbox" title=""><img src="../../images/packages2/agra1thumb.jpg" alt="thumb1" /></a></li>
    </ul>
    </div> 
```

这是我的 JavaScript：

```
 var $title = $('.title').attr("href"); 
```

然后我使用警报来检查结果..但不知何故它似乎是空白的。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:13:27.370

在基于类查找元素时使用`first`，因为可能有多个具有相同类名的元素。

```
var $title = $('.title:first').attr("href"); 
```

这有效：http: [//jsfiddle.net/Xs9AC/2/](http://jsfiddle.net/Xs9AC/2/)

**编辑您的评论：**

```
var arr = new Array(); // Create the array

// Loop through each anchor
$(".title").each(function(){
    arr.push($(this).attr("href"));
});

// Loop through the populated array
for (var i = 0; i < arr.length; i++) {
    alert(arr[i]);
}; 
```

# c++ - 访问冲突读取位置 0xba2f1498

> ID：16028136
> 
> 赞同：0
> 
> 时间：2013-04-16T03:11:38.393
> 
> 标签：c++, c, winapi, access-violation, readdirectorychangesw

我正在编写一个程序来监视文件夹。我使用`FileWatch.h`图书馆。这是我的`FileWatch.h`

```
#ifndef FILEWATCH_H
#define FILEWATCH_H

class FileChangeObserver 
{
public:
    virtual ~FileChangeObserver() 
    { 

    }
    virtual void OnFileChanged() = 0;
};
// information concerning a directory being watched
class FileWatcher 
{
public:
    // Watching file modifications using a loop
    void Init(LPCTSTR filefullpath);
    bool CheckForChanges(DWORD waittime=0);
    // Watching file modification via a thread
    void StartWatchThread();
    bool IsThreadRunning();
    void SynchronousAbort();
    FileWatcher(FileChangeObserver *observer) : hDir(NULL), curBuffer(0),
        filePath(NULL), hWatchingThread(NULL), observer(observer) 
    {
        ZeroMemory(&this->overl, sizeof(this->overl));
        // create the event used to abort the "watching" thread
        hEvtStopWatching = CreateEvent(NULL, TRUE, FALSE, NULL);
    }
    FileWatcher()
    {
    }
    ~FileWatcher() 
    {
        SynchronousAbort();
        delete observer;
        free(filePath);
        CloseHandle(hEvtStopWatching);
    }
public:
    HANDLE          hDir;      // handle of the directory to watch
    FileChangeObserver *observer; // function called when a file change is detected
    TCHAR *         filePath;  // path to the file watched
    FILE_NOTIFY_INFORMATION buffer[2][512];
        // a double buffer where the Windows API ReadDirectory will store the list
        // of files that have been modified.
    int curBuffer; // current buffer used (alternate between 0 and 1)
    bool NotifyChange();
public:
    // fields for use by the WathingThread
    OVERLAPPED overl; // object used for asynchronous API calls
    HANDLE hWatchingThread; // handle of the watching thread
    HANDLE hEvtStopWatching; // this event is fired when the watching thread needs to be aborted
};
static DWORD WINAPI WatchingThread(void *param);
#endif 
```

这是我的`FileWatch.cpp`

```
#include "stdafx.h"
#include "FileWatch.h"
#include "assert.h"
#if _MSC_VER > 1600
extern "C" {
WINBASEAPI BOOL WINAPI
GetOverlappedResult(_In_ HANDLE hFile, _In_ LPOVERLAPPED lpOverlapped, _Out_ LPDWORD lpNumberOfBytesTransferred, _In_ BOOL bWait);
}
#endif
bool FileWatcher::IsThreadRunning()
{
    return hWatchingThread && (WaitForSingleObject(hWatchingThread, 0) == WAIT_TIMEOUT);
}
// Ask for the thread to stop and waith until it ends
void FileWatcher::SynchronousAbort()
{
    SetEvent(hEvtStopWatching);
    if (hWatchingThread) 
    {
        WaitForSingleObject(hWatchingThread, INFINITE);
        CloseHandle(hWatchingThread);
        Sleep(500);
        hWatchingThread = NULL;
    }
    CloseHandle(overl.hEvent);
    overl.hEvent = NULL;
    CloseHandle(hDir);
    hDir = NULL;
}
// Start watching a file for changes
void FileWatcher::StartWatchThread()
{
    // if the thread already exists then stop it
    if (IsThreadRunning())
        SynchronousAbort();
    assert(hDir);
    if (!hDir)
    {
        return;
    }
    // reset the hEvtStopWatching event so that it can be set if
    // some thread requires the watching thread to stop
    ResetEvent(hEvtStopWatching);
    DWORD watchingthreadID;
    hWatchingThread = CreateThread(NULL, 0, WatchingThread, this, 0, &watchingthreadID);
}
void FileWatcher::Init(const TCHAR* fileFullPath)
{
    // if the thread already exists then stop it
    if (IsThreadRunning())
        SynchronousAbort();
   // str::ReplacePtr(&filePath, fileFullPath);
    //TCHAR *dirPath = path::GetDir(filePath);
    hDir = CreateFile(
        L"C:\\", // pointer to the directory containing the tex files
        FILE_LIST_DIRECTORY,                // access (read-write) mode
        FILE_SHARE_READ|FILE_SHARE_DELETE|FILE_SHARE_WRITE,  // share mode
        NULL, // security descriptor
        OPEN_EXISTING, // how to create
        FILE_FLAG_BACKUP_SEMANTICS  | FILE_FLAG_OVERLAPPED , // file attributes
        NULL); // file with attributes to copy
   // free(dirPath);
    ZeroMemory(&overl, sizeof(overl));
    ZeroMemory(buffer, sizeof(buffer));
    overl.hEvent = CreateEvent(NULL, FALSE, FALSE, NULL);
    // watch the directory
    ReadDirectoryChangesW(
         hDir, /* handle to directory */
         &buffer[curBuffer], /* read results buffer */
         sizeof(buffer[curBuffer]), /* length of buffer */
         FALSE, /* monitoring option */
         //FILE_NOTIFY_CHANGE_CREATION|
         FILE_NOTIFY_CHANGE_LAST_WRITE, /* filter conditions */
         NULL, /* bytes returned */
         &overl, /* overlapped buffer */
         NULL); /* completion routine */
}
// Thread responsible of watching the directory containg the file to be watched for modifications
DWORD WINAPI WatchingThread(void *param)
{
    //qDebug()<<"in WatchingThread";
    FileWatcher *fw = (FileWatcher *)param;
    HANDLE hp[2] = { fw->hEvtStopWatching, fw->overl.hEvent };
    for (;;)
    {
        DWORD dwObj = WaitForMultipleObjects((sizeof(hp)/(sizeof(hp[0])))
                                             , hp, FALSE, INFINITE);
        if (dwObj == WAIT_OBJECT_0) // the user asked to quit the program
        {
            //qDebug()<<"in WatchingThread the user asked to quit the program";
            //exit(-1);
            break;
        }
        if (dwObj != WAIT_OBJECT_0 + 1)
        {
            // BUG!
            //assert(0);
           // qDebug()<<"dwObj "<<dwObj<<" last error "<<GetLastError();
            break;
        }
        //qDebug()<<"WatchingThread fw->NotifyChange() ";
        //if (fw->wakeup)
        fw->NotifyChange();
    }
    return 0;
} 
// Call ReadDirectoryChangesW to check if the file has changed since the last call.
bool FileWatcher::CheckForChanges(DWORD waittime)
{
    if (!overl.hEvent)
    {
        return false;
    }
    DWORD dwObj = WaitForSingleObject(overl.hEvent, waittime);
    if (dwObj != WAIT_OBJECT_0)
    {
        return false;
    }
    return NotifyChange();
}
// Call the ReadDirectory API and determine if the file being watched has been modified since the last call.
// Returns true if it is the case.
bool FileWatcher::NotifyChange()
{
    //qDebug()<<"in NotifyChange";
    DWORD dwNumberbytes;
    GetOverlappedResult(hDir, &overl, &dwNumberbytes, FALSE);
    FILE_NOTIFY_INFORMATION *pFileNotify = (FILE_NOTIFY_INFORMATION *)buffer[curBuffer];
    // Switch the 2 buffers
    curBuffer = (curBuffer + 1) % (sizeof(buffer)/(sizeof(buffer[0])));
    SecureZeroMemory(buffer[curBuffer], sizeof(buffer[curBuffer]));
    // start a new asynchronous call to ReadDirectory in the alternate buffer
    ReadDirectoryChangesW(
         hDir, /* handle to directory */
         &buffer[curBuffer], /* read results buffer */
         sizeof(buffer[curBuffer]), /* length of buffer */
         TRUE, /* monitoring option */
         FILE_NOTIFY_CHANGE_FILE_NAME |
            FILE_NOTIFY_CHANGE_DIR_NAME |
            FILE_NOTIFY_CHANGE_ATTRIBUTES |
            FILE_NOTIFY_CHANGE_SIZE | 
            FILE_NOTIFY_CHANGE_LAST_WRITE | 
            FILE_NOTIFY_CHANGE_LAST_ACCESS |
            FILE_NOTIFY_CHANGE_CREATION |
            FILE_NOTIFY_CHANGE_SECURITY,
         //FILE_NOTIFY_CHANGE_LAST_WRITE, /* filter conditions */
         NULL, /* bytes returned */
        &overl, /* overlapped buffer */
         NULL); /* completion routine */
    // Note: the ReadDirectoryChangesW API fills the buffer with WCHAR strings.
    for (;;) 
    {
        if (pFileNotify->Action == FILE_ACTION_ADDED)
        {
            //qDebug()<<"in NotifyChange if ";
                char szAction[42];
                char szFilename[MAX_PATH] ;
                memset(szFilename,'\0',sizeof( szFilename));
                strcpy(szAction,"added");
                wcstombs( szFilename, pFileNotify->FileName, MAX_PATH);
                if(observer)
                    observer->OnFileChanged();
                return true;
                //OnFileChanged(szFilename,szAction);
               // qDebug()<<"in NotifyChange after OnFileChanged ";
        }
        // step to the next entry if there is one
        if (!pFileNotify->NextEntryOffset)
        {
            return false;
        }
        pFileNotify = (FILE_NOTIFY_INFORMATION *)((PBYTE)pFileNotify + pFileNotify->NextEntryOffset);
    }
    pFileNotify=NULL;
    return true;
} 
```

在主程序中，我有：

```
case IDM_ABOUT:
            //DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
            {
                FileWatcher *cWatcher = new FileWatcher();
            cWatcher->Init(L"AB");
            cWatcher->NotifyChange();
            break;
            } 
```

我有一条错误消息：访问冲突读取位置 0xba2f1498。有什么解决办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:25:29.270

您有一个默认构造函数，它使您的所有变量都未初始化。

```
FileWatcher()
{
} 
```

你在这里使用的。

```
 FileWatcher *cWatcher = new FileWatcher();
        cWatcher->Init(L"AB"); 
```

`Init`还会留下几个未初始化的变量，例如`curBuffer`在这一行中。

```
 &buffer[curBuffer], /* read results buffer */ 
```

这可能就是你得到的原因`Access violation reading location 0xba2f1498`

一个好的做法是确保您的对象在构造函数完成之前始终完全有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:20:45.457

在你的析构函数中，你有：

```
delete observer;
free(filePath); 
```

但是您没有检查以确保事先分配了任何一个，这显然是一个问题，特别是因为您的默认构造函数没有初始化任何这些变量。这超出了您将 C 样式分配与 C++ 样式分配混合的事实。

# jquery - 将 .css() 添加到前置 div

> ID：16028139
> 
> 赞同：5
> 
> 时间：2013-04-16T03:11:47.070
> 
> 标签：jquery, css, prepend

这个`prepend`函数添加了一个`div`“colorBox”类，但是我在为新创建的`div`. 我不知道我的语法是否完全正确，但我正在尝试使用`data-background`父*( `li`)*标记中的值。

我正在使用它向 中添加颜色框`multiselect` `options`，并且我使用的插件将每个颜色框`option`转换`<li>`为结构类似于我在下面包含的 HTML 的结构。

JS

```
$(function(){
    $("li span").prepend('<div class="colorBox"></div>').css('background-color', $(this).parent().attr("data-background"));   
}); 
```

HTML

```
<ul>
    <li data-background="#C11B17">
        <input type="checkbox" name="color[]" value="Brick_Red">
        <span>Brick Red</span>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T03:14:53.207

尝试将您的代码拆分一下。它失败了，因为`.css()`实际上是在父级上调用并在您的上下文`this`中引用。`window`

[**jsFiddle**](http://jsfiddle.net/6mMnT/1/)

```
$(function(){
    // Get all elements matching selector 'li span'
    var spans = $("li span");
    // Loop for each element in spans
    spans.each(function () {
        // Create the new element as a jQuery object
        var elem = $('<div class="colorBox">test</div>');
        // Set the new element's background-color to the attribute on the parent
        // of the span
        elem.css('background-color', $(this).parent().attr("data-background"));
        // Prepend the new element to the span (insert it as the first child)
        $(this).prepend(elem);
    });
}); 
```

如果您打算将“砖红色”包裹在 中，`div`那么您将需要使用[`.wrap()`](http://api.jquery.com/wrap/)or [`.wrapInner()`](http://api.jquery.com/wrapInner/)。

[**jsFiddle**](http://jsfiddle.net/Ar6S9/)

```
$(this).wrap(elem); 
```

* * *

## 更新

如果您正在使用自定义复选框，我建议您使用一种更加 css 驱动的方法来利用`<label>`标签。

[**jsFiddle**](http://jsfiddle.net/a6CCh/)

**HTML**

```
<ul>
    <li data-background="#C11B17">
        <input type="checkbox" name="color[]" value="Brick_Red" id="checkbox1" />
        <label for="checkbox1">
            <span>Brick Red</span>
        </label>
    </li>
</ul> 
```

**CSS**

```
input[type=checkbox] {
    display:none;
}

input[type=checkbox] + label:before {
    display:inline-block;
    content:"";
    width:1em;
    height:1em;
    background-color:#CCC;
}

input[type=checkbox]:checked + label:before {
    background-color:#C11B17;
} 
```

请注意，此方法将在 IE8+ 中有效，无需任何 polyfill。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T03:22:15.027

如果您要使用 .css() 而不是 css，那么为什么不使用样式设置它呢？

```
var color = $('li').attr('data-background');
$("span").prepend('<div class="colorBox" style="background:' + color + '"></div>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T18:04:24.980

在 jQuery 中，*这个*词是关于链中的最后一个对象。在您的示例中，$("li span") 是最后一个对象，因此当您使用“this”这个词时，它大约是 $("li span")。为避免这种情况，您可以简单地使用 prependTo 代替。这应该可以解决问题：

```
jQuery(function(){
  jQuery('<div class="colorBox"></div>').prependTo(jQuery('#aaaa')).css(
  'background-color',jQuery(this).parent().attr("data-background"));   
}); 
```

# android - 关于 WebView 中 cookie 的 Android 应用

> ID：16028141
> 
> 赞同：0
> 
> 时间：2013-04-16T03:11:51.813
> 
> 标签：android, cookies, android-webview

我有一个`httpURLConnection`请求 URL，POST 登录请求。

并在登录成功时获取cookies。

我现在在应用程序中嵌入了一个 WebView，WebView 用于加载登录后可以访问的连接。

问题是我用 WebView 插入的连接无法连接。我能找到的原因是 cookie 没有正确放入 WebView。

如何将cookies放入WebView成功？

# java - 是否可以使用 DOM 从 XML 文件创建对象？

> ID：16028145
> 
> 赞同：1
> 
> 时间：2013-04-16T03:12:34.727
> 
> 标签：java, dom, object, data-binding, xml-parsing

我使用 DOM 解析器从 XML 文件中读取数据。我知道如何读取、修改和写回数据。但是，我想知道是否可以从 XML 文件创建对象。

我有一个如下所示的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE people SYSTEM "validator.dtd">

<people>
    <student>
        <name>John</name>
        <course>Computer Technology</course>
        <semester>6</semester>
        <scheme>E</scheme>
    </student>

    <student>
        <name>Foo</name>
        <course>Industrial Electronics</course>
        <semester>6</semester>
        <scheme>E</scheme>
    </student>
</people> 
```

我想把它变成一个对象，这样我就可以把它们传递出去。是否存在解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:16:20.037

您可以查看 XML bean 或 JAXB 库。如果您没有架构文件但有一个示例 XML 文件，您可以使用 xmlbeans 的 inst2xsd 工具创建一个。[http://xmlbeans.apache.org/docs/2.0.0/guide/tools.html](http://xmlbeans.apache.org/docs/2.0.0/guide/tools.html)。这可以让您开始使用架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:19:48.500

是的。这可以通过 JAXB（用于 XML 绑定的 Java API）来实现

所有 JAXB 实现都提供了一个称为绑定编译器的工具来绑定 XML 模式，以便生成相应的 Java 类。

详情参考：[http ://www.oracle.com/technetwork/articles/javase/index-140168.html#xmp1](http://www.oracle.com/technetwork/articles/javase/index-140168.html#xmp1)

# wordpress - 如何将网站从 Adob e Business Catalyst 移动到 Wordpress

> ID：16028148
> 
> 赞同：1
> 
> 时间：2013-04-16T03:12:56.743
> 
> 标签：wordpress, migration, business-catalyst

我有一个在 Adob​​e Business Catalyst 中创建的网站。我不是这个 CMS 的粉丝。我希望将其更改为 WordPress 网站。有什么简单的方法可以做到这一点？是否有任何类型的转换软件或服务？我想保持所有文件名和重定向等相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-27T09:43:38.167

我的一位客户想离开 Business Catalyst 并将其与 Wordpress.com 博客合并。我解决 Adob​​e 缺乏导出的方法如下；

1.  我使用我的 Linux 服务器将所有内容从 Adob​​e 服务器中拉出，使用
    `wget --mirror -p --convert-links -P ./Local/Dir Website-ULR`

    *   [教程在这里](http://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/)，第 10 号

所有的 HTML 文件都没有任何扩展名，所以；

2.  我将目录复制到我的 Mac 并使用 Fork Lift 批量重命名文件以添加 .html - 尽管任何重命名软件都可以。

Wordpress 的导入工具需要一个索引文件来查找您的所有页面，因此我需要制作一个 index.html 页面，其中包含指向每个帖子的链接；

3.  我将它们复制回Linux机器并使用

    `tree -H baseHREF ./Local/Dir`

    *   根据操作系统，您可能需要下载树包或类似的包。

然后在终端窗口中生成了一个屏幕上的 HTML 文件；

4.  我复制了它创建的 HTML 代码并将其与站点的其余部分一起放入 Dreamweaver 中，尽管任何软件都可以运行批量清理链接。

由于 Wordpress.com 不允许您安装插件，我需要将其放在我的本地安装的 Wordpress 上以进行导入。

5.  然后我使用[Import HTML 2](https://wordpress.org/plugins/import-html-pages/)插件将页面放入我的本地 Wordpress 安装中

当我将文件移动到 Wordpress.com 网站时；

6.  从我的 Wordpress 导出并导入他们的博客。

我希望这对任何人都有帮助，我总共花了 12 个小时来找到我需要的所有工具并制定出我需要的所有步骤。如果我需要再做一次，现在我知道该怎么做需要一个小时。

我在帖子中有更多链接，但由于我是论坛的新手，我只允许 2 个。

比我更好的人可能会告诉你一个更快的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T00:58:09.897

在 Business Catalyst 中唯一可以“导出”的内容是电子商务产品和 Web 应用程序项目 - 它们可以导出为 .CSV 文件。然后，您可以聘请程序员将它们转换为适用于 Wordpress 的格式。

从 Business Catalyst 博客模块导出博客很棘手 - 一种方法是启用 RSS 并复制 RSS 提要并在 excel 中将其打开以将其保存为 .CSV 或 .TAB 文件，您可以在其中导入博客或让程序员将其转换为与 Wordpress 兼容的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T19:43:45.743

感谢您花时间向我更好地解释您的平台。

作为答案，我建议以下内容：

1.  `csv`使用 Screaming Frog将您当前的网站详细信息导出到文件中。
2.  然后使用 CVS Importer WordPress 插件

这对我有用。我仍然很高兴听到其他人是否找到了他们也认为合适的流程。

# antlr - 如何允许可以以数字开头而不会导致 MismatchedTokenException 的标识符

> ID：16028149
> 
> 赞同：0
> 
> 时间：2013-04-16T03:13:08.290
> 
> 标签：antlr, antlr3

我想匹配以下输入：

```
statement span=1m 0_dur=12 
```

使用以下语法：

```
options {
language = Java;
output=AST;
ASTLabelType=CommonTree; 
}

statement :'statement' 'span' '=' INTEGER 'm' ident '=' INTEGER;

INTEGER 
:   DIGIT+
    ;

ident : IDENT | 'AVG' | 'COUNT';

IDENT
:   (LETTER | DIGIT | '_')+  ;

WHITESPACE  
:   ( ' '
    | '\t'
    | '\r'
    | '\n'
    ) {$channel=HIDDEN;}
    ;

fragment 
LETTER : ('a'..'z' | 'A'..'Z') ;

fragment 
DIGIT : '0'..'9'; 
```

但它会导致错误：

MismatchedTokenException：第 1:15 行不匹配的输入 '1m' 期望 '\u0004'

有谁知道如何解决这个问题？

谢谢查尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:46:13.753

我认为您的语法是上下文敏感的，即使在词法分析器（Tokenizer）级别也是如此。字符串“1m”被识别为 IDENT，而不是 INTEGER 后跟“m”。您可以重新定义您的语法，或者使用谓词解析，或者在您的语法中嵌入 Java 代码来检测上下文（例如，如果数字出现在“span”后跟“=”之后，则将其解析为 INTEGER）。

# tesseract - tesseract如何找到blob

> ID：16028152
> 
> 赞同：0
> 
> 时间：2013-04-16T03:13:25.853
> 
> 标签：tesseract

我想使用 tesseract-ocr 制作报纸的页面布局分析，以便在 iOS 平台上找到 blob（标题、段落）。不知道怎么实现，也不知道怎么使用tesseract API。有一些错误：

```
 tesseract::PageIterator *pageIterator = tesseract->AnalyseLayout(); 
```

错误：成员访问不完整类型“tesseract::PageIterator”

```
 tesseract::PageIteratorLevel * level = pageIterator->level();
        int *left; int *top; int *right; int *bottom;
        pageIterator->BoundingBox(level,left,top,right,bottom); 
```

错误：成员访问不完整类型“tesseract::PageIterator”

我需要你的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:41:07.407

代码将类似于[Tess4J：如何使用 ResultIterator？](https://stackoverflow.com/questions/14794551/tess4j-how-to-use-resultiterator)，但在 RIL_PARA 或 RIL_BLOCK 级别。

# ruby-on-rails - Rails 记录的多个外键 - 未知操作

> ID：16028159
> 
> 赞同：0
> 
> 时间：2013-04-16T03:14:10.423
> 
> 标签：ruby-on-rails

我正在开发一个允许用户评论单个“作品”的应用程序（想想博客文章）。模型中的关联如下：

```
class User < ActiveRecord::Base
  has_many :works  
  has_many :comments

class Work < ActiveRecord::Base
  belongs_to :user
  has_many :comments

class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :post
  belongs_to :work 
```

在评论表中，一条记录具有以下字段：

id 内容
user_id
created_at
updated_at
work_id

在我的评论控制器中，我有以下创建操作：

```
def create
    @work = Work.find(params[:id])
    @comment = @work.comments.create(params[:comment])
    @comment.user = current_user
    if @comment.save
      #flash[:success] = "Post created!"
      redirect_to root_url
    else
      render 'activities'
    end
  end 
```

我正在尝试将用户和作品与评论相关联，但是当我尝试创建评论时收到以下错误消息：

```
Unknown action

The action 'update' could not be found for CommentsController 
```

我正在尝试使用以下 StackOverflow 答案作为指南，但该解决方案不适用于我： [Rails 3 中单个记录的多个外键？](https://stackoverflow.com/questions/5977267/multiple-foreign-keys-for-a-single-record-in-rails-3)

**编辑：** 我有一个关于作品#show 操作的添加评论表单：

```
def show 
  @work = Work.find(params[:id])
  @comment = current_user.comments.create(params[:comment])
  @activities = PublicActivity::Activity.order("created_at DESC").where(trackable_type: "Work", trackable_id: @work).all
  @comments = @work.comments.order("created_at DESC").where(work_id: @work ).all 
    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @work }
    end
  end 
```

评论表单本身：

```
<%= form_for(@comment) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Post a comment!" %>
  </div>
  <%= f.submit "Post", class: "btn btn-small btn-primary" %>
<% end %> 
```

我在 Comments 控制器上也有一个更新方法：

```
def update
     @comment = current_user.comments.find(params[:id])
    if @comment.update_attributes(params[:comment])
      flash[:success] = "Comment updated"
      redirect_to @comment
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:20:05.507

错误消息说：

```
The action 'update' could not be found for CommentsController 
```

因此，问题在于您的表单试图`update`在`CommentsController`. `User`这与将 the和`Work`实例都添加为外键无关。您的代码似乎是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:48:55.230

确定是否在`show`操作期间将评论保存到数据库：

```
@comment = current_user.comments.create(params[:comment]) 
```

然后表单助手将构建一个更新表单而不是创建表单（因为模型已经存在）：

```
<%= form_for(@comment) do |f| %> 
```

如果所需的操作是发布从显示页面创建的`build`评论，则尝试在显示操作中添加评论：

```
@comment = current_user.comments.build(params[:comment]) 
```

# forms - 使用表单通过查询显示表字段

> ID：16028162
> 
> 赞同：1
> 
> 时间：2013-04-16T03:14:43.830
> 
> 标签：forms, ms-access

只是一些背景信息。我的表（HireHistory）中有 50 列（水平）。我有一个表单（HireHistoryForm），它有一个 2 个文本框（HistoryMovieID 和 HistoryCustomerID）和一个按钮（该按钮运行查询“HireHistoryQuery”）

这是我的数据的摘录（CustomerID 位于顶部）： ![数据](https://i.stack.imgur.com/VZVlj.jpg)

所以我需要的是，如果在 HistoryCustomerID 框中输入了一个数字，那么它会显示该列。例如，如果输入的值为“1”，那么在我的查询中它将显示第 1 列中的所有记录。

如果在 HistoryMovieID 框中输入了一个数字（例如 0001），那么它将显示特定 CustomerID 的该 MovieID 的所有实例。即在第 1 列中是 ID，因此对于 ID=1，它将显示“0001 on 19/05/2006”然后将继续查找“0001”等的下一个实例。

对于 HistoryCustomerID，我尝试将其放入我的“字段”中进行查询：

```
=[Forms]![HireHistoryForm]![HistoryCustomerID] 
```

但它没有用。我的查询只返回了一个标有“10”的列，而这些行只是由“10”组成。

如果您能提供帮助，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:46:36.717

无意冒犯（或尽可能少冒犯），但这是一种构建数据的***可怕***方式。你*真的*需要像这样重组它：

```
CustomerID  MovieID HireDate
----------  ------- --------
1           0001    19/05/2006
1           0003    20/10/2003  
1           0007    13/08/2003
...     
2           0035    16/08/2012
2           0057    06/10/2012
... 
```

如果您保留当前的数据结构，那么

1.  你会发疯的，而且

2.  其他任何人都不太可能*接近*这个问题。

## 编辑

您修改后的数据结构是一个*非常小*的改进，但它仍然对您不利。考虑到您[在这里](https://stackoverflow.com/questions/16073518/how-to-display-specific-row-in-access)的另一个问题中，您实质上是在询问一种在进行查询时“即时”“修复”数据结构的方法。

好消息是您可以运行一些 VBA 代码*一次*将您的数据结构转换为可用的东西。首先创建您的新表，我将其命名为“HireHistoryV2”

```
ID         - AutoNumber, Primary Key
CustomerID - Number(Long Integer), Indexed (duplicates OK)
MovieID    - Text(4), Indexed (duplicates OK)
HireDate   - Date/Time, Indexed (duplicates OK) 
```

将数据复制到新表的 VBA 代码如下所示：

```
Function RestructureHistory()
Dim cdb As DAO.Database, rstIn As DAO.Recordset, rstOut As DAO.Recordset
Dim fld As DAO.Field, a() As String

Set cdb = CurrentDb
Set rstIn = cdb.OpenRecordset("HireHistory", dbOpenTable)
Set rstOut = cdb.OpenRecordset("HireHistoryV2", dbOpenTable)

Do While Not rstIn.EOF
    For Each fld In rstIn.Fields
        If fld.Name Like "Hire*" Then
            If Not IsNull(fld.Value) Then
                a = Split(fld.Value, " on ", -1, vbBinaryCompare)
                rstOut.AddNew
                rstOut!CustomerID = rstIn!CustomerID
                rstOut!MovieID = a(0)
                rstOut!HireDate = CDate(a(1))
                rstOut.Update
            End If
        End If
    Next
    Set fld = Nothing
    rstIn.MoveNext
Loop
rstOut.Close
Set rstOut = Nothing
rstIn.Close
Set rstIn = Nothing
Set cdb = Nothing
MsgBox "Done!"
End Function 
```

**注意：**您似乎正在使用 dd/mm/yyyy 日期格式，因此***请仔细检查日期转换***以确保它们正确转换。

# java - Hibernate 列“user1_.user_id”必须出现在 GROUP BY 子句中或在聚合函数中使用

> ID：16028165
> 
> 赞同：2
> 
> 时间：2013-04-16T03:14:55.240
> 
> 标签：java, hibernate, hql

我正在尝试在休眠中编写一个简单的查询，在其中我只得到一个得分最高的用户的降序列表。基本上我正在尝试编写这个查询`select user_id from user_points group by user_id order by sum(points) desc`。这适用于我正在处理的 Postgres 数据库。

我有以下 HSQL 查询`select c.user from UserPoints c group by c.user order by sum(c.points) desc`。Points 表有一个名为 user_id 的列，它引用用户表。在我们的映射中，user_id 被映射到一个 User 类。

但是，当我运行此查询时，我得到列“user1_.user_id”必须出现在 GROUP BY 子句中或用于聚合函数中。我尝试搜索类似的问题，但只是真正想出了这个：[JPA 查询/休眠：列必须出现在 GROUP BY 子句中或用于](https://stackoverflow.com/questions/13623219/jpa-query-hibernate-column-must-appear-in-the-group-by-clause-or-be-used-in-an)未回答的聚合函数中。

我有点坚持使用 HQL，因为我需要做的另一件事是加入一个没有映射关联的表（但也有一个 user_id 键）。我也试图尽可能快地保持这个查询。任何帮助都会非常感激，因为我真的很困惑为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:57:07.680

所以我想我可能已经找到了问题所在。我们实际上有两个到 user_id 列的映射。一个是一个属性，其中我们将 user_id 作为常规 long，另一个是多对一映射，我们将其映射到用户类。我将日志记录级别设置为调试，因此我可以看到休眠正在创建的查询，并且似乎它正在使用将 select c.user 转换为用户表中的所有列（这意味着它正确使用了多对一映射)，但由于某些原因，在 group by 子句中，它将 c.user 转换为 user_id 属性。由于我无法更改映射并且时间紧迫，我选择只编写一个常规 SQL 查询来获取用户 ID，然后运行另一个条件查询来获取该 ID 列表中的所有用户。

# html - 强制 DIV 换行，无论父级如何

> ID：16028168
> 
> 赞同：0
> 
> 时间：2013-04-16T03:15:21.517
> 
> 标签：html, css, overflow

所以我有一张`div`埋在固定的桌子上。我在和元素上有一些`word-wrap`和其他 msic CSS 。但是，当我谈到我的孩子时，我想忽略所有继承并在不破坏单词的情况下包装我的文本。`td``div``div`

```
#row4 td > div, textarea{
    height: 100%;
    width: 100%;
    border: 1px solid #C8C8C8;
    overflow: auto;
    padding: 5px;
    border-radius: 5px;  
    white-space: pre; /* needed for Chrome to maintain tabs, spaces, etc */
}
#div_contents{
    display: inline-block;
    white-space: normal;
    word-wrap: normal;
} 
```

.

```
<tr id="row4">
    <td>
        <div id="div_search_results" class="results" ></div>
    </td>
    <td>
        <div id="div_contents"></div>
        <textarea id="ta_contents"></textarea>
    </td>
</tr> 
```

这会导致溢出条并且不会包装我的内容。但是，如果我使用`word-wrap: break-word;`，我会得到包装的内容，但它会在单词中中断。

不管父块、中断、换行等等，我不能`div`为正常的换行文本覆盖我的孩子吗？

这是来自 Chrome 的 CSS 屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/9W2rq.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:54:05.710

解决。这最终是从插件`<pre>`添加的标签。`highlight.js`

# ios - AAC ffmpeg 编码 iOS

> ID：16028169
> 
> 赞同：2
> 
> 时间：2013-04-16T03:15:28.220
> 
> 标签：ios, ffmpeg, h.264, flv, aac

因此，我花了大部分时间为 iOS 编写 FFMPEG 客户端，但在尝试将硬件编码的 h.264/aac mov 文件转换为 h.264/aac flv 时遇到了问题。我借用了`muxing.c`示例代码并将其转换为现代的objective-c。我的 aac 编码器有问题，它说...

![控制台日志](https://i.stack.imgur.com/dotOw.png)

我想知道是否可以`-strict -2`在运行时添加命令，或者在启用实验编码器的情况下编译库？
此外，我的图书馆似乎缺少一些编码器（我只尝试过 speex 和 mp3）。我用以下方法编译它们：

```
./configure \
--prefix=armv7 \
--disable-ffmpeg \
--disable-ffplay \
--disable-ffprobe \
--disable-ffserver \
--enable-avresample \
--enable-cross-compile \
--sysroot="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk" \
--target-os=darwin \
--cc="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc" \
--extra-cflags="-arch armv7 -mfpu=neon -miphoneos-version-min=6.1" \
--extra-ldflags="-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -miphoneos-version-min=6.1" \
--arch=arm \
--cpu=cortex-a9 \
--enable-pic 
```

和其他变化，具体取决于架构。如果有人可以对我的任何一个问题提供见解，将不胜感激！

# netty - Netty 4 和服务器分块响应

> ID：16028176
> 
> 赞同：0
> 
> 时间：2013-04-16T03:16:29.883
> 
> 标签：netty

我正在尝试迁移用于使用分块类来响应某些请求的服务器代码。根据我收到的关于我之前提出的问题的反馈，我写信给频道 a `DefaultHttpResponse`（带有`Transfer-Encoding: chunked`），一些内容带有`DefaultHttpContent`，最后是`DefaultLastHttpContent`。如果重要的话，这一切都在 SSL 上。我的管道相当基本：

```
if (sslFactory != null) {
        SSLEngine engine = sslFactory.createSSLEngine(false);
        engine.setUseClientMode(false);
        p.addLast("ssl", new SslHandler(engine));
    }

    p.addLast("decoder", new HttpRequestDecoder(connectConfig.maxInitialLineLength(),
            connectConfig.maxHeaderSize(), connectConfig.maxChunkSize()));

    // Uncomment the following line if you don't want to handle HttpChunks.
    p.addLast("aggregator", new HttpObjectAggregator(1048576));

    p.addLast("encoder", new HttpResponseEncoder());

    p.addLast("deflater", new HttpContentCompressor());    

    ChannelHandler handler = new BusinessRequestHandler(...);

    // if enabled, use the execution handler
    if (eventExecutor.isDefined()) {
        p.addLast(eventExecutor.get(), "handler", handler);
    } else {
        p.addLast("handler", handler);
    } 
```

无论如何，正如我通过 tcpdump/Wireshark 确认的那样，这些都不会发送出去。我还在写入中添加了一个完成处理程序，它们都表示写入已完成。如果我切换到使用 a`FullHttpResponse`并跳过对它进行分块，那么一切正常，并且内容被写出。

然后我看了看，`HttpContentEncoder::encode`我看不到 HttpResponse 本身将如何通过。如果将其设置为状态码 100，则它会这样做，但这显然不适合此用例。据我所知，该函数将为我的用例返回 null。

我错过了什么？

谢谢，森希尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:03:19.113

这是 Netty 4.0.0.CR1 中的一个错误。今天已经推送修复：[https ://github.com/netty/netty/issues/1275](https://github.com/netty/netty/issues/1275)

# mysql - 两个 LIKE 条件，但先从一个检索，然后从另一个检索

> ID：16028185
> 
> 赞同：0
> 
> 时间：2013-04-16T03:17:17.613
> 
> 标签：mysql, sql

```
 SELECT *
   FROM address 
   WHERE name LIKE 'a%' OR name LIKE '% a%' LIMIT 10 
```

此查询检索以开头 或中间单词 开头`name`的 s 。我怎样才能从第一个检索结果 呢？`a``'a%'`
`'% a%'``LIKE 'a%'`
`LIKE '% a%'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:21:22.147

添加`ORDER BY`子句，

```
SELECT *
FROM address
WHERE name LIKE 'a%' OR name LIKE '% a%' 
ORDER BY CASE WHEN name LIKE 'a%' THEN 0 ELSE 1 END
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:21:20.197

这里是：

```
SELECT t1.*
FROM (
   SELECT *
   FROM address 
   WHERE name LIKE 'a%'
   LIMIT 10
) t1
WHERE t1.name LIKE '% a%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:21:57.007

一种方法是在查询中添加 ORDER BY 子句：

```
ORDER BY IF(name LIKE 'a%',1,2) 
```

* * *

像这样的东西：

```
SELECT *
  FROM address 
 WHERE name LIKE 'a%' OR name LIKE '% a%'
 ORDER BY IF(name LIKE 'a%',1,2) 
 LIMIT 10 
```

* * *

为了避免对大型集合（即地址中的大量行）进行“使用文件排序”操作，并且如果您只想返回 10 行，通过限制要排序的行数，看起来更复杂的查询可能会执行得更好：

```
SELECT c.* 
  FROM ( SELECT a.*
           FROM (
                  SELECT *
                    FROM address 
                   WHERE name LIKE 'a%'
                   LIMIT 10 
                ) a
          UNION ALL
         SELECT b.*
           FROM address b
          WHERE b.name LIKE '% a%' AND b.name NOT LIKE 'a%'
          LIMIT 10
       ) c
 ORDER BY c.name LIKE 'a%' DESC
 LIMIT 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T03:27:08.437

联合查询在这里可能是有序的。根据 MySQL 文档

要使 UNION 结果中的行由每个 SELECT 一个接一个地检索到的行集组成，请在每个 SELECT 中选择一个附加列以用作排序列，并在最后一个 SELECT 之后添加一个 ORDER BY：

```
(SELECT 1 AS sort_col, col1a, col1b, ... FROM t1)
UNION
(SELECT 2, col2a, col2b, ... FROM t2) ORDER BY sort_col; 
```

因此，对于您的情况，例如

```
(Select *, 1 as sortcol from addresses where name like 'a%')
 Union
 (Select *, 2 as sortcol from addresses where name like '% a%')
 Order by sortcol 
```

链接：[http ://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

# xubuntu - 如何向 Xfce (ubuntustudio) 添加快捷方式？

> ID：16028186
> 
> 赞同：0
> 
> 时间：2013-04-16T03:18:06.623
> 
> 标签：xubuntu, xfce

我去了

```
Settings => Setting Manager => Window Manager => Shortcuts 
```

我可以修改现有的键盘快捷键，但是没有添加选项。我用谷歌搜索只发现快捷方式选项卡上有+（添加）按钮。我的 Xfce 有问题吗？或者我如何向 Xfce 添加快捷方式，比如打开文件管理器？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:15:32.610

我自己找到解决方案：

```
Settings => Settings Manager => Keyboard => Applicatin Shortcuts => Add 
```

我希望这对 Xfce 新用户也有用。

# javascript - jquery if 语句无法正常运行

> ID：16028188
> 
> 赞同：0
> 
> 时间：2013-04-16T03:18:27.160
> 
> 标签：javascript, jquery, if-statement

我正在编写一个非常简单的函数，但无法让 if 语句正常工作。

```
$("#supplyRequestTextbox-clients").live("blur", function() {
    var textboxValue = $(this).val().replace(/\d+/g, '').replace(" ", "");
    if (textboxValue == "NO ACCOUNT") {
        $(".controlBarTextboxNoAccount").fadeIn("fast");
    }
}); 
```

输入#supplyRequestTextbox-clients 中的值代表一个客户，其组织方式如下：
id# FirstName LastName email phone 示例：000001 John Doe johndoe@johndoe.com 123-456-7890

未找到帐户时，字符串完全如下所示：000906 NO ACCOUNT

在我的函数中，我去掉了数字和第一个空格，然后检查它是否在我的 if 语句中有效。我已经提醒 textboxValue 并且它正在正确传递，但无论 textboxValue 是什么，if 语句都不会触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T03:29:21.107

将 if 条件更改为：

```
if(textboxValue.indexOf("NO ACCOUNT") !== -1) 
```

`indexOf("NO ACCOUNT")``"NO ACCOUNT"`在内找到`textboxValue`，如果找不到`-1`则返回。`"NO ACCOUNT"`因此，如果在您的字符串中的任何位置，这将是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:19:30.450

用于`==`比较。您正在分配一个真实的值，因此该语句总是会触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T03:19:38.480

`if`将您的条件更改为

```
if (textboxValue == "NO ACCOUNT") 
```

如果你这样做

```
if (textboxValue = "NO ACCOUNT") 
```

您实际上是在将结果分配`"NO ACCOUNT"`给`textboxValue`并评估为 bool。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T03:29:29.050

尝试这样做：

```
$("#supplyRequestTextbox-clients").live("blur", function() {
    var textboxValue = $(this).val().replace(/\d+/g, '').replace(" ", "");

    // check what textboxValue evaluates to:
    alert(textboxValue);

if (textboxValue == "NO ACCOUNT") {
    $(".controlBarTextboxNoAccount").fadeIn("fast");
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T03:30:43.553

1.  正如Kolink`==`建议的那样用于比较。

2.  您将替换`" "`为`""`, IE。删除所有空格，这样您的 if 语句将永远不会返回 true。

# android - 在 Android 中解析 SD 卡

> ID：16028189
> 
> 赞同：3
> 
> 时间：2013-04-16T03:18:29.107
> 
> 标签：android, url, xml-parsing

我的代码在声明处停在这里`sourceURL`并引发异常：

`java.net.MalformedURLException`: 未找到协议：mnt/sdcard/Android/data...

```
URL sourceUrl = new URL(Environment.getExternalStorageDirectory() + "/Android/data/com.esentral.testdev/"+"temp2.xml");

MyXMLHandler myXMLHandler = new MyXMLHandler();
xr.setContentHandler(myXMLHandler);
xr.parse(new InputSource(sourceUrl.openStream())); 
```

这里的情况是某种 URL-String 的错误转换吗？如果是这样，是否有通用的解决方法？我听说 SAX 是要走的路，但它可能会使事情进一步复杂化。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T17:09:36.560

您必须指定协议，如 http、ftp、文件等。在这里，您从 sdcard 访问它，因此它将`"file://"`在整个路径之前。

现在用这个修改你的代码片段，

```
URL sourceUrl = new URL("file://" + Environment.getExternalStorageDirectory() + "/Android/data/com.esentral.testdev/"+"temp2.xml");
MyXMLHandler myXMLHandler = new MyXMLHandler();
xr.setContentHandler(myXMLHandler);
xr.parse(new InputSource(sourceUrl.openStream())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:23:16.340

有效的 URL 以协议开头。Environment.getExternalStorageDirectory() 没有返回协议，它返回文件路径。您需要将文件协议添加到字符串的开头。

# c# - 将文件逐行拆分为数组

> ID：16028191
> 
> 赞同：0
> 
> 时间：2013-04-16T03:18:36.010
> 
> 标签：c#, arrays, file

我想有一个基于文件中的行的数组，但目前它是一个固定大小的数组：

```
string[] converList = new string[6]; // Array containing TXT lines 
```

读取文件：

```
void ReadConver()
    {
        string line;
        int i = 0;

        System.IO.StreamReader file =
            new System.IO.StreamReader("C:\\Users\\Kennyist\\Documents\\Visual Studio 2010\\Projects\\soft140as3\\convert.txt");
        while ((line = file.ReadLine()) != null)
        {
            converList[i] = line;
            i++;
        }
    } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T03:21:49.750

您可以创建一个列表，然后使用 ToArray 将其制成一个数组：

```
var cList = File.ReadAllLines("C:\\Users\\Kennyist\\Documents\\Visual Studio 2010\\Projects\\soft140as3\\convert.txt").ToList();
string[] converlist = clist.ToArray(); 
```

此外，使用`(@'C:\Kennyist...')`而不是双反斜杠

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:32:57.800

您可以使用以下方法，而不是艰难地做事：

```
var arrTextLines = File.ReadAllLines(@"C:\Users\Kennyist\Documents\Visual Studio 2010\Projects\soft140as3\convert.txt"); 
```

`arrTextLines`将是一个类型为 的对象`string[]`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T03:22:28.587

编辑答案：

```
 string[] converList;
  System.IO.StreamReader file =
  new System.IO.StreamReader("C:\\Users\\Kennyist\\Documents\\Visual Studio 2010\\Projects\\soft140as3\\convert.txt");

  converList = new string[] { file.ReadToEnd() }; 
```

谢谢@Cole

# webview - 如何从 JavaFX2 中的 WebView 获取选定的节点

> ID：16028195
> 
> 赞同：1
> 
> 时间：2013-04-16T03:19:16.050
> 
> 标签：webview, javafx-2

我可以通过下一个代码片段获取所选文本： String selection = (String) webView.getEngine().executeScript("window.getSelection().toString()"); System.out.println(选择);

但是无论如何要获得选定的节点，因为我想将内容添加到 dom 树中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:42:55.180

这更像是一个 javascript 问题，因为 executeScript 仅执行 javascript 并重新调整脚本返回的任何内容。我会尝试

```
document.getSelection().getRangeAt(0).commonAncestorContainer.parentNode 
```

这将返回产生选定部件的容器的父节点。

# php - 如何在 smarty 中打印多维数组值？

> ID：16028203
> 
> 赞同：0
> 
> 时间：2013-04-16T03:20:19.937
> 
> 标签：php, smarty

我想打印以下以`$all_class_subjects`smarty 模板命名的数组：

```
Array
(
[4] => Array
        (
            [class_id] => 5
            [class_name] => V
            [class_order] => 0
            [class_subject_assign] => 0
            [class_added_date] => 1365837028
            [class_updated_date] => 1365837028
            [class_added_staff_id] => ff8d4a5ea6bf11dce105aa2fa7b959b8
            [class_updated_staff_id] => ff8d4a5ea6bf11dce105aa2fa7b959b8
            [sub_data] => Array
                (
                    [0] => Chemistry
                    [1] => Mathematics
                )

        )
) 
```

以及我试图打印数组的代码（并非所有元素都只有class_name，并且`sub_data`数组中存在主题名称）：

```
{if $all_class_subjects}
         {foreach from=$all_class_subjects item=class_subject_data}
       <tr>
           <td width="20%">{$class_subject_data.class_name|capitalize}</td>
           <td width="40%">
            {foreach from=class_subject_data.sub_data item=subject key=subject_name}

            <b>{$subject.subject_name}</b>
              <br />
            {/foreach}

         {/foreach}     h

           </td>
</tr> 
```

但我无法打印 sub_data 数组的主题名称。因此，请告诉我们如何打印这些主题名称来帮助我们。请帮我只打印那些主题名称，其他事情我会自己处理。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:48:32.813

您可能有语法错误

```
{foreach from=class_subject_data.sub_data item=subject key=subject_name} 
```

应该是（`$`class_subject_data.sub_data 上似乎缺少）：

```
{foreach from=$class_subject_data.sub_data item=subject key=subject_name} 
```

如果在 foreach 循环下失败，请使用`{$subject|@print_r}`查看您是否获得任何数据。就在循环之前，看看你是否在你的多维数组中获得了任何数据`{$class_subject_data.sub_data|@print_r}`。

当您调试它并且一切看起来都正常时，要打印值，请使用以下内容。`from`是数据数组，`item`是数组的，是`value`数组`key`的键。希望这可以帮助！

```
{foreach from=$class_subject_data.sub_data item=subject_name key=subject_key}
    The subject is: {$subject_name} and the Key is {$subject_key} 
```

smarty 中的变量由 定义`{$variable_name}`。有关更多信息，请参阅[文档](http://www.smarty.net/docsv2/en/language.variables.tpl)。

# nhibernate - NHibernate - 无法编译映射文档

> ID：16028204
> 
> 赞同：0
> 
> 时间：2013-04-16T03:20:20.033
> 
> 标签：nhibernate

**这是我第一次使用 NHibernate，之后我从我的朋友那里获得了一个程序的源代码，该程序运行良好之后我尝试添加“Stock.hbm.xml”，如下所示：**

`

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   namespace="NBooks.Core.Models"
                   assembly="NBooks.Core">

  <class name="Stock" table="Stocks" lazy="false">

    <id name="ID">
      <column name="Stock_ID" />
      <generator class="identity" />
    </id>

    <property name="Stock_name" column="Stock_name" />
   <property name="Comp_ID" column="Comp_ID" /> 
    <property name="Stock_Code" column="Stock_Code" />
    <property name="Address" column="Address" />
    <property name="Nots" column="Nots" />

  </class>

</hibernate-mapping> 
```

`

**与我的班级“Stock.cs”**

```
 using System;
 using System.Collections.Generic;

 namespace NBooks.Core.Models
 {

public class Stock : BaseModel<Stock> 
{

         public virtual string Stock_name { get; set; }
         public virtual string Stock_Code { get; set; }
         public virtual int Comp_ID { get; set; }
         public virtual string Notes { get; set; }
         public virtual string Address { get; set; }
         public virtual bool Inactive { get; set; }

        public Stock()
         {
         }

         public Stock(string name)
         {
             this.Stock_name = name;
         }

 }

    public class StockEventArgs : EventArgs
    {

        public Stock Stock { get; set; }

        public StockEventArgs(Stock Stock)
        {
            this.Stock = Stock;
        }
 }

    public delegate void StockEventHandler(Stock sender, EventArgs e);

   } 
```

**基本模型是：**

```
using System;
using System.Collections.Generic;
using NBooks.Core.Util;
using NBooks.Data.NHibernate;
using NHibernate;

namespace NBooks.Core.Models
{
public interface IBaseModel
{
    int Id { get; set; }
}

public class BaseModel<T> : IBaseModel
{
    IList<string> errors = new List<string>();
    public virtual int Id { get; set; }

    public virtual bool HasErrors {
        get { return errors.Count > 0; }
    }

    public virtual IList<string> Errors {
        get { return errors; }
    }

    public BaseModel()
    {
    }

    public virtual void Validate()
    {
        Errors.Clear();
    }

    public virtual void SaveOrUpdate()
    {
        ITransaction trans = null;
        try {
            ISession session = NHibernateHelper.OpenSession();
            trans = session.BeginTransaction();
            session.SaveOrUpdate(this);
            session.Flush();
            trans.Commit();
        } catch (Exception ex) {
            LoggingService.Error(ex.Message);
            MessageService.ShowError(ex.Message);
            trans.Rollback();
        }
    }

    public virtual void Delete()
    {
        ITransaction trans = null;
        try {
            ISession session = NHibernateHelper.OpenSession();
            trans = session.BeginTransaction();
            session.Delete(this);
            session.Flush();
            trans.Commit();
        } catch (Exception ex) {
            LoggingService.Error(ex.Message);
            MessageService.ShowError(ex.Message);
            trans.Rollback();
        }
    }

    public static T Read(int id)
    {
        return NHibernateHelper.OpenSession().Load<T>(id);
    }

    public static IList<T> FindAll()
    {
        return     
NHibernateHelper.OpenSession().CreateCriteria(typeof(T)).List<T>();
    }
}
} 
```

**当构建它时，一切都很好并且没有错误，当运行错误“NHibernate - 无法编译映射文件Stock.hbm.xml”时出现。提前感谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:44:40.077

我注意到您的 XML 中有一个错字：

```
<property name="Nots" column="Nots" /> 
```

我建议您也考虑使用`Fluent NHibernate`。它是强类型的（大部分情况下），映射文件更易于阅读和使用 lambda 表达式，因此您不必走 XML 路线。

您的映射将如下所示：

```
public class StockMap(): ClassMap<Stock>
{
    public StockMap(){  
        Id(x => x.Id).Column("Stock_ID").GeneratedBy.Identity();
        Map(x => x.Comp_ID);
        Map(x => x.Address);
        Map(x => x.Notes);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:57:14.677

您的映射中有错字

```
<property name="Nots" column="Nots" /> 
```

应该

```
<property name="Notes" column="Nots" /> 
```

# c++ - 将对象类数组传递给函数

> ID：16028210
> 
> 赞同：0
> 
> 时间：2013-04-16T03:21:09.817
> 
> 标签：c++, string

我一直在寻找解决错误的方法，但在任何地方都找不到我的案例。所以我有一个功能

```
int getUniques(Visitors info[], string address, string startDate, string endDate); 
```

该函数将接收我的充满类对象的数组和 3 个字符串。当我尝试构建时，我得到了各种各样的错误。我会把它们都列出来。

未在此范围内声明“访客”

“地址”之前的预期主表达式（其他字符串也是如此）

表达式列表在初始化程序中被视为复合表达式

任何人都知道这些是什么意思以及如何解决它们？

编辑：大声笑我知道我很愚蠢，我现在修复了它，但我还有其他我想解决的问题。如果我仍然无法让我的方法发挥作用，我将在一段时间内重新发布并重新发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:32:27.433

这些错误意味着名称`Visitors`并且`string`未被 C++ 编译器识别为类型......

为了工作，你的类型声明`Visitors`必须在函数声明之前；在同一个源文件或包含在`#include`预处理器指令中的头文件中。

此外，C++`string`类型在标准头文件中定义`string`，必须在使用前包含在内，并且类型包含在命名空间`std`中，因此您需要使用全名`std::string`或声明您正在使用该`using`指令：

```
#include <string>
#include "visitors.hpp"

using std::string;

int getUniques(Visitors info[],
               string address,
               string startDate,
               string endDate); 
```

在`visitors.hpp`文件中，您的类型定义（可能是 a `class`，但也可能是 a `struct`、 an `union`、 an`enum`或 a`typedef`到其他类型）...

```
#pragma once

class Visitors {
     ... // Your class definition.
}; 
```

请注意，在头文件中使用该`using`指令是一种不好的做法，因为它会污染包含您的头文件的编译单元的默认命名空间。如果是这种情况，您应该使用全名`std::string`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:30:30.133

“访客信息”是传递给函数的数组的声明吗？

如果是这样，您需要声明它是什么类型的变量。例如。整数数组或字符串数​​组

所以一个更正的函数声明可能是。

```
int getUniques(string Visitors_info[], string address, string startDate, string endDate); 
```

假设我正在解释您的代码试图正确执行的操作。

# python - 在 Python 中优化 numpy 数组中元素的索引和检索？

> ID：16028224
> 
> 赞同：1
> 
> 时间：2013-04-16T03:22:45.537
> 
> 标签：python, optimization, numpy, scipy, cython

我正在尝试优化以下代码，可能通过在 Cython 中重写它：它只需要一个低维但相对较长的 numpy 数组，查看其列中的 0 值，并将它们标记为数组中的 -1。代码是：

```
import numpy as np

def get_data():
    data = np.array([[1,5,1]] * 5000 + [[1,0,5]] * 5000 + [[0,0,0]] * 5000)
    return data

def get_cols(K):
    cols = np.array([2] * K)
    return cols

def test_nonzero(data):
    K = len(data)
    result = np.array([1] * K)
    # Index into columns of data
    cols = get_cols(K)
    # Mark zero points with -1
    idx = np.nonzero(data[np.arange(K), cols] == 0)[0]
    result[idx] = -1

import time
t_start = time.time()
data = get_data()
for n in range(5000):
    test_nonzero(data)
t_end = time.time()
print (t_end - t_start) 
```

`data`是数据。`cols`是用于查找非零值的数据列数组（为简单起见，我将其全部设为同一列）。目标是计算一个 numpy 数组 ，`result`其中感兴趣的列非零的每一行的值为 1，感兴趣的相应列为零的行的值为 -1。

在 15,000 行乘 3 列的不太大的数组上运行此函数 5000 次大约需要 20 秒。有没有办法可以加快速度？似乎大部分工作都用于查找非零元素并使用索引检索它们（对其索引的调用`nonzero`和后续使用）。这可以优化还是可以做到最好？Cython 实施如何在这方面提高速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:13:35.800

```
cols = np.array([2] * K) 
```

那会很慢。那是创建一个非常大的 python 列表，然后将其转换为一个 numpy 数组。相反，请执行以下操作：

```
cols = np.ones(K, int)*2 
```

这样会快很多

```
result = np.array([1] * K) 
```

在这里你应该这样做：

```
result = np.ones(K, int) 
```

这将直接生成 numpy 数组。

```
idx = np.nonzero(data[np.arange(K), cols] == 0)[0]
result[idx] = -1 
```

cols 是一个数组，但您可以只传递一个 2。此外，使用非零值会增加一个额外的步骤。

```
idx = data[np.arange(K), 2] == 0
result[idx] = -1 
```

应该有同样的效果。

# c# - 从 .Net 调用 Image Magick 命令

> ID：16028228
> 
> 赞同：0
> 
> 时间：2013-04-16T03:23:53.463
> 
> 标签：c#, .net, process, imagemagick

我正在尝试在 .NET 应用程序中调用 Image Magick。当我复制相同的参数并使用命令行调用它时，这很奇怪。没关系，但是当我通过 C# 应用程序调用它时，最后出现错误。当我通过我的应用程序调用它时，我不知道它为什么会期望 Affine 参数。请帮忙。

```
 var proc = new Process
   {
      StartInfo = new ProcessStartInfo
     {
    FileName = @"C:\Program Files (x86)\ImageMagick-6.8.4-Q16\convert.exe",
    Arguments = "\"C:\\Users\\Pouya\\Desktop\\Rugs\\test.jpg\" -matte -virtual-pixel transparent -distort Perspective ' 2,2 0,0 2,198 0,200 198,198 200,200 198,2 200,0' \"C:\\Users\\Pouya\\Desktop\\Rugs\\testResult.jpg\"",
    UseShellExecute = false,
    RedirectStandardError = true,
    CreateNoWindow = true
     }
   };

 proc.Start();` 
```

“convert.exe：选项仿射的无效参数：'需要至少 1 个 CP'@error/distort.c/GenerateCoefficients/530。\r\nconvert.exe: 无法打开图像`2,2': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`2,2'@error/constitute.c /ReadImage/550。\r\nconvert.exe: 无法打开图像`0,0': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`0,0'@error/constitute.c/ReadImage/550。\r\nconvert.exe: 无法打开图像`2,198': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`2,198'@error/constitute.c /ReadImage/550。\r\nconvert.exe: 无法打开图像`0,200': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`0,200' @error/constitute.c/ReadImage/550。\r\nconvert.exe: 无法打开图像`198,198': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`198,198' @error/constitute.c/ReadImage /550。\r\nconvert.exe: 无法打开图像`200,200': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`200,200'@error/composee.c/ReadImage/550。\r\nconvert.exe: 无法打开图像`198,2': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`198,2'@error/constitute.c/ReadImage /550.\r\nconvert.exe: 无法打开图像`200,0'': No such file or directory @ error/blob.c/OpenBlob/2641.\r\nconvert.exe: no decode delegate for this image format`200,0'' @错误/构成.c/ReadImage/550。\r\n"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:34:04.970

将单引号更改`' 2,2 0,0 2,198 0,200 198,198 200,200 198,2 200,0'`为转义双引号。在第一个引号之后立即删除额外的前导空格：

```
\"2,2 0,0 2,198 0,200 198,198 200,200 198,2 200,0\" 
```

# wcf - 推荐的具有消息安全性的 WCF 客户端通道生命周期

> ID：16028231
> 
> 赞同：2
> 
> 时间：2013-04-16T03:24:05.613
> 
> 标签：wcf, wshttpbinding

在使用消息安全性时，我有一个关于 WCF 客户端通道生命周期的问题，但首先，关于我公司的设置和指南的一些注意事项：

*   我们的客户端-服务器应用程序仅供 Intranet 使用
*   我们的客户是 WPF 应用程序
*   我们公司的 WCF 使用指南是：
    *   使用 wsHttpBinding
    *   使用**消息安全**
    *   服务实例模式：PerCall
    *   服务并发模式：多个

这是我第一次必须在 Intranet 设置上使用消息安全性。以下是我通常如何使用我的客户端通道来限制客户端和服务器上保留的资源量，并且实际上只是为了让事情变得简单：

1.  实例化 + 打开通道（使用 ChannelFactory）
2.  进行 WCF 调用
3.  尽快关闭/处理通道

在使用 Fiddler 2 监控此策略时，我注意到由于 Message Security，**单个 WCF 调用最终导致我的服务进行 5 次往返**：

*   3 次握手的初始往返
*   实际 WCF 调用的 1 次往返
*   1 次调用以关闭会话（因为我使用的是 PerCall，所以我假设这更像是 IIS 级别的安全会话）

如果我要关闭 Message Security，正如人们所期望的那样，一个 WCF 最终会成为……单次往返。

到目前为止，我**必须**使用 Message Security，因为这是我们的指导方针。考虑到这一点并知道我们从每个客户端 WPF 应用程序进行数百次 WCF 调用一个会话，因此您是否建议打开客户端通道并保持打开以供重复使用，而不是每次都丢弃它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:17:16.237

我建议不要抢先关闭功能，直到您知道它们是一个已知问题。预优化是不必要的工作。在您注意到您的客户有滞后问题之前，我不会担心消息安全性。在这一点上，尝试一些事情：让客户保持更长时间开放的方法之一；二、尝试在不关闭消息安全的情况下将请求分组在一起；三、考虑缓存，如果可以的话；四、如果消息安全是最终罪魁祸首，那就换一种方法。我不会因为看到更多的网络流量而关闭某些东西，直到我知道这是我可以做的最后一件事来提高性能。

# jquery-mobile - 除非页面刷新，否则 jQuery Mobile 内容不会出现

> ID：16028233
> 
> 赞同：0
> 
> 时间：2013-04-16T03:24:18.003
> 
> 标签：jquery-mobile, page-refresh

除非我手动刷新页面，否则我在底部的 Javascript 中进行的代码操作不会发生。有什么办法可以防止这种情况发生吗？如果没有，如何在页面加载后立即动态刷新页面？谢谢你的帮助！

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Universal Travel Flights</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/my.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <script type="text/javascript" src="js/form_validation.js"></script>
    <script src="js/cordova-2.5.0.js"></script>
</head>
<body>
    <div data-role="page" id="passenger">
        <div data-theme="a" data-role="header">
            <h3>
            </h3>
        </div>
        <div data-role="content">
            <div data-role="navbar" data-iconpos="top">
                <ul>
                    <li>
                        <a href="index.html" data-transition="fade" data-theme="" class="ui-btn-active ui-state-persist">
                            Book
                        </a>
                    </li>
                    <li>
                        <a href="deals.html" data-transition="fade" data-theme="">
                            Deals
                        </a>
                    </li>
                    <li>
                        <a href="contact.html" data-transition="fade" data-theme="">
                            Contact
                        </a>
                    </li>
                </ul>
            </div>
            <form id="inputform" name="inputform" method="get" action="payment.html">
                <input type="hidden" name="flightID" id="flightID" />
                <div data-role="collapsible-set" id="passengers">

                </div>
                <br/>
                <input type="submit" value="Continue" data-theme="b" data-icon="arrow-r" data-iconpos="right"/>
            </form>
            <a data-role="button" data-transition="fade" data-theme="c" href="details.html" data-icon="arrow-l" data-iconpos="left">
                Back
            </a>
          </div>
        <div data-theme="a" data-role="footer">
            <h3>
            </h3>
        </div>
    </div>
    <script>
    $( document ).on( "pageinit", "#passenger", function() {
        var arrArgs = location.search.substring(1).split("&");
        document.getElementById("flightID").value = arrArgs[2].substring(arrArgs[2].indexOf("=")+1);
        var text = "";

        for(var i = 0; i < arrArgs[0].substring(arrArgs[0].indexOf("=")+1); i++)
        {
            text += "<div data-role='collapsible' data-collapsed='false'><h4>Adult</h4><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'>" +
            "<input name='fname' id='fname' placeholder='First name*' value='' type='text' class='required'/></fieldset></div><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'>" +
            "<input name='mname' id='mname' placeholder='Middle name' value='' type='text' /></fieldset></div><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'>"+
            "<input name='lname' id='lname' placeholder='Last name*' value='' type='text' class='required'/></fieldset></div><div data-role='fieldcontain'><select name='gender' data-mini='true' id='gender' class='required'>" +
            "<option value=''>Gender*</option><option value='female'>Female</option><option value='male'>Male</option></select></div><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'>" +
            "<input name='dob' id='dob' placeholder='Date of Birth (mm/dd/yyyy)*' value='' type='text' class='required'/></fieldset></div></div>";
        }

        for(var i = 0; i < arrArgs[1].substring(arrArgs[1].indexOf("=")+1); i++)
        {
            text += "<div data-role='collapsible' data-collapsed='false'><h4>Child</h4><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'>" +
            "<input name='fname' id='fname' placeholder='First name*' value='' type='text' class='required'/></fieldset></div><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'>" +
            "<input name='mname' id='mname' placeholder='Middle name' value='' type='text' /></fieldset></div><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'><input name='lname' id='lname' placeholder='Last name*' value='' type='text' class='required'/>" +
            "</fieldset></div><div data-role='fieldcontain'><select name='gender' data-mini='true' id='gender' class='required'><option value=''>Gender*</option><option value='female'>Female</option><option value='male'>Male</option></select>" +
            "</div><div data-role='fieldcontain'><fieldset data-role='controlgroup' data-mini='true'><input name='dob' id='dob' placeholder='Date of Birth (mm/dd/yyyy)*' value='' type='text' class='required'/></fieldset></div></div>";
        }

        document.getElementById("passengers").innerHTML = text;

    });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:46:03.427

好的，我想我想通了......用这个包装你的脚本：

```
<script>$(document).ready(function( ...Place all that code in here...

); <<<you need to close it.
</script> 
```

那应该这样做。

# ios - 写入sqlite db（iOS）时崩溃后我该怎么办？

> ID：16028236
> 
> 赞同：1
> 
> 时间：2013-04-16T03:24:24.343
> 
> 标签：ios, database, sqlite

如果应用程序在写入 sqlite db（或 CoreData）时崩溃，有时 db 文件会被破坏，之后 db 的初始化可能无法打开。

我现在正在做的是删除数据库文件，如果它无法打开，并复制一个新的以使用。

我想知道处理这种情况的**最佳方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:05:12.083

由于 SQLite 的原子提交性质，您永远不会遇到数据库损坏，如果是，这可能是由于在 iOS 或硬盘本身中启用了诸如“写入缓存”之类的功能，或者甚至可能是由硬件引起的失败。

SQLite 维护一个日志文件以在电源故障或其他突然关闭的情况下回滚提交并将数据库返回到一致的状态。如果发生损坏，则意味着操作系统对 SQLite 的响应表明写入操作已完成，而实际上它尚未物理提交到媒体。请确保在您的应用程序中使用时禁用写入缓存。有关更多信息，请参阅 SQLite[原子提交参考](http://www.sqlite.org/atomiccommit.html)。

否则，人们似乎“修复”一个 SQlite DB 的常用方法是`.dump`将 DB 文件转换为另一个。像这样`echo ".dump" | sqlite old.db | sqlite new.db`

希望这可以帮助...

[[资源]](http://random.kakaopor.hu/how-to-repair-an-sqlite-database)

# hibernate - 命名 SQL 查询

> ID：16028241
> 
> 赞同：0
> 
> 时间：2013-04-16T03:24:53.130
> 
> 标签：hibernate

我已经使用注释创建了域对象，现在我需要编写一些 sql 查询来从/向多个表中获取/插入/更新数据。

有没有办法只保留 hbm.xml 文件中的 sql 查询作为命名查询，因为域对象已经使用注释创建，我不需要以 xml 方式进行。如果这是可能的，那么需要遵循哪些步骤，请指教。

**提前致谢。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:31:52.050

是的，您可以在 xml 文件中使用波纹管标签

```
<sql-query name="Myquery">
   select * from YourTableName
</sql-query> 
```

检查此示例 [http://www.java4s.com/hibernate/example-on-hibernate-named-queries/](http://www.java4s.com/hibernate/example-on-hibernate-named-queries/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:43:32.970

首先在 hbm.xml 中定义一个 sql-query，如：

```
<sql-query name="persons"> 
  <return alias="person"  class="eg.Person"/> 
 Select person.NAME AS {person.name},person.AGE AS {person.age},person.SEX AS {person.sex} FROM PERSON person Where person.NAME LIKE :namePattern
</sql-query> 
```

然后通过语句的名称获取它：

```
List people = sess.getNamedQuery("persons").setString("namePattern" ,namePattern)
.setMaxResults( 50 )
.list(); 
```

另一种方式，不需要sql-query元素，直接写java代码：

列出猫 = sess.createSQLQuery(

```
"select {cat.*}, {kitten.*} from cats cat, cats kitten where kitten.mother = cat.id ")
.addEntity("cat" , Cat. class)         // add entity
.addJoin("kitten" ,  "cat.kittens ")   // add related entity 
.list(); 
```

也许对你有帮助:)

# javascript - 如何通过用户脚本更改在外部网页中运行的 javascript 中的数据？

> ID：16028242
> 
> 赞同：-1
> 
> 时间：2013-04-16T03:24:55.453
> 
> 标签：javascript, html, userscripts

我想更改在外部网页中运行的 js 文件中的对象属性。对象定义如下：

```
 var OB1{
        transactions: {
            number:100
        }
    }; 
```

如何通过用户脚本文件更改数字的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:31:55.943

```
OB1["transactions"]["number"] = 200 
OR 
OB1.transactions.number = 200 
```

# plane - 从具有少量代表性点的较小平面创建较大的笛卡尔点平面

> ID：16028243
> 
> 赞同：-1
> 
> 时间：2013-04-16T03:25:07.663
> 
> 标签：plane, cartesian

我有一个由几个点组成的笛卡尔点平面。我想使用这少量的点来创建一个较大的点平面，该平面在几何上与较小的平面相似。有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:31:00.130

1）取三个你知道共面的点，并计算该多边形的法线向量。

2) [http://en.wikipedia.org/wiki/Coplanarity](http://en.wikipedia.org/wiki/Coplanarity)从你的法线，你可以求解平面公式，并在同一平面上随机生成其他点。

（例如，要确定随机生成点的分布，您可以从中找到所有点的中心平均值及其标准分布）

# asp.net - 如何在不访问代码的情况下将 doctype 更改为标准模式？

> ID：16028248
> 
> 赞同：0
> 
> 时间：2013-04-16T03:26:19.977
> 
> 标签：asp.net, css, internet-explorer, doctype, quirks-mode

我正在设计一个基于 .NET 软件 CMS 解决方案的站点，该解决方案不遵循当前的最佳实践。它使用表格和`<!-- DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" -->`. 软件公司不允许您编辑`.aspx`文件或`js`. 它们只允许您编辑样式表和不同的模块，例如 HTML 模块、天气模块、幻灯片模块等。

因此，IE 总是以打破 CSS 的怪癖模式呈现网站。我无权更改文档类型或编辑`<head></head>`.

有没有办法在无法访问代码的情况下更改文档类型？

我必须处理的事情：

```
<!--DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" -->
<html>
<head id="htmlHead"><title>
Welcome to xxx
</title>

<script type="text/javascript" language="JavaScript">
        function stopError()
        {
          return true;
        }
        window.onerror = stopError;
</script>

<link href="xxx.css" rel="stylesheet" type="text/css" />
<meta name="ROBOTS" content="INDEX,NOFOLLOW" />
<link href="xxx/favicon.ico" rel="SHORTCUT ICON" />
<style id="spMenuStyle"></style>
<link id="ApplicationRoot" rel="AppRoot" href="/xxx/" /><script type="text/javascript" src="/xxx/scripts/Utility.js">
</script>
<script type="text/javascript" language="javascript" sr="cxxx/BlockIFrame.js">
</script>
<link href="/xxx/WebResource.axd?d=9IeP9KvvsN3Ik1tvDsOJspkYjKE_KnZBT8bvXX7faYYRqxbjgHhLZKgtKfFSoL4-itgpmZrgTG68lyrA-SRm95xnEdLdUHa4j1nbnB_xoc_0zNWbtGMRDJOai6Kgu4UI0Dg5lw2&amp;t=634950712700000000" type="text/css" rel="stylesheet" class="Telerik_stylesheet" />
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:03:58.097

如果您能够注入自己的 JavaScript，则可能能够注入`X-UA-Compatible`元标记。

此代码将注入元标记并强制 IE 以*边缘*模式运行，这意味着 IE 会将其视为标准模式：

```
var meta = document.createElement('meta');
meta.setAttribute('http-equiv', 'x-ua-compatible');
meta.setAttribute('content', 'IE=edge');

document.getElementsByTagName('head')[0].appendChild(meta); 
```

[您可以在此处了解元标记。](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)

# google-glass - Google Glass Mirror API 服务不可用

> ID：16028249
> 
> 赞同：2
> 
> 时间：2013-04-16T03:26:39.023
> 
> 标签：google-glass, google-mirror-api

几个小时前发布了 API 和 demo 应用程序，但是当进入 Google API 服务页面时，[镜像 API](https://code.google.com/apis/console)尚未列出。

# mysql - Mysql删除查询不适用于灯堆栈

> ID：16028256
> 
> 赞同：0
> 
> 时间：2013-04-16T03:00:49.073
> 
> 标签：mysql, php, lamp, phpmyadmin

我正在做一个关于 php 的项目工作。在我的工作中，每一个查询都能顺利进行。但是当我想删除任何使用它的对象时不会删除...

这是我的php代码

```
<?php
//delete item
if(isset($_GET['deletecat'])){
    $id_to_delete = $_GET['deletecat'];
    $sql = mysql_query("DELETE FROM `category` WHERE `Category_id`=$id_to_delete LIMIT 1") or die('Error: Could not delete.');
    }
    else{
    header('location: category.php');
    exit();
    }       
?> 
```

之后我只收到错误消息。GET 值没问题。在我的 phpmyadmin 上，这个 SQL 运行正常。但是当我想删除任何对象时会出现一条弹出消息。我现在能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:27:55.033

有几层您可能会遇到问题：数据库连接、查询或您发送的数据。

此外，您没有过滤 " 和 ' 标记，因此您可能会遇到麻烦，并且您不能确保您的 id 是一个数字，因此您的 sql 也可能在那里失败。

但是，您可以通过对代码进行一些调整来解决这个问题......您可以在代码中插入一些诊断信息，以查看 mysql 报告错误的内容，并更好地了解如何修复它。

注意 [一般推荐][1] 使用 mysqli 扩展而不是 mysql 扩展，但不管怎样，这里是您当前使用的扩展的示例代码

希望这可以帮助！

```
<?php

    if ( isset($_GET['deletecat'])) {

        #dbh -> database resource. 
        $dbh = mysql_connect()

        #mysql_connect returns false if it fails. capture error and echo to output.
        if (!$dbh) {
            die("Could not connect to database server: ".mysql_error()."\n");
            #if using mysqli use mysql_connect_error() instead
        }

        #never trust input. use an escape function.    
        $id_to_delete = mysql_real_escape_string($_GET['deletecat'],$dbh);

        #force $id_to_delete to be treated as a number, or make it safer in your sql. 
        #i used the latter method below.
        $sql = "DELETE FROM `category` WHERE `Category_id` = '$id_to_delete' LIMIT 1");

        #mysql_query returns false on failure
        $result = mysql_query($sql,$dbh);

        #on failure catch the error and display the exact contents of 'deletecat' in a web-friendly way.
        if (!$result) {
            $error=mysql_error($dbh);
            die ("Error: Could not delete '"
                 .htmlentities(print_r($_GET['deletecat'],true)).". Error: $error\n"
            );

       }

       #if we did not trigger die() above we are ok.
       header('location: category.php');
       exit();
    }
?> 
```

：

[1]：见警告[http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:45:42.247

您应该首先转义 GET 变量以避免任何 SQl 注入攻击，正如 deceze 已经说过的那样。那么，你应该明白，如果你需要执行删除查询，phpmyadmin给出的消息是一个确认。您可以使用`mysql_real_escape_string($value)`转义，但正如 php 供应商所说，此功能将很快被删除，目前已被弃用。再见..

# c - 带有 Tinyos 1,x 的 NesC 中的动态数组

> ID：16028258
> 
> 赞同：0
> 
> 时间：2013-04-16T03:27:54.827
> 
> 标签：c, arrays, tinyos, nesc

我想定义我不想给它恒定长度 ex:的动态[数组](http://docs.tinyos.net/tinywiki/index.php/Special%3aSearch?search=array&go=Go)`uint16_t array1[10]`。

当我们插入新项目时需要动态增长。

我希望它适用于 TinyOs 1.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:56:54.787

AFAIK，TinyOS 不支持动态内存分配。一种解决方法是调用`libc`为 AVR 和 MSP 芯片实现的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:03:46.900

你必须给它一个恒定的长度。如果您不喜欢这样，那么 C 语言可能不适合您的任务。

如果您使用`calloc`, `malloc`or`realloc`最初分配您的数组，那么您可以稍后调整它的大小，使用`realloc`非常简单：

```
#include <stdlib.h>
#include <assert.h>
#include <time.h>

int main(void) {
    uint16_t *array = NULL; /* Starts off as NULL, */
    size_t    length = 0;   /* with 0 items. */

    srand(time(NULL));
    for (size_t x = 0; x < rand(); x++) {
        /* This will resize when length is a power of two, eg: 0, 1, 2, 4, 8, ... */
        if (length & (length - 1) == 0) {
            uint16_t *temp = realloc(array, sizeof *temp * (length * 2 + 1));
            assert(temp != NULL); /* todo: Insert error handling */
            array = temp;
        }

        array[length++] = rand();
    }
} 
```

# c++ - 围绕坐标的 C++ 数组和值

> ID：16028274
> 
> 赞同：1
> 
> 时间：2013-04-16T03:30:36.510
> 
> 标签：c++, visual-c++, multidimensional-array, indexing

我在对下面给出的坐标周围的多维数组的值求和时遇到了一些困难。我的索引位置逻辑有问题。任何想法都会非常有帮助，如果需要更多信息，请随时问我。

```
#include <iostream>
#include <ctime>

using namespace std;

int main()
{
srand(time(0));

int displayArray[11][11];

    cout<<"\t\t\t\t\t\t\t\t\t\t\t\t\tColumn\n\n";
    for(int column=1;column<10;column++)
    {
        cout<<"\t "<<column;
    }
    cout<<"\n\n";
    //fill array with random numbers

    for(int i=0;i<9;i++)
    {
        for(int m=0;m<9;m++)
        {
            displayArray[i][m]=rand()%10;
        }
    }

    cout<<"\n\n\n";

    //main data printout

    for(int k=0;k<9;k++)
    {
        cout<<"Row "<<k+1<<"\t ";

    for(int l=0;l<9;l++)
    {
        cout<<displayArray[k][l]<<"\t";
    }
    cout<<endl<<endl;
    }

    cout<<"\n\n";

    int row=0, column=0;
    cout<<"What array cell would you like to see? (Press enter after each entry)\n";
    cout<<"Row = ";
    cin>>row;
    cout<<"Column = ";
    cin>>column;
    cout<<"\nThe number "<<displayArray[row-1][column-1]<<" is in cell "<<row<<","<<column;

    int coord1=displayArray[row-2][column+2],
        coord2=displayArray[row+2][column+2],
        coord3=displayArray[row-2][column-2],
        coord4=displayArray[row-2][column+2],
        coord5=displayArray[row-2][column+2],
        coord6=displayArray[row-2][column+2],
        coord7=displayArray[row-2][column+2],
        coord8=displayArray[row-2][column+2];

    int sum=coord1+coord2+coord3+coord4+coord5+coord6+coord7+coord8;

    cout<<"\n\nThe sum of the cells surrounding "<<row<<","<<column<<" is "<<sum;

    cin.get();
    cin.get();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:36:58.570

您的问题可能是您使用 row/column -2 和 row/column +2 作为相邻方向，这是不正确的。如果 (row-1, col-1) 是您当前的单元格，那么您需要 row/col -2 和 row/col +0。

```
int coord1=displayArray[row-2][column-2],
    coord2=displayArray[row-2][column-1],
    coord3=displayArray[row-2][column],
    coord4=displayArray[row-1][column-2],
    coord5=displayArray[row-1][column],
    coord6=displayArray[row][column-2],
    coord7=displayArray[row][column-1],
    coord8=displayArray[row][column];
int sum=coord1+coord2+coord3+coord4+coord5+coord6+coord7+coord8; 
```

但是，这可以通过更多的编程方式完成：

```
int sum = 0;
for (int x=row-2; x<=row; x++) {
    for (int y=column-2; y<=column; y++) {
        if ((x != row-1) || (y != column-1)) { //Avoids "center" cell (self)
            sum += displayArray[x][y]
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:39:13.610

所以如果我理解正确，用户输入一个行号和列号，它对应于位于`displayArray[row-1][column-1]`

因此，该单元格周围的坐标应该是。

```
displayArray[row][column]
displayArray[row-1][column]
displayArray[row-2][column]
displayArray[row][column-1]
displayArray[row-2][column-1]
displayArray[row][column-2]
displayArray[row-1][column-2]
displayArray[row-2][column-2] 
```

我不确定你为什么要使用你的坐标，但那是你的问题。

此外，如果用户选择数组边界上的单元格，您将要确保您的程序不会崩溃。例如：如果您尝试在单元格 (0,0) 周围搜索坐标，则在尝试加载`displayArray[-1][-1]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:38:19.127

您的错误是将基于 0 的索引转换为基于 1 的索引。数组是基于 0 的。您让他们输入基于 1 的行。然后你想在它周围添加 8 个数字。如果他们输入了基于 0 的数字并输入了 N，那么您需要为每一行/列求和 [n-1]、n 和 n+1。要处理基于 0 的问题，您需要执行 n-2、n-1 和 n。但是你正在做 n-2 和 n+2。您也没有在靠近右侧的任何地方计算行的中间。

最佳实践甚至不是那样做数学。就是读入行号/列号，然后立即减去1，使其从0开始，然后从那时起将其作为0处理。

# android - 将 BAFX OBD-II 适配器连接到修改后的蓝牙聊天应用程序不起作用

> ID：16028277
> 
> 赞同：1
> 
> 时间：2013-04-16T03:30:47.130
> 
> 标签：android, obd-ii

我买了一个 BAFX OBD-II 蓝牙适配器。我目前正在尝试修改示例 BluetoothChat 应用程序以与适配器进行通信。但是，每当我尝试连接到它时，应用程序都会显示“无法连接”。在应用程序外配对有效，但在应用程序内无效。奇怪的是，该设备可以同时使用 Torque 和 DashCommand。我尝试将 UUID 更改为 SPP，但这也没有用。我正在使用 Android 4.2.2 的 Nexus 7 上运行该应用程序。请帮忙。

这是 BluetoothChat 活动第一部分的代码

```
public class BluetoothChat<ImageView> extends Activity {
// Debugging
private static final String TAG = "BluetoothChat";
private static final boolean D = true;

// Message types sent from the BluetoothChatService Handler
public static final int MESSAGE_STATE_CHANGE = 1;
public static final int MESSAGE_READ = 2;
public static final int MESSAGE_WRITE = 3;
public static final int MESSAGE_DEVICE_NAME = 4;
public static final int MESSAGE_TOAST = 5;

// Key names received from the BluetoothChatService Handler
public static final String DEVICE_NAME = "device_name";
public static final String TOAST = "toast";

// Intent request codes
private static final int REQUEST_CONNECT_DEVICE_SECURE = 1;
private static final int REQUEST_CONNECT_DEVICE_INSECURE = 2;
private static final int REQUEST_ENABLE_BT = 3;

// Layout Views
private ListView mConversationView;
private EditText mOutEditText;
private Button mSendButton;

// Name of the connected device
private String mConnectedDeviceName = null;
// Array adapter for the conversation thread
private ArrayAdapter<String> mConversationArrayAdapter;
// String buffer for outgoing messages
private StringBuffer mOutStringBuffer;
// Local Bluetooth adapter
private BluetoothAdapter mBluetoothAdapter = null;
// Member object for the chat services
private BluetoothChatService mChatService = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(D) Log.e(TAG, "+++ ON CREATE +++");

    // Set up the window layout
    setContentView(R.layout.main);

    // Get local Bluetooth adapter
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    // If the adapter is null, then Bluetooth is not supported
    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
        finish();
        return;
    }
}

@Override
public void onStart() {
    super.onStart();
    if(D) Log.e(TAG, "++ ON START ++");

    // If BT is not on, request that it be enabled.
    // setupChat() will then be called during onActivityResult
    if (!mBluetoothAdapter.isEnabled()) {
        Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
    // Otherwise, setup the chat session
    } else {
        if (mChatService == null) setupChat();
    }
}

@Override
public synchronized void onResume() {
    super.onResume();
    if(D) Log.e(TAG, "+ ON RESUME +");

    // Performing this check in onResume() covers the case in which BT was
    // not enabled during onStart(), so we were paused to enable it...
    // onResume() will be called when ACTION_REQUEST_ENABLE activity returns.
    if (mChatService != null) {
        // Only if the state is STATE_NONE, do we know that we haven't started already
        if (mChatService.getState() == BluetoothChatService.STATE_NONE) {
          // Start the Bluetooth chat services
          mChatService.start();
        }
    }
}

//keep track of current PID number
int message_number = 1;

private void setupChat() {
    Log.d(TAG, "setupChat()");

    // Initialize the array adapter for the conversation thread
    mConversationArrayAdapter = new ArrayAdapter<String>(this, R.layout.message);
    mConversationView = (ListView) findViewById(R.id.in);
    mConversationView.setAdapter(mConversationArrayAdapter);

    // Initialize the compose field with a listener for the return key
    //mOutEditText = (EditText) findViewById(R.id.edit_text_out);
    //mOutEditText.setOnEditorActionListener(mWriteListener);

    // Initialize the send button with a listener that for click events
    /*mSendButton = (Button) findViewById(R.id.button_send);
    mSendButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // Send a message using content of the edit text widget
            TextView view = (TextView) findViewById(R.id.edit_text_out);
            String message = view.getText().toString();
            sendMessage(message + '\r');
        }
    });*/

    // Initialize the BluetoothChatService to perform bluetooth connections
    mChatService = new BluetoothChatService(this, mHandler);

    // Initialize the buffer for outgoing messages
    mOutStringBuffer = new StringBuffer("");

    //---Get Vehicle Data Button---
    final ToggleButton getDataButton = (ToggleButton) findViewById(R.id.toggleButton1);
    getDataButton.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) {

            if(getDataButton.isChecked()) {
                startTransmission();
            }
            else {
                message_number = 0;
            }

        }
    });

    //---Clear Trouble Codes Button---
    Button getCodesButton = (Button) findViewById(R.id.button2);
    getCodesButton.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) {

            clearCodes();
        }
    });   

} 
```

这是 BluetoothChatService 的代码

```
public class BluetoothChatService {
// Debugging
private static final String TAG = "BluetoothChatService";
private static final boolean D = true;

// Name for the SDP record when creating server socket
private static final String NAME_SECURE = "BluetoothChatSecure";
private static final String NAME_INSECURE = "BluetoothChatInsecure";

// Unique UUID for this application
private static final UUID MY_UUID_SECURE =
    UUID.fromString("fa87c0d0-afac-11de-8a39-0800200c9a66");
private static final UUID MY_UUID_INSECURE =
    UUID.fromString("8ce255c0-200a-11e0-ac64-0800200c9a66");

// Member fields
private final BluetoothAdapter mAdapter;
private final Handler mHandler;
private AcceptThread mSecureAcceptThread;
private AcceptThread mInsecureAcceptThread;
private ConnectThread mConnectThread;
private ConnectedThread mConnectedThread;
private int mState;

// Constants that indicate the current connection state
public static final int STATE_NONE = 0;       // we're doing nothing
public static final int STATE_LISTEN = 1;     // now listening for incoming connections
public static final int STATE_CONNECTING = 2; // now initiating an outgoing connection
public static final int STATE_CONNECTED = 3;  // now connected to a remote device

/**
 * Constructor. Prepares a new BluetoothChat session.
 * @param context  The UI Activity Context
 * @param handler  A Handler to send messages back to the UI Activity
 */
public BluetoothChatService(Context context, Handler handler) {
    mAdapter = BluetoothAdapter.getDefaultAdapter();
    mState = STATE_NONE;
    mHandler = handler;
}

/**
 * Set the current state of the chat connection
 * @param state  An integer defining the current connection state
 */
private synchronized void setState(int state) {
    if (D) Log.d(TAG, "setState() " + mState + " -> " + state);
    mState = state;

    // Give the new state to the Handler so the UI Activity can update
    mHandler.obtainMessage(BluetoothChat.MESSAGE_STATE_CHANGE, state, -1).sendToTarget();
}

/**
 * Return the current connection state. */
public synchronized int getState() {
    return mState;
}

/**
 * Start the chat service. Specifically start AcceptThread to begin a
 * session in listening (server) mode. Called by the Activity onResume() */
public synchronized void start() {
    if (D) Log.d(TAG, "start");

    // Cancel any thread attempting to make a connection
    if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    setState(STATE_LISTEN);

    // Start the thread to listen on a BluetoothServerSocket
    if (mSecureAcceptThread == null) {
        mSecureAcceptThread = new AcceptThread(true);
        mSecureAcceptThread.start();
    }
    if (mInsecureAcceptThread == null) {
        mInsecureAcceptThread = new AcceptThread(false);
        mInsecureAcceptThread.start();
    }
}

/**
 * Start the ConnectThread to initiate a connection to a remote device.
 * @param device  The BluetoothDevice to connect
 * @param secure Socket Security type - Secure (true) , Insecure (false)
 */
public synchronized void connect(BluetoothDevice device, boolean secure) {
    if (D) Log.d(TAG, "connect to: " + device);

    // Cancel any thread attempting to make a connection
    if (mState == STATE_CONNECTING) {
        if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    // Start the thread to connect with the given device
    mConnectThread = new ConnectThread(device, secure);
    mConnectThread.start();
    setState(STATE_CONNECTING);
}

/**
 * Start the ConnectedThread to begin managing a Bluetooth connection
 * @param socket  The BluetoothSocket on which the connection was made
 * @param device  The BluetoothDevice that has been connected
 */
public synchronized void connected(BluetoothSocket socket, BluetoothDevice
        device, final String socketType) {
    if (D) Log.d(TAG, "connected, Socket Type:" + socketType);

    // Cancel the thread that completed the connection
    if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    // Cancel the accept thread because we only want to connect to one device
    if (mSecureAcceptThread != null) {
        mSecureAcceptThread.cancel();
        mSecureAcceptThread = null;
    }
    if (mInsecureAcceptThread != null) {
        mInsecureAcceptThread.cancel();
        mInsecureAcceptThread = null;
    }

    // Start the thread to manage the connection and perform transmissions
    mConnectedThread = new ConnectedThread(socket, socketType);
    mConnectedThread.start();

    // Send the name of the connected device back to the UI Activity
    Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_DEVICE_NAME);
    Bundle bundle = new Bundle();
    bundle.putString(BluetoothChat.DEVICE_NAME, device.getName());
    msg.setData(bundle);
    mHandler.sendMessage(msg);

    setState(STATE_CONNECTED);
}

/**
 * Stop all threads
 */
public synchronized void stop() {
    if (D) Log.d(TAG, "stop");

    if (mConnectThread != null) {
        mConnectThread.cancel();
        mConnectThread = null;
    }

    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }

    if (mSecureAcceptThread != null) {
        mSecureAcceptThread.cancel();
        mSecureAcceptThread = null;
    }

    if (mInsecureAcceptThread != null) {
        mInsecureAcceptThread.cancel();
        mInsecureAcceptThread = null;
    }
    setState(STATE_NONE);
}

/**
 * Write to the ConnectedThread in an unsynchronized manner
 * @param out The bytes to write
 * @see ConnectedThread#write(byte[])
 */
public void write(byte[] out) {
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED) return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.write(out);
}

/**
 * Indicate that the connection attempt failed and notify the UI Activity.
 */
private void connectionFailed() {
    // Send a failure message back to the Activity
    Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(BluetoothChat.TOAST, "Unable to connect device");
    msg.setData(bundle);
    mHandler.sendMessage(msg);

    // Start the service over to restart listening mode
    BluetoothChatService.this.start();
}

/**
 * Indicate that the connection was lost and notify the UI Activity.
 */
private void connectionLost() {
    // Send a failure message back to the Activity
    Message msg = mHandler.obtainMessage(BluetoothChat.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(BluetoothChat.TOAST, "Device connection was lost");
    msg.setData(bundle);
    mHandler.sendMessage(msg);

    // Start the service over to restart listening mode
    BluetoothChatService.this.start();
}

/**
 * This thread runs while listening for incoming connections. It behaves
 * like a server-side client. It runs until a connection is accepted
 * (or until cancelled).
 */
private class AcceptThread extends Thread {
    // The local server socket
    private final BluetoothServerSocket mmServerSocket;
    private String mSocketType;

    public AcceptThread(boolean secure) {
        BluetoothServerSocket tmp = null;
        mSocketType = secure ? "Secure":"Insecure";

        // Create a new listening server socket
        try {
            if (secure) {
                tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE,
                    MY_UUID_SECURE);
            } else {
                tmp = mAdapter.listenUsingInsecureRfcommWithServiceRecord(
                        NAME_INSECURE, MY_UUID_INSECURE);
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "listen() failed", e);
        }
        mmServerSocket = tmp;
    }

    public void run() {
        if (D) Log.d(TAG, "Socket Type: " + mSocketType +
                "BEGIN mAcceptThread" + this);
        setName("AcceptThread" + mSocketType);

        BluetoothSocket socket = null;

        // Listen to the server socket if we're not connected
        while (mState != STATE_CONNECTED) {
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception
                socket = mmServerSocket.accept();
            } catch (IOException e) {
                Log.e(TAG, "Socket Type: " + mSocketType + "accept() failed", e);
                break;
            }

            // If a connection was accepted
            if (socket != null) {
                synchronized (BluetoothChatService.this) {
                    switch (mState) {
                    case STATE_LISTEN:
                    case STATE_CONNECTING:
                        // Situation normal. Start the connected thread.
                        connected(socket, socket.getRemoteDevice(),
                                mSocketType);
                        break;
                    case STATE_NONE:
                    case STATE_CONNECTED:
                        // Either not ready or already connected. Terminate new socket.
                        try {
                            socket.close();
                        } catch (IOException e) {
                            Log.e(TAG, "Could not close unwanted socket", e);
                        }
                        break;
                    }
                }
            }
        }
        if (D) Log.i(TAG, "END mAcceptThread, socket Type: " + mSocketType);

    }

    public void cancel() {
        if (D) Log.d(TAG, "Socket Type" + mSocketType + "cancel " + this);
        try {
            mmServerSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "Socket Type" + mSocketType + "close() of server failed", e);
        }
    }
}

/**
 * This thread runs while attempting to make an outgoing connection
 * with a device. It runs straight through; the connection either
 * succeeds or fails.
 */
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;
    private String mSocketType;

    public ConnectThread(BluetoothDevice device, boolean secure) {
        mmDevice = device;
        BluetoothSocket tmp = null;
        mSocketType = secure ? "Secure" : "Insecure";

        //Modified to work with SPP Devices
        final UUID SPP_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
            if (secure) {
                //tmp = device.createRfcommSocketToServiceRecord(
                //        MY_UUID_SECURE);

                tmp = device.createRfcommSocketToServiceRecord(SPP_UUID);

            } else {
                //tmp = device.createInsecureRfcommSocketToServiceRecord(
                //        MY_UUID_INSECURE);
                tmp = device.createRfcommSocketToServiceRecord(SPP_UUID);

                //Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
                //tmp = (BluetoothSocket) m.invoke(device, 1);
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() " + mSocketType +
                        " socket during connection failure", e2);
            }
            connectionFailed();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothChatService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice, mSocketType);
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect " + mSocketType + " socket failed", e);
        }
    }
}

/**
 * This thread runs during a connection with a remote device.
 * It handles all incoming and outgoing transmissions.
 */
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket, String socketType) {
        Log.d(TAG, "create ConnectedThread: " + socketType);
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                // Start the service over to restart listening mode
                BluetoothChatService.this.start();
                break;
            }
        }
    }

    /**
     * Write to the connected OutStream.
     * @param buffer  The bytes to write
     */
    public void write(byte[] buffer) {
        try {
            mmOutStream.write(buffer);

            // Share the sent message back to the UI Activity
            mHandler.obtainMessage(BluetoothChat.MESSAGE_WRITE, -1, -1, buffer)
                    .sendToTarget();
        } catch (IOException e) {
            Log.e(TAG, "Exception during write", e);
        }
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }

} 
```

}

在尝试了一些东西后，我还意识到 2.3.3 SDK 的 BluetoothChat 示例应用程序在连接到上述 3.0 或更高版本的代码失败的设备时工作。任何想法为什么会这样以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T09:35:05.460

终于想通了。我所要做的就是将我的 Nexus 7 从 4.2.2 降级到 4.1.2，现在它可以连接了。不知道是什么导致了这个问题……也许是一个错误。

# html - 以左侧 td 为中心的基本 html 表格

> ID：16028278
> 
> 赞同：0
> 
> 时间：2013-04-16T03:30:50.677
> 
> 标签：html, html-table, center, tablerow

我有一张表，我将尝试以这种方式表示：

```
-------------------------
| L1 |       R1         | 
------------------------  
| L2 |       R2         |
------------------------- 
```

我的代码如下：

```
<div data-role="content" id="div1" align="top" style="padding:3 !important;" >  
        <table border="0" align="CENTER" cellspacing="0" width="100%" style="vertical-    align: text-bottom;" >
        <tr>
        <td></td>
        <td>
            <div id="question1" class="question">
                <input type="text" id="question" />
            <Style>
                #question{
                  font:5px;
                  font-family:verdana;
                }
            </style>        
            </div>
        </td></tr><tr>
        <td width="50"><img id="img2" width="40" height="36" style="float:right; margin-top: 0px;" ></td>
        <td style="text-align:center;">
            <div class="ui-grid-b" >
                <div class="ui-block-a"><button id="button1" type="submit" data-theme="b" style="font-size:0.8em;"></button></div>
                <div class="ui-block-b"><button id="button2" type="submit" data-theme="b" style="font-size:0.8em;"></button></div>   
                <div class="ui-block-c"><button id="button3" type="submit" data-theme="b" style="font-size:0.8em;"></button></div>  
            </div>
        </td>
        </tr>
        </table>
</div> 
```

所以基本上我想做的是，我的表中没有 L1 部分。R1 有数据，R2 也有。L2中有一张图片。我想要做的是删除 L1 和 L2 之间的划分，并且 L2 中的图像应该集中在桌子上，而不仅仅是 L2 的 TD。我怎么做？

我还有另一个问题是，在下面的代码行中：

```
<input type="text" id="question" /> 
```

当值被填充并且当我在移动设备中查看它时，文本有时会转到下一行。我认为 textarea 是唯一具有多行的 HTML 标签。不知道为什么这里的文字是多行的，我该如何避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:37:20.023

看到这一点就在下面`<table border="0"....`

```
<tr><td></td> 
```

将其更改为

```
 <tr>
   <td width="50" rowspan="2">
     <img id="img2" width="40" height="36" style="float:right; margin-top: 0px;">
   </td> 
```

然后摆脱`<td></td>`最初持有该形象的人。

# visual-studio-2012 - 放大 Visual Studio 2012 Ultimate

> ID：16028284
> 
> 赞同：8
> 
> 时间：2013-04-16T03:31:13.997
> 
> 标签：visual-studio-2012, zooming

我无法在 Visual Studio 2012 Ultimate 版中找到以 % 为单位的动态缩放值。

正如我所知道的鼠标滚动和键盘快捷键：`CTRL + SHIFT + ,` 和`CTRL + SHIFT + .`

但我无法在状态栏或任何菜单选项中找到我正在缩放的​​缩放百分比值。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-25T04:19:25.480

看左下角....

[![在此处输入图像描述](https://i.stack.imgur.com/qWGw7.png)](https://i.stack.imgur.com/qWGw7.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-11T21:17:28.477

你也可以使用这个扩展 [http://visualstudiogallery.msdn.microsoft.com/71870f0e-87bb-4a5f-8abd-e8e5e0ccb900](http://visualstudiogallery.msdn.microsoft.com/71870f0e-87bb-4a5f-8abd-e8e5e0ccb900)

# haskell - Haskell - 从文件中读取图形规范

> ID：16028285
> 
> 赞同：2
> 
> 时间：2013-04-16T03:31:18.357
> 
> 标签：haskell, graph

我很难弄清楚如何在 Haskell 中读入（以及如何表示）图表。

文件的输入看起来像

```
NODES 3
EDGE 1 2
EDGE 1 3
EDGE 2 3 
```

我已经弄清楚如何使用以下方法从文件中获取各个输入行：

```
loadFile :: String -> IO [[String]]
loadFile filename = do 
                contents <- readFile filename
                return $ map words $ lines contents 
```

这给出了如下输出：

```
loadFile "input.txt"
[["NODES","3"],["EDGE","1","2"],["EDGE","1","3"],["EDGE","2","3"]] 
```

不过，我真正需要弄清楚的是如何将此图形数据表示为图形。我正在考虑将其设置为边缘列表：

```
type Edge = (Int,Int)
type Graph = [Edge] 
```

但后来我不确定如何开始实现我需要的功能，例如 addNode、addEdge、getNodes、getEdges。

任何帮助或指出我正确的方向都会很棒！注意：我不能为此使用任何已经开发的图形模块。

因此，对于 tl;dr 版本：

1.  我是否以最好的方式阅读数据？
2.  我应该如何在 haskell 中表示这些数据？
3.  如果我使用上面概述的数据结构，我将如何实现其中一个功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T04:02:34.897

这里有很多有趣的问题。让我攻击他们。

1.  对于面向行的语言，您正在阅读数据。稍后您将看到`Data.ByteString`并`Data.Text`替换`String`以提高效率。您还将看到`Parsec`用于解析。不过，那些可以等待。及时重温他们。

2.  您的图形表示很好。邻接表是一种常见且有用的表示。

3.  现在，你拥有的真正诀窍就在这里。让我们看一下`addNode`和`addEdge`。每个都是用纯函数式语言生成的具有一定挑战性的函数，因为他们想*修改*图形……但我们没有状态。

修改无状态最重要的方法是变异。因此，您正在寻找的功能是

```
addNode :: Node -> Graph -> Graph 
```

其中返回`Graph`与输入相同，`Graph`除了多了一条边​​。您应该立即注意到这里有问题——邻接表假定没有孤立节点。我们不能只向图中添加一个节点。

有两种解决方案。第一，我们可以将节点“链接”到图中（实际上是`addEdge`伪装的），或者第二，我们可以扩展图表示以包含孤立节点。让我们做（2）。

```
data Graph = Graph [Edge] [Int] -- orphans 
```

现在让我们实现添加边。假设您可以有重复的边，将边添加到邻接列表很容易，只需附加它

```
addEdge0 :: Edge -> Graph -> Graph
addEdge0 e (Graph adj orph) = Graph (e:adj) orph 
```

但这还不够好——我们希望我们的孤儿列表只包含真正的孤儿节点。我们会过滤它。

```
addEdge :: Edge -> Graph -> Graph
addEdge (n1,n2) (Graph adj orph) = 
  Graph ((n1,n2):adj) (filter (/=n1) . filter (/=n2) $ orph) 
```

`getEdges`很简单，因为我们已经存储了边列表

```
getEdges :: Graph -> [Edge]
getEdges (Graph edges _) = edges 
```

`getNodes`只需要将邻接列表中的所有节点附加到孤立列表中。我们可以使用`Data.List.nub`仅获取唯一节点。

```
getNodes :: Graph -> [Int]
getNotes (Graph adj orph) = nub (orph ++ adjNodes adj) where
  adjNodes [] = []
  adjNodes ((n1,n2):rest) = n1 : n2 : adjNodes rest 
```

* * *

希望这些能给你一些关于如何用函数式语言思考的指示。您将不得不深入研究它们以了解它们是如何工作的，但我在这里介绍了许多有趣的概念。

这里的下一步可能包括尝试使用`State`monad 重新捕获命令式状态修改并将这些`Graph`修改函数链接在一起。

# ruby-on-rails - 为多对多关系轨道创建范围

> ID：16028286
> 
> 赞同：1
> 
> 时间：2013-04-16T03:31:27.653
> 
> 标签：ruby-on-rails, database, scope, many-to-many, jointable

我想在公司模型中创建范围，这样我就可以使用这条线

```
Company.customer 
```

为了选择所有具有客户类型的公司。

Company 和 CompanyType 之间的关系是多对多的。

公司：

```
class Company < ActiveRecord::Base
  attr_accessible :description, :name, :website, type_ids
  has_and_belongs_to_many :types, :class_name => "CompanyType"
  #scope :customer, where()
end 
```

公司类型：

```
class CompanyType < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :companies
end 
```

对于数据库中的表，我有表“company_types”、“company_types_companies”（company_types 和公司之间的连接表）和“companies”

如何在公司模型中填写：客户范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:33:57.663

尝试以下

```
scope :customers, joins(:types).where(company_types: { name: 'customer' }) 
```

我想提出的一件事是，我认为您所做的比简单地`company_type`在公司模型中添加一列有点矫枉过正。如果您没有将 CompanyType 用于其他任何事情，我建议您添加一列而不是使用 2 个表。

# shell - 用于查找 unix 中两个文件夹的子文件夹之间差异的脚本

> ID：16028289
> 
> 赞同：0
> 
> 时间：2013-04-16T03:31:46.730
> 
> 标签：shell, unix, diff, subdirectory

我在两个地方有两个名为“check”的文件夹。两者都有相同的文件夹，但每个文件夹的文件可能不同。我想运行一个脚本来查找每个“检查”文件夹中具有相同名称的文件夹之间的差异，然后我必须将差异重定向到一个文件。请任何人帮助我..

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:41:35.083

使用 rsync 的空运行选项并保存输出：

```
rsync -avzn path/to/source/check path/to/dest/check > differences.txt 
```

反转路径的顺序以找到差异的剩余一半。

您还应该研究 Unison，它是一个目录同步工具。甚至还有一个 GUI (unison-gtk)。

# jquery - 使用 jquery 使用表中的数据动态添加 href 属性

> ID：16028293
> 
> 赞同：1
> 
> 时间：2013-04-16T03:32:08.907
> 
> 标签：jquery

我被困在这里，实际上想用列表中项目的**rel=shadowbox 属性更改 a 标记的 href 值**，其中数据是从页面上的表中读取的。这是我的 html 代码

```
 <div id="packgeImages">
        <ul>
<li class="title"><a href="" rel="shadowbox"><img src="../../images/packages2/agra1thumb.jpg" alt="thumb1" /></a></li>
    </ul>
    </div> 
```

这是我的 jquery 代码，用于捕获网格中的路径，然后附加到类 .title

```
 <script type="text/javascript">
    $(document).ready(function () {
        var $title = $('.title').attr("href"); //Unable to capture this
        $('#fullImageGridView tr').each(function (i) {
            if (!this.rowIndex) return; // skips first row
            var bigSizeImagePath = this.cells[0].innerHTML;
          //  alert(bigSizeImagePath);
            $title.eq(i - 1).append(bigSizeImagePath);
        });
    });
</script> 
```

我猜附加工作不正常，应该进行更改链接这`$("a").attr("href", "http://www.google.com/")` 我的意思是更改 href 的属性而不是附加值？正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:34:56.310

```
var $title = $('.title a').attr("href"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:35:48.323

```
$('[rel=shadowbox]').attr('href', yourValue) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:36:01.483

修改代码::

```
<script type="text/javascript">
    $(document).ready(function () {
        var $title = $('.title [rel="shadowbox"]').attr("href"); //Unable to capture this
        $('#fullImageGridView tr').each(function (i) {
            if (!this.rowIndex) return; // skips first row
            var bigSizeImagePath = this.cells[0].innerHTML;
          //  alert(bigSizeImagePath);
            $title.eq(i - 1).append(bigSizeImagePath);
        });
    });
</script> 
```

# ruby-on-rails - 图像文件夹 - heroku 预编译

> ID：16028294
> 
> 赞同：0
> 
> 时间：2013-04-16T03:32:10.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, precompile, heroku-toolbelt

当我运行以下命令时：

```
heroku run rake assets:precompile 
```

我的公用文件夹根目录中的 css、javascripts 和任何内容都已预编译...但是，我的图像文件夹（位于公用文件夹中）未预编译。

如何确保我的公用文件夹已预编译（我希望它们位于我的 CDN 上，按照此处的步骤... [https://devcenter.heroku.com/articles/cdn-asset-host-rails31](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:07:29.610

中的资产`public`未预编译。如果您的资产需要预编译，请将它们放入`app/assets`（和/或调整您的配置设置以查看其他地方）。

来自[Ruby on Rails 资产管道指南](http://guides.rubyonrails.org/asset_pipeline.html#preprocessing%23how-to-use-the-asset-pipeline)：：

> 资产仍然可以放置在公共层次结构中。公共下的任何资产都将由应用程序或 Web 服务器作为静态文件提供。您应该将 app/assets 用于在提供之前必须经过一些预处理的文件。

# python - 将列表理解分配给原始列表是否安全？

> ID：16028304
> 
> 赞同：5
> 
> 时间：2013-04-16T03:33:28.500
> 
> 标签：python, list-comprehension

以下安全吗？

```
x = [1, 2, 3, 4]
x = [y+5 for y in x] 
```

列表理解是否首先评估，创建一个新列表，然后将该新列表分配给 x？有人告诉我，在迭代列表时更改列表是不安全的操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T03:34:39.083

您在迭代列表时不会更改列表，而是在创建一个**全新**的列表，然后在对其进行评估后，将其绑定到名称`x`，因此一切都是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T03:35:55.410

是的，很安全。

正如您所暗示的，首先评估右侧，然后将*其结果*（一个全新的列表）分配给 name `x`。您是对的，在迭代列表时更改列表是不安全的，但这不会发生在您的代码示例中，所以不用担心。

# c# - 使用 DevExpress 时移除表单上的“关闭”图标

> ID：16028311
> 
> 赞同：2
> 
> 时间：2013-04-16T03:34:12.980
> 
> 标签：c#, winforms, devexpress

我需要能够删除`Close`Windows 窗体上的按钮。我知道可以使用此代码段：

```
private const int WS_SYSMENU = 0x80000;
    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.Style &= ~WS_SYSMENU;
            return cp;
        }
    } 
```

但是，我还需要将**DevExpress DefaultLookAndFeel**应用于我的表单。如果您在我的表单上启用了**DevExpress DefaultLookAndFeel**，上述代码段似乎不起作用。有没有可能的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T10:24:37.507

要仅隐藏 XtraForm 的关闭按钮 (x)，请将[XtraForm.CloseBox](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsXtraForm_CloseBoxtopic)属性设置为`false`。此属性在启用表单皮肤功能时生效。

或者您可以将[Form.ControlBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.controlbox.aspx)属性设置`false`为使整个窗体的控制框不可见。

# android - 如何从 Android 中的 SQLite 数据库中获取数据

> ID：16028312
> 
> 赞同：0
> 
> 时间：2013-04-16T03:34:22.300
> 
> 标签：android, database, sqlite

我想从我使用我的应用程序创建的数据库中获取一些数据。这是我的代码

```
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.select_to_delete);

database = new DatabaseHandler(this);

bundle = getIntent().getExtras();
date = bundle.getString("DATE");

SQLiteDatabase db=database.getWritableDatabase();

Cursor cur=db.rawQuery("SELECT " +TITLE+  " FROM " +TABLE_NAME + " WHERE " + CDATE + "=" + date,null);

int i = cur.getCount();

if(cur !=null){
    if (cur.moveToFirst()){
           do{
              tdate = cur.getString(cur.getColumnIndex("DATE"));
              titlearray.add(tdate);
           }while(cur.moveToNext());
        }

}

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, titlearray);

ListView listView = (ListView) findViewById(R.id.listView1);
listView.setAdapter(adapter);
} 
```

我的表有 5 列（id、标题、日期、时间、描述）。并且有 4 个生的。**该表是在另一个类中创建的**。

当我运行此应用程序时，它不会从 sql 表中获取数据并将其显示在列表视图中。当我调试它时，它显示`i=1`并且它返回 false 到`if (cur.moveToFirst())`. 所以它不会进入那个`if`部分。

我的错误可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:36:24.323

在您的日期周围放置撇号 (')

```
Cursor cur=db.rawQuery("SELECT " +TITLE+  " FROM " +TABLE_NAME + " WHERE " + CDATE + "='" + date+"'",null); 
```

注意我假设您的表创建和其他字段名称是准确的。还要重新检查那些

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:41:04.210

使用选择参数，您将避免大量问题：

```
Cursor cur=db.rawQuery("SELECT " +TITLE+  " FROM " +TABLE_NAME + " WHERE " + CDATE + " = ?", new String[] { date }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:14:43.453

```
SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_NAME, new String[] { TITLE}, CDATE + "=?",
                new String[] { String.valueOf(date) }, null, null, null, null);
       if (cursor.moveToFirst()) {
        do {
           //add to the array
        } while (cursor.moveToNext());
    } 
```

# fluent-nhibernate - NHibernate：覆盖一对多关系上的自动映射

> ID：16028313
> 
> 赞同：0
> 
> 时间：2013-04-16T03:34:34.033
> 
> 标签：fluent-nhibernate, automapping

我刚刚开始使用 Fluent NHibernate，希望得到一些关于我如何映射它的帮助/指针。这是我正在使用的域模型：

**Class User**：您的标准用户类

**类首选项**：一组键值对。一个用户可以有很多偏好。

**类 Post**：为简洁起见，省略了完整的描述，但用户创建了一个帖子，它可以包含一个或多个偏好。

所以，回顾一下：

```
class User 
{
    IList<Preference> Preferences;
    IList<Post> Posts;
} 

class Post
{
    IList<Preference> PostData;
} 
```

Hibernate automapper 提供了以下数据库结构：

```
User
------------------------
User_Id

Preference
------------------------
Preference_Id | User_Id | Post_Id

Post
------------------------
Post_Id | User_Id 
```

偏好表对我来说看起来很丑，更愿意有类似的东西：

```
User
------------------------
User_Id

Preference
------------------------
Preference_Id | User_Id

Post
------------------------
Post_Id | User_Id | Preference_Id 
```

非常感谢任何有关如何执行此操作的帮助！我已经有一个实现 IAutoMappingOverride 接口的类，但我不确定如何进行实际映射。

谢谢，
泰加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:17:02.730

我会参考此配置来正确配置手动和自动映射：
[Mixing Mixing Automapping and manual mapping](https://stackoverflow.com/questions/3530177/fluent-nhibernate-mixing-automapping-and-manual-mapping)

我还注意到您的偏好表和发布表中都有一些复合键，我会研究如何映射复合键。这是一个链接，可以帮助您映射复合键（具有多列的主键）：
[Using Fluent NHibernate to map Composite Keys](http://devlicio.us/blogs/derik_whittaker/archive/2009/01/16/using-fluentnhibernate-to-map-composite-keys-for-a-table.aspx)

就您的流利地图而言，以下可能会让您指出正确的方向，您可以`one-to-many`使用两者`HasMany`或`References`根据您希望外键在哪个表上来映射关系：

```
public class UserMap : ClassMap<User>
{
    public UserMap(){
        Id(x => x.Id).Column("User_Id").GeneratedBy.Identity();
        HasMany(x => x.Preferences);
    }
}
public class PostMap: ClassMap<Post>
{
    public UserMap(){
        Id(x => x.Id).Column("Post_Id").GeneratedBy.Identity();
        References(x => x.Preferences); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:21:54.527

因为偏好是相同的，一个简单的属性就足够了

```
class Post
{
    public virtual User User { get; set; }
    public virtual IList<Preference> Preferences { get { return User.Preferences; } }
} 
```

# c++ - 验证八进制到十进制的转换

> ID：16028318
> 
> 赞同：-1
> 
> 时间：2013-04-16T03:35:24.977
> 
> 标签：c++, octal

我编写了一个程序，也将 4 位正八进制数转换为十进制等效值。但是，在尝试验证用户输入（0-7）时，出现了问题。在我的 for 循环中也阻止用户输入 8 或 9，当我输入应该允许的数字时，程序仍会终止并显示“您输入的数字高于 7”。

不知道我做错了什么，任何帮助将不胜感激。这是有问题的代码。

```
int main()
{
 //declare variables
int i, octNum = 0, decNum = 0, arr[20];         

//get octal value from user input
cout << "Enter the 4 digit Octal Number you would like too convert: " ;     
cin >> octNum;

// validate input if value is negative, or greater then 4 digits
if(octNum < 0)
    {
        cout << "Please enter a positive octal number from 0-7\n";
        return 0;
    }
else if(octNum > 7777)
    {
        cout << "Please enter a 4 digit octal number from 0-7 only\n";
        return 0;
    }

// Validate for octal digits 0-7\. If 8 or 9 prompt user too start again
for(int n = 0; octNum > 0; n++)
{
    if(n == 8 || n == 9)
    {
        cout << "One of the numbers was above 7 \nPlease enter an octal number from 0-7\n";
        return 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:39:25.637

我假设你的意思是这样的：

```
for(int n = octNum; n > 0; n /= 10)
{
    if ((n % 10) > 7)
    {
        cout << "One of the digits was above 7\nPlease enter a valid octal number" << endl;
        return 0;
    }
} 
```

# javascript - 动态构建模态

> ID：16028326
> 
> 赞同：0
> 
> 时间：2013-04-16T03:36:01.493
> 
> 标签：javascript, jquery, css, modal-dialog, avgrund

如何运行模态并从动态创建元素构建模态。

例如，我有一个按钮，我想启动模态，它是动态创建的。

我正在使用这个模态插件： http: [//labs.voronianski.com/jquery.avgrund.js/](http://labs.voronianski.com/jquery.avgrund.js/)

我已经尝试过了，它确实有效，尽管在第二次单击按钮之前它不起作用。

```
$('body').on('click','#siteSwitch', function(){
        $(this).boxModal({
            height: 800,
            width: 800,
            holderClass: 'boxModal',
            showClose: true,
            showCloseText: 'X',
            enableStackAnimation: false,
            template: '<p>So implement your design and place content here! If you want to close modal, please hit "Esc", click somewhere on the screen or use special button.</p>'     
        });        
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:36:54.547

我找到了答案，伙计们，

似乎添加`openOnEvent: false`作为模式修复它的选项。这是完全有道理的，默认情况下它是真的，所以它正在等待一个“点击”事件来触发启动，直到它在后台构建一次才发生。

谢谢！

香农

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:19:33.660

```
$(this).avgrund({}) 
```

代码是这样的，而不是 boxModal()

# neo4j - 查找包含至少一个具有特定属性的节点的所有子图

> ID：16028329
> 
> 赞同：1
> 
> 时间：2013-04-16T03:36:18.650
> 
> 标签：neo4j, cypher

我的图由多个相互断开的“子图”组成。这些子图由与给定关系类型连接的节点组成。

我想获取（例如）包含至少一个具有属性“名称”等于“约翰”的节点的子图列表。

这相当于为每个具有此属性的子图查找一个节点。

一种解决方案是找到所有具有此属性的节点并遍历此列表以仅选择未连接到先前选择的节点的节点。但这会很丑而且很重。有没有一种优雅的方法可以用 Cypher 做到这一点？

我正在尝试沿着这个方向做一些事情，但到目前为止没有成功：

> START source=node:user('name:"John"')
> MATCH source-[r?:KNOWS*]-target
> WHERE r is null
> RETURN source

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:30:36.267

试试这个可能有帮助

```
START source=node:user('name:"John"')
MATCH source-[r:KNOWS]-()-[r2:KNOWS]-target
WHERE NOT(source-[r:KNOWS]-target)
RETURN target 
```

# xcode - XCode 构建阶段：在后台运行脚本（不阻塞构建）

> ID：16028336
> 
> 赞同：8
> 
> 时间：2013-04-16T03:37:10.337
> 
> 标签：xcode

当我在模拟器中构建和运行 iOS 应用程序时，我希望能够在后台运行脚本（即不阻塞构建过程）。我已经尝试过`osascript /path/to/script &`，并且还为一个单独的 shell 脚本做同样的事情，但都没有工作；构建停止，我必须强制退出 XCode。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-16T15:01:47.690

作为构建阶段的一部分，我在运行后台脚本时遇到了同样的麻烦，但以下在我的情况下确实有效。该脚本在我的应用程序运行时在后台运行。显然，除了使用“&”之外，您还必须重定向标准输出。使用以下格式。（我的脚本位于目录'~/Desktop/splint_server/'）

```
~/Desktop/splint_server/run.sh > ~/Desktop/splint_server/test 2>&1 & 
```

`~/Desktop/splint_server/run.sh`这会在（将脚本的路径放在那里）运行任意脚本。输出被重定向到一个名为“test”的日志文件。

有关 I/O 重定向的更多信息[http://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T17:43:25.813

以防你仍然感兴趣。

这些是您需要遵循的步骤： 1\. 将脚本的 .sh 扩展名更改为 .command 2\. 现在开始使用“open /path/to/script.command”而不是调用 /path/to/script.sh

差不多就是这样。

这将启动一个新的终端窗口并在其中运行您想要的脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-21T11:55:14.457

您可以在方案设置中使用构建的后期操作。

“睡眠 100&”工作正常

# html - css - Safari 5.x 问题中的边框宽度、边框背景和背景问题

> ID：16028337
> 
> 赞同：3
> 
> 时间：2013-04-16T03:37:15.633
> 
> 标签：html, css

我一直在尝试将背景图像添加到 html 文档中元素的边框：

你可以在这里看到它：HTML：

```
<a href="#">Something</a> 
```

CSS：

```
a {
    border-width:10px;
    border-color:#006;
    background-color: #CF0;
    -moz-border-image: url(http://heroeswallpapers.com/wp-content/uploads/2012/12/cute-twitter-background.jpg) 10 10 10 10 repeat;
    -webkit-border-image: url(http://heroeswallpapers.com/wp-content/uploads/2012/12/cute-twitter-background.jpg) 10 10 10 10 repeat;
    border-image: url(http://heroeswallpapers.com/wp-content/uploads/2012/12/cute-twitter-background.jpg) 10 10 10 10 repeat;
} 
```

并且：http: [//jsfiddle.net/gqv8z/](http://jsfiddle.net/gqv8z/)

这在 Safari 5.x 中不起作用，但它在 safari 6、FF 和 Chrome 中起作用……（为什么图像的背景变成了元素的背景？）

所以我有2个问题。

1.  有什么解决方案吗，如果有，有什么解决方案，如果没有...

2.  如果 Safari 5.x 不支持边框背景，我如何使用 CSS 定位这个特定的浏览器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:11:21.220

您没有像这样的 -o- 边框图像。

```
-o-border-image: url(http://heroeswallpapers.com/wp-content/uploads/2012/12/cute-twitter-background.jpg) 10 10 10 10 repeat; 
```

尝试添加它并告诉我它是否有效。

# c - 'struct' 之前的预期表达式

> ID：16028343
> 
> 赞同：4
> 
> 时间：2013-04-16T03:38:05.557
> 
> 标签：c, pointers, struct

我在下面的函数 allocate() 的第一行收到错误“'struct' 之前的预期表达式”。我不知道为什么。

我应该说我的任务是使这段代码与提供的结构/函数头一起工作。

任何帮助深表感谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <assert.h>
#include <time.h>

struct student{
    int id;
    int score;
};

struct student* allocate(){
     /*Allocate memory for ten students*/
     struct student *stud =  malloc(10 * sizeof struct *student);
     assert (stud !=0);

     return stud;
}

void generate(struct student *students){
     /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0 and 100*/
     srand(time(NULL));

     // Generate random ID's
     int i;
     for(i=0; i<10; i++){
        students[i].id = rand()*10+1;
     }

     //Generate random scores
     for(i=0; i<10; i++){
        students[i].score = rand()*10+1;
     }
}

void output(struct student* students){
     //Output information about the ten students in the format:

     int i;
     for(i=0; i<10; i++){
        printf("ID-%d Score-%d\n", students[i].id, students[i].score);
        }
}

void summary(struct student* students){
     /*Compute and print the minimum, maximum and average scores of the ten students*/
     int min = 100;
     int max = 0;
     int avg = 0;
     int i;
     for(i=0; i<10; i++){
        if(students[i].score < min){
            min = students[i].score;
        }
        if(students[i].score > max){
            max = students[i].score;
        }
        avg = avg + students[i].score;
    }
    avg = avg/10;
    printf("Minimum score is %d, maximum score is %d, and average is %d.", min, max, avg);

}

void deallocate(struct student* stud){
     /*Deallocate memory from stud*/
     free (stud);
}

int main(){
   struct student *stud = NULL;

    /*call allocate*/
    stud = allocate();

    /*call generate*/
    generate(stud);

    /*call output*/
    output(stud);

    /*call summary*/
    summary(stud);

    /*call deallocate*/
    deallocate(stud);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T03:41:36.887

你可能想写

```
sizeof(struct student) 
```

代替

```
sizeof struct *student 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:43:14.007

你的问题在`sizeof struct *student`. 在类型名上使用`sizeof`运算符时，您需要在类型名上加上括号。此外，正如 Jonathan Leffler 在对此答案的评论中指出的那样， in 的放置`*`是`struct *student`错误的，并且在`struct student *`此代码的上下文中使用 of 将是不正确的。也许你的意思是：`sizeof (struct student)`。

或者，您可以`sizeof`在表达式上使用，并且不需要括号。这将是可取的，因为如果您选择更改类型，`stud`那么您在这样做时不需要替换额外的类型名：`struct student *stud = malloc(10 * sizeof *stud);`

# php - 在这种特定情况下，如何删除超链接中的文件扩展名？

> ID：16028347
> 
> 赞同：0
> 
> 时间：2013-04-16T03:38:15.260
> 
> 标签：php, html

有一个 php 图库代码可以从图像目录创建图库。

单击图像时，它有一个超链接以显示图像的更大预览。我需要将超链接更改为指向我网站上的其他页面，我可以这样做，但是它保留了文件夹中的文件扩展名，例如 myimage.png

为了使我的链接正常工作，需要从 myimage 中删除 .png

示例：定义我的链接时是这样的：

```
mysitepage.html?myiframe=myothersitepage.html%3Fmyimage 
```

因此，在代码中，我将链接的这一部分定义为：

```
**$link_page** = '../mysitepage.html?myiframe=myothersitepage.html%3F'; 
```

在下面的代码中，图像名称被定义为 $k

*所以在原始代码中我改变了这一行：*

```
$imgl .= "< div class=\"img_thumb\" >< a href=\"$k\"> 
```

*读书：*

```
$imgl .= "< div class=\"img_thumb\" >< a href=\"**$link_page**$k\"> 
```

这将返回链接：`mysitepage.html?myiframe=myothersitepage.html%3Fmyimage.png`

同样，我无法弄清楚如何摆脱该链接中的 .png 。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:40:17.427

使用 PHP 之前用空字符串替换扩展名：

```
$k = str_ireplace('.png', '', $k); 
```

如果你想在客户端做，这里有一个 jQuery 解决方案：

```
$(function() {
    $('.img_thumb a').each(function() {
        var link = $(this).attr('href').replace(/\.png$/i, '');
        $(this).attr('href', link);
    });
}); 
```

如果要替换所有扩展：

```
$k = preg_replace('/\.[a-z]+$/i', '', $k); 
```

和 jQuery：

```
$(function() {
    $('.img_thumb a').each(function() {
        var link = $(this).attr('href').replace(/\.[a-z]+$/i, '');
        $(this).attr('href', link);
    });
}); 
```

如果您在多个地方使用 $k（您之前没有提到），您还可以执行内联替换：

```
imgl .= "<div class=\"img_thumb\">
    <a href=\"$link_page".str_ireplace('.png', '', $k)."\">
        <img src=\"gallery.php?thumb=$k\" alt=\"$alt\" title=\"$alt\" />
    </a>
</div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:43:49.010

而不是使用删除的“.png”附加`$k`附加`$k``str_replace()`

```
$imgl .= "< div class=\"img_thumb\" >< a href=\"**$link_page**" . str_replace('.png', '', $k) . "\">"; 
```

# ember.js - 用于 IndexRoute 的重定向

> ID：16028348
> 
> 赞同：1
> 
> 时间：2013-04-16T03:38:18.940
> 
> 标签：ember.js

我遇到了以下无法正常工作的问题。我直接从 Tom Dale 视频中获取了这个，但它没有重定向 - 它只是位于那个 url 上。有什么语法错误吗？或者我遇到的其他定位可能会丢失？

```
App.IndexRoute=Ember.Route.extend({
  redirect: function(){
    this.transitionTo('upcomingevents');    
  } 
}); 
```

很抱歉发布一个简单的问题，但不确定这里有什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:21:47.173

> 有什么语法错误吗？或者我遇到的其他定位可能会丢失？

它可以是任何数量的东西。尝试在您的应用程序上设置 LOG_TRANSITIONS，以便您可以在 ember 更改路由时看到控制台输出。这可能会更好地表明出了什么问题。

```
App = Ember.Application.create({
  LOG_TRANSITIONS: true
}); 
```

如果这没有帮助，请尝试制作一个演示问题的 jsFiddle。您可以使用[这个](http://jsfiddle.net/mgrassotti/qzqFa/)开始，它基于 Tom Dale 视频并包含一个有效的索引重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T12:05:57.653

我发现这个问题只出在 Ember.JS 上。如果我们没有给出关于应用程序负载的特定路由，它应该重定向到之前工作正常的索引路由。条件发生了一些变化，导致了这个问题。如果我改变[这个条件（点击链接](https://gist.github.com/thecodejack/5866860#file-ember-rc6-js-L25178)）

```
if (url === "" || url === "/" || parts[parts.length-1] === "index") { this.explicitIndex = true; } 
```

至

```
if (url === "" || url === "/") { this.explicitIndex = true; } 
```

它现在可以正常工作，没有任何问题。我希望他们知道这个问题并纠正它。

# mysql - 在 select 语句中设置默认值（不使用 UNION 语句）

> ID：16028352
> 
> 赞同：2
> 
> 时间：2013-04-16T03:38:49.300
> 
> 标签：mysql, sql, sql-server, oracle, db2

我想要一个 SELECT 语句，如果数据库没有返回任何行，它将返回指定的默认值。

我们可以使用 UNION 来获得所需的结果，例如这个问题：“[如何为不返回任何行的查询设置默认行？](https://stackoverflow.com/questions/285666/how-to-set-a-default-row-for-a-query-that-returns-no-rows) ”，但这会给出额外的结果行。

例子：

```
SELECT a 
    from TBL_TEST 
UNION 
SELECT 0 
    FROM DUAL 
```

有没有更好的方法或标准的 SQL 方法可以跨多个数据库引擎移植？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T04:18:24.483

```
SELECT ifnull(a,20) FROM TBL_TEST 
```

如果 a 为 null 则选择 20 否则选择 a （在 mysql 中，不确定其他）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T15:39:37.420

对于便携式解决方案，如何：

```
select coalesce(a, 0)
    from TBL_TEST 
    right outer join DUAL on null is null 
```

这里使用 COALESCE 函数是因为它比 NVL() 或 IFNULL() 更便于移植。

您将在使用不同名称的数据库系统中创建一个 DUAL 表，例如 SQL Server 或 DB2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:36:40.353

```
MySQL IFNULL is like oracle's NVL function 
MySQL IFNULL() takes two expressions and if the first expression is not NULL, it returns the first expression. Otherwise it returns the second expression.
Syntax 

IFNULL(expression1, expression2); 

SELECT IFNULL(a,<default value>) from TBL_TEST 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T08:06:35.040

在，SQL SERVER 2008 R2：空字符串时

```
SELECT ISNULL(NULLIF(a,<Empty String>)<Default Value>) from TBL_TEST

e.g. SELECT ISNULL(NULLIF(a,'')0) from TBL_TEST 
```

这工作正常...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T05:06:27.820

在 SQL SERVER 2008 R2 中：当值为 NULL 时

```
SELECT ISNULL(a,<Default Value>) from TBL_TEST

e.g. SELECT ISNULL(a,0) from TBL_TEST 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T03:43:40.160

MySQL 具有该[`DEFAULT`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_default)功能，但我不确定它的标准或广泛支持程度。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T05:39:01.597

使用 COALESCE() 将空值列转换为其默认值，例如

> **从 TBL_TEST 中选择 coalesce(a,0)**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-16T04:41:48.260

在甲骨文中：

```
select nvl(a, 0)
from DUAL left join TBL_TEST on null is null 
```

# php - PHP扩展混淆

> ID：16028353
> 
> 赞同：3
> 
> 时间：2013-04-16T03:38:51.357
> 
> 标签：php, matlab, php-extension

我已将 MATLAB .m 文件转换为 exe 文件并从 php 调用它。但是执行时间非常慢。所以，现在我正在考虑将matlab文件转换为C。

我可以从 PHP 扩展调用转换后的 C 文件吗？

我是否需要先将 matlab 程序转换为 C，然后从 php 扩展名中调用它，或者我应该在 PHP 本身中转换 C 中的 matlab 程序？

执行时间会比以前更快还是相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:48:50.710

您可能会获得一些基准来帮助选择要采用的路径。您可以手动执行 matlab 和 exe 文件吗？如果是这样，他们需要多长时间才能执行？

我认为你有三个选择：

1）无论matlab文件在做什么，用PHP重写它。执行 php 并与上面的基准进行比较。

2）研究你用来执行matlab exe文件的机制，看看它是否可以简化......你在使用exec（）吗？

3) 将 matlab 文件转换并编译为 C 并使用 exec() 机制，如果适用于您的平台（Windows？）并与上述基准进行比较。你能描述一下它目前是如何执行的吗？

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T13:13:01.053

如果转换后的 C 文件有函数或类作为接口，则可以将其包装到 php 扩展中并从 php.ini 中调用。

假设您有一个包含以下代码的 C 文件：

```
int functionA(int p1,int p2);
int functionB(char p3,double p4); 
```

你应该把它编译成静态或动态库，例如 example.so 或 example.a 然后你应该开始编写 php 扩展，参见[php extension hello world](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/#Heading12)。在您的扩展中，您将调用 example.so 或 example.a 提供的函数，然后提供到 php 命名空间的接口。

做完这一切，就可以在php中间接调用functionA和functionB了。我向你保证，在 C 中执行的代码将比在 matlab 或 php 本身中快得多。

# java - 从 Servlet 将数组传递给 PHP

> ID：16028357
> 
> 赞同：0
> 
> 时间：2013-04-16T03:39:20.127
> 
> 标签：java, php, arrays, servlets

我有一个从支付数据库ex获取值的 Servlet 。从付款中选择 *；
ID = 1 2 3
金额 = 10.00 - 20.00 - 30.00

我将它们存储在一个名为 paymentHistoryArray 的数组中。现在我需要在 paymentPage.PHP 上访问它们我不知道完成这个/或循环访问这些值的最佳方法。请帮忙。我遵循的示例代码使用：

```
response.sendRedirect("http://localhost/PHPwithDB/success_page.php" + "?id=" + id); 
```

但这不是一个数组， 1 如何从一个servlet 发送一个数组呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:44:20.053

您可以使用 AJAX 或基本的 post 方法。

只需创建一个 AJAX（或基本 POST 调用），它将请求发送到包含 Servlet（是否为本地主机）的服务器。

您可以在那里构造一个 JSON 对象，并将其作为响应的一部分返回。

然后，您可以使用基本的 for 循环解析 JSON 对象，并根据需要使用数据。

示例（使用 jQuery 库）：

```
$.ajax(
{
    type : 'post',
    url : 'folder/ServletName',
    dataType: 'json',
    contentType: 'text/plain',
    async: false,
    data : 
    {
        'request' : true
    },
    success : function(data)
    {
        var id = '';

        for(var i = 0; i < data.length; i++)
        {
            id = data[i].id;
            // Use id or other variables that you know of
        }
    },
    complete : function(data)
    {
    }
}); 
```

与 coffeecsript 类似的方法（有点不同）

```
$.ajax
     type: "POST",
     url : "folder/ServletName#
     data : JSON.stringify({"request" : true})
     dataType: "json"
     contentType: "text/plain"
     async: false
     error: (jqXHR, textStatus, errorThrown) ->
         $('#div').append "AJAX Error: #{textStatus}"
     success: (data, textStatus, jqXHR) ->
         for foo in data
              id= foo.id
              $("#div").html(id) 
```

我希望这有帮助，我要睡觉了，但明天会检查一下。

# python - SQLAlchemy column_property 存在于表中

> ID：16028359
> 
> 赞同：0
> 
> 时间：2013-04-16T03:39:48.443
> 
> 标签：python, sqlalchemy

假设我有三张桌子。

```
class A(Base):
  id = Column(Integer, primary_key=True)
  bs = association_proxy("a_b", "b")

class B(Base):
  id = Column(Integer, primary_key=True)
  extra = Column(String(10), nullable=True)
  as = association_proxy("a_b", "a")

class A_B(Base):
  __table_args__ = (
    UniqueConstraint('a_id', 'b_extra'),
    )
  a_id = Column(Integer, ForeignKey('A.id'), primary_key=True)
  b_id = Column(Integer, ForeignKey('B.id'), primary_key=True)
  b_extra = column_property(
    select([B.extra]).where(B.id=b_id)
    )
  b = relationship("B", backref="a_b")
  a = relationship("A", backref="a_b") 
```

和一个数据库模式：

```
CREATE TABLE A (
  id INT(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (id)
)
CREATE TABLE B (
  id INT(11) NOT NULL AUTO_INCREMENT,
  extra INT(11) NOT NULL,
  PRIMARY KEY (id)
)
CREATE TABLE A_B (
  a_id INT(11) NOT NULL,
  b_id INT(11) NOT NULL,
  b_extra INT(11) NOT NULL,
  UNIQUE KEY ('a_id', 'b_extra'),
  KEY a_id,
  KEY b_id,
  CONSTRAINT FOREIGN KEY ('b_extra') REFERENCES 'B' ('extra'),
  CONSTRAINT FOREIGN KEY ('b_id') REFERENCES 'B' ('id'),
  CONSTRAINT FOREIGN KEY ('a_id') REFERENCES 'A' ('id')
) 
```

这个想法是 A_B 是 A 和 B 之间的关联表。B 中的额外数据不是每个 B 唯一的，但每个 A*都是*唯一的。我遇到的问题是，当我尝试运行脚本时，我得到`Key Error: b_extra`. 我已经尝试了所有我能想到的肮脏技巧，但我不知道如何解决这个问题。

编辑：为了澄清，我希望 column_property 存在于数据库中并像往常一样参与更新和插入。

这是实际应用程序的一个稍微简化的示例，因为它太复杂，无法在此处发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:36:27.607

这里的问题是您的 A_B 表有一个名为“b_extra”的列，但是在您的 A_B 映射中，您使用列属性覆盖“b_extra”，该列属性试图在不同的表上加载不同的列，“B.extra ”。

此处的意图尚不清楚，但似乎您会摆脱 A_B.b_extra ，因为您似乎不想给它写任何东西。或者，如果您确实希望 B.extra 和 A_B.b_extra 同时存在，则需要将这两个表达式映射到不同的名称。

A_B.b_extra 列属性也有点奇怪，因为在会话到期之间，它不会与该属性的关系路由保持同步，这只是 some_a_b.b.extra。

# c++ - 处理 32 位地址空间的进程外内存堆

> ID：16028361
> 
> 赞同：4
> 
> 时间：2013-04-16T03:39:58.483
> 
> 标签：c++, winapi, ipc, out-of-memory

问题：大型模拟游戏有大量不同的对象，必须跟踪、更新和用于视觉渲染和逻辑模型更新。只有 4 GB 的地址空间，您只能将这么多的东西放入内存中。如果你求助于磁盘，事情就会开始变慢，除非你很幸运并且不断地访问页面缓存。但即便如此，当文件系统同步到磁盘时，进行大量更新/写入的成本也会很高。

假设用户至少有 32GB 的 RAM（有些人报告说 64GB）并且想要玩一个巨大的模拟，导致模型携带的数据比游戏开发的大多数东西要处理的数据多一个数量级。他们当然有 64 位操作系统（比如说，Windows 7 x64 或 Windows 8 x64）。自然，如果您只是将所有这些模型数据存储在进程中的虚拟地址空间中，即使使用大地址感知，您也会遇到内存不足的情况，即使主机有千兆字节和千兆字节的空闲*RAM*（因为32 位进程超出*虚拟地址空间*(VAS)）。

我们还假设，由于完全无法控制的原因，您不能将主二进制文件设为 64 位。你依赖于一些专有框架，花费了可笑的工时来编写该框架，并且必须从一开始就重新开始以转移到其他东西。您的框架仅提供 32 位版本，因此您被卡住了。

正确的？

也许。

我有一个随机的想法，这似乎是一个很远的想法，因为我不知道我是否可以让它变得高效或实用。

如果我可以创建一个 64 位子进程，它就能够使用尽可能多的 RAM，无论是今天任何人都可以买得起的内存并插入主板，即使是在非常高端的服务器机箱上也是如此。

现在，我希望能够*有效地*从模型中存储和检索大量数据，这些数据已被推入子进程，并且不时将这些数据的子部分复制到子进程中。所以基本上，所有千兆字节荣耀的“主”模型（一系列非常巨大的树状和哈希表结构）将位于 64 位进程中，而 32 位进程将在那里窥视，抓住一个大块数据，用它做一些事情（或者我应该让子进程在那里进行一些处理以将其提取出来？？），然后摆脱它 - 以保持 32 位进程中的内存使用可管理.

所有模型读取/变异/模拟算法都基于模型在本地进程中可用的假设，因此随机数组访问之类的事情很常见。我很难将我的访问模式从主模型中提炼成几个基于块的顺序读取，而且遍历整个模型也不是很罕见。

我的目标是：

*   防止该死的东西由于内存不足而崩溃（＃1目标）
*   性能（非常接近 #2，但使用极端复杂性的人可能会接受比模拟更小、更简单游戏的人更差的性能）
*   现有代码的最小重构（或多或少带有渲染调用和多线程的 vanilla C++）

这似乎是一个相当艰巨的项目，因为从一个连贯的内存模型到必须从一个比我任何时候都能抓住的大得多的模型上看一个孔径，可能需要进行大量的算法重新设计。

我的问题：

*   这样做有没有先例？
*   *这将如何*在 Windows 上最好地完成？是否有某种像 Linux 上的共享内存，或者轻量级的非常高带宽的随机内存访问 IPC，可以通过类似`operator[]()`实现的东西集成到 C++ 中？
*   任何 IPC 的性能是否会如此糟糕以至于不值得尝试？我是否应该只依赖磁盘（您知道，数据库或键值或其他）并让操作系统/文件系统弄清楚如何使用 RAM？

请记住，我需要支持*非常*“健谈”的 IPC 机制，因为许多处理算法（AI 等）都是围绕小内存访问和更新设计的。这在进程中运行得很好，甚至对缓存局部性也有一些关注，但是当您通过 IPC 访问它时，这一切都变得很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:44:21.760

*如果正确理解你。*

如果您使用多个进程，则窗口仍需要将这些部分分页进出。

这就是我想尝试的方式。

使用[内存映射文件](http://msdn.microsoft.com/en-nz/library/dd997372.aspx)来映射您需要的保留在磁盘上的内存空间的视图/部分。您当然需要有一些内部映射方案。

目前我不知道的关键是您是否可以从 32 位访问 64 位 API。

Windows 将神奇而有效地处理分页。无论如何，这就是它对内存映射虚拟内存的作用。我们曾经使用它来处理早期 32 位 NT 系统上的大量数据集，并且该技术可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T04:52:41.527

我和你的情况类似，GUI 是 32 位的，但需要 x64 代码才能与系统交互。我们采用的方法是使用**WM_COPYDATA**并通过神奇的进程位边界来回传递数据。自然，它不如使用 dll 快，但这不是一个选择。对于我们的用例，性能折衷是可以接受的。

# iphone - UITextView 仅在触摸特定区域后才显示键盘？

> ID：16028364
> 
> 赞同：1
> 
> 时间：2013-04-16T03:40:31.883
> 
> 标签：iphone, ios, ios6, uitextview

当我`UITextView`在键盘隐藏通知委托方法中以编程方式增加基于内容大小的框架时，textview 高度完美增加。但是当我触摸`UITextView`底线时，键盘没有来。如果我触摸增加框架之前的区域或在实际的第一帧区域，键盘来了。如何在所有区域启用用户交互`UITextView`？

```
 Textview is as scrollview<---view1<---view2<---UItextview 
```

即使我在 xib 中增加 view2 和 UItextview 的高度，同样的问题也会出现。我禁用了 UITextview 的滚动功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:56:08.773

在增加你`UITextView`写下这条波纹线的高度后，可能是它的问题是某些视图在前面`UITextView`......

```
 [self.view bringSubviewToFront:yourTextView]; 
```

# perl - 终端用来与交互式程序对话的文件描述符是什么？

> ID：16028367
> 
> 赞同：1
> 
> 时间：2013-04-16T03:41:07.977
> 
> 标签：perl, unix, file-io, io

```
echo "abc" | less 
```

less 通过 STDIN 接收 4 个字节“a”、“b”、“c”、“\x0A”，并以自己的特殊方式（使用交替屏幕模式等）向用户显示“abc”。

然后用户在键盘上键入“n”，通过在终端左下角用反色写“未找到模式（按 RETURN）”来减少响应。我们还看到它在左侧打印了一系列波浪号。

显然，为了知道尝试搜索其搜索缓冲区中的内容，不必接收“n”字符的输入。

它是从哪里得到“n”的？我在终端中输入了它，但是终端是否连接到 less 的 STDIN？如果是这样，难道不只是将“n”卡在显示缓冲区中吗？好吧，它可以说出来，但如果我跑`echo "abc" | tail -f`了就不行。

我怎么能弄乱这个文件描述符？我正在构建一个 perl 程序来将鼠标转义码转换为键码，这样我就可以制作一个特殊的管道或包装的命令/程序，它可以像寻呼机一样工作，但可以是鼠标交互的。但是如果 less 的 STDIN 是输入文件而不是终端本身，我不知道如何进入那里。我真的希望我可以通过我的映射程序管理交互式终端输出。

我也知道可以检查程序的 STDIN 是否是终端，但这无助于我找出

1.  是否连接了终端，或者
2.  如何重定向/管道/munge可能不是STDIN的终端文件输入

**更新**：好的，我做了一些挖掘，看起来我一直在寻找神奇的`/dev/tty`. 希望有人能告诉我如何弄乱它。

**更新**：提炼的问题：我本质上是否需要在`pty`需要翻译其事件的寻呼机的特定实例上构建和运行？听起来这会很痛苦，因为我需要拥有所有这些流程管理和东西。`IO:Pty:Easy`不过看起来很有希望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:48:40.197

如果你这样做

```
$ lsof -p <pid-of-less> 
```

你会在底部看到类似

```
less    30875 user    3r   CHR    5,0      0t0    1037 /dev/tty 
```

它向您展示了如何`less`打开控制终端`/dev/tty`来读取命令。

# php - PayPal IPN 不会执行代码的某些部分

> ID：16028369
> 
> 赞同：0
> 
> 时间：2013-04-16T03:41:32.087
> 
> 标签：php, paypal, paypal-sandbox, paypal-ipn

我正在尝试使用 PayPal IPN 系统。我已经设置了我的代码以使用他们的 SandBox 平台进行测试。我正在寻找为什么`if (strcmp ($res, "VERIFIED") == 0) {`我的代码部分没有执行的原因。不仅如此，这段代码的任何部分都没有将任何输出写入“log.txt”。

我希望能对我的代码进行审查，让我知道我哪里出错了。

```
<?php
require_once('includes/mysql.inc.php');

if($_POST) {
    $req = 'cmd=' . urlencode('_notify-validate');
    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $req .= "&$key=$value";
    }

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Host: sandbox.paypal.com\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
    $fp = fsockopen ('ssl://sandbox.paypal.com', 443, $errno, $errstr, 30);

    if (!$fp) {
        file_put_contents('log.txt', 'httperrrrr');
        die();
    } else {
        file_put_contents('log.txt', 'die here');
        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            $res = fgets ($fp, 1024);
            $data = print_r($res, TRUE);
            if (strcmp ($res, "VERIFIED") == 0) {
                file_put_contents('log.txt', 'verified');
                $username = $_POST['custom'];
                require_once('classes/admin.class.php');
                $activate = new Admin($db);
                $activate->modifyUser($username, 'activate');
            } else {
                file_put_contents('log.txt', 'noverifyshit');
            }
        }
    } else {
        file_put_contents('log.txt', 'no post');
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:48:26.263

我修好了它！我只是添加了 "if ($_POST['payment_status'] = "Completed") {" 并且代码现在执行为 true。

这是我更新的代码：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors',1);
require_once('includes/mysql.inc.php');

if($_POST) {
    $req = 'cmd=_notify-validate';

    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $req .= "&$key=$value";
    }

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Host: www.paypal.com\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
    $fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

    if (!$fp) {
        file_put_contents('log.txt', 'httperrrrr');
        die();
    } else {
        file_put_contents('log.txt', 'die here');
        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            $res = fgets ($fp, 1024);
            if (strcmp ($res, "VERIFIED") == 0) {
                if ($_POST['payment_status'] = "Completed") {
                    file_put_contents('log.txt', 'verified');
                    $username = $_POST['custom'];
                    require_once('classes/admin.class.php');
                    $activate = new Admin($db);
                    $activate->modifyUser($username, 'activate');
                }
            } else {
                file_put_contents('log.txt', $_POST['payment_status']);
            }
        }
    }
}
?> 
```

# rabl - RABL 收集日期格式

> ID：16028372
> 
> 赞同：-1
> 
> 时间：2013-04-16T03:41:36.897
> 
> 标签：rabl

我想以`updated_at`另一种格式返回属性的日期时间，但是，在一个集合中。

如果它是一个单一的对象，我会做类似的事情

```
object @person
  attributes :name, :phone
  node(:updated_at){|person|(person.created_on.strftime(%d,%m,%Y)}
end 
```

但是，我怎样才能在人员集合中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:53:45.820

您显示的 rabl 文件是您的`people/show.json.rabl`，您可以声明`people/index.json.rabl`为

```
collection @people
extends "people/show" 
```

这可能会解决你的问题。

# python - R中的生成器函数

> ID：16028374
> 
> 赞同：24
> 
> 时间：2013-04-16T03:41:44.500
> 
> 标签：python, r, python-3.x, generator

R 中是否有一个包或语言结构可以促进或提供“[类 Python 生成器](http://docs.python.org/3/tutorial/classes.html#generators)”的实现？

“类似 Python 的生成器”是指在调用之间保持状态的函数，在 R 语法中并从 Python 借用关键字**yield**将类似于：

```
iterable.fun <- function(){
  yield list('a','b','c')
} 
```

使用**yield**而不是**return**，然后连续三次调用该函数将给出：

```
> iterable.fun()
  'a'
> iterable.fun()
  'b'
> iterable.fun()
  'c' 
```

编辑：我遗漏了 Python 生成器的一个方面，它使它们与迭代器不同。这是要迭代的整个对象列表不是建立在第一次调用然后迭代的，而是每个函数调用创建一个将为该调用返回的元素。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-16T03:49:11.713

该`iterators`软件包具有此功能

```
library(iterators)
abc <- iter(c('a','b','c'))
nextElem(abc)
## [1] "a"
nextElem(abc)
## [1] "b"
nextElem(abc)
## [1] "c" 
```

或者你可以使用`lambda.r`and `<<-`。此示例修改自

[http://cartesianfaith.wordpress.com/2013/01/05/infinite-generators-in-r/](http://cartesianfaith.wordpress.com/2013/01/05/infinite-generators-in-r/)

博文中有更多示例

```
library(lambda.r)
seq.gen(start) %as% {
  value <- start - 1L
  function() {
    value <<- value + 1L
    return(value)
  }
}

foo <- seq.gen(1)
foo()
## [1] 1
foo()
## [1] 2
foo()
## [1] 3 
```

请注意，您也可以使用常规函数来执行此操作。

```
seq.gen <-function(start) {
  value <- start - 1L
  function() {
    value <<- value + 1L
    return(value)
  }
}
foo2 <- seq.gen(1)
foo2()
## [1] 1
foo2()
## [1] 2
foo2()
## [1] 3 
```

如果您想从可能的列表中进行选择，那么您也许可以使用`switch`

```
seq.char(start) %as% {
  value <- start - 1L
  function() {
    value <<- value + 1L
    return(switch(value,'a','b','c'))
  }
}

foo.char <- seq.char(1)
 foo.char()
## [1] "a"
 foo.char()
## [1] "b"
 foo.char()
## [1] "c" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-10-05T08:15:16.370

该团队最近的一个`coro`包（协程）`r-lib`提供了生成器、迭代器和自适应生成器。生成器的行为与预期的完全一样（文档中的复制粘贴示例）：

```
library(coro)

generate_abc <- generator(function() {
  for (x in letters[1:3]) {
    yield(x)
  }
})
# Create the iterator
abc <- generate_abc()

# Use the iterator by invoking it
abc()
#> [1] "a"

abc()
#> [1] "b"

# Last value
abc()
#> [1] "c"

# Exhaustion sentinel
abc()
#> exhausted

abc()
#> exhausted 
```

[在https://github.com/r-lib/coro](https://github.com/r-lib/coro)上查看更多信息

# objective-c - 块方法内的 2D NSString 数组使用

> ID：16028380
> 
> 赞同：0
> 
> 时间：2013-04-16T03:42:07.547
> 
> 标签：objective-c, xcode, nsstring, objective-c-blocks

为什么我不能使用这个？

```
__block NSString *tableStrings[4][2];

[userValues enumerateObjectsUsingBlock:^(NSNumber *userScore, NSUInteger idx, BOOL *stop) {
        tableStrings[idx][0] = @"< 5";
        tableStrings[idx][1] = @"> 95";
}]; 
```

编译器对我大喊大叫`"Cannot refer to declaration with an array type inside block"`。我的印象是`__block`在变量之前表示将允许这样做。我可以使用 using`NSString[x][x]`但我很好奇为什么不允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:21:40.293

块不能`__block`从封闭范围访问自动或存储的数组变量。这只是块的限制。这是因为这两件事都需要能够复制变量。并且数组类型不可分配。

他们可能会为数组创建一个特殊情况，即数组是逐个元素复制的。C++11 lambdas 做了这种特殊情况，因此它们可以按值捕获数组，即使数组不可赋值。然而，积木们并没有费心制造这种特殊情况。

# regex - 使用正则表达式替换整个单词

> ID：16028387
> 
> 赞同：0
> 
> 时间：2013-04-16T03:42:45.830
> 
> 标签：regex, vb.net

我有一个原始单词列表，并替换为我想将某些句子中原始单词的出现替换为替换单词的单词。

例如我的清单：

```
theabove      the above
myaddress     my address 
```

所以句子“This is theabove”。将变为“这是上面的”。

我在 VB 中使用正则表达式，如下所示：

```
Dim strPattern As String
Dim regex As New RegExp

regex.Global = True

If Not IsEmpty(myReplacementList) Then
  For intRow = 0 To UBound(myReplacementList, 2)
       strReplaceWith = IIf(IsNull(myReplacementList(COL_REPLACEMENTWORD, intRow)), " ", varReplacements(COL_REPLACEMENTWORD, intRow))
       strPattern = "\b" & myReplacementList(COL_ORIGINALWORD, intRow) & "\b"
       regex.Pattern = strPattern

       TextToCleanUp = regex.Replace(TextToReplace, strReplaceWith)
  Next
End If 
```

我将列表 myReplacementList 中的所有条目与我要处理的文本 TextToReplace 进行循环，并且替换必须是整个单词，因此我在原始单词周围使用了“\b”标记。

它工作得很好，但是当原始单词包含一些特殊字符时我遇到了问题，例如

```
overla)   overlay 
```

我试图逃避模式中的 ) 但它不起作用：

```
\boverla\)\\b 
```

我不能用那个词替换句子“这个词是重叠的”。到“这个词与那个词重叠。”

不确定缺少什么？正则表达式是上述场景的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:27:21.400

我会使用 string.replace()。这样你就不必逃避特殊字符..只有这些：“”！有关示例，请参见此处：http: [//www.dotnetperls.com/replace-vbnet](http://www.dotnetperls.com/replace-vbnet)

如果您正在寻找模式，Regex 是很好的选择。或重命名您的 mp3 收藏 ;-) 等等。但在你的情况下，我会使用 string.replace()。

# c++ - 对 malloc 的调用必须与动态内存池中对 free 的调用相匹配吗？

> ID：16028393
> 
> 赞同：0
> 
> 时间：2013-04-16T03:43:15.553
> 
> 标签：c++, memory-management, pool

我这里有一些实现动态内存池的代码。池从大小 0 开始，并随着每次连续分配而增长。它用于尝试最小化大量分配和取消分配的开销。

对 malloc 的调用与对 free 的调用不匹配。它似乎依赖于使用它的应用程序没有连续调用足够的新的应用程序来泄漏大量内存。

我没有写它，所以这是我最好的猜测。

我的问题是：

1.  是没有调用释放错误还是我错过了与重载删除运算符有关的内容？
2.  这个实现是否依赖操作系统来清理退出时泄漏的少量内存？

谢谢。

```
//Obj.h
class Obj
{
public:
    Obj(){};
    void* operator new(std::size_t size);
    void operator delete(void* p);
private:
    static std::vector<void*> pool_;
    static std::size_t checked_in_;
    static std::size_t checked_out_;
};

//Obj.cpp
std::vector<void*> Obj::pool_;
std::size_t Obj::checked_out_ = 0;
std::size_t Obj::checked_in_  = 0;

void* Obj::operator new(std::size_t size)
{
    if (pool_.empty())
    {
        ++checked_out_;
        return malloc(size);
    }
    else
    {
        --checked_in_;
        ++checked_out_;
        void* p = pool_.back();
        pool_.pop_back();
        return p;
    }
}

void Obj::operator delete(void* p)
{
    pool_.push_back(p);
    if (pool_.size() % 10000 == 0)
    {
        std::cout<<"mem leak\n";
    }
    --checked_out_;
    ++checked_in_;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:55:00.483

缺少的“免费”意味着您无法将其嵌入到某个更大的应用程序中，无法启动、关闭并最终回到您开始的位置。如果您控制整个应用程序，这很好，但如果此代码实际上必须是可嵌入的，那​​就不好了。要完成这项工作，您需要一些入口点来自由地遍历向量调用。

在传统意义上它从不泄漏，因为每个 malloc 的块都由 operator delete 存储在 vector 中以供重用，并且 operator delete 如果在 vector 中看到太多项目，则会抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:49:33.367

您正在创建一个内存池。此池实现将根据需要增长，但永远不会将内存返回给操作系统。这通常是一个错误，但在创建您自己的分配内存的方法时不是 - 只要这个池在您的程序的生命周期中存在。当程序退出时你会泄漏，但你可能会忍受。基本上，您将覆盖 new/malloc 通常的工作方式并完全自行处理内存。

# c# - 将 URL 插入位图中

> ID：16028394
> 
> 赞同：0
> 
> 时间：2013-04-16T03:43:21.740
> 
> 标签：c#, asp.net, image

如果可能的话，我需要在使用 DrawString 创建的文本中放置一个链接，该链接位于同样使用 DrawRectangle 创建的形状内。这是在 asp.net 中制作的。任何人都知道这样做的方法，甚至有可能。塔恩克

# sap-hr - 如何向 SAP HRFORMS 打印程序添加可选的选择标准？

> ID：16028403
> 
> 赞同：1
> 
> 时间：2013-04-16T03:43:56.993
> 
> 标签：sap-hr

我正在尝试向标准 payadvice 驱动程序添加一个复选框，以使用户能够通过电子邮件发送表单而不是打印它。

因为打印程序是从打印表单（事务 HRFORMS）自动生成的，所以我不能只是去更改程序。

在事务 HRFORMS 中，我可以通过下面的可选选择字段对选择屏幕进行一些控制：是否可以通过配置向其中添加自定义选择标准？

![在此处输入图像描述](https://i.stack.imgur.com/hbTfr.jpg)

我可以将生成的程序包装在我自己的自定义程序中，但是我会失去很多现有的可配置性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T21:29:47.087

我一直找不到可配置的解决方案。

然而，SAP 已经为 HRFORMS 提供了一个标准的包装程序：

```
H99_HRFORMS_CALL 
```

我使用隐式增强点增强了该程序中的选择屏幕，并使用参数 ID 将必要的参数传递给打印表单。

# django - Django 列表排序

> ID：16028404
> 
> 赞同：0
> 
> 时间：2013-04-16T03:44:01.367
> 
> 标签：django, filtering

我有一个名为 bank 的模型，它的 Credit 类与用户相关联。然后我有一个名为 program 的模型，它的 NewProgram 类也与用户相关联。

现在，我想列出所有 NewProgram 对象按用户 Credit 升序到我的 views.py 的顺序。而且我不知道我将如何使用 .order_by 方法来做到这一点。

我希望有人能给我一些提示。

这是我的代码：

应用名称：银行

模型.py

```
class Credit(models.Model):
    credit_balance = models.DecimalField(max_digits=6, decimal_places=2)
    depositor = models.ForeignKey(User, unique=True)
    last_updated = models.DateTimeField(auto_now=True)

    def __unicode__(self):
        return u'%s' % self.depositor.username 
```

应用名称：程序

```
class NewProgram(models.Model):
    program_creator = models.ForeignKey(User, related_name='program_creator')
    joining_credit_value_offer = models.DecimalField(max_digits=6, decimal_places=2)
    site = models.ForeignKey('ProgramSite')
    uid = models.CharField(max_length=50)
    title = models.CharField(max_length=30)
    desc = models.CharField(max_length=150)
    content = models.TextField(blank=False)
    is_published = models.BooleanField(default=True)
    referrals = models.ManyToManyField(User, through='ReferredUser')
    creation_date = models.DateTimeField(auto_now_add=True) 
```

这是我想要完成的事情

```
list = NewProgram.objects.all().order_by(<Users Credit><ASC>) 
```

非常感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:52:25.950

你可以尝试使用这个

```
list = NewProgram.objects.all().order_by('-program_creator__credit__credic_balance') 
```

Django 通过`__`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T05:00:09.910

你好，你可以使用这个：

```
#Note, no need to use .all()
list = NewProgram.objects.filter(credit_set__depositor="some_user") 
```

# python - 在表格中查找具有特定文本的 href

> ID：16028405
> 
> 赞同：-1
> 
> 时间：2013-04-16T03:44:11.573
> 
> 标签：python, xpath, lxml

我有一个 html 表格，我正在尝试查找具有 href 标记的行，该标记的文本内容中包含“取消订阅”一词。我正在使用 lxml、python 和 xpath - 我可以使用这个找到行：

```
row_to_find = table.xpath("//tr[contains(descendant::*, 'Unsubscribe')]")[0] 
```

但是上面没有在href中找到这个..并且以下不起作用..

```
row_to_find = tables.xpath(".//tr/*/a[contains(text(), 'Unsubscribe')]") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:58:26.213

这两个都可以工作：

```
//a[.="Unsubscribe"]/ancestor::tr
//tr[.//a[.="Unsubscribe"]] 
```

*   第一个说，*“找到一个`<a>`文本是'取消订阅'的，然后找到它的祖先`<tr>`元素。”*

*   第二个说，*“在任何地方找到一个`<tr>`，但前提是它有一个`<a>`带有文本'取消订阅'的后代”*

如果您的表本身包含在另一个表中，那么两者都会给您误报，因此有另一个`<tr>`匹配这个非常松散的标准。您可以通过提供更准确的路径来收紧它，例如

```
//a[.="Unsubscribe"]/parent::*/parent::tr
//tr[./*/a[.="Unsubscribe"]] 
```

…或者（对于第一个）通过指定您只想要第一个（最接近的）`<tr>`：

```
//a[.="Unsubscribe"]/ancestor::tr[1] 
```

# oracle - Spring 事务不适用于 Oracle Express

> ID：16028409
> 
> 赞同：0
> 
> 时间：2013-04-16T03:44:41.290
> 
> 标签：oracle, spring, bitronix

我有一个简单的独立应用程序来测试 Spring 的事务管理。拥有 Oracle Express Edition。运行以下命令以启用 XA

```
grant select on sys.dba_pending_transactions to user_test;
grant select on sys.pending_trans$ to user_test;
grant select on sys.dba_2pc_pending to user_test;
grant execute on sys.dbms_system to user_test; 
```

我的 Java 代码大致如下：

```
public class DbUpdater 
{
    private static final ApplicationContext context = 
       new ClassPathXmlApplicationContext(new String[] {"spring_transactions.xml"});
    private static Logger log = LoggerFactory.getLogger(DbUpdater.class);

    @Transactional(propagation=Propagation.REQUIRED, readOnly=false)
    public void updateData()  {
        IMasterDAO ds1 = context.getBean("masterDao", IMasterDAO.class);
        log.info("Insert using ds1");
        ds1.insert("insert into users values(?,?)", "user1", "John Hamilton");
        log.info("Insert using ds1 finished successfully");

        throw new RuntimeException("A runtime exception");
    }
} 
```

所以所有的想法都是看到事务回滚。我运行了几个配置示例，并且记录一直被提交。不执行回滚。没有错误没有，只有预期

```
Exception in thread "main" java.lang.RuntimeException: A runtime exception
at com.test.spring.transation.DbUpdater.updateData(DbUpdater.java:22) 
```

我的最后一个配置是这样的：

```
 <bean id="txManager"
        class="org.springframework.transaction.jta.JtaTransactionManager">
            <property name="transactionManager" ref="bitronixTransactionManager" />
            <property name="userTransaction" ref="bitronixTransactionManager" />
    </bean>

    <bean id="btmConfig" factory-method="getConfiguration"
         class="bitronix.tm.TransactionManagerServices">
         <property name="serverId" value="spring-btm" />
    </bean>

    <bean id="bitronixTransactionManager" factory-method="getTransactionManager"
        class="bitronix.tm.TransactionManagerServices" 
                depends-on="btmConfig,dataSource"
        destroy-method="shutdown" />

    <bean id="dataSource" class="bitronix.tm.resource.jdbc.PoolingDataSource" 
      init-method="init" destroy-method="close">
    <property name="className" value="oracle.jdbc.xa.client.OracleXADataSource"/>
    <property name="uniqueName" value="myOracleDataSource"/>
    <property name="minPoolSize" value="0"/>
    <property name="maxPoolSize" value="5"/>
    <property name="allowLocalTransactions" value="true"/>
    <property name="testQuery" value="select sysdate from dual"/>
    <property name="driverProperties">
        <props>
            <prop key="user">${jdbc.username}</prop>
            <prop key="password">${jdbc.password}</prop>
            <prop key="URL">${jdbc.url}</prop>
        </props>
    </property>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="dataSource"></property>
</bean>

<bean id="masterDao" class="com.test.spring.transation.MasterDAO">
    <property name="jdbcTemplate" ref="jdbcTemplate"></property>
</bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:26:57.357

通过提供的数据源实例化的 JDBC 模板似乎与它自己的事务一起工作 [通过自动开始和提交事务]。在单独的提交/回滚周期中运行之后抛出异常，因此您会看到写入持续存在。要验证它，您可以移动代码以在 MasterDAO 类中引发异常并检查回滚。

# mysql - mysql游标未打开

> ID：16028410
> 
> 赞同：1
> 
> 时间：2013-04-16T03:44:44.577
> 
> 标签：mysql

我在遵循 MySql 存储过程时遇到问题，当我尝试从控制台和通过应用程序运行它时，它会给出 SQLException，说光标未打开，有人能告诉我为什么它没有打开吗？

```
 DELIMITER $$
DROP PROCEDURE IF EXISTS DELETE_EXPIRED_GIFTS_SP$$
CREATE PROCEDURE DELETE_EXPIRED_GIFTS_SP()
    BEGIN
    DECLARE gift_id_val INT;
    DECLARE item_id_val INT;   
    DECLARE expiry_date DATETIME;
    DECLARE  no_more_gifts INT DEFAULT 0;
    DECLARE num_rows INT DEFAULT 0;
    DECLARE  gift_items_cur CURSOR FOR 
        SELECT user_gift_id, item_id
        FROM user_gift
        WHERE status in (1,3);

    DECLARE  CONTINUE HANDLER FOR NOT FOUND 
    SET  no_more_gifts = 1;

    OPEN gift_items_cur;
        select FOUND_ROWS() into num_rows;
        the_loop: LOOP
            FETCH  gift_items_cur  INTO   gift_id_val, item_id_val;

            IF no_more_gifts=1 THEN
                    CLOSE gift_items_cur;
                    LEAVE the_loop;
            END IF;

            SELECT end_time INTO expiry_date FROM item WHERE item_id = item_id_val;

            IF expiry_date IS NOT NULL AND expiry_date <= UTC_TIMESTAMP()
                THEN UPDATE user_gift SET status = 5 WHERE user_gift_id = gift_id_val;
            END IF;

         END LOOP the_loop;
    CLOSE  gift_items_cur;
    END$$
 DELIMITER ; 
```

我来到这里的错误是，

```
 09:05:31,328 INFO  [STDOUT] FATAL: com.abc.gift.support.impl.GiftSupportImpl - ERROR: CallableSt
atementCallback; uncategorized SQLException for SQL [{call DELETE_EXPIRED_GIFTS_SP()}]; SQL state [2
4000]; error code [1326]; Cursor is not open; nested exception is java.sql.SQLException: Cursor is n
ot open 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:54:02.493

```
the_loop: LOOP
    :
    IF no_more_gifts=1 THEN
        CLOSE gift_items_cur;      <<< Number 1
        LEAVE the_loop;
    END IF;
    :
END LOOP the_loop;
CLOSE  gift_items_cur;             <<< Number 2 
```

在我看来，您在这里关闭了*两次*光标。

在您的处理程序激活并`no_more_gifts`设置为后第一次关闭它`1`。此时您也退出循环，然后再次尝试关闭光标*。*

我建议将您的内部`if`陈述更改为：

```
IF no_more_gifts=1 THEN
    LEAVE the_loop;
END IF; 
```

# windows-phone-8 - windows 8操作系统中windows phone开发者注册工具

> ID：16028413
> 
> 赞同：1
> 
> 时间：2013-04-16T03:45:07.630
> 
> 标签：windows-phone-8

我将手机与电脑连接。PC 中的 Windows Phone 应用程序启动，我可以在那里看到我所有的照片和视频。

但是当我开始**注册 Windows Phone 开发者注册时**。当我点击它时，我得到一个**注册**按钮。登录屏幕会出现一秒钟然后下车。我想在设备上部署和测试我的应用程序。

设备：诺基亚 Lumia 520 ( **Windows Phone 8** ) PC：Windows 8 操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T08:15:43.013

错误是因为 Internet Explorer 未设置为默认浏览器，但是当我将其设置为默认浏览器时，所有进程都成功... :)

# internet-explorer-8 - IE8：Internet Explorer 无法打开此 Internet 站点。请求的站点不可用或找不到

> ID：16028422
> 
> 赞同：8
> 
> 时间：2013-04-16T03:46:15.647
> 
> 标签：internet-explorer-8

这应该是关于IE8下载问题的老问题了。我使用 PHP 来设置响应标头，例如：

```
header("Pragma: public");
header("Expires: 0"); 
header("Content-type: application/octet-stream");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Length: ".strlen($content));
header("Content-Disposition: attachment; filename='$filename'"); 
```

并且连接被 Fiddler 近距离捕获。

当我尝试在 IE8（而不是 SSL）中下载带有上述标题的文件时，消息框：

“Internet Explorer 无法打开此 Internet 站点。请求的站点不可用或找不到。” 弹出并停止下载。

我在网上搜索并尝试了很多解决方案，但似乎没有一个有效。这个问题还有其他解决方案吗？

PS：我尝试过：删除响应头/在头中重置 contentType/将站点添加到受信任站点/将“不将加密页面保存到磁盘”设置为 true。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-03T10:50:54.610

除了 Le-roy 的回答：

我设置

```
Cache-Control: private, max-age=1 
```

这为我解决了这个问题。

从 Le-roy 的链接中，如果设置了以下任何一项：

```
Cache-Control header with the tokens no-cache, no-store
Vary header that specifies almost anything 
Pragma header that specifies exactly no-cache 
```

IE 下载会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T02:22:11.050

当标头中设置了 no-cache 时，IE 无法从 HTTPS 下载文件。试试这个页面[http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx)了解更多信息。

# javascript - 关于cookie

> ID：16028424
> 
> 赞同：3
> 
> 时间：2013-04-16T03:46:22.497
> 
> 标签：javascript, jquery

我正在使用一个页面中设置会话 cookie

```
setCookie("cookietime","1000"); 
```

并在返回上一页时将其重置为“”

```
setCookie("cookietime",""); 
```

当我返回时，在看到 cookie 为“”后会显示警报。它在警报中显示“”。但在下一页它仍然显示“1000”。cookie 页面是否特定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:10:28.783

Cookies 存储在客户端，是特定于计算机+浏览器的，而不是特定于页面的！我猜您正在使用应该在会话中持续存在的 document.cookie - 即使刷新页面，它们也会持续存在。使用 window.name 只会在同一个浏览器窗口中持续存在，但会在页面刷新时清除。[HTML5 localStorage](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)可能是一个合适的替代方案。

相关问题：[跨页面保留 javascript 变量？](https://stackoverflow.com/questions/1981673/persist-javascript-variables-across-pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:19:44.223

`Session cookies`是在您关闭浏览器时将被删除的临时 cookie 文件。

`Persistent cookies`保留在您的浏览器上，直到它过期或直到您删除它们。

两者都不是页面特定的。

请注意，`Firefox`当您使用会话恢复功能时，会在浏览器重新启动后恢复会话 cookie，这可能会导致一些不一致。

# javascript - $('.add').live('click', function()

> ID：16028425
> 
> 赞同：-4
> 
> 时间：2013-04-16T03:46:28.717
> 
> 标签：javascript, jquery, html

我似乎无法在我的 javascript 中添加选项标签。帮帮我吧。
我想要做的是添加按钮的功能。

```
 var scntDiv = $('.input');
    var i = $('.input p').size() + 0;

$('.add').on('click', function() {
            $('<p><input type="text" name="barcode' + i + '" id="textbox_input1" placeholder="Barcode"/>                <input type="text" name="item' +i+ '" id="textbox_input1" placeholder="Item"/>              <input type="number" name="qtty' +i+ '" id="textbox_input1" placeholder="Quantity"/>                <input type="number" name="min' +i+ '" id="textbox_input1" placeholder="Minimum"/>              <select name="category' +i+ '" id="textbox_input1"/><option value="Grocery">Grocery</option><option value="Furniture">Furniture</option></select>               <input type="text" name="price' +i+ '" id="textbox_input1" placeholder="Price"/>                <input type="text" name="promo' +i+ '" id="textbox_input1" placeholder="Promo"/>                <button type="button" class="remove" id="button">Remove</button></p>').appendTo(scntDiv);
            i++;

            return false;

    }); 
```

请帮我。我的问题是单击添加按钮时不会出现选项值。这

```
<select name="category' +i+ '" id="textbox_input1"/><option value="Grocery">Grocery</option><option value="Furniture">Furniture</option></select> 
```

在脚本中没有给出任何选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:52:10.710

将 live 更改为 on：

```
$('body').on('click', '.add', function() {
    // do something
}); 
```

注意：将“body”更改为 .add 的父元素，最好是带有 ID 的元素。

另请参阅[jQuery 1.9 .live() 不是函数](https://stackoverflow.com/a/14354091/584192)和[jQuery - 如何使用“on()”方法而不是“live()”？](https://stackoverflow.com/a/14703668/584192)

JSfiddle：http: [//jsfiddle.net/samliew/tPdyT/](http://jsfiddle.net/samliew/tPdyT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:00:00.583

我建议不要使用 .live() 并升级到最新版本的 jQuery 1.9.1。

*   **.live() 已弃用并由 .on() 取代**
*   而不是 return false 使用 preventDefault （以避免意外行为）
*   i++ 仅在循环内工作，因此请考虑使用[.each()](http://api.jquery.com/jQuery.each/)

    $('document').on('click', '.add', function(e) { e.preventDefault(); // 做点什么 });

下次要获得更多代码帮助，请解释您要实现的目标并发布更多代码，以便我们有最好的机会回答您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:00:46.173

本准则不是最佳实践。

1.  变量 i 未初始化
2.  将生成相同的 id 标签。
3.  scntDiv 似乎是未定义的变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T04:03:31.543

在编写选项标签之前，您可以关闭您的选择元素，方法是使用`<select/>`. 应该是哪个`<select>`。也就是说，删除`/`第一个标签末尾的多余部分。

所以它变成了这样：

```
<select>
  <option></option>
  <option></option>
</select> 
```

而不是这个：

```
<select/>
  <option></option>
  <option></option>
</select> 
```

当然，添加你之前使用的属性。

我还建议看看其余的答案。

# .net - PrintTicket DllHost.exe 内存攀升

> ID：16028427
> 
> 赞同：0
> 
> 时间：2013-04-16T03:46:39.523
> 
> 标签：.net, wpf, printing, memory-leaks

我`PrintTickets`用来打印大量的`WPF objects`东西，打印效果很好。我们确实有一种情况，据报道，程序正在使用大量`dllhost.exe`内存并不断攀升，直到机器最终崩溃。我已将其范围缩小到创建 a`PrintTicket`和`printqueue.getprintcapabilitiesasxml()`. 每次调用它们时，它都会使`dllhost.exe`每次的内存使用量增加 3+ MB。谁能告诉我如果可能的话如何避免这种情况，或者在我知道它被使用后是否有办法清除它？

更新：我用简单的代码创建了一个项目。

```
for (int i = 0; i < 100; i++)
{
    using (System.Printing.PrintQueue pQueuePrnt = 
    new LocalPrintServer().GetPrintQueue("HP LaserJet 9050 PCL 5"))
    {
        using (MemoryStream printerCapXmlStream = pQueuePrnt.GetPrintCapabilitiesAsXml())
        {
            Console.WriteLine(printerCapXmlStream.Length);
        }
    }
} 
```

这将导致`dllhost.exe`永远不会消失的近 60 MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:58:04.207

每当您看到无法解释的内存增加时，您首先应该怀疑的是您的代码在某处泄漏了内存。检查您调用的所有函数，跟踪它们的返回值，并确保在完成它们后将它们全部处理掉。

您说您已将范围缩小到对 的调用`PrintQueue.GetPrintCapabilitiesAsXml`。这是一个好的开始。因此，让我们查看[该方法的文档](http://msdn.microsoft.com/en-us/library/ms552921.aspx)以查看它返回的内容。啊，它回来了

> A`MemoryStream`指定打印机的功能

所以现在我们需要找出 a 到底`MemoryStream`是什么。特别是，我们需要知道它是否实现了[`IDisposable`接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，因此需要由我们的代码处理。根据[文档](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)，确实如此，因为`MemoryStream`继承自`Stream`.

据推测，您的代码正在检索所有这些新`MemoryStream`对象，然后让它们泄漏其非托管资源。您需要`Dispose`为每个对象显式调用该方法，或者将它们的检索和使用包装在一个`using`语句中；例如

```
using (MemoryStream ms = PrintQueue.GetPrintCapabilitiesAsXml())
{
    ms.DoSomething();
    // ...
} // the object is automatically disposed here 
```

# matlab - 在 MATLAB 中经济高效地创建对称矩阵

> ID：16028428
> 
> 赞同：1
> 
> 时间：2013-04-16T03:46:56.203
> 
> 标签：matlab, matrix

我对 MATLAB 相当陌生，并且有一段代码可以创建距离矩阵。更准确地说，它在无向图上的点之间创建距离矩阵 D，使得 Dij 是该图上点之间的最短路径。这个矩阵显然是对称的（因为图是无向的），下面是我用来创建它的代码片段：

```
D = zeros(size(data,1));
for i = 1:size(data, 1)
    for j = 1:size(data, 1)
        [D(i, j), ~, ~] = graphshortestpath(G, i, j, 'Directed', false);
    end
end 
```

这显然是非常浪费的，因为我没有利用矩阵的对称性。有什么方法可以只计算矩阵的上三角部分，然后以某种方式将下三角部分“附加”到它，这样我就可以将计算从 n^2 减少到 n^2 / 2？

任何帮助表示赞赏，

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:59:36.997

当然。想想迭代的顺序，找出首先到达哪个三角形。

```
D = zeros(size(data,1));
for i = 1:size(data, 1)
    for j = 1:size(data, 1)
        if j > i
            [D(i, j), ~, ~] = graphshortestpath(G, i, j, 'Directed', false);
        else
            D(i, j) = D(j, i);
        end
    end
end 
```

如果对角线元素不完全为零，则可以`if j >= i`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:02:57.557

对于无向和无权图，计算距离矩阵的另一种方法

如果您试图减少运行时间，可能会有所帮助。在 Matlab 的情况下，大多数时候，我发现逐个扫描条目比较慢。我只是猜测你问这个问题的目的，如果我跑题了，对不起。

给定一个邻接矩阵（ G ），我将按以下方式计算距离矩阵，

假设： 1\. G 是无向且未加权的（矩阵填充有 '0' 和 '1' ） 2\. N 是图的顺序，G 的大小为 N x N

```
function [D,connect]=genDistance(G,N)

D = G;
B = G;
connect = 0;
i=1;
while((~connect)&&(i<N-1))    % the maximum distance from one vert to another
    i = i + 1;                % is N-1
    B = B * G;                % G to the power of i
    D = D + i * (D==0&B>0);   % D==0 & B>0 the entries to be updated 
    connect = ( min(min(D)) )>0;  %check if D has zero entry
end
D ( eye(N) ) = 0 ; %clear diagonal entries 
```

*   (i,j) "G power k" 中的条目将为您提供 G 中从 Vi 到 Vj 的长度为 k 的步行次数
*   最后 connect 会告诉你图是否连通

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:05:54.483

`G`您可以为矩阵的下部生成索引

```
N = length(G);
[irow, icol] = find(tril(ones(N),-1)); 
```

然后你可以遍历这些索引：

```
D = zeros(size(G));
for i = 1:numel(irow)
   [D(irow(i), icol(i)] = graphshortestpath(G, irow(i), icol(i), 'Directed', false);
end
D = D + D'; 
```

* * *

另一种选择是使用带有这些索引的 ARRAYFUN 和 SQUAREFORM 将结果向量转换为方阵：

```
D = arrayfun(@(x,y) graphshortestpath(G,x,y, 'Directed', false), irow, icol);
D = squareform(D); 
```

# java - Java 帮助为每个连接的用户创建一个新的套接字

> ID：16028434
> 
> 赞同：0
> 
> 时间：2013-04-16T03:47:36.570
> 
> 标签：java, multithreading, sockets, stream, connection

我正在创建一个聊天服务器，但我无法建立多个连接，我相信这是因为只有一个套接字。我读过一个线程一次能够处理多个套接字连接，但每个客户端都必须有自己的套接字。像墙上的插座。每个插头必须有 1 个插座。如何为每个客户端创建一个套接字以用于与服务器通信？我将提供一些代码来帮助你们建立你的帮助。这是接受单个套接字（连接）的地方。

```
 private void waitForConnection() throws IOException
 {
     connection = server.accept();
     showMessage("\nNow connected to " + connection.getInetAddress().toString());
     clientCount += 1;
 } 
```

这是在服务器启动时调用代码的地方：

```
public void startRunning()
{
  try
  {
     server = new ServerSocket(1337, 10);
     while(true)
     {
        try
        {
            showMessage("Waiting For a Player To Connect...");
            waitForConnection();
            setupStreams();
            whileChatting();

        }
        catch(EOFException eofException)
        {
           showMessage("\n Server ended the connection! ");
        }
        finally
        {
           closeConnections();
        }
     }
  }
  catch(IOException ioException)
  {
     ioException.printStackTrace();
  }
} 
```

现在，此代码对于第一个连接的客户端非常有效。所有其他人根本无法连接。提前感谢所有提交答案的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:14:49.827

您应该保持一个线程始终执行`socket.accept()`。那是：

*   每当您收到客户（通过`socket.accept()`），您应该
    *   开始一个新`Thread`的，从现在开始照顾那个客户。（我称之为`Thread`扩展类`ClientNanny`）；
    *   然后重新运行`socket.accept()`。

这就是你的`waitForConnection()`方法应该是这样的：

```
private List<ClientNanny> clients = new ArrayList<ClientNanny>();

private void waitForConnection() throws IOException
{
     while (true) { /* or some other condition you wish */
         connection = server.accept(); /* will wait here */
         /* this code is executed when a client connects... */

         showMessage("\nNow connected to " 
                                      + connection.getInetAddress().toString());

         ClientNanny nanny = new ClientNanny(connection); /* call a nanny to take
                                                             care of it */
         clients.add(nanny); /* make sure you keep a ref to it, just in case */
         nanny.start(); /* tell nanny to get to work as an independent thread */
         clientCount += 1; /* you dont need this: use clients.size() now */
     }
} 
```

如果你没有注意到，`ClientNanny`应该是这样的：

```
class ClientNanny extends Thread {
    ClientNanny(Socket baby) {
        this.myBaby = baby;
    }
    @Override
    public void run() {
        bed.put(myBaby); /* and probably other commands :) */
    }
} 
```

现在，您应该注意到下面突出显示的代码...

```
try
{
    showMessage("Waiting For a Player To Connect...");
    waitForConnection();
    setupStreams();  /* <--------- THIS LINE! HI! I'M A HIGHLIGHT! */
    whileChatting(); /* <--------- THIS LINE! HI! I'M A HIGHLIGHT TOO! */
} 
```

`waitForConnection()`当您按照我的建议进行更改时不会被执行（因为`waitForConnection()`将继续在`while(true)`循环内滚动）。也许你可以把它`socket.accept()`放在它自己的线程上......无论如何，我相信你可以从现在开始接受它，是吗？

^(PS.：作为最后的指针，上面的解决方案使用`new Thread()`（或`new ClientNanny()`就此而言），因为它是解释您的问题的最简单方法。但是，非常非常理想的解决方案可能涉及使用（大致是线程池），正如[本答案](https://stackoverflow.com/a/12017742/1850609)`ExecutorService`中快速指出的那样。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:08:19.327

您的套接字代码应如下所示 PSEUDO-CODE：

```
create server socket
while true (or quit received) {
    accept connection
    spawn thread to handle communication
} 
```

也就是说，您需要为每个连接生成一个线程。然后**每个线程都可以执行 whileChatting()**，而不是阻止主线程。

例子：

```
while (true) {
    try {
        // listen for client connections
        Socket s = svr.accept();

        // start a separate thread to handle this client's communications
        new ChatClientHandler(s).start();
    }
    catch (IOException e) {
        // print out the error, but continue!
        System.err.println(e);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:13:58.903

您的代码的整个结构是错误的：

```
waitForConnection();
setupStreams();
whileChatting(); 
```

这不能满足您的要求。您的循环应该旋转除了接受连接之外什么都不做，然后为每个处理该套接字上的所有 I/O 的线程启动一个新线程。请参阅 Java 教程的[自定义网络](http://docs.oracle.com/javase/tutorial/networking/index.html)部分。

# eclipse - Eclipse，将 src 输出文件夹移动到 WEB-INF/classes

> ID：16028436
> 
> 赞同：2
> 
> 时间：2013-04-16T03:48:23.623
> 
> 标签：eclipse, maven

我有这样的文件夹结构

```
SampleWeb/
         src/main/
                  java : All java classes <br/>
                  resources : All properties file etc<br/>
                  webapp : WEB-INF folder and other jsp pages
         pom.xml 
```

现在，默认的 Eclipse 构建创建目标文件夹并将所有输出文件移动到目标文件夹，就像

```
target/classes/
              all .class files (of src folder)
              all properties (of resource folder)
              jsp files (of webapp folder, and ofcourse WEB-INF folder too) 
```

所以我正在寻找的是，如何使用 Eclipse 构建动态地将所有 .class 文件移动到 WEB-INF/classes 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:49:15.817

真正的名字：`src`包含来源。`src/main/webapp/`和也是如此`src/main/webapp/WEB-INF/`。它不应包含构建工件（例如类文件）。

使用 Maven 时，所有构建工件都`${project.build.directory}`进入`target/`.

您希望拥有类文件最终`scr/main/webapp/WEB-INF/`听起来好像您想要一个目录来运行您的 Web 应用程序。而不是将类文件（源文件！）移动到`src/main/webapp/WEB-INF`（更多源文件！）中，您应该将它们都移动到其他地方，通常在`target/`.

有许多插件可以为您做到这一点，具体取决于您的确切需求。有用于各种*高级装配任务的*[装配插件](http://maven.apache.org/plugins/maven-assembly-plugin/)，有提供复制功能的更简单的插件，还有专门用于装配 Web 应用程序（[WAR 插件](http://maven.apache.org/plugins/maven-war-plugin/)）或从 Maven 运行它们的插件（[Tomcat 插件](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/)）。

 *这些允许您执行任何操作，例如 WAR、未打包的 WAR、瘦 WAR 等。

使用`m2e`您可以在 Eclipse 中编辑时在后台处理此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T03:25:30.280

你可以把我的例子作为参考。我以前是把所有的测试文件都输出到classes-folder中，这样就可以一起编译打包了。这是代码片段。

```
<!-- define the output directory of test files -->
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <testOutputDirectory>target/classes</testOutputDirectory>
    <testResources>
        <testResource>
            <directory>src/test/java</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </testResource>
    </testResources> 
```*

# r - 使用 na.rm=TRUE 时移除 NaN

> ID：16028446
> 
> 赞同：10
> 
> 时间：2013-04-16T03:49:03.813
> 
> 标签：r, nan, na, na.rm

这个可重现的示例是我的代码的一个非常简化的版本：

```
x <- c(NaN, 2, 3)

#This is fine, as expected
max(x)
> NaN

#Why does na.rm remove NaN?
max(x, na.rm=TRUE) 
> 3 
```

对我来说，`NA`(missing value) 和`NaN`(not a number) 是两个完全不同的实体，为什么`na.rm`remove `NaN`？我怎么能忽略`NA`而不是`NaN`？

ps：我在 Windows7 上使用的是 64 位 R 版本 3.0.0。

**编辑：** 经过更多研究，我发现它也`is.na`返回 true `NaN`！这是我困惑的原因。

```
is.na(NaN)
> TRUE 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T03:51:31.647

这是一个语言决定：

```
> is.na(NaN)
[1] TRUE 
```

`is.nan`区分：

```
> is.nan(NaN)
[1] TRUE
> is.nan(NA)
[1] FALSE 
```

因此，您可能需要同时调用两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T03:53:32.227

`na.rm`函数中的参数通常使用`is.na()`或类似的函数。
从 开始`is.na(NaN) == TRUE`，你就会得到你正在观察的行为。

现在*应该将*NaN 也视为 NA 吗？那是一个不同的问题；）

* * *

解决这个问题的最好方法是明确告诉`R`如何处理`NaN` 一个例子：

```
ifelse(any(is.nan(x)), NaN, min(x, na.rm=TRUE)) 
```

# android - android中的SurfaceView刷新

> ID：16028450
> 
> 赞同：2
> 
> 时间：2013-04-16T03:49:17.603
> 
> 标签：android, graphics, surfaceview

我正在开发一个需要扩展 SurfaceView 的应用程序。现在我在重绘视图时遇到了一些问题。

对于一个普通的 android.view.View，我将覆盖该`onDraw()`方法，将我所有的图形登录放在这个方法中。`invalidate()`并在我想要重绘时调用该方法。

但是 SurfaceView 怎么样？似乎`postInvalidate()`可以用它来调用它的重绘。但是我可以把图形逻辑放在哪里？

我应该把graphci登录到 `Surface.Callback.surfaceCreated()`吗？如果是这样，当我调用方法时`postInvalidate()`，它会在`surfaceCreated()`内部调用吗？如果不是，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:02:44.877

对于 SurfaceView，您应该创建第二个类，它将创建一个用于管理游戏和渲染的后台线程，以便在渲染时它会锁定您的屏幕，因此没有任何东西可以中断它，并且您将把图形逻辑放在扩展 SurfaceView 的第一个类上. 下面的链接似乎用其中的示例代码详细解释了它。[http://www.mathcs.org/java/android/game_surfaceview.html](http://www.mathcs.org/java/android/game_surfaceview.html)

# android - 双重意图错误

> ID：16028464
> 
> 赞同：0
> 
> 时间：2013-04-16T03:51:27.280
> 
> 标签：android

我对下面的代码有疑问，我的欢迎屏幕上有两个按钮。每个按钮链接到不同的页面，我是否使用了错误的代码？大家可以指导我并纠正我吗？我是新的 android 应用程序开发。

```
package com.example.testing;

    import android.app.Activity;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.os.Bundle;
    import android.preference.PreferenceManager;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;

    public class WelcomeActivity extends Activity implements OnClickListener {

        private Boolean firstRun;
        //private Boolean accountRun;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            this.setContentView(R.layout.welcome);

            SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
            if(sp.getBoolean("firstRun", true)){
                PreferenceManager.setDefaultValues(this, R.xml.preferences, true);
                firstRun = true;
                SharedPreferences.Editor editor = sp.edit();
                editor.putBoolean("firstRun", false);
                editor.commit();
            } else {
                firstRun = false;
            }

            this.initViews();
        }

        private void initViews(){
            Button btnAccount = (Button)this.findViewById(R.id.btnAccount);
            btnAccount.setOnClickListener(this);
            Button btnContinue = (Button)this.findViewById(R.id.btnContinue);
            btnContinue.setOnClickListener(this);
        }

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent(this, testingquestion1.class);
            i.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
            i.putExtra("firstRun", firstRun);
            startActivity(i);

            Intent h = new Intent(this, testingquestion2.class);
            //h.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
            //i.putExtra("firstRun", firstRun);
            startActivity(h);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:05:46.760

您没有条件检查单击哪个按钮。发现要使用 View arg0。尝试以下代码并根据第一次运行的需要添加更多逻辑。

```
@Override
public void onClick(View v) {
    if (btnAccount.getId() == (((Button)v).getId())){
        Intent i = new Intent(this, testingquestion1.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        i.putExtra("firstRun", firstRun);
        startActivity(i);
    } else (btnContinue.getId() == (((Button)v).getId())){
        Intent i = new Intent(this, testingquestion1.class);
        startActivity(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:53:21.100

您不想在每个按钮单击两个按钮时运行 2 个意图。您需要一个 if 语句来查看按下了哪个按钮，并为 btnAccount 执行一个意图，为 btnContinue 执行一个意图。

# android - ViewPager 使用片段更新屏幕外视图而不是主视图

> ID：16028468
> 
> 赞同：1
> 
> 时间：2013-04-16T03:51:54.187
> 
> 标签：android, android-viewpager, adapter, fragment

**编辑 2** 这是我的适配器，以防它帮助任何人

```
 public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return sDrawables.length;
        }

        @Override
        public Fragment getItem(int position) {
            Bundle args = new Bundle();
            args.putInt(ImageViewFragment.POSITION_KEY, position);
            return ImageViewFragment.newInstance(args);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            String name = "";
            try{
            name = sNames[position];
            }catch(IllegalArgumentException e){
                name = "error";
            }
            return name;
        }

        public int getItemPosition(){
            return POSITION_NONE;
        }
    } 
```

**编辑** 基于 Sino Raj 刚刚改变的回应：

```
MainFragmentName fragment= (MainFragmentName )mViewPager.getChildAt(mPosition); 
```

为了：

```
ImageViewFragment fragment = (ImageViewFragment)mViewPager.getAdapter().instantiateItem(mViewPager, mViewPager.getCurrentItem()); 
```

我现在总是在寻呼机上更改下一个项目，如果我朝那个方向前进，则在右侧，否则在左侧。有什么想法吗？

我收到以下错误：

```
04-16 16:01:16.952: W/System.err(29027): java.lang.NullPointerException
04-16 16:01:16.952: W/System.err(29027):    at catalog.ImageViewFragment.onChangePicture(ImageViewFragment.java:165)
04-16 16:01:16.952: W/System.err(29027):    at catalog.MenuFragment.changeMainPic(MenuFragment.java:231)  
04-16 16:01:16.952: W/System.err(29027):    at catalog.MenuFragment.access$6(MenuFragment.java:224)
04-16 16:01:16.952: W/System.err(29027):    at catalog.MenuFragment$1.onClick(MenuFragment.java:106)
04-16 16:01:16.952: W/System.err(29027):    at android.view.View.performClick(View.java:4202)
04-16 16:01:16.952: W/System.err(29027):    at android.view.View$PerformClick.run(View.java:17340)
04-16 16:01:16.952: W/System.err(29027):    at android.os.Handler.handleCallback(Handler.java:725)
04-16 16:01:16.952: W/System.err(29027):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 16:01:16.952: W/System.err(29027):    at android.os.Looper.loop(Looper.java:137)
04-16 16:01:16.952: W/System.err(29027):    at android.app.ActivityThread.main(ActivityThread.java:5039)
04-16 16:01:16.952: W/System.err(29027):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 16:01:16.952: W/System.err(29027):    at java.lang.reflect.Method.invoke(Method.java:511)
04-16 16:01:16.952: W/System.err(29027):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-16 16:01:16.952: W/System.err(29027):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-16 16:01:16.952: W/System.err(29027):    at dalvik.system.NativeStart.main(Native Method) 
```

**结束编辑**

我一直在开发一个类似于 android 应用程序的目录，它相对简单，并且在片段支持 v4 上进行中继。

想法是在视图寻呼机上显示一组图像，视图寻呼机的子项是带有 ImageView 的片段。

View pager 包含在另一个片段上，该片段覆盖垂直滚动以显示主图片的不同图片，单击时主图片将变为所选图片。

一切都按预期工作，但主要图片更新功能。当单击垂直滚动视图中的缩略图时，主图片会发生变化，但问题是有时不是当前页面的主图片发生变化，而是会从屏幕外视图中更改。

我要更改图片的代码部分是这样的：

```
private void changeMainPic(String sName){

    try{
        if(mViewPager != null){
            String tName = sName.replace("_s.jpg", ".jpg");

            mainIv = (ImageView)mViewPager.getChildAt(mPosition).findViewById(R.id.mainImageView);

            InputStream is2 = getActivity().getAssets().open(tName);
            Bitmap bm2 = BitmapFactory.decodeStream(is2);
            mainIv.setImageBitmap(bm2);
            is2.close();
        }
    }catch(Exception e){
        e.printStackTrace();
        Log.e("Pictures","error on main iv "+e);
    }
} 
```

知道出了什么问题吗？如果您需要代码的任何其他部分，请告诉我。

非常感谢大家

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:17:35.147

换成`changeMainPic(String sName)`这样就行了

在活动内部，

```
private void changeMainPic(String sName){
    try{
        if(mViewPager != null){
            String tName = sName.replace("_s.jpg", ".jpg");
            MainFragmentName fragment= (MainFragmentName )mPagerAdapter.getChildAt(mPosition);
            fragment.onChangePicture(tName);//Call a public function inside of fragment

        }
    }catch(Exception e){
        e.printStackTrace();
        Log.e("Pictures","error on main iv "+e);
    }
} 
```

碎片内部，

```
ImageView mainIv=null;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) 
{   
      View view = inflater.inflate(R.layout.layout, container, false);
      mainIv=(ImageView)view.findViewById(R.id.mainImageView);
      return view;
}
public void onChangePicture(tName)
   {
            InputStream is2 = getActivity().getAssets().open(tName);
            Bitmap bm2 = BitmapFactory.decodeStream(is2);
            mainIv.setImageBitmap(bm2);
            is2.close();
   } 
```

**编辑** --2 在您的活动中实现 OnPageChangeListener（即，`Activity implements OnPageChangeListener`），然后您将获得覆盖函数，

```
public void onPageScrollStateChanged(int arg0)
    {}
    public void onPageScrolled(int arg0, float arg1, int arg2)
    {}
    public void onPageSelected(int position) 
    {
        mPosition=position;
    } 
```

**编辑** --3 编辑适配器...

```
public static class MyAdapter extends FragmentPagerAdapter {
        private FragmentManager fragmentManager=null;
        public MyAdapter(FragmentManager fm) {
            super(fm);
            fragmentManager=fm;
        }

        @Override
        public int getCount() {
            return sDrawables.length;
        }

        @Override
        public Fragment getItem(int position) {
            Bundle args = new Bundle();
            args.putInt(ImageViewFragment.POSITION_KEY, position);
            fragmentManager.beginTransaction().commitAllowingStateLoss();
            return ImageViewFragment.newInstance(args);
        }
        @Override
        public CharSequence getPageTitle(int position) {
            String name = "";
            try{
            name = sNames[position];
            }catch(IllegalArgumentException e){
                name = "error";
            }
            return name;
        }

        public int getItemPosition(){
            return POSITION_NONE;
        }
    } 
```

# winapi - 如何在 WIN32 API 中捕获文件夹监控？

> ID：16028469
> 
> 赞同：1
> 
> 时间：2013-04-16T03:51:54.347
> 
> 标签：winapi, directory

我想捕捉目录中的任何变化：例如：添加新文件夹、重命名文件夹、删除文件夹......这是一个 WIN32 项目而不是 WIN32 控制台应用程序。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:05:23.687

有一个 Win32 API - FindFirstChangeNotification 用于监视目录中的更改。MSDN 上还有一个代码示例。请参阅下面的链接

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261(v=vs.85).aspx)

# java - Android：SQLite 查询匹配后 Intent 不启动

> ID：16028471
> 
> 赞同：0
> 
> 时间：2013-04-16T03:52:06.940
> 
> 标签：java, android, alarmmanager

我正在尝试在我的书签/浏览器历史记录中搜索特定 URL，然后在找到匹配项后开始新的意图。问题是 - 新意图永远不会启动 - 尽管浏览器历史记录和书签都包含正在查询的值。

任何想法为什么会发生这种情况？

```
import com.parse.ParseObject; 
import android.app.AlertDialog;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.database.Cursor;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.TrafficStats;
import android.net.Uri;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.provider.Browser;
import android.util.Log;
import android.widget.Chronometer;
import android.widget.TextView;
import android.widget.Toast;

public class Service_class extends Service {
       String Dirty1 = "www.playboy.com";
        String Dirty2 = "www.penthouse.com";
        String Dirty3 = "www.pornhub.com";
        String Dirty4 = "www.playboy.com";
        String Dirty5 = "www.playboy.com";
        String Dirty6 = "www.playboy.com";
        String Dirty7 = "www.playboy.com";
        String Dirty8 = "www.playboy.com";
        String Dirty9 = "www.playboy.com";
        String Dirty10 = "www.playboy.com";

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
        String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
                Browser.BookmarkColumns.URL };
                Cursor cursor = getContentResolver().query(android.provider.Browser.BOOKMARKS_URI,
                        projection, null, null, null);
                String urls = "";
                if (cursor.moveToFirst()) {
                String url1 = null;
                String url2 = null;
                do {
                String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));

                if (url.toLowerCase().contains(Dirty1)) {
                } else if (url.toLowerCase().contains(Dirty2)) {
                } else if (url.toLowerCase().contains(Dirty3)) {
                } else if (url.toLowerCase().contains(Dirty4)) {
                } else if (url.toLowerCase().contains(Dirty5)) {
                } else if (url.toLowerCase().contains(Dirty6)) {
                } else if (url.toLowerCase().contains(Dirty7)) {
                } else if (url.toLowerCase().contains(Dirty8)) {
                } else if (url.toLowerCase().contains(Dirty9)) {
                } else if (url.toLowerCase().contains(Dirty10)) {
                //if (url.toLowerCase().contains(Filthy)) {
                urls = urls
                + cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
                + url + "\n";
                Intent intent2 = new Intent(Service_class.this, Warning.class);
                Service_class.this.startActivity(intent);
                startActivity(intent2);
                }
                } while (cursor.moveToNext()); 
            //  tv.setText(urls);

    }

        return START_STICKY;
    }

    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onCreate() {
        super.onCreate();

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:59:14.980

如果它与dirty10 匹配，您只会运行该活动。这可能是问题1。

更好的方法可能是执行 rawQuery 并在 WHERE 子句中使用 LIKE 语句。

你很快就会遇到的另一个问题是，如果你有多个点击（在修复你的 if/elseifs 之后）你会启动多个活动，这不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:01:47.547

它应该是

```
 if (url.toLowerCase().contains(Dirty1) || url.toLowerCase().contains(Dirty2) || ....)
 {
     Intent intent2 = new Intent(Service_class.this, Warning.class);
     intent2.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     startActivity(intent2);
     break;
 } 
```

# php - MySql 将列合并到表中

> ID：16028475
> 
> 赞同：-2
> 
> 时间：2013-04-16T03:52:15.277
> 
> 标签：php, mysql, sql, select

我有两张桌子

表格1

```
id | name | Description
---+------+------------
1  | A    |  123
2  | B    |  456
3  | C    |  789 
```

表 2

```
id | price  |
---+--------+
1  | 12     |  
2  | 11     |  
3  | 13     | 
```

我想将描述放入 table2

```
id | price  | Description
---+--------+------------
1  | 12     |  123
2  | 11     |  456
3  | 13     |  789 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:54:46.467

`INNER JOIN`满足您的需求，

```
SELECT  a.ID, b.Price, a.Description
FROM    Table1 a
        INNER JOIN Table2 b
            ON a.ID = b.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/4cbb0/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:55:36.647

您不能在不编辑架构的情况下将描述列“放入”table2 中，但是您可以使用连接来获取结果表以满足您的需求。

`SELECT id, price, Description FROM table2 NATURAL JOIN table1`

# jsp - servlet 不调用 struts2，web.xml 冲突

> ID：16028477
> 
> 赞同：0
> 
> 时间：2013-04-16T03:52:34.097
> 
> 标签：jsp, servlets, struts2, web.xml

这是我的`web.xml`结构：

```
 <servlet>
        <servlet-name>myServlet</servlet-name>
        <servlet-class>com.test.servlet.MyServlet</servlet-class>       
    </servlet>

    <servlet-mapping>
        <servlet-name>MyServlet</servlet-name>
        <url-pattern>/testServlet/*</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

   <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>*.action</url-pattern>
    </filter-mapping>

<filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

在 Jsp 中，我调用了如下所示的 servlet。

```
<img src="${pageContext.request.contextPath}/testServlet?id=${someID}" 
```

问题是当我像下面这样使用时，调用了 servlet。当我更改`*.jsp`为`/*`in fliter mapping 时，它无法调用 servlet。

```
 <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>*.jsp</url-pattern>
    </filter-mapping> 
```

但是当我使用时`*.jsp`，使用struts2-dojo插件的日历不会出现在jsp中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:47:31.323

您可以从 Struts 2 的处理中排除特定的请求路径

[防止 Struts 处理请求](http://struts.apache.org/development/2.x/docs/static-content.html#StaticContent-PreventingStrutsfromHandlingaRequest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:35:25.733

您需要排除`myServlet`映射，以便它不会从 struts 的过滤器调度程序传递。

在你的 struts.xml 添加：

`<constant name="struts.action.excludePattern" value="/ServletToExcludeFromStruts*"/>`

对于多个排除项，该值也以逗号分隔。

请参阅[http://struts.apache.org/2.2.1/docs/webxml.html](http://struts.apache.org/2.2.1/docs/webxml.html) ..

来自[此链接](https://stackoverflow.com/questions/3843548/filter-mapping-for-everthing-to-struts2-besides-one-servlet)的帮助。

# php - 使用 ajax 和 GET 请求实现搜索而无需重新加载（例如 Amazon.com）

> ID：16028482
> 
> 赞同：2
> 
> 时间：2013-04-16T03:53:27.383
> 
> 标签：php, jquery, ajax, get

AJAX 新手。有点不确定如何在不重新加载整个页面的情况下提交 GET 请求。

1.  用户访问`www.example.com/products/`
2.  类型“园艺工具”
3.  结果与 URL 更改一起`www.example.com/products/results?search=Gardening+Tools`加载，无需重新加载页面即可完成。
4.  任何用户都可以使用该 URL`www.example.com/products/results?search=Gardening+Tools`并获得相同的结果。

**注意：**要点 4 很重要。只是将参数添加到 URL 以使其看起来像这样，这一定不是一些 hacky 方式。一些用户可能想要添加书签（除此之外，我`GET`首先使用了请求）。

* * *

**所以这是我的代码的基本表示，适用于`POST`：**

**表格**：你的基本提交使用`POST`，我想要这个`GET`。

```
<form id="submit" action="" method="POST">
   <input type="text" name="search"/>
   <button type="submit"></button>
</form> 
```

**jQuery**：使用`.ajax()`我们`POST`向`/products/results.php`

```
$('form#submit').submit(function (e) {
e.preventDefault();
$.ajax({
        type: 'POST',
        url: 'results.php',
        data: "search="+encodeURIComponent($('input[name="search"]').val()),
        dataType: 'json',
        success: function(data) {
            //inject some html into page
        }
    });
 } 
```

**results.php** :（也只是为了确保我在这里免受 SQL 注入的影响？魔术引号已关闭）。

```
$query = $_POST['search'];
$query = mysql_real_escape_string($query);
$query = htmlspecialchars($query);
//you get the point: straight forward db connect, query and return as json 
```

* * *

因此，我尝试将所有`POST`s更改为`GET`s ，但没有成功。有没有我不理解的概念？

我认为这可能与`$('form#submit').submit(function (e)`和 preventDefault() 函数有关。但是 preventDefault 是停止页面重新加载所必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:01:35.690

```
<input type="text" name="search" id="search"/> 
```

和

```
$('form#submit').submit(function (e) {
e.preventDefault();
var search = $('#search').val();
$.ajax({
        type: 'POST',
        url: 'results.php',
        data: {search:search},
        dataType: 'json',
        success: function(data) {
            //inject some html into page
        }
    });
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T04:16:53.570

让我举一个非常简单的例子。

**形式：** - 此处不需要使用 AJAX 的操作和方法

```
 <form id="form1">
       <input type="text" class='search' name="search"/>
       <button type="button" onclick="funcAjax()">Load Results</button>
 </form> 
```

**jQuery:** - 这里我们将定义函数“funcAjax()”。

**xmlhttp.responseText**是从您的 php 页面返回的值

```
function funcAjax()
{
    //value to be searched
    var searchVal= $('.search').val();
    var xmlhttp;
    if (window.XMLHttpRequest){
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else{
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
             document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
             //xmlhttp.responseText is the value returned from your php page
        }
    }

    xmlhttp.open("GET","results.php?q="+searchVal,true);
    xmlhttp.send();
} 
```

**结果.php：**

```
$query = $_GET['q'];
//rest follow your code 
```

# java - 自动更新 java 应用程序

> ID：16028488
> 
> 赞同：6
> 
> 时间：2013-04-16T03:53:49.920
> 
> 标签：java, deployment, auto-update

我正在构建可以从网上免费下载的 Java 应用程序。我想在修复错误或增强应用程序的情况下添加自动更新功能。对于自动更新，我将程序分成 3 个单元。

1.  Base - 非常小的代码，将检查第二个单元的新版本（上传器）更新并运行它
2.  Uploader 将检查项目的新更新并下载任何更新并运行它
3.  主程序 - 这包含主应用程序并包含所有模块。

我这样做有两个原因：

1.  我不希望客户端在有任何更新的情况下重新启动应用程序
2.  由于应用程序仍然是新的，我不希望出现用户无法运行或更新应用程序的任何问题，因此 Base 非常小，几乎没有错误。

是否有通用的 Java 方法/第三方来进行自动更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T04:00:12.047

> [Java Web Start](https://stackoverflow.com/tags/java-web-start/info) (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、**自动更新（*包括延迟下载和更新的编程控制）、***按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T07:55:17.670

You can try to use OSGi.

If you will plan properly modular structure of the application, there is a chance that when you update the application modules you do not have to restart the application. You will only need to restart the modules, which will depend on the updated module. Reset dependent modules will take place within the application without restarting the application.

I prefer working with Felix OSGI applications.

[Apache Felix](http://felix.apache.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-30T21:19:05.590

虽然 Java Webstart 正是解决 OP 问题的技术，但同时 Oracle 从其 Java 版本中删除了 Webstart。

[幸运的是， Open Webstart](https://openwebstart.com/)弥补了这一差距：

*Java Web Start (JWS) 在 Java 9 中被弃用，从 Java 11 开始，Oracle 从其 JDK 发行版中删除了 JWS。这意味着安装了最新版本 Java 的客户端不能再使用基于 JWS 的应用程序。由于对 Java 8 的公开支持已于 2019 年第二季度结束，因此公司不再获得 Java Web Start 的任何更新和安全修复程序。*

*这就是我们决定创建 OpenWebStart 的原因，它是 Java Web Start 技术的开源重新实现。我们的替代品提供了 Java Web Start 和 JNLP 标准最常用的功能，使您的客户可以继续使用基于 Java Web Start 和 JNLP 的应用程序而无需任何更改。*

# java - Java apache commons collections原语导入问题

> ID：16028492
> 
> 赞同：0
> 
> 时间：2013-04-16T03:54:28.013
> 
> 标签：java

我在 Eclipse 上添加了 commons-primitives-1.0.jar 作为外部可执行 jar。
所以我能够`import org.apache.commons.collections.primitives.ArrayUnsignedShortList;`

我有一个功能

```
private void start() {

    _nexts = new ArrayList(_iterators.size());

    for (int i = 0, m = _iterators.size(); i < m; i++) {
        _nexts.add(null);
    }
    _nextSet = new BitSet(_iterators.size());
    _prevFrom = new ArrayUnsignedShortList(); < ---give me error here
} 
```

它说，

> 构造函数 ArrayUnsignedShortList() 不可见

我不太确定如何解决这个错误，因为当我查看 时`ArraysUnsignedShortList.java`，它确实有构造函数。

帮助？

[http://commons.apache.org/proper/commons-primitives/apidocs/org/apache/commons/collections/primitives/ArrayUnsignedShortList.html](http://commons.apache.org/proper/commons-primitives/apidocs/org/apache/commons/collections/primitives/ArrayUnsignedShortList.html)

public ArrayUnsignedShortList() 构造一个具有默认初始容量的空列表。

^ 所以我应该可以调用它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:02:54.717

它应该可以正常工作，不确定您是否拥有正确的库、正确的导入，并且没有任何东西可以干扰您的代码：

如果使用 Maven：

```
<dependency>
    <groupId>commons-primitives</groupId>
    <artifactId>commons-primitives</artifactId>
    <version>1.0</version>
</dependency> 
```

进口 ：

```
import org.apache.commons.collections.primitives.ArrayUnsignedShortList; 
```

代码 ：

```
ArrayUnsignedShortList myArray = new ArrayUnsignedShortList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:10:30.563

[从这里](http://www.java2s.com/Code/Jar/c/Downloadcommonsprimitives10jar.htm)下载 Jar

将 jar 导入您的项目并使用它，工作正常。

```
ArrayUnsignedShortList obj = new ArrayUnsignedShortList(); 
```

# android - 第一个 Android 应用程序 - 循环浏览列表，一次一个

> ID：16028493
> 
> 赞同：1
> 
> 时间：2013-04-16T03:54:39.490
> 
> 标签：android

我正在启动我的第一个真正的 Android 应用程序，并且我有一些初学者问题。
我是一位经验丰富的 C# 开发人员，但这是我第一次使用 Android。

我已经设计了屏幕，我从第一个开始。似乎应该有一种直接的方式来做我想做的事......

数据模型非常简单：它是一个对象列表，每个顶级对象都包含一个子对象列表。我希望第一个屏幕具有当前顶级对象以及上一个和下一个按钮；仅显示当前顶层。该顶层的子对象也会显示出来。

当按下下一个或上一个按钮时，我想循环到下一个/上一个顶级对象，当然刷新子对象列表。

我认为这可以通过两个按钮、一个 TextView 和一个 ListView 或 GridView 来完成，但我想知道是否有更好的方法 - 也许是一个我不知道的控件。感觉我应该有一个适配器并将控件绑定到这个适配器。

此外，可以在视图中执行所有这些操作吗？片段在这里似乎有点过分了。最后，有一个简单的对象层次结构是否合理，例如：

```
public class SubObject {
    private String _name;
    ... other properties, get/set methods, etc.
}

public class TopLevel {

    private String _name;
    private List<SubObject> _subObjects;
    ....
} 
```

感谢任何帮助、建议或示例！谢谢！

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:03:54.073

我假设您的意思是可以在 Activity 中执行所有这些操作（视图是屏幕上的单个项目 - 单个按钮、单个文本视图等）。是的，这很好，如果您不想拥有片段给您的单独屏幕区域，您就不要使用它们。

Android 并没有你想象中的适配器。它拥有的唯一适配器用于将位置映射到 ListView/GridView/ViewPager 中的视图。它根本不用于其他视图。但你似乎有正确的做事方式。您也可以使用 Fragments 和 ViewPager 来执行此操作，然后您将在下一个/上一个按钮上切换 Fragment，每个 Fragment 将自行初始化一次。但这是一个偏好问题，两者都没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:35:39.527

在 Android 中，多级数据显示的推荐 UI 模式是使用主细节（和递归子主细节）布局[，如此处所述。](http://developer.android.com/training/design-navigation/descendant-lateral.html)如果您选择遵循此模式，则片段是必需的，以及完整实施的 a[`ListView`](http://developer.android.com/reference/android/widget/ListView.html)和 a [`FragementPagerAdapter`](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)。

但是，如果您选择使用简单的布局，例如：标题和带有下一个和上一个按钮的内容视图，则不需要片段。您可以在按钮导航的标题和内容视图中替换数据。对于数据，您可以使用数据库游标或您自己的数据模型类。

# javascript - 如何在另一个匿名函数中扩展函数？

> ID：16028498
> 
> 赞同：0
> 
> 时间：2013-04-16T03:54:59.933
> 
> 标签：javascript, jquery

我只有以下代码：

```
(function($,undefined){
    function Abc(){
      function sayHello(){
          console.log("I am Abc");
      }
    }
})(jQuery); 
```

我的问题是，如何添加更多方法`Abc`或覆盖`sayHello`？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:55:54.973

你不能。它是一个局部变量，对`Abc`. `Abc`如果这样写，它不能被覆盖。

如果你真的在制作方法，可能是这样的：

```
function Abc() {
    this.sayHello = function() {
        console.log("I am Abc");
    };
} 
```

然后你可以像这样扩展和覆盖它：

```
function Cba() {
    Abc.apply(this, arguments);
    this.sayHello = function() {
        console.log("I am Cba");
    };
} 
```

# java - 为什么“错误”的实例变量会被修改？

> ID：16028502
> 
> 赞同：0
> 
> 时间：2013-04-16T03:55:30.380
> 
> 标签：java, inheritance

我很困惑，因为我认为这指的是调用该方法的当前对象。
那么为什么在调用继承方法时我的对象中的实例变量 x 没有改变呢？超类：

```
public class SuperBoss 
{
  int x = 50;

  public void changeX()
  {
   this.x  = 20;
  }
} 
```

子类：

```
public class Boss extends SuperBoss
{
 int x = 10;
 public static void main(String[] args)
 {
  Boss b = new Boss();
  b.changeX();
  System.out.println(b.x); //prints 10
 }
} 
```

为什么它打印 10 而不是 20？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T03:59:34.753

*简短的回答：因为字段访问在 Java 中不是虚拟的。*

* * *

SuperBoss 宣布 x。

当 Boss 声明 x 时，x 不会成为“虚拟”字段 - 它会成为隐藏在超类字段中的新字段。

当你在你的 Boss 上调用 changeX，这是 SuperBoss 中的一个方法，SuperBoss 不知道 Boss.x 并且访问 x 不是虚拟的，所以它只是访问 SuperBoss.x。

如果需要对 x 的访问是虚拟的，则需要提供一个 getX 方法，并覆盖 Boss 中的 getX 方法。现在当 SuperBoss 的方法调用 getX 时，它会重新路由到 Boss 中的 getX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:02:19.863

当您`int x = 10`在子类中声明时，您会在每个人查看子类时隐藏超类*变量*。

当超类调用`this.x`时，它不会查看子类，因此可以获取它自己的变量版本。

变量在运行时实际上并不是通过它们的代号存储的，因此像这样重新定义它们是行不通的 -`SuperBoss#x`将解析为符号表中的一个符号并`Boss#x`解析为另一个符号，因此它们仍然存在，如果你知道如何对付他们。

# java - 如何在 Java 中重新启动应用程序？

> ID：16028504
> 
> 赞同：1
> 
> 时间：2013-04-16T03:55:44.203
> 
> 标签：java, actionlistener, restart

我的应用程序完成执行后，我需要重新启动它才能再次重用它。我的应用程序有多个线程（以及一些 chromedriver.exe 问题）。因此，我不希望创建额外的线程来重新启动它。目前我只是关闭 GUI 窗口，然后通过双击**application.exe**文件重新打开我的应用程序。

我很好奇是否有一种方法可以将**actionListener**添加到可以关闭并重新打开我的应用程序的**“RESTART”按钮？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:07:00.257

试试这个代码

```
 Runtime.getRuntime().exec("my App");
 System.exit(0); 
```

# java - java中的非覆盖方法？

> ID：16028509
> 
> 赞同：0
> 
> 时间：2013-04-16T03:56:05.160
> 
> 标签：java, class, methods, subclass, overriding

我理解如果超类方法被声明为公共的，它们的概念就会被覆盖。但是，我想知道是否有一种方法可以调用超类的方法而不是子类的方法。例如，`toString`在超类下将打印出某些数据字段，而`toString`在子类下将打印出另一组数据字段。我想调用这两种方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:59:42.127

从子类的方法（正在被覆盖）中，您可以调用`super.toString()`以调用超级版本，然后在下一个语句中调用子版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T04:00:38.527

要从子类中调用超类的 toString() 方法，您可以调用

```
super.toString(); 
```

所以如果你想让一个对象的`toString()`方法同时调用它的超类的`toString()`方法，你会这样做

```
String str = // whatever the toString() of this object is
return str + super.toString(); 
```

快！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:00:49.223

你需要调用 childe 的 toString()，child 会调用 super.toString();

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T04:10:34.347

您始终可以从子类调用 super.toString() 来调用超类方法。如果没有显式调用“super”，您将调用“last”覆盖版本，这称为[polymorphism](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)。

# limit - 我正在使用 FQL 来计算给定网页上的所有评论……但仅限于 25 条？

> ID：16028511
> 
> 赞同：0
> 
> 时间：2013-04-16T03:56:14.777
> 
> 标签：limit, facebook-fql, facebook-comments

在 $PfullURL 是一个网页的地方，我使用以下方法来获取我认为的所有评论，这样我就可以每天解析数据以获得唯一的用户评论。

```
$fql_query_url = 'https://graph.facebook.com/comments/?ids='.$PfullURL;
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode($fql_query_result, true); 
```

这将我的返回限制为 25，并且我不确定如何重新编写此查询，因此我得到了页面上的所有评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:21:21.067

只需添加一个`&limit=200`到您的`$PfullURL;`

# apache-karaf - karaf/servicemix 中的 Servlet

> ID：16028513
> 
> 赞同：1
> 
> 时间：2013-04-16T03:56:39.447
> 
> 标签：apache-karaf, apache-servicemix

在 karaf/servicemix 中部署一个简单的 .war 文件时出现以下错误。如果我遗漏了什么，请告诉我。

错误：

```
java.lang.ClassNotFoundException: app.web.servlet.ConnectServlet not found by JDBCWebDemo [207]
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:787)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)[org.apache.felix.framework-3.0.9.jar:]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)[:1.6.0_26]
    at org.apache.felix.framework.ModuleImpl.getClassByDelegation(ModuleImpl.java:645)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.Felix.loadBundleClass(Felix.java:1619)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.BundleImpl.loadClass(BundleImpl.java:900)[org.apache.felix.framework-3.0.9.jar:]
    at org.ops4j.pax.swissbox.core.BundleClassLoader.findClass(BundleClassLoader.java:176)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.core.BundleClassLoader.loadClass(BundleClassLoader.java:194)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)[:1.6.0_26]
    at org.ops4j.pax.web.extender.war.internal.RegisterWebAppVisitorHS.newInstance(RegisterWebAppVisitorHS.java:221)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7] 
```

代码如下：

清单.MF：

```
Manifest-Version: 2 
Bundle-SymbolicName: JDBCWebDemo 
Bundle-Version: 2.3 
Bundle-ClassPath: WEB-INF/classes 
Import-Package: javax.servlet,javax.servlet.http 
```

网页.xml：

```
<web-app ...>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
  <servlet>
    <description></description>
    <display-name>ConnectServlet</display-name>
    <servlet-name>ConnectServlet</servlet-name>
    <servlet-class>app.web.servlet.ConnectServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ConnectServlet</servlet-name>
    <url-pattern>/ConnectServlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:53:10.257

您的 OSGi 包很可能需要导出具有 servlet 代码的包，例如在您需要的 MANIFEST.MF 文件中

```
Export-Package: app.web.servlet 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:39:13.770

如果它不在你的战争中，你需要导入正确的包。

```
Import-Package: app.web.servlet 
```

或者，如果它位于 lib 文件夹中的某个库中，则需要确保所有这些 jar 都包含在类路径中：

```
Bundle-ClassPath: WEB-INF/classes, WEB-INF/lib/jar1.jar, .... 
```

# python - 从数组中选择特定元素

> ID：16028518
> 
> 赞同：2
> 
> 时间：2013-04-16T03:57:35.580
> 
> 标签：python, numpy

我有一个数组：

```
 X = [[5*,  0,     0,      0,      0,      0,      0,      0],
       [9*,  6,     0,      0,      0,      0,      0,      0],
       [4,   6*,    8,      0,      0,      0,      0,      0],
       [0,   7*,    1,      5,      0,      0,      0,      0],
       [9,   3,     3*,     4,      4,      0,      0,      0],
       [4,   5,     5*,     6,      7,      5,      0,      0],
       [4,   5,     6,      8*,     7,      7,      8,      0], 
       [4,   7,     8,      9*,     7,      3,      9,      6]] 
```

我想选择并附加所有由 * 标记的值。该方法基本上是从第 0 行和第 1 行中选择第 0 个元素......从第 2 行和第 3 行中选择第 1 个元素......依此类推。

结果集应该是：

```
 Result = ((X[0][0], (X[1][0]), (X[2][1], X[3][1]), (X[4][2], X[5][2]), (X[6][3], X[7][3])) 
```

可以写成：

```
 Result = ((X[n+0][n], (X[n+1][n]), (X[n+2][n+1], X[n+3][n+1]), (X[n+4][n+2], X[n+5][n+2]), (X[n+6][n+3], X[n+7][n+3]))

  Where n = 0 
```

我怎么做？我已经应用了这个，但它不起作用：

```
 Result = []

 for a in X:
     Result.append([[[ a[i][j] ] for i in range(0,8)] for j in range(0,8)]) 
```

但没有结果。有什么猜测吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:16:52.417

由于 numpy 标签，我想我会添加这个：

```
import numpy as np
X = np.array([[5 ,  0,     0,      0,      0,      0,      0,      0],
              [9 ,  6,     0,      0,      0,      0,      0,      0],
              [4,   6 ,    8,      0,      0,      0,      0,      0],
              [0,   7 ,    1,      5,      0,      0,      0,      0],
              [9,   3,     3 ,     4,      4,      0,      0,      0],
              [4,   5,     5 ,     6,      7,      5,      0,      0],
              [4,   5,     6,      8 ,     7,      7,      8,      0], 
              [4,   7,     8,      9 ,     7,      3,      9,      6]])
i = np.array([0, 1, 2, 3, 4, 5, 6, 7])
j = np.array([0, 0, 1, 1, 2, 2, 3, 3])

result = X[i, j]
print result
# [5 9 6 7 3 5 8 9] 
```

要在一般情况下生成 i 和 j，您可以执行以下操作：

```
n = 8
i = np.arange(n)
j = np.arange(n) // 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:02:52.080

尝试这个：

```
from itertools import chain, count, tee

lst = [row[i] for row, i in zip(array, chain.from_iterable(zip(*tee(count(), 2))))] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:03:47.940

`X`如果其中有偶数个列表，这将起作用：

```
>>> [(X[2*i][i], X[2*i+1][i]) for i in range(len(X)//2)]
[(5, 9), (6, 7), (3, 5), (8, 9)] 
```

如果您不介意扁平列表，那么将适用于`X`任何长度：

```
>>> [lst[idx//2] for idx, lst in enumerate(X)]
[5, 9, 6, 7, 3, 5, 8, 9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T05:48:25.693

在 Numpy 中：

```
import numpy as np
x = [['5*','0 ','0 ','0 ','0 ','0 ','0 ','0 '],
     ['9*','6 ','0 ','0 ','0 ','0 ','0 ','0 '],
     ['4 ','6*','8 ','0 ','0 ','0 ','0 ','0 '],
     ['0 ','7*','1 ','5 ','0 ','0 ','0 ','0 '],
     ['9 ','3 ','3*','4 ','4 ','0 ','0 ','0 '],
     ['4 ','5 ','5*','6 ','7 ','5 ','0 ','0 '],
     ['4 ','5 ','6 ','8*','7 ','7 ','8 ','0 '],
     ['4 ','7 ','8 ','9*','7 ','3 ','9 ','6 ']]

a=np.array(x) 
```

然后做一个列表理解和/或 Numpy 切片来获取项目：

```
[a[i:,j][:2].tolist() for i,j in zip(range(0,7,2),range(0,7,1))] 
```

或者

```
[a[i*2:,i][:2].tolist() for i in range(len(a)//2)] 
```

或者

```
a[range(len(a)),np.repeat(range(len(a)//2),2)].reshape(4,2).tolist() 
```

无论如何，输出是：

```
[['5*', '9*'], ['6*', '7*'], ['3*', '5*'], ['8*', '9*']] 
```

# html - 使html浮动元素占用div内的空间

> ID：16028519
> 
> 赞同：11
> 
> 时间：2013-04-16T03:57:38.533
> 
> 标签：html, margin

我有一个浮动`<div>`在另一个里面`<div>`，包含的 div 有一个黑色边框......

问题是浮动`<div>`实际上并没有占据它的高度（大约 600 像素）左右，因此`<div>`带有边框的包含最终像 20 像素一样高，边框直接穿过内部 div。

我如何让内部 div 占据它应该占据的空间，同时仍然让它浮动？

这是我的来源：

```
<div style="border:1px solid black">
    <div style="float:left;height:200px;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-16T04:07:52.460

使用[micro-clearfix](http://nicolasgallagher.com/micro-clearfix-hack/)方法：

```
<div style="border:1px solid black" class="cf"> 
  <div style="float:left;height:200px;"> 
  </div> 
</div> 
```

CSS

```
.cf:before,
.cf:after {
  content: " "; /* 1 */
  display: table; /* 2 */
}

.cf:after {
  clear: both;
}

/**
* For IE 6/7 only
* Include this rule to trigger hasLayout and contain floats.
*/
.cf {
  *zoom: 1;
} 
```

# visual-studio-2012 - 意外添加了错误 Team Foundation Service 项目的解决方案

> ID：16028520
> 
> 赞同：1
> 
> 时间：2013-04-16T03:58:02.667
> 
> 标签：visual-studio-2012, azure-devops

我创建了一个新项目，不小心将其添加到错误的 TFS 文件夹中。

我去了**Change Source Control**并单击**Unbind**。它给出了这个警告，我说好的：

> 您即将解除一个或多个项目的绑定。完成此操作后，您将无法再访问这些项目的源代码管理。

但是现在，当我再次尝试**将解决方案添加到源代码控制...**时，它会自动添加到错误的 TFS 项目中。

我还尝试删除解决方案并重新创建它，但如果我使用名称 name 它仍然会自动添加到不正确的 TFS 项目中。

我可以用不同的名称开始一个新项目，但我想知道如何解决这个问题。

如何更改我正在使用的 TFS 项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T23:22:18.793

要更正此问题，我必须转到**File** > **Source Control** > **Advanced** > **Workspaces...**并单击我的帐户的**Edit**。

这会打开**Edit Workspace**窗口，其中列出了所有受控项目、它们的源代码管理文件夹和本地文件夹。 ![Visual Studio 2012 编辑工作区对话框](https://i.stack.imgur.com/gDlNt.png)

从那里可以编辑路径或完全删除项目。

# android - 在 REVERSE_PORTRAIT 和 REVERSE_LANDSCAPE 模式下启动模拟器，即 UPSIDE-DOWN 模式

> ID：16028524
> 
> 赞同：2
> 
> 时间：2013-04-16T03:58:11.360
> 
> 标签：android

如何在 linux 上以 REVERSE_PORTRAIT 和 REVERSE_LANDSCAPE 模式启动模拟器？Ctrl+F11 和 Ctrl+F12 仅适用于 NORMAL PORTRAIT 和 NORMAL LANDSCAPE 模式。请回答。即使 windows 和 mac 用户也需要这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:07:17.217

单击“Android 虚拟设备管理器”进行 Eclipse。然后从 Android 虚拟设备中更改选项卡设备定义。您将看到一个“新设备”按钮单击它。最后，设置所需的分辨率 (px)。

此外，我链接了一个博客，您可以在下面看到一个指南图片。 [http://blog.naver.com/oephm/100186089669](http://blog.naver.com/oephm/100186089669)

我希望它会对你有所帮助..:D 如果你不能很好地看到这张照片，我会上传一张质量更好的照片。

# c++ - 为什么 std::weak_ptr 没有移动构造函数或移动赋值运算符？

> ID：16028530
> 
> 赞同：3
> 
> 时间：2013-04-16T03:58:59.090
> 
> 标签：c++, visual-c++, visual-studio-2012, c++11, move-semantics

通过 boost 的 1.53 头文件中的weak_ptr，我惊讶地发现移动赋值和移动构造函数被实现了，尽管它们没有被记录。从这个[文档](http://en.cppreference.com/w/cpp/memory/weak_ptr/weak_ptr)中，没有任何要求 std::weak_ptr 提供移动功能。

通过 Visual Studio 2012 的weak_ptr 实现，我没有注意到在weak_ptr 中声明的任何明显的移动操作，尽管它们可能隐藏在继承之后。但是，此代码导致监视窗口报告指针的一个共享引用和两个弱引用，这使我相信weak_ptr 未启用移动：

```
std::shared_ptr<int> ptr(std::make_shared<int>(5));
std::weak_ptr<int> weakptr(ptr);
std::weak_ptr<int> movedWeakPtr(std::move(weakptr)); 
```

std::weak_ptr 不提供移动功能是否有充分的理由？如果不是，是否应该将weak_ptr 视为可移动类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T04:20:48.353

*根据定义*，每种可复制的类型都是可移动的。`weak_ptr`是可复制的，因此它是可移动的。

`weak_ptr` *当然可以*有一个移动构造函数。但这只是为了进行相对较小的优化。这可能是标准委员会的疏忽。

# excel - MS Excel VBA - 选择多个不同的动态范围

> ID：16028531
> 
> 赞同：0
> 
> 时间：2013-04-16T03:59:00.707
> 
> 标签：excel, vba, range

我需要复制不同列中的数据，这些列不相邻并且行数可变（但该变量的每列值相同）。

到目前为止，我的代码如下：

```
 Set MyXL = CreateObject("Excel.Application")
 MyXL.Workbooks.Add
 MyXL.Worksheets(1).Name = SheetName 

 Set shtData = Worksheets("Data")
 rngDataRowCount = shtData.Range("A1048576").End(xlUp).Row
 Set rngData = shtData.Range("A1:I" & rngDataRowCount)
 rngData.Copy

 MyXL.Worksheets(SheetName).Activate
 MyXL.Worksheets(SheetName).Paste
 Range("A1").Select 
```

只要列彼此相邻但不允许我添加其他列，它就可以正常工作。

我希望我可以做类似的事情：

```
 Set rngData = shtData.Range("A1:I, N1:N, P1:R" & rngDataRowCount) 
```

但这个说法失败了。或者有什么方法可以设置多个范围然后附加到剪贴板？当然，任何帮助都会受到赞赏。

**编辑：**为了澄清我想要实现的目标，假设我有下表：

```
 _________________________________________________________
 | col1 | col2 | col3 | col4 | col5 | col6 | col7 | col8 |
 _________________________________________________________
 | q    | w    | e    | r    | t    | y    | u    | i    |
 _________________________________________________________
 | q    | w    | e    | r    | t    | y    | u    | i    |
 _________________________________________________________ 
```

我希望能够选择一个范围，比如 col1、col2、col5 和 col8，以便它一次性复制这些列中的所有填充单元格，以便粘贴给我这个：

```
 _____________________________
 | col1 | col2 | col5 | col8 |
 _____________________________
 | q    | w    | t    | i    |
 _____________________________
 | q    | w    | t    | i    |
 _____________________________ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:52:26.753

我认为这对您来说可能是一个想法，只是为了使用循环。

**编辑清楚：**因此，您将分别复制每一列。将保留列到副本的顺序。如果您保持不变的目标范围规则，则每列都将以相同的顺序复制到适当的范围中。

```
Sub Answer()
    Dim shtData As Worksheet
    Set shtData = Worksheets("Data")
    Dim rngDataRowCount
    rngDataRowCount = shtData.Range("A1048576").End(xlUp).Row
    Dim rngData As Range

    '<--start of modification
    Dim rngCol As Range
    Set rngData = shtData.Range("A1:I" & rngDataRowCount & _
                    ",N1:N" & rngDataRowCount & _
                    ",P1:R" & rngDataRowCount)

'<---variant A- keep columns separated into destination range
    For Each rngCol In rngData.Columns
         rngCol.Copy rngCol.Offset(0, 20)   'here, 20 columns to right
    Next
**'here edited**

'<---variant B- copy columns into new location, united, no loop
         rngData.Copy Range("zz1")           'here, set destination as single top-left cell
End Sub 
```

一个提示-如果您将列复制到其他 Range 中，请使用所提供的语法`Range.Copy destinationRange`

# c - 总线错误：C 中的 10 处理结构指针

> ID：16028533
> 
> 赞同：1
> 
> 时间：2013-04-16T03:59:09.360
> 
> 标签：c, list, pointers, struct

我正在处理 C 中的 List 示例，其中新节点被推到堆栈的末尾。`Bus Error: 10`当我尝试将新节点推到最后时，我一直得到一个。这是我的推送功能：

```
void push(struct node *tail, struct node *newNode) {

tail->next = newNode; // gdb says the problem is here
tail = tail->next;

} 
```

我称之为使用`push(tail, newNode);`

如有必要，这也是我的结构：

```
struct node
{
    int hour;
    int minute;
    char *name;
    struct node *next;
}; 
```

这是显示导致代码的主要功能`push()`

```
int main()

{
char inputString[50];
int timeHour, timeMin;  
struct node *head;
struct node *tail;

while ((scanf("%d:%d", &timeHour, &timeMin)) != EOF) {
    scanf("%s", inputString);

    if (strcmp(inputString, "enqueue") == 0) {
        if (head == NULL) {
            head = malloc(sizeof(struct node));

            head->hour = timeHour;
            head->minute = timeMin;

            // get name
            scanf("%s", inputString);
            head->name = malloc(strlen(inputString)+1);
            strcpy(head->name, inputString);

            tail = head;

            printEnqueue(head);
        } else {
            struct node *newEntry = malloc(sizeof(struct node));

            newEntry->hour = timeHour;
            newEntry->minute = timeMin;

            // get name
            scanf("%s", inputString);
            newEntry->name = malloc(strlen(inputString)+1);
            strcpy(newEntry->name, inputString);

            push(tail, newEntry);

            printEnqueue(newEntry);
        }
    } else {
        pop(&head, timeHour, timeMin);
    }
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:57:23.603

我怀疑函数中的`head`and`tail`节点没有正确初始化。`main`

从您的代码看来，`head`如果是`NULL`. 但是，您的定义`head`并不能确保它最初是`NULL`（也不是`tail`）。所以你可以绕过`if (head == NULL)`分支（确保它们真的是从`gdb`请执行的:)）。

`Bus error`很少见。所以我用谷歌搜索了它，从[这里开始](https://stackoverflow.com/questions/212466/what-is-a-bus-error)，可能会发生总线错误

> 使用地址不满足对齐要求的处理器指令。

这可能是因为`tail`没有对齐并且代码直接运行到`else`分支中。因此 `push(tail, newEntry);`将访问未对齐的尾部（这也验证了我的怀疑）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:07:44.687

改变

```
void push(struct node *tail, struct node *newNode) 
{
  tail->next = newNode; // gdb says the problem is here
  tail = tail->next;
} 
```

至

```
void push(struct node **tail, struct node *newNode) 
{
  (*tail)->next = newNode; // gdb says the problem is here
  (*tail) = (*tail)->next;
} 
```

然后这样称呼它

```
push(&tail, newEntry); 
```

正如您目前拥有的那样，“tail”永远不会改变，因为您没有将变量的地址传递给函数，因此您无法更改它指向的内容。

还要确保你初始化了所有的局部变量（header,tail,...），*让它成为一个习惯*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:17:03.383

修正#3：`while ((scanf("%d:%d", &timeHour, &timeMin)) != EOF)`在这个循环的主体内，不能保证两个整数`timeHour`和`timeMin`被分配到。也许你的意思是`while ((scanf("%d:%d", &timeHour, &timeMin)) == 2)`。

* * *

修正#2：当你将一个值传递给一个函数时，你传递的是*value*，而不是变量。调用者（您的）看`tail`不到您在其中所做的分配。您需要传递一个指向该变量的指针（例如，它是 a ）并像以前一样分配给。或者，您可以从您的并使用返回值作为您的新.`push``main``&head``struct node **``*tail``return newNode;``push``head`

* * *

修正：这甚至看起来都不会编译。让我们来看看`push`。

```
void push(struct node **tail, struct node *newNode) {
    (*tail)->next = *newNode; // gdb says the problem is here
    *tail = (*tail)->next;
} 
```

是什么类型的`*newNode`？`struct node`. 是什么类型的`(*tail)->next`？在这个片段中：

```
struct node
{
    int hour;
    int minute;
    char *name;
    struct node *next;
}; 
```

修复您的不一致并确保您的最小、可编译的测试用例在发布之前*是可编译的。*

* * *

不要忘记检查`scanf`!的返回值 在您的情况下，除非发生错误，否则它应该返回 1。

* * *

```
 head->name = malloc(strlen(inputString));
        strcpy(head->name, inputString); 
```

这是错误的，因为您没有分配足够的空间来存储`'\0'`角色。我想你的意思是`malloc(strlen(inputString) + 1)`。您的代码中有两个此错误的实例。我不打算重复自己。

* * *

```
 struct node *newEntry = malloc(sizeof(struct node));
        push(&tail, newEntry); 
```

是什么类型的`newEntry`？`struct node *`.

```
 void push(struct node **tail, struct node **newNode) 
```

是什么类型的`newNode`？`struct node **`. 你看到不一致了吗？你需要传入 a `struct node **`，但是`newEntry`是 a `struct node *`。

# css - 电子邮件客户端是否有样式重置？

> ID：16028535
> 
> 赞同：6
> 
> 时间：2013-04-16T03:59:21.890
> 
> 标签：css, email, html-email, email-client

我使用网络上其他地方概述的一般样式规则设计我的电子邮件（即 Campaign Montior 的 CSS 指南[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)）并仅应用内联样式（我发现这比将它们放在`<head>`部分中更可靠正如一些客户忽略的那样`<style>`）。

有谁知道是否有一种可靠的方法可以有效地重置大多数主要电子邮件客户端（Outlook 2007 及更高版本、Gmail、Thunderbird 等）中的样式？至少涵盖主要的桌面和移动客户端（[http://emailclientmarketshare.com/](http://emailclientmarketshare.com/)）。理想情况下，可以轻松追溯应用到现有 HTML 电子邮件模板的解决方案会很棒。

我正在考虑我们将用于网络的内容，例如 Eric Meyer 的 reset.css ( [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/) ) 或类似的。当然，我们不能像导入常规网页那样导入外部 CSS 规则。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T06:23:29.687

[HTML Email Boilerplate](https://github.com/seanpowell/Email-Boilerplate)可能是您能找到的最接近的东西。使用 html 电子邮件对其进行了很好的评论和重置。

# excel - 如果数据库名称取自用户，则将数据从数据库复制到 excel？

> ID：16028544
> 
> 赞同：3
> 
> 时间：2013-04-16T03:59:55.117
> 
> 标签：excel, vba

我正在制作一些宏并从用户那里获取日期和数据库。在此基础上，我正在从 db 获取数据。

这是我的代码，如果您对此有任何解决方案，请查看并分享。

```
 Dim cn As New ADODB.Connection
    Dim rs As New ADODB.Recordset
    Function GetConnectionString() As String
    Dim strCn As String
    strCn = "Provider=sqloledb;"
    strCn = strCn & "Data Source=" & Range("Server") & ";"
    strCn = strCn & "Initial Catalog=" & Range("Database") & ";"
    If (Range("UserID") <> "") Then
    strCn = strCn & "User ID=" & Range("UserID") & ";"
    strCn = strCn & "password=" & Range("Pass")
    Else
       strCn = strCn & "Integrated Security = SSPI"
    End If
        GetConnectionString = strCn
    End Function
      Sub Test()
       ActiveWorkbook.Sheets("Sheet1").Activate
    Dim ws As Worksheet
    Dim Sql As String
    Dim d As String
    d = Range("A2").Value
    d = Format(d, "yyyy-mm-dd")
    cn.ConnectionTimeout = 100
    cn.Open GetConnectionString()
    Sql = "select * from config where convert(date,logdate,103)='"& d &"'"
    ExecInsert (Sql)
    Set rs.ActiveConnection = cn
    rs.Open Sql
    ActiveWorkbook.Sheets("Sheet2").Activate
    Dim ws1 As Worksheet
    Range("A2").CopyFromRecordset (rs) 'This is where I'm getting error
    cn.Close

End Sub

Sub ExecInsert(selectquery As String)
'End Sub

    Dim cmd As New ADODB.Command
    cmd.CommandText = selectquery
    cmd.CommandType = adCmdText
    cmd.ActiveConnection = cn
    cmd.Execute

End Sub 
```

`Range("A2").CopyFromRecordset (rs)`这是我遇到错误的地方

> 运行类型错误“430”类不支持自动化或不支持预期接口

我有所有的 dll 并注册了它们。我什至没有参考资料。

如果有人遇到这个问题，请帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:50:00.543

请更新以下行

从

```
 Range("A2").CopyFromRecordset (rs) 
```

到

`Range("A2").CopyFromRecordset rs`

下面是示例代码

```
Sub sub_success()
    Dim rsContacts As ADODB.Recordset
    Set rsContacts = New ADODB.Recordset

    With rsContacts
        .Fields.Append "ContactID", adInteger
    End With

    rsContacts.Open
    rsContacts.AddNew
    rsContacts!ContactID = 2123456
    rsContacts.Update

    Sheet1.Range("A2").CopyFromRecordset rsContacts
End Sub

Sub sub_failure()
    Dim rsContacts As ADODB.Recordset
    Set rsContacts = New ADODB.Recordset

    With rsContacts
        .Fields.Append "ContactID", adInteger
    End With

    rsContacts.Open
    rsContacts.AddNew
    rsContacts!ContactID = 2123456
    rsContacts.Update

    Sheet1.Range("A2").CopyFromRecordset (rsContacts)
End Sub 
```

# asterisk - Asterisk 记录一个.wav 文件并保存一个与调用文件相同的文件名

> ID：16028547
> 
> 赞同：0
> 
> 时间：2013-04-16T04:00:11.453
> 
> 标签：asterisk

我制作了一个自动创建.call文件并自动移动到/var/spool/asterisk/outgoing/的脚本，我已经完成了，但在录制时我想保存一个与.call文件相同的.wav文件

文件

> testcalls150.call

扩展配置文件

> [outgoingcall]
> exten => s,1,Answer( )
> exten=>s,2,Record(/var/spool/asterisk/tmp/ **${CALLFILENAME(name)}** /${STRFTIME(${EPOCH},GMT- 8,%m%d%y-%H:%M:%S)}.wav,0,0,qxk)

输出：

> 在**/var/spool/asterisk/tmp/testcalls150(date-time).wav**

提前致谢，
OAcebes

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:39:48.850

请阅读这个：

[http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

您需要创建调用文件

```
Set: callfile_name=testcalls150.call 
```

之后，您可以在拨号方案中执行以下操作：

```
exten=>s,2,Record(/var/spool/asterisk/tmp/${callfile_name}${STRFTIME(${EPOCH},GMT-8,%m%d%y-%H:%M:%S)}.wav,0,0,qxk) 
```

请注意，在创建呼叫文件时，您还需要检查星号运行和 /var/spool/asterisk/outgoing 中的文件数是否为 LOW。因为当您总是添加文件并且星号无法处理相同的速率时，可能会出现这种情况。结果将是文件夹中2000-3000个文件后的系统邮件功能。

# c++ - 使用关闭按钮关闭 Opencv 窗口

> ID：16028550
> 
> 赞同：1
> 
> 时间：2013-04-16T04:00:13.960
> 
> 标签：c++, c, windows, opencv

我在opencv示例中看到了很多通过按“ESC”键退出窗口的示例。我在 Windows 平台上工作，我需要使用窗口中的关闭按钮来关闭 opencv“捕获”窗口？我该怎么做？任何建议和示例都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-10T11:09:02.633

我认为这种类型的代码会有所帮助。我通常这样做是为了在 python 中关闭窗口。

```
while():

    if (cv2.getWindowProperty('name_of_window', 0) < 0):
        cv2.destroyAllWindows()
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T17:04:41.693

**OpenCV 不支持此功能。** [对不起](https://stackoverflow.com/q/9887310/176769)！

# c# - 使用线程时执行 CreateHandle() 错误时无法调用值 Dispose()

> ID：16028551
> 
> 赞同：0
> 
> 时间：2013-04-16T04:00:38.250
> 
> 标签：c#

//这是我的代码

```
private void btnGenSumm_Click(object sender, EventArgs e)  
{  
    Thread t1 = new Thread(new ThreadStart(loadSummSales));
    Thread t2 = new Thread(new ThreadStart(showWaitMessage));
    t1.Start();
    t2.Start();  
    }      

private void showWaitMessage()  
{            
    label1.Text = "Processing please wait!";  
}      

private void loadSummSales()    
{  
    try  
    {  
        sqlConn = new SqlConnection(MyClass.GlobalConn());    

        string cmdStr = "[dbo].[GetSummary]";    

        sqlConn.Open();    

        SqlCommand cmd = new SqlCommand(cmdStr, sqlConn);    

        cmd.CommandType = CommandType.StoredProcedure;    
        cmd.Parameters.Add("@piDateFrom", SqlDbType.Int).Value = Convert.ToInt32(FromD);    
        cmd.Parameters.Add("@piDateThru", SqlDbType.Int).Value = Convert.ToInt32(ToD);  

        System.Data.DataTable dT = new System.Data.DataTable();    
        SqlDataAdapter da = new SqlDataAdapter(cmd);    
        da.Fill(dT);    
        cmd.ExecuteNonQuery();  
        dgSummSales.DataSource = dT;    

        dgSummSales.Columns["Branch"].DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleCenter;    
        dgSummSales.Columns["Product Amt"].DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleRight;    
        dgSummSales.Columns["SERVICE Amt"].DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleRight;    

        dgSummSales.Columns["Branch"].Width = 270;  
        dgSummSales.Columns["Product Amt"].Width = 98;  
        dgSummSales.Columns["SERVICE Amt"].Width = 103;  

        dgSummSales.Columns["Product Amt"].DefaultCellStyle.Format = "N2";  
        dgSummSales.Columns["SERVICE Amt"].DefaultCellStyle.Format = "N2";  

        dgSummSales.RowsDefaultCellStyle.BackColor = Color.White;  
        dgSummSales.AlternatingRowsDefaultCellStyle.BackColor = Color.Aquamarine;  

        dgSummSales.Refresh();

        label1.Text = "Sales as of " + dateTimePicker2.Value.ToString("d", System.Globalization.CultureInfo.GetCultureInfo("en-US"));
    } 
```

//我第一次点击btnGenSumm按钮时没有错误，但在我第二次尝试时，它给出了错误

`Dispose()`执行时不能调用值`CreateHandle()`。on`Designer.cs`
但是当我不使用 Thread 时，当我 `btnGenSumm`多次单击按钮时它没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:10:39.250

无论您目前遇到什么具体问题，这段代码基本上都被破坏了。

除了主 UI 线程，您不能在任何线程上操作 UI 元素。您的两个后台线程都执行直接与 UI 元素（例如，表单上的控件）交互的代码，就好像它在主 UI 线程上运行一样。那是行不通的。

更改您的代码以改用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)组件。这比其他方法更优雅地处理 UI 元素的跨线程访问。链接的 MSDN 文档包含示例代码，您可以使用方便的搜索功能在 Stack Overflow 上找到很多其他问题。

# ruby-on-rails - Ruby on Rails 这个哈希输出是什么意思？

> ID：16028553
> 
> 赞同：0
> 
> 时间：2013-04-16T04:00:40.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hash, hashmap

```
#<Hashie::Mash created_time="1366084479" from=#<Hashie::Mash 
full_name="alyssabri_" id="24110592" username="ally"> id="4350706" 
text="Some Text"> 
```

这是什么意思？当我这样做时，我明白了：

```
 <% (@arr).each do |media| %>
        <%= media.caption %>
    <% end %> 
```

我正在尝试获取`text`其中的内容`caption`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:04:10.497

这告诉您这`media.caption`是一个实例`Hashie::Mash`（您已在应用程序中安装的 gem 提供`Hashie`，类似于 Ruby 的 native `Hash`）。您需要从该实例中获取`text`键/值对`Hashie`

```
<% (@arr).each do |media| %>
    <%= media.caption.text %>
<% end %> 
```

* * *

要回答有关如何优雅地绕过那些`media`没有相关的实例的问题`caption`，您可以执行以下操作

```
<% (@arr).each do |media| %>
    <%= media.caption.text unless media.caption.blank? %>
<% end %> 
```

或预先过滤掉那些`caption`-less`media`对象

```
<% @arr.select{ |m| m.caption.present? }.each do |media| %>
    <%= media.caption.text %>
<% end %> 
```

# css - 参考 具有值为 mytext 的 name 属性的元素

> ID：16028557
> 
> 赞同：0
> 
> 时间：2013-04-16T04:00:56.477
> 
> 标签：css, css-selectors

所以这就是我的书所说的：

对于 CSS：

```
p[name^=”my”] { color: #ff0000 }
p[name$=”my”] { color: #00ff00 }
p[name*=”my”] { color: #0000ff } 
```

这就是我的 html 所说的：

```
<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="stylesheet.css">
<head>
</head>
<body>
<p class="my1111">first</p>
<p class="11my11">second</p>
<p class="1111my">third</p>
</body>
</html> 
```

不应该先是红色，第二个是绿色，第三个是蓝色吗？我什至尝试将 p{color:#000000;} 添加为 css 中的第一行，但没有结果。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:11:31.213

# apache-flex - 如何在flex中获得hslider的水平中心位置？

> ID：16028559
> 
> 赞同：0
> 
> 时间：2013-04-16T04:01:20.687
> 
> 标签：apache-flex, flex3

我想使用 hslider 的水平位置而不是 x 位置。那么如何在flex中获得任何组件的水平中心？请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:26:13.997

很简单。获取组件的宽度并将其除以 2。您将获得组件的水平中心。

# dart - 如何重新引发异常并保留堆栈跟踪？

> ID：16028565
> 
> 赞同：35
> 
> 时间：2013-04-16T04:02:02.387
> 
> 标签：dart

这段代码：

```
try {
  try {
    throw 1;
  } catch (e, s) {
    print("$e $s");
    throw e;
  }
} catch (e2, s2) {
  print("$e2 $s2");    
} 
```

印刷：

```
1 #0      main (file:///.../test.dart:34:7)

1 #0      main (file:///.../test.dart:37:7) 
```

所以原始的堆栈跟踪完全丢失了。有没有办法在保留堆栈跟踪的情况下重新抛出？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-16T04:22:49.907

Dart VM 的当前版本并`dart2js`支持重新抛出，保留堆栈跟踪，具有`rethrow`：

```
void main() {
  try {
    try {
      throw 1;
    } catch (e, s) {
      print("$e $s");
      rethrow;
    }
  } catch (e2, s2) {
    print("$e2 $s2");    
  }
} 
```

这会产生：

```
1 #0 main (file:///home/darshan/so/stacktrace.dart:4:7)

1 #0 main (file:///home/darshan/so/stacktrace.dart:4:7)
#1 主要 (file:///home/darshan/so/stacktrace.dart:7:7)

```

# python - 将具有十进制数和数据类型的列表转换为仅数字

> ID：16028566
> 
> 赞同：0
> 
> 时间：2013-04-16T04:02:09.593
> 
> 标签：python, list, decimal, converter

我从数据库返回的结果如下所示：

```
a = [Decimal('0.4441'), Decimal('0.3821'), Decimal('0.4414'), Decimal('0.3391')] 
```

我怎样才能将其转换为：

```
a = [0.4441, 0.3821,  0.4414, 0.3391] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T04:03:10.477

```
>>> from decimal import Decimal
>>> a = [Decimal('0.4441'), Decimal('0.3821'), Decimal('0.4414'), Decimal('0.3391')]
>>> a = [float(n) for n in a]
>>> a
[0.4441, 0.3821, 0.4414, 0.3391] 
```

我不明白你为什么要这样做，你只是失去了精确度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T13:40:56.593

尝试使用索引 0，如：for i in a: print(i[0])

这将摆脱“额外信息”，只会留下您的号码（以小数表示）。

# html - 单击另一个后移动 div

> ID：16028567
> 
> 赞同：1
> 
> 时间：2013-04-16T04:02:15.093
> 
> 标签：html, css

单击链接时，我试图使某些东西移动。我似乎无法让他们一起工作。任何人都知道该怎么做。

## CSS

```
#drop:focus #login_dropdown {
    margin-top: 0;
}
#login_dropdown {
    width: 100%;
    height: 80px;
    background-color: #ccc;
    margin-top: -80px;
} 
```

## HTML

```
<div id="login_dropdown" class="clearfix">
    <div class="container">
        <div id="login_dropdown_header">
             <h1>Login</h1>

        </div>
        <form action="login.php" method="post" id="login_form" class="clearfix">
            <ul id="login_reg">
                <li>
                    <input type="text" name="username" placeholder="Username">
                </li>
                <li>
                    <input type="password" name="password" placeholder="Password">
                </li>
                <li>
                    <input type="submit" value="Login">
                </li>
                <li> <a href="register.php">Register</a>

                </li>
            </ul>
        </form>
    </div>
</div>
<header class="header">
    <div class="container">
        <div id="logo"></div>
        <nav>
            <ul> <a href="index.php"><li>Home</li></a>
 <a href="ledge_base.php"><li>Knowledge Base</li></a>
 <a href="faq.php"><li>FAQ</li></a>

                <!--<a href="#"><li>Teach</li></a>--> <a href="contact.php"><li>Contact</li></a>
 <a href="#"><li id="drop">Login/Register</li></a>

            </ul>
        </nav>
    </div>
</header> 
```

无论如何，我试图在单击`#login_dropdown`时将其边距更改为 0 。`#drop`但是点击后什么都没有。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:13:25.700

```
#drop:focus #login_dropdown {
    margin-top: 0;
} 
```

看看那个 CSS - 我看到你的逻辑是“什么时候`#drop`是焦点，设置`margin-top`为零`#login_dropdown`”

问题`#login_dropdown`不是 的后代`#drop`，而是上升的。目前 CSS 中没有上升选择器，因此您可能需要使用 javascript（或 jQuery）来完成此操作。

* * *

尽管它已在 CSS Selectors Level 4 Spec - 更多信息中提出： http: [//coding.smashingmagazine.com/2013/01/21/sneak-peek-future-selectors-level-4/](http://coding.smashingmagazine.com/2013/01/21/sneak-peek-future-selectors-level-4/)和[https://stackoverflow .com/a/1014958/497604](https://stackoverflow.com/a/1014958/497604)

# java - KeyListener 不工作

> ID：16028573
> 
> 赞同：0
> 
> 时间：2013-04-16T04:02:44.313
> 
> 标签：java, awt, keylistener

以下代码不起作用。我正在尝试使用按键方法向左、向右、向上和向下移动玩家，但是当我按下按键时它没有响应。我没有粘贴整个代码，只是移动盒子的部分还有其他 if 语句来实现其他内容的移动。

* * *

```
public class innerClassKeyPressed {

   void  keyPressed( KeyEvent e)
   {
    int key= e.getKeyCode();
    if(key==KeyEvent.VK_LEFT){
        dx=-1;
    }
     if(key==KeyEvent.VK_RIGHT){

         dx=1;
    }
    if (key==KeyEvent.VK_UP){
        dy=-1;
    }
     if (key==KeyEvent.VK_DOWN){
        dy=1;
     }
      if (key == 82)
     {
          initLevel(currlevel);

     } //R
     if (key == 78)
     {
         currlevel++;
          initLevel(currlevel);
      } 

      if ( (key == KeyEvent.VK_LEFT ) && ( key  == KeyEvent.VK_RIGHT ) && 
      (key == KeyEvent.VK_UP ) && ( key == KeyEvent.VK_DOWN )) { 

         return;
       }

        for (int row=0; row < myArray.length; row++)

        {
            for (int column=0; column < myArray[row].length; column++)
            {
                 if( myArray[row][column]==  Contents.PLAYER)                       { 
                        if (myArray[row+dy][column+dx] == Contents.BOX)
                        {

                            if (myArray[row+dy*2][column+dx*2] == Contents.EMPTY)

                             {

                                myArray[row+dy][column+dx]= Contents.PLAYER; 
                                 myArray[row][column]= Contents.EMPTY;

                                myArray[row+dy*2][column+dx*2]= Contents.BOX; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:17:01.397

`KeyListeners`因不工作而臭名昭著（实际上他们确实如此，只是不是您认为应该的方式）。

问题`KeyListener`是它们只会在他们注册的组件是可聚焦的并且具有焦点（也称为键盘焦点）时才会做出反应。

相反，您应该使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，因为它们允许确定触发它们的焦点状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:08:46.137

正如我猜测您使用 JFrame 和 Canvas 来绘制您的播放器一样，我还将假设这不起作用，因为您尚未将 KeyListener 添加到 JFrame。

例如：

```
JFrame frame = new JFrame();
frame.addKeyListener(keylistener); 
```

# javascript - jQuery 动态删除 HTML 元素

> ID：16028577
> 
> 赞同：-1
> 
> 时间：2013-04-16T04:02:57.440
> 
> 标签：javascript, html, ajax, jquery

这里有 4 个列表项

```
<ul>
    <li>First</li>
    <li>Second</li>
    <li>Third</li>
    <li>Fourth</li>
</ul> 
```

我想从服务器更新项目，所以我写了 AJAX 调用。

```
$.ajax({
    ....
    $('ul').append('new 4 items from server');
}); 
```

AJAX 调用后的项目

```
<ul>
    <li>First</li>
    <li>Second</li>
    <li>Third</li>
    <li>Fourth</li>
    <li>new1</li>
    <li>new2</li>
    <li>new3</li>
    <li>new4</li>
</ul> 
```

所以总项目数是 8。现在我想保留最后 5 个项目`Fourth, new1...new4`并删除剩余的项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:06:04.283

您可以使用`:lt(index)`选择器。

```
$('ul li:lt(3)').remove(); 
```

如果您只想保留`li`可以使用的最后五个元素`eq`和`prevAll`方法：

```
$('ul li').eq(-5).prevAll().remove(); 
```

或者在添加新元素之前删除除最后一个之外的所有列表元素。

# java - ListView 空白行

> ID：16028583
> 
> 赞同：0
> 
> 时间：2013-04-16T04:03:26.603
> 
> 标签：java, android, listview

出于某种原因，我的 ListView 有空白行，如此处的图片所示。我无法删除它们，但使用其中包含数据的行，我可以很好地删除它们。我正在使用 SimpleCursorAdapter、ListAdapter 和 CursorAdapter 从 SQLitedatabase 填充我的 ListView。

![管理员活动](https://i.stack.imgur.com/tUWmZ.png)

管理类

```
package com.fullfrontalgames.numberfighter;

import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ListActivity;
import android.content.Context;
import android.content.DialogInterface;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Admin extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.admin);

        DBAdapter db = new DBAdapter(this);
        db.open();

        ListView UsernameList = (ListView)findViewById(android.R.id.list);

        final Cursor playeraccounts = db.GetAllPlayers();
        db.changeCursor(playeraccounts);
        String[] from = new String[] {
            "USERNAME"
        };
        int[] to = new int[] {
            R.id.AdminTextView
        };

        ListAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.admin, playeraccounts,
                from, to, 0);
        UsernameList.setAdapter(cursorAdapter);

        abstract class CustomCursorAdapter extends CursorAdapter {
            public CustomCursorAdapter(Context context, Cursor c, int flags) {
                super(context, playeraccounts, flags);
                inflater = LayoutInflater.from(context);

            }

            LayoutInflater inflater;

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                ViewHolder holder;
                if (convertView == null) {
                    convertView = inflater.inflate(R.layout.admin, null);
                    holder = new ViewHolder();
                    holder.text1 = (TextView)convertView.findViewById(R.id.AdminTextView);
                    holder.button = (Button)convertView.findViewById(R.id.PlayerDelete);

                    convertView.setTag(holder);
                } else {
                    holder = (ViewHolder)convertView.getTag();

                    return convertView;
                }

                class ViewHolder {
                    TextView text1;

                }

                holder.text1.setText(position);
                holder.button.setText(position);
                return convertView;
            }
        }

    }

    public void onClickDelete(View view) {
        int id = 0;
        Button deletebutton = (Button)findViewById(R.id.PlayerDelete);
        // TODO Auto-generated method stub
        showDialog(id);

    }

    @Override
    public Dialog onCreateDialog(final int id) {
        final DBAdapter db = new DBAdapter(this);
        db.open();
        switch (id) {
            case 0:
                return new AlertDialog.Builder(this).setIcon(R.drawable.icon)
                        .setTitle("Would you like to delete this player?")
                        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int whichButton) {
                                // TODO Auto-generated method stub
                                TextView playernames = (TextView)findViewById(R.id.AdminTextView);
                                String userName = playernames.getText().toString();
                                db.deleteEntry(userName);
                                Toast.makeText(getBaseContext(), "Player deleted",
                                        Toast.LENGTH_SHORT).show();
                            }
                        }).setNegativeButton("No", new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog, int whichButton) {
                                Toast.makeText(getBaseContext(), "Canceled", Toast.LENGTH_SHORT)
                                        .show();
                            }
                        })

                        .create();

        }
        return null;

    }

} 
```

DBAdapter 类

```
 package com.fullfrontalgames.numberfighter;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DBAdapter {
    static final String DATABASE_NAME = "NFDB.db";
    static final int DATABASE_VERSION = 2;
    public static final int NAME_COLUMN = 1;
    // TODO: Create public field for each column in your table.
    // SQL Statement to create a new database.
    static final String DATABASE_CREATE = "create table NFDB ("
            + "ID integer primary key autoincrement, " + "USERNAME text,"
            + "PASSWORD text, EMAIL text, NUMBERINPUT text, "
            + "SCORE text, FRIENDS text); ";
    static final String CREATE_INDEX_KEYTYPE = "CREATE UNIQUE INDEX idx_keytype ON tableName(USERNAME)";
    // Variable to hold the database instance
    public SQLiteDatabase db;
    // Context of the application using the database.
    private final Context context;
    // Database open/upgrade helper
    private final DataBaseHelper DBHelper;

    public DBAdapter(Context _context) {
        context = _context;
        DBHelper = new DataBaseHelper(context, DATABASE_NAME, null,
                DATABASE_VERSION);
    }

    public DBAdapter open() throws SQLException {
        db = DBHelper.getWritableDatabase();

        return this;
    }

    public void close() {
        db.close();
    }

    public SQLiteDatabase getDatabaseInstance() {
        return db;
    }

    public void insertEntry(String userName, String password, String email) {
        ContentValues newValues = new ContentValues();
        // Assign values for each row.
        newValues.put("USERNAME", userName);
        newValues.put("PASSWORD", password);
        newValues.put("EMAIL", email);
        // Insert the row into your table
        db.insert("NFDB", null, newValues);
        // /Toast.makeText(context, "Reminder Is Successfully Saved",
        // Toast.LENGTH_LONG).show();
    }

    public int deleteEntry(String userName) {
        // String id=String.valueOf(ID);
        String where = "USERNAME=?";
        int numberOFEntriesDeleted = db.delete("NFDB", where,
                new String[] { userName });
        // Toast.makeText(context,
        // "Number fo Entry Deleted Successfully : "+numberOFEntriesDeleted,
        // Toast.LENGTH_LONG).show();
        return numberOFEntriesDeleted;
    }

    public String getSinlgeEntry(String userName) {
        Cursor cursor = db.query("NFDB", null, " USERNAME=?",
                new String[] { userName }, null, null, null);
        if (cursor.getCount() < 1) // UserName Not Exist
        {
            cursor.close();
            return "NOT EXIST";
        }
        cursor.moveToFirst();
        String password = cursor.getString(cursor.getColumnIndex("PASSWORD"));
        cursor.close();
        return password;

    }

    public void updateEntry(String userName, String password) {
        // Define the updated row content.
        ContentValues updatedValues = new ContentValues();
        // Assign values for each row.
        updatedValues.put("USERNAME", userName);
        updatedValues.put("PASSWORD", password);

        String where = "USERNAME = ?";
        db.update("NFDB", updatedValues, where, new String[] { userName });
    }

    public String getData() {
        String[] columns = new String[] { "ID", "USERNAME" };
        Cursor c = db
                .query("NFDB", columns, null, null, null, null, null, null);
        String result = "";
        int iRow = c.getColumnIndex("ID");
        int iName = c.getColumnIndex("USERNAME");

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            result = result + c.getString(iRow) + " " + c.getString(iName)
                    + "/n";
        }

        return result;
    }

    public String getUsername(String searchName) {
        Cursor c = db.query("NFDB", new String[] { "USERNAME" },
                "USERNAME = ?", new String[] { searchName }, null, null, null);
        if (c.moveToNext())
            return c.getString(0);
        else
            return "";
    }

    public void InsertScore(String Username, String Score) {
        ContentValues ScoreValues = new ContentValues();
        ScoreValues.put("USERNAME", Username);
        ScoreValues.put("SCORE", Score);
        db.insert("NFDB", null, ScoreValues);

    }

    public String GetGameScore(String Username, String Score) {
        Cursor cursor = db.query("NFDB", null, "USERNAME", new String[] {
                Username, Score }, null, null, null);
        cursor.moveToFirst();
        cursor.close();
        return Username;
    }

    public String GetAllScore() {
        String[] columns = new String[] { "ID", "USERNAME", "SCORE" };
        Cursor cursor = db.query("NFDB", columns, null, null, null, null, null);
        String result = "";
        int iRow = cursor.getColumnIndex("ID");
        int iUsername = cursor.getColumnIndex("USERNAME");
        int iScore = cursor.getColumnIndex("SCORE");

        for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
            result = result + cursor.getString(iRow) + " "
                    + cursor.getString(iUsername) + " "
                    + cursor.getString(iScore) + "/n";
        }
        return result;
    }

    public void InsertNumber(String Number) {
        ContentValues NumberValues = new ContentValues();
        ;
        NumberValues.put("NUMBERINPUT", Number);
        db.insert("NFDB", null, NumberValues);
    }

    public String GetNumber(String Username, String Number) {
        Cursor cursor = db.query("NFDB", null, "USERNAME", new String[] {
                Username, Number }, null, null, null, null);
        cursor.moveToFirst();
        cursor.close();
        return Username;
    }

    public String GetAllNumbers() {
        String[] columns = new String[] { "ID", "USERNAME", "NUMBERINPUT" };
        Cursor cursor = db.query("NFDB", columns, null, null, null, null, null,
                null);
        String result = "";
        int iRow = cursor.getColumnIndex("ID");
        int iName = cursor.getColumnIndex("USERNAME");
        int iNumber = cursor.getColumnIndex("NUMBERINPUT");

        for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
            result = result + cursor.getString(iRow) + " "
                    + cursor.getString(iName) + " " + cursor.getString(iNumber)
                    + "/n";
        }
        return result;

    }

    public void InsertFriends(String Friends) {
        ContentValues FriendValues = new ContentValues();
        FriendValues.put("FRIENDS", Friends);
        db.insert("NFDB", null, FriendValues);
    }

    public int DeleteFriends(String Friends) {
        String where = "FRIENDS=?";
        int numberOfEntriesDeleted = db.delete("NFDB", where,
                new String[] { Friends });
        return numberOfEntriesDeleted;
    }

    public String GetFriend(String Defender) {
        Cursor cursor = db.query("NFDB", null, "FRIENDS",
                new String[] { Defender }, null, null, null, null);
        cursor.moveToFirst();
        cursor.close();
        return Defender;

    }

    public int PlayFriend() {
        Cursor cursor = db.query("NFDB", null, "FRIENDS", null, null, null,
                null, null);
        cursor.moveToFirst();
        cursor.close();
        return 0;

    }

    public Cursor GetAllFriends() {

        return db.rawQuery("select rowid _id,FRIENDS FROM NFDB", null);

    }

    public int get(String string) {
        // TODO Auto-generated method stub
        return 0;
    }

    public Cursor GetAllPlayers() {

        return db.rawQuery("select rowid _id,* from NFDB", null);

    }

    public Cursor GetAllFriends2() {

        return db.rawQuery("select rowid _id,FRIENDS FROM NFDB", null);

    }

    public Cursor changeCursor(Cursor newcursor) {
        return newcursor;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:47:50.713

尝试使用下面的代码可能对你有帮助..

```
public class CustAdp extends ArrayAdapter<String> {

    Cursor cursor_subCat;

    public CustAdp(Context context, Cursor cursor_subcategory) {
        super(context, id);
        this.cursor_subCat = cursor_subcategory;
        cursor_subCat.moveToFirst();
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return cursor_subCat.getCount();
    }

    public String getItem(int position) {
        // TODO Auto-generated method stub
        cursor_subCat.moveToPosition(position);
        return cursor_subCat.getString(cursor_subCat
                .getColumnIndex("Sub_CatName"));
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        cursor_subCat.moveToPosition(position);
        return cursor_subCat.getInt(cursor_subCat
                .getColumnIndex("Sub_IdAuto"));
    }

    @Override
    public void notifyDataSetChanged() {
        // TODO Auto-generated method stub
        super.notifyDataSetChanged();
        cursor_subCat.requery();
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        convertView = getLayoutInflater().inflate(R.layout.customsubcat,
                null);
        ImageView iv_subcat = (ImageView) convertView
                .findViewById(R.id.image_region1);
        TextView tv_subcat = (TextView) convertView
                .findViewById(R.id.txt_regionname1);
        Button btn_subcat = (Button) convertView
                .findViewById(R.id.button_delete_subcat);

        cursor_subCat.moveToPosition(position);
        try {
            byte[] subimage = cursor_subCat.getBlob(cursor_subCat
                    .getColumnIndex("Sub_CatImage"));
            Bitmap bm = BitmapFactory.decodeByteArray(subimage, 0,
                    subimage.length);
            iv_subcat.setImageBitmap(bm);
            tv_subcat.setText(cursor_subCat.getString(cursor_subCat
                    .getColumnIndex("Sub_CatName")));
            subcat_id = cursor_subCat.getLong(cursor_subCat
                    .getColumnIndex("Sub_IdAuto"));
            btn_subcat.setId((int) subcat_id);
            id = cursor_subCat.getInt(cursor_subCat
                    .getColumnIndex("Sub_MyReceipe"));
            convertView.setId(position);
        } catch (Exception e) {
            // TODO: handle exception
        }

        return convertView;

    }

    class ViewHolder {
        TextView tv_subcat;
        Button btn_subcat;
        ImageView iv_subcat;
    }
} 
```

只需将光标传递给自定义适配器类即可。然后根据需要更改布局。

# angularjs - 角度范围混淆

> ID：16028594
> 
> 赞同：1
> 
> 时间：2013-04-16T04:04:41.067
> 
> 标签：angularjs, angularjs-directive

所以假设我正在编写一个自定义指令，将模板加载到 div 中。我的自定义指令称为`loadClickedTpl`. 单击时`loadClickedTpl`，它应该读取属性并将模板加载到`#target`.

到目前为止，我的 html 看起来像这样：

```
 <html np-app="mymodule">
      <head>...</head>
      <body>

           <a loadClickedTpl tplSrc="myTpl" > Click Me to load template </a>

           <div id="target" ng-include src="clickedTpl"></div>

           <script type="text/ng-template" id="myTpl">
                <h1>Loaded</h1>
           </script>

      </body>
 </html> 
```

问题是将`clickedTpl`var 设置为指向模板。如果它像这样在 html 中完成，`<div id="target" ng-include src="'myTpl'"></div>`它可以正常工作，那么以编程方式执行它被证明是一个挑战。这是我到目前为止所尝试的：

```
angular.module('loadATpl').directive 'loadClickedTpl', ->
     (scope, element, attrs) ->
           element.bind 'click', -> 
                # does not work
                scope.clickedTpl = attrs.tplSrc

                # also does not work
                angular.injector(['ng']).invoke ($rootScope) ->
                       $rootScope.clickedTpl = attrs.tplSrc

                # obviously does not work
                clickedTpl = atts.tplSrc

angular.module('mymodule', ['loadATpl']) 
```

点击绑定确实有效，但这就是它的结束。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T04:29:06.430

这是工作示例：[http ://plnkr.co/edit/8BNYr9J8g6tRLMo8VdPi?p=preview](http://plnkr.co/edit/8BNYr9J8g6tRLMo8VdPi?p=preview)

您需要将 attrs 用作角度指令的“load-clicked-tpl”（连字符表达式）。

# pic - PIC18F452 UART 成帧问题

> ID：16028595
> 
> 赞同：0
> 
> 时间：2013-04-16T04:04:45.303
> 
> 标签：pic, uart

每个人。

我正在使用 PIC18F452 微控制器。我在 UART 上接收数据，通过附加额外的同步字对其进行帧化并传输它，我在按顺序发送同步字时遇到问题。我想要的是发送的话说... EA 09 C3 与数据。现在我用 MikroC 编写了这段代码：

```
int j=0;
SPBRG = 129;
TXSTA = 0b00100110;
RCSTA = 0b10010000;
while(1)
{
   if(j == 0)
   {
     TXREG = 0xEA;
   }
   else if(j == 1)
   {
     TXREG = 0x09;
   }
   else if(j == 2)
   {
     TXREG = 0xC3;
   }
   else
   {
    TXREG = RCREG;
   }
   while(!TRMT); // wait for whole data frame to be ready for transmission
  if(j == 100)
     j = 0; // reset j after 100 bytes
  else
     j++;
   } 
```

现在这里发生的情况是同步字被传输但无序，有时还会发生字节重复。我想要的是 j 应该只在传输一个字节后递增，这里我认为 j 的递增与传输无关。

期待中的感谢。

问候，哈桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:05:41.527

uart传输的隐藏规律是：

_ _***在您发送的每个字节之间放一点延迟***_ _

请注意，这是一个与波特率无关的秘密；）。

例如 50 微秒。

由于发送方和接收方正在异步工作，因此他们在接收时会花费太多精力来同步每个字节，而您一直在填充它们……它们只是停滞不前。有时会丢弃字节，有时会在不清除接收注册表的情况下丢弃它，从而复制字节。

因此，如果速度很关键，首先给每个字节 50 毫秒或更多的发送延迟，然后如果它可以缩小它，例如将其降低到 10 微秒。继续缩小它，直到它再次开始失速，最好将延迟设置为该限制的两倍以实现故障保护。

我希望不要着急或渴望速度，否则请使用其他通信渠道而不是 usart。

# ruby-on-rails - Rails 查询中的自定义排序

> ID：16028601
> 
> 赞同：1
> 
> 时间：2013-04-16T04:05:16.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我有一个带有一些 has_many 关联的 Post 模型。

```
class Post < ActiveRecord::Base
 ...
 has_many :votes
 has_many :comments
 has_many :ratings
end 
```

我想要一个按 ( ) 排序帖子的查询`votes.count + comments.count + ratings.count`。

例如，如果我的帖子有 3 票、2 条评论和 1 分，则其排序“指标”的值为 6。我该怎么做？

我还想要第二个查询，它使用相同的 3 个参数（投票、评论、评分）对其进行排序，但还添加了与 成反比的第四个参数`created_at`，因此较新的帖子将排名较高，而较旧的帖子将排名较低。总之，排序指标将类似于：

( `F*(1/created_at) + votes.count + comments.count + ratings.count`)，其中 F 是比例因子。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T04:24:57.310

我建议您在这里使用[AR 计数器缓存](http://guides.rubyonrails.org/association_basics.html#belongs_to-counter_cache)：

> **4.1.2.4：counter_cache**
> 
> 该`:counter_cache`选项可用于更有效地查找所属对象的数量。
> [...]
> 尽管在`:counter_cache`包含`belongs_to`声明的模型上指定了该选项，但必须将实际列添加到关联模型中。

因此，您将修改相应的`belongs_to`声明以包含该`:counter_cache`选项：

```
class Vote < ActiveRecord::Base
  belongs_to :post, :counter_cache => true
end
# Similarly for the other two... 
```

然后`posts`在迁移中将计数器列添加到您的表中：

```
def change
  change_table :posts do |t|
    t.integer :votes_count
    #...
  end
end 
```

您还需要迁移来初始化现有`Post`s 的计数器。

然后，您将拥有计数器作为模型的属性，您可以这样说：

```
Post.where(...).order('posts.votes_count + posts.comments_count + posts.ratings_count') 
```

如果要包含，`created_at`则可以使用[`extract(epoch from created_at)`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)将时间戳作为方便的双精度值来获取，可以在算术表达式中使用。

* * *

这样做的缺点是，如果您偏离 The One True Path To Rails Nirvana 的一根头发（或它真正要去的地方），计数器可能会不同步，因此您需要小心不要触摸数据库你自己，总是通过联想来创造和毁灭事物。我还建议您构建一个可以不时运行的快速'n'dirty sanity checker，以确保计数器正确。

如果您很高兴成为 PostgreSQL 特定的，那么您可以抛弃`:counter_cache => true`废话和随之而来的所有脆弱性，并使用数据库中的触发器来维护缓存的计数器值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T04:24:30.783

这是关于算法的。

对于非常简单的算法，查询是可以的。当您的想法越来越多时，需要更复杂的方法，并且查询将不再适用。

我建议您再构建一个名为“score”的字段来存储计算结果。创建记录时它有一个初始值。然后，每次你更新其中一个因素——投票、评论、评分时，你都会触发一个钩子来再次计算“分数”。

当你的算法改变时，你安排一个工人再次计算所有记录的“分数”。

对于订购，只需简单地按“分数”订购。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T05:02:19.717

是否有理由需要在数据库中完成此操作？如果不是，我建议您在找到所有记录及其包含的关联后使用 sort_by ruby​​ 方法。就像是：

```
# In the post model 
class Post < ActiveRecord::Base
  def custom_metric
    votes.size + comments.size + ratings.size
  end
end

# In post controller
@posts = Post.where(id: ..).includes(:votes, :comments, :ratings).sort_by(&:custom_metric) 
```

对于要对对象进行排序的其他方式，您可以遵循相同类型的逻辑。这种方法与其他建议的方法相当快，并且不会导致任何数据非规范化。无论数据库的状态如何，查询都将始终返回所需的结果。

# vb.net - 在 VB.NET 中合并两个多行文本框

> ID：16028602
> 
> 赞同：0
> 
> 时间：2013-04-16T04:05:23.953
> 
> 标签：vb.net, textbox, multiline

我需要在 vb net 中组合两个多行文本框，如下所示：

```
textbox1:
a
b
c
d

textbox2:
1
2
3
4

textbox3:
a1
b2
c3
d4 
```

只是一个带有三个文本框的表单。还有一个按钮，用于在 t3 中合并/组合/连接来自 t1 和 t2 的每个值。

我的尝试之一：

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 Button3.Click

```
 For Each line In TextBox1.Lines
        For Each linex In TextBox2.Lines
            Me.TextBox3.Text += line & linex
            Me.TextBox3.Text += Environment.NewLine
        Next
    Next

End Sub 
```

但是由两个（a1，a2，a3，b1，b2，b3 ...）采用的行（lines = linex）的结果组合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:34:16.240

VB.net 是否不允许你去：

```
Dim example as string = textBox1.Text & " " & textBox2.Text & " " & textBox3.Text 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:38:21.627

这可能是做到这一点的方法之一。1 - 拆分文本框 1 和 2 的文本。2-您将获得每个相等数量的文本框的数组（在提到的情况下）。3 - 使用 for 循环，根据需要制作第三个文本框的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-04T11:54:44.750

暗淡示例为 string = textBox1.Text & char(10) & textBox2.Text & char(10) & textBox3.Text 我们可以不这样做吗

# linux - 用 shell 打印特定行的最快方法是什么？

> ID：16028610
> 
> 赞同：2
> 
> 时间：2013-04-16T04:06:33.927
> 
> 标签：linux, shell

我有一个包含 5000 万行的文件，我必须从中随机抽取 1000 行。

首先，我创建 1000 个随机数；然后我用

```
sed -n "$random{p;q}" file 
```

真的很慢；一条线输出至少要5-6秒。

所以我认为我应该优化打印特定的线速度。

我们有很多方法可以打印特定的行：

```
sed -n "$line{p;q}" file

awk "NR==$line{print}" file

head -$line file | tail -1 
```

这一切都很慢......打印特定行大约需要 5-6 秒。

shell中是否有其他方法可以打印特定行？或者python，perl可以比shell更快？还是我解决这个问题的方法不对？

- - - - - - - - - - - - - - - - - - - - 分裂 - - - - - -------------------------------------

迭代1000个随机数，每次使用shell一次，可能会产生1000次io操作。也许我应该先用一个数组来保存随机数，然后迭代一次文件。

```
random_array=()

awk '{if ( NR in $random_array ) print;}' file 
```

好吧，我会以这种方式测试并稍后粘贴结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:04:10.603

为了避免读取整个文件，您可以获取文件的大小，然后生成 0 和该数字之间的 1000 个偏移量的列表。这些通常是位于一行中间的位置，但您可以通读到下一个换行符，然后阅读并打印下一行。但是，这会对文件的第一行产生偏差。如果您对平均线长有一个猜测，您可以从生成的偏移量中减去该数字（任何负面结果都意味着从偏移量 0 读取和打印。）

这是概念的快速证明。出于说明目的，我假设平均行长约为 75 个字符。这也会影响公平性（选择长线之后的线的可能性更高）。最后一行的处理也不公平；如果它短于 75 个字符，则永远无法选择它（！）——您可以尝试通过根据您实际阅读的行计算实际平均行长度来解决这个问题，但我将其作为练习，以保持这个例子相当紧凑。

```
#!/usr/bin/perl

use strict;
use warnings;

use Fcntl (qw(SEEK_SET SEEK_CUR SEEK_END));

my $n = (defined @ARGV ? shift @ARGV : '--help');
die "Syntax: $0 number file\n" unless @ARGV == 1 and $n =~ m/^[0-9]+$/;

open (F, "<", $ARGV[0]) or die "$0: Could not open $ARGV[0]: $!\n";

seek (F, 0, SEEK_END) or die "$0: Could not SEEK_END $ARGV[0]: $!\n";
my $max = tell(F);

my %seen;
for (my $i=0; $i < $n; ++$i)
{
    my $offset = int(rand($max))-75;
    my $first = 0;
    if ($offset < 0)
    {
        $offset = 0;
        $first = 1;
    }
    seek (F, $offset, SEEK_SET)
        or die "$0: Could not SEEK_SET $ARGV[0]: $!\n";
    <F> unless $first;
    redo if eof (F);   # Cheap trick, just retry if at eof
    redo if $seen{tell(F)}++;
    print scalar(<F>);
} 
```

我添加了代码以避免重复；这是`%seen`哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T05:43:59.560

按照文件中的行顺序，没有内存中的所有行：

```
awk '
  NR==FNR { next }
  FNR==1{
    srand;
    n=NR-1
    for(i=1; i<=1000; i++) {
      line=0
      while(!line || line in A) line=int(rand*n)+1
      A[line]
    }
  } 
  FNR in A
' infile infile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:14:21.050

无论您使用哪种工具，查找这些线路都存在固有成本。本质上，您每次都需要遍历该大文件，查找并计算换行符。

我可以看到两种解决方案：

1.  一次性预先计算文件中的行偏移，然后用于`lseek`查找打印它们。您可以存储每 100 或 1000 行偏移以节省空间。

2.  预先生成完整的行号列表，并一次性收集文件中的行。然后打印它们。（如果您希望行的顺序是随机的，则不能随时打印）。

这些中的任何一个都很难在 shell 中完成。对于仅外壳的解决方案，请尝试 devnull 的建议，`shuf`. 但是你想要使用 1000 而不是 1：

```
shuf -n 1000 file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T06:29:50.773

如果您只想从较大规模的数据文件中获取特定行，则成本将根据您的要求增加。如果您的文件在一段时间（一周或更长时间）内是不可变的，则需要进行预处理，您的问题有一个解决方案：

1.  使用同一行将文件拆分为较小的大小
2.  将每个文件粘贴到一个文件中；之后，链接 1 将包含 1 1+n 1+2n 信息的信息
3.  需要一个包装壳来计算线。

如您所知，以上只是一种方法。

# iphone - 您将如何将此 swf 文件转换为在 iOS 上作为应用程序运行（或以现在的方式完全运行）？

> ID：16028611
> 
> 赞同：-1
> 
> 时间：2013-04-16T04:06:43.337
> 
> 标签：iphone, flash, ipa, file-conversion

我偶然发现了这个开发人员很棒的 PipBoy iOS 应用程序，并渴望看到它完成，这样我就可以得到一份副本并实现我拥有它的梦想。不过，他沉默了很久，还是把这个预览贴在这里[http://www.seanzook.com/Pip-Boy/Z_Pip-Boy_App_v02.swf](http://www.seanzook.com/Pip-Boy/Z_Pip-Boy_App_v02.swf)

我立刻喜欢上了它，并尝试了好几个小时来转换它，或者至少让它在我的 iPhone 4s 上完全运行，但无济于事。我想知道是否有办法让它在我的 iPhone 上运行而不使用 Flash 浏览器，这样我也可以让它离线。

有什么办法可以将其转换为 .ipa 文件？我可以让它在我的设备上播放吗？（我已经越狱并尝试了 iSWFPlayer，但它无法正常运行）。

我真的很高兴能完成这项令人惊叹的工作，但我完全不知道如何或是否可以完成它。如果有人可以提供帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T10:45:07.393

实际上使用[Andaired将Flash SWF游戏文件转换为iOS IPA应用程序包只需几分钟](http://www.lovershorizon.com/2013/04/andaired.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:41:15.173

我建议创建一个将 SWF 加载到自身中的 Flash 项目，然后将 Flash 项目导出到 AIR for iOS，生成一个 .ipa。

[http://www.adobe.com/inspire/2012/12/ios-apps-flash-cs6.html](http://www.adobe.com/inspire/2012/12/ios-apps-flash-cs6.html)
[http://blogs.adobe.com/airodynamics/2012/11/09/packaging-and-loading-multiple -swfs-in-air-apps-on-ios/](http://blogs.adobe.com/airodynamics/2012/11/09/packaging-and-loading-multiple-swfs-in-air-apps-on-ios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T14:11:15.693

很棒的网站！我不知道如何将 swf 移植到 ipa。还有一个解决方案是gaf文件：texture atlas + config file。你试过 GAF 转换器吗？我会为你推荐这个工具。它旨在管理、转换和存储 Flash 动画。我一直在使用 GAF 使用 Starling 库创建我的 iPad 游戏。但它们也支持 Cocos2d-x 和 Unity3d。

# perl - Perl 用逗号分割函数

> ID：16028614
> 
> 赞同：0
> 
> 时间：2013-04-16T04:06:50.037
> 
> 标签：perl, split, comma

我有一个文件，其中包含以下行，

```
<tag host="xyz|abc" some info />
<tag host="ijk,cdf" some info /> 
```

我通过使用模式匹配来获取主机的信息，我想拆分主机的值。出于某种原因，即使看起来正确，以下代码似乎也不适用于逗号。

```
if($line =~ m/(\s\S)*host=\"(\S+)\"(\s\S)*/)
{
($val) = ($2);
$val=~tr/!$()//ds;
my @values;
if($val =~ m/((\S+)\|(\S+))*/ )
{
    @values=split('\|',$val);
}
else
{
@values=split(',',$val);
}
#Perform some action on Values.
} 
```

谁能帮我这个 ？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:31:47.523

一些想法：

*   `use strict`，`use warnings`并且一些缩进会很好:)

*   你在哪里写`(\s\S)`的我想你熟悉 JavaScript 并且是指*字符类* `[\s\S]`？无需匹配您感兴趣的部分之前和之后的文本

*   `/s`修饰符`tr///`on与`/d`

*   收集既不是竖线也不是逗号的所有字符子串要容易得多

这就是我的写法

```
use strict;
use warnings;

while (my $line = <DATA>) {
    if ($line =~ m/host="(\S+)"/) {
        (my $href = $1) =~ tr/!$()//d;
        my @values = $href =~ /[^,|]+/g;
        print "@values\n";
    }
}

__DATA__
<tag host="xyz|abc" some info />
<tag host="ijk,cdf" some info /> 
```

**输出**

```
xyz abc
ijk cdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:46:33.090

`if-else`在您的代码中不需要。您可以将条件组合成一行代码。

像这样更改您的代码：

```
use strict;
use warnings;

if($line =~ m/(\s\S)*host=\"(\S+)\"(\s\S)*/)
{
($val) = ($2);
$val=~tr/!$()//ds;
my @values;
@values = split (/[,|]/,$val);
#Perform some action on Values.
} 
```

# c# - 使用 SQLCommand 登录功能

> ID：16028616
> 
> 赞同：0
> 
> 时间：2013-04-16T04:07:32.307
> 
> 标签：c#, function, login

执行下面的代码时遇到问题。当我的用户名和密码为真时，我将收到此消息“无效的用户！使用有效的用户名和密码重试”。如果我输入错误的用户名 n 密码，则什么也不会发生（仍然无法进入下一个表单）。

```
private bool CompareStrings(string string1, string string2)
    {
        return String.Compare(string1, string2, true, System.Globalization.CultureInfo.InvariantCulture) == 0 ? true : false;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        try 
        {
            SqlConnection con = new SqlConnection();
            con.ConnectionString = "Server = blabla; Database = MoinMoun; User Id = Aema; password = 12345";
            con.Open();

            //SqlCommand cmd = new SqlCommand("SELECT username,password FROM Admin WHERE username='" + txtusername.Text + "' and password='" + txtpassword.Text + "'", con);SELECT ISNULL(username,'') AS username, ISNULL(password,'') AS password FROM Admin WHERE username = '" + txtusername.Text + "' and password='" + txtpassword.Text + "'", con

            SqlCommand cmd = new SqlCommand("SELECT username,password FROM Admin WHERE username='" + txtusername.Text + "' and password='" + txtpassword.Text + "'", con);

            SqlDataReader dr = cmd.ExecuteReader();

            string usertext = txtusername.Text;
            string passtext = txtpassword.Text;

            while(dr.Read())
            {

                if(this.CompareStrings(dr["username"].ToString(), usertext) &&
                    this.CompareStrings(dr["password"].ToString(), passtext))
                {
                    Form2 frm = new Form2();
                    frm.Show();
                    this.Hide();                        
                }
                else
                {       
                    MessageBox.Show("Invalid User! Try again with VALID username and password");                        
                }
            }
            dr.Close();
            con.Close();
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:26:30.527

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection();
    try
    {
        con.ConnectionString = "Server = blabla; Database = MoinMoun; User Id = Aema; password = 12345";
        con.Open();

        SqlCommand cmd = new SqlCommand("SELECT username,password FROM Admin WHERE username=@userName and password=@passWord", con);
        cmd.Parameters.Add(new SqlParameter("@userName", txtusername.Text));
        cmd.Parameters.Add(new SqlParameter("@passWord", txtpassword.Text));
        SqlDataReader dr = cmd.ExecuteReader();

        if (dr.Read())
        {
            con.Close();
            dr.Close();
            Form2 frm = new Form2();
            frm.Show();
            this.Hide();
        }
        else
        {
            MessageBox.Show("Invalid User! Try again with VALID username and password");
        }
        if (!dr.IsClosed)
            dr.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
    finally
    {
        if (con.State == System.Data.ConnectionState.Open)
            con.Close();
        con.Dispose();
    }
} 
```

由于您已经在查询本身中比较用户名和密码，因此无需再次检查。

用于`SqlParameter`在执行查询之前验证用户输入，可以防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

还要始终尝试尽早关闭与 DB 的连接。您需要释放资源使用量。尝试关闭 finally 块中的连接，以确保在离开 try 块之前关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:23:01.317

使用这个：

```
 SqlParameter[] parameters = new SqlParameter[]
                             {
                                 new SqlParameter("@username", txtusername.Text),
                                 new SqlParameter("@pwd", txtpassword.Text)
                             };
SqlCommand cmd = new SqlCommand("SELECT username,password FROM Admin WHERE username=@username and password=@pwd", con);
cmd.Parameters.AddRange(parameters); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:41:37.663

我同意我也将转向 sql 参数解决方案，并且我还将使用 trim 方法修剪您的输入文本以及任何额外的空白。

我还认为需要更多信息，例如 compareStrings 方法代码。比较字符串时，我会使用 .equals() 方法或 String.Compare() 。例如

```
Usertxt.equals(dr["username"].ToString());
String.Compare(usertxt,Dr["username"].ToString(),false); 
```

# java - Java Swing中的Firefox选项窗格UX设计？

> ID：16028618
> 
> 赞同：1
> 
> 时间：2013-04-16T04:07:47.673
> 
> 标签：java, swing, jtabbedpane, tabpanel

我需要使用 Java Swing 设计一个类似于`Firefox > tools > options`（如下所示）的窗口。我必须创建两个顶部标题。单击每个我必须打开选项卡窗格（与 相同`Firefox > tools > options > advanced`。我对 Swing 非常陌生。

![在此处输入图像描述](https://i.stack.imgur.com/sAdTq.png)

感谢您的快速回复。我已尝试实施相同的操作。基本窗口是 JDialog。我在其中创建了顶部面板。工具栏（在 topPanel 的 BorderLayout-North 处）和内容面板（在 topPanel 的 BorderLayout-Center 处）被添加到这个顶部面板中。创建了两个工具栏按钮——“通用”和“高级”，它们是我在上一篇文章中谈到的标题。“contentPanel”是占位符面板。每当单击工具栏按钮时，我想在其中动态添加选项卡式面板。默认值是通用的。

单击高级工具栏按钮时，我想删除 _generalTabbedPane 并显示 _advanceTabbedPane ，反之亦然。

但它没有正确发生。单击工具栏按钮时添加和删除/隐藏面板是我需要修复的。我附上了下面的代码。

请帮忙。

```
 @Override
   public JComponent createContentPanel()
  {        
   topPanel  = new JPanel();
   topPanel.setLayout(new BorderLayout());     
   JToolBar toolBar = new JToolBar();
   toolBar.add(new tabButton("general",GENERAL));
   toolBar.add(new tabButton("advanced",ADVANCED));

   contentPanel = new JPanel();       
   contentPanel.add(getGeneralTabs());

   topPanel.add(toolBar, BorderLayout.NORTH);
   topPanel.add(contentPanel, BorderLayout.CENTER);        
   return topPanel;

}  
private  final class JCenterLabel extends JLabel
{       
    public JCenterLabel(final String s)
    {
        super(s);
        setAlignmentX(Component.CENTER_ALIGNMENT);
    }

    public JCenterLabel(final Icon i)
    {
        super(i);
        setAlignmentX(Component.CENTER_ALIGNMENT);
    }
}

private  class tabButton extends JButton
{   
    public tabButton (  String tabId,String actionCommand)
    {
        super();
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));      
        add(new JCenterLabel(UIManager.getIcon("OptionPane.informationIcon"))); 
        add(new JCenterLabel(tabId)); 
        this.setActionCommand(actionCommand);
        this.setName(tabId);
        this.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) { 
            String cmd = e.getActionCommand();
            if (GENERAL.equals(cmd)) { 
                if(contentPanel != null){
                contentPanel.remove(_advanceTabbedPane);     
                contentPanel.add(getGeneralTabs());
                contentPanel.revalidate();
                contentPanel.repaint();

                }

            } else if (ADVANCED.equals(cmd)) { 
                if(contentPanel != null){
                contentPanel.remove(_generalTabbedPane);               
                contentPanel.add(getAdvancedTabs());
                contentPanel.revalidate();
                contentPanel.repaint();

                }
            } 

        }
        });
}
}

  private JideTabbedPane  getGeneralTabs(){
    _generalTabbedPane = new JideTabbedPane();
    _generalTabbedPane.setModel(new TabbedPaneWithValidationModel());
    //adding the tabs to the _generalTabbedPane
    //-----
    //---

    return _generalTabbedPane;

}
  private   JideTabbedPane getAdvancedTabs(){
      _advanceTabbedPane = new JideTabbedPane();
      _advanceTabbedPane.setModel(new TabbedPaneWithValidationModel());
      //adding the tabs to the _advanceTabbedPane
    //-----
    //---
      return _advanceTabbedPane;

  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T04:12:10.067

I see a [`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html) in [`BorderLayout.NORTH`](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html), a [`JTabbedPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html) in `BorderLayout.CENTER` and a `JPanel` using `FlowLayout.RIGHT` in `BorderLayout.SOUTH`. [`BorderFactory`](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html) can supply the titled border.

Addendum: *I have to create two top headers.*

If you need *two* top headers, you can add two instances of `JToolBar` to a `JPanel` having `GridLayout(0, 1)`, then add that panel to `BorderLayout.NORTH`. See also this nested panel [example](https://stackoverflow.com/a/5630271/230513). Use [`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html) to encapsulate your toolbar behaviors, for [example](https://stackoverflow.com/a/4039359/230513).

Addendum: *Whenever the advanced toolbar button is clicked, I want to remove the* `generalTabbedPane` *and show the* `advanceTabbedPane` *and vice versa.*

You *could* use [`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html), shown [here](https://stackoverflow.com/a/5655843/230513), to accomplish this. A better approach might be to let each tab's abstract parent implement a [suitable interface method](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html), e.g. `setAdvanced()`. The default would do nothing, but some concrete implementations could respond accordingly.

# c# - 嵌套调用中的异步和等待。不等待执行等待导致 IIS 崩溃的方法

> ID：16028621
> 
> 赞同：3
> 
> 时间：2013-04-16T04:07:53.390
> 
> 标签：c#, async-await, c#-5.0

我一直在网上找一些问题，希望这里有人可以为我解答。我正在尝试解决导致 IIS 崩溃的问题。该服务调用应该是一种即发即忘的调用类型。如果失败，我们会抑制并记录异常。因为它是一个长时间运行的服务调用，所以它被实现为异步的。当前的实现有一些嵌套的方法调用，如下所示：

```
// in first service
public void PerformService(some params)
{
    // setup and validation

    DoAction();
}
private void DoAction()
{
    // final setup

    OtherService.FireAndForgetAsync(some params);
}

// in the other service (OtherService)
public async Task FireAndForgetAsync()
{
    await Task.Run(() => 
    {
        try 
        {
           // do some long running stuff
        }
        catch (Exception e)
        {
            ErrorLogger.LogError(e)
        }
    }
} 
```

实际上，我们处于调用 PerformService 的循环（从 0 次迭代到多次迭代）中，并且当前出现以下异常：

```
System.NullReferenceException: Object reference not set to an instance of an object. at   
System.Web.ThreadContext.AssociateWithCurrentThread(Boolean setImpersonati onContext) at 
System.Web.HttpApplication.OnThreadEnterPrivate(Boolean setImpersonationCo ntext) at
System.Web.LegacyAspNetSynchronizationContext.CallCallbackPossiblyUnderLock(SendOrPostCallback callback, Object state) at System.Web.LegacyAspNetSynchronizationContext.CallCallback(SendOrPostCallb ack callback, Object state) at System.Web.LegacyAspNetSynchronizationContext.Post(SendOrPostCallback call back, Object state) at System.Threading.Tasks.SynchronizationContextAwaitTaskContinuation.PostAct ion(Object state) at System.Threading.Tasks.AwaitTaskContinuation.RunCallback(ContextCallback c allback, Object 
```

即使我在 try catch 块中强制发生异常（以测试我们的错误记录器），它也会被我们的错误记录器正确捕获和记录。请求完成后，某些线程似乎仍在尝试执行 SynchronizationContext.Post。我认为我们不正确地使用了 C# 5 的 async/await，因为 FireAndForgetAsync 正在等待，但没有别的。所以，我们说我们要等待，然后离开。http 请求结束，到那时它无法同步自己备份，因为没有任何东西可以同步。不好，因为这完全崩溃了 IIS。我主要是在寻找其他人的意见，因为我对 C# 5 中的 async/await 以及合适的解决方案不是很熟悉。由于我们不想等待它完成，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T11:54:50.667

> 该服务调用应该是一种即发即忘的调用类型。

希望你那里没有任何重要的代码，因为[IIS 不是为这样使用而设计的](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)。

> [堆栈跟踪] ... LegacyAspNetSynchronizationContext ...

红色的标志！`LegacyAspNetSynchronizationContext`不能与`async`and完美搭配`await`。

请确保您的 web.config 中有以下设置：

```
<appSettings>
   <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings> 
```

* * *

如果您在 中执行实际的业务逻辑`FireAndForgetAsync`，那么您应该更改您的架构：将`DoAction`后期工作放到持久存储（例如，Azure 队列）并让独立的非 IIS 服务（例如，Azure 工作者角色）处理中的工作队列。

如果您的`FireAndForgetAsync`工作不重要，那么您可以使用[`BackgroundTaskManager`我博客上的类型](http://blog.stephencleary.com/2012/12/returning-early-from-aspnet-requests.html)来缓解这种方法的问题......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T05:00:23.393

除非您在lambda 完成`await`后有事可做，否则您不应该这样做。`Task.Run`通过执行`await`，您实际上是在请求恢复上下文以在返回的 Task 完成之前基本上不执行任何操作。

如果你*有理由*做一个`await`（即一些应该在`Task.Run`lambda 完成后完成的工作），并且你不希望它尝试恢复上下文，那么你可以`ConfigureAwait(false)`在从`Task.Run`.

请参阅这篇文章以获得很好的解释：

*   [“理解 C# 5 async/await 中的上下文”](https://stackoverflow.com/questions/12456115/understanding-context-in-c-sharp-5-async-await)

# wpf - 知道用户控件是否完成了 Silverlight 4 中数据的加载

> ID：16028622
> 
> 赞同：0
> 
> 时间：2013-04-16T04:08:19.147
> 
> 标签：wpf, silverlight

我有一个导航页面，在其中我在运行时使用数据网格加载多个用户控件。用户控件中的这些数据网格显然由 WCF 加载。我在父控件中有一个 BusyIndi​​cator，需要确定用户控件是否已完成从 WCF 加载数据，以便我可以将 BusyIndi​​cator 的 IsBusy 属性设置为 false。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:21:56.610

您需要在检索控件数据的方法的异步回调中执行此操作。例如，在 ViewModel 中，您可能有以下代码（这不是工作代码……只是一个示例）：

```
private bool _inProgress = true;

public bool InProgress
{
     get { return _inProgress; }
     set
            {
                if (_inProgress != value)
                {
                    _inProgress = value;
                    NotifyOfPropertyChange(() => InProgress);
                }
     }
}

public void GetData()
{
InProgress = true;
_wcfClient = myWCFDataClient;
_wcfClient.GetDataCompleted += _wcfClient_GetDataCompleted;
_wcfClient.GetDataAsync();
}

//Async callback
protected void _wcfClient_GetDataCompleted(object sender, MyCustomEventArgs e)
{
InProgress = false;
} 
```

视图中的 BusyIndi​​cator 需要绑定到 ViewModel 的 InProgress 属性。如果您有多个方法被多个控件调用，您可能需要查看一些高级异步模式。有关一些想法，请参阅我的帖子：[C# 4 的任何好的异步工作流模式？](https://stackoverflow.com/questions/6529066/any-good-async-workflow-patterns-for-c-sharp-4/6531822#6531822). 不确定您使用的是什么版本的 C#。我上一篇文章的链接是在版本 4.5 发布之前。

# regex - 为什么“RewriteRule (.*)”失败，而 RewriteRule .* 有效？

> ID：16028624
> 
> 赞同：0
> 
> 时间：2013-04-16T04:08:46.100
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我已将此 .htaccess 放在我的根文件夹中：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule   (.*) public/$1    [L]
 </IfModule> 
```

它会导致 500 内部服务器错误，没有任何解释。

如果我删除括号，它会起作用：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule   .* public/$1    [L]
 </IfModule> 
```

为什么？paranthesis在这里不应该是中性的吗？

我正在使用最新的 XAMPP 版本（Windows）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:34:13.503

正则表达式组用圆括号括起来，在这种情况下，表达式`.*`匹配所有内容，因此始终使用该规则。

使用括号中的表达式，规则映射到`public/WhateverIsInsideParenthesis`，因为`$1`是对组 1: 的反向引用`(.*)`。在这种情况下只有一个。

没有括号，规则只映射到`public/`，因为没有组。括号内没有任何内容。

您没有给出请求的示例，而是针对以下内容：

`http://example.com/folder1/folder2/script1/`括号内的 URI 路径是`folder1/folder2/script1/`和替换 URL：

`http://example.com/public/folder1/folder2/script1/`

因此，在这种情况下，有几个错误的原因，有或没有括号。规则映射到的请求、循环等都可能产生该错误。500 Internal Server Error 一般`HTTP status code`用于所有出错的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:40:34.893

是的，括号对*模式*是中性的。

但是，当您在替换中使用捕获的字符串 as 时，它们会有所不同`$1`。那么这个规则相当于

```
RewriteRule (.*) public/$1 
```

或者

```
RewriteRule .* public/ 
```

当您省略括号并替换`$1`为`$0`

```
RewriteRule .* public/$0 
```

那么你又遇到了同样的错误，这次没有括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:36:11.707

如果你把起始字符放进去会发生什么`^`？

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule   ^(.*) public/$1    [L]
</IfModule> 
```

# google-plus - Google Plus SignIn 通话排队等候

> ID：16028626
> 
> 赞同：1
> 
> 时间：2013-04-16T04:08:47.123
> 
> 标签：google-plus

我正在尝试在我的骨干 js 应用程序中使用 google+ 登录。用户流是这样的

1.  用户单击登录按钮
2.  这将使用 google+ 登录按钮（以及 facebook 登录等）打开一个引导程序（thttp://twitter.github.io/bootstrap/）模式
3.  用户必须明确单击 g+ 登录按钮才能登录我的网站。

为了防止自动 g+ 登录，我所做的是显示一个自定义 g+ 登录按钮并在单击时使用带有该自定义登录按钮的“gapi.signin.render”api 作为容器。这在第一次单击登录按钮时工作正常，但是如果用户注销并尝试重新登录，则第一次单击没有任何反应，但在第二次单击时，g+ 登录被触发两次，并且每次用户注销时增加 1并重新登录。每次 g+ 登录仅在第二次点击时触发。请注意，我的应用程序是单页应用程序，因此在注销和登录之间没有重新加载。如果我重新加载该站点，那么它会在第一次运行时再次出现问题，随后的登录又会出现问题。

注意：我用于显示 g+ 登录按钮的模式（及其 DOM）在每次成功登录后都会被删除，并在每次用户单击主登录按钮时重新创建。我注意到在成功登录后，由 g+ 登录按钮创建的 iframe 仍然存在，并且当我再次重新创建模式并调用“gapi.signin.render”api 调用时可能会产生干扰。

我使用的代码是

在主干视图中，渲染方法具有

```
render: function() {
        var thisV = this;
        _.defer(function(){
            gapi.signin.render('gSignIn', {
              'callback': thisV.gPlusLoginCB,
              'clientid': "clientID",
              'requestvisibleactions': "http://schemas.google.com/AddActivity",
              'scope': "https://www.googleapis.com/auth/plus.login",
              'theme': 'dark',
              'cookiepolicy': "single_host_origin"
            });
        });
    } 
```

在我的 html 模板中

```
<button id="gSignIn" class="btn gplogin">
      <i class="icon-google-plus"></i>Login
</button> 
```

关于 G+ 登录呼叫为何排队或如何实施我的方案的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:18:52.797

我不知道为什么您应该看到多次身份验证尝试。

你能发布一个你看到这种行为的最小代码示例吗？

作为根据您的描述的猜测，您是否将 g-signin 按钮的自定义渲染与 gapi.signin.render 混合在一起？例如渲染一个自定义按钮：

```
<span id="signinButton">
  <span
    class="g-signin"
    data-callback="signinCallback"
    data-clientid="CLIENT_ID"
    data-cookiepolicy="single_host_origin"
    data-requestvisibleactions="http://schemas.google.com/AddActivity"
    data-scope="https://www.googleapis.com/auth/plus.login">
    <!-- Custom button markup -->
  </span>
</span> 
```

然后调用例如：

```
gapi.signin.render('signinButton', {
      //'callback': 'signinCallback',
      'clientid': 'CLIENT_ID',
      'cookiepolicy': 'single_host_origin',
      'requestvisibleactions': 'http://schemas.google.com/AddActivity',
      'scope': 'https://www.googleapis.com/auth/plus.login'
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T16:02:07.013

抱歉这么晚了。我刚刚遇到了完全相同的问题。

当我将`options`对象的创建移出函数时，一切正常：

```
var options = {
                  'callback': thisV.gPlusLoginCB,
                  'clientid': "clientID",
                  'requestvisibleactions': "http://schemas.google.com/AddActivity",
                  'scope': "https://www.googleapis.com/auth/plus.login",
                  'theme': 'dark',
                  'cookiepolicy': "single_host_origin"
                }

/**

/**

/**

    render: function() {
            var thisV = this;
            _.defer(function(){
                gapi.signin.render('gSignIn', options );
            });
        } 
```

# php - 如果 $variable1 大于 $variable2 则中断并继续

> ID：16028629
> 
> 赞同：-5
> 
> 时间：2013-04-16T04:08:51.580
> 
> 标签：php

如果 $variable1 大于 657246 我需要中断循环然后继续循环数组

像这样的东西

```
for($i=0;$i<count($out[0]);$i++){

$variable1 = "$z->extract('<postid-','>',$data);"

   if (**sentence**) {
       continue; // Don't continue the sentences below and continue the next value from the loop
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:16:32.557

错误。据我所知，如果 $variable1 大于 657246（顺便说一句随机数？），您只是想跳过当前循环。

如果是这样，你就在正确的轨道上继续。

```
if ($variable1 > 657246) {
     continue; 
} 
```

或者，如果您只想运行循环内的内容（如果它更大）

```
if ($variable1 <= 657246) {
     continue; 
} 
```

[Continue](http://nz1.php.net/manual/en/control-structures.continue.php)结束**当前循环**并从顶部重新开始。
[Break](http://nz1.php.net/manual/en/control-structures.break.php)结束**整个循环结构**并从循环的结束 } 开始运行。

或者，正如手册所说：

> **continue**用于循环结构中以跳过当前循环迭代的其余部分并在条件评估处继续执行，然后开始下一次迭代。
> 
> **break**结束当前 for、foreach、while、do-while 或 switch 结构的执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:15:44.653

不确定您要做什么..但是如果我理解正确，您可以只使用布尔值。

```
$toContinue = true;
for($i=0;$i<count($out[0]);$i++){

$variable1 = "$z->extract('<postid-','>',$data);"

   if (**sentence**) {
      $toContinue = false;
   }

   if($toContinue){
      //more sentences php
      //more sentences php
      //more sentences php
      //more sentences php
   }
   $toContinue = true;

} 
```

# html - 如何从外部静态 html 页面向 Rails 应用程序提交表单内容？

> ID：16028633
> 
> 赞同：0
> 
> 时间：2013-04-16T04:09:25.550
> 
> 标签：html, ruby-on-rails, ruby

我在外部遗留 [coldfusion] 系统上有一个 html 表单，我想在我的新 Rails 应用程序中提交给我的用户控制器中的 create 方法 - 不幸的是，我是一个 Rails 菜鸟，一无所知。

外部遗留应用程序中的 html 是：

```
<form action="http://floating-caverns-7335.herokuapp.com/users" method= "post">
<input type="text" name="name" value="nametestvalue">
<input type="submit" name="Submit" value="testROR"> 
```

rails 应用程序中的代码是在用户控制器中创建的 [标准菜鸟脚手架] 方法：

```
def create
    @user = User.new(params[:user])
    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

当我执行第一个 html 代码时，rails 应用程序创建了一个新的用户记录，但名称字段的值为空白。我忽略了什么会正确加载指定的名称字段值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:20:06.380

您可以看到正在使用 params[:user] 创建一个新用户。因此，您需要将这样的用户哈希发送`:user => { name: "an user"}`到服务器，然后更改输入名称属性：

`<input type="text" name="user[name]" value="nametestvalue">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:12:08.520

Just replace this line,

```
<input type="text" name="user[name]" value="nametestvalue"> 
```

This is because in following statement

```
@user = User.new(params[:user]) 
```

you are passing params[:user] which is currently blank. This need to contain user attributes. I will suggest you to inspect web logs to check parameter list. You can do the same in firebug net panel as well.

Hope this helps!

# r - 95% CI 用于参数估计

> ID：16028634
> 
> 赞同：1
> 
> 时间：2013-04-16T04:05:57.427
> 
> 标签：r

如何获得参数最大似然估计的95%置信区间`gev.fit`？`ismev`在 R 中的包。

的输出`gev.fit`：

```
$conv
[1] 0

$nllh
[1] 194.6467

$mle
[1] 93.33096665 17.53896061 -0.02969443

$se
[1] 2.92704621 2.06566895 0.09614705 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:13:16.177

如果您可以提出一个连贯的论点，即 $mle 值与 $se 中的标准误差呈正态分布，那么您可以获得 95% 的 CI：

```
 LowerBounds <- gev.fit$mle - 1.96*gev.fit$se
 UpperBounds <- gev.fit$mle + 1.96*gev.fit$se 
```

# java - 初学者可扩展性

> ID：16028638
> 
> 赞同：-4
> 
> 时间：2013-04-16T04:09:47.290
> 
> 标签：java, oop, scalability

就可扩展性而言，从具体类或接口创建对象会更明智？

例如，而不是：

```
LinkedStack<Integer> list = new LinkedStack<Integer>(); 
```

应该是这样的：

```
StackInterface<Integer> list = new LinkedStack<Integer>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:17:18.203

第二种方式称为**接口代码**。

[参考链接](http://www.javaworld.com/jw-08-1999/jw-08-interfaces.html)

第二种方式是可以说的。使用接口作为子类对象的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:13:11.347

In my opinion:

```
LinkedStack<Integer> list = new LinkedStack<Integer>(); 
```

is better **only** if you need specific methods on LinkedStack that are not declared in `StackInterface`.

```
StackInterface<Integer> list = new LinkedStack<Integer>(); 
```

is better if you do not, because then you can 'plug in' any implementer of the interface for different reasons (efficiency reasons for example).

# c# - int转字符串，字符串索引号错误

> ID：16028640
> 
> 赞同：0
> 
> 时间：2013-04-16T04:10:26.533
> 
> 标签：c#

嘿，我想把我的六位数 int 变成一个字符串。我目前的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Euler_4
{
    class Program
    {
        static void Main(string[] args)
        {
            string snum;
            int num;
            string final = "nul";
            char first;
            char second;
            for (int i = 100, h = 100; i < 999; i++, h++)
            {
                num = i * h;
                snum = num.ToString();
                first = snum[0];
                second = snum.ToCharArray()[5]; //Line of interest
                if (first == second)
                {
                    final = snum;
                }
            }
            Console.WriteLine(final);
            Console.ReadLine();

        }
    }
} 
```

问题是当我尝试运行它时它不断返回索引超出范围异常。如果它从 0 开始，那么第六位数字不是 [5] 并且 [4] 返回第五位数字，所以我在这里不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:13:58.537

```
100 * 100 = 10000
            01234 <- array indexes. 
```

中只有*五位*数字`10000`，见上文。索引范围从 0 到 4，因此尝试提取索引 5 会让您感到悲伤。

如果你想检查第一个和最后一个数字是否相等，第一个可以通过简单的循环获得，最后一个可以通过模运算符找到：

```
int firstDigit = num;
while (firstDigit / 10 > 0) firstDigit /= 10;
int lastDigit = num % 10; 
```

这样您就可以比较它们，而无需先将它们转换为字符串的相对昂贵的操作（相信我，这不是您想要为欧拉问题做的事情）。

您甚至可以优化该循环，因为您知道所有候选数字都是五位数或六位数：

```
int firstDigit;
if (num < 100000) firstDigit = num /  10000;
else              firstDigit = num / 100000;
int lastDigit = num % 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:19:56.633

尝试这个

```
for (int i = 100, h = 100; i < 999; i++, h++)
    {
        num = i * h;
        snum = num.ToString();
        first = snum.ToCharArray()[0];
        second = snum.ToCharArray()[4];
        if (snum.ToCharArray().Length > 5)
        {
            second = snum.ToCharArray()[5]; //Line of interest
        }
        if (first == second)
        {
            final = snum;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:15:21.310

自 100*100 == 10000 以来第一次迭代的 Num 将为 5 位，它存储为长度为 5 的字符串。由于数组索引为 0，因此您的字符串只能索引 0-4

[5] 将超出范围，因为这将假定一个长度为 6 的字符串

# unit-testing - Karma 没有执行任何单元测试

> ID：16028647
> 
> 赞同：25
> 
> 时间：2013-04-16T04:10:48.360
> 
> 标签：unit-testing, angularjs, jasmine, karma-runner

我似乎在让我的 Jasmine 单元测试实际执行时遇到问题。我已经通过将 logLevel 设置为 LOG_DEBUG 来验证我的所有脚本都被加载了。我的单元测试与服务测试@ [https://github.com/angular/angular-seed/blob/master/test/unit/servicesSpec.js](https://github.com/angular/angular-seed/blob/master/test/unit/servicesSpec.js)相同。

另外，我使用过 Testacular（在它更名为 Karma 之前），我不记得有这个问题。我似乎让 Chrome 运行，但我必须手动点击“调试”按钮。即使我按下此按钮，我的测试也不会运行。

**系统详情：**

*   Windows 7的
*   节点 v0.10.4
*   铬 26.0.14
*   Karma 0.8.5（安装了 3 个警告 - 2 个精度损失和一个“内联函数 v8::Persistent v8::Persistent::New(v8::Handle) 没有定义”）

这是我的模块代码（Scripts/main.js）：

```
angular.module('sb.services', []).value('version', '0.0.1').value('amplify', amplify);
angular.module('sb.directives', []);
angular.module('sb.filters', []);
angular.module('sb.controllers', []).controller('SbController', [
    '$scope', 
    'amplify', 
    function ($scope, amplify) {
        $scope.message = 'Hello World! (amplify exists?=' + !!amplify + ')';
    }
]);
angular.module('sb', [
    'sb.services',
    'sb.directives',
    'sb.filters',
    'sb.controllers'
]); 
```

这是我的规范（Test/unit/servicesSpec.js）：

```
'use strict';

describe('my services', function () {
    beforeEach(module('sb.services'));

    describe('version', function () {
        it('should return current version', inject(function(version) {
            expect(version).toEqual('0.0.1');
        }));
    });
}); 
```

这是我的 karma.conf.js 文件：

```
// Karma configuration
// Generated on Mon Apr 15 2013 20:56:23 GMT-0400 (Eastern Daylight Time)

// base path, that will be used to resolve files and exclude
basePath = '';

// list of files / patterns to load in the browser
files = [
  JASMINE,
  JASMINE_ADAPTER,
  'Vendor/angular-1.0.6/angular.js',
  'Vendor/angular-1.0.6/angular-*.js',
  'Vendor/json2/json2.js',
  'Vendor/jquery/jquery-1.8.2.js',
  'Vendor/amplify/amplify.js',
  'Scripts/main.js',
  'Test/unit/*.js'
];

// list of files to exclude
exclude = [

];

// test results reporter to use
// possible values: 'dots', 'progress', 'junit'
reporters = ['progress'];

// web server port
port = 9876;

// cli runner port
runnerPort = 9100;

// enable / disable colors in the output (reporters and logs)
colors = true;

// level of logging
// possible values: LOG_DISABLE || LOG_ERROR || LOG_WARN || LOG_INFO || LOG_DEBUG
logLevel = LOG_WARN;

// enable / disable watching file and executing tests whenever any file changes
autoWatch = false;

// Start these browsers, currently available:
// - Chrome
// - ChromeCanary
// - Firefox
// - Opera
// - Safari (only Mac)
// - PhantomJS
// - IE (only Windows)
browsers = ['Chrome'];

junitReporter = {
    outputFile: 'Test/out/unit.xml',
    suite: 'unit'
};

// If browser does not capture in given timeout [ms], kill it
captureTimeout = 60000;

// Continuous Integration mode
// if true, it capture browsers, run tests and exit
singleRun = false; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-14T06:34:41.673

我刚刚遇到了同样的问题，我发现我必须`autoWatch = true`在 Karma 自动运行测试之前进行设置。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-15T02:47:45.760

或者，您可以在 karma.conf.js 中使用 exclude 部分

```
exclude = [
  'Vendor/angular-1.0.6/angular-scenario.js'
]; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-16T21:56:11.153

我的最后一个答案是错误的（将 JASMINE 和 JASMINE_ADAPTER 线移动到 angular.js 线下方）。它解决了这个特定问题，但产生了其他问题。相反，我修复它的方法是只指定 angular-mocks 文件，而不是 angular-*，如下所示：

```
 JASMINE,
   JASMINE_ADAPTER,
  'Vendor/angular-1.0.6/angular.js',
  'Vendor/angular-1.0.6/angular-mocks.js',
  'Vendor/json2/json2.js',
  'Vendor/jquery/jquery-1.8.2.js',
  'Vendor/amplify/amplify.js',
  'Scripts/main.js',
  'Test/unit/*.js' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-02-20T12:33:34.350

我尝试了以上所有方法都没有成功，直到最后......

在我的`karma.conf.js`我删除了**requirejs**依赖项，例如：

```
 frameworks: ['jasmine', 'requirejs'], 
```

到：

```
 frameworks: ['jasmine'], 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-14T21:51:35.697

如果您尝试使用 JASMINE 和 JASMINE_ADAPTER 解决此问题，则不再受支持（至少在 Karma 版本 0.10.2 上）。

而是使用：

```
frameworks: ['jasmine'] 
```

在您的 Karma 配置文件中。[您可以在此处](http://karma-runner.github.io/0.10/config/configuration-file.html)阅读相关内容。

我还发现在我的文件数组中我设置`included: false`了一个模式。 `included`仅在您想要手动包含 Javascript 文件时使用（例如，如果您将使用 require.js）。如果您的所有测试都将从该模式加载，您将看到类似于以下内容的消息：

```
PhantomJS 1.9.2 (Linux): Executed 0 of 0 ERROR (0.151 secs / 0 secs) 
```

因为永远不会包含包含测试的文件。从我的模式的 files 数组中删除`included: false`修复了这个问题，因为如果未指定包含的默认值是`true`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-26T11:54:51.550

在我的情况下`singleRun`设置为`false`

**解决方案**： `// Continuous Integration mode // if true, Karma captures browsers, runs the tests and exits singleRun: true`

# android - 自定义 SurfaceView：绘制不出现

> ID：16028648
> 
> 赞同：1
> 
> 时间：2013-04-16T04:10:51.627
> 
> 标签：android, surfaceview

我正在使用自定义表面视图。但是没有出现绘图并且视图是全黑的：

```
public class SV extends SurfaceView {

    Context context;

    public SV (Context a_context)
    {
        super(a_context);
        context = a_context;
    }

    @Override
    public void draw (Canvas c)
    {
        c.drawColor(0xFFFF0000);
        Paint p = new Paint();
        p.setColor(0xFFFFFFFF);
        c.drawCircle(c.getWidth()/2, c.getHeight()/2, 150, p);
    }

    @Override
    public void onDraw (Canvas c)
    {
        c.drawColor(0xFF0088FF);
    }

} 
```

在 onCreate 活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    SV sv = new SV (this);
    setContentView(sv);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:39:52.650

将语句添加`setWillNotDraw(false)`到 from 的`surfaceCreated()`方法中`SurfaceHolder.Callback`。所以你需要在你的`Activity`.

```
public class CameraPreview extends Activity implements SurfaceHolder.Callback{

    private SurfaceHolder holder;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        // your activity initiating code
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // Do somthing when surface changed.
    }

    public void surfaceCreated(SurfaceHolder holder) {
       // Do something when surface first created.
       // add setWillNotDraw(false) to enable onDraw() and other functions
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
       // cleanup here
    }

} 
```

# c# - 将 LocalDB 应用程序部署到 Arvixe 失败

> ID：16028650
> 
> 赞同：0
> 
> 时间：2013-04-16T04:11:17.963
> 
> 标签：c#, iis, deployment, connection-string, localdb

我正在尝试将 WCF 数据服务部署到 Arvixe。数据服务基于 Entity Framework 5 和 Data Services 5.4 构建。它创建了相当数量的 LocalDB 数据库（根据运行时输入命名）并在本地运行良好。web.config 中没有连接字符串。DB 名称被传递给 DbContext 构造函数。但是，当我将项目部署到我的 Arvixe (Windows) 帐户时，我收到此错误（如下）。该错误没有意义，因为没有任何连接字符串。如果它将任何信息写入日志文件，我将无权访问它。它不在我的标准 IIS 日志中，它显示在 wwwroot 旁边的日志文件夹中。我可以输入一个连接字符串。什么是具有数据库名称“TBD”的 localDB 连接字符串的示例？

```
The server encountered an error processing the request. The exception message is 'An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.'. See server logs for more details. The exception stack trace is:

at System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) at System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest) at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeContext() at System.Data.Entity.Internal.InternalContext.ForceOSpaceLoadingForKnownEntityTypes() at System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext() at lambda_method(Closure , Object ) at System.Data.Services.Providers.DbContextHelper.GetObjectContext(Object o) at System.Data.Services.Caching.MetadataCache`1.TryLookup(Type serviceType, Object dataContextInstance) at System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() at System.Data.Services.DataService`1.CreateMetadataAndQueryProviders(IDataServiceMetadataProvider& metadataProviderInstance, IDataServiceQueryProvider& queryProviderInstance, BaseServiceProvider& builtInProvider, Object& dataSourceInstance) at System.Data.Services.DataService`1.CreateProvider() at System.Data.Services.DataService`1.HandleRequest() at System.Data.Services.DataService`1.ProcessRequestForMessage(Stream messageBody) at SyncInvokeProcessRequestForMessage(Object , Object[] , Object[] ) at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs) at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:44:28.163

这些连接字符串应该适用于该帐户：

[https://support.arvixe.com/index.php?/Knowledgebase/Article/View/51/8/do-you-have-a-connection-string-i-can-use-to-connect-to-the -local-mssql-数据库](https://support.arvixe.com/index.php?/Knowledgebase/Article/View/51/8/do-you-have-a-connection-string-i-can-use-to-connect-to-the-local-mssql-database)

您只需要根据需要更改信息。

如果您有任何问题，请告诉我。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:19:12.180

LocalDB 位于哪里？请注意，由于我们最新的服务器不运行 SQL Server Express，您可以简单地使用 localhost 或 server.arvixe.com，其中 server 是您所在服务器的名称。

最后，即使您可能没有使用连接字符串，但是您在代码中指定的连接方式被视为“连接字符串”。所以，不需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T03:36:15.913

在与 Arvixe 进行了两周的电子邮件旅行后，他们告诉我无法在我的共享服务器上安装 LocalDb；我需要他们的 VPS 帐户。那真不幸。告诉我它最初安装的人被误导了。

# html - CSS Image not appearing

> ID：16028654
> 
> 赞同：-1
> 
> 时间：2013-04-16T04:11:40.467
> 
> 标签：html, css

I have looked in many places to find answers such as a few forums here, daniweb, as well as other similar websites like this that I've found on google, bing, and yahoo, and yet I still can't find an answer. Here is my problem that lies:

I am trying to code an image into the top of the screen (using Chrome if you wanted to know) and I want it to appear as it is the leftside of my banner.

Here is the code:

```
LeftBanner {
    width: 20px;
    height: 40px;
    background-color: #b0c4de;
    position: fixed;
    top: 5px;
    background:url('/Graphics/LeftBanner.png');
    background-attachment: fixed;
} 
```

How do you suppose I make it show up? If, in Inspect Element, I remove the checkmark for the image, a box with those dimensions appear, so I that is out of the equation. I have tried so many things that this was the last result. Any suggestions or answers are appreciated greatly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:17:15.730

您忘记了`.`(class) 或`#`(id) 选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:18:50.847

尝试这个

```
 .LeftBanner {
        width: 20px;
        height: 40px;
        background-color: #b0c4de;
        position: fixed;
        top: 5px;
        background-image:url('/Graphics/LeftBanner.png');
        background-attachment: fixed;
    } 
```

[http://www.w3schools.com/cssref/pr_background-image.asp](http://www.w3schools.com/cssref/pr_background-image.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:24:59.210

使用此语法，您应该删除第一个 slach。

如果 LeftBanner 是一个类。

```
.LeftBanner {
    width: 20px;
    height: 40px;
    background-color: #b0c4de;
    position: fixed;
    top: 5px;
    background-image:url('Graphics/LeftBanner.png');
    background-attachment: fixed;
} 
```

或者

如果 LeftBanner 是一个 id。

```
#LeftBanner {
    width: 20px;
    height: 40px;
    background-color: #b0c4de;
    position: fixed;
    top: 5px;
    background-image:url('Graphics/LeftBanner.png');
    background-attachment: fixed;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T04:17:57.107

您不能仅将图像放在您知道的 CSS 中。您必须开始在 HTML 代码中识别它，为它创建一个 ID（仅当您有多张图片时），然后`absolute positioning`如果您真的需要，请使用 CSS。例如，我将样式放在图像标签中，但这是我所做的：

```
 <img src="http://www.hrtlc.org/images/amput-2.jpg"  alt="Chest X-Ray" style="position: absolute; right: 200px; top: 100px; height: 200px; width: 300px; "> 
```

# r - unicode conversion and export in R

> ID：16028658
> 
> 赞同：5
> 
> 时间：2013-04-16T04:12:21.023
> 
> 标签：r, unicode

I have created a script below for converting unicode into chinese characters, the last string in `temp.df[,"name_unicode"]` is "§®£" (without quote), so that people not knowing chinese can also help.

```
library(RODBC)
library(Unicode)

temp.df <- data.frame(name_unicode=c("&#38515;&#22823;&#25991;",
                                     "&#38515;&#23567;&#25935;",
                                     "&#38515;&#19968;&#23665;",
                                     "&#167;&#174;&#163;"),
                      stringsAsFactors=FALSE)

temp.df[,"name_unicode_mod"] <- sapply(temp.df[,"name_unicode"],
                                        function(x) {
                                          temp <- unlist(strsplit(x,";"))
                                          temp <- sprintf("%x",as.integer(gsub("[^0-9]","",temp)))
                                          temp <- intToUtf8(as.u_char_range(temp))
                                          return(temp)
                                          })

write.csv(temp.df,file("test.csv",encoding="UTF-8"),row.names=FALSE) 
```

The output for `temp.df[,"name_unicode_mod"]` is OK for R console. But I need to export them out in `csv` or `xls` format. I tried `write.csv`, `write.table`, `odbcConnectExcel` in `RODBC` but all gives me something like `<U+00A7><U+00AE><U+00A3>`.

Can anyone help? Thanks.

P.S. I am using R 3.0.0 and Win7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T12:46:37.973

使用二进制写入将适用于您的情况。下面是一个小的示例代码。

```
writeUtf8csv <- function(x, file) {
  con <- file(file, "wb")
  apply(x, 1, function(a) {
      b <- paste(paste(a, collapse=','), '\r\n', sep='')
      writeBin(charToRaw(b), con, endian="little")
    })
  close(con)
} 
```

[此参考页面](http://tomizonor.wordpress.com/2013/04/17/file-utf8-windows/)中显示了更多详细信息。

# r - 使用ggplot2在地图上绘制条形图？

> ID：16028659
> 
> 赞同：20
> 
> 时间：2013-04-16T04:12:24.693
> 
> 标签：r, plot, ggplot2, maps, bar-chart

我想使用 ggplot2 为地图上的每个位置生成一个条形图，就像 xingmowang 使用基本图形和一些包所做的那样：

[http://nzprimarysectortrade.wordpress.com/2011/10/02/let-r-fly-visualizing-export-data-using-r/](http://nzprimarysectortrade.wordpress.com/2011/10/02/let-r-fly-visualizing-export-data-using-r/)

![在此处输入图像描述](https://i.stack.imgur.com/nTESY.png)

这与在情节中[嵌入微型情节](https://stackoverflow.com/questions/7793935/embedding-a-miniature-plot-within-a-plot)有关。

目前，我能做的最好的是将值与抖动点图中的点大小匹配：

```
require(ggplot2)
require(maps)

#Get world map info
world_map <- map_data("world")

#Creat a base plot
p <- ggplot() + coord_fixed()

#Add map to base plot
base_world <- p + geom_polygon(data=world_map,
                               aes(x=long,
                                   y=lat,
                                   group=group))

#Create example data
geo_data <- data.frame(long=c(20,20,100,100,20,20,100,100),
                       lat=c(0,0,0,0,0,0,0,0),
                       value=c(10,30,40,50,20,20,100,100),
                       Facet=rep(c("Facet_1", "Facet_2"), 4),
                       colour=rep(c("colour_1", "colour_2"), each=4))

#Creat an example plot
map_with_jitter <- base_world+geom_point(data=geo_data,
                                            aes(x=long,
                                                y=lat,
                                                colour=colour,
                                                size=value),
                                         position="jitter",
                                         alpha=I(0.5))

#Add faceting
map_with_jitter <- map_with_jitter + facet_wrap(~Facet)

map_with_jitter <- map_with_jitter + theme(legend.position="none")

print(map_with_jitter) 
```

![ggplot2 示例地图](https://i.stack.imgur.com/8cQX1.jpg)

使用不优雅的解决方法：

```
subset_data <- geo_data[geo_data$Facet=="Facet_1" &
                          geo_data$long=="20",]
subplot <- qplot(data=subset_data,
                 x=colour,
                 y=value,
                 fill=colour,
                 geom="bar",
                 stat="identity")+theme(legend.position="none")

print(base_world)
print(subplot, vp=viewport((200+mean(subset_data$long))/400,(100+mean(subset_data$lat))/200 , .2, .2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/JfcLS.jpg)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-17T07:26:46.440

**2016-12-23 更新**：`ggsubplot`-package 不再积极维护，并[存档在 CRAN 上](https://cran.r-project.org/web/packages/ggsubplot/index.html)：

> 软件包“ggsubplot”已从 CRAN 存储库中删除。>
> 可以从存档中获得以前可用的版本。>
> 应维护者 garrett@rstudio.com 的要求于 2016-01-11 存档。

`ggsubplot`不适用于 R 版本 >= 3.1.0。安装 R 3.0.3 以运行以下代码：

* * *

您确实可以通过`ggsubplot`像 Baptiste 建议的软件包来实现这一点。

```
library(ggsubplot)
library(ggplot2)
library(maps)
library(plyr)

#Get world map info
world_map <- map_data("world")

#Create a base plot
p <- ggplot()  + geom_polygon(data=world_map,aes(x=long, y=lat,group=group))

# Calculate the mean longitude and latitude per region, these will be the coördinates where the plots will be placed, so you can tweak them where needed.
# Create simulation data of the age distribution per region and merge the two.

centres <- ddply(world_map,.(region),summarize,long=mean(long),lat=mean(lat))
mycat <- cut(runif(1000), c(0, 0.1, 0.3, 0.6, 1), labels=FALSE) 
mycat <- as.factor(mycat)
age <- factor(mycat,labels=c("<15","15-30","20-60",">60"))
simdat <- merge(centres ,age)
colnames(simdat) <- c( "region","long","lat","Age" )

# Select the countries where you want a subplot for and plot
simdat2 <- subset(simdat, region %in% c("USA","China","USSR","Brazil", "Australia"))
(testplot <- p+geom_subplot2d(aes(long, lat, subplot = geom_bar(aes(Age, ..count.., fill = Age))), bins = c(15,12), ref = NULL, width = rel(0.8), data = simdat2)) 
```

结果：![在此处输入图像描述](https://i.stack.imgur.com/qhT2F.png)

# mysql - 存储纬度/经度的最佳 MySQL 数据类型

> ID：16028663
> 
> 赞同：1
> 
> 时间：2013-04-16T04:13:15.997
> 
> 标签：mysql, sqldatatypes

我已经看到了几个答案，但似乎都没有用……我需要知道存储 lat / lon 值的最佳 MySQL 数据类型。从 API 返回的示例 lon 值：

`-75.2408658`

目前，我将列设置为`Decimal(10,7)`，但这会将值四舍五入到最接近的十分之一并存储如下：

`-75.2408660`

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T07:07:40.663

> 将 MySQL 的空间扩展与 GIS 结合使用。

已经有一个 SO 线程在[这里](https://stackoverflow.com/questions/159255/what-is-the-ideal-data-type-to-use-when-storing-latitude-longitudes-in-a-mysql)。

[这](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)也可能对您有所帮助。

# php - PHP preg_replace 被管道包围？

> ID：16028667
> 
> 赞同：1
> 
> 时间：2013-04-16T04:13:37.113
> 
> 标签：php, regex, preg-replace, pcre

我刚刚在 WordPress 核心中遇到了一个让我很感兴趣的正则表达式……我以前发现过这样的正则表达式并想知道它们，但它们有效，所以我没有改变它们。我感兴趣的部分如下：

`|(?<!%)%f|`并且`|(?<!%)(%s)|`- 注意它们是如何被管道而不是正斜杠包围的？

我做了一些搜索，无法找出表达式中的这种变化？我知道，在他们自己的表达中，他们几乎就像`or`- 我明白了。但是代替正斜杠？

有人可以解释一下这里发生了什么吗？我唯一的想法之一是以下几点......

`|(?<!%)`意味着要么什么都没有，要么意味着期待。

`(%s)|`意味着要么`(%s)`或没有...

这将是典型的管道。但是，正如我所说，我以前见过它代替正斜杠，所以我不确定这是否是 PCRE 的一些未记录的功能或类似的东西？

**编辑**

如果您有管道，则不需要正斜杠。如果您没有管道，则会收到正则表达式语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:29:22.643

它们只是`PCRE`样式的不同分隔符`REGEX`......我自己使用感叹号。

管道是分隔符，而您习惯使用的是斜线。

`!^[A-Z]+$!i`- 所有字母字符不区分大小写。

有关分隔符的更多信息： [http ://www.php.net/manual/en/regexp.reference.delimiters.php](http://www.php.net/manual/en/regexp.reference.delimiters.php)

`#`请注意，他们在示例和`%`标志中使用字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:32:44.653

什么都没有发生，管道可以用作模式周围的分隔符，代替`/`like `~`, `#`, `@`, ...

# r - 为什么在 R 的并行函数中采购脚本会失败？

> ID：16028671
> 
> 赞同：1
> 
> 时间：2013-04-16T04:14:24.703
> 
> 标签：r, parallel-processing

我正在使用 R 的基本并行库，其中包含`parLapply`一个脚本的来源。在一种情况下，如果我将代码内联，结果符合预期。在另一种情况下，如果我将代码替换为`source()`指向具有完全相同代码的脚本的调用，则代码将失败。

一个可重现的例子：

```
require(parallel)

# generate a list of random vectors with increasing means
set.seed(1)
x <- lapply(1:4, function(i) rnorm(10,i,1))

# create cluster and export the above list
cl <- makePSOCKcluster(4)
clusterExport(cl, varlist=c("x"))

# use inline code first
means.inline <- parLapply(cl, 1:length(x), function(i) {
  values <- x[[i]]
  mean(values)
})

# now call the exact same code, but sourced from a separate script
means.source <- parLapply(cl, 1:length(x), function(i) {
  source("code.R")
})
stopCluster(cl) 
```

的内容与`code.R`第一个 parLapply 中的代码相同：

```
values <- x[[i]]
mean(values) 
```

第一个`parLapply`按预期执行和计算均值。第二个`parLapply`失败：

```
Error in checkForRemoteErrors(val) : 
  4 nodes produced errors; first error: object 'i' not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:18:07.613

来自`?source`：

> source 使 R 接受来自指定文件或 URL 或连接的输入。**从该文件读取并解析输入，直到到达文件末尾，然后在所选环境**中按顺序评估解析的表达式。

线索是提到“选择的环境”，然后看一下以下的`local`论点`source`：

> TRUE、FALSE 或环境，确定解析表达式的评估位置。FALSE（默认值）对应于用户的工作空间（全局环境），**TRUE 对应于调用源的环境。**

这意味着`source(code.R)`默认情况下会在全局环境中读取和解析脚本，而不是在`parLapply`.

要获得所需的行为：

`source("code.R", local=TRUE)`

# c# - 拆分字符串并删除没有 .select 的空格

> ID：16028672
> 
> 赞同：1
> 
> 时间：2013-04-16T04:14:42.297
> 
> 标签：c#, arrays, split, core, trim

（限制：系统；仅限）

我希望能够将一个字符串拆分为一个数组并删除空格，我目前有这个：

```
string[] split = converText.Split(',').Select(p => p.Trim()).ToArray(); 
```

编辑： .ToArray 显然也不能使用。

但问题是，我不能使用除核心系统方法之外的任何东西。那么如何在不使用 .select 或其他非核心方式的情况下从拆分或数组中修剪空间。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T04:19:29.613

```
string[] split = 
  convertText.Split(new[]{',',' '}, StringSplitOptions.RemoveEmptyEntries); 
```

通过在您的拆分标准中添加一个空格，当您拥有 RemoveEmptyEntries 时，它将摆脱它们。但是，如果条目中有空格，这将失败。在这种情况下，您可以：-

```
string[] split = 
      convertText.Split(new[]{','}, StringSplitOptions.RemoveEmptyEntries);

 for (int index = 0; index < split.Count; index++)
 {
     split[index] = split[index].Trim();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T14:26:28.100

它应该适用于所有情况：

```
public static class TrimHelper
{
    public static string[] SplitAndTrim(this string str, char splitChar, StringSplitOptions options = StringSplitOptions.RemoveEmptyEntries)
    {
        List<string> result = new List<string>();

        if (str != null)
        {
            foreach (var item in str.Split(splitChar, options))
            {
                string val = item.Trim();

                if (options == StringSplitOptions.RemoveEmptyEntries && val == string.Empty)
                    continue;

                result.Add(val);
            }
        }

        return result.ToArray();
    }
} 
```

用法：

```
string[] split = "text, ".SplitAndTrim(',').ToArray(); 
```

# string - bash 中的字符串格式化

> ID：16028677
> 
> 赞同：6
> 
> 时间：2013-04-16T04:15:05.167
> 
> 标签：string, bash

我有以下在 shell 脚本中运行的代码

```
foo=`seq 1 1 100`
for i in $foo; do
  echo "input$i\_now"
done 
```

这是我的问题：在某些情况下，输出会打印`input1_now`，而其他时候会打印`input1\_now`. 我确定有些不同，但我不知道是什么让它以一种或另一种方式打印。如果我的代码是

```
for i in $foo; do
   echo "input$i_now"
done 
```

我总是会`input`忽略该行的其余部分。

我知道我可以改用`input${i}_now`它并让它每次都正确打印，但我最感兴趣的是理解为什么在看似相同的条件下输出不同。

更新：

在以下示例中，第一部分正确格式化变量和文本，以便将`\_`替换为`_`。但是，最后一部分要求我将变量放在大括号中，以便正确格式化它们。

```
echo "Enter Simulation #: "
read sim

g.mapset results

for i in `seq 1 1 100`; do

file=sim$sim\_run$i\_sum
g.copy $file\@expSim$sim\_$i,$file

file=sim$sim\_run$i\_average
g.copy $file\@expSim$sim\_$i,$file

for year in `seq 2004 1 2006`; do   

    file=sim$sim\_$year\_run$i\_sum
    g.copy $file\@expSim$sim\_$i,$file

    file=sim$sim\_$year\_run$i\_average
    g.copy $file\@expSim$sim\_$i,$file

done

years="2004 2005 2006"
times=`seq -w 1 16 365`
runs=`seq 1 1 100`

for year in $years; do
for ptime in $times; do
    for i in $runs; do
        if [ $i -eq 1 ]; then
            g.copy  vect=sim${sim}_pts_${year}_${ptime}_run${i}@expSim${sim}_${i},sim${sim}_pts_${year}_${ptime}
        fi
        if [ $i -gt  1 ]; then  
        v.patch input=sim${sim}_pts_${year}_${ptime}_run${i}@expSim${sim}_${i} output=sim${sim}_pts_${year}_${ptime} -e -a --o
        fi
    done
done
done 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T04:23:40.950

应该是`_`一个占位符，有时是一个不同的字符？

在`bash`，`"input$i\_now"`用实际`_`总会产生`input1\_now`。在双引号内，仅当 a后跟 a 、 a 、 a 、 a或换行符`bash`时才删除它。请参阅[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html)[中的“双引号”](http://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html)。这是 POSIX 标准行为；请参阅[*Shell 命令语言*](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_02_03)[中的“双引号”](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_02_03)。`\``$`````"``\`[](http://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html)*[](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_02_03)*

 **### 更新

如果你写`"input$i_now"`，`bash`只会打印`input`。它不会打印`input1`或`input1_now`。它这样做是因为它`_`是一个有效的参数名称字符，因此`bash`认为您正在询问`i_now`参数的值。除非你设置`i_now`为非空字符串，`bash`否则会扩展`$i_now`为空字符串，从而`"input$i_now"`变成`input`.

### 更新 2

现在您已经发布了真实的代码，我们可以看到发生了什么。

首先，在您发布的真实代码中，**您从未在参数扩展周围使用双引号。这会有所不同。**

在双引号之外， a`\`总是被删除。请参阅[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/html_node/Quote-Removal.html#Quote-Removal)[中的“引号删除”](http://www.gnu.org/software/bash/manual/html_node/Quote-Removal.html#Quote-Removal)*。因此`input$i\_now`（**没有**周围的双引号）扩展为`input1_now`.*

 *但是，正如我在第一次更新中解释的那样，`_`是参数名称字符。请参阅[*Shell 命令语言*](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_230)[中的“名称”](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_230)*。所以当`bash`sees时`input$i_now`，它`i_now`作为参数名称。*

 *无论您是否使用双引号，都**必须**将参数名称与后面的字符分开，否则`bash`会将后面的字符视为参数名称的一部分。您可以通过将参数名称放在`\`后面来执行此操作，也可以通过将参数名称放在`{...}`.

始终使用 更安全`{...}`，因为（正如您所发现的那样？）`\`根据它是否在双引号内，处理方式不同。如果您稍后返回并添加双引号，并且您已使用，则无论如何`\`您都需要将 更改`\`为。`{...}`

### 更新 3

下面是`\`, `{...}`, 和双引号的效果的演示。首先，我们设置一些变量：

```
$ year=2004 ptime=1 i=1 sim=123 
```

以下是在不引用任何内容的情况下发生的情况：

```
$ echo vect=sim$sim_pts_$year_$ptime_run$i@expSim$sim_$i,sim$sim_pts_$year_$ptime
vect=sim1@expSim1,sim1 
```

如果我们`{...}`不使用双引号，会发生以下情况：

```
$ echo vect=sim${sim}_pts_${year}_${ptime}_run${i}@expSim${sim}_${i},sim${sim}_pts_${year}_${ptime}
vect=sim123_pts_2004_1_run1@expSim123_1,sim123_pts_2004_1 
```

如果我们添加双引号，它们将不起作用：

```
$ echo "vect=sim${sim}_pts_${year}_${ptime}_run${i}@expSim${sim}_${i},sim${sim}_pts_${year}_${ptime}"
vect=sim123_pts_2004_1_run1@expSim123_1,sim123_pts_2004_1 
```

如果我们只使用 会发生以下情况`\`：

```
$ echo vect=sim$sim\_pts\_$year\_$ptime\_run$i@expSim$sim\_$i,sim$sim\_pts\_$year\_$ptime
vect=sim123_pts_2004_1_run1@expSim123_1,sim123_pts_2004_1 
```

请注意，每个`\`都已删除。`\`如果没有引用，shell 会删除它。

如果我们添加双引号，它们会阻止 shell 删除每个`\`：

```
$ echo "vect=sim$sim\_pts\_$year\_$ptime\_run$i@expSim$sim\_$i,sim$sim\_pts\_$year\_$ptime"
vect=sim123\_pts\_2004\_1\_run1@expSim123\_1,sim123\_pts\_2004\_1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T07:14:27.447

下划线是 bash 变量名中的有效字符，因此您需要保护变量名不受周围字符的影响。

```
foo=`seq 1 1 100`
for i in $foo; do
  echo "input${i}_now"
done 
```

区别：

```
input$i_now    # "input" + $i_now
input${i}_now  # "input" + $i + "_now"
input"$i"_now  # input + "$i" + now
input$i\_now   # input + $1 + _now - \_ "escapes" the underscore 
```

[https://man7.org/linux/man-pages/man1/bash.1.html](https://man7.org/linux/man-pages/man1/bash.1.html)

> **名称**仅由字母数字字符和下划线组成并**以字母字符** *或下划线*开头的单词。也称为标识符。

您必须通过、 with或转义参数名称来**保护**参数名称，这些字符在参数名称中是有效的。所有“工作”，但我更喜欢大括号，这也是文档所指的内容：`PREFIX${braces}SUFFIX``PREFIX"$quotes"SUFFIX``\`

> 要扩展的参数名称或符号可以用大括号括起来，这是可选的，但用于保护要扩展的变量免受紧随其后的字符的影响，这些字符可以解释为名称的一部分。****

# javascript - AngularJS - 访问 ng-view 之外的元素

> ID：16028678
> 
> 赞同：20
> 
> 时间：2013-04-16T04:15:05.270
> 
> 标签：javascript, angularjs

我有一个带有 ng-view（管理面板）的设置，可以让我显示订单。我在 ng-view 之外有一个搜索框，我想用它来修改我的 json 请求。我看过一些关于访问诸如标题之类的东西的帖子，但无法让它们工作——也许已经过时了。

主要应用程序的东西：

```
angular.module('myApp', ['myApp.controllers', 'myApp.filters', 'myApp.services', 'myApp.directives', 'ui.bootstrap']).
config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider)       {

$routeProvider.
  when('/', {
    templateUrl: '/partials/order/manage.html',
    controller: 'ManageOrderCtrl'
  }).     
  when('/order/:id', {
   templateUrl: '/partials/order/view.html',
    controller: 'ViewOrderCtrl'
  }).   
  otherwise({
    redirectTo: '/'
  });
$locationProvider.html5Mode(true);
}]); 
```

管理控制器：

```
angular.module('myApp.controllers', [])
.controller('ManageOrderCtrl', ['$scope', '$http', '$dialog', 'config', 'Page', function($scope, $http, $dialog, config, Page) {

  // would like to have search value from input #search available here
  var getData = function() {
    $http.get('/orders').
    success(function(data, status, headers, config) {
      $scope.orders = data.orders;
    });
  };

getData();
}) 
```

看法：

```
<body ng-app="myApp" >
  <input type="text" id="search">
  <div class="ng-cloak" >
    <div ng-view></div>
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-16T07:10:28.803

如果您要访问外部区域的内容`<div ng-view></div>`，我认为更好的方法是也为外部区域创建一个控制器。然后创建一个服务来在控制器之间共享数据：

```
<body ng-app="myApp" >
  <div ng-controller="MainCtrl">
      <input type="text" id="search">
  </div>
  <div class="ng-cloak" >
    <div ng-view></div>
  </div>
</body> 
```

（`ng-controller="MainCtrl"`也可以放在`<body>`标签上 - 那么 ng-view $scope 将是 MainCtrl $scope 的子级而不是兄弟级。）

创建服务就这么简单：

```
app.factory('Search',function(){
  return {text:''};
}); 
```

它可以像这样注射：

```
app.controller('ManageOrderCtrl', function($scope,Search) {
  $scope.searchFromService = Search;
});

app.controller('MainCtrl',function($scope,Search){
  $scope.search = Search;
}); 
```

这样您就不必依赖通过全局 $rootScope 共享数据（这有点像依赖 javascript 中的全局变量 - 出于各种原因的一个坏主意）或通过可能是也可能不是的 $parent 范围当下。

我创建了一个[**plnkr**试图显示](http://plnkr.co/edit/8LwPRy3ssdT6wWLuvqNB)两种解决方案之间的区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-25T15:24:34.407

您可以使用**范围层次结构**。

像这样向您的 HTML添加一个“外部”`ng-controller`定义：

```
<body ng-controller="MainCtrl"> 
```

它将成为 $parent 范围。但是您不需要通过使用服务来共享数据。您甚至不需要使用`$scope.$parent`范围。您可以使用**[范围层次结构](https://docs.angularjs.org/guide/scope)**。（请参阅该页面上的范围层次结构部分）。这真的很容易。

在你的`MainCtrl`，你可能有这个：

```
$scope.userName = "Aziz"; 
```

然后在任何嵌套在 MainCtrl 中的控制器中（并且不会在其自己的范围内覆盖 userName）也将具有 userName ！您可以在视图中使用 {{userName}}。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:33:03.047

尝试这个...

看法：

```
<body ng-app="myApp" >
  <input type="text" id="search" ng-model="searchQuery" />
  <div class="ng-cloak" >
    <div ng-view></div>
  </div>
</body> 
```

在您的控制器中使用它：

```
$http.get('/orders?query=' + $scope.searchQuery).
    success(function(data, status, headers, config) {
      $scope.orders = data.orders;
}); 
```

基本上，你可以用 ng-app 内的任何东西来做到这一点......将你的 ng-app 移动到`html`标签，你也可以编辑它`title`！

# iphone - 从子视图自定义单元格刷新 UI 视图？

> ID：16028679
> 
> 赞同：-1
> 
> 时间：2013-04-16T04:15:09.130
> 
> 标签：iphone, ios

在我`MainClass`和`CustomCell`课堂上，我有两个视图，`CustomCell`是`MainClass`. 我在这样的自定义单元格中有一个按钮

```
_(IBAction)click:sender

{
NSUInteger no =2;
second-class *sc = [[secondclass alloc] init];
[sc numberOfItem:no];
} 
```

当我单击要更改`label`主类中的按钮时，我的主类编码是

```
-(void)nuberofitem:no
{
NSLog(@"number : %d",no); //Its show correct value
localtextbox.text = no;

NSLog(@"text box value : %@",localtextbox.text); //But in  label it shows null value

} 
```

**我的 XIB 设计，**

![在此处输入图像描述](https://i.stack.imgur.com/CmSZC.jpg)

我有这样的设计屏幕，在运行时我有这样的屏幕

![在此处输入图像描述](https://i.stack.imgur.com/XSfgT.jpg)

在此有一个带有名称和加号和减号按钮的视图，在运行时我有名称 1、名称 2 和名称 3 等。当我单击加号按钮时，将值从 1 增加到 ... 并显示计数标签，然后当我单击减号按钮时，我想减少计数标签值。我不知道该怎么做，任何知道的人都知道帮助我请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:33:50.510

您的代码无法通过以下方法更新文本字段：

```
-(void)nuberofitem:no
{
NSLog(@"number : %d",no); //Its show correct value
localtextbox.text = no; // THIS IS WHERE YOU WENT WRONG

NSLog(@"text box value : %@",localtextbox.text); //But in  label it shows null value

} 
```

localtextbox.text 是 UITextField 或 Label 的属性，需要将 NSString 对象传递给它。您正在传递一个 NSUInteger 对象，因为它是错误类型的对象，所以编译器只会将其读取为“nil”。为了更好地理解正在发生的事情，您必须像编译器一样阅读您的代码。

以下是计算机读取代码的方式：
1\. 应用程序不断循环查看用户是否与其界面进行了交互（事件循环）
2\. 用户在界面 (.xib) 文件上单击了一个按钮
3.事件循环暂停以注意到按钮已被按下。它查看隐藏在 Xcode 中的开发人员的视野中的 xml 信息，并查看其“目标”属性。此目标属性包含一个指向“选择器”的指针（这只是您的 IBAction 方法的一个花哨的词`_(IBAction)click:sender`）
4\. 编译器将此方法定位在您使用 Connections Inspector 指向它的类中并运行该方法

：声明一个 NSUInteger 并将其设置为值：2
b。你的一个实例`second-class`被分配和实例化（这个实例是可用类型的对象`second-class`，在这种情况下被命名为`sc`）
c．类 'second-class' 的 'sc' 实例调用方法

5。我们输入方法`-(void) numberOfItem:(NSUInteger )no`，在其中传递变量 'no'，其中包含值：2（实际上它是对一块内存的引用，但你可以将其视为字面值 2)。
6\. 编译器点击第一个 NSLog 语句，并用 NSUInteger 值替换 '%d' 格式化程序（这就是这个特定格式化程序的设计方式）。7\. 编译器`localtextbox.text = [NSString stringWithFormat:@"%d",no];`使用'stringWithFormat'方法将NSUInteger 转换为NSString。这非常重要，否则 localtextbox.text 将保持为零。

到目前为止一切都很完美，接下来 Cocoa 和 Cocoa Touch 如果我们使用 interface builder 正确构建我们的界面，我们会为我们做一些工作。

只要我们遵循开发环境的规则，Xcode 已经内置了可以为我们完成大量工作的机制。如果标签的 'text' 属性发生变化，标签将自动更新，并且此更改将立即发生，但前提是我们已将 textField 或标签声明为 IBOutlet（我们可以在代码中或使用 Interface Builder 和 Connections Inspector 执行此操作）。将标签设置为 IBOutlet 就像告诉 textField 或标签，“嘿，标签，如果您的 'text' 属性已更改，则更新您的视图以反映该更改。” 您已明确告诉它注意更改，或者标签认为更改对于向用户显示的内容并不重要。

如果您已将标签正确设置为 IBOutlet，那么您的代码将在 localtextbox.text 属性更改时自动更新视图，并将继续到下一行并正确记录 localtextbox.text 属性的值，无论如何。

您需要在 Connections Inspector 中重新访问您的 Connections。请按照以下步骤操作（当您开始不小心进行错误连接时，这很容易）：
断开标签/文本字段连接
1\. 打开项目的 .xib 文件。
2\. 在屏幕右侧选择确保您的 Xcode 设置如下：
![在此处输入图像描述](https://i.stack.imgur.com/YOpbb.png)
3\. 在 .xib 文件中选择标签或文本字段（无论它是什么）。
4\. 选择标签/文本字段后，导航到屏幕右侧并在身份检查器面板的上部工具栏中选择最右侧的选项（您可以将鼠标悬停在工具上，然后会出现工具提示上面写着“Connections Inspector”，它是一个圆圈，里面有一个指向右边的箭头：
![在此处输入图像描述](https://i.stack.imgur.com/ym8PB.png)
5\. 选择标签/文本字段（这些连接会根据所选接口对象而变化），删除所有连接，最重要的是“引用插座”。

重新连接标签/文本字段
1\. 将您的 Xcode 布局更改为助手编辑器模式：
![在此处输入图像描述](https://i.stack.imgur.com/2c1TZ.png)
2\. 只要您的 .xib 文件在您执行此操作时打开，Main.h 文件也应该打开（这是我们想要的）。
3\. 在 Main.h 文件中添加一组花括号，使代码看起来像这样：

```
#import <UIKit/UIKit.h>

@interface Main : UIViewController {

}

@end 
```

4\. 将鼠标悬停在标签上，按住 control 从标签/文本字段拖动到这些花括号之间的区域并释放（执行此操作时应该看到一条蓝线）。像这样：

![在此处输入图像描述](https://i.stack.imgur.com/ulzVZ.png)

如图所示，应该会弹出一条消息，说明“创建奥特莱斯或奥特莱斯收藏”。我们要创建一个 Outlet (IBOutlet)。当你释放一个表单会弹出。我们要选择连接：'Outlet'，将其命名为我们的 textfield:localtextfield 的名称，并确保引用是 'Weak'。像这样：
![在此处输入图像描述](https://i.stack.imgur.com/CkIin.png)
5\. 单击“连接”，假设您已经说过的所有其他内容都可以正常工作，您的代码应该可以正常工作。

这是 UITableViewCell 的子类吗？如果是这样，可以调用`[[self tableview] reloadData];`action 方法来手动更新 tableview 的单元格。

让我知道它是否仍然无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:22:31.580

现在我已经看到了你的完整项目，我发现你已经打破了一些 iOS 惯例。不用担心，这是一个快速解决方案，但要了解有一种更正确的方法可以实现此目的：

将以下代码添加到 sampleViewController.m：

```
// At the top near the other import statements
#import 'ViewController'

-(void)viewWillAppear:(BOOL)animated {

    // Update the count in the text box when the view appears
    [self updateTableCount];

}

// Custom Method for updating the display text of the property counttxt.text
- (void) updateTableCount {

    NSLog(@"Updating Table Count");

    // Get the count of records in the name array
    int numberOfNames = [[Table_viewctrl addlist_array] count];

    counttxt.text = [NSString stringWithFormat:@"%d", numberOfNames];
} 
```

更新以下方法：

```
- (IBAction)add_namebtn:(id)sender 
{
    if(self.name_singleton != NULL)
    {
        selectname *sample_name = [[selectname alloc]init];
        sample_name.name = [nametxt text];
        [name_singleton Add:sample_name];

        nametxt.text=@"";
        [self.view endEditing:YES];

        // Update the count in the text box when the user adds a new name to the array
        [self updateTableCount];
    }
}

- (IBAction)viewlist_btn:(id)sender 
{
    self.Table_viewctrl = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    Table_viewctrl.view.frame = CGRectMake(0, 0, 320, 363);
    [self.subview addSubview:self.Table_viewctrl.view];
    [self loadnames];
    self.backbtn.hidden=FALSE;

    // Update the count in the text box when the view appears
    [self updateTableCount];
} 
```

我将在几天后更新此答案，并提供有关如何按照 iOS 指南正确设计应用程序的说明。我的解释大约进行了一半，但还有很多要解释的。请在应用这些临时更改后回来查看。仍然会有一个小故障，直到用户按下“查看列表”按钮后，用户才会看到更新的计数。这是因为在选择“查看列表”按钮之前，应用程序实际上不会将添加的名称移动到“添加列表数组”。我的下一篇文章将纠正这个问题，并使用 UINavigationBar 在适当类型的结构中设置应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:26:43.683

尝试这个，

```
 -(void) numberOfItem:(NSUInteger )no
     {
      NSLog(@"number : %d",no); //Its show correct value
      localtextbox.text = [NSString stringWithFormat:@"%d",no];

      NSLog(@"text box value : %@",[NSString stringWithFormat:@"%d",localtextbox.text]); //But in  label it shows null value

   } 
```

并检查您是否已`IBOutlet`正确`localtextbox`连接`xib`

# javascript - 如何确定某个东西是数组还是对象？

> ID：16028680
> 
> 赞同：1
> 
> 时间：2013-04-16T04:15:15.573
> 
> 标签：javascript, arrays, object

数组和对象是唯一的输入。有没有一个简单的函数可以判断一个变量是数组还是对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:17:33.743

我怀疑还有许多其他类似的答案，但这是一种方法：

```
if ({}.toString.call(obj) == '[object Object]') {
  // is an object
}

if ({}.toString.call(obj) == '[object Array]') {
  // is an array
} 
```

这可以变成一个漂亮的功能：

```
function typeOf(obj) {
  return {}.toString.call(obj).match(/\w+/g)[1].toLowerCase();
}

if (typeOf(obj) == 'array') ... 
```

这适用于任何类型：

```
if (typeOf(obj) == 'date') // is a date
if (typeOf(obj) == 'number') // is a number
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:21:31.603

`(variable instanceof Array)`将为数组返回 true。

您也可以使用`variable.isArray()`，但旧版浏览器不支持此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:21:47.053

您可以使用`Array.isArray()`：

```
if(Array.isArray(myVar)) {
    // myVar is an array
} else {
    // myVar is not an array
} 
```

只要你知道这将是一个或另一个你已经设置好了。否则，将其与`typeof`：

```
if(typeof myVar === "object") {
    if(Array.isArray(myVar)) {
        // myVar is an array
    } else {
        // myVar is a non-array object
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T04:21:58.510

首先检查它是否是一个[instanceof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof) Array，然后检查它是否是对象类型。

```
if(variable instanceof Array)
{
//this is an array. This needs to the first line to be checked 
//as an array instanceof Object is also true

}
else if(variable instanceof Object)
{
//it is an object
} 
```

# java - Java替换匹配器

> ID：16028688
> 
> 赞同：0
> 
> 时间：2013-04-16T04:16:14.477
> 
> 标签：java, regex, matcher, replaceall

我想找到匹配的替换部分。

***例子：***

```
this is awesome look at this two letter words get replaced 
```

回报将是

```
this <h1>is</h1> awesome look <h1>at</h1> this two letter words get replaced 
```

请注意如何替换匹配正则表达式的`is`和`at`哪个匹配。`\b\w\w\b`

这是我正在处理的代码。它还没有完成，但我只是有点困惑，想知道是否有更简单的方法。我正在搜索字符串并找到匹配项。然后我将它添加到一个 ArrayList 并替换每个。问题是我要替换的一件事是`{`，我想用`{{}`

现在看一下，这将不断替换括号，因为我不断添加它们......所以我的另一个想法是逐个字符地替换它们并添加到新的 StringBuilder 对象？

```
ArrayList<String> replacements = new ArrayList<String>();

String s = "::";

s += command;

Pattern p = Pattern.compile("[!-~]");
Matcher match = p.matcher(this.execution);

while(match.find())
{
    replacements.add(match.group());
}

StringBuilder string = new StringBuilder();

for(int i=0; i<this.execution.length(); i++)
{ 
    String a  =new String(execution.charAt(i));
    if()
    { 
    }
}
s += "::" + this.execution; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:38:39.483

我真的不明白您的代码如何解决您上面解释的要求...

也就是说，通过使用 JAVA 的方法来完成这种工作似乎是一种更简单的[`replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String%2C+java.lang.String%29)方法，通常用于两个字母的单词：

```
"this is awesome look at this two letter words get replaced"
.replaceAll("(\\b\\w{2}\\b)", "<h1>$1</h1>"); 
```

这打印：

```
this <h1>is</h1> awesome look <h1>at</h1> this two letter words get replaced 
```

# dwolla - 当 allowFundingSources=True 时不出现 Dwolla 访客结帐

> ID：16028689
> 
> 赞同：1
> 
> 时间：2013-04-16T04:16:19.580
> 
> 标签：dwolla

将 Python 用于 Dwolla 异地网关时，访客结帐并不总是按预期显示。（使用反射器帐户和 LIVE。添加产品时：

```
Dwolla.add_gateway_product('A Fee 1', 1.05, 'Test product',1)
Dwolla.add_gateway_product('A Fee 2', 1.25, 'Another Test product', 2)
url = Dwolla.get_gateway_URL(destination_number, OrderID, 0.00, 0.00, 0.00,   
'Description',redirectURL, True) 
```

**注意这里是“允许资金来源”

总计 = 3.55 美元，客人结帐按预期显示。

但是，如果不更改网关 url 中的设置，添加总计 1092.99 的项目会导致访客结帐失败。

这是可重现的，所以@Dwolla 是否有人知道访客结账出现时间和不出现是否有美元限制？或者这种行为的其他原因？

我可以提供结果的屏幕截图，但 Stackoverflow 还不允许我附加图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:15:28.120

访客结账功能的交易金额**限制为 1000.00 美元**，这就是当您尝试以总计 1092.99 美元结账时，访客结账选项不会出现在场外网关上的原因。

# angularjs - Angular JS - 表单上的取消按钮抑制表单提交

> ID：16028695
> 
> 赞同：26
> 
> 时间：2013-04-16T04:16:53.810
> 
> 标签：angularjs

考虑一个具有三个按钮的表单：

```
<form ng-submit="updateUser()">
  <div>Name <input type="text" ng-model="userToEdit.name" /></div>
  <div>
    <button class="btn btn-primary" ng-click="updateUser()">Save</button>
    <button class="btn" ng-click="cancelEdit()">Cancel</button>
    <button class="btn btn-danger" ng-click="deleteUser(userToEdit)"><i class="icon-trash"></i> Delete</button>
  </div>
</form> 
```

当我单击取消时，将调用 cancelEdit()，然后调用 updateUser()。我不希望调用 updateUser() 方法。有没有办法抑制这种表单提交（最好使用 jQuery？）

注意：我仍然希望能够按 Enter 并默认为 Save 操作。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-07-14T08:21:26.697

There is a `type` attribute for the `<button>` which defaults to **submit** - see [this spec](http://www.w3.org/wiki/HTML/Elements/button). Thus every button in your form is a **submit** button. You need to specify the **button** type for buttons which should not trigger the form submission, like this:

```
<form ng-submit="updateUser()">
  <div>Name <input type="text" ng-model="userToEdit.name" /></div>
  <div>
    <button class="btn btn-primary">Save</button>
    <button type="button" class="btn" ng-click="cancelEdit()">Cancel</button>
    <button type="button" class="btn btn-danger" ng-click="deleteUser(userToEdit)"><i class="icon-trash"></i> Delete</button>
  </div>
</form> 
```

And also no need to put the submit action to both `ng-click` and `ng-submit` - it will trigger double submit. I would advise to use `ng-submit` because it catches all ways of form submission, like pressing ENTER and not only clicking on submit button.

Hope this helps :)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-16T04:22:08.943

尝试这个

```
<form ng-submit="updateUser()">
  <div>Name <input type="text" ng-model="userToEdit.name" /></div>
  <div>
    <button class="btn btn-primary">Save</button>
    <a class="btn" ng-click="cancelEdit()">Cancel</a>
    <a class="btn btn-danger" ng-click="deleteUser(userToEdit)"><i class="icon-trash"></i> Delete</a>
  </div>
</form> 
```

或这个

```
<form>
  <div>Name <input type="text" ng-model="userToEdit.name" /></div>
  <div>
    <button class="btn btn-primary" ng-click="updateUser()">Save</button>
    <button class="btn" ng-click="cancelEdit()">Cancel</button>
    <button class="btn btn-danger" ng-click="deleteUser(userToEdit)"><i class="icon-trash"></i> Delete</button>
  </div>
</form> 
```

最终我认为你不需要`updateUser()`在 html 中使用两次

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-23T09:30:30.463

您可以使用取消按钮类型=“重置”：

```
<button type="reset" class="btn" ng-click="cancelEdit()">Cancel</button> 
```

> 该按钮是一个重置按钮（将表单数据重置为其初始值）

[http://www.w3schools.com/tags/att_button_type.asp](http://www.w3schools.com/tags/att_button_type.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-28T06:19:53.937

我遇到了同样的问题。我使用锚而不是按钮。

```
<form ng-submit="updateUser()">
  <div>Name <input type="text" ng-model="userToEdit.name" /></div>
  <div>
    <button class="btn btn-primary" ng-click="updateUser()">Save</button>
<a class="btn btn-danger"  ng-click="cancelEdit()" role="button">Cancel</a>
    <button class="btn btn-primary" ng-click="deleteUser(userToEdit)"><i class="icon-trash"></i> Delete</button>

  </div>
</form> 
```

# android - Android tvdpi vs xhdpi 屏幕问题

> ID：16028697
> 
> 赞同：0
> 
> 时间：2013-04-16T04:17:00.353
> 
> 标签：android, android-emulator, android-screen-support

我正在为平板电脑开发一个应用程序，直到最近才在 Nexus 7 (7.27'',800x1280:tvdpi) 的模拟器中进行了测试。一切都很好，直到我决定在不同的模拟器中测试应用程序，一个类似于三星 Galaxy Note 2 (5.6'',720x1280:xhdpi) 的模拟器，它看起来不太好。

例如，看看我正在使用的这个自定义警报对话框。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/dialog_layout_root"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:padding="10dp"
          android:background="@color/light_gray">
         <Button
             android:id="@+id/facebook_login_button"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_centerHorizontal="true"
             android:layout_marginTop="40dp"/>
         <TextView
             android:id="@+id/or_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:layout_centerHorizontal="true"
             android:layout_marginTop="20dp"
             android:textSize="20sp"
             android:textColor="@color/black"
             android:layout_below="@id/facebook_login_button"/>
         <TextView
             android:id="@+id/sign_in_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:layout_marginLeft="10dp"
             android:layout_marginTop="20dp"
             android:textSize="20sp"
             android:textColor="@color/gray"
             android:layout_below="@id/or_text"/>
         <EditText
             android:id="@+id/login_email"
             android:layout_width="320dp"
             android:layout_height="wrap_content"
             android:layout_marginLeft="10dp"
             android:layout_below="@id/sign_in_text"
             android:hint="@string/email_login"
             android:inputType="textEmailAddress"/>
         <EditText
             android:id="@+id/login_password"
             android:layout_width="320dp"
             android:layout_height="wrap_content"
             android:layout_marginLeft="10dp"
             android:layout_below="@id/login_email"
             android:hint="@string/pass_login"
             android:inputType="textPassword"/>
         <TextView
             android:id="@+id/case_sensitive_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:layout_marginLeft="10dp"
             android:layout_marginTop="20dp"
             android:textSize="18sp"
             android:textColor="@color/gray"
             android:layout_below="@id/login_password"/>
         <CheckBox
             android:id="@+id/remember_login"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textColor="@color/black"
             android:layout_below="@id/case_sensitive_text"/>
         <Button
             android:id="@+id/sign_in_button"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@id/remember_login"
             android:layout_marginLeft="300dp"/>
         <TextView
             android:id="@+id/forget_password_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:layout_marginLeft="180dp"
             android:textSize="18sp"
             android:textColor="@color/black"
             android:layout_below="@id/sign_in_button"/>
         <View
            android:id="@+id/horizontal_line"
            android:layout_width="360dp"
            android:layout_marginTop="20dp"
            android:layout_height="1dp"
            android:background="@android:color/darker_gray"
            android:layout_below="@id/forget_password_text"/>
         <TextView
             android:id="@+id/new_app_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:textSize="18sp"
             android:textColor="@color/black"
             android:layout_below="@id/horizontal_line"/>
         <TextView
             android:id="@+id/create_account_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:textSize="18sp"
             android:textColor="@color/gray"
             android:layout_below="@id/new_app_text"/>
         <Button 
             android:id="@+id/create_account_button"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@id/create_account_text"
             android:layout_marginLeft="250dp"
             android:layout_marginTop="10dp"/>
         <TextView
             android:id="@+id/terms_conditions_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:textSize="12sp"
             android:textColor="@color/gray"
             android:layout_below="@id/create_account_button"/>
         <TextView
             android:id="@+id/vertical_rule"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:textSize="12sp"
             android:textColor="@color/gray"
             android:layout_below="@id/create_account_button"
             android:layout_toRightOf="@id/terms_conditions_text"/>
         <TextView
             android:id="@+id/privacy_policy_text"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textIsSelectable="true"
             android:textSize="12sp"
             android:textColor="@color/gray"
             android:layout_below="@id/create_account_button"
             android:layout_toRightOf="@id/vertical_rule"/>             
</RelativeLayout> 
```

如您所见，我使用的是相对布局，并且在任何地方都使用 dp 并使用 sp 作为字体大小。如果您注意到警报对话框的背景，甚至片段都显示不正确。你可以看看这里：http: [//imageshack.us/g/692/tvdpi.jpg/](http://imageshack.us/g/692/tvdpi.jpg/)

有什么建议为什么会发生这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T04:34:51.930

您可以为 tvdpi 图像创建不同的 Drawable 文件夹，例如 drawable-tvdpi 和 drawable-xhdpi 如果您使用 eclipse 已经创建。根据它们的密度保留不同的图像。

注意还为 Nexus7 和 samsung galaxy note 创建不同的布局文件夹。

示例 layout-sw600dp for nexus-7 和 layout-sw360dpi for Galaxy nexus 。

将布局文件保存在两个文件夹中。

这将工作:)

# jquery - jquery mobile 滚动幽灵点击

> ID：16028704
> 
> 赞同：2
> 
> 时间：2013-04-16T04:17:24.933
> 
> 标签：jquery, jquery-mobile

我有一个垂直的 Div 列表，用户在我的 Jquery Mobile 页面上滚动浏览。当 Intertial 滚动被禁用时它工作得很好，但是当 Intertial 滚动打开时，我得到了鬼点击。我有一个类，然后是一个 class:active，我使用它作为选择器。

当我在不滚动的情况下单击时一切正常，但是如果我正在滚动并且滚动尚未完成，那么当我开始滚动时我触摸的 div 会变得活跃然后不活跃。它会产生非常难看的闪烁效果。

有人知道怎么修这个东西吗？

# haskell - 为什么在引用 newtype 包装的数字类型时可以省略构造函数？

> ID：16028705
> 
> 赞同：10
> 
> 时间：2013-04-16T04:17:26.447
> 
> 标签：haskell, typeclass, newtype

在*Real World Haskell的第 321 页上*

有这些代码，

...

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-}
newtype AInt = A { unA::Int }
    deriving (Show, Eq, Num)

instance Monoid AInt where
    mempty = 0 
```

我的困惑是为什么

```
mempty = 0 
```

但不是

```
mempty = A 0 
```

?

* * *

我还注意到两者

```
ghci> 0 :: AInt 
```

和

```
ghci> A 0 :: AInt 
```

给我同样的回应

```
A { unA = 0 } 
```

有人能告诉我这两个有什么区别吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T04:31:39.640

这里的诀窍在于`GeneralizedNewtypeDeriving`扩展。特别是，只要底层类型是实例，我们就可以派生*任何*类。`newtype`所有这一切都是将实例从旧类型复制到新类型。

在这种特殊情况下，`AInt`派生`Num`. 这意味着这`AInt`是一个`Num`使用相同代码的实例`Int`（所有内容都包含在`A`适当的构造函数中）。这包括`Int`'`fromInteger`功能。

该`fromInteger`函数是根据`Int`'s定义的`fromInteger`，看起来像这样：

```
fromInteger i = A (fromInteger i) 
```

由于是多态*的*`0`——它具有类型——它`0 :: Num a => a`对于. 多亏了新类型的派生，这包括, 使用上面的函数。这意味着.*`Num``AInt``fromInteger``0 :: AInt``A 0 :: AInt`*

 ** * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-16T04:31:15.580

像这样的数字文字`0`被重载并具有 type `0 :: Num a => a`，这意味着它们可以是任何有`Num`实例的类型，具体取决于上下文。这是通过类型类中的`fromInteger`函数发生的，因此当您键入时，它会被视为您编写了.`Num``0``fromInteger 0`

通过使用`GeneralizedNewtypeDeriving`，GHC （实际上是¹`Num` ）为您的类编写了一个实例，如下所示：

```
instance Num AInt where
  fromInteger n = A (fromInteger n)
  ... 
```

因此，当您编写 时`0 :: AInt`，这将扩展`fromInteger 0 :: AInt`为（根据上面的定义）等于与`A (fromInteger 0)`您编写的相同`A 0`。

[¹ `GeneralizedNewtypeDeriving`实际上并没有写一个新的实例。它只是执行必要的强制转换以使用现有的强制转换。]*

# python - AttributeError 的奇怪错误：“NoneType”对象没有属性“getText”

> ID：16028706
> 
> 赞同：0
> 
> 时间：2013-04-16T04:17:29.030
> 
> 标签：python, beautifulsoup, attributeerror

```
import os, re, sys, urllib2
from bs4 import BeautifulSoup
import lxml

def get_epg(channel, html):
    soup = BeautifulSoup(html, "lxml")
    main_div = soup.find("div", {"class":"viewport-container"})
    elements = main_div.find_all("li")
    for element in elements:
        cmp = element.find("div", { "class" : "channel" } ).getText()
        #return cmp
        if channel == cmp:
            print "found"
            return element

EPG_URL = "http://www.hoerzu.de/tv-programm/jetzt/"
html = urllib2.urlopen(EPG_URL)
print get_epg("ZDF", html) 
```

结果是：

```
Traceback (most recent call last):
  File "epg.py", line 17, in <module>
    print get_epg("ZDF", html)
  File "epg.py", line 10, in get_epg
    cmp = element.find("div", { "class" : "channel" } ).getText()
AttributeError: 'NoneType' object has no attribute 'getText' 
```

我真的不明白这里有什么问题，因为当我这样做时：

```
 for element in elements:
        cmp = element.find("div", { "class" : "channel" } ).getText()
        return cmp 
```

错误没有出现，一切都按预期进行......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:26:20.120

第二次迭代清楚地返回 None。

```
<div class="channel">Das Erste</div>
None
None
None
<div class="channel">ZDF</div>
None
None
None
<div class="channel">RTL</div>
None
None
None
<div class="channel">Sat.1</div>
None
None
None
<div class="channel">ProSieben</div>
None
None
None
<div class="channel">kabel eins</div>
None
None
None
<div class="channel">RTL II</div>
None
None
None
<div class="channel">VOX</div>
None
None
None
<div class="channel">Arte</div>
None
None
None
<div class="channel">3sat</div>
None
None
None
<div class="channel">Super RTL</div>
None
None
None
<div class="channel">KiKA</div>
None
None
None
<div class="channel">NDR</div>
None
None
None
<div class="channel">WDR</div>
None
None
None
<div class="channel">MDR</div>
None
None
None
<div class="channel">BR</div>
None
None
None
<div class="channel">SWR</div>
None
None
None
<div class="channel">HR</div>
None
None
None
<div class="channel">RBB</div>
None
None
None
<div class="channel">n-tv</div>
None
None
None
<div class="channel">N24</div>
None
None
None
<div class="channel">Servus TV</div>
None
None
None
<div class="channel">SPORT1</div>
None
None
None
<div class="channel">TV.Berlin</div>
None
None
None
<div class="channel">Hamburg 1</div>
None
None
None
<div class="channel">Eurosport</div>
None
None
None
<div class="channel">München TV</div>
None
None
None
<div class="channel">Franken Fernsehen</div>
None
None
None
<div class="channel">Tele 5</div>
None
None
None
<div class="channel">Das VIERTE</div>
None
None
None
<div class="channel">NRW TV</div>
None
None
None
<div class="channel">Nickelodeon / Comedy Central</div>
None
None
None 
```

所以你必须检查这种情况，而不是盲目地调用 getText()。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-10T14:44:27.273

> 从 bs4 导入 BeautifulSoup

你应该使用“main_div.findAll”

对于 Bs4： find_all ---> findAll

# linux - 使用 openssl 时如何隐藏密钥、盐和 iv，使其不会出现在进程标题中？

> ID：16028710
> 
> 赞同：1
> 
> 时间：2013-04-16T04:18:05.340
> 
> 标签：linux, security, openssl, aes

使用 openssl 加密/解密数据和 AES 密码时，我的命令将如下所示：

```
openssl enc -aes-256-cbc -in message_file -K 42AB7FCE7BFEEE03E16719044916CBD475F6D000F230D213FF0F4775EF8D46F5 -iv D5C21AC249B26A1FBA376E8CFCDC4E1A -S 2C6A1B8EAACA302D -e -out message_file.enc 
```

这会将密钥、iv 和 salt 放在我的进程标题中，在 top/ps 中可见。有没有办法在不泄露这些信息的情况下使用 openssl （或者甚至是另一种替代方法）对文件进行 AES 加密？我没有看到从文件中获取这些字符串的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T01:01:00.673

openssl 可以从标准输入获取命令

例如 if`onetime_keyfile`指定 key 和 IV 的内容如下

```
-K 42AB7FCE7BFEEE03E16719044916CBD475F6D000F230D213FF0F4775EF8D46F5 -iv D5C21AC249B26A1FBA376E8CFCDC4E1A 
```

然后以下命令将使用该信息加密文件

```
umask 077
echo -n "enc -aes-256-cbc -in message_file -out message_file.enc " > encrypt_command_file
cat onetime_keyfile >> encrypt_command_file
openssl < encrypt_command_file 
```

请注意，在您的问题中，您指定了键、初始化向量和盐。在这种情况下，盐参数被忽略；salt 仅用于从密码短语派生 key 和 iv。如果您明确指定 key 和 iv，那么您应该使用自己的 salt 算法为您加密的每个文件生成唯一的密钥和 iv。所以在实际使用中，上例中的文件onetime_keyfile应该是从另一个程序中生成的输出。

请参阅[https://www.openssl.org/docs/crypto/EVP_BytesToKey.html](https://www.openssl.org/docs/crypto/EVP_BytesToKey.html)，了解从密码短语和盐生成密钥和 IV 的标准算法的详细信息。

如果您不自己进行加盐，则最好使用 -kfile 或 -pass 选项从文件中读取密码短语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:20:51.397

RSA加密：

[http://bsdsupport.org/q-how-do-i-use-openssl-to-encrypt-files/](http://bsdsupport.org/q-how-do-i-use-openssl-to-encrypt-files/)

```
openssl rsautl -encrypt -pubin -inkey public.key -in plaintext.txt -out encrypted.txt 
```

AES加密：

基于 openssl enc -h 的结果

```
openssl enc -aes-128-cbc -in foo -out foo.enc -kfile passwordfile 
```

这是 openssl enc -h 的结果。注意-kfile的描述

```
root@bt:/tmp# openssl enc -h
unknown option '-h'
options are
-in <file>     input file
-out <file>    output file
-pass <arg>    pass phrase source
-e             encrypt
-d             decrypt
-a/-base64     base64 encode/decode, depending on encryption flag
-k             passphrase is the next argument
-kfile         passphrase is the first line of the file argument
-md            the next argument is the md to use to create a key
                 from a passphrase.  One of md2, md5, sha or sha1
-K/-iv         key/iv in hex is the next argument
-[pP]          print the iv/key (then exit if -P)
-bufsize <n>   buffer size
-engine e      use engine e, possibly a hardware device.
Cipher Types
-aes-128-cbc               -aes-128-cfb               -aes-128-cfb1             
-aes-128-cfb8              -aes-128-ecb               -aes-128-ofb              
-aes-192-cbc               -aes-192-cfb               -aes-192-cfb1             
-aes-192-cfb8              -aes-192-ecb               -aes-192-ofb              
-aes-256-cbc               -aes-256-cfb               -aes-256-cfb1             
-aes-256-cfb8              -aes-256-ecb               -aes-256-ofb              
-aes128                    -aes192                    -aes256                   
-bf                        -bf-cbc                    -bf-cfb                   
-bf-ecb                    -bf-ofb                    -blowfish                 
-cast                      -cast-cbc                  -cast5-cbc                
-cast5-cfb                 -cast5-ecb                 -cast5-ofb                
-des                       -des-cbc                   -des-cfb                  
-des-cfb1                  -des-cfb8                  -des-ecb                  
-des-ede                   -des-ede-cbc               -des-ede-cfb              
-des-ede-ofb               -des-ede3                  -des-ede3-cbc             
-des-ede3-cfb              -des-ede3-ofb              -des-ofb                  
-des3                      -desx                      -desx-cbc                 
-rc2                       -rc2-40-cbc                -rc2-64-cbc               
-rc2-cbc                   -rc2-cfb                   -rc2-ecb                  
-rc2-ofb                   -rc4                       -rc4-40 
```

# asp.net - 每个中继器行的计算变量显示在下一行

> ID：16028712
> 
> 赞同：0
> 
> 时间：2013-04-16T04:18:08.190
> 
> 标签：asp.net, .net, data-binding, repeater

我有一个受保护的变量并在转发器项目模板中使用，<%# Bonus %> 根据同一行中其他列的值在转发器的 OnItemDataBound 事件中计算。

问题是一行的奖金值显示在下一行。所以对于第 1 行，该值为空白。第二行显示第 1 行的奖金，第三行显示第二行的奖金值，依此类推。界限值显示良好。这是显示在错误行中的计算值。

似乎在 OnItemDataBound 事件中计算了计算值，但由于某种原因，该值未用于当前行的呈现，而是用于下一行。

我究竟做错了什么？

**更新**

简化示例代码：

```
 .......
    protected Decimal Bonus;
    .....
    (then inside repeater OnItemDataBound handler)
.....
    DataRowView row = (DataRowView) e.Item.DataItem;
    Bonus = Convert.ToInt32(row["salary"]) * .01;

     in ASPx:
    .....
<asp:Repeater runat="server">
<ItemTemplate>
    <td><%# Eval("salary") %>   <== will show correct value
    </td>
    <td><#% Bonus %>            <== doesn't show the bonus computed for that row from OnItemDataBound handler. Shows up in the next repeater row.
    </td>
<ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:40:13.733

[`OnItemDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.onitemdatabound.aspx)在绑定行之后发生。

当前行的所有值都存在于函数的参数中。

如果你需要设置一个新的值，因为在这个函数之后转发器不会再次绑定值，你应该自己设置控件的文本。

```
 void myRepeater_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

      // This event is raised for the header, the footer, separators, and items.

      // Execute the following logic for Items and Alternating Items.
      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {

         if (((Evaluation)e.Item.DataItem).Rating == "Good") {
            ((Label)e.Item.FindControl("BonusLabel")).Text= Bonus.ToString();
         }
      }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:42:59.850

您可以绑定到执行计算的方法：

**代码隐藏**

```
public string CalculateBonus(object salaryValue)
{
    int salary;
    string bonus;
    if (Int32.TryParse(salaryValue.ToString(), out salary))
    {
        bonus = (salary * .01).ToString();
    }
    else
    {
        bonus = "N/A"; //or whatever default value you want to return
    }
    return bonus;
} 
```

**页面**

```
<td><%# CalculateBonus(Eval("Salary")) %></td> 
```

# sqlalchemy - sqlalchemy ---》类型对象'role_user'没有属性'foreign_keys'

> ID：16028714
> 
> 赞同：1
> 
> 时间：2013-04-16T04:18:30.963
> 
> 标签：sqlalchemy, many-to-many

```
class User(Base):
    """
        users table
    """
    __tablename__ = 'users'

    __table_args__ = {
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    }

    id = Column(INTEGER, primary_key=True)
    email = Column(String(64), nullable=False, unique=True)
    password = Column(String(64), nullable=False)
    name = Column(String(32), nullable=False)
    last_login_time = Column(DateTime, default='')
    last_login_ip = Column(String(32), default='')
    create_time = Column(DateTime, nullable=False)
    status  = Column(SMALLINT, default=0)
    role = relationship("Role",
                    secondary="role_user",
                    backref=backref('user'))

    def __init__(self, email, password, name, last_login_time=now,
                            last_login_ip='0', create_time=now, status=0):
        self.email = email
        self.password = md5(password)
        self.name = name
        self.last_login_time = last_login_time
        self.last_login_ip = last_login_ip
        self.create_time = create_time
        self.status = status

    def __repr__(self):
        return "<User('%s', '%s')>" % (self.name, self.email)

class Role(Base):
    """
        roles table
    """
    __tablename__ = 'roles'

    __table_args__ = {
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    }

    id = Column(SMALLINT(5), primary_key=True)
    name = Column(String(32), nullable=False, unique=True)

    def  __init__(self, name):
        self.name = name

    def  __repr__(self):
        return "<Role('%s', '%s')>" % (self.id, self.name)

class role_user(Base):
    """
        role_user association table
    """

    __tablename__ = 'role_user'

    __table_args__ = {
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    }

    user_id = Column(INTEGER, ForeignKey('users.id'), primary_key=True)
    role_id = Column(SMALLINT(5), ForeignKey('roles.id'), primary_key=True)

    def __init__(self, user_id, role_id):
        self.user_id = user_id
        self.role_id = role_id 
```

当我创建一个用户时，我遇到了错误：

```
u1 = User(email='john@example.com', password='12345', name='john')
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "<string>", line 2, in __init__
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/instrumentation.py", line 310, in _new_state_if_none
    state = self._state_constructor(instance, self)
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/util/langhelpers.py", line 582, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/instrumentation.py", line 145, in _state_constructor
    self.dispatch.first_init(self, self.class_)
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/event.py", line 409, in __call__
    fn(*args, **kw)
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/mapper.py", line 2209, in _event_on_first_init
    configure_mappers()
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/mapper.py", line 2118, in configure_mappers
    mapper._post_configure_properties()
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/mapper.py", line 1242, in _post_configure_properties
    prop.init()
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/interfaces.py", line 231, in init
    self.do_init()
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/properties.py", line 1028, in do_init
    self._setup_join_conditions()
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/properties.py", line 1102, in _setup_join_conditions
    can_be_synced_fn=self._columns_are_mapped
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/relationships.py", line 114, in __init__
    self._determine_joins()
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/orm/relationships.py", line 180, in _determine_joins
    consider_as_foreign_keys=consider_as_foreign_keys
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.1dev-py2.6-linux-i686.egg/sqlalchemy/sql/util.py", line 345, in join_condition
    b.foreign_keys,
AttributeError: type object 'role_user' has no attribute 'foreign_keys'
>>> 
jiankong@ubuntu:~/git/admin-server$ python manage.py shell
Python 2.6.5 (r265:79063, Oct  1 2012, 22:07:21) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from apps.auth.models import User
>>> u1 = User(email='john@example.com', password='12345', name='john') 
```

我能做些什么来解决这个问题？谢谢你 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:41:02.810

你有冲突的名称`role_user`，因为有一个名为的类`role_user`和一个同名的表。所以`secondary="role_user"`首先选择类对象。也许这样说：

```
relationship("Role", secondary="role_user.__table__") 
```

编辑：理想情况下，您将“role_user”定义为仅表，并在执行“辅助”之前定义它。按照[http://docs.sqlalchemy.org/en/latest/orm/relationships.html#many-to-many](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#many-to-many)中的示例进行操作。

# php - 使用php将逗号分隔的字符串分成一对2

> ID：16028715
> 
> 赞同：1
> 
> 时间：2013-04-16T04:18:42.520
> 
> 标签：php, function, loops, for-loop, explode

我有一个具有 128 个值的字符串，格式为：

```
1,4,5,6,0,0,1,0,0,5,6,...1,2,3. 
```

我想以以下形式配对：

```
(1,4),(5,6),(7,8) 
```

这样我就可以使用 PHP 为 64 个数据创建一个 for 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:33:21.997

您可以通过以下步骤完成此操作：

1.  用于[`explode()`](http://php.net/explode)将字符串转换为数字数组

2.  用于[`array_chunk()`](http://php.net/array_chunk)形成两人一组

3.  用于[`array_map()`](http://php.net/array_map)将每个组变成带括号的字符串

4.  用来[`join()`](http://php.net/join)把所有东西粘在一起。

您可以使用这种美味的单线，因为每个人都喜欢这些：

```
echo join(',', array_map(function($chunk) {
    return sprintf('(%d,%d)', $chunk[0], isset($chunk[1]) ? $chunk[1] : '0');
}, array_chunk(explode(',', $array), 2))); 
```

[**演示**](http://codepad.viper-7.com/WgVtZp)

如果最后一个块小于两个项目，它将`'0'`用作第二个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:23:40.717

```
<?php
$a = 'val1,val2,val3,val4';

function x($value)
    {
        $buffer = explode(',', $value);
        $result = array();

        while(count($buffer))
            { $result[] = array(array_shift($buffer), array_shift($buffer)); }

        return $result;
    }

$result = x($a);

var_dump($result);
?> 
```

显示：

```
array(2) { [0]=> array(2) { [0]=> string(4) "val1" [1]=> string(4) "val2" } [1]=> array(2) { [0]=> string(4) "val3" [1]=> string(4) "val4" } } 
```

如果修改它，那么它可能会以这种方式帮助您：

```
<?php
$a = '1,2,3,4';

function x($value)
    {
        $buffer = explode(',', $value);
        $result = array();

        while(count($buffer))
            { $result[] = sprintf('(%d,%d)', array_shift($buffer), array_shift($buffer)); }

        return implode(',', $result);
    }

$result = x($a);

var_dump($result);
?> 
```

这表明：

```
string(11) "(1,2),(3,4)" 
```

# asp.net-mvc-4 - 在 MVC 4 中加载子模型时遇到问题

> ID：16028719
> 
> 赞同：1
> 
> 时间：2013-04-16T04:19:10.507
> 
> 标签：asp.net-mvc-4, viewmodel, partial-views, valueinjecter

我有一个包含子 _DetailsViewModel 实例的 OrderViewModel。OrderViewModel 包含订单头信息，_DetailsViewModel 包含订单详细信息。尽管是单独的模型，但它们都具有相同的单一数据源..订单表。细节在他们自己的视图模型中的原因是这些字段在不同的视图上重用，在相同的视觉安排中，所以我把它们放在一个部分视图中，以便根据需要重用。这是我的主要和子视图模型的想法：

```
public class OrderViewModel
{
    public string OrderNum  { get; set; }
    public string CustonerName{ get; set; }
    public double SalesPrice{ get; set; }
    public _Details Details { get; set; }
}

public class _DetailsViewModel
{
    public string PhoneNum { get; set; }
    public string ItemNum { get; set; }
    public double Quantity { get; set; }
    public string PayMethod{ get; set; }
    public string Comments { get; set; }
} 
```

在我的控制器中，我调用了一个服务，该服务返回 Orders 表中的所有数据并返回一个订单实体列表。

```
orderService = new OrderService();
var orders = orderService.GetOrderInfo(StoreNum); 
```

从那里我使用 Omu.ValueInjecter 将结果注入主视图模型。

```
var orderViewModel = orders
                    .Select(x => new                              
                      OrderViewModel().InjectFrom(x)).Cast<OrderViewModel>()
                    .ToList();

return View(orderViewModel); 
```

我还需要填充 _Details 模型，以便我可以从我的主订单视图中将其传递给部分视图......如下所示：

@Html.Partial("_OrderDetails", Model._Details)

有没有办法从已经填充主订单模型的单个服务调用填充 _Details 模型？我是否必须将 _Details 属性添加到主订单视图，然后迭代订单视图以手动设置相应 _Details 模型的每个字段？我肯定错过了一些东西。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:52:56.883

首先将实体移出数据库，这样您只需发出一个查询请求：

```
// apply any filter(s) needed here.
var orderList = orders.ToList();

// then do injecting using the "cached" orders 
var orderViewModel = orderList
    .Select(x => new OrderViewModel().InjectFrom(x))
    .Cast<OrderViewModel>()
    .ToList();

// then inject into your details model
var detailsModel = orderList
    .Select(x => new _DetailsViewModel().InjectFrom(x))
    .Cast<_DetailsViewModel>()
    .ToList(); 
```

如果可以的话，还有一个小建议，删除下划线 for`_DetailsViewModel`以制定命名标准。

**更新：**

> 之后如何将 detailsModel 添加到 orderViewModel 以传递给 Order View？

您只需将其设置为如下实例`OrderViewModel`：

```
orderViewModel.Details = detailsModel ; 
```

然后返回`orderViewModel`您的视图并在那里做您的事情：

```
@Html.Partial("_OrderDetails", Model.Details) 
```

# php - 无法连接到数据源

> ID：16028729
> 
> 赞同：3
> 
> 时间：2013-04-16T04:19:57.070
> 
> 标签：php, odbc, adodb, freetds, unixodbc

我尝试通过 php + adodb 连接到我的数据库。这是我的 php 代码：

```
$kpp_db = ADONewConnection('odbc_mssql');
$kpp_db->debug = true;
$kpp_db->charSet="UTF-8";
$kpp_dbDSN = "Driver={SQL Server};Server=$kppConfig_dbHost;Database=$kppConfig_dbName;";
$kppConfig_akEnabled=$kpp_db->Connect($kppConfig_dbDSN, $kppConfig_dbLogin, $kppConfig_dbPassword); 
```

但这是行不通的。我收到消息

> S1000：[unixODBC][FreeTDS][SQL Server]无法连接到数据源

这是我的 /etc/odbc.ini 文件：

```
[SQL Server]
Driver=FreeTDS 
Description=testsql
Trace=Yes
TraceFile=~/workspace/mstest.log 
```

和 /etc/odbcinst.ini 文件：

```
[FreeTDS]
Description             = FreeTDS unixODBC Driver
Driver          = /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so
Setup           = /usr/lib/x86_64-linux-gnu/odbc/libtdsS.so
UsageCount              = 1 
```

我很困惑。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-19T21:01:45.440

在 redhat 中，但不确定是否适用于其他 linux 操作系统。

您还必须允许 apache/httpd 与 MSSQL 通信，只需键入以下命令，然后重新启动 httpd：

```
setsebool -P httpd_can_network_connect on
setsebool -P httpd_can_network_connect_db on

systemctl restart httpd 
```

然后尝试连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T12:06:14.100

您是否尝试过像[这里](https://stackoverflow.com/questions/18232386/freetds-working-but-odbc-cannot-connect)描述的那样通过命令行连接？如果 tsql 和 isql 都工作，那么您的配置文件不是问题。根据您使用的操作系统，这可能是权限问题。对我来说，禁用 SELinux 就可以了：

```
sudo setenforce 0 
```

# jquery - jQuery基本变量交换

> ID：16028732
> 
> 赞同：0
> 
> 时间：2013-04-16T04:20:11.233
> 
> 标签：jquery, html, css

在我看来，下面的代码中没有错误，但由于某种原因，它不会简单地更改点击时的变量值。任何帮助都会很棒。

```
var test = 1;

$("div").click(function() {
     test = 0;
});

if (test == 0) {
     $("p").html("hello");
} 
```

我意识到这是一个基本问题，我已经进行了广泛的搜索，但我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:26:02.570

是你要找的吗？ **[jsFiddle](http://jsfiddle.net/2TGLH/)**

```
 var test = 1;

 $("div").click(function () {
     test = 0;

     if (test === 0) {
         $("p").html("hello");
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:21:50.277

您的 if 语句不在实际的点击处理程序中

```
var test = 1;

$("div").click(function() {
     test = 0;
     if (test == 0) {
         $("p").html("hello");
     }
}); 
```

所以它实际上并没有在 Click 上进行测试。

# java - Java：Microsoft Word 文档到 html 转换器样式表

> ID：16028735
> 
> 赞同：2
> 
> 时间：2013-04-16T04:20:16.540
> 
> 标签：java, doc, apache-tika

根据需要，我正在尝试将 doc 或 docx (Microsoft word) 文件转换为 html 格式`Apache tika`

我最终得到以下代码，它工作正常，但它没有向结果 html 添加任何样式表。

```
 import javax.xml.transform.OutputKeys;
 import java.io.*;
 import javax.xml.transform.stream.StreamResult;
 import javax.xml.transform.sax.SAXTransformerFactory;
 import javax.xml.transform.sax.TransformerHandler;
 import org.apache.tika.metadata.Metadata;
 import org.apache.tika.parser.AutoDetectParser;
 import org.apache.tika.parser.ParseContext;
 import org.apache.tika.detect.DefaultDetector;

public class DocxConvert

  {

  public static void main(String []args) 
   {
      InputStream input=null;

     try
        {
    StringWriter sw = new StringWriter();
            SAXTransformerFactory factory = (SAXTransformerFactory)
            SAXTransformerFactory.newInstance();
            TransformerHandler handler = factory.newTransformerHandler();
            handler.getTransformer().setOutputProperty(OutputKeys.METHOD,"html");
            handler.getTransformer().setOutputProperty(OutputKeys.INDENT,"yes");
            handler.setResult(new StreamResult(sw));
            input = new FileInputStream("f:\\file.doc");
            DefaultDetector detector = new DefaultDetector();
            Metadata metadata = new Metadata();
            org.apache.tika.parser.Parser parser = new AutoDetectParser(detector); 
            parser.parse(input, handler, metadata, new ParseContext());

            System.out.print(sw.toString());

        }
      catch (Exception ex)
   { 
        ex.printStackTrace();
   }
      finally {
              try {
            input.close();
          }
                  catch (IOException e)
                 {
            // TODO Auto-generated catch block
            e.printStackTrace();
          }
       } 

 }

} 
```

有没有办法添加/生成样式表来输出？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T11:04:24.360

您可以使用 unoconv，它需要 Openoffice 或 Libreoffice。从[这里](https://github.com/dagwieers/unoconv)下载，它提供 doc、docx、xls 等从服务器中的命令行到 pdf 的转换。如果你想用 apache 或 apache tomcat 显示嵌入 pdf 文件，我认为 pdf.js 是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T20:23:28.307

我使用了 1.6 版的 Tika，这对我来说效果很好。这是我使用的 pom 依赖项。

[http://tika.apache.org/download.html](http://tika.apache.org/download.html)

```
 <dependencies>
        <dependency>
            <groupId>org.apache.tika</groupId>
            <artifactId>tika-core</artifactId>
            <version>1.6</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tika</groupId>
            <artifactId>tika-parsers</artifactId>
            <version>1.6</version>
        </dependency>
    </dependencies> 
```

# php - htaccess 代码点火器

> ID：16028737
> 
> 赞同：0
> 
> 时间：2013-04-16T04:20:30.747
> 
> 标签：php, .htaccess, codeigniter

首先对不起我的英语不好

这是我的这个问题的背景：我有 2 个项目使用 codeigniter 1 由团队 a 名称项目创建的项目：client_site 另一个由团队 b 名称项目创建的项目：server_site

prod 机器上的结构目录是：
---- www
-------- application(folder)
-------- system(folder)
-------- .htaccess
--- ----- server_site（文件夹）
--------------- 应用程序（文件夹）
--------------- 系统（文件夹）
--- ------------ .htaccess

问题从今天开始，突然当管理员无法登录服务器站点（上午9点）当管理员提交登录面板时，它说找不到页面（404），突然可以在下午12点和今晚17点再次登录pm admin 无法再次登录，但客户端站点没有问题，他们仍然可以访问添加/编辑/添加项目，仅发生在服务器站点

我不明白为什么，或者我的应用程序代码错误，但是当我检查控制器和函数时，它已经存在控制器 home.php 和函数 login()

我的老板说，我的 htaccess 可能设置错误

这是我的 htaccess ：

## 在根站点（client_site）上：

```
RewriteEngine on <br/>
RewriteCond %{REQUEST_FILENAME} !-f<br/>
RewriteCond %{REQUEST_FILENAME} !-d<br/>
RewriteCond $1 !^(index\.php|images|font|banners|buttons|css|detik|js|robots\.txt|favicon\.ico)<br/>
RewriteCond $1 !^(index\.php|application/views/|robots\.txt|install|favicon\.ico|documents)
RewriteRule ^(.*)$ /index.php?/$1 [L]<br/>
RewriteCond %{HTTP_HOST} !^www\.(.+)$ [NC]<br/>
RewriteRule ^(.*)$ http://www.client_site.net/ [R=301,L]<br/> 
```

* * *

## 在 server_site 上：

```
RewriteEngine on <br/>
RewriteCond %{REQUEST_FILENAME} !-f<br/>
RewriteCond %{REQUEST_FILENAME} !-d<br/>
RewriteCond $1 !^(index\.php|images|img|css|js|robots\.txt)<br/>
RewriteCond $1 !^(index\.php|application/views/|robots\.txt|install|favicon\.ico|documents)<br/>
RewriteRule ^(.+)$ index.php?/$1 [L,QSA]<br/>
RewriteCond %{HTTP_HOST} !^www\.<br/>
RewriteRule ^(.*)$ http://www.[%]{HTTP_HOST}/server_site/$1 [R=301,L]<br/> 
```

* * *

有人，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:54:23.590

在服务器端，你有两个问题

```
RewriteRule ^(.+)$ index.php?/$1 [L,QSA] 
```

这与客户端不同的是`.+`vs `.*`、`index.php`vs`/index.php`和`L,QSA`vs `L`。

第二点可能更严重，`[%]{HTTP_HOST}`行不通，因为它没有被替代。您必须`%{HTTP_HOST}`改用

```
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/server_site/$1 [R,L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`. 永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

# jquery - 通过 jQuery 从 Tin Can API 自定义 searchStatements 结果

> ID：16028746
> 
> 赞同：0
> 
> 时间：2013-04-16T04:21:45.380
> 
> 标签：jquery, tin-can-api

我正在使用 Tin Can API 来展示我们 LRS 的结果。

从我采取的示例语句查看器中：

```
$(document).ready(function(){
  TC_VIEWER = new TINCAN.Viewer();
  TC_VIEWER.pageInitialize();
  TC_VIEWER.searchStatements();
}); 
```

一切正常，但默认演示文稿，特别是日期，很简单。认为清理演示文稿的最简单方法是通过 searchStatements 上的回调函数：

```
$(document).ready(function(){
  TC_VIEWER = new TINCAN.Viewer();
  TC_VIEWER.pageInitialize();
  TC_VIEWER.searchStatements(function(){
    $(".date").css("color", "pink");  //test call only
  });
}); 
```

但是该函数似乎从未被调用过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:21:31.990

函数 searchStatements() 不接受任何参数，因此您编写的内容将不起作用。尝试在 searchStatements() 调用下运行您的代码：

```
$(document).ready(function(){
  TC_VIEWER = new TINCAN.Viewer();
  TC_VIEWER.pageInitialize();
  TC_VIEWER.searchStatements();
  $(".date").css("color", "pink");  //Will change existing .date elements' color
}); 
```

但是，由于 searchStatements() 运行 ajax 查询来获取结果，因此您应该在完成后更新颜色。看看 jQuery 的[.ajaxComplete()](http://api.jquery.com/ajaxComplete/)

# c# - 如何获得两个 Point 对象之间的所有点？

> ID：16028752
> 
> 赞同：7
> 
> 时间：2013-04-16T04:22:13.883
> 
> 标签：c#, .net

假设我有我的第一个 Point 结构：

```
Point start = new Point(1, 9); 
```

我的第二个：

```
Point end = new Point(4, 9); 
```

我想得到开始和结束之间的所有点。因此，例如，我想要一个数组中的 2,9 和 3,9。.NET 是否为此内置了一些东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-12-07T20:14:07.380

这就是我最终做的。正如@Cody Gray 在他的评论中提到的，一条线上有无限的点。因此，您需要指定要检索的点数。

我的线类：

```
public class Line {
    public Point p1, p2;

    public Line(Point p1, Point p2) {
        this.p1 = p1;
        this.p2 = p2;
    }

    public Point[] getPoints(int quantity) {
        var points = new Point[quantity];
        int ydiff = p2.Y - p1.Y, xdiff = p2.X - p1.X;
        double slope = (double)(p2.Y - p1.Y) / (p2.X - p1.X);
        double x, y;

        --quantity;

        for (double i = 0; i < quantity; i++) {
            y = slope == 0 ? 0 : ydiff * (i / quantity);
            x = slope == 0 ? xdiff * (i / quantity) : y / slope;
            points[(int)i] = new Point((int)Math.Round(x) + p1.X, (int)Math.Round(y) + p1.Y);
        }

        points[quantity] = p2;
        return points;
    }
} 
```

用法：

```
var line = new Line(new Point(10, 15), new Point(297, 316));
var points = line.getPoints(20); 
```

这将返回一个由 20 个 Points 组成的 Point 数组，它们在两个端点（包括）之间均匀分布。希望有帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-17T13:48:21.963

没有内置函数，因为点之间没有点。数学上，两点之间有一条线。在计算机图形方面，可以对线条进行抗锯齿处理，因此不会四舍五入到完整的整数。

如果您正在寻找一种在两者之间创建所有整数的快速方法，我想 Bresenhams-Line-Algorithm 将是您的选择。但这不是构建到 .NET 中的，您必须自己编写代码（或采用 Matthew Watson 的实现）：

[http://en.wikipedia.org/wiki/Bresenham's_line_algorithm](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)

甚至还有更快的算法可以做到这一点，但我会选择 Bresenham。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-15T14:15:10.240

我知道自从您第一次提出这个问题以来已经有很长时间了，但我最近在寻找类似的东西并找到了这个包含伪代码的 wiki ( [https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm](https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm) )。

所以我用伪代码实现了一个函数来执行这个计算并将点添加到一个列表中。

```
public List<Point> GetPoints(Point p1, Point p2)
{
    List<Point> points = new List<Point>();

    // no slope (vertical line)
    if (p1.X == p2.X)
    {
        for (double y = p1.Y; y <= p2.Y; y++)
        {
            Point p = new Point(p1.X, y);
            points.Add(p);
        }
    }
    else
    {
        // swap p1 and p2 if p2.X < p1.X
        if (p2.X < p1.X)
        {
            Point temp = p1;
            p1 = p2;
            p2 = temp;
        }

        double deltaX = p2.X - p1.X;
        double deltaY = p2.Y - p1.Y;
        double error = -1.0f;
        double deltaErr = Math.Abs(deltaY / deltaX);

        double y = p1.Y;
        for (double x = p1.X; x <= p2.X; x++)
        {
            Point p = new Point(x, y);
            points.Add(p);
            Debug.WriteLine("Added Point: " + p.X.ToString() + "," + p.Y.ToString());

            error += deltaErr;
            Debug.WriteLine("Error is now: " + error.ToString());

            while (error >= 0.0f)
            {
                Debug.WriteLine("   Moving Y to " + y.ToString());
                y++;
                points.Add(new Point(x, y));
                error -= 1.0f;
            }
        }

        if (points.Last() != p2)
        {
            int index = points.IndexOf(p2);
            points.RemoveRange(index + 1, points.Count - index - 1);
        }
    }

    return points;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-03T10:43:01.527

您可以使用以下代码在点之间获取。用户只需要定义两点之间要获得多少点。这里我定义为 10 分。

```
PointF pStart = new PointF(10, 10);
PointF pEnd = new PointF(100, 100);

PointF[] betPoints = new PointF[10];
for (int i = 1; i <= 10; i++)
{
    betPoints[i].X = (Math.Abs(pStart.X - pEnd.X) / 10) * i + pEnd.X;
    betPoints[i].Y = (Math.Abs(pStart.Y - pEnd.Y) / 10) * i + pEnd.Y;
} 
```

# php - Rediska 按模式缓慢获取密钥

> ID：16028754
> 
> 赞同：1
> 
> 时间：2013-04-16T04:22:37.697
> 
> 标签：php, redis, rediska

方法 KEYS（在名为 getKeysByPattern() 的 Rediska 上）非常慢。10k db 上的 200 次迭代需要 20-25 秒！

例如，键名为`foo:time:*:y:*:m:*:d:*:h:*:i:*:bar_name:*:item_id:*:category_id:*`

它是 redis 或 rediska php 客户端的正常行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:48:37.467

rediska getKeysByPattern 使用 redis KEYS 命令

这是 Redis 文档 ( [http://redis.io/commands/keys](http://redis.io/commands/keys) ) 关于该命令的一些文本

> 警告：将 KEYS 视为仅应极其小心地在生产环境中使用的命令。当它针对大型数据库执行时，它可能会破坏性能。此命令用于调试和特殊操作，例如更改键空间布局。不要在常规应用程序代码中使用 KEYS。如果您正在寻找一种在键空间子集中查找键的方法，请考虑使用集合。

# git - Git 不理解纯真/假（当一个处于活动状态时，远程目录有效，当另一个处于活动状态时，本地目录有效）

> ID：16028755
> 
> 赞同：-1
> 
> 时间：2013-04-16T04:22:39.287
> 
> 标签：git

如果我的遥控器设置为以下，我可以从我的本地分支推送（并且不能从我的远程分支推送）：

```
git config core.bare true 
```

如果我的遥控器设置为以下，那么我可以从远程分支推送（并且不能从我的本地分支推送）：

```
to git config core.bare false 
```

为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:31:09.400

当`core.bare = false`并且通常 HEAD 指向 branch`master`时，`master`无法更新。这就是推送失败的原因。

# .net - SmtpClient/MailMessage 上的主题编码

> ID：16028757
> 
> 赞同：9
> 
> 时间：2013-04-16T04:22:54.543
> 
> 标签：.net, smtp, mailchimp, mandrill

我正在尝试使用`SmtpClient`和`MailMessage`类发送包含非 ASCII 字符的电子邮件。

我正在使用外部邮件服务 ( [MailChimp](http://mailchimp.com/) )，我的一些电子邮件已被他们的 SMTP 服务器拒绝。我已经联系了他们，他们是这样回复的：

> 似乎主题行是 Base64 编码，然后是 Quoted-Printable 编码，这通常应该没问题，但是其中一个字符被分成两行。因此，当您的主题行有点长时，为了正确处理，它被分成两行。在主题行中使用 UTF-8 引用可打印时，不应在行之间断开字符串。相反，应该缩短一行，以便完整的字符串保持在一起。在这种情况下，这不会发生，因此表示单个字符的字符串被分成多行，因此不是有效的 UTF-8 引用打印编码。

有问题的主题如下：

```
Subject: XXXXXXX - 5 personnes vous ont nommé guide 
```

也就是说，在 UTF-8/Base64 中：

```
Subject: WFhYWFhYWCAtIDUgcGVyc29ubmVzIHZvdXMgb250IG5vbW3DqSBndWlkZQ== 
```

因为该标头会超过某个最大长度（我不确定它是 Quoted-Printable 编码及其每行 76 个字符的限制，还是 SMTP 标头限制），在编码和拆分后，标头将变为：

```
Subject: =?utf-8?B?WFhYWFhYWCAtIDUgcGVyc29ubmVzIHZvdXMgb250IG5vbW3D?=
 =?utf-8?B?qSBndWlkZQ==?= 
```

显然这在解码时会导致问题（因为第一行无法解码为有效字符串）。我不确定我是否完全理解这个问题，我有以下问题：

*   为什么是 ?utf-8?B？部分重复？QP编码不应该在分割线之前发生，因此它的标题不应该重复吗？
*   在 QP 解码之后，我们不应该得到一个有效的 1 行 Base64 字符串吗？
*   在 QP 编码之外的第二行开头有一个空格，这可能是问题吗？
*   是编码器坏了，还是解码器坏了？

另请注意，其他一些 SMTP 服务器将接受此消息，但这并不意味着它是有效的。

作为一种解决方法，我尝试禁用 Base64 编码，这显然是不必要的，但是 MailMessage 类具有控制此编码的[BodyTransferEncoding](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.bodytransferencoding.aspx)属性，但仅适用于消息的正文部分。似乎没有属性可以控制主题的“转移”编码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-24T08:37:10.273

这在 MSDN 论坛中被确认为一个错误：http:
[//social.msdn.microsoft.com/Forums/vstudio/en-US/4d1c1752-70ba-420a-9510-8fb4aa6da046/subject-encoding-on-smtpclientmailmessage](http://social.msdn.microsoft.com/Forums/vstudio/en-US/4d1c1752-70ba-420a-9510-8fb4aa6da046/subject-encoding-on-smtpclientmailmessage)

并且在 Microsoft Connect 上提交了一个错误： [https ://connect.microsoft.com/VisualStudio/feedback/details/785710/mailmessage-subject-incorrectly-encoded-in-utf-8-base64](https://connect.microsoft.com/VisualStudio/feedback/details/785710/mailmessage-subject-incorrectly-encoded-in-utf-8-base64)

一种解决方法是将 MailMessage 的 SubjectEncoding 设置为其他编码，例如 ISO-8859-1。在这种情况下，主题将被编码为 Quoted Printable（不是 Base64），从而避免了该问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-15T02:26:35.477

更好的解决方案是使用`Encoding.Unicode`而不是`Encoding.UTF8`for `SubjectEncoding`。

看来，由于 Microsoft 实现只是忽略了 UTF-16 能够将字符编码为两个以上字节的现实（如[为什么 C# 将 UTF-16 用于字符串？](http://blog.coverity.com/2014/04/09/why-utf-16/#.WAGODuArJhE)），因此稳定的字符大小会有所帮助。

我在[https://gist.github.com/dbykadorov/9047455](https://gist.github.com/dbykadorov/9047455)上看到过这个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-24T13:28:07.417

在主题中添加两个空格对我有用。不要问为什么。

```
var mail = new MailMessage(from, to);
mail.Subject = subject + new string(new char[] { '\u2000', '\u2000' });
mail.SubjectEncoding = Encoding.UTF8; 
```

[![在此处输入图像描述](https://i.stack.imgur.com/S4oHM.png)](https://i.stack.imgur.com/S4oHM.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-26T01:01:04.153

我对这个问题的解决方案是某种技巧！

我在邮件主题中使用波斯语，并在 .Net 框架 4.5.2 中使用 SmtpClient 发送邮件。收到的消息主题在某些位置显示一些垃圾词，例如主题字符串中的第 18 和第 38 个字符。无论主题是什么。

然后我尝试在这些位置插入一些空格（字符 32），重新发送邮件后结果非常好。unicode 主题按预期显示。

所以我写了一个函数来在我需要的位置插入 6 个空格（避免在单词中插入空格），如下所示：

```
private static string InsertSpacesBetweenWords(this string subject , int where)
    {
        int l;
        int i=1;
        string[] s = subject.Split(new string[] { " " },  StringSplitOptions.RemoveEmptyEntries);
        string output = "";

        if (s.Length > 0) output += s[0] + " ";
        l = output.Length;
        bool done = false;

        while (i < s.Length)
        {
            if (!done)
            {
                if ((s[i] + output).Length > where)
                {
                    for (int j = output.Length; j < where + 6; j++)
                        output += " ";
                    done = true;
                }
            }
            output += s[i] + " ";
            i++;
        }
        return output;
    } 
```

然后我使用此功能转换了邮件主题：

```
mail.Subject = mySubject.InsertSpacesBetweenWords(38).InsertSpacesBetweenWords(18); 
```

有趣的一点是，Gmail 和 Yahoo 邮件（可能还有其他基于 Web 的邮件系统）会忽略多余的空格并按预期显示主题。

# publish - 在 SAVE 和 SAVE&PUBLISH 之间创建条件

> ID：16028760
> 
> 赞同：0
> 
> 时间：2013-04-16T04:23:05.207
> 
> 标签：publish, conditional-statements

在过去的几天里，我似乎对我的项目感到纠结。我正在尝试构建一个自定义 cms，并且我已经准备好为网站页面创建帖子。

我有两 (2) 个按钮 -> ' **SAVE** ' 和 ' **SAVE & PUBLISH** ' SAVE 按钮会将我的表单字段提交到数据库，但*不会*将数字 1 放在发布字段中，因此在 SAVE&PUBLISH 时它不会被处理为已发布会做同样的事情，但*会将*数字 1 放在发布字段中，以便将其作为已发布处理。

如何在不弄乱我的代码的情况下建立一个条件？我知道这需要一些调整。请查看我当前的代码。

```
 // CHECK IF THE FORM WAS SUBMITTED
       if( isset( $_POST['submit'] ) ){

          $title = $_POST['title'];
          $editor_data = $_POST[ 'editor1' ];
          $format = $_POST[ 'format' ];
          $page = $_POST['page'];

        //IF FORM WAS SUBMITTED, CHECK IF THERE ARE ERRORS
        if(empty($title) === true){
           $errors[] = "You forgot to add a Title";
        }
        if(empty($editor_data) === true){
           $errors[] = "You forgot to add a Content";
        }
        if(empty($format) === true){
           $errors[] = "Please choose a title format";
        }
        if(empty($page) === true){
           $errors[] = "Please choose a Page";
        }

        //IF THE ERROR ARRAY IS EMPTY THEN PROCESS THE FORM
        if (empty($errors) === true){

           switch ($format)
           {
           case "1":
           $post_title = "<h1>".$title."</h1>";
           break;
           case "2":
           $post_title = "<h2>".$title."</h2>";
           break;
           case "3":
           $post_title = "<h3>".$title."</h3>";
           break;
           case "4":
           $post_title = "<h4>".$title."</h4>";
           break;
           case "5":
           $post_title = "<h5>".$title."</h5>";
           break;
           case "6":
           $post_title = "<h6>".$title."</h6>";
           break;
           default:
           $post_title = $title;
           }//>end of switch

           //current time zone
           date_default_timezone_set('Asia/Manila');
           $date = date('Y-m-d');
           $date_time = date('Y-m-d H:i:s');

           //INSERT VALUES FROM FORM TO THE DATABASE TABLE
           mysql_query("INSERT INTO posts (`post_title`, `post_content`, `post_page`, `date_posted`) VALUES('$post_title', '$editor_data', '$page', '$date_time')");

         // IF  ERROR ARRAY IS NOT EMPTY, OUTPUT ERRORS!
         } else if(empty($errors) === false){
             //output errors
             echo output_errors($errors);
         }//> end of else if errors

      }//>end of isset submit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:57:33.797

解决了我自己的问题。我现在唯一关心的是如何使这段代码更短。有解决方法吗？

```
 // CHECK IF THE FORM WAS SUBMITTED AS SAVED
         if( isset( $_POST['save'] ) ){

            $title = $_POST['title'];
                    $editor_data = $_POST[ 'editor1' ];
            $format = $_POST[ 'format' ];
            $page = $_POST['page'];

            //IF FORM WAS SUBMITTED, CHECK IF THERE ARE ERRORS
            if(empty($title) === true){
             $errors[] = "You forgot to add a Title";
            }
            if(empty($editor_data) === true){
             $errors[] = "You forgot to add a Content";
            }
            if(empty($format) === true){
             $errors[] = "Please choose a title format";
            }
            if(empty($page) === true){
             $errors[] = "Please choose a Page";
            }

           //IF THE ERROR ARRAY IS EMPTY THEN PROCESS THE FORM
           if (empty($errors) === true){

           switch ($format)
           {
           case "1":
             $post_title = "<h1>".$title."</h1>";
           break;
           case "2":
             $post_title = "<h2>".$title."</h2>";
           break;
           case "3":
             $post_title = "<h3>".$title."</h3>";
           break;
           case "4":
             $post_title = "<h4>".$title."</h4>";
           break;
           case "5":
             $post_title = "<h5>".$title."</h5>";
           break;
           case "6":
             $post_title = "<h6>".$title."</h6>";
           break;
           default:
             $post_title = $title;
           }//>end of switch

           //current time zone
           date_default_timezone_set('Asia/Manila');
           $date = date('Y-m-d');
           $date_time = date('Y-m-d H:i:s');

           //insert values from form to server
           mysql_query("INSERT INTO posts (`post_title`, `post_content`, `post_page`, `date_posted`) VALUES('$post_title', '$editor_data', '$page', '$date_time')");

            // IF ARRAY ERROR IS NOT EMPTY, OUTPUT ERRORS!
            } else if(empty($errors) === false){
            //output errors
            echo output_errors($errors);
            }//> end of else if errors

        }else if(isset( $_POST['publish'] )){
          $title = $_POST['title'];
                  $editor_data = $_POST[ 'editor1' ];
          $format = $_POST[ 'format' ];
          $page = $_POST['page'];

          //IF FORM WAS SUBMITTED, CHECK IF THERE ARE ERRORS
          if(empty($title) === true){
        $errors[] = "You forgot to add a Title";
          }
          if(empty($editor_data) === true){
        $errors[] = "You forgot to add a Content";
          }
          if(empty($format) === true){
        $errors[] = "Please choose a title format";
          }
          if(empty($page) === true){
        $errors[] = "Please choose a Page";
          }

          //IF THE ERROR ARRAY IS EMPTY THEN PROCESS THE FORM
          if (empty($errors) === true){

        switch ($format)
        {
         case "1":
           $post_title = "<h1>".$title."</h1>";
           break;
         case "2":
           $post_title = "<h2>".$title."</h2>";
           break;
         case "3":
           $post_title = "<h3>".$title."</h3>";
           break;
         case "4":
           $post_title = "<h4>".$title."</h4>";
           break;
         case "5":
           $post_title = "<h5>".$title."</h5>";
           break;
         case "6":
           $post_title = "<h6>".$title."</h6>";
           break;
        default:
           $post_title = $title;
        }//>end of switch

        //current time zone
        date_default_timezone_set('Asia/Manila');
        $date = date('Y-m-d');
        $date_time = date('Y-m-d H:i:s');

        //insert values from form to server
        mysql_query("INSERT INTO posts (`post_title`, `post_content`, `post_page`, `date_posted`, `publish`) VALUES('$post_title', '$editor_data', '$page', '$date_time', '1')");

           // IF ARRAY ERROR IS NOT EMPTY, OUTPUT ERRORS!
           } else if(empty($errors) === false){
         //output errors
         echo output_errors($errors);
           }//> end of else if errors
        }//>end of isset publish 
```

# python - 对迭代变量的更改未反映在原始列表中

> ID：16028764
> 
> 赞同：1
> 
> 时间：2013-04-16T04:23:31.093
> 
> 标签：python, python-2.7

我正在尝试实现 HTML 转义功能

这是我的代码：

```
def escape_html(s):
    for x in s:
        if x == '>':
            x = "&gt"
        elif x == '<':
            x = "&lt"
        elif x == ' " ':
            x = "&quot"
    return s

s = "dasdasdas > < "
print escape_html(s) 
```

我的输出与我的输入完全相同。为什么字符没有被替换？

预期输出：

```
dasdasdas &gt &lt 
```

实际输出：

```
dasdasdas > < 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:25:47.173

`for`循环遍历给定的可迭代对象，并在每次循环之前设置变量`in`。它和其他任何变量一样是一个变量。如果你试过这个：

```
my_list = [1, 2, 3]
x = my_list[1]
x = 5 
```

那么你最后就不会`my_list`平等`[1, 5, 3]`了；不，与其改变你从哪里来`x`，你只是重新绑定`x`。您的`x`. 您需要以`s`某种方式明确地将其放回。

无论如何，**如果您想实际转义 HTML，只需使用[`cgi.escape`](http://docs.python.org/2/library/cgi.html#cgi.escape).**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:48:09.563

连同@icktoofay 所说`x`的，将采用`s`. 你如何期望一个字符等于`' " '`？您可能应该改用索引。这是您的功能的修改版本，可以满足您的需求（但是它仍然非常不完整，并且`cgi.escape`将是最好的方法）：

```
>>> def escape_html(s):
        x = ''
        for i in range(len(s)):
            if s[i] == '>':
                x += "&gt"
            elif s[i] == '<':
                x += "&lt"
            elif s[i:i + 3] == ' " ':
                x += "&quot"
            else:
                x += s[i]
        return x

>>> print escape_html("dasdasdas > < ")
dasdasdas &gt &lt 
```

# javascript - 使用 jquery 内部或外部文档准备好

> ID：16028771
> 
> 赞同：4
> 
> 时间：2013-04-16T04:23:44.080
> 
> 标签：javascript, jquery

以下两种情况给了我相同的行为。但是技术上的区别是什么？（我将下面的代码放在正文中脚本标签的最后一部分。）

```
$(document).ready(function() {
  $('.collapse').collapse({toggle: false});

  $(document).on('click', '#expandAllLessons', function() {
    $('div.accordion-body').collapse('show');
  });

  $(document).on('click', '#collapseAllLessons', function() {
    $('div.accordion-body.collapse').collapse('hide');
  });
}); 
```

或者

```
$(document).ready(function() {
  $('.collapse').collapse({toggle: false});
});

$(document).on('click', '#expandAllLessons', function() {
  $('div.accordion-body').collapse('show');
});
$(document).on('click', '#collapseAllLessons', function() {
  $('div.accordion-body.collapse').collapse('hide');
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T04:41:11.657

或多或少，它在做同样的事情。

使用`.on()`with 子选择器，您可以使用事件委托将任何未来事件绑定到与该选择器匹配的任何元素。`document`是 DOM 树的顶端（在脚本执行时可用），因此您的事件委托有效。

`.ready()`等待 DOM 组装完毕，因此您可以更可靠地使用 , 等方法直接绑定`.click()`事件`.hover()`。

因此，您的第一个示例只是等待 DOM 组装，然后委托事件。第二个示例只是在脚本执行后立即委派事件。

[来自 jQuery 关于 .on() 的文档：](http://api.jquery.com/on/)

> 直接和委托事件
> 
> 大多数浏览器事件冒泡或传播，从文档中最深、最里面的元素（事件目标）一直到正文和文档元素。在 Internet Explorer 8 及更低版本中，一些事件（例如更改和提交）本身不会冒泡，但 jQuery 将这些事件修补为冒泡并创建一致的跨浏览器行为。
> 
> 如果选择器被省略或为空，则事件处理程序被称为直接或直接绑定。每次在选定元素上发生事件时都会调用处理程序，无论它是直接发生在元素上还是来自后代（内部）元素的冒泡。
> 
> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最内到最外的元素），并为沿该路径匹配选择器的任何元素运行处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:25:33.087

先看评论。jQuery 1.7 之后`on`也可以委托事件：

> “.on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供附加事件处理程序所需的所有功能。帮助从旧的 jQuery 事件转换方法，请参见 .bind()、.delegate() 和 .live()。”

所以在 jQuery 1.7 之前，这是正确的答案：

首先更好，因为当 HTML 文档完全加载到 DOM 时会触发文档就绪事件。然后你确定你有所有的元素，你可以将事件绑定到它们。

但是如果你在将`'#expandAllLessons'`元素加载到 DOM 之前绑定事件，那么它将根本不起作用，因为 jQuery 选择器将找不到任何元素，并且不会在任何地方绑定此事件。

在 1.7 之后，两者的工作方式几乎相同。几乎，因为在第一种情况下，当您在文档准备好之前触发事件时，它不会被执行。在第二个示例中，它将被执行，因为它是在加载脚本时附加的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:37:28.543

每当你做一个函数，不管它是否 $(document).ready(function(){}); 或其他东西，该函数内的所有内容只能读取其级别或更高级别的内容（除非您使用返回函数）。

最上面的一段意味着你的所有代码在加载之前不会被执行，但这也意味着它是嵌套代码。嵌套代码意味着某些变量和函数将无法从外部读取。例子：

```
function bob(){
  function sandy(){
    function joe(){
      alert("I can access anything written by sandy, bob or ray!");

    }
  }
}

function ray(){
   alert("I can't see anything from anybody but bob!");
} 
```

# c++ - C++ peek() 看不到换行符

> ID：16028775
> 
> 赞同：1
> 
> 时间：2013-04-16T04:23:58.233
> 
> 标签：c++

我在从一个文件中读取我真的不应该在家庭作业中使用的输入时遇到了一些问题。在之前的分配中，我使用了非常相似的代码（唯一改变的是值被推到的地方）。我收到了一个带有以下输入的文本文件：

```
10
3 6 4 9 0 7 8
8 5 3 7 3 4 -2
5 10 2 8 1 4 1
2 6 -3 1 3 7 1
1 10 -1 2 2 4 -2
10 9 -3 1 3 7 2 5 1
7 3 0 10 1 2 1 8 2
9 6 6 3 4 10 7
4 8 5 1 9 5 6
6 2 4 3 0 9 0 
```

第一行是上图中存在的顶点数。在之后的每一行中，第一个数字是它用于哪个顶点，下一个数字是它连接到哪个顶点，后面的一个是该边的权重。该行重复顶点、权重直到行尾（即，第一行用于顶点 3，它的边为 6，权重为 4，边为 9，权重为 0，等等）。我使用一维向量来表示使用行主要符号的矩阵。我遇到的问题是我的行变量似乎根本没有更新。目前，我从 while 循环中的最后一行获得以下输出，该循环实际上将数据插入向量中。

```
3:  6: 4
3:  9: 0
3:  7: 8
3:  8: 5
3:  3: 7
3:  3: 4
3:  -2: 5
3:  10: 2
3:  8: 1
3:  4: 1
3:  2: 6
3:  -3: 1
3:  3: 7
3:  1: 1
3:  10: -1
3:  2: 2
3:  4: -2
3:  10: 9
3:  -3: 1
3:  3: 7
3:  2: 5
3:  1: 7
3:  3: 0
3:  10: 1
3:  2: 1
3:  8: 2
3:  9: 6
3:  6: 3
3:  4: 10
3:  7: 4
3:  8: 5
3:  1: 9
3:  5: 6
3:  6: 2
3:  4: 3
3:  0: 9
3:  0: 9 
```

我的行变量似乎卡在了 3 中，就像 input.peek() 一样，while 循环的条件永远不会看到换行符。真正令人困惑的部分是，在类似的任务中，这段代码可以很好地遍历输入文件并将内容填充到它们应该去的地方。我很困惑，所以如果有人能指出我正确的方向，我会非常感激。如果我过于冗长，我提前道歉。

我的代码如下。

```
if(input.is_open()) // making sure the input is open
{
    input >> nodeCount; //Grabbing the number of nodes from the first value of the file

    for(int i = 1; i < nodeCount*nodeCount; i++)
    {
        edgeList.push_back(graphNode());
        edgeList[i].value = infinity;
        edgeList[i].isInfinity = true;
        edgeList[i].pred = -1;
    }

    //Putting data from the file into the vector array
    while(!input.eof())
    {
        input >> row; //For each cycle through the list, we grab the first number on the line to get which x value (start vertex) we're working with
        while(input.peek() != '\n' && !input.eof())
        {
            input >> col;
            input >> edgeList[((row-1)*nodeCount)+(col-1)].value;
            edgeList[((row-1)*nodeCount)+(col-1)].isInfinity = false;
            edgeList[((row-1)*nodeCount)+(col-1)].pred = row;
            cout << row << ": " << " " << col << ": " << edgeList[((row-1)*nodeCount)+(col-1)].value << endl;
        }

    }
    input.close(); //Closing our input file since we don't need it anymore
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:30:07.327

通过查看您吐出的数字，很明显这种情况在文件结束之前永远不会评估为假：

`input.peek() != '\n' && !input.eof()`

我的问题是 - 你使用的是 windows 风格、unix 风格还是 mac 风格的行尾？是否有更好的方法来确定不依赖于假设它们采用某个 ASCII 值的行结束位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:29:28.517

The best way to read a line is to actually read the line.

```
std::string  line;
std::getline(input, line); 
```

You can then parse the numbers out of the line.

```
std::stringstream linestream(line);
int node;
linestream >> node;

int dst, weight;
while(linestream >> dst >> weight)
{
    // Do Stuff
} 
```

You should be careful:

```
while(!input.eof()) 
```

This is an anti-pattern. You have to be careful as if the stream goes into an error state the test will never become true and thus potentially leaving you in an infinite loop.

So your code should look like this:

```
int linesToRead;
input >> linesToRead;    

std::string  line;
for(;std::getline(input, line) && linesToRead;--linesToRead)
{
    // If there is a chance of an empty line
    // you may want to check here.

    std::stringstream linestream(line);
    int node;
    linestream >> node;

    int dst, weight;
    while(linestream >> dst >> weight)
    {
        // Do Stuff
    }
} 
```

Manually closing the file is not good practice.

```
input.close(); 
```

Potentially the streams can be set to throw on error. What happens if you call close() and it throws? Even if you are in normal mode and it just generates an error on close(). What are you planning on doing? Best to let the destructor close the file and handle the error conditions for you. see [here](https://codereview.stackexchange.com/a/544/507)

# android - 为什么我的碰撞检测无法预测？

> ID：16028776
> 
> 赞同：0
> 
> 时间：2013-04-16T04:24:01.220
> 
> 标签：android, andengine

我目前正在 AndEngine 中构建游戏，但我的碰撞检测似乎有点偏离。它可以工作..大多数时候，但似乎当与一个物体发生碰撞时，它不会做另一个。这很难解释，而且非常难以预测。

```
for (int i = 0; i < rManager.carArray.length; i++)
{
    if (rManager.getInstance().snowArray[0].getSnowSprite().collidesWith(rManager.getInstance().carArray[i].getCarSprite()))
    {
        Log.e("SNOW", "snow 0 collided with " + rManager.getInstance().carArray[i].ToString());
        rManager.getInstance().carArray[i].setCarSpeed(0.1f);
        break;
    }

    if (rManager.getInstance().iceArray[0].getIceSprite().collidesWith(rManager.getInstance().carArray[i].getCarSprite()))
    {
        Log.e("ICE", "ice 0 collided with " + rManager.getInstance().carArray[i].ToString());
        rManager.getInstance().carArray[i].setCarSpeed(1f);
        break;
    }

    else
    {
        rManager.getInstance().carArray[i].setCarSpeed(0.5f);
    }
} 
```

我的代码有什么问题吗？目前，两个敌人数组都只有 1 个元素。这就是为什么我只检查 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:37:52.527

这是因为“break”关键字。当它被称为时，它会“突破”周围的 for 循环。因此，如果第一个 if 语句检测到冲突，它将永远不会调用第二个 if 语句。

# amazon-web-services - 使 Amazon S3 文件仅对登录用户可用

> ID：16028777
> 
> 赞同：4
> 
> 时间：2013-04-16T04:24:01.807
> 
> 标签：amazon-web-services, amazon-s3, amazon

如何使 Amazon S3 中的文件只有登录用户才能访问。我为我的网站使用 PHP。静态文件存储在 Amazon S3 中。只有登录到我的网站的用户才能访问亚马逊云中的文件。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:03:12.097

您可以使用应用程序根据用户登录生成的签名 URL：

[http://docs.aws.amazon.com/AmazonS3/latest/dev/S3_QSAuth.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/S3_QSAuth.html)

# list - 如何在 Spark List 中正确显示动态大小的项目？

> ID：16028780
> 
> 赞同：2
> 
> 时间：2013-04-16T04:24:46.080
> 
> 标签：list, apache-flex, flex-spark

我在 Spark 列表中显示一些动态数据时遇到问题。

我需要在列表中显示来自数据提供者的一些文本。该列表应该显示所有没有任何滚动条的文本，并且文本可以像 HTML 一样格式化。

我无法控制列表本身的大小。

也就是说，我需要根据要显示的数据显示具有动态大小的项目。由于渲染项目的宽度应该是列表本身的宽度，我想要的是不同的项目以动态高度显示。

到目前为止，我尝试使用自定义`ItemRenderer`组件`TextArea`。这是一个总结问题的示例应用程序：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               width="450" minHeight="400">

    <s:List top="20" right="20" bottom="20" left="20" borderVisible="true"
            itemRenderer="CustomItemRenderer" horizontalScrollPolicy="off">
        <s:layout>
            <s:VerticalLayout gap="0" horizontalAlign="justify"/>
        </s:layout>
        <s:dataProvider>
            <s:ArrayCollection>
                <fx:Object time="00:01:23" level="DEBUG" message="This is a short log message"/>
                <fx:Object time="00:02:34" level="DEBUG" message="This is a not so short log message"/>
                <fx:Object time="00:03:45" level="DEBUG" message="This is not a short log message that won't display correctly on one line"/>
                <fx:Object time="00:04:56" level="DEBUG" message="This is a long message that will require two lines to be displayed correctly"/>
                <fx:Object time="00:05:23" level="DEBUG" message="Short again"/>
                <fx:Object time="00:06:34" level="DEBUG" message="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."/>
            </s:ArrayCollection>
        </s:dataProvider>
    </s:List>
</s:Application> 
```

使用我的自定义项目渲染器的代码`CustomItemRenderer.mxml`：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx"
                autoDrawBackground="true"
                dataChange="handleDataChange(event)">

    <s:states>
        <s:State name="normal" />
        <s:State name="hovered" />
        <s:State name="selected" />
    </s:states>

    <fx:Script>
        <![CDATA[
            import flashx.textLayout.elements.ParagraphElement;
            import flashx.textLayout.elements.SpanElement;
            import flashx.textLayout.elements.TextFlow;

            import mx.events.FlexEvent;

            protected function handleDataChange(event:FlexEvent):void
            {
                var flow:TextFlow = new TextFlow();

                var timeSpan:SpanElement = new SpanElement();
                timeSpan.text = "[" + data.time + "] ";
                timeSpan.fontFamily = "_mono";

                var levelSpan:SpanElement = new SpanElement();
                levelSpan.text = data.level + ": ";
                levelSpan.fontWeight = "bold";

                var messageSpan:SpanElement = new SpanElement();
                messageSpan.text = data.message;

                var paragraph:ParagraphElement = new ParagraphElement();
                paragraph.addChild(timeSpan);
                paragraph.addChild(levelSpan);
                paragraph.addChild(messageSpan);

                flow.addChild(paragraph);

                mainText.textFlow = flow;
            }
        ]]>
    </fx:Script>

    <s:BorderContainer id="container" width="100%"
                       borderVisible="false" borderWeight="0"
                       dropShadowVisible="false">
        <s:layout>
            <s:BasicLayout />
        </s:layout>

        <s:TextArea id="mainText" width="100%" heightInLines="{NaN}"
                    borderVisible="false" selectable="true" editable="false">
        </s:TextArea>
    </s:BorderContainer>
</s:ItemRenderer> 
```

我尝试将`heightInLines`我的 TextArea 组件的属性设置为`NaN`如[here](http://blog.flexexamples.com/2010/01/18/creating-a-vertically-auto-resizing-spark-textarea-control-in-flex-4/)所述，以使 textarea 自身自动调整。

我还尝试将容器的高度设置为等于 textArea 的高度，但是在我设置 之后这个高度为 0 `TextFlow`，如果我等待调整大小事件，列表也不会正确显示。

我试图将`horizontalAlign`布局的属性设置为，`justify`而不是`contentJustify`我在[此处](http://blog.flexexamples.com/2009/10/27/setting-word-wrapping-on-a-spark-list-control-in-flex-4/)阅读的内容。

有时，在我单击某个项目之前，列表中不会显示任何内容。这将只显示这个项目，我必须对每个项目做同样的事情。

我真的不明白发生了什么，在尝试了很多不同的事情后开始迷失方向。任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T22:40:50.630

为了正确显示列表，我对代码进行了以下更改：

首先，由于列表项具有动态大小，我们必须告诉编译器不要在列表上使用虚拟布局：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               width="450" minHeight="400">

    <s:List top="20" right="20" bottom="20" left="20" borderVisible="true"
            useVirtualLayout="false"
            itemRenderer="CustomItemRenderer" horizontalScrollPolicy="off">
        ...
    </s:List>
</s:Application> 
```

然后，正如 Nemi 所提到的，我们需要设置我们的项目渲染器的宽度（注意这里不必指定高度）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx"
                autoDrawBackground="true"
                width="100%"
                dataChange="handleDataChange(event)">
    ...
</s:ItemRenderer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T20:56:03.963

尝试设置 ItemRenderer 的宽度和高度。您的代码示例：

```
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx"
        autoDrawBackground="true"
        dataChange="handleDataChange(event)"

        width="100%" height="100%"> 
```

ps 也许为了更好的列表性能，您可以尝试将 TextFlow 创建移出 ItemRenderer。例如，创建 textFlows 并将它们放在列表的 dataprovider 中，然后使用来自 ItemRenderer 的数据值的 textflow：

```
mainText.textFlow = data.flow; 
```

# php - 为什么这个快速排序在浏览器中不显示任何内容？

> ID：16028781
> 
> 赞同：-2
> 
> 时间：2013-04-16T04:24:53.747
> 
> 标签：php, quicksort

```
<?php

error_reporting(E_ALL);

function quicksort($seq) 
{
    if(!count($seq)) {return $seq;}
    $pivot= $seq[0];
    $low = $high = array();
    $length = count($seq);
    for($i=1; $i < $length; $i++) 
    {
        if($seq[$i] <= $pivot) 
        {
            $low []= $seq[$i];
        } else {
            $high []= $seq[$i];
               }
    }
    return array_merge(quicksort($low), array($pivot), quicksort($high));

 $numbers = array(2,5,6,8,3,6,4,45,23,456,23,6,90,5,2,156,2,1,3,12,48,561,1,168);
 $words = array('gr','sdfg','ik','shrt','jy','bcnv',' 0','0','01','_a','ass');

 print_r(quicksort($numbers));
 print_r(quicksort($words));

highlight_file(quicksort.php);

?> 
```

屏幕是空白的。PHP 错误日志显示文件意外结束。我累了，可能会忽略一个分号，但我找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:29:54.053

您在函数定义的末尾缺少一个大括号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:40:37.733

用这个替换你的函数......

```
function quicksort($seq) 
{
    if(!count($seq)) {return $seq;}
    $pivot= $seq[0];
    $low = $high = array();
    $length = count($seq);
    for($i=1; $i < $length; $i++) 
    {
        if($seq[$i] <= $pivot) 
        {
            $low []= $seq[$i];
        } else {
            $high []= $seq[$i];
        }
    }
    return array_merge(quicksort($low), array($pivot), quicksort($high));
} 
```

# powershell - powershell过滤器csv

> ID：16028787
> 
> 赞同：6
> 
> 时间：2013-04-16T04:25:26.690
> 
> 标签：powershell, csv

由于我是 Powershell 新手，因此寻求最佳实践方面的帮助，

我有一个 csv 文件，我想过滤掉 csv 中的每一行，除了包含“未安装”的行

然后，我想根据包含计算机列表的单独 csv 文件过滤这些结果，并排除任何包含匹配项的行。

任何帮助或起点将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T04:46:28.633

对于第一部分，您可以使用`Select-String -Notmatch ...`例如：

```
$file = "data.csv"
$csv = Get-Content $file
$csv | Select-String -Notmatch 'Not Installed' | Out-File $file -Enc ascii 
```

如果您的 CSV 文件恰好是 Unicode，则删除“-Enc ascii”部分，因为 Out-File 的默认值是 Unicode。至于你问题的第二部分，你需要更具体一些。但是，您应该查看有关 Import-Csv 和 Export-Csv 的帮助：

```
man Import-Csv -full
man Export-Csv -full 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T04:44:37.097

`get-help *csv*`

`get-help import-csv -examples`

名为 test.txt 的示例 csv 文件

```
header1,header2,header3
installed,2,3
not installed,2,3 
```

将文件导入到 powershell 变量中并对其进行过滤。

```
$p = Import-CSV .\test.txt
$p | Where { $_.header1 -eq 'installed'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T09:27:27.393

在尝试自己做同样的事情时遇到了这个问题。

我想出的解决方案如下：

```
$Filtered = $Table|Select-String -Pattern $ExcludeStrings -NotMatch -SimpleMatch
$FilteredArray = @()
$Filtered.Line | foreach {$split = $_ -split ';';
                          $tidied = $split -replace '@|{|}|^ ';
                          $obj = New-Object System.Object
                          $tidied|foreach {$obj|Add-Member -MemberType NoteProperty -Name ($_.split('=')[0]) -Value ($_.split('=')[1])
                                            }
                          $FilteredArray += $obj  
                            } 
```

第一行只是显示我过滤我通过的数组`Import-CSV`以获得我想要的结果。

不幸的是，这给我留下了一个 MatchInfo 数组，每个数组都采用以下格式：

```
@{Column1=Value1; Column2=Value2; Column3=Value3;} 
```

这根本不会像原样很好地导出回 CSV。

因此，我选择创建一个新的输出数组 ( `$FilteredArray`)。

`Line`然后，我将 matchinfo 数组的属性从管道传输`Select-String`到 foreach 循环中，对于每一行，我将其拆分为分号，然后删除 @{} 字符和任何前导空格。

然后我创建一个新的`System.Object`，然后将整理后的输出通过管道传输到另一个 foreach 循环中，在 obj 中创建新的 NotePropertys，将它们从整理后的输出中的当前行命名为 = 字符，值是 = 字符之后的剩余文本.

我最终得到的是：

```
PS C:\Users\Graham> $obj

Column1            : Value1
Column2            : Value2
Column3            : Value3 
```

过滤后的数组如下所示：

```
PS C:\Users\Graham> $FilteredArray[0..3]|Format-table

Column1         Column2        Column2                                    
-------         -------        -------
Value1          Value2         Value3 
Value1          Value2         Value3
Value1          Value2         Value3 
```

# r - 如何生成以另一个因素为条件的一个因素的条形图？

> ID：16028792
> 
> 赞同：3
> 
> 时间：2013-04-16T04:25:56.067
> 
> 标签：r, lattice

给定如下数据框，具有 2 个或更多因子：

```
 data <- data.frame(V1=sample(c('A','B','C'), 50, T), V2=sample(c('X','Y'),50,T)) 
```

我可以独立生成一个因子列表的条形图，例如：

```
library(lattice)
with(data, barchart(V1)) 
```

如何根据第二个因素的值生成多面板图？我希望使用的语法是：

```
with(data, barchart(V1 | V2)) 
```

但这会产生以下警告：

```
Warning message:
In Ops.factor(V1, V2) : | not meaningful for factors 
```

并且没有有意义的输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T04:41:45.813

当您调用时，`with(data, barchart(V1))`您正在调用`barchart`类因子的对象并且它正在调用`barchart.default`，它调用等效于`barchart(table(V1))`（并因此调用`barchart.table`）产生您想要的情节。

如果你想同时拥有`V1`并`V2`包括你必须在你的表中使用它们，即。

```
with(data, barchart(table(V1, V2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/xxWCT.png)

然后，您可以使用`groups = TRUE`将最后一个维度设置为分组变量

例如

```
with(data, barchart(table(V1, V2), groups = TRUE)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/x6m52.png)

如果要使用公式方法，则必须事先自己计算值。

例如

```
 library(data.table)
 DT <- data.table(data)

 barchart(V1~N|V2,DT[, .N,by= list(V1,V2)]) 
```

这给出了相同的结果`with(data, barchart(table(V1, V2), groups = TRUE))`

# assembly - 跳转到 x86 汇编语言中的特定行

> ID：16028795
> 
> 赞同：4
> 
> 时间：2013-04-16T04:26:12.813
> 
> 标签：assembly, x86, masm

在 x86 汇编语言中，是否可以指定跳转到特定行号？在这里，我尝试使用第`jmp`3 行的指令。（我还不知道将标签作为参数传递给函数的方法，所以我尝试使用行号而不是在这种情况下标记。）

```
.686p
.model flat,stdcall
.stack 2048
.data

ExitProcess proto, exitcode:dword
.code

start:

jmp 3; this produces the error shown below

mov ax, 0
mov bx, 0
mov ah, 1

invoke  ExitProcess, 0
end start 
```

上面的代码会产生错误`1>p4.asm(11): error A2076: jump destination must specify a label`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T04:27:11.170

您可以在该行放置一个标签。根据您的汇编语言方言，您可能能够使用数字本地标签，或者您可能需要使用符号标签。下面是一个可能的例子。我这里只有 NASM 可以测试，所以我不确定这个例子是否能很好地映射到 MASM，但你应该明白：

```
start:
    jmp .line3
    mov ax, 0
.line3:
    mov bx, 0
    mov ah, 1 
```

NASM 使用前导`.`来识别本地标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:05:45.533

尝试这个：

```
s1:   add ax,1
      jmp $-3 
```

这可以让你的程序跳转到 s1。注意，数字是代码的偏移量，而不是行数。（指令'add ax,1'是3个字节）如果你想进行间接跳转，试试这个：

```
jmp far [address]
address dw 0123h ;the ip
        dw 5678h ;the cs 
```

更多信息，google间接跳转。

# google-api - 是否可以在没有设备的情况下使用 Google Mirror API？

> ID：16028805
> 
> 赞同：19
> 
> 时间：2013-04-16T04:27:35.240
> 
> 标签：google-api, google-glass, google-mirror-api

我一直在阅读文档并在[https://glass-java-starter-demo.appspot.com/](https://glass-java-starter-demo.appspot.com/)上玩，但似乎没有办法进一步调查，因为按照[https://developers.google 的说明进行操作。](https://developers.google.com/glass/playground)在我的[https://code.google.com/apis/console/的](https://code.google.com/apis/console/)[com/glass/playground](https://developers.google.com/glass/playground)上，Google Mirror 开关没有出现。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T08:26:50.757

根据跟踪器上的问题 #2 ( [https://code.google.com/p/google-glass-api/issues/detail?id=2](https://code.google.com/p/google-glass-api/issues/detail?id=2) ) 访问目前仅限于使用 Glass 的 Explorer 程序的成员。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T00:25:21.480

随着 XE12 的发布，Mirror API 对所有开发者开放。但是，在分发之前在 Glass 上测试您的 Glassware 仍然非常重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-31T12:10:35.300

是的，您可以将 Android 手机用作 Google Glass。查看本指南[Google Glass XE7 APKs](https://github.com/zhuowei/Xenologer)

在手机中安装这些 apk 后。Lounch Glass Home 应用程序。然后转到[MyGlass](https://glass.google.com/myglass)应用程序并配置您的 Glass。

然后注册 Google Mirror API 并按照此快速入门指南 [快速入门](https://developers.google.com/glass/quickstart/index)

希望这会帮助你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-07T13:29:29.827

你可以用这个。
看看 [https://github.com/scarygami/mirror-api](https://github.com/scarygami/mirror-api)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T22:00:43.100

现在似乎有可能：[https](https://developers.google.com/glass/devprev) ://developers.google.com/glass/devprev 。与珍妮类似的答案，但已更新。

# android - 用于 Android 的 HtmlSpanner (NightWhistler)

> ID：16028807
> 
> 赞同：0
> 
> 时间：2013-04-16T04:27:41.640
> 
> 标签：android, html, textview

我正在使用 NightWhistler 的 HtmlSpanner 在 TextView 中呈现我的 html 内容。我打了电话：

```
HtmlSpanner htmlspanner = new HtmlSpanner();
Spannable text = htmlspanner.fromHtml(content);      
mContentTx.setText(text); 
```

我得到的输出只是图像，没有文字。当我打印出“文本”时，它显示空字符串。

有人可以请教！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T20:16:11.683

有这个问题导致 HtmlSpanner 在使用 HtmlCleaner 2.4 时产生空白输出

[不适用于 HtmlCleaner 2.4](https://github.com/NightWhistler/HtmlSpanner/issues/8)

尝试使用 HtmlCleaner 2.2

# javascript - 当鼠标指针超出浏览器视口时捕获事件

> ID：16028812
> 
> 赞同：1
> 
> 时间：2013-04-16T04:28:32.733
> 
> 标签：javascript, jquery, javascript-events

当页面加载它开始计数时，我正在用 javascript 编写一个简单的无限计数器

当鼠标指针位于视口之外时，我想停止计数器

请帮忙？

```
 var i=0;

            setInterval(function (){
               i++;

               document.getElementById("counterLoop").innerHTML=i;

            },1000);

    var viewportWidth  = document.documentElement.clientWidth;
     var viewportHeight = document.documentElement.clientHeight;

     function getCursorXY(e) {   
CurX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
CurY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);

} 
```

我如何在视口宽度和高度之外捕获鼠标移动事件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:12:34.183

```
jQuery(document).mouseleave(function(){console.log('out')}) 
```

当鼠标不在您的页面中时，这将触发。只需更改功能以执行您想要的所有操作。

你也可以使用：

```
jQuery(document).mouseenter(function(){console.log('in')}); 
```

当鼠标进入页面时触发以再次启动您的计数器。

# sql - select语句上的sql变量

> ID：16028813
> 
> 赞同：0
> 
> 时间：2013-04-16T04:28:49.113
> 
> 标签：sql, variables

尝试创建一个包含到期余额、利息费用、到期总额和付款计划的结果集。他们的方式我正在编码它似乎工作，但它似乎很不雅。有没有办法利用变量使代码更清晰？

```
SELECT 
    CustFName, CustLName, CustPhone, 
    SUM(InvoiceAmount - PaymentAmount) AS BalanceDue,
    SUM(InvoiceAmount - PaymentAmount)*.195 AS InterestCharge,
    SUM(InvoiceAmount - PaymentAmount) + SUM(InvoiceAmount - PaymentAmount) *.195 AS TotalDue,
    (SUM(InvoiceAmount - PaymentAmount) + SUM(InvoiceAmount - PaymentAmount) *.195)/4 AS PaymentPlan
FROM 
    Customer 
JOIN 
    Vehicle ON Customer.CustomerID = Vehicle.CustomerID
JOIN 
    Invoice ON Vehicle.VehicleID = Invoice.VehicleID
WHERE 
    InvoiceAmount - PaymentAmount > 400
GROUP BY 
    CustFName, CustLName, CustPhone 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:35:37.723

```
DECLARE @p FLOAT
SET @p = 0.195
SELECT CustFName, CustLName, CustPhone, SUM(InvoiceAmount - PaymentAmount) AS BalanceDue,
    SUM(InvoiceAmount - PaymentAmount)*@p AS InterestCharge,
    SUM(InvoiceAmount - PaymentAmount) + SUM(InvoiceAmount - PaymentAmount) *@p AS TotalDue,
    (SUM(InvoiceAmount - PaymentAmount) + SUM(InvoiceAmount - PaymentAmount) *@p)/4 AS PaymentPlan

FROM Customer JOIN Vehicle
    ON Customer.CustomerID = Vehicle.CustomerID
    JOIN Invoice
    ON Vehicle.VehicleID = Invoice.VehicleID

WHERE InvoiceAmount - PaymentAmount > 400

GROUP BY CustFName, CustLName, CustPhone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:27:35.690

使用虚拟表。除此之外，做得很好。:-)

```
SELECT 
    CustFName, CustLName, CustPhone, 
    BalanceDue,
    BalanceDue * Factor AS InterestCharge,
    BalanceDue + BalanceDue * Factor AS TotalDue,
    (BalanceDue + BalanceDue * Factor)/4 AS PaymentPlan
from (
        SELECT 
            CustFName, CustLName, CustPhone, 0.195 as Factor
            SUM(InvoiceAmount - PaymentAmount) AS BalanceDue
        FROM 
            Customer 
        JOIN 
            Vehicle ON Customer.CustomerID = Vehicle.CustomerID
        JOIN 
            Invoice ON Vehicle.VehicleID = Invoice.VehicleID
        WHERE 
            InvoiceAmount - PaymentAmount > 400
        GROUP BY 
            CustFName, CustLName, CustPhone
) as A; 
```

# java - mongodb - 如何使用 mongodb java 客户端锁定集合

> ID：16028824
> 
> 赞同：1
> 
> 时间：2013-04-16T04:30:08.447
> 
> 标签：java, mongodb, mongodb-java

我需要在后台线程中同时更新整个集合，但读取操作可能同时发生。当我对它进行基准测试时，更新集合大约需要 3 秒。有没有办法在更新集合时锁定集合？我尝试创建一个新集合并将所有文档插入其中并使用“dropToTarget=true”将其重命名为原始集合，但我不确定它在分片方面的安全性和稳定性。我读到 renameCollection 与分片不兼容。

如果有人可以建议是否有一个好主意，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:00:59.710

您是否提出了两种可能的策略来更新您的集合，一种是内联锁定，另一种是临时集合？

正如 mongodb 文档明确指出的那样，它不适用于分片集合（[http://docs.mongodb.org/manual/reference/command/renameCollection/](http://docs.mongodb.org/manual/reference/command/renameCollection/)）。据我了解，这意味着您要重命名的集合没有被分片，因为您需要在进行实际重命名之前删除其他集合，您很可能会丢失任何以前保留的分片（-信息）。所以你需要重新激活分片。我强烈建议不要使用这两种收集方法，尤其是在您对数据进行分片时。
您需要从分片集合中获取所有数据并将其集中存储，一旦完成更新，您需要重命名集合并再次对其进行分片。这将为您的整个系统带来大量 I/O，尤其是对于进行更新的客户端。

取决于您的系统架构（具有单入口点）。您可以轻松地持有一些全局标志，告诉您当前是否正在运行集合更新。禁止其他写操作。
对于 MongoDB 的多入口点，您可以尝试 $isolated，但这不适用于分片集合。而且我不确定它是否允许读取操作，文档不是很清楚。

是否严格禁止在更新过程中写入任何数据？您执行什么类型的更新。他们能互相影响吗？或者是否有可能进行并发写入？

# c++ - 查找可以从 0-8 c++ 范围内的数字形成的所有可能数字

> ID：16028826
> 
> 赞同：1
> 
> 时间：2013-04-16T04:30:10.773
> 
> 标签：c++, arrays, loops

实际上，我对此感到很困惑。我也只允许使用循环和控制结构以及数组。我真的不知道该怎么做。

给定 0 到 8 范围内的三个不同十进制数字的集合，并找到可以由三位数字组成的所有唯一十进制数字，六位也可以反转为九，反之亦然。

例如，可以从数字 0 3 6 创建以下数字：

0、3、6、9、30、36、39、60、63、90、93、306、309、360、390、603、630、903、930。

关于我应该如何处理这个问题的任何想法？任何帮助将不胜感激，因为我仍在学习编程。

# asp.net - .NET SOAP Web 服务返回 JSON

> ID：16028828
> 
> 赞同：7
> 
> 时间：2013-04-16T04:30:43.763
> 
> 标签：asp.net, wcf, web-services, mobile, asmx

我需要准备一个**返回 JSON 格式的 .Net SOAP Web 服务**，我们必须在 iPad 和 Android 中使用这些服务。

我进行了很多搜索，但只找到了返回 JSON 的 WCF Restful 服务和返回 XML 的 ASMX SOAP 服务。

请帮助我准备一个 .Net SOAP Web 服务，它返回 WCF 或 ASMX 的 JSON 数据（推荐使用 WCF）。

如果可能的话，还请告诉我什么是标准格式（WCF REST 返回 JSON、WCF SOAP 返回 JSON、ASMX SOAP 返回 XML 等）以在 iPad/iPhone 和 Android 上使用 .NET Web 服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:23:16.060

使用 WCF 返回 JSON 很简单，如果您避免使用 SOAP，IOS 开发人员会喜欢您的。由于您没有指定所需的 .NET 版本，我将向您指出最新和最强大的功能，称为 Web API。请参阅此处的教程 [http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:01:06.077

想想服务堆栈库。您可以与 asp.net Web 表单应用程序或 mvc 应用程序一起使用。

[http://www.servicestack.net/](http://www.servicestack.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:36:22.000

您也可以将 WebAPI 与 Web 表单一起使用[http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-aspnet-web-forms](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-aspnet-web-forms)

# matlab - Matlab微分

> ID：16028832
> 
> 赞同：0
> 
> 时间：2013-04-16T04:31:18.763
> 
> 标签：matlab

我需要在matlab中编写一个for循环来使用前向差分法求解导数。导出的函数是从 0 到 10 的 10+15x+20x^2，步长为 0.25。我试过使用

```
h=.25; 
x=[0:h:10]; 
y = 10+15*x+20*x.^2; 
y(1) = 45; size(x)  
for i=2:47,     
       y(i) = y(i-1) + h*(15+40*x); 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:53:03.630

我会这样做，作为开始，

```
h=.25; 
x=[0:h:10]; 
y = 10+15*x+20*x.^2; 
diff(y)./diff(x) 
```

或者，作为替代方案，

```
syms x;
y = 20.*x.^2 + 15.*x + 10;
dy = diff(y,1);
h=.25; 
xx=[0:h:10];
res = subs(dy,xx); 
```

# php - 多个 preg_match 以检查多行中的结果

> ID：16028837
> 
> 赞同：1
> 
> 时间：2013-04-16T04:32:30.817
> 
> 标签：php, preg-match

我想用多个 $line 检查 preg_match ...这是我的代码

```
$line = "Hollywood Sex Fantasy , Porn";
if (preg_match("/(Sex|Fantasy|Porn)/i", $line)){
echo 1;}else {echo 2;} 
```

现在我想签入很多喜欢的东西，比如

```
$line = "Hollywood Sex Fantasy , Porn";
if (preg_match("/(Sex|Fantasy|Porn)/i", $line, $line1, $line2)){
echo 1;}else {echo 2;} 
```

类似于上面的代码 `$line1 $line2 $line3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:46:21.853

如果只有一行必须匹配，您可以简单地将这些行连接成一个字符串：

```
if (preg_match("/(Sex|Fantasy|Porn)/i", "$line $line1 $line2")) {
    echo 1;
} else {
    echo 2;
} 
```

这就像 OR 条件一样工作；匹配 line1 或 line2 或 line3 => 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:37:05.973

```
$lines = array($line1, $line2, $line3);
$flag  = false;

foreach($lines as $line){
   if (preg_match("/(Sex|Fantasy|Porn)/i", $line)){
      $flag = true;
      break;
   }
}

unset($lines);

if($flag){
   echo 1;
} else {
   echo 2;
}
?> 
```

您可以将其转换为函数：

```
function x(){
    $args  = func_get_args();

    if(count($args) < 2)return false;

    $regex = array_shift($args);

    foreach($args as $line){
       if(preg_match($regex, $line)){
          return true;
       }
    }

    return false;
} 
```

用法：

```
x("/(Sex|Fantasy|Porn)/i", $line1, $line2, $line3 /* , ... */); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:45:29.063

```
<?php
    //assuming the array keys represent line numbers
    $my_array = array('1'=>$line1,'2'=>$line2,'3'=>$line3);
    $pattern = '!(Sex|Fantasy|Porn)!i';

    $matches = array();
    foreach ($my_array as $key=>$value){
      if(preg_match($pattern,$value)){
            $matches[]=$key;  
      }
    }

    print_r($matches);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T04:51:31.197

疯狂的例子。使用 preg_replace 而不是 preg_match :^ )

```
$lines = array($line1, $line2, $line3);
preg_replace('/(Sex|Fantasy|Porn)/i', 'nevermind', $lines, -1, $count);
echo $count ? 1 : 2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T04:37:24.563

```
$line = "Hollywood Sex Fantasy , Porn";

if ((preg_match("/(Sex|Fantasy|Porn)/i", $line) && (preg_match("/(Sex|Fantasy|Porn)/i", $line1) &&  (preg_match("/(Sex|Fantasy|Porn)/i", $line2))
{
    echo 1;
}
else
{
    echo 2;
} 
```

# c++ - “*&”是什么意思？

> ID：16028838
> 
> 赞同：3
> 
> 时间：2013-04-16T04:32:32.947
> 
> 标签：c++, pointers

例如：

```
private:
    Node* curr;
public:
    Node*& Iterator::getCurr() {
        return curr;
    }

    bool Iterator::operator==(const Iterator& other) {
        return curr == other.getCurr();
    } 
```

我在这段代码中收到错误：

> 将 'const Iterator' 作为 'Node*& Iterator::getCurr()' 的 'this' 参数传递会丢弃限定符 [-fpermissive]

我应该如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:35:25.787

不要一起读

如果你看到这样的东西：

```
Foo& foo(); 
```

你知道是什么`&`意思吗？

这是对 Foo 的引用

然后

```
Foo* foo(); 
```

那这个呢？这是指向 Foo 的指针

然后

```
Foo*& foo(); 
```

是对“指向 Foo 的指针”的引用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T04:36:06.693

`Node*&`意思是“对指针的引用`Node`”。您可以正常退货。然而，可以通过两种方式访问​​它：“正常”方式，其中“引用”部分将被删除，以及保留引用的方式。后一种方式的优点是您可以更改基础`curr`值：

```
Node *&curr = iterator.getCurr();
curr = new Node();  // or something like that
// iterator.curr has been changed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:34:46.353

它是对指向的指针的引用`Node`。

# ios - UIPageViewController 旋转怪异

> ID：16028841
> 
> 赞同：0
> 
> 时间：2013-04-16T04:32:55.900
> 
> 标签：ios, uipageviewcontroller

我在我的应用程序中添加了一个 UIPageViewController 作为应用程序的手册。当用户弹出它时，它会显示一页纵向和两页横向，书脊在中间。由于我有大约 100 个页面，因此在其上方有一个兄弟视图 UICollectionView 页面选择器视图，以允许快速跳转到页面。UIPageViewController 和 UICollectionView 都位于包含它们的后备视图上。

UIPageViewController 遇到的问题是，当视图第一次旋转时，它们似乎将自己限制在原始布局的短尺寸上。因此，如果它首先以纵向出现，那么当旋转到横向时，两个页面的宽度与旧的纵向宽度相同。同样，如果它首先出现两页横向，旋转到纵向具有正确的宽度，但高度是初始横向高度的高度。这在任何设备上都是一致的。

当我创建我的内容视图时，它们都是我想要的大小，但由于某种原因，它们似乎被 UIPageViewController 的某些组件转换了，我不明白为什么它只做两个维度之一，为什么它总是“短边”就是问题所在。

这是让我感觉有点疯狂的问题之一，如果不是一些琐碎的错误配置，我有什么想法可以调试它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T04:17:07.920

经过长时间的调试，终于找到了。关键提示是在从纵向到横向旋转之前，将脊椎设置为视图宽度的正确中间值。解决方案是将视图的框架重置为在 willAnimateRotationToInterfaceOrientation 中给定方向的新大小。

我在调用使用传递给方法的持续时间的动画块之前计算新大小，然后在我拥有的块内：

```
 pageViewController.view.frame = newFrame; 
```

当页面旋转时，包含内容页面的视图将移动到正确的大小，并且脊椎正确放置并且内容填充给定区域。我想我遇到了这个问题，因为视图的复杂性要求我接管这么多默认值，但是这个被搁置了。

# iphone - 尝试将编辑按钮添加到导航栏

> ID：16028842
> 
> 赞同：1
> 
> 时间：2013-04-16T04:33:10.560
> 
> 标签：iphone, ios, cocoa-touch, uikit, uinavigationbar

我创建了一个单视图应用程序的 xcode 项目。我在故事板屏幕上放置了一个表格视图和导航项。现在，我将数组数据源绑定到 tableview 并设置如下代码以在导航按钮上显示编辑按钮。

```
self.navigationItem.leftBarButtonItem = self.editButtonItem; 
```

但是，它似乎无法正常工作。我在导航栏上找不到任何按钮。

有人可以告诉我如何使编辑按钮显示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:40:54.593

> 我在故事板屏幕上放置了一个表格视图和导航项。

听起来也许这就是问题所在。设置它的方法是从 UINavigationController 作为故事板的初始控制器开始，并将 UITableViewController 置于与其相关的关系中（作为导航控制器的根视图控制器）。*现在*如果表视图控制器说

```
 self.navigationItem.leftBarButtonItem = self.editButtonItem; 
```

编辑按钮将出现在导航栏中。

要查看示例，请从 Master-Detail 模板（适用于 iPhone）开始。主视图控制器的结构与我描述的方式相同。

# asp.net-mvc - Durandal+Knockout 开发单页应用程序：根据授权有选择地显示部分页面

> ID：16028845
> 
> 赞同：2
> 
> 时间：2013-04-16T04:33:30.747
> 
> 标签：asp.net-mvc, durandal

我正在使用 Durandal，淘汰赛来创建单页应用程序。我需要做以下事情（两件非常简单的事情）：

1.  根据用户的授权显示/隐藏仅供管理员使用的小部件，
2.  根据用户是否经过身份验证更改菜单选项（对于匿名显示 - 登录/注册以及经过身份验证时显示 "Welcome .." 。

如果这是一个常规的 MVC4 应用程序，我会使用 @if (User.Identity.IsAuthenticated) { ... } 签入剃刀视图，但在 durandal 视图中，这被排除在外。

我想避免将敏感的业务逻辑放入 javascript - 如果他是管理员，用户不需要知道他可以使用什么样的选项。

在 Durandal & Knockout 中实现这一目标的最佳方法是什么？到目前为止，我一直在使用经典的 ASP.NET 进行编码，最近使用了 ASP.NET MVC。使用 Durandal 开发 SPA 对我来说是一个新游戏......如果有人可以只给我步骤/指针来做到这一点，那也会有很大帮助......提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:32:57.980

我这样做的方式。

1.  我的菜单是在 menubar.js 文件中构建的。menuItems 最初是 observableArrays([]) 并且我订阅了一个主题“用户登录”。
2.  当用户登录时，我获取用户的权限/角色并将它们存储在本地存储中。然后发送带有用户数据的通知“用户登录”。
3.  我的菜单栏收到通知，检查权限/角色并适当地添加各种菜单项。
4.  shell.html 具有 menubar.js 的视图组合。因此，如果有菜单项，它就会显示出来，否则就不会。因此，当用户登录时，会填充 menuItems，此时会显示菜单项。
5.  当用户注销时，我清除本地存储缓存并发送一条消息“用户注销”。
6.  menubar.js 收到此消息并清除它的菜单项，实质上是清除 menubar.htm 上的菜单

您基本上可以对小部件执行相同的操作，并使用可见绑定到隐藏或显示特定权限/角色的属性。

同样重要的是 router.guardRoute。阅读此内容，以便人们在不登录的情况下无法直接前往路线。

希望有帮助

# c# - 可以在 SQL Server 中使用联接操作更新两个表吗？

> ID：16028846
> 
> 赞同：1
> 
> 时间：2013-04-16T04:33:32.117
> 
> 标签：c#, asp.net, sql-server

在我使用 asp.net 的 Web 应用程序中，我有一个带有编辑按钮的 gridview。此网格视图是通过连接两个表创建的。当我单击那些编辑按钮时，我需要更新这两个表。我的网格视图包含 3 个字段 - 名称、nric 和状态。其中表 1 中的名称和 nric 以及表 2 中的状态。更新两个表的查询将如何？请帮忙

```
 protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
    GridView1.EditIndex = -1;
}
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
   GridView1.EditIndex = e.NewEditIndex;
}
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];

    TextBox id = (TextBox)row.FindControl("s_id");
    TextBox name = (TextBox)row.FindControl("s_name");
    TextBox nric = (TextBox)row.FindControl("s_nric");
    TextBox status = (TextBox)row.FindControl("s_status");
    SqlConnection con = obj.getcon(); 
    con.Open();
    SqlCommand cmd = new SqlCommand("update e.student_details ,f.student_vs_testsession_details  set e.student_id='" + id.Text+ "',e.student_name='" + name.Text + "',e.student_nric='" + nric.Text + "',f.testsession_status='" + status.Text + "' where e.student_id=f.student_id", con);
    cmd.ExecuteNonQuery();
    con.Close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:31:07.447

@Divya Hari：您可以通过存储过程来完成此任务。

```
 protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
 {
    GridViewRow row = GridView1.Rows[e.RowIndex];

    TextBox txtName = (TextBox)row.FindControl("txtName");
    TextBox txtstatus = (TextBox)row.FindControl("txtstatus");

    //     From here you can fire Update query on database.
    // Here you write code for store procedure.

 } 
```

存储过程。

```
 in SP you need to write update query for both table. Something like this.

 SET ANSI_NULLS ON
 GO
 SET QUOTED_IDENTIFIER ON
 GO
 CREATE PROCEDURE UpdateBothTable 
    @ID int,
    @Name varchar(50),
    @Status varchar(10)
 AS
 BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

     -- Insert statements for procedure here
    Update table1 set Name=@Name where ID=@ID

    Update Table2 set Status=@Status where ID=@ID

 END
 GO 
```

希望对你有帮助....：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:37:51.640

您的联接查询将与原来相同。[根据您未指定的数据库表结构。] 对于 GridView 中的编辑操作有以下内容：

**您必须处理 3 个事件：**

`RowEditing`, `RowCancelingEdit`,`RowUpdating`

**以下是代码：**

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
   GridView1.EditIndex = e.NewEditIndex;

}

protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
   e.Cancel = true;
   GridView1.EditIndex = -1;

}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
   GridViewRow row = GridView1.Rows[e.RowIndex];

   TextBox txtProductName = (TextBox)row.FindControl("txtProductName");
   TextBox txtUnitPrice = (TextBox)row.FindControl("txtUnitPrice");

   //From here you can fire Update query on database.

} 
```

**参考链接：**

[http://www.ezzylearning.com/tutorial.aspx?tid=1993146](http://www.ezzylearning.com/tutorial.aspx?tid=1993146)

希望它有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:49:03.803

Divya，这是可能的。当您单击更新按钮时，您的网格变量将更新的数据传递到数据库，但在这里您需要触发不同的更新语句。如果您有进一步的疑问，请告诉我......试试这个......！

# python - OpenERP 7 登录流程

> ID：16028848
> 
> 赞同：2
> 
> 时间：2013-04-16T04:33:47.103
> 
> 标签：python, xml, openerp

我需要知道 OpenERP 中登录过程的流程是怎样的。开始时调用哪个函数。？我使用 Eclipse 进行调试，似乎从**main.py** ( `def login_and_redirect`) 开始，然后转到**res_users.py** ( `def login`, `def authenticate`)

这是正确的吗？这是调用登录功能的触发点。我也签入了**base.xml**。但找不到调用函数的地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T11:54:38.523

openerp 中的标准身份验证（不使用 auth_x 模块）遵循一个复杂的过程。

登录表单在 openerp/addons/web/static/src/xml/base.xml 中定义。

单击登录按钮时，将按此顺序调用以下函数：

```
on_submit() then do_login() then session_authenticate() in openerp/addons/web/static/src/js/chrome.js

session_authenticate() in openerp/addons/web/static/src/js/coresetup.js

authenticate() in openerp/addons/web/controllers/main.py

authenticate() in openerp/addons/web/session.py

exp_authenticate() in openerp/service/web_services.py

authenticate in openerp/addons/base/res/res_users.py 
```

# sql - SQL 错误：ORA-00907：缺少右括号？

> ID：16028849
> 
> 赞同：0
> 
> 时间：2013-04-16T04:33:49.920
> 
> 标签：sql, oracle

```
CREATE TABLE P_OWNER(
     OWNERID               CHAR(5) NOT NULL,
     LNAME                 VARCHAR2(50) NOT NULL, 
     FNAME                 VARCHAR2(30) NULL, 
     SSN                   CHAR(9) NULL, 
     EMAIL                 VARCHAR2(50) NULL,
     CONSTRAINT            P_OWNER_PK      PRIMARY KEY(OWNERID),
     CONSTRAINT            P_OWNER_AK1     ALTERNATE KEY(SSN),
     CONSTRAINT            P_OWNER_AK2     ALTERNATE KEY(EMAIL)
     );

CREATE TABLE P_PROPERTY(
     PROPERTYID            CHAR(5) NOT NULL, 
     STREET1               VARCHAR2(50) NOT NULL, 
     STREET2               VARCHAR2(50) NULL, 
     CITY                  VARCHAR2(50) DEFAULT 'FITCHBURG',
     STATE                 CHAR(2) DEFAULT 'MA',
     ZIP                   CHAR(10) NULL,
     SQFOOTAGE             NUMBER(5,0) NULL, 
     HAS_AC                CHAR(1) NULL,
     ISHOUSE               CHAR(1) NOT NULL,
     CONSTRAINT            P_PROPERTY_PK              PRIMARY KEY(PROPERTYID),
     CONSTRAINT            P_PROPERTY_ADDRESS_AK1     ALTERNATE KEY(CITY, STATE, STREET1, STREET2, ZIP)
     );

Error at Command Line:8 Column:57
Error report:
SQL Error: ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:48:25.453

你想要一个唯一键而不是备用键

```
 CREATE TABLE P_OWNER(
 OWNERID               CHAR(5) NOT NULL,
 LNAME                 VARCHAR2(50) NOT NULL, 
 FNAME                 VARCHAR2(30) NULL, 
 SSN                   CHAR(9) NULL, 
 EMAIL                 VARCHAR2(50) NULL,
 CONSTRAINT            P_OWNER_PK      PRIMARY KEY(OWNERID),
 CONSTRAINT            P_OWNER_AK1     UNIQUE(SSN),
 CONSTRAINT            P_OWNER_AK2     UNIQUE(EMAIL)
 );

 CREATE TABLE P_PROPERTY(
 PROPERTYID            CHAR(5) NOT NULL, 
 STREET1               VARCHAR2(50) NOT NULL, 
 STREET2               VARCHAR2(50) NULL, 
 CITY                  VARCHAR2(50) DEFAULT 'FITCHBURG',
 STATE                 CHAR(2) DEFAULT 'MA',
 ZIP                   CHAR(10) NULL,
 SQFOOTAGE             NUMBER(5,0) NULL, 
 HAS_AC                CHAR(1) NULL,
 ISHOUSE               CHAR(1) NOT NULL,
 CONSTRAINT            P_PROPERTY_PK              PRIMARY KEY(PROPERTYID),
 CONSTRAINT            P_PROPERTY_ADDRESS_AK1     UNIQUE(CITY, STATE, STREET1, STREET2, ZIP)
 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T04:48:44.740

问题在于`ALTERNATE KEY`尝试 `UNIQUE`

```
CREATE TABLE P_OWNER(
     OWNERID               CHAR(5) NOT NULL,
     LNAME                 VARCHAR2(50) NOT NULL, 
     FNAME                 VARCHAR2(30) NULL, 
     SSN                   CHAR(9) NULL, 
     EMAIL                 VARCHAR2(50) NULL,
     CONSTRAINT            P_OWNER_PK      PRIMARY KEY(OWNERID),
     CONSTRAINT            P_OWNER_AK1     UNIQUE (SSN),
     CONSTRAINT            P_OWNER_AK2     UNIQUE (EMAIL)
     );

CREATE TABLE P_PROPERTY(
     PROPERTYID            CHAR(5) NOT NULL, 
     STREET1               VARCHAR2(50) NOT NULL, 
     STREET2               VARCHAR2(50) NULL, 
     CITY                  VARCHAR2(50) DEFAULT 'FITCHBURG',
     STATE                 CHAR(2) DEFAULT 'MA',
     ZIP                   CHAR(10) NULL,
     SQFOOTAGE             NUMBER(5,0) NULL, 
     HAS_AC                CHAR(1) NULL,
     ISHOUSE               CHAR(1) NOT NULL,
     CONSTRAINT            P_PROPERTY_PK              PRIMARY KEY(PROPERTYID),
     CONSTRAINT            P_PROPERTY_ADDRESS_AK1     UNIQUE(CITY, STATE, STREET1, STREET2, ZIP)
     ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:49:54.250

An`alternate key (or secondary key)`是未选择为主键 (PK) 的任何候选键。您不能在 Oracle 中创建备用键，它只是概念性的。

# algorithm - 唯一 ID 的自定义哈希

> ID：16028850
> 
> 赞同：0
> 
> 时间：2013-04-16T04:33:52.017
> 
> 标签：algorithm, hash, uniqueidentifier, unique-id

我想做一些类似于 YouTube 所做的事情。例如，这是一个有效的 YouTube 视频 ID `didzxUkrtS0`

现在我用整数存储用户的 ID，我想将这些数字转换为 8 个字符的字母数字标识。例如：（`FZ3EY1IC`不是十六进制）

我已经知道我可以用 MD5 实现它，然后取前 8 个十六进制数字，但它并没有涵盖整个字母表。

我应该怎么做才能使用整数创建一个独特的模式，永远不要重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:52:56.903

使您的整数 5 个 8 位字节长（如果您的整数是 32 位，则添加一个带有随机值的字节），即 40 位数据。

使用您可能希望保密的某个密钥对整数的 5 个字节进行加密。

将 40 个加密位切成 8 个 5 位部分。使用 32 个字母数字字符对每个部分进行编码。您可以选择为每个部分使用不同的 32 个（总共 36 个）字符。

反向操作是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:41:54.270

我很确定 youtube 和 bitly 之类的网站会在数据库中存储一个大表，该表将每个链接的字母数字标识符转换为它们所针对的内部 ID（或者存储在行中）。当它需要一个新的标识符时，计算一个随机的并存储它。您需要这样做的原因是，攻击者无法预测下一条要添加的内容的 ID。

# css - 选定文本的设置

> ID：16028852
> 
> 赞同：0
> 
> 时间：2013-04-16T04:34:07.717
> 
> 标签：css, focus

我正在尝试覆盖选择的默认设置。我做了

```
::selection{
  background: grey;
} 
```

~~并且看起来在窗口没有聚焦时生效，但是当它聚焦时，它没有效果并且出现默认颜色。~~它不工作。这样做的正确方法是什么，这样无论焦点如何都能产生效果？

**编辑**我认为我错了。我想更改`<input>`标签中所选文本的颜色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:37:17.483

这是您无法更改的默认浏览器行为，当窗口未聚焦时，所选颜色变为灰色，可能表示*无法复制文本*（有点禁用选择），因此我们无法控制该颜色

![在此处输入图像描述](https://i.stack.imgur.com/vltW4.jpg)

* * *

示例 2

![在此处输入图像描述](https://i.stack.imgur.com/rH2xr.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:39:25.057

您可能正在使用 Firefox，它需要`-moz`前缀：

```
::selection {
    color: fireBrick;
}

::-moz-selection {
    color: fireBrick;
} 
```

**演示：http: [//jsfiddle.net/N4AUY/](http://jsfiddle.net/N4AUY/)**

请注意，您不能将它们组合在一起。其中一个不起作用，因此整个规则块都中断了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:41:41.140

应该可以正常工作，[请参阅此演示](http://jsfiddle.net/j23J8/)。问题似乎是由于其他原因

```
::selection
{
background: grey;
}
::-moz-selection
{
background: grey;
} 
```

# javascript - 如何在 keyCode 为只读的浏览器中聚焦下一个可聚焦字段？

> ID：16028857
> 
> 赞同：0
> 
> 时间：2013-04-16T04:35:09.503
> 
> 标签：javascript, firefox, javascript-events, event-handling

当用户按下 Enter 按钮时，焦点将移至下一个文本框。这是在 IE 中实现的。但我计划支持多个浏览器。我已经更改了大多数地方，并且似乎工作正常，除了一个地方，我将标签值分配给`window.event.keyCode.`

我正在`window.event.keyCode = 9`为 IE 做准备。

为了支持多个浏览器，我将其更改为`event.which = 9`并尝试使用`event.which.keyCode = 9`，这根本不起作用。当我按下回车键时，请帮我找到一种方法来聚焦下一个 ID 未知的文本框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:46:15.957

这是获取keyCode的跨浏览器方法

```
function (e) { var kc = e?e.which:event.keyCode; } 
```

您不能强制使用选项卡，因为 keyCode 在大多数浏览器中是只读的。如果要制表符，请在下一个字段上使用 .focus()

要查找下一个字段，您需要迭代表单中的字段。

以下是 jQuery 和纯 JavaScript 的答案：

[输入按键的行为类似于 javascript 中的选项卡](https://stackoverflow.com/questions/1009808/enter-key-press-behaves-like-a-tab-in-javascript)

# deployment - 我可以使用中央管理员部署我的 wsp 并避免登录到开发服务器吗

> ID：16028865
> 
> 赞同：1
> 
> 时间：2013-04-16T04:35:55.803
> 
> 标签：deployment, sharepoint-2010, wsp

我需要澄清一下，我有一个开发服务器，根据策略我不应该登录并运行命令。

那么，有什么方法可以让我使用中央管理员部署我的解决方案，就像我们通过 power shell 命令所做的那样。

我之前搜索过，但我无法得到满意的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T04:08:10.090

如果您正在部署新的 wsp，您可以运行 Powershell 命令“Add-SPSolution -LiteralPath”。如果它是现有的 wsp，您应该先收回现有的 wsp，然后再添加更新的 wsp。您可以在 Central Admin > System Settings > Manage Farm 解决方案中检查 wsp 是否已部署。您还可以在 Central admin 中部署 SP 解决方案（添加后）。部署后，请确保重新启动 Timer Service。[这是](http://technet.microsoft.com/en-us/library/cc262995%28v=office.14%29.aspx)使用 powershell 部署 wsp 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:14:33.127

您正在部署什么样的解决方案？它是农场解决方案还是沙盒解决方案？您可以通过 VS2010 部署您的解决方案，而无需登录服务器。还是您指的是需要通过 GAC 部署的项目？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:07:07.263

您可以将 powershell 设置为远程运行，然后使用 powershell 命令部署 wsp。
检查此链接以启用 powershell 以远程运行[在 SharePoint 2010 中配置远程 PowerShell](http://blogs.msdn.com/b/varun_malhotra/archive/2010/06/10/configure-power-shell-for-remote-use-of-sp-2010.aspx)

# c++ - 将文件加载到输入流中并使用 scanf()

> ID：16028866
> 
> 赞同：0
> 
> 时间：2013-04-16T04:36:02.457
> 
> 标签：c++, scanf

我对 C++ 很陌生。

我阅读了一些有经验的 c++ 编码员的代码示例，并注意到他们运行了一个以 scanf 开头的文件，该文件读取了大量输入。

但是，他们没有使用任何指定的 ifstream 来读取文件，他们似乎只是运行 scanf ，就好像整个输入 .txt 文件已经在流中一样。

这是因为他们使用了一些特殊的 IDE，您可以在其中将输入文件加载到标准流中吗？

我只是想运行他们的代码来复制他们正在做的事情，但我需要一些方法来读取一个 5000 多行的文本文件，然后在其上运行 scanf。

我该怎么做呢。我没有使用任何类型的 IDE，只是记事本++。如果有人推荐一个 IDE，我会接受它，否则只是想就如何做到这一点提出建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:39:43.547

首先，如果他们还在使用`scanf()`，他们*不是*有经验的 C++ 程序员。如果他们有经验，他们会使用 C++ I/O 工具而不是传统的 C 工具。

话虽如此，如果您可以对程序进行重定向，则可以很容易地使用接受标准输入（`scanf()`或）的函数，例如：`cin`

```
myProg <myInputFile.txt
someOtherProgWhichProducesOutput | myProg 
```

这将文件“附加”到程序`myInputFile.txt`的标准输入`myProg`，或者从另一个程序获取输出并将其提供给`myProg`.管道）如此强大，允许您从相对简单的命令中将复杂的管道串在一起。

# excel - 删除基于 3 个第一个字符的值的公式？

> ID：16028868
> 
> 赞同：0
> 
> 时间：2013-04-16T04:36:11.680
> 
> 标签：excel, excel, excel-formula

我在问是否可以在[excel](/questions/tagged/excel "显示标记为“excel”的问题")中编写一个公式

*   获取一个单元格值并从右到左获取 10 个值（为了删除不需要的值，例如 +58、58、0）
*   然后获取前三个值以再次删除不需要的值

例如，请参阅下面的示例数据：

> ```
> 04145885607
> 04145894589
> 04145920307
> 04145930676
> 04145945235
> 04145971623
> 584146316092
> +584146317534
> 00584146318088
> 4146337864
> 4146361075
> 4146400205
> 4146415696
> 4146416643 
> ```

*   我需要在字符串的开头删除第一个值，例如**+58**、**58**、**0**
*   然后比较前三个值并留下例如那些有`41`4 或`424`

在Excel中可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:05:45.767

尝试

```
=MID(A1,FIND("414",A1),99) 
```

或混合使用 424

```
=MID(A1,IF(ISERROR(FIND("414",A1)),FIND("424",A1),FIND("414",A1)),99) 
```

![在此处输入图像描述](https://i.stack.imgur.com/IxdO8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T05:12:55.210

更新

如果您在文本字符串列中混合了“414”和“424”，这是一个稍微复杂一点的公式。请注意，FIND 函数也将代替公式中的 SEARCH 函数起作用。

```
 =MID(A1,IFERROR(SEARCH("414",A1),0)+IFERROR(SEARCH("424",A1),0),99) 
```

另一个同样有效的变体：

```
 =MID(A1,IFERROR(SEARCH("414",A1),IFERROR(SEARCH("424",A1),0)),99) 
```

如果您有一个可能匹配的值列表，一个有趣的替代方法是以下数组公式：

```
 =MID(A1,MIN(IFERROR(SEARCH($D$1:$D$3,A1),99)),99) 
```

要使用它，您需要设置一个要查找的值列表（我使用单元格 D1:D3，如下所示），然后在 SEARCH（或 FIND）函数中引用该列表。作为数组公式，需要用`Control`- `Shift`-`Enter`组合键输入。

![数组公式](https://i.stack.imgur.com/EpHsV.png)

所有这些公式都返回一个#VALUE！如果未找到搜索字符串，则会出错。

# ipad - 使用 NSFetchedResultsController 在分段表视图中排序和显示数据

> ID：16028870
> 
> 赞同：0
> 
> 时间：2013-04-16T04:36:19.147
> 
> 标签：ipad, uitableview, nsfetchedresultscontroller, nsfetchrequest

我以以下方式拥有数据库。ProductionHouse <----> 电影 <----> MovieType

每个 ProductionHouse 都有多个与之关联的电影。我正在使用 NSFetchedResultsController 来填充分段表视图。每次我选择制作公司时，电影表都会显示所有电影，而与制作公司无关。

例如：“A”制作公司有 3 部电影，“电影”实体中总共有 10 部电影。在选择制作公司“A”时，电影表显示所有 10 部电影。

我如何检查并显示与所选制作公司相关的电影？任何形式的帮助都是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:44:48.817

看看这个示例，它会有所帮助[https://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008405](https://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008405)

# algorithm - 表示无限长度数字的最佳方法？

> ID：16028875
> 
> 赞同：1
> 
> 时间：2013-04-16T04:37:07.247
> 
> 标签：algorithm, language-agnostic, numbers, compression

表示无限长度整数的最佳（空间效率）方法是什么？

（数字范围从零到*正无穷*）

可以在[此处](http://ge.tt/1SxHKCe)找到一些示例编号输入（每个编号都显示在其自己的行上）。

是否有专门用于压缩数字的*压缩算法？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:24:28.750

对于可变长度整数，您基本上有两种选择：

1.  使用每个的 1 位`k`作为结束终止符。例如，Google protobuf 就是这样做的（在他们的例子中，每个字节有一个位，所以每个字节中有 7 个有用的位）。

2.  先输出位长，再输出位。这就是 ASN.1 的工作原理，除了以表格 1 表示的 OID。

如果数字真的很大，选项 2 会更好，虽然它更复杂，你必须递归地应用它，因为你可能必须输出长度的长度，然后是长度，然后是数字。一种常见的技术是对长度字段使用选项 1（位标记）。

对于较小的数字，选项 1 更好。考虑大多数数字适合 64 位的情况。每个字节存储 7 位的开销是 1/7；用 8 个字节表示 56 位。即使使用 7/8 表示长度也将表示 8 个字节中的 56 位：一个长度字节和七个数据字节。任何小于 48 位的数字都将受益于自终止代码。

平均而言，无限长度的“真正随机数”是无限长的，所以这可能不是你所拥有的。更有可能的是，您对数字大小的概率分布有所了解，并且可以在上述选项之间进行选择。

请注意，这些“压缩”都不是（相对于臃肿的 ascii 十进制格式除外）。的渐近线`log n/n`为 0，因此随着数字变大，数字大小的大小往往不占用（相对）空间。但它仍然需要以某种方式表示，所以总表示总是比数字的 log [2]大一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:27:06.200

您本身无法压缩，但您可以编码，这可能是您正在寻找的。您的文件包含由换行符分隔的 ASCII 十进制数字序列。您应该简单地对字符进行 Huffman 编码。你不会比每个字符大约 3.5 位做得更好。

# java - Java替换匹配的正则表达式

> ID：16028876
> 
> 赞同：1
> 
> 时间：2013-04-16T04:37:13.700
> 
> 标签：java, regex, matcher, replaceall

对不起，我不得不重新写这个问题，我正在完成它并且有人关闭了它。他们没有很好地解释为什么我不得不重新发布？请告诉我什么令人困惑。

要点：我想用匹配的一部分替换正则表达式匹配所以如果我正则表达式 hi 我希望它被替换为 {hi} 如果正则表达式匹配我想替换为 {at}

这太棒了看看这两个字母的单词被替换返回将是

```
this <h1>is</h1> awesome look <h1>at</h1> this two letter words get replaced 
```

注意 is 和 at which 将如何匹配正则表达式 \b\w\w\b 将匹配替换

这是我正在处理的代码......不要判断它还没有完成，但我只是有点困惑，想知道是否有更简单的方法。我正在搜索字符串并找到匹配项，然后我将把它放到一个数组列表中并替换每个。问题是我要替换的一件事是 { 并且我想用 {{} 替换它现在看起来这将不断替换括号，因为我不断添加它们......所以我的另一个想法是全部替换它们一个一个一个字符一个字符地添加到一个新`StringBuilder`对象？

```
ArrayList<String> replacements= new ArrayList<String>();
String s="::";
s+=command;
Pattern p= Pattern.compile("[!-~]");
Matcher match= p.matcher(this.execution);
while(match.find()){
    replacements.add(match.group());
}
StringBuilder string= new StringBuilder();
for(int i=0;i<this.execution.length();i++){ 
    String a=new String(execution.charAt(i));
    if(...){
        ...
    }
}
s+="::"+this.execution; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T04:42:01.130

尝试

```
str = str.replaceAll("(\\b\\w\\w\\b)", "<h1>$1</h1>"); 
```

# mips - MIPS — 打印变量中的值

> ID：16028877
> 
> 赞同：-1
> 
> 时间：2013-04-16T04:37:16.283
> 
> 标签：mips, system-calls

以下是代码：

```
.text
.ent    main
.type   main, @function
main:
.frame  $fp,24,$31      # vars= 8, regs= 1/0, args= 0, gp= 8

addiu   $sp,$sp,-24
sw  $fp,20($sp)
move    $fp,$sp
li  $2,1            # 0x1
sw  $2,12($fp)
li  $2,1            # 0x1
sw  $2,8($fp)

    # now print -------------------------------------
    li      $2,1
    li      $a0,10
    syscall

move    $2,$0
move    $sp,$fp
lw  $fp,20($sp)
addiu   $sp,$sp,24
j   $31
nop 
```

我是如何生成这个的——通过编写一个程序：

```
int main(){
  int i = 1;
} 
```

然后自己简单地添加了系统调用语句。我不确定这是对还是错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T00:21:49.610

我解决它的方法毕竟只是简单地使用 printf 调用。系统调用从来没有为我工作过；甚至是答案中描述的方式。

因此，要打印值 10，我执行以下操作：-

```
 # printf initialized

    lui     $2,%hi($LC0)             # loading .ascii from $LCO
    addiu   $2,$2,%lo($LC0)
    move    $4,$2                # first argument to printf
    li      $5,10
    lw      $2,%call16(printf)($28)      # printf call to print contents of $5
    nop
    move    $25,$2
    jalr    $25
    nop
    lw      $28,16($fp)              # __printf__ end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:11:44.357

您添加的代码：

```
 # now print -------------------------------------
    li      $2,1
    li      $a0,10
    syscall 
```

确实在标准输出中打印整数 10。如果您想打印变量`i`，您必须先将其值加载到寄存器`$a0`中。假设它尚未存储在寄存器中（顺便说一句，这是您的情况），并且它存储在堆栈中（相对于 8 的位置`$fp`），您必须：

```
 lw $a0, 8($fp)   # Load contents of variable i onto register $a0
  li $v0, 1        # service 1 (print integer)
  syscall          # issue service 
```

# css - 使用 CSS 过渡动画最大高度

> ID：16028878
> 
> 赞同：61
> 
> 时间：2013-04-16T04:37:16.950
> 
> 标签：css, css-transitions, css-animations

我想创建一个仅由类名驱动的展开/折叠动画（javascript 用于切换类名）。

我要上一节课`max-height: 4em; overflow: hidden;`

和另一个`max-height: 255em;`（我也尝试了 value `none`，它根本没有动画）

这个动画：`transition: max-height 0.50s ease-in-out;`

我使用 CSS 过渡在它们之间切换，但浏览器似乎正在为所有这些额外`em`的 's 设置动画，因此它会在折叠效果中产生延迟。

有没有一种方法（本着同样的精神 - 使用 css 类名）没有那种副作用（我可以减少像素数，但这显然有缺点，因为它可能会切断合法文本 - 那是大价值的原因，所以它不会切断合法的长文本，只有可笑的长文本）

请参阅 jsFiddle - [http://jsfiddle.net/wCzHV/1/](http://jsfiddle.net/wCzHV/1/)（单击文本容器）

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2016-08-23T14:17:25.920

修复延迟解决方案：

为元素放置cubic-bezier(0, 1, 0, 1) 转换函数。

## scss

```
.text {
  overflow: hidden;
  max-height: 0;
  transition: max-height 0.5s cubic-bezier(0, 1, 0, 1);

  &.full {
    max-height: 1000px;
    transition: max-height 1s ease-in-out;
  }
} 
```

## css

```
.text {
  overflow: hidden;
  max-height: 0;
  transition: max-height 0.5s cubic-bezier(0, 1, 0, 1);
}

.text.full {
  max-height: 1000px;
  transition: max-height 1s ease-in-out;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-05T12:52:11.450

这是一个老问题，但我只是想出了一个办法，想把它贴在某个地方，这样我就知道在哪里可以找到它，如果我再次需要它:o)

所以我需要一个带有可点击的“sectionHeading”div 的手风琴，它可以显示/隐藏相应的“sectionContent”div。部分内容 div 具有可变高度，这会产生问题，因为您无法将高度设置为 100%。我已经看到其他建议使用动画 max-height 的答案，但这意味着有时当您使用的 max-height 大于实际高度时会出现延迟。

这个想法是在加载时使用 jQuery 来查找并明确设置“sectionContent”div 的高度。然后为每个点击处理程序添加一个 css 类“noHeight”来切换它：

```
$(document).ready(function() {
    $('.sectionContent').each(function() {
        var h = $(this).height();
        $(this).height(h).addClass('noHeight');
    });
    $('.sectionHeader').click(function() {
        $(this).next('.sectionContent').toggleClass('noHeight');
    });
}); 
```

为了完整起见，相关的 css 类：

```
.sectionContent {
    overflow: hidden;
    -webkit-transition: all 0.3s ease-in;
    -moz-transition: all 0.3s ease-in;
    -o-transition: all 0.3s ease-in;
    transition: all 0.3s ease-in;
}
.noHeight {
        height: 0px !important;
} 
```

现在高度转换工作没有任何延迟。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T08:14:50.170

万一有人正在阅读本文，我还没有找到解决方案并使用了仅扩展效果（这是通过将`transition`样式移动到扩展类定义来实现的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-13T11:42:30.887

解决方案其实很简单。制作一个包含内容的子 div。父 div 将是展开折叠的那个。

加载时，父 div 将具有最大高度。切换时，您可以通过编写检查孩子身高`document.querySelector('.expand-collapse-inner').clientHeight;`并使用 javascript 设置 maxheight。

在您的 CSS 中，您将拥有这个

```
.parent {
transition: max-height 250ms;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-26T11:36:17.057

使用**display:flex**。这将起作用：

```
.parent > div {
  display: flex;
  flex-direction: column;
  height: 0px;
  max-height: 0px;
  opacity: 0;
  overflow: hidden;
  transition: all 0.3s;
}

.parent > div.active {
  opacity: 1; 
  height: 100%;
  max-height: none; /* important for animation */
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-19T12:50:40.597

[您可以使用jQuery Transit](http://ricostacruz.com/jquery.transit/)很好地完成此操作：

```
$(function () {
    $(".paragraph").click(function () {
        var expanded = $(this).is(".expanded");
        if (expanded) 
        {
            $(this).transition({ 'max-height': '4em', overflow: 'hidden' }, 500, 'in', function () {$(this).removeClass("expanded"); });
        } 
        else 
        {
            $(this).transition({ 'max-height': $(this).get(0).scrollHeight, overflow: ''}, 500, 'out', function () { $(this).addClass("expanded"); });
        }
    });
}); 
```

您绝对可以根据自己的喜好对其进行整理，但这应该可以满足您的要求。

## [JS 小提琴演示](http://jsfiddle.net/TheGAFF/aQrER/)

# c - 处理 bison/yacc 中的变量名列表

> ID：16028880
> 
> 赞同：1
> 
> 时间：2013-04-16T04:37:19.077
> 
> 标签：c, parsing, attributes, bison, yacc

我无法弄清楚如何用野牛编写解析器。

为了将变量插入到我的符号表中，以便我可以进行一些类型检查和其他废话，我需要变量名称和类型。

我特别关注以下几行：

```
%union {tokentype token;
        char *type;
        sPtr names; //stack pointer
       }
<%token definitions>
%token <token> ID ICONST
%type <type> stype type
%type <names> IDlist

vardcl          : IDlist ':' type
                ;

IDlist          : IDlist ',' ID
                | ID
                ;

type            : ARRAY '[' integer_constant RANGE integer_constant ']' OF stype { $$ = $8 }
                | stype { $$ = $1 }
                ;

stype           : INT { $$ = "INT" }
                | BOOLEAN { $$ = "BOOLEAN" }
                ; 
```

如果我的语法是这样的：

```
vardcl          : ID ':' type
                ; 
```

我可以做类似的事情：

```
vardcl          : ID ':' type { SymbolTableInsert($1, $3); }
                ; 
```

但相反，我的语法看起来像这样：

```
vardcl          : IDlist ':' type
                ;

IDlist          : IDlist ',' ID
                | ID
                ; 
```

所以我试图将每个 ID 放入一个数据结构中（我已经为符号表使用了一个堆栈，所以我想我也可以使用它）但是我不断收到关于 $arguments 类型的不兼容错误，我是不确定我什至会推动我需要的一切：

```
IDlist          : IDlist ',' ID { $$ = SCreate(CompareStrings); SPush($$, $3); }
                | ID { $$ = SCreate(CompareStrings); SPush($$, $1);
                ; 
```

我收到错误“SPush 的参数 2 的类型不兼容，预期 void * 不是 tokentype”。尝试将内容插入到我的符号表中时，我也遇到了同样的错误。

有什么好方法可以做到这一点？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:04:21.110

在语法方面，一切看起来都很好。看起来您的问题实际上是 C 的问题：检查`SPush`函数的签名，它似乎是一个函数，其第二个参数是 a `void*`，而不是`tokentype`（这是声明的类型`ID`）。

# sql - 选择周记录

> ID：16028888
> 
> 赞同：2
> 
> 时间：2013-04-16T04:37:55.080
> 
> 标签：sql, sql-server

我写了这个查询，它给了我当天的记录

```
SELECT EnquiryOwner,Count(uid) 
FROM EnquiryMaster 
WHERE orgid = '" + orgid + "' 
    AND (DAY(date) = DAY(GETDATE()) 
    AND MONTH(date) = MONTH(GETDATE()) 
    AND YEAR(date) = YEAR(GETDATE())) 
GROUP BY EnquiryOwner 
```

我想选择一周的记录。如果我在星期二访问，我想要从前一个星期二到本星期二的记录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:45:54.243

[您可以使用 dateadd 来确定一周前的日期。](http://msdn.microsoft.com/en-us/library/aa258267%28v=sql.80%29.aspx)

比如喜欢

```
DAY(date)   = DATEADD(day,   -7, GETDATE()) AND    
MONTH(date) = DATEADD(month, -7, GETDATE()) AND
YEAR(date)  = DATEADD(year,  -7, GETDATE()) 
```

或者

```
... WHERE date between DATEADD(DAY,-7,GETDATE()) and GETDATE() 
```

另请参阅[日期和时间函数](http://msdn.microsoft.com/en-us/library/ms186724.aspx)列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T04:51:24.857

如果你不在乎时间：

```
WHERE date between DATE_SUB(DATE(NOW()),INTERVAL 7 DAY) and DATE(NOW()) 
```

如果您确实关心时间：

```
WHERE date between DATE_SUB(NOW(),INTERVAL 7 DAY) and NOW() 
```

这是MYSQL。对于 SQL Server，它看起来像这样：

```
WHERE date between DATEADD(DAY,-7,GETDATE()) and GETDATE() 
```

（我没有安装sql server，所以没有测试。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T04:53:49.997

如果你想在一周前跳跃，你只需要使用 dateadd 比较一个日期减去 7。

```
SELECT EnquiryOwner,Count(uid) 
FROM EnquiryMaster 
WHERE orgid = '" + orgid + "' 
    AND date = DATEADD(date, -7, GETDATE()) 
GROUP BY EnquiryOwner 
```

# c# - 如何为 C# 应用程序创建 Opencv dll？

> ID：16028896
> 
> 赞同：3
> 
> 时间：2013-04-16T04:38:53.190
> 
> 标签：c#

我有`C++ Opencv`代码，我需要将其构建`C++ dll`为假设在`c#`应用程序中使用的代码。我需要使用`"extern "` 规范还是需要为 DLL 添加引用？

如何为 C# 应用程序创建 Opencv dll？

如何实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:42:52.393

> Emgu CV 是英特尔 OpenCV 图像处理库的跨平台 .Net 包装器。允许从 .NET 兼容的语言（例如 C#、VB、VC++、IronPython 等）调用 OpenCV 函数。

OpenCV 只是您的 C/C++ 代码使用的库。

**参考以下链接：**

[http://www.emgu.com/wiki/index.php/Main_Page](http://www.emgu.com/wiki/index.php/Main_Page)

另请参阅[这个](http://msdn.microsoft.com/en-us/library/aa287781%28vs.71%29.aspx)有用的链接。

希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:42:33.010

你为什么不使用[OpenCvDotNet](http://code.google.com/p/opencvdotnet/)？

这个整经机应该做你想做的。

# bash - bash 在 PS1 的文字值中解析变量

> ID：16028904
> 
> 赞同：1
> 
> 时间：2013-04-16T04:39:56.357
> 
> 标签：bash, literals, ps1

注意：不要为那个例子提供更简单的解决方案，它只是为了显示一个问题而生成的，顺序是从实际[问题](https://github.com/magicmonty/bash-git-prompt/issues/6)中获取的。

我尝试在“.bashrc”中更改我的 PS1，不想在这里打印整个代码（但确实需要在定义内部变量之前以文字形式存储模板），问题总结为：

```
PROMPT_START='$PathShort'
PathShort="\w"
PS1="$PROMPT_START$" 
```

结果我有：

```
\w$ 
```

但我希望：

```
~/java/git/shell$ 
```

但如果让 PS1 像：

```
PS1="\w$" 
```

结果将如预期：

```
~/java/git/shell$ 
```

如何通过延迟变量（$PathShort）解析通过我的（第一个）变体制作 PS1？

注意：我不能改变那个变量的顺序，这个问题是这个问题的[结果](https://github.com/magicmonty/bash-git-prompt/issues/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:55:44.530

**。轮廓：**

```
function prompt() {
   print $PathShort
}
export -f prompt
PS1='`prompt`$ ' 
```

**结果：**

```
alevin $ . .profile
$ export PathShort=one
one$ export PathShort=two
two$ export PathShort=three
three$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:48:56.790

不清楚，你要`\w$`在PS1吗？然后使用`PS1="\\\w$"`. 当 bash 读取字符串时，它会将 读取`\`为转义字符。因此，您需要通过在其前面放置另一个转义字符来提供文字`\`。读这个，很有趣 :) [http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)

# android - 操作栏中的菜单 Android

> ID：16028911
> 
> 赞同：1
> 
> 时间：2013-04-16T04:40:18.690
> 
> 标签：android, drop-down-menu, menu, android-actionbar

我已经创建了带有一些动态选项卡的 ActionBar，如下面的代码。

```
public void addTabBar(Context context)
{       
    sActiveContext=context;      
    sActionBar = getActionBar(); 
    sActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
}  

public void addTabItem(final String url, String tabTitle)
{   
    arrayList.add(url);
    Tab tab = sActionBar.newTab();
    if(tabTitle.equals(""))
    {
        int childcount=sActionBar.getTabCount();
        tabTitle="Tab" + String.valueOf(childcount+1);          
    }
    tab.setText(tabTitle);          
    tab.setTabListener(this);
    sActionBar.addTab(tab);        
}

  @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        linearLayout=new LinearLayout(sActiveContext);      
        linearLayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
        linearLayout.setOrientation(LinearLayout.VERTICAL); 
        setContentView(linearLayout);
        CustomWebView webview=new CustomWebView(sActiveContext);
        FrameLayout layout=webview.createwebview();

        for (int i = 0; i < arrayList.size(); i++) {
            if(tab.getPosition()==i)
            {
                webview.initwebview(arrayList.get(i));
                break;
            }
        }
    linearLayout.addView(layout);
    } 
```

如果我已将此代码转换为库并调用这些方法，我可以在操作栏中创建 n 个选项卡。现在，我希望在下面的链接中添加菜单项和下拉菜单（带三个点的椭圆）。 [http://developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs) 如果我将图像传递给 showMenu(R.drawable.menu_image) 方法，则必须动态创建菜单项。我怎样才能做到这一点？请给一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:04:20.113

试试这个，在你的活动中，

```
private Menu menu=null;
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
   this.menu=menu;
   //  call here as, showMenu(R.drawable.menu_image,2222);
   return true;
}
private void showMenu(int imageIcon,int id)//Where imageIcon is R.drawable.menu_image
{
   menu.add(0, id, 0, actionString).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);;
   MenuItem item=menu.findItem(id);
   item.setIcon(imageIcon);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:11:50.137

试试这个来处理所有菜单的活动，并在标签更改时管理所有菜单的片段事务，

```
private Menu menu=null;

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
   this.menu=menu;
   //  call here as, showMenu(R.drawable.menu_image,2222);
   // add all menu's when that needed in your activity like save,cancel,choose color,  //close etc.
   menuHandler(0);
   return true;
}
private void showMenu(int imageIcon,int id)//Where imageIcon is R.drawable.menu_image
{
   menu.add(0, id, 0, actionString).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);;
   MenuItem item=menu.findItem(id);
   item.setIcon(imageIcon);
}
    private menuHandler(int position)
{
if(position==0)//For tab 1
{
if(!menu.findItem(1111).isVisible())    //check menu item with id 1111 is visible
    menu.findItem(1111).setVisible(true);
if(menu.findItem(2222).isVisible()) 
    menu.findItem(2222).setVisible(false);
}
else if(position==0)
{
if(menu.findItem(1111).isVisible()) 
    menu.findItem(1111).setVisible(false);
if(menu.findItem(2222).isVisible())
    menu.findItem(2222).setVisible(false);
}
else
{
if(menu.findItem(3333)
        menu.findItem(3333).setVisible(false);
if(!menu.findItem(2222).isVisible())
    menu.findItem(2222).setVisible(true);
}
}
@Override
    public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) 
    {}
    @Override
    public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) 
    {
menuHandler(tab.getPosition());
} 
```

# android - 在现有的 Android 4.1 和 4.2 浏览器上访问我们的网络应用程序

> ID：16028912
> 
> 赞同：1
> 
> 时间：2013-04-16T04:40:31.463
> 
> 标签：android, browser, http-status-code-403

因此，我目前遇到了尝试在 Jelly Bean 的官方库存 Android 浏览器上打开我们的网络应用程序的问题。我不知道我能详细说明这个问题，但我会尽力而为。

对于运行 ICS 或更早版本的设备，在任何浏览器（stock、firefox、chrome）上，我们都可以输入我们 Web 应用程序的 URL，进入登录页面，登录并查看一切正常。

对于运行 Jelly Bean（4.1 和 4.2）的设备，如果我们在**stock browser**中输入 url ，我们会得到以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/cj8HF.png)

但是，如果我们使用**Chrome**或**Firefox**，就可以了。

我们收到此错误很奇怪，因为我已经在我们的网络上进行了身份验证，我只尝试访问登录屏幕，因此不需要其他身份验证。

我们的 Web 应用程序从服务器获取信息，这在服务器端似乎不是问题。

因此，罪魁祸首似乎是 Jelly Bean 中的库存浏览器，我尝试查找库存 Web 浏览器从 ICS 到 Jelly Bean 是否有任何变化，但我找不到任何东西。

有没有人提出过这样的问题，或者是否知道 Jelly Bean 上的库存 android 浏览器发生了任何重大变化（可能与安全性有关？）？

编辑：这个网络应用程序在外部不可用。目前我们只在内部进行了测试，您必须连接到我们的内部网络。

EDIT2：刚刚检查了海豚浏览器，同样的事情发生了......所以我现在真的迷路了，因为我更不确定它与 4.1+ 股票浏览器有关。另外，让我感到更加失落的另一件事是，我刚刚在 4.1.2 上查看了 Galaxy SIII 的股票浏览器，页面加载正常......

EDIT3：好消息，我们的开发人员已经进行了进一步调查，显然这是问题所在：

> 默认浏览器在请求中添加了一个额外的标头，使我们的服务器认为它是一个 ajax 请求并拒绝它，因为请求的其余部分实际上不是一个 ajax 请求......这个错误是因为 Android 4.1+ 中的默认浏览器引起的已向所有请求“X-Requested-With: com.android.browser”添加了一个新标头。

所以我猜 Dolphin HD 浏览器也能做到这一点......正在做进一步的调查，所以会回到这个问题上并给出答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:15:27.513

根据我们进行一些研究的开发人员的说法：

> 默认浏览器为请求添加了一个额外的标头，使我们的服务器认为它是一个 ajax 请求并拒绝它，因为请求的其余部分实际上不是一个 ajax 请求......
> 
> 此错误是由于 Android 4.1+ 中的默认浏览器为所有请求添加了一个新标头“X-Requested-With: com.android.browser”。

目前，我们无法花更多时间尝试通过代码找到解决此问题的好方法...因此我们决定将此记录为一个已知问题，并建议人们在拥有 4.1+ 设备的情况下使用 Chrome

# sql - 具有 LIKE 和 RIGHT 功能的 SQL 服务器过滤器索引？

> ID：16028917
> 
> 赞同：2
> 
> 时间：2013-04-16T04:41:09.857
> 
> 标签：sql, sql-server, sql-server-2008, indexing

这是自学问题，不在现场环境中。

我一直在查询以 A 结尾的名称，所以我想我会在这些数据上创建一个过滤索引，所以它会寻找或扫描。

但这给了我错误。

```
--Usual Query 
SELECT c.contactname
FROM sales.Customers c where c.contactname like '%A'

--1st Tried failed
create NONCLUSTERED INDEX UCI_NameLikeA
on sales.customers(contactname)
where right(contactname,1)='A'

Msg 156, Level 15, State 1, Line 4
Incorrect syntax near the keyword 'LIKE'

--2nd method tried failed
create NONCLUSTERED INDEX UCI_NameLikeA
on sales.customers(contactname)
where right(contactname,1)='A'

Msg 10735, Level 15, State 1, Line 3
Incorrect WHERE clause for filtered index 'UCI_NameLikeA' on table 'sales.customers'. 
```

为什么过滤器索引中不允许使用 Like 和 RIGHT 函数？我可以用其他方法来寻找而不是扫描吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:00:48.870

关于手册[http://msdn.microsoft.com/de-de/library/ms188783.aspx](http://msdn.microsoft.com/de-de/library/ms188783.aspx)只有简单的运算符允许过滤索引。

所以你可以选择非计算列和喜欢`=` `<` `>`和`IN()`

**编辑：**

你可以做什么。创建另一个存储第一个字母的列。然后创建一个更新此列的索引，如下所示：

```
UPDATE [mytable]
SET [index_column] = RIGHT(contactname,1) 
```

在那里你可以设置你的索引，这可能对你的方法有帮助。

# c# - 在 ASP.NET Web Api 中捕获所有未处理的异常

> ID：16028919
> 
> 赞同：124
> 
> 时间：2013-04-16T04:41:11.737
> 
> 标签：c#, asp.net-web-api, unhandled-exception

如何捕获ASP.NET Web Api 中发生的*所有*未处理异常以便记录它们？

到目前为止，我已经尝试过：

*   创建并注册一个[`ExceptionHandlingAttribute`](http://weblogs.asp.net/fredriknormen/archive/2012/06/11/asp-net-web-api-exception-handling.aspx)
*   实现一个`Application_Error`方法`Global.asax.cs`
*   订阅`AppDomain.CurrentDomain.UnhandledException`
*   订阅`TaskScheduler.UnobservedTaskException`

成功处理控制器操作方法和操作过滤器中抛出的`ExceptionHandlingAttribute`异常，但不处理其他异常，例如：

*   `IQueryable`动作方法返回的方法执行失败时抛出的异常
*   消息处理程序抛出的异常（即`HttpConfiguration.MessageHandlers`）
*   创建控制器实例时抛出的异常

基本上，如果异常会导致 500 Internal Server Error 返回给客户端，我希望它被记录下来。在 Web 表单和 MVC 中实施`Application_Error`这项工作做得很好 - 我可以在 Web Api 中使用什么？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2014-01-27T13:53:37.280

这现在可以通过 WebAPI 2.1 实现（请参阅[新增功能](http://www.asp.net/web-api/overview/releases/whats-new-in-aspnet-web-api-21#global-error)）：

创建 IExceptionLogger 的一个或多个实现。例如：

```
public class TraceExceptionLogger : ExceptionLogger
{
    public override void Log(ExceptionLoggerContext context)
    {
        Trace.TraceError(context.ExceptionContext.Exception.ToString());
    }
} 
```

然后在配置回调中注册应用程序的 HttpConfiguration，如下所示：

```
config.Services.Add(typeof(IExceptionLogger), new TraceExceptionLogger()); 
```

或直接：

```
GlobalConfiguration.Configuration.Services.Add(typeof(IExceptionLogger), new TraceExceptionLogger()); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-22T23:59:38.630

要回答我自己的问题，这是不可能的！

处理所有导致内部服务器错误的异常似乎是 Web API 应该具备的基本功能，因此我向 Microsoft 提出了**Web API 的全局错误处理程序**的请求：

[https://aspnetwebstack.codeplex.com/workitem/1001](https://aspnetwebstack.codeplex.com/workitem/1001)

如果您同意，请转到该链接并投票！

与此同时，优秀的文章[ASP.NET Web API 异常处理](http://weblogs.asp.net/fredriknormen/archive/2012/06/11/asp-net-web-api-exception-handling.aspx)展示了几种不同的方法来捕获不同类别的错误。它比应有的复杂得多，并且不能捕获*所有*内部服务器错误，但它是当今可用的最佳方法。

**更新：**全局错误处理现已实现并可在夜间构建中使用！它将在 ASP.NET MVC v5.1 中发布。以下是它的工作原理：[https ://aspnetwebstack.codeplex.com/wikipage?title=Global%20Error%20Handling](https://aspnetwebstack.codeplex.com/wikipage?title=Global%20Error%20Handling)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-03-23T05:20:30.577

Yuval 的答案是定制对 Web API 捕获的未处理异常的响应，而不是用于记录，如链接[页面](http://www.asp.net/web-api/overview/error-handling/web-api-global-error-handling)上所述。有关详细信息，请参阅页面上的“何时使用”部分。记录器总是被调用，但处理程序只有在可以发送响应时才会被调用。简而言之，使用[logger](https://stackoverflow.com/a/21382651/2028733)进行记录，使用 handler 自定义响应。

顺便说一句，我正在使用程序集 v5.2.3 并且[`ExceptionHandler`](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Http/ExceptionHandling/ExceptionHandler.cs)该类没有该`HandleCore`方法。我认为，等价物是`Handle`。但是，简单的子类`ExceptionHandler`化（如 Yuval 的回答）是行不通的。就我而言，我必须执行`IExceptionHandler`如下。

```
internal class OopsExceptionHandler : IExceptionHandler
{
    private readonly IExceptionHandler _innerHandler;

    public OopsExceptionHandler (IExceptionHandler innerHandler)
    {
        if (innerHandler == null)
            throw new ArgumentNullException(nameof(innerHandler));

        _innerHandler = innerHandler;
    }

    public IExceptionHandler InnerHandler
    {
        get { return _innerHandler; }
    }

    public Task HandleAsync(ExceptionHandlerContext context, CancellationToken cancellationToken)
    {
        Handle(context);

        return Task.FromResult<object>(null);
    }

    public void Handle(ExceptionHandlerContext context)
    {
        // Create your own custom result here...
        // In dev, you might want to null out the result
        // to display the YSOD.
        // context.Result = null;
        context.Result = new InternalServerErrorResult(context.Request);
    }
} 
```

请注意，与记录器不同的是，您通过替换默认处理程序而不是添加来注册处理程序。

```
config.Services.Replace(typeof(IExceptionHandler),
    new OopsExceptionHandler(config.Services.GetExceptionHandler())); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-07-12T11:40:02.780

`IExceptionHandler`您还可以通过实现接口（或继承`ExceptionHandler`基类）来创建全局异常处理程序。它将是执行链中最后一个被调用的，毕竟已注册`IExceptionLogger`：

> IExceptionHandler 处理来自所有控制器的所有未处理的异常。这是列表中的最后一个。如果发生异常，将首先调用 IExceptionLogger，然后调用控制器 ExceptionFilters，如果仍未处理，则调用 IExceptionHandler 实现。

```
public class OopsExceptionHandler : ExceptionHandler
{
    public override void HandleCore(ExceptionHandlerContext context)
    {
        context.Result = new TextPlainErrorResult
        {
            Request = context.ExceptionContext.Request,
            Content = "Oops! Sorry! Something went wrong."        
        };
    }

    private class TextPlainErrorResult : IHttpActionResult
    {
        public HttpRequestMessage Request { get; set; }

        public string Content { get; set; }

        public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
        {
            HttpResponseMessage response = 
                             new HttpResponseMessage(HttpStatusCode.InternalServerError);
            response.Content = new StringContent(Content);
            response.RequestMessage = Request;
            return Task.FromResult(response);
        }
    }
} 
```

更多关于[这里](http://www.asp.net/web-api/overview/error-handling/web-api-global-error-handling)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-10-10T13:40:24.757

您可能有自己不知道的现有 try-catch 块。

我认为我的新`global.asax.Application_Error`方法并没有被我们的遗留代码中的未处理异常持续调用。

然后我在调用堆栈中间发现了一些 try-catch 块，它们在异常文本上调用了 Response.Write。就是这样。转储屏幕上的文字然后杀死异常石死。

所以异常被处理了，但处理没有做任何有用的事情。一旦我删除了这些 try-catch 块，异常就会按预期传播到 Application_Error 方法。

# ajax - 如何在不刷新页面的情况下将新的 HTML 数据从服务器推送到浏览器

> ID：16028921
> 
> 赞同：5
> 
> 时间：2013-04-16T04:41:19.590
> 
> 标签：ajax, html, asynchronous, websocket

我见过许多网站（例如 Facebook 或堆栈溢出），它们会在生成新数据时更新某些功能（例如帖子上的新答案）。

假设有一个新帖子添加到博客中，并且在那一刻有人在博客中查看它，这个想法是自动将新帖子添加到博客中，而无需刷新或让用户执行任何操作。

我曾想过每 5 秒左右执行一次 AJAX 调用，但这会向服务器发出太多请求，而且我看到我提到的网站（更新内容）不会发出任何新请求。

我真的不知道如何实现这一目标。这对 PHP 和 AJAX 可行吗？我也听说过websockets。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T04:43:43.413

好问题！有几个解决方案。

这个调用 websockets 有一个相对较新的解决方案。它在 HTML5 标准中，并且在其他语言上也有很多库。

其中之一是 sockets.io ( javascript ) - 它使您能够与服务器保持一致、低延迟的连接，以便在生成信息时接收信息。服务器端还有很多用于 php、c 和 python 的插件。

仅举几例：libwebsockets (c++)、pywebsockets (python) 和 jetty (javascript)

对于 php：[http ://socketo.me/](http://socketo.me/)

访问此链接了解更多信息：[http ://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T04:54:45.783

您可以使用[HTML5 SSE](http://www.w3schools.com/html/html5_serversentevents.asp)。但这不是一个很好的解决方案。

您可以使用有助于长 AJAX 轮询的 Comet 服务器。查看[Ajax 推送引擎 (APE)](http://www.ape-project.org/)。它是 Comet Server 和 Javascript 框架的组合，使 AJAX-PUSH 或实时流媒体成为可能。

干杯！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T04:45:58.360

SignalR [http://signalr.net/是一个可以帮助您做到这一点的框架示例](http://signalr.net/)

这是特定于 asp.net 的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T05:26:16.313

出色地，

如果你在 PHP 和开源世界，你可以考虑 Node.Js、Socket.IO 或 NowJs

我在 ASP.Net Wonderworld 中，我喜欢 SignalR。

# android - 播放 MPEG-TS 文件时 Android 音频延迟

> ID：16028922
> 
> 赞同：1
> 
> 时间：2013-04-16T04:41:23.147
> 
> 标签：android, http-live-streaming, mpeg2-ts

我最近在 Android 应用程序中播放视频时遇到了很多困难。有问题的视频是一个 M3U8 文件，该文件又链接到一系列二级 M3U8，每个二级 M3U8 都有一个分量 MPEG-TS 视频文件的列表，以及一个包含 AAC 格式音频分量的单个 M3U8 文件。我在让 M3U8 合作时遇到了一些麻烦，但现在似乎工作正常。

不幸的是，音频比视频晚了大约一秒钟。这种滞后既存在于我自己的包含 MediaPlayer 的 Activity 中，也存在于启动指向流的 Android 的默认视频播放器中。播放中还经常出现视觉卡顿或损坏。使用 VLC Beta 或在此应用的 iPhone 版本中播放时均不存在任何问题，因此视频文件本身没有问题。我尝试了 Vitamio 库，结果更糟（更频繁的损坏，根本没有音频）。遗憾的是，更改视频格式不是一种选择。

在我看来，这个问题可能是由 Android 对 MPEG-TS 的有限支持引起的 - 支持的媒体格式列表指定它使用 AAC 音频（而我假设 iOS 版本只是从 .ts 播放视频和音频文件）。解决此滞后的任何建议/解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:12:35.840

您可以尝试 Gstreamer，它似乎在 Android ( [http://gstreamer.com/](http://gstreamer.com/) ) 上运行良好，Vitamio 也是

# codeigniter - codeigniter - 在 CI 配置文件中使用自定义配置值

> ID：16028935
> 
> 赞同：0
> 
> 时间：2013-04-16T04:42:35.477
> 
> 标签：codeigniter

我得到了 custom.php （在配置文件夹内），代码如下

```
$config['myurl'] = 'somesite.com'; 
```

我得到了 config.php（标准 CI），我想使用 custom.php 中的值设置 base_url，如下所示

```
$config['base_url'] = $this->config->item('myurl'); 
```

这样做我得到了错误

```
Using $this when not in object context in /Volumes/HD 2/work/vnl/app/config/config.php on line 18 
```

为此目的正确的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:32:17.483

您可以只使用数组。在您的自定义配置文件中

```
$config['myurl'] = 'myurl.com';

$config['base_url'] = &$config['myurl']; 
```

这将在加载自定义配置文件后更改默认的 base_url，您也可以在自定义配置中重置 base_url 元素，但是在我看来，不建议在项目后期重置另一个配置文件中的基本 url可能会忘记它的设置位置，为什么不在主配置文件中设置它（可能还有使用条件）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:55:36.080

这在那儿行不通。`$this`您想要使用的是一个控制器实例，并且在标准加载时尚未创建`application/config/config.php`。

您可以尝试添加一个[`pre_system`钩子](http://ellislab.com/codeigniter/user-guide/general/hooks.html)（在配置对象之前加载）并包含在一些可以调用的辅助函数中，并在`application/config/config.php`. `APPPATH`届时将可以使用通常的常量。

如果您可以将此配置变量设为也可以工作的常量（只需放入`define()`inside `application/config/constants.php`）。由于配置文件只是一个常规的 php 源文件，因此如果必须，您也可以在此处设置条件。

# android - 如何将android.util.Log写入android中SDCard上的纯文件

> ID：16028936
> 
> 赞同：0
> 
> 时间：2013-04-16T04:42:37.847
> 
> 标签：android, logging

嘿伙计们，我创建了一个应用程序并提供给人们使用它。他们在应用程序中满足不同的问题。我想捕获文件中的所有日志活动，以便他们可以将其提供给我，我可以检查问题。我在互联网上搜索过，但没有得到明确的答案。谁能告诉我如何将`Android.util.Log`输出重定向到文本文件。

我试过这个
`File filename = new File(Environment.getExternalStorageDirectory() + "/gridlog.log");
filename.createNewFile();
String cmd = "logcat -d -f " + filename.getAbsolutePath();
Runtime.getRuntime().exec(cmd);`

现在捕获我使用的登录文件

`Log.e("HEY ERROR", "HEY THIS IS ERROR");`

但它在文件中存储了很多不相关的信息..而且我只工作那些，以后如果我想记录信息或错误，它不会捕获它。

任何android大师都可以在这里帮助我..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:00:42.040

如果您想远程接收通知和错误日志/崩溃报告，您可以使用以下免费服务：
[AppHance](http://www.apphance.com/)
[BugSense](http://www.bugsense.com/)
（我相信您可以通过网络找到更多免费服务..）

在我看来，将日志写入 SD 卡而不是手动传输，当您拥有此免费跨平台服务时，这不是一个非常聪明的解决方案。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T03:19:46.220

回答有点晚了，但将来可能会对人们有所帮助。[TestFlight](http://www.testflight.com)非常酷的免费服务，它允许远程记录、崩溃报告、测试版发布等等。不用说，可以从您的 testflight 仪表板监控这些活动。此外，支持iOS和Android。

# list - Prolog、列表和对的新手

> ID：16028938
> 
> 赞同：2
> 
> 时间：2013-04-16T04:42:45.820
> 
> 标签：list, prolog

我是 Prolog 的新手，我很难理解某些机制的实际工作原理。现在我正在尝试解决一个特定的问题。

我需要从一个列表中找到所有可能的对，所以我试图定义规则 select_pairs(X,Y,_,Z)。

以下是我在运行给定查询时希望看到的内容。

查询：select_pairs(X,Y,[1,2,3],Z)。返回以下内容：

```
X = 1, Y = 2, Zs = [3] ;
X = 1, Y = 3, Zs = [2] ;
X = 2, Y = 1, Zs = [3] ;
X = 2, Y = 3, Zs = [1] ;
X = 3, Y = 1, Zs = [2] ;
X = 3, Y = 2, Zs = [3] 
```

AND 查询 select_pairs(1,2,Xs,[3])。返回以下内容：

```
Xs = [1, 2, 3] ;
Xs = [2, 1, 3] ;
Xs = [1, 3, 2] ;
Xs = [2, 3, 1] ;
Xs = [3, 1, 2] ;
Xs = [3, 2, 1] ; 
```

截至目前，我只能从第一个查询中获得第一个结果来显示，仅此而已。我解决这个问题的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:49:56.580

你的 Prolog 应该带有[select](http://www.swi-prolog.org/pldoc/doc_for?object=select/3) /3，这是一个内置函数，它的功能与它的名字所暗示的完全一样：

```
?- select(X,[1,2,3],R).
X = 1,
R = [2, 3] ;
X = 2,
R = [1, 3] ;
X = 3,
R = [1, 2] ;
false. 
```

它也可以“向后”工作

```
?- select(1,R,[2,3]).
R = [1, 2, 3] ;
R = [2, 1, 3] ;
R = [2, 3, 1] ;
false. 
```

然后，要获得一个有效的 select_pairs/4，您可以组合 2 个 select/3。

# node.js - 是否可以在 mongoosejs 模式中填充自引用？

> ID：16028942
> 
> 赞同：5
> 
> 时间：2013-04-16T04:43:11.637
> 
> 标签：node.js, mongodb, schema, mongoose

我有一个猫鼬模型模式，我正在尝试为一些预先存在的 mongodb 文档构建它。现有的 mongo 文档具有对同一集合的自引用。我试图创建一个表示这种关系的模式，然后尝试使用[populate 方法](http://mongoosejs.com/docs/populate.html)。架构如下所示（为简洁起见，删除了一些属性）：

```
var fileSchema = new Schema({
    _id: { type: String },
    pcap: {
        files: [{ type: Schema.Types.ObjectId, ref: 'Files' }]
    }
});

var file = artifactConn.model('Files', fileSchema, 'info'); 
```

然后我使用上面的模型进行查询，然后像这样填充：

```
models.file.findById("91320684-9a1a-4f2a-a03f-63a7a208ec9b")
.populate('pcap.files') // have also tried just 'files' w/ the same result
.exec(function (err, file) {
    if (!err) {
        console.log(file);
    } else {
        console.log(err);
    }
}); 
```

这导致了这个

```
{ _id: '91320684-9a1a-4f2a-a03f-63a7a208ec9b',
  pcap: 
   { files: [] }
} 
```

如果我在 mongohub 中检查我的文档，它看起来像这样

```
{ "_id" : "91320684-9a1a-4f2a-a03f-63a7a208ec9b",
  "pcap" : {
    "files" : [ 
      { "_id" : "e4eed129-b4aa-46fc-8df2-3f3f92e6fe53" }, 
      { "_id" : "8c0ecb98-452e-475d-a521-feba5c3d1426" }, 
      { "_id" : "4b87c467-f396-4bcf-a7b0-8419e8441ec0" } ] } } 
```

我对填充的调用做错了吗？这是我设置架构的方式吗？它是存储数据的方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:04:47.317

您的架构不正确。您拥有的架构将匹配这样的集合：

```
{ "_id" : "91320684-9a1a-4f2a-a03f-63a7a208ec9b",
  "pcap" : {
    "files" : [ 
      { ObjectId("e4eed129-b4aa-46fc-8df2-3f3f92e6fe53") }, 
      { ObjectId("8c0ecb98-452e-475d-a521-feba5c3d1426") }, 
      { ObjectId("4b87c467-f396-4bcf-a7b0-8419e8441ec0") } ] } } 
```

架构应该是：

```
var fileSchema = new Schema({
    _id: { type: String },
    pcap: {
        files: [{ 
            _id: { type: String, ref: 'Files' }
        }]
    } }); 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T01:30:53.793

架构看起来不错。以相同的方式存储数据，你应该很好：例如

```
{ "_id" : "91320684-9a1a-4f2a-a03f63a7a208ec9b",
  "pcap" : {
  "files" : [ ObjectId("e4eed129-b4aa-46fc-8df2-3f3f92e6fe53"), ObjectId("8c0ecb98-452e-475d-a521-feba5c3d1426"), ObjectId("4b87c467-f396-4bcf-a7b0-8419e8441ec0")] 
  } 
} 
```

然后

```
Model.find(..).populate('pcap.files').exec(..) 
```

# jquery - 是什么导致我的 Jquery Accordion 内部出现这个白框？

> ID：16028943
> 
> 赞同：1
> 
> 时间：2013-04-16T04:43:11.723
> 
> 标签：jquery, accordion

所以，我已经完成了一个非常基本的 Jquery Accordion，但是对于我的生活，我无法找出是什么导致了我的手风琴内容中出现这个白框。

我将在此处发布我的 JSFiddle 链接，以便于访问我的代码。

[http://jsfiddle.net/bQ5Gd/1/](http://jsfiddle.net/bQ5Gd/1/)

我相信你们中的一个人会在几秒钟内完成它，我只是 JQUERY 的初学者。

谢谢！

**HTML**

```
<div id="accordion">

<h3>This is a test<h3>
    <div>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed libero metus, aliquet vel euismod id, mattis sed quam. Nulla interdum leo adipiscing enim commodo hendrerit vel vitae lectus. Vivamus vehicula orci ac leo luctus ac egestas purus eleifend. Vivamus ac mauris risus, quis tempor massa. .</p>
    </div>
</div> <b>This text moves down with ACCORDION</b> 
```

**Javascript**

```
 $(function () {
      $("#accordion").accordion({
          event: "click",
          active: false,
          collapsible: true,
          autoHeight: false

      });
  }); 
```

**CSS**

```
#accordion {

    width: 400px;

}

#accordion .ui-accordion-content > * {

    margin: 0px;

}

#accordion .ui-accordion-content {

    width: 100%;

    background-color: #777;

    color: #000;

    border: none;

    font-size: 10pt;

    line-height: 15pt;

}

#accordion .ui-accordion-content a {

    color: #777;

}

#accordion .ui-accordion-header {

    background-color: #ccc;

    margin-left: auto;

    margin-right: auto;

    border: #fff;

}

#accordion .ui-accordion-header {

    background-color: #fff;

    background-image: -moz-linear-gradient(top, #fff 0%, #fff 100%);

    /* FF3.6+ */

    background-image: -webkit-gradient(linear, left top, left bottombottom, color-stop(0%, #fff), color-stop(100%, #fff));

    /* Chrome,Safari4+ */

    background-image: -webkit-linear-gradient(top, #fff 0%, #fff 100%);

    /* Chrome10+,Safari5.1+ */

    background-image: -o-linear-gradient(top, #fff 0%, #fff 100%);

    /* Opera 11.10+ */

    background-image: -ms-linear-gradient(top, #fff 0%, #fff 100%);

    /* IE10+ */

    background-image: linear-gradient(to bottombottom, #fff 0%, #fff 100%);

    /* W3C */

    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fa9300', endColorstr='#dc621e', GradientType=0);

    /* IE6-9 */ 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:46:26.690

在您选择的浏览器中使用检查工具，您将能够跟踪 CSS 属性。

这通常是 CSS 调试的完成方式。

```
.ui-widget-content {
    border: 1px solid rgb(170, 170, 170);
    background: url("images/ui-bg_flat_75_ffffff_40x100.png") repeat-x scroll 50% 50% rgb(255, 255, 255);
    color: rgb(34, 34, 34);
} 
```

这似乎导致了您的问题：

```
background: url("images/ui-bg_flat_75_ffffff_40x100.png") repeat-x scroll 50% 50% rgb(255, 255, 255); 
```

但更少的图像不可用：

```
background: rgb(255, 255, 255); 
```

强制您的浏览器将背景颜色解释为白色，这是 CSS`background`属性的可接受参数。

# android - IBM Worklight 5.0.6 - 如何在 Android 环境中添加启动画面？

> ID：16028944
> 
> 赞同：0
> 
> 时间：2013-04-16T04:43:20.793
> 
> 标签：android, splash-screen, ibm-mobilefirst

我在尝试在 Android 中添加启动画面时遇到问题。
下面是我使用的代码

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.bindBrowser(appView);
    super.loadUrl(getWebMainFilePath(), 5000);
} 
```

我看到了启动图像，但几分钟后我得到一个空白屏幕并且应用程序崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T05:15:57.457

使用 Worklight 时，您可以在 onWLInitCompleted 方法中显示启动画面，并将 onCreate 方法保留为默认值。
下面是 Nexus 4、Andriod 4.2.2 上的代码测试。

```
@Override
public void onWLInitCompleted(Bundle savedInstanceState) {
    // set splash screen image
    super.setIntegerProperty("splashscreen", R.drawable.logo_image);
    // Set skin name to skip load skinLoader.html if you have no customized skin.
    // This will fix the splash screen flicker on some Android devices when the App first time running.
    WLUtils.writeWLPref(getContext(), "wlSkinName", "default");
    WLUtils.writeWLPref(getContext(), "exitOnSkinLoader", "true");
    // show splash screen 3 seconds
    super.loadUrl(getWebMainFilePath(), 3000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:35:24.757

我做你在 中所做的`onCreate`，但像这样加载 URL：

```
public void onWLInitCompleted(Bundle savedInstanceState){
    super.loadUrl(getWebMainFilePath(), 5000);
} 
```

为我工作（在 Nexus 7、Android 4.2.2 上测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T05:00:42.893

我不知道它是否会帮助你，但只是尝试使用这个代码......

```
setContentView(R.layout.splashscreen);
    Handler handler = new Handler();
    handler.postDelayed(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            finish();
            Intent menu = new Intent(getBaseContext(), MainMenu.class);
            startActivity(menu);
        }
    }, 3000); 
```

希望它有效..

# java - Java 连接池

> ID：16028947
> 
> 赞同：5
> 
> 时间：2013-04-16T04:43:40.857
> 
> 标签：java, database, jdbc, connection-pooling

我搜索了连接池并阅读了它。如果我理解正确的话，连接池就像打开连接的集合。如果建立或创建了连接，则应将其添加到连接池中，如果该连接已关闭，则应将其从连接池中删除；当它打开时，我可以一次又一次地使用它。

在阅读这些关于连接池的教程和解释时，我有一些问题：

1.  连接池只能在某台计算机上使用吗？像ComputerA 不能与ComputerB 共享它的连接池吗？

2.  应该`connection.close()`放在哪里？

仅在选择/加载记录时使用连接是否正确？在我得到返回的记录/数据后，我在`finally`语句中关闭了连接。与添加、编辑和删除记录相同。在处理过程中，我放置了一个进度条，因此用户必须等待它完成并再次执行某些过程，这意味着我一次只会打开一个连接。

感谢您的解释。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T04:53:01.490

注意：我假设我们正在谈论[`java.sql.Connection`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html)界面。

> 连接池只能在某台计算机上使用吗？像ComputerA 不能与ComputerB 共享它的连接池吗？

正在运行的应用程序和数据库之间存在连接。自然，两台不同的机器不能共享同一个正在运行的应用程序，因此它们不能共享与数据库的连接。

> 应该`connection.close()`放在哪里？

您应该始终确保在使用实例后调用`close()`它`Connection`（通常在`finally`块中）。如果正在使用池，这实际上会将连接返回到后台池。参考：[关闭池中的 JDBC 连接](https://stackoverflow.com/questions/4938517/closing-jdbc-connections-in-pool)

> 仅在选择/加载记录时使用连接是否正确？在我得到返回的记录/数据后，我在`finally`语句中关闭了连接。

对，那是正确的。您不想手动挂起引用 - 使用它来执行 SQL/DML，然后通过调用块将`Connection`其检回池中，就像您正在做的那样。`close()``finally`

# javascript - 调整窗口大小时重新调整大小的 Javascript/Jquery 旋转图像

> ID：16028951
> 
> 赞同：0
> 
> 时间：2013-04-16T04:44:08.923
> 
> 标签：javascript, jquery

我无法让它工作，请帮助！. 一团糟。我想要做的是，让这个图像在几秒钟内模糊并模糊一个新的，如果窗口大小大于定义的大小，它将使用更大的图像。它还需要检查窗口是否已重新调整大小，以便我可以随时更改图像。所以我需要这样的东西：

```
$(window).resize(function(){
change size
}); 
```

这是我遇到麻烦的主要代码：

```
$(document).ready(function() {

var index = 1;

function rotateImage()
{
  $('.dp1').fadeOut('slow', function()
  {
if($(window).width() > 1312 ) {
    $('.dp1').css({'background-image' : 'url(../img/display_banner' + index + '.jpg)'});
}
else {
    $('.dp1').css({'background-image' : 'url(../img/display_banner' + index + '_big.jpg)'});    
}

    $(this).fadeIn('slow', function()
    {
      if (index == images.length-1)
      {
        index = 0;
      }
      else
      {
        index++;
      }
    });
  });
}

$(document).ready(function()
{
  setInterval (rotateImage, 4000);
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:57:25.167

首先，您只需要一种`.ready()`方法。:)

为了解决您的问题，您可以利用`.resize()`计算窗口宽度。只需从包含宽度的变量开始，然后在调整大小时重新计算。例如：

```
$(document).ready(function () {
  var index = 1,
      width = $(window).width(); // SET THE WIDTH ON DOCUMENT READY

  function rotateImage () {
    //...
    if(width > 1312){ // USE THE "width" variable here in this comparison
    //...
  }

  //SET THE "width" variable on window resize
  $(window).resize(function(){
    width = $(this).width();
    //... RESIZE OR CHANGE OUT IMAGES HERE...
  });
}); 
```

# c# - OpenGL片段着色器指令太多

> ID：16028954
> 
> 赞同：1
> 
> 时间：2013-04-16T04:44:25.947
> 
> 标签：c#, opengl, glsl, shader, fragment-shader

我正在用 C# 和 OpenTK 编写关卡编辑器，并想看看更复杂的着色器是否可以正常工作。所以我在这里抓住了这个我的工艺着色器[https://www.shadertoy.com/view/MdlGz4](https://www.shadertoy.com/view/MdlGz4)。

但我无法让它工作，我不断收到这个错误：

```
Failed to link shader program!
Fragment info
-------------
Internal error: assembly compile error for fragment shader at offset 392911:
-- error message --
line 16405, column 1:  error: too many instructions
-- internal assembly text --
!!NVfp5.0
OPTION NV_bindless_texture;
OPTION NV_shader_atomic_float;
# cgc version 3.1.0001, build date Feb  9 2013
# command line args: 
#vendor NVIDIA Corporation
#version 3.1.0.1
#profile gp5fp 
```

shadertoy 版本在我的浏览器中运行良好。所以我知道我的硬件（GTX 680）可以处理它。我在片段着色器中使用#version 400，希望更高版本允许更多指令。但这也无济于事。所以我的问题是，我如何加载/编译这么长的片段着色器？

这是我正在尝试运行的实际着色器：

**顶点：**

```
#version 400

uniform mat4 camera;
uniform mat4 model;
in vec3 in_vertex;
in vec4 in_color;
in vec2 in_uv;
out vec2 frag_TexCoord;
out vec4 frag_Color;

void main()
{
    gl_Position = camera * model * vec4(in_vertex, 1);
    frag_TexCoord = in_uv;
    frag_Color = in_color;
} 
```

**分段：**

```
#version 400

uniform vec2 iResolution;
uniform float iGlobalTime;
in vec4 frag_Color;
in vec2 frag_TexCoord;
out vec4 final_color;

// Created by Reinder Nijhoff 2013
//
// port of javascript minecraft: http://jsfiddle.net/uzMPU/
// original code by Markus Persson: https://twitter.com/notch/status/275331530040160256

float hash( float n ) {
    return fract(sin(n)*43758.5453);
}

// port of minecraft

bool getMaterialColor( int i, vec2 coord, out vec3 color ) {
    // 16x16 tex
    vec2 uv = floor( coord );

    float n = uv.x + uv.y*347.0 + 4321.0 * float(i);
    float h = hash(n);

    float br = 1\. - h * (96./255.
                        );
    color = vec3( 150./255., 108./255.,  74./255.); // 0x966C4A;

    if (i == 4) {
        color = vec3( 127./255., 127./255., 127./255.); // 0x7F7F7F;
    }

    float xm1 = mod((uv.x * uv.x * 3\. + uv.x * 81.) / 4., 4.);

    if (i == 1) {
        if( uv.y < (xm1 + 18.)) {
            color = vec3( 106./255., 170./255.,  64./255.); // 0x6AAA40;
        } else if (uv.y < (xm1 + 19.)) {
            br = br * (2\. / 3.);
        }
    }

    if (i == 7) {
        color = vec3( 103./255., 82./255.,  49./255.); // 0x675231;
        if (uv.x > 0\. && uv.x < 15.
            && ((uv.y > 0\. && uv.y < 15.) || (uv.y > 32\. && uv.y < 47.))) {
            color = vec3( 188./255., 152./255.,  98./255.); // 0xBC9862;
            float xd = (uv.x - 7.);
            float yd = (mod(uv.y, 16.) - 7.);
            if (xd < 0.)
                xd = 1\. - xd;
            if (yd < 0.)
                yd = 1\. - yd;
            if (yd > xd)
                xd = yd;

            br = 1\. - (h * (32./255.) + mod(xd, 4.) * (32./255.));
        } else if ( h < 0.5 ) {
            br = br * (1.5 - mod(uv.x, 2.));
        }
    }

    if (i == 5) {
        color = vec3( 181./255.,  58./255.,  21./255.); // 0xB53A15;
        if ( mod(uv.x + (floor(uv.y / 4.) * 5.), 8.) == 0\. || mod( uv.y, 4.) == 0.) {
            color = vec3( 188./255., 175./255., 165./255.); // 0xBCAFA5;
        }
    }
    if (i == 9) {
        color = vec3(  64./255.,  64./255., 255./255.); // 0x4040ff;
    }

    float brr = br;
    if (uv.y >= 32.)
        brr /= 2.;

    if (i == 8) {
        color = vec3(  80./255., 217./255.,  55./255.); // 0x50D937;
        if ( h < 0.5) {
            return false;
        }
    }

    color *= brr;

    return true;
}

int getMap( vec3 pos ) {    
    vec3 posf = floor( (pos - vec3(32.))  );

    float n = posf.x + posf.y*517.0 + 1313.0*posf.z;
    float h = hash(n);

    if( h > sqrt( sqrt( dot( posf.yz, posf.yz )*0.16 ) ) - 0.8  ) {
        return 0;
    }   

    return int( hash( n * 465.233 ) * 16\. );
}

vec3 renderMinecraft( vec2 uv ) {
    float xRot = sin( iGlobalTime*0.5 ) * 0.4 + (3.1415 / 2.);
    float yRot = cos( iGlobalTime*0.5 ) * 0.4;
    float yCos = cos(yRot);
    float ySin = sin(yRot);
    float xCos = cos(xRot);
    float xSin = sin(xRot);

    vec3 opos = vec3( 32.5 + iGlobalTime * 6.4, 32.5, 32.5 );

    float gggxd = (uv.x - 0.5) * (iResolution.x / iResolution.y );
    float ggyd = (1.-uv.y - 0.5);
    float ggzd = 1.;

    float gggzd = ggzd * yCos + ggyd * ySin;

    vec3 _posd = vec3( gggxd * xCos + gggzd * xSin,
                       ggyd * yCos - ggzd * ySin,
                       gggzd * xCos - gggxd * xSin );

    vec3 col = vec3( 0\. );
    float br = 1.;
    vec3 bdist = vec3( 255\. - 100., 255\. -   0., 255\. -  50\.  );
    float ddist = 0.;

    float closest = 32.;

    for ( int d = 0; d < 3; d++) {
        float dimLength = _posd[d];

        float ll = abs( 1\. / dimLength );
        vec3 posd = _posd * ll;;

        float initial = fract( opos[d] );
        if (dimLength > 0.) initial = 1\. - initial;

        float dist = ll * initial;

        vec3 pos = opos + posd * initial;

        if (dimLength < 0.) {
            pos[d] -= 1.;
        }

        for (int i=0; i<30; i++) {
            if( dist > closest )continue;

            //int tex = getMap( mod( pos, 64\. ) );
            int tex = getMap( pos );

            if (tex > 0) {
                vec2 texcoord;
                texcoord.x = mod(((pos.x + pos.z) * 16.), 16.);
                texcoord.y = mod((pos.y * 16.), 16.) + 16.;
                if (d == 1) {
                    texcoord.x = mod(pos.x * 16., 16.);
                    texcoord.y = mod(pos.z * 16., 16.);
                    if (posd.y < 0.)
                        texcoord.y += 32.;
                }

                if ( getMaterialColor( tex, texcoord, col ) ) {
                    ddist = 1\. - (dist / 32.);
                    br = bdist[d];
                    closest = dist;
                }
            }
            pos += posd;
            dist += ll;
        }
    }

    return col * ddist * (br/255.);
}

void main()
{
    vec2 uv = frag_TexCoord.xy / iResolution.xy;
    final_color = vec4( renderMinecraft( uv ) ,1.0);
} 
```

**澄清错误发生在哪里：** 编译顶点和片段着色器的前两个步骤工作正常。它是返回 0 的链接 (GL.GetProgram())。对 GL.GetProgramInfo 的调用返回上述错误并以汇编代码列出程序（# 19337 指令，8 个 R-regs）。所以它确实有这么多行。

```
_vertexShader = GL.CreateShader(ShaderType.VertexShader);
GL.ShaderSource(_vertexShader, vertexProgram);
GL.CompileShader(_vertexShader);
GL.GetShader(_vertexShader, ShaderParameter.CompileStatus, out result);
if (result == 0)
{
    System.Diagnostics.Debug.WriteLine(GL.GetString(StringName.ShadingLanguageVersion));
    System.Diagnostics.Debug.WriteLine(GL.GetShaderInfoLog(_vertexShader));
}

//Create Fragment Shader
_fragShader = GL.CreateShader(ShaderType.FragmentShader);
GL.ShaderSource(_fragShader, fragmentProgram);
GL.CompileShader(_fragShader);
GL.GetShader(_fragShader, ShaderParameter.CompileStatus, out result);
if (result == 0)
{
    System.Diagnostics.Debug.WriteLine(GL.GetString(StringName.ShadingLanguageVersion));
    System.Diagnostics.Debug.WriteLine(GL.GetShaderInfoLog(_fragShader));
}

//Link to program
_shader = GL.CreateProgram();
GL.AttachShader(_shader, _vertexShader);
GL.AttachShader(_shader, _fragShader);
GL.LinkProgram(_shader);
GL.GetProgram(_shader, ProgramParameter.LinkStatus, out result);
if (result == 0)
{
    System.Diagnostics.Debug.WriteLine("Failed to link shader program!");
    System.Diagnostics.Debug.WriteLine(GL.GetProgramInfoLog(_shader));
    GL.DeleteProgram(_shader);
} 
```

# c++ - OpenGL在角落绘制轴

> ID：16028958
> 
> 赞同：1
> 
> 时间：2013-04-16T04:44:55.433
> 
> 标签：c++, qt, opengl

我一直在寻找如何在我的 OpenGL 场景中绘制指标轴。该项目嵌套在 Qt OpenGL 小部件中，但我认为问题与 Qt 无关。

我在这里和多年前的论坛上发现建议存储视口和数据，为底角加载新的，应用我的旋转和绘制，然后恢复矩阵。这似乎对我最有利，但我猜我仍然缺少我的 OpenGL 知识中的一些关键信息。

现在我只是让它从 -x 到 x 画一条红线，所以我希望在屏幕的左下角有一个红色方块：

```
void GLWidget::drawAxis()
{
    float tempPro[16];
    float tempMod[16];
    glGetFloatv(GL_PROJECTION_MATRIX, &tempPro[0]);
    glGetFloatv(GL_MODELVIEW_MATRIX, &tempMod[0]);

    glViewport(0, 0, 50, 50);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0f, 1.0f, 0.1f, 20.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glPushMatrix();
    glBegin(GL_LINES);
        glColor3f(1.0f, 0.0f, 0.0f);
        glEnable( GL_LINE_SMOOTH );
        glLineWidth( 1.5 );
        glVertex3f(-1000, 0, 0);
        glVertex3f(1000, 0, 0);
    glEnd();
    glPopMatrix();

    glViewport(0, 0, 960, 600);
    glMatrixMode(GL_PROJECTION);
    glLoadMatrixf(tempPro);
    gluPerspective(45.0f, (960.0/600.0), 0.1f, 400.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadMatrixf(tempMod);
} 
```

相反，我什么也没得到，只是一个大的空场景，我不确定如何进行。我的paintGL本质上是：

```
void GLWidget::paintGL()
{    
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    Camera.Render();

    glTranslatef(0.0, 0.0, 0.0);

    glBegin(GL_QUADS);
        glColor3f(1.0f, 1.0f, 1.0f);
        glVertex3f(50.0f, 0.0f, 50.0f);
        glVertex3f(50.0f, 0.0f, -50.0f);
        glVertex3f(-50.0f, 0.0f, -50.0f);
        glVertex3f(-50.0f, 0.0f, 50.0f);
    glEnd();

    drawAxis(); 
```

}

不调用 draw-axis 函数仍然给了我我的飞机，有了它，我得到了一个大的空白场景。我在实现 drawAxis 的过程中是否遗漏了一些东西？我应该为该功能设置另一个相机或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:08:38.077

*   您可以使用 glPushMatrix() 和 glPopMatrix() 来保存和恢复 Projection 和 ModelView 矩阵的状态。
*   您没有将 ModelView 矩阵设置为任何有用的东西。

尝试这样的事情：

```
void GLWidget::drawAxis()
{
    glViewport(0, 0, 50, 50);

    glMatrixMode(GL_PROJECTION);
    glPushMatrix();
    gluPerspective(45.0f, 1.0f, 0.1f, 20.0f);

    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    //This really has to come from your camera....
    gluLookAt(10.0f,10.0f,10.0f, 0.0f,0.0f,0.0f, 0.0f,0.1f,0.0f);

    glColor3f(1.0f, 0.0f, 0.0f);
    glEnable( GL_LINE_SMOOTH );
    glLineWidth( 1.5 );
    glBegin(GL_LINES);
        glVertex3f(-1000, 0, 0);
        glVertex3f(1000, 0, 0);
    glEnd();

    //Restore View
    glMatrixMode(GL_MODELVIEW);
    glPopMatrix();
    glMatrixMode(GL_PROJECTION);
    glPopMatrix();
    glViewport(0, 0, 960, 600);
} 
```

# linq - Dynamic Linq GroupBy Select 无法正常工作

> ID：16028964
> 
> 赞同：2
> 
> 时间：2013-04-16T04:45:29.293
> 
> 标签：linq, select, dynamic, group-by

请指导，我可以使用 Dynamic Group by，但是在选择非聚合字段时，我收到以下错误

类型“IGrouping`2”中不存在属性或字段“名称”

```
var result311 = (IQueryable)gle1.temptable.Where(a => a.IsAllowed == false && a.Code == "r01");

            var result = result311.GroupBy("new (name, FirstAmountOriginal, SecondAccounting)", "it")
                .Select("new (it.name,Sum(FirstAmountOriginal) as FirstAmountOriginalx, Sum(SecondAccounting) as SecondAccountingx)"); 
```

请指导

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:19:59.997

首先，您不应按要聚合的字段进行分组，其次，分组会创建一个`Key`由您分组的字段组成的分组（在本例中为一个），因此您必须在之后解决此键：

```
var result = result311.GroupBy("new(name)", "it")
    .Select(@"new (it.Key.name,
                   Sum(FirstAmountOriginal) as FirstAmountOriginalx, 
                   Sum(SecondAccounting) as SecondAccountingx)"); 
```

# java - 套接字关闭问题

> ID：16028970
> 
> 赞同：0
> 
> 时间：2013-04-16T04:46:00.563
> 
> 标签：java, sockets

我有一个使用套接字传输文件的服务器和客户端连接，但是如果我希望能够在用户 JButton 操作时从客户端向服务器发送字符串，它会引发套接字关闭错误（因为我在Sender() 构造函数）。问题是，如果我不使用 dos.close()，客户端程序将不会运行/初始化 UI 框架。我究竟做错了什么？我需要能够在程序第一次运行时发送文件，然后再发送数据。

发件人：

```
public Sender(Socket socket) {

    List<File> files = new ArrayList<File>();
    files.add(new File(Directory.getDataPath("default.docx")));
    files.add(new File(Directory.getDataPath("database.db")));

    try {
        BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream());
        DataOutputStream dos = new DataOutputStream(bos);
        dos.writeInt(files.size());
        for (File file : files) {
            dos.writeLong(file.length());
            dos.writeUTF(file.getName());
            FileInputStream fis = new FileInputStream(file);
            BufferedInputStream bis = new BufferedInputStream(fis);
            int theByte = 0;
            while ((theByte = bis.read()) != -1) { 
                bos.write(theByte);
            }
            bis.close();
        }
        dos.close(); // If this is disabled, the program won't work.
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

下载器：

```
public static byte[] document;

public Downloader(Socket socket) {
    try {
        BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());
        DataInputStream dis = new DataInputStream(bis);
        int filesCount = dis.readInt();
        for (int i = 0; i < filesCount; i++) {
            long size = dis.readLong();
            String fileName = dis.readUTF();
            if (fileName.equals("database.db")) {
                List<String> data = new ArrayList<String>();
                BufferedReader reader = new BufferedReader(new InputStreamReader(bis));
                String line;
                while ((line = reader.readLine()) != null) {
                    if (line.trim().length() > 0) {
                        data.add(line);
                    }
                }
                reader.close();
                parse(data);
            } else if (fileName.equals("default.docx")) {
                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                for (int x = 0; x < size; x++) {
                    bos.write(bis.read());
                }
                bos.close();
                document = bos.toByteArray();
            } 
        }
        //dis.close();
        } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:48:23.223

您在客户端中的第一个接收循环在 EOS 处终止，这只发生在您关闭发送方中的套接字时，您不想这样做。在每种情况下，您都在文件之前发送长度，因此在两种情况下接收代码都应该如下所示：

```
long total = 0;
while ((total < size && (count = in.read(buffer, 0, size-total > buffer.length ? buffer.length : (int)(size-total))) > 0)
{
    total += count;
    out.write(buffer, 0, count);
}
out.close(); 
```

该循环从套接字输入流中准确读取字节并将其`size`写入.`OutputStream` `out``out``ByteArrayOutputStream`

# java - 透明的 JFrame 背景，但内容可见

> ID：16028971
> 
> 赞同：0
> 
> 时间：2013-04-16T04:46:09.323
> 
> 标签：java, swing, transparency, opacity, translucency

我正在尝试使用 Java 制作一个桌面小部件，基本上就是它的样子，一个看起来像 HTC 安卓手机的 Sense Clock Widget 的时钟。

一切都设置好了，时钟工作，我有一个背景和时钟小时/分钟图像。我唯一需要的是使 JFrame 背景透明。JFrame 是未装饰的，可以通过其内容移动，就像任何小部件应该执行的操作一样。

我需要弄清楚如何使丑陋的 JFrame 背景从灰色变为透明，但保持内容不透明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-05T21:44:12.043

`frame.setBackground(new Color(0,0,0,0));`

框架是透明的，但内容是可见的。

[![结果图片](https://i.stack.imgur.com/2xZVD.jpg)](https://i.stack.imgur.com/2xZVD.jpg)

# objective-c - 如何在目标 c 中从控制台输入整数的 NSArray？

> ID：16028972
> 
> 赞同：-2
> 
> 时间：2013-04-16T04:46:12.680
> 
> 标签：objective-c, user-input

我正在尝试使用 Objective-c 解决一些基本算法和数据结构问题，但我发现它有点难。我需要从控制台输入一个整数数组，最好的方法是什么？

请帮助指导我访问任何链接或文档。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:41:09.710

**编辑：**计划如下：

1.  从控制台读取并将输入保存为 c 字符串。
2.  将此 c-String 转换为我们可以调用方法的 NSString `componentsSeparatedByString:`。
3.  此方法返回单个数字的 NSStrings 的 NSArray。
4.  之后，我们遍历 NSArray，为每个字符串创建一个包含字符串内容的 NSNumber，并将该 NSNumber 存储在 NSMutableArray 中。
5.  我们 NSLog() NSArray 或者你可以对它的组件做任何你想做的事情。

所以这里很有趣：

```
NSMutableArray *numbersAsNumbersArray = [[NSMutableArray alloc] initWithCapacity:0];
char input[1000] = {};
scanf("%s", input);
NSString *inputString = [NSString stringWithCString:input encoding:NSUTF8StringEncoding];
NSArray *numbersAsStringsArray = [inputString componentsSeparatedByString:@","];
for (NSString *aNumberAsString in numbersAsStringsArray) {
    NSNumber *aNumber = @([aNumberAsString integerValue]);
    [numbersAsNumbersArray addObject:aNumber];
}
NSLog(@"%@", numbersAsNumbersArray); 
```

*输入：* `3,5,6,7`

*输出：* `(3,5,6,7)`

注意：大括号表示里面的数字存储在一个 NSArray 中

最后但并非最不重要的东西要阅读;）

[NSArray 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)及其可变子类[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

[NSString 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)，特别是[我们使用的方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-componentsSeparatedByString_)

**编辑 2：**正如[Martin R](https://stackoverflow.com/users/1187415/martin-r)的评论中提到的（谢谢！）这里是上面代码的简短版本：

```
NSMutableArray *numbersAsNumbersArray = [[NSMutableArray alloc] initWithCapacity:0];
char input[1000] = {};
scanf("%s", input);
NSArray *numbersAsStringsArray = [[NSString stringWithCString:input encoding:NSUTF8StringEncoding] componentsSeparatedByString:@","];
numbersAsNumbersArray = [numbersAsStringsArray valueForKey:@"integerValue"];
NSLog(@"%@", numbersAsNumbersArray); 
```

# excel - 公式中的冗余

> ID：16028981
> 
> 赞同：0
> 
> 时间：2013-04-16T04:47:00.770
> 
> 标签：excel, excel-2007, excel-formula, spreadsheet, formula

我正在调试一个大型电子表格，我遇到了以下公式：

```
=IFERROR(IF($B37="CMD Account Team",
            VLOOKUP(CONCATENATE(B37,
                                G37,
                                F37),
                    lists!$B:$C,
                    2,
                    FALSE),
         IF('INPUT - Project Costs'!B37="ITS",
            VLOOKUP(CONCATENATE('INPUT - Project Costs'!B37,
                                'INPUT - Project Costs'!G37,
                                'INPUT - Project Costs'!F37),
                    'ITS Rates'!B:F, 
                    5,
                    FALSE)*7.5,
            0)),
         0) 
```

有趣的部分是：

```
 VLOOKUP(CONCATENATE('INPUT - Project Costs'!B37,
                                'INPUT - Project Costs'!G37,
                                'INPUT - Project Costs'!F37), 
```

考虑到这个公式已经位于“输入 - 项目成本”表上，为什么原作者在引用单元格时觉得需要如此明确？对我来说**真正**令人困惑的是，在公式的前面，作者做了完全相同的事情，但*省略了*明确的工作表参考：

```
 VLOOKUP(CONCATENATE(B37,
                                G37,
                                F37), 
```

我是擅长巫术的新手，很想听听有更多经验的人的意见，并且可以提出可能的原因来解释为什么这个公式是这样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:53:18.313

这通常发生在您开始编写公式时，单击另一个选项卡，然后单击原始选项卡。无论哪种方式都应该产生相同的结果。

# ruby-on-rails - RVM 1.0.1 安装和依赖项

> ID：16028982
> 
> 赞同：0
> 
> 时间：2013-04-16T04:47:03.700
> 
> 标签：ruby-on-rails, configuration, installation, rvm

我使用 RVM 1.0.1、Ruby 1.8.7 和 Rails 3.0.3 在 Ruby on Rails 中开发了一个 Web 应用程序。对于新安装，我们从[http://rvm.beginrescueend.com/releases/rvm-1.0.1.tar.gz获得 RVM 1.0.1](http://rvm.beginrescueend.com/releases/rvm-1.0.1.tar.gz.)

现在链接不可用。任何人都请告诉我在哪里可以获得 RVM 1.0.1 tar 文件包。还告诉我，如果我安装 RVM 的升级版本是否会有任何问题（如果 RVM 1.0.1 存在一些依赖项，可能会导致问题）。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:50:02.633

以下是来源：[https ://github.com/wayneeseguin/rvm/archive/1.0.1.tar.gz](https://github.com/wayneeseguin/rvm/archive/1.0.1.tar.gz)

它是一个来源，因此安装说明可能会有所不同。

您使用的是非常旧版本的 RVM，它在当时（3 年前）可用的旧系统上运行良好，但它不考虑今天可用的新系统，并且很可能无法在新系统上编译 ruby​​。

当前版本是`1.19.5`，可以使用以下方式安装：

```
\curl -#L https://get.rvm.io | bash -s stable --autolibs=enable 
```

您可以在此处阅读更多信息`autolibs`：[https ://rvm.io/rvm/autolibs](https://rvm.io/rvm/autolibs)

# forms - 如何在表单中设置标题元素的样式？

> ID：16028985
> 
> 赞同：0
> 
> 时间：2013-04-16T04:47:17.833
> 
> 标签：forms, css, attributes, title

我正在使用 jQuery 验证来确保我的表单正确提交。我正在尝试在我的表单中设置标题元素的样式，以便当用户没有正确填写表单时，弹出的文本是红色而不是黑色。我的HTML如下...

```
<form id="contact" method="post" action="E-mail-form.php" name="EmailFromMyWebsite">

                <label for="name">Name</label> <br>
                <input type="text" name="name" class="required" placeholder="Your Name" title=" (Your name is required)"> <br />

                <label for="email">E-mail</label> <br>
                <input type="email" name="email" class="required email" placeholder="Name@email.com" title=" (Your email is required)"> <br />

                <label for="message">Message/Comment</label> <br>
                <textarea name="message" class="required" placeholder="Leave a brief message" title=" (Please leave me a brief message)"></textarea> <br />

                <input type="submit" name="submit" id="submit" value="Send Message" />
        </form> 
```

在CSS中，我尝试了一些东西，例如

```
#contact[type="title"] {
    color: red;
}

#input[type="title"] {
    color: red;
}

title {
    color: red;
} 
```

我也尝试了#contact，它使整个表单变成红色。我只希望 title="" 是红色的。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:50:55.407

您不能在输入元素或任何元素上设置 title 属性的样式。看看[jQueryUI 工具提示](http://jqueryui.com/tooltip/)。这应该可以帮助您获得一些样式化的工具提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:36:35.373

如果您使用 jQuery 验证“label.error”将允许您设置错误消息的样式...

```
label.error { 
    color:red; 
    padding-left: 5px; 
} 
```

# javascript - 禁用鼠标点击操作进入浏览器的地址栏

> ID：16028986
> 
> 赞同：-2
> 
> 时间：2013-04-16T04:47:31.473
> 
> 标签：javascript, jquery, browser, address-bar

**现在在现代浏览器**中作为安全原因不支持**location=no**来隐藏地址栏。所以我在这里关注的是，**禁用所有鼠标操作**到**地址栏**。从而无法对**地址栏**进行以下操作。

*   没有右键
*   没有左键单击
*   没有选择

可以用javascript做吗？你能分享你的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:06:36.337

是否可以在 JavaScript NO. JavaScript 不能改变浏览器的工作方式。乙

如果您对实现这一目标非常感兴趣，那么我可以建议您两种方法。

1.  为什么不使用内联弹出窗口？
2.  您可以创建自己的浏览器，使用 flex html 查看器创建一个 adobe air 浏览器，然后您可以控制地址栏。

但是，我不知道您的实际要求，因此第二点可能与您的要求不一致。

# ms-access - VB6 ADO 命令以美国格式而不是英语插入日期

> ID：16028988
> 
> 赞同：1
> 
> 时间：2013-04-16T04:47:40.297
> 
> 标签：ms-access, vb6, ado, datetime2

我有一个 VB6 遗留程序，它一直在悄悄地将 Now() 日期转换为美国格式，即 2013 年 8 月 4 日作为 2013 年 8 月 4 日插入 Access 数据库，但 23/3/2013 很好。这种情况自 2002 年以来一直在发生，但直到现在还没有人注意到。大多数更新是在月底完成的。

如果我提取过程并在虚拟程序中运行它，它工作正常。但是在应用程序代码的某个地方，某些东西正在说服 ADO 尝试转换日期。

它在 ADO 命令中完成，日期设置为 DateTimeStamp 参数

```
eg
strSQL = "Insert into TSCDATA " _
                & " ( FID, FNAME, FPID, FCREATEDATE, FLNKEDTDATE, FSIZE)" _
                & " values ( ? , ? , ? , ? , ? , ? ) "
with mADOCmdInsert
    .Name = CMD_INSERT
    .CommandText = strSQL
    .CommandType = adCmdText
    .ActiveConnection = m_conn
    .Prepared = False
    .Parameters.Append .CreateParameter(prID, adInteger, adParamInput)
    .Parameters.Append .CreateParameter(prNAME, adChar, adParamInput, 16)
    .Parameters.Append .CreateParameter(prFPID, adInteger, adParamInput)
    .Parameters.Append .CreateParameter(prFCREATEDATE, adDBTimeStamp, adParamInput)
    .Parameters.Append .CreateParameter(prFLNKEDTDATE, adChar, adParamInput, 8)
    .Parameters.Append .CreateParameter(prFSIZE, adChar, adParamInput, 8)    
End With 
```

模块的其他地方：

```
dteNow = Now

With mADOCmdInsertScorpat
    .Parameters(prID).Value = lngId
    .Parameters(prNAME).Value = txtName
    .Parameters(prFPID).Value = VersionId
    .Parameters(prFCREATEDATE).Value = dteNow
    .Parameters(prFLNKEDTDATE).Value = ""
    .Parameters(prFSIZE).Value = txtSize

    .Execute lngRecsAffected
End With 
```

以前有没有人遇到过这种情况，现在为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:36:41.253

我未能使用问题中提供的代码重新创建您的问题。我试过了

*   Windows 控制面板中区域设置的各种组合：“英语（澳大利亚）”、“英语（加拿大）”、“英语（英国）”、“英语（美国）”，以及

*   OLEDB 和 ODBC 连接，以及

*   我什至将虚拟机中的系统时钟回溯到 4 月 2 日，看看这是否`Now()`奇怪。

在每种情况下，ADO 参数化查询都插入了正确的日期。

我的建议是在代码的其余部分中搜索将日期文字直接传递给 Jet 的流氓 INSERT 或 UPDATE 语句。我很确定，对于任何形式的陈述......

```
INSERT INTO TSCDATA (FCCREATEDATE) VALUES (#2/04/2013 6:43:19 AM#) 
```

...由以下内容（在澳大利亚）生产...

```
"INSERT INTO TSCDATA (FCCREATEDATE) VALUES (#" & CStr(Now) & "#)" 
```

...Jet***将始终***将日期解释为 2 月 4 日而不是 4 月 2 日，无论日期格式的区域设置如何。

# java - .POST 上的 COSM JSON 解析器错误

> ID：16028996
> 
> 赞同：1
> 
> 时间：2013-04-16T04:48:35.463
> 
> 标签：java, json, cosm

我正在使用 jpachube，并且在 creatDatastream 上遇到了 .POST 的问题。我收到 POST 错误 400，以及来自 COSM 调试工具的以下详细信息：

```
{"title":"JSON Parser Error","errors":"lexical error: invalid char in json text. <?   xmlversion=\"1.0\"encoding=\"U"} 
```

我来自 COSM 调试工具的 XML 请求正文如下：

```
<?xml version="1.0" encoding="UTF-8"?>
       <eeml xmlns="http://www.eeml.org/xsd/005"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="5" xsi:schemaLocation="http://www.eeml.org/xsd/005 http://www.eeml.org/xsd/005/005.xsd"><environment><data id="0">
       <tag>CPU</tag>
            <current_value>0.0</current_value>
        </data>
       </environment>
   </eeml> 
```

COSM 的 xml 请求正文的 API 文档如下：

```
<eeml xmlns="http://www.eeml.org/xsd/0.5.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-     instance" version="0.5.1" xsi:schemaLocation="http://www.eeml.org/xsd/0.5.1   http://www.eeml.org/xsd/0.5.1/0.5.1.xsd">
  <environment>
    <data id="23">
      <tag>apple</tag>
      <tag>jag</tag>
      <tag>tag</tag>
      <tag>lag</tag>
      <current_value>11</current_value>
      <max_value>211.0</max_value>
      <min_value>7.0</min_value>
    <unit type="conversionBasedUnits" symbol="symbol">label</unit>
  </data>
</environment> 
```

我发现的唯一区别是版本号，但我已经在代码中进行了切换并得到了同样的错误。

我认为 COSM API 的 v2 已设置，因此 xml 和 JSON 可以互换，但它将所有内容都转换为 JSON。

错误来自 Pachube.java 中的此方法调用

```
public boolean createDatastream(int feed, String s) throws PachubeException {
        HttpRequest hr = new HttpRequest("http://api.cosm.com/v2/feeds/"
                + feed + "/datastreams/");
        hr.setMethod(HttpMethod.POST);
        hr.addHeaderItem("X-PachubeApiKey", this.API_KEY);
        hr.setBody(s);
        HttpResponse g = this.client.send(hr);

        if (g.getHeaderItem("Status").equals("HTTP/1.1 201 Created")) {
            return true;
        } else {
            throw new PachubeException(g.getHeaderItem("Status"));
        }
    } 
```

任何输入表示赞赏。

第二天...

使用来自 bjpirt 的输入修改了 createDatastream 方法（非常感谢）。方法看起来像这样

```
public boolean createDatastream(int feed, String s) throws PachubeException {

        HttpRequest hr = new HttpRequest("http://api.cosm.com/v2/feeds/"
                + feed + "/datastreams.xml");
        hr.setMethod(HttpMethod.POST);
        hr.addHeaderItem("X-PachubeApiKey", this.API_KEY);
        hr.addHeaderItem("Content-Type:", "application/xml");
        hr.setBody(s);
        HttpResponse g = this.client.send(hr);

        if (g.getHeaderItem("Status").equals("HTTP/1.1 201 Created")) {
            return true;
        } else {
            Log.d("create data stream", "prob");
            throw new PachubeException(g.getHeaderItem("Status"));
        }
    } 
```

这会在 COSM 调试工具上为 .POST 引发以下错误（错误代码 422）：

```
<?xml version="1.0" encoding="UTF-8"?><errors><title>Unprocessable Entity</title>         <error>Stream ID has already been taken</error></errors> 
```

所以，很自然，我需要得到这个请求的标题。这是通过 Data.java 中的 toXMLWithWrapper 完成的

```
public String toXMLWithWrapper() {
    String ret = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<eeml xmlns=\"http://www.eeml.org/xsd/005\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" version=\"5\" xsi:schemaLocation=\"http://www.eeml.org/xsd/005 http://www.eeml.org/xsd/005/005.xsd\"><environment>";
    ret = ret + ">\n\t<title>" + "cosm app" + "</title>\n\t";//inserted this line to add title
    ret = ret + this.toXML() + "</environment></eeml>";
    return ret;
} 
```

请求正文看起来像（来自 COSM 调试工具）：

```
<?xml version="1.0" encoding="UTF-8"?>
<eeml xmlns="http://www.eeml.org/xsd/005" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="5" xsi:schemaLocation="http://www.eeml.org/xsd/005 http://www.eeml.org/xsd/005/005.xsd"><environment>
<title>cosm app</title>
<data id="0">
    <tag>CPU</tag>
    <current_value >0.0</current_value>
</data></environment></eeml> 
```

这以错误代码 500 的形式返回（哎哟！）

响应正文是

```
<?xml version="1.0" encoding="UTF-8"?><errors><title>Oops, something's broken</title>  <error>We've been unable to complete your request due to a problem with our server</error></errors> 
```

第三天

有人指出，xml 有问题（见下文）。我修正了错字，我又回到了 422 错误。因此，更仔细地查看响应正文，我认为数据流可能有问题。我删除了提要中的所有数据流，创建了一个新提要，我得到了一个非常棒的 HTTP:/1.1 201 - 很高兴，对吧？错了，在第一个 .POST 之后我什么也没得到。当我关闭应用程序然后重新打开时，我回到 422 错误并且相同的响应正文“流 ID 已被采用”。哎呀！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:55:43.967

看起来xml可能无效。

打开`<environment>`节点似乎关闭了两次`<environment>>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:12:24.663

422 可能是因为您正在尝试访问`POST`现有的提要。

要更新提要，您需要发送`PUT`请求。

请参阅[更新提要文档](http://cosm.com/docs/v2/feed/update.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:03:43.477

线索是系统看起来需要 json，但您正在向它提供 XML。v2 api 的默认值为 json，因此您需要确保在 URL 中包含 XML，例如：

```
https://api.cosm.com/v2/feeds/113/datastreams.json 
```

或者，您可以在请求上设置内容类型标头以表明这一点：

```
Content-Type: application/xml 
```