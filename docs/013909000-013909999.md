# StackOverflow 问答 13909000-13909999

# php - PHP 和 MySQL：动态多级菜单

> ID：13909002
> 
> 赞同：-2
> 
> 时间：2012-12-17T05:54:12.350
> 
> 标签：php, mysql, drop-down-menu, menu, dynamic-data

我用谷歌搜索了一些对我有用的东西（[http://wizardinternetsolutions.com/web-database-design/dynamic-multilevel-css-menu-php-mysql/](http://wizardinternetsolutions.com/web-database-design/dynamic-multilevel-css-menu-php-mysql/)）。一旦我让它工作，我计划对其进行一些修改并根据我的需要进行调整。-Ej。我想`label`用作`Primary Key`而不是随机数。

但是，我收到一个错误： **警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 23 行的 /home/content/81/10038181/html/_html/menu/menu-generator.php 中给出的布尔值**

有趣的是，当我运行查询时，它运行良好。

这是表结构（SQL）：

```
CREATE TABLE `menu` (
  `id` int(11) NOT NULL auto_increment,
  `label` varchar(50) NOT NULL default '',
  `link` varchar(100) NOT NULL default '#',
  `parent` int(11) NOT NULL default '0',
  `sort` int(11) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=248 DEFAULT CHARSET=latin1; 
```

![这是数据的模型](../Images/da609abd1f0aeddffb6b1f7a44d867ad.png)

PHP：

```
$dbc = new mysqli("localhost", "username", "password", "temp_database");
$dbn = "temp_database";
    function display_children($parent, $level) {
        $sql = "SELECT a.id, a.label, a.link, Deriv1.Count FROM `$dbn`.`menu` a  LEFT OUTER JOIN (SELECT `parent`, COUNT(`parent`) AS Count FROM `".$dbn."`.`menu` GROUP BY parent) Deriv1 ON a.id = Deriv1.parent WHERE a.parent=" . $parent . " ORDER BY `sort`";
        //echo $sql;  //For testing purposes
        $result = $dbc->query($sql);
        echo "<ul>\n";

        while ($row = $result->fetch_assoc() ) {
            if ($row['Count'] > 0) {
                echo "<li><a href='" . $row['link'] . "'>" . $row['label'] . "</a>";
                display_children($row['id'], $level + 1);
                echo "</li>";
                }
            elseif ($row['Count']==0) {
                echo "<li><a href='" . $row['link'] . "'>" . $row['label'] . "</a></li>";
                } 
            else;
        }
        echo "</ul>";
    }
    display_children(0, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:00:30.023

我点击了链接 - 根本没有连接到数据库的代码。查看另一个 PHP-MySql 教程，其中包括`mysql_connect`.

此外，这只是一个快速修复 -`mysql_`扩展已被弃用。请改用 mysqli。检查 php.net 上的文档

# angularjs - AngularJS 路由的意义何在？

> ID：13909003
> 
> 赞同：1
> 
> 时间：2012-12-17T05:54:31.337
> 
> 标签：angularjs, web-deployment-project

我正在创建一个网站，我选择在 AJ 中进行。我有两个文件夹：
Gateways => 一些 php 文件，它们从 mysql db 中检索数据并将数据作为 json 回显。
视图 => 部分 html 文件，它们基本上是每个页面的模板。例如用户、项目等。

然后我有一个处理请求过程和路由的 index.js 文件：

```
angular.module('Index',['addon'],function($routeProvider,$locationProvider){
    $locationProvider.html5Mode(true).hashPrefix("!");
    $routeProvider.otherwise({
        templateUrl: '/views/index.html',
        controller: "index"
    }).when("/items/",{
        templateUrl: '/views/items.html',
        controller: "items"
    })
}).
controller("index",function($scope,$http){

    $scope.users = [];
    $http.get("gateways/list.php").
    success(function(d){
        console.log(d);
        if(angular.isArray(d)){
            $scope.users = d;
        }
    });

}).
controller("items",function($scope,$http,$routeParams){
    $scope.items = [];
    $http.get("gateways/single.php").
    success(function(d){
        if(angular.isArray(d)){
            $scope.items = d;
        }
    });

}). 
```

除了优雅之外，AJ 中所有这些路线提供者的意义何在？他们不会因为请求数量而减慢网站速度吗？我可以直接在模板文件中编写网关文件中的 php 代码吗？我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T10:06:11.337

你可能错过了使用像 AngularJS 这样的框架的意义。它们主要用于单页应用程序和 ajax 密集型。让我开始，请求的数量并没有真正减慢应用程序的速度。还记得最初没有 Ajax 的 Gmail 是怎样的吗？它比当前的实现更快吗？

现在，当您构建单页应用程序时，应用程序将请求发送到服务器，服务器以 JSON 或 XML 响应。在 AngularJS 或任何其他框架中，服务器发送 JSON 响应，我们使用客户端模板或 DOM 呈现它们。这节省了服务器端的大量资源，因为服务器不必解析数组和渲染模板。因此，如果服务器必须渲染一个有 100 行的表，发送到浏览器的带宽可能是 20KB，而只有 JSON 可能是 5KB，而一个字符串或 DOM 模板有 1KB 来进行渲染。因此，您实际上让访问者的浏览器做了很多工作。这都是关于计算/计算的。考虑一个统计表，其中有列和一些计算值要显示在数据网格中。使用客户端框架，

至于使用routerProvider的问题，书签和浏览器导航按钮的使用是必不可少的。就像传统的 url 有一个视图一样，客户端应用程序中的一个 URL 也有一个视图，它应该是可收藏的并且应该支持导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:03:34.393

AngularJS，作为一个 JS 框架，在客户端中运行它很神奇——这意味着它是你的计算机来处理模板文件，应用任何需要的逻辑。PHP 无法做到这一点——它是一种严格的服务器端语言。当您通过 AJAX 调用请求 PHP“文件”时，您并没有真正获得 php 文件，而是您的服务器产生的处理后的输出（在这种情况下，它会映射到一个对象的用户列表）。如果您只是在模板中包含 PHP 逻辑，那么在最好的情况下，angularJS 读取的 HTML 将具有您需要显示的列表，但不会有实际的列表模型（该 angular 可以过滤/更改/重新排序/随意保存/删除）在角度范围内。

但是您是对的，在您正在处理的级别上，它似乎只会使流程复杂化和减慢速度（具有简化工作的次要优势）。但是当事情变得更加密集时，模块化（并将控制器（即用户控制器）与它可以应用到的不同视图（视图、列表、编辑、详细信息等）分开是保持应用程序结构化的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:04:59.197

我认为他们不会以任何方式减慢网站的速度。如果您关心的是检索每个页面的 html 和 json，那么它不是这样工作的。

html 模板仅由 angular-js 检索、编译和缓存一次。您可以使用一些调试工具（如 firebug）看到这一点。

因此，当用户切换到不同的页面时，您只需向服务器发出 json 请求，这通常比渲染 html 服务器端和检索完整的 html 更快、更轻量级。（无论如何，如果它对你更好，没有什么能阻止你这样做）

# c++ - %ud, %vud 那些是什么

> ID：13909004
> 
> 赞同：1
> 
> 时间：2012-12-17T05:54:30.947
> 
> 标签：c++, database, types

这段用c++写的代码是什么意思？

```
PGBulkInserter pgBulkInserter(postgreSQL, HOST_TRAFFIC_SCHEMA_NAME, date,
                            flushSize, "%ud, %ud, %ud, %ud, %ud, " \
                            "%ul, %ul, %Vul, %Vud, %Vud, %Vud, %Vul, " \
                            "%Vud, %Vud, %Vud, %Vud, %Vud, %ud, %ud, " \
                            "%ud, %ud, %ud"); 
```

我知道它正在创建一个实例`PGBulkinserter`，但是等的含义是什么`%ul, %ud %vud`？您能解释一下更深层次的含义（即，有多少个参数`PGbulkinsterter`等）吗？

我认为它们就像 types`%d, %f`等。有谁知道是否 `%ud`意味着`%d`（我只是在猜测）的无符号版本。

编辑：我很确定这`%ud`是一个 32 位无符号十进制，用于另一段代码中的时间。此外，`"%ul, %ul, %Vul, %Vud, %Vud, %Vud, %Vul, "`与表中所有条目的类型有关。现在，问题是**什么是`\`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:13:47.793

如果这应该是一个初始化（构造函数调用），那么它将 5 个参数传递给构造函数。最后一个参数是字符串文字。它没有 C++ 特定的含义。它的含义是由功能决定的。阅读函数文档以了解其含义。它看起来类似于 C 风格的格式字符串 ( `fscanf`/ `fprintf`)，但实际的说明符 (like `%Vud`) 不是标准的。

最后一个参数实际上是一个拆分为多行的单个字符串文字。C++ 语言将连续的字符串文字（即用空格分隔的文字）连接成单个文字。例如这个看似独立的文字序列

```
"Hel" "lo" " worl" 
"d" 
```

实际上被编译器解释为单个文字

```
"Hello world" 
```

行尾的`\`字符使预处理器将源文件的几行合并为一行。为此，该`\`字符必须是该行的最后一个字符（如您的示例中所示）。例如，这个

```
in\
t\
  ma\
in(\
) 
```

相当于

```
int main() 
```

换句话说，您的代码示例实际上等同于

```
PGBulkInserter pgBulkInserter(postgreSQL, HOST_TRAFFIC_SCHEMA_NAME, date, flushSize, 
  "%ud, %ud, %ud, %ud, %ud, %ul, %ul, %Vul, %Vud, %Vud, %Vud, %Vul, %Vud, %Vud, %Vud, %Vud, %Vud, %ud, %ud, %ud, %ud, %ud"); 
```

该代码的作者显然认为，为了使编译器连接文字，必须先将它们强制成一行。为此，他们使用了这个`\`角色。然而，这是完全没有必要的，因为即使没有`\`.

在您的特定代码示例中，您可以完全删除`\`每行末尾的字符，它对程序绝对没有影响。有时人们`\`无论如何都会使用这些来引起人们注意他的事实，即字面继续在下一行。

# jquery - 将额外数据注入fancybox

> ID：13909016
> 
> 赞同：0
> 
> 时间：2012-12-17T05:55:55.330
> 
> 标签：jquery, fancybox

嗨，我想向 facybox 标题函数注入额外的数据 deneme 是我想注入但没有成功的变量。

```
<a rel="example_group" title="Title comes here" data-deneme="<?php echo $galleryitem['idphotos']; ?>">sdasd</a>

$("a[rel=example_group]").fancybox({
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'titlePosition'     : 'over',
            'titleFormat'       : function(title, currentArray, currentIndex, currentOpts) {
                var deneme=$(this).data('deneme');

                return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span><span stye="color:#FFF; cursor:pointer;" onclick="javascript:popUpWindow(&quot;<?php echo base_url();?>selectproductoptions/'+ deneme +'.html&quot;,10,10,660,550);">+ add to cart</span>';
            }
        }); 
```

deneme 总是未定义

我想出了如何做到这一点，而不是尝试单独获取 deneme 我在 urlofimage.jpg?DenemeComesHere 之类的 href 之后放置了 deneme

为了抓住定名，我像这样使用了 jquerys split 函数

var deneme = currentOpts.href.split('?');

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:52:04.360

**如果使用 fancybox v1.3.4**：

不幸的是，您不能使用`$(this)`(neither `this`) 来引用您调用 fancybox 的元素（假设这是一个设计错误），因此您必须引用整个 selector `$("a[rel=example_group]")`。要过滤当前元素，请使用`currentIndex`通过`titleFormat`API 函数传递的参数，例如：

```
'titleFormat': function(title, currentArray, currentIndex, currentOpts) {
                var deneme = $("a[rel=example_group]").eq(currentIndex).data('deneme');
                return '...etc'
} 
```

... 或者 ：

```
'titleFormat': function(title, currentArray, currentIndex, currentOpts) {
                var deneme = $("a[rel=example_group]:eq("+currentIndex+")").data('deneme');
                return '...etc'
} 
```

...无论你喜欢什么。

**如果使用 fancybox v2.x+**

你可以参考`$(this)`使用`$(this.element)`

在您的情况下`title`，使用回调添加变量，`beforeShow`例如：

```
$("a[rel=example_group]").fancybox({
  // other API options
  beforeShow: function(){
    var deneme = $(this.element).data('deneme');
    this.title = 'some html' + this.title + 'other html' ... etc
  }
}); 
```

# visual-studio - 如何在 Visual C++ 中仅进入（F11）我的项目源文件？

> ID：13909019
> 
> 赞同：1
> 
> 时间：2012-12-17T05:56:45.290
> 
> 标签：visual-studio

我使用视觉 C++。当我按下`F11`调试键时，我会进入默认源文件，如“stdio.h”。我只想进入我的源文件，除了 Visual C++ 的默认源文件。我在视觉工作室中找不到选项。有人帮助我。

# drupal - 如何使用简单的链接/按钮添加内容类型和用户之间的关系

> ID：13909020
> 
> 赞同：-1
> 
> 时间：2012-12-17T05:56:48.247
> 
> 标签：drupal, drupal-7

我的项目包含两种内容类型：教授和讲师。这里的用户是学生，因此学生可以使用自己的凭据登录。

现在我想在教授和讲师内容类型中显示一个带有文本“Follow Me”的按钮/链接。当用户/学生选择链接/按钮时，相应的讲师/教授将附加到学生资料中并且可见在他们的主页内。同样，该学生将在教师/讲师中可见。

我查看了 Drupal 7 中的“关系”模块，但我的用例不需要在小部件中显示太多东西。应该有一个与用户和内容类型相关的简单按钮/链接。

在这方面需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:34:32.587

您是否考虑过 Drupal 7 的条件字段？ [http://drupal.org/node/1704126](http://drupal.org/node/1704126)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:42:23.573

[http://drupal.org/project/flag](http://drupal.org/project/flag) (FLAG) 模块满足我的要求。

# intellij-idea - 用户 Intellij Idea 的不同项目设置

> ID：13909030
> 
> 赞同：0
> 
> 时间：2012-12-17T05:58:16.827
> 
> 标签：intellij-idea, settings, environment

如何为同一项目中的用户进行不同的项目设置。我有一个项目，其中包含一些诸如 email.properties 之类的 .properties 文件，其中包含特定于用户的设置。我需要诸如特定于用户的环境设置之类的东西，例如：email..properties，并且变量包含在操作系统环境中，或者可能在项目文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:20:35.977

结果做同样的事情：首先我在项目根目录中创建了属性文件夹，在那里添加包含当前环境名称的文件 env.properties（或者用户可以将其添加为 JVM 启动参数。我添加了接收属性文件的`-Denv=<env name>`静态类和方法`Properties getProperty(String fileName)`名称作为参数，并将文件中的所有记录作为 java.util.Properties 返回。

```
public static Properties loadProperties(String fileName)
{
    Properties properties = null;
    if (propertiesMap.containsKey(fileName)) {
        properties = (Properties)properties.get(fileName);
    } else {
        String environment = getEnvironment();
        try {
            properties = (new PropertiesLoaderImpl()).LoadAllPropertiesForUtilAndEnv(environment, fileName);
        } catch (FileNotFoundException exception) {}            
    }
    return properties;
}

private static String getEnvironment() {
    // Проверка на наличие параметра при запуске java-машины
    String environment = System.getProperty("env");
    if (environment == null) {
        try {
            // Попытка найти файл env.properties
            ResourceBundle bundle = ResourceBundle.getBundle("properties/env");
            environment = bundle.getString("env");
        } catch (MissingResourceException exception) {
            environment = "";
        }
    }
    return environment;
} 
```

属性搜索以这种方式实现： 1\. 查看 ..proeprties；2.如果没有合适的属性，则在.property中查找；3.否则返回empy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:21:03.737

以下是我在一些项目中的做法。我为属性文件的路径创建了一个[系统属性。](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)该路径在项目之外，因此永远不会提交属性文件。但是为了帮助第一次运行该项目的其他人，我提交了一个带有默认选项的模板属性文件。

在 intellij 中，我使用与同事不同的 -D 选项启动项目，并且启动选项没有被提交（因为我们没有提交 .idea 文件夹）。

# ios - 在字符串数组中的任意位置找到一个字母 ios

> ID：13909033
> 
> 赞同：0
> 
> 时间：2012-12-17T05:58:32.027
> 
> 标签：ios

我有以下过滤某些结果的方法：目前它这样做：array: alpha, apple, aries, bravo

输入一个：

阿尔法苹果白羊座

l 型（现在是 al）

α

我想这样做：

新搜索：输入 p= alpha apple

下面是代码

提前谢谢你

```
-(void) filterResults:(NSString *)searchText{
    NSMutableArray *test = [NSMutableArray arrayWithArray:self.listContent];

    [self.filteredListContent removeAllObjects]; // First clear the filtered array.
        for (int i=0; i<[test count]; i++) {
            NSString *stringResult = [test objectAtIndex:i];
            NSComparisonResult result = [stringResult compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];

            if (result == NSOrderedSame){
                [self.filteredListContent addObject:stringResult];

            }
        }
    [self.filteredListContent sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)];//sort alphabetically
    NSLog(@"filtered results = %@",self.filteredListContent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:11:03.740

要在字符串中的任何位置查找字母，请将其替换：

```
NSComparisonResult result = [stringResult compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
if (result == NSOrderedSame){
    [self.filteredListContent addObject:stringResult];
} 
```

有了这个：

```
NSRange range = [stringResult rangeOfString:searchText];
if (range.location != NSNotFound) {
    [self.filteredListContent addObject:stringResult];
} 
```

请注意，它必须按顺序查找**所有**字符。

如果要查找**任何**字符，请使用`rangeOfCharacterFromSet:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:36:06.273

试试这个。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"SELF beginswith '%@'", searchText]];
self.filteredListContent  = [self.listContent filteredArrayUsingPredicate:predicate]; 
```

希望这对您有所帮助。

# spring - 使用 GenericApplicationContext 时如何使用 Spring Transaction

> ID：13909035
> 
> 赞同：0
> 
> 时间：2012-12-17T05:58:46.503
> 
> 标签：spring, spring-transactions, transactional, spring-annotations

使用分布式 Mysql 数据库时，我使用 BeanDefinitionBuilder 创建了多个数据源、会话工厂但是当我使用下面的 getBean('bean name') 方法执行插入 SQL 时，事务注释似乎不起作用

((SqlSessionTemplate)context.getBean('bean name')).insert("xxxx",params)

你能解释一下我错过了什么吗？

```
Private GenericApplicationContext context = new GenericApplicationContext();

BeanDefinitionBuilder sessionFactoryBuilder = BeanDefinitionBuilder.rootBeanDefinition(org.mybatis.spring.SqlSessionFactoryBean.class);
sessionFactoryBuilder.addPropertyReference("dataSource", "dataSource" + beanName);
sessionFactoryBuilder.addPropertyValue("configLocation", "/sqlmap.xml");
context.registerBeanDefinition("sqlSessionFactory" + beanName, sessionFactoryBuilder.getBeanDefinition());

BeanDefinitionBuilder transactionManagerBuilder = BeanDefinitionBuilder.rootBeanDefinition(org.springframework.jdbc.datasource.DataSourceTransactionManager.class);
transactionManagerBuilder.addPropertyReference("dataSource", "dataSource" + beanName);
context.registerBeanDefinition("transactionManager",transactionManagerBuilder.getBeanDefinition());

ctx.refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:57:48.517

请尝试在下面添加以下代码，看看它是否有效。

```
ConfigurableListableBeanFactory factory = context.getBeanFactory();
AspectJAwareAdvisorAutoProxyCreator aspectJPostProcessor = new AspectJAwareAdvisorAutoProxyCreator();
aspectJPostProcessor.setBeanFactory( factory );
aspectJPostProcessor.setProxyClassLoader( context.getClassLoader() );
factory.addBeanPostProcessor(aspectJPostProcessor); 
```

# android - HTML 表单提交在 Android 4.0 中不起作用。相同的代码在较低版本的 Android 中运行良好

> ID：13909037
> 
> 赞同：0
> 
> 时间：2012-12-17T05:58:54.290
> 
> 标签：android

表单提交在 Android 4.0 中不起作用。相同的代码在较低版本的 Android 和较高版本（如果冻豆）中运行良好。document.myForm.submit() 调用它转到下一页并添加值，例如 page.html?value=""。但是找不到页面即将到来，它将它作为完整的 URL 而不是表单 sumbit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:38:46.780

Android 4.0 不接受页面提交本身，甚至“？” 被视为 HTML 文件的一部分。我覆盖了 WebViewClient

```
 private class MyWebViewClient extends WebViewClient {

    public String values = "";
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        if (url.contains("?")) {
            try {
                values = URLDecoder.decode(url, "UTF-8");
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }
            url = url.replace("?", "%45");
            String args[] = url.split("%45");
            view.loadUrl(args[0]);
        }else{
            view.loadUrl(url);
        }
        return true;
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        if(values.length()>0){
            if(url.contains("smartmodesresult.html")){
                mWebView.loadUrl("javascript:getUrlVars(\""+values+"\");");
            }
        }
        super.onPageFinished(view, url);
    }

} 
```

# android - 设备锁定时强制关闭，再次旋转和解锁

> ID：13909038
> 
> 赞同：1
> 
> 时间：2012-12-17T05:58:56.723
> 
> 标签：android

我正在开发一个平板电脑应用程序。一切正常，直到设备被锁定。一旦设备被锁定并旋转，就会出现强制关闭。

我强迫我的应用程序仅在**横向**模式下运行。所以我在清单中提到了这个权限。

```
 <activity
            android:name=".activity.LoginActivity"
            android:screenOrientation="landscape"
            android:windowSoftInputMode="adjustPan" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

**因此，当我锁定我的设备并使其旋转时，方向会发生变化，并且会产生这种力关闭。**

为了解决这个问题，我在清单中添加了这个权限。

```
android:configChanges="orientation" 
```

在代码中：

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
        // TODO Auto-generated method stub
        super.onConfigurationChanged(newConfig);
        Log.i("Log", "Configuration changes called");
        int orientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
        // or = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
        setRequestedOrientation(orientation);
    } 
```

我还在**onCreate()中添加了这一行**

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i("Log", "OnCreate");
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        setContentView(R.layout.lyt_login_main);
                ........
                } 
```

***但它仍然没有得到解决。请帮我解决这个问题。***

**这是我得到的错误：**

```
12-17 11:13:57.877: E/AndroidRuntime(10462): FATAL EXCEPTION: main
12-17 11:13:57.877: E/AndroidRuntime(10462): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.marico.icp/com.marico.icp.activity.LoginActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f03000f
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3365)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.ActivityThread.access$700(ActivityThread.java:128)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1165)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.os.Looper.loop(Looper.java:137)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.ActivityThread.main(ActivityThread.java:4514)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at java.lang.reflect.Method.invokeNative(Native Method)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at java.lang.reflect.Method.invoke(Method.java:511)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at dalvik.system.NativeStart.main(Native Method)
12-17 11:13:57.877: E/AndroidRuntime(10462): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f03000f
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.content.res.Resources.getValue(Resources.java:1037)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2144)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.content.res.Resources.getLayout(Resources.java:870)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.Activity.setContentView(Activity.java:1835)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at com.marico.icp.activity.LoginActivity.onCreate(LoginActivity.java:77)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.Activity.performCreate(Activity.java:4465)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
12-17 11:13:57.877: E/AndroidRuntime(10462):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
12-17 11:13:57.877: E/AndroidRuntime(10462):    ... 12 more 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:12:34.733

正如@kumar 在评论中所说，

我将布局文件夹中的所有布局都保留在 layout-large-land 中，将清单权限从更改 `android:configChanges="orientation"`为`android:configChanges="orientation|keyboardHidden"`

评论了这个方法`onConfigurationChanged()`，也评论了这一行`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`

然后我运行代码。这解决了强制关闭的问题，**但是由于方向变化，调用了 onCreate() 方法，并且我将输入的数据丢失到了 editText 中，**

因此，为此我将方法**覆盖**`onSaveInstanceState(Bundle outState)`到我的活动类中。并做了以下。

我将输入的数据保存在**哈希图中，**所以在 中`onSavedInstanceState()`，我这样做了。

```
@Override
    protected void onSaveInstanceState(Bundle outState) {

        outState.putSerializable("hashMap", hashMapSaveToDB);
        super.onSaveInstanceState(outState);

    } 
```

并`onCreate()`像这样检查 savedInstanceState ......

```
if(savedInstanceState != null)
        {
            hashMapSaveToDB = (HashMap<String, ArrayList<String>>) savedInstanceState.getSerializable("hashMap"); 
        } 
```

这解决了调用**onCreate()**时数据丢失的问题。

感谢@kumar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:14:30.347

删除这一行 android:configChanges="orientation"

发生的事情是，当方向改变时，它会尝试重新启动活动，并在每次改变方向后进入 oncreate。

评论这个方法 @Override public void onConfigurationChanged(Configuration newConfig) {

```
} 
```

没用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T04:29:11.053

在清单的活动中使用它——

```
 android:configChanges="orientation|keyboardHidden" 
```

# java - 以编程方式设置android闹钟

> ID：13909040
> 
> 赞同：14
> 
> 时间：2012-12-17T05:59:04.783
> 
> 标签：java, android

我正在尝试构建一个个人应用程序，它将在 DeskClock 应用程序中设置警报。我可以让它在当天的任何时间设置闹钟，但是我将如何设置第二天或本周晚些时候的闹钟。查看android中的AlarmClock api，我看不到这样做的正常方法。这甚至可能吗？

顺便说一句，这是我设置警报的代码，它可能不漂亮，但我正在学习。

```
 package com.netwokz.setit;

    import java.util.Calendar;
    import java.util.GregorianCalendar;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.provider.AlarmClock;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;

    public class MainActivity extends Activity implements OnClickListener {
    Button btnSetAlarm;
    EditText etHour, etMinute;
    int minute, hour, day;
    Calendar cal;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);
        btnSetAlarm = (Button) findViewById(R.id.btn_set_alarm);
        etHour = (EditText) findViewById(R.id.etHour);
        etMinute = (EditText) findViewById(R.id.etMinute);
        btnSetAlarm.setOnClickListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main_activity, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.btn_set_alarm:
                setAlarm();
                break;
        }
    }

    private void setAlarm() {
        cal = new GregorianCalendar();
        cal.setTimeInMillis(System.currentTimeMillis());
        day = cal.get(Calendar.DAY_OF_WEEK);
        hour = cal.get(Calendar.HOUR_OF_DAY);
        minute = cal.get(Calendar.MINUTE);

        Intent i = new Intent(AlarmClock.ACTION_SET_ALARM);
        i.putExtra(AlarmClock.EXTRA_HOUR, hour + Integer.parseInt(etHour.getText().toString()));
        i.putExtra(AlarmClock.EXTRA_MINUTES, minute + Integer.parseInt(etMinute.getText().toString()));
        i.putExtra(AlarmClock.EXTRA_SKIP_UI, true);
        startActivity(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-17T06:53:02.650

MainActivity.java

```
public class MainActivity extends Activity {

    TimePicker myTimePicker;
    Button buttonstartSetDialog;
    TextView textAlarmPrompt;
    TimePickerDialog timePickerDialog;

    final static int RQS_1 = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textAlarmPrompt = (TextView) findViewById(R.id.alarmprompt);

        buttonstartSetDialog = (Button) findViewById(R.id.startAlaram);
        buttonstartSetDialog.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                textAlarmPrompt.setText("");
                openTimePickerDialog(false);

            }
        });

    }

    private void openTimePickerDialog(boolean is24r) {
        Calendar calendar = Calendar.getInstance();

        timePickerDialog = new TimePickerDialog(MainActivity.this,
                onTimeSetListener, calendar.get(Calendar.HOUR_OF_DAY),
                calendar.get(Calendar.MINUTE), is24r);
        timePickerDialog.setTitle("Set Alarm Time");

        timePickerDialog.show();

    }

    OnTimeSetListener onTimeSetListener = new OnTimeSetListener() {

        @Override
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

            Calendar calNow = Calendar.getInstance();
            Calendar calSet = (Calendar) calNow.clone();

            calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
            calSet.set(Calendar.MINUTE, minute);
            calSet.set(Calendar.SECOND, 0);
            calSet.set(Calendar.MILLISECOND, 0);

            if (calSet.compareTo(calNow) <= 0) {
                // Today Set time passed, count to tomorrow
                calSet.add(Calendar.DATE, 1);
            }

            setAlarm(calSet);
        }
    };

    private void setAlarm(Calendar targetCal) {

        textAlarmPrompt.setText("\n\n***\n" + "Alarm is set "
                + targetCal.getTime() + "\n" + "***\n");

        Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(
                getBaseContext(), RQS_1, intent, 0);
        AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(),
                pendingIntent);

    }  
} 
```

接收者.java

```
public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context k1, Intent k2) {
        // TODO Auto-generated method stub
         Toast.makeText(k1, "Alarm received!", Toast.LENGTH_LONG).show();

    }

} 
```

main_activity.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="10dp" >

    <Button
        android:id="@+id/startAlaram"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Set Alaram Time" />

    <TextView
        android:id="@+id/alarmprompt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000" />

</LinearLayout> 
```

清单.xml

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <receiver android:name=".AlarmReceiver" android:process=":remote" />
    </application> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T21:29:07.200

就像一个真正的闹钟一样，我看不到为未来日期设置闹钟的方法。我认为这需要以下两种选择之一：

1.  AlarmManager（在期望的未来日期触发应用服务以在 AlarmClock 中创建警报）和 AlarmClock（实际处理警报）的组合。不要忘记收听 BOOT_COMPLETED 广播以重置 AlarmManager 警报，因为它们在重新启动后不会持续存在。

2.  使用 AlarmManager 触发模拟警报的应用服务和 UI。这将要求您考虑电话状态和其他您不必担心闹钟的事情。

我认为您可以让您的应用程序只显示闹钟对话框，该对话框允许用户设置重复警报和其他您无法通过意图执行的选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T06:03:46.030

尝试一个待处理的 Intent 怎么样？

只需将日历值更改为提前几天左右？

```
AlarmManager am = (AlarmManager)getSystemService(alarm);

Intent i= new Intent("MY_INTENT");
PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, 0);

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.add(Calendar.MINUTE, 2);
am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pi); 
```

# java - 日志 - vb.net 到 java

> ID：13909043
> 
> 赞同：0
> 
> 时间：2012-12-17T05:59:08.630
> 
> 标签：java, vb.net

任何人都可以解释日志在 vb.net 代码中的含义吗？是对数函数还是其他一些日志事件。我对此进行了一些搜索，我了解到这是用于对数部分。但是，如果我对其应用对数，我不理解下面的代码行。

```
tmp=pBuffer(5)+4
Log("tmp:" & tmp) 
```

谁能解释这行代码以及相同的等效 java 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:20:36.543

这个日志意味着日志事件，我想。仅用于打印 **tmp**值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:54:04.090

那行代码看起来是将事件记录到日志文件（或控制台）而不是对数数学运算。

在 Java 中进行日志记录的方法有很多，但最简单的（虽然不是最好的）是执行以下操作：

```
import java.util.logging.Logger;

public class Example {

    private static final Logger log = Logger.getLogger(Example.class.getName());

    static void doStuff(int[] pBuffer) {
        int tmp = pBuffer[5] + 4;
        log.info("tmp:" + tmp);
    }

    public static void main(String[] args) {
        doStuff(new int[] {0, 1, 2, 3, 4, 5});
    }
} 
```

我已将您的示例代码逐字翻译为函数`doStuff`。如果你运行它，你会在控制台上打印出类似下面的内容：

```
12 17, 2012 4:47:01 PM Example doStuff
INFO: tmp:9 
```

此代码使用 Java 的内置日志记录工具，我没有使用过。如果您需要复杂的日志记录功能，我推荐[SLF4J](http://www.slf4j.org)或[log4j](http://en.wikipedia.org/wiki/Log4j)。

# c++ - Opencv cv::Mat 容差区间

> ID：13909044
> 
> 赞同：1
> 
> 时间：2012-12-17T05:59:11.357
> 
> 标签：c++, opencv, matrix, intervals

有没有办法找出两个 cv::Mat 矩阵的元素是否在彼此可接受的容差范围内？

即如果 A = [a, b, c, d, e, f]，并且 B = [a ± 5%, b ± 5%, c ± 5%, d ± 5%, e ± 5%, f ± 5 %]

我在想 compare() 函数可能有用，但我不确定如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:27:29.507

我可以看到，OpenCV 似乎没有任何内置功能可以做到这一点，但是鉴于它们公开了迭代器，因此敲击某些东西应该非常简单：

```
template <typename T>
bool within_tolerance(const cv::Mat& m1, const cv::Mat& m2, const T& tolerance)
{
    auto compare = [](const T& v1, const T& v2) -> bool 
                   { return std::abs(v1 - v2) < tolerance * v1; };
    return std::equal(m1.begin<T>(), m1.end<T>(), m2.begin<T>(), compare);
} 
```

编辑：我没有认真考虑比较；以上仅适用于无符号值。这可以用类似的东西来解决`v2 > (1 - tolerance) * v1 && v2 < (1 + tolerance) * v1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:56:06.737

我使用了这个，达到了预期的效果：

```
cv::Mat Upperbound, Lowerbound;
cv::Mat Baseplus;
cv::Mat Baseminus;

Baseplus = 1.1*Base.clone();
Baseminus = 0.9*Base.clone();

        compare(NewData, Baseminus, Lowerbound, CMP_GE);
        compare(NewData, Baseplus, Upperbound, CMP_LE);

        if (countNonZero(Lowerbound)>0) 
        {
            if (countNonZero(Upperbound)>0) 
            {
                if ((countNonZero(Upperbound)+countNonZero(Lowerbound))>4) 
                {
                    cout<<"Eye contact occurs in this frame"<<endl;
                }
            }
        } 
```

# hbase - HBase REST API checkAndPut 或 checkAndDelete

> ID：13909045
> 
> 赞同：0
> 
> 时间：2012-12-17T05:59:14.627
> 
> 标签：hbase

我在 c# 中使用 HBase REST api。如何在 HBase REST API 中实现 checkAndPut 或 checkAndDelete ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:07:34.047

似乎它是在[HBASE-4720](https://issues.apache.org/jira/browse/HBASE-4720)中添加的。

# version-control - 无法在 UI 中看到搁置的 Perforce 变更列表

> ID：13909047
> 
> 赞同：1
> 
> 时间：2012-12-17T05:59:21.203
> 
> 标签：version-control, perforce, shelve, changelist

我通常通过以下方式搁置我的 Perforce 更改列表：

1.  右键单击挂起的更改列表。
2.  点击搁置。
3.  稍后通过右键单击搁置的更改列表并单击取消搁置来取消搁置。

但不是出于某种原因，我在 UI 中看不到这些选项。

所以，我从命令行搁置了我的变更列表，使用

p4 shelve -c '更改号码'

这对我有用，但问题是在 P4 GUI 中，它仍然显示为待处理的更改列表，而不是搁置的更改列表。

我该如何解决这个问题并让 UI 中的工作正常？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:58:24.890

我在这里回答是因为我能够找出问题的答案。

我的工作站最近被重新格式化，重新安装的 Perforce 客户端版本可以追溯到 2009 年。这解释了为什么我之前能够在 UI 中看到 Shelving 支持，但在重新格式化之后却没有。

我隐约记得 Shelving 支持是相对较新的，所以我升级到最新的 P4V 版本，现在我可以通过 UI 控制一切。

希望这可以帮助其他面临类似问题的人。

# android - 在自定义数组列表中一次又一次地获取相同的项目

> ID：13909048
> 
> 赞同：0
> 
> 时间：2012-12-17T05:59:32.917
> 
> 标签：android, arraylist

我想列出具有联系人姓名和联系电话的联系人列表，并希望确保姓名应该有一个条目以避免重复。这是我正在使用的代码：

```
String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                        ContactsContract.CommonDataKinds.Phone.NUMBER};

                m_cursorgetContacts = activity.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,projection,null,null, null);

                if(m_cursorgetContacts != null && m_cursorgetContacts.getCount() != 0)
                {
                    while (m_cursorgetContacts.moveToNext())
                    {
                        String name = m_cursorgetContacts.getString(m_cursorgetContacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                        String phoneNumber = m_cursorgetContacts.getString(m_cursorgetContacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                        if(name != null && phoneNumber != null && phoneNumber.length() != 0)
                        {
                            for(int l_a = 0;l_a < m_localContactNameHolderArrayList.size();l_a++)
                            {
                                InputProviderClass inputProviderInstance = (InputProviderClass)m_localContactNameHolderArrayList.get(l_a);              
                                if (!inputProviderInstance.l_contactName.equals(name) ) 
                                {
                                    l_inputProviderInstance.setContactName(name);
                                    l_inputProviderInstance.setContactNumber(phoneNumber);
                                    m_localContactNameHolderArrayList.add(l_inputProviderInstance);
                                }
                            }
                        }
                    }
                }
                else
                    Log.e("Info: ","There is no any contact present in the contact list of the phone");

                m_cursorgetContacts.close();

                for(int l_a = 0;l_a < m_localContactNameHolderArrayList.size();l_a++)
                {
                    Log.v("", m_localContactNameHolderArrayList.get(l_a).getContactName());
                } 
```

这是我在数组列表中输入值的类：

```
static class InputProviderClass 
    {
        String l_contactName;
        String l_ContactNumber;

        public String getContactName()
        {
            return l_contactName;
        }
        public void setContactName(String contactName) 
        {
            this.l_contactName = contactName;
        }
        public String getContactNumber() 
        {
            return l_ContactNumber;
        }
        public void setContactNumber(String contactNumber) {
            this.l_ContactNumber = contactNumber;
        }
    } 
```

问题是我一次又一次地得到一个条目。我不知道我在哪里犯了错误。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:27:12.500

我以这种方式使用&为什么你在while循环中使用for循环：--

```
 Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,   null,null,null, null);

        while(phones.moveToNext()){
             tempContactList=new ContactController();
            tempContactList.ContactId= phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            tempContactList.PersonName=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            contactList.add(tempContactList);
            }
         phones.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:21:26.173

尝试：

```
InputProviderClass inputProviderInstance = 
              (InputProviderClass)m_localContactNameHolderArrayList.get(l_a);              
    if (!inputProviderInstance.l_contactName.equals(name) ) 
        {
             inputProviderInstance=new inputProviderInstance();
             l_inputProviderInstance.setContactName(name);
             l_inputProviderInstance.setContactNumber(phoneNumber);
             m_localContactNameHolderArrayList.add(l_inputProviderInstance);
        } 
```

# c# - 在 wp7 中使用后台工作程序重置应用程序数据设置

> ID：13909049
> 
> 赞同：0
> 
> 时间：2012-12-17T05:59:48.563
> 
> 标签：c#, windows-phone-7

我正在构建一个 WP7 应用程序。我想在给定时间重置我的应用数据设置。我尝试通过比较给定时间的小时和`DateTime.Now.Hour`主页加载时的“”来重置（即，当我在给定时间打开应用程序时）。但是如果我在给定时间之后打开应用程序，它根本不会重置。所以，我想知道有没有办法解决这个问题。我以前没有使用过 Background Worker，但我认为它可以提供帮助。有人可以建议我摆脱它吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:49:07.380

您不能在 Windows Phone 的后台永久运行应用程序。当您的应用程序启动或激活时，您应该检查删除时间是否已过 ( `DateTime.Now > deleteTime`)。

您可以考虑使用可以每 30 分钟运行一次的后台代理，但要注意限制，尤其是在 256MB 设备上。

# python - 如何在 python 的列表中将整数相加？

> ID：13909052
> 
> 赞同：7
> 
> 时间：2012-12-17T06:00:10.720
> 
> 标签：python, list, integer, add

如果我有一个像

```
x = [2, 4, 7, 12, 3] 
```

我将使用什么功能/过程将所有数字加在一起？

除了使用sum()还有什么办法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T06:07:53.197

```
x = [2, 4, 7, 12, 3]
sum_of_all_numbers= sum(x) 
```

或者你可以试试这个：

```
x = [2, 4, 7, 12, 3] 
sum_of_all_numbers= reduce(lambda q,p: p+q, x) 
```

Reduce 是一种在列表的每个元素上累积执行函数的方法。它可以执行任何功能，因此如果您定义自己的模函数，它将在列表的每个元素上重复执行该功能。为了避免为执行 p+q 定义整个函数，您可以改用 lambda 函数。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-17T06:00:48.917

这：

```
sum([2, 4, 7, 12, 3]) 
```

您用于`sum()`添加列表中的所有元素。

同样：

```
x = [2, 4, 7, 12, 3]
sum(x) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T06:01:56.187

你可以试试 ：

```
x = [2, 4, 7, 12, 3]    
total = sum(x) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-17T06:28:11.150

第一种方式：

```
my_list = [1,2,3,4,5]
list_sum = sum(list) 
```

第二种方式（效率较低）：

```
my_list = [1,2,3,4,5]

list_sum = 0
for x in my_list:
   list_sum += x 
```

# jquery - 输入类型文本问题，

> ID：13909061
> 
> 赞同：0
> 
> 时间：2012-12-17T06:01:29.160
> 
> 标签：jquery, html

我正在编写一个 jquery 函数来检查用户输入是否包含字母而不是数字。我只是想让基本功能正常工作，我正在使用警报框来测试它。无论输入什么，测试都应该显示警报。它在输入数字时起作用，但输入的任何其他字符都不会触发警报。有什么想法吗？

该表单被分解为包含在 div 中的字段集，这些字段集作为叠加层弹出。每当用户尝试关闭弹出窗口时，都会调用该函数。不是说这会引起问题吗？

这是测试功能：

```
function validateItem(item){
var fvalue = $(item).val();
alert(fvalue);
return false;  } 
```

这是一个示例表项

```
<tr>
<td class="td_thumbs">
    <div>
        <a class="fancybox" data-fancybox-group="vinyl-banners" href="img/products/vinyl-corporateblue.jpg"> <img src="img/products/thumbs/vinyl-corporateblue-thumb.png" alt="vinyl c-blue"/></a>
        <label>Corporate Blue</label>
    </div>
</td>
<td>6</td>
<td>
    <input id="vinyl-blue" type="text" max="6" min="0" value="0"/>
</td>
</tr> 
```

调用函数，

```
//iterate through each table
    $('table').each(function() {

        $thisTable = $(this);

        //iterate through each input
        $(this).find('input').each(function() {
            var $this = $(this), i_value = $this.attr('value'),
                itemLabel = $this.closest('tr').find('label').html();
            //if any items have a positive value
            if (i_value > 0) {
                //we want to grab the heading for these items
                setHeading = true;

                //validate item
                if(validateItem($this)){//if quantities are valid
                  //build list of items of this type
                 $this.css({
                      'border':'1px solid #ddd',
                      'background-color' : '#efefef'
                      });
                      items += '<li>' + i_value + 'x ' + itemLabel + '</li>';
                }
                else{//invalid quantity
                  $this.css({
                      'border':'1px dashed #F00',
                      'background-color' : '#f7d2d4'
                      });

                      errorFlag = true;
                      //exit item and table loops    
                      return false;                  
                }//end validate                

            }//end value check
        });//end input iteration 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:20:00.177

发现问题！该函数在以下内容中被调用..

```
if (i_value > 0) { 
```

这意味着它仅在输入数字时才被调用。我把调用放在这个 if 语句之外，它按预期工作，所以解决方案是改变

```
if(i_value > 0) 
```

至

```
if(i_value != 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:56:15.327

这是一个功能，您可以在其中获取输入框的内容，无论是数字还是字母，您都可以[在此处查看](http://jsfiddle.net/52QfW/2/)

但是，如果您不希望用户输入任何数字，您可以使用 onkeypress 事件

如下[检查这里](http://jsfiddle.net/52QfW/5/)

```
onkeypress 
```

# php - 如何在文本框上显示光标第一行

> ID：13909065
> 
> 赞同：3
> 
> 时间：2012-12-17T06:01:41.763
> 
> 标签：php, jquery, css, ajax

如果按回车键，我想显示光标第一行的文本框。但我的光标总是显示在第二行。请任何人都可以帮我解决这个问题。谢谢

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>test page</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript">
   $(document).ready(function() {
   $('#txt_message').keydown(function (e){
    if(e.keyCode == 13 ){
    $('#txt_message').val("");
            }
})
});
</script>
    </head>
        <body>
 <textarea  id='txt_message'></textarea>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:07:19.237

```
 $('#txt_message').keydown(function (e){
    if(e.keyCode == 13 ){
    e.preventDefault();//use this to prevent default behavior 
    $('#txt_message').val("");
   } 
```

[演示 js 小提琴](http://jsfiddle.net/52QfW/)

# iis - 在同一域名下托管 2 个 IIS 站点

> ID：13909069
> 
> 赞同：1
> 
> 时间：2012-12-17T06:02:08.383
> 
> 标签：iis, sharepoint-2010, iis-7.5

我有一个 SharePoint 2010 网站和一个自定义 Web 应用程序。最终目标是能够使用跨站点 JavaScript。它们使用不同的 .net 框架，因此需要单独的 IIS 站点。例如，我如何在[http://website.com](http://website.com)和[http://website.com/site2](http://website.com/site2)下托管？

我曾尝试将另一个站点内的一个站点用作使用不同应用程序池的应用程序，但由于需要重复引用，因此 web.config 文件存在问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:29:12.700

尝试为 /site2 站点创建一个新的应用程序池。然后将 App Pool 属性 enableConfigurationOverride 设置为 false。这只能在 appcmd 中或通过手动编辑 IIS 配置文件来完成。Appcmd 命令是这样的：

```
appcmd.exe set config -section:system.applicationHost/applicationPools /[name='AppPoolName'].enableConfigurationOverride:"False" /commit:apphost 
```

这将告诉子站点应用程序池不要从父 web.config 导入任何设置。

我能够使用此配置在 SharePoint 站点下运行 MVC 站点。

# codeigniter - 如何在codeigniter中打印页面？

> ID：13909070
> 
> 赞同：-2
> 
> 时间：2012-12-17T06:02:16.517
> 
> 标签：codeigniter

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<?php $this->load->view('includes/header'); ?>

<div class="container-fluid" style=" min-height: 500px; " >
  <div class="row-fluid">
    <?php $this->load->view('includes/sidebar'); ?>
    <?php $this->load->view($main_content); ?>
  </div>
</div>

<form id="print" method="post" action="<?php echo base_url().'index.php/'; ?>printdocument/print_a_document">
     <div class="controls">
      <input style="width: 185px;" id="print_button" type="submit" value="Print">
      <input type="hidden" name="print_template" value="<?php echo $main_content; ?>">
      <input type="hidden" name="records" value="<?php echo $records; ?>">
      <input type="hidden" name="print_template" value="<?php echo $main_content; ?>">
    </div>
</form> 
```

然后在控制器中

```
class Printdocument extends CI_Controller{

    function print_a_document()
    {
        $data['main_content'] = $this->input->post('print_template');
        $data['records'] = $this->input->post('records');
        $this->load->view('includes/print_template', $data);
    }
} 
```

我需要传递记录 如何传递？

遇到 PHP 错误

严重性：通知

消息：数组到字符串的转换

文件名：includes/template_print.php

行号：16

数组">

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:05:03.677

您不应该在表单提交中明确声明 index.php

```
action="<?php echo base_url().'index.php/'; ?>printdocument/print_a_document"> 
```

index.php 由 CI 框架隐式添加。

```
action="<?php echo base_url().'printdocument/print_a_document'; ?>"> 
```

你能像上面那样编辑你的代码并检查吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:29:41.870

您的问题是您正在尝试将字符串分配给数组。请注意，您是为数组而不是数组元素执行此操作。因此，您面临的问题是什么。发布要打印的数据数组并将其保存到`$data`数组中。

# r - 在 R 中读取 CSV 文件，然后选择每个元素

> ID：13909075
> 
> 赞同：1
> 
> 时间：2012-12-17T06:02:32.500
> 
> 标签：r

对不起，如果标题令人困惑。我可以将 CSV 文件导入 R，但是一旦我想通过提供行和列索引来选择一个元素。我得到了不止一个元素。我只想使用这个导入的 csv 作为 data.frame，我可以选择任何列、行和单个单元格。谁能给我一些建议？

这是数据：

```
SKU On  Off Duration(hr)    Sales
C010100100  2/13/2012   4/19/2012 17:00 1601    238
C010930200  5/3/2012    7/29/2012 0:00  2088    3
C011361100  2/13/2012   5/25/2012 22:29 2460    110
C012000204  8/13/2012   11/12/2012 11:00    2195    245
C012000205  8/13/2012   11/12/2012 0:00 2184    331 
```

代码：

```
Dat = read.table("Dat.csv",header=1,sep=',')
Dat[1,][1]  #This is close to what I need but is not exactly the same
         SKU
1 C010100100
Dat[1,1]    # Ideally, I want to have results only with C010100100
[1] C010100100
3861 Levels: B013591100 B024481100 B028710300 B038110800 B038140800 B038170900 B038260200 B038300700 B040580700 B040590200 B040600400 B040970200 ... YB11624Q1100 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:13:33.683

您可以转换为字符以将值作为字符串获取，而不再作为因素：

```
as.character(Dat[1,1]) 
```

您只有一个元素，但该因子包含所有级别。

或者，`stringsAsFactors=FALSE`在读取文件时将选项传递给 read.table，以防止为字符值创建因子：

```
Dat = read.table("Dat.csv",header=1,sep=',', stringsAsFactors=FALSE ) 
```

# jquery - rails form_for 加载时客户端验证错误

> ID：13909078
> 
> 赞同：1
> 
> 时间：2012-12-17T06:02:41.343
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui, postgresql

我正在尝试在 Rails 中使用客户端验证 Gem。我的表单一直有效，直到将 `:validate => true" 添加到我的 form_for 中。然后我收到一个错误，告诉我我写它的方式是错误的。我尝试像示例一样重新格式化它，它只是抛出错误。

**错误**

```
Using form_for(:name, @resource) is not supported with ClientSideValidations. Please use form_for(@resource, :as => :name) instead. 
```

**hashtag_controller**

```
def home    
        @leaderboard = Hashtag.leaderboard_history
        @trends_display = Trend.trends_display
        @hash_create = ""
    end
    def create 
        @hash_create = Hashtag.create_hashtag(params[:hashtag])
        Hashlog.create_hashlog(params[:hashtag])
        @random_hashtag_pull = Hashtag.random_hashtags_pull
        @leaderboard = Hashtag.leaderboard_history_current
        respond_to do |format|
            format.html { redirect_to root_path }
            format.js 
        end
    end 
```

**标签.rb**

```
class Hashtag < ActiveRecord::Base

  attr_accessible :text, :profile_image_url, :from_user, :created_at, :tweet_id, :hashtag, :from_user_name, :view_count, :wins

  hashtag_regex = /^[A-Za-z\d=#...-]+$/i

  validates :hashtag, :format => { :with => hashtag_regex }, :length => { :within => 2..20 }                    

 class << self

def create_hashtag(hashtag)                #creates new tweetvstweet for inputed hashtag with # for guests
    dash = "#"
    @hashtag_scrubbed = [dash, hashtag].join.downcase
    (User.current_user ? User.current_user.twitter : Twitter).search("%#{@hashtag_scrubbed}", :lang => "en", :count => 100, :result_type => "mixed").results.map do |tweet|
        unless exists?(tweet_id: tweet.id)
      create!(
        tweet_id: tweet.id,
        text: tweet.text,
        profile_image_url: tweet.user.profile_image_url,
        from_user: tweet.from_user,
        from_user_name: tweet.user.name, 
        created_at: tweet.created_at,
        hashtag: @hashtag_scrubbed,
        view_count: "0",
        wins: "0"
          ) 
        end  
    end
end

  def random_hashtags_pull                         #pulls 4 random hashtags for a vote first display
    Hashtag.where{ |hashtag| hashtag.hashtag =~ @hashtag_scrubbed}.order{"RANDOM()"}.limit(4).each(&:update_view_count)
  end

  def cast_vote_hashtag(hashtag)                    #pulls 4 random hashtags for a vote continued votes
    Hashtag.where{ |hashtag| hashtag.hashtag =~ @hashtag_scrubbed}.order{"RANDOM()"}.limit(4).each(&:update_view_count)
  end

  def leaderboard_history_current                  #displaying 5 highscore hashtags on the right
    Hashtag.where{ |hashtag| hashtag.hashtag =~ @hashtag_scrubbed}.order{"wins DESC"}.limit(5)  
  end

  def cast_vote(cast_vote)                           #counts number of wins
    Hashtag.increment_counter(:wins, cast_vote)
  end

  def leaderboard_history                            #right side leaderboard history
    Hashtag.order('wins DESC').limit(5)
  end
end

  def update_view_count                                  #updates the number of views
    Hashtag.increment_counter(:view_count, self.id)
    self.view_count += 1 
  end 
```

**主页.html.erb**

```
<div class="span6 votes-middle">
    <%= render 'shared/twitter_search' %>
    </div>

**search form**
<%= form_for(@hash_create, :url => hashtags_path, :validate => true, remote: true)  do |f| %>

                <div class="input-prepend input-append">
                <span class="add-on swag">#</span>
                <%= f.text_field :hashtag,class: "span4 swag_text_field", id:"appendedPrependedInput",  :validate => true, data: {autocomplete_source: autocomplete_index_path} %>

                <%= f.submit "VS!", class: "btn add-on-right swag_button" %>
                <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:25:48.467

我认为您应该为表单创建一个新对象

在新操作中添加 @hash_create = HashTag.new 并将您的表单更改为

```
form_for(@hash_create, :url => hashtags_path, :validate => true, remote: true) 
```

# maple - 在枫树中如何手动选择一种解决方案？

> ID：13909081
> 
> 赞同：0
> 
> 时间：2012-12-17T06:02:49.133
> 
> 标签：maple

经过一些复杂的集成后，maple 给出了在不同变量域上定义的解决方案列表。我只需要选择其中之一。域是如此复杂以至于`assuming`没有帮助：maple 内存不足，试图弄清楚这些假设如何与他找到的域相对应。但是，很明显，我需要哪种解决方案。

在 Maple 中是否可以通过其数量以某种方式提取解决方案，或者只是删除未定义的解决方案，使 Maple 忘记定义它的域？

PS 这个解决方案很难复制粘贴，因为它很长。

**UPD**最小工作示例：

```
> sln := int(1/x, x=a..b,AllSolutions):
> value(sln) assuming a>0, b>0;
    { -ln(a) + ln(b)        a < b
    {
    {       0               b = a
    {
    { -ln(a) + ln(b)        b < a 
```

在这个特殊的例子中添加`assuming a<b`会有所帮助，但我想`ln(b)-ln(a)`直接得到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:16:08.393

看看`convert`。它可以将您的分段系统转换为数组。

```
> sln := int(1/x, x=a..b,AllSolutions):
> s:=value(sln) assuming a>0, b>0;

                       { -ln(a) + ln(b)        a < b
                       {
                  s := {       0               b = a
                       {
                       { -ln(a) + ln(b)        b < a

> conv:=convert(s,list);

   conv := [a < b, -ln(a) + ln(b), b = a, 0, b < a, -ln(a) + ln(b)]

> conv[2];

                            -ln(a) + ln(b) 
```

您可以通过在数组中提供正确的（偶数）索引或通过匹配您想要的部分的奇数（然后选择相应的偶数）来选择您最喜欢的部分。

# eclipse - Windows中的Tomcat webapps目录

> ID：13909082
> 
> 赞同：8
> 
> 时间：2012-12-17T06:02:50.757
> 
> 标签：eclipse, jsp, tomcat, web-applications, servlets

我现在正在使用 Eclipse 开发一个简单的 Web 应用程序，并且我正在使用 Tomcat 作为 Web 服务器。我已经在 Eclipse 中配置了 Tomcat，并且我的应用程序运行良好。

我的问题是：**Tomcat 在哪里存储 Web 应用程序以及在哪个文件夹中存储类？**我想检查 JSP 到 servlet 的转换，并想验证转换后的文件的样子，我试图找到 Tomcat 存储 Web 应用程序的确切位置。我进入了提取 Tomcat 的 webapps 文件夹，但我的 webapp 不在该文件夹中。有人能告诉**我在哪里可以找到转换后的 JSP 吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T06:15:39.767

右键单击 Web 项目并选择**Run As**然后**Run Configurations...**

在**Arguments**选项卡中，tomcat 部署路径作为**VM 参数**提供，名称为`-Dwtp.deploy`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:35:12.503

查到了位置。双击 eclipse 中的 tomcat 服务器并获取服务器路径。像这样的东西.. C:\EclipseWorkspace.metadata.plugins\org.eclipse.wst.server.core\tmp0

Web 应用程序的位置将位于 Eclipse 工作区（chk 服务器路径）内的 .metadata 文件夹中，转换后的 jsp 文件可以在如下所示的位置找到。

服务器路径\work\Catalina\localhost\loginApp\org\apache\jsp

@Admins ...这个问题可以结束，或者需要采取什么行动。

谢谢。

# asp.net-mvc-3 - MVC3 实体更新问题

> ID：13909087
> 
> 赞同：0
> 
> 时间：2012-12-17T06:03:14.470
> 
> 标签：asp.net-mvc-3, edit

我们有两个模型 Person 和 Address。我们创建了这两种模型的一个组合模型，如下所示。

```
public class Trust_Person_Master
{
    public Person_Master PersonMaster { get; set; }

    public Address_Master AddressMaster { get; set; }

    public Trust_Person_Master()
    {

    }

    public Trust_Person_Master(Person_Master personMaster, Address_Master addressMaster)
    {
        PersonMaster = personMaster;
        AddressMaster = addressMaster;
    }   

} 
```

现在，我们使用此`Trust_Person_Master`模型来保存人员和地址。

所以以下是保存和编辑的方法。

```
[HttpPost, Ajax(true)]
public JsonResult SaveTrust(Trust_Person_Master entity)
{
    int nCurrPersonId = entity.PersonMaster.Person_ID; 
    if (entity.PersonMaster.Person_ID > 0)
    {
        var update = db.Person.Find(entity.PersonMaster.Person_ID);
        if (ModelState.IsValid)
        {
            TryUpdateModel(update);            
        }     
    }
    else
    {
        db.Person.Add(entity.PersonMaster);
    }
    db.SaveChanges();
    HttpContext.Application["TrustPersonSearch"] = null;    
    return Json(new { person_id = entity.PersonMaster.Person_ID, location_id = entity.PersonMaster.Location_ID });
} 
```

但我的问题是，当我编辑人员时，即仅人员主字段说名字，然后它会根据需要执行代码而不会给出任何错误。但并不反映变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:20:24.373

你需要展示`TryUpdateModel()`方法。你是如何更新模型的？

通过查看您发布的代码，一切似乎都很好，不应该出现任何问题，但是我想看看您更新实体的方式，问题似乎就在那里。

尽可能多地调试，然后带着你的发现回到这里。

# java - 从 Mockito 抛出异常

> ID：13909088
> 
> 赞同：32
> 
> 时间：2012-12-17T06:03:16.763
> 
> 标签：java, mockito

我想`ContentIOException`从一个签名看起来像这样的方法中抛出一个。

```
public void putContent(InputStream is) throws ContentIOException. 
```

当我尝试`ContentIOException`像这样从 Mockito 抛出时：

```
when(StubbedObject.putContent(contentStream)).thenThrow(ContentIOException.class); 
```

我收到以下编译错误：

```
The method when(T) in the type Mockito is not applicable for the arguments (void). 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-17T06:06:43.920

看看[官方 API 中的这个参考](http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doThrow(java.lang.Throwable))。您想反转调用方式并调整参数，因为这是`void`您希望引发异常的方法。

```
doThrow(new ContentIOException()).when(StubbedObject).putContent(contentStream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T20:15:41.257

您可以使用以下代码

```
 when(testRepositoryMock.findOne(123)).thenThrow(new NullPointerException()); 
```

然后在你可以检查你的逻辑之后

```
 String erroResponse= service.testMethodForResponse(accountNum);
        JSONObject jsonObj = new JSONObject(erroResponse);
         String _acNo = jsonObj.getString("accountNum");
        assertEquals(accountNum, _acNo);
        } 
```

如果您使用的是 Spring Boot，则添加顶级

```
@SpringBootTest
@RunWith(MockitoJUnitRunner.class) 
```

在类内部，您需要注入对象

```
@InjectMocks //actual object you want to get test coverage
private TestService testService;
@Mock //Mock object which call by actual object for mocking
private testRepository testRepositoryMock; 
```

参考链接：[http ://www.baeldung.com/mockito-behavior](http://www.baeldung.com/mockito-behavior)

# git - git merge upstream/master“已经是最新的”

> ID：13909091
> 
> 赞同：2
> 
> 时间：2012-12-17T06:03:40.913
> 
> 标签：git, github

只是一个免责声明：在使用 git 几个月后，我仍然不知道我在使用它时在做什么。只有当我完全按照我在网上各个页面上找到的说明进行操作时才会起作用。

我要做的是更新我的存储库，该存储库是从另一个项目派生的。我发现这些说明有效，并且每次我想更新时都一直在遵循它们

但是，这次当我尝试合并时，我得到了这个：

```
warning: refname 'upstream/master' is ambiguous.
Already up-to-date 
```

即使我派生出的项目最近提交了，也没有任何反应。我真的不知道出了什么问题，我真的很沮丧。对不起，如果这个问题非常愚蠢和/或愚蠢。

**编辑1：**另外，我搜索了许多解决方案但没有成功。

**编辑 2：** git branch -a 的输出

```
* master
upstream/master
remotes/origin/HEAD -> origin/master
remotes/origin/log-upgrade
remotes/origin/master
remotes/origin/past-gens
remotes/origin/prototype-party
remotes/upstream/log-upgrade
remotes/upstream/master
remotes/upstream/past-gens
remotes/upstream/prototype-party 
```

**编辑3：**类似的问题

[git refname 'origin/master' 不明确](https://stackoverflow.com/questions/26046698/git-refname-origin-master-is-ambiguous)
[Git：refname 'master' 不明确](https://stackoverflow.com/questions/12224773/git-refname-master-is-ambiguous)
[警告：refname 'HEAD' 不明确](https://stackoverflow.com/questions/1692892/warning-refname-head-is-ambiguous)
[Git 警告：refname 'xxx' 不明确](https://stackoverflow.com/questions/28192422/git-warning-refname-xxx-is-ambiguous)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T06:35:40.707

你有两个分支叫做`upstream/master`. 一个是本地分支，一个是远程分支。当您尝试执行 a`git merge`时，`git`不知道您希望从这两个分支中的哪个分支合并，因此存在歧义。

这可以从`git branch -a`（显示所有`git`分支，包括遥控器）中看出：

```
upstream/master
<SNIP>
remotes/upstream/master 
```

要解决此问题，您可以重命名（或删除）*本地*分支：

```
git branch -m <old name> <new name> 
```

在您的情况下，您将重命名如下内容（将名称更改为`newname`）：

```
git branch -m upstream/master newname 
```

这应该允许您正确执行`git fetch`/ `git merge`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:52:52.977

要么运行：

```
git merge remotes/upstream/master 
```

代替

```
git merge upstream/master 
```

或删除您的本地`upstream/master`分支，通过运行：

```
git branch -d upstream/master 
```

并了解 git 的工作原理；）。它并没有那么复杂，一旦你理解了核心原则，一切都很容易。

# vbscript - 并行运行两个或多个 .VBS 脚本

> ID：13909095
> 
> 赞同：0
> 
> 时间：2012-12-17T06:03:52.520
> 
> 标签：vbscript

我有两个 .vbs 文件，比如 a.vbs 和 b.vbs。现在两者都是为同一个 Excel 编写的，但可以在 2 个不同的工作表上工作。那么我们可以并行运行它们吗？

***编辑***

a.vbs 将更新 sheet2，b.vbs 将更新 sheet3。但对于两个源表都是 sheet1。

请建议如何设置这样的环境

***代码 A***

```
Option Explicit

Dim objExcel1
Dim strPathExcel1
Dim objSheet1,objSheet2
Dim IntRow1,IntRow2
Dim ColStart

Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump

 strPathExcel1 = "D:\AravoVB\Copy of Original     Scripts\CopyofGEWingtoWing_latest_dump_21112012.xls"
 objExcel1.Workbooks.open strPathExcel1
 Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)
 Set objSheet2 = objExcel1.ActiveWorkbook.Worksheets("Bad Data")

 objExcel1.ScreenUpdating = False
 objExcel1.Calculation = -4135  'xlCalculationManual

 IntRow2=2
 IntRow1=4
 Do Until IntRow1 > objSheet1.UsedRange.Rows.Count

  ColStart = objExcel1.Application.WorksheetFunction.Match("Parent Business Process ID", objSheet1.Rows(3), 0) + 1 

Do Until ColStart > objSheet1.UsedRange.Columns.Count And objSheet1.Cells(IntRow1,ColStart) = ""

    If objSheet1.Cells(IntRow1,ColStart + 1) > objSheet1.Cells(IntRow1,ColStart + 5) And objSheet1.Cells(IntRow1,ColStart + 5) <> "" Then

    objSheet1.Range(objSheet1.Cells(IntRow1,1),objSheet1.Cells(IntRow1,objSheet1.UsedRange.Columns.Count)).Copy
    objSheet2.Range(objSheet2.Cells(IntRow2,1),objSheet2.Cells(IntRow2,objSheet1.UsedRange.Columns.Count)).PasteSpecial
    IntRow2=IntRow2+1
    Exit Do

    End If

ColStart=ColStart+4
Loop

 IntRow1=IntRow1+1
 Loop

 objExcel1.ScreenUpdating = True
 objExcel1.Calculation = -4105   'xlCalculationAutomatic 
```

***代码 B***

```
Option Explicit

Dim objExcel1
Dim strPathExcel1
Dim objSheet1,objSheet2
Dim IntRow1,IntRow2
Dim Flag
Dim IntColTemp,IntRowTemp
Dim Strcmp1,Strcmp2

 Flag=0
 IntColTemp=1
 IntRowTemp=3

   Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump

 If Err.Number <> 0 Then
     On Error GoTo 0
     Wscript.Echo "Excel application not found."
     Wscript.Quit
 End If

 strPathExcel1 = "D:\VA\CopyofGEWingtoWing_latest_dump_21112012.xls"
  objExcel1.Workbooks.open strPathExcel1

 Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)
 Set objSheet2 = objExcel1.ActiveWorkbook.Worksheets(2)

 IntRow1=4
 IntRow2=1

 Do While objSheet1.Cells(IntRow1, 1).Value <> ""

  objSheet2.Cells(IntRow2, 1).Value = objSheet1.Cells(IntRow1, 1).Value

IntColTemp=1
Flag=0
'This will travarse to the Parent Business Process ID column horizantally in the excel.
Do While Flag=0

  If objSheet1.Cells(IntRowTemp,IntColTemp).Value="Parent Business Process ID" Then

      Flag=1       

  End If

      IntColTemp=IntColTemp+1

Loop
      IntColTemp=IntColTemp-1
      'MsgBox(IntColTemp)

    Strcmp1=trim(objSheet1.Cells(IntRow1, 1).Value)
    Strcmp2=trim(objSheet1.Cells(IntRow1,IntColTemp).Value)

  If Strcmp1=Strcmp2 Then

      objSheet2.Cells(IntRow2, 2).Value="Parent" 

  Else

      objSheet2.Cells(IntRow2, 2).Value="child"

  End If

   IntRow1=IntRow1+1
   IntRow2=IntRow2+1

   Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:03:28.200

通过在两个脚本中添加类似的内容，应该可以处理两个不同的工作表：

```
strPathExcel1 = "D:\CopyofGEWingtoWing_latest_dump_21112012.xls"

On Error Resume Next
Set objExcel1 = GetObject(, "Excel.Application")    ' attach to running instance
If Err.Number = 429 Then                            ' if that fails
  Err.Clear
  Set objExcel1 = CreateObject("Excel.Application") ' create new instance
  If Err Then                                       ' if that still fails
    WScript.Echo Err.Description & " (0x" & Hex(Err.Number) & ")"
    WScript.Quit 1                                  ' report error and terminate
  End If
  objExcel1.Workbooks.Open strPathExcel1
End If
On Error Goto 0 
```

但是，我怀疑这种方法能否获得足够的性能来证明额外的复杂性是合理的。

在***代码 A 中***替换行

```
Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump

strPathExcel1 = "D:\AravoVB\Copy of Original Scripts\CopyofGEWingtoWing_latest_dump_21112012.xls"
objExcel1.Workbooks.open strPathExcel1 
```

使用上面的代码块。

在***代码 B***中替换行

```
Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump

If Err.Number <> 0 Then
  On Error GoTo 0
  Wscript.Echo "Excel application not found."
  Wscript.Quit
End If

strPathExcel1 = "D:\VA\CopyofGEWingtoWing_latest_dump_21112012.xls"
objExcel1.Workbooks.open strPathExcel1 
```

使用上面的代码块。

# zend-framework - 如何在 AND 条件内使用 OR 条件编写 Zend db select

> ID：13909098
> 
> 赞同：6
> 
> 时间：2012-12-17T06:04:12.393
> 
> 标签：zend-framework

有人可以指导我使用 Zend db select 编写如下查询：

```
SELECT `tbl_md_users`.* 
FROM `tbl_md_users` 
WHERE 
      user_type <> 'TYPE1')
AND (first_name LIKE '%tom%' OR last_name LIKE '%tom%' OR user_name LIKE '%tom%') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-16T13:53:06.330

如果你想要

```
SELECT `tbl_md_users`.* 
FROM `tbl_md_users` 
WHERE 
  user_type <> 'TYPE1')
AND (first_name LIKE '%tom%' OR first_name LIKE '%dick%' OR first_name LIKE '%harry%') 
```

那么第一个答案不起作用

我改用 Zend_Db_Expr

```
$likeTom = new Zend_Db_Expr("first_name LIKE '%tom%'");
$likeDick = new Zend_Db_Expr("first_name LIKE '%dick%'");
$likeHarry = new Zend_Db_Expr("first_name LIKE '%harry%'");

$query = $database->select ()
    ->from ('tbl_md_users')
    ->where ('user_type <> ?', 'TYPE1')
    ->where ("{$likeTom} OR {$likeDick} OR {$likeHarry}"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T08:26:06.553

```
 $query = $database->select ()
        ->from ('tbl_md_users')
        ->where ('user_type <> ?', 'TYPE1')
        ->where ("first_name LIKE '%?%' OR last_name LIKE '%?%' OR user_name LIKE '%?%'", 'tom'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-28T07:14:54.707

当前最新的解决方案是在 where 子句中调用 nest() 和 unnest() ：

```
$select->where
    ->nest()
        ->equalTo('column1', 1)
        ->or
        ->equalTo('column2', 2)
    ->unnest()
    ->and
    ->equalTo('column3', 3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:56:38.610

我认为没有办法为此使用 Zend_Db_Select。你可以使用

```
$this->table->getAdapter()->quoteInto() 
```

编写自定义查询。

# java - 如何强制 Class.forName 只查看 jar 内部？

> ID：13909100
> 
> 赞同：2
> 
> 时间：2012-12-17T06:04:33.173
> 
> 标签：java, ant, jar, classpath, classloader

请想象一个有两个文件的文件夹

1.  我的应用程序.jar
2.  B.class（真实路径很长）

在 jar 中有一些代码来检查 B.class 是否存在**于**jar 文件中。

```
try {
    Class.forName("B");
    System.out.println("exists");
} catch (Exception ignored) {
    System.out.println("does not exist");
} 
```

但是即使 B.class 不在 jar 中，上面的代码也不会抛出异常，因为 B.class 存在于 jar 之外。

jar 是使用 Eclipse 中的 Ant 生成的。所以我认为类路径可能是原因

```
 <manifest>
     <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"/>
     <attribute name="Rsrc-Main-Class" value="org.client.Client"/>
     <attribute name="Class-Path" value="."/>
     <attribute name="Rsrc-Class-Path" value="./ many_jar_here.jar"/>
  </manifest> 
```

所以我只改变了这样的类路径

```
<attribute name="Class-Path" value=""/> 
```

但现在它给出了这样的错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: B
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:264)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRs
der.java:56)
Caused by: java.lang.ClassNotFoundException: B
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 3 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:33:21.837

在这种情况下，类加载器找到了 B 但它不在 jar 中，您可以另外检查是否

```
B.class.getProtectionDomain().getCodeSource() == ClassKnownToBeInJar.class.getProtectionDomain().getCodeSource() 
```

或者

```
B.class.getProtectionDomain().getCodeSource().getLocation().getPath().contains("MyApp.jar") 
```

如果其中任何一个为真，则 B 是从 MyApp.jar 加载的。

所以，像这样：

```
try {
    Class bClass = Class.forName("B");
    System.out.println("exists");
    if (bClass.getProtectionDomain().getCodeSource().getLocation().getPath().contains("MyApp.jar")) {
        System.out.println("class loaded from MyApp.jar");
    } else {
        System.out.println("class not loaded from MyApp.jar");
    }
} catch (Exception ignored) {
    System.out.println("does not exist");
} 
```

# c++ - 在此对象创建期间会发生哪些复制/分配操作？

> ID：13909102
> 
> 赞同：0
> 
> 时间：2012-12-17T06:04:49.227
> 
> 标签：c++, constructor, copy, return-value

```
class myObj
{
   myObj() {};
}

myObj MakeObj()
{
    return( myObj() );
}

main()
{
   myObj o = MakeObj();
} 
```

在 MakeObj 函数中，obj 是按值返回的。所以在赋值中，创建的对象被复制。似乎有两种操作 - 一种是创建对象并在 MakeObj 中分配其字段，另一种是在返回时复制对象。

编译器是否优化了这些步骤之一？
创建复杂对象并分配它的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:07:31.750

从语义上讲，在 C++03 中，代码中有两个副本，即当它从 中返回时`MakeObj()`，但第一个副本通常被编译器优化掉。该优化称为[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)。

在 C++11 中，返回的对象实际上是*移动*的（如果可用且可访问），而不是被*复制*的，它被编译器优化掉了。

# c# - 将 HttpResponseMessage.Content 数据 (ReadAsStringAsync) 限制为特定的最大大小

> ID：13909104
> 
> 赞同：2
> 
> 时间：2012-12-17T06:04:54.547
> 
> 标签：c#, asynchronous, .net-4.5, dotnet-httpclient

我正在使用以下内容：

```
HttpClient client = new HttpClient();
HttpResponseMessage message = await client.GetAsync(myUrl);
String content = await message.Content.ReadAsStringAsync(); 
```

有没有办法限制通过 HttpResponseMessage.Content 下载多少？如果我不信任 URL，并且 URL 实际上反馈 100 GB，那么这可能会带来麻烦......我基本上想将其限制为可配置的字节数 - 如果还有更多，我不会想要它！：） 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:07:59.370

也许这个链接会有所帮助：

[http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.maxresponsecontentbuffersize.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.maxresponsecontentbuffersize.aspx)

```
HttpClient.MaxResponseContentBufferSize 
```

# c# - 如何使用网络摄像头捕捉图像？

> ID：13909106
> 
> 赞同：2
> 
> 时间：2012-12-17T06:05:53.267
> 
> 标签：c#

我想用网络摄像头捕捉图像。

我用`WebCam_Capture.dll`. 我在表单中添加了一个`WebCamCapture`控件。

表单加载时：

```
private void Form1_Load(object sender, EventArgs e)
{
    this.WebCamCapture.TimeToCapture_milliseconds = 1;
    WebCamCapture.Start(0);
} 
```

在 ImageCaptured 事件中：

```
private void WebCamCapture_ImageCaptured(object source, 
                                         WebCam_Capture.WebcamEventArgs e)
{
    this.pictureBox1.Image = e.WebCamImage;
} 
```

但是当我运行时，我得到错误：

> 捕获视频图像时发生错误。现在将终止视频捕获。
> 
> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:29:28.730

我推荐你使用 OpenCV 库。它是英特尔开发的用于图像处理的开源库。但是，它有一个 .net 的包装器，您可以从以下链接下载此包装器：[此链接](http://sourceforge.net/projects/emgucv/?source=recommended)

# android - 一项活动中的两个微调器

> ID：13909109
> 
> 赞同：10
> 
> 时间：2012-12-17T06:05:56.640
> 
> 标签：android, android-spinner

我有 2 个微调器。

这是我的活动

```
package com.example.belajarcombobox;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class CreateComboBox extends Activity implements AdapterView.OnItemSelectedListener {

    TextView selection;
    TextView selection2;
    String[] countries = {"Amerika","Argentina","Brazil"};

    String[] city = {"London","Paris","Buenos Aires"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        selection = (TextView) findViewById(R.id.selection);
        Spinner spin = (Spinner) findViewById(R.id.spinner);
        ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, countries);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(aa);
        spin.setOnItemSelectedListener(this);

        selection2 = (TextView) findViewById(R.id.selection2);
        Spinner spin2 = (Spinner) findViewById(R.id.spinner2);
        ArrayAdapter<String> bb = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, city);
        bb.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(bb);
        spin2.setOnItemSelectedListener(this);
    }

    public void onItemSelected(AdapterView<?> parent, View v, int position, long id ){
        Spinner spin = (Spinner)parent;
        Spinner spin2 = (Spinner)parent;
        if(spin.getId() == R.id.spinner)
        {
            Toast.makeText(this, "Your choose :" + countries[position],Toast.LENGTH_SHORT).show();                 
        }
        if(spin2.getId() == R.id.spinner2)
        {
            Toast.makeText(this, "Your choose :" + city[position],Toast.LENGTH_SHORT).show();       
        }

    }

    public void onNothingSelected(AdapterView<?> parent){
        Toast.makeText(this, "Choose Countries :", Toast.LENGTH_SHORT).show();
    }
} 
```

当我运行此活动时，第一个微调器值为城市，第二个微调器值为空。

如何在同一活动中运行 2 个微调器？第一个微调器值是国家，第二个微调器值是城市。

BR

亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:21:34.007

不要将实现添加到您的 Activity 类

创建两个内部类，每个类处理一个微调器

```
public class CreateComboBox extends Activity implements AdapterView.OnItemSelectedListener
{
    TextView selection;
    TextView selection2;
    String[] countries = {"Amerika","Argentina","Brazil"};

    String[] city = {"London","Paris","Buenos Aires"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        selection = (TextView) findViewById(R.id.selection);
        Spinner spin = (Spinner) findViewById(R.id.spinner);
        ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, countries);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(aa);
        spin.setOnItemSelectedListener(new CountriesSpinnerClass());

        selection2 = (TextView) findViewById(R.id.selection2);
        Spinner spin2 = (Spinner) findViewById(R.id.spinner2);
        ArrayAdapter<String> bb = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, city);
        bb.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spin.setAdapter(bb);
        spin2.setOnItemSelectedListener(new CitiesSpinnerClass());
    }

    class CountriesSpinnerClass implements AdapterView.OnItemSelectedListener
    {
        void onItemSelected(AdapterView<?> parent, View v, int position, long id)
        {
            Toast.makeText(v.getContext(), "Your choose :" + countries[position],Toast.LENGTH_SHORT).show();      
        }
    }

    class CitiesSpinnerClass implements AdapterView.OnItemSelectedListener
    {
        void onItemSelected(AdapterView<?> parent, View v, int position, long id)
        {
            Toast.makeText(v.getContext(), "Your choose :" + city[position],Toast.LENGTH_SHORT).show();        
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T06:08:05.040

利用

```
spin2.setAdapter(bb); 
```

代替

```
spin.setAdapter(bb); 
```

当前您正在为第二个微调器设置适配器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:11:25.947

```
bb.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spin2.setAdapter(bb); (should be second spinner..)
^^^^^
spin2.setOnItemSelectedListener(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:11:23.787

你应该使用 make spin.setAdapter(bb); 到 spin2.setAdapter(bb);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-26T15:26:52.407

**我在使用微调器时遇到了很多问题，终于找到了这个解决方案**

这个库 ( **SmartMaterialSpinner** ) 为您节省了大量时间，因为它提供了一种简单的方法来添加任意数量的微调器，此外还提供了一种通过独立侦听器向微调器添加项目的简单方法

这是我在项目中使用它的方式：

```
 String[] Durationarray = {"1 Month ", "2 Month ", "3 Month ", "4 Month ", "5 Month", 
         "6 Month ", "7 Month ", "8 Month ", "9 Month ", "10 Month ", "11 Month ",
            "1 Year", "2 Year", "3 Year", "4 Year", "5 Year", "6 Year", "7 Year", "8 Year", "9 Year", "10 Year"};

    spinner1 = (SmartMaterialSpinner) findViewById(R.id.spinner1_id);
    List<String> DurationList = new ArrayList();
    new WorkAround().convertStringArrToListArr(gam3iaDurationarray, DurationList);
    spinner1.setItem(DurationList);
    spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    });

    String[] egyptGovernemt = {"New Valley", "Matruh", "Red Sea", "Giza", "South Sinai", "North Sinai", "Suez", "Beheira", "Helwan", "Sharqia", "Dakahlia",
            "Kafr el-Sheikh" , "Alexandria", "Monufia", "Minya", "Gharbia", "Faiyum", "Qena", "Asyut", "Sohag", "Ismailia", "Beni Suef", "Qalyubia", "Aswan", "Damietta", "Cairo",
            "Port Said", "Luxor", "6th of October"};

    spinner2= (SmartMaterialSpinner) findViewById(R.id.spinner2);
    List<String>  cityList = new ArrayList<String>();
    new WorkAround().convertStringArrToListArr(egyptGovernemt, cityList);

    spinner2.setItem(cityList);
    spinner2.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

将字符串数组转换为字符串数组列表的 WorkAround 类

```
public class WorkAround {

    public void convertStringArrToListArr(String [] myStringArray, List<String> myStringList){
        for (String s:myStringArray) {
            myStringList.add( s );
        }
    }

    // Number Checker Method
    public  boolean isNumeric(String str) {
        try {
            Double.parseDouble(str);
            return true;
        } catch (NumberFormatException e) {
            return false;
        }
    }
} 
```

请注意，您不需要实现

```
implements AdapterView.OnItemSelectedListener 
```

**更多信息 **的资源链接**[图书馆 SmartMaterialSpinner](https://github.com/Chivorns/SmartMaterialSpinner)**

# ruby-on-rails - 无法在 HAML 中输出实例变量

> ID：13909111
> 
> 赞同：1
> 
> 时间：2012-12-17T06:06:04.123
> 
> 标签：ruby-on-rails, haml

我在我的 RoR 应用程序中使用 HAML。

我的 Welcome 控制器中有以下代码：

```
def index
  render :layout => 'homepage'
  @qotd = 'Today is Sunday'
end 
```

在我使用的 index.html.haml 文件中：

```
%h1
  = @qotd 
```

但在输出中，我只看到空的 h1 标签，没有变量 qotd 的值。

想知道我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:11:15.747

当您在分配`render`之前调用时`@qotd`，您是在告诉模板进行渲染，**然后**您正在进行`@qotd`分配。模板呈现时，`@qotd`尚不存在。**在你的行动中交换这两行。**

```
def index
  @qotd = 'Today is Sunday'
  render :layout => 'homepage'
end 
```

# actionscript-3 - 无法创建类

> ID：13909113
> 
> 赞同：0
> 
> 时间：2012-12-17T06:06:18.337
> 
> 标签：actionscript-3

我是 ActionScript 的新手，我正在尝试制作我的第一个应用程序。我有一个主类 - 的子类`Sprite`。另一个类，应该管理一些事件，比如键盘的按键。这是它的初始化：

```
private var controller:GameObjectController;
...
controller = new GameObjectController(this); 
```

这是`controller:GameObjectController`它自己：

```
public class GameObjectController extends InteractiveObject
{
    var textField:TextField;

    public function GameObjectController(mainSprite: Sprite)
    {
    addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);

    textField = new TextField();
    textField.text = "Hello, World";
    mainSprite.addChild(textField);
    }

    private function onKeyDown(event: KeyboardEvent):void
    {
    textField.text = event.keyCode.toString();
    }

} 
```

但是当我试图运行它时，我有一个错误：

> ArgumentError：错误 #2012：无法创建类 GameObjectController$。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:14:04.167

来自文档：[InteractiveObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html)

> InteractiveObject 类本身不包含任何用于在屏幕上呈现内容的 API。要创建 InteractiveObject 类的自定义子类，请扩展具有用于在屏幕上呈现内容的 API 的子类之一，例如 Sprite、SimpleButton、TextField 或 MovieClip 类。

所以我建议尝试将 Sprite 子类化，看看是否能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:16:48.707

[flash.display.InteractiveObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html)是一个不能被子类化的抽象类。相反，从[flash.display.Sprite](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html)扩展。

不要忘记导入 Sprite 并将您的代码放在一个包中：

```
package
{
    import flash.display.Sprite;

    public class GameObjectController extends Sprite
    {
        var textField:TextField;

        public function GameObjectController(mainSprite: Sprite)
        {
            addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);

            textField = new TextField();
            textField.text = "Hello, World";
            mainSprite.addChild(textField);
        }

        private function onKeyDown(event: KeyboardEvent):void
        {
            textField.text = event.keyCode.toString();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:15:09.003

首先，不要扩展 InteractiveObject。正如 API 所说：

> InteractiveObject 类本身不包含任何用于在屏幕上呈现内容的 API。要创建 InteractiveObject 类的自定义子类，请扩展具有用于在屏幕上呈现内容的 API 的子类之一，例如 Sprite、SimpleButton、TextField 或 MovieClip 类。

所以改为使用（例如）：

```
public class GameObjectController extends Sprite
{
    ....
} 
```

其次，构造函数的参数需要与扩展类相同——对于显示类，这意味着零参数。

# java - ADF DVT 组件中的气泡图标签问题

> ID：13909114
> 
> 赞同：0
> 
> 时间：2012-12-17T06:06:39.753
> 
> 标签：java, graph, oracle-adf

我正在研究一个气泡图问题，只要 Y 轴标签很长，该图就会扭曲 理想情况下，该图应该看起来像 Normal.gif。

![普通屏幕图像](../Images/5e535e1d9cb0d728a933883878498121.png) 但如果标签很长，它看起来像 distorted.gif。

![在此处输入图像描述](../Images/f2f397e8eef91d92d4b4435f93be44d8.png) 因此，我尝试只显示标签的前 15 个字符，后跟 3 个椭圆（3 个点 ...）。但是标签名称和绘图区域之间仍然有很大的空间。![（更改后.gif）](../Images/4f5c690ddf04a9a0501bf2d4877f587f.png) 有什么办法可以减少这个空间。任何想法图表的哪个属性控制这个空间。此外，只要将标签连接起来只显示前 15 个字符，当我们将鼠标悬停在名称上时，我们需要显示全名。我们如何实现这一目标？如果您对此有任何指示，请告诉我。

```
 <dvt:x1MajorTick lineWidth="0" tickStyle="GS_NONE"/>
  <dvt:x1Title text="#{HcmGoalTopGenBundle['MenuItem.Performance.AddtoPerformanceGoal']}"
               rendered="true">
    <dvt:graphFont bold="true"/>
  </dvt:x1Title>
  <dvt:y1Axis majorTickStepAutomatic="false"
              majorTickStep="#{bindings.YMinorTick.inputValue}"
              axisMinAutoScaled="false" axisMaxAutoScaled="false"
              axisMinValue="#{bindings.YLowerBoundary.inputValue}"
              axisMaxValue="#{bindings.YUpperBoundary.inputValue}"></dvt:y1Axis>
  <dvt:y1TickLabel>
    <af:convertNumber pattern="#{applCorePrefs.numberFormatPattern}"/>
  </dvt:y1TickLabel>
  <dvt:y1MajorTick lineWidth="0" tickStyle="GS_NONE"/>
  <dvt:y1Title text="#{hcmperformancedocspublicuiBundle1['OText.Potential.PotentialRating']}"
               rendered="true">
    <dvt:graphFont bold="true"/>
  </dvt:y1Title>
  <dvt:seriesSet defaultMarkerShape="MS_HUMAN"/>

  <dvt:shapeAttributesSet>
    <dvt:shapeAttributes component="GRAPH_DATAMARKER"/>
  </dvt:shapeAttributesSet>
  <dvt:legendArea position="LAP_RIGHT" rendered="false"/>
</dvt:graph> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:25:49.570

我也研究过这个。发现这是一个框架问题。已向框架小组报告了同样的情况

# php - Facebook PHP SDK - 在我所有的注册用户不活跃时发布在墙上

> ID：13909117
> 
> 赞同：1
> 
> 时间：2012-12-17T06:06:46.183
> 
> 标签：php, facebook-graph-api

我已经看到一些 Facebook 应用程序在用户墙上向应用程序上的所有注册用户发布状态更新。这怎么可能？我正在使用 PHP SDK，当用户登录我的应用程序时，我可以向他发帖，但是当他们不在应用程序上且没有活动会话时，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:14:21.577

您可以[将访问令牌换成长期使用的令牌](http://developers.facebook.com/docs/howtos/login/extending-tokens/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:27:27.290

我所做的是将用户的 Facebook 用户 ID 和 access_token 保存在数据库中的一个表中，然后“在需要时”发布，只要该用户没有从 Facebook 帐户中删除发布权限或应用程序。

把它放在一个循环中

```
 $data2 = array();
    $data2['access_token'] = $usersPermission; // from database

    $data2['message'] = 'test message';

    $facebook->api('/'.$facebook_user_id.'/feed/', 'post', $data2); 
```

我可以在用户不在应用程序上时发布！

# c# - 日期时间精度与准确性？

> ID：13909123
> 
> 赞同：2
> 
> 时间：2012-12-17T06:07:14.577
> 
> 标签：c#, datetime

Eric Lippert 写了[一篇](http://blogs.msdn.com/b/ericlippert/archive/2010/04/08/precision-and-accuracy-of-datetime.aspx)关于 DateTime 的文章。Jon Skeet 评论了他的文章

> 只要每个人都知道，我对 DateTime 的**精度**没有太大的问题。精度，而不是准确度

他这是什么意思？

处理 DateTime 精度问题与准确性问题是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T06:28:11.817

他在那篇文章中使用了错误的术语准确性。准确度差确实意味着系统偏差，例如如果您的计算机时钟关闭一分钟会发生什么。Lippert 的文章真正说明的是[错误的精度](http://en.wikipedia.org/wiki/False_precision)。

换句话说，该`DateTime`结构非常精确，因为它能够表示只有 100 纳秒的差异。但是，您将获得的值 `DateTime.Now`仅精确到 16 毫秒内。但是您给出的数字仍将`DateTime`具有能够表示的完整精度。这会产生一个陷阱，因为很容易假设`DateTime.Now`返回的值具有`DateTime`结构的完整精度，而不是花时间找出`DateTime.Now`获取其值的源提供的精度。

`DateTime`，作为一个简单的数据结构，没有内在的准确性，所以谈论它并没有真正的意义。（一公斤的准确度是多少？）最好谈谈系统时钟的准确度。（例如，该比例有多准确？）但这可能因每台计算机而异，并且与 .NET 中的数据结构没有任何关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T06:11:19.320

> 具有如此高的精度所带来的问题当然是很容易假设给定值与它一样精确。但这根本没有保证！我可以用双精度浮点数将我的身高表示为 1.799992352094 米；虽然精确到万亿分之一米，但它只能精确到百分之一米左右，因为我没有一个设备可以实际测量我的高度到万亿分之一米，甚至千分之一米。这里的精确度比精确度高得多。

[来源](http://blogs.msdn.com/b/ericlippert/archive/2010/04/08/precision-and-accuracy-of-datetime.aspx)

# extjs - 如何在单击 html 链接时调用控制器操作？

> ID：13909126
> 
> 赞同：2
> 
> 时间：2012-12-17T06:07:24.310
> 
> 标签：extjs, extjs4.1

我在这个 html 中添加了带有项目“html”和标签的面板`<a>`现在我想在点击这个时调用控制器操作，我该`<a>` 如何解决这个问题？

感谢高级..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T06:21:08.187

```
Ext.define('mypanel',{
extend:'Ext.panel.panel',
listeners:{
  body:{
    click:function(){ console.log('link clicked') },
    delegate:'a'
  }
}); 
```

更多信息在这里：[http ://www.sencha.com/blog/event-delegation-in-sencha-touch](http://www.sencha.com/blog/event-delegation-in-sencha-touch)

# android - 如何将我的 Android 应用程序提供到我的网站以供用户下载

> ID：13909137
> 
> 赞同：1
> 
> 时间：2012-12-17T06:08:32.980
> 
> 标签：android, android-ndk, google-play

我开发了一个 Android 应用程序。我想将它保存在我的网站 www.abc.example.com 中。我有权访问服务器。

我希望看到我的应用程序就像我们直接从网上的站点下载软件一样。这样，所有用户都会下载我的应用程序，这非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:10:27.547

除了将 APK 文件上传到服务器并提供指向该 APK 位置的链接之外，您无需执行任何其他操作。

在用户方面，用户必须在设置屏幕中勾选**未知来源（允许安装非市场应用程序） 。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:01:07.093

您只需将 .apk 文件上传到 Web 服务器并提供上传链接。用户可以点击此链接直接从服务器下载。但是有一个隐私问题，.apk 文件可以通过蓝牙等传输到多个设备。

如果用户无法从设置中启用未知源安装的设置，则将不允许安装此 .apk 文件。最好在 Google Play 中创建一个帐户并上传。

# jquery - 如何将 jQuery 与modernizr 一起使用？

> ID：13909138
> 
> 赞同：1
> 
> 时间：2012-12-17T06:08:34.107
> 
> 标签：jquery, modernizr

我想使用modernizr 有条件地加载polyfills。到目前为止，我的代码粘贴在下面。

目前我已经成功加载了我的支持库的代码。然而，尽管 jQuery 加载，它并没有被浏览器拾取。

如果我在需要 jQuery 的页面中包含一个脚本，我会在 firebug 中收到以下错误：

*   ReferenceError：未定义 jQuery
*   ReferenceError: $ 未定义

那么，如何将 jQuery 与modernizr 一起使用？

另外，我怎样才能让我自己的脚本在 jQuery（以及我需要的任何其他支持库被加载？

```
Modernizr.load([

{  // our polyfills first
  test : Modernizr.mq ,
  nope : ['../js/respond.js' ]
},

  'http://vframe/wp-content/themes/vframe/js/jquery-1.7.2.js',
  'http://vframe/wp-content/themes/vframe/js/jquery.form.js',
  'http://vframe/wp-content/themes/vframe/js/jquery.validate.min.js'

]) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:41:18.723

我有一个类似的问题，并通过先加载 jquery 然后modernizr 来解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:18:04.610

Modernizr.load 函数异步加载资源，但按顺序执行。在这种情况下，response.js 比 jQuery 先被执行，这意味着如果您在 response.js 中使用 jQuery 函数，它将无法识别它。如您所知，JavaScript 是逐行解释的。

# fonts - Flash CS6 嵌入字体不可见

> ID：13909140
> 
> 赞同：0
> 
> 时间：2012-12-17T06:08:41.597
> 
> 标签：fonts, flash-cs5, flash-cs6

如果有人有同样的问题。

我已将我的 flash CS5 文件保存到新版本的 CS6，现在即使在 IDE 中也没有显示嵌入字体，我正在选择该字体的非嵌入版本。即使那样它们显示为不可见的可选区域，我打开记事本并选择了字体，它们在其中工作正常。

我试图将它保存回旧版本，但仍然遇到同样的问题。

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:31:13.587

我有一个类似的问题。几年来，我一直在维护一个从 XML 文件中读取数据的 Flash 对象。XML 文件提供图像、链接和标题文本。图片在那里，链接在那里，但文字不见了！我可以看到为文本分配了空间，但文本根本不存在。最新的 FLASH/AIR 更新有什么变化吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:01:24.243

阅读本主题[http://forums.adobe.com/message/4916465#4916465](http://forums.adobe.com/message/4916465#4916465)

我确认回滚 KB2753842 可以解决问题（Windows 想要再次应用它，所以它必须“隐藏”）。由于恶意 webfont（可怕的东西——你访问一个网站并被感染），这是一个针对可能的远程代码执行的关键修复，所以我希望 MS 或 Adob​​e 能解决这个问题。

# linux - Linux 定义自定义 Shell 命令？

> ID：13909141
> 
> 赞同：3
> 
> 时间：2012-12-17T06:08:48.140
> 
> 标签：linux, shell

我想简单地定义一个自定义 shell 命令，例如：
我输入`abc`它会输出一些文本。

像：

```
$ abc
The quick brown fox jumps over the lazy dog. 
```

*   如何在Linux中简单地制作它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T06:19:26.383

您还应该考虑学习[bash 函数](http://www.tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html)，这样您就可以

```
 function abc () {
   echo The quick brown fox jumps over the lazy dog.
 } 
```

正如其他人告诉你的那样，你也可以使用 bash`alias`内置。

^(您可能希望删除特定于 bash 的`function`关键字以移植到其他 Posix shell。)

bash 中函数的主要优点是它们可以接受一些参数并且比`alias`给你的更复杂。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T06:12:21.587

试试**别名**

```
alias abc="echo The quick brown fox jumps over the lazy dog." 
```

您可以将其添加到您的 ~/.bash_profile 中以使其对所有会话有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:10:41.510

`alias abc='echo The quick brown fox jumps over the lazy dog.'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T06:11:38.093

如果我正确理解了您的要求，您可以为此使用别名命令

```
alias abc='echo "testing"' 
```

# java - 休眠参考映射

> ID：13909143
> 
> 赞同：1
> 
> 时间：2012-12-17T06:08:54.577
> 
> 标签：java, hibernate

我有一张婚姻状况表，其中包含“单身”、“已婚”等值。

我有一个以 marital_status_id 作为外键的 Person 表。

我如何映射这个？任何帮助将不胜感激，因为我是 Hibernate 的新手。或者我不需要这个，因为人与婚姻状况之间没有关系，而只是一个参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:16:01.383

首先，婚姻状况不需要单独的表格（是吗？真的吗？）。可以用单个字符处理（非常高效）

但是，在您的情况下，

```
@Entity
@Table(name="PERSON")
Class Person(){
    @Id
    @Column(name = "ID", unique = true, nullable = false, precision = 15, scale = 0)
    private Long id;

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="MARITAL_STATUS_ID")
    MaritalStatus maritalStatus;
} 
```

和

```
@Entity
@Table(name="MARITAL_STATUS")
Class MaritalStatus(){
    @Id
    @Column(name = "ID", unique = true, nullable = false, precision = 15, scale = 0)
    private Long id;

    @OneToMany(mappedBy="maritalStatus")
    Set<Person> persons;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:56:12.633

Marital Status 应该在 Java 中表示为枚举，以排除不必要的连接，因为没有那么多选项，它们永远不会改变。
检查`@Enumerated(EnumType.STRING)`注释：[http ://docs.oracle.com/javaee/6/api/javax/persistence/Enumerated.html](http://docs.oracle.com/javaee/6/api/javax/persistence/Enumerated.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:59:54.197

您还没有指定是坚持建立一对一的关系还是不在乎，以及是否更喜欢使用 Enum 而不是 Class。

这个链接提供了一些关于休眠中一对一映射的有用信息，如果你想在你的表之间有这样的关系：[一对一的例子](https://stackoverflow.com/questions/314578/need-an-example-of-a-primary-key-onetoone-mapping-in-hibernate)

但是不推荐使用休眠的一对一映射，您可以像这样简单地使用一对多映射：

```
@Entity
@Table(name = "Person")
public class Person {

    @Id
    @GeneratedValue
    int id; 

    @OneToMany(mappedBy = "Person", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    Private MaritalStatus;
}

@Entity
@Table(name = "MaritalStatus")
public class Person {

    @Id
    @GeneratedValue
    int id; 

    @ManyToOne
    Person person = new Person();
} 
```

这种方法非常简单，但您可能更喜欢使用枚举而不是类并使用枚举映射表。这种方法实施起来有点困难，这篇文章为您提供了您需要的所有东西：[将枚举映射到表](https://stackoverflow.com/questions/735732/mapping-enum-to-a-table-with-hibernate-annotation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T07:00:49.933

我会在下面做

个人实体：

```
@Entity
@Table(schema = "Person")
public class Person {
    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "marital_status_id")
    private MaritalStatus  maritalStatus;

} 
```

婚姻状况实体：

```
@Entity
@Table(schema = "MaritalStatus")
public class MaritalStatus {
    @Id
    private String id;

    @Column(name = "status")
    private String status;
} 
```

# java - 在eclipse中调试HTTP客户端

> ID：13909145
> 
> 赞同：0
> 
> 时间：2012-12-17T06:09:06.753
> 
> 标签：java

我正在尝试调试小型 HTTP 客户端检查其标头。我很难检查 HTTP 的标头，是否有任何 Eclipse 插件可用于监视 HTTP 客户端（HTTP 标头）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:17:26.130

试试吹链接。Eclipse 名称中有一个工具。`TCP/IP monitor`它提供了一个控制台。您需要添加的只是您的服务器端口`localhost:8080`和一个监控端口`8081`（根据参考）

那么当你打电话时`http://localhost:8081/your_servlet_or_page/...` ，电话将被重定向到`http://localhost:8080/your_servlet_or_page/...` ，你将能够在控制台中看到标题`TCP/IP monitor console`

参考 # [http://www.avajava.com/tutorials/lessons/how-do-i-monitor-http-communication-in-eclipse.html](http://www.avajava.com/tutorials/lessons/how-do-i-monitor-http-communication-in-eclipse.html) [http://help.eclipse.org/juno/index.jsp?topic =%2Forg.eclipse.wst.wsi.ui.doc.user%2Ftasks%2Ftmonitor.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.wst.wsi.ui.doc.user%2Ftasks%2Ftmonitor.html)

上面的参考资料已经过我的测试..它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:51:57.753

检查这是否有帮助

```
public class GetHttpHeaders {
        public static void main(String[] args) throws IOException {
            try {
                URL url = new URL("http://localhost:8080");
                URLConnection conn = url.openConnection();

                for (int i = 0;; i++) {
                    String name = conn.getHeaderFieldKey(i);
                    String value = conn.getHeaderField(i);
                    if (name == null && value == null) {
                        break;
                    }
                    if (name == null) {
                        System.out
                                .println("Server HTTP version, Response code:");
                        System.out.println(value);
                        System.out.print("\n");
                    } else {
                        System.out.println(name + "=" + value);
                    }
                }
            } catch (Exception e) {
            }
        }
    } 
```

# php - Windows 上的 VLD 扩展

> ID：13909147
> 
> 赞同：0
> 
> 时间：2012-12-17T06:09:49.740
> 
> 标签：php, iis

我可以在 Windows 上运行的 IIS 或 Apache 上运行[VLD 扩展吗？](http://derickrethans.nl/projects.html#vld)如何？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:28:49.757

从 VLD 产品描述：

> 这是高级用户的扩展，不能用于对使用任何编码器编码的 PHP 代码进行反编码。如果你不能让它工作，那么这个工具不适合你。如果您确定存在错误，请提供补丁（或良好的错误报告）。

由于您的提问方式，您的问题可以得到具体回答：

不，你不能。

# java - Java：Spring MVC - 如何在控制器操作中访问更新的模型？

> ID：13909148
> 
> 赞同：0
> 
> 时间：2012-12-17T06:09:57.023
> 
> 标签：java, spring-mvc

我正在学习 Spring MVC 3，一般不是 Java 专家。我有几个问题

1.  据我所知`ModelAndView`，不再使用了。我也看到这两个：
    *   `org.springframework.ui.Model`
    *   `org.springframework.ui.ModelMap`

`ModelMap`和有什么区别`Model`？其中一个是老式的`ModelAndView`吗？

1.  如何将表单数据传回控制器？这是我到目前为止所拥有的：

**看法**

```
<form action="/KSC/users/update" method="POST" class="form-horizontal" id="fEdit">

                            <input type="hidden" id="id" name="id" value="${record.id}" />

                            <div class="control-group">
                                <label for="userName" class="control-label"></label>
                                <div class="controls">
                                    <input type="text" id="userName" name="userName" value="${record.userName}" data-validation-engine="validate[required]" />
                                </div>
                            </div>

                            <div class="control-group">
                                <label for="email" class="control-label"></label>
                                <div class="controls">
                                    <input type="text" id="email" name="email" value="${record.email}" data-validation-engine="validate[required,custom[email]]" />
                                </div>
                            </div>

                            <div class="control-group">
                                <div class="controls">
                                    <input type="submit" value="Save" class="btn btn-primary" />
                                    <a href="/KSC/users" class="btn">Cancel</a>
                                </div>
                            </div>
                        </form> 
```

**编辑操作**

这是我最初从 Edit 操作传递给上述 View 的内容：

```
@RequestMapping(value = "/users/edit/{id}")
    public String edit(ModelMap model, @PathVariable("id") int userId) {
        KCSUser user = service.find(userId);
        model.addAttribute("record", user);
        return "user/edit";
    } 
```

**控制器更新操作**

```
@RequestMapping(value = "/users/update")
    public String update(ModelMap model) {
        //TODO
    } 
```

我需要访问更新的模型数据，以便将其保存到我的数据库中。理想情况下，如果它可以直接映射到一个`KSCUser`很好的对象.. 但如果不是，那么 a `Model`or`ModelMap`也可以。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:43:36.323

> **如何将表单数据传回控制器？**

只需更改您更新方法的签名，如下所示：

```
@RequestMapping(value = "/users/update")
public String update(KSCUser user, ModelMap model) {
    // ...
} 
```

spring 将创建一个 KSCUser 的实例，并根据输入字段的 name 属性填充属性。所以如果你有一个像这样的输入字段`<input type="text" name="username" />`，spring 会尝试调用`setUsername`KSCUser 的实例。

您还可以像这样更改您的方法的签名：

```
@RequestMapping(value = "/users/update")
public String update(@RequestParam("username") final String username) {
    // ...
} 
```

然后 spring 将使用 name 注入输入字段的值`username`。

或者您可以像这样更改方法的签名：

```
@RequestMapping(value = "/users/update")
public String update(Map<String, String> params) {
    // ...
} 
```

`params`spring 然后将在映射中注入所有请求参数。您可以像这样访问用户名：`params.get("username")`.

为了完整起见...您可以像这样更改方法的签名：

```
@RequestMapping(value = "/users/update")
public String update(HttpServletRequest request) {
    // ...
} 
```

spring 然后只会注入一个实例，`HttpServletRequest`您可以像使用 vanila servlet api 一样访问您的请求参数。

> **理想情况下，如果它可以直接映射到一个很好的 KSCUser 对象.. 但如果不是，那么 Model 或 ModelMap 也可以**

当您`ModelMap`仅注入时（就像您在`update`方法中所做的那样），它不会包含请求参数（除非您使用[@SeessionAttributes](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/SessionAttributes.html)）并且您将无法以这种方式访问​​它们。

> **ModelMap 和 Model 有什么区别**

好问题。ModelMap 的 javadoc 说：

> 查看模型接口，了解具有相同目的的基于 Java-5 的接口变体

**恕**我直言：该`Model`界面看起来仅用于将对象添加到模型中（而不是从模型中读取）...就像您的`edit`方法中的情况一样。但是有一种`asMap`方法可以让您访问模型的内容。

我自己从未使用过该`Model`界面。始终注入`ModelMap`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:35:44.033

这似乎有效：

```
@RequestMapping(value = "/users/update")
    public String update(ModelMap model, @ModelAttribute("record") KCSUser record) {

        if (record.getId() == 0) {
            service.insert(record);
        }
        else {
            KCSUser existing = service.find(record.getId());
            existing.setUserName(record.getUserName());
            existing.setEmail(record.getEmail());
            //etc...
            service.update(existing);
        }

        return index(model);
    } 
```

# python - 一次读取文件 8 行 Python

> ID：13909150
> 
> 赞同：0
> 
> 时间：2012-12-17T06:10:03.373
> 
> 标签：python

您好我正在尝试一次读取 Python 8 行中的文件并将当前的 8 行用作 str 变量

但是我无法正确执行此操作，希望能提供任何帮助

```
with open("test.txt", 'r') as infile:
    lines_gen = islice(infile, 8)
    for lines in lines_gen:
        firstname = str(lines[0])
        lastname = str(lines[1])
        email = str(lines[2]) 
```

...

我怎样才能做到这一点

*干杯

和 ty 寻求帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:26:04.583

一次使用通常的 n 个事物模式

```
from itertools import izip

with open("test.txt") as f:
    line_gen = izip(*[f]*8)
    for lines in line_gen:
        print lines
        firstname, lastname, email, fourth, fifth, sixth, seventh, eighth = lines
        ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:17:00.393

使用 itertools.islice 的简单实现

```
from itertools import islice
with open("test.txt") as fin:
    try:
        while True:
            data =  islice(fin, 0, 8)

            firstname = next(data)
            lastname = next(data)
            email = next(data)
            #.....
    except StopIteration:
        pass 
```

一个更好的pythonic实现

```
>>> from collections import namedtuple
>>> from itertools import islice
>>> records = namedtuple('record',
                  ('firstname','lastname','email' #, .....
               ))
>>> with open("test.txt") as fin:
    try:
        while True:
            data =  islice(fin, 0, 3)

            data = record(*data)
            print data.firstname, data.lastname, data.email #.......
    except (StopIteration, TypeError):
        pass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:16:08.677

这个怎么样 ：-

```
with open("test.txt", 'r') as infile:
    lines_gen = infile.readlines()
    for i in range(0, len(lines_gen), 8):
        (firstname, lastname, email, etc1, ..) = lines_gen[i:i+8] 
```

**未经测试**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:33:09.187

```
with open("test.txt", 'r') as infile:
    it = iter(infile)
    while True:
        lines_list = []
        try:
            for i in range(8):
                lines_list.append(next(it))
        except StopIteration:
            if len(lines_list) == 0:
                break
        for eight_lines in lines_list:
            # Do something with eight_lines[0:8] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T06:27:39.850

尝试这个：

```
every_eight = []
lines = open('test.txt').readlines()
j = 0
for n in range(0, len(lines) +1, 8):
    every_eight.append(''.join([lines[l] for l in range(j, n)]))
    j = n 
```

顺便说一句，如果你想接受大量人或某事的大量输入，你可以尝试在这样的列表中使用字典：

```
info = []

every_eight = []
lines = open('test.txt').readlines()
j = 0
for n in range(0, len(lines) +1, 8):
    every_eight.append([lines[l] for l in range(j, n)])
    j = n

for setinf in every_eight:
    if len(setinf) == 8:
        info.append({
                'firstname': setinf[0],
                'lastname' : setinf[1],
                'email'    : setinf[2],
            })

for inf in info:
    print inf 
```

# c# - 为什么在 DbConfiguration 类中使用 SetDefaultConnectionFactory

> ID：13909156
> 
> 赞同：1
> 
> 时间：2012-12-17T06:10:58.910
> 
> 标签：c#, .net, entity-framework

我正在从[这个](http://entityframework.codeplex.com/wikipage?title=Code-based%20Configuration)站点学习 DBConfiguration 类。

```
public class MyConfiguration : DbConfiguration
{
    public MyConfiguration()
    {
        SetDefaultConnectionFactory(new LocalDbConnectionFactory("v11.0"));
        AddProvider("My.New.Provider", new MyProviderServices());
    }
} 
```

为什么`SetDefaultConnectionFactory`在这里使用？为什么提到它`Default`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:44:13.627

用于初始化与前端的提供者连接。有关数据库相关问题的更多详细信息，请参阅 [http://msdn.microsoft.com/en-us/library/system.data.entity.database.defaultconnectionfactory(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.database.defaultconnectionfactory(v=vs.103).aspx)

# javascript - JQuery：切换触发切换链接

> ID：13909160
> 
> 赞同：0
> 
> 时间：2012-12-17T06:11:12.690
> 
> 标签：javascript, jquery, toggle

我有一个使用切换的下拉菜单，并在单击 + 字符时触发（带有 .plusminus 类的元素）。当触发切换时，+ 符号也切换为“显示：无”，而 -（减号）符号切换为显示。

问题是单击减号不会触发下拉菜单再次切换 - 它仅在显示 + 号时才有效。

有谁知道我做错了什么？

谢谢

```
$('#menu li:has(ul)').each(function() {   
    $(this).append( "<span class='submenuplus plusminus'> &#43; </span>" );
    $(this).append( "<span class='submenuminus plusminus'> &#45; </span>" );   
});

$('#menu').on('click','.plusminus',function() {
    $(this).prev("ul").slideToggle("slow"),
    $('.submenuminus, .submenuplus').toggle();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:27:26.357

我为你清理了点击事件。尝试以下内容

```
$('#menu li:has(ul)').each(function() {   
    $(this).append( "<span class='submenuplus plusminus'> &#43; </span>" );
    $(this).append("<span class='submenuminus plusminus'> &#45; </span>");
    $(this).find('.submenuminus').hide();    
});

$('#menu .plusminus').click(function(){
    $(this).prevAll("ul").slideToggle("slow"),
    $(this).parent().find('.plusminus').toggle();
});​ 
```

让你绊倒的一个问题是使用

```
$(this).prev("ul") 
```

这将返回符号的嵌套`<ul>`，`+`但不返回`-`符号，因为`.prev([selector])`只找到与选择器匹配的**直接兄弟。**The`<ul>`不是符号的直接*​​兄弟*（*带有符号的 The**介于**两者之间）***，**因此您必须改用.`-``<span>` *`<span>``+`*`.prevAll([selector])`

# android - 如何删除空白活动中的灰色条

> ID：13909168
> 
> 赞同：1
> 
> 时间：2012-12-17T06:11:37.073
> 
> 标签：android

当我向 android 项目添加新的空白活动时，在编辑器中，我在屏幕灰色条的顶部看到图标和应用程序名称。我怎样才能删除它？(安卓 3.2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:14:45.667

将代码放入 Android 清单文件中。

```
 android:theme="@android:style/Theme.NoTitleBar" 
```

在`<application>`或`<activity>`标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T06:14:58.450

只需将此属性粘贴到清单文件中`<application>`或`<activity>`标记

```
android:theme="@android:style/Theme.NoTitleBar" 
```

通过将其放入`<Application>`标签中，将 -> 删除您创建的每个活动中的标题栏。

或者如果你`<Activity>`只把它放进去。活动本身没有标题栏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:16:21.423

进入您的 AndroidManifest.xml 文件并使用以下代码：

```
<activity android:name=".className"
        android:theme="@android:style/Theme.NoTitleBar"></activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:19:50.453

该灰色条被称为`ActionBar`您可以通过将以下属性设置为您`Activity`的清单来删除它`<activity android:theme="@android:style/Theme.Holo.NoActionBar">`

您可以参考[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)文档了解更多详细信息

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-09T13:38:02.113

我成功使用了以下代码（API 16）：

```
 android:theme="@style/Theme.AppCompat.NoActionBar" 
```

我所做的只是改变

> 应用主题

到

> Theme.AppCompat.NoActionBar

我希望它可以帮助别人。:)

# authentication - Symfony 登录表单验证

> ID：13909177
> 
> 赞同：2
> 
> 时间：2012-12-17T06:12:20.607
> 
> 标签：authentication, symfony-2.1, symfony-forms

如何在 login_check 之前验证登录表单？重要的是告诉用户，电子邮件是无效的，而不是“错误的凭据”。

我应该使用事件监听器吗？还是在表单验证后简单地重定向到控制器操作中的 login_check？

PS。我找不到 symfony2.1 的任何解决方案或建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:13:42.140

只需使用 Symfony2[电子邮件字段类型](http://symfony.com/doc/current/reference/forms/types/email.html)：

```
$builder->add('email', 'email', array(
    'attr' => array(
        'placeholder' => 'Email'),
    'label' => '* Email: '
)); 
```

# c# - Asp.net Linq 查询抛出异常

> ID：13909179
> 
> 赞同：0
> 
> 时间：2012-12-17T06:12:21.990
> 
> 标签：c#, asp.net, linq

**错误详细信息：** 无法创建类型为“ `Huntable.Data.MasterEmployee`”的常量值。此上下文仅支持原始类型或枚举类型。

```
IList<MasterEmployee> masterEmployees = sizeIds
    .Select(followerId => MasterDataManager.AllEmployees
    .Single(x => x.Id == followerId)).ToList(); 
rspdata.DataSource = CompanyManager.GetCompanyJobs(masterEmployees); 

IList<Company> companies = new List<Company>();
IQueryable<IGrouping<string, Job>> job = from c in context.Jobs
    group c by c.CompanyName;
IList<string> comapnyname= (
    from gro in job 
    from masterEmployee in sizeids 
    where gro.Count() >= masterEmployee.Min 
       && gro.Count() <= masterEmployee.Max select gro.Key).ToList();
var companiesList = companies.ToList(); 
```

公司名称行出现以下异常。

# c# - 英语语言环境中的双精度值

> ID：13909180
> 
> 赞同：1
> 
> 时间：2012-12-17T06:12:30.577
> 
> 标签：c#

我有一行用于字符串格式的代码，如下所示 -

```
double dVal = Convert.ToDouble(args[0], 
                              System.Globalization.CultureInfo.InvariantCulture);
string result = string.Format("{0}", dVal); 
```

现在在其他语言环境（如德语和法语）中，`result`字符串包含“，”而不是“。” 这是预期的行为。

有什么我可以添加的东西，我可以用它的“。”来保持我的双重价值。并且不包含“，”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:38:51.770

格式化字符串时明确使用英语文化。如果您需要它与解析字符串的其他应用程序进行往返，请使用 Invariant 文化，就像您在解析时所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:34:03.113

您可以修改当前的[NumberFormatInfo](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimalseparator.aspx)对象以将小数分隔符明确设置为您需要的分隔符。

像这样的东西应该可以解决问题：

```
double dVal = Convert.ToDouble(args[0],
                                  System.Globalization.CultureInfo.InvariantCulture);

var nfi = NumberFormatInfo.CurrentInfo.Clone() as NumberFormatInfo;
nfi.NumberDecimalSeparator = ".";

string result = string.Format(nfi, "{0}", dVal); 
```

请注意，您必须克隆 ，`NumberFormatInfo`因为属性是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:37:17.900

您可以只使用`String.Replace`它，因为它不在乎它是否不包含“，”

```
double dVal = Convert.ToDouble(args[0], System.Globalization.CultureInfo.InvariantCulture);
string result =  dVal.ToString().Replace(',','.'); 
```

不是最好的解决方案，但快速简单:)

# ios - iTunes Connect App Update 发布日期说明

> ID：13909182
> 
> 赞同：3
> 
> 时间：2012-12-17T06:13:17.083
> 
> 标签：ios, app-store-connect, updates

因此，在 iTunes Connect 中，我提交了一个应用更新，选择了在获得批准后“自动发布”更新的选项。现在我的问题是，该选项是否会遵守我在权利和定价选项卡中设置的发布日期？

我已经选择了未来的权利和定价日期，并且还取消了所有国家/地区的选择，因此当应用更新获得批准时，它不会在应用商店中上线，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:18:24.853

是的，你是对的。当应用程序获得批准后，如果发布日期设置为未来日期，它将不会立即在应用商店中可见。

但是，当您将发布日期设置为未来时，不仅更新而且当前版本也将停止出现在应用商店中。希望很清楚。

# objective-c - 导航堆栈中的 iOS 6 Storyboard UITableView 没有动画返回

> ID：13909185
> 
> 赞同：0
> 
> 时间：2012-12-17T06:13:29.173
> 
> 标签：objective-c, uinavigationcontroller, ios6, uitableview

我在 UINavigationController 中嵌入了一个 UITableViewController。我只在 iOS 6 中使用 Storyboard。当我点击 Reports Row 时，我会在右侧看到一个不错的 Push 动画。当我按下 Auto Generated Back 按钮时，我的导航标题会消失并动画到左侧，但我的 UITableView 突然出现了。我的目标是让 UITableview 有一个标准的推送动画，就像按下后退按钮时的标准一样。希望这是帮助我调试所需的相关代码。我完全不知所措。当我向上导航导航树时，我在深入研究的每个视图中都看到了相同的行为。它们都是 UITableViewController 的子类。

在我获得更多声望点之前，我无法发布我的 Storyboard 的图片。如果需要帮助查看层次结构，我可以通过电子邮件向某人发送一张照片。

我的故事板层次结构是：

```
UITabviewController
-UINavigationViewController
--ReportsVC
---AvaliableEquipmentVC
----AvaliableEquipmentDetailVC 
```

**报告VC.h**

```
#import <UIKit/UIKit.h>
@interface ReportsVC : UITableViewController
@property (strong, nonatomic) NSMutableArray *reportList;
@end 
```

**报告VC.m**

```
#import "ReportsVC.h"
#import "AvaliableEquipment.h"

@interface ReportsVC ()

@end

@implementation ReportsVC

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.reportList = [[NSMutableArray alloc] init];

    // List Reports Here
    [self.reportList addObject:@"Avaliable Equipment"];
    [self.reportList addObject:@"Active Lease Business"];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.reportList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ReportNameCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    UILabel *reportTitle = (UILabel *)[cell viewWithTag:100];
    NSString *text = [self.reportList objectAtIndex:indexPath.row];
    reportTitle.text = text;
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    switch (indexPath.row)
    {
        case 0: [self performSegueWithIdentifier:@"AvaliableEquipment" sender:nil]; break;
        case 1: [self performSegueWithIdentifier:@"ActiveLeaseBusiness" sender:nil]; break;
    }
} 
```

在我的 AvaliableEquipmentVC 中，除了查询 JSON 列表以获取我的 TableView 数据之外，我没有做任何特别的事情。当我按下通过情节提要自动生成的后退按钮时，我没有返回 UITableViewController ReportsVC 的动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:25:04.887

好的，找出我的问题所在。在我的最顶层对象 TableViewController 中，我有一个 (void)viewWillAppear 以及一个 (void)viewDidAppear 方法。在这些方法中，我必须添加 [super viewWillAppear:animated]; 以及 [super viewDidAppear:animated]; 他们每个人的线路。这导致动画重新开始工作。我忘记了我重写了那些来做一些自定义逻辑。

# c# - 无法在 datagridview 中的单元格离开事件上获取当前单元格值

> ID：13909188
> 
> 赞同：1
> 
> 时间：2012-12-17T06:13:38.970
> 
> 标签：c#, datagridview

当我在离开该单元格时尝试获取当前单元格的值时，我无法获取该单元格的值。我的代码在 Cell_Leave 事件中

```
 if (e.ColumnIndex == 5)
        {
            double netVal;
            double.TryParse(dgvRegister.Rows[e.RowIndex].Cells[4].Value.ToString(), out netVal);

            double Vat;
            double.TryParse(dgvRegister.Rows[e.RowIndex].Cells[5].Value.ToString(), out Vat);

            string amt = ((netVal / 100) * Vat).ToString();
        } 
```

在这种情况下，我得到了 cells[4] 值，当我来到 cells[5].value 时，我得到了**null value**。为什么我得到一个空值？请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:35:11.990

尝试更改`Value`为`EditedFormattedValue`

```
dgvRegister.Rows[e.RowIndex].Cells[4].EditedFormattedValue.ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:05:40.853

根据 spajce 的回答，`dgvRegister.Rows[e.RowIndex].Cells[4]`您也可以直接使用[`CurrentCell`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcell.aspx)的属性，而不是`DataGridView`。少一点代码。

```
dataGridView1.CurrentCell.EditedFormattedValue.ToString(); 
```

*顺便说一句，感谢 spajce`EditedFormattedValue`向我介绍。我不知道。*

# google-maps - 谷歌地图地点标签语言

> ID：13909192
> 
> 赞同：4
> 
> 时间：2012-12-17T06:13:59.737
> 
> 标签：google-maps, google-maps-api-3

我已经知道我可以使用脚本标签中的“语言”属性来指示我想在地图中显示的语言。如下所示：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=en"></script> 
```

这样，所有的地点标签都会被翻译成英文并显示出来。

但是，我的主管对此并不满意。他希望地图在未选中“英语”选项时以不同的语言显示地点标签，例如[http://maps.google.com 。](http://maps.google.com)喜欢这张照片：

![谷歌地图标签显示](../Images/0f4478682b4e3956c3219eebbe3e3b24.png)

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:26:18.777

尽管 Google Maps API 不提供该功能，但我认为此示例对您的答案很封闭。

[https://google-developers.appspot.com/maps/documentation/javascript/examples/map-rtl](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-rtl)

1.  `<html dir="rtl">`
2.  `language=ar`

![在此处输入图像描述](../Images/a21f42baf67f713c6abdbf40805b3d87.png)

# r - 有没有办法在没有注册箭头或加号的情况下将记录的 R 代码粘贴到 R 控制台或 Rstudio 中？

> ID：13909194
> 
> 赞同：10
> 
> 时间：2012-12-17T06:14:11.873
> 
> 标签：r

举个例子，这将更有意义。CRAN 的典型 R 手册显示 R 代码，其中一行以 > 开头，缩进用 + 表示。 有关示例，请参见 [http://cran.r-project.org/web/packages/doMC/vignettes/gettingstartedMC.pdf 。](http://cran.r-project.org/web/packages/doMC/vignettes/gettingstartedMC.pdf)

问题在于，如果不将其复制到编辑器中并删除那些箭头和加号字符，您就无法将其剪切并粘贴到控制台中。有没有更简单的方法将该文本作为 R 代码执行？我想一定有人处理过这个问题。否则，我想我会写一个脚本。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T07:08:45.897

已经写好了。

[2009 年邓肯·默多克的帖子：](http://markmail.org/search/?q=list:org.r-project.r-help%20paste%20mac%20%22%2b%22#query:list:org.r-project.r-help%20paste%20mac%20%22%2b%22%20page:1%20mid:rilimp3xoxk56mnt%20state:results)

```
CleanTranscript <- function(lines) {
         lines <- grep("^[[:blank:]]*[^>+[:blank:]]*[>+]", lines, value = TRUE) 
         lines <- sub("^[[:blank:]]*[^>+[:blank:]]*[>+] ?", "", lines) }

source(textConnection(CleanTranscript(
       # This is the Windows input strategy
       readLines("clipboard")
       # See below for Mac version
                      )), 
                      echo = TRUE, max.deparse.length=Inf) 
```

[Gabor Grothendieck 在 2009 年的后续 R-help 帖子：](http://markmail.org/message/oblxhml236jgwxmm?q=list:org.r-project.r-help%20paste%20mac%20%22%2b%22)

```
process.source <- function(action = c("both", "run", "show"), echo = TRUE,
    max.deparse.length = Inf, ...) { 
    # This is the Mac input strategy
    L <- readLines(pipe("pbpaste"))
    #  for Windows devices use
    #  L <- readLines("clipboard")
    rx <- "^[[:blank:]]*[^>+[:blank:]]*[>+]" 
    is.cmd <- grepl(rx, L) 
    L[is.cmd] <- gsub(paste(rx, "?"), "", L[is.cmd]) 
    L[!is.cmd] <- paste("#", L[!is.cmd]) 
    action <- match.arg(action) 
  if (action != "run") for(el in L) cat(el, "\n") 
  if (action == "both") cat("##################################\n") 
  if (action != "show") 
       source(textConnection(L), echo = echo, 
       max.deparse.length = max.deparse.length, ...) 
invisible(L) } 
```

注意：赞成票促使我将此作为“功能请求”发布在 RStudio 讨论板上。虽然我还没有破解它，但如果它要内置到 RStudio 框架中，它可能需要更多的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-21T20:40:57.107

现在有一个不错的`RStudio` `Addin`名称`mischelper`（[https://github.com/dracodoc/mischelper](https://github.com/dracodoc/mischelper)），它的一个功能就是这样做的。拥有它的好处`Addin`是您可以将其变成键盘快捷键。通常粘贴是`Ctrl + V`这样我有我想从控制台复制的脚本/代码作为`Ctrl + B`. 它粘贴代码，例如：

```
> x <- 3
> switch(x, 2+2, mean(1:10), rnorm(5))
[1]  2.2903605  2.3271663 -0.7060073  1.3622045 -0.2892720

> centre <- function(x, type) {
+ switch(type,
+        mean = mean(x),
+        median = median(x),
+        trimmed = mean(x, trim = .1))
+ }
> x <- rcauchy(10)
> centre(x, "mean")
[1] 0.8760325 
```

进入：

```
x <- 3
switch(x, 2+2, mean(1:10), rnorm(5))
# [1]  2.2903605  2.3271663 -0.7060073  1.3622045 -0.2892720

centre <- function(x, type) {
  switch(type,
         mean = mean(x),
         median = median(x),
         trimmed = mean(x, trim = .1))
  }
x <- rcauchy(10)
centre(x, "mean")
# [1] 0.8760325 
```

# python - 如何在pyqt中同时运行两个不同的线程

> ID：13909195
> 
> 赞同：5
> 
> 时间：2012-12-17T06:14:13.123
> 
> 标签：python, multithreading, qt, pyqt, pyqt4

我有一种情况，我需要一个接一个地启动两个线程。我尝试了以下代码片段，在这里我可以启动 Thread12 但无法启动 Thread2。我怎样才能同时开始......？如何彼此启动2个线程...？

**代码片段**

```
class Thread1(QtCore.QThread):

    Thread1Signal = QtCore.pyqtSignal(str)

    def __init__(self):
        super(Thread1, self).__init__()

    def run(self):
        print 'Thread1 started'
        While True:

            #some statments
            if Condition:
                Thread1Signal.emit('Yes')
            else:
                Thread1Signal.emit('No')

class Thread2(QtCore.QThread):

    Thread2Signal = QtCore.pyqtSignal(str)

    def __init__(self):
        super(Thread2, self).__init__()

    def run(self):
        print 'Thread2 started'
        While True:

            #some statments
            if Condition:
                Thread2Signal.emit('Yes')
            else:
                Thread2Signal.emit('No')

class MainClass(QtCore.QObject):

    MainSignal1 = QtCore.pyqtSignal(str)
    MainSignal2 = QtCore.pyqtSignal(str)

    def __init__(self):
        super(MainClass, self).__init__()   

        Threadinstance1 = Thread1()
        Threadinstance1.Thread1Signal.connect(MainSignal1)

        Threadinstance2 = Thread2()
        Threadinstance2.Thread2Signal.connect(MainSignal2)

   def start(self):

       Threadinstance1.start()
       Threadinstance2.start()                #Thread2 never starts.

def signal1called(s):

    print s

def signal2called(s):

    print s

if __name__=='__main__':
    app = AtGui.QApplication(sys.argv)
    temp = MainClass()
    temp.MainSignal1.connect(signal1called)
    temp.MainSignal2.connect(signal2called)
    temp.start()
    sys.exit(app.exec()_) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T07:07:14.350

您将使用`QRunnable`and `QThreadPool`，如下所示：

```
import sys

from PyQt4.QtGui import QApplication
from PyQt4.QtCore import QThreadPool, QObject, QRunnable, pyqtSignal

class WorkerSignals(QObject):
    result = pyqtSignal(int)

class Worker(QRunnable):
    def __init__(self, task):
        super(Worker, self).__init__()

        self.task = task
        self.signals = WorkerSignals()

    def run(self):
        print 'Sending', self.task
        self.signals.result.emit(self.task)

class Tasks(QObject):
    def __init__(self):
        super(Tasks, self).__init__()

        self.pool = QThreadPool()
        self.pool.setMaxThreadCount(1)

    def process_result(self, task):
        print 'Receiving', task

    def start(self):
        for task in range(10):
            worker = Worker(task)
            worker.signals.result.connect(self.process_result)

            self.pool.start(worker)

        self.pool.waitForDone()

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = Tasks()
    main.start()
    sys.exit(app.exec_()) 
```

# android - 将按钮添加到自定义对话框的布局（dialog.xml）

> ID：13909198
> 
> 赞同：0
> 
> 时间：2012-12-17T06:14:19.260
> 
> 标签：android, xml, android-relativelayout, customdialog

感谢您的回答，在按照您的回复后，我设法从以下代码中得到了类似的东西，但我仍然有更多的修复。请尝试帮助。 ![在此处输入图像描述](../Images/c38b75364cb07adc0ff56da6a4ffee15.png)

对话框.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ListView
        android:id="@+id/listViewDialog"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button1"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/ImageView1" >
    </ListView>

    <CheckBox
        android:id="@+id/checkBoxAll"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/listView1"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="15dp"
        android:layout_marginRight="25dp"
        android:layout_marginTop="15dp"
        android:text="" />

    <ImageView
        android:id="@+id/ImageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="15dp"
        android:layout_marginLeft="14dp"
        android:layout_marginTop="15dp"
        android:background="#FFFFBB33"
        android:contentDescription="@string/app_name"
        android:scaleType="center"
        android:src="@drawable/alert_dialog_icon" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="128dp"
        android:layout_height="match_parent"
        android:layout_above="@+id/listViewDialog"
        android:layout_marginBottom="15dp"
        android:layout_marginTop="15dp"
        android:layout_toRightOf="@+id/ImageView1"
        android:gravity="center_vertical"
        android:text="Categories"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_toLeftOf="@+id/checkBoxAll"
        android:text="All"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="OK" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:22:35.617

试试这个，我修改了你的布局：

```
<ListView
    android:id="@+id/listViewDialog"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/ImageView1"
    android:layout_above="@+id/button1" >
</ListView>

<CheckBox
    android:id="@+id/checkBoxAll"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/listView1"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="15dp"
    android:layout_marginRight="25dp"
    android:layout_marginTop="15dp"
    android:text="" />

<ImageView
    android:id="@+id/ImageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="15dp"
    android:layout_marginLeft="14dp"
    android:layout_marginTop="15dp"
    android:background="#FFFFBB33"
    android:contentDescription="@string/app_name"
    android:scaleType="center"
     />

<TextView
    android:id="@+id/textView1"
    android:layout_width="128dp"
    android:layout_height="match_parent"
    android:layout_above="@+id/listViewDialog"
    android:layout_marginBottom="15dp"
    android:layout_marginTop="15dp"
    android:layout_toRightOf="@+id/ImageView1"
    android:gravity="center_vertical"
    android:text="Categories"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_toLeftOf="@+id/checkBoxAll"
    android:text="All"
    android:textAppearance="?android:attr/textAppearanceLarge" />
<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/button1"
    android:text="OK"
    android:layout_centerHorizontal="true"
    /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:50:50.937

尝试这个：

```
<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/button1"
    android:text="OK"
    android:layout_below="@id/textView2"
    android:layout_centerHorizontal="true"
    /> 
```

在 Android Cracker 的代码中。

# node.js - Mongodb复杂对象查询

> ID：13909206
> 
> 赞同：1
> 
> 时间：2012-12-17T06:14:56.087
> 
> 标签：node.js, mongodb

我想从包含如下所述对象的集合中找到城市的不同值：

```
{
location:{
              address:'XYZ',
              city:'New York'
         }
} 
```

你能帮我解决我需要触发的查询吗？我知道我必须使用`elemMatch`and `$exists`。但我的以下查询似乎有效并返回一个空集：

```
db.collectionName.distinct({'location':{'city':{$exists: true}}}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:29:40.063

[`db.collection.distinct`](http://docs.mongodb.org/manual/reference/javascript/#db.collection.distinct)将查询作为第二个参数。

这是你应该如何做的： -

```
db.collectionName.distinct('location.city', {'location.city': {$exists: true}}) 
```

此外，您还可以使用此[`distinct`](http://docs.mongodb.org/manual/reference/commands/#distinct)数据库命令：-

```
db.runCommand({  "distinct": "collectionName", 
                 "key": "location.city", 
                 "query": {'location.city' : {$exists: true}}
              }).values 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:28:23.517

`db.collectionName.distinct('location.city')`应该做的伎俩。

# assembly - movl $1, %ebx 是什么意思？

> ID：13909215
> 
> 赞同：0
> 
> 时间：2012-12-17T06:15:44.080
> 
> 标签：assembly

movl 目标地址，源地址是通常的约定。但是 movl $1, %ebx 没有意义，因为 $1 不是地址位置。

英特尔处理器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:20:11.637

它确实很有意义，只是你不知道这种语法（它被称为 AT&T 风格）。

它的作用是将值加载`1`到`EBX`寄存器中。

# java - android:onClick 监听器仅用于 XML 中的 onTouch

> ID：13909217
> 
> 赞同：1
> 
> 时间：2012-12-17T06:15:51.237
> 
> 标签：java, android, onclick, touch-event

我想使用 xml 代码`android:onClick="OnClickMethod"`。

但是，这意味着该方法只会被调用 onClick（即实际上用户必须单击 editText 两次）而不是 onTouch。

有没有一种等效的方法可以让我`OnClickMethod`在用户触摸时调用“”，而不是通过 XML 进行用户点击？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T06:22:49.967

尝试使用 onTouchEvent 而不是 onClick

这是执行双击的好站点。

[http://mobile.tutsplus.com/tutorials/android/android-gesture/](http://mobile.tutsplus.com/tutorials/android/android-gesture/)

[编辑 1]

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);     

        editText1.setOnTouchListener(listener);
        editText2.setOnTouchListener(listener); 

    }

OnTouchListener listener = new OnTouchListener() {      
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch (v.getId()) {
            case R.id.editText1:

                break;

             case R.id.editText2:

                break;

            default:
                break;
            }           
            return false;
        }
    }; 
```

# python - 如何为我的 REST 客户端生成 WSDL 文件？

> ID：13909225
> 
> 赞同：1
> 
> 时间：2012-12-17T06:17:06.547
> 
> 标签：python, rest, python-2.7

我不想为我的 REST Web 服务生成 WSDL 文件。我还需要在 Python 中解析它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:21:45.707

错了？

WSDL 通常指的是 SOAP，据我所知，它将实际的远程调用协议封装在它自己的协议中，并且恰好使用 HTTP 作为传输

REST 指（通常）*适当*地使用 HTTP 方法，例如`DELETE /frobnication/1`将其删除`PUT /frobnication/1`将*完全替换*该 URL 下的事物（资源）。`POST /frobnication/1`更新它....（HTTP 确实有更多方法）。

REST 通常没有 WSDL 你，IIRC，有一些关于“众所周知的入口点”的讨论（谷歌）。

投票给我，但对我来说，这个问题似乎混淆了两个完全不同的主题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-10T07:19:03.470

> 直到最近，还没有正式的语言来描述具象状态传输 (REST) Web 服务。但是现在有了 WSDL 2.0！
> 
> WSDL 2.0 的发布以 REST Web 服务为设计理念，作为万维网联盟 (W3C) 的推荐，意味着现在有一种语言来描述 REST Web 服务。

[您可以在使用 WSDL 2.0 描述 REST Web 服务](http://www.ibm.com/developerworks/webservices/library/ws-restwsdl/)中找到更多信息

# c# - 为什么这个存储过程不更新数据库中的数据？

> ID：13909230
> 
> 赞同：2
> 
> 时间：2012-12-17T06:17:36.393
> 
> 标签：c#, sql, stored-procedures

我正在运行一个带有硬编码值的存储过程。该命令成功执行，没有任何错误。但是数据库中的数据没有更新。如果我使用 SQL Server 运行该存储过程，则数据正在更新。我的错误是什么？

C# 代码

```
using (SqlTransaction sqlTrans = con.BeginTransaction())
{
    using (SqlCommand AdjustTax = new SqlCommand("GP_SOP_AdjustTax", con, sqlTrans))
    {
        try
        {
            AdjustTax.CommandType = CommandType.StoredProcedure;
            AdjustTax.Parameters.Add("@IN_SOPType", SqlDbType.Int).Value = 3;
            AdjustTax.Parameters.Add("@IN_SOPNo", SqlDbType.VarChar).Value = "stdinv2278";
            AdjustTax.Parameters.Add("@IN_AdjustAmount", SqlDbType.Int).Value = 0.04;
            AdjustTax.Parameters.Add("@O_iError", SqlDbType.Int, 250);
            AdjustTax.Parameters["@O_iError"].Direction = ParameterDirection.Output;

            if (con == null || con.State == ConnectionState.Closed)
            {
                con.Open();
            }

            AdjustTax.ExecuteNonQuery();
            int Error = (int)AdjustTax.Parameters["@O_iError"].Value;

            if (Error == 0)
            {
                MessageBox.Show("Tax is Adjusted");
            }
            if (Error != 0)
            {
                MessageBox.Show("Error No:" + Error1);
            }

            sqlTrans.Commit();
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            sqlTrans.Rollback();
        }

        finally
        {
            con.Close();
        }
    }
} 
```

SQL Server 代码

```
DECLARE @return_value int,
        @O_iError int

EXEC    @return_value = [dbo].[GP_SOP_AdjustTax]    
        @IN_SOPType = 3,   
        @IN_SOPNo = 'stdinv2278',    
        @IN_AdjustAmount = 0.04,    
        @O_iError = @O_iError OUTPUT

SELECT  @O_iError as N'@O_iError'

SELECT  'Return Value' = @return_value

GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:40:10.037

我认为问题是由这条线引起的：

```
AdjustTax.Parameters.Add("@IN_AdjustAmount", SqlDbType.Int).Value = 0.04; 
```

由于类型是`SqlDbType.Int`并且您传入 0.04，因此该值很可能四舍五入为 0。没有看到实际存储过程的内容，我只能猜测为该参数传入 0 值会导致存储过程跳过更新，或者存储过程执行的计算导致列被更新为它最初具有的相同值。

我会尝试将该行更改为：

```
AdjustTax.Parameters.Add("@IN_AdjustAmount", SqlDbType.Decimal).Value = 0.04M 
```

**EDIT**
`Decimal`是`Numeric`Sql 类型的正确映射，如此[处所述](https://stackoverflow.com/questions/1604110/sqldbtype-enumeration-mapping-c-sharp)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:51:36.170

尝试 SqlDbType.Decimal：

```
AdjustTax.Parameters.Add("@IN_AdjustAmount", SqlDbType.Decimal).Value = 0.04; 
```

# c# - 在 C# 中使用 linq to xml 以正确的方式创建 xml 的子元素

> ID：13909236
> 
> 赞同：0
> 
> 时间：2012-12-17T06:18:33.367
> 
> 标签：c#, xml, linq, linq-to-xml

我的问题是商店名称应该是公司名称的子元素，但发生的情况是它们是相同的我该如何解决这个问题？

这是示例输出：

```
 <?xml version="1.0" encoding="utf-8"?>
<Records>
  <CompanyName>Company 1</CompanyName>
  <StoreName>Store 2</StoreName>
  <StoreName>Store 3</StoreName>
  <StoreName>Store 5</StoreName>
  <CompanyName>Company 2</CompanyName>
  <StoreName>Store 1</StoreName>
  <StoreName>Store 4</StoreName>
</Records> 
```

这是我的代码：

```
qlCommand cmd = new SqlCommand("select company_name, company_id from company", cn);
            //SqlCommand cmd = new SqlCommand("SELECT dbo.company.company_name, dbo.store.store_name, dbo.store.company_id FROM dbo.company INNER JOIN dbo.store ON dbo.company.company_id = dbo.store.company_id", cn);
            SqlDataAdapter adapter = new SqlDataAdapter(cmd);
            DataTable dt = new DataTable();
            adapter.Fill(dt);

            SqlCommand cmd2 = new SqlCommand("select store_name, company_id from store", cn);
            SqlDataAdapter adapter2 = new SqlDataAdapter(cmd2);
            DataTable dt2 = new DataTable();
            adapter2.Fill(dt2);

            dataGridView1.DataSource = dt;

            XElement xml = new XElement("Records");
            foreach (DataRow row in dt.Rows)
            {
                xml.Add(new XElement("CompanyName", row["company_name"].ToString()));
                foreach (DataRow row1 in dt2.Rows)
                {
                    if(row["company_id"].ToString() == row1["company_id"].ToString())
                    {
                        xml.Add(new XElement("StoreName", row1["store_name"].ToString()));
                    }
                }
            }

            xml.Save("C:\\Users\\PHWS13\\Desktop\\test.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:34:31.147

问题是您添加的元素`xml`始终处于同一级别（即您始终将元素添加为“记录”元素的子元素）。

试试这个：

```
XElement xml = new XElement("Records");
foreach (DataRow row in dt.Rows)
{
    var companyName = new XElement("CompanyName", row["company_name"].ToString())
    xml.Add(companyName);
    foreach (DataRow row1 in dt2.Rows)
    {
        if(row["company_id"].ToString() == row1["company_id"].ToString())
        {
            companyName.Add(new XElement("StoreName", row1["store_name"].ToString()));
        }
    }
} 
```

# java - 在android中是否可以使用java socket程序通过http传输文件？

> ID：13909237
> 
> 赞同：1
> 
> 时间：2012-12-17T06:18:36.817
> 
> 标签：java, android, http, sockets

我正在创建一个应用程序，以使用 http 套接字程序将文件从 android 设备发送到另一台设备。这是代码，服务器端

```
try {
            ServerSocket servsock = new ServerSocket(4042);
            File myFile = new File(pathToFile);
            while (true) {
                Socket sock = servsock.accept();
                byte[] mybytearray = new byte[(int) myFile.length()];
                BufferedInputStream bis = new BufferedInputStream(
                        new FileInputStream(myFile));
                bis.read(mybytearray, 0, mybytearray.length);
                OutputStream os = sock.getOutputStream();
                os.write(mybytearray, 0, mybytearray.length);
                os.flush();
                bis.close();
                sock.close();

            }
        } catch (Exception e) {
            Toast.makeText(MyActivity.context,
                    "Failed to send file!", Toast.LENGTH_SHORT)
                    .show();
        } 
```

而客户端，

```
try {
                Socket sock = new Socket(ipAddress, 4042);
                byte[] mybytearray = new byte[1024];
                InputStream is = sock.getInputStream();
                FileOutputStream fos = new FileOutputStream("/mnt/sdcard/"
                        +fileName);
                BufferedOutputStream bos = new BufferedOutputStream(fos);
                int bytesRead = is.read(mybytearray, 0, mybytearray.length);
                bos.write(mybytearray, 0, bytesRead);
                bos.close();
                sock.close();
            } catch (Exception e) {
                Toast.makeText(MyActivity.context,
                        "Failed to download the file!", Toast.LENGTH_LONG)
                        .show();
            } 
```

这两个代码都在 AsyncTask 类中。但是客户端总是超时。这是在 android 中通过 Internet 传输文件的正确方法吗？如果是这样，请告诉我我做错了什么。提前致谢。

编辑：在这里，文件需要在服务器端发送，客户端正在尝试下载该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:23:27.513

在服务器端代码中：

```
byte[] mybytearray = new byte[(int) myFile.length()]; 
```

如果 myFile 是目标，并且您刚刚创建了它（意味着该文件尚不存在），那么 myFile.length() 将为 0。这意味着您正在创建一个大小为 0 的缓冲区，读取 0 个字节。

服务器需要知道要从套接字读取多少数据。一种解决方法可能是 android 应用程序首先写入文件的长度，服务器读取它并根据该长度创建一个缓冲区，然后写入完整的文件。另外，我建议您将`.close()`呼叫移至 finally 块。

或者，您可以只在 Android 上使用[Apache FTP 客户端](http://commons.apache.org/net/api-3.2/org/apache/commons/net/ftp/FTPClient.html)，在服务器端使用您最喜欢的 FTP 服务器。

# c - C程序查找ac文件的函数名

> ID：13909239
> 
> 赞同：3
> 
> 时间：2012-12-17T06:18:54.647
> 
> 标签：c, function, c-preprocessor, preprocessor-directive

我正在用 C（Linux 操作系统）编程。我必须读取一个文件，检查该文件中的函数并打印相应的函数名称。到目前为止，我已经编程使用'{'的深度计算来识别函数。我知道`__FUNCTION__`预处理器指令用于打印当前文件的函数名。同样，是否有任何预处理器指令用于查找我们读取的文件的函数名称？我不关心任何特定的工具。我想让它编程。请指导我。提前致谢。

我试图实现这段代码。这个函数将行（在'{'之前）作为参数。

```
void ffname(char line[100])
{
    int i,j,m,n,f=0;
    char dt[10],fname[28];
    char s[5][10]={"int","void","struct","char","float"};
    dt = strtok(line," ");
    for(i=0;i<5;i++)
    {
        m=strcmp(dt,s[i]);
        if(m==0)
        {
            f=1;
            n=strlen(dt);
        }
    }
    if(f)
    {
        for(i=n+2,j=0;i<strlen(line);i++,j++)
        {
            if(line[i] == '*')
                i++;
            while(line[i] != '(')
            {
                fname[j]=line[i];
            }  
        }
    }
} 
```

我不知道这段代码是否正确。我要这样使用吗？有没有找到函数名的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:41:10.443

我假设您正在阅读的文件是 C 源文件。

如果您想正确地完成它（意味着，如果您想要可靠地识别所有功能），这不是一项微不足道的任务。有关更多信息，请参阅[列出 C/C++ 函数（Unix 中的代码分析）](https://stackoverflow.com/questions/2783612/listing-c-c-functions-code-analysis-in-unix)。

> 我不关心任何特定的工具。我想让它编程。

这当然是可能的，但你最终会得到一个 C 的扫描器/解析器前端，类似于[Doxygen](http://www.doxygen.nl/)或[Synopsis](http://synopsis.fresco.org/)等工具中已经实现的。您可能可以稍微简化一下并使用一些启发式方法，例如您不需要解析完整的代码（例如，您可以跳过 和 之间的任何内容`{`）`}`。

如果您仍想实现自己的方法，我将按照以下步骤操作：

*   在任何情况下，您都应该首先通过 C 预处理器运行您的 C 文件，以解析任何宏并使原始 C 代码可用。
*   然后熟悉基本的[编译器构造](http://en.wikipedia.org/wiki/Compiler_construction)技术，尤其是扫描和[解析](http://en.wikipedia.org/wiki/Parsing)源文件以及 C 语法。请注意，有不同的语法，具体取决于您使用的 C 版本。[例如，ISO/IEC 9899:TC2，附录 A1](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1124.pdf)包含 C99 的语法。查看上述工具的源代码也应该有所帮助。
*   实现一个扫描器来标记您的输入，并实现一个识别函数名称的解析器。从我之前提到的语法来看，`(6.9.1) function-definition`是你应该开始的生产术语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T06:53:03.473

我使用简单的 C 代码来查找函数的名称。

```
#include <stdio.h>
#include <string.h>

#define SIZE 1024
void ffname(char *line)
{
    int i=1,j=0;
    char *dt; 
    char name[SIZE];
    strtok(line,"("); 
    dt = strchr(line,' '); 
    if(dt[i] == '*')
        i++;
    while(dt[i] != '\0')
    {
        name[j]=dt[i];
        i++;
        j++;
    }
    name[j] ='\0';
    printf("Function name is: %s\n", name);
}

int main(int argc, char **argv)
{
    if(argc < 2)
    {
        printf("Give the filename \n");
        printf("Usage: %s filename\n", argv[0]);
        return -1;
    }
    int i, lines =0, funlines =0,count =0, fn =0, flag =0;
    char c[SIZE],b[SIZE];
    FILE *fd;
    fd = fopen(argv[1],"r");
    while(fgets(c,SIZE,fd))
    {   
        lines++;
        i=0;
        for(i=0;i<strlen(c);i++)
        {
            while( c[i] =='\t' || c[i] == ' ')
            {
                i++;
            }
            if( c[i] == '{')
            {
                count++;
                if(flag)
                {
                    funlines++;
                }
                if(count == 1)
                {
                    fn++;
                    printf("Function %d is Started..............\n", fn); 
                    flag = 1;
                    ffname(b);
                }
                break;
            }
            else if( c[i] == '}')
            {
                count--;
                if(!count)
                { 
                    flag = 0;
                    printf("No of lines in the function %d is: %d\n", fn, funlines);
                    printf("Function %d is finished..........\n", fn);
                    funlines = 0;
                }
                else
                {
                    funlines++;
                }
                break;
            }
            else if(flag)
            {
                funlines++;
                break;
            }
        }
        strcpy(b,c);
    }
    printf("Total no of function%d\n",fn);
    printf("Total no of lines%d\n",lines);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:38:23.790

这很难正确地做到。基本上，您需要实现 ac 编译器才能正确执行此操作。这正是 c 编译器所做的，并且需要适当的语法定义和预处理器来执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T09:11:12.280

为 C 编写解析器很困难（不是不可能，很困难），仅仅是因为 C 支持这么多语法。

您可以使用定义一个函数

1.  标准 C 样式，具有标准返回类型
2.  标准 C 风格，具有 typedef/enum 等返回类型（不能用简单的解析器轻松识别。您需要在文件中构建用户定义数据类型的数据库）
3.  C 宏（例如参考 Basile 的[回答](https://stackoverflow.com/questions/13909239/c-program-to-find-the-function-name-of-a-c-file#13909287)）
4.  汇编（通过解析一个非常简单的 test.c`gcc -S`来了解语法）我已经使用这种方法创建了一些占位符函数。

因此，您可以更轻松地解析汇编文件，而不是解析 C 文件。

例如`gcc -S`，将 C 函数定义翻译如下：

```
 .globl  someFnName
    .type   someFnName, @function
someFnName:
    ...function-body related code... 
```

如果您只想要函数名称列表（即不需要参数/返回值等），与 C 文件相比，您可以轻松地在汇编中解析上述 3 行代码。
如果您还添加`-g`开关，`-s`您还将获得一些行号信息。

好处：

1.  比 C 文件更容易解析
2.  负责定义函数的大多数（如果不是全部）方法。
3.  根据“ `.globl someFnName`”行是否存在，您可以隔离静态功能。

坏处：

1.  需要外部解析器 - gcc 或其他
2.  需要编译器 (gcc) 依赖的辅助解析器
3.  可能会给出一些误报

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T09:26:36.330

我认为`flex`并且`bison`会帮助你解决你的问题，这里有一些链接：[c grammar(lex)](http://www.lysator.liu.se/c/ANSI-C-grammar-l.html) , [c grammar(bison)](http://www.lysator.liu.se/c/ANSI-C-grammar-y.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-17T13:35:13.060

简单的方法，如果您愿意做一些假设，请阅读源代码，然后：

*   删除任何 preprosessor 指令（假设您不希望包含文件中的函数，并且不想处理`#define`可能与函数相关的任何不稳定的宏，请注意 multiline在行尾`#define`继续）。`\`

*   删除所有评论（注意嵌套`/*`评论）。

*   将任何字符串转换为`""`（注意转义`\"`和多行字符串）。

*   将任何字符转换为`' '`或其他东西（摆脱`'{'`等，小心转义`\'`和其他转义）。

*   将所有（嵌套、多行）代码块转换为“顶级”`{}`对。

*   `;`重新格式化文本以仅在and之后有换行符`}`，除非将一行中的一个单独`;`的行连接到上一行，以防它实际上是其中的一部分`};`而不是函数定义。

*   删除所有以`;`

除非我遗漏了什么，现在你应该留下所有的函数定义，每行一个，函数体替换为`{}`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T06:21:09.047

我认为您可以尝试 使用**正则表达式**来查找目标**函数名称**是否存在。

你可以在这篇文章中找到更多关于正则表达式的信息。[C中的正则表达式：示例？](https://stackoverflow.com/questions/1085083/regular-expressions-in-c-examples)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-17T06:24:16.277

你读什么样的文件？它是一些任意的 C 源文件吗？如果是，它可以用许多不同的方式定义函数，例如通过预处理器宏。例如与

```
#define DF(Nam) void Nam##print(void) {puts(#Nam);} 
```

一个 C 文件可能已经`DF(foo)`定义了这个函数（在源代码中 `fooprint`没有出现）。`fooprint`

如果您想处理编译器看到的一组函数名称，最好开发一个编译器扩展或插件。使用 GCC，您可以为此目的使用[MELT （一种扩展 GCC 的领域特定语言）。](http://gcc-melt.org/)

如果要查找某个目标文件定义的 [global] 函数`*.o`，可以`nm`在 Linux 上使用该命令。也许还考虑[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html) -ing 共享目标文件`*.so`

当然，所有这些都可能是编译器和系统特定的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-17T10:11:27.803

如果您可以使用 gcc：

```
gcc -nostdinc -aux-info output demo.c 
```

仅输出文件函数（不包括标准库）

注意：-nostdinc 导致编译错误

您可以使用 sed 避免编译错误

```
gcc -aux-info output demo.c
sed '/include/d' output 
```

# excel - 使用 Excel VBA 生成 Code 128 条码

> ID：13909248
> 
> 赞同：13
> 
> 时间：2012-12-17T06:20:00.933
> 
> 标签：excel, vba, code128

我正在尝试通过使用 VBA 在 Excel 中生成 Code 128 条形码。我找到了一个 VBA 类，有人通过 VBForums 制作和共享（后来修改为使用 Excel VBA），但我在让它工作时遇到了问题。

如果我在启用 Excel 宏的电子表格中使用以下代码，则在尝试对任何输入使用 Code128_Str() 函数时会收到 #VALUE 错误。

我缺乏正确调试代码的必要技能。如果可以更正此脚本，我认为这对许多尝试这样做的人来说将非常有用。有问题的脚本使用免费字体生成相关的 Code 128 输出条形码。

参考资料： [http](http://www.barcodeman.com/info/c128.php3) ://www.barcodeman.com/info/c128.php3 （字体下载） [http://www.vbforums.com/printthread.php?t=514742&pp=40&page=1](http://www.vbforums.com/printthread.php?t=514742&pp=40&page=1)（原版论坛主题代码）

```
' ***    Made By Michael Ciurescu (CVMichael)   ***
'Modified by Paulo Cunha (pcunha) to work with char128.ttf on word or excel on 16/05/2011
'the font at in http://grandzebu.net/index.php?page=/informatique/codbar-en/code128.htm

' References:
' http://www.barcodeman.com/info/c128.php3

Private Enum eCode128Type
    eCode128_CodeSetA = 1
    eCode128_CodeSetB = 2
    eCode128_CodeSetC = 3
End Enum

Private Type tCode
    ASet As String
    BSet As String
    CSet As String
    BarSpacePattern As String
End Type

Private CodeArr() As tCode

Private Sub Class_Initialize()
    ReDim CodeArr(106)

    AddEntry 0, " ", " ", "00", Chr(32)
    AddEntry 1, "!", "!", "01", Chr(33)
    AddEntry 2, """", """", "02", Chr(34)
    AddEntry 3, "#", "#", "03", Chr(35)
    AddEntry 4, "$", "$", "04", Chr(36)
    AddEntry 5, "%", "%", "05", Chr(37)
    AddEntry 6, "&", "&", "06", Chr(38)
    AddEntry 7, "'", "'", "07", Chr(39)
    AddEntry 8, "(", "(", "08", Chr(40)
    AddEntry 9, ")", ")", "09", Chr(41)
    AddEntry 10, "*", "*", "10", Chr(42)
    AddEntry 11, "+", "+", "11", Chr(43)
    AddEntry 12, ",", ",", "12", Chr(44)
    AddEntry 13, "-", "-", "13", Chr(45)
    AddEntry 14, ".", ".", "14", Chr(46)
    AddEntry 15, "/", "/", "15", Chr(47)
    AddEntry 16, "0", "0", "16", Chr(48)
    AddEntry 17, "1", "1", "17", Chr(49)
    AddEntry 18, "2", "2", "18", Chr(50)
    AddEntry 19, "3", "3", "19", Chr(51)
    AddEntry 20, "4", "4", "20", Chr(52)
    AddEntry 21, "5", "5", "21", Chr(53)
    AddEntry 22, "6", "6", "22", Chr(54)
    AddEntry 23, "7", "7", "23", Chr(55)
    AddEntry 24, "8", "8", "24", Chr(56)
    AddEntry 25, "9", "9", "25", Chr(57)
    AddEntry 26, ":", ":", "26", Chr(58)
    AddEntry 27, ";", ";", "27", Chr(59)
    AddEntry 28, "<", "<", "28", Chr(60)
    AddEntry 29, "=", "=", "29", Chr(61)
    AddEntry 30, ">", ">", "30", Chr(62)
    AddEntry 31, "?", "?", "31", Chr(63)
    AddEntry 32, "@", "@", "32", Chr(64)
    AddEntry 33, "A", "A", "33", Chr(65)
    AddEntry 34, "B", "B", "34", Chr(66)
    AddEntry 35, "C", "C", "35", Chr(67)
    AddEntry 36, "D", "D", "36", Chr(68)
    AddEntry 37, "E", "E", "37", Chr(69)
    AddEntry 38, "F", "F", "38", Chr(70)
    AddEntry 39, "G", "G", "39", Chr(71)
    AddEntry 40, "H", "H", "40", Chr(72)
    AddEntry 41, "I", "I", "41", Chr(73)
    AddEntry 42, "J", "J", "42", Chr(74)
    AddEntry 43, "K", "K", "43", Chr(75)
    AddEntry 44, "L", "L", "44", Chr(76)
    AddEntry 45, "M", "M", "45", Chr(77)
    AddEntry 46, "N", "N", "46", Chr(78)
    AddEntry 47, "O", "O", "47", Chr(79)
    AddEntry 48, "P", "P", "48", Chr(80)
    AddEntry 49, "Q", "Q", "49", Chr(81)
    AddEntry 50, "R", "R", "50", Chr(82)
    AddEntry 51, "S", "S", "51", Chr(83)
    AddEntry 52, "T", "T", "52", Chr(84)
    AddEntry 53, "U", "U", "53", Chr(85)
    AddEntry 54, "V", "V", "54", Chr(86)
    AddEntry 55, "W", "W", "55", Chr(87)
    AddEntry 56, "X", "X", "56", Chr(88)
    AddEntry 57, "Y", "Y", "57", Chr(89)
    AddEntry 58, "Z", "Z", "58", Chr(90)
    AddEntry 59, "[", "[", "59", Chr(91)
    AddEntry 60, "\", "\", "60", Chr(92)
    AddEntry 61, "]", "]", "61", Chr(93)
    AddEntry 62, "^", "^", "62", Chr(94)
    AddEntry 63, "_", "_", "63", Chr(95)
    AddEntry 64, Chr(0), "`", "64", Chr(96) ' Null
    AddEntry 65, Chr(1), "a", "65", Chr(97) ' SOH
    AddEntry 66, Chr(2), "b", "66", Chr(98) ' STX
    AddEntry 67, Chr(3), "c", "67", Chr(99) ' ETX
    AddEntry 68, Chr(4), "d", "68", Chr(100) ' EOT
    AddEntry 69, Chr(5), "e", "69", Chr(101) ' ENQ
    AddEntry 70, Chr(6), "f", "70", Chr(102) ' ACK
    AddEntry 71, Chr(7), "g", "71", Chr(103) ' BEL
    AddEntry 72, Chr(8), "h", "72", Chr(104) ' BS
    AddEntry 73, Chr(9), "i", "73", Chr(105) ' HT
    AddEntry 74, Chr(10), "j", "74", Chr(106) ' LF
    AddEntry 75, Chr(11), "k", "75", Chr(107) ' VT
    AddEntry 76, Chr(12), "l", "76", Chr(108) ' FF
    AddEntry 77, Chr(13), "m", "77", Chr(109) ' CR
    AddEntry 78, Chr(14), "n", "78", Chr(110) ' SO
    AddEntry 79, Chr(15), "o", "79", Chr(111) ' SI
    AddEntry 80, Chr(16), "p", "80", Chr(112) ' DLE
    AddEntry 81, Chr(17), "q", "81", Chr(113) ' DC1
    AddEntry 82, Chr(18), "r", "82", Chr(114) ' DC2
    AddEntry 83, Chr(19), "s", "83", Chr(115) ' DC3
    AddEntry 84, Chr(20), "t", "84", Chr(116) ' DC4
    AddEntry 85, Chr(21), "u", "85", Chr(117) ' NAK
    AddEntry 86, Chr(22), "v", "86", Chr(118) ' SYN
    AddEntry 87, Chr(23), "w", "87", Chr(119) ' ETB
    AddEntry 88, Chr(24), "x", "88", Chr(120) ' CAN
    AddEntry 89, Chr(25), "y", "89", Chr(121) ' EM
    AddEntry 90, Chr(26), "z", "90", Chr(122) ' SUB
    AddEntry 91, Chr(27), "{", "91", Chr(123) ' ESC
    AddEntry 92, Chr(28), "|", "92", Chr(124) ' FS
    AddEntry 93, Chr(29), "}", "93", Chr(125) ' GS
    AddEntry 94, Chr(30), "~", "94", Chr(126) ' RS
    AddEntry 95, Chr(31), Chr(127), "95", Chr(200) ' US, DEL
    AddEntry 96, "FNC 3", "FNC 3", "96", Chr(201)
    AddEntry 97, "FNC 2", "FNC 2", "97", Chr(202)
    AddEntry 98, "SHIFT", "SHIFT", "98", Chr(203)
    AddEntry 99, "CODE C", "CODE C", "99", Chr(204)
    AddEntry 100, "CODE B", "FNC 4", "CODE B", Chr(205)
    AddEntry 101, "FNC 4", "CODE A", "CODE A", Chr(206)
    AddEntry 102, "FNC 1", "FNC 1", "FNC 1", Chr(207)
    AddEntry 103, "Start A", "Start A", "Start A", Chr(208)
    AddEntry 104, "Start B", "Start B", "Start B", Chr(209)
    AddEntry 105, "Start C", "Start C", "Start C", Chr(210)
    AddEntry 106, "Stop", "Stop", "Stop", Chr(211)
End Sub

Private Sub AddEntry(ByVal Index As Integer, ASet As String, BSet As String, CSet As String, BarSpacePattern As String)
    With CodeArr(Index)
        .ASet = ASet
        .BSet = BSet
        .CSet = CSet
        .BarSpacePattern = Replace(BarSpacePattern, " ", "")
    End With
End Sub

Public Function Code128_Str(ByVal Str As String)
    Code128_Str = Replace(BuildStr(Str), " ", "")
End Function

Private Function BuildStr(ByVal Str As String) As String
    Dim SCode As eCode128Type, PrevSCode As eCode128Type
    Dim CurrChar As String, ArrIndex As Integer, CharIndex As Long
    Dim CheckDigit As Integer, CCodeIndex As Integer, TotalSum As Long

    SCode = eCode128_CodeSetB
    If Str Like "##*" Then SCode = eCode128_CodeSetC

    TotalSum = 0
    CharIndex = 1

    Select Case SCode
    Case eCode128_CodeSetA
        TotalSum = TotalSum + (103 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(208)
    Case eCode128_CodeSetB
        TotalSum = TotalSum + (104 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(209)
    Case eCode128_CodeSetC
        TotalSum = TotalSum + (105 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(210)
    End Select

    PrevSCode = SCode

    Do Until Len(Str) = 0
        If Str Like "####*" Then SCode = eCode128_CodeSetC

        If SCode = eCode128_CodeSetC And Mid(Str, 1, 2) Like "##" Then
            CurrChar = Mid(Str, 1, 2)
        Else
            CurrChar = Mid(Str, 1, 1)
        End If

        ArrIndex = GetCharIndex(CurrChar, SCode, True)

        If ArrIndex <> -1 Then
            If CodeArr(ArrIndex).BSet = CurrChar And ((SCode = eCode128_CodeSetC And CodeArr(ArrIndex).CSet <> CurrChar) Or (SCode = eCode128_CodeSetA And CodeArr(ArrIndex).ASet <> CurrChar)) Then
                SCode = eCode128_CodeSetB
            ElseIf CodeArr(ArrIndex).ASet = CurrChar And CodeArr(ArrIndex).BSet <> CurrChar Then
                SCode = eCode128_CodeSetA
            ElseIf CodeArr(ArrIndex).CSet = CurrChar Then
                SCode = eCode128_CodeSetC
            End If

            If PrevSCode <> SCode Then
                Select Case SCode
                Case eCode128_CodeSetA
                    CCodeIndex = GetCharIndex("CODE A", PrevSCode, False)
                Case eCode128_CodeSetB
                    CCodeIndex = GetCharIndex("CODE B", PrevSCode, False)
                Case eCode128_CodeSetC
                    CCodeIndex = GetCharIndex("CODE C", PrevSCode, False)
                End Select

                TotalSum = TotalSum + (CCodeIndex * CharIndex)
                BuildStr = Trim(BuildStr) & CodeArr(CCodeIndex).BarSpacePattern

                CharIndex = CharIndex + 1
                PrevSCode = SCode
            End If

            BuildStr = Trim(BuildStr) & CodeArr(ArrIndex).BarSpacePattern

            TotalSum = TotalSum + (ArrIndex * CharIndex)
            CharIndex = CharIndex + 1
        End If

        If SCode = eCode128_CodeSetC Then
            Str = Mid(Str, 3)
        Else
            Str = Mid(Str, 2)
        End If
    Loop

    CheckDigit = TotalSum Mod 103

    BuildStr = Trim(BuildStr) & CodeArr(CheckDigit).BarSpacePattern
    BuildStr = Trim(BuildStr) & Chr(211)
End Function

Private Function GetCharIndex(ByVal Char As String, ByVal CodeType As eCode128Type, ByVal Recurse As Boolean) As Integer
    Dim K As Long

    Select Case CodeType
    Case eCode128_CodeSetA
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).ASet Then Exit For
        Next K
    Case eCode128_CodeSetB
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).BSet Then Exit For
        Next K
    Case eCode128_CodeSetC
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).CSet Then Exit For
        Next K
    End Select

    If K = UBound(CodeArr) + 1 Then
        If Not Recurse Then
            GetCharIndex = -1
        Else
            Select Case CodeType
            Case eCode128_CodeSetA
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetC, False)
            Case eCode128_CodeSetB
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetA, False)
            Case eCode128_CodeSetC
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetB, False)
            End Select

            If GetCharIndex = -1 Then
                Select Case CodeType
                Case eCode128_CodeSetA
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetB, False)
                Case eCode128_CodeSetB
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetC, False)
                Case eCode128_CodeSetC
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetA, False)
                End Select
            End If
        End If
    Else
        GetCharIndex = K
    End If
End Function

Public Function Code128_GetWidth(ByVal Str As String, Optional ByVal BarWidth As Integer = 1) As Long
    Dim K As Long, Width As Long

    Str = Replace(Code128_Str(Str), " ", "")
    Debug.Print Str
    For K = 1 To Len(Str)
        Width = Width + Val(Mid(Str, K, 1))
    Next K

    Code128_GetWidth = Width * BarWidth + (28 * BarWidth)
End Function

Private Sub Class_Terminate()

End Sub 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T07:15:22.523

这里是如何使用它你需要有

1.  模块（存储您可以从 Excel 电子表格调用的 UDF 函数）
2.  类模块（用于存储类对象）

**Module** 其中 Class1 是类模块的名称

```
Public Function Code128_Str(ByVal Str As String) As String
Dim c As Class1
Set c = New Class1
Code128_Str = c.Code128_Str(Str)
End Function 
```

**类模块**

```
' ***    Made By Michael Ciurescu (CVMichael)   ***
'Modified by Paulo Cunha (pcunha) to work with char128.ttf on word or excel on 16/05/2011
'the font at in http://grandzebu.net/index.php?page=/informatique/codbar-en/code128.htm

' References:
' http://www.barcodeman.com/info/c128.php3

Private Enum eCode128Type
    eCode128_CodeSetA = 1
    eCode128_CodeSetB = 2
    eCode128_CodeSetC = 3
End Enum

Private Type tCode
    ASet As String
    BSet As String
    CSet As String
    BarSpacePattern As String
End Type

Private CodeArr() As tCode

Private Sub Class_Initialize()
    ReDim CodeArr(106)

    AddEntry 0, " ", " ", "00", Chr(32)
    AddEntry 1, "!", "!", "01", Chr(33)
    AddEntry 2, """", """", "02", Chr(34)
    AddEntry 3, "#", "#", "03", Chr(35)
    AddEntry 4, "$", "$", "04", Chr(36)
    AddEntry 5, "%", "%", "05", Chr(37)
    AddEntry 6, "&", "&", "06", Chr(38)
    AddEntry 7, "'", "'", "07", Chr(39)
    AddEntry 8, "(", "(", "08", Chr(40)
    AddEntry 9, ")", ")", "09", Chr(41)
    AddEntry 10, "*", "*", "10", Chr(42)
    AddEntry 11, "+", "+", "11", Chr(43)
    AddEntry 12, ",", ",", "12", Chr(44)
    AddEntry 13, "-", "-", "13", Chr(45)
    AddEntry 14, ".", ".", "14", Chr(46)
    AddEntry 15, "/", "/", "15", Chr(47)
    AddEntry 16, "0", "0", "16", Chr(48)
    AddEntry 17, "1", "1", "17", Chr(49)
    AddEntry 18, "2", "2", "18", Chr(50)
    AddEntry 19, "3", "3", "19", Chr(51)
    AddEntry 20, "4", "4", "20", Chr(52)
    AddEntry 21, "5", "5", "21", Chr(53)
    AddEntry 22, "6", "6", "22", Chr(54)
    AddEntry 23, "7", "7", "23", Chr(55)
    AddEntry 24, "8", "8", "24", Chr(56)
    AddEntry 25, "9", "9", "25", Chr(57)
    AddEntry 26, ":", ":", "26", Chr(58)
    AddEntry 27, ";", ";", "27", Chr(59)
    AddEntry 28, "<", "<", "28", Chr(60)
    AddEntry 29, "=", "=", "29", Chr(61)
    AddEntry 30, ">", ">", "30", Chr(62)
    AddEntry 31, "?", "?", "31", Chr(63)
    AddEntry 32, "@", "@", "32", Chr(64)
    AddEntry 33, "A", "A", "33", Chr(65)
    AddEntry 34, "B", "B", "34", Chr(66)
    AddEntry 35, "C", "C", "35", Chr(67)
    AddEntry 36, "D", "D", "36", Chr(68)
    AddEntry 37, "E", "E", "37", Chr(69)
    AddEntry 38, "F", "F", "38", Chr(70)
    AddEntry 39, "G", "G", "39", Chr(71)
    AddEntry 40, "H", "H", "40", Chr(72)
    AddEntry 41, "I", "I", "41", Chr(73)
    AddEntry 42, "J", "J", "42", Chr(74)
    AddEntry 43, "K", "K", "43", Chr(75)
    AddEntry 44, "L", "L", "44", Chr(76)
    AddEntry 45, "M", "M", "45", Chr(77)
    AddEntry 46, "N", "N", "46", Chr(78)
    AddEntry 47, "O", "O", "47", Chr(79)
    AddEntry 48, "P", "P", "48", Chr(80)
    AddEntry 49, "Q", "Q", "49", Chr(81)
    AddEntry 50, "R", "R", "50", Chr(82)
    AddEntry 51, "S", "S", "51", Chr(83)
    AddEntry 52, "T", "T", "52", Chr(84)
    AddEntry 53, "U", "U", "53", Chr(85)
    AddEntry 54, "V", "V", "54", Chr(86)
    AddEntry 55, "W", "W", "55", Chr(87)
    AddEntry 56, "X", "X", "56", Chr(88)
    AddEntry 57, "Y", "Y", "57", Chr(89)
    AddEntry 58, "Z", "Z", "58", Chr(90)
    AddEntry 59, "[", "[", "59", Chr(91)
    AddEntry 60, "\", "\", "60", Chr(92)
    AddEntry 61, "]", "]", "61", Chr(93)
    AddEntry 62, "^", "^", "62", Chr(94)
    AddEntry 63, "_", "_", "63", Chr(95)
    AddEntry 64, Chr(0), "`", "64", Chr(96) ' Null
    AddEntry 65, Chr(1), "a", "65", Chr(97) ' SOH
    AddEntry 66, Chr(2), "b", "66", Chr(98) ' STX
    AddEntry 67, Chr(3), "c", "67", Chr(99) ' ETX
    AddEntry 68, Chr(4), "d", "68", Chr(100) ' EOT
    AddEntry 69, Chr(5), "e", "69", Chr(101) ' ENQ
    AddEntry 70, Chr(6), "f", "70", Chr(102) ' ACK
    AddEntry 71, Chr(7), "g", "71", Chr(103) ' BEL
    AddEntry 72, Chr(8), "h", "72", Chr(104) ' BS
    AddEntry 73, Chr(9), "i", "73", Chr(105) ' HT
    AddEntry 74, Chr(10), "j", "74", Chr(106) ' LF
    AddEntry 75, Chr(11), "k", "75", Chr(107) ' VT
    AddEntry 76, Chr(12), "l", "76", Chr(108) ' FF
    AddEntry 77, Chr(13), "m", "77", Chr(109) ' CR
    AddEntry 78, Chr(14), "n", "78", Chr(110) ' SO
    AddEntry 79, Chr(15), "o", "79", Chr(111) ' SI
    AddEntry 80, Chr(16), "p", "80", Chr(112) ' DLE
    AddEntry 81, Chr(17), "q", "81", Chr(113) ' DC1
    AddEntry 82, Chr(18), "r", "82", Chr(114) ' DC2
    AddEntry 83, Chr(19), "s", "83", Chr(115) ' DC3
    AddEntry 84, Chr(20), "t", "84", Chr(116) ' DC4
    AddEntry 85, Chr(21), "u", "85", Chr(117) ' NAK
    AddEntry 86, Chr(22), "v", "86", Chr(118) ' SYN
    AddEntry 87, Chr(23), "w", "87", Chr(119) ' ETB
    AddEntry 88, Chr(24), "x", "88", Chr(120) ' CAN
    AddEntry 89, Chr(25), "y", "89", Chr(121) ' EM
    AddEntry 90, Chr(26), "z", "90", Chr(122) ' SUB
    AddEntry 91, Chr(27), "{", "91", Chr(123) ' ESC
    AddEntry 92, Chr(28), "|", "92", Chr(124) ' FS
    AddEntry 93, Chr(29), "}", "93", Chr(125) ' GS
    AddEntry 94, Chr(30), "~", "94", Chr(126) ' RS
    AddEntry 95, Chr(31), Chr(127), "95", Chr(200) ' US, DEL
    AddEntry 96, "FNC 3", "FNC 3", "96", Chr(201)
    AddEntry 97, "FNC 2", "FNC 2", "97", Chr(202)
    AddEntry 98, "SHIFT", "SHIFT", "98", Chr(203)
    AddEntry 99, "CODE C", "CODE C", "99", Chr(204)
    AddEntry 100, "CODE B", "FNC 4", "CODE B", Chr(205)
    AddEntry 101, "FNC 4", "CODE A", "CODE A", Chr(206)
    AddEntry 102, "FNC 1", "FNC 1", "FNC 1", Chr(207)
    AddEntry 103, "Start A", "Start A", "Start A", Chr(208)
    AddEntry 104, "Start B", "Start B", "Start B", Chr(209)
    AddEntry 105, "Start C", "Start C", "Start C", Chr(210)
    AddEntry 106, "Stop", "Stop", "Stop", Chr(211)
End Sub

Private Sub AddEntry(ByVal Index As Integer, ASet As String, BSet As String, CSet As String, BarSpacePattern As String)
    With CodeArr(Index)
        .ASet = ASet
        .BSet = BSet
        .CSet = CSet
        .BarSpacePattern = Replace(BarSpacePattern, " ", "")
    End With
End Sub

Public Function Code128_Str(ByVal Str As String)
    Code128_Str = Replace(BuildStr(Str), " ", "")
End Function

Private Function BuildStr(ByVal Str As String) As String
    Dim SCode As eCode128Type, PrevSCode As eCode128Type
    Dim CurrChar As String, ArrIndex As Integer, CharIndex As Long
    Dim CheckDigit As Integer, CCodeIndex As Integer, TotalSum As Long

    SCode = eCode128_CodeSetB
    If Str Like "##*" Then SCode = eCode128_CodeSetC

    TotalSum = 0
    CharIndex = 1

    Select Case SCode
    Case eCode128_CodeSetA
        TotalSum = TotalSum + (103 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(208)
    Case eCode128_CodeSetB
        TotalSum = TotalSum + (104 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(209)
    Case eCode128_CodeSetC
        TotalSum = TotalSum + (105 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(210)
    End Select

    PrevSCode = SCode

    Do Until Len(Str) = 0
        If Str Like "####*" Then SCode = eCode128_CodeSetC

        If SCode = eCode128_CodeSetC And Mid(Str, 1, 2) Like "##" Then
            CurrChar = Mid(Str, 1, 2)
        Else
            CurrChar = Mid(Str, 1, 1)
        End If

        ArrIndex = GetCharIndex(CurrChar, SCode, True)

        If ArrIndex <> -1 Then
            If CodeArr(ArrIndex).BSet = CurrChar And ((SCode = eCode128_CodeSetC And CodeArr(ArrIndex).CSet <> CurrChar) Or (SCode = eCode128_CodeSetA And CodeArr(ArrIndex).ASet <> CurrChar)) Then
                SCode = eCode128_CodeSetB
            ElseIf CodeArr(ArrIndex).ASet = CurrChar And CodeArr(ArrIndex).BSet <> CurrChar Then
                SCode = eCode128_CodeSetA
            ElseIf CodeArr(ArrIndex).CSet = CurrChar Then
                SCode = eCode128_CodeSetC
            End If

            If PrevSCode <> SCode Then
                Select Case SCode
                Case eCode128_CodeSetA
                    CCodeIndex = GetCharIndex("CODE A", PrevSCode, False)
                Case eCode128_CodeSetB
                    CCodeIndex = GetCharIndex("CODE B", PrevSCode, False)
                Case eCode128_CodeSetC
                    CCodeIndex = GetCharIndex("CODE C", PrevSCode, False)
                End Select

                TotalSum = TotalSum + (CCodeIndex * CharIndex)
                BuildStr = Trim(BuildStr) & CodeArr(CCodeIndex).BarSpacePattern

                CharIndex = CharIndex + 1
                PrevSCode = SCode
            End If

            BuildStr = Trim(BuildStr) & CodeArr(ArrIndex).BarSpacePattern

            TotalSum = TotalSum + (ArrIndex * CharIndex)
            CharIndex = CharIndex + 1
        End If

        If SCode = eCode128_CodeSetC Then
            Str = Mid(Str, 3)
        Else
            Str = Mid(Str, 2)
        End If
    Loop

    CheckDigit = TotalSum Mod 103

    BuildStr = Trim(BuildStr) & CodeArr(CheckDigit).BarSpacePattern
    BuildStr = Trim(BuildStr) & Chr(211)
End Function

Private Function GetCharIndex(ByVal Char As String, ByVal CodeType As eCode128Type, ByVal Recurse As Boolean) As Integer
    Dim K As Long

    Select Case CodeType
    Case eCode128_CodeSetA
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).ASet Then Exit For
        Next K
    Case eCode128_CodeSetB
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).BSet Then Exit For
        Next K
    Case eCode128_CodeSetC
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).CSet Then Exit For
        Next K
    End Select

    If K = UBound(CodeArr) + 1 Then
        If Not Recurse Then
            GetCharIndex = -1
        Else
            Select Case CodeType
            Case eCode128_CodeSetA
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetC, False)
            Case eCode128_CodeSetB
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetA, False)
            Case eCode128_CodeSetC
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetB, False)
            End Select

            If GetCharIndex = -1 Then
                Select Case CodeType
                Case eCode128_CodeSetA
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetB, False)
                Case eCode128_CodeSetB
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetC, False)
                Case eCode128_CodeSetC
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetA, False)
                End Select
            End If
        End If
    Else
        GetCharIndex = K
    End If
End Function

Public Function Code128_GetWidth(ByVal Str As String, Optional ByVal BarWidth As Integer = 1) As Long
    Dim K As Long, Width As Long

    Str = Replace(Code128_Str(Str), " ", "")
    Debug.Print Str
    For K = 1 To Len(Str)
        Width = Width + Val(Mid(Str, K, 1))
    Next K

    Code128_GetWidth = Width * BarWidth + (28 * BarWidth)
End Function

Private Sub Class_Terminate()

End Sub 
```

然后在 SpreadSheet 中，在任何单元格中，您可以调用 like `=Code128_Str("TESTING")` 或 `=Code128_Str(A1)`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-26T18:23:08.103

Larry 的代码很棒，但我只发现了一个小问题。（我会评论他的回答，但我没有足够的声望点）。我在编码双零时遇到了问题。例如“1200”。“00”转换为空格。代码中有许多地方“修剪”空格或“替换”空格。当我尝试编码“1200”时，生成的条形码只会是“12”。为了解决这个问题，我删除了适用的“修剪”和“替换”，如下所示。下面的代码只是类模块。有关模块代码，请参阅 Larry 的帖子。

**类模块**

```
' ***    Made By Michael Ciurescu (CVMichael)   ***
'Modified by Paulo Cunha (pcunha) to work with char128.ttf on word or excel on 16/05/2011
'the font at in http://grandzebu.net/index.php?page=/informatique/codbar-en/code128.htm
' References:
' http://www.barcodeman.com/info/c128.php3

Private Enum eCode128Type
    eCode128_CodeSetA = 1
    eCode128_CodeSetB = 2
    eCode128_CodeSetC = 3
End Enum

Private Type tCode
    ASet As String
    BSet As String
    CSet As String
    BarSpacePattern As String
End Type

Private CodeArr() As tCode

Private Sub Class_Initialize()
    ReDim CodeArr(106)

    AddEntry 0, " ", " ", "00", Chr(32)
    AddEntry 1, "!", "!", "01", Chr(33)
    AddEntry 2, """", """", "02", Chr(34)
    AddEntry 3, "#", "#", "03", Chr(35)
    AddEntry 4, "$", "$", "04", Chr(36)
    AddEntry 5, "%", "%", "05", Chr(37)
    AddEntry 6, "&", "&", "06", Chr(38)
    AddEntry 7, "'", "'", "07", Chr(39)
    AddEntry 8, "(", "(", "08", Chr(40)
    AddEntry 9, ")", ")", "09", Chr(41)
    AddEntry 10, "*", "*", "10", Chr(42)
    AddEntry 11, "+", "+", "11", Chr(43)
    AddEntry 12, ",", ",", "12", Chr(44)
    AddEntry 13, "-", "-", "13", Chr(45)
    AddEntry 14, ".", ".", "14", Chr(46)
    AddEntry 15, "/", "/", "15", Chr(47)
    AddEntry 16, "0", "0", "16", Chr(48)
    AddEntry 17, "1", "1", "17", Chr(49)
    AddEntry 18, "2", "2", "18", Chr(50)
    AddEntry 19, "3", "3", "19", Chr(51)
    AddEntry 20, "4", "4", "20", Chr(52)
    AddEntry 21, "5", "5", "21", Chr(53)
    AddEntry 22, "6", "6", "22", Chr(54)
    AddEntry 23, "7", "7", "23", Chr(55)
    AddEntry 24, "8", "8", "24", Chr(56)
    AddEntry 25, "9", "9", "25", Chr(57)
    AddEntry 26, ":", ":", "26", Chr(58)
    AddEntry 27, ";", ";", "27", Chr(59)
    AddEntry 28, "<", "<", "28", Chr(60)
    AddEntry 29, "=", "=", "29", Chr(61)
    AddEntry 30, ">", ">", "30", Chr(62)
    AddEntry 31, "?", "?", "31", Chr(63)
    AddEntry 32, "@", "@", "32", Chr(64)
    AddEntry 33, "A", "A", "33", Chr(65)
    AddEntry 34, "B", "B", "34", Chr(66)
    AddEntry 35, "C", "C", "35", Chr(67)
    AddEntry 36, "D", "D", "36", Chr(68)
    AddEntry 37, "E", "E", "37", Chr(69)
    AddEntry 38, "F", "F", "38", Chr(70)
    AddEntry 39, "G", "G", "39", Chr(71)
    AddEntry 40, "H", "H", "40", Chr(72)
    AddEntry 41, "I", "I", "41", Chr(73)
    AddEntry 42, "J", "J", "42", Chr(74)
    AddEntry 43, "K", "K", "43", Chr(75)
    AddEntry 44, "L", "L", "44", Chr(76)
    AddEntry 45, "M", "M", "45", Chr(77)
    AddEntry 46, "N", "N", "46", Chr(78)
    AddEntry 47, "O", "O", "47", Chr(79)
    AddEntry 48, "P", "P", "48", Chr(80)
    AddEntry 49, "Q", "Q", "49", Chr(81)
    AddEntry 50, "R", "R", "50", Chr(82)
    AddEntry 51, "S", "S", "51", Chr(83)
    AddEntry 52, "T", "T", "52", Chr(84)
    AddEntry 53, "U", "U", "53", Chr(85)
    AddEntry 54, "V", "V", "54", Chr(86)
    AddEntry 55, "W", "W", "55", Chr(87)
    AddEntry 56, "X", "X", "56", Chr(88)
    AddEntry 57, "Y", "Y", "57", Chr(89)
    AddEntry 58, "Z", "Z", "58", Chr(90)
    AddEntry 59, "[", "[", "59", Chr(91)
    AddEntry 60, "\", "\", "60", Chr(92)
    AddEntry 61, "]", "]", "61", Chr(93)
    AddEntry 62, "^", "^", "62", Chr(94)
    AddEntry 63, "_", "_", "63", Chr(95)
    AddEntry 64, Chr(0), "`", "64", Chr(96) ' Null
    AddEntry 65, Chr(1), "a", "65", Chr(97) ' SOH
    AddEntry 66, Chr(2), "b", "66", Chr(98) ' STX
    AddEntry 67, Chr(3), "c", "67", Chr(99) ' ETX
    AddEntry 68, Chr(4), "d", "68", Chr(100) ' EOT
    AddEntry 69, Chr(5), "e", "69", Chr(101) ' ENQ
    AddEntry 70, Chr(6), "f", "70", Chr(102) ' ACK
    AddEntry 71, Chr(7), "g", "71", Chr(103) ' BEL
    AddEntry 72, Chr(8), "h", "72", Chr(104) ' BS
    AddEntry 73, Chr(9), "i", "73", Chr(105) ' HT
    AddEntry 74, Chr(10), "j", "74", Chr(106) ' LF
    AddEntry 75, Chr(11), "k", "75", Chr(107) ' VT
    AddEntry 76, Chr(12), "l", "76", Chr(108) ' FF
    AddEntry 77, Chr(13), "m", "77", Chr(109) ' CR
    AddEntry 78, Chr(14), "n", "78", Chr(110) ' SO
    AddEntry 79, Chr(15), "o", "79", Chr(111) ' SI
    AddEntry 80, Chr(16), "p", "80", Chr(112) ' DLE
    AddEntry 81, Chr(17), "q", "81", Chr(113) ' DC1
    AddEntry 82, Chr(18), "r", "82", Chr(114) ' DC2
    AddEntry 83, Chr(19), "s", "83", Chr(115) ' DC3
    AddEntry 84, Chr(20), "t", "84", Chr(116) ' DC4
    AddEntry 85, Chr(21), "u", "85", Chr(117) ' NAK
    AddEntry 86, Chr(22), "v", "86", Chr(118) ' SYN
    AddEntry 87, Chr(23), "w", "87", Chr(119) ' ETB
    AddEntry 88, Chr(24), "x", "88", Chr(120) ' CAN
    AddEntry 89, Chr(25), "y", "89", Chr(121) ' EM
    AddEntry 90, Chr(26), "z", "90", Chr(122) ' SUB
    AddEntry 91, Chr(27), "{", "91", Chr(123) ' ESC
    AddEntry 92, Chr(28), "|", "92", Chr(124) ' FS
    AddEntry 93, Chr(29), "}", "93", Chr(125) ' GS
    AddEntry 94, Chr(30), "~", "94", Chr(126) ' RS
    AddEntry 95, Chr(31), Chr(127), "95", Chr(200) ' US, DEL
    AddEntry 96, "FNC 3", "FNC 3", "96", Chr(201)
    AddEntry 97, "FNC 2", "FNC 2", "97", Chr(202)
    AddEntry 98, "SHIFT", "SHIFT", "98", Chr(203)
    AddEntry 99, "CODE C", "CODE C", "99", Chr(204)
    AddEntry 100, "CODE B", "FNC 4", "CODE B", Chr(205)
    AddEntry 101, "FNC 4", "CODE A", "CODE A", Chr(206)
    AddEntry 102, "FNC 1", "FNC 1", "FNC 1", Chr(207)
    AddEntry 103, "Start A", "Start A", "Start A", Chr(208)
    AddEntry 104, "Start B", "Start B", "Start B", Chr(209)
    AddEntry 105, "Start C", "Start C", "Start C", Chr(210)
    AddEntry 106, "Stop", "Stop", "Stop", Chr(211)
End Sub

Private Sub AddEntry(ByVal Index As Integer, ASet As String, BSet As String, CSet As String, BarSpacePattern As String)
    With CodeArr(Index)
        .ASet = ASet
        .BSet = BSet
        .CSet = CSet
        '.BarSpacePattern = Replace(BarSpacePattern, " ", "")
        .BarSpacePattern = BarSpacePattern
    End With
End Sub

Public Function Code128_Str(ByVal Str As String)
    'Code128_Str = Replace(BuildStr(Str), " ", "")
    Code128_Str = BuildStr(Str)
End Function

Private Function BuildStr(ByVal Str As String) As String
    Dim SCode As eCode128Type, PrevSCode As eCode128Type
    Dim CurrChar As String, ArrIndex As Integer, CharIndex As Long
    Dim CheckDigit As Integer, CCodeIndex As Integer, TotalSum As Long

    SCode = eCode128_CodeSetB
    If Str Like "##*" Then SCode = eCode128_CodeSetC

    TotalSum = 0
    CharIndex = 1

    Select Case SCode
    Case eCode128_CodeSetA
        TotalSum = TotalSum + (103 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(208)
    Case eCode128_CodeSetB
        TotalSum = TotalSum + (104 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(209)
    Case eCode128_CodeSetC
        TotalSum = TotalSum + (105 * CharIndex)
        BuildStr = Trim(BuildStr) & Chr(210)
    End Select

    PrevSCode = SCode

    Do Until Len(Str) = 0
        If Str Like "####*" Then SCode = eCode128_CodeSetC

        If SCode = eCode128_CodeSetC And Mid(Str, 1, 2) Like "##" Then
            CurrChar = Mid(Str, 1, 2)
        Else
            CurrChar = Mid(Str, 1, 1)
        End If

        ArrIndex = GetCharIndex(CurrChar, SCode, True)

        If ArrIndex <> -1 Then
            If CodeArr(ArrIndex).BSet = CurrChar And ((SCode = eCode128_CodeSetC And CodeArr(ArrIndex).CSet <> CurrChar) Or (SCode = eCode128_CodeSetA And CodeArr(ArrIndex).ASet <> CurrChar)) Then
                SCode = eCode128_CodeSetB
            ElseIf CodeArr(ArrIndex).ASet = CurrChar And CodeArr(ArrIndex).BSet <> CurrChar Then
                SCode = eCode128_CodeSetA
            ElseIf CodeArr(ArrIndex).CSet = CurrChar Then
                SCode = eCode128_CodeSetC
            End If

            If PrevSCode <> SCode Then
                Select Case SCode
                Case eCode128_CodeSetA
                    CCodeIndex = GetCharIndex("CODE A", PrevSCode, False)
                Case eCode128_CodeSetB
                    CCodeIndex = GetCharIndex("CODE B", PrevSCode, False)
                Case eCode128_CodeSetC
                    CCodeIndex = GetCharIndex("CODE C", PrevSCode, False)
                End Select

                TotalSum = TotalSum + (CCodeIndex * CharIndex)
                'BuildStr = Trim(BuildStr) & CodeArr(CCodeIndex).BarSpacePattern
                BuildStr = BuildStr & CodeArr(CCodeIndex).BarSpacePattern

                CharIndex = CharIndex + 1
                PrevSCode = SCode
            End If

            'BuildStr = Trim(BuildStr) & CodeArr(ArrIndex).BarSpacePattern
            BuildStr = BuildStr & CodeArr(ArrIndex).BarSpacePattern

            TotalSum = TotalSum + (ArrIndex * CharIndex)
            CharIndex = CharIndex + 1
        End If

        If SCode = eCode128_CodeSetC Then
            Str = Mid(Str, 3)
        Else
            Str = Mid(Str, 2)
        End If
    Loop

    CheckDigit = TotalSum Mod 103

    'BuildStr = Trim(BuildStr) & CodeArr(CheckDigit).BarSpacePattern
    BuildStr = BuildStr & CodeArr(CheckDigit).BarSpacePattern
    'BuildStr = Trim(BuildStr) & Chr(211)
    BuildStr = BuildStr & Chr(211)
End Function

Private Function GetCharIndex(ByVal Char As String, ByVal CodeType As eCode128Type, ByVal Recurse As Boolean) As Integer
    Dim K As Long

    Select Case CodeType
    Case eCode128_CodeSetA
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).ASet Then Exit For
        Next K
    Case eCode128_CodeSetB
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).BSet Then Exit For
        Next K
    Case eCode128_CodeSetC
        For K = 0 To UBound(CodeArr)
            If Char = CodeArr(K).CSet Then Exit For
        Next K
    End Select

    If K = UBound(CodeArr) + 1 Then
        If Not Recurse Then
            GetCharIndex = -1
        Else
            Select Case CodeType
            Case eCode128_CodeSetA
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetC, False)
            Case eCode128_CodeSetB
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetA, False)
            Case eCode128_CodeSetC
                GetCharIndex = GetCharIndex(Char, eCode128_CodeSetB, False)
            End Select

            If GetCharIndex = -1 Then
                Select Case CodeType
                Case eCode128_CodeSetA
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetB, False)
                Case eCode128_CodeSetB
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetC, False)
                Case eCode128_CodeSetC
                    GetCharIndex = GetCharIndex(Char, eCode128_CodeSetA, False)
                End Select
            End If
        End If
    Else
        GetCharIndex = K
    End If
End Function

Public Function Code128_GetWidth(ByVal Str As String, Optional ByVal BarWidth As Integer = 1) As Long
    Dim K As Long, Width As Long

    Str = Replace(Code128_Str(Str), " ", "")
    Debug.Print Str
    For K = 1 To Len(Str)
        Width = Width + Val(Mid(Str, K, 1))
    Next K

    Code128_GetWidth = Width * BarWidth + (28 * BarWidth)
End Function

Private Sub Class_Terminate()

End Sub 
```

# c# - 如何从网址中删除百分号

> ID：13909253
> 
> 赞同：1
> 
> 时间：2012-12-17T06:20:54.240
> 
> 标签：c#, asp.net

错误地，我制作了几个带有 % 符号的 asp 页。例如 100%cotton.aspx。现在，当我试图在 url.it 上打开它时，它说：*Bad Request - Invalid URL HTTP Error 400*。请求 URL 无效。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:21:48.243

目前尚不清楚问题是什么，但`%`在路径中正确编码不应导致问题。% 在 Url 的“路径”部分是可以的，但需要正确编码为 %25。

处理所有编码的最好方法是使用`Uri`or`UriBuilder`类来构造 url：

```
 var url = new Uri("http://foo/bar%test").AbsoluteUri 
```

另一个选项（如 ashutosh raina 所建议）是简单地不在文件名中使用 % 。请注意，这并不意味着您不应该正确构建 url。

# android - 如何在android中弹出一些部分图像

> ID：13909268
> 
> 赞同：10
> 
> 时间：2012-12-17T06:21:57.960
> 
> 标签：android, image, imageview

我想显示图像的某些部分。就像一本漫画书。我有一个这样的图像。

![这是实际图像。](../Images/178e4523c7d2dbd4448493daa161797a.png)

当我单击图像时，某些部分会像这样显示。

![单击这部分图像时的第二张图像。](../Images/e0e284cbe9e0f225ccee6c82cc8384ae.png)

我想显示这种类型。在这个过程中，我创建了一些包含主图像图像部分的 zip 文件。我完成了明智地显示每个图像序列。但我的问题是如何让实际图像的任何部分单击并在第二个屏幕中显示它？

我无法获取图像部件 ID。那么如何获取图像ID的这一部分。

所以请帮助我。我被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:32:38.990

如果您有包含部分主图像的存档，那么这意味着您手动制作它们，对吗？因此，您的漫画书阅读器将仅适用于手动创建的内容。

确实如此，因此制作某种配置文件（例如基于 xml 或[属性](http://developer.android.com/reference/java/util/Properties.html)文件）将包含每个部分的大小和位置是没有问题的。

之后，您可以处理[MotionEvent](http://developer.android.com/reference/android/view/MotionEvent.html)并通过配置中的坐标检测零件的 ID。

您还可以通过即时剪切图像来改进您的应用程序。这并不难。

例子：

您在此处的图片 ( `page1.png`)：

```
--------------------------------
|                 |            |
|                 |            |
|                 |     2      |
|        1        |            |
|                 |            |
|                 |------------|
|                 |            |
|-----------------|            |
|                 |     4      |
|                 |            |
|                 |            |
|                 |------------|
|        3        |            |
|                 |            |
|                 |     5      |
|                 |            |
|                 |            |
-------------------------------- 
```

您的简单配置（`page1.cfg`）：

```
# Parts description
# id=x,y;w,h
1=0,0;18,9
2=19,0;13,7
3=0,10;18,11
4=19,8;13,7
5=19,15;13,6 
```

你的邮编：

```
page1.png
page1-1.png
page1-2.png
page1-3.png
page1-4.png
page1-5.png
page1.cfg
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:18:29.797

你可以为这个问题做一个技巧。

> **在布局内设置按钮（背景为透明）。**
> 
> 将按钮的 OnclickListener 设置为在课堂活动中显示您想要的弹出窗口。
> 
> 您还可以根据您的要求按可见/不可见功能管理按钮单击事件。

**已编辑**

您的 xml 将如下所示。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/YOUR_IMAGE" >

    <Button
        android:id="@+id/btn_invisible"
        android:layout_width="85dp" 
        android:layout_height="30dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="18dp"
        android:background="@android:color/transparent" />

</RelativeLayout> 
```

并在您的 Activity 类的 OnCreate() 方法中。

```
 @Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    setContentView(R.layout.help_1);
    btn_invisible = (Button) findViewById(R.id.btn_invisible);
    btn_invisible.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    if (v == btn_invisible) {
        //Whatever Code you want to Use for Show Popups

    } 
```

我不确定，但你可以尝试一次。

# cuda - l1 用于 CUDA CC 3.0 的共享银行冲突分析器计数器

> ID：13909271
> 
> 赞同：4
> 
> 时间：2012-12-17T06:22:30.233
> 
> 标签：cuda, gpu, profiler

带有 CC 3.0 的 CUDA 的新 l1_shared_bank_conflict（或等效）计数器是什么？在 CUPTI 用户指南中，它说 shared_[load|store]_bank_conflict，但是当我尝试时它没有显示。

我在 Linux 中使用命令行分析器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T19:33:32.530

旧的命令行分析器不支持一些新的计数器。如果你使用的是 CUDA 5，你可以试试 nvprof：

```
nvprof --events l1_shared_bank_conflict <app_name>

nvprof --query-events 
```

请参阅[http://docs.nvidia.com/cuda/profiler-users-guide/index.html#nvprof-overview](http://docs.nvidia.com/cuda/profiler-users-guide/index.html#nvprof-overview)

# css - 背景颜色不适用于 div

> ID：13909280
> 
> 赞同：1
> 
> 时间：2012-12-17T06:23:13.150
> 
> 标签：css, html, background-color

我正在尝试将 div 元素“High Tatras”“High Tatras 2”的背景颜色设置为带有 CSS 的黄色。

`gallery li {background-color: yellow;}`

jsfiddle 演示[http://jsfiddle.net/pragnesh/CjDDB/](http://jsfiddle.net/pragnesh/CjDDB/)

但是背景色黄色仅适用于元素的顶部和底部。

这段代码可能有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T06:27:02.580

jquery-ui 似乎有一个~~奇怪的多背景 css 规则~~（哈哈，它不是多背景……只是评论让我失望了……太晚了）。尝试只使用背景属性：

```
.gallery li {
    background: yellow;
} 
```

演示：http: [//jsfiddle.net/j2TtX/](http://jsfiddle.net/j2TtX/)

导致背景的规则是这样的：

```
.ui-widget-content { 
    border: 1px solid #aaaaaa/*{borderColorContent}*/;
    background: #ffffff/*{bgColorContent}*/ url(images/ui-bg_flat_75_ffffff_40x100.png)/*{bgImgUrlContent}*/ 50%/*{bgContentXPos}*/ 50%/*{bgContentYPos}*/ repeat-x/*{bgContentRepeat}*/;
    color: #222222/*{fcContent}*/;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:35:56.510

jquery UI 库中有一个白色背景图像，在你的 CSS 中添加这一行以覆盖 css 规则。

```
.gallery li.ui-widget-content{background-image:none;}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:37:18.923

高估这个背景是问题，您应该删除此类“.ui-widget-content”中的背景属性

```
.ui-widget-content {
    background: url("images/ui-bg_flat_75_ffffff_40x100.png") repeat-x scroll 50% 50% #FFFFFF;
    border: 1px solid #AAAAAA;
    color: #222222;
} 
```

它来自 jquery-ui.css（第 243 行）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:38:21.673

这是[工作代码](http://jsfiddle.net/zaheerahmed/CjDDB/4/)

问题是一旦你`background-image`为一个 div 设置了，你就不能通过它覆盖它，`background-color`因为它只设置颜色属性（它的优先级低于图像），而`background`属性将重置所有与背景相关的属性，即，

1.  背景颜色
2.  背景图片
3.  背景位置
4.  背景重复
5.  背景附件

并设置颜色。所以使用：

```
 background: yellow; 
```

# ruby-on-rails - 如何在不分页的情况下以 json/csv 导出数据

> ID：13909281
> 
> 赞同：0
> 
> 时间：2012-12-17T06:23:22.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我正在为我的一个项目使用 active_admin，并且我有一些包含大量数据的表（+100,000 条记录）。

可以分页浏览数据，但是当我想导出数据时（这样我可以在 excel 中进行自定义匹配），并且我尝试在 xml 中导出，它只是导出页面的当前记录，而不是导出过滤的总记录。

```
module ActiveAdmin
  class ResourceController
    module Collection
      module Pagination
        def max_csv_records
          1_000_000
        end
      end
    end
  end
end 
```

但这不适用于 xml/json，有什么想法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T12:33:04.740

这可能对某些版本的活动管理员有所帮助：

```
module ActiveAdmin::ResourceController::DataAccess
  protected

  def apply_pagination_with_csv(chain)
    return chain if request.format == 'text/csv'
    apply_pagination_without_csv(chain)
  end

  alias_method_chain :apply_pagination, :csv
end 
```

要确定补丁是否有效，您应该选择已安装的 gem[这个文件](https://github.com/activeadmin/activeadmin/blob/0-6-stable/lib/active_admin/resource_controller/data_access.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:00:21.000

我最终做了另一个猴子补丁，可能有更好的方法，但这个有效

```
module ActiveAdmin
  class ResourceController
    module Collection
      module Pagination
        def per_page
          return 1_000_000 if %w(text/csv application/xml application/json).include?(request.format)

          return max_per_page if active_admin_config.paginate == false

          @per_page || active_admin_config.per_page
        end
      end
    end
  end
endend 
```

# sql-server - 显示所有尝试连接 SQL Server 的用户

> ID：13909283
> 
> 赞同：1
> 
> 时间：2012-12-17T06:23:36.773
> 
> 标签：sql-server, sql-server-2008-r2

是否可以显示所有尝试连接到特定 SQL 服务器实例的用户？

我在某个地方有一个流氓进程，我找不到它。我还更改了 sql 密码，所以现在该进程无法连接到数据库，但我仍然想停止它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:12:56.820

访问错误日志和仅过滤失败登录的快速方法是运行以下查询：

```
EXEC sp_readerrorlog 0, 1, 'Login failed' 
```

0 表示您应该只搜索当前日志（对此 +1 以引用以前的日志文件） 1 表示您应该查看 SQL 错误日志，字符串是要搜索的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:28:42.340

在 SSMS 的 Object Explorer 中右键单击服务器，然后选择 Activity Monitor。展开流程部分。

这将为您提供与数据库的所有连接的列表，并查看它们正在做什么。您可以通过右键单击并选择“终止进程”来终止进程。

# plsql - 当函数返回记录时，如何在选择块中使用函数

> ID：13909284
> 
> 赞同：1
> 
> 时间：2012-12-17T06:23:50.863
> 
> 标签：plsql

当我的函数返回一个数组时。（类型 t_source 是一个数字表）

```
FUNCTION func_f(p_plan_id NUMBER,
                            p_item_id NUMBER) RETURN t_source IS
    x_source_o t_source; 
```

如何在不使用模板值的情况下在选择块中使用返回数组，例如：

```
select func_f(plan_id,item_id)(1),func_f(plan_id,item_id)(2) from dual; 
```

所以有人知道解决问题的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:23:04.503

您可以使用该函数来转换数组类型：

```
CREATE TYPE phone_book_t AS TABLE OF phone_list_typ;
/
SELECT CAST(COLLECT(phone_numbers) AS phone_book_t) 
   FROM customers; 
```

来源：[http ://docs.oracle.com/cd/B19306_01/server.102/b14200/functions024.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions024.htm)

# cocoa - Cocoa 警告：NSWindow 不支持实用程序 styleMask 0x10

> ID：13909289
> 
> 赞同：13
> 
> 时间：2012-12-17T06:24:29.743
> 
> 标签：cocoa, nswindow

我已经重新绘制了`NSWindow`，现在当我启动我的应用程序时，控制台中会出现一条警告，上面写着`NSWindow does not support utility styleMask 0x10`. 我怎样才能摆脱这个警告？

任何的想法？

谢谢！

![在此处输入图像描述](../Images/169ee7ab608af0c1be7b966ff484c39f.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-22T21:12:39.983

`NSUtilityWindowMask`是 a不支持的`styleMask`属性中的位 (0x10) 。`NSPanel``NSWindow`

如果您在 xib 中创建了它，那么您应该能够将自定义类更改为`NSPanel`，取消选中该`utility mask`复选框，然后将其更改回来。如果您在代码中执行此操作（或正在更改`styleMask`代码中的属性），请确保您没有设置`styleMask`.

# php - JavaScript 克隆使用 textareas 值创建副本

> ID：13909290
> 
> 赞同：1
> 
> 时间：2012-12-17T06:24:52.750
> 
> 标签：php, javascript, smarty

以下是我用于克隆的 JavaScript 代码：

```
function addCloneRow(obj) {                                
        if(obj) {               
            var tBody = obj.parentNode.parentNode.parentNode;                        
            var trTable = tBody.getElementsByTagName("tr")[tBody.getElementsByTagName("tr").length-1];                        
            var trClone = trTable.cloneNode(true);            
            if(trClone) {      
                var txt  = trClone.getElementsByTagName("input");                
                var srno  = trClone.getElementsByTagName("label");
                var dd   = trClone.getElementsByTagName("select");                                   

                for(var i=0; i<dd.length; i++) {
                    dd[i].options[0].selected=true;
                    var nm = dd[i].name;                    
                    var nNm = nm.substring((nm.indexOf("_")+1),nm.indexOf("["));                                        
                    dd[i].name = nNm+"[]";                    
                }                
                for(var j=0; j<txt.length; j++) {
                    var nm = txt[j].name;                    
                    var nNm = nm.substring((nm.indexOf("_")+1),nm.indexOf("["));                    
                    txt[j].name = nNm+"[]";                            
                    if(txt[j].type == "hidden"){ 
                        txt[j].value = "0"; 
                    }else if(txt[j].type == "text") {               
                        txt[j].value = "";              
                    }else if(txt[j].type == "checkbox") {               
                        txt[j].checked = false;
                    }
                }                   
                tBody.insertBefore(trClone, tBody.getElementsByTagName("tr")[tBody.getElementsByTagName("tr").length]);
            }
        }
    } 
```

以下是我的 HTML 代码：

```
<table id="step_details" style=" padding: 0px; margin: 5px; border-color: #fff;" align="center" frame="box" cellspacing="15">
        <tr>            
            <th width="45%">Step details</th>
            <th>Expected Results</th>
            <th width="25">Execution</th>
            <th><img src="gui/themes/default/images/ico_add.gif" onclick="addCloneRow(this);"/></th>            
        </tr>
        {foreach from=$gui->viewSteps item=step_info }
        <tr>            
            <input type="hidden" name="existing_id[]" value="{$step_info->id}">
                <td><textArea id="step_details" name="step_details[]">{$step_info->actions|strip_tags|trim}</textArea></td>
                <td><textArea id="expected_results" name="expected_results[]">{$step_info->expected_results|strip_tags|trim}</textArea></td>
                <td style="vertical-align: top;">

                    <select onchange="content_modified = true"  name="etype[]">
                        <option {if $step_info->execution_type eq  1 }selected="selected"  {/if} value="1" label="Manual">Manual</option>
                        <option  {if $step_info->execution_type eq  2 } selected="selected"  {/if}  value="2" label="Automated">Automated</option>
                    </select>
                </td>
                <td style="vertical-align: top;"><img src="gui/themes/default/images/ico_del.gif" onclick="removeCloneRow(this);"/></td>
        </tr>                
        {/foreach} 
        {if $smarty.post.doAction neq "edit"}
        <tr>            
            <td><textArea name="step_details[]"></textArea></td>
            <td><textArea name="expected_results[]"></textArea></td>
            <td style="vertical-align: top;">
                <select onchange="content_modified = true"  name="etype[]">
                    <option selected="selected" value="1" label="Manual">Manual</option>
                    <option value="2" label="Automated">Automated</option>
                </select>
            </td>
            <td style="vertical-align: top;"><img src="gui/themes/default/images/ico_del.gif" onclick="removeCloneRow(this);"/></td>
        </tr>
        {/if}   
    </table> 
```

克隆工作正常，但问题是如果我在编辑页面上，然后用 textarea 值克隆它，而不是我想要 textarea 中的空白值。在 textarea 中克隆后如何动态添加空白值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:33:02.660

在以下行之后：

```
var dd   = trClone.getElementsByTagName("select"); 
```

把这些行：

```
var textarea   = trClone.getElementsByTagName("textarea");
for(var i=0; i<textarea.length; i++) {
   textarea[i].value = '';
} 
```

希望这可以帮助。

# html - 有没有办法从控制器获取数据进行过滤？

> ID：13909291
> 
> 赞同：1
> 
> 时间：2012-12-17T06:24:56.097
> 
> 标签：html, angularjs

我是 angularjs 的新手。

我想在我的控制器中使用过滤器中的数据。

有什么具体的方法可以做 dat 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:19:52.803

在控制器中

```
$scope.variable=['1','2','3']; 
```

在视野中

```
<span>{{ variable | f1 }} 
```

在过滤器中

```
angular.module('Filters', ['Services']).filter('f1', function() {
 var events=Events.query();
 return function(input) { 
 alert(input)->['1','2','3']
}; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:20:43.797

最好的方法是将数据作为附加参数传递：`<span>{{ value | filter:anotherValue }}</span>`. 这样，`value`and`anotherValue`是控制器的作用域变量。这`filter`是您的自定义过滤器。过滤器将接收`anotherValue`内容作为第二个参数，对其进行更改将重新应用过滤器。这是一个[小提琴](http://jsfiddle.net/CaioToOn/KbQAD/)。

另一种解决方案是，如果您在编写过滤器时始终传递信息是不合适的，则在它们之间使用共享服务。然后，您可以从控制器公开属性并在过滤器中使用。这里的另一个[小提琴](http://jsfiddle.net/CaioToOn/SFbgm)（只需更改输入文本值）。

基本上，这就是小提琴上发生的事情：

```
// sets the shared data
mod.controller('Ctlr', function(sharedService) {
  sharedService.data = 'something';
}

// uses the shared data
mod.filter('customFilter', function(sharedService) {
  return function(input) {
     return input + sharedService.data;
  };
});

// the shared service that holds the data
mod.service('sharedService', function(){ 
  this.data = 'default value';
}); 
```

# asp.net - 如何从 couchdb 获取后续结果集，就像使用 SQL 的“下 N 行”一样？

> ID：13909293
> 
> 赞同：1
> 
> 时间：2012-12-17T06:25:28.203
> 
> 标签：asp.net, sql, couchdb

我正在为我的应用程序使用 couchdb 和 ASP.NET。我有大量数据，如果我在页面加载时完全加载它会破坏我的性能，所以我需要像“河景”一样做。

如果我向下滚动，我的 ajax 调用应该会获取下一组 12 个结果以在我的页面中查看。这在 SQL 中是可能的，而我需要在沙发数据库中进行。我用谷歌搜索了它，但我找不到任何结果。

这是 C# 和 SQL 中的代码；我需要在 couchdb 中做同样的事情。

```
public string GetData()
{
RecordCount = RecordCount + 10;
string Sql = "SELECT Title, DateCreated, Slug FROM be_Posts ORDER BY Title OFFSET " + FirstCount + " ROWS FETCH NEXT 10 ROWS ONLY";
FirstCount = RecordCount;
StringBuilder sb = new StringBuilder();
dt = new DataTable();
da = new SqlCeDataAdapter(Sql, con);
con.Open();
da.Fill(dt);
DataView dv = dt.DefaultView;
foreach (DataRowView row in dv)
{
sb.AppendFormat("<p>Post Title" + " <strong>" + row["Title"] + "</strong>");
sb.AppendFormat("<p>Post Date" + " <strong>" + row["DateCreated"] + "</strong>");
sb.AppendFormat("<p>Slug" + " <strong>" + row["Slug"] + "</strong>");
sb.AppendFormat("<hr/>");
}
sb.AppendFormat("<divstyle='height:15px;'></div>");
con.Close();
return sb.ToString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:23:38.623

您可以对带有结果的视图的 GET 使用 STARTKEY、ENDKEY 和 LIMIT URL 查询参数，以产生类似的效果。

[查询参数文档](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:17:53.480

我认为你应该看看这个食谱： http: [//guide.couchdb.org/draft/recipes.html#pagination](http://guide.couchdb.org/draft/recipes.html#pagination)

如果你有一小部分数据，使用 'limit' 和 'skip' 就可以了，否则它会很慢，因为 cocuhdb 无论如何都会在内部检索整个文档集并且只是跳过第一页。

诀窍是使用“startkey”和“endkey”并始终检索 N+1 个文档。这意味着您使用视图中的前 N ​​个文档，并使用带有“next_startkey_docid”的文档 N+1 作为下一页的开始键。

如果您需要完全分页，您可以使用最后一个策略实现转到第一页、转到最后一页和转到下一页/上一页，并在适当的时候使用“降序”来反转您的搜索顺序。但是，您不能实现转到任意页面。要实现到任意页面的跳转，您必须在内部跳过所有中间页面。

# magento - 如何使用单选按钮创建可配置产品？（产品尺寸必须在产品详细信息页面中用“单选按钮”列出）

> ID：13909294
> 
> 赞同：1
> 
> 时间：2012-12-17T06:25:37.320
> 
> 标签：magento, magento-1.6

现在怎么`magento`offer了`Configurable Product`，attribute set必须是`Dropdown`，attribute coup必须是`Global`。

我的客户要求是，产品尺寸必须`radio button`在产品详细信息页面中列出。不是选择框。

如果没有自定义任何设置或扩展可用于此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:09:55.197

您可以查看由 Mladen Lotar（例如 Inchoer）撰写的这篇文章 [http://inchoo.net/ecommerce/magento/configurable-product-modification-in-magento/](http://inchoo.net/ecommerce/magento/configurable-product-modification-in-magento/)

我相信，如果您有任何问题，请查看文章的评论，您也会在那里找到答案。

# ios - 检查慢速互联网连接 iOS

> ID：13909295
> 
> 赞同：16
> 
> 时间：2012-12-17T06:25:39.083
> 
> 标签：ios

我添加了苹果提供的可达性类，它可以很好地检查互联网连接。如果互联网关闭，我的应用程序会显示消息。

但是如果互联网很慢，它就会继续加载......

我正在使用 wi-fi，当 iPhone 通知栏中只有一个点可见 wifi 信号时，我遇到了这个问题。

所以我想知道如何检查缓慢的互联网连接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T07:48:48.523

您可以向您的服务器发送一个请求，并假设您希望返回大约 5-10 KB 的数据，然后创建一个计划为 20 秒的计时器回调。

如果您在 20 秒内没有得到响应，那么让我们考虑一下连接速度较慢。

例子：

```
// make POST request to server, the POST request should have a callback method assigned
[self testSpeed];

// schedule a method to be called after 20 seconds
myTimer = [NSTimer scheduledTimerWithInterval:20.0 selector:@selector(stopSpeedTest) .... ];

// your POST request callback method
-(void)speedTestCallback
{
    [myTimer invalidate];
    myTimer = nil;

    [self alertGoodSpeed];
}

// your stopSpeedTest method to identify app didn't receive response within 20 seconds
-(void)stopSpeedTest
{
    [self alertTooSlow];
} 
```

我认为这就是 H2CO3 试图问的问题：

“你认为每秒多少字节很慢？”

您需要确定您认为用户愿意等待预期返回的数据量的时间。

如果您告诉用户您正在下载 50 MB 的数据，那么是的，在 20 秒内将它们全部恢复是很快的。

但是，如果您预计只有 5-10 KB 的数据并且它需要超过 10 秒，更不用说 20 秒，那么连接非常慢。

# java - struts2.3.7中创建应用程序时SpringObjectFactory出错

> ID：13909296
> 
> 赞同：0
> 
> 时间：2012-12-17T06:25:41.253
> 
> 标签：java, spring, plugins, struts2, struts

我正在从 sruts2.1.6 迁移到 struts2.3.7。，我已将 apache 推荐的所需 jar 文件添加到我的类路径中。请检查列出的文件：-

![在此处输入图像描述](../Images/a4112e14ef151b32c67e6b66cd963c11.png)

我的 web.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>First_Struts2.3.7_Demo</display-name>

  <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
   </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

  <welcome-file-list>
  <welcome-file>Welcome.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

我的 struts.xml 文件如下所示，因为我现在还没有添加任何操作：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="false" />
    <package name="default" extends="struts-default" namespace="/">

        </package>
</struts> 
```

但是，当我构建类路径并在**tomcat-6 服务器**上将该项目作为 HelloWorld 类项目运行时，出现以下错误：

```
org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
Class: com.opensymphony.xwork2.spring.SpringObjectFactory
File: SpringObjectFactory.java
Method: getClassInstance
Line: 230 - com/opensymphony/xwork2/spring/SpringObjectFactory.java:230:-1
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:483)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    :754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

Caused by: java.lang.NullPointerException
    at com.opensymphony.xwork2.spring.SpringObjectFactory.getClassInstance(SpringObjectFactory.java:230)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    ... 20 more 
```

我不知道为什么会这样，我也不打算将 struts 与 spring 结合起来。任何帮助都会很棒。注意：xwork-core-2.3.7 导致错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:42:21.370

只需在 WEB-INF/lib 中添加以下 Jar。如果您没有弹簧，请移除所有与弹簧相关的罐子。

```
asm-3.3.jar
asm-commons-3.3.jar
asm-tree-3.3.jar
commons-fileupload-1.2.2.jar
commons-io-2.0.1.jar
commons-lang3-3.1.jar
freemarker-2.3.19.jar
javaassist-3.11.0.GA.jar
ognl-3.0.5.jar
struts2-core-2.3.7.jar
xwork-core-2.3.7.jar 
```

如果您没有上面列出的任何 jar，请下载它们。

# android - 使用数据库绘制的图形不会在 Android 中绘制

> ID：13909297
> 
> 赞同：-1
> 
> 时间：2012-12-17T06:25:53.850
> 
> 标签：android, database, sqlite, bar-chart, achartengine

嗨，我是 android 新手，我正在编写以下代码来绘制一个从数据库中获取值的条形图。

我使用 sqlite 数据浏览器创建了数据库。我的问题是，当我执行程序时，图表不会绘制。

提前感谢您的帮助。

```
public class ChartActivity extends Activity {
    private String productName;
    private Context Jayant;
    private Integer seriesCount;

    public Intent execute(Context context) throws IOException {

            SharedPreferences myPrefs = context.getSharedPreferences("myPrefs",
                            MODE_PRIVATE);
            productName = myPrefs.getString("prodName", "nothing");
            Jayant = context;
            DatabaseAdapter dbA = new DatabaseAdapter(Jayant);
            dbA.opendatabase();
            seriesCount = dbA.getValues(productName).getCount();
            dbA.close();

            XYMultipleSeriesRenderer renderer = buildBarRender();
            setChartSettings(renderer);

            return ChartFactory.getBarChartIntent(context, getDateDemoDataset(),
                            renderer, Type.DEFAULT);
    }

    protected XYMultipleSeriesRenderer buildBarRender() {
            XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
            int[] colors = new int[] { Color.BLUE, Color.DKGRAY, Color.GREEN,
                            Color.RED, Color.CYAN, };
            SimpleSeriesRenderer ssR = new SimpleSeriesRenderer();
            for (int i = 0; i < seriesCount; i++) {
                    ssR = new SimpleSeriesRenderer();
                    ssR.setDisplayChartValues(true);
                    ssR.setChartValuesTextSize(30);
                    ssR.setColor(colors[i]);
                    renderer.addSeriesRenderer(ssR);

            }
            return renderer;
    }

    private XYMultipleSeriesDataset getDateDemoDataset() throws IOException {
            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
            DatabaseAdapter dbA = new DatabaseAdapter(Jayant);

            dbA.opendatabase();
            Cursor Data = dbA.getValues(productName);
            seriesCount = Data.getCount();

            for (Data.move(-1); Data.moveToNext(); Data.isAfterLast()) {
                    CategorySeries series = new CategorySeries((Data.getString(Data
                                    .getColumnIndex("Primary1"))));
                    series.add(Data.getInt(Data.getColumnIndex("Primary2")));
                    dataset.addSeries(series.toXYSeries());
            }
            Data.close();
            dbA.close();
            return dataset;
    }

    private void setChartSettings(XYMultipleSeriesRenderer renderer) throws IOException {
            renderer.setAxisTitleTextSize(16);
            renderer.setChartTitleTextSize(20);
            renderer.setLabelsTextSize(15);
            renderer.setLegendTextSize(15);
            renderer.setMargins(new int[] { 20, 30, 15, 0 });
            renderer.setChartTitle("Top 10 Travel Destinations");
            renderer.setXTitle("Destinations");
            renderer.setYTitle("Top 10");
            renderer.setXAxisMin(0);
            renderer.setXAxisMax(10.5);
            renderer.setBarSpacing(0.0);
            renderer.setYAxisMin(0);
            renderer.setYAxisMax(maxValue());

    }

    private Double maxValue() throws IOException {
            Double mValue = null;
            DatabaseAdapter dbA = new DatabaseAdapter(Jayant);
            dbA.opendatabase();
            Cursor mV = dbA.getMaxValue(productName);
            if (mV.moveToFirst())
                    mValue = mV.getInt(mV.getColumnIndex("Primary2")) * 1.1;

            mV.close();
            dbA.close();
            return mValue;

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_chart);

    }

} 
```

DatabaseAdapter 类从存储在 assets 文件夹中的数据库中获取数据。

```
public class DatabaseAdapter extends SQLiteOpenHelper{

    private Context mycontext;

    private String DB_PATH = mycontext.getApplicationContext().getPackageName()+"Jayant";
    private static String DB_NAME = "Jayant.sqlite";//the extension may be .sqlite or .db
    public SQLiteDatabase myDataBase;

    public DatabaseAdapter(Context context) throws IOException {
        super(context,DB_NAME,null,1);
        this.mycontext=context;
        boolean dbexist = checkdatabase();
        if (dbexist) {
            opendatabase(); 
        } else {
            System.out.println("Database doesn't exist");
            createdatabase();
        }
    }

    public void createdatabase() throws IOException {
        boolean dbexist = checkdatabase();
        if(dbexist) {
        } else {
            this.getReadableDatabase();
            try {
                copydatabase();
            } catch(IOException e) {
                throw new Error("Error copying database");
            }
        }
    }   

    private boolean checkdatabase() {
        //SQLiteDatabase checkdb = null;
        boolean checkdb = false;
        try {
            String myPath = DB_PATH + DB_NAME;
            File dbfile = new File(myPath);
            //checkdb = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);
            checkdb = dbfile.exists();
        } catch(SQLiteException e) {
            System.out.println("Database doesn't exist");
        }
        return checkdb;
    }

    private void copydatabase() throws IOException {
        //Open your local db as the input stream
        InputStream myinput = mycontext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        @SuppressWarnings("unused")
        String outfilename = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myoutput = new FileOutputStream("/data/data/flu.solutions.travelsense/databases   /Jayant.sqlite");

        // transfer byte to inputfile to outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myinput.read(buffer))>0) {
            myoutput.write(buffer,0,length);
        }

        //Close the streams
        myoutput.flush();
        myoutput.close();
        myinput.close();
    }

    public void opendatabase() throws SQLException {
        //Open the database
        String mypath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READWRITE);
    }

    public synchronized void close() {
        if(myDataBase != null) {
            myDataBase.close();
        }
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    public Cursor getValues(String productName) {
        // TODO Auto-generated method stub
        return null;
    }

    public Cursor getMaxValue(String productName) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:24:54.143

您正在创建一个图表，它看起来应该（据我所知）。但我找不到将图表添加到视图的位置。不应该`findViewById`将创建的图形添加到视图中。或者至少对 Android 说它应该在某处的视图上绘制图表，但即使是我也找不到。

不过，我没有太多在 Android 中创建图表的经验。

# javascript - 从用户输入的变量调用函数 [no eval()]

> ID：13909303
> 
> 赞同：0
> 
> 时间：2012-12-17T06:26:30.690
> 
> 标签：javascript

我正在尝试制作一个处理按钮的按钮“东西”。单击按钮时，我需要有一种方法来调用用户定义的函数。下面是一个将被选为按钮的元素示例：

`<section class = 'button' buttonaction = 'aFunction()'></section>`

因此，当单击按钮时，我希望它获取`aFunction()`值并使用它来调用该函数。

例子：

```
elem.onclick = function(){
    action = this.getAttribute('buttonaction');
    action();
} 
```

我知道这个例子是错误的，但我认为它传达了我想要做的事情。谢谢， - 迈克尔米切尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:32:13.937

你可以像这样设置你的函数：

```
var my_allowed_functions = {
    func1: function(arg1, arg) {
        alert(arg1 + arg2);
    },
    func2: function(arg1, arg) {
        alert(arg1 + arg2);
    }
}; 
```

只需按名称称呼其中之一：

```
my_allowed_functions['func1'].apply(this, argument_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:43:02.210

html:

```
<section class = 'button' buttonaction='aFunction'></section> 
```

脚本 ：

```
var aFunction = function(){};

var buttons = document.querySelectorAll(".button");

[].forEach.call(buttons,function(button){
 button.onclick = function(event){
  var ct = event.currentTarget;
  var func = ct.getAttribute("buttonaction");
  window[func]()

 }
} 
```

但是，当您这样做时， `window[func]()`您仍在进行范围评估。

那么为什么不这样做：

```
<section class='button' onclick='aFunction()'></section> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T06:40:27.113

这是另一种方法，使用`window`：

```
<script type="text/javascript"><!--
//Create the function
var fn = function(){
  alert('ok');
};

//Call the function
var str = 'fn';
window[str]();
//-->
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T06:32:40.810

不运行任意代码就无法运行任意代码。您担心的`eval`是安全风险，但是，如果您使用名为`ponies`以某种方式运行用户输入的代码的不同函数，它仍然会很危险。

您的需求需求`eval`，所以这就是您应该使用的，或者重新考虑您的需求。

# python - 如何将 Django 模型列的值映射到列表？

> ID：13909304
> 
> 赞同：1
> 
> 时间：2012-12-17T06:26:53.873
> 
> 标签：python, django, models

我刚刚开始 Django 开发，我正在尝试使用来自另一个模型的 DB 条目列的选项动态填充 ChoiceField() 类。

这是我目前处理情况的方式：

```
categories_as_choices = map(lambda x: x.mycolumnname, MyObjectCategory.objects.all()) 
```

我不确定这是否是最“pythonic”的方法（或 Django 等效方法）。有谁知道是否有“更好”的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:46:14.677

Django 提供了一个专门为此设计的字段类：[ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)。

您需要`__unicode__`像这样在类别模型上定义方法：

```
def __unicode__(self):
    return self.mycolumnname 
```

然后以您可以简单地使用的形式

```
category = forms.ModelChoiceField(queryset=MyObjectCategory.objects.all()) 
```

# android - android中的多个where子句

> ID：13909309
> 
> 赞同：5
> 
> 时间：2012-12-17T06:27:08.447
> 
> 标签：android, sqlite

```
String slctsummary = "select   Reminder_Id,Reminder_Type,Reminder_Date,Reminder_Time,Reminder_Alert from Reminder_Main where Car_ID="
                +summaryid
                +"AND"
                +Reminder_Date 
                +"="
                +currentdate1;

        Cursor c = sdb.rawQuery(slctsummary,null); 
```

我想要所有同时满足条件但通过错误的记录。请帮我摆脱困境...

日志猫错误............

```
> 12-17 11:48:05.250: E/AndroidRuntime(1245):
> java.lang.RuntimeException: Unable to start activity
>ComponentInfo{com.curious.solutions.finalautoistdiary/com.curious.solutions.finalautoistdiary.ReminderSummary}:
> android.database.sqlite.SQLiteException: unrecognized token:
> "1ANDReminder_Date17": , while compiling: select
> Reminder_Id,Reminder_Type,Reminder_Date,Reminder_Time,Reminder_Alert
> from Reminder_Main where Car_ID=1ANDReminder_Date17-NOV-2012 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T06:30:21.243

在 AND 周围放置一些空格并在 = 之后添加这些“'”：

```
String Reminder_Main="Reminder_Main",Car_ID="Car_ID",Reminder_Date="Reminder_Date"; 
 Cursor c = sdb.rawQuery("select Reminder_Id ,Reminder_Type,Reminder_Date,Reminder_Time,Reminder_Alert from " + Reminder_Main 
    +" where " + Car_ID + " = ? AND " + Reminder_Date + " = ? " , new String[] { summaryid,currentdate1}); 
c.moveToFirst(); 
c.moveToFirst(); 
int summarycount = c.getCount(); 
```

如果这还不足以解决问题，请参阅此处[https://stackoverflow.com/a/9061437/1503155](https://stackoverflow.com/a/9061437/1503155)以解决剩余问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-10T15:52:03.117

这是我的尝试，你只关注 whereClause

```
 public List<ModelGps> gellTripByName(String tripName) {
        List<ModelGps> gpses = new ArrayList<>();
        SQLiteDatabase database = dbHelper.getReadableDatabase();
        final String columNames[] = {DBHelper.COLUMN_ID, DBHelper.COLUMN_NAME, DBHelper.COLUMN_LATITUTE, DBHelper.COLUMN_LONGITUDE, DBHelper.COLUMN_ALTITUDE, DBHelper.COLUMN_DATE, DBHelper.COLUMN_TYPE, DBHelper.COLUMN_TRAVEL, DBHelper.COLUMN_SPEED};
        String whereClause = DBHelper.COLUMN_TYPE + " = ? AND " + DBHelper.COLUMN_NAME + " = ? ";
        String[] whereArgs = {"Trip", tripName};

        Cursor cursor = database.query(DBHelper.TABLE_NAME_GPS, columNames, whereClause, whereArgs, null, null, DBHelper.COLUMN_NAME + " ASC");
        while (cursor.moveToNext()) {
            ModelGps gps = new ModelGps();
            gps.setId(cursor.getLong(cursor.getColumnIndex(DBHelper.COLUMN_ID)));
            gps.setName(cursor.getString(cursor.getColumnIndex(DBHelper.COLUMN_NAME)));
            gps.setLatitude(cursor.getDouble(cursor.getColumnIndex(DBHelper.COLUMN_LATITUTE)));
            gps.setLongitude(cursor.getDouble(cursor.getColumnIndex(DBHelper.COLUMN_LONGITUDE)));
            gps.setAltitude(cursor.getDouble(cursor.getColumnIndex(DBHelper.COLUMN_ALTITUDE)));
            gps.setDate(cursor.getString(cursor.getColumnIndex(DBHelper.COLUMN_DATE)));
            gps.setType(cursor.getString(cursor.getColumnIndex(DBHelper.COLUMN_TYPE)));
            gps.setTravel(cursor.getString(cursor.getColumnIndex(DBHelper.COLUMN_TRAVEL)));
            gps.setSpeed(cursor.getString(cursor.getColumnIndex(DBHelper.COLUMN_SPEED)));
            gpses.add(gps);
        }
        database.close();
        cursor.close();
        return gpses;
    } 
```

# mysql - MySQL 查询 ORDER BY

> ID：13909312
> 
> 赞同：0
> 
> 时间：2012-12-17T06:27:14.653
> 
> 标签：mysql, sql, sql-order-by

我对 MySQL 有点生疏。我需要一些帮助来确定订单。

我需要按类型排序，然后按组行日期最高的组排序，然后按日期排序每个组。我需要进行一个查询，该查询将按最高日期对一组行进行排序。然后，我需要按该组中的最高日期对每个组进行排序。还有一件事。所有行都是一个类型，但每个组行具有相同的类型。

这是一个无组织表格的可视化表示

```
| DATE | GROUP | TYPE |
-----------------------
| 2007 |     2 |    1 |
| 2008 |     3 |    2 |
| 2005 |     3 |    1 |
| 2004 |     2 |    1 |
| 2003 |     3 |    1 |
| 2012 |     3 |    2 |
| 2011 |     1 |    3 | 
```

这组织了：

```
| DATE | GROUP | TYPE |
-----------------------
| 2007 |     2 |    1 |
| 2004 |     2 |    1 |
| 2005 |     3 |    1 |
| 2003 |     3 |    1 |
| 2012 |     3 |    2 |
| 2008 |     3 |    2 |
| 2011 |     1 |    3 | 
```

我尝试按类型、组和日期对其进行排序，但这是不准确的。我不完全确定。

这是一组样本数据：

```
| ID |               SET |             BLOCK | SHORTNAME | RELEASEDATE | SETTYPE |
----------------------------------------------------------------------------------
|  1 | Return to Ravnica | Return to Ravnica |       rtr |  2012-09-29 |       1 |
|  2 |         Gatecrash | Return to Ravnica |      NULL |  2013-02-01 |       1 |
|  3 |      Dragons Maze | Return to Ravnica |      NULL |  2013-05-03 |       1 |
|  4 |   Avacyn Restored |         Innistrad |       avr |  2012-05-04 |       1 |
|  5 |    Dark Ascension |         Innistrad |       dka |  2012-02-03 |       1 |
|  6 |         Innistrad |         Innistrad |       isd |  2011-09-30 |       1 |
|  7 |      New Phyrexia | Scars of Mirrodin |       nph |  2011-05-13 |       1 |
|  8 | Mirrodin Besieged | Scars of Mirrodin |       mbs |  2011-02-04 |       1 |
|  9 | Scars of Mirrodin | Scars of Mirrodin |       som |  2010-10-01 |       1 | 
```

group 是 block，type 是 settype，date 是 release 日期。

我需要块内按日期排序的所有块行，按该块内最高日期行排序的每组块行，以及 settype。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:37:33.350

从您的表中导出每个块的最高日期的行集，然后将其连接回您的表以使用 ORDER BY 子句中的最高日期：

```
SELECT
  t.*
FROM atable t
INNER JOIN (
  SELECT
    Block,
    MAX(ReleaseDate) AS HighestDate
  FROM atable
  GROUP BY Block
) s ON s.Block = t.Block
ORDER BY
  s.HighestDate,
  t.SetType,
  t.Block,
  t.ReleaseDate
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:33:02.693

订单日期按降序排列，如下所示：

```
SELECT * FROM Table1
ORDER BY type, `group`, `date` desc 
```

结果：

```
| DATE | GROUP | TYPE |
-----------------------
| 2007 |     2 |    1 |
| 2004 |     2 |    1 |
| 2005 |     3 |    1 |
| 2003 |     3 |    1 |
| 2012 |     3 |    2 |
| 2008 |     3 |    2 |
| 2011 |     1 |    3 | 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/4c6d3/2)

# android - 如何将电子邮件从特定邮件发送到其他电子邮件 ID？

> ID：13909320
> 
> 赞同：0
> 
> 时间：2012-12-17T06:27:55.670
> 
> 标签：android, email

我想通过电子邮件将一些凭据发送到特定的电子邮件地址。这封邮件将从哪个电子邮件地址发送？

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822"); i.putExtra(Intent.EXTRA_EMAIL  , new
String[]{"recipient@example.com"}); i.putExtra(Intent.EXTRA_SUBJECT,
"subject of email"); i.putExtra(Intent.EXTRA_TEXT   , "body of
email");
try {
    startActivity(Intent.createChooser(i, "Send mail...")); } catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(MyActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
} 
```

这里的发件人是谁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:32:47.433

此意图将打开您设备中可用的邮件客户端。然后由您来添加发件人电子邮件 ID。或者，如果您已经登录，它将采用默认电子邮件 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:33:42.167

您应该为此使用 JavaMail Api 您可以在此帮助下发送和访问电子邮件：-- [检查此](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)！

&[这里是图书馆](http://code.google.com/p/javamail-android/)！

# objective-c - stringWithContentsOfURL 将所有附件作为 NSString 返回

> ID：13909326
> 
> 赞同：1
> 
> 时间：2012-12-17T06:28:37.500
> 
> 标签：objective-c, ios, nsstring, uti

实现了统一类型标识符，当通过电子邮件发送单个附件时，`stringWithContentsOfURL`返回一个`NSString`包含由`NSURL`.

从附加了多个文件的电子邮件中选择一个文件时，`stringWithContentsOfURL`返回所有附加的文件，并带有标题信息，作为`NSString`.

有没有办法只打开选定的文件？

**更新：**

*   第一个文件用户触摸，文件按预期处理。用户可以触摸多次，一切都很好。
*   任何后续接触的文件，电子邮件的原始来源，减去电子邮件标题，将被保存为由 NSURL 表示的文件。
*   此行为已在 iphone 6.0.1 和 ipad 5.1.1 上观察到。

您可以解析原始源并确定从 NSURL 中选择了哪个文件，我认为这可能存在问题。

**结束更新**

代码（两种情况下的 url 都指向一个文件）。文件扩展名为 *.defects

```
NSString *file = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error]; 
```

带有单个附件的邮件的结果

```
"Defect Names"
"Test1 Area"
"Test2 Area"
"Test 3 Area"
"Test 4 Area"
"Extra" 
```

带有多个附件的邮件的结果

```
--Apple-Mail=_785C0CB9-CB2F-43BE-AD5F-D7DEF5F97EFC
Content-Disposition: attachment;
    filename=Areas.defects
Content-Type: defects/x-defects;
    x-unix-mode=0644;
    name="Areas.defects"
Content-Transfer-Encoding: 7bit

"Area of Defect"
"Test1 Area"
"Test2 Area"
"Test 3 Area"
"Test 4 Area"
"Extra"

--Apple-Mail=_785C0CB9-CB2F-43BE-AD5F-D7DEF5F97EFC
Content-Disposition: attachment;
    filename="pos.defects"
Content-Type: defects/x-defects;
    x-unix-mode=0644;
    name="pos.defects"
Content-Transfer-Encoding: 7bit

"Position of Item"
"Test1 Position"
"Test2 Position"
"Test 3 Position"
"Test 4 Position"
"Extra"

...
--Apple-Mail=_785C0CB9-CB2F-43BE-AD5F-D7DEF5F97EFC-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:39:33.393

虽然我对这种行为感到惊讶（我原以为只会看到用户点击的附件），但这并不难解决。

您可以轻松编写多部分 MIME 扫描程序，将多部分消息拆分为单独的附件。

您确定您在发送的电子邮件中确实有单独的文件吗？检查原始消息。

此外，您可能错误地设置了您的 UTI 注册，请阅读我的文章：http: [//www.cocoanetics.com/2012/09/fun-with-uti/](http://www.cocoanetics.com/2012/09/fun-with-uti/)

通常，如果您通过文件打开方式（来自另一个应用程序）打开一个应用程序，您将获得一个文件 URL，该文件 URL 指向接收应用程序的 Document/Inbox 文件夹中所述文件位置的副本。检查此 URL 以查看系统放置在那里的文件类型。如果您不删除它，那么您可以使用 Xcode 管理器将您的应用程序文件夹的内容复制到桌面。

# android - HTC One x 或其他基于蓝牙 4.0 的应用程序开发

> ID：13909338
> 
> 赞同：0
> 
> 时间：2012-12-17T06:29:35.030
> 
> 标签：android, bluetooth, broadcom

我正在考虑让 HTC One X 与 ble 心率监测器一起工作。你认为这可能吗？我应该尝试开发一个可以使用支持蓝牙 4.0 的 Broadcom SDK 将手机与设备配对的应用程序吗？我使用哪种 API？其他所有的 Android 手机有哪些可以通过 Broadcom BLE 支持蓝牙 4.0 的。Broadcom BLE 支持 HTC One X 吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:56:01.730

从 HTC One X+ 和 HTC Droid DNA 开始的 HTC 设备支持 BLE。有一个高级 Java API 可用作 BLE 的 SDK 插件。如需更多信息，请访问[http://htcdev.com](http://htcdev.com)。

# objective-c - -> 在 Objective-C 中的意义是什么？

> ID：13909342
> 
> 赞同：0
> 
> 时间：2012-12-17T06:29:45.967
> 
> 标签：objective-c

> **可能重复：**
> [点 (“.”) 运算符和箭头 (“->”) 运算符在 C 与 Objective-C 中的使用](https://stackoverflow.com/questions/9072688/dot-operator-and-arrow-operator-use-in-c-vs-objective-c)

与 C 相比，Objective C 中 -> 的使用有何不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:34:34.923

它有一个额外的含义，尽管该含义的实际实现与 C 用例没有什么不同。在 Objective-C 中，不仅可以使用 this 操作符访问结构指针的成员，还可以访问实例变量。然而，由于 Objective-C 运行时是用 C 实现的，对象只是结构指针，而 ivar 操作只是结构字段操作。

# iphone - OBJ-C - 我如何在没有 NavigationControl 的情况下使用 UIButton 更改 segue

> ID：13909349
> 
> 赞同：-2
> 
> 时间：2012-12-17T06:30:38.543
> 
> 标签：iphone, objective-c, ios, xcode

我已经尝试过，`performSegueWithIdentifier`但我认为我没有找到 segue 标识符。没有导航控制器也许是不可能的..

所以我的问题是**如何在没有 NavigationControl 的情况下使用 UIButton 更改 segue？**

我正在使用 XCode 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:38:42.440

看看雷的教程在这里... [http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)

我实际上不知道没有导航控制器是否可行。好吧，我确信这是可能的，但我不确定如何直接完成它。希望 Ray 的教程能够为您指明一个方向。

这个链接也可能有帮助.... [Segue 进入另一个没有导航栏的视图](https://stackoverflow.com/questions/10477030/segue-into-another-view-without-nav-bar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:17:54.843

如果单击序列行，则可以在界面生成器中设置序列标识符。

# javascript - 重新定义函数的“toString”和“valueOf”

> ID：13909350
> 
> 赞同：0
> 
> 时间：2012-12-17T06:30:39.260
> 
> 标签：javascript, function

我定义了 Node 的原型函数“isElement”，我想让它像“div.isElement”返回“true”一样工作。

```
<div id="dom1">someText
    <p>This is p1 of <span class="bold">dom1</span></p>
</div>

Node.prototype.isElement = (function(){
    var result;
    var fn = function(){
        console.log(obj);
        result = (this.nodeType == 1 ? true : false);
        return result;
    };
    fn.toString = fn.valueOf = function(){
        return result;
    };
    return fn;
})();

var dom1 = document.getElementById('dom1');
dom1.isElement();  //true
dom1.isElement;  //true 
```

如果“dom1”从不调用函数“isElement()”，则“dom1.isElement”返回“未定义”。我理解为什么它返回“未定义”，但我想知道当“isElement()”从不被调用时如何让它返回“真”或“假”。

我只想像这样使用它：

```
if(dom1.isElement){//do something} 
```

但不喜欢：

```
if(dom1.isElement()){//do something} 
```

等待答案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:58:42.977

正如评论中提到的，JavaScript 语言不保证 DOM 实现提供标准的 JS 对象工具。

也就是说，如果您确定您的环境始终支持这些，那么在这种情况下调用 getter，您可以有效地编写一个函数，该函数在请求特定属性值时调用。

有关详细信息，请参阅[MDN](http://mdn.beonex.com/en/Core_JavaScript_1.5_Guide/Working_with_Objects.html#Defining_getters_and_setters)：

```
Node.prototype.__defineGetter__('isElement', 
  function () { return this.nodeType === 1; }); 
```

使用浏览器在[http://jsfiddle.net/L5hBq/进行测试](http://jsfiddle.net/L5hBq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:43:08.323

您可以添加一个具有您作为 getter 的功能的属性：

```
Object.defineProperty(Node.prototype, "isElement", {
    get: function() {
        var result = this.nodeType == 1;
        return result;
    }
}); 
```

# java - ImageIO.read(FileInputStream) 在读取非常大的图像时返回 null

> ID：13909351
> 
> 赞同：0
> 
> 时间：2012-12-17T06:30:51.277
> 
> 标签：java, java-2d

我需要读取图像，调整大小然后保存。但是，当读取非常大的图像时，`ImageIO#read()`返回 null。

```
FileInputStream f = new FileInputStream(imagePath);     
image = ImageIO.read(f); 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T12:53:07.690

图像 I/O 仅支持 GIF、PNG、JPEG、BMP 和 WBMP。您是否尝试加载除这些之外的任何其他类型的图像。有关详细信息，请参阅[读取/加载图像](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)。

您可以使用 . 查看注册读者列表`ImageIO.getReaderFormatNames()`。对我来说，它列出`[BMP, bmp, jpg, JPG, wbmp, jpeg, png, JPEG, PNG, WBMP, GIF, gif]`

# jquery - Jquery Toggle按钮和状态关闭

> ID：13909352
> 
> 赞同：0
> 
> 时间：2012-12-17T06:30:51.710
> 
> 标签：jquery, toggle

我有一个可以切换页脚的按钮。当前代码从页脚关闭开始。我的问题是如何使它打开默认状态？我尝试了几种配置，但不确定哪种配置正确。当我检查浏览器上的 cookie 时，默认状态是“隐藏”。

```
// Toggle Button

$(document).ready(function() {
var button = $('.toggle');

//check the cookie when the page loads
if ($.cookie('currentToggle') ==='visible') {
    togglePanel(button, false);
}
    else {
     togglePanel(button, true);

}

//handle the clicking of the show/hide toggle button
button.click(function() {
    //toggle the panel as required, base on current state
    if (button.text() === "-") {
        togglePanel($(this), true);
    }
    else {
        togglePanel($(this), false);

    }
});

});

function togglePanel(button, show) {

var panel = $('footer');

if (show) {
    panel.slideUp('slow');
    button.text('+');
    $.cookie('currentToggle', 'hidden', { path: '/' });

}
else {
    panel.slideDown('slow');
    button.text('-');
    $.cookie('currentToggle', 'visible', { path: '/' });

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:15:54.137

我认为您只需要这一行来处理没有设置 cookie 的情况：

```
if (!$.cookie('currentToggle'))
    $.cookie('currentToggle', 'visible'); 
```

把它放在前面`//check the cookie when the page loads`

或者，更简单的是，在您检查时反转您的逻辑：

```
if ($.cookie('currentToggle') === 'hidden') {
    togglePanel(button, true);
} else {
    togglePanel(button, false);
} 
```

# mod-rewrite - Apache2 混合 mod_vhosts_alias 和 mod_rewrite

> ID：13909353
> 
> 赞同：0
> 
> 时间：2012-12-17T06:31:13.320
> 
> 标签：mod-rewrite, apache2, mod-vhost-alias

Apache2 文档建议将 mod_rewrite 作为最后的手段，用于指定将给定主机请求发送到哪个目录。他们说使用 mod_vhosts_alias。我设置了它并且它的工作没有问题。但是，我有一个需要一些 mod_rewriting 的特定案例。

我有一个像 mydomain.com 这样的域和大量像 sub.mydomain.com 和 sub2.mydomain.com 这样的子名称。这些子域都映射到相应的目录。但子域也将具有映射到各自目录的完整顶级域。例如：

sub.mydomain.com 将映射到与 awesomeproducts.com 相同的目录 sub2.mydomain.com 将映射到与 widgets.com 相同的目录

确保这两种访问每个站点的方法都能正常工作而不会发生冲突的最佳方法是什么？

由于文档只说 mod_rewrite 不像 mod_vhosts_alias 那样“优雅”，我不知道我是否应该完全单独使用 mod_rewrite 来适应我的情况，或者我是否应该尝试以某种方式混合这两种方法。

混合它们是可行的方式还是会产生问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:53:08.300

RewriteRule 和 RewriteCond 的行为在使用 mod_vhost_alias 时会发生变化。自从我修改它已经有几天了，所以我对它粗略，但要注意 RewriteRule 解释要重写的 URL 部分的方式。使用 mod_vhost_alias... 时可能会发生变化，并且 RewriteCond 的行为也可能会发生变化。

为了完成我所问的问题，我最终对实际域使用了符号链接。我设置了一堆带有关联文件夹的子域，这样 sub1.stddomain.com 就会转到文件夹 sub1.stdomain.com。然后我添加了一个将 domain1.com 映射到 sub1.stddomain.com 文件夹的符号链接。这样，任何访问 domain1.com 的人都会在 sub1.stddomain.com 文件夹中显示该站点。

重要提示：在所有这些工作和测试之后，我最终回到了没有 mod_vhost_alias 的虚拟主机文件集合。原来 mod_vhost_alias 存在一个已知问题。DocumentRoot 使用时未正确设置。这会破坏大量脚本。它在 2012 年 2 月用新的特殊变量进行了修补，而 Apache 的编程团队丢球了。他们从未写过任何解释如何使用补丁或新变量的文档。

我重新打开了这个问题并表示它仍然是一个错误，因为你不能编写代码，也不能告诉任何人如何使用它，然后称之为修复。不幸的是，这个问题已经被忽略了好几年，即使他们应该为它编写代码，它也可能会继续被忽略。

所有这些的推荐教训：不要使用 mod_vhost_alias。使用另外一个模板文件编写 shell 脚本来管理您的虚拟主机文件。

# ruby-on-rails - Rails - 使用 Ajax 和 :remote => true 更新 div

> ID：13909354
> 
> 赞同：4
> 
> 时间：2012-12-17T06:31:12.927
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我已经按照这个[Railscast](http://railscasts.com/episodes/205-unobtrusive-javascript)通过 Ajax 提交表单并更新 div 而不重新加载页面，但是我在其中的一部分遇到了问题。

提交表单时，Ryan`$("#products").html("<%= escape_javascript(render(@products)) %>");`在一个`index.js.erb`文件中更新了div。`#products`我正在努力理解类似的实例变量`@products`是否与我的情况相关，或者我是否可以简单地将其替换为 URL。

我正在尝试在此截屏视频中与 Ryan 做同样的事情，但我不想显示搜索结果，而是只想显示更新后的值。

**在 show.html.erb 我有：**

```
<% @project.project_todos.order("created_at DESC").where(:status => false).each do |todo|%>

<%= form_for todo, :remote => true, :"data-replace" => "#dueon" do |f| %>
   <%= f.text_field :due %>
   <%= f.submit :class => "primary", :value => "Add" %>
<% end %>

<div id="dueon">
   <%= render "duedate", :todo => todo %>
</div>

<% end %> 
```

部分`_duedate.html.erb`中有一行：`<%= todo.due %>`

所以在我的 index.js.erb 我目前有这个：`$("#dueon").html("<%= escape_javascript(render("_duedate")) %>");`但它显然不起作用。我必须在此处使用变量代替`_duedate`吗？如果是这样，我将如何在控制器中进行设置？我的意思是变量代表什么？

此外，对于它的价值，部分正在正确呈现并显示`todo.due`值......当我提交表单时它只是没有更新。

**项目控制器：**

```
def show
    @project = Project.find(params[:id])

    # Display the form to create a new todo
    @project_todo = ProjectTodo.new

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @project }
    end
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:43:13.453

试试这个

在你的控制器动作中，（比如 sample_action）

```
def sample_action
   @todos = #your code

   respond_to do |format|
      format.js
   end
end 
```

你有一个`sample_action.js.erb`

```
$("#dueon").html("<%= raw escape_javascript(render(:partial => 'duedate')) %>") 
```

然后在部分内部，您可以访问新的`@todos`实例变量

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:42:28.077

我会单独回答你，因为我相信你的整个设置应该没什么变化（IMO，这可能不是这种情况）

我认为你应该有一个属于它的项目的 todos 控制器，

- - 楷模 - - - - - - - -

```
class Project < ActiveRecord::Base
  has_many :todos
end

class Todo < ActiveRecord::Base
   belongs_to :project
end 
```

---- 路线 ---------------

```
resources :projects do
  resources :todos do
  end
end 
```

---- 控制器 ----------

类项目控制器 < 应用控制器

结尾

```
class TodosController < ApplicationController

   def new
      @project = Project.find(params[:project_id])
      @todos = @project.todos.build
   end
end 
```

在你看来 (views/todos.html.erb)

```
<%= @project.name %>
<%= form_for([@Project, @todos]) do |f| %>
  #todo form code
<% end%> 
```

根据关系，项目有很多待办事项，在待办事项添加屏幕中显示项目详细信息总是很清楚，而不是允许用户从项目屏幕添加新的待办事项。

再说一次，这是我个人的看法，有任何问题欢迎提问：）

# gnu-make - 如何在多核 Linux 机器上使用 GNU make --max-load？

> ID：13909355
> 
> 赞同：13
> 
> 时间：2012-12-17T06:31:14.627
> 
> 标签：gnu-make, multicore, uptime

来自 GNU make 的文档：[http ://www.gnu.org/software/make/manual/make.html#Parallel](http://www.gnu.org/software/make/manual/make.html#Parallel)

> 当系统负载很重时，您可能希望运行的作业比轻负载时要少。您可以使用 '-l' 选项告诉 make 根据平均负载限制一次运行的作业数量。'-l' 或 '--max-load' 选项后跟一个浮点数。例如，
> 
> ```
>  -l 2.5 
> ```
> 
> 如果平均负载高于 2.5，将不会让 make 启动多个作业。没有后面数字的 '-l' 选项会删除负载限制，如果之前的 '-l' 选项给出了负载限制。
> 
> 更准确地说，当 make 启动一个作业，并且它已经至少有一个作业在运行时，它会检查当前的平均负载；如果它不低于 '-l' 给出的限制，则 make 等待直到平均负载低于该限制，或者直到所有其他作业完成。

从 Linux 手册页了解正常运行时间：[http ://www.unix.com/man-page/Linux/1/uptime/](http://www.unix.com/man-page/Linux/1/uptime/)

> 系统负载平均值是处于可运行或不可中断状态的平均进程数。处于可运行状态的进程要么正在使用 CPU，要么正在等待使用 CPU。处于不可中断状态的进程正在等待一些 I/O 访问，例如等待磁盘。取三个时间间隔的平均值。负载平均值未针对系统中的 CPU 数量进行标准化，因此负载平均值为 1 意味着单个 CPU 系统一直在加载，而在 4 CPU 系统上则意味着它有 75% 的时间处于空闲状态。

我有一个并行的 makefile，我想做一件显而易见的事情：让 make 继续添加进程，直到我得到完整的 CPU 使用率，但我不会引起抖动。

今天的许多（全部？）机器都是多核的，这意味着平均负载不是制造商应该检查的数字，因为需要根据内核数量调整该数字。

这是否意味着 GNU make 的`--max-load`(aka `-l`) 标志现在没用了？在多核机器上运行并行 makefile 的人在做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-09T19:44:43.357

我的简短回答是：`--max-load`如果您愿意投入时间来充分利用它，这很有用。在当前的实现中，没有简单的公式可以选择好的值，也没有用于发现它们的预制工具。

* * *

我维护的构建相当大。在我开始维护它之前，构建是 6 小时。在`-j64`ramdisk 上，现在它在 5 分钟内完成（在 NFS 挂载上使用 30 分钟`-j12`）。我的目标是找到合理的上限`-j`，`-l`这允许我们的开发人员快速构建，但不会使服务器（构建服务器或 NFS 服务器）对其他人无法使用。

首先：

*   如果您选择一个*合理* `-jN`的值（在您的机器上）并找到一个合理的负载平均值上限（在您的机器上），它们可以很好地协同工作以保持平衡。
*   如果您使用非常大的`-jN`值（或未指定；例如，`-j`没有数字）并限制平均负载，gmake 将：
    *   继续生成进程（gmake 3.81 添加了一个节流机制，但这只会稍微缓解问题），直到达到最大作业数或直到平均负载超过您的阈值
    *   而平均负载超过您的阈值：
        *   在所有子流程完成之前什么都不做
        *   一次产生一份工作
    *   重来一遍

至少在 Linux 上（可能还有其他 *nix 变体），[平均负载是](https://unix.stackexchange.com/questions/8895/why-isnt-a-straightforward-1-5-15-minute-moving-average-used-in-linux-load-calc)指数[移动平均](http://www.teamquest.com/files/3114/2049/9759/ldavg3.pdf)（UNIX Load Average Reweighed, Neil J. Gunther），表示等待 CPU 时间的平均进程数（可能是由太多进程引起的） ，等待 IO，页面错误等）。由于它是指数移动平均线，因此对其进行加权使得新样本比旧样本对当前值的影响更大。

如果您可以为正确的最大负载和并行作业数量确定一个良好的“最佳位置”（通过有根据的猜测和经验测试的组合），假设您有一个长时间运行的构建：您的 1 分钟平均值将达到一个平衡点（波动不大）。但是，如果您的`-jN`数字对于给定的最大负载平均值来说太高，它会波动很大。

找到那个甜蜜点本质上等同于找到微分方程的最佳参数。由于它将受到初始条件的影响，因此重点是寻找使系统保持平衡的参数，而不是提出“目标”负载平均值。我所说的“处于平衡状态”是指：1m 平均负载波动不大。

假设您没有受到 gmake 限制的限制：当您找到一个`-jN` `-lM`组合可以提供最短构建时间时：该组合会将您的机器推向极限。如果机器需要用于其他用途...

![编译](../Images/591805e159d434ca0f3d4805706cab01.png)

...当您完成优化时，您可能希望将其缩小一点。

不考虑平均负载，我在构建时间上看到的改进`-jN`似乎是 [大致] 对数。也就是说，我看到 and 之间的差异`-j8`比`-j12`and 之间`-j12`的差异更大`-j16`。

因为最初的 gmake 进程是单线程的，所以事情在`-j48`和之间`-j64`（在 Solaris 机器上）达到了顶峰；`-j56`在某些时候，线程无法比完成更快地启动新作业。

我的测试是在：

*   非递归构建
    *   递归构建可能会看到不同的结果；他们不会遇到我遇到的瓶颈`-j64`
    *   我已尽最大努力减少配方中的 make-isms（变量扩展、宏等）的数量，因为配方解析发生在产生并行作业的同一线程中。配方越复杂，它在解析器中花费的时间就越多，而不是产生/收获作业。例如：
        *   配方中没有`$(shell ...)`使用宏；这些在第一次解析过程中运行并缓存
        *   大多数变量都分配有`:=`以避免递归扩展
*   Solaris 10/sparc
    *   256 核
    *   没有虚拟化/逻辑域
    *   构建在 ramdisk 上运行
*   x86_64 linux
    *   32 核（4 倍超线程）
    *   没有虚拟化
    *   构建在快速的本地驱动器上运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:59:54.170

> 今天的许多（全部？）机器都是多核的，这意味着平均负载不是制造商应该检查的数字，因为该数字需要根据内核数进行调整。
> 
> 这是否意味着 GNU make 的 --max-load (aka -l) 标志现在没用了？

不。想象一下要求磁盘 i/o 的作业。如果您开始的工作与拥有 CPU 的数量一样多，那么您仍然不会很好地利用 CPU。

就个人而言，我只是使用 -j ，因为到目前为止它对我来说已经足够好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T20:35:05.047

即使对于 CPU 是瓶颈的构建，`-l`也不理想。我使用`-jN`，其中 N 是存在的或我想在构建上花费的核心数量。在我的情况下，选择更大的数字并不能加快构建速度。它也不会减慢速度，只要您不过度（例如通过指定无限通过`-j`）。

using`-lN`大致相当于`-jN`，如果机器有其他独立的工作要做，可以更好地工作，但是有两个怪癖（除了你提到的那个，没有考虑核心数）：

*   初始峰值：当构建开始时，*make*启动了很多作业，比 N 多得多。当一个进程被分叉时，系统负载数不会立即增加。在我的情况下，这不是问题。
*   饥饿：当一些构建作业比其他构建作业耗时较长时，在前 M 个快速作业结束的那一刻，系统负载仍然 >N。很快，系统负载下降到 N - M，但只要这几个缓慢的作业在拖，就不会启动新作业，并且核心处于饥饿状态。*Make*只考虑在旧工作结束时和开始时启动新工作。它没有注意到系统负载在两者之间下降。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-14T16:47:08.960

> 这是否意味着 GNU make 的 --max-load (aka -l) 标志现在没用了？在多核机器上运行并行 makefile 的人在做什么？

示例之一是在测试套件中运行作业，其中每个测试都必须编译和链接程序。链接有时会过多地加载系统，结果 - 致命错误：ld 以信号 9 [Killed] 终止。就我而言，这不是内存开销，而是 CPU 使用率，因此通常建议的交换文件没有帮助。

使用选项`-l 1`执行仍然是并行的，但链接几乎是顺序的： [![系统监视器可视化资源消耗](../Images/ce8392cee60721b1a14a1c7a5bc3377f.png)](https://i.stack.imgur.com/L2jLY.png)

# objective-c - 应用内购买中的恢复功能

> ID：13909362
> 
> 赞同：0
> 
> 时间：2012-12-17T06:32:17.030
> 
> 标签：objective-c, ios, in-app-purchase

我在我的应用程序中使用应用内购买。一切正常。用户可以正常购买、恢复交易。

我在恢复功能中有 1 个问题：

我该如何实现 - 用户在不购买任何项目的情况下无法恢复，因为当用户在不购买任何项目的情况下单击恢复按钮时，它会进行恢复并且应用程序被阻止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:59:18.440

无需实现 Web 服务，只需几行代码即可解决问题 -

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue {
int totalNumberOfPurchaseToBeRestored = queue.transactions.count;
if (totalNumberOfPurchaseToBeRestored == 0)
{
    //No item found for Restore"
}
else
{
        // Restore items
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:56:46.497

交易完成后，更新 ProductPurchased。并检查 viewDidLoad 中 ProductPurchased 的值并相应地设置恢复按钮。检查以下可能对您有帮助的代码并告诉我。

```
if([[[NSUserDefaults standardUserDefaults]valueForKey:@"ProductPurchased"]intValue]==1)
       restoreButton.hidden=YES; 
```

在恢复事务完成事务方法中编写以下代码。

```
- (void)restoreTransaction:(SKPaymentTransaction *)transaction
{
   if([[NSUserDefaults standardUserDefaults] valueForKey:@"ProductPurchased"] == 0)
        [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:@"ProductPurchased"];
   self.viewController.restoreButton.hidden=YES;
}
- (void)completeTransaction:(SKPaymentTransaction *)transaction
{
   if([[NSUserDefaults standardUserDefaults] valueForKey:@"ProductPurchased"] == 0)
        [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:@"ProductPurchased"];
   self.viewController.restoreButton.hidden=YES;
} 
```

# java - 使用带有 onejar 插件的反射

> ID：13909364
> 
> 赞同：1
> 
> 时间：2012-12-17T06:32:34.180
> 
> 标签：java, classloader

我正在使用带有[onejar maven 插件的](http://code.google.com/p/onejar-maven-plugin/)[反射](http://code.google.com/p/reflections/)，并且在运行生成的 jar 时遇到问题：

> 20204 [main] 错误 org.reflections.Reflections - 给定的扫描 url 为空。在配置中设置 url

在我看来，反射不支持 onejar 正在使用的类加载器。我一直`Reflections`在我的代码中使用以下配置：

```
Reflections reflections = new Reflections("path.to.my.package"); 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T04:47:46.177

是的，一个已知问题。有一个工作...

使用自定义 UrlType 和自定义 Vfs.Dir；使用 OneJarURLConnection 从嵌入式 JAR 中正确读取内容；使用“标准”Vfs.File。

此处讨论的问题和解决方案：[http ://code.google.com/p/reflections/issues/detail?id=128](http://code.google.com/p/reflections/issues/detail?id=128)

如果你需要它的来源：

**OneJarDir**

```
package com.sdl.ws.integration.profserv.shared.onejar;

import com.simontuffs.onejar.OneJarURLConnection;
import org.reflections.vfs.Vfs;
import org.reflections.vfs.ZipDir;
import org.reflections.vfs.ZipFile;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.List;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

public class OneJarDir implements Vfs.Dir {

    private JarFile oneJarFile = null;
    private List<Vfs.File> oneJarClassFiles = new ArrayList<Vfs.File>();

    private OneJarURLConnection oneJarConnection;

    public OneJarDir(OneJarURLConnection oneJarConnection) {

        this.oneJarConnection = oneJarConnection;

        try {
            this.oneJarConnection.connect();
            this.oneJarFile = this.oneJarConnection.getJarFile();
            Enumeration<JarEntry> entries = oneJarFile.entries();

            while (entries.hasMoreElements()) {
                oneJarClassFiles.add(new ZipFile(new ZipDir(oneJarFile), entries.nextElement()));
            }

        } catch (IOException e) {
            throw new RuntimeException("Can't create One-Jar VFS directory", e);
        }
    }

    public String getPath() {
        return oneJarConnection.getURL().getPath();
    }

    public Iterable<Vfs.File> getFiles() {
        return oneJarClassFiles;
    }

    public void close() {
        try {
            if (oneJarConnection != null)
                oneJarConnection.getInputStream().close();
        } catch (IOException e) {
            throw new RuntimeException("Can't close VFS JAR stream", e);
        }
    }
} 
```

**OneJarUrlType**

```
package com.sdl.ws.integration.profserv.shared.onejar;

import com.simontuffs.onejar.OneJarURLConnection;
import org.reflections.vfs.Vfs;

import java.io.IOException;
import java.net.URL;

public class OneJarUrlType implements Vfs.UrlType {

    private static final String _JAR_DIR = "jar!";

    public boolean matches(URL url) {

        // check if "double-jarred' by one-jar; this would appear to conflict with the standard JAR loader, so it either needs to be first (which it is)
        // OR the standard needs to be removed. This match assumes a nested JAR, unlike the standard JAR type.
        String externalForm = url.toExternalForm();

        // ugly, but should be much faster than regex.
        int idx1 = externalForm.indexOf(_JAR_DIR);
        return (idx1 > 0 && externalForm.indexOf(_JAR_DIR, idx1 + _JAR_DIR.length()) > 0);
    }

    public Vfs.Dir createDir(URL url) {
        try {
            return new OneJarDir(new OneJarURLConnection(url));
        } catch (IOException e) {
            throw new RuntimeException("Can't open One-Jar embedded JAR", e);
        }
    }

} 
```

# jtidy - 通过 JTidy 转义转换丹麦字符

> ID：13909369
> 
> 赞同：1
> 
> 时间：2012-12-17T06:32:47.233
> 
> 标签：jtidy

我正在使用 JTidy 将 HTML 页面解析为 XHTML。HTML 包含丹麦字符，然后 JTidy 将它们转换为某些特定字符。

例如：单词“Observér”被转换为“Observér”。

有没有办法避免这种情况？

# jquery - jQuery：动态设置选择选项

> ID：13909371
> 
> 赞同：1
> 
> 时间：2012-12-17T06:32:57.607
> 
> 标签：jquery, select

```
child.attr('selectedIndex', 1); 
```

在我的情况下似乎不起作用。

我有两个级联下拉列表，一个父级和一个子级。首先，它们都包含相同的值。当用户从父选择框中选择一个项目时，它会作为子选择中的一个选项被删除。

有时，父选择框只有 3 个项目，默认值和 2 个值。在这种情况下，当用户选择父值时，子选择中唯一可能的选择是剩余的非默认值。

因此，当父级只有两个值时，我想在用户选择父级选择时自动选择留在子框中的非默认值。

我开始的 HTML 可能如下所示：

```
<select name="from" class="from">
<option value="" selected="selected" class="default">Select a value</option>
<option value="na">One</option>
<option value="ja">Two</option>
</select>
<select name="to" class="to">
<option value="" selected="selected" class="default">Select a value</option>
<option value="na">One</option>
<option value="ja">Two</option>
</select> 
```

然后，如果用户在父项中选择“一”，则子选择应自动选择“二”。

Here is my jQuery I use to remove a value from the child when a value in the parent is selected:

```
 (function ($) {
        function cascadeSelect(parent, child) {
            var childOptions = child.find('option:not(.default)');
            child.data('options', childOptions);
            parent.change(function () {
                childOptions.remove();
                child.append(child.data('options').filter('.' + this.value))
                    .change();
                if (child.data('options').length == 2) {
                    [select the last option here]
                }

            })

            if (parent.val()) {
                childOptions.not('.default, .' + parent.val()).remove();
            }

        }

        $(function () {
            cascadeForm = $('.askform');
            pulldown_from = cascadeForm.find('.from');
            pulldown_to = cascadeForm.find('.to');

            cascadeSelect(pulldown_from, pulldown_to);
        }); 
```

我添加了检查子选择中是否只有两个选项的行：

```
 if (child.data('options').length == 2) {
                    [select the non-default child option here]
                } 
```

但我不知道如何选择非默认子选项。我想我可以通过使用 .selectedIndex 来做到这一点：

```
child.attr('selectedIndex', 1); 
```

但这似乎引用了原始索引值（在我删除父项中选择的值之前的索引）。

那么，当父项中只有两个选项开始时，如何在子项选择中自动选择唯一的非默认选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:44:46.297

我想我发现了一些问题。

在这一行：

```
child.append(child.data('options').filter('.' + this.value))
             .change(); 
```

看起来您正在尝试使用类的选择器（而不是值）进行过滤。您应该希望能够通过更改选择器来解决此问题，以便它根据选项的值进行过滤：

```
child.append(child.data('options').filter('[value="' + this.value + '"]'))
             .change(); 
```

在下拉列表中选择值的最简单方法是使用`val()`. 换句话说，你所追求的那一行应该是：

```
child.val(this.value); 
```

如果您想看到整个工作正常，我创建了一个 JS Fiddle：http: [//jsfiddle.net/KkNHr/1/](http://jsfiddle.net/KkNHr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:43:26.877

这似乎有效......但为什么不使用 attr 呢？

```
child.get(0).selectedIndex = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:43:47.747

请参阅参考：http: [//jsfiddle.net/YqGU8/](http://jsfiddle.net/YqGU8/)

```
$(".from").change(function() {
 var val = $(this).find(":selected").val();
 $(".to option[value='" + val + "']").remove();
 $(".to option:last").attr('selected','selected');
});​ 
```

# android - 二维码地址簿类型字符串转电子名片

> ID：13909376
> 
> 赞同：0
> 
> 时间：2012-12-17T06:33:12.223
> 
> 标签：android, qr-code, zxing, vcf-vcard

从二维码扫描“ADDRESSBOOK”类型后，我得到的内容是简单的字符串，如：

```
 Sandeep
  abc
  def
  ;;my new address
  +908888888888
  +901111111111
  +902222222222
  homeemail@example.com
  workemail@example.com
   http://www.google.com 
```

现在我想将此字符串转换为 vCard 并打开设备（电话）的地址簿，所有这些内容都填充在特定列中......我研究了很多但没有想法。请指导我。

**编辑：**

检查此二维码： ![在此处输入图像描述](../Images/e51d36c81654d41d116f07909b65d88a.png)

我使用[http://goqr.me/创建了这个 vCard 类型的二维码](http://goqr.me/)

但扫描后，它只是显示内容，而不是 vCard 格式。但我想把这个简单的内容转换成 vCard。

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:46:03.727

您的代码示例的每一行代表什么？vCard 看起来像这样：

```
BEGIN:VCARD
VERSION:3.0
FN:Sandeep
ADR:;;123 Street;City;Region;PostalCode;Country
TEL:+908888888888
TEL:+901111111111
TEL:+902222222222
EMAIL;TYPE=home:homeemail@example.com
EMAIL;TYPE=work:workemail@example.com
URL:http://www.google.com
END:VCARD 
```

# ruby-on-rails - 解构 Rails .joins 和 .where 方法

> ID：13909380
> 
> 赞同：12
> 
> 时间：2012-12-17T06:33:36.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, arel

我有两个模型 -`Banner`和`BannerType`.

他们的架构如下所示：

**横幅**

```
# Table name: banners
#
#  id             :integer          not null, primary key
#  name           :string(255)
#  image          :string(255)
#  created_at     :datetime         not null
#  updated_at     :datetime         not null
#  url            :string(255)
#  banner_type_id :integer 
```

**横幅类型**

```
# Table name: banner_types
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null 
```

`Banner belongs_to :banner_type`和`BannerType has_many :banners`

我在 BannerType 中有两条记录，它们是：

```
BannerType.all
  BannerType Load (0.3ms)  SELECT "banner_types".* FROM "banner_types" 
 => [#<BannerType id: 1, name: "Featured", created_at: "2012-12-17 04:35:24", updated_at: "2012-12-17 04:35:24">, #<BannerType id: 2, name: "Side", created_at: "2012-12-17 04:35:40", updated_at: "2012-12-17 04:35:40">] 
```

如果我想进行查询以查找该类型的所有横幅，`Featured`我可以执行以下操作：

```
Banner.joins(:banner_type).where("banner_types.name = ?", 'Featured') 
```

我知道我也可以查询，`banner_type_id => 1`但这与这个特定问题密切相关。

如果我们分解那个陈述，有几件事让我有点困惑。

1.  `Banner.join(:banner_type)`- 会生成为什么当那是 SQL 方法名称时`NoMethodError: undefined method 'join' for #<Class:0x007fb6882909f0>`没有调用 Rails 方法？`join`
2.  当表名`Banner.joins(:banner_type)`是. 我没有加入 Banner 和 BannerType 表（Rails 约定表示为复数）。如果我尝试这是我得到的错误：`banner_type``banner_types``Banner.joins(:banner_types)`

    `Banner.joins(:banner_types) ActiveRecord::ConfigurationError: Association named 'banner_types' was not found; perhaps you misspelled it?`

3.  为什么该`where`子句需要`banner_types`和不需要`banner_type`（即复数版本 - 即表名而不是`joins`方法中使用的符号？如果您在两个地方都使用表名或在两个地方都使用符号名似乎会更直观. 如果至少，出于一致性目的。

4.  为什么我不能通过关联进行动态查找 - 即如果我能做到就好了`Banner.find_by_banner_type_name("Featured")`？

很想听听你的想法。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T07:03:23.140

### #1

> Banner.join(:banner_type) - 会生成 NoMethodError: undefined method 'join' for # 为什么没有 Rails 方法调用 join 而那是 SQL 方法名？

用简单的英语阅读时说“横幅加入横幅类型”与“横幅加入横幅类型”会更清楚。我不确定还有更多的原因。

* * *

### #2

> 为什么我做Banner.joins(:banner_type) 即当表名是banner_types 时单数banner_type。我没有加入 Banner 和 BannerType 表（Rails 约定表示为复数）。如果我尝试 Banner.joins(:banner_types) 这是我得到的错误：
> 
> Banner.joins(:banner_types) A​​ctiveRecord::ConfigurationError: 未找到名为“banner_types”的关联；也许你拼错了？

在`.joins(:banner_type)`,`:banner_type`中是您要加入的关系，而不是表。你有

```
has_one :banner_type 
```

这就是 Rails 加入的原因。这就是当您将 Symbol 传递给 时 Rails 的工作原理，这`.joins`就是为什么当您传递与模型的任何现有关联不匹配的 Symbol 时错误指的是关联。

这也是为什么你可以`JOIN`使用嵌套关联的符号来做多层深度，如[Rails Guide 中所述](http://guides.rubyonrails.org/active_record_querying.html#joining-nested-associations-multiple-level)

```
Category.joins(:posts => [{:comments => :guest}, :tags]) 
```

[在 Rails Guide 中](http://guides.rubyonrails.org/active_record_querying.html#using-a-string-sql-fragment)也有描述，您也可以将字符串传递给`.joins`。

```
Client.joins('LEFT OUTER JOIN addresses ON addresses.client_id = clients.id') 
```

请注意，在最后一个示例中，当将 String 传递给 时`joins`，使用的是**表名** `addresses`，*而不是*关联名；这有助于回答**#3**。

* * *

### #3

> 为什么where子句需要banner_types而不是banner_type（即复数版本-即表名而不是joins方法中使用的符号？如果您在两个地方都使用表名或使用符号似乎会更直观两个地方都有名字。至少，为了保持一致。

经过一点字符串插值后，传递给`where`方法的字符串*（类似于`joins`）*或多或少直接传递到最终的 SQL 查询*中（一路上会有一点 ARel 的操作）*。`name`是一个模棱两可的列*（你的`banners`和`banner_types`表都有一个`name`列）*，所以需要通过它的完整路径来引用表`[TABLE NAME].[COLUMN NAME]`。例如，如果您有一些`color`列 in `banner_types` *(该列也不存在于`banners`)*中，则无需像`"banner_types.color = ?"`在您的`where`方法中那样使用它；`"color = ?"`会工作得很好。

请注意，就像在**#2**中一样，您可以将符号传递给'd 表的`where`方法。`JOIN`

```
Banner.joins(:banner_type).where(banner_type: [name: 'Featured']) 
```

* * *

### #4

> 为什么我不能通过关联进行动态查找 - 即如果我可以做 Banner.find_by_banner_type_name("Featured") 会很好？

你不能做这样的查找，因为 ARel 不支持它，它真的很简单*（IMO，一个方法名称`find_by_banner_type_name`很混乱）*。

# iphone - 重用通配符 appId 来启用推送通知

> ID：13909382
> 
> 赞同：9
> 
> 时间：2012-12-17T06:33:43.237
> 
> 标签：iphone, objective-c, ipad

我最近接手了一个 iPhone 项目，之前从未使用过 Objective-c。

我必须让应用程序使用推送通知，但第一个 appId 已经存在并使用通配符（因此没有推送通知）。

我创建了另一个带有标识符的 appId 并让推送通知正常工作。但是，我的工作场所希望我收到通知，以便为通配符应用程序工作（因为我们已经有很多客户在使用该应用程序）。

那么如何在不创建新 appId（即使具有相同的 bundleId）的情况下*更新通配符应用程序并使用唯一标识符。*

我对这一切都很陌生，因此非常感谢一步一步的过程（ELI5）。

作为参考，我使用钥匙串来获取私有 .p12 文件，并在运行控制台应用程序的 Windows 服务器上使用该文件，该应用程序生成推送通知（发送到 Apple 的 apns 服务器）。

编辑：我已经完成了以下步骤，有人可以告诉我我缺少什么吗？

1）创建新的bundleId（使用相同的AppId）。

2) 将该 AppId 配置为使用推送通知。

3) 在钥匙串中创建 CSR。

4）将其上传到门户并创建生产证书。

5）下载该证书并导出私钥。

6) 使用与 1 相同的 bundleId 创建配置文件（例如 au.com.website）。

7) 下载该配置文件，将其放入 x-code 和我的 iPhone 设备上。

8) 在 x-code 的构建设置中，使用捆绑 ID 并使用我在步骤 6 中创建的配置文件。

9) 归档应用程序，临时部署，将文件保存到桌面。

10）将该文件放入TestFlight，从我的iPhone上的testFlight下载应用程序。

11）将私钥放在我的 Windows 服务器上并发送推送通知（它们发送错误）。

我没有收到推送通知（iPhone 设置为恢复它们）。

这再次与其他人制作的另一个 appId 一起使用，所以我知道代码有效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T06:58:33.047

不要混淆应用标识符和捆绑标识符。捆绑标识符类似于：com.company.appname，由应用程序的 info.plist 定义

应用标识符有一个额外的前缀（通常是团队前缀）并且可以包含通配符。应用标识符用于将捆绑标识符与配置文件匹配。配置文件仅对匹配的应用程序有效（不包括前缀）

现在你想要的是保持包标识符相同，因为如果你改变它，它就会变成一个新的应用程序。但是您可以在每次更新时更改配置文件和应用标识符。

不久前，当我发布了一个带有通配符应用程序 ID 的应用程序并添加了一个 IAP 时，我也遇到了类似的情况。

*   您只需创建一个与捆绑包 ID 匹配的新（非通配符）应用 ID。
*   您在应用程序 ID 上启用所需的 Apple 服务（IAP、GC、APNS）。
*   您创建新的配置文件以满足您的需求（App Store、Ad Hoc、开发）

然后，您可以使用新配置文件但未更改捆绑 ID 为您的应用提交更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:46:50.493

据我所知，你问的是不可能的。

[https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandConfiguringAppIDs/CreatingandConfiguringAppIDs.html#//apple_ref/doc/uid/TP40011159-CH18-SW1](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandConfiguringAppIDs/CreatingandConfiguringAppIDs.html#//apple_ref/doc/uid/TP40011159-CH18-SW1)

这是一个较老的问题，可能有答案... [更新推送通知的实时应用程序 ID](https://stackoverflow.com/questions/3840754/updating-live-app-id-for-push-notifications)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:49:59.410

对于推送通知，appId 是必须的。一步一步的过程使用[raywenderlich](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)的两部分教程。希望这会帮助你。

# asp.net - 从 IIS 7 上托管的网站中的 Excel 文件中读取数据时的 Oledb 问题

> ID：13909384
> 
> 赞同：0
> 
> 时间：2012-12-17T06:33:54.897
> 
> 标签：asp.net, excel, iis, oledb

我有一个网站，它将使用 OleDB.12.0 在上传时从 Excel 工作表中读取数据。它在我的本地 PC 上运行良好。但是当托管在我的生产服务器中时，我收到以下错误。

> microsoft.ace.oledb.12.0 未在本地机器上注册

我该如何纠正？

我的生产服务器配置：

*   微软办公软件 2007。
*   IIS 7
*   对比 2010
*   视窗 2008 R2
*   SQL Server2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:23:00.507

您的生产服务器是否安装了 Access？

无论如何，请尝试将[Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=13255)安装/重新安装到生产服务器。

**更新**

还有一点：您的生产服务器运行的是 32 位还是 64 位 Windows？适当地选择下载。

**更新 2**

从[这个链接](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/1d5c04c7-157f-4955-a14b-41d912d50a64)看来，使用 64 位版本会在 32 位系统上造成问题，但 32 位版本可以工作。

# php - 显示错误信息 PHP Mysql

> ID：13909391
> 
> 赞同：0
> 
> 时间：2012-12-17T06:34:41.450
> 
> 标签：php, mysql

我无法让最后 2 个回显工作，即使更新查询失败它仍然显示成功。如果有人对此代码有任何建议，请在任何行进行改进，请执行！

```
<?php
        if(!empty($_POST['username']) && !empty($_POST['answer']))  { 
            $username = $_POST['username'];
            $idfetch = mysql_query("SELECT id FROM users WHERE username ='$username'") //check it
            or die(mysql_error());
            $fetched = mysql_fetch_array($idfetch);  
            $id = $fetched['id']; //get users id for checking
            $answer = $_POST['answer'];
            $password = (mysql_real_escape_string($_POST['password']));
            $confpass = (mysql_real_escape_string($_POST['confpass']));
            if ($password != $confpass) {
                echo ("Passwords do not match, please try again.");
                exit;
            }
            $updatequery = mysql_query("UPDATE users SET PASSWORD='$password' WHERE id='$id' AND username='$username' AND answer='$answer'");
            if($updatequery)  {  
                echo "<h1>Success</h1>";  
                echo "<p>Your account password was successfully changed. Please <a href=\"login.php\">click here to login</a>.</p>";  
            }  
            else  {  
                echo "<h1>Error</h1>";  
                echo "<p>Sorry, but a field was incorrect.</p>";  
            }  
       } 
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:48:07.243

```
mysql_query("UPDATE users SET PASSWORD='$password' WHERE id='$id' AND username='$username' AND answer='$answer'") or die(mysql_error()."update failed"); 
```

并使用

```
mysql_affected_rows()

Returns the number of affected rows on success, and -1 if the last query failed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:40:23.120

使用 try catch 并尝试在 php 中获取错误启用错误报告

```
<?php
        error_reporting(E_ALL);
        ini_set('display_errors','On');
        if(!empty($_POST['username']) && !empty($_POST['answer']))  { 
        $username = $_POST['username'];
        $idfetch = mysql_query("SELECT id FROM users WHERE username ='$username'") //check it
        or die(mysql_error());
        $fetched = mysql_fetch_array($idfetch);  
        $id = $fetched['id']; //get users id for checking
        $answer = $_POST['answer'];
        $password = (mysql_real_escape_string($_POST['password']));
        $confpass = (mysql_real_escape_string($_POST['confpass']));
        if ($password != $confpass) {
        echo ("Passwords do not match, please try again.");
        exit;}

        try{
        $updatequery = mysql_query("UPDATE users SET PASSWORD='$password' WHERE id='$id' AND username='$username' AND answer='$answer'");
        if($updatequery)  {  
        echo "<h1>Success</h1>";  
        echo "<p>Your account password was successfully changed. Please <a href=\"login.php\">click here to login</a>.</p>";  }  
        else  {  
        echo "<h1>Error</h1>";  
        echo "<p>Sorry, but a field was incorrect.</p>";  
        }  

        }catch(Exception $e){
            print_R($e);
        }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:36:54.140

采用

```
if(mysql_num_rows($updatequery)  > 0) {
    // success
} else {
    // error
} 
```

`$updatequery`将始终为真（非 NULL），直到您的查询出现错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:38:37.680

use or **die(mysql_error())**因为如果您的查询有错误，它将显示 mysql 错误。

`$updatequery = mysql_query("UPDATE users SET PASSWORD='$password' WHERE id='$id' AND username='$username' AND answer='$answer'") or die(mysql_error());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T06:43:53.927

试试这个：

```
$idfetch = mysql_query("SELECT id FROM users WHERE username ='$username'");
if(!idfetch){
  die(mysql_error());
} 
```

对所有其他查询也执行相同的操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T06:48:00.907

试试这个，首先将行计数值计算为 1，然后继续登录过程。

```
<?php
    if(!empty($_POST['username']) && !empty($_POST['answer']))  { 
        $username = $_POST['username'];
        $idfetch = mysql_query("SELECT id FROM users WHERE username ='$username'") //check it
        or die(mysql_error());
        $fetched = mysql_fetch_array($idfetch);

        $count= mysql_num_rows($idfetch);

        if($count>0){
        $id = $fetched['id']; //get users id for checking
        $answer = $_POST['answer'];
        $password = (mysql_real_escape_string($_POST['password']));
        $confpass = (mysql_real_escape_string($_POST['confpass']));
        if ($password != $confpass) {
            echo ("Passwords do not match, please try again.");
            exit;
        }

        $updatequery = mysql_query("UPDATE users SET PASSWORD='$password' WHERE id='$id' AND username='$username' AND answer='$answer'");

          if($updatequery)  {  
            echo "<h1>Success</h1>";  
            echo "<p>Your account password was successfully changed. Please <a href=\"login.php\">click here to login</a>.</p>";  
         }  
           else  {  
             echo "<h1>Error</h1>";  
             echo "<p>Sorry, but a field was incorrect.</p>";  
           }  
   } } ?> 
```

# jquery-mobile - 模态对话框关闭后jQuery移动谷歌地图变形

> ID：13909392
> 
> 赞同：1
> 
> 时间：2012-12-17T06:34:49.587
> 
> 标签：jquery-mobile, google-maps-api-3, dialog

我对 jqm 和谷歌地图有疑问。
我想使用一个对话框来获取用户的地址输入并将地址转换为 lat 和 lng 并将地图的中心设置为该位置。
我使用谷歌地理编码服务并设置中心功能，问题是：

当我使用 iphone4 的 safari 和 chrome 桌面版时，没问题，但我在我的 android 手机（HTC THUN DERBOLT )，地图不能完全显示，只加载部分地图和地图样式，如右上方地图的工具栏变得不正常。
另外还有一个奇怪的问题，如果我给文本框设置了一个初始值，并且我不改变这个值，地图可以正确显示，如果我输入我的地址，google geocode服务可以获取lat和lng数据但地图似乎崩溃了，它只显示部分地图，无法拖动到屏幕中央。
发生了什么，我该如何解决？感谢你。

带有代码和屏幕截图的链接：http: [//forum.jquery.com/topic/jquery-mobile-dialog-and-google-map-problem](http://forum.jquery.com/topic/jquery-mobile-dialog-and-google-map-problem)。

# ruby - 在 Rails 中覆盖 ActionView::Base.field_error_proc

> ID：13909393
> 
> 赞同：2
> 
> 时间：2012-12-17T06:35:02.230
> 
> 标签：ruby, ruby-on-rails-3

现在我有我的 ActionView::Base.field_error_proc 作为

```
Proc.new do |html_tag, instance|
  if html_tag =~ /^<label/ or instance.respond_to?(:object_name)
    %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
  else
    %{<div class="field_with_errors">#{html_tag}<br /><label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div>}.html_safe
  end 
```

当我使用 client_side_validations gems 时，我已经修改了它以适应我的一些需求。

现在，'fields_with_error' div 包裹着 html_tag（即具体的错误字段）。我想知道的是是否可以修改 div class="fields_with_error" 的位置并将其放在包含 error_field 的 div 之后。

例如，

```
<div class="main_div">
  <%= password_field_tag 'secret', 'Your secret here' %>
</div> 
```

然后 div class="fields_with_error" 应该定位为

```
<div class="main_div">
  <%= password_field_tag 'secret', 'Your secret here' %>
</div>
<div class="fields_with_error"> <label class="message"> The error message </label> </div> 
```

任何帮助都会很有价值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T09:13:09.107

因此，当我使用 twitter bootstrap 时，我通常会使用类似的东西制作一个初始化程序

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  html = %(<div class="field_with_errors">#{html_tag}</div>).html_safe
  # add nokogiri gem to Gemfile

  form_fields = [
    'textarea',
    'input',
    'select'
  ]

  elements = Nokogiri::HTML::DocumentFragment.parse(html_tag).css "label, " + form_fields.join(', ')

  elements.each do |e|
    if e.node_name.eql? 'label'
      html = %(<div class="control-group error">#{e}</div>).html_safe
    elsif form_fields.include? e.node_name
      if instance.error_message.kind_of?(Array)
        html = %(<div class="control-group error">#{html_tag}<span class="help-inline">&nbsp;#{instance.error_message.uniq.join(', ')}</span></div>).html_safe
      else
        html = %(<div class="control-group error">#{html_tag}<span class="help-inline">&nbsp;#{instance.error_message}</span></div>).html_safe
      end
    end
  end
  html
end 
```

这只是将常规错误调整为表单中的 twitter 错误 :> 让一切看起来都非常好 ;>。您可以使用相同的方法。

干杯，如果这有帮助

# asp.net-mvc-3 - ASP.NET MVC 3 尝试通过 IIS7.0 设置 https

> ID：13909395
> 
> 赞同：0
> 
> 时间：2012-12-17T06:35:09.150
> 
> 标签：asp.net-mvc-3, iis-7, entity-framework-4.1

**ASP.NET + MVC 3 + IIS7.0 + HTTPS 请求**

简而言之，如何在 IIS7.0 中设置 HTTPS 请求（注意：我没有使用 IIS express）。理想情况下，我只需要我的 AccountController 中的事件，但我可以回到这一点。我已经阅读了一些帖子，并且开始理解它们，但是我想我只需要指导，因为我不确定发生了什么。我所做的如下：

网络配置：

```
<authentication mode="Forms">
    <forms name="MyMVCAUTH" loginUrl="~/Account/LogOn" timeout="20" protection="All" requireSSL="true"/>
</authentication> 
```

在 IIS7.0 中：

1.  通过将路径添加到我的代码并使用 DefaultAppPool 创建了一个新网站
2.  我编辑了权限并使用“读取和执行”添加了 IIS_IUSRS 用户
3.  更改了 DefaultAppPool 以使用最新的 .NET 框架
4.  创建了一个新的自签名证书并添加了一个 https 绑定
5.  我的“默认网站”指向端口 80 我停止并将默认端口 80 和 443 应用到我的新站点。

使用 debug=true 通过 VS“MS Visual Web Developer 2010 Express”运行我的应用程序，并删除了它不喜欢的 targetFramework="4.0" 违规行。但是，单击我的 [登录] 链接，我的 CSS 样式已被删除！？！？我是否需要通过 VS 指定端口号？通过 VWD 它选择一个随机端口号，当您单击超链接时，它会删除端口号？ ![ASP.NET MVC 3 IIS7 应用程序屏幕截图](../Images/5cd94675530c3571863c10a183fc433c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:49:36.117

由于您创建了自签名证书，IE 无法识别它来自有效的证书颁发机构，并在您导航到该网站时向您发出警告。您可以通过继续访问网页来忽略警告。您的 CSS 和 javascrpt 链接也会发生同样的情况。因此，您可以执行以下操作：将指向 CSS 和 JS 文件的链接复制粘贴到浏览器地址栏中（使用 HTTPS）并忽略警告。然后刷新实际页面 ( `Ctrl+F5`)，样式应该会重新出现。

# github - 如何重命名 GitHub 托管存储库？

> ID：13909398
> 
> 赞同：2
> 
> 时间：2012-12-17T06:35:17.100
> 
> 标签：github

我最近参加了旧金山无人机奥运会。在真实奥运会的友好说明之后，名称被更改为无人机运动会或类似的东西。我需要相应地更改我的 GitHub 名称。

那么，**如何重命名 GitHub 上的存储库？**

为了具体起见，我想重命名

*   [https://github.com/marhar/droneolympics](https://github.com/marhar/droneolympics)

到

*   [https://github.com/marhar/ArctiNode](https://github.com/marhar/ArctiNode)

注意：此问题涉及这样做的后续步骤，而不是更改名称的过程。

[如何重命名 GitHub 上的存储库？](https://stackoverflow.com/questions/5751585/change-repo-name-in-github)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:57:46.173

在 GitHub 上，转到您的存储库、管理员、重命名。指定新名称，然后更改，确认，这将完成。

您还应该在 repo 的所有本地副本中重命名远程源，以便推送和拉取工作。

# iphone - 合并音频与视频 Objective-C

> ID：13909400
> 
> 赞同：2
> 
> 时间：2012-12-17T06:35:39.577
> 
> 标签：iphone, ios, objective-c, avassetwriter

我正在尝试使用以下方法将音频文件与视频文件合并：

```
+ (void)CompileFilesToMakeMovie:(NSString *) audioPath {
NSLog(@"a");
AVMutableComposition* mixComposition = [AVMutableComposition composition];
NSURL *audio_inputFileUrl = [[NSURL alloc] initFileURLWithPath:audioPath];

NSString *videoPath = [[NSBundle bundleForClass:[self class]] pathForResource:@"input" ofType:@"mov"];
NSURL*    video_inputFileUrl = [NSURL fileURLWithPath:videoPath];

NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsDir = [dirPaths objectAtIndex:0];
NSString *outputFilePath = [docsDir stringByAppendingPathComponent:@"OutputFile.mov"];
NSURL*    outputFileUrl = [NSURL fileURLWithPath:outputFilePath];

if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath])
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];
NSLog(@"b");

CMTime nextClipStartTime = kCMTimeZero;

AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:video_inputFileUrl options:nil];
CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
[a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

 NSLog(@"c");
AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audio_inputFileUrl options:nil];
CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];
 NSLog(@"d");

AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
_assetExport.outputFileType = @"com.apple.quicktime-movie";
_assetExport.outputURL = outputFileUrl;

[_assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) {
     UISaveVideoAtPathToSavedPhotosAlbum(outputFilePath, nil, nil, nil);
 }       
 ];

} 
```

但是在为“NSRangeException”记录“c”后出现错误，原因：

> *** -[__NSArrayM objectAtIndex:]: 索引 0 超出空数组的范围。

音频文件位于

```
 NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *docsDir = [dirPaths objectAtIndex:0];
  NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"%1.iaff"]; 
```

有小费吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T08:09:07.953

首先我应该说你给出的音频格式不正确，

```
NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"%1.iaff"]; 
```

做**那个** `NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"1.aiff"];`

如果您不确定您使用的代码，此代码适用于我，

```
 -(void) mergeAudio:(NSURL *) audioURL withVideo:(NSURL *) videoURL andSaveToPathUrl:(NSString *) savePath{

 AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audioURL options:nil];
 AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:videoURL options:nil];

 AVMutableComposition* mixComposition = [AVMutableComposition composition];

 AVMutableCompositionTrack *compositionCommentaryTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio
 preferredTrackID:kCMPersistentTrackID_Invalid];
 [compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration)
 ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
 atTime:kCMTimeZero error:nil];

 AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo
 preferredTrackID:kCMPersistentTrackID_Invalid];
 [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset.duration)
 ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
 atTime:kCMTimeZero error:nil];

 AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition
 presetName:AVAssetExportPresetPassthrough];

 NSURL    *savetUrl = [NSURL fileURLWithPath:savePath];

 if ([[NSFileManager defaultManager] fileExistsAtPath:savePath])
 {
 [[NSFileManager defaultManager] removeItemAtPath:savePath error:nil];
 }

 _assetExport.outputFileType = @"com.apple.quicktime-movie";

 _assetExport.outputURL = savetUrl;
 _assetExport.shouldOptimizeForNetworkUse = YES;

 [_assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) {
 NSLog(@"fileSaved !");
 }
 ];

 } 
```

传递最终文件的**videoURL**、**audioURL**和**保存路径**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-21T19:46:54.393

发生这种情况是因为音频或视频文件尚未完全写入，您正在尝试合并它们。确保您使用完成处理程序来确保完整写入特定路径的音频和视频文件。

# opengl - OpenGL中的图像和纹理有什么区别

> ID：13909404
> 
> 赞同：10
> 
> 时间：2012-12-17T06:35:44.383
> 
> 标签：opengl

我刚开始学习OpenGL。我对图像和纹理感到困惑。

*   图像是否仅用于为 2D 场景着色。并使用顶点和纹理在 3D 场景中为场景着色？（我的意思是按照书的操作**顺序**`OpenGL Programming Guide`。首先我们有顶点数据和图像数据。我们可以将图像数据用作或不用作纹理。当不用作纹理时。它只能用作场景的背景对。`right`?)
*   纹理操作是否比图像操作快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:46:59.307

就 OpenGL 而言，图像是 RAM 中的像素数据数组。例如，您可以使用标准 C 函数在 RAM 中加载一个 Smiley.tga，这将是一个图像。纹理是指图像数据由 OpenGL 加载到视频内存中。这可以这样做：

```
GLuint *texID;
glGenTextures(1, (GLuint*)&texID);
glBindTexture(GL_TEXTURE_2D, texID);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, imagedata); 
```

图像加载到显存后，可以对 RAM 中的原始图像数据进行 free() 处理。纹理现在可以被 OpenGL 使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T10:06:34.877

我也是 OpenGL 的新手。并且对于低级计算/GPU架构并不是很好。但这是我刚刚学到的东西，我正在向你解释。

在 OpenGL 中，您没有像在其他一些框架中那样的“图像”对象（`QImage`在 Qt、`BufferedImage`Java Swing、`Mat`OpenCV 中的对象等），但是您有一些缓冲区，您可以在其中通过 OpenGL 渲染管道进行渲染或存储图像.

如果您打开一个 opengl 上下文，您将在[默认帧缓冲区](http://www.opengl.org/wiki/Default_Framebuffer)（在屏幕上）中进行渲染。但是您可以在其他一些帧缓冲区中进行一些屏幕外渲染，例如在[渲染缓冲区](http://www.opengl.org/wiki/Renderbuffer)中。然后你有一些其他的缓冲区，可以将图像存储在 GPU 中的一些缓冲区中，这些缓冲区可以用作[纹理](http://www.opengl.org/wiki/Texture)。

这些 OpenGL 缓冲区（渲染缓冲区或纹理）存储在 GPU 内部（从 GPU 到 CPU 的传输或反之亦然有一些成本）。从 GPU 到 CPU 的传输是一种称为[像素传输](http://www.opengl.org/wiki/Pixel_Transfer)的操作。

一些例子：

*   您可以加载图像（例如文件中的位图）并将其用作纹理。你在这里做什么？将磁盘上的图像（像素矩阵）加载到 CPU 上，然后将其传递给 GPU 并将其存储在纹理缓冲区中。然后你可以告诉 OpenGL 用那个纹理渲染一个立方体。

*   您可以将一些复杂的场景渲染到 GPU 中的渲染缓冲区（离屏渲染），通过传输像素操作将其加载到 CPU 中，并将其保存到文件中。

*   您可以将场景渲染为纹理（渲染到纹理），然后更改相机参数，渲染到屏幕，并将之前渲染的纹理用作镜像对象中的纹理。

GPU 上的操作比 CPU 上的操作更快。我认为（但我不确定）纹理上的操作比渲染缓冲区上的操作要慢一些（因为例如纹理可能具有的 mipmap 缩放而渲染缓冲区没有）。

我认为对于场景的背景，您必须使用纹理（或一些从缓冲区加载像素的着色器）。

所以，最后，你在 OpenGL 中没有图像对象。你有缓冲区。您可以在其中存储数据（从 CPU 到 GPU 的传输），可以在其中渲染（离屏渲染），可以读取像素（从 GPU 到 CPU 的像素传输）。其中一些可以用作纹理。这意味着更多的东西，比如它们可以通过 mipmap 缩放以不同的分辨率缩放，并通过一些高斯操作进行缩放，它们可以以不同的方式进行抗锯齿、钳位等。

希望这会有所帮助。对不起，如果有一些错误，但我也在学习 OpenGL。

# c# - SWIG 中的命名空间常量

> ID：13909406
> 
> 赞同：2
> 
> 时间：2012-12-17T06:35:57.760
> 
> 标签：c#, java, c++, swig

问题很简单，我在 C++ 命名空间中有一些常量，我想使用 SWIG 2.0.8 进行包装。它看起来像这样：

```
namespace Example {
    static const float PI = 3.14159f
    ...
    /* Lots of classes are here */
} 
```

不幸的是，SWIG 相当笨拙地处理了这个问题。在 C# 的情况下，它将常量添加到与命名空间同名的类中，因此`Example.Example.PI`即使我显式地使用它也必须使用它来访问它`using Example`（由于模块名称的屏蔽）。

在 Java 中，它甚至更糟，因为它根本不将其视为常量，我被迫使用`Example.getPI()`方法调用而不是常量类变量来调用它。

如果我将常量移动到全局命名空间，这似乎可行，但必须使用`ExampleConstants.PI`.

理想情况下，我希望两种语言都能够通过`Example.PI`与 C++ 保持一致来访问常量。但是我会满意的一个折衷方案是，如果我可以`Constants`在我的命名空间中有一个类，以便我可以`Constants.PI`在任何一种语言中使用。但是当然，C++ 不允许在类中定义非整数类型，这仍然不能解决 Java 中的问题。

有没有什么优雅的方法可以用 SWIG 处理这些命名空间常量？如果没有，有没有办法可以手动添加 Java 或 C# 类来定义它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T02:04:17.127

我为 C++ - C# 解决了类似的问题。我不确定这是否正是您正在寻找的，但我希望您能找到一些对您有用的信息。

我的项目中没有接触过 Java 代码。

**痛饮解决方案。**

我在 C++ 中创建了具有公共静态无参数函数的类。

然后我使用 SWIG 将它们导出到 C#。
我在命令行中用`-namespace <name>`键为 C# 指定了命名空间。更多详细信息可在[SWIG 和 C#页上找到](http://www.swig.org/Doc1.3/CSharp.html)

`Constants::PI()`因此，您可以使用和访问常量的解决方案`Constants.PI()`

**直接解决方案**

如果您不想使用 SWIG 或其他库，则应使用[PInvoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)。使用它时有很多细节和特殊情况。我发现的关于该主题的最全面的文章是[Mono Interop with Native Libraries](http://www.mono-project.com/Interop_with_Native_Libraries)

您应该考虑使用[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface) for Java。

请注意，C++ 函数在没有命名空间的情况下作为纯 C 函数导出，您应该创建 C# 类并创建具有[DllImport 属性](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)的函数以将函数包装回命名空间。

一般来说，如果您的 C++ 接口或多或少是固定的和/或较小的，我会坚持直接解决方案，因为 SWIG 层有许多特定情况，应该与 PInvoke/JNI 一起学习。但是，如果您的 C++ 接口经常更改并且需要大量努力来保持 C++、C# 和 Java 的一致，那么您肯定需要考虑 SWIG。

[您可以在https://stackoverflow.com/a/11909571/13441](https://stackoverflow.com/a/11909571/13441)找到使用 PInvoke 的重要示例

**关于 C++ 常量**。您可以在类中指定 C++ 常量，详情请参阅[C++ 静态常量字符串（类成员）](https://stackoverflow.com/questions/1563897/c-static-constant-string-class-member)。

我使用 SWIG 1.3.40。

希望这会有所帮助。

# php - MySQL 加入删除

> ID：13909412
> 
> 赞同：-1
> 
> 时间：2012-12-17T06:36:28.453
> 
> 标签：php, mysql, join, phpmyadmin, left-join

我有多个表 list_of_students、sport_students。

在 sport_students 我有一个名为

list_of_house_id 和 list_of_students 我有字段 list_of_class_id 和 list_of_house_id。

现在，但我需要删除从 sport_student acc 到 house_id 和 list_of_class_id 的记录。

我已经尝试过这个查询，但似乎不起作用

```
DELETE FROM `sport_students` JOIN list_of_students as student on `sport_student.list_house_id`= `student.list_of_house_id` WHERE `sport_student.list_of_house_id`=1 and `list_of_students.list_of_class_id`=1 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:41:48.660

试试这个：

```
DELETE sp
  FROM `sport_students` sp
  JOIN list_of_students as student 
    ON sp.list_house_id = student.list_of_house_id
 WHERE sp.list_of_house_id=1 
   AND student.list_of_class_id=1; 
```

有关更多信息，请参阅[MySQL：删除语法](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:05:34.647

```
DELETE  FROM sport_students
WHERE   list_of_house_id IN (
            SELECT  list_of_house_id
            FROM    list_of_students
            WHERE   list_of_class_id = 1 AND list_of_house_id =1 
        ) 
```

# javascript - 验证图像文件类型/文件大小、裁剪、调整大小然后上传

> ID：13909415
> 
> 赞同：22
> 
> 时间：2012-12-17T06:36:38.817
> 
> 标签：javascript, jquery, flash, client

我正在寻找客户端解决方案来验证上传的图像是否具有可接受的文件类型、文件大小，然后按照用户的指示裁剪图像，重新调整大小以适应某些特定尺寸，然后上传重新大小和优化的图像到服务器。

是否有任何众所周知的开源库可以帮助我实现这一点？（不需要上传多个文件）。我不想自己实现这个并寻找一个可以提供跨浏览器兼容解决方案的库，并为旧的/不受支持的浏览器提供后备。

我遇到了 plupload 和敏捷上传器，但这些对根据用户指示裁剪图像没有帮助。

* * *

使用 jQuery 1.7。如果需要，也可以打开以添加其他库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:25:11.730

愿你平安，兄弟

我在我的项目中使用了你想要的东西，但没有（调整照片的大小，因为我为图像设置了自定义大小）

我使用（imgareaselect）裁剪照片

但我不记得它的网站，也许： http: [//odyniec.net/projects/imgareaselect/examples.html](http://odyniec.net/projects/imgareaselect/examples.html)

如果那个网站是对的，我正在使用这个代码

```
 var x1 = null, y1 = null, w = null, h = null, Signal = null, object=null;

   function preview(img, selection) {
    var img = {
        url: jQuery("#image").attr("src"),
        width: jQuery("#image").width(),
        height: jQuery("#image").height()
    }

    var scaleX = 128 / selection.width;  // 128 = my custom size ;)
    var scaleY = 128 / selection.height; 
    $(".avatar-box img").replaceWith('<img id="thumbnail" src="'+img.url+'" class="preview" border="0"/>');

    $('#thumbnail').css({ 
      width: Math.round(scaleX * img.width) + 'px', 
      height: Math.round(scaleY * img.height) + 'px',
      marginLeft: '-' + Math.round(scaleX * selection.x1) + 'px', 
      marginTop: '-' + Math.round(scaleY * selection.y1) + 'px' 
    });

    x1 = selection.x1; y1 = selection.y1; w = selection.width; h = selection.height;
   }
$(window).ready(function () {
 $('#image').imgAreaSelect({ aspectRatio: '1:1', onSelectChange: preview });
}); 
```

并检查大小和类型：我也使用这个脚本

```
 $("form").submit(function(){
     var OrgFile = $(this).find("[type=file]"),
         FileName = OrgFile.val(),
         FileExtension = FileName.split('.').pop().toLowerCase();
         if(FileName.indexOf(".")==-1 || FileExtension != "jpg" && FileExtension != "jpeg" && FileExtension != "png" && FileExtension != "gif" ){ // Curstom File Extension
          alert("This isn't a Photo !");
          return false;
         }else
         if((OrgFile[0].files[0].size/1024/1024) > (1)){ // Max Photo Size 1MB
          alert("You Photo is too big !");
          return false;
         }else{
          alert("every thing Fine :)");
          return true;
         }
   }); 
```

然后如果客户端提交裁剪的图像

```
 $('#create_thumbnail').submit(function() {
    $.ajax({
     type : "POST",
     url : "resize.php",
     data : {logged_code: logged_code,x1: x1,y1: y1,w: w,h: h},
     success: function(data) {}
    });
    return false;
  }); 
```

和 resize.php 文件

```
 function resizeThumbnailImage($thumb_image_name, $image, $width, $height, $start_width, $start_height, $scale){
        list($imagewidth, $imageheight, $imageType) = getimagesize($image);
        $imageType = image_type_to_mime_type($imageType);
        $newImageWidth = ceil($width * $scale);
        $newImageHeight = ceil($height * $scale);
        $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
        switch($imageType) {
            case "image/gif":
                $source=imagecreatefromgif($image); 
                break;
            case "image/pjpeg":
            case "image/jpeg":
            case "image/jpg":
                $source=imagecreatefromjpeg($image); 
                break;
           case "image/png":
            case "image/x-png":
                imagealphablending($newImage, false);
                imagesavealpha($newImage, true);  
                $source=imagecreatefrompng($image); 
                break;
        }
        imagecopyresampled($newImage,$source,0,0,$start_width,$start_height,$newImageWidth,$newImageHeight,$width,$height);
        switch($imageType) {
            case "image/gif":
                imagegif($newImage,$thumb_image_name); 
                break;
            case "image/pjpeg":
            case "image/jpeg":
            case "image/jpg":
                imagejpeg($newImage,$thumb_image_name,100); 
                break;
            case "image/png":
            case "image/x-png":
                imagepng($newImage,$thumb_image_name);  
                break;
      }
        chmod($thumb_image_name, 0777);
        return $thumb_image_name;
    } 
```

我希望我能帮助你并理解你的问题，

请选择我的答案，我想加入 php 聊天室以找到一个帮助我解决问题的人

对不起我的英语不好我说阿拉伯语

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:21:50.800

尝试使用[Fine Uploader](http://fineuploader.com/#features)进行客户端验证和上传；之后使用[JCrop](http://deepliquid.com/content/Jcrop.html)裁剪图像。

精细上传器非常适合在客户端限制大小和文件类型（[请参阅此处）；](http://fineuploader.com/fine-uploader-demo.html#demo3)但是它确实取决于您需要支持哪些浏览器（我相信 IE7 不允许您像这样在客户端进行验证）。

虽然 JCrop 是一个易于实现的裁剪工具，它支持纵横比和在其显示和实际尺寸之间转换图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T21:59:05.660

这里有几件不同的事情：

*   验证图像/文件类型。这可以在客户端完成，但为了安全起见，您需要再次在服务器上执行此操作。对于只接受图像的文件输入，您可以使用：

    ```
    <input type="file" accept='image/*'> 
    ```

*   让用户裁剪图像。这里有几个库，最突出的是 Jcrop。但是还有其他选择，例如 imgareaselect、jqCrop 和 jquery-cropbox（我创建并维护了 jquery-cropbox）。有关如何开始使用一两行 jquery 的非常简单的示例，请参见此处。

[http://acornejo.github.io/jquery-cropbox/](http://acornejo.github.io/jquery-cropbox/)

*   在客户端进行实际裁剪。这需要 HTML5，因此不适用于旧版本的 Internet Explorer。特别是，您将需要画布 api，可能还需要文件 api（用于提供文件）。jquery-cropbox 也可以通过`getBlob`and`getDataURL`方法为你做这件事。如果您想手动完成，请看这里：

[https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D)

*   上传图片。那里有很多用于上传图像的脚本，请自行选择。如果您使用的是 jquery-cropbox，那么您可以使用 jquery 像这样处理上传到您的服务器（像这样上传客户端生成的表单数据也需要兼容 HTML5 的浏览器）。

    ```
    var blob = $('#yourimage').data('cropbox').getBlob();
    var fd = new FormData();
    fd.append('file', blob);

    $.ajax({
        type: 'POST',
        url: 'http://yourwebsite.com/handle_uploads',
        data: fd,
        cache: false,
        contentType: false,
        processData: false,
        success: function(data){
          alert('upload succeeded');
        },
        error: function () {
          alert('upload failed');
        }
    }); 
    ```

    },

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T06:58:38.347

可以使用 FileReader 和画布来调整大小。创建一个想要大小的画布。

加载图像。然后使用canvas.toDataURL(fileType) 获取文件内容为base64

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T06:41:52.157

请使用以下命令检查客户端的文件大小：

```
<script type="text/javascript">
    $('#image-file').bind('change', function() {
        alert('This file size is: ' + this.files[0].size/1024/1024 + "MB");
    });
</script> 
```

如果您需要用于整个项目的插件类型，您可以查看[此](http://demo.swfupload.org/v220/featuresdemo/index.php).

如果您正在寻找多个上传者，请使用[此](http://blueimp.github.com/jQuery-File-Upload/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T12:59:02.633

至于文件类型和大小：

```
var fileUpload = $(':file[id="fileUploadId"]');
var fileName = $(fileUpload).val();
// Checking type:
if(fileName.indexOf('.jpg') || fileName.indexOf('.gif')){/* Accepted types */}

// Check size
if($(fileUpload).size() <= yourAcceptedSize) {/* Accepted size */} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T07:19:15.483

请看看[这个图书馆](http://www.resize-before-upload.com/)

[这是](http://www.resize-before-upload.com/docs/xml-reference/)文档页面，您可以在其中设置最大调整大小值，

```
<maxwidth>800</maxwidth>
<maxheight>500</maxheight>
<minwidth>100</minwidth>
<minheight>70</minheight> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T19:37:59.990

我有个主意。您可以尝试使用此插件进行上传。

[http://des.deletesoft.com:8080/?go=2](http://des.delestesoft.com:8080/?go=2)

定义属性时：发布变量->

```
variables:{
            sessionID:"abcdefg",
            width:$("#myimage").width(),
            height:$("#myimage").heigth()
        }, 
```

在服务器端：您获取文件并根据帖子变量更改大小图像。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-21T02:19:02.920

jQuery Ajax 代码

```
jQuery('document').ready(function(){

    var input = document.getElementById("imagefile");
    var formdata = false;
    if (window.FormData) {
        formdata = new FormData();
    }

    input.addEventListener("change", function (evt) {

        var i = 0, len = this.files.length, img, reader, file;

        for ( ; i < len; i++ ) {
            file = this.files[i];

            //validation to check whether uploaded files are images
            if (!!file.type.match(/image.*/)) {
                if ( window.FileReader ) {
                    reader = new FileReader();
                    reader.onloadend = function (e) { 
                    };
                    reader.readAsDataURL(file);
                }

                if (formdata) {
                    //send the ajax query to upload the file(s)
                    jQuery.ajax({
                        url: "upload.php",
                        type: "POST",
                        data: formdata,
                        processData: false,
                        contentType: false,
                        success: function (result) {
                            jQuery('div#response').html("Successfully uploaded").fadeOut();
                        }
                    });
                }
            }
            else
            {
                alert('Not a vaild image!');
            }   
        }

    }, false);

}); 
```

HTML 代码

```
<form enctype="multipart/form-data">
<input id="imagefile" type="file" name="image" accept="image/*"/ />
</form> 
```

上面的代码将为您做的是，一旦您上传文件，它将首先验证图像的类型并通过 ajax 为您上传。如果需要，您可以进行**多个文件上传。**如果你想知道什么`FormData`是，

> 该`FormData`对象允许您编译一组键/值对以使用 XMLHttpRequest 发送。它主要用于发送表单数据，但可以独立于表单使用以传输键控数据。如果表单的编码类型设置为“multipart/form-data”，则传输的数据与表单的 submit() 方法用于发送数据的格式相同。

addEventListener 为您做的是，

> addEventListener() 在单个目标上注册单个事件侦听器。事件目标可以是文档中的单个元素、文档本身、窗口或 XMLHttpRequest。

您可以使用`upload.php`在服务器级别上传文件。

如果你想在插件中拥有这个功能，你可以用上面的代码扩展插件，它不会破坏你的插件，因为这是一个非常简单的代码片段，可以完成工作。我已经成功地将代码集成到插件中，完全没有问题。

此链接将向您展示如何验证文件大小。[JavaScript 文件上传大小验证](https://stackoverflow.com/questions/3717793/javascript-file-upload-size-validation)

重新调整它的大小以适应某些特定尺寸 [javascript Image Resize](https://stackoverflow.com/questions/170624/javascript-image-resize)

[如何按比例调整图像大小/保持纵横比？](https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio)

这些链接应该对您有所帮助。我不会将所有内容集成为一个，因为要保持代码的简单性，以便您可以轻松理解。

如果您有任何问题，请告诉我。

# ios - 如何将 NSTimeInterval 转换为秒（用于 backgroundTimeRemaining）

> ID：13909422
> 
> 赞同：4
> 
> 时间：2012-12-17T06:37:23.157
> 
> 标签：ios, double, nstimeinterval

我正在运行测试以测量剩余的后台任务时间。我已经阅读了几个示例，并看到每个人都这样做：

```
UIApplication *app = [UIApplication sharedApplication];
double *bgTime = app.backgroundTimeRemaining;

NSLog(@"Background Time Remaining: %f", bgTime); 
```

但是我得到了很长的值，例如 1797693134862315708145274237317043567980705675258449965989 ...

我知道 [[UIApplication sharedApplication] backgroundTimeRemaining] 是 NSTimeInterval，但是有没有办法将它转换为 x 秒？

我也试过[这个](https://stackoverflow.com/questions/9521664/backgroundtimeremaining-returns-35791394-mins)，但它不会工作。

任何帮助，将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:40:49.617

因为`NSTimeInterval`是`float`or `double`，但不是指针。`double *bgTime`应该是`double bgTime`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:47:12.167

[如果应用程序在前台，根据此处](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)的文档，时间会很长。

# jquery - 在 PHP/JQUERY 中锁定水平滚动

> ID：13909426
> 
> 赞同：0
> 
> 时间：2012-12-17T06:37:37.150
> 
> 标签：jquery, html, browser

我构建了一个小的 php/mssql WebApp 供我的组织使用。它在 Android 平板电脑默认浏览器上运行。此应用程序是一个交互式 html 表格，其固定宽度为 650 像素。我不希望我的用户能够在那里滑动手指并水平滚动表格。（我需要他们保持专注。）我很乐意得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:39:26.013

溢出 css 属性控制滚动：

```
overflow:hidden; 
```

或者具体来说：

```
overflow-x:hidden; 
```

# hyperlink - MS Word 超链接字体格式错误？

> ID：13909427
> 
> 赞同：0
> 
> 时间：2012-12-17T06:37:39.457
> 
> 标签：hyperlink, fonts, ms-word

我对超链接`font`格式有疑问，`word 2003/2007`也许它也有其他问题，但我没有尝试过。

*首先*我`hyperlink`在**我**`document`的 **.** _ 一切正常，格式已更改。***`Webdings`***

 *当我`hyperlink`通过 ctrl + k 添加下一个（或插入无关紧要的超链接）时，就会出现问题。它接受大部分格式。它是**粗体、斜体，**甚至改变颜色的作品，但字体始终保持为`Times New Roman`12。

当我在此之后更改格式时`hyperlink`，第一个超链接就可以了。变了`color`，样式变了`font`。后来添加的其他更改了它们的颜色、样式但不更改字体。它仍然是Times new Roman 12。

当我选择它们时，它们是超链接的样式。当我再次将它们设置为样式超链接（例如，使用 enter）时，它们也将其字体更改为 webdings，但我需要接受这种字体，因为我想从模板生成具有 Visual Basic 的文档，以及已经存在的超链接在模板中接受模板中的新字体，但用 VB 添加的超链接不接受新字体。并且总是选择添加的超链接并将其类型再次设置为超链接......它对我来说有点奇怪......

有人知道这个问题的解决方案吗？我试图用谷歌搜索两天但没有成功......

**编辑：**我现在发现，它没有设置 format `Times new roman 12`，但它设置的格式与*Normal*字体中设置的格式相同。但格式显示为设置为*超链接*而不是*Normal*。但是当我再次更改正常格式时，它不接受对已经创建的超链接的更改，而只接受新的超链接...我不知道，但我觉得它真的很奇怪，所有这些规则并不适用于每次...*

# linux - 已安装 OpenMPI 库，但无法在 Linux 中使用 mpicc 命令

> ID：13909432
> 
> 赞同：0
> 
> 时间：2012-12-17T06:38:09.413
> 
> 标签：linux, permissions, configure, openmpi

我正在关注 openmpi 安装文件。

首先，我是这个linux系统的普通用户。我无权访问 /usr/local 。如果我配置：

```
./configure --prefix=/usr/local 
```

make 会抱怨权限。

因此，我把要安装的地方放到了其他目录（我们称之为目录'A'），然后`make install`.

我得到了垃圾箱中的所有文件等。我在 bin 文件夹中得到了 mpic++、mpicc 等，在目录“A”中。

现在，问题是当我需要编译其他程序时：

```
Compiling MPI Applications
==========================

MPI applications should be compiled using the Open MPI "wrapper"
compilers:

C programs:   mpicc your-code.c
C++ programs: mpiCC your-code.cc    or
              mpic++ your-code.cc   (for case-insensitive filesystems) 
```

这是来自安装文件。事情是 bash 抱怨当我输入“mpicc”时找不到 mpicc 命令。

OpenMPI 是我尝试编译的其他程序的依赖项，它们通过使用“mpicc”命令调用 OpenMPI。

在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:50:39.540

您的文件夹`A`需要位于您的`PATH`环境变量中。在 bash 中，你会这样做：

```
export PATH=/path/to/my/folder/A/bin:$PATH 
```

这将使您只需键入`mpicc`. 或者，您可以使用完整路径作为命令：

```
/path/to/my/folder/A/bin/mpicc myFile.c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:52:36.820

如果您没有对默认前缀文件树的写入权限，`/usr/local/`您应该`./configure`使用明确的可写前缀，例如

```
./configure --prefix=$HOME/pub 
```

当然，您可以`mkdir $HOME/pub`添加`$HOME/pub/bin`到您的`PATH`

# html - 为div中的元素添加悬停动作

> ID：13909437
> 
> 赞同：0
> 
> 时间：2012-12-17T06:38:26.340
> 
> 标签：html, hover

我正在 WordPress 上制作自定义菜单并添加了 div 样式以将文本转换为可点击的图像。

```
<div style="
    background-image: url('http://www.luchaquest.net/home/wp-content/uploads/2012/12/first.png');
    background-repeat: no-repeat;
    display: center;
    margin: 0;
    padding: 0 0 0 20px;
    width: 195px;
    height: 70px;
"></div> 
```

到目前为止一切正常，但我希望它也有一个悬停动作（应该可以通过一条线来完成`background-position: 0 -195px`）我根本不熟悉这种编程风格。

如何在同一元素中将悬停信息添加到此代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:54:11.690

使用鼠标悬停功能

```
<div id="divID" onmouseover="javascript:UpdateBackground();" style="
background-image: url('http://www.luchaquest.net/home/wp-content/uploads/2012/12/first.png');
background-repeat: no-repeat;
display: center;
margin: 0;
padding: 0 0 0 20px;
width: 195px;
height: 70px;
"></div>

<script type="text/javascript">
    function UpdateBackground(){
    alert('before update');
document.getElementById("divID").style.backgroundPosition="center bottom";
    alert('after update');
    }
</script>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T05:45:09.767

```
<head>
<link type="css/text" rel="stylesheet" href="Name.css">
</head>
<body>
<div id="divname" style="
background-image: url('http://www.luchaquest.net/home/wp-content/uploads/2012/12/first.png');
background-repeat: no-repeat;
display: center;
margin: 0;
padding: 0 0 0 20px;
width: 195px;
height: 70px;
"></div>
</body> 
```

现在，转到您的 .css 文件并添加：

```
#divname:hover {
background-position:0 -195px;
} 
```

祝你好运

# android - 如何处理 ListView 中的切换点击？

> ID：13909438
> 
> 赞同：0
> 
> 时间：2012-12-17T06:38:31.080
> 
> 标签：android, android-layout, android-intent

我有一个从 BaseAdapter 获取数据的 ListView。我在列表视图中有一个切换按钮，可以切换显示/隐藏字段。
当我单击列表视图中某一行的切换按钮时，我只想更新该特定行。
这是我正在尝试的代码。
请帮我。任何帮助，将不胜感激。

公共类 BankListAdapter 扩展 BaseAdapter {

```
private BankClass context;
private ArrayList<BankDetail> bank;
private LayoutInflater l_inflator;
private ViewHolder holder;

public BankListAdapter(BankClass context, ArrayList<BankDetail> bank) {
    this.context = context;
    this.bank = bank;
    l_inflator = LayoutInflater.from(context);
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return bank.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return bank.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Log.d("Method", "In getView");
    if (convertView == null) {
        convertView = l_inflator
                .inflate(R.layout.layout_banklistview, null);
        holder = new ViewHolder();
        holder.bank_name = (TextView) convertView
                .findViewById(R.id.TV_bankNameLabelValue);
        holder.branch_name = (TextView) convertView
                .findViewById(R.id.TV_branchNameLabelValue);
        holder.atm_pin = (TextView) convertView
                .findViewById(R.id.TV_atmPinLabelValue);
        holder.acc_no = (TextView) convertView
                .findViewById(R.id.TV_accNoLabelValue);
        holder.card_no = (TextView) convertView
                .findViewById(R.id.TV_atmCardNoLabelValue);
        holder.tgl_atm_pin = (ToggleButton) convertView
                .findViewById(R.id.Tgl_atmPin);
        convertView.setTag(holder);

        holder.tgl_atm_pin.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                BankDetail bd = bank.get((Integer) v.getTag());
                String tempPin = bd.getAtmPin();

                Log.d("Checked", bd.getAtmPin());
                // TODO Auto-generated method stub
                if (holder.tgl_atm_pin.isChecked()) {

                    // holder.atm_pin.setText(bd.getAtmPin());

                    // holder.atm_pin.setTransformationMethod(PasswordTransformationMethod);
                    holder.atm_pin.setInputType(InputType.TYPE_CLASS_TEXT
                            | InputType.TYPE_TEXT_VARIATION_PASSWORD);
                } else {
                    // holder.atm_pin.setText(tempPin);
                    holder.atm_pin.setInputType(InputType.TYPE_CLASS_TEXT);
                    notifyData();
                }
            }
        });

    }

    else {
        holder = (ViewHolder) convertView.getTag();
    }
    // TODO Auto-generated method stub

    holder.bank_name.setText(bank.get(position).getBankName());
    holder.branch_name.setText(bank.get(position).getBranchName());
    holder.atm_pin.setText(bank.get(position).getAtmPin());
    if (holder.tgl_atm_pin.isChecked()) {

        holder.atm_pin.setInputType(InputType.TYPE_CLASS_TEXT
                | InputType.TYPE_TEXT_VARIATION_PASSWORD);
    } else {
        holder.atm_pin.setInputType(InputType.TYPE_CLASS_TEXT);
    }
    holder.acc_no.setText(bank.get(position).getAccNo());
    holder.card_no.setText(bank.get(position).getAtmCardNo());
    holder.tgl_atm_pin.setTag(position);
    // Log.d("Position", "'"+position+"'");

    // holder.tgl_atm_pin
    // .setOnCheckedChangeListener(new
    // CompoundButton.OnCheckedChangeListener() {
    //
    // @Override
    // public void onCheckedChanged(CompoundButton buttonView,
    // boolean isChecked) {
    // // TODO Auto-generated method stub
    // if (isChecked) {
    // holder.atm_pin
    // .setInputType(InputType.TYPE_CLASS_TEXT
    // | InputType.TYPE_TEXT_VARIATION_PASSWORD);
    //
    //
    // } else {
    // holder.atm_pin
    // .setInputType(InputType.TYPE_CLASS_TEXT);
    //
    // }
    //
    // }
    // });

    return convertView;
}

protected void notifyData() {
    context.setBankDetails();
    context.adapter = new BankListAdapter(context, context.bank_info);
    context.adapter.notifyDataSetChanged();
    context.list.setAdapter(context.adapter);
}

static class ViewHolder {
    TextView bank_name;
    TextView branch_name;
    TextView atm_pin;
    TextView acc_no;
    TextView card_no;
    ToggleButton tgl_atm_pin;
} 
```

}

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:55:57.447

您可以使用两个 approcase，1）使用新的 OnItemClickListener 并在其上绑定所有列表..（在您的情况下不建议这样做，更改应该在适配器内），2）因为您已经注册了一个点击列表器holder.tgl_atm_pin.setOnClickListener，你必须有其他占位符（任何类型的视图），这将是另一个 onclick-hook 监听器。

# javascript - onchange 后不会触发 onclick 事件

> ID：13909450
> 
> 赞同：4
> 
> 时间：2012-12-17T06:39:37.053
> 
> 标签：javascript, html, dom

重新创建此问题的步骤：

1.  在文本框中输入一些内容
2.  键入后立即单击按钮。
3.  我发现只有 onchange 事件被触发了。

代码：

```
<div>
    <input type="text" onchange="console.log('onchange');$('#message').css('display','none');" >
    <div id="message">
        Validating
    </div>
    <br>
    <input type="button" onclick="console.log('onclick');" value="click me">
</div> 
```

[**演示**](http://jsfiddle.net/zQLFt/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:46:11.907

这是因为您正在更改更改按钮位置的布局，并且未调用按钮 mouseup 事件。见演示：

**[JS斌](http://jsbin.com/uhovag/1/)**

如果你想隐藏 div，通过保留它占用的空间，使用：

```
$('#message').css('visibility','hidden'); 
```

**[隐藏可见性的新演示](http://jsbin.com/uhovag/4/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:01:44.500

由于您的按钮位置变化，它不会调用`onclick`它，因此有必要发生`mouse-down`和事件`mouse-up``onclick`

这是完整事件的[演示](http://jsfiddle.net/zaheerahmed/zQLFt/4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:54:51.590

您正在寻找 keydown/press/up ...

当用户按下一个键（在键盘上）时，会发生 onkeydown 事件......

```
<div>
    <input type="text" onkeydown="console.log('onchange');$('#message').css('display','none');" >
    <div id="message">
        Validating
    </div>
    <br>
    <input type="button" onclick="console.log('onclick');" value="click me">
</div>​ 
```

这是小提琴

[http://jsfiddle.net/zQLFt/1/](http://jsfiddle.net/zQLFt/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T06:58:09.583

点击事件是两个事件 mousedown 和 mouseup 的组合。您可以改用 mousedown。

```
<div>
    <input type="text" onchange="console.log('onchange');$('#message').css('display','none');" >
    <div id="message">
        Validating
    </div>
    <br>
    <input type="button" onmousedown="console.log('onclick');" value="click me">
</div> 
```

# apache - 在目录内的 .htaccess 中重写 url 规则

> ID：13909454
> 
> 赞同：0
> 
> 时间：2012-12-17T06:40:01.190
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试使用 .htaccess 文件来使用重写 url 规则。这似乎在我的主 .htaccess 文件中工作正常（仅适用于存在于同一目录中的 php 页面），但是当我想在子目录中为 php 文件使用另一个 .htaccess 时，规则根本不适用，我得到了404 错误页面。

我要指向的文件是/news/story.php。story.php 请求一个名为“article”的整数变量来从数据库中获取文章并显示它。所以基本上我想做的是用[http://www.mydomain.com/news/story/article/1/](http://www.mydomain.com/news/story.php?article=1) 替换[http://www.mydomain.com/news/story.php?article=1](http://www.mydomain.com/news/story/article/1/)

我在“新闻”目录内的 .htaccess 文件中使用以下规则。

```
# For security reasons, Option followsymlinks cannot be overridden.
#Options +FollowSymLinks
Options +SymLinksIfOwnerMatch
RewriteEngine on
RewriteRule story/article/(.*)/ story.php?article=$1
RewriteRule story/article/(.*) story.php?article=$1 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:30:45.340

```
RewriteRule story/article/(.*)/ news/story.php?article=$1
RewriteRule story/article/(.*) news/story.php?article=$1 
```

# java - 将java代码从一个类插入到另一个类

> ID：13909457
> 
> 赞同：1
> 
> 时间：2012-12-17T06:40:11.537
> 
> 标签：java, swing, debugging, jtable, jprogressbar

所以我有一个有趣的问题。我有一个应用程序，我想在表格的每个单元格中都有进度条。为了安全起见，我编写了一个独立的应用程序，它可以满足我的需求，但现在我在将它整合到我预先存在的代码中时遇到了问题。我迷失了每个文件所需的内容。我发布了应用程序表和进度条表代码。我需要得到这两个网格或者简单地把它放在应用程序表中我需要进度条。任何帮助表示赞赏。

申请表

```
package gui;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter; 
import java.awt.event.MouseEvent;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.security.AlgorithmParameters;
import java.security.spec.KeySpec;
import javax.crypto.Cipher; 
import javax.crypto.CipherInputStream; 
import javax.crypto.CipherOutputStream; 
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class FileTable extends JPanel {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private JTable table;
    private DefaultTableModel tableModel = 
            new DefaultTableModel(new String[]  
                        {"File",      "Size", "Status" }, 0);
    private File dir;
    private File temp;
    private JPopupMenu popup;
    private String key;
    private PasswordStorage passwordStorage;
    private JFileChooser fileChooser;
    private static String salt = "loquetdeliciouslysalty";
    private static byte[] IV;

    public FileTable() {

        // Set Layout Manager
        setLayout(new BorderLayout());

        // Create Swing Components
        table = new JTable();
        table.setModel(tableModel);
        table.setDropTarget(new TableDnD(table));
        table.setShowGrid(false);
        table.setFillsViewportHeight(true);
        table.getColumnModel().getColumn(0).setPreferredWidth(250);

        passwordStorage = new PasswordStorage();
        fileChooser = new JFileChooser();
        popup = new JPopupMenu();

        JMenuItem removeItem = new JMenuItem("Remove");
        removeItem.setIcon(new ImageIcon("removeMenu.png"));
        popup.add(removeItem);

        // Add Components to pane
        add(new JScrollPane(table), BorderLayout.CENTER);

        table.addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                int row = table.rowAtPoint(e.getPoint());
                table.getSelectionModel().setSelectionInterval(row, row);

                if(e.getButton() == MouseEvent.BUTTON3) {
                    popup.show(table, e.getX(), e.getY());
                }
            }
        });

        removeItem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                int row = table.getSelectedRow();
                if(row > -1) {
                    tableModel.removeRow(table.getSelectedRow());
                }
            }
           });
       }

    public boolean isTableEmpty() {

        if(tableModel.getRowCount() == 0) {
            return true;
        }
        else {
            return false;
        }
    }

    public void addFile(File file) {
         tableModel.addRow(
            new Object[]{file, file.length() + " kb",Not Processed"});
    }

    public void removeFile() {
        int[] rows = table.getSelectedRows();

        for(int i = 0; i < rows.length; i++) {
            tableModel.removeRow(rows[i]-i);
        }
    }

    public void clearTable()
    {
        int rowCount = tableModel.getRowCount();

        for(int i = 0; i < rowCount; i++) {
            tableModel.removeRow(0);
        }

        table.removeAll();
    }
} 
```

进度条表

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.EventQueue;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.swing.JFrame;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;

public class UpdateTable 
{           
    public static void main(String[] args) 
    {
        new UpdateTable();
    }

    public UpdateTable() 
    {
        EventQueue.invokeLater(new Runnable() 
        {
            @Override
            public void run() 
            {
                try 
                {                                  
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | 
                        InstantiationException | IllegalAccessException |    
                                UnsupportedLookAndFeelException ex) {
                }

                UpdatableTableModel model = new UpdatableTableModel();
                JTable table = new JTable();
                table.setModel(model);

                table.getColumn("Status").setCellRenderer(new ProgressCellRender());
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                FileFinderWorker worker = new FileFinderWorker(model);
                worker.execute();

            }
        });
    }

    public class ProgressCellRender extends JProgressBar implements TableCellRenderer 
    {       
        @Override
        public Component getTableCellRendererComponent(JTable
            table, Object value, boolean isSelected, boolean hasFocus, int row, int column) 
        {
            int progress = 0;
            if (value instanceof Float) 
            {
                progress = Math.round(((Float) value) * 100f);
            } else if (value instanceof Integer) 
            {
                progress = (int) value;
            }
            setValue(progress);
            return this;
        }
    }

    public class RowData
    {       
        private File file;
        private String type;
        private long length;
        private float status;

        public RowData(File file, String type) 
        {
            this.file = file;
            this.type = type;
            this.length = file.length();
            this.status = 0f;
        }

        public File getFile() 
        {
            return file;
        }   

        public long getLength() 
        {
            return length;
        }

        public float getStatus() 
        {
            return status;
        }

        public String getType() 
        {
            return type;
        }

        public void setStatus(float status) 
        {
            this.status = status;
        }
    }

    public class UpdatableTableModel extends AbstractTableModel 
    {
        private List<RowData> rows;
        private Map<File, RowData> mapLookup;

        public UpdatableTableModel() 
        {
            rows = new ArrayList<>(25);
            mapLookup = new HashMap<>(25);
        }

        @Override
        public int getRowCount() 
        {
            return rows.size();
        }

        @Override
        public int getColumnCount() 
        {
            return 4;
        }

        @Override
        public String getColumnName(int column) 
        {
            String name = "??";
            switch (column) {
                case 0:
                    name = "File";
                    break;
                case 1:
                    name = "File Type";
                    break;
                case 2:
                    name = "Size";
                    break;
                case 3:
                    name = "Status";
                    break;
            }
            return name;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) 
        {
            RowData rowData = rows.get(rowIndex);
            Object value = null;
            switch (columnIndex) 
            {
                case 0:
                    value = rowData.getFile();
                    break;
                case 1:
                    value = rowData.getType();
                    break;
                case 2:
                    value = rowData.getLength();
                    break;
                case 3:
                    value = rowData.getStatus();
                    break;
            }
            return value;
        }

        @Override//new value  //row to change  //column to change
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) 
        {
            RowData rowData = rows.get(rowIndex);
            switch (columnIndex)
            {
                case 3:
                    if (aValue instanceof Float) 
                    {
                        rowData.setStatus((float) aValue);
                    }
                    break;
            }
        }

        public void addFile(File file) 
        {
            RowData rowData = new RowData(file, "A File");
            mapLookup.put(file, rowData);
            rows.add(rowData);
            fireTableRowsInserted(rows.size() - 1, rows.size() - 1);
        }

        protected void updateStatus(File file, int progress) 
        {
            RowData rowData = mapLookup.get(file);
            if (rowData != null) {
                int row = rows.indexOf(rowData);
                float p = (float) progress / 100f;
                setValueAt(p, row, 3);
                fireTableCellUpdated(row, 3);
            }
        }
    }

    public class FileFinderWorker extends SwingWorker<List<File>, File> 
    {
        private UpdatableTableModel model;

        public FileFinderWorker(UpdatableTableModel model) 
        {
            this.model = model;
        }

        @Override
        protected void process(List<File> chunks) //data chunks 
        {
            for (File file : chunks) 
            {
                model.addFile(file);
            }
        }

        @Override
        protected List<File> doInBackground() throws Exception
        {
            String usrHome = "user.home";   // takes the entire home dir
                                                                // user.dir will use working directory
                                                                // (wherever you save your Java shit)
            File files[] = new 
                File(System.getProperty(usrHome)).listFiles();//grabbing all files from directory.
            List<File> lstFiles = new ArrayList<>(Arrays.asList(files));
            for (File file : lstFiles) 
            {
                publish(file);
            }
            return lstFiles;
        }

        @Override
        protected void done() 
        {
            try {
                List<File> files = get();
                for (File file : files) 
                {
                    new FileReaderWorker(model, file).execute();
                }
            } catch (Exception exp) {
                exp.printStackTrace();
            }
        }
    }

    public class FileReaderWorker extends SwingWorker<File, File> 
    {
        private File currentFile;
        private UpdatableTableModel model;

        public FileReaderWorker(UpdatableTableModel model, File file) 
        {
            this.currentFile = file;
            this.model = model;

            addPropertyChangeListener(new PropertyChangeListener() 
            {
                @Override
                public void propertyChange(PropertyChangeEvent evt) 
                {
                    if (evt.getPropertyName().equals("progress")) 
                    {
                        FileReaderWorker.this.model.updateStatus(currentFile, (int) evt.getNewValue());
                    }
                }
            });
        }

        @Override
        protected File doInBackground() throws Exception
        {
            if (currentFile.isFile()) 
            {
                setProgress(0);
                long fileLength = currentFile.length();
                BufferedReader reader = null;
                char[] cbuf = new char[1024];//change this if everything loads too fast
                try {                       

                    reader = new BufferedReader(new FileReader(currentFile));
                    int bytesRead = -1;
                    int totalBytesRead = 0;
                    while ((bytesRead = reader.read(cbuf)) != -1) {
                        totalBytesRead += bytesRead;
                        int progress = (int) Math.round(((double) totalBytesRead / (double) fileLength) *
                                    100d);
                        setProgress(progress);
                        Thread.sleep(25);
                    }
                    setProgress(100);
                } catch (Exception e) {
                    e.printStackTrace();
                    setProgress(100);
                } finally {
                    try {
                        reader.close();
                    } catch (Exception e) {
                    }
                }
            } else {
                setProgress(100);
            }
            return currentFile;
        }
    }
} 
```

进度条需要进入应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:53:16.997

您应该研究 AOP [aspectJ](http://www.eclipse.org/aspectj/)。

使用它你可以完成任务

# c++ - ::std::has_nothrow_default_constructor 是否已移动/更改？

> ID：13909461
> 
> 赞同：3
> 
> 时间：2012-12-17T06:40:31.153
> 
> 标签：c++, boost, c++11, std

在尝试使用 gcc 4.7.2[构建 boost 镜像](http://kifri.fri.uniza.sk/~chochlik/mirror-lib/html/#download)时，我遇到了这个错误，但奇怪的是，我看到[了这个文档](http://gcc.gnu.org/onlinedocs/gcc-4.6.2/libstdc++/api/a00501.html)。

*已`::std::has_nothrow_default_constructor`被移动/更改？*

```
In file included from /home/kfeng/src/mirror-lib/include/mirror/type_traits.hpp:20:0,
                 from /home/kfeng/src/mirror-lib/include/mirror/mirror_base.hpp:38,
                 from /home/kfeng/src/mirror-lib/include/mirror/mirror.hpp:16,
                 from /home/kfeng/src/mirror-lib/src/mirror/example/all_member_variables.cpp:10:
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_default_constructible.hpp:31:2: error: ‘has_nothrow_default_constructor’ is not a member of ‘std’
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_default_constructible.hpp:28:9: error: parse error in template argument list
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_default_constructible.hpp:31:43: error: expected ‘{’ before ‘::’ token
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_default_constructible.hpp:31:51: error: expected initializer before ‘||’ token
In file included from /home/kfeng/src/mirror-lib/include/mirror/type_traits.hpp:21:0,
                 from /home/kfeng/src/mirror-lib/include/mirror/mirror_base.hpp:38,
                 from /home/kfeng/src/mirror-lib/include/mirror/mirror.hpp:16,
                 from /home/kfeng/src/mirror-lib/src/mirror/example/all_member_variables.cpp:10:
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_copy_constructible.hpp:31:2: error: ‘has_nothrow_copy_constructor’ is not a member of ‘std’
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_copy_constructible.hpp:28:9: error: parse error in template argument list
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_copy_constructible.hpp:31:40: error: expected ‘{’ before ‘::’ token
/home/kfeng/src/mirror-lib/include/mirror/type_traits/is_copy_constructible.hpp:31:48: error: expected initializer before ‘||’ token
make[2]: *** [src/mirror/example/CMakeFiles/mirror-all_member_variables.dir/all_member_variables.cpp.o] Error 1
make[1]: *** [src/mirror/example/CMakeFiles/mirror-all_member_variables.dir/all] Error 2
make: *** [all] Error 2 
```

**ANSWER 使用 Pubby 下面的注释**

像这样的东西应该适用于 gcc 4.7.2 - 我将提交一个补丁，让维护者决定如何最好地处理它。

```
template <typename T>
 struct is_default_constructible
  : std::integral_constant<
        bool,
        ::std::has_trivial_default_constructor<T>::value ||
#if __cplusplus>=201103L 
        ::std::is_nothrow_default_constructible<T>::value ||
#else
        ::std::has_nothrow_default_constructor<T>::value ||
#endif
        mirror::_class::_<T>::has_default_ctr::value>
 { }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T06:49:32.533

在 C++11 中，它被更改为`std::is_nothrow_default_constructible`与命名更加一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:46:55.133

您正在查看 GCC 4.6.2 的文档，但使用的是 GCC 4.7.2，因此它们不匹配也就不足为奇了。

特征被[n3142重命名](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3142.html)

请参阅我以前的答案[https://stackoverflow.com/a/12716778/981959](https://stackoverflow.com/a/12716778/981959)，了解一些尝试检测编译器支持的代码，尽管有评论说它不适用于 libc++。

# python - 在python中格式化字符串内的整数和浮点数

> ID：13909465
> 
> 赞同：3
> 
> 时间：2012-12-17T06:41:06.427
> 
> 标签：python, string

我试图弄清楚如何打印格式化字符串四舍五入到有效数字。说我有：

```
x = 8829834.123 
```

我想将它四舍五入打印为整数。我试过了：

```
print "%4d"%x 
```

我只是得到：

```
8829834 
```

为什么不显示：

```
8829000? 
```

我认为这就是字符串格式化的工作方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:32:35.167

四舍五入到 4 位有效数字：

```
f = float("%.4g" % 8829834.123) 
```

要将其打印为整数：

```
print "%.0f" % f
# -> 8830000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:19:42.597

格式说明符不支持整数舍入，可能有一些解决方案但不是开箱即用的，这里有几个

```
>>> print "{:d}000".format(int(x/1000))
8829000
>>> print "{:d}".format(int(round(x,-3)))
8830000 
```

# eclipse - 下载后Eclipse不工作

> ID：13909468
> 
> 赞同：0
> 
> 时间：2012-12-17T06:41:10.407
> 
> 标签：eclipse, download, log-files

我从这个站点下载了 Eclipse：http: [//www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)（Eclipse 经典 4.2.1）

我提取了zip文件夹并运行了exe文件-> eclipse（带有eclipse圆圈的符号）

我收到此错误消息：发生错误。看看日志文件...

看到日志文件很长，看不懂，没发现问题。

谁能帮我？

我认为日志文件中写入的错误：

```
java.lang.RuntimeException: Application "org.eclipse.ui.ide.workbench" could not be found in the registry. The applications available are: org.eclipse.ant.core.antRunner, org.eclipse.equinox.app.error, org.eclipse.equinox.p2.director, org.eclipse.equinox.p2.garbagecollector.application, org.eclipse.pde.junit.runtime.uitestapplication, org.eclipse.pde.junit.runtime.legacytestapplication, org.eclipse.pde.junit.runtime.coretestapplication, org.eclipse.pde.junit.runtime.coretestapplicationnonmain, org.eclipse.pde.junit.runtime.nonuithreadtestapplication.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:48:26.997

您可以尝试以管理员身份启动它。或从 DOS 提示符尝试。

或在您的主目录中创建工作区文件夹。

或者

最后读取日志文件。

# ruby - 使用了错误的 Ruby 解释器

> ID：13909469
> 
> 赞同：0
> 
> 时间：2012-12-17T06:41:13.047
> 
> 标签：ruby, rvm, eventmachine

我正在尝试设置 Apache/Thin 来支持我的 Rails 3.2.9 应用程序，这意味着将 Apache 和 Thin 设置为守护进程。我正在使用运行 Ruby 1.9.3-p286 的 RVM/gemset，但是，我的守护进程似乎不想使用它，而是选择了一些安装了 Ruby 1.8.7 的非 RVM 系统。

当我开始瘦身时，这是我收到的错误：

```
ubuntu@ip-1-1-1-1:~/www/mydomain/mysite$ /etc/init.d/thin start
/usr/local/rvm/gems/ruby-1.9.3-p286@mysite/gems/eventmachine-1.0.0/lib/rubyeventmachine.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

Aborted (core dumped) 
```

同样，使用相同的命令与`sudo`yield：

```
ubuntu@ip-1-1-1-1:~$ sudo /etc/init.d/thin start
[start] /etc/thin/mysite.yml ...
Starting server on 127.0.0.1:5000 ... 

# However, it refuses connections and crashes, evidenced by:
ubuntu@ip-1-1-1-1:~/www/mydomain/mysite/log$ cat thin.5000.log
>> Writing PID to tmp/pids/thin.5000.pid
>> Using rack adapter
>> Exiting!
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- bundler/setup  (LoadError)
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
... 
```

我认为分段错误是由于 Ruby 版本错误造成的。显然，它使用的是 1.8.7，这不是我想要的 Ruby。但是，检查 ruby​​ 版本似乎还不错：

```
ubuntu@ip-1-1-1-1:~$ which ruby
/usr/local/rvm/rubies/ruby-1.9.3-p286/bin/ruby
ubuntu@ip-1-1-1-1:~$ ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux] 
```

在这里它再次运行`sudo`：

```
ubuntu@ip-1-1-1-1:~$ sudo which ruby
/usr/bin/ruby
ubuntu@ip-1-1-1-1:~$ sudo ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux] 
```

当我将 Thin 作为守护程序运行时，如何让我的系统使用 Ruby 1.9.3，并避免这些讨厌的错误？

**编辑：**

这是我的 /etc/init.d/thin 文件的样子（我相信它是使用瘦安装自动生成的）：

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          thin
# Required-Start:    $local_fs $remote_fs
# Required-Stop:     $local_fs $remote_fs
# Default-Start:     2 3 4 5
# Default-Stop:      S 0 1 6
# Short-Description: thin initscript
# Description:       thin
### END INIT INFO

# Original author: Forrest Robertson

# Do NOT "set -e"

DAEMON=/usr/local/bin/thin
SCRIPT_NAME=/etc/init.d/thin
CONFIG_PATH=/etc/thin

# Exit if the package is not installed
[ -x "$DAEMON" ] || exit 0

case "$1" in
  start)
        $DAEMON start --all $CONFIG_PATH
        ;;
  stop)
        $DAEMON stop --all $CONFIG_PATH
        ;;
  restart)
        $DAEMON restart --all $CONFIG_PATH
        ;;
  *)
        echo "Usage: $SCRIPT_NAME {start|stop|restart}" >&2
        exit 3
        ;;
esac 
```

*   戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:45:40.303

想通了（或者至少，我让它以一种方式工作......）

在 RVM 网站上使用[此](https://rvm.io/integration/init-d/)建议...

1.  确保您的服务（在我的情况下`thin`为 ）安装在您的 RVM gemset 之一中。
2.  使用: 生成包装器`rvm wrapper ruby-1.9.3@mygemset bootup thin`，根据您的安装替换参数。它将制作一个脚本`/usr/local/rvm/bin/bootup_thin`。此包装器将使用您在调用中指定的 gemset 加载。
3.  编辑`/etc/init.d/thin`脚本。`DAEMON=/usr/local/bin/thin`通过设置为使脚本调用生成的 Ruby 包装器`DAEMON=/usr/local/rvm/bin/bootup_thin`
4.  运行你的守护进程；它现在应该使用正确的 Ruby 环境。
5.  克服这个障碍后，我立即遇到了一个不相关的“问题”，这与我的应用程序所需的宝石缺失有关。我认为这与我的应用程序文件夹和守护程序之间使用的不同 gemset 有关。你可能不得不做我做的事；导航到应用程序根目录，使用 显式更改为守护程序使用的 gemset `rvm gemset use`，然后运行`bundle install`以将必要的 gem 安装到守护程序使用的 gemset 中。

有了这个，我让我的服务器运行 Apache/Thin。对于那些希望这样做的人，请使用这些页面。

第一个： http: [//articles.slicehost.com/2008/5/6/ubuntu-hardy-thin-web-server-for-ruby](http://articles.slicehost.com/2008/5/6/ubuntu-hardy-thin-web-server-for-ruby)

第二：[http ://articles.slicehost.com/2008/5/6/ubuntu-hardy-apache-rails-and-thin](http://articles.slicehost.com/2008/5/6/ubuntu-hardy-apache-rails-and-thin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:55:51.323

您可以编辑 /etc/init.d/thin 并更改此部分：

```
run_action() {
        ACTION="$1"

        if [ -x /usr/bin/ruby1.8 ]; then
            /usr/bin/ruby1.8 $DAEMON $ACTION --all /etc/thin1.8
        fi

        if [ -x /usr/bin/ruby1.9.1 ]; then
            /usr/bin/ruby1.9.1 $DAEMON $ACTION --all /etc/thin1.9.1
        fi

} 
```

# actionscript-3 - ActionScript 3 事件不起作用

> ID：13909470
> 
> 赞同：1
> 
> 时间：2012-12-17T06:41:14.140
> 
> 标签：actionscript-3

我是 AS 的新手，正在尝试制作我的第一个应用程序。我有一个类，显示管理一些事件，比如键盘按键：

```
public class GameObjectController extends Sprite
{
    var textField:TextField;

    public function GameObjectController()
    {
        addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
    }

    private function onKeyDown(event: KeyboardEvent):void
    {
        trace("123");
    }
} 
```

但是当我运行它并按下任何按钮时，什么都没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:46:13.207

尝试s `stage.addEventListener()`。`KeyboardEvent`

这样做的原因是，无论您将事件添加到什么地方，都需要关注，并且`stage`总是有焦点。

如果`GameObjectController`不是文档类，则需要`stage`解析到其构造函数才能使其工作，或者需要先将其添加到阶段。前者实施起来不会那么混乱。

```
public function GameObjectController(stage:Stage)
{
    stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:49:54.713

将键盘事件添加到舞台并导入 KeyboardEvent 类。

```
package
{
    import flash.display.Sprite;
    import flash.events.KeyboardEvent;

    public class GameObjectController extends Sprite
    {
        public function GameObjectController()
        {
            stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownEventHandler);
        }

        private function keyDownEventHandler(event:KeyboardEvent):void
        {
            trace(event);
        }
    }
} 
```

# windows - 如何将自定义窗口注入 Windows 资源管理器

> ID：13909471
> 
> 赞同：3
> 
> 时间：2012-12-17T06:41:15.540
> 
> 标签：windows, hook, explorer

RT.如下图。 ![自定义窗口注入资源管理器](../Images/5863ced441982a2e5c1a25fd1c652e07.png)

我尝试了以下几种方法，但不起作用：

1.  Explorer Bars, Tool Bands, and Desk Bands，看[这里](http://msdn.microsoft.com/en-us/library/cc144099(VS.85).aspx)
2.  命名空间扩展，见[这里](http://www.codeproject.com/Articles/7973/An-almost-complete-Namespace-Extension-Sample)
3.  实现一个文件夹视图，看[这里](http://msdn.microsoft.com/en-us/library/cc144092(v=vs.85).aspx)

我已经解决了这个问题，只需调整文件夹视图窗口的大小并创建一个新的自定义窗口并将其移动到正确的位置，如下所示，此代码将在文件夹视图窗口顶部显示自定义窗口：

```
HWND phwnd = (HWND)explorer SHELLDLL_DefView handle;
HWND chwnd = (HWND)explorer DirectUIHWND handle;
RECT *rcClient = new RECT(); 
GetClientRect(phwnd, rcClient);
MoveWindow(chwnd, rcClient->left, rcClient->top+39, rcClient->right, rcClient->bottom-39, TRUE);
HWND haddwnd = ::CreateDialogParam(hInst,
                MAKEINTRESOURCE(IDD_DIALOG1),
                phwnd,
                (DLGPROC)About,
                (LPARAM)rcClient);
ShowWindow(haddwnd, SW_SHOWNOACTIVATE);
MoveWindow(haddwnd, 0, 0, rcClient->right, 39, TRUE);
<pre> 
```

# c# - HTML 自动完成 - 每次鼠标悬停时都会在底部添加空格

> ID：13909478
> 
> 赞同：0
> 
> 时间：2012-12-17T06:42:07.350
> 
> 标签：c#, html, asp.net-mvc, autocomplete

我正在使用`HTML autocomplete`控制。当我的应用程序在 IE 上运行时，我注意到一件奇怪的事情。每次我将鼠标悬停在自动完成上时，都会在其下方添加空格。下面是参考图片。

![在此处输入图像描述](../Images/0295ed322bb6b35259542545e47efb5c.png)

以下是自动完成的代码：

```
<span class="searchFormControl">
<%= Html.AutoCompleteFor(model => model.ContactEmail, controller: "ContactEmailAutocomplete", parentId: "ContactId", htmlAttributes: new { @onkeypress = "return allowAlphaNumericAndApostrophe(event);", @onpaste = "return false" })%>
</span> 
```

Google Chrome 不会出现此问题。

# php - PHP解析器抓取数据错误

> ID：13909488
> 
> 赞同：0
> 
> 时间：2012-12-17T06:43:23.973
> 
> 标签：php, javascript, html, web-crawler

我正在尝试编写一个 php 解析器来从 ratemyprofessor.com 收集教授评论。每个教授都有一个页面，其中包含所有评论，我想解析每个教授的网站并将评论提取到 txt 文件中。这是我到目前为止所拥有的，但是当我运行它时它没有正确执行，因为输出 txt 文件仍然是空的。可能是什么问题？

```
<?php     
set_time_limit(0);

$domain = "http://www.ratemyprofessors.com";
$content = "div id=commentsection";
$content_tag = "comment";
$output_file = "reviews.txt";
$max_urls_to_check = 400;
$rounds = 0;
$reviews_stack = array();
$max_size_domain_stack = 10000;
$checked_domains = array();

while ($domain != "" && $rounds < $max_urls_to_check) {
    $doc = new DOMDocument();
    @$doc->loadHTMLFile($domain);
    $found = false;

    foreach($doc->getElementsByTagName($content_tag) as $tag) {
        if (strpos($tag->nodeValue, $content)) {
            $found = true;
            break;
        }
    }

    $checked_domains[$domain] = $found;
    foreach($doc->getElementsByTagName('a') as $link) {
        $href = $link->getAttribute('href');
        if (strpos($href, 'http://') !== false && strpos($href, $domain) === false) {
            $href_array = explode("/", $href);

            if (count($domain_stack) < $max_size_domain_stack &&
                $checked_domains["http://".$href_array[2]] === null) {
                array_push($domain_stack, "http://".$href_array[2]);
            }
        };
    }

    $domain_stack = array_unique($domain_stack);
    $domain = $domain_stack[0];
    unset($domain_stack[0]);
    $domain_stack = array_values($domain_stack);
    $rounds++;
}

$found_domains = "";
foreach ($checked_domains as $key => $value) {
    if ($value) {
        $found_domains .= $key."\n";
    }
}

file_put_contents($output_file, $found_domains); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:55:24.043

> 这是我到目前为止所拥有的，但是当我运行它时它没有正确执行，因为输出 txt 文件仍然是空的。可能是什么问题？

由于缺少数组变量初始化，它给出了空输出。

1.  主要部分。添加变量的初始化：

    ```
    $domain_stack = array(); // before while ($domain != ...... ) 
    ```

2.  额外的。修复其他警告和通知：

    ```
    // change this
    $checked_domains["http://".$href_array[2]] === null

    // into

    !isset($checked_domains["http://".$href_array[2]])

    // another line
    // check if key exists
    if (isset($domain_stack[0]))  {
      $domain = $domain_stack[0];
      unset($domain_stack[0]);
    } 
    ```

# git - git远程分支列表

> ID：13909496
> 
> 赞同：1
> 
> 时间：2012-12-17T06:44:24.410
> 
> 标签：git

有什么方法可以使用 GIT cli 来确定远程存储库中有多少个 git 分支？

很高兴看到有人在不知不觉中将我不想要的分支推送到远程存储库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:46:20.470

`git branch -r`将列出所有已配置遥控器上的所有分支。您可能想`git fetch --all`先确保它是最新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:09:20.893

您可以使用`git ls-remote <url/to/remote/repo.git>`git 列出远程存储库中存在的所有引用。

# android - 在列表视图中拉动刷新

> ID：13909497
> 
> 赞同：2
> 
> 时间：2012-12-17T06:44:29.503
> 
> 标签：android, listview

我已经实现了一个列表视图，其中包含来自 url 的解析数据，我为此使用了惰性适配器。现在我希望列表包含拉动刷新属性，但我的问题是我无法找到正确的方法来实现这一点，请帮助

我的列表视图 XML 是：-

```
 <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/upBar" >

        <ListView
            android:id="@+id/latestList"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:cacheColorHint="#00000000"
            android:listSelector="#00000000"
            android:padding="7dp"
            android:scrollbars="none" />
    </RelativeLayout> 
```

我的懒惰适配器是这样的：-

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<String> movieThumbnail;
    private ArrayList<String> movieText;
    private static LayoutInflater inflater=null;
    static File cacheDir;

    ImageLoader imageloader = new ImageLoader(activity);

    public LazyAdapter(Activity a, ArrayList<String> movieThumbnail, ArrayList<String> movieText) {
        activity = a;
        /*data=d;*/
        this.movieThumbnail = movieThumbnail;
        this.movieText = movieText;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    public int getCount() {
        return movieText.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
              vi = inflater.inflate(R.layout.listrow, null);

        TextView text=(TextView)vi.findViewById(R.id.rowListTextView);
        ImageView image=(ImageView)vi.findViewById(R.id.movieImage);
        text.setText(movieText.get(position));
        imageloader.DisplayImage(movieThumbnail.get(position), image);

        return vi;
    }

    public void clear(){
        imageloader.clearCache();
    } 
```

我正在像这样在 AsyncTask 中设置惰性适配器：-

```
@Override protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

            lazyAdapter = new LazyAdapter(context, imgLinks, latestData);
            listView.setAdapter(lazyAdapter);} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:45:59.557

这是一个很好的教程，您可以使用它来执行此操作：

[http://sharedstate.net/archives/pull-to-refresh](http://sharedstate.net/archives/pull-to-refresh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:33:19.623

您可以使用*Pull To Refresh Views for Android*库

[https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

# javascript - “函数定义可能不会出现在语句中”是什么意思

> ID：13909498
> 
> 赞同：1
> 
> 时间：2012-12-17T06:44:43.830
> 
> 标签：javascript

“函数定义可能不会出现在 if 语句、while 循环或任何其他语句中”是什么意思。我对这种说法感到很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:17:27.387

您在书中阅读的一个问题是，在某些浏览器中，函数定义（与函数赋值不同）本质上被提升到宿主函数的顶部，因此将其放在语句中（就像在`if`语句中一样）是彻头彻尾的误导。代码将使它看起来只有在语句的分支执行时才会定义函数`if`，但不一定是这种情况。所以，这是一个不好的做法。它可能在许多情况下都有效，但这是一种不好的做法。

所以，而不是这样：

```
function main(foo) {
    if (foo) {
        function internal() {
            // code here
        }
        // code here
    }
} 
```

把内部函数放在最上面；

```
function main(foo) {
    function internal() {
        // code here
    }
    if (foo) {
        // code here
    }
} 
```

仅供参考，在严格模式下，内部函数定义只允许在顶部。条件函数赋值总是可以用这种语法来完成：

```
var internal;
if (foo) {
    internal = function() {}
} 
```

# cakephp - 使用 DebugKit、Firebug 等在 CakePHP 2 上调试 ajax 调用

> ID：13909500
> 
> 赞同：0
> 
> 时间：2012-12-17T06:44:56.290
> 
> 标签：cakephp, firebug, firephp

我有一个安装了 DebugKit 的 CakePHP 2 应用程序。它工作正常，我在“时间”工具栏中为我加载的每个页面获取内存使用情况和处理时间。

我还希望能够在页面加载后获取 ajax 请求的内存使用情况和处理时间。我知道我可以使用 DebugKit 工具栏中的“历史记录”按钮访问以前的 ajax 请求，但是当我想单击页面、触发 ajax 请求并为它们获取即时调试信息时，这并没有真正的帮助。

因此，我进行了一些搜索，发现我可以在 Firefox 中使用 Firebug + FirePHP 以及我的应用程序中的 FirePHP 和 FireCake 库，并根据每个 ajax 请求获取 DebugKit 的所有统计信息。这听起来很完美，正是我想要做的。

不幸的是，我似乎无法让它工作。我只能在[http://someguyjeremy.com/blog/using-firephp-to-debug-your-cakephp-app找到一个关于此事的教程](http://someguyjeremy.com/blog/using-firephp-to-debug-your-cakephp-app)

我已经完成了教程中提到的所有事情，Cake 完全没有给我任何错误。但是，除非我遗漏了某些东西，否则我看不到在 Firebug 中显示调试信息的位置，如果它确实首先被馈送到 Firebug。

我的配置：

**蛋糕版本：** 2.2.4

**火狐版本：** 17.0.1

**Firebug 版本：**尝试使用 1.11.1 和 1.9.0

**FirePHP 版本：** 0.7.1

**DebugKit 版本：** 2.2.0（最新的主分支）

**更新**

它似乎非常适用于不以 .json 结尾的 Ajax 请求，因此`Router::parseExtensions('json');`我在 routes.php 中没有接收到这些请求。

我取出`Router::parseExtensions('json');`并更改了我的 Ajax 请求以直接执行我的`filter`操作，而不是调用它`filter.json`，Cake 为所有 FireBug 标头提供服务。不幸的是，我不能这样使用它，因为 JQuery 需要内容类型为 application.json。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:48:22.633

看起来这可能是一个记录在案的错误：

[http://cakephp.lighthouseapp.com/projects/42880/tickets/107-firephp-messages-are-not-sent-in-response-if-using-jsonxmlview-with-serialization](http://cakephp.lighthouseapp.com/projects/42880/tickets/107-firephp-messages-are-not-sent-in-response-if-using-jsonxmlview-with-serialization)

我的用例并不完全相同，但输出 json 会阻止 FirePHP 标头出现。如果我关闭 json 的 parse extensions 指令，FirePHP 标头就会出现。

# jquery - 背景层中的div

> ID：13909503
> 
> 赞同：0
> 
> 时间：2012-12-17T06:45:09.323
> 
> 标签：jquery, html, css

我在页面上有 div 作为水印。

```
div {position: fixed;} 
```

但是在被div覆盖的区域，DIV下面的按钮和链接都变成不可点击的了。要单击元素，请滚动并移动 DIV。

我什至尝试过使用`z-index`body 元素和水印 div 的属性。

```
body z-index to 2
watermark z-index to 1 
```

那是行不通的。

我该如何解决这个问题，以便可以单击水印 div 下方的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:57:15.373

这似乎是保护知识产权的一种糟糕方式。即使使用普通的旧镀铬，您也可以直接修改/删除元素。也就是说，我知道有两种方法。

第一个，是非标准的[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)css 属性：

```
pointer-events:none; 
```

这将允许所有点击通过对象。注意：它是*非标准的*。请参阅 MDN 链接底部的兼容性图表。

另一种方法当然是`z-index`。如果您只想要页面上的水印，您可以使用`z-index`，但它不会覆盖应该是交互式的按钮/链接。问题是 z-index 需要另一个属性才能工作：`position`. 如果元素已经具有位置属性，则保持原样。否则，给它`position:relative`以使其停留在文档流中（`absolute`并将`fixed`其从流中取出）。最后，z 索引元素的树级别也很重要。确保水印更靠近根元素。

总之，我认为这是一个坏主意。HTML/CSS 不是为此而设计的，但如果您喜欢冒险，不妨试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T06:56:44.210

z-index 完美地工作 - 但在你的情况下它不会因为这里 div 是身体的孩子。

你可以做的是：

将所有内容放在包装器 div 中，例如：

```
<div class="wrap"> 
```

然后将水印作为兄弟添加到此 div （同一级别）

现在将 z-index 分配给这两个 div [watermark: 1 和 #wrap: 2]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T07:12:03.157

在您的情况下，您提供的`z-index`to body 将不起作用，因为 body 是其中所有其他元素的父级。

所以你可以做的是：

如果您的水印在体内，那么`z-index:1`

和

如果你有`wrapper div`那么它`z-index:2`但是`wrapper div needs "position:relative"`;

我在这里尝试了一些东西：http: **[//jsfiddle.net/VJN8F/](http://jsfiddle.net/VJN8F/)**

使用的css是这样的：

```
p{
  position:relative;
  z-index:2;
 }
div{
  position:fixed;
  bottom:0;
  right:0;
  z-index:1;
  width:200px;
  height:50px;
  border:solid 1px red;
  background:grey;
  opacity:0.5;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T07:03:45.143

尝试在 CSS 中为 z-index 使用更宽的数字

```
body{
    z-index:1000;
    }

watermark{
    z-index:-1000;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-17T06:49:00.053

**我建议您尝试更广泛的数字，例如 0 或 -999 用于最底部的 div 和 999 用于最顶部的 div**。

我注意到，如果您提供非常小的数字（例如 1 和 2），浏览器有时无法正确反映它。这只是基于我的个人经验。所以我更愿意给出更多的数字。

# iphone - 如何在我的所有视图底部添加通用 UIButton 而不是 iphone 中的 tabsview 控制器？

> ID：13909521
> 
> 赞同：3
> 
> 时间：2012-12-17T06:47:07.700
> 
> 标签：iphone, ios, uiwindow

我想把它放在`UIbutton`底部，它应该显示在我的所有视图上，比如tabBar `onclick`，`UIButton`我想打开菜单视图，如何实现这个功能，我为此做了很多尝试，也做了很多谷歌搜索，但没有提到正确实现这一目标的方法，所以请建议我实现这一目标的正确方法

![此图像在底部包含一个“团队”按钮，单击该“团队”菜单视图应打开查看下一个屏幕截图](../Images/7d61836b91b0fcc8bc6e94e43a8d88ad.png)

![黑色视图包含菜单应打开](../Images/382193bc80f5804cd1e2dbd7f92218d9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:54:38.127

我之前通过在 Appdelegate 类中添加一个按钮来完成此操作。我不知道这是否是正确的方法，但它正在工作。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    viewController = [[SUSAViewController alloc] initWithNibName:@"SUSAViewController" bundle:nil];

    nav=[[UINavigationController alloc]initWithRootViewController:viewController];
    self.window.rootViewController = nav;

    UIButton *mybtn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    mybtn.frame=CGRectMake(40, 200, 200, 200);
    [mybtn setTitle:@"My Button" forState:UIControlStateNormal];

    [nav.view addSubview:mybtn];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

如果您不使用，`NavigationController`则只需添加`[self.window addSubview:mybtn];` 希望它对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:50:20.993

您是否尝试过创建仅包含该按钮及其菜单项的 BaseViewController？

然后，如果您让所有视图控制器都从该 BaseViewController 继承，那么您的所有视图控制器都将具有该按钮。

```
// import your custom menu view
#import "CustomMenuView.h"

@interface BaseViewController : UIViewController
{
    UIButton *btnMenu;
    CustomMenuView *customMenu;
}

@end 

...

// Now tell your other view controllers to inherit from the base view controller
#import "BaseViewController.h"

@interface YourOtherViewController: BaseViewController
{

}

@end 
```

使用继承，你所有的视图控制器现在应该有那个按钮和菜单。

# iphone - 后台线程中的 CLLocationManager

> ID：13909527
> 
> 赞同：1
> 
> 时间：2012-12-17T06:47:44.013
> 
> 标签：iphone, ios, mapkit

我正在做一个应用程序。我正在使用 CLLocationManager 类来获取更新的位置纬度和经度详细信息。但我需要在单独的线程中使用这个 CLLocationManager。我编写了如下代码。

```
- (void)viewDidLoad
{
 [NSThread detachNewThreadSelector:@selector(fetch) toTarget:self withObject:nil];
}
-(void)fetch
 {
    manager=[[CLLocationManager alloc]init];
    manager.delegate=self;
    manager.distanceFilter=kCLDistanceFilterNone;
    manager.desiredAccuracy = kCLLocationAccuracyBest;
    [manager startUpdatingLocation];

 }
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
 {
   NSLog(@"%f",newLocation.coordinate.latitude);
   lbl.text=[NSString stringWithFormat:@"%f",newLocation.coordinate.longitude];
 } 
```

.但是当我运行这段代码时，这个委托方法不会被触发。所以请指导我如何在单独的线程中获取位置更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T08:06:15.513

您的委托对象的方法是从您启动相应位置服务的线程中调用的。该线程本身必须有一个活动的运行循环，就像在应用程序的主线程中找到的那样。——来自苹果文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:57:29.787

你能试试这个。

```
 dispatch_async(newThread, ^(void) {

       [self fetch];
   }); 
```

希望你能得到解决的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-17T07:43:58.107

在 .h 文件中

```
MainView *ctl;
NSMutableDictionary *dictSubPoses;

- (id)initWithCtl:(MainView*)_ctl; 
```

在 .m 文件中

```
- (id)initWithCtl:(MainView*)_ctl
{
   if(self = [super init]) 
   {
      ctl = _ctl; //[_ctl retain];
   }

   return self;
}

- (void)main 
{
   [ctl performSelector:@selector(yourMethod) withObject:dictSubPoses];
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-17T06:59:24.977

在 .h 文件中

```
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

//Set Delegate  
    CLLocationManagerDelegate
// Declare
    CLLocationManager *locationManager; 
```

在 .m 文件中

```
-(void)ViewDidLoad
{
    locationupadate=YES;
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.distanceFilter = 100.0f;
    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{

     if(locationupadate)
     {
           NSLog(@"%f",newLocation.coordinate.latitude);
          lbl.text=[NSString stringWithFormat:@"%f",newLocation.coordinate.longitude];

     } 
```

# iphone - 在iphone中使用linkedin api检索连接时出错

> ID：13909530
> 
> 赞同：0
> 
> 时间：2012-12-17T06:47:56.950
> 
> 标签：iphone, objective-c

我有一个应用程序，我在我的应用程序中集成了linkedin。我想获取登录用户的连接。为此，我已经完成了代码，但它返回错误：

```
{
  "errorCode": 0,
  "message": "Unknown authentication scheme",
  "requestId": "98TKWP0T23",
  "status": 401,
  "timestamp": 1355726431107
} 
```

这是我所做的代码：-

```
(NSMutableArray*) getFriendsList
{      
  NSString *url1 = [NSString stringWithFormat:@"http://api.linkedin.com/v1/people/id=%@:(connections)?format=application/json",linkedinid];
  NSLog(@"%@",url1);
  NSURL *url = [NSURL URLWithString:url1];

  OAMutableURLRequest *request = [[OAMutableURLRequest alloc] 
                                         initWithURL:url
                                            consumer:consumer
                                               token:token
                                            callback:nil
                                            signatureProvider:nil];
  [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];
  [request setHTTPMethod:@"POST"];

   NSError *err;
   NSURLResponse *resp;
   NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:&resp error:&err];
   NSMutableArray *arr = [[NSMutableArray alloc] init];

   if (response != nil)
   {
     NSString *stringResponse = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
     SBJSON *parser = [[SBJSON alloc] init];
     NSDictionary *linkedin_response = [parser objectWithString:stringResponse error:nil];   
   }    
} 
```

但在 stringresponse 它返回上述错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:38:41.907

尝试这个 ：

```
- (void)getFriendsList
{
   NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/connections"];
   OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:url
                                consumer:oAuthLoginView.consumer
                                   token:oAuthLoginView.accessToken
                                callback:nil
                       signatureProvider:nil];

   [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];

   OADataFetcher *fetcher = [[OADataFetcher alloc] init];
   [fetcher fetchDataWithRequest:request
                     delegate:self
            didFinishSelector:@selector(networkApiCallResult:didFinish:)
              didFailSelector:@selector(networkApiCallResult:didFail:)];    
}

- (void)networkApiCallResult:(OAServiceTicket *)ticket didFinish:(NSData *)data
{
   NSString *responseBody = [[NSString alloc] initWithData:data
                                               encoding:NSUTF8StringEncoding]; 
   NSDictionary *demo = [responseBody objectFromJSONString];

   NSMutableArray *connections = [[NSMutableArray alloc] init];

   for(int i=0;i<[[demo objectForKey:@"_count"] intValue];i++)
   {
      NSDictionary *person = [NSString stringWithFormat:@"%@ %@",[[[[responseBody objectFromJSONString] 
                                                                  objectForKey:@"values"] 
                                                                 objectAtIndex:i]
                                                                objectForKey:@"firstName"],[[[[responseBody objectFromJSONString] 
                                                                                              objectForKey:@"values"] 
                                                                                             objectAtIndex:i]
                                                                                            objectForKey:@"lastName"]];
      NSLog(@"Connection %d : %@",i,[NSString stringWithFormat:@"%@ %@",[[[[responseBody objectFromJSONString] 
                                                                         objectForKey:@"values"] 
                                                                        objectAtIndex:i]
                                                                       objectForKey:@"firstName"],[[[[responseBody objectFromJSONString] 
                                                                                                     objectForKey:@"values"] 
                                                                                                    objectAtIndex:i]
                                                                                                   objectForKey:@"lastName"]]);
     [connections addObject:person];  
   }
}

- (void)networkApiCallResult:(OAServiceTicket *)ticket didFail:(NSData *)error 
{
   NSLog(@"%@",[error description]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:53:00.630

从它的样子来看，您没有在帖子中传递“用户名/密码”，因此您得到的是“未知身份验证方案”。我不确定您是否能够在自己的应用程序中检测到登录用户的连接，除非您将他们的凭据存储在您的应用程序中。

# ipython - 如何打印我定义的对象的源代码使用 %edit 魔法

> ID：13909536
> 
> 赞同：12
> 
> 时间：2012-12-17T06:48:29.723
> 
> 标签：ipython

ipython 0.13.1 可以打印来自python库的对象的来源，
例如，os.path.abspath??
但是我无法打印我通过 ipython 中的 %ed 魔法定义的任何对象的源代码，我
做错了什么吗？
例如，我通过 %ed 魔术定义了一个类名：

```
%ed 
```

然后

```
class Name(object):
    """docstring for Name"""
    name = 'hong'
    def __init__(self, arg):
        super(Name, self).__init__()
        self.arg = arg
    def pri():
        print 'class Name' 
```

当回到 ipython 时，我看不到类名的源代码：

```
In [59]: Name??
Type:       type
String Form:<class '__main__.Name'>
Docstring:  docstring for Name
Constructor information:
Definition:Name(self, arg) 
```

这是IPython的错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T22:21:13.927

--在 OP 提到这之后的编辑在 ipython 本身中可以看到。

输入 %ed myfunc 后是否收到任何错误消息？粘贴可能有助于其他人找到问题。

- -更新：

当我尝试 Name?? 时，我也得到了源代码的简短版本，但是 Name.pri?? 给了我 Name 类的 pri() 成员函数的完整源代码。所以 ipython 可能有一些约定不提供类的完整源代码。

这是我的互动：

```
 In [2]: Name??
    Type:       type
    String Form:<class '__main__.Name'>
    Docstring:  docstring for Name
    Constructor information:
     Definition:Name(self, arg)

    In [3]: Name.pri??
    Type:       instancemethod
    String Form:<unbound method Name.pri>
    File:       /tmp/ipython_edit_8YOfN9.py
    Definition: Name.pri()
    Source:
        def pri():
            print 'class Name'

    In [4]: 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T12:48:52.223

IPython 的最新版本（不确定确切的版本号）实际上确实显示了源代码：

```
IPython 0.13 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: %ed
IPython will make a temporary file named: /var/folders/88/zgy_z51x1fn2mp_7vmkj3phm0000gn/T/ipython_edit_g9xYY4.py
Editing... done. Executing edited code...
Out[1]: 'def f(a):\n\treturn a + 3\n'

In [2]: f(4)
Out[2]: 7

In [3]: f??
Type:       function
String Form:<function f at 0x18ddb30>
File:       /var/folders/88/zgy_z51x1fn2mp_7vmkj3phm0000gn/T/ipython_edit_g9xYY4.py
Definition: f(a)
Source:
def f(a):
        return a + 3 
```

还有另外两种获取源的方法。一个是如果你可以回到你调用的那一行`%ed`，返回值应该是源代码（这里是`Out[1]`，所以你可以这样做`print Out[1]`）。另一个是调用`%ed f`- 这应该将当前定义加载`f`到编辑器中，并允许您编辑定义。

# c# - asp.net 中的三层架构问题

> ID：13909543
> 
> 赞同：-1
> 
> 时间：2012-12-17T06:49:00.020
> 
> 标签：c#, asp.net

我有一个三层架构的 asp.net 项目。我在解决方案中添加了业务访问层 (BAL) 和数据访问层 (DAL) 作为类库，并且在 BAL 中添加了 DAL 的引用，在 UI 中添加了 BAL 的引用。

我已经在 BAL 的一个类中编写了一些方法，它工作正常，但现在我正在向任何 BAL 类添加新方法，并在 UI 中访问新添加的方法。因此，在 UI 中无法访问新添加的方法，并且它给了我错误

> *“BAL.TaskBAL”不包含“deleteSelectedTaskBAL”的定义，并且找不到接受“BAL.TaskBAL”类型的第一个参数的扩展方法“deleteSelectedTaskBAL”（您是否缺少 using 指令或程序集引用？）
> D​​： \Mohsin\CurrentlyWorking\ManageTaskBALDAL\AdminHomePage.aspx.cs*

这`deleteSelectedBAL`是新添加的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:59:13.880

在这里你可以尝试两件事

1) 从 UI 文件夹的 bin 中删除 .dll 文件，然后尝试再次添加。2）您可以通过右键单击解决方案来设置项目依赖关系。那么你不需要一次又一次地添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:40:30.010

我过去曾遇到过这个问题。有时清理和重建 BAL 项目也有帮助。

还要确保您在调用该方法的代码文件中使用命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T17:45:46.343

```
namespace BLL
{
    public class tblSubCategory
    {
        public tblSubCategory()
        {
            //
            // TODO: Add constructor logic here
            //
        }
        private int iSubCatId;
        private string sSubCatName;
        private string sImagePath;
        private int iCategoryId;
        private string sDescription;
        private decimal decPrice;
        private int sCategoryName;

        public int SubCatId
        {
            get
            { return iSubCatId; }
            set
            { iSubCatId = value; }
        }
        public string SubCatName
        {
            get
            {
                return sSubCatName;
            }
            set
            { sSubCatName = value; }
        }
        public string ImagePath
        {
            get
            {
                return sImagePath;
            }
            set
            { sImagePath = value; }

        }
        public int CategoryId
        {
            get
            {
                return iCategoryId;
            }
            set
            { iCategoryId = value; }
        }
        public string Description
        {
            get
            { return sDescription; }
            set
            { sDescription = value; }
        }
        public decimal Price
        {
            get
            { return decPrice; }
            set
            { decPrice = value; }
        }
        public int CategoryName
        {
            get
            {
                return sCategoryName;
            }
            set
            { sCategoryName = value; }
        }

        public int InserttblSubCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@sSubCatName", sSubCatName);
            db.AddParameter("@sImagePath", sImagePath);
            db.AddParameter("@iCategoryId", iCategoryId);
            db.AddParameter("@sDescription", sDescription);
            db.AddParameter("@decPrice", decPrice);
            return db.ExecuteNonQuery("[tblSubCategory_Insert]", true);
        }
        public DataSet SelectAlltblSubCategory()
        {
            DBAccess db = new DBAccess();
            //db.AddParameter("@iSubCatId", iSubCatId);
            //return db.ExecuteDataSet("tblSubCategory_SelectAllForDDL");
            return db.ExecuteDataSet("tblSubCategory_SelectAll");
        }
        public int UpdatetblSubCategory()
        {
            DBAccess db = new DBAccess();

            db.AddParameter("@iSubCatId", iSubCatId);
            db.AddParameter("@sSubCatName", sSubCatName);
            //db.AddParameter("@sImagePath", sImagePath);
            //db.AddParameter("@iCategoryId", iCategoryId);
            db.AddParameter("@sDescription", sDescription);
            db.AddParameter("@decPrice", decPrice);
            return db.ExecuteNonQuery("[tblSubCategory_Update]", true);
        }
        public int DeletetblSubCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iSubCatId", iSubCatId);

            return db.ExecuteNonQuery("[tblSubCategory_Delete]", true);
        }
        public DataSet SubCategoryAscByCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", CategoryId);

            return db.ExecuteDataSet("[tblSubCategory_SelectAsc]");

        }
        public DataSet SubCategoryDescByCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", CategoryId);

            return db.ExecuteDataSet("[tblSubCategory_SelectDescPrice]");

        }
        public DataSet InnerjointblSubCategory1()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", CategoryId);

            return db.ExecuteDataSet("[tblSubCategory_InnerJoin1]");

        }
        public DataSet SelectDesctblSubCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", iCategoryId);
            //db.AddParameter("@sSubCatName", sSubCatName);
            return db.ExecuteDataSet("tblSubCategory_SelectDesc");
        }
        public DataSet SelectSubCatName()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", iCategoryId);

            return db.ExecuteDataSet("tblSubCategory_SelectSubCatName");
        }
        public DataSet SelectProductsBySubCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iSubCatId", iSubCatId);

            return db.ExecuteDataSet("tblProduct_ProductBySubCat");
        }

        public DataSet selectallsub()
        {

            DBAccess db = new DBAccess();
            //db.AddParameter("@iSubCatId", iSubCatId);
            //return db.ExecuteDataSet("tblSubCategory_SelectAllForDDL");
            return db.ExecuteDataSet("tblSubCategory_InnerJoin2");
        }
        public DataSet selectallsubasc()
        {

            DBAccess db = new DBAccess();
            //db.AddParameter("@iSubCatId", iSubCatId);
            //return db.ExecuteDataSet("tblSubCategory_SelectAllForDDL");
            return db.ExecuteDataSet("tblSubCategory_InnerJoinDesc");
        }
        public DataSet SelectSubCategoryBySubCatId()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iSubCatId", iSubCatId);

            return db.ExecuteDataSet("tblSubCategory_ddlProduct");
        }

        public DataSet SelectSubCategoryByCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", iCategoryId);

            return db.ExecuteDataSet("tblSubCategory_SelectSubCategoryByCategory");
        }
        public DataSet GetSubCategory()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@sSubCatName", sSubCatName);

            return db.ExecuteDataSet("tblSubCategory_SelectSname");
        }
        public DataSet SubCategoryByCatAsc()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", iCategoryId);

            return db.ExecuteDataSet("tblSubCategory_asc");
        }
        public DataSet SubCategoryByCatDesc()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", iCategoryId);

            return db.ExecuteDataSet("tblSubCategory_desc");
        }
        public DataSet CategoryByCatId()
        {
            DBAccess db = new DBAccess();
            db.AddParameter("@iCategoryId", iCategoryId);

            return db.ExecuteDataSet("tblCategory_SelectAllCat");
        }
        public DataSet InnerjointblSubCategoryTop3()
        {
            DBAccess db = new DBAccess();
            //db.AddParameter("@sCategoryName", CategoryName);
            db.AddParameter("@iCategoryId", CategoryId);
            return db.ExecuteDataSet("[tblSubCategory_InnerJoinTop3]");

        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T17:54:03.290

是对*项目*或作为项目构建工件的*程序集的引用。*如果您的参考是构建工件，那么您的依赖链就被破坏了。删除参考并添加*项目参考*。

# javascript - 汇总已安装我的 Facebook 应用的用户 ID 列表

> ID：13909547
> 
> 赞同：0
> 
> 时间：2012-12-17T06:49:11.363
> 
> 标签：javascript, facebook-opengraph, facebook-apps, facebook-canvas

我有一个安装了近百万用户的应用程序。但随着用户群的增长，我未​​能将安装我的应用程序的用户 ID 存储在我的数据库中。现在我惊恐地发现 Facebook API 没有提供直接的方法来做到这一点。我该如何寻找现在安装了我的应用程序的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:39:26.860

> 我该如何寻找现在安装了我的应用程序的用户？

通过在他们下次积极使用您的应用程序时保存他们的 ID。

不，没有别的办法。

# javascript - 是否可以仅在输入密码时使浏览器退出全屏模式？

> ID：13909548
> 
> 赞同：1
> 
> 时间：2012-12-17T06:49:16.230
> 
> 标签：javascript, html

我正在考虑制作一款游戏，但这涉及始终保持全屏模式。您只能在输入密码时离开全屏模式。按 Esc 或切换全屏键不应退出全屏模式。我不能透露更多细节，但它涉及让一个人与页面内容进行交互，直到另一个知道密码的人停止交互。

编辑：我知道它对用户不友好，但它是出于特殊目的。它可以让孩子们与之互动，并独自一人。如果他们从浏览器中逃脱，他们将能够篡改计算机上我也不想要的其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:53:00.990

这是不合理的。所有操作系统都允许某种紧急应用程序关闭系统。您将无法阻止这些能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:54:30.053

您不能强制浏览器保持全屏模式。你也不应该，它只会让你的用户生气。

如果您不介意愤怒的用户，您可以尝试[全屏弹出窗口](https://stackoverflow.com/questions/228377/could-a-website-force-the-browser-to-go-into-fullscreen-mode)。但实际上，尽量不要那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:54:35.827

浏览器中的全屏是用户设置。你不可能通过 html/javascript 来控制它。访问和更改个人设置的唯一方法是通过 C/C++ 和 C# 等语言中的系统调用。您基本上总是需要在客户端计算机上运行一个程序来管理此类设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T07:48:52.050

由于您不再需要诸如“这不是用户友好的”之类的答案，因此我建议您查看一些用于 Firefox 或 chrome 的附加组件。你应该看看一些“Kiosk-Mode”附加组件。

Kiosk 模式适用于您在公共场所拥有 PC 并希望提供 Internet 访问的用例。也许您可以使用其中一个附加组件并对其进行配置以获得您想要的。

如果没有，您应该考虑在此附加上下文中为 Firefox 或 chrome 编写自己的插件，您应该可以控制这些事情。

# java - 部署（发布）后的 Weblogic 错误：错误 503--服务不可用

> ID：13909554
> 
> 赞同：3
> 
> 时间：2012-12-17T06:49:49.790
> 
> 标签：java, deployment, weblogic, weblogic11g, http-status-code-503

我有一个使用 Spring、Hibernate 和 JSF2.0 的小型 Web 应用程序。

我正在将我的应用程序部署到与 Eclipse 服务器集成的 Weblogic 10.3.6。当我将应用程序发布到服务器时，它会被发布（部署），但是与 Glassfish 相比，它需要相当长的时间才能发布。

我遇到的问题是，当我尝试从浏览器运行应用程序时，我在浏览器中收到以下错误，尽管我在日志中没有看到任何错误或异常。我该如何解决这个问题？为什么部署到服务器需要这么多时间？

```
Error 503--Service Unavailable
From RFC 2068 Hypertext Transfer Protocol -- HTTP/1.1:
10.5.4 503 Service Unavailable

The server is currently unable to handle the request due to a temporary 
overloading or maintenance of the server. The implication is that this 
is a temporary condition which will be alleviated after some delay. If known, 
the length of the delay may be indicated in a Retry-After header. 
If no Retry-After is given, the client SHOULD handle the response as it would 
for a 500 response.

    Note: The existence of the 503 status code does not imply that a server 
    must use it when becoming overloaded. Some servers may wish to simply 
    refuse the connection. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-09T12:46:24.337

确保您的部署处于活动状态。部署后，您的部署文件状态已准备好。要将其更改为活动模式，请按照以下步骤操作：

1.  单击左侧控制台中的部署选项卡，然后转到部署摘要。

2.  现在您将能够看到您的 Deployment 的状态，该状态现在将准备就绪。

3.  单击上面的控制选项卡。
4.  选择您的战争文件并检查开始选项。
5.  然后选择所有服务。

它将状态更改为活动模式。;)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T13:49:59.640

转到管理控制台，检查服务器的状态，检查您尝试部署的应用程序本身的状态。确保它已启动并准备好接受请求。

关于为什么它需要很长时间部署，我认为它归结为使用 Eclipse 本身 IMO。重新部署应用程序时，如果您将一些文件部署为库，那么部署将更快。如果您尝试将所有库包含在您的 EAR 文件本身中，那么服务器将花费更长的时间。

# java - 当我连接任何 USB 时，USB 检测应用程序在 Android 4.0.3 Smile Pro 中不显示任何内容

> ID：13909558
> 
> 赞同：0
> 
> 时间：2012-12-17T06:50:01.257
> 
> 标签：java, android

我正在使用 Eclipse，并且已在我的 Android 手机中安装了该应用程序。

**主要活动代码：**

包 com.example.usbdetection；

```
 import android.app.Activity;
 import android.app.PendingIntent;
import android.content.BroadcastReceiver;
 import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
 import android.hardware.usb.UsbDevice;
import android.hardware.usb.UsbManager;
 import android.os.Bundle;
 import android.util.Log;

public class MainActivity extends Activity {

UsbManager usbManager;
    PendingIntent mPermissionIntent;
    UsbDevice usbDevice;
    Intent intent;
    final String ACTION_USB_PERMISSION = "com.example.usbdetection.USB_PERMISSION";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        usbManager = (UsbManager) getSystemService(Context.USB_SERVICE);
        mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(
                ACTION_USB_PERMISSION), 0);

        IntentFilter filter = new IntentFilter();
        filter.addAction(UsbManager.ACTION_USB_DEVICE_ATTACHED);
        filter.addAction(ACTION_USB_PERMISSION);
        registerReceiver(mUsbReceiver, filter);
    }

private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();
        if (ACTION_USB_PERMISSION.equals(action)) {
            synchronized (this) {

                usbDevice = (UsbDevice) intent
                        .getParcelableExtra(UsbManager.EXTRA_DEVICE);
                usbManager.requestPermission(usbDevice, mPermissionIntent);

                if (intent.getBooleanExtra(
                        UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                    if (usbDevice != null) {
                        // call method to set up device communication

                        int deviceId = usbDevice.getDeviceId();
                        int productId = usbDevice.getProductId();
                        Log.i("device id", "****" + deviceId);
                        Log.i("product id", "****" + productId);

                    } else {
                        Log.i("device id", "No USB device");
                    }

                } else {
                    Log.d("shiv", "permission denied for device ");
                }
            }
        }
    }
}; 
```

}

清单文件：

```
<uses-feature android:name="android.hardware.usb.host" />

<uses-sdk
    android:minSdkVersion="12"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.usbdetection.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
        </intent-filter>

        <meta-data
            android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
            android:resource="@xml/device_filter" />
    </activity>
</application> 
```

当我运行我的应用程序并连接任何 USB 时，它什么也没有显示。怎么了？。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:05:51.867

我找到了解决方案：

**首先，我植根了我的安卓设备。** 然后我在**etc/permissions文件夹中添加了一个名为****android.hardware.usb.host.xml**的文件，其中包含权限

 **```
 <permissions>
 <feature name="android.hardware.usb.host" /> 
 </permissions> 
```

现在它支持 Host API。**

# sql - 在 FOR XML 中处理 NULL 值

> ID：13909559
> 
> 赞同：1
> 
> 时间：2012-12-17T06:50:17.583
> 
> 标签：sql, sql-server, sql-server-2008

```
 SELECT Col1
    FROM Table
    WHERE Col2 = 63895746
    ORDER BY Col
    FOR XML PATH,TYPE 
```

我在结果中不需要 NULLS。我希望结果被 < Cols >< /Cols > 之类的东西包裹，即使 col1 是否为空

在这个例子中 Table 不包含 col2 = 63895746 的任何行，所以我会得到一个空的结果集，所以 type 指令会将它设为 NULL 并返回它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T07:08:34.080

你需要使用ELEMENTS XSINIL；

[包括空列空元素](http://go4answers.webhost4life.com/Example/including-null-columns-empty-elements-125474.aspx)

如果您无法嵌套查询：

> SELECT ISNULL(data.Col1,'< Cols >< /Cols >') AS Col1
> FROM (
> SELECT Col1
> FROM Table
> WHERE Col2 = 63895746
> ORDER BY Col
> FOR XML PATH,TYPE
> ) 数据

不在我的机器上，所以测试起来有点困难。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T07:40:30.413

怎么样

```
;with mytmp (f1) as (
  SELECT Col1
  FROM Table
  WHERE Col1 = 123456
  ORDER BY Col1
  FOR XML PATH('col'),root('cols'),TYPE
  )
select isnull(f1, '<cols></cols>')
from mytmp; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T07:32:57.517

```
SELECT T.X
FROM
  (
  SELECT Col1
  FROM Table
  WHERE Col2 = 63895746
  ORDER BY Col
  FOR XML PATH, TYPE
  ) AS T
FOR XML PATH('Cols'), TYPE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T07:14:01.317

如果 Col1 是一个字符串，那么您可以使用以下方法来实现此目的：

```
SELECT COALESCE(Col1,'')
FROM Table
WHERE Col2 = 63895746
ORDER BY Col
FOR XML PATH,TYPE 
```

如果你有一个空值，那会给你一个空标签

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-28T07:42:47.333

我认为，根据微软，是使用

```
ELEMENTS XSINIL 
```

作为选项，在用于 xml 路径之后

[https://docs.microsoft.com/en-us/sql/relational-databases/xml/columns-that-c​​ontain-a-null-value-by-default?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/relational-databases/xml/columns-that-contain-a-null-value-by-default?view=sql-server-2017)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T06:53:56.120

尝试：

```
SELECT 
    ISNULL(Col1, '< Cols >< /Cols>') AS Col1
FROM Table
WHERE Col2 = 63895746
ORDER BY Col
FOR XML PATH,TYPE 
```

# css - 如何在compas sass中生成精灵位置，例如“右-300px”？

> ID：13909561
> 
> 赞同：1
> 
> 时间：2012-12-17T06:50:22.137
> 
> 标签：css, compass-sass, css-sprites

如何在compas sass中生成精灵位置，例如“右-300px”？
我发现sass只能输出数字的背景位置，但有时我需要精灵位置右对齐或下对齐，怎么做？
请在下面查看我的代码：

```
<style type="text/css">
    /* ------- scss ------- */
    $map_btn: sprite-map("sprite_btn/*.png");
    .btn,.btn span{
        display:inline-block;
        background-image: sprite-url($map_btn);
        background-repeat: no-repeat;
    }
    .go_to_cart{
        background-position: sprite-position($map_btn,go_to_cart);
        span{
            background-position: sprite-position($map_btn,go_to_cart);
        }
    }

    /* ------- output ------- */
    .btn,.btn span{
        display:inline-block;
        background-image: url('../images/btn_sprite.png');
        background-repeat: no-repeat;
    }
    .go_to_cart{
        background-position: 0 -300px;
    }
    .go_to_cart span{
        background-position: 0 -330px;
        /* ------- 
            but I want to output like this bellow:
            how to write in scss?
        ------- */
        background-position: right -330px;
    }

</style>
<a href="#" class="btn go_to_cart">
    <span></span>
</a> 
```

![在此处输入图像描述](../Images/c4735ce351729df28bbbb3fe03591c87.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:24:27.057

这是一个老问题，但以防万一有人需要答案。

使用精灵贴图时，您不能（或不应该）像那样对齐背景，因为您基本上是在偏移范围并破坏了精灵贴图的目的。

如果你想对齐精灵，你应该定位/对齐精灵的容器。

# java - 当我浏览 JSP 页面时无法检索会话属性

> ID：13909562
> 
> 赞同：0
> 
> 时间：2012-12-17T06:50:27.853
> 
> 标签：java, jsp, jsp-tags

我正在研究 eclipse juno 和 apache 服务器。
我有 3 页：

*   login.jsp（然后将此页面重定向到 servlet(Validation.java) 以进行登录验证，如果有效则导航到 search.jsp）
*   搜索.jsp
*   fill.jsp

    我已经像这样在 Validation.java 中设置了会话变量的值， 并像这样打印了值： 并在每个页面上打印了会话的值，但是每次当我浏览这些页面时，它都会创建新的**sessionID**。
    `String s_user=request.getParameter("n_user");
    HttpSession session=request.getSession(true);
    session.setAttribute("ses_user",s_user);`

    `String s =(String)session.getAttribute("ses_user"); System.out.println(s);`

 **我已经检查过了

```
System.out.println("session ID"+request.getSession(false)); 
```

为什么我没有得到相同的会话 ID 也没有得到相同的原因？

登录.jsp：

```
<form name="loginform" method="post" action="Validation"  >
    <br><br>
    <table width="300px" align="center" style="background-color:#C1CDCD;">
        <tr><td colspan=2></td></tr>
        <tr><td colspan=2> </td></tr>
        <tr>
         <td><b><font color="#00008B">Login Name</font></b></td>
         <td><input type="text" name="n_user" value=""></td>
        </tr>
        <tr>
            <td><b><font color="#00008B">Password</font></b></td>
            <td><input type="password" name="n_pass" value=""></td>
        </tr>

        <tr>
                <td></td>
                <td><input type="submit" name="Submit" value="Submit" onclick="return validate()"></td>
        </tr>
        <tr> <td colspan=2> </td></tr>
    </table>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T13:24:37.827

`System.out.println("session ID" + (String)(request.getSession().getAttribute("ses_user")));`

您将在会话中设置属性值。`SessionId`被更改，因为在验证后您创建了新会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:57:23.177

```
 //set session  
    HttpSession session=request.getSession(true);
    session.setAttribute("ses_user",s_user); 

        // get session

  String userid = (String)session.getAttribute("ses_user");
if(userid  != null){
// do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:00:06.617

你应该只使用`HttpSession session=request.getSession()`没有布尔参数。

`session=request.getSession()`和`session=request.getSession(true)`**

# javascript - 无法读取 null 的属性“innerHTML”

> ID：13909567
> 
> 赞同：1
> 
> 时间：2012-12-17T06:50:52.183
> 
> 标签：javascript, asp.net, html

我是 javascript 的初学者。

**js文件**

```
 var msgErrorPalletizedWeight = document.getElementById('msgError');
         function palletizedWeightValidation() {
              console.log("hello");
/*ERROR*/     msgErrorPalletizedWeight.innerHTML += ("Please enter all the values marked with *");
         } 
```

**HTML**

```
<head runat="server">
   <title></title>
   <link href="Styles/Site.css" rel="stylesheet" type="text/css" />
   <script src="Scripts/file.js" type="text/javascript"></script>
</head>
<body>
    <p id="msgError"></p>
    <asp:Button ID="btnSubmitPalletized" runat="server" Text="Submit" 
                   OnClientClick="palletizedWeightValidation()" />
</body> 
```

错误

> 无法读取 null 的属性“innerHTML”

我在这里问之前搜索了很多网站，他们都建议在我可以做的验证之前检查 null ，但我的问题是我想在`p`标签中添加一些文本，如您所见..如何实现？我什至尝试附加，认为它可能会解决问题。我知道这是一个愚蠢的错误，因为有很多关于此的帖子......问题是我不明白我哪里出错了。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:54:59.530

你`trying`要访问`element`html 的时候不访问`ready`，把语句放在 event 函数中，就可以得到 function 中的元素`palletizedWeightValidation`。

```
 function palletizedWeightValidation() {
              var msgErrorPalletizedWeight = document.getElementById('msgError');
              console.log("hello");
/*ERROR*/     msgErrorPalletizedWeight.innerHTML += ("Please enter all the values marked ith *");
         } 
```

**编辑** *要停止 postback*，您需要从 javascrip 函数返回 false 。

```
 <asp:Button ID="btnSubmitPalletized" runat="server" Text="Submit" 
                   OnClientClick="return palletizedWeightValidation()" />

      function palletizedWeightValidation() {
              var msgErrorPalletizedWeight = document.getElementById('msgError');
              console.log("hello");
/*ERROR*/     msgErrorPalletizedWeight.innerHTML += ("Please enter all the values marked ith *");
              return false; // returning true will cause postback.
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:13:36.963

重要的是你的 js 文件何时被执行。如果你在 head 标签内加载 js 文件，你的文件将在 DOM 创建之前执行。这意味着，document.getElementById 函数返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:54:45.170

你得到的错误是因为你试图读取一个 NULL 对象的属性。这意味着您的线路：

```
var msgErrorPalletizedWeight = document.getElementById('msgError'); 
```

在您的页面上找不到任何元素。

# hadoop - 使用 start-all.sh 启动 hadoop 进程遇到问题

> ID：13909568
> 
> 赞同：1
> 
> 时间：2012-12-17T06:51:04.390
> 
> 标签：hadoop

我正在使用 redhat linux 4.1.2 当我尝试使用以下命令启动 hadoop 时，它要求输入 root@localhost 密码。我不明白在这里输入什么密码。

> sreenath@sreenath-pc# sudo -i [root@sreenath-pc hadoop-1.1.1]# bin/start-all.sh 警告：$HADOOP_HOME 已弃用。
> 
> 启动namenode，登录到/opt/hadoop-1.1.1/libexec/../logs/hadoop-root-namenode-sreenath-pc .out root@localhost 的密码：root@localhost 的密码：localhost：权限被拒绝，请重试.
> 
> [1]+ 停止 bin/start-all.sh

我给了当前用户“sreenath”密码

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T09:39:09.297

您的 SSH 设置不正确

设置无密码 ssh

现在检查您是否可以在没有密码的情况下 ssh 到 localhost：

```
$ ssh localhost 
```

如果没有密码就无法 ssh 到 localhost，请执行以下命令：

```
$ ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa
$ cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys 
```

执行

格式化一个新的分布式文件系统：

```
$ bin/hadoop namenode -format 
```

启动 hadoop 守护进程：

```
$ bin/start-all.sh 
```

[http://hadoop.apache.org/common/docs/r0.17.0/quickstart.html#Setup+passphraseless](http://hadoop.apache.org/common/docs/r0.17.0/quickstart.html#Setup+passphraseless)

或者

请参阅[Micheal Noll 的链接](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)以在您的机器上运行 Hadoop。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:06:57.480

你可以去[这里](http://cloudfront.blogspot.in/2012/07/how-to-setup-and-configure-ssh-on-ubuntu.html)看看如何配置 ssh 和[这里](http://cloudfront.blogspot.in/2012/07/how-to-configure-hadoop.html)看看如何配置 Hadoop

高温高压

# c# - 在c#中单击上一个按钮时检索相同的值

> ID：13909569
> 
> 赞同：0
> 
> 时间：2012-12-17T06:51:10.267
> 
> 标签：c#, asp.net, forms

我正在用 c# 创建一个网站，其中有两种形式。在 form1.aspx 我有一个文本框和一个下一页按钮重定向到 form2.aspx，在 form2.aspx 有一个上一页按钮重定向到 form1.aspx。我希望当我单击上一页按钮时，应该在 form1.aspx 的文本框中返回相同的先前值。

form1.aspx 设计视图

```
<form id="form1" runat="server">
    <asp:Button ID="btnNext" runat="server" Text="NextPage" OnClick="btnNext_Click" />
    <asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox>
</form> 
```

form1.aspx 代码在后面

```
 public partial class Form1 : System.Web.UI.Page 
    {
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnNext_Click(object sender, EventArgs e)
    {
        Response.Redirect("Form2.aspx");
    }
} 
```

form2.aspx 设计页面

```
<form id="form1" runat="server">
    <asp:Button ID="btnPrev" runat="server" Text="previous" OnClick="btnPrev_Click" />
</form> 
```

form2.aspx 代码在后面

```
 public partial class Form2 : System.Web.UI.Page
    {
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnPrev_Click(object sender, EventArgs e)
    {
        Response.Redirect("Form1.aspx");
    }
    } 
```

如果这是一个愚蠢的问题，我很抱歉。但请帮帮我。

提前致谢 问候， 阿布舍克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:00:39.100

如果您不想为其创建会话值，则可以交替将所需数据保存到 cookie 中，前提是它没有太大价值，然后从 cookie 中填充。请注意，请勿将数据保存在 cookie 中，否则客户端计算机的其他用户可能会使用这些数据来滥用您的网站。在这里我不认为这可能是一个安全的站点和太有价值的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:54:30.513

在 form2.aspx 上重定向时，您可以在会话中保存 texboxes 的值。当你从 from2.aspx 重定向到 form1.aspx 时，检查会话并在页面加载事件的文本框中填写值。

# mysql - Spring JdbcTemplate - 连接 - 似乎无法关闭

> ID：13909572
> 
> 赞同：1
> 
> 时间：2012-12-17T06:51:38.690
> 
> 标签：mysql, spring, pool

我的 Spring 应用程序中有一个配置的数据源（mySQL），如下所示：

```
<bean id="dataSource"
        class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName">
            <value>${db.driver}</value>
        </property>
        <property name="url">
            <value>${db.url}</value>
        </property>
        <property name="username">
            <value>${db.username}</value>
        </property>
        <property name="password">
            <value>${db.password}</value>
        </property>
        <property name="defaultAutoCommit">
        <value>${db.con.defaultAutoCommit}</value>
        </property>
        <property name="initialSize" value="12"/>
        <property name="maxActive"  value="10"/>
        <property name="maxIdle" value="2"/>
    </bean> 
```

在我的代码中，我获取 jdbcTemplate 并执行一些插入语句，如下所示：`

```
<bean id="doTransaction" class="com.lch.spring.BusinessComponents.DoTransaction">
        <property name="jdbcTemplate"><ref bean="jdbcTemplate"/></property>
        <property name="namedParameterJdbcTemplate"><ref bean="namedParameterJdbcTemplate"/></property>
    </bean>` 
```

并且执行插入语句的代码是：

```
public int insertLCH_BUSINESS(LCH_BUSINESS lchBusiness) {
    int businessId = -1;
    try {
        log.info("Start Doing Transaction - Business");
        KeyHolder keyHolder = new GeneratedKeyHolder();
        SqlParameterSource parametersSource = new BeanPropertySqlParameterSource(
                lchBusiness);
        getNamedParameterJdbcTemplate().update(
                SQLQueries.INSERTLCH_BUSINESS, parametersSource, keyHolder);
        businessId = keyHolder.getKey().intValue();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return businessId;
} 
```

问题：当我多次执行此插入代码时，出现池耗尽错误。

```
 org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool exhausted
 ...............

        Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool exhausted
            at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:103)
            at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:540)
            at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
            at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
            ... 38 more
        Caused by: java.util.NoSuchElementException: Timeout waiting for idle object
            at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:756)
            at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:95)
            ... 41 more 
```

我可以在日志中看到 Jdbc Connection 由 Spring 返回到 DataSource，如下所示：

```
[http-8080-2] DEBUG [JdbcTemplate.java              : 570 ][Dec 17 2012 00:43:09.531] Executing prepared SQL statement [INSERT INTO `addressinfo` (`address1`,`address2`,`city`,`state`,`country`,`zipcode`,`landmark`) VALUES (?,?,?,?,?,?,?)]
[http-8080-2] DEBUG [DataSourceUtils.java           : 110 ][Dec 17 2012 00:43:09.532] Fetching JDBC Connection from DataSource
[http-8080-2] DEBUG [JdbcTemplate.java              : 860 ][Dec 17 2012 00:43:09.564] SQL update affected 1 rows and returned 1 keys
[http-8080-2] DEBUG [DataSourceUtils.java           : 332 ][Dec 17 2012 00:43:09.565] Returning JDBC Connection to DataSource 
```

我尝试使用 C3P0 和 Bounre CP，但没有成功。我需要明确关闭连接吗？我相信 jdbcTemplate 会按照我在文档中阅读的那样做到这一点。
有人可以在这里提供帮助吗？

谢谢
Gopi
www.allibilli.com

# asp.net - 网格视图刷新

> ID：13909575
> 
> 赞同：0
> 
> 时间：2012-12-17T06:51:58.143
> 
> 标签：asp.net, linq

我已经将下面的代码用于 GridView 的删除命令，但是当我按下删除命令时，网格视图中的数据不会被刷新，实际上命令删除了行但网格视图不更新。我必须手动刷新浏览器，然后网格视图将被更新。标记：

```
<div>

  <asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>

<asp:GridView ID="GridViewDocuments_Search" runat="server" AutoGenerateColumns=False 
          Visible="False" onrowcommand="GridViewDocuments_Search_RowCommand"  
  DataKeyNames="DocID" PageSize="100" EnableSortingAndPagingCallbacks="True"  >
    <Columns>
    <asp:TemplateField HeaderText = "Details">
           <ItemTemplate>
      <asp:Button ID ="btn_Show" Text="Details" runat= "server" CommandName= "Details" CommandArgument='<%#
        Container.DataItemIndex%>' />
        </ItemTemplate>
            </asp:TemplateField>

        <asp:BoundField DataField="DocumentNo" HeaderText="DocNo" />

        <asp:BoundField DataField="title" HeaderText="Title" SortExpression="title" />
        <asp:BoundField DataField="Docid" HeaderText="Docid" Visible="false" />
        <asp:CommandField ShowEditButton="True" />
        <asp:CommandField ShowDeleteButton="True" />
    </Columns>
</asp:GridView>
  </ContentTemplate>

  </asp:UpdatePanel>
</div> 
```

编码：

```
protected void GridViewDocuments_Search_RowCommand(object sender, GridViewCommandEventArgs e)
{
    int rowindex = Convert.ToInt32(e.CommandArgument.ToString());
    _DataContext = new EDMSDataContext();

    int _Docid = (int)GridViewDocuments_Search.DataKeys[rowindex].Value;

     switch (e.CommandName)
    {
        case "Details":
           Response.Redirect("~/Documentfortest.aspx?DocID=" + _Docid);
            break;
        case "Delete":
            _DataContext.DeleteDoc(_Docid);

            break;

    }

 var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);

     GridViewDocuments_Search.DataSource = query;
     GridViewDocuments_Search.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:55:38.930

确保`DataSource`在致电之前重新分配财产`DataBind`，然后尝试？

# javascript - 如何在没有 jQuery UI datepicker 年份的情况下显示日期

> ID：13909577
> 
> 赞同：1
> 
> 时间：2012-12-17T06:52:12.133
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我只需要显示日期和月份，但如果我设置`dateFormat: "d MM"`，我不能改变年份。总是 2012 年。例如：http: [//jsfiddle.net/v2vcV/](http://jsfiddle.net/v2vcV/)。只需尝试将日期更改为 2013 年 1 月并重新打开日历，年份仍为 2012 年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:48:21.367

这可以帮助你。HTML

```
<p>Date: <input type="text" style="visibility:hidden; width:0px" id="datepicker2"><input type="text" id="datepicker"></p> 
```

JS

```
$(function() {
    $("#datepicker").focus(function(){
        $("#datepicker2").focus();
    });
    $("#datepicker2").datepicker({dateFormat: "dd MM yy",
    onSelect:function(date){
        $("#datepicker").val(date.substring(0,date.length-4));
        }
    });
}); 
```

无论如何，这不是完美的方式，但可以帮助您想要的东西（作为一种错觉）。如果您想要确切的年份日期，您可以从 datepicker2 文本框中获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:20:13.157

我做了一个小改动，但它也给了你一年，确实它消除了你所面临的错误

[在这里检查](http://jsfiddle.net/v2vcV/18/)

使用它可以解决问题 `$( "#datepicker" ).datepicker({dateFormat: "dd MM yy"});`

设置日期后，您可以在逻辑上删除该年份。

我已经进行了所有编辑更改，现在效果很好..[检查这里](http://jsfiddle.net/v2vcV/21/)

享受.. ：）

# python - 单例数据库连接

> ID：13909578
> 
> 赞同：1
> 
> 时间：2012-12-17T06:52:16.560
> 
> 标签：python, mysql

我想从数据库“详细信息”中检索值，因为我只想与 DB 创建一个连接，如果连接存在，则不要建立新连接并继续前一个连接。为此，我尝试了以下方法：

```
import MySQLdb
import re
import os

class Find:

    def __init__(self,addr):
        self.addr = addr

    dsn = {
    'username': 'xyz',
    'password': 'xyz',
    'hostname': 'localhost',
    'database': 'details'
    }
    the_database_connection = False

    def connect(self,dsn):
        '''This function saves the database connection, so if invoke this again, it gives you the same one, rather than making a second connection.'''
        global the_database_connection
        if not the_database_connection:
            try:
                the_database_connection = MySQLdb.connect(
                    host=dsn['hostname'],
                    user=dsn['username'],
                    passwd=dsn['password'],
                    db=dsn['database'])
            # so modifications take effect automatically
                the_database_connection.autocommit(True)
            except MySQLdb.Error, e:
                print ("Couldn't connect to database. MySQL error %d: %s" %(e.args[0], e.args[1]))
        return the_database_connection
        x=conn.cursor()
        sql = "select * from persons where address = %s" % addr
        x.execute(sql)
        rows = x.fetchall()
        for row in rows:
            print row

if __name__ == "__main__":
    a = Find(addr = "new street")
    a.connect() 
```

但这显示错误：a.connect 需要 2 个参数，一个是定义...我如何定义上述 dsn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:24:54.070

您正在尝试重新发明连接池。

不幸的是，您的解决方案无法按原样工作。只有当所有连接参数（主机、端口、数据库、用户名、密码）完全相同时，才能使用相同的连接。在您的情况下，您在任何情况下都返回相同的连接，这是完全错误的 - 如果任何属性不同，您必须创建新连接。

相反，只需使用现有的连接池库之一，例如[pysqlpool](http://code.google.com/p/pysqlpool/)或[DBUtils](http://pypi.python.org/pypi/DBUtils/)（我相信还有其他的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:19:30.560

您没有按要求向 a.connect 函数提供 dsn 信息。将 dsn 信息拉出类并使其成为主要功能的一部分。然后将其作为 a.connect 的参数反馈回来。像这样：

```
import MySQLdb
import re
import os

class Find:

    def __init__(self,addr):
        self.addr = addr

    def connect(self,dsn):
        '''This function saves the database connection, so if invoke this again, it     gives you the same one, rather than making a second connection.'''
        global the_database_connection
        if not the_database_connection:
            try:
                the_database_connection = MySQLdb.connect(
                    host=dsn['hostname'],
                    user=dsn['username'],
                    passwd=dsn['password'],
                    db=dsn['database'])
                # so modifications take effect automatically
                the_database_connection.autocommit(True)
            except MySQLdb.Error, e:
                print ("Couldn't connect to database. MySQL error %d: %s" %(e.args[0], e.args[1]))
        return the_database_connection
        x=conn.cursor()
        sql = "select * from persons where address = %s" % addr
        x.execute(sql)
        rows = x.fetchall()
        for row in rows:
            print row

if __name__ == "__main__":
    a = Find(addr = "new street")
    dsn = {
    'username': 'xyz',
    'password': 'xyz',
    'hostname': 'localhost',
    'database': 'details'
    }
    the_database_connection = False
    a.connect(dsn) 
```

# java - 使用 apache commons 配置的应用程序

> ID：13909580
> 
> 赞同：0
> 
> 时间：2012-12-17T06:52:34.977
> 
> 标签：java, apache-commons

谁能告诉我一些使用 apache commons config library (http://commons.apache.org/configuration/) 的开源项目。这将使我了解使用该库的最佳实践并更快地了解该库。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:23:04.760

在code.ohloh.net 上[快速搜索会返回大量的使用示例。](http://code.ohloh.net/search?s=org.apache.commons.configuration&browser=Default&pp=0&fl=Java&fe=java&mp=1&ml=1&me=1&md=1&ff=1&filterChecked=true)

# php - 从类构造函数返回后运行函数

> ID：13909583
> 
> 赞同：3
> 
> 时间：2012-12-17T06:52:48.497
> 
> 标签：php

所以我有一个叫做*ClassOne*的类，我像这样调用构造函数：

```
$myclass = new ClassOne(TRUE); 
```

我想让该类返回其自身的实例，然后在该类的后台运行一个命令，而不会减慢需要该类的页面的生成速度。

```
class ClassOne {
  function __construct( $bool ) {
    if( $bool ) {
      call_me_in_background( $this->background() );
    }
  }

  function background() {
    //Do stuff...
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:52:00.947

我的解决方案是创建一个新线程，该线程将在您的代码受到最小影响时在后台执行操作。这要求您允许从新线程执行某些操作，就像对服务器的另一个请求一样。

# php - 页面底部的不明空间

> ID：13909589
> 
> 赞同：0
> 
> 时间：2012-12-17T06:53:05.533
> 
> 标签：php, html, css, joomla

我很兴奋是什么导致这个页面在底部有额外的空间这里是网站的链接[http://www.intangible-logic.com/lezyne-yr6-4/](http://www.intangible-logic.com/lezyne-yr6-4/)我已经检查了网站上的每个元素但是没有什么比margin或bottom之类的了，这可能是我想要表达的意思的示例快照

![在此处输入图像描述](../Images/853402acfcafe918d39b2b8965e6a509.png)

一直在努力搜索只是为了解决这个问题请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:07:23.273

你的问题在于`.maxidrop-main`div。删除该 div 会占用底部的空间。它可能是一个没有像@cryptic 所说的那样关闭的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:10:49.080

请在#header 中设置溢出：隐藏属性

```
#header{
   overflow: hidden;
} 
```

问题是标题标签中的这个元素 `<div id="maximenuck"> ..... </div>`

# ruby - OSX 中的 ruby mine 无法附加到 rdebug-ide 启动的会话

> ID：13909592
> 
> 赞同：1
> 
> 时间：2012-12-17T06:53:17.210
> 
> 标签：ruby, macos, debugging, rubymine

表面问题是： ruby​​mine 可以运行 ruby​​ 程序，但不能调试它们，也不能远程调试，我得到：

```
>> DIALOG: Connecting to debugger using 10 seconds 
```

大约 10 秒后

```
>> DIALOG: Cannot connect to the debugged process at port 57000 [a random port]
>>>         Dumping and destroying...
>>>         Error Output: 
>>>         Fast Debugger(ruby-debug-ide 0.4.17.beta14, ruby-debug-base19 0.11.30.pre10) listens on 127.0.0.1:57000
>> Please try increase timeout settings...(a long bullshit) 
```

我尝试通过阅读 ruby​​-debug-ide 和 ruby​​-debug-base19 代码找到根本原因，发现：

1.  ruby-debug-ide 已经启动了一个 DebugThread(@control_thread)，它将在 127.0.0.1 上启动一个 TCPServer 绑定并监听端口 57000。
2.  ruby-debug-ide 正在等待客户端连接到 tcp 服务器并向他发送“启动”命令`run_prog_script`
3.  我可以`telnet 127.0.0.1 57000`，然后调试线程说：从 127.0.0.1 连接...如果我在 telnet 中输入一个单词 'start\n'，rdebug-ide 将启动我的真实程序。
4.  Rubymine 没有连接到它并发送“开始”命令。（因为我在idea.log中没有找到任何输出）

我深入研究了idea.log：

```
Fast Debugger (ruby-debug-ide 0.4.17.beta14, ruby-debug-base 0.11.30.pre10) listens on   127.0.0.1:59598
at org.rubyforge.debugcommons.RubyDebuggerProxy.a(RubyDebuggerProxy.java:647)
at org.rubyforge.debugcommons.RubyDebuggerProxy.d(RubyDebuggerProxy.java:619)
at org.rubyforge.debugcommons.RubyDebuggerProxy.getCommandSocket(RubyDebuggerProxy.java:381)
at org.rubyforge.debugcommons.RubyDebuggerProxy.b(RubyDebuggerProxy.java:151)
at org.rubyforge.debugcommons.RubyDebuggerProxy.attach(RubyDebuggerProxy.java:112)
at org.jetbrains.plugins.ruby.ruby.debugger.impl.RubyDebugProcess.attachToProxy(RubyDebugProcess.java:190) 
```

然后我阅读了 debug-commons 代码（不如 ruby​​mine 准确，我参考[https://github.com/ruby-debug/debug-commons-java/blob/master/src/org/rubyforge/debugcommons/RubyDebuggerProxy.java](https://github.com/ruby-debug/debug-commons-java/blob/master/src/org/rubyforge/debugcommons/RubyDebuggerProxy.java)

```
private Socket attach() throws RubyDebuggerException {
  int port = debugTarget.getPort();
  String host = debugTarget.getHost();
  Socket socket = null;
  for (int tryCount = (timeout*2), i = 0; i < tryCount && socket == null; i++) {
    try {
          socket = new Socket(host, port);
          ...
    }
  }
} 
```

似乎 ruby​​mine 无法使用 debug-commons lib 在 localhost 打开套接字连接，我无法挖掘更多:(

顺便说一句，即使我们通过以下命令在 shell 中启动 ruby​​ 调试会话：

rdebug-ide --port 51202 -- path/to/my/script

rubymine 也无法连接到套接字。

**不要告诉我我应该使用另一个 ruby​​-debug-xxx gem 或者删除一些其他的 gem，比如 ruby​​-debug，我已经尝试过这些解决方案。**

我尝试过以下组：

第一组：

*   红宝石4.0.3
*   ruby-debug-base19-0.11.29
*   ruby-debug-ide-0.4.16

组2：

*   红宝石4.5.x
*   ruby-debug-base19-0.11.30.pre10
*   ruby-debug-ide-0.4.17.beta14

我的笔记本电脑是带有 OSX Lion 的 mac air

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:54:52.893

我遇到过同样的问题。我尝试了所有建议（删除 ruby​​-debug、行缓存等），但都没有奏效。就我而言，我的 macbook 的主机名设置为 localhost。我更改了我的主机名`sudo scutil --set HostName newHostName`，现在它可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T08:19:00.620

我应该使用远程调试器而不是本地调试。

首先，比较本地调试错误：

```
Error:

  Cannot connect to the debugged process at port 57000 [a random port]

  Dumping and destroying...

  Error Output: 
  Fast Debugger(ruby-debug-ide 0.4.17.beta14, ruby-debug-base19 0.11.30.pre10) listens on 127.0.0.1:57000

  Please try increase timeout settings...(a long bullshit) 
```

使用 debug-commons-java'代码：

```
private void failWithInfo(ConnectException e) throws RubyDebuggerException {
    String info = debugTarget.isRemote()
            ? "[Remote Process at " + debugTarget.getHost() + ':' + debugTarget.getPort() + "]"
            : Util.dumpAndDestroyProcess(debugTarget);
    throw new RubyDebuggerException("Cannot connect to the debugged process at port "
            + debugTarget.getPort() + " in " + timeout + "s:\n\n" + info, e);
} 
```

我在上面的错误输出中看不到任何 debugTarget.getHost() ，但如果我们远程调试它会告诉我主机。

所以我写了一个最简单的 ruby​​ 脚本（test.rb）：

```
i = 10
begin
  puts "echo ok #{i}"
  i += 1
  sleep 1
end until i > 600 
```

然后在默认配置下在 Ruby mine 中启动远程调试会话：

*   远程主机：本地主机
*   远程端口：1234
*   远程根文件夹：path/to/test
*   本地端口：26201
*   本地根文件夹：path/to/test

我发现 ruby​​mine 显示异常为：

```
Error:

  Cannot connect to debugged process at port 54321 in 10s:

  [Remote Process at **localhost**:54321] 
```

然后我将远程主机更改为“127.0.0.1”，完成！

所以我猜Rubymine会尝试使用“localhost”作为主机名连接到调试目标，但它失败了！

我试图找到调试目标主机的初始化位置，我在调试公共 RubyDebuggerFactory 中获得了这些代码：

```
private static RubyDebuggerProxy startDebugger(final Descriptor desc, final List<String> args, final int timeout)
        throws IOException, RubyDebuggerException {

   ...
    // 127.0.0.1 seemingly works with all systems and with IPv6 as well.
    // "localhost" and InetAddress.getLocalHost() have problems on some systems.
    // cf. http://www.netbeans.org/issues/show_bug.cgi?id=143273 for one case
    RubyDebugTarget target = new RubyDebugTarget(proxy, "127.0.0.1", desc.getPort(),
            pb.start(), desc.getDebuggeePath(), desc.getBaseDirectory());
    proxy.setDebugTarget(target);
    RubyDebuggerProxy.PROXIES.add(proxy);
    return proxy;
} 
```

反编译 ruby​​mine.jar 为 org.rubyforge.debugcommons.RubyDebuggerFactory，虽然是混杂的，但是我们可以发现：

```
 RubyDebugTarget rubydebugtarget = new RubyDebugTarget(rubydebuggerproxy, "127.0.0.1", descriptor.getPort(), processbuilder.start(), descriptor.getDebuggeePath(), descriptor.getBaseDirectory()); 
```

我认为 ruby​​mine 连接到 127.0.0.1 但没有足够的权限，所以我尝试通过以下命令启动 ruby​​ mine：

sudo /Applications/Rubymine.app/Contents/MacOSX/rubymine

但是还是失败了，所以是rubymine的一个bug，如果你和我一样有这么糟糕的体验，请使用远程调试器来避免它。

感谢[Dennis Ushakov关于计算机名称的提醒](https://stackoverflow.com/users/491092/dennis-ushakov)

# hadoop - hbase 表数据从本地导出到生产 hbase

> ID：13909593
> 
> 赞同：0
> 
> 时间：2012-12-17T06:53:41.173
> 
> 标签：hadoop, hbase

我打算将数据从本地 hbase 导出到我的生产 hbase 表，在这里我想将导出的数据附加到生产中。我怎样才能实现？我可以在生产中使用 hbase 导出 shell 命令和导入吗？它会将数据附加到现有表吗？有没有相同的工具？

```
$ bin/hbase org.apache.hadoop.hbase.mapreduce.Export <tablename> <outputdir> [<versions> [<starttime> [<endtime>]]]

$ bin/hbase org.apache.hadoop.hbase.mapreduce.Import <tablename> <inputdir> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:16:21.873

看[copyTable](http://hbase.apache.org/book/ops_mgt.html#copytable)

> CopyTable 是一个实用程序，可以将表的一部分或全部复制到同一个集群或另一个集群。

# android - 如何检查自定义列表是否具有特定行

> ID：13909595
> 
> 赞同：0
> 
> 时间：2012-12-17T06:53:55.800
> 
> 标签：android, arraylist

我制作了一个包含 2 列的联系人列表，即联系人姓名和联系电话，现在我想确保姓名应该只有一个条目以避免重复。这是我用来检查是否要添加的代码行是否已存在于自定义列表中：

```
if(m_localContactNameHolderArrayList.contains(inputProviderInstance.l_contactName.equals(name)))
   //Do something
else
// Do something else 
```

这`m_localContactNameHolderArrayList`是具有 2 列的数组列表和

`inputProviderInstance`是提供输入的类的实例`m_localContactNameHolderArrayList`

以下是 inputProviderInstance 类的代码：

```
static class InputProviderClass 
    {
        String l_contactName;
        String l_ContactNumber;
    public String getContactName()
    {
        return l_contactName;
    }
    public void setContactName(String contactName) 
    {
        this.l_contactName = contactName;
    }
    public String getContactNumber() 
    {
        return l_ContactNumber;
    }
    public void setContactNumber(String contactNumber) {
        this.l_ContactNumber = contactNumber;
    }
} 
```

我搜索了很多但没有任何想法。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:04:28.140

您只需要遍历列表并使用等号检查名称，因此：

```
boolean hasContact = false;
for(InputProviderClass ipc: m_localContactHolderArrayList){
    if(name.equals(ipc.getContactName()) hasContact = true;
}

if(hasContact) ... 
```

# c - 树莓派上的rodata

> ID：13909596
> 
> 赞同：4
> 
> 时间：2012-12-17T06:53:59.757
> 
> 标签：c, gcc, linker, raspberry-pi

我正在尝试在我的裸机操作系统上为 Raspberry Pi 创建一个简单的 printf 函数。

该函数现在为空：

```
int kprintf(const char *string, ...) {
} 
```

目前，我能够绘制到屏幕上。但是，我在调用此函数时遇到了问题。作为测试，我在调用 kprintf 之前在屏幕上画了几个字符。

如果我使用：

```
kprintf ("HELLO"); 
```

屏幕是空白的。但是，如果我使用：

```
kprintf ("HE"); 
```

一切都好。此时我唯一能想到的就是链接描述文件一定有问题。也许是rodata部分。

我正在使用剑桥 RPi 教程中修改后的链接器脚本：

```
STARTUP(crt0.o)

SECTIONS {
    .init 0x8000 : {
        *(.init)
    }

    .text 0x8080 : {
        *(.text)
        *(.rodata)
    }

    .data : {
        *(.data)
    }

    .bss : {
        *(.bss)
        *(COMMON)
    }

    /DISCARD/ : {
        *(*)
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T01:26:04.647

仅供参考，如果我使用此链接器脚本似乎没问题：

```
STARTUP(crt0.o)

SECTIONS {
    .init 0x8000 : {
        *(.init)
    }

    .text 0x9000 : {
        *(.text)
        *(.rodata)
        *(COMMON)
    }

    .data : {
        *(.data)
    }

    .bss : {
        *(.bss)
    }

    /DISCARD/ : {
        *(*)
    }
} 
```

希望这对将来的其他人有所帮助

# php - cakephp：从控制器检查 isunique

> ID：13909599
> 
> 赞同：0
> 
> 时间：2012-12-17T06:54:13.907
> 
> 标签：php, cakephp

我想检查控制器中的电子邮件/用户名是否唯一。我为 isUnique 编写了模型验证并且它有效。但我也想要一种在控制器中使用它的方法。就像是

```
$this->User->validates(array('email'=>'someemail@domain.com')); 
```

或者

```
$this->User->checkunique();
//is this the right way to write a different function again. 
```

我知道我可以使用控制器中的 findByEmail 并检查它是否返回空结果集。但我觉得有一种更简单的方法或已经可用的方式 cakephp 提供。如果我错了，请纠正我，让我指出在这种情况下的正确方法。

谢谢，基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:34:31.620

你已经看过烹饪书了吗？关于如何做到这一点有一个很好的解释：

[http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

把它们加起来。首先设置要验证的数据：

```
$this->User->set($data); 
```

然后验证它并传递一个字段列表以将验证限制在必要时：

```
$this->User->validates(array('fieldList' => array('email'))); 
```

是否将其包装在自定义模型方法中完全取决于您，尽管从[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的角度来看，这样做是个好主意。

# xpath - Webdriver 中 selenium.isElementPresent 的替代方法是什么

> ID：13909600
> 
> 赞同：5
> 
> 时间：2012-12-17T06:54:26.343
> 
> 标签：xpath, webdriver, selenium-webdriver

嗨，我需要检查一个下拉字段是否具有给定值，但未选择这些值，因此它不会显示在下拉框中。我有以下元素的 Xpath

```
//table[contains(@id,'Field')]//tr[td//span[text()='Code']]/preceding-sibling::*[1]/td//select[contains(@id,'GSRCH_FLT')]/option[text()='not='] 
```

这是在浏览器中正确识别元​​素。但是当我使用下面的 webdriver 方法来验证它时

```
driver.findElement(By.xpath("//table[contains(@id,'Field')]//tr[td//span[text()='Code']]/preceding-sibling::*[1]/td//select[contains(@id,'GSRCH_FLT')]/option[text()='not=']")).isDisplayed(); 
```

它返回false，因为它没有显示在框中。

你能告诉我这个的替代方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T12:02:04.133

你要：

```
private boolean isElementPresent(WebDriver driver, By by){
    return driver.findElements(by).count != 0;
} 
```

`findElements()`这比`findElement()`因为如果元素不存在它不会等待更好。如果您在打开隐式等待的情况下运行，`findElement()`则会超时寻找元素（这是您要捕获的异常），并且需要一段时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T07:08:48.753

我发现 WebDriver 没有一个名为`isElementPresent()`. 这是 Selenium-1.0 中使用的重要功能之一。要在 WebDriver 中实现这一点，您只需要编写如下所述的方法。然后，您可以将此函数与任何类型的`By`（By.id、BY.name 等）一起使用

```
private boolean isElementPresent(WebDriver driver, By by){
  try{
    driver.findElement(by);
    return true;
  }catch(NoSuchElementException e){
    return false;
  }
} 
```

这是一个如何调用此函数的示例

```
if (isElementPresent(by.id("btnSubmit")) {
   // preform some actions
} 
```

如果在页面上找到该元素，上述函数将返回 true，否则将返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T02:16:22.927

```
 internal static bool IsElementPresent(IWebDriver driver, By by, int timeoutSeconds=10)
    {

        for (int second = 0; second< timeoutSeconds ; second++)
        {
            try
            {
                driver.FindElement(by);
            }
            catch (NoSuchElementException e)
            {
                Thread.Sleep(1000);
                continue;
            }

            return true;
        }

        return false;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-06T03:12:07.193

使用**isDisplayed()**来验证页面上的元素是否可用。

# hadoop - 为什么我们需要 Hadoop 无密码 ssh？

> ID：13909603
> 
> 赞同：16
> 
> 时间：2012-12-17T06:54:32.377
> 
> 标签：hadoop, mapreduce

*   AFAIK，需要无密码 ssh，以便主节点可以在每个从节点上启动守护进程。除此之外，Hadoop 的操作是否有无密码 ssh 的用途？

*   用户代码 jar 和数据块如何跨从节点传输？我想知道使用的机制和协议。

*   无密码 SSH 应该只为主从对配置，甚至在从属之间配置？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T12:40:04.813

你是对的。如果 ssh 不是无密码的，您必须在每台机器上手动启动所有进程。对于第二个问题，HDFS 中的所有通信都通过 TCP/IP 进行，并且使用 HTTP 进行数据移动。机制是这样的：

> 客户端与 NameNode 机器上的可配置 TCP 端口建立连接。它与 NameNode 对话 ClientProtocol。DataNode 使用 DataNode 协议与 NameNode 对话。远程过程调用 (RPC) 抽象包装了客户端协议和数据节点协议。

而对于第三个问题，从节点之间不必有无密码的 ssh。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-09T17:55:52.827

**回答第一个问题：**

Hadoop 核心使用 Shell (SSH) 在从节点上启动服务器进程。它需要主机与所有从机和辅助机器之间的无密码 SSH 连接。

我们需要在全分布式环境中使用无密码 SSH，因为当集群处于 LIVE 状态并在全分布式环境中运行时，通信过于频繁。作业跟踪器应该能够快速将任务发送到任务跟踪器。

# java - 如何从其他文本字段中获取文本字段中的 int 值

> ID：13909614
> 
> 赞同：1
> 
> 时间：2012-12-17T06:55:50.417
> 
> 标签：java, swing

我是java新手。我创建了一个项目，其中有一个 textField 和一个按钮。我为按钮制作功能，在那里我开始我的其他功能，没关系。但我需要从 textField 中获取数值作为我的函数的参数......

```
b1.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                 int price;
                 int quantity = Integer.parseInt(tf2.getText());
                 int totalamount = price*quantity;
              //need to insert this total amout into textfield tf4 //

             tf4.getText(totalamount); //showing error ;   

            }

        }); 
```

请帮帮我，提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:04:28.027

这很简单......
您可以从文本字段中获取整数值，例如

> int totalamount = Integer.parseInt(tf2.getText());

getText() 方法用于从文本字段中获取值，如果该值是整数，则可以像 Integer.parseInt 一样解析它，如果该值是字符串，则可以使用 toString() 方法获取该值。

你可以像这样设置这个值

```
 tf4.setText(String.valueOf(totalamount)); 
```

setText() 方法用于将文本设置为 Textfield。

您可以在函数调用中将此值用作参数来调用函数，例如

```
myFunction(totalAmount);// function declaration 
```

并在函数定义中使用此值，例如

```
 public void myFunction(int totalamount)// Function Defination 
```

您必须阅读 Basic Java。[这是可以帮助您的链接](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:03:11.350

```
 b1.addActionListener(new ActionListener(){ 
    public void actionPerformed(ActionEvent e) { 
       int price; 
       int quantity = Integer.parseInt(tf2.getText()); 
       //int totalamount = price*quantity; 
       //need to insert this total amout into textfield tf4 //

       tf4.setText(totalamount); //showing error ;   

    }

 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:10:38.977

只需替换您的这一行

```
tf4.getText(totalamount); 
```

通过这个

```
tf4.setText(Integer.toString(totalamount)); 
```

或
`tf4.setText(totalamount);`
因为`TextField`有为 和 设置文本的方法`Strings`过多`int`。

请记住，您永远不会从 getter 方法传递值（按照 Java 的约定）。只有参数可以从 setter 方法传递（如果我们在 Beans 意义上或其他意义上考虑它们）。请遵循一些基础知识Java[在这里](http://www.oracle.com/technetwork/java/index-138747.html)和[这里](http://www.cs.usfca.edu/~parrt/doc/java/JavaBasics-notes.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T08:03:16.113

```
b1.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e)
{ 
    //put the try catch here so if user didnt put an integer we can do something else
    try
    {
        int price;
        int quantity = Integer.parseInt(tf2.getText());
        int totalamount = price*quantity;

        //need to insert this total amout into textfield tf4 //

        tf4.setText(totalamount);
    }
    catch(NumberFormatException ex)
    {
          //do something like telling the user the input is not a number
    }   

}}); 
```

# java - 如何在实体类中保存一个类？

> ID：13909615
> 
> 赞同：0
> 
> 时间：2012-12-17T06:56:01.410
> 
> 标签：java, google-app-engine, class, datastore

我在实体类中创建对象时遇到了一些麻烦。我得到以下异常：

> java.lang.IllegalArgumentException: A: name.A 不是受支持的属性类型

这是一个小代码示例：

这是我的实体 B 类：

```
@Entity
public class B {        
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    private ArrayList<A> token = new ArrayList<A>();

    public Profile() {
        this.token.add(new Token(1));
        this.token.add(new Token(2));
        this.token.add(new Token(3));
        this.token.add(new Token(4));
    }
} 
```

这是我的标准A类：

```
public class A {
    private Integer id = new Integer(0);

    public A(int id) {
        this.id = id;
    }
} 
```

我将 B 类保存在数据存储中。我在以下点得到异常：

```
profile = new Profile();
em.persist(profile);
em.close(); //Exception 
```

如果我在 B 类中评论令牌对象，一切正常。我如何在 B 中使用 A 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:44:39.543

我认为问题在于 A 类没有被确定为要管理的实体。你能在A类的顶部使用以下注释并查看。

```
@Embeddable
public class A 
```

# joomla - 如何将字符串添加到 joomla 标头？

> ID：13909622
> 
> 赞同：1
> 
> 时间：2012-12-17T06:56:41.387
> 
> 标签：joomla

我知道`JFactory::getDocument();`我可以在标题中添加一些 JS 代码，但是目前我需要添加这种行`<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]-->`是否有一些默认方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:19:34.747

您可以使用 Jdocument 执行此操作：

```
$document=JFactory::getDocument();
$customtag='<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]--> ';
$document->addCustomTag( $customtag); 
```

# android - 在andengine中集成Swarm

> ID：13909627
> 
> 赞同：0
> 
> 时间：2012-12-17T06:57:05.060
> 
> 标签：android, andengine

我正在尝试将 Swarm 集成到我的游戏中，但它不起作用，我正在使用andengine GLES2。我想要的只是一个排行榜集成，如果我将它作为一个单独的活动来扩展 SwarmActivity（如果它有效），但我想将它集成到 BaseGameActivity 中。

谢谢你。

```
public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback) throws Exception {
    // TODO Auto-generated method stub

    //Cargo la escena del Cargando
    mScene = new Scene();
    mScene.setBackgroundEnabled(false);
    mScene.attachChild(new Sprite(0, 0, mSplashBackgroundTextureRegion, this.getVertexBufferObjectManager()));       

    this.mScene.setOnSceneTouchListener(this);
    this.mScene.setTouchAreaBindingOnActionDownEnabled(true);      

    Swarm.init(this, SWARM_APP_ID, SWARM_APP_KEY, mySwarmLoginListener);

    Swarm.setActive(this);

    pOnCreateSceneCallback.onCreateSceneFinished(this.mScene);

}

public boolean onSceneTouchEvent(Scene arg0, TouchEvent arg1) {
    // TODO Auto-generated method stub              

    SwarmLeaderboard.getLeaderboardById(LEADERBOARD_ID, new GotLeaderboardCB() {
        public void gotLeaderboard(SwarmLeaderboard leaderboard) {

            if (leaderboard != null) {

                // Save a local reference to the leaderboard
                SwActivity.leaderboard = leaderboard;

                // Submit the score to the leaderboard 
                SwActivity.leaderboard.submitScore(1000f);

                SwActivity.leaderboard.showLeaderboard();
            }
        }
    }); 

    return false;
}
public void onResume() {
    super.onResume();
    Swarm.setActive(this);              
}

public void onPause() {
    super.onPause();
    Swarm.setInactive(this);
}

private SwarmLoginListener mySwarmLoginListener = new SwarmLoginListener() {

    public void loginCanceled() {
        // TODO Auto-generated method stub

    }

    public void loginStarted() {
        // TODO Auto-generated method stub

    }

    public void userLoggedIn(SwarmActiveUser user) {
        // Load our Leaderboard
        SwarmLeaderboard.getLeaderboardById(LEADERBOARD_ID, new GotLeaderboardCB() {
            public void gotLeaderboard(SwarmLeaderboard lb) {
                leaderboard = lb;
            }
        });         

    }

    public void userLoggedOut() {
        // TODO Auto-generated method stub          
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:13:33.430

扩展 SwarmActivity 只需添加对 Swarm.setActive(context) 的调用，并作为 onCreate、onResume 和 Swarm.setInactive(context) 的一部分作为 onPause 的一部分。如果您可以掌握上下文的句柄，您应该能够自己在等效的地方进行这些调用。

如果您想要一个使用 AndEngine + Swarm 的完全开源的自定义示例，这里有一个可用的示例：http: [//swarmconnect.com/admin/docs/kissthefish](http://swarmconnect.com/admin/docs/kissthefish)。如果这仍然没有意义，请发送电子邮件至 support(at)swarmconnect[dot]com，有人会从那里帮助您:)。

干杯!

# c# - 无形式处理activeX

> ID：13909629
> 
> 赞同：-2
> 
> 时间：2012-12-17T06:57:11.310
> 
> 标签：c#, activex, wcf-data-services, credit-card

我得到了一个项目，在该项目中我必须使用没有表单的 activeX 控件。

该 activex 控件属于 Card swiper 设备。所以我要做的是，创建一个休息服务，任何浏览器客户端都可以通过它访问卡的刷卡数据。

所以我创建了一个 webservice 方法，它在请求到来时创建一个新的 sta 线程。在这个 sta 线程中，我创建如下所示的 ActiveXcontrol，并将数据存储在静态类中。再次对于第二个请求，我做同样的事情。

```
try
{
    axOPOSMSR1 = new AxOposMSR_CCO.AxOPOSMSR();
    axOPOSMSR1.CreateControl();
    if (axOPOSMSR1.Open("IDTECH_SECUREMAG_USBHID") == 0)
    {
        axOPOSMSR1.ClaimDevice(100);
        axOPOSMSR1.DeviceEnabled = true;
        axOPOSMSR1.DataEventEnabled = true;
        axOPOSMSR1.DecodeData=true;
        axOPOSMSR1.ParseDecodeData = true;

        while (!Devicedisable && (axOPOSMSR1.Track1Data == ""))
        {
        }

        axOPOSMSR1.ClearInput();
        axOPOSMSR1.ReleaseDevice();
        axOPOSMSR1.Close();
        axOPOSMSR1.Dispose();
        axOPOSMSR1.ContainingControl = null;
        axOPOSMSR1 = null;
        GC.Collect();
    } 
```

这个程序第一次运行良好，但是一旦我发出另一个请求（创建另一个线程），就没有任何数据作为数据存储在（静态类）中。

我在第一个请求送达后提出第二个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:21:47.573

我对您的问题的理解是：

*   您使用新线程创建了 Swiper 类的对象。
*   现在您正在`Chipper`使用服务访问数据`WCF`。

我没有这样的硬件设备，但请你把

```
Thread.sleep(10000); 
```

在`while`条件之后告诉我输出。

# perl - “我的 ($self, %myInputs) = @_;” 是什么意思？意思是？

> ID：13909632
> 
> 赞同：7
> 
> 时间：2012-12-17T06:57:23.890
> 
> 标签：perl, perl-module

我在 perl 模块中多次遇到这条线，但我无法弄清楚这到底意味着什么。

```
my ($self, %myInputs) = @_; 
```

请解释我的声明，以便我可以继续。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T07:00:22.273

我猜这是**类方法函数**中的第一行之一。该行解析`@_`函数[**参数列表**](https://stackoverflow.com/a/4563516/1520364)，并**提取第一个参数**，该参数始终是**对对象的引用，**并将`$self`其余参数提取到**哈希** `%myInputs`中。这当然假设函数是用哈希格式的参数调用的，就像下面的 Perl/Tk 函数

```
$mw->Button(-text => "RIGHT", -command => sub { exit })
  ->pack(-side => 'right', -fill => 'both'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T07:15:48.763

> 我的 ($self, %myInputs) = @_;

并非所有函数都接收第一个参数`$self`。事实上，按照惯例，只有那些使用箭头操作符调用的才会这样做`->`；隐式调用`->`会发送一个引用该对象的特殊参数。perl 中的所有函数和方法都以相同的方式声明（使用关键字`sub`）。只有调用确定函数是否是方法。

这`my ($foo, $bar) = ( $x, $y );`称为并行分配。这就是这里发生的一切！

观察可以从 Perl 中的数组初始化散列。

```
my @foo = qw/ foo bar baz quz /;
my %hash = @foo;
print $hash{foo}; # outputs bar 
```

因为您分配给 hash `%myInputs`，所以哈希被显式分配给*所有不是隐式发送的输入*（因为您将那个输入拉到`$self`）。但是请注意，执行以下操作没有多大意义？

```
my @foo = qw/ foo bar baz /;
my %hash = @foo;
print $hash{baz} # what is this set too?? 
```

出于同样的原因，使用不均匀数量的参数调用您的函数也没有多大意义！两者都会产生警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-18T14:58:14.867

在 Perl`@_;`中是一个全局数组特殊变量

类似于`@ARGV`数组包含用于脚本的命令行参数。

所以在`my ($self, %myInputs) = @_;`

`@_`将表示`$`Hash-Variables 中变量的参数`%`

# .htaccess - OpenCart 产品页面显示首页

> ID：13909643
> 
> 赞同：1
> 
> 时间：2012-12-17T06:58:13.850
> 
> 标签：.htaccess, url, opencart, product

我的问题是，在我的**OpenCart**网站上，应该显示产品的页面改为显示主页。然而，这比它过去的做法更上一层楼，它只给出了我的**404 错误**。我也在使用我自己的域，但它位于一个文件夹中，即**domain.com/store/** 感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:53:15.097

我认为产品没有很好地列出，产品页面中肯定有一些错误。

尝试更改产品数据，在您的数据库中或访问您的 OC 网站的管理面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:12:12.483

最可能的原因是 SEO URL 重写，但默认情况下它不会使用`common/home`，除非您将其设置为这样做。检查文件`.htaccess`中 OpenCart 附带的匹配内容，`.htaccess.txt`并确保您`RewriteBase`的设置为`/store/`不`/`

# php - 带有 PHP 邮件功能的奇怪外来字符

> ID：13909644
> 
> 赞同：-1
> 
> 时间：2012-12-17T06:58:17.250
> 
> 标签：php, html

我已经在网上搜索了这个，但似乎找不到答案。我知道 mail() 不是最好的，但我想使用它来方便。

我正在使用 mail() 和 file_get_contents 发送基本的 html 电子邮件，但是在 Apple Mail 中查看时，发送的电子邮件在消息摘要中看起来像是中文字符。不幸的是，作为新用户，我无法发布图像。

我将邮件发送到在 Apple Mail 中查看的 gmail 帐户，因此摘要显示在主题行下方。当我实际查看电子邮件时，没有中文字符。我真的很想摆脱这些奇怪的角色，并感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:14:11.720

获取中文字符的一种常见方法是将一些英文文本采用常见的 8 位编码（Ascii、ISO-8859-1、windows-1252 等），并将其误解为 UTF-16 编码. 这样，您可以将例如“ab”（即 U+0061 U+0062）转换为 U+6162 或 U+6261（取决于字节序），即转换为慢或扡。

因此，问题很可能与字符编码有关。没有进一步的信息，就不可能说出真正发生的事情。要分析情况，最好先测试，不涉及gmail，这很可能是这里的罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:15:05.963

> 我知道 mail() 不是最好的

这是一个非常有启发性的评论。

总是有多种方法可以解决不重要的问题，并且不同的方法具有不同的优势/风险/问题。对于大多数用途，mail() 是从 PHP 应用程序发送电子邮件的理想方式。

然而，通过 SMTP 发送 HTML 电子邮件绝非易事。您需要详细了解 mime 和字符编码。解释这些远远超出了 SO 答案的范围。

要么花几个星期阅读该主题并使用各种用户代理进行实验（微软甚至无法做到这一点 - 分号分隔符，糟糕的笑脸处理）或使用诸如[swiftmailer](http://swiftmailer.org/)或[phpmailer](http://phpmailer.worxware.com/)之类的工具。

# mysql - mysql2 gem 可以与 Rails 中的 Postgres 数据库一起使用吗

> ID：13909645
> 
> 赞同：0
> 
> 时间：2012-12-17T06:58:22.167
> 
> 标签：mysql, ruby-on-rails, postgresql

我目前正在使用 MySQL 数据库，并且正在考虑将来迁移到 Postgres。在我的代码中，我有：

```
client = Mysql2::Client.new(:host => "#{DB_HOST}", :username => "#{DB_USERNAME}",
:password => "#{DB_PASSWORD}", :database => "#{DB_NAME}")
sql = "SELECT /*complicated query with joins */ ASC"
data_setter = client.query(sql) 
```

我担心如果我迁移到 Postgres，我将无法再使用 Mysql2 gem 并执行类似于上面代码的查询。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:12:00.503

你可以做同样的事情，但你必须切换到[`pg`gem](http://rubydoc.info/gems/pg/frames)，因为 Mysql2 只知道如何与 MySQL 对话。界面类似：

```
db  = PG::Connection.new(...)
sth = db.query('select /* big complicated pile of SQL */')
sth.each { |row| do_things_with_row(row) } 
```

通常，您可以通过 ActiveRecord 处理大多数事情（甚至是原始 SQL 查询），但如果您需要绕过所有这些并直接与数据库对话，那么您可以。你可能对 PostgreSQL 有一些问题，但它并不代表 MySQL 会出现的那种草率。

# java - Hibernate 在更新前缓存持久对象。

> ID：13909651
> 
> 赞同：0
> 
> 时间：2012-12-17T06:58:43.547
> 
> 标签：java, hibernate

我是 Hibernate 的新手，我的问题很简单。持久化课程对象由 Hibernate 缓存。

我希望用户编辑**课程**并在数据库中更新它。它可以修改数据库中的记录，但是，当我完成更新并重定向到显示**课程**信息的操作时。页面会在更新前缓存**课程信息。**

假设我将持续时间从 3 编辑到 30 。并重定向到信息页面，持续时间将为 3 ，当我刷新时，持续时间将再次为 3 。但是当我再次刷新时，持续时间将是 30。3- **>3->30->3->3->30**等等。但数据库记录实际上是 30。

我已经想到了一个解决方案，`session.clear`每次我想检索数据库记录时清除会话缓存。但我想知道这是否是一个好的解决方案。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package short_course_db;

import java.util.List;
import org.hibernate.Query;
import org.hibernate.Session;

/**
 *
 * @author jason
 */
public class CourseDAO {

    Session session = null;

    public CourseDAO() {
        this.session = HibernateUtil.getSessionFactory().getCurrentSession();
    }

    public List<Course> getCoursesByKeyWord(String keyword) {
        List<Course> courses = null;
        try {
            session.beginTransaction();
            keyword = "'%" + keyword + "%'";
            Query q = session.createQuery("from Course as course where course.description like " + keyword);
            courses = q.list();

        } catch (Exception e) {
            e.printStackTrace();
        }

        return courses;
    }

    public Course findCourse(int id) {
        Course course = null;
        try {
            session.beginTransaction();
            Query q = session.createQuery("from Course as course where course.id=" + id);
            course = (Course) q.uniqueResult();

        } catch (Exception e) {
            e.printStackTrace();
        }

        return course;
    }

    public List<Course> all() {
        List<Course> courses = null;
        try {
            session.beginTransaction();
            Query q = session.createQuery("from Course order by id");
            courses = q.list();

        } catch (Exception e) {
            e.printStackTrace();
        }

        return courses;
    }

    public void updateCourse(Course course) {
        try {
            session.beginTransaction();
            session.update(course);
            session.getTransaction().commit();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void saveCourse(Course course) {

        try {

            session.beginTransaction();
            session.save(course);
            session.getTransaction().commit();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:45:21.520

您应该检查**几**件事以确保问题是由 Hibernate 引发的。

1.  你确定你的浏览器缓存被禁用了吗？如果没有，您是否在刷新前清除了它的缓存？
2.  如果您确定第 1 步，您可能需要禁用休眠缓存：

    ```
    session.setCacheMode(CacheMode.IGNORE) 
    ```

3.  如果不是第 2 步，则可能`flush`需要 a 来提交对 DB 的更改。*这种情况发生在您的步骤发生在事务中时*

    ```
    session.flush() 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:48:55.460

您是否尝试过 session.flush(); 方法？也许会有所帮助。

# excel - 在运行时从gridview中的excel导入数据并在gridview中进行更改在运行时将其保存回excel

> ID：13909653
> 
> 赞同：1
> 
> 时间：2012-12-17T06:58:53.243
> 
> 标签：excel, c#-4.0

我在数据网格视图中显示值，从 excel 表中获取数据，现在我想在运行时从 gridview 中添加、删除数据，相同的更改应该反映在 excel 表中我该怎么做，请帮助我想采取复选框列 bt 如何在运行时检索检查的值以及我必须在 DGV 的 excel 中的确切位置插入的值。

# templates - 在 Grails 域类中定义表头以生成视图

> ID：13909655
> 
> 赞同：0
> 
> 时间：2012-12-17T06:59:08.770
> 
> 标签：templates, grails, scaffolding

我希望能够在域类中定义视图表头。我考虑过创建一个名为 inTable 的瞬态属性，然后在脚手架模板中遍历它的值。这是一个瞬态属性：

```
List inTable=['cardId','fullName','dateOfBirth','sex','bloodGroup','civilStatus','status'] 
```

现在如何在我的脚手架模板中获取 inTable 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:49:26.667

1.  使其成为您的域类的静态字段。

2.  看看常规脚手架迭代类属性的方式。（[`grails install-templates`](http://grails.org/doc/latest/ref/Command%20Line/install-templates.html)如果你还没有，请运行）

3.  访问`domainClass.getClazz().inTable`。

# build - 为不同目录中的构建和源创建 Sublime Text 构建系统

> ID：13909660
> 
> 赞同：0
> 
> 时间：2012-12-17T06:59:13.743
> 
> 标签：build, sublimetext2

我有一个项目，其构建和源目录不同。我想创建一个[构建系统](http://docs.sublimetext.info/en/latest/reference/build_systems.html)`build`，当我在目录中编辑时，它将在目录中构建`source`。

假设我有这个目录结构：

*   /home/dbw/src*源文件。*
*   /home/dbw/bld*构建文件。*

*（令人震惊和独特的命名系统，我知道 - 让我们掌声直到结束，好吗？）*

构建嵌套了很多层，目录结构是对称的。从 中的目录`source`，我希望 Sublime 在相关`build`目录中开始构建。例如，如果我正在编辑 /home/dbw/src/foo/Makefile，我希望 make 在 /home/dbw/bld/foo 中执行。我试过这个：

```
{
  "cmd": ["make"],
  "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
  "working_dir": "/home/dbw/bld/${file_path/$project_path//}",
  "selector": "source.makefile",

  "variants":
  [
    {
      "name": "Clean",
      "cmd": ["make", "clean"]
    },
    {
      "name": "Test",
      "cmd": ["make", "test"]
    }
  ]
} 
```

我的 .sublime-project 在 /home/dbw/src

我也尝试使用`"working_dir": "/home/dbw/bld/${file_path/\/home\/dbw\/src//}"`.

在我看来，问题在于我没有正确转义替换表达式中的斜杠。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:19:56.140

我这样做了，它有效。

```
"working_dir": "/home/dbw/bld${file_path/.home.dbw.src//}" 
```

不过，这对我来说似乎还是有点不雅。

# javascript - ReferenceError：找不到变量：应该改为调用方法

> ID：13909663
> 
> 赞同：0
> 
> 时间：2012-12-17T06:59:30.463
> 
> 标签：javascript

我尝试每 5 秒请求一次 URL。以下代码正在返回`ReferenceError: Can't find variable: validateUserTime`

```
$(document).ready(function() {
  ({
    validateUserTime: function() {
      return $.get('/myurl', function(data) {});
    }
  });
  return window.setInterval((function() {
    validateUserTime();
  }), 5000);
}); 
```

我想知道我做错了什么是阻止调用该方法而不是将其作为变量来执行。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:03:29.260

这只是定义了一个匿名对象并将其丢弃：

```
({
  validateUserTime: function() {
    return $.get('/myurl', function(data) {});
  }
}); 
```

那没有定义`validateUserTime`函数或方法。你想要这样的东西：

```
var validateUserTime = function() {
  return $.get('/myurl', function(data) {});
}; 
```

也许：

```
function validateUserTime() {
  return $.get('/myurl', function(data) {});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:04:11.960

在第一个语句中，您使用的是对象文字而不将其分配给任何东西。将其分配给某些东西以修复它。

```
$(document).ready(function() {
  var functions = {
    validateUserTime: function() {
      return $.get('/myurl', function(data) {});
    }
  };
  return window.setInterval((function() {
    functions.validateUserTime();
  }), 5000);
}); 
```

# javascript - 单击按钮更改样式表

> ID：13909664
> 
> 赞同：0
> 
> 时间：2012-12-17T06:59:34.840
> 
> 标签：javascript, jquery, asp.net, html, css

我想更改我网页的主题，我需要为 asp.net 页面做这件事。改变网页外观的最佳方法是什么。就像换主题一样。请建议方法并解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:29:17.763

Asp.net Skins 是改变网站布局和风格的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:06:31.677

您将需要使用多个包含 css/skins 特定实现的 ASP.NET 主题。为了更改页面的主题属性，您可以在 Page_PreInit 事件中进行。只需在运行时为 Page.Theme 属性分配所需的主题名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:21:48.927

```
<link href="style.css" rel="stylesheet" type="text/css" id="mycss" />

$(document).ready(function() 
{
   $('#mycss[rel=stylesheet]').attr('href', 'style2.css');
}); 
```

# jquery-ui - jQuery UI：如何在可放置元素上成功放置时取消可排序元素的还原？

> ID：13909665
> 
> 赞同：3
> 
> 时间：2012-12-17T06:59:35.307
> 
> 标签：jquery-ui, jquery-ui-sortable, jquery-ui-draggable, jquery-ui-droppable

我有一个`sortable`列表，其中有几个元素需要用户重新排序。

或者，也可以将元素拖到 5 个可用的放置区（`droppable`容器）上。

我遇到的问题是：当在一个`droppable`区域上成功完成拖放时，的恢复动画`sortable`仍在播放动画，将拖放的元素重新放入`sortable`列表中。

相反，我想以一种方式对其进行动画处理，即从发生的位置获取助手然后`drop`动画*到*`droppable`区域中，有点像在 Mac 上将文件拖到垃圾箱中。

为了让后者工作，但我需要：

1.  成功放置后，停止还原动画。
2.  复制拖放元素的坐标并将自定义动画启动到可拖放元素的中心。

问题在第 (1) 部分中，`draggable`允许打开“无效”或“有效”标志，`revert`但`sortable`不允许。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:00:20.297

所以经过一番来回后，我设法通过克隆原始`ui.helper`元素（`sortable`创建）并使用这个克隆（显然没有被还原）来完成自定义动画序列，同时删除原始助手和占位符（由 创建`sortable`）隐藏`sortable`的还原动画。

它不像我希望的那样干净，因为我实际上仍然让`sortable`' 的 revert 函数执行（而不是取消它），但直到有人有更好的想法它才有效。

下面的代码：

```
// default sortable interaction/setup.
$('.sortable-list').sortable({
  placeholder: 'sortable-list__item sortable-list__item--placeholder',
  revert:      true,
  helper:      'clone',
  tolerance:   'pointer',
  connectWith: '.sortable-list',
  appendTo:    'body',
  zIndex:      1000
});

// dropzone interaction will grab the ui.helper from sortable clone it and then
// reuse it for it's own finish animation while removing the helpers from the
// sortable list and dom.
$('.dropzone')
  .droppable({
    accept:      '.sortable-list__item',
    hoverClass:  'dropzone--hover',
    activeClass: 'dropzone--active',
    tolerance:   'pointer'
  })
  .on('drop', function(event, ui) {
    var $item   = ui.draggable, // this is the original item.
        $helper = ui.helper;    // this is the cloned item the user drags

    // clone the helper instance and position it in the same exact spot where
    // the user had left it using the ui.position
    // (or ui.offset depending on your nesting/positioning of the helper)
    var $clone  = $helper.clone().css({ 
          "position": "absolute",
          "top":      ui.position.top,
          "left":     ui.position.left
        }).appendTo('body');

        // cleanup the original helper (remove from stage) and hide placeholder
        // elements. We're hiding the latter because the revert callback of 
        // sortable is removing it for us and will otherwise throw an error that
        // the placeholder can't be removed because it no longer exists in the DOM.
        $helper.remove();
        $('.sortable-list__item--placeholder').hide();

    // launch into your own animation sequence using the $clone of $helper
    // and process the drop data accordingly.

  }); 
```

# c# - 如何在gridview中只选中一个复选框

> ID：13909667
> 
> 赞同：0
> 
> 时间：2012-12-17T06:59:40.360
> 
> 标签：c#, asp.net

我正在使用gridview，我的问题是如果用户选择第二个复选框，则用户只能在网格中选择一个复选框，我们将取消选中。我尝试使用 javascript，但这对我不起作用，请您帮帮我，我该怎么做。下面是我的网格视图

```
 <data:EntityGridView ID="gvService" Width="100%"  DataKeyNames="PriceSystemID" runat="server"
                                            OnRowEditing="GridView1_RowEditing" OnRowCommand="gvServices_ItemCommand" AutoGenerateColumns="False"
                                            OnRowDeleting="gvService_RowDeleting" ShowFooter="true" OnRowCancelingEdit="gvService_RowCancelingEdit" 
                                            >
                                            <Columns>
                                                <asp:TemplateField HeaderText="Service">
                                                    <ItemTemplate>
                                                        <data:EntityDropDownList runat="server" ID="dataServiceTypeId1"  DataSourceID="ServiceTypeIdServiceTypesDataSource"
                                                            DataTextField="Description" DataValueField="ServiceTypeId" SelectedValue='<%# Bind("ServiceTypeID") %>' Width="200px"
                                                            AppendNullItem="true" Required="true" NullItemText="< Please Choose ...>" ErrorText="Required" />
                                                        <data:ServiceTypesDataSource ID="ServiceTypeIdServiceTypesDataSource" runat="server"
                                                            SelectMethod="GetAll" />
                                                    </ItemTemplate>
                                                    <EditItemTemplate>
                                                        <data:EntityDropDownList runat="server" ID="dataServiceTypeId2" DataSourceID="ServiceTypeIdServiceTypesDataSource"
                                                             DataTextField="Description" DataValueField="ServiceTypeId" Width="200px" AutoPostBack="true"
                                                            SelectedValue='<%# Bind("ServiceTypeID") %>' AppendNullItem="true" Required="true"
                                                            NullItemText="< Please Choose ...>" ErrorText="Required" />
                                                        <data:ServiceTypesDataSource ID="ServiceTypeIdServiceTypesDataSource" runat="server"
                                                            SelectMethod="GetAll" />
                                                    </EditItemTemplate>
                                                    <FooterTemplate>
                                                      <data:EntityDropDownList runat="server" ID="dataServiceTypeId3" DataSourceID="ServiceTypeIdServiceTypesDataSource"
                                                            AutoPostBack="true" DataTextField="Description" DataValueField="ServiceTypeId" Width="200px"
                                                            SelectedValue='<%# Bind("ServiceTypeID") %>' AppendNullItem="true" Required="true"
                                                            NullItemText="< Please Choose ...>" ErrorText="Required" />
                                                        <data:ServiceTypesDataSource ID="ServiceTypeIdServiceTypesDataSource" runat="server"
                                                            SelectMethod="GetAll" />
                                                    </FooterTemplate>
                                                </asp:TemplateField>
                                                <asp:TemplateField HeaderText="Default">
                                                    <ItemTemplate>
                                                        <asp:CheckBox ID="chkDefault" Checked='<%# Bind("IsDefault") %>'   
                                                            runat="server" />
                                                    </ItemTemplate>
                                                    <EditItemTemplate>
                                                        <asp:CheckBox ID="chkDefault" Checked='<%# Bind("IsDefault") %>' runat="server"   />
                                                    </EditItemTemplate>
                                                    <FooterTemplate>
                                                      <asp:CheckBox ID="chkDefault" Checked='<%# Bind("IsDefault") %>' runat="server"   />

                                                    </FooterTemplate>
                                                </asp:TemplateField> 
```

' CausesValidation="false">

```
 <EmptyDataTemplate>
 </EmptyDataTemplate>

    </data:EntityGridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:04:41.507

一个基本问题（可能是您的答案）：如果用户只能选择一个，为什么要使用复选框。使用带有适当分组的单选按钮，浏览器将处理单选。希望我足够清楚。当用户有多个选项可供选择时，使用复选框，否则，使用单选按钮进行单选。

# c# - 使用 JSON.net 反序列化 JToken 结果

> ID：13909674
> 
> 赞同：0
> 
> 时间：2012-12-17T07:00:18.223
> 
> 标签：c#, json.net

使用 Newtonsoft JSON.net，我得到以下 JToken 结果：

```
"60": {
  "maps": false,
  "real_time": false,
  "video_pack_results": {},
  "indented": 0,
  "blog_posts": false,
  "description": "A LONDON household is celebrating a U-turn by an insurance company that   means the occupants no longer have to foot half a pounds 25000 bill for ...",
  "base_url": "www.independent.co.uk",
  "place_pack": {},
  "dirty_url": "/url?q=http://www.independent.co.uk/news/business/subsidence-leads-to-an-insurance-fallout-transfer-of-property-freehold-leaves-flat-owners-without-full-cover-1481999.html&sa=U&ei=qiPFUIv2J4WJiwLc3ICQAQ&ved=0CKMBEBYwJzgU&usg=AFQjCNFbJ0NSAqXOnBdAViKZXQidPK1vEg",
  "video": false,
  "href": "http://www.independent.co.uk/news/business/subsidence-leads-to-an-insurance-fallout-transfer-of-property-freehold-leaves-flat-owners-without-full-cover-1481999.html",
  "title": "Subsidence leads to an insurance fall-out: Transfer of property ...",
  "news": false,
  "shopping": false,
  "micro_format": false,
  "image": false,
  "place_details": {},
  "image_pack_results": [],
  "url": "http://www.independent.co.uk/news/business/subsidence-leads-to-an-insurance-fallout-transfer-of-property-freehold-leaves-flat-owners-without-full-cover-1481999.html",
  "brand_pack_results": {},
  "local_pack": {},
  "page": 7,
  "base_domain": "independent.co.uk"
} 
```

使用以下方法从 JSON.net 解析时，我试图从中检索值“60”：

```
var keyValue = JsonConvert.DeserializeObject<KeyValuePair<string, string>>(jToken.ToString()); 
```

我遇到的第一个错误是我最初附加到来自 JToken 的原始 JSON 字符串的初始内容周围缺少“{”“}”标签。结果是一个空的 KeyValuePair 类型。

有谁知道以上述格式解析 JToken 以分离 Key 和 Value 属性的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:52:09.713

1.  `jToken.First`将删除`"60": {`只留下键值对的内容。

2.  使用而`IDictionary`不是哪个可以解决您的问题。`KeyValuePair<string, string>>``jToken.First.ToString()`

让我知道这个是否奏效

# objective-c - 使用 reverseGeocodeLocation 将用户的状态作为 NSString 返回

> ID：13909675
> 
> 赞同：0
> 
> 时间：2012-12-17T07:00:19.953
> 
> 标签：objective-c, ios, cllocationmanager, reverse-geocoding

我试图简单地返回用户的状态。我知道我需要使用 reverseGeocodeLocation。我想以与返回以下用户纬度相同的方式将状态返回为 NSString：

```
- (NSString *)getUserLatitude
{
NSString *userLatitude = [NSString stringWithFormat:@"%f", 
locationManager.location.coordinate.latitude];
return userLatitude;
} 
```

我目前有这个代码，但我无法让它工作。可能是因为我使用的是（void）。我只是有点失落。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation 
*)newLocation fromLocation:(CLLocation *)oldLocation {

CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
[geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, 
NSError *error) {
    for (CLPlacemark * placemark in placemarks) {
        NSString *userState = [placemark locality];

    return userState;

    }
}];
} 
```

有人有想法么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:11:21.157

您必须对完成块中检索到的位置做一些事情。此代码在方法（返回 void）返回自身后很长时间异步执行。

通常你会在你自己的视图控制器或模型类上调用某种方法来传递检索到的信息。

替换`return userState`，它与块的返回类型不匹配。

取而代之的是：

`[myViewController didFinishGettingState:userState];`

您应该研究块和 GCD 基础知识，以便了解这种异步性是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:32:44.827

您可能不了解您的 completionHandler 的工作方式。接受一个处理程序，该`reverseGeocodeLocation:completionHandler:`处理程序将在查找完成并使用`placemarks`and`error`作为参数调用时执行。

你要做的就是在那个区块中执行一些有意义的事情。我会开始检查是否发生任何错误，然后我会调用一个失败或成功的方法，如下所示

```
[geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
    if (error != nil) {
        // Something bad happened...
        [self didFailRetrievingUserState:error];
    } else {
        // Check whether the placemark retrieved is unique
        if (placemarks.count > 1) {
           NSMutableArray * states = [NSMutableArray array];
           for (CLPlacemark * placemark in placemarks) {
               NSString * userState = [placemark locality];
               [states addObject:userState];
           }
           [self didFinishRetrievingUserStates:states];
        } else {
           [self didFinishRetrievingUserState:[placemarks[0] locality]];
        }
    }
}]; 
```

那么当然你需要实现我们在上面的块中调用的三个方法

```
- (void)didFailRetrievingUserState:(NSError *)error {
  // Show error
}

- (void)didFinishRetrievingUserStates:(NSArray *)userStates {
  // Do something reasonable with the multiple possible values 
}

- (void)didFinishRetrievingUserState:(NSString *)userState {
  // Do something reasonable with the only result you have
} 
```

显然，上面的代码是一个建议。您可以做出不同的决定，例如处理处理程序块内的所有逻辑，或者不区分唯一/非唯一情况。

通常，重要的是您要了解处理程序块不应该返回任何内容，因为它是一个`void`函数。它只是应该做某事，而这可能会调用示例中定义的“委托”方法。

# scala - 在 Gatling 重复块中使用 Streams

> ID：13909678
> 
> 赞同：3
> 
> 时间：2012-12-17T07:00:23.297
> 
> 标签：scala, gatling

我在 Gatling 场景中遇到了以下代码（为简洁/隐私而修改）：

```
val scn = scenario("X")
  .repeat(numberOfLoops, "loopName") {
      exec((session : Session) => {
        val loopCounter = session.getTypedAttribute[Int]("loopName")
        session.setAttribute("xmlInput", createXml(loopCounter))
      })
      .exec(
        http("X")
         .post("/rest/url")
         .headers(headers)
         .body("${xmlInput}"))
      )
  } 
```

它在重复块中命名循环，将其从会话中取出并使用它来创建唯一的输入 XML。然后，它将 XML 粘贴回会话中，并在发布时再次提取它。

我想消除命名循环迭代器和访问会话的需要。理想情况下，我想使用 a`Stream`来生成 XML。

但是加特林控制循环，我不能递归。我是否需要妥协，或者我可以以一种功能性的方式使用 Gatling（没有 vars 或访问会话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:27:42.557

正如我所看到的，numberOfLoops 和 createXml 似乎都不依赖于任何可能存储在会话中的用户相关内容，因此循环可以在构建时解决，而不是在运行时解决。

```
import com.excilys.ebi.gatling.core.structure.ChainBuilder

def addXmlPost(chain: ChainBuilder, i: Int) =
    chain.exec(
        http("X")
            .post("/rest/url")
            .headers(headers)
            .body(createXml(i))
    )

def addXmlPostLoop(chain: ChainBuilder): ChainBuilder =
    (0 until numberOfLoops).foldLeft(chain)(addXmlPost) 
```

干杯，

斯蒂芬妮

PS：询问有关 Gatling 问题的首选方式是我们的 Google 群组：[https ://groups.google.com/forum/#!forum/gatling](https://groups.google.com/forum/#!forum/gatling)

# java - 将 Netbeans 项目逻辑视图替换为大纲视图

> ID：13909680
> 
> 赞同：2
> 
> 时间：2012-12-17T07:00:32.030
> 
> 标签：java, swing, netbeans-platform, netbeans-plugins, outline-view

背景：我们正在设计一个基于 Netbeans 平台 RCP 的 Lua IDE。我们已经实现了一个构建系统，允许用户在构建时轻松启用/禁用文件并添加别名以重命名文件。我们认为从 UI 的角度来看，有必要在项目逻辑选项卡中的自定​​义节点旁边设置复选框，以简化启用和禁用文件

问题：我们想用 Outline 视图替换默认的 BeanTreeView，因为默认视图不支持查找中的 CheckableNode。我们不确定执行此操作的最佳方法，但我们设计的解决方案似乎是错误的方法。组件没有正确调整大小，并且节点不会像在原生 BeanTreeView 中那样在启动时自动展开。

实现细节：我们创建了一个代理 DataObject 节点委托的 FilterNode。我们还在查找中添加了我们自己的属性集，并添加了一个实现 CheckableNode 的类（因此大纲视图左侧的复选框）。

这是它现在的样子，这正是我们想要的样子：

## ![自定义逻辑选项卡视图](../Images/1f3aa77c96fc894972f11865a2d88fca.png)

这是我们用来安装它的代码：

```
final String PROJECT_LOGICAL_TAB_ID = "projectTabLogical_tc";
    WindowManager.getDefault().invokeWhenUIReady(new Runnable() {
        @Override
        public void run() {
            TopComponent findTopComponent = WindowManager.getDefault().findTopComponent(PROJECT_LOGICAL_TAB_ID);
            if (findTopComponent != null) {
                Component[] components = findTopComponent.getComponents();
                for (Component component : components) {
                    component.setVisible(false);          
                }
                OutlineView myView2 = new OutlineView("Filename");
                Outline outline2 = myView2.getOutline();
                outline2.setRootVisible(false);
                outline2.setTableHeader(null);         
                findTopComponent.add(myView2, BorderLayout.CENTER);
                findTopComponent.revalidate();
                findTopComponent.validate();
                findTopComponent.repaint();
            }

        }
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:11:40.940

它对我有用：（win7，Java 7 x64，NB dev（20121214））

```
public void jbuttonActionPerformance(ActionEvent ev){

    TopComponent findTopComponent = WindowManager.getDefault().findTopComponent("OutlineTopComponent"); // TODO add your handling code here:
   findTopComponent.setVisible(false);
   findTopComponent.removeAll();
   findTopComponent.setLayout(new BorderLayout());

    OutlineView myView2 = new OutlineView("Filename");
    Outline outline2 = myView2.getOutline();
    findTopComponent.add(myView2, BorderLayout.CENTER);

    findTopComponent.setVisible(true);
    findTopComponent.open();findTopComponent.requestActive();
} 
```

吉尔卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:46:31.113

解决方案在于 invokeWhenUIReady 和转换之间的延迟。

```
 WindowManager.getDefault().invokeWhenUIReady(new Runnable() {
        @Override
        public void run() {                
            RequestProcessor.getDefault().post(new Runnable() {
                @Override
                public void run() {
                    //We must do this in the awt thread
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            TopComponent findTopComponent = WindowManager.getDefault().findTopComponent(PROJECT_LOGICAL_TAB_ID); // TODO add your handling code here:
                            findTopComponent.setVisible(false);
                            findTopComponent.removeAll();
                            findTopComponent.setLayout(new BorderLayout());
                            OutlineView myView2 = new OutlineView("Filename");                      
                            Outline outline2 = myView2.getOutline();
                            outline2.setRootVisible(false);
                            outline2.setTableHeader(null);
                            findTopComponent.add(myView2, BorderLayout.CENTER);
                            findTopComponent.setVisible(true);
                            findTopComponent.open();
                            findTopComponent.requestActive();
                        }
                    });
                }
                //This delay is important!
            }, 1000);
        }
    }); 
```

# android - 单击时列表项无法弹出对话框

> ID：13909684
> 
> 赞同：0
> 
> 时间：2012-12-17T07:00:48.970
> 
> 标签：android, listview, android-activity, dialog

我已经用 Acitvity 更改了这个类扩展，而在此之前它是用 ListActivity 扩展的，这是因为我喜欢对这个类使用 setEmptyView。但是在我用Activity更改了这个类扩展后，它的列表项在单击时无法弹出对话框。有人能给点建议吗？

第三活动.java

```
public class ThirdActivity extends Activity{
Bundle b;
String user,line,result,datapassed,list;
DefaultHttpClient httpclient;
HttpPost httppost;
HttpResponse response;
InputStream is = null;
BufferedReader reader;
StringBuilder sb;
ArrayList<NameValuePair> nameValuePairs;
ListView lv;
IntentFilter intentFilter;
int notification = 1;
String str = "";
byte[] data;
int dlength;
String[] item = {"Track Location","Remove Friend"};
ArrayAdapter<String> adapter;
ArrayList<String> friend;
TextView emptyText;    

    public void onCreate(Bundle savedInstancesState)
    {
    super.onCreate(savedInstancesState);
    setContentView(R.layout.list_screen);
    user = getIntent().getExtras().getString("user");
    Log.d("dg",user);
    lv = (ListView) findViewById(R.id.list);
    emptyText = (TextView)findViewById(R.id.empty);
    getList();                
    }
    }

    public void getList(){
    new Thread(){
        public void run(){
            try{
                 httpclient = new DefaultHttpClient();
                 httppost = new HttpPost("http://www.kryptoquest.com/tracker/friendlist.php");
                 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                 nameValuePairs.add(new BasicNameValuePair("Username", user));
                 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                 response = httpclient.execute(httppost);
                 is = response.getEntity().getContent();
            }catch(Exception e){
                Log.e("log_tag", "Error:"+e.toString());
            }

            //convert response to string
            try{
                    reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    sb = new StringBuilder();
                    line = null;
                    while ((line = reader.readLine()) != null) {

                            sb.append(line + "\n");

                    }
                    Log.d("test",sb.toString());
                    is.close();

                    result = sb.toString();

                    result = result.substring(0, result.length()-1);                    
                //    Log.d("result",result);
                    friend = new ArrayList<String>(Arrays.asList(result.split("[*]")));   
                  Log.d("size",String.valueOf(friend.size()));
                    runOnUiThread(new Runnable()
                    {
                        public void run(){
                            adapter = new ArrayAdapter<String>(ThirdActivity.this,android.R.layout.simple_list_item_1,friend);
                            lv.setAdapter(adapter); 
                            lv.setEmptyView(emptyText);
                        }
                    });

            }catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
            }
        }
    }.start();
 }

 public void onItemClick( View v, final int position, long id){       
        AlertDialog.Builder adb = new AlertDialog.Builder(ThirdActivity.this);
               adb.setItems(item, new DialogInterface.OnClickListener() {                   
               public void onClick(DialogInterface dialog, int which) {                    
                   Toast.makeText(ThirdActivity.this, item[which], Toast.LENGTH_LONG).show();  
                   if(item[which].equals("Track Location")){
                       AlertDialog.Builder adb = new AlertDialog.Builder(
                            ThirdActivity.this);
                            adb.setIcon(R.drawable.location);
                            adb.setTitle("Friend Location");
                            adb.setMessage("Do you want to track "
                            + lv.getItemAtPosition(position) + "'s location?");
                            adb.setPositiveButton("Yes", 
                                    new DialogInterface.OnClickListener(){
                                        public void onClick(DialogInterface dialog, int whichButton)
                                        {
                                            new Thread(){
                                                public void run(){
                                                    try{
                                                         httpclient = new DefaultHttpClient();
                                                         httppost = new HttpPost("http://www.kryptoquest.com/tracker/track.php");
                                                         nameValuePairs = new ArrayList<NameValuePair>(2);
                                                         Log.d("12345678",user); 
                                                         nameValuePairs.add(new BasicNameValuePair("Targetname", (String) lv.getItemAtPosition(position)));
                                                         Log.d("Targetname",(String) lv.getItemAtPosition(position));
                                                         nameValuePairs.add(new BasicNameValuePair("Username", user));
                                                         httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                                                         response = httpclient.execute(httppost);
                                                         is = response.getEntity().getContent();
                                                    }catch(Exception e){
                                                        Log.e("log_tag", "Error:"+e.toString());
                                                    }

                                                    //convert response to string
                                                    try{
                                                            reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                                                            sb = new StringBuilder();
                                                            line = null;
                                                            while ((line = reader.readLine()) != null) {

                                                                    sb.append(line + "\n");

                                                            }
                                                            Log.d("test",sb.toString());
                                                            is.close();

                                                            result = sb.toString();
                                                            Intent i = new Intent(ThirdActivity.this,Map.class);
                                                            i.putExtra("location", result);
                                                            startActivity(i);                                                                                                                                                                               

                                                    }catch(Exception e){
                                                            Log.e("log_tag", "Error converting result "+e.toString());
                                                    }
                                                }
                                            }.start();

                                        }
                            });
                            adb.setNegativeButton("No", null);
                            adb.show(); 
                   }else{
                       AlertDialog.Builder adb=new AlertDialog.Builder(ThirdActivity.this);
                       adb.setTitle("Delete?");
                       adb.setMessage("Are you sure you want to delete " + (String) lv.getItemAtPosition(position));
                       Log.d("index", String.valueOf(position));
                       adb.setNegativeButton("Cancel", null);
                       adb.setPositiveButton("Ok", new AlertDialog.OnClickListener() {
                           String delete = (String) ((lv.getAdapter()).getItem(position));
                           public void onClick(DialogInterface dialog, final int which) {
                            //  lv.invalidateViews();                                                               
                               new Thread(){
                                    public void run(){
                                        try{
                                             httpclient = new DefaultHttpClient();
                                             httppost = new HttpPost("http://www.kryptoquest.com/tracker/remove.php");
                                             nameValuePairs = new ArrayList<NameValuePair>(2);
                                             Log.d("12345678",user); 
                                             nameValuePairs.add(new BasicNameValuePair("Targetname", (String) lv.getItemAtPosition(position)));
                                             nameValuePairs.add(new BasicNameValuePair("Username", user));
                                             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                                             response = httpclient.execute(httppost);
                                             is = response.getEntity().getContent();

                                             data = new byte[256];

                                            StringBuffer buffer = new StringBuffer();
                                            int len = 0;     //100 
                                            while (-1 != (len = is.read(data)) )
                                            {
                                              buffer.append(new String(data, 0, len));

                                            } 
                                              Log.d("MainActivity", buffer.toString());
                                              if(buffer.charAt(0)=='Y')
                                              {

                                                 runOnUiThread(new Runnable()
                                                   {
                                                       public void run()
                                                       {   

                                                         Toast.makeText(ThirdActivity.this, (String)lv.getItemAtPosition(position)+" has removed from friendlist", Toast.LENGTH_LONG).show();
                                                         friend.remove(delete);
                                                         adapter.notifyDataSetChanged();    
                                                       }
                                                   });

                                              }
                                              else
                                              {
                                                 runOnUiThread(new Runnable()
                                                   {
                                                       public void run()
                                                       {
                                                         Toast.makeText(ThirdActivity.this, "Friend remove failed", Toast.LENGTH_LONG).show();
                                                       }
                                                   });
                                              }

                                          is.close();
                                        }catch(Exception e){
                                            Log.e("log_tag", "Error:"+e.toString());
                                        }                                           

                                    }
                                }.start();                                    

                           }});
                       adb.show();
                   }
               }  
        });  
         AlertDialog ad = adb.create(); 
         ad.show();       
    } 
```

list_screen.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >

 <ListView android:id="@+id/list"
      android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

<TextView   android:id="@+id/empty"
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:text="@string/no_friend"
            android:gravity="center_vertical|center_horizontal"
            />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:05:01.667

这是因为您尚未设置`OnItemClickListener`为`ListView`. 所以，你`onItemClick()`的永远不会被调用。`OnItemClickListener`当您扩展`Activity`as`Activity`和 not时，您必须明确设置为 ListView `ListActivity`。

# java - 国际象棋秒表工作不规律

> ID：13909687
> 
> 赞同：1
> 
> 时间：2012-12-17T07:01:14.870
> 
> 标签：java, swing, timer

我正在做的国际象棋中的计时器有问题。它工作“很好”，除了它计算两对二的秒数（2:00 > 1:58 > 1:56 等。但那是 1 秒的间隔，而不是 2 秒的间隔）

这是我定义、启动和结束计时器的代码：

```
private void setTime(){
    totalTime=20;
    whiteSec=0;
    whiteMin=totalTime;
    blackSec=0;
    blackMin=totalTime;
    ActionListener taskPerformer = new ActionListener() {
          public void actionPerformed(ActionEvent evt) {
              if(whiteActive){
                  if(whiteSec>0) whiteSec-=1;
                  else{
                      whiteMin-=1;
                      whiteSec=60;
                  }
                  if(whiteMin==0 && whiteSec==0) endGame();
                  else GUI.setPlayerTime(whiteMin, whiteSec);
              }else{
                  if(blackSec>0) blackSec-=1;
                  else{
                      blackMin-=1;
                      blackSec=60;
                  }
                  if(blackMin==0 && blackSec==0) endGame();
                  else GUI.setPlayerTime(blackMin, blackSec);
              }
          }
      };
    chessTimer = new Timer(1000, taskPerformer);
} 
```

//开始

```
whiteActive = true;
setTime();
wCastling = true;
bCastling = true;
canEnPassant = false;
GUI.setPlayerTime(whiteMin, whiteSec); //this writes the time in some JLabels.
guiRefresh();
activePiece = null;
chessTimer.start(); 
```

//结尾

```
private void endGame(){
    GUI.endGame(checkMate);  //shows an endgame JOptionPane
    chessTimer.stop();
} 
```

我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:40:17.790

虽然我不相信 Timer 可以启动两次，但多次调用`setTime()`会创建多个计时器，每个计时器都会独立地减少字段（直到第一个被垃圾收集，这可能会发生也可能不会发生）。如果连续两次调用该方法，两个 Timer 对象会共存一段时间，并且可能每秒递减两次；呼叫`stop()`将停止其中一个计时器并保留另一个计时器。

作为一个调试步骤（也是一个很好的实践），在创建新计时器之前检查您是否还没有计时器：

```
/* ... */
if (chessTimer != null) throw new IllegalStateException("setTime already called");
chessTimer = new Timer(1000, taskPerformer); 
```

要修复它，跟踪重复调用，或通过将 IllegalStateException 替换为`chessTimer.stop();`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:08:12.317

来自[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html)：此类不提供实时保证：它使用 Object.wait(long) 安排任务方法。

# javascript - 为什么 window.onload 没有在 $.get(

> ID：13909688
> 
> 赞同：-3
> 
> 时间：2012-12-17T07:01:20.157
> 
> 标签：javascript, asp.net, asp.net-mvc, jquery

```
$.get("MyPage.aspx", {foo:"bar"}, function(results){
  Some Js code here.
}); 
```

**问题**- 在 MyPage.aspx 中，我有`window.onload`方法。这没有被执行。

你的评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:05:43.553

window.onload 不会因为您使用 ajax 调用获取一些新的 HTML 而再次触发。每个文档只有一个 window.onload 事件。

当 ajax 调用完成时，该`.get()`调用已经具有完成功能。从该完成调用中完成您的工作。

我知道在加载的代码中触发所需代码的唯一方法是首先将该代码放入您的文档中，然后：

1.  无需等待 onload 执行，而是在 ajax 调用完成后在您想要手动执行的加载代码中调用所需的函数（例如，将在 onload 中执行的相同代码）。
2.  将内容放入 iframe（然后将获得自己的 onload 事件）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T07:06:02.270

`$.get()`仅从 Web 服务器检索文件。

`window.onload`如果**显示**HTML 文件，则由浏览器执行等。如果您只是加载文件以检索其内容，则不会执行任何客户端 JS 代码。

# axapta - 如何过滤报告？

> ID：13909692
> 
> 赞同：0
> 
> 时间：2012-12-17T07:01:43.167
> 
> 标签：axapta, dynamics-ax-2009, x++

我正在处理 AX 2009 中的报告。我想根据 ExpDate 过滤 InventSiteID 的数据。

我在附加到报告的查询中有 2 个数据源。两个数据源都是相同的 InventExpired。我必须在对话框中显示 4 个字段，即数据源 1 的 SiteID、Exp Date 和数据源 2 的相同字段，然后将其过滤掉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:34:49.937

在您的报告中，您可以使用

```
SysQuery::findOrCreateRange(this.queryRun().query().dataSourceNo(1),
                            fieldNum(InventExpired, ExpDate)
                           ).value(SysQuery::value(yourFilterDate)); 
```

这将使用输入的日期过滤第一个数据源。如果您需要按大于或小于过滤日期的日期进行过滤，您可以使用

```
SysQuery::findOrCreateRange(...).value('>' + SysQuery::value(yourFilterDate)); 
```

或者

```
SysQuery::findOrCreateRange(...).value('<' + SysQuery::value(yourFilterDate)); 
```

您知道如何将字段添加到对话框中吗？

如果你不这样做，你应该重写 dialog() 方法，并且在 dialog() 方法中，在调用 super() 之后，你应该使用：

```
Dialog d = ret;
expDateField = d.addField(typeid(yourDateEDT), "Expiry Date"); 
```

要从字段中获取值并在报告中使用它们，您应该使用

```
expDateField.value() 
```

我没有对此进行测试，但我在很多场合都做过类似的事情，所以我相当有信心这会奏效。如果您对此有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:08:22.377

如果你想在这里指定一个范围，我就是这样做的。希望这可以帮助某人...

## 方法1：

```
 qbds3 = qry.dataSourceTable(tableNum(DMxVehicleTable));
 SysQuery::findOrCreateRange(qbds, fieldNum(DMxVehicleTable,VehicleMSRPRetails)).value(strFmt('(VehicleMSRPRetails >= %1) && (VehicleMSRPRetails <= %2)', queryValue(VehicleMinPrice), queryValue(VehicleMaxPrice))); 
```

## 方法2：

```
qbds4 = qry.dataSourceTable(tableNum(DMxSysYearTable));
SysQuery::findOrCreateRange(qbds4, fieldNum(DMxSysYearTable,Year), 1, 1).value('>' + SysQuery::value(VehicleModelYearStart));
qbds4.addRange(fieldNum(DMxSysYearTable, Year)).value(strFmt('< %1', queryValue(VehicleModelYearEnd))); 
```

# c++ - fill_n 与 for 循环初始化数组

> ID：13909700
> 
> 赞同：1
> 
> 时间：2012-12-17T07:02:14.877
> 
> 标签：c++, optimization, std

`fill_n`我想知道初始化数组时for循环和for循环之间的性能差异是什么？

哪一个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:11:27.953

刚刚测试了这三个代码（由 GCC 4.7.2 编译并`-O3`优化）：

我将这两行添加到所有代码中，因为我认为没有它们，GCC 优化器会欺骗我。

```
for (int i = 0; i < SIZE; i++)
    arr[i] = arr[i + 1 % SIZE]; 
```

## 1.cpp

```
#define SIZE (100*1000*1000)
char arr[SIZE];

int main()
{
    for (int i = 0; i < SIZE; i++)
        arr[SIZE] = 0;

    for (int i = 0; i < SIZE; i++)
        arr[i] = arr[i + 1 % SIZE];
} 
```

## 2.cpp

```
...
    std::fill_n(arr, SIZE, 0);
... 
```

## 3.cpp

```
...
    memset(arr, 0, SIZE);
... 
```

测量次数：

```
mostafa@debian:~/Codes/tests/x$ time ./1
real   0m0.073s
user   0m0.008s
sys    0m0.064s

mostafa@debian:~/Codes/tests/x$ time ./2
real   0m0.080s
user   0m0.020s
sys    0m0.056s

mostafa@debian:~/Codes/tests/x$ time ./3
real   0m0.100s
user   0m0.056s
sys    0m0.044s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T07:23:35.443

这些方法之间没有有意义的性能差异。他们实现了同样的事情。并且代码的典型复杂程度非常低，几乎任何现代编译器都可以意识到两者都做同样的事情并生成本质上相同的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:11:28.833

根据 cppreference.com 的实现：

```
template<class OutputIt, class Size, class T>
OutputIt fill_n(OutputIt first, Size count, const T& value)
{
    for (Size i = 0; i < count; i++) {
        *first++ = value;
    }
    return first;
} 
```

我相信这回答了你的问题？:P

# asp-classic - 经典 asp 中的索引服务“不支持此类接口”

> ID：13909702
> 
> 赞同：2
> 
> 时间：2012-12-17T07:02:29.070
> 
> 标签：asp-classic, indexing-service

我想使用微软索引服务搜索包含静态页面的文件夹，以下是源代码。

```
<html>
<%
' This section sets the various configuration variables

formscope="/"
pagesize = 5000
maxrecords=5000
searchstring=request.form("query")
catalogtosearch="cat"
searchrankorder="rank[d]"
origsearch=searchstring
%>

<%
'This section performs the query

dim q
dim util
set q=server.createobject("ixsso.query")
set util=server.createobject("ixsso.util")
q.query=searchstring
q.catalog=catalogtosearch
q.sortby=searchrankorder
q.columns="doctitle, filename, size, write, rank, directory, path"
q.maxrecords=maxrecords
%>

<%
'This section displays the results

set rs=q.createrecordset("nonsequential")
rs.pagesize=pagesize
response.write"<p>Your search for <b>" & origsearch & "</bproduced "

if rs.recordcount=0 then response.write "no results"
if rs.recordcount=1 then response.write "1 result: "
if rs.recordcount>1 then response.write(rs.recordcount) & " results: "

%>

<table border=1><tr><td><b>Title</b></td><td><b>Filename</b></td><td><b>Date / Time</b></td><td><b>Size</b></td><td><b>Relevance</b></td><td><b>Directory</b></td></tr>

<%
do while not rs.EOF

response.write "<tr><td>" & rs("doctitle") & "</td><td>" & "<a href=" & "'" & rs("path") & "'" & ">" & rs("filename") & "</a>" & "</td><td>" & rs("write") & "</td><td>" & rs("size") & "</td><td>" & rs("rank") & "</td><td>" & rs("directory") & "</td></tr>"

rs.movenext
loop

response.write "</table>"
set rs=nothing
set q=nothing
set util=nothing
%>

</body>
</html> 
```

我在计算机->管理->索引服务中添加了一个目录，在cat目录下，我也添加了目录，但是当我运行上面的脚本时出现错误：

> CreateRecordset 错误“80004002”
> 
> 不支持这样的接口
> 
> /cat/SearchResults.asp，第 31 行

任何人都知道错误是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:30:42.647

由于某些晦涩的原因，我的原始anwser被删除了，我再次尝试回答您的问题。

[正如您在此链接](http://support.microsoft.com/kb/2740317/en-us)中看到的“在 Windows 7 或 Windows Server 2008 R2 中安装修补程序 2698365 后，您无法使用 IXSSO 查询索引服务器目录”。

我将链接页面中的文本复制到我的anwser，因为@Mario 想要：

**症状：** 在运行 Windows 7 或 Windows Server 2008 R2 的计算机上安装更新 2698365 后，您无法使用 IXSSO 组件查询索引服务器目录。具体来说，当您尝试调用 IXSSO.Query.CreateRecordset 方法时，您会收到类似于以下内容的错误消息： 不支持此类接口 -2147467262

**原因：** “出现此问题的原因是安装更新 2698365 后删除了旧安装的 ActiveX 数据对象 (ADO)。”

**解决方案：** 从链接站点安装修补程序

# c# - 当第 n 次插入未发生时，TransactionScope 不会回滚

> ID：13909705
> 
> 赞同：0
> 
> 时间：2012-12-17T07:02:54.263
> 
> 标签：c#, .net, transactions, transactionscope, distributed-transactions

我有一个问题让我转了 3 天。我在这个 transactioscope 中使用事务范围，我在 5 个表中插入了 5 个值。前 3 个表的插入正确，完全忽略第 4 次插入并正确插入第 5 个值，没有任何问题。不会出现异常，也不会发生回滚。

编辑：此问题仅发生在生产服务器上，并且不经常发生。在少数情况下它会发生，并且在大多数情况下它可以正常工作而没有任何问题。

注意：在我在同一台服务器上托管另一个应用程序后，此问题开始出现。

```
public void InsertStuff()
{
    try
    {
        using(TransactionScope ts = new TransactionScope())
        {
            //perform insert 1
            Tablel1.Insert();

            //perform insert 2
            Tablel2.Insert();

            //perform insert 3 - 
            Tablel3.Insert();

            //perform insert 4 - No insertion occur !!!!!
            Tablel4.Insert();

            //perform insert 5 - insertion works fine!!!!!
            Tablel5.Insert();

            ts.Complete();            
        }
    }
    catch(Exception ex)
    {
        throw ex;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:06:10.783

事务或程序流看起来没有任何问题。检查编程的任何内容

```
Tablel4.Insert(); 
```

程序/计算机会自己做一些神奇的事情。我们经常犯错误但没有注意到。我们可以建议可能性，但如果希望其他人看看，您可以仔细检查您的逻辑或发布该代码段。

不会发生异常，因为可能存在逻辑错误而不是某些编译或语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:20:29.660

如果确实发生异常，则事务范围应回滚。

为什么不通过自己抛出异常或在 catch 中显式调用 ts.Rollback() 来测试您的理论。

# javascript - Chrome 扩展和 javascript 中断

> ID：13909707
> 
> 赞同：-3
> 
> 时间：2012-12-17T07:03:05.550
> 
> 标签：javascript, google-chrome, google-chrome-extension

我一直在研究 chrome 扩展和我的 background.js 文件的一部分，它检查用户是否使用选项页面登录。这是代码：

```
chrome.browserAction.onClicked.addListener(function(tab) {
if( localStorage["mainLogin"] == null){
    alert("Please go to the option page to login");
} 
```

我知道`break;`在 javascript 中使用它来停止脚本。但是，这不适用于 chrome 扩展...

基本上，如果它发出警报，我应该停止而不运行其余代码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:52:16.400

`break`不会阻止代码继续运行。它用于“打破”循环。( `for/while`) 但是，`debugger;`可以破坏类似于您想要的代码。（大多数调试器都支持这一点。）

```
blah();
debugger;  //break point
alert(); 
```

如果您想阻止某个函数继续运行，请执行以下操作：

```
(function(){
    alert("a");
    return false;
    alert("b");   //you can't see me
})() 
```

# vb.net - 在 vb 中获取位架构

> ID：13909714
> 
> 赞同：1
> 
> 时间：2012-12-17T07:03:37.667
> 
> 标签：vb.net, visual-studio

> **可能重复：**
> [如何使用 .net 检测 Windows 64 位平台？](https://stackoverflow.com/questions/336633/how-to-detect-windows-64-bit-platform-with-net)

我对VB完全陌生。我的机器上有 VS2008 速成版，我想知道我的（目标用户）机器的位架构。我得到了操作系统名称以及主要和次要版本，但我如何获得位架构？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:22:46.370

我已经链接到之前提出的关于此的问题，但是

最简单的解决方案是（如果可以的话）是使用 Visual Studio 2010 及更高版本，那么如果您想知道操作系统的难点是什么，您可以简单地使用：

```
Environment.Is64BitOperatingSystem 
```

如果您想知道处理器的咬合度，请使用已经给出的 kor_ 答案（尽管我不知道为什么您*需要知道这一点）*

注意：- 您还可以检查您正在运行的进程的咬合度：

```
Environment.Is64BitProcess 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T07:14:16.280

```
Dim Is64Bit As Boolean

Is64Bit = Not String.IsNullOrEmpty(Environment.GetEnvironmentVariable("PROCESSOR_ARCHITEW6432")) 
```

另请参阅：[如何使用 .NET 检测 Windows 64 位平台？](https://stackoverflow.com/questions/336633/how-to-detect-windows-64-bit-platform-with-net)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T10:42:01.167

如果您想知道操作系统是 32 位还是 64 位并且您使用的是 .NET Framework 4.0 或更高版本，请使用[Environment.Is64BitOperatingSystem](http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem%28v=vs.100%29.aspx)。

如果您想知道当前进程是 32 位还是 64 位，并且您使用的是 .NET Framework 4.0 或更高版本，请使用[Environment.Is64BitProcess](http://msdn.microsoft.com/en-us/library/system.environment.is64bitprocess%28v=vs.100%29.aspx)。

我已经在 Windows 7 和 XP SP3 上测试了这两个，但没有在任何早期的操作系统版本上测试过。

如果您想知道 CPU 位数，可以使用此 WMI 调用：

```
Dim mo = New ManagementObject("Win32_Processor.DeviceID='CPU0'")
Dim i As UShort = CUShort(mo("Architecture"))

Select Case i
    Case 0
        Return "32 Bit"
    Case 6  'Itanium
        Return "64-bit"
    Case 9
        Return "64-bit"
    Case Else 'Ooops!
        Exit Select    
End Select 
```

# geometry - 三角光栅化问题

> ID：13909727
> 
> 赞同：2
> 
> 时间：2012-12-17T07:04:51.397
> 
> 标签：geometry, polygon, fill, convention, rasterizing

我正在尝试编写几个函数来绘制（填充）平顶和平底三角形。它们在很大程度上起作用，但有时在共享一侧的相邻三角形之间仍会出现裂缝。我使用插值技术逐行光栅化三角形，在每一步计算新的左右限制。其中大部分在代码中进行了解释，但这里是一般的想法（对于平底）：

> 1）找到dy（高度）
> 
> 2）从顶点到每个底部点找到dy/dx（斜率）
> 
> 3) 移动到起始行（ floor(top point) ），并找到初始 x-start 和 x-end 坐标
> 
> 4）移动到下一行，计算新的开始和结束限制......

我应该注意，裂缝只出现在侧面连接的三角形之间，而不是顶部/底部连接处。我已经在这很长时间了，我不知道该尝试什么了。我认为逻辑是可靠的，也许任何裂缝都是由于浮点错误造成的。我真的很感激一些反馈。

```
typedef unsigned int uint32;

void Line(uint32 y, uint32 x_left, uint32 x_right);  //Draws a horizontal line

struct vector2
{
    float x,y;
};

//--------------------------------------------------------------------------------
//        Draws a flat bottom triangle from top to bottom
//--------------------------------------------------------------------------------
void Draw_Bottom_Tri_SOLID(Vector2 p0, Vector2 p1, Vector2 p2)
{
    //Point order:
    //Bottom left:    p0
    //Bottom right:   p1
    //Top point:      p2

    //calculate dy
    float dy = p2.y - p0.y;

    //dx/dy for the left and right edges
    float dxdy_left = (p0.x - p2.x)/dy;
    float dxdy_right = (p1.x - p2.x)/dy;

    //Since we start the raster process at floor(p2.y)
    //we need to shift the initial x start and x end 
    //postions along by this factor:
    float y_bump = p2.y - floor(p2.y);

    //Initial start and end x values
    float xs = p2.x + dxdy_left*y_bump;   //x left (start)
    float xe = p2.x + dxdy_right*y_bump;  //x right (end)

    uint32 yb = uint32(p0.y) + 1;         //y bottom, +1 for top left fill convention
    uint32 yt = uint32(p2.y);             //y top, use casting instead of std::floor

    //Draw lines
    for (uint32 i = yt; i >= yb; i--)
    {
        //Set left and right limits, use casting instead of std::floor
        uint32 left = uint32(xs) + 1;     //+1 for top left fill convention
        uint32 right = uint32(xe);

        //Draw line, can also be std::fill or simply a for loop.
        Line(i, left, right);

        //Increment limits
        xs += dxdy_left;
        xe += dxdy_right;
    }

}    //End: Draw_Bottom_Tri_SOLID()

//--------------------------------------------------------------------------------
//        Draws a flat top triangle from bottom to top
//--------------------------------------------------------------------------------
void Draw_Top_Tri_SOLID(Vector2 p0, Vector2 p1, Vector2 p2)
{
    //Point order:
    //Top left:        p0
    //Top right:       p1
    //Bottom point:    p2

    //calculate dy (height)
    float dy = p0.y - p2.y;

    //dx/dy for the left and right edges
    float dxdy_left = (p0.x - p2.x)/dy;
    float dxdy_right = (p1.x - p2.x)/dy;

    //Find shifting factor
    float y_bump = ceil(p2.y) - p2.y;

    //Initial start and end x values
    float xs = p2.x + dxdy_left*y_bump;    //x left  (start)
    float xe = p2.x + dxdy_right*y_bump;   //x right (end)

    uint32 yb = uint32(p2.y) + 1;          //y bottom, +1 for top left fill convention
    uint32 yt = uint32(p0.y) ;             //y top

    //Draw lines
    for (uint32 i = yb; i <= yt; i++)
    {
        //Set left and right limits
        uint32 left = uint32(xs) + 1;      //+1 for top left fill convention
        uint32 right = uint32(xe);

        //Draw line, can be std::fill or simply a for loop.
        Line(i, left, right);

        //Increment limits
        xs += dxdy_left;
        xe += dxdy_right;
    }

}    //End: Draw_Top_Tri_SOLID() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:31:43.363

浮动错误似乎很可能。您需要确保两个相邻边的值相同。当您以这种方式累积时，使用浮点值修复这可能有点棘手。根据您的需要，您有几个选择：

*   改为使用定点。这也可能会更快。
*   如果过度绘制不是问题，您可以简单地将足够大的 epsilon 添加到您的浮点值。

# php - 如何从文本中删除样式

> ID：13909730
> 
> 赞同：0
> 
> 时间：2012-12-17T07:05:19.683
> 
> 标签：php, styles

我必须显示数据库中的内容。内容是使用编辑器添加的。我使用下面的代码来显示它

```
 <?php echo $record['content'];?> 
```

它显示如下

```
description
<style type="text/css">
body { background-color: #fff; padding: 0 20px; color:#000; font: 13px/18px Arial, sans-serif; }
a { color: #360; }
h3 { padding-top: 20px; }
ol { margin:5px 0 15px 16px; padding:0; list-style-type:square; }
#player1_wrapper{
description border:2px solid #B5B5B5;
}
</style> 
```

样式也与内容一起显示。如何删除它？我只需要仅作为描述的文本内容。我必须删除该样式内容。我试过`html_entity_decode`但没有效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:49:25.907

```
echo(preg_replace('/<style[^>]*>(([^<]|[<[^\/]|<\/[^s]|<\/s[^t])*)<\/style>/i','',$record['content'])); 
```

我在手机上，所以代码未经测试......但这就是想法......

**编辑**现在测试代码，缺少')'并在标记后添加了换行符/返回的删除：

```
<?php

echo(preg_replace('/[\n\r ]*<style[^>]*>(([^<]|[<[^\/]|<\/[^s]|<\/s[^t])*)<\/style>[\n\r ]*/i','',$record['content']));

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:12:24.163

尝试

```
echo  preg_replace('/\s+/', ' ', preg_replace('/<[^>]*>/', ' ', $record['content'])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:24:24.710

尝试这个：

# 编辑：

```
$string1=$record['content'];
$pos=strpos($string1,"<");
$string2=substr($string1,0,$pos); 
```

我还没有尝试过。但它应该工作。这是在您不想要样式标签的情况下。

# networking - 使用 System.Net.NetworkInformation 错误

> ID：13909732
> 
> 赞同：1
> 
> 时间：2012-12-17T07:05:34.657
> 
> 标签：networking, compact-framework

我想使用 NetworkInformation 命名空间，当我使用 system.net.networkInformation 时出现错误：“命名空间‘System.Net’中不存在类型或命名空间名称‘NetworkInformation’（您是否缺少程序集引用？） "

我是紧凑型框架 v2.0 或 3.5。紧凑的框架应该支持 networkInformation 命名空间吗？

我也尝试使用此代码：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "ipconfig.exe";
p.Start();
p.WaitForExit();
string output = p.StandardOutput.ReadToEnd();
return output; 
```

但 StandartOutput 和 redirectStandartoutput 不存在。

我试图找出 LAN 是启动还是关闭。还有其他方法可以与紧凑框架一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:12:54.577

您可以使用[OpenNetCF 的智能设备框架](http://www.opennetcf.com/Products/SmartDeviceFramework.aspx)来做到这一点。当我发现 CF2.0 中缺少这些类时，我曾多次使用此框架中的类

[在此处](https://stackoverflow.com/questions/936027/detecting-network-state-connected-disconnected-in-c-sharp)查看@ctacke 的答案：

> 最简单的方法是使用 OpenNETCF 的 SDF 并查看 OpenNETCF.Net.AdapterStatusMonitor 类，它会在 NDIS 发出通知（如 MEDIA_CONNECT 和 MEDIA_DISCONNECT）时引发事件。

# android - 在android上截屏最快的方法？

> ID：13909736
> 
> 赞同：1
> 
> 时间：2012-12-17T07:05:56.140
> 
> 标签：android, screenshot, android-service

我正在尝试在本地截取一个有**根**的android 手机。我想通过服务截取**其他活动**的屏幕截图。唯一的要求是屏幕截图应该最多〜100ms。

我试试

```
java.lang.Process process = Runtime.getRuntime().exec("su");
DataOutputStream os = new DataOutputStream(process.getOutputStream());
os.writeBytes("cat /dev/graphics/fb0 > " + raw + "\n");
os.writeBytes("exit\n");
os.flush();
os.close();
process.waitFor(); 
```

但是当我尝试将其写入文件时，它需要的时间太长了！

另外，因为我试图在手机上本地执行此操作，而不是将其连接到 PC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:14:50.217

这不受支持，可能适用于所有设备，也可能不适用于所有设备。您可能还会得到一些不是您期望的格式的东西。如果您使用的是 4.0+ 设备，您可以看到他们如何实现系统截图功能并进行模拟。AOSP 中还有一些小实用程序、screencap 和 screenshot，您可能想查看它们的代码（在`frameworks/base/cmds`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-14T14:23:01.363

您可以使用 adb 命令截取屏幕截图 adb shell screencap -p /mnt/sdcard/screen.png 并从应用程序以编程方式执行它

# java - 从普通应用程序（非电话）使用诺基亚位置 API

> ID：13909737
> 
> 赞同：2
> 
> 时间：2012-12-17T07:05:58.220
> 
> 标签：java, geolocation, nokia

诺基亚是否提供任何基于直接位置的 api，我们可以在其中传递经度和纬度并获得确切的地址/位置作为响应？我正在开发一个在服务器上运行的**通用/非电话java 应用程序。**

感谢和问候 Raaghu.K

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:38:04.353

您可以查看文档中提供的**Places API** ( [http://developer.here.net/places](http://developer.here.net/places) )。严格来说，它*不是*地理编码 API，但在您的搜索中传递一个`latitude`and将返回具有可能满足您需要的参数的结果，根据他们的描述：`longitude``vicinity`

> *地点位置的文字描述；通常来自地点的地址，但也可能包含任何其他描述，以帮助用户了解地点所在的位置。*

您可以在此处查看相关文档页面：

*   搜索：http: [//developer.here.net/docs/places/topics/resource-search.html](http://developer.here.net/docs/places/topics/resource-search.html)
*   结果：http: [//developer.here.net/docs/places/topics/media-type-search.html](http://developer.here.net/docs/places/topics/media-type-search.html)

希望能帮助到你 ！

**编辑：** 这是来自文档的示例调用：[http ://demo.places.nlp.nokia.com/places/v1/discover/explore?at=52.53099%2C13.38455%3Bu%3D1000&size=0&app_id=_peU-uCkp -j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ&accept=应用程序/json](http://demo.places.nlp.nokia.com/places/v1/discover/explore?at=52.53099%2C13.38455%3Bu%3D1000&size=0&app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ&accept=application/json)

# python - 如何使用 pyodbc 连接远程 MS 访问

> ID：13909741
> 
> 赞同：0
> 
> 时间：2012-12-17T07:06:13.490
> 
> 标签：python, django, pyodbc, django-pyodbc

在我能够通过 freetds 使用 pyodbc 连接到 MS SQL 服务器之前，如何使用 pyodbc 连接到远程 MS Access DB。但是，如果我使用相同的 freetds 配置进行远程访问，'我不会成功。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:00:54.457

freeTDS 是使用 TDS 通信协议的 ODBC 驱动程序。MS SQL Server 使用 TDS 协议。

Access 没有，所以它不起作用也就不足为奇了。您需要的是 Access 使用的 Jet 引擎的 ODBC 驱动程序。它存在。它被称为 libmdb。您可以安装软件包以进行设置。

阅读[MDB 工具安装指南](http://mdbtools.sourceforge.net/install/book1.htm)以获取更多信息。

# c# - 使用 C# 在 Visual Studio 中列出列表

> ID：13909742
> 
> 赞同：-3
> 
> 时间：2012-12-17T07:06:22.477
> 
> 标签：c#, visual-studio, list, event-handling, listboxitem

我对开发应用程序真的很陌生，但我对自己在做什么有一些了解。我正在使用适用于 Windows 8 的 Visual Studio Express

我用 ListBoxItems 创建了一个列表（列表 A），当有人通过 PointerPressed 事件处理程序单击它们时，项目通过以下方式添加到列表 B： ListB.Items.Add("ItemName");

但是，我无法向这些 ListBoxItems 添加事件处理程序，所以如果有人知道我可以根据 List B 的 SelectedItem 影响其他项目的方法，那将不胜感激。

另外，我很确定我应该通过 SelectionChanged 方法执行此操作，但是我不知道从那里去哪里。请尽量让我也能理解。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:14:38.863

感谢你的帮助。我想出了怎么做。

```
private void ListA_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if ((string)ListA.SelectedItem == "Item 1")
        {
            ListB.Items.Add("Item A");
        } 
```

其中 ListA 的 Selection Changed 事件处理程序是 ListA_SelectionChanged，Item 1 是 ListA 中的一个项目，而 Item A 是 List B 中的一个项目。非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:19:03.280

SelectionChanged 事件将提醒您用户更改了 ListBox 中的 selectedItem。

然后，您可以使用 listBox.SelectedItem 并使用它做任何您需要的事情。就像您的情况一样，将其添加到另一个列表中。

# excel - VBA Excel 2003 宏独立于特定工作簿

> ID：13909747
> 
> 赞同：1
> 
> 时间：2012-12-17T07:06:54.990
> 
> 标签：excel, vba

好的，所以我编写了一个宏，当从我编码的工作簿启动时它工作正常。但是，我需要宏能够跨各种工作簿工作。

我已将宏移至隐藏的“个人”工作簿，但是，现在当代码引用“ThisWorkBook”时，嗯，是的，它指向个人工作簿。

我曾想过只创建一个工作簿变量并指向工作簿的地址/名称……但这会有所不同（工作簿是由系统生成的，工作簿的名称取决于生成的时间/日期）。

作为参考，我想在 Excel 的工具栏上放置一个按钮，当用户单击它时，它会运行此宏。是否有一种方法可以获取调用宏的工作簿的名称？

谢谢，山姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:55:59.617

有一些**活动**命令可让您引用从中调用代码的工作簿和工作表。

```
ActiveCell
ActiveChart
ActiveEncryptionSession
ActivePrinter
ActiveProtectedViewWindow
ActiveSheet
ActiveWindow
ActiveWorkbook 
```

`Application`对象的所有属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:53:51.360

如果工作簿 A（数据工作簿）中有命名约定，您可以执行以下更改来识别工作簿 A

```
Dim wbA As Workbook 'workbook A ( the data workbook) 
Dim wb As Workbook 

For Each wb In Workbooks 'loop through all opened workbooks, matching the name 
    If InStr(wb.Name, "ABC") > 0 Then 
        Set wbA = wb
        Exit For
    End If
Next wb 
```

然后用 wbA 替换“ThisWorkBook”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T01:37:57.993

您也可以使用 VBS 代替宏。语言几乎相同，您的脚本将独立于您的工作簿。

至于确定使用哪个文件来运行宏（没有数据和代码的示例，很难说得太具体），您可以浏览所需的文件。

```
Dim objShell
Set objShell = CreateObject("Shell.Application")

Dim strFileName
Dim strFilePath

Dim dPicker
Set dPicker = objShell.BrowseForFolder(0, "Choose a file:", &H4000)

strFilePath = dPicker.self.Path 'will give you the file path of the file you choose,
                                'which you can then use to open/access the file with
                                'the data you need.

'Code

Set dPicker = Nothing 
```

如果您想坚持使用宏，您可以查看 FileDialog 对象以在 VBA 中使用文件选择器。

要在 VBA 中获取打开的工作簿的文件名和/或路径，请使用

```
 ActiveWorkbook.Name
 ActiveWorkbook.Path 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-13T12:10:05.293

只需将“ThisWorkbook”替换为“ActiveWorkbook”即可。

# android - Twitter分享使用android错误

> ID：13909752
> 
> 赞同：0
> 
> 时间：2012-12-17T07:07:25.380
> 
> 标签：android, http, twitter, share

我在我的应用程序中使用了一个共享按钮，它使用 twitter 如下：

```
 public class TwitterApp {
        private Twitter mTwitter;
        private TwitterSession mSession;
        private AccessToken mAccessToken;
        private CommonsHttpOAuthConsumer mHttpOauthConsumer;
        private OAuthProvider mHttpOauthprovider;
        private String mConsumerKey;
        private String mSecretKey;
        private ProgressDialog mProgressDlg;
        private TwDialogListener mListener;
        private Context context;

        public static final String CALLBACK_URL = "http://www.rommanapps.com";
        private static final String TAG = "TwitterApp";

        public TwitterApp(Context context, String consumerKey, String secretKey) {
            this.context    = context;

            mTwitter        = new TwitterFactory().getInstance();
            mSession        = new TwitterSession(context);
            mProgressDlg    = new ProgressDialog(context);

            mProgressDlg.requestWindowFeature(Window.FEATURE_NO_TITLE);

            mConsumerKey    = consumerKey;
            mSecretKey      = secretKey;
                mTwitter.setOAuthConsumer(consumerKey, secretKey);

            mHttpOauthConsumer = new CommonsHttpOAuthConsumer(mConsumerKey, mSecretKey);
            mHttpOauthprovider = new DefaultOAuthProvider("https://api.twitter.com/oauth/request_token",
                                                         "https://api.twitter.com/oauth/access_token",
                                                         "https://api.twitter.com/oauth/authorize");

            mAccessToken    = mSession.getAccessToken();

            configureToken();
        }

        public void setListener(TwDialogListener listener) {
            mListener = listener;
        }

        @SuppressWarnings("deprecation")
        private void configureToken() {
            if (mAccessToken != null) {
                mTwitter.setOAuthConsumer(mConsumerKey, mSecretKey);

                    mTwitter.setOAuthAccessToken(mAccessToken);

            }
        }

        public boolean hasAccessToken() {
            return (mAccessToken == null) ? false : true;
        }

        public void resetAccessToken() {
            if (mAccessToken != null) {
                mSession.resetAccessToken();

                mAccessToken = null;
            }
        }

        public String getUsername() {
            return mSession.getUsername();
        }

        public void updateStatus(String status) throws Exception {
            try {
                mTwitter.updateStatus(status);
            } catch (TwitterException e) {
                throw e;
            }
        }

        public void authorize() {
            mProgressDlg.setMessage("Initializing ...");
            mProgressDlg.show();

            new Thread() {
                @Override
                public void run() {
                    String authUrl = "";
                    int what = 1;

                    try {
                        authUrl = mHttpOauthprovider.retrieveRequestToken(mHttpOauthConsumer, CALLBACK_URL);    

                        what = 0;

                        Log.d(TAG, "Request token url " + authUrl);
                    } catch (Exception e) {
                        Log.d(TAG, "Failed to get request token");

                        e.printStackTrace();
                    }

                    mHandler.sendMessage(mHandler.obtainMessage(what, 1, 0, authUrl));
                }
            }.start();
        }

        public void processToken(String callbackUrl)  {
            mProgressDlg.setMessage("Finalizing ...");
            mProgressDlg.show();

            final String verifier = getVerifier(callbackUrl);

            new Thread() {
                @Override
                public void run() {
                    int what = 1;

                    try {
                        mHttpOauthprovider.retrieveAccessToken(mHttpOauthConsumer, verifier);

                        mAccessToken = new AccessToken(mHttpOauthConsumer.getToken(), mHttpOauthConsumer.getTokenSecret());

                        configureToken();

                        User user = mTwitter.verifyCredentials();

                        mSession.storeAccessToken(mAccessToken, user.getName());

                        what = 0;
                    } catch (Exception e){
                        Log.d(TAG, "Error getting access token");

                        e.printStackTrace();
                    }

                    mHandler.sendMessage(mHandler.obtainMessage(what, 2, 0));
                }
            }.start();
        }

        private String getVerifier(String callbackUrl) {
            String verifier  = "";

            try {
                callbackUrl = callbackUrl.replace("twitterapp", "http");

                URL url         = new URL(callbackUrl);
                String query    = url.getQuery();

                String array[]  = query.split("&");

                for (String parameter : array) {
                     String v[] = parameter.split("=");

                     if (URLDecoder.decode(v[0]).equals(oauth.signpost.OAuth.OAUTH_VERIFIER)) {
                         verifier = URLDecoder.decode(v[1]);
                         break;
                     }
                }
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }

            return verifier;
        }

        private void showLoginDialog(String url) {
            final TwDialogListener listener = new TwDialogListener() {
                @Override
                public void onComplete(String value) {
                    processToken(value);
                }

                @Override
                public void onError(String value) {
                    mListener.onError("Failed opening authorization page");
                }
            };

            new TwitterDialog(context, url, listener).show();
        }

        private Handler mHandler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                mProgressDlg.dismiss();

                if (msg.what == 1) {
                    if (msg.arg1 == 1)
                        mListener.onError("Error getting request token");
                    else
                        mListener.onError("Error getting access token");
                } else {
                    if (msg.arg1 == 1)
                        showLoginDialog((String) msg.obj);
                    else
                        mListener.onComplete("");
                }
            }
        };

        public interface TwDialogListener {
            public void onComplete(String value);       

            public void onError(String value);
        }
    } 
```

我对这个陈述有误

1.  mHttpOauthprovider = new DefaultOAuthProvider("https://api.twitter.com/oauth/request_token", "https://api.twitter.com/oauth/access_token", "https://api.twitter.com/oauth/授权”）;

它说**构造函数 DefaultOAuthProvider(String, String, String) 未定义**

1.  mAccessToken = mSession.getAccessToken();

上面写着**Type mismatch: cannot convert from twitter4j.auth.AccessToken to twitter4j.http.AccessToken**

而且我不知道问题出在哪里！请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:05:05.720

我使用了以下链接中提供的库。它可以帮助我轻松地将 twitter 与 facebook 和 linkedin 集成到我的 android 应用程序中。

该项目还表示，他们希望尽快增加更多的社交客户。

[http://socialauth.in/](http://socialauth.in/)

# sorting - Erlang大写和小写排序

> ID：13909753
> 
> 赞同：1
> 
> 时间：2012-12-17T07:07:29.917
> 
> 标签：sorting, erlang, uppercase, lowercase

关于大小写比较的问题..我怎么能在我的排序函数中做到这一点。有什么想法吗？

例如：输入文件：“我很高兴！”

输出文件：

```
Happy!
I
am 
```

这就是我的程序发生的事情，但我希望有：

```
am
I
Happy 
```

我的代码：

```
-module(wp)
-compile([export_all]). % Open the File

sortFile(File1,File2) ->
    {ok, File_Read} = file:read_file(File1),
    % making a list
    Liste = string:tokens(binary_to_list(File_Read), "\n "),
    % isort List
    Sort_List = isort(Liste),
    ISort = string:join(Sort_List,"\n"),
    %Written in the File.
    {ok,Datei_Schreiben} = file:open(File2, write),
    file:write(File_Write, Isort),
    file:close(File_Write).

isort([]) -> [];
isort([X|XS])-> insert(X, isort(XS)).

insert(Elem, []) -> [Elem];
insert(Elem, [X|XS]) when Elem= [Elem,X|XS];
insert(Elem, [X|XS]) -> [X|insert(Elem,XS)]. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:01:45.510

当排序中至少有`N*log2(N)`比较时，不需要进行`N*log2(N)`大小写`N`转换。（几乎所有 perl 开发人员都知道这个技巧。）

```
{ok, Bin} = file:read_file(?INPUT_FILE),
Toks = string:tokens(binary_to_list(Bin),"\n "),
Result = [[X,$\n] || {_,X} <- lists:sort([{string:to_lower(X), X} || X<-Toks])],
file:write_file(?OUTPUT_FILE, Result). 
```

顺便说一句，与简洁但效率较低的快速排序实现相反，`lists:sort/1`合并排序已经授予并且非常有效。`N*log2(N)`更糟糕的是，快速排序有`N^2`最坏的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:32:19.017

像这样的东西怎么样：

```
qsort1([]) -> [];
qsort1([H|T]) -> 
     qsort1([X || X <- T, string:to_lower(X) < string:to_lower(H)]) 
     ++ [H] 
     ++ qsort1([X || X <- T, string:to_lower(X) >= string:to_lower(H)]).

7> qsort1(["I", "am","Happy"]).
   ["am","Happy","I"] 
```

我相信“快乐”的排序小于“我”

```
8> "happy" < "i".
true 
```

这就是为什么我的排序顺序与您的原始帖子有点不同的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:39:38.937

现在，根据您是 on`Windows`还是`Unix/Linux`，文件中的行将以不同的字符结尾。让我们使用通常的窗口`\r\n`。现在假设输入文件不是太大，我们可以一次将它们读入二进制文件。我们得到的数据流必须被分割成行，然后每一行被分割成单词（空格）。如果输入文件非常大并且无法放入内存，那么您将不得不逐行读取它，在这种情况下，您可能需要一个 IN-Memory 缓冲区来保存所有准备排序的单词，这将需要`ETS Table`, 或`Memcached`（我不会在这里说明的选项）。

让我们写代码

```
-模块（生病排序）。
-编译（export_all）。
-define(INPUT_FILE,"C:/SICK_SORT/input.txt")。
-定义（OUTPUT_FILE_PATH，“C:/SICK_SORT/”）。
-define(OUTPUT_FILENAME,"output.txt")。

开始（）->
    案例文件：read_file(?INPUT_FILE) of
        {好的，二进制}->
            %% 输入文件读取
            AllLines = string:tokens(binary_to_list(Binary),"\r\n"),
            SortedText = lists:flatten([XX ++ "\r\n" || XX <- lists:sort(string:tokens(AllLines," "))]),
            EndFile = 文件名:join(?OUTPUT_FILE_PATH,?OUTPUT_FILENAME),
            文件：write_file（EndFile，SortedText），
            好的;
        错误 -> {错误，错误}
    结尾。

```

那应该行得通。更改源文件中的宏以适合您的设置，然后运行`sick_sort:start().`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T07:28:08.130

您必须在排序功能中比较低上限：

```
(nitrogen@127.0.0.1)25> F= fun(X,Y) -> string:to_lower(X) < string:to_lower(Y) end.
#Fun<erl_eval.12.111823515>
(nitrogen@127.0.0.1)26> lists:sort(F,["I","am","Happy"]).                          
["am","Happy","I"]
(nitrogen@127.0.0.1)27> 
```

编辑：

在您的代码中，允许对列表进行排序的函数是运算符 > 和 <（如果您想查看复制的字符串，其中之一应该包括 =，否则您将进行排序）。如果您想使用不同的比较，您可以在普通或匿名函数中定义它，然后在快速排序中使用它：

```
mycompare(X,Y) ->
    string:to_lower(X) < string:to_lower(Y).

quicksort  ([])->[];
           ([X|XS])-> quicksort([Y||Y<-XS,mycompare(X,Y)])++[X]++quicksort([Y||Y<-XS,mycompare(X,Y) == false]). 
```

# c# - 如何调整超出父客户区域的控件大小？

> ID：13909756
> 
> 赞同：2
> 
> 时间：2012-12-17T07:08:01.693
> 
> 标签：c#, .net, winforms

我有多个`DataGridViews`由拆分器分隔（或排列在嵌套中`SplitContainers`）。我希望能够调整它的外边缘的大小，以使整个事物大于父的客户区域（在这种情况下是标签页）。我尝试了各种布局组合`SplitContainers`，以及`Splitters`，但我无法实现这一点。

这是它最初的样子：

![前...](../Images/5c921e66ee99e6456a2e2a978ada9445.png)

这是我想要实现的目标：

（当向下拖动下部分隔器时，第三个网格的大小会增加，并且标签页会获得滚动条，因为它的子项无法容纳其客户区域，并且该标签页当然已`AutoScroll`设置为`true`）。

![后...](../Images/6ab3784cb700eaa3fe70188e04208070.png)

PS：这些屏幕截图来自具有此功能的 SQL Server Management Studio (SSMS)。当执行产生多个结果集的查询时，会在结果标签页的客户区域中创建多个网格（每个结果集一个）。而且它们不受该标签页的客户区域的限制，我想实现同样的目标。

# r - 优化 R 代码 - 从 S&P500 系列采样回报

> ID：13909761
> 
> 赞同：3
> 
> 时间：2012-12-17T07:08:34.930
> 
> 标签：r, optimization

我试图了解“胜率”如何影响交易策略的回报。

我下载标准普尔的价格并计算每日回报。然后，我随机选择这些回报的 x%，并说我正确预测了它的方向，因此回报是正的。对于剩余的 1-x%，我说我错了，回报是负数。我复制这个过程说 1000 次并收集年化几何回报。

我以 0.01 的增量间隔将 x 从 0.5 变为 0.6。

这是我的代码：

```
library(quantmod)
library(multicore)

getSymbols("^GSPC", from = "1950-1-1")
ret <- ROC(GSPC)[-1,4]

set.seed(123)

winpct <- seq(0.5, 0.6, 0.01)
ret <- coredata(ret)

system.time(res <- simplify2array(mclapply(winpct, function(x) replicate(1000, drawsample(ret, x)))))

drawsample <- function(ret, winpct){
  len = length(ret)
  ret = abs(ret)

  win = sample(1:len, round(winpct * len))
  a = c(ret[win], -ret[-win])
  return(prod(1 + a) ^ (252 / length(a)) - 1)
} 
```

花的时间：

```
 user  system elapsed 
 18.904   0.842   5.580 
```

我可以做任何进一步的优化来加快速度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:31:43.390

我做了以下两个调整：

1/ 使用`exp(sum(a))`而不是`prod(1+a)`. 我认为无论如何你都想要这个，因为你已经创建了一个日志返回系列`ROC(GSPC)[-1,6]`。据此，`rbenchmark`我得到了大约 7% 的加速。

2/ sample from`c(-1,-1)`为`ret`序列的长度，然后与 ret 序列相乘，得到有符号的返回序列。这让我又获得了 30%。

请注意，在我的代码中，我已将您的名称重命名`a`为`bin`.

```
drawsample2 <- function(ret, winpct){
  len = length(ret)
  win = sample(c(-1,1), len, replace=TRUE, prob = c((1-winpct), winpct))
  ret <- abs(ret)
  bin <- ret*win
  return(exp(sum(bin))^(252/length(ret)) - 1)
} 
```

以您的`drawsample()`i 为基准进行基准测试，得到约 37% 的加速。

```
bb <- benchmark(simplify2array(mclapply(winpct, function(x) replicate(1000, drawsample(ret, x)))), 
          simplify2array(mclapply(winpct, function(x) replicate(1000, drawsample2(ret, x)))),
          columns =c('test', 'elapsed', 'relative'),
          replications = 10,
          order = 'elapsed') 
```

在我的 MBP 上，以下是基准：

```
> bb

  elapsed relative
2  17.254    1.000
1  27.734    1.607 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T20:41:30.957

这是[ricardo](https://stackoverflow.com/users/1453172/ricardo)函数的一个调整，对于较大的对象来说更快。我删除了对 的调用`mclapply`，以便通过避免多核处理所需的网络开销来隔离函数的性能。

```
drawsample_r <- function(ret, winpct){
  len = length(ret)
  win = sample(c(-1,1), len, replace=TRUE, prob = c((1-winpct), winpct))
  ret <- abs(ret)
  bin <- ret*win
  return(exp(sum(bin))^(252/length(ret)) - 1)
}
drawsample_j <- function(ret, winpct){
  len <- length(ret)
  win <- c(-1L,1L)[sample.int(2L,len,TRUE,c(1-winpct,winpct))]
  exp(sum(abs(ret)*win))^(252L/len)-1L
}
library(rbenchmark)
set.seed(123)
ret <- rnorm(1e6)/100  # 1 million observations
winpct <- seq(0.5, 0.6, 0.01)
benchmark(sapply(winpct, drawsample_r, ret=ret),
          sapply(winpct, drawsample_j, ret=ret),
  replications=10, order='elapsed')[,1:5]
#                                    test replications elapsed relative user.self
# 2 sapply(winpct, drawsample_j, ret=ret)           10   6.963    1.000     6.956
# 1 sapply(winpct, drawsample_r, ret=ret)           10  10.852    1.559    10.689 
```

# vim - 在 Vim 编辑器中嵌入自动导入功能

> ID：13909762
> 
> 赞同：-1
> 
> 时间：2012-12-17T07:08:36.333
> 
> 标签：vim

有没有办法在 Vim 编辑器中嵌入自动导入功能，就像我们`Ctrl + Shift + O`在 Eclipse 中使用的方式一样？
**更新**
我使用 Vim 编辑器 7.3 版在 Linux 上使用 Java 开发 Android 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:57:58.393

插件来了：[JavaImp](http://www.vim.org/scripts/script.php?script_id=325) :)

# java - java web应用程序中的多个数据库连接

> ID：13909769
> 
> 赞同：2
> 
> 时间：2012-12-17T07:09:03.693
> 
> 标签：java, mysql, spring, hibernate, multiple-databases

我想设计一个 Web 应用程序（使用 java、spring、hibernate 和 mySQL）。数据量非常大。因此，对于每个客户端，我希望在同一服务器或不同节点上创建单独的数据库。我使用 java、spring、hibernate 和 mySQL 尝试了这个。但是 JVM 占用大量内存，有时会引发“堆空间不足”的异常。

有没有更好的方法来使用上面的堆栈管理多个数据库连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:23:33.160

您应该使用应用程序服务器提供的连接池，这样它们将帮助您以更好的方式管理数据库连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:19:59.457

如果您使用的是 tomcat，您可以增加堆空间，只需创建一个名为 JAVA_OPTS 的环境变量并为您的堆指定最小 (Xms) 和最大 (Xmx) 大小：例如 JAVA_OPTS="-Xms128m -Xmx512m -XX:MaxPermSize= 512m" （注意：Xms和大小之间没有空格）

# xcode - iOS 代码覆盖率测试工具

> ID：13909771
> 
> 赞同：2
> 
> 时间：2012-12-17T07:09:12.313
> 
> 标签：xcode, instruments

使用仪器进行 iOS 自动化时如何在 Xcode 中进行代码覆盖率测试？是否有任何工具可以显示自动化代码覆盖率的百分比。

另外我想知道当测试用例只为功能编写时如何完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:17:13.660

不，没有。您可以包含日志并计算打印的日志数量与日志总数....这可行，但需要大量手动工作

# php - 是否有必要使用独立的码头安装来使用 php pecl solr 扩展？

> ID：13909777
> 
> 赞同：0
> 
> 时间：2012-12-17T07:09:28.640
> 
> 标签：php, solr, jetty, pecl

我目前只是在 solr 文件夹的“example”文件夹中运行“start.jar”。在尝试使用 PHP 的 pecl solr 扩展联系 solr 时，我在扩展安装的“php_solr_client.c”文件中遇到异常。我正在使用 SOLR 3.1，我相信配置是正确的.. “主机名” - localhost，端口 - 8983，路径 - '/solr/'

我可以通过“http://localhost:8983/solr/admin/”访问 solr admin

我担心的是我的机器没有将 8983 列为开放端口。这不是很奇怪吗。? 这是我的连接配置..

```
<?php
$options = array
(
 'hostname' => 'localhost',
 'port'     => 8983,
 'path'     => '/solr/'
 );

$client = new SolrClient($options);

$doc = new SolrInputDocument();

$doc->addField('id', 334455);
var_dump($doc->toArray());
try{
$pingresponse   = $client->ping();
$updateResponse = $client->addDocument($doc);
}
catch(Exception $e){
        var_dump($e->getInternalInfo());
}
//print_r($updateResponse->getResponse());
?> 
```

这是我得到的输出。

```
array (size=3)
  'document_boost' => float 0
  'field_count' => int 1
  'fields' => 
    array (size=1)
      0 => 
        object(SolrDocumentField)[3]
          public 'name' => string 'id' (length=2)
          public 'boost' => float 0
          public 'values' => 
            array (size=1)
              ...

( ! ) Warning: SolrClient::ping(): in /var/www/html/simple/new.php on line 16
Call Stack
#   Time    Memory  Function    Location
1   0.0003  234560  {main}( )   ../new.php:0
2   0.0005  239096  SolrClient->ping( ) ../new.php:16

array (size=3)
  'sourceline' => int 1704
  'sourcefile' => string '/builddir/build/BUILD/php-pecl-solr-1.0.2/solr-1.0.2/php_solr_client.c' (length=70)
  'zif_name' => string 'zim_SolrClient_ping' (length=19) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:14:14.343

`SolrClient`不在乎您的 Solr 安装在哪里或提供什么服务。[您可以在构造函数中](http://php.net/solrclient.construct)定义连接参数。

如果您在连接时遇到问题，请检查您用于托管 Solr 的参数（无论是 Jetty 还是烤土豆）与您传递给构造函数的参数是否匹配。

# opengl-es - 如何使用 OpenGL SL 进行通用计算

> ID：13909779
> 
> 赞同：2
> 
> 时间：2012-12-17T07:09:49.717
> 
> 标签：opengl-es, cuda, opencl

我知道 OpenCL 和 CUDA。这些在移动设备中不受支持。但它们中的大多数都支持 OpenGL ES。所以我想学习使用OpenGL ES着色语言进行通用计算。像 OpenCL 或 CUDA 一样，在 OpenGLSL 中。

*   我可以使用多少种缓冲液？这些是什么？
*   如何操作这些缓冲区

据我所知，到目前为止，我可以创建顶点和片段着色器。

*   使用片段着色器时可以操作哪个缓冲区
*   使用顶点着色器时可以操作哪个缓冲区
*   **GPU中是否有任何同步功能（我的意思是GPU中的同步。例如OpenCL或CUDA中块中的线程同步）**

**PS：**
我读了一篇论文[Using Mobile GPU for General-Purpose Computing](http://lbmedia.ece.ucsb.edu/resources/ref/vlsidat11.pdf)。他们的实验是在具有以下规格的 Nvidia Tegra SoC 上进行的：

1.  1GHz 双核 ARM Cortex-A9 CPU，
2.  1GB 内存
3.  运行频率为 333MHz 的 Nvidia 超低功耗 GeForce GPU，以及 512MB 闪存

它可以在 FFT(128*128) 上获得 3 倍的加速。我认为这些结果很好。大家觉得值不值得去做。那么主要的瓶颈是内存访问权限吗？

**正如许多人所说，在 OpenGL ES 上进行通用计算是不值得的。所以也不值得期待移动设备支持 OpenCL。对？在我看来，OpenGL ES 是 OpenCL 的基础**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:44:25.943

某些平台不支持任何浮点格式。一些平台（powervr、tegra、adreno）支持半浮点（16 位浮点）表面，既可以用作渲染目标，也可以用作纹理。某些平台（adreno，我相信最新的 powervr）上存在完全浮动支持，但很少见。

因此，这在很大程度上取决于您期望进行什么样的计算，您可以接受什么样的精度，以及您的目标平台是什么。

还要考虑到当前的 opengl es (2.0) 没有完整的 IEEE 浮动要求，因此结果可能会有所不同。

最后，是否值得在很大程度上取决于您的批量大小；访问结果（即，从渲染目标读回像素）可能非常慢，以至于抵消了性能增益。

要一一解决您的要点：

*   我可以使用多少种缓冲液？这些是什么？

您可以创建纹理并从中形成 FBO。此外，您可以将数据作为常量（uniforms）或每个顶点数据流（variings/attribs）提供给着色器。

*   如何操作这些缓冲区

您可以使用普通纹理处理函数写入纹理。

*   使用片段着色器时可以操作哪个缓冲区

绑定 FBO 后，您可以使用片段着色器对其进行写入。稍后，您可以通过读取绑定到 FBO 的纹理来访问结果。

*   使用顶点着色器时可以操作哪个缓冲区

没有任何。

*   GPU中是否有任何同步功能

您可以使用 glFinish() 刷新管道。但是，如果您尝试访问纹理数据，驱动程序应该会隐式地导致管道刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:25:40.667

在我涉足 OpenCL 之前，当我有大量的数字数据时，我会使用数字数据作为像素数据通过 rgba 图像将其提供给 GPU，然后对其进行操作：它是一种很好的快速方法，可以处理大量数据集以进行数学操作，尽管您必须从缓冲区复制回 CPU 才能提取更改，因此这取决于您需要以这种方式操作多少数据，是否值得，以及多少图形 RAM你有可用的核心数量等。

# postgresql - 查找所有输入参数以及与这些输入参数对应的查询

> ID：13909781
> 
> 赞同：2
> 
> 时间：2012-12-17T07:09:58.347
> 
> 标签：postgresql, input-parameters

我的电脑上有 Postgresql DB，我正在尝试将不同的数据库应用程序连接到 Postgresql，但在此之前（一个研究问题），对于每个应用程序，我需要查看所有输入参数以及与这些输入参数对应的所有查询应用程序可以做到。

如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:03:39.010

查看每个应用程序的代码并查看正在进行的调用。此外，根据用户可以选择的几乎无限的字符和数字组合，找出可以发送的所有参数值。

或者为了保持清醒，打开 postgresql 日志记录，让用户做他们的事情并分析正在进行的调用。

# cocos2d-iphone - 如果场景 iphone 上出现两个以上的精灵（来自 spritesheet），像素完美碰撞不起作用？

> ID：13909782
> 
> 赞同：1
> 
> 时间：2012-12-17T07:10:00.517
> 
> 标签：cocos2d-iphone

我正在 iPhone 中开发游戏，像素完美碰撞只有在场景中出现一个精灵时才会起作用，否则它将不起作用。您能提供一些信息吗？

我将此代码用于动画精灵（spritesheet）之间的像素完美碰撞。

```
 -(BOOL) isCollisionBetweenSpriteA:(CCSprite*)spr1 spriteB:(CCSprite*)spr2 pixelPerfect:(BOOL)pp

  {

BOOL isCollision = NO;

CGRect intersection = CGRectIntersection([spr1 boundingBox], [spr2 boundingBox]);

// Look for simple bounding box collision
if (!CGRectIsEmpty(intersection))
{
    // If we're not checking for pixel perfect collisions, return true
    if (!pp) {return YES;}

    CGPoint spr1OldPosition = spr1.position;
    CGPoint spr2OldPosition = spr2.position;

    spr1.position = CGPointMake(spr1.position.x - intersection.origin.x, spr1.position.y - intersection.origin.y);
    spr2.position = CGPointMake(spr2.position.x - intersection.origin.x, spr2.position.y - intersection.origin.y);

    intersection = CGRectIntersection([spr1 boundingBox], [spr2 boundingBox]);

    // Assuming that the spritebatchnode of both sprites is the same, I just use one. If each sprite has a different sprite batch node as parent you should modify the code to get the spriteBatchNode for each sprite and visit them.
    CCSpriteBatchNode* _sbnMain =(CCSpriteBatchNode*) spr1.parent;

    //NOTE: We are assuming that the spritebatchnode is always at 0,0

    // Get intersection info
    unsigned int x = (intersection.origin.x)* CC_CONTENT_SCALE_FACTOR();
    unsigned int y = (intersection.origin.y)* CC_CONTENT_SCALE_FACTOR();
    unsigned int w = intersection.size.width* CC_CONTENT_SCALE_FACTOR();
    unsigned int h = intersection.size.height* CC_CONTENT_SCALE_FACTOR();
    unsigned int numPixels = w * h;// * CC_CONTENT_SCALE_FACTOR();

    // create render texture and make it visible for testing purposes
    int renderWidth = w+1;
    int renderHeight = h+1;

    if(renderWidth<32)
    {
        renderWidth =32;
    }

    if(renderHeight < 32)
    {
        renderHeight =32;
    }

    renderTexture = [[CCRenderTexture alloc] initWithWidth:renderWidth height:renderHeight pixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    //rt is always going to be at 0,0 - can't change it.
    renderTexture.position = CGPointMake(0, 0);
    [self addChild:renderTexture];
    renderTexture.visible = NO;

    //NSLog(@"\nintersection = (%u,%u,%u,%u), area = %u",x,y,w,h,numPixels);

    // Draw into the RenderTexture
    [renderTexture beginWithClear:0 g:0 b:0 a:0];

    // Render both sprites: first one in RED and second one in GREEN
    glColorMask(1, 0, 0, 1);
    [_sbnMain visitSprite:spr1];
    glColorMask(0, 1, 0, 1);
    [_sbnMain visitSprite:spr2];
    glColorMask(1, 1, 1, 1);

    // Get color values of intersection area
    ccColor4B *buffer = malloc( sizeof(ccColor4B) * numPixels );
    glReadPixels(x, y, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    [renderTexture end];

    // Read buffer
    unsigned int step = 1;
    for(unsigned int i=0; i<numPixels; i+=step)
    {
        ccColor4B color = buffer[i];

        if (color.r > 0 && color.g > 0)
        {
            isCollision = YES;
            break;
        }
    }
    // Free buffer memory
    free(buffer);
    spr1.position = spr1OldPosition; 
    spr2.position = spr2OldPosition;

    [renderTexture release];
    [self removeChild:renderTexture cleanup:YES];
} return isCollision;} 
```

# delphi - 什么是声纳 Delphi 插件？如何使用它？

> ID：13909785
> 
> 赞同：0
> 
> 时间：2012-12-17T07:10:33.840
> 
> 标签：delphi, delphi-7, sonarqube, sonar-runner

我正在使用Delphi 7。我正在尝试使用Sonar Delphi Plgin，我很困惑我需要遵循什么，**有人可以指导我完成Sonar Delphi 的使用，即安装以及如何使用它。**

如果可能，请提供链接，因为我已经浏览了下面的链接，但它只给了我 jar 文件：

```
http://docs.codehaus.org/display/SONAR/Delphi+Plugin 
```

并与另一个链接混淆：

```
http://sonar.15.n6.nabble.com/sonar-dev-VOTE-Delphi-plugin-td4523726.html 
```

这是 Sonar runner 的以下链接：

```
http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Runner 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T05:46:09.217

基于最近获得这项工作的记忆。

*   确保已安装 Java 6 SDK（Delphi 插件不适用于 Java 7）
*   下载声纳应用程序：http: [//www.sonarsource.org/downloads/](http://www.sonarsource.org/downloads/)
*   安装声纳
*   运行声纳 (StartSonar.bat)
*   登录后（默认用户/密码是管理员）通过可用插件的更新中心列表安装 Delphi 插件。见：[http ://docs.sonarqube.org/display/SONAR/Update+Center](http://docs.sonarqube.org/display/SONAR/Update+Center)
*   从 Github 存储库中获取示例项目文件： [https](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages) ://github.com/SonarSource/sonar-examples/tree/master/projects/languages 那里有一个 Delphi 示例演示如何配置指向的 sonar-project.properties 文件到您的源代码目录。

*   设置 SONAR_RUNNER_HOME 环境变量后，在您配置的属性文件所在的文件夹中执行“sonar-runner”，让 Sonar 解析 Delphi 项目文件。

我打算回去玩这个，但它无法处理我扔给它的大部分代码，所以我有点失望地走开了。这似乎是一个非常酷的系统。

# gdb - GDB 的命令处理

> ID：13909788
> 
> 赞同：0
> 
> 时间：2012-12-17T07:10:56.273
> 
> 标签：gdb, command

我使用 GDB 在 Eclipse 中调试 C 代码，我想问一个关于 GDB 处理多个命令的问题。如果我通过外部软件向 GDB 发送多个命令，例如：我发送“bt”和“p 计数器”，而不是“帮助”。

是否有可能“bt”命令处理时间过长并返回 GDB 将暂停“bt”命令处理并尝试处理下一个命令的答案？

如果这样做对我来说没有意义，但对我来说知道它是否可能很重要。

我检查了谷歌，我已经阅读了 gdb 教程，但从未找到关于发送给它的 GDB 处理命令的解释。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:10:31.993

查看[GDB Internals](http://sourceware.org/gdb/current/onlinedocs/gdbint/)，其中讨论了许多重要的 GDB 操作和算法。如果您有时间，最好通过查看 GDB[源代码](http://ftp.gnu.org/gnu/gdb/)来深入挖掘以更好地理解。

# javascript - 垂直滚动条在 Android 中不起作用

> ID：13909789
> 
> 赞同：-1
> 
> 时间：2012-12-17T07:11:00.703
> 
> 标签：javascript, css, html

垂直滚动条在 Android 中不起作用：

这是我的 CSS 代码：

```
.innerItem {
  height:450px;
  overflow: auto;
  overflow-x:hidden;
} 
```

这是我的 HTML：

```
<div class="innerItem">
  my data:- its paragraph  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:45:50.410

我对android不是特别熟悉，但尝试更改为

```
.innerItem {
height:450px;
overflow-y: scroll;
overflow-x:hidden;
} 
```

# visual-studio-2012 - 在 Visual Studio 2012 Express 上安装后 wp8 sdk 在哪里

> ID：13909790
> 
> 赞同：0
> 
> 时间：2012-12-17T07:11:02.950
> 
> 标签：visual-studio-2012, windows-phone-8

我安装了 Visual Studio 2012 Express。然后我安装了 WP8 SDK。但安装后，我在 VS 2012 express 中找不到 WP8 选项。

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:13:29.380

创建一个新项目，然后选择 Windows Phone。那么应该有一个可能的项目类型列表......

你的问题不是很精确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:03:14.420

WP8 SDK 将安装“Visual Studio Express for Windows Phone”作为单独安装到您的其他 Visual Studio 2012 Express 产品。[有关如何启动它，](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-phone#product-express-phone-details)请参阅MSDN。

您无法从其他 Visual Studio Express 安装创建 WP 项目。为此，您将需要 Visual Studio Professional。

有关详细信息，请参阅[Programmers.StackExchange](https://softwareengineering.stackexchange.com/questions/166716/visual-studio-2012-express-vs-professional)中的此线程。

# haskell - 为什么这段代码会消耗这么多堆？

> ID：13909791
> 
> 赞同：0
> 
> 时间：2012-12-17T07:11:08.927
> 
> 标签：haskell, profiling, heap-memory, space-leak

[这是完整的存储库](https://github.com/s9gf4ult/posttest)。这是一个非常简单的测试，它使用 postgresql-simple 数据库绑定将 50000 个随机事物插入到数据库中。它使用 MonadRandom 并且可以懒惰地生成事物。

[这是惰性事物生成器](https://github.com/s9gf4ult/posttest/blob/master/Common.hs)。

[这是 case1](https://github.com/s9gf4ult/posttest/blob/master/posttest.hs)和使用事物生成器的特定代码片段：

```
insertThings c = do
  ts <- genThings
  withTransaction c $ do
    executeMany c "insert into things (a, b, c) values (?, ?, ?)" $ map (\(Thing ta tb tc) -> (ta, tb, tc)) $ take 50000 ts 
```

[这是 case2](https://github.com/s9gf4ult/posttest/blob/master/dumptest.hs)，它只是将事物转储到标准输出：

```
main = do
  ts <- genThings
  mapM print $ take 50000 ts 
```

在第一种情况下，我的 GC 时间非常糟糕：

```
cabal-dev/bin/posttest +RTS -s       
   1,750,661,104 bytes allocated in the heap
     619,896,664 bytes copied during GC
      92,560,976 bytes maximum residency (10 sample(s))
         990,512 bytes maximum slop
             239 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0      3323 colls,     0 par   11.01s   11.46s     0.0034s    0.0076s
  Gen  1        10 colls,     0 par    0.74s    0.77s     0.0769s    0.2920s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    2.97s  (  3.86s elapsed)
  GC      time   11.75s  ( 12.23s elapsed)
  RP      time    0.00s  (  0.00s elapsed)
  PROF    time    0.00s  (  0.00s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time   14.72s  ( 16.09s elapsed)

  %GC     time      79.8%  (76.0% elapsed)

  Alloc rate    588,550,530 bytes per MUT second

  Productivity  20.2% of total user, 18.5% of total elapsed 
```

在第二种情况下，时间很好：

```
cabal-dev/bin/dumptest +RTS -s > out
   1,492,068,768 bytes allocated in the heap
       7,941,456 bytes copied during GC
       2,054,008 bytes maximum residency (3 sample(s))
          70,656 bytes maximum slop
               6 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0      2888 colls,     0 par    0.13s    0.16s     0.0001s    0.0089s
  Gen  1         3 colls,     0 par    0.01s    0.01s     0.0020s    0.0043s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    2.00s  (  2.37s elapsed)
  GC      time    0.14s  (  0.16s elapsed)
  RP      time    0.00s  (  0.00s elapsed)
  PROF    time    0.00s  (  0.00s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    2.14s  (  2.53s elapsed)

  %GC     time       6.5%  (6.4% elapsed)

  Alloc rate    744,750,084 bytes per MUT second

  Productivity  93.5% of total user, 79.0% of total elapsed 
```

我曾尝试应用堆分析，但什么都不懂。看起来所有 50000 个事物都是先在内存中构建的，然后通过查询转换为 ByteStrings，然后将这些字符串发送到数据库。但为什么会发生呢？如何确定有罪代码？

GHC 版本是 7.4.2

所有库和包本身的编译标志为 -O2（由沙箱中的 cabal-dev 编译）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:33:51.030

我用 formatMany 和 50k Things 检查了个人资料。记忆稳步增加，然后迅速下降。使用的最大内存略高于 40mb。主要成本中心是 buildQuery 和 escapeStringConn，然后是 toRow。一半的数据是 ARR_WORDS（字节字符串）、Actions 和列表。

`formatMany``ByteString`从嵌套的 Actions 列表中组装而成的片段几乎很长。Actions 被转换为`ByteString`Builders，它保留`ByteStrings`直到用于产生 final long strict `ByteString`。这些字节串的寿命很长，直到最终的 BS 被构建。

字符串需要使用 libPQ 进行转义，因此任何非普通操作`BS`都将传递给 libPQ 并在 escapeStringConn 和朋友中替换为新操作，从而增加了更多垃圾。如果用另一个 Int 替换 Thing 中的 Text，GC 时间会从 75% 下降到 45%。

我试图通过 formatMany 和 buildQuery 减少对临时列表的使用，将 mapM 替换为 foldM 而不是 Builder。它没有多大帮助，但会稍微增加代码复杂性。

TLDR - `Builders` can't be consumed lazily because all of them are needed to produce final strict `ByteString` (pretty much array of bytes). If you have problem with memory, split executeMany into chunks inside same transaction.

# c++ - 使用 std::future 在 SFML 中加载纹理

> ID：13909797
> 
> 赞同：0
> 
> 时间：2012-12-17T07:11:31.703
> 
> 标签：c++, sfml, future

Visual Studio Express 2012，CTP1 c++ 编译器

以下代码有效。它加载图像并将其显示在窗口上，直到您将其关闭。

```
#include <memory>
#include <SFML/Graphics.hpp>
int main()
{
    sf::RenderWindow window(sf::VideoMode(800,600), "hello");

    auto Load = []() -> std::unique_ptr<sf::Texture> {
        std::unique_ptr<sf::Texture> tex_ptr(new sf::Texture);
        tex_ptr->loadFromFile("hello.png");
        return tex_ptr;
    };    
    auto tex_ptr = Load();
    sf::Sprite spr(*tex_ptr);

    while (window.isOpen())
    {
        sf::Event ev;
        while (window.pollEvent(ev))
        {
            if (ev.type == sf::Event::Closed)
                window.close();
        }    
        window.clear();
        window.draw(spr);
        window.display();
    }
} 
```

在以下代码中，我尝试使用`std::async`. 它打印“加载成功”，这表明在 lambda 中加载成功。然后，在外面，在我从未来检索纹理之后，我检查纹理的其他属性。尺寸打印正确。但是，没有图像显示。我只是得到一个黑色的窗口，它会根据命令关闭。

```
#include <future>
#include <memory>
#include <iostream>
#include <SFML/Graphics.hpp>
int main()
{
    sf::RenderWindow window(sf::VideoMode(800,600), "hello");

    auto Load = []() -> std::unique_ptr<sf::Texture> {
        std::unique_ptr<sf::Texture> tex_ptr(new sf::Texture);
        if (tex_ptr->loadFromFile("hello.png"))
            std::cout << "load success\n";
        else
            std::cout << "load failure\n";
        return tex_ptr;
    };

    auto tex_ptr_future = std::async(std::launch::async, Load);

    auto tex_ptr = tex_ptr_future.get();
    sf::Sprite spr(*tex_ptr);

    // Oddly, this prints out exactly what I expect
    auto size = tex_ptr->getSize();
    std::cout << size.x << 'x' << size.y << '\n';

    while (window.isOpen())
    {
        sf::Event ev;
        while (window.pollEvent(ev))
        {
            if (ev.type == sf::Event::Closed)
                window.close();
        }

        window.clear();
        window.draw(spr); // nothin'
        window.display();
    }
} 
```

有人看到我做错了什么吗？

# deployment - Azure Cloud Deploy 不断循环利用

> ID：13909798
> 
> 赞同：4
> 
> 时间：2012-12-17T07:11:38.617
> 
> 标签：deployment, azure, cloud, azure-sql-database

我收到以下错误：

> 回收（等待角色开始......正在部署站点。[2012-12-17T05:30:10Z]）
> 
> 运行一个或多个角色实例不正常。1 实例：1 不健康

我实际上是在尝试将我的 Web 应用程序转换为云应用程序。

这是我所做的：

我在我的解决方案中添加了一个云项目，我添加了一个链接到我的 Web 应用程序的 webrole 我创建了一个 sql azure 数据库并将我的整个结构以及数据复制到数据库中我在我的 webconfig 中插入了连接字符串并尝试运行它在仿真上，这工作得很好，然后尝试通过创建云服务、运行构建器来创建包并以“暂存”模式上传包来部署它。这是我得到错误的地方。

我试图创建一个空的云应用程序并添加一个默认的 webrole 并将其加载到云中，这很好。所以我想，也许我的 webrole 设置有问题。我检查了两者之间的区别，我注意到在两个解决方案中都启用了诊断，但在我自己的解决方案中存储帐户为空，因此我在此处插入了“UseDevelopmentStorage = true”。这并没有改变任何东西。我还看到了“packages.config”的不同之处

默认角色有：

```
<package id="Microsoft.WindowsAzure.ConfigurationManager" version="1.7.0.0" targetFramework="net40" />
  <package id="System.Web.Providers" version="1.1" targetFramework="net40" />
  <package id="System.Web.Providers.Core" version="1.0" targetFramework="net40" />
  <package id="WindowsAzure.Storage" version="1.7.0.0" targetFramework="net40" /> 
```

我的有：

```
 <package id="Microsoft.WindowsAzure.ConfigurationManager" version="1.7.0.0" targetFramework="net35" />
  <package id="WindowsAzure.Storage" version="1.7.0.0" targetFramework="net35" /> 
```

我试着改变这个并上传，没有做任何事情

我没有使用工作者角色，我只有 1 个正在运行的实例（与默认值相同）

我的应用程序在 global.asax 中使用了一些身份验证，它尝试从 User.Identity.Name 读取并与数据库中的用户进行比较（该用户被插入到 sql azure db 中）。起初我认为这可能是问题的原因，但即使我注释掉这段代码，应用程序也不会在云上运行。

VM 体积小，信任级别 = 完全信任

我还看到了我有远程访问参数的设置的一些差异。我尝试删除所有这些只是为了排除问题

我读了一些关于“复制本地是真的”的设置引用，但我不确定这是否会有所不同。

任何想法，因为我真的不知道该做什么了

编辑：

我修改了所有对“本地复制为真”的引用，并且我禁用了诊断，以确保它没有任何问题。

但现在我得到了错误：

```
<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

有趣的是，在我的 webconfig 中，这已经设置好了……而且我只能找到 1 个 webconfig。我不太确定我做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T02:29:03.313

“保持回收”几乎总是意味着在您的应用程序启动时发生了一些异常。您可能无法通过诊断监视器看到任何错误或异常，因为您的异常可能在您配置和启动诊断之前发生。

我建议您在部署时启用 IntelliTrace 选项。如果您使用的是 Visual Studio，这很容易做到。然后您可以通过 Visual Studio 检索 IntelliTrace 结果并找出发生了什么异常。我强烈认为在 azure 上遗漏了一些需要设置 Copy Local = true 的参考。但是您需要 IntelliTrace 才能找到它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T07:47:27.933

问题是我有一些引用的项目有一个 app.config 文件，其中包含一个本地数据库的字符串

# php - 使用未定义的常量 http_x_forwarded_for

> ID：13909803
> 
> 赞同：-4
> 
> 时间：2012-12-17T07:12:19.193
> 
> 标签：php

这是我的代码：

```
if (getenv(HTTP_X_FORWARDED_FOR))
{
    $pipaddress = getenv(HTTP_X_FORWARDED_FOR);
    $ipaddress = getenv(REMOTE_ADDR);
}
else
{
    $ipaddress = getenv(REMOTE_ADDR);
} 
```

我收到此错误：

```
use of undefined constant http_x_forwarded_for-assumed http_x_forwarded_for 
```

我没有得到实际的问题。帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:15:42.630

您将常量传递给[`getenv()`](http://php.net/manual/en/function.getenv.php)，这实际上需要一个字符串。

改成：

```
if (getenv('HTTP_X_FORWARDED_FOR')) 
```

它使用常量的原因是因为 PHP 无法找到常量，然后它会发出您看到的警告，然后使用常量名称作为字符串回退。

从[手册](http://php.net/manual/en/function.getenv.php)：

> 字符串 getenv ( 字符串 $varname )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:15:31.133

把它放在单引号中

```
getenv('HTTP_X_FORWARDED_FOR') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T07:15:52.100

引用论点`getenv`

`getenv('HTTP_X_FORWARDED_FOR');`

否则 php 认为你正在传递一个常量。

[http://sg2.php.net/getenv](http://sg2.php.net/getenv)

`string getenv ( string $varname )`需要一个字符串。

除非您`HTTP_X_FORWARDED_FOR`之前定义了一个字符串，否则我认为这不是您想要的。

# ios - presentModalViewController 不起作用

> ID：13909806
> 
> 赞同：0
> 
> 时间：2012-12-17T07:12:40.933
> 
> 标签：ios, uiviewcontroller, presentmodalviewcontroller

```
-(void)backAction:(id)sender
{ 
   SecondViewController *viewCtrl = [[SecondViewController alloc] init];

   [self.presentingViewController dismissModalViewControllerAnimated:NO];

   [self.presentingViewController presentModalViewController:viewCtrl animated:YES];
} 
```

我想要`dismissModalViewControllerAnimated`当前的控制器，然后呈现一个新的控制器。但它只是`dismissModalViewControllerAnimated:NO`。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:39:09.847

self.presentingViewController 在您在第一行解雇自己后将为零。因此，您所要做的就是在解雇之前直接引用该控制器的任何内容。在以下示例中，呈现视图控制器属于 ViewController 类。您将不得不使用实际呈现视图控制器的类。

```
-(void)backAction:(id)sender {
     ViewController *presenter = (ViewController *)self.presentingViewController; 
     SecondViewController *viewCtrl = [[SecondViewController alloc] init];

     [presenter dismissModalViewControllerAnimated:NO];
     [presenter presentModalViewController:viewCtrl animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:17:38.137

也许你可以试试这个：

```
[self.presentingViewController dismissViewControllerAnimated:NO completion:^{
    [self.presentingViewController presentModalViewController:viewCtrl animated:YES];
}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:24:00.093

在这一行中，您已经关闭了视图控制器

```
[self.presentingViewController dismissModalViewControllerAnimated:NO]; 
```

然后在下一行中，您尝试使用已关闭的视图控制器预设模式视图。

```
[self.presentingViewController presentModalViewController:viewCtrl animated:YES]; 
```

而是尝试使用这两个视图的父视图控制器（如果有的话）呈现模态视图。您还可以在关闭第一个视图后向您的父视图控制器发出通知，以便您可以从父视图控制器启动第二个模态视图。

# ruby-on-rails - 错误，Ruby on Rails：CoursesController#attachment "\xFF" 中的 Encoding::UndefinedConversionError 从 ASCII-8BIT 到 UTF-8

> ID：13909812
> 
> 赞同：23
> 
> 时间：2012-12-17T07:12:57.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想在 Rails 3.2.8 上使用 tag_form 制作一个简单的文件上传器。
但是当我尝试提交图像文件时，我收到一条

**错误消息（当我尝试提交图像文件时）**

> 从 ASCII-8BIT 到 UTF-8 CoursesController#attachment
> "\xFF"中的编码::UndefinedConversionError

如果您能帮我解决这个问题，我将不胜感激。
这是我的代码。

**应用程序/视图/show.html.erb**

```
<%= form_tag(attachment_course_path, :action=>'attachment', :multipart => true) do %>
<div class="field">
  <%= label_tag :file %>
  <%= file_field_tag :file %>
</div>
<div class="actions">
  <%= submit_tag 'Submit' %>
</div>
<% end %> 
```

**应用程序/控制器/courses_controller.rb**

```
def attachment
  t = Time.now.strftime("%Y%m%d%H%M%S")
  uploaded_io = params[:file]
  File.open(Rails.root.join('public', 'upload', uploaded_io.original_filename), 'w') do |file|
    file.write(uploaded_io.read)
  end
end 
```

**配置/路由.rb**

```
resources :courses, :only => [ :show ] do
  member do
    post :attachment
  end
end 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-17T07:32:59.627

尝试以二进制模式（`'wb'`而不是`'w'`）打开文件：

```
 ...
  File.open(Rails.root.join('public', 'upload', uploaded_io.original_filename), 'wb') do |file|
    file.write(uploaded_io.read)
  end 
```

[Ruby Docs IO 开放模式](http://ruby-doc.org//core-2.2.0/IO.html#method-c-new-label-IO+Open+Mode)

# iphone - 存在 iCloud 帐户时 MFMailComposeViewController 中的错误？

> ID：13909815
> 
> 赞同：4
> 
> 时间：2012-12-17T07:13:24.937
> 
> 标签：iphone, objective-c, ios, email, icloud

我一直在使用 MFMailComposeViewController 来允许用户从我的应用程序发送邮件而不会出现问题。但我发现如果我在设备上设置了“iCloud 帐户”[MFMailComposeViewController [canSendMail]](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/occ/clm/MFMailComposeViewController/canSendMail)返回 0。

如果我删除 iCloud 帐户，MFMailComposeViewController 将恢复工作。我努力了; 将iOS设置中的默认邮件帐户设置为我的gmail帐户，使用“@iCloud”电子邮件设置我的iCloud帐户（我知道这有效，因为我可以使用它从邮件应用程序发送邮件）。

任何想法将不胜感激。

编辑

1.  我发现其他应用程序没有同样的问题。
2.  在为电子邮件构建内容时，我一直在使用许多线程同时从 UIDocument 实例中获取数据，我发现如果我按顺序加载文档，则不会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:16:32.910

对我来说听起来像是一个严重的错误。您绝对应该提交雷达。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:16:41.620

这不是一个已知的错误 AFAIK ......听起来也很奇怪，
它可以在其他应用程序内部工作吗？（不包括邮件）

如果不是，我会提交一个错误

# java - 仅使用选定数据点的 Junit 数据驱动测试

> ID：13909819
> 
> 赞同：0
> 
> 时间：2012-12-17T07:13:46.120
> 
> 标签：java, junit, data-driven

我有 3 个字符串数组数据点和 2 个整数数组数据点。

```
@DataPoint public static Integer[] xxx ={100,200};
@DataPoint public static Integer[] x ={-14,15};
@DataPoint public static String[] xx = new String[]{"de" ,"Y"};
@DataPoint public static String[] cityCode = new String[]{"de" ,"abc"};
 @DataPoint public static String[] city = new String[]{"de" ,"dfg"};

@Theory public void xxx(String[] result ,Integer[] checkdt ) 
```

运行此测试用例时，它需要 3 个字符串数组的数据点，但我只想使用字符串数组的 2 个数据点，我怎么能只使用 2 个数据点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:43:46.110

据我了解，没有选择`specific DataPoint`to `specicfic Theory`。

每个都`@Theory`将针对`@DataPoint`.

您是否要过滤 DataPoint 数据您可以断言您想要的输入数据并运行休息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:12:32.647

您可以使用[Assume](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/Assume.java)过滤数据点。在测试开始时，添加如下内容：

```
@Theory public void xxx(String[] result ,Integer[] checkdt )  {
    Assume.assumeTrue("Y".equals(result[1]);
    // rest of test
} 
```

# webrtc - WebRTC + JSEP + Google Channel API - 无法接收remoteStream

> ID：13909831
> 
> 赞同：3
> 
> 时间：2012-12-17T07:14:30.680
> 
> 标签：webrtc

我一直在努力解决这个问题，但我不知道出了什么问题，你们能帮帮我吗？我尝试了像这样修改的 WebRTC 代码。

*   调用者和被调用者都进入网络
*   Web 将根据他们的用户名创建频道
*   呼叫者单击呼叫按钮并将消息发送到特定频道到某个用户的用户名。当呼叫者单击呼叫按钮时，他然后创建 peerConnection 并添加 localStream
*   被调用者将收到消息，该过程像 WebRTC 示例代码一样继续进行。当被调用者收到一个offer时，他会创建peerConnection并添加localStream，然后创建并发送answer

我的代码是这样的

```
 var my_username = '{{ current_username }}';
        var friend;

        var localVideo;
        var remoteVideo;
        var localStream;
        var remoteStream;
        var channel;
        var channelReady = false;
        var pc;
        var socket;
        var started = false;
        // Set up audio and video regardless of what devices are present.
        var mediaConstraints = {'mandatory': {
                        'OfferToReceiveAudio':true, 
                        'OfferToReceiveVideo':true }};
        var isVideoMuted = false;
        var isAudioMuted = false;

        function choiceFriendInitialize() {
            var choice_visible = false;

            $('ul#friendlist > li').click(function(e) {
                $(this).css('background-color', '#808080');
                friend = $(this).text();
                var choice = $('ul#choice');
                choice_visible = true;
                choice.css('display', 'inline-block');
                choice.css('top', e.pageY);
                choice.css('left', e.pageX);
            });

            // trigger call from here
            $('li#call').click(function() {
                $('ul#friendlist > li').css('background-color', 'transparent');
                $('ul#choice').css('display', 'none');
                choice_visible = false;

                // call
                maybeStart();
                doCall();
            });

            $('li#unfriend').click(function() {
                $('ul#friendlist > li').css('background-color', 'transparent');
                $('ul#choice').css('display', 'none');
                choice_visible = false;
            });

            $("body").mouseup(function(){ 
                if (choice_visible) {
                    $('ul#friendlist > li').css('background-color', 'transparent');
                    $('ul#choice').css('display', 'none');
                    choice_visible = false;
                }
            });
        }

        function initialize() {
            console.log("Initializing..");
            choiceFriendInitialize();

            localVideo = document.getElementById("localVideo");
            remoteVideo = document.getElementById("remoteVideo");
            openChannel();
            doGetUserMedia();
        }

        function openChannel() {
            console.log("Opening channel.");
            var channel = new goog.appengine.Channel('{{ token }}');
            var handler = {
                'onopen': onChannelOpened,
                'onmessage': onChannelMessage,
                'onerror': onChannelError,
                'onclose': onChannelClosed
            };
            socket = channel.open(handler);
        }

        function doGetUserMedia() {
            // Call into getUserMedia via the polyfill (adapter.js).
            var constraints = {"mandatory": {}, "optional": []};
            try {
                getUserMedia({'audio':true, 'video':constraints}, onUserMediaSuccess, onUserMediaError);
                console.log("Requested access to local media with mediaConstraints:\n" + "  \"" + JSON.stringify(constraints) + "\"");
            } catch (e) {
                alert("getUserMedia() failed. Is this a WebRTC capable browser?");
                console.log("getUserMedia failed with exception: " + e.message);
            }
        }

        function createPeerConnection() {
            var pc_config = {"iceServers": [{"url": "stun:stun.l.google.com:19302"}]};
            try {
                // Create an RTCPeerConnection via the polyfill (adapter.js).
                pc = new RTCPeerConnection(pc_config);
                pc.onicecandidate = onIceCandidate;
                console.log("Created RTCPeerConnnection with config:\n" + "  \"" + JSON.stringify(pc_config) + "\".");
            } catch (e) {
                console.log("Failed to create PeerConnection, exception: " + e.message);
                alert("Cannot create RTCPeerConnection object; WebRTC is not supported by this browser.");
                return;
            }
            pc.onconnecting = onSessionConnecting;
            pc.onopen = onSessionOpened;
            pc.onaddstream = onRemoteStreamAdded;
            pc.onremovestream = onRemoteStreamRemoved;
        }

        function maybeStart() {
            if (!started && localStream && channelReady) {
                console.log("Creating PeerConnection.");
                createPeerConnection();
                console.log("Adding local stream.");
                pc.addStream(localStream);
                started = true;
                // Caller initiates offer to peer.
                //if (initiator)
                    //doCall();
            }
        }

        function doCall() {
            console.log("Sending offer to peer.");
            pc.createOffer(setLocalAndSendMessage, null, mediaConstraints);
        }

        function doAnswer() {
            console.log("Sending answer to peer.");
            pc.createAnswer(setLocalAndSendMessage, null, mediaConstraints);
        }

        function setLocalAndSendMessage(sessionDescription) {
            // Set Opus as the preferred codec in SDP if Opus is present.
            sessionDescription.sdp = preferOpus(sessionDescription.sdp);
            pc.setLocalDescription(sessionDescription);
            sendMessage({from: my_username, to: friend}, sessionDescription);
        }

        function sendMessage(client, message) {
            console.log('C->S: ' + JSON.stringify(message));
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/send', true);
            xhr.setRequestHeader("Content-type","application/json");
            var msgString = {send_info: client, data_message: message};
            xhr.send(JSON.stringify(msgString));
        }

        function processSignalingMessage(message) {
            var msg = JSON.parse(message);
            var data_message = msg.data_message;
            var send_info = msg.send_info;
            if (data_message.type === 'offer') {
                // Callee creates PeerConnection
                if (!started)
                    maybeStart();
                pc.setRemoteDescription(new RTCSessionDescription(data_message));

                friend = send_info.from;
                doAnswer();
            } else if (data_message.type === 'answer' && started) {
                pc.setRemoteDescription(new RTCSessionDescription(data_message));
            } else if (data_message.type === 'candidate' && started) {
                var candidate = new RTCIceCandidate({sdpMLineIndex:data_message.label, candidate:data_message.candidate});
                pc.addIceCandidate(candidate);
            } else if (data_message.type === 'bye' && started) {
                onRemoteHangup();
            }
        }

        function onChannelOpened() {
            console.log('Channel opened.');
            channelReady = true;
        }

        function onChannelMessage(message) {
            console.log('S->C: ' + message.data);
            processSignalingMessage(message.data);
        }

        function onChannelError() {
            console.log('Channel error.');
        }

        function onChannelClosed() {
            console.log('Channel closed.');
        }

        function onUserMediaSuccess(stream) {
            console.log("User has granted access to local media.");
            // Call the polyfill wrapper to attach the media stream to this element.
            attachMediaStream(localVideo, stream);
            localVideo.style.opacity = 1;
            localStream = stream;
            // Caller creates PeerConnection.
            //if (initiator) maybeStart();
        }

        function onUserMediaError(error) {
            console.log("Failed to get access to local media. Error code was " + error.code);
            alert("Failed to get access to local media. Error code was " + error.code + ".");
        }

        function onIceCandidate(event) {
            if (event.candidate) {
                sendMessage({from: my_username, to: friend}, {type: 'candidate',
                    label: event.candidate.sdpMLineIndex,
                    id: event.candidate.sdpMid,
                    candidate: event.candidate.candidate});
            } else {
                console.log("End of candidates.");
            }
        }

        function onSessionConnecting(message) {
            console.log("Session connecting.");
        }

        function onSessionOpened(message) {
            console.log("Session opened.");
        }

        function onRemoteStreamAdded(event) {
            console.log("Remote stream added.");
            attachMediaStream(remoteVideo, event.stream);
            remoteStream = event.stream;
            waitForRemoteVideo();
        }

        function onRemoteStreamRemoved(event) {
            console.log("Remote stream removed.");
        }

        function onHangup() {
            console.log("Hanging up.");
            transitionToDone();
            stop();
            // will trigger BYE from server
            socket.close();
        }

        function onRemoteHangup() {
            console.log('Session terminated.');
            transitionToWaiting();
            stop();
        }

        function stop() {
            started = false;
            isAudioMuted = false;
            isVideoMuted = false;
            pc.close();
            pc = null;
        }

        function waitForRemoteVideo() {
            if (remoteStream.videoTracks.length === 0 || remoteVideo.currentTime > 0) {
                console.log('ada remote stream');
                transitionToActive();
            } else {
                console.log('ga ada remote stream');
                setTimeout(waitForRemoteVideo, 100);
            }
        }

        function transitionToActive() {
            remoteVideo.style.opacity = 1;
        }

        function transitionToWaiting() {
            remoteVideo.style.opacity = 0;
        }

        function transitionToDone() {
            localVideo.style.opacity = 0;
            remoteVideo.style.opacity = 0;
        }

        function toggleVideoMute() {
            if (localStream.videoTracks.length === 0) {
                console.log("No local video available.");
                return;
            }

            if (isVideoMuted) {
                for (i = 0; i < localStream.videoTracks.length; i++) {
                    localStream.videoTracks[i].enabled = true;
                }
                console.log("Video unmuted.");
            } else {
                for (i = 0; i < localStream.videoTracks.length; i++) {
                    localStream.videoTracks[i].enabled = false;
                }
                console.log("Video muted.");
            }
            isVideoMuted = !isVideoMuted;
        }

        function toggleAudioMute() {
            if (localStream.audioTracks.length === 0) {
                console.log("No local audio available.");
                return;
            }

            if (isAudioMuted) {
                for (i = 0; i < localStream.audioTracks.length; i++) {
                    localStream.audioTracks[i].enabled = true;
                }
                console.log("Audio unmuted.");
            } else {
                for (i = 0; i < localStream.audioTracks.length; i++){
                    localStream.audioTracks[i].enabled = false;
                }
                console.log("Audio muted.");
            }

            isAudioMuted = !isAudioMuted;
        }

        setTimeout(initialize, 1);

        // Send BYE on refreshing(or leaving) a demo page
        // to ensure the room is cleaned for next session.
        window.onbeforeunload = function() {
            sendMessage({from: my_username, to: friend}, {type: 'bye'});
            //Delay 100ms to ensure 'bye' arrives first.
            setTimeout(function(){}, 100);
        }

        // Ctrl-D: toggle audio mute; Ctrl-E: toggle video mute.
        // On Mac, Command key is instead of Ctrl.
        // Return false to screen out original Chrome shortcuts.
        document.onkeydown = function() {
            if (navigator.appVersion.indexOf("Mac") != -1) {
                if (event.metaKey && event.keyCode === 68) {
                    toggleAudioMute();
                    return false;
                }
                if (event.metaKey && event.keyCode === 69) {
                    toggleVideoMute();
                    return false;
                }
            } else {
                if (event.ctrlKey && event.keyCode === 68) {
                    toggleAudioMute();
                    return false;
                }
                if (event.ctrlKey && event.keyCode === 69) {
                    toggleVideoMute();
                    return false;
                }
            }
        }

        // Set Opus as the default audio codec if it's present.
        function preferOpus(sdp) {
            var sdpLines = sdp.split('\r\n');
            // Search for m line.
            for (var i = 0; i < sdpLines.length; i++) {
                if (sdpLines[i].search('m=audio') !== -1) {
                    var mLineIndex = i;
                    break;
                }
            }
            if (mLineIndex === null)
                return sdp;
                // If Opus is available, set it as the default in m line.
            for (var i = 0; i < sdpLines.length; i++) {
                if (sdpLines[i].search('opus/48000') !== -1) {
                    var opusPayload = extractSdp(sdpLines[i], /:(\d+) opus\/48000/i);
                    if (opusPayload)
                        sdpLines[mLineIndex] = setDefaultCodec(sdpLines[mLineIndex], opusPayload);
                    break;
                }
            }
            // Remove CN in m line and sdp.
            sdpLines = removeCN(sdpLines, mLineIndex);
            sdp = sdpLines.join('\r\n');
            return sdp;
        }

        function extractSdp(sdpLine, pattern) {
            var result = sdpLine.match(pattern);
            return (result && result.length == 2)? result[1]: null;
        }

        // Set the selected codec to the first in m line.
        function setDefaultCodec(mLine, payload) {
            var elements = mLine.split(' ');
            var newLine = new Array();
            var index = 0;
            for (var i = 0; i < elements.length; i++) {
                if (index === 3) // Format of media starts from the fourth.
                    newLine[index++] = payload; // Put target payload to the first.
                if (elements[i] !== payload)
                    newLine[index++] = elements[i];
            }
            return newLine.join(' ');
        }

        // Strip CN from sdp before CN constraints is ready.
        function removeCN(sdpLines, mLineIndex) {
            var mLineElements = sdpLines[mLineIndex].split(' ');
            // Scan from end for the convenience of removing an item.
            for (var i = sdpLines.length-1; i >= 0; i--) {
                var payload = extractSdp(sdpLines[i], /a=rtpmap:(\d+) CN\/\d+/i);
                if (payload) {
                    var cnPos = mLineElements.indexOf(payload);
                    if (cnPos !== -1) {
                        // Remove CN payload from m line.
                        mLineElements.splice(cnPos, 1);
                    }
                    // Remove CN line in sdp
                    sdpLines.splice(i, 1);
                }
            }
            sdpLines[mLineIndex] = mLineElements.join(' ');
            return sdpLines;
        } 
```

当涉及到 waitForRemoteVideo 时，该函数调用 else 条件。但是 remoteVideo 的 blob url 存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:20:59.220

有趣的是，我一直在寻找错误并重写代码三遍，突然在这里发布我的问题后，我意识到我的错误。

这里在函数 processSignallingMessage..

```
if (data_message.type === 'offer') {
    // Callee creates PeerConnection
    if (!started)
        maybeStart();
        pc.setRemoteDescription(new RTCSessionDescription(data_message));

        friend = send_info.from;
        doAnswer();
    } else .... 
```

应该是这样的：

```
if (data_message.type === 'offer') {
    friend = send_info.from;
    // Callee creates PeerConnection
    if (!started)
        maybeStart();
        pc.setRemoteDescription(new RTCSessionDescription(data_message));

        doAnswer();
    } else .... 
```

`friend`因为被调用者需要在发送候选消息之前填充变量。

# ios - MPMoviePlayerController 关闭全屏模式在 iOS 6 中不起作用

> ID：13909834
> 
> 赞同：3
> 
> 时间：2012-12-17T07:14:49.467
> 
> 标签：ios, ipad, mpmovieplayercontroller

在带有 iOS 5的`MPMoviePlayerController`iPad 上工作正常，最初视频通过`MPMoviePlayerController`在特定帧添加到 self 的子视图开始。按下`MPMoviePlayerController`嵌入式控件上的全屏按钮以全屏显示电影，再次点击按钮将使视频回到初始帧在 iOS 5 中。但在 iOS 6 中，当我按下全屏按钮将视频带到初始帧时，视频刚刚离开屏幕。看起来 Apple 对`MPMoviePlayer`导致这种奇怪行为的类进行了一些未记录的更改。有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:46:47.093

我自己解决了这个问题，在 iOS 6 中，苹果对`MPMoviePLayerController`类进行了一些未记录的更改，当您点击全屏按钮时，控制器启动`viewWillDisappear`及其ParentController `viewDidDisAppear`都会调用and 。`MPMoviePLayerController`

在我的项目（一个 pdf 阅读器）中，我有一个非常复杂的视图层次结构，在视图控制器中添加一个阅读器，然后将 readerPageContents 按钮（图片库、视频、链接）添加到阅读器页面，然后在视频按钮点击上播放视频。所以它正在调用 ViewWillDisappear 并`ViewDidDisappear`在全屏启动视频时，当我按下切换屏幕按钮将视频带到初始帧时，两个控制器的`ViewWillAppear`and`ViewDidAppear`再次调用，我在父控制器 viewDidAppear 中再次创建 pdf 页面正在删除视频。

所以更容易修复它以避免`ViewDidDisappear`并`ViewWillDisappear`通过设置一些`BOOL`.

# jquery - 奇怪的 jQuery 语法 - jEditable 插件

> ID：13909836
> 
> 赞同：0
> 
> 时间：2012-12-17T07:14:53.100
> 
> 标签：jquery, jquery-ui, jeditable

这个声明有什么作用：

```
var row =   jQuery("../../td",link) ; // $(link).parent().parent().children(); 
```

link = button.evenLink（一个带有名为“eventLink”的css类的按钮）。此按钮位于可编辑表格的单元格内。

我正在尝试同时使用 jEditable 插件和 jQuery UI，但这个插件似乎与 jquery UI 所需的 jQuery 1.7.* 不兼容。

问题似乎是***tableEditor.js***文件中的上述语句。我尝试用父选择器替换它（如上面注释的代码所示，但它可能不会返回相同的对象）。那么，谁能给出一个想法，**上面的语句究竟返回了什么或者应该/可以做些什么来使这个插件与 jquery UI 一起工作？**谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:53:15.467

由于 tableEditor 使用 jquery 1.0.3 版本，因此它可能还会在其他部分产生您尚未发现的问题。所以我建议你使用一些与最新版本的 jquery 兼容的其他插件。一种选择可能是使用[jqGrid](http://trirand.com/blog/jqgrid/jqgrid.html)。

```
var row =   jQuery("../../td",link) ; 
```

此代码的格式为：

```
$(expr, context) 
```

它接受一个包含 CSS 选择器或基本 XPath 的字符串，然后用于将一组元素与指定的 DOM 元素或文档的上下文进行匹配。

```
expr (String): An expression to search with.
context (Element): A DOM Element, or Document, representing the base context. 
```

并且 jquery 不再支持 XPath 选择器语法。

# symfony1 - 如何解决错误内存大小耗尽的字节

> ID：13909837
> 
> 赞同：0
> 
> 时间：2012-12-17T07:14:54.497
> 
> 标签：symfony1

我正在尝试在 wamp 上安装 symfony

[http://trac.symfony-project.org/wiki/HowToInstallSymfonyOnWindowsWithWamp](http://trac.symfony-project.org/wiki/HowToInstallSymfonyOnWindowsWithWamp)

执行第二步时：pear install symfony/symfony

我在下面显示错误，如何进行

致命错误：第 39 行 /home/www/sf_projects/homepage/lib/vendor/symfony/lib/widget /sfWidgetFormDate.class.php 中允许的内存大小为 16777216 字节（试图分配 7680 字节）![在此处输入图像描述](../Images/a750145349cf6a29ca9631bce98af057.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:53:22.733

只需通过在 php.ini 中设置适当的值来增加 PHP 环境的内存限制

看起来您只分配了 16MB，请尝试增加此值。通用设置适用于 CLI 环境。

```
memory_limit = 128M 
```

在调整需要重新启动 apache 服务器的值之后，您会在 WAMP 文件夹中的某处找到 php.ini。

# mysql - 如何导出给定时间段的 MySQL 数据？

> ID：13909838
> 
> 赞同：2
> 
> 时间：2012-12-17T07:15:11.320
> 
> 标签：mysql, phpmyadmin

我需要从 MySQL 数据库中导出数据，问题是我只想导出给定时间段的数据。是否可以通过 phpMyAdmin？如果是，请详细说明如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:42:11.457

您可以在 mysql 中使用 Scheduler 事件，例如

```
CREATE EVENT exportName 
ON SCHEDULE
EVERY 1 DAY
DO
SELECT *
INTO OUTFILE 'C:/products.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM products 
```

它将每天将表格数据导出到 csv 文件中。

编辑 ：

请使用以下命令检查您的调度程序：

```
mysql>SHOW PROCESSLIST; 
```

在结果表中，查看 user→event_handler 和 Command→Daemon。如果该行不在表中，那么这就是事件失败的原因。并设置事件处理程序如下，

```
mysql>SET global event_scheduler=ON; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:37:08.717

试试[BETWEEN](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)运算符。例如：

```
SELECT * FROM some_table WHERE date_column BETWEEN "2012-08-04" AND NOW(); 
```

# vim - 将 .vim 主目录设置为特定的内容

> ID：13909841
> 
> 赞同：7
> 
> 时间：2012-12-17T07:15:26.183
> 
> 标签：vim, macvim

我的项目都在`/Users/username/workspace/my_project`where `/Users/username/`is下`$HOME`。

我希望 macvim 始终拥有 home`/Users/username/workspace/my_project`而不是`/Users/username/`.

我知道`set autochdir`将主目录设置为当前文件的目录，但这不是我想要的。如果有帮助，我也在使用 NerdTree。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T07:36:02.887

你希望 Vim 的工作目录是`~/my_project`?

添加`cd ~/my_project`到您的`~/.vimrc`.

您是否希望从 加载所有插件和配色方案`~/my_project`，不管它多么愚蠢？

见`:help runtimepath`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-25T06:43:11.760

添加`autocmd VimEnter * :cd ~/my_project/`到您的 vimrc
目录只会在您打开 vim 时更改，您可以随时决定更改到另一个目录`:cd /directory/`

# c# - 登录页面未正确重定向

> ID：13909843
> 
> 赞同：0
> 
> 时间：2012-12-17T07:15:38.927
> 
> 标签：c#, asp.net, login

我使用文本框制作了一个基本的登录页面。我正在验证创建的数据库中的用户。下面是我的后端代码：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    SqlDataReader sdrDatanew = null; //Read rows one by one.
    string strnew;
    string connectionString = WebConfigurationManager.ConnectionStrings["Gen_LicConnectionString"].ConnectionString; //Define new connectionstring
    SqlConnection connew = new SqlConnection(connectionString); //establishes a new sql connection
    connew.Open(); //Opens Connection
    strnew = "select User_Type from User_Details where User_Type='" + ddlUserSel.SelectedItem.Value + "' AND LoginID = '" + txtUserName.Text + "' AND Password = '" + txtPassword.Text + "'";
    SqlCommand sqlCommnew = new SqlCommand(strnew, connew); //passes the command and connection
    sdrDatanew = sqlCommnew.ExecuteReader(); //For select command

    int userType = 0;

    if (sdrDatanew.HasRows)
    {
        if (sdrDatanew.Read())
        {
            userType = Convert.ToInt32(sdrDatanew["User_Type"].ToString());
        }
    }

    switch (userType)
    {
        case 0:
            Response.Redirect("Lic_Gen.aspx");
            break;
        case 1:
            Response.Redirect("Cust_Page.aspx");
            break;
        default:
            lblDisp.Text= "Invalid User/Password";
            break;
    }

    connew.Close();
} 
```

这是我的前端代码：

```
<div>
    <h2 class="style12">
        LOGIN</h2>
    <p class="style10">
        &nbsp;</p>
    <table align="center" cellpadding="2" cellspacing="5" style="border-width: thick;
        border-style: outset; height: 195px;" class="style14">
        <tr>
            <td class="style16" style="border-style: none; font-family: 'Times New Roman', Times, serif;
                font-size: 17.5px; font-weight: bold; font-style: normal">
                User Type</td>
            <td class="style17">
                <asp:DropDownList ID="ddlUserSel" runat="server" Height="25px" Width="260px" CssClass="drp">
                    <asp:ListItem Value="0">Admin</asp:ListItem>
                    <asp:ListItem Value="1">Customer</asp:ListItem>
                </asp:DropDownList>
            </td>
        </tr>
        <tr>
            <td class="style16" style="border-style: none; font-family: 'Times New Roman', Times, serif;
                font-size: 17.5px; font-weight: bold; font-style: normal">
                Login
            </td>
            <td class="style17">
                <asp:TextBox ID="txtUserName" runat="server" Width="250px" CssClass="Textbox1" MaxLength="15"></asp:TextBox>
                <asp:RequiredFieldValidator ID="reqUserName" runat="server" ErrorMessage="*" ForeColor="Red"
                    ControlToValidate="txtUserName" Font-Size="Large"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td class="style16" style="font-family: 'Times New Roman', Times, serif; font-size: 17.5px;
                font-weight: bold; font-style: normal">
                Password
            </td>
            <td class="style17">
                <asp:TextBox ID="txtPassword" runat="server" TextMode="Password" Width="250px" CssClass="Textbox1" MaxLength="15"></asp:TextBox>
                 <asp:RequiredFieldValidator ID="reqPassword" runat="server" ErrorMessage="*" ForeColor="Red"
                    ControlToValidate="txtPassword" Font-Size="Large"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <asp:Label ID="lblDisp" runat="server" ForeColor="Red"></asp:Label>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                &nbsp;<asp:Button ID="btnSubmit" runat="server" CssClass="btn1" Text="Submit" 
                    OnClick="btnSubmit_Click" Width="80px"/>
                &nbsp;&nbsp;
                <asp:Button ID="btnCancel" runat="server" CssClass="btn1" Text="Cancel" 
                    OnClick="btnCancel_Click" Width="80px"/>
            </td>
        </tr>
    </table>
</div> 
```

现在我遇到以下问题：

1.  无论用户类型如何，页面总是被重定向到`Lic_Gen.aspx`.
2.  即使我输入了错误的密码，页面仍然会被重定向到`Lic_Gen.aspx`.
3.  该页面还应检查输入的 userType 是否对`Admin`特定`Customer`的`Login ID`and有效`Password`。但我也做不到。

我知道这些问题正在到来，因为我已将`UserType`value 明确定义为`0`.

当我尝试使用以下代码转换它时： `int userType = Convert.ToInt32(strnew);`它不起作用。

那么关于如何改进我的基本页面的任何指导方针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:25:35.077

你写的代码是错误的。即使输入了错误的密码，它也会重定向，因为即使 sql 查询没有返回任何结果，你也给 userType 赋值为 0。另外我假设查询没有返回任何创建页面的值，以便每次都重定向到 Lic_Gen.aspx 。我建议你看看 ASP 会员框架，它提供了所有这些功能，而无需所有这些代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:24:47.687

根据提供的代码，可能的问题是：

1.  没有返回数据`sdrDatanew`，因此`userType`总是保留`0`
2.  下返回的 DB 中的数据`sdrDatanew["User_Type"]`始终为 0（字符串），因此`userType`始终保持`0`

请使用以上几点进行进一步调试，我发现代码中没有问题。

**注意：您的代码容易受到 SQL 注入攻击。请阅读详细信息@http: [//en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)。如果您打算在某个地方发布此网站，那么您肯定会遇到麻烦。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:43:17.593

不要使用`sdrDatanew.HasRows`，只检查数据阅读器`Read()`方法：

```
 int userType = -1;
    if (sdrDatanew.Read())
    {
        userType = Convert.ToInt32(sdrDatanew["User_Type"].ToString());
    } 
```

# grid - Kendo UI Grid 内联编辑发布的数据为空

> ID：13909850
> 
> 赞同：4
> 
> 时间：2012-12-17T07:16:24.657
> 
> 标签：grid, kendo-ui, postdata

我正在关注 MVC4 中的演示网格内联编辑，但我发现插入/编辑控制器中发布的网格数据为空。

cshtml代码如下：

```
@(Html.Kendo().Grid<CRM.Models.M_ProductGroup>()
    .Name("Group")
    .Columns(columns =>
    {
        //columns.Bound(g => g.CompanyNo).Hidden();
        columns.Bound(g => g.CompanyNo).Width(60);
        columns.Bound(g => g.ProductGroupNo).Width(60);
        columns.Bound(g => g.ProductGroupName).Width(120);
        columns.Command(command =>
        {
            command.Custom("SelectProducts");
            command.Edit();
            command.Destroy();
        }).Width(200);
    })
    .ToolBar(toolbar => toolbar.Create())
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .ClientDetailTemplateId("groupSetTemplate")
    .Pageable()
    .Sortable()
    .Scrollable()
    //.Resizable(resize => resize.Columns(true))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Events(events => events.Error("error_handler"))
        .Model(model =>
        {
            model.Id(g => g.CompanyNo);
            model.Id(g => g.ProductGroupNo);
            //model.Field(g => g.ProductGroupName);
        })
        .Create(create => create.Action("InsertGroup", "MProductGroup"))
        .Read(read => read.Action("ShowGroup", "MProductGroup"))
        .Update(update => update.Action("ChangeGroup", "MProductGroup"))
        .Destroy(destroy => destroy.Action("DeleteGroup", "MProductGroup"))
    //.PageSize(20)
    )
    //.Events(events => events.DataBound("dataBound")) 
```

控制器代码如下：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult InsertGroup([DataSourceRequest] DataSourceRequest request, M_ProductGroup group)
    {
        if (group != null && ModelState.IsValid)
        {
        return Json(new[] { group }.ToDataSourceResult(request, ModelState));
    }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult ChangeGroup([DataSourceRequest] DataSourceRequest request, M_ProductGroup group)
    {
        if (group != null && ModelState.IsValid)
        {

        }

        return Json(ModelState.ToDataSourceResult());
    } 
```

发布的数据（“组”）为空，我无法得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T15:48:40.103

我有同样的问题，我发现了一个有趣的事情。

代替

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult ChangeGroup([DataSourceRequest] DataSourceRequest request, M_ProductGroup group) 
```

我做了：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult ChangeGroup([DataSourceRequest] DataSourceRequest request, int ProductGroupNo, string ProductGroupName) 
```

我收到了我在内联网格中更改的 ID 和名称。

我知道这是一个不雅的解决方案，而且是一件古玩，但也许它会为您提供解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:28:46.517

检查您的项目中是否包含 kendo.aspnetmvc.min.js。

# asp.net - 在 ASP.Net MVC4 中显示 Microsoft Word 文件

> ID：13909854
> 
> 赞同：0
> 
> 时间：2012-12-17T07:16:45.047
> 
> 标签：asp.net, visual-studio-2010, visual-studio, asp.net-mvc-4, visual-studio-2012

我有一个在 ASP.net MVC4 Visual Studio 2012 中开发的应用程序。我有一个页面，我必须在该页面上显示一个 Word 文档。word 文档已经从不同的页面上传到服务器。在此页面上，我的程序加载该文档进行一些更改并通过打开更新的 Word 文件显示预览。该应用程序在 Visual Studio 中运行良好，但在部署后崩溃。

```
filename = Request.PhysicalApplicationPath + branchP.OfferletterPath;
outfilename = Request.PhysicalApplicationPath + @"Temp\OfferLetter" + "_1";

object Missing = System.Reflection.Missing.Value;
            Application app = null;
            Document doc = null;

            app = new Microsoft.Office.Interop.Word.Application();
            doc = app.Documents.Open(filename, Missing, Missing, Missing, Missing, Missing, Missing, Missing, Missing, Missing);
            var salary = 0;

            WordUtils.FindReplaceAnywhere(app, "<mobileno>", jobCandidate.MobilePhoneNo);
            WordUtils.FindReplaceAnywhere(app, "<currentdate>", System.DateTime.Now.ToString("dd/MM/yyyy"));
            WordUtils.FindReplaceAnywhere(app, "<name>", jobCandidate.JobCandidateName);
            WordUtils.FindReplaceAnywhere(app, "<address>", jobCandidate.Address);
            WordUtils.FindReplaceAnywhere(app, "<designation>", jobCandidate.JobTitle);
            WordUtils.FindReplaceAnywhere(app, "<doj>", jobCandidate.EmpJoiningDate.ToString());
            WordUtils.FindReplaceAnywhere(app, "<salary>", salary.ToString());

            Object beforeRow = Type.Missing;
            int i = 2;
            double amt = 0;

            if (doc.Tables.Count > 0)
            {
                doc.Tables[1].Select();
                Table tbl = doc.Tables[1];
                foreach (var jc in _entities.JobCandidatePayStructures.Where(jc => jc.JobCandidateId == jobCandidate.Id))
                {
                    tbl.Rows.Add(beforeRow);
                    tbl.Cell(i, 1).Range.Text = jc.Code;
                    tbl.Cell(i, 1).Range.Bold = 0;

                    tbl.Cell(i, 2).Range.Text = jc.Amount.ToString();
                    tbl.Cell(i, 2).Range.Bold = 0;

                    amt = amt + jc.Amount;
                    i++;
                }
                tbl.Rows.Add(beforeRow);
                tbl.Cell(i, 1).Range.Text = "Gross Salary";
                tbl.Cell(i, 1).Range.Bold = 1;
                tbl.Cell(i, 2).Range.Text = amt.ToString();
                tbl.Cell(i, 2).Range.Bold = 1;
            }

            doc.SaveAs(outfilename, Missing, Missing, Missing, Missing, Missing, Missing, Missing, Missing, Missing);
            app.Visible = true; 
```

上面的代码在 Visual Studio 中运行良好，但是当我在部署后执行上面的函数时，它会抛出以下异常：

```
This command is not available because no document is open.
Exception occurred at Microsoft.Office.Interop.Word.ApplicationClass.get_ActiveDocument()
at HRIS.Models.WordUtils.FindReplaceAnywhere(Application app, String findText, String replaceText) 
```

如果有人从事过类似的应用程序，请提出前进的方向。

提前致谢。

# sql - 拆分字符串后将值插入表中

> ID：13909859
> 
> 赞同：4
> 
> 时间：2012-12-17T07:17:15.083
> 
> 标签：sql, sql-server, function, stored-procedures

我想将值插入到员工表中。并且这些值以字符串格式`~`分隔

例如：`AA~B~123`

我正在使用以下功能拆分它

```
CREATE FUNCTION [db_owner].[FN_Split] (@String varchar(8000), @Delimiter char(1))
   returns @temptable TABLE (items varchar(8000))        
   as        
   begin        
       declare @idx int        
        declare @slice varchar(8000)        

        select @idx = 1        
            if len(@String)<1 or @String is null  return        

       while @idx!= 0        
       begin        
           set @idx = charindex(@Delimiter,@String)        
           if @idx!=0        
               set @slice = left(@String,@idx - 1)        
           else        
              set @slice = @String        

           if(len(@slice)>0)   
               insert into @temptable(Items) values(@slice)        

           set @String = right(@String,len(@String) - @idx)        
           if len(@String) = 0 break        
       end    
   return        
   end 
```

现在我得到输出

```
SELECT * FROM db_owner.FN_Split('AA~B~123','~') 
```

输出

```
items
______
AA
B
123 
```

现在我被困在这里

如何在员工表中插入上述值？？？

像

```
insert into employee (name,add,phone)
values('AA','B','123'); 
```

请指导。

试过这个但不工作

```
insert into employee
SELECT * FROM db_owner.FN_Split('AA~BB~CC','~') 
```

错误

```
Msg 213, Level 16, State 1, Line 1
Column name or number of supplied values does not match table definition. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:43:59.343

您正在使用一个字符串拆分函数，该函数将您的项目作为行返回。您需要一个将它们作为列返回的函数。

或者您可以直接在查询中执行此操作。也许是这样的。

```
declare @S varchar(10) = 'AA~B~123'

select left(@S, T1.Pos - 1) as Col1,
       substring(@S, T1.Pos+1, T2.Pos-T1.Pos-1) as Col2,
       substring(@S, T2.Pos+1, len(@S)-T2.Pos) as Col3
from (select charindex('~', @S)) as T1(Pos)
cross apply (select charindex('~', @S, T1.Pos+1)) as T2(Pos) 
```

结果：

```
Col1       Col2       Col3
---------- ---------- ----------
AA         B          123 
```

这是适用于 SQL Server 2000 的版本

```
declare @S varchar(10) 
set @S = 'AA~B~123'

select left(@S, T.Pos1 - 1) as Col1,
       substring(@S, T.Pos1+1, T.Pos2-T.Pos1-1) as Col2,
       substring(@S, T.Pos2+1, len(@S)-T.Pos2) as Col3
from (select T.Pos1,
             charindex('~', @S, T.Pos1+1) as Pos2
      from (select charindex('~', @S) as Pos1) as T
     ) as T 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:48:38.153

如果您可以像这样在存储过程中添加一个小计数器，那么生活会更轻松：

```
CREATE FUNCTION [db_owner].[FN_Split] (@String varchar(8000), @Delimiter char(1))      
   returns @temptable TABLE (orderId int,items varchar(8000))        
   as        
   begin        
       declare @idx int        
       declare @slice varchar(8000)        
       declare @orderId int = 0 --<added a counter

        select @idx = 1        
            if len(@String)<1 or @String is null  return        

       while @idx!= 0        
       begin        
           set @idx = charindex(@Delimiter,@String)        
           if @idx!=0        
               set @slice = left(@String,@idx - 1)        
           else        
              set @slice = @String        

           if(len(@slice)>0)   
               insert into @temptable(orderId, Items) values(@orderId, @slice)        
           set @orderId = @orderId+1 --<increment the counter

           set @String = right(@String,len(@String) - @idx)        
           if len(@String) = 0 break        
       end    
   return        
   end 
```

您的后续查询可能类似于以下内容：

```
DECLARE @name varchar(50) = (SELECT items  FROM db_owner.FN_Split('AA~BB~CC','~') where orderId = 0)
DECLARE @add varchar(50) = (SELECT items  FROM db_owner.FN_Split('AA~BB~CC','~') where orderId = 1)
DECLARE @phone varchar(50) = (SELECT items  FROM db_owner.FN_Split('AA~BB~CC','~') where orderId = 2)
insert into employee 
    (
    name,
    add,
    phone
    )
values
    (
    @name, 
    @add,
    @phone
    ) 
```

但是您是否尝试过更改程序，使其以水平格式输出数据，而不是您当前拥有的垂直输出？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T07:55:55.427

请尝试以下查询：

```
Insert into employee(col1,col2,col3) 
select substring_index('AA~B~123','~',1) as col1,substring_index(substring_index('AA~B~123','~',-2),'~',1) as col2,
substring_index(substring_index('AA~B~123','~',-1),'~',1) as col3 
```

# html - 具有动态右侧内容的 100% 高度左侧边栏 - Bootstrap + Wordpress

> ID：13909864
> 
> 赞同：12
> 
> 时间：2012-12-17T07:17:32.027
> 
> 标签：html, css, wordpress, twitter-bootstrap

我正在使用 Bootstrap 和 Wordpress 制作网站。这是一个 2 列布局 - 左侧边栏，右侧内容。正确的内容是动态的，并通过无限滚动扩展。我试图通过几种技术使左侧边栏的高度达到 100%，但无济于事。

我希望侧边栏根据右侧内容 div 的视口大小/高度继续向下。

我做了一个简单的小提琴： http: [//jsfiddle.net/ydPMr/3](http://jsfiddle.net/ydPMr/3)，但如果你看到我在我的开发页面上谈论的内容会更好：http: [//joshuawalker.koding.com](http://joshuawalker.koding.com)。

这是我页面的基本结构：

```
<div class="navbar navbar-inverse navbar-static-top">
<div class="navbar-inner"></div>
</div>
<div class="wire-unit hero-fix">
</div>
<div class="sidebar hidden-phone"></div>
<div class="content"></div> 
```

如果有人对如何使侧边栏完全伸展有任何想法，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-17T07:48:32.007

这对我来说很好。**[小提琴](http://jsfiddle.net/DppA8/32/)**

我设置`min-Height`为`500px`. 如果您不想要最低限度，请将其删除。它将根据`height`您在`content div`. 喜欢这个[**小提琴**](http://jsfiddle.net/DppA8/11/)

```
 <div class="wrapper">
    <div class="sidebar hidden-phone">
    </div>
    <div class="content">

    </div>
</div> 
```

和风格

```
<style type="text/css" >
    .wrapper
    {
        min-height:100%;
        width:100%;
        position:relative;
        background-color:Black;
        display:inline-block;
    }
    .sidebar
    {
        width:20%;
        top:0px;
        left:0px;
        bottom:0px;
        position:absolute;
        background-color:Aqua;
    }
    .content
    {
        min-height:500px;
        width:80%;
        position:relative;
        background-color:Gray;
        float:right;
    }
</style> 
```

# c# - 将 SqlBulkCopy 与 MongoDB 一起使用

> ID：13909874
> 
> 赞同：0
> 
> 时间：2012-12-17T07:18:30.390
> 
> 标签：c#, sql-server, mongodb, mongodb-.net-driver

在上一个问题中，我正在尝试`SqlBulkCopy`从 MongoDB 数据库中执行操作，但出现错误并且找不到我应该具有的列类型：

> 来自数据源的 type 的给定值`ObjectId`无法转换为指定目标列的类型 nvarchar。

![在此处输入图像描述](../Images/23203a5c2653df9e0512eb385ea5862f.png)

`DataTable`我的专栏`DataType`在哪里`MongoDB.Bson.ObjectId`。

**Microsoft Sql Server 中承载此值**的类型应该是什么？****

 **我当前的代码：

```
string connectionString = GetDestinationConnectionString();
var mongoCollection = GetSourceConnectionString();

var queryFind = Query.And(Query.NotExists("sync"), Query.NotIn("challenge_guid", new List<MongoDB.Bson.BsonValue>() { "87558b59-73ee-4f10-add4-b9031551e395" }));
var sourceData = mongoCollection.Find(queryFind).ToList();

DataTable dt = CollectionHelper.ConvertTo<MongoAnswerDoc>(sourceData);

using (SqlConnection destinationConnection =
            new SqlConnection(connectionString))
{
    destinationConnection.Open();

    // Set up the bulk copy object. 
    // Note that the column positions in the source
    // data reader match the column positions in 
    // the destination table so there is no need to
    // map columns.
    using (SqlBulkCopy bulkCopy =
                new SqlBulkCopy(destinationConnection))
    {
        bulkCopy.DestinationTableName = "JK_RawChallengeAnswers";

        try
        {
            // Write from the source to the destination.
            bulkCopy.WriteToServer(dt);
        }
        catch (Exception ex)
        {
            txtMsg.Text = ex.Message;
        }
        finally
        {
            // Dispose of the DataTable.
            dt.Dispose();
            // close connection
            destinationConnection.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:32:02.353

来自[Mongo 规范](http://docs.mongodb.org/manual/core/object-id/)：

> ObjectId 是一个 12 字节的 BSON 类型，使用以下方法构造：
> 
> *   一个 4 字节的时间戳，
> *   一个 3 字节的机器标识符，
> *   一个 2 字节的进程 ID，以及
> *   一个 3 字节的计数器。

所以你需要一个[`BINARY(12)`](http://msdn.microsoft.com/en-us/library/ms188362.aspx)类型列来在 SQL 中映射它。

无论如何，您的代码将在任何重要的传输中耗尽内存，使用中间 DataTable 内存副本不是要走的路。[`EnableStreaming`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.enablestreaming.aspx)并使用 an[`IDataReader`](http://msdn.microsoft.com/en-us/library/system.data.idatareader.aspx)即时迭代源。**

# asp.net - 用asp.net上传多张图片

> ID：13909876
> 
> 赞同：0
> 
> 时间：2012-12-17T07:18:39.213
> 
> 标签：asp.net, file-upload

如何使用单个按钮将多个图像上传到 Web 服务器。我知道有几个选项可用，例如 flash、j 查询和 silverlight。问题是我还想对图像做很多其他事情，比如用不同的大小（缩略图）并且想要更改图像文件名，例如 GUID，并且想要将路径存储在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:42:26.563

您可以使用 uploadify.js 来做同样的事情。

*   它重量轻，因为它包含 jquery 代码。
*   易于实施。

这是相同的链接。[上传](http://www.uploadify.com/demos/)

# matlab - 如何将 XTickLabel 重置为默认值

> ID：13909880
> 
> 赞同：3
> 
> 时间：2012-12-17T07:18:57.807
> 
> 标签：matlab, matlab-figure

在 R2010b 中，我可以通过图形编辑器将刻度标签重置为自动，
但我想以编程方式将它们重置为默认值，
我试过了

```
set(gca,'XTickLabel','auto') 
```

但它在每次滴答时显示“自动”......有什么提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T07:25:18.773

您需要设置[`XTickLabelMode`](http://www.mathworks.com/help/matlab/ref/axes_props.html#XTickLabelMode)为`'auto'`：

```
set(gca,'XTickLabelMode','auto') 
```

`'manual'`当您指定刻度标签时，刻度标签模式设置为。因此，您需要将其转回`'auto'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:29:44.990

好的，我终于找到了这种方式：

```
set(gca,'XTickLabel', num2str(get(gca,'XTick')')); 
```

我读了刻度并将它们转换回字符串......

**编辑**：请注意，如果您不缩放或调整图形大小，这是一种解决方法，但它不适合缩放/调整大小，因为 XTickLabelMode 保持“手动”，因此 XTickLabel 不会在您缩放时更新.

我添加了这个答案，因为这是我发现的第一件事（其他人也可能发现）。
它不是首选方式的原因比答案本身更有用，因此进行了此编辑。

正确的解决方案是我接受的解决方案。

# mysql - 如何在 mysql 中添加 levenshtein 函数？

> ID：13909885
> 
> 赞同：31
> 
> 时间：2012-12-17T07:19:30.673
> 
> 标签：mysql, user-defined-functions, levenshtein-distance

我从[http://kristiannissen.wordpress.com/2010/07/08/mysql-levenshtein/（archive.org](https://web.archive.org/web/20130727031247/http://kristiannissen.wordpress.com/2010/07/08/mysql-levenshtein)^(链接）)获得了 MySQL 的 Levenshtein 距离的代码，但是如何在 MySQL 中添加该函数？我正在使用 XAMPP，我需要它在 PHP 中进行搜索。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T07:34:22.200

我已连接到我的 MySQL 服务器，并在[MySQL Workbench中简单地执行](http://dev.mysql.com/downloads/workbench/)[了此语句](https://gist.github.com/Kovah/df90d336478a47d869b9683766cff718)，并且它很有效 - 我现在有了新功能。`levenshtein()`

例如，这按预期工作：

```
SELECT levenshtein('abcde', 'abced')

2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-28T10:49:13.517

```
DELIMITER $$
CREATE FUNCTION levenshtein( s1 VARCHAR(255), s2 VARCHAR(255) ) 
RETURNS INT 
DETERMINISTIC 
BEGIN 
DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT; 
DECLARE s1_char CHAR; 
-- max strlen=255 
DECLARE cv0, cv1 VARBINARY(256); 
SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0; 
IF s1 = s2 THEN 
  RETURN 0; 
ELSEIF s1_len = 0 THEN 
  RETURN s2_len; 
ELSEIF s2_len = 0 THEN 
  RETURN s1_len; 
ELSE 
  WHILE j <= s2_len DO 
    SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1; 
  END WHILE; 
  WHILE i <= s1_len DO 
    SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1; 
    WHILE j <= s2_len DO 
      SET c = c + 1; 
      IF s1_char = SUBSTRING(s2, j, 1) THEN  
        SET cost = 0; ELSE SET cost = 1; 
      END IF; 
      SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost; 
      IF c > c_temp THEN SET c = c_temp; END IF; 
        SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1; 
        IF c > c_temp THEN  
          SET c = c_temp;  
        END IF; 
        SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1; 
    END WHILE; 
    SET cv1 = cv0, i = i + 1; 
  END WHILE; 
END IF; 
RETURN c; 
END$$
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-17T09:46:53.930

相关链接的网页已失效。顺便说一下，函数的创建代码在这里：

```
DELIMITER $$

CREATE FUNCTION levenshtein( s1 varchar(255), s2 varchar(255) ) returns int deterministic 
BEGIN 
  DECLARE s1_len, 
    s2_len, 
    i, 
    j, 
    c, 
    c_temp, 
    cost          int; 
  declare s1_char char; 
  -- max strlen=255 
  declare cv0, 
    cv1 varbinary(256); 
  set s1_len = char_length(s1), 
    s2_len = char_length(s2), 
    cv1 = 0x00, 
    j = 1, 
    i = 1, 
    c = 0; 
  if s1 = s2 THEN 
  RETURN 0; 
elseif s1_len = 0 THEN 
  RETURN s2_len; 
elseif s2_len = 0 THEN 
  RETURN s1_len; 
  else 
  WHILE j <= s2_len do 
  SET cv1 = concat(cv1, unhex(hex(j))), 
    j = j + 1; 
endWHILE;WHILE i <= s1_len do 
SET s1_char = substring(s1, i, 1), 
  c = i, 
  cv0 = unhex(hex(i)), 
  j = 1;WHILE j <= s2_len do 
SET c = c + 1;IF s1_char = Substring(s2, j, 1) then 
SET cost = 0; 
else 
SET cost = 1;ENDIF;SET c_temp = conv(hex(substring(cv1, j, 1)), 16, 10) + cost;IF c > c_temp then
SET c = c_temp;ENDIF;SET c_temp = conv(hex(substring(cv1, j+1, 1)), 16, 10) + 1;IF c > c_temp then
SET c = c_temp;ENDIF;SET cv0 = concat(cv0, unhex(hex(c))), 
  j = j + 1;ENDWHILE;SET cv1 = cv0, 
  i = i + 1;ENDWHILE;ENDIF;RETURN c;
END;

DELIMITER ; 
```

希望对身体有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T07:34:00.513

*   通过 phpmyadmin 或终端登录 mysql 数据库。
*   点击 sql。

*   将**分隔符 $$**添加到上述链接中的函数和末尾**分隔符；**.

*   一旦它成功编译，您就可以在该数据库中的任何地方使用它，例如在另一个过程或函数或查询等内部......！

# android - 从广播接收器开始活动

> ID：13909886
> 
> 赞同：1
> 
> 时间：2012-12-17T07:19:41.033
> 
> 标签：android, broadcastreceiver

我的应用程序由许多活动和一个`BraodcastReceiver`. 当我的应用程序接收到广播 Intent 时，如果它在前台，我想重新启动一个活动。我该如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:25:07.343

如果它已经在运行，则使用[Intent.FLAG_ACTIVITY_REORDER_TO_FRONT](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)启动要被带到其任务历史堆栈前面的活动，如果没有，则作为新的启动。确认 Activity 是否正在运行或不使用[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)

```
 @Override
        public void onReceive(Context context, Intent intent) {
            //start activity
            if(isRunning(context)){

             Intent i = new Intent(context,Your_Activity_Name.class);
             i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
             context.startActivity(i);
            }
           else{
                 // Activity not available in activity stack
            }
        }

  public boolean isRunning(Context ctx) {
        ActivityManager activityManager = (ActivityManager) 
                         ctx.getSystemService(Context.ACTIVITY_SERVICE);
        List<RunningTaskInfo> tasks = 
                      activityManager.getRunningTasks(Integer.MAX_VALUE);

        for (RunningTaskInfo task : tasks) {
            if (ctx.getPackageName().equalsIgnoreCase(
                                     task.baseActivity.getPackageName())) 
                return true;                                  
        }

        return false;
    } 
```

并设置[android:noHistory](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist) `AndroidManifest.xml`将 Activity 存储在屏幕上不再可见的活动堆栈中：

```
<activity
       android:noHistory="false"
       android:name=".Your_Activity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:21:41.157

进行活动`singleTop`并发送意图。

# jquery - 使用 Jquery 触发悬停效果

> ID：13909888
> 
> 赞同：0
> 
> 时间：2012-12-17T07:19:55.647
> 
> 标签：jquery, css, internet-explorer, google-chrome, jsf-1.2

我有两个横幅（图像），每 4 秒切换一次。一张图片可点击，另一张不可点击。下面是代码，

```
<div class="contentdiv"> 
  <h:commandLink  action="#{myBean.firstBannerClick}" id="firstBanner" style="text-decoration:none;">
  <img src="/firstImage.jpg" width="590" height="210"  border="0" class="clickable"/> 
  </h:commandLink> 
</div>

<div class="contentdiv"> 
    <img src="/secondImage.jpg" width="590" height="210"  border="0" class="notClickable"/> 
</div> 
```

**编辑：我也试过下面的代码**

```
$(function(){
    $('.clickable a').hover(function(){
        $(this).css({'cursor':'pointer'});
    },function(){
        $(this).css({'cursor':'default'});
    });
});

$(function(){
    $('.notClickable a').hover(function(){
        $(this).css({'cursor':'default'});
    },function(){
        $(this).css({'cursor':'default'});
    });
}); 
```

**编辑到此结束**

下面是`CSS`用过的。

```
<style type="text/css">
.clickable
{
cursor: pointer;
}
.clickable a:hover
{
cursor: pointer;
}
.notClickable
{
cursor: default;
}
.notClickable a:HOVER
{
cursor: default;
}

.chrome .clickable
{
cursor: pointer;
}
.chrome .clickable a:hover
{
cursor: pointer;
}
.chrome .notClickable
{
cursor: default;
}
.chrome .notClickable a:HOVER
{
cursor: default;
}
</style> 
```

当图像切换时，当用户将光标移到图像上时，第一张图像将显示为指向用户的指针。当切换到第二张图像时，并且当用户没有将光标从图像上移开时，第二张图像也将显示为指针而不是默认值。只有当用户将光标移到第二张图片上时，它才会更改为默认值，然后用户才会知道第二张图片不可点击。

这个问题在FF上是看不到的。然而，这在 Chrome 和 IE 中可以看到。

这个问题可以看作是这个问题的[延续](https://stackoverflow.com/questions/13873362/cursorpointer-and-default-not-reflecting-immediately/13873459#comment19139402_13873459)。因为，现在问题是特定于浏览器的，所以我将它作为一个新问题提出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:26:24.777

您可以像这样手动更改鼠标光标：

```
// Changes the cursor to an hourglass
function cursor_wait() {
    document.body.style.cursor = 'wait';
}

// Returns the cursor to the default pointer
function cursor_clear() {
    document.body.style.cursor = 'default';
} 
```

# extjs - 使用 osx 和 zsh 安装 Sencha 命令问题

> ID：13909891
> 
> 赞同：2
> 
> 时间：2012-12-17T07:20:17.787
> 
> 标签：extjs, sencha-command

我无法正确安装 sencha 命令 3.0.0.250。

我在 OSX 10.7.5 上。使用 zsh 外壳。

安装 sencha 命令我安装到默认的“users/mark/bin”

我已经下载了 sencha touch 2.1.0 商业版并导航到那个 sdk 文件夹。在终端中运行“sencha”会给出“zsh: command not found: sencha”

我想我安装到错误的目录？

建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:40:43.763

如果其他人遇到此问题，解决方案是在您的 .zshrc 文件中为 sencha 可执行文件创建一个别名。就我而言，这看起来像这样

```
alias sencha="~/bin/Sencha/Cmd/3.0.0.250/sencha" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-01T00:10:23.480

命令：

`alias sencha="~/bin/Sencha/Cmd/3.0.0.250/sencha"`

将工作但...确保您匹配您安装的版本号。IE：

`alias sencha="~/bin/Sencha/Cmd/<version number installed>/sencha"`

我花了一个小时才弄清楚这个...

在终端上，运行：

1.  `nano ~/.zshrc`

2.  然后加：

`alias sencha="~/bin/Sencha/Cmd/<VERSION NUMBER>/sencha"`

3.  保存文件并重新启动终端。

这应该可以解决问题。

# html - 如何在 iPad/iPhone 的 div 中呈现 pdf？

> ID：13909892
> 
> 赞同：1
> 
> 时间：2012-12-17T07:20:18.347
> 
> 标签：html, dojo

我有一个 PhoneGap - dojo 应用程序。我想在我的应用程序中呈现一个 pdf 文件。我用了 -

```
<div> 
      <object data="CodingGuidelines.pdf" type="application/pdf" width="600" height="800"> alt :
          <a href="CodingGuidelines.pdf">pdf
          </a> 
      </object> 
</div> 
```

但是，这在 iPad 上表现不佳。是否有用于渲染 pdf 的 dojo 控件？或者，我们可以使用 HTML5 渲染它吗？

# python - Python 请求帖子的进度

> ID：13909900
> 
> 赞同：17
> 
> 时间：2012-12-17T07:21:18.970
> 
> 标签：python, python-requests

我正在使用 Python requests 包上传一个大文件，但我找不到任何方法来返回有关上传进度的数据。我已经看到许多用于下载文件的进度表，但这些不适用于文件上传。

理想的解决方案是某种回调方法，例如：

```
def progress(percent):
  print percent
r = requests.post(URL, files={'f':hugeFileHandle}, callback=progress) 
```

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T09:01:14.977

`requests` [不支持](https://github.com/kennethreitz/requests/issues/295) [上传](https://github.com/kennethreitz/requests/issues/952) [流](https://github.com/shazow/urllib3/issues/51)，例如：

```
import os
import sys
import requests  # pip install requests

class upload_in_chunks(object):
    def __init__(self, filename, chunksize=1 << 13):
        self.filename = filename
        self.chunksize = chunksize
        self.totalsize = os.path.getsize(filename)
        self.readsofar = 0

    def __iter__(self):
        with open(self.filename, 'rb') as file:
            while True:
                data = file.read(self.chunksize)
                if not data:
                    sys.stderr.write("\n")
                    break
                self.readsofar += len(data)
                percent = self.readsofar * 1e2 / self.totalsize
                sys.stderr.write("\r{percent:3.0f}%".format(percent=percent))
                yield data

    def __len__(self):
        return self.totalsize

# XXX fails
r = requests.post("http://httpbin.org/post",
                  data=upload_in_chunks(__file__, chunksize=10)) 
```

^(顺便说一句，如果您不需要报告进度；[您可以使用内存映射文件上传大文件](https://stackoverflow.com/questions/2502596/python-http-post-a-large-file-with-streaming)。)

要解决此问题，您可以创建一个类似于 [urllib2 POST 进度监控](https://stackoverflow.com/questions/5925028/urllib2-post-progress-monitoring)的文件适配器：

```
class IterableToFileAdapter(object):
    def __init__(self, iterable):
        self.iterator = iter(iterable)
        self.length = len(iterable)

    def read(self, size=-1): # TBD: add buffer for `len(data) > size` case
        return next(self.iterator, b'')

    def __len__(self):
        return self.length 
```

### 例子

```
it = upload_in_chunks(__file__, 10)
r = requests.post("http://httpbin.org/post", data=IterableToFileAdapter(it))

# pretty print
import json
json.dump(r.json, sys.stdout, indent=4, ensure_ascii=False) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-23T13:06:31.793

我推荐使用一个名为[requests-toolbelt](http://toolbelt.readthedocs.org/en/latest/user.html)的工具包，它可以让监控上传字节变得非常容易，比如

```
from requests_toolbelt import MultipartEncoder, MultipartEncoderMonitor
import requests

def my_callback(monitor):
    # Your callback function
    print monitor.bytes_read

e = MultipartEncoder(
    fields={'field0': 'value', 'field1': 'value',
            'field2': ('filename', open('file.py', 'rb'), 'text/plain')}
    )
m = MultipartEncoderMonitor(e, my_callback)

r = requests.post('http://httpbin.org/post', data=m,
                  headers={'Content-Type': m.content_type}) 
```

您可能希望阅读[此](https://gist.github.com/yejianye/3b08730d4ed31ae18c7d)内容以显示进度条。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-19T08:38:41.233

我从这里得到了它的代码：[PyQt 中的简单文件上传进度条](http://foobarnbaz.com/2012/12/31/file-upload-progressbar-in-pyqt/)。我对其进行了一些更改，以使用 BytesIO 而不是 StringIO。

```
class CancelledError(Exception):
    def __init__(self, msg):
        self.msg = msg
        Exception.__init__(self, msg)

    def __str__(self):
        return self.msg

    __repr__ = __str__

class BufferReader(BytesIO):
    def __init__(self, buf=b'',
                 callback=None,
                 cb_args=(),
                 cb_kwargs={}):
        self._callback = callback
        self._cb_args = cb_args
        self._cb_kwargs = cb_kwargs
        self._progress = 0
        self._len = len(buf)
        BytesIO.__init__(self, buf)

    def __len__(self):
        return self._len

    def read(self, n=-1):
        chunk = BytesIO.read(self, n)
        self._progress += int(len(chunk))
        self._cb_kwargs.update({
            'size'    : self._len,
            'progress': self._progress
        })
        if self._callback:
            try:
                self._callback(*self._cb_args, **self._cb_kwargs)
            except: # catches exception from the callback
                raise CancelledError('The upload was cancelled.')
        return chunk

def progress(size=None, progress=None):
    print("{0} / {1}".format(size, progress))

files = {"upfile": ("file.bin", open("file.bin", 'rb').read())}

(data, ctype) = requests.packages.urllib3.filepost.encode_multipart_formdata(files)

headers = {
    "Content-Type": ctype
}

body = BufferReader(data, progress)
requests.post(url, data=body, headers=headers) 
```

诀窍是，使用 urllib3 中的 encode_multipart_formdata() 从文件列表手动生成数据和标题

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-01-18T23:46:25.600

我知道这是一个老问题，但我在其他任何地方都找不到简单的答案，所以希望这对其他人有帮助：

```
import requests
import tqdm    
with open(file_name, 'rb') as f:
        r = requests.post(url, data=tqdm(f.readlines())) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-14T15:28:36.817

通常你会构建一个流式数据源（一个生成器），它读取分块的文件并在途中报告其进度（参见[kennethreitz/requests#663](https://github.com/kennethreitz/requests/issues/663)。这不适用于请求文件 api，因为请求不支持流式上传（请参阅[kennethreitz/requests#295](https://github.com/kennethreitz/requests/issues/295) ) – 要上传的文件需要在内存中完成，然后才能开始处理。

但是请求可以像 JF Sebastian 之前证明的那样从生成器流式传输内容，但是该生成器需要生成完整的数据流，包括多部分编码和边界。这就是[海报](http://atlee.ca/software/poster/)发挥作用的地方。

海报最初是为与 python的[urllib2](http://docs.python.org/2/library/urllib2.html)一起使用而编写的，并支持多部分请求的流式生成，并在它进行时提供进度指示。海报主页提供了与 urllib2 一起使用的示例，但您真的不想使用 urllib2。查看这个[示例代码](https://gist.github.com/kennethreitz/973705)，了解如何使用 urllib2 进行 HTTP 基本身份验证。太可怕了。

所以我们真的想将海报与请求一起使用，以跟踪进度进行文件上传。方法如下：

```
# load requests-module, a streamlined http-client lib
import requests

# load posters encode-function
from poster.encode import multipart_encode

# an adapter which makes the multipart-generator issued by poster accessable to requests
# based upon code from http://stackoverflow.com/a/13911048/1659732
class IterableToFileAdapter(object):
    def __init__(self, iterable):
        self.iterator = iter(iterable)
        self.length = iterable.total

    def read(self, size=-1):
        return next(self.iterator, b'')

    def __len__(self):
        return self.length

# define a helper function simulating the interface of posters multipart_encode()-function
# but wrapping its generator with the file-like adapter
def multipart_encode_for_requests(params, boundary=None, cb=None):
    datagen, headers = multipart_encode(params, boundary, cb)
    return IterableToFileAdapter(datagen), headers

# this is your progress callback
def progress(param, current, total):
    if not param:
        return

    # check out http://tcd.netinf.eu/doc/classnilib_1_1encode_1_1MultipartParam.html
    # for a complete list of the properties param provides to you
    print "{0} ({1}) - {2:d}/{3:d} - {4:.2f}%".format(param.name, param.filename, current, total, float(current)/float(total)*100)

# generate headers and gata-generator an a requests-compatible format
# and provide our progress-callback
datagen, headers = multipart_encode_for_requests({
    "input_file": open('recordings/really-large.mp4', "rb"),
    "another_input_file": open('recordings/even-larger.mp4', "rb"),

    "field": "value",
    "another_field": "another_value",
}, cb=progress)

# use the requests-lib to issue a post-request with out data attached
r = requests.post(
    'https://httpbin.org/post',
    auth=('user', 'password'),
    data=datagen,
    headers=headers
)

# show response-code and -body
print r, r.text 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-19T07:57:31.833

我的上传服务器不支持块编码，所以我想出了这个解决方案。它基本上只是 python 的一个包装器`IOBase`，可以`tqdm.wrapattr`无缝工作。

```
import io
import requests
from typing import Union
from tqdm import tqdm
from tqdm.utils import CallbackIOWrapper

class UploadChunksIterator(Iterable):
    """
    This is an interface between python requests and tqdm.
    Make tqdm to be accessed just like IOBase for requests lib.
    """

    def __init__(
        self, file: Union[io.BufferedReader, CallbackIOWrapper], total_size: int, chunk_size: int = 16 * 1024
    ):  # 16MiB
        self.file = file
        self.chunk_size = chunk_size
        self.total_size = total_size

    def __iter__(self):
        return self

    def __next__(self):
        data = self.file.read(self.chunk_size)
        if not data:
            raise StopIteration
        return data

    # we dont retrive len from io.BufferedReader because CallbackIOWrapper only has read() method.
    def __len__(self):
        return self.total_size

fp = "data/mydata.mp4"
s3url = "example.com"
_quiet = False

with open(fp, "rb") as f:
    total_size = os.fstat(f.fileno()).st_size
    if not _quiet:
        f = tqdm.wrapattr(f, "read", desc=hv, miniters=1, total=total_size, ascii=True)

    with f as f_iter:
        res = requests.put(
            url=s3url,
            data=UploadChunksIterator(f_iter, total_size=total_size),
        )
    res.raise_for_status() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-11T20:59:21.283

在信息进度条方面使@jfs 的答案更好。

```
import math
import os
import requests
import sys

class ProgressUpload:
    def __init__(self, filename, chunk_size=1250):
        self.filename = filename
        self.chunk_size = chunk_size
        self.file_size = os.path.getsize(filename)
        self.size_read = 0
        self.divisor = min(math.floor(math.log(self.file_size, 1000)) * 3, 9)  # cap unit at a GB
        self.unit = {0: 'B', 3: 'KB', 6: 'MB', 9: 'GB'}[self.divisor]
        self.divisor = 10 ** self.divisor

    def __iter__(self):
        progress_str = f'0 / {self.file_size / self.divisor:.2f} {self.unit} (0 %)'
        sys.stderr.write(f'\rUploading {dist_file}: {progress_str}')
        with open(self.filename, 'rb') as f:
            for chunk in iter(lambda: f.read(self.chunk_size), b''):
                self.size_read += len(chunk)
                yield chunk
                sys.stderr.write('\b' * len(progress_str))
                percentage = self.size_read / self.file_size * 100
                completed_str = f'{self.size_read / self.divisor:.2f}'
                to_complete_str = f'{self.file_size / self.divisor:.2f} {self.unit}'
                progress_str = f'{completed_str} / {to_complete_str} ({percentage:.2f} %)'
                sys.stderr.write(progress_str)
        sys.stderr.write('\n')

    def __len__(self):
        return self.file_size

# sample usage
requests.post(upload_url, data=ProgressUpload('file_path')) 
```

关键是`__len__`方法。没有它，我会收到连接关闭错误。这是您不能只使用 tqdm + iter 来获得简单进度条的唯一原因。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-27T16:44:33.673

此解决方案使用[requests_toolbelt](https://github.com/requests/toolbelt)和[tq​​dm](https://tqdm.github.io/)维护良好且流行的库。

```
from pathlib import Path
from tqdm import tqdm

import requests
from requests_toolbelt import MultipartEncoder, MultipartEncoderMonitor

def upload_file(upload_url, fields, filepath):

    path = Path(filepath)
    total_size = path.stat().st_size
    filename = path.name

    with tqdm(
        desc=filename,
        total=total_size,
        unit="B",
        unit_scale=True,
        unit_divisor=1024,
    ) as bar:
        with open(filepath, "rb") as f:
            fields["file"] = ("filename", f)
            e = MultipartEncoder(fields=fields)
            m = MultipartEncoderMonitor(
                e, lambda monitor: bar.update(monitor.bytes_read - bar.n)
            )
            headers = {"Content-Type": m.content_type}
            requests.post(upload_url, data=m, headers=headers) 
```

示例用法

```
upload_url = 'https://uploadurl'
fields = {
  "field1": value1, 
  "field2": value2
}
filepath = '97a6fce8_owners_2018_Van Zandt.csv'

upload_file(upload_url, fields, filepath) 
```

[![演示](../Images/768e172924d618c04c860b2767715085.png)](https://i.stack.imgur.com/HWq5M.gif)

# c# - 左连接 LINQ 遇到问题

> ID：13909901
> 
> 赞同：2
> 
> 时间：2012-12-17T07:21:19.750
> 
> 标签：c#, linq, datatable, left-join

我有两个数据表`t1`和`t2`. 我正在尝试执行 LINQ 左连接、多个等值连接，以获取`t1`不在`t2`.

在 SQL 中，我想要完成的是：

```
select t1.* 
from t1
left join t2
on t1.a=t2.a and
   t1.b=t2.b and
   t1.c=t2.c
where
   t2.a is null 
```

到目前为止，我有以下内容：

```
public DataTable t1_without_t2(DataTable t1, DataTable t2)
        {
            var query = from t1_row in t1.AsEnumerable()
                        join t2_row in t2.AsEnumerable()
                        on 
                        new { t_a = t1_row["a"], t_b = t1_row["b"], t_c = t1_row["c"]}   
                        equals
                        new { t_a = t2_row["a"], t_b = t2_row["b"], t_c = t2_row["c"]}
                        into leftJoinT1withoutT2
                        from join_row in leftJoinT1withoutT2.DefaultIfEmpty()
                        where t2_row["a"] == null
                        select new
                        {
                            j_a = join_row["a"],
                            j_b = join_row["b"],
                            j_c = join_row["c"],
                        };
            DataTable dt = t1.Clone();
            foreach (var result in query)
            {
                dt.LoadDataRow(
                    new object[]
                    {
                        result.j_a,
                        result.j_b,
                        result.j_c
                    },
                    false);
            }
            return dt;
        } 
```

这是失败的`j_a = join_row["a"]`这条消息： `Column 'a' does not belong to table.`

我认为该`into leftJoinT1withoutT2`行应该将连接的结果放入具有 table 列结构的 var 中`t1`，从中删除不匹配的条目`where t2_row["a"] == null`。这不是这里发生的事情吗？我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:44:04.680

它应该如下所示：

```
var query = from t1_row in t1.AsEnumerable()
            join t2_row in t2.AsEnumerable()
            on
            new { t_a = t1_row["a"], t_b = t1_row["b"], t_c = t1_row["c"] }
            equals
            new { t_a = t2_row["a"], t_b = t2_row["b"], t_c = t2_row["c"] }
            into leftJoinT1withoutT2
            from join_row in leftJoinT1withoutT2.DefaultIfEmpty()
                                                .Where(r => r == null)
            select new
            {
                j_a = t1_row["a"],
                j_b = t1_row["b"],
                j_c = t1_row["c"],
            }; 
```

查看[如何：执行左外连接（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb397895.aspx)。

`join_row`获取（即`null`默认`TSource`值，请参阅[Enumerable.DefaultIfEmpty](http://msdn.microsoft.com/en-us/library/bb360179.aspx)）中没有匹配元素时`t2`，同时`t1_row`始终包含连接值。因此，只要您只需要那些行`join_row`，`null`我就使用`.Where(r => r == null)`.

# asp.net - 使用 Sql 和 Gridview 报告

> ID：13909903
> 
> 赞同：-1
> 
> 时间：2012-12-17T07:21:35.030
> 
> 标签：asp.net, sql

嗨，伙计们，我需要生成以下报告格式..但在 sql 和 gridviwe 中没有得到任何逻辑。报告显示前四个月的数据，包括当前月份。请建议..请参阅下面的报告格式

[报告格式](http://www4.picturepush.com/photo/a/11706807/640/11706807.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:42:01.193

您可以使用[pivot](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)和[cube](http://blogs.msdn.com/b/craigfr/archive/2007/09/27/aggregation-with-cube.aspx)来解决您的问题。

下面是一个示例
[http://blogs.msdn.com/b/craigfr/archive/2007/09/27/aggregation-with-cube.aspx](http://blogs.msdn.com/b/craigfr/archive/2007/09/27/aggregation-with-cube.aspx) [http://www.codeproject.com/Articles/201320/Dynamic-Pivoting -with-Cubes-and-eventhandlers-in-S](http://www.codeproject.com/Articles/201320/Dynamic-Pivoting-with-Cubes-and-eventhandlers-in-S)

# java - phonegap 的 activity.java 中的错误

> ID：13909904
> 
> 赞同：6
> 
> 时间：2012-12-17T07:21:37.770
> 
> 标签：java, android, cordova

我只是在配置我的 phonegap 应用程序并设置为运行“HelloWorld”问题。但我无法正确执行它，因为它总是抛出以下错误。

```
Cannot reduce the visibility of the inherited method from DroidGap
The import com.phonegap cannot be resolve 
```

这是我在 MainActivity.java 中的代码

```
package com.example.mobile;

import org.apache.cordova.DroidGap;

import android.os.Bundle;
import android.view.Menu;
import com.phonegap.*;

public class MainActivity extends DroidGap {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我创建了 libs 文件夹并添加了 cordova-2.2.0.jar ，并添加到了 bulid 路径。但是我仍然无法弄清楚问题所在，请建议我解决它。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T08:49:36.630

好像你有2个问题：

1.  `Cannot reduce the visibility of the inherited method from DroidGap`- 尝试更改`protected void onCreate`为`public void onCreate`.
2.  `The import com.phonegap cannot be resolve`- 尝试删除线`import com.phonegap.*;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:37:52.890

我有同样的问题：
更改：
`protected void onCreate(Bundle savedInstanceState)`
到：
`public void onCreate(Bundle savedInstanceState)`

这对我有用。

# android - 如何在 Android 中借助 MediaStore 获取最近播放的歌曲播放列表

> ID：13909905
> 
> 赞同：1
> 
> 时间：2012-12-17T07:21:39.823
> 
> 标签：android, android-mediaplayer, playlist, mediastore

如何在 Android 中的 MediaStore 的帮助下从最近播放、最近添加、热门播放...播放列表中获取歌曲。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:15:16.827

标准的 android 数据库不为此提供任何字段。您可以在 /Data/data/com.android.provider.com.media 中找到这些表。你将需要 root 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T11:44:33.317

要跟踪经常播放的曲目或最近添加的曲目，您必须为其应用逻辑，并且必须为您的应用程序创建一个数据库，因为 android 不跟踪它们，因此，这些都是必须处理的特定于应用程序的事情仅由用户应用程序。

# c# - SQL Server 权限应用程序

> ID：13909918
> 
> 赞同：1
> 
> 时间：2012-12-17T07:23:04.400
> 
> 标签：c#, sql-server

我有一个应用程序，其中有一组用户。他们使用应用程序 UI 来查看数据库中的不同信息。但是，有些信息是不允许某些用户看到的。所以，我在想我可以创建组并将允许的用户添加到这些组中。我阅读了 Sql server 中的角色，但在我看来，我需要为每个用户创建一个登录名。但是，在我的应用程序中，我使用 sa 连接到数据库，当用户登录时，应用程序会检查数据库中“用户”表中的密码+用户名。那么，有什么方法可以创建这些权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:29:26.000

假设 Windows 登录，我将在 AD 中创建组，将这些组分配为在 sql server 中登录的用户，并使用这些组来确定谁可以访问什么。您还可以在 AD 中检查他们的职位，并根据该错误在您的应用程序中允许权限

，您可以检查一个排除列表。我的意思是拥有一个具有提升访问权限的用户表，并检查名称列表以允许访问某些表。不理想，因为您必须为每个用户做一些事情，如果这是唯一的方法，委托 - 给其他人一个前端和授予访问权限的权限。

# java - 在 Struts 2 中使用 s:iterator 显示表格

> ID：13909919
> 
> 赞同：0
> 
> 时间：2012-12-17T07:23:08.970
> 
> 标签：java, html, struts2, struts

我想用html代码jsp页面

```
<table>
    <s:iterator >
        <tr>
            <td>My love</td>
            <td><s:submit name="btnPlay" value="Play"/></td>
        </tr>
        <tr>
            <td>My life</td>
            <td><s:submit name="btnPlay" value="Play"/></td>
        </tr>
    </s:iterator>
</table> 
```

我想显示如下：

![在此处输入图像描述](../Images/5c3a7c4c3c05b94966005e085029b4c6.png)

但它显示为：

![在此处输入图像描述](../Images/25a4fbdcf8d800150e83562c2efadd97.png)

你能帮助我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:25:51.603

尝试在标签中设置`theme`属性`simple``<s:submit>`

```
<s:submit name="btnPlay" value="Play" theme="simple"/> 
```

# wpf - 如何将 WPF tabHeader 向左移动？

> ID：13909924
> 
> 赞同：0
> 
> 时间：2012-12-17T07:23:29.953
> 
> 标签：wpf, tabcontrol

我计划将我的徽标添加到我的 wpf 项目中。我在我的项目中使用 tabControl 并且由于我想添加我的徽标，我希望将第一个选项卡标题向左移动，以便我的徽标可以适合（如第二张图片所示）。任何人都知道如何移动标签页眉位置？

我现在的项目：

![在此处输入图像描述](../Images/5bfb0df6b319ca9b204d74c15fd05760.png)

移动我的选项卡标题后，我的项目将是这样的：

![在此处输入图像描述](../Images/e9141e73ab80df24652fe1cd3f115b1b.png)

p / s：我对第二张图像进行了Photoshop处理，我不是从编码中制作出来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:07:53.973

你可能会改变 TabControl 的模板

1.使用这种样式： http: [//msdn.microsoft.com/en-us/library/ms754137%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms754137%28v=vs.85%29.aspx)
2.在网格中添加三列
3.设置 HeaderPanel 的 Grid.Column 为“1”

```
<Grid KeyboardNavigation.TabNavigation="Local">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>    //*
        <ColumnDefinition Width="Auto"/>     //*
        <ColumnDefinition Width="*"/>    //*
      </Grid.ColumnDefinitions>     //*
      <TabPanel 
        Name="HeaderPanel"
        Grid.Row="0"

        Grid.Column="1"   //*

        Panel.ZIndex="1" 
        Margin="0,0,4,-1" 
        IsItemsHost="True"
        KeyboardNavigation.TabIndex="1"
        Background="Transparent" />
      <Border 
        Name="Border" 
        Grid.Row="1" 
        Background="{StaticResource WindowBackgroundBrush}" 
        BorderBrush="{StaticResource SolidBorderBrush}" 
        BorderThickness="1" 
        CornerRadius="2" 
        KeyboardNavigation.TabNavigation="Local"
        KeyboardNavigation.DirectionalNavigation="Contained"
        KeyboardNavigation.TabIndex="2" >
        <ContentPresenter 
          Name="PART_SelectedContentHost"
          Margin="4"
          ContentSource="SelectedContent" />
      </Border>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:20:33.580

Ramin 的解决方案效果很好。 **关于使用该方法的一些附加说明**：

首先，您需要向`ColumnSpan`Border 添加一个，以便主 Tab 内容扩展到控件的整个宽度：

```
<Border Name="Border" 
        Grid.Row="1" Grid.ColumnSpan="3"
        ... 
```

其次，这些 ColumnDefinitions：

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"/>    
    <ColumnDefinition Width="Auto"/> 
    <ColumnDefinition Width="*"/>    
  </Grid.ColumnDefinitions> 
```

将使选项卡标题*居中。*如果您只希望第一个右移足够用于徽标或其他内容，则为第一列定义指定不同的宽度。

我使用这些列定义创建了一个快速示例：

```
<Grid.ColumnDefinitions>
    <!-- the width to shift the first tab rightward (i.e., to make room for a logo)-->
    <ColumnDefinition Width="87"/>  
    <ColumnDefinition Width="Auto"/>    
    <ColumnDefinition Width="*"/>   <!-- any extra space goes on the right -->
</Grid.ColumnDefinitions> 
```

...产生这个：

![在此处输入图像描述](../Images/3f36a77e70f6039434b36de5a4d420c9.png)

# iphone - 如何在后台执行任务？

> ID：13909929
> 
> 赞同：-1
> 
> 时间：2012-12-17T07:24:03.177
> 
> 标签：iphone, objective-c, ios, multithreading

众所周知，处理器繁重的工作需要在非 UI 线程上，让我们将其视为后台线程。现在就我而言，我正在解析提要中的数据，然后将这些解析的数据插入到数据库中。我想在我的**后台线程**上处理这个“数据解析” ，保持`UI`线程对用户交互的**响应。**现在我的想法是在应用程序启动后立即开始解析。

**我完全不知道如何在 IOS 中处理线程。**

请有人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:32:12.523

Rohan，如果您希望从服务器下载数据，将数据插入设备上的本地数据库并且顺序很重要，那么我建议您研究异步请求，例如使用**ASIHttpRequest**或**AFNetworking**库。

这比使用多线程编程要好。

我不是大师，但根据我自己的经验，我发现多线程编程更多的是在后台进行计算，而不是在后台下载数据。异步请求更多用于在后台下载数据。

必须为正确的工作使用正确的工具。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T03:49:56.843

恕我直言，最简单的方法是使用这个 NSObject 的方法：

```
- (void)performSelectorInBackground:(SEL)aSelector withObject:(id)arg; 
```

这应该调用一个将在后台运行的方法，解析数据。
完成后，您可能需要通知主线程。因此您可以在主线程中执行完成处理程序：

```
NSBlockOperation* completionHandler=[NSBlockOperation blockOperationWithBlock: ^
{
    // Use the parsed data
}];
NSOperationQueue* queue=[NSOperationQueue mainQueue];
[queue addOperation: completionHandler]; 
```

**PS**：一旦完成数据解析，这应该在后台方法中使用。**我假设您需要更新可能与主线程产生竞争条件的内容**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:27:00.057

如果您搜索得更多，您会发现一些东西......这个是免费的：

```
// Declare the queue
         dispatch_queue_t workingQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
         dispatch_async(workingQueue,
                        ^{
                          // My background job
                            dispatch_async(dispatch_get_main_queue(),
                                           ^{
                                              // Update the UI
                                           }
                                           );
                        }); 
```

# blackberry - 黑莓中的标签

> ID：13909931
> 
> 赞同：2
> 
> 时间：2012-12-17T07:24:06.337
> 
> 标签：blackberry, tabs

我正在黑莓上开发应用程序，我是新手，所以不知道如何实现。

在我的应用程序中，我必须实现选项卡。为此，我使用了 pillButtonSet。在我的应用程序中，我有五个选项卡，每个选项卡都有复杂的视图。我想为不同的选项卡创建不同的 java 类。

就像在[Android 中`TabActivity`](http://developer.android.com/reference/android/app/TabActivity.html)一样，我们可以轻松地在选项卡之间导航。我仍然没有为每个选项卡设计视图。我正在谷歌搜索，但没有成功。

我很担心; 我需要在一个屏幕上编写整个代码吗？.... 如果不是，我必须在哪里创建选项卡以及如何导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:13:24.513

看看[RIM 的这个 BlackBerry 示例](http://supportforums.blackberry.com/t5/Java-Development/Create-tabbed-view-screens/ta-p/444969)。它有点旧，但如果您仍然必须支持 OS 5.0，这是一种有用的技术（如果您不支持 OS 5.0，请参阅答案底部）。

从描述：

> 基本方法是使用一组管理器来控制在选择选项卡时出现在屏幕上的字段集。选项卡被实现为可聚焦的标签字段，当焦点发生变化时，FocusChangeListener 会执行管理器切换。字段和管理器被初始化一次并保存在内存中以保留选项卡之间的状态变化。

该页面有示例代码可供下载，但为了防止任何可能的链接失效，这里是示例中最重要的部分：

```
package com.rim.samples.tabcontrol;

import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FocusChangeListener;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BasicEditField;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

public class TabControl extends UiApplication {

        public TabControl() {
                TabControlScreen screen = new TabControlScreen();
                pushScreen(screen);
        }

        /**
         * @param args
         */
        public static void main(String[] args) {
                TabControl app = new TabControl();
                app.enterEventDispatcher();
        }

        private class TabControlScreen extends MainScreen implements FocusChangeListener {

                private LabelField tab1;
                private LabelField tab2;    
                private LabelField tab3;   
                private LabelField spacer1;   
                private LabelField spacer2;    
                private VerticalFieldManager tabArea;    
                private LabelField tab1Heading;    
                private BasicEditField tab1Field1;    
                private BasicEditField tab1Field2;    
                private LabelField tab2Heading;    
                private BasicEditField tab2Field1;    
                private BasicEditField tab2Field2;    
                private LabelField tab3Heading;    
                private BasicEditField tab3Field1;    
                private BasicEditField tab3Field2;

                private VerticalFieldManager tab1Manager;
                private VerticalFieldManager tab2Manager;
                private VerticalFieldManager tab3Manager;

                public TabControlScreen() {
                        HorizontalFieldManager hManager = new HorizontalFieldManager();
                        tab1 = new LabelField("Page 1", LabelField.FOCUSABLE);
                        tab2 = new LabelField("Page 2", LabelField.FOCUSABLE);
                        tab3 = new LabelField("Page 3", LabelField.FOCUSABLE);
                        spacer1 = new LabelField(" | ", LabelField.NON_FOCUSABLE);
                        spacer2 = new LabelField(" | ", LabelField.NON_FOCUSABLE);

                        tab1.setFocusListener(this);
                        tab2.setFocusListener(this);
                        tab3.setFocusListener(this);
                        hManager.add(tab1);
                        hManager.add(spacer1);
                        hManager.add(tab2);
                        hManager.add(spacer2);
                        hManager.add(tab3);

                        add(hManager);
                        add(new SeparatorField());

                        tab1Manager = new VerticalFieldManager();
                        tab2Manager = new VerticalFieldManager();
                        tab3Manager = new VerticalFieldManager();

                        tabArea = displayTab1();
                        add(tabArea);

                }

                public void focusChanged(Field field, int eventType) {
                        if (tabArea != null) {
                                if (eventType == FOCUS_GAINED) {
                                        if (field == tab1) {
                                                System.out.println("Switch to Tab 1");
                                                delete(tabArea);
                                                tabArea = displayTab1();
                                                add(tabArea);
                                        } else if (field == tab2) {
                                                System.out.println("Switch to Tab 2");
                                                System.out.println("Switch to Tab 1");
                                                delete(tabArea);
                                                tabArea = displayTab2();
                                                add(tabArea);
                                        } else if (field == tab3) {
                                                System.out.println("Switch to Tab 3");
                                                System.out.println("Switch to Tab 1");
                                                delete(tabArea);
                                                tabArea = displayTab3();
                                                add(tabArea);
                                        }
                                }
                        }

                }

                public VerticalFieldManager displayTab1() {
                        if (tab1Heading == null) {
                                tab1Heading = new LabelField("Registration");
                                tab1Manager.add(tab1Heading);
                        }
                        if (tab1Field1 == null) {
                                tab1Field1 = new BasicEditField("Username: ", "");
                                tab1Manager.add(tab1Field1);
                        }
                        if (tab1Field2 == null) {
                                tab1Field2 = new BasicEditField("Password: ", "");
                                tab1Manager.add(tab1Field2);
                        }
                        return tab1Manager;
                }

                public VerticalFieldManager displayTab2() {
                        if (tab2Heading == null) {
                                tab2Heading = new LabelField("Password Recovery");
                                tab2Manager.add(tab2Heading);
                        }
                        if (tab2Field1 == null) {
                                tab2Field1 = new BasicEditField("Security Question: ", "Mother's Maiden Name?");
                                tab2Manager.add(tab2Field1);
                        }
                        if (tab2Field2 == null) {
                                tab2Field2 = new BasicEditField("Password: ", "");
                                tab2Manager.add(tab2Field2);
                        }
                        return tab2Manager;
                }

                public VerticalFieldManager displayTab3() {
                        if (tab3Heading == null) {
                                tab3Heading = new LabelField("Interests");
                                tab3Manager.add(tab3Heading);
                        }
                        if (tab3Field1 == null) {
                                tab3Field1 = new BasicEditField("Hobbies: ", "");
                                tab3Manager.add(tab3Field1);
                        }
                        if (tab3Field2 == null) {
                                tab3Field2 = new BasicEditField("Memberships: ", "");
                                tab3Manager.add(tab3Field2);
                        }
                        return tab3Manager;
                }

        }

} 
```

你说：

> 我想为不同的选项卡创建不同的 java 类。

在您的代码中，您可以编辑名为`displayTab1()`、`displayTab2()`等的方法，以便为每个选项卡返回不同的类。完全按照示例，每个类都`extend`将`VerticalFieldManager`类。但是，如果您想要的实现没有很好地设置 a `VerticalFieldManager`，您当然可以将这些方法的返回值更改为只是`Manager`基类。

如果您这样做，请记住更改`tabArea`成员变量：

```
 private Manager tabArea; 
```

**注意：**如果您只需要支持 OS 6.0 及更高版本，您还可以查看[这个较新的 API](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/component/pane/HorizontalTabController.html)

# android - 如何获取自定义网格子项点击事件？

> ID：13909934
> 
> 赞同：2
> 
> 时间：2012-12-17T07:24:29.840
> 
> 标签：android, gridview, event-handling

我正在为**自定义网格视图而苦苦挣扎。**不完全是自定义网格视图，而是**子视图的单击事件。**

主要的两个查询：

**第一的 ：**

问题是如果我在网格中添加简单的图像视图和文本视图并单击其工作的任何项目并显示该项目的位置。但是当我在网格替换文本视图中添加两个按钮时按钮不会调用简单的单击事件物品。

**第二 ：**

我想为所有三个视图（如图像和两个按钮）获取点击事件。如果我单击图像，它应该执行一些任务，并且与两个按钮相同。

看到我有这个代码。

**主java：**

```
package com.mkyong.android;

import java.util.ArrayList;

import com.mkyong.android.adapter.ImageAdapter;
import android.app.Activity;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.GridView;
import android.widget.ImageView;

import android.widget.Toast;
import android.view.View;
import android.widget.AdapterView.OnItemClickListener;

public class GridViewActivity extends Activity {

    GridView gridView;

    private ArrayList<String> listCountry;
    private ArrayList<Integer> listFlag;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        gridView = (GridView) findViewById(R.id.gridView1);
        prepareList();
        gridView.setAdapter(new ImageAdapter(this, listCountry, listFlag));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                ImageView img = (ImageView) v
                        .findViewById(R.id.grid_item_image);
                Toast.makeText(getApplicationContext(), "item" + img.getTag(),
                        Toast.LENGTH_SHORT).show();

            }

        });

    }

    public void prepareList() {

        listCountry = new ArrayList<String>();

        listCountry.add("india");
        listCountry.add("Brazil");
        listCountry.add("Canada");
        listCountry.add("China");
        listCountry.add("France");
        listCountry.add("Germany");
        listCountry.add("Iran");
        listCountry.add("Italy");
        listCountry.add("Japan");
        listCountry.add("Korea");
        listCountry.add("Mexico");
        listCountry.add("Netherlands");
        listCountry.add("Portugal");
        listCountry.add("Russia");
        listCountry.add("Saudi Arabia");
        listCountry.add("Spain");
        listCountry.add("Turkey");
        listCountry.add("United Kingdom");

        listFlag = new ArrayList<Integer>();

        listFlag.add(R.drawable.sample_thumb_1);
        listFlag.add(R.drawable.sample_thumb_2);
        listFlag.add(R.drawable.sample_thumb_3);
        listFlag.add(R.drawable.sample_thumb_4);
        listFlag.add(R.drawable.sample_thumb_5);
        listFlag.add(R.drawable.sample_thumb_6);
        listFlag.add(R.drawable.sample_thumb_7);
        listFlag.add(R.drawable.sample_thumb_8);
        listFlag.add(R.drawable.sample_thumb_9);
        listFlag.add(R.drawable.sample_thumb_10);
        listFlag.add(R.drawable.sample_thumb_11);
        listFlag.add(R.drawable.sample_thumb_12);
        listFlag.add(R.drawable.sample_thumb_13);
        listFlag.add(R.drawable.sample_thumb_14);
        listFlag.add(R.drawable.sample_thumb_15);
        listFlag.add(R.drawable.sample_thumb_16);
        listFlag.add(R.drawable.sample_thumb_17);
        listFlag.add(R.drawable.sample_thumb_18);

    }

} 
```

**图像adp：**

```
package com.mkyong.android.adapter;

import java.util.ArrayList;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

import com.mkyong.android.R;

public class ImageAdapter extends BaseAdapter {
    private Activity activity;
    private ArrayList<Integer> listFlag;
    private ArrayList<String> listCountry;

    public ImageAdapter(Activity activity, ArrayList<String> listCountry,
            ArrayList<Integer> listFlag) {
        this.activity = activity;
        this.listCountry = listCountry;
        this.listFlag = listFlag;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return listCountry.size();
    }

    @Override
    public String getItem(int position) {
        // TODO Auto-generated method stub
        return listCountry.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public static class ViewHolder {
        public ImageView imgViewFlag;
        public TextView txt;
        public Button btn1, btn2;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder view;
        LayoutInflater inflator = activity.getLayoutInflater();

        if (convertView == null) {
            view = new ViewHolder();
            convertView = inflator.inflate(R.layout.grid_item, null);

            view.imgViewFlag = (ImageView) convertView
                    .findViewById(R.id.imageView1);
            view.txt = (TextView) convertView
                    .findViewById(R.id.grid_item_label);
            view.btn1 = (Button) convertView.findViewById(R.id.button1);
            view.btn2 = (Button) convertView.findViewById(R.id.button2);
            convertView.setTag(view);
        } else {
            view = (ViewHolder) convertView.getTag();
        }

        view.imgViewFlag.setImageResource(listFlag.get(position));
        view.imgViewFlag.setTag(listFlag.get(position),
                "" + listFlag.get(position));
        // view.txt.setText(listCountry.get(position));

        return convertView;
    }

} 
```

**grid_item.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="120dp"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="1dp"
            android:background="@drawable/like" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dp"
            android:background="@drawable/dislike" />

        <TextView
            android:id="@+id/grid_item_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>

</LinearLayout> 
```

我试图找到东西，但没有成功。如何做到这一点。

感谢您访问我的查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:32:34.883

例如在你 getView

```
viewHolder.checkbox.setOnCheckedChangeListener(listenerCheckBox); 
```

和听众

```
OnCheckedChangeListener listenerCheckBox = new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

        }
    }; 
```

比如你 item_grid

```
 public class Item {

        private String title;
        private String description;
        private Date pubDate;
        private String link;

        public Item(String title, String description, Date pubDate, String link) {
            this.title = title;
            this.description = description;
            this.pubDate = pubDate;
            this.link = link;
        }

public String getTitle() {

return this.title;
}
public String setTitle(String title_) {

this.title  = title_;
}

    } 
```

\\\\\\\\\\\\\\\\\\\\\\

如果你的情况

```
 if (convertView == null) {
            view = new ViewHolder();
            convertView = inflator.inflate(R.layout.grid_item, null);

            view.imgViewFlag = (ImageView) convertView
                    .findViewById(R.id.imageView1);
            view.txt = (TextView) convertView
                    .findViewById(R.id.grid_item_label);
            view.btn1 = (Button) convertView.findViewById(R.id.button1);
            view.btn2 = (Button) convertView.findViewById(R.id.button2);

view.btn1.setOnClicListener(myClickListener);

            convertView.setTag(view);

        } else 
```

\\\\\\\\\\\\\\\\\\\\\\\\\\

```
private OnClickListener myClickListener = new OnClickListener() {
        public void onClick(View v) {

        }
    }; 
```

\\\\\\\\\\\\\\\\\\\\\\\\\

# python - 自由形式门控

> ID：13909935
> 
> 赞同：-2
> 
> 时间：2012-12-17T07:24:33.540
> 
> 标签：python

我正在研究流式细胞仪。我正在使用 python 的 fcs 模块。
我想为创建的图形创建不同的门。

我无法理解如何创建“自由形式”门。
如果有人有任何自由形式门控或任何与 py-fcm 相关的门控示例，还请告诉我。

在这里，我有兴趣了解如何从自由形式的门控中获取该区域。

以供参考。
[http://packages.python.org/fcm/basic.html#gating-and-working-withe-the-view-tree](http://packages.python.org/fcm/basic.html#gating-and-working-withe-the-view-tree)

包
[http://packages.python.org/fcm/basic.html](http://packages.python.org/fcm/basic.html)

py-fcm
[http://code.google.com/p/py-fcm/](http://code.google.com/p/py-fcm/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T14:49:14.770

自由形式的门实际上是一个多边形门，在创建门时鼠标经过的每个点都有一个顶点。如果您可以创建多边形门，那么您可以创建自由形状门；只要你有足够的顶点。由于您还询问了如何创建其他门类型，我怀疑您真正的问题是如何执行门。

要执行门控，您必须确定哪些事件位于指定区域内。矩形区域是最容易处理的。用于识别事件是否在矩形区域中的伪代码可能如下所示：

```
EventInRectRegion (event e, region r)
    return (((e[r.xParam] >= r.xMin) && (e[r.xParam] < r.xMax)) &&
            ((e[r.yParam] >= r.yMin) && (e[r.yParam] < r.yMax))) 
```

您应该能够看到确定事件是否在矩形中与用于确定任何点是否在任何几何形状内的代码类型相同。这种类型的代码用于鼠标点击测试和其他相关任务。

将此扩展到圆形、多边形和其他形状需要遵循相同的路径。以诸如[多边形](http://en.wikipedia.org/wiki/Point_in_polygon)中的点之类的算法为例。对于圆，您可以将圆表示为多边形，然后使用该算法，或者您可以在圆算法中找到一个点。

我希望当您进一步研究此问题时，您会发现性能是一个问题。我链接的 Point in Polygon 文章显示了几种不同的算法，其中主要关注的是以性能换取速度。您必须就您希望如何执行此命中测试以及您想要做出哪些权衡做出一些决定。

例如，您可以准确地测试每个事件（就像我在伪代码中所做的那样）。这是准确的，但需要您每次都评估边界。另一种算法是选择位图分辨率并在其中渲染区域。然后，您可以通过测试给定的位图像素是打开还是关闭来测试事件是否在该区域中。这允许您只评估一次区域渲染数学，但以位图的内存和命中测试中的一些精度为代价。

# javascript - 如何向 JSliderNews 2.0 (jQuery) 添加淡入淡出效果

> ID：13909936
> 
> 赞同：0
> 
> 时间：2012-12-17T07:24:34.787
> 
> 标签：javascript, jquery, css

我想找到[JSliderNews 2.0](http://www.landofcoder.com/demo/jquery/lofslidernews/index3.html)的褪色效果，但我不知道该怎么做

```
$(document).ready( function(){  
    var buttons = { previous:$('#jslidernews2 .button-previous') ,
                        next:$('#jslidernews2 .button-next') };          
    $('#jslidernews2').lofJSidernews({
        interval:5000,
        effect: 'fade', //easing:'easeInOutQuad',
        duration:1200,
        auto:true,
        mainWidth:590,
        mainHeight:300,
        navigatorHeight: 76,
        navigatorWidth: 160,
        maxItemDisplay:4,
        buttons:buttons } );                        
    }); 
```

我对默认代码做了一些小改动，但仍然不起作用我添加`effect & removed easing` 了没有任何区别的部分

```
effect: 'fade',
//easing:'easeInOutQuad', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:33:09.507

添加这些选项

```
direction       : 'opacity',
easing          : 'linear', 
```

# java - EventInjector.KeyEvent 在黑莓中的实际设备上不起作用

> ID：13909937
> 
> 赞同：2
> 
> 时间：2012-12-17T07:24:35.897
> 
> 标签：java, eclipse, blackberry

1.  我正在开发一个应用程序的压力构建，我需要有一个无限循环来模拟黑莓中的按键。当我在模拟器中测试它时没有问题，但是当我在实际的黑莓设备中测试它时，EventInjector.KeyEvent 不起作用。我已经签署了我的应用程序，但它仍然无法在实际设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:13:22.743

这就是解决方案。它只需要在您的设备上进行一些配置。

对于低于 5.0 的 OS 版本（例如 BB9000、BB8900、BB8520、BB9630、BB9550、BB9700）转到选项->高级选项->应用程序->突出显示 AMX_IM_BB_v6 然后按菜单键->选择编辑权限->允许交互->按菜单键然后保存

对于操作系统版本 6.0 以上（例如 BB9800、BB9900）转到选项->应用程序管理->AMX_IM_BB_V6->编辑权限->允许交互->按菜单键然后保存

# erlang - 杀死连接到 erlang 端口的进程

> ID：13909943
> 
> 赞同：10
> 
> 时间：2012-12-17T07:25:11.977
> 
> 标签：erlang

我想编写某种主管，并且正在尝试实现关闭外部程序的功能。外部进程通过端口连接到 erlang 的代码。我不知道如何通过发送信号或其他任何东西来关闭这个程序。关闭端口不是解决方案，因为我已经检查过许多程序不会在 SIGPIPE 上退出。你有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T10:55:51.470

您可以使用

```
{os_pid, OsPid} = erlang:port_info(Port, os_pid). 
```

获取操作系统中进程的 pid（请参阅[http://erlang.org/doc/man/erlang.html#port_info-1](http://erlang.org/doc/man/erlang.html#port_info-1) - 我认为您可能需要最新版本的 Erlang 才能将其包含在内，我认为apt-get 在 Ubuntu 12.04 上安装的那个还不够新，我知道 R15B02 有它）然后

```
os:cmd(io_lib:format("kill -9 ~p", [OsPid])). 
```

杀死它（[http://erlang.org/doc/man/os.html#cmd-1](http://erlang.org/doc/man/os.html#cmd-1)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-23T12:52:23.950

如果您终止链接的 erlang 进程，则可以终止外部进程。使用这种方式：

```
-module(portest).
-export([start/1, init/1, kill/0]).

start(ExtPrg) ->
   spawn(?MODULE, init, [ExtPrg]).

init(ExtPrg) ->
   process_flag(trap_exit, true),
   Port = open_port({spawn, ExtPrg}, [{packet, 2}]),
   register(extport, self()),
   loop(Port).

kill() ->
   exit(whereis(extport), kill). 
```

但是你不能杀死被 IO 读取阻塞的外部进程。

# android - 通过 android 中的意图将照片分享到 facebook

> ID：13909946
> 
> 赞同：2
> 
> 时间：2012-12-17T07:25:19.357
> 
> 标签：android, facebook

我想通过特定网址的意图将照片分享到 Facebook。

[http://tineye.com/images/widgets/mona.jpg](http://tineye.com/images/widgets/mona.jpg)

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);
Uri screenshotUri = Uri.parse("http://tineye.com/images/widgets/mona.jpg");
sharingIntent.setType("image/png");
sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

从画廊它工作正常。

但是当我将上面的网址传递给意图照片时，不会在 Facebook 上分享。

帮我解决这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:45:04.057

要从 web url 发布图像，您将执行以下步骤：

**第 1 步：**从 URL 获取位图：

看到这个帖子

[如何在 Android 中通过 URL 加载 ImageView？](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)

从 URL 获取图像位图

**第2步 ：**

将 Bitmap 临时存储在 Images.Media 中，发送后您可以将其删除

```
String path = Images.Media.insertImage(getContentResolver(), 
                            bitmapiamge, "title", null);
Uri screenshotUri = Uri.parse(path);

Intent sharingIntent = new Intent(Intent.ACTION_SEND);
emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
emailIntent.setType("image/png");

startActivity(Intent.createChooser(emailIntent, "Send email using")); 
```

并将位图发送到 facebook 墙，请参阅此帖子：

[Android：在 htc Hero 上选择 Gmail 应用程序时，带有 EXTRA_STREAM 的 Intent.ACTION_SEND 不附加任何图像](https://stackoverflow.com/questions/2206397/android-intent-action-send-with-extra-stream-doesnt-attach-any-image-when-choo)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T13:55:10.017

将背景图像设置为从一个活动到另一个活动的相对布局的代码

在第一个活动中，请参阅下面显示的代码

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
 {
    // TODO Auto-generated method stub
    if(requestCode == 1011)
    {
        if(resultCode == RESULT_OK)
        {
            image.setImageURI(data.getData());
            imageUri = data.getData();

            String filePath[] = {MediaStore.Images.Media.DATA}; //A column name which to be return
            Cursor c = getContentResolver().query(imageUri, filePath, null, null, null);
            c.moveToFirst();
            int index = c.getColumnIndex(filePath[0]);
            String path = c.getString(index);//actual path of file in sa card
            c.close();

            if(path!=null)
            {
                //Bitmap bmp =BitmapFactory.decodeFile(path);
                SharedPreferences.Editor editor = pref.edit();              
                editor.putString("image",path);//set the path of file into the SharedResources
                editor.commit();
            }
        }

    }   
} 
```

设置背景图像的代码

```
 void setLayoutBackground()
{
    SharedPreferences pref = getSharedPreferences("style_pref", 0);
    String path = pref.getString("image",null);
    Bitmap myBitmap = BitmapFactory.decodeFile(path);
        BitmapDrawable d = new BitmapDrawable(getResources(),myBitmap);
        layout.setBackgroundDrawable(d);
} 
```

# javascript - Wordpress - Media Master 主题中的损坏菜单

> ID：13909948
> 
> 赞同：0
> 
> 时间：2012-12-17T07:25:28.390
> 
> 标签：javascript, html, css, wordpress, content-management-system

> **可能重复：**
> [Wordpress 主题导航菜单](https://stackoverflow.com/questions/13910866/wordpress-theme-navigational-menu)

我正在使用主题 Media Master，可以在以下位置看到：

[http://wordpress.org/extend/themes/media-master](http://wordpress.org/extend/themes/media-master)

唯一的问题是具有子节点的顶部导航菜单节点分解。

任何人都有解决损坏的子导航系统的解决方案？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:51:23.720

主题已经超过 2 年没有更新了：O 所以我个人建议你不要使用它，因为从那时起 Wordpress 已经发生了很大变化。

# jquery - 如果调用同步请求，则无法显示 jQuery Mobile 消息加载

> ID：13909950
> 
> 赞同：1
> 
> 时间：2012-12-17T07:25:42.770
> 
> 标签：jquery, jquery-mobile

我正在创建一个移动网站并使用 jQuery Mobile 插件。在页面中，我需要通过 ajax 调用服务并且它是同步的，当请求发送并有响应时，应该显示加载消息

它适用于**Firefox**，但适用于**Chrome**或移动设备（iOS 上的 safari），加载消息无法显示，我已将 asynch 更改为 false 以使其正常工作，这不是我所期望的

以下是我的草稿代码

```
function callService() {
    $.mobile.showPageLoadingMsg();
    $.ajax({
        url: 'testservice',
        async: false,
        success: function(result) {
            // Dosomething
        }
    });
    $.mobile.hidePageLoadingMsg();
} 
```

有人有同样的问题吗？对此案的任何建议

- - 更新 - -

我在 jsfiddle [http://jsfiddle.net/ndkhoiits/jvqQJ/上添加示例](http://jsfiddle.net/ndkhoiits/jvqQJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:11:50.880

我认为您应该查看将在 ajax 请求完成之前和之后调用的 beforeSend() 和 complete() 函数，例如：

```
function callService() {

$.ajax({
    url: 'testservice',
    beforeSend: function() {
        $.mobile.showPageLoadingMsg();
    },
    complete: function() {
        $.mobile.hidePageLoadingMsg();
    }
    async: false,
    success: function(result) {
        // Dosomething
    }
});
$.mobile.hidePageLoadingMsg(); 
```

}

[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)上的文档

# objective-c - 通过airplay播放视频时设备上的ios背景图像

> ID：13909954
> 
> 赞同：0
> 
> 时间：2012-12-17T07:25:56.667
> 
> 标签：objective-c, ios, ios5, ios6, avplayer

我在实现 AVPlayer 时遇到了一个问题当我在 Apple TV 上通过 airplay 播放视频时，我的 iDevice 显示黑屏，下面没有像本机应用程序一样的提示图像。我的问题是这个图像必须由开发人员实现还是我应该为 AVPlayer 设置什么属性？

[http://flic.kr/p/dBJnf9](http://flic.kr/p/dBJnf9)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:27:40.307

您无需执行任何操作 - 如果您使用 MPMovieController 或 MPMovieViewControllerView 并且附近有支持播放的设备，播放按钮将自动出现（假设您都在同一个网络上）- 当您将视频推送到远程播放设备 - 您设备上的视频会自动替换为此图像，然后视频/音频会在您的远程设备上播放。

在您的应用程序中，您可能需要考虑一些代码来防止设备的屏幕关闭（没有背景音频服务，当 iDevice 进入睡眠状态时，视频/音频播放也将停止） - 和/或您可能想要设置“应用程序播放音频”到您的应用程序的 AppName-info.plist 中的“必需的背景模式”。

此处有更多详细信息 -[如果设备自动休眠/自动锁定，是否有办法让 Airplay 继续运行？](https://stackoverflow.com/questions/13206952/is-there-a-way-to-keep-airplay-running-if-the-device-auto-sleeps-auto-locks)

希望有帮助。

# jquery - 切换表的 tr 不起作用

> ID：13909956
> 
> 赞同：0
> 
> 时间：2012-12-17T07:26:08.623
> 
> 标签：jquery

[这是我的演示代码](http://alachiq.ir/samples/table/)

我想禁用`td`此内容'CLICKING MUST BE DISABLE'并单击'CLICK HEAR 1'可以正常工作，但不能正常工作'CLICK HEAR 2'

查询：

```
$("#chart tr:odd").addClass("odd");

$("#chart tr.odd").click(function()
    {
  $(this).next("tr").toggle();
}); 
```

HTML：

```
<table id="chart">
    <tbody>
    <tr class="odd">
        <td height="25" width="200px"><b>TABLE 1</b>&nbsp;</td>
        <td colspan="6">CLICKING MUST BE DISABLE</td>
    </tr>   
    <tr class="odd">
        <td style="padding-right: 30px;" width="100px"></td>
        <td style="background-color: rgb(237, 237, 237);" width="200px">CLICK HEAR 1</td>
        <td height="25">
        </td>
    </tr>   
    <tr style="display: none;">
       <td></td>
       <td colspan="4">
                 sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>   
        </td>
    </tr>
    <tr class="odd">
        <td height="25" width="200px"><b>TABLE 2</b>&nbsp;</td>
        <td colspan="6">CLICKING MUST BE DISABLE</td>
    </tr>   
    <tr>
        <td style="padding-right: 30px;" width="100px"></td>
        <td style="background-color: rgb(237, 237, 237);" width="200px">CLICK HEAR 2</td>
        <td height="25">
        </td>
    </tr>   
    <tr class="odd" style="display: none;">
       <td></td>
       <td colspan="4">
                 sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>sssss<br>   
        </td>
    </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:46:22.070

您正在使用`:odd`选择器，但您要选择的行不是奇数行。

1.  必须禁用单击
2.  点击这里 1
3.  必须禁用单击
4.  点击这里 2

以下 jsFiddle 显示了一个工作示例：http: [//jsfiddle.net/2rDww/](http://jsfiddle.net/2rDww/)

我已经手动将`odd`类添加到应该可以点击的两行。您可以删除将奇数类添加到所有奇数行的第一行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T07:37:29.503

这是您的 HTML（简化版）：

```
<tr class="odd">
    <td>CLICK HEAR 1</td>
</tr>

<tr>
    <td>CLICK HEAR 2</td>
</tr> 
```

这是您的点击功能

```
$("#chart tr.odd").click(function() {
    $(this).next("tr").toggle();
}); 
```

它正在寻找所有`tr`带有 class 的 's `odd`：`tr`你的 HTML 中的第一个有它，但你的第二个没有（这就是它不起作用的原因）。您尝试通过 JavaScript 添加这些类：

```
$("#chart tr:odd").addClass("odd"); 
```

但这是在点击处理程序**之后应用的。**

解决方案可能是您将`odd`类添加到您的 second`tr`中，但最动态的方法是简单地更改您的选择器以使用`odd`过滤器而不是类：

```
$("#chart tr:odd").click(function() {
    $(this).next("tr").toggle();
}); 
```

附言。它是“*这里*”，而不是“*听到*”；）。

# xpages - 我们可以在 xpage.. 中使视图动态化吗？

> ID：13909968
> 
> 赞同：0
> 
> 时间：2012-12-17T07:27:36.343
> 
> 标签：xpages, xpages-ssjs

我们可以制作动态吗？我不能使用扩展库“动态视图面板控制”来实现这一点。首先.. 是否可以使用 ??????? 来满足我的要求

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:41:56.540

您有几个选择：您可以计算视图名称。然后使用列索引而不是列名，这样任何视图都会呈现。或者，更好的是，看看 extlib/updatepack 的动态视图控件

# javascript - 自动完成框未在网页上显示列表

> ID：13909969
> 
> 赞同：2
> 
> 时间：2012-12-17T07:27:40.097
> 
> 标签：javascript, jquery, ajax, xslt, jquery-ui-autocomplete

我在网页上放了一个文本框，它是自动完成框。但是当我在自动完成文本框中写一些东西时，即使它有列表，它也没有列出任何东西。在调试代码时，列表是由 XML 生成的，它显示在HTML 页面也是，但它不显示在自动完成框中。

```
var lst_source = $("#tdStaffVolunteerList"); var lst_options = $("option", lst_source);
        $(document).ready(function() {
            $("#txtstaffvolunteerlist").autocomplete({
                source: lst_options.map(function() {
                    return $(this).text();
                }).get()
            });
        }); 
```

其中“txtstaffvolunteerlist”是“tdStaffVolunteerList”下的自动完成列表

# iphone - 在 ISGL3D 中，我们一次只能识别一个 Gesture

> ID：13909972
> 
> 赞同：4
> 
> 时间：2012-12-17T07:28:12.987
> 
> 标签：iphone, ios, uigesturerecognizer, isgl3d

我正在 ISGL3D 中开发一个应用程序。我一次只需要识别一个手势

即PICNH或PAN ..

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T07:38:22.000

您必须实现该`UIGestureRecognizerDelegate`方法`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`和`return NO`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T07:31:07.507

您可以使用此功能一次仅识别一个手势：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if (gestureRecognizer.view != otherGestureRecognizer.view)
        return NO;

    return YES;
} 
```

# webdriver - 如何使用选择类获取下拉列表中的所有值

> ID：13909975
> 
> 赞同：0
> 
> 时间：2012-12-17T07:28:55.467
> 
> 标签：webdriver

如何使用选择类获取下拉列表中的所有值。我还需要打印这些值。任何人都可以帮助我使用下面的代码，但我无法打印。

```
Select s = new Select(driver.findElementByid("id"))

s.getAllSelectedOptions() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:28:14.687

好吧，它会返回一个 列表`WebElements`，因此您需要查看列表元素的内部。

```
Select s = new Select(driver.findElementByid("id"));

List<WebElements> allSelectedOptions = s.getAllSelectedOptions();

for(WebElement webElement : allSelectedOptions) {
webElement.getText();
} 
```

请注意，由于您几乎没有解释您的问题和/或您使用的语言，我猜它是 Java。

# c++ - NSIS System::Call - 调用方法失败

> ID：13909980
> 
> 赞同：2
> 
> 时间：2012-12-17T07:29:27.870
> 
> 标签：c++, dll, call, nsis, dllexport

我创建了自己`dll`的公开一种实用方法，即`GenarateID`. 头文件看起来像这样：

```
#ifndef GENERATE_ID_H
#define GENERATE_ID_H

#include <windows.h>
#include <string>
#include <fstream>
#include <stdio.h>
#include "openssl/sha.h"

int __declspec(dllexport) GenerateID(const char* fileName, char* retVal);

// some additional helper methods declared here, but omitted for brevity
// ...

#endif  // GENERATE_ID_H 
```

这个方法有什么作用？
它读取作为第一个参数传递的二进制文件，获取一些数据，生成该数据的 SHA256 哈希，并通过第二个参数返回它。成功时，返回的 int 值为 0，否则为负值。这里值得一提的是，我为此目的使用了 OpesSSL 库。

现在，问题就从这里开始了。正如标题所说，我无法`dll`使用`System::Call`. （我创建了简单的控制台测试可执行文件，它可以毫无问题地调用库。）

这是我尝试过的，基于[这个简短的教程](http://nsis.sourceforge.net/Docs/AppendixD.html#D.3)：

```
# copy the files
SetOutPath $INSTDIR
SetOverwrite on
File C:\Users\Strahinja\Desktop\CRX\testfile.zip  # copy the binary
File C:\OpenSSL-Win32\libeay32.dll                # copy OpenSSL library
File C:\Users\Strahinja\Desktop\CRX\IDGenerator\Release\IDGenerator.dll # copy my dll

# generate id
StrCpy $R0 "testfile.zip"
StrCpy $R1 ${NSIS_MAX_STRLEN}   ;assign memory to out parameter ?
StrCpy $R2 -1
#System::Call 'IDGenerator::GenerateID(t, t)i (r10, .r11).r12'
System::Call 'IDGenerator::GenerateID(t r10,t .r11)i.r12'
DetailPrint "File parameter: $R0"
DetailPrint "Generated ID: $R1"
DetailPrint "Return value: $R2" 
```

NSIS 说返回值是`error`. 有没有办法检查错误是什么，更重要的是 - 我用对了吗？

作为旁注：我尝试使用 an`exe`而不是 a `dll`，以相同的方式将其复制到与 相同的目录中`dll`，并使用以下命令调用它：

```
nsExec::ExecToStack '"myidgen.exe"'
Pop $R2
Pop $R1 
```

这里的可执行文件工作正常，但我仍然更喜欢 dll。我感觉到它可能与调用约定有关，或者`dllexport`（因为它使用名称修饰，AFAIK）有
什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:00:56.587

错误通常意味着语法错误，但也可能意味着 LoadLibrary 或 GetProcAddress 失败。使用[Dependency Walker](http://www.dependencywalker.com/)检查导出的函数是否具有修饰名称。

您可能希望使用 DEF 文件来导出函数。

如果你使用`EXTERN_C int __cdecl __declspec(dllexport) foo()`它也应该在没有装饰的情况下导出，但是你需要附加`?c`到系统调用的末尾......

# iphone - iPhone 上的搜索栏没有得到修复

> ID：13909986
> 
> 赞同：0
> 
> 时间：2012-12-17T07:30:07.697
> 
> 标签：iphone, ios, ios5, uisearchbar

我有两个问题：

1.  我的 iPhone 屏幕上有一个搜索栏。当我滚动屏幕时，我的搜索栏也会滚动。我想解决这个问题或让它成为绝对。
2.  搜索不像如果我输入 A 那么我应该得到所有以字母 A 开头的单词。

我正在尝试的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    const NSInteger searchBarHeight = 45;
    UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0,
    self.tableView.frame.size.width, searchBarHeight)];
    searchBar.delegate = self;
    self.tableView.tableHeaderView = searchBar;
    [searchBar release];
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Refresh" 
    style:UIBarButtonItemStyleBordered target:self action:@selector(onAddContact:)];
    self.navigationItem.rightBarButtonItem = addButton;
    UILabel *label = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:20.0];
    label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    label.textAlignment = UITextAlignmentCenter;
    label.textColor = [UIColor whiteColor]; // change this color
    self.navigationItem.titleView = label;
    label.text = NSLocalizedString(@"All Contacts", @"");

    [label sizeToFit];
    content = [DataGenerator wordsFromLetters];
    indices = [[content valueForKey:@"headerTitle"] retain];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:44:28.303

您需要将搜索栏与表格视图分开。只需将搜索栏添加到视图中，而不是将其添加到表格中。代码如下：

```
[self.view addSubview:searchBar]; 
```

然后添加表格视图。

对于 UISearchDisplayController 示例，请遵循本教程： [http](http://cocoabob.net/?p=67) ://cocoabob.net/?p=67 或 [http://blog.mugunthkumar.com/coding/iphone-tutorial-uisearchdisplaycontroller-with-nspredicate/](http://blog.mugunthkumar.com/coding/iphone-tutorial-uisearchdisplaycontroller-with-nspredicate/)

源代码也可用。如果您不明白，请告诉我。我有一个项目，所有这些都已经实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:38:06.610

在这里，当您滚动`UITableView`当时也`UISearchBar`滚动，因为您添加`UISearchBar`为`UITableView`看到这一行的标题视图..

```
self.tableView.tableHeaderView = searchBar; 
```

所以它的滚动`UITableView`，这里用于修复`UISearchBar`只是添加为`self.view`带有框架的子视图，但在`UITableView`For Example 之外..

```
[yourSearchBar setFrame:CGRectMake(0, 0, 320, 44)];
[self.view addSubview:yourSearchBar]; 
```

`UISearchBar`有关更多信息，请参阅下面的教程链接和演示`UITableView`

1.  [过滤-a-uitableview-with-a-uisearchbar-using-core-data](http://code-ninja.org/blog/2012/08/01/filtering-a-uitableview-with-a-uisearchbar-using-core-data/)
2.  [connect-uitableview-with-uisearchbar](https://sites.google.com/a/injoit.com/knowledge-base/for-developers/interface/connect-uitableview-with-uisearchbar) // 看看如何使用`- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText` 方法从本教程中使用搜索栏文本字段更改事件过滤数组

# xpath - Selenium - 如何获得像素颜色？

> ID：13909989
> 
> 赞同：0
> 
> 时间：2012-12-17T07:30:28.700
> 
> 标签：xpath, selenium, webdriver, pixels

对于基于 Web 的应用程序，例如 youtube、metacafe 或显示进度条的音频流，我想捕获它是否实际播放过。

我在想：

1.  转到链接
2.  点击播放按钮
3.  将鼠标移动到特定位置，并在播放器上捕获像素颜色。
4.  等待 x 没有。秒
5.  再次捕获相同的像素颜色。

但是现在我看不到任何方法可以做到这一点。整个进度条显示为单个对象。有什么我可以做到的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:13:45.903

尝试使用以下代码使用对象的 CSS 属性获取进度条的背景颜色

```
driver.findElement(By.xpath("Your Xpath")).getCssValue("Background-Color") 
```

# php - 相同的 php 文件但在不同的文件夹中显示不同的输出

> ID：13909990
> 
> 赞同：0
> 
> 时间：2012-12-17T07:30:32.483
> 
> 标签：php, mysql

我有一件很奇怪的事情要去这里。我有一个名为 index2.php 的 php 文件（我将在下面给出代码） 我在两个不同的目录中有这个文件，当我加载然后在我的网络浏览器中我得到两个不同的输出。有人可以告诉我这怎么可能！？

```
 <?php
 //////////////////////////////////////////////////////////////////
 // DJ Status v3.0                                               //
 // ©2012 Joseph Scocca                                          //
 //////////////////////////////////////////////////////////////////
 include ("config.php"); // include the settings to connect to DB and ShoutCast
 include ("header.php"); // include the Header info
 if ($scsuccs!=1) { // Check is we can connect to ShoutCast Server
 if($streamstatus == "1"){ // Is the Stream broadcasting 
 if (isset($dj)) { // is there a DJ in the DB connected

 // Open Container and Column 1
 echo "<div id=\"container\"><div id=\"column-1\">";

 // connected DJ have a Avatar
 if (isset($djavatar) && $djavatar) { echo "
 <div id=\"avatarpic\"><img src=\"$djavatars/$djavatar\" /></div>"; }    

 // Close Column 1 Open Column 2 Make the Div Stats and start showing data
 echo "</div><div id=\"column-2\">
 <div id=\"stats\">
 <div><strong><span>Now playing</span></strong></div>";

 // if the song title is longer than 17 characters then scroll the title
 if (strlen($artisttitle[1]) > 17) { echo "
 <div><marquee behavior=\"scroll\" scrollamount=\"1\" direction=\"left\" width=\"160\">$artisttitle[1]</marquee>    </div>";

 // if the artist is longer than 16 characters then scroll the artists
 if (strlen($artisttitle[0]) > 16) { echo "
 <div><strong>By </strong><marquee behavior=\"scroll\" scrollamount=\"1\" direction=\"left\" width=\"135\">$artisttitle[0] </marquee></div>
 <div><strong>On Air</strong> $djname </div>";

 // if the artist is short than or equals 16 characters then just display it as text
 } else if (strlen($artisttitle[0]) <=16) { echo "
 <div><strong>By </strong>$artisttitle[0]<div>
 <strong>On Air</strong> $djname </div>";}

 } else if (strlen($artisttitle[1]) <= 17) {    
 echo "<div>$artisttitle[1]</div>";
 //if the song title is less than 17 characters then just display it as text

 // if the artist is longer than 16 characters then scroll the artists
 if (strlen($artisttitle[0]) > 16) { echo "
 <div><strong>By </strong><marquee behavior=\"scroll\" scrollamount=\"1\" direction=\"left\" width=\"135\">$artisttitle[0]</marquee></div><div><strong>On Air</strong> $djname </div>";
  // if the artist is short than or equals 16 characters then just display it as text
 } else if (strlen($artisttitle[0]) <=16) { echo "
 <div><strong>By </strong>$artisttitle[0]<div><strong>On Air</strong> $djname </div>";
            }
    } 
 echo "</div></div></div> // Close Column 2, Stats, and Container.
 <div id=\"column-3\"><div id=\"social\">"; // Open Column 3 and social
    if (isset($address) && $address) {echo "
 <a href=\"$address\" target=\"_blank\">
 <img style=\"height:25px;width:94px;\" src=\"images/request.png\" border=\"0\" />
 </a><br>";} //  requestline 

 if (isset($djname1) && $djname1) {echo "
 $djname1";} // Display the DJ Name (for shows that Have a Co Host.)
 if (isset($twitter) && $twitter) {echo "
 <a href=\"http://www.twitter.com/$twitter\" target=\"_blank\">
 <img src=\"images/twitter.png\" border=\"0\" /></a>";}
  // does the  DJ have a Twitter, if so display it

 if (isset($facebook) && $facebook) {echo "
 <a href=\"http://www.facebook.com/$facebook\" target=\"_blank\">
 <img src=\"images/facebook.png\"  border=\"0\"/></a>"; }
 // does the  DJ have a Facebook, if so display it

 if (isset($email) && $email) {echo "
 <a href=\"mailto:$email\"><img src=\"images/email.png\"  border=\"0\"/></a>";}
  // does the DJ have a Email, if so display it

 // if the Connected DJ has a Co Host do the following.
 if (isset($djname2) && $djname2) {echo "
 <br />$djname2";} // Display the Co Host Name

 if (isset($twitter2) && $twitter2) {echo "
 <a href=\"http://www.twitter.com/$twitter2\" target=\"_blank\">
 <img src=\"images/twitter.png\" border=\"0\" /></a>";} // Co Host Tiwtter 

 if (isset($facebook2) && $facebook2) {echo "
 <a href=\"http://www.facebook.com/$facebook2\" target=\"_blank\">
 <img src=\"images/facebook.png\"  border=\"0\"/></a>"; } // Co Host  Facebook 

 if (isset($email2) && $email2) {echo "<a href=\"mailto:$email2\">
 <img src=\"images/email.png\" border=\"0\" />";} //  Co Host email 

 echo "</div></div>"; //Closing of the Social Div and Column 3

 } else { // when the current dj is not in the system do the following

 echo "<div id=\"container\"><div id=\"column-1\"><div id=\"avatarpic\">
 <img src=\"$djavatars/default.png\" /></div>";
  // Open Container, Column 1, and avatar pic. Display the default avatar 
 echo "</div><div id=\"column-2\">";   // Close Column 1, Open Column 2

 echo "<div id=\"stats\"><div><strong><span>Now playing</span></strong></div>";
 // Make the Div Stats and start showing data

 // if the song title is longer than 25 charaters then scroll the title
 if (strlen($artisttitle[1]) > 17) { echo "
 <div><marquee behavior=\"scroll\" scrollamount=\"1\" direction=\"left\" width=\"160\"> $artisttitle[1]  </marquee></div><div><strong>By:</strong> $artisttitle[0]</div>";

 } else if (strlen($artisttitle[1]) <= 17) {echo "
 <div>$artisttitle[1]</div><div><strong>By:</strong> $artisttitle[0]</div></div>";}   
 //if the song title is less than 25 charaters then just display it as text

 echo "</div>"; } // Close Column 2

 } else {echo "<b><span style=\"color:#FFF;\">Trek Radio is currently experiencing
 <br />technical difficulties.<br /> Please check again later. (Error 100)</b>
 </span>";} // Error 100 connetion error to the DB

 } else {echo "<b><span style=\"color:#FFF;\">Trek Radio is currently experiencing
 <br />technical difficulties.<br /> Please check again later. (Error 200)</b>
 </scpan>";} // Error 200 connection error to shoutcast
 echo "</div>"; // Close Container
 ?> 
```

现在这个脚本应该给我当前正在播放的歌曲标题和 dj。我不明白的是，当您访问[http://www.surayamedia.com/onair_tr/index2.php](http://www.surayamedia.com/onair_tr/index2.php) 和[http://www.surayamedia.com/trdjs/index.php](http://www.surayamedia.com/trdjs/index.php)时 ，输出是不同的。当它是相同的确切文件时，这怎么可能？它们只是放在两个不同的目录中！我不明白。我要做的就是将脚本移动到服务器上的不同文件夹！

感谢谁能弄清楚可以做些什么来解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:35:08.283

您的包含与脚本位于同一目录中，因此看起来没有显示 DJ 的包含缺少一个或两个包含。您可以将它们存储在单独的目录中，而不是复制包含，可能在公共 html 之上。

```
include ("config.php");
include ("header.php"); 
```

移至`includes`公共 html 上方：

```
include ("../../includes/config.php");
include ("../../includes/header.php"); 
```

如果两个目录中都存在包含，则意味着包含中存在一些依赖于相对路径的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:37:58.077

这是服务器问题而不是代码问题。

# excel - 数据透视表创建

> ID：13909991
> 
> 赞同：1
> 
> 时间：2012-12-17T07:30:34.857
> 
> 标签：excel, vbscript, excel-2007, vba

我怀疑一张工作表可以有多个数据透视表吗？如果是这样，有没有办法在工作表中定义他们的名字？

我编写了以下代码来更新/刷新在不同工作表上定义的数据透视表，但出现以下错误：

```
 Dim objExcel1,strPathExcel1
 Dim objSheet1,objSheet2,objSheet3

 Set objExcel1 = CreateObject("Excel.Application")
 strPathExcel1 = "D:\AravoVB\Copy of Original    Scripts\CopyofGEWingtoWing_latest_dump_21112012.xls"

objExcel1.Workbooks.open(strPathExcel1)
Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets("Business Process Matrix")
Set objSheet2 = objExcel1.ActiveWorkbook.Worksheets("Workflow Status Matrix")
Set objSheet3 = objExcel1.ActiveWorkbook.Worksheets("Business Hierarchy Martix")

objSheet1.PivotTables(1).PivotCache.Refresh
objSheet2.PivotTables(1).PivotCache.Refresh
objSheet3.PivotTables(1).PivotCache.Refresh 
```

***错误：*** *下标超出范围*

你能帮我吗？

***更新***

我有以下格式的数据 Excel 表：

```
Name   Fruits    Condition of Fruits
=====  ======    ====================

Ram    Apple       Good

Jadu   Apple       Bad

Tina   Orange      Good

Ram    Orange      Good

Tina   Apple       Bad

Ram    Apple       Bad 
```

Pivot 程序在同一个 excel 的另一张表中的输出，比如在 sheet(2) 中应该是这样的：

```
Name  Fruits   Condition of Fruits
====  ======   ===================
               Good       Bad    Total
               ====      =====  ======
Ram   Apple     1           1     2
Ram   Orange    1           0     1
Tina  Apple     0           1     1
Tina  Orange    1           0     1
jadu  Apple     0           1     1
===================================
Grand Total     3           3     6
=================================== 
```

上述格式需要存在于工作表 (2) 的 Excel 中，只要工作表 (1) 中包含源数据，如第一个表所示。

我希望使用 Excel 数据透视表概念创建宏程序。

您能否为上述 Pivot 创建建议任何代码设置？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:14:21.120

您可以在一张工作表中拥有多个数据透视表。创建它们，然后右键单击它们，选择“数据透视表选项...”并查看/更改它们的名称。通常您不需要这样做，因为 Excel 会自动将表命名为 [PivotTable* **N*** ]，其中***N***为 1、2、3、...

但是，如果您经常更改它们的外观（例如添加或删除列和/或行），则应避免在单个工作表中包含多个枢轴

编辑：回应您的评论...是的，您可以...在 Excel2010.VBA 中，相关对象/方法是

```
ActiveWorkbook.PivotCaches.Create(SourceType:=..., SourceData:= ..., Version:=...).CreatePivotTable TableDestination:=..., TableName:=..., DefaultVersion:=... 
```

源数据通过 PivotCache 对象定义，目标数据通过串联的 CreatePivotTable 方法定义。

以后你用

```
ActiveSheet.PivotTables(...).PivotFields(...).Orientation and .position 
```

和

```
ActiveSheet.PivotTables(...).AddDataField ...PivotFields(...), "header", xlSum 
```

指定您的数据透视表设计。

最好是开始录制宏，创建数据透视表，停止录制器并检查生成的代码。

# hadoop - 如何使用 XMLLoader 将 FileName 合并到 Pig Latin Script 中？

> ID：13909993
> 
> 赞同：1
> 
> 时间：2012-12-17T07:30:40.910
> 
> 标签：hadoop, apache-pig, hadoop-streaming

我正在使用 XMLLoader 在我的猪拉丁脚本中加载 XML。然后用我的 UDF 解析它。问题是我想将输入文件名合并到我的 UDF 中。

就像是

文件名 = (String)input.get(1);

这是我的猪拉丁代码供参考

```
REGISTER contrib/piggybank/java/piggybank.jar;
REGISTER TallyUDF.jar;
log = LOAD '/home/HadoopNaman1/pig/trunk/CompFetXML.xml' using  org.apache.pig.piggybank.storage..XMLLoader('ENVELOPE') as xml_record;
N = FOREACH log GENERATE FLATTEN(TallyUDF.ParseCompFet(xml_record)) as (key:CHARARRAY,value1:CHARARRAY,value2:CHARARRAY);
M = FILTER N by key is not null;
DUMP M; 
```

我想我必须编辑 XMLLoader.java 代码。但是，我想不出该怎么做。

# php - 正则表达式获取两个文本边界和边界之间的文本

> ID：13909996
> 
> 赞同：0
> 
> 时间：2012-12-17T07:30:56.623
> 
> 标签：php, regex

基于这个问题：[正则表达式提取方括号之间的文本](https://stackoverflow.com/questions/2403122/regular-expression-to-extract-text-between-square-brackets)

```
this is a [sample] string with [some] special words. [another one] 
```

我还需要提取 [sample] 和 [some] 之间的文本以及两个边界。换句话说，我想要将**[sample] 字符串与 [some]匹配的正则表达式**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:34:19.703

试试这个：

```
/\[sample\].*?\[some\]/ 
```

您只需要转义方括号并在标记之间使用惰性匹配。

[在 Regexr 上](http://regexr.com?335dt)查看。

如果文本可以在多行上，则需要另外使用`s`修饰符启用 dotall 模式：

```
/\[sample\].*?\[some\]/s 
```

这使得`.`也匹配换行符，这是默认情况下不做的。

[在 Regexr 上](http://regexr.com?335e0)查看