# StackOverflow 问答 14610000-14610999

# matlab - MATLAB LU 分解没有响应

> ID：14610001
> 
> 赞同：1
> 
> 时间：2013-01-30T17:25:33.120
> 
> 标签：matlab

我有一个下三角矩阵（L）和一个上三角矩阵（U）。我使用 mldivide 来找到`L*U*x = b`. 我认为 MATLAB 足够聪明，可以发现只需要向后/向前替换。但我觉得如果我能告诉 matlab（以某种方式）只应该执行前向/后向替换，它会更快。

请让我知道如何告诉 MATLAB 只进行向后/向前替换而不需要额外的操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:39:31.980

[文档](http://www.mathworks.com/help/matlab/math/systems-of-linear-equations.html#brs10rz-1)很清楚：

> **三角矩阵的排列**
> 
> mldivide 通过测试零元素来检查三角形。如果矩阵 A 是三角形的，MATLAB 软件使用代换来计算解向量 x。如果 A 是三角矩阵的置换，MATLAB 软件使用置换替换算法。

所以

```
x = U \ (L \ b); 
```

是您问题的后向/前向解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:33:00.393

搜索[文档](http://www.mathworks.com/help/matlab/math/systems-of-linear-equations.html)似乎 Matlab 确实使用了向后/向前替换。但是，由于`mldivide`获取矩阵而`L*U`不是单独获取，它必须在内部执行分解。`L``U`

如果您已经有 L 和 U 矩阵，您可以保存计算的那部分。

# git - 使用记事本进行 git 显示

> ID：14610002
> 
> 赞同：2
> 
> 时间：2013-01-30T17:25:36.347
> 
> 标签：git, github

我想使用 Windows 记事本查看以前的提交。我正在PowerShell中尝试下面的代码，但没有成功。请指教。

```
git show notepad HEAD^4:index.html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:32:07.110

尝试

```
git show HEAD^4:index.html > results.txt && start notepad "results.txt" 
```

并在记事本中打开生成的文本文件。您可以将文件的路径更改为您想要的位置。

编辑：我添加了一个部分来打开文本文件。如果找不到文件，您可能需要指定文件的完整路径。

# reportingservices-2005 - 将多值参数从 SSRS 传递到 UDF 时出现多参数错误

> ID：14610009
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:26:00.307
> 
> 标签：reportingservices-2005

我在网上找到了一个 UDF，它拆分了一个逗号分隔的字符串，目的是从 SSRS 向它传递一个多值参数。UDF 采用 1 个参数，即数据类型 VARCHAR(MAX)。

UDF 在我测试它并发送带有单引号的字符串时效果很好，例如'001,002,003'，但据我了解，SSRS 传递的是没有单引号的 001,002,003。当这被传递给 UDF 时，我得到了传递了太多参数的错误。我在 SQL Server Management Studio 和 SSRS 的测试中都得到了这个结果。

我试图弄清楚如何在将参数发送到 SSRS 中的 UDF 之前添加单引号。我已经尝试调用 UDF 并在 DECLARE 语句中设置传递给 '' + @MyVar + '' 的变量以及 UDF 的参数。我还尝试使用 2 个单引号创建另一个变量并将变量连接起来，例如 @Quote + @MyVar + @Quote。到目前为止，没有任何工作。

这是我正在使用的 UDF：

```
`CREATE FUNCTION [dbo].[SplitQuotedString] (@String varchar(max))
RETURNS @Array TABLE (Item varchar(8000))
AS
BEGIN
   DECLARE
      @Pos int,
      @End int,
      @TextLength int,
      @Item varchar(8000),
      @Fragment varchar(8000),
      @InQuotes bit
    SET @TextLength = DataLength(@String)

   IF @TextLength = 0 RETURN
   SET @Pos = 1
   SET @InQuotes = 0
   SET @String = @String + ','
   SET @Item = ''
   WHILE 1 = 1 BEGIN
      SET @End = CharIndex(',', @String, @Pos)
      IF @End = 0 BREAK
      SET @Fragment = Substring(@String, @Pos, @End - @Pos)
      IF @InQuotes = 1 BEGIN

         SET @InQuotes = PatIndex('%[^'']%', Reverse(@Fragment) + 'x') % 2
         SET @Item = @Item + ',' + Replace(Left(@Fragment, DataLength(@Fragment) - 1 + @InQuotes), '''''', '''')
      END

      ELSE BEGIN
         IF @Fragment LIKE '''%' BEGIN
            SET @InQuotes = 1
            SET @Item = Replace(Substring(@Fragment, 1 + @InQuotes, 8000), '''''', '''')
         END
         ELSE BEGIN
            SET @Item = @Fragment
         END
      END

      IF @InQuotes = 0 BEGIN
         INSERT @Array (Item) VALUES (@Item)
         SET @Item = ''
      END
      SET @Pos = @End + 1
   END

   RETURN
END
` 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:12:19.397

看来UDF是问题所在。我发现修改并使用了另一个 UDF，并且在将 =JOIN(Parameters!MyVar.Value, ",") 添加到 SSRS 中我的数据集的“参数”选项卡后它正在工作。这是我使用的功能：

```
create function Split ( 
@StringToSplit varchar(2048),
@Separator varchar(128))
returns table as return
with indices as
( 
select 0 S, 1 E
union all
select E, charindex(@Separator, @StringToSplit, E) + len(@Separator) 
from indices
where E > S 
)
select substring(@StringToSplit,S, 
case when E > len(@Separator) then e-s-len(@Separator) else len(@StringToSplit) - s + 1 end) String
,S StartIndex        
from indices where S >0 
```

# java - 使用 Java 从 MySQL 中读取 blob

> ID：14610011
> 
> 赞同：1
> 
> 时间：2013-01-30T17:26:04.397
> 
> 标签：java, mysql, blob

我在使用 Java 从 MySQL 数据库中读取 blob 时遇到问题。我需要用 jax-rs 编写一个 web 服务来提供保存在数据库中的图像。对于传输，它必须使用 Base64 进行编码。

这是我的代码：

```
public String getImage(@PathParam("id") int id) throws SQLException{
    System.out.println(id);
    String img64str = "null";
    Blob image = null;
    Connection conn = MySQLConnection.getInstance();
    if(conn != null)
    {
        try{
        // Anfrage-Statement erzeugen.
        Statement query;
        query = conn.createStatement();

        // Ergebnistabelle erzeugen und abholen.

            String sql = "SELECT bild FROM beitraege where id="+id;
            ResultSet result = query.executeQuery(sql);
            //Ergebniss zur�ckliefern
            while (result.next()) {
                System.out.println("while");
                image = result.getBlob("bild");
                InputStream binaryStream = image.getBinaryStream(1, image.length());
                String str= binaryStream.toString();
                byte[] bdata=str.getBytes();
                byte[] img64 = Base64.encode(bdata);
                img64str = new String(img64);
            }

        }catch (SQLException e) {
            e.printStackTrace();
        }
   }

    return img64str;
} 
```

不知何故，它只返回这样的东西（显示的结果列表已解码）：

```
java.io.ByteArrayInputStream@cc90a0a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:31:05.660

`java.io.ByteArrayInputStream@cc90a0a`是调用的`toString()`结果`InputStream`。它实际上并没有将其转换为 a `String`- 它只是使用`toString()`在当前环境中返回对象标识符的默认行为。

接口上定义了几种`read()`方法`InputStream`来获取流表示的底层字节序列。您需要使用其中之一来提取内容，而不是尝试将其转换为`String`via `toString()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:44:21.970

问题在于“toString()”调用：`binaryStream.toString();`BinaryInputStream 不实现`toString()`。使用类似这样的东西来读取字节：

```
int ch;

//read bytes from ByteArrayInputStream using read method
while((ch = binaryStream.read()) != -1)
{
   System.out.print((char)ch);
   // store it to an array...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:30:19.637

您返回的结果`binaryStream.toString()`类似于“java.io.ByteArrayInputStream@cc90a0a”。

您必须使用 InputStream 上的读取方法来获取实际内容。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-30T17:31:53.643

这一行是错误的：

```
binaryStream.toString(); 
```

`InputStream`不覆盖`toString()`，因此使用`Object.toString()`，它是这样定义[的](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)。这解释了为什么你得到那个`String`。

[这个另一个问题](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)向您展示了如何正确地从转换`InputStream`为`String`.

这表示您不应**将**二进制数据（如 Base64 编码的图像）转换为字符串（请参阅下面的 NullUserException 注释）。

# android - 更改java和aidl文件的包名

> ID：14610013
> 
> 赞同：0
> 
> 时间：2013-01-30T17:26:14.680
> 
> 标签：android, package, rename, aidl, android-framework

基本上我在一些包中有很多文件，我想在包名称中添加一些其他文本，但同时我希望所有文件也应该自动更改它们的包名称和导入语句，用于**JAVA**和**AIDL**文件，作为文件数量太多，如果我手动操作会花费很多时间。请让我知道是否有任何方法可以做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:31:05.290

这应该有效：

选择包后右键单击包名 ->**重构**->**重命名**或 ( `shift + alt + r`) 或 ( `F2`)。

决定你要重命名哪一个，希望它应该为整个项目更新。

确保先做备份:)

**编辑：**

用java文件可以轻松搞定，但不知道`AIDL`文件包名能不能自动改，我是手动改的。Ankit

# yql - 回显从 YQL 返回的数据

> ID：14610014
> 
> 赞同：0
> 
> 时间：2013-01-30T17:26:15.017
> 
> 标签：yql, qooxdoo

在[qooxdoo 操场](http://demo.qooxdoo.org/current/playground)上有一个 YQL 绑定示例。我想看看查询 URL 会返回什么数据。

如何修改此代码：

```
var delegate = {manipulateData : function(data) {

  return data.query.results.item;
}}; 
```

以便我可以查看返回数据？我试过`this.debug(data)`按 F7，但我没有看到任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:27:52.320

因为您在对象内部，所以关键字`this`指向对象本身。

所以你要么必须使用：

*   `qx.log.Logger.debug(data)`为了打印到操场的日志区域（和浏览器控制台）
*   或者`console.log(data)`仅在浏览器控制台中使用和检查对象。

所以它看起来像这样：

```
var delegate = {manipulateData : function(data) {
  console.log(data);
  return data.query.results.item;
}}; 
```

# c++ - MFC CWebBrowser2 事件

> ID：14610016
> 
> 赞同：0
> 
> 时间：2013-01-30T17:26:15.670
> 
> 标签：c++, windows, mfc

有谁知道在 CWebBrowser2 (MFC) 嵌入式浏览器控件加载图像之前（和之后）会触发什么事件？

我知道当一个网页/URL 加载一个事件 OnBeforeNavigate2 发生并且加载完成后一个事件 OnDocumentCompleteExplorer 发生。

但是，当您导航到的网页请求加载图像时呢？发生了什么事件？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:19:59.460

对于您的网页需要的每个资源，webbrowse 将触发 onbeforenavigate2 和 navigate2 事件

# c# - 确定 SQL 连接是本地的还是远程的

> ID：14610024
> 
> 赞同：1
> 
> 时间：2013-01-30T17:26:37.837
> 
> 标签：c#, sql-server, tcpclient

我正在尝试开发一个在**本地**或**远程**sql 服务器上运行`sql`脚本的应用程序，以更新应用程序上的值。使用以下命令检查连接状态：

 ****```
TcpClient client = new TcpClient(serverName, 1433); 
```

一旦我们知道我们可以使用该端口进行监听，我将不得不使用 Windows/SQL server将**登录凭据**`authentication`传递给 SQL 服务器。但问题是应用程序需要**确定**它所连接的服务器是本地的还是远程的，这取决于应用程序的功能可能会有所不同。例如：如果使用本地 Windows 身份验证，则使用集成安全性。

谁能帮助我确定连接是**远程的还是本地**的，因为基于此可以开发我的应用程序以启用不同的功能/属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:31:53.323

一种方法可能是

```
select @@SERVERNAME 
```

获取服务器的名称。****

# android - Android：获取子布局的组件

> ID：14610025
> 
> 赞同：2
> 
> 时间：2013-01-30T17:26:46.787
> 
> 标签：android, view, arraylist

我有一个*膨胀视图*，每次单击*“添加”*按钮时，我都会在*LinearLayout中添加该视图。*这个*视图有很多组件（TextViews，Spinner），所以，当点击其他按钮**“确认”*时，我如何获取每个视图组件的信息并将其放在一个对象上。

 ***我试试这个，我在 StackOverflow 中看到了类似的解决方案：

```
 confirmRecord = ( Button ) findViewById( R.id.btConfirmRecord );
    confirmRecord.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {               
        ArrayList<ViewGroup> elementList = new ArrayList<ViewGroup>();

        for( int i = 0; i < listRecord.getChildCount(); i++ ){
           if( listRecord.getChildAt( i ) instanceof ViewGroup ){
            elementList.add( (ViewGroup) listRecord.getChildAt( i ) );
           }    
         }
        }
    }); 
```

但我不知道我具体从视图中得到了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:35:38.407

似乎您不知道`findViewById(int id)`可以在`View`.

这意味着，您可以在按下 add 时将 id 添加到您正在膨胀的 XML 布局中的视图中。并且当按下确认时，您可以通过调用来获得您需要的视图`yourLinearLayout.findViewById(R.id.bla)`。***

# python - 使用 Ghost.py 模拟点击爬网

> ID：14610026
> 
> 赞同：1
> 
> 时间：2013-01-30T17:26:48.473
> 
> 标签：python, web-crawler, ghost.py

我要抓取的网站有多个动态加载的页面，我想模拟点击（不像 selenium 那样打开浏览器），所以我使用 Ghost.py。

这是简单的程序

```
from ghost import Ghost
import time

ghost = Ghost(wait_timeout=50)
page, extra_resources = ghost.open("http://www.samsung.com/in/consumer/mobile-phone/mobile-phone/viewall")
#ghost.wait_page_loaded()
n=2;
#links=ghost.evaluate("""
#           alist=document.getElementsById('txtViewAll');
#           alist.click;
#            """)
#print type(ghost.click("input#txtViewAll"))
page1, resources = ghost.evaluate("document.getElementById('txtViewAll').click();", expect_loading=True)
time.sleep(20)
print page1 
```

**但**

**输出**为**None**。

有人可以帮我解决程序有什么问题吗。

为什么它不工作？

# jquery - 选择另一个单选按钮时将单选重置为未选中

> ID：14610030
> 
> 赞同：1
> 
> 时间：2013-01-30T17:27:03.590
> 
> 标签：jquery, radio-button

使用旧版本的 jQuery (1.3)

我有一个像这样的表格：

```
 <form id="myForm">
     <input type="radio" id="yes" value="yes" /><label for="yes">Yes</label><br />
     <input type="radio" id="no" value="no" /><label for="no">No</label>
    </form> 
```

我的jQuery如下：

```
 $('#myForm').change(function() {
    if($('#yes').attr('checked')) {
        $('#lookUp').show();
    }
    else if($('#no').attr('checked')) {
        $('#lookUp').hide();
        $('#yes').attr('checked', false);
    }
}); 
```

当用户单击“是”时，我显示一个 div，并在选择“否”时隐藏它。我还想将“是”的选中状态设置为 false，但这不起作用。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:29:33.043

将输入名称属性设置为相同，以便表单知道它们是相同的 HTML 单选按钮组

```
 <input type="radio" id="yes" name="whatever" value="yes" /><label for="yes">Yes</label><br />
 <input type="radio" id="no" name="whatever" value="no" /><label for="no">No</label> 
```

# c++ - “预期的 ';' 在声明列表的末尾”zeromq 的错误

> ID：14610034
> 
> 赞同：1
> 
> 时间：2013-01-30T17:27:19.223
> 
> 标签：c++, zeromq, akka-zeromq

我使用的是 Mac，我使用自制软件安装 zeromq。我想在我的应用程序中使用 zeromq。我试图编译 zmq.hpp [https://github.com/zeromq/cppzmq/blob/master/zmq.hpp](https://github.com/zeromq/cppzmq/blob/master/zmq.hpp)

```
int main () {
    //  Prepare our context and socket
    zmq::context_t context (1);
    zmq::socket_t socket (context, ZMQ_REP);
    socket.bind ("tcp://*:5555");

    while (true) {
        zmq::message_t request;

        //  Wait for next request from client
        socket.recv (&request);
        std::cout << "Received Hello" << std::endl;

        //  Do some 'work'
        sleep (1);

        //  Send reply back to client
        zmq::message_t reply (5);
        memcpy ((void *) reply.data (), "World", 5);
        socket.send (reply);
    }
    return 0;
} 
```

但它失败了。错误显示

> “框架/zmq/zmq.hpp:377:35: 错误: 预期 ';' 在声明列表的末尾 socket_t (const socket_t&) ZMQ_DELETED_FUNCTION; ^ ; frameworks/zmq/zmq.hpp:379:42: error: expected ';' 在声明列表的末尾 void operator = (const socket_t&) ZMQ_DELETED_FUNCTION;"

为什么会这样？zmq.hpp 代码不包含任何错误。请帮忙。

最后我这样做了，它奏效了。

```
#if __has_feature(cxx_deleted_functions)
        #define ZMQ_DELETED_FUNCTION = delete
    #else
        #define ZMQ_DELETED_FUNCTION
    #endif 
```

非常感谢。奥黛丽。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:32:34.673

引入宏显然是为了为“已删除函数”( )`ZMQ_DELETED_FUNCTION`等 C++11 特性提供条件支持。`= delete`您的编译器似乎不支持该 C++11 功能。因此错误。

通过设计，`zmq.hpp`尝试通过分析编译器版本并相应地定义宏来自动设置此宏。这种自动检测可能过于乐观。但是，也有可能您的编译器实际上支持该功能，您只是忘记在编译器设置中打开它。

顺便说一句，我正在查看定义宏的代码的 Clang 部分

```
 #elif defined(__clang__)
    #if __has_feature(cxx_rvalue_references)
        #define ZMQ_HAS_RVALUE_REFS
    #endif

    #if __has_feature(cxx_deleted_functions)
        #define ZMQ_DELETED_FUNCTION = delete
    #endif 
```

在我看来，它看起来很糟糕。如果编译器不支持`cxx_deleted_functions`功能，则宏`ZMQ_DELETED_FUNCTION`保持未定义（而不是被定义为空）。这是错误的。

你在使用 Clang 吗？如果是这样，这实际上可能是您的错误的原因。在这种情况下，可以通过预定义`ZMQ_DELETED_FUNCTION`为空宏来修复错误，无论是作为全局宏定义还是在源代码中包含`zmq.hpp`.

# ruby-on-rails - 使用 Testacular 和 AngularJs 测试 Rails 应用程序

> ID：14610035
> 
> 赞同：1
> 
> 时间：2013-01-30T17:27:21.953
> 
> 标签：ruby-on-rails, angularjs, karma-runner

我正在尝试使用 angular e2e 设置 testacular 来测试我的 rails 应用程序。我无法通过最基本的测试。我的 Rails 应用程序正在运行。

testacular.config.js

```
basePath = '.';
files = [
  JASMINE,
  JASMINE_ADAPTER,
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  '*_spec.js'
];
exclude        = [];
reporters      = ['progress'];
port           = 8080;
runnerPort     = 9100;
colors         = true;
logLevel       = LOG_INFO;
autoWatch      = true;
browsers       = ['Chrome'];
captureTimeout = 5000;
singleRun      = false;
proxies        = { '/': 'http://localhost:3000/' }; 
```

test_spec.js

```
describe('Home Page', function() {
  beforeEach(function() {
    browser().navigateTo('/');
  });
  it('should have h2', function() {
    expect(element('body').html()).toContain('Explore')
  });
}); 
```

输出：我正在选择正文，因此您可以看到它不是我的网页，而是睾丸 iframe。我想我会在这里看到我的真实页面的正文。

```
expected "Explore" but was "\n  <h1 id=\"title\" class=\"offline\">Testacular - starting</h1>\n  <ul id=\"browsers\"></ul>\n\n  <iframe id=\"context\" src=\"about:blank\" width=\"100%\" height=\"100%\"></iframe>\n\n  <script src=\"socket.io/socket.io.js\"></script>\n  <script src=\"testacular.js\"></script>\n\n\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:57:02.680

在 testacular.config.js 文件数组中，

```
JASMINE,
JASMINE_ADAPTER, 
```

和

```
ANGULAR_SCENARIO,
ANGULAR_SCENARIO_ADAPTER, 
```

不应该一起使用。第一组用于 Jasmine 规格，第二组用于 e2e 测试。它们是相互排斥的。

在您的情况下，您正在进行 e2e 测试，因此 files 数组应该是：

```
files = [
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  '*_spec.js'
]; 
```

另见： [https ://github.com/testacular/testacular/issues/66](https://github.com/testacular/testacular/issues/66)

# android - Android：获取动态创建按钮的 id

> ID：14610036
> 
> 赞同：0
> 
> 时间：2013-01-30T17:27:28.160
> 
> 标签：android

我在运行时创建了 10 个按钮。我怎样才能得到他们的ID？

```
private void buttons() {
    int count = 10;

    for (int i = 0; i < count; i++) {
        Button newButton = new Button(this);
        newButton.setId("button_" + i);
        LinearLayout ll = (LinearLayout)findViewById(R.id.linear);
        LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        ll.addView(newButton,lp);
    }

} 
```

我需要做的是...

```
button_1.getX(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:33:10.413

你的问题没有很好的形成。我假设您不想获取 id 本身，而是想访问`Button`您不知道的名称。所以基本上你不能用`id`. 您完全误解了`id`in的概念`View`- 它只是`View`对象中的一个字段，您可以使用它来标识您的特定对象，但您不能将其用作字段名称，因此 1.getX() （`1`按钮的 id在哪里） 不可能。

您想要的是创建（而不是创建一组`Button`称为 b1、b2、b3、b4 等的 s）一个`Button`s 数组并使用索引访问它们：

```
private void buttons() {
    int count = 10;

    Button [] buttons = new Button[count];

    for (int i = 0; i < count; i++) {
        buttons[i] = new Button(this);
        LinearLayout ll = (LinearLayout)findViewById(R.id.linear);
        LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        ll.addView(buttons[i],lp);
    }

} 
```

然后，您可以像访问数组中特定位置的对象一样简单地访问特定按钮：

```
buttons[id].getX() 
```

我已经在你的函数内部创建了这个数组，但是当然，如​​果你想从函数外部访问它，你可能想要将它声明为例如你的类的一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:31:08.217

除非您设置动态创建按钮的 ID，否则它们不会有特定的 ID。因此，当您创建这些按钮时，通过说设置一些 id

```
button.setId(东西)

```

接着

```
button.getId()

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:29:55.990

使用视图的[getId](http://developer.android.com/reference/android/view/View.html#getId%28%29) ()方法：

```
button_1.getId(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:31:06.300

跟踪按钮的实例。在代码中创建控件时不要使用 id。

例如：

```
Map<Integer, Button> buttons = new HashMap<Integer, Button>()

for (int i = 0; i < count; i++) {
        Button newButton = new Button(this);
    buttons.add(i, newButton);
    ...
} 
```

# iphone - 隐藏 UITabBarItem

> ID：14610038
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:27:36.320
> 
> 标签：iphone, objective-c, hide, uitabbar, uitabbaritem

hy

我有一个依赖于 5 个 UiViewControllers 的 UITabBarController，所以我的 UiTabBar 有 5 个项目。我只想隐藏栏中的最后一项并注意将其删除。（该选项卡仍必须使用 myUItabBarController.selectedIndex=4 以编程方式访问；例如）

这是可能的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T10:03:32.683

我能够用这个解决我的问题：http: [//nullpointr.wordpress.com/2012/02/18/ios-dev-add-tabbar-to-a-view-without-a-tabbarcontroller/](http://nullpointr.wordpress.com/2012/02/18/ios-dev-add-tabbar-to-a-view-without-a-tabbarcontroller/)

# asp.net - 如何在 ApiController 中的两个动作之间消除歧义

> ID：14610039
> 
> 赞同：1
> 
> 时间：2013-01-30T17:27:37.503
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api, asp.net-web-api-routing

我在创建可以消除两个 Get 方法歧义的路由或其他配置时遇到问题。这是一个示例类：

```
public class UsersController : ApiController

   public User[] GetMany([FromUri]int[] id)
   {
      // returns all users requested by id
   }

   public User[] GetAll()
   {
      // returns all users
   }

} 
```

我想`myhost/api/users`映射到`GetAll`，并`myhost/api/users?id=123`映射到`GetMany`。

现在它们都产生 500 错误，因为这两种方法都匹配为两个 URI 的可能操作。

这是我的路线：

```
 routes.MapHttpRoute(
            name: "AllUsersRoute",
            routeTemplate: "api/users",
            defaults: new { },
            constraints: new { }
        ); 
```

虽然我知道在这个简单的示例中，`GetMany`可以更改方法以将空 id 列表视为对所有人的请求，但在更复杂的情况下可能并非如此。

请注意，我使用的是 MVC 4 Web API，Visual Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:57:47.523

这是动作选择的一个已知问题。

[http://aspnetwebstack.codeplex.com/workitem/821](http://aspnetwebstack.codeplex.com/workitem/821)

[http://aspnetwebstack.codeplex.com/workitem/322](http://aspnetwebstack.codeplex.com/workitem/322)

# javascript - 如何使用 requirejs 和 use.js 使 jQuery 插件（jquery.cookie、jquery.validate.unobtrusive）可加载

> ID：14610040
> 
> 赞同：0
> 
> 时间：2013-01-30T17:27:45.243
> 
> 标签：javascript, backbone.js, requirejs

我一直在尝试从[http://net.tutsplus.com/tutorials/javascript-ajax/building-a-scalable-app-with-backbone-js/](http://net.tutsplus.com/tutorials/javascript-ajax/building-a-scalable-app-with-backbone-js/)扩展模板应用程序。通过以下实现，我面临“未捕获的 ReferenceError：未定义 jQuery”。有人可以让我知道可能是什么问题导致它。

```
config.js
// Set the require.js configuration for your application.
require.config({
  // Initialize the application with the main application file
  deps: ["main"],
  urlArgs: "bust=" + (new Date()).getTime(),
  waitSeconds: 15,
  paths: {
    // JavaScript folders
    libs: "../assets/js/libs",
    plugins: "../assets/js/plugins",

    // Libraries
    //jquery: "../assets/js/libs/jquery",
    jquery: "http://code.jquery.com/jquery-1.7.min",
    jquerycookie:  "../assets/js/libs/jquery.cookie",
    jqueryDataTables: "../assets/js/libs/jquery.dataTables.min",
    jqueryValidate: "../assets/js/libs/jquery.validate",
    jqueryValidateUnobtrusive: "../assets/js/libs/jquery.validate.unobtrusive",
    underscore: "../assets/js/libs/underscore",
    backbone: "../assets/js/libs/backbone",
    highcharts:  "../assets/js/libs/highcharts/highcharts",
    highstock:  "../assets/js/libs/highcharts/highstock",
    easyXDM:     "../assets/js/libs/easyXDM/easyXDM.min",
    dateFormat: "../assets/js/libs/date.format",
    // Shim Plugin
    use: "../assets/js/plugins/use"
  },
  priority: [
        'jquery',
        'jquerycookie',
        'jqueryValidate',
        'jqueryValidateUnobtrusive',
        'underscore',
        'easyXDM',
        "highcharts",
        "highstock",
        "dateFormat"
  ],
  use: {
    backbone: {
      deps: ["use!underscore", "jquery"],
      attach: "Backbone"
    },
    jqueryDataTables: {
        deps: ["jquery"]
    },
    jqueryValidate: {
        deps: ["jquery"]
    },
    jqueryValidateUnobtrusive: {
        deps: ["jquery", "jqueryValidate"]
    },
    jquerycookie: {
        deps: ["jquery"]
    },
    underscore: {
      attach: "_"
    },
    highcharts: {
      exports: 'Highcharts'
    },
    highstock: {
      exports: 'highstock'
    }
  }
});

main.js
require([
    "namespace",

    // Libs
    "jquery",
    "jqueryDataTables",
    "use!backbone",

    'jquerycookie',
    'jqueryValidate',
    'jqueryValidateUnobtrusive',
    'highcharts',

    // Modules
    "modules/tricklebot",
    "modules/home",
    "modules/dashboard",
    "modules/profile",
    "modules/transactions",
    "modules/analysis",
    "modules/signup",

],

function(namespace, $, jqDT, Backbone,
         jqCookie, jqValidate, jqValidateUnobtrusive, highcharts,       
         tricklebot, Home, Dashboard, Profile, Transactions, Analysis, Signup) {
......
...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:53:09.447

我认为您正在遵循一个过时的教程，`use`并且`priority`在 require.js 配置中已替换为`shim`，请查看：[https ://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:40:56.730

现在有一种更简单的方法可以使用更新的 RequireJS 加载纯 JS 文件 - 一种避免所有路径、映射、shim 废话的方法：

```
require(['jquery'],function($){
    require(
        [
            'path/to/my/module'
            , 'path/to/plugin1' // <- plain js file but OMIT ".js" extension in the ID
            , 'path/to/plugin2' // <- plain js file but OMIT ".js" extension in the ID
            , 'path/to/plugin3' // <- plain js file but OMIT ".js" extension in the ID
        ]
        , function(myModule /*, it does not matter what plugins return*/){
            // jQuery will have all the above plugins applied by now
            // because they apply their code to global window.jQuery
            // just start using them
            $(selector).plugin1(blah)
        }
    )
}) 
```

使用不带“.js”的计划 JavaScript 文件使其受到所有“地图”和“路径”修改的影响，就像模块 ID 一样，但当/如果纯 JS 文件不是模块时仍然不会抱怨。

模块不会在后续加载时重新加载，因为它们从第一次开始就被缓存了。利润！

# c# - 验证是否在模拟类中调用了方法

> ID：14610043
> 
> 赞同：0
> 
> 时间：2013-01-30T17:27:55.193
> 
> 标签：c#, unit-testing, mocking, rhino-mocks

如果我们有这样的事情：

```
public class test
   {
       public void Condition()
       {
           if (x == y)
           {
               methodOne();
           }
           else
           {
               methodTwo();
           }
       }
   } 
```

如何使用 Rhino Mock 编写单元测试来断言是否`methodOne`被调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:35:27.653

*您通常不会为您正在测试*的课程创建模拟。您为其*依赖*项创建模拟。

因此，如果您的代码实际上是：

```
public class Test
{
    private readonly IFoo foo;

    public Test(IFoo foo)
    {
        this.foo = foo;
    }

    public void Condition()
    {
        if (x == y)
        {
           foo.MethodOne();
        }
        else
        {
            foo.MethodTwo();
        }
    }
} 
```

`IFoo`...然后创建一个模拟 for并将其传递给`Test`您测试的实例是有意义的。

虽然部分模拟*可能*允许您测试是否调用了同一类中的方法，但我通常会避开它。测试是否可以看到调用或的*效果*。`MethodOne``MethodTwo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:48:35.137

您可以利用 MethodOne 作为虚拟方法：

```
public virtual void MethodOne()
{
} 
```

并使用部分模拟：

```
MockRepository mock = new MockRepository();

var mockTest = mock.PartialMock<Test>();
mockTest.Expect(m => m.MethodOne());

mock.ReplayAll();
mock.VerifyAll(); 
```

# ruby-on-rails - 如何在 Ruby on Rails 中使用 Rake 任务设置两个外键？

> ID：14610045
> 
> 赞同：0
> 
> 时间：2013-01-30T17:27:55.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, rake-task

`invoices`我有一个 rake 任务要在我的 Rails 应用程序中创建一些：

```
def make_invoices
  Project.all.each do |project|
    i = project.invoices.create!( :number     => random_number,
                                  :date       => random_date,
                                  :recipient  => random_recipient,
                                  :user_id    => project.person.user.id)        
    i.created_at = random_time
    i.save
  end
end 
```

但是，此行会导致 rake 任务失败：

```
:user_id => project.person.user.id 
```

我收到以下错误：

```
Can't mass-assign protected attributes: user_id 
```

我知道为什么会这样。

但是我需要运行这个 rake 任务，我想知道是否有任何方法可以*强制进行批量分配*或其他什么？

每个发票`project_id`都是由该`invoices.create!`方法自动设置的。但是如果我也需要设置 a`user_id`怎么办？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:37:53.097

您需要在调用之外执行此操作`create`并将其更改为`build`：

```
def make_invoices
  Project.all.each do |project|
    i = project.invoices.build( :number     => random_number,
                                  :date       => random_date,
                                  :recipient  => random_recipient)   

    i.user_id = project.person.user.id
    i.save!

    i.created_at = random_time
    i.save
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:50:22.017

[（可能重复*“有没有办法绕过批量分配保护？”*）](https://stackoverflow.com/questions/5659850/is-there-a-way-to-bypass-mass-assignment-protection)

似乎[assign_attributes](http://apidock.com/rails/ActiveRecord/AttributeAssignment/assign_attributes)可以做到这一点：

```
user = User.new
user.assign_attributes({ :name => 'Josh', :is_admin => true }, :without_protection => true)
user.name       # => "Josh"
user.is_admin?  # => true 
```

# c# - DataTemplate 中只读属性的绑定更新

> ID：14610047
> 
> 赞同：0
> 
> 时间：2013-01-30T17:27:58.473
> 
> 标签：c#, xaml, data-binding, dependency-properties

我有一个通过依赖属性绑定到`ObservableCollection<object>`. 我正在使用 a`DataTemplateSelector`来确定在 ObservableCollection 中找到的基于类类型的对象类型，然后应用适当的 DataTemplate。任何类类型的多个对象都是可能的。

我的模型类的一部分如下。它已被编辑为仅显示兴趣点：

```
public class IPUpdater
{
   public IPUpdater()
   {
   }

   public string IPTransceiverInstall { get; set; }
   public string IPTransceiverFinal { get; set; }
   public Boolean IsFinal { get; set; }       

   public string IPTransceiver
   {
       get
       {
           return IPTransceiverAddress();
       }
   }

   private string IPTransceiverAddress()
   {
       if (!IsFinal)
           return IPTransceiverInstall;
       else
           return IPTransceiverFinal;
   }

} 
```

`IPTransceiver`使用适当的 IPUpdater 模板时，绑定到 XAML DataTemplate 中的 TextBox。`IsFinal`绑定到同一模板中的 CheckBox。

**问题：**如何强制 TextBox 注册`IPTransceiver`已更改的内容？我曾想过尝试将 DependencyProperty 设置为等于 IPTransceiver，但如果列表框中有多个该类的实例，我不确定如何最初设置它的值。

`TwoWay`并且`OneWayToSource`绑定模式不适用于只读属性。`IsFinal`当 CheckBox 值更改时，我可以验证更新。我什至试图在更新`IPTransceiverAddress()`时强制触发。`IsFinal`以上都没有导致 TextBox 更新。我能够更新框的唯一方法是重复 SQLite 查询，我想避免这种情况。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:55:27.390

您希望用作绑定源的任何类都应实现`INotifyPropertyChanged`. 您的 ViewModel（以及您的模型，如果您打算将 View 直接绑定到它们）应该实现此接口并引发`PropertyChanged`事件，以便 WPF 绑定引擎在 UI 中反映这些更改。

# c# - 在 Windows CE 6 上调试数据中止和预取中止异常

> ID：14610051
> 
> 赞同：1
> 
> 时间：2013-01-30T17:28:15.477
> 
> 标签：c#, compact-framework, arm, windows-ce

我们在 Windows CE 和 Windows Mobile 上运行一个相当复杂的软件，用于在不同设备类型上进行移动数据采集。在唯一安装了 Windows CE 6.0 的设备类型上，我们的客户端随机冻结操作系统（因此需要热启动）。客户端可能会在冻结之前运行良好的一两天，但也可能是五分钟（已经检查了句柄和内存泄漏）。在设备制造商的日志文件中，设备冻结时会出现此类条目：

> 异常“数据中止”（4）：线程 ID = 070a003e（pth = 89ca07e0），过程 ID = 0709003e（pprc = 8a01d3d0）'OurClient.exe'，VM-active = 0709003e（pprc = 8a01d3d0）'OurClient.exe ' PC=41a66b28(mscoree3_5.dll+0x00056b28) RA=41a64ab4(mscoree3_5.dll+0x00054ab4) SP=0003e28c, BVA=​​00000132

这些消息有时会有所不同（我想说到目前为止我统计了 20 条不同的消息，但 kernel.dll、k.core.dll 或 nk.exe 中的消息除外）。

所以我的问题基本上是，如何调试在.NET框架和内核深处发生的这种错误？例如，如何将程序计数器转换为 mscorlib 中的方法（返回地址相同）？我们的程序是否可能不适用于 CE 6，或者这也可能是驱动程序问题？

**更新：**事实证明，其中一个设备驱动程序干扰了我们的键盘挂钩实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:14:56.953

老实说，我不相信你所得到的（在 MS 之外）有可能调试这样的本机异常并找出当时在 mscoree3_5 中被调用的内容。自从我考虑这样做已经有一段时间了，但我确实记得发现有一个原因无法做到这一点。也许是因为我没有调试符号，或者是 .NET 运行时的其他性质，我不记得了。

但是，我已经成功翻译了数据中止消息以理解异常的含义，这有助于...

在你的例外：

RA：返回地址 BVA：基本虚拟地址 PC：程序计数器 SP：堆栈指针 FSR：故障状态寄存器

我有点惊讶你的例外不包括 FSR，你截断它了吗？这有助于找到错误对齐的读取等。我有一个很好的链接，可以帮助描述如何调试这些消息：

[打印的异常字符串 - 所有这些标志是什么意思？](http://blogs.msdn.com/b/hopperx/archive/2005/06/29/433842.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:17:20.400

正如 Alan 指出的那样，如果你没有符号作为事情发生的来源（并且`mscoree3_5.dll`你没有），那么中止信息就毫无用处了。即使有源代码，如果没有编译器符号输出，您也无法将其退回。

在这一点上，您只能进行有根据的猜测。异常信息看起来都有效（即 RA 或 SP 非零）这一事实向我表明这不是堆栈问题，更可能是数据问题（可能是对齐，可能是错误的读取或写入指针）。

我的猜测是它来自不正确的 P/Invoke。它“移动”的事实表明，由于收集或压缩，传递给 P/Invoke 的对象引用或地址可能会变得无效。

想象以下场景。

您有一个本机 API，它接收指向某些数据 blob 的指针，该 API 不仅会立即使用，而且会定期使用。也许它会从中读取或写入，但关键是 API 不仅需要在调用时同步数据。API 必须存储该指针以供以后使用。

您创建一些通过 P/Invoke 调用此 API 的托管代码。要传递数据指针，您需要定义一个表示数据的类，创建该类的实例并将其传递。假设为了这个例子，地址是 0x500。

您运行您的应用程序，调用 API，一切正常。API 从 0x500 读取并开始其业务。

直到应用触发 GC。现在 GC 说“嘿，我在堆中有一些空白空间，我会移动一些东西来解决这个问题”。它移动托管对象，使其现在位于 0x200 并释放 0x500 处的内存。在那之后的某个时刻，API 转到它的指针，仍然在 0x500 并进行读取。操作系统说“嘿，那个未分配的空间，你不能那样做！” 它中止了。

这种情况的解决方法是使用固定 GCHandle。您无需将类传递给 API，而是固定类并传入 GCHandle 的地址，GC 在收集或压缩期间无法移动该地址。这确保了 GCHandle 的地址保持不变，并且可以安全地通过本机边界。

请注意，这种情况发生时根本没有使用不安全代码，尽管您可以使用不安全代码做同样的事情。事实上，我认为对于不安全的代码，您可能会更清楚它可能发生的位置，并且可能比未标记为不安全的代码“更安全”。避免使用`unsafe`关键字并不能防止不安全的代码。

# vb.net - 通过 TableAdapter 迭代（循环）

> ID：14610057
> 
> 赞同：1
> 
> 时间：2013-01-30T17:28:31.930
> 
> 标签：vb.net, iteration, strongly-typed-dataset, tableadapter, strong-typing

我们正在寻找遍历 TableAdapter 并从名为 ClassName 的特定列中提取 TableAdapter 中每一行的值。稍后我们将添加其他列。

我们使用 DataSet 设计器创建了以下内容：

```
DataSet Name:      DataSetSchedules
DataTable Name:    DataTableSchedules
TableAdapter Name: DataTableDataAdapterSchedules 
```

TableAdapter 的设置如下：

```
Dim theTableAdapter As New DataSetSchedulesTableAdapters.DataTableTableAdapterSchedules 
```

最初是这样填充的：

```
Private Sub TeacherSchedules_Init(sender As Object, e As EventArgs) Handles Me.Init

    ' Load the data from the database into the GridView.
    '---------------------------------------------------
    GridViewSummary.DataSource = theTableAdapter.GetDataByAll(TextBoxSearch.Text)
    GridViewSummary.DataBind()

End Sub 
```

我们想利用已经创建的 TableAdapter，这就是为什么我们只想循环通过 TableAdapter。

我们将使用它来创建一个列表，该列表将作为电子邮件的一部分显示。

你能告诉我需要什么编码来填充和循环现有的 TableAdapter 从 ClassName 数据列中提取值吗？

我认为它应该是这样的：

```
 Dim strClassName As String = ""
    Dim objAadapter As New DataSetSchedulesTableAdapters.DataTableTableAdapterSchedules
    Dim objDataTable As <What to I put here?> = objAadapter.GetDataByAll(TextBoxSearch)

    For Each row As <What to I put here?> In objDataTable
        strClassName = row.ClassName
    Next 
```

但我不知道用什么来代替角括号（<>）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T07:06:16.230

```
Friend Function ValidateUserCode(ByVal ScannedUserCode) As Boolean
    Try
        Dim taOperator As New dsBusinessTableAdapters.GetOperatorTableAdapter, isUpdated As Boolean = True
        If taOperator.GetData().Count <> My.Settings.Zero Then
            For Each dr As DataRow In taOperator.GetData()
                Dim dbUserCode As String = dr.Item(1).ToString 'pass usercode index to readable variable
                If ScannedUserCode = dbUserCode Then ' UserCode EXISTS in database?
                    If GetOperatorDetails(dr) = isUpdated Then Return True 'YES,Get their Details and lets go!
                End If
            Next
            Return False
        Else : Return False 'for now...'show ADD NEW OPERATOR FORM? 'or have a default Admin Operator...
        End If
    Catch ex As Exception
        Return False
    End Try
End Function 
```

# php - 循环遍历表格行并发布文本/无线电输入的 PHP 代码

> ID：14610060
> 
> 赞同：0
> 
> 时间：2013-01-30T17:28:34.807
> 
> 标签：php

我想编写循环遍历表格行并发布文本输入和每行单选的 PHP 代码。

示例 HTML

```
 <body>
    <form method="post" action="table.php">
    <table>
      <tr>
        <td><input type="text" name="name[]"></td>
        <td><input type="radio" name="radio1" value="+">+</td>
        <td><input type="radio" name="radio1" value="-">-</td>
      </tr>
      <tr>
        <td><input type="text" name="name[]"></td>
        <td><input type="radio" name="radio2" value="+">+</td>
        <td><input type="radio" name="radio2" value="-">-</td>
      </tr>
      <tr>
        <td><input type="text" name="name[]"></td>
        <td><input type="radio" name="radio3" value="+">+</td>
        <td><input type="radio" name="radio3" value="-">-</td>
      </tr>
      <tr>
        <td><input type="text" name="name[]"></td>
        <td><input type="radio" name="radio4" value="+">+</td>
        <td><input type="radio" name="radio4" value="-">-</td>
      </tr>
      <tr>
        <td><input type="text" name="name[]"></td>
        <td><input type="radio" name="radio5" value="+">+</td>
        <td><input type="radio" name="radio5" value="-">-</td>
     </tr>
  </table>
  <input type="submit" value="submit">
  </form>
  </body>
</html> 
```

在行数可能不同的情况下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:29:45.943

```
<?php
  $rowCount = count($_POST['name']);
  echo "<table>";
  for ($i=0; $i<$rowCount;$i++)
  {
    echo "<tr>";
    echo "<td>".$_POST['name'][$i-1]."</td>";
    echo "<td>".$_POST['radio'.$i]."</td>";
    echo "</tr>";
  }

  echo "</table>"
?> 
```

通过使用**count()**计算每行中存在的数组元素来获取行数，在本例中为 name="name[]"。然后通过创建一个**for**循环遍历行，并在**for循环内使用****$_POST**获取每个变量。要获取为每一行选择的单选值（即 radio1、radio2 等），请不要按数组而是按名称引用元素名称，因为如果您创建一个元素 radio[]，则不同的行将被视为同一个电台选择组。

# breeze - 在版本 1.0.1 中尝试 Breeze.js 示例时出现异常

> ID：14610061
> 
> 赞同：0
> 
> 时间：2013-01-30T17:28:41.433
> 
> 标签：breeze

我正在尝试试用 Breeze.js 并下载了 MVC 示例的最新块包。

但是，每次我尝试保存数据时，BreezeSampleController 中的 SaveChanges 操作都会引发异常：

“Newtonsoft.Json.Linq.JObject”不包含“实体”的定义

该库看起来很棒，我想确保我拥有最稳定的位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:02:27.230

引用 KS：“原来的问题是 Telerik Test Studio 在 GAC 中安装了 Newtonsoft.Json 程序集。我一安装它，就不再抛出异常。”

# rally - 如何在 Rally WSAPI 中为单个查询获取 200 多个结果

> ID：14610062
> 
> 赞同：1
> 
> 时间：2013-01-30T17:28:42.620
> 
> 标签：rally, agile-central

有没有办法在 Rally 中增加每个 AJAX 调用 web 服务 API 的 pageSize。我需要显示给定项目中每个团队成员的任务计数。我可以通过连续 AJAX 调用来检索每个团队成员的任务。假设如果有 80 个人在做这个项目，我需要对 WebService API 进行 80 次调用。我想到的另一种方法是使用单个查询获取所有团队成员的所有任务，然后根据任务的所有者过滤结果但是这种方法只会返回前 200 个任务，因为 pageSize 有限制。如何在单个查询中获取所有结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:49:25.603

您正在使用我们的 App SDK 之一吗？

[http://developer.help.rallydev.com/app-sdk](http://developer.help.rallydev.com/app-sdk)

在 1.x [RallyDataSource](http://developer.help.rallydev.com/rally-data-source) .findAll 将自动为您分页并返回所有结果。[这里](http://developer.help.rallydev.com/data-examples)有很好的例子来说明如何使用它。

在 2.0 预览版中，[WsapiDataStore](http://developer.help.rallydev.com/apps/2.0p5/doc/#!/api/Rally.data.WsapiDataStore-cfg-limit)有一个限制参数，您可以将其设置为 Infinity 或其他一些要返回的最大结果数。

示例： http: [//developer.help.rallydev.com/apps/2.0p5/doc/# !/guide/appsdk_20_data_stores](http://developer.help.rallydev.com/apps/2.0p5/doc/#!/guide/appsdk_20_data_stores)

# asp.net - 当您需要特定字段时更新记录的解决方案 Unique

> ID：14610063
> 
> 赞同：1
> 
> 时间：2013-01-30T17:28:52.900
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008, c#-4.0

我有一张桌子

```
ProjectID
ProjectName
Project description 
```

项目名称必须是唯一的。为了实现独特的逻辑，我将项目名称的名称发送到存储过程

```
Create proc CheckName
@Project Name
as
begin
select count(ProjectName)
where ProjectName=@Project Name 
```

它返回计数到 CS 页面，我检查一下 if(count>0) { //Add }

此代码适用于添加。现在，当我想更新项目描述字段时，再次检查项目名称并返回 Count 1（这很明显）并显示项目名称已存在，我无法更新表的其他字段。

可以实现哪些其他逻辑来维护表中的唯一字段。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:35:36.663

为什么不在**ProjectName**列上添加**唯一约束？**将**ProjectID 设为主键**，并**在其上放置身份种子**，使其自动递增。这也会自动将聚集索引添加到 ProjectID 列。此外，**将数据库的排序规则设置为 LATIN1_GENERAL_CI_AI**，以便数据库以不区分大小写的方式比较 ProjectName 列值。如果需要区分大小写的比较，可以将排序规则设置为 LATIN1_GENERAL_CI_AS。要将唯一键约束添加到 ProjectName 列，只需执行以下操作：

 ******```
ALTER TABLE PROJECT ADD CONSTRAINT
            UX_PROJECT_NAME UNIQUE NONCLUSTERED
    (
                PROJECTNAME
    ) 
```

现在您需要做的就是更新或插入，如果插入/更新重复的项目名称，则会抛出异常，您可以捕获并处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:52:31.263

当您希望特定字段唯一时，实现记录更新的示例

```
 string connectionstring = WebConfigurationManager.ConnectionStrings[""].ConnectionString;
            SqlConnection con = new SqlConnection(connectionstring);
            SqlCommand cmd = new SqlCommand("InsertEmployee", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@Id", SqlDbType.Int, 4);
            cmd.Parameters["@Id"].Value = Convert.ToInt32(TextBox1.Text);
            cmd.Parameters.Add("@EmpName", SqlDbType.NVarChar, 50);
            cmd.Parameters["@EmpName"].Value = Convert.ToString(TextBox2.Text);
            cmd.Parameters.Add("@Salary", SqlDbType.Decimal);
            cmd.Parameters["@Salary"].Value = Convert.ToDouble(TextBox3.Text);
            try
            {
                con.Open();
                cmd.ExecuteScalar();
                con.Close();
            }
            catch (Exception ex )
            {
                if (ex.Message.Contains("UNIQUE KEY constraint"))
                Lblmessage.Text = "Field already exist";
            } 
```******

# excel - 数据透视表重复

> ID：14610065
> 
> 赞同：0
> 
> 时间：2013-01-30T17:29:04.087
> 
> 标签：excel, duplicates, excel-2007, pivot-table

我有一些数据需要找到某家公司的平均日费率。数据由 1000 个名称组成，其中一些重复的名称按天计算。

如果我插入数据透视表并在公司上进行过滤，则会显示平均日费率，但是，我知道这是错误的，因为它包含重复的名称。

我通过双击平均值并在新选项卡中显示该公司的数据来解决这个问题。然后我可以插入另一个数据透视表来删除重复项，然后从中找到平均日费率。

有没有办法绕过必须在过滤选项卡上插入另一个数据透视表？

仅供参考，我对数据透视表很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:21:42.563

使用报告过滤器后，您可以创建“名称计数”值字段并从“行标签”中过滤名称。您只需按公司过滤，然后单击行标签 => 值过滤器 => 选择要过滤的列值（计数）=> 选择“大于 1”。

一个附加说明。如果您将数据放入表中，那么一旦您找到平均值，就有一个选项可以删除重复的条目。它肯定会比手动更快，但是它会删除最后一个重复条目，所以要小心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T00:29:09.980

如果允许排序，另一种方法可能是将单个数据透视表限制为不重复的数据。这可以通过以下公式来实现：

```
 =COUNTIF(A$1:A2,A2) 
```

在 Row2 中并复制下来以适应，我假设 ColumnA 包含名称，并且您只需要一个实例和每个名称的任何一个实例。在 ColumnC 上排序并将数据透视表的范围限制为公式返回的那些行`1`。

然而，一个可能的缺点可能是，如果您希望根据其他标准多次包含某些个人。例如，如果罗伯茨夫人在列表中既是文员又是管理人员，您可能希望她在每个角色中都被视为单独的个人。

# php - 在 PHP/HTML 文本输入中，如何去除我不想提交到数据库的某些部分？

> ID：14610067
> 
> 赞同：0
> 
> 时间：2013-01-30T17:29:07.267
> 
> 标签：php

当人们在我的网站上编辑他们的帐户时，他们会感到困惑并认为他们必须输入所有的 Steam 个人资料链接，例如`http://steamcommunity.com/id/######`当他们必须在文本字段中输入的所有内容是`#######`，所以如果他们搞砸了，我该如何删除一切都来自他们的输入，除了`#####`部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:45:52.570

```
$input = "http://steamcommunity.com/id/herpderp";
$output = '';

if( preg_match(':/:', $input) ) {
    $output = explode('/', $input);
    if( !empty($output[count($output)-1]) {
        $output = $output[count($output)-1];
    } else {
        // in the case of a trailing slash, use the ~second~ last field
        // ie: http://steamcommunity.com/id/herpderp/
        $output = $output[count($output)-2];
    }
} else {
    $output = $input;
}

echo "SteamID: " . $output; 
```

或者简单地说：

```
if( preg_match('/[^a-zA-Z0-9]/', $input) ) {
    die('Disallowed characters in SteamID. Please enter only your SteamID, and not the full URL.');
} 
```

我更喜欢第二个，因为它让用户来处理他们自己的无能，而不是不得不不断添加代码行来处理用户似乎设计的新的和创新的问题。他们总是努力证明，只要某件事被宣布为“防白痴”，宇宙只会产生一个更好的白痴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:30:40.650

怎么样：

```
$lastPart = array_pop(explode('/', $_SERVER['REQUEST_URI'])); 
```

这将检索`REQUEST_URI`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:31:22.880

[`str_replace`](http://php.net/str-replace)`("http://steamcommunity.com/id/","",$input);`是一种方式。

更稳健的方法是：

[`preg_replace`](http://php.net/preg-replace)`("@^.*id/@","",$input);`

# performance - Pointfree 版本使性能恶化

> ID：14610081
> 
> 赞同：7
> 
> 时间：2013-01-30T17:30:06.367
> 
> 标签：performance, haskell, pointfree

好吧，事实证明我在我的程序代码中定义了这个函数：

```
st_zipOp :: (a -> a -> a) -> Stream a -> Stream a -> Stream a
st_zipOp f xs ys = St.foldr (\x r -> st_map (f x) r) xs ys 
```

它做它看起来做的事情。它使用 type 的内部运算符压缩（多次应用运算符，是的）两个 type 元素`Stream a`，这是一个类似列表的类型`a`。定义非常简单。

一旦我以这种方式定义了函数，我就尝试了另一个版本：

```
st_zipOp :: (a -> a -> a) -> Stream a -> Stream a -> Stream a
st_zipOp = St.foldr . (st_map .) 
```

据我所知，这与上面的定义*完全相同。*它只是先前定义的无点版本。

但是，我想检查是否有任何性能变化，我发现，确实，无点版本使程序运行得稍差（无论是在内存上还是在时间上）。

为什么会这样？如果有必要，我可以编写一个重现此行为的测试程序。

如果这有所作为，我正在编译`-O2`。

## 简单的测试用例

我编写了以下代码，试图重现上述行为。这次我使用了列表，性能的变化不太明显，但仍然存在。这是代码：

```
opEvery :: (a -> a -> a) -> [a] -> [a] -> [a]
opEvery f xs ys = foldr (\x r -> map (f x) r) xs ys

opEvery' :: (a -> a -> a) -> [a] -> [a] -> [a]
opEvery' = foldr . (map .)

main :: IO ()
main = print $ sum $ opEvery (+) [1..n] [1..n]
 where
  n :: Integer
  n = 5000 
```

使用`opEvery`（显式参数版本）的分析结果：

```
total time  =        2.91 secs   (2906 ticks @ 1000 us, 1 processor)
total alloc = 1,300,813,124 bytes  (excludes profiling overheads) 
```

分析结果使用`opEvery'`（无点版本）：

```
total time  =        3.24 secs   (3242 ticks @ 1000 us, 1 processor)
total alloc = 1,300,933,160 bytes  (excludes profiling overheads) 
```

但是，我希望这两个版本是等效的（在所有意义上）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T12:39:45.843

对于简单的测试用例，两个版本在使用优化编译时产生相同的内核，但没有进行分析。

在启用分析 ( `-prof -fprof-auto`) 的情况下编译时，pointfull 版本被内联，导致主要部分是

```
Rec {
Main.main_go [Occ=LoopBreaker]
  :: [GHC.Integer.Type.Integer] -> [GHC.Integer.Type.Integer]
[GblId, Arity=1, Str=DmdType S]
Main.main_go =
  \ (ds_asR :: [GHC.Integer.Type.Integer]) ->
    case ds_asR of _ {
      [] -> xs_r1L8;
      : y_asW ys_asX ->
        let {
          r_aeN [Dmd=Just S] :: [GHC.Integer.Type.Integer]
          [LclId, Str=DmdType]
          r_aeN = Main.main_go ys_asX } in
        scctick<opEvery.\>
        GHC.Base.map
          @ GHC.Integer.Type.Integer
          @ GHC.Integer.Type.Integer
          (GHC.Integer.Type.plusInteger y_asW)
          r_aeN
    }
end Rec } 
```

（没有分析你会得到更好的东西）。

当编译启用分析的无点版本时，`opEvery'`不是内联的，你得到

```
Main.opEvery'
  :: forall a_aeW.
     (a_aeW -> a_aeW -> a_aeW) -> [a_aeW] -> [a_aeW] -> [a_aeW]
[GblId,
 Str=DmdType,
 Unf=Unf{Src=<vanilla>, TopLvl=True, Arity=0, Value=False,
         ConLike=False, WorkFree=False, Expandable=False,
         Guidance=IF_ARGS [] 80 60}]
Main.opEvery' =
  \ (@ a_c) ->
    tick<opEvery'>
    \ (x_ass :: a_c -> a_c -> a_c) ->
      scc<opEvery'>
      GHC.Base.foldr
        @ a_c
        @ [a_c]
        (\ (x1_XsN :: a_c) -> GHC.Base.map @ a_c @ a_c (x_ass x1_XsN))

Main.main4 :: [GHC.Integer.Type.Integer]
[GblId,
 Str=DmdType,
 Unf=Unf{Src=<vanilla>, TopLvl=True, Arity=0, Value=False,
         ConLike=False, WorkFree=False, Expandable=False,
         Guidance=IF_ARGS [] 40 0}]
Main.main4 =
  scc<main>
  Main.opEvery'
    @ GHC.Integer.Type.Integer
    GHC.Integer.Type.plusInteger
    Main.main7
    Main.main5 
```

当您添加一个`{-# INLINABLE opEvery' #-}`pragma 时，即使在编译分析时它也可以被内联，给出

```
Rec {
Main.main_go [Occ=LoopBreaker]
  :: [GHC.Integer.Type.Integer] -> [GHC.Integer.Type.Integer]
[GblId, Arity=1, Str=DmdType S]
Main.main_go =
  \ (ds_asz :: [GHC.Integer.Type.Integer]) ->
    case ds_asz of _ {
      [] -> lvl_r1KU;
      : y_asE ys_asF ->
        GHC.Base.map
          @ GHC.Integer.Type.Integer
          @ GHC.Integer.Type.Integer
          (GHC.Integer.Type.plusInteger y_asE)
          (Main.main_go ys_asF)
    }
end Rec } 
```

这甚至比 pragma-less pointfull 版本快一点，因为它不需要勾选计数器。

该案很可能发生了类似的影响`Stream`。

外卖：

*   分析会抑制优化。没有分析的等效代码可能没有分析支持。
*   切勿使用为分析或未优化而编译的代码来衡量性能。
*   分析可以帮助您找出代码中的时间花在哪里[但是，有时启用分析可以完全改变代码的行为；任何严重依赖重写规则优化和/或内联的东西都是发生这种情况的候选者]，但它不能告诉你你的代码有多快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:00:27.933

这是我要说的一个很大的假设，但我认为编译器没有足够的信息来优化你的程序。虽然没有直接回答您的问题，而是将`Eq a`约束添加到两个函数（作为测试），但我从 pointfree 变体中得到了改进。见附图（拆分说明）

```
Right -> TOP = everyOp initial, BOTTOM = everyOp' initial
Left  -> TOP = everyOp with Eq a constraint, BOTTOM = everyOp' Eq a constraint 
```

![在此处输入图像描述](../Images/3a60cd218598ea33845fa5a7bf604480.png)

编辑：我正在使用 GHC 7.4.2

# javascript - 如何在动画开启时使用步进函数操作动画的持续时间？

> ID：14610082
> 
> 赞同：0
> 
> 时间：2013-01-30T17:30:08.177
> 
> 标签：javascript, jquery, css, jquery-animate

我正在尝试在动画开启时使用 step 函数更改 jQuery 动画的持续时间，例如缓动效果。我创建了一个示例来检查它，[**这里是 jsFiddle**](http://jsfiddle.net/D7YbP/5/)。

```
$('span').click(function() {
   var _this = $(this);
   if( !_this.is(':animated') ) {

       var target = 400;
       var speed = 1000;

        _this.animate({'top': target +'px'},{
            duration: speed,
            step: function(now,fx) {
                //what does fx stands for anyway, i cound'nt solve it?

                if ( now >= 300 ) { speed=100; }
                //condition works but it won't effect the current animation
            }
        });

    }
}); 
```

# sql - SQL Server 选择插入

> ID：14610085
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:30:12.747
> 
> 标签：sql, sql-server, sql-update

我如何将一堆行复制到一个表中，然后更改一列中的值并将它们插入回同一个表中？

该表具有以下列：

```
[PositionControlPositionId]
  ,[PositionControlPositionJobId]
  ,[PositionControlPositionRefLocationId]
  ,[PositionControlPositionCount]
  ,[PositionControlPositionEmploymentType]
  ,[PositionControlPositionLabel] 
```

`PositionControlPositionID`是主键 `PositionControlPositionRefLocationId`并且`PositionControlPositionCount`是外键

我已经尝试了以下查询，但没有奏效

```
Insert into [dbo].[PositionControlPosition] ([PositionControlPositionId]
  ,[PositionControlPositionJobId]
  ,[PositionControlPositionRefLocationId]
  ,[PositionControlPositionCount]
  ,[PositionControlPositionEmploymentType]
  ,[PositionControlPositionLabel]) Select [PositionControlPositionId]
  ,[PositionControlPositionJobId]
  ,[PositionControlPositionRefLocationId]
  ,[PositionControlPositionCount]
  ,[PositionControlPositionEmploymentType]
  ,[PositionControlPositionLabel] from [dbo].[PositionControlPosition] 
```

我也搜索了谷歌，但找不到我需要的任何东西，

我意识到这可能是一个微不足道的问题，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:34:59.030

您要查找的语法采用以下形式。

```
 insert [table]
 select
           [a]
         , [b]
         , 'newCValue'
         , [d]
     from
         [table] 
```

如果您没有选择所有列，那么您应该在插入时指定一个列列表

```
 insert [table]
         ( [a]
          ,[b]
          ,[c]
          ,[d])
 select
           [a]
         , [b]
         , 'newCValue'
         , [d]
     from
         [table] 
```

在你的情况下，我怀疑你违反了你的主键，我假设它是一个身份列，所以这应该可以工作。

```
INSERT [dbo].[PositionControlPosition]
        (
          [PositionControlPositionJobId]
         ,[PositionControlPositionRefLocationId]
         ,[PositionControlPositionCount]
         ,[PositionControlPositionEmploymentType]
         ,[PositionControlPositionLabel]
        ) 
SELECT
          [PositionControlPositionJobId]
         ,[PositionControlPositionRefLocationId]
         ,[PositionControlPositionCount]
         ,[PositionControlPositionEmploymentType]
         ,[PositionControlPositionLabel]
    FROM
         [dbo].[PositionControlPosition] 
```

This will duplicate the rows in `PositionControlPosition` excluding the primary key. If `PositionControlPositionId` is an identity column, it will be populated with new primary key values.

# php - PHP 单词数组计数

> ID：14610086
> 
> 赞同：-4
> 
> 时间：2013-01-30T17:30:12.823
> 
> 标签：php, arrays

我的数组是

> $myarray=array("人","天使",神"","天使","恶魔","神","神","人","神","天使");

如何获得单词和数像

```
God : 4
Angel : 3
Human : 2
Devil : 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:32:31.037

见[`array_count_values`](http://php.net/manual/en/function.array-count-values.php)。

从文档中：

```
Example #1 array_count_values() example
<?php
  $array = array(1, "hello", 1, "world", "hello");
  print_r(array_count_values($array));
?> 

Array
(
  [1] => 2
  [hello] => 2
  [world] => 1
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:40:27.947

看看[array_count_values](http://php.net/manual/en/function.array-count-values.php)和[arsort](http://www.php.net/manual/en/function.arsort.php)。

```
<?php  
$myarray = array("Human","Angel","God","Angel","Devil","God","God","Human","God","Angel");

$result = array_count_values($myarray);
arsort($result);

foreach($result as $word => $count)
{
    echo $word." was found ".$count." time(s)<br/>";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:32:01.630

您可以使用[数组计数值](http://php.net/manual/en/function.array-count-values.php)函数。

# php - Array_Intersect 未按预期工作

> ID：14610087
> 
> 赞同：1
> 
> 时间：2013-01-30T17:30:14.127
> 
> 标签：php, arrays, array-intersect

我有两个多维数组，我试图用它`array_intersect`来查找`$array1`出现在`$array2`. 相反，如下所示，结果包含第一个数组中的两个值，`$array1`即使第二个数组中只有一个值出现`$array2`。我想我对这个功能的工作原理有一些误解，谁能澄清我在这里做错了什么？

```
var_dump($array1);
array(2) {
  [0]=>
  array(1) {
    ["id"]=>
    string(2) "28"
  }
  [7]=>
  array(1) {
    ["id"]=>
    string(2) "30"
  }
}

var_dump($array2);
array(1) {
  [0]=>
  array(1) {
    ["id"]=>
    string(2) "30"
  }
}

var_dump(array_intersect($array1, $array2));
array(2) {
  [0]=>
  array(1) {
    ["id"]=>
    string(2) "28"
  }
  [7]=>
  array(1) {
    ["id"]=>
    string(2) "30"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-23T12:57:48.340

函数 array_intersect 将值作为字符串进行比较，请参阅[手册](http://php.net/manual/en/function.array-intersect.php)。不幸的是，这只是为所有数组提供了“数组”。

> ```
> Note: Two elements are considered equal if and only if (string) $elem1 === (string) $elem2\. In words: when the string representation
> is the same. 
> ```

相反，您可以使用自定义比较功能：

```
array_uintersect($array1, $array2, function($a, $b) { return ($a<$b)?-1:($a==$b)?0:1; }) 
```

或者使用 !== 如果您还想比较顺序和类型 - 请参阅[此处](http://php.net/manual/en/language.operators.array.php)了解差异。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T17:34:29.677

[array_intersect_assoc()](http://www.php.net/manual/en/function.array-intersect-assoc.php)查看交集的键*和*值。

# sql - 将使用加号 (+) 的 Oracle 连接语法转换为标准连接语法

> ID：14610090
> 
> 赞同：3
> 
> 时间：2013-01-30T17:30:23.787
> 
> 标签：sql, oracle, oracle10g, oracle11g

我正在尝试了解使用 (+) 连接两个表的 Oracle 连接语法。如果将其转换为使用标准联接语法，有人可以告诉我该查询的外观吗？

```
select p1.product_id, p1.product_name, p2.product_code, (decode(p3.product_type, null, 'N/A',p3.product_type) as product_type
from products p1, product_descriptions p2, product_descriptions p3
where p1.product_id=p2.product_id
and p2.product_age=p3.product_age(+)
and p2.product_type=p3.product_type(+)
and p3.status(+)='VALID' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:35:06.193

像这样的东西：

```
select p1.product_id, p1.product_name, p2.product_code,
    (decode(p3.product_type, null, 'N/A', p3.product_type) as product_type
from products p1
join product_descriptions p2
    on p1.product_id = p2.product_id
left join product_descriptions p3
    on p3.product_age = p2.product_age
    and p3.product_type = p2.product_type
    and p3.status = 'VALID'; 
```

是和之间的`where p1.product_id=p2.product_id`正常内部连接。其他的是外连接；它的编写方式看起来像是左右外连接的混合，但因为与 then相同，所以它不是真的；这是/连接的乘积和.`p1``p2``and p2.product_age=p3.product_age(+)``and p3.product_age(+)=p2.product_age``p1``p2``p3`

顺便说一句，我不喜欢别名`p1`，因为它们不是描述性的，当您在更复杂的查询中执行此操作时很容易迷失方向。[我并不孤单](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-table-aliases-like-a-b-c-or-t1-t2-t3)。`p2``p3`

我不确定您甚至是否需要外部联接，但这取决于数据。如果`product_age`并且`product_type`是唯一的，那么您可以`case`使用`p2.status`; 如果不是，那么您可能会假设只有一个`product_age`/`product_type`行可以`VALID`，否则您会得到重复。只是在思考你正在尝试做的事情......

# ruby - Thin + EventMachine 无法启动

> ID：14610091
> 
> 赞同：0
> 
> 时间：2013-01-30T17:30:37.267
> 
> 标签：ruby, sinatra, redhat, eventmachine, thin

在为 sinatra 应用程序加载瘦网络服务器时，我不断收到

```
Unable to load the EventMachine C extension; To use the pure-ruby reactor, require em/pure_ruby'<path>/vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:8:in `require': cannot load such file -- rubyeventmachine (LoadError)
from <path>/vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:8:in `<top (required)>'
from <path>/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin.rb:7:in `require'
from <path>/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin.rb:7:in `<top (required)>'
from <path>/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:5:in `require'
from <path>/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:5:in `<top (required)>'
from <path>/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
from <path>/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>' 
```

在我的 Mac OSX 中，我启动服务器没有任何问题，但在我的服务器是 Red Hat Enterprise Linux Server 6.2 版（圣地亚哥）中，我无法启动我的应用程序。

我正在使用 rvm 1.18.5 和 ruby​​-1.9.3-p374

提前致以问候和感谢。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:32:29.867

我已经解决了转储大部分 Bundler 配置的 gem 并将它们直接安装在我的全局 gemset 上的问题。我不得不从我的 Sinatra 加载代码中删除所有 Bundler 引用，而只使用 ruby​​gems。现在我只需要 Bundler 来测试黄瓜和使用 capistrano 进行部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T10:01:28.160

尝试重新安装 gem 'eventmachine'：

```
$ gem uninstall eventmachine

$ gem install eventmachine  
or 
$ bundle install 
```

见：[https ://stackoverflow.com/a/15140634/445908](https://stackoverflow.com/a/15140634/445908)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-08T23:21:31.890

我通过卸载自制的 ruby​​ 2.5 版本修复了“无法加载 EventMachine C 扩展”错误。在创建数据库时看到关于[Rails/Ruby 错误的评论：无法加载 EventMachine C 扩展](https://stackoverflow.com/questions/14134033/rails-ruby-error-when-creating-database-unable-to-load-the-eventmachine-c-exten?noredirect=1&lq=1#comment31729767_14250912)

# attr-accessible - 无法批量分配受保护的属性：即使 attr_accessible 已经添加

> ID：14610093
> 
> 赞同：0
> 
> 时间：2013-01-30T17:30:40.120
> 
> 标签：attr-accessible

即使已经添加了**attr_accessible**属性，也无法批量分配**:title**、**:url**和**:about 。**在 Rails 控制台上很好，但在在线表单上不行。

 **岗位型号：

```
class Post < ActiveRecord::Base
    attr_accessible :about, :downv, :names, :points, :title, :upv, :url, :user_id

    belongs_to :user

end 
```

用户模型：

```
class User < ActiveRecord::Base
    attr_accessible :email, :password_digest, :post_id, :password, :password_confirmation, :name

    has_many :posts
    has_secure_password

    validates_presence_of :password, :on => :create
end 
```

后控制器创建：

```
def create
    @post = User.new(params[:post])
    @post.upv, @post.downv, @post.points = 0, 0, 0

    @post.user_id = params[:user_id]
    @post.names = ""

    if @post.save
      redirect_to root_url, notice: "Post created."
    else
      render "new"
    end
end 
```

我的表单视图就像任何其他表单视图一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:08:27.957

而不是 Post.new 我输入了 User.new，解决了！！！**

# c# - 如何从文本框c#检查数据库中是否存在值

> ID：14610103
> 
> 赞同：0
> 
> 时间：2013-01-30T17:31:06.200
> 
> 标签：c#, database

好的，所以我有一个文本框和一个按钮，我将在其中输入一个数字并按下按钮。然后，如果已找到该值，我希望显示一个消息框。

我将所有函数都放在模型类中，然后为 GUI 部分调用它们。这是我尝试过的 sql 函数（ticket 是表的名称，ID 是我试图查找的值）：

```
 public void rebateslip(int ticketID)
    {
        SqlCommand myCommand  = new SqlCommand("SELECT ID FROM ticket WHERE ID = @ticketID", con);
        SqlDataAdapter sqlDa = new SqlDataAdapter(myCommand);

        myCommand.Parameters.AddWithValue("@ID", ticketID);

    } 
```

而对于按钮事件处理程序，我有这个：

```
 private void buttonPrintRebateSlip_Click(object sender, EventArgs e)
    {

            if (textBoxRebateSlip = model.rebateslip(ticketID)
            {
                MessageBox.Show("Found ticket");
            }
            else
            {
                MessageBox.Show("Ticket not in database");
            }

    } 
```

但它说ticketID不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:32:59.367

您的参数名为`ticketID`，而不是`ID`

因此，您应该更改为：

```
 myCommand.Parameters.AddWithValue("@ticketID", ticketID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:36:20.880

if (textBoxRebateSlip = **=** model.rebateslip(ticketID)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:41:51.457

If 语句不正确，您缺少右括号，并且比较也无效。使用 == 进行比较。此外，ticketID 变量不会在任何地方初始化。从您的描述中听起来您是从文本框中获取的？如果是这样，它应该是这样的：

```
int id = Convert.ToInt32(textBoxRebateSlip .Text);

if (model.rebateslip(ticketID) == id) 
```

...

我注意到的另一件事是，您没有在任何地方执行 sql 命令？

此外，rebateslip 方法的返回类型为 void，因此它不起作用。

由于所有这些错误，这段代码甚至无法编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:46:46.767

您应该更改您的`model.rebateslip`方法，使其返回 a`bool`并执行您的命令，然后它应该或多或少看起来像这样：（没有想到 SqlCommand 方法，也没有读者的方法，但根据我的记忆，它看起来像这）

```
public bool rebateslip(int ticketID)
{
    SqlCommand myCommand  = new SqlCommand("SELECT ID FROM ticket WHERE ID = @ticketID", con);
    SqlDataAdapter sqlDa = new SqlDataAdapter(myCommand);

    myCommand.Parameters.AddWithValue("@ticketID", ticketID);
    var reader = myCommand.Execute();
    return reader.HasRows;    
} 
```

那么你应该像@Ezekiel在他的回答中所说的那样做：

```
int id;
if (!int.TryParse(textBoxRebateSlip.Text, out id)) return;

if (model.rebateslip(id))
... 
```

# excel - 根据单元格中的值打印工作表中的页面

> ID：14610117
> 
> 赞同：0
> 
> 时间：2013-01-30T17:31:32.027
> 
> 标签：excel, vba

我正在尝试制作一个宏，它将打印从 1 到“单元格值 a1”的页面。A1 = 不同组织的成员。

我需要打印第 1 页和第 2 页，但从第 3 页开始以此类推。如果组织中只有 1 个成员，我只需要这三页。如果有 10 个成员，我也只需要 3 页，但是对于每 11、21、31 个成员等，我需要多打印一页。

如果 A1 的成员数为 10 或更少，则 A1 中的值将为 3（页），如果其成员数为 11-20，则为 4，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:42:08.380

这可以使用 VBA 设置`Worksheet.PageSetup.PrintArea`属性并使用`Worksheet.HPageBreaks.Add Before:=rowRef`where`rowRef="A11"`等设置适当的分页符来实现。

# javascript - Play framework 2.0.4 选择框排序顺序

> ID：14610119
> 
> 赞同：1
> 
> 时间：2013-01-30T17:31:40.633
> 
> 标签：javascript, jquery, html, scala, playframework-2.0

我目前正在 play 2.0.4 中实现 UI，但我在使用 @select 帮助器创建选择框时遇到问题。我将选择绑定到方法 Test.methodName，它返回一个 Map 对象，该对象包含以下格式的数据：
{2=Sorted1, 1=Sorted2}
可以看出数据按它们的值排序，我希望这个顺序当元素在选择中列出时被保存。但是，这些项目在选择中按以下顺序列出：

```
Sorted2
Sorted1 
```

似乎数据是按其键排序的。如何在选择中按值排序？

```
@select(
            paramForm("standardDbName"), 
            options = options(Test.methodName),
            'id -> "standardDb",
            '_default -> "--- Choose DB ---",
            '_label -> "Database Name",
            '_error -> paramForm("standardDbName").error.map(_.withMessage(""))
        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:54:27.640

如果您使用 java 使用 LinkedHashMap 而不是 Map。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:42:59.020

地图的本质是它没有排序。您可以返回元组序列`Seq("test"-> 1, "test2" -> 2)`而不是地图。

# forms - 日期的 Spring 属性编辑器分为三个不同的字段

> ID：14610127
> 
> 赞同：0
> 
> 时间：2013-01-30T17:31:54.550
> 
> 标签：forms, spring, date, spring-mvc

我正在尝试设置一个表单，用户应该在其中使用三个不同的输入字段（日、月、年）输入他/她的生日。

Spring MVC 的方式是什么：

*   a) 在显示来自 Date 对象的表单时预填充这些输入。
*   b）从用户那里获取，验证并放入 Date 对象？

编辑：

这是我们希望它看起来如何的示例链接：[雅虎注册](https://na.edit.yahoo.com/registration#dobFld)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:19:10.360

在spring mvc中，默认情况下，它不能自动将这个日期的对象转换为Date类型的对象，所以你只是在控制器中获取字符串，所以在get/post请求到服务器之前，你应该结合这些年份，一个月，一天在一起。在控制器中，您使用 java 将字符串转换为日期。同样的，控制器应该返回一个字符串，然后在页面中，你可以使用js来拆分它。但我建议你选择一个 datepicker 插件，它会更好并且节省很多工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T04:45:35.543

嘿@user1241320，您可以使用任何一个javascript框架的日历从视图层格式化他/她的生日，例如，`JQuery`.

我希望这些有帮助:)

# android - “android:id”（系统资源的 ID）存储在哪里？

> ID：14610131
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:32:00.290
> 
> 标签：android, android-resources

> **可能重复：**
> [“@+android:id/title”是什么意思？](https://stackoverflow.com/questions/5786829/what-does-the-androidid-title-mean)

例如：我有`android:id/summary`，`android:id/title`
但我不知道它们存储在哪里（我需要更多的 id）。我需要它们在这样的布局中使用：

```
<TextView android:id="@+android:id/title"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:textSize="40px"/> 
```

我需要系统资源的 ID（不是创建我自己的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:42:39.583

答案`[PATH TO ANDROID SDK]/platforms/android-[VERSION]/data/res/*.xml`
在这里找到：[https ://stackoverflow.com/a/6354998/1548085](https://stackoverflow.com/a/6354998/1548085)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:33:18.010

> “android:id”存储在哪里？

在您的 R.java 文件中。(gen > package > R.java)

> 我需要更多的 id

您可以通过添加“+”号来添加 ID：

```
android:id="@+id/myId" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:35:40.953

您可以通过写入各种布局文件来指定新的 ID：

```
android:id="@+id/theIdName" 
```

或者通过使用这些行创建一个新的 XML 文件（将其放在一些“值”文件夹中）：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <item name="theIdName" type="id"/>
</resources> 
```

在您以其中一种方式创建这些文件后，R java 文件（自动生成）将通过访问`R.id.****`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T17:39:30.303

带有 ids 的文件位于您的项目文件夹中 : `gen - yourpackage -R.java`。

如果你想使用这个文件中的 id 写：`@id/idof`。

如果你想创建新的 id : `@+id/newidname`。

系统资源的完整列表在[这里](http://developer.android.com/guide/topics/resources/accessing-resources.html)

# joomla - Joomla 注册错误

> ID：14610147
> 
> 赞同：0
> 
> 时间：2013-01-30T17:32:38.933
> 
> 标签：joomla, joomla2.5, virtuemart

在网站[http://www.ple-intl.com/NewUpgrade](http://www.ple-intl.com/NewUpgrade)中，我使用的是 joomla 2.5 并在注册过程中出现以下错误

*   它注册了用户，但不发送激活链接，但它在用户选项中设置为自我。
*   当用户在填写表格后点击注册时，它会显示 404 错误。（就我个人而言，我没有改变任何核心，我不想但我得到了一个错误，我检查了所有的东西）

**一些插件信息**

*   我在里面安装了美德市场，但每件事都是默认的

*   我是用于登录注册的用户超级登录模块，它调用默认的 joomla 注册页面。

请指导我所缺少的内容。我很累要解决这个问题，但我的想法都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:46:51.767

谢谢它现在开始工作，下面我已经提到了它显示错误的原因。

*   我插入的电子邮件实际上是在之前注册的，当我删除该 ID 时，我并没有在美德市场中删除与之相关的产品。

*   邮件发送的第二个美德商城注册激活链接有问题，在下面的链接中讨论解决方法。 [http://forum.virtuemart.net/index.php?topic=99755.0](http://forum.virtuemart.net/index.php?topic=99755.0)

# java - 如何调整 JPanel 的大小以适应“docknorth”中的 JFrame 而不会干扰剩余的 JPanel

> ID：14610153
> 
> 赞同：1
> 
> 时间：2013-01-30T17:33:07.083
> 
> 标签：java, swing, jpanel, layout-manager, miglayout

我正在做一个演示 Swing GUI 的小测试。在这个演示中，`JFrame`由 3 个“master”组成`JPanel`。如果您愿意，第一个 ( `jp1`) 由`JLabel`s 组成，另外两个由其他几个`JPanel`s 组成。我正在使用 MigLayout。

这是我的示例代码：

```
 // All the jPanels  
    JFrame frame = new JFrame();
    frame.setLayout(new MigLayout());
    JPanel jp1 = new JPanel();
    jp1.setLayout(new MigLayout());
    jp1.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    JPanel jp2 = new JPanel();
    jp2.setLayout(new MigLayout());
    jp2.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    JPanel jp3 = new JPanel();
    jp3.setLayout(new MigLayout());
    jp3.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    JPanel jp4 = new JPanel();
    jp4.setLayout(new MigLayout());
    jp4.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    JPanel jp5 = new JPanel();
    jp5.setLayout(new MigLayout());
    jp5.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    JPanel jp6 = new JPanel();
    jp6.setLayout(new MigLayout());
    jp6.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    JPanel jp7 = new JPanel();
    jp7.setLayout(new MigLayout());
    jp7.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));

    JPanel bigPanel1 = new JPanel();
    bigPanel1.setLayout(new MigLayout());
    bigPanel1.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));

    JPanel bigPanel2 = new JPanel();
    bigPanel2.setLayout(new MigLayout());
    bigPanel2.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
    //All the labels to be added to JPanel jp1
    JLabel label1 = new JLabel();
    label1.setText("LABEL1");
    JLabel label2 = new JLabel();
    label2.setText("LABEL2");
    JLabel label3 = new JLabel();
    label3.setText("LABEL3");
    JLabel label4 = new JLabel();
    label4.setText("LABEL4");
    jp1.add(label1);
    jp1.add(label2);
    jp1.add(label3);
    jp1.add(label4,"wrap");
    bigPanel1.add(jp2);
    bigPanel1.add(jp6);
    bigPanel1.add(jp3,"grow,wrap");
    bigPanel2.add(jp4);
    bigPanel2.add(jp7);
    bigPanel2.add(jp5,"grow,wrap");
    frame.getContentPane().add(jp1,"dock north, wrap");
    frame.getContentPane().add(bigPanel1,"span,grow,wrap");
    frame.getContentPane().add(bigPanel2,"span,grow,wrap");
    frame.pack();
    frame.setVisible(true); 
```

导致此输出：[GUI OUTPUT](http://i.stack.imgur.com/Wx0SJ.png)

我想要实现的是能够将标签添加到第一个`JPanel`( `jp1`) 中而不会弄乱其余部分`JPanel`的宽度。另外，我想让`JPanel`a 内的几个 s占据其全宽，`bigPanel`以及 in和fill 。`jp2``jp6``jp3``bigPanel1`

我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:45:59.120

我从来没有使用过`MigLayout`，如果可以使用默认 java 来完成，我个人不明白原因`LayoutManager`。

好的，所以我使用了一个组合`FlowLayout`来[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)实现这一点，以及 `gc.fill=GridBagConstraints.NONE`我们`gc.anchor=GridBagConstraints.WEST`不想填充内容窗格宽度的那些面板*，*也根据您的评论进行更新，以阻止`JPanel`/在添加更多 s`JFrame`时大于给定的最大宽度`JLabel`这是使用 a 完成的`JScrollPane`：

![在此处输入图像描述](../Images/8900b58cdf744730f49bc3ea91db2447.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.border.LineBorder;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLayout(new GridBagLayout());

        final JPanel labelPanel = new JPanel();
        labelPanel.setBorder(new LineBorder(Color.black));
        for (int i = 0; i < 5; i++) {
            labelPanel.add(new JLabel("Label" + (i + 1)));
        }

        final int maxWidth = 200;
        final JScrollPane jsp = new JScrollPane(labelPanel) {
            @Override
            public Dimension getPreferredSize() {
                //we set the height by checking if we exceeed the wanted ith thus a scrollbar will appear an we must incoprate that or labels wont be shpwn nicely
                return new Dimension(maxWidth, labelPanel.getPreferredSize().width < maxWidth ? (labelPanel.getPreferredSize().height + 5) : ((labelPanel.getPreferredSize().height + getHorizontalScrollBar().getPreferredSize().height) + 5));
            }
        };

        JPanel otherPanel = new JPanel();
        otherPanel.add(new JLabel("label"));
        otherPanel.setBorder(new LineBorder(Color.black));

        JPanel otherPanel2 = new JPanel();
        otherPanel2.add(new JLabel("label 1"));
        otherPanel2.add(new JLabel("label 2"));
        otherPanel2.setBorder(new LineBorder(Color.black));

        GridBagConstraints gc = new GridBagConstraints();

        gc.fill = GridBagConstraints.BOTH;
        gc.weightx = 1.0;
        gc.weighty = 1.0;
        gc.gridx = 0;
        gc.gridy = 0;
        frame.add(jsp, gc);

        gc.fill = GridBagConstraints.NONE;
        gc.anchor = GridBagConstraints.WEST;
        gc.gridy = 1;
        frame.add(otherPanel, gc);
        gc.anchor = GridBagConstraints.WEST;
        gc.gridy = 2;
        frame.add(otherPanel2, gc);

        frame.pack();
        frame.setVisible(true);
        frame.revalidate();
        frame.repaint();
    }

    public static void main(String[] args) {
        //Create Swing components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:14:45.360

我有使用`BorderLayout`和`FlowLayout`管理布局。框架有两个`JPanel's`，一个`JPanel`里面还有两个`JPanel's`。所有内部面板都`FlowLayout`用于对齐`JLabels`. 将这些面板排列在`JFrame`我用过的`BorderLayout`.

![布局管理器](../Images/d9c3f6d598fd3c8b86048550a9e62559.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.border.LineBorder;

public class LayoutTest {

    public LayoutTest() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLayout(new GridBagLayout());

        JPanel motherPanel = new JPanel(new BorderLayout());

        JPanel topPanel = new JPanel(new BorderLayout());
        JPanel bottomPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));

        motherPanel.add(topPanel, BorderLayout.NORTH);
        motherPanel.add(bottomPanel, BorderLayout.CENTER);

        JPanel topUpperPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        JPanel topBottomPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));

        topUpperPanel.setBorder(new LineBorder(Color.BLACK));
        topBottomPanel.setBorder(new LineBorder(Color.BLACK));
        bottomPanel.setBorder(new LineBorder(Color.BLACK));

        topPanel.add(topUpperPanel, BorderLayout.PAGE_START);
        topPanel.add(topBottomPanel, BorderLayout.CENTER);

        for(int i = 0; i < 3; i++) {
            JLabel label = new JLabel("Label-" + String.valueOf(i));
            label.setBorder(new LineBorder(Color.BLACK));
            topUpperPanel.add(label);
        }

        for(int i = 0; i < 2; i++) {
            JLabel label = new JLabel("Label-" + String.valueOf(i));
            label.setBorder(new LineBorder(Color.BLACK));
            topBottomPanel.add(label);
        }

        for(int i = 0; i < 5; i++) {
            JLabel label = new JLabel("Label-" + String.valueOf(i));
            label.setBorder(new LineBorder(Color.BLACK));
            bottomPanel.add(label);
        }

        frame.add(motherPanel);
        frame.setTitle("Layout Manager");
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new LayoutTest();
            }
        });
    }
} 
```

**PS：**我建议您将面板分开，以便“不会干扰剩余的 JPanel”。

# performance - 使用聚集索引扫描而不是查找的查询

> ID：14610158
> 
> 赞同：2
> 
> 时间：2013-01-30T17:33:18.837
> 
> 标签：performance, sql-server-2008, indexing

我有以下查询返回 < 300 个结果。目前完成大约需要 4 秒，当我查看执行计划时，它显示它在聚集索引扫描上花费了 41% 的资源。我对数据库管理的有限了解表明，聚集索引查找会提高性能。如何让查询使用聚集索引查找而不是聚集索引扫描？以下是相关信息和查询。

*   Sql Server 2008 R2
*   表 PMDME 大约 140,000 行（这是占用 41% 资源的行）
*   服务器硬件：16 核 2.7gz 处理器，48gb 内存

```
    声明@开始日期，@结束日期
    SET @start = '2013-01-01'
    SET @end = CAST(GETDATE() 作为日期)
    选择
        b.总计，    
        c.摄入量，
        d.船舶，
        a.CODE_,
        RTRIM(a.NAME_) 作为名称，
        f. 雇员作为销售员，
        g.referral_type_id,
        h.referral_type,
        e.slscode,
        一座城市，
        一个状态_，
        一个.zip
    来自 PAWARE.ADS.RFDME
    左外连接 (
        SELECT SUM(b.quantity) total, a.ref_id from event.dbo.sample a
        在 a.id = b.sample_id 上加入 event.dbo.sample_parts b
        在 b.part_id = c.CODE_ 上加入 PAWARE.ADS.PTDME c
        其中 c.MEDICAREID = 'E0607' AND a.order_date 在 @start 和 @end 之间
        按 a.ref_id 分组
    )b 上 a.CODE_ = b.ref_id
    左外连接 (
        选择 COUNT(a.CODE_) 作为摄入量，rfcode
        来自 PAWARE.ADS.PMDME
        @start 和 @end 之间的 a.REGDATETIME
        GROUP BY a.RFCODE
    ) c on a.CODE_ = c.rfcode
    左外连接 (
        选择
        COUNT(a.CODE) 作为船舶，b.rfcode
        从
        (
            选择
            A.帐户代码，
            MIN(CAST(A.BILLDATETIME AS DATE)) AS SHIPDATE

            来自 PACWARE.ADS.ARODME A
            在 A.PTCODE=B.CODE_ 上左外连接 PACWARE.ADS.PTDME B
            左外连接 event.dbo.newdate() D ON A.ACCOUNT=D.ACCOUNT
            左外连接 event.dbo.newdate_extras() D2 ON A.ACCOUNT=D2.ACCOUNT
            A.BILLDATETIME>=@start
            AND A.BILLDATETIME=@start AND D.NEWDATE=@start AND D2.NEWDATE'ID'
            通过...分组
            A.帐户，
            B.医疗保险，
            A.类别
        ） 一种
        在 a.CODE = b.CODE_ 上加入 PAWARE.ADS.PMDME b
        按 b.RFCODE 分组
    ) d on a.CODE_ = d.rfcode
    左外连接 event.dbo.employee_slscode e on a.SLSCODE = e.slscode
    在 e.employee_id = f.id 上加入 event.dbo.employee f
    在 a.CODE_ = g.CODE_ 上加入 event.dbo.referral_data g
    在 g.referral_type_id = h.id 上加入 event.dbo.referral_type h
    总计 > 0

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:44:36.643

`REGDATETIME`我会尝试首先为表中的列创建索引`PACWARE.ADS.PMDME`。

```
GO
CREATE NONCLUSTERED INDEX [IX_PMDME_REGDATETIME] ON PACWARE.ADS.PMDME
(
    [REGDATETIME] ASC
)
GO 
```

测试它是如何工作的。[如果列的选择性](http://www.akadia.com/services/ora_index_selectivity.html)足够好，我还将测试向列`RFCODE`（同一个表）添加另一个索引。

# c# - 使用滚动条会中断控制台应用程序

> ID：14610162
> 
> 赞同：1
> 
> 时间：2013-01-30T17:33:31.787
> 
> 标签：c#, console, scroll, scrollbar, console-application

目前，当我在我的 c# 控制台应用程序上使用滚动条时，它似乎会**暂停/中断**应用程序，直到我“放开”滚动条。

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:07:02.040

这是我刚刚引用的一篇旧帖子，它解释了在 cmd 提示符中使用滚动条时的暂停：

“从技术上讲，当您按住滚动条时，只会暂停显示输出：控制台子系统会暂时停止从输出缓冲区读取并显示它。但是，该进程仍在运行，并且所述输出缓冲区很快就会填满，这使得所有进一步的写入（ ) 的“阻塞”，只要缓冲区已满。这就是使进程看起来暂停的原因。

（请注意，有两个不同的组件——控制台窗口和在其中运行的程序。“命令提示符”只是 cmd.exe 命令解释器，但带有滚动条的窗口由 CSRSS 显示。”

这是帖子的链接：[https ://superuser.com/questions/344262/windows-command-prompt-pause-during-mousedown](https://superuser.com/questions/344262/windows-command-prompt-pause-during-mousedown)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:36:50.187

您需要在另一个线程中运行长时间运行的代码，然后在需要时写入控制台 - 请参阅这篇文章：[在控制台应用程序中使用 .NET BackgroundWorker 类](https://stackoverflow.com/questions/2196204/using-net-backgroundworker-class-in-console-app)

# c - 除法 alg C 得到浮点数

> ID：14610165
> 
> 赞同：1
> 
> 时间：2013-01-30T17:33:35.793
> 
> 标签：c, algorithm, division

嗨，我得到了这个除法算法来显示整数和浮点值。如何获得 MAX_REM？它应该是我们的字符将被存储的缓冲区的大小，所以大小必须是数字的#，但我不知道如何得到它。谢谢！

```
void divisionAlg(unsigned int value)
{

    int MAX_BASE=10;
    const char *charTable = {"0123456789ABCDEF"};  // lookup table for converting remainders
    char rembuf[MAX_REM + 1];   // holds remainder(s) and provision null at the end
    int  index;                 // 
    int  i;                     // loop variable

    unsigned int rem;           // remainder
    unsigned int base;          // we'll be using base 10 
    ssize_t numWritten;         // holds number of bytes written from write() system call

    base = 10;

    // validate base
    if (base < 2 || base > MAX_BASE)
        err_sys("oops, the base is wrong");

    // For some reason, every time this method is called after the initial call, rembuf
    // is magically filled with a bunch of garbage; this just sets everything to null.
    // NOTE: memset() wasn't working either, so I have to use a stupid for-loop
    for (i=0; i<MAX_REM; i++)
        rembuf[i] = '\0';

    rembuf[MAX_REM] = 0;    // set last element to zero
    index = MAX_REM;        // start at the end of rembuf when adding in the remainders

    do
    {
        // calculate remainder and divide valueBuff by the base
        rem = value % base;
        value /= base;

        // convert remainder into ASCII value via lookup table and store in buffer
        index--;
        rembuf[index] = charTable[rem];

    } while (value != 0);

    // display value
    if ((numWritten = write(STDOUT_FILENO, rembuf, MAX_REM + 1)) == -1)
        err_sys("something went wrong with the write");

} // end of divisionAlg() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:41:02.150

计算一个数字需要多少位数的计算方法是：

```
digits = floor(log(number)/log(base))+1; 
```

但是，在这种情况下，我可能只是假设最坏的情况，因为它不超过 32，并且计算它会“昂贵”。所以只需`#define MAX_REM 32`, 然后跟踪你实际输入的数字`rembuf`（你已经有了`index`，所以它真的没有额外的成本）。您显然还需要计算要写出的字节数，但不需要任何特殊的数学运算。

# jquery - IE 7 中的 Jquery 下拉列表兼容性

> ID：14610169
> 
> 赞同：2
> 
> 时间：2013-01-30T17:33:44.343
> 
> 标签：jquery, css, drop-down-menu, cross-browser

这是我遇到问题的链接

无法在 Internet Explorer IE7 中正确加载，但在 IE 9.0 中运行良好，![在此处输入图像描述][2]

我做错了什么，任何人都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:36:32.067

IE6-8 不支持该`nav`元素（用于导航）。这会导致您的样式无法应用于与该元素关联的`nav`元素。

为了添加对这些元素的支持，您需要下载并插入 html5shiv！

你在哪里插入 html5shiv？在调用样式表之前插入它。

在此处下载 html5shiv：[http ://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

**在您的代码第 4-6 行：**

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Homepage</title>
<script type="text/javascript" src="path/to/html5shiv.js"></script>
<link href="css/styles.css" rel="stylesheet" type="text/css" /> 
```

注意：IE6-8 不支持任何 HTML5 元素，例如`nav`, `header`, `article`, `aside`, `footer`,`figure`等。

# c# - 检查 iFrame 是否由允许的域托管

> ID：14610171
> 
> 赞同：3
> 
> 时间：2013-01-30T17:33:54.527
> 
> 标签：c#, javascript, html, http

我正在开发一个 iframe，用于我们的许多合作伙伴网站。

有什么办法可以确保它只能在这些网站上使用，而不能被其他任何人使用

我打算在网站的 URL 中添加一个强制查询字符串。每个合作伙伴在 quesrystring 中都有不同的值，dnd 使用它来查找允许的域

但是，有没有办法知道托管 iframe 的站点的顶级域？

大概这不是在 iFrame 的 http 请求中发送的？还是，我看不到？

还是您需要从 javascript 发送域？

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:44:10.783

> 但是，有没有办法知道托管 iframe 的站点的顶级域？

没有什么可靠的。

> 大概这不是在 iFrame 的 http 请求中发送的？还是，我看不到？

它*可能*会在referer中发送

> 还是您需要从 javascript 发送域？

如果您想从框架页面中获取它，您将被同源策略阻止。

如果您想从框架页面发送它，您将把它放在查询字符串中并且您不能信任它，因为它可以设置为编写框架页面的人喜欢的任何内容。

还有[X-Frame-Options 标头](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)（但浏览器支持有限）。

我能想到的最可靠的解决方案是：

1.  要求在用于加载框架的查询字符串中指定原点
2.  检查推荐人。如果它与您的白名单不匹配*并且不为空白*，则重定向到空白页面，除了指向您网站的链接`target="_top"`和一些 JavaScript`top.location = "your site"`
3.  检查查询字符串中指定的来源是否在您的白名单中，如果它的行为方式与被拒绝的步骤 2 不同
4.  输出`X-Frame-Options`将框架限制到指定原点的标题

这可能会捕获足够多的浏览器来阻止框架站点构建您的站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:38:23.073

您可以尝试检查普通浏览器将为页面上的 IFrame 请求发送的引荐来源网址。

[您也可以使用（如何阻止 Iframe 调用](https://stackoverflow.com/questions/5881139/how-to-block-iframe-call)和[MDN](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options?redirectlocale=en-US&redirectslug=The_X-FRAME-OPTIONS_response_header) ）中介绍的“x-frame-options”标头，但并非每个浏览器都会尊重这一点（另一方面，*如果*浏览器支持它会更可靠）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:47:39.160

iframe 的 sanbox 属性可能有助于控制 iframe 中的各种安全方面，包括来源
[http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/](http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T13:19:00.257

2007 年的 Architecture Journal 有一篇很好的文章：[Secure Cross-Domain Communication in the Browser](http://msdn.microsoft.com/en-us/library/bb735305.aspx)

基本上这篇文章的建议是：如果您在域 1 上的页面 A 与域 2 上的页面 B 作为其源的 iframe，那么在页面 B 上的 iframe 到域 1 上的页面 C 将允许您跨域传递信息 ![在此处输入图像描述](../Images/1a8bdce80d433a56d4c4ccd884ac7aeb.png)

我还没有测试过，但这听起来它可以工作。

另一种可能性是创建一个具有特殊文件名（例如域 2 上页面 B 的 URL 的哈希）和基本扩展名（如 .htm）的文件，并将其放在域 1 的根目录中。检查该文件是否存在于域中然而，1 无法通过 javascript 完成，因此应该使用服务器端代码完成。

# cobol - Cobol 与 C 的接口

> ID：14610177
> 
> 赞同：2
> 
> 时间：2013-01-30T17:34:02.980
> 
> 标签：cobol, gnucobol

所以，我正在使用 C 和 OpenCobol，并且，我想知道是否有办法获得内部 cobol 源的价值......

例如（基于此链接的示例）： [http ://www.opencobol.org/modules/bwiki/index.php?cmd=read&page=UserManual%2F2_3](http://www.opencobol.org/modules/bwiki/index.php?cmd=read&page=UserManual%2F2_3)

```
---- say.cob ---------------------------
      IDENTIFICATION DIVISION.
      PROGRAM-ID. say.

      ENVIRONMENT DIVISION.
      DATA DIVISION.

      WORKING-STORAGE SECTION.
      01 TESTE PIC 9(9) VALUE ZEROS.

      LINKAGE SECTION.
      01 HELLO PIC X(6).
      01 WORLD PIC X(6).

      PROCEDURE DIVISION USING HELLO WORLD.
          MOVE 456 TO TESTE.
          DISPLAY TESTE.
          DISPLAY HELLO WORLD.

         *> RETURN TESTE. ??????

          EXIT PROGRAM.
---------------------------------------- 
```

而且，我使用的 C 代码是：

- - 你好ç - - - - - - - - - - - - - -

```
#include <stdio.h>
#include <libcob.h>

extern int say(char *hello, char *world);

int
main()
{
  int ret;
  char hello[6] = "Hello ";
  char world[6] = "World!";

  cob_init(0, NULL);

  ret = say(hello, world); // return the 000000456 ?????????? 
  // How to make this :(

  return ret;
}
---------------------------------------- 
```

或者，有一个获取 cobol 变量的方法，如下所示：

```
// ... code ...
int value = cob_getvar(TESTE);
// ... code ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:28:42.383

查看[OpenCOBOL 程序员指南](http://opencobol.add1tocobol.com/OpenCOBOL%20Programmers%20Guide.pdf)的第 7-7 页。对于要传回 C 程序的数据，添加另一个参数并通过引用将其传递给 COBOL 程序。声明你`TESTE`的二进制文件以匹配 C 声明。`RETURN-CODE`如果您愿意，也可以传回自动定义的。所以你的 COBOL 会是这样的：

```
 DATA DIVISION.
  LINKAGE SECTION.
  01 HELLO PIC X(6).
  01 WORLD PIC X(6).
  01 TESTE PIC S9(9) USAGE BINARY-LONG.
  PROCEDURE DIVISION USING 
      BY VALUE HELLO
      BY VALUE WORLD
      BY REFERENCE TESTE.
  0000-MAIN-ROUTINE.
      MOVE 456 TO TESTE
      MOVE 1 TO RETURN-CODE
      GOBACK. 
```

在你的调用程序中：

```
int teste;
int returnCode;
char hello[6] = "Hello ";
char world[6] = "World!";

cob_init(0, NULL);
returnCode = say(hello, world, &teste); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:03:42.710

亚历山大;

OpenCOBOL 2.0 将具有 FUNCTION-ID 允许诸如

```
MOVE FUNCTION nextbigthing(args) TO cobol-working-store 
```

但是，在它发布之前，我们“仅限于”CALL、ENTRY、PROGRAM-ID 等。

有关一些低级函数指针相关事物的示例，请查看

[http://opencobol.add1tocobol.com/#what-stock-call-library-does-opencobol-offer](http://opencobol.add1tocobol.com/#what-stock-call-library-does-opencobol-offer)

其中包括用于设置错误处理程序和退出程序的片段。用眼睛扫描它

*   程序指针
*   入口
*   将 proc-ptr 设置为条目“链接名称”
*   呼叫...使用...返回

需要注意的是，这是一种方法。还有其他的。PROGRAM-ID 子程序等的 ENTRY 行可以是完整的。OpenCOBOL FAQ 的第 5 节充斥着从其他语言和链接库来回传递数据的例程。

另外，查看 libcob/common.h 中的 cob_field。CALL 生成的 C 代码设置参数的 COBOL 字段数组以及实际调用帧，并且可以通过 cob_module 从 C 函数访问这些 COBOL 字段结构。

**errorproc.cob**

```
 >>SOURCE FORMAT IS FIXED
  *****************************************************************
  * OpenCOBOL demonstration
  * Author:  Brian Tiffin
  * Date:    26-Jun-2008
  * History:
  *     03-Jul-2008
  *     Updated to compile warning free according to standards
  * Purpose:
  *     CBL_ERROR_PROC and CBL_EXIT_PROC call example
  *     CBL_ERROR_PROC installs or removes run-time error procedures
  *     CBL_EXIT_PROC installs or removes exit handlers
  *     Also demonstrates the difference between Run time errors
  *     and raised exceptions.  Divide by zero raises an
  *     exception, it does not cause a run time error.
  * NB:
  *     Please be advised that this example uses the functional but
  *     now obsolete ENTRY verb.  Compiling with -Wall will display
  *     a warning.  No warning will occur using -std=MF
  * Tectonics: cobc -x errorproc.cob
   identification division.
   program-id. error_exit_proc.

   data division.
   working-storage section.
  * entry point handlers are procedure addresses
   01  install-address   usage is procedure-pointer.
   01  install-flag      pic 9 comp-x value 0.
   01  status-code       pic s9(9) comp-5.

  * exit handler address and priority (prio is IGNORED with OC1.1)
   01  install-params.
       02 exit-addr      usage is procedure-pointer.
       02 handler-prio   pic 999 comp-x.

  * indexing variable for back scannning error message strings
   01  ind               pic s9(9) comp-5.

  * work variable to demonstrate raising exception, not RTE
   01  val               pic 9.

  * mocked up error procedure reentrancy control, global level
   01  once              pic 9 value 0.
       88 been-here            value 1.

  * mocked up non-reentrant value
   01  global-value      pic 99 value 99.

  * LOCAL-STORAGE SECTION comes into play for ERROR_PROCs that
  *   may themselves cause run-time errors, handling reentry.
   local-storage section.
   01  reenter-value     pic 99 value 11.

  * Linkage section for the error message argument passed to proc
  * By definition, error messages are 325 alphanumeric
   linkage section.
   01  err-msg           pic x(325).

  * example of OpenCOBOL error and exit procedures
   procedure division.

  * Demonstrate problem installing procedure
  * get address of WRONG handler.  NOTE: Invalid address
   set exit-addr to entry "nogo-proc".

  * flag: 0 to install, 1 to remove
   call "CBL_EXIT_PROC" using install-flag
                              install-params
                        returning status-code
   end-call.
  * status-code 0 on success, in this case expect error.
   if status-code not = 0
       display
           "Intentional problem installing EXIT PROC"
           ", Status: " status-code
       end-display
   end-if.

  * Demonstrate install of an exit handler
  * get address of exit handler
   set exit-addr to entry "exit-proc".

  * flag: 0 to install, 1 to remove
   call "CBL_EXIT_PROC" using install-flag
                              install-params
                        returning status-code
   end-call.
  * status-code 0 on success.
   if status-code not = 0
       display
           "Problem installing EXIT PROC"
           ", Status: " status-code
       end-display
       stop run
   end-if.

  * Demonstrate installation of an error procedure
  * get the procedure entry address
   set install-address to entry "err-proc".

  * install error procedure. install-flag 0 installs, 1 removes
   call "CBL_ERROR_PROC" using install-flag
                               install-address
                         returning status-code
   end-call.
  * status-code is 0 on success.
   if status-code not = 0
       display "Error installing ERROR PROC" end-display
       stop run
   end-if.

  * example of error that raises exception, not a run-time error
   divide 10 by 0 giving val end-divide.
  * val will be a junk value, use at own risk

   divide 10 by 0 giving val
       on size error display "DIVIDE BY ZERO Exception" end-display
   end-divide.

  * intentional run-time error
   call "erroneous" end-call.           *> ** Intentional error **

  * won't get here.  RTS error handler will stop run
   display
       "procedure division, following run-time error"
   end-display.
   display
       "global-value: " global-value
       ", reenter-value: " reenter-value
   end-display.

   exit program.
  *****************************************************************

  *****************************************************************
  * Programmer controlled Exit Procedure:
   entry "exit-proc".

   display
       "**Custom EXIT HANDLER (will pause 3 and 0.5 seconds)**"
   end-display.

  * sleep for 3 seconds
   call "C$SLEEP" using "3" end-call.
  * demonstrate nanosleep; argument in billionth's of seconds
  *   Note: also demonstrates OpenCOBOL's compile time
  *         string catenation using ampersand;
  *         500 million being one half second
   call "CBL_OC_NANOSLEEP" using "500" & "000000" end-call.

   exit program.

  *****************************************************************
  * Programmer controlled Error Procedure:
   entry "err-proc" using err-msg.

   display "**ENTER error procedure**" end-display.

  * These lines are to demonstrate local and working storage
   display
       "global-value: " global-value
       ", reenter-value: " reenter-value
   end-display.
  * As reenter-value is local-storage
  *  the 77 will NOT display on rentry, while the global 66 will
   move 66 to global-value.
   move 77 to reenter-value.

  * Process err-msg.
  * Determine Length of error message, looking for null terminator
   perform varying ind from 1 by 1
       until (err-msg(ind:1) = x"00") or (ind = length of err-msg)
           continue
   end-perform.
   display err-msg(1:ind) end-display.

  * demonstrate trapping an error caused in error-proc
   if not been-here then
       set been-here to true
       display "Cause error while inside error-proc" end-display
       call "very-erroneous" end-call        *> Intentional error
   end-if.

  * In OpenCOBOL 1.1, the return-code is local and does
  *   not influence further error handlers
  *move 1 to return-code.
   move 0 to return-code.

   display "**error procedure EXIT**" end-display.

   exit program. 
```

# javascript - 如何使用 jquery 在 $.Ajax() Success 上创建 DOM 元素？

> ID：14610180
> 
> 赞同：1
> 
> 时间：2013-01-30T17:34:09.193
> 
> 标签：javascript, jquery, ajax

我正在创建一个动态列表`checkbox`on `$.ajax`：

```
 function load() {
        $.ajax({
            type: "POST",
            url: "*************",
            data: "************",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            error: function (x, e) { alert(e.responseText); },
            success: function (objTrendList) {
                $.each(objTrendList, function (index, value) {
                    // append the checkbox panels to tool div 
            $('#tools').append('<input type="checkbox" id="checkbox_' +
            value.LngTrendID + '" checked="checked" value="0" />&nbsp;<div 
            style="display:inline;">' + value.StrTrendName + '</div><br />');

                });
             } 
        });
    }
    $(document).ready(function () {
        load();
        console.log($('#tools :checkbox')); // i know I don't get any thing here 
        because the this line is called before the ajax function 

    }); 
```

我知道我对 console.log 行没有任何了解，因为该行是在 ajax 函数之前调用的

*问题*我如何先加载ajax函数我虽然当我这样做时`$(document).ready()`它会最后运行谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:36:23.523

返回 ajax 调用并使用 $.ajax 中已经内置的延迟对象：

```
function load() {
    return $.ajax({
        type: "POST",
        url: "*************",
        data: "************",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        error: function (x, e) { alert(e.responseText); },
        success: function (objTrendList) {
            $.each(objTrendList, function (index, value) {
                // append the checkbox panels to tool div 
        $('#tools').append('<input type="checkbox" id="checkbox_' +
        value.LngTrendID + '" checked="checked" value="0" />&nbsp;<div 
        style="display:inline;">' + value.StrTrendName + '</div><br />');

            });
         } 
    });
}
$(document).ready(function () {
    load().done(function() {
        console.log($('#tools :checkbox')); // i know I don't get any thing here 
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:55:02.070

日志中没有任何内容的原因是 $.ajax 是异步的（AJAX 中的第一个“A”代表“异步”）。这意味着当您调用`load()`函数时，它会触发`$.ajax`调用，但不会等待`$.ajax`调用在返回之前`load()`返回（这就是为什么您必须指定 a`success`和`error`函数以便它知道在实际返回时要做什么）。

我们可以查看您的代码如何执行的时间表：

1.  加载（）
    1.  $.ajax()
    2.  返回（空）
2.  控制台.log()
3.  （一段时间后）成功（）

`$.ajax()`返回一种对象类型，该对象知道它何时从调用中返回。因此，您可以调用`.done()`对象并在该函数中执行代码，该代码将等到`success()`运行后。

因此，如果您`$.ajax`回电，您将能够`.done()`使用新添加的输入进行呼叫和操作。

```
function load() {
    return $.ajax({...});
}

$(document).ready(function () {
    load().done(function(){
        console.log($('#tools :checkbox'));
    });
}); 
```

# c - 何时将值隐式转换为指针？

> ID：14610182
> 
> 赞同：0
> 
> 时间：2013-01-30T17:34:12.657
> 
> 标签：c, arguments, c99, argument-passing

我有很多功能，例如：

```
void write(char* param, int len)
{
    //
} 
```

而且我注意到我几乎从不使用`&`运算符作为参数。当我传递一个数组时：

```
char in[20];
write(in, 20); 
```

我不需要它，但是当我传递一个值时：

```
write(5, 1); 
```

我似乎不需要它，当我传递一个指针时：

```
char* in = malloc(20);
write(in, 20); 
```

我也不需要。那么在哪些情况下我实际上需要调用：

```
write(&in, 1); 
```

因为我很困惑 :D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:38:10.557

你确定你的第二个案例？它不适合我，应该是

```
char in = 5;
write(&in, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:40:08.217

> 何时将值隐式转换为指针？

实际上，整数类型可以由编译器隐式转换为指针。理论上，这是非法的，接受它的编译器通常会发出警告：

```
example.c:2:6: warning: incompatible integer to pointer conversion initializing
               'void *' with an expression of type 'int' 
```

在你上面的例子中：

```
char in = 5;
write(in, 20); 
```

`char`是一个整数类型，所以如果你的编译器允许它，它*可能会*被隐式转换为指针类型，尽管它不是 C 标准的一部分并且完全是编译器特定的。

请注意，标准允许使用强制转换将整数类型转换为指针类型，尽管结果是实现定义的：

```
char in = 5;
write((char *)in, 20); 
```

唯一允许的隐式转换情况是表示空指针的整数常量`0`：

```
write(0, 20);    // allowed 
```

请注意，整数常量本身是允许的，但具有值的整数类型的变量`0`则不允许：

```
char in = 0;
write(in, 20);   // not allowed 
```

* * *

至于其他人，当你传递一个指针时，你显然不需要`&`，因为它已经是一个指针。[当您传递一个数组时，它会衰减为一个指针](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c/4810668#4810668)，因此您也不需要`&`那里。在这两种情况下，使用它实际上是非法的，因为您上面的函数期望 a`char *`并分别使用 a`char **`和 a `char (*)[20]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:46:40.620

如果您以某种方式将函数“write”的原型复制到调用此函数的文件中，如下所示。

```
void write(char *in, int len);

void foo(int bar){
   char in=5;
   write(in, 1);
} 
```

您可能会收到警告。因为 in 不是指针，虽然 5 可以是地址。我猜如果你的程序编译和链接成功，它会在运行时崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T18:24:11.247

与使用； `return_type function_name(prim_data_type* param...)` param 是一个指针，它指向内存中的一个地址，并且`*param`是该地址中的值。答案是关于你想用这个做什么`param`。

```
char in[20]; 
```

说“ **in** ”是第一个元素的地址。所以在函数调用中：

```
write(in, 20); 
```

您正在发送第一个元素的地址，因此在函数实现中，您可以通过 访问第一个元素`*param`，使用`*(param+1)`or`param[1]`等​​访问第二个元素。您感到困惑的地方在这里：

```
char in = 5;
write(in, 1); 
```

因为**in**是地址 5 (00000005)，所以在函数的实现中，您正在访问那个地方，无论那里有什么值。你必须小心使用这样的。

在 malloc 操作中：

```
char* in = malloc(20);
write(in, 20); 
```

**`in`**是一个指向地址（第一个元素的地址）的指针，它可以容纳 20 个 char 元素，可以占用空间。在函数中，您可以使用参数指针访问所有元素（`*param`是第一个元素，`*(param+7)`或者`param[7]`是第 8 个元素）

总之，当您想在另一个函数中使用主要数据类型变量（int、float、char..）时，您必须使用；

```
write(&in); 
```

通过这样做，在该**write**函数的实现中，您可以访问该变量，更改值，`*param`而不会造成混淆。

注意：为了更好地理解，这里简化了一些解释。这里欢迎额外的警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T17:38:05.937

在某些情况下，函数和数组会衰减为指针。函数可以衰减为指向函数的指针，数组可以衰减为指向数组第一个元素的指针。没有其他类型以这种方式运行。

这个例子：

```
char in = 5; 
write(in, 1); 
```

虽然是错的。在这种情况下，您绝对需要`&`。你确定它是这样工作的吗？

# sql - 使用多个数据源的 Sharepoint 2010 Enterprise (PerformancePoint) KPI

> ID：14610183
> 
> 赞同：2
> 
> 时间：2013-01-30T17:34:18.970
> 
> 标签：sql, excel, sharepoint-2010, ssas, performancepoint

使用多个数据源的 Sharepoint 2010 Enterprise (PerformancePoint) KPI

我正在尝试创建一个使用多个数据源的 KPI，其中“实际”数据来自分析服务多维数据集，“目标”数据来自共享点列表或 Excel 服务数据源。

设置非常简单，添加多个数据源等。问题在于试图让两个数据源正确应用维度或时间过滤器。

基本上，如果我的 Excel Services 数据列源如下所示：

| 日期 | 面积 | 目标 |

指定目标数据源时发生的所有事情就是将整个列表汇总并放在每个单元格中。因此，如果记分卡在行上显示区域（维度），在列上显示日期，无论我的目标总和（日期和区域的总和）被列为每一行（和每个日期）的目标。

在我看来，实际 KPI 部分（和记分卡）中指定的维度并未映射到其他数据源。

我想知道我正在尝试做的事情可能吗？这似乎是一个好主意——结果是管理层将拥有一个非常简单的电子表格，他们可以通过共享点访问、修改目标、然后保存并在所有相关 KPI 中进行更新。

常见的解决方案是什么？是否必须将目标数据放入同一个 AS 多维数据集中？

# c++ - 如何避免使用 Boost 库删除 remove_all 上的目录？

> ID：14610185
> 
> 赞同：18
> 
> 时间：2013-01-30T17:34:27.517
> 
> 标签：c++, boost, boost-filesystem

我正在使用 boost::filesystem::remove_all 操作来删除目录的内容。

它正确地删除了内容，但是，正如 Boost Filesystem Documentation 所述，它也删除了目录本身。

尽管目录是空的，但是否有一种简单的方法可以保留目录？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T22:53:15.300

我认为最好的方法是在文件夹内迭代并为每个元素执行 remove_all 。示例代码：

```
 namespace fs=boost::filesystem;
  fs::path path_to_remove("C:\\DirectoryToRemove");
  for (fs::directory_iterator end_dir_it, it(path_to_remove); it!=end_dir_it; ++it) {
    fs::remove_all(it->path());
  } 
```

# php - 非法字符串偏移，Print_R 显示正确的值？

> ID：14610187
> 
> 赞同：0
> 
> 时间：2013-01-30T17:34:35.047
> 
> 标签：php, database, warnings

我收到这些错误：

`Warning: Illegal string offset 'approved' in C:... on line 137`

`Warning: Illegal string offset 'approved' in C:... on line 147`

但是，我用 print_r() 检查我可以调用哪些值并得到这个：

```
Array (
    [0] => 3
    [id] => 3
    [1] => 3
    [user_fk] => 3
    [2] => > Jailbot 2.0
    [title] => > Jailbot 2.0
    [3] => 1
    [approved] => 1
) 
```

那为什么不让我打电话批准？

PHP：

```
$avatarQuery = "SELECT * FROM avatars WHERE user_fk = {$id} LIMIT 1";
$avatarSet = mysql_query($avatarQuery, $connection);
confirm_query($avatarSet);
$count = mysql_num_rows($avatarSet);
if($count == 1){
    $avatar = mysql_fetch_array($avatarSet);
    $avatar = $avatar['picture'];
    $avatarApproved = $avatar['approved'];
}else{
    $avatar = "images/noImage.png";
}
$titleQuery = "SELECT * FROM titles WHERE user_fk = {$id} LIMIT 1";
$titleSet = mysql_query($titleQuery, $connection);
confirm_query($titleSet);
$title = mysql_fetch_array($titleSet);
$title = $title['title'];
$titleApproved = $title['approved']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:37:43.197

```
$avatar = $avatar['picture'];
$avatarApproved = $avatar['approved']; 
```

第一行用$avatar['picture']的值覆盖了$avatar，所以执行第二行时$avatar不再是一个数组；并且您在后续查询结果中对 $title 执行相同操作

# asp.net-mvc - MVC4中域名的URL重写

> ID：14610190
> 
> 赞同：2
> 
> 时间：2013-01-30T17:34:49.553
> 
> 标签：asp.net-mvc, url-rewriting, dns, seo

我会将 site1.com\site2 重定向到 site2.com ，我正在使用 asp.net 和 MVC4，我无法通过更改 web.config 文件来做到这一点，有什么解决方案吗？我不喜欢搜索引擎将此永久重定向（状态 302）或（状态 301）并从其数据库中删除 site2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:41:00.837

将路由“site2”映射到您的控制器之一的操作。

该路由的操作响应应该是：

```
return RedirectPermanent("http://www.site2.com"); 
```

# vb6 - 如何在编辑框更新时收到通知

> ID：14610191
> 
> 赞同：2
> 
> 时间：2013-01-30T17:34:49.640
> 
> 标签：vb6, event-handling

在 VB6 项目中，我希望在更新编辑控件（文本字段）时收到通知（即：用户已将字符串添加到文本字段中）。

我没有找到任何关于可以为编辑 MFC 控件捕获的不同事件的文档。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:48:27.773

它的[`_Change`事件](http://msdn.microsoft.com/en-us/library/aa445411%28v=vs.60%29.aspx)。然而，我个人不喜欢这个事件，因为它是出了名的不可靠。

```
Private Sub txtYourTextFieldControl_Change()
    ' some code here
End Sub 
```

*** 编辑 *** 我们在谈论 VB6 文本框，对吗？我不确定 MFC 与此有什么关系。

# java - 为null设置一个常量是否有目的？

> ID：14610196
> 
> 赞同：3
> 
> 时间：2013-01-30T17:35:01.363
> 
> 标签：java, null, constants

我最近在一些代码中看到了一些东西，这让我很好奇它是否真的有某种优化或性能影响。在常量文件中是这样的一行：

```
public static final Object NULL = null; 
```

然后，在整个代码中，不是显式使用`null`关键字，而是使用`Constants.NULL`.

我以前见过这种事情，比如：

```
public static final String EMPTY_STRING = ""; 
```

`""`...如果这是为了避免创建大量重复实例，那似乎至少有点道理。但它真的与 有什么区别`null`吗，因为它实际上不是任何类型的对象？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:41:09.263

两者都没有任何意义。在代码中的多个位置使用`""`不会创建 String 对象的多个实例。除非您显式调用`new String("");`JVM，否则只会创建一个字符串池并引用每个特定字符串的一个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:38:45.177

我不认为`NULL`以这种方式定义和使用只会增加噪音。也许编写该代码的人都有 C++ 背景，并且更喜欢`NULL`over `null`.

第二个例子也是有问题的，因为`""`多次使用不会导致`String`每次使用都创建一个单独的对象。引用[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> 此外，字符串字面量始终指代同一个 class 实例`String`。这是因为字符串文字 - 或者**更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用方法共享唯一实例`String.intern`。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-20T13:43:15.793

使用Object.NULL 是有目的的。

假设您有一堆代码可以验证您的对象是否为空。因此，作为新功能的一部分，您需要在某些空对象的情况下使用默认值。

使用简单的 if obj != null 您无法追踪您的对象验证无效的位置。但是如果您使用 obj != Object.NULL 那么您可以使用您的 IDE/编辑器来帮助您找到这些用法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T18:03:26.847

由于 java 中的字符串池概念，占用的内存没有任何区别，并且在使用 NULL 常量而不是 null 或 EMPTY_STRING 而不是“”时，它会使代码看起来更脏。

它们都是不言自明的，因此不需要为它们创建命名常量。

# haskell - 是否有任何有文化的编程环境支持即时结果？

> ID：14610199
> 
> 赞同：6
> 
> 时间：2013-01-30T17:35:08.017
> 
> 标签：haskell, latex, markdown, literate-programming

我目前正在写很多小报告。其中大多数只是带有一些图表和说明性评论的*价值转储。*

是否有一个有文化的编程环境，让我以简单的格式（最好是 markdown/latex 和 haskell）编写我的报告，然后转换为包含在原始文件中完成的计算结果的某种输出格式（最好是 pdf）？

我知道 Haskell 支持识字编程，但我不认为可以捕获输出（可能还有整个图像）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T18:05:46.743

lhs2TeX[预](http://www.andres-loeh.de/lhs2tex/ "lhs2TeX 主页")处理器支持通过 GHCi 评估 Haskell 表达式。这是一个最小的例子：

```
\documentclass{article}

%include polycode.fmt
%options ghci

\begin{document}

Running

> fmap (+1) [1..10]

yields \eval{fmap (+1) [1..10]}.

\end{document} 
```

这将产生输出，其中包含命令在输入`[2,3,4,5,6,7,8,9,10,11]`中的位置的列表。`\eval`

您可以引用当前文件中的定义。即，该`\eval`函数通过将当前文件加载到`ghci`然后在该上下文中评估表达式来工作。

还有`\perform`which 与 相同`\eval`，但输出不会被视为一段 Haskell 代码，而是一段 LaTeX 代码。因此，您可以编写生成部分输出文档的 Haskell 函数。

话虽如此，在 lhs2TeX 中这个功能还有很多可以改进的地方，而且实现起来相当麻烦。

**编辑：**从评论中得出结论，目标是包含[图表](http://hackage.haskell.org/package/Chart)库生成的图像。这是一个概念证明文档，展示了如何实现这一目标：

```
\documentclass{article}

\usepackage{graphicx}

%include polycode.fmt
%options ghci

%if style == newcode
(Stuff here will not be typeset by LaTeX, but seen by Haskell.)

> import Data.Accessor
> import Graphics.Rendering.Chart
>
> renderAndInclude :: Renderable a -> FilePath -> IO ()
> renderAndInclude r filename = do
>   renderableToPDFFile r 200 200 filename
>   putStrLn $ "\\includegraphics{" ++ filename ++ "}"

%endif

%format ^= = "\mathbin{{}^\wedge\!\!=}"

\begin{document}

The image description

> image :: Renderable ()
> image  =  toRenderable
>        $  layout1_title  ^=  "Test"
>        $  layout1_plots  ^=  [ Left (toPlot plot) ]
>        $  defaultLayout1
>   where
>     plot   =  plot_lines_values ^= [[ (x, sin x) | x <- [0, 0.01 .. 10 :: Double] ]]
>            $  defaultPlotLines

yields the following output:

\perform{renderAndInclude image "image.pdf"}.

\end{document} 
```

您必须编写的中央辅助函数类似于`renderAndInclude`上面的内容，它执行实际渲染，将结果写入文件，并生成一个`\includegraphics`读取文件的 LaTeX 命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:58:15.623

如果您不是绝对必须拥有 Haskell，则可以使用[Sweave](http://www.stat.uni-muenchen.de/~leisch/Sweave/)和[R](http://www.r-project.org/)获得其余部分。您基本上编写了一个带有嵌入式 R 代码的 LaTeX 文档。您可以选择在最终的 PDF 输出中包含代码、结果（包括绘图）或两者。[Knitr](http://yihui.name/knitr/)是 Sweave 的最新扩展（或简化？）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T08:35:52.750

如果您想使用图表而不是图表，那么[本文](http://byorgey.wordpress.com/2012/08/28/creating-documents-with-embedded-diagrams/)中描述的[图表构建器](http://projects.haskell.org/diagrams)是您的朋友。适用于 markdown 和 LaTeX。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T16:29:58.400

很抱歉参加晚会（非常）迟到。答案仅供将来访问此问题的访问者参考。

[Org-mode](http://orgmode.org)确实提供了一个很好的读写编程环境。尽管它本身就是一个宇宙，但它非常值得研究！可以在以下链接中找到有关其处理代码方式的更多信息：

*   [组织模式手册，第 14 章](http://orgmode.org/org.html#Working-With-Source-Code)
*   [Babel：Org 模式下的活动代码](http://orgmode.org/worg/org-contrib/babel/)
*   [R 教程](http://orgmode.org/worg/org-contrib/babel/how-to-use-Org-Babel-for-R.html)

也有对 Haskell 的支持，否则此评论将是多余的。虽然格式不是 Markdown，但 Org-mode 有一种非常简单的标记方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:31:44.227

你可以试试[http://code.google.com/p/nano-lp/](http://code.google.com/p/nano-lp/)，它支持 Markdown/Multimarkdown 和其他轻量级标记（还有 OpenOffice），并且很容易将多个文件包含在一个文件中。例如，使用 OpenOffice，您可以将生成的文件导出为 PDF。还支持 Asciidoc 和 TeX/LaTeX，因此您也可以使用它们来生成 PDF

# html - 我无法从隐藏字段的代码中获取 JSignature 画布数据

> ID：14610206
> 
> 赞同：1
> 
> 时间：2013-01-30T17:35:47.550
> 
> 标签：html, asp.net

我正在使用 jSignature 来捕获用户签名，之后我想将其放入数据库中，我显示了签名面板，当我将数据发送到警报框时，我可以看到它，我也有一个 asp。页面中的net隐藏字段是我正在存储数据，问题是我无法将数据放入我的代码中，因此我可以将其存储在数据库中。

```
<telerik:RadCodeBlock runat="server">

<script src="../Scripts/JSignature/jquery-1.9.0.min.js"></script>
<script src="../Scripts/JSignature/jSignature.min.js"></script>

<script type="text/javascript">

    function SaveCanvasImage() {
        var image = $('#signature').jSignature('getData', 'base30');
        var hdnField = $('#<%= hdnSignature.ClientID %>');
        $('#<%=btnHidden.ClientID %>').click();
        return false;
    }

</script> 

<script>
    function pageLoad() {
        InitSignaturePanel(); //this is a function in a global js file.
    }
</script>  

</telerik:RadCodeBlock>     

<!--[if lt IE 9]>
    <script type="text/javascript" src="../Scripts/JSignature/flashcanvas.js"></script>
    <![endif]-->

<telerik:RadScriptManager runat="server"></telerik:RadScriptManager>
<div class="width400">
  <telerik:RadAjaxPanel runat="server">    <asp:Label runat="server" ID="lblHidden" />
    <asp:HiddenField runat="server" ID="hdnSignature"  />
    <div id="signature" class="trueMargin signaturePanel"></div>
    </telerik:RadAjaxPanel>

    <div class="textAlignCenter">
        <br />
        <input type="button" id="clearCanvas" value="Reset" onclick="$('#signature').jSignature('clear')" />

        <asp:Button  id="btnCaptureCanvas" runat="server" Text="Save and Close" OnClientClick="SaveCanvasImage()"  />
        <asp:Button runat="server" ID="btnHidden"  OnClick="btnHidden_Click" />    

   </div>
 </div> 
```

在我背后的代码中：

```
protected void btnHidden_Click(object sender, EventArgs e)
{
    lblHidden.Text = hdnSignature.Value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:30:07.950

怀疑发生这种情况是因为您实际上没有将签名放入隐藏字段中。

我认为您的意思是：

```
function SaveCanvasImage() {
    var image = $('#signature').jSignature('getData', 'base30');
    var hdnField = $('#<%= hdnSignature.ClientID %>').val('data:' + image.join(',')); // <-- note the addition
    $('#<%=btnHidden.ClientID %>').click(); // <- what is this for by the way? 
    return false;
} 
```

# objective-c - 根据输入的文本调整 UITextField 的大小

> ID：14610211
> 
> 赞同：0
> 
> 时间：2013-01-30T17:36:09.530
> 
> 标签：objective-c

我的 UITextfield 设置为在初始化时仅显示 1 个字符，但是我使用约束使该字段能够根据需要扩展。

我的约束：

```
@"H:[txtField(<=80)]-14-| 
```

当我通过 text 属性设置 textField 时，它会完美调整大小，但是当我尝试通过键盘输入它时，我能得到的最好的方法是在 shouldChangeCharactersInRange 中使用***sizeToFit*** ......哪种有效，但不是美元金额移动在 iphone 上向内向左移动，它向右向外移动并离开屏幕。

我怎样才能让它向内向左移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:39:43.470

我最终使用了我在 StackOverflow 上找到的一点点

***shouldChangeCharactersInRange*** 双倍电流值；

```
NSString *str;

if(![textField.text length]){
    str = @"$ 0.00";
}else{
    str = textField.text;
}

currentValue = [[str substringFromIndex:1] doubleValue];

double cents = round(currentValue * 100.0f);

if ([string length]) {
    for (size_t i = 0; i < [string length]; i++) {
        unichar c = [string characterAtIndex:i];
        if (isnumber(c)) {
            cents *= 10;
            cents += c - '0';
        }
    }
} else {
    // back Space
    cents = floor(cents / 10);
}

textField.text = [NSString stringWithFormat:@"%.2f", cents / 100.0f];

//Add this line
[textField setText:[NSString stringWithFormat:@"$%@",[textField text]]];

return NO; 
```

# php - 无法在 symfony2 控制台命令中保留对象

> ID：14610213
> 
> 赞同：4
> 
> 时间：2013-01-30T17:36:19.570
> 
> 标签：php, symfony, console, doctrine

我制作了一个简单的 symfony2 控制台脚本，它应该将数据从旧模型转换为新模型。这是它的样子：

```
class ConvertScreenshotsCommand extends Command 
{
[...]
protected function execute(InputInterface $input, OutputInterface $output)
{
    $em = $this->getContainer()->get('doctrine')->getManager();

    $output->writeln('<info>Conversion started on ' . date(DATE_RSS) . "</info>");

    $output->writeln('Getting all reviews...');
    $reviews = $em->getRepository('ACCommonBundle:Review')->findAll(); // Putting all Review entities into an array
    $output->writeln('<info>Got ' . count($reviews) . ' reviews.</info>');

    foreach ($reviews as $review) {
        $output->writeln("<info>Screenshots for " . $review->getTitle() . "</info>");
        if ($review->getLegacyScreenshots()) {
            foreach ($review->getLegacyScreenshots() as $filename) { // fn returns array of strings
                $output->writeln("Found " . $filename);
                $screenshot = new ReviewScreenshot();        // new object

                $screenshot->setReview($review);     // review is object
                $screenshot->setFilename($filename); // filename is string

                $em->persist($screenshot);
                $em->flush();                        // this is where it dies
                $output->writeln("Successfully added to the database.");
            }
        } else $output->writeln("No legacy screenshots found.");
    }
    $output->writeln('<info>Conversion ended on ' . date(DATE_RSS) . "</info>");
 }
 } 
```

脚本在 $em->flush() 上中断，出现以下错误：

```
 [ErrorException]                                                                                                                                                       
 Warning: spl_object_hash() expects parameter 1 to be object, string given in      
 /[...]/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php line 1324 
```

显然我做错了什么，但无法弄清楚它是什么。提前致谢！

** 更新 **

查看实体映射：

```
class Review
{
[...]

/**
 * @ORM\OneToMany(targetEntity="ReviewScreenshot", mappedBy="review")
 */
protected $screenshots;

/**
 * Won't be stored in the DB
 * @deprecated
 */
private $legacyScreenshots;

/**
 * New method to get screenshots, currently calls old method for the sake of compatibility
 * @return array Screenshot paths
 */

public function getScreenshots()
{
//        return $this->getLegacyScreenshots();  // Old method
    return $this->screenshots;                   // New method
}

/**
 * Get Screenshot paths
 * @return array Screenshot paths
 * @deprecated
 */
public function getLegacyScreenshots()
{
    $dir=$this->getUploadRootDir();
    if (file_exists($dir)) {
        $fileList = scandir($dir);

    $this->screenshots = array();
    foreach ($fileList as $fileName)
    {
        preg_match("/(screenshot-\d+.*)/", $fileName, $matches);
        if ($matches)
            $this->screenshots[]=$matches[1];
    }
    return $this->screenshots;
    }
    else return null;
} 
```

回顾截图映射：

```
class ReviewScreenshot
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $filename
 *
 * @ORM\Column(name="filename", type="string", length=255)
 */
private $filename;

/**
 * @ORM\ManyToOne(targetEntity="Review", inversedBy="screenshots")
 * @ORM\JoinColumn(name="review_id", referencedColumnName="id")
 */
protected $review;

/**
 * @var integer $priority
 *
 * @ORM\Column(name="priority", type="integer", nullable=true)
 */
protected $priority;

/**
 * @var string $description
 *
 * @ORM\Column(name="description", type="string", nullable=true)
 */
protected $description;

/**
 * @Assert\File(maxSize="2097152")
 */
public $screenshot_file;

protected $webPath; 
```

UnitOfWork.php

```
/**
 * Gets the state of an entity with regard to the current unit of work.
 *
 * @param object $entity
 * @param integer $assume The state to assume if the state is not yet known (not MANAGED or REMOVED).
 *                        This parameter can be set to improve performance of entity state detection
 *                        by potentially avoiding a database lookup if the distinction between NEW and DETACHED
 *                        is either known or does not matter for the caller of the method.
 * @return int The entity state.
 */
public function getEntityState($entity, $assume = null)
{
    $oid = spl_object_hash($entity); // <-- Line 1324

    if (isset($this->entityStates[$oid])) {
        return $this->entityStates[$oid];
    }

    if ($assume !== null) {
        return $assume;
    }

    // State can only be NEW or DETACHED, because MANAGED/REMOVED states are known.
    // Note that you can not remember the NEW or DETACHED state in _entityStates since
    // the UoW does not hold references to such objects and the object hash can be reused.
    // More generally because the state may "change" between NEW/DETACHED without the UoW being aware of it.
    $class = $this->em->getClassMetadata(get_class($entity));
    $id    = $class->getIdentifierValues($entity);

    if ( ! $id) {
        return self::STATE_NEW;
    }

    switch (true) {
        case ($class->isIdentifierNatural());
            // Check for a version field, if available, to avoid a db lookup.
            if ($class->isVersioned) {
                return ($class->getFieldValue($entity, $class->versionField))
                    ? self::STATE_DETACHED
                    : self::STATE_NEW;
            }

            // Last try before db lookup: check the identity map.
            if ($this->tryGetById($id, $class->rootEntityName)) {
                return self::STATE_DETACHED;
            }

            // db lookup
            if ($this->getEntityPersister($class->name)->exists($entity)) {
                return self::STATE_DETACHED;
            }

            return self::STATE_NEW;

        case ( ! $class->idGenerator->isPostInsertGenerator()):
            // if we have a pre insert generator we can't be sure that having an id
            // really means that the entity exists. We have to verify this through
            // the last resort: a db lookup

            // Last try before db lookup: check the identity map.
            if ($this->tryGetById($id, $class->rootEntityName)) {
                return self::STATE_DETACHED;
            }

            // db lookup
            if ($this->getEntityPersister($class->name)->exists($entity)) {
                return self::STATE_DETACHED;
            }

            return self::STATE_NEW;

        default:
            return self::STATE_DETACHED;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:28:13.573

我认为问题在于`Review::$screenshots`：

您将其映射为 OneToMany 关联，因此该值应该是`ReviewScreenshot`实体的集合。但是该方法`Review::getLegacyScreenshots()`会将其更改为字符串数组。

您可能正在使用更改跟踪策略 DEFERRED_IMPLICIT（这是默认设置）。因此，当属性`Review::$screenshots`更改时，Doctrine 将尝试保持该更改，在它期望实体的地方遇到字符串，因此抛出异常。

# django - Selenium Chrome 无法连接

> ID：14610217
> 
> 赞同：2
> 
> 时间：2013-01-30T17:36:21.703
> 
> 标签：django, google-chrome, selenium

我在我的 django 应用程序中使用 selenium，但无法设置 Chrome 浏览器。环境是debian，我使用Xvfb。这是我的代码：

```
import os
from selenium import webdriver

os.environ["DISPLAY"]=":56017"

def start_chrome(url):

    chromedriver = "/dir/app/chromedriver" #dir where I have the chromedriver
    os.environ["webdriver.chrome.driver"] = chromedriver
    driver = webdriver.Chrome("path/browser/chrome") #path where is chrome.exe
    driver.get(url)
    driver.quit() 
```

我得到：“消息：'无法连接到 ChromeDriver'”。错误在哪里？谢谢你的帮助

编辑：我更改代码：

```
def start_chrome(url):
    chromedriver = "/dir/app" #dir where I have the chromedriver
    os.environ["webdriver.chrome.driver"] = chromedriver
    driver = webdriver.Chrome(chromedriver)
    driver.get(url) 
    driver.quit() 
```

我得到：消息：'ChromeDriver 可执行文件需要在路径中可用。请从[http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)下载并在[http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)阅读

谁能帮我？我不知道该怎么办。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:46:32.580

检查 chromedriver 二进制版本是否与您的系统匹配。即32位或64位。您需要拥有正确的版本，否则您将收到此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:03:31.437

您需要确保独立的 ChromeDriver 二进制文件（不同于 Chrome 浏览器二进制文件）在您的路径中或在 webdriver.chrome.driver 环境变量中可用。

```
driver = webdriver.Chrome(chromedriver) 
```

也看看那个[问题](https://stackoverflow.com/questions/8255929/running-webdriver-chrome-with-selenium)

# c++ - 使用具有纯虚拟线程功能的 C++11 线程

> ID：14610224
> 
> 赞同：8
> 
> 时间：2013-01-30T17:36:53.087
> 
> 标签：c++, multithreading, c++11

我有代码，其中打算在单独的线程中执行的对象从具有纯虚`Run`函数的基类派生。我无法获得以下（简化的测试代码）来运行新线程。

```
#include <iostream>
#include <thread>
#include <functional>

class Base {
public:
    virtual void Run() = 0;
    void operator()() { Run(); }
};

class Derived : public Base {
public:
    void Run() { std::cout << "Hello" << std::endl; }
};

void ThreadTest(Base& aBase) {
    std::thread t(std::ref(aBase));
    t.join();
}

int main(/*blah*/) {
    Base* b = new Derived();
    ThreadTest(*b);
} 
```

代码编译得很好（这是成功的一半），但“Hello”永远不会被打印出来。如果我做错了什么，我预计会在某个时候出现运行时错误。我正在使用 gcc。

编辑：上面的代码无法在 VS2012 上编译，其中： `error C2064: term does not evaluate to a function taking 0 arguments`

您需要使用 lambda 而不是`std::ref`，即

```
void ThreadTest(Base& aBase)
{
    std::thread t([&] ()
    {
        aBase.Run();
    });
    t.join();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:07:48.377

您需要将 -pthread 添加到 g++ 命令行，如对类似问题的回答中所述：[https](https://stackoverflow.com/a/6485728/39622) ://stackoverflow.com/a/6485728/39622 。

# java - 我是否正确理解了 servlet 的工作原理？

> ID：14610226
> 
> 赞同：4
> 
> 时间：2013-01-30T17:37:05.747
> 
> 标签：java, jsp, servlets

![在此处输入图像描述](../Images/901edefd8e941edb3529c2049b9f75d6.png)

所以，是的，我总结了我所理解的所有内容并绘制了一个简单的图表。

如果我没记错的话，servlet 就是 CGI（通用网关接口），因为 servlet 是您可以访问服务器上资源的唯一途径。所以，简而言之，它是通用网关。

CONTAINER 和 Apache Tomcat 一样，负责捕获用户发送的请求并将其发送给 servlet。

用户感知到的是一个动态网页，称为 web app。

这是我到目前为止所学到的。

我学对了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:46:00.407

你几乎是对的。以下是使用普通 servlet 时可以遵循的典型工作流程：

## Servlet 呈现页面

1.  Servlet 容器查找匹配请求 URL 的 servlet

2.  `doGet()`或`doPost()`根据请求的 HTTP 方法调用

3.  Servlet 做一些处理

4.  响应（HTML、XML、JSON、图像...）直接在 servlet 中生成并使用`getOutputStream()`或发送到客户端`getWriter()`

    ```
    PrintWriter out = response.getWriter();
    out.println("Hello World"); 
    ```

## JSP 处理请求

1.  Servlet 容器找到 JSP 匹配请求。你必须明白，在每个 JSP 之下都被翻译成一些内部 servlet

2.  该 JSP 被解释。直接发送原始文本，执行 scriptlet 中的 Java 代码

3.  JSP结束，请求完成

## Servlet 转发到 JSP

1.  与第一个场景中的 1-3 相同

2.  Servlet 选择 JSP 文件并*转发*到该 JSP

3.  然后评估 JSP 文件，它可以访问由 servlet 传递的某些上下文（请求属性、会话）

    ```
    RequestDispatcher dispatcher = getServletContext()
     .getRequestDispatcher("foo.jsp");
    dispatcher.forward(request, response); 
    ```

最后一种方案被认为是最好的方案，因为它没有混合业务逻辑（servlet）和表示（JSP）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:44:07.350

Servlet 处理请求并生成响应。

JSP 被编译成 servlet，因此 JSP 是 servlet 的子集。

寻找正确 JSP 的不是 Servlet，这是容器的工作。

# c++ - Win32：使用标准光标创建类 (IDC_CROSS)

> ID：14610227
> 
> 赞同：0
> 
> 时间：2013-01-30T17:37:10.730
> 
> 标签：c++, windows, winapi, cursor

Win32新手在这里。我在使用标准 WinAPI 游标之一时遇到了一些问题：IDC_CROSS。创建新类时，我将类光标设置为 IDC_CROSS，即十字准线。但是，当我运行程序时，我的光标永远不会改变，并且始终是标准箭头。

```
ATOM MyRegisterClass(HINSTANCE hInstance)
{
    WNDCLASSEX wcex;

    wcex.cbSize = sizeof(WNDCLASSEX);

    wcex.style          = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc    = WndProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_WINSCREENCAP));
    wcex.hCursor        = LoadCursor(NULL, IDC_CROSS);
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszMenuName   = MAKEINTRESOURCE(IDC_WINSCREENCAP);
    wcex.lpszClassName  = szWindowClass;
    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

    return RegisterClassEx(&wcex);
} 
```

我正在使用 VC++ 2010 Express，即使我创建了一个新的（非空的）Win32 项目并仅更改类游标值，也会发生这种情况。有什么非常明显的东西我错过了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:26:49.303

窗口类光标设置正确。您可能想要检查类注册是否成功（`RegisterClassEx`返回非零值），以及窗口是否实际上是基于此类注册创建的。需要注意的主要事情`CreateWindow`是使用相同的窗口类名称和`HINSTANCE`值调用该函数。您还可以检查它`LoadCursor`实际上返回了一个非零值。如果`LoadCursor`由于某种原因失败，则返回零，Windows 将默认使用标准光标。

# python - wxPython 按钮加载多张图片

> ID：14610228
> 
> 赞同：1
> 
> 时间：2013-01-30T17:37:11.293
> 
> 标签：python, image, button, wxpython

对了，一个背景故事。对于我的大学项目，我正在为鼓创建一个节奏老师。所以程序要做的是加载一个鼓谱，以及一个与该鼓谱匹配的音频文件。用户按下“播放”按钮，它会播放一段与乐谱相匹配的短鼓。到目前为止，我有一个按钮可以播放加载的 Wav。文件，以及另一个加载图像的按钮。我希望我说得通。

所以我的问题是，有没有人可以做到这一点？如，一个按钮，将图像和音频文件一起加载。如果再次按下按钮，它将加载另一个图像和音频文件，覆盖之前加载的任何内容。我将加载大量图像和音频文件。重要的是图像必须与音频文件匹配。

同样，我有一个播放音频文件的按钮，另一个只是加载图像的按钮（我这样做是因为我是新手，并且正在学习如何执行这些功能。

无论如何我都会发布一个代码，它应该更有意义！对不起，如果它是一个长期阅读！只是想我会在我正在做的事情上写一个背景故事。

```
import wxversion
wxversion.select("2.8")
import wx
import wx.media

class MainWindow(wx.Frame):

    title = "Main Menu"

    def __init__(self, parent, id):
     wx.Frame.__init__(self,parent,id,'Window', size=(1000,700))
     panel=wx.Panel(self, -1)

     self.SetBackgroundColour(wx.Colour(100,100,100))
     self.Centre()
     self.Show()

     status=self.CreateStatusBar()

     menubar=wx.MenuBar()
     filemenu=wx.Menu()
     exitmenu = filemenu.Append(wx.NewId(),"Exit", "Exit Program")

     menubar.Append(filemenu,"File")
     self.Bind(wx.EVT_MENU, self.onExit, exitmenu)
     self.SetMenuBar(menubar)

     font1 = wx.Font(30, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')

     Text1=wx.StaticText(panel, -1, "Rhythm Trainer", (10,15))
     Text1.SetFont(font1)
     Text1.SetForegroundColour('white')

     btn1 = wx.Button(panel, label='Basic', pos=(100,200), size=(150, 50))
     btn1.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     self.Bind(wx.EVT_BUTTON, self.newwindow, btn1)

     btn2 = wx.Button(panel, label='Advanced', pos=(100,270), size=(150, 50))
     btn2.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     btn3 = wx.Button(panel, label='Notations', pos=(100,340), size=(150, 50))
     btn3.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     btn4 = wx.Button(panel, label='Settings', pos=(100,410), size=(150, 50))
     btn4.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     btn5 = wx.Button(panel, label="Quit", pos=(820, 550), size=(150, 50))
     btn5.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.OnClick, btn5)

    def OnClick(self, event):
     self.Close()

    def OnQuitButton(self, event):
     wx.Sleep(1)   
     self.Destroy()

    def onExit(self, event):
     self.Destroy()

    def newwindow(self, event):
     secondWindow=window2(parent=None, id=-1)
     secondWindow.Show()

class window2(wx.Frame):

    title = "new Window"

    def __init__(self, parent, id):
     wx.Frame.__init__(self, parent, id, 'Window2', size=(1000,700))
     panel=wx.Panel(self, -1)

     self.SetBackgroundColour(wx.Colour(100,100,100))
     self.Centre()
     self.Show()

     status=self.CreateStatusBar()

     menubar=wx.MenuBar()
     filemenu=wx.Menu()
     exitmenu = filemenu.Append(wx.NewId(),"Exit", "Exit Program")

     menubar.Append(filemenu,"File")
     self.Bind(wx.EVT_MENU, self.onExit, exitmenu)
     self.SetMenuBar(menubar)

     font2 = wx.Font(30, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')

     Text2=wx.StaticText(panel, -1, "Rhythm Trainer", (10,15))
     Text2.SetFont(font2)
     Text2.SetForegroundColour('white')
     self.Show(True)

     btn1 = wx.Button(panel, label="Back", pos=(820, 550), size=(150, 50))
     btn1.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.OnClick, btn1)

     btn2 = wx.Button(panel, label="Play", pos=(820, 100), size=(150, 50))
     btn2.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.onPlaySound, btn2)

     btn3 = wx.Button(panel, label="Stop", pos=(820, 150), size=(150, 50))
     btn3.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.onStopSound, btn3)

     btn4 = wx.Button(panel, label="Next", pos=(820, 200), size=(150, 50))
     btn4.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.loadImage, btn4)
     self.panel = wx.Panel(self, -1, pos=(50,50), size=(800, 200))

    def loadImage(self, event):
      image_file = 'Rock-beats.jpg'
      bmp = wx.Image(image_file, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
      wx.StaticBitmap(self.panel, -1, bmp, pos=(200, 50), size=(417, 133))

     # def onNext(self, event):
        """
        Calls the nextPicture method
        """
        #self.nextPicture()

    def onPlaySound (self, event):
      sound = wx.Sound('Test3.wav')
      sound.Play(wx.SOUND_ASYNC)

    def onStopSound(self, event):
     wx.Sound.Stop()

    def onExit(self, event):
      self.Destroy()
      wx.Sound.Stop()

    def OnClick(self, event):
      wx.Sound.Stop()
      self.Close()

if __name__=='__main__':
 app=wx.PySimpleApp()
 frame=MainWindow(parent=None,id=-1) 
```

Unutbu 的代码 2.0 - 这是我的完整可运行代码 -

```
import wxversion
#wxversion.select("2.8")
import wx
import wx.media
import itertools as IT
import os

IMAGE_DIR = './'
SOUND_DIR = './'

class MainWindow(wx.Frame):

    title = "Main Menu"

    def __init__(self, parent, id):
     wx.Frame.__init__(self,parent,id,'Window', size=(1000,700))
     panel=wx.Panel(self, -1)

     self.SetBackgroundColour(wx.Colour(100,100,100))
     self.Centre()
     self.Show()

     status=self.CreateStatusBar()

     menubar=wx.MenuBar()
     filemenu=wx.Menu()
     exitmenu = filemenu.Append(wx.NewId(),"Exit", "Exit Program")

     menubar.Append(filemenu,"File")
     self.Bind(wx.EVT_MENU, self.onExit, exitmenu)
     self.SetMenuBar(menubar)

     font1 = wx.Font(30, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')

     Text1=wx.StaticText(panel, -1, "Rhythm Trainer", (10,15))
     Text1.SetFont(font1)
     Text1.SetForegroundColour('white')

     btn1 = wx.Button(panel, label='Basic', pos=(100,200), size=(150, 50))
     btn1.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     self.Bind(wx.EVT_BUTTON, self.newwindow, btn1)

     btn2 = wx.Button(panel, label='Advanced', pos=(100,270), size=(150, 50))
     btn2.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     btn3 = wx.Button(panel, label='Notations', pos=(100,340), size=(150, 50))
     btn3.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     btn4 = wx.Button(panel, label='Settings', pos=(100,410), size=(150, 50))
     btn4.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

     btn5 = wx.Button(panel, label="Quit", pos=(820, 550), size=(150, 50))
     btn5.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.OnClick, btn5)

    def OnClick(self, event):
     self.Close()

    def OnQuitButton(self, event):
     self.Destroy()

    def onExit(self, event):
     self.Destroy()

    def newwindow(self, event):
     secondWindow=window2(parent=None, id=-1)
     secondWindow.Show()
     self.Close()

 class window2(wx.Frame):

    title = "new Window"

    def __init__(self, parent, id):
     wx.Frame.__init__(self, parent, id, 'Window2', size=(1000,700))
     panel=wx.Panel(self, -1)
     self.images = IT.cycle([filename for filename in os.listdir(IMAGE_DIR) if filename.endswith('.jpg')])
     self.image_file = None
     #self.images = IT.cycle(os.listdir(IMAGE_DIR))
     #self.image_file = next(self.images)    

     self.SetBackgroundColour(wx.Colour(100,100,100))
     self.Centre()
     self.Show()

     status=self.CreateStatusBar()

     menubar=wx.MenuBar()
     filemenu=wx.Menu()
     exitmenu = filemenu.Append(wx.NewId(),"Exit", "Exit Program")

     menubar.Append(filemenu,"File")
     self.Bind(wx.EVT_MENU, self.onExit, exitmenu)
     self.SetMenuBar(menubar)

     font2 = wx.Font(30, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')

     Text2=wx.StaticText(panel, -1, "Rhythm Trainer", (10,15))
     Text2.SetFont(font2)
     Text2.SetForegroundColour('white')
     self.Show(True)

     btn1 = wx.Button(panel, label="Back", pos=(820, 550), size=(150, 50))
     btn1.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.OnClick, btn1)

     btn2 = wx.Button(panel, label="Play", pos=(820, 100), size=(150, 50))
     btn2.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.onPlaySound, btn2)

     btn3 = wx.Button(panel, label="Stop", pos=(820, 150), size=(150, 50))
     btn3.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.onStopSound, btn3)

     btn4 = wx.Button(panel, label="Next", pos=(820, 200), size=(150, 50))
     btn4.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
     self.Bind(wx.EVT_BUTTON, self.loadImage, btn4)
     self.panel = wx.Panel(self, -1, pos=(50,50),  size=(1000, 180))

    def loadImage(self, event):
      #image_file = 'Rock-beats.jpg'
      #bmp = wx.Image(image_file, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
      #wx.StaticBitmap(self.panel, -1, bmp, pos=(200, 50), size=(417, 133))
       self.image_file = next(self.images)
       image_file = os.path.join(IMAGE_DIR, self.image_file)
       bmp = wx.Image(image_file, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
       width = bmp.GetWidth()
       height = bmp.GetHeight()
       wx.StaticBitmap(self.panel, -1, bmp, pos=(200, 50), size=(width, height))
       wx.Sound.Stop()
       print(self.image_file)

     # def onNext(self, event):
     #"""
     # Calls the nextPicture method
     # """
     #self.nextPicture()

    def onPlaySound (self, event):
      #sound = wx.Sound('Test3.wav')
      #sound.Play(wx.SOUND_ASYNC)
       sound_file, ext = os.path.splitext(self.image_file)
       sound_file = os.path.join(SOUND_DIR, sound_file + '.wav')
       sound = wx.Sound(sound_file)
       sound.Play(wx.SOUND_ASYNC) 
       print(sound_file) 
       def onStopSound(self, event):
       wx.Sound.Stop()

    def onExit(self, event):
      self.Destroy()
      wx.Sound.Stop()

    def OnClick(self, event):
      wx.Sound.Stop()
      self.Close()
      mainwindow=MainWindow(parent=None, id=-1)
      mainwindow.Show()

if __name__=='__main__':
 app=wx.PySimpleApp()
 frame=MainWindow(parent=None,id=-1)
 frame.Show()
 app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:25:17.117

这是您可以做到的一种方法：

*   首先，定义全局变量，定义包含图像和 wav 文件的目录：

    ```
    IMAGE_DIR = '/path/to/images'
    SOUND_DIR = '/path/to/sounds' 
    ```

    如果您愿意，可以使用相同的目录。我会假设

    *   `.jpg`所有图像都是以,结尾的 JPEG 文件
    *   如果调用图像，则调用`foo.jpg`关联的 wav 文件`foo.wav`。
*   接下来，在`window2.__init__`方法中定义两个新属性：

    ```
    self.images = IT.cycle([filename for filename in os.listdir(IMAGE_DIR) if filename.endswith('.jpg')])
    self.image_file = None 
    ```

    并在文件顶部导入`itertools`模块：

    ```
    import itertools as IT 
    ```

    `os.listdir(IMAGE_DIR)`返回文件名列表。IT.cycle 返回一个循环遍历列表中的项目的可*迭代*[对象](http://docs.python.org/2/library/itertools.html#itertools.cycle)。

     *[next(self.images) 一次](http://docs.python.org/2/library/functions.html#next)返回可迭代项中的项 `self.images`——每次调用 `next`. 我们将在下面使用它。* 
**   现在，`loadImage`可能会这样写：

    ```
    def loadImage(self, event):
        self.image_file = next(self.images)
        image_file = os.path.join(IMAGE_DIR, self.image_file)
        bmp = wx.Image(image_file, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
        wx.StaticBitmap(self.panel, -1, bmp, pos=(200, 50), size=(417, 133)) 
    ```* 

 *并播放相关的 wav 文件：

```
 def onPlaySound(self, event):  
        sound_file, ext = os.path.splitext(self.image_file)
        sound_file = os.path.join(SOUND_DIR, sound_file + '.wav')
        sound = wx.Sound(sound_file)
        sound.Play(wx.SOUND_ASYNC) 
```

由于正在使用[os.path.join](http://docs.python.org/2/library/os.path.html#os.path.join)和[os.path.splitext](http://docs.python.org/2/library/os.path.html#os.path.splitext)，因此请务必`os`在文件顶部也导入模块。

* * *

这是您发布的带有建议更改的代码：

```
import wxversion
wxversion.select("2.8")
import wx
import wx.media

import itertools as IT
import os

IMAGE_DIR = os.path.expanduser('~/tmp/images')
SOUND_DIR = os.path.expanduser('~/tmp/sounds')

class MainWindow(wx.Frame):

    title = "Main Menu"

    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, 'Window', size=(1000, 700))
        panel = wx.Panel(self, -1)
        self.SetBackgroundColour(wx.Colour(100, 100, 100))
        self.Centre()
        self.Show()

        status = self.CreateStatusBar()

        menubar = wx.MenuBar()
        filemenu = wx.Menu()
        exitmenu = filemenu.Append(wx.NewId(), "Exit", "Exit Program")

        menubar.Append(filemenu, "File")
        self.Bind(wx.EVT_MENU, self.onExit, exitmenu)
        self.SetMenuBar(menubar)

        font1 = wx.Font(
            30, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')

        Text1 = wx.StaticText(panel, -1, "Rhythm Trainer", (10, 15))
        Text1.SetFont(font1)
        Text1.SetForegroundColour('white')

        btn1 = wx.Button(panel, label='Basic', pos=(100, 200), size=(150, 50))
        btn1.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

        self.Bind(wx.EVT_BUTTON, self.newwindow, btn1)

        btn2 = wx.Button(
            panel, label='Advanced', pos=(100, 270), size=(150, 50))
        btn2.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

        btn3 = wx.Button(
            panel, label='Notations', pos=(100, 340), size=(150, 50))
        btn3.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

        btn4 = wx.Button(
            panel, label='Settings', pos=(100, 410), size=(150, 50))
        btn4.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))

        btn5 = wx.Button(panel, label="Quit", pos=(820, 550), size=(150, 50))
        btn5.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
        self.Bind(wx.EVT_BUTTON, self.OnClick, btn5)

    def OnClick(self, event):
        self.Close()

    def OnQuitButton(self, event):
        wx.Sleep(1)
        self.Destroy()

    def onExit(self, event):
        self.Destroy()

    def newwindow(self, event):
        secondWindow = Window2(parent=None, id=-1)
        secondWindow.Show()
        self.Close()

class Window2(wx.Frame):

    title = "new Window"

    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, 'Window2', size=(1000, 700))
        panel = wx.Panel(self, -1)

        self.SetBackgroundColour(wx.Colour(100, 100, 100))
        self.Centre()
        self.Show()

        status = self.CreateStatusBar()

        menubar = wx.MenuBar()
        filemenu = wx.Menu()
        exitmenu = filemenu.Append(wx.NewId(), "Exit", "Exit Program")

        menubar.Append(filemenu, "File")
        self.Bind(wx.EVT_MENU, self.onExit, exitmenu)
        self.SetMenuBar(menubar)

        font2 = wx.Font(
            30, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')

        Text2 = wx.StaticText(panel, -1, "Rhythm Trainer", (10, 15))
        Text2.SetFont(font2)
        Text2.SetForegroundColour('white')
        self.Show(True)

        btn1 = wx.Button(panel, label="Back", pos=(820, 550), size=(150, 50))
        btn1.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
        self.Bind(wx.EVT_BUTTON, self.OnClick, btn1)

        btn2 = wx.Button(panel, label="Play", pos=(820, 100), size=(150, 50))
        btn2.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
        self.Bind(wx.EVT_BUTTON, self.onPlaySound, btn2)

        btn3 = wx.Button(panel, label="Stop", pos=(820, 150), size=(150, 50))
        btn3.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
        self.Bind(wx.EVT_BUTTON, self.onStopSound, btn3)

        btn4 = wx.Button(panel, label="Next", pos=(820, 200), size=(150, 50))
        btn4.SetFont(
            wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, u'Consolas'))
        self.Bind(wx.EVT_BUTTON, self.loadImage, btn4)
        self.panel = wx.Panel(self, -1, pos=(50, 50), size=(800, 200))

        self.images = IT.cycle(
            [filename for filename in os.listdir(IMAGE_DIR)
             if any(filename.lower().endswith(ext) 
                    for ext in ('.png', '.jpg', '.jpeg'))])
        self.image_file = next(self.images)

        img = wx.EmptyImage(240,240)
        self.imageCtrl = wx.StaticBitmap(self.panel, wx.ID_ANY, 
                                         wx.BitmapFromImage(img), pos=(200, 50))

    def loadImage(self, event):
        self.image_file = next(self.images)
        print(self.image_file)
        image_file = os.path.join(IMAGE_DIR, self.image_file)
        img = wx.Image(image_file, wx.BITMAP_TYPE_ANY)
        img = img.Scale(240,240)
        # The idea of using imageCtrl.SetBitmap comes from
        # http://www.blog.pythonlibrary.org/2010/03/26/creating-a-simple-photo-viewer-with-wxpython/
        self.imageCtrl.SetBitmap(wx.BitmapFromImage(img))

    def onPlaySound(self, event):
        sound_file, ext = os.path.splitext(self.image_file)
        sound_file = os.path.join(SOUND_DIR, sound_file + '.wav')
        print(sound_file)
        sound = wx.Sound(sound_file)
        sound.Play(wx.SOUND_ASYNC)

    def onStopSound(self, event):
        wx.Sound.Stop()

    def onExit(self, event):
        self.Destroy()
        wx.Sound.Stop()

    def OnClick(self, event):
        wx.Sound.Stop()
        self.Close()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = MainWindow(parent=None, id=-1)
    app.MainLoop() 
```*

# javascript - 当 obj 中的键被转编译为 __indexOf 与 Coffeescript 的使用时

> ID：14610230
> 
> 赞同：2
> 
> 时间：2013-01-30T17:37:13.157
> 
> 标签：javascript, coffeescript

这茶匙咖啡...

```
 _pickInConf = (sourceConf,propsToPick...) ->
      newConfWithPickedProperties = {}
      newConfWithPickedProperties[key] = sourceConf[key] for key in Array::.concat.apply Array::,propsToPick when key in sourceConf
      newConfWithPickedProperties 
```

...被编译成：

```
_pickInConf = function() {
  var key, newConfWithPickedProperties, propsToPick, sourceConf, _i, _len, _ref;
  sourceConf = arguments[0], propsToPick = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
  newConfWithPickedProperties = {};
  _ref = Array.prototype.concat.apply(Array.prototype, propsToPick);
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    key = _ref[_i];
    if (__indexOf.call(sourceConf, key) >= 0) {
      newConfWithPickedProperties[key] = sourceConf[key];
    }
  }
  return newConfWithPickedProperties;
}; 
```

...并利用：

```
__indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }; 
```

我希望 Coffeescript 编译器能够转译这个块：

```
when key in sourceConf 
```

进入 ：

```
if (key in sourceConf) { 
```

...这就是我在JS中编码的意思...

有没有办法可以强制 Coffescript 输出这种 JS ？或者让它理解 sourceConf 是一个对象，而不是一个数组？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:39:38.683

您不想`of`迭代`in`对象的键： http: [//coffeescript.org/#loops](http://coffeescript.org/#loops)（接近本节末尾）

要对此进行扩展：

```
for a in items when a of obj
  stuff 
```

编译为

```
var a, _i, _len;

for (_i = 0, _len = items.length; _i < _len; _i++) {
  a = items[_i];
  if (a in obj) {
    stuff;

  }
} 
```

哪个正在使用`a in obj`您正在寻找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:43:21.747

您想要`of`，而不是`in`检查密钥的出现： http: [//coffeescript.org/#operators](http://coffeescript.org/#operators)

# three.js - Three.js 如何使用四元数旋转相机（下）

> ID：14610233
> 
> 赞同：0
> 
> 时间：2013-01-30T17:37:28.337
> 
> 标签：three.js, quaternions

任何人都可以修改这个基本文件

[http://jsfiddle.net/koweiny/MQkKW/](http://jsfiddle.net/koweiny/MQkKW/)

以便**相机**（不是立方体）使用四元数围绕立方体旋转？

我一直在网上搜索一个示例，但没有找到任何示例。发现的迹象根本不起作用。而且我检查过也有很多人在寻找一个例子。一个简单的旋转就足以说明机制。

顺便一提：

```
THREE.Quaternion.slerp(a, b, c, d); 
```

*a*，*b*，*c*和*d*在该函数中用于什么？slerp 是旋转相机的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:22:33.637

四元数用于设置对象的方向，而不是围绕另一个对象旋转对象。所以你的问题的答案是“不”。对不起。

```
THREE.Quaternion.slerp( fromQuaternion, toQuaternion, quaternionToSet, fractionOfTheWay); 
```

`camera.rotation`您可以通过设置或来更改相机的方向`camera.quaternion`。

三.js r.55

# c++ - 读取初始化列表中的数据

> ID：14610237
> 
> 赞同：1
> 
> 时间：2013-01-30T17:37:37.330
> 
> 标签：c++, initialization, initializer-list

在类实例化时，我想从文件中读取数据并将其处理成多个类对象。到目前为止我所做的（并且效果很好）是

```
myData::myData(const std::string & file):
  data1_(this->read(file)),
  processedData1_(this->createProcessedData1_(data1_)),
  processedData2_(this->createProcessedData2_(data1_)),
  processedData3_(this->createProcessedData3_(data1_))
{
} 
```

在不同的类中，该`read()`方法创建多个原始数据对象。在这种情况下，我不知道如何将东西打包到初始化列表中，所以我正在做一些事情

```
myData::myData(const std::string & file):
  data1_(),
  data2_(),
  processedData1_(),
  processedData2_(),
  processedData3_()
{
  this->read(file); // fills data1_, data2_
  processedData1_ = this->createProcessedData1_(data1_, data2_);
  processedData2_ = this->createProcessedData2_(data1_, data2_);
  processedData3_ = this->createProcessedData3_(data1_, data2_);
} 
```

我不喜欢这种方法的是

*   数据被初始化两次：一次（void）在初始化列表中，一次在构造函数中填充实际内容；然后
*   我无法将任何（已处理）数据对象标记为`const`.

有没有办法组织对象创建，使其全部发生在初始化列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:06:34.513

向 const 成员变量（不使用 const cast 或使用 mutable 关键字）提供值的唯一方法是在构造函数初始化程序列表中提供它。请参阅：[如何在构造函数中初始化 const 字段](https://stackoverflow.com/questions/1423696/how-to-initialize-a-const-field-in-constructor)。

如果您不想避免使用“丑陋”的强制转换或关键字，并且需要您的数据是 const（例如用于 const 函数），我会选择一个小的 myDataInitialiser 类，它会首先读取数据。读取数据后，您可以将初始化程序的整个实例传递给原始 myData 类的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:12:05.433

您可能会考虑在类似工厂的静态方法中拆分数据加载/处理，该方法又构造一个 myData 实例（将 processesData*_ 值作为构造函数参数传递）。

通过这种方式，您可以将加载和处理与可能最终仅存储结果并可能提供进一步处理或访问部分数据的类分开。

可以像

```
class MyData {
public:
    MyData(DataType processedData1, ...) : processedData1_(processedData1) ... { }
private:
    const DataType processedData1_;
}

struct DataContainer {
    DataType data1;
    DataType data2;
}

DataContainer read(const std::string& file) { ... }

DataType createProcessedData1(DataType data) { ... }
...

// hands ownership to caller
MyData* LoadData(const std::string & file) {
    DataContainer d = read(file);
    return new MyData(createProcessedData1(d.data1), createProcessedData2(d.data2), ..)
} 
```

为你工作？

我假设您在加载和处理数据时不需要保持状态。如果不是这种情况，您可以创建一个类`read`的成员。`createProcessedData*``MyDataLoader`

# angularjs - Angular ng-repeat 生成 Foundation 选项卡

> ID：14610240
> 
> 赞同：1
> 
> 时间：2013-01-30T17:37:49.890
> 
> 标签：angularjs, angularjs-ng-repeat

我很难将 ng-repeat 与 Foundation ( [http://foundation.zurb.com/](http://foundation.zurb.com/) ) 选项卡一起使用。

这将显示我希望看到的标签，三个跨，均匀分布。

```
<dl class="tabs three-up">
  <dd class="active"><a href="#a">A</a></dd>
  <dd class="active"><a href="#a">A</a></dd>
  <dd class="active"><a href="#a">A</a></dd>
</dl> 
```

当我使用 ng-repeat 生成如下选项卡时，选项卡不再并排放置，但每个选项卡占据了整个宽度，彼此堆叠。

```
<dl ng-repeat="foo in foos" class="tabs three-up">
  <dd><a href="#/foos/{{foo.id}}">{{foo.name}}</a></dd>
</dl> 
```

在 ng-repeat 中生成选项卡时如何渲染它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:44:19.467

您需要将 ng-repeat 放在“dd”上

```
<dl class="tabs three-up">
  <dd ng-repeat="foo in foos"><a href="#/foos/{{foo.id}}">{{foo.name}}</a></dd>
</dl> 
```

# xml - MonoDevelop：编辑键绑定 XML？

> ID：14610242
> 
> 赞同：1
> 
> 时间：2013-01-30T17:37:59.663
> 
> 标签：xml, monodevelop, config, key-bindings, remap

我想知道在哪里以文本/XML 格式编辑 MonoDevelop 的键绑定。我经常在 Mac 和 PC 之间切换，两者之间的复制/粘贴功能让我发疯。我已经重新映射了我的 Windows 键盘，所以除了复制/粘贴之外，所有功能都尽可能接近。

当我尝试在编辑器窗口中编辑用于复制的键绑定时，我试图将其设置为 Alt + C（它在物理/视觉上映射到与键盘上的 Command + C 相同的位置）。但是当我点击这个组合键来保存它时，该命令在 Windows 7 操作系统中被硬映射为“取消”，因此在我成功重新映射此配置之前它会从对话框窗口中取消。

经过一番谷歌搜索后，我无法找到配置文件的位置。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:57:23.840

在 Mac OS 上，您可以在`~/Library/MonoDevelop-3.0/KeyBindings/Custom.mac-kb.xml`

在 Windows 上，它会像`C:\Users\USER\AppData\Roaming\MonoDevelop-3.0\KeyBindings\Custom.kb.xml`

# html - 为什么页面会低于容器和页脚 div

> ID：14610243
> 
> 赞同：0
> 
> 时间：2013-01-30T17:38:00.713
> 
> 标签：html, css

我创建了一个可以在[这里](http://chadi.rhpmgroup.com.au)看到的网站。谁能告诉我为什么文本仅在此页面上位于“容器” div 和“页脚” div 下方。

任何帮助，将不胜感激。这可能是我缺少的一些简单的东西，只是无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:41:49.643

简单的修复。改变这个：

```
#about {
    clear: both;
    position: relative;
    top: 100px;
} 
```

对此：

```
#about {
    clear: both;
    position: relative;
    padding-top: 100px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:40:16.920

#about 有 a`position: relative`和 a `top: 100px`。请删除前 100 像素。

在#about 之前，您应该放置一个清晰的 div。这意味着无非是一个 DIV。

```
<div class="clear"></div> 
```

使用 CSS

```
.clear { clear : both; } 
```

现在你应该没事了！

# ruby - 将 xml 转换为原生 Ruby 数据结构

> ID：14610244
> 
> 赞同：4
> 
> 时间：2013-01-30T17:38:03.267
> 
> 标签：ruby, xml

我正在从返回 xml 的 api 中获取数据，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?> <seriess realtime_start="2013-01-28" realtime_end="2013-01-28"> <series id="GDPC1" realtime_start="2013-01-28" realtime_end="2013-01-28" title="Real Gross Domestic Product, 1 Decimal" observation_start="1947-01-01" observation_end="2012-07-01" frequency="Quarterly" frequency_short="Q" units="Billions of Chained 2005 Dollars" units_short="Bil. of Chn. 2005 $" seasonal_adjustment="Seasonally Adjusted Annual Rate" seasonal_adjustment_short="SAAR" last_updated="2012-12-20 08:16:28-06" popularity="93" notes="Real gross domestic product is the inflation adjusted value of the goods and services produced by labor and property located in the United States. For more information see the Guide to the National Income and Product Accounts of the United States (NIPA) - (http://www.bea.gov/national/pdf/nipaguid.pdf)"/> </seriess> 
```

我是反序列化的新手，但我认为合适的是将这个 xml 解析为一个 ruby​​ 对象，然后我可以像 objectFoo.seriess.series.frequency 一样引用它，它会返回“Quarterly”。

从我在这里和谷歌的搜索来看，在 Ruby（不是 rails）中似乎没有明显的解决方案，这让我觉得我错过了一些相当明显的东西。有任何想法吗？

**编辑** 我根据 Winfield 的建议设置了一个测试用例。

```
class Exopenstruct

  require 'ostruct'

  def initialize()  

  hash = {"seriess"=>{"realtime_start"=>"2013-02-01", "realtime_end"=>"2013-02-01", "series"=>{"id"=>"GDPC1", "realtime_start"=>"2013-02-01", "realtime_end"=>"2013-02-01", "title"=>"Real Gross Domestic Product, 1 Decimal", "observation_start"=>"1947-01-01", "observation_end"=>"2012-10-01", "frequency"=>"Quarterly", "frequency_short"=>"Q", "units"=>"Billions of Chained 2005 Dollars", "units_short"=>"Bil. of Chn. 2005 $", "seasonal_adjustment"=>"Seasonally Adjusted Annual Rate", "seasonal_adjustment_short"=>"SAAR", "last_updated"=>"2013-01-30 07:46:54-06", "popularity"=>"93", "notes"=>"Real gross domestic product is the inflation adjusted value of the goods and services produced by labor and property located in the United States.\n\nFor more information see the Guide to the National Income and Product Accounts of the United States (NIPA) - (http://www.bea.gov/national/pdf/nipaguid.pdf)"}}}

  object_instance = OpenStruct.new( hash )

  end
end 
```

在 irb 中，我加载了 rb 文件并实例化了该类。但是，当我尝试访问属性（例如 instance.seriess）时，我收到：NoMethodError: undefined method `seriess'

如果我遗漏了一些明显的东西，再次道歉。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T18:46:42.603

您最好使用标准 XML 到 Hash 解析，例如 Rails 中包含的：

```
object_hash = Hash.from_xml(xml_string)
puts object_hash['seriess'] 
```

如果您不使用 Rails 堆栈，则可以使用 Nokogiri 之类的库来实现相同的行为。

编辑：如果你正在寻找对象的行为，使用 OpenStruct 是一个很好的方法来包装散列：

```
object_instance = OpenStruct.new( Hash.from_xml(xml_string) )
puts object_instance.seriess 
```

注意：对于深度嵌套的数据，您可能还需要递归地将嵌入的哈希转换为 OpenStruct 实例。IE：如果上面的属性是值的散列，它将是散列而不是 OpenStruct。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-30T14:14:07.053

我刚刚开始使用[Damien Le Berrigaud 的 HappyMapper 分支](https://github.com/dam5s/happymapper)，我对此非常满意。您定义简单的 Ruby 类和`include HappyMapper`. 当您调用 时`parse`，它使用 Nokogiri 在 XML 中啜饮，您将获得一棵完整的真正 Ruby 对象树。

我用它来解析数兆字节的 XML 文件，发现它既快速又可靠。查看[自述文件](https://github.com/dam5s/happymapper/blob/master/README.md)。

*一个提示：由于 XML 文件编码字符串有时会撒谎，您可能需要像这样清理您的 XML：*

```
def sanitize(xml)
  xml.encode('UTF-8', 'binary', invalid: :replace, undef: :replace, replace: '')
end 
```

*在将其传递给 #parse 方法之前，以避免 Nokogiri 的`Input is not proper UTF-8, indicate encoding !`错误。*

## 更新

我继续将 OP 的示例转换为 HappyMapper：

```
XML_STRING = '<?xml version="1.0" encoding="utf-8" ?> <seriess realtime_start="2013-01-28" realtime_end="2013-01-28"> <series id="GDPC1" realtime_start="2013-01-28" realtime_end="2013-01-28" title="Real Gross Domestic Product, 1 Decimal" observation_start="1947-01-01" observation_end="2012-07-01" frequency="Quarterly" frequency_short="Q" units="Billions of Chained 2005 Dollars" units_short="Bil. of Chn. 2005 $" seasonal_adjustment="Seasonally Adjusted Annual Rate" seasonal_adjustment_short="SAAR" last_updated="2012-12-20 08:16:28-06" popularity="93" notes="Real gross domestic product is the inflation adjusted value of the goods and services produced by labor and property located in the United States. For more information see the Guide to the National Income and Product Accounts of the United States (NIPA) - (http://www.bea.gov/national/pdf/nipaguid.pdf)"/> </seriess>'

class Series; end;              # fwd reference

class Seriess
  include HappyMapper
  tag 'seriess'

  attribute :realtime_start, Date
  attribute :realtime_end, Date
  has_many :seriess, Series, :tag => 'series'
end
class Series
  include HappyMapper
  tag 'series'

  attribute 'id', String
  attribute 'realtime_start', Date
  attribute 'realtime_end', Date
  attribute 'title', String
  attribute 'observation_start', Date
  attribute 'observation_end', Date
  attribute 'frequency', String
  attribute 'frequency_short', String
  attribute 'units', String
  attribute 'units_short', String
  attribute 'seasonal_adjustment', String
  attribute 'seasonal_adjustment_short', String
  attribute 'last_updated', DateTime
  attribute 'popularity', Integer
  attribute 'notes', String
end

def test
  Seriess.parse(XML_STRING, :single => true)
end 
```

这就是你可以用它做的事情：

```
>> a = test
>> a.class
Seriess
>> a.seriess.first.frequency
=> "Quarterly"
>> a.seriess.first.observation_start
=> #<Date: 1947-01-01 ((2432187j,0s,0n),+0s,2299161j)>
>> a.seriess.first.popularity
=> 93 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T19:06:03.553

Nokogiri 解决了解析问题。如何处理数据，由你决定，这里我用`OpenStruct`一个例子：

```
require 'nokogiri'
require 'ostruct'
require 'open-uri'

doc = Nokogiri.parse open('http://www.w3schools.com/xml/note.xml')

note = OpenStruct.new

note.to = doc.at('to').text
note.from = doc.at('from').text
note.heading = doc.at('heading').text
note.body = doc.at('body').text

=> #<OpenStruct to="Tove", from="Jani", heading="Reminder", body="ToveJaniReminderDon't forget me this weekend!\r\n"> 
```

这只是一个预告片，您的问题规模可能会大很多倍。只是给你一个开始工作的优势

* * *

**编辑：**偶然发现 google 和 stackoverflow 我遇到了我的答案和**@Winfield**使用 rails之间的可能混合`Hash#from_xml`：

```
> require 'active_support/core_ext/hash/conversions'
> xml = Nokogiri::XML.parse(open('http://www.w3schools.com/xml/note.xml'))
> Hash.from_xml(xml.to_s)
=> {"note"=>{"to"=>"Tove", "from"=>"Jani", "heading"=>"Reminder", "body"=>"Don't forget me this weekend!"}} 
```

然后，您可以使用此哈希来初始化一个新的 ActiveRecord::Base 模型实例或您决定使用它做的任何其他事情。

[http://nokogiri.org/](http://nokogiri.org/)
[http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html) [https://stackoverflow.com/a/7488299/1740079](https://stackoverflow.com/a/7488299/1740079)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-28T19:14:02.260

如果您想将 xml 转换为哈希，我发现[紫菜](https://github.com/savonrb/nori)gem 是最简单的。

例子：

```
require 'nori'

xml = '<?xml version="1.0" encoding="utf-8" ?> <seriess realtime_start="2013-01-28" realtime_end="2013-01-28"> <series id="GDPC1" realtime_start="2013-01-28" realtime_end="2013-01-28" title="Real Gross Domestic Product, 1 Decimal" observation_start="1947-01-01" observation_end="2012-07-01" frequency="Quarterly" frequency_short="Q" units="Billions of Chained 2005 Dollars" units_short="Bil. of Chn. 2005 $" seasonal_adjustment="Seasonally Adjusted Annual Rate" seasonal_adjustment_short="SAAR" last_updated="2012-12-20 08:16:28-06" popularity="93" notes="Real gross domestic product is the inflation adjusted value of the goods and services produced by labor and property located in the United States. For more information see the Guide to the National Income and Product Accounts of the United States (NIPA) - (http://www.bea.gov/national/pdf/nipaguid.pdf)"/> </seriess>'

hash = Nori.new.parse(xml)    
hash['seriess']
hash['seriess']['series']
puts hash['seriess']['series']['@frequency'] 
```

注意“@”用于频率，因为它是“系列”的属性而不是元素。

# asp.net - 在 .NET 中获取 auto_increment 值

> ID：14610245
> 
> 赞同：0
> 
> 时间：2013-01-30T17:38:03.813
> 
> 标签：asp.net, .net, sql-server, vb.net, tsql

我对 .NET 和 SQL Server 比较陌生。我正在尝试从 .NET 执行存储过程并取回 auto_increment 值。这是我在 .NET (VB.NET) 中的代码：

```
myComm.Parameters.AddWithValue("@newkey", newKey)
myComm.Parameters.AddWithValue("@newimg", DirectCast(imgByteArray, Object))
Dim resultReader As SqlDataReader = myComm.ExecuteReader
Dim resultId As Integer
While resultReader.Read
     resultId = resultReader.GetInt16("@returnid")
End While 
```

这是我的存储过程：

```
-- Add the parameters for the stored procedure here
@newkey nvarchar(MAX),
@newimg varbinary(MAX),
@returnid integer = 0
AS
BEGIN

SET NOCOUNT ON;

INSERT INTO dbo.AmazonS3Preview(myKey,previewImage) VALUES (@newkey,@newimg)
SET @returnid=(SELECT @@IDENTITY AS [@@IDENTITY])
END 
```

目前在.NET中我总是得到'0' `resultId`，谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:41:06.137

您正在设置值但不返回它。甚至不需要设置变量。制作最后一行：

```
SELECT SCOPE_IDENTITY() as returnid 
```

并查看使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3)获取 returnId：

```
myComm.Parameters.AddWithValue("@newkey", newKey)
myComm.Parameters.AddWithValue("@newimg", DirectCast(imgByteArray, Object))
Dim resultId As Integer    
resultId = Convert.ToInt32(myComm.ExecuteScalar()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:47:08.060

在存储过程中，您将参数 returnid 设置为该值。但是在您的代码中，您正在捕获 select 语句的输出。我会将存储过程更改为：

```
-- Add the parameters for the stored procedure here
@newkey nvarchar(MAX),
@newimg varbinary(MAX)
AS
BEGIN

   SET NOCOUNT ON;

   INSERT INTO dbo.AmazonS3Preview(myKey, previewImage) 
   OUTPUT Inserted.ID 
   VALUES (@newkey, @newimg)
END 
```

两个变化。首先，删除 returnid 参数。其次，使用SP中的Output子句取回id。这应该可以在不需要对您的 vb.net 代码进行任何更改的情况下工作。

# c++ - 在 C++ 中正确重载 +

> ID：14610247
> 
> 赞同：0
> 
> 时间：2013-01-30T17:38:06.783
> 
> 标签：c++, operators

我创建了代表线的类，`aX + bY = c` 我希望重载`+`运算符提高线（返回更高的线，所以我在下面做了，但编译器说`invalid use of this`

```
class Linia{
public:
    double a,b,c;
    Linia (double a, double b, double c){
        this->a = a;
        this->b = b;
        this->c = c;
    }
   friend Linia operator+ (double i){
   return new Linia(a, this->b, this->c + i/this->b);
}
}; 
```

我想返回`Linia`具有如上所示字段的新对象`i`是`int`我不想修改原始对象

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:45:17.543

你有一些基本的语法问题。

*   `this`是一个指针，因此您需要使用`->`它来取消引用它。

*   我假设你的意思是`this->c + i.c`而不是`this->c + i`

*   您不需要（也可能不应该）让操作员成为朋友。

*   返回新实例（如`operator+`）的运算符应该按值返回，而不是在堆上分配。

*   运算符通常将参数作为`const`引用（因为您不应该修改操作数）。

我认为你的意思是有这样的东西：

```
class Linia{
public:
    double a,b,c;
    Linia (double a, double b, double c){
        this->a = a;
        this->b = b;
        this->c = c;
    }
    Linia operator+ (const Linia& i){
        return Linia(this->a, this->b, this->c + i.c / this->b);
    }
}; 
```

你可以把它清理成这样：

```
class Linia{
public:
    double a,b,c;
    Linia (double a, double b, double c)
        : a(a), b(b), c(c)
    { }

    Linia operator+ (const Linia& i){
        return Linia(a, b, c + i.c / b);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:46:14.270

您的代码中至少存在两个问题。首先，您已声明`operator+`为朋友，因此它是一个免费函数，没有`this`. 遗憾的是，从代码中，我无法弄清楚您要做什么（重载一元+或重载二进制+），因此很难说更多。其次，您试图返回 的结果`new`，这是一个指针，而不是对象类型。 `operator+`应该总是返回一个对象类型，所以你不想要`new`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:47:42.663

假设您`operator+`是一个二元运算符，它接受两个`Linia`s 作为输入并返回一个`Linea`已添加的系数，您可能希望定义一个自由函数重载，输入s`operator+`具有适当的 const 正确性，如下所示：`Linia`

```
Linia operator+(const Linia& lhs, const Linia& rhs)
{
    return Linia
    (
        lhs.a + rhs.a,
        lhs.b + rhs.b,
        lhs.c + rhs.c
    );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T17:48:24.160

由于您将其声明为`friend`，因此您的加法运算符不是成员函数，因此它必须采用两个参数，并且无法访问`this`：

```
friend Linia operator+ (const Linia& lhs, const Linia& rhs)
{
  return Linia(lhs.a, lhs.b, lhs.c + rhs/lhs.b);
} 
```

这遵循代码中的逻辑，但仅在有 operator 时才有效`double operator/(const Linia& lhs, double)`。直觉上有意义的事情是

```
friend Linia operator+ (const Linia& lhs, const Linia& rhs)
{
  return Linia(lhs.a+rhs.a, lhs.b+rhs.b, lhs.c + rhs.c);
} 
```

最后，您可以完全避免`friend`声明，只需将运算符声明为标准的非成员函数。它不访问任何私人或受保护的数据，因此它不需要成为朋友。

# java - Web 服务器上的 jar 文件错误

> ID：14610254
> 
> 赞同：1
> 
> 时间：2013-01-30T17:38:45.327
> 
> 标签：java, php, jar, webserver

我有一个 .jar 文件可以在我的 mac 上完美运行，但我需要在 Web 服务器上运行它......所以当我使用命令行使这个文件工作时，它给了我这个错误：

```
[root@mysite.com dist]$ java -jar PDFparser.jar ffive.pdf
Exception in thread "main" java.lang.NoSuchMethodError: method java.lang.String.getBytes with signature (Ljava.nio.charset.Charset;)[B was not found.
at org.apache.commons.io.IOUtils.write(IOUtils.java:1527)
at org.apache.commons.io.FileUtils.writeStringToFile(FileUtils.java:1929)
at org.apache.commons.io.FileUtils.writeStringToFile(FileUtils.java:1962)
at pdfparser.PDFparser.main(PDFparser.java:171) 
```

我不是创建该 .jar 应用程序的人，但它的工作方式正是我在我的 Mac 上需要的方式......但它需要它用于网站，所以我需要它在 Web 服务器上工作......有谁知道这个错误是什么意思，我该怎么办？我不懂Java语言，所以如果你向我解释我应该怎么做，那就太棒了，就像我是一个非常愚蠢的人......一步一步...... :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:41:58.470

`String.getBytes(Charset c)`自 Java 1.6 起才可用。最有可能的是，您 Mac 上的 Java 版本是 1.6+，但您的目标服务器低于 1.6。

您需要在 Web 服务器上至少更新到 Java 1.6 才能使用此方法。

[来源](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:41:16.123

这

```
java.lang.NoSuchMethodError: method java.lang.String.getBytes with signature (Ljava.nio.charset.Charset;)[B was not found. 
```

意味着你的jar文件中的一个类在Java安装中找不到对应的方法。我怀疑您的 jar 文件是使用比您的 Web 服务器上安装的版本更高/更新的 java 版本创建的。

在您的工作服务器上，键入

```
$ java -version 
```

并在您的 Web 服务器上执行相同的操作，并比较版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:56:11.353

您的 Mac 或网络服务器没有问题。jar 是使用较低版本的 Java（1.5 或更低版本）创建的，而 String.getBytes() 仅适用于 java 1.6+。

存在版本不匹配。

# fusioncharts - 融合图 - 甘特图 - 不支持图表类型

> ID：14610257
> 
> 赞同：1
> 
> 时间：2013-01-30T17:38:46.743
> 
> 标签：fusioncharts

我正在尝试 Fusion Charts 的试用版。我下载了 FusionCharts XT(v3.2.2) SR5 和 FusionWidgets XT (v3.2) Service Release 2 试用版，将脚本和 flash 文件复制到我的应用程序中，包括 FusionCharts/jquery.min.js、FusionCharts/FusionCharts.js、FusionCharts /FusionCharts.HC.js, FusionCharts/FusionCharts.HC.Widgets.js 在我的 aspx 中，我尝试了下面的图表 (Column3D) 并提供了示例 JSON，它运行良好。我能够看到图表。

```
var myChart = new FusionCharts("Column3D", "myChartId", "400", "300");
myChart.setJSONData(
{ "chart":
{ "caption": "Weekly Sales Summary", "xAxisName": "Week", "yAxisName": "Sales", "numberPrefix": "$" },
"data":
[{ "label": "Week 1", "value": "14400" },
{ "label": "Week 2", "value": "19600" },
{ "label": "Week 3", "value": "24000" },
{ "label": "Week 4", "value": "15700"}]
});
myChart.render("chartContainer"); 
```

但是当我想尝试使用提供的示例 JSON 的甘特图时，我得到 Chart type not supported。请查看我在下面尝试的代码和完整的 JSON。

```
var myChart = new FusionCharts("Gantt", "myChartId", "800", "700");
myChart.setJSONData(
{ "chart": { "manageresize": "1", "dateformat": "dd/mm/yyyy", "outputdateformat": "ddds mns yy", "ganttwidthpercent": "65", "canvasbordercolor": "999999", "canvasborderthickness": "0", "gridbordercolor": "4567aa", "gridborderalpha": "20", "ganttpaneduration": "3", "ganttpanedurationunit": "m" }, "categories": [{ "bgcolor": "009999", "category": [{ "start": "1/3/2008", "end": "31/8/2008", "label": "Residential Construction", "fontcolor": "ffffff", "fontsize": "16"}] }, { "bgcolor": "4567aa", "fontcolor": "ff0000", "category": [{ "start": "1/3/2008", "end": "31/8/2008", "label": "Months", "alpha": "", "font": "Verdana", "fontcolor": "ffffff", "fontsize": "16"}] }, { "bgcolor": "ffffff", "fontcolor": "1288dd", "fontsize": "10", "isbold": "1", "align": "center", "category": [{ "start": "1/3/2008", "end": "31/3/2008", "label": "March" }, { "start": "1/4/2008", "end": "30/4/2008", "label": "April" }, { "start": "1/5/2008", "end": "31/5/2008", "label": "May" }, { "start": "1/6/2008", "end": "30/6/2008", "label": "June" }, { "start": "1/7/2008", "end": "31/7/2008", "label": "July" }, { "start": "1/8/2008", "end": "31/8/2008", "label": "August"}]}], "processes": { "headertext": "Task", "fontcolor": "000000", "fontsize": "11", "isanimated": "1", "bgcolor": "4567aa", "headervalign": "bottom", "headeralign": "left", "headerbgcolor": "4567aa", "headerfontcolor": "ffffff", "headerfontsize": "16", "align": "left", "isbold": "1", "bgalpha": "25", "process": [{ "label": "Writing", "id": "1" }, { "label": "Signing", "id": "2" }, { "label": "Financing", "id": "3" }, { "label": "Permission", "id": "4" }, { "label": "Plumbing", "id": "5" }, { "label": "Terrace", "id": "6" }, { "label": "Inspection", "id": "7" }, { "label": "Wood Work", "id": "8" }, { "label": "Interiors", "id": "9" }, { "label": "Shifting", "id": "10"}] }, "datatable": { "showprocessname": "1", "namealign": "left", "fontcolor": "000000", "fontsize": "10", "valign": "right", "align": "center", "headervalign": "bottom", "headeralign": "left", "headerbgcolor": "4567aa", "headerfontcolor": "ffffff", "headerfontsize": "16", "datacolumn": [{ "bgcolor": "eeeeee", "headertext": "Start", "text": [{ "label": "7/3/2008" }, { "label": "6/4/2008" }, { "label": "1/5/2008" }, { "label": "13/5/2008" }, { "label": "2/5/2008" }, { "label": "1/6/2008" }, { "label": "15/6/2008" }, { "label": "22/6/2008" }, { "label": "18/6/2008" }, { "label": "15/7/2008"}] }, { "bgcolor": "eeeeee", "headertext": "Finish", "text": [{ "label": "22/4/2008" }, { "label": "12/5/2008" }, { "label": "2/6/2008" }, { "label": "19/6/2008" }, { "label": "19/6/2008" }, { "label": "19/7/2008" }, { "label": "11/8/2008" }, { "label": "5/8/2008" }, { "label": "22/7/2008" }, { "label": "11/8/2008"}] }, { "bgcolor": "eeeeee", "headertext": "Hrs", "text": [{ "label": "150" }, { "label": "340" }, { "label": "60" }, { "label": "20" }, { "label": "30" }, { "label": "45" }, { "label": "40" }, { "label": "102" }, { "label": "60" }, { "label": "30" }, { "label": "90" }, { "label": "30"}] }, { "align": "right", "bgcolor": "4567aa", "bgalpha": "25", "headertext": "Cost", "isbold": "1", "text": [{ "label": "$4100" }, { "label": "$8290" }, { "label": "$12340" }, { "label": "$2330" }, { "label": "$4550" }, { "label": "$15720" }, { "label": "$1780" }, { "label": "$32330" }, { "label": "$9890" }, { "label": "$1110" }, { "label": "$1260" }, { "label": "$4260"}]}] }, "tasks": { "task": [{ "label": "Planned", "processid": "1", "start": "7/3/2008", "end": "18/4/2008", "id": "1-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "1", "start": "9/3/2008", "end": "22/4/2008", "id": "1", "color": "EEEEEE", "alpha": "100", "toppadding": "56%", "height": "32%" }, { "label": "Planned", "processid": "8", "start": "22/6/2008", "end": "29/7/2008", "id": "2-1", "color": "4567aa", "alpha": "100", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "8", "start": "22/6/2008", "end": "5/8/2008", "id": "2", "color": "EEEEEE", "alpha": "100", "height": "32%", "toppadding": "56%", "percentcomplete": "78" }, { "label": "Planned", "processid": "2", "start": "6/4/2008", "end": "2/5/2008", "id": "3-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "2", "start": "6/4/2008", "end": "12/5/2008", "id": "3", "color": "EEEEEE", "alpha": "100", "isanimated": "1", "height": "32%", "toppadding": "56%" }, { "label": "Planned", "processid": "9", "start": "18/6/2008", "end": "21/7/2008", "id": "4-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "9", "start": "18/6/2008", "end": "22/7\t/2008", "id": "4", "color": "EEEEEE", "alpha": "100", "isanimated": "1", "height": "32%", "toppadding": "56%" }, { "label": "Planned", "processid": "3", "start": "1/5/2008", "end": "2/6/2008", "id": "5-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "3", "start": "1/5/2008", "end": "2/6/2008", "id": "5", "color": "EEEEEE", "height": "32%", "toppadding": "56%" }, { "label": "Planned", "processid": "4", "start": "11/5/2008", "end": "12/6/2008", "id": "6-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "4", "start": "13/5/2008", "end": "19/6/2008", "id": "6", "color": "EEEEEE", "height": "32%", "toppadding": "56%" }, { "label": "Planned", "processid": "5", "start": "1/5/2008", "end": "12/6/2008", "id": "7-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "5", "start": "2/5/2008", "end": "19/6/2008", "id": "7", "color": "EEEEEE", "height": "32%", "toppadding": "56%" }, { "label": "Planned", "processid": "6", "start": "1/6/2008", "end": "12/7/2008", "id": "8-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "6", "start": "1/6/2008", "end": "19/7/2008", "id": "8", "color": "EEEEEE", "height": "32%", "toppadding": "56%", "percentcomplete": "91" }, { "label": "Planned", "processid": "7", "start": "11/6/2008", "end": "7/8/2008", "id": "9-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "7", "start": "15/6/2008", "end": "11/8/2008", "id": "9", "color": "EEEEEE", "height": "32%", "toppadding": "56%" }, { "label": "Planned", "processid": "10", "start": "11/7/2008", "end": "7/8/2008", "id": "10-1", "color": "4567aa", "height": "32%", "toppadding": "12%" }, { "label": "Actual", "processid": "10", "start": "15/7/2008", "end": "11/8/2008", "id": "10", "color": "EEEEEE", "height": "32%", "toppadding": "56%"}] }, "connectors": [{ "connector": [{ "fromtaskid": "3", "totaskid": "5", "color": "4567aa", "thickness": "2", "fromtaskconnectstart": "1" }, { "fromtaskid": "8", "totaskid": "2", "color": "4567aa", "thickness": "2", "fromtaskconnectstart": "1"}]}], "milestones": { "milestone": [{ "date": "7/8/2008", "taskid": "10-1", "color": "2E4472", "shape": "star", "tooltext": "Original moving date" }, { "date": "21/8/2008", "taskid": "10", "color": "999999", "shape": "star", "tooltext": "New estimated moving date"}] }, "legend": { "item": { "label": "Slack (Delay)", "color": "FF5E5E"} }, "styles": { "definition": [{ "type": "Font", "name": "legendFont", "size": "12"}], "application": [{ "toobject": "LEGEND", "styles": "legendFont"}]} });
myChart.render("chartContainer"); 
```

我认为 JSON 没有任何问题，因为我直接从样本中获取了它。但为什么我的图表类型不受支持？为了使 fusionwidgets 工作，我们还需要做些什么吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T06:28:53.957

最新版本的 FusionWidgets XT 3.3.1 支持 JavaScript 风格的甘特图。

有关更多信息，请参阅：http: [//forum.fusioncharts.com/topic/13689-javascript-variant-of-gantt-chart/](http://forum.fusioncharts.com/topic/13689-javascript-variant-of-gantt-chart/)

# mysql - LEFT JOIN 查询返回多个结果

> ID：14610264
> 
> 赞同：3
> 
> 时间：2013-01-30T17:39:17.143
> 
> 标签：mysql

我有下面的查询，它查看一个数据表，其中每一行都有一个 ID、日期/时间和关键操作（以及其他数据）。此表无法更改且不受我控制。

查询发现 Create 操作（始终是第一个）的出现，提取 ID 和 Date/Time for Creation，然后在一行中提取其他关键操作（Add Info、Book Appt、Accept）的 Date/Time数据：

```
SELECT _create.ID AS ID, 
_create.`datetime` AS Create, 
_inform.`datetime` AS Add_Info,
_bookap.`datetime` AS Book_Appt,
_accept.`datetime` AS Accept,
FROM table AS _create
LEFT JOIN table AS _inform ON (_create.ID = _inform.ID AND _inform.action = 'Add Info')
LEFT JOIN table AS _bookap ON (_create.ID = _bookap.ID AND _bookap.action = 'Book Appt')
LEFT JOIN table AS _accept ON (_create.ID = _accept.ID AND _accept.action = 'Accept')
WHERE _create.action="Create" 
```

所以我得到类似的东西：

```
ID  -  Create Date - Inform Date - Bookap Date - Accept Date
1234   01/02/2013    02/02/2013    09/02/2013    10/02/2013 
```

这很好用。

但是，如果查询发现 2 个相同类型的事件，即同一 ID 的“Book Appt”，有时会发生这种情况，它会为该 ID 提取两行数据。所以我得到：

```
ID  -  Create Date - Inform Date - Bookap Date - Accept Date
1234   01/02/2013    02/02/2013    09/02/2013    10/02/2013 
1234   01/02/2013    02/02/2013    15/02/2013    10/02/2013 
```

我需要它忽略第二次出现，每个 ID 只返回一行。或者，更好地返回显示 Bookap Date1 和 Bookap Date2 的行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:42:47.757

用于`GROUP BY`将记录分组为一行，并[`min()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_min)选择最早的事件日期。

```
SELECT _create.ID AS ID, 
min(_create.`datetime`) AS Create, 
min(_inform.`datetime`) AS Add_Info,
min(_bookap.`datetime`) AS Book_Appt,
min(_accept.`datetime`) AS Accept,
FROM table AS _create
LEFT JOIN table AS _inform ON (_create.ID = _inform.ID AND _inform.action = 'Add Info')
LEFT JOIN table AS _bookap ON (_create.ID = _bookap.ID AND _bookap.action = 'Book Appt')
LEFT JOIN table AS _accept ON (_create.ID = _accept.ID AND _accept.action = 'Accept')
WHERE _create.action="Create"
GROUP BY _create.ID; 
```

显示所有事件日期但仍返回一行的一种快速而肮脏的方法是使用该[`group_concat()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数而不是[`min()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_min)上面的查询。这会将多个`datetime`s 放入单个列中，然后您的应用层需要解析这些列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:44:28.610

如果要`Book_Appt`在一行中返回多个值，可以`GROUP_CONCAT`这样使用：

```
SELECT _create.ID AS ID, 
_create.`datetime` AS Create, 
_inform.`datetime` AS Add_Info,
GROUP_CONCAT(_bookap.`datetime`) AS Book_Appt,
_accept.`datetime` AS Accept,
FROM table AS _create
LEFT JOIN table AS _inform ON (_create.ID = _inform.ID AND _inform.action = 'Add Info')
LEFT JOIN table AS _bookap ON (_create.ID = _bookap.ID AND _bookap.action = 'Book Appt')
LEFT JOIN table AS _accept ON (_create.ID = _accept.ID AND _accept.action = 'Accept')
WHERE _create.action="Create"
GROUP BY `ID` 
```

在您的情况下，这将返回一个逗号分隔的日期时间值列表。

所以你的输出可能看起来像

```
ID  -  Create Date - Inform Date - Bookap Date      -       Accept Date
1234   01/02/2013    02/02/2013    09/02/2013,15/02/2013    10/02/2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:41:38.723

当然，`GROUP BY _create.ID`在你的`WHERE`条款之后使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:59:53.107

对于您的第一个问题（仅返回一行），我将使用一个`ORDER BY`子句对您的结果集进行排序，然后是一个`LIMIT 1`仅返回一行的表达式。

# android - cocos2dx eclipse：各种“错误：未定义的引用”

> ID：14610269
> 
> 赞同：3
> 
> 时间：2013-01-30T17:39:31.707
> 
> 标签：android, c++, eclipse, android-ndk, cocos2d-x

我正在尝试使用 cocos2dx 2.0.4 将 iOS 游戏移植到 Android 平台。游戏的核心是用 c++ 编写的，我们设法在 iOS 上运行它，实际上游戏可以在 Apple Store 上找到。我正在使用 NDK r8d 和最新的 SDK，但是在尝试构建时遇到了很多问题。

我的 application.mk 是这样的：

```
APP_STL := stlport_shared
APP_CPPFLAGS := -frtti
NDK_TOOLCHAIN_VERSION=4.7 
```

安卓.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

ifdef STLG
    LOCAL_MODULE := stlport_stlg
else
    LOCAL_MODULE := stlport
endif
LOCAL_CFLAGS += -D__ANDROID__ \
     -isystem $(SYSROOT)/usr/include \
LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_CPPFLAGS += -fexceptions                   

LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes         
 LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes $(LOCAL_PATH)/../../../../Box2D $(LOCAL_PATH)/../../../../cocos2dx $(LOCAL_PATH)/../../../../   

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) 
```

这是控制台日志（仅显示错误）：

```
/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_alloc.h:158: error: undefined reference to 'std::__node_alloc::_M_allocate(unsigned int&)'
make: Leaving directory `/Users/arianna/android/cocos2d-2.0-x-2.0.4/grannnnnnny/proj.android'
/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_alloc.h:161: error: undefined reference to 'std::__node_alloc::_M_deallocate(void*, unsigned int)'
/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_string.c:600: error: undefined reference to 'std::__stl_throw_length_error(char const*)'
/Users/arianna/android/cocos2d-2.0-x-2.0.4/grannnnnnny/proj.android/../../cocos2dx/actions/CCActionInterval.cpp:386: error: undefined reference to '__dynamic_cast'
/Users/arianna/android/cocos2d-2.0-x-2.0.4/grannnnnnny/proj.android/../../cocos2dx/actions/CCActionInterval.cpp:1783: error: undefined reference to '__dynamic_cast'
/Users/arianna/android/cocos2d-2.0-x-2.0.4/grannnnnnny/proj.android/../../cocos2dx/actions/CCActionInterval.cpp:1838: error: undefined reference to '__dynamic_cast'
/Users/arianna/android/cocos2d-2.0-x-2.0.4/grannnnnnny/proj.android/../../cocos2dx/actions/CCActionInterval.cpp:1906: error: undefined reference to '__dynamic_cast'
/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_vector.c:41: error: undefined reference to 'std::__stl_throw_length_error(char const*)'
/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_vector.c:45: error: undefined reference to 'std::__stl_throw_out_of_range(char const*)'
/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_string.c:604: error: undefined reference to 'std::__stl_throw_out_of_range(char const*)'

/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_vector.c:41: error: undefined reference to 'std::__stl_throw_length_error(char const*)'

./obj/local/armeabi/libcocos2d.a(CCDirector.o):CCDirector.cpp:function typeinfo for cocos2d::CCDirector: error: undefined reference to 'vtable for __cxxabiv1::__vmi_class_type_info'

/Users/arianna/android/android-ndk-r8d/sources/cxx-stl/stlport/stlport/stl/_vector.c:41: error: undefined reference to 'std::__stl_throw_length_error(char const*)'

collect2: error: ld returned 1 exit status

make: *** [obj/local/armeabi/libgame.so] Error 1 
```

非常感谢任何帮助，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:33:57.200

在 application.mk APP_STL 中试试这个：= gnustl_static？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:10:38.467

您会收到上述未定义的引用错误，因为您没有在 Android.mk 文件中添加必要的库。它看起来像这样

LOCAL_LDLIBS := -L$(调用主机路径，$(LOCAL_PATH)/../../libs/$(TARGET_ARCH_ABI)) \ -lcocos2d -lGLESv1_CM -llog -lgame_logic

即使添加了库，我也遇到了这个问题。它与设置路径有关，但我不知道如何..

如果你解决了这个问题，请告诉我

# android - 在javascript中处理onDestroy方法

> ID：14610270
> 
> 赞同：2
> 
> 时间：2013-01-30T17:39:34.157
> 
> 标签：android, cordova

我正在使用 Cordova 2.2 开发一个混合 android 应用程序，我想知道是否有办法捕获当我强制关闭我的应用程序时触发的 onDestroy() 方法。

我已经处理了我的应用程序的后退按钮事件，但是当有人从任务栏关闭应用程序（从任务栏拖出应用程序窗口）时，我的 Activity 中的 onDestroy() 方法被调用。在关闭应用程序之前，我需要从我的 javascript 函数中调用 LogOut() 方法。

有人知道这样做的插件吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:49:10.690

您需要在从 DroidGap 扩展的应用程序的类中覆盖 onDestroy。您将调用 super.onDestroy，然后向您的 JavaScript 发送一条消息，告诉它注销。考虑到您的应用程序被杀死，不能保证这将起作用。

# jquery - 填充对绝对定位的下拉菜单有意想不到的影响

> ID：14610272
> 
> 赞同：1
> 
> 时间：2013-01-30T17:39:36.980
> 
> 标签：jquery, html, css, drop-down-menu, padding

我有`#header`具有以下 CSS 属性的 div：

```
#header{
    background-image:url('img/header-bkg-tile.png');
    background-repeat:repeat-x;
} 
```

并`#header-container`在其中具有以下属性：

```
#header-container{
    height:63px;
    width: 1120px;
    position: relative;
    left : 50%;
    margin-left: -560px;
    padding-top:19px;
} 
```

结构是这样的，以防万一：

```
<div id="header">
    <div id="header">
    </div>
</div> 
```

在里面`#header`你有一个图像和一个`<ul>`，一切都按预期工作。

我的问题是在创建这个时`simple dropdow`。

问题本身是我无法到达的下部`.sub_menu`，在您进入倒数第二个元素后，下拉菜单会回到“静止位置”。

你可以在这里看到一个[活生生的例子](http://trufavarela.com/uruware/)。

我已经隔离了这个问题，它与我用来垂直居中图像的填充有关：`padding-top:19px;`

下拉菜单的相关代码如下：

```
/* 
    LEVEL ONE
*/
ul.dropdown                         { position: relative; }
ul.dropdown li                      { float: left; zoom: 1; }
ul.dropdown a:hover                 { color: #000; }
ul.dropdown a:active                { color: #ffa500; }
ul.dropdown li a                    { display: block; padding: 4px 8px;}
ul.dropdown li:last-child a         { border-right: none; } /* Doesn't work in IE */
ul.dropdown li.hover,
ul.dropdown li:hover                { position: relative; }
ul.dropdown li.hover a              { color: black; }

/* 
    LEVEL TWO
*/
ul.dropdown ul                      { width: 220px; visibility: hidden; position: absolute; top: 100%; left: 0;}
ul.dropdown ul li                   { font-weight: normal; background: #C8E4ED; color: #000; 
                                      border-bottom: 1px solid #ccc; float: none; }

                                    /* IE 6 & 7 Needs Inline Block */
ul.dropdown ul li a                 { border-right: none; width: 100%; display: inline-block; } 
```

我尝试了各种各样的事情，但老实说，我或多或少是在猜测，我想了解问题所在。

我会虽然向`LEVEL TWO`元素添加负填充可以解决问题，但它并没有因此任何指针都可以提供帮助。

编辑：标题标记如下：

```
 <div id="header">
     <div id="header-container">
         <div id="header-all">
             <a href="#"><img id="logo" src="<?php bloginfo('template_url'); ?>/img/logo.png" alt="logo uruware"/></a>
             <ul id="header-elements" class="dropdown">
                 <li><a href="#" class="active-selection">Inicio</a>
                  <ul class="sub_menu">
                        <li><a href="#1">UCFE</a></li>
                        <li><a href="#2">Trx Server</a></li>
                        <li><a href="#3">Trx Framework</a></li>
                    </ul>
                 </li>
                 <li><a href="#">Quiénes somos</a></li>
                 <li><a href="#">Productos</a>

                 </li>
                 <li><a href="#">Servicios</a></li>
                 <li><a href="#">Novedades</a></li>
                 <li><a href="#">Contacto</a></li>
             </ul>
        </div>
     </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:52:00.500

这是个`z-index`问题。

规则是HTML 代码*后面的所有内容都**在*. 结果，在 ul 下拉列表之后出现的 div位于*ul*`#container`下拉列表**之上**。

 ***要解决此问题，请将其添加到您的下拉列表中：

```
ul.dropdown ul {
  z-index: 2000;
} 
```

或者只是`z-index: 1;`，只要你**设置**你的 z-index.***

# unit-testing - MbUnit：如何通知被测例程它是从测试环境调用的

> ID：14610276
> 
> 赞同：0
> 
> 时间：2013-01-30T17:39:45.300
> 
> 标签：unit-testing, mbunit

我有一个从注册表读取目录信息的例程。如果从测试环境调用它需要返回一个位置（测试数据目录）。如果没有从测试环境中调用，它需要返回另一个位置（生产数据所在的位置）。有人可以给我一个关于如何做到这一点的线索吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:22:40.307

在我看来，您需要使用[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)。我还建议使用[控制反转 (IoC)](http://en.wikipedia.org/wiki/Inversion_of_control)容器。网上有很多关于 DI 和 IoC 的信息。

# grails - 静态映射闭包中的 Grails“重复字段名称”错误

> ID：14610280
> 
> 赞同：0
> 
> 时间：2013-01-30T17:40:05.983
> 
> 标签：grails, groovy, mapping

我在 Grails 的“类”类中收到以下错误。对于每个字段，它告诉我我有一个重复的字段。这没有任何意义，因为我要做的就是将字段与其关联的表列映射。我的映射闭包中的类字段和字段都带有下划线。到目前为止，这是我的课程：

```
package booklist

class Class {

Integer id
String name
String description
String instructor
String courseNumber
String lineNumber
List books
BigDecimal bookTotalPrice
String sequenceNumber
String subjectCode

static constraints = {

}

static mapping = {
    //Uses the default datasource
    table ''

    columns {
        id column: 'class_id'
        name column: 'class_name'
        description column: 'course_description'
        instructor column: 'instructor_name'
        courseNumber column: 'course_number'
        lineNumber column: 'line_number'
        bookTotalPrice column: 'book_total_price'
        sequenceNumber column: 'sequence_number'
        subjectCode column: 'subject_code'
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:53:25.687

您不需要在静态映射中声明不需要重命名的字段。写这个：

```
package booklist

class MyClass {

    Integer id
    String name
    String description
    String instructor
    String courseNumber
    String lineNumber
    List books
    BigDecimal bookTotalPrice
    String sequenceNumber
    String subjectCode

    static mapping = {
        description column: 'course_description'
    }
} 
```

Grails 使用 CoC（Convention Over Configuration）方法：如果您不需要更改某些内容，请不要编写它，并且将使用约定。

有关列映射的更多详细信息，请查看 Grails 文档： http: [//grails.org/doc/latest/ref/Database%20Mapping/column.html](http://grails.org/doc/latest/ref/Database%20Mapping/column.html)

# css - 分组类选择器和 CSS 特异性

> ID：14610281
> 
> 赞同：0
> 
> 时间：2013-01-30T17:40:07.993
> 
> 标签：css, css-selectors, css-specificity

哪些类选择器规则对 10 分具有更高的特异性？

```
.A.E.F .C .D 
```

或者

```
.A .B .C span 
```

HTML：

```
<div class="A E F">
    <div class="B">
        <div class="C">
            <div class="D">
                <span>17590</span>
                <span>Points</span>
            </div>
        </div>
    </div>
</div> 
```

CSS：

```
.A.E.F .C .D /* span */ {
    font-size: 1em;
}

.A .B .C span {
    font-size: .95em;
} 
```

这是一个演示问题的 JS 小提琴：http: [//jsfiddle.net/UgkZY/](http://jsfiddle.net/UgkZY/)

我原以为第一条规则会赢。5 x 类而不是 3 x 类 + 1 x 类型。然而，第二条规则胜出，因为 .AEF 似乎只得分为 1 级。

如果我使用下面的在线 CSS 特异性计算器[http://specificity.keegan.st/](http://specificity.keegan.st/)，它认为第一条规则将获胜。实际上，在 Chrome 浏览器中，第二个获胜。

有人可以澄清一下 .ABC 在 CSS 特异性方面确实被认为只是一类吗？

顺便说一句，如果我在第一条规则中添加一个跨度选择器，它将胜出。

根据 CSS 规范，我认为第一个应该获胜。

[http://www.w3.org/TR/selectors/#specificity](http://www.w3.org/TR/selectors/#specificity)

> LI.red.level /* a=0 b=2 c=1 -> 特异性 = 21 */

我必须说非常令人困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:47:22.893

*只有在比较匹配相同元素的*选择器时，特异性才有意义。在这种情况下，您的两条规则匹配完全不同的元素：第一条规则匹配`div`包含类`D`( `div.D`) 的元素，而第二条规则匹配该类*中*的`span`元素。然后发生的情况是这两个规则都适用，但适用于不同的元素，导致字体大小为 的95%，而后者又是其祖先的 100%。不会对样式进行否决或覆盖。*`div.D``span``div.D`*

 *如果您添加`span`到第一条规则，这会导致它匹配第二条规则也适用的相同`span`元素。`div.D`只有这样，特异性才会发挥作用：根据对类选择器的计数，第一条规则最终会覆盖第二条规则。

此外，`.A.B.C`算作三类；每个类选择器都为自己计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:45:46.083

实际上，第二个选择器获胜。这可能是因为 .AEF以 HTML 树中的*单个元素为目标。**

# ios - 搜索期间 UITableViewCell 详细信息披露按钮按钮太靠右

> ID：14610284
> 
> 赞同：10
> 
> 时间：2013-01-30T17:40:14.210
> 
> 标签：ios, ipad, uitableview, uisearchbar

我有 `UITableViewController`一个`UISearchBar`作为`tableHeaderView`它的`tableView`。我也有一个`UISearchDisplayController`初始化为 that `UISearchBar`as its`searchBar`和 that `UITableViewController`as its `contentsController`。到目前为止一切顺利，几乎一切正常。

问题是`UITableView`具有`accessoryType`设置为的单元格`UITableViewCellAccessoryDetailDisclosureButton`。这是发生的事情：

1.  首先，一切看起来都应该：
    ![在此处输入图像描述](../Images/1af19e78e3fb014376a36e38f02c2039.png)
2.  用户在`UISearchBar`.
3.  在主`UISearchDisplayController`表顶部创建深色覆盖，并使主表的索引（如，`sectionIndexTitlesForTableView`）消失。
4.  假设此时用户隐藏了键盘（通过按 iPad 标准键盘上的“隐藏键盘”按钮）
5.  由于用户尚未在其中输入任何内容`UISearchBar`，我们仍然可以看到主表，尽管位于由`UISearchDisplayController`.
6.  键盘的隐藏暴露*了更多*的主表，导致主表加载更多的单元格。
7.  现在问题来了：**由于这些单元格是在主表的索引被隐藏时加载的，所以显示按钮显示得太靠右了（至少，与其他单元格相比）。**
    ![在此处输入图像描述](../Images/482443e6514289bc7aba7906482b02ec.png)
8.  此外，当用户现在取消搜索时，这些单元格可能不会重新加载，从而导致披露按钮显示在索引下方（现在再次可见）。
    ![在此处输入图像描述](../Images/256c2530d5a3cbcffa5ebcfbba4aeb7a.png)

我不知道如何解决这个问题；我能想到的唯一选择是找到与公开按钮相对应的 UIView 并手动移动它，但这似乎令人难以置信，因为即使发现 UIView 也[需要一个讨厌的 hack](https://stackoverflow.com/questions/2876041/can-a-standard-accessory-view-be-in-a-different-position-within-a-uitableviewcel)。任何有关如何以更好的方式解决此问题的建议将不胜感激！

**最小可运行示例**

下面是一个最小的例子。只需启动一个新的 XCode 项目，启用 ARC，仅限 iPad，并将 AppDelegate 的内容替换为以下内容。请注意，为了最小的示例，我强制主表重新加载其单元格`searchDisplayController:willShowSearchResultsTableView`，否则主表将缓存其单元格并且问题不会显示（在我的实际应用程序中，主表正在重新加载其单元格出于其他原因，我不完全确定为什么——但当然，主表可以随时重新加载单元格。）

要查看发生的问题，请运行代码，在搜索框中输入一些内容（您将看到“搜索结果 0 .. 5”），然后取消搜索。主表的显示按钮现在显示在索引下方，而不是旁边。

下面只是代码：

```
@interface AppDelegate ()

@property (nonatomic, strong) UITableViewController* mainTableController;
@property (nonatomic, strong) UISearchDisplayController* searchDisplay;

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Override point for customization after application launch.

    UITableViewController* tableViewController = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];

    UITableView* tableView = [tableViewController tableView];
    [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];
    [tableView setDataSource:self];
    [self setMainTableController:tableViewController];

    UISearchBar* searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 0, 44)]; // Width set automatically
    [tableView setTableHeaderView:searchBar];

    UISearchDisplayController* searchDisplay = [[UISearchDisplayController alloc] initWithSearchBar:searchBar
                                                                                 contentsController:tableViewController];
    [searchDisplay setSearchResultsDataSource:self];
    [searchDisplay setDelegate:self];
    [self setSearchDisplay:searchDisplay];

    [[self window] setRootViewController:tableViewController];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (tableView != [[self searchDisplay] searchResultsTableView]) {
        return 26;
    } else {
        return 1;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView != [[self searchDisplay] searchResultsTableView]) {
        return 10;
    } else {
        return 5;
    }
}

- (void)searchDisplayController:(UISearchDisplayController *)controller willShowSearchResultsTableView:(UITableView *)tableView {
    // The problem arises only if the main table view needs to reload its data
    // In this minimal example, we force this to happen
    [[[self mainTableController] tableView] reloadData];

    [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"SearchCell"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView != [[self searchDisplay] searchResultsTableView]) {
        UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

        [[cell textLabel] setText:[NSString stringWithFormat:@"%c%d", 'A' + [indexPath section], [indexPath row]]];
        [cell setAccessoryType:UITableViewCellAccessoryDetailDisclosureButton];

        return cell;
    } else {
        UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:@"SearchCell" forIndexPath:indexPath];

        [[cell textLabel] setText:[NSString stringWithFormat:@"Search result %d", [indexPath row]]];
        [cell setAccessoryType:UITableViewCellAccessoryDetailDisclosureButton];

        return cell;
    }
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    if (tableView != [[self searchDisplay] searchResultsTableView]) {
        return [NSArray arrayWithObjects:@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", nil];
    } else {
        return nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:36:15.440

如果您希望模仿 Apple 自己的应用程序在这些情况下的行为方式，那么正确的操作过程将是导致详细信息披露按钮在开始搜索时**全部**向右移动，然后再次全部向后移动一次搜索完成。

在您的示例中，我通过在您的代码中添加的两种方法调用`reloadData`您的主表视图来实现这一点：`UISearchDisplayDelegate`

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
{
    [[[self mainTableController] tableView] reloadData];
}

- (void)searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller
{
    [[[self mainTableController] tableView] reloadData];
} 
```

这将迫使您重新定位详细披露视图以考虑表视图索引的可见性，无论是否在搜索模式下，都保持所有披露指标的位置彼此一致。

**更新**

我玩弄过用其他`UISearchDisplayDelegate`方法重新加载表格视图，包括：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didLoadSearchResultsTableView:(UITableView *)tableView
- (void)searchDisplayController:(UISearchDisplayController *)controller willUnloadSearchResultsTableView:(UITableView *)tableView 
```

但是这些会产生相当不和谐的效果，细节披露按钮的位置会突然跳动，所以我推荐前面提到的`willBeginSearch`and方法。`willEndSearch`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:46:48.660

该问题不仅限于具有节索引标题的表。我在部分标题标题方面遇到了类似的问题。如果你添加

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if (tableView != [[self searchDisplay] searchResultsTableView]) {
        return [NSString stringWithFormat:@"Section %c", 'A' + section];
    } else {
        return nil;
    }
} 
```

到您的“最小可运行示例”程序，然后您会观察到，一旦重新加载主表视图，部分标题标题也会出现在搜索表视图中。（这里报告了同样的问题：[Removing Header Titles from a UITableView in Search Mode](https://stackoverflow.com/questions/12201263/removing-header-titles-from-a-uitableview-in-search-mode)。）

我知道的唯一解决方案是避免对主表视图的所有更新，只要搜索显示控制器处于活动状态（`[self.searchDisplay isActive] == YES`）并仅在卸载搜索表时重新加载主表视图：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller  willUnloadSearchResultsTableView:(UITableView *)tableView {
        [[[self mainTableController] tableView] reloadData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:32:28.257

我能想到的最简单，也可能是最简洁的方法是告诉您的视图控制器（或视图）监听键盘事件。然后，当键盘最小化时，您退出搜索栏的第一响应者并重新加载您的 tableview（如果它还没有正确重新加载它）。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        //Your code here

        // register for keyboard notifications
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWillShow:)
                                                     name:UIKeyboardWillShowNotification
                                                   object:self.window];
        // register for keyboard notifications
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWillHide:)
                                                     name:UIKeyboardWillHideNotification
                                                   object:self.window];
    }
    return self;
}

-(void)dealloc
{

    [[NSNotificationCenter defaultCenter] removeObserver:self name: UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name: UIKeyboardWillHideNotification object:nil];
} 
```

然后添加这两个函数并在其中做你需要的。

```
- (void)keyboardWillHide:(NSNotification *)aNotification
{
    //searchbar resignFirstResponder

    //Tableview reload (if needed)
}

- (void)keyboardWillShow:(NSNotification *)aNotification
{
    //Don't really need this one for your needs
} 
```

由于您要在keyboardwillhide 函数中辞去第一响应者（在键盘开始移动之前），因此您的tableview 单元格应该正确重新加载，而无需再次重新加载它们。

# android - 视图动画与另一个视图动画交互

> ID：14610292
> 
> 赞同：0
> 
> 时间：2013-01-30T17:40:56.510
> 
> 标签：android, android-animation

我有 2 个图像视图（一个用于笔图像的图像视图和一个用于线条的图像视图，两者都是可绘制的），每个都有自己的视图动画，效果很好。我的问题是，当我开始画笔的动画时，我希望它在另一个视图动画中交互并动画绘制线条（我希望它会在笔画线时显示），我该怎么做?

我用于笔 imageview 动画的 xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate 
    android:fromXDelta="0%p" 
    android:toXDelta="100%p" 
    android:fromYDelta="-50%p"
    android:toYDelta="-50%p"
    android:duration="2000"/>
</set> 
```

我用于线 imageview 动画的 xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:pivotX="0%"
    android:pivotY="50%"
    android:fromXScale="0%"
    android:toXScale="100%"
    android:fromYScale="1.0"
    android:toYScale="1.0"
    android:fillAfter="true"
    android:duration="2000"
    android:interpolator="@android:anim/linear_interpolator"
    /> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T12:33:32.003

我相信这可以在[animationListener](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)的帮助下完成。为笔的动画添加一个animationListener。在 onAnimationStart 方法中做`lineImage.startAnimation(lineAnimation);`

样本：

```
penAnimation.setAnimationListener(new Animation.AnimationListener() {
@Override
public void onAnimationStart(Animation animation) {
    lineImage.startAnimation(lineAnimation);
}

@Override
public void onAnimationEnd(Animation animation) {

}

@Override
public void onAnimationRepeat(Animation animation) {

}
}); 
```

# java - 转义 HTTP 标头

> ID：14610294
> 
> 赞同：2
> 
> 时间：2013-01-30T17:40:57.307
> 
> 标签：java, http-headers, escaping

我想知道是否存在包含转义 HTTP 标头属性的方法的 Java 库？我想防止注射，我想知道是否已经存在某些东西，而不是尝试自己动手。

# load - 从 EMF 模型加载 XMI 资源时发生 ClassCastException

> ID：14610295
> 
> 赞同：1
> 
> 时间：2013-01-30T17:40:58.033
> 
> 标签：load, persist, emf, xmi

我想加载一个之前从 Eclipse 插件环境中持久化的 EMF 模型资源。我尝试如下。

```
// obtain a new resource set

ResourceSet resSet = new ResourceSetImpl();

// get the resource 

resSet.getResource(URI.createURI(location), true); 
```

`location`是相对于平台的路径，例如 platform:/resource/Project/default.mymodel

当我尝试使用获取资源时，`URI.createURI(...)`我得到`ClassCastException`：“MymodelFactoryImpl 无法转换为 org.eclipse.emf.ecore.resource.Resource$Factory”。

我无法解释这一点。有人能帮帮我吗？

我已经试过了`URI.createFileURI(location)`。这会导致`IllegalArgumentException`：“无效的相对路径名”。

问候

堆栈跟踪如下所示。java.lang.ClassCastException：de.uka.ipd.sdq.pcm.usagemodel.impl.UsagemodelFactoryImpl 无法在 org.eclipse.emf.ecore.resource.impl 中转换为 org.eclipse.emf.ecore.resource.Resource$Factory .ResourceFactoryRegistryImpl.convert(ResourceFactoryRegistryImpl.java:94) 在 org.eclipse.emf.ecore.resource.impl.ResourceSetImpl$2.delegatedGetFactory(ResourceSetImpl.java:458) 在 org.eclipse.emf.ecore.resource.impl.ResourceFactoryRegistryImpl。 getFactory(ResourceFactoryRegistryImpl.java:145) at org.eclipse.emf.ecore.resource.impl.ResourceFactoryRegistryImpl.getFactory(ResourceFactoryRegistryImpl.java:86) at org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.createResource(ResourceSetImpl. java:431) 在 org.eclipse.emf.ecore.resource.impl.ResourceSetImpl.demandCreateResource(ResourceSetImpl.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:01:37.997

这应该不是必需的，因为插件环境会为您完成，但尝试注册资源工厂：

```
resourceSet.getResourceFactoryRegistry().getExtensionToFactoryMap().put(fileExtension, new ModelResourceFactoryImpl()); 
```

`fileExtension`要加载的资源的文件扩展名在哪里，`ModelResourceFactoryImpl`应该是生成的扩展类`ResourceFactoryImpl`。

但是，删除以下代码后，可以加载模型。

```
// Register the XMI resource factory for my extension
Resource.Factory.Registry reg = Resource.Factory.Registry.INSTANCE;
Map<String, Object> m = reg.getExtensionToFactoryMap();
m.put("myextension", new XMIResourceFactoryImpl()); 
```

看来这不是正确的注册。

# eclipse - How to build JGit in Eclipse (dependency errors)

> ID：14610302
> 
> 赞同：0
> 
> 时间：2013-01-30T17:41:08.140
> 
> 标签：eclipse, jgit

I'm trying to build the latest version of [JGit](http://eclipse.org/jgit/). I checked out the latest version from the Git repository. According to the [build instructions](http://wiki.eclipse.org/EGit/Contributor_Guide), I installed the [dependencies](http://wiki.eclipse.org/EGit/Contributor_Guide#Option_2%3a_Install_from_Orbit_P2_Repository) via Orbit. I then ran `mvn clean install` which was able to compile everything and run all the tests. So this was great, there were no errors, and I can find the compiled .jar files.

I then opened Eclipse and imported the projects into a working set. For some reason, there are numerous errors in the build process.

Imports cannot be resolved:

```
import org.apache.commons.compress.archivers.ArchiveOutputStream;
import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;
import org.apache.commons.compress.archivers.tar.TarConstants;
import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;
import org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream; 
```

And more cannot be resolved:

```
import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.Response; 
```

I tried installing Jetty via Eclipse (Install New Software). However, that did not resolved the issue.

Am I just not supposed to build JGit in Eclipse? All builds and testing should be done with Maven? I'm also confused as to why Jetty and Apache are being imported in some of these subprojects for JGit and they're not listed as dependencies of JGit on the wiki.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:23:27.897

The Jetty and Compress libraries are used by part of the JGit infra, but the EGit support in Eclipse doesn't need everything that JGit has.

For example, JGit also provides a collection of command-line programs (jgit init, jgit add etc.) which are not used in Eclipse. So you need to build the 'pgm' module from MAven, but that in itself isn't used by EGit which is the UI in Eclipse. Similarly, the JGit HTTP server is useful but not required for EGit operation.

I believe the archivers are used to extract out tools via the pgm module for 'jgit archive', which extracts out the contents of a branch and generates a Zip or TGZ file on the fly.

If you don't want (or need) the pgm module (and i'd suggest possibly also avoiding the iplog as well) then you can uncomment those from the list of modules in the pom.xml file. Removing the http.server (and http.test) along with the pgm modules will probably allow you to compile without needing the Jetty and Apache compress modules.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:55:00.070

The easiest way to install the dependencies is to use one of the target platforms, as described in [Use a Target Platform](http://wiki.eclipse.org/EGit/Contributor_Guide#Option_1%3a_Use_a_Target_Platform). It includes all dependencies.

As for installing from the Orbit P2 repository, the listing there was incomplete. You also need to install "Apache Commons Compress", see updated instructions:

[http://wiki.eclipse.org/EGit/Contributor_Guide#Option_2:_Install_from_Orbit_P2_Repository](http://wiki.eclipse.org/EGit/Contributor_Guide#Option_2:_Install_from_Orbit_P2_Repository)

Jetty can not be installed from Orbit, see here for instructions:

[http://wiki.eclipse.org/EGit/Contributor_Guide#JGit_HTTP_Tests](http://wiki.eclipse.org/EGit/Contributor_Guide#JGit_HTTP_Tests)

Or again, use the target platform where Jetty is also included.

# google-chrome-extension - 在 chrome 扩展中动态启用/禁用上下文菜单

> ID：14610303
> 
> 赞同：2
> 
> 时间：2013-01-30T17:41:09.180
> 
> 标签：google-chrome-extension

我正在开发一个 Chrome 扩展程序，我希望有一个上下文菜单，但它只出现在一些非常特定的元素上（例如大于特定宽度和高度的图像）。查看文档，我只能找到非常有限的过滤选项。

我尝试在 oncontextmenu 事件中添加/删除上下文菜单并禁用/启用它，但这并不能立即起作用。上下文菜单直到下次使用时才会更新，但这不是很有用。

任何想法将不胜感激。

# c# - 将 EnumMatchToBooleanConverter 添加到我的 xaml 文件时出现问题

> ID：14610305
> 
> 赞同：1
> 
> 时间：2013-01-30T17:41:10.347
> 
> 标签：c#, wpf, xaml, visual-studio-2012, wpf-controls

我正在尝试遵循[此单选按钮教程](http://wpftutorial.net/RadioButton.html)

我创建了一个名为 EnumMatchToBooleanConverter 的类，它位于我的 wpf 项目的顶层。它说将内部放置在一个 window.resources 中，如下所示：

```
<Window.Resources>
  <EnumMatchToBooleanConverter x:Key="enumConverter" />
</Window.Resources> 
```

我在用户控件中使用它，所以我把它放在了一个堆栈面板中：

```
<StackPanel.Resources>
  <EnumMatchToBooleanConverter x:Key="enumConverter" />
</StackPanel.Resources> 
```

我有 Microsoft Visual Studio Ultimate 2012，它给了我一个错误：

> Windows Presentation Foundation (WPF) 项目不支持 EnumMatchToBooleanConverter。

关于我做错了什么的任何想法？我不允许将它放在 stackpanel.resources 中吗？

我只是试着把它放在一个 grid.resources

```
<Grid.Resources>
  <EnumMatchToBooleanConverter x:Key="enumConverter" />
</Grid.Resources> 
```

它说

> 找不到类型“EnumMatchToBooleanConverter”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。

好吧，它与我的项目的其余部分在同一个命名空间中，所以我不确定为什么它没有找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:04:13.867

改变

```
<EnumMatchToBooleanConverter x:Key="enumConverter" /> 
```

为了

```
<local:EnumMatchToBooleanConverter x:Key="enumConverter" /> 
```

您在 XAML 中引用的所有非内置类都必须以相应的 xmlns 前缀作为前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:04:53.663

HighCore 做对了。只是为了添加到这个命名空间讨论中，我想我会指出另一种方法，可以帮助使代码更具可读性或帮助您诊断某些控件/值转换器/等的来源（即它们真正来自哪个程序集）。这种技术可以让您的 XAML 看起来就像 Christian 在他的博客中所拥有的一样（*没有*xmlns 前缀）：

```
<EnumMatchToBooleanConverter x:Key="enumConverter" /> 
```

本质上，您执行一些命名空间映射来整合[**这样**](https://stackoverflow.com/a/8682039/718325)的命名空间（仅当文件位于不同的程序集/项目中时才有效）。因此，在我上面的示例中，您已将命名空间之一映射到默认 xmlns，因此您不需要 XAML 中的任何前缀。

我仍在试图弄清楚这项技术能走多远，[**Paul Stovell**](http://www.paulstovell.com/xmlnsdefinition)谈到将其发挥到极致，就像我在上面展示的那样。

即使您最终没有将它应用到那个程度，如果您正在查看其他人的 Xaml 并且他们已经应用了这样的映射，了解它可能会派上用场。知道这会提醒您查找 AssemblyInfo.cs 文件并检查映射，并可能帮助您追踪 Control/Value Converter/etc 的实际位置。

# php - Spl、ArrayObject、ArrayObject::STD_PROP_LIST

> ID：14610307
> 
> 赞同：29
> 
> 时间：2013-01-30T17:41:19.757
> 
> 标签：php, spl, arrayobject

我试图理解文档中的 STD_PROP_LIST 常量，但到目前为止我不明白，也没有找到任何解释:( 文档有以下示例：

```
$a = new ArrayObject(array(), ArrayObject::STD_PROP_LIST);
$a['arr'] = 'array data';                             
$a->prop = 'prop data';                               
$b = new ArrayObject();                                   
$b['arr'] = 'array data';                             
$b->prop = 'prop data';                               

// ArrayObject Object                                     
// (                                                      
//      [prop] => prop data                               
// )                                                      
print_r($a);                                              

// ArrayObject Object                                     
// (                                                      
//      [arr] => array data                               
// )                                                      
print_r($b); 
```

两张照片都给了我相同的确切结果：

```
ArrayObject Object ( [prop] => prop data [storage:ArrayObject:private] => Array ( [arr] =>      array data ) ) 
ArrayObject Object ( [prop] => prop data [storage:ArrayObject:private] => Array ( [arr] => array data ) ) 
```

任何人都可以帮助我理解使用这个常量有什么区别？

提前致谢！

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-05-17T23:21:07.753

`ArrayObject`和`ArrayIterator`是两个非常相似的类。它们实际上都在 php 核心内部共享大量代码。这两个类有一个内部数组来存储您设置给这些类的元素。

`STD_PROP_LIST`告诉我们如何阅读，并`ARRAY_AS_PROPS`告诉我们如何编写这些元素。首先，通过标准数组 ( `[]`) 表示法设置元素将始终以相同的方式工作，无论这些设置如何。

设置`ARRAY_AS_PROPS`标志时，这意味着当您设置属性时（通过`->`），不会像您对常规对象所期望的那样在对象上设置属性，而是将其存储为内部元素。如果未设置此标志，它将将该属性存储到实际的数组对象或数组迭代器中，这就是您在示例的代码输出中看到的内容：“ `prop => propdata`”不在内部`storage:ArrayObject:private`，情况就是这样如果`ARRAY_AS_PROPS`设置了标志：

```
$a = new ArrayObject();
$a['arr'] = 'array data';
$a->prop = 'prop data';

$b = new ArrayObject(array(), ArrayObject::ARRAY_AS_PROPS);
$b['arr'] = 'array data';
$b->prop = 'prop data';

print_r($a);
print_r($b);

// Output:
ArrayObject Object
(
    [prop] => prop data
    [storage:ArrayObject:private] => Array
        (
            [arr] => array data
        )
)
ArrayObject Object
(
    [storage:ArrayObject:private] => Array
        (
            [arr] => array data
            [prop] => prop data
        )
) 
```

`STD_PROP_LIST`决定在某些条件下返回什么，尤其是在`var_dump()`. 虽然还会有其他情况，但我自己还没有找到。如果`STD_PROP_LIST`设置了，它将返回已设置到您的`ArrayObject`, 或`ArrayIterator`类的属性。如果未设置，`var_dump()`则将返回已存储的内部元素列表。

实际的文档不是 100% 正确的`STD_PROP_LIST`。此标志影响`var_dump()`，但不影响`foreach()`。使用 时`foreach()`，它将始终迭代内部元素，而不是实际属性，即使`STD_PROP_LIST`已设置。

这两个标志不是互斥的：您可以设置两个标志，但这样做没有多大意义：这意味着属性始终作为内部元素添加（`ARRAY_AS_PROPS`），我们希望通过`var_dump`（`STD_PROP_LIST`）返回标准属性。由于无法设置属性，因此在这种情况下它将始终返回一个空列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T12:02:45.287

A great answer by @JayTaph but `print_r` is more like a debug function. To actually use the arrays in for instance a `foreach` it becomes clear that the both differ significantly:

```
$a = new ArrayObject();
$a['arr'] = 'array data';
$a->prop = 'prop data';

$b = new ArrayObject(array(), ArrayObject::ARRAY_AS_PROPS);
$b['arr'] = 'array data';
$b->prop = 'prop data';

echo "\$a:<br>\n";
foreach( $a as $key=> $value) {
  printf( "[%s] : %s<br>\n", $key, $value);
}

echo "\$b:<br>\n";
foreach ($b as $key => $value) {
  printf("[%s] : %s<br>\n", $key, $value);
} 
```

will output:

```
$a:
[arr] : array data
$b:
[arr] : array data
[prop] : prop data 
```

# apache - simple mod_rewrite q...解决方案也简单吗？

> ID：14610308
> 
> 赞同：1
> 
> 时间：2013-01-30T17:41:21.003
> 
> 标签：apache, mod-rewrite, redirect

我在这里和整个互联网上查看了许多示例，但我似乎找不到我理解的答案，或者准确地解决了我的问题。我希望在 .htaccess 文件中实现一个 mod_rewrite 指令，该文件将文件夹重命名为另一个名称，但不在 url 栏中显示该名称。

例如（用户单击指向他们的链接）：

```
theSite.com/folder1/folder2/folder3/ 
```

我想让他们看到（同上）

```
theSite.com/folder1/folder2/folder3/ 
```

但我希望浏览器在此目录中静默运行

```
theSite.com/folder1/some_other_folder/folder3/ 
```

我是一名 PHP 开发人员，正在编写我的第一个 Web 应用程序。我可以配置 apache、PHP、mysql 并像专业人士一样使用它们。对不起，我不明白 mod_rewrite 的语法。尽管查看了许多教程，但我似乎无法掌握它，因为我需要先提出问题才能进入下一个概念。感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:00:12.793

我会使用以下

```
RewriteRule /folder1/folder2/folder3/ /folder1/some_other_folder/folder3/  [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:50:17.067

你的案子很普通。您只需要匹配静态字符串，加上 a`(.*)`以匹配它后面的所有内容并将其存储到`$1`，然后替换`some_other_folder`。

该`[L]`标志（以及没有该`[R]`标志）指示 Apache 在内部重写而不重定向浏览器，并在不匹配进一步规则的情况下停止。

```
RewriteEngine On
RewriteRule ^folder1/folder2/folder3(.*)$ folder1/some_other_folder/folder3$1 [L] 
```

如果`folder3`它本身是“动态”部分的一部分，也就是说，后面的任何内容都`folder2`应该被默默地重写为`some_other_folder`，`folder3`则排除规则，只捕获后面的所有`folder2`内容`$1`。

```
RewriteEngine On
RewriteRule ^folder1/folder2/(.*)$ folder1/some_other_folder/$1 [L] 
```

# android - 更新 imageView 不是好的

> ID：14610309
> 
> 赞同：0
> 
> 时间：2013-01-30T17:41:24.543
> 
> 标签：android, image

我尝试使用按钮更新我的 imageiew

```
private void visitUpdateImage(int type) {

if(type == 0){
    if(ecran != 1){
        ecran--;
    }
}
else if(type == 1){
    if(ecran != nbEcrans){
        ecran++;
    }
}

int[] images = new int[nbEcrans];
images[0] = R.drawable.ecran1;
images[1] = R.drawable.ecran2;
images[2] = R.drawable.ecran3;
images[3] = R.drawable.ecran4;
images[4] = R.drawable.ecran5;
images[5] = R.drawable.ecran6;
images[6] = R.drawable.ecran7;

ImageView image = (ImageView) findViewById(R.id.imageView);

image.setImageResource(images[ecran - 1]);

System.out.println(ecran); 
```

}

开始是好的，但图像[5] il 加载 ic_launcher 而不是 ecran6 并且图像[6] 什么也不加载

我所有的可绘制存储库中都有我所有的 ecrans

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:49:00.863

只是猜测（您的条件错误）使用：

```
if(type == 0){
    if(ecran != 0){ //min is 0
        ecran--;
    }
}
else if(type == 1){
    if(ecran != nbEcrans-1){ //max is nbEcrans-1
        ecran++;
    }
} 
```

# asp.net - MVC 防伪令牌验证 - 随机错误

> ID：14610311
> 
> 赞同：4
> 
> 时间：2013-01-30T17:41:34.657
> 
> 标签：asp.net, asp.net-mvc-3

我有一个 MVC 3.0 应用程序。在生产中，我们随机收到一个异常，提示“未提供所需的防伪令牌或无效”。这不会发生在每个用户身上，因此可以肯定地说防伪令牌过程设置正确。但是，某些用户每次登录我们的网站时都会发生这种情况。他们登录，单击生成正在验证的帖子的链接，验证失败，他们得到我们的错误页面，他们点击返回，再次发布，一切都很好。

我完全不知道发生了什么。

我查看了 MVC 源代码，发现有几个地方会抛出描述为“未提供所需的防伪令牌或无效”的异常。第一个是在 AntiForgeryDataSerializer.cs 中反序列化令牌时。不过，这不是我们的问题所在，因为在这种情况下，抛出异常并带有描述实际序列化问题的内部异常。我们正在记录内部异常，在这种情况下我们没有记录。

引发此异常的另一个地方是 AntiForgeryWorker.cs 中的 Validate 方法。在这里，异常是在没有内部异常的情况下引发的，所以问题一定出在这段代码的某个地方。它看起来像这样：

```
public void Validate(HttpContextBase context, string salt) {
    Debug.Assert(context != null);

    string fieldName = AntiForgeryData.GetAntiForgeryTokenName(null);
    string cookieName = AntiForgeryData.GetAntiForgeryTokenName(context.Request.ApplicationPath);

    HttpCookie cookie = context.Request.Cookies[cookieName];
    if (cookie == null || String.IsNullOrEmpty(cookie.Value)) {
        // error: cookie token is missing
        throw CreateValidationException();
    }
    AntiForgeryData cookieToken = Serializer.Deserialize(cookie.Value);
    string formValue = context.Request.Form[fieldName];
    if (String.IsNullOrEmpty(formValue)) {
        // error: form token is missing
        throw CreateValidationException();
    }
    AntiForgeryData formToken = Serializer.Deserialize(formValue);
     if (!String.Equals(cookieToken.Value, formToken.Value, StringComparison.Ordinal)) {
            // error: form token does not match cookie token
            throw CreateValidationException();
        }

        string currentUsername = AntiForgeryData.GetUsername(context.User);
        if (!String.Equals(formToken.Username, currentUsername, StringComparison.OrdinalIgnoreCase)) {
            // error: form token is not valid for this user
            // (don't care about cookie token)
            throw CreateValidationException();
        }

        if (!String.Equals(salt ?? String.Empty, formToken.Salt, StringComparison.Ordinal)) {
            // error: custom validation failed
            throw CreateValidationException();
        }
    } 
```

其中之一是抛出异常。我没有使用盐，所以会扔掉最后一个。我查看了 IIS 日志，我看到了 cookie，并不是 cookie 丢失了。因此，要么缺少表单值（我认为不太可能），要么值不匹配，要么用户名不匹配。我不知所措。我无法重现这个，所以我真的无法调试。这似乎一遍又一遍地发生在同一个用户身上，但我无法想出他们正在做什么的模式。他们必须启用 cookie 才能登录我们的网站才能达到这一点，所以这不是问题。用户将在 8-10 秒内登录、发布表单并收到错误消息。然后他们似乎在看到我们的错误页面后点击了返回按钮，再次尝试发布，这很好。

关于下一步如何进行的任何想法？

# jquery - JQuery .on('keydown',...) 没有触发新元素

> ID：14610312
> 
> 赞同：10
> 
> 时间：2013-01-30T17:41:35.137
> 
> 标签：jquery

我查看了一些相关的问题，但没有一个能帮助我弄清楚我的问题。

我有自己的从头开始构建的动态数据网格表单，可以添加/删除数据行和字段列等。我正在尝试提高可用性，以便按下回车键将创建一个新的字段列并关注它。到目前为止，这是执行此操作的代码：

```
$('#data_fields').on('keydown','._field',function(e){
    if(e.which==13)
    {
        $('#addfield').click();
        var o=$(this).parent().parent();
        var l=$(o).children().length-2;
        var f=$(o).find("td:eq("+l+")").find("._field");
        $(f).focus();
    }
}); 
```

`#addfield`是一个在单击时添加字段列的按钮。

`._field`是一个输入框，其中写入了字段的名称。

`#data_fields`是一个 tr，其中包含带有`._field`输入框的单元格。

但是，`._field`新列中的输入框不具备特殊的超元素 keydown 功能。更重要的是，如果我将`('#data_fields')`选择器更改为`.on()`to `(document)`，它甚至不会为当前元素提供 keydown 回调。

这是 HTML，抱歉有点乱，但我在 PHP 和其他东西中使用模板：

```
<thead id="doc_fields">
  <tr id="delrow">
  <tr id="data_fields">
    <td style="padding:2px"><input class="_field" type="text" onkeyup="sync_doc_table();" onchange="sync_doc_table();" style="width:90%" value="" name="Fields[]"></td>
    <td style="padding:2px"><input class="_field" type="text" onkeyup="sync_doc_table();" onchange="sync_doc_table();" style="width:90%" value="b" name="Fields[]"></td>
    <td style="padding:2px"><input type="text" style="width:90%" value="" name="Fields[]" onchange="sync_doc_table();"></td>
    <td style="padding:2px"><input type="text" style="width:90%" value="" name="Fields[]" onchange="sync_doc_table();"></td>
    <td id="addcol" class="midi" style="width:25px" rowspan="3">
      <a id="addfield" onclick="inscol('#addcol','<td style=\'padding:2px\'><input onchange=\'sync_doc_table();\' type=\'text\' name=\'Fields[]\' value=\'\' style=\'width:90%\' /></td>');addcol('#typerow','<td><select name=\'Type[]\' style=\'width:91%\'><option value=\'integer\'>integer</option><option value=\'double\'>double</option><option value=\'string\' selected=\'selected\'>string</option></select></td>');addcol('#delrow','<td class=\'center _delly\'><a href=\'#\' onclick=\'del_doc_field($(this).parent());return false;\'><img src=\'/images/icons/x.png\' alt=\'[Del]\' /></a></td>');$('._colsp').attr('colspan', $('#addrow').attr('colspan') + 1);$('<td><input type=\'text\' name=\'Data[][]\' value=\'\' style=\'width:90%\' /></td>').insertBefore('.datarow ._delly');return false;" href="#">
    </td>
  </tr>
  <tr id="typerow">
</thead> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T21:58:44.350

据我所知，这是因为您附加的输入类中没有`_field`类。

# java - 在java中找到两个多重集的交集

> ID：14610317
> 
> 赞同：0
> 
> 时间：2013-01-30T17:41:43.247
> 
> 标签：java

```
 for(i=0;i<m1.length();i++)
             for(j=0;j<m2.length();j++)
                 if(m1.charAt(i)==m2.charAt(j)){
                     intersection=intersection+m1.charAt(i); 
                     m2.charAt(j)=' ';

                 }

                    System.out.println(intersection);

         } while(devam==false);

    }

} 
```

那是我的代码。而且我们**不允许使用方法或数组**，我们只是初学者。我的代码在 `m2.charAt(j)=' ';`. 我写那行是因为，当我们找到一个交叉点时，我们不应该再次检查那个元素。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:58:16.373

正如 Brian 所说，Java 中的字符串是不可变的。这意味着您不能通过像 . 这样的方法调用进行分配`m2.charAt(j)=' '`。这意味着您必须使用另一种方式来跟踪您是否已经找到该角色。

您可以将它添加到并在检查字符时使用`intersection`确保它不在，如果返回 -1 则它不在字符串中。`intersection``intersection.indexOf(char c)`

编辑：

抱歉没有考虑到输出应该是一个多集。如果输出是一个集合，上面解决了这个问题。

你可以`replaceFirst(String searchFor, String replacement)`在你的 m2 上使用来删除它。它会是这样的：

```
 for( int i =0; i < m1.length(); i+=2)
    {
       if(m2.indexOf(m1.charAt(i)) != -1)
       {
          intersection = intersection + m1.charAt(1) + " ";
          m2 = m2.replaceFirst(new String(m1.charAt(i)), "");
       }
    } 
```

因此，如果 m1 = '1 1 2 3 5' 且 m2 = '1 4 2 1'，

第一遍：在 '1 4 2 1' 中查找 1

第二遍：在 '4 2 1' 中查找 1

第三遍：在 '4 2' 中寻找 2

第四遍：在 '4' 中寻找 3

第五遍：在 '4' 中寻找 5

返回“1 1 2”

请注意，它会将变量增加 2 以考虑空格。仅当我们假设**这**两个字符串的形式为“aaaaaa a”时，“a”只是一个字符。如果有数字或字符长度超过一个数字，那么您必须跳过空格并以不同的方式解释字符串，而不仅仅是逐个字符地查看它。

如果我们可以做出这些假设，那么明智的做法是在执行此循环之前使用 String`trim`方法修剪 m1 的尾随和前导空格。`m1 = m1.trim()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:01:25.887

您不能修改字符串的内容

```
m2.charAt(j)=' '; 
```

改为这样做

```
m2 = m2.replace(m2.charAt(j), ' '); 
```

请注意，replace() 将替换字符串中等于第一个参数的第一个字符。我假设，既然字符串代表一个集合，就不会出现重复的字符。如果有并且您想替换所有这些，只需使用 replaceAll() 代替。

# c++ - Eclipse 说错误但没有错误

> ID：14610325
> 
> 赞同：3
> 
> 时间：2013-01-30T17:42:00.330
> 
> 标签：c++, c, eclipse, eclipse-juno

在*运行**X.exe**（**播放**按钮）*操作结束时，Eclipse 会询问*项目中是否存在错误。继续发射？*但是没有红色，项目中没有错误，它也编译了项目。此外，如果我说是，它会启动新编译的可执行文件而没有错误。

在*构建项目（扳手按钮）*操作结束时，它不会**说**发现***错误***并且编译成功。

随着项目的发展，这种情况突然开始发生。

使用 Windows 和 MinGW 4.7.2。

**编辑**

*阅读评论*

现在错误已经改变。它说*所需项目中存在错误。继续推出？**但是它仍然编译成功，并且在Problems display* 中仍然没有错误。

# javascript - 服务器上的脚本以与客户端 Javascript 交互

> ID：14610330
> 
> 赞同：0
> 
> 时间：2013-01-30T17:42:22.000
> 
> 标签：javascript, ajax, shell, client-server

我目前有一个 javascript 库，它使用 JSON 文件以交互方式在屏幕上打印它们。(::我们正在使用 D3JS 库)

当我们在客户端上时，我们可以轻松地删除、编辑和创建一些节点，这些节点每 5-10 秒在 JSON 中更新一次。

问题来自两个主要事实：

*   首先，如果我们在屏幕上已经显示的数据上做一些事情，那么每隔 x 秒调用一次的自动函数可能会导致数据损坏。
*   然后，该项目已经完成，以允许 5 个人一起互动。当它们出现在同一个会话中时，我们不能体面地让它们每 5 秒刷新一次，这会导致很多开销并且不能避免数据损坏。

我们主要考虑了仅使用 javascript 和一些 AJAX 制作的解决方案，但我们意识到应该重新考虑使用触发器通知客户端数据不再正常。

我们目前正在考虑在服务器上打开一个脚本，以便为每个客户端分配一个 ID。

目标是检测对 JSON 文件（在服务器上）所做的修改。但是我们卡住的地方是：

1）是否有最好的脚本语言来交互服务器/网络？2）我们应该使用哪种类型的东西来让客户更新他们的数据？（插座对吗？）

关于第二点，最简单的方法是调用 JS 函数，因为我们不知道 shell 代码给出的可能性......

很抱歉，我们是快乐的开发者，但可能没有足够的技能来解决这个问题。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:46:56.347

您可以使用带有新 WebSocket 功能的纯 javascript 来实现这一点。

[http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

编辑：

WebSocket 是一种通过单个 TCP 连接提供全双工通信通道的 Web 技术。W3C 正在对 WebSocket API 进行标准化，而 IETF 已将 WebSocket 协议标准化为 RFC 6455。

WebSocket 旨在在 Web 浏览器和 Web 服务器中实现，但它可以被任何客户端或服务器应用程序使用。WebSocket 协议是一个独立的基于 TCP 的协议。它与 HTTP 的唯一关系是它的握手被 HTTP 服务器解释为升级请求。 [1] WebSocket 协议使浏览器和网站之间的更多交互成为可能，促进实时内容和实时游戏的创建。这是通过为服务器提供一种标准化的方式来实现的，该方式无需客户端请求即可向浏览器发送内容，并允许在保持连接打开的同时来回传递消息。

# ruby-on-rails - 带有查询参数的 Rails 路由

> ID：14610333
> 
> 赞同：7
> 
> 时间：2013-01-30T17:42:42.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3

不太确定所涉及的术语，我没有找到任何搜索，但如果有人能指出我正确的方向，我会再看看。

我有一个名为 Journals 的控制器。我想在 URL 中有一个可选的日期。如果用户没有指定日期，他们会得到今天。如果指定了日期，则使用它。URL 看起来像：

```
localhost:3000/journals/7/
localhost:3000/journals/7/2013-01-22/ 
```

第一个将显示今天的内容。第二个将显示 1 月 22 日的内容。

我从这条路线开始：

```
match '/journals/:id(/:date)', to: 'journals#show' 
```

以及对应的Controller

```
class JournalsController < ApplicationController
  def show
      @user = User.find(params[:id])
      if params[:date]
        @date = Date.parse(params[:date])
      else 
        @date = Date.today
      end
  end  
end 
```

这很好用，但是如何使用 url 助手生成 URL？我试过这个：

```
<%= link_to "< Yesterday", journal_path(id: @user, date: @date.yesterday) %> 
```

这似乎实际上工作正常，但它给了我一个这样的网址：

```
localhost:3000/journals/7?date=2013-01-22 
```

代替：

```
localhost:3000/journals/7/2013-01-22 
```

如何保持 URL 的一致构建，如 /journals/:id/:date

如果有更好的方法请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:42:54.340

在路线中试试这个：

```
 resources :journals
 match '/journals/:id(/:date)' => 'journals#show', :constraints => { :date => /\d{4}-\d{2}-\d{2}/ }, :as => "journals_date" 
```

# objective-c - 自动保存期间的 Cocoa 应用程序错误 (errno 66)

> ID：14610336
> 
> 赞同：3
> 
> 时间：2013-01-30T17:42:50.410
> 
> 标签：objective-c, macos, cocoa

我有一个我一直在构建的基于文档的应用程序，似乎有时当文档进行临时保存时，我会收到以下错误：

```
AppKit called rmdir("/private/var/folders/5_/7zdcn8g160g0kbpxhr_fwv0m0000gn/T/TemporaryItems/(A Document Being Saved By MyTestApp)"), it didn't return 0, and errno was set to 66. 
```

现在我知道我可以通过遵循这篇文章来解决这个错误： [Save Core Data models in Xcode 4](https://stackoverflow.com/questions/5326835/save-core-data-models-in-xcode-4/6168501#6168501)

然而，这似乎是一个临时解决方案，因为错误不断出现。然而，错误并没有**一直**出现，只是有时让我感到沮丧。我想知道是否有人可以阐明问题的根源。

我正在运行 Mountain Lion 10.8.2 和 Xcode 4.5.2。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-06T14:52:49.913

我想它不再相关，但可能对其他人来说 - 我遇到了同样的错误，问题是我试图更改 UIDocument 的只读元数据字段。

# c# - 如何在 Sharepoint 的 c# 非可视 Web 部件中以编程方式创建进度更新控件

> ID：14610338
> 
> 赞同：-2
> 
> 时间：2013-01-30T17:42:53.430
> 
> 标签：c#, ajax, sharepoint, web-parts, progress

如何在 Sharepoint 的 ac# 非可视 Web 部件中以编程方式创建进度更新控件？

我正在使用 c#，目标是在 ProgressUpdate 控件内创建一个“正在加载...”文本，该文本在更新面板加载更多内容时变为可见，然后在加载内容时消失。如果有人可以提供帮助，那就太棒了。我尝试了以下方法，但没有运气。一个按钮触发更新面板并且更新效果很好，但是当我尝试添加更新进度时，它会被添加到页面中，但是当我单击触发更新的按钮时它永远不会出现。

```
UpdatePanel up = new UpdatePanel();
up.UpdateMode = UpdatePanelUpdateMode.Always;
up.ID = "Panel1";

UpdateProgress upp1 = new UpdateProgress();
upp1.AssociatedUpdatePanelID = up.ID.ToString();

upp1.ID = "UpdateProgress1";

upp1.Controls.Add(new LiteralControl("<p>Loading...</p>"));

Controls.Add(upp1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:26:27.523

好吧，这就是我发现的。如果您在更新面板之外创建更新进度控件，则在触发更新面板时将无法侦听更新面板上的触发器。可以在下面的链接中阅读更多内容。

[http://www.mostlydevelopers.com/blog/post/2008/08/23/Show-UpdateProgress-when-using-an-UpdatePanel-with-Triggers.aspx](http://www.mostlydevelopers.com/blog/post/2008/08/23/Show-UpdateProgress-when-using-an-UpdatePanel-with-Triggers.aspx)

因此，由于我是这样做的，所以我不得不使用 javascript 解决方法。我必须使用 PageRequestManager 对象的 getInstance() 方法来获取 PageRequestManager 类的实例。然后，我在异步请求初始化和结束时添加了它的函数。这将允许我们在异步调用开始和结束时显示我们的 UpdateProgress 控件。（请参阅下面的 Javascript）

```
//Function for postbackUpdateProgress
var prm = Sys.WebForms.PageRequestManager.getInstance();
var postBackElement;

function CancelAsyncPostBack() {
    if (prm.get_isInAsyncPostBack()) {
        prm.abortPostBack();
    }
}

prm.add_initializeRequest(InitializeRequest);
prm.add_endRequest(EndRequest);

function InitializeRequest(sender, args) {
    if (prm.get_isInAsyncPostBack()) {
        args.set_cancel(true);
    }
    //Get the element that asynchronous postback
    postBackElement = args.get_postBackElement();

    //check to see if any of the following controls activate sender request.
    //search is used to search for the ID name in the string that sharepoint spits out
    // as the ID.
    var controlA = postBackElement.id.search("DropDownListType");
    var controlB = postBackElement.id.search("UserProfileDropList");
    var controlC = postBackElement.id.search("MoreNewsLinkButton");
    var controlD = postBackElement.id.search("PreviousNewsLinkButton");

    if (controlA != -1 || controlB != -1 || controlC != -1 || controlD != -1) {
        $('*[id*=Panel1]:visible').hide();
        //show UpdateProgress
        $('*[id*=UpdateProgress1]').show();
    }
}
//After async postback complete, then show panel again and hide UpdateProgress
function EndRequest(sender, args) {
    $('*[id*=Panel1]').show();//use wild card in jquery to find Panel1 ID
    $('*[id*=UpdateProgress1]:visible').hide();
} 
```

请注意，我必须对 ID 名称进行 search()，因为 sharepoint 在您的 ID 名称之前放置了一堆文本，否则 javascript 将无法仅通过 ID 的文本文字找到它。使用 jquery 的通配符方法通过以下方式查找面板：

$(' *[id* =Panel1]').show();//在jquery中使用通配符查找Panel1 ID

展示它。

和

$(' *[id* =Panel1]:visible').hide();

在异步调用初始化时隐藏更新面板。您不必隐藏更新面板，但如果我这样做，我的特定实现看起来更美观。

# php - 匹配和加密 Word 中的几个字符

> ID：14610339
> 
> 赞同：0
> 
> 时间：2013-01-30T17:42:54.030
> 
> 标签：php

我正在开发一个筛选逻辑，其中完整的内容文本通过正则表达式与 php 中的关键字列表匹配。我正在使用以下代码正确匹配单词并使其变为粗体。

```
$pattern = "/mango|apple|banana/";
$text = "i like banana and apple alot";
$replacement = "<strong>$0</strong>";
echo preg_replace($pattern, $replacement, $text); 
```

此代码正确匹配并使匹配的单词包含在强烈的喜欢中

```
i like <strong>banana</strong> and <strong>apple</strong> alot. 
```

但我想把香蕉换成

```
b****a and apple as a****e 
```

而不是让它变得粗体。

谁能帮我怎么可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:52:19.420

您可以尝试使用`preg_replace_callback`而不是`preg_replace`.

```
preg_replace_callback($pattern, function($matches){
    $str = $matches[0];
    $len = strlen($str);
    $stars = str_repeat('*', $len-2);
    return $str[0].$stars.$str[$len-1];
}, $text); 
```

*更新以创建动态数量的星星*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:55:29.887

如果您的模式是固定的，您可能希望`preg_replace`像这样传递数组：

```
$patterns = array(
    '/mango/',
    '/apple/',
    '/banana/'
}
$replacements = array(
    'm***o',
    'a***e',
    'b****a'
)
echo preg_replace($patterns, $replacements, $text); 
```

这也适用于您要替换的任何给定关键字数组，如下所示：

```
$keywords; // array populated with key words
$patterns = array();
$replacements = array();
array_walk($keywords, function($value, $key) {
    $patterns[] = '/' . $value . '/';
    $replacements[] = strpad($value[0], strlen($value) - 1, '*') . $value[strlen($value) - 1];
}
echo preg_replace($patterns, $replacements, $text); 
```

# android - SQLite 查询创建

> ID：14610340
> 
> 赞同：0
> 
> 时间：2013-01-30T17:42:56.193
> 
> 标签：android, android-sqlite

我希望 KEYWORD 列应该包含 SQLite 数据库中的唯一值。如何修改以下查询来做到这一点？

查询如下：

```
 String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_WORD + " TEXT "
            + KEY_KEYCODE + " TEXT" + ")"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:45:03.973

使用`UNIQUE`修饰符。

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_WORD + " TEXT UNIQUE "
            + KEY_KEYCODE + " TEXT" + ")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:46:08.863

使用唯一关键字：

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
        + KEY_ID + " INTEGER PRIMARY KEY," + KEY_WORD + " TEXT UNIQUE,"
        + KEY_KEYCODE + " TEXT" + ")"; 
```

# jquery - 在 IE 9.0.11 中单击按钮时表单提交事件未触发

> ID：14610343
> 
> 赞同：0
> 
> 时间：2013-01-30T17:43:03.263
> 
> 标签：jquery, html, forms

仅在 IE 9.0.11 中，当我在文本框中按 Enter 键时，提交事件就会触发。如果我单击搜索按钮，则不会触发“提交”事件。此时页面正在向自身提交。清除点击事件在这里正常触发。

我有 IE 9.0.12，它表现正常。

HTML 表单

```
<form name="frmCollegeReview" method="Post" action="">
    <table border="0" cellspacing="0" style="border-collapse: collapse" width="100%"
    id="table3">
        <tr>
            <td width="15%" class="lineitem0">College Key</td>
            <td width="85%" class="lineitem0">
                <input maxlength="6" name="txtCollegeKey" size="15" class="field" value="">
            </td>
        </tr>
        <tr>
            <td width="15%">&nbsp;</td>
            <td width="85%">
                <input type="image" src="/pics/btn/btn_search.gif" alt="Search" id="formSubmit">
                <a href="#" id="formReset">
                    <img border="0" src="/pics/btn/btn_clear.gif">
                </a>
            </td>
        </tr>
    </table>
</form> 
```

jquery 提交事件

```
$("#" + CollegeReview._enum.ClearFormButton).live("click", function () {
    $("input[name='" + CollegeReview._enum.CollegeKey + "']").val(0);
    return false;
});

$("form[name='" + CollegeReview._enum.SeachForm + "']").live('submit', function () {
    CollegeReview.PopulateForReview();
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:50:20.787

试试这个：

```
$("input[type='image']").live('click', function(){
    $("form[name='"+CollegeReview._enum.SeachForm+"']").submit(function(){
        CollegeReview.PopulateForReview();
    });
    return false;
}); 
```

# java - 如何使用相同的源代码但不同的资源构建不同的 APK

> ID：14610344
> 
> 赞同：2
> 
> 时间：2013-01-30T17:43:05.717
> 
> 标签：java, android, ant, apk

这主要是为了品牌。我希望为不同的客户使用不同的图像集和可绘制资源。

我希望实现的是，在构建阶段，我可以选择我需要使用的资源包，但保持源代码不变。

我知道我可以通过复制和粘贴来创建多个项目，或者我可以创建一个项目但每次构建它时都更改 res 文件夹。我需要帮助的是，有没有更实用的方法来完成这项任务？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:51:46.910

已经完成了：

将项目用作库，包含所有可绘制对象（默认）。

创建一个使用这个库的项目，它有自己的包名和应用程序名。将相同的可绘制对象（名称）添加到其中，但带有品牌（不同的内容）。这些可绘制对象将覆盖库中的那些！

请记住将活动和所有应用程序组件和权限添加到新清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T17:29:27.213

尝试使用口味和构建类型进行 gradle。您可以在一个构建中实现不同的 apk 集。结帐[http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:52:44.617

为此，您需要创建另一个 Android 项目并使用[ant](http://tools.android.com/tech-docs/ant-build-script)将所有必要的资源复制到该项目并构建 apk 文件。

# python - 如何处理带有可调用对象的 python 字典？

> ID：14610346
> 
> 赞同：8
> 
> 时间：2013-01-30T17:43:18.127
> 
> 标签：python, dictionary

我想创建一个 python 目录，其值将单独评估。

因此，例如，在以下非工作示例中，我定义

```
a = {'key1': 'value1', 'key2': 42, 'key3': foo(20)} 
```

例如

```
def foo(max):
    """Returns random float between 0 and max."""
    return max*random.random() 
```

在处理我想要的dict之后

```
a_processes = {'key1': 'value1', 'key2': 42, 'key3': 12.238746374} 
```

该示例不起作用，因为 key 的值`key3`被立即评估，并且`foo(20)`不可调用。它可以工作的方式是使用类似的东西

```
a = {'key1': 'value1', 'key2': 42, 'key3': foo} 
```

但这里`foo`会错过它的论点。处理此问题的一种方法是按以下方式定义字典

```
a = {'key1': 'value1', 'key2': 42, 'key3': [foo, 20]} 
```

采用以下处理方案

```
a_processed = dict([k,process(v)] for k,v in a.items()) 
```

其中`process`是一个有意义的函数，它检查它的参数是否是一个列表，或者第一个元素是否是一个可调用的，它会被剩余的参数调用。

我的问题是关于实现我的基本想法的更好方法/想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T17:48:53.413

使用[`functools.partial()`](http://docs.python.org/2/library/functools.html#functools.partial)创建一个可调用对象，它将一组参数应用于另一个可调用对象：

```
from functools import partial

a = {'key1': 'value1', 'key2': 42, 'key3': partial(foo, 20)} 
```

现在该`key3`值是一个可调用对象；`a['key3']()`将依次调用`foo(20)`并返回结果。

您仍然需要“处理”这本字典（使用以下[`callable()`功能](http://docs.python.org/2/library/functions.html#callable)进行测试：

```
{k: v() if callable(v) else v for k, v in a.iteritems()} 
```

当然。如果您使用的是 Python 3，请`a.items()`改用。

设置让您可以根据`functools.partial`需要添加其他参数（只要`foo()`支持它们）：

```
a['key3']('additional', arguments='accepted') 
```

您*甚至*可以创建一个在访问键时自动执行此操作的字典子类：

```
def CallablesDict(dict):
    def __getitem__(self, key):
        value = super(CallablesDict, self).__getitem__(key)
        return value() if callable(value) else value 
```

然后定义`a`为：

```
a = CallablesDict({'key1': 'value1', 'key2': 42, 'key3': partial(foo, 20)})

print a['key3']  # calls foo(20) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T17:50:19.243

我经常在这里使用无参数`lambda`，只是因为我喜欢这种语法：

```
>>> def foo(x):
...     return x*100
... 
>>> a = {'key1': 'value1', 'key2': 42, 'key3': lambda: foo(20)}
>>> a
{'key3': <function <lambda> at 0x96ae80c>, 'key2': 42, 'key1': 'value1'}
>>> {k: v() if callable(v) else v for k,v in a.iteritems()}
{'key3': 2000, 'key2': 42, 'key1': 'value1'} 
```

# css - 如何超越 youtube 外部风格？

> ID：14610347
> 
> 赞同：0
> 
> 时间：2013-01-30T17:43:18.647
> 
> 标签：css, youtube, youtube-api, overriding, external

我在一个网站上工作，我使用一个嵌入 youtube 视频的 wordpress 插件。

现在它有一个很棒的选项，可以只显示视频的图像，并且只有在您按下视频时才加载视频，这样页面就不会花费很多时间来加载。

问题在于，在这种模式下，它会从 youtube 获取视频照片，并且还需要一个大的红色播放按钮图像，它丑得要命:)

现在该按钮的 css 来自某个外部链接（[http://s.ytimg.com/yts/cssbin/www-embed-vflSBO3VV.css](http://s.ytimg.com/yts/cssbin/www-embed-vflSBO3VV.css)），我不知道如何克服它。

有什么建议么？

那就是我正在开发的网站 - [http://www.lab.gezerweb.com/ClipPress/](http://www.lab.gezerweb.com/ClipPress/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:34:39.310

我相信您在谈论使用的嵌入，对`controls=2`吗？（见[https://developers.google.com/youtube/player_parameters#controls](https://developers.google.com/youtube/player_parameters#controls)）

如果是这样，那么不，没有办法在提示状态下覆盖默认播放按钮。

# android - Apache Harmony 的 JarURLConnectionImpl 中的 Android 内存泄漏？

> ID：14610350
> 
> 赞同：9
> 
> 时间：2013-01-30T17:43:37.793
> 
> 标签：android, memory-leaks

我正在开发一个 Android 应用程序，我们正在调查内存使用情况。

查看来自 hprof 的堆转储，我们看到在 JarURLConnectionImpl 中的静态缓存中使用了近 2M（堆的 22%）：

![在此处输入图像描述](../Images/09e6813064b433989343fb74177a8070.png)

查看 JarURLConnectionImpl的[源代码](http://svn.apache.org/repos/asf/harmony/enhanced/java/trunk/classlib/modules/luni/src/main/java/org/apache/harmony/luni/internal/net/www/protocol/jar/JarURLConnectionImpl.java)，似乎条目已添加到静态 jarCache 变量中，但从未删除。

如果它们确实从未被删除，那么我认为这是潜在的内存泄漏。

这是泄漏吗？有修复或解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T00:29:09.427

这是一个丑陋的解决方法：

```
private static HashMap<URL,JarFile> jarCache;

static {
    try {
        Class<?> jarURLConnectionImplClass = Class.forName("org.apache.harmony.luni.internal.net.www.protocol.jar.JarURLConnectionImpl");
        final Field jarCacheField = jarURLConnectionImplClass.getDeclaredField("jarCache");
        jarCacheField.setAccessible(true);
        //noinspection unchecked
        jarCache = (HashMap<URL, JarFile>) jarCacheField.get(null);
    } catch(Exception e) {
        // ignored
    }
} 
```

然后，定期运行以下命令：

```
 // HACK http://stackoverflow.com/questions/14610350/android-memory-leak-in-apache-harmonys-jarurlconnectionimpl
    if( jarCache!=null ) {
        try {
            for (
                final Iterator<Map.Entry<URL, JarFile>> iterator = jarCache.entrySet().iterator(); iterator.hasNext(); ) {
                final Map.Entry<URL, JarFile> e = iterator.next();
                final URL url = e.getKey();
                if (Strings.toString(url).endsWith(".apk")) {
                    Log.i(TAG,"Removing static hashmap entry for " + url);
                    try {
                        final JarFile jarFile = e.getValue();
                        jarFile.close();
                        iterator.remove();
                    } catch( Exception f ) {
                        Log.e(TAG,"Error removing hashmap entry for "+ url,f);
                    }
                }
            }
        } catch( Exception e ) {
            // ignored
        }
    } 
```

我在创建活动时运行它，因此每次创建我的一项活动时都会执行它。丑陋的 hashmap 条目似乎并不经常重新创建，但它似乎偶尔会重新出现，因此仅运行此代码一次是不够的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-14T04:08:27.410

这绝对是一个令人讨厌的内存泄漏。我已经为它[打开了一个问题](https://code.google.com/p/android/issues/detail?id=60071)，因为似乎没有其他人报告它。

感谢 emmby 的“丑陋解决方法”，这很有帮助。一种更安全的方法（尽管可能会影响性能）是完全禁用 URLConnection 缓存。由于 URLConnection.defaultUseCaches 标志是静态的，并且正如您可能猜到的那样，它是每个实例的 useCaches 标志的默认值，因此您可以将其设置为 false 并且没有更多实例将缓存它们的连接。这将影响 URLConnection 的所有实现，因此它可能会产生比预期更远的影响，但我认为这是一个合理的权衡。

您可以像这样创建一个简单的类，并在应用程序的 onCreate() 中尽早实例化它：

```
public class URLConnectionNoCache extends URLConnection {

    protected URLConnectionNoCache(URL url) {
        super(url);
        setDefaultUseCaches(false);
    }

    public void connect() throws IOException {
    }
} 
```

有趣的是，由于这发生在您的应用程序加载并运行之后，系统库应该已经被缓存，这只会阻止进一步缓存，所以这可能提供了最好的权衡：不缓存您的 apk，同时允许缓存系统 jar 的性能优势。

在这样做之前，我确实对 emmby 的解决方案进行了一些修改，使其成为一个独立的类，该类创建一个后台线程来定期清除缓存。我将其限制为仅清除应用程序的 apk，尽管如果需要可以放宽。这里要担心的是您正在修改可能正在使用的对象，这通常不是一件好事。如果您确实想走这条路，您只需要使用上下文调用 start() 方法，例如在您的应用程序的 onCreate() 中。

```
package com.example;

import java.lang.reflect.Field;
import java.net.URL;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.jar.JarFile;
import java.util.regex.Pattern;

import android.content.Context;

// hack to remove memory leak in JarURLConnectionImpl
// from http://stackoverflow.com/questions/14610350/android-memory-leak-in-apache-harmonys-jarurlconnectionimpl

public class JarURLMonitor {
    private static JarURLMonitor instance;
    private Pattern pat;
    private Field jarCacheField;
    public volatile boolean stop;

    private static final long CHECK_INTERVAL = 60 * 1000;

    public static synchronized void start(Context context) {
        if (instance == null) {
            instance = new JarURLMonitor(context);
        }
    }

    public static synchronized void stop() {
        if (instance != null) {
            instance.stop = true;
        }
    }

    private JarURLMonitor(Context context) {
        // get jar cache field
        try {
            final Class<?> cls = Class.forName("libcore.net.url.JarURLConnectionImpl");
            jarCacheField = cls.getDeclaredField("jarCache");
            jarCacheField.setAccessible(true);
        }
        catch (Exception e) {
            // log
        }

        if (jarCacheField != null) {
            // create pattern that matches our package: e.g. /data/app/<pkgname>-1.apk
            pat = Pattern.compile("^.*/" + context.getPackageName() + "-.*\\.apk$");

            // start background thread to check it
            new Thread("JarURLMonitor") {
                @Override
                public void run() {
                    try {
                        while (!stop) {
                            checkJarCache();
                            Thread.sleep(CHECK_INTERVAL);
                        }
                    }
                    catch (Exception e) {
                        // log
                    }
                }
            }.start();
        }
    }

    private void checkJarCache() throws Exception {
        @SuppressWarnings("unchecked")
        final HashMap<URL, JarFile> jarCache = (HashMap<URL, JarFile>)jarCacheField.get(null);

        final Iterator<Map.Entry<URL, JarFile>> iterator = jarCache.entrySet().iterator();
        while (iterator.hasNext()) {
            final Map.Entry<URL, JarFile> entry = iterator.next();
            final JarFile jarFile = entry.getValue();
            final String file = jarFile.getName();
            if (pat.matcher(file).matches()) {
                try {
                    jarFile.close();
                    iterator.remove();
                }
                catch (Exception e) {
                    // log
                }
            }
        }
    }
} 
```

# ios - 区域设置敏感的 dateFormat 字符串

> ID：14610355
> 
> 赞同：1
> 
> 时间：2013-01-30T17:44:00.443
> 
> 标签：ios, nsdateformatter

NSDateFormatter 是否有一个日期格式字符串可以检测基于 12 或 24 和 1 或 0 的小时格式？

除非我读错了，否则 Unicode 规范说可以为此使用“j”。例如，以下应该使用 1-12、0-23 或 1-24 小时，具体取决于语言环境，但 NSDateFormatter 只会创建一个空字符串。

```
NSDateFormatter *minuteFormatter = [[NSDateFormatter alloc] init];
minuteFormatter.locale = [NSLocale currentLocale];
minuteFormatter.dateFormat = @"jj"; 
```

我看到很多建议使用以下内容来正确解释用户的语言环境，但我只想要一个包含小时的字符串，而不必解析结果字符串。

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateStyle:NSDateFormatterNoStyle];
[dateFormatter setTimeStyle:NSDateFormatterLongStyle]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T21:29:25.227

从[日期格式规范](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)：

> 这是一个特殊用途的符号。它不得出现在模式或骨架数据中。相反，它保留用于传递给执行灵活日期模式生成的 API 的骨架中。在这种情况下，它会请求区域设置的首选小时格式（h、H、K 或 k），这取决于是否在区域设置的标准短时间格式中使用了 h、H、K 或 k。在此类 API 的实现中，在开始与 availableFormats 数据进行匹配之前，必须将“j”替换为 h、H、K 或 k。请注意，在传递给 API 的框架中使用“j”是让框架请求区域设置的首选时间周期类型（12 小时或 24 小时）的唯一方法。

这可能意味着它需要在进入日期格式之前解决。

尝试使用`+ (NSString *)dateFormatFromTemplate:(NSString *)template options:(NSUInteger)opts locale:(NSLocale *)locale`来检索格式字符串。

```
NSString *format = [NSDate dateFormatFromTemplate:@"jj" options:0 locale: myLocale];
hourFormatter.dateFormat = format; 
```

# php - Twitter 引导总是相同的内容

> ID：14610357
> 
> 赞同：1
> 
> 时间：2013-01-30T17:44:08.410
> 
> 标签：php, javascript, twitter-bootstrap, modal-dialog

我正在使用 twitter 引导模式来更新联系人，但我遇到了一些问题。模态总是显示第一个联系人的信息。但是，当我在模式之外显示信息时，它会以正确的形式显示

```
<?php foreach($contacts as $contact):  ?>  
<?php if($school==$contact->Schools_id): ?> 
<table class="table table-bordered  table-hover">
        <tbody><br>

                <button role="button" class="btn"><?php echo anchor('contacts/delete_contact/'.$contact->Contacts_id,' <i class="icon-remove"></i>'); ?></button>
                <a href="#UpdateContact" role="button" class="btn" data-target="#UpdateContact" data-toggle="modal"><i class="icon-pencil"></i></a>
                <tr>
                    <td>Name</td>
                    <td><?php echo $contact->name. " ". $contact->last_name; ?></td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td><?php echo $contact->title; ?></td>
                </tr>
                <tr>
                    <td>Phone</td>
                    <td><?php echo $contact->phone; ?> </td>
                </tr>
                <tr>
                    <td>Email</td>
                    <td><?php echo $contact->email; ?></td>
                </tr>
                <div id="UpdateContact" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" tabindex="-1" aria-hidden="true">
                    <div class="modal-header">
                        <?php $hidden = array('contact_id' => $contact->Contacts_id,
                                              'school_id' => $contact->Schools_id);
                                echo form_open_multipart('contacts/update_contact', "", $hidden);  ?>
                        <h3>Update Contact</h3>
                    </div>
                    <div class="modal-body">
                        <label for="name">First Name <span class="required">*</span></label>
                        <input id="name" type="text" name="name" maxlength="20" ] 
                               value="<?php echo set_value('name', $contact->name ); ?>"  />
                        <br><br>
                        <label for="last_name">Last Name <span class="required">*</span></label>
                        <input id="last_name" type="text" name="last_name" maxlength="20" ] 
                               value="<?php echo set_value('last_name', $contact != NULL ? $contact->last_name : " " ); ?>"  />
                        <br><br>
                        <label for="title">Title <span class="required">*</span></label>
                        <input id="title" type="text" name="title" maxlength="45" ] 
                               value="<?php echo set_value('title', $contact != NULL ? $contact->title : " " ); ?>"  />
                        <br><br>
                        <label for="phone">Phone<span class="required">*</span></label>
                        <input id="phone" type="text" name="phone" maxlength="11" ] 
                               value="<?php echo set_value('phone', $contact != NULL ? $contact->phone : " " ); ?>"  />
                        <br><br>

                        <label for="email">Email<span class="required">*</span></label>
                        <input id="email" type="text" name="email" maxlength="45" ] 
                               value="<?php echo set_value('email', $contact != NULL ? $contact->email : " " ); ?>"  />
                    </div>
                    <div class="modal-footer">

                    <?php echo form_submit( array('class' => 'btn btn-primary', 'name' =>'submit', 'value' => 'Submit')); ?>
                    <?php echo form_close(); ?> 
                    </div>
                    </div>
              </div>

        </tbody>
    </table>

            <?php endif ?>
        <?php endforeach ?> 
```

我在这个问题[Twitter bootstrap remote modal 中找到的一些解决方案每次都显示相同的内容](https://stackoverflow.com/questions/12286332/twitter-bootstrap-remote-modal-shows-same-content-everytime)是：

```
<script type="text/javascript">       
  $(document).ready( function(){
         $('#UpdateContact').on('hide', '.modal', function () {
          $(this).removeData('modal');
        });
    });  
</script> 
```

但仍然不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:54:04.163

就像 datasage 说的那样，您的模态 DIV id 不是唯一的。将您的 DIV id 与联系人 id 连接，以使每个模式都独一无二。

```
<div id="UpdateContact<?php echo $contact->Contacts_id ?>" 
```

还要确保以相同的方式链接您的 HREF

# java - Android - 一个按钮更改为创建的下一个屏幕。下一个怎么做？

> ID：14610360
> 
> 赞同：1
> 
> 时间：2013-01-30T17:44:15.770
> 
> 标签：java, android, xml

我从本教程创建了指向新屏幕的非常简单的按钮：www.mkyong.com/android/android-activity-from-one-screen-to-another-screen，它工作正常。

问题是如何使按钮从 main2.xml 返回到 main.xml（以及每个下一个按钮）。我还不是很擅长它，从逻辑上讲，我尝试使用@id:button2 和与 App2Activity.java 相同的类 App3Activity.java 创建按钮，但将 button1 更改为 button2 并将 main 更改为 main2。然而，它崩溃了。怎么了 ？

崩溃日志： http: [//pastebin.com/bmcVMmJ0](http://pastebin.com/bmcVMmJ0)

代码： http: [//pastebin.com/8p6GwG3u](http://pastebin.com/8p6GwG3u)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:42:41.740

**App3Activity**未在清单文件中声明。

**AppActivity**正在启动**App2Activity**，但**App2Activity**没有初始化按钮并单击侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:57:23.227

关于您的情况有很多原因

*   清单文件中未定义活动
*   在活动中调用按钮可能无法使其视图触发其功能
*   在同一个活动中使用 2 个不同的 XML

*   Intent 未正确实例化

*   上下文切换不正确，除非您提供堆栈（Logcat）或您正在使用的代码，否则您的开放式问题背后有很多原因

# sql - 更新和追加，除非为空

> ID：14610368
> 
> 赞同：0
> 
> 时间：2013-01-30T17:44:42.010
> 
> 标签：sql, sql-server-2008

我试图通过向字段附加数据来更新字段。如果它已经包含数据，我不会更新它，否则我会。

如果它已经包含数据，我希望它在单词后面附加一个逗号和空格。例如

```
update myTable 
set  Prefixes = convert(nvarchar(max),Prefixes) + ', abc' 
where MyCol='xyz' and Prefixes not like '%abc%' 
```

我试图让它工作，这样如果前缀列最初是空的，它只包含单词'abc'

而不是 ', abc'

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:47:26.673

听起来你需要一个`CASE`：

```
update myTable 
set  Prefixes = 
           case 
               when Prefixes is null or Prefixes = ''
               then 'abc'
               else convert(nvarchar(max),Prefixes) + ', abc' 
            end
where MyCol='xyz' and (Prefixes not like '%abc%' or Prefixes is null) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d627c/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:18:45.780

您还需要`null`在过滤之前检查 Prefixes 的值，就像`NOT LIKE`在`WHERE`子句中一样。[Sql-Demo](http://sqlfiddle.com/#!3/d627c/4)

```
update myTable 
set  Prefixes = isnull(nullif(rtrim(Prefixes),'') + ', abc','abc')
where MyCol='xyz' and isnull(Prefixes,'') not like ', abc%' 
```

# c# - 将图像文件保存到独立存储中时，GetResourceStream 中途返回 null

> ID：14610371
> 
> 赞同：0
> 
> 时间：2013-01-30T17:44:46.750
> 
> 标签：c#, image, null, windows-phone-8, isolatedstorage

我正在尝试使用以下代码将 XAP 中的多个图像文件保存到隔离存储中。我计划保存大约 100 个文件。问题是线路

```
sri = Application.GetResourceStream(uri) 
```

中途返回 null。模拟器可以保存的文件数量有限制吗？或者可能是我错过了什么..

```
 private static void SaveImageFileToIsoStore()
    {

        string[] files = AllFilesInImagesCatFolder();

        using (var isoStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (!isoStore.FileExists(files[0]))
            {
                foreach (string f in files)
                {
                    IsolatedStorageFileStream fileStream = isoStore.CreateFile(f);
                    StreamResourceInfo sri = null;
                    Uri uri = new Uri("Images/cat/" + f, UriKind.Relative);
                    Debug.WriteLine(f);
                    sri = Application.GetResourceStream(uri);

                    BitmapImage bitmap = new BitmapImage();
                    bitmap.SetSource(sri.Stream);
                    WriteableBitmap wb = new WriteableBitmap(bitmap);

                    // Encode WriteableBitmap object to a JPEG stream.
                    Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 100);

                    fileStream.Close();
                    fileStream.Dispose();

                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:39:03.670

我已经想通了。其中两个文件具有 png 和 jpeg 扩展名。该代码只需要 jpg 扩展名，因此在遇到这些扩展名时它会返回 null。

# heroku - 在 Heroku 上从竹子移动到雪松时出现 HireFire 错误：连接被拒绝

> ID：14610375
> 
> 赞同：0
> 
> 时间：2013-01-30T17:45:07.640
> 
> 标签：heroku, delayed-job, hirefire

我正在将应用程序从 3.0/1.8.7/bamboo 迁移到 3.2/1.9.2/cedar。我收到以下错误，这会阻止我的 HireFire 运行我的 DelayedJobs。

知道这里有什么问题吗？

```
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       [2013-01-29 03:57:48][HireFire] Delayed::Backend::ActiveRecord::Job detected!
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432?
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `initialize'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `new'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `connect'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `new_connection'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:287:in `checkout_new_connection'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:235:in `block (2 levels) in checkout'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `loop'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `block in checkout'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `checkout'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `retrieve_connection'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:308:in `clear_cache!'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/railtie.rb:91:in `block (2 levels) in <class:Railtie>'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:418:in `_run__3701001845916671889__prepare__1514527033144723608__callbacks'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
       /tmp/build_60g64nyyf08f/config/environment.rb:16:in `<top (required)>'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `block in require'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:103:in `require_environment!'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:93:in `block (2 levels) in <top (required)>'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
       /tmp/build_60g64nyyf08f/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:24:21.710

事实证明，这根本不涉及雇佣火。我不得不将它添加到 config/application.rb

```
config.assets.initialize_on_precompile = false 
```

# matlab - 使用 PCA 对手写数字进行分类

> ID：14610377
> 
> 赞同：1
> 
> 时间：2013-01-30T17:45:15.677
> 
> 标签：matlab, machine-learning, classification, pca

> 使用 PCA 对[手写数字](http://www.speedyshare.com/kuaXD/testzip.mat)进行分类。训练阶段使用 200 位，测试阶段使用 20 位。

我不知道 PCA 是如何作为一种分类方法工作的。我学会了用它作为一种降维方法，我们从平均值中减去原始数据，然后计算协方差矩阵、特征值和特征向量。从那里，我们可以选择主成分并忽略其余部分。我应该如何对一堆手写数字进行分类？如何区分不同类别的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T22:15:26.383

如果您绘制从 PCA 获得的分数，您会看到某些类将屈服于一个集群。

简单的 R 脚本：

```
data <- readMat(file.path("testzip.mat"))$testzip
pca <- princomp(t(data))
plot(pca$scores) 
```

会产生这样的情节：

![数字的R图](../Images/22274c3bec1493dc1d4547dcdff3eb31.png)

我无法为它着色，因为 mat 文件不包含向量到数字类的结果。但是，您至少会看到一个集群，它可以帮助您将该单个类与其他类进行分类（其他东西看起来像噪音？）。

Olivier Grisel（scikit-learn 的贡献者）也回答了您关于元优化的问题：

[如何使用 PCA 进行分类？](http://metaoptimize.com/qa/questions/9338/how-to-use-pca-for-classification)

他说这实际上是一种无监督的降维方法，但是可以用一些花哨的方法进行分类：

> 实际上，我在 Stéphane Mallat 的演讲中找到了另一种“使用 PCA 分类”的方法：每个类都由仿射流形近似，第一个分量作为方向，质心作为偏移量，新样本通过测量到最近的距离进行分类具有正交投影的流形。
> 
> 谈话：[https](https://www.youtube.com/watch?v=lFJ7KdSdy0k) ://www.youtube.com/watch?v=lFJ7KdSdy0k （对简历人来说很有趣）
> 
> 相关论文：[http ://www.cmap.polytechnique.fr/scattering/](http://www.cmap.polytechnique.fr/scattering/)

但我认为这对你来说太过分了。如果你有类标签，你可以使用任何分类器来适应 PCA 输出上的这个问题。如果没有，请选择一个基于密度的聚类，例如 DBSCAN，看看它是否找到了您在那里看到的聚类，并使用它对新图像进行分类（例如，通过与聚类平均值的距离）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:18:20.847

是的，正如 Thomas 指出的那样，基本上 PCA 和相关技术是进行降维的工具。这个想法是通过只获取最重要的信息并将其映射到低维子空间来对抗[“维度诅咒” 。](http://en.wikipedia.org/wiki/Curse_of_Dimensionality)在这个子空间中，您可以使用更简单的技术对数据进行实际分类或聚类。

您可以从简单的[K 最近邻](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)到[支持向量机](http://en.wikipedia.org/wiki/Support_Vector_Machines)进行分类。为此，您还需要数据的标签。

让我们尝试使用 kNN 的最简单的方法（不一定是最好的方法）：

现在，为了执行分类，您将需要另一个带有实际标签的向量。假设您有 100 个 16x16 像素的图像。在这 100 个中，您有 10 个数字“0”，10 个数字“2”，依此类推。

拍摄图像并将其设为 1x1600 的矢量。还要创建一个带有“标签”的 100x1 矢量。在matlab中是这样的：

```
labels = kron([0:1:9],ones(1,10)) 
```

现在将 PCA 应用于您的数据（假设每个图像是矩阵的一列`sampleimgs`- 所以 256x100 矩阵），您也可以使用 svd 执行此操作：

```
[coeff,scores]= pca(sampleimgs'); 
```

要将它们发送到您想要的低维空间（例如 R^2） - 所以只选择两个第一个主成分：

```
 scatter(scores(:,1),scores(:,2)) 
```

现在您可以对这些应用 K-NN 并在将新传入图像`newimg`发送到相同的 PC 子空间后对其进行分类：

```
 mdl = ClassificationKNN.fit(scores(1:100,[1 2]),labels);

 %get the new image:
 newimgmap = coef(:,1:2)'*newimg
 result = predict(mdl,newimgmap) 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T02:24:07.503

[Ding 和 He (2004)](http://ranger.uta.edu/~chqding/papers/KmeansPCA1.pdf)表明，通过 PCA 进行降维和通过 k-means 进行聚类是密切相关的。聚类又名无监督学习仍然不是分类又名监督学习，但正如其他人指出的那样，聚类可能有助于识别属于不同数字的数据点组。

# asp.net - UpdatePanel 中的按钮随机丢失事件处理程序

> ID：14610384
> 
> 赞同：9
> 
> 时间：2013-01-30T17:45:44.037
> 
> 标签：asp.net, vb.net, events, updatepanel

在 ASP.NET 网页上，我有一个 UpdatePanel。在这个 UpdatePanel 中，我有一个“添加”按钮，它可以动态地将我创建的任意数量的用户控件添加到 PlaceHolder。用户控件包含一个标签、一个按钮和一个第 3 方控件。用户控件内的按钮用于从父面板中删除该特定用户控件。“添加”和“删除”功能都可以正常工作。但是，添加按钮上的事件处理程序有时会在没有明显模式或原因的情况下停止工作。如果我添加 2 个 UC 并删除 1 个，则添加按钮有时会继续工作，有时则不会。寻找原因的任何步骤都会有所帮助。

就上下文而言，UC 被称为“Whereas”，因为它们是决议中的 WHEREAS 子句。这是代码，仅缩减到相关内容：

**编辑.aspx**

```
...
<asp:ScriptManager ID="sm1" runat="server"></asp:ScriptManager>
<asp:Panel ID="pnlMain" runat="server">
    <div class="form-horizontal">
        <asp:UpdatePanel ID="upnlWhereas" runat="server">
            <ContentTemplate>
                <asp:PlaceHolder ID="phWhereas" runat="server"></asp:PlaceHolder>
                <div class="control-group">
                    <asp:Label ID="lblAddWhereas" AssociatedControlID="btnAdd1Whereas" CssClass="control-label" runat="server"></asp:Label>
                    <div class="controls">
                        <asp:Button ID="btnAdd1Whereas" CssClass="btn" UseSubmitBehavior="false" Text="Add Whereas" runat="server" />
                    </div>
                </div>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</asp:Panel>
... 
```

**Edit.aspx.vb**（类是 Edit2）

```
...
Private Property ControlsList As List(Of String)
    Get
        If ViewState("ControlsList") Is Nothing Then
            ViewState("ControlsList") = New List(Of String)
        End If

        Return CType(ViewState("ControlsList"), List(Of String))
    End Get
    Set(ByVal Value As List(Of String))
        ViewState("ControlsList") = Value
    End Set
End Property

Private ReadOnly Property NextID As Integer
    Get
        Return ControlsList.Count + 1
    End Get
End Property

Protected Overrides Sub LoadViewState(savedState As Object)
    MyBase.LoadViewState(savedState)

    For Each waID As String In ControlsList
        Dim NewWhereas As Whereas
        NewWhereas = Me.LoadControl("~/UserControls/Whereas.ascx")

        NewWhereas.ID = waID
        phWhereas.Controls.Add(NewWhereas)

        AddHandler NewWhereas.OnRemoveWhereasClick, AddressOf Whereas_OnRemoveWhereasClick
    Next
End Sub

...

Private Sub btnAdd1Whereas_Click(sender As Object, e As System.EventArgs) Handles btnAdd1Whereas.Click
    Dim NewWhereas As Whereas
    NewWhereas = Me.LoadControl("~/UserControls/Whereas.ascx")

    NewWhereas.ID = "wa" + NextID.ToString
    phWhereas.Controls.Add(NewWhereas)

    ControlsList.Add(NewWhereas.ID)
End Sub

Private Sub Whereas_OnRemoveWhereasClick(ByVal sender As Object)
    Dim thisButton As Button = sender
    Dim thisWhereas As Whereas = thisButton.Parent.Parent

    phWhereas.Controls.Remove(thisWhereas)
    ControlsList.Remove(thisWhereas.ID)
End Sub
... 
```

**而.ascx.vb**

```
Public Delegate Sub ActionClick(ByVal sender As Object)

Public Class Whereas
    Inherits System.Web.UI.UserControl

    ...

    Public Event OnRemoveWhereasClick As ActionClick

    Public Sub btnRemoveWhereas_Click(ByVal sender As Object, ByVal e As EventArgs)
        RaiseEvent OnRemvoeWhereasClick(sender)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:23:21.007

当文档大纲发生变化时，更新面板的行为通常很奇怪。尝试将“添加”按钮移到面板外，然后在更新面板的“触发器”部分添加该按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:25:04.597

禁用 UpdatePanel 后（感谢 Yellowfog 的建议），我发现发生了以下情况：

1.  单击“添加”将添加一个 ID 为“wa1”的用户控件。
2.  再次单击“添加”将计算列表中现有用户控件的数量并添加 ID 为“wa2”的用户控件。
3.  单击控件“wa1”上的“删除”将删除“wa1”。
4.  单击“添加”将计算列表中现有用户控件的数量 (1) 并尝试添加 ID 为“wa2”的用户控件，这将导致错误，因为该控件已存在于页面上。由于调用是异步的，因此未显示此错误。

解决方案是根据列表中控件的数量使用 GUID 而不是整数来生成动态添加的用户控件的 ID。这样，它们基本上可以保证是唯一的。

# eclipse - 在 Eclipse 中安装 uml lab 时出错

> ID：14610385
> 
> 赞同：0
> 
> 时间：2013-01-30T17:45:44.517
> 
> 标签：eclipse, uml

我试图在 eclipse juno 中安装 uml 实验室，但无论我尝试多少，我总是收到此错误消息：

```
An error occurred while collecting items to be installed 
```

uml 实验室只是没有安装。请帮助我，我需要完成我的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:00:46.173

你得到什么错误？您可以在详细信息或错误日志视图中找到此信息。只是猜测：Eclipse Juno 的更新站点是否已激活？查看“窗口 -> 首选项 -> 安装/更新 -> 可用软件站点”。应该有一个指向“ [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno) ”的活动条目。

或者，您可以安装 UML Lab Standalone RCP ( [http://www.uml-lab.com/download/](http://www.uml-lab.com/download/) )。

最好的问候曼努埃尔

# php - 如果用户选择“全部”选项，如何显示所有详细信息

> ID：14610396
> 
> 赞同：0
> 
> 时间：2013-01-30T17:46:16.517
> 
> 标签：php, mysqli

下面我有 2 个 HTML 下拉菜单，一个用于学生，另一个用于问题：

```
<select name="question" id="questionsDrop">
<option value="0">All</option>
<option value="2">What is 2+2</option>
<option value="34">What is 3+3</option>
<option value="42">What is 4+4</option>
<option value="51">What is 5+5/option>

</select>  

 <select name="student" id="studentsDrop">
    <option value="0">All</option>
    <option value="23">Jay Hart</option>
    <option value="32">Bubba Wright</option>
    <option value="43">Tim Grey</option>
    <option value="52">Mary Pine</option>
    </select> 
```

下面是一个 mysqli 查询，它将根据从上面两个下拉菜单中选择的选项输出结果：

```
 $selectedstudentanswerqry = "
    SELECT
    sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
    QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
    GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
    GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
    FROM Student st
    INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
    INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
    INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
    INNER JOIN Answer an ON q.QuestionId = an.QuestionId
    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
    ";

    // Initially empty
    $where = array('q.SessionId = ?');
    $parameters = array($_POST["session"]);
    $parameterTypes = 'i';

    // Check whether a specific student was selected
    if($_POST["student"] != '0') {
        $where[] = 'sa.StudentId = ?';
        $parameters[] .= $_POST["student"];
        $parameterTypes .= 'i';
    }

    // Check whether a specific question was selected
    // NB: This is not an else if!
    if($_POST["question"] != '0') {
        $where[] = 'q.QuestionId = ?';
        $parameters[] .= $_POST["question"];
        $parameterTypes .= 'i';
    }

    // If we added to $where in any of the conditionals, we need a WHERE clause in
    // our query
    if(!empty($where)) {
        $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
        global $mysqli;
        $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
        // You only need to call bind_param once

        if (count($where) == 1) {
        $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
    }
    else if (count($where) == 2) {
        $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
    }
    else if (count($where) == 3) {
        $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
    }

    }

    $selectedstudentanswerqry .= "
      GROUP BY sa.StudentId, q.QuestionId
      ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";

.......................................................................................

    $arrStudentId = array();
    $arrStudentAlias = array();
    $arrStudentForename = array();
    $arrStudentSurname = array();
    $arrQuestionNo = array();
    $arrQuestionContent = array();

    while ($selectedstudentanswerstmt->fetch()) {
    $arrStudentId[ $detailsStudentId ] = $detailsStudentId;
    $arrStudentAlias[ $detailsStudentId ] = $detailsStudentAlias;
    $arrStudentForename[ $detailsStudentId ] = $detailsStudentForename;
    $arrStudentSurname[ $detailsStudentId ] = $detailsStudentSurname;
    $arrQuestionNo[ $detailsStudentId ] = $detailsQuestionNo;
    $arrQuestionContent[ $detailsStudentId ] = $detailsQuestonContent;

}

          foreach ($arrStudentId as $key=>$student) {

echo '<p><strong>Question:</strong> ' .htmlspecialchars($arrQuestionNo[$key]). ': ' .htmlspecialchars($arrQuestionContent[$key]). '</p>' . PHP_EOL;

} 
```

现在，如果我从相应的下拉菜单中选择特定学生或特定问题，则详细信息输出没有问题，因为数据库能够从这些下拉菜单中检索值，因为它们是数据库中的实际 ID。

但问题是，如果我`All`从任一下拉菜单中选择一个选项。`All`两个下拉菜单中的选项值都是`0`。现在`0`不在数据库中作为 id，我想做的是，如果用户选择该`All`选项，则`All`如果在学生下拉菜单中选择，则显示学生详细信息， `All`如果在问题下拉菜单中选择，则显示问题详细信息。

现在，查询正在收集数据以执行此操作，因为它使用为包含适当条件而构建的动态 WHERE 子句。`All`但我的问题是，如果用户选择了相关下拉菜单中的选项，我怎样才能让它显示学生/问题的所有详细信息？

更新处理 RING0 答案：

```
Notice: Array to string conversion in ... on line 358

Warning: mysqli::prepare(): (42S22/1054): Unknown column 'Array' in 'where clause' in ... on line 360

Fatal error: Call to a member function bind_param() on a non-object in ... on line 370 
```

代码更新：

```
 $selectedstudentanswerqry = "
    SELECT
    sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
    QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
    GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
    GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
    FROM Student st
    INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
    INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
    INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
    INNER JOIN Answer an ON q.QuestionId = an.QuestionId
    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
    ";

    // Initially empty
    $where = array();
    $parameters = array();
    $parameterTypes = '';

    // Check whether a specific session was selected
    if($_POST["session"] != '0') {
      $where[] = array('q.SessionId = ?');
      $parameters[] = array($_POST["session"]);
      $parameterTypes .= 'i';
    }

    // Check whether a specific student was selected
    if($_POST["student"] != '0') {
        $where[] = 'sa.StudentId = ?';
        $parameters[] .= $_POST["student"];
        $parameterTypes .= 'i';
    }

    // Check whether a specific question was selected
    // NB: This is not an else if!
    if($_POST["question"] != '0') {
        $where[] = 'q.QuestionId = ?';
        $parameters[] .= $_POST["question"];
        $parameterTypes .= 'i';
    }

    // If we added to $where in any of the conditionals, we need a WHERE clause in
    // our query
   if(count($where) > 0) {
    $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
    global $mysqli;
    $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
    // You only need to call bind_param once

if (count($where) == 1) {
    $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
}
else if (count($where) == 2) {
    $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
}
else if (count($where) == 3) {
    $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
} 
```

**截屏：**

![在此处输入图像描述](../Images/2d753ef00f2be14976095812cc617380.png)

正如您在上面看到的，它显示我选择了学生，但我选择`All`了 Qustions。然而它只在`Student Answer`标题下显示一个问题，在这个例子中，你可以在括号中看到的问题总数是`2`，所以它应该显示 2 个问题，而不是一个问题

数据库截图：

略微缩短的普通查询版本，但这不会影响主查询，因为它也显示相同数量的行。它显示 2 行，因为有两个问题。下面的结果是针对单个学生`StudentId = 1`，评估 26 ( `SessionId = 26`) 中的所有问题。

![在此处输入图像描述](../Images/4a3c61064754930a155c8404188bba57.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T02:32:32.953

如果该值既可以是 All 也可以是“0”，您可以进行切换

```
<?php

//check if POST is empty

$p_student = empty($_POST["student"])?'':$_POST["student"];

switch($p_student){
case 'All':
case '0':
    //dont' add where filters
    break;
default:
    $where[] = 'sa.StudentId = ?';
    $parameters[] .= $_POST["student"];
    $parameterTypes .= 'i';
}

$p_question = empty($_POST["question"])?'':$_POST["question"];

switch($p_question){
case 'All':
case '0':
    //dont' add where filters
    break;
default:
    $where[] = 'q.questionId = ?';
    $parameters[] .= $_POST["question"];
    $parameterTypes .= 'i';
} 
```

请记住，有时在以后直接访问或刷新页面时它是一个**GET 。**

所以也许你需要一个**$_REQUEST** ['student']

放置了整个代码，我的答案合并在 [https://github.com/fedmich/StackOverflow-answers/blob/master/14610396/index.php](https://github.com/fedmich/StackOverflow-answers/blob/master/14610396/index.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:59:00.893

查看您提供的代码，我注意到以下内容：

*   *选项*中的“全部”值设置为“全部”，而应为“0”
*   *会话*是可选择的，而 PHP 代码不检查是否已选择*会话*
*   您显示的 HTML 代码中没有*问题*select

看来您所要做的就是更改*Selects*中“All”的*值，并为**Session*添加一些代码。我添加了一个“问题”来解决这个问题。

 ***   更改“All”的所有选项值，设置为“0”：

代码：

```
<select name="session" id="sessionsDrop">
<option value="0">All</option>
<option value="2">EOWOW</option>
<option value="34">EOWOW</option>
<option value="42">EEMOO</option>
<option value="51">EDOOS</option>
</select>  

<select name="student" id="studentsDrop">
<option value="0">All</option>
<option value="23">Jay Hart</option>
... 
```

以及未出现在 HTML 代码中的“问题”

```
<select name="question" id="questionDrop">
<option value="0">All</option>
<option value="1">What is the 50th State?</option>
... 
```

*   *添加会话*的测试代码

 *向空数组添加一些代码，并检查是否选择了会话

```
// Initially empty
$where = array();
$parameters = array();
$parameterTypes = '';

// Check whether a specific session was selected
if($_POST["session"] != '0') {
  $where[] = 'q.SessionId = ?';
  $parameters[] = $_POST["session"];
  $parameterTypes .= 'i';
}

// then same code

// Check whether a specific student was selected
if($_POST["student"] != '0') {
    $where[] = 'sa.StudentId = ?';
    $parameters[] .= $_POST["student"];
    $parameterTypes .= 'i';
}
... 
```

以这种方式在PHP代码中检查3所*选择*，当“选择”时，它们的值为“0”。

代码应该在*哪里*

```
if(count($where) > 0) {
    global $mysqli;

    $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
    $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
    // You only need to call bind_param once

    if (count($where) == 1) {
      $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
    }
    else if (count($where) == 2) {
      $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
    }
    else if (count($where) == 3) {
       $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
    }
} 
```

**编辑2**

在

```
if($_POST["session"] != '0') {
  $where[] = array('q.SessionId = ?');
  $parameters[] = array($_POST["session"]); 
```

删除`array`s：

```
if($_POST["session"] != '0') {
  $where[] = 'q.SessionId = ?';
  $parameters[] = $_POST["session"]; 
```***

# javascript - Sencha Ext Js 如何将对象添加到 Ext.grid.Panel

> ID：14610397
> 
> 赞同：1
> 
> 时间：2013-01-30T17:46:18.437
> 
> 标签：javascript, html, extjs, extjs4

我正在使用 Sencha Ext Js 4，并且我有一个 Ext.grid.Panel。我会在标题中添加另一个元素，例如文本框。是否可以？

```
{filterable: true, header: 'Unique' /*Here i want add a textbox*/,  dataIndex: 'label', flex: 1, sortable: true} 
```

它应该看起来像这个图像![例子](../Images/cb64b351538dd7c49cdb92f4ca746bc8.png)。

编辑：这是我的自定义网格：

```
 var grid1 = Ext.create('Ext.grid.Panel', {
    store: getLocalStore(),
    enableLocking: true,
    width: 600,
    height: 300,
    plugins: [{
        ptype: 'rowexpander',
        rowBodyTpl : new Ext.XTemplate(
            '<p><b>Company:</b> {company}</p>',
            '<p><b>Change:</b> {change:this.formatChange}</p><br>',
            '<p><b>Summary:</b> {desc}</p>',
        {
            formatChange: function(v){
                var color = v >= 0 ? 'green' : 'red';
                return '<span style="color: ' + color + ';">' + Ext.util.Format.usMoney(v) + '</span>';
            }
        })
    }],
    collapsible: true,
    animCollapse: false,
    title: 'Expander Rows in a Collapsible Grid with lockable columns',
    iconCls: 'icon-grid',
    margin: '0 0 20 0',
    renderTo: Ext.getBody()
    initComponent: function() {

    var filter = Ext.ComponentQuery.query('[ftype="filters"]'); 
    filter.local = false;

    console.log('initComponent function in View has been called...');

    this.columns = [
          {tooltip:'The unque id associated with the current node', 
            hidden: true, header: 'id', width: 45, sortable: false, hideable: true, id: 'id'},
          {tooltip:'Friendly name of current node. This can be edited',
              filterable: true, header: [
                                         'Label',{
                                             text: 'action'}

                                         ],  dataIndex: 'label', flex: 1, sortable: true, 
              editor: {
                  xtype: 'textfield',
                  allowBlank: false
              }
          },
          {filterable: true, header: 'Unique', dataIndex: 'address_unique', flex: 1},
          {filterable: true, header: 'Address network', dataIndex: 'address_network', flex: 1},
          {tooltip:'The current node status', 
            filterable: true, header: 'Node status', dataIndex: 'online', flex: 1},
          {tooltip:'Tells whether this node has been accepted or not.', 
            hidden: true, filterable: true, header: 'Accepted', dataIndex: 'accepted', flex: 1},
          {tooltip:'Type of node: this can be a router, a leaf node, a virtual node',
            hidden: true, filterable: true, header: 'Type', dataIndex: 'type', flex: 1}
    ];
    Ext.getStore('M2MResources').guaranteeRange(0, 200);

    this.callParent(arguments);
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:12:26.100

我在这里有一个 ExtJs 3 的工作代码，

可能您需要进行某些更改才能使其适用于 Extjs 4。

```
/****************************************************
 * Filter row class.
 * @class Ext.ux.grid.FilterRow
 ************************************************/
Ext.namespace('Ext.ux.grid');
Ext.ux.grid.FilterRow = function(config) {
    Ext.apply(this, config);
    this.addEvents(
        "change"
    );
    Ext.ux.grid.FilterRow.superclass.constructor.call(this);
};

Ext.extend(Ext.ux.grid.FilterRow, Ext.util.Observable, {    
    init: function(grid) {
        this.grid = grid;
         this.grid.addClass('filter-row');
        var view = grid.getView();
        var headerTpl = new Ext.Template(
            '<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',
                '<thead><tr class="x-grid3-hd-row  ">{cells}</tr></thead>',
            "</table>"
        );
        Ext.applyIf(view, { templates: {} });
        view.templates.header = headerTpl;
        view.templates.hcell = new Ext.Template(
            '<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}">',
                '<div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',
                    '<span style="cursor:hand">{value}</span>&#160;&#160;',
                    '<img id="'+grid.id+'-SortImg-{id}" src="Images/Setting.gif" />',
                    '<div class="x-small-editor filterInput" id="'+grid.id+'-filter-{id}"></div>',
                '</div>',
            '</td>'
        ); 

        Ext.applyIf(view, { templates: {} });
        view.templates.header = headerTpl;

        grid.on('resize', this.syncFields, this);
        grid.on('columnresize', this.syncFields, this);
        grid.on('render', this.renderFields, this);
        // private
        var FilterRow = this;
        view.updateHeaders = function(){
            this.innerHd.firstChild.innerHTML = this.renderHeaders();
            this.innerHd.firstChild.style.width = this.getOffsetWidth();
            this.innerHd.firstChild.firstChild.style.width = this.getTotalWidth();
            FilterRow.renderFields();
        };
        Ext.apply(grid, {
            enableColumnHide_: false,
            enableColumnMove: false
        });

         this.on('change', function(){
            Ext.getBody().mask('Loading Please Wait...','x-mask-loading');
            var filterRecord = getData(grid);
            var wfStatus = 1;
            for(var i=0;i<filterRecord.length;i++)
            {
            var filterColumn = filterRecord[i].filterColumn;
                if(filterColumn == "FormStatus")
                {
                    var Status = filterRecord[i].filterText;
                    if(Status == "10")
                        wfStatus = 2;   
                }
            }
            getFilterXML(1,gblPageCount,0,chevronId,"",wfStatus,0,grid,filterRecord);

        }, grid); 

         grid.on('keypress', function(e){
            if (e.getKey() == e.ENTER) { 
            Ext.getBody().mask('Loading Please Wait...','x-mask-loading');
            var filterRecord = getData(grid);
            getFilterXML(1,gblPageCount,0,chevronId,"","",0,grid,filterRecord);

        }
        }, grid); 
    },

    renderFields: function() {          
        var grid = this.grid;
        var filterRow = this;
        var cm = grid.getColumnModel();
        var cols = cm.config;
        var gridId = grid.id;
        Ext.each(cols, function(col) {
            if (!col.hidden) {
                var filterDivId = gridId + "-filter-" + col.id;
                var sortImgId = grid.id+"-SortImg-"+ col.id;
                var editor      = col.filter;
                var clearFilter = col.clearFilter;
                if (editor) {
                    if(Ext.isIE){
                        col.filter = editor = editor.cloneConfig({value:editor.getValue()});
                    }
                    if (editor.getXType() == 'combo') {
                        editor.on('select', this.resetNoFilterOption, this, editor);
                    } else {
                    editor.on("keypress", this.onKeyPress, this);
                    }
                    new Ext.Panel({border:false, layout:'fit', items:editor, renderTo:filterDivId});
                }
                if(col.sortIcon)
                        document.getElementById(sortImgId).src =   col.sortIcon ;
            }
        }, this);
    },

    onKeyPress: function(field, e) {
        this.fireEvent("keypress", { filter: this });
    },

    resetNoFilterOption: function(editor) {
        if(editor.filterOption=='NoFilter'){//if filter value have been changed , but "NoFilter" menu is still selected then reset it 
            editor.filterOption = '';
        }
        this.onChange();
    },
    onChange: function() {  
        this.fireEvent("change", { filter: this });
    },

    clearFilters: function() {
        this.fireEvent("change", { filter: this, data: {} });
    },

    syncFields: function() {
        var grid = this.grid;
        var cm = grid.getColumnModel();
        var cols = cm.config;
        Ext.each(cols, function(col) {
            if (!col.hidden) {              
                var editor = col.filter; 
                if (editor) {
                    editor.setSize(col.width - 18);
                }else if(col.clearFilter && col.clearFilter.setSize){
                     col.clearFilter.setSize(col.width - 10);
                }
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:57:30.380

这是我使用的解决方案。与 EXTJS 4.1.x 一起工作：在文件夹中添加[这个](http://www.sencha.com/forum/showthread.php?150918-Grid-Header-Filters)插件（由 D. Zucconi 编写）：

分机\ux\grid\plugin

```
 /**
 * Plugin that enable filters on the grid header.<br>
 * The header filters are integrated with new Ext4 <code>Ext.data.Store</code> filters.<br>
 * It enables:
 * <ul>
 * <li>Instances of <code>Ext.form.field.Field</code> subclasses that can be used as filter fields into column header</li>
 * <li>New grid methods to control header filters (get values, update, apply)</li>
 * <li>New grid events to intercept plugin and filters events</li>
 * </ul>
 * 
 * The plugins also enables the stateful feature for header filters so filter values are stored with grid status if grid is stateful.<br>
 * 
 * # Enable filters on grid columns
 * The plugin checks the <code>filter</code> attribute that can be included into each column configuration.
 * The value of this attribute can be a <code>Ext.form.field.Field</code> configuration or an array of field configurations to enable more
 * than one filter on a single column.<br>
 * Field <code>readOnly</code> and <code>disabled</code> attributes are managed by the plugin to avoid filter update or filter apply.
 * The filter field configuration also supports some special attributes to control filter configuration:
 * <ul>
 * <li>
 *     <code>filterName</code>: the name of the filter that will be used when the filter is applied to store filters (as <code>property</code> of <code>Ext.util.Filter</code> attribute).
 *     If this attribute is not specified the column <code>dataIndex</code> will be used. <b>NOTE</b>: The filter name must be unique in a grid header. The plugin doesn't support correctly filters
 *     with same name.
 * </li>
 * </ul>
 * On the grid configuration the {@link #headerFilters} attribute is supported. The value must be an object with name-values pairs for filters to initialize. 
 * It can be used to initialize header filters in grid configuration.
 * 
 * # Plugin configuration
 * The plugin supports also some configuration attributes that can be specified when the plugin is created (with <code>Ext.create</code>).
 * These parameters are:
 * <ul>
 * <li>{@link #stateful}: Enables filters save and load when grid status is managed by <code>Ext.state.Manager</code>. If the grid is not stateful this parameter has no effects</li>
 * <li>{@link #reloadOnChange}: Intercepts the special {@link #headerfilterchange} plugin-enabled grid event and automatically reload or refresh grid Store. Default true</li>
 * <li>{@link #ensureFilteredVisible}: If one filter on column is active, the plugin ensures that this column is not hidden (if can be made visible).</li>
 * <li>{@link #enableTooltip}: Enable active filters description tootip on grid header</li>
 * </ul>
 * 
 * # Enabled grid methods
 * <ul>
 *     <li><code>setHeaderFilter(name, value, reset)</code>: Set a single filter value</li>
 *     <li><code>setHeaderFilters(filters, reset)</code>: Set header filters</li>
 *     <li><code>getHeaderFilters()</code>: Set header filters</li>
 *     <li><code>getHeaderFilterField(filterName)</code>: To access filter field</li>
 *     <li><code>resetHeaderFilters()</code>: Resets filter fields calling reset() method of each one</li>
 *     <li><code>clearHeaderFilters()</code>: Clears filter fields</li>
 *     <li><code>applyHeaderFilters()</code>: Applies filters values to Grid Store. The store will be also refreshed or reloaded if {@link #reloadOnChange} is true</li>
 * </ul>
 * 
 * # Enabled grid events
 * <ul>
 *     <li>{@link #headerfilterchange} : fired by Grid when some header filter changes value</li>
 *     <li>{@link #headerfiltersrender} : fired by Grid when header filters are rendered</li>
 *     <li>{@link #beforeheaderfiltersapply} : fired before filters are applied to Grid Store</li>
 *     <li>{@link #headerfiltersapply} : fired after filters are applied to Grid Store</li>
 * </ul>
 * 
 * @author Damiano Zucconi - http://www.isipc.it
 * @version 0.2.0
 */
Ext.define('Ext.ux.grid.plugin.HeaderFilters',{

    ptype: 'gridheaderfilters',

    alternateClassName: ['Ext.ux.grid.HeaderFilters', 'Ext.ux.grid.header.Filters'],

    requires: [
        'Ext.container.Container',
        'Ext.tip.ToolTip'
    ],

    grid: null,

    fields: null,

    containers: null,

    storeLoaded: false,

    filterFieldCls: 'x-gridheaderfilters-filter-field',

    filterContainerCls: 'x-gridheaderfilters-filter-container',

    filterRoot: 'data',

    tooltipTpl: '{[Ext.isEmpty(values.filters) ? this.text.noFilter : "<b>"+this.text.activeFilters+"</b>"]}<br><tpl for="filters"><tpl if="value != \'\'">{[values.label ? values.label : values.property]} = {value}<br></tpl></tpl>',

    lastApplyFilters: null,

    bundle: {
        activeFilters: 'Active filters',
        noFilter: 'No filter'
    },

    /**
    * @cfg {Boolean} stateful
    * Specifies if headerFilters values are saved into grid status when filters changes.
    * This configuration can be overridden from grid configuration parameter <code>statefulHeaderFilters</code> (if defined).
    * Used only if grid <b>is stateful</b>. Default = true.
    * 
    */
    stateful: true,

   /**
   * @cfg {Boolean} reloadOnChange
   * Specifies if the grid store will be auto-reloaded when filters change. The store
   * will be reloaded only if is was already loaded. If the store is local or it doesn't has remote filters
   * the store will be always updated on filters change.
   * 
   */
   reloadOnChange: true,

    /**
   * @cfg {Boolean} ensureFilteredVisible
   * If the column on wich the filter is set is hidden and can be made visible, the
   * plugin makes the column visible.
   */
    ensureFilteredVisible: true,

    /**
    * @cfg {Boolean} enableTooltip
    * If a tooltip with active filters description must be enabled on the grid header
    */
    enableTooltip: true,

    statusProperty: 'headerFilters',

    rendered: false,

   constructor: function(cfg) 
   {
       if(cfg)
       {
        Ext.apply(this,cfg);
       }
   },

   init: function(grid)
   {
       this.grid = grid;

        /*var storeProxy = this.grid.getStore().getProxy();
        if(storeProxy && storeProxy.getReader())
        {
            var reader = storeProxy.getReader();
            this.filterRoot = reader.root ? reader.root : undefined;
        }*/
        /**
         * @cfg {Object} headerFilters
         * <b>Configuration attribute for grid</b>
         * Allows to initialize header filters values from grid configuration.
         * This object must have filter names as keys and filter values as values.
         * If this plugin has {@link #stateful} enabled, the saved filters have priority and override these filters.
         * Use {@link #ignoreSavedHeaderFilters} to ignore current status and apply these filters directly.
         */
       if(!grid.headerFilters)
           grid.headerFilters = {};

       if(Ext.isBoolean(grid.statefulHeaderFilters))
       {
           this.setStateful(grid.statefulHeaderFilters);
       }

        this.grid.addEvents(
      /**
        * @event headerfilterchange
        * <b>Event enabled on the Grid</b>: fired when at least one filter is updated after apply.
        * @param {Ext.grid.Panel} grid The grid
        * @param {Ext.util.MixedCollection} filters The applied filters (after apply). Ext.util.Filter objects.
        * @param {Ext.util.MixedCollection} prevFilters The old applied filters (before apply). Ext.util.Filter objects.
        * @param {Number} active Number of active filters (not empty)
        * @param {Ext.data.Store} store Current grid store
        */    
        'headerfilterchange',
        /**
         * @event headerfiltersrender
         * <b>Event enabled on the Grid</b>: fired when filters are rendered
         * @param {Ext.grid.Panel} grid The grid
         * @param {Object} fields The filter fields rendered. The object has for keys the filters names and for value Ext.form.field.Field objects.
         * @param {Object} filters Current header filters. The object has for keys the filters names and for value the filters values.
        */
            'headerfiltersrender',
            /**
         * @event beforeheaderfiltersapply
         * <b>Event enabled on the Grid</b>: fired before filters are confirmed. If the handler returns false no filter apply occurs.
         * @param {Ext.grid.Panel} grid The grid
         * @param {Object} filters Current header filters. The object has for keys the filters names and for value the filters values.
         * @param {Ext.data.Store} store Current grid store
         */
        'beforeheaderfiltersapply',
        /**
         * @event headerfiltersapply
         *<b>Event enabled on the Grid</b>: fired when filters are confirmed.
         * @param {Ext.grid.Panel} grid The grid
         * @param {Object} filters Current header filters. The object has for keys the filters names and for value the filters values.
         * @param {Number} active Number of active filters (not empty)
         * @param {Ext.data.Store} store Current grid store
         */
        'headerfiltersapply'
        );

        this.grid.on({
            scope: this,
            columnresize: this.resizeFilterContainer,
            beforedestroy: this.onDestroy,
            beforestatesave: this.saveFilters,
            afterlayout: this.adjustFilterWidth
        });

        this.grid.headerCt.on({
            scope: this,
            afterrender: this.renderFilters
        });

        this.grid.getStore().on({
            scope: this,
            load: this.onStoreLoad
        });

        if(this.reloadOnChange)
        {
            this.grid.on('headerfilterchange',this.reloadStore, this);
        }

        if(this.stateful)
        {
            this.grid.addStateEvents('headerfilterchange');
        }

        //Enable new grid methods
        Ext.apply(this.grid, 
        {
            headerFilterPlugin: this,
            setHeaderFilter: function(sName, sValue)
            {
                if(!this.headerFilterPlugin)
                    return;
                var fd = {};
                fd[sName] = sValue;
                this.headerFilterPlugin.setFilters(fd);
            },
            /**
             * Returns a collection of filters corresponding to enabled header filters.
             * If a filter field is disabled, the filter is not included.
             * <b>This method is enabled on Grid</b>.
             * @method
             * @return {Array[Ext.util.Filter]} An array of Ext.util.Filter
             */
            getHeaderFilters: function()
            {
                if(!this.headerFilterPlugin)
                    return null;
                return this.headerFilterPlugin.getFilters();
            },
            /**
             * Set header filter values
             * <b>Method enabled on Grid</b>
             * @method
             * @param {Object or Array[Object]} filters An object with key/value pairs or an array of Ext.util.Filter objects (or corresponding configuration).
             * Only filters that matches with header filters names will be set
             */
            setHeaderFilters: function(obj)
            {
                if(!this.headerFilterPlugin)
                    return;
                this.headerFilterPlugin.setFilters(obj);
            },
            getHeaderFilterField: function(fn)
            {
                if(!this.headerFilterPlugin)
                    return;
                if(this.headerFilterPlugin.fields[fn])
                    return this.headerFilterPlugin.fields[fn];
                else
                    return null;
            },
            resetHeaderFilters: function()
            {
                if(!this.headerFilterPlugin)
                    return;
                this.headerFilterPlugin.resetFilters();
            },
            clearHeaderFilters: function()
            {
                if(!this.headerFilterPlugin)
                    return;
                this.headerFilterPlugin.clearFilters();
            },
            applyHeaderFilters: function()
            {
                if(!this.headerFilterPlugin)
                    return;
                this.headerFilterPlugin.applyFilters();
            }
        });
   },

    saveFilters: function(grid, status)
    {
        status[this.statusProperty] = (this.stateful && this.rendered) ? this.parseFilters() : grid[this.statusProperty];
    },

    setFieldValue: function(field, value)
    {
        var column = field.column;
        if(!Ext.isEmpty(value))
        {
            field.setValue(value);
            if(!Ext.isEmpty(value) && column.hideable && !column.isVisible() && !field.isDisabled() && this.ensureFilteredVisible)
            {
                column.setVisible(true);
            }
        }
        else
        {
            field.setValue('');
        }
    },

    renderFilters: function()
    {
        this.destroyFilters();

        this.fields = {};
        this.containers = {};

        var filters = this.grid.headerFilters;

        /**
         * @cfg {Boolean} ignoreSavedHeaderFilters
         * <b>Configuration parameter for grid</b>
         * Allows to ignore saved filter status when {@link #stateful} is enabled.
         * This can be useful to use {@link #headerFilters} configuration directly and ignore status.
         * The state will still be saved if {@link #stateful} is enabled.
         */
        if(this.stateful && this.grid[this.statusProperty] && !this.grid.ignoreSavedHeaderFilters)
        {
            Ext.apply(filters, this.grid[this.statusProperty]);
        }

        var storeFilters = this.parseStoreFilters();
        filters = Ext.apply(storeFilters, filters);

        var columns = this.grid.headerCt.getGridColumns(true);
        for(var c=0; c < columns.length; c++)
        {
            var column = columns[c];
            if(column.filter)
            {
                var filterContainerConfig = {
                    itemId: column.id + '-filtersContainer',
                    cls: this.filterContainerCls,
                    layout: 'anchor',
                    bodyStyle: {'background-color': 'transparent'},
                    border: false,
                    width: column.getWidth(),
                    listeners: {
                        scope: this,
                        element: 'el',
                        mousedown: function(e)
                        {
                            e.stopPropagation();
                        },
                        click: function(e)
                        {
                            e.stopPropagation();
                        },
                        keydown: function(e){
                             e.stopPropagation();
                        },
                        keypress: function(e){
                             e.stopPropagation();
                             if(e.getKey() == Ext.EventObject.ENTER)
                             {
                                 this.onFilterContainerEnter();
                             }
                        },
                        keyup: function(e){
                             e.stopPropagation();
                        }
                    },
                    items: []
                }

                var fca = [].concat(column.filter);

                for(var ci = 0; ci < fca.length; ci++)
                {
                    var fc = fca[ci];
                    Ext.applyIf(fc, {
                        filterName: column.dataIndex,
                        fieldLabel: column.text || column.header,
                        hideLabel: fca.length == 1
                    });
                    var initValue = Ext.isEmpty(filters[fc.filterName]) ? null : filters[fc.filterName];
                    Ext.apply(fc, {
                        cls: this.filterFieldCls,
                        itemId: fc.filterName,
                        anchor: '-1'
                    });
                    var filterField = Ext.ComponentManager.create(fc);
                    filterField.column = column;
                    this.setFieldValue(filterField, initValue);
                    this.fields[filterField.filterName] = filterField;
                    filterContainerConfig.items.push(filterField);
                }

                var filterContainer = Ext.create('Ext.container.Container', filterContainerConfig);
                filterContainer.render(column.el);
                this.containers[column.id] = filterContainer;
                column.setPadding = Ext.Function.createInterceptor(column.setPadding, function(h){return false});
            }
        }

        if(this.enableTooltip)
        {
            this.tooltipTpl = new Ext.XTemplate(this.tooltipTpl,{text: this.bundle});
            this.tooltip = Ext.create('Ext.tip.ToolTip',{
                target: this.grid.headerCt.el,
                //delegate: '.'+this.filterContainerCls,
                renderTo: Ext.getBody(),
                html: this.tooltipTpl.apply({filters: []})
            });        
            this.grid.on('headerfilterchange',function(grid, filters)
            {
                var sf = filters.filterBy(function(filt){
                    return !Ext.isEmpty(filt.value);
                });
                this.tooltip.update(this.tooltipTpl.apply({filters: sf.getRange()}));
            },this);
        }

        this.applyFilters();
        this.rendered = true;
        this.grid.fireEvent('headerfiltersrender',this.grid,this.fields,this.parseFilters());
    },

    onStoreLoad: function()
    {
        this.storeLoaded = true;
    },

    onFilterContainerEnter: function()
    {
        this.applyFilters();
    },

    resizeFilterContainer: function(headerCt,column,w,opts)
    {
         if(!this.containers)             return;
        var cnt = this.containers[column.id];
        if(cnt)
        {
            cnt.setWidth(w);
            cnt.doLayout();
        }
    },

    destroyFilters: function()
    {
        this.rendered = false;
         if(this.fields)
         {
             for(var f in this.fields)
                 Ext.destroy(this.fields[f]);
             delete this.fields;
         }

         if(this.containers)
         {
             for(var c in this.containers)
                 Ext.destroy(this.containers[c]);
             delete this.containers;
         }
    },

    onDestroy: function()
    {
        this.destroyFilters();
        Ext.destroy(this.tooltip, this.tooltipTpl);
    },

     adjustFilterWidth: function() 
    {
        if(!this.containers) return;
        var columns = this.grid.headerCt.getGridColumns(true);        
        for(var c=0; c < columns.length; c++) 
        {           
            var column = columns[c];            
            if (column.filter && column.flex) 
            {               
                this.containers[column.id].setWidth(column.getWidth()-1);            
            }
        }
     },

    resetFilters: function()
    {
        if(!this.fields)
            return;
        for(var fn in this.fields)
        {
            var f = this.fields[fn];
            if(!f.isDisabled() && !f.readOnly && Ext.isFunction(f.reset))
                f.reset();
        }
        this.applyFilters();
    },

    clearFilters: function()
    {
        if(!this.fields)
            return;
        for(var fn in this.fields)
        {
            var f = this.fields[fn];
            if(!f.isDisabled() && !f.readOnly)
                f.setValue('');
        }
        this.applyFilters();
    },

    setFilters: function(filters)
    {
        if(!filters)
            return;

        if(Ext.isArray(filters))
        {
            var conv = {};
            Ext.each(filters, function(filter){
                if(filter.property)
                {
                    conv[filter.property] = filter.value; 
                }
            });
            filters = conv;
        }
        else if(!Ext.isObject(filters))
        {
            return;
        }

        this.initFilterFields(filters);
        this.applyFilters();
    },

    getFilters: function()
    {
        var filters = this.parseFilters();
        var res = new Ext.util.MixedCollection();
        for(var fn in filters)
        {
            var value = filters[fn];
            var field = this.fields[fn];
            res.add(new Ext.util.Filter({
                property: fn,
                value: value,
                root: this.filterRoot,
                label: field.fieldLabel
            }));
        }
        return res;
    },

    parseFilters: function()
    {
        var filters = {};
        if(!this.fields)
            return filters;
        for(var fn in this.fields)
        {
            var field = this.fields[fn];
            if(!field.isDisabled() && field.isValid())
                filters[field.filterName] = field.getSubmitValue();
        }
        return filters;
    },

    initFilterFields: function(filters)
    {
        if(!this.fields)
            return;

        for(var fn in  filters)
        {
            var value = filters[fn];
            var field = this.fields[fn];
            if(field)
            {
                this.setFieldValue(filterField, initValue);
            }
        }
    },

    countActiveFilters: function()
    {
        var fv = this.parseFilters();
        var af = 0;
        for(var fn in fv)
        {
            if(!Ext.isEmpty(fv[fn]))
                af ++;
        }
        return af;
    },

    parseStoreFilters: function()
    {
        var sf = this.grid.getStore().filters;
        var res = {};
        sf.each(function(filter){
            var name = filter.property;
            var value = filter.value;
            if(name && value)
            {
                res[name] = value;            
            }
        });
        return res;
    },

    applyFilters: function()
    {
        var filters = this.parseFilters();
        if(this.grid.fireEvent('beforeheaderfiltersapply', this.grid, filters, this.grid.getStore()) !== false)
        {
            var storeFilters = this.grid.getStore().filters;
            var exFilters = storeFilters.clone();
            var change = false;
            var active = 0;
            for(var fn in filters)
            {
                var value = filters[fn];

                var sf = storeFilters.findBy(function(filter){
                    return filter.property == fn;
                });

                if(Ext.isEmpty(value))
                {
                    if(sf)
                    {
                        storeFilters.remove(sf);
                        change = true;
                    }
                }
                else
                {
                    var field = this.fields[fn];
                    if(!sf || sf.value != filters[fn])
                    {
                        var newSf = new Ext.util.Filter({
                            root: this.filterRoot,
                            property: fn,
                            value: filters[fn],
                            label: field.fieldLabel
                        });
                        if(sf)
                        {
                            storeFilters.remove(sf);
                        }
                        storeFilters.add(newSf);
                        change = true;
                    }
                    active ++;
                }
            }

            this.grid.fireEvent('headerfiltersapply', this.grid, filters, active, this.grid.getStore());
            if(change)
            {
                var curFilters = this.getFilters();
                this.grid.fireEvent('headerfilterchange', this.grid, curFilters, this.lastApplyFilters, active, this.grid.getStore());
                this.lastApplyFilters = curFilters;
            }
        }
    },

    reloadStore: function()
    {
        var gs = this.grid.getStore();
        if(this.grid.getStore().remoteFilter)
        {
            if(this.storeLoaded)
            {
                gs.currentPage = 1;
                gs.load();
            }
        }
        else
      {
            if(gs.filters.getCount()) 
         {
                if(!gs.snapshot)
                    gs.snapshot = gs.data.clone();
                else
                {
                    gs.currentPage = 1;
                }
            gs.data = gs.snapshot.filter(gs.filters.getRange());
            var doLocalSort = gs.sortOnFilter && !gs.remoteSort;
            if(doLocalSort)
                {
                    gs.sort();
                }
            // fire datachanged event if it hasn't already been fired by doSort
            if (!doLocalSort || gs.sorters.length < 1) 
            {
                gs.fireEvent('datachanged', gs);
                }
            }
           else
           {
                if(gs.snapshot)
                {
                    gs.currentPage = 1;
                    gs.data = gs.snapshot.clone();
                 delete gs.snapshot;
                 gs.fireEvent('datachanged', gs);
                }
            }
        }
    }
}); 
```

在您的网格类中添加以下行：

*   网格插件：

    ```
    plugins: [Ext.create('Ext.ux.grid.plugin.HeaderFilters')/*, ... other plugins here */] 
    ```

*   列配置：

    ```
    columns:[{ /*other configurations for your column:*/
           header: 'Accepted', dataIndex: 'accepted', flex: 1,
           /*filter plugin configuration:*/
           filterable: true, filter:{xtype: 'textfield' /* i've used a simple textbox*/}}
           /*, other columns here */] 
    ```

# java - Jasper 报告创建 - 抑制和隐藏分页标题

> ID：14610398
> 
> 赞同：1
> 
> 时间：2013-01-30T17:46:19.887
> 
> 标签：java, excel, pdf, pagination, jasper-reports

我正在开发一个 Java 应用程序来从 iReports 中创建的“.jasper”报告文件生成报告。当以 PDF 格式生成报告时，我想在每个单独的页面上保留列标签和分页信息。但是，当导出为 excel 电子表格或纯 HTML 时，我只需要列标题一次。谁能建议我可以在 Java 中以编程方式将设置传递给 Jasper API 来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:57:13.110

您需要在导出器中设置几个设置才能将其导出为一页：

```
reportExporter.setParameter(JRXlsExporterParameter.IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS, Boolean.TRUE); 
reportExporter.setParameter(JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.FALSE); 
```

现在，这只会让您获得一部分。因为它仍然会分别打印一次页眉和页脚。您需要在报告中添加一个布尔参数，指示是否打印这些波段。你可以`printWhenExpression`在乐队中设置这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T06:33:25.890

您可以有条件地添加`JRParameter.IS_IGNORE_PAGINATION`如下以在导出到 excel 时抑制列标题的生成。适用于 Jasper 报告 5.5。

```
HashMap<String, Object> parameters = new HashMap<String, Object>(); 
        parameters.put(JRParameter.IS_IGNORE_PAGINATION, Boolean.TRUE);

JasperPrint jasperPrint = JasperFillManager.fillReport(compiledReport, parameters, 
                (jrDataSource == null) ? new JREmptyDataSource() : jrDataSource); 
```

# android - 导航后 iframe 中的 YouTube 视频继续播放 - Android 和 Phonegap

> ID：14610399
> 
> 赞同：0
> 
> 时间：2013-01-30T17:46:21.137
> 
> 标签：android, cordova, jquery-mobile, youtube, childbrowser

该问题类似于在 Windows 8 上询问[导航后 Webview 中 iframe 中的 YouTube 视频继续播放](https://stackoverflow.com/questions/13757186/youtube-video-in-an-iframe-in-webview-continues-to-play-after-navigation)

我正在使用 Phonegap 创建一个 android 应用程序。我能够使用 Childbrowser 插件和帮助 Youtube iframe 代码显示 Youtube 视频，该代码存在于我的服务器上的 php 文件中。

但是，如果用户点击后退按钮，则会显示应用程序屏幕并且您可以听到视频的声音。

调用子浏览器的代码如下：

```
 $('#videobutton').attr('onclick', 'javascript:window.plugins.childBrowser.showWebPage("http://example.com/sundeep/video.php?trailer='+trailer+'", { showLocationBar: false });'); 
```

我知道要关闭 childbrowser 您需要放置以下代码：

```
window.plugins.childBrowser.onClose(); 
```

但是我不知道在哪里放置上面的代码。

**解决方法** 我什至尝试了一种解决方法，方法是使用 childbrowser 打开包含 iframe 代码的本地页面（video.html），如下所示：

```
 $('#videobutton').attr('onclick', 'javascript:window.plugins.childBrowser.showWebPage("file:///android_asset/www/video.html", { showLocationBar: false });'); 
```

并使用 window.localStorage.setItem 我能够传递和显示视频。我有下面的代码，理论上应该可以解决原始问题但不起作用：

```
 <script type="text/javascript" charset="utf-8">

// Call onDeviceReady when Cordova is loaded.
//
// At this point, the document has loaded but cordova-2.3.0.js has not.
// When Cordova is loaded and talking with the native device,
// it will call the event `deviceready`.
//
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

// Cordova is loaded and it is now safe to call Cordova methods
//
function onDeviceReady() {
    // Register the event listener
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle the back button
//
function onBackKeyDown() {

    window.plugins.childBrowser.onClose();
}

</script> 
```

*   Apache Cordova (Phonegap) - 2.3.0 Jquery Mobile - 1.2 Android - Jelly bean (4.2)

任何帮助表示赞赏！真的卡在这个了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:09:03.243

我也有同样的问题。我使用的解决方法是覆盖 onBackPressed() 并在播放视频的同一 web 视图中加载“about:blank”。非常适合我！试试看。祝你好运 ：-）

- 约格什

# php - 检查记录集是否存在 PHP 活动记录

> ID：14610400
> 
> 赞同：1
> 
> 时间：2013-01-30T17:46:21.407
> 
> 标签：php, phpactiverecord

简而言之，当我使用 php activerecord 提取记录时，我想在继续之前检查它是否存在。必须有一种更简单的方法来做到这一点，因为每种情况似乎都不同，我实际上不确定它们中的任何一个是否正常工作。

例如：

```
$var = Model::find_by_pk("something");

if (!empty($var)) { ... //记录存在 }

```

这是否会捕获所有异常，或者如果记录对于单个记录拉取根本没有返回任何行？

然后我试过这个：

```
if (count($var->errors) == 0) { ... //记录存在 }

```

这似乎适用于结果集，但不适用于单条记录。我尝试引用不存在的对象时遇到异常。

我看到 Model::exists() 但这是否意味着我需要返回并更改我所有的 activerecord 调用？（[http://www.phpactiverecord.org/docs/ActiveRecord/Model#methodexists](http://www.phpactiverecord.org/docs/ActiveRecord/Model#methodexists)）？

总而言之，检查 php.activerecord 结果是否有数据的简单方法（最好是通用和/或防弹）是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:54:59.077

应该够了

```
$var = Model::find_by_pk("something");
if($var){
    //winning
}else{
    //not found
} 
```

你不能做的原因`if (count($var->errors) == 0)`是当你没有被击中时，`$var`它不是一个对象，所以你不能检查`errors`它。

请注意，如果你这样做`find`，如果它不存在，你会得到一个异常，而不是没有结果：

```
 try{
     $var = Model::find($id);
 }catch (\Exception $e){
      //not found
 } 
```

# c - 日食声纳 c 项目

> ID：14610402
> 
> 赞同：0
> 
> 时间：2013-01-30T17:46:27.640
> 
> 标签：c, eclipse, sonarqube

我有一个`C`嵌入式项目。由于`sonar-runner`. 在 Eclipse 中，我将声纳性质添加到我的项目中。但是当我想运行本地分析时，我会收到以下消息：未找到带有键“cpp”的语言。

当我在声纳组中观看项目属性时，语言被强制为 cpp 并且我无法更改它......改变它的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:09:01.440

目前，Sonar Eclipse 与 C 项目（仅 C++）不兼容，您可以[在安装页面的兼容性矩阵中](http://docs.codehaus.org/display/SONAR/Installing+Sonar+in+Eclipse)看到。

显然，我们将致力于支持 C 项目。

# android - Android CountDownTimer 不工作

> ID：14610403
> 
> 赞同：0
> 
> 时间：2013-01-30T17:46:32.207
> 
> 标签：android, intentservice, countdowntimer

我正在编写一个服务意图，它扫描网络以查找来自网络上另一台设备的 UDP 广播。当找到设备时，它会向主要活动发送一条消息，然后它会做它的事情。问题是我需要为此扫描设置某种超时，所以如果它在一定时间后没有找到设备，我可以告诉主要活动。我的第一个想法是使用倒数计时器，但它不起作用。这是扫描广播的方法的代码

```
public void getIP()
    {
        new CountDownTimer(5000, 1000){

            @Override
            public void onFinish() {
                // TODO Auto-generated method stub
                System.out.println("Timer Finished");

            }

            @Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub

            }

        }.start();
        try {
            UDPSocket = new DatagramSocket(55555, InetAddress.getByName("255.255.255.255"));
            UDPSocket.setBroadcast(true);
            byte[] buf = new byte[512];
            DatagramPacket packet = new DatagramPacket(buf, buf.length);
            while(shouldContinue){
                try {
                    UDPSocket.receive(packet);
                    InetAddress senderAddress = packet.getAddress();
                    String Sender = senderAddress.getHostAddress();

                    UDPSocket.close();
                    shouldContinue = false;

                    pingIP(Sender);

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
            sendIPBack("device not found local");

        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

sendIPBack 只是一个向主活动返回消息的方法。知道为什么 onFinish 和 onTick 方法从不执行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:36:29.853

所以我在这里发现了这个问题。倒数计时器没有启动实际上并不是问题，而是它在我的 UDP 侦听器的同一线程中运行，该侦听器正在锁定线程。您绝对可以在服务或意图服务中运行倒数计时器。希望这对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T10:51:06.237

据我所知，这归结为 IntentService 的工作原理。基本上，当您启动 IntentService 时，它​​会创建一个工作线程来完成它需要做的任何工作，然后它将自行终止。

在您的代码中，一旦 doWakefulWork 退出，IntentService 就会终止。因此，您的 CountDownTimer 将与 IntentService 一起终止。

如果你想做这种事情，你应该使用常规服务而不是 IntentService。

# php - 加载动态生成的缩略图

> ID：14610406
> 
> 赞同：0
> 
> 时间：2013-01-30T17:46:43.443
> 
> 标签：php, thumbnails, loading

我有一个图像库，它从远程 JSON 文件中获取其图像（图像链接），生成每个图像的缩略图（因为来自 JSON 的图像太小），最后将其转储给用户。虽然这样做，但用户不知道发生了什么。在生成所有缩略图之前，他们会看到一个空白的“白色”页面。

我将如何以这样一种方式实现画廊，当用户打开画廊时，他们可以看到正在加载图像（通过“加载”微调器 gif），并且一旦生成缩略图，它立即替换微调器并坐在原位而不等待其他人加载。

[这是我正在尝试完成的视觉示例。](http://reddpics.com/%20Click)注意：这可能是也可能不是 NSFW。请小心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:40:08.787

在网站上（您提供的链接），JSON-answer 是 json-view 中的 html 代码，例如：

```
..<li><a href='...'><img src="link-to-thumb"/></a></li>
<li><a href='...'><img src="link-to-thumb"/></a></li>
<li><a href='...'><img src="link-to-thumb"/></a></li>... 
```

当 json-answer 出现时，javascript 将此代码添加到块的末尾。图像具有背景图像 - “加载”微调器 gif。加载图像时，其视图会覆盖背景。缩略图生成一次：在第一次加载时，并存储在缩略图文件夹中。下次如果图像未更改且缩略图未删除 - 加载缩略图而不生成它

# php - list.phtml 上带有 JQUERY 的 Magento 数量框

> ID：14610410
> 
> 赞同：0
> 
> 时间：2013-01-30T17:47:03.653
> 
> 标签：php, ajax, magento, jquery

我想在 magento 的 list.phtml 上添加一个数量框。目前盒子的代码是：

```
<div>
       <button type="button" style=" margin-left:185px; min-height:48px;"title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocationAjax('<?php echo $this->getAddToCartUrl($_product) ?>','<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button><br /><br/>
       </div> 
```

现在这适用于仅添加 1 个产品，但没有数量框。我怎样才能在不重新加载页面的情况下让它工作？

这些是我在该页面底部加载的脚本。 [http://pastebin.com/0bdey92h](http://pastebin.com/0bdey92h)

希望有人来救我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:52:01.707

尝试这个：

```
jQuery('button.btn-cart').parent().append('<input type="text" name="qty">'); 
```

# jquery - Twitter Bootstrap css 类的 jQuery show() 隐藏

> ID：14610412
> 
> 赞同：89
> 
> 时间：2013-01-30T17:47:14.657
> 
> 标签：jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap，我注意到 jQuery `show()`or`fadeIn()`不会使标有类的 DOM 元素`hidden`出现，因为 jQuery 函数仅删除`display: none`规范。但是，`visibility`仍然设置为`hidden`。

我想知道解决此问题的最佳方法是什么？

1.  移除`hidden`元素上的类
2.  更改可见性属性
3.  覆盖我自己的css中的隐藏类

特别是，我想知道用 jQuery 或 css 解决这个问题是否更好以及为什么。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2014-08-13T11:19:34.857

您正在寻找的 css 类是`.collapse`. 这将元素设置为`display: none;`

所以使用`$('#myelement').show()`将正常工作。

**更新：** Bootstrap v3.3.6 已将 .collapse 更新为：

```
.collapse {
  display: none;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-30T17:54:12.647

这将使您的不可见元素淡入并删除该类

```
$('#element.hidden').css('visibility','visible').hide().fadeIn().removeClass('hidden'); 
```

[http://jsfiddle.net/7qxVL/](http://jsfiddle.net/7qxVL/)

如果您真的不需要元素不可见（即占用空间），那么您可能想要重新定义 .hidden （在您的本地 css 中，不要更改引导源，甚至更好，在您的本地 LESS 文件中）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-02T16:26:08.963

警告：

bootstrap 3.3.0 刚刚将 .collapse 更改为：

```
.collapse {
  display: none;
  visibility: hidden;
} 
```

这是 jQuery.show() 的一个重大变化，我不得不恢复为内联：

```
<div class="alert alert-danger" style="display:none;" >
</div> 
```

继续使用 jQuery 如下：

```
$('.alert').html("Change a few things up and try submitting again.").show() 
```

我可以在 bootstrap 3.3.0 中找到仅应用 'display:none' 的唯一类是

```
.navbar {
  display: none;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-03T10:03:00.240

我有同样的问题。我使用了这个补丁：

```
$(function() {
  $('.hidden').hide().removeClass('hidden');
}); 
```

然后我遇到了另一个问题，因为我的应用程序会生成新元素并附加/前置它们。我最终所做的是在生成我所做的新元素之后：

```
var newEl = ...;
$(newEl).find('.hidden').hide().removeClass('hidden'); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-20T11:04:28.083

对我来说，这是因为 bootstrap 正在使用`!important`hack 来进行类隐藏和隐藏。

所以不能使用`show()`jquery 提供的 etc 方法。相反，您必须覆盖更可怕的代码来覆盖 hacky 代码。

```
$('#myelement').attr('style', 'display: block !important'); 
```

!important 是最后的选择，实际上不应该在像引导程序这样的核心库中使用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-06T17:09:08.450

这可行，但我将尝试第一个答案并将类更改为`.collapse`.

```
.toggleClass('hidden') 
```

# c# - 您如何在 WPF 中仅检查 Visual Studio 2010 设计器（以便 Blend 的设计器不是目标）？

> ID：14610419
> 
> 赞同：2
> 
> 时间：2013-01-30T17:47:27.340
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio, expression-blend

我发现在许多情况下，如果 WPF UserControl 包含一个控件在代码中基于控件的加载事件（例如转换到不同的 Visual State通过类似的电话`VisualStateManager.GoToState(this, "AfterLoaded", true);`）。

我解决这些设计器崩溃的典型方法是使用控件构造函数中的[`DesignerProperties.GetIsInDesignMode(this)`方法：](https://stackoverflow.com/a/834332/718325)

```
public MyControl()
{
    // prevent designer crashes
    if (DesignerProperties.GetIsInDesignMode(this))
        return;

    Loaded += MyControlLoaded;
    Unloaded += MyControlUnloaded;
    IsVisibleChanged += MyControlIsVisibleChanged;    
} 
```

这种方法同时针对 Visual Studio 2010 和 Expression Blend 4，使我的设计图面再次可见。但是，它还删除了设计人员可能为我提供的任何设计时预览（例如上面提到的加载事件的 VSM 状态更改）。特别是，Blend 能够在其设计器中为我提供该预览（如果我切换到不同的 Blend 选项卡，然后切换回原始选项卡，我会看到加载的动画运行）。此外，对于一些我尚未应用上述方法的控件，Visual Studio 2010 的设计器会崩溃，而 Blend 4 的设计器不会。因此，我想做的是**仅**检查Visual Studio 2010 的设计器，以便我可以让 Blend 的设计器通过并提供其预览功能。

这种能力的好处是我不需要经常构建和运行应用程序（以查看加载的动画之类的东西），因为 Blend 的设计师可以给我它的预览，从而节省了时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:13:15.430

我发现了一些有用的东西。这个想法是使用`DesignerProperties.GetIsInDesignMode(...)`结合**检查运行代码的进程名称的方法**。

对于我的 VisualStudio 2010，我看到进程名称是“devenv”：

![Visual Studio 进程名称](../Images/3736b3b6d7848c947d840c4d99161b09.png)

然后我发现[这篇文章](https://stackoverflow.com/a/2427420/718325)解释`System.Diagnostics.Process`了我们需要获得的过程信息。知道了这一点，我创建了这个辅助方法：

```
private bool IsVisualStudio2010DesignerRunning()
{
    using (var process = System.Diagnostics.Process.GetCurrentProcess())
    {
        const string visualStudio2010ProcessName = "devenv";

        if (process.ProcessName.ToLowerInvariant().Contains(visualStudio2010ProcessName)
            && DesignerProperties.GetIsInDesignMode(this))
        {
            return true;
        }
        else
            return false;
    }
} 
```

## 为了说明这是有效的，这里是它的应用示例

它在我编写的名为 SunkenBorder 的自定义控件中。这个控件有一个行为，它在第一次机会时转换到某个 VisualState，因此这个状态是用户看到的初始状态。此代码在`OnApplyTemplate()`覆盖中执行。Expression Blend 4 能够在运行时处理和显示它。另一方面，Visual Studio 2010 的设计器完全崩溃，因为它无法执行`Storyboard`调用`VisualStateManager.GoToState(...)`.

为了更好地说明这是有效的，我在`OnApplyTemplate()`针对 VS 2010 设计器的代码中将控件的背景属性设置为蓝色（参见屏幕截图）。

```
 /// Non-static constructor
    public SunkenBorder()
    {
        // Avoid Visual Studio 2010 designer errors
        if (IsVisualStudio2010DesignerRunning())
            return;

        // Expression Blend 4's designer displays previews of animations 
        //  that these event handlers initiate!
        Initialized += new EventHandler(SunkenBorder_Initialized);
        Loaded += new RoutedEventHandler(SunkenBorder_Loaded);
        Unloaded += new RoutedEventHandler(SunkenBorder_Unloaded);

        IsVisibleChanged += new DependencyPropertyChangedEventHandler(SunkenBorder_IsVisibleChanged);
    }

    // ...

    /// Used to set the initial VSM state (its the first opportunity).
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        if (IsVisualStudio2010DesignerRunning())
        {
            // set a property just to illustrate that this targets only Visual Studio 2010:
            this.Background = Brushes.Blue;
            // return before doing VisualState change so Visual Studio's designer won't crash
            return;
        }
        // Blend 4 executes this at design-time just fine
        VisualStateManager.GoToState(this, "InitialState", false);

        // ...
    } 
```

这是 Expression Blend 4 的预览效果（注意 SunkenBorder 控件的背景不是蓝色的）...

![Blend 4 设计器预览](../Images/d1a559b9140aa9b859d190b34beaa523.png)

...这就是 Visual Studio 的设计师向我展示的内容。现在它的设计器没有崩溃，并且 SunkenBorder 控件的背景都是蓝色的......

![Visual Studio 2010 设计器预览](../Images/71f5985ab5351eebf7c0ee23c3802829.png)

...最后，这是运行时的结果（同样，SunkenBorder 控件的背景不是蓝色的）：

![在此处输入图像描述](../Images/42fe3bd02042fb7173239bf486a35d41.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:45:45.367

（注意：现在无法测试/验证，稍后会这样做）

看起来`Silverlight`人们在进行“In Designer”检查时离开了农场，所以现在有两个属性：

*   `IsInDesignMode`，这似乎对 VS2010 始终有效

*   `IsInDesignTool`，这似乎对 Blend 工作半一致

还发现了这个：

[http://www.arrangeactassert.com/how-to-use-the-designerproperties-isindesigntool-property-to-populate-controls-with-design-time-data-in-silverlight-using-expression-blend/](http://www.arrangeactassert.com/how-to-use-the-designerproperties-isindesigntool-property-to-populate-controls-with-design-time-data-in-silverlight-using-expression-blend/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:56:55.317

您最好制作一个[设计时视图模型](http://blogs.microsoft.co.il/blogs/tomershamam/archive/2010/12/17/blendability-part-i-design-time-viewmodel.aspx)。这样就不必在控件的构造函数中检查任何类型的设计器。

# windows - 在 Qt5 QWidget::winEvent 中不存在

> ID：14610426
> 
> 赞同：2
> 
> 时间：2013-01-30T17:47:55.953
> 
> 标签：windows, qt, qt5

我使用`::winEvent()`方法来收听 Windows 上的系统级通知。在 Qt5 中，这种方法不再存在；所以我的应用程序没有收到任何关于添加/删除设备的系统级消息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T17:47:55.953

事实证明，它`QWidget::winEvent()`已被新的（和改进的）`QWidget::nativeEvent()`方法所取代。

[http://qt-project.org/doc/qt-5.0/qtwidgets/qwidget.html#nativeEvent](http://qt-project.org/doc/qt-5.0/qtwidgets/qwidget.html#nativeEvent)

新方法与旧方法具有不同的签名，但在我的情况下，我只需要切换到新方法，而不需要更改重载方法内部的代码。

此外，新方法中还有一个名为“event_type”的新参数也可以派上用场。

# java - 如何使用按钮延迟充气

> ID：14610429
> 
> 赞同：0
> 
> 时间：2013-01-30T17:48:01.223
> 
> 标签：java, android

好吧，我是这个词的新人，我试图延迟充气，因为当你按下一个按钮时，其他按钮中的动画就会发生并且充气也会发生。

但是你看不到动画，因为 inflate 来得很快，所以我想将 inflate 延迟 2000 毫秒，这样你就可以先看到动画，然后再看到 inflate 中的信息。

我使用相同的按钮来调用动画和充气。

这是我的代码：

```
 case R.id.btnsalud:

    //This is the code for animations   

        //This is the loader for all the animations that is used for the button
        {final Animation animBounceForSalud = AnimationUtils.loadAnimation(this, R.anim.bounce);
        final Animation animBounceForSalud1 = AnimationUtils.loadAnimation(this, R.anim.bounce1);
        //This object is the objects (buttons) whom is applied the animation
        final Button animSalud = (Button)findViewById(R.id.btnobra);
        final Button animSalud1 = (Button)findViewById(R.id.btnprotesta);
        //This object (button) is the one which applies the animation to the other buttons
        Button btnBounceSalud = (Button)findViewById(R.id.btnsalud);      
    animSalud.startAnimation(animBounceForSalud);
    animSalud1.startAnimation(animBounceForSalud1);
    animSalud.setVisibility(500);
    animSalud1.setVisibility(500);}

    //This is the code for inflate  
    //Check if the Layout already exists
    LinearLayout hiddenLayout1 = (LinearLayout)findViewById(R.id.hiddenLayout);
    if((hiddenLayout1 == null)){
        //Right here is where you can defined in which layout is going to 
        //inflate the hidden layout
        LinearLayout myLayout = (LinearLayout)findViewById(R.id.inflateposition0);
        View hiddenInfo = getLayoutInflater().inflate(R.layout.salud, myLayout, false);
        myLayout.addView(hiddenInfo);

    }

    break; 
```

任何答案将不胜感激：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:16:15.517

您应该为动画设置一个监听器（[http://developer.android.com/reference/android/view/animation/Animation.html#setAnimationListener(android.view.animation.Animation.AnimationListener)](http://developer.android.com/reference/android/view/animation/Animation.html#setAnimationListener(android.view.animation.Animation.AnimationListener))）并且只在侦听器报告动画已完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:49:21.470

您可以在动画定义中设置持续时间参数来确定动画应该有多长。在 Java 中有 setDuration(time) 方法，在 XML 中定义动画有 android:duration 属性。 [http://developer.android.com/guide/topics/resources/animation-resource.html](http://developer.android.com/guide/topics/resources/animation-resource.html)

# php - 如何用换行符替换 \r\n

> ID：14610431
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:48:15.850
> 
> 标签：php

我在 PHP 中有一个注释系统，当用户在 textarea 中键入换行符时，它显示为 rn（注意：我正在清理这个输入并使用 htmlentities()，并且我有自定义标记）。

这是我当前的代码（包括尝试换行符）：

```
$comment_content =stripslashes(str_replace('\r\n', '@//', mysql_real_escape_string($_POST['comment_content'])));
$comment_content = htmlentities($comment_content);
$comment_content = mysql_real_escape_string(str_replace("====", "<span class=".$bold.">", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("===", "</span>", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("~~~", "<span class=".$italic.">", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("~~", "</span>", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("++++", "<span class=".$big.">", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("+++", "</span>", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("___", "<span class=".$underline.">", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("__", "</span>", $comment_content));
$comment_content = mysql_real_escape_string(str_replace("@//", "<br>", $comment_content));
$comment_content = comment_sanitize($comment_content); 
```

这就是我消毒的方式：

```
function sanitize($sql, $formUse = true) {
    $sql = preg_replace("/(from|script|src|select|insert|delete|where|drop table|show tables|`|,|'|\*|\\\\)/i","",$sql);
    $sql = trim($sql);
    if(!$formUse || !get_magic_quotes_gpc()) {
        $sql = addslashes($sql);
    }
    return $sql;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:51:38.907

你不要`htmlentities`在路上使用，你在输出上使用它。您应该转义以输入数据库，然后在输出中显示换行符，请考虑：

```
nl2br(htmlentities($comment)); 
```

# javascript - Jquery 在引号中设置引号

> ID：14610432
> 
> 赞同：0
> 
> 时间：2013-01-30T17:48:21.097
> 
> 标签：javascript, jquery

我有这样的代码：

```
$("input[id="+id.slice(0,-1)+"-br-"+brand+"].qnt_to_cart").show(); 
```

这产生了我：

```
input[id=02620-br-FEBI BILSTEIN].qnt_to_cart 
```

但我需要看到类似的东西：

```
input[id="02620-br-FEBI BILSTEIN"].qnt_to_cart 
```

那我需要写什么？如何在报价中设置报价？

**更新**

为什么我仍然看到：

```
Uncaught Error: Syntax error, unrecognized expression: input[id=02620-br-FEBI BILSTEIN].to-cart 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:49:27.537

用于`\"`转义引号：

```
$("input[id=\""+id.slice(0,-1)+"-br-"+brand+"\"].qnt_to_cart").show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:50:05.513

`$('input[id="'+id.slice(0,-1)+'-br-'+brand+'"].qnt_to_cart').show();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:50:52.580

您在 JavaScript 中有几个选项，您可以将它们包含在`'`而不是`"`：

```
$('input[id="'+id.slice(0,-1)+'-br-'+brand+'"].qnt_to_cart').show(); 
```

或者您可以通过以下方式转义引号`\"`：

```
$("input[id=\""+id.slice(0,-1)+"-br-"+brand+"\"].qnt_to_cart").show(); 
```

# java - Swing Timer : 不要依赖 Swing timers ..问号；和并发问题

> ID：14610436
> 
> 赞同：1
> 
> 时间：2013-01-30T17:48:38.977
> 
> 标签：java, swing, timer

让我印象深刻的第一件事：`System.currentTimeMillis()`我认为非常准确，给出了一个`long`值，以及作为参数`SwingTimers`请求的位置`int`；它说什么？不要认为`SwingTimers`是准确的？

`SwingTimer`2）假设用x毫秒计时一个单词；如果我们正在重复一项任务（突出显示一个词，例如卡拉 OK 应用程序），我包含以下代码：

```
 /*see the time taken for each letter*/                    
                 int tik=(int) delay / words[index].length();
 /* make adjustment(subtract few millisecs)  as per the time taken by each word*/
                   if(tik <69)
                    timer.setDelay((int) (delay / words[index].length())-3);
                   if(tik >=69&&tik<=149)
                    timer.setDelay((int) (delay / words[index].length())-6);
                   else if(tik <=150)
                       timer.setDelay((int) (delay / words[index].length())-9);
                   else if(tik >150)
                   timer.setDelay((int) (delay / words[index].length())-100); 
```

工作安静，但我肯定我不能依赖这个，因为时间，长度可能会改变！如何克服这个问题？因为几毫秒的变化可能会给我带来灾难性的结果。

3）同时我想知道卡拉OK制作器和播放器软件遵循哪些技术？？？，非常准确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:58:20.610

> 同时我想知道卡拉 OK 制作和播放器软件遵循哪些技术？

我猜卡拉OK软件有一个引擎，可以输入节拍和拍号，并输入音符时长（全音符、二分音符、四分音符等）和歌词。

引擎计算每个四分音符的毫秒数，并根据计算结果一次显示一个字母。

我怀疑必须手动输入音符时长，但如果引擎听音乐并从音乐中确定音符时长，那将非常有效。

**保持完美的时间**

正如您已经确定的那样，Thread.sleep() 和 Swing 计时器不会保持完美的时间。

如果您想要精确计时，您将不得不建立自己的计时器。这是一个版本。

```
 public void moreAccurateTimer(int period) { // Sleep time in
                                                // milliseconds
        long beforeTime, timeDiff, sleepTime;
        beforeTime = System.currentTimeMillis();
        boolean running = true;
        while (running) {
            doStuff();

            timeDiff = System.currentTimeMillis() - beforeTime;
            sleepTime = period - timeDiff;

            if (sleepTime <= 0L) { // Even if doing stuff took longer than
                                    // period
                sleepTime = 5L; // sleep some anyway
            }

            try {
                Thread.sleep(sleepTime);
            } catch (InterruptedException e) {
            }

            beforeTime = System.currentTimeMillis();
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T18:09:47.237

基于计算机/操作系统时钟的计时方法，无论时间源有多准确 -*通常都是*有缺陷的，尽管在计时不需要那么准确的某些情况下它可能会正常工作。

一个聪明的方法是从你想要同步的东西中获取时间信息 - 所以对于卡拉 OK，获取从播放音频经过的时间并做出响应。这种方法自然地避免了常见的头痛：处理（用户发起的）音频播放中的暂停以及音频和系统硬件之间的微小时间偏差。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-03T02:16:02.810

我们必须接受我们永远无法准确准时到达的事实；我们可以早点或晚点。

考虑多年以来，每秒 24 帧的速度一直在制作连续观看的电影。现在，我们搬到了 59 FPS？因此，+/- 20ms 左右对人类来说是不明显的。

如果您的应用程序需要电子级别的精确计时，请考虑调度和并发可能会导致各种问题。当我在 C******e 工作时，Y2K 前后是一件大事，并且经常受到视频设置等的影响。时间相关问题的伪影表现为延迟、故障和音高不准确。

假设我们使用 while 循环方法（请原谅我的伪代码）：

/ **** 伪代码 **** /

something.idLikeToTriggerNow();

time_now = time_then = system.getMicroseconds();

而 (time_now < time_then + 1000){

; //NOP

time_now = system.getMicroseconds();

}

something.idLikeToTrigger1msLater();

/ ****结束伪代码**** /

这只能保证你在进入后一毫秒之前不会离开。但是，您可能会以某种方式中断获取系统时间，并在半秒后退出，而不是因为可能是 Norton Antivirus。我的观点与 Java 无关，尤其是。此外，即使 while 循环运行良好，下一个操作也可能会被您的 NVidia 驱动程序延迟，这可能比总体方案中的 Java 应用程序具有更高的优先级。

Java中是否有一种方法可以使这两个事件更有可能相隔1ms，以达到+/- 100us的容差？

# android - Android/Phonegap 应用 APK 对于 Google Play 来说太大了。如何实现扩展？

> ID：14610449
> 
> 赞同：3
> 
> 时间：2013-01-30T17:49:20.783
> 
> 标签：android, eclipse, cordova, google-play

我终于能够让我的 phonegap/dreamweaver 应用程序构建适用于 Android 并拥有一个可用的 APK 文件。
然而，最终的 APK 将远远大于 50mb（谷歌播放限制），因为它有 700 张图片。我意识到我可以将它们托管在服务器上，但我希望该应用程序在不在线或未连接到网络时完全可用。

为了得到限制，我需要使用扩展文件。 [http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

有没有人使用 phonegapp/dreamweaver 制作并在 eclipse 中完成的应用程序成功地做到了这一点？

如果是，将不胜感激有关最佳方法的指导......我会压缩我的 www 文件夹并制作扩展文件吗？如何在 Eclipse 中正确链接它？

诺埃尔

# c++ - 无需蛮力即可反转 SHA-1 或 MD5 给定（小）输入长度

> ID：14610451
> 
> 赞同：2
> 
> 时间：2013-01-30T17:49:33.823
> 
> 标签：c++, algorithm, hash, md5, sha

我记得听说 SHA-1 发现了一些弱点，使得在给定输出哈希的情况下更容易找到明文输入。我也知道 MD5 对于某些应用程序已经确定为弱。我正在尝试创建一个程序来演示两种方法的不同复杂性：蛮力搜索来查找输入，以及利用 SHA-1 或 MD5 中的弱点来查找输入。

明文输入的长度将小于 4，并且仅包含 AZ，因此蛮力并非不切实际。

我的问题是：
是否有 C/C++ 实现通过利用弱点来反转 SHA-1？
是否有 C/C++ 实现通过利用弱点来反转 MD5？

我目前的感觉是，任何利用弱点的方法都没有足够的时间复杂度差异来证明如此小样本量的好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T17:53:42.953

不，这是不可能的。虽然 MD5 和 SHA-1 中确实存在一些弱点，但它们通常不允许这种形式的原像攻击——大多数已知的弱点都涉及碰撞对的构造。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:55:11.057

有关 SHA-1 漏洞利用的非常详细的概述，请参阅

[https://hashcat.net/p12/js-sha1exp_169.pdf](https://hashcat.net/p12/js-sha1exp_169.pdf)

对于如此小的输入样本，您可以在内存中构建一个包含所有可能输入值及其哈希值的彩虹表（以毫秒为单位）。我怀疑您是否会使用漏洞利用与蛮力来衡量任何显着差异。

此外，对于如此小的输入范围，碰撞是极不可能的（因此几乎肯定不会有碰撞对）。

# time - Go 的时间到底有多精确？

> ID：14610459
> 
> 赞同：22
> 
> 时间：2013-01-30T17:50:11.280
> 
> 标签：time, go

Go 的 time 包声称可以提供纳秒级的精度。 [http://golang.org/src/pkg/time/time.go](http://golang.org/src/pkg/time/time.go)

我想知道它是如何实现的，我是否可以信任它。我的疑虑来自 Python，它清楚地记录了它随着时间的推移而遇到的困难和局限性：

> *来自[http://docs.python.org/2/library/time.html](http://docs.python.org/2/library/time.html)*
> 
> 各种实时函数的精度可能低于表达它们的值或参数的单位所建议的精度。例如，在大多数 Unix 系统上，时钟每秒只“滴答”50 或 100 次。
> 
> 另一方面，time() 和 sleep() 的精度优于 Unix 等效项：时间以浮点数表示，time() 返回可用的最准确时间（在可用的情况下使用 Unix gettimeofday()），以及sleep() 将接受一个非零分数的时间（Unix select() 用于实现这一点，如果可用）。

既然操作系统给 python 带来了如此困难的时间，那么 Go 是如何实现其纳秒精度的呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-30T18:41:18.437

至于实现，`time.Now()`回退到运行时中实现的函数。您可以查看[C 时间实现](http://code.google.com/p/go/source/browse/src/pkg/runtime/time.goc)和[`time·now`汇编](http://code.google.com/p/go/source/browse/src/pkg/runtime/sys_linux_amd64.s?name=go1.1.2#103)中的实现（在本例中为 linux amd64）。然后使用[`clock_gettime`](http://linux.die.net/man/3/clock_gettime)，它提供纳秒分辨率。在 Windows 上，这是通过调用 来实现的`GetSystemTimeAsFileTime`，它[也会生成纳秒](https://stackoverflow.com/a/11743614/1643939)（不是高分辨率，而是纳秒）。

所以是的，分辨率取决于操作系统，你不能指望它在每个操作系统上都是准确的，但开发人员正在努力让它尽可能好。例如，在 go1.0.3 中，`time·now`对于 FreeBSD[使用`gettimeofday`](http://code.google.com/p/go/source/browse/src/pkg/runtime/sys_freebsd_386.s?name=go1.0.3#110)而不是`clock_gettime`，它只提供毫秒精度。您可以通过查看存储在 中的值来了解这一点`AX`，因为它是[系统调用 ID](http://www.acsu.buffalo.edu/~charngda/freebsd_syscalls.html)。如果您查看引用的程序集，您可以看到 ms 值乘以 1000 以获得纳秒。但是，[现在](http://code.google.com/p/go/source/browse/src/pkg/runtime/sys_freebsd_386.s?name=go1.1#134)已解决。

如果您想确定，请检查运行时源代码中的相应实现并询问您的操作系统的手册。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-30T23:20:39.743

Python 的[time.time](http://docs.python.org/2/library/time.html#time.time)函数的问题之一是它返回一个[float](http://docs.python.org/2/library/functions.html#float)。浮点数是[IEEE 754 双精度数](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)，具有 53 位精度。

由于自 1970-01-01（纪元）以来已经超过 2**30 秒，您需要 61 (31 + 30) 位精度来存储自 1970-01-01 以来精确到纳秒的时间。

不幸的是，这比你可以存储在 python 浮点数中的内容少 7 或 8 位，这意味着 python 浮点数总是不如 go time 精确。

为了量化，下面的演示表明，python 时间最多精确到 100nS，只是由于`float`类型的限制。

```
>>> t = time()
>>> t
1359587524.591781
>>> t == t + 1E-6
False
>>> t == t + 1E-7
True 
```

所以去吧，从`int64`nS 开始并计数没有这些限制，并且仅限于底层操作系统的精度，正如 nemo 很好地解释的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-28T18:52:39.227

如果您有兴趣查询操作系统以获取返回值的精度`clock_gettime`，您可以[`clock_getres`](https://linux.die.net/man/2/clock_getres)使用适合您的操作系统的 syscall 包进行系统调用。例如，在 Unix 平台上，您可以执行以下操作：

```
package main

import (
    "fmt"
    "golang.org/x/sys/unix"
)

func main() {
    res := unix.Timespec{}
    unix.ClockGetres(unix.CLOCK_MONOTONIC, &res)
    fmt.Printf("Monotonic clock resolution is %d nanoseconds\n", res.Nsec)
} 
```

时间包使用来自单调时钟的值进行比较和涉及时间的操作；挂钟时间的精度类似地通过`unix.CLOCK_MONOTONIC`在上面的示例中更改为 来获得`unix.CLOCK_REALTIME`。

# java - Android：从不同的片段将复选框设置为“选中”

> ID：14610460
> 
> 赞同：1
> 
> 时间：2013-01-30T17:50:12.270
> 
> 标签：java, android, checkbox, togglebutton, ischecked

有没有办法将复选框设置为从不同的片段“选中”？

我会尽力解释得更好；我的应用程序有不同的片段，并且在每个片段中都有一些复选框。我刚刚在第一个片段上制作了一个按钮，该按钮重新创建了分配给不同复选框的一些功能，分散了其他片段。那么，如果我点击位于不同片段上的按钮，有没有办法将复选框的状态设置为检查？

任何帮助，将不胜感激！谢谢

# css - 谷歌地图平移和缩放自定义颜色

> ID：14610461
> 
> 赞同：1
> 
> 时间：2013-01-30T17:50:16.560
> 
> 标签：css, google-maps, zooming, customization, pan

我想知道是否可以自定义平移和缩放颜色。从默认的白色到不同的颜色或添加渐变，也许。我是谷歌地图的新手，这就是我到目前为止的想法。

```
 function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(10.341908, 123.910602),
          zoom: 16,
          panControl: true,
          panControlOptions: {
          position: google.maps.ControlPosition.TOP_RIGHT
},

      zoomControl: true,
              zoomControlOptions: {
              style: google.maps.ZoomControlStyle.LARGE,
              position: google.maps.ControlPosition.TOP_RIGHT
    },
              mapTypeId: google.maps.MapTypeId.ROADMAP

        };
        var map = new google.maps.Map(document.getElementById("map"),
            mapOptions);

       // Creating a marker and positioning it on the map    
        var marker = new google.maps.Marker({    
            position: new google.maps.LatLng(10.341908, 123.910602),    
            map: map    
    });
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-26T21:27:10.153

# map.gm-style > .gmnoprint > .gmnoprint { 把你的 CSS 放在这里}

```
#map .gm-style > .gmnoprint > .gmnoprint > div > img { display: none !important;}

#map .gm-style > .gmnoprint > .gmnoprint div[title="Pan up"] { put your css here}

#map .gm-style > .gmnoprint > .gmnoprint div[title="Pan down"] { put your css here }

#map .gm-style > .gmnoprint > .gmnoprint div[title="Pan right"] { put your css here}

    #map .gm-style > .gmnoprint > .gmnoprint div[title="Pan left"] {background:url(images/positionbutton_left.png) no-repeat center center !important; put your css here}

#map .gm-style > .gmnoprint > .gmnoprint div[title="Zoom in"] {background:url(images/zoom_in.png) no-repeat center center !important; put your css here }

#map .gm-style > .gmnoprint > .gmnoprint div[title="Zoom out"] {  put your css here }

        #map .gm-style > .gmnoprint > .gmnoprint div[title="Drag to zoom"] { put your css here}

#map .gm-style > .gmnoprint > .gmnoprint div[title="Click to zoom"] { put your css here} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:16:01.577

没有实施这样的选项。但是控件最终只是图像（精灵），一旦地图完成加载，应该可以将它们更改`src`为不同颜色的自定义图像。

# ios - UITableViewCell 多行部分标题

> ID：14610470
> 
> 赞同：0
> 
> 时间：2013-01-30T17:50:27.340
> 
> 标签：ios, cocoa-touch, uitableview

我想让 UITableView (UITableViewStylePlain) 的默认部分标题中的文本标签具有多行。对于单元格，这可以很容易地实现，如[How do I wrap text in a UITableViewCell without a custom cell 中所述](https://stackoverflow.com/questions/129502/how-do-i-wrap-text-in-a-uitableviewcell-without-a-custom-cell)。如何对默认节标题执行相同操作？如果没有办法做到这一点，我如何在 tableView:viewForHeaderInSection: 中创建一个看起来与默认标题相同的标题视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:14:01.863

iOS 6 引入了一个名为[UITableViewHeaderFooterView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewHeaderFooterView_class/Reference/Reference.html)的新类，它看起来就像默认标题（并且还有一个详细的文本标签）。我没有尝试过，但您可以将其用作客户标题视图并`textLabel`以与您提供的链接相同的方式设置属性。

# scala - Play 2.0 eclipsify 命令移除了 Scala 特性

> ID：14610472
> 
> 赞同：1
> 
> 时间：2013-01-30T17:50:32.407
> 
> 标签：scala, playframework, playframework-2.0, scala-ide

我已经通过 project->configure->add scala nature 添加了 Scala 自然来在 Eclipse 中播放项目。如果我调用 eclipsify 命令，那么它将 eclipse 项目性质转换回 Java。

我正在使用 Play Framework 2.04 版。我已将 Scala IDE 更新到最新版本 2.10，但没有帮助。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:49:06.587

`mainLang = SCALA`在您的`project/Build.scala`文件中检查：

```
...
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
      // Add your own project settings here      
) 
```

# ms-access - ADODB 类型未显示在 Access 中

> ID：14610473
> 
> 赞同：0
> 
> 时间：2013-01-30T17:50:39.180
> 
> 标签：ms-access, ado

我在 Access 2007 中并添加了参考：Microsoft ActiveX Data Objects 2.8 Library & Microsoft ActiveX Data Objects Recordset 2.8 Library 但是当我键入 ADODB 时。我没有得到命令类型或连接类型。显示的只是枚举定义。我错过了什么？为什么我没有得到命令、连接和其他实际类型？

# html - 有两个相邻的表，同时还使用标题和侧边栏 css

> ID：14610475
> 
> 赞同：0
> 
> 时间：2013-01-30T17:50:42.233
> 
> 标签：html, css, html-table, sidebar

我有一个非常简单的 php 页面，其中包含一个标题和一个导航侧边栏。在页面的内容区域中，我试图让两个表格彼此相邻。而不是一个接一个。

似乎在当前状态下，它们直接位于导航侧栏下方，而不是将所有内容都留在侧栏下方以供空白：

[http://jsfiddle.net/qgEbZ/](http://jsfiddle.net/qgEbZ/)

![目前的样子](../Images/8fffb56dfab0293aaeb793104067dd8e.png)

![想要的样子](../Images/d885601c053c117bf189814e12a3cae6.png)

HTML

```
<HTML>
    <HEAD>
        <link rel='stylesheet' type = 'text/css' href = 'default.css' />
    </HEAD>
    <BODY>
        <div id = 'headContainer'>
            <div id = 'header'>
                <?php include 'header.html'; ?>    
            </div>
        </div>
        <div id = 'sideContainer'>
            <div id= 'navMain'>
                <?php include 'sidebar.html'; ?>
            </div>
        </div>
        <div id = 'content'>
            <TABLE>
                <TR>
                    <TD>Left Table</TD>
                </TR>
                <TR>
                    <TD>Left Table</TD>
                </TR>
            </TABLE>
            <TABLE>
                <TR>
                    <TD>Right Table</TD>
                </TR>
                <TR>
                    <TD>Right Table</TD>
                </TR>
            </TABLE>
        </div>
    </BODY>
</HTML> 
```

CSS

```
#sideContainer {
    float:left;
}

#navMain {
    margin-left:25px;
    color:#999999;
    font-family:Tahoma, Geneva, sans-serif;
}

#headContainer {
    width: 100%;
    position:relative;
    top:0px;
    height: 150px;
}

#header{
    margin:0px auto;
    height: 150px;
}

#content {
    float:left;
    padding-left: 10px;
    padding-top: 10px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:55:40.537

虽然使用 TABLES 进行布局是一种不好的形式，但您可以通过简单地浮动表格来实现这一点。

```
#content table {
    float:left;
    width:50%
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:01:57.160

另一种选择是为您拥有的每个表添加一个类，而不是使用 CSS make 而不是流到正确的位置......

我对您的样品进行了更改...

[http://jsfiddle.net/qgEbZ/1/](http://jsfiddle.net/qgEbZ/1/)

```
<TABLE class = 'leftTable'>
 <TR>
    <TD>Left Table</TD>
  </TR>
  <TR>
    <TD>Left Table</TD>
  </TR>
</TABLE>
<TABLE class = 'midTable'>
  <TR>
     <TD>Right Table</TD>
  </TR>
  <TR>
     <TD>Right Table</TD>
  </TR>
</TABLE> 
```

比在 CSS 上

```
.leftTable{
  position:absolute;
  float: left;
}
.midTable{
  position:absolute;
  float: left;
  left:100px;
} 
```

顺便说一句，你可以得到相同的结果删除表和使用 div（正如许多人已经建议的那样:)）

# c# - Listview ItemSelectionChanged，如何取消/撤消

> ID：14610481
> 
> 赞同：4
> 
> 时间：2013-01-30T17:50:51.737
> 
> 标签：c#, .net, winforms, listview

如果你看看下面的代码。Listview ItemSelectionChanged 事件触发两次，因此我获得了两次 UserClosedSession 对话框。有没有办法抑制第二个对话框？

基本上，当用户单击 Listview 中的项目时，我正在尝试进行一些验证。更改所选项目时，他们会被问到一个问题，如果是，则继续选择新项目，如果不是，则“撤消”选择。下面的代码只是现实世界问题的一个简单示例。忽略 UserClosedSession 的内容，这里只是用来模拟需要发生的事情。

我已经尝试了各种。尝试了鼠标单击/鼠标按下事件。但是，如果用户使用键盘更改选择，这些都不好。我也尝试过取消连线，然后从 withing 自身重新连线 ItemSelectionChangedevent（请参阅注释掉的代码） - 不起作用。

```
 private void lv_ItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e)
    {
        if (e.IsSelected)
        {
            Debug.WriteLine("Index: " + lv.SelectedIndices[0].ToString());
            if (lv.Tag != null)
            {
                if ((int)lv.Tag != lv.SelectedIndices[0])
                {

                    if (!UserClosedSession())
                    {
                        //lv.ItemSelectionChanged -= new ListViewItemSelectionChangedEventHandler(lv_ItemSelectionChanged);
                        //lv.ItemSelectionChanged -= lv_ItemSelectionChanged;
                        lv.Items[(int)lv.Tag].Selected = true;
                        //lv.ItemSelectionChanged +=new ListViewItemSelectionChangedEventHandler(lv_ItemSelectionChanged);
                        return;
                    }
                }
            }
            else
                lv.Tag = lv.SelectedIndices[0];
        }
    }

    private bool UserClosedSession()
    {
        return
            (MessageBox.Show("Close Session?", "", MessageBoxButtons.YesNo) == DialogResult.Yes);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:33:04.873

我以前使用过类似的东西并且它有效，也许在这种情况下它也适合你。我所做的只是设置一个布尔字段来保存一个值是否指示此事件是否已被处理。如果尚未处理，则该方法将运行并将已处理字段设置为 true。下一次，它将看到这已被处理，而不是运行整个方法并将已处理的字段设置回 false。仅当事件连续触发两次并且您只想处理第一个事件触发时才会这样做。如果您想要第二个事件触发，我可以帮助您。如果此事件连续触发两次以上，请告诉我，我可能也可以找到解决该问题的方法。

```
bool eventHandled = false;
private void lv_ItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e)
{
    if (!eventHandled)
    {
        eventHandled = true;
        if (e.IsSelected)
        {
            Debug.WriteLine("Index: " + lv.SelectedIndices[0].ToString());
            if (lv.Tag != null)
            {
                if ((int)lv.Tag != lv.SelectedIndices[0])
                {
                    if (!UserClosedSession())
                    {
                        //lv.ItemSelectionChanged -= new ListViewItemSelectionChangedEventHandler(lv_ItemSelectionChanged);
                        //lv.ItemSelectionChanged -= lv_ItemSelectionChanged;
                        lv.Items[(int)lv.Tag].Selected = true;
                        //lv.ItemSelectionChanged +=new ListViewItemSelectionChangedEventHandler(lv_ItemSelectionChanged);
                        return;
                    }
                }
            }
            else
                lv.Tag = lv.SelectedIndices[0];
        }
    }
    else
        eventHandled = false;
} 
```

# algorithm - “爬山”和“分支定界”搜索算法有什么区别？

> ID：14610486
> 
> 赞同：8
> 
> 时间：2013-01-30T17:51:08.180
> 
> 标签：algorithm, search, artificial-intelligence, computer-science, heuristics

爬山搜索和分支定界是人工智能中使用的两种启发式搜索算法。这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T18:05:53.727

爬山搜索从对解决方案的初始猜测开始，然后迭代地对其进行局部更改，直到找到解决方案或启发式算法陷入局部最大值。有很多方法可以避免陷入局部最大值，例如并行运行多次搜索，或者概率性地选择后继状态等。在许多情况下，爬山算法会迅速收敛到正确答案。但是，这些方法都不能保证找到最佳解决方案。

分支定界解决方案的工作原理是将搜索空间切割成碎片，探索一个碎片，然后根据每次搜索期间获得的信息尝试排除搜索空间的其他部分。他们保证最终会找到最佳答案，尽管这样做可能需要很长时间。对于许多问题，基于分支定界的算法工作得很好，因为少量的信息可以迅速缩小搜索空间。

简而言之，爬山并不能保证找到正确的答案，但通常运行得非常快并给出了很好的近似值。分支定界法总能找到正确的答案，但可能需要一段时间才能做到。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:40:07.530

爬山的工作方式如下： ![爬山](../Images/57fe43a751b7c0460f38b7e6ff4e7d53.png) 带有修剪的深度优先搜索（这是一种简单的分支定界形式）的工作方式如下： ![分支和绑定](../Images/9ab352db28131d8a234bfce63b60bbd7.png)

分支和绑定通常不会扩展到 1000 多个变量和 1000 多个值。爬山确实如此，但它[陷入了局部最优](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#d0e6264)，可以通过添加禁忌搜索来修复。

# drupal - 我在哪里为我的功能放置自定义功能？

> ID：14610491
> 
> 赞同：1
> 
> 时间：2013-01-30T17:51:21.067
> 
> 标签：drupal, drupal-6

我正在寻找使用功能模块（[http://drupal.org/project/features](http://drupal.org/project/features)）“特色化”我的一种内容类型。内容类型的节点模板依赖于我放置在主题的 template.php 文件中的自定义函数。我应该将该功能移到哪里以便我可以将其打包以用于该功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:18:27.800

您的功能包应该包含一个包含功能代码的包含文件和一个主 .module 文件（Drupal 要求任何模块至少有一个空的 .module 文件）。

您为功能获得的任何自定义代码都应该放在那里；只要启用了您的模块，该文件就会包含在每个正常的页面构建中。如果您有很多代码，显然您可以将其用于包含文件，但它们应该是必需的/包含在 .module 文件本身中。

# javascript - 在输入字段中显示 JS 计算总和

> ID：14610492
> 
> 赞同：0
> 
> 时间：2013-01-30T17:51:29.977
> 
> 标签：javascript, jquery

我想在输入字段中显示此计算的总和：

```
function calculateSum1() {
    var sum = 0;
    //iterate through each textboxes and add the values
    $("input.miles").each(function() {
        //add only if the value is number
        if(!isNaN(this.value) && this.value.length!=0) {
            sum += parseFloat(this.value);
        }
    });
    $("input.summiles").value(sum);
} 
```

输入字段：

```
<input class="summiles" type="text" value=""> 
```

如果我在跨度中显示它会很好，但我似乎无法让它显示在输入字段中。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:52:39.327

您需要使用**[val()](http://api.jquery.com/val/)**而不是`value()`设置文本框。

```
 $("input.summiles").val(sum); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:55:03.750

.vale 是原始 javascript 属性，而 .val 是 jquery 函数，因此您必须更改：

```
 $("input.summiles").value(sum); 
```

到：

```
 $("input.summiles").value=sum; 
```

或者

```
 $("input.summiles").val(sum); 
```

这些是相同的，并且没有效率权衡，因为 .val() 是一个非常薄的值包装器。由于您已经在使用 jQuery，我建议在“一个框架”下进行标准化，并使用 .val()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:52:41.887

改变

```
$("input.summiles").value(sum); 
```

到

```
$("input.summiles").val(sum); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:53:16.013

适当的 jQuery 函数是`.val()`，不是`.value()`。不要问为什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T17:53:16.683

改变：

```
$("input.summiles").value(sum); 
```

到

```
$("input.summiles").val(sum); 
```

jQuery 没有任何`.value()`功能。

# actionscript-3 - AS3：使用 getDefinitionByName() 时出现“未定义变量 [x]”错误

> ID：14610493
> 
> 赞同：3
> 
> 时间：2013-01-30T17:51:38.820
> 
> 标签：actionscript-3, eval

我正在尝试使用 .SWC 库（从 .FLA 文档导出）来存储游戏的图形数据。在我的一个类中，我试图附加请求级别的 MovieClip 的一个实例，但我正在尝试使用 getDefinitionByName() 以便我可以根据级别编号拉入正确的类。我在 Flash Builder 4.7 中工作，有问题的 SWC 作为构建路径库被引入，理论上设置为“合并到代码中”，直到现在在实践中，它的类可以从任何地方访问。

但是， getDefinitionByName() 不起作用，即使我可以确认它评估的类存在并且可以自由访问。

下面是我在类构造函数中处理的内容。

1：

```
public function MyClass() {
    var lev:MovieClip = new Level1();
} 
```

2：

```
public function MyClass(id:uint) { // For this example, id == 1
    var lClass:Class = getDefinitionByName("Level"+id) as Class;
    var lev:MovieClip = new lClass();
} 
```

理论上，#1 和#2 应该产生完全相同的结果，即“lev”是 Level1() 类的一个新实例，对吧？但是#1 有效，#2 抛出`ReferenceError: Error #1065: Variable Level1 is not defined.`

更莫名其妙的是，我在同一个类的方法中也得到了几乎完全相同的东西，唯一的区别是所说的方法调用了不同类的静态方法，而后者又调用了 getDefinitionByName()。静态方法是否有所作为，如果有，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:06:24.257

我从来没有使用过`getDefinitionByName()`，但是快速浏览一下 LiveDocs 会让您看起来需要提供完整的包路径。

```
var lClass:Class = getDefinitionByName("Level"+id) as Class; 
```

应该

```
var lClass:Class = getDefinitionByName("com.your.package.here.Level"+id) as Class; 
```

看[`getDefinitionByName()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getDefinitionByName%28%29)

# c# - 嵌套泛型参数

> ID：14610496
> 
> 赞同：0
> 
> 时间：2013-01-30T17:51:41.987
> 
> 标签：c#, generics, generic-programming

可以嵌套泛型参数`class MyClass<TG<TM>>{}`吗？

我尝试了一些方法，得到了以下代码，但是类声明需要接收分开的两个参数：

```
class MyClass1<TG, TM>
    where TM : MyType
    where TG : OtherType<TM> {

    public TM DoSomething() {
    }

    public TG DoSomething2() {
    }
} 
```

那是唯一的方法吗？

**编辑：**

如您所见，我需要类中的两个泛型参数（同时使用的成员：TM 和 TG），因此 TG 是泛型参数，不能是类型（在这种情况下），答案和评论建议我' hardcode' 两个参数之一对这个问题没有贡献。

好吧，使用上面的示例，我们可以像（并且有效）一样使用它：

```
new MyClass<A<B>, B>(); 
```

在我的情况下，第二个参数将始终与第一个参数的嵌套参数一起使用。所以，我问我们是否可以省略第二个参数，编译器从第一个参数的参数推断它。

是否有可能而不是有两个单独的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:54:05.890

这取决于您想要达到的目标。如果您想`MyClass1`拥有两个不同的泛型参数，那么您展示的代码就是要走的路。

`class MyClass<TG<TM>>{}`: 这实际上意味着`MyClass`有一个通用参数。而您正在传入`TG<TM>`，这意味着它`TG`也是一个泛型类，它`TM`作为其泛型参数接收。

因此，要使该代码正常工作，您需要以下内容：

```
class TM {}
class TG<T> {}
class MyClass<T> {} 
```

现在，你可以这样称呼：

```
new MyClass<TG<TM>>(); 
```

# javascript - 在动力学 js 中使用 json 加载自定义形状

> ID：14610497
> 
> 赞同：0
> 
> 时间：2013-01-30T17:51:42.313
> 
> 标签：javascript, json, file, shape, kineticjs

如何通过 Kinetic JS 使用 Json 文件加载自定义形状（例如[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/ ）。](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)

我设法加载了正常形状，但是对于这个没有文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:39:40.690

不要`Kinetic.Shape`为此使用，使用[`Kinetic.Path`](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-path-tutorial/). A`Kinetic.Path`获取`data`允许使用[SVG PathData](http://www.w3.org/TR/SVG/paths.html#PathData)格式指定多边形形状的成员。遗憾的是，kineticjs.com 上的[文档](http://kineticjs.com/docs/symbols/Kinetic.Path.php)非常薄——W3 站点包含许多值得查看的示例。

当然，这不如代码灵活；但是，它看起来很有希望：[这与](http://jsfiddle.net/StefanHanke/WwTvj/)[自定义形状教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)中的图形完全相同，只使用了一个`Kinetic.Path`.

# shell - MacOSX cronjob 项目未执行

> ID：14610506
> 
> 赞同：2
> 
> 时间：2013-01-30T17:52:04.220
> 
> 标签：shell, osx-mountain-lion, crontab

我在 root 的 crontab 中有以下条目，但它根本没有触发：

```
0 6 * * 1-5 /usr/sbin/zfs snapshot rpool@`date +"%m-%d-%y"` 
```

我在日志或与之相关的邮件中也看不到任何东西。

也许反引号和引号引起了问题？

从命令行运行命令时，它会很好地创建快照：

```
% /usr/sbin/zfs snapshot rpool@`date +"%m-%d-%y"` 
```

您的建议将不胜感激。

该系统是带有 ZEVO ZFS 的 OSX Mountain Lion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:57:20.600

我了解到 cron 将 % 解释为新行，因此以下工作：

```
0 6 * * 1-5 /usr/sbin/zfs snapshot rpool@`date +"\%m-\%d-\%y"` 
```

# sql - 当前日期减去星期几

> ID：14610509
> 
> 赞同：1
> 
> 时间：2013-01-30T17:52:20.870
> 
> 标签：sql, postgresql

我有这个查询......我想让当前日期减去工作日来获取所有星期一的日期。但是由于 current_date 是一个日期并且 DOW 是 double 我收到一个错误

```
select extract(day from(current_date)) - extract(dow from current_date) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:08:29.777

我在 9.2 中没有收到错误消息。无论如何，它会在本月的第一天失败：

```
select extract(day from '2013-02-01'::date) - extract(dow from '2013-02-01'::date);
 ?column? 
----------
       -4 
```

正确的方法：

```
select date_trunc('week', '2013-02-01'::date);
       date_trunc       
------------------------
 2013-01-28 00:00:00-02
(1 row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:00:29.983

这是你想要的吗？

```
select extract(day from(current_date)) - extract(dow from current_date) 
```

这将获取一周的第一天的日期。

# xslt - XSLT - 当 2 个 xml 标记共享相同的属性名称时，如何使用“value-of select=”

> ID：14610510
> 
> 赞同：0
> 
> 时间：2013-01-30T17:52:20.990
> 
> 标签：xslt, csv

我正在处理以下 xml 文件：

```
<relational:BaseTable name="Table1">
    <columns name="Column1" Type="Number" </columns>
    <columns name="Column2" Type="Date" </columns>
 .... 
```

我想创建一个这样的 CSV 文件

```
Table1, Column1, Number
Table1, Column1, Date
Table2, ... 
```

我已经弄清楚如何遍历 xml 并将输出格式化为 csv。下面的代码缺少的是一种在每行开头重复表名的方法。我无法弄清楚如何引用父（关系：BaseTable）标签的“名称”属性。

```
<xsl:for-each select="relational:BaseTable">
   <xsl:for-each select="columns">
      <xsl:value-of select="@name"/>,<xsl:value-of select="@type"/>
      <xsl:text>&#10;</xsl:text>
</xsl:for-each>
</xsl:for-each> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:34:17.107

要访问`BaseTable`'s`@name`属性，您只需将层次结构向上移动一点：

```
<xsl:value-of select="../@name"/>,<xsl:value-of select="@name"/>,<xsl:value-of select="@type"/> 
```

请注意，即使属性名称不同，您也需要这样做，因为当前引用上下文是一个`columns`元素。

我还建议将上述行简化为一行`value-of`：

```
<xsl:value-of select="concat(../@name, ',', @name, ',', @type)"/> 
```

# javascript - 使用 jquery-ui-map 检测缩放

> ID：14610511
> 
> 赞同：0
> 
> 时间：2013-01-30T17:52:21.020
> 
> 标签：javascript, jquery

我使用 jQuery 的 Google maps v3 插件。我要做的就是检测缩放。使用下面的代码

```
 var map = $('#map_canvas').gmap('get', 'map');
$(map).addEventListener('zoom_changed', function() {
    alert(map);
}); 
```

我可以检测缩放是否已更改，但我不知道确切的缩放。那么，如何检测缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:53:59.617

那里可能传递了一个事件变量。

尝试使用它：

```
var map = $('#map_canvas').gmap('get', 'map');
$(map).addEventListener('zoom_changed', function(event) {
    alert(map);
    //... use event
}); 
```

# c# - 如何防止根据条件执行控制器动作？

> ID：14610518
> 
> 赞同：2
> 
> 时间：2013-01-30T17:52:47.127
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个有很多动作的控制器。我需要阻止基于此条件执行**某些操作：**

```
if (Session["MyObject"] == null) return RedirectToAction("Introduction"); 
```

它应该重定向到默认的介绍操作。

我可以将这个条件放在每个动作中，但我想在一个地方定义这个条件，就像在控制器的构造函数中一样。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:16:15.270

这是一个快速的模型，但我认为这个想法成立

```
public class CheckSessionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Session["MyObject"] == null)
        {
            // redirect must happen OnActionExecuting (not OnActionExecuted)
            filterContext.Result = new RedirectToRouteResult(
              new System.Web.Routing.RouteValueDictionary {
              {"controller", "Tools"}, {"action", "CreateSession"}

        }
        base.OnActionExecuting(filterContext);
    }   
} 
```

# jsf - 使用 EL，是否可以对 bean 而不是 getter/setter 进行字段访问？

> ID：14610522
> 
> 赞同：7
> 
> 时间：2013-01-30T17:52:49.827
> 
> 标签：jsf, el, getter-setter, field-accessors

# 编辑

对这个答案持保留态度。自从我多年前提出这个问题以来，情况发生了很大变化。我现在建议使用 Lombok 而不是我的 EL 解决方案。出于历史原因留下原始问题。

* * *

当我不需要控制对对象内部状态的访问时，我非常厌倦 getter/setter 阻塞我的代码。我仍然必须生成 getter/setter 的唯一真正原因是因为 EL 通过定位方法而不是字段来工作：`${myBean.fieldName}`. where`fieldName`指的是方法`getFieldName()`。除非找到 getter，否则是否可以扩展 EL Resolver 以仅返回公共字段值？

* * *

根据史蒂夫·阿特金森的回答更新：我希望这对其他人有所帮助。请注意我是如何明确检查我仅在 Form 或 Lead 对象上使用此 elresolver 的，这些对象是我的域对象。

```
public class PublicFieldSupportingELResolver extends ELResolver {
    @Override
    public Class<?> getCommonPropertyType(ELContext context, Object base) {
        if (base instanceof Form || base instanceof Lead) {
            try {
                context.setPropertyResolved(true);
                return base.getClass();
            } catch (Exception e) {
                context.setPropertyResolved(false);
                return null;
            }
        } else {
            context.setPropertyResolved(false);
            return null;
        }
    }

    @Override
    public Iterator<FeatureDescriptor> getFeatureDescriptors(ELContext context, Object base) {
        return null;
    }

    @Override
    public Class<?> getType(ELContext context, Object base, Object property) {
        if (base instanceof Form || base instanceof Lead) {
            try {
                Field field = base.getClass().getField((String) property);
                context.setPropertyResolved(true);
                return field.getType();
            } catch (Exception e) {
                context.setPropertyResolved(false);
                return null;
            }
        } else {
            context.setPropertyResolved(false);
            return null;
        }
    }

    @Override
    public Object getValue(ELContext context, Object base, Object property) {
        if (base instanceof Form || base instanceof Lead) {
            try {
                Field field = base.getClass().getField((String) property);
                Object value = field.get(base);
                context.setPropertyResolved(true);
                return value;
            } catch (Exception e) {
                context.setPropertyResolved(false);
                return null;
            }
        } else {
            context.setPropertyResolved(false);
            return null;
        }
    }

    @Override
    public boolean isReadOnly(ELContext context, Object base, Object property) {
        if (base instanceof Form || base instanceof Lead) {
            try {
                base.getClass().getField((String) property);
                context.setPropertyResolved(true);
                return true;
            } catch (Exception e) {
                context.setPropertyResolved(false);
                return false;
            }
        } else {
            context.setPropertyResolved(false);
            return false;
        }
    }

    @Override
    public void setValue(ELContext context, Object base, Object property, Object value) {
        if (base instanceof Form || base instanceof Lead) {
            try {
                Field field = base.getClass().getField((String) property);
                field.set(base, value);
                context.setPropertyResolved(true);
            } catch (Exception e) {
                context.setPropertyResolved(false);
            }
        } else {
            context.setPropertyResolved(false);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:58:31.710

如果您不想在 Java Bean 上编写/生成 getter 和 setter 方法，则可以使用[Project Lombok中的](http://projectlombok.org/features/index.html)[`@Getter`/`@Setter`](http://projectlombok.org/features/GetterSetter.html)注释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:00:32.273

是的。Jsf 的可扩展性很强，几乎所有东西都可以扩展或替换。

自定义解析器的一个很好的例子是[here](http://cagataycivici.wordpress.com/2005/12/28/how_to_write_your_own/)

这家伙正在使用它来填充数据库查询中的下拉列表。我敢肯定，您可以使用类似的技术来基于公共字段而不是公共 get/set 方法进行解析。

# google-app-engine - 在本地运行 AppEngine Servlet 时，如何让 Jetty 从 Eclipse 重新加载每个新构建的 .class 文件？

> ID：14610525
> 
> 赞同：1
> 
> 时间：2013-01-30T17:53:11.013
> 
> 标签：google-app-engine, jetty

我已经在 Eclipse Juno 中成功创建了一个“Hello world”AppEngine 项目。问题是每次我进行代码更改时都必须重新启动 Eclipse，以便让 Jetty 为我提供最新代码的结果。即使使用控制台选项卡中的终止按钮从 Eclipse 停止和重新启动 Jetty 也无济于事。我可以看到 Jetty 正在重新加载*某些*内容，因为日志产生了这一行，其中包括：

```
INFO: Successfully processed C:\coding\source\projects\HelloWorld\Service\war\WEB-INF/web.xml 
```

我还检查了输出文件夹中 .class 文件的时间戳`war/WEB-INF/ classes/...`是否已更新。这也不是浏览器缓存问题，因为我已经在两个单独的浏览器中尝试过。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:19:32.273

原来我同时运行多个 Jetty 服务。我现在意识到我必须在启动一个新的之前终止它们中的每一个。

![正在运行和终止的码头会话列表](../Images/641493393bb7100f1085be10d712d0f5.png)

如果有人知道是否可以让 Eclipse 在启动新服务器之前自动关闭每台服务器，我会很乐意学习。

# javascript - Chrome 扩展：无法为外部 json 加载资源

> ID：14610528
> 
> 赞同：3
> 
> 时间：2013-01-30T17:53:19.963
> 
> 标签：javascript, json, api, google-chrome-extension

我一直在寻找 stackoverflow 和谷歌的答案，但我找不到任何东西......我对 javascript 还是很陌生，所以我有点困惑；

清单.json

```
{
  "manifest_version": 2,

  "name": "Twitch Streams List",
  "description": "Find all the streams directly through Chrome",
  "version": "1.0",

  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
   "permissions": [
    "http://api.twitch.tv/kraken/streams?limit=20"
  ],
  "web_accessible_resources": ["twitch.js"]
} 
```

popup.html

```
<!doctype html>
<html>
  <head>
    <title>Getting top streams from Twitch</title>
    <style>
      body {
        min-width: 350px;
      }
    </style>
    <script src="twitch.js" type="text/javascript"></script>
  </head>
  <body>
  </body>
</html> 
```

抽搐.js

```
var streamGenerator = {
  /* url where to get the streams from */
  url: chrome.extension.getURL('http://api.twitch.tv/kraken/streams?limit=20'),

  /* go get the streams from the json at the url given */
  requestStreams: function() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', this.url, true);
    xhr.onreadystatechange = function() {
      if (xhr.readyState == 4) {
        var resp = JSON.parse(xhr.responseText);
      }
    }
    xhr.send();
  },

  /* import the streams in the html page */
  showStreams: function (e) {
    var streams = resp.streams;
    var output = '<ul>';

    for (var i = 0; i < streams.length; i++) {
      output += '<li>' + streams[i].channel.display_name + ' - ' + streams[i].channel.viewers + ' - ' + streams[i].channel.game + '</li>';
    }

    output += '</ul>';
    console.log(output);
    document.body.appendChild(output);
  }
};

/* Run the script as soon as the popup is loaded */
document.addEventListener('DOMContentLoaded', function () {
  streamGenerator.requestStreams();
}); 
```

弹出窗口中没有任何内容，控制台显示

```
Failed to load resource chrome-extension://dihpppnflhlpkehcgnjggjcipffmjlgp/http://api.twitch.tv/kraken/streams?limit=20 
```

该怎么办？？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:21:16.137

'api.twitch.tv/kraken/streams?limit=20' 不在您的安装目录中，因此不要将其作为参数传递给`chrome.extension.getURL`.

话虽如此，XHR 无法跨域获取内容。您可能想看看他们是否提供像 JSONP 这样的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T16:52:32.260

值得注意：

[http://api.twitch.tv/kraken/streams?limit=20](http://api.twitch.tv/kraken/streams?limit=20)返回 404

[https://api.twitch.tv/kraken/streams?limit=20](https://api.twitch.tv/kraken/streams?limit=20)返回 JSON

（抽搐 api 需要 SSL）

# python - Python - Bash - 随机数

> ID：14610531
> 
> 赞同：3
> 
> 时间：2013-01-30T17:53:22.550
> 
> 标签：python, bash, random

给定一个包含以下内容的脚本“random.sh”：

```
#!/bin/bash

RANDOM=`python -v -d -S -c "import random; print random.randrange(500, 800)"`
echo $RANDOM 
```

运行它会产生给定范围**之外**的随机数：

```
[root@localhost nms]# ./random.sh
23031
[root@localhost nms]# ./random.sh
9276
[root@localhost nms]# ./random.sh
10996 
```

将 RANDOM 变量重命名为 RAND，给我来自给定范围的随机数，即

```
#!/bin/bash

RAND=`python -v -d -S -c "import random; print random.randrange(500, 800)"`
echo $RAND 
```

给出：

```
[root@localhost nms]# ./random.sh
671
[root@localhost nms]# ./random.sh
683
[root@localhost nms]# ./random.sh
537 
```

我的问题是——为什么？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:55:12.230

RANDOM 是一个预定义的 bash 变量。从手册页：

```
RANDOM Each time this parameter is referenced, a random integer between
       0 and 32767 is generated.  The sequence of random numbers may be
       initialized by assigning a value to RANDOM.  If RANDOM is unset,
       it loses its special properties,  even  if  it  is  subsequently
       reset. 
```

因此，如果您真的想使用 RANDOM 变量名，请执行以下操作：

```
unset RANDOM
RANDOM=`..your script..` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:55:24.863

[`$RANDOM`](http://islandlinux.org/howto/generate-random-numbers-bash-scripting)是一个内部`bash`函数，它返回 0-32767 范围内的伪随机整数。

因此，在第一个示例中，您会看到由 Python 脚本生成的随机数，`bash`而不是由 Python 脚本生成的随机数。当您分配给 时`RANDOM`，您只是在播种`bash`的随机数生成器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:56:19.680

$RANDOM 是 bash 中的预定义变量。

打开一个新终端并尝试一下：

```
> echo $RANDOM
6007
> echo $RANDOM
122211 
```

# git - Git post-receive hook clone成功，但报告“不是git存储库”？

> ID：14610533
> 
> 赞同：2
> 
> 时间：2013-01-30T17:53:27.467
> 
> 标签：git, hook, githooks

我`post-receive`在 Git 存储库中有一个钩子，它将存储库克隆到另一个目录，然后`cd`进入该目录。

```
#!/bin/bash --login

GIT_REPO="$HOME/oliverjash.me.git"

source "$HOME/.bash_profile"

checkout () {
  BRANCH="$1"
  TMP_GIT_CLONE="$2"

  git clone $GIT_REPO $TMP_GIT_CLONE
  cd $TMP_GIT_CLONE
  git status
}

checkout master "$HOME/tmp/oliverjash.me"
checkout project "$HOME/tmp/project.oliverjash.me"

exit 
```

如果我在登录 SSH 时运行此脚本，则`git status`可以正常工作。但是，当脚本作为`post-receive`钩子执行时，会`git status`报告：

```
remote: fatal: Not a git repository: '.' 
```

我不明白这是为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:42:32.163

如果你真的想确保 git 命令能够正常运行，你可以添加：

*   `--work-tree=$TMP_GIT_CLONE`
*   `--git-dir=$TMP_GIT_CLONE/.git`

这样，git 命令将知道工作树和要考虑的 git 存储库在哪里。

```
git --work-tree=... --git-dir=... clone ... 
```

或者，从 git 1.8.5 开始，如[本答案](https://stackoverflow.com/a/20115753/6309)所述：

```
git -C=$TMP_GIT_CLONE clone ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:38:57.500

我需要`unset GIT_DIR`在脚本的顶部做。

# java - 使用 Android 将文件上传到 PHP 脚本

> ID：14610544
> 
> 赞同：1
> 
> 时间：2013-01-30T17:54:19.233
> 
> 标签：java, android

我想将文件上传到 PHP 脚本。上传似乎工作正常，它正在发送数据。但是 PHP 脚本每次都告诉我，$_FILES 是空的……我不知道我做错了什么……知道我的代码有什么问题吗？

```
import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Random;

import android.content.Context;
import android.net.Uri;
import android.os.AsyncTask;
import android.provider.Settings.Secure;
import android.util.Log;

public class Upload extends AsyncTask<Object, Integer, String> {
    URL connectURL;
    String responseString;
    String usernameString;
    Context con;
    String iFileName;
    byte[] dataToServer;
    FileInputStream fileInputStream = null;

    void Sending() {

        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        String Tag = "Info";
        try {
            Log.e(Tag, "Starting Http File Sending to URL");

            // Open a HTTP connection to the URL
            HttpURLConnection conn = (HttpURLConnection) connectURL.openConnection();

            // Allow Inputs
            conn.setDoInput(true);

            // Allow Outputs
            conn.setDoOutput(true);

            // Don't use a cached copy.
            conn.setUseCaches(false);

            // Use a post method.
            conn.setRequestMethod("POST");

            conn.setRequestProperty("Connection", "Keep-Alive");

            conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);

            DataOutputStream dos = new DataOutputStream(conn.getOutputStream());

            Log.d("Info", iFileName);

            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + iFileName + "\"" + lineEnd);
            dos.writeBytes(lineEnd);

            Log.e(Tag, "Headers are written");

            // create a buffer of maximum size
            int bytesAvailable = fileInputStream.available();

            int maxBufferSize = 1024;
            int bufferSize = Math.min(bytesAvailable, maxBufferSize);
            byte[] buffer = new byte[bufferSize];

            // read file and write it into form...
            int bytesRead = fileInputStream.read(buffer, 0, bufferSize);

            while (bytesRead > 0) {
                Log.e(Tag, "sending...");
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

            // close streams
            fileInputStream.close();

            dos.flush();

            Log.e(Tag, "File Sent, Response: " + String.valueOf(conn.getResponseCode()));

            InputStream is = conn.getInputStream();

            // retrieve the response from server
            int ch;

            StringBuffer b = new StringBuffer();
            while ((ch = is.read()) != -1) {
                b.append((char) ch);
            }
            String s = b.toString();
            Log.i("Response", s);
            dos.close();

            String aidString = Secure.getString(con.getContentResolver(), Secure.ANDROID_ID);
            //new BackgroundPost(new OnTaskComplete() {}).execute(usernameString, s, "0", "0", aidString, "");
        } catch (MalformedURLException ex) {
            Log.e(Tag, "URL error: " + ex.getMessage(), ex);
        }

        catch (IOException ioe) {
            Log.e(Tag, "IO error: " + ioe.getMessage(), ioe);
        }
    }

    public void run() {
        // TODO Auto-generated method stub
    }

    @Override
    protected String doInBackground(Object... params) {
        try {
            connectURL = new URL(conf.d + "upload.php");
            usernameString = String.valueOf(params[0]);
            con = (Context)params[1];
            Random random = new Random(); 
            String u = (String) params[2];
            Log.d("Info","u: " + u);
            iFileName = random.nextInt() +  "." + u.substring(u.lastIndexOf(".")+1);
            Log.d("Info","filename: " + iFileName);
            fileInputStream = new FileInputStream(u);
            Sending();

        } catch (Exception ex) {
            ex.printStackTrace();
            Log.i("HttpFileUpload", "URL Malformatted");
        }
        // TODO Auto-generated method stub
        return null;
    }
} 
```

和 PHP 文件：

```
 <?php
  $target_path = "uploads/";

  print_r($_FILES);

  $target_path = $target_path . basename($_FILES['uploadedfile']['name']);
  if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file " . basename($_FILES['uploadedfile']['name']) . " has been uploaded";
  }
  else {
    echo "There was an error uploading the file, please try again!";
  }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:08:07.503

我认为您在 fileInputStream.close(); 之后错过了关闭边界块；

[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

# javascript - 递归 JSON 数据结构的遍历算法

> ID：14610545
> 
> 赞同：1
> 
> 时间：2013-01-30T17:54:19.740
> 
> 标签：javascript, tree, traversal

我正在用 Javascript 构建图形编辑器，我需要一种算法来识别两个“节点”对象之间的所有可能路径。

给定以下 JSON 对象：

```
{
    "failureNode": {
        "failureNode": {
            "failureNode": {
                "failureNode": {
                    "failureNode": null,
                    "successNode": null,
                    "id": "node-endpointfailure",}
                },
                "successNode": {
                    "failureNode": null,
                    "successNode": null,
                    "id": "node-endpointsuccess",
                },
                "id": "node-1",
            },
            "successNode": {
                "failureNode": null,
                "successNode": null,
                "id": "node-endpointsuccess",
            },
            "id": "node-2",
        },
        "successNode": {
            "failureNode": {
                "failureNode": {
                    "failureNode": null,
                    "successNode": null,
                    "id": "node-endpointfailure",
                },
                "successNode": {
                    "failureNode": null,
                    "successNode": null,
                    "id": "node-endpointsuccess",
                },
                "id": "node-1",
            },
            "successNode": {
                "failureNode": null,
                "successNode": null,
                "id": "node-endpointsuccess",
            },
            "id": "node-3",
        },
        "id": "node-4",
    },
    "successNode": {
        "failureNode": null,
        "successNode": null,
        "id": "node-endpointsuccess",
    },
    "id": "node-root",
} 
```

我需要 ID = 'node-root' &'node-endpointfailure' 的节点之间的所有可能路由。在此示例中，有两种可能的方式从“开始”（数据结构中的节点根）开始和结束和“失败”（节点端点故障）开始：

1.  开始 -> node1 -> node2 -> node4 -> 失败
2.  开始 -> node1 -> node3 -> node4 -> 失败

对于此示例，输出将是 JSON 路径数组。像这样的东西...

```
[
    failureNode.failureNode.failureNode.failureNode,
    failureNode.successNode.failureNode.failureNode
] 
```

大多数应用程序都使用 jQuery，因此纯 Javascript 或 jQuery 解决方案都可以使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:13:25.250

这应该完成任务：

```
function recurse(from, to, node) {
    var result = [],
        choices = ["sucessNode", "failureNode"];
    if (!from && to == node.id)
        return [[]];
    if (from == node.id)
        return recurse(null, to, node);
    for (var i=0; i<choices.length; i++) {
        var choice = choices[i];
        if (node[choice] != null) {
            var res = recurse(from, to, node[choice]);
            for (var j=0; j<res.length; j++) {
                res[j].unshift(choice);
                result.push(res[j]);
            }
        }
    }
    return result;
}
recurse('node-root', 'node-endpointfailure', data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:42:50.033

我发现您选择的代表有点奇怪和混乱。树不是表示这一点的最佳方式。您所描述的本质上是一个 DAG（有向无环图）。递归表示最终会复制对象。虽然我确信还有其他方法可以表示这一点，但简单的表示方法就是列出每个节点及其由 id 标识的成功和失败节点。停止节点的成功节点和失败节点将具有空值（或零长度字符串，以两者为准）。或者你可以有一本包含所有这些的字典。

例如，您的图表可以（按列表方式）描述为：

```
[
  {
    id: "Start",
    successNode: "success",
    failureNode: "node-1"
  },
  {
    id: "node-1",
    successNode: "node-3",
    failureNode: "node-2"
  },
  {
    id: "node-2",
    successNode: "success",
    failureNode: "node-4"
  },
  {
    id: "node-3",
    successNode: "success",
    failureNode: "node-4"
  },
  {
    id: "node-4",
    successNode: "success",
    failureNode: "failure"
  },
  {
    id: "success",
    successNode: "",
    failureNode: ""
  },
  {
    id: "failure",
    successNode: "",
    failureNode: ""
  }
] 
```

使编辑图表变得非常容易。只需根据需要添加或删除节点及其值。我可能会使用另一个对象作为字典，以使其更快/更容易找到每个节点。假设我确实有这样的字典`dict`，那么从一个节点导航到另一个节点以查看您的最终位置并不难。

# android - 从 ImageView 中获取 Drawable

> ID：14610549
> 
> 赞同：1
> 
> 时间：2013-01-30T17:54:55.187
> 
> 标签：android, imageview, drawable

正如标题所描述的，我想以编程方式`Drawable`从一个中获得一个。`ImageView`

我在互联网上搜索，我找不到我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:04:09.787

假设您的 ImageView 称为 myImageView：

```
myImageView.setDrawingCacheEnabled(true);
Bitmap bitmap = Bitmap.createBitmap(myImageView.getDrawingCache()); 
```

确保在布局完成后调用它：使用[著名的 OnGlobalLayoutListener](http://www.sherif.mobi/2013/01/how-to-get-widthheight-of-view.html)

# css - CSS 等高 div

> ID：14610558
> 
> 赞同：0
> 
> 时间：2013-01-30T17:55:20.630
> 
> 标签：css, html

在处理 php 表单后，我希望左列与右列的高度相同。这是html代码：

```
<div class="header">
</div>
<div class="container">
<div class="left">
</div>
<div class="right">
</div>
</div>
<div class="footer">
</div> 
```

我希望您帮助设置 css 配置！

```
.header, .footer{
text-align: center;
background-color: #777;
color: white;
border-style: dotted;
border-width: 1px;
border-color: black;
width: 100%;
}

.footer{
text-align: center;
line-height: 100%;
float: left;
height: 5%;
margin-bottom: 3px;
}

.left{
border-style: dotted;
border-width: 1px;
border-color: black;
background-color: #CCC;
float: left;
width: 11%;
min-height: 500px;
margin: 2px 0px 2px 0px;
padding: 0px 0px 0px 0px;
height: 100%;
}

.right{
border-style: dotted;
border-width: 1px;
border-color: black;
width: 88%;
float: right;
min-height: 500px;
margin: 2px -2px 2px 8px;
padding: 0px 0px 0px 0px;
height: 100%;
} 
```

我是php / html / css语言的新手。

我看过其他主题，但没有一个解决方案对我有用。

我设置了一个CSS，但它只适用于IE。Chrome 和 FF 不起作用。

哦，我希望这个动态工作。并且没有以 px 为单位的高度限制。只有在 ％。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:02:17.627

这是一个 CSS 解决方案：http: [//jsfiddle.net/panchroma/8Szh5/](http://jsfiddle.net/panchroma/8Szh5/)

我为左右 div 添加了一个大填充和一个同样大的负边距，然后环绕它们的容器 div 都隐藏了溢出。

**CSS**

```
.left{
padding-bottom: 99999px;
margin-bottom: -99999px;
/* more stuff */
}  

.right{
padding-bottom: 99999px;
margin-bottom: -99999px;
/* more stuff */
}

.container{
overflow: hidden;   
} 
```

**HTML**

```
<div class="container">

<div class="left">
</div> <!-- end left -->

<div class="right">
</div> <!-- end right -->

</div> <!-- end container -->

<div class="footer">
</div> <!-- end footer --> 
```

这种技术也适用于跨浏览器。

为简单起见，我注释掉了一些额外的 CSS。在此示例中，我还删除了这些 div 周围的边框。请记住，边框实际上会为 div 增加额外的宽度，因此这可能会导致您的宽度计算失败。如果您需要边框，请查看[box-sizing:border-box 方法](http://css-tricks.com/box-sizing/)，该方法强制您的 div 内的边框。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T23:46:15.703

不知何故，我发现自己与这个主题的这个原始问题处于同样的境地......我最终成为正确答案的简单和最简单的解决方案是由“David Taiaroa”回答的，这完美地解决了我的问题！

谢谢**David Taiaroa**，你是救生员！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:59:27.770

这是我每次需要 2 个或更多高度相等的 div 时使用的技术，我不会解释它是如何工作的 Matthew James Taylor 做得很好：http: [//matthewjamestaylor.com/blog/equal-height-columns -cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

希望这会有所帮助，它确实使我免于头痛几次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:00:05.730

如果无法使用表格，请尝试以下操作：

```
#container {
    display:flex;
    display:-ms-flexbox;
    display:-webkit-flex;
    display:-moz-box;
    display:-moz-flex;
} 
```

这应该扩展`#left`和`#right`框以填充容器的整个高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:00:52.247

```
.left, .right { height: 100%; }
.container { height: 400px; } 
```

但是您需要为 css 创建一个单独的文件并在 html 的头部调用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T18:03:07.870

我不确定这是否是您想要的，但无论如何您都可以在您的 css 中明确设置每个 div 的高度：

```
.left {
   height: 300px;
   ...other attributes...
}
.right {
   height: 300px;
   ...other attributes...
} 
```

# php - 通过 XML 发送 php 表单并将响应保存为 cookie

> ID：14610565
> 
> 赞同：0
> 
> 时间：2013-01-30T17:55:48.773
> 
> 标签：php, xml, forms

我想使用一个有 2 个字段的 php 表单：

电子邮件/密码并通过 XML 将其发送到第 3 方站点，然后它将返回一个 XML 响应，我想捕获名称并在标题的另一个位置回显（我正在考虑将其保存为 cookie，但我不是肯定是最好的方法）。下面是我正在尝试的代码，但由于我没有捕获响应，因此我无法判断它是否有效。

```
echo'<form name="ppost" method="post" action="'.$_SERVER['PHP_SELF'].'">

<input type="text" name="emailaddress" />
<input type="text" name="password" />
<input type="submit" name="SUbmit" value="Submit" />

</form>';

extract($_POST);

 $n = "\n\n";
 $inputdata = '<?xml version=\'1.0\' encoding=\'UTF-8\'?'.'>'.$n.'
<CustomerCredential  xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<EmailAddress>'.$emailaddress.'</EmailAddress>
<Password>'.$password.'</Password>

</CustomerCredential>';

$x = curl_init("https:AnotherWebsite.com/CustomerSession");
curl_setopt($x, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
curl_setopt($x, CURLOPT_HEADER, 0);
curl_setopt($x, CURLOPT_POST, 1);
curl_setopt($x, CURLOPT_POSTFIELDS, $inputdata);
curl_setopt($x, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($x, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($x);
curl_close($x);
echo $data; 
```

# java - 内存泄漏，spring 3.2.0.RELEASE，httpcomponents 4.2.3

> ID：14610567
> 
> 赞同：1
> 
> 时间：2013-01-30T17:55:59.417
> 
> 标签：java, spring, garbage-collection

使用 spring 3.2.0.RELEASE resttemplate 和 httpcomponents 4.2.3 进行休息调用。内存占用量稳步增加，直到达到最大值。

以下是配置：

```
<bean id="myRestTemplate" class="org.springframework.web.client.RestTemplate">
    <constructor-arg>
        <bean class="org.springframework.http.client.HttpComponentsClientHttpRequestFactory">
            <constructor-arg index="0">
                <bean factory-bean="httpClient" factory-method="get"/>
            </constructor-arg>
        </bean>
    </constructor-arg>
</bean>
<bean id="httpClient" class="com.mycompany.myproject.common.rest.HttpClient">
    <constructor-arg index="0" ref="myKeyserverCA" ></constructor-arg>
    <constructor-arg index="1" value="${com.mycompany.myproject.security.client.keyPassword}" ></constructor-arg>
    <constructor-arg index="2" value="${default.max.total.connections}" ></constructor-arg>
    <constructor-arg index="3" value="${default.max.host.connections}" ></constructor-arg>
</bean>
<bean id="myKeyserverCA"
      class="org.springframework.ws.soap.security.support.KeyStoreFactoryBean">
    <property name="location" value="classpath:${com.mycompany.myproject.security.client.keyStore}" />
    <property name="password" value="${com.mycompany.myproject.security.client.keyStorePass}" />
</bean> 
```

客户端：

```
import org.apache.http.conn.scheme.PlainSocketFactory;
import org.apache.http.conn.scheme.Scheme;
import org.apache.http.conn.scheme.SchemeRegistry;
import org.apache.http.conn.ssl.SSLSocketFactory;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.PoolingClientConnectionManager;
import org.apache.http.params.CoreConnectionPNames;

import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import java.security.KeyStore;

public class HttpClient {

private static final int DEFAULT_READ_TIMEOUT_MILLISECONDS = (60 * 1000);

private KeyStore keystore;
private String password;
private int MAX_TOTAL_CONNECTION;
private int MAX_PER_ROUTE;

public HttpClient(KeyStore keyStore, String keyPassword, int MAX_TOTAL_CONNECTION, int MAX_PER_ROUTE) {
    this.keystore = keyStore;
    this.password = keyPassword;
    this.MAX_TOTAL_CONNECTION = MAX_TOTAL_CONNECTION;
    this.MAX_PER_ROUTE = MAX_PER_ROUTE;
}

public org.apache.http.client.HttpClient get() {
    PoolingClientConnectionManager connectionManager = new PoolingClientConnectionManager(getSchemeRegistry(this.keystore, this.password));
    connectionManager.setMaxTotal(MAX_TOTAL_CONNECTION);
    connectionManager.setDefaultMaxPerRoute(MAX_PER_ROUTE);
    connectionManager.closeExpiredConnections();

    org.apache.http.client.HttpClient httpClient = new DefaultHttpClient(connectionManager);
    httpClient.getParams().setIntParameter(CoreConnectionPNames.SO_TIMEOUT, DEFAULT_READ_TIMEOUT_MILLISECONDS);
    return httpClient;
}

private static SchemeRegistry getSchemeRegistry(KeyStore keyStore, String keyPassword) {
    SchemeRegistry registry = new SchemeRegistry();
    try{
        TrustManager[] trustManagerArray = { new TautologicalX509TrustManager() };
        KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
        kmf.init(keyStore, keyPassword.toCharArray());

        SSLContext sslc = SSLContext.getInstance("TLS");
        sslc.init(kmf.getKeyManagers(), trustManagerArray, null);
                    SSLSocketFactory sslSocketFactory = new SSLSocketFactory(sslc, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
                    registry.register(new Scheme("http", 80, PlainSocketFactory.getSocketFactory()));
        registry.register(new Scheme("https", 443, sslSocketFactory));
        return registry;
    }catch(Exception e){
        throw new RuntimeException(e.getMessage());
    }
}
} 
```

TautologicalX509TrustManager：

```
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

import javax.net.ssl.X509TrustManager;

public class TautologicalX509TrustManager  implements X509TrustManager {

private static final X509Certificate[] EMPTY_CERTIFICATES = new X509Certificate [0];

public void checkClientTrusted(X509Certificate[] arg0, String arg1)
    throws CertificateException {
}

public void checkServerTrusted(X509Certificate[] arg0, String arg1)
        throws CertificateException {
}

public X509Certificate[] getAcceptedIssuers() {
    return EMPTY_CERTIFICATES;
}

} 
```

在这个组件上运行负载测试后，我们看到很多 SSLSocketImpl 对象和 byte[]。对 SSLSocketImpl 的传入引用来自 Finalizer 对象。

当负载测试停止后我们在机器上执行 netstat 时，我们看不到任何与底层服务的开放 tcp 连接。然而，在负载测试期间，TIME_WAIT 状态的连接很多，ESTABLISHED 状态的连接很少，但在测试停止后它们都关闭了。

我们是否缺少任何关闭套接字的 API 调用？为什么我们的堆中有这么多 SSLSocketImpl 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-08T01:39:53.800

回复有点晚，但这个答案是为这个问题的未来访问者准备的。您在堆中看到大量的`SSLSocketImpl`然后被垃圾收集的原因是因为`SSLSessionContext`支持缓存 SSL 连接，可以跨不同的 TCP 连接重用，以减少在实际 TCP 连接建立后协商临时加密密钥时的握手开销.

默认情况下`SSLSessionContext`，默认时间段为 24 小时的会话数不受限制，这意味着您最终可能会在高流量下使用大量堆内存。一种方法是设置适合您的应用程序需求的缓存大小。这是一个例子：

`sslContext.getServerSessionContext().setSessionCacheSize(1000);`

# qt - 如何使用 QGraphicsView 的 translate() 函数？

> ID：14610568
> 
> 赞同：12
> 
> 时间：2013-01-30T17:56:00.300
> 
> 标签：qt, translate, qgraphicsview

在这里我有一个场景和一个关联的视图，然后我在场景坐标中有一个位置。我想用位置设置视口的中心。我该怎么做？我尝试使用 translate() 函数，但它不起作用？

```
view->translate(10, 10); 
```

视口应该随着 delta x 10 和 delta y 10 移动，但它不起作用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-04-27T22:54:51.480

您需要将图形视图的变换锚点模式设置为 NoAnchor。

```
setTransformationAnchor(QGraphicsView::NoAnchor); 
```

这可以防止图形视图按照其他锚模式（AnchorViewCenter、AnchorUnderMouse）的预期撤消转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-31T13:11:24.377

## 中心

正如[Frank Osterfeld](https://stackoverflow.com/users/299399/frank-osterfeld)所说，要将视口居中在给定位置，您可以简单地使用功能[centerOn](http://doc.qt.io/qt-4.8/qgraphicsview.html#centerOn)。

## 翻译

但是为了翻译你的视口，它存在另一种方式，包括改变你的滚动条位置：

```
// Your graphics view
QGraphicsView *view;

// dx, dy corresponds to your translation
int dx, dy;

// Change scrollbars position
view->horizontalScrollBar()->setValue( view->horizontalScrollBar()->value() + dx );
view->verticalScrollBar()->setValue( view->verticalScrollBar()->value() + dy ); 
```

## 使成为

如果需要，您还可以隐藏滚动条：

```
// Hide the scrollbars
view->setHorizontalScrollBarPolicy( Qt::ScrollBarAlwaysOff );
view->setVerticalScrollBarPolicy( Qt::ScrollBarAlwaysOff ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-29T12:01:00.730

我使用了以下解决方法：

```
QTransform old_transform = transform();

QRectF scene_rect = scene()->sceneRect();
QRectF new_scene_rect(scene_rect.x()-translation.x(),
                      scene_rect.y()-translation.y(),
                      scene_rect.width(),scene_rect.height());
scene()->setSceneRect(new_scene_rect);

setTransform(old_transform); 
```

变换部分是必要的，否则它会重置缩放。

这个解决方案本质上是在强制它改变它允许查看的位置，这远非优雅。

我希望其他人提出一个清晰的答案，允许`translate`按预期实际使用该方法。

请注意，我使用的是 Qt 4.85，可能与较新的版本不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T18:21:43.717

请参阅[错误报告以及解决方法](https://bugreports.qt.io/browse/QTBUG-7328)。

# delphi - 获取打开新表单的表单名称

> ID：14610569
> 
> 赞同：2
> 
> 时间：2013-01-30T17:56:04.000
> 
> 标签：delphi, delphi-7

我在 Delphi7 应用程序中有一个搜索窗口，根据打开搜索时哪个表单处于活动状态，它的行为需要有所不同。具体来说，有两种表单需要在搜索中显示不同的按钮，而当它来自所有其他表单时应该不可见。

有没有办法访问存储表单名称的属性（访问 Name 属性甚至 Caption 属性），我可以将其作为参数发送？或者另一种更好/更清洁的方式来实现这一点，如果你知道的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:20:38.023

在 MDI 应用程序中，主窗体的`ActiveMDIChild`属性为您提供当前活动的子窗体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:33:38.093

一种方法是

以其中一种形式

```
procedure TFormMain.btnSearchClick(Sender: TObject);
begin
   TFormSearch.CallForm(self); 
end; 
```

另一种形式：

```
procedure TFormMain2.btnSearchClick(Sender: TObject);
begin
   TFormSearch.CallForm(self); 
end; 
```

和别的：

```
procedure TFormMain3.btnSearchClick(Sender: TObject);
begin
   TFormSearch.CallForm(self); 
end; 
```

在 TFormSearch 源代码中，您可以获取在 onshow 事件中打开的表单的名称

```
class procedure TFormSearch.CallForm(AOwner: TComponent);
begin
   with TFormSearch.Create(AOwner) do
   begin
      showmodal;
      free;
   end;
end;

procedure TFormSearch.FormShow(Sender: TObject);
begin
  Showmessage(Owner.ClassName);
end; 
```

您需要从 Project->Option->Forms 的自动创建表单列表中删除 TFormSearch

我希望它对你有所帮助

# c - 没有强制转换的整数指针

> ID：14610575
> 
> 赞同：7
> 
> 时间：2013-01-30T17:56:29.650
> 
> 标签：c, pointers, gcc, casting, c99

当我调用一个需要指针的函数并传入一个值时，我得到了这个警告，我喜欢这样。

但是当该值恰好是文字“0”时，我没有收到警告。我认为这是因为 C 认为它是空指针，而不是值。有什么办法仍然会收到 0-literals 的警告，因为我已经因此而遇到了一些错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:22:14.417

GCC 支持[`nonnull`函数参数的属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes)，可以做你想做的事情（只要`-Wnonnull`启用警告选项）：

```
void* foo( int* cannot_be_null)  __attribute((nonnull (1))) ;

int main(int argc, char *argv[])
{
    int x;
    foo(&x);

    foo(0);  // line 13 - generates a -Wnonnull warning

    return 0;
} 
```

使用编译时，`gcc -c -Wnonnull test.c`我得到：

```
test.c: In function 'main':
test.c:13:5: warning: null argument where non-null required (argument 1) [-Wnonnull] 
```

您可以强制这是一个错误`-Werror=nonnull`。

请注意，仅当使用空指针文字（的另一个名称`0`）时才会引发此警告 - 以下代码不会触发警告：

```
int* p = NULL;
foo(p); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:00:01.450

不幸的是，没有使用原始 C 编译器。您应该尝试使用 lint 工具，如夹板，这可能会对您有所帮助（不过我不确定）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:59:53.920

> 有没有办法仍然收到 0-literals 的警告

我不知道一个，反正你不想要那个。常量数值 0 在分配给指针时被隐式处理为`NULL`没有将其强制转换为指针类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:10:14.267

我认为转换为 null 可能是编译器固有的 - 但是静态检查这些情况应该很容易，因为它们是相当独特的。

如果您希望传递 null 而不是 (int)0，请使用显式 NULL 枚举或定义，然后使用与模式 YourFunction(0); 匹配的任何内容；（允许空白）绝对是无效的。如果您想使用低技术，则可以很容易地使用 Grep。正如 Fabien 建议的那样，各种 lint 工具可能能够做到这一点。

在编码时，我总是尽量记住，如果可以的话，尽可能让错误的东西看起来是错误的，这样你就可以更容易地检测到它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:39:01.950

这个问题与问题类似。`Should I use symbolic names like TRUE and FALSE for Boolean constants, or plain 1 and 0?`

C 程序员必须理解 NULL 和 0 在指针上下文中是可以互换的，并且未转换的 0 是完全可以接受的。NULL （相对于 0）的任何使用都应该被视为一个温和的提醒，即涉及到一个指针；程序员不应该依赖它（为了他们自己的理解或编译器的理解）来区分指针 0 和整数 0。

只有在指针上下文中 NULL 和 0 是等价的。当需要另一种 0 时，不应使用 NULL，即使它可能有效，因为这样做会发送错误的风格信息。（此外，ANSI 允许将 NULL 定义为 ((void *)0)，这在非指针上下文中根本不起作用。）特别是，当需要 ASCII 空字符 (NUL) 时不要使用 NULL。提供您自己的定义

```
#define NUL '\0' 
```

如果你必须。

此信息来自此[链接](http://c-faq.com/null/nullor0.html)

# ios - 使用 AFNetworking (iOS)

> ID：14610576
> 
> 赞同：-3
> 
> 时间：2013-01-30T17:56:36.483
> 
> 标签：ios, objective-c, afnetworking, nsurlrequest

我正在尝试向服务器发出请求，但我不知道为什么它不起作用。这是我当前的代码：

```
NSURL *url = [NSURL URLWithString:@"http://www.www.www/www"];
    AFHTTPClient *httpclient = [[AFHTTPClient alloc] initWithBaseURL:url];
    [httpclient defaultValueForHeader:@"Accept"];

    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:valor, parametre, nil];

    NSMutableURLRequest *request = [httpclient requestWithMethod:@"PUT"
                                                            path:@"http://www.www.www/www"
                                                      parameters:params];
    //AFNetworking
    AFHTTPRequestOperation *afnet = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [afnet start];

    NSLog(@"%@: %@",[afnet responseString], [[afnet error] localizedDescription]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:00:41.307

它不起作用，因为路径无效，路径是您的基本 url 的额外部分，它会更改。您正在将完整的 URL 替换为路径。

# java - 无法为指定的 SELECT 语句定义敏感游标“SQL_CURSH200C1”。SQLCODE=-243，SQLSTATE=36001，DRIVER=4.13.127

> ID：14610577
> 
> 赞同：1
> 
> 时间：2013-01-30T17:56:37.267
> 
> 标签：java, hibernate, db2, hibernate-mapping, db2-luw

对于这样一个简单的查询，DB2 在hibernate 中使用时会无缘无故地抛出SQL 错误。

我想我已经为休眠属性设置了 DB2 的所有设置，因为其他一些查询运行良好。

```
 SQLException for SQL [/* criteria query */ 

        select this_.col1,this_.col2,this2_.col1,this2_.col3
           from TABLE this_ 
          left outer join TABLE1 this2_ 
          on this_.TAB1_ID=this2_.ID 
          where this2_.ID=?

   ]; SQL state [36001]; error code [-243]; could not execute query using scroll; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query using scroll 
```

我尝试在 IBM 网站上查找，它根本没有帮助，因为相同的测试用例在 hsqldb 上运行良好。

注意：Hibernate 为我生成查询我没有生成查询。

任何帮助将非常感激。

谢谢斯里达尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:09:22.890

DB2 引入了一种称为“敏感游标”的游标，它应该能够看到（某些）游标打开后数据所做的更改。替代方案是“不敏感”和“不敏感”游标类型。

如果查询返回只读结果集，这意味着敏感游标将无法看到数据更改，因为它的结果集与实际数据分离。DB2 返回错误 -243 表示它不能满足请求的“敏感”行为。

由于您的查询包括连接，它返回只读结果集，因此您会收到错误。

如果您不需要这种敏感性（例如您不打算更新数据），您可以尝试将 JDBC 属性 cursorSensitivity 设置为 TYPE_SCROLL_ASENSITIVE（即值为 2 的 int）。该参数可以像这样在 JDBC URL 字符串中编码：

```
jdbc:db2://hostname:port/dbname:cursorSensitivity=2; 
```

有关详细信息，请参见此处（或更好——请参见实际 DB2 版本的相应页面）：

*   [http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql00243n.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql00243n.html)
*   [http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.apdv.java.doc%2Fdoc%2Frjvdsprp.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.apdv.java.doc%2Fdoc%2Frjvdsprp.htm)

# c - C - 简单斐波那契程序中的共享内存

> ID：14610581
> 
> 赞同：0
> 
> 时间：2013-01-30T17:57:01.993
> 
> 标签：c, memory, shared

我不明白为什么在父进程中我的数据没有设置为我在子进程中设置的值。我在 fork 程序之前创建了 shared_data 结构变量，所以它应该是共享内存，对吗？

这是代码：

```
#include <sys/types.h>
#include <stdio.h>
#include <unistd.h>

#define MAX_SEQUENCE 20

typedef struct
{
  long fib_sequence[MAX_SEQUENCE];
  int sequence_size;
} shared_data;

void fibonacci(shared_data* sdata);

int main ( int argc, char *argv[])
{

   pid_t pid, pid1;
  shared_data sdata;

 /* check for parameter values to program */
  int i;
  for(i = 0; i < argc; i++)
  {
     if(strcmp(argv[i], "-ms") == 0)
     {
         int j = ++i;
         if(argv[j])
         {
            /* set passed in value to the sequence_size */
            int paramValue = atoi(argv[j]);
            if(paramValue <= MAX_SEQUENCE)
            {
                sdata.sequence_size = paramValue;
            }
            else
            {
                sdata.sequence_size = MAX_SEQUENCE;
            }
        }
        break;
    }
}

printf("sequence size: %i\n", sdata.sequence_size);

/* fork a child process */
pid = fork();

if (pid < 0)
{
    /* error occurred */
    fprintf(stderr, "Fork Failed");
    return 1;
}
else if (pid == 0)
{
    /* child process */
    pid1 = getpid();
    printf("current child process id = %d\n",pid);
    printf("child's parent process id = %d\n",pid1);
    fibonacci(&sdata);
    printf("child: [%d] Fibonacci Result: %i\n", getpid(), sdata.fib_sequence[sdata.sequence_size - 1]);
}
else
{
    /* parent process */
    pid1 = getpid();
    printf("current parent process id = %d\n",pid); /* C */
    printf("current parent process parent id = %d\n",pid1); /* D */
    wait(NULL);
    int i =0;
    for(i = 0; i < sdata.sequence_size; i++)
    {
        printf("parent: [%d] Fibonacci Result: %i\n", getpid(), sdata.fib_sequence[i]);
       }
     }
   }
void fibonacci(shared_data* sdata)
{
 int first = 0;
 int second = 1;
 int next;

int i;
for(i = 0; i < sdata->sequence_size; i++)
{
    if(i <= 1)
    {
        next = i;
    }
    else
    {
        next = first + second;
        sdata->fib_sequence[i] = next;

        first = second;
        second = next;
    }
     printf("child: [%d] %i\n", getpid(), next);
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:59:21.897

在 fork 期间，您的所有内存（甚至是预分配的内存）都变得不共享。在实现层面上，它可能会变成写时复制，但可见效果是一样的。

您可以使用 POSIX `shm_open`（和朋友）来分配共享内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:03:26.547

进程间通信（IPC）并不是这样直接实现的。您将不得不使用`shmget()` `shmat()`函数来使用共享内存来实现相同的功能。

有关更多信息，请参阅有关这些函数[shmget()](http://linux.die.net/man/2/shmget)、[shmat()的详细信息](http://linux.die.net/man/2/shmat)

# db2 - Report Studio：使用可变日期计划查询

> ID：14610582
> 
> 赞同：0
> 
> 时间：2013-01-30T17:57:15.120
> 
> 标签：db2, report, cognos

我正在尝试按今天的月份和之前的 6 个月过滤查询。我想将该查询安排在一个时间表中，以便每月运行一次。这应该使实际和 6 之前的每个月都发生变化。我正在使用 db2。

现在我的 where 子句中有这样的内容（对于 6 个月前）： (date>= TIMESTAMP ('2012-07-01-00.00.00.00') 和 date<= TIMESTAMP ('2013-1-1-00.00') .00.00'))

有没有办法获得今天的第一天和前 6 个月的时间戳？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:52:31.770

这有点笨拙，但你可以做这样的事情。DB2 并没有很好的机制来声明存储过程之外的变量。我也添加了`LAST_DAY`一点，只是为了方便/参考。

```
WITH 

THIS_MONTH(FIRST_DAY, LAST_DAY) AS (
    SELECT TIMESTAMP_ISO(
        CURRENT_DATE - (DAY(CURRENT_DATE) - 1) DAYS
    ),
    TIMESTAMP_ISO(
        CURRENT_DATE - (DAY(CURRENT_DATE) - 1) DAYS 
    ) + 1 MONTH - 1 MICROSECOND
    FROM SYSIBM.SYSDUMMY1
),

SIX_MONTHS_AGO(FIRST_DAY, LAST_DAY) AS (
    SELECT FIRST_DAY - 6 MONTHS,
           (FIRST_DAY - 6 MONTHS) + 1 MONTH - 1 MICROSECOND
    FROM THIS_MONTH
)

SELECT *
FROM YOUR_TABLE
WHERE UPDATE_TIMESTAMP BETWEEN 
    (SELECT FIRST_DAY FROM SIX_MONTHS_AGO)
    AND
    (SELECT FIRST_DAY FROM THIS_MONTH) 
```

# ivy - 如何发布具有多个分类器的 Ivy 项目？

> ID：14610584
> 
> 赞同：2
> 
> 时间：2013-01-30T17:57:21.020
> 
> 标签：ivy, nexus

我来自 Maven 背景。我正在从事的项目不是基于 Java 的。但是，需要使用独立的 Ivy 进行依赖管理。存储库管理器是 Nexus。

该项目产生了几个 zip 工件，需要通过独立的 Ivy 将它们部署到 Nexus。我想要一个 Maven 分类器的类似物，但对于 Ivy。

这是我的 ivysettings.xml：

```
<ivysettings>
    <settings defaultResolver="nexus"/>
        <credentials host="localhost"
                     realm="Sonatype Nexus Repository Manager"
                     username="user"
                     passwd="pass"/>

    <property name="nexus-public"
              value="http://localhost:8081/nexus/content/groups/public"/>
    <property name="nexus-releases"
              value="http://localhost:8081/nexus/content/repositories/releases"/>
    <property name="nexus-snapshots"
              value="http://localhost:8081/nexus/content/repositories/snapshots"/>

    <resolvers>
        <ibiblio name="nexus"
                 m2compatible="true"
                 root="${nexus-public}"/>
        <ibiblio name="nexus-releases"
                 m2compatible="true"
                 root="${nexus-releases}"/>
        <ibiblio name="nexus-snapshots"
                 m2compatible="true"
                 root="${nexus-snapshots}"
                 checkmodified="true"
                 changingPattern="*-SNAPSHOT"/>
    </resolvers>
</ivysettings> 
```

我有以下 ivy.xml：

```
<ivy-module version="2.0">
    <info organisation="kung.fu" module="ninja" revision="1.2.3"/>

    <publications>
        <artifact name="ninja" type="zip" ext="zip"/>
        <artifact name="ninja" type="win32" ext="zip"/>
        <artifact name="ninja" type="linux-x32" ext="zip"/>
        <artifact name="ninja" type="linux-x64" ext="zip"/>
    </publications>
</ivy-module> 
```

我正在尝试按如下方式部署到 Nexus：

```
java -jar /path/to/ivy.jar
     -settings /path/to/.ivy/ivysettings.xml
     -ivy ivy.xml
     -publish nexus-releases
     -publishpattern "target/[artifact]-[revision](-[classifier]).[ext]"
     -revision 1.2.3
     -status released
     -overwrite 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:24:19.203

我认为您缺少分类器字段的特殊[额外属性](http://ant.apache.org/ivy/history/2.1.0/concept.html#extra)。

此外，您需要生成并上传 Maven POM 文件。不幸的是命令行工具不支持这个......

看：

*   [将 ivy.xml 转换为 pom.xml](https://stackoverflow.com/questions/9426011/convert-ivy-xml-to-pom-xml/9429286#9429286)
*   [如何使用 ivy 和 nexus 发布 3rdparty 工件](https://stackoverflow.com/questions/5111831/how-to-publish-3rdparty-artifacts-with-ivy-and-nexus/5115447#5115447)

# 更新

独立 jar 旨在支持发布到存储库，但隐含的理解是它是一个常春藤存储库....

这就解释了为什么要推送 ivy 文件，它是 ivy 模块所需的模块元数据文件。另一方面，Maven 使用 POM 文件作为其模块元数据，这需要创建并发布到 Maven 存储库。

如果您在 ANT 中执行所有这些操作，您将拥有[makepom](http://ant.apache.org/ivy/history/latest-milestone/use/makepom.html)任务来自动生成 POM 文件，并且 ivy[发布](http://ant.apache.org/ivy/history/latest-milestone/use/publish.html)任务具有可用于禁止上传 ivy.xml 文件的“publishivy”属性。

# jquery - 使用 Jquery 解析 Google Map Json

> ID：14610590
> 
> 赞同：2
> 
> 时间：2013-01-30T17:57:46.617
> 
> 标签：jquery, json

我有一个谷歌 Mpa Json 网址 [http://maps.googleapis.com/maps/api/distancematrix/json?&origins=2020%20E%20main%20ST&destinations=100%20E%20Main%20St%20,Edmond,Ok&mode=driving&sensor =假](http://maps.googleapis.com/maps/api/distancematrix/json?&origins=2020%20E%20main%20ST&destinations=100%20E%20Main%20St%20,Edmond,Ok&mode=driving&sensor=false)

这给了我

```
{
   "destination_addresses" : [ "100 East Main Street, Edmond, OK 73034, USA" ],
   "origin_addresses" : [ "2020 East Main Street, Lamar, AR 72846, USA" ],
   "rows" : [
      {
         "elements" : [
            {
               "distance" : {
                  "text" : "410 km",
                  "value" : 409567
               },
               "duration" : {
                  "text" : "3 hours 49 mins",
                  "value" : 13759
               },
               "status" : "OK"
            }
         ]
      }
   ],
   "status" : "OK"
} 
```

我正在尝试使用

```
 function callGoogle(inputOrigin, inputDst, inputMode)
      {
      $.getJSON('http://maps.googleapis.com/maps/api/distancematrix/json?', { origins: inputOrigin, destinations: inputDst, mode: inputMode,  sensor: false }, function (data) {

                $.each(data, function (i, item) {               
                    console.log(item.rows.elements.distance.text);

                });

            });

        } 
```

但我遇到了错误。我如何使用 jquery 从这个 json 中获取 97.8 或 97766

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:06:08.820

你的意思是这样吗？

```
var data = {
    "destination_addresses": ["1000 Chopper Circle, Denver, CO 80204, USA"],
    "origin_addresses": [
        "2121 East Mulberry Street, Fort Collins Nursery, Fort Collins, CO 80524, USA"
    ],
    "rows": [
        {
            "elements": [
                {
                    "distance": {
                        "text": "97.8 km",
                        "value": 97766
                    },
                    "duration": {
                        "text": "57 mins",
                        "value": 3449
                    },
                    "status": "OK"
                }
            ]
        }
    ],
    "status": "OK"
};

alert(data.rows[0].elements[0].distance.value); 
```

请注意，数据有两个数组，我使用 [0] 来获取每个数组中的第一项。

# asp.net-mvc-4 - 网站广告软件

> ID：14610591
> 
> 赞同：0
> 
> 时间：2013-01-30T17:57:46.683
> 
> 标签：asp.net-mvc-4, web, ads, currency

我正在开发一个将有广告的网站。我目前正在查看水平和垂直横幅广告，但可以使用其他样式。我一直在使用 MVC4 开发网站。

到目前为止，我发现以下...

*   [phpAdsNew](http://sourceforge.net/projects/phpadsnew/)
*   [谷歌的AdSense](https://www.google.com/adsense/)
*   [点击器](http://www.clicksor.com/)
*   [BidVertiser](http://www.bidvertiser.com/)

**当前的障碍**

phpAdsNew 是开源的，但它需要我管理所有的财务。我想尽可能地保持这个免维护。

Google Adsence 对广告类型和网站内容（不含酒精等）有多项限制。由于我的客户是啤酒酿造商，因此我的主要目标有点像砍掉我的腿。

**问题**

有没有人使用过这些或其他易于使用的广告软件？

**要求**

我对每次点击费用、每千次展示费用和其他形式都很好。我希望看到一个可以放置在我的站点上并远程运行的小脚本。我更喜欢通过 Pay-Pal 的付款方式，但也可以接受支票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:06:35.757

我作为广告商与这些网络合作过，因此我可以根据我的经验给出意见。

phpAdsNew - 也称为 OpenX。显然他们正在关闭他们的免费广告服务业务。

Adsense - 因为他们不允许您的内容，所以您不能与他们合作。

Clicksor - 巨大的填充率，但我不确定他们的比率。

bidvertiser - 与 Clicksor 相同。

在决定使用哪个广告网络/软件时，有很多因素会发挥作用。

**第一个问题是**：您是否有直接的广告商，或者您是否正在寻找一个广告网络来帮助您销售您的广告位

**第二个问题是**：你有多少流量？大多数提供更优惠价格的大型网络仅适用于大型出版商

在任何情况下，您都可以查看像[http://www.adswiki.net/](http://www.adswiki.net/)这样的网站，其中有一个广告网络列表。一定要检查他们的历史，看看他们是否按时向出版商付款。

# html - 给一个表格 CSS 类

> ID：14610593
> 
> 赞同：5
> 
> 时间：2013-01-30T17:58:09.650
> 
> 标签：html, css, html-table

我正在尝试使用自定义 CSS 制作表格，但我不知道自己做错了什么。以前做过，但由于某种原因，我无法让该死的 CSS 显示出来……只是显示一个没有样式的空白表格。

CSS：

```
table.300yardsTable{background:#EEE;color:#333;font-size:14px;text-align:center;}
table.300yardsTableHeader tr{background:#CCC;font-weight:bold;}
table.300yardsRow tr{background:#EEE;color:#333;}
table.300yardsRow:hover tr{background:#242424;color:#CCC;} 
```

桌子：

```
<table width="600" border="1" align="center" cellpadding="2" cellspacing="2" class="300yardsTable">
<tr class="300yardsTableHeader">
    <td width="25%">LOFT</td>
    <td width="25%">HAND</td>
    <td width="25%">LIE</td>
    <td width="25%">VOLUME</td>
</tr>
<tr class="300yardsRow">
    <td>8*-12*</td>
    <td>RH/LH</td>
    <td>61*</td>
    <td>460cc</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:02:27.857

您的 css 错误，课程在 tr 上，而不是在桌子上。

```
tr.yardsTableHeader tr{background:#CCC;font-weight:bold;}
tr.yardsRow {background:#EEE;color:#333;}
tr.yardsRow:hover{background:#242424;color:#CCC;} 
```

从类名中删除#

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T18:02:21.847

您不能以数字开头的 css 类名。所以 300yearsTableHeader 是一个无效的名称

[规范对此提供了更多信息。](http://www.w3.org/TR/CSS21/syndata.html#characters)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T18:03:17.977

我相信您不能使用数字来启动 CSS 属性。尝试使用`.yardsTable`而不是`.300yardsTable`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T18:06:43.540

您不能以 . 开头`class`的名称`integer`。[在这里查看小提琴](http://jsfiddle.net/mnTD3/1/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:04:54.063

```
.300yardsTable {background:#EEE;color:#333;font-size:14px;text-align:center;}

    .300yardsTable .300yardsTableHeader {background:#CCC;font-weight:bold;}

    .300yardsTable .300yardsRow {background:#EEE;color:#333;}
         .300yardsTable .300yardsRow:hover {background:#242424;color:#CCC;} 
```

Css 选择器名称不能以数字开头。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T18:06:46.567

正如其他人所提到的，您不能以#开头的类名。此外，需要删除“表”前缀或使用 tr.classname 更改 tr 上的前缀

# jquery - 在 BlackNegative 上看到的效果

> ID：14610594
> 
> 赞同：0
> 
> 时间：2013-01-30T17:58:10.140
> 
> 标签：jquery, css, html

我想知道如何做[黑色负片](http://www.blacknegative.com/#!/whoweare/)上看到的效果- 我正在谈论文本“讲述，迷人，故事”上的悬停效果......你可以只用 css3 或 jQuery 来做吗，如果是这样，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:19:23.440

您可以使用 jQuery 实现基本功能（绝对不完美，但您可以通过一些调整使其工作）：

```
/* Expand on mouseover */
$(".whoweare-title").hover(function(){
    $(this).stop(true, false).animate({
        height: '87px',
        marginTop: '27px',
        marginBottom: '27px'
    });
    $(".whoweare-section-container").stop(true, false).animate({
        marginTop: '-126px',
    });
}, function() {
    $(this).stop(true, false).animate({
        height: '24px',
        marginTop: '0px',
        marginBottom: '0px'
    });
    $(".whoweare-section-container").stop(true, false).animate({
        marginTop: '-67px',
    });
}); 
```

另见[这个小提琴](http://jsfiddle.net/pwoidke/qUeBq)。

# eclipse - 添加到 repo 后无法在 eclipse 中运行项目。不是java项目

> ID：14610602
> 
> 赞同：3
> 
> 时间：2013-01-30T17:58:35.840
> 
> 标签：eclipse, github, eclipse-plugin, egit, jgit

我设置了我的 github 帐户和 egit。它真的很好用。我已经学会了分期，提交，推/拉......几乎。

不幸的是 (Juno) Eclipse 没有将 FoobarProstate 识别为 Java 项目。它说 FoobarProstate 只是一个项目。当我单击绿色运行箭头时，我收到错误消息

> 选择无法启动，并且最近没有启动。

我在 Eclipse 中创建了项目，使用向导使用**File > Import > Git > Projects from Git 将其导入。**那可能是我的错误。

这是我在 Eclipse Package Explorer 中看到的。

![Eclipse 包资源管理器的屏幕截图](../Images/652e93cb4faa36e75d3b74ec99277d5b.png)

我试过的：

*   **右键单击项目名称 > 配置**给我一个选项：**转换为 Maven 项目**。我不知道那是什么，我不认为我想要那个。

*   **绿色运行下拉箭头 > 运行方式**给了我*（不适用）*。

*   我无法弄清楚将项目更改为 java 项目的在线说明。

在我在网上找到的答案中，它说要更改运行配置（**绿色运行下拉箭头>运行配置...**）。但这些说明要么不适用于朱诺，要么难以遵循。我真的很困惑。

笔记：

*   在我的存储库的 github 视图中，此存储库名称旁边显示“Java”！该存储库与我的 Java 项目具有相同的名称 (FoobarProstate)。

*   我的 FoobarProstate 文件存储在 C:\Users\EmilyBB\git\FoobarProstate 中。这不是我的 Eclipse 工作区（C:\Users\EmilyBB\workspace）。那是问题吗？

*   我刚刚安装了 Android 的东西（ADT 等）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:15:28.407

问题可能是在途中的某个地方，原始的 .project 和 .classpath 文件丢失了。它们一起表明该项目是一个 Java 项目以及它的 Java 构建路径——包括您的源代码在项目中的位置。物理上不在工作区目录下应该不是问题。

.project 文件内容应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>YOUR project's name</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T09:45:54.353

试试这个： **右键单击项目名称>配置>转换为分面形式>**在出现的窗口Java中选择并单击“确定”

# firefox - Firefox 插件：获取所有书签文件夹的数组

> ID：14610603
> 
> 赞同：1
> 
> 时间：2013-01-30T17:58:37.100
> 
> 标签：firefox, firefox-addon, directory

我希望能够在树中的任何位置从根文件夹返回所有用户书签文件夹的数组。

这是我来过的最接近的，它不返回任何 RESULT_TYPE_FOLDER：

```
function find_folders()
{
  var history = Cc["@mozilla.org/browser/nav-history-service;1"]
     .getService(Ci.nsINavHistoryService);

  var query = history.getNewQuery();
  var options = history.getNewQueryOptions();

  // Query users bookmarks, not history
  options.queryType = options.QUERY_TYPE_BOOKMARKS;

  // Execute the search and store results
  var result = history.executeQuery(query, options);

  // Open the root containerNode and open it
  var resultContainerNode = result.root;

  // OPEN resultContainerNode
  resultContainerNode.containerOpen = true;
  var folders = [];

  // Search results are now child items of this container?
  for (var i=0; i < resultContainerNode.childCount; ++i) {
    var childNode = resultContainerNode.getChild(i);

    if(childNode.type === childNode.RESULT_TYPE_FOLDER)
    {
      folders.push(childNode);
    }
  }

  // CLOSE resultContainerNode
  resultContainerNode.containerOpen = false;

  return folders;
};

find_folders(); 
```

如果我删除此结果类型检查，我会得到很多 URI，一些 RESULT_TYPE_QUERY，但没有 RESULT_TYPE_FOLDER：

```
childNode.type: 0
childNode.type: RESULT_TYPE_QUERY
childNode.title: Most Visited
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: 0
childNode.type: RESULT_TYPE_QUERY
childNode.title: History 
```

此处的文档：[https](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryQueryOptions#Query_type_constants) ://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryQueryOptions#Query_type_constants 建议您可以设置：

> **excludeItems** *boolean* 此选项从书签查询中排除所有 URI 和分隔符。如果您只需要书签文件夹和查询的列表（例如位置页面的左窗格），则可以使用此选项。忽略历史查询。默认为假。

但是设置这个会导致查询不返回任何结果：

```
function find_folders()
{
  var history = Cc["@mozilla.org/browser/nav-history-service;1"]
     .getService(Ci.nsINavHistoryService);

  var query = history.getNewQuery();
  var options = history.getNewQueryOptions();

  options.queryType = options.QUERY_TYPE_BOOKMARKS;
  options.excludeItems = true; // Exclude everything that isn't a folder?
  // Execute the search and store results
  var result = history.executeQuery(query, options);

  // Open the root containerNode and open it
  var resultContainerNode = result.root;

  // OPEN resultContainerNode
  resultContainerNode.containerOpen = true;
  var folders = [];

  // Search results are now child items of this container?
  for (var i=0; i < resultContainerNode.childCount; ++i) {
    var childNode = resultContainerNode.getChild(i);
    folders.push(childNode);
  }

  // CLOSE resultContainerNode
  resultContainerNode.containerOpen = false;

  return folders;
};

find_folders(); // Returns nothing :C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:12:35.910

`excludeItems`仅当您指定要搜索的文件夹时才有效，例如

```
query.setFolders([PlacesUtils.toolbarFolderId, PlacesUtils.bookmarksMenuFolderId,
                 PlacesUtils.unfiledBookmarksFolderId], 1); 
```

它也不会返回文件夹的平面列表，因此您必须遍历结果，递归地打开和收集内容。

如果您有一个很好的用例来获取文件夹的平面列表，您可以自由提交增强错误。

最后，您将 Places 节点从结果中取出并将它们分发出去，这基本上使它们成为僵尸对象，如果您创建自己的对象并添加您关心的东西会更好，例如`{ title: node.title, uri: node.uri }`，或其他任何东西（我刚刚在这里发现了一个与此行为相关的错误，我将归档并修复它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:36:04.547

好吧，看起来我在 Firefox Places 查询界面中遇到了一些错误和限制。

1 - *（错误？）*将`query.setFolders([folder_array], 1)`第二个参数（文件夹计数）设置为 1 以外的任何值都不会导致任何结果。将其设置为 1 将仅搜索阵列中的第一个文件夹。

2 - （限制）`excludeItems`仅在您指定要搜索的文件夹时才有效：C

3 - （限制/错误？）`query.setSearchTerm(term)`似乎与文件夹名称不匹配，所以我不得不根据搜索词手动检查它们：Q__

粗略的解决方法是创建要搜索的文件夹数组，然后分别搜索每个文件夹，将结果连接起来，如下所示：

```
bookmarkr_utilities.find_folders = function(search_term)
{
  bookmarkr_utilities.debug_log("find_folders()");
  bookmarkr_utilities.folders = [];

  var folders = [   bookmarkr_utilities.bmsvc_service().toolbarFolder
                  , bookmarkr_utilities.bmsvc_service().bookmarksMenuFolder
                  , bookmarkr_utilities.bmsvc_service().unfiledBookmarksFolder   ];

  for (var i = 0; i < folders.length; i++) 
  {
    bookmarkr_utilities.folders = bookmarkr_utilities.folders.concat(bookmarkr_utilities.find_inside_folder(search_term, folders[i]));
  }

  return bookmarkr_utilities.folders;
}; 
```

实际运行搜索的辅助函数：

```
bookmarkr_utilities.find_inside_folder = function(search_term, search_folder)
{
  var history = Cc["@mozilla.org/browser/nav-history-service;1"]
     .getService(Ci.nsINavHistoryService);

  var result_folders = [];

  var query = history.getNewQuery();

  query.setFolders([search_folder], 1);

  var options = history.getNewQueryOptions();

  options.excludeItems = true; // exclude everything except folders
                               // only works when folders are set

  // Execute the search and store results
  var result = history.executeQuery(query, options);

  // Open the root containerNode and open it
  var resultContainerNode = result.root;
  resultContainerNode.containerOpen = true;

  // Search results are now child items of this container?
  bookmarkr_utilities.debug_log("resultContainerNode.childCount: " + resultContainerNode.childCount);
  for (var i=0; i < resultContainerNode.childCount; ++i) {
    var childNode = resultContainerNode.getChild(i);

    if(childNode.type === childNode.RESULT_TYPE_FOLDER)
    {
      // HACK HACK HACK
      if(search_term)
      {
        if(childNode.title.toLowerCase() == search_term.toLowerCase())
          result_folders.push(childNode);
      }
      // END HACK HACK HACK OH GOD
      else
      {
        result_folders.push(childNode);
      }
    }
  }

  // Close container
  resultContainerNode.containerOpen = false;

  return result_folders;
} 
```

# regex - 重写规则找到目录并将路径重写为“目录/？目录”

> ID：14610604
> 
> 赞同：0
> 
> 时间：2013-01-30T17:58:47.650
> 
> 标签：regex, url, mod-rewrite, url-rewriting, directory

我已经使用这个 Apache Rewrite Rule 有一段时间了，它通常会给我很好的结果：

```
RewriteRule ^([^\.]+)/?$ index.php?$1 [L] 
```

当用户访问`www.mysite.com/about-us`时，服务器显示来自的内容`www.mysite.com/index.php?about-us`。内容存储在数据库中，我使用查询字符串（'about-us'）搜索每个页面的内容。直到最近，这一切都很好。

我正在构建的一个新站点有一个目录（我们将其称为“文件夹”），它与我想要的查询字符串名称相同——也就是说，不是在`newsite.com/folder`目录中查找索引文件，而是`www.newsite.com/folder`应该通过`index.php`并使用“文件夹”作为搜索参数。相反，我得到了这个：

```
www.newsite.com/folder/?folder 
```

其中我的代码将查询字符串解释为“文件夹/”。所以第一个问题是 URL 看起来很奇怪；第二个问题是我的页面存储时没有任何尾部斜杠。

当然，我可以在收到查询字符串后调整我的代码以去掉任何斜杠，但这可能会使创建模拟文件夹结构的 URL 变得更具挑战性，例如`www.newsite.com/user/images/month`. 它仍然无法摆脱我已经拥有的时髦 URL。

我怀疑有一个简单的解决方案可以使我的 URL 更漂亮，并防止服务器在我的目录中查找文件（除非用户明确要求提供 html 或 php 文件）。感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:30:34.450

将“DirectorySlash Off”添加到“.htaccess”文件的开头

我遇到了同样的问题，发现了一个类似的帖子，它只是引用了 DirectorySlash 文档（[http://httpd.apache.org/docs/2.2/mod/mod_dir.html](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)）

# r - 在 R（或 Matlab 中？？）中对 XY 坐标进行随机采样

> ID：14610607
> 
> 赞同：0
> 
> 时间：2013-01-30T17:58:57.407
> 
> 标签：r, random, sampling

我的数据框有以下四列：类型（“A”或“B”）、xvar、经度和纬度。看起来像：

```
 type    xvar    longitude    latitude
[1,]   A       20      -87.81        40.11
[2,]   A       12      -87.82        40.12
[3,]   A       50      -87.85        40.22
....
[21,]  B       24      -87.79        40.04
[22,]  B       30      -87.88        40.10
[23,]  B       12      -87.67        40.32
[24,]  B       66      -87.66        40.44
.... 
```

type="A" 有 20 行，type="B" 有 25,000 行。我的任务是将 20 个“A”数据点的 xvar 值随机分配到“B”类型的 XY 空间而不进行替换。例如，在 type="A" 的第一次观察中的 xvar=20 可以随机位于 [22,] 中，即 (-87.88,40.10) 。因为我在没有替换的情况下这样做，理论上，我可以进行 25,000/20 = 1,250 次复制。我想要 1,000 次复制。

我有一个函数（比如 myfunc(xvar,longitude,latitude)），它从一个随机样本中返回一个统计值。我首先创建一个 1,000x1 的空矩阵（例如 myresult）。

```
myresult <- array(0,dim=c(1000,1)) 
```

然后，对于每个随机样本，我应用我的函数 (myfunc) 来计算统计量。

```
for (i in seq(1:1000)) {
  draw one sample, that has three variables: xvar, longitude, latitude.
  apply my function to this selected sample.
  store the calculated statistic in the myresult[i,]
} 
```

我想知道如何在 R 中执行此操作。（可能在 Matlab 中？？）谢谢！

==================================================== ===========

更新：@用户。借用你的想法，以下是我想要的：

```
dd1 <- df[df$type == "B" ,] 
dd2 <- df[df$type == "A" ,]
v   <- dd2[sample(nrow(dd2), nrow(dd2)), ]
randomXvarOfA <- as.matrix(v[,c("xvar")])  
cols <- c("longitude","latitude")
B_shuffled_XY <- dd1[,cols][sample(nrow(dd1), nrow(dd2)), ]
dimnames(randomXvarOfA)=list(NULL,c("xvar"))
sampledData <- cbind(randomXvarOfA,B_shuffled_XY)
sampledData

   xvar longitude latitude
4   20    -87.79    40.04
7   12    -87.66    40.44
5   50    -87.88    40.10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:32:49.620

读入你的数据：

```
 df<- read.table( text="
      type    xvar    longitude    latitude
      A       20      -87.81        40.11
      A       12      -87.82        40.12
      A       50      -87.85        40.22
      B       24      -87.79        40.04
      B       30      -87.88        40.10
       B       12      -87.67        40.32
      B       66      -87.66        40.44", header = TRUE) 
```

我正在写这个没有分裂，它看起来很乱。所以我决定只拆分你的`data.frame`.

```
 dd1 <- df[df$type == "B" ,]  # get all rows of just type A
    dd2 <- df[df$type == "A" ,]  # get all rows of just type B

    v   <- dd2[sample(nrow(dd2), 2), ] #sample two rows at random that are type A
    # if you want to sample 20 rows change the 2 to a 20

    cols <- c("longitude", "latitude")
    dd1[,cols][sample(nrow(dd1), 2), ] <- v[,cols] 
    #Add the random long/lat selected from type As into 2 random long/lat of B

# put the As and Bs back together
rbind(dd2,dd1)
#  type xvar longitude latitude
# 1    A   20    -87.81    40.11
# 2    A   12    -87.82    40.12
# 3    A   50    -87.85    40.22
# 4    B   24    -87.79    40.04
# 5    B   30    -87.85    40.22
# 6    B   12    -87.81    40.11
# 7    B   66    -87.66    40.44 
```

如您所见，B 的第 5 行和第 6 行具有从 A 类型中随机选择的新纬度和经度值。我没有改变`xvar`价值观。我不知道你是否想要这个。如果您确实想更改 the ，`xvars`那么您将更`cols`改为 `cols <- c("xvar","longitude", "latitude")`.

在函数内部，它看起来像：

```
changestuff <-  function(x){

        dd1 <- x[x$type == "B" ,]  # get just A
        dd2 <- x[x$type == "A" ,]  # get just B
        v   <- dd2[sample(nrow(dd2), 2), ]
        cols <- c("longitude", "latitude")
        dd1[,cols][sample(nrow(dd1), 2), ] <- v[,cols] 
        rbind(dd2,dd1)
                            }

changestuff(df) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:10:51.333

我认为您正在寻找的功能是“样本”功能。它会像这样工作（使用你的循环方法）：

```
drawn_Sample <- sample(21:25000, 20000, rep=FALSE)
myresult <- integer(1000)    

for (i in seq(1:1000){
index_Values <- (1 + (i-1)*20):(20 + (i-1)*20))
myresult[i] <- myfun(my_Data$xvar[1:20], my_Data$longitude[drawn_Sample[index_Values]], my_Data$latitude[drawn_Sample[index_Values]])
} 
```

在这种情况下，我将 1:20 行（值为“A”的行）随机分配给由 20 个随机选择的行 21:25000 组成的组，然后在分组中应用该函数。

这感觉有点不必要的复杂，我认为如果我们对您的功能（'myfun'）有更多了解，我们可以将其全部浓缩。我假设它是矢量化的。

**更新**：应 OP 的要求，我正在添加如何修改此答案以适应不易排序的数据框。

```
repetitions <- 1000 # Change this as necessary

A_data <- my_Data[my_Data$type=="A",]
B_data <- my_Data[my_Data$type=="B",]

A_rows <- nrow(A_data)
B_rows <- nrow(B_data)

drawn_Sample <- sample(1:B_rows, repetitions * A_rows, rep=FALSE)
myresult <- integer(repetitions)    

for (i in seq(1:repetitions){
index_Values <- (1 + (i-1)*A_rows):(A_rows + (i-1)*A_rows))
myresult[i] <- myfun(A_data$xvar, B_data$longitude[drawn_Sample[index_Values]], B_data$latitude[drawn_Sample[index_Values]])
} 
```

# asp.net-mvc - 部署 MVC 4 Razor + IIS 7.0 + DotNetOpenAuth.Core

> ID：14610608
> 
> 赞同：0
> 
> 时间：2013-01-30T17:58:59.337
> 
> 标签：asp.net-mvc, iis, deployment, razor

我在 IIS 中发布了我的 MVC 4 Razor 应用程序，当我浏览应用程序时出现此错误。

```
"Could not load file or assembly 'DotNetOpenAuth.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246' or one of its dependencies. The system cannot find the file specified." 
```

我尝试在 MVC dll 属性的 Copy Local 选项中将“false”更改为“true”。

```
System.Web.Abstractions,
System.Web.Routing,
System.Web.MVC,
System.Web.Helpers,
System.Web.Razor 
```

我已经卸载了与`DotNetOpenAuth`.

我使用“添加可部署的依赖项”来选择具有 Razor 语法的 ASP.NET 网页。

我的应用程序是一个典型的 MVC 4 项目，还有 4 个库项目。

我的 IIS 配置是常见的。默认应用程序池。集成模式。

当我发布时，我选择文件系统和目标位置。

希望有人可以帮助我，因为我已经处理这个问题好几天了。

**编辑**

为了解决这个问题，我必须删除在`Microsoft.Web.WebPages.OnAuth`已发布文件的 Bin 文件夹中生成的 dll。

> “DotNetOnAuth 是一个开源库，它将 OpenID、OAuth 和 ICard 功能引入 Microsoft .NET Framework。”

该库似乎在不断增长，但 .NET Framework 仍在引用旧的 4.0.0.0 版本。

就我而言，删除它解决了这个问题，因为我没有使用它。

但是我不知道其他人在使用图书馆时应该怎么做。也许更改引用的程序集版本会解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:21:23.527

很高兴你解决了。

我在将 MVC 应用程序部署为`bin deploy`. 并`ASP .NET Webpages with Razor syntax`在`Add deployable dependencies`对话框中选择。这会导致 VS 添加对 Oauth 的引用。

通常，删除生成的可部署bin文件夹和App的bin文件夹，然后清理重建解决方案即可解决问题。

# android - 当用户打开应用程序时，是否可以分辨出他们的语言是什么？

> ID：14610609
> 
> 赞同：0
> 
> 时间：2013-01-30T17:59:00.707
> 
> 标签：android, localization

我有一部分应用程序是交互式的，只能由说英语的人使用。有没有办法在用户登陆页面时检测他们的语言设置，以便我可以动态隐藏一些我只想向英语使用者显示的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:22:52.937

您还可以考虑本地化您的资源，而不是以编程方式进行所有操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:00:56.987

您可以使用以下代码检查设备语言：

java.util.Locale.getDefault().getDisplayLanguage();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:03:12.960

您可以使用[`Locale.getDefault()`](http://developer.android.com/reference/java/util/Locale.html#getDefault%28%29)获取他们当前的首选语言环境。从那里，您可以使用[`getLanguage`](http://developer.android.com/reference/java/util/Locale.html#getLanguage%28%29)查找`en`语言代码，以及`getVariant`您是否只对美国或其他变体感兴趣。

# php - Google_ServiceException：调用 POST 时出错

> ID：14610612
> 
> 赞同：1
> 
> 时间：2013-01-30T17:59:05.347
> 
> 标签：php, google-drive-realtime-api

我需要帮助。试图从本地主机发送文件到谷歌驱动器。1\. 我下载了示例项目并替换了我的凭据 2\. 然后我得到了：

`Fatal error: Uncaught exception 'Google_ServiceException' with message 'Error calling POST https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart: (403) Access Not Configured'`

谷歌什么也没说，但也许你有什么想法，出了什么问题？代码

```
<?php
session_start();
$url = 'http://localhost/api/';
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';
$client = new Google_Client();
$client->setClientId('1027833231791.apps.googleusercontent.com');
$client->setClientSecret('iriHG1HKCCYLphkSatrpOn_p');
$client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));
if (isset($_GET['code'])) {
    $_SESSION['accessToken'] = $client->authenticate($_GET['code']);
    header('location:'.$url);exit;
} elseif (!isset($_SESSION['accessToken'])) {
    $client->authenticate();
}
$files= array();
$dir = dir('files');
while ($file = $dir->read()) {
   if ($file != '.' && $file != '..') {
       $files[] = $file;
    }
}
$dir->close();
if (!empty($_POST)) {
    $client->setAccessToken($_SESSION['accessToken']);
    $service = new Google_DriveService($client);
    $file = new Google_DriveFile();
    foreach ($files as $file_name) {
    $file_path = 'files/'.$file_name;
    $mime_type = 'text/plain; charset=us-ascii';
    $file->setTitle($file_name);
    $file->setDescription('This is a '.$mime_type.' document');
    $file->setMimeType($mime_type);
    $service->files->insert(
        $file,
        array(
            'data' => file_get_contents($file_path),
            'mimeType' => $mime_type
        )
    );
  }

    header('location:'.$url);exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T11:54:09.810

确保您打开了“Drive API”（不是“Drive SDK”；）除非您也想要那个）。我也犯了这个错误。

# optimization - GCC 检测的可执行文件如何比非检测的更快？

> ID：14610615
> 
> 赞同：0
> 
> 时间：2013-01-30T17:59:14.373
> 
> 标签：optimization, gcc, compiler-construction, instrumentation, pgo

我在 SPEC 基准测试中对 GCC Profile-Guided Optimization 的开销进行了基准测试。我在一些基准测试中得到了一些奇怪的结果。事实上，我的两个基准测试在检测时运行得更快。

正常的可执行文件使用以下命令编译： -g -O2 -march=native

检测的可执行文件使用以下命令编译： -g -O2 -march=native -fprofile-generate -fno-vpt

我正在使用 GCC 4.7（准确地说是 Google 分支）。运行基准测试的计算机具有 Intel(R) Xeon(R) CPU E5-2650 0 @ 2.00GHz。

bwaves 是 Fortran 基准测试和 libquantum

结果如下：

```
bwaves-normal: 712.14 
bwaves-instrumented: 697.22 
  => ~2% faster 

libquantum-normal: 463.88
libquantum-instrumented: 449.05
  => ~3.2% faster 
```

我多次运行基准测试，认为这可能是 ma 机器上的问题，但每次我都确认它们。

我会理解某些程序的开销很小，但我看不出有任何改进的理由。

所以我的问题是：GCC 检测的可执行文件如何比优化的普通可执行文件更快？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:41:43.730

查看 GCC 文档，它似乎`-fprofile-generate`确实激活了一些特定的代码转换以使分析更容易/更便宜，因此检测代码并不是真正的原始代码 + 检测。这些更改可以使代码更快，添加代码也会使缓存行为发生变化。如果没有看到有问题的代码，很难知道。从我（很久以前）玩弄[LCC](http://en.wikipedia.org/wiki/LCC_%28compiler%29)开始，当智能分析完成时，它涉及的代码更改非常少。

只是好奇：与上述相比，考虑到配置文件编译的代码如何？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:16:17.283

我可以想到两种可能性，都与缓存有关。

一是计数器增量“温暖”了一些重要的缓存行。其次，添加检测所需的结构会导致一些频繁使用的数组或变量落入不同的缓存行。

另一个问题是，在 for 循环中不必每次都进行分析/增加计数器 - 如果循环中没有“中断”或“返回”，则允许编译器优化循环外的增量。

# vba - 在运行时添加用户窗体控件“对象变量或未设置块变量”错误

> ID：14610616
> 
> 赞同：2
> 
> 时间：2013-01-30T17:59:15.053
> 
> 标签：vba, ms-project

我下面的代码给出了一个错误

`Set VM = AP.VBProject.VBComponents("ViewManager").Designer.Controls`

我查看了许多工作代码的示例，但无法弄清楚我的设置如何不同以导致错误。

错误是`Run-time error '91': Object variable or With block variable not set`

谢谢你的帮助。

```
Private Sub btnAdd_Click()
    Dim View As String
    Dim FField As String
    Dim TField As String
    View = cmbView.Value
    FField = cmbFrmFld.Value
    TField = cmbToFld.Value

    'if it is the first add change one way, if after the first add change another
    If ViewManager.Height = 116 Then
        ViewManager.Height = ViewManager.Height + 64.5
    ElseIf frmViews.Height > 116 Then
        ViewManager.Height = ViewManager.Height + 30
    End If

    Dim AP As Project
    Set AP = ActiveProject
    Dim lbl As MSForms.Label
    Dim VM As Object

    Set VM = AP.VBProject.VBComponents("ViewManager").Designer.Controls
    With VM
        Set lbl = .Add("Forms.Label.1")
    End With

    With lbl
        .Left = 6
        .Top = ViewManager.Height - 32
        .Width = 156
        .Caption = View
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:43:46.187

我相信您的问题是您正在使用 VBIDE 表单设计器在加载时将控件添加到 ViewManager 表单，这是不可能的。您可以看到将以下代码添加到您的模块并在鼠标停止的“VM”VBComponent 上添加手表（右键单击并添加手表）。您会看到“Designer”属性为“Nothing”，而如果在未加载表单时运行相同的代码，您将能够访问 Designer 属性及其所有属性。

```
Sub CheckVBComponent()
    Dim AP As Project, VM as VBIDE.VBComponent

    Set AP = ActiveProject
    'Note also this assumes that you've named your ViewManager correctly in the VBProject
    Set VM = AP.VBProject.VBComponents("ViewManager")

    'Add watch here
    Stop
End Sub 
```

这里的简单解决方法是在运行时将控件直接添加到窗体中，而不使用 VBIDE。例如：

```
Sub AddLabeltoMSProject
   Dim frmLbl As MSForms.Label

   Set frmLbl = ViewManager.Controls.Add("Forms.Label.1")

   With frmLbl
       .Caption = "I really love labels"
       .Top = ViewManager.Height - 32
       .Left = 6
       .Width = 156
   End With
End Sub 
```

# file - 批处理文件以查看文件并运行程序

> ID：14610617
> 
> 赞同：0
> 
> 时间：2013-01-30T17:59:16.667
> 
> 标签：file, search, batch-file

好吧，我相信我正在用这个突破批处理文件的限制。

我需要一个批处理文件，它会在文件中查找“X”或“y”。如果找到任何一个，运行一个程序。如果两者均未找到，请继续执行其余代码。它将在其中查找的文件具有扩展名 .inf。它是使用记事本打开的。我什至不知道从哪里开始。任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:39:13.200

您可以使用 FINDSTR 同时搜索多个条目。像这样使用它：

```
FINDSTR "term1 term2 term3 ..." 
```

如果至少找到一个术语，则结果将是成功的。如有必要，使用`/I`开关使搜索不区分大小写：

```
FINDSTR /I "term1 term2 term3 ..." 
```

`FINDSTR`默认搜索`stdin`。将输入重定向到您的`.inf`文件以使其搜索文件：

```
FINDSTR /I "term1 term2 term3 ..." <file.inf 
```

或者，您可以将文件名作为另一个参数：

```
FINDSTR /I "term1 term2 term3 ..." file.inf 
```

这两种情况下的输出会略有不同，但我知道您实际上并不需要输出，而是搜索的*结果*，即它是成功还是失败。

要检查结果，您可以使用显式`ERRORLEVEL`测试，如下所示：

```
FINDSTR /I "term1 term2 term3 ..." file.inf
IF NOT ERRORLEVEL 1 yourprogram.exe 
```

另一种语法是使用`ERRORLEVEL` *系统变量*，这可能比前者更直接：

```
IF %ERRORLEVEL% == 0 yourprogram.exe 
```

另一种方法是使用`&&`运算符。这种方法[与test](https://stackoverflow.com/questions/10354016/file-redirection-in-windows-and-errorlevel "File redirection in Windows and %errorlevel%")[并不*完全相同*](https://stackoverflow.com/questions/10354016/file-redirection-in-windows-and-errorlevel "Windows 中的文件重定向和 %errorlevel%")，`ERRORLEVEL`但test和work`FINDSTR`都是一样的，在这种情况下，这种方法的优点是更简洁：`ERRORLEVEL``&&``&&`

```
FINDSTR /I "term1 term2 term3 ..." file.inf && yourprogram.exe 
```

这差不多了。最后一点是，由于您可能对 的输出实际上并不感兴趣`FINDSTR`，您不妨通过将其重定向到 来抑制它`NUL`，如下所示：

```
FINDSTR /I "term1 term2 term3 ..." file.inf >NUL && yourprogram.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:27:02.020

FIND 和 FC 的组合可以做到这一点。

```
@echo off
REM try to find X
FIND /c "X" file.inf >test_isxfound.txt
REM what does it look like when I don't find a match
FIND /c "th1s$tringb3tt3rn0tbeinthisfile" file.inf >test_xnotfound.txt
REM then compare those results with the results where we know it wasn't found
FC test_xnotfound.txt test_isxfound.txt
REM then check to see if FC saw a difference
IF ERRORLEVEL 1 goto xisfound

ECHO *** X is not found
goto end
:xisfound
ECHO *** X is found
goto end
:end
del test_xnotfound.txt
del test_isxfound.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:03:10.413

尝试从这个页面开始：

[http://www.robvanderwoude.com/findstr.php](http://www.robvanderwoude.com/findstr.php)

然后进一步参考批处理文件的基础知识：

[http://www.robvanderwoude.com/batchfiles.php](http://www.robvanderwoude.com/batchfiles.php)

# java - 如何在不保持文件打开的情况下跟踪 Java 中的“Tail -f”之类的文件（防止重命名/删除）

> ID：14610621
> 
> 赞同：15
> 
> 时间：2013-01-30T17:59:28.800
> 
> 标签：java, file, tail, logfile

我想从 Java 应用程序中“拖尾 -f”很多日志文件。

我已经通过监视大小和上次更新并在文件大小或上次更新时间发生变化时反复打开文件并读取最后几个字节来实现这一点 - 然后立即关闭它。

这似乎有问题，因为当记录器决定重命名文件时我可能会打开它，这会导致某种问题。

我还想检测一个“滚动”文件，其机制比注意到文件大小减小...似乎容易出错但不太可能。

由于我似乎无法访问文件描述符或其他低级文件实用程序，因此我可能无法重现 tail 的行为——但是在不“锁定”文件以进行重命名/删除的情况下读取文件是否有任何技巧（ Windows 7的）

我想另一种可能性是实际产生一个 tail -f 进程并读取进程输出，但这似乎有点重——我在这里扫描了 60 个日志文件，其中一些有很多输出（大多数将是空闲的）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:58:56.013

Apache Commons 有一个[Tailer 类](https://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/input/Tailer.html)，它会做你想要的吗？如果可以，它具有滚动检测机制以及阅读内容，因此您将获得所需的一切。

如果那不能做到，那可能是纯 java 没有办法做到这一点。您需要一些帮助，例如 C 代码，使用带有[SH_DENYNO](http://msdn.microsoft.com/en-us/library/8f30b0db.aspx)参数的 fopen 允许在 Windows 上共享打开。[或者然后通过执行系统命令来](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)调用尾部实现。

但是由于打开日志文件的代码是导致锁定它的代码，即使这样也可能无济于事。在这种情况下，唯一真正的选择是更改日志记录的工作方式，因为这是锁定文件的罪魁祸首。Log4j 可以使用[SocketAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketAppender.html)等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T18:54:07.163

使用 apache.commons.io

这是一个简单的例子

```
public class LogTailTest {

/**
* TailerListener implementation.
*/
static public class ShowLinesListener extends TailerListenerAdapter {
    @Override
    public void handle(String line) {
        System.out.println(line);
    }
}

public static void main(String args[]) {

    TailerListener listener  = new ShowLinesListener();
    File file = new File("./test.log");

    Tailer tailer = new Tailer(file, listener, 1000);
    tailer.run();

    try {
        Thread.sleep(100000);
    } catch(InterruptedException ex) {
        Thread.currentThread().interrupt();
    }

    tailer.stop();
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:31:55.190

在 Linux 中你不会有问题，因为锁定只是`advisory`. 但在`Windows`事情上是不同的。
这应该取决于您的记录器（我假设 log4j）打开要记录的文件的模式。
在这个[答案](https://stackoverflow.com/questions/7147577/programmatically-rename-open-file-on-windows)中寻找`C#`似乎有一个参数`dwShareMode`可以用于这种共享。

我相信`NIO`这是要走的路。查看`dwShareMode`参数是否可作为`NIO`API的一部分使用

# wordpress - Wordpress 3.5：升级后自定义库损坏

> ID：14610623
> 
> 赞同：1
> 
> 时间：2013-01-30T17:59:34.710
> 
> 标签：wordpress, gallery, wordpress-3.5

*是的，我读过[slevin 的帖子](https://stackoverflow.com/questions/14277794/wordpress-3-5-own-gallery-with-included-images-doesnt-work)，但我很难理解它的正面或反面，所以......*

***编辑和更新如下***

我想我离得更近了，但我不确定……现在该页面返回了整个媒体库中包含的所有图像，而仅返回了附加到此特定帖子库的图像。它的格式正确，内容上方的较大图像和内容下方的缩略图以及正确包装中的所有内容，但该帖子仅附有3张图像。

页面网址： http: [//www.vintagepowertrain.com/lkjdkfljdklfj/](http://www.vintagepowertrain.com/lkjdkfljdklfj/)

这是我现在拥有的代码：

```
function wpo_get_images(
$size = 'thumbnail', 
$limit = '0', 
$offset = '0', 
$big = 'large', 
$post_id = '$post->ID', 
$link = '1', 
$img_class = 'attachment-image', 
$wrapper = 'div', 
$wrapper_class = 'attachment-image-wrapper') {
global $post;

$images = get_children( array(
'post_parent' => $post->id, 
'post_status' => 'inherit', 
'post_type' => 'attachment', 
'post_mime_type' => 'image', 
'order' => '', 
'orderby' => 'menu_order ID') 
);

if ($images) {

    $num_of_images = count($images);

    if ($offset > 0) : $start = $offset--; else : $start = 0; endif;
    if ($limit > 0) : $stop = $limit+$start; else : $stop = $num_of_images; endif;

    $i = 0;
    preg_match('/\[gallery.*ids=.(.*).\]/', $post_content, $ids);
    $attachment_ids = explode(",", $ids[1]);
    foreach ($images as $attachment_id => $image) {
        if ($start <= $i and $i < $stop) {
        $img_title = $image->post_title;   // title.
        $img_description = $image->post_content; // description.
        $img_caption = $image->post_excerpt; // caption.
        //$img_page = get_permalink($image->ID); // The link to the attachment page.
        $img_alt = get_post_meta($attachment_id, '_wp_attachment_image_alt', true);
        if ($img_alt == '') {
        $img_alt = $img_title;
        }
            if ($big == 'large') {
            $big_array = image_downsize( $image->ID, $big );
            $img_url = $big_array[0]; // large.
            } else {
            $img_url = wp_get_attachment_url($image->ID); // url of the full size image.
            }

        // FIXED to account for non-existant thumb sizes.
        $preview_array = image_downsize( $image->ID, $size );
        if ($preview_array[3] != 'true') {
        $preview_array = image_downsize( $image->ID, 'thumbnail' );
        $img_preview = $preview_array[0]; // thumbnail or medium image to use for preview.
        $img_width = $preview_array[1];
        $img_height = $preview_array[2];
        } else {
        $img_preview = $preview_array[0]; // thumbnail or medium image to use for preview.
        $img_width = $preview_array[1];
        $img_height = $preview_array[2];
        }
        // End FIXED to account for non-existant thumb sizes.

        ///////////////////////////////////////////////////////////
        // This is where you'd create your custom image/link/whatever tag using the variables above.
        // This is an example of a basic image tag using this method.
        ?>
        <?php if ($wrapper != '0') : ?>
        <<?php echo $wrapper; ?> class="<?php echo $wrapper_class; ?>">
        <?php endif; ?>
        <?php if ($link == '1') : ?>
        <a href="<?php echo $img_url; ?>" title="<?php echo $img_title; ?>">
        <?php endif; ?>
        <img class="<?php echo $img_class; ?>" src="<?php echo $img_preview; ?>" alt="<?php echo $img_alt; ?>" title="<?php echo $img_title; ?>" />
        <?php if ($link == '1') : ?>
        </a>
        <?php endif; ?>
        <?php if ($img_caption != '') : ?>
        <div class="attachment-caption"><?php echo $img_caption; ?></div>
        <?php endif; ?>
        <?php if ($img_description != '') : ?>
        <div class="attachment-description"><?php echo $img_description; ?></div>
        <?php endif; ?>
        <?php if ($wrapper != '0') : ?>
        </<?php echo $wrapper; ?>>
        <?php endif; ?>
        <?php
        // End custom image tag. Do not edit below here.
        ///////////////////////////////////////////////////////////

        }
        $i++;
    }

}
} 
```

# windows-runtime - windows store 应用试用期实施

> ID：14610624
> 
> 赞同：1
> 
> 时间：2013-01-30T17:59:36.403
> 
> 标签：windows-runtime, winrt-xaml, windows-store-apps, windows-store

在 Windows 商店应用程序提交中，有一个地方可以让您指定试用期（24 小时或 7 天......）。为了使用此功能，我是否必须实现在指定时间后终止应用程序的代码（Windows 商店选项只是意图声明）或 Windows 运行时是否处理终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:23:09.253

当您将应用程序上传到商店时，您可以指定免费试用期的持续时间（几天，一直到永不过期）。

试用期结束后，应用程序将停止运行，并提示用户购买应用程序以继续使用。

Microsoft 有一个很好的示例，向您展示如何在您的应用程序中集成[试用功能](http://msdn.microsoft.com/en-us/library/windows/apps/hh694065.aspx)。我建议阅读那个。

[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/jj193599.aspx)还记录了可​​供您使用的不同类型的许可证：

*   下载前收取全价
*   限时试用
*   功能有限试用
*   应用内购买
*   广告
*   第三方交易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:57:31.967

以下内容来自 MSDN 文档[How to create a trial version of your app](http://msdn.microsoft.com/en-us/library/windows/apps/hh694065.aspx)：

以下是一些常见的到期场景以及您处理它们的选项：

*   试用许可证在应用程序运行时到期，您可以：

    1.  没做什么。
    2.  向您的客户显示一条消息。
    3.  关。
    4.  提示您的客户购买该应用程序。

*   如果试用在用户启动应用程序之前到期，您的应用程序将不会启动。相反，用户会看到一个对话框，让他们可以选择从商店购买您的应用程序。

*   如果客户在您的应用程序运行时购买了它，您的应用程序可以执行以下操作：
    1.  什么都不做，让他们继续试用模式，直到他们重新启动应用程序。
    2.  感谢他们购买或显示信息。
    3.  静默启用完全许可可用的功能（或禁用仅试用通知）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T18:16:21.960

您可以使用 来查看到期日期[`CurrentApp.LicenseInformation.ExpirationDate`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.licenseinformation.expirationdate.aspx)。*"may return false if the license is expired"*，这表明您可以使用非活动许可证运行应用程序，目的是显示自定义 UI，要求用户购买应用程序。也就是说 - 我没有测试它来验证文档的正确性。[`CurrentApp.LicenseInformation.IsActive`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.licenseinformation.isactive.aspx)

# javascript - javascript onmouseover 和 onmouseout（更改标签的内容并设置更改图像按钮的边框颜色

> ID：14610625
> 
> 赞同：0
> 
> 时间：2013-01-30T17:59:42.093
> 
> 标签：javascript

我有一组用于导航的图像按钮。我编写了一个 javascript 函数来显示图像按钮的描述，并通过使用 onmouseover 设置它的边框样式和颜色来突出显示该按钮。第二个函数使用 onmouseout 清除描述和边界。

描述代码适用于除 1 (ibSupportData) 之外的所有图像按钮。我似乎无法弄清楚为什么这个特定的图像按钮不起作用。我也无法通过设置 BorderColor 属性来更改边框。

有谁知道为什么 ibSupportData 按钮没有触发 onmouseover 事件？

我设置 BorderColor 属性的语法是否正确？

感谢您的帮助-我的代码如下

```
<script language="javascript" type="text/javascript">
        function IBMenuHover(txt) 
        {
            var x = ""
            if (x == 'Data') 
            {
                x = "Support Data Management";
                document.getElementById("ibSupportData").setAttribute("BorderColor", "Black");
            }
            if (txt == "Tools") 
            {
                x = "Build Printer Scripts";
                document.getElementById("ibTools").setAttribute("BorderColor", "Black");
            }
            if (txt == "UserAdmin") 
            {
                x = "User Administration"
                document.getElementById("ibUsers").setAttribute("BorderColor", "Black");
            }
            if (txt == "PrintManager") 
            {
                x = "Printer Management"
                document.getElementById("ibPrinters").setAttribute("BorderColor", "Black");
            }
            document.getElementById("lblDescr").innerHTML = x;

        }
        function IBMenuHoverClear() 
        {
            var text = "";
            document.getElementById("lblDescr").innerHTML = text;
            document.getElementById("ibTools").setAttribute("BorderColor", "White")
            document.getElementById("ibPrinters").setAttribute("BorderColor", "White")
            document.getElementById("ibUsers").setAttribute("BorderColor", "White")
            document.getElementById("ibSupportData").setAttribute("BorderColor", "White")
        }

    </script>

...

                <asp:ImageButton ID="ibPrinters" runat="server" Height="100px" 
                    ImageUrl="~/Images/PrinterSearch.jpg" Width="100px" Enabled="True" 
                    onmouseover="IBMenuHover('PrintManager')" onmouseout="IBMenuHoverClear()" 
                    BorderColor="White" BorderStyle="Solid" 
                    BorderWidth="2px" onclick="ibPrinters_Click"  />
                <asp:ImageButton ID="ibTools" runat="server" Height="100px" 
                    ImageUrl="~/Images/hammerwrenchbuild.jpg" Width="100px" Enabled="True" 
                    onclick="ibTools_Click" onmouseover="IBMenuHover('Tools')" 
                    onmouseout="IBMenuHoverClear()" BorderColor="White" BorderStyle="Solid" 
                    BorderWidth="2px" />
                <asp:ImageButton ID="ibSupportData" runat="server" Height="100px" 
                    ImageUrl="~/Images/SupportData.jpg" Width="100px" Enabled="True" 
                    onclick="ibSupportData_Click" onmouseover="IBMenuHover('Data')" 
                    onmouseout="IBMenuHoverClear()" BorderColor="White" BorderStyle="Solid" 
                    BorderWidth="2px" />
                <asp:ImageButton ID="ibUsers" runat="server" Height="100px" 
                    ImageUrl="~/Images/UserAdmin2p.jpg" Width="100px" Enabled="True" 
                    onclick="ibUsers_Click" onmouseover="IBMenuHover('UserAdmin')" 
                    onmouseout="IBMenuHoverClear()" BorderColor="White" BorderStyle="Solid" 
                    BorderWidth="2px"  />
                    <asp:Panel ID="pnlInfo" runat="server">
                        <asp:Label ID="lblDescr" runat="server" Text="" 
                            style="font-family: Calibri; font-size: medium">
                        </asp:Label>
                    </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:02:57.797

您正在测试错误的变量。正确的比较是：

```
if(txt == 'Data') 
```

此外，代替所有的 ifs，使用可能会考虑使用 switch 语句（它们处理得更快）。

```
switch(txt){
    case 'Data':
        x = "Support Data Management";
        document.getElementById("ibSupportData").setAttribute("BorderColor", "Black");
        break;
    case 'Tools':
        x = "Build Printer Scripts";
        document.getElementById("ibTools").setAttribute("BorderColor", "Black");
        break;
    case 'UserAdmin':
        x = "User Administration";
        document.getElementById("ibUsers").setAttribute("BorderColor", "Black");
        break;
    case 'PrintManager': 
        x = "Printer Management";
        document.getElementById("ibPrinters").setAttribute("BorderColor", "Black");
        break;
}
document.getElementById("lblDescr").innerHTML = x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:03:20.100

```
var x = ""
if (x == 'Data') 
```

呃……那永远行不通；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:02:02.680

边框颜色是`style`对象的属性，而不是元素本身。

```
document.getElementById("ibSupportData").style.borderColor = 'black'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T18:03:44.970

函数有点小错误。你应该检查'txt'的值，而不是'x'

```
 var x = ""
        if (txt == 'Data') 
        {
            x = "Support Data Management";
            document.getElementById("ibSupportData").setAttribute("BorderColor", "Black");
        } 
```

# html - 将 Html 转换为可打印的图像

> ID：14610631
> 
> 赞同：0
> 
> 时间：2013-01-30T18:00:03.660
> 
> 标签：html, image, printing, .net-2.0

我正在开发一个在 .NET 2.0 上运行的项目。我的任务是将 HTML 中显示的数据重新创建为可打印的图像（分辨率至少为 150dpi）。我研究了几个选项，但无济于事：

1.  [WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)类对象。在将 html 呈现为图像时，它使用服务器计算机上的屏幕分辨率。
2.  Terra Informatica的[Sciter](http://www.terrainformatica.com/sciter/main.whtm)。它没有公开可以设置输出图像分辨率的属性
3.  [Awesomium](http://awesomium.codeplex.com)只能与 .NET 4.0 或更高版本一起使用。

我想知道是否有可以将 Html 页面转换为可打印图像的 .NET 库。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:41:41.697

执行此操作的常用方法是[将页面生成为 PDF 服务器端](http://www.aspose.com/.net/pdf-component.aspx?utm_source=google&utm_medium=cpc&utm_campaign=pdf.net)，并允许用户下载和打印 PDF。

# wpf-controls - 从 WPF richTextbox 导出到 OpenXml

> ID：14610635
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:00:09.500
> 
> 标签：wpf-controls

如何将 a 的内容导出`Flowdocument`到`OpenXml`，反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:19:39.360

经过几个小时的研究，我发现导出到 RTF 而不是 OpenXML 更容易，或者至少没有人知道如何导出。

这是我的做法：

```
FlowDocument doc = richTextBox1.Document;

TextRange content = new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd);
        MemoryStream ms = new MemoryStream();
        textRange.Save(ms, DataFormats.Rtf);

        string val = Encoding.Default.GetString(ms.ToArray()); 
```

# asp.net - ASP.NET 内联表达式在 CssClass 属性中不起作用？

> ID：14610637
> 
> 赞同：1
> 
> 时间：2013-01-30T18:00:14.253
> 
> 标签：asp.net, vb.net, webforms, web-controls

我有以下代码：

```
<asp:LinkButton runat="server" 
                CommandName="SwitchStep"
                CommandArgument='<%# DataBinder.Eval(Container.DataItem, "ID")%>'
                CssClass="<%# some conditional code here %> activestep">
    Step <%# Container.ItemIndex + 1 %>: <%# DataBinder.Eval(Container.DataItem, "ID")%>
</asp:LinkButton> 
```

内联语句在`CommandArgument`属性中起作用，我知道它们在文本属性中起作用。但是，出于某种原因，在`CssClass`属性中，内联语句在 HTML 输出中结束（未解析）！我勒个去？

在 Chrome 中：

```
<a class="&lt;%= 'steptab' %&gt;" href='javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("StepControl:_ctl1:_ctl0", "", true, "", "", false, true))'>
            Step 1: section_name</a> 
```

有没有人遇到过这个？我不确定为什么这不起作用。这似乎不合逻辑，我有点沮丧。

一些注意事项：

*   如果我在这里放一个不属于的字符，例如“？” （这是VB），编译器抱怨。
*   任何服务器标记（<%、<%# 等）都会显示在 HTML 中。
*   这是在中继器控件内。等等，那是在代码中。
*   如果我在内联语句之后删除“activestep”类，内联语句仍然会出现，尽管有一次我根本没有出现在 HTML 中的类属性。

有任何想法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:12:35.643

您可以使用构建 CssClass`String.Format()`

```
CssClass='<%# String.Format("{0} activestep", If(condition, "truestring", "falsestring"))%>'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:45:56.283

我不确定您是否可以在`CssClass`属性中编写表达式。试试这个：

```
<asp:LinkButton runat="server" 
                CommandName="SwitchStep"
                CommandArgument='<%# DataBinder.Eval(Container.DataItem, "ID")%>'
                CssClass="<%$ Iif(condition, "activestep", "") %>">
    Step <%# Container.ItemIndex + 1 %>: <%# DataBinder.Eval(Container.DataItem, "ID")%>
</asp:LinkButton> 
```

另一方面，您可以使用`ItemDataBound`事件处理程序来包装您的条件并`CssClass`在您的中继器内的控件上设置属性。看一看

在 WEBForm 中，添加对 ItemDataBound 的引用

```
<asp:Repeater id="Repeater1" OnItemDataBound="Repeater1_ItemDataBound" runat="server">
...
</asp:Repeater> 
```

## VB.NET

```
' This event is raised for the header, the footer, separators, and items.
Public Sub Repeater1_ItemDataBound(sender As Object, e As RepeaterItemEventArgs) 

    ' Execute the following logic for Items and Alternating Items.
    if e.Item.ItemType = ListItemType.Item OrElse e.Item.ItemType = ListItemType.AlternatingItem Then

        Dim p as Product = CType(e.Item.DataItem, Product) ' cast to your entity just a sample

        If p.Active Then ' check some condition     

            CType(e.Item.FindControl("Your_LinkButtonId"), LinkButton).CssClass = "activestep"

        End If
    End if

End Sub 
```

## C＃

```
// This event is raised for the header, the footer, separators, and items.
public void Repeater1_ItemDataBound(Object sender, RepeaterItemEventArgs e) 
{
    // Execute the following logic for Items and Alternating Items.
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
    {
        Product p = (Product)e.Item.DataItem; // cast to your entity just a sample

        if (p.Active) // check some condition
        {
            ((LinkButton)e.Item.FindControl("Your_LinkButtonId")).CssClass = "activestep";
        }
    }  
} 
```

# c++ - 这个简单的 Message 类是否证明使用智能指针是合理的？

> ID：14610638
> 
> 赞同：2
> 
> 时间：2013-01-30T18:00:14.207
> 
> 标签：c++, oop, pointers

我正在将消息类的当前实现从以下位置更改：

```
class Message
{
public:
    Message(uint8* buffer, uint8 length) : m_contents(buffer), m_length(length) { }

    uint8 getLength() const {return m_length; }
    const uint8* getData() const { return m_contents; }
protected:
    uint8* m_contents;
    uint8 m_length;
}; 
```

在构造函数中只取长度，在构造函数中动态分配，在析构函数中删除。

我认为它应该看起来像：

```
Message(uint8 length) : m_length(length)
{
    m_contents = new uint8[length];
}

~Message() 
{
    delete [] m_contents;
    m_contents = NULL;
} 
```

附加信息：消息对象将被传递给将其发送出去的串行端口对象。它还将被子类化为多个 CustomMessage 类。

我的问题是：在这个简单的例子中，是否有任何理由使用某种类型的智能指针？一个例子会很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:06:05.387

> 有什么理由使用某种类型的智能指针吗？

其实这取决于。考虑这段代码：

```
 Message m1 (1024);
 Message m2 (m1); 
```

你想`m2` 成为一个深拷贝`m1`吗？你想要`m1`和`m2`共享内存的底层缓冲区吗？或者您不希望副本以（深或其他）开头？也就是说，第二条语句应该会导致编译错误？

*   如果您希望他们共享内存，那么是的，您应该使用`std::shared_ptr`.
*   如果您希望它们在内存中是完全不同的副本（深拷贝），那么不，您不应该使用`shared_ptr`; 你可以使用`std::unique_ptr`，但你也必须实现复制语义。但是，如果您使用这种情况，那么最好使用`std::vector<uint8>`而不是实现自己的类：

    ```
    typedef std::vector<uint8> Message;

    Message m1(1024);
    Message m2(m1); //m2 is a deep-copy of m1 
    ```

*   如果您想防止复制，因此第二条语句会导致编译错误，那么您必须通过`=deleteing`它们禁用复制语义：

    ```
    Message(Message const &) = delete;
    Message& operator=(Message const &) = delete; 
    ```

    请注意，在这种情况下，您必须自己实现移动语义。移动通常是有道理的，所以我不会对此发表评论。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:13:07.477

关于复制和分配的政策是什么。如果您使类不可复制，则使用智能指针没有真正的优势。如果您支持深拷贝，我认为没有标准的智能指针可以完成这项工作；您必须自己实施复制和分配。或使用 `std::vector<char>`，它将为您完成所有这些。如果您支持浅拷贝，那么`std::shared_ptr`非常适合这项工作。

如果类在构造后是不可变的（如果你已经显示了所有成员），浅拷贝或无拷贝是要走的路。坦率地说，我可能只是在这里使用`std::string`or `std::vector`而不用担心它。它默认提供深拷贝，这可能有点矫枉过正，但它肯定是最简单的解决方案。

# java - 自定义控件和不透明弹出窗口

> ID：14610639
> 
> 赞同：1
> 
> 时间：2013-01-30T18:00:15.610
> 
> 标签：java, css, custom-controls, javafx-2, javafx

我正在编写一个包含自定义控件的 JavaFX 库。我已经为这个控件创建了一个自定义皮肤，我在其中布局了一个 TextField 和一个按钮。单击按钮时，应打开弹出窗口。

我遇到的麻烦是弹出窗口是透明的。我怎样才能使它不透明？我尝试在 CSS 中配置背景，但没有成功。

相关代码位于此自定义控件的 Skin 实现中。CSS 由自定义控件的 getUserAgentStylesheet() 方法引用。自定义控件具有 styleClass“自定义控件”。

基本上皮肤说：

*   将自定义控件呈现为 TextField 和 Button
*   如果这个按钮（皮肤的一部分）被按下：弹出一个带有另一个自定义控件的窗口（它有自己的皮肤等）

以下是相关代码：

```
 public class SomeControlSkin implements Skin<SomeControl> {

    private SomeControl control;

    private OtherControl otherControl = new OtherControl();
    private Popup popup = new Popup();

    public SomeControlSkin(SomeControl someControl){
      this.someControl = someControl;
      otherControl.fooProperty().bind(someControl.fooProperty());

      ...

      popupControl.getContent().add(otherControl);   

      ...
   }

...

} 
```

和

```
.some-control { 
    -fx-skin: "somePackage.SomeControlSkin";
}

.some-control .popup{ 
    -fx-background-color: yellow;
}

.some-control .other-control{ 
    -fx-background-color: yellow;
} 
```

我也尝试使用 PopupControl，但它也不起作用。

注意：这是一个交叉帖子：

[https://forums.oracle.com/forums/thread.jspa?messageID=10819020](https://forums.oracle.com/forums/thread.jspa?messageID=10819020)

**编辑：**

我设法更进一步。以下将填充弹出窗口：

```
popupControl.getScene().setFill(Color.YELLOW); 
```

但是我怎么能用 CSS 做到这一点呢？

我什至尝试过：

```
.some-control { 
    -fx-skin: "somePackage.SomeControlSkin";
    -fx-background-color: black;
    -fx-background-insets: 0;
    -fx-fill: black;
}

.other-control { 
    -fx-skin: "somePackage.OtherControlSkin";
    -fx-background-color: black;
    -fx-background-insets: 0;
    -fx-fill: black;
} 
```

但是无论我将控件添加到弹出窗口还是主场景，它都没有改变背景！？（我不确定填充或背景是否应该起作用，我不确定是否必须设置插图以及设置什么值）。

我还尝试添加一个 styleClass：

```
 popupControl.getContent().add(otherControl);
   otherControl.getStyleClass().add("other-control-popup"); 
```

和

```
.other-control-popup {
    -fx-background-color: black;
    -fx-background-insets: 0;
    -fx-fill: black;
} 
```

但这也不起作用。

# objective-c - Obj-C：用于提高效率和可读性的 if 语句和 NSString 比较函数

> ID：14610641
> 
> 赞同：2
> 
> 时间：2013-01-30T18:00:24.437
> 
> 标签：objective-c, if-statement, nsstring

什么是有效编码的最佳方法，因为这将被递归调用，并且创建大量对象是不好的。`+*-/, sin,cos,sqrt,pi and x,y,a,b`应该放在三个分开的`if statements`地方，不像现在所有东西都是分开的。同样为了可读性，制作包含 4 的 if 语句`isEqualToString`也不是很好。

```
 NSString *operation = topOfStack;
    if ([operation isEqualToString:@"+"]) {

    } else if ([@"*" isEqualToString:operation]) {

    } else if ([operation isEqualToString:@"-"]) {

    } else if ([operation isEqualToString:@"/"]) {

    } else if ([operation isEqualToString:@"sin"]) {

    } else if ([operation isEqualToString:@"cos"]) {

    } else if ([operation isEqualToString:@"sqrt"]) {

    } else if ([operation isEqualToString:@"pi"]) {

    } else if ([operation isEqualToString:@"x"]) {

    } else if ([operation isEqualToString:@"y"]) {

    } else if ([operation isEqualToString:@"a"]) {

    } else if ([operation isEqualToString:@"b"]) {

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:22:34.700

我不相信有*最好*的方法来做到这一点，但这是补充已经给出的答案的另一种选择。

创建一个 NSDictionary，将您的操作名称（sin、sqrt、-）映射到选择器，如下所示：

```
NSDictionary *operations = @{
    @"sin": [NSValue valueWithPointer:@selector(operationSin:)],
    /* other operations here */
}; 
```

然后你的 switch 语句变成了一个查找。

```
NSString *operation = topOfStack;
if(operations[operation]) {
    SEL op = [operations[operation] pointerValue];
    [self performSelector:op withObject:value];  /* Or some approximation thereof */
}
else {
    /* Default action for unknown operation */
} 
```

或者，您可以在识别的操作上创建一个枚举，使用您的 NSDictionary 将操作名称映射到 NSNumber 装箱您的枚举值。

```
typedef NS_ENUM(NSUInteger, OperationType) {
    OperationTypeSin = 0L,
    OperationTypeSqrt,
    /* and so on */
    OperationTypeUnknown
};

/* And later...  */
NSDictionary *operations = @{
    @"sin": @(OperationTypeSin),
    /* you get the idea */
};

/* Finally ... */
NSString *operation = topOfStack;
OperationType opType = [operations[operation] unsignedIntegerValue];
switch(opType) {
    case OperationTypeSin:
        /* Much cleaner, and type-safe too */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:10:06.487

**准备工作：** 首先将 NSString 操作转换为 int hashcode，将该 hashcode 存储在 #define 或常量中。

**代码：**

1）将NSString操作转换为int hashcode（tokenId）。
2）然后在该**tokenId**上执行 switch 语句。

```
int token = operationToToken(operation);
switch (token) {
case: OP_MINUS: break;
case: OP_SIN: break;
case: OP_COS: break;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:07:24.607

首先，也许回退到 C 字符串，然后利用, , , , , ,`sin`和`cos`（`sqrt`几乎`pi`）`a`都以不同字符开头的事实：`b``x``y`

```
const char *s = [operation UTF8String];
switch (s[0]) {
case '+':
    // addition
    break;
case '-':
    // subtraction
    break;
case 's':
    // sine or sqrt
    switch (s[1]) {
    case 'q':
        // sqrt
        break;
    case 'i':
        // sine
        break;
    }
    break;
case 'c':
    // cosine
    break;
// et cetera...
default:
    // not found
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T23:34:29.467

如果您使用的是 Objective-C，那么您可以使用一些巧妙命名的选择器来做到这一点。

首先，创建一个对象来封装一个`Operation`.

然后，创建一个`-initWithOperation:(NSString *)op`方法。在此方法中，将任何符号操作（`*`、`+`等）转换为唯一的字符串标识符（仅限字母）。

然后，您可以调用，但如果您希望方法具有参数，则必须自己`NSSelectorFromString(stringOp)`附加字符。`:`

获得选择器后，您可以使用 , 执行选择器`-performSelector:`，`+performSelector:`或手动调用选择器。

如果您将每个选择器命名为与操作相同的名称，则不需要任何`if`or`switch`语句，但您必须处理发送无效选择器的情况。

例如：

```
@interface Operation : NSObject

- (id)initWithOperation:(NSString *)op;
- (void)performOperationWithValue:(float)value;
+ (float)sin:(float)value;
// ... Other operations
@property (nonatomic, copy) NSString *theOperation;

@end

@implementation Operation
- (id)initWithOperation(NSString *)op {
    self = [super init];
    if (self) {
        // Convert symbols to unique strings
        theOperation = [[NSString alloc] initWithString:op];
    }
    return self;
}

- (void)performOperationWithValue:(float)value {
    NSString *withOneParam = [self.theOperation stringByAppendingString:@":"];
    SEL sel = NSSelectorFromString(withOneParam);
    [Operation performSelector:withOneParam withObject:[NSNumber numberWithFloat:value]];
}

// Class methods are the actual operation implementation... 
```

在上面的例子中，我假设你已经传递`@"sin"`给`Operation`对象。这只能在 Objective-C 中实现，因为您可以利用命名选择器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:06:15.513

您可以为每个符号分配一个编号，并可以实现一个开关盒。

# solr - Apache Solr 不匹配精确字符串

> ID：14610642
> 
> 赞同：0
> 
> 时间：2013-01-30T18:00:29.047
> 
> 标签：solr, indexing, match

我有一个问题，我真的不知道我该怎么办......

这很简单，我在 SORL 中创建了 2 个索引：

“Scholastic Reader, Level 2 >” “Scholastic Reader, Level 3 >”

（符号 > 到字符串的末尾）

搜索 1：当我通过“Scholastic Reader, Level”搜索时，服务返回两个索引，这很好。

XML 响应：

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">2</int>
        <lst name="params">
            <str name="indent">on</str>
            <str name="start">0</str>
            <str name="q">type:masterseries AND title:("Scholastic Reader, Level")</str>
            <str name="version">2.2</str>
            <str name="rows">10</str>
        </lst>
    </lst>
    <result name="response" numFound="2" start="0">
        <doc>
            <str name="id">118</str>
            <arr name="title">
                <str>Scholastic Reader, Level 2 ></str>
            </arr>
            <str name="type">masterseries</str>
            <str name="uuid">3bf5b10c-a286-4ad0-9c63-bb402f57a7ed</str>
        </doc>
        <doc>
            <str name="id">118</str>
            <arr name="title">
                <str>Scholastic Reader, Level 3 ></str>
            </arr>
            <str name="type">masterseries</str>
            <str name="uuid">cdb19c28-0988-4375-acf0-916bc6664055</str>
        </doc>
    </result>
</response> 
```

搜索 2：通过“Scholastic Reader, Level 3”搜索，将返回“Scholastic Reader, Level 3 >” 太棒了！

查询字符串：type:masterseries AND title:("Scholastic Reader, Level 3") XML 响应：

```
 <response>
    <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">2</int>
    <lst name="params">
        <str name="indent">on</str>
        <str name="start">0</str>
        <str name="q">type:masterseries AND title:("Scholastic Reader, Level 3")</str>
        <str name="version">2.2</str>
        <str name="rows">10</str>
    </lst>
    </lst>
    <result name="response" numFound="1" start="0">
        <doc>
            <str name="id">118</str>
            <arr name="title">
                <str>Scholastic Reader, Level 3 ></str>
            </arr>
            <str name="type">masterseries</str>
            <str name="uuid">cdb19c28-0988-4375-acf0-916bc6664055</str>
        </doc>
    </result>
</response> 
```

但是奇怪的事情来了

搜索 3：按“Scholastic Reader, Level 2”搜索，甚至精确字符串“Scholastic Reader, Level 2 >”返回“NOTHING”

查询字符串：type:masterseries AND title:("Scholastic Reader, Level 2") XML RESPONSE:

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">2</int>
        <lst name="params">
            <str name="indent">on</str>
            <str name="start">0</str>
            <str name="q">type:masterseries AND title:("Scholastic Reader, Level 2")</str>
            <str name="version">2.2</str>
            <str name="rows">10</str>
        </lst>
    </lst>
<result name="response" numFound="0" start="0"/>
</response> 
```

即使我用 1、4、5、6 之类的数字创建了索引，它也可以工作，但是级别为“2”的字符串不起作用。

谢谢你的帮助。

更新：

在 schema.xml 文件中添加一些配置：

```
 <fieldType name="text_en" class="solr.TextField"
        positionIncrementGap="100">
        <analyzer type="index">
            <charFilter class="solr.HTMLStripCharFilterFactory" />
            <tokenizer class="solr.StandardTokenizerFactory" />
            <filter class="solr.ISOLatin1AccentFilterFactory" />
            <filter class="solr.StopFilterFactory"
                ignoreCase="true" words="lang/stopwords_en.txt"
                enablePositionIncrements="false" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.EnglishPossessiveFilterFactory" />
            <filter class="solr.KeywordMarkerFilterFactory"
                protected="protwords.txt" />
            <filter class="solr.PorterStemFilterFactory" />
        </analyzer>
        <analyzer type="query">
            <charFilter class="solr.HTMLStripCharFilterFactory" />            
            <tokenizer class="solr.StandardTokenizerFactory" />
            <filter class="solr.SynonymFilterFactory"
                synonyms="synonyms.txt" ignoreCase="true" expand="true" />
            <filter class="solr.StopFilterFactory"
                ignoreCase="true" words="lang/stopwords_en.txt"
                enablePositionIncrements="false" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.ISOLatin1AccentFilterFactory" />
            <filter class="solr.EnglishPossessiveFilterFactory" />
            <filter class="solr.KeywordMarkerFilterFactory"
                protected="protwords.txt" />            
            <filter class="solr.PorterStemFilterFactory" />
        </analyzer>
    </fieldType> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:29:59.623

我敢打赌你的问题出在：

```
<filter class="solr.SynonymFilterFactory"
            synonyms="synonyms.txt" ignoreCase="true" expand="true" /> 
```

看一下“synonyms.txt”，我猜你会发现一个用“too”替换“2”的条目（如果它是“to”，那么它将被 StopFilter 删除，你永远不会注意到区别）。由于`expand=true`，这将导致如下查询：

```
"Scholastic Reader Level 2 too" 
```

这对于一组未引用的`TermQuery`s 很好，但不适用于`PhraseQuery`. 要解决此问题，您可以将 SynonymFilter 合并到您的`"index"`分析器中

我可以看到的其他可能性是在and`ISOLatin1AccentFilterFactory`之后发生了一些奇怪的事情，因为应用过滤器的顺序可能会导致不同的输出，但我非常怀疑这是问题所在。`StopFilter``LowerCaseFilter`

# android - MoPub - 决定如何展示平板电脑或手机广告？

> ID：14610649
> 
> 赞同：1
> 
> 时间：2013-01-30T18:01:07.030
> 
> 标签：android, ads, mopub

也许我只是一个完全的菜鸟，但我注册了 MoPub 并学会了如何将广告放入我的 Android 应用程序，我做得很好。在使用 AdMob 之前，我可以在 XML 中定义一个“SMART_BANNER”。这将解决整个平板电脑/手机问题。我不必担心确保横幅广告正确地适合屏幕，因为 AdMob 可以解决所有问题。

使用 MoPub，每个广告都有不同的广告单元 ID，所以我有两个 ID，一个用于手机，一个用于平板电脑。如何在我的代码中实现这一点？我的意思是我只能输入一个 ID... 不是吗？

```
mAdView = (MoPubView) findViewById(R.id.Advert);
  mAdView.setAdUnitId("ONE AD UNIT ID HERE");
  mAdView.loadAd(); 
```

有谁知道我应该怎么做？如果用户在手机或平板电脑上打开我的应用程序，他们都应该得到合适的横幅广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:41:32.483

找到了解决方案，可能我应该已经知道了。一个简单的条件语句就可以解决这个问题。

# jquery - jQuery 对话框 - 不会附加到表单

> ID：14610650
> 
> 赞同：1
> 
> 时间：2013-01-30T18:01:10.323
> 
> 标签：jquery, jquery-dialog

我非常熟悉在将 jQuery Dialog div 设置为可见后将其附加到表单元素的技巧。我已经在 .NET 中完成了一百次左右，而且效果很好！但是，我正在尝试在 Coldfusion 网站上执行此操作，这对我来说是第一次，但它没有按应有的方式工作（即 - 它没有被附加到表单元素）。我已经通过 Firebug 验证了这一点，所以我可以看到 jQuery Dialog div 在表单元素之外。

这是我的 jQuery 代码：

```
if ($) {
  $(document).on("click", '#btnUpload', function ($e) {

    // Show the jquery dialog plugin
    var dlg = $('#divUpload').dialog({ modal: true, title: 'Photo/Image Upload', draggable: true, width: 700 });

    dlg.parent.appendTo($("form:first"));

    $e.preventDefault();
  });
} 
```

这是我的 HTML/Coldfusion：

```
<form id="wtf" action="<cfoutput>#cgi.script_name#</cfoutput>" enctype="multipart/form-data" method="post">
    <br />
    <input type="button" id="btnUpload" name="btnUpload" value="Upload Image" />

    <div id="divUpload" style="display: none;">
        <br />
        File to upload:  
        <br />
        <input type="file" name="fileName" size="50" />
        <br /><br />

        <input type="submit" name="UploadFile" value="Upload" />    
    </div>

</form> 
```

**编辑：** 我也试过

```
dlg.parent.appendTo($('#wtf')); 
```

但无济于事。请注意，该表单的 ID 属性为“wtf”。是的，'wtf'目前纯粹是出于沮丧！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:03:56.993

你错过了`closing quote`选择器的。

改变

```
 dlg.parent.appendTo($("form:first)); 
```

到

```
 dlg.parent().appendTo($("form:first")); 
```

作为 dlg 的父级，将是您要附加到的表单。您可能需要重新考虑是否需要附加 dlg 的父级。

```
 dlg.appendTo($("form:first")); 
```

# android - 如何在一个屏幕中输入文本并在另一个屏幕中显示？

> ID：14610652
> 
> 赞同：0
> 
> 时间：2013-01-30T18:01:10.353
> 
> 标签：android

我正在尝试获取文本字段以保存其中的输入。然后我尝试加载保存在同一应用程序中另一个屏幕中的文本。

现在我显示了文本字段，然后当我点击一个按钮时，它们会显示在一个新屏幕中，但它们不保存它们只是被发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:11:35.083

像这样使用它：

```
 Intent i=new Intent(this,ActivityName.class);  
    i.putExtra("key_to",text);
    startActivity(i); 
```

请注意，当您放置一个额外的值时，它会存储在键值对中，因此在您的目标活动中，您可以像这样提取它：

```
String text=(String)this.getIntent().getExtras().get("key_to"); 
```

而且，所有这些都写在活动的非静态方法中，如果你想在静态方法中访问它，请在初始化时使用`getBaseContext()`而不是`this``Intent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:11:13.003

您必须明确保存数据并在 onCreate 或 onResume 中明确加载数据。有几种方法可以做到这一点（将其写入文件、使用数据库、SharedPreferences 等）。对您来说，最好的方法可能是将这些文本字符串作为命名的附加内容发送到意图中，并从第二个活动的意图中读取它们。所以activity1会调用intent.putExtra("textfield1",value)，activity2会调用textView.setText(intent.getStringExtra("textfield1",""))

# c++ - 如何使用 C++ 中的堆栈、队列或 BST 对文件中的记录进行排序？

> ID：14610655
> 
> 赞同：0
> 
> 时间：2013-01-30T18:01:28.960
> 
> 标签：c++, sorting, stack, queue, binary-search-tree

如果您有一个包含以下记录的 .dat 文件：

```
805816899 Andrew
803975268 Bob
912684297 Jeff
123546789 Louis
751354687 Kevin 
```

为了按 ID 号对列表进行排序然后写入屏幕，最简单的数据结构是什么？我认为 BST 最有意义并且最有效，但是在处理这样的小文件时，堆栈会更容易和更快。

另外，你将如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:08:16.553

最简单的方法是使用 BST 对它们进行排序，将它们放在`std::map<int, std::string>`. 这是一个内部使用 BST 的自排序数据结构（尽管标准没有明确指定）。如果您不想查找，则可以使用`std::set`用户定义的类型来代替（请参阅下一段）。

如果要将它们存储在类似数组的平面结构中，可以创建一个小结构来保存信息，将其实例存储在 中`std::vector`，并结合使用合适的比较函数进行`std::sort`排序。

英国夏令时：

```
#include <string>
#include <map>
std::map<int, std::string> m;
m[805816899] = "Andrew";
m[803975268] = "Bob"; 
```

等等。

类似数组的解决方案：

```
struct Foo 
{ 
  Foo(int ID, const std::string& name) : ID(ID), name(name) {}
  int ID; 
  std::string name;
};
// comparison for sorting
bool comp(const Foo& lhs, const Foo& rhs) { return lhs.ID < rhs.ID; }

#include <vector>
#include <algorithm>
....
std::vector<Foo> v;
v.push_back(Foo(805816899, "Andrew"));
v.push_back(Foo(803975268, "Bob"));
// add more entries
std::sort(v.begin(), v.end(), comp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:24:25.917

我认为，[trie](http://en.wikipedia.org/wiki/Trie)是实现整个排序的最简单方法，如果 id 的长度是恒定的，它是 O(n)。

```
#include <iostream>
#include <cassert>
#include <string>

class node {
  bool final;
  union {
    node *next[10];
    char *name;
  };
  node *get_at(int index)
  {
    assert(!final);
    return next[index] ? next[index] : (next[index] = new node);
  }

public:
  node() : final(false) { std::fill(next, next+10, (node*)0); }
  ~node() {
    if (final)
      delete name;
    else
      for (int i=0; i<10; ++i)
        delete next[i];
  }

  void insert(const char *id, std::string const& s)
  {
    if (*id) {
      get_at(*id - '0')->insert(id+1, s);
    } else {
      final=true;
      name = new char[s.size()+1]();
      std::copy(s.begin(), s.end(), name);
    }
  }

  void print_all(std::ostream& os) const
  {
    if (final)
      os << name << '\n';
    else
      for (int i = 0; i < 10; ++i)
        if (next[i])
          next[i]->print_all(os);
  }
};

int main()
{
  node top;
  for (std::string id, name; std::cin >> id >> name;)
    top.insert(id.c_str(), name);
  top.print_all(std::cout);
} 
```

# javascript - 如何在 ASP.NET 中创建特定类型的下拉菜单

> ID：14610657
> 
> 赞同：0
> 
> 时间：2013-01-30T18:01:30.937
> 
> 标签：javascript, jquery, asp.net, drop-down-menu, dialog

我想创建一个像这样的下拉菜单：

![在此处输入图像描述](../Images/e41bc3f8ce780c21f825a64028aaaf76.png)

我怎样才能以简单的方式创建这样的东西？无论如何，它可以是服务器端、javascript、jquery 或任何其他库，有没有人知道允许我创建这种类型的对话框的库？

注意：只要用户单击绿色 (+) 按钮，就会打开此下拉菜单/对话框/或工具提示。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:07:13.493

这种类型的效果称为固定工具提示。插件 Tooltipster 似乎提供了您正在寻找的功能 ( [http://calebjacob.com/tooltipster/](http://calebjacob.com/tooltipster/) )。只需创建一个 Tooltip，设置“interactive: true”、“trigger: click”和“position: right”，并根据需要设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:11:55.190

要创建一个对话框，最好的工具（恕我直言）是[jQuery Dialog](http://jqueryui.com/dialog/)。

关于下拉列表，它只是使用 CSS 设置样式。您可能需要设计师的帮助。

# mysql - 平均或计算平均值

> ID：14610658
> 
> 赞同：2
> 
> 时间：2013-01-30T18:01:31.967
> 
> 标签：mysql, sql, average, mean

如果不是数字，有没有办法获得平均数量？
我的桌子：

```
ID|  CAT  |  TITLE  |     DATE            |
--|-------|---------|---------------------|
1 | CAT01 | TITLE01 | 2013-01-18 20:37:15 |
2 | CAT01 | TITLE02 | 2013-01-18 20:37:16 |
3 | CAT02 | TITLE03 | 2013-01-19 12:09:54 | 
```

我怎样才能获得每天帖子的 AVG？
现在我正在使用这个：

```
SELECT AVG(cat) / DATEDIFF('2013-01-19', '2013-01-18') as average 
FROM posts 
WHERE date BETWEEN '2013-01-18' AND '2013-01-19'" 
```

但对我来说，它不会返回平均计数。也许我应该先 count(cat) AS cnt 然后使用 avg(cnt) AS 平均值？
还是不能在非数字表上使用 AVG？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:09:52.070

您可以一步完成。可以在此处找到经过测试的示例：[http ://sqlfiddle.com/#!2/05760/12](http://sqlfiddle.com/#!2/05760/12)

```
SELECT 
  COUNT(*) / 
  COUNT(DISTINCT cast(`date` as date)) avg_posts_per_day
FROM 
  posts 
```

* * *

或者您可以分两步执行此操作：

1.  每天获得帖子，
2.  平均第 1 步的结果。

可以在此处找到经过测试的示例：[http ://sqlfiddle.com/#!2/05760/4](http://sqlfiddle.com/#!2/05760/4)

```
SELECT 
  AVG(posts_per_day) AS AVG_POSTS_PER_DAY
FROM (    
  SELECT 
    CAST(`date` as date), 
    COUNT(*) posts_per_day
  FROM posts  
  GROUP BY 
    CAST(`date` as date)
) ppd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:06:41.563

试试这个

```
 SELECT COUNT(cat)/2  as avrag
   FROM posts 
```

[**演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/4bc67a/2)

编辑：

如果你想使用两个日期之间的平均值，只需添加这个

```
 where date between 'the_date1' AND 'the_date2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:16:14.227

您可以做的是获取总帖子数，自数据库中第一个时间戳以来的天数，并根据这两个数字计算平均值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:28:30.767

我想你只需要用 来计算行数`COUNT(*)`，然后在 datediff 中加 1：

```
SELECT COUNT(*) / (DATEDIFF('2013-01-19', '2013-01-18')+1) as average 
FROM posts 
WHERE DATE(date) BETWEEN '2013-01-18' AND '2013-01-19' 
```

这将返回平均帖子数，计算没有帖子的天数。

或者，根据您所追求的，您可能会考虑这样的事情：

```
SELECT
  COUNT(*) /
  (datediff(max(`date`), min(`date`))+1) as avg_posts
FROM
  posts 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:40:27.517

试试这个，格式化日期 yyyy-MM-dd 来计算每天的所有帖子，然后取每天的平均值

```
SELECT 
   amount/total AS AVG_POSTS_PER_DAY, day
FROM
  (
    SELECT COUNT(1) amount, DATE_FORMAT(DATE, '%Y-%m-%d') day,
    (SELECT COUNT(1) from posts) total
  FROM posts
  group by
    DATE_FORMAT(DATE, '%Y-%m-%d')) a
group by day` 
```

# ember.js - Ember-Data 扩展了 DS.StateManager 的状态

> ID：14610661
> 
> 赞同：0
> 
> 时间：2013-01-30T18:01:46.203
> 
> 标签：ember.js, ember-data

什么是正确的方法，或者是否可以扩展 Ember-Data 状态？

例如，我想将一个新的事件处理程序添加到“已保存”状态，但我无法在测试或“文档”™ 中找到任何执行此操作的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:41:55.197

我一直有同样的问题，我最终复制了包含 DS.StateManager 定义的闭包中的所有内容。不幸的是，由于它处于关闭状态，因此您无能为力...我将努力寻找更好的方法来做到这一点，但是目前这是我发现的最好的方法。

# c# - 阻止调用 Web API 方法

> ID：14610664
> 
> 赞同：4
> 
> 时间：2013-01-30T18:01:53.127
> 
> 标签：c#, asp.net, asp.net-web-api, asp.net-web-api-routing

我正在使用 ASP.NET Web API 创建一个 Web API。我目前正在我的端点上删除功能，以便我可以开始针对它进行开发。

我的 WebApiConfig.cs 文件如下所示：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
);

config.Routes.MapHttpRoute(
    name: "ActionAPI",
    routeTemplate: "api/{controller}/{id}/{action}",
    defaults: new { action = RouteParameter.Optional }
); 
```

在我的 UsersController.cs 文件中，我有以下方法：

```
//Maps to /Users endpoint
[HttpGet]
public IEnumerable<User> GetAllUsers()
{
   //Code
}

//Maps to /Users/{id} endpoint
[HttpGet]
public User GetUser(int id)
{
   //Code
}

//Maps to /Users/{id}/Enrollments endpoint
[HttpGet, ActionName("Enrollments")]
public IEnumerable<Enrollment> GetUserEnrollments(int id)
{
   //Code
}

//Maps to /Users/{id}/Enrollments/{id}
[HttpGet, ActionName("Enrollments")]
public IEnumerable<Enrollment> GetUserEnrollment(int userid, int id)
{
   //Code
} 
```

如何防止`/Users/GetUser`成为有效路线？

使用`[NonAction]`on`GetUser(int id)`可以防止它完全工作。

**编辑：**这是当前的输出`/Users/GetUser`

```
<Error>
    <Message>An error has occurred.</Message>
    <ExceptionMessage>
        Multiple actions were found that match the request: Byui.ILearnAPI2.Business.Entities.User GetUser(Int32) on type Byui.ILearnAPI2.API.Controllers.UsersController System.Collections.Generic.IEnumerable`1[System.String] GetUserEnrollments(Int32) on type Byui.ILearnAPI2.API.Controllers.UsersController
    </ExceptionMessage>
    <ExceptionType>System.InvalidOperationException</ExceptionType>
    <StackTrace>
at System.Web.Http.Controllers.ApiControllerActionSelector.ActionSelectorCacheItem.SelectAction(HttpControllerContext controllerContext) at System.Web.Http.Controllers.ApiControllerActionSelector.SelectAction(HttpControllerContext controllerContext) at System.Web.Http.ApiController.ExecuteAsync(HttpControllerContext controllerContext, CancellationToken cancellationToken) at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancellationToken) at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    </StackTrace>
</Error> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:06:04.957

再次查看您的帖子后，我认为您没有正确查看错误。

由于您配置控制器的方式，存在一条不明确的路线。

**找到多个与请求匹配的操作：**

**类型 Byui.ILearnAPI2.API.Controllers.UsersController 上的**GetUser(Int32)****

 ****类型 Byui.ILearnAPI2.API.Controllers.UsersController 上的**GetUserEnrollments(Int32)****

 **GetUser 和 GetUserEnrollments 共享相同的路由。据我所知，如果你将一个 int 或一个字符串或其他任何东西传递给 GetUser，它就不会工作，因为它不知道如何正确解析。

您可以在默认设置之前添加路由配置来解决问题。

```
config.Routes.MapHttpRoute(
    name: "GetUsers",
    routeTemplate: "api/users/{id}",
    defaults: new { controller = "Users", action = "GetUser" }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T22:04:32.867

试试这个。

1.  注释掉`GetUserEnrollments(int id)`
2.  打电话`/Users/GetUser`- 你会得到

```
  请求无效。
  参数字典包含参数“id”的空条目
  方法“so14610664.Models.User”的不可空类型“System.Int32”
  'so14610664.Controllers.UsersController' 中的 GetUser(Int32)'。一个可选的
  参数必须是引用类型、可空类型或声明为
  可选参数。

```

1.  现在打电话`/User/abcdefg`- 您会收到与上述相同的消息。 `"The request is invalid..."`

看，这不是`GetUser`暴露的，而是它试图在`/Users/`to`id`和失败之后映射任何东西，因为`GetUser`and`"abcdefg"`不是有效值`Int32`；换句话说：它认为你忘记了`id`。

* * *

**试试[AttributeRouting](http://nuget.org/packages/AttributeRouting.WebApi/ "属性路由")包。** 这是一个位于 MVC 路由（中的路由`App_Start/RouteConfig`）和/或 Web API 路由（您在做什么 - 中的路由`App_Start/WebApiConfig`）之上的包

使用该包，您可以在代码示例中将路由映射***替换为如下所示：***`App_Start`

```
//Maps to /Users endpoint
[HttpGet, GET("/Users")]
public IEnumerable<User> GetAllUsers()
{
   //Code
}

//Maps to /Users/{id} endpoint
[HttpGet, GET("/Users/{id)"]
public User GetUser(int id)
{
   //Code
}

//Maps to /Users/{id}/Enrollments endpoint
[HttpGet, GET("/Users/{id}/Enrollments")]
public IEnumerable<Enrollment> GetUserEnrollments(int id)
{
   //Code
}

//Maps to /Users/{userid}/Enrollments/{id}
[HttpGet, GET("/Users/{userid}/Enrollments/{id}")]
public IEnumerable<Enrollment> GetUserEnrollment(int userid, int id)
{
   //Code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:17:15.297

您可以使用[IHttpRouteConstraint](http://msdn.microsoft.com/en-us/library/system.web.http.routing.ihttprouteconstraint%28v=vs.108%29.aspx)来验证 {id} 是否为整数并在您的路由中指定路由约束。

可以在[此处](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)找到示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:15:36.113

返回一个 404，这是处理它的Restful`GetUsers`方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T20:35:46.547

你可以做这样的事情来验证提供的 id。如果没有找到 Id，您可以使用您想要的任何代码返回自定义响应消息。

```
[HttpGet]
public User GetUser(int id)
{
    if (id > 0 && validIds.Contains(id))
    {
        //Go do something fun...
    }
    else
        throw new HttpResponseException(
            new HttpResponseMessage(HttpStatusCode.NotFound)
                {
                    ReasonPhrase = String.Format("A valid id is required. {0} is most definitely not a valid id.", id);
                }

  ); 
```

}****

# javascript - ng-click 与 Angular 中的观看

> ID：14610669
> 
> 赞同：5
> 
> 时间：2013-01-30T18:02:06.013
> 
> 标签：javascript, angularjs

我有一个指令，它加载一个 JSON 文件，然后使用该数据创建 HTML5 画布绘图（即 json 数据包含文本、颜色、位置等内容）。我还有许多输入字段（文本、滑块等），允许用户操作绘图。我看到我可以 $watch 每个元素或使用 ng-click 并调用一个函数 - 有推荐的方法吗？

一些可能相关的注释：

*   表单元素和画布都是同一个指令模板的一部分
*   表单元素对 onchange 做出反应，因此没有提交按钮
*   这些表单元素值中的每一个都会被检查，可能会被转换然后他们修改 json 字符串。然后我调用一个刷新函数，用新数据重新加载我的画布。

我也有可能以错误的方式接近这个......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:42:18.863

因此，据我了解，用户对某些元素（在指令内）有一些操作，每次触发这些事件时您都必须做一些事情。

$watch 的目的是在每次特定变量的值发生变化时“观察”/做一些事情。`$scope.$watch('watchedVariable', onWatchedVariableChangedFn)`其中 onWatchedVariableChangedFn 是一个函数。这仅在值实际更改时触发，而不管导致更改的原因。

另一方面，您可以将事件处理程序连接到标记属性，例如`ng-click='onClickFn()'`. 这些是从 UI 元素上的操作中触发的。[另请注意 ng-click 仅适用于可点击元素。您似乎有多个元素（文本、滑块等）。]

您可能必须查看究竟是什么导致了这些值的变化/导致您重新绘制画布，然后决定您要走哪条路。

编辑：您可能要考虑的第三种替代方法是触发事件（$emit / $broadcast）并在适用的情况下处理（$on）这些事件。

# .net - View构造函数创建Model时如何使用MVVM

> ID：14610670
> 
> 赞同：0
> 
> 时间：2013-01-30T18:02:09.267
> 
> 标签：.net, wpf, mvvm

我现在尝试使用 MVVM 方法来显示一些分层数据，但直到现在，我还没有实现任何特定的设计模式。

正如我可以解释的那样，我有 2 个类库。

1.  日志文件
2.  备份.cs

我有我的 WPF 项目。

简单地说，Backup 类执行一些复制和粘贴功能。每次复制和粘贴都会被记录（使用 Log 类）。

目前，日志（列表）存储在内存中（这可能是有问题的地方）。操作完成后（所有备份都完成），我希望显示日志。我的 backup.cs 类创建了一个实例`MainWindow`并将`List<Log>`对象作为构造函数传递，然后我将它绑定到数据上下文。这工作正常。

但是，我现在想使用 MVVM 方法，因为我想使用 2 路绑定（我想按日志状态（成功或失败（或其他状态）进行过滤）。

那么，是否有人认为这在我当前的设计中是可能的，或者是将日志保存为 XML 文件（或文本或类似文件）的唯一方法，以便可以创建我的模型（使用 LinqToXml）？还是有不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:10:54.753

我认为您可以使用当前的设计并仍然实现 MVVM 方法，这并不是说您不需要做一些重要的工作。

但是您似乎暗示要使用 MVVM 模式，您需要与数据库建立某种连接，但事实并非如此。在您的情况下，您的模型是您的`Log`班级，并且[可能]是`Backup`班级。

您的视图模型将接受`Log`该类的实例，这是您的 UI 想要呈现的所有数据所在的位置，然后公开其他必要的 UI 属性以方便您的 UI 的其余部分，例如过滤器属性、排序属性、等等

# objective-c - 解析网站数据时的延迟 - Objective-C

> ID：14610675
> 
> 赞同：2
> 
> 时间：2013-01-30T18:02:24.113
> 
> 标签：objective-c, lag

我编写了一个将网站数据解析为表格视图的应用程序。

我还使用 MBProgressHUD 在解析发生时向用户显示反馈。

我从 viewDidLoad 调用加载方法：

```
- (void)viewDidLoad {
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    noConnectionAlert = [[UIAlertView alloc] initWithTitle:@"אין מידע להצגה"
                                               message:@"אין אפשרות להתחבר לאינטרנט."
                                              delegate:self cancelButtonTitle:@"אישור"
                                     otherButtonTitles: nil];

    HUD = [[MBProgressHUD alloc] initWithView:self.view];
    HUD.labelText = @"טוען...";

    [self.view addSubview:HUD];
    [HUD showWhileExecuting:@selector(loadReports) 
                  onTarget:self withObject:nil animated:YES];

    BOOL hasConnection = [self hasInternetConnection];

    if (!hasConnection) {
       [noConnectionAlert show];
    } else {
       [self loadReports];
    }

} 
```

我有一个 TabBar，所以这个加载发生在第一个和第二个视图中。问题是当应用程序正在运行时以及当我点击 TabBar 中的第二个选项卡时，我注意到延迟（当互联网连接速度很慢时）。

是否有另一种方法可以使应用程序尽可能快地启动（或在点击时移至下一个选项卡）（并在加载数据时显示 HUD）？

编辑：

这是负载报告：

```
- (void)loadReports {
NSURL *reportsUrl = [NSURL URLWithString:@"http://www.iba.org.il/moked/index.aspx?   classto=mokedTraffic"];
NSData *reportsHtmlData = [NSData dataWithContentsOfURL:reportsUrl];

NSString *encodedStringData = [[NSString alloc] initWithData:reportsHtmlData    encoding:CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingWindowsHebrew)];
NSLog(@"%@", encodedStringData);
NSData *reportsHtmlDataEncoded = [encodedStringData dataUsingEncoding:NSUTF16StringEncoding];

TFHpple *reportsParser = [TFHpple hppleWithHTMLData:reportsHtmlDataEncoded];
NSString *reportsXpathQueryString = @"//table//tr//td";
NSArray *reportsNodes = [reportsParser searchWithXPathQuery:reportsXpathQueryString];

for (int i = 0; i < reportsNodes.count - 1; i++) {
    TFHppleElement *nodeFirstChild = [(TFHppleElement *)reportsNodes[i] firstChild];
    if ([[nodeFirstChild tagName] isEqualToString:@"text"]) {
        NSLog(@"%@", reportsNodes[i]);
        NSLog(@"%@", nodeFirstChild);
    }
}
NSMutableArray *newReports = [[NSMutableArray alloc] initWithCapacity:0];

NSString *thisAttribute = [[NSString alloc] init];
NSDictionary *thisNode = [[NSDictionary alloc] init];
for (TFHppleElement *element in reportsNodes){
    NSString *str = [[element firstChild] content];
    if (str != NULL) {
        TFHppleElement *firstChild = [element firstChild];
        NSArray *childStrong = [element childrenWithTagName:@"strong"];
        NSLog(@"%@", childStrong);
        NSString *mokedContent;
        for (TFHppleElement *strongElement in childStrong){
            NSLog(@"%@", [[[strongElement firstChild] firstChild] content]);
            mokedContent = [[[strongElement firstChild] firstChild] content];
        }

        thisNode = [element attributes];
        thisAttribute = (NSString *)[thisNode objectForKey:@"width"];
        if (thisAttribute == NULL) {
            NSArray *spanChildren = [element childrenWithTagName:@"span"];
            if (spanChildren.count > 0) {
                TFHppleElement *spanChild = [spanChildren objectAtIndex:0];
                NSString *spanContent = [[spanChild firstChild] content];
                NSRange firstRange = [spanContent rangeOfString:@"\u00a0("];
                BOOL isFound = NO;
                if (firstRange.length > 0){
                    isFound = YES;
                    NSLog(@"String contains");
                }
                else {
                    NSLog(@"No found in string");
                }
                NSString *result = [spanContent stringByReplacingCharactersInRange:firstRange    withString:@""];
                NSRange secondRange = [result rangeOfString:@")\u00a0"];
                NSString *time = [result stringByReplacingCharactersInRange:secondRange withString:@""];
                NSLog(@"%@", time);

                ORDKolIsrael *kolIsraelTraffic = [[ORDKolIsrael alloc] init];
                [newReports addObject:kolIsraelTraffic];

                NSString *reportFinal = [firstChild content];
                kolIsraelTraffic.kolIsraelReport = reportFinal;

                kolIsraelTraffic.kolIsraelTime = time;
                NSLog(@"%@", kolIsraelTraffic.kolIsraelReport);
            }

        }
    }
}
_reports = newReports;
[self.tableView reloadData];
} 
```

编辑（2）：

我添加了一个异步获取数据的方法：

```
 - (void)getDataFromUrlString:(NSString *)string
    {
       //Set database address
    NSMutableString *databaseURL = [[NSMutableString alloc] initWithString:string];

    //prepare NSURL with newly created string
    NSURL *url = [NSURL URLWithString:databaseURL];

    //AsynchronousRequest to grab the data
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {
         if ([data length] > 0 && error == nil){
             [self loadReports:data];
         }else if ([data length] == 0 && error == nil){

         }else if (error != nil && error.code == NSURLErrorTimedOut){ //used this NSURLErrorTimedOut from foundation error responses

         }else if (error != nil){

         }
     }];
   } 
```

我从 viewDidLoad 调用此方法，但 tableview 没有获取数据（空表），尽管当我调试代码时，我可以在 CellForRowAtIndexPath 中看到所需的数据。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:26:36.887

```
NSData *reportsHtmlData = [NSData dataWithContentsOfURL:reportsUrl]; 
```

此行将暂停您的程序，直到请求返回。如果您不希望用户与视图交互，则设置异步请求并显示在请求完成之前他们无法交互的视图。

所以，你想要一个异步连接。阅读[NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)上的文档。

简而言之，您将要创建一个连接对象：

```
NSURLConnection *connection = [NSURLConnection initWithRequest:request
                                                      delegate:self]; 
```

然后响应一些[委托方法](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)，例如：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

最后，启动它：

```
[connection start]; 
```

* * *

或者你可以使用像[AFNetworking](https://github.com/AFNetworking/AFNetworking)这样的库来简化所有这些设置。

# google-maps - 删除标记时设置缩放 v3

> ID：14610678
> 
> 赞同：1
> 
> 时间：2013-01-30T18:02:36.927
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

从一组标记中删除标记时，我想设置缩放级别以包括尽可能接近的所有剩余标记：

已针对 API 的 v2 回答了此问题： [删除标记时设置缩放级别](https://stackoverflow.com/questions/2716735/set-zoom-level-when-marker-is-removed)

但我不能把它翻译成 v3 ..

```
<html>
<head>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=&sensor=false">
</script>

</head>
<body onload="initialize()">
    <div id="title">:: Removing Markers Example Loading:: </div>    
    <script type="text/javascript">
        var bounds;
        var points = {};

                /* Initialize the map */
                function initialize(){
                    var map = null;
                    var mapOptions={
                      center: new google.maps.LatLng(54.749991,-4.18213),
                      zoom: 3,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    }
                    map = new google.maps.Map(document.getElementById("map_canvas"),
                    mapOptions);
                    setMarkers(map, postcodes);
                }
                var postcodes = [
                ['EH1',55.952,-3.188],
                ['EH2',55.954,-3.195],
                ['EH3',55.954,-3.2],
                ['EH5',55.975,-3.216]
                ];
                var markersArray = [];
                function setMarkers(map, locations) {
                bounds = new google.maps.LatLngBounds();
                    var infowindow = new google.maps.InfoWindow({content: "holding..."});

                    for (var i = 0; i < locations.length; i++) {
                    var pcd = locations[i];
                    var myLatLng = new google.maps.LatLng(pcd[1], pcd[2]);
                    points[i]=myLatLng;
                    var marker = new google.maps.Marker({
                        position: myLatLng,
                        map: map,
                        html: "<a onclick=\"removeMarker('" + pcd[0] + "','"+i+"');\" href='javascript:void(0);'>Remove " + pcd[0] + "</a>",
                        title: pcd[0],
                    });
                    bounds.extend(myLatLng);
                    markersArray[i] = marker;
                    google.maps.event.addListener(marker, 'click', function(){
                    infowindow.setContent(this.html);
                    infowindow.open(map,this);
                    });

                }

                    map.fitBounds(bounds);

            }
        function removeMarker(pc,markersKey){ 
        markersArray[markersKey].setMap(null);
        points[markersKey]=null;
        bounds = new google.maps.LatLngBounds();
        for (var point in points)
            {
                if (points[point]!=null)
                {
                    bounds.extend(points[point]);
                }
            }
            map.setCenter(bounds.getCenter());
            map.setZoom(map.getBoundsZoomLevel(bounds)-1);
        }

    </script>
    <div id="map_canvas" style="width:350px;height:450px;"></div>
</body>
</html> 
```

# r - 将 ggplot 颜色参数传递给脚本

> ID：14610680
> 
> 赞同：1
> 
> 时间：2013-01-30T18:02:54.397
> 
> 标签：r, ggplot2

我有一个绘图功能，用于绘制/保存数据框中的每一列。要将`aes()`变量传递给 ggplot，我使用`aes_string`下面的精彩命令。

```
plot <- function(df, column) {
  y <- ggplot(df, aes_string(x="x", y="y", color=column, label="vector")) + geom_point() + theme_bw()
  ggsave(y, file=paste("plots/plot_", column,".png",sep="")) 
} 
```

我现在想在[文档](http://docs.ggplot2.org/current/scale_gradient2.html)`scale_color_gradient2`中添加 as ，但我想将 设置为列的平均值。有没有类似的方法可以将此值传递给函数？我尝试了以下方法，结果将图形点设置为灰色。`midpoint`

```
z = y + scale_color_gradient2(midpoint = mean(column))
z = y + scale_color_gradient2(midpoint = mean(df$column)) 
```

我想我可以通过预先计算值并将其传递给函数来解决这个问题，但我想知道是否有一种简单`aes_string()`的方法来做到这一点。

谢谢，扎克cp

# c++ - ISO C++ 说这些是模棱两可的，

> ID：14610683
> 
> 赞同：5
> 
> 时间：2013-01-30T18:03:00.037
> 
> 标签：c++, ambiguous, ambiguous-call

我必须重载移位运算符“<<”，以便在控制台中写入和在二进制文件中写入..

我在 ostream 重载方面做得很好，而我在重载 fstream 时遇到了一些问题，这里是：

在我的标题中：

```
friend ostream &operator<<(ostream &, const Fotografia &);
friend fstream &operator<<(fstream &, const Fotografia &); 
```

在我的 cpp 文件中：

```
fstream &operator<<(fstream & miofile, const Fotografia & sorgente)
{
        //Open the file
        miofile.open("data.dat", ios::binary | ios::app);
        if(!miofile) cerr << "Can't open the file\n";
        miofile << strlen(sorgente.Titolo);
        miofile << endl;        
        miofile << sorgente.Titolo;
        //I close the file
        miofile.close();
        return miofile;

} 
```

这是我面临的错误：

在函数 `std::fstream& operator<<(std::fstream&, const Fotografia&)' 中：

```
ISO C++ says that these are ambiguous, even though the worst conversion for the first is    better than the worst conversion for the second:

std::basic_ostream<char, _Traits>& std::operator<<(std::basic_ostream<char, _Traits>&, const char*) [with _Traits = std::char_traits<char>] 

std::fstream& operator<<(std::fstream&, const Fotografia&) 
```

到目前为止，我所理解的是，我刚刚创建的重载函数和标准 fstream << 之间存在歧义。现在，我不明白为什么，因为我的重载函数应该只适用于“Fotografia”类（由我创建），而我正在尝试编写 char * 。

我想我可以通过使用“::”范围调用 fstream 运算符来解决这个问题，但我不确定。

有人可以帮我吗？:)

编辑：

我正在发布标题的代码和构造函数的代码

```
 //Costruttore,distruttore,costruttore di copia,operatore di assegnazione.
         Fotografia(char * titolo = "Untitled" , char * formato = ".jpeg");
         ~Fotografia() { delete [] Titolo; delete [] Formato;}
         Fotografia(const Fotografia &);
         Fotografia &operator=(const Fotografia &); 
```

这是在cpp中：

```
 Fotografia::Fotografia(char * titolo , char * formato)
 {
     Titolo = new char[strlen(titolo)+1];
     strcpy(Titolo,titolo);
     Formato = new char[strlen(formato)+1];
     strcpy(Formato,formato);
  } //Fine costruttore 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:08:46.310

去掉`operator char*`in`Fotografia`或标记它`explicit`。

此外，`fstream`您可以插入任意的`basic_ostream`. 这仍然适用于`fstream`，并且可以让您更灵活地使用其他形式的输出流。这也将消除错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:23:52.103

`operator<<`重载for是没有意义的`std::fstream`。首先，因为有经验的 C++ 程序员几乎不会每次都使用 `std::fstream`；他们使用`std::ofstream`or `std::ifstream`。其次，因为一旦你使用了 a `<<`，返回值就是 a `std::ostream`，所以 永远不会调用`operator<<`for 。`ofstream`

当然，您对运算符的实现也违反了所有规则。您不会在运算符中打开或关闭文件；运算符用于格式化数据。 *如果*你想支持两种不同的格式，通常的方法是定义一个操纵器在它们之间进行选择，并让客户决定。（有关`std::ios_base::xalloc()`在何处放置附加状态，请参阅和公司。）

# c - copy_to_user(struct *file, const char __user *buf, size_t len, loff_t *off_t) 时如何消除警告

> ID：14610687
> 
> 赞同：1
> 
> 时间：2013-01-30T18:03:10.277
> 
> 标签：c, linux-kernel, linux-device-driver

这是我的 null 驱动程序的 myread 和 mywrite 函数。

```
#define SIZE 6
    static char c[SIZE];

    static ssize_t myread(struct file *file,char __user *buf,size_t len, loff_t  *fops)
{
    printk(KERN_INFO"My read with length %zd \n",len);

    memset(buf,0,SIZE);
    //return is status i.e., 0.
    if(copy_to_user(buf,c,SIZE) != 0)
        return -EFAULT;
    else if (*fops > 0)
        return 0;
        else
            *fops += SIZE;
            return SIZE;
}

static ssize_t mywrite(struct file *file, const char __user *buf, size_t len, loff_t *fops)
    {
        printk(KERN_INFO "My write \n");
        memset(c,0,SIZE);
            if (len <= SIZE)`
            {`
        if(copy_from_user(c,buf,len) != 0)
            return -EFAULT;
        else
            //number of bytes written to the kernel space is returned
            return len;`
            }
            else 
                    return -EFAULT;`
    } 
```

当我构建模块时，它会抛出如下警告：

> /usr/src/linux-headers-3.2.0-36-generic-pae/arch/x86/include/asm/uaccess_32.h：在函数“mywrite”中：/usr/src/linux-headers-3.2.0- 36-generic-pae/arch/x86/include/asm/uaccess_32.h:211:26：警告：调用带有属性警告声明的“copy_from_user_overflow”：copy_from_user() 缓冲区大小不可证明正确[默认启用]

请指导我如何摆脱这个警告。就像我在哪里做错了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:00:46.753

你的问题是`len`传入你的`myread`和`mywrite`函数可能大于`SIZE`; 如果是这种情况，`copy_from_user`/`copy_to_user`将溢出您的数组并读取/写入附近的其他内存。您的代码需要将副本的长度限制为不超过它正在访问的内核内存的长度。

# java - 在 JCalendar 中更改特定日期的颜色

> ID：14610690
> 
> 赞同：1
> 
> 时间：2013-01-30T18:03:16.080
> 
> 标签：java, jcalendar

我需要在 JCalendar 应用程序中更改选定日期的颜色。问题是：我看了一下JCalendar的源代码，并没有看到任何改变颜色的方法。

让我看看我是否可以在这里更清楚......

JCalendar 有特殊日期，
JXMonthView 有标记日期，
但它们都没有办法改变特定日期的颜色。

如果我想选择它们的颜色，我必须这样做：

```
jxMonthView = new JXMonthView(new Locale("pt_BR")) {

        private static final long serialVersionUID = 1L;

        Color currentColor = null;

        @Override
        public boolean isFlaggedDate(Date date) {
            if (!dataLoaded)
                return super.isFlaggedDate(date);
            try {
                StackTraceElement[] stackTrace = new Throwable()
                        .getStackTrace();
                if (stackTrace[1].getClassName().contains(
                        "CalendarCellContext")) {
                    Calendar cal = Calendar.getInstance();
                    cal.setTime(date);
                    DiaUtil diaUtil = listener.getDiaUtil(cal);
                    if (diaUtil != null) {
                        if (diaUtil.getValor() == 0) {
                            currentColor = Color.RED;
                        } else if (diaUtil.getValor() < 1) {
                            currentColor = Color.YELLOW;
                        }
                    } else {

                    }
                }
            } catch (Exception e) {
            }
            return super.isFlaggedDate(date);

        }

        @Override
        public Color getFlaggedDayForeground() {
            if (currentColor == null) {
                return super.getFlaggedDayForeground();
            }
            return currentColor;
        }
    }; 
```

关于如何改变颜色的任何想法？或者另一种方式而不是使用 JCalendar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:21:20.863

这是java提供的日历demo

```
/* 
* $Id: DemoCalendarRenderingHandler.java 1170 2009-11-04 14:01:25Z kleopatra $ 
* 
* Copyright 2009 Sun Microsystems, Inc., 4150 Network Circle, 
* Santa Clara, California 95054, U.S.A. All rights reserved. 
* 
* This library is free software; you can redistribute it and/or 
* modify it under the terms of the GNU Lesser General Public 
* License as published by the Free Software Foundation; either 
* version 2.1 of the License, or (at your option) any later version. 
*  
* This library is distributed in the hope that it will be useful, 
* but WITHOUT ANY WARRANTY; without even the implied warranty of 
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU 
* Lesser General Public License for more details. 
*  
* You should have received a copy of the GNU Lesser General Public 
* License along with this library; if not, write to the Free Software 
* Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA 
* 
*/ 

 package org.jdesktop.swingx.plaf.basic; 

 import java.util.Calendar; 

 import javax.swing.JComponent; 

 import org.jdesktop.swingx.JXMonthView; 
 import org.jdesktop.swingx.decorator.CompoundHighlighter; 
 import org.jdesktop.swingx.decorator.Highlighter; 

/** 
* An example of a custom CalendarRenderingHandler. As of laziness (mine :-) this 
* extends the BasicXX to widen access and provide hooks to add Highlighters. 
*  
* @author Jeanette Winzenburg 
*/ 

 public class DemoCalendarRenderingHandler extends BasicCalendarRenderingHandler { 

 private DemoCalendarAdapter adapter; 
 private CompoundHighlighter demoHighlighter; 

 /** 
  * Sets the <code>Highlighter</code>s to the table, replacing any old settings. 
  * None of the given Highlighters must be null.<p> 
  *  
  * @param highlighters zero or more not null highlighters to use for renderer decoration. 
  * @throws NullPointerException if array is null or array contains null values. 
  */ 
 // <snip> Custom CalendarRenderingHandler 
 // Minimal api to allow adding Highlighters.  

 public void setHighlighters(Highlighter... highlighters) { 
     getHighlighter().setHighlighters(highlighters); 
 } 
 // </snip> 

 /** 
  * Appends the <code>Highlighter</code>s to the end of the list of used 
  * <code>Highlighter</code>s. None of the given Highlighters must be null. 
  * <p> 
  *  
  * @param highlighters zero or more not null highlighters to use for renderer decoration. 
  * @throws NullPointerException if array is null or array contains null values. 
  */ 
 // <snip> Custom CalendarRenderingHandler 
 // Minimal api to allow adding Highlighters.  

  public void addHighlighters(Highlighter... highlighters) { 
     for (Highlighter highlighter : highlighters) { 
         getHighlighter().addHighlighter(highlighter); 
     } 
 } 
 // </snip> 

 /** 
  * Overridden to apply the additional highlighters, if any. 
  */ 
 @Override 
 public JComponent prepareRenderingComponent(JXMonthView monthView, 
         Calendar calendar, CalendarState dayState) { 
     JComponent component = super.prepareRenderingComponent(monthView, calendar, dayState); 
      return (JComponent) getHighlighter().highlight( 
              component, getCalendarAdapter(monthView, calendar, dayState)); 
 } 

 /** 
  * Returns a CompoundHighlighter containing the additional highlighters, if  
  * any. 
  *  
  * @return a CompoundHighlighter containing the additional higlighters,  
  *    guaranteed to never be null, but might be empty. 
  */ 

 protected CompoundHighlighter getHighlighter() { 
     if (demoHighlighter == null) { 
         demoHighlighter = new CompoundHighlighter(); 
     } 
     return demoHighlighter; 
 } 

 /** 
  * Returns a CalendarAdapter installed with the given monthView and  
  * state. 
  *  
  * @param monthView 
  * @param calendar 
  * @param dayState 
  * @return 
  */ 

  protected DemoCalendarAdapter getCalendarAdapter(JXMonthView monthView, 
         Calendar calendar, CalendarState dayState) { 
     if (adapter == null) { 
         adapter = new DemoCalendarAdapter(monthView); 
     } 
     return adapter.install(calendar, dayState); 
  } 

 /** 
  * CalendarAdapter, subclassed for public access and fix of selected 
  * day state. 
  *   
  */ 

  public static class DemoCalendarAdapter extends CalendarAdapter { 

     /** 
      * Instantiates a ComponentAdapter with the given monthView. 
      *  
      * @param component 
      */ 

     public DemoCalendarAdapter(JXMonthView component) { 
         super(component); 
     } 

     /** 
      * {@inheritDoc} <p> 
      *  
      * Overridden to return a publicly accessible class. 
      */ 

     @Override 
     public DemoCalendarAdapter install(Calendar calendar, CalendarState dayState) { 
         return (DemoCalendarAdapter) super.install(calendar, dayState); 
     } 

     /** 
      * {@inheritDoc} <p> 
      *  
      * Overridden to report selected only if a day of the month.  
      */ 

     @Override 
     public boolean isSelected() { 
         // PENDING JW: this should be handled in super 
         if (!isDayInMonth()) return false; 
         return super.isSelected(); 
     } 

     /** 
      * Returns a clone of the current calendar. 
      * @return 
      */ 
     public Calendar getCalendar() { 
         // PENDING JW: this should be handled in super 
         return (Calendar) calendar.clone(); 
     } 

     /** 
      * @param dayState 
      * @return 
      */ 
     public boolean isDayInMonth() { 
         return (CalendarState.IN_MONTH == getCalendarState())  
             || (CalendarState.TODAY == getCalendarState()); 
     } 

 } 
```

# ios - 使用 OpenAL 播放多个音频文件

> ID：14610691
> 
> 赞同：0
> 
> 时间：2013-01-30T18:03:17.317
> 
> 标签：ios, openal

我有 20 多个与动物和鸟类相关的小型（大约 3 秒持续时间）音频文件。我想定期连续播放这些音频文件。例如，音频 1 必须每 10 秒循环一次，音频 2 必须每 12 秒循环一次，依此类推。
由于音频文件的数量更多，我们无法使用 AVFoundation Framework 播放。Open AL 最适合这种情况，因此我也可以添加声音效果。
我想知道的是如何以某种频率连续播放它们。
是否有任何默认方法/api来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:38:02.083

如果您想使用 OpenAL 播放短样本，请查看[Finch 声音引擎](https://github.com/zoul/Finch)。要在给定时间后重复声音，请设置一个 repeating `NSTimer`，每个要重复的声音一个。（创建一个包含计时器和声音的独立类可能是值得的。）

# java - For循环在java中显示多个消息框

> ID：14610694
> 
> 赞同：0
> 
> 时间：2013-01-30T18:03:24.773
> 
> 标签：java

嘿，我正在创建一个密码验证程序，该程序要求程序检查密码的数字、字母和长度，然后程序比较两个密码以查看它们是否匹配。一切正常，但是当显示错误消息时，它会显示多个消息框。我知道这与 for 循环有关，但我仍然是初学者，我不知道如何修复它。

这是我的代码：

```
import javax.swing.JOptionPane;

public class Passwords
{
public static void main(String[] args)
{
    String passOne, passTwo;
    passOne = JOptionPane.showInputDialog(null, "Please enter a password");
    passTwo = JOptionPane.showInputDialog(null, "Please re-enter your password");

    //Loop for each digit in password
    for(int x = 0; x < passOne.length(); x++)
    {
        //Testing for a digit
        if(Character.isDigit(passOne.charAt(x)))
            {
                //Testing for a letter
                if(Character.isLetter(passOne.charAt(x)))
                {
                    //Testing length 6-10 chars
                    if(passOne.length() <= 10 && passOne.length() >= 6)
                    {
                        //comparing two passwords
                        if(passOne.equals(passTwo))
                        {
                            JOptionPane.showMessageDialog(null, "Contratulations, you have a new password!");
                        }
                        //If passwords don't match
                        else
                        {
                            JOptionPane.showMessageDialog(null, "Passwords do not match, please try again.");
                        }
                    }
                    //If length is wrong
                    else
                    {
                        JOptionPane.showMessageDialog(null, "Password must be between 6 and 10 characters long.");
                    }
                }
                //If no letter
                else
                {

                    JOptionPane.showMessageDialog(null, "Password must contain at least one letter.");
                }

            }
        //If no digit
        else
            {

                JOptionPane.showMessageDialog(null, "Password must contain at least one digit.");           
            }

    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:11:27.340

您的代码有几个问题

1.  您正在迭代密码的字符，但在每次迭代中，您都会检查*整个*密码的长度。您只需要在循环之外执行一次。这也适用于检查`passOne`和`passTwo`

2.  “外包”代码以检查数字/字符，如下所示：

    ```
    static boolean containsOnlyDigitsOrLetters(String s)
    {
        for(int i = 0; i < s.length; i++)
        {
               if(!(Character.isLetter(s.charAt(i)) || Character.isDigit [...]))
               {
                   // if the current character is neither a letter nor a digit
                   return false;
               }
        }
        // all characters are either digits or letters
        return true;
    } 
    ```

    我故意发布了“仅包含数字和字母”的代码，而不是“至少一个数字”/“至少一个字母”顺便说一句;）然后你可以让你的代码更具可读性，就像这个伪代码：

    ```
    if password's length is not okay:
        display 'at least 6, at max 10'
    else if passwords do not match:
        [...]
    else if password does not contain a letter: // if(!containsAtLeastOneLetter(passOne))
        display 'use at least one letter'
    [....] 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:40:39.307

显然，你的 for 循环中的问题，

如果你想检查字符串是否包含数字，你可以这样做：

**`Pattern.compile("[0-9]").matcher(passOne).find()`**

如果你想检查他的字符串是否包含字母：

**`Pattern.compile("[a-z]").matcher(passOne).find()`**

例如：

```
import java.util.regex.Pattern;

import javax.swing.JOptionPane;

public class Main {

    public static void main(String[] args) {
        String passOne, passTwo;
        passOne = JOptionPane.showInputDialog(null, "Please enter a password");
        passTwo = JOptionPane.showInputDialog(null, "Please re-enter your password");

        //Testing for a digit
        if (Pattern.compile("[0-9]").matcher(passOne).find()) {
            //Testing for a letter
            if (Pattern.compile("[a-z]").matcher(passOne).find()) {
                //Testing length 6-10 chars
                if (passOne.length() <= 10 && passOne.length() >= 6) {

                    //comparing two passwords
                    if (passOne.equals(passTwo)) {
                        JOptionPane.showMessageDialog(null, "Contratulations, you have a new password!");

                    } //If passwords don't match
                    else {
                         JOptionPane.showMessageDialog(null, "Passwords do not match, please try again.");

                    }
                } //If length is wrong
                else {
                    JOptionPane.showMessageDialog(null, "Password must be between 6 and 10 characters long.");
                }
            } //If no letter
            else {
                JOptionPane.showMessageDialog(null, "Password must contain at least one letter.");
            }

        } //If no digit
        else {
           JOptionPane.showMessageDialog(null, "Password must contain at least one digit.");

        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:09:32.333

这是因为您为每个字符显示错误，使其无法通过验证。

解决方案的要点是，一旦发现错误，就必须跳出循环。然后，如果您确实有错误（您在爆发之前记录了该错误），则显示它。

我实际上并没有运行它，但它应该更接近，试试这个：

```
 String error = null;
    // Loop for each digit in password
    for (int x = 0; x < passOne.length(); x++) {
        // Testing for a digit
        if (Character.isDigit(passOne.charAt(x))) {
            // Testing for a letter
            if (Character.isLetter(passOne.charAt(x))) {
                // Testing length 6-10 chars
                if (passOne.length() <= 10 && passOne.length() >= 6) {
                    // comparing two passwords
                    if (passOne.equals(passTwo)) {
                        error = "Contratulations, you have a new password!";
                    }
                    // If passwords don't match
                    else {
                        error = "Passwords do not match, please try again.";
                    }
                }
                // If length is wrong
                else {
                    error = "Password must be between 6 and 10 characters long.";
                }
            }
            // If no letter
            else {

                error = "Password must contain at least one letter.";
            }

        }
        // If no digit
        else {
            error = "Password must contain at least one digit.";
        }

        if(error != null) break;

    }

    if(error != null) {
        JOptionPane.showMessageDialog(null, error);           
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:09:46.940

您需要从 for 循环中取出等号检查。你只需要这样做一次，现在你正在做第一次的长度。

# delphi - 怎么了？（表达式的类型必须是 BOOLEAN）

> ID：14610706
> 
> 赞同：3
> 
> 时间：2013-01-30T18:04:09.230
> 
> 标签：delphi, function, boolean

我的代码有什么问题？我收到此错误：

> [dcc32 错误] Unit6.pas(83): E2012 表达式类型必须为 BOOLEAN

```
function checkver(): boolean;
begin
  //some code here
end;

function refresh(): boolean;
begin
  //some code here
end;

procedure TForm6.FormCreate(Sender: TObject);
begin
  if checkver() then
    if refresh() then  //Error is HERE!!
      //some code here
end; 
```

（[完整代码](http://pastebin.com/dvPNzzHr)）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T18:05:57.790

`TControl`（你的表单类的后代）有[一个`Refresh`自己的方法，](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TControl.Refresh)它不返回布尔值。该方法的范围比同名的单元级方法的范围更近，因为您在该类的方法中编写代码，因此编译器绑定的是`Refresh`方法，而不是`refresh`函数。

调用`<unitname>.refresh`以获取单元级函数而不是方法。

# pdf - PowerShell，iTextSharp 添加图像

> ID：14610709
> 
> 赞同：0
> 
> 时间：2013-01-30T18:04:14.257
> 
> 标签：pdf, powershell, itextsharp

如何将图像添加到通过 PowerShell 创建的 PDF 文档？

我正在添加带有如下代码的文本：

```
$environmentElem = New-Object iTextSharp.text.Paragraph;
[void]$environmentElem.Add("Text");
[void]$TemplateDoc.Add($environmentElem); 
```

我曾尝试在 PowerShell 中沿着命名空间寻找合适的类型（iTextSharp.text.Image），但无济于事。

另外我需要使用iTextSharp通过PS创建很多PDF，有没有好的资源可以推荐？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:35:45.177

试试这个，我没有测试，但从 c# 转换为从[这里](http://www.mikesdotnetting.com/Article/87/iTextSharp-Working-with-images)：

```
$jpg = [iTextSharp.text.Image]::GetInstance( "c:\path\to\your\file.JPG" )
$TemplateDoc.Add($jpg); 
```

# adobe - 将灯箱属性添加到 CQ5 图像锚点

> ID：14610710
> 
> 赞同：2
> 
> 时间：2013-01-30T18:04:14.227
> 
> 标签：adobe, aem, lightbox2

`rel="lightbox"`当您使用 Image 或 TextImage 组件选择目标图像时，我需要添加 到锚标记。锚标记是由 CQ 自动生成的，但我无法找到发生这种情况的位置，或者更重要的是，是否有可以调用的方法来添加此字符串。

我正在查看内置图像组件的 Adob​​e 文档（[http://dev.day.com/docs/en/cq/5-3/javadoc/com/day/cq/wcm/foundation/Image.html](http://dev.day.com/docs/en/cq/5-3/javadoc/com/day/cq/wcm/foundation/Image.html) )，我将其克隆并稍作修改以供单独的 Lightbox 使用。

图像对象有`protected Map<String,String> getImageTagAttributes()`，我希望在我不知道的类中有一些锚点的等效对象。

这是我们当前用作参考的 Image 组件。

```
<%@ page import="commons.Doctype,
    wcm.api.components.DropTarget,
    wcm.foundation.Image" %><%
%><%@include file="/apps/site/global.jsp"%><%
String alignment = properties.get("alignment", "");
Image image = new Image(resource);

    //drop target css class = dd prefix + name of the drop target in the edit config
    image.addCssClass(DropTarget.CSS_CLASS_PREFIX + "image");
    if (!alignment.isEmpty() && !alignment.equals("center"))     
    image.addCssClass(alignment);
    image.loadStyleData(currentStyle);
    image.setSelector(".img"); // use image script
    image.setDoctype(Doctype.fromRequest(request));
    // add design information if not default (i.e. for reference paras)
    if (!currentDesign.equals(resourceDesign)) {
        image.setSuffix(currentDesign.getId());
    }
    if (alignment.equals("center")) {
    %><div class="center"><%
    }
    %><% image.draw(out); %><%
    %><cq:text property="jcr:description" placeholder="" tagName="small"/>
    <% if (alignment.equals("center")) {%>
    </div>
    <% } %> 
```

现在我正在使用 jQuery 来完成这项工作，但如果可能的话，我不想依赖脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:24:43.727

您应该能够扩展图像组件并使用

```
image.addAttribute("rel","lightbox"); 
```

按照

[CQ5.5 的图像类文档](http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/commons/DownloadResource.html#addAttribute%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:00:48.473

您可以查看 Sling Rewriters 来完成这项工作：[http](http://sling.apache.org/site/rewriting-the-output-through-pipelines.html) ://sling.apache.org/site/rewriting-the-output-through-pipelines.html基本上您可以解析您的响应并即时修改它。

# django - 如何停止登录 django celery

> ID：14610711
> 
> 赞同：1
> 
> 时间：2013-01-30T18:04:15.733
> 
> 标签：django, celery, django-celery

我想停止从这个命令记录我的 celery 结果。

```
./manage.py celeryd --purge -l info  -f /tmp/celery_test.log -E 
```

当我运行我的测试时，我会收到所有我想忽略的任务成功消息，因为我们不对其做任何事情。我尝试添加`CELERY_IGNORE_RESULT = True`我的设置文件，但这似乎不起作用。

我知道我可以通过`ignore_result=True`每项任务，但我希望这是一个全局设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:18:50.087

在您的 settings.py 或您设置芹菜的位置添加以下内容。

```
import logging
class RequestsConnectionFilter(logging.Filter):
    def filter(self, record):
        return False
logging.getLogger('newrelic.lib.requests.packages.urllib3.connectionpool').addFilter(RequestsConnectionFilter()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:10:06.257

试试这个命令

> 块引用 /manage.py celeryd --purge -f /tmp/celery_test.log

# c++ - 如何重载空的 std::initializer_list？

> ID：14610714
> 
> 赞同：5
> 
> 时间：2013-01-30T18:04:35.257
> 
> 标签：c++, c++11, overloading, initializer-list

在这里，我有一系列重载函数，它们以向量或 initializer_list 为输入。我想处理客户端代码输入空的initializer_list时的特殊情况。问题是编译器无法确定在这样的空列表中应该包含哪些数据。所以我的问题是我如何在函数声明中解决这种情况。

```
#include <string>
#include <vector>

using namespace std;
void func(vector<string> v) { }
void func(vector<wstring> v) { }
void func(initializer_list<string> iv) {}
void func(initializer_list<wstring> iv) {}

int main() {
  using namespace std;
  func({"apple", "banana"});
  func({L"蘋果", L"香蕉"});
  func({}); // special case
} 
```

错误信息：

```
<stdin>: In function 'int main()':
<stdin>:14:10: error: call of overloaded 'func(<brace-enclosed initializer list>)' is ambiguous
<stdin>:14:10: note: candidates are:
<stdin>:5:6: note: void func(std::vector<std::basic_string<char> >)
<stdin>:6:6: note: void func(std::vector<std::basic_string<wchar_t> >)
<stdin>:7:6: note: void func(std::initializer_list<std::basic_string<char> >)
<stdin>:8:6: note: void func(std::initializer_list<std::basic_string<wchar_t> >) 
```

`void func(initializer_list<void> iv) {}`- 没有效果。我不知道如何正确声明它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:31:03.583

我希望有一个更好的答案，但是您可以利用这样一个事实，即使用已定义类型的空括号进行列表初始化比构造函数更喜欢默认构造`initializer_list`函数。不幸的是，这意味着必须将 的重载`func`转换为单个参数类型的构造函数的重载集：

```
using namespace std;
struct parameter {
   // representation left as an exercise - perhaps Boost.Variant?
   parameter(vector<string> v) {}
   parameter(vector<wstring> v) {}
   parameter(initializer_list<string> iv) {}
   parameter(initializer_list<wstring> iv) {}
   parameter() {}  // default constructor - func({}) calls this
};
void func(parameter) {} 
```

如果您不使用`string`，则可以使用`template<typename T> void func(initializer_list<T>)`带有`empty`重载的模板，因为非模板重载优于模板重载，但不幸的是，在您的情况下，字符串文字调用被推断为`initializer_list<const char *>`，这很难转换为`initializer_list<string>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T22:37:02.290

仅凭参数无法区分这一点。不过，您可以将其中一个作为模板，这样对于重载解决方案来说成本更高且不太可取

```
void func(vector<string> v) { }
void func(vector<wstring> v) { }
template<typename = void>
void func(initializer_list<string> iv) {}
void func(initializer_list<wstring> iv) {} 
```

现在调用`func({})`将优先于函数模板的最后一个函数。请注意，`func({"hello", "world"})`与非模板向量获取函数相比，它仍然更喜欢函数模板，因为参数转换成本比是否从模板合成候选更重要。

# ios - 我如何将 NSNumber 桥接到 iOS 中的 ABRecordID

> ID：14610715
> 
> 赞同：4
> 
> 时间：2013-01-30T18:04:38.210
> 
> 标签：ios, abaddressbook, abrecordref

我开始用 Objective-C 学习编程，对 C 的了解不多。所以，iOS 6 中的桥接转换对我来说仍然有些困惑。

这是场景：

我有一个人 ABRecordID 作为“NSNumber”属性存储在 CoreData 中。稍后，我想直接访问那个人，所以我想使用这个人的 ABRecordID 来访问使用 ABAddressBook 的联系信息。注意到`ABAddressBookGetPersonWithRecordID`需要 ABRecordID，下面是我在代码中执行转换的方式...

```
address_book = ABAddressBookCreate();
ABRecordID rec_id = (__bridge ABRecordID)person.record_id; 
```

但是，这并不成功，我得到了`incompatible types casting 'int' into 'ABRecordID' (aka 'int') with a __bridge cast`.

已经很困惑了，在 ARC 类型和 CF 类型之间架桥转换的正确方法是什么？

另外，在哪种情况下我应该使用`(__bridge retained)`而不是`(__bridge)`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T18:33:51.817

The是一个 32 位整数`ABRecordID`的同义词 (typedef) 。`int32_t`所以类型转换不是正确的方法。您想`NSNumber`使用 id 的值创建一个。

```
ABRecordId rec_id = person.record_id;
NSNumber *wrapper = [NSNumber numberWithInt:(int)rec_id]; 
```

然后：

```
NSNumber *wrapper = ...
ABRecordId rec_id = (ABRecordId)[wrapper intValue]; 
```

请注意，在往返 ABRecordId 和 NSNumber 时，桥接和 ARC 无关紧要。在这种情况下，没有使用任何`CF`类型。您将知道何时使用`CF`类型，因为您将拥有一个类型以`CF`（例如`CFArrayRef`）开头的变量。

# arrays - 重新排列整数数组（正数）的元素以形成最大结果数

> ID：14610716
> 
> 赞同：1
> 
> 时间：2013-01-30T18:04:40.800
> 
> 标签：arrays, algorithm

这是一道面试题。我们有一个正整数数组，我们必须重新排列和连接数组元素，以使结果数是使用该数组可以形成的最大数。

例如：

```
[884 88] -> 88884

[20 19 90] -> 902019

[909 90] -> 90990 
```

我的解决方案：我认为首先按最重要的数字（MSD）按降序对元素进行排序。

即对于 909 , 12, 88 ，我们将在排序后获得 909, 88, 12 ，对于具有相同 MSD 的那些排序第二个 MSD 并继续这样做。

因此，对于数组 909、99，我们将拥有 99 和 909 并将它们组合起来。但是对于数组 909、90，我们将有 90、909，这是一个问题，因为我们在两个数字中都有 90，所以

90

909 ---> 这里可能有两种组合，因为 90 是常见的，所以从 909 中删除公共部分后留下 9，所以我会检查将这个 9 附加到 90 是否使其变大。在这种情况下，在 90 前面加上 9，我们得到 990，它大于 909，所以 909 后面跟着 90。所以答案是 90990。

但是当我尝试对其进行编码时，我发现由于涉及太多复杂性而难以编码。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T11:30:27.563

这只是一个基数排序问题。需要按降序对数字进行排序。然后生成号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:12:46.820

让宽度 = min(#digits) 在数字集中

仅对按第一个宽度数字递减的数字进行排序 - 通过首先对具有较少数字的数字进行排序来打破平局

拿第一个

重复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T07:36:28.640

这里的逻辑应该是。连接两个数字并进行比较。取较大的一个并按照逆序对其进行排序。然后反转的数组将产生更大的数字。以下是java中的代码。

公共类 ArrangeToFormBiggerNumber { /** * @param args */

```
public static void main(String[] args)
{
    Integer arr[] = {10,9,20};
    Arrays.sort(arr, new Comparator<Object>()
    {

        @Override
        public int compare(Object o1, Object o2)
        {
            return -(o1 + "" + o2).compareTo(o2 + "" + o1);
        }

    });
    String res = "";
    for (Integer i : arr)
    {
        res += i;
    }
    System.out.println(res);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-25T19:41:28.020

我们必须做一个字典排序来解决这个问题。假设**I1**和**I2**是我们必须比较的整数，然后取**I1+I2**和**I2+I1**，如果***I1+I2 > I2+I1***，则**I1**应该放在**I2**之前，反之亦然。这是这个问题的Java实现。

```
import java.util.Arrays;
import java.util.Comparator;
public class LexicographicSort implements Comparator<Integer> {

public int compare(Integer o1, Integer o2) {
    String s1 = o1.toString();
    String s2 = o2.toString();
    return (s2+s1).compareTo(s1+s2);
}

public static void main(String[] args) {
    LexicographicSort ls = new LexicographicSort();
    Integer[] nums = {9,1,90,907,5};
    Arrays.sort(nums, ls);
    System.out.println(Arrays.toString(nums));
} 
```

# routes - Rails 3.2 中的路由错误

> ID：14610725
> 
> 赞同：0
> 
> 时间：2013-01-30T18:05:14.883
> 
> 标签：routes, ruby-on-rails-3.2

我收到路由错误

```
No route matches {:action=>"edit", :controller=>"projects"} 
```

运行`rake routes`给了我以下信息：

```
 edit_user_project GET    /users/:user_id/projects/:id/edit(.:format)          projects#edit
        user_project GET    /users/:user_id/projects/:id(.:format)               projects#show
                     PUT    /users/:user_id/projects/:id(.:format)               projects#update
                     DELETE /users/:user_id/projects/:id(.:format)               projects#destroy 
```

并且错误来自`projects/new`.

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:13:41.667

@Thomas Klemm - 你得到了正确的答案。在这里发布以防其他人来寻找类似的错误。

注意：（ `edit_user_project_path`或类似的）有 2 个参数，在这种情况下`@user`和`@project`.

# php - 我可以将此 JSON 提供给 D3 以绘制折线图吗？

> ID：14610726
> 
> 赞同：0
> 
> 时间：2013-01-30T18:05:17.637
> 
> 标签：php, javascript, json, d3.js

我有一个这种格式的 JSON：

```
[{"Wed Jan 23 00:00:00 IST 2013":3383387},
 {"Thu Jan 24 00:00:00 IST 2013":3388022},
 {"Fri Jan 25 00:00:00 IST 2013":3393322},
 {"Sat Jan 26 00:00:00 IST 2013":3401241},
 {"Sun Jan 27 00:00:00 IST 2013":3406134},
 {"Mon Jan 28 00:00:00 IST 2013":3410703},
 {"Tue Jan 29 00:00:00 IST 2013":3415120}] 
```

我正在尝试使用[http://bl.ocks.org/3883195](http://bl.ocks.org/3883195)中提到的 JSON 和 D3 示例代码创建一个简单的折线图。我没有使用 d3.tsv，而是使用 d3.json。但由于某种原因，它没有采用这种格式的 JSON。如果可以将此 JSON 转换为这种格式，我相信我可以使它工作：

```
[{"Date":
  ["Wed Jan 23 00:00:00 IST 2013",
   "Thu Jan 24 00:00:00 IST 2013",
   "Fri Jan 25 00:00:00 IST 2013",
   "Sat Jan 26 00:00:00 IST 2013",
   "Sun Jan 27 00:00:00 IST 2013",
   "Mon Jan 28 00:00:00 IST 2013",
   "Tue Jan 29 00:00:00 IST 2013"],
 "Values":[3415120,2343244,454545,4564566,56334534,34543554,34543555]}] 
```

问题是，有什么简单的方法可以将我的 JSON 转换为这种格式。我正在使用 php 函数 json-encode 将数组编码为 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:48:44.777

JSON 格式的唯一问题是键表示要用于绘制图形的数据。但是，您可以轻松地将其转换为更易于使用的格式[`d3.entries()`](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_entries)- 无需为 D3 提供不同的 JSON。

# iphone - 如何删除工具栏上 UIBarButtonItems 之间的默认空闲空间？

> ID：14610730
> 
> 赞同：2
> 
> 时间：2013-01-30T18:05:31.897
> 
> 标签：iphone, ios, objective-c, uitoolbar

如何删除工具栏上 UIBarButtonItems 之间的默认空闲空间？您可以在屏幕上看到可用空间

![这里是自由空间](../Images/6f421832092569183f8b8e2841d34d2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:17:25.477

您想创建一个自定义`UIBarButtonItem`. 使用类的`initWithCustomView:`初始化程序`UIBarButtonItem`创建一个包含两个按钮的项目。创建您自己的`UIView`子类，其中`UIView`包含两个按钮的自定义，或`UISegmentedControl`直接使用 a 作为自定义视图。

# php - 需要有关使用 PHP 解析 html 表的建议

> ID：14610736
> 
> 赞同：2
> 
> 时间：2013-01-30T18:06:01.247
> 
> 标签：php, arrays, parsing, html-table

我正在使用这个问题来解决这个问题。 [如何解析该表并从中提取数据？](https://stackoverflow.com/questions/6818335/how-to-parse-this-table-and-extract-data-from-it)

但是在我试图解析的桌子上被难住了。

这是PHP页面源代码。里面只有一张表，表 id 为“troops”。

我设法在数组上获取表头，但无法将行数据与表头连接起来。

这是我正在使用的代码，它用于上面的文章，根据我的需要进行了编辑。

html 源代码 [http://pastebin.com/RKbzVT1V](http://pastebin.com/RKbzVT1V)

使用的php代码

```
$content = $_POST['src'];
$dom = new DomDocument;
$dom -> loadHtml($content);

$xpath = new DomXPath($dom);

// collect header names

$headerNames = array();
foreach ($xpath->query('//table[@id="troops"]//th') as $node) {
//foreach ($xpath->query('//th[ contains (@class, "vil fc") ]') as $node) {
    $headerNames[] = $node -> nodeValue;

}

// collect data

$data = array();
foreach ($xpath->query('//tr') as $node) {
    $rowData = array();
    foreach ($xpath->query('//td', $node) as $cell) {
        $rowData[] = $cell -> nodeValue;
    }

    $data[] = array_combine($headerNames, $rowData);
} 
```

感谢您对此事的任何帮助，如果有更简单的方法，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:38:30.097

运行你的代码我得到：

> PHP 警告: `array_combine()`: 两个参数应该有相同数量的元素

这意味着 中的项目数`$headerNames`不等于 中的项目数`$rowData`。您`$rowData`包含一行的所有 TD 元素，但如果您查看 HTML，您会发现 TD 元素比 TH 元素多得多：

```
<tr class="hover">
 <th class="vil fc">
     <a href="build.php?newdid=3665&id=39#td">00 La piu …&lt;/a>
 </th>
 <td>54</td>
 <td>5</td>
 <td class="none">0</td>
 <td>74</td>
 <td>355</td>
 <td class="none">0</td>
 <td class="none">0</td>
 <td class="none">0</td>
 <td class="none">0</td>
 <td class="none">0</td>
 <td class="none lc">0</td>
</tr> 
```

我假设您正在尝试实现以下目标：

```
[00 La piu …] => Array
    (
        [0] => 54
        [1] => 5
        [2] => 0
        [3] => 74
        [4] => 355
        [5] => 0
        [6] => 0
        [7] => 0
        [8] => 0
        [9] => 0
        [10] => 0
    ) 
```

以下代码将产生：

```
libxml_use_internal_errors(true);
$dom = new DOMDocument;
$dom->loadHTMLFile('NewHTMLFile.html');
$table = $dom->getElementById('troops');
foreach ($table->getElementsByTagName('tr') as $tr) {
    if ($header = $tr->getElementsByTagName('th')->item(0)) {
        $data[trim($header->nodeValue)] = array_map(
            function(DOMElement $td) { return $td->nodeValue; },
            iterator_to_array($tr->getElementsByTagName('td'))
        );
    }
}
libxml_use_internal_errors(false); 
print_r($data); 
```

如果这不是您要查找的内容，请更新您的问题并包含您尝试获得的输出示例。

# algorithm - Geohash bounding box search

> ID：14610741
> 
> 赞同：0
> 
> 时间：2013-01-30T18:06:18.707
> 
> 标签：algorithm, data-structures, geolocation, geospatial

I want to do a bounding box query a Trie of geohashed strings where the points lie all around the center of the space. I can't seem to find a good way to query the trie when the points straddle the center point.

Say you have 4 bits per coordinate (8 total) of information on a 16x16 space where each box is 1x1\. Essentially, a 16x16 grid.

The red line shows the most corse division of the quad tree which is used in the geohash.

![Example image](../Images/0140eb24a5ee1f5f5975070a06d843a9.png)

Trie representing the graphic above.

```
bits=4, min=0, max=16, numBuckets=16.0, scaling=1.0, tree={
└── null
    ├── 0
    │   ├── (0110100) 00110100 = {(6, 6), hash=00110100}
    │   └── (1100000) 01100000 = {(6, 8), hash=01100000}
    └── 1
        ├── (0010101) 10010101 = {(8, 7), hash=10010101}
        └── (1000010) 11000010 = {(9, 8), hash=11000010} 
```

A bounding box query is defined as a upper-left point and a length, width. e.g. (6,6 4x4) Should return 6,6 6,8 8,7 and 9,8.

One approach I thought of is: Start from the most precise box containing the upper-left coordinate and keep getting less precise until I can cover the 4x4 square. But if I do that I end up querying the whole tree in this example. I just don't see a "better" way to do it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:12:17.310

If you can add extra information to the nodes of your trie structure I would ignore the GeoHash encoding and treat it as an arbitrary tree structure. Working from the leaves up you can compute a bounding box round each node that just encloses all the points beneath that node. Then when you search from the top down for a point (or area) you can stop searching at a node when its bounding box does not enclose (or intersect) your query point (or area).

If you can afford to keep this updated, then you will gain when your search point or area is not inside (or does not intersect) a bounding box that encloses all the points that are actually below some node, even if the search point or area could overlap some point could in theory GeoHash to that area.

# firefox - 阻止火狐更新

> ID：14610742
> 
> 赞同：6
> 
> 时间：2013-01-30T18:06:24.180
> 
> 标签：firefox, ubuntu, ubuntu-12.04, firefox-16

我正在使用`selenium 2.25.0`和 Firefox webdriver 编写一些 python 测试。

我以前有**Firefox 版本 16**（运行良好），但现在它自动更新到版本 18，这导致我的 selenium 版本出现很多问题，如果我没有批准，我希望 Firefox 阻止更新.

我发现 Firefox 的 linux 版本没有在*Preferences > Advanced > Update 选项卡*中提供选项来告诉它在新版本可用时询问我该怎么做。

我已经尝试过`selenium==2.26`.0 并且它在本地对我来说有点用，但不幸的是更新 selenium 的版本不是一个合适的选择，因为这些测试在生产中有一段时间。

**我已经有[Firefox 16 二进制文件](ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/16.0/linux-x86_64/en-US/)，我需要它保持在这样的版本**中。

**有没有办法在 Ubuntu 12.04 下完成这个？**

提前感谢您的帮助？:)

*PD*我不关心任何附加组件不兼容，我不需要它们，所以解决这个问题后某些附加组件不可用也没关系。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T18:15:28.703

使用 about:config 将 app.update.enabled 和 app.update.auto 设置为 False。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T16:32:47.593

这里有更详细的说明，因为更多的人不是 Firefox 配置方面的专家。

1.  打开火狐
2.  在地址栏中，键入`about:config`并按 Return
3.  它会警告你，点击我接受风险
4.  在弹出的搜索栏中搜索 app.update.enabled
5.  双击它以将设置翻转为 false
6.  做同样的事情`app.update.auto`

我可以验证这是否有效。

# ios - iOS 相机的亮度

> ID：14610744
> 
> 赞同：1
> 
> 时间：2013-01-30T18:06:24.747
> 
> 标签：ios, objective-c, brightness, luminance

我正在尝试制作一个应用程序，我必须像这个应用程序一样计算相机的亮度：http: [//itunes.apple.com/us/app/megaman-luxmeter/id455660266 ?mt=8](http://itunes.apple.com/us/app/megaman-luxmeter/id455660266?mt=8)

我找到了这份文件：[http ://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera](http://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera)

但我不知道如何将它直接适应相机而不是图像。这是我的代码：

```
 Image = [[UIImagePickerController alloc] init];
    Image.delegate = self;
    Image.sourceType = UIImagePickerControllerCameraCaptureModeVideo;
    Image.showsCameraControls = NO;
    [Image setWantsFullScreenLayout:YES];
    Image.view.bounds = CGRectMake (0, 0, 320, 480);
    [self.view addSubview:Image.view];

    NSArray* dayArray = [NSArray arrayWithObjects:Image,nil];
    for(NSString* day in dayArray)
    {
        for(int i=1;i<=2;i++)
        {
            UIImage* image = [UIImage imageNamed:[NSString stringWithFormat:@"%@%d.png",day,i]];
            unsigned char* pixels = [image rgbaPixels];
            double totalLuminance = 0.0;
            for(int p=0;p<image.size.width*image.size.height*4;p+=4)
            {
                totalLuminance += pixels[p]*0.299 + pixels[p+1]*0.587 + pixels[p+2]*0.114;
            }
            totalLuminance /= (image.size.width*image.size.height);
            totalLuminance /= 255.0;
            NSLog(@"%@ (%d) = %f",day,i,totalLuminance);
        }
    } 
```

以下是问题：

“找不到实例方法'-rgbaPixels'（返回类型默认为'id'）”和“使用'id'类型的表达式初始化'unsigned char *'的不兼容指针类型”

非常感谢 ！=)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T20:19:40.017

让我建议一种替代方法，而不是对输入视频帧中的每个像素进行昂贵的 CPU 密集型处理。我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架内置了一个亮度提取器，它使用基于 GPU 的处理来提供来自摄像机的实时亮度读数。

设置它相对容易。您只需分配一个 GPUImageVideoCamera 实例来表示相机，分配一个 GPUImageLuminosity 过滤器，并将后者添加为前者的目标。如果您想在屏幕上显示相机源，请创建一个 GPUImageView 实例并将其添加为您的 GPUImageVideoCamera 的另一个目标。

您的亮度提取器将使用回调块在计算时返回亮度值。使用如下代码设置此块：

```
[(GPUImageLuminosity *)filter setLuminosityProcessingFinishedBlock:^(CGFloat luminosity, CMTime frameTime) {
     // Do something with the luminosity
   }]; 
```

如果你好奇的话，我会在[这个答案](https://stackoverflow.com/questions/12168072/fragment-shader-average-luminosity/12169560#12169560)中描述这种光度提取的内部工作原理。对于 iPhone 4 上的 640x480 帧视频，此提取器在约 6 毫秒内运行。

您很快就会发现，当启用自动曝光时，iPhone 相机的平均亮度几乎总是在 50% 左右。这意味着您需要使用相机元数据中的曝光值来补充您的亮度测量，以获得任何有意义的亮度测量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:27:52.753

为什么将相机图像放入`NSArray *dayArray`? 五行之后，您将其从该数组中删除，但将该对象视为`NSString`. 一个`NSString`没有`rgbaPixels`。您复制粘贴的示例具有一组文件名，这些文件名对应于一天中不同时间拍摄的照片。然后它打开这些图像文件并执行光度分析。

在您的情况下，没有要读取的文件。两个外`for`循环，即打开`day`并且`i`将不得不消失。您已经可以`Image`通过`UIImagePickerController`. 在添加子视图之后，您原则上可以访问像素，就像您从`unsigned char *pixels = [Image rgbaPixels];`哪里获得的图像一样。`Image``UIImagePickerController`

但是，这可能不是您想要做的。我想您的目标是显示`UIImagePickerController`捕获模式，然后连续测量光度。为此，您可以`Image`转换为成员变量，然后从计时器回调中重复访问其像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T06:43:14.667

您可以从 GIT 导入以下类来解决此问题。

[https://github.com/maxmuermann/pxl](https://github.com/maxmuermann/pxl)

将 UIImage+Pixels.h & .m 文件添加到项目中。现在尝试运行。

# mongodb - 为什么我必须在更新之前删除 Mongo 中的 _id 字段？

> ID：14610747
> 
> 赞同：0
> 
> 时间：2013-01-30T18:06:33.547
> 
> 标签：mongodb, pymongo

我找到文档的更新，更改了一些字段并更新：

```
newdocument = db.collection.findOne{"id_" : ObjectId("2bfc42346cb2f36c4f3fc6264c")}
newdocument.somefield = "New value" 
db.collection.update({"_id" : ObjectId("2bfc42346cb2f36c4f3fc6264c")}, newdocument) 
```

除非我`_id`从 newdocument 中删除该字段，否则什么都不做，即`del newdocument["_id"]`. 这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:45:08.380

id 是不可变的，但您编写的结构也不需要使用。简单地：

```
db.collection.update({"_id" : ObjectId("2bfc42346cb2f36c4f3fc6264c")}, {$set:{"somefield":"New value"}}) 
```

将工作

# c++ - SSE/SSE2 指令的打包和解包数据？

> ID：14610749
> 
> 赞同：2
> 
> 时间：2013-01-30T18:06:39.180
> 
> 标签：c++, sse2, sse

我正在尝试了解有关 SSE/SSE2 如何工作的更多信息：我知道 SSE/SSE2 使用大小为 128 位（16 字节）的 mmx 寄存器，并且通常这些寄存器有 4 个浮点单元格，我可以通过打包来存储我的浮点数. 在得到结果之前，我应该“解压它们”。

我的问题是：既然我是菜鸟，为什么要将这些值打包到 xmm 寄存器中，为什么要解压缩它们？这有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:19:56.247

您不必打包/解包它们。如果数字已经采用正确的格式，您只需使用合适的移动指令将它们加载到寄存器或内存操作数中，以将内存内容用作加法、减法等的第二个操作数。

有时会发生的情况是数据没有在计算中到达正确的位置，无法到达需要去的地方，这就是各种打包和解包指令派上用场的地方。

例如，假设您正在对此进行一些 3D 图形数学运算

```
struct coord { float X, Y, Z, W; }; 
```

但是为了提高计算效率，我们一次加载了四个这样的结构，`X`四个在一个寄存器中，`Y`四个在另一个寄存器中，等等。现在，例如，在我们乘以所有,`X`和`Y`values [一次四个] 使用变换矩阵来缩放/旋转对象，我们需要将其再次存储为 X、Y、Z 和 W，这是通过将适当的元素“解包”回它们对应的, , ,个体中来完成的条目。`Z``W``X``Y``Z``W`

当然，如果`coord`您存储了四个 、 和 值数组，而不是值数组，我们`X`可以将新值存储到数组中各自的槽中，而无需打包/解包这些值。`Y``Z``W`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:20:19.210

因为这些寄存器是 SSE 指令的输入/输出。

# c# - 如何将 AutoMapper 用于具有多个彼此派生的视图类的源类

> ID：14610754
> 
> 赞同：0
> 
> 时间：2013-01-30T18:06:44.980
> 
> 标签：c#, automapper, automapper-2

我的历史主要是 C/C++，但我最近被扔进了 c#/.net 世界。请温柔一点。

我正在尝试使用 automapper 将单个域实体类映射到 MULTIPLE 视图。所以，它是这样的：

```
class DomainEntity 
{      
}
class LimitedView
{
  view with limited set of properties from DomainEntity
}    
class DeeperView : LimitedView
{
  view with a few more items from DomainEntity
} 
```

到目前为止，我能够让它工作的唯一方法是将映射从基本视图类 (LimitedView) 复制/粘贴到 DeeperView 的映射类中，这伤害了我的感受。我也尝试过使用 .Include<>，但出现编译错误...

谢谢您的帮助！

# android - 服务中的 stopSelf() 不调用 onDestroy

> ID：14610756
> 
> 赞同：2
> 
> 时间：2013-01-30T18:06:48.483
> 
> 标签：android, service

我正在从这样的广播接收器开始服务：

```
Intent serviceIntent = new Intent(context, BarometricLogger.class);
context.startService(serviceIntent); 
```

当我完成工作后，我正在调用我的 cleanUp() 方法（它来自服务）：

```
private void cleanUp()
{
    sensorManager.unregisterListener(sensorListener);
    locationManager.removeUpdates(locationListener);
    isLocationSet = false;

    isClean = true;

    this.stopSelf();
} 
```

问题是它看起来不像服务已停止，因为 onDestroy() 没有被调用！我究竟做错了什么？

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:32:32.380

哎呀...这几乎是令人尴尬的。它没有停止，因为我不小心把它放入了一个永无止境的循环......：S

# json - Spring 3.2，Jackson2 ObjectMapper 配置

> ID：14610757
> 
> 赞同：1
> 
> 时间：2013-01-30T18:06:51.543
> 
> 标签：json, spring, serialization, spring-mvc, jackson

我在 ObjectMapper 的配置上有一个无法解决的问题。我需要将它配置为忽略那些没有我的 POJO 的参数......这么简单，但我配置了一千种不同的方式，但我无法让它工作。

我的 servlet.xml

```
<bean class="org.springframework.web.servlet.view.json.MappingJackson2JsonView" >
     <property name="objectMapper">
     <bean class="org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean">
         <property name="featuresToDisable">
           <array>
            <util:constant 
            static-field="com.fasterxml.jackson.databind.DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES"/>
          </array>
         </property>
      </bean>                  
    </property>  
</bean> 
```

我也尝试过扩展 ObjectMapper 类，但得到了相同的结果。我看到映射器配置正确，但我希望 MappingJackson2HttpMessageConverter 接收到 ObjectMapper 的不同实例。我不知道还能做什么让我忽略全局参数。

当我使用应忽略的参数（POJO 上不存在）发出请求时，请求中会出现语法错误。

我正在使用：Spring 3.2.0 杰克逊 2.1.2

最好的问候和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T23:22:14.830

尝试

```
<!-- 
     Implement a custom ObjectMapper and initialize the features you needed 
     eg. FAIL_ON_UNKNOWN_PROPERTIES 
-->
<bean id="jacksonObjectMapper" class="com.sample.CustomObjectMapper"/>

<!-- Replace Spring's default message converter -->
<mvc:annotation-driven>
  <mvc:message-converters>
    <ref bean="jacksonObjectMapper"/>
  </mvc:message-converters>
</mvc:annotation-driven> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-02T11:15:10.780

在 Spring 3.2.18.RELEASE 和 Jackson 2.7.5 上测试的解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

<bean id="jacksonObjectMapper"
    class="com.fasterxml.jackson.databind.ObjectMapper" />

<bean
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="jacksonObjectMapper" />
    <property name="targetMethod" value="configure" />
    <property name="arguments">
        <list>
            <value
                type="com.fasterxml.jackson.databind.DeserializationFeature">FAIL_ON_UNKNOWN_PROPERTIES</value>
            <value>false</value>
        </list>
    </property>
</bean>

<mvc:annotation-driven>
    <mvc:message-converters>
        <bean
            class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper" ref="jacksonObjectMapper" />
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

# javascript - 函数参数中私有变量的含义？

> ID：14610758
> 
> 赞同：0
> 
> 时间：2013-01-30T18:06:56.737
> 
> 标签：javascript, function, variables, arguments

我不完全确定我是否正确地问了这个问题，因为我对高级 Javascript 的技术理解有些欠缺。但是，假设我有一个功能。在此函数 ( `foo`) 中，传递了一个参数( )，该参数`bar`被创建为私有变量。

```
function foo(bar){
    console.log(bar);
}
foo("wassup"); 
```

我是否正确地认为即使未分配，也`bar`保留私有范围而不被声明？它也仍然是一个对象？所以不要这样做：

```
function foo(){
    var bar = {
        message: "wassup"
    };
    console.log(bar.message);
}
foo(); 
```

我可以这样做：

```
function foo(bar){
    bar = {
        message: "wassup"
    };
    console.log(bar.message);
}
foo(); 
```

以这种方式将参数用作对象有什么含义？一切似乎都检查过了，代码工作得很好，但我想知道是否有我不知道的后果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:19:23.327

这是一个闭包的例子，你的第二个函数 foo 是在 bar 上形成一个闭包。使用闭包进行编码会产生后果，但幸运的是，它们主要由引擎解决，并且通常不是编码人员关心的问题。实际上，形成闭包被认为是一种很好的数据封装形式，许多模式都严重依赖这种技术。

在您最后一次 foo 声明中，您正在“屏蔽”传入的参数。（假设您按照应有的方式将 var 放在前面）请注意，由于您没有在 bar 前面放置“var”，因此您对 foo 的第二次声明是将变量 bar 分配给全局名称空间，这可能是您的不是故意的。。

# php - php oop 和 jquery

> ID：14610765
> 
> 赞同：0
> 
> 时间：2013-01-30T18:07:18.487
> 
> 标签：php, jquery, oop

我是 PHP-OOP 的新手，想知道我的编码方式是否有问题。我希望我不会因为要求更好的编码方式而降低声誉。我有一个 index.php、product.php、see_category.php。

下面是我的product.php：

![在此处输入图像描述](../Images/bf22172f2697d757fd0317a8f269898b.png) ![在此处输入图像描述](../Images/5b29d24e60ee18310e5f4e600ee96a4e.png)

接下来这是我的 index.php：

![在此处输入图像描述](../Images/32d4e076ce36fe15c0d6a3fe944cc284.png)

最后这是我的see_category.php

![在此处输入图像描述](../Images/afb7a434fc00f15147be6b5b75cd2769.png)

我的问题是，这是正确的方法吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:22:39.373

看起来不错，只是您可能想调查的几点：您所做的通常称为 AHAH，而不是 AJAX（从服务器加载 html）。Post 通常用于进行更改、创建产品、更新产品等。其余的你应该坚持 GET。jquery 有一种非常简单的方式来执行 AHAH（这也删除了内联 js）：

```
$('#computers').on('click', function() {
    $(this).load('see_category.php?cat=computers');
}); 
```

您可能想查找 JSON，这样您就可以摆脱在服务器端的渲染，而是将对象提供给客户端，并通过 javascript 渲染它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:19:42.703

这是此类问题的错误位置，您需要在[codereview.stackexchange.com](https://codereview.stackexchange.com/)结束。然而; 我的意见是该`see_category.php`文件应该是类似的`product_controller.php`，它应该作为所有产品相关功能的控制器。您应该检查 post 变量的存在，并根据 post 变量中的内容采取相应的行动。

```
require_once('product.php');
$product = new Product(); 
```

如果有帖子请求，服务器只会在此文件中，无论帖子条件如何，都没有理由不实例化该类。

```
if($_POST): 
    switch($_POST):
        case 'category' : 
           echo $product->set_products_by_category($_POST['category'], TRUE);
           break;
    endswitch; 
endif; 
```

您会注意到在上面我没有生成表格，我只是在回显返回的内容，但是我添加了第二个参数并传入了 TRUE 值，现在让我们看看我们的函数。

```
public function set_products_by_category($category, $echo = FALSE){
   //your current code
   //after the while statement...
   if(TRUE === $echo):
       return $this->generate_table();
   endif;
} 
```

因为我们将 true 作为第二个参数传入，所以它会自动将表格返回给我们，我们会根据我们的`case`条件将其回显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:28:40.627

**MySQL 注入**
您正在这样做，而不是转义 mysql 字符。所以很容易注入代码。

```
"SELECT * FROM product WHERE product_category='" . $category . "'" 
```

上面的代码我可以做一个 POST，其中 $category 可以包含一个注入。请做一个[mysql_real_escape_string](http://php.net/manual/es/function.mysql-real-escape-string.php)

**Javascript**
在不同的文件中提供 Javascript，这样它对您的 SEO 和您的网站结构更好。当前您`jquery.js`位于根目录中。如果您为 Javascript 文件创建子目录。您对项目文件有了更多的了解。

**Num rows**
你在数自己，为什么不使用`$sth->num_rows`？

**产品类**
似乎您`Product`的产品实际上不是产品。它更像是一个团体持有者。也许称它为 ProductOverview 或更相关的东西。

**模型视图控制器**
目前你的产品类可以做所有事情。也许更多地研究构建网页的[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)方式。也许使用[Smarty](http://www.smarty.net/)模板来保持你的 HTML 分离。或不同的模板引擎。

**OOP**
你不想更面向对象，但你使用`FETCH_ASSOC`它返回一个数组而不是一个对象。为什么不使用`FETCH_OBJECT`？

**获取产品**
您正在使用 2 个功能几乎相同的结果。在使用 1 个函数而不是 2 个函数的地方放置一个可选参数可能会更好。

# javascript - 单元测试中的代码覆盖率

> ID：14610766
> 
> 赞同：1
> 
> 时间：2013-01-30T18:07:20.343
> 
> 标签：javascript, node.js, mocha.js, jscoverage

我正在尝试获取我的单元测试未涵盖的代码行。

我用 mocha 进行单元测试，它提供了一个报告器“json-cov”，它应该报告我没有执行多少行。

我有两个文件，第一个（foo.js）：

```
module.exports = function () {
    for (var result = 0, i = 0; i < arguments.length; i++) {
        result += arguments[i];
    }
    return result;
} 
```

第二个（test.js）：

```
var expect = require('expect.js'),
    jsc = require('jscoverage'),
    //foo = require('./foo.js');
    foo = jsc.require(module, './foo.js');

describe('foo', function () {
    it('should add all arguments', function () {
        expect(foo(1,1)).to.be(2);
    });
}); 
```

当我运行时，`mocha -R json-cov test.js`我得到以下结果：

```
{
  "instrumentation": "node-jscoverage",
  "sloc": 0,
  "hits": 0,
  "misses": 0,
  "coverage": 0,
  "files": [],
  "stats": {
    "suites": 1,
    "tests": 1,
    "passes": 1,
    "pending": 0,
    "failures": 0,
    "start": "2013-01-30T18:00:15.785Z",
    "end": "2013-01-30T18:00:15.787Z",
    "duration": 2
  },
  "tests": [
    {
      "title": "should add all arguments",
      "fullTitle": "foo should add all arguments",
      "duration": 1
    }
  ],
  "failures": [],
  "passes": [
    {
      "title": "should add all arguments",
      "fullTitle": "foo should add all arguments",
      "duration": 1
    }
  ]
} 
```

我做错了什么，所以 sloc、命中、未命中和覆盖率为 0？

我也尝试使用节点`require`而不是 jscs，但没有成功。

**编辑：**我刚刚尝试过`mocha -R json-cov test.js --coverage`，如果我使用 jscs 会导致错误`require`。当我使用节点时`require`，结果与上面相同。

**编辑：**我什至不能从控制台运行 jscoverage。我创建了一个文件夹 foo 和 foo-cov 并将我的 foo.js 复制到文件夹 foo 中。然后我跑了`jscoverage foo foo-cov`，这给了我一个错误`abs source path or abs dest path needed!`。我还尝试了绝对路径和其他一些排列参数的方法。没有成功。如何为 jscoverage 准备文件？

**编辑：**如果有任何相关性，我正在使用 Windows。

**编辑：**刚刚意识到不仅可以通过 npm 获得一个“jscoverage”包，还有一个“visionmedia-jscoverage”。试图安装那个失败。可能是因为 Windows 与 Linux。

**编辑：**让它工作。我现在没有使用节点包来准备代码，而是从控制台运行 jscoverage.exe（从[这里](http://siliconforks.com/jscoverage/)下载），然后使用`mocha -R html-cov test.js > coverage.html`. 现在我遇到了一些代码被转义的问题。所以我得到

```
<span class="k">var</span> foo <span class="k">=</span> <span class="k">{</span> 
```

代替

```
var foo = { 
```

突出显示。

**编辑：**标签被转义了，因为它们是通过使用以下代码的翡翠模板呈现的：`td.source= line.source`

更改它以`td.source!= line.source`解决我遇到的最后一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T10:06:22.327

可以通过使用 jscoverage 的“--no-highlight”选项来解决转义代码问题，而无需编辑 mocha 的玉模板，如下所示：

```
jscoverage --no-highlight foo foo-cov 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:15:00.743

按照我的编辑，看看我做了什么来解决这个问题。

# vba - 用于保存表单的 Word VBA 代码

> ID：14610768
> 
> 赞同：1
> 
> 时间：2013-01-30T18:07:25.383
> 
> 标签：vba, ms-word

我有 Word 调查文件，每个文件都包含由主题填写的表格。到目前为止，我已经通过另存为 txt 并选择“将表单数据另存为分隔文本文件”选项手动导出了表单数据。

我想以编程方式将给定目录中的所有 .doc 文档保存为分隔文本文件。或者，如果这太复杂，一次保存一个文件就足够了。新的 txt 文件必须与原始 .doc 文件同名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:53:43.817

感谢您的输入 Jan Schejbal。我已经用这段代码找到了解决方案，所以我将它分享给遇到同样问题的人。我从[这里得到帮助](http://www.vbaexpress.com/forum/forumdisplay.php?f=20)

```
Sub Save_Forms_Data()
    Application.ScreenUpdating = False
    Dim strFolder As String, strFile As String, wdDoc As Document, strDocName As String
    strFolder = CurDir
    If strFolder = "" Then Exit Sub
    strFile = Dir(strFolder & "\*.doc", vbNormal)
    While strFile <> ""
        Set wdDoc = Documents.Open(FileName:=strFolder & "\" & strFile,     AddToRecentFiles:=False, Visible:=False)
        With wdDoc
            strDocName = Left(.FullName, InStrRev(.FullName, ".")) & "txt"
            .SaveAs2 FileName:=strDocName, FileFormat:=wdFormatText,     AddToRecentFiles:=False, _
            SaveFormsData:=True, Encoding:=1252, InsertLineBreaks:=False, LineEnding:=wdCRLF
            .Close SaveChanges:=False
        End With
        strFile = Dir()
    Wend
    Set wdDoc = Nothing
    Application.ScreenUpdating = True
    Application.Quit SaveChanges:=wdDoNotSaveChanges
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:50:17.087

您可以[录制宏](http://office.microsoft.com/en-us/word-help/record-or-run-a-macro-HA010099769.aspx)，这意味着您开始录制，执行某些操作，然后停止录制，并自动生成所述操作的 VBA 代码。代码可能不是很干净，但它应该为您提供一个良好的开端，向您展示语法的外观以及您的操作需要哪些命令。对于某些事情（例如动态指定文件名），您将需要查阅文档，但如果您有任何通用语言的编程经验，一旦您拥有宏提供的“骨架”，这应该不会造成重大问题录音机。

您想要自动化的越多，您需要学习的 VBA 就越多。由于 VBA 真的不难，而且如果你不自动化它，你面前似乎有很多重复的工作，我建议你学习它并谷歌你需要什么。这样，您将在相似的时间范围内完成您的工作（或更少，特别是如果这不仅仅是一次性的事情），下次您将有一个宏来做，它会不那么无聊，而且您会学了一点VBA。

# jquery - 打开应用程序（ios，PushPlugin）时 tokenHandler() 不会触发，必须最小化应用程序然后重新打开它以触发事件

> ID：14610769
> 
> 赞同：0
> 
> 时间：2013-01-30T18:07:25.817
> 
> 标签：jquery, ios, cordova, push-notification

我正在尝试为 iOS 实施新的 PhoneGap PushPlugin，但无法弄清楚为什么我会遇到这个问题。

应用加载时，成功调用 OnDeviceReadyPush 函数：

```
var pushNotification;

function onDeviceReadyPush() {
$("#app-status-ul").append('<li>deviceready event received</li>');

pushNotification = window.plugins.pushNotification;
if (device.platform == 'android' || device.platform == 'Android') {
    pushNotification.register(successHandler, errorHandler, { "senderID":     "661780372179", "ecb": "onNotificationGCM" });
} else {
    pushNotification.register(tokenHandler, errorHandler, { "badge": "true", "sound":     "true", "alert": "true", "ecb": "onNotificationAPN" });
}
}

document.addEventListener('deviceready', onDeviceReadyPush, true); 
```

假设要启动 tokenHandler 函数：

```
function tokenHandler(result) {
$("#app-status-ul").append('<li>token: ' + result + '</li>');
// Your iOS push server needs to know the token before it can push to this device
// here is where you might want to send it the token for later use.

$.get("", { "deviceid": result}, processResult);

function processResult(data, textStatus) {
    alert(data);
}
} 
```

直到我最小化应用程序然后再回到它，它才起作用。然后它触发 tokenHandler 事件。

请帮忙，我一直在看这个，尝试了我能想到的一切两天，我快疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T00:18:58.703

我使用了错误的科尔多瓦文件。在将所有内容更新到当时的最新版本后，它开始按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:56:13.243

你有没有试过这个：

`document.addEventListener('deviceready', onDeviceReadyPush, FALSE);`

# facebook - fosfacebook 捆绑包无法从 facebook 获取用户信息

> ID：14610770
> 
> 赞同：1
> 
> 时间：2013-01-30T18:07:26.550
> 
> 标签：facebook, symfony, symfony-2.1, fosuserbundle, fosfacebookbundle

我正在为一个项目使用 Symfony 2.1，并且我正在使用与 FOSUser 捆绑包集成的 FOSFacebook 捆绑包。当用户登录我的应用程序时，没有检索到任何信息！我的意思是这条线例外：

```
namespace Acmes\UserBundle\Security\User\Provider;
class FacebookProvider implements UserProviderInterface {
//...
public function loadUserByUsername($username) {
 //...
 try {
       $fbdata = $this->facebook->api('/me');
   } catch (FacebookApiException $e) {
       $fbdata = null;
     }
 //... 
```

当用户登录时，按钮变为“注销”，但我收到错误：

```
"The user is not authenticated on facebook" 
```

这意味着 $fbdata 为空并且没有从 facebook 应用程序返回的信息。

任何解决方案？谢谢！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T08:05:10.790

我遇到了和你一样的问题。在您安装 fosuserbundle 和 fosfacebook bundle 的过程中一定会出现问题。使用以下教程仔细检查您的设置。 [https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)

# javascript - 加载图像后重定向

> ID：14610771
> 
> 赞同：1
> 
> 时间：2013-01-30T18:07:31.840
> 
> 标签：javascript, redirect, wait

所以我最近一直在开发一个网站，问题是每个页面的背景都是图像，因此，在较慢的连接上（这是某些目标受众的情况），图像在下载时会逐渐加载，到解决这个问题我正在尝试制作一个执行以下操作的预加载页面：

*   加载图像
*   加载完成后，将用户重定向到请求的页面

    ```
    <script type="text/javascript">
    <!--//--><![CDATA[//><!--
        var images = new Array()
        var count=0;
        function preload() {
            for (i = 0; i < preload.arguments.length; i++) {
                images[i] = new Image()
                images[i].src = preload.arguments[i]
            }
        if(count==4) {
        window.location = "index.html";
        }
        }
        preload(
            "backgrounds/bg1.jpg",
            "backgrounds/bg2.jpg",
            "backgrounds/bg3.jpg",
            "backgrounds/bg4.jpg"
        )
    //--><!]]> 
    ```

问题是它直接重定向（我假设它只是开始下载图像，然后直接将计数器变量加一，很快达到 4 并且没有给图像下载时间。

有什么想法可以在图像完成下载时向我发出信号，或者仅在完成下载图像后才执行重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:20:49.647

你需要等待`load`事件。这很简单：

```
function preload(images, timeout, cb) {
  var cbFired = false,
      remaining = images.length,
      timer = null;

  function imageDone() {
    remaining--;

    if(remaining === 0 && !cbFired) {
      cbFired = true;
      clearTimeout(timer);
      cb();
    }
  }

  function timerExpired() {
    if(cbFired)
      return;

    cbFired = true;
    cb();
  }

  for(var i = 0; i < images.length; i++) {
    var img = new Image();
    img.onload = imageDone;
    img.onerror = imageDone;
    img.src = images[i];
  }

  timer = setTimeout(timerExpired, timeout);
} 
```

您需要检查一些事情，以免用户卡住：

*   您需要等待两者`load`，`error`以便在图像无法加载时页面不会卡住。
*   您应该设置最大超时。
*   此外，在您的代码中，`i`是一个全局变量（没有`var`声明）。

以下是如何使用它：

```
var images = [ "backgrounds/bg1.jpg",
    "backgrounds/bg2.jpg",
    "backgrounds/bg3.jpg",
    "backgrounds/bg4.jpg"];

preload(images, 10000 /* 10s */, function () {
  window.location = 'next_page';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:18:10.773

修改您的预加载器，使其绑定到 Image 对象的“onload”事件，并在触发所有回调时重定向（以下未经测试的示例代码）：

```
var images = new Array()
var count = 0;
function preload() {
    var numImages = preload.arguments.length
    for (i = 0; i < numImages; i++) {
        images[i] = new Image();
        images[i].onload = doneLoading; // See function below.
        images[i].src = preload.arguments[i];
    }
    function doneLoading() {
        if (++count >= numImages) {
            window.location = "index.html";
        }
    }
}
preload(
    "backgrounds/bg1.jpg",
    "backgrounds/bg2.jpg",
    "backgrounds/bg3.jpg",
    "backgrounds/bg4.jpg"
) 
```

# javascript - 变量操作

> ID：14610773
> 
> 赞同：0
> 
> 时间：2013-01-30T18:07:44.727
> 
> 标签：javascript

我有以下示例代码：

```
type = 'Foo';

test = {
    type: {
        'fooVal': 'bar'
    }
}

alert(test.type.fooVal); // Bar
alert(test.Foo.fooVal); // TypeError: teste.Foo is undefined 
```

我怎样才能让第二个警报起作用？

我试过了：

```
test = {
    '"' + type + '"': {
        'fooVal': 'bar'
    }
} 
```

但不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:10:06.310

使用括号符号代替：

```
type = 'Foo';
test = {};
test[type] = {fooVal: 'bar'};
alert(test.Foo.fooVal); 
```

通过对象表示法进行分配时，您不能将变量用作键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:10:22.830

如果键是由变量定义的，则不能使用对象文字。

```
type = 'Foo';

test = {};
test[type] = {
  fooVal: 'Bar'
};

alert(test.Foo.fooVal);  // Bar 
```

`[]`on objects 允许您动态访问属性，以进行设置或获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:10:31.210

你没有一个叫做的属性，`Foo`你有一个叫做 的属性`type`。你需要做这样的事情：

```
type = 'Foo';

test = {};
test[type] = {
    'fooVal': 'bar'
};

alert(test.type.fooVal); // Bar
alert(test.Foo.fooVal); // TypeError: teste.Foo is undefined 
```

# sql - 如何将 SQL 字符串解析为 rails Arel 对象

> ID：14610776
> 
> 赞同：5
> 
> 时间：2013-01-30T18:07:50.713
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, arel

在编写了一些大型而复杂的 SQL 语句之后，我曾问[过如何使用 Rails 以更好的方式做到这一点](https://stackoverflow.com/questions/13885040/better-way-to-write-large-sqls-inside-rails-models)。但是我最终再次使用了 Arel，因为如果我调用“find_by_sql”，我无法嵌套更多条件。

```
Questions.find_by_sql(HUGE_SQL).by_filter(:popular).order('created_at').limit(5) 
```

我的目标是：

*   在单独的文件中组织 sql
*   将这些字符串 sql 转换为 Arel 对象
*   将此 arel 对象与常见的可重用条件嵌套，例如“限制、订单、..”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T04:15:13.297

解决方案是使用神奇的[scuttle.io](http://www.scuttle.io/)将复杂的 SQL 查询转换为 Arel。然后，您可以为查询的每个部分创建单独的方法，并且仍然可以将它们组合在一起。[此演示文稿](http://www.slideshare.net/camerondutro)中有更多详细信息。

# vb.net - 无法创建新的 Excel.Application

> ID：14610779
> 
> 赞同：0
> 
> 时间：2013-01-30T18:07:55.920
> 
> 标签：vb.net, excel, interop, ms-office, excel-interop

我有这个类，我想在其中创建一个新的 Excel 应用程序以将一些数据导出到 Excel 工作簿，但我似乎无法创建应用程序本身。

我已经将 Microsoft.Office.Interop.Excel.dll 引用添加到 Bin 文件夹：

![在此处输入图像描述](../Images/4c459ec9850bfdbaa3564ad898c13e29.png)

并尝试添加这样的代码：

```
Imports Microsoft.VisualBasic
Imports Excel = Microsoft.Office.Interop.Excel

Public Class ExcelExport

    Public Sub Export()

        Dim excel As New Excel.Application

    End Sub

End Class 
```

但是当我这样做时，我找不到应用程序：

![在此处输入图像描述](../Images/fa1f908d0d8617e4a75226887521c13b.png)

任何想法为什么它不起作用？VS 2008、VB.NET、.NET 3.5、Office 2007、Windows 7 Ultimate x64

# python - python可以访问google chrome webSQL db吗

> ID：14610781
> 
> 赞同：1
> 
> 时间：2013-01-30T18:08:08.407
> 
> 标签：python, sqlite, google-chrome, web-sql

我有一个本地 Web 客户端，它使用 webSQL 来存储其数据客户端。（是的，我知道它已被弃用）。

我还有一个 python 脚本，它现在使用驱动程序生成报告并从 mdb 文件中获取其数据。

我想知道是否可以通过 python 从谷歌浏览器的 webSQL 数据库中获取我的数据。

我不确定如何从 python 脚本调用 google chrome 中的一个 db 文件，或者是否有可能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:03:30.420

好的，所以我的同事想通了。

在 Windows 上，您可以访问：

```
C:\Users\<UserName>\AppData\Local\Google\Chrome\User Data\Default\databases 
```

这里有一堆数据库，用于使用 sqlite 的不同网站。

然后 python 脚本就这么简单：

```
import sqlite3

conn = sqlite3.connect(<dbFile>)
cursor = conn.cursor()

print "\nHere's a listing of all the records in the table:\n"
for row in cursor.execute("SELECT * FROM <TableName>"):
    print row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:27:17.010

我希望我正确理解了您的问题：Chrome UserData 文件夹中的有趣文件（至少在 Windows 中是这样称呼的）是 JSON 文件或 SQLite 数据库文件。您可以使用Python 标准库中的[sqlite3 模块](http://docs.python.org/2/library/sqlite3.html)访问后者。但是那里的自述文件指出：

```
Google Chrome settings and storage represent user-selected preferences and
information and MUST not be extracted, overwritten or modified except through
Google Chrome defined APIs. 
```

# jquery - 响应式剪切和调整图像大小

> ID：14610782
> 
> 赞同：0
> 
> 时间：2013-01-30T18:08:09.203
> 
> 标签：jquery, css

我正在尝试实现类似[http://jsfiddle.net/Zex4S/1/](http://jsfiddle.net/Zex4S/1/)这样的东西，所以当你调整窗口大小时，它的图像会保持它的纵横比，但同时，我不想要这个的高度要更改的图像，它必须保持不变，并在必要时放大。

我认为它涉及裁剪顶部和左边距，但我无法让它工作

像这样的东西`$this.css('margin-left', ($window.width() - this.width) / 2);`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:24:28.793

我假设您的意思是您希望图像保持其自然宽度和高度，但如果窗口宽度小于图像宽度，则在其容器内保持“居中”。

你可以使用这样的东西来做到这[**一点**](http://jsfiddle.net/Zex4S/25/)：

```
var $img = $('img'),
    iw, ww;

$img.load(function() {
    iw = this.width; // save the natural width
});

$img.prop('complete') && $img.trigger('load'); // make sure load() is triggered

$(window).resize(function () {
    ww = $(this).width();
    if ( iw > ww ) { // if window width is less than image width, adjust margins
        $img.css('marginLeft', (iw-ww)/-2);
    }
}).trigger('resize'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:17:22.043

如果您不介意将 img 标签换成带有背景图像的 div，您可以使用 100% CSS。只需将图像 url 添加为内联样式和 bammo，成功！

如果您需要 dom 中的 img，您可以始终将其保存在 .image 容器中，将其调整为容器的全尺寸，但使其透明。只是一个想法。

jsfiddle：http: [//jsfiddle.net/JTV66/](http://jsfiddle.net/JTV66/)

HTML：

```
<div class="image" style="background-image: url(http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg)"></div> 
```

CSS：

```
body, html{
    width:100%;
    height:100%;
}

.image{
    width:100%;
    height:100%;
    background-size:contain;
    background-position:center center;
    background-repeat:no-repeat;
} 
```

# iphone - iPhone短文件播放

> ID：14610786
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:08:22.350
> 
> 标签：iphone, audio, ios6, avqueueplayer

我想知道是否可以在 iPhone 上播放几个小音频文件。我创建了一个 25µs 的声音文件，但无法在模拟器或设备上播放。所以我创建了几个 25µs、50µs 和 100µs 的文件，但即使我使用`NSArray`或`NSMutableArray`使用 ÀVQueuePlayer`，我也无法播放它！

有人知道播放声音的最短时间，或者我正在做的事情是否可行？

谢谢您的回答

PS：我的项目是在音频上与其他设备进行通信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:37:09.743

是什么让你觉得它没有被播放？25µs 是百万分之一秒！我建议你开始播放一个可以听到的剪辑，然后将其长度减半并重复直到它变得听不见。您是否打算让其他设备收听？你可以让你的播放/收听循环与有声剪辑一起工作，然后向下钻取。

# php - 如何在codeigniter中调整图像大小

> ID：14610787
> 
> 赞同：0
> 
> 时间：2013-01-30T18:08:23.150
> 
> 标签：php, codeigniter

我正在使用 codeigniter 上传库，我想调整图像大小。但是当我运行代码时，它会保存图像，但不会调整图像大小。这是我的php代码：

```
 $this->load->library('upload');

                 $config['upload_path'] = APPPATH .'../images/student';
                 $config['allowed_types'] = 'gif|jpeg|jpg|png';
                 $config['max_size']      = '2000';
                 $config['maintain_ratio']= FALSE;
                 $config['master_dim']    = 'auto';
                 $config['width']         = 128;
                 $config['height']        = 128;
                 $config['overwrite']     = FALSE;
                 //initialize
                 $this->upload->initialize($config); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:15:19.217

看起来您需要使用以下内容：

```
$config['max_width']  = '128';
$config['max_height']  = '128'; 
```

注意`max_width`不是`width`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:13:11.120

[正如@relentless](https://stackoverflow.com/questions/14610787/how-to-resize-image-in-codeigniter#comment20402158_14610890)所指出的，您需要使用[Image Manipulation Class](http://ellislab.com/codeigniter/user-guide/libraries/image_lib.html)。上传类只是帮助你上传图片，而不是调整它的大小。

宽度和高度配置用于限制您可以上传的图像的大小。

# android - android edittext addchangelistener

> ID：14610788
> 
> 赞同：0
> 
> 时间：2013-01-30T18:08:28.033
> 
> 标签：android, android-edittext

我有一个应用程序要求用户输入他/她吃的量。我使用的输入字段是 EditText。我想要发生的是，当编辑文本发生变化时，它应该计算（即，将数量乘以它的卡路里，比如 2 块面包等于 8 卡路里。所以答案应该是 16 卡路里。）

但我无法让它工作。请看看我尝试过的内容：

**更新：**

```
public class Bread_White extends Activity implements OnClickListener, OnItemSelectedListener {

Spinner sp;
Button calories, save, back, home;
String selected, strCalories;
TextView tv;
EditText etAmount;

int total;

RadioGroup rgMeal;
//RadioButton breakfast, ms, lunch, as, dinner, es;

String[] classes = {
        "Cornbread",
        "French Bread",
        "French Toast",
        "French Toast, low fat",
        "Italian Bread",
        "Wheat Bread",
        "Wheat Bread, low calories",
        "Wheat Bread, whole wheat"
};

//put how much calorie each food item has in this array
int[] intCalories = {188, 185, 126, 149, 81, 66, 46, 89};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.food_vegetable);

    initControls();

}

private void initControls() {
    // TODO Auto-generated method stub

    // RadioGroup 
    rgMeal = (RadioGroup) findViewById (R.id.rgSelectMeal);

    sp = (Spinner) findViewById (R.id.spFoodVegetable);
    save = (Button) findViewById (R.id.btFoodVegetableSave);
    calories = (Button) findViewById (R.id.btFoodVegetableCalories);
    back = (Button) findViewById (R.id.tabs_back);
    home = (Button) findViewById (R.id.tabs_home);
    tv = (TextView) findViewById (R.id.txtMenuHeader);
    etAmount = (EditText) findViewById (R.id.etAmount);
    tv.setText(R.string.whitebread);

    ArrayAdapter<String> array =
            new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, classes);
    sp.setAdapter(array);
    sp.setOnItemSelectedListener(this);

    back.setOnClickListener(this);
    home.setOnClickListener(this);
    save.setOnClickListener(this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub

    switch( v.getId() ){
    case R.id.btFoodVegetableSave:
        String mealname = selected;

        String serving = calories.getText().toString();
        int i = Integer.parseInt(serving.replaceAll("[\\D]", ""));

        //int amount = Integer.valueOf(etAmount.getText().toString());
        //int answer  = amount * i;
        String strAnswer = String.valueOf(i);
        //calories.setText(strAnswer);

        SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
        String strDate = sdf.format(new Date());

        if ( ( mealname.isEmpty() || strAnswer.isEmpty() ) ){

            // call for custom toast
            viewErrorToast();
        }

        else {

        boolean didItWork = true;

        try{

            int checkedRadioButton = rgMeal.getCheckedRadioButtonId();

            switch( checkedRadioButton ){
            case R.id.rbBreakfast:
                BreakFastLog bfLog = new BreakFastLog(Bread_White.this);
                bfLog.open();
                bfLog.createEntry(mealname, strAnswer, strDate);
                bfLog.close();
                break;
            case R.id.rbMorningSnack:
                MorningSnackLog msLog = new MorningSnackLog(Bread_White.this);
                msLog.open();
                msLog.createEntry(mealname, strAnswer, strDate);
                msLog.close();
                break;
            case R.id.rbLunch:
                LunchLog lunchLog = new LunchLog(Bread_White.this);
                lunchLog.open();
                lunchLog.createEntry(mealname, strAnswer, strDate);
                lunchLog.close();
                break;
            case R.id.rbAfternoonSnack:
                AfternoonSnackLog asLog = new AfternoonSnackLog(Bread_White.this);
                asLog.open();
                asLog.createEntry(mealname, strAnswer, strDate);
                asLog.close();
                break;
            case R.id.rbDinner:
                DinnerLog dinnerLog = new DinnerLog(Bread_White.this);
                dinnerLog.open();
                dinnerLog.createEntry(mealname, strAnswer, strDate);
                dinnerLog.close();
                break;
            case R.id.rbEveningSnack:
                EveningSnackLog esLog = new EveningSnackLog(Bread_White.this);
                esLog.open();
                esLog.createEntry(mealname, strAnswer, strDate);
                esLog.close();
                break;
            }

            }
            catch(Exception e){
                didItWork = false;
                viewErrorToast();
            }finally{
                if (didItWork){
                    viewBMRSavedToast();
                }

            }
        } // end of if else statement
        break;
    case R.id.tabs_back:
        finish();
        break;
    case R.id.tabs_home:
        Intent home = new Intent(this, IHealthFirstActivity.class);
        home.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(home); 
        break;
    }
}

private void viewBMRSavedToast() {
    // TODO Auto-generated method stub
    Toast.makeText(getBaseContext(), "Successful", Toast.LENGTH_SHORT).show();
}

private void viewErrorToast() {
    // TODO Auto-generated method stub
    Toast.makeText(getBaseContext(), "Error", Toast.LENGTH_SHORT).show();
}

public void onItemSelected(AdapterView<?> parent, View arg1, int position,
        long arg3) {
    // TODO Auto-generated method stub
    selected = parent.getItemAtPosition(position).toString();

    int amount = Integer.valueOf(etAmount.getText().toString());
    total = amount * intCalories[position];
    calories.setText(strCalories);

    TextWatcher watcher = new TextWatcher(){
        public void afterTextChanged(Editable s) {
            //your business logic after text is changed
             strCalories = total + " calories";
             calories.setText(strCalories);
        }
        public void beforeTextChanged(CharSequence s, int start, int count, int after){
            //your business logic before text is changed
        }

        public void onTextChanged(CharSequence s, int start, int before, int count){
            //your business logic while text has changed
        }
    };

    etAmount.addTextChangedListener(watcher);

}

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

}

请帮助解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:59:55.500

卡路里视图在哪里定义？此外，您可能希望进入决赛。你能改写一下这个问题吗？我找不到那个问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:30:39.963

**将selectedPos**声明为类级别变量

```
int selectedPos = 0;

public void afterTextChanged(Editable s) {
        //your business logic after text is changed

         int cal = intCalories[selectedPos];
         total = (Integer.parseInt(s.toString)) * cal;

         calories.setText(total + " calories");
    } 
```

**在定义的变量中设置微调器选择的位置。**

快乐编码:)

# activemq - 如何使用 mule 流在 ActiveMQ 中检查待处理消息的数量或所有消息是否已处理

> ID：14610789
> 
> 赞同：0
> 
> 时间：2013-01-30T18:08:28.407
> 
> 标签：activemq, mule

如果队列中的所有消息都已处理，我需要停止 ActiveMQ 连接器。这需要在 Mule 流程中完成。

如下所示，我有两个连接器，一个用于读取，另一个用于写入 vci.staging.queue。我想检查队列中是否处理了所有消息，然后禁用阅读器连接器。

下面的脚本使用来自 muleContext 的 client.request 使用队列名称和读取器或写入器连接器总是为我返回“null”。

有什么方法可以获取队列中待处理消息的数量或检查是否所有消息都已处理，以便可以禁用连接器？

```
<jms:activemq-connector name="jmsConnectorStagingQReaderNormal"
                            brokerURL="${mule.activemq.broker.read.normal.url}" 
                            specification="1.1"
                            maxRedelivery="-1"
                            persistentDelivery="true"
                            numberOfConcurrentTransactedReceivers="${mule.activemq.concurrent.receivers}"
                            connectionFactory-ref="connectionFactory"
                            disableTemporaryReplyToDestinations="false">
        </jms:activemq-connector>

<jms:activemq-connector name="jmsConnectorStagingQWriter"
                            brokerURL="${mule.activemq.broker.write.url}" 
                            specification="1.1"
                            maxRedelivery="-1"
                            persistentDelivery="true"
                            numberOfConcurrentTransactedReceivers="${mule.activemq.concurrent.receivers}"
                            connectionFactory-ref="connectionFactory"
                            disableTemporaryReplyToDestinations="false">
        </jms:activemq-connector>

<script:component>
<script:script engine="groovy">
        if(muleContext.getRegistry().lookupConnector('jmsConnectorStagingQReaderNormal').isStarted()) {
            if(muleContext.client.request("jms://vci.staging.queue?connector= jmsConnectorStagingQReaderNormal ", 5000) == null) {
                muleContext.getRegistry().lookupConnector('jmsConnectorStagingQReaderNormal').stop()
             }
        }                               
        return payload
        </script:script>
</script:component> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:28:01.720

使用[QueueBrowser](http://docs.oracle.com/javaee/5/api/index.html?javax/jms/QueueBrowser.html)可以查看 JMS 队列而不使用其消息。

为了这：

*   创建一个自定义组件，
*   `jms:activemq-connector`让 Spring在组件中注入你的，
*   调用`getSession(false, false)`它以获取活动的 JMS `Session`，
*   调用`createBrowser(Queue queue)`（`Session`您可以`Queue`使用`Session.createQueue(..)`.

# html - 操作 soundcloud iframe 小部件

> ID：14610797
> 
> 赞同：0
> 
> 时间：2013-01-30T18:08:54.553
> 
> 标签：html, iframe, soundcloud

我正在使用 iframe 将 soundcloud 加载到我的网站中。是否可以编辑 soundcloud iframe 的样式。例子。将 iframe 的类设置为

> 可见性：隐藏

或者有另一种方法来操作这个 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:14:51.413

您的 iframe 独立于[soundcloud api](http://developers.soundcloud.com/docs/widget#)。您可以随意设置 iframe 样式，例如[在这里查看](https://stackoverflow.com/a/217833/390330)。您基本上可以使用 style 属性设置 iframe 内联样式。如果要使用 CSS 样式表，则需要使用 <link> 等将其导入页面。

# svg - SVG动画时间/平铺线并重复所有

> ID：14610798
> 
> 赞同：0
> 
> 时间：2013-01-30T18:09:03.223
> 
> 标签：svg, timeline

我想在我的 svg 中制作复杂的动画时间线。例如，我有 3 个矩形，我想按顺序显示它们而不是重新启动动画。这里是： http: [//jsbin.com/opuguh/3/edit](http://jsbin.com/opuguh/3/edit) 更复杂，我的最终目标是像这样显示四边形

```
seconds    0        1        2   
quad 1  inline   inline    none  
quad 2   none    inline   inline 
quad 3  inline    none    inline 
```

所以总是显示 2 个四边形，每秒钟其中一个消失一秒钟。但它们不应该相互依赖。有没有办法做到这一点？

如果我换一种说法：

*   quad1：从 0s 开始，显示 2s
*   quad2：1s开始，显示2s
*   quad3：2s开始，显示1s
*   quad3：从 0s 开始，显示 1s
*   当时间达到 4s 时重复一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:43:32.930

我自己找到了答案。技巧是使用`keyTimes`, 将其设置为`"0;{start};{end};1"`, where`{start}`和`{end}`是当您想要显示或隐藏元素时的时间分数 (timeInSeconds/duration)。这样，它们都是独立的，有点像时间线:)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Svg animation</title>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="100">
  <rect x="10" y="10" width="50" height="50" fill="green">
  <animate
      attributeName="display"
      values="none;inline;none;none"
      keyTimes="0;0;0.4;1"
      dur="3s"
      begin="0s" repeatCount="indefinite" />
  </rect>
  <rect x="50" y="50" width="50" height="50" fill="red"  >
  <animate
      attributeName="display"
      values="none;inline;none;none"
      keyTimes="0;0.3333;0.666;1"
      dur="3s"
      begin="0s" repeatCount="indefinite" />
  </rect>
  <rect x="90" y="10" width="50" height="50" fill="blue" >
  <animate
      attributeName="display"
      values="none;inline;none;none"
      keyTimes="0;0.6666;1;1"
      dur="3s"
      begin="0s" repeatCount="indefinite" />
  </rect>
</svg> 
```

# jmeter - 运行大量线程时出现 JMeter 问题

> ID：14610801
> 
> 赞同：11
> 
> 时间：2013-01-30T18:09:26.440
> 
> 标签：jmeter

我正在使用 Apache 的 Jmeter 进行测试，我只是访问我公司网站的一页并调高用户数量直到达到阈值，问题是当我达到大约 3000 个线程时，JMeter 并没有运行所有他们。查看聚合图，它只运行大约 2,536 个（这个数字会有所不同，但总是在这里）。

部分运行在日志中出现以下异常：

```
01:16 ERROR - jmeter.JMeter: Uncaught exception: 
java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Unknown Source)
    at org.apache.jmeter.threads.ThreadGroup.start(ThreadGroup.java:293)
    at org.apache.jmeter.engine.StandardJMeterEngine.startThreadGroup(StandardJMeterEngine.java:476)
    at org.apache.jmeter.engine.StandardJMeterEngine.run(StandardJMeterEngine.java:395)
    at java.lang.Thread.run(Unknown Source) 
```

这种行为是一致的。此外，JMeter 有一次在中间崩溃，输出一个文件，上面写着：

```
# There is insufficient memory for the Java Runtime Environment to continue.
# Native memory allocation (malloc) failed to allocate 32756 bytes for ChunkPool::allocate
# Possible reasons:
#   The system is out of physical RAM or swap space
#   In 32 bit mode, the process size limit was hit
# Possible solutions:
#   Reduce memory load on the system
#   Increase physical memory or swap space
#   Check if swap backing store is full
#   Use 64 bit Java on a 64 bit OS
#   Decrease Java heap size (-Xmx/-Xms)
#   Decrease number of Java threads
#   Decrease Java thread stack sizes (-Xss)
#   Set larger code cache with -XX:ReservedCodeCacheSize=
# This output file may be truncated or incomplete.
#
#  Out of Memory Error (allocation.cpp:211), pid=10748, tid=11652
#
# JRE version: 6.0_31-b05
# Java VM: Java HotSpot(TM) Client VM (20.6-b01 mixed mode, sharing windows-x86 ) 
```

有任何想法吗？
我尝试在 jmeter.bat 中更改堆大小，但这似乎根本没有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T18:21:46.507

JVM 根本无法[运行这么多线程](https://stackoverflow.com/questions/763579)。而且即使是这样，JMeter 也会消耗大量的 CPU 资源来纯粹切换上下文。换句话说，在某些情况下，您不是在对 Web 应用程序进行基准测试，而是对托管 JMeter 的客户端计算机进行基准测试。

你有几个选择：

*   尝试 JVM 选项，例如将默认值*减小*`-Xss512K`到更小的值

*   在集群中运行[JMeter](http://jmeter.apache.org/usermanual/remote-test.html)

*   使用采取完全不同方法的工具，例如[加特林](http://gatling-tool.org/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T08:20:19.607

我遇到了类似的问题，并将 jmeter.bat 中的堆大小增加到 1024M，从而解决了这个问题。

```
set HEAP=-Xms1024m -Xmx1024m 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T23:08:44.607

对于 JVM，如果您阅读 hprof，它会为您提供一些解决方案，其中包括：

*   切换到 64 位 jvm ( > 6_u25)

*   有了这个，你将能够分配更多的堆 (-Xmx) ，确保你有这个 RAM

*   减少 Xss：

> -Xss256k

然后对于 JMeter，遵循最佳实践：

*   [http://jmeter.apache.org/usermanual/best-practices.html](http://jmeter.apache.org/usermanual/best-practices.html)
*   [http://www.ubik-ingenierie.com/blog/jmeter_performance_tuning_tips/](http://www.ubik-ingenierie.com/blog/jmeter_performance_tuning_tips/)

**最后确保您使用最新的 JMeter 版本。**

*   最好使用linux操作系统

*   调整 TCP 堆栈，限制

成功将取决于您的机器功率（CPU 和内存）和您的测试计划。

如果这还不够（对于 3000 个线程应该没问题），您可能需要使用分布式测试

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-17T13:48:31.570

在 jmeter.bat 中增加堆大小可以正常工作 set HEAP=-Xms1024m -Xmx1024m

或者，如果您使用 jmeter.sh，您可以执行以下操作：JVM_ARGS="-Xms512m -Xmx1024m" jmeter.sh 等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-26T22:03:33.040

我遇到了同样的问题，唯一对我有帮助的解决方案是：[https ://stackoverflow.com/a/26190804/5796780](https://stackoverflow.com/a/26190804/5796780)

linux上正确的100k线程：

```
ulimit -s  256
ulimit -i  120000
echo 120000 > /proc/sys/kernel/threads-max
echo 600000 > /proc/sys/vm/max_map_count
echo 200000 > /proc/sys/kernel/pid_max 
```

如果您没有 root 访问权限：

```
echo 200000 | sudo dd of=/proc/sys/kernel/pid_max 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-08-24T13:18:47.827

增加`Xms`et`Xmx`堆大小后，我不得不让我的 Java 在 64 位模式下运行。在`jmeter.bat`：

```
set JM_LAUNCH=java.exe -d64 
```

显然，您需要运行 64 位操作系统并已安装 Java 64 位（请参阅[https://www.java.com/en/download/manual.jsp](https://www.java.com/en/download/manual.jsp)）

# css - 在 :before Pseudo Class 中添加一个 ID

> ID：14610803
> 
> 赞同：4
> 
> 时间：2013-01-30T18:09:32.803
> 
> 标签：css, pseudo-element

是否可以在 :before 伪类的内容中添加类或 ID？我知道这不起作用，但类似：

```
#menu {
    height: 100px;
    width: 100px;
}
#menu:before {
    class: "just-before-menu";
}
.just-before-menu {
    background: green;
    height: 100px;
    width: 100px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:55:54.023

> :before 选择器在被选元素的内容之前插入内容。
> 
> 使用 content 属性指定要插入的内容。

```
#menu:before {
    content: '';
    background: green;
    height: 100px;
    width: 100px;
} 
```

[http://www.w3schools.com/cssref/sel_before.asp](http://www.w3schools.com/cssref/sel_before.asp)

# elasticsearch - ElasticSerach - 列表长度的统计方面

> ID：14610811
> 
> 赞同：3
> 
> 时间：2013-01-30T18:09:55.887
> 
> 标签：elasticsearch

我有以下示例 mappipng：

```
{
    “书” ： {
        “特性” ： {
                        “作者”：{“类型”：“字符串”}，
                        “标题”：{“类型”：“字符串”}，
                        “评论”：{
                                “特性” ： {
                                        “网址”：{“类型”：“字符串”}，
                                        “分数”：{“类型”：“整数”}
                                }
                        },
                        “章节”：{
                                “include_in_root”：1，
                                “类型”：“嵌套”，
                                “特性” ： {
                                        “名称”：{“类型”：“字符串”}
                                }
                        }
                }
        }
}

```

我想了解评论数量的一个方面——即“评论”数组的长度。例如，我需要的口头结果是：“100 个文档，10 个评论，20 个文档，5 个评论，......”

我正在尝试以下统计方面：

```
{
    “询问” ： {
        “match_all”：{}
    },
    “方面”：{
        “stat1”：{
            “统计”：{“脚本”：“doc['reviews.score'].values.size()”}
        }
    }
}

```

但它一直失败：

```
{
  “错误”：“SearchPhaseExecutionException[未能执行阶段 [query_fetch]，完全失败；shardFailures {[mDsNfjLhRIyPObaOcxQo2w][facettest][0]:QueryPhaseExecutionException[[facettest][0]:query[ConstantScore(NotDeleted(cache(org.elasticsearch) .index.search.nested.NonNestedDocsFilter@a2a5984b)))],from[0],size[10]: 查询失败 [无法执行主查询]]; 嵌套: PropertyAccessException [[错误: 无法访问: 评论; 在类：org.elasticsearch.search.lookup.DocLookup]
[附近：{... doc[reviews.score].values.size() ....}]
                 ^
[行：1，列：5]]；}]",
  “状态”：500
}

```

**我怎样才能实现我的目标？**

ElasticSearch 版本是 0.19.9。

这是我的示例数据：

```
{
        “作者”：“马克吐温”，
        "title" : "汤姆索亚历险记",
        “评论”：[
                {
                        “网址”：“amazon.com”，
                        “分数”：10
                },
                {
                        “网址”：“www.barnesandnoble.com”，
                        “分数”：9
                }
        ],
        “章节”：[
                {“名称”：“第 1 章”}，{“名称”：“第 2 章”}
        ]
}

{
        “作者”：“杰克伦敦”，
        "title" : "野性的呼唤",
        “评论”：[
                {
                        “网址”：“amazon.com”，
                        “分数”：8
                },
                {
                        “网址”：“www.barnesandnoble.com”，
                        “分数”：9
                },
                {
                        “网址”：“www.books.com”，
                        “分数”：5
                }
        ],
        “章节”：[
                {“名称”：“第 1 章”}，{“名称”：“第 2 章”}
        ]
}

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:12:36.683

看起来您正在使用 curl 执行查询，并且此 curl 语句如下所示： curl localhost:9200/my-index/book -d '{....}'

这里的问题是，因为您使用撇号来包装请求的主体，所以您需要转义它包含的所有撇号。所以，你的脚本应该变成：

```
{"script" : "doc['\''reviews.score'\''].values.size()"} 
```

或者

```
{"script" : "doc[\"reviews.score"].values.size()"} 
```

第二个问题是，从您的描述看来，您正在寻找[直方图方面](http://www.elasticsearch.org/guide/reference/api/search/facets/histogram-facet.html)或[范围方面](http://www.elasticsearch.org/guide/reference/api/search/facets/range-facet.html)，而不是统计方面。所以，我建议尝试这样的事情：

```
curl "localhost:9200/test-idx/book/_search?search_type=count&pretty" -d '{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "histogram" : {
                "key_script" : "doc[\"reviews.score\"].values.size()",
                "value_script" : "doc[\"reviews.score\"].values.size()",
                "interval" : 1
            }
        }        
    }
}' 
```

第三个问题是，将为结果列表中的每条记录调用构面中的脚本，如果您有很多结果，则可能需要很长时间。因此，我建议索引一个名为的附加字段`number_of_reviews`，该字段应填充您客户的评论数量。那么您的查询将简单地变为：

```
curl "localhost:9200/test-idx/book/_search?search_type=count&pretty" -d '{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "histogram" : {
                "field" : "number_of_reviews"
                "interval" : 1
            }
        }        
    }
}' 
```

# c# - 减少类似查询中的重复

> ID：14610813
> 
> 赞同：2
> 
> 时间：2013-01-30T18:09:58.150
> 
> 标签：c#, linq

> **可能重复：**
> [如何将 where 语句发送到在 LINQ 语句中动态执行的方法？](https://stackoverflow.com/questions/1782079/how-can-i-send-where-statements-to-a-method-which-are-dynamically-executed-in-a)

我一直在用不同的方法编写简单的 LINQ 查询，但它们变得重复了。请原谅名称和地点的愚蠢示例，所有三种方法中唯一变化的部分是“where”子句。

怎样才能使这种重复的代码更[枯燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)？

例如，类似于辅助方法的东西，它采用相同的方式，但允许在 where 子句中进行更改。

```
public IEnumerable<NamePlace> GetSomeData(int num1, int num2)
{
  var temp = from Name in Names
             from Place in Places
             where Name.id == num1 && Place.id = num2
             select new NamePlace {
                  field1 = Name.name;
                  field2 = Place.name;
             };
  return temp;
}

public IEnumerable<NamePlace> GetSomeData2(int num1, int num2)
{
  var temp = from Name in Names
             from Place in Places
             where Name.age == num1 && Place.streetNumber = num2
             select new NamePlace {
                  field1 = Name.name;
                  field2 = Place.name;
             };
  return temp;
}

public IEnumerable<NamePlace> GetSomeData3(int num1, int num2)
{
  var temp = from Name in Names
             from Place in Places
             where Name.favouriteNumber == num1 && Place.neighbourNumber = num2
             select new NamePlace {
                  field1 = Name.name;
                  field2 = Place.name;
             };
  return temp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:18:25.687

您所需要的只是一个类型参数`Func<T1, T2, bool>`where`T1`和分别是 in和`T2`中的项目的类型。`Names``Places`

```
private IEnumerable<NamePlace> GetSomeDataHelper(Func<Name, Place, bool> filter)
{
  var query = from name in Names
             from place in Places
             where filter(name, place)
             select new NamePlace {
                  field1 = name.name,
                  field2 = place.name,
             };
  return query;
}

public IEnumerable<NamePlace> GetSomeData1(int num1, int num2)
{
    return GetSomeDataHelper((name, place) => name.id == num1 && place.id = num2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:17:00.077

将 a 传递`Func<Name, Place,bool>`给方法，在 Where 子句中对其进行评估。

```
public IEnumerable<NamePlace> GetSomeData(Func<Name,Place, bool> condition)
{
  var temp = from Name in Names
             from Place in Places
             where condition(Name,Place)
             select new NamePlace {
                  field1 = Name.name;
                  field2 = Place.name;
             };
  return temp;
} 
```

然后像这样调用函数：

```
GetSomeData((name,place)=>name.FavNumber=5 && Place.Neighbor==7); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:17:13.057

你可以让它 GetSomeData() 接受一个谓词：

```
public IEnumerable<NamePlace> GetSomeData(int num1, int num2, Func<Name, Place, bool> predicate)
{
    var temp = from Name in Names
         from Place in Places
         where predicate(Name, Place)
         select new NamePlace {
              field1 = Name.name;
              field2 = Place.name;
         };
   return temp;
} 
```

然后你可以这样称呼它：

```
var results = GetSomeData(num1, num2, (name, place) => name.id == num1 && place.id = num2); 
```

# javascript - 将 Mathjax 应用于任意元素

> ID：14610821
> 
> 赞同：1
> 
> 时间：2013-01-30T18:10:22.207
> 
> 标签：javascript, mathjax

我有 emacs org 生成的 HTML，默认情况下包含 dvipng 的方程式。没关系，我想为那些禁用 JS 的人提供一个很好的后备。生成的图片和生成的标签在其属性`<img>`中具有完整的 LaTeX 源代码。`alt`我还调整了代码以将特定类应用于所有此类图像，因此它在 JS 端变得更简单，这不是我的强项。

MathJax 文档列出了几种不同的配置以及我自己自定义配置的方法；我没有看到选择器函数或任何应用 Mathjax 来满足我的需要的东西。我知道我可以编写自己的 DOM-munging JS，然后调用 Mathjax，但 Mathjax 本身肯定会屈服于这种功能吗？

这是生成的 HTML 中的一个示例。

```
<img class="dvipng" src="upload/blog_ff4e604.png"
     alt="$\frac{1}{2\pi{}i}\int_C\frac{f'(z)}{f(z)}{\rm d}z = N_0(f)$"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:32:58.097

MathJax 不直接包含此内容，但您可以执行以下操作：

```
<script type="text/x-mathjax-config">
MathJax.Extension.myImg2jax = {
  version: "1.0",
  PreProcess: function (element) {
    var images = element.getElementsByTagName("img");
    for (var i = images.length - 1; i >= 0; i--) {
      var img = images[i];
      if (img.className === "dvipng") {
        var script = document.createElement("script"); script.type = "math/tex";
        var match = img.alt.match(/^(\$\$?)(.*)\1/);
        if (match[1] === "$$") {script.type += ";mode=display"}
        MathJax.HTML.setScript(script,match[2]);
        img.parentNode.replaceChild(script,img);
      }
    }
  }
};
MathJax.Hub.Register.PreProcessor(["PreProcess",MathJax.Extension.myImg2jax]);
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script> 
```

它定义了一个新的预处理器，用于查找您的图像并从 ALT 标记中提取数学。这假设您使用`$...$`在线数学和`$$...$$`显示数学。

`<script>`此代码在将图像转换为 MathJax标记时删除了图像。在 MathJax 处理 TeX 代码之前，可以将图像移动到预览范围内。这有点复杂，但可以通过更多的工作来完成。我会把它留给感兴趣的读者。:-)

# iphone - 检查文本字段文本是否几乎等于字符串

> ID：14610823
> 
> 赞同：3
> 
> 时间：2013-01-30T18:10:24.737
> 
> 标签：iphone, ios, objective-c, string, uitextfield

我有一个名为 textfield 的 UITextField。我有这段代码来检查文本字段中的文本是否等于“exampletext”

```
if ([textfield.text isEqualToString:@"exampletext"]) {
    NSLog(@"Correct");
} else {
    NSLog(@"Wrong");
} 
```

但我也想检查文本字段中的文本是否几乎等于“exampletext”，如果文本与“exampletext”几乎相同。就像文本是“eampletex”一样，我想 NSLog(@"Close")

有什么方法可以检查文本字段文本是否 50% 等于“exampletext”？或者有什么方法可以检查文本字段文本是否与“exampletext”有 50% 相同的字符？或者其他类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:36:58.213

您正在寻找的是 levenshtein 距离的实现，levenshtein("hello", "hallo") => 1, levenshtein("hello", "ellos") => 2。您可以查看[这个库](https://gist.github.com/1515464)。

一旦你有两个字符串之间的距离，你可以得到一个百分比计算：百分比 = 100 * levenshtein(original,other) / length(original)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:58:38.900

这是我的尝试。从要匹配的字符串创建自定义字符集。根据该字符集检查 texfield.text 中的每个字符，如果匹配数接近字符串中的字母数，请执行某些操作..

```
NSString *testString = @"wordToCompare";
NSString *textFromTextfield = textfield.text;

//create a custom character set from the word you want to compare to...
NSCharacterSet *characterSetForString = [NSCharacterSet characterSetWithCharactersInString:testString];

//keep track of how many matches...
int numberOfCharsThatMatchSet = 0;

    for (int x = 0; x < [textFromTextField length]; x++) {

        unichar charToCheck = [textFromTextField characterAtIndex:x];

        if ([characterSetForString characterIsMember:charToCheck] == YES) {
            numberOfCharsThatMatchSet++;
        }

        NSLog(@"%d", numberOfCharsThatMatchSet);
    }

         // if the number of matches is the same as the length of the word + or - 2...
    if ((numberOfCharsThatMatchSet > [testString length] - 2 ) && (numberOfCharsThatMatchSet < [testString length] + 2 )) {
        NSLog(@"close match...");
    } 
```

不确定这是否是您正在寻找的 100%，但也许它会有所帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:29:32.067

我敢肯定，在某个地方可能会有一些开源代码可以为您做到这一点..但是，我能想到的一种方法会给您带来一些领先优势...

将两个字符串的字符排序为数组。确定您想成为主字符串的字符串并获取它的字符串长度。

现在比较每个字符。例如：单词 1：你好，单词 2：你好。

每次找到一个字母时，计数就加一。如果在循环结束时您的计数是您从主字符串中获取的原始长度的 80% 或更大，那么您很可能有部分匹配。

因此，对于我们的示例，Word 1 将是我们的主字符串，其长度为 5。“ello”包含 4/5 个字符，因此匹配原始字符串的 80%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:38:08.657

我认为没有一种简单的方法（用几行代码）来解决这个问题。您可以考虑几种算法并选择最适合您需求的一种。

你应该看看[这个](https://stackoverflow.com/questions/1034622/how-can-i-measure-the-similarity-between-2-strings)问题。尽管它是为另一种语言设计和回答的，但您要求一种方式或方法，以便在那里获得解决方案。

# media-queries - Opera Mobile 12.1 中的媒体查询值问题

> ID：14610824
> 
> 赞同：0
> 
> 时间：2013-01-30T18:10:27.377
> 
> 标签：media-queries

这是我的问题：

我正在使用媒体查询根据设备分辨率提供不同的视频（5 种不同的分辨率）。在我的媒体查询中，我要求“宽度”和“分辨率”

这是我在 HTML5 视频元素中使用的代码：

```
<source src="640x360_15.webm" type="video/webm" media="only screen and (max-width:532px) and (min-resolution: 144dpi)">

<source src="960x540_15.webm" type="video/webm" media="only screen and (min-width:533px) and (max-width:757px) and (min-resolution: 144dpi)">

<source src="1280x720_15.webm" type="video/webm" media="only screen and (min-width:758px) and (max-width:910px) and (min-resolution: 144dpi)">

<source src="1600x900_15.webm" type="video/webm" media="only screen and (min-width:911px) and (max-width:1120px) and (min-resolution: 144dpi)">

<source src="1920x1080_15.webm" type="video/webm" media="only screen and (min-width:1121px) and (min-resolution: 144dpi)"> 
```

我的问题（我将很快解释）仅出现在 Opera Mobile 12.1 中。

我的测试设备是：

物理分辨率为 540x960 像素的 HTC One S（opera mobile 中报告的媒体查询分辨率：144dpi，opera mobile 中报告的媒体查询宽度：360）

三星 Galaxy S3 Mini，物理分辨率为 480x800 像素（在 Opera 中报告的媒体查询分辨率：144dpi，在 Opera 中报告的媒体查询宽度：320）

对于报告的媒体查询值，我使用了这个工具： http: [//pieroxy.net/blog/pages/css-media-queries/test-features.html](http://pieroxy.net/blog/pages/css-media-queries/test-features.html)

现在的问题：我会假设我在两个设备上的媒体查询都会导致 src：“640x360_15.webm！但 src 实际上是”1600x900_15.webm。正如我已经说过的，这个问题只发生在opera mobile中。Safari、Chrome 和 Firefox 的移动版本运行良好。

你有什么想法？我很无助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T13:12:28.970

如果您忘记将以下内容添加到页面标题，大多数（如果不是所有）移动浏览器都会对您的页面进行一些调整。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0,
          maximum-scale=10.0, user-scalable=yes" /> 
```

这将使您的媒体查询工作。

# algorithm - 如何使用大 O 计算增长率？

> ID：14610827
> 
> 赞同：0
> 
> 时间：2013-01-30T18:10:41.117
> 
> 标签：algorithm, complexity-theory, big-o

我刚刚开始学习 Big O 表示法，并且有一个关于如何计算算法增长率的问题。假设我有一个时间复杂度为 O(√n log n) 的算法，并且对于 n = 10，我的算法需要 2 秒。如果我想知道 n = 100 需要多长时间，我是否设置了一个比率，其中 2/x = (√10 log 10)/(√100 log 100) 然后求解 x？或者我可以说我的输入是 10 倍大，所以需要 2*(√10 log 10) 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:23:13.993

第一种方法是对的。Big O 不关心常数倍数，因此您可以通过代数求解来确定常数。

```
c*(√10*log(10)) = 2
c = 2/(√10*log(10))
√100*log(100) * 2/(√10*log(10)) = x 
```

但是，请记住，大 O 也不关心“较小”项，因此那些恒定的开销和其他较小的比例因子只会使这个计算渐近准确。例如，由以下等式控制的算法：

(√n log n + 1/n) = t

仍然是 O(√n log n)，这将使您的计算对于较小的 n 值不太准确。

# sql - 抑制基于 WHERE 子句的 SELECT 输出

> ID：14610828
> 
> 赞同：2
> 
> 时间：2013-01-30T18:10:45.737
> 
> 标签：sql, sql-server, tsql, cursor, guid

我在这里有一个查询，可以在整个数据库中搜索我选择的特定 GUID。现在，它完全按照它的程序做：循环遍历所有列/表组合并输出一个可能包含或不包含信息的表。我想将其更改为仅输出包含结果的表。

这是代码：

```
DECLARE 
    @tab_list NVARCHAR(MAX),
    @col_list NVARCHAR(MAX),
    @IDquery NVARCHAR(MAX),
    @srvName NVARCHAR(MAX),
    @getList CURSOR

SET @srvName = 'Server_Name'

SET @getList = CURSOR LOCAL FAST_FORWARD FOR
    SELECT [TABLE_NAME]
        ,[COLUMN_NAME]
    FROM [Server_Name].[INFORMATION_SCHEMA].[COLUMNS]
    WHERE [COLUMN_NAME] LIKE '%id'
        AND [DATA_TYPE] LIKE 'uniqueidentifier'
    ORDER BY [TABLE_NAME] ASC

OPEN @getList

FETCH NEXT FROM @getList INTO @tab_list, @col_list

WHILE (@@FETCH_STATUS = 0)
BEGIN       
    PRINT @tab_list + ' -- ' + @col_list

    SET @IDquery = 
        'SELECT *' + 
        ' FROM ' + @srvName + '.dbo.' + @tab_list + 
        ' WHERE ' + @col_list + ' = (''GUID_HERE'')' +
        ' AND ' + @col_list + ' IS NOT NULL'

    --PRINT @IDquery
    EXEC (@IDquery)
    FETCH NEXT FROM @getList INTO @tab_list, @col_list
END

CLOSE @getList
DEALLOCATE @getList 
```

它现在确实可以完成它的工作，但是效率非常低。正如我之前提到的，当它搜索这个 GUID 时，它会输出它搜索的任何表，即使是那些没有匹配项的表。我希望它只输出包含匹配项的表，我不在乎如何。老实说，我什至不在乎它返回的所有内容是否只是该事物在其中找到匹配项的表和列（这意味着我必须手动点击该表）。我只想要更干净的输出，似乎无法将答案放在一起。

编辑：所以我喜欢临时表提供的承诺，尽管我遇到了一些障碍。这是我所拥有的：

```
WHILE (@@FETCH_STATUS = 0)
    BEGIN       
        PRINT @tab_list + ' -- ' + @col_list

        SET @IDquery = 
            'SELECT * INTO #temporary' + 
            ' FROM ' + @srvName + '.dbo.' + @tab_list + 
            ' WHERE ' + @col_list + ' = (''GUID_HERE'')' +
            ' AND ' + @col_list + ' IS NOT NULL'

        --PRINT @IDquery
        EXEC (@IDquery)
        FETCH NEXT FROM @getList INTO @tab_list, @col_list
    END

IF (@@ROWCOUNT > 0)
SELECT @ FROM #temporary

DROP DATABASE #temporary
CLOSE @getList
DEALLOCATE @getList 
```

我可能对临时表的工作方式有误，但我没有看到此代码的表输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:33:10.757

不是直接从表中选择，而是将结果插入到临时表中。然后检查`@@ROWCOUNT`以确定是否有任何记录被 找到`SELECT... INTO`，如果找到，则从临时表中选择结果：

```
SET @IDquery = '
    SELECT * INTO #Temp
    FROM ' + @srvName + '.dbo.' + @tab_list + ' 
    WHERE ' + @col_list + ' = (''GUID_HERE'')
    AND ' + @col_list + ' IS NOT NULL

    IF (@@ROWCOUNT > 0)
        SELECT * FROM #Temp
'

--PRINT @IDquery
EXEC (@IDquery)

FETCH NEXT FROM @getList INTO @tab_list, @col_list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:53:24.360

您在使用 EXEC 时会产生另一个进程，因此每次传递都会删除并重新创建您的临时表。尝试使用相同的代码，但使用全局临时表 ( `##temporary`)。

另外我假设`SELECT @ FROM #temporary`是一个错字，你实际上跑了`SELECT * FROM #temporary`.

# android - 谷歌地图 Android API v2 和 Eclipse

> ID：14610830
> 
> 赞同：0
> 
> 时间：2013-01-30T18:10:52.943
> 
> 标签：android, google-maps

我是谷歌地图的新手，因此很多事情对我来说还不够清楚。所以我期待一些专家在这方面的指导。我阅读了[本指南](https://developers.google.com/maps/documentation/android/start#adding_the_api_key_to_your_application)并做了它所说的一切。我使用谷歌地图 api v2 并得到一个地图键。然后我按照该链接创建一个示例项目并选择目标版本 android 2.2（在运行项目时）。但是在运行 eclipse android 模拟器中的示例后出现错误列表。我的**logcat**视图显示：

```
01-31 00:51:59.226: W/dalvikvm(329): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-31 00:51:59.236: E/AndroidRuntime(329): FATAL EXCEPTION: main
01-31 00:51:59.236: E/AndroidRuntime(329): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.googleMapApp/com.googleMapApp.LocationProfileManagerActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.os.Looper.loop(Looper.java:123)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-31 00:51:59.236: E/AndroidRuntime(329):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 00:51:59.236: E/AndroidRuntime(329):  at java.lang.reflect.Method.invoke(Method.java:521)
01-31 00:51:59.236: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-31 00:51:59.236: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-31 00:51:59.236: E/AndroidRuntime(329):  at dalvik.system.NativeStart.main(Native Method)
01-31 00:51:59.236: E/AndroidRuntime(329): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-31 00:51:59.236: E/AndroidRuntime(329):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.Activity.setContentView(Activity.java:1647)
01-31 00:51:59.236: E/AndroidRuntime(329):  at com.googleMapApp.LocationProfileManagerActivity.onCreate(LocationProfileManagerActivity.java:14)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-31 00:51:59.236: E/AndroidRuntime(329):  ... 11 more
01-31 00:51:59.236: E/AndroidRuntime(329): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.googleMapApp-1.apk]
01-31 00:51:59.236: E/AndroidRuntime(329):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
01-31 00:51:59.236: E/AndroidRuntime(329):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
01-31 00:51:59.236: E/AndroidRuntime(329):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
01-31 00:51:59.236: E/AndroidRuntime(329):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
01-31 00:51:59.236: E/AndroidRuntime(329):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563) 
```

**我的 Manifest.xml**是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.googleMapApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <permission
    android:name="com.googleMapApp.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
    <uses-permission android:name="com.googleMapApp.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<!-- Require OpenGL ES version 2 -->
     <uses-feature
      android:glEsVersion="0x00020000"
      android:required="true"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".LocationProfileManagerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="myMapKey"/>
    </application>

</manifest> 
```

我的**main.xml**是：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

我的**activity.java**是：

```
package com.googleMapApp;

import android.app.Activity;
import android.os.Bundle;

public class LocationProfileManagerActivity extends Activity {
    /** Called when the activity is first created. */
    //private GoogleMap map;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();

     }
} 
```

很抱歉这个冗长的描述，但我想告诉你我做了什么。我认为作为一个新手，我在这种方式上犯了很多错误。所以我希望有人会指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:30:57.207

您正在使用仅在以后的 API 中可用的功能，即`Fragment`. 如果要编译支持 2.2，则需要在项目中包含[支持库](http://developer.android.com/tools/extras/support-library.html)。您还必须进行以下更改以使用支持片段而不是常规片段 -

在 main.xml 中，更改

```
class="com.google.android.gms.maps.MapFragment"/> 
```

到

```
class="com.google.android.gms.maps.SupportMapFragment"/> 
```

在你的activity.java中，改变

```
public class LocationProfileManagerActivity extends Activity { 
```

到

```
public class LocationProfileManagerActivity extends FragmentActivity { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:29:39.410

Maps API v2 无法在模拟器中运行，因为它依赖于捆绑在 Google Play 商店 .apk 中的 Google Play 服务。不过，它可以一起被破解，你可以在[这里](https://stackoverflow.com/questions/14445093/how-to-show-google-map-v2-on-android-emulator)阅读关于“谷歌地图 v2 模拟器”的第一个谷歌结果。此外，您仍然可以在有限的时间内使用 V1，您可以从[这里](https://developers.google.com/maps/documentation/android/v1/)开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:43:34.827

你需要做两个改变

由于您的 sdk 版本低于 12，因此需要进行以下更改

1) **main.xml**

代替

```
 class="com.google.android.gms.maps.MapFragment"/> 
```

和

```
class="com.google.android.gms.maps.SupportMapFragment"/> 
```

2)**活动.java**

需要扩展`FragmentActivity`而不是`Activity`

如果您想在模拟器中进行测试，请下载[**google_play_services_apk**](http://www.sendspace.com/filegroup/HDHwmDlVndx96Fa1jEzx8Q)并将其安装在模拟器中。

# php - 更快加载页面的方法

> ID：14610832
> 
> 赞同：0
> 
> 时间：2013-01-30T18:10:54.083
> 
> 标签：php, mysql, database, performance, loading

我正在使用 php、mysql 制作一个 bolg 网站。它具有照片上传、投票、事件、用户评论、私人消息传递、添加频率、新闻等功能。我的所有障碍都由 stackoverflow 解决（我非常感谢）。这是我的第二个问题，这里是：

从数据库中获取所需信息的最佳方法是什么？我有几个选择，我有能力做:-)

1.  将信息存储为 JSON 数组，然后使用 jQuery 对其进行解析，
2.  将信息存储为数组并使用 php 在所需区域进行解析，
3.  遵循常规方法 - 需要时使用 mysql 查询。

哪种方法会更快，或者您可以建议我的其他方法是否会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:18:45.817

绝对是#3。以数据库可以理解的方式存储数据可以提供更大的灵活性并使其更易于使用。通过存储序列化的数据，您无法在数据库中对其进行任何操作。例如，如果您只需要所有帖子的标题和作者，则使用方法 3，您可以只获得这些字段。方法 1 或 2 将要求您提取所有数据，将其解析为 PHP，然后仅从中选择您想要的内容。您也无法为特定用户执行排序或获取帖子之类的操作。在将数据放入数据库之前，您不会从序列化数据中获得任何收益。数据的大小大致相同，检索速度的任何差异都可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:23:59.980

在您列出的三个中，您从未真正列出数据将如何以数字 1 和 2 持续存在。当然，除非您正在考虑将数组和 JSON 数据转储到文本文件中……老实说，这是不可能的如果速度是您关心的问题。

如果您希望数据在保持结构的同时保持不变，您可能需要查看其他解决方案，例如 MongoDB 和 PostgreSQL。就性能而言，它们也是非常好的选择。但是，如果您已经在使用 MySQL，那么除非您有非常令人信服的理由，否则确实没有太多理由进行这种转换。

# jquery - 用 jQuery 构建了一个文本滑块，但需要一些改进

> ID：14610833
> 
> 赞同：0
> 
> 时间：2013-01-30T18:10:57.587
> 
> 标签：jquery, slider

几个月前我用 jQuery 构建了一个小滑块，我正在回收它以在新项目中使用。本来，它是滑动图像，但我需要它来滑动文本。这是jQuery：

```
$(document).ready(function () {
var About = {
    init: function () {
        var text_spans = $('.headline-box span'),
            extracts = new Array(),
            delay = 5,
            current = 0;

        text_spans.each(function (index) {
            if ($(this).is(":visible")) {
                current = index;
            }
            extracts.push($(this));
        });

        var interval = setInterval(function () {

            target = (current < (extracts.length - 1)) ? current + 1 : 0;

            extracts[current].slideUp('slow');
            extracts[target].slideDown('slow');

            current = target;

        }, delay * 500);

    }
}

About.init();

}); 
```

但是，现在它的效果不是很好。例如：

*   当它到达`span`'s 的循环结束时，它需要一个延迟（内置在代码中），而不是自动循环到第一个`span`。
*   我的页面上有两个相同滑块的实例，使用相同的类名等。但是，它一次只执行一个（即一个在循环中执行，然后另一个将启动）。
*   有时`span`'s 将具有`display: block;`内联 CSS 而不是`display: inline;`. 通常它只发生在循环中的第一个。

为了给你一些背景信息，它应该被用作自动化的新闻代码类型的东西。目前我有 3`span`的循环，但我需要能够添加更多。

抱歉，如果这听起来像是一份要求清单，但我已经经历了一段时间了，但没有运气。

感谢任何可以提供帮助的人:)

# c - 带有 char 数组的 sscanf 始终评估为 true

> ID：14610840
> 
> 赞同：0
> 
> 时间：2013-01-30T18:11:22.940
> 
> 标签：c

我遇到了一个问题，我的 sscanf 行总是评估为真。如果 fgets 传递一个没有数字的字符串，我希望它评估为 false ......这里有什么建议/帮助吗？

```
int main(void){
  int choice;
  char buffer[LINESIZE];

 while (1){
   printf("\nprompt");

   if(fgets(buffer,LINESIZE, stdin)){
        if(sscanf(buffer, "%d", &choice)){
     /* do something*/ 
     else 
      /*do something else*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:24:56.230

正如评论中所说 sscanf() 返回匹配的参数数量；C 中的标准行为是 0 被隐式转换为 FALSE，其他任何内容都被转换为 true，所以我猜可能会发生 2 件事，要么你的字符串总是包含一个整数，它总是读取一些东西，要么你的编译器正在做一些奇怪的事情，它是将 0 转换为 true（非常奇怪）

但在这两种情况下，您都可以通过如下方式修改代码来解决此问题

```
int main(void){
  int choice;
  char buffer[LINESIZE];

 while (1){
   printf("\nprompt");

   if(fgets(buffer,LINESIZE, stdin)){
        if(sscanf(buffer, "%d", &choice) != 0){  // be carefull with EOF 
     /* do something*/ 
     else 
      /*do something else*/ 
```

您将获得想要的结果，并且您将拥有更具可读性的代码（并且正确，因为您不进行奇怪的演员表）

# compass-sass - 列不适合网格

> ID：14610844
> 
> 赞同：0
> 
> 时间：2013-01-30T18:11:28.967
> 
> 标签：compass-sass, blueprint-css

我刚开始使用指南针蓝图，我正在制作一个简单的框架，其中包含以下内容：

```
$blueprint_grid_columns: 12;
$blueprint_grid_width: 60px;
$blueprint-grid-margin: 20px;

@import "blueprint";

.frame {
  @include container;
  .header{
    @include column(12);
    background:#000;
    height:100px;
  }
  .left_bar{
    @include column(1);
    background:#ccc;
    height:450px;
  }
  .content{
    @include column(10);
    background: #000;
    height:450px;
  }
  .right_bar{
    @include column(1);
    backgrounf:#ccc
    height:450px;
  }
} 
```

html:

```
<body>
  <div class='frame'>

    <div class='header'>
    </div> <!-- end header -->

    <div class='left_bar'>
    </div> <!-- end left_bar -->

    <div class='content'>
    </div> <!-- end content -->

    <div class='right_bar'>  
    </div> <!-- end right_bar -->

  </div> <!-- end frame -->
</body> 
```

right_bar 不适合最后一列的空间，而是恰好出现在 left_bar 下方。谁能告诉我为什么？非常感谢任何帮助。

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:23:31.207

我认为您必须添加`true`到 header 和 right_bar 类：

```
.header{
  @include column(12, true);

....
.right_bar{
  @include column(1, true); 
```

这让指南针知道它是最后一列，并且需要将边距清零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:37:06.080

我想通了。我添加了一些边框，使网格有点乱。我通过覆盖宽度来修复它，但它似乎有点 hacky。是否有考虑边界的蓝图方法？

# java - 配置 使用 xpath 从 xml 有效负载中提取时给出空字符串

> ID：14610847
> 
> 赞同：0
> 
> 时间：2013-01-30T18:11:46.497
> 
> 标签：java, xml, xpath, mule, flow

我正在开发一项服务，它将请求中发送的详细信息添加到两个不同的队列中。

为此，我使用在不干扰有效负载的情况下提取部分 XML。但它给了空白。

我的输入如下所示

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://example.org/HelloService">
   <soapenv:Header/>
   <soapenv:Body>
     <AddRequest>
      <Person>
         <firstName>Test</firstName>
         <lastName>Tesst</lastName>
         <age>23</age>
      </Person>
      <Company>
         <companyName>Test</companyName>
         <state>Tesst</state>
         <zip>12345</zip>
      </Company>
     </AddRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

我提取 Person 元素的部分流程如下。

```
 <set-variable value="#[xpath://Person]" variableName="person"></set-variable>

    <logger level="INFO" message="#[flowVars['person']]" />     
    ........
    ...... 
```

但是记录器将其打印为空白

```
2013-01-30 12:56:08,287 INFO  [HelloService.stage1.02] processor.LoggerMessageProcessor (LoggerMessageProcessor.java:108) - 
```

知道为什么要提取空格而不是 xml 元素。

如何使用 XPATH 从 paylaod 中获取“Person”元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:18:08.743

用这个：

```
<set-variable value="#[xpath('//Person')]" variableName="person" /> 
```

**编辑：**

```
<set-variable value="#[xpath('//Person').text]" variableName="person" /> 
```

将返回一个元素的文本值，如果它有一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T18:19:44.343

尝试使用 XSLT 转换器来提取 xml 元素。

```
<xsl:output omit-xml-declaration="yes" indent="yes" />

<xsl:template match="/">
    <xsl:copy copy-namespaces="no">
        <xsl:apply-templates select="//Person" />                   
    </xsl:copy>     
</xsl:template>

<xsl:template match="@*|node()">
    <xsl:copy copy-namespaces="no">
        <xsl:apply-templates select="@*|node()" />                  
    </xsl:copy>     
</xsl:template> 
```

# java - 上传新文件时如何同时获取文件MD5和SHA1校验和？

> ID：14610850
> 
> 赞同：2
> 
> 时间：2013-01-30T18:12:00.480
> 
> 标签：java, file, md5, sha1

我正在研究存储系统。用户上传文件到服务器。

在服务器端，我想实现一个程序来使用 MD5 和 SHA1 获取文件的校验和。

我知道如何使用 DigestInputStream 函数计算校验和，但它似乎一次只支持一种方法（MD5 或 SHA1）。在JAVA中处理上传流时，如何同时计算MD5和SHA1？

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:14:09.703

使用两个`MessageDigest`实例（一个用于 MD5，一个用于 SHA1）并将您读取的字节输入两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:19:45.437

作为 java-ish 伪代码，因为您可以自己查找 OpenSSL 或 BSafe 的 API 或 Java Crypto API...

```
缓冲阅读器 = ...;
字符[MY_ARRAY_SIZE] buf = ...;

而（真）{
  int count = reader.read(buf, 0, buf.length);
  如果（计数== -1）{休息}；

  /* 你需要检查正确的 API 并自己处理错误 */
  md5.add(buf, 计数);
  sha256.add(buf, count);
}

字符串 md5sum = base64(md5.finalize()); // 假设一个合适的 base64 方法
字符串 sha256sum = base64(sha256.finalize());

```

# java - StreamGobbler 短输出或非常快速的过程

> ID：14610851
> 
> 赞同：0
> 
> 时间：2013-01-30T18:12:02.773
> 
> 标签：java, io

我使用 StreamGobbler 从外部程序读取输出。在我用来读取和解析来自 ffmpeg 的 stderr 的大（20-40 个字符串）输出之前。现在我只想从identify(ImageMagick)的stdout中读取和解析一个字符串（一个字符串是程序的所有输出，这个程序很快结束）。有时它可以工作，但有时我有错误“流已关闭”。我认为 StreamGobbler 没有时间使用流（流程在 streamGobbler 做一些工作之前结束）。

您可以在下面看到类 ExecThread 及其用法示例。

对不起我的英语不好...

```
 String command =  ffmpegExe.getAbsolutePath()+ " -i \""+ fileName +"\"";
    ExecThread thread = new ExecThread(command);
    thread.setPriority(ExecThread.MIN_PRIORITY);
    thread.start();
    thread.waitFor(DEFAULT_WAIT);

    //reading ffmpeg stderr
    BufferedReader ffmpegErr = thread.getErrBufferedReader();
    String line;

    try
    {
        while((line = ffmpegErr.readLine()) !=null)
//some code

private static class ExecThread extends  Thread
{
    public ExecThread(String command)
    {
        this.command = command;
    }
    @Override
    public void run()
    {

        try
        {
            ExecCommand(command);
            exitVal = process.waitFor();
        }
        catch (Exception e )
        {
            logger.error("Error while executing command: " + command + e.getMessage(),e);
            System.err.println("Error");
            System.exit(1);
        }
    }
    public void waitFor(long millis)
    {
        try
        {
            this.join(millis);
            process.destroy();
        } catch (Exception e)
        {
            logger.error("Error while interupting command: " + command + e.getMessage(), e);
        }

    }

    private  void ExecCommand(String command) throws IOException
    {
        //run command
        Runtime rt = Runtime.getRuntime();
        process = rt.exec(new String[]{shellName,shellOption, command}, null, null);

        //get stderr buffered reader
        StreamGobbler errGobbler = new StreamGobbler(process.getErrorStream());
        StreamGobbler outGobbler = new StreamGobbler(process.getInputStream());

        ErrBufferedReader = new BufferedReader(new InputStreamReader(errGobbler));
        OutBufferedReader = new BufferedReader(new InputStreamReader(outGobbler));

    }
    private BufferedReader ErrBufferedReader;

    public BufferedReader getOutBufferedReader()
    {
        return OutBufferedReader;
    }

    private BufferedReader OutBufferedReader;
    private Process process;
    private String command;
    private int exitVal=-1;

    public BufferedReader getErrBufferedReader()
    {
        return ErrBufferedReader;
    }

    public Process getProcess()
    {
        return process;
    }

    public String getCommand()
    {
        return command;
    }

    public int getExitVal()
    {
        return exitVal;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:15:40.780

我建议进行两项更改：

1.  使用[Java 进程](http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html)而不是编写线程。
2.  关闭您的输入、输出和错误流并销毁流程。如果不这样做，您将有文件句柄泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:50:01.147

这不是一个好的决定，但它确实有效。以前是`String command = identifyExe.getAbsolutePath() + " \"" + file.getAbsolutePath() + "\"";` 现在`String command = "sleep 1 ; " + identifyExe.getAbsolutePath() + " \"" + file.getAbsolutePath() + "\"";`

睡眠是非常有用的功能:-)

但是，如果您知道更好的决定，请告诉...

# spring - spring petcare 示例无法添加预约

> ID：14610859
> 
> 赞同：0
> 
> 时间：2013-01-30T18:12:46.950
> 
> 标签：spring, spring-mvc, spring-webflow

[在https://anonsvn.springframework.org/svn/spring-samples/petcare/trunk](https://anonsvn.springframework.org/svn/spring-samples/petcare/trunk)查看源代码，编译，部署到 tomcat 7 并运行 OK。但是当我使用我的 gmail 帐户登录并尝试添加约会时，“添加”按钮在添加约会弹出窗口中不可点击。谁有同样的经历和建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T14:14:11.503

原来这是一个错误。似乎在较新的版本中已修复。

# iphone - RestKit 0.20：从本地文件映射关系数据

> ID：14610867
> 
> 赞同：4
> 
> 时间：2013-01-30T18:13:21.580
> 
> 标签：iphone, ios, objective-c, rest, restkit

我正在获取一个本地 JSON 文件并尝试将其映射到关系映射中。没有关系它可以正常工作，但是一旦我添加了关系，我就会得到一个错误。

**JSON：**

[https://gist.github.com/4675414](https://gist.github.com/4675414)

**代码：**

```
 // Get json from destination
    NSString *myJSON = [[NSString alloc] initWithContentsOfFile:contentPath encoding:NSUTF8StringEncoding error:NULL];

    NSString* MIMEType = @"application/json";
    NSError* parseError;

    NSData *data = [myJSON dataUsingEncoding:NSUTF8StringEncoding];
    id parsedData = [RKMIMETypeSerialization objectFromData:data MIMEType:MIMEType error:&parseError];
    if (parsedData == nil && parseError) {
        NSLog(@"Cannot parse data: %@", parseError);
    }

    // Setting up objectmapping for issue
    RKObjectMapping *issueMapping = [RKObjectMapping mappingForClass:[Issue class]];
    [issueMapping addAttributeMappingsFromDictionary:@{
     @"title":                      @"title",
     @"description":                @"description",
     @"cover_url":                  @"cover_url",
     @"published_at":               @"published_at",
     @"issue_number":               @"issue_number"
     }];

    //Setting up objectmapping for article
    RKObjectMapping *articleMapping = [RKObjectMapping mappingForClass:[Article class]];
    [articleMapping addAttributeMappingsFromDictionary:@{
     @"title":                      @"title",
     @"main_text":                  @"main_text",
     @"article_image_url":          @"article_image_url"
     }];
    [issueMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"articles" toKeyPath:@"articles" withMapping:articleMapping]];

    Issue *issue = [[Issue alloc] init];
    RKMappingOperation* mapper = [[RKMappingOperation alloc] initWithSourceObject:[parsedData objectForKey:@"issue"] destinationObject:issue mapping:issueMapping];
    RKManagedObjectMappingOperationDataSource *mappingDS = [RKManagedObjectMappingOperationDataSource new];
    mapper.dataSource = mappingDS;
    [mapper performMapping:&parseError];
    NSLog(@"Parse error: %@", parseError);
    NSLog(@"Issue title: %@", issue.title); 
```

**错误：**

```
 2013-01-30 13:07:42.486 uninkd[13722:907] *** Assertion failure in -[RKManagedObjectMappingOperationDataSource mappingOperation:targetObjectForRepresentation:withMapping:inRelationship:], /Users/holgersindbaek/Projects/Uninkd/Uninkd_IOS/Pods/RestKit/Code/CoreData/RKManagedObjectMappingOperationDataSource.m:232

    2013-01-30 13:07:42.487 uninkd[13722:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'RKManagedObjectMappingOperationDataSource must be initialized with a managed object context.' 
```

**如果我拿走数据源会出错：**

```
 2013-01-30 13:27:32.601 uninkd[13754:907] *** Assertion failure in -[RKMappingOperation applyRelationshipMappings], /Users/holgersindbaek/Projects/Uninkd/Uninkd_IOS/Pods/RestKit/Code/ObjectMapping/RKMappingOperation.m:699
    2013-01-30 13:27:32.603 uninkd[13754:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Cannot perform relationship mapping without a data source' 
```

希望你能帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:22:49.913

这是因为`RKManagedObjectMappingOperationDataSource`需要一个托管对象上下文，这是专门针对 Core Data 的。你在使用核心数据吗？

忘记我之前所说的一切并使用：

```
#import "RKObjectMappingOperationDataSource.h"
RKObjectMappingOperationDataSource *mappingDS = [RKObjectMappingOperationDataSource new];
mapper.dataSource = mappingDS; 
```

代替：

```
RKManagedObjectMappingOperationDataSource *mappingDS = [RKManagedObjectMappingOperationDataSource new];
mapper.dataSource = mappingDS; 
```

`ManagedObject`提示，如果您不使用 CoreData ，请不要使用任何类。这是指CoreData独有的`ManagedObject`in a 。`ManagedObjectContext`话虽这么说，核心数据 + restkit 很棒，你应该检查一下。

# backbone.js - 在没有 Socket.io 的 Backbone.js 应用程序中使用 websockets

> ID：14610868
> 
> 赞同：5
> 
> 时间：2013-01-30T18:13:22.710
> 
> 标签：backbone.js, websocket

我是 Backbone 的新手，我正在尝试构建一个实时绘制和映射数据的 Backbone 应用程序。[我按照这个](https://github.com/andrewvc/d3-backbone-presentation/blob/master/04_websockets_bb.html)示例代码实现了一个 websocket 。问题是，我想使用比示例代码更广泛的数据集，如果我理解代码，它只是创建一个模型——单个点数组。我想要一个模型集合，其中每个模型都有纬度、经度和数量（只是一个数值）。

如何实现 websocket，以便当我的后端发送一些 JSON 时，我的应用程序会创建一个具有这些属性的新模型？我在博客上读到我需要重写 Backbone.sync 并实现一个事件聚合器，但我见过的唯一例子是使用 socket.io。由于我在后端使用的语言/框架，Socket.io 不是一个选项。此外，最终我会将后端切换到socket.io也不支持的另一种语言，所以我想找到一种更通用的方法来在前端实现websocket，而不涉及像这样的库套接字.io。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T22:53:05.473

我找到了解决我自己的问题的方法。再说一次，我是 Backbone 的新手，所以我不确定这是否是最好的方法——我会对这个解决方案是否遵循最佳实践的反馈感兴趣。该代码基于Andrew Cholakian 的[这个示例](https://github.com/andrewvc/d3-backbone-presentation/blob/master/04_websockets_bb.html)。我保留了一些打印语句，当您运行代码时它们会很有帮助。

该代码假定您的后端以以下形式发送 JSON 数据 `{data: "{"lat": latitude, "long": longitude, "amt": amount}"}`

```
// this function opens the websocket and will trigger add_point when
// a new message is received
Stream = function () {
    _.extend(this, Backbone.Events);
    var self = this;

    self.socket = new WebSocket("ws://" + document.domain + ":5000/websocket");
    console.log("Using a standard websocket");

    self.socket.onopen = function(e) {
        self.trigger('open', e);
        console.log('socket opened');
    };

    self.socket.onerror = function(e) {
        self.trigger('error', e);
    };

    self.socket.onmessage = function(e) {
        self.trigger('message', e);
        self.trigger('data', e.data);
        self.trigger('add_point', JSON.parse(e.data));
    };

    self.socket.onclose = function(e) {
        self.trigger('close', e);
        console.log('socket closed');
    };
};  

DataPoint = Backbone.Model.extend({
    defaults: {
        lat: null,
        long: null,
        amt: null
        }
});

DataSet = Backbone.Collection.extend({
    model: DataPoint,
    initialize: function(options) {
        this.stream = options.stream;
        var self = this;
        this.stream.on("add_point", function(pt) {
            self.add( new DataPoint({
                lat: pt.lat,
                long: pt.long,
                amt: pt.amt
            }));
            console.log('updated collection');
            console.log(self.models);
        });
    }
});

MapView = Backbone.View.extend({
    initialize: function(options) {
        this.dataSet = options.dataSet;
    }
});

$(function() {
    var stream = new Stream();
    var dataSet = new DataSet({ stream: stream });
    var mapView = new MapView({ dataSet: dataSet });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T11:45:27.090

您可以使用[Backbone.WS](https://github.com/ydaniv/backbone-ws)，它允许您在原生 WebSockets 上使用 Backbone 资源。没有额外的依赖！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T16:41:39.803

您可以使用基于 WebSocket 上的 WAMP 协议的[骨干网.wamp](https://github.com/darrrk/backbone.wamp)

# css - 使用 CSS 停止工作自定义 Facebook Like Box

> ID：14610874
> 
> 赞同：1
> 
> 时间：2013-01-30T18:13:47.063
> 
> 标签：css, facebook-like

几个月前，我成功地定制了一个 facebook like box。突然之间，它停止了工作——它只是忽略了 css 文件。我希望有人能看到我做错了什么。这是完整的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<script type="text/javascript"
src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php/en_US"></script> 
<script type="text/javascript">FB.init("426348664054039");</script>
<fb:fan profile_id="106491872816751" stream="0" connections="10" width="300px" height="300px"
header="0" logobar="0"   css="myfile.css"></fb:fan>
</body>
</html> 
```

而不是有人试图帮助我修复我的示例，我将满足于一个指向*一个工作示例*的链接！我看到一个又一个网站解释如何做到这一点，但没有一个网站实际上发布了一个工作示例——只有截图。嘘。不能教的人？如果我听起来很痛苦，那是因为我几个月前在这上面花了 4 个小时，而现在，突然之间，噗，这周它就停止了工作。和我的其他 FB 编程经历相似：由于可怕的文档，完成简单的任务需要几个小时，然后有一天，噗！停止工作。我讨厌脸书。

我又四处寻找，结果发现 CSS 不再有效，因为 fb 改变了他们的一些编程！所以这是6个小时的厕所。仇恨不再是一个足够强烈的词来描述我现在对 facebook 的感受。

已解决：显然，此功能在 2013 年 1 月 20 日左右停止工作。截至 2013 年 2 月 6 日，由于大众的需求，Facebook 似乎已经纠正了这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:39:05.540

Facebook 已经删除了将自定义 CSS 嵌入到likebox 中的选项。

出于安全考虑，他们这样做了，问题跟踪器中的主要票证在这里：

[https://developers.facebook.com/bugs/134065666769816](https://developers.facebook.com/bugs/134065666769816)

这里还有两张讨论它的票：

[http://developers.facebook.com/bugs/551565398209379](http://developers.facebook.com/bugs/551565398209379)

[https://developers.facebook.com/bugs/252607348205681/](https://developers.facebook.com/bugs/252607348205681/)

# visual-c++ - 如何处理 Visual Studio C++ 中的访问冲突？

> ID：14610879
> 
> 赞同：2
> 
> 时间：2013-01-30T18:14:39.187
> 
> 标签：visual-c++, exception-handling, access-violation, structured-exception

通常访问冲突会终止程序，我无法使用`try`and捕获 Win32 异常`catch`。有没有办法让我的程序运行，即使在访问冲突的情况下？最好我想处理异常并向用户显示发生了访问冲突。

编辑：我希望我的程序非常健壮，即使是针对编程错误。我真正想避免的事情是程序终止，即使以某些损坏状态为代价。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:42:40.723

在 Windows 中，这称为结构化异常处理 (SEH)。有关详细信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657%28v=vs.85%29.aspx)

实际上，您可以注册以在发生异常时获取回调。出于显而易见的原因，您不能对每个异常都这样做。

使用 SEH，您可以检测到很多异常，包括访问违规，但不是全部（例如双堆栈错误）。即使有可检测到的异常，也无法保证异常发生后的 100% 稳定性。但是，通知用户、记录错误、将消息发送回服务器并正常退出可能就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:51:13.047

我首先要说你的问题包含一个矛盾：

> 编辑：我希望我的程序非常健壮，......我真正想要避免的是程序终止，即使以某些损坏状态为代价。

在损坏状态的情况下继续跛行的程序并不强大，它是一种责任。

* * *

第二，各种意见。关于：

> 编辑：我希望我的程序非常健壮，即使是针对编程错误。...

当*编程错误*是指所有错误时，这是​​不可能的。

如果通过*编程错误*您的意思是：“程序员滥用了某些 API，我想要错误消息而不是崩溃，那么编写所有代码并内置双重检查：例如，始终在使用前检查所有指针是否为 NULL，即使“它们不能如果程序员没有犯错，则为 NULL”等。（哦，您也可以考虑*不*使用 C++ ;-)

但是恕我直言，在任何 C++ 应用程序中都必须接受一定数量的程序崩溃，无论是什么错误。（除非它是微不足道的，或者你测试它用于军事或医疗用途（即使那样......）。）

* * *

其他人已经提到了[SEH——](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657%28v=vs.85%29.aspx)这是一个“简单”的问题`__try / __catch`。

[也许您可以尝试与Windows 错误报告 (WER)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb513636%28v=vs.85%29.aspx)成为朋友，而不是尝试捕获程序内部的错误——我从未拉过这个，但据我了解，您可以通过`OutOfProcessException...` [回调函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd408165%28v=vs.85%29.aspx)完全自定义它。

# c# - 添加基于权限的导航链接？

> ID：14610881
> 
> 赞同：0
> 
> 时间：2013-01-30T18:14:50.933
> 
> 标签：c#, asp.net

我在 asp .net 中有以下母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="KezberProjectManager.master.cs" Inherits="KezberProjectManager.KezberProjectManager" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet"/>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet"/>

    <style type="text/css">
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Test</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Calendar</a></li>
              <li><a href="#">Boss Stuff</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <form id="form1" runat="server">
    <div>
       <div class="container">
       <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

       </asp:ContentPlaceHolder>
    </div> <!-- /container -->

    </div>
    </form>
      <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
   <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html> 
```

每个页面的导航都是这样的：

```
 <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Test</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Calendar</a></li>
              <li><a href="#">Boss Stuff</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div> 
```

我想不通的是，如果管理员请求页面，我怎么能做到这一点，添加 Boss Stuff 链接？

就会话管理而言，一切都很好，我可以在我的代码中确定用户是否是管理员，我不知道只有当他在页面加载时是管理员时如何添加老板链接。

执行此操作的“最佳”或标准做法可能是什么？

谢谢

我的意思是，从字面上看，我如何从我的页面加载事件中添加指向我的导航的链接。我如何从 CS 转到 aspx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:27:52.873

假设您正在使用 .Net 成员资格，如果您想在页面标记中执行此操作，则可以这样做：

```
<% if (Page.User.IsInRole("Admin"))
   { %>
       <a href="#">Boss Stuff</a>
 <% } %> 
```

# ios - 将值从一个视图控制器传递到另一个视图控制器的问题

> ID：14610886
> 
> 赞同：0
> 
> 时间：2013-01-30T18:15:06.537
> 
> 标签：ios, xcode, properties, uiviewcontroller

我试图在一个视图中获取输入到 UITextFields 中的文本，并在按下按钮时将这些值传递给不同的视图控制器。在第一个视图控制器（CreateViewController）中，我有：

```
#import <UIKit/UIKit.h>
#import <MessageUI/MFMailComposeViewController.h>
@class ThePreviewViewController;
@interface CreateViewController : UIViewController <UIAlertViewDelegate, MFMailComposeViewControllerDelegate> {
    UIDatePicker *datePicker;
    UIDatePicker *datePicker2;
    ThePreviewViewController *_thePreview;
}
@property (nonatomic, retain) IBOutlet UITextField *toName;
@property (nonatomic, retain) IBOutlet UITextField *fromName;
@property (nonatomic, retain) IBOutlet UITextField *issue;
@property (nonatomic, retain) ThePreviewViewController *thePreview;
@property (nonatomic, retain) IBOutlet UITextField *expire;
@property (nonatomic, retain) IBOutlet UITextField *loveMessage;
@property (nonatomic, retain) IBOutlet UITextField *gift;
-(IBAction)build;
@end 
```

实现文件为：

```
#import "ThePreviewViewController.h"
@implementation CreateViewController
@synthesize toName, fromName, gift, loveMessage, issue, expire, datePicker, datePicker2;
@synthesize thePreview = _thePreview;

-(IBAction)preview {
    if (_thePreview == nil) {
        self.thePreview = [[ThePreviewViewController alloc] initWithNibName:@"ThePreviewViewController" bundle:[NSBundle mainBundle]] ;
    }
    _thePreview.issue.text = issue.text;
    _thePreview.gift.text = gift.text;
    _thePreview.expire.text = expire.text;
    [self.navigationController pushViewController:_thePreview animated:YES];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

但是，在我连接所有插座后，ThePreviewViewController 中的标签保持为空。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:39:35.817

看起来这是由于之前在这里讨论过的一个问题：当您实例化您`ThePreviewViewController`的 UIKit 实例时，还不能设置它们的属性。

解决方案是在您的（或更紧凑地使用 NSDictionary）上创建和设置`NSString`属性，然后在其事件处理程序中使用它来设置其 UIKit 元素的属性。`ThePreviewViewController``ViewWillAppear`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:27:06.273

您应该设置一个 NSString 属性，而不是在**ThePreview VC**中设置 UITextField 文本。这是因为 UITextField 可能尚未加载，并且**_thePreview.issue.text = issue.text**将不起作用，因为**_thePreview.issue**仍未创建。**因此，在您的ThePreview VC**中创建一个属性（例如 NSString *issueString），然后在您的**CreateViewController**中将该属性设置为**_thePreview.issueString = issue.text**，最后在您的**ThePreview VC**中使用**self在 vi** **​​ewDidLoad**方法中设置您的 textField 文本。 **issue.text = self.issueString** ;

 ******希望这可以帮助。******

# javascript - 通过标签点击验证表单

> ID：14610888
> 
> 赞同：2
> 
> 时间：2013-01-30T18:15:13.773
> 
> 标签：javascript, jquery, jquery-validation-engine

我目前正在使用 jquery 验证和表单。[我在这里](https://github.com/posabsolute/jQuery-Validation-Engine)遇到了一个很棒的插件，到目前为止效果很好。我遇到了墙，因为我有一个表单在 jquery 选项卡内分成几个部分。我在这些选项卡中放置了`<a>`充当按钮`Next`和`Previous`. `submit`我想在单击 `Next`或时验证字段，而不是单击验证`Provious`。我尝试绑定到单击验证，但没有得到任何结果。如何通过单击`<a>`标签来验证表单？这是一个样机[示例](http://webprolearner.ueuo.com/TabsNextPrev/)

```
//jquery tabs- Next and Previous
<script>
    $(function() {

        var $tabs = $('#tabs').tabs();

        $(".ui-tabs-panel").each(function(i){

          var totalSize = $(".ui-tabs-panel").size() - 1;

          if (i != totalSize) {
              next = i + 2;
              $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
          }

          if (i != 0) {
              prev = i;
              $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
          }

        });

        $('.next-tab, .prev-tab').click(function() { 
               $tabs.tabs('select', $(this).attr("rel"));
               return false;
           });

    });
</script>

//Jquery Validation
<script>
    jQuery(document).ready(function(){
        // binds form submission and fields to the validation engine
        jQuery("#formID").validationEngine();
    });

    function checkHELLO(field, rules, i, options){
        if (field.val() != "HELLO") {
            // this allows to use i18 for the error msgs
            return options.allrules.validate2fields.alertText;
        }
    }
</script>

//Jquery Bind <a> to validate 
<script>
$(document).ready(function() {
     $("form").validate();
     $("a").bind("click", function() { alert($("form").valid()); });
});
</script> 
```

**HTML**

```
<div id="tab-1" class="ui-tabs-panel ui-tabs-hide">
            <form id="formID" class="formular" method="post">
            <span>Name:</span><br>
            <input value="" class="validate[required] text-input" type="text" name="req" id="req" />    
            <label>
                <span>Favorite sport 2:</span>
                <select name="sport2" id="sport2" multiple class="validate[required]">
                    <option value="">Choose a sport</option>
                    <option value="option1">Tennis</option>
                    <option value="option2">Football</option>
                    <option value="option3">Golf</option>
                </select>
            </label>
            </form>           
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:23:19.710

您正在动态添加`<a>`标签，因此您需要使用*(live is deprecated, Thanks jbabey)*，而不是.~~[`live()`](http://api.jquery.com/live/)~~ [`on()`](http://api.jquery.com/on/) *`bind`*

 *这样，现在或将来添加的任何匹配元素都将被正确绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:26:18.590

如`.live()`已弃用，您应按`.on()`如下方式使用：

```
$(document).on("click", ".next-tab, .prev-tab", function(() { 
           $tabs.tabs('select', $(this).attr("rel"));
           return false;
       }); 
```*

# asp.net - 使用实体框架更改主键

> ID：14610889
> 
> 赞同：0
> 
> 时间：2013-01-30T18:15:16.797
> 
> 标签：asp.net, entity-framework, asp.net-mvc-4

首先，ASP.NET 和 MVC 4 对我来说是非常新的（+- 一个月），如果这是一个不好的问题，我很抱歉。

我有两个班“Turma”和“Curso”

```
public class Turma
    {
        [Key]
        public int idCurso { get; set; }
        public string RefTurma { get; set; }
        public Curso Curso { get; set; }
        public string NomeCurso { get; set; }
    } 
```

和

```
public class Curso
    {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.None)]
        public int idArtigoAT { get; set; }
        public string ConteudoPrograma { get; set; }
        public virtual ICollection<Turma> Turmas { get; set; }
    } 
```

在此之后，我开始迁移并更新了数据库。到目前为止一切顺利，但随后出现问题。

由于新信息，主键类型应为 varchar(18)。我试图改变，但到目前为止没有成功。

任何想法或解决方案？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:01:07.847

不，你想要的是一个“Id”属性和一个“MyCustomUniqueName”属性。此自定义属性应该是数据库中的唯一索引。恕我直言，这是针对这种情况的最佳设计。

# asp.net-mvc - 家庭控制器的 ASP.Net MVC 路由问题

> ID：14610891
> 
> 赞同：0
> 
> 时间：2013-01-30T18:15:21.480
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我创建了一个示例 Internet MVC 应用程序。然后使用索引视图创建 ProductsController。

然后在路由中，我使用以下路由规则将产品 url 映射到 products/prodname/id。

```
routes.MapRoute(
                name: "ProdDef",
                url: "{controller}/{name}/{id}/{action}",
                defaults: new { controller = "Products", action = "Index", id = UrlParameter.Optional, name = UrlParameter.Optional }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

但在此之后，联系页面将我重定向到主页索引控制器操作。?? 为什么这样？我是否遗漏了什么以及为什么在为产品创建一个规则后其他操作停止工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:19:42.063

将您的第一条路线更改为类似

```
routes.MapRoute(
    name: "ProdDef",
    url: "products/{name}/{id}/{action}",
    defaults: new { controller = "Products", action = "Index", id = UrlParameter.Optional, name = UrlParameter.Optional }
); 
```

否则，这条路线几乎可以匹配任何东西。请记住，路线的顺序很重要，因为将按照该顺序尝试匹配。

**编辑 ：**

原因是默认情况下路由处理程序在`{controller}/{name}`和之间没有区别`{controller}/{action}`。它们的格式相同，只是参数名称不同。

以下是给定 URL（例如`/Home/Index`.

第一条路线将首先尝试，有 4 个参数，其中 2 个是可选的，因此如果它们不存在，则不会给出任何值，为您留下以下值：

*   控制器：首页
*   名称：索引
*   action : null 但将默认为指定的索引
*   身份证：空

如您所见，两个非可选参数都已填充，因此路由将匹配，但不会像您预期的那样运行。无论 URL 是什么，同样的事情都会发生，只要它具有`controller`and的值`name`。这让我想到了我原来的答案，如果您希望第一个路由*仅*匹配产品的传入 URL，您需要添加一些允许路由处理程序区分它的内容。通过用`{controller}`硬编码值替换`products`，现在该路由将仅匹配以产品开头的传入 URL，留下任何其他内容继续按预期沿着路由链向下传递。

希望能为您解决问题。

# sql-server - 将单元格区域用作与 SQL Server 的数据连接中的值

> ID：14610897
> 
> 赞同：2
> 
> 时间：2013-01-30T18:15:28.897
> 
> 标签：sql-server, excel, excel-2010

我正在使用 Excel 中的一个工具来快速验证对一组数据库的数据更新。

在工作表 1 中，我将拥有源数据，它由 5 列组成；A 列是主键。这以 CSV 格式提供并复制/粘贴到工作表中。

在工作表 2 中，我想与数据库机器建立数据连接，以过滤工作表 1、A 列的值，以便仅返回和显示工作表 1 中的那些主键。

我尝试在“连接属性”对话框中查看设置参数，但该按钮被禁用：

![http://i.imgur.com/kJVRnbV.png](../Images/6aef99ccc874cc613132c904b594694b.png)

先感谢您。

编辑：这是 Excel 2010，这张图片显示了我用来在工作表 2 上创建连接的方法：

![http://i.imgur.com/hi0hs5E.png](../Images/59d8a782dc2f2341f6014425c8b63d54.png)

编辑 2：尝试使用 Microsoft Query 创建连接，但仍处于禁用状态。

![](../Images/8a6d96e3c29066123bae68175ee143ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:38:34.620

您只能使用 Microsoft Query 在 Excel 中添加和管理查询参数。因此，当您创建连接时，在“来自其他来源”按钮下拉菜单中，选择“来自 Microsoft Query”而不是“来自 SQL Server”（或任何其他来源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T11:28:33.997

您可以将查询参数添加到 SQL 查询以及 Microsoft 查询，只需`?`在 SQL 查询中放置一个，参数按钮就会变为活动状态，或者下次刷新连接时会显示一个对话框提示输入数据。

看起来多个参数是可能的，但是我还没有找到它们的有效语法。

# objective-c - 键入快速枚举的正确值

> ID：14610903
> 
> 赞同：1
> 
> 时间：2013-01-30T18:15:49.100
> 
> 标签：objective-c, xcode, arrays, cocoa, fast-enumeration

我建立了一个模型（核心数据），称为动物。我必须按特定顺序访问它，为此我使用下面列出的代码。我应该在 for 循环中输入什么而不是 XXXXXXXXX？

```
NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"order" ascending:YES];
NSArray *sortedArray = [animalscontroller.arrangedObjects sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]];
for (XXXXXXXX *a in sortedArray)
{

...........    

} 
```

我被告知我必须输入模型的名称，所以在这种情况下是“Animals”，但这给了我一个错误，说变量 Animals 没有被声明。我对可可编程很熟悉。

谢谢你

此致

伊戈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:29:43.513

“动物”是您的实体名称，而不是您的*班级*名称。除非您已指定“动物”具有自定义类，否则您想要的类名称是`NSManagedObject`，或者您可以只使用`id`.

# javascript - javascript可以检测一个窗口是否打开了另一个窗口？

> ID：14610904
> 
> 赞同：3
> 
> 时间：2013-01-30T18:16:04.053
> 
> 标签：javascript, new-window

我编写了一个网页，其行为类似于一种信息亭：当它打开时，它会检测它是否是控制窗口。如果没有，它会加载控制窗口页面，并在新窗口中再次打开索引页面，以便检测打开器指针。然后第二个窗口包含一个链接，该链接在第三个窗口中打开任意 url。我的控制器窗口检测第二个窗口是否打开，如果有任何其他窗口聚焦，它会将那个窗口带回到前面。

这个任意网站在过程中的某个时间点打开了另一个测验窗口（不受我的网站控制），但是这个新窗口不断被推到后面，因为我的代码不断将我的第二个窗口向前推进。有**什么**方法可以检测第二个窗口是否打开了另一个窗口，如果是，阻止**我的**窗口获得焦点？

下面的代码在主页（index.php）上运行

```
var bypass = <?=($b==1?'true':'false')?>;
if(!bypass && !window.opener && navigator.appVersion.indexOf('Mac') != -1){
    window.location = '/labs/rearWindow.php';
} 
```

下面是我的代码，它在控制器窗口（rearWindow.php）上运行

```
var mainWindow = null;
var accelWindow = null;
var windowSettings = 'channelmode=yes,fullscreen=yes,height='+screen.availHeight+',width='+screen.availWidth+',left=0,top=0';

$(document).ready(function(){
    window.moveTo(0,0);
    window.resizeTo(10, 10);
    checkWindow();
});

function checkWindow(){
  if(mainWindow == null || mainWindow.closed){
    // If the main window doesn't exist or it's been closed, open new window to the index
    mainWindow = window.open('/labs/index.php', 'mainLabWindow', windowSettings);
    if(!mainWindow){
      // If the window didn't open in the satement above (usually because pop-ups are blocked), open up current window to an alternate url
      window.location = '/labs/index.php?b=1';
    }
  }else if(mainWindow != null && !mainWindow.closed && accelWindow != null && !accelWindow.closed){
    // If main window is already open and it hasn't been closed and the AR window has been opened and hasn't been closed
    accelWindow.focus();
  }else if(mainWindow != null && !mainWindow.closed && accelWindow != null && accelWindow.closed){
    // If main window has been opened and hasn't been closed and AR window has been opened but has been closed; then go back to main window
    accelWindow = null;
    mainWindow.focus();
  }else if(mainWindow != null && !mainWindow.closed){
    // If main window has been opened and has not been closed
    mainWindow.focus();
  }
  setTimeout(checkWindow, 500);
} 
```

非常感谢您的帮助和反馈。

在我调用 accelWindow.focus() 的第一个 else if 中，我想检查 accelWindow 是否有任何子窗口（这意味着他们打开了测验），如果有，则不调用 accelWindow.focus()。

PS这是我的第一篇文章/问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:56:33.493

您可以在同一浏览器窗口、同一应用程序内的某种框架中显示这些“窗口”内容。您可以使用 ligthbox。使用基于浏览器的应用程序可以处理更多窗口似乎很不舒服。

# python - 如何在treeView中设置多选？

> ID：14610911
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:16:49.353
> 
> 标签：python, pyqt

我有基于 QAbstractItemModel 的 treeView，但现在我不知道如何在我的模型中设置多项选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:54:38.943

我假设您将要以编程方式执行此操作？

首先，选择不受模型控制，而是由视图控制。这是因为一个模型可以连接到多个视图，每个视图可以有不同的选择（视图是独立的，除了它们从模型中显示的数据）。

无论如何，您将希望从树视图中获取“选择模型”

`selection_model = treeview.selectionModel()`

然后你可以打电话

```
selection_model.select(model_index,QItemSelectionModel.SelectCurrent) 
```

根据指定的重复选择您喜欢的任何项目（您可以通过调用**数据**模型（而不是选择模型）找到 QStandardItem()的`model_index`行索引。`indexFromItem(item)`

 **无论如何，我建议您查看 treeview selectionModels 的文档，因为这将进一步帮助您（如果没有比单行问题更多的信息，真的无法提供更多帮助！）**

# css - 对齐跨度彼此相邻

> ID：14610915
> 
> 赞同：2
> 
> 时间：2013-01-30T18:17:08.973
> 
> 标签：css

我在将文本与其他没有内容的跨度对齐时遇到了一些麻烦。看看这里：http: [//jsfiddle.net/hp8Ak/](http://jsfiddle.net/hp8Ak/)

（如您所见，第一个跨度向下跳）。

这是我的CSS：

```
span {
    display: inline-block;
    width: 50px;
    height: 50px;
    font-size: 12px;
    background: #377ca2;
    color: #fff;
} 
```

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:19:13.603

添加`vertical-align:top;`

**[jsFiddle 示例](http://jsfiddle.net/hp8Ak/1/)**

# model-view-controller - MVC 模式中的多个控制器

> ID：14610917
> 
> 赞同：0
> 
> 时间：2013-01-30T18:17:13.467
> 
> 标签：model-view-controller, controller

我试图更多地掌握 MVC 模式，并有一个理论应用：

具有自己视图的客户端应用程序从连接到数据库的服务器应用程序请求数据并将请求的数据返回给客户端视图。客户端有自己的小型数据库，可以执行显示在客户端视图中的小型查询。

问题是：这里有多个控制器吗？每个客户端一个，另一个在服务器上，还是我试图对这个问题应用错误的模式？

如果这是在错误的站点上发布的，请随时迁移它，如果您需要更多解释，我会尝试更多解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:20:42.267

MVC 模式适用于用户界面。它也适用于整个系统，在您的情况下，它也是客户端和服务器。根据您所说，您的客户端可以在其中包含 MVC，因为它进行显示。服务器可以与 MVC 模式实现的 M 部分交互。但我不认为您系统的服务器部分在其中实现了很多 MVC 模式。

有时，将客户端视为服务器的用户，将服务器视为系统中的自包含系统，将服务器的客户端接口视为具有一种 MVC，具有非常有限的控制操作集和非常死板的看法。我认为这在这里没有用。

# ruby - 注释 Ruby 结构以包含 #to_yaml 上的锚点/引用

> ID：14610918
> 
> 赞同：3
> 
> 时间：2013-01-30T18:17:15.423
> 
> 标签：ruby, hash, yaml

我有一些带有互锁结构的大哈希（>10⁵ 键）。它们作为 YAML 存储在磁盘上。我想通过在 YAML 中使用锚点和引用来避免重复，但我无法弄清楚是否有办法在哈希中隐式执行此操作，以便该`#to_yaml`方法正确标记锚节点。

所需的 YAML：

```
--- 
parent1:
  common-element-1: &CE1
    complex-structure-goes: here
parent2:
  uncomment-element-1:
    blah: blah
  <<: *CE1 
```

红宝石代码：

```
hsh = {
  'parent1' => {
    'common-element-1' => {
      'complex-structure-goes' => 'here',
    },
  'parent2' => {
    'uncommon-element-1' => {
      'blah' => 'blah',
    },
    '<<' => '*CE1',
  },
} 
```

引用非常简单——但是如何在 Ruby 哈希`&CE1`中的项目中嵌入锚点？`'common-element-1'`

我想尽可能多地使用原生 Ruby 原始类型（如`Hash`），而不是使用构建器和发射器等——而且我**绝对**不想手动编写 YAML！

我看过在[不破坏锚点和别名的情况下读写 YAML 文件？](https://stackoverflow.com/questions/11665897/read-and-write-yaml-files-without-destroying-anchors-and-aliases)和[它的亲戚](https://stackoverflow.com/questions/13583588/read-and-write-yaml-files-without-destroying-anchors-and-aliases)，在其他地方，但还没有找到答案——至少不是我所理解的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:31:07.833

如果您使用相同的 Ruby 对象，YAML 库将为您设置引用：

```
> common = {"ohai" => "I am common"}
> doc = {"parent1" => {"id" => 1, "stuff" => common}, "parent2" => {"id" => 2, "stuff" => common}}
> puts doc.to_yaml
---
parent1:
  id: 1
  stuff: &70133422893680
    ohai: I am common
parent2:
  id: 2
  stuff: *70133422893680 
```

不过，我不确定是否有一种直接的方法来定义作为彼此子集的哈希。也许稍微调整一下你的结构是有道理的？

# prolog - 按列表中的相同字段进行 Prolog 搜索

> ID：14610921
> 
> 赞同：0
> 
> 时间：2013-01-30T18:17:32.997
> 
> 标签：prolog, visual-prolog

我有那些结构的数据库

```
 my_family( person("FN","SN", unempl(), 20), 
                    person("FN2","SN", work("Soft", 200), 30), 
                    [person("FN3","SN", work("HP" , 10), 13), 
                    person("FN4","SN", work("LP", 200), 1), 
                    person("FN5","SN" , work("qwerty", 300), 1)]).

 domains
    family = person*.
    person = person(string Name, string LastName, work, integer Age).
    work = work(string Corp, real Salary) 
```

我如何获得家庭，与孩子同龄？

我试试

```
 clauses
    length_of([], 0).
    length_of([_|T], L):-
        length_of(T, TailLength),
        L = TailLength + 1.

    ....

        my_family(person(_, _, _, FA), person(_, _, _, MA), Child),

        getName(Child).

        getName([]).
        getName([person(N, S, _, AC)|T]):-
            findall(1, _=person(_, S, _, AC), L),
            length_of(L, LN),
            2 <= LN,
            stdIO::writef("Family: %\n\n\n", S),
            getName(T). 
```

但它不起作用，似乎 findall 返回一个只有一个元素的列表 L。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:26:34.023

我认为你应该在 findall 中放弃 AC

```
findall(1, _=person(_, S, _, _), L), 
```

否则，该列表仅限于与当前人年龄相同的人。免责声明：我无法测试该代码，并且它的语法非常不标准：在 ISO Prolog 中，findall/3 在没有 _=person(...) 的情况下工作，但这可能是我不知道的 Visual prolog 的一个功能

# php - 链接到静态页面

> ID：14610922
> 
> 赞同：2
> 
> 时间：2013-01-30T18:17:36.903
> 
> 标签：php, yii

我是一个完整的 Yii 新手，所以请原谅一个简单的问题。我一直在阅读各种帖子，但找不到任何有用的东西。我要做的就是设置一个 Yii 站点（我已经完成了），然后使用我的主布局链接到一个静态页面。

以下是我认为相关的三个文件：

*   **index.php：**我在主页上显示的视图，作为主布局的内容
*   **terms_of_use.php：**我没有成功尝试出现在主布局中的视图
*   **main.php：**我的主布局

在主布局的页脚中，静态页面的链接是：

```
<a href="index.php?r=site/page&view=terms_of_use">Terms of Use</a> 
```

当我点击它时，它会在浏览器地址栏中生成我认为正确的网址：

```
http://localhost/Company/index.php?r=site/page&view=terms_of_use 
```

但显示的是 index.php 的内容，而不是 terms_of_use.php。我正在使用默认的 SiteController。index.php 有什么我不知道的特别之处，还是我在做其他愚蠢的事情？谢谢你的帮助。

**意见/网站/index.php：**

```
<?php
/* @var $this SiteController */

$this->pageTitle=Yii::app()->name;
?>

<div id="content" class = "clearfix">
    <div class="threeColBlock">
        <div class="padded">
            <h2 class="pageTitle">Heading 1</h2>
                <p>Blurb 1</p>
        </div>
    </div>
    <div class="threeColBlock">
        <div class="padded">
            <h2 class="pageTitle">Heading 2</h2>
            <p>Blurb 2</p>
        </div>
    </div>
    <div class="threeColBlock">
        <div class="padded">
            <h2 class="pageTitle">Heading 3</h2>
            <p>Blurb 3</p>
        </div>
    </div>
</div> 
```

**视图/站点/页面/terms_of_use.php：**

```
<?php
/* @var $this SiteController */

$this->pageTitle=Yii::app()->name . ' - About';
$this->breadcrumbs=array(
    'About',
);
?>

<div id="content" class = "clearfix">
    <h2 class="pageTitle">Terms of Use</h2>
    <div class = "smallText">
        <p>
            Some legal junk
        </p>
    </div>
</div> 
```

**视图/布局/视图/main.php：**

```
<?php /* @var $this Controller */ ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="en" />

    <!-- blueprint CSS framework -->
    <link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/screen.css" media="screen, projection" />
    <link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/print.css" media="print" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/ie.css" media="screen, projection" />
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/main.css" />
    <link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/form.css" />
    <link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/marketing.css">
    <link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/cssmenu.css" media="screen" />

    <title><?php echo CHtml::encode($this->pageTitle); ?></title>
</head>

<body>

    <div id="header"  class="clearfix">
        <div id="logo"><image src="images/logo,56x38,trans(white).gif"></div>
        <div id="logoName">Company</div>
        <div id="topRight">Bla bla bla</b></div>
    </div>

    <!-- Menu -->
    <div id='cssmenu'>
        <ul>
            <li class='active'><a href='dummy.com'><span>home</span></a></li>
            <li class='has-sub'><a href='#'><span>products</span></a>
                <ul>
                    <li><a href='dummy.com'><span>prod1</span></a></li>
                    <li><a href='dummy.com'><span>prod2</span></a></li>
                    <li class='last'><a href='dummy.com'><span>prod3</span></a></li>
                </ul>
            </li>
            <li><a href='dummy.com'><span>about</span></a></li>
            <li class='last'><a href='dummy.com'><span>contact</span></a></li>
        </ul>
    </div>

    <div id="mainImageContainer">
        <div id="mainImage">
            <image src = "images/main_image.jpg">
        </div>
    </div>

    <?php echo $content; ?>

</div><!-- page -->

    <div id="footer">
        Copyright &copy 2011 Company. All rights reserved. | <a href="index.php?r=site/page&view=terms_of_use">Terms of Use</a>
    </div>

</body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:05:30.497

找到了。我在 config/main.php 中启用了 urlManager。如果我将原始链接更改为以下链接，那么我会得到我想要的。

```
http://localhost/Company/index.php/site/page/view/terms_of_use 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:48:21.467

尽量不要对 url 进行硬编码，而是使用 , 之类的函数[`createUrl`](http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail "http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail")（它还有其他变体）。

当您对 url 进行硬编码时，可能会出现您面临的问题，`createUrl`考虑到您的 urlManager 配置，并相应地生成一个 url，因此当您进行更改时，您不必转到每个视图并再次更改 url。

你可以像这样使用它：

```
<a href="<?php echo Yii::app()->createUrl('/site/page',array('view'=>'terms_of_use')); ?>">About</a> 
```

或使用[`CHtml::link`](http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail")：

```
echo CHtml::link('About',array('/site/page', 'view'=>'temrs_of_use')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:22:45.990

关于您的具体问题，我相信您可能已经忘记了`actions()`在默认站点控制器中覆盖该方法的步骤 - 尽管这引发了一个问题：您使用的是哪个版本的 Yii 框架？覆盖已经包含在 Yii 1.1.12 中。

另外，根据对该 yii wiki 文章的评论：

> 如果您碰巧使用了 accessRules，请不要忘记将“页面”（或您拥有的任何名称）添加到允许的操作中。

[http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/](http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/)是一篇关于在 Yii 中使用静态页面的好文章，其中大部分内容：

> 首先，在默认的 SiteController （或者你喜欢的其他控制器）中，重写 actions() 方法，如下所示，

```
public function actions()
{
    return array(
        'page'=>array(
            'class'=>'CViewAction',
        ),
    );
} 
```

> 其次，创建一个文件夹protected/views/site/pages。
> 
> 第三，将每个静态页面保存为该文件夹下的 PHP 文件。例如，我们可以将“关于本站”页面保存为 about.php。请注意，这些页面将使用应用程序的默认布局。因此，每个文件中只需要保存主要内容。
> 
> 我们完了！要访问静态页面，例如 about 页面，我们可以使用以下 URL：

```
http://www.example.com/index.php?r=site/page&view=about 
```

# php - 如何解决“批量删除”模块的问题？

> ID：14610926
> 
> 赞同：0
> 
> 时间：2013-01-30T18:17:53.623
> 
> 标签：php, mysql, drupal

我为 Drupal 7.x 安装了“批量删除”模块，并尝试批量删除所有提要项目（1575 个项目），但是当我单击删除按钮时，它只显示带有消息“在 80 次操作中删除 1575 个节点”的页面，没有错误或警告。所以页面只保留此消息，但不删除任何内容。饲料项目保持原位，仅此而已。怎么了？

[批量删除-7.x-1.2.tar.gz](http://ftp.drupal.org/files/projects/bulkdelete-7.x-1.2.tar.gz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:22:18.563

我对其他内容类型也有类似的问题。我只是点击 phpmyadmin 并找到表并在发生类似有趣的事情时删除那里的数据。

清除缓存以确保。

# css - Topdiv 宽度为 100% 但正文宽度为 600px

> ID：14610927
> 
> 赞同：0
> 
> 时间：2013-01-30T18:17:54.323
> 
> 标签：css, html, width

我正在尝试创建一个 div (topbar) (width = 100%;)。在此之下，我希望我的主要内容与我的主要内容放在一个 div 中。这需要是 600 像素的宽度和屏幕中心。

通常我会设置 body width = 600px 和 margin: auto，但是我的 topbar 会缩短。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:21:05.497

无需触摸body元素的宽度

```
#topbar {
    width:100%;
    height: 150px; // Whatever height you want
 }

 #mainContent {
   width: 600px;
   margin: 0 auto; // Center on the screen
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:28:54.967

如果我理解正确，`#topbar`如果浏览器窗口小于 600 像素，您想要扩展 100% 的当前未执行的页面宽度......因为`#maincontent`将页面推出超过 600 像素？

如果页面宽度小于 600 像素，我相信您需要`body { min-width:600px; }`强制设置为 600 像素。`topbar`

这是一个潜在解决方案的小提琴：http: [//jsfiddle.net/z2dEK/1/](http://jsfiddle.net/z2dEK/1/)

这是CSS：

```
body {
    background:#ccc;
    min-width:600px;
}
#topbar {
    background:#000;
    height:100px;
    width:100%;
}
#maincontent {
    background:#fff;
    margin:auto;
    width:600px;
    height:100px;
} 
```

# php - 检查文件复制是否成功

> ID：14610928
> 
> 赞同：2
> 
> 时间：2013-01-30T18:17:59.243
> 
> 标签：php, file, copy

运行命令后，验证文件复制成功`copy($uploadedFile, "pdf/".$fullFileName);`的**最快**和**最有效的方法是什么？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:20:04.450

这样就够了不是吗？

```
if (!copy($file, $newfile)) {
    echo "failed to copy $file...\n";
} 
```

参考： http: [//php.net/manual/en/function.copy.php](http://php.net/manual/en/function.copy.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:21:34.013

如果您查看[PHP 文档中的复制功能](http://php.net/manual/en/function.copy.php)，您会看到：

```
Returns TRUE on success or FALSE on failure. 
```

所以，一些简单的事情：

```
if(!copy($uploadedFile, "pdf/".$fullFileName)) {
    // Failure code
} 
```

或者：

```
$returnCode = copy($uploadedFile, "pdf/".$fullFileName);
if(!$returnCode) {
    // Failure code
} 
```

就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T03:51:50.763

您可以比较大小 whlist 复制 - 如果大小等于我们可以假设复制完成..

```
$fs1=$fs='';

$filename = 'test.zip'; // copy from ftp or slow copy..

  if (ob_get_level() == 0) ob_start();

  for ($i = 0; $i<25; $i++){

          echo "<hr> Compare \n";
          echo "<br>fs1: $fs1";

          $fs='';
          $fs = filesize($filename);
          echo "<br>fs: $fs";
          if ( $i > 0 )
              if (  $fs1 === $fs ) break;

          $fs1 = $fs;

          ob_flush();
          flush();
          sleep(2);
          clearstatcache();
  }

  echo "<br>Done copying.";
  ob_end_flush(); 
```

# xcode - 我在 Interface Builder 的 Size Inspector 下完全看不到任何东西。我希望能够设置自动

> ID：14610929
> 
> 赞同：23
> 
> 时间：2013-01-30T18:18:00.117
> 
> 标签：xcode, interface-builder

我在 Interface Builder 的 Size Inspector 下根本看不到任何设置，我的 View、所有标签和所有按钮都是空白的。我正在使用 xcode 4.6 并且未选中“使用自动布局”，并且指标（大小、状态栏、顶栏、底栏）都是“无”。我需要能够控制自动调整掩码，但为什么我看不到任何大小属性？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-19T19:23:32.600

切换到 Size Inspector 选项卡后，在图标正下方有一个小标题，上面写着“查看”。如果您将鼠标悬停在上面，则会出现一些显示“显示”的文本，因为该部分显然可以折叠起来。单击标题应该会导致您希望出现的选项。

我希望他们能更清楚地说明这一点，因为我也完全错过了它，并且多次重新启动 Xcode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T15:19:37.653

我在使用 Xcode 5.0 时遇到了这个问题，但经过进一步调查，发现功能障碍运行到更高的程度 - Xcode 中的所有 Inspector 视图对于每个控件都是空白的，并且导航器按钮也不起作用。

罪魁祸首似乎是版本控制冲突。当我重新检查主干时，Xcode 恢复了预期的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T10:57:45.957

这对我有用......

1.  清除菜单 -> 最近的文件我从最近的文件中清除了上次打开的情节提要

2.  重启 Xcode

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-29T20:28:31.270

调整 Xcode 窗口的大小让我的事情再次变得正确 - 去看看。

# drawing - Windows Phone 8 - 绘制单个像素

> ID：14610930
> 
> 赞同：0
> 
> 时间：2013-01-30T18:18:05.387
> 
> 标签：drawing, windows-phone-8, pixel

我可以在 Win 8 Phone SDK 中使用哪些绘图方法在屏幕上手动绘制单个像素，例如在绘图应用程序中？

它是 c#、c++ 还是其他东西都没有关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:48:25.787

使用 WritableBitmap.Pixels 集合直接操作像素并通过设置 Image.SetSource(myWriteableBItmap) 将它们显示在屏幕上。

由于 WriteableBitmap 有点稀疏，您应该选择 WriteableBitmapEx，它为 WriteableBitmap 添加了许多 2D 渲染函数。[在@http ://writeablebitmapex.codeplex.com](http://writeablebitmapex.codeplex.com)上查看更多信息

对于屏幕绘图，您应该考虑使用 InkPresenter，因为它更适合处理这些用例 @ [http://www.nickharris.net/2010/03/silverlight-for-mobile-on-windows-phone-7-inkpresenter-乐趣/](http://www.nickharris.net/2010/03/silverlight-for-mobile-on-windows-phone-7-inkpresenter-fun/)

# android - 如何为同一个 android 应用程序创建额外的启动器图标？

> ID：14610931
> 
> 赞同：0
> 
> 时间：2013-01-30T18:18:06.747
> 
> 标签：android

我有一个应用程序，我需要在应用程序中提供一个可访问的附加图标，以便从同一个应用程序启动活动。

因此，当应用程序安装时，它会在应用程序列表中显示两个图标，一个启动应用程序的图标已经存在，如何拥有另一个图标，然后如何从该图标/快捷方式启动所需的活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:57:38.753

将此添加到要在启动器中显示的活动标记内的清单文件中

```
<intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

# angularjs - Angularjs-指令范围

> ID：14610935
> 
> 赞同：0
> 
> 时间：2013-01-30T18:18:13.333
> 
> 标签：angularjs

请参考这个小提琴的完整例子：http: [//jsfiddle.net/lesouthern/WnvjF/7/](http://jsfiddle.net/lesouthern/WnvjF/7/)

```
.directive('redirectEnterKey',function() {
    return {
        restrict : 'A',
        controller : function() {}
    }
})
.directive('redirectEnterKeyTo', function() {
    return {
        restrict : 'A',
        require : '^redirectEnterKey',
        link : function($scope,$element) {
            $scope.enterKeyElement = $element;
        }
    }
})
.directive('redirectEnterKeyFrom', function() {
    return {
        restrict : 'A',
        require : '^redirectEnterKey',
        link : function($scope,$element) {
            $element.keypress(function($event) {
                if($event.keyCode == '13') {
                    $scope.enterKeyElement.click();
                    $event.stopPropagation();
                    $event.preventDefault();
                }
            });
        }
    }
}); 
```

我想将变量“enterKeyElement”的范围隔离到指令redirectEnterKey、redirectEnterKeyTo 和redirectEnterKeyFrom。

但是，想与“pageCtrl”共享变量“myInput”的范围。

我可以这样做吗？并且不必在这些指令中引用“myInput”？这是最佳做法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:59:42.803

您的问题对我来说并不完全清楚，但我认为您可以从父范围创建隔离范围，并且如果需要从父范围包含一些属性，例如我已将 myInput 属性添加到将引用父范围的 ng-model 属性的隔离范围

```
.directive('redirectEnterKeyFrom', function() {
    return {
        scope:{myInput'=ngModel'} 
        restrict : 'A',
        require : '^redirectEnterKey',
        link : function($scope,$element) {
            $element.keypress(function($event) {
                if($event.keyCode == '13') {
                    $scope.enterKeyElement.click();
                    $event.stopPropagation();
                    $event.preventDefault();
                }
            });
        }
    } 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:34:46.333

谢谢你试图帮助我，你给了我一些很好的线索。这是角度范围界定的良好教育。

请原谅我不完整的问题。这是这里问题的另一个例子：http: [//jsfiddle.net/lesouthern/jJ2Rj/](http://jsfiddle.net/lesouthern/jJ2Rj/)

请注意，由于共享范围，不正确的输入被隐藏。

这是我自己问题的答案：http: [//jsfiddle.net/lesouthern/FZXUP/](http://jsfiddle.net/lesouthern/FZXUP/)，对于任何有帮助的人。

基本上每个指令都有自己的范围，并且可以通过父指令'redirectScopeExample'绑定到父控制器

```
var pageModule = angular.module('pageModule',[])
.controller('pageCtrl',['$scope',function($scope) {
}])
.directive('redirectScopeExample',function() {
    return {
        restrict : 'A',
        scope : {
            hideElement : '&',
            redirectScopeExampleInput : '=ngModel'
        },
        controller : function($scope) {
        }
    }
})
.directive('redirectScopeExampleTo', function() {
    return {
        restrict : 'A',
        require : '^redirectScopeExample',
        link : function($scope,$element,$attr) {
            $element.click(function() {
                $scope.hideElement.toggle();
            });
        }
    }
})
.directive('redirectScopeExampleFrom', function() {
    return {
        restrict : 'A',
        require : '^redirectScopeExample',
        link : function($scope,$element,$attrs) {
            $scope.hideElement = $element;
        }
    }
}); 
```

# scala - Heroku 没有正确处理 SBT 依赖关系导致编译失败？

> ID：14610937
> 
> 赞同：1
> 
> 时间：2013-01-30T18:18:16.107
> 
> 标签：scala, heroku, sbt, playframework-2.1

我在一个名为引擎的项目中有一个扑克实现。在我的 projects/build.scala 文件中，项目定义：

```
lazy val engine = Project(id = "engine", base = file("engine"))
    .settings(...) 
```

引擎目录中的 Scala 源代码在**bitpoker.engine下声明**

然后我将 Play 2.1 前端定义为：

```
lazy val webClient = play.Project("web-client", path = file("BitPoker"))
      .settings(...)
    .dependsOn(engine) 
```

BitPoker (web-client) 目录中的 Scala 源代码引用来自 bitpoker.engine 的对象。

我有一个顶级项目：

```
lazy val bitPoker = Project(id = "bit-poker", base = file("."))
    .settings(...)
    .dependsOn(webClient).aggregate(webClient) 
```

运行命令“sbt clean compile stage”在本地工作，但是当我使用“git push heroku master”推送到heroku时，我得到：

```
[info] Compiling 59 Scala sources and 1 Java source to /tmp/build_15alo7gjz26s2/BitPoker/target/scala-2.10/classes...
[error] /tmp/build_15alo7gjz26s2/BitPoker/app/models/game/GameSearcher.scala:4: object engine is not a member of package bitpoker 
```

每当我在 bitpoker.engine 中引用某些内容时都会发生许多其他“未找到”错误。

Heroku 是忽略了我的依赖关系还是发生了其他事情？

我正在使用 Play 2.1-RC1、Scala 2.1.10 和 SBT 0.12.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:37:31.137

引擎项目被声明为存在，`path = file("engine")`而实际代码`Engine`以大写的“E”存在。这在 Windows 7 64 位上编译，但在 Heroku 上崩溃。修复将引擎项目的路径声明更改为：`path = file("Engine")`

# bash - ubuntu 上的自定义终端的 bash 命令

> ID：14610941
> 
> 赞同：0
> 
> 时间：2013-01-30T18:18:36.480
> 
> 标签：bash, terminal

我想为我的终端制作一些自定义命令（我使用的是 Ubuntu）。

我已经了解到，例如，我需要编辑“.bash_aliases”文件（在 /home/your_user_name/ 中），输入“source ~/.bash_aliases”，然后它应该可以工作。

好吧，有些事情确实有效，例如如果我写（在'.bash_aliases'中）类似：

```
my_comm(){
            if [ "$1" = aaa ]; then
                    echo hi a
            fi

            if [ "$1" = bbb ]; then
                    echo hello b
            fi

            #echo this is a comment :]
            echo ending echo 
    } 
```

然后如果我要保存文件，输入'source ~/.bash_aliases'，然后运行：

```
my_comm 
```

它将打印：

```
ending echo 
```

和写作

```
my_comm bbb 
```

会给：

```
hello b
ending echo 
```

很好，但我想知道更多的东西，我无法通过谷歌找到它们:(

* * *

## - - - - - - - - - - - - - - - - - - - - - 问题 - - - - ---------------------------------

(1) 如何设置变量然后获取变量？

喜欢：

```
var myVar = "some_dir"
cd /home/user/'myVar'/some_sub_dir/ 
```

?

(2) 我想创建一个函数来简化我经常使用的 find/grep 命令：

```
find . -name "var_1" -print0 | xargs -0 grep -l "var_2" 
```

我做了类似的事情：

```
 ff(){
            find . -name '"$1"' -print0 | xargs -0 grep "$3" '"$2"'
    } 
```

所以，现在执行：

```
ff views.py url -l 
```

应该给我：

```
find . -name 'views.py' -print0 | xargs -0 grep -l 'url' 
```

但相反我收到：

```
grep: find . -name "$1" -print0
: There is no such file or directory 
```

请帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:24:37.370

> (1) 如何设置变量然后获取变量？

像这样：

```
myVar="/long/name/may have/a space/"
....
cd /home/user/"$myVar"/someSubDir. 
```

双引号不会阻止变量替换（与单引号不同）。

> (2) 我想创建一个函数来简化我经常使用的 find/grep 命令：

```
find . -name '"$1"' -print0 | xargs -0 grep "$3" '"$2"' 
```

在这里使用多种引号没有任何用处；实际上，您可以防止`$1`和`$2`被替换，这会破坏您的功能。尝试这个：

```
find . -name "$1" -print0 | xargs -0 grep "$3" "$2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:38:15.273

您甚至可以将`alias`关键字用于单个指令或使用`function`关键字并将几个指令组合在一起。你可以看看[这个](http://sagarsakre.blogspot.in/2012/11/bashrc.html)

# jsf - Primefaces fileupload ajax（咆哮）

> ID：14610943
> 
> 赞同：1
> 
> 时间：2013-01-30T18:18:41.177
> 
> 标签：jsf, file-upload, primefaces

我在高级模式下使用 primefaces 上传文件，

```
<p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload(event)}"
                                      mode="advanced" 
                                      update="messages"
                                      sizeLimit="100000000" 
                                      allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|txt|pdf)$/"
                                      auto="true"/>

                        <p:growl id="messages" showDetail="true"/> 
```

但是我想添加一些不错的收尾工作，就像我看到使用咆哮的示例一样，一旦完成就会弹出一条消息说成功等，但我不确定如何使用 glassfish 执行此操作，并在文件完成时执行此操作正在上传

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:15:28.853

解决了这个问题，我的 bean 配置不正确，仅此而已:)

编辑 ：

查看 glassfish 控制台，发现它没有调用事件调用者，所以它跳过了这个 enter 部分，我只是简单地更改了 xhtml 中的方法调用，并确保 bean 是正确的，如果有人想看到 bean发表评论并添加它:)

# java - Android 将正在进行的通话放在前面？

> ID：14610944
> 
> 赞同：3
> 
> 时间：2013-01-30T18:18:41.367
> 
> 标签：java, android

我正在构建一个通用访问的应用程序，我的应用程序使用自定义拨号器全屏运行。因此，如果用户在通话期间按 home 或 back，我需要让他们有机会以某种方式回电。（事实上​​，我正在考虑如果他们离开，则自动重新打开正在进行的通话）。

我知道如何用号码开始通话，但我不知道如何在通话期间打开通话屏幕，我尝试在没有号码的情况下进行 Intent.ACTION_CALL，但它会在另一个电话之上启动第二个电话：

```
 Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:"));
    startActivity(callIntent); 
```

我认为这应该是有目的的，或者只是把它放在前面。但我不知道该怎么做。如何以编程方式重新打开正在进行的通话？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T02:13:17.030

如果它仍然相关或其他对此感兴趣的人：

ACTION_CALL_BUTTON 正是这样做的。

如果通话正在进行，它将把它带到前面，如果不是，它将把通话记录带到前面。

[http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL_BUTTON](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL_BUTTON)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T20:43:15.483

我找到了一个似乎运作良好的不同解决方案。我有很多 Intents 组合，还尝试了上面建议的 ACTION_CALL_BUTTON，但在 4.3 中，它会打开一个新的拨号器，并且不会将您带到当前正在进行的呼叫。不确定这在旧 sdks 中的表现如何。经过大量研究和尝试，我发现它运行良好，尽管它可能需要一些优化......

```
telephonyManager = (TelephonyManager) getSystemService( Context.TELEPHONY_SERVICE );
if( telephonyManager.getCallState() == TelephonyManager.CALL_STATE_OFFHOOK )
{
    ActivityManager m = (ActivityManager)getSystemService(ACTIVITY_SERVICE);    
    List<RunningTaskInfo> tasks = m.getRunningTasks( 10 );
    for( int i = 0; i < tasks.size(); ++i )
    {
        RunningTaskInfo task = tasks.get( i );
        ComponentName component = task.baseActivity;
        String packageName = component.getPackageName();
        if( packageName.contains( "com.android.phone" ) )
        {
        m.moveTaskToFront( task.id, 0 );
        return;
        }
    }
} 
```

您还需要将权限添加到清单文件：

```
<uses-permission android:name="android.permission.GET_TASKS"                />
<uses-permission android:name="android.permission.REORDER_TASKS"            /> 
```

# webrtc - 如何为 webrtc 选择输入视频设备？

> ID：14610945
> 
> 赞同：22
> 
> 时间：2013-01-30T18:18:43.410
> 
> 标签：webrtc

我正在研究 webRTC 应用程序。

我的参考是这个软件

apprtc [https://code.google.com/p/webrtc/source/browse/trunk/samples/js/apprtc/](https://code.google.com/p/webrtc/source/browse/trunk/samples/js/apprtc/)

演示 [https://apprtc.appspot.com/](https://apprtc.appspot.com/)

我的电脑有内置视频设备，apprtc 使用这个视频设备。但是我想改用 USB 摄像机。

我正在寻找更改输入视频设备的方法。但我在源文件中找不到任何线索。

有人有信息吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T02:20:21.937

**在 Chrome 上：**

```
chrome://settings/content/camera
chrome://settings/content/microphone 
```

[![在此处输入图像描述](../Images/b92ffe52cf49120bb982f0e858533326.png)](https://i.stack.imgur.com/wsUhS.png)

**在 Firefox 上：** media.navigator.permission.disabled=false

![在此处输入图像描述](../Images/1351635470a7273fb7798d44cf4cf8a9.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-20T05:19:33.993

试试这个捕获所有音频/视频输入设备的演示：

[https://www.webrtc-experiment.com/demos/MediaStreamTrack.getSources.html](https://www.webrtc-experiment.com/demos/MediaStreamTrack.getSources.html)

您可以使用相同的 API 捕获任何“特定”设备。

2014 年 3 月 1 日编辑：

```
MediaStreamTrack.getSources(function (media_sources) {
    for (var i = 0; i < media_sources.length; i++) {
        var media_source = media_sources[i];
        var constraints = {};

        // if audio device
        if (media_source.kind == 'audio') {
            constraints.audio = {
                optional: [{
                    sourceId: media_source.id
                }]
            };
        }

        // if video device
        if (media_source.kind == 'video') {
            constraints.video = {
                optional: [{
                    sourceId: media_source.id
                }]
            };
        }

        // invoke getUserMedia to capture this device
        navigator.webkitGetUserMedia(constraints, function (stream) {
            console.log(stream.id, stream);
        }, console.error);
    }
}); 
```

# 2015 年 9 月 5 日更新：

### 现在 Microsoft Edge、Chrome 44+、Firefox 38+，所有这些浏览器都支持`navigator.mediaDevices.enumerateDevices`API。

这是一个可重用的脚本，它为所有这些媒体源 API提供**跨浏览器 shim 。**它甚至可以在 old-chrome（43 及以上）中工作（甚至在 Android 设备上）：

```
if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {
    // Firefox 38+, Microsoft Edge, and Chrome 44+ seems having support of enumerateDevices
    navigator.enumerateDevices = function(callback) {
        navigator.mediaDevices.enumerateDevices().then(callback);
    };
}

function getAllAudioVideoDevices(successCallback, failureCallback) {
    if (!navigator.enumerateDevices && window.MediaStreamTrack && window.MediaStreamTrack.getSources) {
        navigator.enumerateDevices = window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack);
    }

    if (!navigator.enumerateDevices && navigator.mediaDevices.enumerateDevices) {
        navigator.enumerateDevices = navigator.mediaDevices.enumerateDevices.bind(navigator);
    }

    if (!navigator.enumerateDevices) {
        failureCallback(null, 'Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.');
        return;
    }

    var allMdiaDevices = [];
    var allAudioDevices = [];
    var allVideoDevices = [];

    var audioInputDevices = [];
    var audioOutputDevices = [];
    var videoInputDevices = [];
    var videoOutputDevices = [];

    navigator.enumerateDevices(function(devices) {
        devices.forEach(function(_device) {
            var device = {};
            for (var d in _device) {
                device[d] = _device[d];
            }

            // make sure that we are not fetching duplicate devics
            var skip;
            allMdiaDevices.forEach(function(d) {
                if (d.id === device.id) {
                    skip = true;
                }
            });

            if (skip) {
                return;
            }

            // if it is MediaStreamTrack.getSources
            if (device.kind === 'audio') {
                device.kind = 'audioinput';
            }

            if (device.kind === 'video') {
                device.kind = 'videoinput';
            }

            if (!device.deviceId) {
                device.deviceId = device.id;
            }

            if (!device.id) {
                device.id = device.deviceId;
            }

            if (!device.label) {
                device.label = 'Please invoke getUserMedia once.';
            }

            if (device.kind === 'audioinput' || device.kind === 'audio') {
                audioInputDevices.push(device);
            }

            if (device.kind === 'audiooutput') {
                audioOutputDevices.push(device);
            }

            if (device.kind === 'videoinput' || device.kind === 'video') {
                videoInputDevices.push(device);
            }

            if (device.kind.indexOf('audio') !== -1) {
                allAudioDevices.push(device);
            }

            if (device.kind.indexOf('video') !== -1) {
                allVideoDevices.push(device);
            }

            // there is no 'videoouput' in the spec.
            // so videoOutputDevices will always be [empty]

            allMdiaDevices.push(device);
        });

        if (successCallback) {
            successCallback({
                allMdiaDevices: allMdiaDevices,
                allVideoDevices: allVideoDevices,
                allAudioDevices: allAudioDevices,
                videoInputDevices: videoInputDevices,
                audioInputDevices: audioInputDevices,
                audioOutputDevices: audioOutputDevices
            });
        }
    });
} 
```

### 以下是如何使用上述可重复使用的跨浏览器 shim：

```
getAllAudioVideoDevices(function(result) {
    if (result.allMdiaDevices.length) {
        console.debug('Number of audio/video devices available:', result.allMdiaDevices.length);
    }

    if (result.allVideoDevices.length) {
        console.debug('Number of video devices available:', result.allVideoDevices.length);
    }

    if (result.allAudioDevices.length) {
        console.debug('Number of audio devices available:', result.allAudioDevices.length);
    }

    if (result.videoInputDevices.length) {
        console.debug('Number of video-input devices available:', result.videoInputDevices.length);
    }

    if (result.audioInputDevices.length) {
        console.debug('Number of audio-input devices available:', result.audioInputDevices.length);
    }

    if (result.audioOutputDevices.length) {
        console.debug('Number of audio-output devices available:', result.audioOutputDevices.length);
    }

    if (result.allMdiaDevices.length && result.allMdiaDevices[0].label === 'Please invoke getUserMedia once.') {
        console.warn('It seems you did not invoke navigator-getUserMedia before using these API.');
    }

    console.info('All audio input devices:');
    result.audioInputDevices.forEach(function(device) {
        console.log('Audio input device id:', device.id, 'Device label:', device.label);
    });

    console.info('All audio output devices:');
    result.audioOutputDevices.forEach(function(device) {
        console.log('Audio output device id:', device.id, 'Device label:', device.label);
    });

    console.info('All video input devices:');
    result.videoInputDevices.forEach(function(device) {
        console.log('Video input device id:', device.id, 'Device label:', device.label);
    });
}, function(error) {
    alert(error);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-19T21:52:28.780

事实证明，Chrome 确实支持允许您执行此操作的 MediaStreamTrack API。在 Firefox 中，这个[API](https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack)仍然是实验性的。这是 Chrome 的实现：

```
if (typeof MediaStreamTrack === 'undefined'){
  alert('This browser does not support MediaStreamTrack.\n\nTry Chrome Canary.');
} else {
  MediaStreamTrack.getSources( onSourcesAcquired);
}

function onSourcesAcquired(sources) {
  for (var i = 0; i != sources.length; ++i) {
    var source = sources[i];
    // source.id -> DEVICE ID
    // source.label -> DEVICE NAME
    // source.kind = "audio" OR "video"
    // TODO: add this to some datastructure of yours or a selection dialog
  }
}

....

And then when calling getUserMedia, specify the id in the constraints:

var constraints = {
  audio: {
    optional: [{sourceId: selected_audio_source_id}]
  },
  video: {
    optional: [{sourceId: selected_video_source_id}]
  }
};
navigator.getUserMedia(constraints, onSuccessCallback, onErrorCallback); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-20T17:27:20.610

听起来你正在寻找`facingMode`。您可以在本文档中查看：http: [//www.w3.org/TR/2013/WD-mediacapture-streams-20130516/#idl-def-AllVideoCapabilities](http://www.w3.org/TR/2013/WD-mediacapture-streams-20130516/#idl-def-AllVideoCapabilities)

不确定它的支持程度如何。

# android - onConfigurationChanged 手机重启时出现空指针异常？

> ID：14610948
> 
> 赞同：0
> 
> 时间：2013-01-30T18:18:46.027
> 
> 标签：android, nullpointerexception, live-wallpaper, onconfigurationchanged

那么问题是，我有一个在主类里面有onConfigurationChanged的livewallpaper，

代码是

```
 public void onConfigurationChanged (Configuration newConfig){
       if(MODE == 0) {   
        if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
            {
                    scene.setScale(1); //this is line 920
                    scene.setPosition(0, 0);
            }
            else if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
            {
                    scene.setScaleY(1.6f);
                    scene.setScaleX(0.6f); 

                    scene.setPosition(120, -240);
            }
       }
       else if (MODE == 1)
       {
            if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
            {
                 scene.setScaleY(0.6f);
                 scene.setScaleX(1.6f);

                 scene.setPosition(-240, 120);
            }
            else if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
            {
                 scene.setScale(1);
                 scene.setPosition(0, 0);
            }
       }
    } 
```

它运行良好，当手机处于开机状态时，但如果手机重新启动，则会发生崩溃

```
java.lang.NullPointerException
at org.example.example.examplelw.onConfigurationChanged(examplelw.java:920)
at android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:3478)
at android.app.ActivityThread.handleConfigurationChanged(ActivityThread.java:3602)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method) 
```

在我的手机 Nexus 4 和三星 Galaxy S2 上运行良好，手机重启时不会崩溃，但在其他一些设备上会崩溃。

这也发生在 LG-P990 上，我认为，当手机重新启动时，它没有方向信息，但我不知道为什么调用 onConfigurationChanged？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:38:05.893

您是否尝试过保存场景对象？如果它是可打包或可序列化的，您可以使用 onSaveInstanceState() 方法保存它，并在您的 onCreate() 中恢复它。更多细节[在这里](https://stackoverflow.com/questions/4096169/onsaveinstancestate-and-onrestoreinstancestate)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:51:47.723

据我所知，问题是这里的物体场景`scene.setScale(1);`是空的。您正在使用空值，因此 java 抛出 NULLPoinerException。

为了解决这个对象被初始化的问题。我认为它没有初始化，所以它包含 null 所以你将使用调试应用程序来获得你的解决方案。

如果在创建场景之前调用此方法，您可以这样做。

```
if(scene == null) {
  // Initialize the scene object.
} 
```

然后是其余的代码。

**或者**

```
if(scene != null) {
    then rest of the code. 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:46:19.900

这个可以吗？

```
if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
            {
                if (scene == null)
                {
                    //do nothing
                }
                else
                    scene.setScale(1);
                    scene.setPosition(0, 0);
            } 
```

# api - 更大的 iTunes 搜索 API 歌曲预览

> ID：14610949
> 
> 赞同：1
> 
> 时间：2013-01-30T18:18:46.930
> 
> 标签：api, itunes, preview

是否可以从 iTunes Search API 获得更长的歌曲预览？
现在它返回一个 30 秒长的预览

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#understand](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#understand)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:16:31.620

30 秒的歌曲预览是商店外的所有可用 - iTunes 商店为商店中的用户保留 90 秒的预览。

# java - 从集合中取回对象

> ID：14610953
> 
> 赞同：0
> 
> 时间：2013-01-30T18:18:53.763
> 
> 标签：java

我正在尝试修改从方法作为对象集合返回的特定对象。现在许多其他对象也被添加到这个集合中。因此，找到特定对象变得困难。我尝试使用“instanceof”解决它，但出现以下异常：

```
java.lang.ClassCastException: com.sheesoft.MockBean cannot be cast to com.sheesoft.TestBean
at com.sheesoft.Main.main(Main.java:30) 
```

我已经能够用一些测试类重现相同的异常。请让我知道我哪里出错了。

主要的：

```
package com.sheesoft;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    Collection<Object> beanCollection = new ArrayList<Object>();
    TestBean tb1 = new TestBean();
    MockBean mb1 = new MockBean();

    beanCollection.add(tb1);
    beanCollection.add(mb1);

    try{
    Iterator<Object> itr = beanCollection.iterator();
    while(itr.hasNext()){
        Object object = itr.next();
        if(object instanceof TestBean){
            TestBean tb2 = (TestBean) itr.next();
            tb2 = modifyTestBody(tb2);
            System.out.println(tb2.getBody());
        }
        if(object instanceof MockBean){
            MockBean mb2 = (MockBean) itr.next();
            System.out.println(mb2.getMockPayload());
        }
    }
    }catch(Exception e){
        e.printStackTrace();
    }
}

    private static TestBean modifyTestBody(TestBean tb) {
    tb.setBody("NewBody");
            return tb;
    }

} 
```

豆1：

```
package com.sheesoft;

public class TestBean {
private String header;
private String body;

public TestBean(){
    setHeader("header");
    setBody("body");
}

public String getHeader(){
    return header;
}
public String getBody(){
    return body;
}
public void setHeader(String header){
    this.header=header;
}
public void setBody(String body){
    this.body = body;
}
public String toString(){
    StringBuilder sb = new StringBuilder();
    sb.append("header = "+header+"\n");
    sb.append("body = "+body+"\n");
    String returns = sb.toString();
    return returns;
}
} 
```

豆2：

```
package com.sheesoft;

public class MockBean {
private String mockHeader;
private String mockBody;
private String mockPayload; 

public MockBean(){
    setMockHeader("mockHeader");
    setMockBody("mockBody");
    setMockPayload("mockPayload");
}

public String getMockHeader(){
    return mockHeader;
}
public String getMockBody(){
    return mockBody;
}
public String getMockPayload(){
    return mockPayload;
}
public void setMockHeader(String header){
    this.mockHeader=header;
}
public void setMockBody(String body){
    this.mockBody = body;
}
public void setMockPayload(String payload) {
    this.mockPayload = payload;
}

public String toString(){
    StringBuilder sb = new StringBuilder();
    sb.append("mockHeader = "+mockHeader+"\n");
    sb.append("mockBody = "+mockBody+"\n");
    sb.append("mockPayload"+mockPayload+"\n");
    String returns = sb.toString();
    return returns;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:22:44.827

在

```
 System.out.println(itr.next().toString());
    if(itr.next() instanceof TestBean){
        TestBean tb2 = (TestBean) itr.next();
                        tb2=modifyTestBody(tb2);
        System.out.println(tb2.getBody());
    }
    if(itr.next() instanceof MockBean){
        MockBean mb2 = (MockBean) itr.next();
        System.out.println(mb2.getMockPayload());
    } 
```

你会打电话给`itr.next()`三个不同的时间。当您只检查是否有*一个*元素可用时，它会通过三个*不同的元素。*相反，存储到一个变量中并对该变量执行所有操作。*`itr.next()`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:28:20.590

在您的代码中：

```
System.out.println(itr.next().toString());
        if(itr.next() instanceof TestBean){
            TestBean tb2 = (TestBean) itr.next();
                            tb2=modifyTestBody(tb2);
            System.out.println(tb2.getBody()); 
```

你已经打`itr.next()`了三遍了。所以当你写第三个的时候，`itr.next()`你已经跳到第三个元素了。所以在每个循环中你都在迭代三个元素。所以你`Iterator`过早地筋疲力尽并抛出`java.util.NoSuchElementException`

**编辑** 改用此代码：

```
while(itr.hasNext()){
        Object obj = itr.next();
        System.out.println(obj.toString());
        if(obj instanceof TestBean){
            TestBean tb2 = (TestBean) obj;
                            tb2=modifyTestBody(tb2);
            System.out.println(tb2.getBody());
        }
        if(obj instanceof MockBean){
            MockBean mb2 = (MockBean) obj;
            System.out.println(mb2.getMockPayload());
        }
    }
    }catch(Exception e){} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:23:40.600

在您拥有的代码中

```
 System.out.println(itr.next().toString());
    if(itr.next() instanceof TestBean){
        TestBean tb2 = (TestBean) itr.next();
.... 
```

问题是每次调用 itr.next() 时，都会从集合中获取下一个对象，因此在这种情况下，您不会获取一个对象，而是几个对象。

您应该将此代码更改为：

```
 Object object = itr.next();
    System.out.println(object.toString());
    if(object instanceof TestBean){
        TestBean tb2 = (TestBean) object;
.... 
```*

# d3.js - 可以在 D3 中实现 SVG 模式吗？

> ID：14610954
> 
> 赞同：1
> 
> 时间：2013-01-30T18:18:58.340
> 
> 标签：d3.js

我试过：

```
var pattern = d3.select("#container").append("svg:pattern");
pattern.append("svg:defs") ... //and so on 
```

但是遇到了错误，`append("svg:pattern")`所以我认为这还没有在 d3 中实现。

我的解决方案是简单地在 d3 之外运行 SVG 代码，这很好，因为我不需要 d3 的力量来完成这件作品。（我意识到我可以将一个 .data(dataset) 附加到一个 SVG 对象并循环通过它来创建它，但这会无缘无故地花费大量的 d3 工作。）

这是一个健全性检查问题：我在尝试在 d3 中实现 svg 模式时是否遗漏了什么，或者我的解决方案是正确的方法？

（感谢**Mike Bostock**提供了这样一个令人难以置信的图书馆。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-16T10:47:03.690

在这种情况下，所有的魔法都在 svg 而不是 d3 中。[查看编写 SVG 的袖珍指南以](http://svgpocketguide.com)了解 svg 的基础知识。

这是我的解决方案：

```
var svg = d3.select("body").append("svg");

svg.append("defs").append("pattern")
    .attr('id','myPattern')
    .attr("width", 40)
    .attr("height", 25)
    .attr('patternUnits',"userSpaceOnUse")
    .append('path')
    .attr('fill','none')
    .attr('stroke','#335553')
    .attr('stroke-width','3') 
    .attr('d','M0,0 Q10,20  20,10 T 40,0' );

svg.append('rect').attr('x',10)
    .attr('y',0)
    .attr('width',500)
    .attr('height',200)
    .attr('fill','url(#myPattern)'); 
```

[查看这个使用 codepen 的示例](http://codepen.io/anon/pen/aOyEaG)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:44:32.720

D3 或多或少不知道你在用它做什么——你可以生成 SVG、HTML 等等。没有理由为什么 SVG 模式不起作用。从您发布的小代码看来，您可能正在尝试将模式附加到 HTML 元素。`defs`在开始定义模式之前，您必须创建 SVG 和元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T03:29:03.553

我确认，您首先必须将 defs 元素添加到您的 SVG 中，然后将您的模式添加到其中。

```
//first create you SVG or select it
var svg = d3.select("#container").append("svg");

//then append the defs and the pattern
svg.append("defs").append("pattern")
    .attr("width", 5)
    .attr("height", 5); 
```

# php - 使用 OR 的反向引用

> ID：14610955
> 
> 赞同：2
> 
> 时间：2013-01-30T18:19:09.303
> 
> 标签：php, regex

我试图匹配可能在字符串中找到的几个单词中的第一个和最后一个字母。我正在使用带有`|`.

让我们采用以下字符串：

```
The quick brown fox jumps over the lazy dog 
```

我想匹配`fox`or `dog`，所以我做了以下正则表达式：

```
/fox|dog/ 
```

使用 PHP 的`preg_replace`，该正则表达式可以正常工作：

```
$str = 'The quick brown fox jumps over the lazy dog';
echo preg_replace('/fox|dog/', '=>$0<=', $str); 
```

这呼应：

```
The quick brown =>fox<= jumps over the lazy =>dog<= 
```

这不是我想要的结果。因此，从该正则表达式开始，我尝试对其进行修改，以使结果如下所示：

```
The quick brown =>f...x<= jumps over the lazy =>d...g<= 
```

我试过这段代码：

```
$str = 'The quick brown fox jumps over the lazy dog';
echo preg_replace('/(f)o(x)|(d)o(g)/', '=>$1...$2<=', $str); 
```

这没有产生我想要的。这呼应了：

```
The quick brown =>f...x<= jumps over the lazy =>...<= 
```

经过一番调试，我弄清楚了原因。我想，因为我使用`|`它会分别匹配每个单词，但事实并非如此。正如我所想的那样`f`是反向引用`1`，但`d`不是。`d`实际上是反向引用`3`！这是因为这些组是针对整个正则表达式的，而不仅仅是`|`匹配的哪一侧。但是，反向引用`0`总是匹配的词（或），所以*我*有点困惑。`fox``dog`

如何使用反向引用来匹配多个单词的第一个和最后一个字母？

我找到了使用 的解决方案`preg_replace_callback`，但我想知道是否可以使用反向引用获得相同的结果。

```
$str = 'The quick brown fox jumps over the lazy dog';
echo preg_replace_callback('/fox|dog/', function($matches){
    $a = $matches[0];
    return '=>'.$a[0].'...'.$a[strlen($a)-1].'<=';
}, $str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:35:38.427

我可以为此使用不匹配的[前瞻](http://www.regular-expressions.info/lookaround.html)表达式：

```
/(?=fox|dog)(f|d)o(x|g)/ 
```

[（未在 PHP 中测试，但在 JS 中有效）]

它首先测试以下是否是搜索到的单词之一，然后仅匹配一个捕获组中的第一个和最后一个字母。但是，如果单词不那么相似（这里：相同的长度，相同的中间字母[s]），此方法将变得更加复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:41:48.557

实际上回调函数方法优于这一切，因为它可以在所有情况下工作。您甚至可以根据匹配的长度显示更多或更少的字符。

* * *

**以下是我最初的回答，不如我上面描述的**

一般来说，你可以这样做：

```
/(?=(.))(?:pattern)(?<=(.))/s 
```

填写`pattern`你的图案。我使用`s`标志来`.`真正匹配任何字符，无一例外。如果原始模式没有在最高级别，则不需要`pattern`在*非捕获组内。*`|`

不过，在进行替换之前，您仍然需要检查模式捕获的文本的长度。（特别是长度为 1 的情况，也可能为 2）。这很容易通过使用替换回调函数来实现。

但是，请注意，上述方法*可能*不适用于最小长度为 0 的模式。

# variables - 如何使用 (ns (:require :refer)) 重命名

> ID：14610957
> 
> 赞同：14
> 
> 时间：2013-01-30T18:19:15.170
> 
> 标签：variables, import, clojure, namespaces

我的理解是现在建议使用 `require :refer`，而不是`use`在`ns`宏中。例如，执行：

```
(ns example.core 
  (:require [clj-json.core :refer [parse-string]])) 
```

代替

```
(ns example.core 
  (:use [clj-json.core :only [parse-string]])) 
```

处理`:rename`哪些`use`支持的推荐方法是什么？具体来说，假设我要`require` clojure.data.zip 并重命名`ancestors`与`descendants`clojure.core 冲突的函数。

换句话说，我想知道`require`等价于

```
(:use 
  [clojure.data.zip :rename {ancestors xml-ancestors, 
                             descendants xml-descendants}) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-25T08:58:24.477

```
(ns foo
  (:require [clojure.data.zip :refer [ancestors descendants] :rename {ancestors xml-ancestors descendants xml-descendants}])) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-30T21:44:45.690

你`:require`在一步，然后`:refer`在`:rename`下一步。

```
(ns foo
  (:require clojure.data.zip)
  (:refer [clojure.data.zip :rename {ancestors xml-ancestors,
                                     descendants xml-descendants}) 
```

`:use`一直是`:require`+的简写`:refer`，现在`:refer`选项 to`:require`是最简单的 的简写`refer`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T19:08:27.617

免责声明：我不知道执行此操作的“推荐”方式。我只知道我会怎么做。我的解决方案可能不是惯用的 Clojure，如果没有人提出更好的答案，我会感到惊讶。

* * *

这就是我要做的：`:require`使用的包和别名`:as`：

```
(ns some.big.name.space
  (:require [clojure.data.zip  :as  cdz])
  ... some more imports, maybe ...) 
```

然后可以使用指定的前缀访问符号，并且不要与我的`some.big.name.space`命名空间中的任何符号冲突：

```
(def some-list [cdz/ancestors cdz/descendants ancestors descendants]) 
```

如果别名很短，键入它几乎不会打扰我，而且我觉得我的代码更清晰——这`cdz/`是一个很好的视觉提示，符号是一个导入。

我知道这并不能真正回答您的确切问题——如何使用`:rename`with——`:require`但我觉得值得一提，因为它避免了污染我的命名空间，而且我不必弄乱 Clojure 的符号解析机制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-17T22:43:36.590

如果您需要从 Clojure 核心重命名函数或宏，请使用以下命令：

```
(ns foo
  "Contains foo functionality."
  (:refer-clojure :rename {map core-map})) 
```

# java - 什么是共享状态，发生时的竞争条件？

> ID：14610971
> 
> 赞同：-2
> 
> 时间：2013-01-30T18:19:43.097
> 
> 标签：java, thread-safety

```
 //$Id$    
import java.util.logging.Level;
import java.util.logging.Logger;

public class ThreadSafe {

    public static final Logger LOGGER = Logger.getLogger(ThreadSafe.class.getName());

    public static int  random(int num){
        LOGGER.log(Level.INFO,"Entered Num : {0}",num);
        try {
            Thread.sleep(5);
        } catch (InterruptedException e) {
            LOGGER.log(Level.INFO,"Interrupted Exception");
        }
        return num + 2;
    }

    public static void main(String[] args){
        for(int threads=1;threads<100;threads++){
            final int number = threads;
            Thread thread = new Thread(new Runnable() {
                @Override
                public void run() {
                    int val = ThreadSafe.random(number);
                    System.out.println("Excepted Value = " + (number+2) + " Returned Value = " + val);
                }

            },"Thread : "+threads);
            thread.start();
        }
    }

} 
```

输出：

```
30 Jan, 2013 11:41:26 PM com.zoho.learn.test.ThreadSafe random
INFO: Entered Num : 2
30 Jan, 2013 11:41:26 PM com.zoho.learn.test.ThreadSafe random
INFO: Entered Num : 45
30 Jan, 2013 11:41:26 PM com.zoho.learn.test.ThreadSafe random
INFO: Entered Num : 44
30 Jan, 2013 11:41:26 PM com.zoho.learn.test.ThreadSafe random
INFO: Entered Num : 43
30 Jan, 2013 11:41:26 PM com.zoho.learn.test.ThreadSafe random
INFO: Entered Num : 42
30 Jan, 2013 11:41:26 PM com.zoho.learn.test.ThreadSafe random
INFO: Entered Num : 38
Excepted Value = 47 Returned Value = 47
30 Jan, 2013 11:41:26 PM com.zoho.learn.test.ThreadSafe random
INFO: Entered Num : 41
Excepted Value = 44 Returned Value = 44
Excepted Value = 46 Returned Value = 46 
```

我排除了同时访问同一方法的多线程。如果我们同时访问一个静态方法会发生什么？

什么时候出现竞态条件？

什么是共享状态？

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:25:03.960

唯一`run()`同时执行的代码（除了）是：

```
public static int  random(int num){
    LOGGER.log(Level.INFO,"Entered Num : {0}",num);
    try {
        Thread.sleep(5);
    } catch (InterruptedException e) {
        LOGGER.log(Level.INFO,"Interrupted Exception");
    }
    return num + 2;
} 
```

剥离日志记录（在每个理智的实现中都是线程安全的）、睡眠（仅影响当前线程）和异常处理，这就是你剩下的：

```
public static int  random(int num){
    return num + 2;
} 
```

不仅`num`参数是每个线程私有的（每个线程都有自己的堆栈内存），而且它永远不会被修改。因此，您的程序中不会出现竞态条件。

您的代码中没有共享状态（全局变量），竞争条件只有在一个线程修改共享数据而其他线程读取它时才有可能。

您想查看比赛条件吗？干得好！

```
private volatile int globalNum;

public static int  random(int num){
    globalNum = num;
    try {
        Thread.sleep(5);
    } catch (InterruptedException e) {
        LOGGER.log(Level.INFO,"Interrupted Exception");
    }
    return globalNum + 2;
} 
```

灾难的最后几秒钟：

1.  线程1进入`random(42)`，分配`globalNum = 42`并进入睡眠状态

2.  线程2进入`random(17)`，分配`globalNum = 17`并进入睡眠

3.  线程 1 唤醒读取`globalNum`(which is `17`) 的当前值并返回`19`而不是`44`按预期返回。

# 也可以看看

*   [如果不修改静态类变量，非同步静态方法是否线程安全？](https://stackoverflow.com/questions/5173399)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:24:37.417

> 我排除了同时访问同一方法的多线程。

多个线程访问同一个方法不是问题。**只有当多个线程访问相同的状态**时，才会存在竞争条件。您的程序中没有共享状态，因此没有竞争条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:28:07.197

多线程在访问公共资源时变得至关重要。
这可以是一个静态变量，一个线程更改而另一个线程读取。

局部变量不受影响，方法调用也不受影响，因为每个线程都有自己的局部变量。

您没有在踏板之间共享的公共资源。

# powershell - powershell：导入模块时运行代码

> ID：14610980
> 
> 赞同：2
> 
> 时间：2013-01-30T18:19:59.847
> 
> 标签：powershell

我用 C# 开发了一个 powershell 模块，实现了一些命令。

当 Powershell 导入此模块时，如何在此模块中执行 C# 代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:49:12.843

创建一个模块清单，将 ModuleToProcess（或 V3 中的 RootModule）字段设置为 PSM1 文件，并将 NestedModules 设置为 DLL，例如：

```
RootModule         = 'Pscx.psm1'
NestedModules      = 'Pscx.dll' 
```

这就是我们在[PowerShell 社区扩展](http://pscx.codeplex.com)中所做的事情，我们在其中做同样的事情 - 首先启动一个脚本。[您可以在此处](http://pscx.codeplex.com/SourceControl/changeset/view/100892#1357945)查看我们的 PSD1 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:28:08.820

这是一个非常基本的解决方案，只需将 {} 中的代码替换为您的源代码即可。（下面是我的测试）

add-type 'public class c{public const string s="Hello World";}';[c]::s

请享用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T06:34:58.950

我还在.NET 中编写二进制 cmdLet。我发现如果您创建一个至少从 DriveCmdletProvider 继承的类，该类可以实现 InitializeDefaultDrives。

当在您的 DLL 上调用 import-module 时，将调用此方法。

您可以使用此“功能”来建立一些会话（或模块会话）数据。

# php - 如何更改此正则表达式，使其选择具有多个 img 的段落元素

> ID：14610983
> 
> 赞同：0
> 
> 时间：2013-01-30T18:20:24.620
> 
> 标签：php, html, css, regex, wordpress

这是一个后续问题：[在 Wordpress 中区分包装图像的 P 标签和包装文本节点的 P 标签？](https://stackoverflow.com/questions/1733175/differentiating-between-p-tags-wrapping-images-and-p-tags-wrapping-text-nodes-in)

我想修改解决方案：

```
 function my_content_filter($content) {
   return preg_replace('|<p>(<img[^<]*)</p>|i', '<p class="foo">${1}</p>', $content);
 }
 add_filter('the_content', 'my_content_filter');` 
```

因此它适用于`<p>`具有多个`<img>`元素的 a 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T22:31:30.373

试试这是否适合你。

```
function my_content_filter($content) {
return preg_replace('|<p>((<img[^>]*>)*)<\/p>|i', '<p class="foo">${1}</p>', $content);
}
add_filter('the_content', 'my_content_filter');` 
```

# jquery - JSON-P + RESTful API

> ID：14610985
> 
> 赞同：0
> 
> 时间：2013-01-30T18:20:28.320
> 
> 标签：jquery, json, api, url, rest

菜鸟在这里。我无法让我的警报显示此代码。有人可以为我指出正确的方向以从 json 提要中提取此信息吗？提前致谢。

```
<html>
<head>
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js">    </script>
<title>Test</title>
</head>
<body>
<script type="text/javascript">
jQuery.getJSON("http://api.shoplocal.com/api/2012.1/json/getpromotions.aspx?campaignid=86107c2cdcc39561&citystatezip=46225" + "&campaignid=",         function(feed) {
    alert("Symbol: " + feed.content.collection.data.image);
});
</script></body>
</html> 
```

这是 JSON：

```
{
    "content": {
        "collection": {
            "data": {
                "code": "RC-130127",
                "customimagedescription": "",
                "customimagelocation": "",
                "displayorder": "0",
                "featuredpromotion": "N",
                "identifier": "01\/27 Circular",
                "image": "http:\/\/akimages.shoplocal.com\/dyn_rppi\/140.0.90.0\/RobertsCamera\/large\/130127_Pg1_cqu82.jpg",
                "postenddate": "2\/2\/2013 12:00:00 AM",
                "poststartdate": "1\/27\/2013 12:00:00 AM",
                "previewenddate": "",
                "previewstartdate": "",
                "promotionchildtypeid": "",
                "promotionchildtypename": "",
                "promotionid": "85347",
                "promotionmessage": "",
                "retailerid": "12847",
                "retailername": "Roberts Camera",
                "saleenddate": "2\/2\/2013 12:00:00 AM",
                "salestartdate": "1\/27\/2013 12:00:00 AM",
                "tag": "RC-130127",
                "title": "01\/27 Circular",
                "typeid": "1",
                "vo": "promotion"
            },
            "vo": "promotion"
        },
        "date": "1\/30\/2013 12:28:52 PM"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:28:21.767

添加`&callback=?`到 URL 的末尾以触发 JSONP，否则您将收到 XMLHttpRequest 跨域错误：

```
$.getJSON("http://api.shoplocal.com/api/2012.1/json/getpromotions.aspx?campaignid=86107c2cdcc39561&citystatezip=46225&campaignid=&callback=?",
               function(feed) {
    alert("Symbol: " + feed.content.collection.data.image);
}); 
```

有关更多信息，请参阅 getJSON 文档的[JSONP 部分](http://api.jquery.com/jQuery.getJSON/)。

我还刚刚注意到您正在使用 jQuery v1.3.2。此解决方案可能不适用于旧版本，[但适用于较新版本](http://jsfiddle.net/JPxkG/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:26:44.920

由于安全原因，您无法在应用程序域之外使用 Ajax 功能（如（getJSON、ajax、post、get））调用资源。

查看您的 javascript 控制台以查看问题。

[如何在 jquery 中调用外部 url？](https://stackoverflow.com/questions/4613310/how-to-call-external-url-in-jquery)

这个链接将澄清一切。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:30:21.693

See [my answer to a related question](https://stackoverflow.com/questions/14589940#14601205) for details as to why you should not be considering JSONP for use with supposedly "RESTful" APIs. In short, use CORS instead.

# python - pyqt：动态更新动态创建的小部件的属性

> ID：14610988
> 
> 赞同：0
> 
> 时间：2013-01-30T18:20:34.467
> 
> 标签：python, qt, qt4, pyqt, pyqt4

我正在尝试根据前面小部件中动态设置的属性，找到一种方法来更新动态创建的小部件（可以删除）中的标签。

有没有办法自动和动态地将 pyqt 对象链接到其他小部件的属性，以便当我在任何地方更改值时，该对象会自行更新？

示例：对象 'a' 具有属性`start`，`bars`并且`end`; `bars`给定，`start`由前一个对象获取（如果没有，则为 1），`end`被计算。对象“b”`start`取自`a.end`，依此类推。

```
class myclass(object):
  def __init__(self, referrer=None, value=1):
    self.referrer=referrer
    self.value=value

  def _get_start(self):
    if not self.referrer:
      return 1
    else:
      return self.referrer.end+1

  def _get_end(self):
    return self.start+self.value-1

  start=property(_get_start)
  end=property(_get_end)

def create(value=1):
  if not vList:
    ref=None
  else:
    ref=vList[-1]
  val=myclass(ref, value)
  vList.append(val)

def showList():
  for i in vList:
    print 'item: %d\tstart: %d\tend: %d' % (vList.index(i),i.start, i.end)

vList=[] 
```

如果我调用 create() 3 次，showList() 将显示：

```
item: 0 start: 1        end: 1
item: 1 start: 2        end: 2
item: 2 start: 3        end: 3 
```

如果我将 vList[0].value 更改为 3：

```
item: 0 start: 1        end: 3
item: 1 start: 4        end: 4
item: 2 start: 5        end: 5 
```

当我需要在 gui 中更新这些值时，问题就出现了（[将其视为像这样的界面](http://i.imgur.com/8742B5a.png)）：每个水平小部件都有一个显示属性的标签`start`、一个用于 的旋转框`bars`和一个用于 的标签`end`，并且只要**有**spinbox 值发生变化，每个后续小部件都应根据其先前的小部件更新其`start`和属性，并在相关标签中显示它们。`end`此外，当删除任何小部件时，所有后续小部件都应重新计算每个属性。

使用 getter/setter 来设置小部件下一个实例的标签中的值显然不能按我的需要工作，因为当我更改 any 时`x.value`，以下实例'`start`并且`end`只有在召回时才会实际更新，AFAIU。我可以将每个新的小部件连接到它以前的（使用`valueChanged()`）或创建一个函数来查找后续小部件并更新它们的属性，但这不是一个好的解决方案。

由于我对 python 几乎是新手（最重要的是：我不是程序员）我认为我忽略了一些关于以更好和最干净的方式“连接”变量的事情（可能与信号或线程有关？）。

考虑这些小部件实际上是另一个“主”小部件的子小部件，它们将具有相似的属性：`start`取自其先前的主小部件（如果有），这是每个子小部件`bars`中所有小部件的总和，这将是.`bars``end``start+bars-a`

谢谢！

（我希望你能明白我的意思，我的英语并不完美，而且由于我不是程序员，我的术语并不总是正确的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:28:58.340

我无法从您的问题中找到用例，但这是使用 Qt Signals-Slots 的可能解决方案：

```
# -*- coding: utf-8 -*-
import functools

from PyQt4 import QtGui, QtCore

class ObservableVariable(QtCore.QObject):
    """ Represents variable with value, when value changes it emits
    signal: changed(new_value)
    """
    changed = QtCore.pyqtSignal(object)

    def __init__(self, initial_value=0):
        super(ObservableVariable, self).__init__()
        self._value = initial_value

    def get_value(self):
        return self._value

    def set_value(self, new_val):
        self._value = new_val
        self.changed.emit(new_val)

    value = property(get_value, set_value)

    def __str__(self):
        return str(self.value)

    # it can support more operators if needed
    def __iadd__(self, other):
        self.value += other
        return self

    def __isub__(self, other):
        self.value -= other
        return self

class MyClass(object):
    def __init__(self, referrer=None, value=1):
        self.referrer = referrer
        self.value = ObservableVariable(value)
        self._initial_value = value
        if referrer:
            # propagate referrer changes to subscribers
            referrer.value.changed.connect(
                lambda x: self.value.changed.emit(self.value.value)
            )

    @property
    def start(self):
        if not self.referrer:
            return self.value.value
        return self.referrer.end + 1

    @property
    def end(self):
        return self.start + self.value.value - 1

class GuiExample(QtGui.QWidget):
    def __init__(self):
        super(GuiExample, self).__init__()
        self.values = []
        layout = QtGui.QVBoxLayout(self)
        obj = None
        for i in range(5):
            obj = MyClass(obj, i)
            self.values.append(obj)
            # create gui elements
            hlayout = QtGui.QHBoxLayout()
            spinbox = QtGui.QSpinBox()
            spinbox.setValue(obj.value.value)
            start_label = QtGui.QLabel()
            end_label = QtGui.QLabel()
            hlayout.addWidget(start_label)
            hlayout.addWidget(spinbox)
            hlayout.addWidget(end_label)
            layout.addLayout(hlayout)

            # function called on value change
            def update_start_end(instance, start_label, end_label):
                start_label.setText(str(instance.start))
                end_label.setText(str(instance.end))

            action = functools.partial(update_start_end, obj, start_label,
                                       end_label)
            action()  # set initial start end text to labels
            # connect signals to gui elements
            obj.value.changed.connect(action)
            spinbox.valueChanged.connect(obj.value.set_value)
            obj.value.changed.connect(spinbox.setValue)
        layout.addWidget(QtGui.QPushButton('test',
                                           clicked=self.test_modification))

    def test_modification(self):
        self.values[1].value += 1

app = QtGui.QApplication([])
gui = GuiExample()
gui.show()

app.exec_() 
```

# java - 如何为不同的 jar 版本分离类加载器？

> ID：14610996
> 
> 赞同：0
> 
> 时间：2013-01-30T18:21:01.763
> 
> 标签：java, osgi, classloader

我有一个包含许多测试的测试战争文件。每个测试都打包在具有很多依赖项的 maven 项目中。我们使用 maven 进行依赖管理，但它带来了一个问题。当测试更新公共库时，它可能会破坏依赖于旧版本库的其他测试。如何让所有的测试在一个完全独立的环境中运行，并拥有自己的一套库版本？我无法在单独的 jvm 中执行它们，因为这些测试需要非常频繁地执行，例如 30 秒左右。OSGi 可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:25:57.803

是的，OSGi 可以解决这个问题，但也不能掉以轻心。当您准备好投入时间和精力来隔离和管理依赖项、正确地对它们进行版本控制以及（可选）使您的代码和架构更加模块化/可重用时，请使用 OSGi。

请记住，由于某些遗留库使用的非模块化实践，最初采用 OSGi 可能会很痛苦。

# c++ - 如何通过管道发送和接收结构变量

> ID：14610998
> 
> 赞同：0
> 
> 时间：2013-01-30T18:21:13.513
> 
> 标签：c++, visual-studio-2008, ipc

嗨，我必须发送和接收一条结构消息，这怎么可能使用管道

我的消息是这样的

```
typedef struct{
char[20] myMessage,
int      count,
char[10] address
} sendMessage; 
```

我知道我可以使用 writefile/readfile 发送字符串消息，但是如何发送结构变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:30:12.083

您可以通过通常调用`WriteFile`一侧和`ReadFile`另一侧来做到这一点。重要的是要记住，它们可以写入和读取的字节数少于请求的字节数，因此它们应该循环使用，直到所有数据都被接收/传输。

对于固定大小的读取和写入，我有时会发现将管道句柄/描述符重新包装成一个`FILE*`结构很方便，因此短读取和短写入由 C 运行时库处理。在 Windows 上，它分两个阶段完成：为句柄`_open_osfhandle`获取 CRT *lowio*文件描述符，然后为 lowio 描述符`_fdopen`获取一个`FILE*`。（警告：`_O_BINARY`用于`_fdopen`确保没有换行翻译）。