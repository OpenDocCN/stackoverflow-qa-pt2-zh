# StackOverflow 问答 12783000-12783999

# twitter-bootstrap - 推特引导模式中的时间选择器未收到点击

> ID：12783003
> 
> 赞同：1
> 
> 时间：2012-10-08T13:42:43.357
> 
> 标签：twitter-bootstrap, jquery, timepicker

我正在尝试将[jquery-timepicker](https://github.com/jonthornton/jquery-timepicker)与引导程序一起使用。它工作正常，除非时间选择器输入在引导模式中。

时间列表没有获得点击事件，尽管视觉上一切看起来都很好（它的 z-index 比模态和覆盖层更高。滚动和悬停样式工作正常）。

该问题已在[http://jsfiddle.net/Qkgxu/1/转载](http://jsfiddle.net/Qkgxu/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:16:54.423

这是时间选择器的[错误](https://github.com/jonthornton/jquery-timepicker/issues/36)，现在已[修复](https://github.com/jonthornton/jquery-timepicker/commit/995a8d915bd9b6e32d26dbbdc7c95579da57349a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T14:53:25.790

这是时间选择器和模式的问题。

我找到的解决方案是：

寻找 showWidget 函数，在这个函数里面你必须替换

```
this.$element.trigger('show'); 
```

有了这个

```
if (this.template === 'modal) {
   this.$element.trigger('show');
} 
```

# c# - 如何在 C# 中解压缩 .bz2 文件？

> ID：12783007
> 
> 赞同：2
> 
> 时间：2012-10-08T13:43:18.653
> 
> 标签：c#, unzip, sharpziplib

我正在开发 wpf 应用程序。我正在使用sharpziplib 来压缩和解压缩文件。我很容易使用以下代码解压缩 .zip 文件

```
public static void UnZip(string SrcFile, string DstFile, string safeFileName, int bufferSize)
        {
            //ICSharpCode.SharpZipLib.Zip.UseZip64.Off;

            FileStream fileStreamIn = new FileStream(SrcFile, FileMode.Open, FileAccess.Read);
            ZipInputStream zipInStream = new ZipInputStream(fileStreamIn);

            string rootDirectory = string.Empty;
            if (safeFileName.Contains(".zip"))
            {
                rootDirectory = safeFileName.Replace(".zip", string.Empty);
            }
            else
            {
                rootDirectory = safeFileName;
            }

            Directory.CreateDirectory(App.ApplicationPath + rootDirectory);

            while (true)
            {
                ZipEntry entry = zipInStream.GetNextEntry();

                if (entry == null)
                    break;

                if (entry.Name.Contains("/"))
                {
                    string[] folders = entry.Name.Split('/');

                    string lastElement = folders[folders.Length - 1];
                    var folderList = new List<string>(folders);
                    folderList.RemoveAt(folders.Length - 1);
                    folders = folderList.ToArray();

                    string folderPath = "";
                    foreach (string str in folders)
                    {
                        folderPath = folderPath + "/" + str;
                        if (!Directory.Exists(App.ApplicationPath + rootDirectory + "/" + folderPath))
                        {
                            Directory.CreateDirectory(App.ApplicationPath + rootDirectory + "/" + folderPath);
                        }
                    }

                    if (!string.IsNullOrEmpty(lastElement))
                    {
                        folderPath = folderPath + "/" + lastElement;
                        WriteToFile(DstFile + rootDirectory + @"\" + folderPath, bufferSize, zipInStream, rootDirectory, entry);
                    }

                }
                else
                {
                    WriteToFile(DstFile + rootDirectory + @"\" + entry.Name, bufferSize, zipInStream, rootDirectory, entry);
                }
            }

            zipInStream.Close();           
            fileStreamIn.Close();
        }

        private static void WriteToFile(string DstFile, int bufferSize, ZipInputStream zipInStream, string rootDirectory, ZipEntry entry)
        {
            FileStream fileStreamOut = new FileStream(DstFile, FileMode.OpenOrCreate, FileAccess.Write);
            int size;
            byte[] buffer = new byte[bufferSize];

            do
            {
                size = zipInStream.Read(buffer, 0, buffer.Length);
                fileStreamOut.Write(buffer, 0, size);
            } while (size > 0);

            fileStreamOut.Close();
        } 
```

但是相同的代码不适用于 .bz2 文件。它在线上给出错误

```
ZipEntry entry = zipInStream.GetNextEntry(); 
```

错误是 - 错误的本地标头签名：0x26594131。我应该如何解压缩 .bz2 文件？您能否提供我可以解决上述问题的任何代码或链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:50:00.640

当您使用`ZipInputStream`文件`.zip`时，您应该使用`BZip2InputStream`文件`.bz2`（以及`GZipInputStream`文件`.gz`等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T13:55:38.417

与 Zip（以及 RAR 和 tar）不同，bz2 和 gzip 只是字节流压缩器。他们没有像前面提到的容器格式的概念，因此它为什么在`GetNextEntry`. （换句话说，bz2 和 gzip 最多只有 1 个条目）。

# silverlight - Silverlight Toolkit LineSeries 随机连接数据点

> ID：12783008
> 
> 赞同：0
> 
> 时间：2012-10-08T13:43:20.627
> 
> 标签：silverlight, random, toolkit, lineseries

我正在尝试渲染折线图，但 LineSeries 每次重绘图表时都会随机连接数据点。

我的项目源是我的自定义类的类型列表，它具有 2 个属性，一个用于 x 轴，一个用于 y 轴（都是“双”值）。这些属性的值不会改变，只加载一次。

我的线条有几个直线的垂直线跳跃，即 3 或 4 个点的 x 轴值相同，但 y 值发生变化。它用一条垂直的直线正确连接这些点。

但奇怪的是，它随机使用任何一个数据点来连接左侧，另一个用于连接右侧。

我假设它使用基于项目源顺序的第一个点用于从左侧连接，最后一个点用于连接到右侧。

项目源始终处于相同的顺序，这也是我希望它们连接的顺序。

我尝试附加图像，但不允许...所以只能进行文字描述。

```
 LineSeries ser = new LineSeries();
        Chart.Series.Add(ser);
        ser.DependentValuePath = "YAxis";
        ser.IndependentValuePath = "XAxis"
        ser.ItemsSource = data.Coordinates; 
```

有谁知道为什么会这样？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:36:45.843

我在创建条形图表时遇到了类似的问题。幸运的是，我的一位同事注意到 silverlight 图表都是从左到右运行的——这会影响它绘制所提供的不同图表的方式。

简单地旋转图表似乎是最好的主意——但它仍然存在一些图表问题（我的图例也被旋转了）。

我不是一个 C# 编码员，所以我创建了一个图表样式的控件模板。我进入模板并旋转图表的边缘面板。下面是一个非常简短和通用的示例：

```
<Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="charting:Chart">
         <Border Background="{TemplateBinding Background}" 
                 BorderBrush="{TemplateBinding BorderBrush}"
                 BorderThickness="{TemplateBinding BorderThickness}">
              <Grid> 
```

我没有将所有代码都放在这里，但可以在[http://silverlight.codeplex.com/SourceControl/changeset/view/80285#778932找到图表的完整模板](http://silverlight.codeplex.com/SourceControl/changeset/view/80285#778932)

```
 <chartingprimitives:EdgePanel x:Name="ChartArea" 
                                       Style="{TemplateBindingChartAreaStyle}"
                                       RenderTransformOrigin="0.5,0.5">
                        <chartingprimitives:EdgePanel.RenderTransform>
                            <CompositeTransform Rotation="90"/>
                        </chartingprimitives:EdgePanel.RenderTransform>        
                   </chartingprimitives:EdgePanel>
                     <Grid x:Name="PlotArea" Canvas.ZIndex="-1"
                           RenderTransformOrigin="0.5,0.5" />
                     <Border Canvas.ZIndex="10" BorderBrush="Gray" 
                             BorderThickness="1"/>
              </Grid>
          </Border>
      </ControlTemplate>
    </Setter.Value>
</Setter> 
```

这样，图表的整个绘图区域都被翻转，允许图表向下绘制，而不是强制数据向右绘制。（我遇到了同样的问题，线条绘制不正确，并且在连接点的顺序上不稳定）

它对我的图表有所帮助（需要进行调整，但这给出了我能够弄清楚的总体思路）。希望对你有点帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:30:04.990

这是因为图表是基于独立值而不是基于依赖值的。我的“条形图”也有类似的问题。这是设计的。将您的图表想象成横向翻转的 x vs y 图。现在你可以看到它是如何绘制的。根据 y 更改点的顺序不会做任何事情。

我不认为 Telerik 有这个限制。

# amazon-s3 - Amazon S3 是否向 CloudFront 发送失效信号？

> ID：12783009
> 
> 赞同：15
> 
> 时间：2012-10-08T13:43:22.593
> 
> 标签：amazon-s3, amazon, amazon-cloudfront

我似乎在文档中看不到明显的答案。

当我在 S3 上更新文件并启用 CloudFront 时，S3 是否会向 CloudFront 发送失效信号？还是我需要在更新文件后自己发送？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-08T18:52:25.860

S3 不会向 CloudFront 发送任何失效信息。默认情况下，CloudFront 将在从源检索数据时设置的缓存控制标头指定的最长时间内保存信息（如果愿意，它可能会提前从缓存中删除项目）。

您可以通过创建失效批处理来使缓存条目失效。这将花费您的钱：每月的第 1000 个请求是免费的，但除此之外，每个请求的费用为 0.005 美元 - 如果您每天使 1000 个文件无效，则每月将花费您 150 美元（除非您可以使用通配符功能）。您当然可以使用 Amazon Lambda 函数触发此事件以响应 s3 事件。

另一种方法是在对象更改时使用不同的路径（实际上是分代缓存键）。同样，您可以将查询参数附加到 url 并在您希望 cloudfront 获取新副本时更改该查询参数（为此，您需要告诉 CloudFront 使用查询字符串参数 - 默认情况下它会忽略它们）。

如果您只进行不频繁（但大）的更改，另一种方法是简单地创建一个新的云端分发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T00:33:46.227

据我所知，所有的 CDN 都是这样工作的。

这就是为什么您通常使用诸如`foo-x.y.z.ext`在 CDN 上对资产进行版本控制的原因。我不会使用`foo.ext?x.y.z`，因为某些浏览器和代理从不使用`?QUERY_STRING`.

一般来说，你可能想看看这个： [https ://developers.google.com/speed/docs/best-practices/caching](https://developers.google.com/speed/docs/best-practices/caching)

它包含许多最佳实践，并详细介绍了要做什么以及它是如何工作的。

关于 S3 和 Cloudfront，我对缓存失效不是很熟悉，但 Frederick Cheung 提到的都是正确的。

一些提供商还允许您直接清除缓存，但由于 CDN 的性质，这些更改几乎不会立即发生。另一种方法是设置较小的 TTL（过期标头），以便更频繁地刷新资产。但我认为这也违背了 CDN 的目的。

在我们的案例（Edgecast）中，缓存失效是可能的（手动过程）并且是免费的，但我们很少这样做，因为我们会相应地对资产进行版本控制。

# php - 字符导致控制台中的错误

> ID：12783010
> 
> 赞同：0
> 
> 时间：2012-10-08T13:43:27.263
> 
> 标签：php, javascript, jquery, html

> **可能的重复：**
> [PHP：我应该如何转义将进入 Javascript 字符串的字符串？](https://stackoverflow.com/questions/3504068/php-how-should-i-escape-a-string-that-will-be-going-into-a-javascript-string)

我有一个角色的情况。如果我输入一段文本（一个问题），其中包含多个字符，例如：

> !\"�$%^& *()-=\'.,:;/?#~* /\\><

然后我突然收到一条错误消息：

> 语法错误：未终止的字符串文字

然后它在控制台中显示：

> parent.addwindow('!/;

我的问题是我可以更改下面代码中的任何内容以允许这些字符用于问题吗？

下面是代码：

```
if (!empty($_GET['searchQuestion']) && ($terms = preg_split('/\s+/', $_GET['questioncontent'], -1, PREG_SPLIT_NO_EMPTY))) {

    // A temp array to hold the terms after they have been constructed
    $termArray = array();

    // We'll need to use this a few times so we'll cache it
    $numTerms = count($terms);

    // Loop $terms and create an array of strings that can be used with LIKE clauses
    foreach ($terms as $term) {
      // The str_replace() allows users to include literal % and _ in the search terms
      $termArray[] = '%'.str_replace(array('%', '_'), array('\%', '\_'), $term).'%';
    }

    // Build the query
    $questionquery = "
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
       q.QuestionMarks 
  FROM Answer an 
  INNER JOIN Question q ON q.AnswerId = an.AnswerId
  JOIN Reply r ON q.ReplyId = r.ReplyId 
  JOIN Option_Table o ON q.OptionId = o.OptionId 
      WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
      GROUP BY q.QuestionId, q.SessionId
      ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
    ";

    // Make the referenced array
    $referencedArray = make_values_referenced(array_merge(
      array(str_repeat("ss", $numTerms)), // types
      $termArray,                         // where
      $termArray                          // order by
    ));

    // ...or die() is evil in production but I shall assume we are debuggin so I won't complain
    if (!$stmt = $mysqli->prepare($questionquery)) {
      die("Error preparing statement: $mysqli->error"); 
    }

    // Bind parameters
    if (!call_user_func_array(array($stmt, 'bind_param'), make_values_referenced($referencedArray))) {
      die("Error binding parameters: $stmt->error"); 
    }

    // Execute
    if (!$stmt->execute()) {
      die("Error executing statement: $stmt->error"); 
    }

    // This will hold the search results
    $searchResults = array();
    $searchOption = array();
    $searchNoofAnswers = array();
    $searchAnswer = array();
    $searchReply = array();
    $searchMarks = array();

    // Fetch the results into an array
    if (!$stmt->num_rows()) {
      $stmt->bind_result($dbQuestionContent,$dbOptionType,$dbNoofAnswers,$dbAnswer,$dbReplyType,$dbQuestionMarks); 
      while ($stmt->fetch()) {
        $searchResults[] = $dbQuestionContent;
        $searchOption[] = $dbOptionType;
        $searchNoofAnswers[] = $dbNoofAnswers;
        $searchAnswer[] = $dbAnswer;
        $searchReply[] = $dbReplyType;
        $searchMarks[] = $dbQuestionMarks;
      }
    }

  }

if (isset($_GET['searchQuestion'])) {

  // If $terms is not empty we did a query
  if (!empty($terms)) {

      $questionnum = sizeof($searchResults);

      foreach ($searchResults as $key=>$question) {

        echo '<tr class="questiontd"><td>'.json_encode($question).'</td>';
        echo '<td class="optiontypetd">'.json_encode($searchOption[$key]).'</td>';
        echo '<td class="noofanswerstd">'.json_encode($searchNoofAnswers[$key]).'</td>';
        echo '<td class="answertd">'.json_encode($searchAnswer[$key]).'</td>';
        echo '<td class="noofrepliestd">'.json_encode($searchReply[$key]).'</td>';
        echo '<td class="noofmarkstd">'.json_encode($searchMarks[$key]).'</td>';
        echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$question','$searchMarks[$key]','$searchNoofAnswers[$key]','$searchOption[$key]','$searchReply[$key]','$searchAnswer[$key]');\">Add</button></td></tr>";

}
      echo "</table>";

} 
```

您可以在此处查看应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)

当您打开应用程序时，只需单击左侧的绿色加号按钮，即出现模式窗口。

在`?`搜索栏中输入，然后输入搜索。你会看到一堆结果。

现在所有行看起来都很好，除了包含的行，该行中`>!\"�$%^&*()-=\'.,:;/?#~*/\\\\><`的“添加”按钮被搞砸了，如果你尝试点击那个添加按钮，那么你会得到问题顶部已经提到的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:45:47.880

你的最后一个`echo`应该用`json_encode`（作为javascript的相关部分）编码

```
echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$question','$searchMarks[$key]','$searchNoofAnswers[$key]','$searchOption[$key]','$searchReply[$key]','$searchAnswer[$key]');\">Add</button></td></tr>"; 
```

例子：

```
... parent.addwindow('".json_encode($question)."', .... 
```

# c++ - 尝试在 Visual C++ 中使用 CString 时出现语法错误

> ID：12783012
> 
> 赞同：0
> 
> 时间：2012-10-08T13:43:30.267
> 
> 标签：c++, c, visual-studio, visual-c++, cstring

我的项目对 include 不满意`cstring`。它会产生如下错误：

```
 Error   10  error C2061: syntax error : identifier 'using'  C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  18  1   fgdll
    Error   95  error C2061: syntax error : identifier 'tanhf'  C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cmath    26  1   fgdll
    Error   93  error C2061: syntax error : identifier 'tanf'   C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cmath    26  1   fgdll
    Error   51  error C2061: syntax error : identifier 'strxfrm'    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  26  1   fgdll
    Error   49  error C2061: syntax error : identifier 'strtok' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  26  1   fgdll
    Error   47  error C2061: syntax error : identifier 'strstr' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\cstring  25  1   fgdll
... 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:46:00.203

好的，试试这个：

右键单击每段代码并转到：

`Properties`> `C/C++`> `Advanced`>`Compile As` **并检查** `Compile as C++ Code(/TP)`

# java - 在 TextView 中设置数字的自定义格式

> ID：12783015
> 
> 赞同：1
> 
> 时间：2012-10-08T13:43:37.240
> 
> 标签：java, android, format, comma, settext

> **可能重复：**
> [如何在 java 中格式化数字？](https://stackoverflow.com/questions/50532/how-do-i-format-a-number-in-java)
> [String.format() 在java中格式化double](https://stackoverflow.com/questions/4885254/string-format-to-format-double-in-java)

我希望能够从 double 变量（称为 double）中获取输出，并将其与一些字符串文本（称为 outputPref，仅包含“cubic mm”）一起放入 TextView 中，如下所示

```
displayAnswer.setText(volume + " " + outputPref); 
```

这很好用，但是，数字在 TextView 中显示为完整的双精度数（有很多小数位）。我希望用逗号将数以千计（如果有的话）显示为小数点后一位，例如 Excel 数字格式 " *(* #,##0.0* ); *(* (#,##0.0);* (* " -"?? *);* (@_)"，或者简单地说（假设我不会有任何负数）“#,##0.0”

在将音量加倍变量应用于 TextView 之前，我应该使用什么函数来重新配置它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:47:47.257

```
String.format("%1$,.2f", myDouble); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:46:56.010

用这个

```
NumberFormat format = NumberFormat.getInstance();
        format.setMaximumFractionDigits(1);
displayAnswer.setText(format.format(volume)+ " "+outputPref); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:45:53.590

您可以将双数四舍五入以在 TextView 中显示它：

```
double roundTwoDecimals(double d) {
            DecimalFormat twoDForm = new DecimalFormat("#.##");
        return Double.valueOf(twoDForm.format(d));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:48:49.220

您可以使用以下方法设置小数位：

```
DecimalFormat df = new DecimalFormat("#.#"); 
```

这将在整数后给出一位小数，因为小数位后有一个 # 符号。

然后做：

```
df.format(yourDoubleHere); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:49:11.907

我希望它会帮助你

```
rountdoubel=Maths.round(outputPref)

displayAnswer.setText(volume + " " + rountdoubel); 
```

# typescript - 如何在 TypeScript AMD Modules 中定义依赖模块

> ID：12783025
> 
> 赞同：6
> 
> 时间：2012-10-08T13:44:09.080
> 
> 标签：typescript

如何使用 TypeScript 在 AMD 模块中定义依赖模块，包括例如 jQuery 和下划线。例如，我使用 JavaScript 是这样的：

```
define('moduleA',
    ['jquery', 'underscore'], function ($, _) {
    }
}); 
```

如何做到这一点，以便 TypeScript 编译器生成此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:22:25.767

使用编译器的当前实现（0.8），实现您所寻求的方法如下。

测试.ts：

```
import jquery = module("jquery");
import underscore = module("underscore");

export module A {
    console.log(jquery.$ + underscore._);
} 
```

jquery.ts：

```
export var $ = null; 
```

下划线.ts：

```
export var _ = null; 
```

如果您使用模块开关编译 test.ts：

```
tsc --module AMD test.ts 
```

它将为您生成以下 JS 文件：

```
define(["require", "exports", "jquery", "underscore"], function(require, exports, __jquery__, __underscore__) {
    var jquery = __jquery__;
    var underscore = __underscore__;
    (function (A) {
        console.log(jquery.$ + underscore._);
    })(exports.A || (exports.A = {}));
}) 
```

请注意，如果您将 import 语句放入模块中，它将由于错误而正确记录 codegen。该团队目前正在对该项目进行修复，但希望这不会阻止您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:05:36.790

由于编译器中的错误，这目前在 typescript 中无法正常工作（请参阅[stackoverflow](https://stackoverflow.com/questions/12762462/typescript-amd-modules-in-visual-studio)）。你需要做的是定义一个`moduleA`导入`jquery`和的模块，`underscore`然后用`-module amd`. 基本上，您需要以下三个文件：

**模块A.ts**

```
export module moduleA {
    import jquery = module("jquery");
    import underscore = module("underscore");
    console.log(jquery.jquery);
    console.log(underscore.underscore);
} 
```

**jQuery.ts**

```
export module jquery {
    var jquery = "jquery";
} 
```

**下划线.ts**

```
export module underscore {
    var underscore = "underscore";
} 
```

编译这三个文件`tsc -module amd`会产生以下代码`moduleA.js`：

```
define(["require", "exports"], function(require, exports) {
    (function (moduleA) {
        var jquery = __jquery__;

        var underscore = __underscore__;

        console.log(jquery.jquery);
        console.log(underscore.underscore);
    })(exports.moduleA || (exports.moduleA = {}));

}) 
```

就像我上面说的，由于编译器中的一个错误，这段代码实际上是不正确的，并且会在运行时抱怨丢失`__jquery__`。但是，一旦修复了这个错误，`amd`加载器`node.js`应该能够加载模块。

# .net - 在 Ruby 中实现 COM（由 .NET/C# 公开）接口

> ID：12783036
> 
> 赞同：2
> 
> 时间：2012-10-08T13:45:02.720
> 
> 标签：.net, ruby, com, win32ole

我想在 Ruby 中实现这样的接口（在 .NET 中截断）：

```
[ComVisible(true)]
    public interface Name
    {
        [ComVisible(true)]
        string Definition { get; }
        [ComVisible(true)]
        void SetId(int databeseID);
    } 
```

使用来自 ruby​​ 的 win32ole 库中的 WIN32OLE 方法。因此，例如，我可以将我的实现对象分配给另一个 com 对象的属性，即 C# 本身的实现。不需要从头开始向我解释一切，仅此而已，因为我已经使用 Ruby-Com-.NET 架构工作了几个星期。

```
 [ComVisible(true)]
         public interface Something
         {
             [ComVisible(true)]
             Name MName { get; }
         } 
```

拜托，我对 IronRuby 不感兴趣。

# html - 两个侧边栏和灵活的中心栏 CSS

> ID：12783037
> 
> 赞同：1
> 
> 时间：2012-10-08T13:45:09.590
> 
> 标签：html, css

三列网格具有固定宽度的侧边栏和流体中心。

我很难做到这一点。我有这些属性：

```
#sidebar { width: 65px; padding: 0px; }
#content { width: 100%; } 
```

然后在我的模板中调用它，如下所示：

```
{% block left_sidebar %} Test {% endblock %}
{% block content %} Content {% endblock %}
{% block right_sidebar %} Test {% endblock %} 
```

但是，它将左侧边栏置于“内容”之上，右侧边栏置于其下方。我该如何克服呢？

如果侧边栏中没有内容，我希望中间内容填满所有可用空间。这就是为什么我试图在可用空间之间将其设置为 100%。所以如果没有左栏，我想让中间的内容自动填满页面的左边2/3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:51:24.290

您需要将 div 向左浮动，然后确保总宽度小于或等于容器的 100%。

一个粗略的想法：

```
#sidebar, #content {float: left;}
#sidebar { width: 10%; }
#content { width: 80%; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:13:26.810

感谢您的帮助。我相信我在这里找到了关于 stackoverflow 的答案：我想我在这里找到了答案：

[CSS 布局（2 列布局，但如果没有侧边栏，主列必须是 100% 宽）](https://stackoverflow.com/questions/12302935/css-layout-2-column-layout-but-if-no-sidebar-main-column-must-be-100-wide)

# java - 使用 Xalan xslt 捕获异常

> ID：12783039
> 
> 赞同：0
> 
> 时间：2012-10-08T13:45:12.527
> 
> 标签：java, xslt, xalan

我有以下`XSLT`基于`Xalan`：

```
TransformerFactory factory = TransformerFactory.newInstance();
XalanErrorListener listener = new XalanErrorListener();
factory.setErrorListener(listener);

// Create transformer
StreamSource config = new StreamSource(xslPath);
Transformer transformer = factory.newTransformer(config);

// Create input / ouput
StreamSource source = new StreamSource(inputPath);
StreamResult result = new StreamResult(outputPath);

// Transform
transformer.transform(source, result); 
```

我`XalanErrorListener`只是覆盖`error`,`fatalError`和类中的`warning`方法`javax.xml.transform.ErrorListener`并记录异常：

```
public final class XalanErrorListener implements ErrorListener {

static final Logger LOGGER = LoggerFactory.getLogger(XalanErrorListener.class);

@Override
public void error(TransformerException exception) throws TransformerException {
    LOGGER.error(exception);
}

@Override
public void fatalError(TransformerException exception) throws TransformerException {
    LOGGER.error(exception);
}

@Override
public void warning(TransformerException exception) throws TransformerException {
    LOGGER.warn(exception);
}
} 
```

然而，在编码错误的文件上执行时，我在控制台中收到以下消息：

```
(Location of error unknown)
  com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: 
    Invalid byte 2 of 2-byte UTF-8 sequence. 
```

程序正常执行：没有抛出或记录异常，生成的文件为空！

如何捕获异常以按我想要的方式处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:28:41.760

您提供给 Xalan 的 ErrorListener 会捕获转换错误，但不会捕获 XML 解析错误。为此，您需要向 Xerces 解析器提供一个 ErrorHandler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:21:34.840

问题来自于`ErrorListener`需要设置为`Transformer`而不是`TransformerFactory`：

```
Transformer transformer = factory.newTransformer(config);
transformer.setErrorListener(listener); 
```

# sql - SQL Server 附加和分离数据库

> ID：12783040
> 
> 赞同：0
> 
> 时间：2012-10-08T13:45:14.390
> 
> 标签：sql, sql-server-2008

我在 IT 维护的另一台机器上收到以下错误。

> 在 sysindexes 中找不到数据库 ID 40、对象 ID 1、索引 ID 1 的行。在 sysindexes 上运行 DBCC Checktable。

我能够在我的笔记本电脑上附加和分离数据库。

我试过`DBCC Checktable (SYSINDEXES)`了，它给出了一个错误

> 找不到名为 Sysindexes 的表或对象。

关于如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:51:29.420

是你的表临时表。如果是

[http://support.microsoft.com/kb/269282/EN-US/](http://support.microsoft.com/kb/269282/EN-US/)

说

将您在临时表上创建的非聚集索引更改为聚集索引。-或者- 不要在临时表上使用非聚集索引。

# java - PHP/Java Bridge - 在 PHP 中访问 Java 对象

> ID：12783045
> 
> 赞同：3
> 
> 时间：2012-10-08T13:45:35.837
> 
> 标签：java, php, red5

我有一个 Red5 应用程序，它定义了一些公共 Java 方法。当我启动服务器时，应用程序类的一个对象被创建。我正在尝试使用 Java 应用程序类的现有实例从 PHP 调用应用程序类的公共方法。

所以这是我的 Java 应用程序：

```
public class App extends org.red5.server.adapter.ApplicationAdapter
{
    public boolean appStart(IScope app)
    {
        // This method gets called when the application starts
        // and an object of this App class is created.
        return true;
    }

    // This is the method I would like to call from PHP.
    public void f()
    {
    }
} 
```

从 PHP 中，我想访问创建的 App 对象并调用`f()`它的方法。

我试过玩这个叫做“上下文”的东西。所以在 Java 方法`App.appStart()`中，我这样做了：

```
// Save a reference to this App object to be retrieved later in PHP.
new PhpScriptContextFactory().getContext().put("x", this); 
```

在 PHP 中，我尝试像这样访问保存的对象：

```
require_once("http://localhost:5080/JavaBridge/java/Java.inc");
var_dump(java_is_null(java_context()->get("x"))); 
```

不幸的是，`java_is_null()`PHP 中的函数返回`true`.

我还尝试将 App 对象保存在 App 类的静态变量中，但是当我在 PHP 中访问该变量时，它的值为`null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:21:00.680

I think your post is rather incomplete as we can't see what JavaBridege/java/Java.inc does look like.

The second doubt is about what you try to do here. You want to call a Java function from PHP? Why don't you create a simple Servlet that triggers your call to the Application. You can then access the Servlet's URL and perform a call via cURL for example.

Calling a Java function "raw" is not recommended at all, I mean this function is loaded into the JVM and you should provide an API in your Java program to access this code or method. Remember that this Java code isloaded into Apache Tomcat and loaded via Spring as part of the Red5 framework. So it is much more then a simple Java Class. I doubt that triggering a method into the ApplicationAdapter the way you propose here is possible at all.

Sebastian

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:09:05.950

我遇到了一个库，可以让您从 PHP 客户端连接到 Red5 应用程序。我现在使用它而不是 PHP/Java Bridge。你可以在这里找到它：[code.google.com/p/php-rtmp-client](http://code.google.com/p/php-rtmp-client)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T11:54:11.427

很少有技术可以帮助您实现 php/Java 桥接、SOAP、Zend 的供应商特定框架或 Caucho 的 J2EE 应用服务器、IBM 的 Eclipse 零框架

我推荐 php/java 桥接器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:26:07.973

我认为您的 PHP Web 服务器无法加载 Java.inc。

请按照这些步骤检查，它对我有用

[http://php-java-bridge.sourceforge.net/pjb/desktop-apps.php](http://php-java-bridge.sourceforge.net/pjb/desktop-apps.php)

# vb.net - VB.net Binair 复选框的十进制值

> ID：12783046
> 
> 赞同：0
> 
> 时间：2012-10-08T13:45:38.727
> 
> 标签：vb.net, checkbox, binary, decimal, counter

我在一个组中有 8 个复选框，如果我想获得 binair 的十进制值

checkbox1.checked = true checkbox2.checked = true

那么值必须是 (2 ^ 0) + (2 ^ 1) = 3 （0 = checkbox1 和 1 = checkbox2 等）

我知道解决方案可能很简单，但直到现在我都无法让它发挥作用。我现在拥有的代码如下：

```
 Private Function AnyOptionsChecked() As Boolean
    For Each chk As CheckBox In GroupBox1.Controls
        t = t + 1
        If chk.Checked = True Then
            i = i + 2 ^ t
        End If
    Next
    Return False
End Function 
```

但在 if/else 开始工作之前，t 似乎已经是 7（因为有 8 个复选框）。

有人知道如何解决这个问题或能够指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:03:32.063

您的函数返回一个布尔值（真/假），但如果您想知道已检查哪些选项，您确实想返回一个数字。这个怎么样：

```
Private Function OptionsChecked() As Integer
    Dim t As Integer = 0
    Dim result As Integer = 0
    For Each chk As CheckBox In GroupBox1.Controls
        If chk.Checked = True Then
            result = result + 2 ^ t
        End If
        t = t + 1
    Next
    Return result
End Function 
```

So my function returns zero when no options are checked. Otherwise it returns an integer indicating which options have been checked (1 = the first option, 2 = second option, 3 = the first and second option, etc.).

# android - 导入 org.ksoap2.transport.AndroidHttpTransport 有问题；

> ID：12783048
> 
> 赞同：4
> 
> 时间：2012-10-08T13:45:41.970
> 
> 标签：android, android-ksoap2

我想运行一个现有的项目。但是当我导入时`ksoap2-android-assembly-2.6.5-jar-with-dependencies.jar`，发生了错误。

```
import org.ksoap2.transport.AndroidHttpTransport; 
```

我在包中找不到`AndroidHttpTransport`方法`org.ksoap2.transport`。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T15:26:27.493

您应该使用 ksoap2 jar 文件.. 然后使用以下代码

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;

envelope.setOutputSoapObject(request);

HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
SoapObject response=null;
try
{
httpTransport.call(SOAP_ACTION, envelope);
response = (SoapObject) envelope.bodyIn; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:52:44.433

AndroidHttpTransport 已弃用...有关此更改的更多信息，请查看此链接：[http ://code.google.com/p/wsdl2ksoap/issues/detail?id=2](http://code.google.com/p/wsdl2ksoap/issues/detail?id=2)

如果代码已经存在于您的项目中，您将看到还有一个解决方案可以通过此替换来修复代码：

```
AndroidHttpTransport ht = new AndroidHttpTransport(Address);
androidHttpTransport.call(params.GetSoapAction(), envelope); 
```

至：

```
HttpTransportSE ht = new HttpTransportSE(Address);
ht.call(params.GetSoapAction(), envelope); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:49:22.730

您必须导入 ksoap2-android-assembly-2.4-jar-with-dependencies.jar。然后错误将消除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:23:16.140

将 jar 文件（ksoap2-android-assembly-2.6.5-jar-with-dependencies.jar）复制到 lib 文件夹，然后从 eclipse 中刷新 lib 文件夹

# mysql - Mysql根据条件阻止联合

> ID：12783057
> 
> 赞同：0
> 
> 时间：2012-10-08T13:46:01.843
> 
> 标签：mysql, sql, select, if-statement, union

我想`union`根据条件触发：

```
set @a := 0;

select @a := 1, b.name from B b
UNION
select 0, c.name from C c 
```

输出如下：

```
set @a := 0;

select @a := 1, b.name from B b
if(@a > 0, UNION select 0, c.name from C c, ''); 
```

因此，如果第一个选择已经返回行，我可以保存第二个选择。问题是这些查询很重并且有很多连接，所以我只想在必要时执行它们。

由于这项工作：

```
select b.name from B b where if(true, b.name = 'example', '') 
```

有什么办法可以做到吗？

谢谢。

塞达诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:50:39.237

您想从 B 中选择所有行。如果没有，那么您需要 C 中的行。您可能可以摆弄条件逻辑来做到这一点。您也可以使用 SQL 查询来执行此操作：

```
select 1 as which, name
from B union all
select 0 as which, name
from C
where not exists (select 1 from B limit 1) 
```

# php - 如何使用动态用户属性配置用户认证？

> ID：12783059
> 
> 赞同：0
> 
> 时间：2012-10-08T13:46:06.837
> 
> 标签：php, mysql, cakephp, authentication, login

我是 CakePHP 的新手，我想从我的自定义库迁移到 CakePHP。

在我的自定义库中，我有这样的用户属性：

`auth_users`表知道“user_ids”：

```
CREATE TABLE IF NOT EXISTS `auth_users` (
  `id` int(11) NOT NULL,
  UNIQUE KEY `id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

`auth_user_attributes`存储“用户属性”的表：

```
CREATE TABLE IF NOT EXISTS `auth_user_attributes` (
  `user_id` int(11) NOT NULL,
  `attribute` text NOT NULL,
  `value` text NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

因此，每当我想要一个 user_id 的用户时，我的自定义库都会返回`$system->auth->user->get(1)`：

```
Array(
    'fullname' => 'José Moreira',
    'username' => 'Cuss',
    ...
) 
```

如果我想保存用户，我有两种方法，保存整个数组`$system->auth->user->save(user_id,user_attributes_array)`或按属性`$system->auth->user->put(user_id, user_attribute, user_attribute_value)`

我怎么能在 CakePHP 上做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:07:51.533

我建议您重新设计您的模式以适应 CakePHP 约定。否则你会失去很多自动化，如果没有人强迫你，我认为你迁移到 Cake 是没有意义的。`User`不能有多个`fullname`or `username`。没有理由将`fullname`and`username`放入另一个表中。遵循[简单身份验证和授权应用程序教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)，您将没有痛苦。

然后您可以通过调用[User->UserAttribute->saveMany()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array)来保存用户属性。

# c# - 通过 Web 服务返回的实体框架类的问题

> ID：12783063
> 
> 赞同：0
> 
> 时间：2012-10-08T13:46:19.953
> 
> 标签：c#, .net, ajax, web-services, entity-framework

我已经实现了一个 Web 服务，我通过 ajax 调用它。
*注意：我的实体是为实体框架代码第一目的而制作的。*

我的 ajax 如下所示：

```
$.ajax({
   type: "GET",
   url: "/MyProject/MyService.svc/GetEntity",
   data: "entityID=1",
   dataType: "json",
   contentType: "application/json; charset=utf-8",
   success: AjaxSucceeded,
   error: function (msg, status, extra) {
      alert(status + " - " + extra);
   }
 }); 
```

AjaxSucceeded 只是一个带有数据变量的函数，我只是在控制台中记录数据。

我的 GetEntity 函数目前如下所示：

```
[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json)]
public MyEntity GetEntity(int entityID)
{
    AccessObject accessObject = new AccessObject("MyConnectionString");

    MyEntity theEntity = accessObject.GetByID(entityID);

    return theEntity;
} 
```

我已经用一个专门为测试而创建的类对此进行了测试，它按预期工作（例如，我在 Web 服务中创建了一个非常简单的 MyEntity 类，有几个属性，没有其他方法等）。

当我返回我为代码优先实体框架创建的实体时，就会出现问题。它不起作用，多次调用 Web 服务功能，然后控制台中出现错误，指出“加载资源失败”，指的是我的服务功能。

作为参考，这是我的实体：

```
[DataContract(IsReference=true)]
public class MyEntity
{
    #region Properties

    [Key]
    [DataMember]
    public int ID { get; set; }

    public bool SomeBoolean { get; set; }

    [StringLength(1000)]
    public string Description { get; set;}

    #endregion

    #region Relationships

    public virtual SomeOtherEntity OtherEntity { get; set; }

    #endregion

} 
```

我只将 ID 设置为 DataMember 进行测试，但仍然没有成功。

谁能指出我正确的方向？我知道 Web 服务可以工作，因为其他功能也可以工作，如果我设置了一个本地（在 Web 服务内）类，它会毫无问题地返回它。所以我假设它与实体框架属性有关？我可能错了，但这就是我能想象的。

感谢您的时间。

哦，也供参考，我的服务类具有以下属性：

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:58:23.213

问题只是实体并不是真正为序列化而构建的。我的建议是创建一个 DTO，映射相关属性并将其通过电线传递，例如

```
public class EntityDto
{
    public int ID { get; set; }
    public string Description { get; set; }
    ...
}

[OperationContract]
[WebGet(ResponseFormat = WebMessageFormat.Json)]
public EntityDto MyEntity(int entityId)
{
    AccessObject accessObject = new AccessObject("MyConnectionString");
    MyEntity theEntity = accessObject.GetByID(entityID);
    return new EntityDto()
    {
        ID = theEntity.ID,
        Description = theEntity.Description,
        ...
    };
} 
```

# css - 为什么溢出：隐藏具有增加高度以包含浮动元素的意外副作用？

> ID：12783064
> 
> 赞同：33
> 
> 时间：2012-10-08T13:46:25.370
> 
> 标签：css, css-float, overflow

这个问题最好用[这个 fiddle](http://jsfiddle.net/WuqGM/)解释，使用以下 HTML：

```
<div class="outer">
    <div class="inner-left"></div>
    <div class="inner-right"></div>
</div> 
```

CSS：

```
.outer {
    width: 100px;
    border: solid 5px #000;
}
.inner-left {
    float: left;
    height: 200px;
    width: 50px;
    background: #f00;
}
.inner-right {
    float: right;
    height: 200px;
    width: 50px;
    background: #0f0;
} 
```

基本上，我想知道为什么会`overflow: hidden`导致外部元素的高度增加，包含两个浮动元素？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-08T13:50:00.717

最简单地说，这是因为带有`overflow`not `visible`（默认）的块框创建了一个新的[块格式化上下文](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)。

创建新块格式化上下文的框被定义为[拉伸以包含其浮动高度](http://www.w3.org/TR/CSS21/visudet.html#root-height)，如果它们本身没有指定的高度，默认为`auto`（规范将这些框称为*块格式化上下文根*）：

> ### 10.6.7 块格式化上下文根的“自动”高度
> 
> 在某些情况下（例如，参见上面的第 10.6.4 和 10.6.6 节），建立块格式化上下文的元素的高度计算如下：
> 
> *[...]*
> 
> 此外，如果元素有任何浮动后代，其底部边距边缘低于元素的底部内容边缘，则增加高度以包括这些边缘。仅考虑参与此块格式化上下文的浮点数，例如，绝对定位后代内的浮点数或其他浮点数不考虑。

这不是最初的 CSS2 规范中的情况，而是作为 CSS2.1 中的一个变化引入的，以响应一个不同的（并且更紧迫的）问题。[这个答案](https://stackoverflow.com/questions/9943503/why-does-css2-1-define-overflow-values-other-than-visible-to-establish-a-new-b/11854515#11854515)提供了对这些变化的解释。出于这个原因，似乎很容易将其称为副作用，尽管这些变化是有意为之的。

另请注意，这与清除浮动（*clearance*）不同。*仅*当您使用该`clear`属性并且要清除前面的浮点数时才会清除浮点数：

*   如果您`clear: both`的示例中有一个与外部元素同级的元素，则浮动将被清除，但外部元素不会拉伸。

*   如果您有一个与外部元素的最后一个子元素相似的元素（或伪元素）（使其成为*floats*的后续兄弟），则外部元素将向下延伸以包含该元素的底部边缘，并且对于零高度元素，它本质上意味着浮动的最底部边缘。这种技术被称为“clearfix”，因为元素（或伪元素）除了强制外部元素通过内部清除来包含浮动之外没有其他目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:44:02.180

我向学生解释的方式是：

您通过告诉他“所有内容过多，不要显示”来触发包含浮动的元素，因此该元素将查找任何过多的内容，他会找到一些浮动的元素，现在他知道了他应该收容他们。

# r - 有没有一种快速的方法来搜索 R 中的变量？

> ID：12783066
> 
> 赞同：8
> 
> 时间：2012-10-08T12:49:25.813
> 
> 标签：r, stata

在 Stata 中，该`lookfor`命令提供了一种在数据集中搜索变量的快速方法（它同时搜索变量名称和标签）。如此`lookfor education`迅速地找到与教育相关的变量。R中是否有等效的快捷功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:27:51.323

您可以简单地`grep`使用 data.frame 获取必要的信息。然后，您将获得更多信息，而不仅仅是匹配某人的变量名称列表。您还可以使用正则表达式，从而增强您的搜索能力。这是执行您想要的功能的示例（仅适用于 data.frame）：

```
lookfor <- 
function (pattern, data, ...) 
{
    l <- lapply(data, function(x, ...) grep(pattern, x, ...))
    res <- rep(FALSE, ncol(data))
    res[grep(pattern, names(data), ...)] <- TRUE
    res <- sapply(l, length) > 0 | res
    names(res) <- names(data)
    names(res)[res]
} 
```

首先我 grep 每一列，然后我 grep 列名。然后我只保留 grep 是否匹配任何内容的信息，并分别为每一列记录。您`...`可以将任何参数传递给`grep`. 如果省略它，此函数将进行简单的字符串匹配。

这是一个例子：

```
> dt<- data.frame(y=1:10,x=letters[1:10],a=rnorm(10))
> lookfor("a",dt) 
[1] "x" "a" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-14T11:49:00.063

作为我在会话开始时运行的 oneliner 怎么样：

```
lkf <- function(d,p) names(d)[grep(p,names(d))] 
```

data.frame`d`的名称和`p`模式在哪里。

所以

```
d <- data.frame(a=letters[1:10],b=1:10,c=month.name[1:10])
lkf(d,'c')
# [1] "c" 
```

这是一个不需要你引用变量名的版本

```
lookfor <- function(string_to_find, data){
    # Extract the arguments and force conversion to string
    pars <- as.list(match.call()[-1])
    data.name <- as.character(pars$data)
    var <- as.character(pars$string_to_find)

    # Regular expression search through names
    result <- names(data)[grep(var, names(data))]

    if(length(result) == 0) {
        warning(paste(var, "not found in", data.name))
        return(NULL)
    }
    else {
        return(result)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T13:16:20.433

如果您只需要搜索变量列表以找到您正在寻找的变量，那么可以使用 RStudio（v0.99 及更高版本）中的代码完成功能。只需开始输入，您将获得可能匹配的列表。因此，在您的情况下 `education$` ，将出现数据框中包含的变量列表。滚动浏览这些并选择您想要的。

# scala - 很难理解为什么这个函数被称为 MapReduce

> ID：12783069
> 
> 赞同：3
> 
> 时间：2012-10-08T13:46:42.373
> 
> 标签：scala, map, reduce

在我的[Scala 课程](https://www.coursera.org/course/progfun)中给出了一个例子。它是关于找到一个更通用的函数，它可以用来定义算术求和函数和算术产生函数。以下是应该概括的功能。

```
def sum(f:Int=>Int)(a:Int,b:Int):Int ={
 if(a>b) 0
 else f(a) + sum(f)(a+1,b)
}

def product(f:Int=>Int)(a:Int,b:Int):Int={
 if(a>b)1
 else f(a)*product(f)(a+1,b)
} 
```

为了概括这些功能，老师给出了这样一个功能：

```
def mapReduce(f:Int=>Int,combine: (Int,Int)=>Int, zero:Int)(a:Int,b:Int):Int ={
    if(a>b) zero
    else combine(f(a),mapReduce(f, combine, zero)(a+1, b))
} 
```

所以 mapReduce 函数可以用来概括 sum 和 product 函数如下：

```
def sumGN(f:Int=>Int)(a:Int,b:Int) = mapReduce(f, (x,y)=>(x+y), 0)(a, b)
def productGN(f:Int=>Int)(a:Int,b:Int) = mapReduce(f, (x,y)=>(x*y), 1)(a, b) 
```

我查看了函数式编程中 map reduce 的定义，但我很难理解为什么上面的泛化函数被命名为 map reduce。我无法掌握这种关系。任何帮助都会让我很高兴。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:05:21.780

函数式编程通常具有三个中心运算符：`map`、`reduce`（有时称为`fold`）和`filter`。

*   Map 接受一个列表和一个操作，并生成一个列表，其中包含应用于第一个列表中所有内容的操作。
*   Filter 接受一个列表和一个测试，并生成另一个列表，其中仅包含通过测试的元素。
*   Reduce（或折叠）接受一个列表、一个操作和一个初始值，并将该操作应用于初始值和列表中的元素，将输出与下一个列表项一起传递给自身，产生列表的操作和.

例如，如果您的列表是 [2,3,4,5,6,7]，您的初始值为 1，并且您的操作是加法，则归约的行为方式如下：

```
Reduce([2,3,4,5,6,7], +, 1) = ((((((initial + 2) + 3) + 4) + 5) + 6) + 7) 
```

您的讲师可能会调用它，`mapReduce`因为这是范式的名称，尽管简单`reduce`也足够了。

如果你对他的名字的意义感到好奇，你应该问他。他是你的导师和所有人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T14:23:25.053

这绝不是一个确切的解释（无论如何名称都是模糊的），但这是一个替代定义：

```
def mapReduce(f: Int => Int, combine: (Int, Int) => Int, zero: Int)(a: Int, b: Int): Int ={
  if (a > b) zero
  else (a to b).map(f).reduce(combine)
} 
```

你看到链接了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:16:02.760

mapReduce 的映射函数在问题中是 f，尽管从来没有一个例子来说明它的定义。对于 sum 和 product，它将是恒等函数，但如果您对平方求和，则映射函数将是平方函数。

mapReduce 的 reducer 函数是 combine，其中我们将一个 accumulator+value 的元组归约为一个新的累加器，用于下一次递归。

我认为除了代码不是很清楚之外，缺少的链接是将数字视为集合（例如，3 是三个 1 的集合）。这很不寻常，我不知道它能给你带来什么，但可能是你的老师稍后会使用数字和集合之间的类比来做更深刻的事情。

这是来自 Odersky 的 coursera 课程吗？

# java - 其他类中的 Get 和 Set 方法

> ID：12783073
> 
> 赞同：3
> 
> 时间：2012-10-08T13:46:56.517
> 
> 标签：java, class, methods, setter, getter

我正在学习 java，但我在其他类中的 get 和 set 方法有问题。

我的第一堂课叫部门，第二堂课叫公司。我想设置班级部门的员工人数并获取班级公司的员工人数。

部门班

```
public class Department {

    public int staffNumber;

    public Department() {
    }

    public void setStaffNumber(int staff) {
        this.staffNumber= staff;
    }

} 
```

公司类

```
public class Company {

     public Department staffNumber;

     public Company() {
     }

     public Department getStaffNumber() {
          return Department.staffNumber = Department.staffNumber;
     }

} 
```

您能帮我解决错误消息吗 - 无法从静态上下文中引用非静态变量 staffNumber 吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:49:27.663

问题在这里：

```
return Department.staffNumber = Department.staffNumber; 
```

编译器将读取`Department.staffNumber`为：`staffNumber`是`Department`类中的静态变量。有你的问题。

为了解决这个问题，您应该只返回实例数据：

```
public Department getStaffNumber() {
    //<Department attribute in the class>
    return staffNumber;
} 
```

顺便说一句，即使你`Department.staffNumber`在类中有一个静态属性`Department`，建议的行`return Department.staffNumber = Department.staffNumber;`也没有任何意义。它类似于：

```
public class SomeClass {

    int x;

    public int getX() {
        //return x = x; //clumsy
        return x; //now this might be better
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:50:16.577

```
 public Department getStaffNumber() {
          return Department.staffNumber = Department.staffNumber;
     } 
```

Department.staffNumber 像静态变量一样被访问。应该是`return staffNumber`。

你的吸气剂通常不会初始化。它应该只是*返回*。

如果你想返回 Department 那么它应该是`return staffNumber`

如果你想返回 Department.staffNumber 它应该返回`staffNumber.staffNumber`将返回类型更改为`int`... 并修复变量名！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:51:06.897

您正在尝试访问变量 staffNumber，因为它是一个[静态变量](http://www.roseindia.net/java/beginners/staticvariable.shtml)。

如果你想返回staffNumber，你应该返回staffNumber.staffNumber。不过，您使用的语义不好……您应该拥有：

```
public class Company {

     public Department m_department;

     public Company() {
         m_department=new Department();
     }

     public Department getStaffNumber() {
          return m_department.staffNumber;
     }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:54:42.553

您似乎对基本概念感到困惑。请执行下列操作

```
public class Department {

    public int staffNumber;

    public Department() {
    }

    public void setStaffNumber(int staff) {
        this.staffNumber= staff;
    }

    public int getStaffNumber() {
        return staffNumber;
    }
} 
```

现在`StaffNumber`在你的`Company`课堂上使用

```
public class Company {

    public Department dept;

    public Company() {
        dept= new Department();
    }

    public int getDepartmentStaffNumber() {
        return dept.getStaffNumber();
    }

    public void setDepartmentStaffNumber(int staff) {
        dept.setStaffNumber(staff)
    }
} 
```

# json - 使用 struts2 + 其余和约定插件，输出 JSON/XML 结果的问题

> ID：12783074
> 
> 赞同：1
> 
> 时间：2012-10-08T13:46:58.380
> 
> 标签：json, rest, struts2

我正在探索使用带有约定+休息插件的struts 2。有一个 struts2-rest-showcase 应用程序展示了如何将这些插件与 struts 2 一起使用。在示例应用程序中，它们总是重定向到 HTML 页面。我想知道是否可以通过 Response 对象编写 JSON/XML？有没有人有任何简单的代码来展示如何做到这一点？

例如，用户可以在 /myapp/orders/new 处创建新资源，然后返回 JSON 消息：{“results”：“新订单创建成功”}。下面的代码是在 OrdersController 中，我宁愿在其中写回 JSON（实际上，它会返回到 /WEB-INF/content 中的 HTML 页面）。

```
public HttpHeaders create() {
 ordersService.save(model);
 addActionMessage("New order created successfully");
 return new DefaultHttpHeaders("success").setLocationId(model.getId());
} 
```

另一方面，这个要求是对 REST 的正确使用吗？当我执行 GET、POST、PUT、DELETE 命令时，对我返回的内容有什么期望？我不应该拿回任何东西（包括 XML/JSON）吗？

# javascript - ajax 依次调用

> ID：12783081
> 
> 赞同：0
> 
> 时间：2012-10-08T13:47:40.517
> 
> 标签：javascript, ajax

我需要一个接一个地进行两个单独的ajax调用。如果第一次调用成功，我需要在第二次调用中使用第一次调用的结果。这是我尝试过的：

```
$.ajax({
       url:myurl,     // myurl defined elsewhere
       type:'POST',
       data: mydata,  // mydata defined elsewhere

       success: function(data, textStatus) { 
           if (textStatus=='success'){
              // Get paramValue from the data
              // Here I want to call another similar ajax call
              callNextAjax(paramValue); // This function calls a similar ajax call. 
                                        // But always gets error call back there
           }
       },
       error: function(jqXHR, textStatus, errorThrown) {
           alert("First Request Failed");
       }     
});

function callNextAjax(paramValue){
  $.ajax({
           url:myurl1,     // myurl1 defined elsewhere
           type:'POST',
           data: mydata1,  // mydata1 defined elsewhere.  mydata1 uses paramValue

           success: function(data, textStatus) { 
               if (textStatus=='success'){
                  goToNewHtmlPage(); // open up a new html page in this function
               }
           },
           error: function(jqXHR, textStatus, errorThrown) {
               alert("Second Request Failed");
           }     
    });
} 
```

callNextAjax() 函数是一个类似的调用，它使用值 paramValue。在 callNextAjax 函数中，我总是收到带有警报“第二次请求失败”的错误回调。当我单独运行 callNextAjax 时（不在第一个 ajax 的成功函数内）它工作正常（从 goToNewHtmlPage() 转到下一页）

猜猜我的实现有什么问题？我已经用完了我的实验。这里的任何类型的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:44:30.390

哇，Javascript 的这个领域经常被混淆，我经常对一些解决方案的复杂程度感到惊讶。jQuery 和 Javascript 通常被设计为异步的，这常常使得优雅地创建同步代码变得困难。这就是流控制库做得很好的地方。有几个可用的流控制库（特别是 async 在 Node.js 上有大量用户群），但对于客户端 JS，[Frame.js](https://github.com/bishopZ/Frame.js)非常擅长解决这个问题，维护可读的代码，并且可以扩展到更大的问题这种类型的。

```
Frame(function(next){
    $.ajax({
       url:myurl,     // myurl defined elsewhere
       data: mydata,  // mydata defined elsewhere
       success: function(data, textStatus) { 
           if (textStatus=='success'){
              // ... Get paramValue from the data
              next(paramValue);
           }
       },
       error: function(jqXHR, textStatus, errorThrown) {
           alert("First Request Failed");
           next();
       }     
    });
});
Frame(function(next, paramValue){
  if(paramValue){
    $.ajax({
        url:myurl1,     // myurl1 defined elsewhere
        data: mydata1,  // mydata1 defined elsewhere.  mydata1 uses paramValue
        success: function(data, textStatus) { 
            if (textStatus=='success'){
                next(secondParamValue);
            }
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert("Second Request Failed");
            next();
        }     
    });  
  }
});

Frame(function(next, secondParamValue){
  if(secondParamValue){
      goToNewHtmlPage(); // open up a new html page in this function
  } else {
      // do something else
  }
  next();
});

Frame.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:31:25.943

尝试这样的事情：

```
AjaxCheckResult = function() {

    var url = "http://url";

    return {

        errorfunction: function(jqXHR, textStatus, errorThrown) {
                   alert("First Request Failed");
        } ,
        sucessFunction: function(data, textStatus) { 
                   if (textStatus=="success"){
                     me.doAjax(paramValue);
                   }
               },

        doAjax: function(mydata){
            me = this;
            $.ajax({
               url:me.url,     // myurl defined elsewhere
               type:'POST',
               data: mydata,  // mydata defined elsewhere

               success: sucessFunction
               error: errorfunction
            });
        }
    };
}();

AjaxCheckResult.doAjax(Something); 
```

# c# - 如何将 DataGridView 列类型更改为 Button？

> ID：12783088
> 
> 赞同：0
> 
> 时间：2012-10-08T13:48:00.743
> 
> 标签：c#, datagridview

我正在使用数据集将数据从 MySQL 表填充到 datagridview 我有 5 列由数据集自动生成，我想以编程方式将列 [4] EditText 类型更改为 Button 类型？尝试这个但不完整的语法

```
grid2.Columns[4].CellType = ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:19:42.460

我认为您必须首先使用您需要的类型创建此列，然后将其添加到网格中。但我不记得没有书。

```
 CheckBoxField col = new CheckBoxField();
    gvQuestions.Columns.Add((DataControlField)col); 
```

# android - Android Host API 与设备通信

> ID：12783089
> 
> 赞同：0
> 
> 时间：2012-10-08T13:48:08.737
> 
> 标签：android, usb

我需要使用 android 主机 API 与 USB 通信设备进行通信

这是我正在使用的设备的信息。

lsusb -v -d PID:VID

总线 003 设备 007：ID PIDVID VOTI

设备描述符：

```
bLength                18
bDescriptorType         1
bcdUSB               1.01
bDeviceClass            2 Communications
bDeviceSubClass         0 
bDeviceProtocol         0 
bMaxPacketSize0         8
idVendor              PID VOTI
idProduct             VID 
bcdDevice            1.00
iManufacturer           1 
iProduct                2 
iSerial                 0 
bNumConfigurations      1
Configuration Descriptor:
bLength                 9
bDescriptorType         2
wTotalLength           67
bNumInterfaces          2
bConfigurationValue     1
iConfiguration          0 
bmAttributes         0x80
(Bus Powered)
MaxPower              100mA 
```

接口描述符：

```
 bLength                 9
  bDescriptorType         4
  bInterfaceNumber        0
  bAlternateSetting       0
  bNumEndpoints           1
  bInterfaceClass         2 Communications
  bInterfaceSubClass      2 Abstract (modem)
  bInterfaceProtocol      1 AT-commands (v.25ter)
  iInterface              0 
  CDC Header:
    bcdCDC               1.10
  CDC ACM:
    bmCapabilities       0x02
      line coding and serial state
  CDC Union:
    bMasterInterface        0
    bSlaveInterface         1 
  CDC Call Management:
    bmCapabilities       0x03
      call management
      use DataInterface
    bDataInterface          1 
```

端点描述符：

```
 bLength                 7
    bDescriptorType         5
    bEndpointAddress     0x83  EP 3 IN
    bmAttributes            3
      Transfer Type            Interrupt
      Synch Type               None
      Usage Type               Data
    wMaxPacketSize     0x0008  1x 8 bytes
    bInterval             100 
```

接口描述符：

```
 bLength                 9
  bDescriptorType         4
  bInterfaceNumber        1
  bAlternateSetting       0
  bNumEndpoints           2
  bInterfaceClass        10 CDC Data
  bInterfaceSubClass      0 Unused
  bInterfaceProtocol      0 
  iInterface              0 
```

端点描述符：

```
 bLength                 7
    bDescriptorType         5
    bEndpointAddress     0x01  EP 1 OUT
    bmAttributes            2
      Transfer Type            Bulk
      Synch Type               None
      Usage Type               Data
    wMaxPacketSize     0x0006  1x 6 bytes
    bInterval               0 
```

端点描述符：

```
 bLength                 7
    bDescriptorType         5
    bEndpointAddress     0x81  EP 1 IN
    bmAttributes            2
      Transfer Type            Bulk
      Synch Type               None
      Usage Type               Data
    wMaxPacketSize     0x0008  1x 8 bytes
    bInterval               0 
```

现在我可以发现设备并获得与设备通信的权限。但是当我尝试使用 bulkTransfer() 函数与设备通信时，它总是返回-1。

这是代码

```
UsbDeviceConnection conn = mUsbManager.openDevice(mDevice);

conn.controlTransfer(33, 34, 0, 0, null, 0, 0);

byte[] buffer = new byte[]{ (byte) 0x80,0x25, 0x00, 0x00, 0x00, 0x00, 0x08 };

conn.controlTransfer(33, 32, 0, 0, buffer , 7, 0);  //8N1, 9600 baud

conn.bulkTransfer(epOUT, new byte[]{msData}, 1, 0);

UsbEndpoint epIN = null;

UsbEndpoint epOUT = null;

UsbInterface usbIf = mDevice.getInterface(1);

for (int i = 0; i < usbIf.getEndpointCount(); i++) {

if (usbIf.getEndpoint(i).getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {

    if (usbIf.getEndpoint(i).getDirection() == UsbConstants.USB_DIR_IN)

        epIN = usbIf.getEndpoint(i);
    else
        epOUT = usbIf.getEndpoint(i);
}
}

for (;;) {// this is the main loop for transferring

synchronized (sSendLock) {//ok there should be a OUT queue
    try {
        sSendLock.wait();
    } catch (InterruptedException e) {
        if (mStop) {
            mConnectionHandler.onUsbStopped();
            return;
        }
        e.printStackTrace();
    }
}
conn.bulkTransfer(epOUT, new byte[] { mData }, 1, 0);

    if (mStop) {
        mConnectionHandler.onUsbStopped();
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:31:53.107

据我所知，您不需要先调用 claimInterface() 。另请注意，如果由于某种原因无法创建设备，则声明界面将失败。我在获取 irda 接口以在手机上正确注册时遇到问题，这是由于 irda 的电源需求，请参阅我的问题，然后] [1](https://stackoverflow.com/questions/12339312/android-usbhost-mode-why-does-my-irda-device-fail-on-claiminterface)

# php - php mysql 注册表单

> ID：12783092
> 
> 赞同：-1
> 
> 时间：2012-10-08T13:48:19.517
> 
> 标签：php, html, mysql, forms

我正经历着噩梦般的一天，并试图修改 html 和 php 以将注册表单的信息插入 mysql。下面是html表单和php提交页面。我已经开始使用与数据库的 sql 连接，并为添加函数设置了一些变量。

今天是星期一，我想我有点迷失了——任何帮助都会很棒:-)

```
<?php

$dbcnx = @mysql_connect('localhost', 'user', 'pass');
        if (!$dbcnx) {
                exit('<p>Unable to connect to the ' . 'database server at this time.</p>');
        }
        if (!@mysql_select_db('signp',$dbcnx)) {
                exit('<p>Unable to locate the file ' . 'database at this time.</p>');
        }

if ($action == "add") {
/* ****************************** Do this if we are adding a new record */
        $query = "INSERT INTO connect VALUES ()";

        $result = mysql_query( $query );        
        if(!$result){
                die ("could not query database: <br />".mysql_error());
        }       
        $d_id = $inserted_id = mysql_insert_id();
        $dname = "";
        $demail = "";
        $dpassword = "";
}

// Error reporting:
error_reporting(E_ALL^E_NOTICE);

// This is the URL your users are redirected,
// when registered succesfully:

$redirectURL = 'http://ip/index.html';

$errors = array();

// Checking the input data and adding potential errors to the $errors array:

if(!$_POST['name'] || strlen($_POST['name'])<3 || strlen($_POST['name'])>50)
{
        $errors['name']='Please fill in a valid name!<br />Must be between 3 and 50 characters.';
}

if(!$_POST['email'] || !preg_match("/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/", $_POST['email']))
{
        $errors['email']='Please fill in a valid email!';
}

if(!$_POST['pass'] || strlen($_POST['pass'])<5)
{
        $errors['pass']='Please fill in a valid password!<br />Must be at least 5 characters long.';
}
// Checking whether the request was sent via AJAX
// (we manually send the fromAjax var with the AJAX request):

if($_POST['fromAjax'])
{
        if(count($errors))
        {
                $errString = array();
                foreach($errors as $k=>$v)
                {
                        // The name of the field that caused the error, and the
                        // error text are grouped as key/value pair for the JSON response:
                        $errString[]='"'.$k.'":"'.$v.'"';
                }

                // JSON error response:
                die     ('{"status":0,'.join(',',$errString).'}');
        }

        // JSON success response. Returns the redirect URL:
        echo '{"status":1,"redirectURL":"'.$redirectURL.'"}';

        exit;
}

// If the request was not sent via AJAX (probably JavaScript
// has been disabled in the visitors' browser):

if(count($errors))
{
        echo '<h2>'.join('<br /><br />',$errors).'</h2>';
        exit;
}

// Directly redirecting the visitor:

header("Location: ".$redirectURL);
?> 
```

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>sign up</title>

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

<body>
<FORM ACTION="submit.php" METHOD=get>
<div id="carbonForm">
        <h1>Signup</h1>

    <form action="submit.php" method="post" id="signupForm">

    <div class="fieldContainer">

        <div class="formRow">
            <div class="label">
                <label for="name">Name:</label>
            </div>

            <div class="field">
                <input type="text" name="name" id="name" />
            </div>
        </div>

        <div class="formRow">
            <div class="label">
                <label for="email">Email:</label>
            </div>

            <div class="field">
                <input type="text" name="email" id="email" />
            </div>
        </div>

        <div class="formRow">
            <div class="label">
                <label for="pass">Password:</label>
            </div>

            <div class="field">
                <input type="password" name="pass" id="pass" />
            </div>
        </div>

    </div> <!-- Closing fieldContainer -->
    <div class="signupButton">
        <input type="submit" name="submit" id="submit" value="Signup" />
    </div>

    </form>

</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="script.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:53:30.123

首先，`$action`没有定义。

其次，`$query = "INSERT INTO connect VALUES ()";`不插入任何帖子数据。

第三，你不应该使用 mysql_* 函数，它们在 php.net 上被劝阻，所以这应该是你不应该使用它们的一个好兆头。

第四，作为一个脚注，不要使用`@`.

# c# - 使用按钮在单独的窗口中刷新数据

> ID：12783094
> 
> 赞同：0
> 
> 时间：2012-10-08T13:48:30.673
> 
> 标签：c#, wpf

我目前有两个窗口，我的主应用程序窗口，然后我有一个“编辑器”窗口，用于更改 TreeView 中的某些内容（这些是部门）我最近实现了隐藏所有子部门/节目的能力，但是我有一个问题，如果我隐藏/显示所有这些只有原始选择将被隐藏/显示，直到我使用我的刷新功能......所以我的问题是......无论如何我可以在我的编辑器上设置我的接受按钮导致刷新我的页面，因为它们都是两个单独的文件，我似乎无法访问名为“explorer”的 TreeView

我当前的刷新是如何完成的：

```
 public void RefreshData()
    {
        explorer.Items.Clear();
        using (new SessionConnecter(session))
        {
            var topLevelDepartments = session.CreateCriteria(typeof(Department))
                .Add(NHibernate.Expression.Expression.Eq(Department.IS_TOP_LEVEL, true))
                .List<Department>();

            foreach (Department d in topLevelDepartments)
            {
                explorer.Items.Add(Fabric.ObjectProvider.Get<INodeWrapperFactory>().Create(d));
            }
        }
    } 
```

当前保存代码：

```
 void Save(object sender, ExecutedRoutedEventArgs e)
    {
        FocusManager.SetFocusedElement(GetWindow(savebutton), savebutton);
        if (!session.IsConnected)
            session.Reconnect();

        try
        {
            if (ValidateModel())
            {
                session.Save(model);
                if (pendingParent != null)
                {
                    model.Parent = pendingParent;
                    // session.Save(pendingParent); - should cascade
                }

                session.Flush();
                Close();
            }
        }
        catch (NHibernate.Classic.ValidationFailure ex)
        {
            if (pendingParent != null)
                session.Refresh(pendingParent);

            if (session.IsConnected)
                session.Disconnect();

            MessageBox.Show(this, ex.Message, this.Title, MessageBoxButton.OK, MessageBoxImage.Warning);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:57:43.963

如果您将两个视图绑定到同一个对象，则正在更改的对象应该简单地引发 OnProperyChanged 事件。如果视图绑定到两个不同的对象（ViewModels），但这些 ViewModels 共享同一个模型，您可能希望从另一个 ViewModel 通知一个 ViewModel 模型已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:30:18.640

在这种情况下，解决方案可能是使用消息。你看过 Mvvm Light Toolkit 的消息吗？这是沟通距离对象、其他窗口等的好方法。您可以通过创建一个静态类（所有应用程序都相同）来实现您自己的消息机制，然后实现您自己的订阅/调用机制......希望对您有所帮助。

# sitecore - 用户控件中的 ItemId

> ID：12783095
> 
> 赞同：0
> 
> 时间：2012-10-08T13:48:39.220
> 
> 标签：sitecore

我想改写一下情况：我有两个数据模板，一个用于带有标签的产品，第二个用于带有/不带标签的文章，分别使用产品和文章数据模板。考虑到选项卡特征数据模板将作用于全局，它可以在任何时间点插入任何数据模板。

现在的情况是，我将标签功能与产品相关联，但没有与文章相关联，因此结果应该是在产品页面上我应该查看标签功能，而在文章标签上不应该可见。

问题仍然存在：我将如何检查我插入了标签功能的页面？另外如何找到我当前所在的当前上下文页面的 ItemID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:54:34.307

尝试使用下面的代码。它将为您提供上下文中使用的当前 Sitecore 项目。

```
Sitecore.Context.Item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:31:00.647

如果您已经为内容项分配了不同的数据模板，那么您可以使用如下代码检查项目所基于的数据模板：（这样做可能比仅检查 ItemId 更好）

```
 Sitecore.Data.Items.Item current = Sitecore.Context.Item;
        if (current.TemplateName.Equals("products", StringComparison.OrdinalIgnoreCase) == 0)
        {
            // your logic for products items
        }
        else
        {
            // your logic for services items
        } 
```

但是，如果您只想要 ItemId，您可以使用如下代码：

```
 Sitecore.Data.Items.Item current = Sitecore.Context.Item;
        Sitecore.Data.ID myID = current.ID; 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:09:57.460

有几种情况发生在我身上，不确定哪一种是你的：

**1\. 当前项目是唯一项目**

如果您正在执行诸如显示产品或服务项目的完整详细信息的详细信息页面之类的操作，Sitecore.Context.Item 调用将为您获取上下文中的当前项目，在大多数情况下基于 URL 中的当前项目路径（有一些方法可以改变上下文，但现在让我们忽略那些边缘情况）。然后，您可以像其他任何时候一样绑定字段或提取值。

**2.绑定到项目列表**

如果您正在执行类似于“事物”列表的操作（即绑定到可能是产品或服务的项目列表的 .NET 转发器）并希望使用用户控件显示每个项目。几个选项：

1.  向您的控件添加一个属性（类似于“DataSource”），并在您的子布局中的转发器数据绑定期间设置用户控件数据源属性（或在转发器标记中这样做）
2.  在子布局中的转发器数据绑定期间从项目中提取所需的属性，并将其传递给用户控件上的不同属性。

**3\. 数据源驱动**

如果您正在运行配置为具有数据源的子布局，则不能使用上下文项，因为它将引用绑定到正在显示的“页面”的项，而不是您正在处理的特定组件。在这种情况下，您需要如下代码来从当前子布局中提取数据源：

```
var dataSourceId = ((Sitecore.Web.UI.WebControl)Parent).DataSource; 
```

（注意：您可能希望对上述代码进行一些错误处理，以防止空引用错误）

# java - 如何获得当前日期之前的最后一个星期日？

> ID：12783102
> 
> 赞同：23
> 
> 时间：2012-10-08T13:49:06.117
> 
> 标签：java, android, calendar

我有以下代码用于获取当前日期之前的最后一个星期日：

```
Calendar calendar=Calendar.getInstance();
calendar.set(Calendar.WEEK_OF_YEAR, calendar.get(Calendar.WEEK_OF_YEAR)-1);
calendar.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
Log.e("first day", String.valueOf(calendar.get(Calendar.DAY_OF_MONTH))); 
```

但是这段代码不起作用。请告诉我，我该如何解决？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2017-04-14T11:01:50.693

# `java.time.temporal.TemporalAdjuster`

这可以通过与枚举一起[`TemporalAdjuster`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/temporal/TemporalAdjuster.html)找到 的实现来轻松实现。具体来说，。[`TemporalAdjusters`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/temporal/TemporalAdjusters.html)[`DayOfWeek`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/DayOfWeek.html)[`previous​(DayOfWeek dayOfWeek)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/temporal/TemporalAdjusters.html#previous(java.time.DayOfWeek))

```
 LocalDate
 .now()
 .with(
     TemporalAdjusters.previous( DayOfWeek.SUNDAY )
 ) ; 
```

如果今天是星期天，并且您希望结果是今天而不是一周前，请致电[`previousOrSame​(DayOfWeek dayOfWeek)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/temporal/TemporalAdjusters.html#previousOrSame(java.time.DayOfWeek))。

```
 LocalDate
 .now()
 .with(
     TemporalAdjusters.previousOrSame( DayOfWeek.SUNDAY )
 ) ; 
```

这些类内置于 Java 8 及更高版本，并内置于 Android 26 及更高版本。对于 Java 6 和 7，大部分功能都在[*ThreeTen-Backport*](https://www.threeten.org/threetenbp/)中向后移植。对于早期的 Android，请参阅[*ThreeTenABP*](https://github.com/JakeWharton/ThreeTenABP)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-08T14:29:08.843

这将起作用。我们首先得到天数，然后用当天减去它并加 1（代表星期天）

```
Calendar cal=Calendar.getInstance();
cal.add( Calendar.DAY_OF_WEEK, -(cal.get(Calendar.DAY_OF_WEEK)-1)); 
System.out.println(cal.get(Calendar.DATE)); 
```

[编辑：正如Basil Bourque](https://stackoverflow.com/users/642706/basil-bourque)在评论中 指出的那样，请参阅[Grzegorz Gajos](https://stackoverflow.com/questions/12783102/how-to-get-the-last-sunday-before-current-date/43410239#43410239)对 Java 8 及更高版本的回答。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-08T13:58:09.947

您可以以一天为单位进行迭代，直到您在周日到达：

```
Calendar cal = Calendar.getInstance();
while (cal.get( Calendar.DAY_OF_WEEK ) != Calendar.SUNDAY)
    cal.add( Calendar.DAY_OF_WEEK, -1 ); 
```

或者，只需一步，减去星期天和现在之间的天数差：

```
Calendar cal = Calendar.getInstance();
int dayOfTheWeek = cal.get( Calendar.DAY_OF_WEEK );
cal.add( Calendar.DAY_OF_WEEK, Calendar.SUNDAY - dayOfTheWeek ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T14:52:57.083

```
final Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(cal.getTimeInMillis() //
     // Saturday is the 7th day of week, so use modulo to get it : remove day between todoay
     - (( cal.get(Calendar.DAY_OF_WEEK) % 7) * 86400000)); // 86400000=24*60*60*1000

System.out.println(cal.getTime());
. . . 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-26T07:32:54.757

无论哪个月份和年份，以下内容都对我有用。

```
 Calendar cal = Calendar.getInstance(TimeZone.getDefault());
 Date date = cal.getTime();
 int days = cal.get(Calendar.DAY_OF_WEEK) - Calendar.SUNDAY;
 date.setTime(date.getTime() - (long) (days*1000*60*60*24));
 cal.setTime(date); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-01T13:19:52.560

这是使用 Joda 计算一周中任何最后一天的片段：

```
import org.joda.time.DateTime
import org.joda.time.DateTimeConstants

DateTime now = DateTime();
int offset = ((now.dayOfWeek - DateTimeConstants.THURSDAY) + 7) % 7;
DateTime lastThursday = now.minusDays(offset); 
```

只需替换`DateTimeConstants.THURSDAY`为您选择的日期即可。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-22T17:33:41.377

这是使用 Kotlin 扩展和[Joda Time 库](https://github.com/JodaOrg/joda-time)的方法。
*答案基于 linqu 的答案，但这也修复了该答案中的错误。错误在于，如果当前日期与您尝试获取的日期相同，则它不起作用。*

```
/**
 * E.g., DateTimeConstants.SUNDAY
 */
fun DateTime.previousDayOfWeek(day: Int): DateTime {
    var date = this
    if(date.dayOfWeek == day) date = date.minusDays(1)

    val offset = (date.dayOfWeek - day + 7) % 7
    return date.minusDays(offset)
}

fun DateTime.previousSunday(): DateTime {
    return previousDayOfWeek(DateTimeConstants.SUNDAY)
} 
```

# c# - 使用 HTML5 视频标签通过 ashx 处理程序从 sql server blob 播放视频文件

> ID：12783106
> 
> 赞同：5
> 
> 时间：2012-10-08T13:49:24.197
> 
> 标签：c#, asp.net, html, sql-server-2008, html5-video

我正在使用此[codeproject 文章](http://www.codeproject.com/Articles/21480/Video-Uploader-Control-for-SQL-Server)中的代码将 MP4 视频文件上传到 SQL server(varbinary(MAX)) 并从那里播放。

我的要求是专门使用 SQL 服务器，而不是从文件系统存储和获取视频。

这是我用来播放视频的代码：

```
<video id='my_video_1'  controls
   width="640" height="264"
  data-setup="{"controls":true, "preload":none}" >
  <source src='<%# "VideoHandler.ashx?id=" + Eval("ID") %>' type='video/mp4'>  
</video> 
```

如果我使用物理视频文件作为视频源，它可以工作。但是上面的代码不起作用。

在“Internet Explorer”中，标签呈现一个带有红十字的黑框

在“Chrome”中，播放器按钮是可见的，但是当我单击播放按钮时，没有播放视频。当我们右键单击它时，它会显示“将视频另存为...”选项，并且下载的文件可以在桌面媒体播放器上正常运行。

请帮助我正确的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:16:23.417

HTML5`Video`标记需要支持**[Range Requests](http://www.w3.org/Protocols/rfc2616/rfc2616.html)**。

当您提供静态文件时，此支持由服务器内部提供，但如果`HttpHandler`您需要自己提供此支持。一般来说，这意味着在请求中处理`Range`和标头，并使用,和/标头`If-Range`提供适当的*206 部分内容*响应。`Content-Range``Date``ETag``Content-Location`

[ASP.NET MVC 中的 Range Requests – RangeFileResult](http://tpeczek.blogspot.co.uk/2011/10/range-requests-in-aspnet-mvc.html)一文详细描述了如何创建`ActionResult`具有*Range Request*支持的 ASP.NET MVC - 您应该能够毫无问题地将所有逻辑从`ExecuteResult`一个方法移动到另一个`ProcessRequest`方法`HttpHandler`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:53:06.720

使用静态视频源测试您的`<video>`代码块。一旦您的标记被认为是好的，请测试处理程序，确保它正确编码视频并提供正确的接受。尝试使用媒体播放器..等

```
<video id='my_video_1' controls width="640" height="264"
  data-setup='{"controls":true, "preload":none}' >
  <source src='<%# "VideoHandler.ashx?id=" + Eval("ID") %>' 
     type='video/mp4 codecs="avc1.42E01E, mp4a.40.2"'>  
</video>

public void ProcessRequest (HttpContext context) 
{
    ....
    context.Response.AppendHeader("Content-Type", "video/mp4");`
    context.Response.AppendHeader("Accept-Ranges", "bytes");

    byte[] fileContents = GetYourBytesFromWhereEver();
    context.Response.OutputStream.Write(fileContents, 0, fileContents.Length);
    context.Response.Flush();
    .....
} 
```

# android - 阅读电话状态

> ID：12783108
> 
> 赞同：0
> 
> 时间：2012-10-08T13:49:30.773
> 
> 标签：android, phone-state-listener

**我有什么：**一个检查我的设备状态的功能。现在，在这种情况下，`READ_PHONE_STATE`我已经放置了一个我想在我的号码上收到任何语音呼叫时运行的功能，但它没有按我想要的方式工作并导致强制关闭应用程序。这是我的代码：

```
public void readPhoneState() {
    // Create a new PhoneStateListener
    listener = new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            switch (state) {
                case TelephonyManager.CALL_STATE_IDLE:
                    Log.e("DEBUG", "IDLE");
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    Log.e("DEBUG", "OFF_HOOK");
                    break;
                case TelephonyManager.CALL_STATE_RINGING:
                    myFunction();                                                                                           
                    break;
            }
        }
    };

    // Register the listener with the telephony manager
    telephonyManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);
} 
```

我只是想让这个函数在`PHONE_STATE_RINGING`. 如何做到这一点？

# javascript - 切断 Javascript 字符串

> ID：12783109
> 
> 赞同：1
> 
> 时间：2012-10-08T13:49:35.257
> 
> 标签：javascript, string, variables, substring

我有一个`cookie`用值调用的 JavaScript 变量

`__utma=43024181.64497201.1349454717.1349695569.1349702850.4; __utmz=43024181.1349679955.2.2.utmcsr=aerosoft-press.com|utmccn=(referral)|utmcmd=referral|utmcct=/; __utmc=43024181; __utmb=43024181.8.10.1349702850; language=de`

现在我想切断`language=de`该字符串的一部分。我找到了一种从后面切入的方法：

```
cookie = cookie.substring(0,cookie.length-11); 
```

但我只需要相反的方式。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:51:25.477

尝试使用这样的`replace()`方法：

```
cookie = cookie.replace(" language=de", ""); 
```

或者如果文本可能有所不同但字符数保持不变

```
cookie  = cookie.substring(0, s.length - 12) 
```

其中 12 是要从字符串末尾删除的字符数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:55:55.757

如果语言可以是任何东西（不仅仅是德），我会使用正则表达式：

```
cookie = cookie.replace(/language=[^;]+;?/, ""); 
```

基本上说`language=<anything that is not a ;>`什么都没有替换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:16:59.953

目前未提供另外两个选项，第一个是使用`indexOf()`：

```
var cookie = "__utma=43024181.64497201.1349454717.1349695569.1349702850.4;__utmz=43024181.1349679955.2.2.utmcsr=aerosoft-press.com|utmccn=referral)|utmcmd=referral|utmcct=/;__utmc=43024181; __utmb=43024181.8.10.1349702850; language=de",
    newCookie = cookie.substring(0,cookie.indexOf(' language'));
console.log(newCookie); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MaudF/)。

第二种用途`lastIndexOf()`：

```
var cookie = "__utma=43024181.64497201.1349454717.1349695569.1349702850.4;__utmz=43024181.1349679955.2.2.utmcsr=aerosoft-press.com|utmccn=referral)|utmcmd=referral|utmcct=/;__utmc=43024181; __utmb=43024181.8.10.1349702850; language=de",
    // the '+ 1' in the following line assumes you want to keep the ';' character
    newCookie = cookie.substring(0,cookie.lastIndexOf(';') + 1);
console.log(newCookie); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MaudF/1/)。

参考：

*   [`indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf).
*   [`lastIndexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf).

# objective-c - 当我设置属性（保留）时，一个“自我”=一个“保留”？

> ID：12783111
> 
> 赞同：1
> 
> 时间：2012-10-08T13:49:55.180
> 
> 标签：objective-c, memory-management, properties, retain

虽然我即将完成我的第一个应用程序，但我仍然对非常基本的内存管理感到困惑..我已经阅读了很多帖子和苹果文档，但我仍然感到困惑..例如..I' m 目前正在做这样的事情来以编程方式添加标签：

```
@property (retain, nonatomic) UILabel *showTime;
@sythesize showTime;

showTime = [[UILabel alloc] initWithFrame:CGRectMake(45, 4, 200, 36)];
[self.showTime setText:[NSString stringWithFormat:@"%d", time]];
[self.showTime setFont:[UIFont fontWithName:@"HelveticaRoundedLT-Bold" size:23]];
[self.showTime setTextColor:numColor];
self.showTime.backgroundColor = [UIColor clearColor];
[self addSubview:self.showTime];
[showTime release]; 
```

这是我目前的做法，对于 UILabel、UIButton、UIImageView 等...... [Alloc init] 它没有自我。因为我知道这将保留两次......但在分配之后，我放回了“自我”。设置属性..

我的直觉告诉我我做错了，但它在表面上起作用，我发现分析和仪器中没有内存泄漏..有人可以给我建议吗？当我使用“自我”时。设置文本和设置背景颜色，它会自动保留一个吗？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:09:07.630

每当您创建具有“保留”属性的属性时，使用“自我”指针设置属性本身（这与设置属性的某些方面不同，例如文本或字体），将添加保留计数。但是，当您简单地访问它时，它不会添加保留计数，就像您在设置文本、字体、textColor 等时所做的那样。也不会像您自己指出的那样添加保留计数，当您直接设置实例变量（通过省略`self`指针）。

当您到达此处显示的最后一行时，您的“showTime”将有 1 个保留计数。

保留 #1 =`[UILabel alloc]`

Retain #2 = `[self addSubview:self.showTime];`（需要明确的`addSubview`是，在这种情况下，添加保留计数的是方法调用......而不是`self.showTime`访问器）。

`[showTime release]`删除保留计数之一，因此保留一个。

除非您再次访问标签以更改文本、字体等，否则您可能根本不需要创建该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:06:01.653

实际上，如果您将属性赋予任何元素，那么这意味着您正在为该元素提供自动 getter/setter。

```
 @property (retain, nonatomic) UILabel *showTime;
 @synthesize showTime; 
```

现在，您必须使用 self 初始化元素才能访问这些 getter/setter。

因此，总是这样做，

```
 self.showTime = [[UILabel alloc] initWithFrame:CGRectMake(45, 4, 200, 36)]; 
```

您保留了两次，因此将分配的对象保持在自动释放模式。

```
 self.showTime = [[[UILabel alloc] initWithFrame:CGRectMake(45, 4, 200, 36)] autorelease]; 
```

现在，当您想要获取对象以赋予价值或更改背景颜色等时，

```
 [self.showTime setText:[NSString stringWithFormat:@"%d", time]]; 
```

或者

```
 [showTime setText:[NSString stringWithFormat:@"%d", time]]; 
```

一切都会好的。

但是，在 DEALLOC 部分，您再次需要 self 将其设置为零。

```
 self.showTime = nil; 
```

实际上，retain 属性会生成一个 setter 方法，如下所示。

```
 - (void)setShowTime:(UILabel *)label {
     if (showTime != label) {
         [showTime release];
         showTime = [label retain];
     }
 } 
```

因此，当我们在处理内存变化时，即ALLOCation 或Deallocation 时，此时使用SELF。

但是，这是我对自我用法的理解。任何其他想法，总是受欢迎的！

希望能帮助到你！！！！

# c# - 在asp.net webforms中使用DbContext通过Id方法获取记录

> ID：12783116
> 
> 赞同：0
> 
> 时间：2012-10-08T13:50:04.120
> 
> 标签：c#, asp.net, dependency-injection

在这里，在 Asp.Net 中，普通的 web 表单中，我使用依赖注入来检索记录。我也在这里使用了实体框架

我有一个类和一个界面如下所示..

```
public partial class Student
    {
        public Student()
        {

        }

        public Student StudentID { get; set; }
        public string StudentName { get; set; }
        public string Address { get; set; }
    }

public interface IStudentService
    {
        Student GetStudentsById(Student StudentID);
        IList<Student> GetAllStudents();
    } 
```

创建了一个上下文类

```
public partial class Entities : DbContext
    {
        public DbSet<Student> Students { get; set; }
    } 
```

然后实现接口

```
public partial class StudentService : IStudentService
    {
        Entities db = new Entities();

        public virtual Student GetStudentsById(Student StudentID)
        {
            //need to implement
        }    

        public virtual IList<Student> GetAllStudents()
        {
            //need to implement
        }    
    } 
```

现在，谁能帮我实现这些方法

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:54:15.180

假设`public Student StudentID`应该是`public int StudentID`：

```
public partial class StudentService : IStudentService
{
    Entities db = new Entities();

    public virtual Student GetStudentById(int studentId)
    {
        return db.SingleOrDefault(s => s.StudentID == studentId);
    }

    public virtual IList<Student> GetAllStudents()
    {
        return db.Students.ToList();
    }
} 
```

# c - 如何在函数中设置 HANDLE ？（C）

> ID：12783117
> 
> 赞同：0
> 
> 时间：2012-10-08T13:50:07.897
> 
> 标签：c, pointers

我有以下代码：

```
 HANDLE h = NULL;
    init(h);
    dosomething(h); 
```

如何在 init 函数中设置“h”以便在 dosomething 函数中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:52:12.560

您需要将 to 的地址传递`h`给`init()`C 通过值传递：

```
void init(HANDLE* a_h)
{
    *a_h = ...; /* some handle. */
} 
```

并调用：

```
init(&h);
if (h)
{
    dosomething(h);
    CloseHandle(h);
} 
```

除了传递`HANDLE`into的地址之外`init()`，根据在获取 a 失败时所需的操作`HANDLE`，您还可以传递在`DWORD`失败时存储最后一个错误的地址，以使调用者可以使用此信息：

```
void init(HANDLE* a_h, DWORD* a_last_error)
{
    *a_h = /* code to acquire handle. */;
    if (NULL == *a_h) *a_last_error = GetLastError();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:01:06.380

除了像许多人建议的那样传递地址外，我还建议从函数中*返回句柄。*它使代码更简洁：

```
HANDLE h = init(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:56:39.523

调用`init(&h)`而不是`init(h)`

并定义`init`为

```
void init(HANDLE * h)
{ /* do whatever */ } 
```

然后这些更改也将在主中可见。

还有一个小提示：您可能需要将指针/地​​址传递`HANDLE`给`dosomething()`太（取决于您想要在那里完成的任务）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:44:16.837

详细说明之前的答案。要使用数据隐藏，您需要将句柄定义为实现外部的空指针和内部的真实结构，因此只有实现才能看到结构的构成。

在你的头文件中：

```
typedef void * HANDLE;

void init(HANDLE *h);
void dosomething(HANDLE h);
void destroy(HANDLE *h); 
```

实施：

```
#include <stdlib.h>
#include <stdio.h>

typedef struct {
    int contents;
} * HANDLE;

void init(HANDLE *h) {
    *h = (HANDLE)malloc(sizeof *h);
    (*h)->contents = 2;
}

void dosomething(HANDLE h) {
    printf("Contents are: %d\n", h->contents);
}

void destroy(HANDLE *h) {
    free(*h);
    *h = NULL;
} 
```

和调用函数：

```
HANDLE h = NULL;

init(&h);
dosomething(h);
destroy(&h); 
```

不要忘记包含您的头文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:51:36.977

您必须传递句柄的地址，而不是句柄本身。查看引用调用和值调用。您当前正在按值调用，因此所做的任何更改`init()`都是本地的。

你想要的是这样的：

```
void init(HANDLE *h)
{
    *h = something;
}

....

    ...
    HANDLE H=NULL;
    init(&h); 
```

# rewrite - 如何在 Lighttpd 上使用重写？

> ID：12783122
> 
> 赞同：0
> 
> 时间：2012-10-08T13:50:32.247
> 
> 标签：rewrite, lighttpd

我正在尝试在 Lighttpd 上使用重写，但我无法让它工作。

我尝试以下方法：

```
$HTTP["host"] =~ "asdf.com" {
    server.document-root = "/home/www/asdf.com"
    url.rewrite = ( 
        "/^test/$" => "/test.html",
    )
} 
```

但是当我访问时我只是收到一个 404 错误`asdf.com/test/` 我也尝试过没有该`$HTTP["host"] {}`选项，但这也给了我一个 404 错误。

在 lighttpd.conf 我有以下内容：

```
 server.modules = ( 
     "mod_rewrite", 
```

我尝试了几个示例，但似乎一切都给了我一个 404 错误。是否有任何命令可以用来检查重写模块是否实际启用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:07:15.397

尝试重写：

```
"^/test/$" => "/test.html", 
```

# titanium - Titanium.UI.TextArea 用于文本显示：内容定位从头开始阅读文本

> ID：12783125
> 
> 赞同：3
> 
> 时间：2012-10-08T13:50:37.880
> 
> 标签：titanium, titanium-mobile

我正在 Appcellerator Titanium 中构建一个选项卡式移动应用程序。
我需要用一个大文本段填充一个选项卡，并使用 TextArea 来执行此操作：

```
var explanationView = Ti.UI.createTextArea({
    enabled: false, 
    editable: false, 
    color: 'black', 
    value: explanation
}); 
```

这将显示我想要的文本。但是，当内容变得太长而无法容纳时，它会显示内容的后半部分，从而迫使用户向上滚动以找到文本的开头。

```
 What I get:       What I want:
  __________       ______________
 | CONTENT  |      ||          ||
_|__________|_     ||   VIEW   ||
||          ||     ||__________||
||  VIEW    ||      |  Content |
||__________||      |__________| 
```

我想我的问题是双重的：

*   有没有办法在生成时强制 TextArea 滚动到顶部？
*   有没有更好的方法使用钛来完成不可编辑的 textView？

**- 更新解决方案 -**

Martin 是绝对正确的，制作不可编辑文本进行显示的最佳方法是使用`Ti.UI.Label`. 在我的情况下，一个可行的解决方案是用以下代码替换上面的代码：

```
var explanationView = Titanium.UI.createScrollView()
explanationView.add(Ti.UI.createLabel({text: explanation, color:'black'}))

win.add(explanationView) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:08:58.163

表示不可编辑的 TextArea 的更好方法是标签。如果需要，这应该扩展到多行。也不太可能让用户误以为该框是您可以像普通文本区域条目一样编辑的东西。

不太确定这些图片试图传达什么。最初，在我看来，您正在以错误的顺序将视图和文本区域添加到整体视图中，或者它们的顶部/底部位置设置错误。

如果您尝试同时显示可滚动文本和带有其他内容的视图，我可能会创建一个可滚动视图并将我的文本设置为适当的高度，然后让其他视图填充其余部分屏幕。

每当我在屏幕上创建大量文本或项目时，我的视图还没有滚动到底部。如果我在自己向下滚动之后不破坏并重新创建我的胜利/视图，那么我可能会看到这一点。特别是如果我尝试重用屏幕上已经显示的项目并重新加载数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:25:02.543

使用标签作为上述解决方案可以解决问题。但是，标签的字符限制较短。在长文本上使用标签会削减你的文本。您可以通过将可编辑属性设置为 false 并将 TextArea 放在 ScrollView 中来坚持在长文本上使用 TextAreas。这将让您看到 TextArea 的顶部，因为 ScrollViews 让您可以自由地将项目扩展到设备视图之外，以及通过代码实现滚动到特定区域的功能。

# c++ - 如何在 cuda 上创建全局可访问的变量？

> ID：12783129
> 
> 赞同：2
> 
> 时间：2012-10-08T13:50:44.477
> 
> 标签：c++, cuda, memory-pool

这是一个非常复杂的问题，而且我不是以英语为母语的人，所以如果您有足够的耐心阅读我的问题，我将不胜感激。

由于 Cuda 实际上是在两台计算机上运行，​​因此当您在设备上时，指向主机的内存是无效的，这意味着如果结构（或对象）具有指针成员，则无法将它们复制到设备。

我尝试制作以下系统来解决此问题：

1.  使用整数而不是指针。整数是内存池中的偏移量。整数被包装在一个类中（重载“->”和“*”），使其看起来像一个指针。
2.  内存池对象管理着一个连续的对象数组，可以很容易地转移到 Cuda 设备上。池的内容在主机和设备之间同步，因此整数偏移量在两侧具有相同的含义。

为了方便使用偏移量，它应该被包裹。在主机端，包装器如下所示：

```
template<typename T>
class MemPoolPointer {
public:
    inline T* operator -> () const
    {
        return &( MemPool<T>::get_instance.get_object(_p) );
    }
    uint64_t _p;
} 
```

我们可以看到，指针类需要全局访问内存池。这通常通过将内存池设置为单例来实现。但是，Cuda 不允许静态成员，并且它将 __device__ 变量限制为文件范围。如何解决这些限制？或者我应该试试 OpenCL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-14T10:32:40.123

OP 能够通过使用如下静态类方法包装全局范围 __device__ 变量来解决此问题：

```
class FooBar;
__device__ FooBar* FOOBAR_DEVICE_POOL;
class FooBar
{
    __device__ static FooBar& DEVICE_GET(uint64_t p);
}

template<typename T>
class MemPoolPointer {
public:
    inline T* operator -> () const
    {
#ifdef __CUDA_ARCH__
        return &( T::DEVICE_GET(_p) );
#else
        return &( MemPool<T>::get_instance.get_object(_p) );
#endif
    }
    uint64_t _p;
} 
```

[此答案添加为社区 wiki 条目，以将问题从 CUDA 标签的未回答队列中删除]

# php - php / mysql的Jquery ui问题

> ID：12783131
> 
> 赞同：0
> 
> 时间：2012-10-08T13:50:54.043
> 
> 标签：php, mysql, jquery-ui

我很难让 Jquery UI 与 php、mysql 一起使用。下面是自动完成和我的 HTML 表单的基本 jquery UI 代码

```
<script type="text/javascript">

    $("#criteria").autocomplete({
    source: "includes/keywords.php",
    dataType: "json",
    minLength: 2,//search after two characters

    });
</script>

  <?php echo "<form class='docs' action='".$_SERVER['PHP_SELF']."' method='post'>"; ?>
                      <fieldset>
                          <input type="text" name="criteria"  id="criteria"  />
                          <input type="submit" name="submit" id="submit" value="search" />
                      </fieldset>
                  </form> 
```

继承人的php文件

```
<?php

try{
    $conn = new PDO(DB_HOST, DB_USER, DB_PASS);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $conn->prepare('SELECT keywords FROM table_name WHERE keywords LIKE :input');

    //Execute the sql
    $stmt->execute(array(':input' => '%'.$_GET['term'].'%'));

    //Get array containing all of the result rows
    while($row = $stmt->fetch()){
        $row_set[] = $row['keywords'];//build an array

    }

}catch(PDOException $e){
    echo 'ERROR: ' . $e->getMessage();
}

echo json_encode($row_set);//format the array into json data
?> 
```

我确实得到了输出，但由于某种原因，它在我的网页顶部输出了所有信息，例如 ["keyword a","keyword b"]，我认为这是因为那是调用 jquery ui 的地方。我已经测试了我的数据库连接及其工作正常，并且还在我的网站上测试了运行良好的 jquery UI 演示。问题（我认为）似乎在 php 文件中

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:55:40.557

在您的代码中，您尝试在元素加载到 DOM 文档之前对该元素调用自动完成功能。你应该用 包装你的脚本`$(document).ready()`，像这样：

```
$(document).ready(function() {
    $("#criteria").autocomplete({
    source: "includes/keywords.php",
    dataType: "json",
    minLength: 2,//search after two characters

    });
}); 
```

这将确保条件元素在尝试使其成为自动完成之前已实际加载。

# javascript - 使用变量处理字符串 sql 查询中的单引号

> ID：12783144
> 
> 赞同：1
> 
> 时间：2012-10-08T13:51:35.273
> 
> 标签：javascript, sql, sql-server, sql-injection

我试图使此语句免受插入特殊字符的影响。我将如何重新格式化查询以处理此问题，例如具有值“Women's”的变量类型？但是，我知道参数化查询是可行的方法；现在这不是一个选择。

```
var sqlStatement = "SELECT DISTINCT DN FROM tbl1 WHERE Media LIKE "+ media + "% AND Type = " + type + ""; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:50:14.033

您最好的资源将是 OWASP（查看[SQL 注入预防](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)备忘单）。我不得不重申，最好的办法是按以下顺序尝试解决方案：

1.  准备好的报表
2.  存储过程
3.  转义用户提供的输入

如果您完全准备好转义 SQL Server 查询，您可以参考[这篇 MSDN 文章](http://blogs.msdn.com/b/raulga/archive/2007/01/04/dynamic-sql-sql-injection.aspx)，特别是**转义输入**部分。如果您可以通过实施[白名单](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)进一步验证用户输入，那就更好了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:54:12.383

> 但是，我知道参数化查询是可行的方法；现在这不是一个选择。

为什么它“现在不是一个选择”？

让您的整个数据受到损害或破坏“现在是一种选择”吗？您愿意发布您的网址吗？

如果您不对查询进行参数化，则无法保证防止 SQL 注入的万无一失的方法。

# jquery - 在 2 个列表之间移动列表项

> ID：12783150
> 
> 赞同：2
> 
> 时间：2012-10-08T13:51:49.727
> 
> 标签：jquery, list

快速概览：4 列，每列都有自己的 ul.category 包含所有可用的类别，而 ul.filter 是 ul.category 中的每个列表项应该去的地方。所有这些东西都应该保留在该列中。

jQuery

```
$("ul.category li.unselected").click(function() {
    $(this).removeClass("unselected").addClass("selected");
    $("ul.filter").append(this);
});
$("ul.filter li.selected").click(function() {
    $(this).removeClass("selected").addClass("unselected");
    $("ul.category").append(this);
}); 
```

而html，这只是一列，但还有3个这样的。

```
<div class="column themes">
    <ul class="filter">
        <!-- here go the clicked list-items -->
    </ul>
    <ul class="category">
        <li class="unselected"></li>
        <li class="unselected"></li>
        <li class="unselected"></li>
    </ul>
</div> 
```

那么，这样做**的正确**之处在于，它将单击的列表项上的类更改为 .selected 并成功地进行了 css 应有的更改。**做错了**什么，不是将我单击的列表项添加到同一列中的 ul.filter 中，而是将该列表项添加到每一列中的 ul.filter 中（基本上是复制它）。此外，单击 ul.filter 中的列表项不会将类更改回 .unselected，也不会将其移回 ul.category。

简而言之：寻找一种方法使其仅在它需要工作的列中工作，以及将列表项移回的修复程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:00:33.503

它将项目附加到所有列，因为您没有选择将它们附加到的特定列。更改执行附加到这些的 2 行代码...

```
$(this).closest("div.column").find("ul.filter").append(this); 
```

和

```
$(this).closest("div.column").find("ul.category").append(this); 
```

这会从单击的 li 向上搜索并找到最近的 div 元素与类 .column 并在那里进行追加。

# c# - 发送 HTTP 标头后，Windows Auth Server 无法设置状态

> ID：12783151
> 
> 赞同：4
> 
> 时间：2012-10-08T13:51:50.870
> 
> 标签：c#, windows, authentication, http-headers, httpexception

我有 C# n 层应用程序。通常我们使用表单身份验证并且一切正常，但是当我们尝试在 Windows 上设置身份验证时，它开始在某些情况下引发以下异常（主要是在管理中，例如当您尝试编辑用户和客户端调用服务器以获取用户详细信息时）这个根本没有在 Internet Explorer 中发生。在 Firefox 和 Chrome 中，它每次都会抛出它。

```
System.Web.HttpException (0x80004005): 
Server cannot set status after HTTP headers have been sent.
at System.Web.HttpResponse.set_StatusCode(Int32 value)
at System.Web.HttpResponseWrapper.set_StatusCode(Int32 value)
at System.Web.Mvc.HttpStatusCodeResult.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

拜托，你能给我一些建议，什么可能出错以及如何解决它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:15:58.693

好吧，您必须查看您的代码并查看将内容写入输出流的位置。正在发生的事情是在您设置状态代码之前写出一些东西，而 ASP.NET 不允许这样做。

至于为什么会在 FF 和 Chrome 上发生这种情况，您是否有任何代码试图识别它是哪个浏览器并将不同的东西发送到不同的浏览器？

# java - 过滤 MatOfDMatch

> ID：12783159
> 
> 赞同：5
> 
> 时间：2012-10-08T13:52:37.707
> 
> 标签：java, android, opencv, java-native-interface, feature-tracking

参考[http://docs.opencv.org/2.4.2/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html](http://docs.opencv.org/2.4.2/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)

在我的代码中的某个时刻，我调用

```
myDescriptorMatcher.match(descriptors, result); 
```

现在，如果我想过滤结果匹配，我相信我必须做一些丑陋的事情，比如：

```
 List<DMatch> matchesList = matches.toList();
        double maxDistance = 0;
        double minDistance = 1000;

        int rowCount = matchesList.size();
        for (int i = 0; i < rowCount; i++) {
            double dist = matchesList.get(i).distance;
            if (dist < minDistance) minDistance = dist;
            if (dist > maxDistance) maxDistance = dist;
        }

        List<DMatch> goodMatchesList = new ArrayList<DMatch>();
        double upperBound = 6 * minDistance;
        for (int i = 0; i < rowCount; i++) {
            if (matchesList.get(i).distance < upperBound) {
                goodMatchesList.add(matchesList.get(i));
            }
        }

MatOfDMatch goodMatches = new MatOfDMatch();
goodMatches.fromList(goodMatchesList);  

Features2d.drawMatches(mPreviousGray.submat(roi), mPrevDetectedFeatures, m.submat(roi), curDetectedFeatures, goodMatches, result); 
```

1.  这可以在没有丑陋的来回转换到列表的情况下完成吗？
2.  我已经尝试通过 JNI 执行此操作，但是如何将 MatOFDMatch 从 Java 传输到 C++ 并返回？

# c# - .NET Remoting TcpChannel 超时问题的解决方法

> ID：12783166
> 
> 赞同：0
> 
> 时间：2012-10-08T13:53:26.907
> 
> 标签：c#, .net, timeout, .net-remoting

由于我（和 Internet 上的许多其他人）在使用 .NET Remoting 时无法配置客户端 TcpChannel 超时（请不要建议适当的修复，我已经尝试了所有方法，请没有 WCF 建议），我已经想出了一个看起来不错的解决方法来创建我们可以配置的客户端超时。如果我通过单独的计时器线程提供每个远程处理调用，并且调用超时或抛出异常，那么我可以终止线程并假设服务器已关闭。

但是，我是由另一位同事运行的，他坚持认为我这样做可能会导致 .NET 的本机机器代码出现死锁。我已经在互联网上阅读过其他此类技术的实例，例如[这里的这篇文章](http://social.msdn.microsoft.com/Forums/en/netfxremoting/thread/22d06986-b0a3-42f8-a5bd-43e950302fdf)，所以我不确定是否真的应该担心死锁。我可以看到如果线程在发送或接收某些东西的过程中中止可能是一个问题，但如果我们只是在等待响应则不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:16:13.383

由于丹没有发布答案，只是发表了评论，我将此答案归于他。似乎这种管理超时的方法很好，只要您采取预防措施以确保在发生超时时线程执行不会继续。我还建议不要使用 Thread.Abort，除非您知道自己在做什么。

# php - 自定义搜索和使用 Jquery 隐藏字段

> ID：12783169
> 
> 赞同：0
> 
> 时间：2012-10-08T13:53:32.727
> 
> 标签：php, javascript, jquery, wordpress

我试图在我的搜索表单上隐藏一个带有 Jquery 的字段，这样如果它是商业地产，就没有“卧室数量”字段。

```
jQuery(function ($) {
    $(window).load(function() {
        $("input:radio#comms").click(function() {
            $("p.bedrooms").hide();
        });
        $("input:radio#sale").click(function() {
            $("p.bedrooms").show();
        });

        $("input:radio#rent").click(function() {
            $("p.bedrooms").show();
        });
    });
}); 
```

我在 Wordpress 中这样做，上面的代码似乎可以工作，但我的问题是 - 如果你隐藏一个字段，URL 将更改为卧室 = 1&location = blackpool - 它默认为卧室 = 1。我想知道是否有表单中具有空值的方式，如果它被隐藏，则根本不搜索该字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:08:23.737

您可以随时尝试将 .submit() 事件处理程序附加到表单。

我没有测试或运行下面的代码。

```
// Form will submit after this method runs unless you e.preventDefault();
$("#myForm").submit(function(e) {
    if ($("p.bedrooms").is(":visible")) {
        // Do somethin
    } else {
        // Bedrooms aren't visible

        // Option 1: empty the value
        $("input[name=bedrooms]").val("")
        /*
           Option 2: remove the input
           Since the form is submitting, it shouldn't matter 
           if you remove an input. Returning to the page should 
           replace the input.
        */
        $("input[name=bedrooms]").remove()
    }
}); 
```

# javascript - JavaScript 中的 UTC 到 EST 转换以及夏令时功能

> ID：12783171
> 
> 赞同：0
> 
> 时间：2012-10-08T13:53:40.220
> 
> 标签：javascript, datetime, extjs, timezone

我有一个小任务要显示 EST 时间，而与使用 Javascript 的主机系统配置无关。这也应该能够处理夏令时。我已经看到了一些示例，这些示例建议抵消 UTC 和 EST 之间的时间差。这应该是夏令时的能力。必须处理以抵消正确的时间。

或者

您是否建议从服务器端带上时间戳并打印（我有与此相关的想法）。并且服务器时间和日期设置在 EST 时区

但是，如果可以从 Javascript 中做到这一点，我很期待。

请注意，这不适用于主机配置的时间和日期。无论客户设置如何，这都应该有效

谢谢普尼斯

# iphone - 在viewcontroller中导入Appdelegate时找不到自定义协议的协议声明

> ID：12783174
> 
> 赞同：1
> 
> 时间：2012-10-08T13:53:48.657
> 
> 标签：iphone, objective-c, xcode

我搜索了很多方法，但没有找到任何答案。在我的应用程序中，我在视图控制器中编写了一个自定义协议，并将其导入另一个视图控制器。当我构建它时，它会引发“找不到协议声明”的错误。我正确导入了头文件和委托，并在我的一个视图控制器中共享了 appdelegate。

`#import "AppDelegate.h"`我观察到一件事，当我在视图控制器的 .h 文件中注释掉并且`[UIApplication sharedApplication]`在 .m 文件协议中工作正常时。

我正在使用 ARC，并在 X-code 4.3.3 上运行，请帮助解决这个问题。

在我的应用程序中，我有 LoginViewController，登录后用户将转到 viewController，在其中我添加了带有五个视图控制器的标签栏。标签栏视图添加到 viewcontrolller 视图中。

在 viewController.m

```
[self.view addSubview:tabbars.view]; 
```

标签栏包含 TodayViewController、setupViewController、statsViewController、guideViewController、helpViewController。

TodayViewController 中有注销按钮。当用户单击注销时，视图应该弹出到 loginViewController.for 我在今天的视图控制器中编写了一个协议。并在 ViewController 中导入。

在我的一个视图控制器“timerViewController.h”中我导入`Appdelegate.h`并在 timerViewController.m 中写入 viewDidload

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]; 
```

当我在 todayViewController.h 中评论 Appdelegate.h 和
`AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];`

在今天ViewController.m

对我来说很好

但是当我导入 Appdelegate.h 时，它会抛出“未找到协议声明”的错误，我是 iphone 新手，请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:14:07.047

当您访问您的应用程序委托时，您也*将*其转换为您应用程序的特定应用程序委托。

```
AppDelegate *appDelegate = 
   (AppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

# java - 将 json 对象解析为 Java 中的字符串值

> ID：12783184
> 
> 赞同：-9
> 
> 时间：2012-10-08T13:54:22.793
> 
> 标签：java, json, solr

我无法解析我的 json 对象以从 Java 代码中的 SOLR 执行中获取字段“titleText”中的所有值:-(

有人可以帮我吗？

```
{"responseHeader":{"status":0,"QTime":0,"params":{"start":"0","q":"USA","wt":"json","rows":"2"}},"response":{"numFound":143833,"start":0,"docs":[{"id":"4180409","titleText":"US-amerikanische Badmintonmeisterschaft","userId":264581,"user":"Florentyna"},{"id":"283110","titleText":"USA TODAY","userId":19578,"user":"Catrin"}]}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:55:52.737

您是否尝试过用 Java 实现的 JSON 解析器？[存在](http://code.google.com/p/google-gson/)[不同的](http://www.json.org/java/) [实现](http://wiki.fasterxml.com/JacksonHome) ，每个都有其优点/缺点。

# sql - SQL SUM 混淆

> ID：12783189
> 
> 赞同：0
> 
> 时间：2012-10-08T13:54:43.097
> 
> 标签：sql, sql-server-2005, sum

我为我的数据运行了以下查询：-

```
SELECT     CONTRACTNAME,
           AccountNo,
           TransDate, 
           JournalNo,
           AuditTrail,           
           Description,       
           CONTRACTNUMBER,
           GROUPING(CONTRACTNUMBER) as CONTRACTNUMBER,   
           SUM(PAFeebillamount)as Total  
FROM       SRVS.dbo.BTQGLDistributionsWithProjectCodesHM
WHERE      TransDate > '2012' AND CONTRACTNUMBER <> '00900'
GROUP BY   CONTRACTNAME,  
           AccountNo,   
           TransDate,
           JournalNo, 
           AuditTrail,    
           Description,      
           CONTRACTNUMBER with rollup  
ORDER BY   GROUPING (CONTRACTNUMBER) 
```

这给了我结果：-

![在此处输入图像描述](../Images/ac11b4202faefb8b683b4944eff08983.png)

我怎样才能改变这个，所以我得到每个合同号的单行总计。所以它看起来像下面的例子： -

![在此处输入图像描述](../Images/bb1b6ede4021a310e178cbe77ec90781.png)

此时此刻，我并不在意帐户编号/期刊编号等，因为它只是一个摘要。

只是在寻找有关按合同编号总结我的组的最佳方法的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:01:56.967

```
SELECT CONTRACTNAME, CONTRACTNUMBER, grouping(CONTRACTNUMBER) as CONTRACTNUMBER
SUM(PAFeebillamount)as Total
FROM SRVS.dbo.BTQGLDistributionsWithProjectCodesHM 
WHERE TransDate > '2012' AND CONTRACTNUMBER <> '00900' 
GROUP BY 
  CONTRACTNAME,
  CONTRACTNUMBER with rollup
ORDER BY GROUPING (CONTRACTNUMBER) 
```

这应该为您提供每份合同的总数。您获得多个结果的原因是您正在对 contractName、Acct、Date、JournalNo、AuditTrail 和 Desc 进行分组。如果您想要一个完整的总数（每个合同号一个），那么您需要仅对合同号进行分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:02:33.177

```
SELECT     CONTRACTNAME,
           '' AccountNo,
           '' TransDate, 
           '' JournalNo,
           '' AuditTrail,           
           '' Description,       
           CONTRACTNUMBER,
           GROUPING(CONTRACTNUMBER) as CONTRACTNUMBER,   
           SUM(PAFeebillamount)as Total  
FROM       SRVS.dbo.BTQGLDistributionsWithProjectCodesHM
WHERE      TransDate > '2012' AND CONTRACTNUMBER <> '00900'
GROUP BY   CONTRACTNAME,                  
           CONTRACTNUMBER with rollup  
ORDER BY   GROUPING (CONTRACTNUMBER) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:02:32.557

由于您不关心选择什么`AccountNo, TransDate, etc`，您可以将`MAX`其用作聚合函数，例如：

```
SELECT
  CONTRACTNAME, 
  MAX(AccountNo), 
  MAX(TransDate), 
  MAX(JournalNo),
  MAX(AuditTrail),
  MAX(Description),
  CONTRACTNUMBER, 
  GROUPING(CONTRACTNUMBER) as CONTRACTNUMBER, 
  SUM(PAFeebillamount)as Total
FROM SRVS.dbo.BTQGLDistributionsWithProjectCodesHM 
WHERE TransDate > '2012' 
  AND CONTRACTNUMBER <> '00900' 
GROUP BY 
  CONTRACTNAME,
  CONTRACTNUMBER with rollup
ORDER BY GROUPING (CONTRACTNUMBER) 
```

如果您不想要它们，只需将它们从语句中删除，或用or`SELECT`替换它们：`NULL``''`

```
SELECT
  CONTRACTNAME,
  CONTRACTNUMBER, 
  GROUPING(CONTRACTNUMBER) as CONTRACTNUMBER, 
  SUM(PAFeebillamount)as Total
FROM SRVS.dbo.BTQGLDistributionsWithProjectCodesHM 
WHERE TransDate > '2012' 
  AND CONTRACTNUMBER <> '00900' 
GROUP BY 
  CONTRACTNAME,
  CONTRACTNUMBER with rollup
ORDER BY GROUPING (CONTRACTNUMBER) 
```

# google-maps-api-3 - 拖动标记时更改方向渲染的位置

> ID：12783190
> 
> 赞同：3
> 
> 时间：2012-10-08T13:55:01.290
> 
> 标签：google-maps-api-3, direction

我有一个项目可以根据标记位置在数据库中保存航点，我想在这个标记上使用自定义图标，所以我取消了路线标记（绿色标记）

但是，如果我将标记移动到另一个点，它不会根据标记位置更改渲染线，我想在更改标记位置时“更新”这个渲染器。

[这是我的原始版本项目的链接](http://www.inventoresdegaragem.com/dbteste/indexRotasTeste002.htm) 这是我的代码：（用我的尝试编辑）

```
var map, ren, ser;
var data = {};
var data2 = {};
var marker;
var infowindow;
var directionsDisplay;

var wayA = [];
var wayB = [];
var directionResult = [];

function goma()
{
    var mapDiv = document.getElementById('mappy');   
    var mapOptions = {
    zoom: 12,       
    center: new google.maps.LatLng(-23.563594, -46.654239),
    mapTypeId : google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map( mapDiv, mapOptions );

    google.maps.event.addListener(map, "click", function(event) {
        if (wayA.length == wayB.length) {
        wayA.push(new google.maps.Marker({
      draggable: true,      
          position: event.latLng,
          map: map        
        }));
        } else {
        wayB.push(new google.maps.Marker({
      draggable: true,  
          position: event.latLng,
          map: map  
        }));  

ren = new google.maps.DirectionsRenderer( {'draggable':true, suppressMarkers : true}  );
    ren.setMap(map);
    ren.setPanel(document.getElementById("directionsPanel"));
    ser = new google.maps.DirectionsService();

    ser.route({ 'origin': wayA[wayA.length-1].getPosition(), 'destination':  wayB[wayB.length-1].getPosition(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK') {
                    directionResult.push(res);
                    ren.setDirections(res); 

                } else {
                    directionResult.push(null);
                }
        });     
    }
 });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:31:48.273

我有一个[演示](http://daviestrachan.co.uk/davie/fredslatest.html)，可以满足您的需求。

您需要的更改在

```
directionsDisplay = new google.maps.DirectionsRenderer( {
'map': map,
'preserveViewport': true,
'draggable':true/*, 
'suppressMarkers' : true */} 
);
directionsDisplay.setMap(map);
directionsDisplay.setPanel(document.getElementById("directionsPanel"));
directionsService = new google.maps.DirectionsService();    
    }
}); 
```

通知`suppressMarkers' : true`已被注释掉

这意味着当显示方向标记时，原始标记仍然存在。这些被删除使用

```
function clearOverlays() {
 if (wayA) {
   for (i in wayA) {
   wayA[i].setMap(null);
 }
 }
 if (wayB) {
   for (i in wayB) {
     wayB[i].setMap(null);
  }
}
} 
```

这在结束时调用

```
 function calcRoute() {

directionsService.route({ 'origin': wayA[wayA.length-1].getPosition(), 'destination': 
      wayB[wayB.length-1].getPosition(), 'travelMode': 
 google.maps.DirectionsTravelMode.DRIVING},function(response,status) {
    if(status == google.maps.DirectionsStatus.OK) {
                directionResult.push(response);
                directionsDisplay.setDirections(response);  

            } else {
                directionResult.push(null);
            }

})
clearOverlays();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:03:24.553

这张地图：

[http://www.geocodezip.com/v3_directions_custom_icons_draggable.html](http://www.geocodezip.com/v3_directions_custom_icons_draggable.html)

允许您拖动标记并根据新位置重新计算路线。它是在“可拖动方向”之前开发的，因此折线不可拖动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:33:00.653

在“dragend”的标记上添加一个事件监听器函数，它会重新计算方向。这是一个简单的示例，每个侦听器都具有相同的侦听器，但是您可能可以将此代码分解为它自己的函数，该函数在 wayA 和 wayB 标记上都运行。

```
google.maps.event.addListener(wayA[wayA.length-1], 'dragend', function() {
    ser.route({ 'origin': wayA[wayA.length-1].getPosition(), 'destination':  wayB[wayB.length-1].getPosition(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK') {
            rectionResult.push(res);
            ren.setDirections(res); 
        } else  {
            directionResult.push(null);
        }
    })
}

google.maps.event.addListener(wayB[wayB.length-1], 'dragend', function() {
    ser.route({ 'origin': wayA[wayA.length-1].getPosition(), 'destination':  wayB[wayB.length-1].getPosition(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK') {
            rectionResult.push(res);
            ren.setDirections(res); 
        } else  {
            directionResult.push(null);
        }
    })
} 
```

# mercurial - 本地 Mercurial 忽略文件

> ID：12783198
> 
> 赞同：11
> 
> 时间：2012-10-08T13:55:34.350
> 
> 标签：mercurial

是否有可能有一个本地 Mercurial 忽略文件？显然 .hgignore 是一个与任何其他文件一样版本化的文件。我可以在版本化的文件旁边放一个这样的文件吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T14:30:57.783

是的，您可以配置一个本地的、每个用户的忽略文件。该文件的位置和名称在用户特定的`.hgrc`配置文件（通常位于用户的主目录）下定义`[ui]`，例如：

```
[ui]
ignore = ~/.myhgignore 
```

此文件应与存储库范围`.hgignore`文件的格式相同。

参考：[http ://www.selenic.com/mercurial/hgrc.5.html#ui](http://www.selenic.com/mercurial/hgrc.5.html#ui)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-09T09:11:32.500

这里有几种情况，因此根据情况，您将有不同的可能解决方案：

1.  如果文件或目录尚未添加，并且没有`.hgignore`文件，您可以：
    *   用于`.hgignore`过滤它，并且
    *   `.hgignore`如果这对其他人也有用（例如，*.o 等），您可以提交，或者您可以将其保留`.hgignore`为本地而不提交/推送它，在这种情况下，您甚至可以按照 msw 的说明指定`.hgignore`in`.hgignore`以便您的本地版本也将被忽略。
2.  如果尚未添加文件或目录，并且`.hgignore`由于某种原因您不想使用某个文件（提交和推送），您可以：
    *   声明一个未跟踪的忽略文件，您将像使用它一样使用`.hgignore`它，但它将保持在本地。您可以在您的仓库`.hg/hgrc`或全局中声明此未跟踪的忽略文件`$HOME/.hgrc`（请参阅[UI 部分](http://www.selenic.com/mercurial/hgrc.5.html#ui)文档）。
3.  最后，如果文件/目录已添加到跟踪文件列表中，则不能使用 : 过滤它`.hgignore`：任何已提交的文件都不能被忽略！您可以：
    *   “ `hg forget`”文件（与“ `hg add`”相反），然后按照前两种情况执行，或者使用“ `-X`”选项作为`.hg/hgrc`配置文件中 status/diff/commit 的默认值，例如，
        [defaults]
        status = -X file1 -X file2
        diff = -X file -X file2
        commit = -X file -X file3
        这将告诉 hg 不要在使用 status、diff 和 commit 时包含这些文件。

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:39:23.687

您也可以`.hgignore`在本地存储库中忽略：

```
$ hg clone some_repository
$ cd some_repository
$ cat > .hgignore
syntax: glob
.hgignore
$ touch foo.c bar.c
$ hg status
? foo.c
? bar.c 
```

`.hgignore`请注意，在 的输出中明显没有局部`hg status`。

# ios - 视频输出不可见

> ID：12783207
> 
> 赞同：0
> 
> 时间：2012-10-08T13:55:49.283
> 
> 标签：ios, xcode, ios-simulator, media-player, ios6

我正在制作一个可以在 ios 模拟器上显示预加载文件的应用程序。虽然模拟器上显示屏幕，但我看不到视频也听不到声音。

这是我的代码。

```
#import "BIDViewController.h"

@implementation BIDViewController
@synthesize moviePlayer;

-(IBAction)playMovie:(id)sender
{
NSString *url = [[NSBundle mainBundle]
                pathForResource:@"SwimGood" ofType:@"m4v"];
MPMoviePlayerController *player = [[MPMoviePlayerController alloc]
                                initWithContentURL:[NSURL fileURLWithPath:url]];
//Play partial screen.

player.view.frame = CGRectMake(64, 100, 200, 150);

[self.view addSubview: player.view];
[self.moviePlayer prepareToPlay];

[player play];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:31:45.317

我正在这样使用

> NSString *videoFilepath = [[NSBundle mainBundle] pathForResource:[tempDic objectForKey:@"VideoName"] ofType:@"mov"];
> 
> ```
> NSURL *url = [NSURL fileURLWithPath:videoFilepath]; 
> ```
> 
> MPMoviePlayerController *playerViewController =[[MPMoviePlayerController alloc] init]; playerViewController.view.frame = CGRectMake(6, 5, 308, 202);
> 
> ```
> [playerViewController setContentURL:url];
> playerViewController.controlStyle = MPMovieControlStyleNone;
> [playerViewController prepareToPlay];
>   [self.view addSubview:[playerViewController view]]; 
> ```

它工作正常..所以它可能是文件类型的问题。所以尝试使用 .mov

并且不要忘记导入 MediaPlayer/MediaPlayer.h 并添加 MediaPlayer 框架，它在您的主包中不存在。

好运...

# ruby - 将CSV中的数组解析为字符串？

> ID：12783210
> 
> 赞同：0
> 
> 时间：2012-10-08T13:55:53.283
> 
> 标签：ruby, csv

我在理解如何从 CSV 文件中获取数据以在其他地方使用时遇到了一些麻烦。

我的代码目前只有：

```
CSV.foreach("../../lib/modules/csv.csv") do |row|
    # use row here...

    def initialize(headers, fields, header_row = false)  
  end
end 
```

这就是我可以从 Ruby 文档中真正学到的全部内容。似乎没有任何关于如何选择标题然后在该标题下获取单元格的示例？

如果我解释得不够好，这里是一个示例表的快速模型：

```
 title  |  description  |  priority 
----------------------------------   
 story1 |    example1   |     6
----------------------------------     
 story2 |    example2   |     7
----------------------------------  
 story3 |    example3   |     8
---------------------------------- 
```

如何获取要存储在字符串中的数据？：

```
example = column[i] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:25:21.640

您可以使用行变量的索引访问单个单元格。

```
CSV.foreach("../../lib/modules/csv.csv", headers: true) {|row| puts "#{row[0]} - #{row[1]} #{row[2]}" } 
```

如果您设置`headers:true`，那么每个`row`都是一个实例，`CSV::Row`并且您的 csv 的第一行被视为标题行。它会输出

```
story1 - example1 - 6
story2 - example2 - 7
story3 - example3 - 8 
```

但是，如果您将`headers:false`每个设置`row`为的实例，`Array`它将打印 -

```
title - description - priority
story1 - example1 - 6
story2 - example2 - 7
story3 - example3 - 8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:30:18.173

从一行中获取值时，可以通过索引获取值（如 Ashish 所示）。您也可以根据标题描述获取它，这听起来像是您想要的。

以下示例显示了如何创建包含“描述”列中所有值的数组：

```
all_descriptions = Array.new
CSV.foreach("test.csv", :headers=>true, :header_converters=>:symbol) do |row|
    all_descriptions << row[:description]
end  
all_descriptions
#=> ['example1', 'example2', 'example3'] 
```

如您所见，您可以使用 获取每一行的描述值`row[:description]`，其中`:description`的列标题变成了一个符号。

请注意，如果您想存储该值以供以后在循环中使用，它看起来像：

```
CSV.foreach("test.csv", :headers=>true, :header_converters=>:symbol) do |row|
    example = row[:description]
    #do stuff
    if example =~ /something/
      #do other stuff
    end
end 
```

# msbuild - 当 MSBuild 中的属性发生变化时强制构建

> ID：12783214
> 
> 赞同：0
> 
> 时间：2012-10-08T13:56:10.813
> 
> 标签：msbuild

我已经设置了构建，以便可以将数字作为构建属性传递：

```
msbuild MyProject.sln /t:Build /p:Configuration="Debug" /p:SomeNumber="123" 
```

MSBuild 项目生成一个文件并通过以下方式添加它：

```
<Compile Include="$(SomeFileContainingSomeNumber)" /> 
```

`SomeNumber`仅在指定时才会生成此文件。

当我更改或省略数字并第二次构建时，MSBuild 项目不会使用新值重新构建。我相信这是因为项目文件都没有改变。

如何设置我的项目以便更改`SomeNumber`属性触发重建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:49:47.080

我正在使用 MSBuild 3.5。似乎将 a 放在 a`Condition`上`BeforeBuild` `Target`会干扰其执行。当我`Condition`从`Target`目标中的单个动作移动时，我能够获得所需的行为。

`SomeNumber`使用以下内容，无论属性是否更改，我都能让 MSBuild 每次都能正确编译。该项目可能`SomeFile.cs`每次都在重建，无论其内容是否已更改，因为其时间戳正在更改。

```
<PropertyGroup>
    <SomeFile>SomeFile.cs</SomeFile>
</PropertyGroup>
<Target Name="BeforeClean">
    <Delete Files="$(SomeFile)" />
</Target>
<Target Name="BeforeBuild">
    <WriteLinesToFile Condition="'$(SomeNumber)' == ''" File="$(SomeFile)" Lines="//" Overwrite="true" />
    <WriteLinesToFile Condition="'$(SomeNumber)' != ''" File="$(SomeFile)" Lines="$(SomeNumber)" Overwrite="true" />
</Target>
<ItemGroup>
    <Compile Include="$(SomeFile)" />
</ItemGroup> 
```

这`Lines="//"`是必需的，因为`WriteLinesToFile`如果您在此处不放任何内容或空格，则会删除该文件。

# css - 如何真正隔离 Google Chrome 扩展中的样式表？

> ID：12783217
> 
> 赞同：34
> 
> 时间：2012-10-08T13:56:21.747
> 
> 标签：css, google-chrome-extension, isolation

我写了一个谷歌浏览器扩展，它弹出一个带有自动完成字段的对话框，它有自己的风格，但是有些网站我的 CSS 完全被破坏了，看起来不太好。

我知道使用 iFrame 隔离样式，但在 Google Chrome 扩展中，无法以这种方式隔离我的 HTML 和 CSS。另一种方法是将我所有的东西包装到一个单独的 div 中，并使用它自己的 id 和该 id 的相关样式，我这样做了，但它似乎不适用于某些具有“硬”标签样式重载或“！ CSS 代码中的重要”指令。

所以，我想知道有没有什么方法可以真正以方便的方式隔离我的样式，或者重载每个小的 CSS 属性来修复每个站点的一个或另一个样式问题是我的坏事？

顺便说一句：我将清单设置为在“document_end”加载所有内容，但我发现它没有应用于样式表，只要 DOM 准备好，每次都会加载。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-11-27T11:29:05.563

在提出问题时，您唯一的选择是使用 iframe 或具有非常高[特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的样式表，并明确设置所有可能影响样式的属性。最后一种方法很麻烦，因为总会有一些属性被你忽略。因此，隔离样式表的唯一可用方法是使用 iframe。

这个问题的解决方案 - 在没有 iframe 的情况下隔离样式 - 是[Shadow DOM](http://www.w3.org/TR/shadow-dom/)（[从 Chrome 25 开始](http://blog.chromium.org/2013/01/content-security-policy-and-shadow-dom.html)）。[您可以在HTML5 Rocks](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/)找到教程。有关使用 Shadow DOM 隔离样式的真实 Chrome 扩展，请参阅[显示 #Anchors](https://chrome.google.com/webstore/detail/display-anchors/poahndpaaanbpbeafbkploiobpiiieko)（[此处为源代码](https://github.com/Rob--W/display-anchors)）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-03T02:02:24.757

由于我最近经历了这个问题的挑战，我想分享一些我认为有价值的信息。

首先，Rob W 的答案是正确的。Shadow DOM 是解决这个问题的正确方法。然而，就我而言，我不仅需要 CSS 隔离，还需要 JavaScript 事件。例如，如果用户单击位于隔离 HTML 中的按钮会发生什么？仅使用 Shadow DOM 就变得非常丑陋，但我们有另一种 Web 组件技术，自定义元素，可以救援。除了在撰写本文时，chrome 中有一个错误会阻止 chrome 扩展中的自定义元素。[请在此处](https://stackoverflow.com/questions/25048359/javascript-within-shadow-dom-best-practices) 和此处查看我的问题以及[此处](https://stackoverflow.com/questions/25089832/polymer-in-chrome-extension-content-script)[的错误](https://code.google.com/p/chromium/issues/detail?id=390807)。

那么，我们将何去何从？我相信今天最好的解决方案是 IFrame，这就是我所采用的。shahalpk 链接的文章很棒，但它仅描述了该过程的一部分。我是这样做的：

首先，为您的隔离小部件创建一个 html 文件和 js 文件。这些文件中的所有内容都将在 iframe 中的隔离环境中运行。请务必从 html 文件中获取您的 js 文件。

```
//iframe.js
var button = document.querySelector('.my-button');
button.addEventListener('click', function() {
    // do useful things
});

//iframe.html
<style>
/* css */
</style>
<button class='my-button'>Hi there</button>
<script src='iframe.js'></script> 
```

接下来，在您的内容脚本中，在 javascript 中创建一个 iframe 元素。您需要在 javascript 中执行此操作，因为您必须使用 chrome.extension.getURL 才能获取 iframe html 文件：

```
var iframe = document.createElement('iframe');
iframe.src = chrome.extension.getURL("iframe.html");
document.body.appendChild(iframe); 
```

就是这样。

需要记住的一件事：如果需要在 iframe 和其余内容脚本之间进行通信，则需要 chrome.runtime.sendMessage() 到后台页面，然后从后台页面返回 chrome.tabs.sendMessage到选项卡。他们不能直接交流。

编辑：我写了一篇博文，详细介绍了我在这个过程中学到的一切，包括一个完整的示例 chrome 扩展和许多指向不同信息的链接：

[https://apitman.com/3/#chrome-extension-content-script-stylesheet-isolation](https://apitman.com/3/#chrome-extension-content-script-stylesheet-isolation)

如果我的博客出现故障，这里是原始帖子的来源：

[博文](https://github.com/anderspitman/octopress-blog/blob/dbd21b2a76ea57cf4e967fd44a204c610b35325f/source/_posts/2014-08-04-chrome-extension-content-script-stylesheet-isolation.markdown)

[示例源](https://github.com/anderspitman/chrome-extension-css-isolation-example)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-03T12:39:41.163

## 要么使用`all`

```
.some-selector {
    all: initial;
}

.some-selector * {
    all: unset;
} 
```

## 或者使用 Shadow DOM

### 图书馆

```
function Widget(nodeName, appendTo){
  this.outer = document.createElement(nodeName || 'DIV');
  this.outer.className = 'extension-widget-' + chrome.runtime.id;
  this.inner = this.outer.createShadowRoot();
  (appendTo || document.body).appendChild(this.outer);
}

Widget.prototype.show = function(){
  this.outer.style.display = 'block';
  return this;
};

Widget.prototype.hide = function(){
  this.outer.style.display = 'none';
  return this;
}; 
```

### 用法

```
var myWidget = new Widget();
myWidget.inner.innerHTML = '<h1>myWidget</h1>'; 
```

您可以通过`myWidget.inner`和外部通过访问小部件内容`myWidget.outer`。

### 风格

```
/* 
 * Reset Widget Wrapper Element 
 */
.extension-widget-__MSG_@@extension_id__ {
  background: none;
  border: none;
  bottom: auto;
  box-shadow: none;
  color: black;
  cursor: auto;
  display: inline;
  float: none;
  font-family : "Helvetica Neue", "Helvetica", "Arial", sans-serif;
  font-size: inherit;
  font-style: normal;
  font-variant: normal;
  font-weight: normal;
  height: auto;
  left: auto;
  letter-spacing: 0;
  line-height: 100%;
  margin: 0;
  max-height: none;
  max-width: none;
  min-height: 0;
  min-width: 0;
  opacity: 1;
  padding: 0;
  position: static;
  right: auto;
  text-align: left;
  text-decoration: none;
  text-indent: 0;
  text-shadow: none;
  text-transform: none;
  top: auto;
  vertical-align: baseline;
  white-space: normal;
  width: auto;
  z-index: 2147483648;
}

/* 
 * Add your own styles here 
 * but always prefix them with:
 * 
 *   .extension-widget-__MSG_@@extension_id__ 
 *   
 */

.extension-widget-__MSG_@@extension_id__{
  position: fixed;
  top: 100px;
  margin: 0 auto;
  left: 0;
  right: 0;
  width: 500px;
}

.extension-widget-__MSG_@@extension_id__::shadow h1 {
  display: block;
  margin: 0 auto;
  padding: 20px;
  background-color: yellow;
  border: 10px solid green;
  font-size: 20px;
  text-align: center;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-17T18:54:48.040

我最近创建了 Boundary，一个 CSS+JS 库来解决这样的问题。Boundary 创建与现有网页的 CSS 完全分离的元素。

以创建对话框为例。安装 Boundary 后，您可以在内容脚本中执行此操作

```
var dialog = Boundary.createBox("yourDialogID", "yourDialogClassName");

Boundary.loadBoxCSS("#yourDialogID", "style-for-elems-in-dialog.css");

Boundary.appendToBox(
    "#yourDialogID",
    "<button id='submit_button'>submit</button>"
);

Boundary.find("#submit_button").click(function() {
  // some js after button is clicked.
}); 
```

#yourDialogID 中的元素不会受到现有网页的影响。find() 函数返回一个常规的 jQuery DOM 元素，所以你可以用它做任何你想做的事情。

希望这可以帮助。如果您有任何问题，请告诉我。

[https://github.com/liviavinci/Boundary](https://github.com/liviavinci/Boundary)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-27T08:25:20.470

使用 iframe。这是一种解决方法，但效果很好。

马克西姆已经写了[一篇关于它](http://www.sitepoint.com/chrome-extensions-bridging-the-gap-between-layers/)的文章。

# objective-c - 手动删除已发布应用程序的旧 xcdatamodel 的可能缺点

> ID：12783218
> 
> 赞同：2
> 
> 时间：2012-10-08T13:56:25.403
> 
> 标签：objective-c, xcode, core-data

我有一个已经发布的 CoreData 应用程序，在发布一个（版本 10）之前，我有 9 个模型过时的版本。我想删除将我引向最终模型的一长串开发模型。

在开发过程中，我发现这可以通过删除 myproject.xcodeproj 中的引用并同时删除 mydata.xcdatamodeld 中的 version_x.xcdatamodel 文件来轻松完成。

但是我正在尝试调查任何可能的缺点，特别是考虑到我的应用程序已经在应用程序商店中。考虑到我无法从早期版本迁移或恢复数据模型这一事实。

相反，我刚刚添加了一个基于版本 10 的新模型，称为版本 11，我正在对其进行开发。我不知道迁移的机制，但是为什么我需要版本 10 之前的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T00:06:24.973

首先制作多个版本的数据模型的主要原因是为了更优雅地处理迁移（升级数据库），而不是仅仅删除现有数据库并使用更改创建新数据库。

因此，如果您之前发布的应用程序版本使用了之前的数据模型，并且您希望能够优雅地升级数据库，那么只需保持之前的模型不变。

如果您创建数据模型的多个版本的唯一原因是在初始开发期间保持数据完好无损，并且没有其他人拥有您的应用程序与以前的数据模型，那么请删除。没关系。

要自动优雅地迁移您的数据模型，请在您的应用程序委托中使用以下代码：

```
// Returns the persistent store coordinator for the application.
// If the coordinator doesn't already exist, it is created and the application's store added to it.
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"database.sqlite"]; //change to the name of your database

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                         [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

        //[[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]; --delete old model if necessary
        //abort(); --Abort App if necessary
    }

    return _persistentStoreCoordinator;
} 
```

# internet-explorer - Video For Everyone/PrettyPhoto Flash Fallback 在 IE 中删除视频后继续播放音频

> ID：12783219
> 
> 赞同：0
> 
> 时间：2012-10-08T13:56:25.620
> 
> 标签：internet-explorer, prettyphoto, flash-video

我正在尝试使用“适合所有人的视频”/“PrettyPhoto”，但在 IE 中存在问题，即 Flash 后备导致音频在视频关闭/删除后继续播放。

有没有人经历过这个或知道如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:04:01.073

当 prettyPhoto 无法在 IE 浏览器中停止视频时，我遇到了这个问题。我修复了它删除容器不使其可见（默认情况下）所以在关闭函数中添加这一行： `if($.browser.msie) {$pp_pic_holder.stop().find('object,embed,iframe').remove(); }`

在第 479 行你会发现 prettyPhoto.close 函数

* * *

```
$.prettyPhoto.close = function(e){
        if($pp_overlay.is(":animated")) return;
        $.prettyPhoto.stopSlideshow();
        $pp_pic_holder.stop().find('object,embed').css('visibility','hidden');
        if($.browser.msie)  {$pp_pic_holder.stop().find('object,embed,iframe').remove(); } 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T07:36:13.803

这对我有用。

```
if ($.browser.msie) {
    $pp_pic_holder.stop().find("object,embed,iframe").attr("src", "");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T05:24:51.240

我已经在所有浏览器中为漂亮的照片视频灯箱插件解决了这个问题。

这是解决方案：

```
e.prettyPhoto.close = function () {
         if ($pp_overlay.is(":animated")) return;
         e.prettyPhoto.stopSlideshow();
         $pp_pic_holder.stop().find("object,embed").css("visibility", "hidden");
         $pp_pic_holder.find("iframe").attr("src", "");

and code continue....... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T18:58:13.843

它对我的工作只是将插件升级到 3.1.5 并添加 rel=prettyphoto

# web-services - 如何确保使用 jQuery AJAX 发送到 WebService 的数据是通过我的网站而不是某种攻击

> ID：12783220
> 
> 赞同：2
> 
> 时间：2012-10-08T13:56:25.990
> 
> 标签：web-services, jquery, security, cryptojs

我的代码：

```
 function HandleSignUp() {
    var CurrentURL = document.URL;
    var obj, val;
    //ajax call started
    $.ajax({
        type: "POST",
        url: "../../webservice/GetAjaxDataWebService.asmx/RegisterNewUser",
        data: "{'UserFullName': '" + $('#SignUpName').val() + "','Email': '" + $('#SignUpEmail').val() + "','Password': '" + $('#SignUpPassword').val() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            //msg.d contains the return value from web service call
            $.colorbox.close();

            val = eval(msg);
            obj = jQuery.parseJSON(val.d);

            UpdateLogin(obj.Email, obj.FirstName);

        }
    });
    //ajax call ended
} 
```

如何确保使用 jQuery AJAX 发送到 WebService 的数据是通过我的站点而不是某种攻击。

我对登录有类似的 ajax 调用，我将用户 ID 和密码传递给 Web 服务并进行身份验证。

有没有办法拥有一个一次性的请求响应令牌来确保它是一个有效的 Web 服务调用。

如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:12:19.867

您可以使用哈希键（只有您知道）实现轻量级 MAC-ing 机制

1.  在每次调用 Web 服务之前`n`，将消息负载的第一个字节提供给哈希键并计算哈希值。
2.  调用您的网络服务，在 http 标头中发送哈希值（我推荐使用[授权标头](http://www.httpwatch.com/httpgallery/authentication/)，您可以创建自定义标头。
3.  在您的 Web 服务中，在接受任何服务请求之前，您通过使用相同数据（即前 N 个字节）计算哈希值并与授权标头中的哈希值进行比较来验证消息的真实性。仅当值签出时才兑现请求。

这里有一点处理开销，它假设传输是通过安全线路进行的，否则，消息仍然可能被劫持。但是你解决了虚假电话的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:25:04.097

会话可能是解决此问题的最简单方法，具体取决于您的服务器框架。

登录成功后，在服务器上打开一个会话并设置一个值；在处理任何其他 Web 服务 API 之前检查会话值。

# sql-server - 如何在 T-Sql 中使用行索引

> ID：12783222
> 
> 赞同：0
> 
> 时间：2012-10-08T13:56:29.683
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我有一个表提醒、消息和用户。我必须实现，每当在 Reminder 表中创建一行时，Users 表中的管理员就会在他们的 Messaging 表中收到消息。

我在 sql 查询中做所有事情。我已经达到了所有管理员用户的插入和选择，我也能够在记录数上运行一个循环。我想在循环中一一插入。

```
If @flag=1 // flag=1 means reminder is created successfully
BEGIN
 Declare @BackUpMessage as varchar(200)
 Set @BackupMessage = 'Hi Admin,\r\n
 \t A backup has been scheduled by the system. Details are given below: \r\n
    a) Bakcup Type : '+rem_type+' \r\n
    b) Backup Date : '+ Convert(varchar,GETDATE()+@days)+''

 Set @Count = (Select Count(*) From JFPUsers Where RoleId=1 and Active=1) // Total Numbers of Admin
 IF @Count > 0
    Declare @i int =0

    Select Id From JFPUsers Where RoleId=1 and Active=1 // Getting Id of each admin to save
    While @i < @Count
    BEGIN
        Insert Into JFMessaging (MessageBody, SenderId,RecieverId,IsRead,SentOn,IsActive)
        Values(@BackUpMessage, -1, ,0,GETDATE(),1) // I am stucked here 
    END
END 
```

我可以使用 C# 轻松完成，但我想在单个连接和单个点击 @backend 中完成这些工作。

**更新：见图片和摘要**

摘要：我需要的是每当在提醒中创建记录时。该查询将从 JFPUsers {condition RoleId=1 is admin} 中选择所有管理员，并在 JFMessaging 中创建那么多行，其中 SenderId 将是创建提醒的用户或 -1（对于系统），而 RecieverId 将包含带有自定义通知消息的管理员 ID .

![在此处输入图像描述](../Images/2d6690e2df485ffdcf8939e89c0340ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:57:38.140

在您的 Reminder 表上创建一个`INSERT`触发器，该触发器将 INSERT 插入到管理员的消息表中。尝试改掉在 SQL 中使用循环的习惯——这通常是不好的做法。

像这样的东西...

```
insert JFMessaging (ReceiverID, Otherfields)
select UserID, otherfields
from
    inserted
        cross join
    JFPusers
where RoleID = 1 
```

# python - 用于在所有空格处拆分的正则表达式 Python

> ID：12783224
> 
> 赞同：1
> 
> 时间：2012-10-08T13:56:36.250
> 
> 标签：python, regex

> **可能重复：**
> [在 python 中的空格上拆分字符串](https://stackoverflow.com/questions/8113782/split-string-on-whitespace-in-python)

我有一个这样的字符串：

```
['.text      0x1000       0xb51b       0xb600       6.259216    '] 
```

我想把它分成这个：

```
[.text, 0x1000, 0xb51b... etc] 
```

到目前为止，我已经尝试过： re.split("( ) *", b) 和 re.split("[ \t* ]", b)

但无济于事。我得到类似的东西：

```
.['.text', ' ', '0x1000', ' ', '0xb51b', ' ', '0xb600', ' ', '6.259216', ' ', ''] 
```

或者其他一些有更多空格的。我知道我可以从字符串中删除空格，但我更愿意直接使用 RE 来拆分它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T13:57:28.113

为什么不只使用常规[`str.split`](http://docs.python.org/library/stdtypes.html#str.split)？

```
'.text      0x1000       0xb51b       0xb600       6.259216    '.split() 
```

引用文档：

> 如果 sep 未指定或为 None，则应用不同的拆分算法：连续空格的运行被视为单个分隔符，如果字符串具有前导或尾随空格，则结果将在开头或结尾不包含空字符串。

* * *

顺便说一句，我发现 using `mystring.split(None)`（而不是`mystring.split()`）有时需要牢记，因为它允许您不“硬编码”拆分算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:09:01.980

尝试这个：

```
import re
re.split("\s*", yourInputString.strip()) # result as List 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:03:23.217

另一种选择是首先清除多个空格，然后用单个空格替换它们。之后，您`split(" ")`使用一个空格进行操作：

```
re.sub(r"  +"," ", text).split(" ") 
```

# capistrano - 使用 Capistrano 进行本地开发任务

> ID：12783228
> 
> 赞同：0
> 
> 时间：2012-10-08T13:56:42.887
> 
> 标签：capistrano, development-environment, ezpublish

我目前正在围绕[eZPublish](http://ez.no) CMS 建立一个开发环境。

我想使用[Capistrano](http://capistranorb.com/)进行部署。我很好奇的是也将 Capistrano 用于本地开发任务。

这些任务将执行以下操作：

*   使用 eZPublish 创建新站点。这将为该站点创建一个 git 存储库，设置一个数据库，创建 Solr 核心等。

*   拉下一个已经存在的网站。基本上将现有的 git repo 克隆到特定目录，并确保所有依赖项都到位。

我不确定 Capistrano 是否适合这些任务。因为它主要是一组将在本地运行的命令。

有没有人在这个用例中使用 Capistrano 的经验。或者您会建议采取另一条路线吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:10:46.403

Capistrano 是一个部署工具。您真正需要的是使本地开发更容易的工具：设置服务器和软件包、克隆您的存储库、下拉内容。

Capistrano 可能是此解决方案的一部分，您可以指定本地部署命令。

但您真正需要的是供应、配置和虚拟化解决方案。我建议将[流浪者](http://vagrantup.com)与[厨师](http://www.opscode.com/chef/)或[木偶结合起来](http://www.puppetlabs.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:04:50.883

以防万一，作为概念证明，我开发了一堆 Capistrano 食谱与 eZ Publish 一起使用。显然它是面向部署的，但它也具有很酷的本地特性，例如：

*   检索生产数据库以将其导入本地实例
*   你的 var/ 目录也一样

这个脚本正在开发中，还不是很稳定（这将是 0.3.0 的情况，它将在几天后发布），因此非常感谢反馈。

[阅读](http://alafon.github.com/alcapon/)更多 http://alafon.github.com/alcapon/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:53:20.150

Capistrano 的超能力是通过 SSH 分发和协调命令。

对于可以在本地计算机上运行的任务，Rake 是正确的工具。

# c# - LinqToEntities 在 LEFT OUTER JOIN 中使用小于 (<)

> ID：12783232
> 
> 赞同：3
> 
> 时间：2012-10-08T13:56:53.527
> 
> 标签：c#, sql, linq-to-entities, left-join

我正在与一位同事一起工作，我们正在尝试使用 LinqToEntities (Entity Framework v4.0) 重现以下 SQL 查询

```
SELECT t1.*
FROM [dbo].LocaleStringResource AS t1
  LEFT OUTER JOIN [dbo].LocaleStringResource AS t2
    ON (t1.ResourceName = t2.ResourceName AND t1.AccountId < t2.AccountId)
WHERE t2.ResourceName IS NULL; 
```

基本上它的意思是只返回我们最高的 AccountIds，其中有多个匹配的 ResourceName。到目前为止，我们已经得到了这个......

```
localeStringResource = from e1 in localeStringResource
  join e2 in localeStringResource
  on new { e1.ResourceName, e1.AccountId } equals new { e2.ResourceName, e2.AccountId }
  where e2.ResourceName == null
  select e1; 
```

但是我们似乎无法弄清楚如何在 LEFT OUTER JOIN 中实现等价的小于 (<)？

```
ON (t1.ResourceName = t2.ResourceName AND t1.AccountId < t2.AccountId) 
```

任何人都可以请告知这是否可能，或者我们是否在吠叫错误的树？我们试图使初始查询尽可能简单，希望它能使等效的 LinqToEntities 查询更容易构建。

笔记：

`AccountId`不是唯一的。我们`Identity` `Id`在桌子上有一列`LocalResourceString`。然而，两者都有一个独特的`AccountId`约束`ResourceName`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:26:53.023

<EDIT> 看起来您真正想要做的是选择`AccountId`每个`ResourceName`. 如果我们假设它`AccountId`是唯一的，那么：

```
localeStringResource =
    from e1 in localeStringResource
    group e1 by e1.ResourceName into grp
    select grp.Max(e => e.AccountID); 
```

</编辑>

您在这里有一个左外连接，因此您的 LINQ 将需要一个`GroupJoin`--构造`SelectMany`。并且被重构为相等，但您可以稍后在 : 之前添加条件的其余部分：`DefaultIfEmpty``Join``GroupJoin``DefaultIfEmpty`

```
localeStringResource =
    from e1 in localeStringResource
    join e2inner in localeStringResource
        on e1.ResourceName equals e2inner.ResourceName
        into grp
    from e2 in grp
        .Where(e => e1.AccountId < e.AccountId)
        .DefaultIfEmpty()
    where e2.ResourceName == null
    select e1; 
```

下面是方法语法，供参考。我曾经`Tuple`传递数据：

```
localeStringResource = localeStringResource
    .GroupJoin(
        localeStringResource,
        e1 => e1.ResourceName,
        e2 => e2.ResourceName,
        Tuple.Create)
    .SelectMany(pair => pair.Item2
        .Where(e2 => pair.Item1.AccountID < e2.AccountID)
        .DefaultIfEmpty()
        .Select( e2 => Tuple.Create(pair.Item1, e2)))
    .Where(pair => pair.Item2.ResourceName == null)
    .Select(pair => pair.Item1); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T14:17:30.383

尝试使用 ANSI-82 语法将连接条件放在 where 子句中：

```
localeStringResource = from e1 in localeStringResource
                       from e2 in localeStringResource
                       where e1.ResourceName = e2.ResourceName &&
                            e1.AccountId < e2.AccountId
                       select e1; 
```

# php - 将简单的 php 代码转换为 python

> ID：12783233
> 
> 赞同：3
> 
> 时间：2012-10-08T13:56:57.123
> 
> 标签：php, python

我想将我的 php 代码转换为 python 代码。可能吗

```
$secret = 'segredo'; // To make the hash more difficult to reproduce.
$path   = '/p/files/top_secret.pdf'; // This is the file to send to the user.
$expire = 1096891200; // At which point in time the file should expire. time() + x; would be the usual usage.
$md5 = base64_encode(md5($secret . $path . $expire, true)); // Using binary hashing.`$md5 = strtr($md5, '+/', '-_'); // + and / are considered special characters in URLs, see the wikipedia page linked in references.
$md5 = str_replace('=', '', $md5); // When used in query parameters the base64 padding character is considered special. 
```

我想将上面的 php 代码转换为 python。是否存在一些转换工具？

此代码是 nginx HttpSecureLinkModule 的简单唯一 url 生成器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:05:48.323

```
import hashlib
secret, path, expire = 'segredo', '/p/files/top_secret.pdf', 1096891200
md5 = hashlib.md5(secret + path + str(expire)).digest().encode('base64').strip('\n=') 
```

# objective-c - 防止 OS X 10.8 进入睡眠状态

> ID：12783234
> 
> 赞同：2
> 
> 时间：2012-10-08T13:56:59.273
> 
> 标签：objective-c, macos, cocoa

我需要让 OS X 暂时停止运行屏幕保护程序，然后允许它运行。我找到了 IOKit 的函数 IOPMAssertionCreateWithName 和 IOPMAssertionRelease，但它们没有按预期工作。创建 Assertion 后，屏保被屏蔽了，没关系，但是我释放 Assertion 后它仍然被屏蔽。这是我在 github 上的一些示例代码：[https](https://github.com/silvansky/OSX-TestSleep) ://github.com/silvansky/OSX-TestSleep - 主要方法是这样的：

```
- (IBAction)toggle:(id)sender
{
    if (_assertionID == kIOPMNullAssertionID)
    {
        // toggle on
        CFStringRef reasonForActivity= CFSTR("Test reason");

        IOReturn success = IOPMAssertionCreateWithName(kIOPMAssertionTypePreventUserIdleDisplaySleep, kIOPMAssertionLevelOn, reasonForActivity, &_assertionID);
        [self.statusField setStringValue:@"Assert ON"];
        NSLog(@"*** lock: %d, success: %d", _assertionID, success);
    }
    else
    {
        // toggle off
        IOReturn success = IOPMAssertionRelease(_assertionID);
        [self.statusField setStringValue:@"Assert OFF"];
        NSLog(@"*** unlock: %d. success: %d", _assertionID, success);
        _assertionID = kIOPMNullAssertionID;
    }
} 
```

所以，当我第二次按下“切换”按钮时，屏幕保护程序仍然被阻止。

有没有办法解决这个问题？我的系统是 OS X 10.8.2，Xcode 4.5.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:36:49.930

好吧，我找到了这种行为的解释。

在我发布断言后，OS X 刚刚为 powerd（超时 300 秒）进程添加了一个断言。因此，屏幕保护程序在我允许后 5-6 分钟内启动，而不是在 1 分钟后启动（正如我在系统偏好设置中设置的那样）。我真的不知道为什么。

我已经在 github 上更新了我的源代码，所以它会打印出关于切换操作的所有断言。

正如一些人所说，OS X 的这种奇怪行为出现在 10.8 中。

# macos - 升级到山狮时 grep 不起作用

> ID：12783236
> 
> 赞同：1
> 
> 时间：2012-10-08T13:57:20.400
> 
> 标签：macos, terminal, grep, osx-mountain-lion

最近我正在使用 OSX 山狮。当我使用 Terminal.app 时，我发现我的 grep 无法再次工作。

不管我做什么，grep 总是报告一个警告：

```
 $ grep --version

    *usage: grep [-abcDEFGHhIiJLlmnOoPqRSsUVvwxZ] [-A num] [-B num] [-C[num]]
        [-e pattern] [-f file] [--binary-files=value] [--color=when]
        [--context[=num]] [--directories=action] [--label] [--line-buffered]
        [--null] [pattern] [file ...]*

My grep is locate at /usr/bin/:

    $ ls -lh /usr/bin/grep

    *-rwxr-xr-x  3 root  wheel    29K Jul 26 22:52 /usr/bin/grep* 
```

我不确定这个 grep 是否太小，它只有 29K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:59:05.683

你有`GREP_OPTIONS`设置（无效的东西）吗？打字`env`会转储你的环境变量，你可以通过这些来找到它（我通常会使用`grep`，但是......）

# sonarqube - 声纳分析挂在执行装饰器上

> ID：12783237
> 
> 赞同：0
> 
> 时间：2012-10-08T13:57:21.737
> 
> 标签：sonarqube, findbugs, cobertura

我将 Sonar 与 Ant 一起使用，导入 Cobertura 和单元测试结果，并通过设置“Sonar + FindBugs”运行代码质量分析。我以前能够使用 Sonar 分析我的（大型）项目。我不知道，也许我做了一些改变，但现在分析没有完成。Sonar 已成功导入 Cobertura 报告，然后它尝试执行装饰器，但它只是挂起（几个小时）：

p.PhasesTimeProfiler - 执行装饰器...

我已经在 Windows7 和 RHEL 6 机器上对此进行了测试。我已将 ANT java 堆增加到 2048M。使用较小的设置，我通常会在某些时候得到一个超出 Java 堆的异常。进程当前正在运行，进程正在使用2266M的内存。

有任何想法吗？:)

Sonar 挂起前的最后几行如下（调试模式）：

```
[sonar:sonar] 10:25:24.348 DEBUG raphMetricAggregator - Checking for resource type: CLA
[sonar:sonar] 10:25:24.350 DEBUG emDashBoardDecorator - Checking for resource type: CLA
[sonar:sonar] 10:25:24.505 DEBUG raphMetricAggregator - Checking for resource type: CLA
[sonar:sonar] 10:25:24.505 DEBUG emDashBoardDecorator - Checking for resource type: CLA
[sonar:sonar] 10:25:24.986 DEBUG raphMetricAggregator - Checking for resource type: CLA
[sonar:sonar] 10:25:24.986 DEBUG emDashBoardDecorator - Checking for resource type: CLA
[sonar:sonar] 10:25:24.994 DEBUG raphMetricAggregator - Checking for resource type: CLA
[sonar:sonar] 10:25:24.995 DEBUG emDashBoardDecorator - Checking for resource type: CLA
[sonar:sonar] 10:25:25.206 DEBUG raphMetricAggregator - Checking for resource type: CLA
[sonar:sonar] 10:25:25.206 DEBUG emDashBoardDecorator - Checking for resource type: CLA
[sonar:sonar] 10:25:25.214 DEBUG raphMetricAggregator - Checking for resource type: CLA
[sonar:sonar] 10:25:25.214 DEBUG emDashBoardDecorator - Checking for resource type: CLA 
```

在 Sonar Ant 目标中将 SQL 设置为详细的情况下，它挂起的最终 SQL 语句是：

```
[sonar:sonar] 10:00:31.855 DEBUG    org.hibernate.SQL - select snapshot0_.id as
id7_, snapshot0_.build_date as build2_7_, snapshot0_.created_at as created3_7_,
snapshot0_.depth as depth7_, snapshot0_.islast as islast7_, snapshot0_.parent_sn
apshot_id as parent6_7_, snapshot0_.path as path7_, snapshot0_.period1_date as p
eriod8_7_, snapshot0_.period1_mode as period9_7_, snapshot0_.period1_param as pe
riod10_7_, snapshot0_.period2_date as period11_7_, snapshot0_.period2_mode as pe
riod12_7_, snapshot0_.period2_param as period13_7_, snapshot0_.period3_date as p
eriod14_7_, snapshot0_.period3_mode as period15_7_, snapshot0_.period3_param as
period16_7_, snapshot0_.period4_date as period17_7_, snapshot0_.period4_mode as
period18_7_, snapshot0_.period4_param as period19_7_, snapshot0_.period5_date as
 period20_7_, snapshot0_.period5_mode as period21_7_, snapshot0_.period5_param a
s period22_7_, snapshot0_.purge_status as purge23_7_, snapshot0_.qualifier as qu
alifier7_, snapshot0_.project_id as project25_7_, snapshot0_.root_snapshot_id as
 root26_7_, snapshot0_.root_project_id as root27_7_, snapshot0_.scope as scope7_
, snapshot0_.status as status7_, snapshot0_.version as version7_ from snapshots
snapshot0_ where snapshot0_.islast=? and snapshot0_.project_id=(select resourcem
o1_.id from projects resourcemo1_ where resourcemo1_.kee=?)
[sonar:sonar] 10:00:31.899 DEBUG    org.hibernate.SQL - select snapshotso0_.id a
s id13_, snapshotso0_.data as data13_, snapshotso0_.snapshot_id as snapshot3_13_
 from snapshot_sources snapshotso0_ where snapshotso0_.snapshot_id=? 
```

在第二次运行中，我也得到了这个：

```
[sonar:sonar] 11:16:40.149 DEBUG b.b.JdbcDriverHolder - To prevent a memory leak
, the JDBC Driver [com.mysql.jdbc.Driver] has been forcibly deregistered 
```

当我没有增加 java 堆大小并通过 Jenkins 执行 Sonar Ant 目标时，我得到以下信息：

```
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2746)
    at java.util.ArrayList.ensureCapacity(ArrayList.java:187)
    at java.util.ArrayList.add(ArrayList.java:378)
    at     org.sonar.plugins.core.timemachine.ViolationTrackingDecorator.mapViolations(ViolationTrackingDecorator.java:131)
at org.sonar.plugins.core.timemachine.ViolationTrackingDecorator.decorate(ViolationTrackingDecorator.java:70)
at org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(DecoratorsExecutor.java:79)
at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:70)
at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:63)
at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(DecoratorsExecutor.java:63) 
```

如果我将 Ant 增加为使用 2048M，则不会出现上述 java 堆空间问题，但随后装饰器挂起，如第一个错误输出所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:38:16.367

我很遗憾地报告，如果不从 MySQL 数据库中删除整个项目，我就无法解决这个问题。我注意到在它开始挂起后我做了两个改变。1) 我似乎将项目密钥更改为其他内容，2) 我已将质量配置文件从默认更改为“Sonar + findbugs”。

声纳在 4 次运行（即 4 天）后停止工作，所以我会从现在开始看看这是否有效，而无需更改我的初始设置。今天早上的第一次运行顺利。

# javascript - 图片点击，页面刷新

> ID：12783243
> 
> 赞同：0
> 
> 时间：2012-10-08T13:57:37.427
> 
> 标签：javascript, html, mobile, refresh

我在我的移动网站上工作，我的页面上有这个代码：

```
<a href="javascript:history.go(-1)"> 
```

附在我的标志上。

此代码在我的页面上运行良好，但我希望我的索引页面在单击徽标时刷新而不返回页面。

我怎样才能做到这一点？

谢谢。

好的：问题解决了，

我只需要添加

```
<a href="PAGENAME.html"> 
```

以当前 .html 页面为标题的每个页面。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:03:32.763

使用相对 url 将徽标上的所有点击重定向到索引页面。

```
<a href="/"><img src="logo.png"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:16:20.407

您可以检查 location.href 属性以确定它是在索引中还是在任何其他页面中，然后决定是返回还是刷新。

```
if(window.location.href.indexOf('index.') > -1)
    window.location.reload();
else
    history.go(-1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T09:12:24.293

对于遇到此问题的任何人，一个更动态的解决方案不需要将当前页面 url 作为每个页面上的 href，您可以添加如下链接：

```
<a href"JavaScript: location.reload(true);">refresh</a> 
```

或作为按钮

```
<button onclick="location.reload(true);">Refresh</button> 
```

或作为输入：

```
<input type="button" onClick="location.reload(true);" VALUE="Refresh"> 
```

* * *

可以以稍微不同的方式工作的替代 javascript 是：

```
javascript:history.go(0)
location.reload()
location.replace(location.pathname) 
```

使用 jquery 将是 -

```
$('#something').click(function() {
    location.reload();
}); 
```

但似乎没有必要

你明白了。希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-02T01:56:22.767

我发现使用“./”最适合我

# html - 如何停止不使用 pause() 的 HTML5 视频？

> ID：12783246
> 
> 赞同：1
> 
> 时间：2012-10-08T13:57:42.607
> 
> 标签：html, html5-video

有没有办法在不使用的情况下停止 HTML5 视频`pause()`？

我不想停止视频，`pause()`因为我触发了我的暂停事件处理程序。设置`currentTime`为视频结束也不是解决方案，因为这也会触发事件的自定义事件处理`ended`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:09:44.593

[在问题中添加了我的评论作为答案] 一个简单但不是最好的解决方案是创建一个变量并签入自定义处理程序。

```
var triggerPause = true;

function customPauseHandler(e)
{
    if (!triggerPause)
        return;

    ...
} 
```

# php - PHP mail() 附件文件名显示为“untitle”

> ID：12783248
> 
> 赞同：1
> 
> 时间：2012-10-08T13:57:54.307
> 
> 标签：php

我正在尝试使用 PHP mail() 函数发送带有附件的电子邮件。电子邮件已送达，但在网络邮件中，文件名显示为“无标题”。使用 Outlook Avast 启发式完全阻止电子邮件。

请指导我克服这个问题。

这是我正在使用的代码

```
 $recieverAdd = 'r@gamil.com';
 $subject = 'Attachment';
 $attDescription="emailing lessons";
 $filename ='example.pdf';
 $file = '/home/user/example.pdf';
 $file_size = filesize($file);
 $handle = fopen($file, "r");
 $content = fread($handle, $file_size);
 fclose($handle);
 $content = chunk_split(base64_encode($content));
 $uid = md5(uniqid(time()));
 $name = basename($file);

 $from_name = $uname;
 $from_mail = 'admin@gmail.com';
 $replyto  ='noreply@gmail.com';
 $header = "From: $from_name";      
 $header .= "\nMIME-Version: 1.0\n" . 
     "Content-Type: multipart/mixed;\n" . 
     " boundary=\"{$uid}\"";

 $message = "<p><b>Hello </b></p>";
 $messageBody =  "--{$uid}\n" . "Content-Type: text/html; charset=\"iso-8859-1              \"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n"; 
 $messageBody .= "--{$uid}\n". "Content-Type: application/octet-stream;\n".
        "name=\"{$filename1}\"\n".
        "Content-Description: {$filename}\n" .
        "Content-Disposition: attachment;\n".
        "filename=\"{$filename}\"; size={$file_size};\n" .
        "Content-Transfer-Encoding: base64\n\n". $content."\n\n". "--{$uid}--\n";

 mail($recieverAdd,$subject,$messageBody,$header) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:01:10.483

```
"Content-Type: application/octet-stream;\n".
"name=\"{$filename1}\"\n".

"Content-Disposition: attachment;\n".
"filename=\"{$filename}\"; size={$file_size};\n" . 
```

这些标头的`name=...`and`filename=...`部分被认为是单独的（无效的）标头行，因为您在`Content-Type: application/octet-stream;`and之后输出换行符`Content-Disposition: attachment;`，但在这些换行符之后没有空格。为了将标题拆分为多行，每个续行必须以空格开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:29:20.917

我想这可能对你有帮助。,

请找到以下示例：

```
<?php    

    $my_file = "somefile.zip";
    $my_path = $_SERVER['DOCUMENT_ROOT']."/your_path_here/";
    $my_name = "Olaf Lederer";
    $my_mail = "my@mail.com";
    $my_replyto = "my_reply_to@mail.net";
    $my_subject = "This is a mail with attachment.";
    $my_message = "Hallo,\r\ndo you like this script? I hope it will help.\r\n\r\ngr. Olaf";
    mail_attachment($my_file, $my_path, "recipient@mail.org", $my_mail, $my_name, $my_replyto, $my_subject, $my_message);

?>

<?php
function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
    $file = $path.$filename;
    $file_size = filesize($file);
    $handle = fopen($file, "r");
    $content = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($content));
    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mailto, $subject, "", $header)) {
        echo "mail send ... OK"; // or use booleans here
    } else {
        echo "mail send ... ERROR!";
    }
}
?> 
```

# javascript - 修改 MarkerClusterer 图标以获得最高分，而不是标记计数

> ID：12783250
> 
> 赞同：6
> 
> 时间：2012-10-08T13:58:03.583
> 
> 标签：javascript, google-maps-api-3

我正在寻找一些关于从哪里开始的建议：

我目前在开发环境中启动并运行“香草”MarkerClusterer（大约 3000 个标记）。

每个标记都有一个与之相关的分数，我想更改它，以便集群标记代表它们包含的标记的最高分数（而不仅仅是代表标记的数量）。

我应该去哪里，我将如何实现这种改变？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T17:52:19.977

使用 setCalculator() 方法来定义您希望如何完成计算。这是使用[原始函数](https://github.com/gmaps-marker-clusterer/gmaps-marker-clusterer/blob/c9d448d62b5634db4e76b6b7e3d913703cbed303/src/markerclusterer.js#L458)的代码。调整它以按照您想要的方式进行计算。每个集群调用一次计算器函数，因此结果是您想要在集群中的文本以及它应该具有的样式的索引。

```
your_clusterer.setCalculator(function(markers, numStyles) {
  var index = 0;
  var count = markers.length;
  var dv = count;
  while (dv !== 0) {
    dv = parseInt(dv / 10, 10);
    index++;
  }

  index = Math.min(index, numStyles);
  return {
    text: count,
    index: index
  };
}); 
```

# sql - 任何人都可以在这里发现 SQL 问题吗？尝试更新 ms-access 中的字段

> ID：12783253
> 
> 赞同：0
> 
> 时间：2012-10-08T13:58:06.973
> 
> 标签：sql, database, vba, ms-access

```
Dim sqlUpdate As String

sqlUpdate = "UPDATE [Stock Conversion] SET [Stock Conversion].Status = 'PRINTED' " & _
"WHERE ((([Stock Conversion].Status) = 'NEW'));"

' Turn off warning
DoCmd.SetWarnings False

'Run SQL
DoCmd.RunSQL (sqlUpdate)

'Turn on warning
DoCmd.SetWarnings True 
```

基本上没有错误信息，只是什么都没有发生？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:33:45.950

将此语句粘贴到新 Access 查询的 SQL 视图中并对其进行测试。

```
UPDATE [Stock Conversion]
SET Status = 'PRINTED'
WHERE Status = 'NEW'; 
```

如果它不起作用，希望错误消息能帮助您理解原因，以便您修复它。

如果它工作正常，请使用`.Execute`DAO.Database 对象的方法从 VBA 执行相同的语句。由于您不会使用`DoCmd.RunSQL`，因此没有`SetWarnings`关闭的动力。这是很重要的一点，因为您在关闭时会隐藏信息`SetWarnings`。

```
Dim db As DAO.Database
Dim sqlUpdate As String

sqlUpdate = "UPDATE [Stock Conversion]" & vbCrLf & _
    "SET Status = 'PRINTED'" & vbCrLf & _
    "WHERE Status = 'NEW';"
Debug.Print sqlUpdate
DoCmd.SetWarnings True ' in case it had been left off somehow '
Set db = CurrentDb
db.Execute sqlUpdate, dbFailOnError
Set db = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:26:58.883

有帮助的事情：

*   `[Stock Conversion]`从`set`和中删除`where`
*   删除 Where 上不必要的括号
*   删除分号
*   再检查一遍。
*   如果它不起作用，请删除`where`并再次尝试检查您的 were 子句是否有问题
*   向数据库添加 SQL 跟踪以查看查询是否真的被提交
*   在此处粘贴完整的 SQL 语句，以便我们提供更多帮助

# reporting-services - 动态报告 2012 ssrs

> ID：12783255
> 
> 赞同：0
> 
> 时间：2012-10-08T13:58:08.950
> 
> 标签：reporting-services, sql-server-2008-r2

**使用报告类进行动态报告

Microsoft.ReportingServices.ReportRendering 命名空间参考 Microsoft.ReportingServices.ProcessingCore.dll（最新版​​本 2012-06）**

报告类包含所有
将 RDLC 或 RDL 文件与我正在尝试的报告类相关联的 reportViewer 元素 序列化该类此选项不可用...

```
XmlSerializer serializer = new XmlSerializer(typeof(Report));
FileStream fs = new FileStream(report_path, FileMode.Open);
ms = new MemoryStream();
fs.Position = 0;
ms.SetLength(fs.Length);
fs.Read(ms.GetBuffer(), 0, (int)fs.Length);
ms.Position = 0;
report = (Report)serializer.Deserialize(ms); 
```

** 尝试序列化类并得到错误检查 bool=typeof(report).is Serializable >> false

那么也许还有其他解决方案可以与 Report Class 一起使用？

** 用于动态报告 >>
我正在使用 ReportDefinition xsd 并使用 xsd.exe 中的 ReportDefinition 类

Dserialize 选项也可以在运行时更改报告定义

新的报告类是这个选项的替代品！

# c# - 实体框架关联错误一对多

> ID：12783258
> 
> 赞同：1
> 
> 时间：2012-10-08T13:58:31.437
> 
> 标签：c#, .net, vb.net, visual-studio-2010, entity-framework

谁能告诉我为什么我会收到这个错误？我曾尝试添加约束，但它会导致大量其他错误，我无法弄清楚。在我看来一切都很好：\

这是我得到的错误

```
Error   1   Error 3003: Problem in mapping fragments starting at line 265:Given the cardinality of Association End Member Contact, it should be mapped to key columns of the table tbl_Contact_Relationship. Either fix the mapping or change the multiplicity of this end. 
```

![在此处输入图像描述](../Images/58810406d599639f6dd6a1454359ecca.png)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-30T20:06:31.707

这里的问题是您正在考虑“1 对多”，但实际上它是“0 或 1 对多”。

您可以在 .edmx 图表设计器中修改它，或者如果您在数据库中正确设置了外键（确保在退出对话框窗口后保存表）和“从数据库更新模型”，您将得到更正的映射自动地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:18:07.130

修复了这个，不知道如何。删除了 tbl_Contact_Relationship 并将其重新添加，它现在正在工作。

# c# - 将两个或多个对象列表组合在一起

> ID：12783261
> 
> 赞同：1
> 
> 时间：2012-10-08T13:58:55.400
> 
> 标签：c#, c#-4.0, c#-3.0

这应该很简单，但由于某些未知原因，它对我来说是错误的。

数据库包含字符串 SubjectId、bool QReport、int Q、int FY、List ANotes、int Id。Id 是关键列，因此不会被检索。

我从数据库表中获取数据，例如

```
var unotesxx = db.UNotesDB.First(X => x.SubjectId == model.SubjectId); 
```

这将获取数据。然后我把它放到一个对象列表中。

```
List<UNotesDB> UNotes = new List<UNotes>();
Unotes.Add(unotesxx); 
```

这很好用。我有两个使用相同内容的对象和列表。不同之处在于包含的数据。现在我想将两者组合成一个列表。

```
List<TNotesDB> TNotes = new List<TNotes>(); 
```

这个设置与其他两个完全相同。然后我尝试了

```
List<UNotesDB> UNotes = new List<UNotes>();
List<CNotesDB> CNotes = new List<CNotes>();
List<TNotesDB> TNotes = new List<TNotes>();
var unotesxx = db.UNotesDB.First(X => x.SubjectId == model.SubjectId);
var cnotesxx = db.UNotesDB.First(X => x.SubjectId == model.SubjectId);
UNotes.Add(unotesxx);
CNotes.Add(cnotesxx); 
```

这一切都有效，符合要求，当我运行调试时，一切看起来都很棒。

现在我想将前两个合并到第三个中。所以我添加了接下来的两个声明。

```
TNotes.Add(unotesxx);
TNotes.Add(cnotesxx); 
```

这些最终在红色下划线。

所以我尝试了

```
for ( int i = 0; i < UNotes.Count; i++)
{
    TNotes.Add(UNotes[i]);
} 
```

ADD 部分再次用红色下划线。我知道这不起作用有一个简单的原因，但由于某种原因，我无法只见树木不见森林。哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:37:59.987

泛型 List 是强类型的。您不能将 UNotesDB 添加到`List<TNotesDB>`.

选项：

1.  为所有三个创建一个通用的“容器”类，并将各种类型加载到该容器对象中，然后加载到列表中

    ```
    public class Note {
       public int SubjectID {get;set;}
       public string Name {get;set;}
    }

    //get UNOTE logic here...
    // then add unote to List. Repeat for other types.

    var note = new Note() {
       SubjectID = unote.SubjectID,
       Name = unote.Name,
    };

    noteList.Add(note); 
    ```

2.  为所有类型创建一个接口，然后创建该接口的列表

3.  为所有类型创建一个基本类型，然后创建该基本类型的列表。

假设您的数据库类型是由 LINQ To SQL 或实体框架生成的，第一个选项可能是您最简单的方法。

# python - 金字塔 wtforms 标签和错误信息翻译（适用于 i18n）

> ID：12783262
> 
> 赞同：2
> 
> 时间：2012-10-08T13:58:57.107
> 
> 标签：python, pyramid, wtforms

与金字塔一起使用时，我们如何翻译 wtforms 的表单标签和错误消息。

样品形式：

```
class RegistrationForm(Form):
   name = TextField(_(u'Name'), [v.Required(_(u'Please provide your name'))])
   age = IntegerField(
    _(u'Age'),
    [v.NumberRange(min=12, message=_(u'Must be at least %(min)d years old.'))]
   ) 
```

在此之后我完成了：

1.  消息字符串提取
2.  .po 文件中字符串的翻译
3.  编译创建 .mo 文件

我正在使用 jinja2 模板，jinja2 模板的翻译字符串工作正常，但表单元素翻译不起作用。对此有任何想法，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:19:43.873

`_`当翻译尚未配置时，您的问题可能来自在导入时而不是运行时调用的事实。如果您使用`pyramid.i18n.TranslationString`，这应该不是问题，因为它是惰性的，并且仅在显示时才翻译，但是如果您使用的是其他东西，那可能是您的问题。

那么，你是如何定义的`_`？

# linux - shell字符串和程序执行

> ID：12783263
> 
> 赞同：1
> 
> 时间：2012-10-08T13:59:00.753
> 
> 标签：linux, shell

以下代码用于在确切位置创建文件。但是运行 test.sh abc 的结果是

> 触摸：缺少文件操作数

```
#! /bin/sh
#test.sh
location='~/configuration/'$1
echo $location
touch `$location` 
```

有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:01:15.540

通过`$location`添加反引号，您正在尝试*执行*值`$location`并将其用作参数`touch`（参见[此处](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)，第 3.4.5 节）只需执行以下操作：

```
touch $location 
```

如果您`#!/bin/sh`使用该`-x`值运行，您将更清楚地看到`bash`您的 shell 脚本中正在执行的操作。这是调试脚本的一种非常有用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:47:33.410

位置是文件夹还是文件？if file -f if folder -d in below script --- bash 应该明白了~

```
#! /bin/bash
#test.sh
var1=$1;
location=~/configuration/$var1
echo $location

if [ ! -f $location ]; then
 echo "not found touching $location"
 touch `$location`
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T15:00:39.113

当你加上`~`引号时，它就失去了它的特殊含义。你需要：

```
#! /bin/sh
#test.sh
location=~/configuration/"$1"
echo "$location"
touch "$location" 
```

您应该养成始终将变量放在双引号中的习惯（直到您了解不需要引号的特定时间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:01:44.850

有几种方法可以做到这一点，但第一个解决方法是更改​​为

```
touch `echo $location` 
```

但是我认为这样做可能更简单

```
touch ~/configuration/$1 
```

# c# - C# 将动作转换为动作

> ID：12783268
> 
> 赞同：7
> 
> 时间：2012-10-08T13:59:18.380
> 
> 标签：c#

我有一个具有以下属性的类：

```
public Action<bool> Action { get; private set; } 
```

我有一个`Action<bool>` 作为参数的构造函数。

现在我想添加另一个接受类型对象的构造函数`Action`。我怎样才能转换`Action`为`Action<bool>`？在这种情况下，布尔参数应该为真。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T14:02:16.413

```
public class Foo
{
    public Foo(Action<bool> action)
    {
        // Some existing constructor
    }

    public Foo(Action action): this(x => action())
    {
        // Your custom constructor taking an Action and 
        // calling the existing constructor
    }
} 
```

现在，您可以根据要调用的 2 个构造函数中的哪一个以 2 种方式实例化此类：

1.  `var foo = new Foo(x => { Console.WriteLine("Hello"); });`（调用第一个 ctor）
2.  `var foo = new Foo(() => { Console.WriteLine("Hello"); });`（打电话给第二个演员）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T14:01:00.630

```
Action a = () => aboolaction(true); 
```

# c# - 如何确定全局键盘挂钩是否已断开连接？

> ID：12783270
> 
> 赞同：4
> 
> 时间：2012-10-08T13:59:22.810
> 
> 标签：c#, .net, visual-studio-2010, security

我使用了[Stephen Toubs](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)版本的全局键盘挂钩，在 WIN 7 环境中使用它。

它工作了一会儿，然后它就停止接收击键。

我在 regedit 中增加了超时值，但一段时间后它仍然断开连接。

所以问题是，我如何检测它是否已断开连接以及如何将钩子设置为再次激活？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:51:15.917

没有办法知道（来自[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644985%28v=vs.85%29.aspx)）：

> 挂钩过程应在比以下注册表项中的 LowLevelHooksTimeout 值中指定的数据条目更短的时间内处理消息：HKEY_CURRENT_USER\Control Panel\Desktop
> 
> 如果钩子过程超时，系统将消息传递给下一个钩子。但是，在 Windows 7 及更高版本上，该挂钩会在不被调用的情况下被静默删除。应用程序无法知道挂钩是否被移除。

解决此问题的一种方法是保留收到的最后一条消息的时间戳，并在上一条消息过去一段时间后使用后台计时器添加新挂钩。

此外，为了尽量减少这种情况的发生，您的钩子处理方法应该只收集最少的所需信息，并将数据的实际处理留给另一个线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:44:26.570

这是一个特点！这是[原因的描述](http://blogs.msdn.com/b/alejacma/archive/2010/10/14/global-hooks-getting-lost-on-windows-7.aspx)。

# regex - 在语句中使用 OR 的正则表达式

> ID：12783271
> 
> 赞同：1
> 
> 时间：2012-10-08T13:59:29.353
> 
> 标签：regex, ant, replace, wildcard

我正在使用 Ant，我想匹配看起来像`import package.R;`但`import package.R.*;`不是的字符串`import package.Rxxx;`

所以我只想为这两个字符使用某种通配符，这是非常具体`;`的`.`

我当前的解决方案使用两种不同的语句

`match="import.+?\.R;"`

`match="import.+?\.R."`

但我想将它们合二为一，以提高速度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:02:04.757

我不太了解 ant 特定的正则表达式，但如果它支持字符类，那么

```
match="import.+?\.R[;.]" 
```

应该工作的`[;.]`意义`;`或`.`

# php - 计数和总计 php/mysql 查询

> ID：12783273
> 
> 赞同：0
> 
> 时间：2012-10-08T13:59:40.267
> 
> 标签：php, mysql

尝试从查询中生成汇总总计等的表格，但无法使其正常工作。

我有这个代码：

```
 <?php

    $assigned = $_POST['Sales_Exec'];
    $date = $_POST['DateSelect'];
    $Renewed = "SUM(CASE WHEN Outcome = 'Renewed' THEN 1 ELSE 0 END)  AS 'Renewed <br/> Cases'";
    $Lapsed = "SUM(CASE WHEN Outcome = 'Lapsed' THEN 1 ELSE 0 END)  AS 'Lapsed <br/> Cases'";
    $Open = "SUM(CASE WHEN Outcome = 'Open' THEN 1 ELSE 0 END)  AS 'Outstanding <br/> Cases'";
    $Total =  "SELECT COUNT(Assigned) as 'Total <br/> Assigned";

    echo GenerateTable("SELECT COUNT(Assigned) as 'Total <br/> Assigned, $Open, $Renewed, $Lapsed FROM Data WHERE Assigned = '$assigned'  ");

?> 
```

并收到此错误：

MySQL 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 'Open' THEN 1 ELSE 0 END) AS 'Outstanding Cases', SUM(CASE WHEN Outcome = ' at line 1 附近使用

并且无法发现我哪里出错了。

除此之外，我还需要根据续订案件到分配案件总数的续订“转换”百分比。我试过了

```
$Conversion = $Renewed/$Total; 
```

但这并没有那么远，可能是因为上面的原始错误。我还需要将其四舍五入到最接近的百分比整数，即（95.67868786% 等于 96%）。

真的不知道如何让这个工作，所以任何帮助将不胜感激，在此先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:02:18.197

您错过了一个单引号（在 之后`Total <br /> Assigned`）：

`GenerateTable("SELECT COUNT(Assigned) as 'Total <br/> Assigned', $Open, $Renewed, $Lapsed FROM Data WHERE Assigned = '$assigned' ");`

至于百分比，您可能想在 PHP 中执行此操作，在这种情况下，这将是最简单的解决方案。因此，如果您有一行结果集，您可以执行以下操作：

`$Conversion = $row['Renewed <br/> Cases] / $row['Total <br/> Assigned'];`

# matlab - imshow 不显示相同的图像

> ID：12783276
> 
> 赞同：3
> 
> 时间：2012-10-08T14:00:10.820
> 
> 标签：matlab, image-processing, dicom

我曾经在 C 语言中使用 OpenCV，但现在决定给 MATLAB 一个机会。我对 MATLAB 很陌生，从一开始我就遇到了问题：

我读了这张图片：

```
X=dicomread('medicalimage.dcm') 
```

但是当我使用 imshow(X) 显示图像时，显示的图像与我上传的图像不同，即使我没有对图像进行任何更改。这是什么原因？两张图片之间有非常明显的对比度差异，而且似乎我丢失了原始图片中的一些细节。

我在我的 Ubuntu 12.04 系统上使用 MATLAB R2010b。

```
 Filename: 'x.dcm'
                   FileModDate: '06-Nov-2006 09:49:26'
                      FileSize: 526966
                        Format: 'DICOM'
                 FormatVersion: 3
                         Width: 512
                        Height: 512
                      BitDepth: 12
                     ColorType: 'grayscale'
FileMetaInformationGroupLength: 202
    FileMetaInformationVersion: [2x1 uint8]
       MediaStorageSOPClassUID: '1.2.840.10008.5.1.4.1.1.2'
    MediaStorageSOPInstanceUID: '1.3.12.2.1107.5.1.4.54693.30000006100507010800000005302'
             TransferSyntaxUID: '1.2.840.10008.1.2.1'
        ImplementationClassUID: '1.3.6.1.4.1.19291.2.1'
     ImplementationVersionName: 'OSIRIX001'
  SourceApplicationEntityTitle: 'OSIRIX'
          SpecificCharacterSet: 'ISO_IR 100'
                     ImageType: 'ORIGINAL\PRIMARY\AXIAL\CT_SOM5 SPI'
                   SOPClassUID: '1.2.840.10008.5.1.4.1.1.2'
                SOPInstanceUID: '1.3.12.2.1107.5.1.4.54693.30000006100507010800000005302'
                     StudyDate: '20061005'
                    SeriesDate: '20061005'
               AcquisitionDate: '20061005'
                   ContentDate: '20061005'
                     StudyTime: '101556.921000'
                    SeriesTime: '102051.046000'
               AcquisitionTime: '101818.126639'
                   ContentTime: '101818.126639'
               AccessionNumber: '0'
                      Modality: 'CT'
                  Manufacturer: 'SIEMENS'
               InstitutionName: 'hY9'
            InstitutionAddress: ''
        ReferringPhysicianName: [1x1 struct]
                   StationName: 'CT54693'
              StudyDescription: 'Extrémités inférieures^Pied_cheville_UHR (Adulte)'
         ProcedureCodeSequence: [1x1 struct]
             SeriesDescription: 'Pied/cheville  1.0mm std'
       PerformingPhysicianName: [1x1 struct]
                  OperatorName: [1x1 struct]
         ManufacturerModelName: 'Sensation 64'
       ReferencedStudySequence: [1x1 struct]
       ReferencedImageSequence: [1x1 struct]
           SourceImageSequence: [1x1 struct]
                   PatientName: [1x1 struct]
                     PatientID: 'vAD7q3'
              PatientBirthDate: ''
                    PatientSex: ''
                    PatientAge: '000Y'
              BodyPartExamined: 'EXTREMITY'
                SliceThickness: 1
                           KVP: 120
        DataCollectionDiameter: 500
            DeviceSerialNumber: '54693'
               SoftwareVersion: 'syngo CT 2006A'
                  ProtocolName: 'Pied_cheville_UHR'
        ReconstructionDiameter: 206
      DistanceSourceToDetector: 1040
       DistanceSourceToPatient: 570
            GantryDetectorTilt: 0
                   TableHeight: 95
             RotationDirection: 'CW'
                  ExposureTime: 1000
               XrayTubeCurrent: 110
                      Exposure: 122
                    FilterType: '0'
                GeneratorPower: 17
                     FocalSpot: 0.7000
         DateOfLastCalibration: '20061005'
         TimeOfLastCalibration: '073350.000000'
             ConvolutionKernel: 'U30u'
               PatientPosition: 'FFS'
              StudyInstanceUID: '2.16.840.1.113669.632.20.1211.10000315526'
             SeriesInstanceUID: '1.3.12.2.1107.5.1.4.54693.30000006100507010800000005268'
                       StudyID: 'A10025547593'
                  SeriesNumber: 5
             AcquisitionNumber: 3
                InstanceNumber: 34
          ImagePositionPatient: [3x1 double]
       ImageOrientationPatient: [6x1 double]
           FrameOfReferenceUID: '1.3.12.2.1107.5.1.4.54693.30000006100506302075000001028'
                 SliceLocation: 58
                 ImageComments: 'JPEG 2000 lossless - Version 4.0.2 (c) Image Devices GmbH'
               SamplesPerPixel: 1
     PhotometricInterpretation: 'MONOCHROME2'
                          Rows: 512
                       Columns: 512
                  PixelSpacing: [2x1 double]
                 BitsAllocated: 16
                    BitsStored: 12
                       HighBit: 11
           PixelRepresentation: 1
       SmallestImagePixelValue: 0
        LargestImagePixelValue: 2583
                  WindowCenter: [2x1 double]
                   WindowWidth: [2x1 double]
              RescaleIntercept: -1024
                  RescaleSlope: 1
  WindowCenterWidthExplanation: 'WINDOW1\WINDOW2'
             RequestingService: 'Service d'orthopédie pédiatri'
 RequestedProcedureDescription: 'CT pied-cheville'
RequestedProcedureCodeSequence: [1x1 struct]
     RequestAttributesSequence: [1x1 struct] 
```

左边是 imshow 的输出，右边是原图： http://img23.imageshack.us/img23/3166/differencem.png?http: [//imageshack.us/](http://img23.imageshack.us/img23/3166/differencem.png?http://imageshack.us/)

imshow(X,[0 255]) 的结果：http://img248.imageshack.us/img248/4140/difference2.png?http: [//imageshack.us/](http://img248.imageshack.us/img248/4140/difference2.png?http://imageshack.us/)

链接到我的 DCM 图像：[http ://www.speedyshare.com/7enTP/x.dcm.zip](http://www.speedyshare.com/7enTP/x.dcm.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:10:12.000

如果您的 DICOM 数据包含颜色图，那么您也应该使用第二个输出将`dicomread`其导入并使用`imshow`. 例子：

```
[X, map] = dicomread('US-PAL-8-10x-echo.dcm');
imshow(X(:,:,1,1),map) 
```

![在此处输入图像描述](../Images/a25fb54893281b796455cb881e378dba.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:06:26.700

`imshow`根据最小和最大强度缩放图像的强度。假设最大强度为 255，请尝试`imshow(X,[0 255]);`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:25:57.957

[您是否尝试过提供文档](http://www.mathworks.com/help/images/ref/dicomread.html)中提到的 DICOM 信息？

```
info = dicominfo('medicalimage.dcm');
Y = dicomread(info);
figure, imshow(Y);
imcontrast; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:52:08.270

DICOM 信息具有高动态范围。图像的标题表明它是 12 位数据。您需要为显示您感兴趣的特征的动态范围部分设置窗口中心和窗口宽度，并计算与该窗口设置对应的最小和最大像素值。一旦确定了这些值，下面的代码将使用动态范围的那部分显示图像。

```
imshow(img, [minPixelValue, maxPixelValue]); 
```

# asp.net-mvc - 在 ASP.NET MVC 测试项目中模拟静态方法

> ID：12783277
> 
> 赞同：3
> 
> 时间：2012-10-08T14:00:14.207
> 
> 标签：asp.net-mvc, unit-testing, asp.net-mvc-4, moq

我有一种方法，如下所示

```
public List<Rajnikanth> GetRajnis()
{
    string username = Utility.Helpers.GetLoggedInUserName();
    return _service.GetRajni(username);
} 
```

Utility.Helper 是一个静态类，public static class Helpers {

```
public static String GetLoggedInUserName()
{
    string username = "";
    if (System.Web.HttpContext.Current.User.Identity.IsAuthenticated)
    {
        username = ((System.Web.Security.FormsIdentity)HttpContext.Current.User.Identity).Ticket.Name;
    }
    return username;

} 
```

}

我想**测试**：GetRajnis()

我想**模拟**：GetLoggedInUserName()

所以我的测试方法看起来像......

```
[TestMethod]
public void TestGetRajnis()
{
    SomeController s = new SomeController(new SomeService());
    var data = s.GetRajnis();
    Assert.IsNotNull(data);
} 
```

如何模拟静态方法 GetLoggedInUserName() ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:23:58.967

## 最简单的方法：覆盖返回值

如果您正在寻找模拟返回值，那么这非常简单。您可以修改`Utility.Helper`该类以包含一个名为`OverrideLoggedInUserName`. 当有人调用`GetLogedInUserName()`时，如果设置了 override 属性，则返回，否则使用正常的从 HttpContext 中获取值的代码来获取返回值。

```
public static class Helper
{
    // Set this value to override the return value of GetLoggedInUserName().
    public static string OverrideLoggedInUserName { get; set; };

    public static string GetLoggedInUserName()
    {
        // Return mocked value if one is specified.
        if ( !string.IsNullOrEmpty( OverrideLoggedInUserName ) )
            return OverrideLoggedInUserName;

        // Normal implementation.
        string username = "";
        if ( System.Web.HttpContext.Current.User.Identity.IsAuthenticated )
        {
            username = ( (System.Web.Security.FormsIdentity)HttpContext.Current.User.Identity ).Ticket.Name;
        }
        return username;
    }
} 
```

这将有效地允许您覆盖返回值，这在技术上不是模拟——它是一个存根*（根据Martin Fowler的优秀文章[Mocks Aren't Stubs](http://martinfowler.com/articles/mocksArentStubs.html)* ） 。这允许您存根返回值，但不允许您断言该方法是否被调用。无论如何，只要您只想操纵返回值，它就可以正常工作。

这是在测试中使用它的方法。

```
[ TestMethod ]
public void TestGetRajnis()
{
    // Set logged in user name to be "Bob".
    Helper.OverrideLoggedInUserName = "Bob";

    SomeController s = new SomeController( new SomeService() );
    var data = s.GetRajnis();

    // Any assertions...
} 
```

这种设计确实有一个缺点。因为它是一个静态类，如果您设置了覆盖值，它会一直保持设置，直到您取消设置它。因此，您必须记住将其重新设置为空。

## 更好的方法：注入依赖

更好的方法可能是创建一个检索登录用户名的类，并将其传递给`SomeController`. 我们称之为[依赖注入](http://martinfowler.com/articles/injection.html)。这样，您可以将模拟实例注入其中进行测试，但在不测试时传递真实实例（从 HttpContext 获取用户）。这是一种更清晰、更清晰的方法。此外，您可以利用所使用的任何模拟框架的所有功能，因为它们是专门为处理这种方法而设计的。这就是它的样子。

```
// Define interface to get the logged in user name.
public interface ILoggedInUserInfo
{
    string GetLoggedInUserName();
}

// Implementation that gets logged in user name from HttpContext. 
// This class will be used in production code.
public class LoggedInUserInfo : ILoggedInUserInfo
{
    public string GetLoggedInUserName()
    {
        // This is the same code you had in your example.
        string username = "";
        if ( System.Web.HttpContext.Current.User.Identity.IsAuthenticated )
        {
            username = ( (System.Web.Security.FormsIdentity)HttpContext.Current.User.Identity ).Ticket.Name;
        }
        return username;
    }
}

// This controller uses the ILoggedInUserInfo interface 
// to get the logged in user name.
public class SomeController
{
    private SomeService _service;
    private ILoggedInUserInfo _userInfo;

    // Constructor allows you inject an object that tells it 
    // how to get the logged in user info.
    public SomeController( SomeService service, ILoggedInUserInfo userInfo )
    {
        _service = service;
        _userInfo = userInfo;
    }

    public List< Rajnikanth > GetRajnis()
    {
        // Use the injected object to get the logged in user name.
        string username = _userInfo.GetLoggedInUserName();
        return _service.GetRajni( username );
    }
} 
```

这是一个使用 Rhino Mocks 将存根对象注入控制器的测试。

```
[ TestMethod ]
public void TestGetRajnis()
{
    // Create a stub that returns "Bob" as the current logged in user name.
    // This code uses Rhino Mocks mocking framework...
    var userInfo = MockRepository.GenerateStub< ILoggedInUserInfo >();
    userInfo.Stub( x => x.GetLoggedInUserName() ).Return( "Bob" );

    SomeController s = new SomeController( new SomeService(), userInfo );
    var data = s.GetRajnis();

    // Any assertions...
} 
```

这里的缺点是您不能只`Helper.GetLoggedInUserName()`从代码中的任何位置调用，因为它不再是静态的。但是，您不再需要在每次完成测试时重置存根用户名。因为它不是静态的，所以它会自动重置。您只需为下一次测试重新创建它并设置一个新的返回值。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:04:29.877

如果您正在寻找可测试性，请摆脱静态类。现在一个简单的解决方法是围绕静态类创建一个包装器。除非您使用 TypeMock 之类的东西或同样强大的东西，否则您无法更改静态类的逻辑。我也不建议这样做。如果你必须存根一个静态类，它可能不应该是一个静态类。

```
public class StaticWrapper
{
    public virtual String GetLoggedInUserName()
    {
        Utility.Helpers.GetLoggedInUserName();
    }
} 
```

# jquery - 如果我将两个事件绑定到两个不同对象的主体，我可以单独取消绑定它们吗？

> ID：12783279
> 
> 赞同：0
> 
> 时间：2012-10-08T14:00:18.317
> 
> 标签：jquery

我正在捕捉身体上的点击事件以获得灯箱效果。

许多灯箱可以一次打开。

当我关闭其中一个时，我希望他们各自的处理程序死掉。

但是因为它们都绑定到“身体”，一个 unbind 调用，将它们全部解绑。

```
$('body').bind('click', function(){ HelperPopup.mouseup_handler($el, mouse_is_inside);  });

//  .. then later ..

mouseup_handler: function($el, mouse_is_inside) {

    $el.fadeOut(100);
    $('body').unbind('click', HelperPopup.mouseup_handler($el) );
    return false;
  };          
}, 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:08:24.850

您有两个选择：命名空间事件类型，以及通过引用处理程序解除绑定。

命名空间事件类型：

```
$(selector).on('click.mynamespace', somehandler);
...
$(selector).off('click.mynamespace'); 
```

通过引用解除绑定：

```
$(selector).on('click', somehandler);
...
$(selector).off('click', somehandler); 
```

显然，您需要保存对您附加的实际处理程序的引用，因此使用匿名函数不太方便。

**更新：**更改答案以使用推荐的`on`/ `off`jQuery 方法。

# c++ - 哪个 C++ 标头包含其他哪些标头？

> ID：12783280
> 
> 赞同：4
> 
> 时间：2012-10-08T14:00:20.233
> 
> 标签：c++, stream, include, static-libraries

我对哪个标准库曾经包含哪个其他标准库感到困惑。我听说`iostream`包括`ostream`或类似的东西。不幸的是，我找不到概述。这就是我现在问的原因。

我的程序使用以下库：string, `fstream`, `iostream`, `sstream`, `streambuf`. 因为它们提供了相关的功能，所以我想知道其中是否已经包含其他功能。在这种情况下，我可以摆脱多余的包含。

**是否有概述表明哪个标准库包含哪些？**或者 **我的程序中的哪些库用户是多余的？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:04:11.550

C++ 通常不为任何类型的递归包含提供任何保证。您有责任*始终包含您需要的所有标题*。同样，它不保证*不*包含任何特定的标准库头文件。（例如，您的实现可以合法地始终包含所有标准库头！）这就是为什么 - 因为一切都在`std`命名空间中。

（我相信 C 库头文件有一个特殊规定——我认为除非您明确包含这些头文件，否则您*不会在全局命名空间中获得名称。）*

一些标头确实有特定要求；例如，在 C++11（但不是之前）中，需要同时`<iostream>`包含`<ostream>`和`<istream>`。但这只是一种特殊情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:04:45.987

您不能依赖任何其他标头包含的任何标头。最好明确包含您需要的所有内容。这样，如果您更改编译器，则可以确保不会中断编译，以防新编译器没有相同的头包含结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:03:32.830

这可能会有所帮助：[http](http://www.cplusplus.com/reference/iostream/iostream/) : //www.cplusplus.com/reference/iostream/iostream/ iostream 继承自 ostream 和 istream。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T14:07:08.283

我的规则：`#include`你正在使用什么。如果你正在使用`std::string`，你需要`#include <string>`。如果你正在使用`std::cout`，你需要`#include <iostream>`。如果您使用的是文件流，`#include <fstream>`. 等等。

您*可能*`std::string`从您包含的其他一些系统标头中“免费”获得是无关紧要的。不要依赖那些幕后的人包括在内。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T14:34:24.343

如果您担心重复包含，它们将通过宏处理，例如

#ifndef MACRO_NAME #define MACRO_NAME

＃万一

所以你不需要担心多个包含我猜。

# php - 如何使 PHP 中的 SQL 查询更具可读性？

> ID：12783282
> 
> 赞同：19
> 
> 时间：2012-10-08T14:00:37.700
> 
> 标签：php, mysql, readability, code-readability

当 SQL 查询中的字段很长时，如何使其更具可读性？

例如：

```
public function findSomethingByFieldNameId($Id) {
        $sql = "SELECT field1, field2, field3 as Field3_Something, field4, field5, field6, field7, field8, field9
                      FROM table
               JOIN table2 AS TNS ON TNS.id = table.id
                      WHERE something = 1";
 return $this->db->fetchData($sql, null, 'all');
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-08T14:04:49.593

我更喜欢 Heredoc 语法，尽管 Nowdoc 也适用于您的示例：

赫雷多克：

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

Nowdoc： [http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

两者的优点是您可以直接在该块中复制和粘贴 SQL，而无需对其进行转义或格式化。如果您需要包含解析，例如处理双引号字符串中的变量，您将使用 Heredoc。Nowdoc 的行为类似于单引号。

**诺德克：**

```
public function findSomethingByFieldNameId($Id) {
    $sql = <<<'SQL'
    SELECT field1, field2, field3 as Field3_Something, field4, field5, field6, field7, field8, field9
    FROM table
    JOIN table2 AS TNS ON TNS.id = table.id
    WHERE something = 1
SQL;

    return $this->db->fetchData($sql, null, 'all');
} 
```

**赫雷多克：**

```
public function findSomethingByFieldNameId($Id) {
    $sql = <<<SQL
    SELECT field1, field2, field3 as Field3_Something, field4, field5, field6, field7, field8, field9
    FROM table
    JOIN table2 AS TNS ON TNS.id = table.id
    WHERE something = '$Id'
SQL;

    $sql = mysql_real_escape_string($sql);

    return $this->db->fetchData($sql, null, 'all');
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T14:03:08.863

您可以像这样连接它以使其更具可读性：

```
$sql = "SELECT field1, field2, field3 as Field3_Something,";
$sql.= " field4, field5, field6, field7, field8, field9";
$sql.= " FROM table JOIN table2 AS TNS ON TNS.id = table.id";
$sql.= " WHERE something = 1"; 
```

**注意**：确保在连接查询时，不要忘记在双引号之间开始新行之前留下空格，否则会出现查询无效错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:03:37.633

```
 $sql = "SELECT field1,
                field2,
                field3 as Field3_Something,
                field4,....
         FROM table
         JOIN table2 AS TNS ON TNS.id = table.id
         WHERE something = 1"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-16T16:53:48.743

这只是另一种方式。

请注意，数组连接比字符串连接快。

```
$sql = join(" \n", Array(
    'SELECT ',
    '    [...fields...]',
    '    [...more fields...]',
    'FROM table',
    'JOIN table2 AS TNS ON TNS.id = table.id',
    'WHERE something = 1',
)); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T13:03:46.027

```
<?php
   public function findSomethingByFieldNameId($Id) {
        $sql = "SELECT 
                    field1, 
                    field2, 
                    field3 as Field3_Something, 
                    field4, 
                    field5, 
                    field6, 
                    field7, 
                    field8, 
                    field9
                FROM 
                    table
                JOIN table2 AS TNS 
                    ON TNS.id = table.id
                WHERE 
                    something = 1";
        return $this->db->fetchData($sql, null, 'all');
}
?> 
```

# java - 并发使用 JaxWsPortProxyFactoryBean

> ID：12783286
> 
> 赞同：1
> 
> 时间：2012-10-08T14:00:54.143
> 
> 标签：java, web-services, spring, concurrency, endpoint

我正在使用`JaxWsPortProxyFactoryBean`（Spring 3.1.2）访问远程 Web 服务。在文档中，我找不到任何关于`JaxWsPortProxyFactoryBean`. 是否允许与 from 线程同时使用它？如果是这样，是否可以动态更改端点地址，以便不同的线程可以为相同的端点使用不同的端点`JaxWsPortProxyFactoryBean`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:07:16.460

关于并发使用可以看： [JaxWsPortProxyFactoryBean.setExecutor(java.util.concurrent.Executor)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/remoting/jaxws/LocalJaxWsServiceFactory.html#setExecutor%28java.util.concurrent.Executor%29) 和[JaxWsPortProxyFactoryBean.setTaskExecutor(org.springframework.core.task.TaskExecutor)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/remoting/jaxws/LocalJaxWsServiceFactory.html#setTaskExecutor%28org.springframework.core.task.TaskExecutor%29)

并且还存在方法[JaxWsPortProxyFactoryBean.setWsdlDocumentUrl(String)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/remoting/jaxws/LocalJaxWsServiceFactory.html#setWsdlDocumentUrl%28java.net.URL%29)但它不是线程保存

# regex - django url、正则表达式和可选参数的问题

> ID：12783288
> 
> 赞同：0
> 
> 时间：2012-10-08T14:00:59.517
> 
> 标签：regex, django-urls

无法让我的网址正则表达式工作：-/

我正在尝试做：

```
url(r'^staff/course/(?P<object_id>\d+)(?P<optional>\.*)$' 
```

它应该能够将“staff/course/34”指向 my_view 以及将“staff/course/34.json”指向同一个视图。

我认为这是“。” 部分我错了。

你能看出我哪里做错了吗？

亲切的问候。

皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:16:09.007

你最后错过了正则表达式元字符`.`。它应该是

```
r'^staff/course/(?P<object_id>\d+)(?P<optional>\..*)$' 
```

# javascript - 使用 Google CSE v2 时是否可以注册搜索结果回调？

> ID：12783290
> 
> 赞同：8
> 
> 时间：2012-10-08T14:01:00.090
> 
> 标签：javascript, google-custom-search

在 Google 的自定义搜索引擎代码的第一版 (v1) 中，有一个方法被调用`.setSearchCompleteCallback`，它允许您在搜索结果返回时调用一些 Javascript。可以在[此处](https://developers.google.com/custom-search/docs/js/cselement-reference)找到该代码的文档。

搜索引擎对象已从`google.search.CustomSearchControl`v1 移至`google.search.cse.element`v2。

当前[版本（v2）](https://developers.google.com/custom-search/docs/element#cse-element)似乎没有该`.setSearchCompleteCallback`方法，并且我看不到在搜索结果完成时注册回调的方法。我已经尝试使用 Jquery 的 ajaxStart 和 ajaxEnd 方法取得不同程度的成功，但我想知道 Google CSE 代码中是否有“官方”方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-16T20:09:39.980

不优雅，但我能找到的唯一东西。

我知道人们会评论使用永无止境的间隔，但在找到更好的解决方案之前，这就是我们所拥有的。

```
setInterval(function () {
    var resultInfo = $('.gsc-result:first');
    if (resultInfo.length && !resultInfo.data('isOld')) {
        resultInfo.data('isOld', true);

        console.log('new results');
    }
}, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T04:34:54.403

您可以通过使用 MutationObserver 查看结果 HTML 代码来确定搜索结果已更改。

```
// Where to put search results
var resultsElement = document.getElementById('results');

// Creating results box
window.google.search.cse.element.render({
    div: resultsElement,
    tag: 'searchresults-only',
    attributes: {
        overlayResults: false
    }
});

// Watching the "new results" event
var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;
new MutationObserver(function(mutations) {
    for (var i = 0; i < mutations.length; ++i) {
        if (mutations[i].target.classList.contains('gsc-results')) {
            console.log('Search complete!');
            break;
        }
    }
}).observe(resultsElement, {
    subtree:       true,
    attributes:    false,
    childList:     true,
    characterData: false
}); 
```

它和 V1 的搜索完成回调一样好用。旧浏览器不支持`MutationObserver`，但您可以使用[polyfill](https://github.com/megawac/MutationObserver.js)来启用它。

# xcode - XCode 4.5 文档屏幕遮盖了主项目屏幕

> ID：12783299
> 
> 赞同：1
> 
> 时间：2012-10-08T14:01:27.137
> 
> 标签：xcode

我是第一次使用 xCode - 自 1986 年以来，我使用过其他 IDE（turboPascal、JBuilder、Eclipse、NetBeans、Tibco BW ......），但对于不熟悉的 Xcode 来说似乎达到了新的尴尬水平。

每次我访问帮助（例如“API 文档帮助”）时，文档屏幕都会遮盖所有其他窗口。大概有一个魔术键可以关闭文档屏幕并将我返回到主项目屏幕。（就像浏览器中的后退按钮）。我尝试了很多组合键。

有没有一把神奇的钥匙可以让你回到“原来的样子”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:03:53.353

您可以在“系统偏好设置”→“键盘”→“键盘快捷方式”中设置在活动应用程序的窗口之间切换的快捷方式。我更喜欢`Alt`+ `Tab`。

这将允许您使用快捷方式在文档和编辑器窗口之间切换。您也可以使用`Cmd`+`W`关闭文档窗口。

![在此处输入图像描述](../Images/c59c0e52c43d6ad2ee447928ea860cbd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:07:32.143

使用**command + ~** 在视图之间切换，这适用于 macosx 上的每个应用程序。

# javascript - 如何仅使用 l 和 I 对 js 代码进行编码

> ID：12783301
> 
> 赞同：0
> 
> 时间：2012-10-08T14:01:38.220
> 
> 标签：javascript, encode

最近，我发现了一个 chrome 扩展[Session Buddy](https://chrome.google.com/webstore/detail/session-buddy/edacconmaakjimmfgnblocblbcdcpbko)。我想研究一下这个扩展的js代码。但是 css 和 js 文件中的变量只能由`l`和构造`I`。代码不可读。

于是我谷歌找了一些工具改js代码不可读。但失败了。

*   我想知道哪些工具可以做到这一点。
*   我想知道是否有工具可以猜出原始文件（一些流行的js库）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:06:55.763

许多开发人员希望保护他们的工作并使用“代码混淆器”使代码不可读。

谷歌搜索“javascript deobfuscate”以获得可以恢复（部分）损害的工具列表。[jsbeautifier](http://jsbeautifier.org/)就是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:07:18.660

该代码很可能已被缩小（这会减小文件大小并使其不可读）。您可以使用此站点来缩小您的代码：[http](http://dean.edwards.name/packer/) ://dean.edwards.name/packer/ 您可以检查**Base62 Encode**选项以进一步混淆代码。

为了使缩小的代码更具可读性，请使用 Javascript 美化器：http: [//jsbeautifier.org/](http://jsbeautifier.org/)

# cloudbees - 需要一个特定的电子邮件给 FOSS？

> ID：12783305
> 
> 赞同：2
> 
> 时间：2012-10-08T14:01:46.787
> 
> 标签：cloudbees

我已经有一个 cloudbees 的免费用户帐户。

现在我需要设置我批准的 FOSS 项目的帐户。我不能为此使用我的个人电子邮件。这意味着我需要为开源项目创建一个特定的电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:43:57.107

如果您愿意，我们 (cloudbees) 也可以将您的免费帐户转换为 FOSS。然后请回复您要求转换的批准电子邮件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:14:34.917

如果地址包含帐户名称后跟一些分隔符和一些任意字符，许多电子邮件提供商（例如 Google）会将电子邮件发送到帐户。

因此，如果您的电子邮件地址是 foo@gmail.com，您将收到来自 foo+1@gmail.com、foo+abc@gmail.com 等的邮件。这样，您可以在 CloudBees 上创建多个唯一帐户，这些帐户都映射到单个电子邮件收件箱。

[http://lifehacker.com/144397/instant-disposable-gmail-addresses](http://lifehacker.com/144397/instant-disposable-gmail-addresses)

这可能适用于所有其他网络邮件提供商，但这是一个猜测。

# html - HTML5 网络摄像头提要，尝试在计时器上将图像绘制到画布上

> ID：12783311
> 
> 赞同：3
> 
> 时间：2012-10-08T14:02:04.133
> 
> 标签：html, html5-canvas

我试图每 250 毫秒将视频源（帧）绘制到画布中，但画布没有获得任何图像数据。这是我到目前为止所做的，我可以从网络摄像头获取视频源，如果我在下面的代码中做错了什么，请提出建议：

```
 <div>
   <video id="live" width="320" height="240" autoplay style="border:5px solid #000000">  </video>
   <canvas width="320" id="canvas" height="240" style="border:5px solid #000000"> </canvas>
   <button id="btn" onclick="start()">Start</button>
    </div>

    <script>
    var video = document.getElementById("live");
    var canvas = document.getElementById("canvas");
    var ctx = canvas.get()[0].getContext('2d');//changed this line to "canvas.getContext('2d')".

    function start() {
    navigator.webkitGetUserMedia({video:true}, gotStream, function() {}); 
    btn.disabled = true;
    }
    function gotStream(stream) {
    video.src = webkitURL.createObjectURL(stream);
    }

    timer = setInterval(
        function () {
            ctx.drawImage(video, 0, 0, 320, 240);
        }, 250);
    </script> 
```

任何帮助表示赞赏，我正在尝试分析在画布上接收到的图像是否适合流式传输到 Web 服务器或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:50:13.623

将线路从

```
var ctx = canvas.get()[0].getContext('2d'); 
```

到

```
var ctx = canvas.getContext('2d'); 
```

解决了这个问题。谢谢。

# postgresql - 我可以在 PostgreSQL 中获得 CSV 标头但没有行数吗？

> ID：12783314
> 
> 赞同：16
> 
> 时间：2012-10-08T14:02:13.027
> 
> 标签：postgresql, csv, formatting

当我这样做时`psql --no-align --field-separator ','`，我会得到 CSV 输出，其中包含一个包含字段名称的标题和一个告诉我找到了多少行的预告片。要将其传递给分析程序，我需要标题而不是预告片。我当然可以编写一个过滤器来传递 psql 输出的前 N-1 行，但我更愿意抑制预告片。是否有我缺少的选项可以打开标题`--tuples-only`或关闭预告片？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-09T08:20:02.937

`psql --no-align --field-separator ',' --pset footer`将关闭行摘要页脚

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:08:35.867

我发现

```
COPY (...query...) TO STDOUT WITH CSV HEADER; 
```

在[http://blogs.law.harvard.edu/dlarochelle/2011/12/11/outputing-to-csv-in-postgresql/](http://blogs.law.harvard.edu/dlarochelle/2011/12/11/outputing-to-csv-in-postgresql/)。

没有它似乎不起作用，`TO STDOUT`但我可以使用它。

# grails - 在表格列中查找最大值

> ID：12783318
> 
> 赞同：12
> 
> 时间：2012-10-08T14:02:20.577
> 
> 标签：grails

我正在 Grails 中创建一个版本控制域类：

```
class VersionControl {

    Date dateCreated
    Long versionNumber

    Long getLatestVersionNumber() {
        //return largest versionNumber
    }

} 
```

我想添加一个查询来获取存储的最大版本号：

```
Long getLatestVersionNumber() 
```

在 SQL 中，此查询或多或少如下所示：

```
SELECT TOP 1 MAX(versionNumber) FROM VersionControl 
```

该函数必须以 long 形式返回值。

在 Grails 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-08T14:11:58.330

您可以使用[GORM 标准](http://grails.org/doc/latest/guide/GORM.html#criteria)，使用投影进行查询：

```
VersionControl.createCriteria().get {
    projections {
        max "versionNumber"
    }
} as Long 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-21T06:43:43.327

```
VersionControl.executeQuery("select max(versionNumber) from VersionControl") 
```

这对我来说更容易理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:08:48.883

VersionControl.find("来自 VersionControl vc max(vc.versionNumber)")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T09:55:07.530

要在查询中计算最大值，我认为最好的是条件选项：

```
def maxVersion = VersionControl.withCriteria {
    projections{
        max 'versionNumber'
    }

} 
```

如果你想添加一个 groupby 修饰符，只需在 projections 闭包中添加一个新行，如下所示：

```
VersionControl.withCriteria {
    projections{
        avg 'score'
        groupProperty 'channelId'
    }

} 
```

# python - PDB.run - 重新启动一个 pdb 会话

> ID：12783321
> 
> 赞同：13
> 
> 时间：2012-10-08T14:02:29.173
> 
> 标签：python, pdb

我对 python 和 pdb 比较陌生，但是我对 gdb 有很多经验。

我的问题是，如果我在某个时间点在我的代码中设置了多个断点，我将想要更改某些内容并重新运行我的调试会话并保留这些断点。但是在我的 pdb 会话中输入“运行”会导致我的会话以以下输出终止

```
(Pdb) run
  Traceback (most recent call last):
  File "/usr/lib64/python2.6/runpy.py", line 122, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib64/python2.6/runpy.py", line 34, in _run_code
    exec code in run_globals
  File "/usr/lib64/python2.6/pdb.py", line 1319, in <module>
    pdb.main()
  File "/usr/lib64/python2.6/pdb.py", line 1312, in main
    pdb.interaction(None, t)
  File "/usr/lib64/python2.6/pdb.py", line 198, in interaction
    self.cmdloop()
  File "/usr/lib64/python2.6/cmd.py", line 142, in cmdloop
    stop = self.onecmd(line)
  File "/usr/lib64/python2.6/pdb.py", line 267, in onecmd
    return cmd.Cmd.onecmd(self, line)
  File "/usr/lib64/python2.6/cmd.py", line 219, in onecmd
    return func(arg)
  File "/usr/lib64/python2.6/pdb.py", line 661, in do_run
    raise Restart
pdb.Restart
]$ 
```

我已经在两个独立的 linux 平台上尝试过这个并且得到了相同的结果，但是我在文档中找不到任何更正。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T16:04:22.923

因此，如果有人关心问题是 pdb 中的“运行”与 gdb 中的“运行”不完全相同。在 gdb 中，如果我输入 run，程序将重新启动并继续到第一个断点。在 pdb 中，程序重新启动并转到文件的开头。然后我必须按“n”，然后按“c”才能到达第一个断点。如果试图让程序运行，我在文件开头再次键入 run，调试器会崩溃，如上所示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-10T11:09:55.153

这是我的文件**test.py**：

```
import pdb
pdb.set_trace()
print('1 line') 
```

当我使用命令'python3 test.py'时，我得到了同样的错误：

```
> /home/wangpq/program_note/test.py(3)<module>()
-> print('1 line')
(Pdb) run
Traceback (most recent call last):
  File "program_note/test.py", line 3, in <module>
    print('1 line')
  File "program_note/test.py", line 3, in <module>
    print('1 line')
  File "/usr/lib/python3.5/bdb.py", line 48, in trace_dispatch
    return self.dispatch_line(frame)
  File "/usr/lib/python3.5/bdb.py", line 66, in dispatch_line
    self.user_line(frame)
  File "/usr/lib/python3.5/pdb.py", line 259, in user_line
    self.interaction(frame, None)
  File "/usr/lib/python3.5/pdb.py", line 346, in interaction
    self._cmdloop()
  File "/usr/lib/python3.5/pdb.py", line 319, in _cmdloop
    self.cmdloop()
  File "/usr/lib/python3.5/cmd.py", line 138, in cmdloop
    stop = self.onecmd(line)
  File "/usr/lib/python3.5/pdb.py", line 412, in onecmd
    return cmd.Cmd.onecmd(self, line)
  File "/usr/lib/python3.5/cmd.py", line 217, in onecmd
    return func(arg)
  File "/usr/lib/python3.5/pdb.py", line 1022, in do_run
    raise Restart
pdb.Restart 
```

然后我使用命令'python3 -m pdb test.py'

```
wangpq@wangpq:~$ python3 -m pdb program_note/test.py
> /home/wangpq/program_note/test.py(1)<module>()
-> import pdb
(Pdb) restart
Restarting program_note/test.py with arguments:
    program_note/test.py
> /home/wangpq/program_note/test.py(1)<module>()
-> import pdb
(Pdb) 
```

**它有效**。到目前为止，我不确定为什么会发生这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-03T22:07:59.440

Upon encountering an abnormal condition (i.e., a bug in your program), pdb rather helpfully says:

```
Uncaught exception. Entering post mortem debugging 
Running 'cont' or 'step' will restart the program 
```

Here, typing "run" or "restart" will cause the pdb process to unceremoniously terminate as OP states (but "cont" or "step" will restart as promised).

Presumably many impatient pythonistas would rather "run" or "restart" work regardless of whether we've entered "post mortem debugging" but I'm sure the existing restart semantics is the byproduct of a cleaner implementation.

# android - 如何在布局中编辑surfaceView？

> ID：12783322
> 
> 赞同：0
> 
> 时间：2012-10-08T14:02:28.487
> 
> 标签：android

我有以下

```
<SurfaceView 
    android:id="@+id/hero3"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:scaleType="centerInside"
    android:layout_marginLeft="5.33dp"
    android:layout_toRightOf="@id/hero2"
    /> 
```

在我的布局文件中。如何编辑 SurfaceView 的属性？或在其中编辑/绘制图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:07:29.410

您不能从布局文件在 SurfaceView 中绘制图像。您需要从您的活动中获取 SurfaceView 的引用，如下所示：

```
SurfaceView sv = (SurfaceView) findViewById(R.id.hero3); 
```

此外，您不能从布局中修改 SurfaceView 的 SurfaceView 特定属性。如果您查看[文档](http://developer.android.com/reference/android/view/SurfaceView.html)，SurfaceView 仅有的 XML 属性是 View 提供的。您可以使用上面的参考从代码中修改 SurfaceView 的特定属性。例如：

```
sv.setZOrderOnTop(true); 
```

在 SurfaceView 上绘图稍微复杂一些，您应该[权衡使用 SurfaceView 而不是常规 View 的好处](https://stackoverflow.com/questions/1243433/android-difference-between-surfaceview-and-view)。如果您决定 SurfaceView 是您所需要的，请查看本[教程关于使用 SurfaceViews](http://www.youtube.com/watch?v=Z2YogvILjvo)

# linux - 在 bash 中读取 CSV 文件

> ID：12783324
> 
> 赞同：2
> 
> 时间：2012-10-08T14:02:31.420
> 
> 标签：linux, bash, shell, csv

我需要在 shell 中读取 CSV 文件，我可以接受单元格中包含单行的 CSV 文件。但是如果我们在 CSV 文件的单元格中有多行，那么我无法分隔 CSV 文件。

```
Filename            Lines
/etc/hosts          example.test.com
                    example2.test.com
/etc/resolv.conf    nameserver dns.test.com
                    search test.com 
```

我将在 CSV 文件中从用户那里获取输入，并且必须将给定的行添加到提到的文件中。在这里，CSV 文件的每个单元格中都有多行，如果我尝试对文件进行分类，它会以不同的顺序给出。

```
[user2@mon ~]$ cat test2.csv
"Filename","Lines"
"/etc/hosts","example.test.com"
,"example2.test.com"
"/etc/resolv.conf","nameserver dns.test.com"
,"search test.com" 
```

有什么方法可以从该文件中读取多行，并且行数始终不一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:57:45.690

假设您的输入与您的示例一样基本，您可能只需执行以下操作即可逃脱：

```
sed 's/^,/ ,/' test2.csv | tr -d \" | column -s, -t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:18:12.980

这可能是你所追求的：

```
awk -F, '{ sub(/^"/, "", $1); sub(/"$/, "", $1);
           sub(/^"/, "", $2); sub(/"$/, "", $2);
           printf "%-20s  %s\n", $1, $2;
         }' 
```

如果您花更多时间手动抨击，则很有可能压缩替代操作。这是一个脆弱的解决方案（大多数不使用专门用于处理 CSV 格式的代码的解决方案都是脆弱的）；如果逗号出现在任何引号括起来的字段中，它会严重失败。

应用于您的数据，它会产生：

```
Filename              Lines
/etc/hosts            example.test.com
                      example2.test.com
/etc/resolv.conf      nameserver dns.test.com
                      search test.com 
```

可靠地操作 CSV 格式数据的其他可能工具包括：

*   Perl 加[Text::CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV)模块
*   [`csvfix`](http://code.google.com/p/csvfix/).

如果这不是您要查找的内容，请澄清问题。

# xslt - 使用 xslt 将 xml 转换为 xml

> ID：12783330
> 
> 赞同：1
> 
> 时间：2012-10-08T14:02:41.973
> 
> 标签：xslt, xslt-1.0

我需要将 XML 传递给第三方系统，第三方系统可以理解并解析它。

下面是我通过从数据库中获取数据来创建数据的输入 xml。

```
<FIXML>
    <Header>
        <RequestID>ReqID8942</RequestID>
        <RequestType>DocGen</RequestType>
        <Version>10.6</Version>
        <BankId>01</BankId>
        <ChannelId>LOS</ChannelId>
    </Header>
    <Body>
        <Data>
            **<CorpAppLimitDetailsBO>
            <ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
            <ApprovedLimitCCY>INR</ApprovedLimitCCY>
            <ApprovedLimit>100.0</ApprovedLimit>
            <LimitClassification>ROOT</LimitClassification>
        </CorpAppLimitDetailsBO>
        <CorpAppLimitDetailsBO>
            <ApprovedLimitHomeCCY>0.0</ApprovedLimitHomeCCY>
            <ApprovedLimitCCY/>
            <ApprovedLimit>500.0</ApprovedLimit>
            <LimitClassification>CLASSIFICATION1</LimitClassification>
        </CorpAppLimitDetailsBO>
        <CorpAppLimitDetailsBO>
            <ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
            <ApprovedLimitCCY>INR</ApprovedLimitCCY>
            <ApprovedLimit>100.0</ApprovedLimit>
            <LimitClassification>CLASSIFICATION1</LimitClassification>
        </CorpAppLimitDetailsBO>
        <CorpAppProductDetailsBO>
            <ProductCategory>3</ProductCategory>
        </CorpAppProductDetailsBO>
        <CorpAppProductDetailsBO>
            <ProductCategory>1</ProductCategory>
        </CorpAppProductDetailsBO>
        <CorpAppProductDetailsBO>
            <ProductCategory>2</ProductCategory>
            </CorpAppProductDetailsBO>**
            <TemplateDetails>
                <Template>tempid001</Template>
            </TemplateDetails>
            <SelectedClauses>
                <Clauses>
                    <Clause>clause1</Clause>
                </Clauses>
                <Clauses>
                    <Clause>clause2</Clause>
                </Clauses>
                <Clauses>
                    <Clause>clause3</Clause>
                </Clauses>
            </SelectedClauses>
            <Distribution>
                <Email>email1@domain.com,email2@domain.com,email3@domain.com</Email>
                <Print>blrkec3030,blrkec3031</Print>
            </Distribution>
        </Data>
    </Body>
</FIXML> 
```

我想使用 XSLT 将此输入 XML 转换为另一种 XML 格式。

以下是我需要的格式，

```
<FIXML>
    <Header>
        <RequestID>ReqID8942</RequestID>
        <RequestType>DocGen</RequestType>
        <Version>10.6</Version>
        <BankId>01</BankId>
        <ChannelId>LOS</ChannelId>
    </Header>
    <Body>
        <Data>
            **<LimitDetails>
            <Limit>
                <ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
                <ApprovedLimitCCY>INR</ApprovedLimitCCY>
                <ApprovedLimit>100.0</ApprovedLimit>
                <LimitClassification>ROOT</LimitClassification>
            </Limit>
            <Limit>
                <ApprovedLimitHomeCCY>0.0</ApprovedLimitHomeCCY>
                <ApprovedLimitCCY/>
                <ApprovedLimit>500.0</ApprovedLimit>
                <LimitClassification>CLASSIFICATION1</LimitClassification>
            </Limit>
            <Limit>
                <ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
                <ApprovedLimitCCY>INR</ApprovedLimitCCY>
                <ApprovedLimit>100.0</ApprovedLimit>
                <LimitClassification>CLASSIFICATION1</LimitClassification>
            </Limit>
        </LimitDetails>
        <ProductDetails>
            <Product>
                <ProductCategory>3</ProductCategory>
            </Product>
            <Product>
                <ProductCategory>1</ProductCategory>
            </Product>
            <Product>
                <ProductCategory>2</ProductCategory>
            </Product>
            </ProductDetails>**
            <TemplateDetails>
                <Template>tempid001</Template>
            </TemplateDetails>
            <SelectedClauses>
                <Clauses>
                    <Clause>clause1</Clause>
                </Clauses>
                <Clauses>
                    <Clause>clause2</Clause>
                </Clauses>
                <Clauses>
                    <Clause>clause3</Clause>
                </Clauses>
            </SelectedClauses>
            <Distribution>
                <Email>email1@domain.com,email2@domain.com,email3@domain.com</Email>
                <Print>blrkec3030,blrkec3031</Print>
            </Distribution>
        </Data>
    </Body>
</FIXML> 
```

请帮帮我，因为我必须在另外 2 天的时间内完成任务。

我尝试使用下面的代码，但我得到了低于输出的结果，但其余的标签，例如`<FIXML> , <TemplateDetails>`等，并没有作为输出 xml 的一部分出现。

xsl代码如下：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:output indent="yes" />    <!-- This identity template copies the document -->
    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*" />
        </xsl:copy>
    </xsl:template>

    <!--
        This template will only match the 'CorpAppLimitDetailsBO' 
        nodes and modify them the way you want.
    -->

<xsl:template match="/*">
        <xsl:element name="LimitDetails">
            <xsl:for-each select="//CorpAppLimitDetailsBO">
                <xsl:element name="Limit">
                    <xsl:for-each select="*">
                        <xsl:copy-of select="." />
                    </xsl:for-each>
                </xsl:element>
            </xsl:for-each>
        </xsl:element>
        <xsl:element name="ProductDetails">
            <xsl:for-each select="//CorpAppProductDetailsBO">
                <xsl:element name="Product">
                    <xsl:for-each select="*">
                        <xsl:copy-of select="." />
                    </xsl:for-each>
                </xsl:element>
            </xsl:for-each>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

下面的输出.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LimitDetails>
<Limit>
<ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
<ApprovedLimitCCY>INR</ApprovedLimitCCY>
<ApprovedLimit>100.0</ApprovedLimit>
<LimitClassification>ROOT</LimitClassification>
</Limit>
<Limit>
<ApprovedLimitHomeCCY>0.0</ApprovedLimitHomeCCY>
<ApprovedLimitCCY/>
<ApprovedLimit>500.0</ApprovedLimit>
<LimitClassification>CLASSIFICATION1</LimitClassification>
</Limit>
<Limit>
<ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
<ApprovedLimitCCY>INR</ApprovedLimitCCY>
<ApprovedLimit>100.0</ApprovedLimit>
<LimitClassification>CLASSIFICATION1</LimitClassification>
</Limit>
</LimitDetails>
<ProductDetails>
<Product>
<ProductCategory>3</ProductCategory>
</Product>
<Product>
<ProductCategory>1</ProductCategory>
</Product>
<Product>
<ProductCategory>2</ProductCategory>
</Product>
</ProductDetails> 
```

注意：我在 BO（例如 CorpAppLimitDetailsBO）标签下显示的子标签（例如，egApprovedLimitHomeCCY....）是动态的。我不应该在 xsl 中硬编码。我是 XSLT 的新手。请帮帮我。

感谢 Shil 和 Sean 的解决方案。两者都非常适合我的要求。但我现在还有一个疑问。我在下面添加了一个子`<DBApplicantMiscDetails>`标签

```
<CorpAppProductDetailsBO> 
```

输入xml：

```
 <CorpAppProductDetailsBO>
    <ProductCategory>2</ProductCategory>
        <DBApplicantMiscDetails>
            <APPLICANTMISCID>400000</APPLICANTMISCID>
            <APPLICANTID>400030</APPLICANTID>
            <MISCTYPE>APPLIED</MISCTYPE>
        </DBApplicantMiscDetails>
   </CorpAppProductDetailsBO> 
```

以下是我期望的输出格式。

```
<ProductDetails>
<Product>
 <ProductCategory>2</ProductCategory>
 <APPLICANTMISCID>400000</APPLICANTMISCID>
 <APPLICANTID>400030</APPLICANTID>
 <MISCTYPE>APPLIED</MISCTYPE>
</Product>
</ProductDetails> 
```

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:49:10.513

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />
<xsl:key name="kDetails" match="*
   [starts-with(name(),'CorpApp') and
    substring(name(), string-length(name()) - 8) = 'DetailsBO']"
         use="substring-before(name(),'DetailsBO')" />

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="*[*[key('kDetails',substring-before(name(),'DetailsBO'))]]">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="*[generate-id() =
    generate-id(key('kDetails',
     substring-before(name(),'DetailsBO'))[1])]" mode="group" />
    <xsl:apply-templates select="*[not(
       key('kDetails',substring-before(name(),'DetailsBO')))]
       |comment()|processing-instruction()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="*" mode="group">
  <xsl:variable name="group-name" select="substring-after(substring-before(name(),'DetailsBO'),'CorpApp')" />
  <xsl:element name="{$group-name}Details">
   <xsl:for-each select="key('kDetails',substring-before(name(),'DetailsBO'))">
     <xsl:element name="{$group-name}">
       <xsl:apply-templates select="@*|node()"/>
     </xsl:element>
   </xsl:for-each>  
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:53:30.217

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <xsl:apply-templates select="FIXML"/>
    </xsl:template>
    <xsl:template match="FIXML">
        <FIXML>
            <xsl:apply-templates select="Header"/>
            <xsl:apply-templates select="Body"/>
        </FIXML>
    </xsl:template>
    <xsl:template match="Header">
        <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template match="Body">
        <Body>
            <xsl:apply-templates select="Data"/>
        </Body>
    </xsl:template>
    <xsl:template match="Data">
        <Data>
            <LimitDetails>
                <xsl:apply-templates select="CorpAppLimitDetailsBO"/>
            </LimitDetails>
            <ProductDetails>
                <xsl:apply-templates select="CorpAppProductDetailsBO"/>
            </ProductDetails>
            <xsl:apply-templates select="TemplateDetails"/>
            <xsl:apply-templates select="SelectedClauses"/>
            <xsl:apply-templates select="Distribution"/>
        </Data>
    </xsl:template>
    <xsl:template match="CorpAppLimitDetailsBO">
        <Limit>
            <xsl:copy-of select="child::*"/>
        </Limit>
    </xsl:template>
    <xsl:template match="CorpAppProductDetailsBO">
        <xsl:apply-templates select="ProductCategory"/>
    </xsl:template>
    <xsl:template match="ProductCategory">
        <Product>
            <xsl:copy-of select="."/>
        </Product>
    </xsl:template>
    <xsl:template match="TemplateDetails">
    <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template match="SelectedClauses">
    <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template match="Distribution">
    <xsl:copy-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:29:26.830

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml"/>
    <xsl:template match="/">
        <xsl:apply-templates select="FIXML"/>
    </xsl:template>
    <xsl:template match="FIXML">
        <FIXML>
            <xsl:apply-templates select="Header"/>
            <xsl:apply-templates select="Body"/>
        </FIXML>
    </xsl:template>
    <xsl:template match="Header">
        <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template match="Body">
        <Body>
            <xsl:apply-templates select="Data"/>
        </Body>
    </xsl:template>
    <xsl:template match="Data">
        <Data>
            <LimitDetails>
                <xsl:apply-templates select="CorpAppLimitDetailsBO"/>
            </LimitDetails>
            <ProductDetails>
                <xsl:apply-templates select="CorpAppProductDetailsBO"/>
            </ProductDetails>
            <xsl:apply-templates select="TemplateDetails"/>
            <xsl:apply-templates select="SelectedClauses"/>
            <xsl:apply-templates select="Distribution"/>
        </Data>
    </xsl:template>
    <xsl:template match="CorpAppLimitDetailsBO">
        <Limit>
            <xsl:copy-of select="child::*"/>
        </Limit>
    </xsl:template>
    <xsl:template match="CorpAppProductDetailsBO">
    <Product>
        <xsl:apply-templates select="ProductCategory"/>
         <xsl:apply-templates select="DBApplicantMiscDetails"/>
    </Product>
    </xsl:template>
    <xsl:template match="ProductCategory">
            <xsl:copy-of select="."/>
    </xsl:template>
     <xsl:template match="DBApplicantMiscDetails">
    <xsl:copy-of select="child::*"/>
    </xsl:template>
    <xsl:template match="TemplateDetails">
    <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template match="SelectedClauses">
    <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template match="Distribution">
    <xsl:copy-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

# css - 如果列表项打开/悬停，则父链接必须具有不同的颜色

> ID：12783332
> 
> 赞同：1
> 
> 时间：2012-10-08T14:02:47.753
> 
> 标签：css, drop-down-menu, hyperlink, hover

我想创建一个效果，如下所示：如果我将鼠标悬停在我的下拉菜单上，则链接是蓝色的。当然很好，但是如果我将任何列表项悬停在下拉菜单中，蓝色链接将变回灰色。即使悬停了其他东西，如何使链接保持蓝色？

所以这就是`normal`状态。没有悬停，没有任何东西。它是灰色的，这很好。如果我将鼠标悬停在常见问题解答中，它会变成蓝色。那也可以……但是现在。如果我将鼠标悬停在常见问题解答上，我将获得一个下拉列表。然后，如果我将鼠标悬停在列表项上，蓝色的常见问题解答消息将变为`GREY`. 我希望它留下来`BLUE`。

如前所述..我想获得蓝色的常见问题解答。我猜这与父类或活动状态有关？我怎样才能做到这一点？这是我的代码：

```
<div id="main-menu-wrap">
<ul id="menu-headmenu" class="menu-headmenu-container">
<li id="menu-item-429" class="menu-item menu-item-type-post_type menu-item-object-page">
<a href="blabla">
About us
<span class="sub"></span>
</a>
<ul class="sub-menu">
<li id="menu-item-435" class="menu-item menu-item-type-post_type menu-item-object-page">
<a href="blablbala">
faq
<span class="sub">blablabla</span>
</a>
</li>
<li id="menu-item-145" class="menu-item menu-item-type-taxonomy menu-item-object-category">
<a href="blablabla">
no
<span class="sub">hahaa</span>
</a>
</li>
</ul>
</li>
<li id="menu-item-407" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor">
<a href="blablablabla">
blablbala
<span class="sub"></span>
</a>
<ul class="sub-menu">
<li id="menu-item-5" class="menu-item menu-item-type-custom menu-item-object-custom">
</ul>
</div> 
```

CSS：

```
#main-menu-wrap {
    position: absolute;
    top: 150px;
    z-index: 9999;
}

#menu-headmenu li .sub-menu {
    border-top: 15px solid #80806E;
    display: none;
    position: absolute;
    z-index: 9999;
}
.home #menu-headmenu li a:hover {
    background: none repeat scroll 0 0 black;
    color: #1CBBED;
}
.home #menu-headmenu li li a:hover {
    background: none repeat scroll 0 0 transparent;
}
#menu-headmenu li a:hover {
    background: none repeat scroll 0 0 #80806E;
    color: white;
}
#menu-headmenu li li a:hover {
    background: none repeat scroll 0 0 transparent;
}
#menu-headmenu li:hover .sub-menu {
    display: block; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:05:53.427

给定您的代码，替换此规则：

```
#menu-headmenu li a:hover {
    background: none repeat scroll 0 0 #80806E;
    color: white;
} 
```

和：

```
#menu-headmenu li a:hover, #menu-headmenu li:hover a {
    background: none repeat scroll 0 0 #80806E;
    color: white;
} 
```

[演示](http://jsfiddle.net/gionaf/ArKPL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:08:58.760

不要将 :hover 放在链接上，而是将其放在列表项上。例如：

```
.home #menu-headmenu li:hover {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:18:25.930

你可以使用这个css代码来处理这个问题：

```
.menu-item:hover a:first-child
{
    background: #80806E;
    color:#fff;
    text-decoration:none;
} 
```

最好的祝福

# c# - 接受不同类型的集合作为参数

> ID：12783333
> 
> 赞同：2
> 
> 时间：2012-10-08T14:02:49.070
> 
> 标签：c#, collections, parameters

我有一个将浮点类型的集合作为参数的方法。大多数时候 a`ReadOnlyCollection<float>`被传递给方法，但有时也会传递不同类型的集合，如 List 。

参数的最佳类型是什么？我应该使用：`public void MyMethod(Collection<float>)`？这是好习惯吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T14:05:13.360

这取决于您对集合所做的工作。

如果您只想枚举它，请传入`IEnumerable<float>`. 如果您还需要添加/删除项目，请使用`ICollection<float>`. 如果需要按索引访问，请使用`IList<float>`.

根据您对不同类型的描述，您不需要添加项目，所以`IEnumerable<float>`应该没问题。

一般来说，尽可能使用最通用的类​​型（接口优于实现，方法少的东西比方法多的东西）。请参阅[Liskov 替换原则（](http://en.wikipedia.org/wiki/Liskov_substitution_principle) [SOLID](http://en.wikipedia.org/wiki/Solid_%28object-oriented_design%29)设计原则中的 L ）。

# java - 使用 between 比较 Hamcrest 数

> ID：12783335
> 
> 赞同：60
> 
> 时间：2012-10-08T14:02:56.443
> 
> 标签：java, hamcrest

Hamcrest 有没有办法比较一个数字范围内的数字？我正在寻找这样的东西：

```
assertThat(50L, is(between(12L, 1658L))); 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-08T16:50:10.937

Jeff 解决方案的替代方法是使用`both`：

```
assertThat(50L, is(both(greaterThan(12L)).and(lessThan(1658L)))); 
```

我认为这很有可读性。如果检查失败，您还会收到一条很好的错误消息：

> 预期：是（大于 <50L> 且小于 <1658L> 的值）得到：<50L>

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-08T14:57:50.930

我不相信`between`它是核心 hamcrest 匹配器的一部分，但你可以这样做：

```
assertThat(number, allOf(greaterThan(min),lessThan(max))); 
```

那还是有点难看，所以你可以在

```
assertThat(number, between(min,max)) 
```

看起来`between`像

```
allOf(greaterThan(min),lessThan(max)) 
```

仍然不是一个很好的解决方案，但它读起来就像一个 hamcrest matcher。

如果您找不到公开可用的，编写自己的`between`匹配器[http://code.google.com/p/hamcrest/wiki/Tutorial](http://code.google.com/p/hamcrest/wiki/Tutorial)将是微不足道的。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-09-09T09:42:26.690

如果您正在处理整数，则应考虑使用以下`closeTo`方法：

```
assertThat((double)nclient, is(closeTo(nserver, 1d))); 
```

不幸的是，没有`closeTo`整数，但每个 32 位整数都可以用双精度表示，因此您可以简单地将它们转换为双精度，然后继续。

这并不完全等同于`between`，但有时会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-30T13:54:38.833

另一种选择是使用[Cirneco 扩展](https://github.com/ozimov/cirneco)。它有`between()`，`betweenInclusive()`还有更多。这些匹配器也适用于实现的其他对象`Comparable`（如`Date`）。

按照您的示例，它将是：

```
assertThat(50L, between(12L, 1658L)); 
```

如果您希望包含两个边界：

```
assertThat(50L, betweenIncluded(12L, 1658L)); 
```

或者，如果您只想包含其中一个边界：

```
assertThat(50L, betweenLowerBoundIncluded(12L, 1658L));  
assertThat(50L, betweenUpperBoundIncluded(12L, 1658L)); 
```

* * *

您可以将以下依赖项用于符合 JDK7 的项目：

```
<dependency>
  <groupId>it.ozimov</groupId>
  <artifactId>java7-hamcrest-matchers</artifactId>
  <version>0.7.0</version>
</dependency> 
```

或者如果您使用的是 JDK8，请执行以下操作

```
<dependency>
  <groupId>it.ozimov</groupId>
  <artifactId>java8-hamcrest-matchers</artifactId>
  <version>0.7.0</version>
</dependency> 
```

# c# - 在 WinRT / C# 中通过 StreamSocket 连接到 IMAP

> ID：12783337
> 
> 赞同：3
> 
> 时间：2012-10-08T14:02:57.380
> 
> 标签：c#, sockets, windows-8, windows-runtime

尝试编写一段简单的代码来使用 StreamSocket 连接到 IMAP 服务器。它读取服务器连接响应，但不会读取其他任何内容。

```
 private async void TCPTest(string hostName, string port)
    {
        status.Text = "start of TCPTest";

        StreamSocket socket = new StreamSocket();
        await socket.ConnectAsync(new HostName(hostName), port);

        string senddata = "A001 login uuu ppp";

        status.Text += "\n first reading...";
        DataReader reader = new DataReader(socket.InputStream);
        reader.InputStreamOptions = InputStreamOptions.Partial;
        await reader.LoadAsync(1024);
        string data = reader.ReadString(reader.UnconsumedBufferLength);
        status.Text += "\n > read " + data;

        status.Text += "\n writing...";
        writer = new DataWriter(socket.OutputStream);
        writer.WriteString(senddata);
        await writer.StoreAsync();
        status.Text += "\n > wrote " + sendata;

        status.Text += "\n second reading...";
        writer = new DataWriter(socket.OutputStream);
        await reader.LoadAsync(1024);
        string data2 = reader.ReadString(reader.UnconsumedBufferLength);
        status.Text += "\n >" + data2;

        status.Text += "\n end of TCPTest";
    } 
```

这是我得到的输出。

```
start of TCPTest
first reading...
> read * OK mydomain.com IMAP4rev1 MDaemon 13.0.1 ready
writing...
> wrote A001 login uuu ppp
second reading... 
```

该应用程序永远不会比这更进一步。没有错误，它只是挂起。我在这里做一些根本错误的事情吗？[我的代码与MSDN 上的 StreamSocket 示例](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150599.aspx)相同（或多或少）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:33:59.717

原来我并没有终止我的命令。添加`Environment.Newline`到最后解决的事情。

# javascript - 如何在不使用 jQuery 的情况下添加点击处理程序

> ID：12783339
> 
> 赞同：3
> 
> 时间：2012-10-08T14:03:09.233
> 
> 标签：javascript, jquery

我想使用 ID 向元素添加一个基本的点击处理程序。通常我会使用 jQuery，但我忘记了如何在 vanilla js 中使用它。

在不使用 jQuery 的情况下，最好的方法是什么：

```
$("#myBasic").click(function(){
  alert(“testString”);
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T14:04:30.410

非常基本的方法是只`on[event]`为元素的属性分配一个函数

```
document.getElementById("myBasic").onclick = function() { 
                                                 alert("testString");
                                             }; 
```

这具有非常广泛的浏览器支持，对大多数基本情况很有用

* * *

还有其他事件处理功能，例如[`.addEventListener(evt, fn, capture)`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)，但 IE 仅在 IE9 中开始支持它。在此之前，您需要使用`attachEvent(onevt, fn)`类似但不完全相同的 。

主要问题`.attachEvent()`是它不会自动引用绑定处理程序的元素`this`。但是有一些解决方法。

* * *

要创建一个相当兼容浏览器的解决方案，您可以执行以下操作：

```
function addListener(elem, type, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(type, fn, false);

    } else if (elem.attachEvent) {
        elem.attachEvent("on" + type, function() {
                                          return fn.call(elem, window.event);
                                       });
    } else {
        elem["on" + type] = fn;
    }
} 
```

你会这样称呼它：

```
var el = document.getElementById("myBasic");

addListener(el, "click", function(e) { alert(this.id); }); 
```

这应该涵盖大多数情况，尽管我有点担心`.attachEvent`版本的内存泄漏。

* * *

所有这些仅涉及绑定处理程序。要获得一致的跨浏览器行为，您可能需要为`event`对象准备好修复程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T14:05:59.910

最简单的就是：

```
document.getElementById('myBasic').onclick = function() {
    // do something
}; 
```

最正确的方法是：

```
var f = function() {
    // do something
};
if( document.body.attachEvent)
    document.getElementById('myBasic').attachEvent("onclick",f);
else
    document.getElementById('myBasic').addEventListener("click",f); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T14:07:09.787

```
document.getElementById('myBasic').addEventListener("click",function(){alert("teststring")}); 
```

# xml - 使用 XSLT 对简单 XML 应用 Muenchian 分组

> ID：12783340
> 
> 赞同：9
> 
> 时间：2012-10-08T14:03:10.560
> 
> 标签：xml, xslt, aggregate, muenchian-grouping

[Muenchian分组](https://en.wikipedia.org/wiki/XSLT/Muenchian_grouping)如何详细工作？

我有一个从数据库生成的简单 XML 文档：

```
<CLIENTS>
    <CLIENT>
       <NAME>John</NAME>
       <ACCOUNT_NUMBER>1424763562761</ACCOUNT_NUMBER>
       <LAST_USED>2012-10-03</LAST_USED>
       <AMOUNT>5000</AMOUNT>

    </CLIENT>
    <CLIENT>
       <NAME>John</NAME>
       <ACCOUNT_NUMBER>543667543732</ACCOUNT_NUMBER>
       <LAST_USED>2012-10-02</LAST_USED>
       <AMOUNT>10000</AMOUNT>
    </CLIENT>
       ... 
```

我想按名称节点分组。我怎样才能获得以下所需的输出？

```
<ClIENTS>
    <CLIENT>
        <NAME>John</NAME>
        <ACCOUNT>
           <ACCOUNT_NUMBER>1424763562761</ACCOUNT_NUMBER>
           <LAST_USED>2012-10-03</LAST_USED>
           <AMOUNT>5000</AMOUNT>
        </ACCOUNT>
        <ACCOUNT>
           <ACCOUNT_NUMBER>543667543732</ACCOUNT_NUMBER>
           <LAST_USED>2012-10-03</LAST_USED>
           <AMOUNT>10000</AMOUNT>
        </ACCOUNT>
       ....
</CLIENTS> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T14:56:20.690

阅读[www.jenitennison.com/xslt/grouping/muenchian.xml](http://www.jenitennison.com/xslt/grouping/muenchian.xml)以获取有关代码定义密钥的帮助

```
<xsl:key name="client-by-name" match="CLIENT" use="NAME"/> 
```

然后使用模板作为

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="CLIENTS">
  <xsl:copy>
    <xsl:apply-templates select="CLIENT[generate-id() = generate-id(key('client-by-name', NAME)[1])]" mode="group"/>
  <xsl:copy>
</xsl:template>

<xsl:template match="CLIENT" mode="group">
  <xsl:copy>
    <xsl:copy-of select="NAME"/>
    <xsl:apply-templates select="key('client-by-name', NAME)"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="CLIENT">
  <ACCOUNT>
    <xsl:apply-templates select="node()[not(self::NAME)]"/>
  </ACCOUNT>
</xsl:template> 
```

[编辑] 如果您想使用 XSLT 2.0，那么您当然不需要 Muenchian 分组，而是使用

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="CLIENTS">
  <xsl:copy>
    <xsl:for-each-group select="CLIENT" group-by="NAME">
      <CLIENT>
        <xsl:apply-templates select="NAME, current-group()"/>
      </CLIENT>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

<xsl:template match="CLIENT">
  <ACCOUNT>
    <xsl:apply-templates select="node() except NAME"/>
  </ACCOUNT>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T15:06:44.647

Jeni Tennison 打破了执行 Muenchian 分组所需的步骤：

[http://www.jenitennison.com/xslt/grouping/muenchian.html](http://www.jenitennison.com/xslt/grouping/muenchian.html)

本质上，使用 XSLT 为节点分配一个键，如果文档中有相同的节点，则可以重复该键。然后 XSLT 遍历每个键，并允许您输出具有匹配键的节点。

因此，在 Martin 的回答中，这一行是根据 NAME 节点的内容为每个 CLIENT 创建一个密钥（请记住，如果多个客户端的 NAME 相同，那么密钥也是如此）：

```
<xsl:key name="client-by-name" match="CLIENT" use="NAME"/> 
```

然后，您想要遍历所有键并找到每个键的第一个实例（再次使用 Martin 的答案）

```
<xsl:apply-templates select="CLIENT[generate-id() = generate-id(key('client-by-name', NAME)[1])]" mode="group"/> 
```

然后，您希望找到与密钥匹配的所有客户端，以便能够输出其详细信息（同样，Martins）

```
<xsl:apply-templates select="key('client-by-name', NAME)"/> 
```

从这里您需要另一个模板来输出客户详细信息

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T15:13:51.180

Muenchian 分组（根据@Martin 的回答）消除了更传统的分组策略在分组时所具有的冗余。

如果没有 Muenchian Grouping，模板通常使用`preceding-sibling`or`following-sibling`来确定每个组的第一个候选实例，然后需要第二次查询来查找与该组匹配的所有节点，如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="CLIENTS">
        <CLIENTS>
            <!--Only find the 'first' instance of each client-->
            <xsl:apply-templates select="CLIENT[not(NAME = preceding-sibling::CLIENT/NAME)]" mode="client"/>
        </CLIENTS>
    </xsl:template>

    <xsl:template match="CLIENT" mode="client">
        <xsl:variable name="name" select="NAME"/>
        <CLIENT>
            <NAME>
                <xsl:value-of select="$name"/>
            </NAME>
            <ACCOUNTS>
                <!--Note that we now have to find the other matching clients *again* - this is the inefficiency that Muenchian grouping eliminates-->
                <xsl:apply-templates select="/CLIENTS/CLIENT[NAME/text()=$name]" mode="account" />
            </ACCOUNTS>
        </CLIENT>
    </xsl:template>

    <xsl:template match="CLIENT" mode="account">
        <ACCOUNT>
            <!--Copy everything else except Name, which is the grouping key -->
            <xsl:copy-of select="@* | *[not(local-name='NAME')]"/>
        </ACCOUNT>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T16:19:53.327

在之前的评论中（在@Martin 的回答下），OP 询问是否[`for-each-group`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)可以使用 XSLT 2.0 的元素来解决这个问题。

**当这个 XSLT 2.0 解决方案：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
    <CLIENTS>
      <xsl:for-each-group select="CLIENT" group-by="NAME">
        <CLIENT>
          <xsl:sequence select="NAME" />
          <xsl:for-each select="current-group()">
            <ACCOUNT>
              <xsl:sequence select="*[not(self::NAME)]" />
            </ACCOUNT>
          </xsl:for-each>
        </CLIENT>
      </xsl:for-each-group>
    </CLIENTS>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于 OP 的原始 XML：**

```
<CLIENTS>
  <CLIENT>
    <NAME>John</NAME>
    <ACCOUNT_NUMBER>1424763562761</ACCOUNT_NUMBER>
    <LAST_USED>2012-10-03</LAST_USED>
    <AMOUNT>5000</AMOUNT>
  </CLIENT>
  <CLIENT>
    <NAME>John</NAME>
    <ACCOUNT_NUMBER>543667543732</ACCOUNT_NUMBER>
    <LAST_USED>2012-10-02</LAST_USED>
    <AMOUNT>10000</AMOUNT>
  </CLIENT>
</CLIENTS> 
```

**...产生了想要的结果：**

```
<?xml version="1.0" encoding="utf-8"?>
<CLIENTS>
  <CLIENT>
    <NAME>John</NAME>
    <ACCOUNT>
      <ACCOUNT_NUMBER>1424763562761</ACCOUNT_NUMBER>
      <LAST_USED>2012-10-03</LAST_USED>
      <AMOUNT>5000</AMOUNT>
    </ACCOUNT>
    <ACCOUNT>
      <ACCOUNT_NUMBER>543667543732</ACCOUNT_NUMBER>
      <LAST_USED>2012-10-02</LAST_USED>
      <AMOUNT>10000</AMOUNT>
    </ACCOUNT>
  </CLIENT>
</CLIENTS> 
```

**解释：**

正如您已经正确推测的那样，XSLT 2.0 引入了该[`for-each-group`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)元素（及其相关合作伙伴，例如`current-group()`），以消除令人惊叹/令人印象深刻但可能令人困惑的分组方法，如 Muenchian 方法。

# python - Python日志文件降序排列

> ID：12783343
> 
> 赞同：3
> 
> 时间：2012-10-08T14:03:22.200
> 
> 标签：python, logging

我有一个用 python 编写的应用程序，它在日志文件中记录错误，我正在使用 python 日志记录模块

例子：

```
import logging
logging.basicConfig(filename='\logs\filename.log',
                    level=logging.DEBUG,
                    format='%(asctime)s - %(levelname)s - %(message)s')
logging.error('error connecting to server') 
```

这工作正常，日志文件正在记录错误，这意味着最后一个错误记录在文件的最后一行。

是否有某种设置我可以告诉日志记录模块始终写在文件的顶部，这样最后一个错误总是在第一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:54:37.400

正如其他人所说，写在文件的前面是非常低效的。每次写入都必须首先查找文件的开头，然后在其他数据之前插入新数据。操作系统的底层 I/O 旨在降低附加成本。

也就是说，如果您坚持这样做，请查看[Logging Handlers](http://docs.python.org/library/logging.handlers.html?highlight=filehandler#module-logging.handlers)此处的文档。您可以实现自己的版本，`logging.handlers.FileHandler`该版本将在每次写入之前搜索到开头。然后你可以调用`logging.addHandler()`并放置你的类的一个实例。如果您只关心最近的 10 个左右的日志条目，您甚至可以在写入之前截断文件。

# android - 在 android 中使用 TabHost 时出现键盘问题

> ID：12783350
> 
> 赞同：0
> 
> 时间：2012-10-08T14:03:38.550
> 
> 标签：android, keyboard

嗨，我在我的 tabhost 中使用了四个选项卡，名为 TabOne、TabTwo、TabThree、TabFour。

在 TabOne 中，我有 editext 进行搜索选项，当我按下编辑文本时，它会显示键盘。但是没有关闭键盘当我移动到 TabTwo 时，键盘仍然显示。我不希望键盘在 TabTwo、TabThree、TabFour 中启用。因为所有其他三个选项卡都没有 edittext 选项。

现在我的问题是如何在单击其他选项卡时隐藏键盘。

我尝试了以下方法，

`oncreate`在TabB的方法中添加以下代码

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

在 Android 清单文件中添加以下 xml 标记

```
 android:windowSoftInputMode="stateAlwaysHidden" 
```

请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:08:04.120

失去焦点时隐藏编辑文本。

```
editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
   @Override
   public void onFocusChange(View v, boolean hasFocus) {
    if (!hasFocus) {
        hideKeyboard();
    }
   } 
```

});

```
void hideKeyboard() {
   InputMethodManager imm = (InputMethodManager)  getSystemService(Activity.INPUT_METHOD_SERVICE);
   imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:14:22.877

请看这个答案

启用软键盘

```
inputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

并禁用软键盘

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T20:00:07.223

**这对我有用：**

在单击特定选项卡时触发的 Activity 中，我在 onCreate 中使用了它：

```
inputSearch.setOnFocusChangeListener(new View.OnFocusChangeListener() {
           @Override
           public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus) {
                InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(inputSearch.getWindowToken(), 0);
            }
           }}); 
```

在 AndroidManifest.xml 中，我将以下内容添加到我的 MainActivity（定义了所有选项卡的位置）：

```
android:windowSoftInputMode="stateAlwaysHidden" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-23T06:21:20.480

```
this.getWindow().setSoftInputMode(
    WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

这条线将为您工作。看一下这个。

# youtube - youtube 前贴片

> ID：12783353
> 
> 赞同：3
> 
> 时间：2012-10-08T14:03:59.937
> 
> 标签：youtube, youtube-api, youtube-javascript-api

我想在同一个播放器中播放两个不同的 youtube 视频，第一个视频在第二个之前播放（作为前贴片广告）。一种仅包含两个视频的自定义播放列表。

我真正需要的是，当播放器处于空闲状态时，它必须显示主视频（第二个）的图像，而不是前贴片。

所以，我想我必须使用 youtube api 加载主视频，然后停止它，然后加载前贴片，在播放前贴片后播放主视频然后停止。

我试图复制/粘贴相同的代码来完成这些任务，但我陷入了困境。任何人都可以给我一个工作的例子吗？或者，至少有一些建议？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:13:29.057

这有点粗略，但是通过监听状态变化事件来完成你的任务；当预卷接近完成时，您可以通过集成一些基于提示主视频的智能前瞻监控来使其更具响应性。但无论如何，这至少应该让你开始：

```
 <div id="player"></div>
      <script>
      var seenPreroll=false;
      var preroll='rl1qKqlYy8M';
      var mainfeature='u1zgFlCw8Aw';
      var playingId='';
      var tag = document.createElement('script');
      tag.src = "//www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: mainfeature,
          events: {
            'onStateChange': function(event) {
                        if (event.data==1&&seenPreroll==false) {
                                player.pauseVideo();
                                player.loadVideoById(preroll);
                                playingId=preroll;
                                seenPreroll=true;
                                player.playVideo();
                        }
                        else if (event.data==0&&playingId==preroll) {
                                player.loadVideoById(mainfeature);
                                playingId=mainfeature;
                                player.playVideo();
                        }
                }
          }
        });

}
</script> 
```

# python - scikit.learn 和 kmeans 的新手，如何使用 K 方法对文档（从文件）进行聚类？

> ID：12783371
> 
> 赞同：2
> 
> 时间：2012-10-08T14:04:58.087
> 
> 标签：python, parsing, machine-learning, k-means, scikit-learn

我想做的是使用 scikit.learn 中的 Kmeans 将纯文本文档聚类为两个类别。

这是用例场景。我将收到一些将被标记为“重要”和将被标记为“不重要”的样本集。

来自 scikit.learn 示例数据集是来自新闻组的预定义格式：

```
dataset = fetch_20newsgroups(subset='all', categories=categories,
                             shuffle=True, random_state=42) 
```

我想做的是从文本文件中接收数据（20newsgroups 似乎根本不是文本文件，我什至无法解压缩）

我不清楚的是 fetch_20newsgroups 的数据结构以及它是如何工作的。我应该怎么做才能将文本文件转换为所需的格式（fetch_20newsgroups 提供的这种格式）

谢谢

菲奥。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:51:52.267

scikit-learn 附带的 20 个新闻组数据集加载器获取从[http://kdd.ics.uci.edu/databases/20newsgroups/20newsgroups.html](http://kdd.ics.uci.edu/databases/20newsgroups/20newsgroups.html)的原始站点下载的文本文档的存档，然后以压缩格式将它们缓存在`$HOME/scikit_learn_data`文件夹。查看[20 个新闻组数据集加载器的源代码以](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/datasets/twenty_newsgroups.py)获取更多详细信息。

要将您自己的一组文本文件加载为 scikit-learn “bunch”对象，您可以通过将[sklearn.datasets.load_files](http://scikit-learn.org/dev/modules/generated/sklearn.datasets.load_files.html)函数指向正确的文件夹来直接使用它。

如果您的数据已经分为 2 个类别（例如，名为“重要”和“不重要”的两个子文件夹），那么您需要使用的不是无监督的聚类算法，而是 MultinomialNB（朴素贝叶斯）、LinearSVC 等分类（线性支持向量机）或 LogisticRegression，在[文本分类示例](http://scikit-learn.org/dev/auto_examples/document_classification_20newsgroups.html)中进行监督。

如果您不知道哪个文档属于哪个类别，但想将您的语料库分成两组相似的文档，那么您可以使用无监督聚类算法，例如 KMeans，但您获得的 2 个聚类不太可能符合您的想法“重要”和“不重要”。

# sql-server-2008 - 使用 ltrim 和 rtrim 函数检查 sql server 2008 中的约束

> ID：12783376
> 
> 赞同：0
> 
> 时间：2012-10-08T14:05:18.217
> 
> 标签：sql-server-2008

我正在使用下面的代码在`CreatID`列上添加约束。但它不起作用。我仍然可以添加`' xyz'`我不想添加的文本。此外，当文本中只有空格时，它应该被视为`'null'`值。就像我输入`'<space><space><space>'`这个一样，它应该被认为是空的。

```
ALTER TABLE [dbo].[OneC_Gadget_AppDetails]  WITH CHECK 
    ADD  CONSTRAINT [chk_CreateID_val] 
    CHECK  ((len(ltrim(rtrim([AppActionContent])))>(1))) 
```

# c# - xml 中的可扩展区域

> ID：12783377
> 
> 赞同：3
> 
> 时间：2012-10-08T14:05:19.753
> 
> 标签：c#, xml, visual-studio-2010

在`C#`我可以用`#region #endregion`关键字划分我的代码。

此功能是否有任何关键字`xml`？

我现在不知道它是否重要，我正在使用`Visual Studio 2010`.

**编辑 ：**

**例如：**我有不同但对应的标签，例如上面这些：我想为 tool_planes 创建一个区域并折叠它们。然后为 tool_lines 等创建一个区域。

```
 <RibbonSeparatablePopupMenu key="tool_Plane1" preferred-tool-size="Large" Type="Classic">
            <RibbonGallery key="tool_Plane_Gallery1"    >
                <RibbonGalleryCategory key="tool_Plane_Category1">
                    <RibbonGalleryCategoryItem  key="tool_Plane_3PointPlane" />
                    ...
                </RibbonGalleryCategory>
            </RibbonGallery>
        </RibbonSeparatablePopupMenu>

        <RibbonSeparatablePopupMenu key="tool_Plane2" preferred-tool-size="Large" Type="Classic">
            <RibbonGallery key="tool_Plane_Gallery2"    >
                <RibbonGalleryCategory key="tool_Plane_Category2">
                    <RibbonGalleryCategoryItem  key="tool_Plane_OrthogonalPlane" />
                    ...
                </RibbonGalleryCategory>
            </RibbonGallery>
        </RibbonSeparatablePopupMenu> 
```

我不想用单独的 xml 标签对它们进行分组

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:45:31.393

[XAML 区域](http://visualstudiogallery.msdn.microsoft.com/3c534623-bb05-417f-afc0-c9e26bf0e177)是一个 Visual Studio 扩展，它提供了在 XML/XAML 代码中创建区域的能力。

![XAML 区域](../Images/daff2747feb9088f712924489caf6f6d.png)

用法：

```
<!-- Region (Any Text You Want) --> 
Your Code 
<!-- EndRegion --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:14:14.140

如果您要折叠绒毛，可以使用折叠开关。在处理非常大的 Xml 文件时，它与区域一样有用。

![在此处输入图像描述](../Images/51f2d178d4866a42babd0c420f79052a.png)

# mysql - Excel 文件架构

> ID：12783382
> 
> 赞同：0
> 
> 时间：2012-10-08T14:05:37.307
> 
> 标签：mysql, database, excel, documentation-generation

我有一个 Excel 文件，其中记录了数据库字典。每个表都记录在以下主要列下：

**名称 字段 评论数**

我想生成这个文档的可视化模式 - 一些吸引人的东西，比如为每个 db 表扩展表等。在这方面我可以使用什么（应用程序）吗？或者，我可以编写一些代码来生成这个模式吗？有500多张桌子。

非常感谢。

**更新**

例如，让我给你一个单表的例子：

```
表_A 字段_1 字段_1 说明
表_A 字段_2 字段_2 说明
表_A 字段_3 字段_3 说明
[空白行]
Table_A 信息表说明
Table_A 信息表要求

```

所以，这是一张桌子。'Table_A' 用作其所有字段和信息行的标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:46:13.107

是的，我会说数据透视表是总结数据字典的一种不错的方式：

![PivotTableDataDictionarySummary](../Images/b46e419f3572dcef8a9d14a2ebd90ac6.png)

# vb.net - Lucene.net 结果为字符串/解析变慢

> ID：12783383
> 
> 赞同：0
> 
> 时间：2012-10-08T14:05:40.690
> 
> 标签：vb.net, lucene.net

我需要一些帮助来加快 lucene.net 搜索。我们需要一个字符串中的结果 ; 作为分隔符。topdocs 的解析需要很长时间：

```
 Dim resultDocs As TopDocs = indexSearch.Search(query, indexReader.MaxDoc())
    Dim hits As Object = resultDocs.ScoreDocs

    Dim strGetDocIDList As String = ""

    For Each sDoc As ScoreDoc In hits
        Dim documentFromSearcher As Document = indexSearch.Doc(sDoc.Doc)
        Dim contentValue As String = documentFromSearcher.Get("id")

        strGetDocIDList = strGetDocIDList + Path.GetFileName(contentValue) + ";"

    Next

    Return strGetDocIDList 
```

我们怎样才能加快速度？

问候英戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:16:15.923

有几种方法可以调整在 Lucene 中加载 STORED 字段的性能。

首先，默认情况下，它会`Document`在您加载它时加载它的每个存储字段。只存储你需要的东西，不要系统地存储所有东西。

如果您不需要为此特定查询加载所有存储的字段，请尝试编写 a`FieldSelector`以进一步控制字段加载。

最后，在文档中的其他存储字段之前添加更频繁地加载存储数据的字段。字段是按顺序加载的，在某些情况下，首先将它们添加到 Documents 可以加快速度。

[字段选择器 API 链接](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/all/org/apache/lucene/document/FieldSelector.html)

[一篇可以帮助您实现 FieldSelector 的文章](http://kb.ucla.edu/articles/why-are-lucenes-stored-fields-so-slow-to-access)

# javascript - 外部开发人员可以在运行时访问闭包变量吗？

> ID：12783388
> 
> 赞同：2
> 
> 时间：2012-10-08T14:05:56.103
> 
> 标签：javascript

本质上，我想在客户端中存储一个我不希望人们查看或更改的变量。

在以下代码示例中：

```
(function () {
    var foo = 'bar';
})(); 
```

任何人都可以使用工具或浏览器来访问和/或（更重要的是）更改 foo 的值吗？可以提供更多信息或工具的链接将不胜感激。在此期间，我将进行更多研究。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:08:10.623

是的，他们可以修改 foo 的值。作为一般规则，如果您不希望客户端操作该值，请不要让他们访问它（即将用户 ID 或此类信息放在 DOM 或客户端中）。您可能需要做一些`state management`研究、加密的 cookie、会话，或者如果您正在使用`ASP.NET`等`ViewState/ViewBag`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:13:22.060

可以将 javascript 注入任何页面，然后您可以从那里操作页面上的每个 javascript 对象/变量。因此，javascript 接收的任何数据都应该加密（如果您关心安全性）。

为了给您一点提示，请尝试打开您的开发人员工具。在 chrome 中，Control-Shift-I。单击脚本选项卡，然后您将看到脚本正在使用的所有变量。可以双击脚本中的任意位置并添加/删除代码片段。

仅供参考，如果您使用的是 Firefox，我强烈推荐 Firebug。它超越了 chrome 的开发工具，但我发现 chrome 更快.. 至少在我的慢速笔记本电脑（Ubuntu FTW）上。

希望这有帮助

# android - Android 滑动做某事

> ID：12783392
> 
> 赞同：0
> 
> 时间：2012-10-08T14:06:02.323
> 
> 标签：android

我想做一个“滑块”。

[http://inforains.com/wp-content/uploads/2012/01/slide-to-unlock-android-app.jpg](http://inforains.com/wp-content/uploads/2012/01/slide-to-unlock-android-app.jpg)

我的意思是类似的。

这个想法是，当您将示例移到右侧时，会发生一些事情，例如在锁屏中解锁屏幕或打开相机。

谷歌为此提供了一个工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:13:25.583

不，显然，它已[获得 Apple 的专利](http://www.geek.com/articles/mobile/slide-to-unlock-patented-20100818/)。

您可以查看[`Switch`](http://developer.android.com/reference/android/widget/Switch.html)API 级别 14 (ICS) 中引入的小部件 - 这是您可以从 Android 组件中找到的最接近的匹配项。但是，您可以编写自己的[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)来实现它。

# bash - 如何将文件 tar 到存档的指定文件夹？

> ID：12783397
> 
> 赞同：-1
> 
> 时间：2012-10-08T14:06:18.490
> 
> 标签：bash, shell

我想编写自己的脚本以舒适地使用 tar（并且在 shell 方面也变得更有经验），但我被卡住了。我想如果用户强制`my_script pack name.tar file1 file2`转换-在打包文件中的存档中创建主文件夹-怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:16:29.157

在 GNU tar 手册中[修改文件和成员名称。](http://www.gnu.org/software/tar/manual/html_section/transform.html#SEC113)

# asp.net-mvc - 使用 mvc 3 和 EF 跨多个视图传递数据

> ID：12783400
> 
> 赞同：1
> 
> 时间：2012-10-08T14:06:29.847
> 
> 标签：asp.net-mvc, entity-framework, razor

也许这个问题在这里反复出现，但我找不到答案。

我的项目是关于酒店预订。我有一个类 Reservation 女巫有一个 ChoosenRooms 的 Icollection 和一个代表 de User 进行预订的类，以及其他东西，如日期和其他东西。

过程是这样的：

在我的第一个视图中，我得到了选择的房间、日期等，然后我将其传递给我要获取用户信息的第二个视图，然后我有第三个视图，我想在其中显示所有收集到的信息，所以用户最终可以单击一个按钮来保存数据。

我的问题是我需要在所有这些视图中传递保留对象类。在我的测试中，我看到原始类型通过就好了，但是当我从视图回发到下一个控制器操作时，ChoosenRooms 的 iColletion 丢失了。

有人可以发布一些示例，如何从视图回发到控制器，在另一个类 Reservations 中的 ChoosenRooms 等复杂类型不会在此过程中丢失？

或者也许解释为什么这个信息会丢失？

编码：

```
 public class Reserva
{
    public virtual int ID { get; set; }

    [NotMapped]
    public string[] q { get; set; }

    [Display(Name = "Cliente")]
    public virtual Utilizador utilizador { get; set; }

    [Display(Name = "Quarto")]
    public virtual ICollection<Quartos> ChoosenRooms{ get; set; }

    [Display(Name = "Serviços Adicionais")]
    public virtual ICollection<ReservasItens> itens { get; set; } 
```

风景

```
@model SolarDeOura.Models.Reserva
    @{
        ViewBag.Title = "AddReservaUser";
        var _reserva = TempData["reserva"] as Reserva;
     }

    <h2>AddReservaUser</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Reserva</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.dtEntrada)
        </div>
        <div class="editor-field">
            @Html.DisplayFor(model => model.dtEntrada)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.dtSaida)
        </div>
        <div class="editor-field">
            @Html.DisplayFor(model => model.dtSaida)
        </div>
        <div class="editor-label">
            @Model.q.Count() Choosen Rooms 
        </div>

        @foreach (var q in Model.ChoosenRooms)
        { 
            <ul>
                <li>
                    @Html.DisplayFor(modelitem => q.descricao)
                </li>
            </ul>
        } 
```

从这里发回是问题所在。在此视图中，“@foreach（Model.ChoosenRooms 中的 var q）”有数据，但回发数据会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-24T16:36:27.630

在这一点上模型绑定器的概念对我来说不是很清楚，关于这个主题的一些知识就是解决问题所需要的。

在简历中：

视图得到一个复杂类型的模型：类 [reserva] 有一个 [ChoosenRooms] 的集合，它也是一个复杂类型。

该行`@Html.DisplayFor(modelitem => q.descricao)`渲染了显示数据所需的 html 元素，但没有渲染回控制器（输入元素或隐藏字段）所需的 html，因此模型绑定器失败。

此外，控制器（发布）操作参数没有与字段匹配的属性名称，在这种情况下，它需要是一个`String[]`类型，因为它是值的集合。

我还建议阅读有关显示模板和编辑器模板的信息。

# jquery - 使 CSS 定位仅更改一次 onclick

> ID：12783401
> 
> 赞同：0
> 
> 时间：2012-10-08T14:06:41.820
> 
> 标签：jquery, html

**代码 ：**

```
 $(document).ready(function(){
    $("#main_div").bind('click', function(e){
    var x = event.pageX-document.getElementById("main_div").offsetLeft;
    var y = event.pageY-document.getElementById("main_div").offsetTop;

    if(...)
    {
    $("#container-5").css({"top":y,"left":x});
    $(this).unbind('click');
    e.stopPropagation();

    }
    else if(...)
    {

    ....

    });
 }); 
```

当我单击 main_div 时，它会检查 if 函数并继续。container-5 的 CSS 也发生了变化。现在，一旦更改了 css，我不希望它在 main_div 点击时继续更改。所以我尝试`$(this).unbind('click');`了但这并没有帮助，因为我希望 main_div 被点击多次，以便我可以执行其他功能。帮助真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:41:17.493

另一种方式，也许是更优雅的方式，将使用 jQuery 的[.one()](http://api.jquery.com/one/)方法只触发一次 onclick 处理程序。您将按如下方式实现它：

```
$("#main_div").one('click', function(e) {
    //the rest of your code
}); 
```

请注意，这至少可以为您节省 4 行代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:12:19.873

只需在回调函数中添加一条附加`if`语句，该语句第一次为真，之后永远为假：

```
var hasBeenClicked = false;
$("#main_div").bind('click', function(e){
    if(!hasBeenClicked){
        hasBeenClicked = true;
        ...
        //the rest of your code
        ...
    }
}); 
```

# javascript - 获取函数“参数”作为键值对对象

> ID：12783404
> 
> 赞同：3
> 
> 时间：2012-10-08T14:07:01.953
> 
> 标签：javascript, arguments, associative-array

在 JavaScript 中，可以通过 获取传递给函数的参数列表`arguments`，这是一个类似数组的对象：

```
>> function fun(a, b, c) { console.log(arguments) };  
undefined
>> fun(1, 2, 3);
[1, 2, 3] 
```

有没有办法获得一个包含每个参数的正式名称的对象？
也就是说，如果调用上面的函数，他应该得到：

```
{a = 1, b = 2, c = 3} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T14:13:14.100

我不建议这样做，因为如果代码将被缩小并且函数参数将被压缩器/混淆器重命名，您可能会丢失一些数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T14:11:22.313

`toString`对于某些浏览器，您可以根据函数的表示从定义的参数中解析参数名称，[如本问题中所述](https://stackoverflow.com/questions/1007981/how-to-get-function-parameter-names-values-dynamically-from-javascript)。您可以使用它来自己映射值。

请注意，并非所有参数都必须命名，例如，如果我要在上面调用您的函数，`fun(1, 2, 3, 4)`最后一个参数不会映射到任何名称，但仍然可以通过`arguments`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T14:09:32.830

那是不存在的。您可以将参数作为对象传递。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T14:10:21.783

形式参数的名称在运行时不可用（*编辑*除了作为`toString()`函数值中文本的一部分，正如@David Hedlund 指出的那样），但参数值可通过`arguments`对象获得。如果您在函数中编写代码，那么您当然*知道*名称，因此您可以自己构建这样的对象：

```
function foo(a, b, c) {
  return {a: a, b: b, c: c};
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T14:19:00.343

> 有没有办法获得一个包含每个参数的正式名称的对象？

不。形式参数本质上与声明的变量相同。每个执行上下文都有一个关联的变量对象 (ed3) 或环境记录 (ed 5)，声明的变量和形式参数是其属性。

您无法访问该对象，因此您无法检查它以查看它具有哪些属性。

在全局执行上下文中，变量是全局对象的属性，但不是在函数执行上下文中。并且没有正式的方法来区分变量和全局对象的其他属性。

# c# - 调试后的 Scrollviewer 可见性

> ID：12783417
> 
> 赞同：-2
> 
> 时间：2012-10-08T14:07:29.523
> 
> 标签：c#, wpf

我有一个 WPF 应用程序。我在窗口中添加了一个滚动查看器。但是我可以在设计过程中看到滚动查看器。当我调试项目时，滚动查看器似乎没有......

有代码

```
 </local:WorkControl.DataContext>
<ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible">
    <Grid Name="mainGrid" VerticalAlignment="Top">

    <Grid.Background>
        <ImageBrush Stretch="Fill" TileMode="FlipXY" Viewport="0,0,1479,437" ViewportUnits="Absolute" />
    </Grid.Background>

        <DockPanel HorizontalAlignment="Stretch" Margin="1,1,1,1" Name="dockPanel1" VerticalAlignment="Top" Width="Auto">
        <Grid Name="grid1" Width="Auto" Margin="0" VerticalAlignment="Top" DockPanel.Dock="Top" OpacityMask="Black" ShowGridLines="False" OverridesDefaultStyle="False">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="250" />
                <ColumnDefinition Width="310" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="123" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Border Grid.ColumnSpan="3" BorderBrush="Silver" BorderThickness="1" HorizontalAlignment="Left" Margin="2" Name="borAdrTopR" VerticalAlignment="Top" CornerRadius="5"
        AllowDrop="False">
                <Canvas Width="834" Height="40" HorizontalAlignment="Stretch" Margin="0" VerticalAlignment="Stretch" Name="panelTop" ContextMenuOpening="panelTop_ContextMenuOpening">
                    <TextBlock Name="txAdrID" Canvas.Left="11" Canvas.Top="11" Height="20" Text="AdrID:" Width="44" Foreground="Silver" FontWeight="Bold" />
                    <TextBox Text="{Binding [AdrID]}" Height="20" HorizontalAlignment="Right" Margin="0,11,602,0" Name="tbAdrID" Width="86" VerticalAlignment="Top" FontWeight="Bold"
            VerticalContentAlignment="Top" Foreground="Silver" Canvas.Left="54" Canvas.Top="-1" Padding="1" BorderThickness="0" IsReadOnly="True" Background="{x:Null}" />
                    <TextBlock Canvas.Left="488" Canvas.Top="11" Height="20" Text="Adresspool:" Width="70" TextAlignment="Right" />
                    <CheckBox Canvas.Left="570" Canvas.Top="11" Content="MSS" Height="16" Name="chkMSSPool" Checked="chkPool_Checked" Unchecked="chkPool_Checked" />
                    <CheckBox Canvas.Left="620" Canvas.Top="11" Content="GMM" Height="16" Name="chkGMMPool" Checked="chkPool_Checked" Unchecked="chkPool_Checked" />
                    <CheckBox Canvas.Left="675" Canvas.Top="11" Content="MZ" Height="16" Name="chkMZPool" Checked="chkPool_Checked" Unchecked="chkPool_Checked" IsEnabled="False" />
                    <CheckBox Canvas.Left="728" Canvas.Top="11" Content="Sage" Height="16" Name="chkSagePool" Checked="chkPool_Checked" Unchecked="chkPool_Checked" />
                    <CheckBox Canvas.Left="780" Canvas.Top="11" Content="Web" Height="16" Name="chkMyMalikPool" IsEnabled="False" Checked="chkPool_Checked" Unchecked="chkPool_Checked" />
                    <TextBox Background="{x:Null}" BorderThickness="0" Canvas.Left="367" Canvas.Top="9" FontWeight="Bold" Foreground="Red" Height="21" IsReadOnly="True" Name="tbSecInfo"
            Padding="1" Text="" VerticalContentAlignment="Top" Width="101" />
                    <Image Canvas.Left="268" Canvas.Top="11" Height="16" Name="imgCRMstatus" Stretch="None" Width="96" MouseLeftButtonUp="imgCRMstatus_MouseClick"
            MouseRightButtonUp="imgCRMstatus_MouseClick" />
                    <Label Canvas.Left="257" Canvas.Top="17" Height="11" Name="lbCRMStatus" Width="9" IsEnabled="False" />
                    <Image Canvas.Left="466" Canvas.Top="7" Height="24" Name="imgSec" Stretch="None" Width="24" MouseRightButtonUp="imgSec_MouseClick" MouseLeftButtonUp="imgSec_MouseClick"
            Visibility="Hidden" />
                </Canvas>
            </Border>
            <Border Grid.Row="1" BorderBrush="Silver" BorderThickness="1" HorizontalAlignment="Left" Name="borAddress" VerticalAlignment="Top" CornerRadius="5" Background="White"
        AllowDrop="False">
                <FlowDocumentScrollViewer HorizontalAlignment="Left" Name="fdocview" VerticalAlignment="Top" Height="Auto" VerticalScrollBarVisibility="Auto" Background="#FFFFFFF9"
          Margin="2" HorizontalContentAlignment="Left" Padding="0" MinHeight="118">
                    <FlowDocument TextAlignment="Left" FontSize="12" PagePadding="5">
                        <FlowDocument.Resources>
                            <Style TargetType="{x:Type Paragraph}">
                                <Setter Property="FontSize" Value="13" />
                                <Setter Property="Foreground" Value="DarkBlue" />
                                <Setter Property="FontFamily" Value="Trebuchet MS" />
                                <Setter Property="Margin" Value="0,0,0,0" />
                            </Style>
                        </FlowDocument.Resources>
                        <Paragraph>ViewControl...mmm</Paragraph>
                    </FlowDocument>
                </FlowDocumentScrollViewer>
            </Border>
            <Border Grid.Row="1" Grid.Column="1" BorderBrush="Silver" BorderThickness="1" Padding="3" Name="borAdrInfoLeft" CornerRadius="6" AllowDrop="False">
                <Grid VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="73" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="35" />
                        <ColumnDefinition Width="45" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="28" />
                        <RowDefinition Height="28" />
                        <RowDefinition Height="28" />
                        <RowDefinition Height="28" />
                    </Grid.RowDefinitions>
                    <local:ComboBoxCW Grid.Column="1" Grid.Row="0" Grid.ColumnSpan="2" x:Name="cbAdrTypeID" CWListName="Adresstypen" Background="#FFC8D2E8"
            SelectedID="{Binding Path=[AdrTypeID]}" SelectionChanged="cwAdrType_SelectionChanged" Margin="0,0,0,3" />
                    <local:ComboBoxCW Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="3" x:Name="cbGruppenID" SelectedID="{Binding [GruppenID]}" CWListName="Gruppen" Background="#FFC8D2E8"
            CWListArt="withall" CWListFilter="M" Margin="0,0,0,3" />
                    <TextBlock Grid.Column="3" Grid.Row="0" Name="txtBedeutung" Text="$$" Width="22" TextAlignment="Center" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="2" Name="tbKundenNr" Canvas.Left="83" Text="{Binding [KundenNr]}" BorderBrush="#96000000" MaxLength="30" Margin="0,0,0,3" />
                    <TextBox Grid.Column="3" Grid.Row="2" Name="tbCRA" Text="{Binding [CRA]}" BorderBrush="#96000000" IsReadOnly="True" Margin="0,0,0,3" />
                    <local:ComboBoxCW Grid.Column="1" Grid.Row="3" x:Name="cwSprachID" SelectedID="{Binding [SprachID],Mode=TwoWay}" CWListName="Sprachen" CWListArt="withempty"
            Margin="0,0,0,3" />
                    <ComboBox Grid.Column="3" Grid.Row="3" Name="cbBedeutung" Text="{Binding Path=[Bedeutung]}">
                        <ComboBoxItem Content=" " />
                        <ComboBoxItem Content="A" />
                        <ComboBoxItem Content="B" />
                        <ComboBoxItem Content="C" />
                    </ComboBox>
                    <TextBlock Grid.Column="0" Grid.Row="0" Text="Adressart" />
                    <TextBlock Grid.Column="0" Grid.Row="1" Text="Gruppe" />
                    <TextBlock Grid.Column="0" Grid.Row="2" Text="Kundennr." />
                    <TextBlock Grid.Column="2" Grid.Row="2" Text="CRA" TextAlignment="Right" />
                    <TextBlock Grid.Column="0" Grid.Row="3" Text="Sprache" />
                    <TextBlock Grid.Column="2" Grid.Row="3" Text="Bed." TextAlignment="Right" />
                </Grid>
            </Border>
            <Border Grid.Row="1" Grid.Column="2" BorderBrush="Silver" BorderThickness="1" Padding="3" Name="borAdrInfoRight" CornerRadius="6" AllowDrop="False">
                <Grid VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="73" />
                        <ColumnDefinition />
                        <ColumnDefinition Width="35" />
                        <ColumnDefinition Width="30" />
                        <ColumnDefinition Width="30" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="28" />
                        <RowDefinition Height="28" />
                        <RowDefinition Height="28" />
                        <RowDefinition Height="28" />
                    </Grid.RowDefinitions>
                    <local:ComboBoxCW Grid.Row="0" Grid.Column="1" x:Name="cbAdrStatusID" SelectedID="{Binding [AdrStatusID]}" CWListName="Adressstati" Margin="0,0,0,3"
            Background="#FFC8D2E8" />
                    <TextBox Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="2" Name="tbMZunitID"
            Text="{Binding [MZunitID],Mode=OneWay,Converter={StaticResource codetextfromid}, ConverterParameter=MZunits}" Margin="0,0,0,3" BorderBrush="#96000000"
            IsReadOnly="True" />
                    <local:ComboBoxCW Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" x:Name="cbBetreuerID" Text="" Background="#FFC8D2E8" CWListName="Mitarbeiter" Margin="0,0,0,3"
            SelectedID="{Binding Path=[BetreuerID]}" CWListArt="withall" />
                    <ListBox Grid.Row="2" Grid.Column="1" Name="listBetreuers" BorderBrush="#96000000" SelectionChanged="listBetreuers_SelectionChanged" Grid.ColumnSpan="3"
            Grid.RowSpan="2" Margin="0,0,0,3" />
                    <Popup Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" OpacityMask="#00000000" Name="popAdd" StaysOpen="False" PlacementTarget="{Binding ElementName=listBetreuers}"
            Placement="Bottom" HorizontalOffset="-40" VerticalOffset="-20">
                        <ListBox Height="160" Width="270" HorizontalAlignment="Left" Name="listAdd" VerticalAlignment="Top" SelectionChanged="listAdd_SelectionChanged" />
                    </Popup>
                    <Button Grid.Row="3" Grid.Column="4" Content="-" Height="22" Width="22" Name="btnBetreuerDel" Click="btnBetreuerDel_Click" HorizontalAlignment="Right" />
                    <Button Grid.Row="2" Grid.Column="4" Content="+" Height="22" Width="22" Name="btnBetreuerAdd" Click="btnBetreuerAdd_Click" HorizontalAlignment="Right" />
                    <Button Grid.Row="1" Grid.Column="4" Content="H" Height="22" Width="22" Name="btnBetreuerHaupt" Click="btnBetreuerHaupt_Click" HorizontalAlignment="Right" />
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Status" />
                    <TextBlock Grid.Row="0" Grid.Column="2" Text="Unit" TextAlignment="Right" Margin="2" />
                    <TextBlock Name="lbHauptbetrP" Visibility="Visible" Grid.Row="1" Grid.Column="0" Text="Hauptbetr." />
                    <TextBlock Name="lbHauptbetrF" Visibility="Hidden" Grid.Row="1" Grid.Column="0" Text="Account-Mgr." />
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="weitere Betreuer" TextWrapping="Wrap" />
                </Grid>
            </Border>
            <!-- ====TAB Firma start -->
            <TabControl Grid.Row="2" Grid.ColumnSpan="3" Name="tabReg" Margin="0" SelectionChanged="tabReg_SelectionChanged" VerticalAlignment="Stretch" Padding="2,2">
                <TabItem Header="Firma" Name="regFirma" local:HelpProvider.HelpParameter="AddressControl;Firma">
                    <Grid VerticalAlignment="Top">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <!-- ====Firmen-Felder linke Seite -->
                        <Border Grid.Row="0" Grid.Column="0" BorderBrush="Silver" BorderThickness="1" Padding="3" Name="borFeed0" CornerRadius="6" AllowDrop="False">
                            <Grid Margin="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="95" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="35" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="50" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="38" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Column="0" Grid.Row="0" Text="Firma" />
                                <Button Name="btnLinkFirma" Height="23" Width="23" ToolTip="Mit Firma verknüpfen..." Click="btnLinkFirma_Click" Grid.Column="0" Grid.Row="0"
                  HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,0,5,0">
                                    <Button.Content>
                                        <Image Source="Images/Verknuepfung_32.png" />
                                    </Button.Content>
                                </Button>
                                <TextBox Name="tbFirma" Grid.Column="1" Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,3" Text="{Binding Path=[Firma]}" BorderBrush="#96000000"
                  MouseDoubleClick="tbFirma_MouseDoubleClick" MaxLength="80" AcceptsReturn="True" />
                                <TextBox x:Name="tbFirmazusatz" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2" Margin="0,0,0,3" Text="{Binding Path=[Firmazusatz]}" BorderBrush="#96000000"
                  MaxLength="50" /> 
```

还有更多代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:27:56.380

添加到阿吉拉斯的答案

如果您已将 Horizo​​ntalScrollBarVisibility、VerticalScrollBarVisibility 属性设置为“Auto”，请尝试将它们设置为 Visible。

# html - 用 CSS 隐藏文本，最佳实践？

> ID：12783419
> 
> 赞同：43
> 
> 时间：2012-10-08T14:07:33.970
> 
> 标签：html, css, hide

假设我有这个元素用于显示网站徽标：

```
<div id="web-title">
  <a href="http://website.com" title="Website" rel="home">
    <span>Website Name</span>
  </a>
</div> 
```

将`#web-title`被设置样式`background:url(http://website.com/logohere.png)`，但如何正确隐藏文本`Website Name`？如此处所示：[使用 css 隐藏文本](https://stackoverflow.com/questions/471510/hide-text-using-css)或此处[https://stackoverflow.com/a/2705328](https://stackoverflow.com/a/2705328)，我已经看到了各种隐藏文本的方法，例如：

```
#web-title span { text-indent: -9999px; } 
```

或者

```
#web-title span { font-size: -9999px; } 
```

或者

```
#web-title span { position: absolute; top: -9999px; left: -9999px; } 
```

我还看到一些结合了这三种方法。但实际上哪一个是有效隐藏文本的最佳实践？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-08T14:12:44.387

实际上，最近出现了一项新技术。本文将回答您的问题：[http ://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement)

```
.hide-text {
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
} 
```

它是可访问的，具有比-99999px更好的性能。

**更新**：正如@deathlock 在评论区提到的，上述修复的作者（[Scott Kellum](http://scottkellum.com)）建议使用[透明字体](http://blogs.adobe.com/typblography/2013/03/introducing-adobe-blank.html "土坯空白")：[http ://scottkellum.com/2013/10/25/the-new-kellum-method .html](http://scottkellum.com/2013/10/25/the-new-kellum-method.html)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-02-01T17:38:36.907

你可以简单地让它透明

```
{
   width: 20px;
   height: 20px;
   overflow: hidden; 
   color:transparent;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-08T14:10:51.083

你不能`display: none;`像这样简单地使用吗

HTML

```
<div id="web-title">
   <a href="http://website.com" title="Website" rel="home">
       <span class="webname">Website Name</span>
   </a>
</div> 
```

CSS

```
.webname {
   display: none;
} 
```

或者，如果您担心保留空间，那么如何玩弄能见度

```
.webname {
   visibility: hidden;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-08T14:49:50.137

大多数开发人员的做法是：

```
<div id="web-title">
   <a href="http://website.com" title="Website" rel="home">
       <span class="webname">Website Name</span>
   </a>
</div>

.webname {
   display: none;
} 
```

我曾经也这样做过，直到我意识到您正在为设备隐藏内容。又名屏幕阅读器等。

所以通过：

```
#web-title span {text-indent: -9000em;} 
```

您确保文本仍然可读。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-27T06:59:23.367

将 .hide-text 类添加到具有文本的跨度

```
.hide-text{
display:none;
 } 
```

或使文本透明

```
.hide-text{
 color:rgba(0,0,0,0);
 } 
```

根据您的用例使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T14:32:10.337

如果您愿意在您的标记中容纳这一点（就像您在持有文本的问题中提出的那样），我会使用他们的[CSS 帮助](https://github.com/jquery/jquery-ui/blob/master/themes/base/jquery.ui.core.css)程序中使用的任何 jQuery UI ：

```
.ui-helper-hidden-accessible { 
    position: absolute !important; 
    clip: rect(1px 1px 1px 1px); 
    clip: rect(1px,1px,1px,1px); 
} 
```

如果您绝对拒绝为要隐藏在图像容器中的文本添加额外标记，则图像替换技术很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T04:52:24.827

谷歌（搜索机器人）需要的是相同的内容应该提供给机器人，因为它提供给用户。缩进文本（任何文本）会让机器人认为它是垃圾邮件，或者您正在向用户和机器人提供不同的内容。

最好的方法是直接使用徽标作为锚标签内的图像。为您的图像添加“alt”。这将非常适合机器人阅读，也将有助于图像搜索。

这是直接出自马口：[http ://www.youtube.com/watch?v=fBLvn_WkDJ4](http://www.youtube.com/watch?v=fBLvn_WkDJ4)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-24T15:09:14.273

截至 2015 年 9 月，最常见的做法是使用以下 CSS：

```
.sr-only{
    clip: rect(1px, 1px, 1px, 1px);
    height: 1px;
    overflow: hidden;
    position: absolute !important;
    width: 1px;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-22T19:06:15.087

我这样做：

```
.hidden-text {
  left: 100%;
  display: inline-block;
  position: fixed;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-13T04:34:38.850

其他方式

```
position: absolute;
top: 0px;
left: -5000px; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-24T18:13:01.340

它可能会起作用。

```
.hide-text {
    opacity:0;
    pointer-events:none;
    overflow:hidden;
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2014-06-17T16:03:56.337

我意识到这是一个老问题，但是 Bootstrap 框架有一个内置类（仅限 sr）来处理除屏幕阅读器之外的所有内容上的隐藏文本：

```
<a href="/" class="navbar-brand"><span class="sr-only">Home</span></a> 
```

# php - PHP解析关联数组

> ID：12783420
> 
> 赞同：4
> 
> 时间：2012-10-08T14:07:45.963
> 
> 标签：php, associative-array

我有一个快速的问题，即使它应该很简单，我似乎也无法弄清楚。

我有以下结构的关联数组：

```
 [uk] => Array
        (
            [TW] => 1588
            [LY] => 12936
            [LW] => 13643
        ) 
```

我将其显示在 HTML 表格中，如下所示。

```
foreach ($leads as $country) {
    echo '<tr><td>' . $country . '</td><td>' . $country['TW'] . '</td><td>' . $country['LY'] . '</td><td>' . $country['LW'] . '</td></tr>';
} 
```

但是这个国家出来了，`Array`所以我只是想知道我做错了什么才能把这个`uk`部分拿出来。

**输出**

```
Array   1588    12936   13643 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:09:04.010

使用类似的东西：

```
foreach ($leads as $name => $country) {
    echo '<tr><td>' . $name. '</td><td>' . $country['TW'] . '</td><td>' . $country['LY'] . '</td><td>' . $country['LW'] . '</td></tr>';
} 
```

现在，`$name`在循环中是键（在本例中为“uk”）并且`$country`是元素的值，在本例中为数组`(TW => 1588, LY => 12936, LW => 13643)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T14:09:57.620

如果您想获取正在循环的项目的键，则需要使用不同的`foreach`语法：

```
foreach($leads as $code=>$country) {
    var_dump($code,$country);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:11:25.887

您需要为每个 $country 项目提取数组键。将其添加到 foreach。

```
foreach ($leads as $key => $country) {
echo '<tr><td>' . $key . '</td><td>' . $country['TW'] . '</td><td>' . $country['LY'] . '</td><td>' . $country['LW'] . '</td></tr>';
  } 
```

# python - 懒惰地提供字符串的值

> ID：12783422
> 
> 赞同：0
> 
> 时间：2012-10-08T14:07:46.637
> 
> 标签：python, lazy-evaluation

我有一个 python 对象，它在概念上允许通过迭代器和获取器访问一个充满字符串的数组。但是，由于计算数组中每个元素的确切值非常昂贵，我正在考虑为数组中每个插槽的内容返回一个代理对象，然后在真正需要时动态计算实际值。

也就是说，我想写这个：

```
bar = foo.get(10) # just returns a proxy
baz = bar # increase proxy reference
l = [baz] # actually increase proxy reference again.
print baz # ooh, actually need the value. Calculate it only the fly.
v = '%s' % bar # I need the value here again
if bar is None: # I need the value here again
    print 'x'
if bar: # I need the value here again
    print 'x'
for i in bar: # I need the value here again
    print i 
```

在 C++ 中，我会尝试重载取消引用运算符...知道吗？

我知道对于每种情况，我都可以重载特定的 python 'magic' 函数（例如`__str__`for `print baz`），但我想知道是否：

*   这实际上将涵盖所有可能的用例（有没有办法访问不涉及使用 python 魔术函数的变量的内容）
*   有一种更通用的方法可以做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:09:13.447

在 python 中，您将返回一个自定义类型，并覆盖该[`__str__()`](http://docs.python.org/reference/datamodel.html#object.__str__)方法以在打印时计算字符串表示形式。

```
class MyCustomType(object):
    def __str__(self):
        return "My string is really costly to produce" 
```

根据您的用例，您仍在查看 python 提供的各种钩子：

*   自定义类的属性访问可以与[`__getattr__`](http://docs.python.org/reference/datamodel.html#object.__getattr__)方法挂钩，或者使用[`property`](http://docs.python.org/library/functions.html#property).
*   访问类似序列的类（列表、元组、字符串）*和*映射类型的类中的单个项目可以使用[`__getitem__`](http://docs.python.org/reference/datamodel.html#object.__getitem__).

您必须根据您的用例决定需要挂钩的*内容*，此时您不可避免地需要进行昂贵的计算。Python 将让您轻松地钩住对象生命周期中的几乎*任何*时间点。

# magento - Magento URL 重写管理保留 GET 参数

> ID：12783424
> 
> 赞同：3
> 
> 时间：2012-10-08T14:07:49.657
> 
> 标签：magento, rewrite

我使用 Magneto 的 URL 重写管理来重定向一堆页面。但是，URL 带有附属信息，即`www.mysite.com/?aff=123` 当 Magneto 重定向到正确的页面时，它会丢失 aff=123。

我怎样才能保存这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:10:48.410

实际上，在 Magento 内部没有办法做到这一点。您需要在 Apache mod_rewrite 编辑 .htaccess 文件上执行此操作，并将**[QSA]**（查询字符串附加）放在重定向行的末尾。

例如：

```
RewriteRule somedir/(.*) somedir2/$1 [QSA] 
```

它会重定向

www.mysite.com/somedir/hello.php?test=1

至

www.mysite.com/somedir2/hello.php?test=1

# python - 使用 Python 的 ast 从类中获取属性

> ID：12783427
> 
> 赞同：2
> 
> 时间：2012-10-08T14:08:02.487
> 
> 标签：python

我正在尝试使用 ast 打开一个 .py 文件，并为文件中的每个类提供我想要的属性。

但是，我无法按预期行事。

我希望能够做到

```
import ast

tree = ast.parse(f)
for class in tree:
    for attr in class:
        print class+" "+attr.key+"="+attr.value 
```

例如; 有点像带有 XML 的 ElementTree。或者也许我在 ast 背后有一个完全错误的想法，在这种情况下，是否有可能以另一种方式做到这一点（如果没有，我会写一些东西来做到这一点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T05:22:44.853

比这复杂一点。您必须了解 AST 的结构和所涉及的 AST 节点类型。另外，使用`NodeVisitor`类。尝试：

```
import ast

class MyVisitor(ast.NodeVisitor):
    def visit_ClassDef(self, node):
        body = node.body
        for statement in node.body:
            if isinstance(statement, ast.Assign):
                if len(statement.targets) == 1 and isinstance(statement.targets[0], ast.Name):
                    print 'class: %s, %s=%s' % (str(node.name), str(statement.targets[0].id), str(statement.value))

tree = ast.parse(open('path/to/your/file.py').read(), '')
MyVisitor().visit(tree) 
```

有关更多详细信息，请参阅[文档](http://docs.python.org/2/library/ast.html)。

# php - Pear Mail, how to send plain/text + text/html in UTF-8

> ID：12783435
> 
> 赞同：13
> 
> 时间：2012-10-08T14:08:31.363
> 
> 标签：php, pear

I'm trying to send an email in both text and html, but I can't correctly send the right headers. In particular, I'd like to set the Content-Type header, but I can't find how to set it separately for html and text parts.

This is my code:

```
$headers = array(
  'From'          => 'info@mydomain.com',
  'Return-Path'   => 'info@mydomain.com',
  'Subject'       => 'mysubject',
  'text_encoding' => '7bit',
  'text_charset'  => 'UTF-8',
  'html_charset'  => 'UTF-8',
  'head_charset'  => 'UTF-8',
  'Content-Type'  => 'text/html; charset=UTF-8'
);

$mime = new Mail_mime();

$html = '<html><body><b>my body</b></body></html>';
$text = 'my body';

$mime->setTXTBody($text);
$mime->setHTMLBody($html);

$body = $mime->get();
$headers = $mime->headers($headers);
$mail_object =& Mail::factory('smtp', $GLOBALS['pear_mail_config']);
$mail_object->send('test@mydomain.com', $headers, $body); 
```

That's the email I get:

```
From: info@mydomain.com
Subject: mysubject
text_encoding: 7bit
text_charset: UTF-8
html_charset: UTF-8
head_charset: UTF-8
Content-Type: multipart/alternative;
    boundary="=_7adf2d854b1ad792c802a9db31084520"
Message-Id: <.....cut.....>
Date: Mon,  8 Oct 2012 15:40:54 +0200 (CEST)
To: undisclosed-recipients:;

--=_7adf2d854b1ad792c802a9db31084520
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"

my body

--=_7adf2d854b1ad792c802a9db31084520
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html; charset="ISO-8859-1"

<html><body><b>my body</b></body></html>
--=_7adf2d854b1ad792c802a9db31084520-- 
```

It seems that the Content-Type header I set is totally ignored. I'd have expected some setHTMLHeaders and setTXTHeaders functions, but it seems like there's nothing like this. Am I missing something? How can I set both Content-Type headers to UTF-8?

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-08T15:16:50.797

I discovered that the headers are supposed to be written differently. In particular, some of them are parameters for the mime object, and not email headers. Then the mime_params array should be passed to the get() function.

This is the correct way to set the headers:

```
$headers = array(
  'From'          => 'info@mydomain.com',
  'Return-Path'   => 'info@mydomain.com',
  'Subject'       => 'mysubject',
  'Content-Type'  => 'text/html; charset=UTF-8'
);

$mime_params = array(
  'text_encoding' => '7bit',
  'text_charset'  => 'UTF-8',
  'html_charset'  => 'UTF-8',
  'head_charset'  => 'UTF-8'
);

$mime = new Mail_mime();

$html = '<html><body><b>my body</b></body></html>';
$text = 'my body';

$mime->setTXTBody($text);
$mime->setHTMLBody($html);

$body = $mime->get($mime_params);
$headers = $mime->headers($headers);
$mail_object =& Mail::factory('smtp', $GLOBALS['pear_mail_config']);
$mail_object->send('test@mydomain.com', $headers, $body); 
```

# python - 使 GTK TreeView 中的行不可选择

> ID：12783444
> 
> 赞同：1
> 
> 时间：2012-10-08T14:09:14.087
> 
> 标签：python, gtk, pygtk

我想让 PyGTK 树视图（耦合到列表存储）的选定行不可选择，如果可能的话，变灰。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-05T11:19:25.203

正确的方法是使用[`gtk.TreeSelection.set_select_function`](http://pygtk.org/docs/pygtk/class-gtktreeselection.html#method-gtktreeselection--set-select-function). 关于如何使行变灰，可以使渲染器对它们不敏感（参见`sensitive=1`下面的示例）。

下面的一个例子：

```
import pygtk
pygtk.require('2.0')
import gtk

def main():
    """Display treeview with one row not selectable."""
    window = gtk.Window()
    store = gtk.ListStore(str, bool)
    for row in (('A', True), ('B', False), ('C', True)):
        store.append(row)

    treeview = gtk.TreeView(store)
    renderer = gtk.CellRendererText()
    column = gtk.TreeViewColumn('Name', renderer, text=0, sensitive=1)
    treeview.append_column(column)
    window.add(treeview)

    selection = treeview.get_selection()
    selection.set_select_function(
        # Row selectable only if sensitive
        lambda path: store[path][1]
    )
    selection.set_mode(gtk.SELECTION_MULTIPLE)
    window.show_all()
    gtk.main()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T20:52:43.083

这是一个有点骇人听闻的最小代码，但它将无法选择中间行（'B'）。如果您希望记住先前的选择，应该很容易只存储在信号回调结束时选择了哪些行，如果选择了错误的行，则覆盖当前选择。

至于各个行并使它们变灰，我不确定......但这里的这个例子似乎可以处理它：[http ://coding.debuntu.org/python-gtk-treeview-rows-different-colors](http://coding.debuntu.org/python-gtk-treeview-rows-different-colors)

```
import pygtk
pygtk.require('2.0')
import gtk

def clicked(selection):

    global selection_signal

    liststores, listpaths = selection.get_selected_rows()
    for selected_row in xrange(len(listpaths)):
        #The 1 looks for the 'B' row
        if listpaths[selected_row][0] == 1:
            #Blocking the handler so that the reverting doesn't invoke a callback
            selection.handler_block(selection_signal)
            selection.unselect_path(listpaths[selected_row])
            selection.handler_unblock(selection_signal)

w = gtk.Window()
treemodel = gtk.ListStore(str)
for r in ('A', 'B', 'C'):
    treemodel.append([r])

treeview = gtk.TreeView(treemodel)
w.add(treeview)
tv_cell = gtk.CellRendererText()
tv_column = gtk.TreeViewColumn("Header", tv_cell, text=0)
treeview.append_column(tv_column)
selection = treeview.get_selection()
selection_signal = selection.connect("changed", clicked)
selection.set_mode(gtk.SELECTION_MULTIPLE)
w.show_all() 
```

# node.js - socket.io - 没有信息或调试数据并且 io.set 使服务器崩溃

> ID：12783450
> 
> 赞同：0
> 
> 时间：2012-10-08T14:09:39.787
> 
> 标签：node.js, socket.io

首先是一点代码。这是服务器代码：

```
var http = require('http');
var url = require('url');
var fs = require('fs');
var io = require('socket.io');

var server = http.createServer(function(req, res){
var path = url.parse(req.url).pathname;

switch(path){
    case '/':
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end('<!DOCTYPE html><html><head><title>Learn socket.io</title><meta charset="UTF-8"></head><body><h1>OK</h1></body></html>');
    break;
case '/socket.html':
    fs.readFile(__dirname + path, 'UTF-8', function(error, data){
        if(error){
        res.writeHead(404);
        res.end('<!DOCTYPE html><html><head><title>Learn socket.io</title><meta charset="UTF-8"></head><body><h1>OEPS!!! 404 error</h1></body></html>');
    }else{
        res.writeHead(200, {'Content-Type': 'text/html; charset=utf-8'});
        res.end(data, 'UTF-8');
    }
    });
    break;
default:
    res.writeHead(404);
    res.end('<!DOCTYPE html><html><head><title>Learn        socket.io</title><meta charset="UTF-8"></head><body><h1>OEPS!!! 404 error</h1></body></html>');
    }
});
server.listen(8001);
io.listen(server);
//io.set('log level', 1);
//io.sockets.on('connection', function(socket){
//socket.emit('message', {'content':'Server sending connection event'});
//});
console.log('Serveur started on 8001'); 
```

而socket.html页面：

```
<html>
    <head>
    <title>File uploader</title>
    <script src="http://localhost:8001/socket.io/socket.io.js"></script>
    <script>
        var socket = io.connect();

    socket.on('connecting', function(){
        console.log('Socket fire connecting event.');
    });

    socket.on('connect', function(){
        console.log('Socket fire connect event.');
    });

    socket.on('disconnect', function(){
        console.log('Socket fire disconnect event.');
    });

    socket.on('message', function(data){ //message, callback
        console.log(data.content);
    });

    socket.on('connect_failed', function(){
        console.log('socket could not connect.');
    });

    socket.on('error', function(){
        console.log('An error occured.');
    });

    </script>
    </head>
    <body>

    <h1>This is our new socket.html file</h1>
    </body>
</html> 
```

这里没有什么特别的，只有代码来学习这个东西。一切正常，但是当我取消注释“io.set('log level', 1);” 或 io.socket.on ...，我无法再连接到服务器了。此外，在命令提示符（windows ...）上，我得到了“信息-”或“调试-”，但仅此而已，按照我在不同博客中看到的内容，我应该有这样的东西： info - socket.io started,调试 - 提供静态内容 /socket.io.js

有人能说我的代码有什么问题吗？

提前谢谢你，米歇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:52:41.747

`server.listen(8001);` 更改`io.listen(server);`为`io = io.listen(server);`访问您的 socket.io 服务器实例后。

# xcode - 在 Storyboard 文件中与 inferredMetricsTieBreakers 发生合并冲突

> ID：12783451
> 
> 赞同：47
> 
> 时间：2012-10-08T14:09:39.850
> 
> 标签：xcode, interface-builder

每当我在故事板文件中遇到冲突时，我通常可以解决它。但是，我有一个问题在两周内出现了两次。

在我的 Storyboard 文件的最底部，我看到名为“inferredMetricsTieBreakers”的块，其中包含一堆“segue”标签。似乎我的本地仓库中的某些 segue 与远程仓库中的另一个 segue 冲突。为了安全起见，我可以“选择两者”。但由于这种情况以前发生过一次，我担心它会继续发生，最终在我的故事板文件末尾有一个长长的这些 segue 引用列表。

只是想知道是否有人对文件中的这些标签非常了解，或者我是否应该盲目地继续“选择两者”并忽略这个问题。

谢谢，-丹。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-07-28T20:38:28.193

故事板中的每个视图控制器都有“模拟指标”，您可以在属性检查器中看到：

![在此处输入图像描述](../Images/62342dbf36b30ae1824421cd7f10408e.png)

其中一些指标是推断的（因此，推断指标）。

正如@thesystem 所提到的，如果给定的视图控制器是多个转场的目的地，则转场的源视图控制器的模拟指标之间可能存在差异。为了解决这些差异，IB 在解析目标视图控制器的推断指标时选择了一个 segue 来打破平局。

@rick-pastoor 的结论是删除整个`inferredMetricsTieBreakers`部分是安全的，这是正确的，因为 IB 可以选择不同的打破平局的 segues。但是，不能保证新的决胜局会在 IB 中产生相同的布局结果。*

例如，我遇到过这样一种情况，根据决胜局的转场，在 IB 中显示的视图控制器有或没有状态栏。在这两种情况下，它的视图都保持了 568pts 的高度，因此顶部布局指南的位置不断变化。这滚雪球般地导致对受限于顶部布局指南的视图框架进行其他不希望的（并且在很大程度上无意义的）更改。

基于这些观察，不建议同时选择新旧推断指标集。相反，删除这两个集合，然后在 IB 中打开故事板，以便在提交合并之前打破联系。为避免由于打破平局的变化而导致不希望的帧更改，请为目标视图控制器的相关模拟指标选择“推断”以外的一些值。这将确保 IB 生成一致的布局结果。

* 运行时的结果应该是相同的，除非有任何逻辑在视图取消归档后立即依赖于初始布局。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-31T16:40:52.670

同样的事情在这里发生。使用“同时选择”方法后，我的故事板文件中出现错误。发现在情节提要中搜索转场引用会导致该部分中提到的一个转场`inferredMetricsTieBreakers`。从列表中删除 segue 解决了我的破坏性构建。

为了尝试找出它的`inferredMetricsTieBreakers`作用，我尝试先删除整个部分。打破我的构建。接下来我删除了所有项目。在构建期间，Xcode 在我的列表中添加了 2 个新的和不同的 segue（在合并之前我有 3 个）。我正在构建的应用程序运行良好。

我的结论是：删除所有项目并执行干净的构建是安全的。这将使您的故事板保持清洁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-11T09:26:38.977

看起来，当情节提要中的一个视图控制器通过 segue 从两个或多个其他视图控制器连接并且其模拟指标设置设置为“推断”但 Xcode 无法确保推断意味着恰好一个指标设置（风景或肖像）在任何情况下。

我通过将所有控制器模拟指标更改为“推断”来修复它，并且所有指标都是从具有固定模拟指标设置“景观”的控制器推断出来的。之后，我从该部分（但不是该部分本身）中删除了 tie-breaker segue id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-01T22:47:02.243

将指标从 Inferred 更改为 Freeform（Xcode 8、Swift 3）。解决了我的问题。

# mef - 将 MEF 与配置文件一起使用来指定插件路径是否常见？

> ID：12783454
> 
> 赞同：0
> 
> 时间：2012-10-08T14:09:45.370
> 
> 标签：mef

我听说 MEF 减少了创建配置文件的需要，但如果我有几个不同的插件路径，这些路径因运行应用程序的客户端而异，那么拥有一个指定正确路径的配置文件是否常见且是个好主意。我想避免循环遍历所有 DLL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:59:02.943

通常人们在应用程序运行的地方有一个众所周知的插件目录，即\Extensions。但是，没有任何特殊原因您不能为目录或确切的扩展程序集执行配置文件。

# ios - lexicontext ios sdk 是否在 utf8 中提供自动完成功能

> ID：12783455
> 
> 赞同：1
> 
> 时间：2012-10-08T14:09:47.597
> 
> 标签：ios, dictionary

lexicontext ios sdk 是否在 utf8 中提供自动完成功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:32:00.437

恐怕不是开箱即用。

[但我认为使用字典的搜索 API](http://www.lexicontext.com/usage.html#usage-search)添加这个功能应该不会太难。

```
// first obtain a reference to the dictionary
Lexicontext *dictionary = [Lexicontext sharedDictionary];

// later, given a prefix that the user typed, do something like:
NSDictionary *words = [dictionary wordsWithPrefix:prefix]; 
```

您可能应该开始为至少 2 个字符的前缀提供自动完成功能。否则，您可能会得到*很*长的结果。例如，`[dictionary wordsWithPrefix:@"a"]`返回的结果大约有 1800 个形容词、400 个副词、500 个动词……而且可能太慢了 :)

# nhibernate - NHibernate 多对一复合 ID 生成太多查询

> ID：12783456
> 
> 赞同：1
> 
> 时间：2012-10-08T14:09:48.150
> 
> 标签：nhibernate, nhibernate-mapping, composite-key, many-to-one

我正在使用旧数据库并具有以下映射：

个人基础：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Example.Person" assembly="Example">
  <class name="PersonBase" table="WN" lazy="false">
    <id name="Id" column="`id`" type="int" >
      <generator class="identity"/>
    </id>
    <property name="Name" column="`NAAM`" type="string"  />
    <property name="FirstName" column="`VOORNAAM`" type="string"  />

    <many-to-one name="Section" class="CodeDescription" lazy="false"  not-found="ignore" fetch="join" outer-join="true">
      <formula>'96'</formula>
      <column name="SEKTIE" />
      <formula>'1'</formula>
    </many-to-one>

    <many-to-one name="Country" class="CodeDescription" lazy="false"  not-found="ignore" fetch="join" outer-join="true">
      <formula>'25'</formula>
      <column name="Per_countryCD" />
      <formula>'1'</formula>
    </many-to-one>
  </class>
</hibernate-mapping> 
```

代码说明：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
         namespace="Example.Person"
         assembly="Example">
  <class name="CodeDescription" table="Code" lazy="false">
    <composite-id>
      <key-property name="Kind" column="`CD_SRT`" type="string"/>
      <key-property name="Code" column="`CD`" type="string"  />
      <key-property name="Language" column="`CD_TAAL`" type="string"  />
    </composite-id>

    <property name="Description" column="`OMSCHR`" type="string" />
    <property name="DescriptionShort" column="`OMSCHR_KORT`" type="string" />
    <property name="ExternalCode" column="`ExternalCode`" type="string" />
    <property name="ExternalCode2" column="`ExternalCode2`" type="string" />
  </class>
</hibernate-mapping> 
```

但是当我试图让我的人找到代码描述时，它会为每行生成 2 个额外的查询。

生成的查询：

```
 SELECT
        this_."NAAM" as y0_,
        this_."id" as y1_,
        this_."VOORNAAM" as y2_,
        '96' as y3_,
        this_.SEKTIE as y4_,
        @p0 as y5_,
        '25' as y6_,
        this_.Per_countryCD as y7_,
        @p0 as y8_ 
    FROM
        WN this_ 
    ORDER BY
        y0_ asc limit @p2;
    @p0 = 1 [Type: Int32 (0)],
    @p2 = 20 [Type: Int32 (0)]
NHibernate.SQL: 2012-10-08 16:07:24,013 [39] DEBUG NHibernate.SQL [(null)] - 
    SELECT
        codedescri0_."CD_SRT" as CD1_33_0_,
        codedescri0_."CD" as CD2_33_0_,
        codedescri0_."CD_TAAL" as CD3_33_0_,
        codedescri0_."OMSCHR" as OMSCHR5_33_0_,
        codedescri0_."OMSCHR_KORT" as OMSCHR4_33_0_,
        codedescri0_."ExternalCode" as External6_33_0_,
        codedescri0_."ExternalCode2" as External7_33_0_ 
    FROM
        Code codedescri0_ 
    WHERE
        codedescri0_."CD_SRT"=@p0 
        and codedescri0_."CD"=@p1 
        and codedescri0_."CD_TAAL"=@p2;
    @p0 = '96' [Type: String (0)], @p1 = '115' [Type: String (0)], @p2 = '1' [Type: String (0)]
NHibernate.SQL: 2012-10-08 16:07:24,015 [39] DEBUG NHibernate.SQL [(null)] - 
    SELECT
        codedescri0_."CD_SRT" as CD1_33_0_,
        codedescri0_."CD" as CD2_33_0_,
        codedescri0_."CD_TAAL" as CD3_33_0_,
        codedescri0_."OMSCHR" as OMSCHR5_33_0_,
        codedescri0_."OMSCHR_KORT" as OMSCHR4_33_0_,
        codedescri0_."ExternalCode" as External6_33_0_,
        codedescri0_."ExternalCode2" as External7_33_0_ 
    FROM
        Code codedescri0_ 
    WHERE
        codedescri0_."CD_SRT"=@p0 
        and codedescri0_."CD"=@p1 
        and codedescri0_."CD_TAAL"=@p2;
    @p0 = '96' [Type: String (0)], @p1 = '115' [Type: String (0)], @p2 = '1' [Type: String (0)]
NHibernate.SQL: 2012-10-08 16:07:24,016 [39] DEBUG NHibernate.SQL [(null)] - 
    SELECT
        codedescri0_."CD_SRT" as CD1_33_0_,
        codedescri0_."CD" as CD2_33_0_,
        codedescri0_."CD_TAAL" as CD3_33_0_,
        codedescri0_."OMSCHR" as OMSCHR5_33_0_,
        codedescri0_."OMSCHR_KORT" as OMSCHR4_33_0_,
        codedescri0_."ExternalCode" as External6_33_0_,
        codedescri0_."ExternalCode2" as External7_33_0_ 
    FROM
        Code codedescri0_ 
    WHERE
        codedescri0_."CD_SRT"=@p0 
        and codedescri0_."CD"=@p1 
        and codedescri0_."CD_TAAL"=@p2;
    @p0 = '96' [Type: String (0)], @p1 = '115' [Type: String (0)], @p2 = '1' [Type: String (0)]

    And so on .... (for every row) 
```

这是一个巨大的性能损失，因为如果我完全映射我的人，它将有 20 个 CodeDescriptions。

编辑 - 我的复合 ID 类：

```
public class CodeDescription
    {        
        public string Code { get; set; }

        public string Description { get; set; }

        public string DescriptionShort { get; set; }

        public string ExternalCode { get; set; }

        public string ExternalCode2 { get; set; }

        public CodeDescriptionKind Kind { get; set; }

        public string Language { get; set; }

        public override bool Equals(object obj)
        {
            return base.Equals(obj);
        }

        public override int GetHashCode()
        {
            return base.GetHashCode();
        }

        public override string ToString()
        {
            return Description;
        }

        public CodeDescription()
        {

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:55:56.710

您可以仔细检查您的 euqals 和 gethashcode 是否在具有复合 ID 的类上正确实现？它通常是这种奇怪事情的来源。`Equals`并且`GetHashcode`应该模仿复合主键相等

# javascript - JavaScript：单击按钮时的简单图像加载

> ID：12783458
> 
> 赞同：0
> 
> 时间：2012-10-08T14:09:57.987
> 
> 标签：javascript, image

我对 JavaScript 相当陌生，虽然不是编程。我的练习是有一个显示图像的页面，并允许用户通过单击按钮转到下一个/上一个图像。我想在单击按钮时从服务器加载下一张/上一张图像，因此页面不必一次将所有图像加载到浏览器中。

这个版本只有一个按钮可以转到下一个图像，我正在尝试使用 jQuery 或 AJAX 加载它。该页面加载了初始的“image0”，JavaScript 调试器显示 onClick 事件执行并执行了我所期望的操作，但图像没有改变。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
var imageIndex = 0;
var jpgImageName = "image0"
var loadString = "images/" + jpgImageName + ".JPG";

function changeImage()
{
  imageIndex++;
  if (imageIndex > 2) { imageIndex = 0; }
  var locationString = "images/image" + imageIndex + ".JPG";
  var loadString = $("<img />").attr('src', locationString);
  $("imageSlot").append(loadString);
}

</script>
</head>
<body>

<div id="imageSlot">
  <img id="currentImage" src="images/image0.JPG" height="400" alt="image"+imageIndex/>
</div>
<button id="changeImage" onclick="changeImage()">Change Image</button>

</body>
</html> 
```

我`append`从另一个 Stack Overflow 示例中得到了这个函数。我想替换当前的图像，并且已经看到了一个建议来`html()`代替`append()`那个，但我想在开始更改示例之前我会尝试让它工作。

我还尝试了`.load()`图像本身的功能，仅使用下一张图像的 URL。这也不起作用，尽管试图在上面的示例中显示两者似乎可能会使阅读问题的人感到困惑。但是，如果您想向我展示如何以这种方式或两种方式解决它，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:19:34.160

如果您想用下一个替换当前图像，那么您可以尝试直接更改当前图像的 src：

```
function changeImage()
{
  imageIndex++;
  if (imageIndex > 2) { imageIndex = 0; }
  var locationString = "images/image" + imageIndex + ".JPG";
  $('#currentImage').attr('src', locationString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:11:18.320

你可以试试 $("#imageSlot").append(loadString); ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:14:05.357

将行更改为

```
$('img').attr('src', locationString); 
```

并删除 append()- 行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:36:58.090

为您的功能尝试以下类似的操作：

```
 function changeImage(){
      imageIndex++;
      imageIndex = imageIndex % 2; //here '2' is the number of images you have (result is always 0 or 1 in this case)
      var locationString = "images/image" + imageIndex + ".JPG";
      $('#currentImage').attr('src', locationString);//set the 'src' attribute inline

  } 
```

# java - 如何为标签颜色设置动画以使其发光？

> ID：12783459
> 
> 赞同：0
> 
> 时间：2012-10-08T14:10:04.227
> 
> 标签：java, animation, colors, swt

我正在编写一个 SWT 应用程序。

有没有办法让标签在 SWT 中发光？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:22:05.777

SWT 使用操作系统的小部件。有[`setForeground()`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#getForeground%28%29)和之类的方法[`setBackground()`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#getBackground%28%29)。但是，不能保证会使用设置的颜色（它们只是提示）。一般来说：没有内置的机制可以让你`Label`发光。

作为一种解决方法，将`Listener`for添加`SWT.Paint`到您的`Label`. 在 this`Listener`的`handleEvent`方法上，获取`Event`'`GC`并用它绘制任何你想要的东西：

```
label.addListener(SWT.Paint, new Listener() {
    public void handleEvent(Event event) {
        GC gc = event.gc;
        // paint what you want
    }
}); 
```

# android - Android如何从BroadcastReceiver知道屏幕锁定的状态

> ID：12783462
> 
> 赞同：0
> 
> 时间：2012-10-08T14:10:15.873
> 
> 标签：android, broadcastreceiver

我正在为来电开发自定义 UI。我几乎完成了这个，但现在我只想在屏幕打开并且用户有来电时加载我的自定义 UI 活动。我在 BroadcastReceiver (android.intent.action.PHONE_STATE) 做所有这些事情。那么是否可以从 BrodcastReceiver 获取屏幕开/关状态。

我尝试按照示例[http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)但从 BroadcastReceiver 注册接收器会给出编译时错误。

请给我建议。

```
public class MyPhoneReceiver extends BroadcastReceiver {

     @Override
     public void onReceive(Context context, Intent intent) {

          IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
          filter.addAction(Intent.ACTION_SCREEN_OFF);
          BroadcastReceiver mReceiver = new MyScreenReceiver();
          registerReceiver(mReceiver, filter); //this gives error "The method registerReceiver(BroadcastReceiver, IntentFilter) is undefined for the type MyPhoneReceiver"

     }
} 
```

清单.xml

```
<receiver android:name="MyPhoneReceiver" >
     <intent-filter>
          <action android:name="android.intent.action.PHONE_STATE"/>
     </intent-filter>
</receiver> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:41:03.420

registerReceiver() 是 Context 的一个方法，所以你应该调用`context.registerReceiver(mReceiver, filter);`

但您可以执行以下操作：

```
public class MyPhoneReceiver extends BroadcastReceiver {

     @Override
     public void onReceive(Context context, Intent intent) {

        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        if(pm.isScreenOn())
        {
            // load your UI
        }

     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:38:43.493

这是您的问题的解决方案..

```
public static boolean wasScreenOn = true;

@Override
public void onReceive(Context context, Intent intent) {
   if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        // DO WHATEVER YOU NEED TO DO HERE
        wasScreenOn = false;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        // AND DO WHATEVER YOU NEED TO DO HERE
        wasScreenOn = true;
    }

} 
```

# iphone - 动态高度表单元格性能问题

> ID：12783465
> 
> 赞同：0
> 
> 时间：2012-10-08T14:10:24.990
> 
> 标签：iphone, ios, uitableview

我有一个`UITableView`在旧手机上遇到性能问题的问题。表格单元格具有从网络中提取的动态内容，因此它们的高度各不相同。现在，我正在使用根据内容高度拉伸的单元格的背景图像。

在 iPhone 5 和 4S 上，表格滚动性能非常流畅，但在 iPhone 4 上则有点不稳定。

我相信问题是背景图片。现在，图像具有 alpha 透明度，可以为每个单元格添加阴影。我读到带有透明胶片的图像可能会导致 UITableViews 出现性能问题，但这是 2008 年的一篇文章，当时 iPhone 的整体速度并没有那么快。阿尔法透明度会导致问题吗？

另外，如果我以编程方式绘制单元格背景而不是使用背景图像，我会获得更好的性能吗？Facebook 和 Foursquare 等具有自定义动态单元格的应用程序如何绘制单元格的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:14:05.547

如果您自己绘制所有单元格内容，甚至替换常见的 UI 元素（例如`UILabel`和），则可以获得最佳性能`UIImageView`。

App Store 中许多成功的应用程序都使用了这种技术。而且，是的，如果性能是一个问题，请尽可能避免使用透明视图。

# perl - Perl中&后面的shuffle url参数

> ID：12783469
> 
> 赞同：1
> 
> 时间：2012-10-08T14:10:38.423
> 
> 标签：perl, shuffle

你好我想知道是否有人知道如何用 perl 洗牌一个 url，但只有`&`.

这是一个例子：

`anyurl=i&ct=1&cad=1&rsm=6&ei=JthyULClH8fH0QWcooD4Bw&zx=1349703728841`

这就是我要找的东西：

`anyurl=i&ei=JthyULClH8fH0QWcooD4Bw&cad=1&ct=1&rsm=6&zx=1349703728841`

只是为了让 & 后面的所有参数随机放置在不同的位置。所以我希望`&`每次打印后的所有参数都在不同的位置，这可能吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:22:08.430

```
#!/usr/bin/env perl
use strict;
use warnings;
use List::Util qw(shuffle);

my $url = 'http://www.anyurl.com/userdata?ct=1&cad=1&rsm=6&ei=JthyULClH8fH0QWcooD4Bw&zx=1349703728841';
my @parts = split(/\?/,$url);
my $parms = join('&',shuffle(split(/&/,$parts[1])));
my $shuffled = join('?',$parts[0],$parms);

print $shuffled; 
```

可以更短，但这是如何做到这一点的一步一步的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:10:21.333

尝试将查询字符串转换为数组，然后改组数组：

```
my $qryStr = 'ct=1&cad=1&rsm=6&ei=JthyULClH8fH0QWcooD4Bw&zx=1349703728841';

my @init = split('&', $qryStr);

my $i = @init;

my @shfld;

while($i--)
{
        my $j = int(rand($i+1));

        $shfld[$i] = $init[$j];
        splice(@init, $j, 1);
}

my $rslt = join('&', @shfld);

print "\nRESULT = ".$rslt; 
```

# c# - 表单身份验证，MVC3 项目中的自动重定向

> ID：12783471
> 
> 赞同：2
> 
> 时间：2012-10-08T14:10:42.300
> 
> 标签：c#, asp.net-mvc-3, forms-authentication

我正在开发一个 MVC3 项目，我必须添加一个登录机制。我必须使用`<authentication>`方法。我认为这会自动将用户重定向到登录页面？但什么都没有发生。

我的`web.config`文件中有这个：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

但是我的登录控制器不会自动调用。我该怎么做才能让它按我想要的方式工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T14:12:55.897

如果用户尝试访问受保护的资源（例如用该`[Authorize]`属性修饰的控制器操作）并且未通过身份验证，则用户将被重定向到登录页面。

如果您想将该`LogOn`操作用作您的起始页，那么您可以更新您的路由设置`Global.asax`以提供默认控制器和操作：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Account", action = "LogOn", id = UrlParameter.Optional }
); 
```

现在，当用户导航到时，`/` 他将自动看到登录屏幕。

# android - sendTextMessage(phoneNumber, null, message, null, null); 即使未发送消息也总是返回成功

> ID：12783476
> 
> 赞同：2
> 
> 时间：2012-10-08T14:10:51.933
> 
> 标签：android

我尝试使用[此链接](http://www.mkyong.com/android/how-to-send-sms-message-in-android/)进行短信活动 ，但问题是它总是给出“已发送消息”如何知道消息是否真的发送！

这是代码

```
try {
  SmsManager smsManager = SmsManager.getDefault();
  smsManager.sendTextMessage(phoneNo, null, sms, null, null);
  Toast.makeText(getApplicationContext(), "SMS Sent!",
    Toast.LENGTH_LONG).show();
  //...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:24:36.367

试试这个：

在 manifest.xml 中添加：

```
<uses-permission android:name="android.permission.SEND_SMS"> 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="Enter the phone number of recipient"
        />     
    <EditText 
        android:id="@+id/txtPhoneNo"  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"        
        />
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"         
        android:text="Message"
        />     
    <EditText 
        android:id="@+id/txtMessage"  
        android:layout_width="fill_parent" 
        android:layout_height="150px"
        android:gravity="top"         
        />          
    <Button 
        android:id="@+id/btnSendSMS"  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:text="Send SMS"
        />    
</LinearLayout> 
```

主要活动：

```
public class SMS extends Activity 
{
    Button  btnSendSMS;
    EditText txtPhoneNo;
    EditText txtMessage;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        

        btnSendSMS = (Button ) findViewById(R.id.btnSendSMS);
        txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
        txtMessage = (EditText) findViewById(R.id.txtMessage);

        btnSendSMS.setOnClickListener(new View .OnClickListener() 
        {
            public void onClick(View  v) 
            {                
                String  phoneNo = txtPhoneNo.getText().toString();
                String  message = txtMessage.getText().toString();                 
                if (phoneNo.length()>0 && message.length()>0)                
                    sendSMS(phoneNo, message);                
                else
                    Toast.makeText(getBaseContext(), 
                        "Please enter both phone number and message.", 
                        Toast.LENGTH_SHORT).show();
            }
        });        
    }    
} 
```

发送短信（）函数：

```
public class SMS extends Activity 
{
    //...

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        //...
    }

    //---sends an SMS message to another device---
    private void sendSMS(String  phoneNumber, String  message)
    {        
        PendingIntent pi = PendingIntent.getActivity(this, 0,
            new Intent(this, SMS.class), 0);                
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
    }    
} 
```

//---向另一台设备发送短信---：

```
private void sendSMS(String  phoneNumber, String  message)
    {        
        String  SENT = "SMS_SENT";
        String  DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context  arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context  arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                        
                }
            }
        }, new IntentFilter(DELIVERED));        

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
    } 
```

代码来源： http: [//mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:17:34.360

在提到的链接中，没有为 deliveryIntent 或 sentIntent 设置 PendingIntent 以便接收您需要发送 PendingIntent 的消息状态。看到这个[链接](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T10:19:07.563

我也遇到过类似的 NPE 情况，但我的问题是由于电话号码错误。

因此，您还必须检查**电话号码**是否正确。

# php - 在 PHP 中创建 PDF 缩略图并缓存它

> ID：12783477
> 
> 赞同：3
> 
> 时间：2012-10-08T14:10:57.620
> 
> 标签：php, pdf, imagick

我正在使用基于 PHP 的通用 CMS，我想创建一个脚本来读取 pdf 创建缩略图并缓存它。有很多不同的答案，我确实对不同版本的 imagick 有一些问题，但这是对我有用的脚本。

有些人可能会觉得它很有用，如果优化了，也许有人可以建议我？

```
<?php

$loc = *the file location*;
$pdf = *the file name*;
$format = "jpg";
$dest = "$loc$pdf.$format";

if (file_exists($dest))
        {
        $im = new imagick();
        $im->readImage($dest);
        header( "Content-Type: image/jpg" );
        echo $im;
        exit;
        }
else
    {
        $im = new imagick($loc.$pdf.'[0]');
        $im->setImageFormat($format);

        $width = $im->getImageheight();
        $im->cropImage($width, $width, 0, 0);
        $im->scaleImage(110, 167, true);

        $im->writeImage($dest);

        header( "Content-Type: image/jpg" );
        echo $im;
        exit;
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:34:19.867

**利用 PHP 和 ImageMagick 创建 PDF 缩略图**

[http://stormwarestudios.com/articles/leverage-php-imagemagick-create-pdf-thumbnails/](http://stormwarestudios.com/articles/leverage-php-imagemagick-create-pdf-thumbnails/)

在本文中，我们讨论使用 PHP 和 ImageMagick 从给定的 PDF 生成缩略图，将它们存储在临时（或“缓存”）目录中，并将它们提供给网络。

我们最近的一位客户请求显示通过我们为他们部署的 Joomla CMS 发布的 PDF 缩略图。

需求相当简单，但执行起来有点复杂。在安装 ImageMagick、ImageMagick PHP 绑定（顺便说一句不工作，并设计了一种解决方法）并调查了一些代码之后，确定了以下解决方案：

```
<?php
function thumbPdf($pdf, $width)
{
    try
    {
        $tmp = 'tmp';
        $format = "png";
        $source = $pdf.'[0]';
        $dest = "$tmp/$pdf.$format";

        if (!file_exists($dest))
        {
            $exec = "convert -scale $width $source $dest";
            exec($exec);
        }

        $im = new Imagick($dest);
        header("Content-Type:".$im->getFormat());
        echo $im;
    }
    catch(Exception $e)
    {
        echo $e->getMessage();
    }
}

$file = $_GET['pdf'];
$size = $_GET['size'];
if ($file && $size)
{
    thumbPdf($file, $size);
}
?> 
```

上面的代码假设你已经为临时目录提供了适当的权限（通常是 chmod 755 或 chmod 777，取决于你的勇气），你已经将上面的代码片段保存在一个名为 thumbPdf.php 的文件中，并放置这在您的网络服务器上可见的某个地方。

从 GET 获取参数后，代码检查目标临时目录，如果所需的图像不存在，则使用 ImageMagick 的转换程序生成 PDF 缩略图，缩小到适当的比例，并将图像保存在临时目录中。最后，它将缩略图重新加载到 ImageMagick PHP 对象中，并将内容输出到浏览器。

调用上述代码相当容易；只需从图像标签内调用 PHP 脚本，如下所示：

```
<img src="/path/to/thumbPdf.php?pdf=your.pdf&size=200" /> 
```

上面的代码将从“your.pdf”的第一页生成一个缩略图，大小为 200 像素宽和适当比例的高度。

祝你好运，快乐的网站管理员！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T17:10:23.623

I know it's been discussed here:

[Should I use a PHP extension for ImageMagick or just use PHP's Exec() function to run the terminal commands?](https://stackoverflow.com/questions/8264906/should-i-use-a-php-extension-for-imagemagick-or-just-use-phps-exec-function-t)

And to quote drew101:

> You would benefit a lot using the PHP extensions instead of using exec or similar functions. Built in extensions will be faster and use less memory as you will not have to spawn new processes and read the output back. The image objects will be directly available in PHP instead of having to read file output, which should make the images easier to work with.
> 
> If you have a busy site, creating lots of processes to edit images may start to slow things down and consume additional memory.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-04T12:59:24.100

如果您由于某种原因没有安装 Imagick php 库，您可以使用 ghost 脚本并使用以下示例生成 pdf 的缩略图：

```
exec('gs -dSAFER -dBATCH -sDEVICE=jpeg -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -r300 -sOutputFile=xyz.jpg xyz.pdf'); 
```

# python - islice 一次读取 N 行的问题

> ID：12783478
> 
> 赞同：1
> 
> 时间：2012-10-08T14:10:59.973
> 
> 标签：python, performance, chunks

我正在尝试使用“from itertools import islice”，以便使用 liblas 模块一次从 *.las 文件中读取多行。（我的目标是逐块阅读）

跟随问题：[Python如何一次读取N行](https://stackoverflow.com/questions/6335839/python-how-to-read-n-number-of-lines-at-a-time)

> islice() 可用于获取迭代器的下 n 个项目。因此，list(islice(f, n)) 将返回文件 f 的下 n 行的列表。在循环中使用它将为您提供 n 行块中的文件。在文件的末尾，列表可能会更短，最后调用将返回一个空列表。

我使用了以下代码：

```
from numpy import nonzero
from liblas import file as lasfile
from itertools import islice

chunkSize = 1000000

f = lasfile.File(inFile,None,'r') # open LAS
while True:
    chunk = list(islice(f,chunkSize))
    if not chunk:
        break
    # do other stuff 
```

但我有这个问题：

```
len(f)
2866390

chunk = list(islice(f, 1000000))
len(chunk)
**1000000**
chunk = list(islice(f, 1000000))
len(chunk)
**1000000**
chunk = list(islice(f, 1000000))
len(chunk)
**866390**
chunk = list(islice(f, 1000000))
len(chunk)
**1000000** 
```

当文件 f 最终到达时，islice 重新开始读取文件。

感谢您的任何建议和帮助。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:17:07.737

编写一个生成器一次生成 n 行似乎很容易：

```
def n_line_iterator(fobj,n):
    if n < 1:
       raise ValueError("Must supply a positive number of lines to read")

    out = []
    num = 0
    for line in fobj:
       if num == n:
          yield out  #yield 1 chunk
          num = 0
          out = []
       out.append(line)
       num += 1
    yield out  #need to yield the rest of the lines 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:31:24.897

更改`file.py`属于 liblas 包的源代码。目前`__iter__`被定义为（[src on github](https://github.com/libLAS/libLAS/blob/master/python/liblas/file.py#L316)）

```
def __iter__(self):
    """Iterator support (read mode only)

      >>> points = []
      >>> for i in f:
      ...   points.append(i)
      ...   print i # doctest: +ELLIPSIS
      <liblas.point.Point object at ...>
    """
    if self.mode == 0:
        self.at_end = False
        p = core.las.LASReader_GetNextPoint(self.handle)
        while p and not self.at_end:
            yield point.Point(handle=p, copy=True)
            p = core.las.LASReader_GetNextPoint(self.handle)
            if not p:
                self.at_end = True
        else:
            self.close()
            self.open() 
```

您会看到，当文件结束时，它会关闭并再次打开，因此迭代会在文件的开头重新开始。

尝试在`else`一段时间后删除最后一个块，因此该方法的正确代码应该是：

```
def __iter__(self):
    """Iterator support (read mode only)

      >>> points = []
      >>> for i in f:
      ...   points.append(i)
      ...   print i # doctest: +ELLIPSIS
      <liblas.point.Point object at ...>
    """
    if self.mode == 0:
        self.at_end = False
        p = core.las.LASReader_GetNextPoint(self.handle)
        while p and not self.at_end:
            yield point.Point(handle=p, copy=True)
            p = core.las.LASReader_GetNextPoint(self.handle)
            if not p:
                self.at_end = True 
```

# mysql - 收集mysql表的ID

> ID：12783480
> 
> 赞同：4
> 
> 时间：2012-10-08T14:11:06.990
> 
> 标签：mysql, binlog

目前正在开发一个二进制日志解析器，它读取由 mysql 数据库写入的二进制日志，以将更改写入 MongoDB 并将其转换为 MongoDB。这样，我想创建转换为 Json 的“物化视图”以用于进一步处理。在二进制日志中，只有一个对带有“tableId”的表的引用。

[我在http://dev.mysql.com/doc/refman/5.0/en/getting-information.html](http://dev.mysql.com/doc/refman/5.0/en/getting-information.html)中找不到有关表的其他元信息的任何参考

**那么如何找出哪个表有哪个ID呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:17:40.330

最后我找到了解决这个问题的方法。在二进制日志中的每个 WriteRowsEvent 之前，都会发生一个 TableMapEvent，它可以帮助您将发生的任何事情映射到表名旁边。

```
TableMapEvent[.... ,tableName=innodb_monitor, .... ] 
```

在那次事件之后，实际的更改事件发生并且只是在索引的帮助下描述使用的表，tableId ...

# iphone - UITableView 在显示搜索时被新的 UITableView 隐藏

> ID：12783481
> 
> 赞同：0
> 
> 时间：2012-10-08T14:11:09.187
> 
> 标签：iphone, ios, ipad, uitableview

我有一个带有视图的 UIViewController，其中包含一个 UITableView (myTableView) 和一些按钮。myTableView 还有一个搜索栏。在我开始搜索的那一刻，myTableView 被一个带有搜索结果的新 tableview 覆盖。由于 myTableView 只覆盖了一半屏幕，而新的 tableview 覆盖了整个屏幕，我有一个问题。如何将新的 UITableView 设置为仅覆盖与 myTableView 相同的屏幕部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:33:30.363

听起来您可能正在使用 UISearchDisplayController，它包含一个 UITableView 来显示搜索结果。如果您想自己滚动，只需使用 UISearchBar 及其委托方法来填充您自己的表而不是包含的结果视图。

# java - 在eclipse中调试java类

> ID：12783484
> 
> 赞同：0
> 
> 时间：2012-10-08T14:11:19.513
> 
> 标签：java, eclipse

> **可能重复：**
> [退回 Eclipse 调试器](https://stackoverflow.com/questions/4331336/step-back-in-eclipse-debugger)

我一直在eclipse中调试我的项目并在几个类中放置断点并在eclipse中按F6并从一个断点向前移动到另一个断点但是如果我想向后移动到反向流中的前一个断点怎么办有没有捷径因为 F6 带我们前进，那么后退呢？请指教..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:20:40.833

Only thing you can do is that if Object `A` calls `B` and `B` calls `C` your debugger is in `C` and you want to see variables/etc in object `A`, you can select `A` from the thread trace in debugger window and see that.

**Debugger flow doesn't move backwards** i.e. if there are two steps: `step-1` and `step-2` and `step-1` is complete, control is at `step-2`, the you can't go back to `step-1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:14:01.963

您可以使用“Drop to frame”操作将您带回到函数的开头。默认情况下，没有与此关联的键，但您可以在“Window / Preferences / General / Keys”中关联一个。但是你不能去上一个断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:17:39.717

eclipse中没有办法，但是您可以将代码设置为在运行方法后返回到前一点。利用

```
//declare a method
public void methodName()
{
    //code
} 
```

做一个方法。要调用该方法，请使用

```
methodName(); 
```

它将运行该方法，然后返回到上一点。

# javascript - 使用 javascript 或 jquery 为 textarea 自动换行

> ID：12783490
> 
> 赞同：0
> 
> 时间：2012-10-08T14:11:31.093
> 
> 标签：javascript, jquery, html, textarea

我需要`textarea`最多包含 5 行并且每行最多包含 15 个字符的功能，当用户编写 2 个单词时，例如 123456 123456789 并且如果该行字符限制超过 15，那么它应该将下一行的第二个单词与`\n`char 一起放在第一位行（意味着 123456 将在第一行以及`\n and 123456789`将在第二行），由于某些原因，我需要在我的数据库中维护`\n`（替换>）。`<br`

我写了这段代码，它在某些情况下给出了模糊的结果

```
<textarea onkeypress="charCountTextarea('txt1',event,'75','14')" id="txt1"></textarea> 

var countLines=0;

var newLines;

function charCountTextarea(textAreaId,e,limit,lineLen)
{   

       newLines = $("#"+textAreaId).val().split("\n").length;
       var t = $("#"+textAreaId)[0];
       var lineIndex = t.value.substr(0, t.selectionStart).split("\n").length-1;

    //console.log("new lines"+lineIndex);
        if(newLines >= 5 && $("#"+textAreaId).val().split("\n")[lineIndex].length>lineLen)
        {

            if( e.keyCode!=8 && e.keyCode!=46 && e.keyCode!=33 && e.keyCode!=34 && e.keyCode!=35 && e.keyCode!=36 && e.keyCode!=37 && e.keyCode!=38 && e.keyCode!=39 && e.keyCode!=40)
            {
                e.preventDefault();
                return false;
            }
        }

        else
        if($("#"+textAreaId).val().split("\n")[lineIndex].length>=lineLen)  // which will count the total line char condition
        {
            console.log($("#"+textAreaId).val().split("\n")[lineIndex][lineLen-1]);

            if($("#"+textAreaId).val().split("\n")[lineIndex][lineLen-1].indexOf(" ")==-1 && e.keyCode!=8 && e.keyCode!=46 && e.keyCode!=33 && e.keyCode!=34 && e.keyCode!=35 && e.keyCode!=36 && lineIndex != 4 && newLines<5)
            {
                // to bring the word in next line
                var str = $("#"+textAreaId).val(), replacement = '\n';
                str = str.replace(/ ([^ ]*)$/,replacement+'$1');
                $("#"+textAreaId).val(str);

            }
            else
            if(e.keyCode!=8 && e.keyCode!=46 && e.keyCode!=33 && e.keyCode!=34 && e.keyCode!=35 && e.keyCode!=36 && lineIndex!=4 && newLines<5)
            {
                // to insert next line              
                insertTextAtCaret(document.getElementById(textAreaId), "\n");
            }

        }

        if(e.keyCode == 13 && newLines >= 5) 
        {
            //linesUsed.css('color', 'red');
            e.preventDefault();
            return false;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:27:13.423

```
function charCountTextarea(textAreaId,e,limit,lineLen)
{   

    var code = e.charCode || e.keyCode;

    newLines = $("#"+textAreaId).val().split("\n").length;
    var t = $("#"+textAreaId)[0];
    var lineIndex = t.value.substr(0, t.selectionStart).split("\n").length-1;
    console.log('val t :'+$("#"+textAreaId).val()+' line index : '+lineIndex+' new lines '+newLines);

    if(lineIndex == 10 && $("#"+textAreaId).val().split("\n")[lineIndex].length>(lineLen+1) && code!=8 && code!=46 && code!=33 && code!=34 && code!=35 && code!=36 && code!=37 && code!=38 && code!=39 && code!=40)
    {
        $("#"+textAreaId).val(($("#"+textAreaId).val()).substring(0, $("#"+textAreaId).val().length - 1));
        alert('You are reached to limit');
        return false;
    }

    if(lineIndex<5)
    {
        $("#"+textAreaId).val($("#"+textAreaId).val().wordWrap(lineLen, "\n", 0));
    }
    var countLine1 = $("#"+textAreaId).val().split("\n")[0].length;

    if($("#"+textAreaId).val().split("\n")[lineIndex].length>lineLen)  // which will count the total line char condition
    {
        console.log("In condition : ");
        if(code!=8 && code!=46 && code!=33 && code!=34 && code!=35 && code!=36 && code!=37 && code!=38 && code!=39 && code!=40)
        {
            // to insert next line              
            insertTextAtCaret(document.getElementById(textAreaId), "\n");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:19:01.863

您无法知道输入是否会使用键盘输入。我可以用鼠标在那里粘贴文本。

我将依赖一个不断检查输入并采取您想要的操作的函数，一旦 textarea 获得焦点，我将使用该函数执行该函数，然后在 textarea 失去焦点`setInterval()`时使用该函数将其清除。`clearInterval()`

此函数将使用 a`RegExp`处理输入并将其拆分为必要的行。

**编辑：**这就是我的意思。

```
$('body').on('focus','#txt1',function(e) {
    $(this).data('int',setInterval(checkInput,1));
}).on('blur','#txt1',function(e) {
    clearInterval($(this).data('int'));
    $(this).removeData('int');
});

function checkInput() {
    var val = $('#txt1').val();
    // process val here
    $('#txt1').val(val);
} 
```

# python - 在 Mountain Lion OS X 上安装 Python igraph 的问题

> ID：12783492
> 
> 赞同：2
> 
> 时间：2012-10-08T14:11:36.493
> 
> 标签：python, installation, python-2.7, igraph

我已经使用 Brew 安装了 igraph C 库，

```
sudo brew install igraph 
```

然后我使用 pip 安装了 igraph python 库

```
sudo pip install python-igraph 
```

我继续 Python 控制台/终端并导入模块

```
>>> import igraph 
```

没问题。然后我测试看看版本号

```
>>> print igraph.__version__
0.6 
```

那里也没有问题。但是当我尝试创建图表时。

```
>>> g = Graph(1) 
```

我得到的只是

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'Graph' is not defined 
```

我试图重新安装所有东西，它只是继续做同样的事情。现在没有想法了。

我不认为我在做任何有趣的事情，只是按照[Python 教程页面](http://hal.elte.hu/~nepusz/development/igraph/tutorial/tutorial.html)的说明进行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:52:15.960

答案写在“从头开始创建图表”部分之前的[教程页面上：](http://hal.elte.hu/~nepusz/development/igraph/tutorial/tutorial.html)

> 从现在开始，文档中的每个示例都将假定 igraph 的对象和方法被导入到主命名空间中（即，我们使用`from igraph import *`而不是`import igraph`）。如果您让 igraph 采用自己的命名空间，请相应地调整所有示例。

所以底线是：

1.  如果您使用`import igraph`，请使用，`igraph.Graph(1)`因为`Graph`构造函数随后驻留在`igraph`命名空间中。

2.  如果您使用`from igraph import *`，请使用，`Graph(1)`因为`igraph`模块中的所有内容都已导入主命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:42:19.117

我用了

```
 from igraph import * 
```

这似乎奏效了。

此外，直接通过终端启动 igraph

```
$ igraph 
```

# matlab - 在 Matlab 中输入一个向量

> ID：12783494
> 
> 赞同：1
> 
> 时间：2012-10-08T14:11:42.657
> 
> 标签：matlab, casting

**版本：Matlab 2009a**

我正在使用 randsrc() 函数生成大小为 <1x116286> 的向量。由于我再次将其添加到相同大小但为 uint8 类型的矩阵中，因此我正在执行以下操作 -

```
l=typecast(randsrc(1,v(2)),'uint8'); 
```

现在，Matlab 更改了返回的元素向量 - [240,63,0] 而不是 [-1,1]，大小为 <1x930288 uint8>。这是预期的，因为 double 和 uint8 具有不同的大小，但我想要一个在类型转换后具有相同大小和值的向量。

PS：我想从大小为 <1x116286> 的矩阵上的所有值中减去或添加“1”。有没有其他巧妙的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:21:38.180

据我了解这个问题，上面有几个问题：

*   uint8 是无符号类型，因此不支持负偏移量；
*   “typecast”函数用于重新解释现有数据，而不是对其进行转换：在这里，您将 randsrc(...) 的浮点输出的每个字节解释为整数。

不幸的是，我没有方便的 Matlab 进行测试，但以下内容应该提供更接近您所追求的东西：

```
l = int8( randsrc(1,v(2)) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:50:31.983

好吧，我没有形成一个向量 (-1,1...) 并将其添加到某个向量 'z' ，而是做了这样的事情。

```
l =randsrc(1,v(2));
z(l==-1)=z(l==-1)-1;
z(l==1)=z(l==1)+1; 
```

所以，我现在，不需要改变类型。

# objective-c - 媒体播放器的最佳做法在消失时停止？

> ID：12783496
> 
> 赞同：0
> 
> 时间：2012-10-08T14:11:46.190
> 
> 标签：objective-c

我有一个选项卡式应用程序，其中一些视图控制器具有嵌入式视频播放器。出于显而易见的原因，我想在用户移动到另一个选项卡时停止视频（否则，它会继续在后台播放）。

在 iOS 5 中，我在视图控制器的 viewDidDisappear 中实现了这一点。但是，从 iOS 6 开始，媒体播放器的全屏模式似乎让底层视图“消失”了。因此，按下全屏按钮后，我的视频会停止 1 秒。

所以我的问题是：从媒体播放器容器移出时停止视频的最佳做法是什么，同时保持对全屏模式的支持？

# php - 使用 TCPDF write1DBarcode 在 PDF 中的 MySQL 数据布局问题

> ID：12783500
> 
> 赞同：1
> 
> 时间：2012-10-08T14:12:02.143
> 
> 标签：php, mysql, tcpdf

我正在尝试使用 TCPDF 提取 MySQL 数字数据，以便创建一个包含一维条码列表的 PDF 文件。数据库记录是动态变化和增长的。每行自动递增 1。

问题是我需要在两列中组织每页 8 到 10 个条形码的列表，但我无法设法以奇数/奇数顺序调用数据。每行仅显示前两条记录。

我想要达到的目标：

```
 |     1     |    2    |
_________________________
1 |  1st code | 2nd code

2 |  3rd code | 4th code 
```

... 等等...

我得到的是：

```
 |     1     |    2    |
_________________________
1 |  1st code | 2nd code

2 |  1st code | 2nd code 
```

这是我的 PHP - TCPDF 代码：

```
while($row = mysql_fetch_array($result))
{

$id = $row['id'];
$barcode = $row['barcode'];

if ($id % 2 != 0 & $id <= 2)
{

for ($i = 0; $i < 1; $i=$i+2)
{
$x = 15;
  $y = 25;
        $pdf->write1DBarcode($barcode, 'C39', $x, $y, '120', 18, 0.4,   $style, 'N');
}

for ($i = 1; $i < 2; $i=$i+2)
{
$x = 110;
$y = 25;
        $pdf->write1DBarcode($barcode, 'C39', $x, $y, '120', 18, 0.4,   $style, 'N');
    }
}
elseif ($id % 2 == 0 & $id <= 2)
{
    for ($i = 0; $i < 1; $i=$i+2)
{
$x = 15;
  $y = 50;
        $pdf->write1DBarcode($barcode, 'C39', $x, $y, '120', 18, 0.4,   $style, 'N');
}

for ($i = 1; $i < 2; $i=$i+2)
{
$x = 110;
$y = 50;
        $pdf->write1DBarcode($barcode, 'C39', $x, $y, '120', 18, 0.4,   $style, 'N');
    }
}
} 
```

提前致谢！

# cakephp - 使用 CakePHP 的 Form helper 生成下拉列表并添加自定义类

> ID：12783506
> 
> 赞同：0
> 
> 时间：2012-10-08T14:12:37.887
> 
> 标签：cakephp, select

我正在尝试`select`在我的 CakePHP 2.2 网站上生成一个用于过滤目的的 HTML 元素。

这是我在**View**中运行的代码：

```
echo $this->Form->input('proveedor_id', array(
    'type' => 'select', 
    'options' => $proveedores,
    'div' => array('class' => 'asd')
)); 
```

但是生成的`select`元素没有我想要的类`asd`。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:14:50.790

您正在将课程放在 div 上。如果你想要选择它的类

```
echo $this->Form->input('proveedor_id', array(
    'type' => 'select', 
    'options' => $proveedores,
    'class' => 'asd'
)); 
```

# jquery - jquery css方法在经常调用时输入错误的值

> ID：12783512
> 
> 赞同：0
> 
> 时间：2012-10-08T14:13:20.387
> 
> 标签：jquery, carousel

我正在尝试创建自己的 jquery 图像轮播，以使自己更加熟悉它。

[您可以在此处](http://pelloponisos.telesto.gr/galleryTest/gallery.php)找到示例。

旋转木马的工作原理是向右滑动，最后一个

*   在第一个之前并将其滑回以隐藏最后一个。

    问题是，如果有人向下一个/上一个按钮发送垃圾邮件，则整个轮播会向右移动，如果上一个/下一个每秒使用一次，或者我将其设置为由 jquery 以快速间隔（500）单击，则不会发生这种情况。

    代码的相关部分是：

    ```
    function initUl(){
        var li_width = $('.upper li').outerWidth();
        var upper_width=$('.upper').outerWidth();
        var lower_width=$('.lower').outerWidth();
        var upper_pos = $('.upper').position();
        var lower_pos = $('.lower').position();

        lastBeforeFirst();

        $('.upper').css({'left': upper_pos.left + (-1*li_width)});
        $('.lower').css({'left': lower_pos.left + (-1*li_width)});
        $('.upper').css({'width': upper_width + li_width});
        $('.lower').css({'width': lower_width + li_width});
       }

    function moveBothRight(){
        var speed = 200;
        var li_width = $('.upper li').outerWidth();
        var upper_pos = $('.upper').position();
        var lower_pos = $('.lower').position();

        $('.upper').animate({'left' :upper_pos.left + li_width}, speed,fixUpperPosR);
        $('.lower').animate({'left' :lower_pos.left + li_width}, speed,fixLowerPosR);   
       }

       function fixUpperPosR(){
        var li_width = $('.upper li').outerWidth();
        var upper_pos = $('.upper').position();

        $('.upper').css({'left': upper_pos.left - li_width});
        }

        function fixLowerPosR(){
        lastBeforeFirst();
        var li_width = $('.upper li').outerWidth();
        var lower_pos = $('.lower').position();

        $('.lower').css({'left': lower_pos.left - li_width});
         }
         function lastBeforeFirst(){

    var first = $('.upper ul li:first');
    var last = $('.upper ul li:last');

    $(first).before($(last));

    first = $('.lower ul li:first');
    last = $('.lower ul li:last');
    $(first).before($(last));
         } 
    ```

    这段代码负责将所有内容向右移动，并在下次单击时调用它，左侧的唯一区别是

    ```
    $('.lower').css({'left': lower_pos.left + li_width}); 
    ```

    和 firstBeforeLast(); 称呼

    这是浏览器的事情（它不能快速更新css），因此我应该限制一个人可以按下按钮的频率，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:20:07.830

问题是由于动画是异步运行的。

您需要[停止](http://api.jquery.com/stop/)当前动画以及`jumpToEnd`单击按钮时。

例如：

```
$('.upper').stop(true, true).animate(...); 
```

这将导致当前动画立即完成并根据需要更新 css。

# sql-server - 为多个用户使用单个数据库文件

> ID：12783513
> 
> 赞同：0
> 
> 时间：2012-10-08T14:13:20.297
> 
> 标签：sql-server, database

我想创建一个网站，每个用户都有自己的客户和产品要管理。处理这个的最好方法是什么？

是否可以为每个条目使用一个附加字段来指定该条目所属的用户？还是有更好的方法？

如果重要，我正在使用 sql server。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:16:38.003

问题中的信息并不多……但是：

在单个数据库中扩展更多数据比创建其他数据库要简单得多。所以是的 - 制作一个数据库。

您选择的确切架构更微妙 - 规范化并将行链接到适当的用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:17:43.913

**不要我重复不要**为每个用户创建一个数据库，甚至不要为每个用户创建一个表。`UserID`向任何可能需要引用产品或订单的人的表添加一列。

# windows-8 - Winpe 4 驱动程序未加载

> ID：12783516
> 
> 赞同：0
> 
> 时间：2012-10-08T14:13:22.317
> 
> 标签：windows-8, winpe

我需要将自定义驱动程序注入到离线的 wim 文件中。我正在使用 MSDN [http://technet.microsoft.com/en-us/library/hh825206.aspx](http://technet.microsoft.com/en-us/library/hh825206.aspx)上描述的标准场景：挂载、添加组件（WMI、.NET4）、添加驱动程序（签名，正常工作Windows 7 和 2012、x86/64)、卸载、makewinpemedia。但是，当我从 iso（在 VMWare 上）启动时，驱动程序没有加载。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:49:40.040

开发Win PE驱动最重要的是遵循架构（在64位Win PE上使用32位会导致失败）

按照步骤：-

1.  在救援 CD 向导中选择“自定义 Windows PE”救援 CD 选项。

2.  如果您以前没有安装过 Windows 自动安装工具包 (WAIK)，则需要下载并安装它。这是一个很大的（1.7GB）下载，所以请耐心等待。将显示 WAIK 下载对话框。只需单击“继续”并在集成完成时耐心等待。

3.  集成完成后，取消应急媒体向导。

4.  从这里下载并运行“inject.exe”：

[http://updates.macrium.com/reflect/utilities/inject.exe](http://updates.macrium.com/reflect/utilities/inject.exe)

这将自动将驱动程序注入到 Windows 映像文件 (WIM) 中，并且需要几分钟时间。

5.  完成后，再次使用应急媒体构建向导，选择“自定义 Windows PE”并单击进入最后一页。

6.  单击“重建”按钮以重新集成 WAIK。这将不需要再次下载和安装 WAIK，因此会快得多。

7.  完成后，如果您现在刻录救援 CD，驱动程序将被集成，使用 CD 启动和识别本地 RAID 卷应该没有问题。

您是否使用过 Windows 自动安装工具包 (AIK)，您可以查看以下链接，它可能会对您有所帮助。 [http://kb.acronis.com/content/24254](http://kb.acronis.com/content/24254)

无论使用何种卡，Windows PE 始终使用相同的基本 VESA 模式视频驱动程序。请检查下面的链接。 [http://technet.microsoft.com/en-us/magazine/cc160920.aspx](http://technet.microsoft.com/en-us/magazine/cc160920.aspx)

这个使用 Windows 自动安装工具包 (AIK) 创建 ISO 的特定链接也可以帮助您开始。 [http://www.bootfromcd.com/compare-solutions/windows-pe-boot-disk-review/](http://www.bootfromcd.com/compare-solutions/windows-pe-boot-disk-review/) 我确实花了一些时间在 Win PE 上，下图是你在用 VM 启动时收到相同的消息吗？ ![在此处输入图像描述](../Images/95e42f610cfb747a5221ee73d9ae31a1.png) 以下链接中提供了一些其他步骤，您可以检查它是否以这种方式工作 [https://users.emulab.net/trac/emulab/wiki/WindowsByWinpe](https://users.emulab.net/trac/emulab/wiki/WindowsByWinpe) 另一个有用的链接 [http://desktopreality.com/windows-7-部署最简单的方式/](http://desktopreality.com/windows-7-deployment-the-easy-way/)

更新信息检查是否有帮助。谢谢

# oracle - Toad Sql Loader CTRL 文件

> ID：12783521
> 
> 赞同：2
> 
> 时间：2012-10-08T14:13:36.647
> 
> 标签：oracle, toad

我第一次在 Toad 中使用 SQL 加载器，如何在 toad 的 SQl Loader 向导中构建 CTRL 文件。我有一个带有一个字段 (ID) 的表，我有一个带有一个字段 (ID) 的 CSV 文件，我想使用 SQL 加载器将其加载到表中。请指教。

数据库：- Oracle 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:26:33.907

我发现我们可以。很简单，我们可以做 Database--> Import SQL loader wizard--->Select build CTRL file (or use existing if you have one) option--> 然后在下一个窗口中添加输入文件名，选择 yr txt 或CSV文件--->保留其余的默认选项-->在下一个窗口中保留默认选项-->接下来添加要导入数据的模式和表名，加载肉类插入或更新（取决于你想要做什么)--> 以 EOF 选项卡或逗号终止-> 下一步保留默认选项--> 保存控制文件--> 只需构建 ctrl 文件或执行加载即可。

# c# - 使用 linq 将数据添加到现有的 xml 文件

> ID：12783525
> 
> 赞同：10
> 
> 时间：2012-10-08T14:13:51.473
> 
> 标签：c#, xml, linq, c#-4.0

我是.net 初学者。我需要向 xml 文件中添加一些数据

xml文件是：

```
<stock>    --- 1st level  /* i dont want to create this because this exists */ 
  <items>  --  2nd level
    <productname>Toothpaste</productname>
    <brandname>Colgate</brandname>
    <quantity>12</quantity>
    <price>10</price>
  </items>
  <items>
    <productname>Toothpaste</productname>
    <brandname>Pepsodent</brandname>
    <quantity>20</quantity>
    <price>12</price>
  </items>
</stock> 
```

我需要添加

```
productname --> Toothpaste
brandname   --> CloseUp
quantity    --> 16
price       --> 15 
```

到他们各自的标签。我现在面临的问题是我需要深入两层才能写入它们各自的标签，我不知道该怎么做。

我尝试了以下代码：（*不工作*）

```
XDocument doc = new XDocument(      
                  new XElement("stock",  /* how to go inside existing "stock"? */
                     new XElement("items", 
                          new XElement("productname", "Toothpaste"),
                          new XElement("brandname", "CloseUp"),
                          new XElement("quantity","16"),
                          new XElement("price","15")))); 
```

必须有其他方法来实现这一点，我不知道。
也欢迎与 linq 无关的答案。但更喜欢 linq，因为我在我的项目中实现了完整的 linq。

请帮助
提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T14:18:43.293

假设您有原始文件：

```
 var doc = XDocument.Load(...); 
```

然后创建一个新元素（不是文档）

```
 //XDocument doc = new XDocument(      
  //  new XElement("stock",  /* how to go inside existing "stock"? */
   var newElement =  new XElement("items", 
                      new XElement("productname", "Toothpaste"),
                      new XElement("brandname", "CloseUp"),
                      new XElement("quantity","16"),
                      new XElement("price","15")); 
```

然后插入它：

```
 doc.Element("stock").Add(newElement);

  doc.Save(....); 
```

# sockets - 为什么在执行 read() 时 ETH_P_IP 和 ETH_P_ALL 之间存在差异

> ID：12783527
> 
> 赞同：4
> 
> 时间：2012-10-08T14:13:58.567
> 
> 标签：sockets, ethernet, raw-sockets, raw-ethernet

我有以下设置：

```
client(eth0) --- (eth2) linux bridge (eth1) --- (eth1) server 
```

当我使用在 linux 网桥上打开一个 RAW 套接字时

```
fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL)); 
```

我将套接字绑定到 eth2。当客户端向服务器发送数据包时，网桥上运行的wireshark报告该数据包的源mac地址为client(eth0)，目的mac地址为server(eth1)。

当我执行 a`read()`时，读取的数据的前 6 个字节是目标 mac 地址，正确读取为 server(eth1)。

但是，当我将语句更改为

```
fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_IP)); 
```

当我执行 a`read()`时，读取的数据的前 6 个字节显示目标 mac 地址是 linux bridge (eth2)。

为什么会这样？内核或以太网卡驱动程序是否将其自己的 MAC 地址放入缓冲区而不是使用 ETH_P_IP 读取线路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:11:32.480

对于 ETH_P_IP 情况，您所描述的听起来像是正常的“路由”场景。（即路由mac是destination mac。）

如果您的客户端和服务器位于不同的子网/vlan 上，并且它们之间有一个路由器，那将是有意义的。

但是，该图指示了一个 linux“桥”。它只做桥接而不做路由吗？

**编辑**

ETH_P_IP 仅根据此答案捕获传入的 IP 数据包： [Packet Sniffing using Raw Sockets in Linux in C](https://stackoverflow.com/questions/1637835/packet-sniffing-using-raw-sockets-in-linux-in-c)

# windows - git：两台笔记本电脑如何通过互联网相互 git 推/拉

> ID：12783533
> 
> 赞同：0
> 
> 时间：2012-10-08T14:14:22.543
> 
> 标签：windows, git

假设我们是 2 位同事，其中一位有权从 github 拉取数据，而另一位则没有。但是另一个用户必须从同事的笔记本电脑上拉出该项目。

我们可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:52:33.430

它当然可以工作，但需要一些手动协调才能将一台笔记本电脑的当前 IP 地址传达给其他用户，或者使用动态 dns 提供程序配置笔记本电脑，以将静态名称与当前 IP 地址相关联。然后是关于防火墙、路由器（可能包括一些端口转发和 NAT 问题）等的考虑，这取决于两个系统连接到 Internet 的准确程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:32:37.730

如果您有权查看彼此的 Windows 文件共享，则可以使用 UNC 路径将每个共享配置为远程。如果您的合作伙伴“fred”在 FREDSPC 上共享了“代码”，您可以配置远程，`git remote add fred //FREDSPC/Code/projectfolder`然后`git fetch fred`将正常工作，通过 Windows 网络文件系统从他们的存储库中提取提交。

# ruby-on-rails - Databasedotcom::SalesForceError 错误请求的资源不存在

> ID：12783535
> 
> 赞同：0
> 
> 时间：2012-10-08T14:14:27.237
> 
> 标签：ruby-on-rails, databasedotcom-gem

这里的其他人是否更清楚为什么会发生此错误？

Databasedotcom::SalesForceError 错误请求的资源不存在 /app/vendor/bundle/ruby/1.9.1/bundler/gems/databasedotcom-8666381d50b7/lib/databasedotcom/client.rb:376:in `ensure_expected_response' /app/vendor/bundle/ruby/1.9.1/bundler/gems/databasedotcom-8666381d50b7/lib/databasedotcom/client.rb:334:in`with_encoded_pa​​th_and_checked_response' /app/vendor/ bundle/ruby/1.9.1/bundler/gems/databasedotcom-8666381d50b7/lib/databasedotcom/client.rb:326:in `http_multipart_post'

我搜索了，但[答案 1](https://stackoverflow.com/questions/11976343/databasedotcom-error-on-no-record-found)和[答案 2](https://stackoverflow.com/questions/11666759/ror-error-with-salesforce-the-requested-resource-does-not-exist)在这里没有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:16:03.197

我认为这一定是 Force.com API 中过期会话的问题。

在我的 Rails 应用程序中，我在 SFDC 中多次登录，每次使用不同的用户凭据，并使用收到的 Oauth 令牌对 databasedotcom gem 进行身份验证。

由于这个假定的过时会话，我面临一些问题： [使用带有 databasedotcom gem 的多个访问令牌](https://stackoverflow.com/questions/13718005/using-multiple-access-tokens-with-databasedotcom-gem)

在尝试使用另一个用户进行身份验证之前，需要找到一种方法来使一个用户的 oauth 身份验证无效/过期。

# asp.net - 选择未将 AutoGenerateSelectButton 设置为 true 的行

> ID：12783536
> 
> 赞同：0
> 
> 时间：2012-10-08T14:14:28.703
> 
> 标签：asp.net

如何选择未设置`AutoGenerateSelectButton`为 true 的行并检查 selectedIndex in `GridView_SelectedIndexChanged`？

如何识别用户选择表上的特定字段（例如选择的 row2、col3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:26:12.977

添加带有按钮的列（使用模板字段）并将 CommandName 设置为“Select”。那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:05:12.480

这是一个没有选择按钮的平均网格视图。RowDataBound 方法使您的网格突出显示。您可以检查是否可能使用 SelectedIndexChanged 方法中的 if 条件选择了某个列，因为这将告诉您选择了哪一行，然后您可以根据列的制作顺序从特定列中获取一个值，如下所示。这不会准确显示他们点击 x 和 y 的位置，但我认为应该朝着正确的方向前进。但是，这将根据突出显示的行以及通过回帖单击的行来获取列数据。

```
<asp:GridView ID="PropertyGridView" runat="server" AutoGenerateColumns="False" OnSelectedIndexChanged="PropertyGridView_SelectedIndexChanged" OnRowDataBound="PropertyGridView_RowDataBound">
                <RowStyle HorizontalAlign="Left" />
                <EmptyDataTemplate>
                    <div>
                        <asp:Label runat="server" ID="EtLbl" Text="No properties were found."</asp:Label>
                    </div>
                </EmptyDataTemplate>
                <Columns>
                    <asp:BoundField DataField="Name" HeaderText="User Name" Width="20%" /> </asp:BoundField>
                    <asp:BoundField DataField="Age" HeaderText="User Age" Width="20%" /> </asp:BoundField>
                    <asp:BoundField DataField="Height" HeaderText="User Height" Width="20%" /> </asp:BoundField>
                </Columns>
</asp:GridView>

public void PropertyGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.DataItemIndex == -1) 
        return;
    e.Row.Attributes.Add("onMouseOver", "this.style.cursor='hand';");
    e.Row.Attributes.Add("onclick",    this.GetPostBackClientEvent(PropertyGridView,"Select$" + e.Row.RowIndex.ToString()));
}

public void PropertyGridView_SelectedIndexChanged(object sender, EventArgs e)
{

    string Name = PropertyGridView.SelectedRow.Cells[0].Text;
    string Age= PropertyGridView.SelectedRow.Cells[1].Text;
    string Height PropertyGridView.SelectedRow.Cells[2].Text;

    if( Height != null)
    {
         // The user selected a row and this Column ( Height has data )
    }

} 
```

# mysql - 无法对 LEFT JOIN 子查询强制索引？

> ID：12783537
> 
> 赞同：2
> 
> 时间：2012-10-08T14:14:32.903
> 
> 标签：mysql

我有一个复杂的查询，其中涉及 LEFT JOIN 语句中的子查询。处理时间约为 2 秒。如果我用临时表替换子查询，我会遇到相同的 ~2s。如果我在临时表中创建索引，我有 ~0.05s。

我试图弄清楚为什么我不能直接在 LEFT JOIN STATEMENT 中使用 Mysql USE INDEX 或 FORCE INDEX。

这是一个简单的查询，它将返回“检查您的 mysql 语法”错误。

```
SELECT * 
FROM table1 t1 
LEFT JOIN (SELECT id_project FROM table2) t2 
FORCE INDEX FOR JOIN (id_project) 
   ON (t2.id_project = t1.id_project); 
```

**为什么我不能将 FORCE INDEX 与 LEFT JOIN 子查询一起使用？**

--edit：这是返回mysql错误的实际查询

```
SELECT  
    p.id_projet, pa.piste_affaire, ty.type, p.e_force, gr.groupe, p.client, p.intitule_affaire, 
    ag.agence, st.statut, p.winratio, p.justification_nogo, p.webdoc, sp.sponsor, dis.domain_is, 
    cons.constructeur, p.date_chgt_statut, p.date_creation, 
    p.ca_estimatif, p.tcv, p.marge,
    tarp.target_price, p.marketable_price, 
    p.remise_propal_initiale, p.remise_propal_reel,
    p.date_de_signature, p.debut_build, p.fin_build,
    his.date, his.login, co.contrat, 
    p.duree_contrat, p.fqp, cap.capitalisation, 
    p.international, p.risk_management, p.asi, 
    GROUP_CONCAT(com.commentaire,',') AS COMMENT

FROM  
    piste_affaire pa, statut st, TYPE ty, agence ag, 
    domain_is dis, sponsor sp, constructeur cons, groupe gr, 
    target_price tarp, contrat co, historique his, capitalisation cap, 
    projet p 
    LEFT JOIN commentaire com ON (p.id_projet=com.id_projet)
    LEFT JOIN bizdev bizd  ON (p.id_bizdev = bizd.id_bizdev )
    LEFT JOIN (SELECT eco_projet.id_projet, 
                GROUP_CONCAT(
                CONCAT(ecosysteme) 
                ORDER BY ecosysteme SEPARATOR ', ' ) AS ecosysteme
                FROM ecosysteme NATURAL JOIN eco_projet, projet 
                WHERE eco_projet.id_projet = projet.id_projet  
                GROUP BY eco_projet.id_projet) AS tmpeco 
                /* if I delete that line, everything works as intended with ~2s query*/
                FORCE INDEX FOR JOIN (id_projet) 
                /* ** */
        ON (tmpeco.id_projet = p.id_projet)

WHERE 
    ag.id_division != 2 AND
    dis.id_division != 2 AND
    st.id_division != 2 AND
    pa.id_division != 2 AND 
    cons.id_division != 2 AND 
    p.type_division = 1 AND 
    pa.id_piste_affaire = p.id_piste_affaire AND
    p.id_statut = st.id_statut AND
    p.id_type = ty.id_type AND
    p.id_agence = ag.id_agence AND
    p.id_domain_is = dis.id_domain_is AND
    p.id_sponsor = sp.id_sponsor AND
    p.id_constructeur = cons.id_constructeur AND
    p.id_groupe = gr.id_groupe AND
    p.id_target_price = tarp.id_target_price AND
    p.id_contrat = co.id_contrat AND
    p.id_projet = his.id_projet AND
    p.id_capitalisation = cap.id_capitalisation 
GROUP BY p.id_projet; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:17:44.517

为什么是子查询？尝试这个：

```
SELECT * 
FROM table1 t1 
LEFT JOIN table2 t2 
FORCE INDEX FOR JOIN (id_project) 
ON (t2.id_project = t1.id_project); 
```

您甚至可能不需要使用上述查询强制索引。

# c# - 批量转换 C# 代码以使用 String.Format

> ID：12783539
> 
> 赞同：4
> 
> 时间：2012-10-08T14:14:38.930
> 
> 标签：c#

> **可能重复：**
> [Resharper string.format 快捷方式](https://stackoverflow.com/questions/8674705/resharper-string-format-shortcut)

在我们庞大的代码库中，不幸的是有很多这样的语句：

```
MessageBox.Show("Hello, " + userName + "!"); 
```

显然，这会更好地促进字符串外部化：

```
MessageBox.Show(String.Format("Hello, {0}!", userName)); 
```

是否有任何工具可以自动化这项工作（将字符串连接转换为 String.Format）？

如果没有，我认为有必要找到一个为给定的 C# 源文件构造语法树的解析器，在该树中找到执行字符串连接的表达式（似乎并不容易）并转换找到的出现？

**编辑**：DevExpress CodeRush 完全符合我的要求 - 非常酷。但不幸的是，它只适用于当前的源文件，我必须点击每一次出现（或者看起来如此）。我想对我所有的源文件进行操作（比如“全部替换”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:20:03.250

Have a look at [DevExpress CodeRush](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/). It allows to easily find and refactor these issues. Though I don't know if you can automate the refactoring. [ReSharper](http://www.jetbrains.com/resharper/) has a similar feature.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:20:54.500

ReSharper does support this kind of action, by pressing `Alt+Enter``Enter`.

Read more about this here: [Resharper string.format shortcut](https://stackoverflow.com/questions/8674705/resharper-string-format-shortcut)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:26:40.730

如果你没有工具，Visual Studio 中的一个简单的 Replace All 就可以了。

寻找：

```
"([^"]*)"\s*\+\s*(:i) 
```

替换为：

```
String.Format("\1#{0}", \2) 
```

不幸的是，我现在无法访问 Visual Studio 来测试这些表达式。您可能必须在“查找”表达式中使用`:b`而不是。`\s`

# javascript - 敲除绑定打破了 foreach 绑定

> ID：12783541
> 
> 赞同：0
> 
> 时间：2012-10-08T14:14:49.047
> 
> 标签：javascript, html, knockout.js

我有一个看起来像的 foreach 绑定：

```
<ul class="nav nav-tabs" data-bind="template: { name: 'tablsUlTemplate', foreach: Operators }">
    <li class="active"><a href="#summary" data-toggle="tab">Summary</a></li>
    <li><a href="#permitting" data-toggle="tab">Permitting</a></li>
</ul>
<script type="text/html" id="tablsUlTemplate">
    <li><a data-bind="attr: { href: NameHash }" data-toggle="tab"><span data-bind="text: Name"></span></a></li>
</script> 
```

这样做的原因是有两个选项卡将始终存在，我添加其他选项卡取决于它是否已添加。

问题不在于上述内容，而在于选项卡内容，该部分看起来与上面相似，只是很多，因此决定至少显示 1 个完整的部分。

然后我有（破损的部分）

```
<div class="tab-content" data-bind="template: { name: 'tablsContentTemplate', foreach: Operators }" >
    <div class="tab-pane active" id="summary">
    </div>
    <div class="tab-pane" id="permitting">
        <table class="span10">
            <thead>
                <tr>
                    <th></th>
                    <th>Submission
                    </th>
                    <th>Approval
                    </th>
                    <th>Timeline
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr data-bind="visible: PermittingCAAActive">
                    <td>
                        <label class="checkbox">
                            CAA
                        </label>
                    </td>
                    <td>
                        <div class="input-prepend">
                            <span class="add-on"><i class="icon-th"></i></span>
                            <input id="text12" type="text" readonly="true" class="spandate" runat="server" data-bind="value: PermittingCAASubmission" />
                        </div>
                    </td>
                    <td>
                        <div class="input-prepend">
                            <span class="add-on"><i class="icon-th"></i></span>
                            <input id="text13" type="text" readonly="true" class="spandate" runat="server" data-bind="value: PermittingCAAApproval" />
                         </div>
                    </td>
                    <td>
                        <div class="input-prepend">
                            <input id="text14" type="text" readonly="true" class="spandate" runat="server" data-bind="value: PermittingCAATimeline" />
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div> 
```

我的问题是 foreach 绑定中的绑定不起作用。

请注意虚拟机：

```
viewModel = {
    Operators: ko.observableArray(),
    PermittingCAAActive : ko.observable(),
    PermittingCAAApproval : ko.observable(),
    PermittingCAASubmission: ko.observable(),
    PermittingCAATimeline: ko.observable(),
} 
```

请注意，我省略了与问题无关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:38:58.337

```
//  data-bind="template: { name: 'tablsContentTemplate', foreach: Operators }"

<td>
     <div class="input-prepend">
        <span class="add-on"><i class="icon-th"></i></span>
        <input id="text12" type="text" readonly="true" class="spandate" runat="server" data-bind="value: PermittingCAASubmission" />
     </div>
</td> 
```

让我们检查上面的绑定，在使用 foreach 之后，您的值绑定期望在其中一个运算符中找到**PermittingCAASubmission**。但是里面没有 PermittingCAASubmission 所以添加 $parent 或 $root 可以解决你的问题。

```
 data-bind="value: $parent.PermittingCAASubmission" 
```

请在您的问题中包含您的错误消息，我们可以在此之后说更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:32:04.043

我建议不要将固定内容与模板内容混合，可能使用虚拟元素，如下所示：

```
<ul>
    <li data-bind="text: PermittingCAAActive"></li>
    <!-- ko template: {name: 'tablsUlTemplate', foreach: Operators} -->
    <!-- /ko -->
</ul>

<script type="text/html" id="tablsUlTemplate">
    <li><a data-bind="attr: { href: NameHash }" data-toggle="tab"><span data-bind="text: Name"></span></a></li>
</script> 
```

这将使绑定更易于管理。

# jquery - JQuery Mobile Datebox插件中基于文化的日期选择？

> ID：12783545
> 
> 赞同：0
> 
> 时间：2012-10-08T14:14:54.927
> 
> 标签：jquery, mobile, datebox

我在移动应用程序中使用以下 jquery 移动日期框插件进行日期控制。使用默认日期格式可以正常工作。但我想根据当前的文化设置应用日期格式，无论是手机还是桌面。根据设备日期格式，日期应填充到日期控件中。

```
<link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" />
 <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script> 
```

我尝试过以下方法。

```
jQuery.extend(jQuery.mobile.datebox.prototype.options.lang.default, { 'dateFormat': dformat , }); 
```

但是它有两个下面提到的限制，因此我无法使用这种方法。
1) iPhone 3/4 (safari 3.1.1 或更低版本) 不支持
2) 日期格式与 Window 格式不兼容（它使用 %d-%m-%y 等格式）。

我想使用这个插件，但它应该提供基于文化的日期格式选择。
请提供您的建议，如果您有任何疑问，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:30:02.387

不确定我是否真的理解您的问题，但通常您可以使用“覆盖”选项直接注入用户文化。在我的一个代码中，一旦我检测到用户文化，我就会使用如下脚本来完成这项工作：（我通过 htis 方式更新标题标题、日期字段顺序和日期格式）。

在此代码中，“sDateFormat”根据用户文化设置正确的模式。而“currentdatefield”是我的网络表单中日期字段的 jquery 变量：

```
currentdatefield.data("options", {
                    mode: "datebox",
                    useLang: varuserLocale,
                    useFocus: true,
                    useClearButton: true,
                    useCollapsedBut: true,
                    defaultValue: sDateForDefValue, /* defaultValue : this value must be a string formated in "yyyy-mm-dd" (not a JS object date) */
                    'overrideDateFieldOrder': DateFieldOrder,
                    'overrideHeaderFormat': vardateformat,
                    'overrideDateFormat': sDateFormat   /* Example: "%m/%d/%Y" This date format pattern is directly injected in the field linked */
                });
            }); 
```

不确定，它对你有帮助，但也许。

# javascript - 将 directBox2D 与 directCanvas 一起使用 - AppMobi

> ID：12783546
> 
> 赞同：0
> 
> 时间：2012-10-08T14:14:57.570
> 
> 标签：javascript, html, mobile, box2d, appmobi

我正忙着寻找一个在 directCanvas 中使用 Box2D 物理引擎的简单解决方案……而不使用 ImpactJS 或任何付费框架。

我的最终目标是使用 Box2D 为移动设备（Android/iPhone/iPad 等）构建 HTML5 游戏。

**我最好的解决方案是什么？**

我正在考虑的一些 box2D 框架：

*   Box2DJS - [http://box2d-js.sourceforge.net/](http://box2d-js.sourceforge.net/)
*   Box2Dflash - [http://29a.ch/2010/4/17/box2d-2-flash-ported-javascript](http://29a.ch/2010/4/17/box2d-2-flash-ported-javascript)
*   Gamvas - [http://gamvas.com/](http://gamvas.com/)

* * *

**-更新-**

AppMobi 的**directBox2D**文档：

[http://www.appmobi.com/documentation/gamingAPI/directBox2D/index.html](http://www.appmobi.com/documentation/gamingAPI/directBox2D/index.html)

使用 directCanvas 和 Box2D 的唯一方法是使用 AppMobi 的 DirectBox2D 框架（这就是我的理解）。

**有没有人有一个工作示例/演示如何使用 directCanvas 的 directBox2D ？？？**我让它在 XDK 模拟器上运行，但它不适用于我的 Android 手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:41:20.233

我想你已经发现，directBox2D 只支持 Box2D 调用的一个子集。目前，我们正在努力增强对 directCanvas 的支持，以反映更多适用于 Android 和 iOS 的 HMTL5 规范。扩展 directBox2D 和整个 API 都在我们的路线图上。目前我认为我们没有使用没有 ImpactJS 的 directBox2D 创建一个演示，我会在我们增强 API 后记下创建一个。

XDK 旨在尽可能地模拟手机，但如果您使用的是 B2D 不支持的呼叫，则在您推送到设备之前不会中断。

# jquery - JQuery类结构：调用函数的语法错误

> ID：12783549
> 
> 赞同：-1
> 
> 时间：2012-10-08T14:15:09.930
> 
> 标签：jquery, syntax-error

我是 JQuery 的新手，并试图实现一个在点击时隐藏输入元素的函数。我不断收到语法错误。

HTML 代码：

```
<div id="header">
    <div id="grad">
        <div id="blah">
            convo
        </div>
    </div>

    <div class="topimage"><img src="assets/scrybe.jpg" width="100px"></div>
</div>

<form>
    <input id="filter" onkeyup="blah.test()" placeholder="Search" type=
    "text">
</form>

<div id="leftcontainer">
    <input id="userlist" placeholder="Find people" type="text">
</div> 
```

jQuery代码：

```
var usersearch = {

   $('#filter').click();

   //ready: function(){
   $("#filter").click(function() {
       $(this).hide();
   });
   //}
};

//usersearch.ready(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:20:45.950

您编写的 JS 代码无效并产生“语法错误”。它与jQuery无关，只是一个标准的JS语法错误。在这种情况下，`var usersearch = {`开始一个 JSON 对象，但紧随其后的代码不遵循 JSON 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:22:05.897

我已经让它工作了，检查这个 jsFiddle - [http://jsfiddle.net/tHbGh/](http://jsfiddle.net/tHbGh/)

将您的 JQuery 更改为：

```
var usersearch = function() { 

$('#filter').click();

}

$(document).ready(function () {
    $('#filter').click(function () {
        $("#filter").hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:23:27.237

```
function usersearch(){

   $('#filter').click();

   //ready: function(){
   $("#filter").click(function() {
       $(this).hide();
   });
   //}
};

//usersearch.ready(); 
```

这是你的意思吗？确保正确定义函数。

# iphone - 4 英寸视网膜 iPhone 模拟器中页眉和页脚的剩余空间

> ID：12783550
> 
> 赞同：1
> 
> 时间：2012-10-08T14:15:11.433
> 
> 标签：iphone, objective-c, ios, xcode

为什么在 iPhone 4 英寸模拟器的页眉和页脚部分留下一些空间。它在普通 iPhone 屏幕上运行良好。我刚刚在 Xcode 4.3 上开发了应用程序，但在升级到 4.5 后，有一个选项可以将模拟器视网膜更改为 4 英寸屏幕，并在页眉和页脚上自动留下一些空间，我在下图中用红色框聚焦.

![在此处输入图像描述](../Images/0834c4e4d069e9172bf41775ee87b5f8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:18:50.343

您将看到有关*Default-568h@2x.png*文件的警告，即视网膜显示启动画面。添加它，如果屏幕设计正确，它应该填补黑色空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:19:34.307

可能您的应用程序不支持 iPhone 5（4" 屏幕）。您可以通过将 4" 添加到项目启动图像来启用此屏幕的支持 - Default-568h@2x.png (640x1136 px)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:21:57.457

我认为您正在使用模拟器 6.0 来运行您的项目。

它是为 iphone 6 开发的。

因此将您的模拟器从 6.0 或以下版本更改为

只需将您的 Default.png 重命名为 Default-568h@2x.png

希望它会帮助你。

# zurb-foundation - 使用 Zurb Foundation 在表单中显示元素

> ID：12783561
> 
> 赞同：0
> 
> 时间：2012-10-08T14:15:56.710
> 
> 标签：zurb-foundation

我正在使用[CSS Framework Foundation](http://foundation.zurb.com/docs/forms.php)，当我编写以下代码时：

```
<div class="row">    
   <div class="two mobile-one columns"><label for="invoiceterm-summary" class="right inline">Become late <span class="required">*</span></label></div>
   <div class="ten mobile-three columns"><input class="one" id="invoiceterm-late" name="invoiceterm[late]" type="text" value=""> days after invoice sent</div>
</div>
​ 
```

我明白了：

![在此处输入图像描述](../Images/7573140a0ea12fc58a6ead303a2fb278.png)

但我想显示文本**“发票发送后的天数”**，如下所示：

![在此处输入图像描述](../Images/7317c55b3c956d0b741db05f5360d898.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:07:12.800

您应该将所有这些元素放在一个中：

```
<div class="row">
    <div class="twelve mobile-four columns"></div>
</div> 
```

否则，它的行为正确，随着屏幕尺寸的减小而堆叠列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:09:19.923

我不得不从foundation.css文件中input[type="text"]的css定义中删除display:block属性

# php - 使用 PHP 可下载大型远程图像

> ID：12783563
> 
> 赞同：1
> 
> 时间：2012-10-08T14:16:05.163
> 
> 标签：php, curl, stream, download

我知道有很多类似的帖子，但是在抓取之后，仍然没有找到答案。

我正在寻找一个脚本来充当下载大型远程图像（每个大约 10mb）的代理。到目前为止，我正在使用 curl 读取远程图像 url，然后使用 headers 来强制下载。像（不是完整的脚本）：

```
function getRemoteFile($url) {
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 50);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}

header('Content-Type: octet/stream');
header('Content-Disposition: attachment; filename="random.jpg"');
header('Content-Length: ' . strlen($file));
echo $file; 
```

这行得通，但是有没有更好的方法，因为这个脚本可能会看到相当多的流量 - 可能是 300 个并发用户，每个用户有 10 个请求？

图像将从同一网络上的服务器提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:23:50.473

`10mb`是相当大的`300 concurrent users with 10 requests`。

你是说`10 * 300 * 10 = 30,000 MB = 30GB`

我建议您使用作业队列

您可以使用`Gearman`

```
$worker= new GearmanWorker();
$worker->addServer();
$worker->addFunction("download", "getRemoteFile");
while ($worker->work()); 
```

您不能使用 AJAX 并检查图像是否已下载并显示它

我还建议您查看以下内容

*   [零MQ](http://www.zeromq.org/)
*   [豆茎](http://kr.github.com/beanstalkd/)
*   [滴管](https://github.com/s0enke/dropr/)

# if-statement - FASM - x64 与 x86

> ID：12783568
> 
> 赞同：2
> 
> 时间：2012-10-08T14:16:16.193
> 
> 标签：if-statement, x86, 64-bit, fasm

我在使用 windows vista x86 时在 FASM 中做了一个简单的应用程序。该应用程序编译并运行良好，没有任何错误。

然后，我将相同的源代码（实际上是相同的文件）移动到我的另一台运行 windows vista x64 的 PC 上。在编译源代码时，我收到了错误。

在 x86 上，我可以简单地开始：

```
include "win32a.inc"
entry start 
```

在 x64 上编译时，我必须使用类似于以下内容的内容：

```
format PE GUI 4.0
include "win32a.inc"
entry start 
```

* * *

另一个问题（我主要关心的）是在 x86 上我可以使用：

```
.if dword [var] = "1234"
    ;Do something here
.endif 
```

但是在 x64 上编译相同的代码时，我得到“非法指令”，并突出显示以下行：

```
.if dword [var] = "1234" 
```

在 x64 上执行此操作是否有不同的方法？

另外，我如何编码到两者都兼容的地方？我想，如果我在 x86 上编译，那么结果输出会在 x64 上运行良好吗？

最后，这可能与架构之外的其他事情有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:07:56.307

我挖出了一些旧的 MASM 代码以与最新版本的 FASM 一起使用。我必须添加这个才能使用`.if`宏：

```
include 'MACRO/IF.INC' 
```

也：

```
include "win32a.inc" 
```

让它编译。注意我得到一个*非法指令*错误，但不包括`macro/if.inc`.

也许`win32a.inc`您的旧 32 位系统上的版本包括`.if`宏？

# android - android viewpager 更改适配器

> ID：12783571
> 
> 赞同：18
> 
> 时间：2012-10-08T14:16:22.277
> 
> 标签：android, adapter, android-viewpager

我正在为横向滚动表开发一个带有 ViewPager 的应用程序，有时我需要更改适配器以加载一组不同的表。我尝试执行以下操作：

```
mViewPager.setAdapter(new pagerAdapterPushed(getSupportFragmentManager()));
mViewPager.getAdapter().notifyDataSetChanged();
indicator.setViewPager(mViewPager);
indicator.invalidate();
mViewPager.invalidate(); 
```

但它总是重新加载以前的数据。是不是可以更改 ViewPager 的适配器？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-11T09:18:00.913

就像我的APP做的一样...

对于更改 ViewPagerAdapter，我所做的是：

1.  清除当前适配器内的所有 Fragment

2.  将当前适配器设置为空

3.  为 ViewPager 分配新的适配器

    ```
    /* Clear all Fragments inside current adapter */
    public class MyPagerAdapter extends FragmentPagerAdapter
    {
      private ArrayList<Fragment> fragments = new ArrayList<Fragment>();
      //...some stuff

      public void clearAll() //Clear all page
      {
        for(int i = 0; i < fragments.size(); i ++)
        fragMan.beginTransaction().remove(fragments.get(i)).commit();
        fragments.clear();
      }
    }

    /* Set current adapter to null */
    Constants.VP.removeAllViews();
    Constants.VP.setAdapter(null);

    /* Assign new adpater for ViewPager */
    Constants.PAGER = new MyPagerAdapter(getSupportFragmentManager());
    Constants.VP.setAdapter(Constants.PAGER); 
    ```

希望有帮助~

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T05:37:04.070

您需要`public int getItemPosition (Object object)`在寻呼机适配器中覆盖。对于视图分页器中的每个元素，您需要返回`POSITION_UNCHANGED`（如果它仍在分页器中）或`POSITION_NONE`（如果它已被删除）。否则视图寻呼机将不知道发生了什么变化。我不建议设置新适配器，只需清除旧适配器中的数据即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-13T06:17:03.667

我看到@RRTW 方式对某些人有用，但对我没有用（尽管它很接近）。如果没有`commitNow()`代替常规`commit()`，它将无法正常工作。我做了这样的事情：

```
private fun changePagerAdapter(newAdapter: PagerAdapter) {

    val transaction = supportFragmentManager.beginTransaction()
        supportFragmentManager.fragments.forEach {
        transaction.remove(it)
    }

    transaction.commitNow()
    view_pager.adapter = newAdapter
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-31T21:32:58.620

For those who still have issues, do like what I did. I wish it will save your time. It is in Xamarin.Android, but idea should be same in java and kotlin

Prepare your Adapter classes with ClearFragments method through an abstract class:

```
public abstract class BaseAdapter : FragmentStateAdapter
{
    public BaseAdapter(FragmentManager fm, Lifecycle lifecycle) : base(fm, lifecycle)
    {
        this.fm = fm;
    }
    readonly FragmentManager fm;

    public override int ItemCount => ITEM_COUNT;

    private readonly List<Fragment> fragments = new List<Fragment>();

    public override Fragment CreateFragment(int position)
    {
        var fragment = new MyFragment();
        fragments.Add(fragment);
        return fragment;
    }

    public void ClearFragments()
    {
        if (fragments.Count > 0)
        {
            var transaction = fm.BeginTransaction();
            foreach (var fragment in fragments)
            {
                transaction.Remove(fragment);
            }
            if (!fm.IsDestroyed)
            {
                transaction.CommitNow();
            }
            //see note of Dispose(disposing)
            foreach (var fragment in fragments)
            {
                fragment.Dispose();
            }
            fragments.Clear();
        }
    }

    private bool disposedValue = false;

    //Important note: Your fragment might use Context. You need to override Dispose(disposing) in your fragment class
    //and ensure you do not use Context after you dispose it here
    protected override void Dispose(bool disposing)
    {
        if (!disposedValue)
        {
            disposedValue = true;
            if (disposing)
            {
                ClearFragments();
            }
            base.Dispose(disposing);
        }
    }
}

public Adapter1 : BaseAdapter
{
    public Adapter1(FragmentManager fm, Lifecycle lifecycle) : base(fm, lifecycle)
    {

    }
}

public Adapter2 : BaseAdapter
{
    public Adapter2(FragmentManager fm, Lifecycle lifecycle) : base(fm, lifecycle)
    {

    }
} 
```

Then when you want to change adapter, do like this:

```
public MainActivity : AppCompatActivity
{
    private void UseAdapter2()
    {
        var oldAdapter = viewPager.Adapter as BaseAdapter;
        oldAdapter?.ClearFragments();
        viewPager.Adapter = null;
        var adapter = new Adapter2(SupportFragmentManager, Lifecycle);
        // Do any logic that makes this adapter different from the previous one.
        viewPager.Adapter = adapter;
        oldAdapter?.Dispose();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-01T00:47:28.327

@ibrahim 您的建议与 ViewPager2 文档的建议背道而驰。它特别声明不要将该技术用于 CreateFragment。您必须始终返回片段的新实例。不要从片段列表中重复使用。见[https://developer.android.com/training/animation/vp2-migration](https://developer.android.com/training/animation/vp2-migration)

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2015-02-27T05:30:01.127

将此添加到查看寻呼机以重新加载下一个片段：

```
viewPager.setCurrentItem() 
```

# extjs4 - ExtJS如何修改textfield参数autocomplete="off"

> ID：12783574
> 
> 赞同：13
> 
> 时间：2012-10-08T14:16:24.953
> 
> 标签：extjs4, extjs

一些现代（Safari、chrom、firefox）浏览器记录信息并允许您在返回时自动完成一些文本字段。

我想用 ExtJS 来做。我在这里有一个答案：

[如何让 Chrome 记住表单上的登录信息？](https://stackoverflow.com/questions/8401925/how-to-get-chrome-to-remember-login-on-forms/8405113#8405113)

但是在 ExtJS 中，我无法访问参数`autocomplete`。它总是硬编码`autocomplete="off"`的。在文档中，我没有找到如何修改它：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text)

有人有一个简单的答案来修改这个参数吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-08T17:38:39.037

您想向 中添加一个`afterrender`侦听器`textfield`，获取对该`input`元素的引用，并将其`autocomplete`属性设置为“on”。您可能还想设置它`name`（因为这是浏览器记住值的方式）。

例子：

[http://jsfiddle.net/4TSDu/19/](http://jsfiddle.net/4TSDu/19/)

```
{
    xtype:'textfield',
    fieldLabel:'some field',
    name:'somefield',
    listeners:{
        afterrender:function(cmp){
            cmp.inputEl.set({
                autocomplete:'on'
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-13T14:51:44.350

请注意，要使 LastPass 工作，您可能需要`size`从文本字段中删除属性。由于一些奇怪的原因，Sencha 设置 size=1 这很奇怪（是因为 IE6？甚至可能是 IE5.5？）。

无论如何，这使得 LastPass 工作。我猜您可能还想删除`autocomplete`其他密码管理器的属性。用 ExtJS 6.5 测试。

```
 {
        xtype: 'textfield',
        name: 'username',
        fieldLabel: 'Username',
        listeners:{
            afterrender:function(cmp){
                cmp.inputEl.dom.removeAttribute('size')
            }
        },
    }, 
```

# oracle - 使用 BASH 从 ORACLE DB 读取具有多个空行的文件

> ID：12783579
> 
> 赞同：0
> 
> 时间：2012-10-08T14:16:36.690
> 
> 标签：oracle, bash, sqlplus

> **可能重复：**
> [为什么空行没有存储在变量中](https://stackoverflow.com/questions/9931974/why-empty-line-is-not-getting-stored-in-variable)

我尝试从我的数据库中读取和输出一个文本文件。它可以工作，但空行将被删除。

例子：

```
Hello Mr. X

Text from Mailboddy

Greetins
Mr. Y 
```

输出：

```
Hello Mr. X
Text from Mailboddy
Greetins
Mr. Y 
```

代码：

```
sqlplus -s $DBLOGIN <<ENDE_SQL > file
SET FEEDBACK OFF;
SET SERVEROUTPUT ON;
DECLARE
  l_text CLOB;
BEGIN
  SELECT text
    INTO l_text
    FROM table;  
  while dbms_lob.substr(l_text, 1, l_pos) is not null LOOP
    if dbms_lob.substr(l_text, 2, l_pos) = CHR(13) || CHR(10) then
      DBMS_OUTPUT.NEW_LINE;
      l_pos:=l_pos + 1;
    else
      DBMS_OUTPUT.put(dbms_lob.substr(l_text, 1, l_pos));
    end if;
    l_pos:=l_pos + 1;
  END LOOP;
END;
/
ENDE_SQL 
```

PL/SQL 代码在 SQLDeveloper 中使用空行工作。但在文件中，所有空行都被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:46:46.527

假设将数据加载到 CLOB 中，换行符为`CHR(13)||CHR(10)`，并且如果您直接从表中选择，您可以以预期的格式看到它，那么问题在于 SQL*Plus 如何与`DBMS_OUTPUT`.

默认情况下，[`SET SERVEROUTPUT ON`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2699298)将 设置`FORMAT`为`WORD_WRAPPED`。文档说“SQL*Plus 左对齐每一行，跳过所有前导空格”，但没有指出这也会跳过所有空白行。

如果您设置`SERVEROUTPUT ON FORMAT WRAPPED`或`... TRUNCATED`然后您的空白行将重新出现。但是你需要确保你的 linesize 足够宽，可以打印最长的行，特别是如果你使用`TRUNCATED`.

（此外，您的代码没有声明`l_pos NUMBER := 1`，并且缺少 final`DBMS_OUTPUT.NEW_LINE`因此您将丢失 CLOB 的最后一行）。

* * *

为了演示，如果我创建一个只有一个 CLOB 列的虚拟表，并使用具有您正在寻找的回车/换行符的值填充它：

```
create table t42(text clob);

insert into t42 values ('Hello Mr. X' || CHR(13) || CHR(10)
    || CHR(13) || CHR(10)
    || 'Text from Mailboddy' || CHR(13) || CHR(10)
    || CHR(13) || CHR(10)
    || 'Greetins' || CHR(13) || CHR(10)
    || 'Mr. Y');

select * from t42; 
```

我得到：

```
TEXT
--------------------------------------------------------------------------------
Hello Mr. X

Text from Mailboddy

Greetins
Mr. Y 
```

使用您的程序（稍作修改，以便运行）：

```
sqlplus -s $DBLOGIN <<ENDE_SQL > file
SET FEEDBACK OFF;
SET SERVEROUTPUT ON FORMAT WORD_WRAPPED; -- setting this explicitly for effect
DECLARE
  l_text CLOB;
  l_pos number := 1; -- added this
BEGIN
  SELECT text
    INTO l_text
    FROM t42;
  while dbms_lob.substr(l_text, 1, l_pos) is not null LOOP
    if dbms_lob.substr(l_text, 2, l_pos) = CHR(13) || CHR(10) then
      DBMS_OUTPUT.NEW_LINE;
      l_pos:=l_pos + 1;
    else
      DBMS_OUTPUT.put(dbms_lob.substr(l_text, 1, l_pos));
    end if;
    l_pos:=l_pos + 1;
  END LOOP;
  dbms_output.new_line; -- added this
END;
/

ENDE_SQL 
```

`file`包含：

```
Hello Mr. X
Text from Mailboddy
Greetins
Mr. Y 
```

如果我只在您的代码中更改一行，则：

```
SET SERVEROUTPUT ON FORMAT WRAPPED; 
```

那么`file`现在包含：

```
Hello Mr. X

Text from Mailboddy

Greetins
Mr. Y 
```

* * *

您可能需要考虑[`UTL_FILE`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm)这一点，而不是`DBMS_OUTPUT`，具体取决于您的配置。[这样](https://stackoverflow.com/a/1434527/266304)的事情可能会给你一些指示。

# python - 如何存储标记化结果以供进一步索引？

> ID：12783582
> 
> 赞同：2
> 
> 时间：2012-10-08T14:16:46.160
> 
> 标签：python, indexing, search-engine, information-retrieval

我完全是一个初学者，现在尝试实现一个简单的`search engine in python`.

我`tokenizer`通过使用的函数做得很好`NLTK`。但是我现在对存储标记器的结果感到困惑。我需要保留它们以供进一步索引。

这样做的常见方法是什么？我应该使用什么样的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:27:00.407

[](http://nlp.stanford.edu/IR-book/html/htmledition/irbook.html)*Manning、Raghavan 和 Schütze[*的《信息检索导论》用几章来介绍索引的构建和存储；*](http://nlp.stanford.edu/IR-book/html/htmledition/irbook.html)Baeza-Yates 和 Ribeiro-Neto 的[*《现代信息检索*](http://people.ischool.berkeley.edu/~hearst/irbook/)》也是如此*

 *但是，对于一个简单的爱好/学习项目，[SQLite](http://docs.python.org/library/sqlite3.html)足以存储索引。您需要一个包含 (term, document-id, frequency) 三元组的表来计算 tf 和一个存储 (term, df) 对的表，两者都带有术语索引；这足以计算 tf-idf。*

# c# - 将 C# 3D 数组作为 1D 字节数组传递给 C++ 库

> ID：12783586
> 
> 赞同：1
> 
> 时间：2012-10-08T14:17:11.730
> 
> 标签：c#, c++, visual-c++, dll, c#-3.0

我有一个 C# 应用程序，我在其中创建了一个 3D Int16(short) 数组。想要将此 3D 数组传递给 C++ 库，以将此数据设置为 1D 字节数组形式的对象。因此，场景要么在将数据传递到库之前对其进行转换，要么在库本身中进行转换。

*   我知道如何在 C# 中将 3D Int16 数组转换为 1D 字节数组，但我不知道如何使用 C++ 进行转换？
*   关于我在 C# 中使用的 C++ 或 C#，哪一个会更快`ConvertAll`？
*   内存是否会翻倍，或者我可以将 C++ 库中的对象数据设置为指向我在 C# 中的相同卷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:32:27.233

> 我知道如何在 C# 中将 3D Int16 数组转换为 1D 字节数组，但我不知道如何使用 C++ 进行转换？

这取决于您希望如何在一维数组中排列行、列和深度。我看不出有任何转换它的理由，因为您可以按照您想要的方式随机访问这些元素。当您不需要时，没有理由承担此类手术的费用。如果您不将其存储在文件中或通过网络发送它，我无法理解您为什么要序列化它。

为什么你不能这样做：

```
__declspec( dllexport ) void cppMatrixCode(__int16*** matrix_3d, int width, int height, int depth)
{
   //manipulate the matrix with matrix_3d[the row you want][col you want][depth you want]

   //or to serialize:
   for(int i = 0; i < width; i++)
     for(int j = 0; j < height; j++)
       for(int k = 0; k < depth; k++)
       {
         _int16 value = matrix_3d[i][j][k];
         //now add value to another array or whatever you want.
       }
}

in C#
[DllImport("YourDLLGoesHere")]
static extern void cppMatrixCode(short[,,] matrix_3d, int width, int height, int depth);

short[,,] matrix = new short[width, height, depth];
//add your values to matrix
cppMatrixCode(matrix, width, height, depth); 
```

这应该只在 32 位系统上复制 128 个字节，或在 64 位系统上复制 160 个字节。

> 关于我在 C# 中使用 ConvertAll，哪一个会更快 C++ 或 C#？

这取决于您具体在做什么，但编写良好的 C++ 代码通常比 CLI 代码更快。

> 内存是否会翻倍，或者我可以将 C++ 库中的对象数据设置为指向我在 C# 中的相同卷？

您应该能够通过引用将 C# byte[] 传递给 c++ 函数，而无需复制任何数据。不过，我们需要更多关于您到底想要做什么的详细信息。

# python - 将 XPath 与 lxml.html 一起使用

> ID：12783587
> 
> 赞同：0
> 
> 时间：2012-10-08T14:17:13.493
> 
> 标签：python, html, xpath, lxml

我没有太多使用 XPath，所以请耐心等待。我有一个包含两个表单的 HTML 文件，每个表单都包含一些输入/选择元素。

```
In [146]: len(doc.xpath('//input | //select'))
Out[146]: 14

In [147]: len(doc.xpath('//form'))
Out[147]: 2 
```

有没有办法遍历表单并找到相应的输入/选择元素？目前它返回所有元素两次。

```
In [149]: for e in doc.xpath('//form'):
     ...:     print len(e.xpath('//input | //select'))
     ...:     
14
14 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:33:44.700

我不知道 python 中的 XPath 集成，但我认为您可以尝试：

```
e.xpath('.//input | .//select') 
```

在你的 for 循环中。

`e`是附加到整个文档的节点。当您对其执行 XPath 时，您应该停留在此上下文中。使用 时`//`，您处于文档上下文中。

# php - 致命错误：调用未定义函数 mysql_connect()

> ID：12783589
> 
> 赞同：2
> 
> 时间：2012-10-08T14:17:15.593
> 
> 标签：php

我收到此错误致命错误：在第 8 行的 /var/www/html/test1.php 中调用未定义函数 mysql_connect() 以获取以下代码：

```
<?php
$host = "localhost";
$user = "user12";
$pass = "34klq*";
ini_set ('display_errors', 1);
$r = mysql_connect($host, $user, $pass);
if (!$r) {
echo "Could not connect to server\n";
trigger_error(mysql_error(), E_USER_ERROR);
} else {
echo "Connection established\n";
}
echo mysql_get_server_info() . "\n";
mysql_close();
?> 
```

我的系统中安装了 PHP、MYSQL、php-Mysql：

```
[root@localhost ~]# rpm -qa | grep mysql
php-mysql-5.3.3-3.el6_2.8.i686
mysql-devel-5.1.61-4.el6.i686
mysql-server-5.1.61-4.el6.i686
mysql-bench-5.1.61-4.el6.i686
mysql-libs-5.1.61-4.el6.i686
mysql-5.1.61-4.el6.i686

[root@localhost ~]# rpm -qa | grep php 
php-common-5.3.3-3.el6_2.8.i686
php-5.3.3-3.el6_2.8.i686
php-mysql-5.3.3-3.el6_2.8.i686
php-cli-5.3.3-3.el6_2.8.i686
php-pdo-5.3.3-3.el6_2.8.i686 
```

phpinfo() 的输出：http: [//jsfiddle.net/nit8899/GZ4f7/](http://jsfiddle.net/nit8899/GZ4f7/)

我还编辑了`/etc/php.ini`文件：

```
extension=mysql.so 
```

但即便如此，我也收到了这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:21:26.300

You should open your php.ini file located in php folder, and uncomment this line of code:

```
;extension=php_mysql.dll 
```

So it looks like this:

```
extension=php_mysql.dll 
```

Your php folder location depends on your lampp/wampp installation, if using xampp its located in: xampp/php/php.ini

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T11:21:26.747

如果您正在使用 linux [debian]

# apt-get 安装 php5-mysql

因为您的 PHP 无法与 mysql 通信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:21:07.673

I cheated and looked on my phone

The build of your PHP spectifically says '--without-mysql'

Therefore, mysql functions will not be available.

You should rebuild.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:21:11.553

Your PHP is configured with `--without-mysql`.

The [documentation](http://php.net/manual/en/mysql.installation.php) describes how to configure with mysql extension enabled. You may have your reasons, but PDO would be a better choice here is the [documentation](http://php.net/manual/en/mysql.installation.php) for configuring with PDO mysql.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T11:51:49.230

我的解决方案在这里（代码可能对引号和斜杠敏感）：[致命错误：调用未定义函数mysql_connect（）无法解决](https://stackoverflow.com/questions/12221364/fatal-error-call-to-undefined-function-mysql-connect-cannot-solve/18871425#18871425)

# vim - 终端vim中的气球评估

> ID：12783597
> 
> 赞同：6
> 
> 时间：2012-10-08T14:17:42.247
> 
> 标签：vim

我一直在使用[pyclewn](http://pyclewn.sourceforge.net/)进行调试`vim`。它可以很好`gvim`地`ballooneval`显示变量的值，但问题是我主要`vim`在终端中使用，所以我不能使用气球功能。

我找到[了这个](https://groups.google.com/forum/#!msg/vim_use/9Nw00bKITR0/5CkM4MYCWNcJ)，但它看起来已经废弃了，我无法让它工作，因为没有安装说明。有谁知道`ballooneval`在终端 vim 中使用的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T14:25:38.353

从文档：

> m +balloon_eval 气球评估支持。
> 使用支持的 GUI（Motif、GTK、GUI）和 Netbeans/Sun Workshop 集成或 +eval 功能进行编译时包括在内。

虽然尚不清楚，这是否意味着终端模式根本不支持`ballooneval`（或者在编译 GUI 时它在终端模式下可用），但在文档中没有这样做的线索。所以：你不太可能`ballooneval`在终端模式下使用而不弄乱 Vim 源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-24T03:45:01.730

从 Vim 版本[8.0.1309](https://github.com/vim/vim/commit/51b0f3701ecb440aa72ab6017c1df6940c0e0f6f)开始，终端支持气球。似乎正在进行中。

您可以在以下问题中找到使用示例：

[https://github.com/vim/vim/issues/2481](https://github.com/vim/vim/issues/2481)

# ios - NSDecimalNumber decimalNumberByMultiplyingBy 没有给出预期的结果

> ID：12783598
> 
> 赞同：1
> 
> 时间：2012-10-08T14:17:43.283
> 
> 标签：ios, nsdecimalnumber

我面临一个问题`NSDecimalNumber`。我有类似于下面的代码。

```
NSDecimalNumber *n1 = [NSDecimalNumber decimalNumberWithString: @"1e-80"];
NSDecimalNumber *n2 = [NSDecimalNumber decimalNumberWithString: @"1e-80"];
NSDecimalNumber *n3 = [n1 decimalNumberByMultiplyingBy: n2 withBehavior: [NSDecimalNumberHandler decimalNumberHandlerWithRoundingMode: NSRoundPlain
                                                                             scale: 127
                                                                  raiseOnExactness: TRUE
                                                                   raiseOnOverflow: TRUE
                                                                  raiseOnUnderflow: TRUE
                                                               raiseOnDivideByZero: TRUE]];
NSLog(@"result=%@", [n3 descriptionWithLocale: [NSLocale autoupdatingCurrentLocale]]); 
```

上面的代码正在打印结果`1e+98`，这是不正确的；它应该为零。我在这里想念什么？

# javascript - IIFE 不会立即调用

> ID：12783601
> 
> 赞同：1
> 
> 时间：2012-10-08T14:17:47.940
> 
> 标签：javascript, iife

在下面的代码片段中，IIFE init() 没有调用。如果需要，我可以发布任何其他代码。

这是一个下拉菜单。我正在测试，`$Frame.Support()`所以我很确定这与它有关，或者更多的是我更改代码结构的方式，以便它现在成为方法中的参数。

```
$Frame.Support({
    name: 'Menu',
    body: function () {
        var top_element = $A("#hold_name")[0],
            bottom_element = $A("#wrap_bottom")[0],
            time_out_id = 0,
            TIME_DELAY = 1000;

        function top_mouse_over() {
            window.clearTimeout(time_out_id);
            bottom_element.style.visibility = 'visible';
        }
        function bottom_mouse_over() {
            window.clearTimeout(time_out_id);
        }
        function mouse_out() {
            time_out_id = window.setTimeout(function () {
                bottom_element.style.visibility = 'hidden';
            }, TIME_DELAY);
        }

        (function init() {
            alert('I can\'t see me.');
            top_element.addEventListener("mouseover", top_mouse_over, false);
            top_element.addEventListener("mouseout", mouse_out, false);
            bottom_element.addEventListener("mouseover", bottom_mouse_over, false);
            bottom_element.addEventListener("mouseout", mouse_out, false);
        }());
    }
}); 
```

# matlab - MATLAB tif 文件格式 vrs PNG 文件格式。真正的无损压缩？

> ID：12783602
> 
> 赞同：3
> 
> 时间：2012-10-08T14:17:50.973
> 
> 标签：matlab, compression, png, tiff, lossless

我一直在解决一个问题，我需要将矩阵保存为图像，并使其成为 MATLAB 中矩阵的真正无损示例。

我尝试以无损形式将图像写为 png 和 tiff：

```
名称大小字节类属性

  差异 237x354 671184 双              
  imPNG 237x354 167796 uint16              
  imPNGD 237x354 671184 双              
  imTiff 237x354 83898 uint8               
  imTiffD 237x354 671184 双              
  带衬垫的 2042x2170 35449120 双              
  测试图像 237x354 671184 双              

```

testImage 是我想无损保存的矩阵。

我使用以下几行将矩阵写为 tif 和 png：

```
EDU>> imwrite(testImage,'imTiff.tif','tiff','compression','none');
EDU>> imwrite(testImage,'imTiff.png','PNG','bitdepth',16); 
```

然后我将图像加载回工作空间（imTiff 和 inPng）并将它们转换为双倍。

```
EDU>> imPngD = im2double(imPng);
EDU>> imTiffD = im2double(imTiff); 
```

但是当我从 testImage 中减去 imPngD 或 imTiffD 时，会留下剩余值。

我的问题是：
我的处理过程有问题吗？
如果不是，这是否意味着 tif 和 png 并不是真正完全无损的？

如果您认为有帮助，我可以提供图片。

我认为这些图像可能会有所帮助： testImage
![testImage - 原始](../Images/bdc330d404cb02bfd9576c09f5367149.png)
ImTiffD 和 testImage 之间的差异 imPngD 和 testImage
![imTiffD 和 testImage 的区别](../Images/4374707875c5b5587ac3b802e6af5c6d.png)
之间的差异
![imPngD 和 testImage 的区别](../Images/5cd9634fa57889ccba2ec1fd230b6cb2.png)

请注意：图像 2-3 中的灰度像素值为零，即 testImage 与重新加载的图像之间的差异为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:15:28.397

PNG 和 TIFF 都是真正无损的（忽略打包 JPEG 的 TIFF 选项，您没有使用该选项）。然而，考虑到它们的输入，它们是真正无损的，对于 PNG，每个颜色值每个像素 8 或 16 位，或者对于 TIFF，每个颜色值每个像素 8 位。

如果您正在寻找超出 8 位或 16 位值可以承载的精度，那么您会看到差异。

# javascript - 使用枚举的 JavaScript 切换案例

> ID：12783610
> 
> 赞同：8
> 
> 时间：2012-10-08T14:18:31.457
> 
> 标签：javascript, enums, switch-statement, case

我有一个这样声明的“枚举”：

```
var PlaceType = {
        PASSABLE_TERRAIN: 1,
        IMPASSABLE_TERRAIN: 0,
        SOMEWHAT_PASSABLE_TERRAIN: 2,
        PATH: 3
    }; 
```

和这样声明的函数：

```
setPlaceType(placeType) {
        this.clear = false;
        this.placeType = placeType;

        alert("before switch "+(PlaceType.SOMEWHAT_PASSABLE_TERRAIN==this.placeType));
        switch(this.placeType) {
        case PlaceType.PASSABLE_TERRAIN: {
            alert("Case PASSABLE");
            break;
        }
        case PlaceType.IMPASSABLE_TERRAIN: {
            alert("Case IMPASSABLE");
            break;
        }
        case PlaceType.SOMEWHAT_PASSABLE_TERRAIN: {
            alert("Case SOMEWHAT_PASSABLE");
            break;
        }
        case PlaceType.PATH: {
            alert("Case PATH");
            break;
        }
        default: {
            alert("case default");
        }
        }
    } 
```

如果我这样称呼它：

```
setPlaceType(1); 
```

我收到以下警报：“在 switch true 之前”，“case default”

如果我这样称呼它：

```
setPlaceType(2); 
```

我收到以下警报：“在 switch false 之前”、“case default”

换句话说，该函数是用正确的参数调用的，当做（在我看来）与开关相同的比较但通过“==”时，我得到了正确的行为，但开关从不匹配值到适当的情况。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T14:30:47.173

如果任一运算符是字符串，则比较运算符会将两个操作数转换为字符串。如果您传入一个字符串，则您正在比较`string == number`哪个会将数字转换为字符串，并且在传递字符串的情况下`'2'`，它将是真实的。

switch case 比较使用身份运算符`===`，如果操作数不是同一类型，则会失败。

长话短说，如果您的案例与数字进行比较，请确保您始终传递一个数字，您可以像这样仔细检查：

```
setPlaceType(placeType) {
    if (typeof placeType !== 'number') {
        throw new Error('You must pass a number to setPlaceType!');
    }
    ...
} 
```

另外，您应该像这样调用您的函数：

```
setPlaceType(PlaceType.PASSABLE_TERRAIN); 
```

否则，使用“枚举”（我松散地使用该术语）对象实际上没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:24:17.970

匹配大小写是使用[=== 标识运算符而不是 == 相等运算符](https://stackoverflow.com/a/359509/14104)确定的。表达式必须匹配，无需任何类型转换。如果您传递的是字符串而不是整数，它将失败。

```
setPlaceType(1);  //"Case PASSABLE"
setPlaceType("1");  //"case default" 
```

使用上述行运行代码的示例：[jsFiddle](http://jsfiddle.net/eqzTL/)

所以如果你说它失败了，你可能是在比较一个字符串和一个数字。使用 parseInt。

```
this.placeType = parseint(placeType,10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:30:27.563

当您使用`==`js进行比较时`type-coercion`，用于将 2 个操作数转换为中间类型，在这种情况下为字符串，从而成功比较它们。

因此，要获得使用您的 switch 语句的效果，您需要这样转换

```
this.placeType = parseint(placeType); 
```

您还必须在这里学习的是，使用运算符比较 javascript 中的 2 个值并不是一个理想的做法`==`，而是使用`===`运算符来检查类型是否相同。所以在你的情况下，

```
alert("before switch "+(PlaceType.SOMEWHAT_PASSABLE_TERRAIN==this.placeType)); 
```

如果您`===`在比较`int`和时使用，则会失败`string`

在这里工作演示：http: [//jsfiddle.net/pratik136/ATx8c/](http://jsfiddle.net/pratik136/ATx8c/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T14:31:22.407

参考this => [Switch-Case for Javascript中的字符串不能按预期工作](https://stackoverflow.com/questions/2573145/switch-case-for-strings-in-javascript-not-working-as-expected)

**切换**做一个`===`，而**如果**做一个`==`。

希望这有帮助！祝你今天过得愉快

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-13T17:51:13.800

将枚举用于 switch case 的另一种方法：

```
 const PlaceType = Object.freeze({
            PASSABLE_TERRAIN: 1,
            IMPASSABLE_TERRAIN: 0,
            SOMEWHAT_PASSABLE_TERRAIN: 2,
            PATH: 3
        });

   function setPlaceType(placeType){
      return({
              0:"Case IMPASSABLE_TERRAIN",
              1:"Case PASSABLE_TERRAIN",
              2:"Case SOMEWHAT_PASSABLE_TERRAIN",
              3:"PATH"      
              }[placeType]);
     } 
```

# python - 需要返回协方差的 Python 多项式拟合函数

> ID：12783611
> 
> 赞同：3
> 
> 时间：2012-10-08T14:18:37.797
> 
> 标签：python, numpy, scipy, covariance, polynomial-math

我想对数据集（X，Y，Yerr）进行最小二乘多项式拟合并获得拟合参数的协方差矩阵。此外，由于我有很多数据集，CPU 时间是一个问题，所以我正在寻找一个分析（=快速）解决方案。我发现了以下（非理想）选项：

`numpy.polyfit`适合，但不考虑错误 Yerr，也不返回协方差；

`numpy.polynomial.polynomial.polyfit`确实接受 Yerr 作为输入（以权重的形式），但也不返回协方差；

`scipy.optimize.curve_fit`并且`scipy.optimize.leastsq`可以定制以拟合多项式并返回协方差矩阵，但是 - 作为迭代方法 - 这些比例程慢得多`polyfit`（产生解析解）；

Python是否提供了一个分析多项式拟合例程来返回拟合参数的协方差（或者我必须自己写一个:-)？

***更新：*** 似乎在 Numpy 1.7.0 中，*现在*`numpy.polyfit`不仅接受权重，还返回系数的协方差矩阵......所以，问题解决了！:-)

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:51:37.300

您想要一个快速加权最小二乘模型，无需额外开销即可返回协方差矩阵？通常，正确的协方差矩阵将取决于数据生成过程 (DGP)，因为不同的 DGP（例如误差的异方差性）意味着参数估计的不同分布（想想 White 与 OLS 标准误差）。但是，如果您可以假设 WLS 是正确的方法，并且我相信您会使用 WLS 的 beta 的渐近方差估计 (1/n X'V^-1X)^-1，其中 V 是加权矩阵由 Yerrs 创建。如果 numpy.polynomial.polynomial.polyfit 为您工作，这是一个非常简单的公式。

我在网上找了一份参考资料，但找不到。但请参阅 Fumio Hayashi 的 Ecomometrics，2000 年，普林斯顿大学出版社，p。133 - 137 用于推导和讨论。

2012 年 12 月 4 日更新：还有另一个堆栈溢出问题即将到来： [numpy.polyfit 没有关键字“cov”](https://stackoverflow.com/questions/10261972/numpy-polyfit-has-no-keyword-cov)，它对如何使用 scikits.statsmodels 做你想做的事有很好的解释（带有代码）。我相信您会想要替换该行：

```
result = sm.OLS(Y,reg_x_data).fit() 
```

至

```
result = sm.WLS(Y,reg_x_data, weights).fit() 
```

像以前一样使用 numpy.polynomial.polynomial.polyfit 将权重定义为 Yerr 的函数。有关在 WLS 中使用 statsmodels 的更多详细信息，[请访问 statsmodels 网站](http://statsmodels.sourceforge.net/stable/regression.html#introduction)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:45:01.610

这里使用 scipy.linalg.lstsq

```
import numpy as np,numpy.random, scipy.linalg
#generate the test data
N = 100
xs = np.random.uniform(size=N)
errs = np.random.uniform(0, 0.1, size=N) # errors
ys = 1 + 2 * xs + 3 * xs ** 2 + errs * np.random.normal(size=N)

# do the fit
polydeg = 2
A = np.vstack([1 / errs] + [xs ** _ / errs for _ in range(1, polydeg + 1)]).T
result = scipy.linalg.lstsq(A, (ys / errs))[0]
covar = np.matrix(np.dot(A.T, A)).I
print result, '\n', covar

>> [ 0.99991811  2.00009834  3.00195187]
[[  4.82718910e-07  -2.82097554e-06   3.80331414e-06]
 [ -2.82097554e-06   1.77361434e-05  -2.60150367e-05]
 [  3.80331414e-06  -2.60150367e-05   4.22541049e-05]] 
```*

# javascript - 带有 Node.js + Express + Hogan.js 的部分

> ID：12783615
> 
> 赞同：18
> 
> 时间：2012-10-08T14:18:43.993
> 
> 标签：javascript, node.js, express, viewengine, hogan.js

我正在使用 Node.js + Express 开发一个站点，并将其用作视图引擎 Hogan.js。

这是我的文件`app.js`：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'hjs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(app.router);
  app.use(require('less-middleware')({ src: __dirname + '/public' }));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/about', routes.about);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

该文件`/routes/index.js`是：

```
/*
 * GET pages.
 */

exports.index = function(req, res){
  res.render(
    'index',
    {
      title: 'Home Page',
      author: 'Bruce Wayne'
    }
  );
};

exports.about = function(req, res){
  res.render(
    'about',
    {
      title: 'About Page',
      author: 'Bruce Wayne'
    }
  );
}; 
```

在`/views`文件夹中，有：

|-`part.hjs`

|-`index.hjs`

|-`cv.hjs`

该文件`part.hjs`是：

```
<h3>Hello {{ author }}</h3> 
```

该文件`index.hjs`是：

```
<h1>Title: {{ title }} </h1>
{{> part }}
Welcome to Gotham City. 
```

文件`about.hjs`是：

```
<h1>Title: {{ title }}</h1>
{{> part }}
I'm not Joker. 
```

我有两个问题：

1.  如何正确使用页面中的部分？（此代码不起作用）
2.  我可以在两个或多个页面上使用相同的“标题”而不重复文件中的值分配`/routes/index.js`吗？

最好的问候，六。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-08T19:36:13.623

我找到了第一个问题的解决方案。

首先，我删除了`hjs`：

```
npm remove hjs 
```

然后，我安装了软件包`hogan-express`：

```
npm install hogan-express 
```

此外，我编辑`app.js`：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.engine('html', require('hogan-express'));
app.enable('view cache');

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'html');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(app.router);
  app.use(require('less-middleware')({ src: __dirname + '/public' }));
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

并且`routes/index.js`：

```
exports.index = function(req, res) {
  res.locals = {
    title: 'Title',
  };
  return res.render(
    'index',
    {
      partials:
      {
        part: 'part',
      }
    }
  );
}; 
```

现在，`/views`里面有`index.html`，`part.html`。该文件`part.html`包含：

```
<h1>{{ title }}</h1> 
```

该文件`index.html`包含：

```
{{> part}}
Hello world! 
```

所以，它工作正常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-09T10:14:36.420

至少在 Express 4+ 中，partials 是开箱即用的。您可以将 express-generator（来自 npm）与 --hogan 或 -H 选项一起使用。

之后，您需要将部分添加到渲染方法：

```
router.get('/', function(req, res, next) {
  res.render('index', 
        { 
            title: 'My Site',
            partials: {header: 'header'} 
        });
}); 
```

然后，在您的模板中使用 {{ > xxx }}

```
<body>
  {{> header }}
  <h1>{{ title }}</h1>

  <p>Welcome to {{ title }}</p>
</body> 
```

注意：这在视图中有 header.hjs

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-19T08:41:23.490

要在 express+hogan 中使用 partials，只需执行以下操作：

```
app.get('/yourRoute', function(req, res){  
   res.render('yourPartial', function(err,html){
       var partialHTML = html;
       res.render('yourMainView', { myPartial: partialHTML }, function(err,html){
          res.send(html);   
       });     
   });
} 
```

现在，yourMainView.html：

```
<p>Something Something Something</p>
{{{partialHTML}}}
<p>Bla Bla Bla</p> 
```

请注意三重“{”而不是通常的双倍！告诉 hogan (mustache) 将其解析为 HTML 而不是字符串！

就是这样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-31T12:20:12.293

至于您的部分问题，如果您使用[consolidate.js](http://github.com/visionmedia/consolidate.js/)，您可以简单地执行以下操作：

```
res.render('index', {
  partials: {
    part  : 'path/to/part'
  }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T14:53:09.283

这是个问题。在 Express 3 中很难获得部分支持。

你最好的选择是： [https ://github.com/visionmedia/consolidate.js](https://github.com/visionmedia/consolidate.js) `npm install consolidate`

这些补丁采用不同的方法为 Hogan 添加局部：

*   [https://github.com/visionmedia/consolidate.js/pull/51](https://github.com/visionmedia/consolidate.js/pull/51)
*   [https://github.com/visionmedia/consolidate.js/pull/29](https://github.com/visionmedia/consolidate.js/pull/29)

不幸的是，引擎本身没有基于文件系统的部分的钩子，所以我认为人们对如何以及在哪里实现部分感到困惑。我最终使用了 LinkedIn 的 Dust.js 实现，因为已经有了部分支持。Master其实有更好的支持，加上我昨天提交了相对路径的补丁。

乔什

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-13T20:13:50.193

我会使用`mmm`而不是`hjs`.

[https://github.com/techhead/mmm](https://github.com/techhead/mmm)

免责声明：我写了这个包。

只需替换所有出现的`hjs`with`mmm`和 partials 即可开始工作。上面的链接中有更多信息和示例。

至于您的另一个问题，如果您想在多个视图中共享属性，您有几个选择。

当您调用`res.render(name, options)`时，`options`实际上将在传递给渲染引擎之前`res.locals`将其合并。`app.locals`因此，要设置应用范围的属性，您只需将其分配给`app.locals`.

```
app.locals.title = "Default Title"; // Sets the default title for the application 
```

这个概念实际上适用于几乎所有 Express 3 视图引擎。

但是，`mmm`具体而言，请参阅表示逻辑下的部分以了解将值绑定到模板或模板集的更多方法。

# php - zf2：如何将我的 zend 邮件传输配置存储在 mail.local.php 文件中？

> ID：12783617
> 
> 赞同：1
> 
> 时间：2012-10-08T14:18:49.017
> 
> 标签：php, email, zend-framework2

我试过这个，但对我来说没有用。 [https://stackoverflow.com/questions/10537318/how-to-use-the-di-for-zend-mail-transport-smtp](https://stackoverflow.com/questions/10537318/how-to-use-the-di-for-zend-mail-transport-smtp)

我使用 zend 框架 2.0.3dev

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-09T09:26:30.573

对我来说，这适用于谷歌应用邮件地址

`config/autoload/mail.local.php`

```
return array(
'mail' => array(
    'transport' => array(
        'options' => array(
            'host'              => 'smtp.gmail.com',
            'connection_class'  => 'plain',
            'connection_config' => array(
                'username' => 'example@example.org',
                'password' => '',
                'ssl' => 'tls'
            ),
        ),  
    ),
),
); 
```

并且在`Module.php`

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'mail.transport' => function (ServiceManager $serviceManager) {
                $config = $serviceManager->get('Config'); 
                $transport = new Smtp();                
                $transport->setOptions(new SmtpOptions($config['mail']['transport']['options']));

                return $transport;
            },
        ),
    );
} 
```

并在控制器中

```
$transport = $this->getServiceLocator()->get('mail.transport'); 
```

我希望这段代码对某人有用：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-01T11:14:45.480

```
Try:
$objEmail = new \Zend\Mail\Message();
$objEmail->setBody('Message here');
$objEmail->setFrom('from@domain.com', 'From');
$objEmail->addTo('to@domain.com', 'To');
$objEmail->setSubject('Subject here');
// Setup SMTP transport using PLAIN authentication over TLS
$transport = new \Zend\Mail\Transport\Smtp();
$options = new \Zend\Mail\Transport\SmtpOptions(array(
    'name' => 'smtp.gmail.com',
    'host' => 'smtp.gmail.com',
    'port' => 587, // Notice port change for TLS is 587
    'connection_class' => 'plain',
    'connection_config' => array(
        'username' => '',
        'password' => '',
        'ssl' => 'tls',
    ),
));
$transport->setOptions($options);
$transport->send($objEmail); 
```

# java - java并发包中的可停止和可重新执行的线程？

> ID：12783619
> 
> 赞同：0
> 
> 时间：2012-10-08T14:19:00.420
> 
> 标签：java, concurrency

java中是否有可以执行runnables并停止和重新执行的并发结构（如线程），还是我必须自己实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:23:44.060

[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)，[这里](http://bobah.net/d4d/source-code/misc/thread-pool-executor-example-j2ee)的例子。

如果像 Peter Lawrey 建议的那样，您追求的是可靠的 Runnable 生命周期管理器，那么 Java 不是正确的工具。如果线程（或执行程序中的任务）挂起，最好的恢复行为是拥有一个看门狗线程，该线程将使用“restart me”退出代码来自杀进程，并拥有一个外部启动器（shell 脚本等）来重新启动进程它以“重新启动我”退出代码而死。

# php - ZF2 / ZF2 中的路由测试相当于 Zend_Test_PHPUnit_Controller_TestCase？

> ID：12783622
> 
> 赞同：1
> 
> 时间：2012-10-08T14:19:06.110
> 
> 标签：php, unit-testing, routes, phpunit, zend-framework2

到目前为止，我一直在测试我的 ZF2 控制器，如下所示：

```
namespace Application\Controller;

use Application\Controller\IndexController;
use Zend\Http\Request;
use Zend\Http\Response;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Router\RouteMatch;
use PHPUnit_Framework_TestCase;

class IndexControllerTest extends PHPUnit_Framework_TestCase
{
    public function testIndexActionCanBeAccessed()
    {
        $this->routeMatch->setParam('action', 'index');

        $result   = $this->controller->dispatch($this->request);
        $response = $this->controller->getResponse();

        $this->assertEquals(200, $response->getStatusCode());
        $this->assertInstanceOf('Zend\View\Model\ViewModel', $result);
    }

    protected function setUp()
    {
        \Zend\Mvc\Application::init(include 'config/application.config.php');

        $this->controller = new IndexController();
        $this->request    = new Request();
        $this->routeMatch = new RouteMatch(array('controller' => 'index'));
        $this->event      = new MvcEvent();
        $this->event->setRouteMatch($this->routeMatch);
        $this->controller->setEvent($this->event);
    }

    protected $controller = null;
    protected $event = null;
    protected $request = null;
    protected $response = null;
    protected $routeMatch = null;
} 
```

这允许我在视图呈现之前测试 ViewModel 是否分配了正确的数据（如果有）。这很好地达到了这个目的，但它没有做的是测试我的路由是否像 ZF1`Zend_Test_PHPUnit_Controller_TestCase`测试一样正常工作。

在这些情况下，我会通过运行开始测试，`$this->dispatch('/some/relative/url')`并且只有在正确设置路线的情况下才能获得积极的测试结果。通过这些 ZF2 测试，我专门告诉它使用哪个路由，这并不一定意味着真正的请求将被正确路由。

如何测试我的路由在 ZF2 中是否正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T02:20:30.153

我参加聚会迟到了，但它仍然对新手有用。现在的解决方案是继承自`\Zend\Test\PHPUnit\Controller\AbstractControllerTestCase`，因此用法与 ZF1 非常相似：

```
class IndexControllerTest extends \Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase
{
    public function setUp()
    {
        $this->setApplicationConfig(
                include __DIR__ . '/../../../../../config/application.config.php'
        );
        parent::setUp();
    }

    public function testIndexActionCanBeAccessed()
    {
        $this->dispatch('/');

        $this->assertResponseStatusCode(200);
        $this->assertModuleName('application');
        $this->assertControllerName('application\controller\index');
        $this->assertControllerClass('IndexController');
        $this->assertMatchedRouteName('home');

        $this->assertQuery('html > head');
    }
} 
```

**注意：**这`\Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase`包括`assertQuery($path)`以及其他与网络相关的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T03:48:17.060

**编辑：** ZF2 已经更新，因为我自己回答了这个问题。[PowerKiki 的答案](https://stackoverflow.com/a/15237824/126531)更好。

# html - 三列流体宽度，可使用或不使用侧边栏

> ID：12783623
> 
> 赞同：1
> 
> 时间：2012-10-08T14:19:08.307
> 
> 标签：html, css

我有可以在特定页面上打开和关闭的侧边栏，但我正在尝试设计一个 CSS 布局来填充可用空间，而不管启用了哪些侧边栏。到目前为止我有这个：

CSS：

```
#container{
    width: 100%;
}
#sidebar-left, #sidebar-right, #content{
    height: 50px;

}
#sidebar-right{
    background: gray;
    width: 50px;
    float: right;
}

#sidebar-left{
    background: yellow;
    width: 50px;
    float: left;
}

#content{
    background: orange;
} 
```

​ HTML：

```
<div id="container">
    <div id="content">content content content content content content content
        <div id="sidebar-left">sidebar</div>
        <div id="sidebar-right">sidebar</div>
    </div>
</div> 
```

JSFiddle 链接： [LINK](http://jsfiddle.net/aBbtN/6/)

问题是右列与主要内容列重叠。但是，我仍然希望将中间列保持在 100%，以便在禁用侧边栏之一时填满所有空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:24:06.167

添加一个包含您的主要内容的容器，并应用`overflow: hidden`到它，以便对其应用新的[块格式化上下文](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)。您需要稍微重新排列元素。见下文：

HTML

```
<div id="container">
    <div id="content">
        <div id="sidebar-left">sidebar</div>
        <div id="sidebar-right">sidebar</div>
        <div id="col-main">content content content content content content content contente conte tnoe o toa nao no ton oanota ona</div>
    </div>
</div> 
```

​CSS

```
#container {
    width: 100%;
}

#sidebar-left, #sidebar-right, #content {
    height: 50px;

}
#sidebar-right {
    background: gray;
    width: 50px;
    float: right;
}

#sidebar-left {
    background: yellow;
    width: 50px;
    float: left;
}

#content {
    background: orange;
    height: auto;
}

#col-main {
    overflow:hidden;
} 
```

​</p>

这是一个 jsfiddle 用列演示它：http: [//jsfiddle.net/aBbtN/8/](http://jsfiddle.net/aBbtN/8/)

并且没有：http: [//jsfiddle.net/aBbtN/10/](http://jsfiddle.net/aBbtN/10/)

# forms - 使用 freeASPUpload 检索表单组

> ID：12783625
> 
> 赞同：0
> 
> 时间：2012-10-08T14:19:15.897
> 
> 标签：forms, asp-classic, vbscript

对不起菜鸟问题。使用使用 enctype="multipart/form-data" 加密表单的 freeASPUpload 时是否可以复制类似的内容。

```
For i = 1 to Request.Form.Count
   Response.Write(Request.Form.Key(i))
   Response.Write(Request.Form.Item(i))
Next 
```

我知道我可以使用 Upload.Form("Name") 之类的东西访问单个表单字段，但我正在尝试找出如何将所有表单作为一个组访问。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:31:29.713

现在没有要检查的上传设置，但这不起作用吗？

```
For each x in Upload.Form
   Response.Write(x)
   Response.Write(Upload.Form(x))
Next 
```

这是组件的链接：http://www.freeaspupload.net/freeaspupload/documentation.asp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:20:10.957

未经测试，但这应该对你有用......

```
For each x in Upload.FormElements
   Response.Write(x) 
   Response.Write(Upload.Form(x)) 
Next 
```

# c# - 如何使用 c# 读取 xls 和 xlsx 文件

> ID：12783628
> 
> 赞同：14
> 
> 时间：2012-10-08T14:19:22.277
> 
> 标签：c#, openxml, xls

如何在**不使用 OLEDB 连接的情况下使用具有 OpenXML 格式的**c# 读取 xls 和 xlsx 文件。我正在寻找 Open XML 格式程序。

下面是我使用 OLEDB preocedure 的代码。但我正在寻找 OpenXML 格式。

```
public static DataTable ConvretExcelToDataTable(string FilePath)
{
    string strConn = string.Empty;

     if (FilePath.Trim().EndsWith(".xlsx"))
     {
         strConn = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1\";", FilePath);
     }
     else if (FilePath.Trim().EndsWith(".xls"))
     {
         strConn = string.Format("Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=1\";", FilePath);
     }

    OleDbConnection conn = null;
    OleDbCommand cmd = null;
    OleDbDataAdapter da = null;
    DataTable dt = new DataTable();
    try
    {
        conn = new OleDbConnection(strConn);
        conn.Open();
        cmd = new OleDbCommand(@"SELECT * FROM [Sheet1$]", conn);
        cmd.CommandType = CommandType.Text;
        da = new OleDbDataAdapter(cmd);
        da.Fill(dt);
    }
    catch (Exception exc)
    {
        Console.WriteLine(exc.ToString());
        Console.ReadLine();
    }
    finally
    {
        if (conn.State == ConnectionState.Open)
            conn.Close();
        conn.Dispose();
        cmd.Dispose();
        da.Dispose();
    }
    return dt;
} 
```

要求是以**OpenXML 格式**实现上述转换。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:21:45.817

您需要用于 xlsx 的 OpenXml SDK：

[http://www.microsoft.com/en-gb/download/details.aspx?id=30425](http://www.microsoft.com/en-gb/download/details.aspx?id=30425)

但是对于 XLS，您将无法使用此 XLS 格式不是基于 xml。

我使用 NPOI 库来访问旧文件：

[http://npoi.codeplex.com/](http://npoi.codeplex.com/)

NPOI 库还支持 xlsx，因此这将为您提供一种一致的方式来访问它们。缺点是您必须手动遍历工作表/行/列，并构建数据集，如果您有大型工作簿，这可能会影响性能。如果您想使用查询来访问数据，OLEDB 是我找到的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:29:04.593

如果您安装了 Excel，则可以使用 Microsoft.Office.Interop.Excel；

[http://support.microsoft.com/kb/302084](http://support.microsoft.com/kb/302084)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T06:24:33.490

`\`从连接字符串中删除。你可以给如下。

```
conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source="+filepath.ToString() + ";Extended Properties=Excel 12.0 Xml;"); 
```

# javascript - 使用 Backbone 的 HTML5 历史记录的 Twitter 卡片

> ID：12783630
> 
> 赞同：2
> 
> 时间：2012-10-08T14:19:32.057
> 
> 标签：javascript, web-applications, twitter, backbone.js, html5-history

我正在开发一个使用 Backbone 的 HTML5 History 选项的网络应用程序。为了避免在客户端和服务器上编写所有代码，我使用[这种方法](http://www.josscrowcroft.com/2012/code/htaccess-for-html5-history-pushstate-url-routing/)将每个请求路由到 index.html

我想知道是否有办法让 Twitter Cards 与此设置一起使用，因为目前它无法读取页面，因为所有内容都是使用 Javascript 动态加载的。

我正在考虑使用用户代理来检测它是否是 TwitterBot，如果是，则提供带有所需元标记的页面的静态版本。这行得通吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:56:29.200

是的。

在一项工作中，我们为所有 SEO/搜索/facebook 等内容进行了此操作。

我们将嗅探用户代理，如果它是以下嗅探器之一

*   Facebook 开放图谱
*   谷歌
*   必应
*   推特
*   Yandex
*   （还有几个不记得了）

我们将重定向到一个特殊页面，该页面用于将有关该页面的所有相关数据转储到一个格式良好（但完全没有样式）的页面中，以实现 SEO 目的。

这使我们能够保留我们的 google 索引位置和适当的 facebook 共享，即使我们的网站是主干中的一个完整的单页应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:14:18.920

是的，使用正确的元数据标记为 Twitterbot 提供特定页面将起作用。

您可以在使用卡片的预览工具进行开发时测试您的结果。

[https://dev.twitter.com/docs/cards/preview](https://dev.twitter.com/docs/cards/preview)（带有您的静态 URL 或只是标签）。

# javascript - jScrollPane 上的边距/边框隐藏箭头

> ID：12783631
> 
> 赞同：0
> 
> 时间：2012-10-08T14:19:32.790
> 
> 标签：javascript, css, jscrollpane

在垂直滚动上使用 jScrollPane 我遇到了问题。试图在箭头底部设置边距/边框，甚至在 .jspVerticalBar 周围设置边距，它只是“隐藏”了我的底部箭头！

关于如何解决这个问题的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:54:37.163

您必须将 ScrollBar 的 Painter 子类化：

看这个 ：

[http://explodingpixels.wordpress.com/2008/12/08/skinning-a-scroll-bar-part-1/](http://explodingpixels.wordpress.com/2008/12/08/skinning-a-scroll-bar-part-1/) http://explodingpixels.wordpress.com/2008/12/08/skinning-a-scroll-酒吧第 2 部分/

特别是，您必须扩大边界，以便为箭头周围绘制边界留出一些空间。

# php - Android 与 php：将 utf-8 字符串保存到 MySQL

> ID：12783635
> 
> 赞同：3
> 
> 时间：2012-10-08T14:19:37.987
> 
> 标签：php, android, utf-8, json

我知道我在问一个以前被问过很多次的问题，但我觉得我需要澄清我的问题。

我有一个将 JSON 编码字符串发送到 PHP 脚本的 Android 应用程序。然后，以下代码将数据保存为完整的 JSON 字符串。（还有其他功能可以将数据正确保存到多个字段，而不仅仅是一个 JSON 字符串）

```
$json_complete = $_POST['questionnaire'];
$q = json_decode($json_complete, true);

//save complete json string to database
$query_upload = "INSERT INTO questions_json (q_id, json) VALUES('".mysql_real_escape_string($q[qID])."', '$json_complete') ON DUPLICATE KEY UPDATE json = VALUES(json)";
$result = mysql_query($query_upload) or errorReport("Error in query: $query_upload. ".mysql_error());
if (!$result)
    errorReport($result); 
```

问题是 JSON 字符串中包含的一些文本取自 Android 中以 utf-8 编码的 strings.xml。作为示例，strings.xml 文件`<item>Can\'t get there</item>`在 MySQL 中保存为“Canu0027t get there”。还将“批发和零售”另存为“批发 u0026 零售”。

`json_decode()`由于 JSON 字符串中的非 utf-8 编码字符，我在 php 中也失败了。收到以下错误：格式错误的 UTF-8 字符，可能编码不正确。

我该如何处理所有这些情况？请提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:14:47.473

您还必须在`mysql_real_escape_string()`您`$json_complete`的查询中使用，否则您会丢失原始`/uXXXX`编码。

```
$json_complete = $_POST['questionnaire'];
$q = json_decode($json_complete, true);

//save complete json string to database
$query_upload = "INSERT INTO questions_json (q_id, json) VALUES('".mysql_real_escape_string($q[qID])."', '".mysql_real_escape_string($json_complete)."') ON DUPLICATE KEY UPDATE json = VALUES(json)";
$result = mysql_query($query_upload) or errorReport("Error in query: $query_upload. ".mysql_error());
if (!$result)
    errorReport($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:48:53.163

您是否设置了帖子的编码？

```
 List<NameValuePair> params = ...;
    HttpPost httppost = new HttpPost(hostname);
    httppost.setEntity(new UrlEncodedFormEntity(params, "UTF-8")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:52:13.347

一般来说，现在所有的字符串都应该是 UTF-8，因为它可以轻松实现国际化。您应该设置您的 MySQL 数据库，以便将字符串字段存储为 UTF-8 ( `utf8_general_ci`)，并且您不会遇到转换问题。

如果您坚持在您的数据库中使用另一种编码，您可能需要检查`mb_check_encoding($string,'UTF-8')`和`mb_convert_encoding($string, 'ISO-8859-1', 'UTF-8')`.

# php - PHP - FTP 流所需的架构建议

> ID：12783638
> 
> 赞同：1
> 
> 时间：2012-10-08T14:19:53.370
> 
> 标签：php, ftp

我已经构建了一个通过 FTP 与网络摄像头交互的应用程序，但是在完成它后我遇到了速度问题。应用结构如下：

网络摄像头 -> Proftp/Mysql -> PHP

网络摄像头 ftp 的图像到通过 MySQL / PHP 管理的 Proftp 服务器。PHP 充当用户的客户端，它反过来从 FTP 服务器拉取最新的图像。

这有效，但真的很慢。问题出在 Proftp -> PHP 方面。使用标准的 PHP ftp 库，连接到 ftp 服务器大约需要 4 秒 -> 列出目录 -> 输出文件内容。

速度问题是由于过程的身份验证部分造成的。从我所见，没有办法缓存/存储/序列化 FTP 连接，这意味着对服务器的每个请求都必须启动一个新请求。

这些是我到目前为止的想法..

1) 让 PHP 脚本在 while 循环中运行，并打开永久 FTP 连接，但我知道 PHP 并非旨在以这种方式运行。

2) 创建一个运行 node.js / java 等的守护进程，它能够保持永久的 ftp 连接打开，并让 PHP 与之交互。我对这种方法担心的是编写更多代码所涉及的额外维护，这些代码复制了已经用 PHP 编写的身份验证代码。

3）？？？

任何帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:32:52.397

将它安排在 cron 作业上以使 FTP 脚本几乎永久运行或以给定的短时间间隔运行不是明智的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:42:31.807

为什么你要加倍努力从 ftp 读取图像？

如果它们在同一台服务器上，只需通过 php 直接从存储目录中读取它们。

如果它们不在同一个服务器上，利用某种机制通知 php 最新的图像（例如通过文本文件、GET 变量等）并直接输出 http/ftp 图像。

# c++ - Force a Derived Class to use the Constructor of the Base Class

> ID：12783643
> 
> 赞同：5
> 
> 时间：2012-10-08T14:20:03.167
> 
> 标签：c++, oop, class, inheritance, constructor

Is there a way to force a derived class to use the constructor of the abstract base class? It must not be a real constructor, I have an open mind about creative solutions.

```
class Abstract
{
private:
    int Member;
    string Text;

public:
    Abstract(int Member, string Text)
    {
        this->Member = Member; 
        this->Text = Text;
    }

    // e.g. defining virtual functions
} 
```

For example my abstract class has some private members which every derived class should also have. And they should be defined in the constructor, even against the will of the derived class.

I am aware that constructors are not inherited. But is there a workaround to produce a similar behavior?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T14:35:20.893

正如其他用户所建议的，您必须将基类构造函数调用到派生类构造函数的初始化列表中。

但是 C++11 提出了另一个很酷的解决方案：[继承的构造函数](http://www.stroustrup.com/C++11FAQ.html#inheriting)：

```
class Base
{
    Base(int Member, string Text) { };
};

class Derived : public Base
{
    using Base::Base; // <-- Brings to derived the Base's constructor.
}; 
```

但是你必须确保你的编译器可以使用 C++11 的特性；当然，研究继承的构造函数是否符合您的要求，而不是仅仅因为它*很酷*而使用它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-08T14:23:37.477

使用派生类的构造函数的初始化列表。

```
class Base
{
    Base(int Member, string Text) { //...
    }
};

class Derived : public Base
{
    Derived(int Member, string Text) : Base(Member, Text) {
                                    // ^^^^^^^^^^^^^^^^^^
        // ...
    }
}; 
```

# html - Password HTML redirect

> ID：12783646
> 
> 赞同：-1
> 
> 时间：2012-10-08T14:20:15.423
> 
> 标签：html

Points: I dont mind if users can see it using - view source. I don't really know much about this but I really want to get this working.

I need to add a password to this somehow, I need it so that if a person enters "hello" it will redirect, if anything else is entered nothing happens.

```
<div class="wrapper">

    <form class="form1" action="http://google.com">

        <div class="formtitle">Enter the password to proceed</div>

        <div class="input nobottomborder">
            <div class="inputtext">Password: </div>
            <div class="inputcontent">

                <input type="password" />
                <br/>

            </div>
        </div>

        <div class="buttons">

            <input class="orangebutton" type="submit" value="Login" />

        </div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:54:48.280

假设使用重定向意味着允许表单提交，

为您的密码字段命名

```
<input type="password" name="pass" /> 
```

和改变

```
<form class="form1" action="http://google.com"> 
```

至

```
<form class="form1" action="http://google.com" onsubmit="return (this.pass.value==='hello')?true:false;"> 
```

演示在[http://jsfiddle.net/nCfQ4/1/](http://jsfiddle.net/nCfQ4/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T14:55:37.153

看看onsumbit：

```
<form class="form1" action="http://google.com" onsubmit="return document.getElementById('password').value=='hello';">
....
    <input type="password" id="password"/>
..... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:23:00.093

好吧，您有很多选择，但我认为最好的是 PHP，您可以使用 JS，但人们将能够阅读代码。

PHP 与该方法的 POST 然后访问数据库等。

# jquery - Convert matrix array

> ID：12783650
> 
> 赞同：1
> 
> 时间：2012-10-08T14:20:25.320
> 
> 标签：jquery, css, internet-explorer-9

Using jQuery I'm trying to obtain the rotation state of an object but in IE9 I can only return the matrix values. What I need is to change this into a single value as a degree.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:22:28.307

检查这篇文章：[http ://css-tricks.com/get-value-of-css-rotation-through-javascript/](http://css-tricks.com/get-value-of-css-rotation-through-javascript/)

此函数将从矩阵值返回旋转角度：

```
function decodeMatrix(matrixValue){
    var values = matrixValue.split('(')[1];
        values = values.split(')')[0];
        values = values.split(',');
    var a = values[0];
    var b = values[1];
    var c = values[2];
    var d = values[3];
    var scale = Math.sqrt(a*a + b*b);
    var sin = b/scale;
    var angle = Math.round(Math.asin(sin) * (180/Math.PI));
    return angle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T10:01:46.003

```
函数解码矩阵（矩阵，查询）{
    var values = matrix.split('(')[1];
    值 = values.split(')')[0];
    values = values.split(',');
    变量输出 = {
        一：值[0]，
        b：值[1]，
        c：值[2]，
        d：值[3]，
        x：值[4]，
        y：值[5]
    };
    output.scale = Math.sqrt(output.aoutput.a + output.boutput.b);
    output.sin = output.b / output.scale；
    output.angle = Math.round(Math.asin(output.sin) * (180 / Math.PI));
    如果（查询）{
        返回输出[查询]；
    }
    返回输出；
}

```

# java - clausule like with PreparedStatement

> ID：12783652
> 
> 赞同：0
> 
> 时间：2012-10-08T14:20:34.837
> 
> 标签：java, mysql, jsp, prepared-statement

I'm trying to guess where is a mistake in this method. When I use Navicat to see the result everything is perfect but when I run my application I have a mistake. It says NullPointerException.

I have written a syso to see if it runs inside the while but nothing and I don't know why, it's anything weird here?.

```
public String[] validarUsuario(String login){

    String [] params = new String [3];

    try {

        System.out.println("Dentro de validarUsuario");
        System.out.println("Login es:"+login);
        String x=login;
        System.out.println("X tiene un valor:"+x);
        this.conexion=conectar();
        SQL="SELECT t1.id_cuenta as id_cuenta,t2.id_usuario as id_usuario,t1.id_tipo_cuenta,t1.n_cuenta as id_tipo_cuenta from usuarios t2 inner join cuentas t1 on t2.id_cuenta=t1.id_cuenta where login LIKE ?";
        System.out.println( "LA CADENA SQL EN 'validarUsuario' ES: " + SQL );
        PreparedStatement pstm6 = this.conexion.prepareStatement(SQL);

        pstm6.setString(1, "%"+x+"%");

        ResultSet rs5 =  pstm6.executeQuery();
        rs5.last(); 
        int numRows = rs5.getRow(); 
        this.rs.beforeFirst();
        System.out.println("NumRows es:"+numRows); 

         while(rs5.next()){
                System.out.println("Dentro del while de esto");
                params[0]=String.valueOf(rs5.getInt("id_cuenta"));
                params[1]=String.valueOf(rs5.getInt("id_usuario"));
                params[2]=String.valueOf(rs5.getInt("id_tipo_cuenta"));

            }

        return params;

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return params;

} 
```

The stacktrace is this:

```
java.lang.NullPointerException
org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:62)
org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
org.apache.axis.client.Call.invokeEngine(Call.java:2784)
org.apache.axis.client.Call.invoke(Call.java:2767)
org.apache.axis.client.Call.invoke(Call.java:2443)
org.apache.axis.client.Call.invoke(Call.java:2366)
org.apache.axis.client.Call.invoke(Call.java:1812)
es.uniway.wscloud.WscloudImplSoapBindingStub.validarUsuario(WscloudImplSoapBindingStub.java:640)
es.uniway.action.login.LoginAction.execute(LoginAction.java:188)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434) 
```

Any idea?. Thanks so much.

# php - Retrieving data from two tables in Doctrine

> ID：12783667
> 
> 赞同：1
> 
> 时间：2012-10-08T14:21:20.507
> 
> 标签：php, doctrine, symfony-1.4

I got a little problem here:

```
$advList = Doctrine::getTable('Advertiser')
        ->createQuery('a')
        ->leftJoin('a.PrincCity p')
        ->leftJoin('a.TourCity t')
        ->leftJoin('a.Category')
        ->orderBy('a.new DESC')
        ->where('a.is_activated = ?', true)
        ->andWhereNotIn('a.category_id', array(4, 5))
        ->andWhere('( (t.slug IS NULL AND p.slug = ?) OR t.slug = ?)', array($city_slug, $city_slug))
        ->addOrderBy('a.created_at DESC');

    $this->pager = new sfDoctrinePager('Advertiser', 50);
    $this->pager->setQuery($advList);
    $this->pager->setPage($request->getParameter('page', 1));
    $this->pager->init(); 
```

This code gets all advertisers from a city (represented by ID in table Advertiser) - now I have second table Advertiser-City wich contains id, AdvertiserId and CityID so I can have multiple cities for one advertiser (eg 5 rows with AdvertiserID 99 and different CityID).

The problem is that I need to get all advertisers from a city, but upper code can only work with one table in the DB so I don't know how to search in the second one (with the additional cities).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:06:24.030

我不确定我能理解你的问题，但我认为如果你有明确定义的 nm Advertiser-city 关系：

```
Advertiser:
  ...
  relations:
    Cities: { class: City, refClass: AdvertiserCity, local: advertiser_id, foreign: city_id } 

AdvertiserCity:
  columns:
    advertiser_id: { type: integer,...}
    city_id: { type: integer,....}
  ...
  relations:
    City: { local: city_id, foreign: id, foreignAlias: AdvertiserCities } 
    Advertiser: { local: advertiser_id, foreign: id, foreignAlias: AdvertiserCities } 
```

然后，您的查询可以像这样：

```
$advList = Doctrine::getTable('Advertiser')
        ->createQuery('a')
        ->innerJoin('a.Cities c')
        ...
        ->addWhere('c.id = ?',$city_id)
        ...; 
```

# php - 从搜索结果中的变量解析变量

> ID：12783668
> 
> 赞同：0
> 
> 时间：2012-10-08T14:21:20.960
> 
> 标签：php, parsing, expressionengine

为了创建搜索结果，我有一个存储页面路径的频道字段（例如 /products/bikes）。每个条目都有自己的路径。

因为有不同的频道，每个频道都有其唯一命名的频道字段。对于渠道“产品”，它是：`{products_search_path_nl}`。

在结果页面`{exp:search:search_results}`中，该字段是这样动态创建的：`{channel_short_name}_search_path_{language}`显示为`products_search_path_nl`.

**问题**是它没有被解析。在查看了 EE 的解析顺序后，我尝试过：

*   将其用作片段
*   将其分配给 PHP 变量并稍后输出
*   改变 PHP 解析阶段（输入/输出）
*   使用模板嵌入它`{embed="search/uri_embed"}`
*   使用模板和模板变量嵌入它`{embed="search/uri_embed" passed_var="{channel_short_name}"}`
*   在一个简单的条件语句中使用它`{if "1" == "1"}`

谢谢阅读！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:51:15.167

这是因为`{channel_short_name}`与所有自定义字段同时解析，因为它们存在于同一个循环中。解析的原因`{language}`是（我假设）它是一个早期解析的全局变量，由多语言模块或通过您的配置设置动态设置。

并且 embed 可以工作，但是非常昂贵，因为您必须同时传递`{channel_short_name}`and `{entry_id}`，然后为每个结果运行整个 Channel Entries 循环（例如，`{exp:channel:entries channel="{embed:channel_short_name}" entry_id="{embed:entry_id}" limit="1" disable="member_data|pagination|categories"}{{embed:channel_short_name}_search_path_{language}}{/exp:channel:entries}`）。

处理来自多个渠道*和*多语言的搜索结果的首选方法是使用动态更改站点路径的多语言解决方案（因此所有`{path=""}`和`{permalink="}`变量都返回当前语言的正确 URL），然后使用搜索结果控制面板中每个频道的路径设置（在**Admin → Channel Administration → Channels → Edit → Path Settings**下）。这将允许您在搜索结果中使用`{auto_path}`和/或`{id_auto_path}`变量。

希望有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:30:13.677

感谢[Low 的](http://gotolow.com/)建议，我使用了一个循环，因为这似乎无法以适当的方式解决。

```
 {if "{channel_short_name}" == "news"}
        {if "{news_search_path_{language}}" != ""}
            <h3><a href="{base_url}{news_search_path_{language}}{url_title}">{title} </a></h3>
            {excerpt}
        {/if}

    {if:elseif "{channel_short_name}" == "products"}    
        {if "{products_search_path_{language}}" != ""}
            <h3><a href="{base_url}{products_search_path_{language}}{url_title}">{title} </a> </h3>
            {excerpt}
        {/if}

     // ....... and so on 
```

# c - Declare a variable that is Defined in a struct

> ID：12783669
> 
> 赞同：2
> 
> 时间：2012-10-08T14:21:22.480
> 
> 标签：c, struct, alias

Consider the following struct **defined** in ModuleA:

```
typedef struct{
    int A;
    int B;
    int C[4];
}myStructType;

myStructType MyStruct; 
```

If I wanted to use this struct from ModuleB, then I would **declare** the struct in the ModuleA header like this:

```
extern myStructType MyStruct; 
```

So far, so good. Other modules can read and write MyStruct by including the Module A header file.

*Now the question:*

How can I **declare** only part of the struct in the Module A header file? For example, if I wanted ModuleB to be able to read and write MyStruct.C (or, to make things a bit easier, perhaps MyStruct.A or MyStruct.B), but not necessarily know that it's in a struct or know about elements A and B.

Edit: I should probably also specify that this will go in an embedded system which does basically all of its memory allocation at compile time, so we can be extremely confident at compile time that we know where MyStruct is located (and it's not going to move around).

Edit2: I'll also clarify that I'm not necessarily trying to *prevent* other modules from accessing parts of the struct, but rather, I'm attempting to *allow* other modules to access individual elements without having to do MyStruct.Whatever because other modules probably only care about a single element and not the whole structure.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:32:18.547

您必须封装它，即创建一个私有变量，例如：

```
static myStructType the_struct; 
```

在一些 C 文件中，然后提供一个 API 来访问这些部分：

```
int * getC(void)
{
  return the_struct.C;
} 
```

这将让其他 C 文件通过调用来访问整数数组

```
int *some_c = getC();
some_c[0] = 4711; 
```

管他呢。通过更明确地返回数组的长度可以使其“更紧密”，当然，我的目标是最小的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:53:38.080

虽然理论上该解决方案的清洁度可能存在一些问题（例如结构对齐），但实际上它通常在编译时工作，如果不编译，您可以更改结构以使其编译：

```
#include <stddef.h>

#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]

// You keep this definition private to module A (e.g. in a .c file):
typedef struct
{
    int A;
    int B;
    int C[4];
} PrivateStruct;

// You expose this definition to all modules (in an .h file):
typedef struct
{
    char reserved[2*sizeof(int)];
    int C[4];
} PublicStruct;

// You put these in module A (in a .c file):
C_ASSERT(sizeof(PrivateStruct) == sizeof(PublicStruct));
C_ASSERT(offsetof(PrivateStruct,C) == offsetof(PublicStruct,C));

int main(void)
{
  return 0;
} 
```

在公共 .h 文件中，您可以对全局变量类型撒谎：

```
extern PublicStruct MyStruct; // It's "PrivateStruct MyStruct;" in module A 
```

如果两个结构定义不同步，则会出现编译时错误（[match](http://ideone.com/Hx3fO)、[mismatch](http://ideone.com/IJ7Qu)）。

`PublicStruct`您可能需要通过反复试验手动定义 的保留部分的大小。

你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:32:19.920

您可以尝试使用一种吸气剂：

在模块 A 中：

```
typedef struct{
    int A;
    int B;
    int C[4];
}myStructType;

myStructType MyStruct;

int getA()
{
    return MyStruct.A;
} 
```

等等。

而是切换到 C++

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T14:23:43.383

长话短说——你不能。为了让它更长一点，你不能可靠地做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T14:38:50.543

您不能完全按照您所描述的那样做，但是通常将结构用作标头，该结构与缓冲区相邻，该缓冲区的内部结构只有特定模块才知道。

这个结构的标题是相当明显的，但它仍然可以作为示例：

```
typedef struct _FILE_NOTIFY_INFORMATION {
  ULONG NextEntryOffset;
  ULONG Action;
  ULONG NameLength;
  ULONG Name[1];
} FILE_NOTIFY_INFORMATION, *PFILE_NOTIFY_INFORMATION; 
```

该结构（来自 Microsoft 的 NativeSDK）被设计为可变长度缓冲区的标头。所有模块都可以通过查看 NameLength 来计算缓冲区的长度，但您可以使用此方法将任何内容存储在缓冲区中。这可能只有特定模块才能知道，而其他模块仅使用长度来复制它等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T15:32:28.807

如果它不是为了隐藏而是为了结构化，那么就进行结构化。例如像这样：

模块A.h：

```
typedef struct{
    int A;
}myStructModuleAType;

extern myStructModuleAType myStructModuleA; 
```

模块A.c：

```
myStructModuleAType myStructModuleA; 
```

模块B.h：

```
typedef struct{
    int B;
}myStructModuleBType;

extern myStructModuleBType myStructModuleB; 
```

模块B.c：

```
myStructModuleBType myStructModuleB; 
```

主.h：

```
#include "moduleA.h"
#include "moduleB.h"

typedef struct{
    myStructModuleAType * pmyStructModuleA;
    myStructModuleBType * pmyStructModuleB;
    int C[4];
}myStructType;

extern myStructType myStruct; 
```

主.c：

```
#include "main.h"

myStructType myStruct;

myStructType myStruct = { 
  .pmyStructModuleA = &myStructModuleA
  .pmyStructModuleB = &myStructModuleB
}; 
```

# iphone - IBAction Button “Unrecognized Selector Sent to Instance” Error

> ID：12783670
> 
> 赞同：2
> 
> 时间：2012-10-08T14:21:24.937
> 
> 标签：iphone, xcode, ios6

I spent a while searching for the answer for this question on google and managed to stumble across the answer myself and thought I would share it.

I was getting the “Unrecognized Selector Sent to Instance” Error. I traced it to my button.

What I had done with out realising is assigned two methods to a button. I had made a method and linked it to the button. I then deleted that method made another one and linked it to the button. I didnt realise that the button was still linked and looking to run the old method that was no longer there.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T14:46:57.267

只需转到您的xib，选择按钮，然后在`connectionInspector` **（cmd + option + 6）**中删除您以前的连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T14:21:24.937

To solve this is quite easy. Go on the your storyboard and right click on the button. It will display a list that shows what method it is linked to. If there is more that one there delete all the others that you dont want. This should get rid of that message.

Another thing to note was I was getting a warning that my method had incomplete implementation. I didnt know why that was at the time but it was because there where button methods that werent being implemented.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-10T03:56:36.653

我遇到了同样的问题，意识到：如果你删除了一个函数，在 Interface Builder 中指向它的链接仍然存在，你必须手动删除它们，否则它们将链接到不存在的函数并引发一个运行时错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-05T08:50:11.570

我刚刚删除了主故事板中的按钮和视图控制器之间的连接。然后我将 IBAction-code-snippet 连接到按钮。那行得通。

# mod-rewrite - CMSMS nice urls

> ID：12783673
> 
> 赞同：0
> 
> 时间：2012-10-08T14:21:27.067
> 
> 标签：mod-rewrite

I am using CMSMS for a work project and haven't much experience with it myself. I have a videos page which lists every video by category. Each video links to:

/newsandresources/single-video-page/&referenceId=networks

where 'networks' is replaced with a reference ID attached to the video. What I need to do is create a mod_rewrite rule to re-direct:

/newsandresources/know-your-audience

(or whichever reference ID) to the single video's page and pass the reference ID

/newsandresources/single-video-page/&referenceId=know-your-audience

Does that make sense? :-/ sorry if not. I've come up with the follow mod_rewite code so far:

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^newsandresources/([a-zA-Z0-9\-]+)/$ /newsandresources/single-video-page/&referenceId=$1
RewriteRule ^newsandresources/([a-zA-Z0-9\-]+)$ /newsandresources/single-video-page/&referenceId=$1 
```

unfortunately it's not working. wondering if thee's anyone out there able to help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:56:05.360

尝试这个：

```
RewriteRule ^\/newsandresources\/([a-zA-Z0-9\-]+) /newsandresources/single-video-page/&referenceId=$1 
```

# c# - WCF REST 推送流服务

> ID：12783677
> 
> 赞同：12
> 
> 时间：2012-10-08T14:21:43.900
> 
> 标签：c#, wcf, rest

需要一些帮助来弄清楚我在寻找什么。基本上，我需要一个服务，其中`Server`将一堆 XML 转储到流中（在一段时间内），并且每次转储发生时`N`，客户端数量都会读取转储。

**示例**：每当一只`1000`股票上涨`5`美分时，该服务就会将一些 XML 转储到流中。连接的应用程序从流中获取信息。

我认为连接永远不会关闭，因为需要有一些东西读取流以获取新数据。

这需要遵守 WCF REST 标准，有什么我正在寻找的吗？
最后，它只是一个不间断的数据流。

更新：看起来服务需要是多部分/混合内容类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T18:48:26.147

我正在处理的一个应用程序具有类似的架构，我计划使用[SignalR](https://github.com/SignalR/SignalR/wiki/Hubs)使用长轮询技术将更新推送到客户端。~~我还没有实现它，所以我不能发誓它会为你工作，但他们的文档似乎很有希望：~~更新：我现在已经实现了，而且效果很好。

> 将数据从服务器推送到客户端（不仅仅是浏览器客户端）一直是一个棘手的问题。SignalR 让一切变得简单，并为您处理所有繁重的工作。

Scott Hansleman 有一篇关于这个主题[的好博客](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)，这里有一篇有用的文章（涉及 WCF、REST 和 SignalR）：http: [//www.codeproject.com/Articles/324841/EventBroker](http://www.codeproject.com/Articles/324841/EventBroker)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T17:24:14.777

而不是使用 WCF，您是否研究过[ASP.NET MVC WebAPI](http://www.asp.net/web-api)？

有关在 WebAPI 中使用 PushStreamContent 的更多信息，Henrik 有一个很好的[博客](http://blogs.msdn.com/b/henrikn/archive/2012/04/23/using-cookies-with-asp-net-web-api.aspx)示例（在标题“推送内容”下）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T11:47:10.937

您是否考虑过[存档的 Atom 提要](http://www.ietf.org/rfc/rfc5005.txt)？它们是 100% RESTful（[超媒体控件和所有](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)），最重要的是，**它们具有很强的可扩展性**。

具体来说，存档文档永远不会更改，因此您可以将缓存到期设置为 1 年或更长时间。订阅文档是所有最新事件发生的地方，并且在不断变化，但是使用适当的 HTTP 缓存标头，您可以在每个客户端请求之间没有任何更改的情况下返回[304 Not Modified 。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5)此外，如果您的服务具有自然时间分辨率，您可以设置`max-age`以利用它。例如，如果您的数据具有 20 分钟的分辨率，您可以在订阅文档响应中包含以下标头：

```
Cache-Control: max-age=1200 
```

这样，您可以让您的缓存完成大部分繁重的工作，并且客户可以根据需要随时轮询订阅文档，而不会影响您的服务。

# html - 图中的表格 - 使用标题还是 figcaption？

> ID：12783679
> 
> 赞同：10
> 
> 时间：2012-05-17T18:58:49.693
> 
> 标签：html, html-table

随着 HTML5 的出现，我开始使用`figure`包围图像和表格等。到目前为止，我已经使用表格的`caption`元素来标记表格。但是，`figcaption`可用于标记图形的内容。似乎在图中的表格的情况下，有两个元素或多或少具有相同的目的。

一方面，`caption`特定于描述表格的用途；另一方面`figcaption`是更广泛的，但将适用于表格以及其他图形内容。

`figcaption`如果只是为了与包含不同元素的其他图形保持一致，那么用图形来标记表格是否合适？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T19:42:18.880

来自[WHATWG 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-caption-element)：

> 当 table 元素是除 figcaption 之外的 figure 元素中的唯一内容时，应省略 caption 元素以支持 figcaption。

[虽然它们目前匹配，但这里有一个W3C Editor's Draft](http://dev.w3.org/html5/spec/single-page.html#the-caption-element)的相应链接，以防万一。

# perl - 是否存在类似于“0 但为真”的“未定义但为真”的值？

> ID：12783681
> 
> 赞同：5
> 
> 时间：2012-10-08T14:21:50.920
> 
> 标签：perl

我正在编写一个搜索例程，其中未定义和零都是有效结果。我正在返回一个二元素数组，`($result, $answer)`因为我没有“未定义但真实”的值。它工作正常，但有点笨拙。一堂课似乎有点矫枉过正。

这样的事情是否存在或可以以某种方式伪造？我在想诸如`0E0`把戏之类的事情。

更多细节。这是我想要的用户界面。当前例程返回两个值，结果（是否找到键）和一个值（如果找到）。

```
my $result = search_struct($key, $complex_data_structure);
if ($result) {
    print "A result was found for $key!  Value is: ", $result // "Undefined!", "\n";
}
else {
    print "Sorry, no result was found for $key.\n";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T14:25:16.897

您可以只返回对结果的引用。返回`undef`无结果，`\( undef )`文字未定义结果，`\( whatever )`任何其他结果。然后调用者就可以使用`$$result`（确定`$result`定义后）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T16:33:01.553

不，但是有很多方法可以返回三个状态。

***解决方案 1***

*   空列表 ( `return;`)
*   未定义 ( `return undef;`)
*   字符串 ( `return "foo";`)

```
my $found = my ($result) = search_struct($key, $data);
if ($found) {
    print "$key: ", $result // "Undefined!", "\n";
}
else {
    print "Sorry, no result was found for $key.\n";
} 
```

标量上下文中的列表赋值计算为其右侧返回的元素数。

***解决方案 2***

*   错误 ( `return undef;`)
*   引用未定义 ( `return \undef;`)
*   引用字符串 ( `return \"foo";`)

```
my $result = search_struct($key, $data);
if ($result) {
    print "$key: ", $$result // "Undefined!", "\n";  # Note change here!
}
else {
    print "Sorry, no result was found for $key.\n";
} 
```

***解决方案 3***

*   错误 ( `return 0;`)
*   真，且 undef ( `return (1, undef);`)
*   真，字符串 ( `return (1, "foo");`)

```
my ($found, $result) = search_struct($key, $data);
if ($found) {
    print "$key: ", $result // "Undefined!", "\n";
}
else {
    print "Sorry, no result was found for $key.\n";
} 
```

***解决方案 4***

*   错误 ( `return 0;`)
*   是的，undef 作为参数返回 ( `$_[2] = undef; return 1;`)
*   是的，字符串作为参数返回 ( `$_[2] = "foo"; return 1;`)

```
my $found = search_struct($key, $data, my $result);
if ($found) {
    print "$key: ", $result // "Undefined!", "\n";
}
else {
    print "Sorry, no result was found for $key.\n";
} 
```

顺便说一句，我会将数据结构作为第一个参数传递，将键作为第二个参数传递。更像是面向对象编程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T15:41:34.877

您可能会在一个列表（不是数组）中返回您的答案：空列表表示未找到结果，否则返回一个元素列表（`(undef,)`或`($some_answer,)`）。

它仍然相当笨拙，但是：

```
if (my ($answer) = the_function()) { # note parentheses
  process_answer($answer);  # might be undef, false, etc.
} else {
  no_results_found();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T15:03:10.450

“未定义”如何也是“真实”？你为什么想要这样的构造？您是否没有意识到，对于返回*未定义*输入的函数，这样的结果也不应该是“真”。

但是，从 Perl 5.10 开始，这是谓词 not-a-defined-false：

```
if ( possibly_undefined() // 1 ) { 
} 
```

但我认为零但真实*实际上*更适合查找功能。

```
my ( $value ) 
    = map  { $repos->get( $_ ) } 
      grep { $_ } 
      $repos->find( $lookup_criteria )
    ; 
```

函数中的布尔值`find`代表问题“我找到了吗？” 该索引代表“在什么索引？”的问题。如果找不到索引，则返回`''`or `undef`。零但真实的意思是“我在第一个索引处找到它”。

但是，您始终可以使用您可能想要的任何布尔和整数解释来创建一个*类。*下面的类定义了一个对象，该对象可以在整数上下文中定义为整数，并且在测试数字是否为奇数时为 false：

```
package Odd; 
use strict;
use warnings;
use overload qw<bool boolean_result 0+ value fallback 1>;
sub new { return bless do { \( my $v = $_[1] ) }, $_[0]; }
sub boolean_result { return ${ $_[0] } % 2; }
sub value          { return ${ $_[0] }; }
sub set_value      { ${ $_[0] } = $_[1]; return $_[0]; }

package main;
use strict;
use warnings;
use Test::More;
my $odd = Odd->new( 1 );
is( $odd + 0, 1 );
is( !$odd, '' );
is( !!$odd, 1 );
my $even = Odd->new( 2 );
is( $even + 0, 2 );
is( !$even, 1 );
is( !!$even, '' );
done_testing(); 
```

# node.js - 使用 node_redis 时如何访问传递给 hgetall 的密钥？

> ID：12783683
> 
> 赞同：2
> 
> 时间：2012-10-08T14:21:54.780
> 
> 标签：node.js, redis, node-redis

我有一个 node.js (express) 应用程序，我正在使用 node_redis 从我的 redis 数据库中获取所有用户。

```
redis = require "redis"
client = redis.createClient()

client.smembers "users", (err, user_ids) ->
  results = new Array()
  for user_id in user_ids
    client.hgetall user_id, (err, items) ->
      results.push items
      if user_ids.length is results.length
        res.json results 
```

这会产生以下结果：

```
[
  {
    "name": "user1",
    "password": "secret"
  },
  {
    "name": "user2",
    "password": "secret"
  }
] 
```

现在我希望将 user_id 添加到用户结果中，这样我可以获得以下输出：

```
[
  {
    "user:1": {
      "name": "user1",
      "password": "secret"
    }
  },
  {
    "user:2": {
      "name": "user2",
      "password": "secret"
    }
  }
] 
```

我遇到的问题是**client.hgetall()**被异步调用，我不能简单地访问 for 循环中的 user_id。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:25:22.373

您需要通过在循环中引入一个函数来使用闭包来存储 user_id。一种方法是使用 forEach 函数对数组进行迭代。

以下是 Javascript 中的示例：

```
var redis = require('redis')
var client = redis.createClient();

function fetch( callback ) {
   var results = new Array();
   client.smembers( "users", function(err,users) {
      if ( users.length == 0 )
         return callback( results );
      users.forEach( function(id) {
         client.hgetall(id, function(err,items) {
            var obj = {};
            obj[id] = items; # here id can be accessed since it is part of the closure
            results.push(obj);
            if ( results.length == users.length ) {
               callback( results );
            }
         });
      });
   });
}

fetch( function(results) {
   console.log(JSON.stringify(results));
}); 
```

输出是：

```
[ {"user:2":{"name":"user2","password":"secret2"}},
  {"user:1":{"name":"user1","password":"secret"}} ] 
```

# unix-timestamp - 如何找出给定时间段内发生了多少（如果有）周末

> ID：12783685
> 
> 赞同：1
> 
> 时间：2012-10-08T14:22:00.357
> 
> 标签：unix-timestamp, php

我有两个号码；Unix Epoch 格式的日期。

假设我有两个 Unix 纪元时间戳：

```
1349422200 = 05/10/2012 08:30
1350489600 = 17/10/2012 17:00 
```

我能够找出两个日期/时间之间有多少天，没问题。我希望能够计算出有多少天是周六或周日（非工作日）。我确信必须有一个简单的方法来解决这个问题，但如果不做大量的 for() 循环，我一辈子都无法弄清楚。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:27:20.043

更具体地定义周末。您是否只想包括整个周末（周六和周日的整个 48 小时）？或者包含周五晚上/周六早上午夜的任何时间范围是否算作周末？半个周末算一半，还是四舍五入到最接近的整数？

任何状况之下：

1.  弄清楚周末的组成
2.  查找您时间范围内的第一个和最后一个周末
3.  求它们之间的时间差，以天为单位，然后除以 7

编辑：您正在寻找确切的周末时间，没有四舍五入。

首先，将时间跨度分成 3 个块：

1.  从范围开始到第一个可能的星期一早上午夜的所有内容
2.  从上一个区块结束到最后一个可能的星期一早上午夜的所有内容
3.  从前一个块的末尾到范围末尾的所有内容

然后计算每个区块的周末数量，并将它们相加。

1.  如果第一个块的长度为零，它将不包含周末时间。如果它的长度为 48 小时或更短，它的周末时间将等于它的长度。否则，它的周末时间将是 48 小时。
2.  中间区块的周末时间是它的持续时间乘以 2/7（微不足道，因为我们对其开始和结束的限制，它是一个整数周。）
3.  如果其持续时间小于或等于五天，则最后一个块将不包含周末时间。如果其持续时间大于五天，则其周末时间将等于其持续时间减去五天。

**特别案例**

如果该块不包含星期一午夜，则认为第二个和第三个块的长度为零。找到块内的一个周末的开始和结束（如果存在）并计算重叠。

如果该块恰好包含一个星期一午夜，则将第一个块视为其之前的时间，第二个块的长度为零，第三个块为其之后的时间，并照常计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:13:38.347

我敢肯定有一些更快和更少处理器消耗的方法来解决这个问题。但对我来说，这种方法已经足够好了，可以完成工作。

```
//$sDateRaw = First day at 00:00 in Unix Epoch
//$eDateRaw = Last day(+1) at 00:00 in Unix Epoch
//86400 = Number of seconds in 1 day

for($i=$sDateRaw;$i<$eDateRaw; $i+=86400){
    if(date("N",$i) != 6 && date("N",$i) != 7){
        $weekDays += 1;
    }
}
//$weekDays = Total number of days excluding weekends 
```

# php - 是否可以在定义字符串时使用内联 if 语句？

> ID：12783690
> 
> 赞同：1
> 
> 时间：2012-10-08T14:22:30.747
> 
> 标签：php

我正在尝试构建一个 HTML 字符串，如下所示：

```
$html= "<input name='".GROUP_CONFIG_MAX_CALL_RECORDING_TIME_INPUT."' value='".$MaxCallRecordingTimeSecs."' size='4' ".($bCallRecordingLicensed)?'':'disabled'.">"; 
```

但它只是给了我一个解析错误（没有具体细节，只是这条线是问题所在）。

我尝试了各种引号和括号的定位，但我总是遇到解析错误。这可能是我正在尝试的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:28:59.407

```
$html= "<input name='".GROUP_CONFIG_MAX_CALL_RECORDING_TIME_INPUT."' value='".$MaxCallRecordingTimeSecs."' size='4' ".($bCallRecordingLicensed?'':'disabled').">"; 
```

就像codingbiz所说，这应该与额外的括号一起使用。不过，我会选择 sprintf 的更具可读性的版本：

```
$html = sprintf( 
   '<input name="%s" value="%s" size="4"%s>',
   GROUP_CONFIG_MAX_CALL_RECORDING_TIME_INPUT,
   $MaxCallRecordingTimeSecs,
   ( $bCallRecordingLicenced ? '' : ' disabled' )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:25:15.483

尝试

```
".(($bCallRecordingLicensed)?'':'disabled').">"; 
```

附加括号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:31:51.367

尝试将整个三元组包裹在括号中，而不仅仅是开头的变量：

```
$html= "<input name='".GROUP_CONFIG_MAX_CALL_RECORDING_TIME_INPUT."' value='".$MaxCallRecordingTimeSecs."' size='4' ".($bCallRecordingLicensed?'':'disabled').">"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T14:28:36.143

我认为是因为您更改了引号：

例如

```
$test = false;
$strings = "hello ".($test?"you":"")." this is a test";
echo $strings; 
```

按您的预期工作。

例如，我确实发现测试中没有括号，我的测试只产生了“你”这个词……而不是整个字符串——这很奇怪。

# android - 防止活动从服务中销毁

> ID：12783691
> 
> 赞同：0
> 
> 时间：2012-10-08T14:22:31.433
> 
> 标签：android

我正在使用以下代码在视图中加载活动：

```
LocalActivityManager mgr = getLocalActivityManager();

Intent i = new Intent(this, SomeActivity.class);

Window w = mgr.startActivity("unique_per_activity_string", i);
View wd = w != null ? w.getDecorView() : null; 
```

这似乎工作得很好。唯一的问题是加载的活动被破坏，所以我无法使用该活动。

> ** 活动（主）创建，isFirst = true **
> 
> ** 活动（主要）简历 **
> 
> ** 活动（主要）暂停，UserClosed = false **
> 
> ** 活动（主要）简历 **
> 
> **服务（windowservice）创建**
> 
> BroadcastReceiver 已初始化。
> 
> ** 服务（windowservice）启动 ** ** 活动（rammonitor）创建，isFirst = true **
> 
> ** 活动（rammonitor）简历 **
> 
> ** 活动（主要）暂停，UserClosed = true **
> 
> ** 活动（rammonitor）暂停，UserClosed = true **

活动从服务中调用。

有没有办法可以防止我的活动被破坏，或者只是在它被创建时保持专注？

# asp.net-mvc - JsonConverter：将 c# 对象序列化为 json 对象

> ID：12783693
> 
> 赞同：1
> 
> 时间：2012-10-08T14:22:41.560
> 
> 标签：asp.net-mvc, json.net, ravendb

当使用 Json.NET 将 MVC 视图模型序列化为 json 时，我的视图模型 ( `public object Result { get; set;}`) 上有一个通用对象属性，它被序列化为键值对而不是实际的 json 对象。有没有我可以用来强制它正确序列化的转换器？

这是 Json.NET 当前正在输出的内容：

```
"result": [
    {
      "key": "AssetId",
      "value": "b8d8fb71-2553-485b-91bf-14c6c563d78b"
    },
    {
      "key": "SearchResultType",
      "value": "Assets"
    },
    {
      "key": "Name",
      "value": "abstract-q-c-1920-1920-8"
    }
  ] 
```

相反，我希望它输出这个：

```
"result": {
    "AssetId": "b8d8fb71-2553-485b-91bf-14c6c563d78b",
    "SearchResultType": "Assets",
    "Name": "abstract-q-c-1920-1920-8"
  } 
```

**编辑**：要回答如何填充该属性的问题，它是通过 RavenDB 索引：

```
public class SiteSearchIndexTask : AbstractMultiMapIndexCreationTask<SiteSearchResult>
{
    public class Result
    {
        public object[] Content { get; set; }
    }

    public override string IndexName
    {
        get
        {
            return "SiteSearch/All";
        }
    }
    public SiteSearchIndexTask()
    {
        AddMap<Asset>(items => from item in items
                                where item.IsDeleted == false
                               select new 
                                          {
                                              Id = item.Id.ToString(),
                                              ObjectId = item.Id,
                                              ResultType = SearchResultType.Assets,
                                              Title = item.Name.Boost(3),
                                              Tags = item.Tags.Select(x => x.Name).Boost(2),
                                              Result = (object)item,
                                              Query = string.Join(" ", item.Description)
                                          });
        AddMap<User>(items => from item in items
                              where item.IsDeleted == false
                              select new 
                                         {
                                             Id = item.Id,
                                             ObjectId = item.UserId,
                                             ResultType = SearchResultType.Users,
                                             Title = item.Username.Boost(3),
                                             Tags = (BoostedValue) null,
                                             Result = (object)item,
                                             Query = string.Join(" ", item.FullName, item.Email)
                                         });
        Store(x => x.ObjectId, FieldStorage.Yes);
        Store(x => x.ResultType, FieldStorage.Yes);
        Store(x => x.Title, FieldStorage.Yes);
        Store(x => x.Tags, FieldStorage.Yes);
        Store(x => x.Result, FieldStorage.Yes);
        Store(x => x.Query, FieldStorage.Yes);
    }
} 
```

**编辑 2** 这里是 Asset 和 User 模型（为简洁起见被截断，因为它们只是一堆自动属性）

```
public class Asset : IHasId
{
    public string Id { get; set; }
    public Guid AssetId
    {
        get
        {
            Guid assetId;
            Guid.TryParse((Id ?? string.Empty).Replace("assets/", ""), out assetId);
            return assetId;
        }
        set { Id = "assets/" + value; }
    }

    public string Name { get; set; }
    public string Description { get; set; }
}

public class User : IHasId
{
    public User()
    {
        Status = UserStatus.Active;
    }

    public string Id { get; set; }
    public int UserId
    {
        get
        {
            int userId;
            int.TryParse((Id ?? string.Empty).Replace("users/", ""), out userId);
            return userId;
        }
        set { Id = "users/" + value; }
    }

    public string Username { get; set; }
    public string Password { get; set; }
    public string Email { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public UserStatus Status { get; set; }
} 
```

**编辑 3** 事实证明，当我单步执行代码时，该对象实际上是 Raven.Abstractions.Linq.DynamicJsonObject 类型，其中包含一个键值对数组。所以我想这个问题可能比 Json.NET 与 Raven 更相关。除非当然有一个转换器可以从键值对转换为 json 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:19:56.633

这将有助于了解您是如何准确查询的，但您应该查看在RavenDB 站点上使用多图[索引查询不同文档的示例。](http://ravendb.net/kb/11/querying-unlike-documents-using-a-multi-map-index)

当我查看您的索引时，您似乎在字段存储和结果封装方面做得太多。有时很难掌握，但索引中所做的映射不是定义如何返回结果，而是定义索引是如何构建的。除非您正在执行 Reduce 或 TransformResults 步骤，否则您仍会返回原始文档。

因此，将文档封装`Result = (object)item`为矫枉过正。有一个 ResultType 枚举也是如此。如果您需要知道匹配的文档类型，只需`.GetType()`在对象上使用，您将很快看到它是用户还是资产。

以下是我将如何定义您的搜索索引。请注意，存在一些差异，因为您在索引中显示的属性不在您提供的模型中。（我假设后端有一个单独的实体而不是前端的模型，但根据需要进行调整。）

```
public class SearchIndex : AbstractMultiMapIndexCreationTask<SearchIndex.Result>
{
  public class Result
  {
      public object[] Content { get; set; }
      public string ResultType { get; set; }
  }

  public SearchIndex()
  {
      AddMap<Asset>(items => from item in items
                             select new Result
                             {
                               Content = new object[] {item.Name, item.Description},
                               ResultType = MetadataFor(item)["Raven-Entity-Name"].ToString()
                             });

      AddMap<User>(items => from item in items
                            select new Result
                            {
                              Content = new object[] { item.Username, item.FirstName, item.LastName, item.Email },
                              ResultType = MetadataFor(item)["Raven-Entity-Name"].ToString()
                            });

      Index(x => x.Content, FieldIndexing.Analyzed);
    }
} 
```

然后我会像这样查询它：

```
var results = session.Advanced
                     .LuceneQuery<object, SearchIndex>()
                     .Where("ResultType:" + resultTypeName)
                     .AndAlso()
                     .Search("Content", searchTerm); 
```

然后，您可以简单地检查您的结果，并发现当 cast as`object`时，您确实可以执行`result.GetType()`并查看该对象是如何构造的。如果需要，您还可以在实体上放置一个通用接口来代替对象，例如`IAmSearchable`Raven 示例中所示。

当您最终通过 MVC 将结果传回时，它应该被正确序列化，因为它将来自真实对象而不是 raven DynamicJsonObject。

# php - HTML 网站的复制安全性

> ID：12783695
> 
> 赞同：0
> 
> 时间：2012-10-08T14:22:44.373
> 
> 标签：php, javascript, html, ajax, security

我刚刚完成了我在 ThemeForest 上的第一个站点模板。
现在我搜索了一些技巧来分享它以获得最多的购买。然后我发现了一些允许您从网络复制完整站点的程序，例如[HTTrack](http://www.httrack.com/)

现在我的问题是：如何防止像 HTTrack 这样的程序**发出复制请求？**
也许我可以在我的演示文件中操纵一些东西来混淆程序……

我在网上什么也没找到……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:28:50.013

如果您想保护您的知识产权，请在其中添加 (c)。

如果您在网络上发布，您将无能为力。

如果您不希望其他人复制您的主题，请不要发布它。并且不要陷入诸如禁用鼠标右键之类的愚蠢技巧中。它只会惹恼人们，不会阻止任何人。

一种可能的解决方案是仅将主题的屏幕截图放在网上，而不是实际的 CSS/HTML，但如果我是潜在买家，我不会根据屏幕截图购买。我想在不同的浏览器/操作系统上对其进行测试。

# javascript - 图像未在 IE 8 中显示

> ID：12783700
> 
> 赞同：2
> 
> 时间：2012-10-08T14:22:59.750
> 
> 标签：javascript, jquery, asp.net, html, internet-explorer-8

我在 div 标签中有一个图像，我正在展开和折叠该 div 标签。

当`div`标签展开时显示信息，当 div 标签折叠时不显示信息。

图像在 IE 9、Mozilla 中正确显示，但在 IE 8 中未显示。

我`div`在后面的代码中动态添加标签中的图像。

我的代码如下

```
String expandDivId = String.Format("{0}", "testkey");
StringBuilder testLinks = new StringBuilder();

testLinks.Append(String.Format("<div><a href='#' id='" + expandDivId + "-or" + "  onclick='javascript:ExpandInfo(\"" + expandDivId + "\"); return false;'>{0}</a></div>", "TestTitle")); 

testLinks.Append(String.Format("<div style='display: none;' id='{0}'>", expandDivId));

testLinks.Append("<div class=\"head1\" style=\"font-weight:bold\">Test Informaton</div>");

testLinks.Append("<div style=\"text-align:left;\">Test data and informaion.<br /><br /></div>");

testLinks.Append("<a href='http://www.forums.asp.net' target='blank'>test heading 1</a>&nbsp;<img src=\"../../images/TestIcon.png\" alt=\"PDF\" width=\"14\" nowrap/><br/>");

testLinks.Append("</div>"); 
```

我的javascript函数如下

```
function ExpandInfo(divId) {
    var origin = $("#" + divId + "-or");
    if ($(origin).hasClass("ex")) {
        $(origin).text($(origin).text().slice(0, -1) + "+");
    } else {
        $(origin).text($(origin).text().slice(0, -1) + "-");
    }    
    $("#" + divId).slideToggle("500");
    $(origin).toggleClass("ex");
} 
```

请让我知道为什么图像没有在 IE 8 中显示。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-21T19:34:58.730

您需要添加一个高度属性。没有一个 img 元素在技术上是无效的，但大多数浏览器都会解决这个问题。IE8（可以预见，也许）只是假设您的图像根本没有高度，因此似乎不会显示它。

# php - 如何在 php 5.3 中动态加载 php 扩展 @dl('ioncube_loader_lin_5.3.so')

> ID：12783701
> 
> 赞同：1
> 
> 时间：2012-10-08T14:23:02.057
> 
> 标签：php

我正在尝试动态加载 php 扩展 @dl('ioncube_loader_lin_5.3.so')，但给了我致命错误：调用未定义的函数 dl()。然后我在 php 5.3 中搜索了它的替代方案，但找不到正确的信息，请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:24:41.533

来自以下文档[**`dl()`**](http://php.net/dl)：

> 5.3.0：由于稳定性问题，现在在某些 SAPI 中禁用了 dl()。唯一允许 dl() 的 SAPI 是 CLI 和 Embed。请改用[扩展加载指令](http://www.php.net/manual/en/ini.core.php#ini.extension)。

您需要将扩展​​名添加到您的 php.ini：`extension=/path/to/extension/ioncube_loader_lin_5.3.so`

# ssl - Alfresco & Solr SSL 证书握手超时

> ID：12783704
> 
> 赞同：1
> 
> 时间：2012-10-08T14:23:07.990
> 
> 标签：ssl, solr, alfresco

服务器配置：

Windows 2003 服务器上的 Alfresco Community 4.0.e

MySQL 5.5.27.3

MySQL 连接器 5.1.22

我使用 Windows 安装程序来安装 Alfresco。与高级安装的股票答案的唯一偏差是更改数据库驱动程序设置：

db.driver=org.gjt.mm.mysql.Driver db.name=alfresco db.url=jdbc:mysql://localhost/alfresco?useUnicode=yes&characterEncoding=UTF-8

config 中的 Solr 设置，由安装程序设置： dir.root=C:/Alfresco/alf_data index.subsystem.name=solr dir.keystore=${dir.root}/keystore solr.port.ssl=8443

来自 catalina.log 文件的错误消息：

```
WARNING: Exception getting SSL attributes
java.net.SocketException: SSL Cert handshake timeout
at org.apache.tomcat.util.net.jsse.JSSESupport.handShake(JSSESupport.java:189)
at org.apache.tomcat.util.net.jsse.JSSESupport.getPeerCertificateChain(JSSESupport.java:143)
at org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:1116)
at org.apache.coyote.Request.action(Request.java:350)
at org.apache.catalina.authenticator.SSLAuthenticator.authenticate(SSLAuthenticator.java:135)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:528)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:722) 
```

我该如何解决？建议？除了 MySQL 安装之外，我没有更改任何库存配置。当 Tomcat 启动时，Alfresco 表的创建没有问题，我浏览到 localhost:8080/Alfresco 的管理页面。

顺便说一句，Solr 和 Alfresco 都托管在同一个 Tomcat6 实例中。我试图按照[这篇文章](https://forums.alfresco.com/en/viewtopic.php?f=9&t=46080)的建议重新生成密钥，但没有帮助。仍然得到同样的错误。这一定与 Server2003 配置有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:14:47.010

只需要使用 4.0.e windows 安装程序附带的 java 版本即可。使用我在机器上安装的任何其他版本都会阻止它工作（6 和 7）。

# python - 如果列表的任何项目以字符串开头？

> ID：12783705
> 
> 赞同：13
> 
> 时间：2012-10-08T14:23:08.960
> 
> 标签：python, list, startswith

我正在尝试检查列表中的任何项目是否以某个字符串开头。我怎么能用 for 循环做到这一点？IE：

```
anyStartsWith = False
for item in myList:
    if item.startsWith('qwerty'):
        anyStartsWith = True 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-08T14:24:28.767

使用[`any()`](http://docs.python.org/library/functions.html#any)：

```
any(item.startswith('qwerty') for item in myList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-02T19:34:14.757

假设您正在寻找以字符串 'aa' 开头的列表项

```
your_list=['aab','aba','abc','Aac','caa']
check_start='aa'
res=[value for value in your_list if value[0:2].lower() == check_start.lower()]
print (res) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T06:39:46.527

如果你想用 for 循环来做

```
anyStartsWith = False
for item in myList:
    if item[0:5]=='qwerty':
        anyStartsWith = True 
```

0:5 取字符串中的前 6 个字符，您可以根据需要对其进行调整

# regex - hl.regex.pattern 在 solr 中不起作用

> ID：12783722
> 
> 赞同：1
> 
> 时间：2012-10-08T14:24:07.923
> 
> 标签：regex, solr, highlight

我正在使用 solr 来获取数据。我正在使用以下参数来获取数据：

`http://testURL/solr/core0/select?start=10&rows=10&hl.fl=CC&hl.requireFieldMatch=true&hl=on&hl.maxAnalyzedChars=1&hl.fragsize=145&hl.snippets=99&sort=COlumn1+desc&q=CC%3a%28%22test%22~2%29&fl=title120%2ccolumn2%2ccolumn3%2cRL_DateTime%2cSid%2ccolumn4%2cguid%2chour&hl.regex.pattern=^\d+%20%3E%3E%20`

上面的查询不适用于 hl.regex.pattern 参数。

如果我删除“hl.regex.pattern”而不是在突出显示部分提供结果。如果我提供该正则表达式模式，则不会。

**正则表达式在我的 c# 代码中工作。**

所以我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:28:13.057

几乎可以肯定的是`^\`。这些在 URI 中无效，因此您必须转义它们。

来自[RFC 1738](http://www.ietf.org/rfc/rfc1738.txt)：

> 只有字母数字、特殊字符“$-_.+!*'()”和用于其保留目的的保留字符可以在 URL 中未编码使用。

这有点过时了，因为现在允许使用像 λάμδα 这样的非罗马字母数字，但要点是相同的。

试试`hl.regex.pattern=%5E%5Cd+%20%3E%3E%20`吧。

# linux - 如何使用 git 在 localhost 和服务器之间复制文件？

> ID：12783723
> 
> 赞同：1
> 
> 时间：2012-10-08T14:24:10.160
> 
> 标签：linux, git, ssh

我在 Ubuntu 上有服务器，在那里我托管了许多项目。对世界可见的文件`/var/www`

使用项目“projectName”在本地主机上工作后，我打开 FTP 客户端并将文件发送到服务器。我想在我的服务器上创建一个远程仓库，我想在文件夹中有最新的文件`/var/www/projectName`

有什么简单的方法可以做到这一点吗？我读过 GIT 手册，但他们总是写关于在服务器上只有 repo，而不是在特定目录中存储最新文件。

我是唯一将文件推送到服务器的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:48:54.430

这取决于，如果您对服务器具有 ssh 访问权限，是的，只需在服务器上创建 git 存储库，然后将其拉到本地，然后`git push`，您将必须在服务器上创建一个 git 挂钩以自动“签出”最新更改。

服务器 ：

```
cd /var/www/site.com
git init
git add -A
git commit -a -m 'initial'
cd .git
echo "#!/bin/sh" > hooks/post-receive
echo "git checkout -f" >> hooks/post-receive
chmod +x hooks/post-receive 
```

当地的 ：

```
git clone user@host:/var/www/site.com
cd site.com
--edit stuff--
git commit
git push 
```

# mysql - 为什么没有更新上下文连接字符串

> ID：12783726
> 
> 赞同：0
> 
> 时间：2012-10-08T14:24:17.847
> 
> 标签：mysql, entity-framework

我正在尝试使用 CodeFirst 将我的应用程序连接到 MySql，但我遇到了一个错误，这让我对 Context ConnectionString 感到疯狂。

*   实体框架 4.3.1
*   MySql 连接器 6.6.3

网络配置：

```
 <connectionStrings>
     <add name="PersonalContext" connectionString="server=localhost;UserId=root;password=1234;database=school;" providerName="MySql.Data.MySqlClient" />
   </connectionStrings>

  <system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL"  type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.6.3.0, Culture=neutral, PublicKeyToken=852c9eb6525c1b53" />
    </DbProviderFactories>
  </system.data> 
```

控制器：

> var ctx = new SchoolContext();
> ctx.Database.Initialize(true);

我想知道为什么 ctx.Connection.Connectionstring 仍然使用 SQLEXPRESS

> “数据源=.\SQLEXPRESS；初始目录=MysqlTesting.Controllers.SchoolContext；集成安全=True；MultipleActiveResultSets=True；应用程序名称=EntityFrameworkMUE”

我是 entityFramework 的新手，我想知道我在 web.config 上做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:13:34.033

The name of your connection string either needs to match the name of the context class, or you need to tell your context class which connection string to use:

```
class SchoolContext
{
    public SchoolContext()
        : base("Name=PersonalContext")
    {
    }

    // DbSet properties here
} 
```

# python - 如何使用 Python 解析 YouTube XML？

> ID：12783730
> 
> 赞同：1
> 
> 时间：2012-10-08T14:24:28.900
> 
> 标签：python, xml, api, parsing

我正在尝试解析嵌入在下面代码中的 YouTube 中的 xml。我正在尝试显示所有标题。但是，当我尝试打印“标题”时，我遇到了麻烦，只出现输入行。有什么建议吗？

```
#import library to do http requests:
import urllib2

#import easy to use xml parser called minidom:
from xml.dom.minidom import parseString
#all these imports are standard on most modern python implementations

#download the file:
file = urllib2.urlopen('http://gdata.youtube.com/feeds/api/users/buzzfeed/uploads?v=2&max-results=50')
#convert to string:
data = file.read()
#close file because we dont need it anymore:
file.close()

#parse the xml you downloaded
dom = parseString(data)
entry=dom.getElementsByTagName('entry')
for node in entry:
    video_title=node.getAttribute('title')
    print video_title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:47:58.657

标题不是属性，它是条目的子元素。

这是一个如何提取它的示例：

```
for node in entry:
    video_title = node.getElementsByTagName('title')[0].firstChild.nodeValue
    print video_title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:23:25.563

lxml 可能有点难以理解，所以这里有一个*非常*简单的美汤解决方案（它被称为beautifulsoup 是有原因的）。也可以设置美汤使用lxml解析器，速度差不多。

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(data) # data as is seen in your code
soup.findAll('title') 
```

返回一个`title`元素列表。在这种情况下，您也可以`soup.findAll('media:title')`只返回`media:title`元素（实际的视频名称）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:05:20.983

您的代码中有一个小错误。您可以将*title*作为属性访问，尽管它是*entry*的子元素。您的代码可以通过以下方式修复：

```
dom = parseString(data)
for node in dom.getElementsByTagName('entry'):
    print node.getElementsByTagName('title')[0].firstChild.data 
```

# javascript - 左文本区域和谷歌翻译

> ID：12783733
> 
> 赞同：0
> 
> 时间：2012-10-08T14:24:44.087
> 
> 标签：javascript, jquery, css, html

谷歌翻译如何在谷歌翻译网站的左侧窗口中突出显示文本：http: [//translate.google.com/](http://translate.google.com/)？

在右侧，文本呈现为`spans`，但是如何在`textarea`左侧实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:59:01.230

好吧，实际上您不能突出显示文本区域内的内容，但是您可以通过在文本区域的背景上绘画来做到这一点。有一个小的 jquery 组件可以突出显示可能对你有帮助

[http://www.strangeplanet.fr/work/jquery-highlighttextarea/](http://www.strangeplanet.fr/work/jquery-highlighttextarea/)

# java - 丰富：来自注入 EJB 的树种群

> ID：12783734
> 
> 赞同：2
> 
> 时间：2012-10-08T14:24:45.697
> 
> 标签：java, jsf-2, jboss, richfaces

我有richtree人口的代码。

这是 mainmenu.xhtml 由最简单的 Richtree 声明组成：

```
<rich:tree value="#{menu.stationNodes}" var="station">
    <rich:treeNode>
          <h:outputText value="#{station}" />
    </rich:treeNode>
</rich:tree> 
```

和

这是java托管bean：

```
import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import zcore.zTreeNode;
import zejb.trees;

@ManagedBean(name="menu")
@SessionScoped
public class Menutree implements Serializable {

    @EJB
    private trees tb;

    private static final long serialVersionUID = 1333L;
    private  zTreeNode<String> stationNodes = new  zTreeNode<String> (); 
    public Menutree(){
     }

    @PostConstruct
    public void postConstruct() {

        **//BLOCK A
        stationNodes.setData("root");
        stationNodes.addChild(0, new zTreeNode<String>("jjhshjssd"));
        stationNodes.addChild(0, new zTreeNode<String>("jsddssdsddd"));
        stationNodes.addChild(1, new zTreeNode<String>("ggggggd"));
        // BLOCK A - END**

        **//BLOCK B
        //stationNodes=tb.LoadTree();
        // BLOCK B - END**
    }

    Getter and Setter here.....
} 
```

下面是块 B 中调用的 EJB 的一部分：

```
public zTreeNode<String> LoadTree() {

        zTreeNode<String> stationNodes =new zTreeNode<String>() ;
        stationNodes.setData("root");
        stationNodes.addChild(0, new zTreeNode<String>("jjhshjssd"));
        stationNodes.addChild(0, new zTreeNode<String>("jsddssdsddd"));
        stationNodes.addChild(1, new zTreeNode<String>("ggggggd"));
        return stationNodes;

} 
```

如果我使用 Block A，那么一切正常。如果我使用 Block B，那么我的 Richtree 在页面上保持空白。我做错了什么？

谢谢你。

# c - C中双指针和数组的模棱两可的结果

> ID：12783735
> 
> 赞同：0
> 
> 时间：2012-10-08T14:24:48.893
> 
> 标签：c, arrays, pointers

> **可能重复：**
> [如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

我有以下 C 代码：

```
int main () {
    char *pathvc[MAX_PATHS];
    parsePath(pathvc);

    struct command_t command;

    command.name = lookup(command.argv, pathvc); //command.argv is: char *argv[MAX_ARGS];
}

char* lookupPath(char **argv, char **dir) {
    //Some implementation
} 
```

这是我在主函数中获得的调试信息：

> 名称：pathvc 详细信息：{0x804c208 "/usr/lib/lightdm/lightdm", 0x804c221 "/usr/local/sbin", 0x804c231 "/usr/local/bin", 0x804c240 "/usr/sbin", 0x804c24a "/usr /bin", 0x804c253 "/sbin", 0x804c259 "/bin", 0x804c25e "/usr/games", 0x0 } 默认值：0xbffff0a8 十进制：3221221544 十六进制：0xbffff0a8 二进制：1011111111111111110121000077770100002777010：
> 
> 名称：pathvc[0] 详细信息：0x804c208 "/usr/lib/lightdm/lightdm"
> 
> 名称：pathvc[1] 详细信息：0x804c221 "/usr/local/sbin"
> 
> 名称：pathvc[2] 详细信息：0x804c231 "/usr/local/bin"
> 
> 名称：pathvc[3] 详细信息：0x804c240 "/usr/sbin"
> 
> 名称：pathvc[4] 详细信息：0x804c24a "/usr/bin"
> 
> 名称：pathvc[5] 详细信息：0x804c253 "/sbin"
> 
> 名称：pathvc[6] 详细信息：0x804c259 "/bin"
> 
> 名称：pathvc[7] 详细信息：0x804c25e "/usr/games"

但是，当我在查找函数中传递 pathvc 时，我得到了这个：

> 名称：目录详细信息：0xbffff0a8 默认值：0xbffff0a8 十进制：3221221544 十六进制：0xbffff0a8 二进制：10111111111111111111000010101000 八进制：027777770250
> 
> 名称：*dir 详细信息：0x804c208 "/usr/lib/lightdm/lightdm"
> 
> 名称：**dir 详细信息：47 '/'

为什么我将一个指针数组传递给查找函数，该函数接受它作为双指针，但它只指向第一个路径而不是完整的路径列表。

如果我正在做/问一个非常愚蠢的问题，请原谅我，因为我对 C 中的指针不满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:27:21.030

这只是调试器知道什么的问题。在调用者中，调试器可以看到有`MAX_PATHS`指针。在被调用的函数中，它不知道，所以它不知道要显示多少条目。如果您手动询问其他人，它会显示给您。

就像这样：

```
void someFunc(int *j)
{
   // does j point to a single integer? An array? Who knows?
}

void foo(void)
{
   int p = 3;
   int* j = &p;
   // here we know j points to one integer
   someFunc(j);
}

void foo2(void)
{
   int* j[4];
   // here we know j is an array of four pointers
   someFunc(j);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:28:05.830

`*dir`与 相同`pathvc[0]`，它只是数组的第一个元素。`**dir`是`pathvc[1]`不是`pathvc[0][0]`。使用`*(dir + 1)`或`dir[1]`代替。

# .net - 是否可以获取 Outlook 即时搜索使用的搜索词？

> ID：12783736
> 
> 赞同：1
> 
> 时间：2012-10-08T14:25:00.700
> 
> 标签：.net, search, outlook-2010

可以使用 Outlook 互操作库执行“即时搜索” `Explorer.Search(query, scope)`，但是否可以获取用户执行搜索的内容，即在“搜索收件箱 (Ctrl + E)”字段中键入的内容邮件项目列表的顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:01:42.470

这看起来不可能。我也尝试使用 Application.ActiveExplorer.CurrentView.Filter，但是，虽然可以设置，但在尝试读取即时搜索值时它为空。

# php - 如何在 PHP 中使用 setInterval？

> ID：12783737
> 
> 赞同：15
> 
> 时间：2012-10-08T14:25:03.883
> 
> 标签：php

我想问一下，我怎样才能像 Javascript 中的 setInterval 一样在一段时间后自动一次又一次地使用 php 函数。我们设置了时间，它一直在工作，直到脚本中止或关闭。

**索引.PHP**

```
<?
$Wall = new Wall_Updates();
$updatesarray=$Wall->Updates();
foreach($updatesarray as $data)
{
    $likes=$data['likes'];
    ?>
    <div id="likes"><?php echo $likes; ?></div>
    <?
}
?> 
```

而 Wall_Updates() 函数在这里定义在**FUNCTION.PHP**

```
<?php

class Wall_Updates {    
    public function Updates() {
        $myname=$_COOKIE['usename'];
        $query=mysql_query("SELECT * FROM posts WHERE name='$myname'");
        while($row=mysql_fetch_array($query))
            $data[]=$row;
        return $data;
    }
}
?> 
```

我希望这个 Wall_Updates() 函数一次又一次地从 mysql 中获取数据。所以，它将被更新。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-08T14:39:38.163

郑重声明：我认为这是个坏主意。但是无所谓 ：）

试试这个代码

```
function setInterval($f, $milliseconds)
{
    $seconds=(int)$milliseconds/1000;
    while(true)
    {
        $f();
        sleep($seconds);
    }
} 
```

用法：

```
setInterval(function(){
    echo "hi!\n";
}, 1000); 
```

或者：

```
$a=1; 
$b=2;

setInterval(function() use($a, $b) {
    echo 'a='.$a.'; $b='.$b."\n";
}, 1000); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-09-11T15:20:53.403

您的解决方案非常简单：

```
 $event = new EVTimer(10,2, function() {
         Do your things .. :)
   }); 
```

[https://www.php.net/manual/en/ev.examples.php](https://www.php.net/manual/en/ev.examples.php)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-08T14:34:29.263

我建议使用 setInterval 从使用 AJAx 的 .php 页面轮询结果，然后输出结果。

所以它看起来像这样使用 jQuery：

```
<script>
    var poll = true;
    var getData = function() {
        if (poll) {
            $.get('getData.php', function(data) { $('#likes').html(data); });
        }
    };

    $(document).ready(function() {
        setInterval(getData, 5000);
        $('.comm').click(function() { poll = false; });
        $('.comm').blur(function() { poll = true; });
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:33:13.103

目前尚不清楚您想要实现的具体目标。

您是否知道 PHP 仅根据请求提供内容？

如果您希望服务器偶尔更新某些内容（例如文件），请使用 cronjob（在 *nix 上）。

如果您希望您的 WEBPAGE 重新查询某些内容，请在 javascript 中执行此操作并调用提供新鲜内容的 PHP 脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T14:35:36.300

与 Javascript 不同，PHP 在服务器端执行。PHP 中没有 setTimeout 功能。您可以通过使用调用您的脚本的 cronjobs（或其他 PHP 脚本）来接近。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-17T09:50:06.063

我建议您使用 cron 作业在代码中实现此类功能。Cron 将根据您给出的指令在后台运行。看看[这篇文章](https://www.sitepoint.com/introducing-cron/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-17T13:27:16.773

由于 Web 开发的异步概念与在不重新加载页面的情况下对网页进行更改有关，所以当我们需要对我们的网页产生此类效果时，我们不能总是跑到 Ajax 的海湾，PHP 可以简单地完成这项工作去数据库@ sleep seconds 来检索一些数据集供我们使用，尤其是用于聊天应用程序的目的。请参阅以下代码：

```
function setInterval ( $func, $seconds ) 
{
      $seconds = (int)$seconds;
      $_func = $func;
      while ( true )
      {
            $_func;
            sleep($seconds);
      }
} 
```

现在，假设我们有一个函数 get_msg() 去数据库下载一些信息集，如果我们必须重复这样做而没有重复使用按钮调用，那么，请参阅上面编写的 setInterval 函数的用法get_msg 函数。

```
setInterval ( get_msg(), 5 ); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-01-26T13:36:35.517

Javascript`setInterval`在其他线程中执行以继续其代码流执行。但是php挂在你调用for循环实现的函数的那一行。然而 php 支持多线程和分叉工具，但不推荐使用它们，也不是线程安全的。

# android - 三星 Galaxy P1000 图像文件夹

> ID：12783738
> 
> 赞同：2
> 
> 时间：2012-10-08T14:25:11.887
> 
> 标签：android

我正在使用三星 Galaxy P1000 选项卡，我的问题是 Galaxy 选项卡总是从 drawable-hdpi 获取图像。如果缩放这些图像，则图像已像素化，如果制作 600*1024 分辨率的图像，那么问题是如何识别两个具有相同名称的图像hdpi（tab+hdpi 图像）的同一个文件夹，那么我如何将选项卡的图像放在 android 可绘制文件夹中

# java - 是否需要任何 Eclipse 特殊版本才能在 javascript 中使用 getElementById 等函数

> ID：12783743
> 
> 赞同：0
> 
> 时间：2012-10-08T14:25:19.873
> 
> 标签：java, javascript, html

我正在使用 Eclipse Indigo，但在 Web 项目中运行 HTML 页面。除了 getElementById、getElementsByName、innerHTML 函数之外，javascript 的所有部分都在运行，并且也无法使用 sonSubmit 等事件。但其他事件如 onBlur 等运行良好。
同样按 ctrl + spc 不会填充上述功能/事件。我想知道是否需要进行任何其他设置，或者需要任何特殊的 Eclipse 版本才能运行相同的设置。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:36:21.600

**从Project Explorer**中右键单击项目（您的项目）， 然后选择**Configure** --> **Add Java Script Support** ..

Eclipse Galileo - 不确定一些旧版本是否也支持

# apache - url重写不适用于子文件夹

> ID：12783744
> 
> 赞同：1
> 
> 时间：2012-10-08T14:25:20.620
> 
> 标签：apache, url-rewriting

我正在尝试使用 url rewrite (apache) 更改一些 url，但没有任何效果，我只是不明白为什么。这是我的 .htaccess 文件：

```
 RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$ [NC]
RewriteCond %{HTTP_REFERER} !^http://mywebsite.it [NC]
RewriteCond %{HTTP_REFERER} !^http://www.mywebsite.it [NC]
RewriteCond %{HTTP_REFERER} !^http://websiteip [NC]
RewriteRule ^.*$ http://www.mywebsite.it/ [R,L]
ErrorDocument 404 /404.php
RewriteRule ^home$ /t01/index.php [L]
RewriteRule ^chi-siamo$ /t01/chisiamo.php [L]
RewriteRule ^faq$ /t01/faq.php [L]
RewriteRule ^login$ /t01/login_splash.php [L]
RewriteRule ^logout$ /t01/logout.php [L]

There is t01/ in front of the files because I'm trying to see if it works in a subfolder. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:09:37.117

我通过将文件放在主目录中并清除我的规则（不再是 t01/ ）解决了所有问题。

# git - 显示特定日期之后的 Git 日志详细信息

> ID：12783747
> 
> 赞同：0
> 
> 时间：2012-10-08T14:25:24.373
> 
> 标签：git

在过去的两个月里，我一直在从事一个开源项目。

到目前为止，我已经修复了一堆错误，我想将我的差异发送给代码审查。我只在本地提交了我的更改，而不是做一个“ `git push origin`。”

我使用“ `git log -p *`”来显示我的所有更改，但我更愿意只查看某个日期之后的更改。

是否有一个特定的“git”命令只会在某个日期之后显示所有差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:32:58.873

```
git log -p --after=<date>
git log -p --after=2012-09-01
git log -p --after="2 months ago" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:33:40.760

`git log --since="datestring"`会做。但是如果你正在为上游准备补丁，`git format-patch <commit-ish>..` 会更正常。检查您的项目贡献政策。

# antlr - 如何在 Antlr 语法中抛出异常

> ID：12783753
> 
> 赞同：4
> 
> 时间：2012-10-08T14:25:36.613
> 
> 标签：antlr, antlr3, antlrworks

我有这种语法，

```
locationPath returns [CustomParser xpathParser]  
    :^(LOCATION_PATH relativeLocationPath {**Want to throw a exception if this condition matches**})
    |^(LOCATION_PATH absoluteLocationPath {$xpathParser=$absoluteLocationPath.xpathParser;})
    ; 
```

这样做的方法是什么？我试过这个

```
locationPath returns [CustomParser xpathParser]  
    :^(LOCATION_PATH relativeLocationPath {throw new Exception})
    |^(LOCATION_PATH absoluteLocationPath {$xpathParser=$absoluteLocationPath.xpathParser;}) 
```

但是使用这个生成的代码会产生编译错误。因为该方法 loactionapth 在方法签名处没有抛出线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:51:16.243

只有一种方法可以做到这一点：抛出未经检查的异常：

```
locationPath returns [CustomParser xpathParser]  
 : ^(LOCATION_PATH relativeLocationPath) {throw new RuntimeException("No way!");}
 | ^(LOCATION_PATH absoluteLocationPath {$xpathParser=$absoluteLocationPath.xpathParser;})
 ; 
```

如果编译器仍然抱怨（我不记得了，而且我现在无法测试），请`if(true)`在它前面添加一个：

```
locationPath returns [CustomParser xpathParser]  
 : ^(LOCATION_PATH relativeLocationPath) {if(true) throw new RuntimeException("No way!");}
 | ^(LOCATION_PATH absoluteLocationPath {$xpathParser=$absoluteLocationPath.xpathParser;})
 ; 
```

# usb - 佳能 EDSDK 设备忙无法取消半完成的图像传输

> ID：12783756
> 
> 赞同：1
> 
> 时间：2012-10-08T14:25:38.017
> 
> 标签：usb, edsdk, canon-sdk

在 EDSDK 中，如果在应用程序重新启动并重新连接到设备时图像传输过程中发生错误（即连接丢失、应用程序错误......），则无法拍摄新照片，因为 EdsSendCommand(hdev,kEdsCameraCommand_TakePicture,0) 总是返回 EDS_ERR_DEVICE_BUSY .

这是因为即使我关闭相机，以前的图像数据也在相机内存中。唯一的解决办法就是把电池关掉！！！有没有人有更好的解决方案（软件）发送一种RESET并释放内存中等待传输的所有图像数据，让相机恢复正常工作状态。

我在以下模式下运行 SDK 我首先将属性设置为 EdsdkWrapper.PropID_SaveTo ： EdsdkWrapper.EdsSaveTo.Host

EdsSendCommand EdsdkWrapper.CameraCommand_TakePicture

问题：如何在突然终止后重置相机，以便它可以忘记所有半完成的传输？请注意，突然终止后我没有 IntPtr 参考。（即我不能调用 EdsdkWrapper.EdsDownloadComplete(imageReference)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:23:01.420

这可能是因为您的程序在 EdsTerminate() 函数执行之前退出。您应该确保在程序终止之前执行此函数。或者更粗略的解决方案是让另一个程序只有 EdsTerminate 函数。如果发生突然终止，您可以在再次运行应用程序之前运行该程序。

# html - Snappoints 赢得 8 个应用程序

> ID：12783758
> 
> 赞同：-1
> 
> 时间：2012-10-08T14:25:44.163
> 
> 标签：html, css, windows-8

我想让我的不同列对齐。我可以划分我的快照点，快照点上是否有任何文档离子？我只看到指导方针。

发现这段代码很难，但它是如何工作的？

```
-ms-scroll-snap-x: mandatory snapInterval(0px,200px); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:25:19.620

很好的起点，查看代码示例和场景：

[http://code.msdn.microsoft.com/ie/Scrolling-panning-and-6834aaf9/view/SourceCode](http://code.msdn.microsoft.com/ie/Scrolling-panning-and-6834aaf9/view/SourceCode)

或者这个非常深入的博客文章，带有示例：

[http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2011/12/09/zooming-amp-panning-with-css-in-ie-10.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2011/12/09/zooming-amp-panning-with-css-in-ie-10.aspx)

# javascript - 正则表达式验证三个大写字母然后六个数字？

> ID：12783760
> 
> 赞同：0
> 
> 时间：2012-10-08T14:25:51.293
> 
> 标签：javascript, jquery, regex

我只是在处理一些 JavaScript 来通过 jQuery 接受一些用户输入。我要验证的是 3 个大写字符，后跟 6 个整数。

任何人都知道如何在 JavaScript 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:27:41.980

简化版本可能是`/^[A-Z]{3}\d{6}$/`.

一个更“兼容”的版本是使用 `/^\p{Lu}{3}\pN{6}$/`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:33:52.337

简单的正则表达式可以是：

```
/^[A-Z]{3}\d{6}$/ 
```

或者，如果您想与 Unicode 兼容：

```
/^\p{Lu}{3}\pN{6}$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:35:23.393

像这样简单：

```
var match = yourString.match(/^\p{Lu}{3}\pN{6}$/);
if(match) {
    // tada!
} else { alert("not matched"); } 
```

# android - RuntimeException 启动预览失败

> ID：12783761
> 
> 赞同：1
> 
> 时间：2012-10-08T14:25:57.610
> 
> 标签：android, opencv

当我尝试在**android 4.1.1(galaxy nexus)上运行****opencv(2.4.2)** sample3 时。我收到了 RuntimeException。Logcat 点在这里：**`(android.hardware.Camera) mCamera.startPreview();`**

****如果我在android 2.3.6(htc hd2)**上运行相同的示例，则没有问题并且可以正常工作。有什么想法可以解决这个问题吗？我搜索它，人们通常会说“*它不能在 android 4.1.1 上运行*”，但我只是想知道是否有人在**android 4.1.1**上运行它。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:43:57.723

实际上这与opencv无关。某些设备需要 SurfaceView 才能打开摄像头。有关更多详细信息，请查看[此答案](https://stackoverflow.com/a/9379765/989151)。**

# objective-c - 需要将交互式 3D 模型添加到我原本非 3D 的应用程序中

> ID：12783765
> 
> 赞同：5
> 
> 时间：2012-10-08T14:26:23.063
> 
> 标签：objective-c, ios, opengl-es

尽可能简短；是否有任何可用的框架可以放入我正在开发的 iPad 应用程序中，以及 3D 模型，并允许我添加一个以交互式格式呈现模型的视图？模型需要是可旋转的，理想情况下，我希望能够在模型上添加交互点，以便在点击时弹出模态视图。

我以前从未在任何方面使用过 3D，所以我将作为一个完整的新手来从事这方面的工作。3D 模型正在提供给我，并将以“各种格式”提供。该应用程序的其余部分是纯Objective-C，我已经足够精通了。

我用谷歌搜索和谷歌搜索，到目前为止还没有想出任何东西。

如果没有任何嵌入式框架，那么让自己跟上我需要知道的内容可能会有多大的挑战？有什么好的起点可以在这里扩展我的知识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:40:09.930

3D 是一个复杂的问题，如果您没有看到您的未来定期处理它，我不建议您为它编写自己的解决方案。

您可以找到最接近拖放框架的是 iPhone / iPad GPU 制造商的 SDK。它很容易使用。

[PowerVR SDK 下载](http://www.imgtec.com/PowerVR/insider/sdkdownloads/index.asp)

在他们的网站上免费注册后，您可以下载包含大量示例和源代码的 SDK。他们的框架以自己的 POD 格式显示 3D 模型，这当然是针对 iOS 设备进行了大量优化。要求您的 3D 模型提供商为您提供 POD 格式的模型（您也可以在 PowerVR 的网站上找到适用于 Maya 的 POD 转换器/导出器等）。

# .net - WCF 操作上下文 - 污染

> ID：12783766
> 
> 赞同：1
> 
> 时间：2012-10-08T14:26:23.773
> 
> 标签：.net, wcf, iis, operationcontext

我正在研究一个问题，即从 OperationContext 检索扩展实例时，不同操作之间似乎存在一些交叉污染。它是那些令人讨厌的基于难以复制的并发问题之一。我强烈怀疑某种线程问题。我们在 IIS7.0/.NET 4 集成模式下运行 WCF 服务。我们扩展的相关部分如下：

```
public class CustomContext : IExtension<OperationContext>, ICustomContext
{
    public CustomContext Current
    {
        get
        {
            return OperationContext.Current != null ? OperationContext.Current.Extensions.Find<CustomContext>() : null;
        }
    }

   ...

 } 
```

以上是从 PostSharp 方面调用的，我不确定这是否相关？鉴于上述情况，是否存在对 current 的调用可能返回错误的 CustomContext 实例的明显条件？为这样一个开放式问题道歉。

# wpf - wpf命中测试

> ID：12783767
> 
> 赞同：0
> 
> 时间：2012-10-08T14:26:37.350
> 
> 标签：wpf, testing, hit

我面临一个问题，我需要确定我处理的视觉对象是否实际上对用户可见。

我尝试过的东西（组合），但是我的方法仍然没有完全奏效。

1) 如果 Object.IsVisible 为 false，则用户看不到该对象

2）如果我不能转换它，它是不可见的：

```
 Rect bounds = AssociatedObject.TransformToAncestor(container).TransformBounds(new Rect(0.0, 0.0, AssociatedObject.ActualWidth, AssociatedObject.ActualHeight));
                Rect rect = new Rect(0.0, 0.0, container.ActualWidth, container.ActualHeight);
                if (!rect.Contains(bounds.TopLeft) || !rect.Contains(bounds.BottomRight))
                    return; 
```

就是这个。但是，它不能解决我想要的一种情况：

如果我们有这样的事情：

```
<Grid>
<Grid Background="Purple" />
<Grid Background="Green" />
</Grid> 
```

我的“对用户可见”算法表明是的，“紫色”网格是可见的。这是正确的，但它不适合我。

我终于手工制作了一些理想的东西，但事实并非如此。它只是不会做正确的事情。

```
 //last check !!
                        var positionTransform = AssociatedObject.TransformToAncestor(container);
                        var areaPosition = positionTransform.Transform(new Point(0, 0));

                        bool dontcreate = false;
                        VisualTreeHelper.HitTest(AssociatedObject, null, new HitTestResultCallback(
                            delegate(HitTestResult result)
                            {
                                FrameworkElement xs = result.VisualHit as FrameworkElement;
                                if (xs != null)
                            {
                                FrameworkElement cv = VisualHelper.FindChild<FrameworkElement>(AssociatedObject, xs.Name);
                                if (cv == null)
                                {
                                    if (_customPopup != null)
                                    {
                                        ReleasePopupIfNeeded();
                                        dontcreate = true;
                                    }
                                }

                            }
                            return HitTestResultBehavior.Stop;
                        }), new PointHitTestParameters(areaPosition));

                    if (dontcreate)
                        return; 
```

这个想法是，找出VisualObject的坐标。然后使用 Z-Order HitTesting 接收坐标上的第一个元素。如果该对象不是 VisualObject 或 VisualObject 的一部分，听起来它肯定对用户不可见。我想知道为什么我没有得到我希望的结果？

你有想法吗？谢谢。

# .net - 如何使用 Unity DI 加载具有依赖项的程序集，然后注册内部

> ID：12783768
> 
> 赞同：4
> 
> 时间：2012-10-08T14:26:38.640
> 
> 标签：.net, asp.net-mvc, dependency-injection, unity-container, entity-framework-5

我有一个 asp.net mvc 3 Web 应用程序，它具有实现系统相关 EFcontexts 和服务的插件程序集。

例如，我有一个通常如下所示的程序集：

```
System1Controller : IController // from System.Web.Mvc

ISystem1Service {
    IList<System1Type> GetOperation(string something);
}

System1Service : ISystem1Service 
{
    private ISystem1Entities context;
    public System1Service(ISystem1Entities context)
    {
        this.context = context;
    }
}

ISystem1Entities
{
    IDbSet<System1Type> Operations { get; set; }
}

System1Entities : DbContext, ISystem1Entities 
```

使用 Unity Bootstrapper 并调用 Bootstrapper.Initialize() 可用于以下 BuildUnityContainer() 实现

```
private static IUnityContainer BuildUnityContainer()
{
    var theContainer = new UnityContainer();
    var connectionString = ConfigurationManager.ConnectionStrings["WebAppConnectionString"];
    if (connectionString == null)
    {
        throw new ApplicationException("The ConnectionString is not defined.");
    }

    // register all your components with the container here
    // it is NOT necessary to register your controllers
    theContainer.RegisterType<ISystem1Entities, System1Entities>(
        new HierarchicalLifetimeManager(), 
        new InjectionConstructor(connectionString.ConnectionString));

    theContainer.RegisterType<ISystem1Service, System1Service>();

    var factory = new UnityControllerFactory(theContainer);
    ControllerBuilder.Current.SetControllerFactory(factory);

    return theContainer;
} 
```

我想重构引导程序，以便我可以在编译时加载“未知”程序集，注册其中包含的类型，并允许 Web 应用程序根据需要引用控制器、服务、上下文。

我查看了[Unity AutoRegistraion](http://autoregistration.codeplex.com/)项目，它似乎让我接近了我想要的实现，但我不确定如何实现以下想法：

```
BootStrapper.BuildUnityConfiguration
    Initialize Container
    RegisterMyAssemblies() 
```

我希望“RegisterMyAssemblies”进程注册程序集的通配符列表，然后继续在每个单独的程序集中注册类型。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:56:06.137

您不应该尝试使用应用程序的主引导程序（组合根）来配置这些插件程序集，因为这很难做到正确。很难做到正确，因为主程序不知道要注册哪些类型，以及这些类型应该在多长的生命周期内注册。

相反，让每个插件程序集都有它自己的引导程序方法，并将应用程序的容器实例传递给这个插件引导程序。

例如，您可以`IBootstrapper`在核心程序集中定义一个接口，并让每个插件程序集实现该接口。例如：

```
public class System1Bootstrapper : IBootstrapper
{
    void IBootstrapper.Bootstrap(IUnityContainer container)
    {
        var conString = ConfigurationManager
            .ConnectionStrings["WebAppConnectionString"];

        if (conString == null)
        {
            throw new ApplicationException(
                    "The ConnectionString is not defined.");
        }

        // register all your components with the container here
        // it is NOT necessary to register your controllers
        container.RegisterType<ISystem1Entities, System1Entities>(
            new HierarchicalLifetimeManager(), 
            new InjectionConstructor(conString.ConnectionString));

        container.RegisterType<ISystem1Service, System1Service>();
    }
} 
```

在应用程序的组合根目录中，您现在可以简单地添加以下代码来注册所有插件类型：

```
var pluginBootstrappers =
    from Assembly assembly in BuildManager.GetReferencedAssemblies()
    from type in assembly.GetExportedTypes()
    where typeof(IBootstrapper).IsAssignableFrom(type)
    select (IBootstrapper)Activator.CreateInstance(type);

pluginBootstrappers.ToList().ForEach(b => b.Bootstrap(container)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:53:20.437

这无疑是一个插件，但请查看我在 NuGet 上的 Unity Automapper。它允许你做这种事情——你只需为它提供一个类型或程序集名称的集合；它将根据接口 - 具体映射自动连接依赖项。它还对内部类型进行操作，因此您可以通过公开您的接口和这些接口的提供者来进行“适当的” DIP。

# android - 如何获取设备序列号（不是设备 ID）

> ID：12783770
> 
> 赞同：2
> 
> 时间：2012-10-08T14:26:41.580
> 
> 标签：android, serial-number

如何获取设备序列号？我不想要设备 ID。我想要序列号（我们在 Eclipse 的设备视图中看到的那个）。如果没有办法得到它，我至少可以知道它存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:41:36.540

只要您使用 API 9

```
Build.SERIAL 
```

应该返回与 Eclipse 显示的相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T12:53:57.990

```
You can use the getprop command on the adb shell and check yourself that which of the files contains the correct Serial number.Many times the serial number is located on different files and code has to be device specific.

Foe samung Tab 3 you can use the following code:

filename=sys.serial//for samsung tab 3
filename=ro.serial//for samsung t211 tab
filename=ril.serial//for samsung 10inch note
try {

        Class<?> c = Class.forName("android.os.SystemProperties");

        Method get = c.getMethod("get", String.class, String.class);

        serialnum = (String) (get.invoke(c, filename, "unknown"));

    } catch (Exception ignored) {

        serialnum = "unknown";

    } 
```

# android - 无法使用片段更改活动名称

> ID：12783776
> 
> 赞同：0
> 
> 时间：2012-10-08T14:27:05.003
> 
> 标签：android, android-fragments

使用片段时无法更改栏中的活动名称

```
public void onCreate(Bundle state) {
        super.onCreate(state);
        setContentView(R.layout.fragment_scenarios_list_equipements);

        context = this;

        setTitle(getString(R.string.app_name)+" - " + getString(R.string.scenarios));

    } 
```

当我敬酒时，它给了我正确的名字，但是当我使用 setTitle 任何想法时它什么也没做？

编辑：![当我运行代码时](../Images/7d509dacf5cd50a0cd848e94d2d510e4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:59:49.870

我认为您需要告诉它从哪里获取字符串（即资源）...试试这个：

```
setTitle(getResources().getString(R.string.app_name)+" - " + getResources().getString(R.string.scenarios)) 
```

# c# - 互锁。增加一个整数数组

> ID：12783781
> 
> 赞同：11
> 
> 时间：2012-10-08T14:27:32.337
> 
> 标签：c#, multithreading, .net-4.0

这是否保证是线程安全的/不会产生意外结果？

```
Interlocked.Increment(ref _arr[i]); 
```

我的直觉告诉我这不是，即读取 _arr[i] 中的值不能保证在实际递增时是“原子的”。

如果我认为这是错误的正确，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T14:29:11.370

假设没有任何变化，`i`或者`_arr`，那应该没问题。

数组被视为变量的集合；无论该元素或同一数组中的其他元素发生了什么，联锁增量都应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T05:45:10.090

如果某些东西*是*异步变化的`_arr`，`i`那么我同意你的看法，不，查找`_arr[i]`本身不一定是原子的。

然而，正如 Jon 所说，一旦你确定了 (some) 的一个元素`_arr`，*它将*自动递增，独立于数组的其他元素中发生的其他操作，或者对 or 的进一步`_arr`更改`i`。

如果`_arr`或`i`正在异步更改，对它们的*所有*引用（读取和写入）*都*需要`lock`位于公共对象的 a 内。（然后您可以`Interlocked.Increment`将`++`.

# c# - 如何在 C# 中上传文件时获取进度？并想在JS中显示

> ID：12783782
> 
> 赞同：0
> 
> 时间：2012-10-08T14:27:39.123
> 
> 标签：c#, extjs4

我的所有布局都使用 Ext JS 4.0，服务器端使用 ASP.net C#。我正在上传多个文件。我已经为在 JS 中上传的每个文件都有一个进度条。但我没有进度值（所以它总是 0%）。我需要知道进度和哪个文件。

我`XMLHttpRequest`在 JS 中使用，我`HttpPostedFileBase`在 C# 中获得了一个并使用该`SaveAs(path)`方法将文件保存在服务器上。

提前致谢 ！

# android - 使用异步任务强制关闭

> ID：12783787
> 
> 赞同：3
> 
> 时间：2012-10-08T14:28:08.733
> 
> 标签：android

当客户端向服务器发送请求时，我想显示一个进度对话框..请求应该在后台完成......但是当我使用 AsyncTask 时我正在强制关闭..请帮助..谢谢

```
package com.example.client;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketAddress;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    public static ProgressDialog Dialog;
    String s1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // sendreq();
                new SendUserTask().execute();
            }
        });
    }

    public String sendreq() {
        try {
            // TODO Auto-generated method stub
            SocketAddress sockaddr = new InetSocketAddress("192.168.7.116",
                    9011);
            Socket serversocket = new Socket();
            serversocket.connect(sockaddr, 10000);
            serversocket.setSoTimeout(10000);

            DataOutputStream out = new DataOutputStream(
                    serversocket.getOutputStream());
            out.flush();

            DataInputStream in = new DataInputStream(
                    serversocket.getInputStream());
            out.flush();
            String msg = "";

            msg = "hi";
            out.writeBytes(msg);
            out.flush();
            byte[] message = new byte[100];
            in.read(message);
            s1 = new String(message);
            Toast.makeText(getApplicationContext(), s1, Toast.LENGTH_LONG)
                    .show();

            ((TextView) findViewById(R.id.textView1)).setText(s1);
            in.close();
            out.close();
            serversocket.close();
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), String.valueOf(e),
                    Toast.LENGTH_LONG).show();
        }
        return null;
    }

    private class SendUserTask extends AsyncTask<Void, Void, String> {

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            Dialog = ProgressDialog.show(MainActivity.this, "",
                    "Logging In....", true);

            super.onPreExecute();
        }

        protected void onPostExecute(String s) {

            if (Dialog.isShowing())
                Dialog.dismiss();
        }

        @Override
        protected String doInBackground(Void... params) {
            // TODO Auto-generated method stub
            try {
                return sendreq();

            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), String.valueOf(e),
                        Toast.LENGTH_SHORT).show();
            }
            return null;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:32:30.820

这`((TextView) findViewById(R.id.textView1)).setText(s1);`是从后台线程执行的。您无法访问 UI 线程之外的 UI 元素。

您需要将该部分移动到 onProgressUpdate 或 onPostExecute，或者在 runOnUiThread Runnable 中运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:20:35.900

`doInBackgorund()`是一个**非 UI 线程**，您无法访问其中的 UI 元素。doInBackground() 中的代码在一个单独的非 UI 线程上运行，该线程无法访问布局中定义的 UI 元素。此外，由于您通过意图调用另一个 Activity，因此您应该始终牢记 Activity 在 UI 线程上运行，因此您永远不应该从非 UI 线程内启动另一个 Activity。

**`((TextView) findViewById(R.id.textView1)).setText(s1);`**因此，删除从 doInBackground() 内部访问 UI 元素的代码“ ”，而是将其放入内部**`onPostExecute()`**，这是一个 UI 线程，在 doInBackground() 完成后台处理后调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:16:53.573

好的....在谷歌搜索了很多之后，我终于明白你不能从主线程访问 UI 元素到一个新的非 UI 线程......所以你不能使用像 textview 甚至 getApplicationContext mtd tht v 用于 toast 的元素在 dobackground mtd 甚至在 dobackground 正在调用的任何其他 mts 中......这也适用于使用 runnable 的新 Thread() ......谢谢 njzk2 的帮助:)

# android - 字符串比较

> ID：12783791
> 
> 赞同：0
> 
> 时间：2012-10-08T14:28:22.400
> 
> 标签：android, string, comparison

对于我的项目，ppl 可以回答他们得到的某个问题。我对其执行`userAnswer = etUserAnswer.getText().toString().toLowerCase();`，然后将其与存储在 SQL 数据库中的值进行比较。

但是我在想，如果答案几乎是正确的，但如果他用一个单词写了“kk”而不是“ck”，这对用户来说是很烦人的。因此，我正在尝试创建一个系统来**检查答案是否或多或少正确**，然后返回结果。我搜索了网络，但似乎没有找到关于这个主题的任何内容。我也不知道这样的系统有没有英文名字？

或者..也许有人知道一个好的教程或一个好的入门方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:31:59.810

我猜您正在寻找字符串距离，例如您可以使用[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。有关替代指标，请参阅[此问题](https://stackoverflow.com/questions/1210637/lesser-known-string-similarity-metrics)

# javascript - Ajax 请求总是抛出错误

> ID：12783792
> 
> 赞同：1
> 
> 时间：2012-10-08T14:28:29.137
> 
> 标签：javascript, ajax

```
function loaded() {
    var xmldoc,
    currenttime = new Date().getTime(),
    req,
    address = 'http://webservices.foo.com/eSignalQuotes/eSignalQuotes.asmx/GetDelayedQuotes?',
    symbols = 'symbols=' + '+c,s,ct,zw,kw,adm+', 
    cusip = '&cusip=',
    fields = '&fields=' + 'desc,month,year,recent,netchg,-decimal',
    type = '&type=' + 'future,stock,index',
    dispfullname = '&dispfullname=' + 'true',
    datefmt = '&datefmt=',
    timefmt = '&timefmt=',
    timestamp = '&' + Math.floor(currenttime/3600000),
    query = address + symbols + cusip + fields + type + dispfullname + datefmt + timefmt + timestamp;
    ;

    if(window.XMLHttpRequest) {
        req = new XMLHttpRequest();
    } else {
        req = new ActiveXObject("Microsoft.XMLHTTP");
    }

    req.addEventListener('error', function(e) {alert('Error');}, false);
    req.addEventListener('load', function(e) {xmldoc = req.responseText;}, false);
    req.open('GET', query, true);
    req.send();

} 
```

这就是我的代码的样子，它总是在 Safari 和 Firefox 中引发错误。疯狂的是，如果我删除事件侦听器，并将响应类型更改为`responseText`，Internet Explorer 会给我输出。我试过`overrideMimetype`了，但这似乎没有帮助。如果我在 Firefox 或 Safari 中检查响应，我会得到`null`. 我很茫然，任何帮助将不胜感激。

我应该提到，我宁愿为此避免任何 3rd 方库。

更新：错误发生在`progress`事件期间，如果我检查`.lengthComputable`我得到`false`

更新 2：Safari 更清楚地说明了这个问题：

```
XMLHttpRequest cannot load Origin is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:37:33.890

我不能 100% 确定，但在我看来，这个问题涉及跨站点通信。我最终做的是让 PHP 脚本下载文件，然后我使用 javascript 在本地获取它。

```
<?php
    $mark = $_GET['mark'];
    $xmldoc = new DOMDocument();
    $xmldoc -> preserveWhiteSpace = false;
    $xmldoc -> formatOutput = true;
    $xmldoc -> load($mark);
    unlink('fenced.xml');   
    echo $xmldoc -> save('fenced.xml');
?> 
```

Javascript：

```
localreq.open('GET', 'fenced.xml', true);
localreq.addEventListener('load', function(e) {xmldoc = localreq.responseXML;}, false);
localreq.send(); 
```

# grails - 如何在 JavaScript 中使用 groovy 控制器元素

> ID：12783794
> 
> 赞同：0
> 
> 时间：2012-10-08T14:28:34.180
> 
> 标签：grails, gsp

我有

```
def exception = request.exception.stackTraceLines 
```

在 Groovy 控制器中。如何获取`exception`JavaScript 中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:54:35.150

如果您要像这样为您的退货添加例外。

```
flash.message = message(exception: 'Error: xxx'); 
```

你可以像这样得到它

```
<div class="message" role="status"> ${flash.message} </div> 
```

只需使用 ${ 你的 flash.your_var_name}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:50:08.350

您有多种选择来解决此问题。使用 javascript 时，我通常使用可以保存错误消息/堆栈跟踪的包装器。这取决于您希望在何处以及如何进行错误处理。例子：

```
def book = new Book(params)
book.validate()

render (contentType: "text/json") {[
    "data": book,
    "errors": book.hasErrors() ? book.errors : null
]} 
```

然后，您可以在取回 JSON 时检查“errors”是否有值，以确定输入中是否存在错误。（Elvis 运算符可能也有效，book.errors ?: null） 我在通常在 JavaScript 中定义的错误回调中处理的其他（未捕获的）异常。（主要是jQuery，（在这种情况下使用malsup jquery.form.js））

```
$(function() {
  $("form").live("submit", function() {
    $(this).ajaxSubmit({
      error: function (msg) {
        /* Catch hard errors here (500's) */
        alert("Error occurred: " + msg);
      },
      success: function(wrapper) {
         if (wrapper.errors != null) {
            /* Handle model errors here */
         } else {
            /* Parse data here */
            var book = wrapper.data;
         }
      }
    });
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:25:55.197

你也可以这样做

```
render(template:"book",model:[book:theBook, exception:exception]) 
```

或者这样（没试过，不知道行不行）

```
render(template:"book",model:[book:theBook, exception:exception!=null?exception:""]) 
```

然后像这样从 GSP 访问

```
${exception.getMessage()} 
```

# python - 计算信用余额的程序

> ID：12783796
> 
> 赞同：-2
> 
> 时间：2012-10-08T14:28:36.287
> 
> 标签：python

如果一个人每个月只支付信用卡公司要求的最低月供，请编写一个程序计算一年后的信用卡余额。

我正在尝试编写一个程序来打印一年后要支付的最终余额

```
balance = 4213

annualInterestRate = 0.2

monthlyPaymentRate = 0.04

month = 1

new_balance = (balance - (balance*monthlyPaymentRate))*(1+(annualInterestRate/12))

while month < 13:
    print "Month: " + str(month)
    print "Minimum monthly payment: " + str(round(minimum_monthly_payment, 2))
    print "Remaining balance: " + str(round(new_balance, 2))
    month += 1 
```

我的输出显示了这一点：

```
Month: 1
Minimum monthly payment: 168.52
Remaining balance: 4111.89

Month: 2
Minimum monthly payment: 168.52
Remaining balance: 4111.89

Month: 3
Minimum monthly payment: 168.52
Remaining balance: 4111.89 
```

但我应该得到这样的东西：

```
Month: 1
Minimum monthly payment: 168.52
Remaining balance: 4111.89

Month: 2
Minimum monthly payment: 164.48
Remaining balance: 4013.2

Month: 3
Minimum monthly payment: 160.53
Remaining balance: 3916.8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:33:00.527

你在同一行做 3 次：`new_balance = (balance - (balance*monthlyPaymentRate))*(1+(annualInterestRate/12))`

您在这里没有任何变量，这些变量将在每个 while 循环后更新。您应该更新`balance`以每次获得较低的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:34:04.737

您的值似乎没有更新，因为您忘记每月更新余额！尝试在`balance`每个循环中更新一次变量，如下所示：

```
while month < 13:
    print "Month: " + str(month)
    print "Minimum monthly payment: " + str(round(minimum_monthly_payment, 2))
    print "Remaining balance: " + str(round(balance, 2))
    balance = (balance - (balance*monthlyPaymentRate))*(1+(annualInterestRate/12))
    month += 1 
```

此外，为了使您的代码更易于阅读（并且更加 Pythonic），您可以使用 Python 的内置列表结构，而不是使用自己的 while 循环：

```
for month in range(1, 13):
    print "Month: %d" % month
    print "Minimum monthly payment: %d" % round(minimum_monthly_payment, 2)
    print "Remaining balance: %d" % round(balance, 2)
    balance = (balance - (balance * monthlyPaymentRate)) * (1 + (annualInterestRate / 12) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:38:13.210

你不需要变量`new_balance`，你应该只修改变量`balance`：

```
while month < 13:
    print "Month: " + str(month)
    print "Minimum monthly payment: " + str(round(minimum_monthly_payment, 2))
    balance = (balance - (balance*monthlyPaymentRate))*(1+(annualInterestRate/12))
    print "Remaining balance: " + str(round(balance, 2))
    month += 1 
```

**输出：**

```
Month: 1
Minimum monthly payment: 168.52
Remaining balance: 4111.89
Month: 2
Minimum monthly payment: 168.52
Remaining balance: 4013.2
Month: 3
Minimum monthly payment: 168.52
Remaining balance: 3916.89
Month: 4
Minimum monthly payment: 168.52
Remaining balance: 3822.88
Month: 5
Minimum monthly payment: 168.52
Remaining balance: 3731.13
Month: 6
Minimum monthly payment: 168.52
Remaining balance: 3641.58
Month: 7
Minimum monthly payment: 168.52
Remaining balance: 3554.19
Month: 8
Minimum monthly payment: 168.52
Remaining balance: 3468.89
Month: 9
Minimum monthly payment: 168.52
Remaining balance: 3385.63
Month: 10
Minimum monthly payment: 168.52
Remaining balance: 3304.38
Month: 11
Minimum monthly payment: 168.52
Remaining balance: 3225.07
Month: 12
Minimum monthly payment: 168.52
Remaining balance: 3147.67 
```

# iphone - iOS 中的测试驱动开发……到 TDD 还是不到 TDD

> ID：12783797
> 
> 赞同：11
> 
> 时间：2012-10-08T14:28:36.253
> 
> 标签：iphone, objective-c, ios, tdd, ios6

我开始在 iOS 中编程，我一直在想是否应该进行测试驱动开发。

我来自 Rails 背景，那里 TDD 是许多人的生活方式，而且 TDD 工具很棒。

iOS 对 TDD 的看法如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T15:12:00.880

> 你有学习它的资源吗？

*   [iOS 中的测试驱动开发](https://rads.stackoverflow.com/amzn/click/com/0321774183)- 一位受人尊敬的作者的好书。很好的工具介绍。

*   [用 OCMock 取笑事物](http://alexvollmer.com/posts/2010/06/28/making-fun-of-things-with-ocmock/)- 关于 OCMock 的教程，这是大多数 Cocoa 开发人员使用的模拟框架

*   [单元测试教程/OCUnit](http://www.raywenderlich.com/3716/unit-testing-in-xcode-4-quick-start-guide) - 几个 OCUnit 教程之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:09:20.903

我 TDD 我的 iOS 工作，无论是专业的还是个人的。我在商店里有覆盖率 98% 的应用程序。一个起点是我的博客文章[Xcode TDD 101 with the Bowling Game Kata。](https://qualitycoding.org/xcode-tdd/)

我使用的工具是：

*   Xcode 内置的 OCUnit（又名 SenTestingKit）
*   大多数断言的[OCHamcrest](https://github.com/hamcrest/OCHamcrest)
*   大多数模拟的[OCMockito](https://github.com/jonreid/OCMockito)
*   [lcov](http://ltp.sourceforge.net/coverage/lcov.php)看看我可能无意中引入了哪些覆盖漏洞

# c# - 在批量导入数据库期间处理 csv 中的空字段

> ID：12783801
> 
> 赞同：1
> 
> 时间：2012-10-08T14:28:56.037
> 
> 标签：c#, csv, sqlbulkcopy, idatareader

我正在将地理编码数据从 csv 文件导入我们的数据库。

我使用了以下库 [A fast csv reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader?msg=4391186#xx4391186xx)来读取 csv 然后使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

这是我正在导入的数据的示例

```
"AB10","1BH","L",0,0,,,20
"AB10","1BR","L",39320,80570,57.14214,-2.11400,21 
```

它适用于良好的数据，但最重要的是它会抛出异常，因为数据库设置为不接受空值。

有没有办法告诉 bulkcopy 忽略坏数据？我试图通过像这样使用库的内置属性来让 csv 阅读器忽略坏行，但它们似乎不起作用。

```
csv.SkipEmptyLines = true;
csv.MissingFieldAction = MissingFieldAction.ParseError;
csv.DefaultParseErrorAction = ParseErrorAction.AdvanceToNextLine; 
```

我想另一种选择是预先解析 csv 并删除所有有问题的行。也许有一个更好的 .net csv 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:19:13.717

如果您可以发布您的 csv 阅读器代码，那么我们可以提供更多帮助。但是查看链接页面上的代码，您可以执行以下操作：

```
while (csv.ReadNextRecord())
    {
        for (int i = 0; i < fieldCount; i++)
            Console.Write(string.Format("{0} = {1};",
                          headers[i],
                          csv[i] ?? "null"));
        Console.WriteLine();
    } 
```

看看我在哪里添加了空合并运算符？这应该改变你的输出：

```
"AB10","1BH","L",0,0,,,20 
```

至

```
"AB10","1BH","L",0,0,null,null,20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:41:37.513

为了处理空条目，我最终一次将 csv 解析为 DataTable 对象 1000 个条目，然后边走边导入它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:03:22.710

我使用 Microsoft 文本驱动程序为项目导入 CSV 信息。它工作得很好。我定义了一个 Schema.ini 文件来指定列标题、数据类型、要扫描的行数（MaxScanRows=0，将扫描整个文件）。

我还没有尝试过，但是当您使用 Microsoft 文本驱动程序时，您会发出一个选择查询以将数据从 csv 文件中提取出来，我想知道您是否可以添加条件来过滤掉空记录。

[如何从 .csv 填充 IDataReader 以与 SqlBulkCopy.WriteToServer(IDataReader) 一起使用](https://stackoverflow.com/questions/9535246/how-to-populate-idatareader-from-csv-for-use-with-sqlbulkcopy-writetoserverida)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx)

[http://www.connectionstrings.com/textfile](http://www.connectionstrings.com/textfile)

希望这可以帮助。

# gmail - Google Script：如何显示 GmailApp.search - 邮件数据

> ID：12783803
> 
> 赞同：1
> 
> 时间：2012-10-08T14:29:02.940
> 
> 标签：gmail, google-apps-script

我正在尝试在 Logger 中显示已加星标的邮件。

```
function viewStarred() {
  Logger.log( GmailApp.search('is:starred') );
} 
```

但导致我的记录器是这样的：

> [GmailThread，GmailThread，GmailThread，GmailThread，....GmailThread]

如何显示邮件主题？或者内容...

这是我的屏幕： ![这是我的记录器屏幕](../Images/f0e509b7bbbaea591b3ed622cd762bfd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:47:35.190

您所看到的是预期的行为。如果您查看[GmailApp.search 的文档](https://developers.google.com/apps-script/class_gmailapp#search)，您会看到它返回一个 GmailThread 对象数组。Logger.log 无法直接打印出 GmailThread 数组对象

所以，你必须一个。挑出您要打印的 GmailThread 对象 b. 打印有关 GmailThread 的特定信息（主题、发件人等）

请参阅下面的示例

```
var threads = GmailApp.search('is:starred');
for (var i in threads){
  Logger.log(threads[i].getFirstMessageSubject());
} 
```

# android - 即使使用了“adjustResize”，ScrollTo() 也不起作用

> ID：12783805
> 
> 赞同：2
> 
> 时间：2012-10-08T14:29:06.357
> 
> 标签：android, android-activity, android-softkeyboard, android-scrollview

我有一个适合视口的屏幕，因此默认情况下不显示滚动条。

它有一些 TextView 元素、一个 EditText 和一个位于 EditText 下方的 CheckBox。我的目标是在 EditText 控件处于焦点时滚动并显示 CheckBox 元素。当 EditText 成为焦点时，屏幕变得可滚动，因为我为活动设置了“adjustResize”。

现在这里是试图滚动的代码：

```
mEditTextView.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            final ScrollView mScrollView = (ScrollView) findViewById(R.id.scrollView1);

            if (hasFocus){

                if(mScrollView != null) {
                    mScrollView.post(new Runnable() {

                        @Override
                        public void run() {
                            mScrollView.fullScroll(ScrollView.FOCUS_DOWN);
                        }
                    });

                }

            }
       } 
```

这不会滚动到底部。它只是将焦点放在软键盘上，复选框隐藏在它后面。

谁能告诉我这里有什么问题？

PS：我的猜测是即使在“adjustResize”之后，Android 仍然认为没有滚动空间，因此不会滚动。这可能是这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:48:34.770

你为什么不使用方法`scrollTo(x,y)`？我用过，很完美。只需使用`Handler`发送延迟消息，当您收到消息时使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:29:27.513

您如何尝试`fullScroll()`直接调用而不是`post`运行可运行对象？我认为这可能是问题所在，因为`post()`只需添加您希望滚动视图滚动到消息队列的愿望，并且当文本视图具有焦点并显示软键盘时，消息队列可能不起作用。

# c# - 从 solr 获取数据时，我遇到了错误

> ID：12783809
> 
> 赞同：0
> 
> 时间：2012-10-08T14:29:13.070
> 
> 标签：c#, solr, solrnet

从 solr 获取数据时，我遇到了错误

**已添加具有相同密钥的项目**

```
 public  static void Solryeg()
    {
        ISolrOperations<SolrContent> solr = ServiceLocator.Current
                                  .GetInstance<ISolrOperations<SolrContent>>();

        var q = solr.Query(SolrQuery.All);
    } 
```

SolrContent.cs

```
public class SolrContent
{
    [SolrUniqueKey("ContentId")]
    public int ContentId { get; set; }

    [SolrField("ContentName")]
    public string ContentName { get; set; }

    [SolrField("ContentTitle")]
    public string ContentTitle { get; set; }

    [SolrField("ContentIsActive")]
    public bool ContentIsActive { get; set; }

    [SolrField("ContentRatingEnabled")]
    public bool ContentRatingEnabled { get; set; }

   ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:55:03.880

在 SolrContent.cs 类中，您已将`SolrUniqueKey`属性添加到`ContentId`映射到架构中 ContentId 字段的属性。因此，这表明 Solr 索引中的 ContentId 字段将始终包含唯一值。但是，您的索引当前有多个具有相同 ContentId 值的项目。有几种方法可以解决此错误。

1.  将 ContentId 属性上的属性更改为 just`[SolrField("ContentId")]`
2.  修复您的索引，以便 ContentId 字段仅包含唯一值。

我建议您使用第二个选项，因为这将遵循您想要实现的真正意图。但是，您可能会尝试第一个只是为了验证您可以在没有错误的情况下查询 Solr 索引，然后弄清楚您的索引如何具有多个具有相同 ContentId 的项目以及修复该问题。

# sql - T SQL-使用一个查询的结果作为其他查询的变量

> ID：12783810
> 
> 赞同：-2
> 
> 时间：2012-10-08T14:29:18.970
> 
> 标签：sql, sql-server, tsql

我已经写了这个查询；我需要帮助分配变量；这是来自其他查询，我该怎么做。

我怎样才能将它们结合在一起？

查询 1

```
Select SUM(Credit)
FROM(SELECT TOP 1  Credit
FROM (SELECT DISTINCT TOP 2 Ref, Credit, PaymentID 
FROM  Payment where  Ref =  '????'  AND PaymentID <= '????' 
ORDER BY PaymentID DESC)
a ORDER BY PaymentID)
b 
```

查询 2

```
Select Ref, PaymentID 
From Payment
Where PaymentDate = '2012-09-23' 
```

所以我需要查询 2 的 Ref 和 PaymentID 并在查询 1 中用作变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:31:22.397

通过使用连接

```
SELECT DISTINCT TOP 2 Ref, Credit, PaymentID      
FROM  Payment 
    inner join
    (Select Ref, PaymentID  From Payment Where PaymentDate = '2012-09-23' ) query2
        on Payment.Ref = query2.Ref and Payment.PaymentID <= query2.PaymentID      
ORDER BY PaymentID DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:31:00.787

声明@yourvar

选择@yourvar = SUM(Credit)....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:36:20.583

您可以将所需的字段声明为变量：

```
DECLARE @REF        varchar(20)
DECLARE @PaymentID  int

SET @REF =  (Select Ref
                From Payment
                Where PaymentDate = '2012-09-23')

SET @PaymentID =    (Select PaymentID
                    From Payment
                    Where PaymentDate = '2012-09-23')

Select  SUM(Credit)
FROM(SELECT TOP 1  Credit
FROM (SELECT DISTINCT TOP 2 Ref, Credit, PaymentID 
FROM  Payment where  Ref IN(@REF)  AND PaymentID <= @PaymentID
ORDER BY PaymentID DESC)
a ORDER BY PaymentID)
b 
```

**编辑：我猜 PaymentID 是一个 INT 而 Ref 是一个 varchar 字段。如果它是其他数据类型，您可以在声明语句中进行更改。**

# c# - WPF 项目找不到 system.web 程序集

> ID：12783816
> 
> 赞同：0
> 
> 时间：2012-10-08T14:30:01.807
> 
> 标签：c#

> **可能重复：**
> [如果在参考列表中找不到 System.Web，如何将其添加为参考？](https://stackoverflow.com/questions/5208862/how-do-i-add-system-web-as-a-reference-if-i-cant-find-it-in-the-list-of-referenc)

我正在开发`wpf`应用程序。

我正在使用一个`system.web`名为`HttpUtility`.

我无法添加参考。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:36:26.607

您可以调整`Target Framework`到 .NET Framework 4。

![在此处输入图像描述](../Images/d96876da6eb388a8ff9b31de3556810e.png)

# android - SlidingMenu 从右侧滑动

> ID：12783817
> 
> 赞同：2
> 
> 时间：2012-10-08T14:30:06.527
> 
> 标签：android, menu, slidingdrawer

我正在使用[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu/)在我的应用程序中加入一个滑动菜单。这就像一个魅力，但我希望菜单从右侧而不是左侧滑动。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:28:55.247

使用以下代码。

```
getSlidingMenu().setMode(SlidingMenu.RIGHT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:09:51.317

你在用滑动抽屉吗？！默认是从下往上。但是如果我们想改变 from 和 to 的方向，比如从上到下或从毡到右，我们需要自定义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T08:31:41.067

Make sure that your activity is extending `SlidingFragmentActivity`.

In `OnCreate`:

```
SlidingMenu menu = getSlidingMenu();
menu.setMode(SlidingMenu.RIGHT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T06:30:10.087

setMode(int) 意味着你必须输入整数。也许你应该使用“1”或“0”。所以像 setMode(1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-02T15:42:47.170

看这个例子

* * *

```
private void initSlidingMenu(Bundle savedInstanceState) {

    getSlidingMenu().setMode(SlidingMenu.LEFT_RIGHT);
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    getSlidingMenu().setShadowWidthRes(R.dimen.shadow_width);
    getSlidingMenu().setShadowDrawable(R.drawable.shadow);
    getSlidingMenu().setBehindOffsetRes(R.dimen.slidingmenu_offset);
    getSlidingMenu().setFadeDegree(0.35f);

    setSlidingActionBarEnabled(false);

    // main_view
    setContentView(R.layout.content_frame);
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.content_frame, new SampleListFragment()).commit();

    // slide from left
    setBehindContentView(R.layout.menu_frame);
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.menu_frame, new SampleListFragment()).commit();

    // slide from right
    getSlidingMenu().setSecondaryMenu(R.layout.menu_frame_two);
    getSlidingMenu().setSecondaryShadowDrawable(R.drawable.shadowright);
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.menu_frame_two, new SampleListFragment())
            .commit();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-03T21:07:16.660

请记住 setMode() 在旧版本的 SlidingMenu 中不可用，因此如果未定义 setMode，请下载并导入最新版本。完成后，您应该只需要更改一些导入并覆盖几个必需的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-31T13:03:48.263

在这里，您可以找到“从右向左滑动的菜单”。

此示例项目包含滑动菜单（应用程序内飞行菜单）的不同演示。

[https://github.com/SimonVT/android-menudrawer/blob/master/library/src/net/simonvt/widget/RightDrawer.java](https://github.com/SimonVT/android-menudrawer/blob/master/library/src/net/simonvt/widget/RightDrawer.java)

我已经尝试过同样的方法，并且完全按照我的意愿工作..!!

希望对你也有帮助。

* * *

很抱歉只提供包含链接的答案，但这次我无能为力。

# java - javascript执行后使用Java下载网页

> ID：12783821
> 
> 赞同：0
> 
> 时间：2012-10-08T14:30:24.897
> 
> 标签：java, file, download

我有一个在 StackOverflow 中似乎没有得到明确回答的问题。我想使用 Java 下载一个页面并从中检索一些数据，以便为我开发的应用程序提供一些值。此页面是一个投注站点，因此它包含用于更改投注值的 javascrit 方法。

为了做一些测试，我使用手动下载了页面`Ctrl-S`，然后我制作了一个程序（使用`FileReader, BufferedReader`等）来检索数据。这非常有效。所以我会制作一个 bash 脚本来执行，以便在每次用户打开我的应用程序时下载页面。

之后，我搜索了以编程方式下载页面的方法（我使用过`Jsoup, URL`，...）。我注意到无法打印 javascript 变量值，因为未执行 javascript 代码。

我想知道的是，如果有某种方法可以以编程方式下载执行的网站（下载 javascript 值的实例），而不必每次在有人打开我的应用程序之前都制作一些 bash 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:37:57.190

试试[HtmlUnit](http://htmlunit.sourceforge.net/)。它用于自动测试，但也应该适合您的目的！

# ios - 正确连接 HUDLayer 到 GameplayLayer

> ID：12783823
> 
> 赞同：0
> 
> 时间：2012-10-08T14:30:34.147
> 
> 标签：ios, cocos2d-iphone, layer, scene

我正在尝试将触摸位置从 GameplayLayer 传递到 HUDLayer，以查看用户是否按下控制按钮。

HudLayer.mm

```
-(void) handleTouchAtLocation:(CGPoint) location {
NSLog(@"Touch passed to HUD");
} 
```

游戏玩法.mm

```
enum {
   kHudLayer = 2;
};

+(CCScene *) scene {
    CCScene *scene = [CCScene node];
    HudLayer *hud = [HudLayer node];
    [scene addChild:hud z:kHudLayer];
    GameplayLayer *layer = [GameplayLayer node];
    [scene addChild:layer];
    return scene;
}

-(void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   for( UITouch *touch in touches ) {
      CGPoint location = [touch locationInView: [touch view]];
      location = [[CCDirector sharedDirector] convertToGL: location];
      [self handTouchAtPoint:(location)];
   }
}

-(void) handleTouchAtPoint:(CGPoint)location {
   NSLog(@"Touch At Point");
   HudLayer *h1 = (HudLayer *)[self.parent getChildWithTag:kHudLayer];
   [h1 handleTouchAtLocation:location];
} 
```

HudLayer.h 在 GameplayLayer.h 中被导入。我收到了“Touch At Point”日志，但由于某种原因它没有进入 HUD 层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:06:07.320

唯一的解释是`self.parent`没有带标签的孩子`kHudLayer`。如果您在 handleTouchAtPoint 中设置断点，您会注意到在该行执行`h1`后它是 nil 。`getChildWithTag`

# java - Java枚举：让FieldName知道它的值

> ID：12783828
> 
> 赞同：1
> 
> 时间：2012-10-08T14:30:41.877
> 
> 标签：java, enums

```
public enum Code {

    E1330("MERCOSUR (SOUTH AMERICAN COMMON MARKET)"),
    E0257("Guinea Biss."),
    E0252("Gambia");

private Code(String value){
   setStringValue(value);
}   
private Code (int value) {
    setIntValue(value);
}

private int intValue;
private String stringValue;

public String getStringValue() {
    return stringValue;
}
public int getIntValue() {
    return intValue;
}

public void setStringValue(String value) {
    this.stringValue = value;
}
public void setIntValue(int value) {
    this.intValue = value;
}
} 
```

如何获取值为“冈比亚”的代码的字段名称？-> 应该是 E0252

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:06:48.403

您可以通过循环搜索它：

```
String val = "Gambia";
String field = "";

for (Code c : Code.values())
    if (c.getStringValue().equals(val)) {
        field = c.name();
        break;
    }

System.out.println(field); 
```

输出：

> E0252

# .net - 在 .net 中表示多级分组的架构

> ID：12783829
> 
> 赞同：1
> 
> 时间：2012-10-08T14:30:45.373
> 
> 标签：.net, architecture, grouping

我有一个来自 Lucene.net 的键值文档列表，我希望能够根据不同的值对它们进行分组，具体取决于用户输入。所以基本上我有以下列表

```
Doc#1 - Weight:10;Size:20;ExpiresIn:90days
Doc#2 - Weight:10;Size:30;ExpiresIn:90days
Doc#3 - Weight:10;Size:20;ExpiresIn:30days
Doc#4 - Weight:10;Size:20;ExpiresIn:30days 
```

我希望用户告诉我：按尺寸分组，然后按重量分组，这将产生以下结果

```
Size: 20
 Weight: 10
  Count: 3
  Doc#1, Doc#3, Doc#4
Size: 30
 Weight: 10
  Count: 1
  Doc#2 
```

但他也可以告诉我在 ExpiresIn 上分组：

```
ExpiresIn: 90Days
 Count: 2
 Doc#1, Doc#2
ExpiresIn: 30Days
 Count: 2
 Doc#3, Doc#4 
```

我的问题并不是真正的速度之一（尽管它肯定会出现在大型数据集的情况下），而是架构之一。我想知道如何代表我拥有的各种实体：

*   包含文档列表（及其计数，微不足道）*的叶类型节点（第一个示例中的叶节点*）
*   一个包含叶子列表的刚刚上叶节点（*第一个示例中的权重*）
*   包含节点列表的 top-to-n-2 节点（*第一个示例中的 size*）

我尝试从一个包含通用节点列表的通用抽象节点开始：但是，一旦我尝试从顶部注入文档，这种方法就会崩溃，因为每个节点都不知道自己的上下文并且没有不知道它应该在他之后创造什么。

```
Public MustInherit Class Node(Of T)
    Implements IEnumerable(Of T)

    Private InnerValue As String
    Private InnerGrouping As String
    Protected InnerData As New List(Of T)

    MustOverride Sub AddGroupingElement(element As LuceneSearchResultsInfo)
End Class

Public Class LeafNode
    Inherits Node(Of LuceneSearchResultsInfo)

    Public Overrides Sub AddGroupingElement(element As LuceneSearchResultsInfo)
        InnerData.Add(element)
    End Sub
End Class

Public Class CommonNode
    Inherits Node(Of CommonNode)

    Public Overrides Sub AddGroupingElement(element As LuceneSearchResultsInfo)
        Dim InterestedNode = InnerData.FirstOrDefault(Function(n) n.Value = element.Field(Grouping))
        If (InterestedNode Is Nothing) Then
            InterestedNode = New CommonNode ' argh, i'm stuck, i don't know the rest of the context
        End If

    End Sub
End Class 
```

我正在考虑存储一个简单的字典，其中将文档的完整路径存储为键。它更简单，但不像专用结构那样令人愉快。所以欢迎任何想法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:06:05.343

在这样的结构中，节点不能插入到任意级别。（您的树是按属性分组的文档列表的表示。在任意级别插入意味着失去属性一致性，就好像您将单个单元格添加到表中，而不是代表具有完整属性集的文档的行。）所以，项目的插入和删除应该由树本身维护。

考虑这样的类结构（C#，因为我不擅长 VB 语法）：

```
class TableAsTree
{
    GroupingNode Root;  

    public void Insert(LuceneSearchResultsInfo sr)
    {
        /* Recursively insert */
        InsertToGroup(Root, sr); /* - root node would store all items */

    }

    public void InsertToGroup(GroupingNode node, LuceneSearchResultsInfo sr)
    {
        node.Documents.Add(sr.Document);
        //sample: Find "Weight" group with key = weight of current doc.
        var childGroup = ChildGroups.First(g => g.GroupKey == sr.Fields(g.GroupFieldName)); /*create if there is no group for the value*/
        InsertToGroup(childGroup, sr);
    }
}

class GroupingNode<TDocument>
{   
    string GroupKey;                    /* Group key value = 1 or 2 or 3 in (Size=1,2,3), no meaning for root */
    string GroupFieldName;              /* Group field name (Size), null for root */
    List<TDocument> Documents;          /* Documents at the level - you can add them for each level, or of the level before the last one */ 
    List<GroupingNode> ChildGroups;
} 
```

使用它，您将能够获取每个分组级别的文档列表。

# html - ListView 在 Metro 应用程序中添加更多项目？

> ID：12783833
> 
> 赞同：1
> 
> 时间：2012-10-08T14:30:59.777
> 
> 标签：html, listview, microsoft-metro, winjs

我有一个 Metro 应用程序，其中有一个 Listview，服务数据包含 100 多个项目。最初，当我在我的页面中加载列表视图时，它必须只显示 8 个项目加上 1 个更多相关项目，然后如果我点击一个更多项目，它需要向我的页面添加另外 9 个项目，并且它必须在我的页面中显示 17 个项目页面并且需要显示更多项目也像这样的流程继续。我应该得到什么来获得我的场景。任何人都可以帮助我。下面我试图给你我的场景。谢谢你。

![在此处输入图像描述](../Images/89b867428bbb11173c760132ce16bb86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:37:18.240

看看这篇文章：[http](http://www.silverlightplayground.org/post/2012/06/10/Metro-Incrementally-load-GridView-and-ListView-with-ISupportIncrementalLoading.aspx) ://www.silverlightplayground.org/post/2012/06/10/Metro-Incrementally-load-GridView-and-ListView-with-ISupportIncrementalLoading.aspx 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:29:54.677

有几个解决方案——所有这些都取决于您想要承担的工作。另外，如果您能提供帮助，我建议您不要有“更多”按钮——这不是最好的用户交互。选项 2 将为您提供最佳体验。

**选项1**

用作您的数据源——使用`WinJS.Binding.List`它，您可以像 JavaScript 一样操作它`Array`（例如`push`，`pop`等）。当您从列表中添加和删除项目时，列表视图将对这些更改做出反应。

完整的细节在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465496.aspx)。

**选项 2**

创建一个 VirtualDataSource 派生，它非常了解您可以请求数据的方式，并且可以为 ListView 提供一致的接口。这使您的 UI 对其布局完全灵活，并请求足够的数据来满足可用空间，同时虚拟化 UI 元素（更好的内存/性能）和数据（确保仅请求用户*需要*的数据。

完整的例子[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh770849.aspx)。

# jquery - 将 pirobox 与新创建的元素绑定

> ID：12783835
> 
> 赞同：1
> 
> 时间：2012-10-08T14:31:00.620
> 
> 标签：jquery, dom, live

我在使用 priroBox 时遇到问题，这是一个类似于 lightbox 的 jquery 插件。问题是 priroBox 无法识别 DOM 中新创建的元素

这是调用 birobox 的代码

```
$().piroBox_ext({
piro_speed : 700,
    bg_alpha : 0.5,
    piro_scroll : true 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:59:59.873

生成链接后添加此代码。

$(document).find('a.pirobox_gal').pirobox_ext();

# php - 按下刷新按钮时，'echo' 函数发布的文本仍然存在。-- PHP

> ID：12783837
> 
> 赞同：-3
> 
> 时间：2012-10-08T14:31:04.550
> 
> 标签：php, html, echo, page-refresh, forms, http-post

```
<?php
    session_start();
    $root = 'root';
    mysql_connect('localhost',$root,'') or die(mysql_error()); 
    mysql_select_db("test_create_database") or die(mysql_error()); 

    $result = mysql_query("SELECT * FROM members");
    $row = mysql_fetch_assoc($result);

    $username="";
    $password="";
    $id="";

    if(isset($_POST["submit"]))
    {
        if(isset($_POST["submit"]) && !empty($_POST["username"]) && !empty($_POST["password"]) && !empty($_POST["id"]))
        {
            if(isset($_POST["username"]) && isset($_POST["password"]) && isset($_POST["id"]))
            {   $username = $row["username"];
                $password = $row["password"];
                $id       = $row["id"];
                if($username == "John" && $password =="1234" && $id =="1")
                {
                    echo "you're in";
                }
                else
                {
                    echo "you're out!";
                }
            }
        }
        elseif (isset($_POST["submit"]) && (empty($_POST["username"]) || empty($_POST["password"]) || empty($_POST["id"])))
        {
                echo "enter all fields please!!!!";
        }

    }
    session_destroy();
?> 
```

如果首先正确填写了所有字段并按下了提交按钮，则“您在”文本会打印到网页上，并且字段中的文本会消失。但是如果我再次刷新页面，即使我调用了 session_destroy() 函数，打印的文本“你在里面”仍然存在。我不明白为什么会话没有被破坏。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:56:29.840

关于`session_start()`和`session_destroy()`不影响 POST 变量的位。正如 BugFinder 所指出的，刷新页面通常会重新提交您刚刚提交的任何数据。这就是为什么再次显示“你在”消息的原因。

防止这种行为的一种方法是在处理提交的数据后进行重定向。然后，您可以设置一个会话变量来跟踪您仍需要显示的消息（或者，如果用户已登录或未登录）。

您的代码将如下所示：

```
<?php
    session_start();
    $root = 'root';
    mysql_connect('localhost',$root,'') or die(mysql_error()); 
    mysql_select_db("test_create_database") or die(mysql_error()); 

    $result = mysql_query("SELECT * FROM members");
    $row = mysql_fetch_assoc($result);

    $username="";
    $password="";
    $id="";

    if(isset($_POST["submit"]))
    {
        if(isset($_POST["submit"]) && !empty($_POST["username"]) && !empty($_POST["password"]) && !empty($_POST["id"]))
        {
            if(isset($_POST["username"]) && isset($_POST["password"]) && isset($_POST["id"]))
            {   $username = $row["username"];
                $password = $row["password"];
                $id       = $row["id"];
                if($username == "John" && $password =="1234" && $id =="1")
                {
                    //do stuff
                    $_SESSION['message'] = "you're in";
                }
                else
                {
                    $_SESSION['message'] = "you're out!";
                }
            }
        }
        elseif (isset($_POST["submit"]) && (empty($_POST["username"]) || empty($_POST["password"]) || empty($_POST["id"])))
        {
                $_SESSION['message'] = "enter all fields please!!!!";
        }
        $selfLink = $_SERVER['PHP_SELF'];
        if (isset($_SERVER['QUERY_STRING'])) { 
            $selfLink .= "?" . $_SERVER['QUERY_STRING']; 
        }
        header('location: '.$selfLink);
        exit;
    }

    if (isset($_SESSION['message'])) {
        echo $_SESSION['message'];
        unset($_SESSION['message']);
    }
?> 
```

请注意，重定向到页面本身似乎有点强制（`$_SERVER['QUERY_STRING']`用于获取当前页面的位置）。如果您知道文件名或者在处理表单输入后重定向到不同的页面，它会更直观地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:36:51.927

isset($_POST["submit"]) 在 elseif 中删除此检查。

提交表单并显式刷新页面 $_POST["submit"] 后，如果您手动转到该页面，则不会设置 $_POST["submit"]。

# date - Solr 3.6：根据季节/月份更改日期提升 - 有可能吗？

> ID：12783839
> 
> 赞同：2
> 
> 时间：2012-10-08T14:31:20.557
> 
> 标签：date, solr

我正在为我工​​作的公司运行一种新的 solr 3.6 主/从场景，并为更新的文档（所有众所周知的 recip-stuff）提供标准提升，一切正常。我自己确实有几年的 solr/lucene 经验，所以我通常知道如何设置东西并让它们走上正轨......但最近有一个新的客户要求，文档将被动态提升根据他们创造的“月”，年排在第二位！所以，每当我在二月份进行搜索时，繁荣，二月份出生的文件首先出现......

其背后的原因是，每当我在夏季、冬季或其他任何时间使用搜索时，都会优先显示所有有效的文章（例如，关于“夏季家居装修”或“圣诞蛋糕”）。

我将如何实施这种行为？有什么想法、建议吗？我现在有点迷茫:) 我可以想到一些黑魔法索引额外信息的东西，但考虑到通常的基于日期的提升，我不知道如何最好地处理这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:20:21.977

您可以为月份和季节设置单独的字段，并为此字段提供更高的提升。这可以在索引时完成。

因此，当用户搜索此类短语时，这些文档会排在首位。

# java - 如何以编程方式重定向到异常错误页面？

> ID：12783840
> 
> 赞同：0
> 
> 时间：2012-10-08T14:31:20.287
> 
> 标签：java, exception, jakarta-ee

如何重定向到以`web.xml`编程方式定义的错误页面？

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/error.xhtml</location>
</error-page> 
```

我该如何`/error.xhtml`通过`FacesContext`？

有时异常可能发生在被覆盖的方法中，我无法抛出发生的异常，需要手动处理异常，例如自己重定向到错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T14:55:38.553

可以使用 Omnifaces 库检索它。

从文档中：

`This configuration enum parses the /WEB-INF/web.xml and all /META-INF/web-fragment files found in the classpath and offers methods to obtain information from them which is not available by the standard Servlet API.`

[http://showcase.omnifaces.org/utils/WebXml](http://showcase.omnifaces.org/utils/WebXml)

# java - 2D空间中点与线的碰撞

> ID：12783844
> 
> 赞同：2
> 
> 时间：2012-10-08T14:31:25.080
> 
> 标签：java, android, line, collision

所以我正在尝试在android上制作我的第一款游戏。问题是我有一个小的移动球，我希望它从我画的线反弹。为此，我需要确定球的 x,y 是否也是线中一个点的坐标。

我试图实现这些关于线条的方程

x=a1 + t*u1

y=a2 + t*u2 => (x-a1)/u1=(y-a2)/u2 （t=t 如果点在线，则必须为）

其中 x 和 y 是我正在测试的坐标，dot[a1,a2] 是线上的一个点，u(u1,u2) 是线的向量。

继承人的代码：

```
 public boolean Collided()
   {
       float u1 =Math.abs(Math.round(begin_X)-Math.round(end_X));
       float u2 =Math.abs(Math.round(begin_Y)-Math.round(end_Y));          
       float t_x =Math.round((elect_X - begin_X)/u1);
       float t_y =Math.round((elect_Y - begin_Y)/u2);
       if(t_x==t_y)
       {
           return true;
       }
       else
       {
           return false;
       }       
   } 
```

点 [begin_X,end_X] 和 [begin_Y,end_Y] 是直线的两个点，[elect_X,elect_Y] 是球的坐标

理论上它应该有效，但实际上球大部分时间只是直接穿过线或弹到其他不应该的地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:42:38.577

我不确定您的代码在做什么，但是看起来很奇怪，您对数据的 x 坐标进行了一些操作，然后在 y 上进行了一些操作，最后您希望它们相等；

去尝试这里[点和线段之间的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)，然后如果距离== 0（或小于等于你的球的半径）你会发生碰撞

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:12:14.000

问题在于您正在测试点是否“击中”了您希望它反弹的线。我假设您每帧都会少量增加点的位置。

假设您的点位于 [1,1]，您的线从 [0,0] 到 [5,0]，您的点的速度为每秒 1 个单位，方向为 [-1,0]。我假设您根据每帧的时间计算增量以允许更平滑的动画。

发生的情况如下：

1.  点在 [1,1]
2.  每帧时间 = 0,7
3.  点移动到 [0.3,0]
4.  测试交集 = 假
5.  --- 下一帧 ---
6.  点在 [0.3,0]
7.  每帧时间 = 0.5（通常每帧不同）
8.  点移动到 [0.2,0]
9.  测试交集 = 假

所以测试说没有交叉点，因为你测试了你的点的离散位置。

正如 Aki Suihkonen 建议的那样，您要测试由最后一个位置 + 当前位置形成的线与您希望点碰撞的线之间的线交点。

java.awt.geom.Line2D.linesIntersect(double X1, double Y1, double X2, double Y2, double X3, double Y3, double X4, double Y4) 允许您轻松检查这些交叉点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:35:07.387

你的数学是好的，但你的代码不是。

使用一般线方程更简单，`y = y1 + a(x - x1)`其中`a = (y2 - y1) / ( x2 - x1)`, 存在`(x1,y1)`和`(x2,y2)`到线的点。

当球在点时，要让球与线的距离`(bx,by)`：

```
double a = (y2 - y1) / (x2 - x1);
double distance = (by - y1 - a * (bx - x1)) * Math.cos(Math.atan(a)); 
```

现在您可以比较是否`Math.abs(distance)`低于特定值（即球直径）以确认碰撞。

注意：这只适用于非垂直线。如果您有一条垂直线，请使用：

```
double distance = bx - x1; 
```

祝你好运。

# iphone - iPhone 4S 上的数字音频处理

> ID：12783855
> 
> 赞同：-3
> 
> 时间：2012-10-08T14:32:06.360
> 
> 标签：iphone, audio, compatibility, signal-processing, iphone-4

我们一直在这里进行一些数字音频信号处理，最近我们开始担心 iPhone 4S 的行为可能不像 iPhone 4 那样。

例如：我们有一个应用程序可以收听特定的声音并对其进行处理。然而，声音产生的数据虽然在 iPhone 4 中相当稳定，但在 iPhone 4S 中变化很大。即使每次都是相同的声音，但数据模式似乎是随机不同的。

另一个（也许是）重要信息：从我的测试中可以看出，到目前为止，iPhone 4S 在 20.5 kHz 以上的频率上似乎不能很好地工作（iPhone 4 在 21.5 kHz 之前工作得很好）。

我的问题是：有没有人已经经历过这样的事情？iPhone 4 和 iPhone 4S 的录音系统有那么不同吗？这是硬件情况和/或应该修改软件以支持它吗？

我知道这些可能不是正确的问题，但我真的不知道现在该去哪里，才能做出某种诊断。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:36:05.983

这两款 iPhone 型号的规格仅规定了高达 20 kHz 的频率响应。以上任何内容可能会在不另行通知的情况下发生更改，不仅在型号之间，而且如果 Apple 从多个供应商处采购麦克风，也可能针对给定型号。此外，相位和频率响应在 20 kHz 限制和一半采样率之间的滚降行为可能会有很大差异，具体取决于抗混叠滤波器的类型和顺序。

频率响应也可能因声音的方向和麦克风的方向性而异，这也可能因麦克风和外壳而异。

# vb.net - vb.net 中的 GPU 处理

> ID：12783857
> 
> 赞同：3
> 
> 时间：2012-10-08T14:32:12.843
> 
> 标签：vb.net, gpgpu, gpu

我有一个需要大约 24 小时才能运行的程序。这一切都是用 VB.net 编写的，大约有 2000 行。它已经是多线程的，而且效果很好（经过一些汗水和眼泪）。我通常使用 10 个线程运行进程，但我想增加它以减少处理时间，这就是使用 GPU 的地方。我已经在谷歌上搜索了我能想到的所有相关信息，但没有运气。

我希望的是一个 vb.net 项目的基本示例，它执行一些常规操作，然后将一些线程发送到 GPU 进行处理。理想情况下，我不想为此付费。所以像：

```
'Do some initial processing eg.
dim x as integer
dim y as integer
dim z as integer
x=int(textbox1.text)
y=int(textbox2.text)
z=x*y
'Do some multi-threaded operations on the gpu eg.
'show some output to the user once this has finished. 
```

任何帮助或链接将不胜感激。我用 c++ 和其他语言阅读了很多关于它的文章，但我在理解其他语言方面很垃圾！

谢谢大家！

弗雷泽

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-08T00:31:31.340

VB.NET 编译器不会编译到 GPU 上，它会编译成一种中间语言 (IL)，然后在运行时针对目标体系结构进行即时编译 (JITed)。目前仅支持 x86、x64 和 ARM 目标。CUDAfy（见下文）获取 IL 并将其转换为 CUDA C 代码。反过来，它使用 NVCC 编译以生成 GPU 可以执行的代码。请注意，这意味着您仅限于 NVidia GPU，因为 AMD 不支持 CUDA。

还有其他项目采用了相同的方法，例如[Copperhead](https://developer.nvidia.com/content/copperhead-data-parallel-python)中的 Python 到 CUDA 转换器。

[CUDAfy](http://cudafy.codeplex.com/) - CUDA API 之上的包装器，带有用于 FFT 等的附加库。还有一个[商业版本](http://www.hybriddsp.com/Products.aspx)。这实际上确实

> CUDAfy 翻译器使用 SharpDevelop 的反编译器 ILSpy 作为基础，翻译器将 .NET 代码转换为 CUDA C。

还有其他项目允许您使用来自 .NET 语言的 GPU。例如：

[NMath](http://www.centerspace.net/blog/nmath-premium/announcing-nmath-premium-gpu-accelerated-math-libraries-for-net/) - 一组可从 .NET 使用且支持 GPU 的数学库。

可能还有其他的，但这些似乎是主要的。如果您决定使用 CUDAfy，那么您仍然需要花一些时间来充分了解 CUDA 以及 GPU 如何工作以移植您的算法以适应 GPU 数据并行模型。除非它是可以使用数学库之一开箱即用的东西。

重要的是要意识到从 .NET 语言访问 GPU 仍然会影响性能。您必须支付将数据从 .NET 托管运行时移动（编组）到本机运行时的成本。这里的开销在很大程度上不仅取决于数据的大小，还取决于数据的类型，以及是否可以在不进行转换的情况下对其进行封送。这不包括将数据从 CPU 移动到 GPU 等的成本。

# c# - 如何获取数组中某个范围内的数字数量？

> ID：12783858
> 
> 赞同：0
> 
> 时间：2012-10-08T14:32:13.507
> 
> 标签：c#, .net, opencv, emgucv

我用数字填充了这个数组：

```
Image<Gray, Byte> imgHue = channels[0]; 
```

我需要以某种方式获取数组中 100-105 范围内的数字数量。

知道如何实施吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:34:14.407

```
someArray.Count(x => x >= 100 && x <= 105) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:34:47.603

这取决于什么类型是`Image` *Value*（第二个参数），**如果**是`IEnumerable<Byte>`，你可以这样做：

```
var rangeofBytes = imgHue.Values.Count(b => b >= 100 && b <= 105) 
```

# ruby-on-rails - Railtie：如何访问初始化程序和库加载钩子？

> ID：12783860
> 
> 赞同：4
> 
> 时间：2012-10-08T14:32:17.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, ruby-on-rails-3.2, railtie

我正在为我的 Rails 应用程序开发一个 gem，它通过 Railtie 加载到其中。我基本上是以旧的 Rails 应用程序样式将模型插入到库和一些初始化程序中。我主要担心的是不知道在整个 Rails 应用程序加载逻辑中我最好将它们插入到哪里。我对它的要求是：gem 初始化程序必须在应用程序初始化程序之前加载，与库相同，初始化程序访问 lib 信息。在 Rails 应用程序工作流程中，它以某种方式工作。我的短期解决方法如下：

```
module Gemname
  def self.initialize_railtie
    ActiveSupport.on_load :active_record do
      require 'gemname/lib'
      require 'gemname/initializers'
    end
  end
  class Railtie < Rails::Railtie
  initializer 'gemname.insert_into_app' do
    Gemfile.initialize_railtie
  end
end 
```

所以这样，我确定这些库是在初始化程序之前加载的。只是我很确定有更好的方法可以做到这一点，即访问一些 railtie 钩子，它允许我用应用程序库加载我的库，用应用程序初始化程序加载初始化程序。只是我似乎无法找到它们。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T22:36:23.807

我想你想要的是`config.after_initialize`。根据[这里](http://api.rubyonrails.org/classes/Rails/Railtie/Configuration.html#method-i-after_initialize)：

> 要运行的最后一个可配置块。在框架初始化后调用。

[在](http://guides.rubyonrails.org/configuring.html#initialization-events)这里：

> after_initialize：在应用程序初始化之后直接运行，但在应用程序初始化程序运行之前。

所以你会有：

```
module Gemname
  class MyCoolRailtie < ::Rails::Railtie
    config.after_initialize do
      require 'gemname/lib'
      require 'gemname/initializers'
    end
  end
end 
```

# matlab - Matlab使用interp1查找索引？

> ID：12783862
> 
> 赞同：3
> 
> 时间：2012-10-08T14:32:20.067
> 
> 标签：matlab, math, numerical-methods

我有一个 Fa 数组，其中包含我从函数中找到的值。有没有办法`interp1`在 Matlab 中使用函数来查找特定值出现的索引？我找到了一些教程，通过了解相应的索引值`interp1`，我可以在数组中找到一个特定的值。`interp1`

[来自http://www.mathworks.com/help/matlab/ref/interp1.html](http://www.mathworks.com/help/matlab/ref/interp1.html)的示例：

这里有两个向量代表从 1900 年到 1990 年的人口普查年份以及相应的美国人口（以百万计）。

```
t = 1900:10:1990;
p = [75.995  91.972  105.711  123.203  131.669...
    150.697  179.323  203.212  226.505  249.633]; 
```

该表达式`interp1(t,p,1975)`在人口普查数据中插值以估计 1975 年的人口。结果是

```
ans =
    214.8585 
```

- 但我想找到**214.8585**`t`的值。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:36:58.920

从某种意义上说，你想找到一个函数的根——

`f(x)-val`

首先，可能有几个答案。其次，由于该函数是分段线性的，您可以通过求解相关的线性方程来检查每个段。

例如，假设您有以下数据：

```
t = 1900:10:1990;
p = [75.995  91.972  105.711  123.203  131.669...
    150.697  179.323  70.212  226.505  249.633]; 
```

你想找到值 140

```
val = 140;    
figure;plot(t,p);hold on;
plot( [min(t),max(t)], [val val],'r'); 
```

![在此处输入图像描述](../Images/7c21e11f6884bca65030c8fd79ed894a.png)

您应该首先减去`val`from的值`p`，

```
p1 = p - val; 
```

现在您只需要`p1`符号更改的段，或者从`+`-> `-`，反之亦然。

```
segments = abs(diff(sign(p1)==1)); 
```

在这些段中的每一个中，您都可以求解相关的线性方程`a*x+b==0`，并找到根。那是你价值的指数。

```
for i=1:numel(segments)
    x(1) = t(segments(i));
    x(2) = t(segments(i)+1);
    y(1) = p1(segments(i));
    y(2) = p1(segments(i)+1);
    m = (y(2)-y(1))/(x(2)-x(1));
    n = y(2) - m * x(2);
    index = -n/m;
    scatter(index, val ,'g');
end 
```

结果如下：

![在此处输入图像描述](../Images/4693c271ce57bdf12628efd42effc8f9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-12T07:36:22.627

[Andrey 的解决方案](https://stackoverflow.com/a/12783938/1714410)原则上有效，但此处提供的代码无效。问题在于段的定义，它产生一个 0 和 1 的向量，然后对“t（segments（i））”的调用导致错误（我试图复制和粘贴代码 - 我希望我做到了不会在那个简单的任务中失败）。

我对段的定义做了一个小改动。它可能会做得更优雅。这里是：

```
t = 1900:10:1990;
p = [75.995  91.972  105.711  123.203  131.669...
    150.697  179.323  70.212  226.505  249.633];

val = 140;    
figure;plot(t,p,'.-');hold on;
plot( [min(t),max(t)], [val val],'r');

p1 = p - val;

tn = 1:length(t);
segments = tn([abs(diff(sign(p1)==1)) 0].*tn>0);

for i=1:numel(segments)
    x(1) = t(segments(i));
    x(2) = t(segments(i)+1);
    y(1) = p1(segments(i));
    y(2) = p1(segments(i)+1);
    m = (y(2)-y(1))/(x(2)-x(1));
    n = y(2) - m * x(2);
    index = -n/m;
    scatter(index, val ,'g');
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:38:13.960

可以`Fa`直接在里面搜索值：

```
idx = Fa==value_to_find; 
```

查找索引使用`find`函数：

```
find(Fa==value_to_find); 
```

当然，这仅在`value_to_find`中存在时才有效`Fa`。但据我了解，这就是你想要的。你不需要`interp`那个。

另一方面，如果该值可能不存在于 中`Fa`，但`Fa`已排序，则可以搜索大于 的值`value_to_find`并获取第一个此类索引：

```
find(Fa>=value_to_find,1); 
```

如果您的问题比这更复杂，请查看 Andreys 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:52:23.890

安德烈在上面给出了最一般情况的答案，我同意。对于您所说的示例，一个简单的特定解决方案是：

```
interp1(p,t,214.8585) 
```

在这种情况下，您正在求解给定人口已知的年份。

当有多个解决方案时，这种方法将不起作用。如果你用安德烈的价值观来尝试这个，你只会得到问题的第一个解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T14:43:30.677

将整个函数内插到更高的精度。然后搜索。

```
t = 1900:10:1990;
p = [75.995  91.972  105.711  123.203  131.669...
    150.697  179.323  203.212  226.505  249.633];

precision = 0.5;
ti = 1900:precision:1990;

pi = interp1(t,p,ti); 
```

现在 pi 每半年保存一次所有 pi 值。假设值总是增加，您可以通过`max(ti(pi < x))`where找到年份`x = 214.8585`。这里 pi < x 创建了一个逻辑向量，用于过滤 ti 以仅提供 p 小于 x 的年份。然后 max() 用于获取最近的一年，如果 p 总是增加的假设成立，这也将最接近 x。**

# hibernate - QueryBuilder 中的 Lucene 条件 AND

> ID：12783863
> 
> 赞同：3
> 
> 时间：2012-10-08T14:32:23.813
> 
> 标签：hibernate, search, lucene, hibernate-search, query-builder

个人我在查询中遇到问题，想将 AND 子句放在一个术语中，但是我没有得到并尝试搜索但没有成功。

按照示例并返回查询（我正在使用我的 indece 测试 Luke 条件，结果不同）

```
 builder.bool()  
    .should(builder  
            .bool()  
            .should(builder.keyword()  
                    .onFields("campo01", "campo02", "campo03")  
                    .matching(query).createQuery())  
            .should(builder.keyword().wildcard().onField("campo01")  
                    .matching("*" + query + "*").createQuery())  
            .should(builder.keyword().wildcard().onField("campo02")  
                    .matching("*" + query + "*").createQuery())  
            .should(builder.keyword().wildcard().onField("campo03")  
                    .matching("*" + query + "*").createQuery()).createQuery())  
    .must(builder.keyword().onField("campo04").matching(0).createQuery())  
    .createQuery(); 
```

此代码生成以下查询 lucene：

```
(((campo01:teste campo02:test campo03:teste) campo01:*teste* campo02*teste* campo03:*teste*) +campo04:0) 
```

但是，此查询返回的结果比预期的要大。与 Luke 一起进行测试时，发现 Must 并不理想，需要将 AND 放在适当的位置。

```
 (((campo01:teste campo02:test campo03:teste) campo01:*teste* campo02*teste* campo03:*teste*) AND campo04:0) 
```

因此结果是正确的，但是我无法进行构建查询来创建此结果。

任何人都可以帮助或有任何问题。我真正想要的是在特定字段中放置一个 AND 条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:53:58.817

使用“必须”和“应该”从句是正确的想法。您可以构建一个查询，使用它们有效地创建逻辑 AND。你错过了一件事。AND的结构，例如：

```
query1 AND query2 
```

将会：

```
+query1 +query2 
```

您的示例在第一个查询中错过了“+”或 Must 子句，因此虽然第二个是必需的，但第一个不是，尽管它会影响结果权重。

所以，具体来说，你想要的是

```
builder.bool()  
.must(builder  
        .bool()  
        .should(builder.keyword()  
                .onFields("campo01", "campo02", "campo03")  
                .matching(query).createQuery())  
        .should(builder.keyword().wildcard().onField("campo01")  
                .matching("*" + query + "*").createQuery())  
        .should(builder.keyword().wildcard().onField("campo02")  
                .matching("*" + query + "*").createQuery())  
        .should(builder.keyword().wildcard().onField("campo03")  
                .matching("*" + query + "*").createQuery()).createQuery())  
.must(builder.keyword().onField("campo04").matching(0).createQuery())  
.createQuery(); 
```

或者...

```
(+((campo01:teste campo02:test campo03:teste) campo01:*teste* campo02*teste* campo03:*teste*) +campo04:0) 
```

# stored-procedures - 带有空间数据的实体框架 5 函数导入

> ID：12783867
> 
> 赞同：0
> 
> 时间：2012-10-08T14:32:44.410
> 
> 标签：stored-procedures, .net-4.5, entity-framework-5

我正在使用 EF5 从现有数据库创建一个模型，该模型包含一个包含地理列的表。桌子的模型工作得很好。但是，如果我尝试映射一个仅选择地理列的存储过程，我无法在函数导入中映射该列。在列信息中，EDM 类型设置为“不支持”。但是，该模型将地理类型映射为参数而没有问题。

IDE是VS2012 Premium，框架.NET4.5

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:20:52.157

我最终通过函数导入创建了没有我的地理列的复杂类型，然后添加了地理类型的标量属性。虽然它不会自动为我映射列。因此，我使用 XML 编辑器查看了 EDMX，寻找函数的映射详细信息，并手动添加了映射信息。之后一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:47:55.463

好的，所以我自己找到了一种方法来回答这个问题。对于任何有兴趣的人：我已经在 SP 产生的复杂类型上手动创建了 Geography 类型的新标量属性。现在不知何故价值映射。在我看来，编辑器无法创建属性，但映射现有属性没有问题。对我来说，这似乎是编辑器中的一个错误。

也看看这个线程：[Build error when using VS 11, .NET 4.5 and Entity Framework](https://stackoverflow.com/questions/9792558/build-error-when-using-vs-11-net-4-5-and-entity-framework)

# session - 经典 ASP：cookie 中的多个 ASPSESSIONID

> ID：12783878
> 
> 赞同：13
> 
> 时间：2012-10-08T14:33:06.843
> 
> 标签：session, iis, cookies, asp-classic, iis-6

我有一个经典的 asp 页面的问题，我只是无法解决它，因为 3 天。

该页面正在使用 Sessions - 有时会发生 ASPSESSIONID cookie 在 Request.ServerVariables("HTTP_COOKIE") 中设置了两次。这会导致 ASP 页面在刷新页面时在两个会话之间跳转。

我编写了一个测试页面，它输出当前的 SessionId、服务器软件和 HTTP_COOKIE 值。

样本输出：

* * *

会话 ID：308542840

会话超时：20 分钟

服务器软件：Microsoft-IIS/6.0

HTTP_COOKIE：ASPSESSIONIDQCBATRAD=MBHHDGCBGGBJBMAEGLDAJLGF；ASPSESSIONIDQCCDTTCB=PGHPDGCBPLKALGGKIPOFIGDM

* * *

为什么有两个 ASPSESSIONID？当我刷新页面时，它会随机输出两个会话 ID 之一。

这是显示 IE9 中的问题的截屏视频：http: [//prinz-alexander.at/asp_test.avi](http://prinz-alexander.at/asp_test.avi)

这个错误在ie8和ie9中经常出现。

只需执行以下操作即可重新创建问题：

1.  完全关闭IE8或IE9
2.  启动 IE8 或 IE9 并打开[http://www.pfiffikus.at/pfiffikus/tests/](http://www.pfiffikus.at/pfiffikus/tests/)
3.  页面加载后立即刷新页面多次

如果您重复此步骤，那么会随机（并非总是）使用两个不同的 ASPSESSIONID 填充 HTTP_COOKIE。

asp 测试文件仅输出提及的值，源代码中没有发生任何其他事情。

这是asp测试文件的代码：

```
<% If trim(Session("test_val")) = "" Then
     Dim my_num
     Randomize
     number = Int((rnd*1000))+1
     Session("test_val") = number
   End If
%>

<b>Session ID:</b>
<% response.write(Session.SessionId) %><br /><br />

<b>Session("test_val"):</b>
<% response.write(Session("test_val")) %><br /><br />

<b>Session Timeout:</b>
<% response.write(Session.Timeout) %> minutes<br /><br />

<b>Server Software:</b>
<% response.write(Request.ServerVariables("SERVER_SOFTWARE")) %><br /> <br />

<b>HTTP_COOKIE:</b> <% response.write(Request.ServerVariables("HTTP_COOKIE")) %> 
```

如何避免 cookie 中出现多个 ASPSESSIONId？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T15:00:50.720

我能够使用 Javascript 删除这些 cookie。

只需将下一个脚本添加到登录页面的末尾即可。这将在用户登录网站之前删除所有“ASPSESSIONIDXXXXXXX”cookie：

```
<script type="text/javascript">
    //Clear any session cookies
    (function(){
        var cookiesArr = document.cookie.split("; ");
        for (var i = 0; i < cookiesArr.length; i++) {
            var cItem = cookiesArr[i].split("=");
            if (cItem.length > 0 && cItem[0].indexOf("ASPSESSIONID") == 0) {
                deleteCookie(cItem[0]);
            }
        }

        function deleteCookie(name) {
            var expDate = new Date();
            expDate.setTime(expDate.getTime() - 86400000); //-1 day
            var value = "; expires=" + expDate.toGMTString() + ";path=/";
            document.cookie = name + "=" + value;
        }
    })();
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-25T15:14:46.850

您可以使用 URL Rewrite mod 在设置会话 cookie 时对其进行重命名，并使用入站重写规则将其再次还原。当会话名称 ID 更改时会出现多个会话 cookie，但是通过为会话 cookie 指定一个名称并将 ID 包含在 cookie 本身中，一次只会有一个会话 cookie。

在 web.config 中使用这些重写规则来更改

```
ASPSESSIONIDXXXXXXXX=YYYYYYYYYYYYYYYYYYYYYYYY 
```

进入

```
session=XXXXXXXX/YYYYYYYYYYYYYYYYYYYYYYYY 
```

然后在入站请求中再次将其还原（因此它仍然可以被 IIS 读取）：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <rewrite>
        <rules>
            <clear />
            <!-- "HTTP_COOKIE" must be added to the "allowed server variables" in IIS under URLRewrite -->
            <rule name="session cookie revert">
                <match url="(.*)" />
                <conditions>
                    <add input="{HTTP_COOKIE}" pattern="(.*)session=([0-9a-zA-Z]+)\/([0-9a-zA-Z]+)(.*)" />
                </conditions>
                <serverVariables>
                    <set name="HTTP_COOKIE" value="{C:1}ASPSESSIONID{C:2}={C:3}{C:4}" />
                </serverVariables>
                <action type="None" />
            </rule>
        </rules>
        <outboundRules>
            <rule name="session cookie rewrite">
                <match serverVariable="RESPONSE_Set_Cookie" pattern="ASPSESSIONID([0-9a-zA-Z]+)=([0-9a-zA-Z]+)(.*)" negate="false" />
                <!-- Set the session cookie as HttpOnly during the rewrite. Classic ASP doesn't 
                do this by default, but it's important for preventing XSS cookie stealing. 
                You could also add "; Secure" if you only want the session cookie to be passed 
                over an SSL connection, although this also means the cookie can only be set over 
                an SSL connection too, which could be a problem when testing on localhost. -->
                <action type="Rewrite" value="session={R:1}/{R:2}{R:3}; HttpOnly" />
            </rule>     
        </outboundRules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T19:30:46.903

这个问题也困扰了我很久。我无法解决它。

这与浏览器无关。我的 Chrome、Firefox、IE 都有这个问题。

有时我可以在一页中看到 20 多个 ASPSESSIONIDXXXX cookie。

最后，我必须使用 javascript 清除旧的 ASPSESSIONID*** 并保留最新的。

```
function clearASPSESSIONID(){
    var cks = document.cookie.match(/\b(ASPSESSIONID[A-Z]+)(?==)/g),
        lskey = 'oldASPSESSIONID-'+location.protocol+'//'+location.host,
        old = window.localStorage ? localStorage.getItem(lskey) : '',
        keep, i;
    for(i=0;i<cks.length;i++){
        if((old && old.indexOf(cks[i])<0) || i==cks.length-1){
            keep = cks[i];
        }
    }
    for(i=0;i<cks.length;i++){
        if(keep != cks[i]){
            document.cookie = cks[i] + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }
    }
    if(window.localStorage){
        localStorage.setItem(lskey, keep ? keep : '');
    }
}
clearASPSESSIONID(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-05T11:24:13.047

转到应用程序池“高级设置”并将“最大工作进程”设置为 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T00:06:13.510

也许稍后但可能有用，因为没有可接受的答案。

在应用程序池中的回收选项中，检查您是否没有过早回收您的应用程序，否则您将在每个重新生成的新应用程序中以 ASPSESSIONIDXXXXXXX 结束。

有几种回收条件。我错误地将“最小请求数”设置为 1，并为每个请求获取了一个 ASPSESSIONID

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-01T12:25:58.073

在 global.asa 文件中：

```
Sub Session_OnStart

    Dim cookie, cookies : cookies = Split(Request.ServerVariables("HTTP_COOKIE"),";")
    For Each cookie In cookies
        cookie = Trim(Split(cookie,"=")(0))
        If Left(cookie,12) = "ASPSESSIONID" Then
            Response.AddHeader "Set-Cookie", cookie&"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/"
        End If
    Next

End Sub 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-09T08:51:07.193

您已在用户的会话中分配了一个值。尝试像这样获取您的会话并为每个用户分配不同的唯一值

```
<% 
Session("test") = "test value" 
a=Session("test")
response.Write(a)
%> 
```

# jquery - flexslider 图像滑块：段落文本仅在第一张幻灯片上不显示

> ID：12783879
> 
> 赞同：0
> 
> 时间：2012-10-08T14:33:09.063
> 
> 标签：jquery, flexslider

我正在构建一个使用 flexslider 作为主页图像滑块的站点。

它运行良好，但在 IE7 中进行测试时，第一张幻灯片的段落文本没有出现。当 h2 和按钮出现时，这真的很奇怪，下面所有幻灯片的全部内容也是如此。

我认为这是由 flexslider 引起的问题，但我不确定如何解决它。

这是该网站的链接：[https ://mariaridge.myshopify.com/](https://mariaridge.myshopify.com/)

任何想法将不胜感激！

提前致谢，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:21:58.513

我只是将第一帧移到了起点，现在它可以工作了：

```
this.dom.find('.flexslider').flexslider({
// your options
startAt: -1
}); 
```

使用正数它不起作用，但是有了这个黑客它可以正确启动

# android - 销毁后如何调试活动启动？

> ID：12783880
> 
> 赞同：2
> 
> 时间：2012-10-08T14:33:08.590
> 
> 标签：android, debugging, android-activity

我想调试这样的事件，例如在用户从活动中导航离开（例如返回或主页）然后返回后恢复以前的活动状态。通常，活动（和整个应用程序）不会在这两个事件之间被 Android 破坏。但是在某些情况下，活动被破坏会导致活动恢复时出现未捕获的异常（例如，由于未保存的字段）。我想一步一步调试这样的时刻。

我能够以这种方式调整 Android 系统，当用户离开它时它会破坏每个活动（感谢 VMware 中的自定义 android 构建）。但是当活动被破坏时，Eclipse 调试会话也被终止并且当用户导航回活动时 - 我没有任何访问调试器的权限。

问题是我如何才能在 onDialogPrepare()、onCrete() 等不同的地方获得对调试器和断点的访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:35:44.863

如果您的活动完成并调用了 onDestroy()，那么下次您打开该活动时，它将完全重新创建。所以你可以调试 onCreate 方法！

# android - Android：修复警告在 Eclipse res/values 中仍然可见

> ID：12783882
> 
> 赞同：0
> 
> 时间：2012-10-08T14:33:14.173
> 
> 标签：android, eclipse, android-lint

我刚刚修改了我的`res/values-folder`, 因为那里没有使用值，因此有一个警告告诉我。

现在我“清理”了未使用的，警告仍然可见。首先我重建了几次项目，重新启动了eclipse，最后重新启动了我的电脑，但似乎没有任何影响。

例如我的`colors.xml`文件

![在此处输入图像描述](../Images/d65fcc91593b1a9a1c56ca82af3132af.png)

如您所见，不再有任何价值“背景”。与声称未使用值“black”的其他警告相同，对于 strings.xml 中的大约 20 个值也是如此。有什么技巧可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:04:58.163

升级到最新的 ADT。仅在 ADT 20.0.2 中修复了一些 lint 处理问题，这些问题以前会导致项目中残留错误警告/错误。另外检查项目菜单中的“自动构建”是否被选中，因为那些未使用的资源警告只能在项目构建时更新，而不是在保存 XML 编辑器时（而许多其他警告在保存时更新）。

# c# - 如何消除在 VC++ 中使用 C# DLL 的错误

> ID：12783883
> 
> 赞同：0
> 
> 时间：2012-10-08T14:33:15.253
> 
> 标签：c#, visual-studio-2010, visual-c++, dll, dllimport

这是我的接口和名为 DataAccess.cs 的类

```
 using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.Data;
    using System.Diagnostics;
    using System.Data.Common;
    using System.Linq;
    using Microsoft.Practices.EnterpriseLibrary.Data;
    using IISWebFrameworkDAAB.BusinessLayer;
    using IISWebFrameworkDAAB.DataAccessLayer;
    using Framework.Data;
    using System.Text;

    namespace IISWebFrameworkDAAB.DataAccessLayer
    {
       [Guid("76f20d76-b030-4487-a315-2d727dedd4ec")]
        public interface DataAccessInterface
        {
            #region "Methods"

     void InsertSampleTable(Byte varTinyInt, Int32 varInt, String varText, String varVarchar, Boolean varBit, DateTime varDateTime, Decimal varDecimal);
    };

   [Guid("c686d756-98a7-4048-b79c-b1ff9889730c")]
    public class DataAccess : DataAccessInterface
        {
    public void InsertSampleTable(Byte varTinyInt, Int32 varInt, String varText, String varVarchar, Boolean varBit, DateTime varDateTime, Decimal varDecimal)
            {
                m_procName = "Insert_SampleTable";
                m_dbCommand = m_db.GetStoredProcCommand(m_procName);
                m_db.AddInParameter(m_dbCommand, "_varTinyInt", DbType.Byte, varTinyInt);
                m_db.AddInParameter(m_dbCommand, "_varInt", DbType.Int32, varInt);
                m_db.AddInParameter(m_dbCommand, "_varText", DbType.String, varText);
                m_db.AddInParameter(m_dbCommand, "_varVarchar", DbType.String, varVarchar);
                m_db.AddInParameter(m_dbCommand, "_varBit", DbType.Boolean, varBit);
                m_db.AddInParameter(m_dbCommand, "_varDateTime", DbType.DateTime, varDateTime);
                m_db.AddInParameter(m_dbCommand, "_varDecimal", DbType.Decimal, varDecimal);
                m_db.ExecuteNonQuery(m_dbCommand);
            }
    };

    } 
```

这是我的 AssemblyInfo.cs

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("IISWebFrameworkDAAB")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("IISWebFrameworkDAAB")]
[assembly: AssemblyCopyright("Copyright ©  2012")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
//[assembly: ComVisible(false)]
[assembly: ComVisible(true)]
[assembly: AssemblyDelaySign(false)]
//[assembly: AssemblyKeyFile("..\\..\\MyKeyFile.SNK")]

// The following GUID is for the ID of the typelib if this project is exposed to COM 
```

// [程序集：Guid("76f20d76-b030-4487-a315-2d727dedd4ec")]

```
// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

这是我的客户：-

```
#include <windows.h>
#include <stdio.h>

#pragma warning (disable: 4278)

// To use managed-code servers like the C# server, 
// we have to import the common language runtime:
#import <mscorlib.tlb> //raw_interfaces_only

#import "C:\Documents and Settings\Administrator\Desktop\new\NiproDAAB\IISWebFrameworkDAAB\bin\Debug\IISWebFrameworkDAAB.tlb"
using namespace IISWebFrameworkDAAB;
int main(int argc, char* argv[])
{
    DataAccessInterface *cpi = NULL;
     int retval = 1;
     CoInitialize(NULL);
   HRESULT hr = CoCreateInstance(CLSID_DataAccess,
               NULL, CLSCTX_INPROC_SERVER,
               IID_DataAccessInterface, reinterpret_cast<void**>(&cpi));

   if (FAILED(hr))
   {
      printf("Couldn't create the instance!... 0x%x\n", hr);
   }
} 
```

当我运行客户端时，我收到以下错误：-

```
error C2065: 'CLSID_DataAccess' : undeclared identifier
1>c:\documents and settings\administrator\my documents\visual studio 2010\projects\connectdll\connectdll\cli.cpp(19): error C2065: 'IID_DataAccessInterface' : undeclared identifier 
```

我按照以下链接[http://msdn.microsoft.com/en-us/library/aa645738%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa645738%28v=vs.71%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:59:47.370

尝试将“named_guids”添加到您的#imports，例如

```
'#import named_guids' 
```

此步骤在您引用的示例中的 COMClient.cpp 源中进行了说明，如下所示：

```
..    
#import "CSharpServer.tlb" no_namespace named_guids
.. 
```

# .net - Nunit 不会为程序集中的特定命名空间运行测试

> ID：12783884
> 
> 赞同：0
> 
> 时间：2012-10-08T14:33:37.263
> 
> 标签：.net, nunit, nunit-console

我有包含大量测试的大型程序集。这些测试被分组在不同的命名空间下。我尝试从 nunit-console 运行特定命名空间的测试用例，但没有运行任何测试。这只发生在这个程序集中。它适用于我为测试它而创建的示例测试程序集。

可能是什么原因？有什么限制吗？

我使用的命令行命令如下

nunit-console.exe /noshadow /nothread /run:namespace Absolute_path_of_the_dll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:36:28.427

根据[文档](http://www.nunit.org/index.php?p=consoleCommandLine&r=2.2.10)，我希望您使用以下`/fixture`参数：

> /fixture 选项后指定的名称可能是 TestFixture 类、遗留套件（使用 Suite 属性）或命名空间的名称。如果给定了命名空间，则运行该命名空间下的所有固定装置。此选项也可用于 Visual Studio 或 NUnit 项目。

所以

```
nunit-console /noshadow /nothread /fixture:Foo.Bar.Baz PathToAssembly.dll 
```

# xcode - ARMV 7 重复错误

> ID：12783887
> 
> 赞同：1
> 
> 时间：2012-10-08T14:33:47.140
> 
> 标签：xcode, cordova, urbanairship.com, armv7

**iOS Phonegap 和 Urban Airship 实现// armv7 的重复符号**

Urban Airship 给出了实施推送通知的说明。[https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS%3A+Push](https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+iOS%3A+Push)

但是当构建过程发生时会发生错误。

> 链接/用户/添加/库/开发人员/Xcode/DerivedData/hello-asidjfhsalkdfjnslfdkjsadf/Build/Products/Debug-iphoneos/hello.app/hello
> 
> 586 架构 armv7 链接器命令的重复符号失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-27T23:24:06.877

下载的源码中有两个文件：**libUAirship-3.0.1.a**和**libUAirship-iOS5-3.0.1.a**。您将只需要适当的一个 - 删除另一个。

# asp.net-mvc - 无法在 VB.NET 中添加到集合（重复异常）

> ID：12783896
> 
> 赞同：1
> 
> 时间：2012-10-08T14:34:21.940
> 
> 标签：asp.net-mvc, vb.net, collections

我正在使用以下代码：

```
 Dim questions = db.Tbl_Challenge_Questions.Where(Function(x) x.Quest_Challenge_ID = challengeId)

    Dim answersToQuestions = New Collection

    For Each question As Tbl_Challenge_Question In questions

        Dim questionId = question.Quest_ID
        Dim answer = question.Tbl_Challenge_Question_Answer.Where(Function(x) x.QAns_Question_ID = questionId).FirstOrDefault.QAns_Answer()
        Debug.Print("Quest_ID=" + question.Quest_ID.ToString)
        Debug.Print("answer=" + answer)
        'answersToQuestions.Add(question.Quest_ID, answer)

    Next 
```

哪个输出：

```
Quest_ID=1
answer=True
Quest_ID=2
answer=150 minutes
Quest_ID=3
answer=True
Quest_ID=4
answer=False
Quest_ID=5
answer=Continuing to smoke 
```

当我取消注释要添加到集合的行时`answersToQuestions.Add(question.Quest_ID, answer)`，它会输出此错误：

```
Quest_ID=1
answer=True
Quest_ID=2
answer=150 minutes
Quest_ID=3
answer=True
A first chance exception of type 'System.ArgumentException' occurred in Microsoft.VisualBasic.dll
The program '[4948] WebDev.WebServer40.EXE: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

**添加失败。提供了重复的键值。**

似乎没有任何重复。如何将所有这些项目添加到我的收藏中？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:41:58.693

您正在使用 Visual Basic 特定[`Collection`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.collection.aspx)类（实际上是用于遗留代码库）。

它的[`Add`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.collection.add.aspx)方法期望通过`Item`then `Key`，而不是`Key`then `Item`：

```
public void Add(
    Object Item,
    string Key,
    Object Before,
    Object After
) 
```

您已经有了 Key `True`...

正如@Paul Grimshaw 所建议的那样，我还建议使用诸如[`Dictionary(Of TKey,TValue)`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:38:22.690

你可以试试这个看看它是否有效：

```
Dim questions = db.Tbl_Challenge_Questions.Where(Function(x) x.Quest_Challenge_ID = challengeId)

    Dim answersToQuestions = New Dictionary(Of Integer, String)

    For Each question As Tbl_Challenge_Question In questions

        Dim questionId = question.Quest_ID
        Dim answer = question.Tbl_Challenge_Question_Answer.Where(Function(x) x.QAns_Question_ID = questionId).FirstOrDefault.QAns_Answer()
        Debug.Print("Quest_ID=" + question.Quest_ID.ToString)
        Debug.Print("answer=" + answer)
        answersToQuestions.Add(question.Quest_ID, answer)
     Next

    Next 
```

# sql - 我的 Excel 报告中未显示非英文字符

> ID：12783901
> 
> 赞同：0
> 
> 时间：2012-10-08T14:34:31.590
> 
> 标签：sql, oracle, oracle10g, oracleforms

我有`'http:// || :server || :domain || :app_server_port || '/' || :app_dad || '/reports.rep?sqlString=' || myQuery`

如果所有信息都是英文的，报告会显示所有内容，但如果信息是其他语言，则不会显示数据。我的意思是相关字段为空。如果所有记录都包含非英文字符，则不显示任何记录！！！！

有人知道吗？

谢谢

# c# - C#检测鼠标是否向左移动5次和向右移动5次

> ID：12783902
> 
> 赞同：0
> 
> 时间：2012-10-08T14:34:44.373
> 
> 标签：c#, mouse, move

有没有办法检测到这一点？

想象一下，您将有一个应用程序正在*做某事*，并且有一个 Backgroundthread 正在监听并等待鼠标移动 - （无论多远）：

```
Left
Right
Left
Right
Left
Right
Left
Right
Left
Right 
```

触发触发器或调用特定方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:38:03.420

看不到，从提供的问题的角度来看，为此使用另一个线程。只需监听`MouseMove`事件，然后检测鼠标移动方向。

您可以通过减去事件处理程序本身接收的坐标来做到这一点。

这里的事情涉及到您将在检测算法中拥有的*容差决定。*

为了更清楚：

*如果*值的差异`X`大于（比方说）`1`，则算作**向右**移动，如果小于则`-1`算作**向左**移动。

像这样的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:39:52.653

获取鼠标指针的当前位置。移动到新位置。如果新位置的 X 坐标小于前一个位置的 X 坐标，则表示鼠标已向左移动。向右移动类似。每次新的位置都会成为基础位置。您可以保留一个计数器，如果计数为 5，则随心所欲。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:36:55.160

使用附加到窗口的 MouseMove 事件。每次触发时存储鼠标位置，并将当前位置与上次位置进行比较，以确定您是向左、向右还是全部移动（即向上或向下）。

# database - Hive 的 Bucket Map Join

> ID：12783908
> 
> 赞同：1
> 
> 时间：2012-10-08T14:35:11.010
> 
> 标签：database, join, hadoop, hive

我有一个 Hadoop 集群，我使用 Hive 进行查询，我想加入两个大表，其中一个有小桶，从我读到的内容看来，如果我将两个表都存储在连接键上，这将有助于提高性能.

所以我的设置是：

*   将连接键上的两个表分桶到相同数量的桶中，
*   较小的表的存储桶适合内存，
*   设置 hive.optimize.bucketmapjoin = true;
*   运行以下查询：

```
SELECT /*+ MAPJOIN(a) */
 count(*)
FROM a JOIN B ON  a.join_key = b.join_key; 
```

**问题一：**以上设置是否足以触发bucket map join？

**问题2：**我对bucket map join的理解是，它启动一个本地任务，创建每个bucket的hash表，然后将hashed buckets上传到每个mapper。这种理解正确吗？

**问题3：**如果上面的理解正确，那么为什么Hive会在本地做hash呢？为什么它不上传原始桶然后在map任务中进行散列，从而实现并行处理和更快的速度？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-07-24T03:30:18.207

**以上设置是否足以触发bucket map join？**

答：1）如果“总表/分区大小很大，不适合map join”，那就去bucket map join。所需的设置是：设置 hive.optimize.bucketmapjoin = true;

2）如果“表/分区大小没有限制非常大，即表大小”，那么去SortMerge桶连接。所需的设置是：设置 hive.optimize.bucketmapjoin = true; 设置 hive.optimize.bucketmapjoin.sortedmerge = true; 设置 hive.input.format=org.apache.hadoop.hive.ql.io.BucketizedHiveInputFormat;

**我对桶映射连接的理解是它启动了一个本地任务，该任务创建每个桶的哈希表，然后将哈希桶上传到每个映射器。这种理解正确吗？**

答：在 Bucket map join 的情况下，1）hive 运行本地 map reduce join 来创建 HashTable 文件，2）它压缩和归档文件并加载到分布式缓存（i-大哈希表文件会减慢分布式的传播缓存。ii- 映射器正在等待来自分布式缓存的哈希表文件。) 3) 加载到 map Join 任务的映射器。

**如果上述理解正确，那么为什么 Hive 会在本地进行散列呢？为什么它不上传原始桶然后在map任务中进行散列，从而实现并行处理和更快的速度？**

答：如果文件很大，那么我们将遇到以下问题 i- 大哈希表文件会减慢分布式缓存的传播。ii- 映射器正在等待来自分布式缓存的哈希表文件。

因此，执行以下步骤将提供更多性能：

1) hive 运行本地 map reduce join 以创建 HashTable 文件，2) 它压缩和归档文件并加载到分布式缓存
3) 加载到 map Join 任务的映射器。

这提供了比地图连接或普通连接更好的性能。

# ios - Passkit 通行证不会下载到设备

> ID：12783914
> 
> 赞同：1
> 
> 时间：2012-10-08T14:35:26.307
> 
> 标签：ios, passbook

我正在尝试托管一个非常简单的网页，其中包含指向服务器上 passkit 文件的链接。我的目标是用户访问此页面并单击图像，Safari 会检测到通行证并下载它。

出于测试目的，HTML 文件和 pass 都在同一个目录中，这是我用来链接到 pass 的简单 html 页面：

```
<html>
<head>
</head>
<a mimetype="application/vnd.apple.pkpass"  href="pass.pkpass">
<img src="pass.jpg" />
</a>
</html> 
```

出于某种原因，这失败了，我在 safari 中收到一条消息，说它无法下载文件。

关于什么是错的任何想法？

我已将通行证通过电子邮件发送给自己进行测试，当我在邮件中打开它并将其添加到存折时它会注意到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:13:37.803

您是否检查过服务器是否理解 mime 类型，就像其他帖子一样？

[共享存折通行证 .pkpass](https://stackoverflow.com/questions/12610296/sharing-passbook-passes-pkpass)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T23:40:52.243

在我看来，.pkpass 文件无法从静态链接提供给 Mobile Safari，响应必须设置一些标头。这是我所做的：

响应链接的服务器必须将 Content-Type 和 Content-Length 标头设置为 'application/vnd.apple.pkpass' 和 .pkpass 文件的长度。我的代码还将 Content-Disposition 标头设置为 'attachment; ' + filename_header 向 Mobile Safari 表示需要下载内容。

# powershell - 如何每天复制一次文件 - 优雅的解决方案

> ID：12783919
> 
> 赞同：0
> 
> 时间：2012-10-08T14:36:02.407
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我有远程服务器，每天将上传一个文件。不知道文件什么时候上传。我需要将此文件复制到另一台服务器进行处理，并且每个文件只需要执行一次（每天一次）。当文件上传到远程服务器时，我需要在一个小时内复制它，所以我必须每小时至少运行一次这个脚本。我正在使用这个脚本：

```
# Get yesterday date
$date = (Get-Date).Adddays(-1) | Get-Date -Format yyyyMMdd
$check = ""
$check = Get-Content c:\checkiftransfered.txt

# Test if file checkiftransfered.txt contains True or False. If it contains True, file for this day was already copyied
if ($check -ne "True") {
    #Test if file exists - it has specific name and yesterday date
    if(Test-Path \\remoteserver\folder\abc_$date.xls) {

        Copy-Item \\remoteserver\folder\abc_$date.xls \\remoteserver2\folder\abc_$date.xls
        # Write down information that file was already copyied
        $check = "True" | Out-File c:\checkiftransfered.txt

    } else { Write-Host "File has not been uploaded."}
} else { Write-Host "File has been copyied."}
# + I will need another script that will delete the checkiftransfered.txt at 0:00 
```

我认为它会正常工作，但我正在寻找更优雅的解决方案 - 如何解决它的最佳方法。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:14:50.320

在 PowerShell V3 中，`Test-Path`有一个方便的`-NewerThan`和`-OlderThan`参数，因此您可以简化为：

```
$yesterday = (Get-Date).AddDays(-1)
$date = $yesterday | Get-Date -Format yyyyMMdd
$path = "\\remoteserver\folder\abc_$date.xls"
if (Test-Path $path -NewerThan $yesterday) 
{
    Copy-Item $path \\remoteserver2\folder\abc_$date.xls -Verbose
    (Get-Item $path).LastWriteTime = $yesterday
} 
```

这消除了使用 LastWriteTime 单独跟踪复制状态的需要。关于使用`-NewerThan`和的一个注意事项`-OlderThan`- 不要一起使用它们。它没有按预期工作。

为了避免我们忘记一些很棒的原生工具，这里有一个使用 robocopy 的解决方案：

```
robocopy $srcdir $destdir /maxage:1 /mot:60 
```

该`/mot:n`选项将导致 robocopy 连续监视源目录 - 每 60 分钟一次，如上所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:24:18.757

有一种更简单、更可靠的方法。您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类。

```
$watcher = New-Object System.IO.FileSystemWatcher
$watcher.Path = 'C:\Uploads'
$watcher.IncludeSubdirectories = $true
$watcher.EnableRaisingEvents = $true
$created = Register-ObjectEvent $watcher "Created" -Action {
  Sleep (30*60)
  Copy-Item $($eventArgs.FullPath) '\\remoteserver2\folder\'
} 
```

所以让我们看看我们在这里做什么，我们创建一个新的观察者并告诉它观察 C:\Uploads 当一个新文件上传到那里时，文件系统通过框架向我们的程序发送一个通知，然后触发创建的事件。当发生这种情况时，我们告诉我们的程序休眠 30 分钟以允许上传完成（根据上传的大小，这可能会很长）然后我们调用`Copy-Item`包含新文件完整路径的事件参数.

顺便说一句，您需要将其粘贴到 powershell 窗口中并在服务器上保持打开状态，或者您可以使用 ISE 并保持打开状态。无论哪种方式，它都比您目前拥有的更可靠。

# cakephp - 如何使用 CakePHP 2.2 按类型查找实体？

> ID：12783923
> 
> 赞同：0
> 
> 时间：2012-10-08T14:36:18.773
> 
> 标签：cakephp, model, filter, controller

这是我读过的[文档，这就是我正在尝试的。](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)首先，我建立了我的模型关联：

```
<?php
class Proveedor extends AppModel {
    public $hasMany = 'Libro';
    public $displayField = 'Nombre';
}

<?php
class Libro extends AppModel {
    public $belongsTo = 'Proveedor';
} 
```

接下来，我创建了我的控制器和我的动作函数：

```
public function filter($proveedorName = null) {

    // proveedorName is a string: wrox, apress, oreilly, etc.
    // I need to find all libros that have their 'Proveedor' as $proveedorName.

    $this->set('libros', $this->Libro->find('all', 
    array('conditions' => array('Libros.Proveedor.Name' => $proveedorName))));

    $this->set('proveedores', $this->Libro->Proveedor->find('list'));
} 
```

这是弹出的错误消息：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Libros.Proveedor.Name' in 'where clause' 
```

我的用例非常简单，从下拉列表中选择证明者并让网站返回`libros`来自该供应商 ( ) 的书籍 ( )集合`proveedor`。

就好像您访问：`www.google.com/cars/filter/nissan`- 您想查看所有日产汽车。

相同的原则：`www.google.com/libros/filter/apress`- 我想`libros`从 Proveedor ( `supplier`) Apress 获取所有书籍 ( )。

出于说明目的，在 C# 中使用 Entity Framework 和 Linq 我可以：

```
var books = db.Libros.Where(x => x.Proveedor.Name == "Apress"); 
```

我可以用 CakePHP 做类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:41:54.653

这是错误的：

```
array('conditions' => array('Libros.Proveedor.Name' => $proveedorName)))); 
```

应该：

```
array('conditions' => array('Proveedor.Name' => $proveedorName)))); 
```

并且您的数据库字段应该小写（名称）和下划线，而不是大写（名称）或其他任何内容。遵循约定，它会使事情变得容易得多。

# java - Struts2填充标签选择下拉列表

> ID：12783926
> 
> 赞同：0
> 
> 时间：2012-10-08T14:36:25.357
> 
> 标签：java, select, struts2, tags

我尝试使用 Struts 填充选择下拉列表，但它不起作用：

我有我的行动课：

私人整数 anneeResultat；

```
 private List<AnneeResultat> anneeResultatList = new ArrayList<AnneeResultat>();

public Integer getAnneeResultat() {

        return anneeResultat;
    }
    public void setAnneeResultat(Integer anneeResultat) {
        this.anneeResultat = anneeResultat;
    }

public List<AnneeResultat> getAnneeResultatList() {
    this.anneeResultatList.add(new AnneeResultat(2005,"2005"));
    this.anneeResultatList.add(new AnneeResultat(2006,"2006"));
    this.anneeResultatList.add(new AnneeResultat(2007,"2007"));
    this.anneeResultatList.add(new AnneeResultat(2008,"2008"));
    this.anneeResultatList.add(new AnneeResultat(2009,"2009"));
    this.anneeResultatList.add(new AnneeResultat(2010,"2010"));
    this.anneeResultatList.add(new AnneeResultat(2011,"2011"));
        return this.anneeResultatList;
    }
    public void setAnneeResultatsList(List<AnneeResultat> anneeResultatList) {
        this.anneeResultatList = anneeResultatList;
    }
    public String execute(){
    return SUCCESS;
    } 
```

这是 AnneeResultat 类：

```
public class AnneeResultat {
     private Integer keyAnnee;  
     private String valueAnnee;         
    public AnneeResultat() {    
    }
    public AnneeResultat(Integer key, String value) {
        super();
        this.keyAnnee = key;
        this.valueAnnee = value;
    }
    public Integer getKey() {
        return keyAnnee;
    }
    public void setKey(Integer key) {
        this.keyAnnee = key;
    }
    public String getValue() {
        return valueAnnee;
    }
    public void setValue(String value) {
        this.valueAnnee = value;
    }   
} 
```

这是我的 jsp 页面上使用的选择标签。我在我的页面上使用瓷砖。这是我页面上的第一个版本：

```
<s:select name="anneeResultat" label="Année de résultats" list="anneeResultatList" listKey="keyAnnee" listValue="valueAnnee"></s:select> 
```

结果是在我的页面中，选择标签生成了一个带有空元素的选择框。我在选择框上看不到值。看不到任何价值。生成的代码是：

```
<select name="anneeResultat" id="choices_anneeResultat">
    <option value=""></option>
    <option value=""></option>
    <option value=""></option>
    <option value=""></option>
    <option value=""></option>
    <option value=""></option>
    <option value=""></option>
</select> 
```

当我使用以下选择标签时：

```
<s:select name="anneeResultat" label="Année de résultats" list="anneeResultatList" key="keyAnnee" value="valueAnnee"></s:select> 
```

哈希码打印在选择框列表上。

生成的代码是：

```
<select name="anneeResultat" id="choices_anneeResultat">
    <option value="fr.si2m.occ.dao.model.ui.AnneeResultat@1b209bc">fr.si2m.occ.dao.model.ui.AnneeResultat@1b209bc</option>
    <option value="fr.si2m.occ.dao.model.ui.AnneeResultat@19d5723">fr.si2m.occ.dao.model.ui.AnneeResultat@19d5723</option>
    <option value="fr.si2m.occ.dao.model.ui.AnneeResultat@c3bba9">fr.si2m.occ.dao.model.ui.AnneeResultat@c3bba9</option>
    <option value="fr.si2m.occ.dao.model.ui.AnneeResultat@5554a3">fr.si2m.occ.dao.model.ui.AnneeResultat@5554a3</option>
    <option value="fr.si2m.occ.dao.model.ui.AnneeResultat@27b326">fr.si2m.occ.dao.model.ui.AnneeResultat@27b326</option>
    <option value="fr.si2m.occ.dao.model.ui.AnneeResultat@6283de">fr.si2m.occ.dao.model.ui.AnneeResultat@6283de</option>
    <option value="fr.si2m.occ.dao.model.ui.AnneeResultat@1bf7b9c">fr.si2m.occ.dao.model.ui.AnneeResultat@1bf7b9c</option>
</select> 
```

我不知道如何解决这个问题。如果有人有一些想法，欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-26T15:19:26.940

对要显示的列使用“listValue”。

`<s:select name="anneeResultat" label="Année de résultats" list="anneeResultatList" key="keyAnnee" listValue="valueAnnee"></s:select>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T08:43:55.100

只需从中删除构造函数`AnneeResultat`并在您的 JSP 中使用以下选择标记。

```
<s:select name="anneeResultat" label="Année de résultats" 
    list="anneeResultatList" key="keyAnnee" value="valueAnnee"></s:select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T15:57:20.143

“listKey=foo”需要一个具有相同名称的getter，但命名时在值后面附加“get”，例如getFoo()。

将您的 getter 名称更改为“getKeyAnnee”或将 listKey 更改为“key”

# asp.net-mvc - 当我有 BaseController 时将 Ninject 与 Entity Framework 5 一起使用

> ID：12783930
> 
> 赞同：0
> 
> 时间：2012-10-08T14:36:35.410
> 
> 标签：asp.net-mvc, entity-framework, ninject

我当前的堆栈是 ASP.NET MVC 4 和 Entity Framework 5.0。我通过 NuGet 安装了 ninject.mvc3，下面显示的代码运行良好：

```
public class SessionsController : Controller
{
    // use "kernel.Bind<MyContext>().ToSelf().InRequestScope();" 
    // to inject MyContext
    private MyContext _context;

    public SessionsController(MyContext context)
    {
        _context = context;
    }

    [HttpGet]
    public ActionResult Login()
    {
        System.Diagnostics.Debug.WriteLine(_context.Users.Count());
        return View();
    }
} 
```

}

现在，我想为我的控制器提取一个 BaseController：

```
public class BaseController : Controller
{
    protected MyContext _context;

    public BaseController(MyContext context)
    {
        _context = context;
    }

    // I don't know what should be write here and 
    // base controller must have a parameterless constructor
    public BaseController() 
    {

    }
} 
```

然后我让 SessionsController 从 BaseController 继承。当我运行代码时，抛出了一个异常

> “对象引用未设置为对象的实例。（使用 MyContext）”

我用错了 Ninject 吗？

**--UPDATED--** ninject 的 NinjectWebCommon.cs 的代码

```
 /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<TelesingContext>().ToSelf().InRequestScope();
    } 
```

**--UPDATED--**编辑后的 ​​SessionsController.cs 代码

```
public class SessionsController : BaseController
{
    [HttpGet]
    public ActionResult Login()
    {
        System.Diagnostics.Debug.WriteLine(_context.Users.Count());
        return View();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:14:01.603

您的问题不在于 Ninject 或 MVC。您在派生类上缺少构造函数。

因为构造函数在任何方面都不是多态的（而是只能被链接），所以您仍然必须在派生类上定义一个构造函数，该构造函数接受 a`MyContext`并将其传递给基构造函数：

```
public class SessionsController : BaseController
{
    public SessionsController(MyContext context) : base(context) { }

    [HttpGet]
    public ActionResult Login()
    {
        System.Diagnostics.Debug.WriteLine(_context.Users.Count());
        return View();
    }
} 
```

出现异常的原因是，**如果您在类中未定义构造函数并且基类具有无参数构造函数，则 C# 编译器会自动在调用基类的类中插入一个无参数构造函数**。因为该`_context`变量从未被设置，所以您的操作受到了`NullReferenceException`影响`Login`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:12:20.160

做你正在做的事情真的没有太多好处。如果要在基类中使用构造函数，C# 要求为派生类创建构造函数。因此，您需要这样做：

```
public class Derived : Base
{
    public Derived(MyContext context) : base(context) { }
} 
```

如您所见，从基本上下文派生几乎一样多的工作，那么重点是什么？除了强制执行标准流程。

BaseController 只需要一个无参数构造函数，因为您尚未定义应如何从派生类调用基构造函数。

Ninject 不能神奇地将参数插入基类，只有你的派生类才能做到。

# mysql - 如何在 MySQL 中正确执行此有限的 Group By Query？

> ID：12783932
> 
> 赞同：0
> 
> 时间：2012-10-08T14:36:41.417
> 
> 标签：mysql, limits

我有一个查询返回一个包含 25 位医生的列表，这些医生需要在一列中反映他们上传的文件 (cloud_uploads)。问题是，我不想限制列出的文件数量，但限制似乎也适用于文件。我见过的关于 SO 的其他类似问题有相反的问题——他们想限制文件而不限制返回的总行数。我的医生上传了超过 25 个文件，但该列表仅显示前 25 个文件，而不是所有文件。

因为这是一个以编程方式生成的查询，所以我不能将它分成多个查询。它必须是一个。因此，如果答案是无法完成，我可以接受。

这是当前的查询：

```
SELECT SQL_CALC_FOUND_ROWS records.instance_id,
        instances.patient_id,
        TRIM(form_1_data.field_2) AS field_0,
        TRIM(form_1_data.field_1) AS field_1,
        TRIM(form_1_data.field_87) AS field_2,
        GROUP_CONCAT(DISTINCT CONCAT (
                        extensible_8_data.field_953,
                        '|||',
                        cloud_uploads.NAME
                        ) SEPARATOR '<br />') AS field_3
FROM form_6_data AS records
LEFT JOIN instances
        ON instances.id = records.instance_id
LEFT JOIN extensible_8_data
        ON records.instance_id = extensible_8_data.instance_id
LEFT JOIN cloud_uploads
        ON extensible_8_data.field_953 = cloud_uploads.id
LEFT JOIN form_1_data
        ON records.field_89 = form_1_data.instance_id
WHERE instances.form_id = 6
        AND instances.active = 1
        AND (
                cloud_uploads.active = 1
                OR cloud_uploads.active IS NULL
                )
GROUP BY records.instance_id
ORDER BY records.instance_id DESC LIMIT 0, 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:17:44.243

加入一个子查询，选择 25 位感兴趣的医生及其文件：

```
SELECT SQL_CALC_FOUND_ROWS records.instance_id,
        instances.patient_id,
        TRIM(form_1_data.field_2)  AS field_0,
        TRIM(form_1_data.field_1)  AS field_1,
        TRIM(form_1_data.field_87) AS field_2,
        GROUP_CONCAT(DISTINCT CONCAT (
                        extensible_8_data.field_953,
                        '|||',
                        cloud_uploads.NAME
                        ) SEPARATOR '<br />') AS field_3
FROM (SELECT * FROM form_6_data ORDER BY instance_id DESC LIMIT 25) AS records
LEFT JOIN instances
        ON instances.id = records.instance_id
LEFT JOIN extensible_8_data
        ON records.instance_id = extensible_8_data.instance_id
LEFT JOIN cloud_uploads
        ON extensible_8_data.field_953 = cloud_uploads.id
LEFT JOIN form_1_data
        ON records.field_89 = form_1_data.instance_id
WHERE instances.form_id = 6
        AND instances.active = 1
        AND (
                cloud_uploads.active = 1
                OR cloud_uploads.active IS NULL
                )
GROUP BY records.instance_id
ORDER BY records.instance_id 
```

# php - 注销后删除用户的会话存在

> ID：12783944
> 
> 赞同：2
> 
> 时间：2012-10-08T14:37:18.837
> 
> 标签：php, cookies

在浏览 PHP 中的各种用户注销功能时，我总是遇到`session_destory()`特定用途的远程会话变量，但它们不用于`setCookie()`删除用户的 PHP`SESSIONID`

**PHP 文档明确指出：**

> 为了完全终止会话，例如注销用户，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。setcookie() 可以用于此。

我尝试在 Firefox 中跟踪 cookie，并使用`session_destroy()`, 继续保留 PHP 的 cookie `SESSIONID`，下次用户登录时，使用相同的`SESSIONID`id。

在用户注销后从用户的计算机远程远程会话 ID Cookie 是否总是安全的，如果我无法删除会话 ID Cookie 会发生什么情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:40:30.263

只需这样做：

```
$_SESSION = array(); 
```

这样会话是空的。

不需要（也没有增加安全性）像你尝试的那样摧毁它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:45:13.883

这应该有效：

```
session_regenerate_id ( true ); 
```

功能说明：

[session_regenerate_id](http://php.net/manual/en/function.session-regenerate-id.php) — 使用新生成的会话 ID 更新当前会话 ID。它是唯一的参数，默认为 false： delete_old_session - 是否删除旧的关联会话文件。

# c# - 如果 StreamReader 或 StreamWriter 没有关闭会发生什么？

> ID：12783947
> 
> 赞同：4
> 
> 时间：2012-10-08T14:37:20.607
> 
> 标签：c#, streamwriter

我正在为一位对[LOC](http://en.wikipedia.org/wiki/Source_lines_of_code)严格的教授做作业。出于这个原因，我想做以下事情：

```
(new StreamWriter(saveFileDialog.FileName)).Write(textBox.Text); 
```

代替

```
StreamWriter sw = new StreamWriter(saveFileDialog.FileName);
sw.Write(textBox.Text);
sw.Close(); 
```

在第一个示例中，我没有关闭流。这个可以吗？它会导致任何安全或内存问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T14:39:32.840

您可能没有得到任何输出，或者输出不完整。关闭 writer 也会刷新它。而不是手动调用`Close`，我会使用一个`using`语句......但如果你*只是*想将文本写入文件，请使用一次性[`File.WriteAllText`](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)调用：

```
File.WriteAllText(saveFileDialog.FileName, textBox.Text); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-08T14:40:26.830

也许您的导师正在寻找：

```
File.WriteAllText(saveFileDialog.FileName, textbox.Text); 
```

喜欢简洁的代码是合理的，但不以牺牲可读性或正确性为代价。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T14:40:12.040

没有 fout.Close() 的最简单的解决方案应该是：

```
 using (StreamWriter fout = new StreamWriter(saveFileDialog.FileName))
        {
            fout.Write(textBox.Text);
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-08T14:40:51.760

如果你不关闭它，你不能保证它会写出最后一条写入它的数据。这是因为它使用缓冲区，并且在关闭流时会刷新缓冲区。

其次，它将文件锁定为打开状态，防止其他进程使用它。

使用文件流最安全的方法是使用 using 语句。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T14:39:56.583

简短的回答，为该操作分配的资源不会被释放，更不用说它可能会锁定该文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T14:42:02.010

考虑

```
using( var fout = new StreamWriter(saveFileDialog.FileName){ fout.write(textBox.Text); } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T14:40:24.850

GC 将如何为您关闭它。但问题是在 GC 关闭该流之前，您没有必要暂停资源

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T14:41:28.413

您可以尝试`using blok`以`clean your no managed object`

```
 using (var streamWriter = new StreamWriter(saveFileDialog.FileName))
        {
            streamWriter.Write(textBox.Text);
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-08T14:41:59.817

这将是一个记忆危险。

我总是在“使用”语句中使用 StreamWriter

```
using(StreamWriter fout = new StreamWriter(saveFileDialog.FileName)
{
    fout.Write(textBox.Text);
} 
```

# php - 限制显示在产品页面 magento 上的产品评论数量

> ID：12783950
> 
> 赞同：1
> 
> 时间：2012-10-08T14:37:27.243
> 
> 标签：php, magento

所以我想出了如何在产品页面上显示产品评论。现在我需要了解如何限制显示的评论数量并将“阅读更多评论”链接添加到产品评论默认页面。

有任何想法吗？或者谁能​​指出我正确的方向？我尝试了许多不同的脚本，但都没有运气。

更新：我尝试在下面进行更改，但仍然无法正常工作 - 关于我做错了什么的任何想法？

是的，这就是我的想法，但它仍然无法正常工作，任何想法我做错了什么？

```
<?php $_items = $this->getReviewsCollection()->setPageSize('5')->getItems();?>
<div class="box-collateral box-reviews" id="customer-reviews">
<?php if (count($_items)):?>
<div class="box-title">
    <h2><?php echo $this->__('Customer<br><span id="smallH2">Reviews</span>') ?></h2>
</div>
<?php echo $this->getChildHtml('toolbar') ?>
<dl class="box-content" id="product-reviews-list">
<?php foreach ($_items as $_review):?>
<dt>
<?php
$reviewURL = $this->getReviewUrl($_review->getId());
$reviewURL = str_replace("catalog","review",$reviewURL);
?>
<a href="<?php echo $reviewURL ?>"><?php echo $this->htmlEscape($_review->getTitle())            ?></a>       <?php echo $this->__('Review by <span>%s</span>', $this->htmlEscape($_review->getNickname())) ?>
</dt> 
    <dd>
        <table class="data-table review-summary-table">
            <col />
            <col />
            <tbody>
                <?php foreach ($_review->getRatingVotes() as $_vote): ?>
                <tr>
                    <th class="label"><?php echo $this->escapeHtml($_vote->getRatingCode()) ?></th>
                    <td class="value">
                        <div class="rating-box">
                            <div class="rating" style="width:<?php echo $_vote->getPercent() ?>%;">    
</div>
                        </div>
                    </td>
                </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
        <p><?php echo nl2br($this->htmlEscape($_review->getDetail())) ?></p>
        <p class="date"><?php echo $this->__('(Posted on %s)',    $this->formatDate($_review->getCreatedAt()), 'long') ?></p>
    </dd>
<?php endforeach; ?>
</dl>
<script type="text/javascript">decorateGeneric($$('#product-reviews-list dd'), ['last']);</script>
<?php endif;?>
<?php echo $this->getChildHtml('review_form') ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:30:05.123

这是我最终采用的解决方案：

```
<?php
$i = 1;
foreach ($_items as $_review):
    if ($i < 6): ?> 
```

感谢所有试图提供帮助的人...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T17:04:33.373

我不得不这样做并找到了一种更强大的方法。在您的主题`review.xml`文件中找到创建寻呼机的这一行：

```
<block type="page/html_pager" name="product_review_list.toolbar" /> 
```

并将其替换为以下内容（您喜欢的数字除外）：

```
<block type="page/html_pager" name="product_review_list.toolbar">
    <action method="setLimit"><limit>6</limit></action>
</block> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-09T01:35:32.100

```
app\code\core\Mage\Review\Block\Product\View\List.php

 protected function _beforeToHtml()
{
    $this->getReviewsCollection()->setPageSize(5)
        ->load()
        ->addRateVotes();
    return parent::_beforeToHtml();
} 
```

它对我有用。当然，你应该重写块

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T16:13:51.367

我希望您使用集合来获取评论。所以你可以使

```
$collection->setPageSize('number of reviews on page'); 
```

# ms-access - MS Access：链接到第 X > 1 行标题的 Excel 文件？

> ID：12783952
> 
> 赞同：3
> 
> 时间：2012-10-08T14:37:35.863
> 
> 标签：ms-access

我需要链接到 Access 中的 Excel 文件，但是在实际标题 + 数据之前有一堆不必要的行。有没有办法在导入这个 Excel 文件时跳过前几行并告诉它标题在哪里？

注意：我不能直接修改源 Excel 文件。这些文件按原样提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:24:24.073

*使用Range*参数与链接工作表`DoCmd.TransferSpreadsheet`，如 DoCmd.TransferSpreadsheet 方法帮助主题中的此示例所示。

```
DoCmd.TransferSpreadsheet acImport, 3, _
    "Employees","C:\Lotus\Newemps.wk3", True, "A1:G12" 
```

# qt - 我可以像 QCheckbox 一样对 QTreeWidgetItem 进行风格化吗？

> ID：12783956
> 
> 赞同：2
> 
> 时间：2012-10-08T14:37:59.190
> 
> 标签：qt, qtreewidget

我可以像 QCheckbox 一样对 QTreeWidgetItem 进行风格化吗？

对于我的复选框样式是：

```
 QCheckBox {
     spacing: 15px;
 }

 QCheckBox::indicator {
     width: 20px;
     height: 20px;
 }

 QCheckBox::indicator:unchecked {
     image: url(:/styles/img/checkbox_unchecked.png);
 }

 QCheckBox::indicator:unchecked:hover {
     image: url(:/styles/img/checkbox_unchecked_hover.png);
 }

 QCheckBox::indicator:checked {
     image: url(:/styles/img/checkbox_checked.png);
 }

 QCheckBox::indicator:checked:hover {
     image: url(:/styles/img/checkbox_checked_hover.png);
 } 
```

QTreeWidgetItem 的风格是什么？我在文档中找不到它:(

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:53:15.330

请参阅：http: [//qt-project.org/doc/qt-4.8/stylesheet-reference.html#qtreeview-widget](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#qtreeview-widget)

此外，[http://doc.qt.digia.com/4.7-snapshot/qtreewidgetitem.html](http://doc.qt.digia.com/4.7-snapshot/qtreewidgetitem.html) 有很多用于样式的“设置”成员函数。

也许相关：

[如何绘制不同风格的 QTreeWidgetItem？](https://stackoverflow.com/questions/8179037/howto-draw-qtreewidgetitem-with-different-style)

[http://www.qtcentre.org/threads/26738-QTreeWidget-StyleSheet-problem](http://www.qtcentre.org/threads/26738-QTreeWidget-StyleSheet-problem)

# java - 将目录从本地系统复制到 hdfs java 代码

> ID：12783968
> 
> 赞同：10
> 
> 时间：2012-10-08T14:38:39.780
> 
> 标签：java, hadoop, hdfs

我在尝试使用 java 代码将目录从本地系统复制到 HDFS 时遇到问题。我可以移动单个文件，但无法找到移动带有子文件夹和文件的整个目录的方法。任何人都可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-08T21:55:35.107

只需使用`FileSystem`' [copyFromLocalFile](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#copyFromLocalFile%28org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.Path%29)方法。如果源路径是本地目录，它将被复制到 HDFS 目标：

```
...
Configuration conf = new Configuration();
conf.addResource(new Path("/home/user/hadoop/conf/core-site.xml"));
conf.addResource(new Path("/home/user/hadoop/conf/hdfs-site.xml"));

FileSystem fs = FileSystem.get(conf);
fs.copyFromLocalFile(new Path("/home/user/directory/"), 
  new Path("/user/hadoop/dir"));
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T07:01:44.297

这是读取和写入 HDFS 的完整工作代码。它需要两个参数

1.  输入路径（本地/HDFS）

2.  输出路径（HDFS）

我使用了 Cloudera 沙箱。

```
 package hdfsread;

 import java.io.BufferedInputStream;
 import java.io.FileInputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
 import java.net.URI;

 import org.apache.hadoop.conf.Configuration;
 import org.apache.hadoop.fs.FileSystem;
 import org.apache.hadoop.fs.Path;
 import org.apache.hadoop.io.IOUtils;

 public class ReadingAFileFromHDFS {

     public static void main(String[] args) throws IOException {
         String uri = args[0];
         InputStream in = null;
         Path pt = new Path(uri);
         Configuration myConf = new Configuration();
         Path outputPath = new Path(args[1]);

         myConf.set("fs.defaultFS","hdfs://quickstart.cloudera:8020");
         FileSystem fSystem = FileSystem.get(URI.create(uri),myConf);
         OutputStream os = fSystem.create(outputPath);
         try{
             InputStream is = new BufferedInputStream(new FileInputStream(uri));
             IOUtils.copyBytes(is, os, 4096, false);
         }
         catch(IOException e){
             e.printStackTrace();
         }
         finally{
             IOUtils.closeStream(in);
         }
     }
} 
```

# ajax - Django 与 Ajax 和 jQuery

> ID：12783973
> 
> 赞同：1
> 
> 时间：2012-10-08T14:39:04.083
> 
> 标签：ajax, django

我想在单击`Item`显示有他的描述（单个项目描述）的窗口中的一个之后。

如何在 Django 中使用 Ajax 和 jQuery 创建它？

模型：

```
class Item(models.Model):
    name = models.CharField(max_length=50)
    slug = models.SlugField()
    price = models.DecimalField(max_digits=5, decimal_places=2)
    desc = models.TextField() 
```

意见：

```
def item_list(request):
    items = Item.objects.all()[:6]
    return render_to_response('items.html', {'items':items}, context_instance=RequestContext(request))

def single_item(request, slug):
    item = Item.objects.get(slug=slug)
    return render_to_response('single.html', {'item':item}, context_instance=RequestContext(request)) 
```

模板：

```
<!-- Single item description: -->

<div id="description">
    <img src="/site_media/images/photo.png">
        <div id="item_description">
            <input name="add" type="button" id="add" value="Add to Cart">
                <p class="title">Single Item name</p>
                <p class="description"><span>Description:</span>
                    This is single item description
                </p>
            </div>
        </div>

<!-- All item: -->

            <div id="item">
                {% for i in items %}
                    <div class="item">
                    <img src="/{{ i.image.url }}"  />
                    <p>
                    <span> {{ i.name }} </span>
                    <span> {{i.price}} </span>
                    </p>
                    </div>
                {% endfor %}
            </div>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:09:32.467

如果你想使用 ajax 来刷新你的页面，你需要做三件事：

*   向 urls.py 添加一个条目以进行 ajax 调用（或向视图函数添加一个条件以处理请求（如果它是 ajax））
*   添加 javascript 块以进行 ajax 调用并使用新数据更新 html/text
*   在您的 views.py 中添加代码以处理 ajax 调用并使用 json 数据进行响应

**网址.py** ...

```
url(r'/ajax-view-single/)/$', 'ajax_single_item', name='app_name_ajax_single_item'), 
```

**html/js**

```
<script type="text/javascript" src="/js/json2.js"></script>
$("#view-single-item").click(function () {
        try {
            // get slug from html
            var slug = "";
            var data = {
                slug: slug
            };
            $.get('{% url app_name_ajax_single_item %}', data, function(data){

               // your data returned from django is in data
               alert(data.item_name);

            }, 'json');
            //$('#error').hide();
        }
        catch(err) {
            $('#error').html(err);
            $('#error').show();
        }
        return false;
    }); 
```

**视图.py**

```
from django.http import HttpResponse
from django.utils import simplejson
from django.shortcuts import get_object_or_404

def ajax_single_item(request):
    '''gets single item'''
    if not request.is_ajax():
        return HttpResponse(simplejson.dumps({'result': False}))

    # get slug from data
    slug = request.GET.get('slug', None)

    # get item from slug
    item = get_object_or_404(Item, slug=slug)
    return HttpResponse(simplejson.dumps({
        'result': True,
        'item_name': item.name,
        'item_price': item.price,
        'item_desc': item.desc,
        'item_slug': item.slug
    })) 
```

# html - Jquery 模态插件

> ID：12783976
> 
> 赞同：1
> 
> 时间：2012-05-09T15:52:53.717
> 
> 标签：html, javascript, jquery

在我的 Web 应用程序中，我有一页称为 mypage.html 当用户单击 mypage 中的某个链接时，将打开一个模式窗口，他将看到一些 html 页面。（我现在通过 Colorbox 或 Twitter Bootstrap 执行此操作）

但是当用户在模态窗口中单击一个按钮时，一个 Ajax 请求将被发送到我的服务器。如果请求成功，他将看到一些新的模态窗口，否则用户将看到另一个模态窗口。完成所有步骤后，用户将关闭模式窗口并完成任务。

哪个jquery模态窗口插件适合这种类型的使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:23:25.383

我认为[jQuery 对话框](http://jqueryui.com/demos/dialog)（带有它的模态选项）会绰绰有余。关于实现，这个问题最好在[StackOverflow](http://stackoverflow.com)上提出。

# c++ - c++抽象基类和继承

> ID：12783979
> 
> 赞同：3
> 
> 时间：2012-10-08T14:39:31.160
> 
> 标签：c++, inheritance, pointers, abstract-class

我试图让这个程序编译，但我得到了各种奇怪的错误，它说我正在制作一个抽象基类的瞬间。但我相信这只是说，因为当我声明派生类时，它试图创建一个抽象的基类实例。

我也为某些方法获得了多个声明。

非常感谢你的帮助。我很迷茫。

我包括所有内容的原因是因为我真的不知道是什么导致了问题。如果您想具体查看我在哪些文件中遇到错误，则错误消息位于底部。

```
//main.cpp
#include <iostream>
#include "Polygon.h"
using namespace std;
 int main() {
    Polygon rect("Rectangle", 4);
    rect(0) = Point(1, 1);
    rect(1) = Point(2, 1);
    rect(2) = Point(2, 4);
    rect(3) = Point(1, 4);

    cout << rect << endl;

    return 0;
 }
//point.cpp
#include<ostream>
#include"point.h"
using namespace std;

Point::Point()
{
  set_x(0);
  set_y(0);
}

Point::Point(double varX, double varY)
{
  set_x(varX);
  set_y(varY);
}

void Point::set_x(double var)
{
  x=var;
}

void Point::set_y(double var)
{
  y=var;
}

ostream& Point::display(ostream& os) const
{
 os << '(' << x << ',' << y << ')' <<endl;
 return os;
}

friend ostream& operator<<(ostream& os,Point& a)
{
  a.display(os);
}

double Point::xget()
{
 return x;
}
double Point::yget()
{
  return y;
}

Point& operator+(Point& b)
{
  double tempX=x()+b.x();
  double tempY=y()+b.y();
  Point c(tempX,tempY);
  return *c;
}

Point& operator/(Point& o,int value)
{
  double tempX=o.x()/value;
  double tempY=o.y()/value;
  Point c(tempX,tempY);
  return *c;
}
//point.h
#ifndef _point_h
#define _point_h
class Point : public Showable
{
double x;
double y;
public:
Point();
Point(double,double);
ostream& display(ostream&) const;
double xget();
double yget();
void set_x(double);
void set_y(double);
friend ostream& operator<<(ostream&,Point&);
};

Point& operator+(Point&);
Point& operator/(Point&,int);
#endif
//polygon.cpp
//abstract Base Classes
#include <iostream>
#include "Polygon.h"
#include "point.h"
#include "shape.h"
using namespace std;

Polygon::Polygon(char* str , int V):Shape(str)
{
  points=V;
  Point* vertex= new Point[V];
}

Point& Polygon::operator()(int i)
{
  return vertex[i];
}

int Polygon::pointsNum()
{
 return points;
}

Polygon& Polygon::operator=(Polygon& b)
{
  points=b.pointsNum();
  if(vertex)
  delete[] vertex;

  if(this!=&b && b!=NULL)
  {
    vertex=new Point[b.pointNum()];
    for(int i=0;i<b.pointNum();i++)
    {
      vertex[i]=b.vertex[i];
    }
  }
  else
  {
    vertex=NULL;
  }
  return *this;
}
ostream& Polygon::display(ostream& os) const
{
  os << (Shape)(*this) <<" Centroid " << centroid();
}

friend ostream& operator<<(ostream& os,Polygon& a)
{
  a.display(os);
  return os;
}

Point& Polygon::centroid() const
{
  int tempX=0,tempY=0;
  for(int i=0;i<points;i++)
  {
    tempX+= vertex[i].xget();
  }
  for(int i=0;i<points;i++)
  {
    tempY+= vertex[i].yget();
  }
  Point c(tempX/points,tempY/points);
  return *c;
}
//polygon.h
#ifndef _polygon_h
#define _polygon_h
#include "shape.h"
#include "point.h"

class Polygon : public Shape
{
  int points;
  Point* vertex;
  public:
  Polygon(char* , int);
  Point& operator()(int);
  Polygon& Polygon::operator=(Polygon& b);
  int pointsNum();
  ostream& display(ostream& os) const;
  Point& centroid() const;
  friend ostream& operator<<(ostream&,Polygon&);
};

#endif
//shape.cpp
#include<cstring>
#include<ostream>
#include "shape.h"
using namespace std;
Shape::Shape()
{
  name[0]='\0';
}
Shape::Shape(char* str)
{
  strcpy(name,str);
}

ostream& Shape::display(ostream& os) const
{
  os << name;
  return os;
}

char* Shape::nameget()
{
  return name;
}

Shape& operator=(Shape& a)
{
  strcpy(name,a.nameget());
}
//shape.h
#ifndef _shape_h
#define _shape_h
#include "showable.h"
#include "point.h"
class Shape : public Showable
{
  char name[30+1];
  public:
  Shape();
  Shape(char*);
  ostream& display(ostream&) const;
  char* nameget();
  virtual Point& centroid() const=0;
};
#endif
//showable.cpp
#include<ostream>
#include "showable.h"
using namespace std;

ostream& operator<<(ostream& os,Showable& a)
{
  a.display(os);
}
//showable.h
#ifndef _showable_h
#define _showable_h
class Showable
{
  public:
  virtual ostream& display(ostream&) const=0;

};

ostream& operator<<(ostream& os, Showable&);
#endif
//main.cpp
#include <iostream>
#include "Polygon.h"
using namespace std;
 int main() {
    Polygon rect("Rectangle", 4);
    rect(0) = Point(1, 1);
    rect(1) = Point(2, 1);
    rect(2) = Point(2, 4);
    rect(3) = Point(1, 4);

    cout << rect << endl;

    return 0;
 }
//point.cpp
#include<ostream>
#include"point.h"
using namespace std;

Point::Point()
{
  set_x(0);
  set_y(0);
}

Point::Point(double varX, double varY)
{
  set_x(varX);
  set_y(varY);
}

void Point::set_x(double var)
{
  x=var;
}

void Point::set_y(double var)
{
  y=var;
}

ostream& Point::display(ostream& os) const
{
 os << '(' << x << ',' << y << ')' <<endl;
 return os;
}

friend ostream& operator<<(ostream& os,Point& a)
{
  a.display(os);
}

double Point::xget()
{
 return x;
}
double Point::yget()
{
  return y;
}

Point& operator+(Point& b)
{
  double tempX=x()+b.x();
  double tempY=y()+b.y();
  Point c(tempX,tempY);
  return *c;
}

Point& operator/(Point& o,int value)
{
  double tempX=o.x()/value;
  double tempY=o.y()/value;
  Point c(tempX,tempY);
  return *c;
}
//point.h
#ifndef _point_h
#define _point_h
class Point : public Showable
{
double x;
double y;
public:
Point();
Point(double,double);
ostream& display(ostream&) const;
double xget();
double yget();
void set_x(double);
void set_y(double);
friend ostream& operator<<(ostream&,Point&);
};

Point& operator+(Point&);
Point& operator/(Point&,int);
#endif
//polygon.cpp
//abstract Base Classes
#include <iostream>
#include "Polygon.h"
#include "point.h"
#include "shape.h"
using namespace std;

Polygon::Polygon(char* str , int V):Shape(str)
{
  points=V;
  Point* vertex= new Point[V];
}

Point& Polygon::operator()(int i)
{
  return vertex[i];
}

int Polygon::pointsNum()
{
 return points;
}

Polygon& Polygon::operator=(Polygon& b)
{
  points=b.pointsNum();
  if(vertex)
  delete[] vertex;

  if(this!=&b && b!=NULL)
  {
    vertex=new Point[b.pointNum()];
    for(int i=0;i<b.pointNum();i++)
    {
      vertex[i]=b.vertex[i];
    }
  }
  else
  {
    vertex=NULL;
  }
  return *this;
}
ostream& Polygon::display(ostream& os) const
{
  os << (Shape)(*this) <<" Centroid " << centroid();
}

friend ostream& operator<<(ostream& os,Polygon& a)
{
  a.display(os);
  return os;
}

Point& Polygon::centroid() const
{
  int tempX=0,tempY=0;
  for(int i=0;i<points;i++)
  {
    tempX+= vertex[i].xget();
  }
  for(int i=0;i<points;i++)
  {
    tempY+= vertex[i].yget();
  }
  Point c(tempX/points,tempY/points);
  return *c;
}
//polygon.h
#ifndef _polygon_h
#define _polygon_h
#include "shape.h"
#include "point.h"

class Polygon : public Shape
{
  int points;
  Point* vertex;
  public:
  Polygon(char* , int);
  Point& operator()(int);
  Polygon& Polygon::operator=(Polygon& b);
  int pointsNum();
  ostream& display(ostream& os) const;
  Point& centroid() const;
  friend ostream& operator<<(ostream&,Polygon&);
};

#endif
//shape.cpp
#include<cstring>
#include<ostream>
#include "shape.h"
using namespace std;
Shape::Shape()
{
  name[0]='\0';
}
Shape::Shape(char* str)
{
  strcpy(name,str);
}

ostream& Shape::display(ostream& os) const
{
  os << name;
  return os;
}

char* Shape::nameget()
{
  return name;
}

Shape& operator=(Shape& a)
{
  strcpy(name,a.nameget());
}
//shape.h
#ifndef _shape_h
#define _shape_h
#include "showable.h"
#include "point.h"
class Shape : public Showable
{
  char name[30+1];
  public:
  Shape();
  Shape(char*);
  ostream& display(ostream&) const;
  char* nameget();
  virtual Point& centroid() const=0;
};
#endif
//showable.cpp
#include<ostream>
#include "showable.h"
using namespace std;

ostream& operator<<(ostream& os,Showable& a)
{
  a.display(os);
}
//showable.h
#ifndef _showable_h
#define _showable_h
class Showable
{
  public:
  virtual ostream& display(ostream&) const=0;

};

ostream& operator<<(ostream& os, Showable&);
#endif
//main.cpp

32 main.cpp point.cpp Polygon.cpp shape.cpp showable.cpp
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
main.cpp:
Error E2462 showable.h 8: 'virtual' can only be used with non-template memb
er functions
Error E2303 showable.h 8: Type name expected
Error E2139 showable.h 8: Declaration missing ;
Error E2141 showable.h 12: Declaration syntax error
Error E2303 point.h 12: Type name expected
Error E2139 point.h 12: Declaration missing ;
Error E2061 point.h 17: Friends must be functions or classes
Error E2139 point.h 17: Declaration missing ;
Error E2321 point.h 18: Declaration does not specify a tag or an identifier

Error E2303 shape.h 13: Type name expected
Error E2139 shape.h 13: Declaration missing ;
Error E2303 Polygon.h 17: Type name expected
Error E2139 Polygon.h 17: Declaration missing ;
Error E2061 Polygon.h 19: Friends must be functions or classes
Error E2139 Polygon.h 19: Declaration missing ;
Error E2321 Polygon.h 20: Declaration does not specify a tag or an identifi
er
Error E2094 main.cpp 13: 'operator<<' not implemented in type 'std::ostream
' for arguments of type 'Polygon' in function main()
*** 17 errors in Compile ***
point.cpp:
Error E2303 point.h 6: Type name expected
Error E2303 point.h 12: Type name expected
Error E2139 point.h 12: Declaration missing ;
Error E2061 point.h 17: Friends must be functions or classes
Error E2139 point.h 17: Declaration missing ;
Error E2321 point.h 18: Declaration does not specify a tag or an identifier

Error E2316 point.cpp 29: 'display' is not a member of 'Point'
*** 7 errors in Compile ***
Polygon.cpp:
Error E2462 showable.h 8: 'virtual' can only be used with non-template memb
er functions
Error E2303 showable.h 8: Type name expected
Error E2139 showable.h 8: Declaration missing ;
Error E2141 showable.h 12: Declaration syntax error
Error E2303 point.h 12: Type name expected
Error E2139 point.h 12: Declaration missing ;
Error E2061 point.h 17: Friends must be functions or classes
Error E2139 point.h 17: Declaration missing ;
Error E2321 point.h 18: Declaration does not specify a tag or an identifier

Error E2303 shape.h 13: Type name expected
Error E2139 shape.h 13: Declaration missing ;
Error E2303 Polygon.h 17: Type name expected
Error E2139 Polygon.h 17: Declaration missing ;
Error E2061 Polygon.h 19: Friends must be functions or classes
Error E2139 Polygon.h 19: Declaration missing ;
Error E2321 Polygon.h 20: Declaration does not specify a tag or an identifi
er
Warning W8004 Polygon.cpp 14: 'vertex' is assigned a value that is never us
ed in function Polygon::Polygon(char *,int)
Error E2094 Polygon.cpp 32: 'operator!=' not implemented in type 'Polygon'
for arguments of type 'int' in function Polygon::operator =(Polygon &)
Error E2316 Polygon.cpp 34: 'pointNum' is not a member of 'Polygon' in func
tion Polygon::operator =(Polygon &)
Error E2316 Polygon.cpp 35: 'pointNum' is not a member of 'Polygon' in func
tion Polygon::operator =(Polygon &)
Error E2015 Polygon.cpp 46: Ambiguity between 'ostream' and 'std::ostream'
Error E2238 Polygon.cpp 46: Multiple declaration for 'ostream'
Error E2344 showable.h 12: Earlier declaration of 'ostream'
Error E2141 Polygon.cpp 46: Declaration syntax error
*** 23 errors in Compile ***
shape.cpp:
Error E2462 showable.h 8: 'virtual' can only be used with non-template memb
er functions
Error E2303 showable.h 8: Type name expected
Error E2139 showable.h 8: Declaration missing ;
Error E2141 showable.h 12: Declaration syntax error
Error E2303 point.h 12: Type name expected
Error E2139 point.h 12: Declaration missing ;
Error E2061 point.h 17: Friends must be functions or classes
Error E2139 point.h 17: Declaration missing ;
Error E2321 point.h 18: Declaration does not specify a tag or an identifier

Error E2303 shape.h 13: Type name expected
Error E2139 shape.h 13: Declaration missing ;
Error E2015 shape.cpp 16: Ambiguity between 'ostream' and 'std::ostream'
Error E2238 shape.cpp 16: Multiple declaration for 'ostream'
Error E2344 showable.h 12: Earlier declaration of 'ostream'
Error E2141 shape.cpp 16: Declaration syntax error
*** 15 errors in Compile ***
showable.cpp:
Error E2462 showable.h 8: 'virtual' can only be used with non-template memb
er functions
Error E2303 showable.h 8: Type name expected
Error E2139 showable.h 8: Declaration missing ;
Error E2141 showable.h 12: Declaration syntax error
Error E2015 showable.cpp 7: Ambiguity between 'ostream' and 'std::ostream'
Error E2238 showable.cpp 7: Multiple declaration for 'ostream'
Error E2344 showable.h 12: Earlier declaration of 'ostream'
Error E2141 showable.cpp 7: Declaration syntax error
*** 8 errors in Compile *** 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:44:26.767

这个成员函数：

```
class Shape : public Showable
{
public:
    virtual Point& centroid()=0;
}; 
```

不由 实施`Polygon`。`Polygon`具有以下成员函数声明：

```
class Polygon : public Shape
{
public:
    Point& centroid() const;
}; 
```

这是与`Shape::centroid()`(note `const`) 不同的签名，并为`Polygon`. 这意味着它`Polygon`本身是抽象的，因为它不为在`virtual`中声明的纯函数提供实现`Shape`。

要修复，请`const`从声明和定义中删除限定符`Polygon::centroid()`（并确保返回类型`Point&`在定义中，因为它当前不在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:43:27.407

你有

```
 virtual Point& centroid()=0; 
```

在`Shape`和

```
 virtual Point& centroid() const; 
```

在`Polygon`- 不同的功能。cv 限定符是函数签名的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:57:40.370

```
class Showable
{
  public:
  virtual ostream& display(ostream&) const=0;
  /**/
  ostream& operator<<(ostream& os);
}; 
```

这里有一个潜在的问题：你真的应该为这个类设置一个虚拟析构函数。有一天，某人（可能是您）会尝试删除派生自`Showable`基类指针的类的实例。如果一个类有任何虚拟方法，那么将析构函数设为虚拟是个好主意。

# iphone - Apple Push Notification Provider 在自己的应用程序中

> ID：12783985
> 
> 赞同：1
> 
> 时间：2012-10-08T14:39:45.160
> 
> 标签：iphone, notifications, push, apple-push-notifications

我对自己的服务器端应用程序中的 apns 有一些疑问。我有一个应该能够向苹果发送推送通知的 java 应用程序。服务器和 iphone 应用程序正在运行，我的问题旨在分发服务器应用程序和证书。我可以将所有服务器分发给具有相同证书的用户吗？还是我必须向每个用户发送他们自己的服务器证书？每个服务器都应该能够将他们的推送消息发送到苹果服务器进行传递，例如：

服务器应用程序 <--> Apple Push Notification Server <--> iPhone / iPad 等...

那可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T14:43:10.993

每台服务器都应该配置证书，并且应该有用 JAVA 或任何其他语言（如 PHP 或 C#）编码的发送通知逻辑。

每台服务器都需要一个证书。

每台服务器都应针对 APNS 要求进行预配置。您需要构建启用了证书和端口的服务器。请查看 Ray wonderlinch 的 APNS 指南，您会在上面找到需要做的事情。

# facebook - 提交时打开图错误 - 发布流故事

> ID：12783986
> 
> 赞同：0
> 
> 时间：2012-10-08T14:39:45.747
> 
> 标签：facebook, facebook-graph-api, authentication, stream, publish

你能发现我的错误吗？

我真的很难让开放图形操作获得批准。我希望人们分享（操作）照片（对象）并请求用户消息和明确共享的功能。我从 Facebook 收到的最新评论是：

> 由于您的应用程序中出现错误，我们无法测试此操作。请通过使用 Auth Dialog Preview User 进行测试，确保您的操作正常运行并重新提交。

不是很有帮助！

我已经使用 Auth Dialog Preview User 测试了我的操作，并且效果很好。我还使用返回响应代码 200 的对象调试器测试了我的页面 - 这显然意味着一切都很好（正确吗？）。

下面是我在测试页面上使用的代码，希望有人能够指出我的错误在哪里，因为我看不到它：

```
<head>
meta tags here

<script type="text/javascript">
  function Share()
  {
      FB.api(
        '/me/NAMESPACE:share&photo=TEST PAGE URL&message=Cool photos&fb:explicitly_shared=true&access_token=ACCESS TOKEN','POST',  function(response) {
            if (!response || response.error) {
                alert('Error occured');
              } else {
                alert('Post was successful! Action ID: ' + response.id);
              }
        });
    }
  </script>

<script type="text/javascript">
window.fbAsyncInit = function() {
FB.Canvas.setAutoGrow();
}
// Do things that will sometimes call sizeChangeCallback()
function sizeChangeCallback() {
FB.Canvas.setSize({ width: 810, height: 1180 });
}
</script>
</head>
<body>
<div id="fb-root"></div>
    <script>
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));

      // Init the SDK upon load
      window.fbAsyncInit = function() {
        FB.init({
          appId      : 'APP ID', // App ID
          channelUrl : '//CHANNEL FILE URL', // Path to your Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true,  // parse XFBML
          oauth      :true
        });

        // listen for and handle auth.statusChange events
        FB.Event.subscribe('auth.statusChange', function(response) {
          if (response.authResponse) {
            // user has auth'd your app and is logged into Facebook
            FB.api('/me', function(me){
              if (me.name) {
                document.getElementById('auth-displayname').innerHTML = me.name;
              }
            })
            document.getElementById('auth-loggedout').style.display = 'none';
            document.getElementById('auth-loggedin').style.display = 'block';
          } else {
            // user has not auth'd your app, or is not logged into Facebook
            document.getElementById('auth-loggedout').style.display = 'block';
            document.getElementById('auth-loggedin').style.display = 'none';
          }
        });

        // respond to clicks on the login and logout links
        document.getElementById('auth-loginlink').addEventListener('click', function(){
          FB.login();
        });
        document.getElementById('auth-logoutlink').addEventListener('click', function(){
          FB.logout();
        }); 
      } 

      function loginUser() {    
     FB.login(function(response) { }, {scope:'publish_actions, email'});     
     }
    </script>

 <div id="auth-status">
        <div id="auth-loggedout">
          <a href="#" id="auth-loginlink"><img src="login_btn.png"></a>
        </div>
        <div id="auth-loggedin" style="display:none">

      </div>
    </div>

<form>
    <input class="shr-btn" type="button" value="" onClick="Share()" />
  </form>

</body> 
```

任何帮助将不胜感激。

非常感谢

D

* * *

啊啊啊啊 我现在收到了来自 Facebook 的回复：

> 您的代码当前配置为发布流故事。您必须更改代码，以便当测试用户触发操作时，它会生成一个开放的图表故事。请进行适当的更改并重新提交。

有人可以让我知道我做错了什么吗？我认为代码的设置是为了发布一个开放的图表故事——但显然是现在。

如果有人能指出我做错了什么，我将永远感激不尽。

非常感谢。

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:23:55.587

这似乎与您在这一行中传递附加参数的方式有关：

```
'/me/NAMESPACE:share&photo=TEST PAGE URL&message=Cool photos&
fb:explicitly_shared=true&access_token=ACCESS TOKEN','POST',  function(response) 
```

你真的想做更多类似的事情：

```
FB.api('/me/NAMESPACE:share', 'post', 
{ photo : 'TEST_PAGEURL', message : 'Cool photos' }, function(response)); 
```

这里重要的是包含您的自定义 JSON 内容作为函数的第三个参数。似乎 URL 参数方法可能会触发这种消息，因为它是一个较旧的实现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-27T17:27:46.263

不，这不是因为您正在使用动词“分享”来创建故事。我刚刚获得了 Facebook 批准的故事，我使用了动词“分享”。我的故事早些时候被拒绝了，原因和你的一样。

基本上，当您使用开放式图表故事时，您不能将内容发布到相册或任何其他类型的帖子。例如，以下是不允许的：

```
 $data = $facebook->api('/me/photos', 'post', $args);//disallowed                
                $facebook->api(
                  'me/invig-test:share',
                  'POST',
                  array(
                        'app_id' => $configParam['appId'],
                        'type' => "test:photo",
                        'photo' => "http://samples.ogp.me/574859819237737",                   
                        'title' => "a photo",
                        'image[0][url]'=>"http://www.testapp.com/".$imgFile,
                        'image[0][user_generated]'=>'true',
                        'message' => $comments,                   
                        'fb:explicitly_shared'=>true,
                    )
                  ); 
```

而是只做“分享”：

```
 $facebook->api(
                  'me/invig-test:share',
                  'POST',
                  array(
                        'app_id' => $configParam['appId'],
                        'type' => "test:photo",
                        'photo' => "http://samples.ogp.me/574859819237737",                   
                        'title' => "a photo",
                        'image[0][url]'=>"http://www.testapp.com/".$imgFile,
                        'image[0][user_generated]'=>'true',
                        'message' => $comments,                   
                        'fb:explicitly_shared'=>true,
                    )
                  ); 
```

# mongodb - Mongo map-reduce 输出，如何读回结果？

> ID：12783987
> 
> 赞同：0
> 
> 时间：2012-10-08T14:39:50.003
> 
> 标签：mongodb, mapreduce

我有一个“有效”的 map-reduce 查询，可以做我想做的事，但是到目前为止，我没有充分利用我的输出数据，因为我无法锻炼如何读回它......让我解释一下......这里是我的发射：

```
emit( { jobid: this.job_id, type: this.type}, { count: 1 }) 
```

和减少功能：

```
reduce: function (key, values) {
    var total = 0;
    for( i = 0; i < values.length; i++ ) {
        total += values[i].count;
    }
    return { jobid: this.job_id, type:this.type, count: total};
}, 
```

它的功能和我在结果集合中得到的输出如下所示：

```
{ "_id" : { "jobid" : "5051ef142a120", "type" : 3 }, "value" : { "count" : 1 } }
{ "_id" : { "jobid" : "5051ef142a120", "type" : 5 }, "value" : { "count" : 43 } }
{ "_id" : { "jobid" : "5051f1a9d5442", "type" : 2 }, "value" : { "count" : 1 } }
{ "_id" : { "jobid" : "5051f1a9d5442", "type" : 3 }, "value" : { "count" : 1 } }
{ "_id" : { "jobid" : "5051f299340b1", "type" : 2 }, "value" : { "count" : 1 } }
{ "_id" : { "jobid" : "5051f299340b1", "type" : 3 }, "value" : { "count" : 1 } } 
```

但是我怎么会发出一个查询，说通过“jobid”找到我所有的jobid条目而忽略类型？我最初尝试过，期望有两行输出，但没有！

```
db.mrtest.find( { "_id": { "jobid" : "5051f299340b1" }} ); 
```

我也尝试过但失败了：

```
db.mrtest.find( { "_id": { "jobid" : "5051f299340b1" }} ); 
```

同时：

```
db.mrtest.find( { "_id" : { "jobid" : "5051f299340b1", "type" : 2 }} ) 
```

确实产生了所希望的一行输出，再次将其更改为此无法产生任何结果：

```
db.mrtest.find( { "_id" : { "jobid" : "5051f299340b1", "type" : { $in: [2] }}} ) 
```

我的印象是你不能用 _id 字段做这样的事情，或者你可以吗？我想我需要重新组织我的 mr 输出，但这感觉就像以某种方式失败？！？！

帮助！

PS：如果有人能解释为什么计数包含在一个名为“值”的字段中，那也很受欢迎！“5051f299340b1”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:45:08.670

```
db.mrtest.find( { "_id.jobid": "506ea3a85e126" }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:48:46.523

你有没有尝试过：

```
db.mrtest.find( { "_id.jobid": "506ea3a85e126" }) 
```

这对我行得通！

# java - 如何让 TestNG-@Factory 以特定顺序实例化测试类？

> ID：12783989
> 
> 赞同：0
> 
> 时间：2012-10-08T14:39:52.250
> 
> 标签：java, selenium, testng

我正在使用 TestNG 进行硒测试。有一个名为“创建公司”的测试需要在我的笔记本电脑上运行多次。

所以我为此编写了一个名为“CreateFirm”的类，各种公司的数据都保存在一个 Excel 电子表格中。

在不同的时间，我需要创建各种公司集，我使用 Excel 电子表格中的一列来控制它们，其中包含我的计算机名称。

我使用@Factory 创建我的“CreateFirm”类，它有一个@Test 方法来创建一个公司。

在 excel 电子表格中如果我以相同的顺序将 Firm1、Firm2、Firm3、Firm4 分配给我的笔记本电脑，@Factory 会以随机顺序创建它们，例如 Firm4、Firm3、Firm1、Firm2

我的问题是如何让@Factory 按我想要的顺序创建测试实例？

我的@Factory 方法是

```
 @Factory
  public Object[] runCreateFirm()
  {

        //This is where I get the list of test cases assigned to my laptop
        this.test_id_list=get_test_ids_for_test_run("Create Firm (class approach).xls", "Global");      

        Object[] result = new Object[this.test_id_list.size()];

        int index=0 ;
        for (String firm_id: this.test_id_list)
        {
            //This is where I get all the test data from the Excel spreadsheet
            HashMap<String,String> test_data_row=this.get_row_from_excel("Create Firm (class approach).xls", "Global", "test_case_id", firm_id);

            System.out.println("Inside Firm Factory ,index="+index +", test case id="+ test_data_row.get("test_case_id"));

            //CreateFirm is the class which will use the data and do all the UI actions to create a Firm
            result[index]=new CreateFirm(test_data_row);
            index++;
        }
        return result;
  } 
```

XML 是

```
 <?xml version="1.0" encoding="UTF-8"?>
<suite name="CreateFirm Suite">
  <test name="Create Firm Test"  order-by-instances="false">
    <classes>
      <class name="regressionTests.factory.CreateFirmFactory"/>
    </classes>
  </test>
</suite> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:18:11.253

设法为我的要求编写拦截器方法。首先，我在课堂上介绍了一个名为“优先级”的新领域。我不能使用@Priority，因为我的测试类只有一个测试方法，在这种情况下，我的所有实例都将具有相同的优先级。所以我引入了一个名为priority的新字段，它将具有类应该被实例化的顺序。我在拦截器方法中使用该字段来设置实例化的顺序

```
public List<IMethodInstance> intercept(List<IMethodInstance> methods,ITestContext context) 
{

    List<IMethodInstance> result = new ArrayList<IMethodInstance>();
    int array_index=0;

    for (IMethodInstance m : methods)
    {
        result.add(m);
    }
    //Now iterate through each of these test methods
    for (IMethodInstance m : methods)
    {
        try {               
            //Get the FIELD object from - Methodobj->method->class->field
            Field f = m.getMethod().getRealClass().getField("priority");
            //Get the object instance of the method object              
            array_index=f.getInt(m.getInstance());
        } 
         catch (Exception e) {
            e.printStackTrace();
        }           
        result.set(array_index-1, m);           
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:32:57.433

工厂实例化测试类，它不运行它们。如果您需要特定的测试顺序，则在依赖项（组和方法）、优先级和方法拦截器之间有很多选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-18T07:49:36.373

参考[https://github.com/cbeust/testng/issues/1410](https://github.com/cbeust/testng/issues/1410)获取解决方案，并从 krahadevan 给出的示例中得到提示。谢谢一堆KR。我在 Eclipse 中使用 TestNG 插件版本 6.14.0.201802161500。

只需在测试类中覆盖 toString 方法就可以了。在此 toString 方法中返回关键参数，例如 Firm1、Firm2 等。请参考以下代码以获得清晰的理解。

测试类.java

```
import org.testng.annotations.Test;

public class TestClass {

    String testcaseName;

    public TestClass(String testcaseName) {
        this.testcaseName = testcaseName;
    }

    @Test
    public void sendCmd() {
        System.out.println("Testcase received "+this.testcaseName);
    }

    @Override 
    public String toString() { 
        return this.testcaseName; 
    }
} 
```

工厂类.java

```
import org.testng.annotations.DataProvider;
import org.testng.annotations.Factory;

public class FactoryClass {

    @DataProvider
    public static String[][] createTestCmds() {
       String[][] testData = new String[6][1];
        for (int i = 0, j= 6; i < 6 ; i++,j--) {
            testData[i][0]="Firm "+i;
        }
       return testData;
    }

    @Factory(dataProvider = "createTestCmds")
    public Object[] Factory(String testcaseName) {
        return new Object[] {new TestClass(testcaseName)};
    }
} 
```

测试.java

```
import java.util.Collections;

import org.testng.TestNG;
import org.testng.xml.XmlClass;
import org.testng.xml.XmlSuite;
import org.testng.xml.XmlTest;

public class Test {
    public static void main(String[] args) {
        TestNG testng = new TestNG();
        XmlSuite xmlSuite = new XmlSuite();
        xmlSuite.setGroupByInstances(true);
        xmlSuite.setName("Sample_Test_Suite");
        XmlTest xmlTest = new XmlTest(xmlSuite);
        xmlTest.setName("Sample_Test");
        xmlTest.setClasses(Collections.singletonList(new XmlClass(FactoryClass.class)));
        testng.setXmlSuites(Collections.singletonList(xmlSuite));
        testng.setVerbose(2);
        System.err.println("Printing the suite xml file that would be used.");
        System.err.println(xmlSuite.toXml());
        testng.run();
    }
} 
```

# 结果

```
Testcase received Firm 0
Testcase received Firm 1
Testcase received Firm 2
Testcase received Firm 3
Testcase received Firm 4
Testcase received Firm 5
PASSED: sendCmd on Firm 0
PASSED: sendCmd on Firm 1
PASSED: sendCmd on Firm 2
PASSED: sendCmd on Firm 3
PASSED: sendCmd on Firm 4
PASSED: sendCmd on Firm 5

===============================================
    Sample_Test
    Tests run: 6, Failures: 0, Skips: 0
===============================================

===============================================
Sample_Test_Suite
Total tests run: 6, Failures: 0, Skips: 0
=============================================== 
```

我面临的这个问题。我得到了如上所述的解决方案。

# java - Java XML Transformer：长符号而不是短符号的空元素

> ID：12783991
> 
> 赞同：0
> 
> 时间：2012-10-08T14:40:06.200
> 
> 标签：java, xml, transformer

我创建了一个转换工具来将一些信息添加到现有的 xml 文件中。这是通过使用 DOM 和 Transformer 类来完成的。输出文件将由第三方软件处理。此 TPS 需要长表示法中输入和输出文件中的空标签。

不幸的是，transformer 类总是将它们更改为短符号。有没有办法防止这种情况发生？

我一直在搜索各种网站，但还没有找到真正适合我需求的解决方案。

请帮助，谢谢，亲切的问候， Maarten

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:54:17.150

您可以将 转换`DOM`为`StAXResult`。

例如，

```
 XMLOutputFactory factory=XMLOutputFactory.newFactory();
 XMLStreamWriter writer=factory.createXMLStreamWriter(System.out);
 StAXResult result=new StAXResult(writer);
 trans.transform(new DOMSource(doc),result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:15:19.437

```
 XMLOutputFactory factory = XMLOutputFactory.newFactory();
                XMLStreamWriter writer = factory.createXMLStreamWriter(System.out);
                StAXResult result = new StAXResult(writer);
                TransformerFactory transformerFactory = TransformerFactory.newInstance();
                Transformer transformer = transformerFactory.newTransformer();
                transformer.transform(new DOMSource(doc), result); 
```

# java - 为什么将 Scala 伴随对象编译为两个类（Java 和 .NET 编译器）？

> ID：12783994
> 
> 赞同：11
> 
> 时间：2012-10-08T14:40:17.883
> 
> 标签：java, .net, scala, compiler-construction, companion-object

```
object ScalaTrueRing {
  def rule = println("To rule them all")
} 
```

这段代码会被编译成java字节码，如果我反编译，那么等效的java代码是这样的：

```
public final class JavaTrueRing
{
  public static final void rule()
  {
    ScalaTrueRing..MODULE$.rule();
  }
}

/*    */ public final class JavaTrueRing$
/*    */   implements ScalaObject
/*    */ {
/*    */   public static final  MODULE$;
/*    */ 
/*    */   static
/*    */   {
/*    */     new ();
/*    */   }
/*    */ 
/*    */   public void rule()
/*    */   {
/* 11 */     Predef..MODULE$.println("To rule them all");
/*    */   }
/*    */ 
/*    */   private JavaTrueRing$()
/*    */   {
/* 10 */     MODULE$ = this;
/*    */   }
/*    */ } 
```

它被编译成两个类，如果我使用Scala.net编译器，它会被编译成MSIL代码，等效的C#代码是这样的：

```
public sealed class ScalaTrueRing
{
    public static void rule()
    {
        ScalaTrueRing$.MODULE$.rule();
    }
}

[Symtab]
public sealed class ScalaTrueRing$ : ScalaObject
{
    public static ScalaTrueRing$ MODULE$;
    public override void rule()
    {
        Predef$.MODULE$.println("To rule them all");
    }
    private ScalaTrueRing$()
    {
        ScalaTrueRing$.MODULE$ = this;
    }
    static ScalaTrueRing$()
    {
        new ScalaTrueRing$();
    }
} 
```

它也被编译成两个类。

为什么 Scala 编译器（用于 Java 的编译器和用于 .NET 的编译器）这样做？为什么不直接调用静态规则方法中的println方法呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T15:55:43.090

重要的是要理解，在 scala 中，an`object`实际上是一等公民：它是一个可以作为任何其他对象传递的实际实例。举例：

```
trait Greetings {
  def hello() { println("hello") }
  def bye() { println("bye") }
}

object FrenchGreetings extends Greetings {
  override def hello() { println("bonjour") }
  override def bye() { println("au revoir") }
}

def doSomething( greetings: Greetings ) {
  greetings.hello()
  println("... doing some work ...")
  greetings.bye()
}

doSomething( FrenchGreetings ) 
```

与静态方法不同，我们的单例对象具有完全的多态行为。`doSomething`确实会调用我们的重写`hello`和`bye`方法，而不是默认实现：

```
bonjour
... doing some work ...
au revoir 
```

所以`object`实现必须是一个合适的类。但是为了与 java 的互操作性，编译器还会生成静态方法，这些方法只转发到`MODULE$`类的唯一实例 ( )（请参阅 JavaTrueRing.rule()）。这样，java 程序就可以像普通的静态方法一样访问单例对象的方法。现在你可能会问为什么 scala 不把静态方法转发器和实例方法放在同一个类中。这会给我们类似的东西：

```
public final class JavaTrueRing implements ScalaObject {
  public static final  MODULE$;

  static {
    new JavaTrueRing();
  }

  public void rule() {
    Predef.MODULE$.println("To rule them all");
  }

  private JavaTrueRing() {
    MODULE$ = this;
  }

  // Forwarders
  public static final void rule() {
    MODULE$.rule();
  }  
} 
```

我相信这不能这么简单的主要原因是因为在 JVM 中，您不能在同一个类中拥有具有相同签名的实例方法和静态方法。不过可能还有其他原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T15:37:53.457

解释自“Scala 中的编程” - 因为 Scala 伴随对象（单例对象）不仅仅是静态方法的持有者。通过作为不同 Java 类的实例，它允许开发人员扩展单例对象和混合特征。这不能用静态方法来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:45:05.700

这篇[博客文章“看看 Scala 如何编译为 Java”](http://blog.thegodcode.net/post/239967776/a-look-at-how-scala-compiles-to-java)应该会回答您的问题

通常 ClassName$.class 是内部类的结果 - Scala 显然略有不同。

# asp.net - 带有查询字符串的 web.config 重定向到另一个域

> ID：12783996
> 
> 赞同：0
> 
> 时间：2012-10-08T14:40:20.130
> 
> 标签：asp.net, web-config, url-redirection

我在我的网站上有当前位置：

```
http://my-domain.com/ccy/app.html?from=GBP&to=EUR... 
```

我想使用 web.config 将所有对`/ccy`文件夹的调用重定向到另一个包含相同查询字符串的域，所以它去了。

```
http://my-other-domain.com/another-folder/app.html?from=GBP&to=EUR 
```

如何使用 IIS7 实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:53:37.527

您可以在 IIS 7 中使用[Url Rewrite 模块](http://www.iis.net/downloads/microsoft/url-rewrite)。以下规则应该适用于您的情况：

```
<system.webServer>
  <rewrite>
    <rules>
      <rule name="DynamicRewrite" stopProcessing="true">
        <match url="ccy/(.*)" />
        <conditions>
          <add input="{REQUEST_FILENAME}\.html" matchType="IsFile" />
        </conditions>
        <action type="Redirect" url="http://my-other-domain.com/another-folder/{R:1}.html" />
      </rule>
    </rules>
  </rewrite>  
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:45:46.020

您可能希望使用 mod rewrite 将任何对 ccy 的请求重写到另一个文件夹。

这是一个涵盖 IIS7 的 mod 重写的链接。

[http://www.micronovae.com/ModRewrite/ModRewrite.html](http://www.micronovae.com/ModRewrite/ModRewrite.html)