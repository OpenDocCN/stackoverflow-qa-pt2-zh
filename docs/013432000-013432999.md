# StackOverflow 问答 13432000-13432999

# mysql - 如何在 MySQL 中停止“无法创建/写入文件”（错误代码：2）？

> ID：13432003
> 
> 赞同：0
> 
> 时间：2012-11-17T15:32:33.110
> 
> 标签：mysql, tmp

我现在经常收到错误：

```
#1 - Can't create/write to file '/tmp/#sql_1a2_3.MYI' (Errcode: 2) 
```

从我的 MySQL 服务器。在我重新启动守护程序之前，它会锁定对数据的任何查询或更改。然后它会自行修复一段时间，然后再次发生。我尝试在具有 777 权限的 tmp 目录中的文件上使用 touch，并且我还尝试将 tmp 目录移动到 MySQL 目录 (/var/lib/mysql/tmp) 中：

[MySQL 错误 1 ​​(HY000) 无法创建文件 Errcode 2](https://stackoverflow.com/questions/981029/mysql-error-1-hy000-trouble-creating-file-errcode-2)

两者都没有奏效。我的 tmp 目录远未满，有 90% 以上的可用空间，因此此问题的最佳答案不适用：

[MySQL：无法创建/写入文件'/tmp/#sql_3c6_0.MYI'（Errcode：2） - 它甚至意味着什么？](https://stackoverflow.com/questions/11997012/mysql-cant-create-write-to-file-tmp-sql-3c6-0-myi-errcode-2-what-does)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:11:38.223

我已经看到这是由在具有许多连接的复杂查询期间创建的巨大临时表引起的。想想你的应用程序中哪里可能存在这样的查询，并在监控磁盘活动/可用空间的同时尝试触发它。这就是我们发现正在发生的事情的方式。作为一种解决方案，您可以为临时表（默认为 /tmp）提供更多空间，或者尝试重构查询。/tmp 是空的并且当您查看它时有足够的空间这一事实并不意味着它在查询执行期间没有全部被消耗掉。在我们的例子中，/tmp 可能会占用磁盘上的所有可用空间，并且它实际上是在执行这个特别复杂的查询期间发生的，并因与您的错误类似的错误而中断，因为即使这样还不够。

# asp.net - 当文件保存在数据库中时，gridview 中上传文件的图标

> ID：13432005
> 
> 赞同：0
> 
> 时间：2012-11-17T15:32:45.823
> 
> 标签：asp.net, linq

在我对（gridview 中上传文件的图标）有疑问并收到以下代码之前。

这段代码似乎适用于我们在服务器中保存文件时。现在，如果我们将文件保存在数据库中，我必须如何更改代码。

```
using System.Drawing;
using System.IO;

public string GetIconFromFile()
{
Icon ic = Icon.ExtractAssociatedIcon(Server.MapPath (".")+"/Files/Test.txt");
string imagePath=Server.MapPath(".") + "/Images/Test.ico";
if (ic != null)
{
   using (FileStream stream = new FileStream(imagePath, FileMode.OpenOrCreate))
   {
       ic.Save(stream);
    }
}
    return imagePath ;

}

protected void GridViewEfile_RowDataBound(object sender, GridViewRowEventArgs e)
{
if (e.Row.RowType == DataControlRowType.DataRow)
{
    System.Web.UI.WebControls.Image img = new System.Web.UI.WebControls.Image();
    img = (System.Web.UI.WebControls.Image)e.Row.FindControl("Image1");
    img.ImageUrl = GetIconFromFile();
}
} 
```

.aspx

```
 <Columns>
 <asp:TemplateField>
 <ItemTemplate>
    <asp:Image ID="Image1" runat="server" />
      <asp:LinkButton ID="LinkButton1" runat="server" OnCommand="LinkButton1_Command" CommandName="Download" CommandArgument='<%#Eval("FileID")%>'><%#Eval("FileName")%></asp:LinkButton>
  </ItemTemplate>
</asp:TemplateField> 
```

当我想保存在数据库中时，上传按钮的代码如下所示，请帮助改变函数（GetIconFromFile（）），特别是当我们需要 filename.ico

```
protected void btnUpload_Click(object sender, EventArgs e)
{

    // Read the file and convert it to Byte Array

    string filePath = FileUpload1.PostedFile.FileName;

    string filename = Path.GetFileName(filePath);

    string ext = Path.GetExtension(filename);

    string contenttype = String.Empty;

    //Set the contenttype based on File Extension

    switch (ext)
    {

        case ".doc":

            contenttype = "application/vnd.ms-word";

            break;

        case ".docx":

            contenttype = "application/vnd.ms-word";

            break;

        case ".xls":

            contenttype = "application/vnd.ms-excel";

            break;

        case ".xlsx":

            contenttype = "application/vnd.ms-excel";

            break;

        case ".jpg":

            contenttype = "image/jpg";

            break;

        case ".png":

            contenttype = "image/png";

            break;

        case ".gif":

            contenttype = "image/gif";

            break;

        case ".pdf":

            contenttype = "application/pdf";

            break;

    }

    if (contenttype != String.Empty)
    {

        Stream fs = FileUpload1.PostedFile.InputStream;

        BinaryReader br = new BinaryReader(fs);

        Byte[] bytes = br.ReadBytes((Int32)fs.Length);
        //insert the file into database 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:06:23.870

您必须更改函数**GetIconFromFile**，您必须在其中编写代码

1.  将图标文件保存在数据库中。

    要保存图像，请参阅[此](http://www.codeproject.com/Articles/33310/C-Save-and-Load-Image-from-Database)

2.  将数据库中的图像显示到gridview中

    在gridview中显示参考[这个](http://www.dotnetspider.com/forum/308387-How-Display-Image-Gridview-From-database-without-using-Handler-file.aspx)

# php - 使用 php 获取 h1 标签值

> ID：13432009
> 
> 赞同：0
> 
> 时间：2012-11-17T15:33:42.470
> 
> 标签：php

我想将 h1 标签下的值提交到我的 Sql 表中

例如，如果这是给定的输入字符串：

```
 <h1>hello</h1> 
```

如何用 php 回显“hello”（这是与表单一起提交的隐藏值）

```
 <input type="hidden" name="post_id" id="post_id" value="<?php
    echo $Pattern = "/<h1>(.*?)<\/h1>/";
    ?>" /> 
```

上面写着

```
/<h1>(.*?)</h1>/ 
```

进我的桌子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:40:27.050

您是否在尝试将 HTML 插入数据库之前对其进行转义？`mysql_real_escape_string($htmlyouwant);`

和

```
echo  "<h1>".$message."</h1>"; 
```

# jquery-plugins - 如何动态设置 Fullcalendar 选项

> ID：13432014
> 
> 赞同：14
> 
> 时间：2012-11-17T15:34:15.283
> 
> 标签：jquery-plugins, fullcalendar

创建日历后如何设置`minTime`和选项？`maxTime`

我尝试了以下方法，但不起作用：

```
$('#calendar').fullCalendar('option', 'minTime', 7);
$('#calendar').fullCalendar('render'); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-23T12:49:10.700

我不知道它是否仍然相关，但我可以使用以下语句更改选项：

可选示例：

```
$('#calendar').fullCalendar('getView').calendar.options.selectable = false;
$('#calendar').fullCalendar('render'); // rerender to see visual changes 
```

虽然它不是动态的，但至少您不必销毁整个日历并重新获取您的事件:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T07:19:36.180

如果不重新创建日历，则无法完成。

**更新：** 可以在 v 2.9 中完成：见[下文](https://stackoverflow.com/a/38299511/628699)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-11T05:07:45.963

此功能已在 v2.9.0 中正式发布：http: [//fullcalendar.io/docs/utilities/dynamic_options/](http://fullcalendar.io/docs/utilities/dynamic_options/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-05T09:20:51.207

通过这种方式，您可以更改任意数量的日历选项：

```
// save the calendar options in a variable
var calendarOptions = $('#calendar')
     .fullCalendar('getView')
     .options;

// make your changes to the calendar options
// I wanted to change the slotDuration
calendarOptions.slotDuration = '00:20:00';

// destroy the calendar
$('#calendar')
     .fullCalendar('destroy');

//Lets load the calendar with the new options
$('#calendar')
     .fullCalendar(calendarOptions); 
```

希望这可以帮助。谢谢。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T16:10:03.660

此功能存在一个未解决的问题：

[https://code.google.com/p/fullcalendar/issues/detail?id=293](https://code.google.com/p/fullcalendar/issues/detail?id=293)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-25T15:47:42.473

只是我哥们的回答实际上是我发现自己的唯一方法。

这只是前一个答案的补充：如果您想更改可编辑选项，如果您想在更新数据库之前锁定事件以要求确认更改，这非常有用，这有点棘手。如果它可以节省一些时间给我转储代码的人：

```
var view = $('#calendar').fullCalendar('getView');
view.calendar.options.editable = false;
view.calendar.overrides.editable = false;
view.calendar.viewSpecCache.month.options.editable = false;
view.calendar.viewSpecCache.agendaWeek.options.editable = false;
view.calendar.viewSpecCache.agendaDay.options.editable = false;
$('#calendar').fullCalendar('render'); 
```

您显然将所有这些 false 更改为 true 以解锁。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-28T20:18:38.520

这段代码对我来说很好。在任何地方调用这个函数并向它传递尽可能多的自定义变量，但不要忘记先销毁以前的日历

```
function initializeCalendar( timeIntervalCustom ) {
  $('#calendar'+id).fullCalendar({
  slotMinutes: timeIntervalCustom,

});                       

}

$('#calendar').fullCalendar("destroy");
initializeCalendar(10); 
```

# php - 构建一个 PHP 路由器

> ID：13432016
> 
> 赞同：6
> 
> 时间：2012-11-17T15:34:30.767
> 
> 标签：php, url-routing

> **可能重复：**
> [将 URL 路由转换为函数参数 php mvc](https://stackoverflow.com/questions/4111358/turn-url-route-into-funciton-arguments-php-mvc)
> [CMS Routing in MVC](https://stackoverflow.com/questions/11770104/cms-routing-in-mvc)

我目前正在尝试重写 PHP 路由器。

新的 htaccess 重写具有以下内容。

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    public/    [L]
    RewriteRule    (.*) public/index.php?url=$1    [L]
</IfModule> 
```

在 index.php 中`public`，我正在使用`$url = $_GET['url'];`

我需要做的是传递`$url`给路由器功能::`route($url)`

如果 URL 以 : /page/function/$params 的形式传递，然后将转换为 : `index.php?url=page/xapp/function`，我需要映射并路由到 Controller`xapp`并调用`function($params)`.

此时，自动加载器已被调用。如果仅调用 /page/ ，我还需要设置要调用的默认函数。

我将如何在路由器中实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T15:59:46.390

您应该查看[klein.php](https://github.com/chriso/klein.php)的代码，这是一个小型 php 路由器。我认为您应该从该解决方案中弄清楚。

如果没有，请[在此处查看](https://github.com/codeguy/Slim)**苗条**

# c# - Await Task.WhenAll() 内部任务不等待

> ID：13432017
> 
> 赞同：5
> 
> 时间：2012-11-17T15:34:40.017
> 
> 标签：c#, task-parallel-library, async-await

我的问题是，当一个任务有一个 Task.WhenAll() 调用（运行其他任务）时，WhenAll() 行使消费代码继续执行，这与我所期望的不同。因此，以下代码在 Task.WhenAll() 被命中时立即输出“完成”，而不是在其参数中的所有任务都完成之后。

```
 // Just a simple async method
    public Task DoWorkAsync()
    {
        return Task.Factory.StartNew(
            () =>
            {
                // Working
            });
    }

    // This one used the previous one with Task.WhenAll()
    public Task DoLoadsOfWorkAsync()
    {
        return Task.Factory.StartNew(
            async () =>
            {
                // Working
                // This line makes the task return immediately
                await Task.WhenAll(DoWorkAsync(), DoWorkAsync());
                // Working
            });
    }

    // Consuming code
    await DoLoadsOfWorkAsync();
    Console.WriteLine("finished"); 
```

我希望在执行 DoLoadsOfWorkAsync() 的最后一行时调用 WriteLine()。

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-17T15:41:50.697

[`Task.WhenAll`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.whenall.aspx)立即返回一个新的[`Task`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.aspx)，它不会阻塞。当所有传递给的任务都完成时，返回的任务将`WhenAll`完成。

它是 的异步等价物[`Task.WaitAll`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.waitall.aspx)，如果你想阻塞，这是使用的方法。

但是，您还有另一个问题。使用[`Task.Factory.StartNew`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.taskfactory.startnew.aspx)和传递`async`委托似乎会导致`Task<Task>`外部任务在内部任务开始执行时完成（而不是在完成时）。

使用较新的[`Task.Run`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.run.aspx)可以避免这种情况。

# git - 使用 ScriptAliasMatch 时忽略 .htaccess

> ID：13432018
> 
> 赞同：2
> 
> 时间：2012-11-17T15:34:43.713
> 
> 标签：git, apache, .htaccess, apache-config

我想准备一些通过 http/https 可用的 GIT 存储库。我在这里和那里阅读并了解了[git-http-backend](http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)，我按照教程并设法让一切正常工作。我可以克隆提供在我的 htpasswd 文件中指定的凭据的存储库（我们现在假设 user1 和 user2）并将更改推回。

我的存储库位于**/var/www/git**中，gitweb 也是如此。

**等/httpd/conf.d/git.conf**：

```
SetEnv GIT_PROJECT_ROOT /var/www/git
SetEnv GIT_HTTP_EXPORT_ALL

ScriptAliasMatch \
    "(?x)^/git/(.*/(HEAD | \
                    info/refs | \
                    objects/(info/[^/]+ | \
                             [0-9a-f]{2}/[0-9a-f]{38} | \
                             pack/pack-[0-9a-f]{40}\.(pack|idx)) | \
                    git-(upload|receive)-pack))$" \
    /usr/libexec/git-core/git-http-backend/$1

ScriptAlias /git /var/www/git/gitweb.cgi

<Location /git>
    AuthType Basic
    AuthName "Basic Auth"
    AuthBasicProvider file ldap

    # LDAP
    AuthzLdapAuthoritative Off
    AuthLDAPURL "ldap://[...]/CN=Users,DC=ad,DC=example,DC=com?sAMAccountName"
    AuthLDAPBindDN "CN=Administrator,CN=Users,DC=ad,DC=example,DC=com"
    AuthLDAPBindPassword Password11

    # FILE 
    AuthUserFile /var/www/htpasswd
    AuthGroupFile /var/www/git.groups
    Require valid-user
</Location> 
```

我克隆存储库

```
git clone http://localhost/git/gitrepo
Username for 'http://localhost/git/gitrepo': user1
Password for 'http://user1@localhost': XXXXX 
```

问题是我正在尝试设置基于存储库的授权，我只希望一组用户能够访问每个存储库。我发现使用 .htaccess 文件将是完美的解决方案（无需重新启动服务器），因此我在存储库的目录 /var/www/git/gitrepo 中放置了一个简单的 .htaccess ：

```
Require User test2 
```

从理论上讲，应该禁止使用 test1 克隆/推送更改，但它仍然有效。事实证明，.htaccess 被忽略了，因为无论我放什么，如果我经过身份验证，我都可以克隆存储库。

我认为**ScriptAliasMatch**可能存在问题，也许所有处理都转到 git-http-backend exec 并且它不会返回到 Apache，因为它重定向了所有流量？我是 Apache 的新手，所以这可能是一个简单的故事，但请帮助！:)

**更新 1**：是的，AllowOverride 在 /var/www/git 的主配置中设置为“全部”：

```
<Directory "/var/www/git">
    AllowOverride All
</Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T06:44:57.260

您的 /var/www/git 目录位于正常的 Web 文档树之外。这是一件好事，但这意味着只有 git-http-backend 才能真正访问这个目录，而不是 Web 服务器，因此任何 .htaccess 文件都不会被读取。

您要么需要在服务器 conf 区域中进行身份验证，因此它对 URL 进行身份验证，要么作为 git-http-backend 程序所在的包装器。

可以在单个服务器上拥有多个 GIT 存储库，尽管很少有文档详细说明如何执行此操作。

# c# - 句子无效时如何停止？它仍然写入字符数

> ID：13432025
> 
> 赞同：1
> 
> 时间：2012-11-17T15:35:38.170
> 
> 标签：c#

```
 // If statement, User input is executed
 if (userInput == "k")
 {
   // User enters their statement
   Console.WriteLine("Enter your statement");
   myScen = Convert.ToString(Console.ReadLine()); 
```

句号代码

```
 // Does the sentence end with a full stop?
   if (myScen.EndsWith("."))
      Console.WriteLine("\n\tSentence Ended Correctly");

   else
      Console.WriteLine("Invalid Sentence"); 
```

这里需要一个停止命令。这是它不会停止并继续计算数字的地方

```
 // Calculate number of characters
   foreach (char c in myScen)
   {
      numbChar++;
      if (c == ' ')
         continue;

      newScen += c;
   }
   Console.WriteLine("\n\tThere are {0} characters. \n\n\n",numbChar);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:41:27.320

让我试试：

```
if (myScen.EndsWith("."))
{
    Console.WriteLine("\n\tScentence Ended Correctly");
    // Calculate number of characters
    foreach (char c in myScen)
    {
        numbChar++;
        if (c == ' ')
            continue;

        newScen += c;
    }
    Console.WriteLine("\n\tThere are {0} characters. \n\n\n",numbChar);
}
else
    Console.WriteLine("Invalid Scentence"); 
```

因此，仅当您的句子有效时才计算字符数。否则只打印一条消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:42:02.337

您不需要将`Console.ReadLine()`调用结果转换为字符串，因为它已经是字符串。

```
if (userInput == "k")
{
   Console.WriteLine("Enter your statment");
   myScen = Console.ReadLine();

   if (myScen.EndsWith(".")) 
   { // use block of code here
       Console.WriteLine("\n\tScentence Ended Correctly");
       // Calculate number of characters...
   }
   else
       Console.WriteLine("Invalid Scentence");       
} 
```

您也可以通过这种方式计算非空白字符`mySen.Replace(" ", "").Length`

# magento - 自定义 Magento 模块

> ID：13432029
> 
> 赞同：1
> 
> 时间：2012-11-17T15:36:07.120
> 
> 标签：magento, module, admin

所以我在后端创建了一个模块，我创建了一个 shell 模块（管理顶部菜单中的项目和一个要访问的页面。）基本上我想要一个输入字段，管理员可以输入一个数字然后单击一个按钮“添加"，这将在数据库中的现有表中插入一行。

```
$connection = Mage::getSingleton('core/resource')->getConnection('core_write');

$connection->beginTransaction();
$fields = array();
$fields['name']= 'andy';
$connection->insert('test', $fields);
$connection->commit(); 
```

我的数据库中有一个名为“test”的表。如果我将上面的代码放入我的控制器文件中，当我访问管理页面时，它会成功地向数据库添加一行。但我需要允许用户输入插入的数据。

我是否必须将该代码移动到模型中并以某种方式将输入数据发送到模型并让它完成工作？或不。如果这是正确的，有人可以指出我研究将数据发送到模型的好地方吗？（如果可能的话）

iv 尝试了很多教程，但它们对于我需要的东西来说都很大，我不需要显示任何东西，我只需要一个输入框和一个保存按钮。

编辑

我创建了一个文件块/Adminhtml/Form/Edit/Form.php，其中包含以下内容。. .

```
class AndyBram_Presbo_Block_Adminhtml_Form_Edit_Form extends Mage_Adminhtml_Block_Widget_Form
{
protected function _prepareForm()
{
$form = new Varien_Data_Form(
array(
'id' => 'edit_form',
'action' => $this->getUrl('*/*/test'),
'method' => 'post',
)
);

$form->setUseContainer(true);
$this->setForm($form);

$fieldset = $form->addFieldset('display', array(
'legend' => 'Display Settings',
'class' => 'fieldset-wide'
));

$fieldset->addField('label', 'text', array(
'name' => 'label',
'label' => 'Label',
));

if (Mage::registry('andybram_presbo')) {
$form->setValues(Mage::registry('andybram_presbo')->getData());
}

return parent::_prepareForm();
}
} 
```

然后在我的控制器中，我有 2 个功能，如下所示。. .

```
public function indexAction()
    {
        $this->loadLayout();

        $this->_addContent($this->getLayout()->createBlock('presbo/adminhtml_form_edit_form'));

    }   
    public function testAction()
    {
        echo 'form data here';
        $this->loadLayout();
        $this->renderLayout();

    } 
```

表单显示成功，但没有发送按钮或说“执行操作”

进一步编辑

我已成功向表单添加了一个提交按钮，该按钮成功进入 testAction 并回显“此处的表单数据”。

然后我如何访问数据，

iv 添加了以下行

```
$postData = $this->getRequest()->getPost(); 
```

现在，如果我回显 $postData，它只会放置“数组”

如果我回显 $postData[0] 它不会放任何东西只是一个空白页

任何想法或指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:16:14.083

Magento 是作为[MVC 框架构建](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的，因此您是对的 - 您需要将数据从控制器传递到模型，并且不要直接在控制器的代码中进行任何数据库更新。示例的最佳来源是自己的 Magento 代码 - 您可以采取任何控制器操作，将数据保存到 DB 以查看它是如何完成的。例如检查`app/code/core/Mage/Adminhtml/controllers/NotificationController.php`方法`markAsReadAction()`。

在那里你可以看到：

*   通过调用从请求中检索数据 `$this->getRequest()->getParam('id')`-**实际上这是问题的答案，如何获取提交的数据**
*   数据设置为模型，然后通过调用保存到数据库中
    `$model->setIsRead(1)->save()`

强烈建议遵循与模型处理相同的方法。这使得代码更好，更容易支持。

请注意，Magento 中“MVC”架构的“M”字母由两层表示：模型和资源模型。

楷模：

*   包含实体的业务逻辑。例如，将十个商品添加到购物车模型会触发折扣规则
*   由具有通用名称的类表示`<Your_Module>_Model_<Model_Name>`
*   如果需要使用DB，则扩展`Mage_Core_Model_Abstract`并拥有一个Resource Model，负责DB通信
*   不需要实现基本的保存/加载方法，因为祖先 `Mage_Core_Model_Abstract`已经准备好使用所有例程
*   通过调用创建`Mage::getModel('<your_module>/<model_name>')`

资源模型：

*   作为数据库抽象层，从而从数据库保存/加载数据，执行其他数据库查询
*   扩展`Mage_Core_Model_Resource_Db_Abstract`以便与数据库通信
*   由具有通用名称的类表示 `<Your_Module>_Model_Resource_<Model_Name>`
*   由对应模型自动创建，需要与DB通信时

因此，在控制器中，您只关心创建模型。资源模型由模型自动创建。

而且，根据上述所有内容，您的控制器应如下所示：

```
public function testAction()
{
    $model = Mage::getModel('your_module/your_model');
    $model->setName('andy');
    $model->save();
} 
```

您可以在[此处](https://dl.dropbox.com/u/17950262/magento_model_save.zip)下载所需内容的完整示例。

根据您的具体情况，所提供的代码可能有多种变体。但它代表了实现您想要的东西的一般方法。

# razor - WebAPI 和剃刀视图引擎

> ID：13432030
> 
> 赞同：3
> 
> 时间：2012-11-17T15:36:08.077
> 
> 标签：razor, asp.net-mvc-4, visual-studio-2012, asp.net-web-api

我正在使用 Visual Studio 2012 中的 MVC4。从 VS 项目模板创建 Web API 项目时，向导对话框仅显示 Razor 视图引擎是可选的。我的问题是为什么 Web API 项目需要一个视图，然后为什么只需要 Razor？我尝试将 API 控制器添加到 Razor 和 ASPX 引擎 Web 应用程序，结果表明两者都有效。那么，这是 Web API 项目模板的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T20:40:40.767

ASP.NET MVC 和 Web API 基于 ASP.NET，但是它们并没有与之集成。因此，在制作 ASP.NET 或 ASP.NET MVC 项目时，可以像使用 WCF 一样使用 WebAPI。但是，在创建 WebAPI 项目时，没有理由依赖 ASP.NET，而是允许应用程序自托管。

新的 ASP.NET MVC 项目可以使用 Razor 和 WebForms 进行页面渲染，并且它作为 ASP.NET Web 应用程序托管。

新的 Web API 项目不需要 ASP.NET 或 WebForms，也不必作为 ASP.NET 应用程序托管。它甚至不需要 Razor，因为不需要视图引擎，但是项目模板允许新手程序员只需单击几下即可拥有一个“只需运行”的项目，然后显示帮助页面。所以你不需要 Razor，[你可以自己托管一个 Web API 应用程序](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)。

# objective-c - 如何为不同的构建设置目标设置

> ID：13432032
> 
> 赞同：2
> 
> 时间：2012-11-17T15:36:19.097
> 
> 标签：objective-c, ios, xcode, cordova

在 xcode 4.5 中，我如何为不同的构建选择不同的目标设置，例如一种用于调试的目标设置、一种用于发布的目标设置等，因此我可以根据构建等定义不同的图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:17:06.243

你有两个选择，都不完美。正如您所建议的，我将专注于根据您的构建配置使用不同图标的具体示例，尽管这两种技术都可以更广泛地应用。

## 在您的 Info.plist 中重定向

这是最简单的方法。在目标的 Info.plist 中指定“图标文件”属性，例如“Icon-${CONFIGURATION}”。然后，创建两个 ICNS 图标，“Icon-Release.icns”和“Icon-Debug.icns”，并将它们添加到您的项目中。就是这样。这种方法的缺点是每次都会将*两个*图标复制到您构建的应用程序中，而不仅仅是它需要的那个。

## 使用“运行脚本”构建阶段

这涉及更多一点，但它会给你一个更好的结果。使用以下脚本向您的目标添加运行脚本构建阶段：

```
cp "$(dirname "${PRODUCT_SETTINGS_PATH}")/Icon-${CONFIGURATION}.icns" "${SCRIPT_OUTPUT_FILE_0}" 
```

将其输出文件指定为：

```
$(TARGET_BUILD_DIR)/$(UNLOCALIZED_RESOURCES_FOLDER_PATH)/Icon.icns 
```

并确保 Info.plist 中的“图标文件”属性设置为“图标”。

这依赖于您的图标与源代码树中的 Info.plist 位于同一文件夹中（尽管您可以编辑脚本，但您希望适合您的项目配置）。

另请注意，使用这种方法，Xcode 将无法看到您已正确设置图标，因此例如在目标设置的“摘要”选项卡中，它仍会显示图标的问号占位符。您需要进行实际构建以验证它是否正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:00:10.013

我的解决方案与 Wade 的第一点非常接近，您还可以在项目配置中使用用户定义的设置添加动态后缀。

![用户定义的设置](../Images/8f97d0a6f89be37215d2f0f0b07efd60.png)

我使用这个解决方案来动态化图标、包显示名称以及我的构建的包标识符，以便能够在我的开发版本旁边使用来自应用商店的版本。

![info.plist 动态化](../Images/5a6ae1d80735cd7af9dd3f6198789562.png)

# php - 将值从一个页面传递到另一个外部查询字符串并且没有 javascript？

> ID：13432036
> 
> 赞同：0
> 
> 时间：2012-11-17T15:37:08.450
> 
> 标签：php

为站点自动构建导航的一种解决方案是扫描文件夹中的文档，如下所示：

```
foreach(glob('pages/*.pg.php') as $_SITE_NAV_filePath):
    $_SITE_NAV_filePath = explode('.pg',pathinfo($_SITE_NAV_filePath,PATHINFO_FILENAME));
    $_SITE_NAV_fileName = $_SITE_NAV_filePath[0];

    $_SITE_NAV_qv = preg_replace('/([A-Z])/','-$1',$_SITE_NAV_fileName);  $_SITE_NAV_qv = trim($_SITE_NAV_qv,'-');
    $_SITE_NAV_name = preg_replace('/([A-Z])/',' $1',$_SITE_NAV_fileName);
    ?>
    <li><a href="?page=<?=$_SITE_NAV_qv?>" class="<?=$_SITE_NAV_qv == $_SITE_PAGE['qv']?'active':''?>"><?=$_SITE_NAV_name?></a></li>
    <?php
endforeach; 
```

这段代码会将“AnAwesomePage.pg.php”变成这样的菜单项：
`<li><a href="?page=An-Awesome-Page">An Awesome Page</a></li>`

这可能是不好的做法（？）。
反正; 我不经常使用这种方法，因为大多数时候网站都有一个数据库，随之而来的是更好的解决方案......

**但我的问题是：**
有没有办法在文件名前面加上一个整数和下划线*(3_AnAwesomePage.pg.php)*，用于排序目的，并以某种方式将其传递到查询字符串之外的目标页面，并且没有任何异步javascript？

我可以再次分解文件名`"_"`以获得排序顺序并将其存储在某个地方，不知何故？

这是处理页面查询请求的代码：

```
$_SITE_PAGE['qv'] = $_GET['page'];

if (empty($_SITE_PAGE['qv'])){  $_SITE_PAGE['qv'] = explode('-','Home');  }
else {  $_SITE_PAGE['qv'] = explode('-',$_GET['page']);  }

$_SITE_PAGE['file'] = 'pages/'.implode($_SITE_PAGE['qv']).'.pg.php'; 
```

此代码将“An-Awesome-Page”转换回“AnAwesomePage.pg.php”，因此可以将其包含在 php 中。

但是有了前缀，就不是那么容易了。

问题是；现在无法知道之前的前缀编号是什么，因为它已从查询字符串中删除。所以我需要在“背景”中以某种方式发送它。

我想出的一个非常糟糕的解决方案是将导航链接转换为表单按钮，并且仅`_POST`将前缀整数与表单一起转换。乍一看，这听起来像是一个不错的解决方案，但后来我意识到一旦用户刷新他们的页面，它看起来就不是很好了。毕竟，这不是表格的用途......

有什么好的解决方案吗？
或者其他更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:52:31.460

有两种方法可以保存该数字，您可以使用 cookie 或 php 会话变量。但在这种情况下，如果用户第一次在浏览器或新浏览器中输入 url，那么他应该被带到默认号码。就像你有：

```
1_first-page.php
2_first-page.php
3_first-page.php 
```

如果用户输入如下网址：domain.com/?page=first-page，您必须将他带到 1_first-page.php 到您希望默认的任何数字。

# arrays - Maple - 如何制作适合数组的 4 个变量的循环

> ID：13432037
> 
> 赞同：3
> 
> 时间：2012-11-17T15:37:11.647
> 
> 标签：arrays, list, for-loop, maple

假设我有两个列表： M=(0,1,2,3) 和 N=(0,2,4,6)

```
And I wish to put into a list all the combinations of Mi,Mj,Ns,Nt (where i,j,s,t are       subscripts so for i=1 M=0, i=2 M=1 etc.) such that:

C = a^(Mi+Mj) + b^(Ns+Nj)

First in the list would be
C = a^(0+0) + b^(0+0)
C = a^(1+0) + b^(0+0)
C = a^(1+0) + b^(2+0) 
```

有没有比使用 'for' 子句 4 次更简洁的写法？

```
for i from 1 to 4 do
for j from 1 to 4 do
for s from 1 to 4 do
for t from 1 to 4 do

C = a^(Mi+Mj) + b^(Ns+Nj)

end do;
end do;
end do;
end do; 
```

我会将它放入一个数组中，但我想限制递归，因为 maple 不喜欢它！是否可以将其放入具有 4 个变量的 2x2 数组中？

我考虑过列出 Mi+Mj 的所有组合和 Ns+Nt 的所有组合的 2 个列表，然后将它们放在一个数组中，但结果与我想要的相似，但并不完全正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:39:29.140

我不使用 Maple，但是在快速谷歌搜索之后，事实证明 Maple 至少支持嵌套循环。所以....

* * *

首先，遍历 M 的所有组合，计算 a^(Mi + Mj)，并将结果存储在 A 中。

```
for i from 1 to 4 do
for j from 1 to 4 do
    A = a^(Mi+Mj)
end do;
end do; 
```

其次，对 N 做同样的事情，并将结果存储在 B 中。

第三，获得C。

```
for i from 1 to 16 do
for j from 1 to 16 do
    C = Ai + Bj
end do;
end do; 
```

* * *

实际上，原来的方法需要大量的冗余计算，而上述方法消除了冗余。因此，我想它不仅可行而且速度更快。

# objective-c - 将 NSNumber 与 0 进行比较不起作用？

> ID：13432042
> 
> 赞同：23
> 
> 时间：2012-11-17T15:38:02.173
> 
> 标签：objective-c, json, nsnumber

我的应用程序中有一个 JSON 解析器，我将值加载到 detailDataSourceDict 变量中。当我尝试获取数组的 valueForKey 并尝试将其与 0 进行比较时，它永远不会工作......

这是我的代码：

```
if (indexPath.row == 1) {
    NSNumber *rating = [detailDataSourceDict valueForKey:@"rating"];
    NSLog(@"Rating:  %@",rating);
    if (rating == 0) {
        cell.detailTextLabel.text = @"This sheet has not yet been rated.";
    }
    else {
        cell.detailTextLabel.text = [NSString stringWithFormat:@"This sheet has a %@ star rating.",rating];
    }
    cell.textLabel.text = @"Rating";

} 
```

我在我的 JSON 提要中看到“评级”：“0”，但当评级为 0 时，它显示“此工作表的星级为 0。”，而不是“此工作表尚未评级”。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-17T15:41:38.997

`NSNumber *rating`是一个对象。`0`是原始类型。原始类型可以与 进行比较`==`。物体不能；需要使用 比较它们是否相等[`isEqual:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isEqual:)。

因此替换这个：

```
rating == 0 
```

和：

```
[rating isEqual:@0] 
```

（`@0`作为[NSNumber 文字](http://clang.llvm.org/docs/ObjectiveCLiterals.html)）

或者：

```
rating.integerValue == 0 
```

* * *

你的错误代码甚至编译的原因`0`是等于`0x0`which 又等于`nil`（有点，保留细节）。因此，您当前的代码将等同于：

```
rating == nil 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T15:41:37.983

`rating`是一个指向 NSNumber 对象的指针，如果与 比较`== 0`，您将只比较指针。

如果要将*值*与 0 进行比较，则必须使用 获取实际值[`intValue`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/intValue)，尝试；

```
if ([rating intValue] == 0) { 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-17T15:41:45.540

NSNumber 是一个对象，您必须使用值访问器访问它的值。

```
[NSNumber intValue]; 
```

请参阅“访问数值”@：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-17T15:44:31.673

你想改变它：

```
if (rating == 0) { 
```

到

```
if ([rating intValue] == 0) { 
```

# objective-c - 在目标c，xcode中的同一.m文件中将变量从一种方法提取到另一种方法

> ID：13432052
> 
> 赞同：-4
> 
> 时间：2012-11-17T15:38:58.677
> 
> 标签：objective-c, ios

您好，我想知道如何使用此方法中的变量

```
+ (NSString *) yourCalculation:(NSString *)height:(NSString *)weight{
    double bmiVal = 0;
     if (weight > 0 && height > 0) {
         CGFloat wInPounds = [weight floatValue];
         CGFloat hInInches = [height floatValue];
         CGFloat hInCms = hInInches *0.393700787;
    }
} 
```

在这个方法中

```
 +(NSString *) actualCalculation{
       float val = wInPounds/(hInCms*hInCms);
       float bmiVal = val *703;
 } 
```

这只是代码的一小部分，但它涵盖了我想要用它做的事情。

如果有人能告诉我如何做到这一点，我将不胜感激。

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:55:35.767

创建一个自定义类，该类具有您要共享的各种值的属性并返回其实例。例如，假设一个`MyNumerics`具有明显属性的类：

```
+ (MyNumerics *) yourCalculation:(NSString *)height weight:(NSString *)weight {
    MyNumerics *result = nil;
    double bmiVal = 0;
    if (weight > 0 && height > 0) {
        result = [[MyNumerics alloc] init];
        result.wInPounds = [weight floatValue];
        result.hInInches = [height floatValue];
        result.hInCms = hInInches *0.393700787;
    }
    return result;
} 
```

让调用例程在其计算中使用结果的属性。

# python - 如何在 Google App Engine (Python) 中处理删除

> ID：13432054
> 
> 赞同：9
> 
> 时间：2012-11-17T15:39:13.380
> 
> 标签：python, google-app-engine, blobstore, webapp2

我是一名新手程序员，对 Google App Engine 和 webapp2 等不熟悉。所以这可能是一个非常基本的问题。

我正在创建一个将图像存储到 BlobStore 的应用程序。我的模型存储描述、blob_key、图像 url 和日期。

我能够保存一切，所以那一点没关系。

但是现在我想创建一个删除按钮，它不仅可以从数据存储中删除一个项目，还可以删除保存在 blobstore 中的图像。

我创建了一个 DeleteHandler，在 html 中我有一个表单，传递我要删除的项目的密钥。在 DeleteHandler 中，我使用发布的密钥从数据存储区中删除项目。我也在尝试使用密钥来删除保存在 blobstore 中的图像。

到目前为止，我在删除表单帖子上收到了 404，即使我通过了，我也不确定我的 DeleteHandler 是否正确处理我正在寻找的功能。

任何帮助将非常感激..

主要.py：

```
import os
import urllib
import webapp2
from google.appengine.ext.webapp import template
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers
from google.appengine.api import images
#Models
from google.appengine.ext import db

class ImageItem(db.Model):
    description = db.StringProperty(required=True)
    img_url = db.StringProperty()
    blob_key = blobstore.BlobReferenceProperty()
    when = db.DateTimeProperty(auto_now_add=True)

#Handlers (Views)
class MainHandler(webapp2.RequestHandler):
  def get(self):
    upload_url = blobstore.create_upload_url('/upload')
    imgs = db.GqlQuery(
        'SELECT * FROM ImageItem '
        'ORDER BY when DESC')
    imgs_dict = {'imgs': imgs}
    self.response.out.write( template.render( 'main.html',locals() ) )

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
  def post(self):
    f = self.get_uploads('file')[0]  # 'file' is file upload field in the form
    img =ImageItem(description=self.request.get('description'))
    img.blob_key = f.key()
    img.img_url = images.get_serving_url( f.key() )
    img.put()
    self.redirect('/')

class DeleteHandler(webapp2.RequestHandler):
    def post(self):
        key = self.request.get('k')
        item = db.get(key)
        images.delete( item.blob_key )
        item.delete()
        self.response.out.write(key)

#URL Routing happens here
app = webapp2.WSGIApplication([('/', MainHandler),
                               ('/upload', UploadHandler),
                               ('/delete', DeleteHandler)],
                              debug=True) 
```

主要.html：

```
<form action="{{upload_url}}" method="POST" enctype="multipart/form-data">
            <p>
                <label for="file">Upload File</label>
                <input type="file" name="file" id="file">
            </p>
            <p>
                <label for="description">Description</label>
                <input type="text" id="description" name="description">
            </p>
            <input type="submit" name="submit" value="Submit"> 
    </form>

    <ul>
        {% for i in imgs %}
        <li>
            <img src="{{i.img_url}}=s400-c" alt="">
            {{i.description }}
            </li>

        <li>{{i.when }}</li>
        <li>
            <form action="/delete" method="POST"  enctype="multipart/form-data">
                <input type="text" name="k" value="{{i.key}}" />
                <input type="submit" value="delete">
            </form>

        </li>
        {% endfor %}
    </ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T13:34:05.027

删除很接近。一旦有了密钥，就可以通过调用 db.delete(key) 来删除实体。
对于您的示例，这将是这样的：

```
class DeleteHandler(webapp2.RequestHandler):
    def post(self):
        key = self.request.get('k')
        item = db.get(key)
        blobstore.delete([item.blob_key])
        db.delete(item)
        self.response.out.write(key) 
```

您在 main.py 中的 url 处理很好，所以对我来说为什么会收到 404 并不明显。您可以仔细检查 app.yaml 文件以确保所有 url 都传递给 main.py。
这是一个示例 app.yaml 处理程序 url 部分：

```
handlers
- url: /.*
    script: main.app 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:13:31.940

让它工作。谢谢埃里克，你的真的很接近。我需要使用 blob_key.key()。

最终代码如下：

```
DelHandler 类（webapp2.RequestHandler）：
  def post（自我）：
    key = self.request.get('k')
    项目 = db.get(key)
    n = item.blob_key.key()
    blobstore.delete(n)
    项目.删除（）
    self.redirect('/')

```

# c# - 如何使用 Marshal.getActiveObject() 来获取已打开两个进程的正在运行进程的 2 个实例

> ID：13432057
> 
> 赞同：12
> 
> 时间：2012-11-17T15:39:43.580
> 
> 标签：c#

目前我的代码使用

```
SurferApp = Marshal.GetActiveObject("Surfer.Application") as Surfer.Application 
```

为了得到一个叫做surfer的软件的运行实例，为了简单起见我们可以把Surfer替换成大家都知道的Word。现在假设我有 2 个 MS word 应用程序正在运行，我想让它们都使用`Marshal.GetActiveObject()`，我怎样才能获得两个正在运行的实例并将每个实例与一个单独的对象相关联？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-17T16:01:31.720

Marshal.GetActiveObject 返回它在 ROT（运行对象表）上找到的第一个实例。如果您有多个实例以相同的名称/ID 运行，则必须直接从 ROT 获取。

几个链接开始：

*   [http://dotnet-snippets.de/dns/laufende-com-objekte-abfragen-SID526.aspx](http://dotnet-snippets.de/dns/laufende-com-objekte-abfragen-SID526.aspx)（仅限德语​​）
*   [http://www.codeproject.com/Articles/17490/Running-Object-Table-Provider-in-NET-consumer-in-M](http://www.codeproject.com/Articles/17490/Running-Object-Table-Provider-in-NET-consumer-in-M)
*   [http://www.codeproject.com/Articles/7984/Automating-a-specific-instance-of-Visual-Studio-NE](http://www.codeproject.com/Articles/7984/Automating-a-specific-instance-of-Visual-Studio-NE)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-26T23:45:17.500

除了已接受答案中的链接之外，我发现以下内容对于走 ROT 非常有帮助，特别是如果您感兴趣的应用程序是 AutoCAD：

[http://adndevblog.typepad.com/autocad/2013/12/accessing-com-applications-from-the-running-object-table.html](http://adndevblog.typepad.com/autocad/2013/12/accessing-com-applications-from-the-running-object-table.html)

# optimization - 来自primm图的TSP和Lin-Kernighan算法

> ID：13432061
> 
> 赞同：2
> 
> 时间：2012-11-17T15:40:14.947
> 
> 标签：optimization, graph, traveling-salesman

我正在尝试编写 TSP 问题。由于 Primm 算法，我已经有了最小权重图，我还读到 Lin-Kernighan 算法可以从这个图构造，但看不到如何制作它。

有人可以向我解释如何执行吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:51:21.970

您需要从最小生成树构造一个欧拉回路，然后您可以使用 Lin Kernigan 删除重叠路径（两条边之间的 x 交叉连接）。

# asp.net-mvc-3 - 扩展方法无法动态调度错误 - 我该如何解决？

> ID：13432063
> 
> 赞同：3
> 
> 时间：2012-11-17T15:40:16.550
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

找不到此问题的正确解决方案。

我使用`[Serializable]`(MVC3 Futures) 是为了拥有一个带有单独视图的“向导”。这是我的控制器中要序列化的代码：

```
 private MyViewModel myData;
        protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            var serialized = Request.Form["myData"];
            if (serialized != null) //Form was posted containing serialized data
            {
                myData = (MyViewModel)new MvcSerializer().Deserialize(serialized, SerializationMode.Signed);
                TryUpdateModel(myData);
            }
            else
                myData = (MyViewModel)TempData["myData"] ?? new MyViewModel();
            TempData.Keep();
        }
        protected override void OnResultExecuted(ResultExecutedContext filterContext)
        {
            if (filterContext.Result is RedirectToRouteResult)
                TempData["myData"] = myData;
        } 
```

进一步在我的控制器中，我做了这样的事情（只是一个片段 - 代码通过向导，带有下一个和后退按钮字符串）：

```
public ActionResult Confirm(string backButton, string nextButton)
        {
            if (backButton != null)
                return RedirectToAction("Details");

            else if ((nextButton != null) && ModelState.IsValid)
                return RedirectToAction("Submitted");
            else
                return View(myData);
        } 
```

在我`.cshtml`看来，我有这个：

```
@using (Html.BeginFormAntiForgeryPost())
    { 
         @Html.Hidden("myData", new MvcSerializer().Serialize(Model, SerializationMode.Signed))
    ...
         @Html.TextBoxFor(m => model.Step.EMail)
    ...
    } 
```

因为我使用的是动态，所以我必须在视图中使用一个变量：

```
var model = (MyViewModel) Model.myData; 
```

为了做到`@Html.TextBoxFor`以上几点。这就是我的问题，因为如果我这样做`@model MyViewModel`，那我就做不到`model.Step.EMail`。但由于动态，`@Html.Hidden`将不起作用，我收到以下错误：

> 编译器错误消息：CS1973：“System.Web.Mvc.HtmlHelper”没有名为“隐藏”的适用方法，但似乎具有该名称的扩展方法。扩展方法不能动态调度。考虑强制转换动态参数或在没有扩展方法语法的情况下调用扩展方法。

我可以在没有 的情况下切换到其他方式`[Serializable]`，但是我必须转换很多代码。有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-19T07:02:45.910

扩展方法没有识别方法，因为数据类型不匹配。尝试转换为对象。

```
@Html.Hidden("myData", new MvcSerializer().Serialize(Model, SerializationMode.Signed) as Object) 
```

或者

```
@Html.Hidden("myData", (Object)new MvcSerializer().Serialize(Model, SerializationMode.Signed)) 
```

它会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T16:00:52.460

你可以打电话

```
@(InputExtensions.Hidden(Html, "myData", new MvcSerializer().Serialize(Model, SerializationMode.Signed))) 
```

而不是 `@Html.Hidden(...)` 它正在调用没有扩展方法语法的扩展方法。

# ruby-on-rails - 使用设计，独角兽重置生产密码

> ID：13432068
> 
> 赞同：0
> 
> 时间：2012-11-17T15:40:39.103
> 
> 标签：ruby-on-rails, devise, openssl, production-environment, unicorn

如果我尝试重设密码，我会看到：**我们很抱歉，但出了点问题。** 然后我查看我的日志：
poruction.log

```
Sent mail to achempion@gmail.com (238ms)
Completed 500 Internal Server Error in 610ms

OpenSSL::SSL::SSLError (hostname does not match the server certificate): 
```

在我的 production.rb 我设置
`config.action_mailer.default_url_options = { :host => '178.79.153.194' }`

和 openssl 版本是`OpenSSL 1.0.0g 18 Jan 2012`

我通过设计 gem 重置密码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:08:16.953

这是我的错误。我忘了配置 ActionMailer。 [链接教程](http://guides.rubyonrails.org/action_mailer_basics.html#example-action-mailer-configuration)

# css - 一些 div 之间的空白（但不是其他）

> ID：13432070
> 
> 赞同：1
> 
> 时间：2012-11-17T15:41:31.330
> 
> 标签：css, html, whitespace

可能很明显，我对 html 和 css 很陌生。我最近学习了它们（和 django 一起），并且一直在使用我自己的代码并从各种教程中借用片段。产生你在下面看到的科学怪人的缺点之一是神秘的异常往往会从湛蓝的天空中显现出来。最近和令人困惑的是我的一些 div（顶部的两个）之间的一个很小的空白区域。我一直在寻找罪魁祸首，但至今收效甚微。如果有人可以看一看并提供建议，那就太棒了。

这是我的HTML：

```
<head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title> BTracker </title>
        <link rel="stylesheet" type="text/css" href="test.css">
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lobster" />

    </head>

    <body>
        <div id="page-container">
            <div style="background:red">
            div1
            </div>
            <div>
                <ul id="navTop">
                    <li>Hi, <strong><a href="/UserName/">UserName</a></strong></li>
                    <li><a href="/help/">Help</a></li>
                    <li><a href="/account/settings/">Settings</a></li>
                    <li class="last"><a href="/account/logout/">Logout</a></li>
                </ul>
            </div>
            <div id="main-nav">
                    <nav>       
                        <ul class="nav">
                            <li><a href="/home/" class="homeIcon">Home</a></li>
                            <li><a href="/news/">News</a></li>
                            <li><a href="/about/">About Us</a></li>
                            <li><a href="/services/">Services</a></li>  
                            <li><a href="/contact/">Contact</a></li>        
                        </ul>
                    </nav>
            </div>
            <div id="header">
            </div>
            <div id="sidebar-a">
                <div class="padding">
                    Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Nullam gravida enim ut risus. 
                    Praesent sapien purus, ultrices a, varius ac, suscipit ut, enim. Maecenas in lectus. 
                    Donec in sapien in nibh rutrum gravida. Sed ut mauris. Fusce malesuada enim vitae lacus 
                    euismod vulputate. Nullam rhoncus mauris ac metus. Maecenas vulputate aliquam odio. 
                    Duis scelerisque justo a pede. Nam augue lorem, semper at, porta eget, placerat eget, 
                    purus. Suspendisse mattis nunc vestibulum ligula. In hac habitasse platea dictumst.
                </div>
            </div>
            <div id="content">
                <div class="padding">
                    <h2><img src="path/to/about.gif" width="150" alt="About" /></h2>
                    <p><strong>Lorem ipsum</strong>  dolor sit amet, consectetuer adipiscing elit. Nullam gravida enim ut risus. 
                    Praesent sapien purus, ultrices a, varius ac, suscipit ut, enim. Maecenas in lectus. 
                    Donec in sapien in nibh rutrum gravida.</p>
                    <p>Sed ut mauris. Fusce malesuada enim vitae lacus 
                    euismod vulputate.</p>

                    <h2><img src="/path/to/contact.gif" width="250"  alt="Contact Us" /></h2>
                    <p>Phone:   (07) 867 5309<br />
                    Fax:     (07) 867 5309<br />
                    Email:   <a href="mailto:foo@bar.com">foo@bar.com</a><br />
                    P.O Box: 12345 Timbuck, Too</p>
                    <p><a href="#">More contact informationż/a></p>
                </div>
            </div>
            <div id="footer">
                <div id="altnav">
                    <a href="#">About</a> - 
                    <a href="#">Services</a> - 
                    <a href="#">Portfolio</a> - 
                    <a href="#">Contact Us</a> - 
                    <a href="#">Terms of Trade</a>
                </div>
                Copyright BlahBlah Webservices
                <br>
                Powered by Yours Truely
            </div>
        </div>

    </body>

</html> 
```

这是我的CSS：

```
/*------------------------------------------------------------------
[ STYLE.CSS ] Main Stylesheet
--------------------------------------------------------------------

[Table of Contents]

1\.      Link colors

2\.      MAIN STYLES
2.a     Tags defaults
2.b     Page Container
2.b     Navigations

/*------------------------------------------------------------------

1\.  Link colors

------------------------------------------------------------------*/

a:link {color:white;}      /* unvisited link */
a:visited {color:blue;}  /* visited link */
a:hover {color:grey;}  /* mouse over link */
a:active {color:yellow;}  /* selected link */

/*------------------------------------------------------------------

2\.  MAIN STYLES
    General definitions

--------------------------------------------------------------------

/*-------------------------------
2.a Tags defaults
-------------------------------*/

html { 
    background: url("/path/to/background.jpg") no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

body {
    font-family: Helvetica, Arial, Verdana, Sans-serif;
}

h1 {
    margin: 0;
    padding: 0;
    float: right;
    margin-top: 35px;
    padding-right: 200px;
}

div {margin:0;padding:0;}

/*-------------------------------
2.b Container
-------------------------------*/

#page-container {
    width: 1000px;
    margin: auto;
    /* color: #979731; */
    background: black;
}

/*-------------------------------
2.c Navigation
-------------------------------*/

#navTop {
    text-align: right;
    height:32px;
    background: rgba(151, 111, 48, .4);
    background:violet;
}

    #navTop li {
        display: inline-block;
        list-style-type: none;
        border-right: 1px solid #d1d1d1;
        height: 8px;
        line-height:8px;
        padding: 0 5px;
    }
    #navTop li.last { border: 0; }

#main-nav {
    height: 85px;
    background: blue;
    text-align: center;
}

.nav{
    /* Affects the UL element */
    overflow: hidden;
    display: inline-block;
}

    .nav li{
        /* Specifying a fallback color and we define CSS3 gradients for the major browsers: */

        background-color: #f0f0f0;
        background-image: -webkit-gradient(linear,left top, left bottom,from(#fefefe), color-stop(0.5,#f0f0f0), color-stop(0.51, #e6e6e6));
        background-image: -moz-linear-gradient(#fefefe 0%, #f0f0f0 50%, #e6e6e6 51%);
        background-image: -o-linear-gradient(#fefefe 0%, #f0f0f0 50%, #e6e6e6 51%);
        background-image: -ms-linear-gradient(#fefefe 0%, #f0f0f0 50%, #e6e6e6 51%);
        background-image: linear-gradient(#fefefe 0%, #f0f0f0 50%, #e6e6e6 51%);

        border-right: 1px solid rgba(9, 9, 9, 0.125);

        /* Adding a 1px inset highlight for a more polished efect: */

        box-shadow: 1px -1px 0 rgba(255, 255, 255, 0.6) inset;
        -moz-box-shadow: 1px -1px 0 rgba(255, 255, 255, 0.6) inset;
        -webkit-box-shadow: 1px -1px 0 rgba(255, 255, 255, 0.6) inset;

        position:relative;

        float: left;
        list-style: none;
    }

    .nav li:after{

        /* This creates a pseudo element inslide each LI */ 

        content:'.';
        text-indent:-9999px;
        overflow:hidden;
        position:absolute;
        width:100%;
        height:100%;
        top:0;
        left:0;
        z-index:1;
        opacity:0;

        /* Gradients! */

        background-image:-webkit-gradient(linear, left top, right top, from(rgba(168,168,168,0.5)),color-stop(0.5,rgba(168,168,168,0)), to(rgba(168,168,168,0.5)));
        background-image:-moz-linear-gradient(left, rgba(168,168,168,0.5), rgba(168,168,168,0) 50%, rgba(168,168,168,0.5));
        background-image:-o-linear-gradient(left, rgba(168,168,168,0.5), rgba(168,168,168,0) 50%, rgba(168,168,168,0.5));
        background-image:-ms-linear-gradient(left, rgba(168,168,168,0.5), rgba(168,168,168,0) 50%, rgba(168,168,168,0.5));
        background-image:linear-gradient(left, rgba(168,168,168,0.5), rgba(168,168,168,0) 50%, rgba(168,168,168,0.5));

        /* Creating borders with box-shadow. Useful, as they don't affect the size of the element. */

        box-shadow:-1px 0 0 #a3a3a3,-2px 0 0 #fff,1px 0 0 #a3a3a3,2px 0 0 #fff;
        -moz-box-shadow:-1px 0 0 #a3a3a3,-2px 0 0 #fff,1px 0 0 #a3a3a3,2px 0 0 #fff;
        -webkit-box-shadow:-1px 0 0 #a3a3a3,-2px 0 0 #fff,1px 0 0 #a3a3a3,2px 0 0 #fff;

        /* This will create a smooth transition for the opacity property */

        -moz-transition:0.25s all;
        -webkit-transition:0.25s all;
        -o-transition:0.25s all;
        transition:0.25s all;
    }

    /* Treating the first LI and li:after elements separately */

    .nav li:first-child{
        border-radius: 4px 0 0 4px;
    }

    .nav li:first-child:after,
    .nav li.selected:first-child:after{
        box-shadow:1px 0 0 #a3a3a3,2px 0 0 #fff;
        -moz-box-shadow:1px 0 0 #a3a3a3,2px 0 0 #fff;
        -webkit-box-shadow:1px 0 0 #a3a3a3,2px 0 0 #fff;

        border-radius:4px 0 0 4px;
    }

    .nav li:last-child{
        border-radius: 0 4px 4px 0;
    }

    /* Treating the last LI and li:after elements separately */

    .nav li:last-child:after,
    .nav li.selected:last-child:after{
        box-shadow:-1px 0 0 #a3a3a3,-2px 0 0 #fff;
        -moz-box-shadow:-1px 0 0 #a3a3a3,-2px 0 0 #fff;
        -webkit-box-shadow:-1px 0 0 #a3a3a3,-2px 0 0 #fff;

        border-radius:0 4px 4px 0;
    }

    .nav li:hover:after,
    .nav li.selected:after,
    .nav li:target:after{
        /* This property triggers the CSS3 transition */
        opacity:1;
    }

    .nav:hover li.selected:after,
    .nav:hover li:target:after{
        /* Hides the targeted li when we are hovering on the UL */
        opacity:0;
    }

    .nav li.selected:hover:after,
    .nav li:target:hover:after{
        opacity:1 !important;
    }

    /* Styling the anchor elements */

    .nav li a{
        color: #5d5d5d;
        display: inline-block;
        font: 20px/1 Lobster,Arial,sans-serif;
        padding: 12px 35px 14px;
        position: relative;
        text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.6);
        z-index:2;
        text-decoration:none !important;
        white-space:nowrap;
    }

    .nav a.homeIcon{
        background:url("/path/to/home.png") no-repeat center center;
        display: block;
        overflow: hidden;
        padding-left: 12px;
        padding-right: 12px;
        text-indent: -9999px;
        width: 16px;
    }

 #header {
    height: 130px;
    background:red;
}

#sidebar-a {
    float: right;
    width: 500px;
    line-height:25px;
    background:purple;
} 

    #sidebar-a .padding {
        padding: 25px;
}

#content {
    margin-right: 500px;
    line-height: 25px;
    background: orange;
}

    #content .padding {
        padding: 25px;
}

    #content h2 {
        margin: 0;
        padding: 0;
        padding-bottom: 15px;
        padding-left: 150px
    }

    #content p {
        margin: 0;
        padding: 0;
        padding-bottom: 15px;
    }

#footer {
    clear: both;
    height: 66px;
    border-top:1px solid #efefef;
    padding: 13px 25px;
    line-height:20px
    font-family: Tahoma, Arial, Helvetica, Sans-serif;
    font-size: 16px;
    color: white;
    background: green;
}

    #footer #altnav {
        width: 400px;
        float: right;
        text-align: right;
}

.hidden {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:47:21.223

具有属性的元素`inline-block`将表现得好像它们是内联的（因此得名），因此遇到的任何空格都将被视为空格。例如：

```
<div></div><div></div> 
```

将以不同的方式呈现

```
<div></div>
<div></div> 
```

[在此处查看实时示例](http://jsfiddle.net/4H8Fn/)

**您可以使用 HTML 解决此问题，如下所示：**

要么将所有元素放在同一行，即

```
<div>
    // CONTENT
</div><div>
    // CONTENT
</div><div>
    // CONTENT
</div> 
```

或使用 HTML 注释删除空格

```
<div>
    //CONTENT
</div><!--
--><div>
    //CONTENT
</div> 
```

**您可以使用 CSS 解决此问题，如下所示：**

在父节点上设置属性`font-size: 0`，即

```
parent {
    display: inline-block;
    font-size: 0
}
parent * {
    font-size: 12px
} 
```

或者在父节点上设置属性`zoom: 1`，即

```
parent {
    display: inline-block;
    zoom: 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:47:25.670

那么你好，

在我作为 Web 开发人员的早期，我也遇到了这个问题。问题是渲染了一个字符（空格，每行上有很多空格-标签缩进）。您可以通过设置来摆脱这个问题：

```
body {
    font-size: 0px;
}

* {
    font-size: inherit;
} 
```

然后`font-size`为显示文本所需的每个元素设置 css 属性。

希望它有所帮助；）

# jquery - 如何使用 Bootbox js 插件显示警报框

> ID：13432080
> 
> 赞同：1
> 
> 时间：2012-11-17T15:42:24.917
> 
> 标签：jquery, alert

我写了一个php代码……</p>

// 如果点击检查会话是否设置

```
if(isset($_POST['reserve'])){ if(!empty($_SESSION['username'])){
$db->query(“INSERT INTO `reserve` (`r_b_id`,`r_m_id`,`r_date`) VALUES 
(‘$book_id’,'$userId’,'$date’)”);
}else{
echo ‘ ‘; // I nee to display alert box here }} 
```

如果会话未开始，则应显示警报消息。我该怎么做？我试过这样。但它没有用。

```
if(isset($_POST['reserve'])){
if(!empty($_SESSION['username'])){
$db->query(“INSERT INTO `reserve` (`r_b_id`,`r_m_id`,`r_date`) VALUES         (‘$book_id’,'$userId’,'$date’)”);
}else{
echo ‘$(document).load(function(){
bootbox.alert(“You must login first”); 
```

这是引导箱网站的链接... [http://bootboxjs.com/#usage](http://bootboxjs.com/#usage)

这是我的完整代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Book Detail</title>
<link rel="stylesheet" href="../common/bootstrap/css/bootstrap.min.css" />
</head>

<body>
<?php

    // Run the query to get each books detail.
    $db->query("SELECT * FROM `book` WHERE `b_id` = '$book_id'");

    foreach($db->resultsArray as $row){
        echo "Id : ". $row['b_id'] . "<br />";
        echo "Category : ". $row['b_cat_id'] . "<br />";    
        echo "Title : ". $row['b_title'] . "<br />";    
        echo "Author : ". $row['b_author'] . "<br />";  
        echo "Summery : ". $row['b_summary'] . "<br />";    
    }

    // To get member id of loged in user's
    $db->query("SELECT `userId` FROM `user` WHERE `username` = '$username'");
    $userId = $db->resultsArray['0']['userId'];

    // Get system date
    $date = date("Y-m-d");

    // Check reserve book button
    // If click check the session is set or not
    if(isset($_POST['reserve'])){
        if(!empty($_SESSION['username'])){

            $db->query("INSERT INTO `reserve` (`r_b_id`,`r_m_id`,`r_date`) VALUES ('$book_id','$userId','$date')");

        }else{
            echo '<script type="text/javascript">$(document).load(function(){ bootbox.alert("You must login first");})</script>';
        }   
    }

?>
<form method="post" action="">
  <input type="submit" name="reserve" class="btn" id="reserve" value="Reserve Book" />
</form>

<!-- JS dependencies --> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
<script src="../common/bootstrap/js/bootstrap.min.js"></script> 

<!-- bootbox code --> 
<script type="text/javascript" src="https://raw.github.com/makeusabrew/bootbox/v2.4.2/bootbox.min.js"></script> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:45:43.730

尝试

```
echo '$(document).load(function(){ bootbox.alert(“You must login first”);})'; 
```

# android - 使用 Maven 构建 Android 应用并运行 Robotium 测试

> ID：13432081
> 
> 赞同：1
> 
> 时间：2012-11-17T15:42:31.007
> 
> 标签：android, maven, jenkins, robotium

我真的需要你的帮助。我想设置 Jenkins 来构建我的 Android 应用程序并使用 Maven 在模拟器上运行我的 Robotium 测试。我想我做的一切都很好，但仍然有同样的错误。你有过这样的事情吗？我的项目结构如下：

izi-mobiler.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>pl.araneo.farmadroid</groupId>
    <artifactId>izi-mobiler</artifactId>
    <version>366</version>
    <packaging>pom</packaging>
    <name>IZI</name>

    <modules>
        <module>izi-mobiler-app</module>
        <module>izi-mobiler-test</module>
    </modules>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencyManagement>

        <dependencies>

            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android</artifactId>
                <version>4.0.1.2</version>
            </dependency>

            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android-test</artifactId>
                <version>4.0.1.2</version>
            </dependency>

            <dependency>
                <groupId>com.pivotallabs</groupId>
                <artifactId>robolectric</artifactId>
                <version>1.2-SNAPSHOT</version>
                <scope>test</scope>
            </dependency>

            <dependency>
                <groupId>org.hamcrest</groupId>
                <artifactId>hamcrest-core</artifactId>
                <version>1.2</version>
                <scope>test</scope>
            </dependency>

            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.8.2</version>
                <scope>test</scope>
            </dependency>

            <dependency>
                <groupId>org.codehaus.jackson</groupId>
                <artifactId>jackson-core-lgpl</artifactId>
                <version>1.7.1</version>
                <type>jar</type>
            </dependency>

            <dependency>
                <groupId>org.mockito</groupId>
                <artifactId>mockito-core</artifactId>
                <version>1.9.0</version>
            </dependency>

            <dependency>
                <groupId>org.roboguice</groupId>
                <artifactId>roboguice</artifactId>
                <version>2.0</version>
                <scope>compile</scope>
            </dependency>

            <dependency>
                <groupId>com.google.inject.extensions</groupId>
                <artifactId>guice-multibindings</artifactId>
                <version>3.0</version>
                <exclusions>
                    <exclusion>
                        <groupId>com.google.inject</groupId>
                        <artifactId>guice</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>

            <dependency>
                <groupId>com.google.inject.extensions</groupId>
                <artifactId>guice-assistedinject</artifactId>
                <version>3.0</version>
                <exclusions>
                    <exclusion>
                        <groupId>com.google.inject</groupId>
                        <artifactId>guice</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>

            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>support-v4</artifactId>
                <version>r7</version>
            </dependency>

            <!-- Action Bar sherlock -->
            <dependency>
                <groupId>com.actionbarsherlock</groupId>
                <artifactId>library</artifactId>
                <version>4.1.0</version>
                <type>apklib</type>
            </dependency>

            <!-- Let Roboguice and Sherlock work together -->
            <dependency>
                <groupId>com.github.rtyley</groupId>
                <artifactId>roboguice-sherlock</artifactId>
                <version>1.4</version>
            </dependency>

        </dependencies>

    </dependencyManagement>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.0.0-alpha-13</version>
                    <extensions>true</extensions>
                    <configuration>
                        <sdk>
                            <platform>15</platform>
                        </sdk>
                        <undeployBeforeDeploy>true</undeployBeforeDeploy>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.3.2</version>
                </plugin>
            </plugins>
        </pluginManagement>
    </build> 
```

izi-mobile-app.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>pl.araneo.farmadroid</groupId>
    <artifactId>izi-mobiler</artifactId>
    <version>366</version>
    <relativePath>../</relativePath>
</parent>

<groupId>pl.araneo.farmadroid</groupId>
<artifactId>izi-mobiler-app</artifactId>
<version>366</version>
<packaging>apk</packaging>
<name>IZI - App</name>

<properties>
    <platform.version>4.0.1.2</platform.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.pivotallabs</groupId>
        <artifactId>robolectric</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.hamcrest</groupId>
        <artifactId>hamcrest-core</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-lgpl</artifactId>
        <version>1.7.1</version>
        <type>jar</type>
    </dependency>

    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-core</artifactId>
    </dependency>

    <dependency>
        <groupId>org.roboguice</groupId>
        <artifactId>roboguice</artifactId>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-multibindings</artifactId>
        <exclusions>
            <exclusion>
                <groupId>com.google.inject</groupId>
                <artifactId>guice</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-assistedinject</artifactId>
        <exclusions>
            <exclusion>
                <groupId>com.google.inject</groupId>
                <artifactId>guice</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
    </dependency>

    <!-- Action Bar sherlock -->
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>library</artifactId>
        <type>apklib</type>
    </dependency>

    <!-- Let Roboguice and Sherlock work together -->
    <dependency>
        <groupId>com.github.rtyley</groupId>
        <artifactId>roboguice-sherlock</artifactId>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.4.0</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>15</platform>
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

izi-mobile-test.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>pl.araneo.farmadroid</groupId>
    <artifactId>izi-mobiler</artifactId>
    <version>366</version>
</parent>

<groupId>pl.araneo.farmadroid</groupId>
<artifactId>izi-mobiler-test</artifactId>
<packaging>apk</packaging>
<name>IZI - Test</name>

<dependencies>

    <dependency>
        <groupId>com.jayway.android.robotium</groupId>
        <artifactId>robotium-solo</artifactId>
        <version>1.8.0</version>
    </dependency>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android-test</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
    </dependency>

    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>library</artifactId>
        <type>apklib</type>
    </dependency>

    <dependency>
        <groupId>com.github.rtyley</groupId>
        <artifactId>roboguice-sherlock</artifactId>
    </dependency>

    <dependency>
        <groupId>pl.araneo.farmadroid</groupId>
        <artifactId>izi-mobiler-app</artifactId>
        <version>366</version>
        <type>apk</type>
    </dependency>

    <dependency>
        <groupId>pl.araneo.farmadroid</groupId>
        <artifactId>izi-mobiler-app</artifactId>
        <version>366</version>
        <scope>compile</scope>
        <type>jar</type>
    </dependency>

</dependencies>

<build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <extensions>true</extensions>
        </plugin>
    </plugins>
</build> 
```

## 堆栈跟踪

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[7,7] error: cannot access TestCase
[ERROR]   class file for junit.framework.TestCase not found
/home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[17,24] error: cannot find symbol
[ERROR]  class DashboardViewTest
/home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[17,46] error: cannot find symbol
[ERROR]  class DashboardViewTest
/home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[15,4] error: method does not override or implement a method from a supertype
[INFO] 4 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] IZI ............................................... SUCCESS [0.183s]
[INFO] IZI - App ......................................... SUCCESS [36.895s]
[INFO] IZI - Test ........................................ FAILURE [3.741s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 41.924s
[INFO] Finished at: Sat Nov 17 16:40:51 CET 2012
[INFO] Final Memory: 35M/354M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project izi-mobiler-test: Compilation failure: Compilation failure:
[ERROR] /home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[7,7] error: cannot access TestCase
[ERROR] class file for junit.framework.TestCase not found
[ERROR] /home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[17,24] error: cannot find symbol
[ERROR] class DashboardViewTest
[ERROR] /home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[17,46] error: cannot find symbol
[ERROR] class DashboardViewTest
[ERROR] /home/piotrslesarew/git/izi-mobiler/izi-mobiler-test/src/main/java/pl/araneo/farmadroid/ui/activities/test/DashboardViewTest.java:[15,4] error: method does not override or implement a method from a supertype
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :izi-mobiler-test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:35:25.137

由于 Instrumentation 测试在它们自己的模块中，并且应该在 'src/main/java' 目录中，而不是在 'src/main/test' 中，它们似乎是在与测试通常不同的生命周期阶段编译的。

我通过将 junit 范围从 test 设置为 compile 为 test 模块消除了我的项目中的这个特殊错误：

```
<dependency>
     <groupId>junit</groupId>
     <artifactId>junit</artifactId>
     <version>4.8.2</version>
     <scope>compile</scope>
</dependency> 
```

（之后我的测试无法在模拟器上运行）

# java - PrepareStatement 错误

> ID：13432082
> 
> 赞同：2
> 
> 时间：2012-11-17T15:42:44.853
> 
> 标签：java, mysql, database

我在这个函数中得到一个错误，但我不知道为什么。你能帮助我吗？

错误在我打电话的那一行`executeQuery()`

```
public static int numeroElementi(String table) throws SQLException {

    // viene reistanziata perché questa è una funziona statica!
    String DB_URL = "jdbc:mysql://localhost:3306/kmzero";
    Connection connection = DriverManager.getConnection(DB_URL, "root", "root");

    String query = "SELECT COUNT(*) AS count FROM ? ";
    PreparedStatement pStatement = connection.prepareStatement(query);
    pStatement.setString(1, table);

    try {

        ResultSet resultSet = pStatement.executeQuery();

        try {
            if (resultSet.next())
                return resultSet.getInt("count");

            else
                return 0;

        } finally {
            resultSet.close();
        }
    } finally {
        pStatement.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T15:44:13.713

我认为您不能将*tablename*（*也是 columnNames*）作为参数传递，这是应该在您的字符串中连接*tableName的时候。*

```
String query = "SELECT COUNT(*) AS count FROM " + table; 
```

如果你的桌子需要逃跑，

```
String query = "SELECT COUNT(*) AS count FROM `" + table + "`"; 
```

# actionscript-3 - as3 重置 'numPressed' 功能

> ID：13432086
> 
> 赞同：1
> 
> 时间：2012-11-17T15:43:37.090
> 
> 标签：actionscript-3

我对 as3 很陌生，所以这对你们中的大多数人来说可能很明显：P 我正在使用 numPressed 函数（它计算鼠标点击次数）并且需要在第 6 次点击后重置鼠标点击......这个是代码的样子：

```
var numPressed:Number = 0;
any_mc.addEventListener(MouseEvent.CLICK, countUp);
function countUp(evt:MouseEvent):void {
numPressed++;

if (numPressed == 1) {
any_mc.gotoAndPlay(1);
}
else if (numPressed == 2) {
any_mc.gotoAndPlay(2);
}

else if (numPressed == 3) {
any_mc.gotoAndPlay(3);
}

else if (numPressed == 4) {
any_mc.gotoAndPlay(4);
}

else if (numPressed == 5) {
any_mc.gotoAndPlay(5);
}
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:39:57.697

正如 Taurayi 所说，但你也可以像这样清理你的功能。

```
function countUp(evt:MouseEvent):void 
{
    any_mc.gotoAndPlay(numPressed++);

    if(numPressed > 5)
        numPressed = 1;
} 
```

# java - 如何确定集合是否包含多个最大结果？

> ID：13432093
> 
> 赞同：1
> 
> 时间：2012-11-17T15:44:34.600
> 
> 标签：java, collections

```
List<Integer> list;
java.util.Collections.max(list) 
```

如何确定列表是否包含多个最大结果？可以这么说：如果我找到最大值，我如何确保这是集合中的唯一条目？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T15:48:19.467

```
Integer max = Collections.max(list);
boolean containsMultipleMax = (list.indexOf(max) != list.lastIndexOf(max)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T17:25:28.137

我会避免使用 Collections.max()。只需编写自己的方法。否则，您将遍历集合两次：一次用于 max()，它必须“查看”所有元素，第二次为 indexOf() + lastIndexOf()。

```
boolean containsMultipleMax;
Iterator<Integer> i = list.iterator();
Integer max = i.next();

while (i.hasNext()) {
    Integer next = i.next();
    final int cmp = next.compareTo(max);
    if (cmp > 0) {
        max = next;
        containsMultipleMax = false;
    } else if (cmp == 0) {
        containsMultipleMax = true;
    }
} 
```

显然，这取决于您收藏的大小......如果它低于 1M，请忽略我；）。

# java - 从文件中读取时如何使用字符串标记器？

> ID：13432094
> 
> 赞同：1
> 
> 时间：2012-11-17T15:44:35.943
> 
> 标签：java, calculator

我正在用 Java 实现一个 RPN 计算器，需要帮助创建一个类来将方程解析为单独的标记。

我的输入文件将包含未知数量的方程式，如下所示：

```
49+62*61-36
4/64
(53+26)
0*72
21-85+75-85
90*76-50+67
46*89-15
34/83-38
20/76/14+92-15

```

我已经实现了自己的通用堆栈类以在程序中使用，但我现在正试图弄清楚如何从输入文件中读取数据。任何帮助表示赞赏。

我已经在[PasteBin](http://pastebin.com/XESBr4vk)上发布了我的堆栈类的源代码，以防它可能有帮助。

我还将没有文件读取的计算器上传到[PasteBin](http://pastebin.com/1LYQ6Q7a)以显示我已经完成的工作。

感谢您的帮助，我现在已经设法读取文件并分解了令牌。当它到达文件末尾时我收到一个错误，想知道如何解决这个问题？

这是代码：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.StringTokenizer;

 public class TestClass {    
  static public void main(String[] args) throws IOException {
 File file = new File("testEquations.txt");
  String[] lines = new String[10];
  try {
    FileReader reader = new FileReader(file);
    BufferedReader buffReader = new BufferedReader(reader);
    int x = 0;
    String s;
    while((s = buffReader.readLine()) != null){
        lines[x] = s;
        x++;
    }
 }
  catch(IOException e){
    System.exit(0);
}
String OPERATORS = "+-*/()";

for (String st : lines) {
    StringTokenizer tokens = new StringTokenizer(st, OPERATORS, true);
    while (tokens.hasMoreTokens()) {
        String token = tokens.nextToken();
        if (OPERATORS.contains(token))
            handleOperator(token);
        else
            handleNumber(token);
    }
     }
   }

private static void handleNumber(String token) {
System.out.println(""+token);

   }

 private static void handleOperator(String token) {
System.out.println(""+token);

  }
  } 
```

另外，我将如何确保 RPN 逐行工作？我对我试图遵循的算法感到非常困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T16:25:59.127

由于所有运算符都是单个字符，因此您可以指示`StringTokenizer`将它们与数字标记一起返回。

```
String OPERATORS = "+-*/()";
String[] lines = ...

for (String line : lines) {
    StringTokenizer tokens = new StringTokenizer(line, OPERATORS, true);
    while (tokens.hasMoreTOkens()) {
        String token = tokens.nextToken();
        if (OPERATORS.contains(token))
            handleOperator(token);
        else
            handleNumber(token);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:30:18.007

由于您的问题现在已与原始版本完全不同 - 这是对您原始版本的回应，即如何使用 FileReader 从文件中获取值。

这会将每一行放入字符串数组的单独元素中。您可能应该使用 ArrayList 代替，因为它更加灵活，但我只是将其作为一个快速演示 - 您可以根据需要对其进行清理，尽管我注意到您使用的代码需要一个 String 数组作为输入。也许您可以最初将这些值读入一个 ArrayList，然后在获得所有行后将其复制到一个数组中 - 这样您就可以根据需要放入任意多的行，并使您的代码灵活地更改您的行数输入文件。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;

public class TestClass {    
  static public void main(String[] args) {
    File file = new File("myfile.txt");
    String[] lines = new String[10];
    try {
        FileReader reader = new FileReader(file);
        BufferedReader buffReader = new BufferedReader(reader);
        int x = 0;
        String s;
        while((s = buffReader.readLine()) != null){
            lines[x] = s;
            x++;
        }
    }
    catch(IOException e){
        //handle exception
    }
    // And just to prove we have the lines right where we want them..
    for(String st: lines)
    System.out.println(st);
  }
} 
```

您之前提到您正在使用此链接上的代码：

[http://www.technical-recipes.com/2011/a-mathematical-expression-parser-in-java/#more-1658](http://www.technical-recipes.com/2011/a-mathematical-expression-parser-in-java/#more-1658)

这似乎已经处理了运算符优先级不是吗？并解析数组中的每个字符串并将它们排序为数字或运算符？从我的快速浏览来看，至少它似乎可以做到这一点。

所以看起来你只需要将你的行放在一个字符串数组中，然后你将它传递给你已经拥有的代码。无论如何，从我所看到的。

显然，这并不能解决大于 9 的数字问题，但希望它对上半年有所帮助。

:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-16T00:50:54.923

```
public void actionPerformed(ActionEvent e) {
    double sum=0;
    int count = 0 ;
    try {
        String nomFichier = "Fichier.txt";
        FileReader fr = new FileReader(nomFichier);
        BufferedReader br = new BufferedReader(fr);
        String ligneLue;

        do {
            ligneLue = br.readLine();
            if(ligneLue != null) {
                StringTokenizer st = new StringTokenizer(ligneLue, ";");
                String nom = st.nextToken();
                String prenom = st.nextToken();
                String age = st.nextToken();
                String tele = st.nextToken();
                String adress = st.nextToken();
                String codePostal = st.nextToken();
                String ville = st.nextToken();
                String paye = st.nextToken();
                double note = Double.parseDouble(st.nextToken());
                count++;
            }
        }
        while(ligneLue != null);
        br.close();
        double mediane = count / 2; 
        if(mediane % 2 == 0) {
            JOptionPane.showMessageDialog(null, "Le mediane dans le fichier est " + mediane);
        }
        else {
            mediane +=1;   
            JOptionPane.showMessageDialog(null, "Le mediane dans le fichier est " + mediane);
        }
    }//fin try
    catch(FileNotFoundException ex) {
        System.out.println(ex.getMessage());
    }
    catch(IOException ex) {
       System.out.println(ex.getMessage());
    }               
} 
```

# c - 如何禁用将单词粘贴到仅限数字的编辑控件中？

> ID：13432097
> 
> 赞同：0
> 
> 时间：2012-11-17T15:44:59.910
> 
> 标签：c, winapi, dialog, notepad, editcontrol

我正在用 C WinAPI 编写记事本的“转到行”对话框。我创建了一个仅限数字的编辑控件。但我仍然可以将文字粘贴到编辑控件中！Windows 记事本中的对话框确实会停止这种粘贴。那么我怎样才能在记事本中做同样的事情呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:04:38.277

子类化编辑控件，并在收到 WM_PASTE 时：

```
OpenClipboard
GetClipboardData
GlobalLock 
```

现在使用从 GlobalLock 返回的指针来检查非数字字符。如果找到非数字，则通知用户：

```
GlobalUnlock
CloseClipboard 
```

并从回调中返回 0 以防止将数据粘贴到编辑控件中。

如果都是数字，则`GlobalUnlock`and`CLoseClipboard`并传递消息`CallWindowProc`以允许粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:43:27.623

ES_NUMBER 的文档（我认为您正在使用）说：

> 只允许将数字输入到编辑控件中。请注意，即使使用此设置，仍然可以将非数字粘贴到编辑控件中。

为防止粘贴非数字，您需要扫描剪贴板中的数据，并在其中包含非数字时阻止粘贴。

# python - 为什么一个版本会泄漏内存，而另一个不会？（Python）

> ID：13432103
> 
> 赞同：4
> 
> 时间：2012-11-17T15:46:06.513
> 
> 标签：python, python-3.x

这两个函数以基本相同的方式计算相同的东西（整数的数量，使得相关的 Collat​​z 序列的长度不大于 n）。唯一的区别是第一个只使用集合，而第二个使用集合和列表。

第二个泄漏内存（至少在 Python 3.2 的 IDLE 中），第一个没有，我不知道为什么。我尝试了一些“技巧”（例如添加`del`语句），但似乎没有任何帮助（这并不奇怪，这些技巧*应该*没用）。

我将感谢任何可以帮助我了解发生了什么的人。

*如果您想测试代码，您可能应该使用`n`55 到 65 范围内的值，任何高于 75 的值几乎肯定会导致（完全预期的）内存错误。*

```
def disk(n):
    """Uses sets for explored, current and to_explore. Does not leak."""
    explored = set()
    current = {1}
    for i in range(n):
        to_explore = set()
        for x in current:
            if not (x-1) % 3 and ((x-1)//3) % 2 and not ((x-1)//3) in explored:
                to_explore.add((x-1)//3)
            if not 2*x in explored:
                to_explore.add(2*x)
        explored.update(current)
        current = to_explore
    return len(explored)

def disk_2(n):
    """Does exactly the same thing, but Uses a set for explored and lists for
        current and to_explore. 
       Leaks (like a sieve :))
    """
    explored = set()
    current = [1]
    for i in range(n):
        to_explore = []
        for x in current:
            if not (x-1) % 3 and ((x-1)//3) % 2 and not ((x-1)//3) in explored:
                to_explore.append((x-1)//3)
            if not 2*x in explored:
                to_explore.append(2*x)
        explored.update(current)
        current = to_explore
    return len(explored) 
```

**编辑**：在使用解释器的交互模式（没有 IDLE）时也会发生这种情况，但在直接从终端运行脚本时不会发生这种情况（在这种情况下，内存使用在函数返回后的某个时间或尽快恢复正常因为有一个明确的调用`gc.collect()`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:01:48.500

CPython从 4 KiB 池中[分配小对象](http://hg.python.org/cpython/file/3d0686d90f55/Objects/obmalloc.c#l20)（obmalloc.c，3.2.3），它在称为 arenas 的 256 KiB 块中管理这些池。每个活动池都有一个固定的块大小，范围从 8 字节到 256 字节，步长为 8。例如，从具有 16 字节块大小的第一个可用池中分配一个 14 字节对象。

如果在堆上分配 arena 而不是使用 mmap（这可以通过[mallopt 调整`M_MMAP_THRESHOLD`](http://www.gnu.org/software/libc/manual/html_node/Malloc-Tunable-Parameters.html)），则存在一个潜在问题，因为堆不能缩小到分配的最高 arena 以下，只要分配了 1 个池中的 1 个块就不会释放到一个对象（CPython 不会在内存中浮动对象）。

鉴于上述情况，您的函数的以下版本应该可以解决问题。将该行替换`return len(explored)`为以下 3 行：

```
 result = len(explored)
    del i, x, to_explore, current, explored
    return result + 0 
```

在释放容器和所有引用的对象（将 arenas 释放回系统）之后，这将返回一个`int`带有表达式的新对象`result + 0`。只要有对第一个结果对象的引用，堆就不能收缩。在这种情况下，当函数返回时，它会自动释放。

如果您在没有“加 0”步骤的情况下进行交互测试，请记住 REPL（读取、评估、打印、循环）保留对可通过伪变量“ `_`”访问的最后一个结果的引用。

在 Python 3.3 中，这应该不是问题，因为对象分配器已修改为在可用的情况下[对 arenas 使用匿名 mmap](http://hg.python.org/cpython/file/bd8afb90ebf2/Objects/obmalloc.c#l595)。（对象分配器的上限也被提高到 512 字节以适应 64 位平台，但这在这里无关紧要。）

关于手动垃圾收集，`gc.collect()`对跟踪的容器对象进行完整收集，但它也会[清除](http://hg.python.org/cpython/file/bd8afb90ebf2/Modules/gcmodule.c#l802)由内置类型（例如框架、方法、浮点数）维护的对象的空闲列表。Python 3.3 添加了额外的 API 函数来清除列表 ( [`PyList_ClearFreeList`](http://docs.python.org/3/c-api/list.html#PyList_ClearFreeList))、字典 ( [`PyDict_ClearFreeList`](http://docs.python.org/3/c-api/dict.html#PyDict_ClearFreeList)) 和集合 ( [`PySet_ClearFreeList`](http://docs.python.org/3/c-api/set.html#PySet_ClearFreeList)) 使用的空闲列表。如果您希望保持空闲列表完整，请使用`gc.collect(1)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:08:50.640

我怀疑它会泄漏，我敢打赌只是垃圾收集还没有开始，所以使用的内存一直在增长。这是因为每一轮外循环，前一个当前列表都可以进行垃圾收集，但直到任何时候都不会被垃圾收集。

此外，即使是垃圾回收，内存通常也不会释放回操作系统，因此您必须使用任何 Python 方法来获取当前使用的堆大小。

如果在每次外循环迭代结束时添加垃圾收集，这可能会减少内存使用量，或者不会减少内存使用，这取决于 Python 如何在没有它的情况下处理其堆和垃圾收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:25:57.053

您没有内存泄漏。linux 上的进程在退出之前不会向操作系统释放内存。因此，您将在 eg 中看到的统计数据`top`只会上升。

只有在运行相同或更小的作业后，Python 从操作系统中获取更多内存，当它“应该”能够重用它用于“应该”已经是垃圾的对象的内存时，才会出现内存泄漏集。

# php - 启用 openssl 时出现错误

> ID：13432104
> 
> 赞同：0
> 
> 时间：2012-11-17T15:46:14.157
> 
> 标签：php, openssl

当我尝试在启用 openssl 的情况下运行我的网站时，我收到致命错误“超过 30 秒的最大执行时间”。但是，当我在没有 openssl 的情况下运行该站点时，我收到“无法找到包装器“https” - 您在配置 PHP 时是否忘记启用它？此版本中不提供 HTTP-SSL 支持”。

我正在使用 xampp 1.8.0

当我检查 phpinfo 时，openssl 库和标头版本不同

# html - 如何仅使用 div 和 css 创建此形状

> ID：13432105
> 
> 赞同：8
> 
> 时间：2012-11-17T15:46:16.000
> 
> 标签：html, css, css-shapes

> ![您需要仅使用 div 和 CSS 创建的形状](../Images/f7e015dc8fbb95eabf0fabce9e066081.png)

我有这个形状作为PNG，我想用CSS创建它，这样我就可以动态地改变填充颜色。

我的问题是：如何仅使用`div`s 和 CSS 最有效地重新创建此图像？

请注意，橙色填充周围有一个 5 像素的白色描边。还需要创建该笔画。并且右边曲线右边的区域需要是透明的。您的 CSS 不能使用背景图片等外部资源。

理想情况下，CSS 可以在包括 IE 7、8 和 9 在内的大多数浏览器中工作。但这不是绝对必需的。

去吧，你们 CSS 向导，告诉我你们最黑暗最肮脏的 CSS 秘密。只要网站允许，我将在此设置 50 赏金，并将其全部奖励给最佳答案，无论您何时提交答案。

让我们看看你有什么。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-17T16:10:35.647

**HTML**

```
<div id="css"></div>​ 
```

**CSS**

```
#css {
  width: 118px;
  height: 74px;
  margin: 20px 20px;
  background: red;
  border: 6px solid white;
  border-radius: 20% / 62%;
  border-top-left-radius: 6px; 
  border-bottom-left-radius: 6px; 
} 
```

[活生生的例子](http://jsfiddle.net/h7jYG/23/)

我敢让你不看 HTML 就猜出哪个是哪个；）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T16:03:01.753

这个版本还兼容IE9...

HTML

```
<meta http-equiv="X-UA-Compatible" content="IE=9" />​
<div id="image">
</div> 
```

CSS：

```
#image{
background:orange;
 border: 5px solid white;
-moz-border-radius: 20% / 60%;
-webkit-border-radius: 20% / 60%;
border-radius: 20% / 60%;
-moz-border-top-left-radius: 0px;
-moz-border-bottom-left-radius: 0px;
-webkit-border-top-left-radius: 0px;
-webkit-border-bottom-left-radius: 0px;
border-top-left-radius: 0px;
border-bottom-left-radius: 0px;
height:100px;
width:150px;   
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-17T15:59:59.373

只需放置正确的颜色，最终更改尺寸

```
#shape {
  width: 200px;
  height: 150px;
  background: orange;
  border: 5px solid white;
  border-radius: 15% / 50%;
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;
} 
```

# asp.net-mvc-3 - 具有代码优先独立关联或外键关联的 EF 模型

> ID：13432109
> 
> 赞同：2
> 
> 时间：2012-11-17T15:46:34.907
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4, ef-code-first

[我已经阅读了来自Ladislav](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations)的关于独立协会的文章。我已经检查了他在此[链接](http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/)中提供的信息。这些信息非常有帮助，并且提供了一些启示。但是，我想对我有权访问的现有数据库进行建模。它有三个表用户、证书和测验。

起初我认为建模是独立的关联。为什么？我的 Users 表有主键 UserID，Certificates 表有 PK CertID 和一个 UserID 列，我可以说它是外键。就在我认为它是一对多的关系时，我意识到用户表中的某些用户 ID 在证书表中找不到。但是，证书中的所有用户 ID 都可以在用户表中找到。

我的问题是我是否应该使用独立关联，如果是，如何实现这一点，使我的用户表成为主体类，而证书则成为依赖类。这样我就可以在我的用户表中显示或获取值，然后从我的 asp.net mvc 3 应用程序中的证书表中读取值。

请更正下面的代码，它显示了我打算实现我上面所说的内容：

```
 public class Certificates
{
   [Key]
    public Users CertID { get; set; }
    public int ID { get; set; }
    public DateTime  recvd { get; set; }
    public int QuizID { get; set; }

}

public class Users
{
    public int ID { get; set; }
    public string LastName { get; set; }
    public string FirstName { get; set; }
    public string email { get; set; }
    public ICollection<Certificates> Certificates { get; set; }
}

 public class Quiz
    {
        public int QuizID { get; set; }
        public string QuuizName { get; set; }
        public int VolumeNo { get; set; }
        public int  mark { get; set; }
        public ICollection<Certificates> Certificates { get; set; }
    }

public class cpdContext : DbContext
{
    public DbSet<Certificates> Certificates { get; set; }
    public DbSet<Users> Users { get; set; }
    public DbSet<Users> Quiz { get; set; } 
```

最后，如何使用这三个类的信息显示详细信息视图，并能够添加用户标记和测试。我想建模的关系是测验和证书之间的一对多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:19:38.023

> 我的 Users 表有主键 UserID，Certificates 表有 PK CertID 和一个 UserID 列，我可以说它是外键。就在我认为它是一对多的关系时，我意识到用户表中的某些用户 ID 在证书表中找不到。但是，证书中的所有用户 ID 都可以在用户表中找到。

这对于一对多的关系`User`来说是很正常的，在这种关系中，主体和`Certificate`从属关系，并且您对关系实施了约束。

我不认为这是决定独立或外键关联的论据。据我所知，您可以使用两种关联类型映射数据库模式。数据库模式不应该是决定的驱动因素。您链接的 Ladislav 的帖子详细解释了它。除了数据库模式之外，还有其他几点可以指导决策：

*   架构：对象和关系世界的严格分离，这可能会导致您不希望将“外键”属性作为对象模型中的关系工件。这有利于独立协会。
*   易用性：在某些情况下，额外的外键属性可以更轻松地处理关系，尤其是更新它们。这一点是针对外键关联的。
*   性能：在某些情况下，具有较大模型的外键关联，EF 更快。

在大多数情况下，以上第 2 点为我个人提供了提示，但正如所说，两者都是可能的。

与外键关联的映射（我省略了除 PK、FK 和导航属性之外的所有属性以保持简短）：

```
public class Certificates
{
    [Key]
    public int CertID { get; set; }

    [ForeignKey("User")]
    public int UserID { get; set; }
    [ForeignKey("Quiz")]
    public int QuizID { get; set; }

    public Users User { get; set; }
    public Quiz Quiz { get; set; }
}

public class Users
{
    public int ID { get; set; }
    public ICollection<Certificates> Certificates { get; set; }
}

public class Quiz
{
    public int QuizID { get; set; }
    public ICollection<Certificates> Certificates { get; set; }
} 
```

这假定这两种关系都是必需的，即数据库中的 FK 不可为空。如果它们是，您还需要使 FK 属性为空（`int?`）。您可以使用 Fluent API 代替数据注释，类似于（但不完全相同！）以下示例。

与独立关联的映射：

```
public class Certificates
{
    [Key]
    public int CertID { get; set; }

    public Users User { get; set; }
    public Quiz Quiz { get; set; }
}

public class Users
{
    public int ID { get; set; }
    public ICollection<Certificates> Certificates { get; set; }
}

public class Quiz
{
    public int QuizID { get; set; }
    public ICollection<Certificates> Certificates { get; set; }
}

public class cpdContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entitiy<Users>()
            .HasMany(u => u.Certificates)
            .WithRequired(c => c.User)  // or WithOptional
            .Map(m => m.MapKey("UserID")); //<- DB FK column name

        modelBuilder.Entitiy<Quiz>()
            .HasMany(u => u.Certificates)
            .WithRequired(c => c.Quiz)  // or WithOptional
            .Map(m => m.MapKey("QuizID")); //<- DB FK column name
    }
} 
```

中的导航属性`Certificates`不是必需的（第一个和第二个示例中都没有），您可以将它们删除，如果您不需要它们，只需使用无参数`WithRequired()`然后，并在第一个示例中使用 Fluent API。（可能对类中的集合的`[ForeignKey("UserID")]`注释也可以。）`Certificates``Users`

# c - 链接器错误：会发生什么？

> ID：13432119
> 
> 赞同：0
> 
> 时间：2012-11-17T15:47:38.517
> 
> 标签：c, gcc, compilation, linker

我知道这里没有多少人拥有心灵感应能力，但我会尽力提供尽可能多的信息，以便有人可以帮助我调试我认为是我正在尝试编译的某些程序中的链接器错误。

所以，程序是`cilkprof`（见[这里](https://secure-software.intel.com/en-us/system/files/article/182363/cilkutil-linux-2516-v12.tgz)，警告：tgz 文件）。在其中是 a`Makefile`我只将 var 更改`CXX = icpc`为`CXX = g++`. 其他一切都是平等的。

```
/usr/bin/ld: ../../3rdparty/pintool/intel64/lib/libpin.a(util_host_ia32e.os): 
relocation R_X86_64_PC32 against symbol `DoXsave' can not be used when making a shared object; recompile with -fPIC
/usr/bin/ld: final link failed: Bad value
collect2: error: ld returned 1 exit status
make: *** [linux64/cilkprof.so] Error 1 
```

我知道我应该理解`libpin.a`应该用 重新编译`-fPIC`，但我拥有的 pin 版本已经编译。知道我可能做错了什么吗？请询问是否有不清楚的地方。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:10:20.803

在我看来，Makefile 正在尝试构建一个共享库并将其链接到一个静态非 PIC 库，即 AFAIK，这是您无法做到的。因此，如果您无法重新编译库，`-fPIC`那么我看到的唯一解决方案是修改 Makefile 并构建一个静态库。

# jquery - jquery选择动态加载的div

> ID：13432120
> 
> 赞同：0
> 
> 时间：2012-11-17T15:47:42.313
> 
> 标签：jquery, jquery-selectors

我有以下 jQuery，当它悬停在 div 上时，它会将一些 html 加载到 div 中：

```
$("div").hover(
    function () {
        $(this).load('htmlsnippets/divHoverButtons.txt');
    }, 
    function(){
        $("#divHoverButtons").css("visibility", "hidden");
    });

$("#setWidth").click(
    function(){
        $(this).css("visibility", "hidden");
    }); 
```

divHoverButtons.txt 包含：

```
<div id="divHoverButtons">
    <div id='setWidth'>Set Width</div>
</div> 
```

所以，当任何 div 悬停在上面时，它变成：

```
<div>
    <div id="divHoverButtons">
        <div id='setWidth'>Set Width</div>
    </div>
</div> 
```

问题是当我点击 div“setWidth”时，它并没有隐藏它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:52:06.000

您必须使用`delegate()`，因为您的 div #setWidth 在加载时不在 DOM 中

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

```
$("body").delegate("#setWidth", "click", function() {
  $(this).hide();
}); 
```

# php - 从通过 file_get_contents 接收的文本中的数组中查找单词

> ID：13432121
> 
> 赞同：1
> 
> 时间：2012-11-17T15:47:48.407
> 
> 标签：php, arrays, search

我有一个远程页面的收据：

```
$page = file_get_contents ('http://sayt.ru/'); 
```

有一个单词数组：

```
$word = array ("word", "second"); 
```

如何计算数组中与页面上的文本匹配的单词数？开始往那个方向挖

```
$matches = array ();
$count_words = preg_match_all ('/'. $word. '/ i',$page, $matches); 
```

但肯定不是我挖掘的方向，因为计数始终为零。并且通过 preg_match_all 去寻找一个词，而不是整个数组。: (

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:53:17.090

您必须检查数组中的每个单词或使用正则表达式，如下所示：

```
$serachWords = array_map(function($w){ return preg_quote($w,'/'); }, $word);
$search = implode('|', $searchWords);
$count_words = preg_match_all('/\b(?:'.$serach.')\b/i', $page, $matches); 
```

添加了一些修改以获得更好的结果：转义所有单词，因此它们不会破坏表达式并添加单词边界 ( `\b`) 不匹配`word`作为单词，而不是`swords`.

# ruby - 字符串插值与字符串中的实际百分比

> ID：13432122
> 
> 赞同：20
> 
> 时间：2012-11-17T15:47:52.433
> 
> 标签：ruby, string-formatting

处理这个问题的正确方法是什么？

```
"Hi %s, today is %s so you get 10% OFF!" % ['Joe', 'Monday']
# => ArgumentError: malformed format string - %O 
```

我不能正常使用`%{keyname}`，或者`#{code}`因为我正在解析 url 的字符串并将它们剥离出来，所以我可以将它们以不同的格式（带/不带协议、缩短、全长等）重新粘贴。所以替换的数量是未知的，他们没有名字。它们只是一个 url 数组。

我也尝试逃避`%`：

```
"Hi %s, today is %s so you get 10\% OFF!" % ['Joe', 'Monday']
# => ArgumentError: malformed format string - %O 
```

但得到完全相同的结果。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-17T15:51:36.533

两个%

```
>> "Hi %s, today is %s so you get 10%% OFF!" % ['Joe', 'Monday']
=> "Hi Joe, today is Monday so you get 10% OFF!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:53:45.867

```
 "Hi %s, today is %s so you get 10%% OFF!" % ['Joe', 'Monday'] 
```

# timer - 浮点小数比较 cocos2d

> ID：13432124
> 
> 赞同：1
> 
> 时间：2012-11-17T15:47:58.640
> 
> 标签：timer, cocos2d-iphone

大家好，这里是我的问题：我如何将浮点数减少到小数？%.1 对我来说是最好的，但是当我与 unNumero= 1.7f 之类的另一个浮点数进行比较时，代码不会这样做。我认为是因为浮点数更多。我该如何解决这个问题。我需要将 stopCrono 的结果与一些随机浮点数进行比较，但限制为 2 位小数。对不起，我的英语不是我的母语。这是我的代码

-(void)startCrono:(ccTime)delta {

```
totalTime += delta  ;
currentTime = totalTime;
timeLimit = 2.0f;
[timeLabel setString:[NSString stringWithFormat:@"%.1f ",currentTime ]];
if (currentTime >= timeLimit) {

    [self unschedule:_cmd];
    } 
```

} -(void)stopCrono:(ccTime)crono2{

```
[self unschedule:@selector(startCrono:)];
unNumero = 1.7f;

if(unNumero == currentTime){

    CCLOG(@"OK");
} 
```

}

当我在 1.7 中停止我的 crono 时，如果状态不工作 CClog 不打印 OK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:29:09.147

因为浮点数学并不精确，所以使用 == 运算符比较两个浮点值以查看它们是否相等通常不会产生您期望的结果。我向您推荐Bruce Dawson 的[这篇文章](http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/)，它是关于浮点数的优秀系列的一部分，以了解如何以正确的方式比较浮点值（提示：它比看起来要困难得多）。

# java - 为什么它是无限循环？

> ID：13432125
> 
> 赞同：2
> 
> 时间：2012-11-17T15:48:12.993
> 
> 标签：java, for-loop, infinite

我正在尝试通过一个 for 循环，它就像任何其他 for 循环一样，但它似乎是无限的；我一定是在做一些愚蠢的事情。任何人都可以看到吗？

```
double x;
for(x = -1; x < 1; x+=2/20) {
    double y = b * Math.sqrt(1-Math.pow(x-FocusToCenter, 2));
    System.out.println("X:"+x+" Y: "+roundFourDecimal(y));
} 
```

如果将 x+=2/20, 更改为 x+=0.1，那就完全没问题了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T15:50:06.607

`2/20`评估什么？我怀疑因为它们都是整数，所以你得到一个 0，因此根本不会增加`x`。

尝试将它们表达为双打，例如`2.0 / 20.0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:51:26.417

整数除法，`2/20 = 0`

IE`x=x+0`

因此迭代器没有被修改，因此无限循环

要做你想做的事情，试试`2.0/20.0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T15:50:41.753

2/20 是整数算术运算，因此结果为零。基本上你不会在循环中增加 x 。为了将其作为浮点除法线程，您需要：

```
2.0/20 
```

或者

```
((double)2) / 20; 
```

# makefile - 如何在特定目标的生成文件中使用 include 指令

> ID：13432127
> 
> 赞同：21
> 
> 时间：2012-11-17T15:48:30.027
> 
> 标签：makefile, gnu-make

我只想将 include 指令用于特定目标。我不想在不需要目标时运行其他 makefile，因为这意味着生成文件是不必要的。

那么有没有办法有条件地使用以目标为条件的包含指令？或者以某种方式使包含指令成为目标的先决条件。

这是我到目前为止所拥有的：

```
# Flags

INCDIR = $(CURDIR)/include
CFLAGS = -Wall -Wno-overflow -Wno-uninitialized -pedantic -std=c99 -I$(INCDIR) -O3
LFLAGS = -flat_namespace -dynamiclib -undefined dynamic_lookup

# Directory names

# Set vpath search paths

vpath %.h include
vpath %.c src
vpath %.o build
vpath %.d build

# Get files for the core library

CORE_FILES = $(wildcard src/*.c)
CORE_OBJS = $(patsubst src/%.c, build/%.o, $(CORE_FILES))
CORE_DEPS = $(CORE_OBJS:.o=.d)

# Core library target linking

core : $(CORE_OBJS) | bin
    $(CC) $(LFLAGS) -o bin/libcbitcoin.2.0.dylib $(CORE_OBJS)

# Include header prerequisites (How to do only for "core" target?)

include $(CORE_DEPS)

# Makefiles for header dependencies. 

$(CORE_DEPS): build/%.d: src/%.c | build
    rm -f $@; \
    $(CC) -I$(INCDIR) -MM $< -MT '$(@:.d=.o) $@' > $@

# Objects depend on directory

$(CORE_OBS) : | build

# Create build directory

build:
    mkdir build

# Create bin directory

bin:
    mkdir bin

# Core Compilation

$(CORE_OBJS): build/%.o: src/%.c
    $(CC) -c $(CFLAGS) $< -o $@

# Depencies require include/CBDependencies.h as a prerequisite

build/CBOpenSSLCrypto.o: include/CBDependencies.h

# Crypto library target linking

crypto : build/CBOpenSSLCrypto.o -lcrypto -lssl | bin
    $(CC) $(LFLAGS) -o bin/libcbitcoin-crypto.2.0.dylib build/CBOpenSSLCrypto.o -lcrypto -lssl

# Crypto library compile

build/CBOpenSSLCrypto.o: dependencies/crypto/CBOpenSSLCrypto.c
    $(CC) -c $(CFLAGS) $< -o $@

#Clean

clean:
    rm -f $(CORE_OBJS) $(CORE_DEPS) build/CBOpenSSLCrypto.o 
```

正如您应该能够告诉我的，我不需要为“crypto”包含“.d”文件，但我为“core”（默认目标）包含。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-18T15:26:12.487

Make 不是一种程序语言，因此将其视为一种违背规则的语言；您的 makefile 将难以扩展，并且可能导致细微的错误。

Tom Tromey有一个[更好的方法，它干净、高效且可扩展。](http://mad-scientist.net/make/autodep.html)诀窍是意识到您可以在与目标文件相同的步骤中构建依赖文件。依赖项只是告诉 Make 对象何时应该被重建；首次构建对象时不需要它们，因为 Make 知道必须构建对象。如果依赖项发生了变化，那只能是因为源中的某些内容或旧的依赖项发生了变化，所以 Make 再次知道必须重建对象。（这并不明显，所以可能需要一点思考。）

```
$(CORE_OBJS): build/%.o: src/%.c
    $(CC) -c $(CFLAGS) $< -o $@
    $(CC) -MM -MF build/$*.d $<

-include build/*.d 
```

还有一个障碍：如果您更改代码以删除依赖项 - 并且还删除该文件 - 您将无法重建，因为旧的依赖项列表仍然需要一个无法再找到的文件. 复杂的解决方案是处理依赖文件，以使每个先决条件（例如标头）本身成为目标，无需命令，以便可以假定在需要时对其进行重建：

```
$(CORE_OBJS): build/%.o: src/%.c
    $(CC) -c $(CFLAGS) $< -o $@
    $(CC) -MM -MF build/$*.d $<
    @cp build/$*.d build/$*.P
    @sed -e 's/#.*//' -e 's/^[^:]*: *//' -e 's/ *\\$$//' \
            -e '/^$$/ d' -e 's/$$/ :/' < build/$*.P >> build/$*.d;
    @rm build/$*.P 
```

一个更粗略但几乎同样万无一失的方法是为标题和来源设置包罗万象的规则：

```
$(CORE_OBJS): build/%.o: src/%.c
    $(CC) -c $(CFLAGS) $< -o $@
    $(CC) -MM -MF build/$*.d $<

%.cc %.h: 
```

**编辑：**

分解新命令：

该`-MM`选项告诉 gcc 为目标文件生成`make`规则，而不是预处理或编译。默认是将规则发送到它将发送预处理输出的任何地方，通常是标准输出。

与 一起使用的`-MF`选项`-MM`指定输出文件。所以`-MM -MF build/$*.d`将规则放在我们想要的地方。

所以以下两个命令（几乎总是）是等价的：

```
 $(CC) -MM -MF build/$*.d $<

    $(CC) -MM $< > build/$*.d 
```

（我忽略了`-I$(...)`使用该`-MMD`选项的可能性，因为两者都变得有点复杂，并不是问题的重点。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T23:16:33.603

您可以使用 MAKECMDGOALS。

```
ifeq (core,$(MAKECMDGOALS))
include $(CORE_DEPS)
endif 
```

`ifneq (,$(findstring core,$(MAKECMDGOALS)))`如果有多个目标的可能性，您当然可以使用。

注意：这是一个“快速而肮脏”的解决方案——我同意 Beta 版的观点，即您不应该将其作为一种常见做法（如果您在很多 makefile 中这样做，这可能会变得混乱......）。

约翰

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T12:55:45.610

我忍不住打破了关于什么是好的答案的准则。

在我看来，我对原始问题的回答是，不，您不能包含依赖于目标的规则 - 在考虑目标之前处理所有规则。这是 make 的限制（我猜）。再说一次，好点，有 MAKECMDGOALS，但这不只是 make 实用程序本身的 hack 吗？

Beta的回答是合理的，也够正统的，但即使是能做到的最好也不能说干净。如果 make 之前没有处理过特定的目标并且适当的 build/*.d 依赖文件不在那里，它将无法工作。

# python - 在 numpy 中求解大量小型方程组

> ID：13432129
> 
> 赞同：6
> 
> 时间：2012-11-17T15:48:43.433
> 
> 标签：python, numpy, linear-algebra

我有大量的小型线性方程组，我想使用 numpy 有效地求解它们。基本上，给定的`A[:,:,:]`和`b[:,:]`，我希望找到`x[:,:]`给定的`A[i,:,:].dot(x[i,:]) = b[i,:]`。所以如果我不关心速度，我可以解决这个问题

```
for i in range(n):
    x[i,:] = np.linalg.solve(A[i,:,:],b[i,:]) 
```

但是由于这涉及到 python 中的显式循环，并且由于`A`通常具有类似 的形状`(1000000,3,3)`，因此这样的解决方案会很慢。如果 numpy 达不到这一点，我可以在 fortran 中执行此循环（即使用 f2py），但如果可能的话，我更愿意留在 python 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-01T18:42:44.203

对于那些现在回来阅读这个问题的人，我想我会节省其他人的时间并提到 numpy 现在使用广播来处理这个问题。

因此，在 numpy 1.8.0 及更高版本中，以下可用于求解 N 个线性方程组。

```
x = np.linalg.solve(A,b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T17:50:19.680

我想回答自己有点失礼，但这是我目前拥有的 fortran 解决方案，即其他解决方案在速度和简洁性方面有效竞争的内容。

```
function pixsolve(A, b) result(x)
    implicit none
    real*8    :: A(:,:,:), b(:,:), x(size(b,1),size(b,2))
    integer*4 :: i, n, m, piv(size(b,1)), err
    n = size(A,3); m = size(A,1)
    x = b
    do i = 1, n
        call dgesv(m, 1, A(:,:,i), m, piv, x(:,i), m, err)
    end do
end function 
```

这将被编译为：

```
f2py -c -m foo{,.f90} -llapack -lblas 
```

并从 python 调用为

```
x = foo.pixsolve(A.T, b.T).T 
```

（`.T`由于 f2py 中的设计选择不佳，因此需要 s，如果 s 被忽略，这都会导致不必要的复制、低效的内存访问模式以及看起来不自然的 fortran 索引`.T`。）

这也避免了 setup.py 等。我没有选择 fortran 的骨头（只要不涉及字符串），但我希望 numpy 可能有一些简短而优雅的东西可以做同样的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T15:21:01.187

我认为您认为显式循环是一个问题是错误的。通常它只是值得优化的最里面的循环，我认为这在这里成立。例如，我们可以衡量代码的开销与实际计算的成本：

```
import numpy as np

n = 10**6
A = np.random.random(size=(n, 3, 3))
b = np.random.random(size=(n, 3))
x = b*0

def f():
    for i in xrange(n):
        x[i,:] = np.linalg.solve(A[i,:,:],b[i,:])

np.linalg.pseudosolve = lambda a,b: b

def g():
    for i in xrange(n):
        x[i,:] = np.linalg.pseudosolve(A[i,:,:],b[i,:]) 
```

这给了我

```
In [66]: time f()
CPU times: user 54.83 s, sys: 0.12 s, total: 54.94 s
Wall time: 55.62 s

In [67]: time g()
CPU times: user 5.37 s, sys: 0.01 s, total: 5.38 s
Wall time: 5.40 s 
```

IOW，除了实际解决您的问题之外，它只花费 10% 的时间做任何事情。现在，我完全可以相信，`np.linalg.solve`相对于你可以从 Fortran 中获得的东西，它本身对你来说太慢了，所以你想做别的事情。在小问题上可能尤其如此，想想看：IIRC 我曾经发现手动展开某些小解决方案更快，尽管那是前一段时间。

但就其本身而言，在第一个索引上使用显式循环会使整体解决方案变得非常缓慢是不正确的。如果`np.linalg.solve`足够快，循环不会在这里改变太多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T16:02:55.913

我认为您可以一次完成，使用由对角线周围的 3x3 块组成的 (3x100000,3x100000) 矩阵。

未测试：

```
b_new = np.vstack([ b[i,:] for i in range(len(i)) ])
x_new = np.zeros(shape=(3x10000,3) )

A_new = np.zeros(shape=(3x10000,3x10000) )
n,m = A.shape
for i in range(n):
   A_new[3*i:3*(i+1),3*i:3*(i+1)] = A[i,:,:]

x = np.linalg.solve(A_new,b_new) 
```

# c - 我在 queue.h 中的修改是由伯克利实现的吗

> ID：13432131
> 
> 赞同：2
> 
> 时间：2012-11-17T15:48:58.800
> 
> 标签：c, linux, data-structures, queue

Berkeley 在他们的 FreeBSD 中实现的[queue.h](http://cvsweb.netbsd.org/bsdweb.cgi/src/sys/sys/queue.h?rev=1.30)确实非常有用，现在我有一个关于**TAILQ_LAST**宏的问题，请注意我提出的不同之处

**原始代码**

```
#define    TAILQ_HEAD(name, type)                        \
struct name 
{                                \
    struct type *tqh_first;    /* first element */            \
    struct type **tqh_last;    /* addr of last next element */        \
}

#define    TAILQ_ENTRY(type)                        \
struct 
{                                \
   struct type *tqe_next;    /* next element */            \
   struct type **tqe_prev;    /* address of previous next element */    \
}

#define    TAILQ_LAST(head, headname)                    \
(*(((struct headname *)((head)->tqh_last))->tqh_last)) 
```

**我的提议**

```
#define    TAILQ_LAST(head, headname)                    \
((head)->tqh_last)) 
```

我的观点是 headname 的*tqh_last***成员**是指最后一个**TAILQ_ENTRY的****tqe_next**成员的地址，这正是tailq中最后一个条目的地址。

 *****如果我错了，请纠正我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:05:59.213

只看这两个定义，我认为

```
#define    TAILQ_LAST(head, headname)                    \
(*(((struct headname *)((head)->tqh_last))->tqh_last)) 
```

将返回一个`type*`而这

```
#define    TAILQ_LAST(head, headname)                    \
((head)->tqh_last)) 
```

将返回 a `type**`，因此两者不等价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T08:43:13.543

不，它们不一样。请注意，tqh_last 是最后**一个**元素的地址，而不是最后一个元素。如果您直接使用`(head)->tqh_last`，那么它只会返回 NULL。

那为什么会这样`*(((struct headname *)((head)->tqh_last))->tqh_last)`

请看：

```
 #define TAILQ_INSERT_TAIL(head, elm, field) do {            \
    TAILQ_NEXT((elm), field) = NULL;                \
    (elm)->field.tqe_prev = (head)->tqh_last;           \
    *(head)->tqh_last = (elm);                  \
    (head)->tqh_last = &TAILQ_NEXT((elm), field);           \
} while (0) 
```

`(head)->tqh_last = &TAILQ_NEXT((elm), field);` 我们需要的是`&TAILQ_NEXT((elm), field)->field.tqe_prev`，根据`(elm)->field.tqe_prev = (head)->tqh_last;`，然后我们得到 `(*(((struct headname *)((head)->tqh_last))->tqh_last))`*****

# c# - 带有 Ninject 的 WPF 应用程序

> ID：13432134
> 
> 赞同：6
> 
> 时间：2012-11-17T15:49:06.127
> 
> 标签：c#, wpf, .net-4.0, ninject

我在WPF中迷失了Ninject。

我正在 App.xaml 中对其进行初始化，但 MainWindow.xaml 中的 ITest 属性（即使使用 InjectAttribute）没有得到解决并且保持为空。

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {    
        IKernel kernel = new StandardKernel();
        kernel.Bind<ITest, Test>();
        base.OnStartup(e);
    }
} 
```

我用谷歌搜索了一下，发现它不是那样工作的。在试图找到解决方案时，我最终创建了 IMainWindow，除了“void Show();”之外什么都没有。并将其添加到主窗口。

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {    
        IKernel kernel = new StandardKernel();
        kernel.Bind<ITest, Test>();

        kernel.Bind<IMainWindow, MySolution.MainWindow>();
        kernel.Get<IMainWindow>().Show();

        base.OnStartup(e);
    }
} 
```

为此，我得到一个 NullReferenceException 与 .Get

我也试过这个：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {    
        IKernel kernel = new StandardKernel();
        kernel.Bind<ITest, Test>();

        MainWindow = new MySolution.MainWindow(kernel);
        //then kernel.Inject(this); in the MainWindow constructor 
        MainWindow.Show();

        base.OnStartup(e);
    }
} 
```

现在，我在 MainWindow 的 .Inject 行收到 NullReferenceException。

我找到了另一种不同的解决方案，但它们似乎很重量级，我放弃了对所有解决方案的测试并尝试哪一个有效。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T16:22:23.603

您没有正确注册您的类型，这就是第二个示例引发异常的原因。正确的语法是：`kernel.Bind<SomeInterface>().To<SomeImplementation>()`

所以正确的用法：

```
protected override void OnStartup(StartupEventArgs e)
{
    IKernel kernel = new StandardKernel();
    kernel.Bind<ITest>().To<Test>();

    kernel.Bind<IMainWindow>().To<MainWindow>();
    var mainWindow = kernel.Get<IMainWindow>();
    mainWindow.Show();

    base.OnStartup(e);
} 
```

你需要用属性标记你的`[Inject]`属性：

```
public partial class MainWindow : Window, IMainWindow
{
    public MainWindow()
    {
        InitializeComponent();
    }

    [Inject]
    public ITest Test { get; set; }
}

public interface IMainWindow
{
    void Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T15:20:23.070

我相信你有一个解决方案，但如果你愿意，你可以在 MainWindow 上使用构造函数注入而不是属性注入。

这避免了创建虚拟接口 IMainWindow 并为所有注入的类创建不必要的公共属性。

这是解决方案：

主窗口.cs

```
public partial class MainWindow : Window, IMainWindow
{
    private readonly ITest test;

    public MainWindow(ITest test)
    {
        this.test = test;
        InitializeComponent();
    }

} 
```

应用程序.xaml.cs：

```
protected override void OnStartup(StartupEventArgs e)
{
    IKernel kernel = new StandardKernel();
    kernel.Bind<ITest>().To<Test>();

    var mainWindow = kernel.Get<MainWindow>();
    mainWindow.Show();

    base.OnStartup(e);
} 
```

# c# - 自动将 asmx 提供的 xml 数据映射到 POCO 对象

> ID：13432136
> 
> 赞同：0
> 
> 时间：2012-11-17T15:49:27.733
> 
> 标签：c#, .net, web-services, xml-parsing, mapping

在我的 .net 代码中，我正在使用第三方 asmx 服务，该服务为我提供 Xml 格式的数据。所以基本上，我收到了一个 XmlNode 形式的结构：

```
<PostcodeEntry>
    <Postcode>13542</Postcode>
    <Postcodename>Odessa</Postcodename>
</PostcodeEntry> 
```

目前，要将其映射到我的 POCO 对象，我必须手动遍历相应的 ChildNode 并检索它们的 InnerText 值以获取实际数据：

```
 var PostCodeNode = entryNode.SelectSingleNode("Postcode");
 if (PostCodeNode != null)
 {
      result.PostCode = PostCodeNode.InnerText;
 } 
```

如果我需要映射一个大的信息结构，代码就会变成一个混乱的代码滚动。

有没有办法可以改进这一点，所以我不必手动编写解析？对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:08:01.830

我相信您有不同的选择，具体取决于您获取数据的方式以及您喜欢如何设计代码等。从您的简短描述中，我至少可以想到以下两个：

*   创建一个 XML 序列化器 - 例如，通过使用 Xml 属性标记您的类并通过序列化器将 XML 直接反序列化为所需的对象。这种方法的缺点是您将在序列化程序和业务对象之间创建强耦合。请看一下这样的内容：[http](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization) ://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization 。

*   创建一个代理对象并将您的代理对象映射到您的业务对象。您可以使用 asmx 服务公开的 WSDL 或使用 XSD.exe 工具或类似工具来创建代理对象（如果 XML 尚未由 XSD 描述，您可能需要首先基于 XML 生成 XSD ）。然后，您可以将代理对象的属性映射到业务对象的属性。这将为您提供更清晰的对象之间的分离，但同时它需要更多的工作。

兄弟。莫腾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:05:24.807

您可以为 WebService 创建 SoapClient 对象，然后您可以将响应返回为 List<>。您需要将输出响应更改为 List<>。

例如Consilder这个webservice消费， http: [//xxx.xx.xxx.xxx/CosmosService/Cm_Service.asmx](http://xxx.xx.xxx.xxx/CosmosService/Cm_Service.asmx)

然后在您的应用程序中添加服务引用，单击高级按钮，更改集合类型 System.Collections.GenericList。

那么您可以像这样直接将 WebService 方法作为 List<> 使用

```
CosmosRef.CM_ServiceSoapClient client = new CosmosRef.CM_ServiceSoapClient();

            List<CosmosRef.Product> listProduct = client.GetAllProducts("Computers", 1);
            dataGrid1.DataContext = listProduct; 
```

# c++ - 在“等效”QPixmap 上绘制 QGraphicItems 的最快方法

> ID：13432137
> 
> 赞同：1
> 
> 时间：2012-11-17T15:49:40.733
> 
> 标签：c++, qt, graphics

我想绘制彩色瓷砖作为 QGraphicsscene 的背景，并使用 QGraphicsView 为场景提供平移和缩放功能。首先，我使用 QGraphicItems 来绘制每个图块。因为我有很多图块，所以在平移或缩放时这是一个相当大的性能问题，但是由于我不需要修改图块的任何部分，所以我切换到使用以下代码生成 QPixmap：

```
void plotGrid(){
    Plotable::GraphicItems items;
    append(items,mParticleFilter.createGridGraphics());
    append(items,mParticleFilter.getRoi().mRectangle.createGraphics(greenPen()));
    scaleItems(items,1.0,-1.0);
    QGraphicsScene scene;
    showItemsOnScene(items,&scene);
    QRectF boundingRect = scene.itemsBoundingRect();
    double cScale = ceil(1920.0/boundingRect.size().width());
    QSize size(boundingRect.size().toSize()*cScale);
    QPixmap pixmap(size);
    pixmap.fill(Qt::transparent);
    QPainter p(&pixmap);
    //p.setRenderHint(QPainter::Antialiasing);
    scene.render(&p);
    p.end();
    QGraphicsPixmapItem* item = new QGraphicsPixmapItem(pixmap);
    item->setOffset(boundingRect.topLeft()*cScale);
    item->scale(1/cScale,1/cScale);
    mpView->showOnScene(item);
  } 
```

虽然这解决了缩放和平移问题，但生成像素图的时间引入了一些明显的延迟，可能是因为我首先创建了一个场景然后渲染它。有没有更快的方法从 QGraphicItems 开始动态生成 QPixmap ？

只是为了完整性，瓷砖的图像：![在此处输入图像描述](../Images/338a176aae48207e6cbb8018ec872247.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:50:26.560

所以我终于至少通过了中间场景。以下代码仅依赖于 QPainter 来呈现像素图。我的主要问题是正确进行所有转换。否则它是非常简单的......在我的场景中，这个版本将处理时间减半到 500 毫秒。绘制项目花费了 450 毫秒。如果有人对更多改进有更多建议，那将是最受欢迎的（顺便说一下，改变决议并没有多大帮助）

```
void SceneWidget::showAsPixmap(Plotable::GraphicItems const& items){
    QRectF boundingRect;
    boostForeach(QGraphicsItem* pItem,items) {
      boundingRect = boundingRect.united(pItem->boundingRect());
    }
    QSize size(boundingRect.size().toSize());
    double const cMaxRes =1920;
    double const scale = cMaxRes/boundingRect.size().width();
    QPixmap pixmap(size*scale);
    pixmap.fill(Qt::transparent);
    QPainter p(&pixmap);
    //p.setCompositionMode( QPainter::CompositionMode_Source );
    p.translate(-boundingRect.topLeft()*scale);
    p.scale(scale,scale);
    QStyleOptionGraphicsItem opt;
    boostForeach(QGraphicsItem* item,items) {
      item->paint(&p, &opt, 0);
    }
    p.end();
    QGraphicsPixmapItem* item = new QGraphicsPixmapItem(pixmap);
    item->scale(1.0/scale,-1.0/scale);
    item->setOffset(boundingRect.topLeft()*scale);
    showOnScene(item);
} 
```

# chef-infra - 使用 Chef 在 vagrant 中使用自定义 docroot 设置 apache2

> ID：13432138
> 
> 赞同：1
> 
> 时间：2012-11-17T15:50:01.100
> 
> 标签：chef-infra, vagrant

我是流浪汉和厨师的新手。作为第一个项目，我决定简单地设置一个 apache2 并将 docroot 指向共享文件夹。

这似乎需要执行 Chef 的 apache2 配方的“web_app”目标并将 docroot 作为变量。但是，我无法弄清楚如何在 vagrant 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:53:17.183

首先，确保您使用最新版本的 Apache 食谱

二、写新cookbook时，在metadata.rb中声明对apache2 cookbook的依赖

```
depends "apache2" 
```

第三，在你的食谱中使用如下内容：

包括配方“apache2”

```
web_app "testrail" do
    server_name "myproject.com"
    server_aliases ["myproject.com"]
    docroot "/var/www/customroot"
    cookbook "apache2"
end 
```

# mysql - 选择与外国 id 匹配的两行？

> ID：13432142
> 
> 赞同：1
> 
> 时间：2012-11-17T15:50:20.467
> 
> 标签：mysql, sql

我试图获取属于两种类型（类别）的所有电影名称，

即架构

```
movie_id  genre
4         Action
4         Comedy 
```

SQL：

```
SELECT movies.movie_name
FROM movies
INNER JOIN tags
ON movies.movie_id = tags.movie_id
WHERE tags.genre = 'Comedy'
AND tags.genre = 'Action' 
```

这应该让我回到movie_id 4的movie_name。

这让我回到零结果，当我知道使用我的测试数据应该是三个结果时，我是否做错了查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:51:46.907

```
SELECT movies.movie_name
FROM movies
INNER JOIN tags
ON movies.movie_id = tags.movie_id
WHERE tags.genre IN ('Comedy','Action')
GROUP BY movies.movie_name
HAVING COUNT(*) = 2 
```

如果没有为每部电影的流派指定唯一约束，那么您需要添加`DISTINCT`

```
SELECT movies.movie_name
FROM movies
INNER JOIN tags
ON movies.movie_id = tags.movie_id
WHERE tags.genre IN ('Comedy','Action')
GROUP BY movies.movie_name
HAVING COUNT(DISTINCT tags.genre) = 2 
```

*   [SQLFiddle Demo（*示例数据不同但仍然有相同的想法*）](http://sqlfiddle.com/#!2/960fd/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:52:22.820

`Tags.genre`不能同时是“喜剧”和“动作**”**。您需要`IN`这样的子句：

`SELECT fields FROM tables WHERE tags.genre IN ('Comedy', 'Action')

# python - 脚本在 IDLE 中有效，但在 cmd 中无效 - 编解码器错误

> ID：13432147
> 
> 赞同：1
> 
> 时间：2012-11-17T15:50:49.450
> 
> 标签：python, cmd, scheduler, python-idle

我有一个可以在 IDLE 中运行的脚本，但当我在 cmd 中运行相同的脚本时却不行。然后我得到这个错误：

```
File "C:\Python27\lib\encodings\cp850.py", line 12, in encode
return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode character u'\u2013' in position 17: character maps 
to <undefined> 
```

当我尝试打印包含以下部分“ - ”的字符串时发生错误。当脚本在 IDLE 中运行时，一切正常。我在 Windows 7 上使用 Python 2.7，我想使用 Windows 调度程序来调度脚本，据我所知，脚本然后在 cmd 中执行。两个问题：

1.  为什么我会根据脚本的执行位置以及我需要做什么来修复它而得到不同的结果？
2.  是否可以启动“Python（命令行）”以从 Windows 调度程序运行脚本作为解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:02:15.290

Python（和大多数其他语言）中的 I/O 是基于字节的。当您将字节字符串（2.x 中的 str，3.x 中的字节）写入文件时，字节只是按原样写入。将 Unicode 字符串（2.x 中的 unicode，3.x 中的 str）写入文件时，需要将数据编码为字节序列。要查看更多说明，请参阅[Dive into Python 3 字符串章节](http://getpython3.com/diveintopython3/strings.html)。尝试使用 unicode 字符串：

例如：

```
>>> print(u'\u2013')
– 
```

然而：

```
>>> print("\u2013")
\u2013 
```

# c# - 设计模式：抽象工厂和通用存储库

> ID：13432149
> 
> 赞同：3
> 
> 时间：2012-11-17T15:51:12.423
> 
> 标签：c#, design-patterns, domain-driven-design, repository-pattern, abstract-factory

这是我对域模型和通用存储库的设计

```
public interface IEntity 
{
     long Id { get; }
}

public interface IRepository<T> where T : class, IEntity, new()
{
     void Save(T entity);
     void Delete(long id);
     T Get(long id);
     IEnumerable<T> GetAll();
}

public interface IUserRepository : IRepository<User> 
{
     User Login(string username, string password);
}

public class User : IEntity
{
     // Implementation of User
}

public abstract class BaseRepository<T> : IRepository<T> where T : class, IEntity, new()
{
      // Implementation of IRepository
}

public class UserRepository : BaseRepository<User>, IUserRepository
{
      // Implementation of IUserRepository
      // Override BaseRepository if required
} 
```

当我想实例化一个存储库实例时，我使用一个实现以下接口的工厂

```
public interface IRepositoryFactory
{
     R CreateRepository<R, T>()
          where R : IRepository<T>
          where T : class, IEntity, new();
} 
```

并使用工厂对象如下

```
1\. IRepositoryFactory factory = CreateFactory();
2\. IUserRepository repository = factory.CreateRepository<IUserRepository, User>();
3\. User user = repository.Login("user", "1234"); 
```

我的问题在第二行。我想用我的工厂就好了。

```
// Without specifying the User type parameter
factory.CreateRepository<IUserRepository>() 
```

由于我的 IRepository 接口对实体类型有约束，我的工厂使用相同的约束来满足 IRepository 要求。

有没有办法将此参数与客户端隔离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:41:47.957

我同意其他人的观点，您将从查看 Ninject 之类的 DI/IoC 框架中受益。

所以这个答案并不是不遵循其他建议的建议。但是，仍然有一些方法可以在较低的级别上解决您的问题。这段代码没有经过很好的测试，但你可以这样做：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using NUnit.Framework;

namespace TestConsole1
{
  public interface IEntity
  {
    long Id { get; }
  }

  public interface IRepository<T> where T : class, IEntity, new()
  {
    void Save(T entity);
    void Delete(long id);
    T Get(long id);
    IEnumerable<T> GetAll();
  }

  public interface IUserRepository : IRepository<User>
  {
    User Login(string username, string password);
  }

  public class User : IEntity
  {

    // Implementation of User
    public long Id
    {
      get { return 42; }
    }
  }

  public abstract class BaseRepository<T> : IRepository<T> where T : class, IEntity, new()
  {
    // Implementation of IRepository
    public void Save(T entity)
    {
      throw new NotImplementedException();
    }

    public void Delete(long id)
    {
      throw new NotImplementedException();
    }

    public T Get(long id)
    {
      throw new NotImplementedException();
    }

    public IEnumerable<T> GetAll()
    {
      throw new NotImplementedException();
    }
  }

  public class UserRepository : BaseRepository<User>, IUserRepository
  {
    // Implementation of IUserRepository
    // Override BaseRepository if required
    public User Login(string username, string password)
    {
      return new User();
    }
  }

  class Factory 
  {
    public T CreateRepository<T>() where T : class 
    {
      //TODO: Implement some caching to avoid overhead of repeated reflection
      var abstractType = typeof(T);
      var types = AppDomain.CurrentDomain.GetAssemblies().ToList()
          .SelectMany(s => s.GetTypes())
          .Where(p => p.IsClass && 
                      !p.IsAbstract && 
                      abstractType.IsAssignableFrom(p));

      var concreteType = types.FirstOrDefault();
      if (concreteType == null)
        throw new InvalidOperationException(String.Format("No implementation of {0} was found", abstractType));

      return Activator.CreateInstance(concreteType) as T;
    }
  }

  class Program
  {
    static void Main(string[] args)
    {
      var factory = new Factory();
      var userRepo = factory.CreateRepository<IUserRepository>();
      Console.WriteLine(userRepo.GetType());
      User user = userRepo.Login("name", "pwd");
      Console.WriteLine(user.Id);
      Console.ReadKey();
    }
  }
} 
```

正如这段代码所揭示的，一个中心点是您需要处理接口和具体类之间的耦合，例如 IUserRepository 和 UserRepository 之间的耦合。如果您不通过映射器或类似方式直接处理此关系，您可以实现一种更自动的方式，如代码中所示的方式。

但是，如果您使用[Ninject](http://www.ninject.org/)之类的东西来代替您处理这个问题，这将是您更好的时间投资，因为您很可能会发现您的工厂类的复杂性会随着时间的推移而显着增加。

兄弟。莫腾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:28:55.087

您的代码存在 3 个问题：

首先是`IEntity`。拥有单一类型的 ID 是违反 DDD 的，因为在 DDD 中，对象的身份由域给出，它可以是从字符串、int、guid 到复杂类型的任何东西。

其次是带有 的通用存储库`IRepository`，这同样非常无用，因为您很少会通过此接口，并且大多数情况下会通过具体实体的存储库接口。

第三件事是，在 DDD 存储库中应该只存在于聚合根，这不会反映在您的设计中。

如果你解决了这个问题，你会发现，特定实体的存储库接口的实现可以很容易地由 DI 框架提供。

# javascript - 根据上次访问的网站重定向

> ID：13432151
> 
> 赞同：1
> 
> 时间：2012-11-17T15:51:30.353
> 
> 标签：javascript, redirect

目前我正在尝试制作一个基于用户上次访问的网站的新脚本。如果最后访问的网站是 x，那么它需要重定向到另一个页面。

**示例：** 用户点击我的 Facebook 粉丝页面上的链接并登陆主页。Javascript 现在需要采取行动并将用户重定向到另一个页面。但前提是用户来自 http://facebook.com/[fanpage]

是否可以在**Javascript 中创建类似的东西？**

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:53:58.760

你可以这样使用`document.referrer`：

```
if ('http://facebook.com/[fanpage]' == document.referrer) {
    location.href = 'new_destination.html';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:53:07.473

如果 Facebook 不做某种引荐来源阻止，则使用`document.referrer`获取引荐页面。

（听起来这可能在服务器端完成得更好，但在这种情况下，您将使用`Referer`[sic] 标头。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T15:54:57.727

我不会依赖浏览器发送的推荐人。它们可以被关闭。

为什么不在 URL 中传递一个特殊参数？

[http://www.example.com/?fromFb=1](http://www.example.com/?fromFb=1)

# php - 我怎样才能从头开始上传我的joomla，同时保持一切到位

> ID：13432155
> 
> 赞同：1
> 
> 时间：2012-11-17T15:52:00.737
> 
> 标签：php, joomla, installation, backup, virus

我的 Joomla 网站感染了一些病毒，我设法将其取出，但我担心攻击者可能在我的服务器中留下了后门。我愿意从我的站点中取出所有内容并重新安装所有内容。有什么方法可以让我快速做到吗？如何保存数据库和配置？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:29:57.003

Joomla Docs 有一个相当不错的逐步检查清单，用于从黑客中恢复：http: [//docs.joomla.org/Security_Checklist/You_have_been_hacked_or_defaced](http://docs.joomla.org/Security_Checklist/You_have_been_hacked_or_defaced)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:55:04.623

要备份数据库，请进入 phpMyAdmin，选择您的 Joomla 站点正在运行的数据库，然后会有一个“导出”按钮。单击它，突出显示所有表格并下载它。

至于配置文件，您可以从 FTP 中的 Joomla 站点的根目录中获取它。该文件名为**configuration.php**

您可以做什么，使用控制面板中的备份管理器（如果有）进行完整站点备份，或者将所有内容压缩到 FTP 并下载。完成后，将 zip 解压缩到新创建的文件夹中，并使用最新的、不错的防病毒软件进行扫描。如果您没有，请下载 AVG Internet security 2013 试用版。

# c# - 从 Windows 8 应用程序打开图片库（c#）

> ID：13432163
> 
> 赞同：1
> 
> 时间：2012-11-17T15:52:51.623
> 
> 标签：c#, xaml, windows-8, winrt-xaml

我有一个应用程序将图像存储在图片库的子文件夹中。保存图片时，会弹出一个 toast 通知，提醒用户文件已成功保存。但是，我希望该 toast 通知是可点击的，并且当点击时我希望它打开图片库以查看所有保存的文件。

如何从 RT 应用程序启动资源管理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:16:34.607

Due to the sandboxing you are not allowed to do that (launch the explorer form the windows store app), the only way you could access would be by using the filepicker, and setting the display mode to thumbnails. Set folder location, viewmode and typefilter. As long as the user selects, you dont need to set this as a capability.

Filepicker: [http://msdn.microsoft.com/en-us/library/windows/apps/hh465199.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465199.aspx)

Similar question: [Launch Windows Explorer from Metro style app](https://stackoverflow.com/questions/13320326/launch-windows-explorer-from-metro-style-app)

General guidlines for thumbnails: [http://msdn.microsoft.com/en-us/library/windows/apps/hh465350.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465350.aspx)

# javascript - 解析没有第三方的foursquare json

> ID：13432165
> 
> 赞同：0
> 
> 时间：2012-11-17T15:52:59.633
> 
> 标签：javascript, json, parsing, foursquare, getjson

我在一个网络应用程序中使用foursquare API，我调用了foursquare，结果已经死了，但我无法以我想要的方式解析它。我不想使用 3rd 方解析器，因为那些让我彻底困惑。我希望应用程序按距离提醒可点击的场地名称列表，并在点击时将变量分配给该场地的 lat 和 lng。

```
$(document).ready(function(){
 $.getJSON("https://api.foursquare.com/v2/venues/search?ll=-27.58818,-48.523248&   
   client_id=9&client_secret=9&v=20111107",
    function(data){
//code here
      });
    }); 
```

结果如下所示：

```
 {"meta":
  {"code":200},
 "response":
 {"venues":
 [{"id":"4c158143a1010f47a1364e18",
"name":"Parma Pizza",
 "contact":{"phone":"+554832346363","formattedPhone":"+55 48 3234-6363"},
"location":{"address":"R. Lauro Linhares, 1052",
"lat":-27.588341,
"lng":48.5232834,
 "distance":18, 
```

到目前为止，我尝试了失败的第 3 方杰克逊，以失败警告名称，以失败警告 document.write，以及某种类型的 .$each 移除器也失败了。请帮助我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:16:11.933

jQuery 已经在解析你的 JSON 文件了`$.getJSON`。除非您使用的是旧浏览器，否则您不需要 3rd 方 JSON 解析库。（尽管您应该在代码库中包含[JSON3.js](https://github.com/bestiejs/json3)，以防万一有人尝试使用您的网站是在旧浏览器中。只需包含它即可。除此之外，您无需执行任何其他操作。）

传递给回调函数的`data`变量是一个 JavaScript 对象。然后，您可以`data.meta.code`获取`code`(200) 的值，或者`data.response[0].name`返回`Parma Pizza`。

至于生成你的列表，你将不得不做艰苦的工作。不过，您可以使用`$.each`它轻松地迭代这些地方：

```
$.getJSON("https://api.foursquare.com/v2/venues/search?ll=-27.58818,-48.523248&client_id=9&client_secret=9&v=20111107", function(data){
    $.each(data.response, function(index, elm){
        console.log(elm.name);
    });
}); 
```

将打印出从您的查询返回的所有场地名称的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-16T13:24:08.610

@蔚蓝

我认为您可以通过在 tkone的代码中添加**.venues来修复它。**至少这对我有用。

```
$.getJSON("https://api.foursquare.com/v2/venues/search?ll=-27.58818,-48.523248&client_id=9&client_secret=9&v=20111107", function(data){
$.each(data.response.venues, function(index, elm){
    console.log(elm.name);
}); 
```

很抱歉没有评论 tkone 的答案，但我没有足够的声誉来评论：/奇怪的系统....

# c++ - 一个专门的模板类可以继承另一个专门的模板类吗？

> ID：13432168
> 
> 赞同：2
> 
> 时间：2012-11-17T15:53:08.060
> 
> 标签：c++

我首先定义

```
class Hash
{

}; 
```

然后是哈希的专业化。

```
template <class T>
class Hash<int, T>
{
public:
    Hash(int slotN = 11);

    bool insert(int key, T val);
    bool remove(int key);
    bool contains(int key);
    bool query(int key, T& val) ;

protected:
    // Basic Variables of the Hash Model.
    list<int>* slot;
    list<T>* slotVal;
    int slotN;
}; 
```

我想使用这个专门版本的 Hash 来实现另一个专门化：字符串值键的哈希。

```
template <class T>
class Hash<string, T> : public Hash<int, T>
{
public:
    Hash(int slotN);

    bool insert(string key, T val);
    bool remove(string key);
    bool contains(string key);
    bool query(string key, T& val) ;

private:

    // Calculate the String's Hash Key.
    int str2key( string key);
}; 
```

但似乎我无法访问类 Hash 中的字段。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:03:36.800

当您说“我无法访问类 Hash 中的字段”时，我猜您的意思是，当您使用`Hash<string, T>`（对于某些类型`T`）时，您无法从`Hash<int, T>`. 这样做的原因是名称隐藏：当您在派生类中重载成员函数时，基类中具有相同名称的所有成员都将被隐藏，除非您使它们显式可用。这样做的方法是`using`声明：

```
template <class T>
class Hash<string, T> : public Hash<int, T>
{
public:
    Hash(int slotN);

    using Hash<int, T>::insert;
    using Hash<int, T>::remove;
    using Hash<int, T>::contains;
    using Hash<int, T>::query;

    bool insert(string key, T val);
    bool remove(string key);
    bool contains(string key);
    bool query(string key, T& val) ;

private:

    // Calculate the String's Hash Key.
    int str2key( string key);
}; 
```

如果您只需要从派生类的实现中访问基类成员，您还可以使用带有类名的限定来访问名称。例如：

```
template <typename T>
bool Hash<string, T>::insert(string key, T val) {
    return this->Hash<int, T>::insert(this->str2key(key, val);
} 
```

稍微考虑一下这个问题，还有另一个潜在的问题：如果您访问基类中的数据成员，您需要确保编译器将名称视为依赖名称。否则，它会在第一阶段查找并且不会在基础中查找名称，因为只能在第二阶段找到：

```
template <typename T>
bool Hash<string, T>::insert(string key, T val) {
    int n0 = slotN; // doesn't work: looked up in phase 1
    int n1 = this->slotN; // OK: name is dependent
    int n2 = Hash<int, T>::slotN; // OK, too
} 
```

就个人而言，我不会公开从具有不同密钥的类派生，但我认为你有你的理由。顺便说一句，我假设您的主要声明`Hash`看起来像这样，尽管这对问题无关紧要，真的：

```
template <typename K, typename T>
class Hash; 
```

（如果它没有任何成员，我也不想定义它）。

# javascript - 如何在 IE 9 的 js 中设置 Cookie？

> ID：13432172
> 
> 赞同：0
> 
> 时间：2012-11-17T15:53:30.210
> 
> 标签：javascript, cookies, internet-explorer-9

我有这个代码：

```
<input type='button' onclick='window.setCookie("userId", 123); alert(window.getCookie("userId"))' value='dsa'></input>

var    userId = 999;
window.setCookie = function(c_name, value)
    {
      exdays = 30;
      var exdate=new Date();
      exdate.setDate(exdate.getDate() + exdays);
      var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
      document.cookie=c_name + "=" + c_value;
    }

window.getCookie = function(c_name)
    {
      var i,x,y,ARRcookies=document.cookie.split(";");
      for (i=0;i<ARRcookies.length;i++)
      {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name)
          {
          return unescape(y);
          }
        }
    } 
```

[http://jsfiddle.net/aucja/](http://jsfiddle.net/aucja/)

这在 IE 中不起作用

如何解决？

# database - 打开提示输入密码的旧 .rpt？

> ID：13432178
> 
> 赞同：2
> 
> 时间：2012-11-17T15:54:09.217
> 
> 标签：database, crystal-reports

我是一名医疗保健提供者，我正在更改保险理赔的账单，并已向之前的账单请求了一份现有数据的副本。之前的账单向我提供了一个 .rpt，它是由 EDI Healthclaims Network 的名为 EDI Claims V64.1 的程序创建的（程序过时，公司倒闭）。

该文件是旧版本的 Crystal Reports，当前的 SAP 阅读器无法正常工作。我终于找到了一个试图打开文件的报告阅读器，但随后被提示输入用户名“admin”的密码。以前的帐单员没有密码，并且不确定为什么在尝试查看报告时要求输入密码。她还声称无法使用她的程序以其他格式（excel、CSV、XML 等）导出报告。（我对这个说法持怀疑态度，但还没有看到程序和检查。）她现在说她必须打印出 250 页的报告并给我一份硬拷贝（当然是向我收费），但是一份硬拷贝不是很有帮助。

我不是技术员，但也不是程序员或数据库专家。我在我的业务工作中也是新手，我用于 IT 帮助的人无法帮助解决这个非常重要的问题。如果有人对如何访问数据有任何指导或指导，或者有人指示我付费帮助解决这种情况，我将不胜感激。先感谢您。帕特里克

# c# - 我正在使用 Rejex 而不是在 C# 中复制的 Pattern。但我无法在 Rejex 中获取方法 matcher() matches() 的副本

> ID：13432180
> 
> 赞同：-4
> 
> 时间：2012-11-17T15:54:41.633
> 
> 标签：c#, regex

在 C# 和 Java 中编写正则表达式是否存在语法差异？

如何在 c# 中具有以下代码的等价性

```
Pattern.matcher(word).matches(); 
```

我在哪里`"\\.|[!?]+"`

C#中没有`Pattern`类。

我正在使用 Rejex 而不是在 C# 中复制的 Pattern。但我无法在 Rejex 中获取方法 matcher() matches() 的副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:05:21.953

鉴于几乎每个正则表达式实现都有差异，我希望 .NET 和 Java 正则表达式是不同的。您可以查看他们的文档（对于 .NET，请参见[此处](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)）。

一个更好的来源是 Friedl 的*Mastering Regular Expressions*，它详细介绍了不同的正则表达式引擎（包括 Java 和 .NET 的不同）。

要匹配 .NET 中的正则表达式，请使用[`Regex`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)该类。例如。：

```
Match results = myRegex.Match(myString); 
```

其中的实例[`Match`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)包括单个（如上）或多个（使用方法[`Matches`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx)）匹配和任何捕获的所有详细信息。或者它的属性[`Success`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.group.success.aspx)当然是假的。

* * *

如果`rejex`您的意思是[*Rejex 是 JavaScript 正则表达式编辑器*](http://rejex.heroku.com/)，那么它将使用 JavaSript 正则表达式引擎；这又是不同的。

# javascript - reCAPTCHA 显示不正确？

> ID：13432181
> 
> 赞同：1
> 
> 时间：2012-11-17T15:54:54.997
> 
> 标签：javascript, html, firebug, recaptcha, osclass

我已经在我的 osclass.org 站点中启用了 reCAPTCHA。

图片不在验证码中。代码有什么问题？我已经用 firebug 对其进行了测试 - 但我没有发现错误。

有人可以给我一个提示吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:05:15.457

好的 - 我发现了错误：osclass.org 在这个网站上放了一个自定义的 recaptcha。我试过用白色的recaptcha。两者同时...

# c# - 将用户添加到角色失败

> ID：13432182
> 
> 赞同：0
> 
> 时间：2012-11-17T15:54:55.153
> 
> 标签：c#, asp.net, .net, asp.net-membership, asp.net-roles

我已经在网站上工作了一段时间了。我正在使用正常工作的成员资格、角色和个人资料提供者。

我有一个标准的 createuserwizard 控件，用户可以在其中注册。当用户注册时，我想将他添加到某个角色，如下所示：

```
Roles.AddUserToRole(Profile.UserName, "Member"); 
```

我通过 userCreated 事件触发器来做到这一点。

还有一个管理页面，管理员应该能够更改用户的角色，我这样做是这样的：

```
DropdownList ddl = ((DropDownList)sender);
String usr = ddl.enter code here
if (Roles.IsUserInRole(usr, "Member")) {
    Roles.RemoveUserFromRole(usr, "Member");
}
if (Roles.IsUserInRole(usr, "Visitor")) {
...

switch (ddl.selectedIndex)
  case 0:
    Roles.AddUserToRole(usr, "Admin");
  case 1:
    ... 
```

这也不起作用。如果我转到数据库本身，则不会将用户添加到 aspnet_UserInRoles。

额外细节：当我创建一个用户时，他可以看到管理页面，这不是有意的。安全调整工作正常，当我手动将用户添加到 aspnet_UsersInRoles 表时，我无法再按预期访问成员页面。新创建的用户没有添加到任何角色，尽管他可以看到他不应该看到的所有页面。这把我吓坏了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:11:38.047

好的，我修复了注册后不会分配角色的问题。您可能认为 userCreated 在用户登录后被调用，但事实并非如此。Profile.UserName 结果为空字符串！

我仍然遇到管理页面的问题......我从下拉列表的工具提示中获取用户名值。通过将鼠标悬停在 ddl 上，我可以直观地验证用户名确实在 tooltip 属性中。

Assuming that the same problem exists here -> the usr (username) string is empty. Why can't I get the value?

# .net - 在面板 vb.net 中读取像素颜色

> ID：13432184
> 
> 赞同：3
> 
> 时间：2012-11-17T15:55:00.723
> 
> 标签：.net, vb.net, bitmap, panel

我对 VS 2010 还很陌生，所以请提供合适的代码/解释/链接。

如图所示，我有一个表格中的面板`sked_panel`，其中填充有彩色块。我想找出面板中红色、蓝色、绿色和橙色的百分比。

到目前为止我考虑过的选项：

*   使用 for 循环读取面板并使用函数读取每个像素。我可以自己做。
*   将面板保存为位图，然后使用类似的功能。

第一个选项对我来说更可取（并且可能计算密集度较低）。

外观如下`sked_panel`：

![在此处输入图像描述](../Images/6dfceee7abdad765245877a25996f586.png)

# android - 从首选项中获取字符串

> ID：13432186
> 
> 赞同：0
> 
> 时间：2012-11-17T15:55:10.700
> 
> 标签：android, android-edittext, android-preferences

我的首选项中有 EditText，我的布局中也有 EditText。所以我想从 Preferences 中获取字符串，并在单击按钮时将其用于 EditText。所以我尝试这样：

```
public class MainActivity extends Activity{

     SharedPreferences sharedPreferences;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        sharedPreferences = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext());
}
//OnClick method
public void Button(View view) {
EditText et1 = (EditText) findViewById(R.id.edittext);
            String string = sharedPreferences
                    .getString("ime", "default");
            et1.setText(String.valueOf(string));
} 
```

和我的偏好 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <EditTextPreference android:title="Uredi Text"
        android:key="ime"
        android:summary="ime pjesme"

        />

</PreferenceScreen> 
```

并且每次当我单击按钮 EditText 文本变为“默认”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:24:34.307

不要`getBaseContext()`直接使用 - 使用“本地上下文”，在您的情况下是 Activity （因为[activty 扩展了 Context](http://developer.android.com/reference/android/app/Activity.html)）。因此，在您的示例代码中，将其替换为`this`：

```
 sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences( this ); 
```

# javascript - 用于事件处理的 Javascript 对象方法的立即绑定

> ID：13432190
> 
> 赞同：1
> 
> 时间：2012-11-17T15:56:20.383
> 
> 标签：javascript, dom-events

我想使用事件处理函数作为 Javascript 对象的一部分。我想将事件处理程序中的“this”绑定到它是一种方法的对象，因为事件处理程序中的“this”通常会自动分配给事件发生的对象。

这可以通过对发生绑定的对象使用 init 函数来完成（[jsfiddle 用于 tryout](http://jsfiddle.net/Dcerr/1/ "小提琴试用")）：

```
var myObject = {
    init:function(){
        this.downHandler = this.downHandler.bind(this);
    },
    downHandler:function(){
        alert(this.someInfo);
    },
    someInfo:"hi there"
}      
myObject.init(); 
```

我想避免这种情况：在其他地方重新定义它会降低代码的可维护性。所以我正在寻找一种解决方案，将绑定过程保持在方法本身。

我已经尝试过立即执行函数，但是在立即执行时，“this”指向“window”对象（假设浏览器上下文）。我的试验看起来像这样：

```
var myObject = {
//more code
    downHandler:(function(){
        alert(this.someInfo);
    }).bind(this), //does not work since at the point of immediate execution, the this is assigned to window
//more code
} 
```

您能想出一种将绑定保留在事件处理函数而不是单独的初始化函数中的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:19:29.273

既然您已经加载了 jQuery，请使用[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy/)

```
var myObject = {
    downHandler: $.proxy(function(){
       alert(this.someInfo);
    }, this)
}; 
```

如果你已经安装了[下划线](http://underscorejs.org)（我更喜欢这样的东西），使用`_.bind`

```
var myObject = {
    downHandler: _.bind(function(){
       alert(this.someInfo);
    }, this
}; 
```

MooTools 可能也有类似的东西——我从来没有考虑过使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:21:08.997

```
var myObject = {
    clickHandler: function() {
        alert(myObject.someInfo); 
        //returns undefined without execution of init-function
        //returns "hi there" if init ran. 
    },
    someInfo: "hi there"
}

$('#clickMe').on('click', myObject.clickHandler); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:50:36.353

在警报期间使用对象名称“myObject”而不是“this”。

```
var myObject = {
    downHandler:(function(){
        alert(myObject.someInfo);
    }).bind(this), 
  //when 'this' use it alert undefined
  //when 'myObject' use it alert "hi there"
   someInfo:"hi there" 
} 
```

我希望这能帮到您。

# php - Windows 8 上的 Apache/PHP

> ID：13432192
> 
> 赞同：4
> 
> 时间：2012-11-17T15:56:26.043
> 
> 标签：php, apache, windows-8

我在 Windows 8 上使用 Apache/PHP 时遇到问题。我之前一直在 XP（以及 MySQL）上使用它们，没有任何问题。我从未使用过 Windows 7。

Apache 安装没有问题。一切正常，包括我所有的虚拟服务器。PHP 安装成功，安装将条目放入 httpd.conf 中而不会出现错误。但是，当我在安装 PHP 后尝试加载 Apache 时，Apache 不会加载。

当 PHP 条目包含在 httpd.conf 中时，Apache 返回的错误让我感到困惑：

```
Syntax error on line 1029 of C:/Program Files/Apache Group/Apache2/conf/httpd.conf:
Cannot load C:/Program Files/PHP/php5apache2_2.dll into server: The specified module could not be found. 
```

这些行是：

```
#BEGIN PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL
PHPIniDir "C:\Program Files\PHP\"
LoadModule php5_module "C:\Program Files\PHP\php5apache2_2.dll"
#END PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL 
```

（第 1029 行是 LoadModule 行）。dll 的位置绝对正确。该行的语法由 PHP 插入。我已经将语法与我拥有的以前版本的 httpd.conf 进行了比较，它看起来是正确的。我认为语法错误是一个红鲱鱼。

我努力了：

*   在 dll 位置将反斜杠切换为斜杠。
*   将 PHP 添加到路径中。
*   在两个序列中安装 Apache 和 PHP。
*   检查 PHP 文件夹和各个文件的权限以确保 SYSTEM 已读取/执行。

注释掉 PHP 行和 Apache 加载正常。如果我注释掉 LoadModule 行并离开 PHPIniDir 行，它仍然会失败。Apache 似乎表现得好像它看不到 PHP 目录，但我不知道为什么。

Windows 事件日志中没有任何内容。最新版本的 PHP 和 Apache。我有点不知所措，下一步该尝试什么。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T11:09:18.617

从此链接下载并按照说明进行操作：http: [//www.apachelounge.com/download/](http://www.apachelounge.com/download/)

最新下载 (2.4) 适用于 Windows 8 和 Server 2012。

我在 Windows 8 上下载并测试了以下内容：每个 zip 都有一个带有说明的 readme.txt 或 install.txt。

*   阿帕奇 2.4 [http://www.apachelounge.com/download/win32/binaries/httpd-2.4.3-win32.zip](http://www.apachelounge.com/download/win32/binaries/httpd-2.4.3-win32.zip)

*   PHP 5.4.8 [http://windows.php.net/downloads/releases/php-5.4.8-Win32-VC9-x86.zip](http://windows.php.net/downloads/releases/php-5.4.8-Win32-VC9-x86.zip)

*   Apache 的 PHP 5.4.8 处理程序 [http://www.apachelounge.com/download/win32/modules-2.4/php5apache2_4.dll-php-5.4-win32.zip](http://www.apachelounge.com/download/win32/modules-2.4/php5apache2_4.dll-php-5.4-win32.zip)

我添加/修改的 httpd.conf 行是：

```
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule php5_module "C:/Apache24/php-5.4.8/php5apache2_4.dll"
LoadFile "C:/Apache24/php-5.4.8/php5ts.dll"
PHPIniDir "C:/Apache24/php-5.4.8"
<IfModule php5_module>
  <Location />
    AddType text/html .php
    AddHandler application/x-httpd-php .php
    #AddHandler application/x-httpd-php-source .phps
  </Location>
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T12:50:18.790

它在与 ApacheLounge 的 dll 一起打包的 Readme.txt 文件中提到，但在下载页面或文件名中的其他任何地方都没有提到（与所有其他版本一样）：

“使用 PHP 5.4 线程安全 (TS) 运行，并且仅使用 Apache 2.4 Win32 VC9 或 VC10”

这些dll仅适用于TS版本，所以如果你下载了另一个，你基本上就完蛋了。TS php 二进制文件为我修复了它。

总帐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:02:57.660

假设这是您的开发环境，而不是部署环境，您为什么不直接从[apache 朋友那里下载](http://www.apachefriends.org/en/xampp-windows.html)**xampp**呢？它应该是预先配置的，无论如何您都将在其他设置中进行部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T23:49:51.480

在 Win 8 上重新安装 Apache 和 PHP 时，我遇到了类似的问题（不过我是更多的 Linux 用户）。与原始帖子类似，无论我在 httpd.conf 和 php.ini 中尝试做什么，Apache 要么没有启动，要么没有看到 PHP。在花费了不合理的时间之后，我决定下载**PHP 5.3 (5.3.27)-VC9 x86 Thread Safe (2013-Jul-10 21:56:58) Installer [45.86MB]**而不是我以前一直在使用。.msi 安装程序有所不同。线程安全版本的版本实际上包含所需的文件，如果您按照安装程序提示操作，它实际上会询问您是否应该将 php 安装“链接”到 Apache 服务器。然后，您只需提供 hhtpd.conf 目录，一切正常。这就是我的 2c :)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-25T06:23:53.100

我认为问题出在空白的“程序文件”中。

# html - 内部 div 没有得到父 div 高度

> ID：13432194
> 
> 赞同：1
> 
> 时间：2012-11-17T15:56:31.903
> 
> 标签：html, css, css-float

我有一个带有一些内部 div 的外部 div，如下所示：

HTML：

```
<div class="clearfix bigBox">
   <div class="bigBoxBody">
      <div class="containerWithHeaderContent">
      </div>
   </div>
</div> 
```

CSS：

```
#content .bigBox {
    padding-bottom: 9px;
    width: 100%;
}
#content .containerWithHeader, .containerWithHeaderContent {
    padding: 10px 0;
    width: 100%;
}

.clearfix:after {
    clear: both;
    content: " ";
    display: block;
    font-size: 0;
    height: 0;
    line-height: 0;
    visibility: hidden;
    width: 0;
} 
```

我的问题是内部 div ( `bigBoxBody`) 的高度似乎与外部 div ( `bigBox`) 的高度不一致。

截屏：

（外部 div 为红色，内部 div 为绿色。） ![在此处输入图像描述](../Images/9da46dc6015abcefece8f3a9ada5ab90.png)

我不确定这有什么问题，或者是否还有其他需要使用 CSS 处理的事情。

jsFiddle：http: [//jsfiddle.net/UFFx3/2/](http://jsfiddle.net/UFFx3/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:06:42.783

div 不会自然地占据它们可用的全部垂直空间。有关示例，请参[见此 jsfiddle](http://jsfiddle.net/tCNDq/4/)。外层 div 的显式高度为 100 像素，而内层 div 完全没有指定高度。因此，内部 div 只占用显示其内容所需的空间。

**HTML：**

```
<div class="outer">
   <div class="inner">
       <p>Content here!</p>       
   </div>
</div>​ 
```

**CSS：**

```
.outer {
    background: red;
    height: 100px;
}
.inner {
    background: green;
} 
```

​ 如果希望内部 div 占用所有可用的垂直空间，请`height:100%`在 CSS 中设置。有关示例，请参[见此 jsfiddle](http://jsfiddle.net/tCNDq/5/)。

**新的 CSS：**

```
.outer {
    background: red;
    height: 100px;
}
.inner {
    background: green;
    height: 100%; /* new line */
} 
```

我不确定您的问题是否有更多细节，因为您使用的`clearfix`是示例中未显示的 CSS 类。如果您还缺少其他东西来解决您的问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T07:52:57.513

在您的情况下（从屏幕截图中），内部 div 似乎没有扩展到其中的内容。因此，它不是让内部 div 扩展到外部 div 的高度，而是让内部 div 接受扩展到其中的内容。

因此，我建议您尝试将内部 div 设置为包含`overflow:auto`并删除外部 div 的高度约束，以允许高度无限增长，如下所示

```
.outer {
    background: red;
}
.inner {
    background: green;
    overflow : auto;
} 
```

# html - Rails 嵌套的 html 助手

> ID：13432197
> 
> 赞同：0
> 
> 时间：2012-11-17T15:57:00.390
> 
> 标签：html, ruby-on-rails, ruby, helpers

我在我的 rails 应用程序中创建了一个帮助程序，我在其中创建了一个导航链接。现在我想在这个链接上添加一个插入符号，这样我就可以在最后得到一个漂亮的箭头。

我的 html 应该是这样的：

```
<li class='dropdown'>
   <a class='dropdown-toggle' data-toggle='dropdown' href='#'
       Dropdown
       <b class='caret'></b>
   </a> 
```

现在我的助手设置如下：

```
 content_tag(:li, class: 'active dropdown') do
    link_to( text, link, class: 'dropdown-toggle' ) do
      content_tag(:b, class: 'caret')
    end
  end 
```

但是当我这样做时，我收到了这个错误信息：

```
undefined method `stringify_keys' for "/":String 
```

我还想在下拉列表中添加一些项目，所以我需要再嵌套一些，但我不知道怎么做。有没有人可以帮助我并指出正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:05:43.950

您正在传递一个块，`link_to`因此您不应将其传递给链接文本，如[docs](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)所示。尝试这个：

```
content_tag(:li, class: 'active dropdown') do
  link_to(link, class: 'dropdown-toggle' ) do
    "#{text}#{content_tag(:b, "", class: 'caret')}".html_safe
  end
end 
```

# android - 可以在 UI 线程上执行 DB 操作吗？

> ID：13432198
> 
> 赞同：2
> 
> 时间：2012-11-17T15:57:01.783
> 
> 标签：android, sqlite

我正在使用数据库来保存搜索表单的状态。我正在使用 onPause 方法来持久化数据并使用 onResume 方法来恢复它。我的观点是恢复和持久化状态应该是一个阻塞操作，所以我打算在 UI 线程上执行数据库操作。我知道这通常是不鼓励的，但操作应该很快，我认为如果它们是异步完成的，它们可能会导致不一致的 UI 行为。

任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:56:56.383

即使您希望应用程序在执行慢速操作时不接受用户输入，您仍然不想在 UI 线程中执行它们。这有两个原因：

1.  完全无响应的 UI 是一个很大的问题。如果您需要阻止您的用户与程序交互，您需要向他保证某些事情实际上正在发生 - 任何其他事情都可能被解释为您的应用程序有错误。在应用程序运行时，酌情使用对话框、toast 和/或进度条。
2.  Android 将为用户提供强制关闭它认为挂起的应用程序的选项。您不希望在您的应用程序发生正常行为期间发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:46:51.570

即使您希望它是一个阻塞操作，您也必须向用户显示某些事情正在发生。因为当UI线程被阻塞时，屏幕不会响应用户的任何触摸操作。Sp，在持久化和恢复完成之前，您的和方法中可以有一个**无限的进度条。**显然，您将不得不在单独的线程中执行此操作。因为如果 UI 线程有一段时间没有响应，android 会给出错误。`onPause()``onResume()`
`Application Not Working`

# java - 如何在摇摆中调用面板

> ID：13432200
> 
> 赞同：0
> 
> 时间：2012-11-17T15:57:21.243
> 
> 标签：java

我创建了一个框架，并在该框架中放置了一个面板，并且还制作了一个选项卡式窗格。我在主面板中放置了 4 个图标。我在该框架之外创建了许多面板，但在同一个包中。我只想当我单击其中一个按钮时，它会在选项卡式窗格中显示该类之外的面板。

```
Frame
    Pakage
        Main screen(Where tab pane and buttons are present)
        Panel1.java
        Panel2.java
        Panel3 
```

我只想知道如何`Panel1.java`在选项卡窗格中调用。我正在使用 NetBean。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:34:51.170

如果我正确理解您的问题，您希望将面板类中创建的面板添加到主类中的 tabbedPane 中。

您需要在窗格中实例化 Panel1、Panel2 对象等，然后添加它们，例如：

```
public static void main(String[] argv){
JTabbedPane tabPane = new JTabbedPane();
tabPane.add(new Panel1());
tabPane.add(new Panel2());
} 
```

但是查看您的代码将有助于完全理解您的问题。

编辑：要响应按钮按下来执行此操作，请查看有关动作侦听器的本教程：http: [//docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

# c++ - 当编译器告诉我一个变量“具有初始化程序但类型不完整”时，出了什么问题？

> ID：13432201
> 
> 赞同：2
> 
> 时间：2012-11-17T15:57:33.657
> 
> 标签：c++, boost

我不明白为什么以下程序片段会出错：variable 'boost::program_options::options_description desc' has initializer but compatible type

有人能发现问题吗？

```
 #include <string>

    #include <boost/program_options/cmdline.hpp>
    #include <boost/filesystem.hpp>

    #include "Utility.hpp"
    #include "Common.hpp"

    using namespace std;
    using namespace boost;

    namespace
    {
      const size_t ERROR_IN_COMMAND_LINE = 1;
      const size_t SUCCESS = 0;
      const size_t ERROR_UNHANDLED_EXCEPTION = 2;

    } // namespace

    static void ParseTheCommandLine(int argc, char *argv[])
    {
        int count;

        std::string appName = boost::filesystem::basename(argv[0]);

        namespace po = boost::program_options;

        boost::program_options::options_description desc("Options");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:00:36.470

你必须`#include <boost/program_options/options_description.hpp>`。

# objective-c - 找不到应用程序的有效“aps-environment”权利字符串

> ID：13432203
> 
> 赞同：83
> 
> 时间：2012-11-17T15:57:45.160
> 
> 标签：objective-c, apple-push-notifications

我正在尝试将我的应用程序配置为支持推送通知，但不断收到此错误：无法获取令牌，错误：错误域 = NSCocoaErrorDomain 代码 = 3000“没有为应用程序找到有效的'aps-environment'权利字符串” UserInfo = 0x1f818fc0 { NSLocalizedDescription=没有为应用程序找到有效的“aps-environment”权利字符串}

*   我确实使我的应用程序支持推送通知（此时仅用于开发）。
*   我确实在启用推送通知后创建了配置文件。
*   我的捆绑包标识符与配置文件中显示的相同。
*   在我的配置文件中有一个字符串：aps-environment
*   我确保在“代码签名身份”部分下的项目和目标中，所有值都被选为我的配置文件。

还有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-24T22:19:10.913

就我而言，我的配置文件中的内容：

```
security cms -D -i ~/Downloads/spolskyDevelop.mobileprovision 
...
<key>application-identifier</key>
<string>P5GM95Q9VV.com.dca.spolsky</string>
<key>aps-environment</key>
<string>development</string> 
```

与实际构建的应用程序中的内容不同（您可以通过查看 Xcode 的 Logs 选项卡来了解它的构建位置）

```
codesign -d --entitlements - '/Users/drew/Library/Developer/Xcode/DerivedData/spolsky-bdbtdfjeeywhqzccpmmceqvnhgtm/Build/Products/Debug-iphoneos/spolsky-ios.app'
<dict>
    <key>application-identifier</key>
    <string>Y2X6Z7Z2GR.com.dca.spolsky-ios</string>
    <key>get-task-allow</key>
    <true/>
    <key>keychain-access-groups</key>
    <array>
        <string>Y2X6Z7Z2GR.com.dca.spolsky-ios</string>
    </array>
</dict> 
```

即使代码签名身份**下**的“当前匹配”提示文本指示正确的配置文件，这也是正确的——很奇怪，是吗？为了让一个奇怪的故事更奇怪，当我运行时，正确的配置文件被安装在设备上，（设置->常规->配置文件）让我相信配置文件是正确的——但它回退到通配符 ID当应用程序实际**启动**时。

线索是这两个命令的输出不同：

*Y2X6Z7Z2GR* .com.dca。**spolsky-ios**与*P5GM95Q9VV* .com.dca。**斯波尔斯基**

当我使粗体部分匹配时，斜体部分自动更改为匹配。此外，security和codesign的输出一致，没有aps-entitlement错误。

我的猜测是 XCode 在我的非通配符 ID 上使用了通配符样式的匹配。（毕竟，“spolsky”非常接近“spolsky-ios”），这解释了“当前匹配”输出。但是构建链中的某些东西对此更加严格，因此在构建期间它会回退到*实际的通配符 ID*。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-08-15T08:29:55.537

问题是由于当前的配置文件不包含 APNS 信息，因为配置文件是在创建 APNS 证书**之前创建的。**

因此，要解决这个问题，创建一个新的 Provisioning Profile 并在 Xcode 中选择 Provisioning Profile 将清除错误。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-11-14T20:15:38.613

推送通知已经在我的设备上运行后，我遇到了同样的问题。似乎 Xcode 缓存了一些不正确的东西，所以刷新它解决了我的问题：

1.  Xcode -> 首选项 -> 帐户
2.  查看您的开发者帐户的详细信息
3.  只需为 Provision Profiles 单击 Refresh 几次。每次刷新时，我都会看到这些变化。保持刷新，直到它们停止变化。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-06-30T16:45:42.530

我收到此错误并且没有创建新的配置文件；创建了一个新的，然后不得不重新启动 xCode 但现在可以工作了！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-02-25T04:42:26.403

**请注意，捆绑标识符必须以区分大小写的**方式与配置文件匹配。当它应该是 com.firstlast.appname 时，我有类似 com.FirstLast.appname 的东西。嗯，这让我忙了好一阵子。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-01-06T08:22:30.273

我通过启用推送通知功能解决了这个问题。

选择项目 > 目标 > 功能 > 打开推送通知

![查看图片](../Images/74e43c6a40854c57489ec4fb478ec533.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-09-30T00:47:30.173

如果这个问题在升级到 Xcode 8 后突然发生，你可能会在功能屏幕中发现一个警告，允许你自动修复这个问题：

选择项目 > 目标 > 功能 > 打开推送通知

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-04T06:48:25.473

产品->清洁为我做了。希望它为别人做。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-10-03T21:51:57.650

我在可能不常见的用例中遇到了这个问题。我正在使用 Xcode 6 和 iOS 8。我正在创建一系列全新的应用程序项目，并尝试重新使用相同的包 ID，以便无需再次完成所有门户端设置。这也只是用于沙盒测试。

我会发现，虽然第一个应用程序的设置和注册工作正常，但如果我从设备中删除该应用程序，为第二个应用程序设置相同的捆绑 ID，然后尝试使用该应用程序注册 PN，我会得到这个错误。

我的解决方案是：

1.  从设备中删除关联的配置文件。
2.  从 Xcode 中删除关联的配置文件。
3.  关闭 Xcode
4.  双击我下载的`.mobileprovision`文件将其安装回 Xcode
5.  打开项目并部署它。

无论以前的状态如何，这种方法似乎都会松动，并且我可以使用新的应用程序/相同的捆绑 ID 注册 PN。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-10-18T08:18:48.130

对于那些在 ios 10 中遇到此错误的人，您可以尝试以下步骤：

1.清理你的项目。
2.并检查目标-> 功能-> 推送通知。如果它关闭，则打开它。

问题将解决。上述步骤帮助我摆脱了这个问题。希望它对某人有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-23T12:36:03.203

新的配置文件对我有用。如果您正在开发中，请确保使用开发人员配置文件（不要使用 Ad Hoc）。之后就好了，不知道为什么旧的停止工作了。

# objective-c - CoreData 一对一关系

> ID：13432204
> 
> 赞同：1
> 
> 时间：2012-11-17T15:57:57.073
> 
> 标签：objective-c, xcode, core-data, nsarraycontroller

我正在创建一个具有三个实体的简单应用程序。为简化起见，我称它们为 A、B 和 C。A 和 B 之间是一对多的关系，而 B 和 C 之间是一对一的关系。我想要得到的是我可以将一个对象A到B连接多个对象，但是每个对象B必须只有一个对象C。创建对象B时要自动创建C对象。我该怎么办?

# ruby - heroku 工具带的问题

> ID：13432209
> 
> 赞同：5
> 
> 时间：2012-11-17T15:59:12.933
> 
> 标签：ruby, heroku, gem, installation, rvm

我是 Ruby 和 Rails 项目的绝对新手，所以如果这是一个愚蠢的问题，我很抱歉。

我已经使用`wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh`. 我也试过了`gem install heroku`。但是当我输入：

```
MY_USER@home-PC:~$ heroku version
<internal:gem_prelude>:1:in `require': cannot load such file -- rubygems.rb (LoadError)
    from <internal:gem_prelude>:1:in `<compiled>' 
```

我已经在 google 中检查过，人们建议 gem 和 current ruby​​ 是不同的版本，所以我已经检查过了，它们看起来是一样的：

```
MY_USER@home-PC:~$ which ruby
/home/MY_USER/.rvm/rubies/ruby-1.9.3-p327/bin/ruby

MY_USER@home-PC:~$ gem env | grep 'RUBY EXECUTABLE'
  - RUBY EXECUTABLE: /home/MY_USER/.rvm/rubies/ruby-1.9.3-p327/bin/ruby 
```

我不知道该怎么做，所以请帮忙。

抱歉，可能是愚蠢的问题，在此先感谢。

编辑：忘了说我正在运行 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-17T16:32:40.893

问题是`heroku`您安装的可执行文件可能以这样的行开头：

```
#!/usr/bin/ruby 
```

这将强制`heroku`命令始终使用系统范围的 ruby​​ ( `/usr/bin/ruby`)，并且它永远不会运行您的 rvm 版本的 ruby​​。

`heroku`要修复它，只需将脚本的第一行编辑为：

```
#!/usr/bin/env ruby 
```

这将使`heroku`命令运行当前的任何 ruby​​ 命令`PATH`，而不是像以前那样的硬编码路径。

要查找`heroku`脚本的位置，以便您可以编辑它，只需键入：

```
which heroku 
```

它应该打印出脚本的位置，以便您可以找到它并将其加载到您的编辑器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T04:15:37.383

此外，如果您没有写入权限，您可以输入：

```
:w !sudo tee % > /dev/null 
```

保存成功。

# scala - 如何将全局 onRouteRequest 直接传递给 onBadRequest？

> ID：13432210
> 
> 赞同：2
> 
> 时间：2012-11-17T15:59:12.963
> 
> 标签：scala, playframework, global, interceptor

假设我想为所有 /foo URI 返回一个 BadRequest 结果类型：

```
override def onBadRequest(r: RequestHeader, error: String) = {
  BadRequest("Bad Request: " + error)
}

override def onRouteRequest(r: RequestHeader): Option[Handler] = {
  if(r.uri.startsWith("/foo") onBadRequest("go away")
  else super.onRouteRequest(r)
} 
```

当然不起作用，因为预期的返回类型是`Option[play.api.mvc.Handler]`

处理这个问题的惯用方法是什么，创建一个默认的应用程序控制器方法来处理过滤的错误请求？理想情况下，因为我知道`onRouteRequest`/foo 实际上是 a `BadRequest`，所以我想`onBadRequest`直接打电话。

应该注意这是一个人为的例子，实际上是在验证 URI yyyyMMdd 日期参数，如果它没有解析到 JodaTime 实例，则验证 BadRequest-ing - 基本上是一个全面过滤器来清理给定的日期参数，而不是处理*每个单个控制器方法调用*，更不用说，避免使用无用的堆栈跟踪使应用程序日志混乱 re：无效的日期解析转换（由于用户无意义地操纵 uri 日期以尝试获取付费用户，因此每天都会累积数 MB 的这些垃圾跟踪条目内容）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:04:30.593

像往常一样，边缘没有答案......

想出这个来在传递给 Play 路由器之前清理 URI 日期参数

```
val ymdMatcher = "\\d{8}".r // matcher for yyyyMMdd URI param
val ymdFormat = org.joda.time.format.DateTimeFormat.forPattern("yyyyMMdd")
def ymd2Date(ymd: String) = ymdFormat.parseDateTime(ymd)

override def onRouteRequest(r: RequestHeader): Option[Handler] = {
  import play.api.i18n.Messages
  ymdMatcher.findFirstIn(r.uri) map{ ymd=>
    try { ymd2Date( ymd); super.onRouteRequest(r) }
    catch { case e:Exception => // kick to "bad" action handler on invalid date 
      Some(controllers.Application.bad(Messages("bad.date.format"))) 
    }
  } getOrElse(super.onRouteRequest(r))
} 
```

# python - 熊猫时间段数据类型打印为数字？

> ID：13432213
> 
> 赞同：2
> 
> 时间：2012-11-17T15:59:38.830
> 
> 标签：python, pandas

我有一个 Pandas Dataframe，其中包含我转换为 pandas TimeSeries 的日期。

从那里，我想在 DF 中添加一个列，该列与日期列相同，只是周期格式，频率设置为月。

问题是，在数据框中，周期列打印为数字（2009-1 打印为 468，2009-2 打印为 469，等等）。

当我在 DF 之外创建一个单独的 PeriodIndex 对象时，这不是问题。

我究竟做错了什么？

我用来将未格式化的时间列转换为 DateTime 的代码：

```
subset['Created On'] = pd.to_datetime(subset['Created On']) 
```

使用句点创建列的代码：

```
subset['Month'] = pd.PeriodIndex(subset['Created On'],freq='M') 
```

创建单独的 PeriodIndex 对象并以月份格式正确显示日期的代码：

```
months = pd.PeriodIndex(subset['Created On'],freq='M') 
```

编辑：

根据评论中的要求，subset[:1].to_dict() 输出：

```
#[Out]# {'Created On': {12822544: <Timestamp: 2009-01-01 00:00:00>}, 'City': {12822544: 'BROOKLYN'}, 'Borough': {12822544: 'Unspecified'}, 'Location': {12822544: '(40.65662129596871, -73.95806621423951)'}, 'Closed Date': {12822544: '01/07/2009 12:00 AM'}} 
```

请注意，自从我的 OP 之后，我失去了会话，不得不将数据重新上传到 DF。此时，我只使用 pd.to_datetime 方法将“创建时间”列转换为时间戳。从那时起，我尝试使用：

```
subset['Created On'].resample('M') 
```

导致错误：

```
TypeError: Only valid with DatetimIndex or PeriodIndex 
```

也许问题的一部分是我没有使用日期列作为 DF 索引？如果是这样，那将无法正常工作，因为它包含大量非唯一值，并且我已经在使用更能代表索引的唯一 ID 字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:01:30.647

这是一个错误。作为临时解决方法，您可以执行以下操作：

```
subset['Month'] = pd.PeriodIndex(subset['Created On'],freq='M').asobject 
```

[http://github.com/pydata/pandas/issues/2281](http://github.com/pydata/pandas/issues/2281)

# javascript - 这可以在带有断点的开发人员模式下工作....但是没有它就无法工作

> ID：13432217
> 
> 赞同：0
> 
> 时间：2012-11-17T16:00:01.903
> 
> 标签：javascript, jquery

我有一个传递给api的文本框……输入的文本被存储……

```
<input type="text" id="name" placeholder="Type something"> 
```

下面的代码在带有断点的chrome开发人员模式下工作，但没有它就无法工作......

```
$("#submit").click(function() {
  var name = $('#name').val() ;
  var url =  "https://www.mariyano.com/app-server/test/?action=add_list&name="+name;
  $.ajax({
    url: url,
    dataType: "jsonp",
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:09:32.137

实际上不知道出了什么问题，但这是一个有效的源代码：http: [//jsfiddle.net/HLmsr/](http://jsfiddle.net/HLmsr/)

**JavaScript**

```
$("#submit").click(function() {
  var name = $('#name').val() ;
  var url =  "https://www.mariyano.com/app-server/test/?action=add_list&name="+name;

  $.ajax({
      url: url,
      dataType: "jsonp",
      error: function (e) {
          console.log(e);
      },
      success: function (data) {
          console.log(data);
      }
  });
});
​ 
```

**HTML**

```
<input type="text" value="" id="name" />
<input type="button" id="submit" value="Submit" />​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:06:28.837

尝试像这样修改您的代码：

```
$("#submit").click(function(evt) {
  evt.preventDefault();
  var name = $('#name').val() ;
  ... 
```

如果您不调用 preventDefault 并且“submit”是提交输入类型，则可能会发生代码未执行，因为浏览器导航到另一个页面。

有关更多详细信息，请参阅 jquery 参考：[jquery](http://api.jquery.com/event.preventDefault/)

# javascript - 调用异步方法完成的函数后获取值错误？

> ID：13432218
> 
> 赞同：0
> 
> 时间：2012-11-17T16:00:03.107
> 
> 标签：javascript, facebook

我有一个示例代码：

```
window.fbAsyncInit = function() {
   FB.init({appId: appId, status: true, cookie: true, xfbml: true});

   // Additional initialization code such as adding Event Listeners goes here
   FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
         getFlag(1);
      } else if (response.status === 'not_authorized') {
         getFlag(2);
      } else {
         getFlag(3);
      }
    });   
};
var f = function getFlag(flag){};
alert(f); 
```

结果是 a `function getFlag(flag) {}`，如果 = 1 正好，如何得到这个值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:26:08.517

您的代码中有几点。

1）调用`getFlag`函数将不会被执行，因为你将`getFlag`函数分配给了一个变量`f`。所以你需要使用`f()`.

2）您的函数是异步调用，因为您的代码`alert(f)`将在函数执行之前到达。

3）如果你想要标志值，为什么不声明一个变量并分配它。

```
var flag;
 FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
     this.flag = 1;
  } else if (response.status === 'not_authorized') {
     this.flag = 2;
  } else {
     this.flag = 3;
  }
}); 
```

# apache - 如何在没有 RewriteEngine 的情况下使用 .htaccess 来阻止目录和所有子目录？

> ID：13432219
> 
> 赞同：0
> 
> 时间：2012-11-17T16:00:25.227
> 
> 标签：apache, .htaccess, mod-rewrite, directory, subdirectory

到目前为止，我有：

```
order deny,allow
deny from all
allow from 127.0.0.1/8 
```

这会阻止我试图向除我之外的任何人隐藏的文件夹的顶级目录（不是根目录），但它不会阻止子目录。我仍然想访问该目录，并且我看到的所有示例都使用重写引擎来完全阻止来自子目录的访问。我如何也阻止子目录？这与第一个建议的问题相反：

[如何使 .htaccess 在当前目录而不是子目录上工作？](https://stackoverflow.com/questions/1200348/how-do-i-make-htaccess-work-on-the-current-directory-and-not-subdirectories)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:58:47.390

At first, I thought the closed beta packages I was testing were overriding my .htaccess file with their own, but they did not override any directory permissions.

At Kamil's suggestion, I looked into my httpd.conf and noticed that AllowOverride was set to None for the root directory of my web server. Setting it to All worked like a charm.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:24:13.430

您引用的配置可以根据需要工作。

如果它确实仅阻止*当前目录*但您可以访问它的子目录-这就是我理解您的描述的方式-这意味着，您通过一些进一步`.htaccess`和/或配置更改了访问规则，`httpd.conf`即`allow from all`

# jsp - 为什么 /WEB-INF 文件夹中的 JSP 页面没有被编译？

> ID：13432224
> 
> 赞同：1
> 
> 时间：2012-11-17T16:01:02.353
> 
> 标签：jsp, jakarta-ee, jspinclude

美好的一天，我是学习 Jave EE 的初学者。我在 doGet 方法中创建了一个 servlet（控制器）VersionOverview.java，其中包含以下代码：

```
RequestDispatcher view = request.getRequestDispatcher("WEB-INF/jsp/versions.jsp");
view.forward(request, response); 
```

文件 WEB-INF/jsp/versions.jsp 包含这些行：

```
<div id="content">
  <jsp:include page="/WEB-INF/jspf/organization-filter.jspf" />
  ...
</div> 
```

文件 /WEB-INF/jspf/organization-filter.jspf 包含以下几行：

```
<form name="organization-filter" action="versions">
  <input type="text" id="org_name" name="org_name" value="<%= request.getAttribute("org_name") %>">
  <br>
  <input type="hidden" id="org_id" name="org_id" value="<%= request.getAttribute("org_id") %>">
  <br>
  <input type="submit" name="submit" value="Submit"/>
</form> 
```

当我打开页面 /versions（映射到上面的 servlet）时，似乎没有编译 organization-filter.jspf，因为我可以在其中看到以下文本，而不是名为 org_name 的空白输入字段：

```
<%= request.getAttribute( 
```

如果我在 versions.jsp 中更改包含指令，如下所示，它将开始工作：

```
<div id="content">
  <%@include file="/WEB-INF/jspf/organization-filter.jspf" %>
  ...
</div> 
```

请告知为什么当我使用 jsp:include 时它不起作用。先感谢您。沃杰科技

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:12:32.390

jspf 文件是一个应该被静态包含的文件，使用 include 指令：

```
<%@ include file="someFile.jspf" %> 
```

这就是JSP~~分段~~段是，并且由于它应该被静态包含，因此编译它没有意义。

这是规范所说的：

> 默认情况下，扩展名 .jsp 表示顶级 JSP 文件。我们建议但不强制区分顶级 JSP 文件（由客户端直接调用或由另一个页面或 servlet 动态包含）和静态包含的段，以便：
> 
> *   .jsp 扩展名仅用于与顶级 JSP 文件对应的文件，在处理时形成 JSP 页面。
> *   静态包含的段使用任何其他扩展。由于包含的段在本规范的过去版本中被称为“JSP 片段”，因此提供了扩展名 .jspf 作为建议。出于一致性原因，仍然建议使用此扩展，尽管它们现在称为“jsp 段”。

如果要动态包含它，则它必须具有`.jsp`扩展名。但在这种情况下，我不明白你为什么不使用静态包含。

# php - 为什么在 PHP 中执行 SQL 查询时有时没有行

> ID：13432225
> 
> 赞同：0
> 
> 时间：2012-11-17T16:01:05.723
> 
> 标签：php, mysql, rows

我有一个充满数据的 SQL 表。我正在使用以下代码提取列值并将它们放入数组中。这工作得很好，就像我做的那样`var_dump(array)`，我打印出数组中的元素，它们看起来是正确的。但是，有时我只是得到空元素。这基本上意味着没有获得列值。有谁知道为什么当表格充满记录时我有时没有结果？

```
$names = array();
$dob = array();
mysql_connect("localhost", "xxx", "xxx")or die("Error");
mysql_select_db("details")or die("Error");
$query="SELECT * FROM members";
$result=mysql_query($query);
while ($row = mysql_fetch_assoc($result) ){
$names[] = $row["name"];
$dob[] = $row["dob"];
}
var_dump($names);
var_dump($dob); 
```

# php - PHP 加载函数

> ID：13432226
> 
> 赞同：-2
> 
> 时间：2012-11-17T16:01:10.197
> 
> 标签：php, jquery, ajax

我一直在尝试找出一种仅在页面完全加载时才在 PHP 中加载某些内容的方法。

我所拥有的是：

```
echo "
 <td colspan='5'>
 <div id='div".$x."' class='targetDiv' style='visibility: hidden'>

 <center>".load($data['download_url']);"</center>

 </div>
"; 
```

我只需要在页面的其余部分完全加载时插入或初始化 .load 位。我已经阅读了使用 jQuery 和 Ajax 执行此操作的方法，但无法使它们工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:06:59.640

如果没有 AJAX，就没有办法做这样的事情。检查[jQuery ajax](http://api.jquery.com/jQuery.ajax/)函数，它有完整而简单的文档。

无论如何，你必须写这样的东西（有一些非常糟糕的做法，但这只是示例）：

```
<script>
$(document).ready(function() {
  $.ajax({
    url: 'http://yoursite.com/yourpage.php',
    success: function(data) {
      $('#paste-result-here').html(data);
    }
  });
});
</script>
<table>
  <tr>
    <td id="paste-result-here"></td>
  </tr>
</table> 
```

和 php yourpage.php：

```
echo "
 <div id='div{$x}' class='targetDiv' style='visibility: hidden'>
   <center>{$data['download_url']}</center>
 </div> 
"; 
```

# c - C 直方图错误数字

> ID：13432230
> 
> 赞同：-1
> 
> 时间：2012-11-17T16:01:39.487
> 
> 标签：c, histogram

你好我有这个功能

```
int printofarray(int *j,double *n)
{
int x,k;
k=*j;
if(n==NULL) {
printf("array was not created\n");
return 1;}

for(x=0;x<k;x++){
printf("%.2lf\n",*(n+x));}

return 0;
} 
```

当我使用它时，输出是这样的

```
34.77
6114.05
410.70 
```

但我想这样写

```
 34.77
6114.05
 410.70 
```

想法如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:05:12.377

您将数组动态分配`dni`为：

```
dni=(int *) malloc(number*sizeof(int)); 
```

不为其元素分配任何值，但最后打印元素，这显然会打印垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:11:50.097

您的打印语句左对齐。如果你想要小数点排列，你必须知道你正在处理的数字大小。最简单的方法是指定位数，如下所示。当然，如果你有 5 个位置而不是 6 个位置，这将中断。

```
for(x=0;x<k;x++){
printf("%7.2lf\n",*(n+x));} 
```

# java - Java - 图形绘制

> ID：13432231
> 
> 赞同：2
> 
> 时间：2012-11-17T16:02:02.783
> 
> 标签：java, swing, oop, graphics, jframe

我正在尝试开发一个 Java 破砖机（如 DxBall）游戏，我想`Ball`用自己的绘制方法制作对象。

我正在尝试做的事情：

```
public class Ball {
  private int x, y, diameter;
  public void  Ball(){
    x = 0;
    y = 0; 
    diameter = 20;
  }

  public void draw(Graphics g){
    g.setPaint(Color.red);
    g.fillOval(x, y, diameter, diameter);
  }
} 
```

因此，我的游戏引擎扩展`JFrame`，其`paintComponent`方法将调用游戏对象绘制方法。总而言之，用Java做面向对象的游戏是正确的方法吗？我的`Ball`课程应该扩展什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:05:36.337

如果你想制作`Ball`一个图形组件，你可以扩展`JComponent`：

```
public class Ball extends JComponent {
    private int x;
    private int y
    private int diameter;

    public Ball() {
        x = 0; 
        y = 0; 
        diameter=20;
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.setPaint(Color.red);
        g.fillOval(x, y, diameter, diameter);          
    }
} 
```

`repaint`并在您希望绘制组件而不是自定义`draw`方法时简单地调用。

注意：构造函数没有返回类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T16:06:14.800

你的`Ball`课看起来不错。它不需要扩展任何东西。您需要将游戏对象中的对象传递给`Graphics`方法。`paintComponent``Ball` `draw`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T17:07:36.297

您的课程很好，但我建议扩展课程。此类通常称为`Sprite`或包含基本信息，`Action`例如`GameObject`

**`image (or animation), position, collision rect and some basic functions like get and set it's position, speed and some collision detection functions if you wish.`**

一些资源。

*   [突围游戏](http://zetcode.com/tutorials/javagamestutorial/breakout/)
*   [GEJ - Java 游戏引擎](http://code.google.com/p/game-engine-for-java/)
*   [Java-Gaming.org - Java 游戏资源](http://www.java-gaming.org/index.php?action=resources)

希望他们有所帮助。并绘制对象，做

```
g.drawImage(ball.image, ball.x, ball.y, null); 
```

# android - 关于 Android 配件模式和正常的 USB 连接

> ID：13432233
> 
> 赞同：0
> 
> 时间：2012-11-17T16:02:16.997
> 
> 标签：android, embedded, usb

我刚开始研究 android 中的 OAPavailable。我遇到了一些疑问

1.  **附件是否必须让我的 android 手机/桌子通过 USB 与外部设备**通话？我不能使用普通 USB 模式与我的外部硬件通话吗？附件模式意味着手机将始终是 USB 设备，而我的外部设备将是 USB 主机.我在手机中的应用程序应该能够与外部硬件对话，无论它是主机还是 USB 设备

2.  **USB主机和设备之间到底有什么区别？**只是谁为总线供电？当两个设备连接时，设备如何说“嘿，我将成为主机，你将成为设备？”

简而言之，我的目标是创建一个可以与连接的 USB 设备对话的应用程序，无论它是 USB 设备还是 USB 主机。我可以使用 UsbManager api 实现它而不依赖于 Android 的 OAP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:17:01.240

如果您希望能够在任何一种情况下工作，您基本上必须编写两个通信子系统，一个使用适合每种情况的 API。

它将由外部设备和电缆确定哪种模式处于活动状态（尽管如果电话不能成为主机，则需要的外部连接将被忽略，这意味着没有通信）。

# objective-c - iOS 从 web 读取 Json 并显示到 tableView

> ID：13432240
> 
> 赞同：3
> 
> 时间：2012-11-17T16:03:14.907
> 
> 标签：objective-c, ios, json

我要做的是在网络上读取一个 json 文件（我知道与这方面的连接正在工作），然后获取一些文件内容以显示在我的 tableView 上。

在另一个示例中，我能够做到这一点，但我不确定现在的问题是什么。

**JSON文件：**

```
{
"entry":
[
{"Current Date":"Tuesday June 22 2011","Time Period":"00:00 - 06:45,"},
{"Current Date":"Tuesday June 23 2011","Time Period":"00:00 - 07:22"}
]
} 
```

**从 Web 获取 JSON 文件的按钮：**

```
- (IBAction)getJsonButton:(id)sender {

[array removeAllObjects];

NSURL *url = [NSURL URLWithString:@"https://LinkToWhereJSONfileIsLocated/"];

NSURLRequest *request = [NSURLRequest requestWithURL:url];

connection = [NSURLConnection connectionWithRequest:request delegate:self];

if(connection)
{
    webData = [[NSMutableData alloc]init];
}
} 
```

**这是我认为我遇到问题的地方（必须是我的逻辑或语法）：**

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];

NSArray *arrayOfEntry = [allDataDictionary objectForKey:@"entry"];

for (NSDictionary *diction in arrayOfEntry) {
    NSString *currDate = [diction objectForKey:@"Current Date"];

    [array addObject:currDate];

}

[[self myTableView]reloadData]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:20:37.560

`reloadData`这是一个快速的猜测，尝试在主线程上调用方法。

# css - 内容重叠 div

> ID：13432241
> 
> 赞同：3
> 
> 时间：2012-11-17T16:03:16.337
> 
> 标签：css, html, overlapping

我遇到内容重叠的问题。当我为 HTML 尝试此代码时， content_left 中的文本与我希望它包含的整个区域重叠。当我将高度更改为自动时，它并没有解决问题.. 内容向右重叠，底部被切断。

```
#wrapper {
  height: 1500px;
  margin: 20px auto auto auto;
  padding: 0;
  background: url(wrapper.png);
}

.content_left {
  float: left;
  width: 600px;
  padding: 20px 0 0 30px;
  margin-left: -300px;
  position: relative;
  height: auto;
}
```

```
<div id="wrapper">

  <div id="header">

    <div id="logo">
    </div>

    <div id="header_right">
    </div>
  </div>
  <div class="content_left">
    hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh
    hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh
    hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh hfhfhfhfhfhfhfhfhfhfhffhfhhfhfhfhfhfhfhfhfhfhfhffhfh
  </div>

  <div class="content_right">
  </div>

  <div class="footer">
    Footer goes here
  </div>
</div>
```

示例[jsfiddle 示例](http://jsfiddle.net/L6acE/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T17:12:23.633

看到完整的小提琴，我可以发表的评论是

*   从`height:700px;`_`#wrapper`
*   添加`overflow:hidden`在`#wrapper`
*   添加 （这将启用分词`word-wrap: break-word;`，*因为您的文本太长而无法容纳在一行中..*）`.content_left`

 *结果可以在[http://jsfiddle.net/gaby/L6acE/1/看到](http://jsfiddle.net/gaby/L6acE/1/)

* * *

可以在[http://caniuse.com/#search=word-wrap看到对该功能的支持](http://caniuse.com/#search=word-wrap)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T16:09:22.217

这是因为字符串（单词）中没有空格试试

```
 .content_left{overflow:hidden;} 
```

我不认为任何有效的字符串（单词）只要你的*

# ruby-on-rails - Rails 3 Sidekiq 乘客

> ID：13432245
> 
> 赞同：2
> 
> 时间：2012-11-17T16:03:42.607
> 
> 标签：ruby-on-rails, ruby, sidekiq

我能够让 Sidekiq 调度程序在本地工作。我遇到的最后一个障碍是如何将其部署到乘客的生产应用程序中。有人可以指出我如何在乘客上连续运行 Sidekiq 的正确方向。

欣赏它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T16:20:18.907

Passenger 是一个 Apache\nginx 模块，用于运行 Rails\Rack 应用程序。

Sidekiq 是一个线程化的后台工作队列，通常在生产环境中与 JRuby 一起运行。

您不会通过Passenger 运行Sidekiq。

相反，只需将Passenger 配置为根据需要运行和服务您的应用程序。然后你可以启动 Sidekiq 并让它轮询 Redis 的工作。强烈建议您使用 JRuby 或 Rubinius，以便充分利用 Sidekiq 的线程特性。

有关部署 Sidekiq 的更多详细信息，请参阅 wiki： [https ://github.com/mperham/sidekiq/wiki/Deployment](https://github.com/mperham/sidekiq/wiki/Deployment)

有关配置乘客的更多详细信息，请参阅它的文档（对于 Apache 或 nginx）： [https ://www.phusionpassenger.com/support#documentation](https://www.phusionpassenger.com/support#documentation)

**更新：** Sidekiq 的创建者有一个名为[Girl Friday](https://github.com/mperham/girl_friday)的库。该库添加了一个异步作业队列，但与您的 Rails 应用程序（或其他 Rack 应用程序）内联运行。此选项可以大大简化部署并节省资金！

# c++ - 从 iomanip 使用 setw 和 left

> ID：13432248
> 
> 赞同：2
> 
> 时间：2012-11-17T16:04:38.320
> 
> 标签：c++

我想在有组织的表格中打印出地图中的键和值。我正在尝试使用 setw 并离开，但输出是

```
The  1
hello1 
```

我希望它像

```
The     1
hello   1 
```

到目前为止我做了什么

```
// System includes

#include <iostream>
#include <string>
#include <cstdlib>
#include <map>
#include <unordered_map>
#include <fstream>
#include <iomanip>

/************************************************************/ 
```

本地包括

```
/************************************************************/
// Using declarations

using std::cout;
using std::map;
using std::unordered_map;
using std::string;
using std::cin;
using std::endl;
using std::ifstream;
using std::left;
using std::setw;

/************************************************************/ 
```

函数原型/全局变量/typedef

```
/************************************************************/

int
main (int argc, char* argv[])
{

    //call the wordCount function on the user specified input file
    unordered_map <string,int> exampleMap;
    exampleMap["The"]++;
    exampleMap["hello"]++;

    cout << left;
    //iterate through the map and print out the elements
    for( unordered_map<string, int>::iterator i=exampleMap.begin(); i!=exampleMap.end(); ++i)
    {
      cout << setw(5) << (*i).first << setw(15) << (*i).second << endl;
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:07:28.867

您需要指定大于 5 的宽度（如果您希望字段大于 5 个字符）。您不需要第二次调用 setw。

尝试

```
 for( auto i=exampleMap.begin(); i!=exampleMap.end(); ++i)
     {
        cout << setw(8) << i->first << i->second << '\n';
      } 
```

# node.js - 创建功能玉

> ID：13432250
> 
> 赞同：2
> 
> 时间：2012-11-17T16:05:04.100
> 
> 标签：node.js, function, express, pug

我想在翡翠中创建一个函数，但我找不到如何

我在 javadoc 中找到了一些关于 finctions [https://github.com/visionmedia/jade](https://github.com/visionmedia/jade)的内容，但我不明白

如果不返回 var 名称，我想尝试是否存在变量，有点像这个 php 脚本：

```
function vname(&$var, $scope=false, $prefix='unique', $suffix='value')
{
    if($scope) $vals = $scope;
    else      $vals = $GLOBALS;
    $old = $var;
    $var = $new = $prefix.rand().$suffix;
    $vname = FALSE;
    foreach($vals as $key => $val) {
        if($val === $new) $vname = $key;
    }
    $var = $old;
    return $vname;
 }
 if(!isset($var)){echo vname($var)} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T17:04:39.383

它基本上归结为向 locals 对象添加一个函数。您可以在几个不同的地方执行此操作。

路线：

```
app.get('/test', function (req, res) {
  res.locals.someFunction = function () { /* do stuff */ };
}); 
```

通用中间件：

```
app.use(function (req, res, next) {
  res.locals.someFunction = function () { /* do stuff */ };
  next();
}); 
```

应用：

```
app.locals.someFunction = function () { /* do stuff */ }; 
```

这是超级基本的东西吗？通常记录在 Express.js 网站上。

# c - 如何用 vim 折叠 C 代码？

> ID：13432251
> 
> 赞同：7
> 
> 时间：2012-11-17T16:05:04.043
> 
> 标签：c, vim, folding

我一直在尝试探索 Vim 中的代码折叠选项，我偶然发现了这个 stack-overflow [question](https://stackoverflow.com/questions/851916/compact-c-folding-in-vim)。虽然我已经能够将它放入我`vimrc`的 ，但我遇到的问题是**它不会折叠函数上方的多行注释**。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-17T16:23:43.390

默认`syntax/c.vim`提供折叠定义。除非您定义`c_no_comment_fold`变量，否则这也会折叠多行注释。

要激活它，只需输入

```
:setlocal foldmethod=syntax 
```

进入`~/.vim/after/ftplugin/c.vim`.

# javascript - Twitter API 基本时间线操作

> ID：13432254
> 
> 赞同：0
> 
> 时间：2012-11-17T16:05:18.293
> 
> 标签：javascript, jquery, twitter

我有一个网站，我使用 Twitter API 来获取我的三个最新推文。那里没问题。但是，如果我发布转推，当调用最新推文时，它会显示开头的“RT @DennisDMZ”和转推，但返回会被截断为 140 个字符，包括 RT @DennisDMZ 字符串。

此外，如果有链接，则不会创建锚标记，加密的 url 仅显示为常规文本。我在API调用中设置了参数include_entities=1，它返回了url信息，但是并没有自动添加锚标签。它甚至显示链接的位置，因此从技术上讲，您可以动态构建链接，但这很困难。

有没有办法解决这些问题中的任何一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:19:02.983

我认为它们让它变得更加困难......我能够使用 console.log 查看 Firebug 上的返回对象并查看返回的内容。全文在'reseller_status'属性下，url在'entities'属性下，给出了url和字符位置，所以我写了一个插入函数来在适当的位置插入锚标签。

# sql - 如何以二进制形式编写 hsqldb？

> ID：13432262
> 
> 赞同：0
> 
> 时间：2012-11-17T16:06:06.340
> 
> 标签：sql, database, binary, hsqldb

我正在为 java 中的 SQLite 寻找一个好的（与 JDBC 兼容的）替代品。我找到了 hsqldb ，这让我很满意，但也有一些问题。

第一的。当数据库大小为 3-4GB 时它是如何运行的？仍然将所有内容加载到 RAM 中？

第二。那里说，它可以支持二进制格式，而不仅仅是脚本。我该如何启用它？

```
Class.forName("org.hsqldb.jdbcDriver");
PleaseHsqlUseBinaryFormat(); // What should I write here or somewhere else?
link = DriverManager.getConnection("jdbc:hsqldb:file:/tmp/mydatabase.hsql","sa","");
try
{
    // Work with database
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:45:09.167

HSQLDB 很灵活，允许您选择数据的存储方式。如果您希望将数据存储在磁盘表中，请使用 CACHED 表。最简单的方法是向连接 URL 添加一个属性：

```
jdbc:hsqldb:file:/tmp/mydatabase.hsql;hsqldb.default_table_type=cached 
```

所有 CREATE TABLE 和类似的语句都存储在 .script 文件中。如果您不希望此文件为文本格式，请添加另一个属性：

```
jdbc:hsqldb:file:/tmp/mydatabase.hsql;hsqldb.default_table_type=cached;hsqldb.script_format=3 
```

该指南涵盖了不同的选项：

[http://hsqldb.org/doc/2.0/guide/management-chapt.html](http://hsqldb.org/doc/2.0/guide/management-chapt.html)

# forms - 重复值的唯一约束

> ID：13432274
> 
> 赞同：5
> 
> 时间：2012-11-17T16:07:33.227
> 
> 标签：forms, scala, playframework, playframework-2.0, unique-constraint

我正在尝试在游戏中[定义一种形式](http://www.playframework.org/documentation/2.0.4/ScalaForms)[！2.0.4](http://www.playframework.org/documentation/2.0.4/Home)具有以下属性和约束：

1.  表单处理重复的值（让我们方便地假设这些值是 type `number`）。所以这将使我们得到这样的结果：

    ```
    "numbers" -> list(number) 
    ```

2.  每个号码必须是唯一的，即对于所有其他提交的号码，它必须是唯一的，并且对于数据库中已经存在的号码必须是唯一的（这可以通过某些功能进行检查`check(num: Int): Boolean`）。

3.  表单错误应该是特定于数字的，不是唯一的。我不希望出现“有重复号码”的一般表单错误。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:54:56.997

这里的诀窍是定义一个`Constraint`类似这个[例子](https://stackoverflow.com/questions/11999202/custom-constraint-in-play-2-0-scala)的自定义类型。`Constraint`然后可以使用自定义方法`Mapping[T]`来验证表单中的字段`verifying`。

自定义`Constraint`包含返回 a`ValidationResult`或`Valid`的逻辑`Invalid`。可以将错误消息传递给`Invalid`结果，您可以在其中指定数据库中重复或存在的内容。

有关自定义验证的部分，请参阅[Play for Scala](http://www.manning.com/hilton/)。

## - 创建约束

```
 //Make this lazy to prevent java.lang.ExceptionInInitializerError at runtime.
  lazy val uniqueNumbersConstraint = Constraint[String](Some("Unique numbers constraint"), "")(checkNumbers)

  //"Business Logic". 
  //Important part here is that the function returns a ValidationResult and complies with the signature for Constraint. i.e. f: (T) => ValidationResult
  //Return Valid if n in numbers is not in database and there are no duplicates.   
  //Otherwise return Invalid and an error message showing what numbers are in the database or duplicated. 
  def checkNumbers(numbers: String):ValidationResult  = {
    val splitNums = numbers.split(" ").toList.map(_.toInt)
    val dbnums  = splitNums.partition(database.contains(_))
    if(dbnums._1.isEmpty && uniquesAndDuplicates(splitNums)._2.isEmpty){
      Valid
    }else{
      val duplicates = uniquesAndDuplicates(dbnums._2)._2
      val error = "Database contains: " + dbnums._1 + ", duplicated values: " + duplicates
      Invalid(error)
    }
  } 
```

## - 使用自定义约束验证表单

```
 val helloForm = Form(
    tuple(
      "numbers" -> nonEmptyText.verifying(uniqueNumbersConstraint)
    )) 
```

## - 实用程序

```
 //Return unique values on left side and duplicate values on right side
  def uniquesAndDuplicates(numbers: List[Int]):Tuple2[List[Int], List[Int]] = {
    numbers.partition(i => numbers.indexOf (i) == numbers.lastIndexOf(i))
  }

  def checkNum(num: Int) = {
    database.contains(num) 
  }

  val database = List(5,6,7) 
```

## - ETC

注意我在表格中定义`numbers`为a `String`。当我将它定义为`list(number)`它不断评估为`List()`. 我认为这是一个有约束力的问题。这是一个相当简单的更改来使用`List(1,2,3)`而不是`"1 2 3"`如果使用`list(number)`作品。

## - 样品

![在此处输入图像描述](../Images/5933ecca7020a82cac837569edb242ea.png) ![在此处输入图像描述](../Images/1bd0ec3b90e614a1cc4d40a81508ff23.png) ![在此处输入图像描述](../Images/27399482619ab5ee85fa53c808089e1d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:21:14.417

怎么样：

```
def validateUnique(input: List[Int]): ValidationResult = {

  // Assuming check return true if the input num doesn't exist yet
  def check(num: Int): Boolean = num % 2 == 0
  val unique = input.toSet
  val dbDuplicates = unique.filterNot(check)
  val formDuplicates = input.diff(unique.toSeq)
  val duplicates = (dbDuplicates ++ formDuplicates).toList

  duplicates match {
    case List() => Valid
    case _ => Invalid("Duplicates: " + duplicates.mkString(", "))
  }
}

val uniqueConstraint = Constraint[List[Int]](validateUnique(_)) 
```

然后你可以使用新的约束：

```
mapping(
  ...,
  "ints" -> list(number).verifying(uniqueConstraint)
  ... 
```

# ios - 如何使用 AFClient 设置 http 标头

> ID：13432279
> 
> 赞同：0
> 
> 时间：2012-11-17T16:08:02.653
> 
> 标签：ios, http-headers, afnetworking

如何使用 AFClient 设置 http 标头，在下面的代码中，我应该在哪里设置标头？

我知道 AFHTTPClient 可以设置 http 标头。AFNetworking 给出的示例代码如下：

AFAppDotNetAPIClient.h

```
#import <Foundation/Foundation.h>
#import "AFHTTPClient.h"

@interface AFAppDotNetAPIClient : AFHTTPClient

+ (AFAppDotNetAPIClient *)sharedClient;

@end 
```

AFAppDotNetAPIClient.m

```
#import "AFAppDotNetAPIClient.h"

#import "AFJSONRequestOperation.h"

static NSString * const kAFAppDotNetAPIBaseURLString = @"https://alpha-api.app.net/";

@implementation AFAppDotNetAPIClient

+ (AFAppDotNetAPIClient *)sharedClient {
    static AFAppDotNetAPIClient *_sharedClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedClient = [[AFAppDotNetAPIClient alloc] initWithBaseURL:[NSURL URLWithString:kAFAppDotNetAPIBaseURLString]];
    });

    return _sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];

    // Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
        [self setDefaultHeader:@"Accept" value:@"application/json"];

    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:11:26.760

我想你会把它们放在下面

`[self setDefaultHeader:@"Accept" value:@"application/json"];`

但这引出了一个问题[，您尝试过](http://mattgemmell.com/2008/12/08/what-have-you-tried/)什么？

# java - 菜单外观

> ID：13432280
> 
> 赞同：0
> 
> 时间：2012-11-17T16:08:06.010
> 
> 标签：java, android, menu

我的两个应用程序之间的菜单外观存在差异。

第一个是我正在扩展到 Android 15 的“旧”应用程序。为此，我将 min SDK 设置为 10，将目标 SDK 设置为 15。

第二个是使用 Eclipse 向导生成的全新的。最小 SDK 参数设置为 8，目标 SDK 参数设置为 15。

当我启动第二个应用程序时，菜单看起来应该在 Android 4 环境中：每个菜单项都在溢出菜单中。

当我启动第一个时，菜单看起来很旧：最初显示 6 个项目（连续 3 个，两行），第六个条目包含“更多”条目以访问溢出菜单。

我的问题是我看不出代码中有任何差异可以解释这种行为差异。

有谁知道我怎样才能让我的第一个应用程序的菜单看起来“新”的方式（Android 4）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:06:17.853

应用程序从头开始重建，有很多剪切和粘贴。蛮力取代了智慧……

事实上，我只需要在我的 AndroidManifest.xml 文件中更改我的应用程序的主题！

# unicode - 如何在 G-Wan Web 服务器中使用 C/C++ servlet/handlers 处理 Unicode 文本？

> ID：13432281
> 
> 赞同：1
> 
> 时间：2012-11-17T16:08:33.543
> 
> 标签：unicode, g-wan

我计划使用 C/C++ servlets/handlers 为 G-Wan web/app 服务器编写一个 web 应用程序。我希望我的应用程序可以使用多种语言，包括多字节字符，因此我想知道我应该如何在 G-WAN servlet 中处理这个问题。

xbuf_t 结构似乎是 char* 作为其用于构建 HTTP 响应的底层存储缓冲区；并且由于 char 是单字节，我想知道它将如何影响带有 unicode 或多字节字符的文本。我有点不愿意添加像 IBM Unicode Library [ICU] 之类的重型 unicode 库。

有人可以解释一下其他人是如何处理这种情况的吗？如果需要，有哪些选项可用于处理 unicode，最好是尽可能少地依赖依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:55:42.657

服务器响应（`reply`在 servlet 示例中调用）可以包含二进制数据，因此这当然是可能的。有一些示例可以动态发送图片（GIF、PNG、JSON 等），因此您可以发送的回复内容没有限制。

如果没有 UNICODE，您正在使用`xbuf_xcat()`which 就像`sprintf()`动态增长的缓冲区（服务器`reply`）一样。

您应该做的只是构建您的 UNICODE 回复（使用您最喜欢的 UNICODE 库 - ANSI C，几乎所有语言都有一个），然后将其复制到`reply`缓冲区中`xbuf_ncat();`

当然，您也可以`xbuf_ncat();`对您构建的每条数据即时使用，而不是为 servlet 末尾的所有大缓冲区使用。你的选择。

请注意，使用`UTF-8` *可能*（这取决于您的应用程序）是一个更好的选择，`UNICODE`因为您的大部分文本可能都可以使用`xbuf_xcat()`（这比缓冲区副本快）。

您只需要调用`xbuf_ncat();`非 ASCII 字符。

可以修改这些`xbuf_xxx()`函数以支持 UTF-8/UNICODE（例如，带有一个标志来告诉您使用哪种编码），但这将在以后进行。

# ios - 在横向模式下使用 Core Motion

> ID：13432283
> 
> 赞同：1
> 
> 时间：2012-11-17T16:08:43.613
> 
> 标签：ios, augmented-reality, core-motion

我目前正在研究增强现实，为此我想使用陀螺仪和核心运动。我研究了 Apple [pARk](http://developer.apple.com/library/ios/#samplecode/pARk/Introduction/Intro.html)示例代码，我了解我花时间阅读文档的大部分数学知识，因为乍一看并不清楚！一切都很好，直到我尝试让它在横向模式下工作。

我不会在这里解释所有的理论，这太长了。但是对于那些经历过的人来说，我的问题是，我们采用姿态的旋转矩阵来将此旋转应用于我们的坐标。好的，到这里为止都很好，但 Core Motion 似乎无法使其适应横向模式。我在这个主题上看到了类似的问题，但似乎没有人有解决方案。

所以我试着自己做，这是我的想法：

每次我们将设备旋转到横向时，都会进行 +-90° 的旋转（取决于横向左或右）。我决定创建一个 4X4 旋转矩阵来应用这种旋转。然后乘以cameraTransform矩阵（姿态的3X3 CMRotationMatrix到4X4的自适应），我们得到矩阵cameraTransformRotated：

```
- (void)createMatLandscape{
switch(cameraOrientation){
    case UIDeviceOrientationLandscapeLeft:
        landscapeRightTransform[0] = cos(degreesToRadians(90));
        landscapeRightTransform[1] = -sin(degreesToRadians(90));
        landscapeRightTransform[2] = 0;
        landscapeRightTransform[3] = 0;

        landscapeRightTransform[4] = sin(degreesToRadians(90));
        landscapeRightTransform[5] = cos(degreesToRadians(90));
        landscapeRightTransform[6] = 0;
        landscapeRightTransform[7] = 0;

        landscapeRightTransform[8] = 0;
        landscapeRightTransform[9] = 0;
        landscapeRightTransform[10] = 1;
        landscapeRightTransform[11] = 0;

        landscapeRightTransform[12] = 0;
        landscapeRightTransform[13] = 0;
        landscapeRightTransform[14] = 0;
        landscapeRightTransform[15] = 1;

        multiplyMatrixAndMatrix(cameraTransformRotated, cameraTransform, landscapeRightTransform);
        break;
    case UIDeviceOrientationLandscapeRight:
        landscapeLeftTransform[0] = cos(degreesToRadians(-90));
        landscapeLeftTransform[1] = -sin(degreesToRadians(-90));
        landscapeLeftTransform[2] = 0;
        landscapeLeftTransform[3] = 0;

        landscapeLeftTransform[4] = sin(degreesToRadians(-90));
        landscapeLeftTransform[5] = cos(degreesToRadians(-90));
        landscapeLeftTransform[6] = 0;
        landscapeLeftTransform[7] = 0;

        landscapeLeftTransform[8] = 0;
        landscapeLeftTransform[9] = 0;
        landscapeLeftTransform[10] = 1;
        landscapeLeftTransform[11] = 0;

        landscapeLeftTransform[12] = 0;
        landscapeLeftTransform[13] = 0;
        landscapeLeftTransform[14] = 0;
        landscapeLeftTransform[15] = 1;

        multiplyMatrixAndMatrix(cameraTransformRotated, cameraTransform, landscapeLeftTransform);
        break;
    default:
        cameraTransformRotated[0] = cameraTransform[0];
        cameraTransformRotated[1] = cameraTransform[1];
        cameraTransformRotated[2] = cameraTransform[2];
        cameraTransformRotated[3] = cameraTransform[3];

        cameraTransformRotated[4] = cameraTransform[4];
        cameraTransformRotated[5] = cameraTransform[5];
        cameraTransformRotated[6] = cameraTransform[6];
        cameraTransformRotated[7] = cameraTransform[7];

        cameraTransformRotated[8] = cameraTransform[8];
        cameraTransformRotated[9] = cameraTransform[9];
        cameraTransformRotated[10] = cameraTransform[10];
        cameraTransformRotated[11] = cameraTransform[11];

        cameraTransformRotated[12] = cameraTransform[12];
        cameraTransformRotated[13] = cameraTransform[13];
        cameraTransformRotated[14] = cameraTransform[14];
        cameraTransformRotated[15] = cameraTransform[15];

        break;
}
} 
```

然后就在我们更新所有要点之前，我这样做：

```
multiplyMatrixAndMatrix(projectionCameraTransform, projectionTransform, cameraTransformRotated); 
```

之后其余代码保持不变，我只希望注释以横向正确显示。现在这是我唯一的想法，横向渲染不好，我将设备向右或向左移动，注释向下或向上（就像我没有添加此代码时一样）。

有没有人提出解决方案？我将继续搜索，尤其是在 CMRotationMatrix 上，它似乎不是典型的旋转矩阵，我找不到任何文档准确说明该矩阵的不同元素是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:31:01.813

I just managed to adapt this (Apple's pARk sample) to landscape (right) yesterday and would like to share the changes made. It appears to work correctly, but please call out any mistakes. This only supports landscape right but can probably be adapted easily for left.

In ARView.m,

In -(void)initialize, switch the bounds height and width

```
createProjectionMatrix(projectionTransform, 60.0f*DEGREES_TO_RADIANS, self.bounds.size.height*1.0f / self.bounds.size.width, 0.25f, 1000.0f); 
```

In -(void)startCameraPreview

```
[captureLayer setOrientation:AVCaptureVideoOrientationLandscapeRight]; 
```

In -(void)drawRect:

```
//switch x and y
float y = (v[0] / v[3] + 1.0f) * 0.5f; 
float x = (v[1] / v[3] + 1.0f) * 0.5f;

poi.view.center = CGPointMake(self.bounds.size.width-x*self.bounds.size.width, self.bounds.size.height-y*self.bounds.size.height); //invert x 
```

# python - 在 osx 10.6 上为 Maya 2013 构建 pyqt 时出现 ld 库错误

> ID：13432288
> 
> 赞同：1
> 
> 时间：2012-11-17T16:09:19.900
> 
> 标签：python, qt, pyqt, maya, python-sip

我遇到与此[PyQt 配置和安装错误类似的错误](https://stackoverflow.com/questions/10571796/pyqt-configuration-and-installation-error)

我真的需要弄清楚，而不是使用提供的软件包作为原始帖子问题的解决方案（我需要控制我的开发环境的安装位置。谁能阐明安装没有找到什么以及为什么？

以下命令用于构建 python、qt、sip 和 pyqt。

我主要尝试将这些说明用作指南[http://images.autodesk.com/adsk/files/pyqtmaya2013.pdf](http://images.autodesk.com/adsk/files/pyqtmaya2013.pdf)

```
# build python as a linux style package
cd /4degrees/users/medwards/src
tar xvfz /Users/medwards/Desktop/python/Python-2.6.4.tgz
cd Python-2.6.4
./configure --enable-shared --prefix=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4
make
sudo make install

export PATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4bin:$PATH
export PYTHONPATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4/lib/python2.6/site-packages:$PYTHONPATH
export LD_LIBRARY_PATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4/lib:$LD_LIBRARY_PATH

# build QT
cd /4degrees/users/medwards/src
tar xzf /Users/medwards/Desktop/python/Qt-4.7.1-Maya/qt-adsk-4.7.1.tgz
cd qt-adsk-4.7.1
./configure -prefix /4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1 -arch x86_64 -debug-and-release -no-rpath -silent -no-qt3support
make -j 4 >& build.log
sudo make install

# build sip
export PATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4bin:$PATH
export PYTHONPATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4/lib/python2.6/site-packages:$PYTHONPATH
export LD_LIBRARY_PATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4/lib:$LD_LIBRARY_PATH
export PATH=/4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1/bin:$PATH

cd /4degrees/users/medwards/src
tar -zxvf /Users/medwards/Desktop/python/sip-4.13.3.tar.gz
cd sip-4.13.3
/Applications/Autodesk/maya2013/Maya.app/Contents/bin/mayapy ./configure.py -b /4degrees/prod/lib/MacOSX_X86_64/sip/4.13.3/mayapy2013/bin -d /4degrees/prod/lib/MacOSX_X86_64/sip/4.13.3/mayapy2013/site-packages -e /4degrees/prod/lib/MacOSX_X86_64/sip/4.13.3/mayapy2013/include -v /4degrees/prod/lib/MacOSX_X86_64/sip/4.13.3/mayapy2013/sip
make
sudo make install

# build pyqt
export PATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4bin:$PATH
export PYTHONPATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4/lib/python2.6/site-packages:$PYTHONPATH
export LD_LIBRARY_PATH=/4degrees/prod/lib/MacOSX_X86_64/python/2.6.4/lib:$LD_LIBRARY_PATH
export PATH=/4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1/bin:$PATH
export PATH=/4degrees/prod/lib/MacOSX_X86_64/sip/4.13.3/mayapy2013/bin:$PATH
export PYTHONPATH=/4degrees/prod/lib/MacOSX_X86_64/sip/4.13.3/mayapy2013/site-packages:$PYTHONPATH

cd /4degrees/users/medwards/src
tar -zxvf /Users/medwards/Desktop/python/PyQt-mac-gpl-4.9.4.tar.gz
cd PyQt-mac-gpl-4.9.4

# change inc_path = [sipcfg.py_inc_dir] to inc_path = [sipcfg.py_inc_dir,sipcfg.sip_inc_dir] in PyQt-mac-gpl-4.9.4/configure.py

/Applications/Autodesk/maya2013/Maya.app/Contents/bin/mayapy configure.py LIBDIR_QT=/4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1/lib INCDIR_QT=/4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1/include MOC=/4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1/bin/moc -b /4degrees/prod/lib/MacOSX_X86_64/python/mayapy2011/bin -d /4degrees/prod/lib/MacOSX_X86_64/python/mayapy2013/lib/python2.6/site-packages -v /4degrees/prod/lib/MacOSX_X86_64/sip/4.13.3/mayapy2013/sip --no-designer-plugin --use-arch=x86_64 -w

# edit qtdirs.out and replace /Users/warnold/qt/qt-4.7.1 with /4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1

make -j 4
sudo make install 
```

在制作期间，我最终得到了一些类似的东西

```
...-L/4degrees/users/medwards/src/PyQt-mac-gpl-4.9.4/qpy/QtCore -L/4degrees/prod/lib/MacOSX_X86_64/Qt/4.7.1/lib -lqpycore -lQtCore
ld: library not found for -lQtCore
collect2: ld returned 1 exit status
make[1]: *** [QtCore.so] Error 1
make: *** [all] Error 2 
```

# java - 使用 ProGuard 和 Maven 混淆 Java 代码：测试类和 ClassNotFoundError

> ID：13432291
> 
> 赞同：2
> 
> 时间：2012-11-17T16:09:45.443
> 
> 标签：java, maven, maven-2, proguard

我想用 ProGuard 混淆我的库，并将以下代码添加到`pom.xml`：

```
<build>
    <plugins>
        ...
        <plugin>
            <groupId>com.pyx4me</groupId>
            <artifactId>proguard-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>proguard</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <options>
                    <option>-allowaccessmodification</option>
                    <option>-keep class mypackage.AbstractSimulationFacadeTest</option>
                </options>
                <libs>
                    <lib>${java.home}/lib/rt.jar</lib>
                </libs>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

`mypackage.AbstractSimulationFacadeTest`是在 中定义的类`src/test/java`。它用于单元测试。

当我运行时`mvn install`，ProGuard 抱怨它找不到类`mypackage.AbstractSimulationFacadeTest`：

```
[proguard] Note: the configuration refers to the unknown class 'mypackage.AbstractSimulationFacadeTest'
[proguard] Note: there were 1 references to unknown classes.
[proguard]       You should check your configuration for typos.
[proguard] Error: The output jar is empty. Did you specify the proper '-keep' options? 
```

当我删除线

```
<option>-keep class mypackage.AbstractSimulationFacadeTest</option> 
```

并运行`mvn install`，我得到一个`ClassNotFoundError`for `mypackage.AbstractSimulationFacadeTest`。

我应该如何更改我的`pom.xml`文件以使`mvn install`运行没有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:15:49.787

尝试迁移到新版本的 pro guard 插件。您使用的是默认版本，即 2.0.4。[快速搜索一下 maven](http://search.maven.org/#search%7Cga%7C1%7Ca%3a%22proguard-maven-plugin%22) ，发现 GitHub 上有一个更新的版本，但是在不同的 group id 下：

```
<groupId>com.github.wvengen</groupId>
<artifactId>proguard-maven-plugin</artifactId>
<version>2.0.6</version> 
```

这应该让您使用 ProGuard 4.8，它可能会解决这个问题。

此外，查看[Pro Guard 文档](http://proguard.sourceforge.net/index.html#manual/usage.html)，您的 -keep 选项应该是您正在构建的工件（src/main/java 中的代码）的入口点，而不是测试用例的入口点。

最后，在我看来，您已经将抽象测试用例从 src/main/java 移至 src/test/java。如果是这种情况，您可能需要执行*mvn clean install*来清理目标目录。Pro Guard 可能会从项目的先前版本中找到旧类。

# arm - “银行”是什么意思？

> ID：13432297
> 
> 赞同：41
> 
> 时间：2012-11-17T16:10:53.723
> 
> 标签：arm, cpu

阅读 Wikipedia 上的“ARM Architecture”，发现以下语句：

> 寄存器 R0-R7 在所有 CPU 模式下都是相同的；他们从来没有银行。
> 
> R13 和 R14 在除系统模式之外的所有特权 CPU 模式中存储。

银行注册是什么意思？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-17T16:12:53.993

> 注册银行是指在同一地址提供多个注册副本。

取自 arm [docs的第 1.4.6 节](http://www.cl.cam.ac.uk/research/srg/han/ACS-P35/zynq/arm_gic_architecture_specification.pdf)

该术语是指无法同时看到所有寄存器的问题的解决方案。

> 每种处理器模式都有不同的寄存器组。分组寄存器为处理处理器异常和特权操作提供了快速的上下文切换。

如果您正在寻找更理论的推理，我推荐[这篇](http://scale.eecs.berkeley.edu/papers/bankedreg-isca2003.pdf)论文。[编辑：这里](https://electronics.stackexchange.com/questions/102742/what-does-banking-mean-when-applied-to-registers/102743#102743)
给出了比我更深刻的答案

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-14T17:34:00.540

当处理器进入异常时，组中*的寄存器*会自动与另一组这些寄存器进行切换。

实际上，异常处理程序例程不必将这些寄存器保存在堆栈上，以防止它们稍后被破坏（由异常处理程序函数）。处理器只保留该集合的安全副本；并将在异常返回时恢复原始集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-19T09:09:14.447

这个剪辑很好地解释了它 [https://youtu.be/7LqPJGnBPMM?t=1419](https://youtu.be/7LqPJGnBPMM?t=1419)

分组寄存器是当前执行模式不需要且可访问的寄存器。当执行模式改变时，新模式所需的寄存器将变得可用。

# jquery - 使用 mouseenter 的 jQuery 下拉菜单

> ID：13432299
> 
> 赞同：0
> 
> 时间：2012-11-17T16:11:28.890
> 
> 标签：jquery, css

你好朋友，我是 jquery 的新手，正在尝试开发一个下拉菜单，我遇到了一些问题。我有三个主链接，当用户将鼠标悬停在服务选项卡上时会出现下拉菜单，但我的下拉菜单出现在悬停每个主选项卡以进行演示时，请单击[链接](http://jsfiddle.net/5e3At/)。我还在下面提到了我的代码

**脚本**

```
$('.navi_top ul > li').mouseenter(function(){
            $('.navi_top ul > li ul').slideDown()});

        $('.navi_top ul > li').mouseleave(function(){
            $('.navi_top ul > li ul').slideUp()}); 
```

当您通过此链接时，我知道发生了什么。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:33:05.957

嗨，在您的脚本中，您正在输入链接，但没有滑动目标 ul 的子项。所以你应该这样做，这将完美地检查这一点：http: [//jsfiddle.net/5e3At/2/](http://jsfiddle.net/5e3At/2/)

```
$('.navi_top ul li').mouseenter(function(){
  $('ul',this).stop().slideDown();
});

$('.navi_top ul li').mouseleave(function(){
  $('ul',this).stop().slideUp();
}); 
```

# bluetooth - 蓝牙低功耗 INSTALL_FAILED_MISSING_SHARED_LIBRARY

> ID：13432301
> 
> 赞同：0
> 
> 时间：2012-11-17T16:11:39.447
> 
> 标签：bluetooth, bluetooth-lowenergy

我有麻烦。我想在我的项目中使用蓝牙低功耗，我选择“打开蓝牙低功耗 API [Android 2.3.3]”SDK 创建项目。但它不起作用。它抛出的异常如下： **安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY 请检查 logcat 输出以获取更多详细信息。发射取消！**

**这样的配置在我的工程中想找个sample可以参考，当我在“samples\android-10\BluetoothChat\src\com\example\android\BluetoothChat”中找到一个sample时，发现不是我的需要。它与蓝牙低功耗无关。为什么 Android SDK 中没有低功耗蓝牙示例？谁能给我样品？或者告诉我怎么做？请帮助我，非常非常感谢！**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:18:32.223

Have look on this topic [How to use Broadcom BLE SDK (SMART 4.0) in Android 4.X](https://stackoverflow.com/questions/11311947/how-to-use-broadcom-ble-sdk-smart-4-0-in-android-4-0)

Android doesn't have a BLE library ready to use. You could try specific [Broadcom](http://code.google.com/p/broadcom-ble/) and Motorola library, but the Bluetooth phone chip must be compatible.

In others words : No BLE support on Android at this time.**

# html5-video - 删除 Video.js 中控件添加的额外高度

> ID：13432303
> 
> 赞同：1
> 
> 时间：2012-11-17T16:12:13.263
> 
> 标签：html5-video, video.js

我正在尝试使用 video.js 在我的网站中嵌入视频。

我已经安装了脚本并且工作完美，几乎！

我遇到的问题是，当您加载页面，然后播放视频，然后停止视频时，视频顶部有一条大黑线。

这被控制栏添加到容器的顶部（和底部） - 假设控件不会切入视频。

但是，我不希望添加这个额外的高度。有谁知道如何阻止这个被添加？

# android - 微调器中的清晰信息

> ID：13432304
> 
> 赞同：0
> 
> 时间：2012-11-17T16:12:20.547
> 
> 标签：android

```
spinner1= (Spinner) findViewById(R.id.Select1);
        spinner2= (Spinner) findViewById(R.id.Select2); 
```

我有 2 个旋转器。2 号微调器取决于 1 号微调器。

我想要一种方法，我可以使用它来清除每次从数据库中检索到的微调器 2 的最旧信息。

因此，如果我在微调器 1 中选择项目，它将检索微调器 2 的信息，这取决于我第二次从微调器 1 中选择的项目，我想删除微调器 2 的最旧信息，然后检索新信息。

如果有可能，怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:17:48.320

我知道我搜索的答案，我找到了 list.clear(); 有一个方法调用 clear 你可以使用它希望它有帮助

# web-services - 如何使用 JAX-WS 生成 WSDL 2.0

> ID：13432306
> 
> 赞同：7
> 
> 时间：2012-11-17T16:12:37.863
> 
> 标签：web-services, wsdl, jax-ws, w3c

这个问题可能很愚蠢，但我还没有找到一种方法来获取由 JAX-WS RI Web 服务生成的 WSDL 2.0。

我一直在使用最新的 jax-ws 版本，如果我创建一个非常简单的 WS（例如下面的示例），生成的 WSDL 将是 1.1 版本。

```
 @WebService
    public interface RandomNumberGenerator {

        Integer getRandomNumber();

    }

    @WebService(endpointInterface="RandomNumberGenerator")
    public class RandomNumberGeneratorImpl {

       public Integer getRandomNumber() {
            return (int) (Math.random() * 1000);
       }    
    } 
```

有谁知道我如何明确告诉 JAX-WS 生成 WSDL 2.0？考虑到 2.0 是自 2007 年以来的 W3C 推荐，我非常有信心 JAX-WS 确实提供了一种生成它的方法。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:10:19.237

> 我非常有信心 JAX-WS 确实提供了一种生成它的方法。

恐怕，它没有。引用[JAX-WS 2.0 规范](http://download.oracle.com/otndocs/jcp/jaxws-2_0-fr-eval-oth-JSpec/)，第 2 页，目标部分：

> WSDL 2.0：W3C 预计在此 JSR 的生命周期内将 WSDL 2.0[11] 升级为推荐标准。JAX-WS 2.0 将增加对 WSDL 2.0 的支持，同时需要继续支持 WSDL 1.1。注意：JSR 专家组决定反对此版本的此目标。我们将着眼于在 JAX-WS 规范的未来修订版中添加支持。

这意味着 JAX-WS 2.0 中将没有 WSDL 2.0 支持，这就是参考实现不提供它的原因。Afaik，目前在这方面没有太大进展。

如果您希望 WSDL 2.0 沿用 JAX-WS，您将不得不使用另一个堆栈，例如[Axis2](http://axis.apache.org/axis2/java/core/)。

# php - JS - 使用路径时来自数组 php 的 PHP JSON 错误

> ID：13432308
> 
> 赞同：0
> 
> 时间：2012-11-17T16:12:45.377
> 
> 标签：php, javascript, arrays, json, path

我在萤火虫中有一个错误：

```
SyntaxError: missing ] after element list
var o99_images = [ C:\Documents and Settings\XXXX\Desktop\xampp\htdocs\www.s
--------------------^ 
```

有问题的 var 是一个路径数组 (local) 。一个示例数组如下所示：

```
var o99_images = [C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\2000501.freddy.lulu.milano.jpg,C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\4147941_460s.jpg,C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\732331_26687367.jpg]; 
```

我绝不是 javascript master ，但我怀疑问题是路径本身作为字符串（可能是`:`? ）因为当我只对数字数组执行相同操作时（例如`var o99_images = [12,14,15,18]`没有问题..

这是 JSON 函数：

```
function O99_Do_Action( id ) {
                $.ajax({
                    type: 'POST',
                    url: ajaxurl,
                    data: { action: "ajaxresponse", id: id },
                    success: function( response ) {
                        if ( response.success ) {
                            O99_Do_ActionUpdateStatus( id, true, response );
                        }
                        else {
                            O99_Do_ActionUpdateStatus( id, false, response );
                        }

                        if ( o99_images.length && o99_continue ) {
                            O99_Do_Action( o99_images.shift() );
                        }
                        else {
                            O99_Do_ActionFinishUp();
                        }
                    },
                    error: function( response ) {
                        O99_Do_ActionUpdateStatus( id, false, response );

                        if ( o99_images.length && o99_continue ) {
                            O99_Do_Action( o99_images.shift() );
                        } 
                        else {
                            O99_Do_ActionFinishUp();
                        }
                    }
                });
            } 
```

在此之前，变量：

```
jQuery(document).ready(function($){
            var i;
            var o99_images = [<?php echo $ids; ?>];
            var o99_total = o99_images.length;
            var o99_count = 1;

                        //... continue vars and function 
```

如您所见，`var`问题是在 php.ini 中生成的。（内爆（）字符串与`,`）

那么路径字符串本身就是问题吗？如果是这样，一个人怎么能通过这样一个 var 的路径？

**已解决：** 感谢@Aatif Farooq 让我走上了正轨，答案是 json_encode() 可以处理 quores`"`和转义问题`//`..

当我搜索`addslashes()`php 函数时，我找到了`json_encode()`.. 同时，@slashingweapon 做对了..

```
echo json_encode($ids); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:17:32.443

路径实际上是一个字符串，因此您应该将路径用单引号或双引号引起来。像：

```
'c://any-path/to/file.php' 
```

在您的情况下，它应该是：

```
var o99_images = ['C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\2000501.freddy.lulu.milano.jpg','C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\4147941_460s.jpg','C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\732331_26687367.jpg']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:17:50.020

文本/字符串数据必须添加在单引号或双引号之间，如下所示：

```
var o99_images = ['C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\2000501.freddy.lulu.milano.jpg', 'C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\4147941_460s.jpg,C:\Documents and Settings\XX\XX\xampp\htdocs\XX\XX\uploads\images_to_post\732331_26687367.jpg']; 
```

它适用于数字`[5, 88, 8]`，因为数字不需要添加在引号内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T16:36:11.863

您的问题在于如何对数据进行编码。PHP 提供了一个非常有用的函数，`json_encode()`当您想将 PHP 数据转换为 Javascript 文字时，您应该使用该函数。

例如，如果要将字符串转换为 Javascript 字符串：

```
php > $x = 'C://some/series/of/path/segments';
php > echo json_encode($x);
"C:\/\/some\/series\/of\/path\/segments" 
```

如果您想将字符串数组转换为 Javascript 字符串数组：

```
php > $x = array('a', 'b', 'c');
php > echo json_encode($x);
["a","b","c"] 
```

您甚至可以对数字、布尔值和复杂对象执行此操作。任何引用、转义和编码都会得到处理。这个技巧适用于任何可以序列化的 PHP 数据。它不适用于循环对象或资源，但其他一切都是公平的游戏。

因此，您可能不应该使用`implode()`您的数据，而是将其保留为数组。那么代码应该是：

```
jQuery(document).ready(function($){
    var i;
    var o99_images = <?php echo json_encode($ids); ?>;
    var o99_total = o99_images.length;
    var o99_count = 1; 
```

# angularjs - ng-cloak 和 ng-show 在屏幕上闪烁隐藏元素

> ID：13432311
> 
> 赞同：18
> 
> 时间：2012-11-17T16:13:24.157
> 
> 标签：angularjs

我有一个 div 元素，我只想在我的项目列表为空时显示。所以我输入了以下内容（在haml中）：

```
 #no-items.ng-cloak{ :ng_show => "items.length <= 0", :ng_cloak => true } 
```

但是，即使在我完成之后，该元素仍在屏幕上闪烁。然后我看到了[Angularjs - ng-cloak/ng-show elements blink](https://stackoverflow.com/questions/11249768/angularjs-ng-cloak-ng-show-elements-blink)，但即使在我的 CSS 中添加了以下内容后，仍然会出现闪烁。

```
[ng\:cloak], [ng-cloak], .ng-cloak {
  display: none !important;
} 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-06T16:06:15.707

您可以将 ng-hide 放在类中，而不会影响 JS 加载后的工作方式。但是，将它放在那里很有用，以便 CSS 在等待 JS 加载时考虑它。

```
<div data-ng-controller="RoomsController">
<div ng-cloak class="ng-cloak ng-hide" data-ng-if="visible" >
    Some text
</div>        
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-11T21:54:12.100

确保上面显示的 ng-cloak CSS 在页面开头加载。

这应该是您需要做的所有事情：

```
<div ng-hide="items.length" ng-cloak>no items</div> 
```

样品[小提琴](http://jsfiddle.net/mrajcok/bbmvJ/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T09:55:39.837

没有一个解决方案对我有用。我找到的唯一解决方案如下：

在每个控制器中，添加：

```
$scope.$on('$viewContentLoaded', function () {
            $scope.completed = true;
}); 
```

并在每个视图的 html 中，将 ng-if="completed" 添加到最顶层元素。例如：

```
<div ng-if="completed"> 
```

注意：问题仅限于**firefox**和**ui-router**。在那里，ng-cloak 被忽略并且没有 css 解决方法。唯一对我有用的解决方案是我上面给出的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-21T10:45:10.550

目前有一个未解决的问题： [https ://github.com/angular/angular.js/issues/14015](https://github.com/angular/angular.js/issues/14015)

这种解决方法对我有用：

```
.ng-hide.ng-hide-animate {
    display: none !important;
} 
```

# erlang - 将磁盘节点加载到ram节点中？

> ID：13432316
> 
> 赞同：2
> 
> 时间：2012-11-17T16:14:19.923
> 
> 标签：erlang, mnesia

我没有得到的东西，我有两个 mnesia 节点。一个有内存，另一个有光盘副本。

我的问题是：

您确实创建过一次架构吗？但是模式是您输入节点的地方。

我很困惑，发现没有很好的文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:16:24.613

让我们从澄清概念开始。一个 mnesia 集群由节点和表组成；节点可能有表的副本。副本的类型，可以是`ram_copies`、`disc_copies`和`disc_only_copies`，适用于给定节点上的给定表。一个节点可能有不同类型的不同表的副本，一个表可能在不同的节点上有不同类型的副本。一个特殊情况是根本没有基于磁盘的副本的节点。它被称为 ram only 节点。

模式是一个特殊的表，用于存储有关节点和表的信息。集群中的每个节点都必须有这张表的副本；ram 只有节点显然有一个 ram 副本，其他节点有一个磁盘副本。准确地说，节点必须具有模式的磁盘副本才能拥有任何其他表的基于磁盘的副本。

当你调用 时`mnesia:create_schema`，你正在创建一个没有表的模式的磁盘副本，由 mnesia 在启动时加载（如果 mnesia 已经启动，此函数将拒绝工作）。如果您的集群包含多个基于磁盘的节点，则同时在所有这些节点上创建模式，并且当在这些节点上启动 mnesia 时，它们会自动相互连接（节点从模式中相互了解）。

当 mnesia 在启动时无法从磁盘加载模式时，它会在 ram 中为自己创建一个空的模式（或拒绝启动，取决于设置）。之后，您可以通过调用`mnesia:change_config`集群的基于磁盘的节点将其转换为仅 ram 节点，在这种情况下，将替换空模式并且该节点将与集群的其余部分同步，或者您可以开始创建表并添加其他仅 ram 节点（仍然具有空模式），构建仅 ram 集群。

`mnesia:chang_table_copy_type`通过调用table可以将仅 ram 节点变成磁盘节点`schema`。通过这种方式，您可以从头开始动态构建完整的基于磁盘的集群，而无需事先创建基于磁盘的模式。但是，如果您有一组固定的磁盘节点，那么在第一次启动集群之前静态初始化它们上的模式要容易得多。

# javascript - JavaScript 不验证表单

> ID：13432317
> 
> 赞同：0
> 
> 时间：2012-11-17T16:14:20.783
> 
> 标签：javascript, html, forms, validation

出于某种原因，我的 JavaScript 不会验证我的表单，我无法找出原因。我已经关注了许多网站（如 Tizag 和 W3C）的示例，但无济于事。

HTML 表单：

```
<form class='login' name='login' onsubmit='return loginValidation();' method='post' action='index.php'>
    <p>
       <input class='login' type='text' name='nameentry'/><br/>
       <input class='login' type='submit' value='Login'/>
    </p>

</form> 
```

JavaScript 函数：

```
 function loginValidation(){
    var x=document.form.login.nameentry.value;
    if(x==null || x==""){
        alert("Enter a name");
        return false;
    }
} 
```

我的代码可以在[这里](http://users.aber.ac.uk/gij2/cs25010/)看到[an assignment]。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:20:07.447

函数中的第二行应该是

```
var x=document.forms.login.nameentry.value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T16:28:38.307

您有一个正在杀死引擎的未关闭函数（或 for 块）：

```
function testAllQuantity(){
    for(i=0;i<150,i++){
      quantityValidation(document.getElementById(i));
    } 
```

并且 for 语句格式错误，`,`->`;`

```
for(i=0;i<150;i++){ 
```

# mysql - 如何根据地址与特定地址的距离过滤地址数据库的结果？

> ID：13432321
> 
> 赞同：0
> 
> 时间：2012-11-17T16:15:09.697
> 
> 标签：mysql, geolocation, maps

我的网站上有一个本地企业数据库。

本质上，我需要添加一个功能，用户可以在其中输入他们的地址和一个“最大距离”过滤器，并且只有在距他们返回的地址的最大距离内的结果。

哪个库/程序/api/具有我需要的功能？

我研究了 google maps api，但这是不可行的，因为它们对距离矩阵计算的配额非常严格，每天 2500 个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:38:16.623

您需要使用数据库的“空间”功能。如果您的数据库服务器不支持它，请尝试为它找到一个“空间”插件。我不知道是否可以使用 mySql。使用 SQL Server 和 PostGIS。

例如，如果您的数据库是 SQL Server 2008：

在地址表中添加一个“地理”字段，并添加一个带有每个本地企业的地理坐标（纬度、经度）的点：

```
INSERT INTO @addressTable (GeographyColumn) VALUES (geography:STGeomFromText('POINT(longitude,latitude)' , 4326)) 
```

（值 4326 表示 WGS84 坐标系（由您的 GPS 使用））

然后在查询时使用客户端的坐标创建一个对象：

```
DECLARE @client geography
SET @client = geography::STPointFromText('POINT (longitude, latitude)', 4326)

SELECT * 
FROM addressTable
ORDER BY Location.STDistance(@client) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:24:23.250

您可以获得两个地址的 latLong（使用 google maps api 上的 geoCoding），然后您可以将它们与 mysql 查询进行比较。
查看此[Google 搜索页面](http://goo.gl/95IQr)以获取有关如何在指定距离内或距离查找中点的 Stack Exchange 问题列表。

# php - PHP 在访问 NULL 对象的属性时不会引发异常？

> ID：13432323
> 
> 赞同：2
> 
> 时间：2012-11-17T16:15:18.723
> 
> 标签：php

我注意到当我尝试从 NULL 对象访问属性时，PHP 不会引发异常。它是否正确？我希望会像其他语言一样出现某种错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T16:23:19.290

不，只是访问未定义成员的警告。如果您愿意，可以使用[__get()](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)魔术函数手动将异常添加到您的类中：

```
class foo {

    public function __get( $name )
    {
        throw new Exception($name . ' does not exist in foo');
    }       
} 
```

现在，班级将按照您的预期行事。

```
$bar = new foo();
$x =  $bar->something; 
```

回响：

```
Fatal error: Uncaught exception 'Exception' with message 'something does not exist in foo' in C:\web\xampp\htdocs\stupid2.php:7 Stack trace: #0 C:\web\xampp\htdocs\stupid2.php(14): foo->__get('something') #1 {main} thrown in C:\web\xampp\htdocs\test.php on line 7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:17:33.967

报错，通知更正

```
<?php

error_reporting(-1);

$var = null;
$var->prop;

echo 'Hello!'; 
```

结果是：

```
Notice: Trying to get property of non-object in /..../prog.php on line 6
Hello! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T16:18:29.813

您应该会收到一个 PHP 通知警告，它看起来像这样：

```
PHP Notice:  Trying to get property of non-object in [...] 
```

如果没有，您应该检查您的错误设置。在开发中，尝试设置

```
error_reporting(-1); 
```

为了查看所有 PHP 错误/警告/通知，以便您可以尽可能地修复您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T16:34:31.947

异常处理从版本 5 开始引入，并没有为所有内置函数实现。
如果您想获取异常，您可以随时检查变量是否为 null 或不是对象，并抛出可由 catch 块处理的自定义异常。

要获取错误、警告和通知，您可以使用 PHP.ini 文件的开发版本。或者只是搜索 php.ini 文件，`Error handling and logging`在其中查找部分并将其设置`error_reporting`为`E_ALL`，查找`display_errors`并将其设置为`on`。然后重新启动您的网络服务器以使设置生效。

# jquery - Jquery fadeIn 在 Chrome 中滞后

> ID：13432329
> 
> 赞同：2
> 
> 时间：2012-11-17T16:16:14.117
> 
> 标签：jquery, html, css, fadein

我正在尝试制作一个图片库。当我单击图像时，我会调整它的大小并将其淡入。它在 Firefox 和 Internet Explorer 中运行良好，但在 Chrome 中却滞后。我尝试了几天来解决问题，但找不到答案。我缩小了我认为的css的问题。如果我删除类'.resize'，它会调整图像以适应页面，它看起来很糟糕，但它工作正常。这个问题只发生在大图像上。我尝试了 .load()，但它似乎不起作用。对我来说最荒谬的想法是，没有那个类，一切正常。

这是我的代码：

HTML：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Gallery</title>
    <link rel="stylesheet" href="Gallery.css">
</head>
<body>

<div class="gallery">
    <div class="images">
        <ul class="resize">
            <li><img src="img/img1.jpg" alt="image1"></li>
            <li><img src="img/img2.jpg" alt="image2"></li>
            <li><img src="img/img3.jpg" alt="image3"></li>
            <li><img src="img/img4.jpg" alt="image4"></li>
            <li><img src="img/img5.jpg" alt="image5"></li>
            <li><img src="img/img6.jpg" alt="image6"></li>
            <li><img src="img/img7.jpg" alt="image7"></li>
            <li><img src="img/img8.jpg" alt="image8"></li>
        </ul>
    </div>
    <div class="clear"></div>
    <div class="backgroundOpacity"></div>
    <div class="imageBox">
        <img class="displayImage" src="" alt="displayImage">
        <img class="loadingGif" src="img/loading.gif" alt="loadgindGif">
        <img class="closeImage" src="img/closeImage.png" alt="close">
        <p class="imageNumber">1</p>
    </div>
</div>

<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="Gallery.js"></script>
<script type="text/javascript">
window.onload = function(){
    var content = $('.gallery'),
        gallery = new Gallery(content);
}
</script>

</body>
</html> 
```

的CSS：

```
*{
    margin: 0;
    padding: 0;
}
/*-------------------------gallery-----------------------*/
.gallery{
    width: 1400px;
    margin: 100px auto 0;
}
/*------------------------------------------------*/
/*-------------------------images-----------------------*/
.images{
    width: inherit;
    height: inherit;
}
.images li{
    list-style-type: none;
    float: left;
    margin: 0 20px 20px 0;
    width: 300px;
    height: 150px;
    cursor: pointer;
    padding: 5px;
    border: solid 1px #CCC;
    -moz-box-shadow: 1px 1px 5px #999;
    -webkit-box-shadow: 1px 1px 5px #999;
    box-shadow: 1px 1px 5px #999;
}
.resize img{
    width: 300px;
    height: 150px;
}
/*------------------------------------------------*/
/*-------------------------imageBox-----------------------*/
.imageBox{
    background-color: white;
    clear: both;
    width: 300px;
    height: 150px;
    display: none;
    position: fixed;
    overflow: visible;
}
.backgroundOpacity{
    background-color: black;
    width: 5000px;
    height: 5000px;
    position: fixed;
    left: 0px;
    top: 0px;
    opacity: 0.7;
    display: none;
}
.loadingGif{
    display: block;
    position: absolute;
}
.displayImage{
    display: none;
}
.closeImage{
    position: absolute;
    top: -10px;
    right: -10px;
    cursor: pointer;
}
.imageNumber{
    position: absolute;
    bottom: 0px;
    left: 0px;
    font-family: sans-serif;
    font-size: 18px;
    font-weight: bold;
    opacity: 0.6;
}
/*------------------------------------------------*/
.clear{
    clear: both;
} 
```

的JavaScript：

```
function Gallery (galleryDiv, resizeDuration, freeSpace) {
    this.config = {
        resizeDuration: 600,
        freeSpace: 100
    };

    this.galleryDiv = galleryDiv;

    this.imagesUl = this.galleryDiv.find('.images ul');
    this.images = this.imagesUl.find('img');
    this.backgroundOpacity = this.galleryDiv.find('.backgroundOpacity'); // the background div which when is clicked hides the imageBox
    this.imageBox = this.galleryDiv.find('.imageBox'); // where the images will be displayed when they'r clicked
    this.closeButton = this.imageBox.find('.closeImage'); // top-right x
    this.loadingGif = this.imageBox.find('.loadingGif'); // the animated gif that gives the effect of 'loading'
    this.imageNumber = this.imageBox.find('.imageNumber'); // bottom-left text
    this.displayImage = this.imageBox.find('.displayImage'); // image to be displayed

    this.currentImageIndex; // index of the current image
    this.imagesWidth = new Array(); // the images default widths
    this.imagesHeight = new Array(); // the images default heights
    this.imagesSrc = new Array(); // the location of the images
    this.imagesLength = this.images.length // number of images
    this.imageBoxSize = new Array(); // [0] is width, [1] is height
    this.loadingGifSize = new Array() // [0] is width, [1] is height
    this.canceled; // if loading procress was canceled this variable will alert the show function

    this.freeSpace = freeSpace || this.config.freeSpace; // spcea between imageBox and window
    this.resizeDuration = resizeDuration || this.config.resizeDuration; // duration to resize imageBox

    this.init();
};

Gallery.prototype.init = function () { // puts things in move
    this.getImageAttributes().bind();

    return this;
};

Gallery.prototype.bind = function () { // bind events 
    var self = this;
    this.images.on('click', function () {
        self.currentImageIndex = $(self.images).index( $(this) );
        self.canceled = 0;
        self.showImage();
    });

    $(window).on('resize', function () { // center the imagebox whenever the window is resized
        self.centerImageBox(self.imageBoxSize[0], self.imageBoxSize[1]);
    });

    $(this.closeButton).on('click', function () { // hide the image
        self.hideImage();
    });

    $(this.backgroundOpacity).on('click', function () {
        self.hideImage();
        self.canceled = 1;
    });

    return this;
};

Gallery.prototype.getImageAttributes = function () { // get the default images sizes
    var self = this;

    this.imagesUl.removeClass('resize');
    $.each(this.images, function (index, value) {
        self.imagesWidth[index] = value.width;
        self.imagesHeight[index] = value.height;
        self.imagesSrc[index] = $(value).attr('src');
    });
    this.imagesUl.addClass('resize');

    this.imageBox.show();
    this.loadingGifSize = [this.loadingGif.width(), this.loadingGif.height()];
    this.imageBox.hide();

    return this;
};

Gallery.prototype.showImage = function () { // shows the image when it is clicked
    var self = this,
        index = this.currentImageIndex,
        imageSize = new Array(), // [0] is width, [1] is height,
        imageBoxHeight, imageBoxWidth;
    //show imageBox and resize it
    imageSize = this.resizeImage();
    this.imageBoxSize = [imageSize[0], imageSize[1]]; // captures the current imageBox size
    this.imageNumber.text('Image ' + (index+1) + ' of ' + this.imagesLength); // set bottom-left text
    this.displayImage.attr('src', this.imagesSrc[index]).css({
        'width': imageSize[0],
        'height': imageSize[1]
    });
    this.backgroundOpacity.show();
    this.imageBox.show();
    this.loadingGif.show();

    this.imageBox.animate({
        'width': imageSize[0],
        'height': imageSize[1]
    },{
        duration: self.resizeDuration,
        step: function () {
            // center the image box with every resize;
            imageBoxWidth = self.imageBox.width();
            imageBoxHeight = self.imageBox.height();
            self.centerImageBox(imageBoxWidth, imageBoxHeight, 1);
            // center the loadingGif
            self.loadingGif.css({
                'right': (imageBoxWidth - self.loadingGifSize[0])/2,
                'top': (imageBoxHeight - self.loadingGifSize[1])/2
            });
        },
        complete: function () {
            if(!self.canceled){
                self.closeButton.show();
                self.imageNumber.show();
                self.loadingGif.hide();
                self.displayImage.fadeIn(500);
            }
                else self.hideImage();
        }
    });

    return this;
};

Gallery.prototype.hideImage = function () { // hide the image
    //reset imageBox and other elements atributes
    this.imageBox.css({
        'width': '300px',
        'height': '300px'
    });
    this.imageBox.hide();
    this.backgroundOpacity.hide();
    this.closeButton.hide();
    this.imageNumber.hide();
    this.displayImage.hide();

    return this;
};

Gallery.prototype.resizeImage = function () { // resize the image to the current monitor size
    var index = this.currentImageIndex,
        imageWidth = this.imagesWidth[index], imageHeight = this.imagesHeight[index],
        windowWidth = $(window).width(), windowHeight = $(window).height(),
        ratio = imageWidth / imageHeight;

    while(imageWidth > (windowWidth - this.freeSpace) || imageHeight > (windowHeight-this.freeSpace)){
        if(imageWidth > windowWidth){
            imageWidth = windowWidth - this.freeSpace;
            imageHeight = imageWidth / ratio;
        }
        else{
            imageHeight = windowHeight - this.freeSpace;
            imageWidth = imageHeight * ratio;
        }
    }

    return [imageWidth, imageHeight];
};

Gallery.prototype.centerImageBox = function (width, height, resize) { // if animated parameter is specified, the imageBox will not pe resized
    var windowWidth = $(window).width(),
        windowHeight = $(window).height(),
        index =  this.currentImageIndex,
        imageSize = new Array(), // [0] is width, [1] is height
        imageDefaultWidth = this.imagesWidth[index], imageDefaultHeight = this.imagesHeight[index];

    if(windowWidth < 200 || windowHeight < 200) this.imageBox.hide(); // if the window is too small, hide the imageBox, otherwise it looks silly
        else if(this.backgroundOpacity.css('display') === 'block') this.imageBox.show();
    this.imageBox.css({
        'right': (windowWidth - width)/2, 
        'top': (windowHeight - height)/2
    });
    // resize the image and the imageBox, if the imageBox is bigger than the window, or the image can be bigger
    if(!resize){
        imageSize = this.resizeImage();
        width = imageSize[0];
        height = imageSize[1];
        this.imageBoxSize = [width, height];

        this.imageBox.css({
            'width': width,
            'height': height,
            'right': (windowWidth - width)/2, 
            'top': (windowHeight - height)/2
        });
        this.displayImage.css({
            'width': imageSize[0],
            'height': imageSize[1]
        });
    }

    return this;
}; 
```

如果有人可以帮助我，我将不胜感激。

这里要求的是项目[http://jsfiddle.net/uaD5s/6/](http://jsfiddle.net/uaD5s/6/)的小提琴。应该从一开始就这样做，对不起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:05:31.067

通过稍微调整脚本，我找到了一种防止滞后的方法，无论图像大小如何。

我们不是在图像中淡入淡出，而是在图像顶部创建一个白色覆盖层

```
<div class="imageBox">
    <div class='cover'></div> // <<<< Added Cover Overlay
    <img class="displayImage" src="" alt="displayImage">
    <img class="loadingGif" src="img/loading.gif" alt="loadgindGif">
    <img class="closeImage" src="img/closeImage.png" alt="close">
    <p class="imageNumber">1</p>
</div> 
```

然后我们添加这个 CSS 来设置封面样式

```
.cover { 
     position:absolute;
     width:100%; height:100%;
     z-index:10;
     background-color:white;
     display:block;
 } 
```

最后，当图像完全显示时，我们 .fadeOut() 覆盖而不是像最初编写的那样淡入图像。

原来这个

```
 self.displayImage.fadeIn(500); 
```

现在这个

```
self.displayImage.show(function(){
   $('.cover').fadeOut(500);
     }); 
```

这是一个在行动中看到它的小提琴......

[**小提琴**](http://jsfiddle.net/videsignz/8tqbE/)

并确保封面被重置，这需要添加到“重置”功能

```
$('.cover').show(); 
```

这是应该添加的功能。

```
Gallery.prototype.hideImage = function () { // hide the image
    //reset imageBox and other elements atributes
    this.imageBox.css({
        'width': '300px',
        'height': '300px'
    });
    this.imageBox.hide();
    this.backgroundOpacity.hide();
    this.closeButton.hide();
    this.imageNumber.hide();
    this.displayImage.hide();
    $('.cover').show(); // <<<< Add the Script Here

    return this;
}; 
```

# html - 线块 div 之间不需要的空间

> ID：13432331
> 
> 赞同：1
> 
> 时间：2012-11-17T16:16:31.097
> 
> 标签：html, css

我有以下代码：
在 HTML

```
 ​&lt;div id="first" >​&lt;/div>  
 <div id="second"></div> 
```

在 CSS 中

```
​#first,#second {  
    background-color: red;  
    display: inline-block;  
    width:50px;  
    height:50px;  
    margin:0px;  
    padding:0px;  
    border: 0px;  
}​ 
```

我观察到无法删除的 div 之间的空间。有什么帮助吗？这是jsfiddle 源的[链接。](http://jsfiddle.net/4NQEm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:19:13.917

那是您在格式化 HTML 时包含的空格。您可以将父级的字体大小设置为零来解决此问题。

```
#container{
    font-size:0;
} 
```

另一种方法是像这样格式化您的 HTML：

```
​&lt;div id="first" >​&lt;  
/div><div id="second"></div
/div>... 
```

[http://jsfiddle.net/4NQEm/1/](http://jsfiddle.net/4NQEm/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:17:37.937

空格在 HTML 中，所以它会在输出中。尝试将它们推`</div><div id="second">`在一起，它们之间没有空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T11:42:51.897

或者，如果您不希望 HTML 完全混乱以避免`inline-block`显示的 div 之间出现空格，则可以使用 HTML 注释来连接 div，[正如我在此处以更详尽的方式描述的那样](https://stackoverflow.com/a/14776780/1654265)

```
 ​&lt;div id="first" >​&lt;/div><!--  
 --><div id="second"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T17:38:03.727

要删除两个 div 之间的空间，您需要设置第二个 div 负像素的 margin-left 属性检查此[链接](http://jsfiddle.net/4NQEm/5/)或

```
#second
{
    margin-left:-4px;
} 
```

# css - 重叠文本

> ID：13432334
> 
> 赞同：2
> 
> 时间：2012-11-17T16:17:07.387
> 
> 标签：css, html, text

我想知道在浏览器中缩小时如何使我的文本正确换行？我的意思是页面在正常缩放时看起来不错，但是当您按 Ctrl +“+”缩小时，它会重叠在其右侧的图像上。我已经尝试了 white-space:nowrap 但它没有给我想要的结果。你们中的任何人都可以帮帮我吗？一段时间以来一直在尝试解决这个问题，也是为了帮助你们更好地理解我附上了它的外观图片。

HTML:-

```
 <p class="aboutus-description">
 Integer tristique consequat nulla, sed convallis urna dictum sit amet. Ut at ligula dolor, id cursus sem. Nullam sed dolor eu.
 Ut ante nunc, posuere ac varius sit amet, bibendum non est. Morbi in arcu in felis pharetra sodales vitae non.
 Sed dictum cursus leo, sit amet semper est commodo in. Etiam.

 Nunc elit sem, bibendum ac laoreet quis, accumsan sed neque. Integer lacus nisi, lobortis faucibus ornare non, cursus non augue. Suspendisse.
 Vivamus hendrerit laoreet mauris ut molestie. Nullam auctor nulla ac ligula viverra nec adipiscing tellus eleifend. Duis ligula enim, semper eget
 Vestibulum erat diam, cursus ut semper sit amet, feugiat a erat. Praesent vestibulum, quam ac.
 Maecenas non risus dictum neque sodales commodo sed quis massa. Morbi mollis, odio. 
```

CSS：-

```
<style>
#content p.aboutus-description
   {
     font-family:Arial, Helvetica, sans-serif;
     font-size:10pt;
     color:#656565;
     position:absolute;
     left:80px;
     top:20px;
     width:747px;
     overflow-style:auto;
     white-space:nowrap;
     word-wrap:break-word;
   } 
```

图片：-

![在此处输入图像描述](../Images/057b8b201dd72417e9d3935671a466bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:29:22.277

您可以通过`float:left;`对内容和`float:right:`图像执行此操作，并删除 position:absolute from`#content p.aboutus-description`

# php - 出现错误消息时如何隐藏或不显示表单

> ID：13432335
> 
> 赞同：0
> 
> 时间：2012-11-17T16:17:23.600
> 
> 标签：php, javascript, html

我在[这里有一个实时应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/RAY_EE_public.php)

请按照以下步骤使用应用程序：

1.  当您打开应用程序时，立即单击“提交课程和模块”提交按钮。您将看到一条 javascript 错误消息显示“请选择课程和模块”。

2.  现在在课程下拉菜单中选择课程“INFO101....”，在模块下拉菜单中选择模块“CHI2513....”，然后单击提交按钮。

3.  您将在下面看到一个包含文本输入的表单显示，这很好。

4.  但这就是问题所在。现在，如果您查看课程和模块下拉菜单，它们都显示“请选择”。所以再次点击“提交课程和模块”提交按钮。现在它像在步骤 1 中一样显示错误消息，但它仍然显示下面的表单（文本输入）。如果出现错误消息，我不希望表单显示在下方。

所以我的问题几乎是，如果出现错误消息，有没有办法可以隐藏表单或不显示下面的表单。哪个是最佳实践？

下面是代码：

Javascript代码：

```
<script type="text/javascript">

     function validation() {

                var isDataValid = true;

                var courseTextO = document.getElementById("coursesDrop");
                var moduleTextO = document.getElementById("modulesDrop");

                var errModuleMsgO = document.getElementById("moduleAlert");

      if (courseTextO.value == "" && moduleTextO.value == ""){
          errModuleMsgO.innerHTML = "Please Select a Course and Module";
          isDataValid = false;
      } else if (courseTextO.value == ""){
          errModuleMsgO.innerHTML = "Please Select a Course";
          isDataValid = false;      
      }else  if (moduleTextO.value == ""){
          errModuleMsgO.innerHTML = "Please Select a Module";
          isDataValid = false;    
        }else{
                errModuleMsgO.innerHTML = ""; 
            }

            return isDataValid;

            }

    </script> 
```

以下是 HTML/php：

```
<h1>EDIT AN ASSESSMENT'S DATE/START TIME</h1>   

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?></th>
<th>Module: <?php echo $moduleHTML; ?></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" /></p>
<div id="moduleAlert"></div>
<div id="targetdiv"></div>
</form>

<?php

if (isset($_POST['moduleSubmit'])) {    

$outputmodule = ""; 

$moduleInfo = explode("_", $_POST['modules']);
$moduleId = $moduleInfo[0];
$moduleName = $moduleInfo[1];
$outputmodule = sprintf("<p><strong>Module:</strong> %s - %s</p>", $moduleId, $moduleName);

$editsession = "
<div id='rt-container'>
<form id='updateForm'>

    <p><strong>Current Assessment's Date/Start Time:</strong></p>
    <table>
    <tr>
    <th>Assessment:</th>
    <td><input type='text' id='currentAssessment' name='Assessmentcurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Date:</th>
    <td><input type='text' id='currentDate' name='Datecurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Start Time:</th>
    <td><input type='text' id='currentTime' name='Timecurrent' readonly='readonly' value=''/> </td>
    </tr>
    </table>
    <div id='currentAlert'></div>

    <p><strong>New Assessment's Date/Start Time:</strong></p>
    <table>
    <tr>
    <th>Assessment:</th>
    <td><input type='text' id='newAssessment' name='Assessmentnew' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Date:</th> 
    <td><input type='text' id='newDate' name='Datenew' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Start Time:</th> 
    <td><input type='text' id='newTime' name='Timenew' readonly='readonly' value=''/></td>
    </tr>
    </table>
    <div id='datetimeAlert'></div>

    </form>

    <p id='submitupdatebtn'><button id='updateSubmit'>Update Date/Start Time</button></p>

    </div>
";

echo $editsession;

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:23:47.617

由于您使用的是 jQuery，因此只需执行以下操作：

```
 if (courseTextO.value == "" && moduleTextO.value == ""){
      $('#form').hide();
      errModuleMsgO.innerHTML = "Please Select a Course and Module";
      isDataValid = false;
  } 
```

通过添加`$('#form').hide();`到您的条件，您可以确保在任何时候`Please Select a Course and Module`显示消息时都会隐藏表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:21:05.747

尝试类似的东西

```
<?php if(!$error) { ?>
    <form id='updateForm'>
    .
    .
    .
     </form>

<?php } ?> 
```

# ajax - ASP.Net MVC 中 Ajax 可更新区域的限制是什么？

> ID：13432336
> 
> 赞同：0
> 
> 时间：2012-11-17T16:17:31.330
> 
> 标签：ajax, asp.net-mvc-3

*背景：我正在阅读 Steven Sanderson 和 Adam Freeman 的“ASP.Net MVC 3 Framework...”。*

假设你有

```
<div id="ajax_update">
  ...
</div> 
```

这部分应该通过 Ajax 调用进行更新。我的问题是，如果您不考虑手动处理某些 XML/JSON 数据并且您依赖`ResultView`作为输出，那么您可以设置哪些限制/要求。

在我提到的书中，有一个条目：

```
@Html.Action(...); 
```

因此，当触发 Ajax 方法时，`Html.Action`会调用 this 来获取要显示的数据。但是，如果我从两个局部视图构建该区域会怎样，如下所示：

```
<div id="ajax_update">
  @Html.Action("List1");
  @Html.Action("List2");
</div> 
```

如果我想从三个部分视图构建它怎么办，如果动作来自不同的控制器怎么办，如果... - 简而言之，Ajax 可更新区域的限制是什么？可以和不能？

或者它可能非常直接——它必须是与 Ajax 调用的动作完全匹配的单个动作（在可更新区域中）吗？

*再一次，我在处理来自的数据的上下文中询问`ResultView's`，而不是手动处理 JSON 数据。*

* * *

对于那些喜欢具体例子的人——你有一个音乐列表——它有动作/视图——还有标签列表（用作过滤器）——还有它的动作/视图。每次点击标签，都应该更新音乐列表和标签列表——因此可更新区域包含来自两个视图的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:14:33.980

*回答我自己的问题...*

Ajax 可更新区域的初始内容是任何你想要的，这里的 Ajax 是完全无关的。

Ajax 调用是另一回事——整个区域被清除，然后将单个操作调用的结果放入。Ajax 调用的初始内容和结果不一定要相关。例如——首先您可以显示大海的图片和海滩的**图片，并且在每次 Ajax 调用时，您都可以显示****两张**图片的当前温度（假设您的后一个动作/视图渲染温度，而不是温度+图片）。

为了保留我在问题中给自己的示例——更新音乐列表和标签列表——必须在一个 Ajax 操作调用中创建带有音乐列表和标签列表的视图。

# javascript - 重复回调函数的最佳实践？

> ID：13432340
> 
> 赞同：3
> 
> 时间：2012-11-17T16:17:40.243
> 
> 标签：javascript, jquery, function, callback, dry

在我的代码中，我使用了很多（命名的）回调函数，只是举一个简单的例子：

```
function showThis(callback) {

  // Do something

  if (callback && typeof(callback) === 'function') {
    callback();
  }

} 
```

现在我在不同的函数中重复了这种模式（我说的是回调部分），那么如果我制作一个通用的回调处理函数并包含它会更好吗？

就像是：

```
function doCallback(callback) {

  if (callback && typeof(callback) === 'function') {
    callback();
  }

}

function showThis(callback) {

  // Do something

  doCallback(callback);
} 
```

我认为最好保持代码干燥，但我不确定。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T16:23:26.580

在我看来，没有必要有一个回调处理程序。在不同的情况下，您可能需要使用不同的上下文（例如`callback.call(ob...`或`callback.apply(obj...`）调用回调。因此，您将需要回调处理程序（上下文）的额外参数。另一件不太令人愉快的事情是您可能需要将自定义参数传递给回调。使用回调处理程序，您可以通过将所有参数传递到一个数组并在它们上应用函数来减轻痛苦。就像是...：

```
function callbackHandler(callback, arguments, context) {
    if (typeof callback === 'function') {
        return callback.apply(context, arguments);
    }
    return null;
} 
```

但是有很多可选参数......另一件事是你正在做的检查：

```
if (callback && typeof callback === 'function') //notice that typeof is an operator not a function, so you don't need parentless 
```

实际上没有必要，这就足够了：`typeof callback === 'function'`

第一个条件`false`只有在`callback`被评估为`false`但被评估为`false` `typeof callback`不会返回时才会返回`function`。所以条件足够短。

这就是为什么我认为您不需要回调处理程序。顺便说一句，我喜欢这样的话题！:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T16:20:12.860

是的，这可能是个好主意。就像你说的，它避免重复自己，而且它的意图非常清楚。虽然您确实无法访问范围内的变量，但`showThis`您无论如何都会失去它，因为`callback`没有在那里定义，所以没有什么可担心的。

# c# - Facebook 帖子超链接显示为纯文本

> ID：13432346
> 
> 赞同：0
> 
> 时间：2012-11-17T16:18:34.230
> 
> 标签：c#, asp.net, facebook, facebook-graph-api, server-side

我有以下代码片段要发布在 facebook 墙上。但是当我发布超链接时，会出现纯文本。

```
public static bool WriteOnFace(string message, string accessToken)
    {
            string url= "";
            WebClient wc = new WebClient();
            url= "https://graph.facebook.com/feed?access_token=" + accessToken + "&message=" + message + "&method=post";
            wc.DownloadString(url);
    } 
```

**我没有使用 facebook C# sdk。如何发布超链接？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:02:45.773

尝试使用 Facebook C# sdk 并使用您的访问令牌实例化 FacebookClient，然后使用链接参数对其调用 postasync 方法。这些方面的东西应该起作用：

```
FacebookClient client = new FacebookClient('use your access token');
var args = new Dictionary<string, object>();
args["link"] = "[your link URL]";
client.PostAsync("friend's id/feed",args); 
```

希望这可以帮助！

# xmlhttprequest - 对 XMLHttpRequest 数据使用数学

> ID：13432350
> 
> 赞同：1
> 
> 时间：2012-11-17T16:19:14.057
> 
> 标签：xmlhttprequest

有人问我是否可以使用一些表单数据并以 HTML 格式呈现。

我需要将 LOADS 数据/值相加并将其乘以 RATE 数据/值，我认为这会起作用，但它在我的浏览器中没有显示任何内容？

我哪里错了？

我是 JavaScript 新手，我有 HTML/CSS 技能。我知道 jQuery 可能是做这类事情的最好方法，但我不知道。

```
<html>
<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","xmltest.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
var k=xmlDoc.x[1].getElementsByTagName("LOADS");
var J=xmlDoc.x[1].getElementsByTagName("RATE");
  { 
  document.write("<tr ><td>");
  document.write(k*J);
  document.write("</td><tr>");
  }

document.write("</table>");

</script>
</html>

XML file

<MULTILOAD_TICKET>
<TICKET>
<DATE>12/11/12</DATE>
<ADDRESS>123 FAKE STREET</ADDRESS>
<RATE>300</RATE>
<LOADS>3</LOADS>
<CUSTOMER>Columbia Ales</CUSTOMER>
<ORDERID>BBKHJ1001</ORDERID>
<DRIVER>BOB</DRIVER>
<VEHICAL_REG>UJ78 JHE</VEHICAL_REG>
<MATERIAL>SPOIL</MATERIAL>
<SIG>URL</SIG>
</TICKET>

<TICKET>
<DATE>12/11/12</DATE>
<ADDRESS>123 FAKE STREET</ADDRESS>
<RATE>300</RATE>
<LOADS>6</LOADS>
<CUSTOMER>Columbia Ales</CUSTOMER>
<ORDERID>BBKHJ1001</ORDERID>
<DRIVER>JACK</DRIVER>
<VEHICAL_REG>EU78 JHD</VEHICAL_REG>
<MATERIAL>SPOIL</MATERIAL>
<SIG>URL</SIG>
</TICKET>

<TICKET>
<DATE>15/11/12</DATE>
<ADDRESS>123 FAKE STREET</ADDRESS>
<RATE>300</RATE>
<LOADS>5</LOADS>
<CUSTOMER>Columbia Ales</CUSTOMER>
<ORDERID>BBKHJ1001</ORDERID>
<DRIVER>BOB</DRIVER>
<VEHICAL_REG>UJ78 JHE</VEHICAL_REG>
<MATERIAL>SPOIL</MATERIAL>
<SIG>URL</SIG>
</TICKET>

</MULTILOAD_TICKET> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:21:54.570

`k`并`J`引用元素的集合，因此您不能将它们相乘。

您需要遍历集合，访问它们`textContent`（或`innerText`取决于浏览器版本），转换为数字（`parseInt`或`parseFloat`根据需要），将它们相乘，然后将它们添加到运行总数中。最后，最后，您可以输出总数。

# sharepoint - 我需要向可能没有权限的用户显示 SharePoint 2007 文档库中的元数据。

> ID：13432353
> 
> 赞同：1
> 
> 时间：2012-11-17T16:19:26.583
> 
> 标签：sharepoint, ssrs-2008

我需要将 SharePoint 2007 文档库中的内容显示给可能没有权限的用户。
这个想法是用户可以查看元数据但不能查看文档，除非他们有权这样做。
我正在考虑编写一个递归 ssrs 报告来显示带有链接的文档列表并让 SharePoint 控制访问。但是，关于对 SharePoint 性能的正面和负面影响存在相互矛盾的争论，并且在子文件夹中显示文档将是一个复杂的 sql 递归查询。

有人对如何做到这一点有建议吗？

# php - echo 在 8 字节输入上成功写入，但对其他人失败

> ID：13432361
> 
> 赞同：0
> 
> 时间：2012-11-17T16:20:50.810
> 
> 标签：php, html, linux, shell, web-applications

想了很多，但找不到合适的标题……所以也建议标题。

此外，我没有显示 HTML 代码以避免使帖子变大。附上PHP变量名和部分图，很容易理解情况。

此处描述了实际问题 -

这是一个代码片段，它只是大代码的一小部分。混淆是两种情况。两者都在下面提到。-

**PHP代码：**

```
 while($npacket>=1) {
       $count=0;
       $out_file=fopen("packet.txt","w");

       while($count<$payload_length ) {
           $c=fgetc($file);
           fputs($out_file,$c);
           $count++;
       }

       $data_file=`cat packet.txt`;

       if($datatyp=="ascii")
           $fpayload="-f packet.txt";
       else if($datatyp=="hex")
           $fpayload="-d0x$data_file";

       $random="";

       if( $ip=="tcp" || $ip=="udp" ) 
            exec("sendip -v -p ipv6 $fpayload  $random $adv_cont -6s $sip $optext -p  $proto $cont -$s $sapp_port -$d $dapp_port $dip ");

       else { 
```

**问题在这里....**

```
 echo "this is $fpayload it";

       exec(" echo sendip -v -p ipv6 $fpayload $random $adv_cont -6s $sip $optext -p icmp $icmp_cont $dip > sample ");

       }

       usleep("$igap");

       if(!$flag)
           $npacket--;

       }

       fclose($out_file);
       fclose($file);

       } 
```

对于指定为输入的 1 个数据包和有效负载，

1) 输入：616263646566

![在此处输入图像描述](../Images/4dcaf7736b709c3b4be96f6e00ae2abe.png)

输出 ：

```
 $ cat payload.txt 
  616263646566
  $ cat packet.txt 
  616263646566
  $ cat sample 
  $ 
```

2）输入：6162636465666768

输出 ：

```
 $ cat payload.txt 
  6162636465666768
  $ cat packet.txt 
  6162636465666768
  $ cat sample 
  sendip -v -p ipv6 -d0x6162636465666768   -6s 2001::100  -p icmp  2001::200 
```

请帮我找出问题到底出在哪里？

**编辑：**

文件权限：

```
 $ ls -l payload.txt packet.txt sample 
 -rwxrwxrwx 1 udit udit 13 Nov 17 20:57 packet.txt
 -rwxrwxrwx 1 udit udit 13 Nov 17 20:57 payload.txt
 -rwxrwxrwx 1 udit udit  0 Nov 17 20:57 sample 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:02:45.060

**问题实际上是在$fpayload**变量末尾存在空格和空字符。只需要在 else 部分添加一个正则表达式语法。

```
.........
else if($datatyp=="hex") {
     $fpayload="-d0x$data_file";
     $fpayload=preg_replace('/\s+/', '', $fpayload);

}
.... 
```

# ios - 如何为新项目指定默认的最低 iOS 版本？

> ID：13432367
> 
> 赞同：0
> 
> 时间：2012-11-17T16:21:33.853
> 
> 标签：ios, xcode, xcode4.5, ios5

我正在从 5.0 SDK 书籍中学习 iOS 开发，因为我不相信任何 6.0 的书都出来了，不过当它们出来时我会重新购买这些书籍，因为它们是好书。

不过我发现的一件事是，许多使用的基本方法现在在 6.0 中已被弃用，即`UIViewController shouldAutorotateToInterfaceOrientation`和`UIViewController viewWillUnload`，如果我的目标是 < 6.0，则后者更重要。

那么如何让 Xcode 使用 5.0 模板而不是 6.0 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:35:28.543

你的问题真的是关于模板吗？如果是，您将不得不使用仍然为 iOS 5 SDK 开发的 Xcode 版本。Xcode 4.2 会这样做。Xcode 的早期版本在这里：

[https://developer.apple.com/downloads/index.action?name=Xcode](https://developer.apple.com/downloads/index.action?name=Xcode)

如果您的问题是“如何使用 Xcode 4.5.x 为 iOS 5 开发”，只需将项目的部署目标设置为 5.0。如果您需要在模拟器中进行测试，Xcode 可以为您下载一个 iOS 5 模拟器。

然而，很难说出你真正在问什么，所以这里有一些进一步的杂项评论：

*   iOS 中没有 BIDViewController 这样的东西。您一定是在谈论某个特定示例中的一些 UIViewController 子类。

*   关于`shouldAutorotate`. 它在 iOS 6 中并未“弃用”；它根本没有被调用！在 iOS 6 中指定旋转的方式与在以前的系统中指定的方式完全不同。

*   关于`viewWillUnload`. 它在 iOS 6 中并未“弃用”；它根本没有被调用！事实上，您的视图永远不会被卸载。iOS 5 也可能如此，只是我们没有被告知；但这只是一个猜测，基于我从 WWDC 2012 视频中记得的一些内容。

# c# - 如何在asp.net中裁剪tiff图像

> ID：13432368
> 
> 赞同：0
> 
> 时间：2012-11-17T16:21:46.770
> 
> 标签：c#

我正在寻找一个可以裁剪 tiff 图像的例程，我得到了它，但它给出了很多错误。这是例程：

```
Bitmap comments = null;
string input = "somepath";
// Open a Stream and decode a TIFF image
using (Stream imageStreamSource = new FileStream(input, FileMode.Open, FileAccess.Read, FileShare.Read))
{
TiffBitmapDecoder decoder = new TiffBitmapDecoder(imageStreamSource, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);

BitmapSource bitmapSource = decoder.Frames[0];
using (Bitmap b = BitmapFromSource(bitmapSource))
{
Rectangle cropRect = new Rectangle(169, 1092, 567, 200);
comments = new Bitmap(cropRect.Width, cropRect.Height);

//first cropping
using (Graphics g = Graphics.FromImage(comments))
{
g.DrawImage(b, new Rectangle(0, 0, comments.Width, comments.Height),
cropRect,
GraphicsUnit.Pixel);
}
}
} 
```

当我尝试编译它时，我得到一个错误。我尝试添加对许多搜索 google 的程序集的引用，但无法解决它。我从这个网址得到了这段代码：

```
http://snipplr.com/view/63053/ 
```

我正在寻求建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:34:53.550

`TiffBitmapDecoder``Presentation.Core`换句话说，它来自 WPF 。

BitmapFromSource 不是任何 .net 框架类的方法。您可以使用此代码将 BitmapSource 转换为 Bitmap。

```
private Bitmap BitmapFromSource(BitmapSource bitmapsource)
 {
     Bitmap bitmap;
     using (MemoryStream outStream = new MemoryStream())
     {
       BitmapEncoder encoder = new BmpBitmapEncoder();
       encoder.Frames.Add(BitmapFrame.Create(bitmapsource));
       encoder.Save(outStream);
       bitmap = new Bitmap(outStream);
     }
     return bitmap;
 } 
```

# asp.net - 处置 DbContext 不处置 ObjectContext 实体

> ID：13432369
> 
> 赞同：3
> 
> 时间：2012-11-17T16:21:51.507
> 
> 标签：asp.net, .net, entity-framework, dispose, dbcontext

我正在使用 EF 5.0 创建一个网络，但在处理我的上下文时遇到了一些问题。我使用上下文的所有时间都在使用语句中，因此应该自动处理上下文，但是在特定时刻，当我尝试将实体附加到上下文时，会出现下一个错误：

ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

看来该实体没有被处置。如何处理这种情况？我是否必须处置 ObjectContext 才能处置实体，或者有什么方法可以检查实体是否已附加？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:06:21.057

一种方法是在附加之前分离现有对象。我面前没有 VS，所以如果代码不完全正确，我深表歉意。

```
var existingObject = dbContext.Users.Local
  .FirstOrDefault(x => x.id = newObject.id);

if (existingObject != null)
{
  // remove object from local cache
  dbContext.Entry(existingObject).State = EntityState.Detached;
}

dbContext.Users.Attach(newObject); 
```

如果这不能解决问题，您将不得不采用分离对象的旧方法。

```
 // remove object from local cache
  ObjectContext objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
  objectContext.Detach(existingObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:50:51.493

`Dispose`并不意味着“恢复出厂设置”。这是一种清理非托管资源（如数据库连接等）的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T23:15:09.887

这个问题与是否处理上下文无关。它甚至与在某个地方拥有多个上下文无关。如果这是问题所在，您将得到“*一个实体对象不能被多个 IEntityChangeTracker 实例引用*”异常，这与您的异常完全不同。

您可以仅使用一个上下文非常轻松地模拟您的异常：

```
using (var ctx = new MyContext())
{
    var customer1 = new Customer { Id = 1 };
    var customer2 = new Customer { Id = 1 }; // a second object with the same key

    ctx.Customer.Attach(customer1);
    ctx.Customer.Attach(customer2); // your exception will occur here
} 
```

导致此异常的问题通常更隐蔽，特别是如果您记住附加或设置状态（例如 to `Modified`）也会在您附加的实体的对象图中附加所有相关实体。如果在此图中是两个具有相同键的对象，您也会得到异常，尽管您没有明确附加这些相关实体。

但是，如果没有有关您的代码的更多详细信息，就不可能找到确切的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T17:45:35.683

如果你这样做：

```
User u;
using (Entities ent = new Entities())
{
    u = ent.Users.Single(a => a.ID == 123);
}
using (Entities ent2 = new Entities())
{
    //loading the same user
    User user2 = ent2.Users.Single(a => a.ID == 123);

    //trying to attach the same object with the same key
    ent2.Attach(u);
} 
```

那么你会得到这个错误（*我没有测试过这段代码*）。

编辑：解决方案之一是更改对象的状态：

```
ent2.Attach(u);
ent2.ObjectStateManager.ChangeObjectState(u, EntityState.Modified); 
```

另一种解决方案是检查实体是否已附加：

```
ObjectStateEntry state = null;
if(!ent2.ObjectStateManager.TryGetObjectStateEntry(((IEntityWithKey)u).EntityKey, out state))
{
    ent2.Attach(u);
} 
```

# malware - 如何安全地截取我知道感染了恶意软件的网站的屏幕截图？

> ID：13432371
> 
> 赞同：1
> 
> 时间：2012-11-17T16:21:56.430
> 
> 标签：malware, safe-browsing

**背景：**

我的一个客户的网站已成为恶意软件出没的温床。

事实证明，处理恶意软件既困难又耗时，与此同时，我们仍然必须在该网站上开展工作。

现在，我们在工作中遇到了一些麻烦——创建一个一次性 VM 来运行一个 Web 浏览器，这样我们就可以看到该网站对于设计师的工作是什么样子的。

我想知道是否有一种更简单（更快）的方法来了解网站的设计是什么样的。并非项目中的每个人都精通技术，可以信任，例如，正确处理切换虚拟机。

**问题：**

是否有一种方法可以安全地查看受恶意软件感染的网站的外观（例如，一项将为我浏览网站并发送屏幕截图的服务），理想情况下，该方法使用起来简单易用，我可以信任我们的非精通技术的设计师对用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:27:05.410

您可以查看[Internet Archive: Wayback Machine](http://archive.org/web/web.php)以查看该站点是否已存档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-18T00:10:42.667

如果您只需要屏幕截图，那么有几个在线浏览器模拟器，例如[Net Renderer](http://netrenderer.com/) （它将在给定版本的 Internet Explorer 中运行任何输入的 Web URL，然后提供屏幕截图）。您也可以尝试 BrowserStack，它需要一个帐户，并且不是免费的，但确实有免费试用期，并且比 Internet Exploder 提供更多。

您也可以尝试在[Sandboxie](http://www.sandboxie.com/)中运行浏览器，这比 VM 更易于设置和使用（您只需安装它，然后使用 Windows 右键菜单在您选择的沙箱中启动任何程序）。但是，它不能免费用于商业用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T16:29:40.013

我不知道是否存在一个独立的工具来解析恶意软件的网站，但我认为这可以帮助你，它是一个谷歌工具，你可以向你提出请求，他们会向你发送回复。点击链接： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=168328](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=168328)

希望它有所帮助。

# edi - 如何设置 OpenVMS 虚拟机环境

> ID：13432375
> 
> 赞同：2
> 
> 时间：2012-11-17T16:22:20.613
> 
> 标签：edi, openvms

如果有免费版本或可能是 freeVMS，我希望设置一个运行 openVMS 的 VM？我本质上想用 EVE 和 EDI 编辑器建立一个 VMS 环境。

我运行的是 Mac，所以我想在上面进行设置，如果需要，我可以整理一台 PC，但我宁愿不这样做。

任何帮助将非常感激。

谢谢詹姆斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:48:59.423

如果您不打算在商业上使用 OpenVMS，您可以从[这里](http://www.openvms.org/pages.php?page=Hobbyist)获得免费许可证。一旦您注册，他们还将为您提供可下载媒体的访问权限。

我知道在 OS X 上运行的唯一免费模拟器是 SIMH 中的 VAX 模拟器。请参阅[SIMH github 项目](https://github.com/simh/simh)。

有各种 Alpha 模拟器；大多数假设是 Windows 主机，但我认为现在有一个在 Linux 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T21:37:40.243

您可以在 MAC OS X 上使用运行 Windows XP 的虚拟机，并在其中安装 PersonalAlpha（由 Stromasys 提供）。然后，您只需要 OpenVMS 爱好者许可证和用于安装的媒体。

顺便说一句，这些是我所知道的在 Windows 上运行的免费 Alpha 模拟器：

*   [Stromasys 的 PersonalAlpha](http://www.stromasys.ch/personalalphaplus/)
*   [FreeAXP by Migration Specialties](http://www.migrationspecialties.com/FreeAXP.html)

对于 Linux：

*   [Stromasys 的 AXPCE](http://www.stromasys.ch/axpnce/)

商业 Alpha（和 VAX）模拟器：

*   [vtAlpha 由 AVTware 提供](http://www.avtware.com/alpha%20replacement.html)。这基本上是一个带有 Alpha 仿真器的修改过的 Linux。他们没有用于非商业用途的免费版本的计划。
*   [Migration Specialties 的 Avanti 和 AvantiFlex](http://www.migrationspecialties.com/Emulator-Alpha.html)。
*   [Stromasys 的 Charon AXP 产品](http://www.stromasys.ch/virtualization-solutions/virtual-alpha-on-windows/)

# xaml - 如何重用 Xaml 代码模板？

> ID：13432380
> 
> 赞同：1
> 
> 时间：2012-11-17T16:22:55.973
> 
> 标签：xaml, winrt-xaml, controltemplate

假设我有这个 XAML：

```
 <StackPanel>
    <TextBlock Text="{Binding Path=TaskName}" />
    <TextBlock Text="{Binding Path=Description}"/>
    <TextBlock Text="{Binding Path=Priority}"/>
  </StackPanel> 
```

我想在多个地方重新使用它。例如作为 ItemsControl 的 DataTemplate，但也作为按钮内容之类的基础。

我该怎么做呢？我在想像 ASP.NET Partial 视图之类的东西。

我不想使用用户控件，因为我不需要任何代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:03:25.703

我设法让它以一种使用风格的方式工作：

```
<Style x:Key="myStyle" TargetType="Control">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <StackPanel>
                   <TextBlock Text="{Binding Path=TaskName}" />
                   <TextBlock Text="{Binding Path=Description}"/>
                   <TextBlock Text="{Binding Path=Priority}"/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

它坚持让我使用 TargetType 否则它抱怨设置模板。我现在可以在任何控件上使用它。

如果我想将它本质上用作数据模板，我可以设置数据模板（可能是 ContentControl）中占位符项目的样式来使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:36:19.233

创建一个 StylesResourceDictionary.xaml 并在您的 App.Xaml 中创建一个静态资源。在运行时，样式将被绑定，然后您可以在应用程序的任何位置，跨用户控件或数据模板等引用字典中的任何内容。

# asp.net - 在数据库中的 GridView 中显示图像？

> ID：13432381
> 
> 赞同：0
> 
> 时间：2012-11-17T16:23:03.377
> 
> 标签：asp.net, gridview

我将图像作为二进制数据保存在 SQL Server 数据库中。现在我想在 Gridview 中显示这些图像。但是有直接从数据库中读取数据的web控件。Web 图像控件需要`ImageUrl`属性，因此不能使用它，因为我的图像在数据库中。但是我可以将图像存储在一个文件夹中，但我想要一些不同的方式直接从数据库中读取图像数据并显示在网格中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:16:30.740

使用通用处理程序，您可以将二进制数据转换为图像并显示它

**代码：** 设置图片控件url为 `Image1.ImageUrl = "~/ShowImage.ashx?id=" + id;`

其中 ShowImage.ashx 是一个通用处理程序文件。

```
using System;
using System.Configuration;
using System.Web;
using System.IO;
using System.Data;
using System.Data.SqlClient;

public class ShowImage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
       Int32 empno;
       if (context.Request.QueryString["id"] != null)
            empno = Convert.ToInt32(context.Request.QueryString["id"]);
       else
            throw new ArgumentException("No parameter specified");

       context.Response.ContentType = "image/jpeg";
       Stream strm = ShowEmpImage(empno);
       byte[] buffer = new byte[4096];
       int byteSeq = strm.Read(buffer, 0, 4096);

       while (byteSeq > 0)
       {
           context.Response.OutputStream.Write(buffer, 0, byteSeq);
           byteSeq = strm.Read(buffer, 0, 4096);
       }      
       //context.Response.BinaryWrite(buffer);
    }

    public Stream ShowEmpImage(int empno)
    {
        string conn = ConfigurationManager.ConnectionStrings["ConnString"].ConnectionString;
        SqlConnection connection = new SqlConnection(conn);
        string sql = "SELECT* FROM  table WHERE empid = @ID";
        SqlCommand cmd = new SqlCommand(sql,connection);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@ID", empno);
        connection.Open();
        object img = cmd.ExecuteScalar();
        try
        {
            return new MemoryStream((byte[])img);
        }
        catch
        {
            return null;
        }
        finally
        {
            connection.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:27:26.587

该博客可能会给您一些帮助 [http://hi.baidu.com/pxvddcbpbrbmqxq/item/3de72787e9e1c6eae496e098](http://hi.baidu.com/pxvddcbpbrbmqxq/item/3de72787e9e1c6eae496e098)

# javascript - InfoWindow 对象中的 Onclick 事件

> ID：13432388
> 
> 赞同：0
> 
> 时间：2012-11-17T16:23:34.453
> 
> 标签：javascript, google-maps, google-maps-api-3

我在 infowindow 中遇到了 onclick 事件的问题。当我更改地图上标记的位置时，我想显示一个是/否问题，询问我是否要保存新位置...我添加了两个按钮（以两种方式）到 InfoWindow 对象（markerInfoWin），看起来按钮没有调用 'onclick' 事件.. 我尝试调用 alert("Test") 但没有任何反应..

```
 function addPhotoMarker(lat, lon)
 {
   //.....
   //.....
   google.maps.event.addListener(photoMarker, 'dragend', function(event){
      //....
      //....
      movedMarkerContent(photoMarker);

    });
 }

function movedMarkerContent(marker)
{
  markerInfoWin.setContent('<div class="content"><div class="image"><img class="image_info" src="' + photoPath + '" alt="tu ma byc obrazek!" />'
       + '</div><b>Wspolrzedne GPS: </b>' + marker.getPosition().lat().toFixed(3)+", " + marker.getPosition().lng().toFixed(3)
       + '<p>Czy chcesz zapisac nowe informacje o polozeniu ?</p><button name="yesBtn" onclick=positionChanged() > Yes </button>'
       + '<input type="button" id="noBtn" value="No" onclick=alert("Test")/></div>');

  markerInfoWin.setPosition(marker.getPosition());
  markerInfoWin.open(photoMap);
} 
```

我在谷歌地图上方创建了按钮，没关系..但在 infowindow 的谷歌地图内部，这是一个问题

# c++ - std::async 不并行化任务

> ID：13432389
> 
> 赞同：4
> 
> 时间：2012-11-17T16:23:41.980
> 
> 标签：c++, gcc, c++11

在此代码段中使用 C++11 std::async：

```
int foo()
{
    ::sleep(2);
    return 123;
}

int main()
{
    future<int> r1(async(foo));
    int r2 = foo();
    cout << r1.get() + r2 << endl;
    return 0;
} 
```

它会产生正确的结果，但会连续运行两个 foo（整个应用程序运行 4 秒）。编译为： `g++ -std=gnu++11 -O2 foo.cc -lpthread`（Ubuntu 12.10 64bit，gcc 4.7.2）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T16:32:37.023

您可能需要添加以下启动[策略](http://en.cppreference.com/w/cpp/thread/launch)：`std::launch::async`

```
std::async(std::launch::async, foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-28T12:49:26.807

std::future 在[这个](https://youtu.be/tF-Nz4aRWAM?t=780)CppCon 演示文稿中被批评为速度慢。[您可以通过使用此仅标头库](https://github.com/tirimatangi/Lazy)完全避免 std::async 和 std:future 。您可以异步运行任意数量的函数并将结果作为元组获取。也可以正常捕获异常。

这是一个例子：

```
 #include <iostream>
    #include "Lazy.h"

    template <class T>
    T foo(T x) {
        std::this_thread::sleep_for(std::chrono::milliseconds(1000));
        return x + 10.5;
    }

    int main() {
        int input = 54;
        try {
            auto [i, d, c] = Lazy::runParallel(
                                [&](){ return foo(int(input)); },
                                [&](){ return foo(double(input)); },
                                [&](){ return foo(char(input)); } );
            std::cout << "foo(int) = " << i << ", foo(double) = " << d << ", foo(char) = " << c << '\n';
        }
        catch (...) {
            // Deal with the exception here
        }
    }

    /* Output:
       foo(int) = 64, foo(double) = 64.5, foo(char) = @
    */ 
```

# java - JTabbedPanes 中的 JToolBars；停靠和取消停靠时选项卡名称不正确

> ID：13432401
> 
> 赞同：2
> 
> 时间：2012-11-17T16:25:22.333
> 
> 标签：java, swing, jtabbedpane, jtoolbar

我对事件监听和 GUI 很陌生，所以很难弄清楚这一点。

我有一个 JTabbedPane，我在其中添加了 3 个组件。这些组件是 JToolBars，它允许我将它们从 JTabbedPane 拖到浮动窗口中。这将从选项卡式窗格中删除选项卡。当我将 JToolBar 拖回窗格时，将重新创建该选项卡。但是，它现在的名称不正确。该名称对应于 ToolBar 停靠在 TabbedPane 的哪一侧；北、南、东或西。

任何人都可以推荐一种检测 JToolBar 已重新停靠然后更新选项卡标题的体面方法吗？到目前为止，我已经在 tabbedPane 上实现了一个更改侦听器，但无法找到合适的事件。

干杯。

**已解决：** 解决方案是使用 ContainerListener 来检测通过实现的 componentAdded 方法添加的组件。当一个组件被添加到 JTabbedPane 时，我调用了一个方法来使用组件名称更新选项卡名称，通过 .setName() 设置。

```
public void componentAdded(ContainerEvent added) {
    updateTabs();
}

public void updateTabs() {
    for (int i = 0; i < tabbedPane.getComponents().length; i++) {
        tabbedPane.setTitleAt(i,
                tabbedPane.getComponents()[i].getName());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:08:32.970

解决方案是使用 ContainerListener 来检测通过实现的 componentAdded 方法添加的组件。当一个组件被添加到 JTabbedPane 时，我调用了一个方法来使用组件名称更新选项卡名称，通过 .setName() 设置。

```
public void componentAdded(ContainerEvent added) {
    updateTabs();
}

public void updateTabs() {
    for (int i = 0; i < tabbedPane.getComponents().length; i++) {
        tabbedPane.setTitleAt(i,
                tabbedPane.getComponents()[i].getName());
    }
} 
```

# asp.net-mvc - VS 2010 Ultimate 中的工具>选项>项目和解决方案中缺少“Web 项目”

> ID：13432405
> 
> 赞同：0
> 
> 时间：2012-11-17T16:26:01.980
> 
> 标签：asp.net-mvc, visual-studio-2010, iis-express

我试图在开发我的第一个 ASP.NET MVC 时使用 IIS Express。我在网上搜索，发现我需要在 **工具 > 选项 > 项目和解决方案 > Web 项目中勾选一个框**

Projects and Solution 节点下的唯一项目是 General、Build and Run 和 VB Defaults

对不起，只是web开发领域的新手

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:44:37.150

为了验证，我打开了我的 2010 Ultimate 版本，一切都在那里。我建议验证您是否安装了最新版本的 MVC 和 IISExpress。这就是我能想到的所有这会导致它从选项菜单中丢失。

# c - printf 在 C 中给了我不正确的输出

> ID：13432409
> 
> 赞同：3
> 
> 时间：2012-11-17T16:26:31.690
> 
> 标签：c, printf, scanf

这可能是一个非常基本的问题，但我在任何地方都找不到答案，这是我在用 C 语言编程几周后第一次遇到这个问题。本质上，如果我编写一些看起来像这样的代码：

```
int size;
scanf("%d", &size);
printf("size is %d", &size); 
```

例如，如果我输入 size = 2，程序将打印出 133692 或类似数字的内容。为什么是这样？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:31:50.510

尝试

```
printf("size is %d", size); 
```

`&`为您提供变量的内存位置（地址）。

```
printf("size is %d", &size); 
```

因此，上面将打印 的内存位置（地址）`size`，而不是存储在 中的值`size`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:27:50.190

你所要做的：

```
printf("size is %d", size); 
```

反而。这将打印`int`对象的值`size`。

但

```
 printf("size is %d", &size); 
```

是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:27:56.173

您正在打印 的地址`size`，即`&size`。

只是通过一个平原`size`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T16:28:46.420

删除语句中的`&`-- > 打印地址。`printf``&size`

```
 printf("size is %d", size); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T16:29:00.930

printf 和 scanf 的调用约定不同。

Printf 的参数通常是按值（没有 &），但 scanf 必须有指针。(&)
（您不能为例如 1.0 设置新值，但可以打印它...）

# extjs4 - ExtJs 4.1-通过单击另一个视图中的树节点将选项卡添加到选项卡视图

> ID：13432410
> 
> 赞同：2
> 
> 时间：2012-11-17T16:26:40.593
> 
> 标签：extjs4, extjs4.1

我有一个菜单导航视图 (MenuNavigationV)，还添加了一个侦听器来处理树节点上的单击事件。当我单击一个节点时，如果在另一个视图（MainV）中尚不可用，我应该能够打开/添加一个新的选项卡面板到选项卡栏。如何在 MenuNavigationV 中获取 MainV 的引用？

我的配置如下

视口-dockeditems:headerview -panel -menuview -container -mainview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:53:29.890

为什么不使用 id 来引用它，比如 Ext.getCmp('MainV')。

您还可以通过相对路径引用，例如

```
Tree: {
  ...

  listeners: {
    itemclick: function(tree, record) {
      tree.up('viewport').down('tabpanel').add({ Your item config here });
    }
  }
} 
```

# api - 为什么 Foursquare API 只为某些坐标生成结果？

> ID：13432414
> 
> 赞同：0
> 
> 时间：2012-11-17T16:27:15.200
> 
> 标签：api, urllib2, foursquare

我正在使用 Foursquare API 来读取 JSON 页面，其中填充了区域中的热门场所。我尝试按照他们的解释生成一个链接，但仅返回坐标的地点，`40.7, -74`即他们在他们的网站上作为示例给出的坐标。这可以使用他们的 API Explorer 看到：

以他们给出的坐标为例，返回热门餐厅，如以下链接所示：[https ://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D40.7,-74](https://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D40.7,-74)

但是尝试旧金山的坐标，例如 - <code>37.755516, -122.44812 - 不会返回任何内容，尽管它也没有显示错误：[https ://developer.foursquare.com/docs/explore#req=场地/趋势%3Fll%3D37.755516,-122.44812](https://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D37.755516,-122.44812)

我在资源管理器之外用我自己的客户端 ID 和客户端密码尝试了这两个链接，但我再次只得到了`40.7, -74`. 这让我相信它一定是我给它的坐标，尽管我不知道为什么。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:59:40.660

并非所有点附近都有热门场所。如果该区域的签到量较低，或者目前没有特别繁忙的场馆，则不会出现热门场馆。

这是旧金山的一个地方，在撰写本文时，有热门场所：[https ://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D37.786793,-122.405211](https://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D37.786793,-122.405211)

您可以尝试增加“半径”参数以捕捉附近更多的热门地点。这是您的查询示例，具有更高的半径，因此它可以捕获更多场所：[https ://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D37.755516,-122.44812%26radius%3D20000](https://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D37.755516,-122.44812%26radius%3D20000)

# powershell - Powershell - 显示加载百分比

> ID：13432416
> 
> 赞同：0
> 
> 时间：2012-11-17T16:27:22.593
> 
> 标签：powershell

我正在编写一个 powershell 脚本，该脚本将通过他们的 mount.exe 挂载 ShadowProtect 映像（实际上是在学习 Powershell！）。

我的问题是 - 当 mount.exe 命令在后台运行时，我可以运行一个与 mount 命令运行匹配的 % 循环吗？或者这是不可能的？

即当 mount 命令挂载图像时，Powershell 会显示它的挂载进度，一旦挂载完成，显示 100%，一半时显示 50% 等等？

我最初的想法是这是不可能的——因为它需要知道 mount.exe 正在做什么才能实际显示相对百分比，但我认为这值得一问！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:34:37.717

我想这取决于您可以从挂载过程中获得多少控制和信息，一个好的方法是在您的过程中实现回调，以便 powershell 可以对此做出响应，这个讨论可以为您提供如何实现它：[提供一个 .NET 方法作为委托回调](https://stackoverflow.com/questions/5530522/provide-a-net-method-as-a-delegate-callback)

每当您达到一个重要的里程碑时，您都可以发出一个回调来指示发生的事件或操作的类型，然后将其显示给用户。

# c++ - c++11中的模板联合

> ID：13432419
> 
> 赞同：10
> 
> 时间：2012-11-17T16:27:33.373
> 
> 标签：c++, templates, c++11, unions

c++11 标准是否对模板联合有任何说明？[（我在http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)中找不到任何内容，但我没有仔细阅读。）

我有

```
template<typename T>
union u {
  T a;
  char b;
};

template<typename T>
u<T> make_u(T t) {
  return { .a = t };
}

int main() {
  return make_u<int>(1).a;
} 
```

此代码导致`icpc -std=c++11`say `error: a designator into a template-dependent type is not allowed`、`g++ -std=c++0x`to say`error: expected primary-expression before ‘.’ token`和`g++ -std=c++11`(version 4.8.0 (experimental)) to say `internal compiler error: in lookup_field_1, at cp/search.c:387`。我可以通过替换来解决这个`{ .a = t }`问题`t`。但是，对于不是联盟的第一个成员的字段，我不能这样做。有没有办法选择模板联合中的第一个成员以外的其他成员，其中相关成员依赖于模板？（当然，我可以在堆栈上声明一个联合，并将成员设置为我想要的值。但我不能在初始化列表或`constexpr`函数中这样做。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-17T16:31:38.773

该`{ .a = t }`语法是非标准的 GNU 扩展，因此它与其他 C++ 功能的交互超出了 C++ 标准的范围。

解决方案：编写标准C++：

```
u<T> make_u(T t) {
  u<T> r;
  r.a = t;
  return r;
} 
```

编辑：AFAIK，在 C++11 中，你可以给你的联合一个构造函数（如果你喜欢的话，一个 constexpr）来完成你需要的初始化。示例：http: [//ideone.com/s4GHjU](http://ideone.com/s4GHjU)

# git - Git哲学：如何将“主”分支变为“生产”分支？

> ID：13432423
> 
> 赞同：8
> 
> 时间：2012-11-17T16:28:21.360
> 
> 标签：git, deployment, version-control, azure, github

很确定我误解了git。

## 我的目标

*   我在 github 上有一个带有“master”分支的私人仓库。
*   我还想有一个生产分支，我会将我的所有更改从 master 推送到。
*   然后我想将它连接到 Azure 并告诉 Azure 从生产分支自动部署。

## 问题

我怎样才能最好地做到这一点？最初我认为它与“git push”有关，但我相信这是针对远程存储库的，所以我现在想知道将“master”分支合并到“production”分支的最佳实践是什么。

或者，我认为整个事情都错了吗？

谢谢——期待把我的颠覆时代抛在脑后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:11:00.670

^(（因为我想分享“丰富的信息”；）...）)

在谈论`master`和`production`分支时，您所看到的是**合并工作流**。

您可以使用任何您想要的版本控制系统工具来定义您需要的工作流，并且在开发生命周期管理方面，此 TFS（Team Foundation Server）集合中描述了最完整的合并工作流集合之一，在其[TFS中有详细说明Brancing Guide](http://tfsbranchingguideii.codeplex.com/)并在这个问题“[标准分支计划中的服务分支](https://stackoverflow.com/a/12442851/6309)”中进行了说明。
更接近 git，**[git flow](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)**是另一种非常流行的合并工作流程。

但是您使用的是 DVCS，其*分布式*方面引入了另一个（正交）工作流程：*发布*工作流程（您的`git push -u origin prod`）。请参阅“[源代码控制 - 分布式系统与非分布式 - 有什么区别？](https://stackoverflow.com/a/2473315/6309) ”

发布是发布管理的一部分，与合并是开发的一部分完全不同。
通过合并`master`到`prod`，您可以冻结已在开发中整合的内容，并将其标记为要发布。
通过将其推送到 GitHub，您就开始了发布过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T16:33:24.820

当你的 master 分支准备好投入生产时，你将它合并到生产分支，然后将这个生产分支推送到 github repo。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T16:38:59.510

我建议您查看 git 页面，了解[分支工作流程](http://git-scm.com/book/en/Git-Branching-Branching-Workflows)以建立您的存储库管理计划。此外，[Von C](https://stackoverflow.com/users/6309/vonc?tab=answers)分享了有关 git 生态系统的大量信息。浏览他的答案可能会非常有用。[这篇文章](https://stackoverflow.com/questions/520650/how-do-you-make-an-existing-git-branch-track-a-remote-branch)对于跟踪远程分支也非常有帮助。

# google-drive-api - 不同大小的 Google Drive 缩略图

> ID：13432430
> 
> 赞同：7
> 
> 时间：2012-11-17T16:29:01.037
> 
> 标签：google-drive-api

我注意到 Google Drive SDK 生成的缩略图 URL 以字符串“=s220”结尾，如果您更改此字符串（例如 s500），那么您会得到不同大小的缩略图。这是支持的行为吗？如果是这样，那么这是一个非常有用的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T16:38:57.603

目前没有记录行为（将来可能会），但该功能不会很快消失，我同意它非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-25T16:10:22.150

未来对这个 8 年前的问题的回应：

是的，它今天仍在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T11:55:36.927

在这种情况下，s220 是图像宽度。您可以将其更改为您想要的任何数字。

此外，您可以将其删除并获得全尺寸图像。如果您想显示完整尺寸的图像，但不想暴露文件 ID 或者您想向某人发送临时链接，这可能会很有用。缩略图链接仅在有限的时间内有效。在某些项目中，为安全起见，使用缩略图链接可能很有用。用户不能真正共享链接，因为它们会在一段时间后失效。

# c++ - 如何在 Cygwin GCC 4.7.2 下使用 C++ 11 的 std::thread

> ID：13432432
> 
> 赞同：7
> 
> 时间：2012-11-17T16:29:07.653
> 
> 标签：c++, multithreading, gcc, c++11, cygwin

我一直在尝试使用新引入的 C++ 11 std::thread 功能在 Cygwin 下编译一个多线程 hello-world 程序，但没有成功。我自己编译安装了 GCC 4.7.2，同样的代码在 Linux 下使用相同版本的 GCC 运行没有任何问题。我得到的第一个错误是编译器无法识别 -pthread 标志。在研究了一段时间后，我注意到有人在 Cygwin 上说这个标志应该是 -lthread。我进行了更改并且该错误消失了，但是发生了另一系列错误，告诉我线程不是 std 的成员。不知道是不是安装时编译器配置错误，还是Cygwin下根本不支持std::thread？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T14:27:23.877

看起来您没有使用适当的标准库标志编译程序。如果你想为 C++11 编译你应该使用：

```
g++ --std=c++0x -o ... 
```

该`--std`标志设置适当的语言兼容级别。如果这没有帮助，请将您收到的错误消息作为源列表发布。

# html - 网页右侧出现奇怪的空白

> ID：13432436
> 
> 赞同：1
> 
> 时间：2012-11-17T16:29:50.607
> 
> 标签：html, css, layout, fluid-layout, web-testing

我正在尝试构建一个在宽屏幕和小屏幕显示器中都应该显示相同的网页。我试图让它保持流畅，但与此同时，网页右侧出现了奇怪的空白区域。奇怪的是，空白区域在视口之外，但它使水平屏幕栏出现，并且一旦滚动到最右侧，就可以看到空白区域。代码可以看这里[http://jsfiddle.net/FW98q/](http://jsfiddle.net/FW98q/)

我的直觉是问题出在：

```
 #Navigation_Container {

    background: #3399cc;
    height: 50px;
    //width: 960px;
    //margin: 0 auto;

} 
```

非常感谢您的帮助。

还有关于如何设置网页样式以使其在屏幕上保持一致的任何提示。也欢迎对设计发表评论..:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:55:18.273

我发现了这个问题......它在页脚中的“.notice”类中......如果你删除

```
position:absolute; 
```

它工作得很好。：） 看看这个！[**小提琴**](http://jsfiddle.net/videsignz/FW98q/1/)

我在 Firefox 中使用了元素检查器，看到它是唯一超出页面的元素。

![在此处输入图像描述](../Images/ac98f4aebabb3f0f1124060c24417238.png)

此外，如果您需要它绝对定位在底部，请确保也像这样放置左侧位置

```
position: absolute;
bottom: 0px;
left:0px; 
```

这是一个添加了 left:0px 的示例

[**小提琴**](http://jsfiddle.net/videsignz/FW98q/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:43:21.497

```
#page_container, #Header {
    width: 960px;
} 
```

如果您希望它们具有相同的宽度，请确保这两个元素与其他元素具有相同的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:44:07.793

// 在 CSS 中不起作用，并且您没有关闭您的 div 之一。我认为这是内容之一。为什么你有 3 个不同的页脚 div？您的标记太复杂了，您可以将所有这三个结合起来并获得相同的效果。

将其从导航容器中取出修复了空白区域，但您至少在其他地方完成了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T20:53:02.100

添加到你的 CSS

**`body{margin:0;}`**

# android - 在不使用默认 UI ANDROID 的情况下将语音转换为文本

> ID：13432439
> 
> 赞同：1
> 
> 时间：2012-11-17T16:30:04.210
> 
> 标签：android, voice, speech, dictation

> **可能重复：**
> [来自自己的声音文件的语音到文本](https://stackoverflow.com/questions/6989981/speech-to-text-from-own-sound-file)

我有一个以 wav 格式录制文件并将其转换为 mp3 格式的应用程序。

所以我需要解释这个文件并将其写入文本文件。

我正在考虑使用语音，但我不知道如何在没有 UI 默认的情况下使用它并删除自动停止。

基本上我需要记录和写入用户对我的应用程序的命令以及应用程序让他编辑文件的内容。我需要帮助将我的记录写入文本文件，知道吗？

谢谢你的时间

# cruisecontrol.net - CruiseControl.Net 依赖项目配置

> ID：13432440
> 
> 赞同：1
> 
> 时间：2012-11-17T16:30:10.153
> 
> 标签：cruisecontrol.net, ccnet-config

我想为同一个 .net 项目设置以下 CI 配置：

1.  构建并运行单元测试（CCNet Project1）。
2.  构建并运行验收（端到端集成）测试（CCNet Project2）。

因此，我需要以某种方式配置仅在 Project1 成功的情况下才应执行 Project2，并使用与上一次成功的 Project1 修订版相同的修订版。

我设法配置了远程项目触发器。但是，我不清楚在从 SVN 获取源时如何使用与上次成功的 Project1 相同的修订号。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:53:00.963

由于这两个 CCNET 项目紧密耦合，我的建议是让 Project1 从 SVN 获取源代码并保持构建版本号同步。

您需要为依赖项目配置触发器和标签器。您使用[项目触发器](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Project_Trigger)作为触发器（我假设这就是您所说的“远程项目触发器”的意思）和[远程项目](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Remote_Project_Labeller)标签器作为标签器：

```
<project>
  <name>Project2</name>
  <sourcecontrol type="nullSourceControl" />
  <triggers>
    <projectTrigger>
      <project>Project1</project>
    </projectTrigger>
  </triggers>
  <labeller type="remoteProjectLabeller">
    <project>Project1</project>
  </labeller>
  <!-- ... -->
</project> 
```

# archive - 添加到tar后删除文件

> ID：13432441
> 
> 赞同：1
> 
> 时间：2012-11-17T16:30:27.297
> 
> 标签：archive, freebsd, tar

目前我正在处理备份mysql数据的bash脚本，我得到的唯一问题是它的参数`tar`正在处理`debian`，但它不工作`FreeBSD`。

是的，我已阅读： [添加到 tar 存档后删除文件](https://stackoverflow.com/questions/10781609/deleting-files-after-adding-to-tar-archive)

答案是我一直在使用的解决方案`debian`——我的意思是`--remove-files`参数。

在 FreeBSD 上执行以下命令：

`tar --remove-files -jcPf $DIR/$Y/$M/$D/mysql-$HOUR.tar.bz2 *.sql`

引发以下错误：

```
tar: Option --remove-files is not supported 
```

我还没有找到任何类似于`--remove-files`参数的东西。在阅读时`man tar`，那么解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:53:58.190

它必须是tar选项吗？很可能 --remove-files 是 gnu 扩展（或其他），因此您可能只需在 FreeBSD 上安装此“扩展”版本的 tar 并使用它。

如果您不能/不想这样做，我认为这样做：

```
tar -jvcPf $DIR/$Y/$M/$D/mysql-$HOUR.tar.bz2 *.sql | xargs rm 
```

顺便说一句，我认为 '-' 可以（并且应该）从 tar 选项中省略...

# model-view-controller - Struts 中的多个动作

> ID：13432443
> 
> 赞同：0
> 
> 时间：2012-11-17T16:30:48.950
> 
> 标签：model-view-controller, jakarta-ee, struts

我目前是 Java EE 的新手，我刚刚完成了 Java EE 课程。我们被要求使用 MVC Struts 1 创建一个具有添加、编辑和删除功能的程序。

所以我的问题是，如何通过多个动作来做到这一点？您是否有任何教程解释了如何使用 Struts 创建成功的 Web 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:42:40.153

**[学习的最佳链接](http://www.rameshsengani.in/vaannila/struts/struts-tutorial/struts-tutorial.html)**

注册.jsp

```
 <form name="myform">
    // other inputs going here
    <input type="button" name="add" value="add" id="add" onclick="submitAction(this)">
    <input type="button" name="update" value="update" id="update" onclick="submitAction(this)">
    <input type="button" name="delete" value="delete" id="delete" onclick="submitAction(this)">
    </form> 
```

javascript:

```
function submitAction(actType)
{
document.myform.action = actType.id;
document.myform.submit();

}

<action name="MyUpdateAction" type="test.MyUpdateAction" path="/update" input="/register.jsp">
  <forward name="success" path="/updated.jsp" />
  <forward name="failure" path="/failure.jsp" />
</action>
<action name="MyAddAction" tepe="test.MyAddAction" path="/add" input="/register.jsp">
  <forward name="success" path="/added.jsp" />
  <forward name="failure" path="/failure.jsp" />
</action>
<action name="MyDeleteAction" type="test.MyDeleteAction" path="/delete" input="/register.jsp">
  <forward name="success" path="/deleted.jsp" />
  <forward name="failure" path="/failure.jsp" />
</action> 
```

包测试中的 Struts 操作：

```
 public class MyUpdateAction extends org.apache.struts.action.Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception 
    {       //do update Stuff...
        if () {
            return mapping.findForward("success");
        } else {
                return mapping.findForward("failure");}
    }

    public class MyAddAction extends org.apache.struts.action.Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception 
        {           //do add Stuff...       
        if () {
            return mapping.findForward("success");
        } else {
                return mapping.findForward("failure");}
        }

    public class MyDeleteAction extends org.apache.struts.action.Action {
    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception 
        {       //do delete Stuff...    
        if () {
            return mapping.findForward("success");
        } else {
                return mapping.findForward("failure");}
        } 
```

# r - 使用 R 在坐标系中绘制节点和边

> ID：13432444
> 
> 赞同：3
> 
> 时间：2012-11-17T16:30:54.457
> 
> 标签：r, graph, ggplot2, nodes

[我在这里](http://itee.uq.edu.au/~zxf/_papers/ACMMM08_distributionn.pdf)实现了 FR 测试，现在我想通过在 R 中可视化生成的最小生成树来测试它。顶点和边应该绘制在坐标系中。

此外，我想为每个点设置颜色（取决于它属于哪个样本），并通过点的大小表达可能的第三维。

这是我到目前为止所得到的：

```
library(ggplot2)

nodes <- data.frame(cbind(c("A", "A", "A", "B", "B", "B"), c(1,2,3,8,2,1), c(6,3,1,4,5,6)))
edges <- data.frame(cbind(c("A", "A", "A"), c("A", "B", "B"), c(1,3,2), c(6,1,5), c(2,8,1), c(3,4,6)))

p <- ggplot() + 
    geom_point(nodes, aes(x=nodes[,2], y=nodes[,3])) +
    geom_line(edges)

p 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:44:31.283

我也觉得`igraph`这里最好...

```
nodes <- data.frame(a=c("A", "A", "A", "B", "B", "B"), b=c(1,2,3,8,2,1), 
d=c(6,3,1,4,5,6)) 
#cbind made your nodes characters so i have removed it here

edges <- data.frame(a=c("A", "A", "A"), b=c("A", "B", "B"), d=c(1,3,2), 
e=c(6,1,5), f=c(2,8,1), g=c(3,4,6)) 
```

这是使用上述数据的示例，以`colouring`使用坐标布局系统生成颜色`coords`

```
library(igraph)

from <- c(rep(edges[,3],3),rep(edges[,4],2),edges[,5])
to <- c(edges[,4],edges[,5],edges[,6],edges[,5],edges[,6],edges[,6])
myedges <- data.frame(from,to)
actors <- data.frame(acts=c(1,2,3,4,5,6,8))
colouring <- sample(colours(), 7) 
sizes <- sample(15,7)
coords<-cbind(x=runif(7,0,1),y=runif(7,0,1))

myg <- graph.data.frame(myedges, vertices=actors, directed=FALSE)
V(myg)$colouring <- colouring
V(myg)$sizes <- sizes

plot(myg,vertex.color=V(myg)$colouring,vertex.size=V(myg)$sizes,
layout=coords,edge.color="#55555533") 
```

对于绘制跨越也有很多选项，例如

```
d <- c(1,2,3)

E(myg)$colouring <- "#55555533"
E(myg, path=d)$colouring <- "red"
V(myg)[ d ]$colouring <- "red"

plot(myg,vertex.color=V(myg)$colouring,vertex.size=V(myg)$sizes
,edge.width=3,layout=coords,edge.color=E(myg)$colouring ) 
```

带轴：

```
plot(myg,vertex.color=V(myg)$colouring,vertex.size=V(myg)$sizes
,edge.width=3,layout=coords,edge.color=E(myg)$colouring, axes=TRUE ) 
```

并用于`rescale=FALSE`保持原始轴比例

# trac - 设置日期关闭跟踪票

> ID：13432451
> 
> 赞同：0
> 
> 时间：2012-11-17T16:32:03.963
> 
> 标签：trac

我有一组通过原始 MS Excel 表管理的票证。工作表如下

开业日期 | 关闭日期 | 票务内容

我想把它们放在 trac 上，以便全面了解开闭票和开发团队的表现。但是，开箱即用的 trac 不允许我为过去的票设置打开/关闭日期。

有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:18:50.570

前段时间我也有类似的需求。[我在TicketImportPlugin](http://trac-hacks.org/wiki/TicketImportPlugin)的帮助下通过批量导入解决了这个问题。

我使用了文本类型的自定义字段到期日期。计算 POSIX（微）秒时间戳需要一些自定义公式，但效果很好。这些数字是导入的，之后我将字段类型更改为日期。请注意，我使用了修补过的 Trac 代码，该代码输入 Trac 上游版本 1.1dev，现在意味着 1.2。另一种选择是使用[DateFieldPlugin](http://trac-hacks.org/wiki/DateFieldPlugin)，它在内部处理日期字符串。但是，您知道，您可以使用可以立即获得 Trac 核心支持的[真正自定义时间字段的麻烦吗？](http://trac.edgewall.org/wiki/TracDev/Proposals/TracTicketsCustomTimeFields)

我也改变了创建日期/时间。这是通过导入另一个自定义字段并将值复制回`ticket`db 表的时间列来完成的。在配置和数据库上进行了一些肮脏的手工工作，但一旦发现它就像一个魅力，我在几分钟内就导入了 3000 多个多年的问题，并带有历史上正确的时间戳。

# php - 使用 memcached 进行 PHP 会话管理

> ID：13432458
> 
> 赞同：0
> 
> 时间：2012-11-17T16:33:05.850
> 
> 标签：php, session, memcached

如果有许多 memcached 或 memcached 服务器来保存 PHP 会话，PHP 是否在所有服务器中保存所有相同的会话？

示例：如果 PHP 配置如下：

```
session.save_handler = memcache
session.save_path = "tcp://server1:11211,tcp://server2:11211,tcp://server3:11211" 
```

如果我们有：

```
$_SESSION['user_id']=123456; 
```

这个变量会保存在 server1、server2 和 server3 中吗？

# php - PHP 通过 LoadHTML 从 div 加载内容

> ID：13432460
> 
> 赞同：0
> 
> 时间：2012-11-17T16:33:28.430
> 
> 标签：php

我在检索包含类名“tabEmbed”的特定 div 的 HTML 时遇到了一些问题

该代码有效，但由于某种原因，它只返回 txt ...没有 HTML。所有的文本格式都被删除了……通常也应该有嵌入代码。我错过了什么？

```
 $dom = new DOMDocument;
    @$dom->loadHTML($Video_Source_HTML);
    $Div_Data           = $dom->getElementsByTagName('div');

    foreach($Div_Data as $Div) {
     if ($Div->getAttribute('id') === 'tabEmbed') {
      $Embed_HTML = $Div->nodeValue;
      if(preg_match('/<input type="text"(.*?)">/is', $Embed_HTML, $Embed)) {
       $Embed_Code = $Embed[1];
      }
     }
    } 
```

网站视频嵌入代码源

```
 <div id="tabEmbed" class="tab">
        <h3 class="blackTitle">Embed this video to your site with this code:</h3>

        <input type="text" name="media_embed_code" id="mediaEmbedCodeInput" size="110" onclick="this.focus();this.select();" value="&lt;iframe src=&quot;&quot; frameborder=0 width=510 height=400 scrolling=no&gt;&lt;/iframe&gt;">
      </div> 
```

$Embed_HTML 来源：
使用以下代码将此视频嵌入您的网站：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:27:28.323

[`DOMDocument::getElementById()`](http://php.net/manual/en/domdocument.getelementbyid.php)首先，您可以通过使用而不是使用来大大简化您的代码[`DOMDocument::getElementsByTagName()`](http://php.net/manual/en/domdocument.getelementsbytagname.php)。

然后，如果您使用的 PHP 版本等于或高于 5.3.6，则可以使用[`DOMDocument::saveHTML()`](http://php.net/manual/en/domdocument.savehtml.php)输出节点的“outerHTML”，如下所示：

```
$dom = new DOMDocument;
@$dom->loadHTML( $Video_Source_HTML );

// let's use getElementById() in stead of getElementsByTagName()
$div = $dom->getElementById( 'tabEmbed' );

// be sure to check your browser's source code, or output this as text/plain
echo $dom->saveHTML( $div ); 
```

而且，根据[GordonM 的有用评论](https://stackoverflow.com/questions/13432460/php-load-content-from-div-via-loadhtml/13432931#comment18363442_13432931)，您可以[`DOMDocument::saveXML()`](http://php.net/manual/en/domdocument.savexml.php)在 5.3.6 之前的 PHP 版本中使用，以获得可接受的结果（取决于原始 HTML 的实际内容），如下所示：

```
echo $dom->saveXML( $div ); 
```

# ruby-on-rails - 同一模型的两个不同类别

> ID：13432462
> 
> 赞同：0
> 
> 时间：2012-11-17T16:33:52.260
> 
> 标签：ruby-on-rails, activerecord, orm, ruby-on-rails-3.2

我的关系有问题，我不知道如何编码。我一直在看rails guide，但没有运气。

我有 3 个模型：用户、所有者和公司。

*   用户属于_to Company / Company has_many Users

*   公司属于_to Owner / Owner has_one Company

问题是下一个：用户和所有者是相同的模型，我现在有可能两个不同的类使用相同的模型。但我不知道该怎么做。有人可以帮我处理这些吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:37:53.810

您可以像这样定义关联：

```
Company has_many users, dependent: :destroy
User belongs_to company
User has_one company 
```

如果您的公司表有列调用 owner_id，请定义：

```
Company belongs_to owner, class_name: "User" 
```

如果您的公司表有列调用 user_id，请定义：

```
Company belongs_to owner, class_name: "User", foreign_key: user_id 
```

# php - 在php中用正则表达式检查用户输入的值

> ID：13432464
> 
> 赞同：1
> 
> 时间：2012-11-17T16:33:59.800
> 
> 标签：php, regex, validation

在我的程序 php 中，我希望用户不输入任何字符，除了像这样的字母：“dgdh”、“sgfdgdfg”，但他没有输入数字或其他任何东西，如“7657”或“gfd(-”或“fd54”我测试了这个功能，但它并不涵盖所有情况：

```
preg_match("#[^0-9]#",$_POST['chaine']) 
```

我怎样才能做到这一点，提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:36:42.477

**仅**匹配字母*（无空格）*：

```
preg_match("#^[a-zA-Z]+$#",$_POST['chaine']) 
```

解释：

```
^         # matches the start of the line
[a-zA-Z]  # matches any letter (upper or lowercase)
+         # means the previous pattern must match at least once
$         # matches the end of the line 
```

带空格：

```
preg_match("#^[a-zA-Z ]+$#",$_POST['chaine']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:37:13.780

两件事情。首先，您匹配非数字字符。这显然与字母字符不同。所以你可以简单地使用`[a-zA-Z]`or`[a-z]`和不区分大小写的修饰符。

其次，您只尝试找到其中一个字符。您不会断言整个字符串是由这些组成的。所以改用这个：

```
preg_match("#^[a-z]*$#i",$_POST['chaine']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:39:22.603

最简单的可以是

```
preg_match('/^[a-z]+$/i', $_POST['chaine']) 
```

修饰符用于`i`不区分大小写。这样`+`至少可以输入一个字母。`*`如果要允许空字符串，可以将其更改为。锚`^`并`$`强制整个字符串只是字母表。（它们分别代表字符串的开头和字符串的结尾）。

* * *

**如果你想允许 whitespace**，你可以使用：

仅在字符串的开头或结尾处有空格：

```
preg_match('/^\s*[a-z]+\s*$/i', $_POST['chaine']) 
```

任何地方：

```
preg_match('/^[a-z][\sa-z]*$/i', $_POST['chaine'])    // at least one alphabet 
```

只允许空格字符，但不允许其他空格：

```
preg_match('/^[a-z][ a-z]*$/i', $_POST['chaine']) 
```

# javascript - 使用javascript“单击”没有ID的提交按钮

> ID：13432465
> 
> 赞同：1
> 
> 时间：2012-11-17T16:34:12.163
> 
> 标签：javascript, html, forms, submit, greasemonkey

这是我想使用javascript“单击”的提交按钮。

```
<input type="submit" name="REG_BTN" value="Submit Changes"> 
```

我正在尝试使用类似...的东西

```
document.getElementsByTagName('submit')[0].click(); 
```

“单击”按钮，但它不起作用。我正在编写一个在浏览器中运行的脚本，因此我无法更改提交按钮的任何方面。我是 javascript 新手，所以它可能只是一些简单的东西，我没有接受。还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T16:37:44.543

该`tagName`元素的`INPUT`; 没有带有标签 name 的元素`submit`。试试这个：

```
document.getElementsByName('REG_BTN')[0].click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T20:03:10.177

如果页面首先加载完成，请使用 querySelector (CSS) 并单击。

'

```
if (document.readyState=='complete'){
  document.querySelector('input[type*="submit"]').click();
} 
```

'

# android - 如何加快从服务器加载图像的速度 - Android

> ID：13432471
> 
> 赞同：0
> 
> 时间：2012-11-17T16:34:58.297
> 
> 标签：android, android-asynctask

我仍然是 Android 和 java 的初学者。我正在尝试使用 AsyncTask 从服务器加载图像。图像的大小约为 50kb。然而，它需要几秒钟才能出现。以下代码用于从服务器下载图像。

```
 public static Bitmap getBitmapFromURL(String src) {

    try {

        URL url = new URL(src);

        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();

        connection.setDoInput(true);

        connection.connect();

        InputStream input = connection.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(input);
        Bitmap myBitmap = BitmapFactory.decodeStream(bis);

        return myBitmap;

    } catch (IOException e) {

        e.printStackTrace();

        return null;

    } 
```

有人可以告诉我如何加快这个过程。除了网络速度之外，这个过程还取决于哪些因素？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:40:56.577

首先，我建议您搜索图像尺寸缩小算法。然后，您可以选择一些方法来加载图片。例如，在第一步中，您可以加载小尺寸图像。之后，您可以在后台加载正常尺寸的图像并将每个缩小尺寸的图像更新为正常尺寸的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:44:47.800

这是有效加载位图的一个很好的资源。

[Android 开发者网站 - 高效加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

它还包括一个代码示例。

# html - 加载 attr("href") 加上特定的内容 div

> ID：13432472
> 
> 赞同：1
> 
> 时间：2012-11-17T16:35:02.897
> 
> 标签：html, load, href, attr

我正在将一个链接加载到这样的弹出窗口中：`popup.load(this.getTrigger().attr("href"));` 这是有效的，但更具体地说，我只想要`.include`加载的 div 中的内容`href`。我将如何更新上面的代码以调用其中的`.include`内容`href`？

谢谢

# iphone - 重新创建 iOS 相机应用程序覆盖按钮

> ID：13432479
> 
> 赞同：4
> 
> 时间：2012-11-17T16:35:39.557
> 
> 标签：iphone, objective-c, ios, camera, uikit

我正在尝试在我自己的基于 GPUFilter 构建的自定义相机应用程序中从 iOS 重新创建 Camera.app 按钮和界面。特别讨论应用顶部的 Flash、选项和前后摄像头按钮切换：

![相机应用](../Images/b6fcb1604d092928ea45b7d3fe92647d.png)

很想知道这些是否作为 UI 对象内置到 Storyboard 中，或者是否有另一种简单的方法可以在不完全重新编程的情况下重新创建它们。我也有兴趣使用他们使用的覆盖表视图（如上图）作为选项。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:54:09.953

您可以使用 AVCamCaptureManager 和 AVCamRecorder 类。Apple 在其开发者网站上构建了一个演示[程序](https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)。

# java - 如何画一条透明线？

> ID：13432480
> 
> 赞同：2
> 
> 时间：2012-11-17T16:35:53.313
> 
> 标签：java, jpanel, line, transparency, graphics2d

我正在通过 JPanel 在 JPanel 上画一条蓝色实线

```
public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;

    super.paint(g2);

    if (path.size() >= 2) {
        BasisStroke stroke = new BasicStroke(Config.TILE_SIZE_IN_PIXEL / 3, BasicStroke.CAP_ROUND, BasicStroke.JOIN_BEVEL);
        g2.setStroke(stroke);
        g2.setPaint(Color.BLUE);
        g2.setPaintMode();

        for (int i = 0; i < path.size() - 1; i++) {
            g2.drawLine(path.get(i).x, path.get(i).y, path.get(i + 1).x, path.get(i + 1).y);
        }
    }
} 
```

然而我希望这条线是半透明的。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T16:39:41.200

简短的回答是设置`alpha`图形上下文的颜色：

```
float alpha = 0.5;
Color color = new Color(1, 0, 0, alpha); //Red 
g2.setPaint(color); 
```

Alpha 范围在`0.0f`（不可见）到`1.0f`（不透明）之间

有关示例的详细答案，[请参阅本文](http://www.informit.com/articles/article.aspx?p=26349&seqNum=5)。

# php - 如何发送包含多个变量的电子邮件

> ID：13432481
> 
> 赞同：1
> 
> 时间：2012-11-17T16:36:03.417
> 
> 标签：php

> **可能重复：**
> [PHP Pear - 将变量添加到 $body 消息（已解决）](https://stackoverflow.com/questions/7528530/php-pear-adding-variables-to-body-message-resolved)

我有一个带有基本表单的 jQuery 页面，我将每个输入的信息存储到一个特定的变量中，然后使用 Ajax 但是当我提交表单时

它可以工作，但它只在消息中发送一个变量，而不是我需要的多个变量..

变量已正确链接，因为我可以让函数具有其中一个变量并显示它，但是当我尝试发送多个时，它只显示一个。

如果它不够清楚，很难解释，我深表歉意，我认为使用`+`'s 会起作用，但事实并非如此。

```
<?php

$telephone = $_POST['telephone'];
$address = $_POST['address'];
$email = $_POST['email'];
$feedback = $_POST['feedback'];

mail($email,"hello" ,$feedback+$address+$telephone);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:40:28.123

加号`+`运算符用于数值。

```
$feedback+$address+$telephone 
```

因此，您的添加将导致`0`.

使用[字符串连接运算符`.`](https://stackoverflow.com/questions/6484968/what-does-a-dot-do-in-php)或仅使用其中包含变量的字符串：

```
"  $feedback $address $telephone  " 
```

也可以看看：

*   [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)
*   [http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T16:40:53.653

就像是

```
 mail(to,subject,message,headers,parameters) 
```

尝试

```
$message="$feedback.$address.$telephone";
mail($email,"hello" ,$message); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T16:40:19.140

你的代码看起来不错。你可能有字符串连接的 Java 风格（检查[http://php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)）尝试将所有字符串变量放在一个 $message 字符串中，你很高兴。

```
<?php

$telephone = $_POST['telephone'];
$address = $_POST['address'];
$email = $_POST['email'];
$feedback = $_POST['feedback'];
$message="$feedback.$address.$telephone";
mail($email,"hello" ,$message);

?> 
```

由于 php 中的 mail 函数返回布尔值，你也可以做一些检查：

```
<?php
if (!mail($email,"hello" ,$message)){
//LOG ERROR 
//OR output
echo "Could not send mail, try checking php logs or enable logs via ini_set('display_errors',1)"
} 
```

# c# - 如何使用 windows phone 7.5 在 Facebook 上创建位置？

> ID：13432482
> 
> 赞同：1
> 
> 时间：2012-11-17T16:36:10.180
> 
> 标签：c#, windows-phone-7, facebook-graph-api, facebook-c#-sdk

我正在尝试在我目前正在开发的以 Facebook 为中心、基于位置的 WP7 应用程序中实现简单的签到功能。我已经设法搜索并返回给定半径内可能的签到列表并签到一个。我现在正在尝试添加一个“自定义”签入，以防用户对任何可用选项都不感兴趣。您能否建议如何做到这一点？我假设它将类似于“创建位置并返回新创建的 ID”，但我不知道如何创建位置。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:46:46.927

为了在 Facebook 上创建地点，它必须是 Facebook 页面或开放图形对象。您显然不能通过 Graph API 创建 Facebook 页面，但是您可以创建 Open Graph 对象。

基本上你在这里要做的是允许你的用户签到一个地方，如果这个地方是新的，那么你在你自己的服务器上的数据库中创建它，你会有一个加载正确的开放图的端点该地点的数据在您的网络服务器上。然后，您将为用户将签到发布到 Facebook，并将其指向您创建的 Web 端点。这将导致 Facebook 查找您的图表数据、创建图表对象并保存用户的签到。如果他们签到的地点已经存在，那么您将传递现有的端点或 Facebook 分配给该地点的唯一地点 ID，而不是传递新的 Web 端点。

您可以在 Facebook 开发人员文档中阅读有关您需要使用的每项技术的更多信息。[Open Graph Protocol](http://developers.facebook.com/docs/opengraph/) [Check-ins](http://developers.facebook.com/docs/reference/api/checkin/)和 Graph API 对象选择 (http://developers.facebook.com/docs/reference/api/#reading)

# c# - 输入字符串的格式不正确

> ID：13432485
> 
> 赞同：-7
> 
> 时间：2012-11-17T16:36:37.893
> 
> 标签：c#, .net, visual-studio-2010

```
namespace Exer3
{
    public partial class MyCalculator : Form
    {
        public MyCalculator()
        {
            InitializeComponent();
        }

        private void btnAdd_Click(object sender, EventArgs e)
        {   

            int num1 = Convert.ToInt32(txtNum1.Text);
            int num2 = Convert.ToInt32(txtNum2.Text);

            if (txtNum1.Text.Length == 0 & txtNum2.Text.Length == 0)
            {
                MessageBox.Show("No Input Detected");
                txtNum1.Focus();
                txtNum2.Focus();
            }
            else

            lblTotal.Text = (num1 + num2).ToString();

        }

        }
    } 
```

当我运行程序并且计算良好时..但是当我尝试将文本框留空并单击添加按钮时，消息框将出现“未检测到输入”，之后程序将开始调试并显示“输入字符串不是以正确的格式”。请帮助解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:40:48.060

将这些行更改为

```
int num1 = Convert.ToInt32("0"+txtNum1.Text);
int num2 = Convert.ToInt32("0"+txtNum2.Text); 
```

或使用`int.TryParse`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:39:33.860

这里的问题是你正在转换你不知道它是否包含有效数字的文本框，试试这个

```
if (txtNum1.Text.Length == 0 && txtNum2.Text.Length == 0)
{
    MessageBox.Show("No Input Detected");
    txtNum1.Focus();
    txtNum2.Focus();
}
else
{
    int num1 = Convert.ToInt32(txtNum1.Text);
    int num2 = Convert.ToInt32(txtNum2.Text);
    lblTotal.Text = (num1 + num2).ToString();
} 
```

# apache - Mod-Rewrite 规则正在破坏 404 路由

> ID：13432488
> 
> 赞同：0
> 
> 时间：2012-11-17T16:36:52.150
> 
> 标签：apache, .htaccess, mod-rewrite, http-status-code-404

我`mod-rewrite`在我的`.htaccess`文件中使用以下内容：

```
RewriteRule ^$ pages/
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ pages/$1 [L] 
```

目的是隐藏调用的子目录，使其`/pages/`不显示在 URL 中。

所以这： `http://mysite.com/pages/home.html`

看起来像这样： `http://mysite.com/home.html`

它有效，但有一些意想不到的后果。

作为`.htaccess`我上面发布的代码的直接结果，我的 404 路由根本不再工作。任何应该触发 404 错误页面的东西都会生成一个`500 Server Error`.

怎么修？

* * *

**编辑：**

如上所述，是否定义了自定义 404 页面`.htaccess`并不重要。没有它，或者错误页面的路径不正确，服务器仍应路由到其默认的 404 页面，而不是提供`500 Server Error`.

**当然，必须有一种标准方法来抑制 URL 的各个部分，而不会破坏 404 错误的正常路由。** 从我的在线研究看来，我上面的方法通常会破坏 404 路由，但到目前为止，我还没有看到任何适用的解决方案。（这不是 Wordpress 安装；只是静态 HTML 内容）

* * *

**编辑2：**

由于我只想抑制 URL 中的一个目录，因此我从未提到我还有其他文件和目录，它们是`/pages/`不能指向的同级文件`/pages/`，例如`/graphics/`, `/includes/`, `/css/`, `/cgi-bin/`, `robots.txt`,`favicon.ico`等。

也许这一切都是徒劳的，或者比它的价值更多的麻烦？

无论哪种方式都在寻找明确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:12:37.650

以下配置将在其中查找您的静态页面`pages/`，如果找到，它将显示它们。这不应该破坏 404。把它放在你网站的根文件夹中`.htaccess`

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/pages/%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/pages/%{REQUEST_URI} -d
RewriteRule ^(.*)$ /pages/$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:03:18.760

感谢@Kamil Šrot 获得最接近的工作解决方案。但是，我需要添加另一个测试 ( `-d`) 以查看请求的 URI 是否是目录。

这很好用，`404 error`页面再次正确路由。

```
RewriteEngine On
RewriteBase /
RewriteCond %{DOCUMENT_ROOT}/pages/%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/pages/%{REQUEST_URI} -d
RewriteRule ^(.*)$ /pages/$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T00:18:17.870

这应该可以实现您正在尝试做的事情。

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/([a-zA-Z0-9\_\-]+)\.html$
RewriteRule (.*) /pages/$1 [L] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-17T16:56:27.063

如何在`htaccess`文件中添加错误页面方向以处理 404 页面：

```
ErrorDocument 404 /path/to/your/404.html 
```

# asp.net - ASP.NET 或 SQL Server 2008 中的并发更新处理

> ID：13432489
> 
> 赞同：4
> 
> 时间：2012-11-17T16:36:54.210
> 
> 标签：asp.net, sql-server, asp.net-mvc, sql-server-2008

有一个名为的表`Accounts`，如下所示：

```
AccountID   AccountName   AccountTotalMoney
-------------------------------------------
  1           Steven           600
  3           Scott            800 
```

但是用户现在可以同时更新行记录，如下所示：

```
User A:UPDATE Accounts SET AccountTotalMoney=700 WHERE AccountID=1;
User B:UPDATE Accounts SET AccountTotalMoney=900 WHERE AccountID=1;
User C:UPDATE Accounts SET AccountTotalMoney=1000 WHERE AccountID=1;
.
.
. 
```

所以我想防止多个用户同时更新同一条记录。就一个接一个。

我是这方面的新手。对不起，我的英语不好。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T16:39:40.200

有很多可能性。

[意见：我认为大多数 Web 应用程序都进行乐观并发处理]：

在这里可以找到关于乐观并发处理的一个很好的教程：http: [//msdn.microsoft.com/en-us/library/bb404102.aspx](http://msdn.microsoft.com/en-us/library/bb404102.aspx)

小摘要：

类似地，当两个用户访问一个页面时，一个用户可能正在更新一条记录，而该记录被另一个用户删除。或者，在用户加载页面和单击“删除”按钮之间，另一个用户可能已经修改了该记录的内容。

有三种可用的并发控制策略：

*   什么都不做——如果并发用户正在修改相同的记录，让最后一次提交获胜（默认行为）。•</li>
*   乐观并发——假设虽然偶尔会出现并发冲突，但绝大多数情况下不会出现这种冲突；因此，如果确实发生了冲突，只需通知用户他们的更改无法保存，因为另一个用户修改了相同的数据。
*   悲观并发——假设并发冲突是司空见惯的，并且用户不会容忍被告知他们的更改由于另一个用户的并发活动而没有保存；因此，当一个用户开始更新记录时，将其锁定，从而防止任何其他用户编辑或删除该记录，直到用户提交他们的修改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T20:10:14.810

我认为 Pleuns 的回答很好。更具体地说：

*   Optimistic concurrencey - 检查该行是否更改，如果更改则回滚。示例：添加每次更新后增加的版本列，并检查更新时版本号是否相同。

*   悲观并发：更复杂。使用事务级别 IsolationLevel.Serializable 来锁定行，但是当事务跨越多个 Web 请求时，这不是一个好主意。

# java - 使用 Jackson 解析 JSON 时限制 Map 值

> ID：13432491
> 
> 赞同：1
> 
> 时间：2012-11-17T16:37:12.413
> 
> 标签：java, json, jackson

我正在使用[Jackson](http://jackson.codehaus.org/)解析 JSON，其中一个字段是任意键和值的字典。`Map<String, Object>`如果不是因为我们只允许某些值类型（`String`、`Long`、和）`Double`，这通常会直接映射到 Java 。`Long[]``Double[]`

目前我们完整解析文档，然后遍历每个映射的每个值并执行`instanceof`检查它是否有效，当无效时向用户返回错误。对于我们有很多长文档，这当然是相当低效的。

有没有人知道一种向杰克逊表达这种映射值类型限制的方法，以便在解析期间可以捕获输入中的任何错误？`@JsonSubTypes`注释看起来可能是相关的，但无法确定在这种情况下如何应用它。

这是我希望替换的代码类型的示例：

```
static class Doc {
    List<Item> items;
}

static class Item {
    /* ...other fields snipped... */
    public Map<String, Object> payload;

    @JsonIgnore
    public void check() throws Exception {
        for(Object value: item.payload.values()) {
            if(value instanceof String) { 
            else if(value instanceof Long) { }
            else if(value instanceof Long[]) { }
            else if(value instanceof Double) { }
            else if(value instanceof Double[]) { }
            else { throw new Exception("Unsupported value type"); }
        }
    }
}

void read(InputStream stream) throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    Doc doc = mapper.readValue(stream, Doc.class);

    // Check all payload types are valid
    for(Item item: doc.items) {
        item.check()
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:05:37.803

没有特定的功能可以做到这一点，但是如何创建`Map`为不可接受的子类型抛出异常的子类呢？就像是：

```
public class LimitedMap extends HashMap<String,Object> {
  public Object put(String key, Object value) {
     // verify it's not a Boolean or Map. And note that Jackson uses List
     // for JSON Arrays; Double for floating point (by default), Integer or Long for ints
  }
} 
```

另一种方法是使用`JSON Schema`验证器（其中许多基于杰克逊）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:29:26.427

好吧，找不到一种方法来使用 Jackson 提供的注释或类型系统来表达我想要的东西，所以我最终通过编写自定义反序列化器来做我试图避免的事情。

诚然，这确实允许对允许的数据类型和解析错误进行更简洁的控制，但它比我想要的更冗长！

# python - 如何在 matplotlib 中绘制 3D 旋转图？

> ID：13432492
> 
> 赞同：8
> 
> 时间：2012-11-17T16:37:17.973
> 
> 标签：python, numpy, matplotlib

假设您有一条二维曲线，例如：

```
from matplotlib import pylab
t = numpy.linspace(-1, 1, 21)
z = -t**2
pylab.plot(t, z) 
```

产生

![http://i.imgur.com/feQzk.png](../Images/1c3cf640bdc43725519a968b61aa4a35.png)

我想进行革命以实现 3d 绘图（请参阅[http://reference.wolfram.com/mathematica/ref/RevolutionPlot3D.html](http://reference.wolfram.com/mathematica/ref/RevolutionPlot3D.html)）。绘制 3d 表面不是问题，但它不会产生我期望的结果：

![http://i.imgur.com/ljXHQ.png](../Images/c3bb9da126b7479be1e55e0d87bbafdc.png)

如何在 3d 图中执行这条蓝色曲线的旋转？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:51:25.280

你的图似乎使用笛卡尔网格。matplotlib 网站上有一些关于 3D 圆柱函数的示例，例如 Z = f(R)（此处： http: [//matplotlib.org/examples/mplot3d/surface3d_radial_demo.html](http://matplotlib.org/examples/mplot3d/surface3d_radial_demo.html)）。那是你要找的吗？以下是我使用您的函数 Z = -R**2 得到的结果：![Z = -R**2 函数的图](../Images/c4e807a31fecb3fa7e3cfa81d2a67a1a.png)

并为您的函数添加截止，请使用以下示例：（需要 matplotlib 1.2.0）

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.arange(-5, 5, 0.25)
Y = np.arange(-5, 5, 0.25)
X, Y = np.meshgrid(X, Y)

Z = -(abs(X) + abs(Y))

## 1) Initial surface
# Flatten mesh arrays, necessary for plot_trisurf function
X = X.flatten()
Y = Y.flatten()
Z = Z.flatten()

# Plot initial 3D surface with triangles (more flexible than quad)
#surfi = ax.plot_trisurf(X, Y, Z, cmap=cm.jet, linewidth=0.2)

## 2) Cut off
# Get desired values indexes
cut_idx = np.where(Z > -5)

# Apply the "cut off"
Xc = X[cut_idx]
Yc = Y[cut_idx]
Zc = Z[cut_idx]

# Plot the new surface (it would be impossible with quad grid)
surfc = ax.plot_trisurf(Xc, Yc, Zc, cmap=cm.jet, linewidth=0.2)

# You can force limit if you want to compare both graphs...
ax.set_xlim(-5,5)
ax.set_ylim(-5,5)
ax.set_zlim(-10,0)

plt.show() 
```

冲浪的结果：

![冲浪](../Images/c5703ba129086baa583914318e52eb25.png)

和冲浪：

![冲浪](../Images/a735eb01c4f4bb3196c4227c07c5c93a.png)

# iphone - 使用 UIActivityViewController 感到困惑

> ID：13432498
> 
> 赞同：2
> 
> 时间：2012-11-17T16:38:34.093
> 
> 标签：iphone, objective-c, ios6, uiactivityviewcontroller

你能帮我理解什么时候应该使用`UIActivityViewController`. 我有一个按钮，可以共享有关我的应用程序的常见信息（例如带有链接和图像的“我喜欢这个应用程序”）。我的旧代码是：

```
NSMutableDictionary *params = [NSMutableDictionary dictionary];
[params setObject:picture forKey:@"picture"];
[params setObject:link forKey:@"link"];
[params setObject:@"I like MY app!" forKey:@"caption"];
[params setObject:@"I am now using MY iPhone app." forKey:@"description"];
[params setObject:linkToTheIcon forKey:@"icon"];
[params setObject:@"including link" forKey:@"type"];
[[FacebookConnection instance] feedLink:params andDelegate:self]; 
```

现在我想使用`UIActivityViewController`，但我有点困惑如何将所有这些参数传递给它。还是我应该以其他方式做事？

补充：所以我明白我需要静默发布程序。您能否指导我完成使用 iOS 6 功能的静默发布程序（使用内置 FB 帐户编辑​​）。现在我不明白如何检查设备上是否存在FB帐户，如果不是如何提示创建它？ACAccount 存储类`– requestAccessToAccountsWithType:options:completion:`中有一个访问帐户的方法。但如果帐户不存在，则会返回错误。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:53:44.247

在您的情况下，您显然不应该使用`UIActivityViewController`，因为您想在 Facebook 上而不是在 Twitter 或其他任何地方发帖，对吧？首先，您需要访问用户的帐户。你这样做：

```
-(void)requestBasicPermissionsForFacebookAccount {
    ACAccountType * facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray * permissions = @[@"email"];
    NSDictionary * options = @{ACFacebookAppIdKey : kFacebookAppId, ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceEveryone};
    FacebookAccountManager * fbMgr = [[FacebookAccountManager alloc] init];
    [self.accountStore requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *error) {
        if (granted) {
            NSArray * accounts = [self.accountStore accountsWithAccountType:facebookAccountType];
            fbMgr.account = [accounts lastObject];
            fbMgr.isBasicPermissionsGranted = YES;
            [self.accountManagers addObject:fbMgr];
            NSLog(@"granted!");
        }
        else {
            fbMgr.account = nil;
            fbMgr.isBasicPermissionsGranted = NO;
            switch ([error code]) {
                case 1:
                    [self showErrorAlertWithMessage:@"Unknown error occured, try again later!"];
                    break;
                case 3:
                    [self showErrorAlertWithMessage:@"Authentication failed, try again later!"];
                     break;
                case 6:
                    [self showErrorAlertWithMessage:@"Facebook account does not exists. Please create it in Settings and come back!"];
                     break;
                 case 7:
                    [self showErrorAlertWithMessage:@"Permission request failed. You won't be able to share information to Facebook"];
                     break;
                default:
                    break;
            }
            NSLog(@"error is: %@", error);
        }
    }];
} 
```

如果帐户不存在，您应该提示用户在设置中创建它，然后尝试再次获取基本权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:23:29.200

您首先需要继承 UIActivity。

然后您需要重写某些方法，包括用于设置图标的 activityImage 和用于执行操作的 performActivity 。

如果不是静默执行操作，而是首先需要进一步的用户交互和自定义活动的信息（例如，标准 UIActivity 的 Twitter 帖子），则应该覆盖 activityViewController 而不是 performActivity。

在继承了 UIActivity（例如 MyActivity）之后，您应该创建 MyActivity 的一个实例，并使其成为您传递给 initWithActivityItems:applicationActivities: 的 applicationActivities 数组的一个元素。

查看[UIActivity 的文档，](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)了解在子类化和图标要求时需要覆盖的确切内容。

希望这有所帮助

# asp.net - 如何在 Vb 2010 中的 SQL 中使用参数（Web 开发人员）

> ID：13432499
> 
> 赞同：0
> 
> 时间：2012-11-17T16:38:35.780
> 
> 标签：asp.net, sql, vb.net, sqlconnection, sqlparameter

我正在尝试`SQL`编写代码，`VB`但我遇到了问题，我有一个简单的数据库，其中包含表 admin`UserName`和`Password`.

我希望能够从文本框中读取数据，然后将其输入到 SQL 字符串中……SQL 字符串有效（我已经测试过），我可以用一个简单的`SELECT`语句将其输出，但我似乎做不到让 SQL 读取我的参数。

帮助？

```
Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Call Password_Check(txtTestInput.Text)
End Sub

Public Sub Password_Check(ByVal Answer As String)

    Dim con As New SqlConnection
    Dim cmd As New SqlCommand
    Dim parameter As New SqlParameter("@Username", Answer)
    Try

        con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("Database1ConnectionString1").ConnectionString
        con.Open()
        cmd.Connection = con
        cmd.CommandText = " SELECT Password FROM Admin WHERE (UserName = @Username)"
        cmd.Parameters.Add(parameter)
        Dim lrd As SqlDataReader = cmd.ExecuteReader()

        While lrd.Read()
            Dim sothing As String

            sothing = lrd("Password").ToString
            If lrd("Password").ToString = txtPassword.Text Then
                lblTestData.Text = "passwordSuccess"
            ElseIf lrd("Password").ToString <> txtPassword.Text Then
                lblTestData.Text = "passwordFail...:("
            End If
        End While

    Catch ex As Exception
        lblTestData.Text = "Error while retrieving records on table..." & ex.Message
    Finally
        con.Close()
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:18:57.230

关于您的数据库系统，它可能不支持参数名称。你有没有尝试过 ？您使用的 Wat DB 系统？

```
cmd.CommandText = " SELECT Password FROM Admin WHERE (UserName = ?)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:08:11.713

在上面的代码中：->`Dim parameter As New SqlParameter("@Username", Answer)`

我可以建议两个选项：

```
Dim parameter As New SqlParameter("@Username", sqldbtype.nvarchar)

parameter.value = Answer 
```

或者

```
cmd.CommandText = string.format("SELECT Password FROM Admin WHERE (UserName = {0})", Answer) 
```

完整代码：

```
Public Sub Password_Check(ByVal Answer As String)

    Dim con As New SqlConnection
    Dim cmd As New SqlCommand
    Dim parameter As New SqlParameter("@Username", SqlDbType.NVarChar)
    parameter.Value = Answer
    Try

        con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("Database1ConnectionString1").ConnectionString
        con.Open()
        cmd.Connection = con
        cmd.CommandText = "SELECT Password FROM Admin WHERE (UserName = @Username)"
        cmd.Parameters.Add(parameter)
        Dim lrd As SqlDataReader = cmd.ExecuteReader()

        While lrd.Read()
            Dim sothing As String

            sothing = lrd("Password").ToString
            If lrd("Password").ToString = txtPassword.Text Then
                lblTestData.Text = "passwordSuccess"
            ElseIf lrd("Password").ToString <> txtPassword.Text Then
                lblTestData.Text = "passwordFail...:("
            End If
        End While

    Catch ex As Exception
        lblTestData.Text = "Error while retrieving records on table..." & ex.Message
    Finally
        con.Close()
    End Try

End Sub 
```

# javascript - 使用 Jquery 获取图像的位置

> ID：13432500
> 
> 赞同：0
> 
> 时间：2012-11-17T16:38:38.020
> 
> 标签：javascript, jquery, html, image

我正在尝试使用 Jquery 获取图像的位置。唯一的问题是它只给了我加载文档时图像的位置。

```
$(".frog").click(function(){
    alert($(".frog").position().left);  
}); 
```

移动后如何获取图像的位置？

/约翰内斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:44:26.170

`.position`给出相对于父 `.offset`级的位置 给出相对于文档的位置

# javascript - 在 Chromebook 上使用 Chrome 在 google-apps-script 文件中强制执行严格模式

> ID：13432501
> 
> 赞同：5
> 
> 时间：2012-11-17T16:38:41.913
> 
> 标签：javascript, google-apps-script, strict

在 google-apps-script 脚本文件中是否可以设置“使用严格”？我创建了一个函数来测试它

```
function a () {  //logs - function a
  "use strict";
  Logger.log(arguments.callee);
} 
```

如果强制执行严格模式，我认为这个语句会抛出 TypeError。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T01:04:25.433

Apps 脚本不支持服务器上的严格模式。如果您使用 HtmlService，那么无论您是否指定“使用严格”，您编写的所有客户端脚本代码都是隐式严格模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-21T23:24:49.963

在旧运行时 (Rhino) 上不可能，但在新运行时 (V8) 上是可能的。

有报告称曾经在旧运行时上运行的脚本在新运行时上不运行，因此计划在将此更改应用于“生产”之前进行一些测试。

资源

*   [https://developers.google.com/apps-script/guides/v8-runtime](https://developers.google.com/apps-script/guides/v8-runtime)
*   [https://developers.google.com/apps-script/guides/v8-runtime/migration](https://developers.google.com/apps-script/guides/v8-runtime/migration)

# php - MySQL查询将'添加到变量

> ID：13432503
> 
> 赞同：1
> 
> 时间：2012-11-17T16:38:44.290
> 
> 标签：php, mysql, sql

我正在运行的 MySQL 查询引发以下错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“desc = 'Enter Description Here'' 附近使用正确的语法

desc 是一个变量 '$desc' 错误表明在 desc 之前有一个额外的 ' 但如果我完全删除 desc 则代码中没有任何内容（如下）它可以正常工作（显然没有更新该部分）它很奇怪，你的非常感谢您的帮助:-)

代码是

```
//Get the form data
    $title = $_POST['title'];
    $keywords = $_POST['keywords'];
    $desc = $_POST['desc'];

//initialise connection with databse

require_once('../Connections/EliteGrooming.php');
mysql_select_db($database_EliteGrooming, $EliteGrooming);

//Execute the query

mysql_real_escape_string($title, $keywords, $desc);

$query = "
    UPDATE site_settings
    SET site_title = '$title', keywords = '$keywords', desc = '$desc';";

mysql_query($query) or die(mysql_error());
mysql_close();
header('Location: ../admin/site-settings.php?updated'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T16:40:48.163

`desc`是**[保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**，您必须使用反引号对其进行转义

```
$query = "
    UPDATE site_settings
    SET site_title = '$title', keywords = '$keywords', `desc` = '$desc';"; 
```

但是您的查询很容易受到攻击`SQL Injection`，请阅读下面的文章，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T16:40:42.390

您需要像反引号一样转义[MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)`desc`

```
UPDATE site_settings
SET site_title = '$title', keywords = '$keywords', `desc` = '$desc';"; 
```

# .net - 依赖注入和服务定位

> ID：13432504
> 
> 赞同：3
> 
> 时间：2012-11-17T16:38:46.397
> 
> 标签：.net, dependency-injection, unity-container, common-service-locator

据我所知，依赖注入与服务位置不同。但是[Unity 应用程序块](http://unity.codeplex.com/)包含[Common Service Locator](http://commonservicelocator.codeplex.com/)库（我认为它是一个服务定位器）。应该如何使用该库以及何时使用它，以及它是否被统一本身用于依赖注入？
*注意：请不要引用[CommonServiceLocator](http://unity.codeplex.com/) CodePlex 主页上的用法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:30:06.487

Common Service Locator 接口适用于希望使用 DI 容器而不强制库在使用该库的应用程序上选择容器的库作者。目的是在需要解析对象的库中，改为针对 CSL 接口编写代码；然后您可以使用调用您的应用程序正在使用的任何容器。

如果您不编写可重用的库组件，请不要使用 CSL。这是一个额外的层，不会给你买任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:15:13.870

不，依赖注入与服务位置不同，但是它们确实有很多功能相似之处。他们不分享的是更多的哲学方法。

两者都提供对应用程序中配置的对象的访问。然而，依赖注入说你永远不应该明确地请求一个对象（或接口）。相反，您应该指定一个对象或接口，框架将为您处理所有事情。

服务位置是您直接从服务定位器系统请求对象的地方。

换句话说，服务位置要求您找到您想要的对象。依赖注入假设你是用你需要的对象创建的。

# jquery - 如何为正确的延迟加载剪切背景图像？

> ID：13432509
> 
> 赞同：2
> 
> 时间：2012-11-17T16:39:00.600
> 
> 标签：jquery, html, load, lazy-evaluation

我有一个小问题。如何为正确的延迟加载剪切背景图像。

我有 1920px 宽度和 5100px 高度的 img 。现在我在想，如何剪切图像以快速正确加载以及如何编写它。

我的想法是好是坏？

我将我的背景图像剪切为大约 500 像素高度的条纹，我将使用 stripe1.png、stripe2.png 等创建 div 并使用阈值加载它。

例如：

```
<div id="stripe1">background img stripe 1, set in CSS</div>
<div id="stripe2">background img stripe 2, set in CSS</div>
<div id="stripe3">background img stripe 3, set in CSS</div> 
```

在 CSS 中我会有

```
#stripe1{
    background-image: url(`image1.png`);
}
#stripe2{
    background-image: url(`image2.png`);
} 
```

等等..还有我的 jQuery

```
$("div.stripe1").lazyload();
$("div.stripe2").lazyload({ threshold : 200 });
$("div.stripe3").lazyload({ threshold : 200 }); 
```

我的想法对吗？

谢谢你的回答，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:48:04.790

另一种解决方案是使用渐进格式将图像保存为 jpg，并使用 Adob​​e Photoshop 进行 4 到 5 次扫描。

然后这个大图像将像图层一样加载。第一层不会好看，第二层会改善上一层。

第一层加载速度非常快。所以没有必要对图像进行切片。

# php - 单个答案未出现只读文本输入

> ID：13432510
> 
> 赞同：1
> 
> 时间：2012-11-17T16:39:03.297
> 
> 标签：php, jquery, html

我[这里有一个 jsfiddle](http://jsfiddle.net/JWTQk/32/)

请查看 jsfiddle 表中的问题 2，因为该问题仅包含一个答案。

在我尝试做的 jquery 函数中，如果一个问题只包含 1 个答案，那么该答案的 Marks Per Answer 列下的文本输入应该是只读的，并显示与该问题的 Total Marks Remaining 相同的值.

此外，如果您查看 jsfiddle，它指出在该单行的 Total Marks Remaining 列下，它显示数字 5，它应该显示数字 0。因为只读文本输入中的数字 5 减去剩余总分数的原始数字（为 5）表示该行的 Total Marks Remaining 下的数字应为 0。

我的问题是，我需要在 jsfiddle 的 jquery 函数中包含什么，以便：

1.  如果问题只有一个答案，则该文本输入是只读的

2.  在文本输入中显示总分

3.  在该行的“剩余总分”下显示 0，因为它应该在只读文本输入中的数字和原始剩余总分数之间执行计算。

下面是jquery函数的代码：

查询：

```
 $(function () {
        //alert("here");         
        var questions = $('#markstbl td[class*="_ans"]').length - 1;

        //disable single entry
        for (var i = 0; i <= questions; i++) {
            if ($("[class*=q" + i + "_mark]").length == 1) {
                var t_marks = $("[class*=q" + i + "_ans]").html();
                //alert(t_marks);
                $("[class*=q" + i + "_mark]").val(t_marks)
                    .attr("disabled", "disabled");
                //$("[class*=q"+i+"_mark]").attr("disabled","disabled");
            }
        }

        //find each question set and add listeners
        for (var i = 0; i <= questions; i++) {
            $('input[class*="q' + i + '"]').keyup(function () {
                var cl = $(this).attr('class').split(" ")[1]
                var questionno = cl.substring(cl.indexOf('q') + 1, cl.indexOf('_'));
                var tot_marks = $(".q" + questionno + "_ans_org").val();
                //alert(tot_marks);
                var ans_t = 0;
                $("[class*=q" + questionno + "_mark]").each(function () {
                    var num = (isNaN(parseInt($(this).val()))) ? 0 : parseInt($(this).val());
                    ans_t += parseInt(num);
                });
                ans_t = tot_marks - ans_t;
                //alert(ans_t);
                //var fixedno = tot_marks;
                var ans = (parseInt(ans_t) < 0) ? tot_marks : ans_t;
                $(".q" + questionno + "_ans").val(ans);
                $(".q" + questionno + "_ans_text").html(ans);
            });
        }
    });​ 
```

下面是动态 HTML 表：

HTML：

```
 <table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='emptyth'></th>
</tr>
</thead>
<tbody>
<?php
$row_span = array_count_values($searchQuestionId);
$prev_ques = '';
foreach($searchQuestionId as $key=>$questionId){

?>

<tr class="questiontd">
    <?php
    if($questionId != $prev_ques){
    ?>
    <td class="questionnumtd" name="numQuestion" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$questionId?> <input type="hidden" name="q<?php echo$questionId?>_ans_org" class="q<?php echo$questionId?>_ans_org" value="<?php echo$searchMarks[$key]?>"><input type="hidden" name="q<?php echo$questionId?>_ans" class="q<?php echo$questionId?>_ans" value="<?php echo$searchMarks[$key]?>"></td>
    <td class="questioncontenttd" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$searchQuestionContent[$key]?> </td>
    <?php
    }
    ?>
<td class="answertd" name="answers[]"><?php echo$searchAnswer[$key]?></td>
<td class="answermarkstd">
<input class="individualMarks q<?php echo$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<?php
    if($questionId != $prev_ques){
    ?>
<td class="totalmarkstd" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$totalMarks[$key]?></td>
<td class="noofmarkstd q<?php echo$questionId?>_ans_text"  q_group="1" rowspan="<?php echo$row_span[$questionId]?>"><?php echo"<strong>Marks Remaining:<br/>".$searchMarks[$key]."</strong>"?></td>
<?php
    }
    ?>
</tr>
<?php
$prev_ques = $questionId;
}
?>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:32:25.460

您的禁用循环仅检查两个问题中的第一个；一个经典的一比一错误。尝试这个：

```
var questions = $('#markstbl td[class*="_ans"]').length; 
```

`questions`现在将是 2 而不是 1 并且两个问题都将被循环。

# haskell - 如何在 X11 代码中监听窗口关闭？

> ID：13432511
> 
> 赞同：1
> 
> 时间：2012-11-17T16:39:02.933
> 
> 标签：haskell, x11

我仍在为 Haskell 的 X11 绑定而苦苦挣扎。现在，我想检测用户关闭窗口的事件。到目前为止我最好的尝试：

```
import Graphics.X11.Xlib
import Graphics.X11.Xlib.Extras
import Control.Concurrent (threadDelay)
import Data.Bits    

main :: IO ()
main = do
 dpy <- openDisplay ""
 let dflt = defaultScreen dpy
     border = blackPixel dpy dflt
     background = whitePixel dpy dflt
 rootw <- rootWindow dpy dflt
 win <- createSimpleWindow dpy rootw 0 0 300 200 1 border background
 setTextProperty dpy win "Hello World" wM_NAME
 mapWindow dpy win
 moveWindow dpy win 0 0
 selectInput dpy win (structureNotifyMask .|. exposureMask)
 updateWin dpy win

updateWin :: Display -> Window -> IO ()
updateWin dpy win = do
  sync dpy True
  allocaXEvent $ \e -> do
    nextEvent dpy e
    ev <- getEvent e
    putStrLn $ eventName ev
  threadDelay (1000000)
  updateWin dpy win 
```

但我没有得到事件，而是得到以下输出：

```
ConfigureNotify
XIO:  fatal IO error 11 (Resource temporarily unavailable) on X server ":0.0"
      after 26 requests (25 known processed) with 5 events remaining. 
```

这是什么原因造成的？处理它的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:00:41.063

您需要观看 ClientMessage 事件。没有掩码，也不需要选择它们，只需检测它们并销毁窗口即可。您还需要设置 WM_DELETE_WINDOW 协议。参见例如[这里](http://hackage.haskell.org/packages/archive/HGL/3.2.0.2/doc/html/src/Graphics-HGL-X11-Window.html)。查找 ClientMessage 和 WM_DELETE_WINDOW。

在某些时候，您会想要拦截除 WM_DELETE_WINDOW 之外的其他客户端消息。您将需要检查 ClientMessage 内容，而不仅仅是。类型，但目前不需要。

# c# - 在 C# 上测试并发循环缓冲区的好例子

> ID：13432515
> 
> 赞同：2
> 
> 时间：2012-11-17T16:39:30.917
> 
> 标签：c#, multithreading, algorithm, testing

我已经在 C# 上实现了并发循环缓冲区，现在想测试它的工作。我有非常简单的 API -`void Write(T element)`和`T Read()`. 我正在寻找一个很好的例子，如何测试所有可能的用例并检测所有可能的错误，包括竞争条件。从 2 个线程进行简单的交替写入和读取似乎不是一个好主意，因为我们无法控制顺序来自不同线程的 API 调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:53:08.033

用例之一应包括写入缓冲区（不从中读取），直到缓冲区已满。

如果您的测试用例实现了从同一个线程读取和写入，那么您可以控制读取/写入的顺序。

我喜欢多线程代码中线程安全的实现足够简单，可以“通过检查”验证，即通过代码审查（而不仅仅是通过测试）。

# css - 将 Joomla CSS 系统与 Twitter-Bootstrap CSS 集成

> ID：13432518
> 
> 赞同：1
> 
> 时间：2012-11-17T16:39:38.530
> 
> 标签：css, joomla, twitter-bootstrap, joomla2.5

我认识 Bootstrap 还不到 24 小时，我已经爱上了它！

据我了解，Bootstrap 是一组可供使用的 CSS。

我们应该只根据 Bootstrap 给出类名，我们的网站将具有现代和完美的外观。

好的。

现在的问题是 Joomla 内置系统不使用**Bootstrap 兼容**的类。

有没有一种快速的方法来改变将 Joomla 内置 CSS 系统更改为与 Bootstrap 兼容的方式？

希望可以理解。

也许有一个插件可以将 Joomla CSS 系统转换为 Bootstrap 熟悉的 CSS。我找不到这么精确的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:55:40.513

如果您可以升级您的系统，新的 Joomla 3.0 带有 Bootstrap。否则，您只需在使用此框架的地方构建自己的模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:49:09.150

我知道对 Bootstrap 的感觉。很多人会不同意，但我也很喜欢。然而，即使 Joomla 3.0 基于 Bootstrap，我也不推荐使用它，因为它是一个简短的版本。Joomla 2.5 仍然是长期推荐使用的版本，因此我建议您坚持使用它并为自己找到一个 Boostrap 模板，例如[Joomstrap](https://github.com/A973C/Joomstrap)，它是免费的。请注意，该模板基于 Bootstrap 2.0.4，因此您需要下载最新版本并替换*CSS*和*JS*文件。

您可能还对[基于 Gantry for Joomla 2.5 的 Boostrap 模板](https://github.com/anibalsanchez/jbootstrap/tree/0.6.0-gantry4)感兴趣。

说过要坚持使用 Joomla 2.5，因为它是长期版本，一旦 Joomla 3.5 出来，这将是下一个长期版本，我会升级到那个版本。这也将基于 Bootstrap。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:48:21.280

这样做没有问题。您**从开发自定义模板开始**，然后您只需对**组件**等使用**覆盖。**

 **你不需要插件。**

# r - 索引操作删除属性

> ID：13432519
> 
> 赞同：4
> 
> 时间：2012-11-17T16:39:39.577
> 
> 标签：r, list, attributes, indexing

显然，用属性索引一个列表会返回一个没有属性的列表。

```
> l <- list(a=1:3, b=7)
> attr(l, 'x') <- 67
> l
$a
[1] 1 2 3

$b
[1] 7

attr(,"x")
[1] 67
> l[c('a','b')]
$a
[1] 1 2 3

$b
[1] 7 
```

属性没了。是否可以在保留其属性的同时对列表进行索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T22:38:10.833

这是这样一个子集函数。请注意，不要尝试覆盖“名称”属性，这一点很重要。

```
subset.with.attributes <- function(X, ...) {
 l <- X[...]
 attr.names <- names(attributes(X))
 attr.names <- attr.names[attr.names != 'names']
 attributes(l)[attr.names] <- attributes(X)[attr.names]
 return(l)
}

> subset.with.attributes(l, c('a','b'))
$a
[1] 1 2 3

$b
[1] 7

attr(,"x")
[1] 67 
```

如果它实际上做了任何子集，试图简单地分配属性将导致子集失败。

```
> subset.with.attributes(l, c('b'))
$b
[1] 7

attr(,"x")
[1] 67 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T13:18:01.910

使用`sticky`包。它正是为此目的而设计的。（完全披露：我是包作者。）它使用简单，只需调用`sticky()`你的向量/列表/等。例如：

```
> l <- list(a=1:3, b=7)
> attr(l, 'x') <- 67    
> l <- sticky(l) 
> attr(l,'x')  
> [1] 67
>
> class(l)
> [1] "sticky" "list" 
```

# ruby-on-rails-3.2 - Zurb 基金会在 Rails 3.2 中使用 client_side_validation gem 显示模态

> ID：13432524
> 
> 赞同：0
> 
> 时间：2012-11-17T16:40:01.747
> 
> 标签：ruby-on-rails-3.2, modal-dialog, client-side-validation, zurb-foundation

谁能告诉我他们是否能够让 client_side_validation gem 在显示模式（Zurb Foundation）中工作。

我有一个可以很好地与 client_side_validation 配合使用的表单，但是一旦我将其置于显示模式中，验证就不再起作用。

[（ http://foundation.zurb.com/docs/reveal.php](http://foundation.zurb.com/docs/reveal.php)中的 https://github.com/bcardarella/client_side_validations ）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:16:12.777

已编辑-此页面将来可能会给其他人一些见解（自从我发布第一个答案以来，我没有重新访问过此页面，因此我没有对其进行测试）-默认情况下，客户端验证仅验证可见字段，因此如上所说页面，[https://github.com/bcardarella/client_side_validations/wiki/Validation-in-Multi-Step-Form](https://github.com/bcardarella/client_side_validations/wiki/Validation-in-Multi-Step-Form)，您可能必须告诉它使用`$(form_id).enableClientSideValidations();`

不过我没有这样做，我通过ajax加载了整个东西。这里有一些信息可以帮助处于这种情况的其他人继续前进。

Zurb 的 Foundation 框架的标准模态窗口只是你页面上的一个 div 和一个触发 js 在 display:none/block 之间切换的链接。我不知道为什么这会阻止 client_side_validations gem 像显示模式中的其他 js 一样正常工作。我捎带了显示模式及其 js 的样式，我只是通过 ajax 加载整个内容。

以防万一这对将来的某人有所帮助，这就是我现在的基本设置。我有多个链接到我的 ajax 和一个将成为模态的 div。我快速检查了我的 js.erb 并换掉了任何以前呈现的内容（对于多个链接..）

```
#Populate div with a reveal modal containing a partial (a form, remember to put in the j in "j render") and if said modal already has content, ditch it.  

if( !$('#reveal-div').html().length ) {
$('#reveal-div').append('<%= j render :partial => 'form', :locals => { :some_locals => @whatever_values  } %><a class="close-reveal-modal">&#215;</a> ');
$('#reveal-div').addClass('reveal-modal').appendTo('body');
$('#reveal-div').reveal();
}
else{
$('#cbrform').remove();
$('#reveal-div').append('<%= j render :partial => 'form', :locals => { :some_locals => @whatever_values } %><a class="close-reveal-modal">&#215;</a>'); 
$('#reveal-div').reveal()};

#Make sure you get your validations working on remote loaded forms with this line
$('form[data-validate]').validate(); 
```

因此，通过在我的表单的模态 div 上调用 .reveal() 然后调用 .validate() 我可以通过 ajax 加载我的模态，并且可以以通常的方式将其关闭。我不是在初始页面加载时加载我的表单，然后用 js 显示它，而是用 js 将它全部加载，这让我按照通常的步骤来运行我的验证。那是我的 new.js.erb 那里，你应该能够管理它（即，你需要你的 link_to，一个 div 来加载它 - 在这种情况下是#reveal-div - 以及你适当的控制器操作）。

快乐的编码;-)

# c# - 什么是 Visual Studio 中的 .deploy 扩展

> ID：13432525
> 
> 赞同：10
> 
> 时间：2012-11-17T16:40:02.010
> 
> 标签：c#, visual-studio

当我使用 Visual Studio 发布我的软件时，它会生成 .deploy 扩展名。例如 my_program.exe.deploy 它是什么？它是干什么用的

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-01T10:36:46.557

当您发布 ClickOnce 应用程序时，它会在部署站点上的所有文件上附加“.deploy”。这样做的原因是许多人部署到网络服务器，这使他们不必为部署中包含的每种类型的文件设置 MIME 类型。在客户端计算机上安装部署时，它会从文件中删除 .deploy。

# sql-server - FreeBCP 到 SQL Azure 抱怨表不存在

> ID：13432529
> 
> 赞同：2
> 
> 时间：2012-11-17T16:40:44.737
> 
> 标签：sql-server, azure-sql-database, freetds, freebcp

```
$ freebcp DWSTAGE.BCPTEST in bcptest.txt -f cdr.fmt -S serverfromfreetds -U user@azureserver -P password
Msg 208, Level 16, State 1
Server 'azureserver', Line 1
    Invalid object name 'DWSTAGE.BCPTEST'.
Msg 208, Level 16
General SQL Server error: Check messages from the SQL Server

Msg 20064, Level 2
Attempt to use Bulk Copy with a non-existent Server table

$ freebcp DATABASENAME.DWSTAGE.BCPTEST in bcptest.txt -f cdr.fmt -S serverfromfreetds -U user@azureserver -P password
Msg 40515, Level 15, State 1
Server 'azureserver', Line 16
    Reference to database and/or server name in 'DATABASENAME.DWSTAGE.BCPTEST' is not supported in this version of SQL Server.
Msg 40515, Level 15
General SQL Server error: Check messages from the SQL Server

Msg 20064, Level 2
Attempt to use Bulk Copy with a non-existent Server table 
```

我还尝试使用 -D 选项将数据库添加到命令行。该连接的默认数据库设置为 freetds.conf 中唯一的 Azure 数据库。

否则，与 SQL Azure 的连接似乎很好——我只是无法让 FreeBCP 工作：

```
$ isql serverfromfreetds user@azuredatabasename password
+---------------------------------------+
| Connected!                            |
|                                       |
| sql-statement                         |
| help [tablename]                      |
| quit                                  |
|                                       |
+---------------------------------------+
SQL> SELECT COUNT(*) FROM DWSTAGE.BCPTEST;
+------------+
|            |
+------------+
| 0          |
+------------+
SQLRowCount returns 1
1 rows fetched
SQL> SELECT COUNT(*) FROM DWSTAGE.BCPTESTX;
[ISQL]ERROR: Could not SQLExecute
SQL> 
```

这似乎是一些数据库/架构混乱，但我找不到有效的设置组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T04:07:55.717

From the FreeTDS mailing list:

The message 208 comes from the server. A quick look at freebcp.c shows argv[1] isn't parsed. It's copied to a struct and used verbatim e.g.

```
 if (dbfcmd(dbproc, "SET FMTONLY ON select * 
```

from %s SET FMTONLY OFF", pdata->dbobject) == FAIL)

My guess is that the account you're logging in with has a default database, and that database is not the one containing DWSTAGE.BCPTEST. The Azure server rejects dbname.schema.object syntax, and freebcp has no -D option because until Azure every TDS server did accept that syntax.

You could verify that using

```
 $ freebcp 'select db_name()' queryout /dev/stdout ... 
```

As a temporary workaround, I think this would work:

```
 freebcp DWSTAGE.BCPTEST in bcptest.txt \
    -O 'USE dbname' \
    -f cdr.fmt -S serverfromfreetds -U user@azureserver -P password 
```

A permanent fix would support -D.

* * *

Yes, that user's default database is probably master. There IS a default database set up in the odbc config, but I was mistaken, there is no such option in the freeetds.conf.

We've moved away from trying to get Linux to work for this process for now, but I'll revisit this.

I expect that workaround will not work because USE isn't supported - you do in fact have to connect directly to the database, because of the nature of the SQL Azure architecture.

* * *

Yes, you're right. I forgot about that.

About a year ago we added the DBSETLDBNAME macro as a way to set the dbname in the db-lib LOGINREC. That sets the dbname in the login packet, obviating the need for "USE dbname". freebcp could be modified to support that feature with a -D option.

* * *

See change

[http://gitorious.org/freetds/freetds/commit/4a21ded022405693607e71938d0c6173816f5ff9/diffs/c34afafd2fec4cbba9b245e4f13a5471c6fb8041](http://gitorious.org/freetds/freetds/commit/4a21ded022405693607e71938d0c6173816f5ff9/diffs/c34afafd2fec4cbba9b245e4f13a5471c6fb8041)

(add support for -D in freebcp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T17:56:10.883

我已经`freebcp`开始使用 Ubuntu 12.04 和 Azure SQL。它遵循上面提到支持的答案`-D`。

首先，我`freetds`按照此线程中的说明安装和配置：[https ://askubuntu.com/questions/167491/connecting-ms-sql-using-freetds-and-unixodbc-isql-no-default-driver-specified](https://askubuntu.com/questions/167491/connecting-ms-sql-using-freetds-and-unixodbc-isql-no-default-driver-specified)

基本上，这包括： `sudo apt-get install tdsodbc unixodbc freetds-bin`

这把我带到了这个线程开始的地方；`freebcp`可以连接，但我收到有关“引用数据库...此版本的 SQL 服务器不支持”的错误。

下一步要注意`freebcp`apt-get 安装的版本是相当旧的版本。而是从[ftp://ftp.freetds.org/pub/freetds/stable/](ftp://ftp.freetds.org/pub/freetds/stable/)下载更新的版本。我用过`freetds-1.00.9.tar.gz`。

使用安装它`./configure`，`make`然后使用这个新`freebcp`的，但使用`-D`.

这是我的命令字符串：`freetds-1.00/src/apps/freebcp bcptest in bcptest.big.dat -U myUserName@myServer -S MyServerConfig -P 'mypa$$word' -D myDatabase -c -e upload.err`

# c - 使用 C 的基本文件输入

> ID：13432532
> 
> 赞同：1
> 
> 时间：2012-11-17T16:40:48.570
> 
> 标签：c, file-io

所以我正在努力学习如何进行文件 I/O，但是我正在使用的这本书在教授如何从文件中接收输入方面很糟糕。下面是他们如何从文件接收输入的示例，但它不起作用。我已经逐字逐句地复制了它，它应该遍历一个名称列表，直到它到达文件的末尾（或者他们在书中说），但它没有。事实上，如果我把`while`循环留在那里，它不会打印任何东西。

```
#include <stdio.h>
#include <conio.h>
#define MAX 250
int main()
{

  char name[MAX]; 
  FILE*pRead;

  pRead=fopen("test.txt", "r");
  if (pRead==NULL)
    {
     printf("file cannot be opened");
    }else      

     printf("contents of test.txt");
     while(fgets(name,sizeof(name),pRead)!=NULL){
           {
            printf("%s\n",name);
            fscanf(pRead, "%s", name);
           }

             getch();
   } 
```

即使在网上，我看到的每个初学者教程都会对此进行一些修改，但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:56:24.770

我相信你的数组太小了，因此当你阅读 fscanf 时会覆盖内存导致奇怪的行为

如果您只想读取文件 - 假设现在输入文件中每行有一个名称，后跟换行符 - 只需使用 fgets() 读取文件即可。

```
#define MAXLINE 256

char name[MAXLINE]; 

while (fgets(name,sizeof(name),pRead)!=NULL)
{
  // do whatever
} 
```

# c - 如何在循环中命名和创建文件

> ID：13432535
> 
> 赞同：3
> 
> 时间：2012-11-17T16:41:21.913
> 
> 标签：c, stdio

在 C 中，我想创建和打开文本文件以将数据写入，但问题是我想在旅途中命名文件，例如

```
FILE *ptr;

for(i=0;i<1000;i++){
   fopen_s(&ptr,"i.txt","w");
   operations to fill data into file i.txt;
   fclose(ptr);
} 
```

这样我将创建文件 0.txt、1.txt、2.txt ... 999.txt。

这怎么可能？我检查了打开和重命名函数，但找不到办法。

非常感谢您的帮助。最好的，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T16:45:19.767

用于`snprintf`设置文件编号：

```
FILE *ptr;
char name[FILENAME_MAX];

for(i=0;i<1000;i++){
   snprintf(name, sizeof(name), "%d.txt", i);
   fopen_s(&ptr, name, "w");
   //operations to fill data into file i.txt;
   fclose(ptr);
} 
```

# java - 为给定的 PersistenceContext 注入了多少个 EntityManager？

> ID：13432537
> 
> 赞同：4
> 
> 时间：2012-11-17T16:41:32.320
> 
> 标签：java, jpa, ejb-3.0

我在无状态**EJB3 bean 中注入****EntityManager**对象（它们充当**DAO**对象，每个都提供对不同数据库表的访问）。部署在**JBoss AS 7**中。

 ******然后，我在**EJB3 bean 方法中使用****System.identityHashCode**添加了代码，以查看注入的**EntityManagers**的各种实例（希望在所有 DAO 中看到相同的实例）。例如：

 ****```
@Stateless
public class AFacade {
    @PersistenceContext(unitName="foo")
    EntityManager em;

    public List<A> findAll() {
         l.info("entity manager is: "+System.identityHashCode(em)+" class is: "+em.getClass().getSimpleName());
         ...
    } 
```

然而，我注意到每个**DAO**（例如**AFacade**、**BFacade**等）都注入了不同的**EntityManager**（由**identityHashCode**报告），尽管**PersistenceContext**是相同的。在所有情况下，实现类都是**TransactionScopedEntityManager 。**

我不清楚为什么要注入这些不同的**EntityManager**对象，这是否应该让我担心。另外，我知道 EJB3 容器实际上可能会向真实的**EntityManager**注入代理，因此这些不同的实例实际上可能是单个**EntityManager**的代理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T16:44:28.973

是的，它们是真实实体管理器的代理（实际上，我认为它们是线程安全的装饰器，而不是代理）。

我不确定您是否知道 EntityManager 是连接的包装器。如果您没有此装饰器（或代理），则对该无状态 bean 的所有调用将共享相同的连接（并且可能是事务），这不是您想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T06:14:15.230

注入的 EntityManager 是由 EJB 容器生成的代理。

对于***事务范围的实体管理***器，每个事务使用一个*单独*的***提供者实体管理器***实例。

当对此代理进行方法调用时，容器会检查***javax.transaction.TransactionSynchronizationRegistry***（这由 EJB 容器实现）以查看是否已经为此事务创建了提供者 EntityManager。如果没有，它将创建提供者实体管理器并将其注册到 TransactionSynchronizationRegistry 中，然后将方法调用委托给它。如果已经存在，它将简单地检索提供者实体管理器，并将方法调用委托给它。

**根据 Mike Keith 和 Merrick Schincariol 所著的“Pro JPA2 Mastering the Java Persistence API”一书（参见第 6 章），***事务范围的 EntityManager 是无状态的。*****

 **插入到每个 EJB 实例对象中的代理对象是不同的，尽管由于事务范围实体管理器的无状态特性，可以使用单个代理对象。

也看看： http: [//piotrnowicki.com/2011/11/am-i-in-the-same-transaction-am-i-using-the-same-persistencecontext/](http://piotrnowicki.com/2011/11/am-i-in-the-same-transaction-am-i-using-the-same-persistencecontext/)************

# c++ - CreateProcess 失败并出现错误 998

> ID：13432538
> 
> 赞同：1
> 
> 时间：2012-11-17T16:41:45.740
> 
> 标签：c++, winapi, visual-c++

我有一个名为 Wintasks 的自制 Win32 脚本解释器，它已经完美运行了 15 年。它使用`CreateProcess()`. 它在 Win7-32​​ 上仍然可以正常工作，但在 Win7-64 下，如果在调用 Wintasks 时使用任何命令行参数，则 CreateProcess 失败并出现错误`998`（*内存访问冲突*）。从 Wintasks 运行中删除命令行参数，一切都很好。

Wintasks 从参数中获取其第一个参数（要运行的任务脚本）`Winmain lpszCmdLine`，并且只有该参数有效。在任务脚本文件名之后放置一个空格也会导致问题。在所有引用的情况下都可以成功访问参数`__argv[]`。

当在调试下从 MSVC5（如前所述，它是一个旧程序）运行时，一切正常，所以我无法以这种方式解决问题，它只是提供了问题的 Release 可执行文件。使用来自 Win32 VM 的完全相同的任务脚本文件运行完全相同的 Wintasks 副本显示没有问题。

如果有任何启发，我将不胜感激。我附加了运行 CreateProcess 的 Wintasks 的代码。

```
DWORD WinExecX(LPSTR cmdline, int winstate)
{
STARTUPINFO StartupInfo;
PROCESS_INFORMATION ProcessInformation;
BOOL CreateProcessStatus;
DWORD retval;
DWORD fdwCreate = 0;            /* flags for CreateProcess */
memset(&StartupInfo,0,sizeof(StartupInfo));
StartupInfo.cb = sizeof(StartupInfo);
StartupInfo.dwFlags=STARTF_USESHOWWINDOW;
StartupInfo.wShowWindow=winstate;
openerr=0;
CreateProcessStatus = CreateProcess( NULL, /*(LPTSTR)name,*/
 cmdline,
 NULL,
 NULL,
 FALSE, /* changed 2000-10-18 */
 fdwCreate,
 NULL, /*envblk,*/
 NULL,
 &StartupInfo,
 &ProcessInformation
 );

if(!CreateProcessStatus)
 {
 openerr=GetLastError();
 return 0;
 }

elevel=retval = (DWORD)ProcessInformation.hProcess;
CloseHandle(ProcessInformation.hThread);

return retval;
} 
```

# c# - 碰撞和矩形/直线相交

> ID：13432539
> 
> 赞同：1
> 
> 时间：2012-11-17T16:41:47.583
> 
> 标签：c#, vector, xna, collision-detection, rectangles

我正在为游戏进行碰撞检测，关卡是从每个都有自己的边界框的块中随机生成的。我的碰撞检测没问题，除了有时，玩家船可以同时与 2 个或更多块碰撞，我需要确定它首先击中了哪一个。

*我已经计算出如果我找到船舶边界框的角在其运动方向上，然后从该角沿船舶运动矢量的相反方向画一条线（图中的红线），最远*的交点*离开*那条线将在第 1 号框命中。我只是不知道如何编写该逻辑！

我必须处理的事情

*   碰撞的边界框（矩形）列表
*   船舶运动 (Vector2)
*   船舶边界框（Reactangle）

![在此处输入图像描述](../Images/d928293b6df988bd41476ab116858c60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:46:16.690

我的方法是：在飞船上添加另一组更小、更精确的边界框。如果发生碰撞，您应该开始检查较小边界框的比例。据我了解，许多游戏这样做是为了避免不必要的碰撞检查，但有办法在碰撞发生时更准确地确定碰撞。

# php - 确定两个数组中的键值是否相等，如果相等则更新

> ID：13432545
> 
> 赞同：0
> 
> 时间：2012-11-17T16:42:41.717
> 
> 标签：php

在工作和孩子之后，我将 PHP 编程作为一种爱好。所以，如果这段代码是假的，我很抱歉......但我一直在寻找一段时间。无论如何，我正在尝试比较两个数组中的值，并且......每个键值等于另一个我想将该值更新为“1”。例如，在一个数组中，值是 (2, 4, 1)，而第二个数组中的值是 (3, 4, 5)。之后，我的 sql 列中的值将更新为 (2, 1, 1)。这是我的代码。感谢您的任何帮助！

```
$array1 = mysql_fetch_array($x);
$array2 = mysql_fetch_array($x1);

foreach($array1 as $key => $value)
{
if($value == $array2[$key])
{
   $v = "UPDATE fXnumber SET xnumber = '1'";
   mysql_query($v);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:51:58.387

检查何时更新表集 id 的标识符，哪些记录将被更新

```
$array1 = mysql_fetch_array($x);
$array2 = mysql_fetch_array($x1);

foreach($array1 as $key => $value)
{
    if (isset($array2[$key]) && $value == $array2[$key])
    {
       $v = "UPDATE fXnumber SET xnumber = 1 WHERE id = '{$key}'";
       mysql_query($v);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:52:39.953

这是您的代码的一个版本，具有增强的易用性。我添加了一个（当前无效的）“WHERE”子句。我假设您建议的版本中的 sql 语句不仅按照预期和期望更新了数据库表中的单个值，而且还更新了该表中的 _all 值。您很可能希望指定要更新*的*条目：

```
$array1 = mysql_fetch_array($x);
$array2 = mysql_fetch_array($x1);

foreach(array_keys($array1) as $key) 
{
    if ( $array1[$key]==$array2[$key] ) 
    {
        $v = sprintf("UPDATE fXnumber SET xnumber=1 WHERE id=%s", $key);
        mysql_query($v);
    }
} 
```

另一个提示：phps 旧的 mysql 扩展已被贬值。它有很多问题。考虑使用更新的 mysqli 扩展，或者更好的是，使用 PDO 抽象层。它可以保护您免受代码注入等的影响。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-17T16:53:58.957

对于数组比较[array_diff](http://php.net/manual/en/function.array-diff.php)可能会有所帮助。

# javascript - 如何使用打字稿访问本地存储？

> ID：13432546
> 
> 赞同：2
> 
> 时间：2012-11-17T16:42:55.463
> 
> 标签：javascript, typescript

```
module Layout {

    var a = localStorage.getItem('x');
    export class aaa {
        init() {;
            var xxx = localStorage.getItem('x');
        }
    }

} 
```

在具有 0.8.1 版本的 Visual Studio 2012 中，我在 init() 函数内的行上收到一条消息，说“名称 localStorage 在当前范围内不存在”。在 aaa 类之外，这可以正常工作。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:45:16.170

0.8.1 版本的 TypeScript 导致了 Web Essentials 中的一个错误。几天后应该会有修复。

同时，如果你安装了兼容当前版本的 0.8.0 版本的 TypeScript，或者你可以从命令行编译：

```
tsc --debug c:\myapp\app.ts 
```

# powerpoint - 将 powerpoint 线划分为不同的对象

> ID：13432553
> 
> 赞同：1
> 
> 时间：2012-11-17T16:43:46.277
> 
> 标签：powerpoint

我有很多幻灯片，每张幻灯片都有很多线条，但所有这些线条都在同一个对象中。我现在想添加一些动画，包括通过点击为每一行出现。

我如何划分每张幻灯片中的线条，以便每条线都在自己的对象中

注意，我使用的是 powerpoint 2010

谢谢，

AA

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T17:41:15.027

这并不完美。您需要添加更多代码才能从原始文本中提取所有格式，但这是一个开始。在要修改的文本框中单击，然后运行 ​​TEST 子程序。一旦它适应了你的口味，扩展它以作用于整个演示文稿中的每个文本框是一件相当简单的事情（尽管不是表格、图表、smartart 之类的东西）

```
Sub Test()
    TextBoxToLines ActiveWindow.Selection.ShapeRange(1)
End Sub

Sub TextBoxToLines(oSh As Shape)

    Dim oSl As Slide
    Dim oNewShape As Shape
    Dim oRng As TextRange
    Dim x As Long

    With oSh
    Set oSl = .Parent
    With .TextFrame.TextRange
        For x = 1 To .Paragraphs.Count
            Set oRng = .Paragraphs(x)
            Set oNewShape = oSl.Shapes.AddTextbox(msoTextOrientationHorizontal, _
                oRng.BoundLeft, oRng.BoundTop, oRng.BoundWidth, oRng.BoundHeight)
            With oNewShape
                .TextFrame.AutoSize = ppAutoSizeNone
                .Left = oRng.BoundLeft
                .Top = oRng.BoundTop
                .Width = oSh.Width
                .Height = oSh.Height
                With .TextFrame.TextRange
                    .Text = oRng.Text
                    .Font.Name = oRng.Font.Name
                    .Font.Size = oRng.Font.Size
                    ' etc ... pick up any other font formatting you need
                    ' from oRng, which represents the current paragraph of
                    ' the original text
                    ' Bullets, tabs, etc.
                End With
            End With
        Next
    End With
    End With

    oSh.Delete

End Sub 
```

# asp.net - 如果复选框被选中，我如何检查 asp.net？

> ID：13432557
> 
> 赞同：1
> 
> 时间：2012-11-17T16:44:09.533
> 
> 标签：asp.net

如果复选框被选中，我如何检查 asp.net？这里的复选框：

```
<input type="checkbox" id="FootBallManager2013CheckBox" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:52:16.463

由于您的标记未使用 CheckBox 服务器控件，因此我假设您要手动检查输入。

1.  您必须提供输入 a `name`，否则无法发布。称之为，例如，`name="FootBallManager2013CheckBox"`。
2.  在代码隐藏中，`Request.Form["FootBallManager2013CheckBox"]`查看它是否为非空白。如果表单元素存在，则对其进行检查；如果不是，那不是。

例子：

```
var footBallManager2013CheckBoxChecked = !string.IsNullOrEmpty(Request.Form["FootBallManager2013CheckBox"]); 
```

或者，您可以只使用服务器控件，这更容易。

```
<asp:CheckBox runat="server" id="FootBallManager2013CheckBox" /> 
```

代码隐藏：

```
if (FootBallManager2013CheckBox.Checked)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:49:04.950

将html更改为

```
<input type="checkbox" id="FootBallManager2013CheckBox" RunAt="Server"/> 
```

然后在服务器端的代码后面

```
if(FootBallManager2013CheckBox.Checked)
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:47:54.617

您可以通过复选框上的*选中*属性来判断：

输入类型="checkbox" id="FootBallManager2013CheckBox"**选中="checked"**

或代码明智（vb）

```
IF FootBallManager2013CheckBox.checked = checked then
[write what you want to do]
End IF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T16:50:30.230

```
if(FootBallManager2013CheckBox.Checked)
{
} 
```

# google-chrome-extension - 端口错误：无法建立连接。接收端不存在

> ID：13432559
> 
> 赞同：2
> 
> 时间：2012-11-17T16:44:21.097
> 
> 标签：google-chrome-extension

重现问题的步骤

a) 使用以下所有代码准备一个扩展

b) 转到[https://stackoverflow.com/](https://stackoverflow.com/)

c) 点击“热门问题：标题![在此处输入图像描述](../Images/2afd0808c4555c8c2cd95e9d93065d87.png)

您将收到一条错误消息*“端口错误：无法建立连接。接收端不存在”*

***清单文件***

```
 {
  "name": "Demo",
  "version": "1.0",
  "manifest_version": 2,
  "description": "This is a demo",

  "content_scripts": [ {
        "all_frames": true,
        "js": ["contentscript1.js" ],
        "matches": [ "https://stackoverflow.com/" ]
        }]
  } 
```

***编辑器.html 文件***

```
<html>
<head>
<script src="editor.js"></script>
</head>
<body>
<div id="content"></div> 
</body>
</html> 
```

***编辑器.js 文件***

```
function onRequest(message,sender,call){ 
     document.getElementById("content").value = message; 
}
 chrome.extension.onMessage.addListener(onRequest); 
```

***contentscript1.js***

```
function bindevent(){ 
window.open(chrome.extension.getURL("editor.html"),"_blank","toolbar=no, titlebar=no,location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=yes, width=720, height=400");
    message = "Sample Message"; 
    chrome.extension.sendMessage(message,function (res){}); 

}; 

document.getElementById('h-top-questions').onclick=bindevent; 
```

有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:21:37.327

我在子窗口/扩展页面仍在加载时发送消息；我在完全加载后发送了消息，它解决了我的问题。

最终代码

***清单文件***

```
{
  "name": "Demo",
  "version": "1.0",
  "manifest_version": 2,
  "description": "This is a demo",

  "content_scripts": [ {
        "all_frames": true,
        "js": ["contentscript1.js" ],
        "matches": [ "http://stackoverflow.com/" ]
        }]
  } 
```

***编辑器.html 文件***

```
<html>
<head>
<script src="editor.js"></script>
</head>
<body>
<div id="content"></div> 
</body>
</html> 
```

***Editor.js 文件***

```
var message = window.location.hash.substring(1); 
```

***contentscript1.js***

```
 function bindevent(){
 message = "Sample Message"; 
    window.open(chrome.extension.getURL("editor.html")+"#"+message,"_blank","toolbar=no, titlebar=no,location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=yes, width=720, height=400");
    }; 

document.getElementById('h-top-questions').onclick=bindevent 
```

;

# amazon-ec2 - 负载平衡应用服务器上的 Sphinx 搜索设置

> ID：13432563
> 
> 赞同：0
> 
> 时间：2012-11-17T16:44:58.567
> 
> 标签：amazon-ec2, sphinx, load-balancing, autoscaling

我想在我们的站点上使用 sphinxsearch，该站点托管在具有 1LB、2DB、2APP 和 1 个 memcached 服务器的自动扩展负载平衡服务器场上。使用 sphinx 搜索拥有超过百万个帖子的站点（论坛站点），这些想法中的任何一个都是设置 sphinxsearch 的推荐方法。

a：设置一个额外的服务器（或将其放在 memcache 实例上）并从应用服务器中获取结果。

b：在应用服务器上设置 sphinxsearch 并找到复制索引的方法

c: 你还能想到什么别的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:31:35.210

A）尝试先将它放在单独的服务器上，如果它不会占用大量资源，您可以将它移动到内存缓存服务器。

B）复制索引实际上会重新同步它们？如果是，您需要在每次同步后重新启动搜索守护程序，所以我不建议这样做

我会和A一起去

# git - 将两个 git 存储库合并为一个具有两个分支

> ID：13432565
> 
> 赞同：3
> 
> 时间：2012-11-17T16:45:12.647
> 
> 标签：git, merge

谷歌一整天后，我将不得不请专家帮助我。

我克隆了一些我转换为 git 的公共 SVN 存储库。这个 repo 只有一个 master 分支，它从某个特定版本开始，比如 1.0。

我还有一个独立创建的 git repo，它以相同的 1.0 版本开始。我创建这个是因为我想破解一些公共项目。我刚刚下载了源代码，创建了空的 git repo，添加了 1.0 版，然后继续破解它。这个 repo 也只有 master 分支。

现在，我会撒谎创建第三个 git repo，其中版本 1.0 将是起点，它会有两个分支：'svn' 和 'mystuff'。我想保留两个分支的历史。

```
 1.0
      /   \
     /     \
br. svn    br. mystuff
     |       |
   v1.1      v1.1'
   v1.2      v1.2'
   v1.3      v1.3'
    .          .
    .          . 
```

如果我有这个，我可以很容易地使用 svn2git 从 SVN repo 获得新的修订，并轻松地将它们与我的本地“mystuff”分支合并。我不需要推送到 SVN 回购，只需从中获取新的修订。

你能帮我再次使用 git 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:50:00.930

一种骇人听闻的方法是使用`git format-patch`将一个 repo 的所有提交导出到一个目录，`git checkout`另一个的 repo`1.0`分支，创建一个新分支 ( `git checkout -b new-branch`)，然后`git am`是你之前生成的补丁。

因此，让我们称`public`您为公共 SVN 存储库的克隆，以及`local`您通过下载源代码并入侵创建的 git 存储库。

```
cd local
mkdir ../patches

# -o tells the output directory for the patches
# the git log ... gives you the hash of the second commit of the repo (the first one
# changes are already present in your 'public' repo
git format-patch -o ../patches/ $(git log --pretty=format:%H | head -n-1 | tail -1)

cd ../public
git checkout -b mystuff 1.0
# Apply patches
git am ../patches/* 
```

# nopcommerce - 如何在类别列表中显示子类别

> ID：13432566
> 
> 赞同：0
> 
> 时间：2012-11-17T16:45:15.850
> 
> 标签：nopcommerce

如何在类别列表中显示子类别，例如：

根类别 #1

*   子类别#1
*   子类别#2
*   子类别#3

根类别 #2

*   子类别#4
*   子类别#5
*   子类别#6

Nopcommerse v2.60

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:45:49.907

您需要使用类似的东西扩展 CategoryNavigationModel

```
public IList<CategoryNavigationModel> ChildCategoryNavigationModels { get; set; } 
```

然后在 CatalogController 的 CategoryNavigation 操作中再添加一个循环来添加子类别

```
foreach (var categoryNavigationModel in model)
                    categoryNavigationModel.ChildCategoryNavigationModels =
                        GetChildCategoryNavigationModel(new List<Category>(), categoryNavigationModel.Id, currentCategory, 0); 
```

然后在 CategoryNavigation.cshtml 中，您可以在 @foreach 中显示子类别（模型中的 var 类别）

以这种方式：

```
<ul>
@foreach (var subCategory in category.ChildCategoryNavigationModels)
    {
        <li>
            <a href="@Url.RouteUrl("Category", new { categoryId = subCategory.Id, SeName = subCategory.SeName })">
                @subCategory.Name
            </a>
        </li>
    }
</ul> 
```

# xml - XML 模式声明

> ID：13432571
> 
> 赞同：0
> 
> 时间：2012-11-17T16:45:56.933
> 
> 标签：xml, xsd

我有一个如下所示的 xml 输入，并想为其创建一个 XML 架构。但是我创建的架构似乎有问题。是否可以向我展示如何为下面的 xml 创建架构。

-ownerName in ownerDetail 元素对农场元素中的farmOwnerName 的引用

```
<Country>
  <state>
     <farm farmOwnerName="Jerry" produce="apple">
       <established>1974</established>
       <totalWorker>30</totalWorker>
     </farm>
     <farm farmOwnerName="Ronald" produce="apple" quality="best">
       <established>1969</established>
       <totalWorker>15</totalWorker>
     </farm>
     <farm farmOwnerName="Richard" produce="lemon">
       <established>1970</established>
       <totalWorker>20</totalWorker>
     </farm>
  </state>
  <ownerDetail age="70" ownerName="Ronald">
     <bornIn>Australia</bornIn>
  </ownerDetail>
  <ownerDetail age="50" ownerName="Richard">
     <bornIn>Canada</bornIn>
  </ownerDetail>
</Country> 
```

我编码的架构如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" >
<xs:element name="state" type="xs:string"/>
<xs:element name="established" type="xs:integer"/>
<xs:element name="totalWorker" type="xs:integer"/>
<xs:element name="bornIn" type="xs:string"/>

<xs:element name="Country">

<xs:complexType name="farm">
    <xs:sequence maxOccurs="unbounded">
        <xs:element ref="established"/>
        <xs:element ref="totalWorker"/>
    </xs:sequence>
    <xs:attribute name="farmOwnerName"  use="required"/>
    <xs:attribute name="produce"  use="required"/>
    <xs:attribute name="quality"  use="optional">
        <xs:simpleType>
            <xs:restriction base="xs:token">
                <xs:enumeration value="best"/>
                <xs:enumeration value="normal"/>
                <xs:enumeration value="low"/>
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
</xs:complexType>

<xs:complexType name="ownerDetail">
  <xs:sequence maxOccurs="unbounded">
      <xs:element ref="bornIn"/>
  </xs:sequence>
  <xs:attribute name="age" use="required"/>
      <xs:attribute name="ownerName" use="required"/>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:50:44.877

你`XML Schema`的给 xml 应该如下

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" >
  <xs:element name="Country">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="state">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="farm" maxOccurs="unbounded" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element type="xs:short" name="established"/>
                    <xs:element type="xs:byte" name="totalWorker"/>
                  </xs:sequence>
                  <xs:attribute type="xs:string" name="farmOwnerName" use="optional"/>
                  <xs:attribute type="xs:string" name="produce" use="optional"/>
                  <xs:attribute type="xs:string" name="quality" use="optional"/>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="ownerDetail" maxOccurs="unbounded" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="bornIn"/>
            </xs:sequence>
            <xs:attribute type="xs:byte" name="age" use="optional"/>
            <xs:attribute type="xs:string" name="ownerName" use="optional"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# dependency-injection - 对象生命周期管理和 IoC 容器

> ID：13432574
> 
> 赞同：12
> 
> 时间：2012-11-17T16:46:49.863
> 
> 标签：dependency-injection, inversion-of-control

我正在将游戏从单人游戏更新为多人游戏。在这种情况下，游戏最初是在大多数类都是单实例的情况下编写的。例如，有一个 Player 对象、一个 GameState 对象等。也就是说，这些对象中的每一个都与应用程序一样长。

既然可以同时玩多个玩家，我显然需要支持创建多个 Player 对象、GameState 对象等。在此过程中，我开始意识到大多数对象具有以下三种生命周期之一：

1.  应用程序的生命周期，例如处理导航的指挥
2.  玩家的生命周期，例如当前玩家的 SettingsViewModel
3.  游戏的生命周期，例如当前游戏的 GameState

我很好奇其他人如何使用 IoC 容器来处理这些不同对象的创建。我想避免为每个具有玩家或游戏生命周期的类创建工厂类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T22:14:42.580

许多 IoC 容器都有自定义的生命周期范围，您可以根据自己的意愿进行管理。例如，在 Ninject 中，您可以定义自定义生命周期范围，如下所示：

```
kernel.Bind<IService>().To<Service>().InScope((c, o) => yourCustomeScope); 
```

只要 yourCustomeScope 变量没有改变，内核每次收到 IService 请求时都会返回一个 Service 对象实例。一旦 yourCustomeScope 变量发生变化，就会在下一次请求 IService 时创建一个新的 Service 实例。yourCustomeScope 可以是当前玩家实例、游戏对象或任何您想根据其引用更改更改 Service 对象生命周期的东西。

但是，您刚才提到的对象更有可能是实体而不是服务，我认为注入不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T13:40:58.493

[这](https://github.com/gridmaster/IOC-with-Ninject)是一个可能有帮助的 IOC 示例。该项目称为 IOC-with-Ninject。它使用 Ninject 和一个 IOC 容器类来管理所有对象的生命周期。您需要[对 Ninject 进行一些研究](http://www.ninject.org/learn.html)以根据您的特定需求对其进行自定义，但如果您使用的是 .NET，这是您的 IOC 容器解决方案 (IMHO)，它将帮助您组织代码库。这是个人选择，但我发誓。如果你不使用 .NET，它仍然会给你一个简单的模式来遵循。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T14:58:33.927

根据我的经验，工厂方法效果最好。

控制实例的生命周期对于支持来说很笨重，需要努力、了解所有类的生命周期要求和依赖关系、配置时间和配置管理。同时，工厂的使用是自然的和特定于代码的。

[使用代理工厂](https://github.com/castleproject/Windsor/blob/master/docs/typed-factory-facility-interface-based.md)可以避免创建工厂（实现）。您还可以让工厂返回通用参数，以进一步减少工厂（接口）创建的需求。

如果仍然需要太多工厂，我建议查看代码流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-05T10:34:03.920

我认为这部分是对先前答案的一些评论的重新整理，但我试图举例说明对一些推理的扩展。

一旦进入管理注入对象生命周期的领域，您可能应该为这些对象创建工厂。

根本问题是组合根不知道创建对象所需的调用环境上下文是什么。

我想我应该退后一步，在这一点上解释一下。

关于依赖注入的公认智慧是在代码入口点附近有一个组合根。这有很多很好的理由，在网上不难找到，所以我不会在这里讨论。

组合根是您将接口（通常但可能是对象）映射到它们的实现的地方。您可以将此时可用的信息传递给构造函数。因此，您可以传入一个对象的引用，该对象的生命周期在执行组合根时是当前的。

但是，如果组合根的生命周期与要创建的对象的生命周期不重叠，则必须推迟构造函数的执行，直到需要创建对象。这就是为什么你需要有一个工厂。此时您可以将工厂方法传递给您的映射，从而传递生成对象所需的信息，但允许在需要时进行创建，而不是在执行组合根时。

你不需要工厂类来做这个工厂方法很好，而且工厂方法可以内联，所以代码开销并不比我们在组合路由中创建对象多多少。

如果我们有一个包含 2 个服务的项目，其中第一个服务依赖于第一个服务，并且我们只希望第二个服务的生命周期在我们创建第一个服务时开始，我们可能会有如下内容。（我正在使用 ninject 给出一个代码示例，但我希望其他 IOC 容器在这方面也能类似地工作。）

```
`   
    公共类Service1：IService
    {
        私有 Func<IService>serviceFactoryMethod _Service2Factory;
        公共服务1（Func<IService>service2FactoryMethod）
        {
            _Service2Factory=service2FactoryMethod;
        }

        公共无效 DoSomethingUsingService2()
        {
            var service2=_Service2Factory();
            service2.DoSomething();
        }
    }

    公共类主类
    {
        公共无效CompositionRoot（）
        {
            var kernel= new StandardKernel();
            kernel.Bind.ToMethod(m=>
            {
               return new Service1(m.Kernel.Get<IService2>());
            }
        }
    }

`   

```

这个例子没有说明你将如何管理应用程序的生命周期、玩家和游戏的生命周期，但希望它能提供足够的线索来说明如何消除与依赖注入相关的生命周期问题。

旁注：使用 Ninject，您将能够更改 Service2 的范围，以便管理其生命周期，使其超出 Service1 的生命周期。例如，如果您知道游戏的每个实例都将在其自己的线程上发生（好吧，这可能不太可能），您可以为游戏使用 InThreadScope。

# java - 将 Android 应用程序连接到 MySQL 数据库

> ID：13432575
> 
> 赞同：2
> 
> 时间：2012-11-17T16:46:50.567
> 
> 标签：java, android, mysql, database

有人可以帮助我解决与 MySQL 数据库相关的问题吗？

昨天我正在制作应用程序来获取一些文本数据并将它们发送到位于远程服务器上的数据库！

我正在向数据库发出 POST 请求，并将几个文本字段发送到数据库中的一个表。所以我的问题是：

“我可以直接使用 MySQL（不是通过 POST 方法）吗？以及如何使用它？” （很高兴看到解决方案或示例的网址）

PS当我向服务器发送数据时，我在发送俄语字符时在数据库字段中出现了一些错误（从我的应用程序发送到服务器的编码类型是什么？？？？）

# c - 如何根据用户输入检查文件是否存在于 C 中

> ID：13432578
> 
> 赞同：4
> 
> 时间：2012-11-17T16:47:05.323
> 
> 标签：c, file, input

我完全是 C 的菜鸟，我想知道为什么如果我接受用户输入，为什么它不会找到文件，但是当我使用以下方式对其进行硬编码时：

```
const char * fn = "/Users/james/Documents/test.rtf"; 
```

它似乎工作正常？

```
char text[100];
fputs("File location: ", stdout);
fflush(stdout); 
fgets(text, sizeof text, stdin);

FILE *fp = fopen(text,"r");
if( fp ) {
    printf("\nFile Exists");
    fclose(fp);
} else {
    printf("\nFiles doesn't exist");
} 
```

任何帮助都会很棒，或者只是指向一些我显然无法找到的在线资源。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T16:49:42.377

`fgets`读取一行并保留最后的换行符。你必须把它去掉

```
text[strlen(text) - 1] = '\0'; 
```

（当然，在进行正确的错误检查之后。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:20:00.957

您可以使用 access() 检查文件是否存在对于访问，您需要提供文件的路径和模式。

访问的原型是 int access(const char *pathname, int mode);

如果文件存在，access() 返回零。

欲了解更多信息，请访问： http: [//linux.die.net/man/2/access](http://linux.die.net/man/2/access)

# css - 页脚内容重叠包装 div

> ID：13432583
> 
> 赞同：0
> 
> 时间：2012-11-17T16:47:51.033
> 
> 标签：css, html, overlapping

我的页脚内容与我的css和html中的包装器div重叠，当我将高度更改为自动时它不起作用。下面是我正在处理的页面示例。

**包装器 CSS**

```
#wrapper {
width: 1030px;
height: 600px;
margin: 20px auto auto auto;
padding: 0;
background: url(wrapper.png);
} 
```

**页脚 CSS**

```
.footer{
width: 1000px;
padding: 60px 0 0 30px;
height: auto;
float: right;
clear: both;
background: url(footer_bg.gif) no-repeat top right;
text-align: center;

} 
```

[例子](http://jsfiddle.net/L6acE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:18:30.153

您需要清除 .content_left 和 content_right 列中的浮动，并删除与 #wrapper 关联的高度：

[http://jsfiddle.net/L6acE/3/](http://jsfiddle.net/L6acE/3/)

清除浮动有几种不同的方法。我采用了一种非常简单的方法，即`<div style="clear:both;">`在此处讨论的两列之后添加一个：

[http://css-tricks.com/the-how-and-why-of-clearing-floats/](http://css-tricks.com/the-how-and-why-of-clearing-floats/)

但我通常会使用这里讨论的 clearfix 方法：

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

我还`word-wrap:break-word`为您的左列添加了一些 CSS 来包装您的所有虚拟内容。

# javascript - 无法访问子节点的值，但我可以访问子节点的名称

> ID：13432588
> 
> 赞同：1
> 
> 时间：2012-11-17T16:48:12.000
> 
> 标签：javascript

当我尝试访问子节点时，我可以，但我无法访问它们的值，它显示为 null

```
 if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.open("GET","obj.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;
    x=xmlDoc.getElementsByTagName("Objnode")[0].childNodes; 
    y=xmlDoc.getElementsByTagName("Objnode")[0].firstChild;    
    for (i=0;i<x.length;i++)
    {
    if (y.nodeType==1)
      {//Process only element nodes (type 1)
      document.write(y.nodeName + "<br>"); change it to y.nodeValue it says null!
      }
    y=y.nextSibling;
    } 
```

我的xml就像

```
 <Objnode>
            <Object1>something</Object1>
            <Object2>something</Object2>
    </Objnode> 
```

上面的代码有效，但行

```
document.write(y.nodeName + "<br>"); 
```

当将其更改为 y.nodeValue 时，它​​显示为空！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:20:01.477

实际上`nodeType 1`是一个`HTML element, i.e. div, span etc`，并且一个元素没有任何元素，`nodeValue`而是它可以包含子节点，并记住 an 内的任何文本`element`也是一个节点（文本节点）。看这个例子

**HTML**

```
<div id="d">First Text Node <br /> Another Text Node</div>​ 
```

**JS**

```
var n=document.getElementById('d');
alert(n.firstChild.nodeValue);​ // First Text Node
alert(n.childNodes[2].nodeValue); // Another Text Node 
```

所以，在你的例子`y.nodeValue`中是空的。

[**演示**](http://jsfiddle.net/punUw/2/)。

# python - TypeError: unbound method make_request() 必须使用 XX 实例调用，但如何？

> ID：13432589
> 
> 赞同：1
> 
> 时间：2012-11-17T16:48:18.877
> 
> 标签：python

运行下面的代码我得到

E TypeError: unbound method make_request() must be called with A instance as first argument (得到 str 实例)

我不想将 make_request 方法设置为静态，我想从对象的实例中调用它。

示例 [http://pytest.org/latest/fixture.html#fixture-function](http://pytest.org/latest/fixture.html#fixture-function)

```
# content of ./test_smtpsimple.py
import pytest

@pytest.fixture
def smtp():
    import smtplib
    return smtplib.SMTP("merlinux.eu")

def test_ehlo(smtp):
    response, msg = smtp.ehlo()
    assert response == 250
    assert "merlinux" in msg
    assert 0 # for demo purposes 
```

我的代码

```
""" """
import pytest

class  A(object):
    """  """
    def __init__(self, name ):
        """ """
        self._prop1 = [name]

    @property
    def prop1(self):
        return self._prop1  

    @prop1.setter
    def prop1(self, arguments):
        self._prop1 = arguments

    def make_request(self, sex):
        return 'result'

    def __call__(self):
        return self

@pytest.fixture()
def myfixture():
    """ """
    A('BigDave')
    return A

def test_validateA(myfixture):
    result = myfixture.make_request('male')
    assert result =='result' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:57:28.450

@pytest.fixture() 创建夹具对象的实例

@pytest.fixture 直接访问fixture 类。

```
@pytest.fixture
def myfixture():
    """ """
    A('BigDave')
    return A 
```

对比

```
@pytest.fixture
def myfixture():
    """ """

    return  A('BigDave') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:02:26.717

您可以尝试将最后两种方法替换为：-

```
@pytest.fixture()
def myfixture():
    """ """
    return A('BigDave')

def test_validateA(myfixture):
    result = myfixture().make_request('male')
    assert result =='result' 
```

`myfixture`是函数对象。要调用该函数，您需要一个括号。所以，`myfixture()`。

现在在`myfixture()`方法中，`return A`再次返回类对象。为了返回`instance`A 类的一个，您将在其上调用您的方法，您需要返回`A()`或者只返回`A('BigDave')`您在那里使用的。

因此，现在您的方法将从`test_validateA`方法中获取一个类的实例，您正在调用该方法，从而传递as 第一个参数。`A``myfixture``self`

# ruby-on-rails - 在 Devise for Rails 中注册导致重定向循环

> ID：13432592
> 
> 赞同：0
> 
> 时间：2012-11-17T16:48:23.913
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, registration

使用 Rails 3.2.9 和设计 2.1.2。当用户访问`http://localhost:3000/users/sign_up`（与生产环境相同，`localhost:3000`用 URL 替换）时，他们会注册。提交时，它们会被`/users/sign_up`反复重定向到。铬报告：

```
This webpage has a redirect loop
The webpage at http://localhost:3000/users/sign_up has resulted in too many redirects. 
```

日志显示用户已创建，并且用户表也已更新以进行登录（实际上，如果我们随后转到另一个 URL，则用户已创建并在网站上登录）：

```
 ←[1m←[35mSQL (1.0ms)←[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "em
ail", "encrypted_password", "first_name", "last_name", "last_sign_in_at", "last_sign_in_ip", "middle_name", "p
latform_id", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "update
d_at", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Sat, 17 Nov 201
2 08:39:33 PST -08:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@ucode.com"],
 ["encrypted_password", "$2a$10$NvmaFtw/JjILrkmkDNOi7ePj29qI3LRB2zTLAxsw6GRAW7PZekGme"], ["first_name", "Test"
], ["last_name", ""], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["middle_name", ""], ["platform_id",
 1], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_c
ount", 0], ["updated_at", Sat, 17 Nov 2012 08:39:33 PST -08:00], ["username", "test"]]
  ←[1m←[36m (4.0ms)←[0m  ←[1mcommit transaction←[0m
  ←[1m←[35m (0.0ms)←[0m  begin transaction
  ←[1m←[36m (1.0ms)←[0m  ←[1mUPDATE "users" SET "last_sign_in_at" = '2012-11-17 16:39:33.934552', "current_sig
n_in_at" = '2012-11-17 16:39:33.934552', "last_sign_in_ip" = '127.0.0.1', "current_sign_in_ip" = '127.0.0.1',
"sign_in_count" = 1, "updated_at" = '2012-11-17 16:39:33.953553' WHERE "users"."id" = 3←[0m
  ←[1m←[35m (4.0ms)←[0m  commit transaction 
```

然后日志报告重定向循环：

```
Redirected to http://localhost:3000/users/sign_up
Completed 302 Found in 178ms (ActiveRecord: 0.0ms)

Started GET "/users/sign_up" for 127.0.0.1 at 2012-11-17 08:39:33 -0800
Processing by Devise::RegistrationsController#new as HTML
  ←[1m←[36mUser Load (0.0ms)←[0m  ←[1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1←[0m
Redirected to http://localhost:3000/users/sign_up
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)

Started GET "/users/sign_up" for 127.0.0.1 at 2012-11-17 08:39:34 -0800 
```

这令人惊讶地似乎是默认行为，因为另一个新项目经历了完全相同的行为。我不应该引导人们到 /users/sign_up 注册吗？

`rake routes`与用户相关的输出：

```
 new_user_session GET    /users/sign_in(.:format)                            devise/sessions#new
         user_session POST   /users/sign_in(.:format)                            devise/sessions#create
 destroy_user_session DELETE /users/sign_out(.:format)                           devise/sessions#destroy
        user_password POST   /users/password(.:format)                           devise/passwords#create
    new_user_password GET    /users/password/new(.:format)                       devise/passwords#new
   edit_user_password GET    /users/password/edit(.:format)                      devise/passwords#edit
                      PUT    /users/password(.:format)                           devise/passwords#update 
```

cancel_user_registration GET /users/cancel(.:format) devise/registrations#cancel user_registration POST /users(.:format) devise/registrations#create new_user_registration GET /users/sign_up(.:format) devise/registrations#new edit_user_registration GET /users /edit(.:format) 设计/注册#edit PUT /users(.:format) 设计/注册#update DELETE /users(.:format) 设计/注册#destroy

# windows-8 - Win8 Store App：鼠标单击网格控件时如何获取行/列索引？

> ID：13432593
> 
> 赞同：0
> 
> 时间：2012-11-17T16:48:29.500
> 
> 标签：windows-8, winrt-xaml, windows-store-apps

当鼠标单击网格上的某个插槽时，我想检测网格控件的行/列索引。怎么做？

我正在使用 C#/XAML 开发一个 Win8 Store 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:46:32.333

你应该看看[PointerPoint 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.pointerpoint.aspx)

```
PointerPoint pt = e.GetCurrentPoint(gridView);
currentContactPt = pt.Position; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T18:18:17.940

声明一个数组并用网格的行/列初始化它的元素。然后您可以在循环中检查触发了哪个元素的鼠标单击。

# xcode - 自定义 UITableViewCell 内容显示在分组样式内容视图之外

> ID：13432596
> 
> 赞同：2
> 
> 时间：2012-11-17T16:49:19.210
> 
> 标签：xcode, uitableview

我遇到了这个问题，我的自定义表格视图单元格在以分组样式显示时没有缩进其内容。

```
static NSString *CellIdentifier = @"GameListCell";
    GameViewCell *cell = (GameViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"GameViewCell" owner:self options:nil];
        for (UIView *view in views)
        {
            if ([view isKindOfClass:[GameViewCell class]])
            {
                cell = (GameViewCell *)view;
            }
        }
    }
    Board *game = (Board *)[boardArray objectAtIndex:indexPath.row];
    cell.opponentName.text = [NSString stringWithFormat:@"Game vs %@",game.opponentName];
    cell.gameDescription.text = [NSString stringWithFormat:@"Last Move: %@",game.opponentName];
    return cell; 
```

有谁知道可能发生了什么？

我还不能发布图片，但基本上内容太左了，超出了单元格的圆角矩形。

我认为它可能与表格视图单元格的 XIB 文件中的水平空间约束有关。它的值为“常量”和“20”。但是如何让内容显示在单元格的内容视图中？

它在“普通”样式中看起来不错，但对于分组样式没有缩进。

谢谢！

# php - 对 dsadd 使用 exec

> ID：13432599
> 
> 赞同：0
> 
> 时间：2012-11-17T16:49:52.430
> 
> 标签：php, exec

我正在 Windows Server 2008 上编程，我希望有一个 WebUI 来与域活动目录进行交互。

我的主要问题之一是我正在使用 HTML 表单中的 dsadd ，但这没有成功。我知道我的命令是正确的，我已经在服务器命令行上对其进行了测试

我的代码如下：

```
 if (isset($_POST['Submit']))
    {
        $DesiredUsername = $_POST['DesiredUsername'];
        $DesiredPassword = $_POST['DesiredPassword'];
        $DU = "{$DesiredUsername}";        // Desired Username
        $OU = "PHPCreatedUsers";          // Domain OU
        $DC1 = "slayerserv";             // Domain Part one 
        $DC2 = "local";                 // Domain Part Two
        $PWD = "{$DesiredPassword}";   // Password
        $ExecScript = 'dsadd user cn=$DesiredUsername,cn=PHPCreatedUsers,dc=slayerserv,dc=local -disabled no -pwd $DesiredPassword -mustchpwd yes';
        exec($ExecScript, $output);
        mysql_query("INSERT INTO addedusers (`ID`, `DU`, `OU`, `DC1`, `DC2, `PWD`) 
                    VALUES ('', '$DU', '$OU', '$DC1', '$DC2', '$PWD')");
        echo "<br><br>";
        print_r($output);

    #   echo "User: $DesiredUsername Has been Created";
    } 
```

当我 print_r($output); 它返回一个空白数组：

> 大批 （ ）

谁能为我提供解决方案或指出正确的方向？

++++

下面是我使用 exec 的一个工作示例

```
 $Script = 'ping 127.0.0.1 -n 1';
    exec($Script, $Output);
    print_r($Output); 
```

print_r($输出); 给出：

> 数组（ [0] => [1] => 用 32 字节数据 Ping 127.0.0.1：[2] => 来自 127.0.0.1 的回复：字节=32 时间<1ms TTL=128 [3] => [4] => 127.0.0.1 的 Ping 统计信息：[5] => 数据包：发送 = 1，接收 = 1，丢失 = 0（0% 丢失），[6] => 以毫秒为单位的近似往返时间：[7] => 最小值 = 0 毫秒，最大值 = 0 毫秒，平均值 = 0 毫秒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:54:59.863

原来从PHP运行dsadd有问题，原来将用户保存到PHPCreatedUsers的OU中失败了。

我更改了该行以将创建的用户保存到“用户”的默认 OU 中，并且它可以正常工作。

# ios - UIbutton 自动调整大小

> ID：13432605
> 
> 赞同：1
> 
> 时间：2012-11-17T16:50:36.077
> 
> 标签：ios, xcode, ipad

我有一个带有一些按钮的简单 UIImageView。当我旋转 iPad 模拟器时，按钮不会调整大小。我该如何解决？

PS：我使用的是 Xcode 4.5，如您所知，它在界面构建器中没有自动调整大小的遮罩（尺寸检查器中的画布，我们只需单击箭头并进行遮罩），之前已包含这些遮罩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:06:42.173

```
button.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleRightMargin; 
```

# javascript - 一次定义整个原型和单独设置方法的区别

> ID：13432607
> 
> 赞同：2
> 
> 时间：2012-11-17T16:50:41.923
> 
> 标签：javascript, prototype

简而言之，这两段代码之间有什么区别吗？有什么理由使用其中的一段吗？

代码#1：

```
​var thing=function(){}

thing.prototype={
    some_method:function(){
          alert('stuff');        
    }
} 
```

代码#2：

```
var thing=function(){}

thing.prototype.some_method=function(){
    alert('stuff');        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:51:44.280

那是一样的。没有理由会有所不同。

但在我看来，最好使用第二种形式，因为如果你决定让`thing`“类”从另一个类继承，那么你可以改变的更少：

```
thing.prototype = new SuperThing(); // inherits from the SuperThing class
thing.prototype.some_method=function(){
    alert('stuff');        
} 
```

它还可以更轻松地在多个 javascript 文件中定义您的类。

由于最好保持代码的连贯性，我更喜欢始终使用相同的构造，就是这样`thing.prototype.some_method=function(){`。

# delphi - 链接器错误在 C++ Builder 6 中检测到致命错误 ILI4368 链接

> ID：13432611
> 
> 赞同：1
> 
> 时间：2012-11-17T16:51:08.400
> 
> 标签：delphi, c++builder

链接 C++ Builder 项目时出现此错误。它发生在 IDE 和命令行工具中。我已经编译同一个项目好几年了，现在我做不到。我最近安装了 Windows 8，这可能是原因。

它是 C++ Builder 6。

有人知道ILI4368是什么意思吗？

谢谢

# mplayer - 退出时如何在 mplayer 中获得停止位置？

> ID：13432612
> 
> 赞同：3
> 
> 时间：2012-11-17T16:51:09.243
> 
> 标签：mplayer

如果我有一个使用 mplayer 播放文件的脚本并且我在中途停止播放，有没有办法将播放位置存储在它停止的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-14T03:01:55.233

试试这个，它又快又脏，但在 mplayer 退出后给了我播放歌曲的秒数

mplayer your.mp3 | tr [:cntrl:] '\n' | bbe -e "s/\x0a\x5b\x4a//" | 尾-n 4 | 头-n 1 | 剪切 -d ':' -f 2 | 剪切 -d '(' -f 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-15T06:49:59.023

[应该注意的是，这与0800peter 的答案](https://stackoverflow.com/a/27465912/2305676)几乎相同，但不需要安装 bbe。从本质上讲，这是通过友好的界面重写该答案。这个答案也解释了 mplayer 被过早终止的事件（如 with `pkill mplayer`）。

```
#!/bin/bash

# desc: Runs mplayer to play input file and returns seconds of playback when stopped
# input: 
#   arg1: path to audio file
#   arg2: pass either [seconds|timestamp]; default timestamp
# output: returns the timestamp or total seconds elapsed when playback stopped 
#   (ie. when mplayer terminated)
playAudioFile() {
    audioFile="$1"

    # if you need to modify mplayer switches, do so on the next line
    stopPos=$(mplayer "$audioFile" 2> /dev/null | tr [:cntrl:] '\n' | grep -P "A: +\d+\.\d\b" | tail -n1)

    # decide what to display
    if [ "$2" == "seconds" ]; then
        retval=$(awk '{print $2}' <<< "$stopPos")
    else
        retval=$(awk '{print $3}'  <<< "$stopPos" | tr -d '()')
    fi

    echo "$retval"
}

#example usage
path="$1"
stopPosition=$(playAudioFile "$path")
echo "$stopPosition" 
```

我的脚本接受音频文件的路径，当 mplayer 终止（正常或异常）时，返回时间戳或经过的秒数。如果您选择接收时间戳，请注意时间戳不会有任何零值单位的占位符。换句话说，00:00:07.3 将作为 07.3 返回，00:10:01.2 将作为 10:01.2 返回

## 如果我想将 mplayer 发送到后台怎么办？

如果您希望能够启动 mplayer 并将其发送到后台并且仍然能够查询此信息，您可能需要查看[我编写](https://github.com/nbros652/mplayer-status)的用于跟踪播放状态信息的 bash 脚本。该脚本包含两个名为`getElapsedTimestamp`and的函数`getElapsedSeconds`，即使 mplayer 已经终止，这两个函数都会返回播放时间。要使用这些功能，媒体文件必须以我的`playMediaFile`功能启动。可以像这样调用这个函数来启动mplayer并发送到后台......

```
playMediaFile "path/to/your/file" & 
```

# c++ - 另一个提升错误

> ID：13432616
> 
> 赞同：1
> 
> 时间：2012-11-17T16:51:52.590
> 
> 标签：c++, boost, boost-program-options

在这段代码上，我得到了巨大的错误

```
static void ParseTheCommandLine(int argc, char *argv[])
{
int count;
int seqNumber;

namespace po = boost::program_options;

std::string appName = boost::filesystem::basename(argv[0]);

po::options_description desc("Generic options");
desc.add_options()
("version,v", "print version string")
("help", "produce help message")
("sequence-number", po::value<int>(&seqNumber)->default_value(0), "sequence number")
("pem-file", po::value< vector<string> >(), "pem file")
;

po::positional_options_description p;
p.add("pem-file", -1);

po::variables_map vm;
po::store(po::command_line_parser(argc, argv).
          options(desc).positional(p).run(), vm);
po::notify(vm);

if (vm.count("pem file"))
{
    cout << "Pem files are: "
         << vm["pem-file"].as< vector<string> >() << "\n";
}

cout << "Sequence number is " << seqNumber << "\n";

exit(1); 
```

../../../FIXMarketDataCommandLineParameters/FIXMarketDataCommandLineParameters.hpp|98|错误：在 'std::operator<< [with _Traits = std::char_traits](((std:: basic_ostream >&)(& std::cout)), ((const char*)"Pem 文件为：")) << ((const boost::program_options::variable_value*)vm.boost::program_options::variables_map ::operator[](((const std::string&)(& std::basic_string, std::allocator >(((const char*)"pem-file"), ((const std::allocator&)(( const std::allocator*)(& std::allocator())))))))->boost::program_options::variable_value::as with T = std::vector, std::allocator >, std ::allocator, std::allocator > > >'|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:55:48.293

向量不实现`ostream & operator<<(std::ostream &)`.

你可能应该这样做：

```
cout << "Pem files are: ";
for (auto & x : vm["pem-file"].as< vector<string> >())
    cout << x << "\n"; 
```

# javascript - Javascript中的除法不准确？

> ID：13432619
> 
> 赞同：2
> 
> 时间：2012-11-17T16:52:24.677
> 
> 标签：javascript, division

> **可能重复：**
> [JavaScript 浮点数问题的优雅解决方法](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

如果我在 Javascript 中执行以下操作：

```
0.06120*400 
```

结果是 24.48。

但是，如果我这样做：

```
24.48/400 
```

结果是：

```
0.061200000000000004 
```

JSFiddle：http: [//jsfiddle.net/zcDH7/](http://jsfiddle.net/zcDH7/)

所以看起来 Javascript 在进行除法和乘法运算时会以不同的方式舍入？

使用我的计算器，运算`24.48/400`得出正确答案`0.0612`。

我应该如何处理Javascript的不准确划分？我不能简单地将数字四舍五入，因为我将处理不同精度的数字。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:57:49.227

您只需使用以下命令即可获得正确的结果：

```
var a = 24.48/400;
console.log(a.toFixed(6)); 
```

因为`typeof a.toFixed(6) === 'string'`你可以：

```
var a = 24.48/400;
console.log(parseFloat(a.toFixed(6))); 
```

*   的参数`toFixed`是您想要的小数位数。

# javascript - 在 html/css 中调整图像大小和居中？

> ID：13432621
> 
> 赞同：1
> 
> 时间：2012-11-17T16:52:29.233
> 
> 标签：javascript, jquery, html, css

有没有一种方法可以仅使用 html/css 调整图像的大小、裁剪和居中？（img 标签或 css 精灵）

例如，如果我有一个 500x500 像素的图像，

1.  我想将其调整为 250x250 像素的图像

2.  我想让实际的可见图像为 100x100，但仍然具有 250x250 大小的图像的比例。

3.  我希望图像的中心位于 x,y 位置。

仅使用 html/css 是否可能，如果没有，您建议我如何使用 javascript 来解决它？

编辑 - 动静能量：

对于（2），假设我的缩放图像现在是 200x200，我希望我的可见图像是 100x100：所以我想我的意思是我希望图像的比例和分辨率为 200x200，但我希望可见图像是100x100 或者换句话说，可见图像将位于坐标 x,y: 0,0; 0,100；100,0; 100,100；的 200x200 图像。对不起，但我不擅长解释这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T16:59:52.787

**[更新：http: //jsfiddle.net/LTrqq/5/](http://jsfiddle.net/LTrqq/5/)**的一个例子****

 **为了

1.  您可以只使用CSS`width`和元素`height``<img>`
2.  可以通过 (1) 来完成，并将此图像放入一个 div 和`position: absolute`，并带有所需的`top`and `left`，并将其放入另一个带有 的 div 中`position: relative`，并且这个外部 div 可以有`width: 100px`、`height: 100px`和`overflow: hidden`
3.  与 (2) 相同，具有期望值`top`和`left`值。

我们需要`position: relative`(2) 中的外部 div，因为我们希望内部 div 相对于这个外部 div 定位，而不是相对于整个文档。

对于`top`and `left`，它就像`top: -50px; left: -50px`一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:45:00.850

您可以将图像定义为任何尺寸，然后将其放在 div 中并隐藏溢出以实现裁剪外观。但是，如果您真的想裁剪图像，以便有人想下载裁剪和缩放的副本，请查看：[http ://deepliquid.com/projects/Jcrop/demos.php](http://deepliquid.com/projects/Jcrop/demos.php)

但是，如果您可以尝试 PHP，[http://www.binarymoon.co.uk/projects/timthumb/](http://www.binarymoon.co.uk/projects/timthumb/) 非常易于使用，只需将其放在您的服务器上并将您的 img 标签 src 指向它即可。示例：<img src="/timthumb.php?mycat.jpg&h=250&w=250" />

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:07:02.930

刚刚从我的头顶上完成了这个，但如果不完全准确的话，它应该几乎在那里。-X 和 -Y 坐标是让您获得裁剪偏移的原因。因此，例如，如果您想从 20x30 进行裁剪，您可以将它们设为 -20px 和 -30px。

```
<style>
    #crop { width: 100px; height: 100px; display: block; overflow: hidden; position: relative; }
    #crop img { position: absolute; left: -X; top: -Y; }
</style>

<div id="crop">
    <img src="500x500.jpg" width="250" height="250">
</div> 
```

如果您想将其居中并且您知道裁剪容器中图像的大小，则可以使用以下 CSS 代替：

```
#crop img { position: absolute; left: 50%; top: 50%; margin: -125px 0 0 -125px; } 
```

125px 是 250 的一半，所以应该让它居中。**

# c# - 将矩阵转换为颜色网格

> ID：13432623
> 
> 赞同：0
> 
> 时间：2012-11-17T16:53:04.653
> 
> 标签：c#, colors, matrix, console-application, converter

我目前正在用 C# 制作控制台应用程序（将来将使用 Windows 窗体应用程序。如果需要，会尽快）。我目前的目标是将矩阵（当前大小 52x42）导出为图像（位图、jpeg、png，我很灵活），其中矩阵中的每个值（0、1、2、3）都被描绘为白色、黑色、蓝色或红色正方形，大小为 20 像素 x 20 像素，网格 1 像素宽分隔每个“单元格”。

这甚至可以在控制台应用程序中完成，如果可以，怎么做？如果不是，我需要什么让它在 Windows 窗体应用程序中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:58:12.277

只需创建一个 52x42 像素的位图并使用与您的矩阵值对应的颜色填充它。

```
using System.Drawing;

void SaveMatrixAsImage(Matrix mat, string path)
{
    using (var bmp = new Bitmap(mat.ColumnCount, mat.RowCount))
    {
        for (int r = 0; r != mat.RowCount;    ++r)
        for (int c = 0; c != mat.ColumnCount; ++c)
            bmp.SetPixel(c, r, MakeMatrixColor(mat[r, c]));
        bmp.Save(path);
    }
}

Color MakeMatrixColor(int n)
{
    switch (n)
    {
        case 0: return Color.White;
        case 1: return Color.Black;
        case 2: return Color.Blue;
        case 3: return Color.Red;
    }
    throw new InvalidArgumentException("n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:07:32.910

考虑使用`Graphics`允许您绘制线条和矩形等形状的对象。这比绘制单个像素要快

```
using (var bmp = new Bitmap(mat.ColumnCount, mat.RowCount)) {
    using (var g = Graphics.FromImage(bmp)) {
        ....
        g.FillRectangle(Brushes.Red, 0, 0, 20, 20);
        ....
    }
}
bmp.Save(...); 
```

# asp.net - 由 asp.net 提供的账单详细信息

> ID：13432625
> 
> 赞同：-1
> 
> 时间：2012-11-17T16:53:09.473
> 
> 标签：asp.net, sql, product

大家好，我刚刚开始学习asp.net。现在我正在尝试使用 sql 数据库开发计费软件。我想知道如何以网格视图格式计算产品的总数和总计。

并且还想知道将产品数量与其奖金相乘。

帮助只是在我的项目中添加一些代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:07:16.283

如果你的意思是 SQL 语句，可能是这样的：

计算每个售出产品的小计

```
select product.name [item], 
       product.price [price], 
       order.quantity [quantity], 
       product.price*order.quantity [subtotal]
from product p, order o
where o.ProductId = p.ProductId
and o.OrderId = @orderId 
```

计算每个订单的总价格可能是这样的：

```
select o.orderId, sum(product.price*order.quantity)
from order o, product p
group by order.OrderId
and o.ProductId=p.ProductId 
```

此查询的结果可以发送到这样的网格：

```
myGrid.DataSource= myDataSet;  //dataset that returned the results 
```

# python - 在python中提取表单键值对表单html页面或解析html页面

> ID：13432626
> 
> 赞同：6
> 
> 时间：2012-11-17T16:53:27.133
> 
> 标签：python, html, string, parsing, html-parsing

我想在html页面中提取一些表单元素的键值对

例如

```
name="frmLogin" method="POST" onSubmit="javascript:return validateAndSubmit();" action="TG_cim_logon.asp?SID=^YcMunDFDQUoWV32WPUMqPxeSxD4L_slp_rhc_rNvW7Fagp7FgH3l0uJR/3_slp_rhc_dYyJ_slp_rhc_vsPW0kJl&RegType=Lite_Home" 
```

而原线是

```
<form name="frmLogin" method="POST" onSubmit="javascript:return validateAndSubmit();" action="TG_cim_logon.asp?SID=^YcMunDFDQUoWV32WPUMqPxeSxD4L_slp_rhc_rNvW7Fagp7FgH3l0uJR/3_slp_rhc_dYyJ_slp_rhc_vsPW0kJl&RegType=Lite_Home"> 
```

有什么方法可以让我安全地获取键值对。我尝试使用空格分割，然后使用'='字符，但引号内的字符串也可以有'='。

是否有任何不同类型的拆分方法也可以处理引号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T17:09:44.770

使用解析库如[lxml.html](http://lxml.de/lxmlhtml.html)来解析 html。

该库将为您提供一种简单的方法来获得所需的内容，可能只需几个步骤即可：

1.  使用解析器加载页面

2.  选择要操作的表单元素

3.  索要你想要的数据

示例代码：

```
>>> import lxml.html
>>> doc = lxml.html.parse('http://stackoverflow.com/questions/13432626/split-a-s
tring-in-python-taking-care-of-quotes')
>>> form = doc.xpath('//form')[0]
>>> form
<Element form at 0xbb1870>
>>> form.attrib
{'action': '/search', 'autocomplete': 'off', 'id': 'search', 'method': 'get'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T16:58:05.673

您可以使用像这样的正则表达式：

```
/([^=, ]+)="([^" ]+|[^," ]+)" ?"/ 
```

在 python 中，你可以这样做：

```
#!/usr/bin/python

import re

text = 'name="frmLogin" method="POST" onSubmit="javascript:return validateAndSubmit();" action="TG_cim_logon.asp?SID=^YcMunDFDQUoWV32WPUMqPxeSxD4L_slp_rhc_rNvW7Fagp7FgH3l0uJR/3_slp_rhc_dYyJ_slp_rhc_vsPW0kJl&RegType=Lite_Home"';

ftext = re.split( r'([^=, ]+)="([^" ]+|[^," ]+)" ?', text )

print ftext; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T17:01:06.233

```
s = r'name="frmLogin" method="POST" onSubmit="javascript:return validateAndSubmit();" action="TG_cim_logon.asp?SID=^YcMunDFDQUoWV
32WPUMqPxeSxD4L_slp_rhc_rNvW7Fagp7FgH3l0uJR/3_slp_rhc_dYyJ_slp_rhc_vsPW0kJl&RegType=Lite_Home"'
>>> lst = s.split('" ')
>>> for item in lst:
...     print item.split('="')
... 
['name', 'frmLogin']
['method', 'POST']
['onSubmit', 'javascript:return validateAndSubmit();']
['action', 'TG_cim_logon.asp?SID=^YcMunDFDQUoWV32WPUMqPxeSxD4L_slp_rhc_rNvW7Fagp7FgH3l0uJR/3_slp_rhc_dYyJ_slp_rhc_vsPW0kJl&RegType=Li
te_Home"'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T17:11:47.213

```
{i.split('="')[0]: i.split('="')[1] for i in str.split("\" ")} 
```

`str`你的原始字符串在哪里

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T17:25:54.987

```
dict=eval('dict(%s)'%name.replace(' ',','))
print dict
{'action': 'TG_cim_logon.asp?SID=^YcMunDFDQUoWV32WPUMqPxeSxD4L_slp_rhc_rNvW7Fagp7FgH3l0uJR/3_slp_rhc_dYyJ_slp_rhc_vsPW0kJl&RegType=Lite_Home', 'onSubmit': 'javascript:return,validateAndSubmit();', 'method': 'POST', 'name': 'frmLogin'} 
```

这将解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-06T20:29:12.487

您可以使用支持解析 HTML 表单的库。

例如：[https ://mechanize.readthedocs.io/en/latest/](https://mechanize.readthedocs.io/en/latest/)

> Python 中的有状态程序化网页浏览。使用简单的 HTML 表单填写和单击链接以编程方式浏览页面。

# alloy - 合金中的谓词和整数

> ID：13432628
> 
> 赞同：2
> 
> 时间：2012-11-17T16:53:49.667
> 
> 标签：alloy

我知道合金中谓词的使用，但我对下面的描述有点惊讶：

```
pred locationConstraint(loc: Int -> Int){
    loc in (Int[0] + Int[1] + Int[2] + Int[3] + Int[4] + Int[5] + Int[6]) -> (Int[2] + Int[3])
 + (Int[2] + Int[3]) -> (Int[0] + Int[1] + Int[2] + Int[3] + Int[4] + Int[5])

} 
```

有人可以向我解释上述内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:38:26.717

添加`run {}`到您的模型中，然后`{x,y:Int | locationConstraint[x->y]}`在评估器中键入以获取结果：

![在此处输入图像描述](../Images/610868d2f939eac138bd2bd3b678ae43.png)

# c# - 为什么代码在查询数据库时会耗尽 CPU？

> ID：13432631
> 
> 赞同：2
> 
> 时间：2012-11-17T16:53:59.170
> 
> 标签：c#, sql-server, performance, ado.net

下面的 C# 代码检查 SQL 数据库以查看记录是否与 ClientID 和用户名匹配。如果找到超过 15 条或更多匹配的记录，则我的 Windows 2008 服务器上的 CPU 峰值约为 78%，而在执行以下 C# 代码时会找到 15 条记录。SQL Server 2008 数据库和软件位于另一台服务器上，因此问题不在于 SQL Server 使 CPU 达到峰值。问题在于我的 C# 软件正在执行下面的代码。在执行数据库查询并找到记录时，我可以看到包含以下 C# 代码的软件可执行文件飙升至 78%。

有人可以告诉我，当找到 15 个或更多匹配记录时，我的代码是否有问题导致 CPU 出现峰值？你能告诉我/告诉我如何优化我的代码吗？

更新：如果它找到 10 条记录，CPU 只会以 2-3% 的速度出现峰值。只有当它找到 15 条或更多记录时，CPU 才会以 78% 的速度飙升 2 到 3 秒。

```
//ClientID[0] will contain a ClientID of 10 characters
//output[0] will contain a User Name
char[] trimChars = { ' ' };
using (var connection = new SqlConnection(string.Format(GlobalClass.SQLConnectionString, "History")))
{
    connection.Open();
    using (var command = new SqlCommand())
    {
        command.CommandText = string.Format(@"SELECT Count(*) FROM Filelist WHERE [ToAccountName] = '" + output[0] + @"'");
        command.Connection = connection;
        var rows = (int) command.ExecuteScalar();
        if (rows >= 0)
        {
            command.CommandText = string.Format(@"SELECT * FROM Filelist WHERE [ToAccountName] = '" + output[0] + @"'");
            using (SqlDataReader reader = command.ExecuteReader())
            {
                if (reader.HasRows)
                {
                    while (reader.Read())
                    {
                        //Make sure ClientID does NOT exist in the ClientID field
                        if (reader["ClientID"].ToString().TrimEnd(trimChars).IndexOf(ClientID[0]) !=
                            -1)
                        {
                            //If we are here, then do something
                        }
                    }
                }
                reader.Close();
                reader.Dispose();
            }
        }
        // Close the connection
        if (connection != null)
        {
            connection.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:13:59.297

如果要删除第一个查询，您可以将数据库访问次数从 2 减少到 1，这不是必需的。

```
using (SqlConnection connection = new SqlConnection(connectionString))
using (SqlCommand command = connection.CreateCommand())
{
    command.CommandText = "SELECT ClientID FROM dbo.Filelist WHERE ToAccountName = @param"; // note single column in select clause
    command.Parameters.AddWithValue("@param", output[0]); // note parameterized query

    connection.Open();
    using (SqlDataReader reader = command.ExecuteReader())
    {  
        while (reader.Read()) // reader.HasRow is doubtfully necessary
        {
            // logic goes here
            // but it's better to perform it on data layer too

            // or return all clients first, then perform client-side logic
            yield return reader.GetString(0);
        }
    } // note that using block calls Dispose()/Close() automatically
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T17:11:17.940

改变这个：

```
SELECT * FROM Filelist 
```

对此：

```
SELECT ClientID FROM Filelist 
```

并检查性能。我怀疑您的选择中有一个 blob 字段。也不建议在`select *`查询中写下您确切感兴趣的字段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T17:23:42.507

没有什么看起来明显占用 CPU 资源，但一个问题确实很突出。

您正在运行查询以计算有多少条记录

```
"SELECT Count(*) FROM Filelist WHERE [ToAccountName] = '" + output[0] + @"'" 
```

然后，如果返回大于 0，则您正在运行另一个查询来获取数据。

```
"SELECT * FROM Filelist WHERE [ToAccountName] = '" + output[0] + @"'" 
```

这是多余的。摆脱第一个查询，只使用第二个，检查阅读器是否有数据。你也可以摆脱 HasRows 调用，然后做

```
using (SqlDataReader reader = command.ExecuteReader())
{
    while (reader.Read())
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T17:12:51.593

请考虑关于参数化查询的内容。

除此之外，我认为唯一的大问题可能出现在以下块中：

```
while (reader.Read())
{
    //Make sure ClientID does NOT exist in the ClientID field
    if (reader["ClientID"].ToString().TrimEnd(trimChars).IndexOf(ClientID[0]) != -1)
    {
        //If we are here, then do something
    }
} 
```

因此，尝试将您的 reader.Read() 数据缓存在某个局部变量中，尽快释放 SQL 资源，然后您就可以处理刚刚检索到的数据。例如：

```
List<string> myRows = new List<string>();
while (reader.Read())
{
   myRows.Add(reader["ClientID"].ToString();
}
/// quit the using clause
/// now elaborate what you got in myRows 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T17:05:10.653

代码中没有任何内容表明存在性能问题。

SQL Profiler 显示什么？

（在查询计划和使用的服务器资源方面。）

编辑：为了使这一点更清楚：您有一个*可能*表明存在问题的测量值。您现在需要更深入地测量以了解它是否真的是一个问题，只有您可以这样做（没有其他人可以访问硬件）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T18:03:25.273

我建议按照建议使用参数，但是，我看到了字符串列的类型与 C# 字符串不匹配的性能问题。在这些情况下，我建议明确指定类型。

像这样：

```
command.CommandText = "SELECT ClientID FROM dbo.Filelist WHERE ToAccountName = @accountName"; 
command.Parameters.Add("@accountName", SqlDbType.NVarChar, 16, output[0]); 
```

或这个：

```
SqlParameter param = command.Parameters.Add(
    "@accountName", SqlDbType.NVarChar);
param.Size = 16; //optional
param.Value = output[0]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-17T17:25:53.023

我强烈建议您从 JetBrains获取一份[dotTrace 。](http://www.jetbrains.com/profiler/)

至少，分析客户端代码将帮助您识别/消除 CPU 峰值的来源。

# php - PHP数组保存到文本文件

> ID：13432632
> 
> 赞同：10
> 
> 时间：2012-11-17T16:54:03.433
> 
> 标签：php, arrays

我已将来自外部服务器的响应保存到文本文件中，因此我不需要继续运行连接请求。相反，也许我可以将文本文件用于我的操作目的，直到我再次被读取以重新连接。（另外，我的连接请求仅限于这个外部服务器）

这是我保存到文本文件的内容：

记录.txt

```
Array
(
    [0] => stdClass Object
        (
            [id] => 552
            [date_created] => 2012-02-23 10:30:56
            [date_modified] => 2012-03-09 18:55:26
            [date_deleted] => 2012-03-09 18:55:26
            [first_name] => Test
            [middle_name] => 
            [last_name] => Test
            [home_phone] => (123) 123-1234
            [email] => someemail@somedomain.com
        )
     [1] => stdClass Object
        (
            [id] => 553
            [date_created] => 2012-02-23 10:30:56
            [date_modified] => 2012-03-09 18:55:26
            [date_deleted] => 2012-03-09 18:55:26
            [first_name] => Test
            [middle_name] => 
            [last_name] => Test
            [home_phone] => (325) 558-1234
            [email] => someemail@somedomain.com
        )
) 
```

数组中实际上还有更多，但我确信 2 没问题。

由于这是一个文本文件，我想假装这是实际的外部服务器（向我发送相同的信息），我如何再次使它成为一个真正的数组？

我知道我需要先打开文件：

```
<?php
$fp = fopen('records.txt', "r"); // open the file
$theData = fread($fh, filesize('records.txt'));
fclose($fh);
echo $theData;  
?> 
```

到目前为止`$theData`是一个字符串值。有没有办法将它转换回它最初出现的数组？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-17T17:00:07.390

更好地序列化并保存到文件，然后反序列化回数组。

```
// serialize your input array (say $array)
$serializedData = serialize($array);

// save serialized data in a text file
file_put_contents('your_file_name.txt', $serializedData);

// at a later point, you can convert it back to array like:
$recoveredData = file_get_contents('your_file_name.txt');

// unserializing to get actual array
$recoveredArray = unserialize($recoveredData);

// you can print your array like
print_r($recoveredArray); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T16:58:10.157

那时您不应该将其保存为`print_r`格式。

使用任一：

*   [`serialize()`](http://php.net/serialize)
*   或者[`json_encode()`](http://php.net/json_encode)
*   或者[`var_export()`](http://php.net/var_export)

这使得将文件解码回数组变得简单。

尽管有一个[print_r 解码器](https://gist.github.com/1102761)。但这应该是最后的手段，只有当你不能影响输入数据（你可以！）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T16:55:52.213

您可以`serialize`先将数组作为文本写入文件。然后你可以从文件中读回数据，`unserialize`将它变成一个数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-17T18:25:13.557

JSON版本

```
$json_data = json_encode($the_array);
file_put_contents("records.txt", $json_data);

// Recovering
$the_data = file_get_contents("records.txt");
$the_array = json_decode($the_data); 
```

# c++ - 在 C++ 中使用 ofstream 打开现有的 .doc 文件

> ID：13432633
> 
> 赞同：4
> 
> 时间：2012-11-17T16:54:05.730
> 
> 标签：c++, file, binary, doc, ofstream

假设我在 Windows 平台上有一个扩展名为 .doc 的文件，如何使用 C++ 中的 ofstream 对象打开该文件以在屏幕上输出其内容？我知道该对象可用于以文本和二进制模式打开文件。但我想知道是否可以打开 .doc（甚至 .pdf）文件并读取其内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:05:42.310

我以前从未真正这样做过，但在阅读之后，我想我可能会有一个建议。.docx 格式实际上只是压缩的 XML。解压后，文件位于 word/document.xml。在程序中执行此操作很有趣。

两种选择：如果您使用的是 C++ CLR (.NET)，那么[Microsoft 为您提供了一个 SDK](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)。它应该可以很容易地打开 Office 文档。

否则，如果您只是使用常规 C++，您可能需要做一些额外的工作。

1.  打开文件并使用[zlib之类的库将其解压缩](http://zlib.net/)
2.  找到里面的document.xml文件
3.  解析 XML 文档。您可能需要为此使用某种 XML 解析库。您必须查看 XML 的规范以了解如何获取所需的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:27:42.237

C++ 标准库具有`ifstream`可用于读取简单文本文件的类，也可用于读取二进制文件。

由您来解释文件中的这些字节。要正确解释二进制文件，您需要知道文件的格式。

如果您想到 MS Word 文件，那么我将从这里开始：[http](http://en.wikipedia.org/wiki/Office_Open_XML) ://en.wikipedia.org/wiki/Office_Open_XML以了解 MS Word 2007 格式。

如果您想自己制作一些过滤器， 您可能会发现 Boost Iostreams 库 ( [http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/home.html ) 在某种程度上很有用。](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/home.html)

# python - 没有撇号的字典单词列表

> ID：13432635
> 
> 赞同：0
> 
> 时间：2012-11-17T16:54:28.467
> 
> 标签：python, list, dictionary

我正在寻找一个只包含不带撇号的单词的字典文件。我好像找不到一个！有谁知道我在哪里可以找到一个，如果不是我如何使用 Python 从文件中删除这些单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:58:27.567

要检查任何字符是否在字符串或列表中，您可以通过以下方式使用“in”：

```
words = ["it's", "my", "world"]
filtered = [x for x in words if "'" not in x]
>>> ["my", "world"] 
```

或者相同但没有第一个中使用的列表理解：

```
filtered = []
for x in words:
    if "'" not in x:
        filtered.append(x) 
```

如果您有字典，其中键是您需要过滤的单词：

```
newDict = {}
for k,v in wordsDict.iteritems():
    if "'" not in k:
        newDict[k] = v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:58:48.897

**在 Linux 上：**

一种很好的方法，`grep`用于过滤掉`words`文件中包含撇号的任何单词并保存到`mywords.txt`您的主目录中。

`grep "^[^']*$" /usr/share/dict/words > ~/mywords.txt`

无需安装、下载或编写任何代码！

* * *

**在 OS X 上：**

甚至更容易，因为`/usr/share/dict/words`已经不包含带有撇号的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T16:59:00.427

使用内置函数[`filter()`](http://docs.python.org/2/library/functions.html#filter)：

```
filter(lambda x:"'" not in x,my_list) 
```

例子：

```
In [19]: my_list=['foo', "bar's", "don't","bar"]

In [20]: filter(lambda x:"'" not in x,my_list)
Out[20]: ['foo', 'bar'] 
```

从文档：

```
filter(function or None, sequence) -> list, tuple, or string 
```

> 返回那些 function(item) 为真的序列项。如果 function 为 None，则返回为 true 的项目。如果序列是元组或字符串，则返回相同的类型，否则返回列表。

# c# - 使用城堡温莎 wcffacility 托管服务

> ID：13432639
> 
> 赞同：1
> 
> 时间：2012-11-17T16:54:54.690
> 
> 标签：c#, wcf, castle-windsor, ioc-container, wcffacility

我有一个基本的合同项目：

```
[ServiceContract]
public interface IEchoService
{
    [OperationContract]
    string GetUpper(string text);
    [OperationContract]
    string GetLower(string text);
} 
```

服务项目：

```
public class EchoService : IEchoService
{
    public string GetUpper(string text)
    {
        return text.ToUpper();
    }

    public string GetLower(string text)
    {
        return text.ToLower();
    }
} 
```

自托管项目：

```
class Program
{
    static void Main(string[] args)
    {
        var container = new WindsorContainer();
        container.AddFacility<WcfFacility>(f => f.CloseTimeout = TimeSpan.Zero);

        container
            .Register(
                AllTypes
                    .FromThisAssembly()
                    .InSameNamespaceAs<IEchoService>()
                    .WithServiceDefaultInterfaces()
                    .Configure(c =>
                               c.Named(c.Implementation.Name)
                                   .AsWcfService(
                                       new DefaultServiceModel()
                                           .AddEndpoints(WcfEndpoint
                                                             .BoundTo(new NetTcpBinding(SecurityMode.None))
                                                             .At(string.Format(
                                                                 "net.tcp://localhost:10333/MyServices/{0}",
                                                                 c.Implementation.Name)
                                                             )))));
        Console.WriteLine("hosting...");
        while (Console.ReadKey().Key != ConsoleKey.Q)
        {
        }
    } 
```

当我尝试从客户端连接到我的服务时，我收到此错误消息：

> 无法连接到 net.tcp://localhost:10333/MyServices/EchoService。连接尝试持续了 00:00:02.0904037 的时间跨度。TCP 错误代码 10061：无法建立连接，因为目标机器主动拒绝了它 127.0.0.1:10333。

所以我检查了 netstat，发现我的控制台服务虽然能够运行，但甚至没有监听端口 10333。我没有使用该端口的其他程序，我什至更改了其他一些端口号，但它只是没有出现在 netstat 上。

我的控制台服务有什么问题？或者我可能错过的任何配置设置？

# java - google.inject.Injector 插件功能的主要目的是什么？

> ID：13432643
> 
> 赞同：0
> 
> 时间：2012-11-17T16:55:29.477
> 
> 标签：java, plugins

我正在研究一个名为[Tomighty](https://github.com/ccidral/tomighty/commit/d3b84cd2d11cde5ca4bc90add2e45d2b94fc4004)的桌面应用程序的源代码，并且我不断看到顶部有这个包的代码：

```
import com.google.inject.Injector; 
```

然后我在顶部看到这段代码：

```
@Inject private Injector injector; 
```

有人可以解释一下这段代码的意义是什么，为什么这里需要它？

# c++ - 将 QGraphicsView 锚定到屏幕的角落

> ID：13432646
> 
> 赞同：1
> 
> 时间：2012-11-17T16:55:41.690
> 
> 标签：c++, qt, qgraphicsview

我有一个`QGraphicsView`渲染我的游戏。此视图始终充满整个屏幕。在右上角，我有另一个`QGraphicsView`用作小地图；它位于游戏视图上方。我希望这个小地图固定在屏幕的右上角，始终保持其大小。这段代码几乎可以工作，除了小地图的左侧永远不会改变（这是[意料之中](http://qt-project.org/doc/qt-5.0/qrect.html#setRight)的）。

```
void MainWindow::resizeEvent(QResizeEvent *event)
{
    mainWindow->graphicsView->resize(event->size().width(), event->size().height());
    QRect newRect(mainWindow->miniMapGraphicsView->geometry());
    newRect.setRight(event->size().width() - 20);
    mainWindow->miniMapGraphicsView->setGeometry(newRect);
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:50:02.843

当您想以某种方式定位小部件时，布局通常是最好的方法。

添加 a并将其设置`QFormLayout`为. 然后将您的添加到布局中。编辑迷你地图的属性，将其水平和垂直设置为您想要的尺寸。`graphicsView``layoutDirection``Qt::RightToLeft``miniMapGraphicsView``sizePolicy``Fixed``minimumSize``maximumSize`

另一种方法是使用 a`QGridLayout`并使用水平和垂直间隔将迷你地图推到视图的任何角落。

**注意：**布局默认设置了边距，因此如果您希望小部件在边缘紧贴对齐，请将它们归零。

# ios - 重定向后如何防止 UIWebview 内容的缩放？

> ID：13432654
> 
> 赞同：4
> 
> 时间：2012-11-17T16:56:37.453
> 
> 标签：ios, uiwebview, screen-rotation

我正在构建一个具有 UIWebView 的 iOS 5/6 应用程序。它加载了一些我嵌入到我的应用程序中的 HTML。
现在，当我旋转我的设备时，WebView 会改变它的大小（因为我希望它填满屏幕的整个宽度）。
然后它变得很奇怪：一些内容被放大，而一些内容没有被放大。请参阅此图像，其中包含一些示例文本：![UIWebview 旋转问题](../Images/b3d45fc7f80f5efc35e0d58848caba9d.png)

如您所见，标题（H6）保持不变，而段落放大了。有人知道如何防止这种情况吗？我希望 html 在横向模式下看起来与在纵向模式下相同。

我尝试将视口缩放设置为 1:`<meta name="viewport" content="initial-scale=1.0,max-scale=1.0">` 但这无济于事。主体的`font-size`样式设置为`14px`，但将其更改为`14pt`或百分比也没有任何区别。将`width`身体的设置为`100%`也没有帮助。

奇怪的是，删除文本中的换行符 ( `<br/>`) 可以修复它，但我需要换行符在那里，所以这不是解决方案。

唯一有效的是在方向更改后重新加载 UIWebView 的内容，但这并不能防止它*在旋转过程中看起来**不*正确，并且它会重置用户可能已经完成的任何滚动。

 *有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T13:42:42.607

尝试这个：

```
body {
  -webkit-text-size-adjust: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:27:34.783

我不确定，但它可能是 UIWebView 上的 scalesPageToFit 属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T09:01:38.690

如果您在 XCode 上编码（我假设是因为您使用的是 UIWebView）

*   选择笔尖上的 UIWebView。
*   实用工具窗格 > 大小检查器 > 在自动调整大小框中，删除两个双向箭头。
*   UIWebView 现在具有固定大小，不会自动缩放到方向。

![](../Images/d14d540aa314ba907621468c66b1f322.png)

这是你想要的吗？*

# apache-flex - Flex 4.6 Mobile - 使用 variableRowHeight 滚动到 dataGrid 中最后添加的项目

> ID：13432656
> 
> 赞同：0
> 
> 时间：2012-11-17T16:56:40.103
> 
> 标签：apache-flex, mobile, datagrid, air, scroll

我正在尝试设置 spark dataGrid 的滚动垂直位置，以在将项目添加到网格时显示它们。我知道你可以像这样设置滚动位置：

> dataGrid.scroller.viewport.verticalScrollPosition = itemPosition*rowHeight;

问题是dataGrid有variableRowHeight，因为每行单词都包含他们的名称标签，我不知道如何获得每行高度。我虽然在将 itemRenderer 添加到网格时将其与每个项目相关联，并将总行高值保存在变量中，但不知道如何实现。

有没有办法用 variableRowHeight 设置 dataGrid 的滚动位置以显示最后添加的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:29:15.183

设置数据提供者后，您可以执行类似的操作

```
dg.validateNow();
dg.verticalScrollPosition=dg.grid.contentHeight+dg.grid.height; 
```

# android - ListView 未显示在片段中

> ID：13432658
> 
> 赞同：0
> 
> 时间：2012-11-17T16:56:59.417
> 
> 标签：android, android-listview, nullpointerexception, android-fragments

当我在应用程序的片段中插入列表视图时，在我用项目填充它后它不会显示。事实上，应用程序由于 NullPointerException 而崩溃。有谁能够帮助我？这是我展示片段的详细活动。

```
package com.example.sample;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.NavUtils;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.MenuItem;

/**
 * An activity representing a single Course detail screen. This activity is only
 * used on handset devices. On tablet-size devices, item details are presented
 * side-by-side with a list of items in a {@link CourseListActivity}.
 * <p>
 * This activity is mostly just a 'shell' activity containing nothing more than
 * a {@link CourseDetailFragment}.
 */
public class CourseDetailActivity extends SherlockFragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_course_detail);

    // Show the Up button in the action bar.
    ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    // initiating both tabs and set text to it.
    ActionBar.Tab assignTab = actionBar.newTab().setText("Assignments");
    ActionBar.Tab schedTab = actionBar.newTab().setText("Schedule");
    ActionBar.Tab contactTab = actionBar.newTab().setText("Contact");

    // Create three fragments to display content
    Fragment assignFragment = new Assignments();
    Fragment schedFragment = new Schedule();
    Fragment contactFragment = new Contact();

    assignTab.setTabListener(new MyTabsListener(assignFragment));
    schedTab.setTabListener(new MyTabsListener(schedFragment));
    contactTab.setTabListener(new MyTabsListener(contactFragment));

    actionBar.addTab(assignTab);
    actionBar.addTab(schedTab);
    actionBar.addTab(contactTab);

    ListView listView = (ListView) findViewById(R.id.assignlist);
    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
      "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
      "Linux", "OS/2" };

    // First paramenter - Context
    // Second parameter - Layout for the row
    // Third parameter - ID of the TextView to which the data is written
    // Forth - the Array of data
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
      android.R.layout.simple_list_item_1, android.R.id.text1, values);

    // Assign adapter to ListView
    listView.setAdapter(adapter);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpTo(this, new Intent(this,
                CourseListActivity.class));
        return true;
    }
    return super.onOptionsItemSelected(item);
}

class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;
    public Fragment fragment2;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.main_across, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }
}
} 
```

我目前正在尝试使用的片段称为分配片段。正如您在 CourseDetailActvity 中看到的那样，我在列表视图中填充了一些项目以查看列表视图是否显示。片段正确膨胀，但是当我尝试将项目添加到列表视图时，应用程序崩溃了！

这是日志猫。

```
11-17 11:54:28.037: E/AndroidRuntime(282): FATAL EXCEPTION: main
11-17 11:54:28.037: E/AndroidRuntime(282): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sample/com.example.sample.CourseDetailActivity}: java.lang.NullPointerException
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.os.Looper.loop(Looper.java:123)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-17 11:54:28.037: E/AndroidRuntime(282):  at java.lang.reflect.Method.invokeNative(Native Method)
11-17 11:54:28.037: E/AndroidRuntime(282):  at java.lang.reflect.Method.invoke(Method.java:521)
11-17 11:54:28.037: E/AndroidRuntime(282):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-17 11:54:28.037: E/AndroidRuntime(282):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-17 11:54:28.037: E/AndroidRuntime(282):  at dalvik.system.NativeStart.main(Native Method)
11-17 11:54:28.037: E/AndroidRuntime(282): Caused by: java.lang.NullPointerException
11-17 11:54:28.037: E/AndroidRuntime(282):  at com.example.sample.CourseDetailActivity.onCreate(CourseDetailActivity.java:66)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-17 11:54:28.037: E/AndroidRuntime(282):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-17 11:54:28.037: E/AndroidRuntime(282):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:02:13.103

我相信你的崩溃是在这条线上：

```
listView.setAdapter(adapter); 
```

`adapter`显然不为空（崩溃不在其中`setAdapter()`），所以`listView`必须为空。

```
ListView listView = (ListView) findViewById(R.id.assignlist); 
```

好吧，我们可以看到它在那里声明。但是，`findViewById()`如果找不到对象，则可以返回 null。您正在使用的布局中似乎没有`ListView`ID 的对象（尤其是 no ） （ ）。`assignlist``activity_course_detail.xml`

# android - 带有全选复选框的可扩展列表视图：组 itemclick 和滚动错误

> ID：13432660
> 
> 赞同：4
> 
> 时间：2012-11-17T16:57:19.417
> 
> 标签：android, android-layout

我有一个 ExpandableListView，组名称旁边有一个复选框，展开时，子项也有复选框。

假设我有 4 个小组，有 50 个孩子。当一个组展开时，我点击全选复选框，一切正常，所有复选框都被选中并在我滚动时保持它们的状态。

但是，如果我滚动到列表的最后一个子项，之后滚动就会出错（滚动到顶部然后触摸屏幕以停止滚动不再起作用），单击组也不再起作用，直到我再次单击全选复选框。单击子复选框没有任何作用，我必须单击全选复选框才能使一切正常工作。

我更改了子复选框、组复选框的可聚焦状态并尝试了很多方法，但我找不到解决方案。你知道它来自哪里吗？

```
public class ExpandableListAdapter extends BaseExpandableListAdapter {

    LayoutInflater cinflater;
    LayoutInflater ginflater;
    ArrayList<Group> array;
    Context context;

    public ExpandableListAdapter(Context context, ArrayList<Group> array) {
        super();

        cinflater = LayoutInflater.from(context);
        ginflater = LayoutInflater.from(context);

        this.array = array;
        this.context = context;

    }

    public class ChildViewHolder {

        CheckBox contactcheckbox;
        TextView name;

    }

    @Override
    public int getChildrenCount(int groupPosition) {
        // TODO Auto-generated method stub
        return array.get(groupPosition).getContacts().size();
    }

    private OnCheckedChangeListener contactchecklistener = new OnCheckedChangeListener() {
               @Override
               public void onCheckedChanged(CompoundButton checkboxView, boolean isChecked) {

                   Contact contact = (Contact) checkboxView.getTag();
                   contact.setCheck(isChecked);

               }

            };

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        ChildViewHolder cholder;

        if(convertView == null){

            cholder = new ChildViewHolder();

            convertView = cinflater.inflate(R.layout.childsitems, null);

            cholder.name = (TextView) convertView.findViewById(R.id.childnametextview);

            cholder.contactcheckbox = (CheckBox) convertView.findViewById(R.id.childcheckbox);
            cholder.contactcheckbox.setOnCheckedChangeListener(contactchecklistener);

            convertView.setTag(cholder);

        }else{

            cholder = (ChildViewHolder) convertView.getTag();

        }

        cholder.contactcheckbox.setTag(array.get(groupPosition).getContacts().get(childPosition));
        cholder.contactcheckbox.setChecked(array.get(groupPosition).getContacts().get(childPosition).isCheck());

        cholder.name.setText(array.get(groupPosition).getContacts().get(childPosition).getName());

        return convertView;
    }

    public class GroupViewHolder {
        TextView groupname;
        CheckBox groupcheck;

    }

    @Override
    public int getGroupCount() {
        // TODO Auto-generated method stub
        return array.size();
    }

    private OnCheckedChangeListener groupchecklistener = new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            int index = (Integer) buttonView.getTag();

            for(int i = 0;i<array.get(index).getContacts().size();i++){
                array.get(index).getContacts().get(i).setCheck(isChecked);
            }

            array.get(index).setCheck(isChecked);

            notifyDataSetChanged();

        }
    };

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {

        GroupViewHolder gholder;

        if(convertView==null){
            gholder =  new GroupViewHolder();
            convertView = ginflater.inflate(R.layout.groupsitems,null);

            gholder.groupname = (TextView)convertView.findViewById(R.id.groupnametextview);
            gholder.groupcheckbox = (CheckBox)convertView.findViewById(R.id.groupcheckbox);
            gholder.groupcheckbox.setOnCheckedChangeListener(groupchecklistener);

            convertView.setTag(gholder);

        }else{
            gholder = (GroupViewHolder)convertView.getTag();
        }

        gholder.groupname.setText(array.get(groupPosition).getGroupname());
        gholder.groupname.setTextSize(24);
        gholder.groupname.setTextColor(Color.parseColor("#FF858585"));
        gholder.groupname.setTypeface(Typeface.DEFAULT, Typeface.BOLD);

        int paddingleft = 48;  // 38 dps
        final float scale = getResources().getDisplayMetrics().density;
        int dpvalue = (int) (paddingleft * scale + 0.5f);
        gholder.groupname.setPadding(dpvalue, 16, 0, 16);

        gholder.groupcheckbox.setTag(groupPosition);
        gholder.groupcheckbox.setChecked(array.get(groupPosition).isCheck());

        if(isExpanded == true){
                  convertView.setBackgroundDrawable(getResources().getDrawable(R.drawable.expandedbackground));
        }else{
            convertView.setBackgroundColor(Color.TRANSPARENT);
        }

        return convertView;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public Object getGroup(int groupPosition) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getGroupId(int groupPosition) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

groupsitems.xml：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <CheckBox
        android:id="@+id/groupcheckbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="12dp"
        android:focusable="false"
        android:gravity="right|center"
        android:paddingRight="10dp" />

<TextView
android:id="@+id/groupnametextview"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:layout_toLeftOf="@+id/groupcheckbox"
android:focusableInTouchMode="false"
android:text="Large Text"
android:textAppearance="?android:attr/textAppearanceLarge"
android:textColor="#FF858585"
android:textStyle="bold" />

</RelativeLayout> 
```

childitems.xml：

```
<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="8dp"
    android:layout_marginTop="8dp"
    android:paddingLeft="8dp" >

<TextView
        android:id="@+id/childnametextview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/childcheckbox"
        android:gravity="right|center"
        android:paddingLeft="16dp"
        android:textColor="#FFAFAFAF"
        android:textSize="16sp"
        android:textStyle="bold" />

<CheckBox
        android:id="@+id/childcheckbox"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T00:03:57.637

我找到了解决方案。我没有在 groupcheckbox 上使用 OnCheckedChangeListener，而是使用了 OnClickListener，它解决了这样的所有问题：

```
gholder.groupcheckbox.setChecked(array.get(groupPosition).isCheck());
gholder.groupcheckbox.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                for(int i = 0;i<array.get(groupPosition).getContacts().size();i++){
                    array.get(groupPosition).getContacts().get(i).setCheck(gholder.groupcheckbox.isChecked());
                }

                array.get(groupPosition).setCheck(gholder.groupcheck.isChecked());

                notifyDataSetChanged();
            }
        }); 
```

# python - 在 Sphinx 扩展中获取源 .rst 文件路径

> ID：13432662
> 
> 赞同：3
> 
> 时间：2012-11-17T16:57:32.157
> 
> 标签：python, python-sphinx

我正在编写一个 Sphinx 扩展，我需要知道当前页面的`.rst`源文件位置以提取它的一些版本控制系统信息。如何在我的事件处理程序/我应该使用哪个事件处理程序中获取这些信息？

例子：

```
def on_html_page_context(app, pagename, templatename, context, doctree):
    if doctree:
        print doctree.source

def setup(app):
    app.require_sphinx('1.0')
    app.connect('html-page-context', on_html_page_context) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:36:03.763

可以通过对示例中的事件处理程序进行小的更改来完成：

```
def on_html_page_context(app, pagename, templatename, context, doctree):
    if doctree:
        print doctree.attributes['source'] # Path to .rst file

def setup(app):
    app.connect('html-page-context', on_html_page_context) 
```

# spring-security - 如何在 Spring Security 中使用自定义配置的 RememberMeAuthenticationFilter？

> ID：13432663
> 
> 赞同：1
> 
> 时间：2012-11-17T16:57:43.417
> 
> 标签：spring-security, remember-me, hybris

我想使用带有弹簧安全性（3.1.0）的稍微定制的记忆功能。

我这样声明rememberme标签：

```
<security:remember-me key="JNJRMBM" user-service-ref="gymUserDetailService" /> 
```

因为我有自己的 rememberme 服务，所以我需要将其注入到我这样定义的 RememberMeAuthenticationFilter 中：

```
<bean id="rememberMeFilter" class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
    <property name="rememberMeServices" ref="gymRememberMeService"/>
    <property name="authenticationManager" ref="authenticationManager" />
</bean> 
```

我在 web.xml 中以标准方式集成了 spring 安全性：

```
<filter-name>springSecurityFilterChain</filter-name>
<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class> 
```

一切正常，除了 RememberMeAuthenticationFilter 使用标准的 RememberMeService，所以我认为我定义的 RememberMeAuthenticationFilter 没有被使用。

如何确保使用我的过滤器定义？我需要创建自定义过滤器链吗？如果是这样，我如何查看我当前的“隐式”过滤器链并确保我使用相同的过滤器链，除了我的 RememberMeAuthenticationFilter 而不是默认的过滤器链？

感谢您的任何建议和/或指示！

这里是完整的 spring-security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http pattern="/_ui/**" security="none" />
<!-- Default security config -->
<security:http disable-url-rewriting="true">
    <security:anonymous username="anonymous" granted-authority="ROLE_ANONYMOUS" />

    <!-- session stealing is prevented by using secure GUID cookie -->
    <security:session-management session-fixation-protection="none" />

    <!-- SSL / AUTHENTICATED pages -->
    <security:intercept-url pattern="/my-account*" access="ROLE_CUSTOMERGROUP" requires-channel="https" />
    <security:intercept-url pattern="/my-account/**" access="ROLE_CUSTOMERGROUP" requires-channel="https" />

    <!-- SSL / ANONYMOUS pages Login pages need to be SSL, but occur before authentication -->
    <security:intercept-url pattern="/login" requires-channel="https"  />
    <security:intercept-url pattern="/login/**" requires-channel="https" />
    <security:intercept-url pattern="/register" requires-channel="https" />
    <security:intercept-url pattern="/register/**" requires-channel="https" />
    <security:intercept-url pattern="/j_spring_security_check" requires-channel="https" />
    <security:intercept-url pattern="/logout" requires-channel="https" />

    <!-- MiniCart and CartPopup can occur on either secure or insecure pages -->
    <security:intercept-url pattern="/cart/rollover/*" requires-channel="any" />
    <security:intercept-url pattern="/cart/miniCart/*" requires-channel="any" />
    <security:intercept-url pattern="/cart/show" requires-channel="any" />
    <security:intercept-url pattern="/cart/lightboxmybag" requires-channel="any" />
    <security:intercept-url pattern="/cart/remove/*" requires-channel="any" />
    <security:intercept-url pattern="/cart/update/*" requires-channel="any" />
    <security:intercept-url pattern="/cart/getProductSizes/**" requires-channel="any" />
    <security:intercept-url pattern="/cart/getShippingMethods" requires-channel="any" />
    <security:intercept-url pattern="/cart/setShippingMethod" requires-channel="any" />     
    <security:intercept-url pattern="/cart/applyVoucherDiscount" requires-channel="any" />
    <security:intercept-url pattern="/cart/removeVoucherDiscount" requires-channel="any" />

    <security:intercept-url pattern="/checkout/**" requires-channel="https" />

    <!-- product suggest  -->
    <security:intercept-url pattern="/suggest*" requires-channel="any" />

    <!-- cybersource response  -->
    <security:intercept-url pattern="/cybersource/response" requires-channel="any" />
    <security:intercept-url pattern="/cybersource/csResponse" requires-channel="http" />

    <!--  regions -->
    <security:intercept-url pattern="/regions*" requires-channel="any" />
    <security:intercept-url pattern="/regions/*" requires-channel="any" />

    <!-- popup links -->
    <security:intercept-url pattern="/popupLink/*" requires-channel="any" />

    <!--  addresses -->
    <security:intercept-url pattern="/my-addresses*" requires-channel="any" />
    <security:intercept-url pattern="/my-addresses/**" requires-channel="any" />

    <security:intercept-url pattern="/search/autocompleteSecure/**" requires-channel="https" />

    <!-- OPEN / ANONYMOUS pages Run all other (public) pages openly. Note that while credentials are secure, the session id can be sniffed.
        If this is a security concern, then this line should be re-considered -->
    <security:intercept-url pattern="/**" requires-channel="any" method="POST" /> <!-- Allow posts on either secure or insecure -->
    <security:intercept-url pattern="/**" requires-channel="http" /> <!-- Everything else should be insecure -->

    <security:form-login
            login-page="/login"
            authentication-failure-handler-ref="loginAuthenticationFailureHandler" 
            authentication-success-handler-ref="loginGuidAuthenticationSuccessHandler"  />

    <security:logout logout-url="/logout" success-handler-ref="logoutSuccessHandler" />

    <security:port-mappings>
        <security:port-mapping http="#{configurationService.configuration.getProperty('tomcat.http.port')}"
            https="#{configurationService.configuration.getProperty('tomcat.ssl.port')}" />
        <security:port-mapping http="80" https="443" />
        <!--security:port-mapping http="#{configurationService.configuration.getProperty('proxy.http.port')}"
            https="#{configurationService.configuration.getProperty('proxy.ssl.port')}" /-->
    </security:port-mappings>

    <security:request-cache ref="httpSessionRequestCache" />

    <security:remember-me key="JNJRMBM" user-service-ref="gymUserDetailService" />
</security:http>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="acceleratorAuthenticationProvider" />
</security:authentication-manager>

<bean id="acceleratorAuthenticationProvider" class="org.jnj.storefront.security.AcceleratorAuthenticationProvider"
    scope="tenant">
    <property name="userDetailsService" ref="gymUserDetailService" />
    <property name="adminGroup" value="ROLE_ADMINGROUP"/>
    <property name="userService" ref="userService"/>
    <property name="gymCustomerLoginService" ref="defaultGymCustomerLoginService"/>
</bean>

<bean id="gymUserDetailService" class="org.jnj.storefront.security.services.impl.GymCoreUserDetailsService" scope="tenant">
    <property name="baseDao" ref="asyBaseDao" />
</bean>

<bean id="coreUserDetailsService" class="de.hybris.platform.spring.security.CoreUserDetailsService" scope="tenant" />

<bean id="guidCookieStrategy" class="org.jnj.storefront.security.impl.DefaultGUIDCookieStrategy"
    scope="tenant">
    <property name="cookieGenerator" ref="guidCookieGenerator" />       
</bean>

<alias name="defaultGuidCookieGenerator" alias="guidCookieGenerator"/>
<bean id="defaultGuidCookieGenerator" class="org.jnj.storefront.security.cookie.EnhancedCookieGenerator" scope="tenant">
    <property name="cookieSecure" value="true" />
    <property name="cookieName" value="acceleratorSecureGUID" />        
    <property name="httpOnly" value="false"/>
    <!-- if context allows a httpOnly adjust to true  -->
</bean>

<bean id="autoLoginStrategy" class="org.jnj.storefront.security.impl.DefaultAutoLoginStrategy" scope="tenant">
</bean>

<bean id="httpSessionRequestCache" class="org.jnj.storefront.security.impl.WebHttpSessionRequestCache"
    scope="tenant" />

<bean id="loginUserType" class="org.jnj.storefront.security.impl.LoginUserTypeBean" scope="tenant" />

<bean id="redirectStrategy" class="org.springframework.security.web.DefaultRedirectStrategy" scope="tenant" />

<!-- Login Success Handlers -->

<bean id="loginGuidAuthenticationSuccessHandler" class="org.jnj.storefront.security.GUIDAuthenticationSuccessHandler" scope="tenant">
    <property name="authenticationSuccessHandler" ref="loginAuthenticationSuccessHandler" />
    <property name="guidCookieStrategy" ref="guidCookieStrategy" />
</bean>

<bean id="loginAuthenticationSuccessHandler" class="org.jnj.storefront.security.StorefrontAuthenticationSuccessHandler" scope="tenant">
    <property name="customerFacade" ref="customerFacade" />
    <property name="defaultTargetUrl" value="/my-account"/>
    <property name="useReferer" value="true"/>
    <property name="alwaysUseDefaultTargetUrl" value="false"/>
    <property name="requestCache" ref="httpSessionRequestCache" />
</bean>

<bean id="loginCheckoutGuidAuthenticationSuccessHandler" class="org.jnj.storefront.security.GUIDAuthenticationSuccessHandler" scope="tenant">
    <property name="authenticationSuccessHandler" ref="loginCheckoutAuthenticationSuccessHandler" />
    <property name="guidCookieStrategy" ref="guidCookieStrategy" />
    <property name="defaultGymCartFacade" ref="gymCartFacade"/>
</bean>

<bean id="loginCheckoutAuthenticationSuccessHandler" class="org.jnj.storefront.security.StorefrontAuthenticationSuccessHandler" scope="tenant">
    <property name="customerFacade" ref="customerFacade" />
    <property name="defaultTargetUrl" value="/checkout/single/summary"/>
</bean>

<!-- Login Failure Handlers -->

<bean id="loginAuthenticationFailureHandler" class="org.jnj.storefront.security.LoginAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/login?error=auth"/>
    <property name="accountBlockedUrl" value="/login?error=blocked"/>
    <property name="passwordMigrationUrl" value="/login?error=migration"/>
</bean>

<bean id="loginCheckoutAuthenticationFailureHandler" class="org.jnj.storefront.security.LoginAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/login/checkout?error=auth"/>     
    <property name="accountBlockedUrl" value="/login/checkout?error=blocked"/>
    <property name="passwordMigrationUrl" value="/login/checkout?error=migration"/>     
</bean>

<!-- Logout Success Handler -->

<bean id="logoutSuccessHandler" class="org.jnj.storefront.security.StorefrontLogoutSuccessHandler" scope="tenant">
    <property name="defaultTargetUrl" value="/?logout=true"/>
    <property name="guidCookieStrategy" ref="guidCookieStrategy"/>
    <property name="cmsSiteService" ref="cmsSiteService"/>
</bean>

<bean id="gymRememberMeService" class="org.jnj.storefront.security.cookie.DefaultRememberMeService" scope="tenant">
    <property name="tokenService" ref="secureTokenService" />
    <property name="rememberMeCookieGenerator" ref="defaultRememberMeCookieGenerator" />
</bean>

<bean id="rememberMeFilter" class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
    <property name="rememberMeServices" ref="gymRememberMeService"/>
    <property name="authenticationManager" ref="authenticationManager" />
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:24:44.467

您是否尝试在[这里查看（Spring Docs）](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#remember-me)？他们说：

> “不要忘记将 RememberMeServices 实现添加到 UsernamePasswordAuthenticationFilter.setRememberMeServices() 属性中，将 RememberMeAuthenticationProvider 包含在 AuthenticationManager.setProviders() 列表中，并将 RememberMeAuthenticationFilter 添加到 FilterChainProxy 中（通常紧跟在 UsernamePasswordAuthenticationFilter 之后）。”

在您的情况下，RememberMeServices 是 gymRememberMeService；你有 RememberMeAuthenticationProvider 吗？

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:12:50.710

我最终不得不显式声明 form-login 和 remember-me 标签，并在过滤器链中声明它们。

因此，我必须将相应的过滤器声明为 bean，而不是标签和标签，相应地配置它们，然后使用标签将它们定义在过滤器链中的相应位置。（如果您使用自定义过滤器标签和显式标签，您会在启动时遇到弹簧错误）。

这对我有用：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http pattern="/_ui/**" security="none" />

<!-- Default security config -->
<security:http disable-url-rewriting="true" entry-point-ref="gymAuthenticationEntryPoint">

    <!-- using custom login filter config and rememberme filter config  -->
    <security:custom-filter ref="gymRememberMeFilter" position="REMEMBER_ME_FILTER"/>
    <security:custom-filter ref="gymAuthenticationFilter" position="FORM_LOGIN_FILTER"/>

    <security:anonymous username="anonymous" granted-authority="ROLE_ANONYMOUS" />

    <!-- session stealing is prevented by using secure GUID cookie -->
    <security:session-management session-fixation-protection="none" />

    <!-- SSL / AUTHENTICATED pages -->
    <security:intercept-url pattern="/my-account*" access="ROLE_CUSTOMERGROUP" requires-channel="https" />

<!-- omitting intercept definitions for readability -->

<!-- use explicit FORM_LOGIN_FILTER (see above) and entry-point (see entry-point-ref in http tag) instead of form-login definition
    <security:form-login
            login-page="/login"
            authentication-failure-handler-ref="loginAuthenticationFailureHandler" 
            authentication-success-handler-ref="loginGuidAuthenticationSuccessHandler"  />
-->

    <security:logout logout-url="/logout" success-handler-ref="logoutSuccessHandler" />

    <security:port-mappings>
        <security:port-mapping http="#{configurationService.configuration.getProperty('tomcat.http.port')}"
            https="#{configurationService.configuration.getProperty('tomcat.ssl.port')}" />
        <security:port-mapping http="80" https="443" />
        <!--security:port-mapping http="#{configurationService.configuration.getProperty('proxy.http.port')}"
            https="#{configurationService.configuration.getProperty('proxy.ssl.port')}" /-->
    </security:port-mappings>

    <security:request-cache ref="httpSessionRequestCache" />

</security:http>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="acceleratorAuthenticationProvider" />
    <security:authentication-provider ref="rememberMeAuthenticationProvider" />
</security:authentication-manager>

<bean id="acceleratorAuthenticationProvider" class="org.jnj.storefront.security.AcceleratorAuthenticationProvider"
    scope="tenant">
    <property name="userDetailsService" ref="gymUserDetailService" />
    <property name="adminGroup" value="ROLE_ADMINGROUP"/>
    <property name="userService" ref="userService"/>
    <property name="gymCustomerLoginService" ref="defaultGymCustomerLoginService"/>
</bean>

<bean id="gymUserDetailService" class="org.jnj.storefront.security.services.impl.GymCoreUserDetailsService" scope="tenant">
    <property name="baseDao" ref="asyBaseDao" />
</bean>

<bean id="coreUserDetailsService" class="de.hybris.platform.spring.security.CoreUserDetailsService" scope="tenant" />

<!-- Login Success Handlers -->

<bean id="loginGuidAuthenticationSuccessHandler" class="org.jnj.storefront.security.GUIDAuthenticationSuccessHandler" scope="tenant">
    <property name="authenticationSuccessHandler" ref="loginAuthenticationSuccessHandler" />
    <property name="guidCookieStrategy" ref="guidCookieStrategy" />
</bean>

<bean id="loginAuthenticationSuccessHandler" class="org.jnj.storefront.security.StorefrontAuthenticationSuccessHandler" scope="tenant">
    <property name="customerFacade" ref="customerFacade" />
    <property name="defaultTargetUrl" value="/my-account"/>
    <property name="useReferer" value="true"/>
    <property name="alwaysUseDefaultTargetUrl" value="false"/>
    <property name="requestCache" ref="httpSessionRequestCache" />
</bean>

<bean id="loginCheckoutGuidAuthenticationSuccessHandler" class="org.jnj.storefront.security.GUIDAuthenticationSuccessHandler" scope="tenant">
    <property name="authenticationSuccessHandler" ref="loginCheckoutAuthenticationSuccessHandler" />
    <property name="guidCookieStrategy" ref="guidCookieStrategy" />
    <property name="defaultGymCartFacade" ref="gymCartFacade"/>
</bean>

<bean id="loginCheckoutAuthenticationSuccessHandler" class="org.jnj.storefront.security.StorefrontAuthenticationSuccessHandler" scope="tenant">
    <property name="customerFacade" ref="customerFacade" />
    <property name="defaultTargetUrl" value="/checkout/single/summary"/>
</bean>

<!-- Login Failure Handlers -->

<bean id="loginAuthenticationFailureHandler" class="org.jnj.storefront.security.LoginAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/login?error=auth"/>
    <property name="accountBlockedUrl" value="/login?error=blocked"/>
    <property name="passwordMigrationUrl" value="/login?error=migration"/>
</bean>

<bean id="loginCheckoutAuthenticationFailureHandler" class="org.jnj.storefront.security.LoginAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/login/checkout?error=auth"/>     
    <property name="accountBlockedUrl" value="/login/checkout?error=blocked"/>
    <property name="passwordMigrationUrl" value="/login/checkout?error=migration"/>     
</bean>

<!-- Logout Success Handler -->

<bean id="logoutSuccessHandler" class="org.jnj.storefront.security.StorefrontLogoutSuccessHandler" scope="tenant">
    <property name="defaultTargetUrl" value="/?logout=true"/>
    <property name="guidCookieStrategy" ref="guidCookieStrategy"/>
    <property name="cmsSiteService" ref="cmsSiteService"/>
</bean>

<!-- remember me services -->
<bean id="rememberMeServices" class="org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
    <property name="userDetailsService" ref="gymUserDetailService"/>
    <property name="key" value="someprivatekey"/> <!-- must match the rememberMeAuthenticationProvider key -->
    <property name="parameter" value="rememberMe" /><!-- must match the parameter in the login form -->
    <property name="cookieName" value="JNJ_RMMBRM" />
    <property name="useSecureCookie" value="false" /> <!-- if set to true "remember me" only gets detected when accessed via https -->
    <property name="tokenValiditySeconds" value="31536000" /> <!-- 1 year -->
</bean>

<bean id="rememberMeAuthenticationProvider" class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
    <property name="key" value="someprivatekey"/>
</bean>

<bean id="gymRememberMeFilter" class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
    <property name="rememberMeServices" ref="rememberMeServices"/>
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationSuccessHandler" ref="loginGuidAuthenticationSuccessHandler"/>
</bean>

<!-- login filter and entry point -->   
<bean id="gymAuthenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager"/>
    <property name="filterProcessesUrl" value="/j_spring_security_check"/>
    <property name="rememberMeServices" ref="rememberMeServices"/>
    <property name="authenticationSuccessHandler" ref="loginGuidAuthenticationSuccessHandler"/>
    <property name="authenticationFailureHandler" ref="loginAuthenticationFailureHandler"/>
</bean>
<bean id="gymAuthenticationEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <property name="loginFormUrl" value="/login"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-10T03:28:28.197

Spring Security 3.2+ 支持 remember-me 元素上的 services-ref 属性。因此，在您的安全配置中，您将拥有：

```
<security:http xmlns="http://www.springframework.org/schema/security">
  ...
  <remember-me services-ref="rememberMeServices" key="secret-key">
</security:http>

<bean id="rememberMeServices" class="com.example.MyRememberMeServices">
  <constructor-arg index="0" value="secret-key" />
  <constructor-arg index="1" ref="userDetailsService" />
  <property name="tokenValiditySeconds" value="1000000" />
</bean> 
```

其中 com.example.MyRememberMeServices 是您自定义的 RememberMeServices 实现类。然后不再需要弄乱过滤器链、身份验证管理器或其他任何东西。

# c++ - 使用 boost 构建 Python 扩展

> ID：13432668
> 
> 赞同：5
> 
> 时间：2012-11-17T16:57:58.487
> 
> 标签：c++, python, c, boost

我对 boost c/c++ 库相当陌生。我下载了boost库并构建了库。

我使用 boost 接口在 c++ 中创建了一个非常简单的 python 库（实际上它是文档中给出的示例代码）。我将它构建到一个dll文件中。在文档中，它读到这个 ​​dll 暴露给 python，它们只是在 python 中显示导入函数并包含创建的库。我不明白如何将该dll暴露给python并以传统（'import'）方式加载库。如果您想查看代码，那么这里是：

```
#include <boost/python.hpp>

char const* greet()
{
    return "hello, world";
}

BOOST_PYTHON_MODULE(hello_ext)
{
    using namespace boost::python;
    def("greet", greet);
} 
```

请帮助我真的想用 c/c++ 和 python 构建应用程序。我只是想使用 hello_ext 作为：

```
>>>import hello_ext
>>>print hello_ext.greet() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T23:24:04.363

> 我将它构建到一个dll文件中。在文档中，它读到这个 ​​dll 暴露给 python，它们只是在 python 中显示导入函数并包含创建的库。我不明白如何将该dll暴露给python并以传统（'import'）方式加载库。

您需要将该共享库放入[模块搜索路径](http://docs.python.org/2/tutorial/modules.html#the-module-search-path)中。有几种方法可以实现这一目标。

一种是：

```
import sys
sys.path.append("<directory-where-hello_ext-module-resides>")
import hello_ext 
```

您的共享库应该被称为`hello_ext.dll`.

# java - 为什么在我的工作 JTextField 中输入的文本不可见/不可选？

> ID：13432675
> 
> 赞同：1
> 
> 时间：2012-11-17T16:58:59.080
> 
> 标签：java, swing, jtextfield

我目前正在为初学者学习 CS106A 斯坦福 Java 课程。我被困在第 7 号讲义上，要求我创建一个简单的程序，在画布上绘制带有 GLabel 的 GRect，然后允许我拖动它们，再次删除它们或清除整个画布。为了添加这样一个框，我在 SOUTH 中添加了一个 JTextField 来输入框的名称，以及 ADD/REMOVE/CLEAR 按钮。

在文本字段中输入名称以添加框。我的问题是我在 JTextField 中输入的文本虽然已记录（因为它显示在新框中）并没有显示在 JTextField 本身中，所以我在点击“添加”并阅读之前看不到我输入的内容在盒子本身上。

这是我的代码：

```
 package handout07Interactors;

import java.awt.Color;
import java.awt.event.ActionEvent;
import java.util.HashMap;

import javax.swing.*;

import acm.graphics.*;
import acm.program.*;

@SuppressWarnings("serial")
public class Box_Diagram extends GraphicsProgram{

    public void init() {
        displayButtons();
        addActionListeners();

        //TODO make draggable

    }

    public void actionPerformed(ActionEvent e) {

        if (e.getActionCommand().equals("ADD")) {

            //create box
            GCompound canvasBox = createBox(tf.getText());

            //add box to HashMap
            map.put(tf.getText(), canvasBox);

            //add box to canvas
            int x = (int) (getWidth() - canvasBox.getWidth()) / 2;
            int y = (int) (getHeight() - canvasBox.getHeight()) / 2;
            add(canvasBox, x, y);

        } else if (e.getActionCommand().equals("REMOVE")) {

            //remove box with name
            if (map.get(tf.getText()) != null) {remove(map.get(tf.getText()));}; //if box exists, remove it 

        } else {

            for( String name: map.keySet() )
            {
                remove(map.get(name));
            }

        }

    }

    private GCompound createBox(String text) {

        // GCompound
        GCompound box = new GCompound();

        // create GRect
        GRect rect = new GRect(BOX_WIDTH, BOX_HEIGHT);
        box.add(rect);

        // add GLabel
        GLabel label = new GLabel(text);
        int x = (int) (rect.getWidth() - label.getWidth()) / 2;
        int y = 30; //manual entry, somehow calculation didn't work as it does for width
        box.add(label, x, y);

        map.put(text, box);

        return box;

    }

    private void displayButtons() {

        //label
        add(new JLabel("Name:"), SOUTH);

        //textfield
        tf = new JTextField(30);
        tf.addActionListener(this);
        add(tf, SOUTH);

        //ADD REMOVE CLEAR
        add(new JButton("ADD"), SOUTH);
        add(new JButton("REMOVE"), SOUTH);
        add(new JButton("CLEAR"), SOUTH);

    }

    //IVARS
    private JTextField tf;
    public static final int BOX_WIDTH = 100;
    public static final int BOX_HEIGHT = 50;
    public HashMap<String, GCompound> map = new HashMap<String, GCompound>();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:06:35.160

您将 5 个不同的组件（标签、文本字段和 3 个按钮）添加到布局中的同一位置（边框布局的 SOUTH 部分）。

您应该将这 5 个组件添加到另一个 JPanel，例如使用 FlowLayout，然后将此面板添加到主面板的 SOUTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T21:11:41.053

对不起我的英语 - 它不是我的第一语言。当我尝试使用 JTextField 时，我在 NameSurfer（编程作业 №6 CS106A）中遇到了这种“奇怪的行为”，但在作业 №7 部分作业（作者指出的相同）中，JTextField 一切正常。

我注意到，如果我在 NORTH/WEST 区域使用 JTextField，JTextField 工作正常，对于 SOUTH/EAST，我使用 TextField。

# windows-8 - 在快照状态下使用相机？

> ID：13432682
> 
> 赞同：0
> 
> 时间：2012-11-17T17:00:28.963
> 
> 标签：windows-8, microsoft-metro

在我的 Windows 8 应用程序中，切换到“捕捉状态”后，每当我调用相机捕获事件时，它都会显示以下错误：

> 在意外的时间调用了一个方法。（HRESULT 例外：）`0x8000000E`。

这是否意味着相机无法在快照状态下工作，或者我遗漏了什么？

注意：相机在其他所有状态下都可以正常工作，即风景、填充等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:37:54.790

[CameraCaptureUI](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.cameracaptureui.aspx)在捕捉状态下不会工作，但这并不意味着在应用捕捉时相机不工作。

两种选择：

1.  在调用 CameraCaptureUI 方法之前以编程方式将应用程序退出捕捉模式 - 为此使用[TryUnsnap](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.tryunsnap.aspx)。效果可能有点刺耳，并且文档中有建议不要以编程方式取消快照，因此您要确保这样做“正确”（也许在快照视图中设置预期会发生这种情况或提示用户在使用该功能之前显式取消捕捉）。
2.  在不使用 CameraCaptureUI 的情况下与相机交互。[例如，使用捕获设备](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)的媒体捕获示例使用[MediaCapture](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.mediacapture.aspx)。

# url - Symfony2 - 每个语言环境的 url

> ID：13432688
> 
> 赞同：4
> 
> 时间：2012-11-17T17:01:28.900
> 
> 标签：url, symfony, routing, locale

我正在尝试在我的 Symfony2 项目中设置几种语言。现在我需要做的是找出定义一个可以处理此类 URL 的路由的最佳方式（symfony2 方式）：

```
 /en/contact 
 /pl/kontakt 
 /fr/contacter 
```

我怎么能定义路线？

编辑：

请注意，具有常见“接触”部分的解决方案是不够的：

```
/en/contact
/pl/contact
/fr/contact 
```

而且我想翻译一个“联系人”部分（在路线内，我不想在这个级别上使用翻译系统）。简而言之，我想将“en”链接到“contact”，将“pl”链接到“kontakt”，将“fr”链接到“contacter”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-17T10:57:36.640

Symfony 4.1 中添加了[本地化路由：](https://symfony.com/doc/current/routing.html#localized-routing-i18n)

```
# config/routes.yaml
about_us:
    path:
        nl: /over-ons
        en: /about-us
    controller: App\Controller\CompanyController::about 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:30:40.060

我最近发现了类似的东西： [https ://github.com/BeSimple/BeSimpleI18nRoutingBundle](https://github.com/BeSimple/BeSimpleI18nRoutingBundle)

这几乎是你想要的。享受。:)

# powershell - Powershell - 从文件中加载参数

> ID：13432689
> 
> 赞同：5
> 
> 时间：2012-11-17T17:01:37.097
> 
> 标签：powershell

这是我的第二个问题是相当快的连续！目前，我基本上正在运行一个 powershell 脚本，我手动执行该脚本并将参数传递给 CMD 行，例如：

```
PostBackupCheck.Ps1 C 1 Hello Test Roger 
```

这些被放入变量中并在脚本中使用。

有没有办法可以将这些逐行添加到文本文件中，例如：

```
C 1 Hello Test Roger 0
C 2 Hello Test Roger 1
C 3 Hello Test Roger 2 
```

然后让Powershell脚本使用第一行，做脚本，然后循环回来使用下一行，做脚本，循环回来等等。

所以在上下文中 - 我需要在以下命名上下文中安装图像

```
SERVERNAME_DRIVELETTER_b00x_ixxx.spi 
```

在哪里，

```
SERVERNAME = Some string
DRIVELETTER = Some Char
b00X - where X is some abritrary number
ixxx - where xxx is some abritrary number 
```

所以在我的文本文件中：

```
MSSRV01 C 3 018
MSSRV02 D 9 119 
```

等等。它使用此信息来装载特定的备份映像（通过 ShadowProtect 的

```
mount.exe SERVERNAME_DRIVELETTER_b00x_ixxx.spi 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:25:15.653

你可以尝试做这样的事情：

内容`p.txt`：

```
C 1 Hello Test Roger 0
C 2 Hello Test Roger 1
C 3 Hello Test Roger 2 
```

脚本的内容`p.ps1`

```
param($a,$b,$c,$d,$e,$f)

"param 1 is $a"
"param 2 is $b"
"param 3 is $c"
"param 4 is $d"
"param 5 is $e"
"param 6 is $f"
"End Script" 
```

对脚本的调用：

```
(Get-Content .\p.txt ) | % { invoke-expression  ".\p.ps1 $_" } 
```

结果：

```
param 1 is C
param 2 is 1
param 3 is Hello
param 4 is Test
param 5 is Roger
param 6 is 0
End Script
param 1 is C
param 2 is 2
param 3 is Hello
param 4 is Test
param 5 is Roger
param 6 is 1
End Script
param 1 is C
param 2 is 3
param 3 is Hello
param 4 is Test
param 5 is Roger
param 6 is 2
End Script 
```

编辑：

编辑后，您可以尝试这样的事情。

```
Get-Content .\p.txt  | 
% { $a = $_ -split ' ' ; mount.exe  $($a[0])_$($a[1])_b00$($a[2])_i$($a[3]).spi } 
```

# web-services - 从 Titanium 将图像上传到 Drupal 7 / Services 3？

> ID：13432691
> 
> 赞同：0
> 
> 时间：2012-11-17T17:02:01.473
> 
> 标签：web-services, drupal, drupal-7, titanium, drupal-services

这必须很接近，但我无法弄清楚导致错误的原因。

在我的 Titanium 应用程序中，我有一个带有画布元素的 Webview 和以下代码：

```
function getImageData() {
    return canvas.toDataURL('image/png');
} 
```

我正在将这些数据移动到 Titanium 应用程序，如下所示：

```
var imageBase64data = webview.evalJS('getImageData()') 
```

以“data:image/png;base64”开头的数据看起来不错...

然后在 Titanium 中，我有一个登录的 drupal 会话并调用此函数：

```
function uploadImage(imageBase64data, callback) {

    var url = REST_PATH + "file.json";

    var file = { 
        filename: utils.createRandomString() + ".png",
        file: imageBase64data
//      uid: Titanium.App.Properties.getString("userUid"),
//      filesize: ""+Titanium.Utils.base64decode(imageBase64data).length,
    };

    var xhr = Titanium.Network.createHTTPClient({timeout: 30000});

    xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8");

    var authString = Titanium.App.Properties.getString("userSessionName")+'='+Titanium.App.Properties.getString("userSessionId");
    xhr.setRequestHeader("Cookie", authString);

    xhr.onload = function() {
        if(xhr.status == 200) {

            var response = xhr.responseText;

            callback(response);
        }
    };

    xhr.onerror = function(e) {
      alert("There was an error: " + e.error);

      Ti.API.info(JSON.stringify(this));
    };    

    xhr.open("POST", url);
    xhr.send(file);
} 
```

xhr.onerror 被 e.error = "undefined" 调用

跟踪如下所示：

```
{
  "responseData":{},
  "readyState":4,
  "connected":true,"UNSENT":0,"DONE":4,"HEADERS_RECEIVED":2,"OPENED":1,"LOADING":3,
  "responseText":null,"status":406
} 
```

我认为身份验证有效，因为在添加 Cookie 标头之前，我之前遇到了“需要身份验证”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:36:00.707

那是由 Drupanium 提供的安装。我刚刚安装了新的 Drupal 和新的 Services 3，我的文件上传得很好。

# java - n长度单词中x元音的正则表达式

> ID：13432692
> 
> 赞同：3
> 
> 时间：2012-11-17T17:02:07.347
> 
> 标签：java, regex

我正在尝试用Java编写一个正则表达式，它将匹配一个长度为n的单词，其中至少有x个元音。

到目前为止，我想出了以下内容：

```
// match words that are length 10 and have at least 2 vowels in them
(?=\w{10})(?:[^aeiou\W]*[aeiuo]){2}\w+ 
```

这似乎有效，但也匹配长度大于 10 的单词，即：

荒野 - 比赛

挥发 - 匹配

声纹 - 匹配（这应该是唯一的匹配）

我希望它可以强制执行 length=10 约束。我怀疑这可能与我在字符串长度中添加字母（元音）这一事实有关，但我不确定。任何帮助/指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:05:59.067

使用单词边界 ,`\b`来防止匹配在单词中途发生：

```
\b(?=\w{10}\b)(?:[^aeiou\W]*[aeiuo]){2,}[^aeiou\W]*\b 
```

这将匹配：

> 荒野**声纹**挥发

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T17:25:20.343

您可以通过使用简单的前瞻（作为 java 字符串）大大简化：

```
"(?i)\\b(?=([^aeiou ]*[aeiou]){2,})[a-z]{10}\\b" 
```

请注意，所有其他答案都`\w`用于字母，但`\w`包括下划线字符，它*不是*字母。

`(?i)`打开不区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T19:25:42.997

试试这个... (?<=\b|\p{Punct})(?:(?i)(?:aeiou{2,})|(?:az&&[^aeiou]{3,})) (?<=\w{10})

针对似乎有效的样本数据对此进行了测试。在我的例子中，我已经考虑了标点符号。

# java - 在 Android 中访问 UsbManagers setCurrentFunction()？

> ID：13432694
> 
> 赞同：1
> 
> 时间：2012-11-17T17:02:14.500
> 
> 标签：java, android, usb, android-4.0-ice-cream-sandwich

我似乎无法访问此功能，它应该允许我以编程方式在我的设备上设置 USB 模式（这是我正在尝试做的）。

我可以将包导入它应该在的位置，但它不可用。

我知道它存在，因为到处都有使用该功能的应用程序！它只是我的 eclipse/构建环境找不到该死的东西。

# c# - 解析日期时间 c# 的奇怪结果

> ID：13432695
> 
> 赞同：4
> 
> 时间：2012-11-17T17:02:16.800
> 
> 标签：c#, parsing, datetime

我有以下代码：

```
IFormatProvider culture = new System.Globalization.CultureInfo("es-ES", true);
date = DateTime.ParseExact(_date, "yyyy-MM-dd hh:mm", culture); 
```

对于_date =“2012-11-17 15:00”

它抛出一个异常

但是对于 _date = "2012-11-17 10:00" 有效

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T17:04:18.153

使用`HH`而不是`hh`

```
date = DateTime.ParseExact(_date, "yyyy-MM-dd HH:mm", culture); 
```

`HH`是*24 小时*
`hh`是*12 小时*

# c# - 高度图上的多个纹理与混合？

> ID：13432696
> 
> 赞同：1
> 
> 时间：2012-11-17T17:02:21.527
> 
> 标签：c#, .net, xna

这是我第一次来这里（有一个帐户），我希望用 XNA 4.0 制作一个高度图编辑器（如果你玩过的话，有点类似于 Earth2150）。

我在这里写了一个自定义效果文件：http: [//pastebin.com/CUFtB8Z9](http://pastebin.com/CUFtB8Z9)

它很好地融合了纹理，除了它融合了整个地图。

我真正想要的是能够在我的高度图上有多个纹理（然后我将与最近的其他纹理混合），我正在寻找方法来做到这一点。

我考虑过`float`在我的顶点声明中分配一个，然后使用纹理数组将纹理“分配”到特定顶点。但是我将如何让我的效果文件为每个顶点上的纹理获取不同的值？

抱歉不是很清楚，这是我的绘制代码和顶点声明：

（请原谅随机数的变化，这是我尝试让每个顶点选择随机纹理的尝试）

```
public void Draw(Texture2D[] TextureArray)
{
    RasterizerState rs = new RasterizerState();
    rs.CullMode = CullMode.None;
    //rs.FillMode = FillMode.WireFrame;
    EditGame.Instance.GraphicsDevice.RasterizerState = rs;
    Random rnd = new Random();

    foreach (EffectPass pass in EditGame.Instance.baseEffect.CurrentTechnique.Passes)
    {
        if (SlowCounter == 60)
        {
            EditGame.Instance.baseEffect.Parameters["xTexture"].SetValue(TextureArray[rnd.Next(0, 2)]);
            EditGame.Instance.baseEffect.Parameters["bTexture"].SetValue(TextureArray[rnd.Next(0, 2)]);
            SlowCounter = 0;
        }

        pass.Apply();
        EditGame.Instance.GraphicsDevice.DrawUserIndexedPrimitives(PrimitiveType.TriangleList, vertices, 0, vertices.Length, indices, 0, indices.Length / 3, VP2TC.VertexDeclaration);
    }
    SlowCounter++;
}

public readonly static VertexDeclaration VertexDeclaration = new VertexDeclaration(
    new VertexElement(0, VertexElementFormat.Vector3, VertexElementUsage.Position, 0),
    new VertexElement(12, VertexElementFormat.Vector2, VertexElementUsage.TextureCoordinate,0),
    new VertexElement(20, VertexElementFormat.Vector2, VertexElementUsage.TextureCoordinate,1),
    new VertexElement(28, VertexElementFormat.Single, VertexElementUsage.BlendWeight,0),
    new VertexElement(32, VertexElementFormat.Vector3,VertexElementUsage.Normal,0),
    new VertexElement(44, VertexElementFormat.Color,VertexElementUsage.Color,0)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:57:46.030

正如我在评论中所说，我不确定这是否是您要寻找的东西，但无论如何我都会继续。

我想你可能想要的描述[在这里](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Multitexturing.php)。

本质上，您有一个向量 4，它存储每个纹理的权重，然后对向量中的各个元素加权的所有 4 个纹理进行加权平均（充当 4 个混合权重）。

如果您想混合纹理而不必为每个纹理都添加一个混合元素，那么事情会变得更有趣。

您可以有一个混合权重，它基本上按顺序选择 2 个相邻纹理的混合。因此，如果您有：

1.  雪
2.  草
3.  岩石
4.  沙

混合权重 = 0.5

会选择草 (0.25) 和岩石 (0.75) 的混合物。以等量混合（因为它在它们之间）。

如果你想要很多纹理，你的着色器会变得非常麻烦，大约 50 个纹理采样器。如果你真的想要这么多纹理，你应该考虑一个[纹理图集](http://en.wikipedia.org/wiki/Texture_atlas) ，或者只是程序生成的[虚拟纹理](http://en.wikipedia.org/wiki/MegaTexture)，在生成时已经完成了混合。

# sql - SQL - 检查多个时期的价格变化

> ID：13432698
> 
> 赞同：2
> 
> 时间：2012-11-17T17:02:30.597
> 
> 标签：sql, ms-access

我正在使用 MS Access 数据库并尝试进行查询，以提供在过去 XY 连续几个月中价格变化超过 XX% 的证券的概述。我已经尝试了所有类型的子查询，但无法理解这一点。

请在下面找到一个简化的示例。PriceTable 包含三个属性：一个周期、一个证券 ID 和该周期内证券的价格。我正在寻找一个查询，该查询为我提供每个最后一个时期（在本例中为 201210）在最后一个 XY（在本例中为 3）中价格变化超过正负 XX%（在本例中为 3%）的所有证券个月。右侧的三列提供了一些计算以进一步阐明这一点：

*   Delta 是从一个时期到另一个时期的价格变化 ((PT-PT-1)/PT-1)

*   Delta>Threshold：检查变化是否大于（正负）3%（参数XX）

*   Counter：检查价格变化是否连续 3 个月（参数 XY）大于 3% 在下面的示例中，查询应该只显示 productID 编号 1。

* * *

```
PriceTable Supporting calculations

+--------+------+-------+--------+-----------------+---------+
+ Period |SecID | Price | Delta% | Delta>Threshold | Counter |
+--------+------+-------+--------+-----------------+---------+
| 201206 |    1 |   105 |     0% |               N |       0 |
| 201207 |    1 |   100 | -4.76% |               Y |       1 |
| 201208 |    1 |    95 |    -5% |               Y |       2 |
| 201209 |    1 |    90 | -5.26% |               Y |       3 |
| 201210 |    1 |    85 | -5.56% |               Y |       4 |
| 201207 |    2 |    95 |     0% |               N |       0 |
| 201208 |    2 |   100 |  5.26% |               Y |       1 |
| 201209 |    2 |   103 |     3% |               N |       0 |
| 201210 |    2 |    99 | -3.88% |               Y |       1 |
+--------+------+-------+--------+-----------------+---------+ 
```

* * *

我希望有人可以帮助我！

提前致谢，

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:52:07.790

我只使用 SQL 解决了它。我是这样做的。

首先，我们需要一个查询，对于每一行，显示与上一周期的行距离：

```
Period  SecID  Price  Row
===============================
201206  1      105    4
201207  1      100    3
201208  1      95     2
201209  1      90     1
201210  1      85     0
201207  2      95     3
201208  2      100    2
201209  2      103    1
201210  2      99     0 
```

我们称之为**PriceTable_Ordered**：

```
SELECT
  PriceTable.Period,
  PriceTable.SecID,
  PriceTable.Price,
  (select count(*) from PriceTable PriceTable_1
   where PriceTable_1.SecID = PriceTable.SecID
   AND PriceTable_1.Period > PriceTable.Period) AS Row
FROM PriceTable; 
```

现在要计算 Delta，并显示 Delta 是否超过三售，我们可以使用这个查询，我们将调用**PriceTable_Total1**：

```
SELECT
  PriceTable_Ordered.*,
  PriceTable_Ordered_1.Price,
  (PriceTable_Ordered.Price-PriceTable_Ordered_1.Price)/(PriceTable_Ordered_1.Price) AS Delta,
  iif((ABS(Delta*100)>3),"Y","N") AS DeltaThreesold
FROM
  PriceTable_Ordered LEFT JOIN PriceTable_Ordered AS PriceTable_Ordered_1
  ON (PriceTable_Ordered.SecID = PriceTable_Ordered_1.SecID)
  AND (PriceTable_Ordered.[Row]=PriceTable_Ordered_1.[Row]-1); 
```

这会返回：

```
Period  SecID  Price1  Row  Price2  Delta  DeltaThreesold
=========================================================
201206  1      105     4                   N
201207  1      100     3    105     -4,76  Y
201208  1      95      2    100     -0,05  Y
201209  1      90      1    95      -5,26  Y
201210  1      85      0    90      -5,55  Y
201207  2      95      3                   N
201208  2      100     2    95       5,26  Y
201209  2      103     1    100      0,03  N
201210  2      99      0    103     -3,88  Y 
```

现在我们可以根据 PriceTable_Total1 创建 PriceTable_Total2 **：**

```
SELECT
  PriceTable_Total1.Period,
  PriceTable_Total1.SecID,
  PriceTable_Total1.PriceTable_Ordered.Price,
  PriceTable_Total1.Delta,
  PriceTable_Total1.DeltaThreesold,
  PriceTable_Total1.Row,
  (select min(row) from PriceTable_Total1 PriceTable_Total1_1
   where PriceTable_Total1.SecID = PriceTable_Total1_1.SecId
   and PriceTable_Total1.Row < PriceTable_Total1_1.Row
   and PriceTable_Total1_1.DeltaThreesold="N") AS MinN,
  IIf([DeltaThreesold]="Y",[MinN]-[row],0) AS CountRows
FROM PriceTable_Total1; 
```

我们选择 PriceTable_Total1 的所有列，然后对每一行计算`minimum row number > than current row`其中的threesold 为“N”。如果当前行超过三售出，我们需要的计数就是这个差值，否则为 0。结果如下：

```
Period  SecID  Price  Delta  DelTh  Row  MinN  CountRows
========================================================
201206  1      105           N      4               0
201207  1      100    -4,76  Y      3    4          1
201208  1      95     -0,05  Y      2    4          2
201209  1      90     -5,26  Y      1    4          3
201210  1      85     -5,55  Y      0    4          4
201207  2      95            N      3               0
201208  2      100     5,26  Y      2    3          1
201209  2      103     0,03  N      1    3          0
201210  2      99     -3,88  Y      0    1          1 
```

然后，您可以隐藏不需要的列。即使我们跨年并且缺少某些时期，此查询也应该有效。

```
SELECT PriceTable_Total2.Period, PriceTable_Total2.SecID
FROM PriceTable_Total2
WHERE (PriceTable_Total2.Period=
        (select max(period)
         from PriceTable
         where PriceTable.SecID=PriceTable_Total2.SecID)
      AND (PriceTable_Total2.[CountRows])>=3); 
```

这将返回：

```
Period  SecID
201210  1 
```

这意味着只有 SecID 1 在上一期超过 3 个月的销售超过 3 个月。

我希望这个答案是正确的，很高兴尝试解决它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:38:41.560

+1 表示您打算在没有 UDF 的情况下尝试在查询中获取此信息。出于极大的兴趣，我已经努力寻找解决方案。我承认以下代码不是最有效的代码。（对于所有这些 IIF，性能并不是那么好）

根据上表获取前 5 列非常简单。我已将其保存在 qryDelta 中。我发现问题的棘手部分是将 Counter 放在同一个结果表中。第二个查询 qryCounter 将为您提供您所期望的最终表格。

**qryDelta**

```
 SELECT a.period, a.secid, a.price, 
   iif(isnull(ROUND((a.price-b.price)/b.price*100,2)),0, 
   ROUND((a.price-b.price)/b.price*100,2)) AS Delta, 
   iif(abs((a.price-b.price)/b.price)*100>3,"Y","N") AS Threshold, 
   SUM(iif(abs((a.price-b.price)/b.price)*100>3,1,0)) AS [Counter]
   FROM tbldelta AS a LEFT JOIN tbldelta AS b 
   ON (a.secid = b.secid) AND (a.period = b.period + 1)
   GROUP BY a.period, a.secid, a.price, 
   iif(isnull(ROUND((a.price-b.price)/b.price*100,2)),0,
   ROUND((a.price-b.price)/b.price*100,2)), 
   iif(abs((a.price-b.price)/b.price)*100>3,"Y","N")
   ORDER BY a.secid, a.period; 
```

结果： ![在此处输入图像描述](../Images/d2f47378f0553ff4894d0d3eee3e0f37.png)

**qryCounter**

```
SELECT q.period, q.secid, q.price, q.delta, q.threshold, 
SUM(iif(q.counter=0,0,1)) AS Counter
FROM qryDelta q
LEFT JOIN tblDelta t
ON q.secid = t.secid
AND (t.period < q.period)
GROUP BY q.secid, q.period, q.price, q.delta, q.threshold 
```

结果：

![在此处输入图像描述](../Images/ab0d511dff015cd2c4eec0d8de5a4b5e.png) 但是，我也遇到了 SecId = 2，Period = 201208 总 = 2 的问题。所以我改变了我的查询条件。现在结果似乎正确地显示了累积周期计数，除了 SectID = 2、Period = 201210 总计 = 3。也许你们可以对此有所了解。在完成的大多数实验中，JOIN 和日期之间似乎或多或少是一个错误，我们试图将其作为代码放在此处。

PS：如果您决定构建用户定义函数（UDF），那么您可以考虑两件事。您是使用 Excel 作为前端还是 Access 作为前端。然后，您必须提供必要的安排以从 Excel 调用您的 Access UDF 和查询。如果您只使用 Access 作为前端和后端，那么当然使用 UDF 会更容易处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T18:01:34.947

我手头没有访问权限，但这里有一个 SQL Server 查询： 内部“h”表几乎是您的辅助表。外部位加入 3 个周期，并显示阈值为“Y”的计数是否为 3 我这样做的方式，您还需要计算下一个周期的函数，以及两个端点之间的周期数。这些应该很容易用 VBA 编写。您还可以创建一个带有序列号的周期表来解决此问题：

```
-- Function that works out the next period
-- i.e. if you supply 201112, it will return 201201
Create Function dbo.NextPeriod(@Period As Int) Returns Int As
Begin
  Declare
    @Month int,
    @Ret int = Null

  If @Period Is Not Null
  Begin
    Set @Month = @Period - 100 * (@Period / 100)
    If @Month < 12
      Set @Ret = @Period + 1
    Else
      Set @Ret = @Period - @Month + 101
  End
  Return @Ret
End;

-- Function that works out how many periods between the two endpoints
-- dbo.PeriodCount(201112, 201201) = 1
Create Function dbo.PeriodCount(@StartPeriod As Int, @EndPeriod As Int) Returns Int As
Begin
  Declare
    @StartMonth int,
    @EndMonth int,
    @StartYear int,
    @EndYear int,
    @Ret int = Null
  If @StartPeriod Is Not Null And @EndPeriod Is Not Null
  Begin
    Set @StartMonth = @StartPeriod - 100 * (@StartPeriod /100)
    Set @StartYear = (@StartPeriod - @StartMonth) / 100
    Set @EndMonth = @EndPeriod - 100 * (@EndPeriod / 100)
    Set @EndYear = (@EndPeriod - @EndMonth) / 100
    Set @Ret = (12 * @EndYear + @EndMonth) - (12 * @StartYear + @StartMonth)
  End
  Return @Ret
End;

-- Show periods that are the start of a run
-- of @Periods periods with threshold 
-- of at least @Threshold
Declare @Threshold Decimal(10, 2) = 3
Declare @Periods int = 3

Select
  p0.SecurityID,
  p0.Period
From
  PriceTable p0
    Inner Join (
      Select
        p1.*,
        100 * (p1.Price - p2.Price) / p2.Price As Delta,
        Case When Abs(100 * (p1.Price - p2.Price) / p2.Price) > @Threshold Then 'Y' Else 'N' End As OverThreshold
      From
        PriceTable p1
          Left Outer Join
        PriceTable p2
          On p1.SecurityID = p2.SecurityID And
             p1.Period = dbo.NextPeriod(p2.Period)
    ) h
    On p0.SecurityID = h.SecurityID And
       dbo.PeriodCount(p0.Period, h.Period) Between 0 And (@Periods - 1) And
       h.OverThreshold = 'Y'
Group By
  p0.SecurityID,
  p0.Period
Having
  Count(*) = @Periods 
Order By
  p0.SecurityID,
  p0.Period; 
```

这向您展示了该方法的工作原理，您可以像这样简化它：

```
Declare @Threshold Decimal(10, 2) = 3
Declare @Periods int = 3

Select
  p0.SecurityID,
  p0.Period
From
  PriceTable p0
    Inner Join
  PriceTable p1
    On p0.SecurityID = p1.SecurityID And
       dbo.PeriodCount(p0.Period, p1.Period) Between 0 And (@Periods - 1)
    Inner Join
  PriceTable p2
    On p1.SecurityID = p2.SecurityID And
       p1.Period = dbo.NextPeriod(p2.Period)
Where
  Abs(100 * (p1.Price - p2.Price) / p2.Price) > @Threshold
Group By
  p0.SecurityID,
  p0.Period
Having
  Count(*) = @Periods 
Order By
  p0.SecurityID,
  p0.Period; 
```

[http://sqlfiddle.com/#!3/8eff9/2](http://sqlfiddle.com/#!3/8eff9/2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T16:48:05.743

@Laurence：请在代码下方找到

```
Public Function NextPer(Nperiod As Long) As Long
Dim Month As Long

If Not IsNull(Nperiod) Then
Month = 100 * ((Nperiod / 100) - Round(Nperiod / 100, 0))
If Month < 12 Then
NextPer = Nperiod + 1
Else
NextPer = Nperiod - Month + 101
End If
End If

End Function

Public Function PCount(SPeriod As Long, EPeriod As Long) As Long

Dim SMonth As Long
Dim EMonth As Long
Dim SYear As Long
Dim EYear As Long

If Not IsNull(SPeriod) And Not IsNull(EPeriod) Then
SMonth = 100 * ((SPeriod / 100) - Round(SPeriod / 100, 0))
SYear = (SPeriod - SMonth) / 100
EMonth = 100 * ((EPeriod / 100) - Round(EPeriod / 100, 0))
EYear = (EPeriod - EMonth) / 100
PCount = (12 * EYear + EMonth) - (12 * SYear + SMonth)
End If

End Function

And the QUERY (the parameters are for the moment hardcoded)

SELECT p0.SecurityID, p0.Period
FROM (PriceTable AS p0 
INNER JOIN PriceTable AS p1 ON (p0.SecurityID = p1.SecurityID)
AND (PCount(p0.Period,p1.Period)>=0) AND (PCount(p0.Period,p1.Period)<=2)) 
INNER JOIN PriceTable AS p2 ON (p1.SecurityID = p2.SecurityID) 
AND (p1.Period =   NextPer(p2.Period))
WHERE Abs(100*(p1.Price-p2.Price)/p2.Price)>0.03
GROUP BY p0.SecurityID, p0.Period
HAVING Count(*) = 3
ORDER BY p0.SecurityID asc , p0.Period asc; 
```

# delay - 如何在 Andengine 中延迟动画精灵？

> ID：13432701
> 
> 赞同：1
> 
> 时间：2012-11-17T17:02:45.180
> 
> 标签：delay, andengine, animated

当我按下按钮时，我在屏幕上绘制了一个动画 Sprite。但是，我希望动画在 5 秒后开始。从技术上讲，显示“动画集”中的第一个 PNG，动画在 5 秒后开始。

我试图使用`DelayModifier`如下，但没有运气：

```
mySprite.registerEntityModifier(new DelayModifier(500)); //doesn't work 
```

我会很感激你的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:44:35.610

我从本教程中找到了我的问题的解决方案：[http ://www.andengine.org/forums/tutorials/using-timer-s-sprite-spawn-example-t463.html](http://www.andengine.org/forums/tutorials/using-timer-s-sprite-spawn-example-t463.html)

这个想法是使用 TimeHandler 而不是 DelayModifier。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:56:30.790

实际上，你也可以使用延迟修饰符来做到这一点，就像这样

```
DelayModifier dMod = new DelayModifier(5f){
    @override
    public void onModifierFinished(IModifier arg0, IEntity arg1) {
        mySprite.animate(300);
    }
}
mySprite.registerEntityModifier(dMod); 
```

# javascript - 从各种输入文本框定义 SQL 查询

> ID：13432702
> 
> 赞同：0
> 
> 时间：2012-11-17T17:02:51.463
> 
> 标签：javascript, sql, adodb, jet

我想知道在基于网页上各种文本框的输入定义 SQL 查询方面，什么被认为是“最佳实践”。

比如说，假设您在网站上有 8 个输入文本框，您是否需要使用一堆 if 语句来评估您最终将使用的 SQL 查询？

IE。

```
var sql
var a =  document.getElementByID('tb1').value
var b =  document.getElementByID('tb2').value
var c =  document.getElementByID('tb3').value
var d =  document.getElementByID('tb4').value

if (a.length > 0 && b.length > 0 && c.length > 0 && d.length > 0) {

sql = "SELECT * FROM table WHERE [firstname] = '"+a+"' AND [middlename] = '"+b+"' AND [lastname] = '"+c"' AND [organization] = '"+d+"'"

} 
```

附言。我还使用客户端 Microsoft Jet，所以没有服务器或任何类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:39:44.610

您可以保存查询并将它们与 Ms Access/Jet/ACE 一起使用。使用 ADODB 命令对象和记录集的一些注意事项，但使用最适合的命令对象。

```
Set rs = Server.CreateObject("ADODB.Recordset")
Set cmd = Server.CreateObject("ADODB.Command")

cmd.ActiveConnection = objConn
cmd.CommandType = adCmdStoredProc

cmd.CommandText = "MySavedQuery"
cmd.Parameters.Append cmd.CreateParameter("@FirstName", adVarWChar, adParamInput, 50, varA)
cmd.Parameters.Append cmd.CreateParameter("@MiddleName", adVarWChar, adParamInput, 50, varB)

rs.LockType = adLockOptimistic
rs.CursorType = adOpenStatic
rs.CursorLocation = adUseClient
rs.Open cmd.Execute 
```

# phonegap-plugins - 如何使用 Phonegap InAppPurchaseManager 插件实现 Urban Airship

> ID：13432704
> 
> 赞同：1
> 
> 时间：2012-11-17T17:03:10.880
> 
> 标签：phonegap-plugins, urbanairship.com

有人熟悉如何将 Urban Airships IAP 实施到 Phonegap InAppPurchaseManager 插件吗？我问的原因是因为我正在销售杂志，并且希望能够将它们下载到我的免费应用程序中，而不必总是更新我的应用程序，这反过来也会随着每个添加的问题而变得更大。

提前致谢！

# testing - 如何测试 EJB @Schedule

> ID：13432707
> 
> 赞同：3
> 
> 时间：2012-11-17T17:03:33.083
> 
> 标签：testing, ejb, schedule

我正在使用 EJB 计划来执行电子邮件守护程序任务：

```
@Schedule(hour="8, 10, 12, 14, 16, 18")
    public void sendExpirationReminders() {
} 
```

如何在正在运行的服务器上测试这些方法？

我目前的大部分测试都使用 HtmlUnit，所以我可以发出真正的浏览器请求。但是我不知道如何测试这些守护程序方法的内部内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:09:39.850

简短的回答是：你不能。

有些人建议（我同意）是将执行调度的代码与实际执行操作的代码分开。如果您遵循这一点，您将拥有一个具有`@Schedule`注释的类，其唯一职责是调用执行操作的类。

为什么你可以测试这个？这很容易，您不能在应用程序服务器中模拟日期（或时钟）。

# c++ - 带有 QT 的周期性代码

> ID：13432709
> 
> 赞同：0
> 
> 时间：2012-11-17T17:03:44.853
> 
> 标签：c++, qt, callback, serial-port

我正在尝试使用 QT 创建一个定期回调。我在想，类似于 OpenGL 的周期性回调。

基本上，我有一个正在等待事件发生的微控制器。当事件发生时，它通过串行端口将时间发送到 PC。在 PC 端，我希望 GUI 在收到此时间信息时更新，或者定期检查 Rx 缓冲区中是否有任何内容。

*   Qt 是否有任何内置功能可以定期调用方法？
    *   如果没有，有没有办法在 QextSerial 和 GUI 之间创建信号？
    *   或者，我是否必须制作一个在serialPort 和GUI 之间具有观察者/可观察关系的多线程应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:35:46.230

看看[QTimer](http://qt-project.org/doc/qt-4.8/QTimer.html)。他们还列出了一个[模拟时钟的例子](http://qt-project.org/doc/qt-4.8/widgets-analogclock.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T20:34:13.487

对于我的特定需求，我最终使用了 QextSerialPort。

我在端口上附加了一个信号，这样每当收到消息时，它就会将时间添加到模型中，并更新 GUI。

```
Port = new QextSerialPort();
//... various Port Setup
connect(Port, SIGNAL(readyRead()),      this, SLOT(onReadyRead())); 
```

通过这种方式，我能够使数据模型和 GUI 更加分离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T13:28:46.917

您可以尝试使用 QSocketNotifier。

我用它来读取和处理标准输入。您只需要更改您从中读取的文件（在我的情况下为 STDIN_FILENO）

```
---hpp
class QSocketNotifier;
class ConsoleReader : public QObject
{
    Q_OBJECT
public:
    explicit ConsoleReader(QObject *parent = 0);
Q_SIGNALS:
    void textReceived(QString message);
public Q_SLOTS:
    void text();
private:
    QSocketNotifier* notifier;
};

---cpp
#include <QSocketNotifier>
#include <unistd.h> //Provides STDIN_FILENO

ConsoleReader::ConsoleReader(QObject *parent)
 : QObject(parent)
{
    notifier = new QSocketNotifier(STDIN_FILENO, QSocketNotifier::Read);
    connect(notifier, SIGNAL(activated(int)), this, SLOT(text()));
}

void ConsoleReader::text()
{
    QTextStream qin(stdin);
    QString line = qin.readLine();
    Q_EMIT textReceived(line);
} 
```

# c++ - C/C++ - 牛顿法的迭代计数器

> ID：13432710
> 
> 赞同：1
> 
> 时间：2012-11-17T17:03:53.023
> 
> 标签：c++, c, function, printf

我创建了一个运行牛顿法的函数，用于逼近函数的解（定义为 f）。我的函数可以很好地返回根的更好近似值，但是它不会正确显示函数中执行的迭代次数。

这是我的代码：

```
#include <stdio.h> 
#include <math.h> 
#include <cstdlib>
#include <iostream>

double newton(double x_0, double newtonaccuracy);

double f(double x);

double f_prime(double x);

int main() 
{
   double x_0;  

   double newtonaccuracy;  

   int converged;  

   int iter;

   printf("Enter the initial estimate for x : ");

   scanf("%lf", &x_0);

   _flushall();

   printf("\n\nEnter the accuracy required : ");

   scanf("%lf", &newtonaccuracy);

   _flushall();

   if (converged == 1) 
      {
        printf("\n\nNewton's Method required %d iterations for accuracy to %lf.\n", iter, newtonaccuracy);

        printf("\n\nThe root using Newton's Method is x = %.16lf\n", newton(x_0, newtonaccuracy));
      } 

   else 
      {
        printf("Newton algorithm didn't converge after %d steps.\n", iter);
      }

      system("PAUSE");
} 

double newton(double x_0, double newtonaccuracy) 
{
   double x = x_0;

   double x_prev;

   int iter = 0;

   do 
   {
      iter++;

      x_prev = x;

      x = x_prev - f(x_prev)/f_prime(x_prev);

   } 
   while (fabs(x - x_prev) > newtonaccuracy && iter < 100);

   if (fabs(x - x_prev) <= newtonaccuracy)
   {
      int converged = 1;
   }  
   else
   {
      int converged = 0; 
   }   

    return x;
}  

double f(double x) {
       return ( cos(2*x) - x );
}  

double f_prime(double x) 
{
   return ( -2*sin(2*x)-1 ); 
} 
```

为了尽可能具体，它是以下行：

```
printf("\n\nNewton's Method required %d iterations for accuracy to %lf.\n", iter, newtonaccuracy); 
```

这给我带来了麻烦。每次我运行这个程序时，它都会说“牛顿法需要 2686764 次迭代......”但是这不可能是真的，只要我编码正确（我的代码允许的最大迭代次数是 100）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:06:59.957

`iter`中使用的变量`main`未初始化或在`newton`使用局部变量的函数中使用`iter`。您需要通过引用传递`iter`给`newton`或找到一种方法从函数中返回它。

这是一个通过引用获取一些参数并修改它们的函数的示例：

```
double foo(double& initial_value, int& iterations)
{
  initial_value *= 3.14159;
  iterations = 42;
  return initial_value/2.;
} 
```

从调用方：

```
double x + 12345.;
int iter = 0;
double y = foo(initial_value, iter); 
```

# c++ - 从共享库和加密密钥中剥离符号

> ID：13432711
> 
> 赞同：1
> 
> 时间：2012-11-17T17:03:56.883
> 
> 标签：c++, c, encryption, shared-libraries

我正在研究一个共享库（Linux 中的 .so），它有一个用于小型数据库的 XML 文件，并且该 xml 文件是加密的。这是我的代码的摘要：

```
void my_fucnt(char *in, char *out)
{
    static char key[] = {0x34, 0x6c, 0x54....};
    enrcryption(key, in, out);
} 
```

第一件事；前几天我正在使用 objdump 检查库，我发现许多符号（甚至那些声明为静态的符号）都在我认为揭示了我的大部分代码逻辑的目标文件中，所以我在互联网上搜索并我也发现了有关**strip**实用程序的信息。

很高兴知道**strip**实用程序应用什么方法，它是否放置符号的地址而不是它们的名称？

其次，我仍然在目标文件的*.data*部分中看到了显示数据库密钥的密钥，尽管我已经剥离了这些符号。有什么办法可以隐藏吗？或者可以应用哪些其他技术来加密我的数据库文件？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:09:57.450

什么`strip`是删除*调试*符号和信息。这通常会占用可执行文件的很大一部分，这就是该实用程序存在的原因。

至于钥匙，它会在*某个地方*。您可以对其进行混淆（加密密钥本身，将密钥的每个字节存储在不同的位置等），但如果破解者想要找到它，他或她会找到它。众所周知，他们擅长逆向工程和弄清楚一段汇编代码的作用。

# ios - 了解 UIView 是否是从 UITabBar 的更多菜单中推送的

> ID：13432714
> 
> 赞同：0
> 
> 时间：2012-11-17T17:04:18.963
> 
> 标签：ios, uiview, uitabbar

有没有一种方法可以知道用户何时从 UITabbar 的更多视图推送了 UIView？

我在 UITabBar 中有多个视图，其中一些最终出现在列出它们的更多视图中。我希望能够知道何时从更多视图推送视图，而不是何时从 UITabBarItem 推送视图

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:20:00.130

您可以检查控制器的导航控制器是否是更多导航控制器：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    if (self.navigationController == self.tabBarController.moreNavigationController) {
        NSLog(@"Launcehed from more");
    }else{
        NSLog(@"Launcehed from tab bar");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:10:38.187

你的问题说`UITabBar`，但我怀疑你的意思是`UITabBarController`。基于某些选项“最终出现在更多视图中”的方式，由`UITabBarController`.

如果您的意思是，`UITabBarController`那么由 a`UIViewController`提供的是 a`UITabBarController`可以很容易地确定它是否在更多选项中。

```
[self.tabBarController.moreNavigationController.viewControllers containsObject:self]; 
```

`BOOL`如果该视图控制器 ( )的选项`self`列`More`在`UITabBar`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:19:31.113

不，`UITabbarController`不会公开该信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T17:27:21.607

您可以将 UIView 子类化并添加一个属性`sentFrom`，当您将其添加到任何控制器中时，您将传递给 UIView。没有一个已经实现的方法可以做到这一点，所以你必须自己跟踪这些事情。

# r - 如何对组进行子集化和创建具有不同符号的散点图？

> ID：13432715
> 
> 赞同：-1
> 
> 时间：2012-11-17T17:04:22.603
> 
> 标签：r, subset, scatter-plot

我正在分析来自援助组织的数据，其中一些是多边的，一些是双边的。

我只想选择双边并将它们分配给一个变量，多边也是如此。

我怎样才能做到这一点？

以下是数据文件[https://dl.dropbox.com/u/56475675/datos_aid_R.ZIP](https://dl.dropbox.com/u/56475675/datos_aid_R.ZIP)

```
> short<-scan("short.txt",what=list(""))
Read 72 records
> country<-scan("country.txt")
Read 72 items
> total<-scan("total.txt")
Read 72 items
> short<-scan("short.txt",what=list(""))
Read 72 records
> donortag<-scan("donortag.txt",what=list(""))
Read 72 records
> total<-scan("total.txt")
Read 72 items
> organization<-scan("organization.txt")
Read 72 items
> country<-scan("country.txt")
Read 72 items
> activity<-scan("activity.txt")
Read 72 items 
```

子集后，我将创建一个带有标签的散点图，但我想用红色正方形（例如）绘制双边，用蓝色圆圈（例如）绘制多边，...

如何在散点图中使用不同的绘图符号？

在这里你可以看到我在 R 中做了什么

[http://img13.imageshack.us/img13/8844/snap1226.png http://img13.imageshack.us/img13/8844/snap1226.png](http://img13.imageshack.us/img13/8844/snap1226.png)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:08:16.907

在散点图的轴上你想要什么并不完全清楚，但大致如下：

```
d <- data.frame(short,total,country,donortag,activity)
d2 <- droplevels(subset(d,donortag %in% c("Bilateral","Multilateral")))
cols <- c("red","blue")
pchs <- 1:2
with(d2,plot(total,activity,col=cols[donortag],pch=pchs[donortag])) 
```

或者

```
library(ggplot2)
qplot(total,activity,data=d2,colour=donortag,pch=donortag) 
```

# windows - 如何从其他程序的输出设置 Windows 命令提示符的环境

> ID：13432716
> 
> 赞同：0
> 
> 时间：2012-11-17T17:04:22.223
> 
> 标签：windows, batch-file

我们也可以从文件中设置 windows 命令提示符的环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:07:04.957

要从其他程序的输出设置命令提示符：

```
for /F "delims=" %%a in ('anyprog param1 param2') do set PROMPT=%%a 
```

从文件设置命令提示符：

```
set /P PROMPT=< anyfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:10:06.313

```
echo|set /p=set QT_INSTALL_BINS=>%Temp%\_run_temp.bat
qmake -query "QT_INSTALL_BINS">>%Temp%\_run_temp.bat
call %Temp%\_run_temp.bat
del %Temp%\_run_temp.bat
echo %QT_INSTALL_BINS% 
```

# python - 在 Python 中进入交互模式

> ID：13432717
> 
> 赞同：64
> 
> 时间：2012-11-17T17:04:34.233
> 
> 标签：python, interactive

我正在运行我的 Python 程序，并且有一个要点，那就是跳进去看看发生了什么，然后再跳出来。有点像临时控制台模式。

在 Matlab 中，我会使用[`keyboard`](http://www.mathworks.com/help/matlab/ref/keyboard.html)命令来执行此操作，但我不确定 python 中的命令是什么。

有没有办法做到这一点？

例如：

```
for thing in set_of_things:
    enter_interactive_mode_here()
    do_stuff_to(thing) 
```

打电话时`enter_interactive_mode()`，我想去那里，环顾四周，然后离开，让程序继续运行。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-17T17:22:08.357

`code.interact()`似乎以某种方式工作：

```
>>> import code
>>> def foo():
...     a = 10
...     code.interact(local=locals())
...     return a
... 
>>> foo()
Python 3.6.5 (default, Apr  1 2018, 05:46:30) 
[GCC 7.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> a
10 
```

`Ctrl`+`Z`返回“主”解释器。

您可以阅读当地人，但修改它们似乎并不能以这种方式工作。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-11-17T17:07:47.560

```
python -i myapp.py 
```

这将执行`myapp.py`并将您放入交互式外壳中。`myapp.py`从那里您可以执行函数并检查它们的输出，并加载整个环境（导入等） 。

对于更复杂的东西 - 最好使用调试器`pdb`，例如设置断点。此外，大多数 IDE（PyDev、PyCharm、Komodo...）都有图形调试器。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-17T18:02:23.753

我[`pdb`](http://docs.python.org/2/library/pdb.html)用于此目的。我意识到埃米尔已经在他的回答中提到了这一点，但他没有举一个例子或详细说明它为什么回答你的问题。

```
for thing in set_of_things:
    import pdb; pdb.set_trace()
    do_stuff_to(thing) 
```

您可以通过以感叹号开头的命令来读取和设置变量。您还可以在堆栈上上下移动（命令`u`和`d`），这`InteractiveConsole`没有内置机制要做。

要让程序继续执行，请使用`c`命令。在上面的示例中，它将在每次循环迭代时进入调试器，因此您可能希望将`set_trace()`调用包装在一个`if`句子中。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-17T17:23:55.290

您可以选择——Python 标准库或 IPython。

Python 标准库有一个[`code`](http://docs.python.org/2.7/library/code.html)模块，该模块有一个[`InteractiveConsole`](http://docs.python.org/2.7/library/code.html#code.InteractiveConsole)类，其目的是“密切模拟交互式 Python 解释器的行为”。这可能可以做你想做的事，但是文档没有任何关于如何使用它的示例，我也没有任何关于去哪里的建议。

[IPython](http://ipython.org/)是一个更高级的 Python 终端，可以选择在内置程序的任何位置嵌入控制台。根据他们的[文档](http://ipython.org/ipython-doc/dev/interactive/reference.html#embedding)，你可以简单地做

```
from IPython import embed

for thing in set_of_things:
  embed()
  do_stuff_to(thing) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-17T19:20:45.493

对我来说最舒服的工具是[ipdb](http://pypi.python.org/pypi/ipdb)。

> ipdb 导出函数以访问 IPython 调试器，该调试器具有制表符补全、语法高亮、更好的回溯、更好的自省以及与 pdb 模块相同的界面。

完成和方便的内省对于调试特别有用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-07T12:40:09.967

您可以使用[`ipdb`](https://pypi.python.org/pypi/ipdb).

> 要设置断点，请添加`import ipdb; ipdb.set_trace()`要跳转到调试器的位置。到达断点后，您将获得一个交互式 shell 和围绕断点的几行代码作为上下文。
> 
> [https://www.safaribooksonline.com/blog/2014/11/18/intro-python-debugger/](https://www.safaribooksonline.com/blog/2014/11/18/intro-python-debugger/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-08T18:40:50.907

从 Python 3.7 开始，您还可以使用`breakpoint()`进入调试器，例如：

```
for thing in set_of_things:
    breakpoint()
    do_stuff_to(thing) 
```

这更容易记住和编写，默认情况下会在 pdb 中打开你的代码。

但是，也可以将`PYTHONBREAKPOINT`环境设置为可调用的名称，它可以是另一个调试器，例如`pudb`or `ipdb`，也可以是 IPython 的`embed`，或其他任何东西。

# url - 这种重定向对SEO有什么影响？

> ID：13432720
> 
> 赞同：0
> 
> 时间：2012-11-17T17:04:53.537
> 
> 标签：url, redirect, seo

如果我注册了一个域 abc.com，但通过重定向指向另一个域的子文件夹（如 def.com/abc），对 SEO 有什么影响？Google 会同时索引 abc.com 和 def.com/abc 并为关键字“abc”显示它们吗？

有什么办法可以避免这种情况或提升 abc.com 使其比 def.com/abc 显示得更显眼吗？

在这种情况下，最佳做法是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:16:21.463

我会参考 Google 的官方 SEO 指南。这是完整指南的[链接。](http://www.google.com/webmasters/docs/search-engine-optimization-starter-guide.pdf "关联")

> **提供一个版本的 URL 以访问文档**
> 
> 为了防止用户链接到某个版本的 URL 而其他人链接到不同的版本（这可能会在 URL 之间分裂该内容的声誉），请专注于在页面的结构和内部链接中使用和引用一个 URL。如果您确实发现人们通过多个 URL 访问相同的内容，那么设置从非首选 URL 到主要 URL 的 301 重定向是一个很好的解决方案。如果您无法重定向，您也可以使用规范 URL 或使用 rel="canonical" 链接元素。

由于 Google 依赖于指向您页面的链接，因此如果人们链接到一个 URL 而不是另一个 URL，您就会遇到问题。简而言之，是的，这可能会对您的优化产生影响。

**编辑：** Google 的算法可能足够聪明，可以知道您的重定向并在索引您的页面时遵循它。最好的结果可能是不进行重定向，而是将域指向您的内容。第二个最好的方法是使用 HTTP 301 状态码。

# java - 在 JSTL 中显示 bean

> ID：13432721
> 
> 赞同：1
> 
> 时间：2012-11-17T17:04:59.307
> 
> 标签：java, jsp, model-view-controller, jstl

我在使用 JSTL 显示 bean 的详细信息时遇到问题。我的servlet代码如下

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();

    String username =request.getParameter("username");
    String password = request.getParameter("password");
    try {

        con = connection.connectionfile();

        pstmt=con.prepareStatement("select * from Login where Username=? and Password=?");
        pstmt.setString(1,username);
        pstmt.setString(2, password);
        rs = pstmt.executeQuery();

        if(rs.next())
        {
            ListGrabber grabber = new ListGrabber();
            List<DvdDetail> list = new ArrayList<DvdDetail>();
            list=grabber.getBeanList();

            request.setAttribute("listbean",list);
            RequestDispatcher view = request.getRequestDispatcher("listdetail.jsp");

            view.forward(request, response);

        }
        else
        {
            response.sendRedirect("loginerror.html");
        }

    } 
     catch(Exception ex)
     {
        ex.printStackTrace();
     }

    finally {            
        out.close();
        try
        {
            rs.close();
            con.close();
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

豆子如下：

```
 public class DvdDetail {

private int id;
private String film_name;
private String released_date;
private String directed_by;
private String actor_name;
private String actress_name;
private int price;
private String banner;

public DvdDetail(int id,String film_name,String released_date,String directed_by,String actor_name,String actress_name,int price,String banner)
{

    this.id=id;
    this.film_name=film_name;
    this.released_date=released_date;
    this.directed_by=directed_by;
    this.actor_name=actor_name;
    this.actress_name=actress_name;
    this.price=price;
    this.banner=banner;

}

public String getActor_name() {
    return actor_name;
}

public void setActor_name(String actor_name) {
    this.actor_name = actor_name;
}

public String getActress_name() {
    return actress_name;
}

public void setActress_name(String actress_name) {
    this.actress_name = actress_name;
}

public String getBanner() {
    return banner;
}

public void setBanner(String banner) {
    this.banner = banner;
}

public String getDirected_by() {
    return directed_by;
}

public void setDirected_by(String directed_by) {
    this.directed_by = directed_by;
}

public String getFilm_name() {
    return film_name;
}

public void setFilm_name(String film_name) {
    this.film_name = film_name;
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public int getPrice() {
    return price;
}

public void setPrice(int price) {
    this.price = price;
}

public String getReleased_date() {
    return released_date;
}

public void setReleased_date(String released_date) {
    this.released_date = released_date;
}

} 
```

如何在 JSP 页面中打印出多个电影名称但仅使用 JSTL。在 JSP 中，我通常将其解决为

```
List<DvdDetail> list = request.getParameter("listbean");
for(int i=0;i<list.size();i++)
{
  DvdDetail bean = list.get(i);
  ///displaying usng out.print(bean.getProperty());
} 
```

我需要实现相同的目标，但使用 JSTL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:12:06.457

单击您在问题上添加的 JSTL 标记的弹出窗口中的[信息链接](https://stackoverflow.com/tags/jstl/info)，以获取有关 JSTL 的信息和指向教程的链接。

您想要实现的目标可以这样完成：

```
<ul>
    <c:forEach var="dvd" items="${listbean}">
        <li><c:out value="${dvd.film_name}"/></li>
    </c:forEach>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:08:53.563

你可以使用：

```
<c:forEach var="dvdDetail" items="${listbean}">
      ${dvdDetail.film_name}
      ${dvdDetail.actor_name}
     ...

</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:24:00.273

如果您是 JSTL 新手，您应该检查[一下](https://stackoverflow.com/questions/13416704/java-servlets-file-commonsupload-getparameter-after-request-being-handle/13430717#13430717)。上面有一些链接。希望它有所帮助。

# c# - 从 WebBrowser 保存图像的神秘主义

> ID：13432726
> 
> 赞同：0
> 
> 时间：2012-11-17T17:05:41.747
> 
> 标签：c#, browser

所有的问候！使用以下代码：

[https://stackoverflow.com/a/3833846/407561](https://stackoverflow.com/a/3833846/407561)

```
IHTMLDocument2 doc = (IHTMLDocument2) webBrowser1.Document.DomDocument;
IHTMLControlRange imgRange = (IHTMLControlRange) ((HTMLBody) doc.body).createControlRange();

foreach (IHTMLImgElement img in doc.images)
{
  imgRange.add((IHTMLControlElement) img);

  imgRange.execCommand("Copy", false, null);

  using (Bitmap bmp = (Bitmap) Clipboard.GetDataObject().GetData(DataFormats.Bitmap))
  {
    bmp.Save(@"C:\"+img.nameProp);
  }
} 
```

代码工作正常。但是我收到的图像有问题，它根本没有更新，并且仍然保存到文件中。页面更新后一切恢复正常。我该怎么做才能不刷新页面并摆脱这种奇怪的效果？预先感谢您的回复！

# android - 根本无法运行 Android 应用程序 - 不在模拟器上，也不在真实设备上

> ID：13432729
> 
> 赞同：0
> 
> 时间：2012-11-17T17:06:17.057
> 
> 标签：android, eclipse, avd

我正在尝试运行我的应用程序，但它根本不起作用。不在模拟器上，也不在我的 Android 设备上。

我正在使用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)，当我打开[AVD 管理器](http://developer.android.com/tools/devices/managing-avds.html)时，它根本没有打开，我什至看不到任务管理器中的进程。

我也尝试打开`emulator.exe`，但没有任何反应。基本上，当我按 Android 应用程序运行时，什么也没有发生。

我该如何解决这个问题？

PS：如果重要的话，由于新的 Android 版本（ [4.2 Jelly Bean](http://en.wikipedia.org/wiki/Android_version_history#Android_4.1.2F4.2_Jelly_Bean) ），我更新了 Android SDK ...

# vb.net - 在计算器的文本框中，如何将上行的值分配给第一个变量，将下行的值分配给第二个变量？

> ID：13432730
> 
> 赞同：0
> 
> 时间：2012-11-17T17:06:24.597
> 
> 标签：vb.net

我正在制作一个计算器，并希望我的文本框在上面一行显示值（在运行时分配给第一个变量）以及运算符 [+,-,*,/]。

然后将第二行中输入的值赋给第二个变量。

然后当我按下等于（=）按钮时，应该执行所需的操作，即添加第一个变量和第二个变量。

我做了一点，但它没有提供正确的答案，例如：

*   当我输入 3 并单击 Add(+) 按钮时，光标在下一行下降
*   当我输入 5 并按相等按钮时，文本框在结果中显示 6 而不是 8

等等。

这是代码

```
Private Sub ButtonAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonAdd.Click
    Operand1 = Val(TextBox1.Text)
    TextBox1.Text = Operand1 & "+" & Environment.NewLine & Operand2
        TextBox1.Focus()
        [Operator] = "+"
End Sub

Private Sub ButtonEqual_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonEqual.Click
    Dim Result As Double

    Operand2 = Val(TextBox1.Text)
    Select Case [Operator]
        Case "+"
            Result = Operand1 + Operand2
            TextBox1.Text = Result

        Case "-"
            Result = Operand1 - Operand2
            TextBox1.Text = Result
        Case "*"
            Result = Operand1 * Operand2
            TextBox1.Text = Result
        Case "/"
            Result = Operand1 / Operand2
            TextBox1.Text = Result
    End Select
    TextBox1.Text = Result
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:41:01.200

我认为您使用了错误的文本框：

```
Operand2 = Val(TextBox1.Text) 
```

应该

```
Operand2 = Val(TextBox2.Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:54:46.373

```
[code] 
```

Operand2= val(textbox1.text) [/code] 应该是 [code] Operand2= val(textbox1.lines(1)) [/code]

# php - 在 google plus 上获取关注者

> ID：13432734
> 
> 赞同：3
> 
> 时间：2012-11-17T17:06:52.397
> 
> 标签：php, api, google-plus

我一直在寻找一种方法来以纯文本形式检索 Google Plus 页面的“plusoners”或关注者，但我找不到任何东西。

我正在寻找一种类似于 facebook graph 和 twitter api 的方法。

这可能吗？

**更新**

我找到了这个脚本，但它正在为一个网站获取“加号”。是否可以让此脚本打印 google plus 页面的关注者数量？

```
<?php

 $url = "http://www.tomanthony.co.uk/";

 $ch = curl_init();  
 curl_setopt($ch, CURLOPT_URL, "https://clients6.google.com/rpc?key=******");
 curl_setopt($ch, CURLOPT_POST, 1);
 curl_setopt($ch, CURLOPT_POSTFIELDS, '[{"method":"pos.plusones.get","id":"p","params":{"nolog":true,"id":"' . $url . '","source":"widget","userId":"@viewer","groupId":"@self"},"jsonrpc":"2.0","key":"p","apiVersion":"v1"}]');
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/json'));

 $curl_results = curl_exec ($ch);
 curl_close ($ch);

 $parsed_results = json_decode($curl_results, true);

 echo $parsed_results[0]['result']['metadata']['globalCounts']['count'];

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:23:03.177

**已编辑以反映对 Google+ API 的更新**

如果您的应用使用 Google+ 登录或请求`https://www.googleapis.com/auth/plus.login`范围，您可以获得一个人在其圈子中的人员的平面列表。不过，这并不是您要问的。您的请求希望获得那些关注目标个人的人，这仍然是不可能的，但[people.list](https://developers.google.com/+/api/latest/people/list)可能会实现您的目标。

在[2013 年 2 月 26 日](http://googleplusplatform.blogspot.com/2013/02/google-plus-sign-in.html)之前，API 没有提供列出与用户相关的人员的方法。

# php - 未定义属性：Purchase::$purchase_model codeigniter

> ID：13432737
> 
> 赞同：0
> 
> 时间：2012-11-17T17:07:09.480
> 
> 标签：php, codeigniter

这是我一生中见过的最奇怪的错误，因为昨天它还在工作，而我今天醒来却没有工作，这是错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Purchase::$purchase_model

Filename: controllers/purchase.php

Line Number: 67 
```

这是控制器代码类 Purchase extends CI_Controller {

```
function __construct()
{
    parent::__construct();
    $this->load->model('purchase_model', 'user_model');
    $this->load->helper(array('form', 'url'));
    $this->load->library(array('form_validation', 'upload'));
}   

 function steptwo()
{   
    if($this->input->post('templateid') == NULL){
        redirect('templates');
        }
    $data =$_POST;
    if($this->session->userdata('userName')){
    $data['name']=$this->session->userdata('userName'); 
    }else{ $data['name'] = NULL;}
    $data['paymentplans'] = $this->purchase_model->GetPplan(array('id_template_type' => $_POST['idtype']));
    $this->load->view('step-two', $data);
} 
```

这是我的模型代码：

```
 class Purchase_Model extends CI_Model
    {
        function GetPplan($options = array())
{
    // Qualification
    if(isset($options['id_template_type']))
        $this->db->where('id_template_type', $options['id_template_type']);

    // limit / offset
    if(isset($options['limit']) && isset($options['offset']))
        $this->db->limit($options['limit'], $options['offset']);
    else if(isset($options['limit']))
        $this->db->limit($options['limit']);

    // sort
    if(isset($options['sortBy']) && isset($options['sortDirection']))
        $this->db->order_by($options['sortBy'], $options['sortDirection']);

    $query = $this->db->get("template_payment_plan");

    if(isset($options['count'])) return $query->num_rows();

    if(isset($options['template_payment_planid']) || isset($options['detail']))
        return $query->row(0);

    return $query->result();
}    
 } 
```

我已经这样做了 $autoload['libraries'] = array('database', 'session'); 所以我不认为这是问题所在。

如果有人知道错误可能是什么，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:13:47.287

```
$this->load->model('purchase_model', 'user_model'); 
```

在这里加载您调用 user_model 的 purchase_model，如果要加载两个模型，请执行以下操作：

```
$this->load->model('purchase_model');
$this->load->model('user_model'); 
```

# angularjs - AngularJS - 访问与模型关联的 JSON 对象

> ID：13432739
> 
> 赞同：3
> 
> 时间：2012-11-17T17:07:14.300
> 
> 标签：angularjs

我有一个返回 JSON 的服务，假设这是响应：

```
{
    "model": 48870,
    "id": 20
} 
```

我可以做这个：

```
$scope.response = Service.get(); 
```

它会将 JSON 响应分配给`$scope.response`. 这里的问题是我不能分别直接访问`model`或`id`通过`$scope.response.model`或`$scope.response.id`。对于这种情况，我的解决方法是在服务的成功回调中定义一个函数并 fetch`model`或`id`from `data`。`$scope.response`但是考虑到包含整个 JSON 对象，这不是很实用，理论上应该（并且为了干净的代码）让我访问它的子对象。

这里有两个问题：

1.  它是 AngularJS 模型表示的限制吗？
2.  如何在不必为每个调用定义成功回调的情况下指向孩子（甚至孙子）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:15:07.577

一旦异步 HTTP 调用返回，直接访问响应的属性是安全的。

[看这个简短的例子](http://plnkr.co/edit/itXVSJ9FBC9LmdnnEbO4?p=preview)

```
app.controller('MainCtrl', function($scope, $resource) {
  $scope.data = $resource('data.json').get(function() {
    $scope.loaded = true;
    //now it's safe to access $scope.data's properties:
    $scope.data.foo = $scope.data.id + ':' + $scope.data.model;
  });
}); 
```

UI 绑定将自动工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:51:37.253

我认为您正在寻找的内容描述如下：

[http://docs.angularjs.org/tutorial/step_05](http://docs.angularjs.org/tutorial/step_05)

# html - CGI 不处理 html 表单 - Perl

> ID：13432741
> 
> 赞同：0
> 
> 时间：2012-11-17T17:07:22.623
> 
> 标签：html, perl, cgi

我正在为图书数据库做 Perl 作业。我需要制作和 html 表单，用户将在其中键入输入，例如：

1）标题 2）作者 3）语言 4）年份 5）销售额

然后我需要 CGI 来处理它。并存储到数据库“书籍”中。

我正在使用 MySql 数据库。

我面临的问题是没有输出我输入的值，我尝试了很多方法调试它，但仍然没有结果。

这是我的 html 表单“CreateForm.html”

```
<form method="post" action="http://localhost:8080/cgi-bin/create.cgi"  >
<table border="1">
<tr>
<td>Title: </td>
<td><input type="text" name="title"></td>
</tr>
<tr>
<td>Author: </td>
<td><input type="text" name="author"></td>
</tr>
<tr>
<td>Language: </td>
<td><input type="text" name="language"></td>
</tr>
<tr>
<td>Year of Publication: </td>
<td><input type="text" name="year"></td>
</tr>
<tr>
<td>Estimated sales: </td>
<td><input type="text" name="sales"></td>
</tr>
<tr>
<td><input type="submit" /></td>
</tr>
</table>
</form> 
```

我在 Windows 上运行 XAMPP

这里基本上是我的代码'create.cgi'

```
#!"C:\xampp\perl\bin\perl.exe"
print "Content-type: text/html\r\n\r\n";

#include section
use strict;
use DBI;
use CGI;
my $q=new CGI;

#declaration section
my $name;
my $value;
my $sth;
my %FORM;
my $dbh;
my $sql;
my $rv;
my $key;
my $buffer;
my @pairs;
my $pair;
my $title;
my $author;
my $language;
my $year;
my $sales;

if ($ENV{'REQUEST_METHOD'} eq 'POST') {
  read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});
} else {
  $buffer = $ENV{'QUERY_STRING'};
}
@pairs = split(/&/, $buffer);
foreach $pair (@pairs) {
  ($name, $value) = split(/=/, $pair);
  $name =~ tr/+/ /;
  $name =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
  $value =~ tr/+/ /;
  $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
  $FORM{$name} = $value;
}

#parsing data
$title=$q->param('title');
$author=$q->param('author');
$language=$q->param('language');
$year=$q->param('year');
$sales=$q->param('sales');

#database connectivity
$dbh = DBI->connect('DBI:mysql:books', 'root', ''
               ) || die "Could not connect to database: $DBI::errstr";

#test insert
$sth=$dbh->do('INSERT INTO BOOKS (TITLE,AUTHOR,LANGUAGE,YEAR,SALES) VALUES (
    "Nineteen eight four",
    "George Orwell",
    "English",
    1947,
    25000000)
');

$sql="INSERT INTO BOOKS (TITLE,AUTHOR,LANGUAGE,YEAR,SALES) values ('$title','$author','$language','$year','$sales')";

$sth=$dbh->prepare($sql) or die "can't prepare $sql: $dbh->errstrn";
$rv=$sth->execute;

if ($rv==1){
print "Record has been successfully created !!!<br>";
}else{
print "Error!!while inserting record\n";
exit;
}

$sth = $dbh->prepare("SELECT * FROM BOOKS");
$sth->execute();

foreach $key(sort keys %FORM){
print "<h3>$key: $FORM{$key}</h3>";
}

print "<html>";
print "<head>";
print "<title>Create Form</title>";
print "</head>";
print "<body>";

print "Title: $FORM{'title'}              <br/>";
print "Author: $FORM{'author'}                <br/>";
print "Language: $FORM{'language'}                <br/>";
print "Year: $FORM{'year'}                <br/>";
print "Sales: $FORM{'sales'}                <br/>";

foreach $key(sort keys %FORM){
print "<h3>$key: $FORM{$key}</h3>";
}

#retrieving all tables to check
#while (my $ref = $sth->fetchrow_hashref()) {
#print "<br>Found a row:\n
#          id = $ref->{'BOOKID'}, 
#          tname = $ref->{'TITLE'}, 
#          author: $ref->{AUTHOR}, 
#          language: $ref->{'LANGUAGE'}, 
#          year: $ref->{'YEAR'}, 
#          sales: $ref->{'SALES'} \n";
#}

#while (my $ref = $sth->fetchrow_hashref()) {
#
#          %rec=%{$pRec};
#          print "$rec{'title'}";
#}

print "</body>";
print "</html>";

$sth->finish();
$dbh->disconnect(); 
```

线

```
foreach $key(sort keys %FORM){
print "<h3>$key: $FORM{$key}</h3>";
} 
```

不输出任何东西

我收到的输出

```
Record has been successfully created !!!
Title:
Author:
Language:
Year:
Sales: 
```

空条目，但已执行 INSERT 操作

```
30  Nineteen eight four     George Orwell   English     1947    25000000 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:15:48.963

考虑到您在其他地方正确访问参数，我不明白您为什么要搞乱 %FORM 哈希，例如：

```
$title=$q->param('title'); 
```

因此，你为什么不直接输出`$title`？

```
print "Title: $title <br/>"; 
```

如果你想要一个带有参数的键和值的散列，那么将它放入一个 hashref 中：

```
$params = $q->Vars; 
```

然后，如果您想遍历该 hashref，请执行以下操作：

```
foreach my $key ( sort keys %$params ) {
  print "$key has a value of $params->{$key}\n";
} 
```

------------------------ 8< ------------

附录，与问题无关：

您*真的*不想按照您的方式将您的值放入 SQL 中：

```
$sql="INSERT INTO BOOKS (TITLE,AUTHOR,LANGUAGE,YEAR,SALES) values ('$title','$author','$language','$year','$sales')"; 
```

相反，您想使用占位符并将参数传递给 execute() 方法：

```
$sql = "INSERT INTO BOOKS (TITLE,AUTHOR,LANGUAGE,YEAR,SALES) values (?,?,?,?,?)";
$sth = $dbh->prepare($sql) or die "can't prepare $sql: $dbh->errstrn";
$sth->execute( $title, $author, $language, $year, $sales ); 
```

# java - 创建 EJB 3.0 或 3.1

> ID：13432742
> 
> 赞同：1
> 
> 时间：2012-11-17T17:07:25.587
> 
> 标签：java, jakarta-ee, ejb-3.0, ejb-3.1

我将非常感谢为我解决有关这个新 EJB3.0 及更高版本的一些问题：

1）如果假设我需要`ejbCreate`，`ejbActivate`以及所有其他事件，那么我如何从新的 EJB3.0 及更高版本中获取它。

2）我总是很难找到特定的 xml 文件来根据各种应用程序服务器分配 JNDI 名称，所以有什么方法可以在没有 xml 文件的情况下提供 JNDI 名称，也可以在每个应用程序服务器中使用可移植名称可以远程找到部署在应用服务器上的 EJB

3) 有朋友可以告诉我，我有 Java/Linux 的托管计划，它支持 i) Tomcat - 5.5.xSupport ii)JDK - 1.6.x Support iii)JSP/servlet - 2.0 Support

是否有可能部署 EJB 3.1，因为我有一些地方无法部署 EJB，所以请给我一些建议帮助...

谢谢你...！！！请帮我...！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:52:02.307

> 1) 如果假设我需要 ejbCreate、ejbActivate 和所有其他事件，那么我如何从新的 EJB3.0 及更高版本中获取它。

在 EJB 3 及更高版本中，[EJB 生命周期](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html)是通过生命周期注释来处理的，例如：[@PostConstruct](http://docs.oracle.com/javaee/6/api/javax/annotation/PostConstruct.html)和[@PreDestroy](http://docs.oracle.com/javaee/6/api/javax/annotation/PreDestroy.html)。

> 2）我总是很难找到特定的 xml 文件来根据各种应用程序服务器分配 JNDI 名称，所以有什么方法可以在没有 xml 文件的情况下提供 JNDI 名称，也可以在每个应用程序服务器中使用可移植名称可以远程找到部署在应用服务器上的EJB

[@Stateless](http://docs.oracle.com/javaee/6/api/javax/ejb/Stateless.html)和[@Stateful](http://docs.oracle.com/javaee/6/api/javax/ejb/Stateful.html)注释有两个属性可以解决这个问题（name 和 mappedName）。然而

> 映射的名称取决于产品并且通常取决于安装。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T17:50:23.190

1) `ejbCreate, ejbActivate`etc. 与 EJB 2.x 相关，如果您需要 EJB 3.x 中的类似功能，您应该用注释`@PostActivate, @PrePassivate`等装饰您的方法。方法签名应遵循[一定的规则](http://docs.oracle.com/cd/E11035_01/wls100/ejb30/annotations.html#wp1416976)，例如`@PostActivate`：

> 使用@PostActivate 注解的方法必须遵循以下要求：
> 
> ```
> The return type of the method must be void.
> The method must not throw a checked exception.
> The method may be public, protected, package private or private.
> The method must not be static.
> The method must not be final. 
> ```
> 
> 此注解没有任何属性。

2）您似乎指的是和`name`注释的`mappedName`属性。更多详细信息请参见[官方文档](http://docs.oracle.com/javaee/6/api/javax/ejb/Stateful.html)。根据我的经验，mappedName 更好，但它是特定于应用程序服务器的，例如在 Glassfish 上它可以完美运行。例子：`@Stateless``@Stateful`

```
@Stateless(mappedName="ejb/myBean")
public class MyFirstBean {
..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T12:15:14.887

由于没有人回答问题3..

> 3) 有朋友能告诉我吗，我有 Java/Linux 的托管计划，它支持 i) Tomcat - > 5.5.xSupport ii)JDK - 1.6.x 支持 iii)JSP/servlet - 2.0 支持

不，您将需要支持 Java EE 的服务器。阅读[如何在 Tomcat 上部署基于 EJB 的应用程序](https://stackoverflow.com/questions/4304757/how-to-deploy-ejb-3-or-web-application-on-tomcat)

# c++ - 为什么 QFontMetrics::lineSpacing() 小于字符边界框的高度？

> ID：13432746
> 
> 赞同：3
> 
> 时间：2012-11-17T17:07:39.447
> 
> 标签：c++, qt, fonts, kubuntu

这发生在 Linux 上。

执行此代码时出现问题（我正在绘制小部件的绘制事件）：

```
painter.drawText(0, 0, 1000, 1000, 0, QString("0"), &charBoundingBox);
qDebug() << "bounding box height" << charBoundingBox.height();
qDebug() << "lineSpacing" << painter.fontMetrics().lineSpacing();
qDebug() << "leading" << painter.fontMetrics().leading();
qDebug() << "height" << painter.fontMetrics().height();
qDebug() << painter.font(); 
```

它输出：

```
bounding box height 11 
lineSpacing 7 
leading -1 
height 8 
QFont( "Digital-7,10,-1,5,50,0,0,0,0,0" ) 
```

注意字符边界框的高度是`11`，而行距是`7`。这部分是因为前导是负的，但即使没有，字体高度仍然更小。

Qt如何计算它返回的字符边界框？它的高度显然不是从`fontMetrics::height`和导出的`fontMetrics::leading`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:45:33.527

不能保证画家返回的边界框的高度与字体高度相同。此外，行距是字体高度和前导的总和。如果字体的前导为负数，则行距将小于高度。

此外，为了确保您使用正确的指标，您可能应该使用painter.fontMetrics() 而不是构造QFontMetrics(font)。

在任何情况下，为了确保在您的情况下发生上述哪种情况，您应该分别打印出字体前导和字体高度（使用painter.fontMetrics()）。

# php - JSON , php 和 mysql

> ID：13432748
> 
> 赞同：0
> 
> 时间：2012-11-17T17:08:03.133
> 
> 标签：php, android, mysql, json

我试着完成我的项目

这是我的程序

```
import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Search extends Activity {

   TextView error,br2;
   EditText namjal2;
   String i,returnString2;

    /** Called when the activity is first created. */

   @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        br2=(TextView)findViewById(R.id.berita2);
        namjal2=(EditText)findViewById(R.id.namjalSearch);

   }

   public void clickHandler(View view){
    Intent a = null;
    switch (view.getId()){
    case R.id.find:

ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

postParameters.add(new BasicNameValuePair("nama_jalan", namjal2.getText().toString()));

/*            String valid = "1";*/      

        String response = null;

        try {

           response = CustomHttpClient.executeHttpPost("http://10.0.2.2/android/searchInfo.php", postParameters);

           String result = response.toString();  
           //parse json data

              try{
                      returnString2 = "";

                JSONArray jArray = new JSONArray(result);
                      for(int i=0;i<jArray.length();i++){

                              JSONObject json_data = jArray.getJSONObject(i);
                              Log.i("log_tag","id_kepadatan: "+json_data.getInt("id_kepadatan")+
                                      ", username: "+json_data.getString("username")+
                                      ", nama_jalan: "+json_data.getString("nama_jalan")+
                                      ", status: "+json_data.getString("status")+
                                      ", tanggal: "+json_data.getString("tanggal")+
                                      ", waktu: "+json_data.getString("waktu")+
                                      ", keterangan: "+json_data.getString("keterangan")
                              );

                              //Get an output to the screen
                              returnString2 += "\n" + json_data.getString("nama_jalan") + " mengalami "+ json_data.getString("status")+ " pada "+ json_data.getString("tanggal")+ " waktu "+ json_data.getString("waktu")+ " karena "+ json_data.getString("keterangan");
                      }
              }

              catch(JSONException e){
                      Log.e("log_tag", "Error parsing data "+e.toString());
              }

              try{

               br2.setText(returnString2);

              }

              catch(Exception e){

               Log.e("log_tag","Error in Display!" + e.toString());;          

              }   

         }

               catch (Exception e) {

          Log.e("log_tag","Error in http connection!!" + e.toString());     

         }
        break;

   case R.id.back:
        a = new Intent(this, Menu.class);
        startActivity(a);
        break;
}
   }

} 
```

这是我的 searchInfo.php

```
<?php
    date_default_timezone_set('asia/jakarta');
    $skrg = time();
    $tgl = date("dmY",$skrg);

$conn = mysql_connect("localhost","root","");
    mysql_select_db("proyek akhir");

$query = "SELECT * FROM kepadatan WHERE nama_jalan = '". $_POST["nama_jalan"]."' AND tanggal ='$tgl'";
$result = mysql_query($query);
while($row=mysql_fetch_assoc($result))
$output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

当我部署到模拟器时，它会在 DDMS 中显示如下消息：

“错误解析数据 org.json.jsonexception value null of type org.json.JSONObject$1 无法转换为 JSONArray”

谁能告诉我为什么会这样？

我真的需要这个......因为这是我的最后一个项目，我只有 1 天的时间来完成这个......请帮助我

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:40:09.650

每当您解析 Json 数据时，只需确保（检查是否）单个/数组数据不为空。如果你不检查它会抛出空指针异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:23:38.277

您从数据库中获取的数据不是 UTF-8 编码，因此`json_encode`返回`null`而不是 JSON 对象。

# android - ActionScript 3 + AIR + Android = 如何下载 png 文件？在哪里存放？

> ID：13432749
> 
> 赞同：0
> 
> 时间：2012-11-17T17:08:04.017
> 
> 标签：android, actionscript-3, actionscript

使用 Android 版 Air+AS3 时，如何从服务器下载 png？

另外，我在哪里存储它以便以后可以使用它而无需再次下载？

问候米尔扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:38:38.073

1.  更好地将您的文件存储在 ApplicationStoragePath 中，这样您就可以避免一些安全（访问被拒绝）问题。
2.  确保 writeBytesToFile() 也需要指定带有文件扩展名的文件路径（如“images/first.png”）

    ```
    private function download(url:String):void
    {
        var urlRequest:URLRequest = new URLRequest();
        urlRequest.url = url;

        var urlStream:URLStream = new URLStream();
        urlStream.addEventListener(Event.COMPLETE,onDownload_CompleteHandler);
        urlStream.addEventListener(IOErrorEvent.IO_ERROR, onDownload_IOErrorHandler);
        urlStream.addEventListener(HTTPStatusEvent.HTTP_RESPONSE_STATUS,onDownload_ResponseStatusHandler);
        urlStream.addEventListener(SecurityErrorEvent.SECURITY_ERROR,onDownload_SecurityHandler);   
        urlStream.load(urlRequest); 
    }

    protected function onDownload_CompleteHandler(event:Event):void
    {
        var urlStream:URLStream = event.currentTarget as URLStream;
        var outBytes:ByteArray = new ByteArray;         
        urlStream.readBytes(outBytes,0,urlStream.bytesAvailable);           
        writeBytesToFile(outBytes);
    }   

    private function writeBytesToFile(outBytes:ByteArray):void
    {
        var fileToWrite:File = File.applicationStorageDirectory.resolvePath("path/to/store/filenamewithextension");//Where you want store 

        var fileStream:FileStream = new FileStream();  
        fileStream.addEventListener(Event.CLOSE, onFileStream_CloseHandler);
        fileStream.addEventListener(IOErrorEvent.IO_ERROR,onFileStream_IOErrorHandler);
        fileStream.openAsync(fileToWrite, FileMode.WRITE);  
        fileStream.writeBytes(outBytes, 0, outBytes.length);
        fileStream.close();
    }

    protected function onFileStream_CloseHandler(event:Event = null):void
    {
        trace("File successfully downloaded ");                 
    }

    protected function onFileStream_IOErrorHandler(event:IOErrorEvent):void
    {
        trace("File can't downloaded file doesn't exist ");
    }

    protected function onDownload_SecurityHandler(event:SecurityErrorEvent):void
    {
        logger.error("onDownload_SecurityHandler :: " + event.text);            
    }

    protected function onDownload_ResponseStatusHandler(event:HTTPStatusEvent):void
    {
        trace("onDownload_ResponseStatusHandler :: " + event.status);
    }

    protected function onDownload_IOErrorHandler(event:IOErrorEvent):void
    {
        trace("onDownload_IOErrorHandler :: " + event.text);            
    } 
    ```

# python - Python 配置库

> ID：13432750
> 
> 赞同：7
> 
> 时间：2012-11-17T17:08:11.280
> 
> 标签：python, configuration-files

我正在寻找一个 python 配置库，它将多个文本配置文件合并到单个对象中，就像 json 一样。

有人知道好的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T22:57:45.940

我为此编写了[pymlconf](http://pypi.python.org/pypi/pymlconf)。配置语法是[yaml](http://www.yaml.org/)。

**例如：**

*配置文件：*

```
#app/conf/users/sites.mysite.conf:
name: mysite.com
owner:
   name: My Name
   phone: My Phone Number
   address: My Address

#app/conf/admin/root.conf:
server:
   version: 0.3a
sites:
   admin:
      name: admin.site.com
      owner:
         name: Admin Name
         phone: Admin Phone Number
         address: Admin Address

#app/conf/admin/server.conf:
host: 0.0.0.0
port: 80

#../other_path/../special.conf:
licence_file: /path/to/file
log_file: /path/to/file

#app/src/builtin_config.py:
_builtin_config={
   'server':{'name':'Power Server'}
}

OR:

_builtin_config="""
    server:
       name: Power Server
""" 
```

*然后看单行用法：*

```
from pymlconf import ConfigManager
from app.builtin_config import _builtin_config

config_root = ConfigManager(
   _builtin_config,
   ['app/conf/admin','app/conf/users'],
   '../other_path/../special.conf') 
```

*获取配置条目：*

```
# All from app/conf/users/sites.mysite.conf
print config_root.sites.mysite.name
print config_root.sites.mysite.owner.name
print config_root.sites.mysite.owner.address
print config_root.sites.mysite.owner.phone

# All from app/conf/admin/root.conf
print config_root.sites.admin.name
print config_root.sites.admin.owner.name
print config_root.sites.admin.owner.address
print config_root.sites.admin.owner.phone

print config_root.server.name       # from _builtin_config
print config_root.server.version    # from app/conf/admin/root.conf
print config_root.server.host       # from app/conf/admin/server.conf
print config_root.server.port       # from app/conf/admin/server.conf

print config_root.licence_file      # from ../other_path/../special.conf
print config_root.log_file          # from ../other_path/../special.conf 
```

看来这涵盖了您的问题。但是您可以在[github上分叉它](https://github.com/pylover/pymlconf)

链接：

1.  [Python 包索引](http://pypi.python.org/pypi/pymlconf)
2.  [github上的源码](https://github.com/pylover/pymlconf)
3.  [文档](http://packages.python.org/pymlconf/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T17:09:34.160

标准配置文件解析器是`ConfigParser`标准 Python 发行版的一部分。在这里阅读所有相关信息：http: [//docs.python.org/2/library/configparser.html](http://docs.python.org/2/library/configparser.html)

它也支持多个文件。

美观且易于使用：

```
import ConfigParser

config = ConfigParser.ConfigParser()
config.read('example.cfg')

# Retrieve a variable
myvar = config.get("sectionName", "variableName", 0) 
```

# .net - 实体框架关系

> ID：13432754
> 
> 赞同：1
> 
> 时间：2012-11-17T17:08:34.110
> 
> 标签：.net, entity-framework, entity-framework-4

我对实体框架中的关系有疑问

这是我的问题：

我有两个类：用户和组

*   一个组必须有一个所有者（用户）
*   一个组可以有0个或多个成员（用户）
*   一个用户可以是 0 个或多个组的所有者

用户.cs：

```
 public class User
{
    [Key]
    public int userId { get; set; }

    [Display(Name="Firstname")]
    public string firstname { get; set; }

    [Display(Name = "Lastname")]
    public string lastname { get; set; }

    [Display(Name = "Email")]
    public string email { get; set; }

} 
```

组.cs：

```
 public class Group
{
    [Key]
    public int idGroup { get; set; }
    public string name { get; set; } 
    public User owner { get; set; }
    public List<User> members { get; set; }

    public Group()
    {
        members = new List<User>();
    }

} 
```

这是插入组功能：

```
 [HttpPost]
    public ActionResult Create(Group group)
    {
        if (ModelState.IsValid)
        {
            group.owner = db.Users.Attach((User)Session["user"]);
//Current user stored in session and already presents in User table
            db.Groups.Add(group);
            db.SaveChanges();

            return RedirectToAction("Index", "Home");
        }
        return View(group);
    } 
```

问题是 ：

*   当我在插入函数中运行调试时，正确设置了“所有者”属性（在 db.savechanges 处）
*   但是之后，当我在 db (Group group = db.Groups.Find(id);) 中选择一个组时，“所有者”参数为空。

任何帮助将非常感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:28:14.197

试试这个：

```
public class Group
{
    [Key]
    public int idGroup { get; set; }
    public string name { get; set; } 
    public virtual User owner { get; set; }
    public virtual ICollection<User> members { get; set; }

    public Group()
    {
        members = new List<User>();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:21:43.550

这可能会解决您的问题 `Group group = db.Groups.Find(id).Include("owner");`

# node.js - ETIMEDOUT 与 node.js CPU 挂钩

> ID：13432755
> 
> 赞同：0
> 
> 时间：2012-11-17T17:08:45.817
> 
> 标签：node.js, mongodb

我的 Node.js CPU 被固定时遇到问题。我注意到它与从 node.js 服务器发出 HTTP 请求时出现 ETIMEDOUT 错误的时间完全相关。

我发现这个[问题可能正是](https://github.com/joyent/node/issues/1748)这个问题。去引用：

> 这个问题不是 node.js 本机代码的问题，而是 mongodb 驱动程序如何管理它的问题；连接池。它将一种连接等待方法无限推送到队列中，直到得到系统的一些响应。而当连接刚刚挂起时，这种等待方法就会开始自我重复。

然而，据说这个问题大约在一年前在 Mongo 驱动程序中得到了解决。

这是错误，它出现在我的日志中：

```
Sat Nov 17 2012 08:48:11 GMT-0800 (PST): Error: ETIMEDOUT
Sat Nov 17 2012 08:48:11 GMT-0800 (PST): "Error: ETIMEDOUT\n    at Object.<anonymous> (/home/webapps/SGPArray/releases/20121117084123/api/node_modules/request/main.js:670:15)\n    at Timer.list.ontimeout (timers.js:101:19)" 
```

当套接字超时时，node.js CPU 是 100% 固定的。派发错误后，CPU使用率恢复正常。

想法？

* * *

代码非常简单，甚至似乎不值得发布

```
request({'uri': url}, function(err, resp) {
    if(err)
    {
        callback(err);
        return;
    }
    parseArticles(resp);
}); 
```

# javascript - jquery append 执行了链接替换

> ID：13432758
> 
> 赞同：0
> 
> 时间：2012-11-17T17:09:04.833
> 
> 标签：javascript, jquery

```
inputTabTitle: function(){
   origin = template.clone();
   $("#inputTabCount").change(function(){
     tabcount = parseInt($("#inputTabCount").val());
     if(tabcount > 0){
       tab = origin.find("label").text();
       for(i = 1; i <= tabcount; i ++){
         origin.find("label").text(tab + i);
         origin.find("label").attr("for", "inputTabTitle" + i);
         origin.find("input").attr("id", "inputTabTitle" + i);
         $("#tabCount").append(origin);
       }
     }
   })
 } 
```

设置 n = 3

追加到“#tabCount”时，只插入一个元素，实际上应该是三个。但是这个代码追加执行就像替换一样。为什么？当我在循环结束之前添加“origin = origin.clone()”时，效果很好，插入了三个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:16:43.360

您只克隆一次模板。这意味着：两次将“原点”附加到已经存在的地方。为了得到你想要的（或者我认为你想要的），克隆必须在循环中。

请进一步注意，当您在没有 'var' 的情况下定义诸如 'tabcount' 之类的变量时会污染 GLOBAL 空间。我也在你的源代码中修复了这个问题。

像下面这样重写函数。但请注意：每次值更改时都会插入选项卡的数量。这意味着：

*   值更改为 1 --> 制作了一个选项卡
*   值更改为 2 --> 生成了两个附加选项卡。

.

```
inputTabTitle: function(){   
    $("#inputTabCount").change(function(){
        var tabcount = parseInt($("#inputTabCount").val());

        if(tabcount > 0){
            tab = template.find("label").text();

            for(i = 1; i <= tabcount; i ++){
                var origin = template.clone();

                origin.find("label").text(tab + i);
                origin.find("label").attr("for", "inputTabTitle" + i);
                origin.find("input").attr("id", "inputTabTitle" + i);

                $("#tabCount").append(origin);
             }
         }
     })

 } 
```

# java - 使用 Jackson 将具有通用 JSON 的类序列化

> ID：13432761
> 
> 赞同：3
> 
> 时间：2012-11-17T17:09:23.747
> 
> 标签：java, json, generics, date, serialization

我有一个代表问卷的对象结构，我需要序列化为 JSON。结构的一类是 OpenQuestion，此类使用具有两个参数的泛型。当使用的类型之一是 Date 时，问题就开始了，日期序列化错误，比如 long。

班级代码：

```
public class OpenQuestion <valueType,validationType> extends AbstractQuestion implements    Serializable {
    private valueType value;
    private validationType minValue;
    private validationType maxValue;
    ...
} 
```

如果哈希映射始终使用日期，我看到了如何序列化哈希映射中的日期，但在这种情况下，我使用带有字符串、整数或日期的类。

有什么办法解决吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T17:27:09.230

您可以`JsonTypeInfo`为此添加注释。有两种使用方法：

*   让它自动为您的对象添加类型注释，因此它知道将其反序列化为什么。
*   添加自定义类型解析器，为您处理此问题。

第一个将使您的 JSON 变得丑陋，但只需要很少的额外代码，并且不会强迫您制作自定义序列化程序。后者更难，但会产生更干净的 JSON。总体而言，问题部分在于您的一种类型没有以 JSON（日期）建模，因此您可能需要在 JSON 文件中将其序列化为整数或字符串类型。

前一个选项看起来有点像这样：

```
@JsonTypeInfo( use = Id.CLASS, include = As.WRAPPER_PROPERTY )
private valiationType minValue; 
```

这*应该*编码一个字符串值，例如：

```
{ __type = "java.lang.String", value = "Hello, World" } 
```

没有保证准确，因为这主要来自记忆！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T20:48:15.443

这取决于。如果您确实知道预期类型，则只需传递泛型类型引用：

```
OpenQuestion<Value,Validation> v = objectMapper.readValue(json,
  new TypeReference<OpenQuestion<Value,Validation>>() { }); 
```

因为这暗示了杰克逊的预期类型。

如果您不知道，那么另一个答案显示了如何使用`@JsonTypeInfo`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T17:57:28.140

正如@MiserableVariable 所指出的，Jackson 默认将（大多数）日期字段序列化为（数字长）时间戳。您可以通过多种方式覆盖此行为。

如果使用您自己的 ObjectMapper 实例，请覆盖属性以将日期写入 ISO-8601：

```
objectMapper.configure(SerializationConfig.Feature.WRITE_DATES_AS_TIMESTAMPS, false); 
```

如果使用您自己的 ObjectMapper 实例，以您自己的自定义格式编写日期：

```
objectMapper.setDateFormat(myDateFormat); // 1.8 and above
objectMapper.getSerializationConfig().setDateFormat(myDateFormat); // for earlier versions (deprecated for 1.8+) 
```

要保留大多数字段的默认序列化行为，但为某些对象上的某些字段覆盖它，请使用自定义序列化程序：

```
public class MyBean implements Serializable {
    private Date postDate;

    // ... constructors, etc

    @JsonSerialize(using = MyCustomDateSerializer.class)
    public Date getPostDate() {
        return postDate;
    }
}

public class MyCustomDateSerializer extends JsonSerializer<Date> {

    @Override
    public void serialize(final Date date, final JsonGeneraror generator,
          final SerializerProvider provider) throws IOException,
          JSONProcessingException {

        generator.writeString(yourRepresentationHere);
    }
} 
```

所有这些信息都可以在[Jackson Documentation](http://wiki.fasterxml.com/JacksonDocumentation)中找到，其中大部分在处理日期处理的[部分中。](http://wiki.fasterxml.com/JacksonFAQDateHandling)

# android - AVD 或 SDK（Android 模拟器）

> ID：13432765
> 
> 赞同：0
> 
> 时间：2012-11-17T17:09:40.083
> 
> 标签：android, eclipse, sdk, emulation, avd

我有 windows7 64 位、适用于 Windows 64 位的 Java 开发人员的 Eclipse IDE (JUNO)，以及适用于 windows 的更新和安装的 Android SDK。

安装 Eclipse 并通过帮助选项卡下载所需的 android 开发工具后，我解压了适用于 Windows 的 Android SDK，打开 SDK 管理器并安装：

1.  Android SDK 工具。
2.  Android SDK平台工具
3.  Android 2.2 (API 8) - 所有文件夹
4.  所有额外文件夹。

之后，我打开了 AVD 管理器，并在 Nexus 7 上使用 API 8 创建了一个新的 AVD（我已经尝试了所有这些）。当我试图通过 AVD 管理器启动 AVD 时，这就是我得到的：

```
Starting emulator for AVD 'droidX'
Failed to create Context 0x3005
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB 
```

当然，我在 Eclipse 中也得到了同样的结果。我找不到答案。我什至尝试下载 Windows 的每个更新，因为我读到它对某人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:20:35.703

请使用 API 15 或更高版本。不要使用 VM。

看到这个链接：

[构建后如何运行 Android 模拟器？](https://stackoverflow.com/questions/10576996/how-do-i-run-the-android-emulator-after-a-build)

还有这个：

[GLES 2 安卓模拟器](https://stackoverflow.com/questions/11372734/gles-2-android-emulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T04:54:33.713

要遵循的步骤： 1\. 创建虚拟设备。2\. 选择电话类别。3.选择nexus，然后按next。4\. 选择 api level 21 和 abi - armeabi-v7a android 5.0.1 然后按下一步。5.取消选中使用主机GPU并单击完成。

设置默认 RAM 大小和其他详细信息。

这对我有用。

# java - 从 jSF 中的 ActionListener 重定向

> ID：13432767
> 
> 赞同：0
> 
> 时间：2012-11-17T17:09:45.877
> 
> 标签：java, jsf, jakarta-ee, primefaces

我用过 JSF 和 PrimeFaces。我有一个 ActionListener 在有人单击 MenuItem 时触发：

```
@Override
public void processAction(ActionEvent event) throws AbortProcessingException
{
    Resource resouce = getResources().get(0);
    try
    {
        ResourceDelegate delegate = new ResourceDelegate(resouce, configDao);
        JSFUtils.writeToOutputStream(Mime.getMimeTypeForFileType(FileUtilities.getExtension(resouce.getName())), delegate.getData());
    }
    catch(Exception e)
    {
        logger.log(Level.SEVERE, "Cant show resource",e);
    }

} 
```

在该菜单项中，我使用以下代码将图像数据写入请求流：

```
/**
 * Writes binary data to the response for the browser to display
 * @param contentType
 * @param data
 * @throws IOException 
 */
public static void writeToOutputStream(String contentType, byte[] data) throws IOException
{
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletResponse hsr = getHttpServletResponse();
    hsr.setContentType(contentType);
    OutputStream stream = hsr.getOutputStream();
    stream.write(data);
    //Tell JSF to skip the remaining phases of the lifecycle
    context.responseComplete();
} 
```

当 ActionListener 完成后，我希望图像会显示出来，但事实并非如此。什么都没发生。我还需要做些什么才能使图像正确显示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:16:54.090

如果请求由 ajax 触发，则可能会发生这种情况，几乎所有 PrimeFaces 操作组件默认情况下都是这种情况。在 JSF/PrimeFaces 的情况下，ajax 请求应该返回一个特殊的 XML 响应，其中包含关于 HTML DOM 的哪些部分要更新以及如何更新的信息。

但是，您在这里发送“文件下载”作为 ajax 响应。PrimeFaces 的 ajax 引擎不能这样解释。此外，由于安全原因，JavaScript 没有强制*另存为*对话的工具。它确实应该由同步请求来请求。

在 PrimeFaces 的情况下[`<p:menuitem>`](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/menuitem.html)，您需要添加`ajax="false"`属性以关闭 ajax 特性并让它触发同步请求。

```
<p:menuitem ... ajax="false" /> 
```

*（PrimeFaces 的所有其他动作组件也可以使用相同的属性，例如`<p:commandButton>`）*

“什么都没有发生”实际上是不正确的。您会在 webbrowser 的内置 webdeveloper 工具集的“网络”部分看到具体的 HTTP 响应（在 Chrome/IE9/Firebug 中按 F12）。您甚至可能在 JavaScript 控制台中出现关于无法解释的 ajax 响应的 JavaScript 错误。

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)

# c++ - 从子对话框访问变量

> ID：13432771
> 
> 赞同：1
> 
> 时间：2012-11-17T17:10:42.123
> 
> 标签：c++, visual-c++, mfc

我有一个子对话框。我启动其他子对话。在第二个对话框中，我有以下列表框代码。我需要在第一个子对话框中访问 m_selcomponents。Itried 像 dlg->m_selcomponents 一样访问它。但它变得空了。我怎样才能做到这一点？谢谢你的帮助。

```
int count = m_OutList.GetCount(); 

for ( i = 0; i <m_OutList.GetCount(); i++)
    {
        m_OutList.GetText( buf[i], text );
        m_selcomponents->Add(text);

    }
MSelCFLCompDlg *SelCflCompDlg= new MSelCFLCompDlg(&allcomponents, &m_cflcomponents,m_FileDecimal,this) ; 
```

if(SelCflCompDlg->DoModal()==IDOK) { selectedcomponents.Append(*SelCflCompDlg->m_selcomponents); }

```
MSelCFLCompDlg::MSelCFLCompDlg(CStringArray *all, CStringArray *sel,int, CWnd* pParent /*=NULL*/)
    : CDialog(MSelCFLCompDlg::IDD, pParent)
{
    //{{AFX_DATA_INIT(MSelCFLCompDlg)
        // NOTE: the ClassWizard will add member initialization here
    //}}AFX_DATA_INIT
    m_allcomponents = all;
    m_selcomponents = sel;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:32:59.450

创建子对话框时，将指向父对话框的指针传递给子对话框构造函数。如果您向我们展示更多代码，我也许可以更详细地解释一下。

# ruby - 为什么我的 Ruby 前瞻正则表达式不起作用

> ID：13432772
> 
> 赞同：0
> 
> 时间：2012-11-17T17:10:47.193
> 
> 标签：ruby, regex, regex-lookarounds

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我在 rubular.com 中测试了我的正则表达式，它可以工作，但是当我运行代码时，它的行为会有所不同。

我想从一些 HTML 代码中解析出整个段落

这是我的正则表达式

```
description = ad_page.body.scan(/(?<=<span id="preview-local-desc">).+(?=<\/span>)/m) 
```

这是一些HTML源代码

```
<span id="preview-local-desc"> I want to pick up everything typed here.
Paragraphs, everything.
</span> 
```

匹配从我需要的地方开始，但随后它一直匹配到文档的末尾。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:15:24.490

除了[您不应该使用 regex 解析 HTML](https://stackoverflow.com/q/1732348/102441)之外，您还需要非贪婪匹配：

```
/(?<=<span id="preview-local-desc">).+?(?=<\/span>)/m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T23:30:51.337

如果您拥有或控制文件的格式，那么使用正则表达式解析 XML 或 HTML 对于琐碎的任务来说还可以。如果您不这样做，那么对文件的简单更改可能会破坏您的正则表达式。

使用解析器可以避免这个问题；我用[Nokogiri](http://nokogiri.org)解析了一些可怕的 XML，它甚至没有注意到。在编写了一个处理 1000 多个提要的 RSS 聚合器之后，我迷上了使用解析器。

```
require 'nokogiri'

html = '<span id="preview-local-desc"> I want to pick up everything typed here.
Paragraphs, everything.
</span>'

doc = Nokogiri.HTML(html)
doc.at('span').text
# => " I want to pick up everything typed here.\n    Paragraphs, everything.\n    " 
```

如果`<span>`您需要多个标签：

```
doc.search('span').map(&:text)
# => [" I want to pick up everything typed here.\n    Paragraphs, everything.\n    "] 
```

如果有多个`<span>`标签，而您只想要这个：

```
doc.at('span#preview-local-desc').text
# => " I want to pick up everything typed here.\n    Paragraphs, everything.\n    " 
```

# c# - HttpContext 的线程安全

> ID：13432777
> 
> 赞同：5
> 
> 时间：2012-11-17T17:11:33.020
> 
> 标签：c#, asp.net, .net, multithreading, httpcontext

经过一番谷歌搜索后，我没有找到任何关于 HttpContext 线程安全的权威、确凿的信息。

我正在看一个场景，例如：

```
public class AsyncHandler : IAsyncHttpHandler 
{
   void BeginProcessRequest(...)
   {
      // Spawn some tasks in parallel, provide them with current HttpContext as argument.
   }

   void EndProcessRequest(...) {...}
} 
```

我的（io 绑定）并行任务可能希望同时访问 HttpContext。

环顾各种帖子，这*似乎*是安全的，但是，我想要一些实际的证据。当然，MSDN 给出了通常的“静态是线程安全的等”，但这并没有帮助，除非我不得不假设它不是线程安全的。

我在 StackOverflow 上看到过各种帖子（例如[here](https://stackoverflow.com/questions/3790817/c-adding-context-to-parallel-foreach-in-asp-net)或[here](https://stackoverflow.com/questions/8109526/the-cross-thread-usage-of-httpcontext-current-property-and-related-things)或[here](https://stackoverflow.com/questions/7569578/httpcontext-class-and-its-thread-safety)），但对这个问题没有真正的答案。

对于 .NET 4.5 中的所有异步工作，如果 HttpContext 不是线程安全的，这似乎有点奇怪，但是，如果确实不是这样，有什么方法可以做到吗？我能想到：

*   克隆它（但这并不容易，尽管乍一看似乎并非不可能）。
*   包装 HttpContextBase 并使这个线程安全（嘿，我称之为 HttpContextWrapperWrapper）。

但这一切都让人感觉有点蹩脚而且工作量太大。

**编辑**：在更详细地研究了这一点，并在稍后进行了一些反思之后，我相信 HttpContext 不是线程安全的实际上并不重要。我在[这篇](http://vegetarianprogrammer.blogspot.co.uk/2012/12/understanding-synchronizationcontext-in.html)博文中详细说明了这一点。要点是在 ASP.NET 中使用正确的 SynchronizationContext 可确保一次访问上下文的线程不超过一个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T18:45:21.257

HttpContext 类不是线程安全的。

例如，该`HttpContext.Items`属性只是对未同步 Hashtable 的引用——因此这显然不是线程安全的。

从您的问题中不清楚您希望在并行任务之间共享什么，但我建议您使用自己的线程安全类的实例在任务之间共享状态，而不是尝试包装现有类。

# dataset - 如何使用 Weka 预测结果

> ID：13432781
> 
> 赞同：12
> 
> 时间：2012-11-17T17:11:57.557
> 
> 标签：dataset, data-mining, classification, weka, prediction

我是 Weka 的新手，我对这个工具感到困惑。我有一个关于水果价格和相关属性的数据集。我正在尝试使用数据集预测具体的水果价格。由于我是 Weka 的新手，所以我不知道如何完成这项任务。请帮助我或指导我学习有关如何进行预测的教程，以及此任务的最佳方法或算法是什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T08:56:19.060

如果您想了解更多关于保存训练好的分类器并稍后加载它进行预测的信息，请参阅以下内容。

假设您要使用 Weka GUI，您必须完成以下两个步骤：

1.  首先，使用一些预先标记的数据来训练分类器（使用您的水果价格数据）。确保数据为 ARFF 格式。训练后，将模型保存到磁盘。更多信息可以在这里找到：[https ://waikato.github.io/weka-wiki/saving_and_loading_models/](https://waikato.github.io/weka-wiki/saving_and_loading_models/)

2.  在第二步中，您使用已经训练好的模型（在第 1 步中完成）。具体来说，您必须加载模型文件（保存在步骤 1 中），然后使用“分类器”选项卡上的“提供的测试集”选项。在“提供的测试集”选项中，选择未标记的数据。更多关于这可以在这里找到：[https ://waikato.github.io/weka-wiki/making_predictions/](https://waikato.github.io/weka-wiki/making_predictions/)

我建议首先使用 Weka 安装附带的 ARFF 数据文件（这些 ARFF 文件基本上位于 Weka 安装目录下。在我的情况下，它位于：C:\Program Files\Weka-3-7\data ）。

一些更有用的网址：

1.  [https://developer.ibm.com/technologies/analytics/articles/os-weka1/](https://developer.ibm.com/technologies/analytics/articles/os-weka1/)
2.  [http://ortho.clmed.ncku.edu.tw/~emba/2006EMBA_MIS/3_16_2006/WekaIntro.pdf](http://ortho.clmed.ncku.edu.tw/%7Eemba/2006EMBA_MIS/3_16_2006/WekaIntro.pdf)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T02:49:08.533

我认为从现有训练模型中获取预测的最佳分步方法可以在这里找到 - [https://machinelearningmastery.com/save-machine-learning-model-make-predictions-weka/](https://machinelearningmastery.com/save-machine-learning-model-make-predictions-weka/)

# php - Varnish 不会缓存没有过期标头

> ID：13432783
> 
> 赞同：2
> 
> 时间：2012-11-17T17:12:18.250
> 
> 标签：php, caching, cache-control, varnish

在我的服务器上，我在端口 80 上运行 Varnish（缓存），Apache 在 8080 上。
当我设置如下标头时，Varnish 缓存非常好：

```
 $this->getResponse()->setHeader('Expires', '', true);
    $this->getResponse()->setHeader('Cache-Control', 'public', true);
    $this->getResponse()->setHeader('Cache-Control', 'max-age=2592000');
    $this->getResponse()->setHeader('Pragma', '', true); 
```

但这意味着人们缓存我的网站，而不会在可用时检索新版本。
当我删除标题时，人们会在每个页面重新加载时检索一个新版本（因此 Varnish 永远不会缓存）。

我无法弄清楚这里出了什么问题。
我的理想情况是人们不会在客户端缓存 html，而是将其留给 Varnish。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:12:18.763

> 我的理想情况是人们不会在客户端缓存 html，而是将其留给 Varnish。

您想要的是 varnish 缓存资源并将其提供给客户端，并且仅在发生更改时才生成新版本。最简单的方法是让 varnish 将其缓存很长时间，并在这种情况发生变化时使 varnish 中的条目无效（使用 PURGE 命令）。

默认情况下，varnish 将其缓存规则基于后端提供的标头。因此，如果您的 php 代码生成了您描述的标头，默认的 varnish vcl 将相应地调整其缓存策略。但是，它只能以通用的、安全的方式执行此操作（例如，如果您使用 cookie，它将永远不会缓存）。你知道你的后端是如何工作的，你应该改变 varnish 的缓存行为，而不是通过从后端发送不同的头部，而是编写一个 varnish .vcl 文件。即使 Max-Age 标头的 Cache-Control 缺失（在 .vcl 文件中设置 TimeToLive ttl），您也应该告诉 varnish 将资源缓存很长时间。Varnish 将提供生成的条目，直到 ttl 通过或您清除了条目。

如果你有这个工作，有一个更高级的选项：在客户端缓存资源，但让客户端在每次想要使用它时“重新验证”它。浏览器使用 HTTP GET 加上[If-Modified-Since](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)标头（您的响应应包含[Date](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18)标头以激发他的行为）或[If-Match](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24)标头（您的响应应包含[ETAG](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19)标头以激发他的行为）来执行此操作。这节省了带宽，因为 varnish 可以响应[304 NOT-MODIFIED](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5)响应，而无需再次发送整个资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:19:39.543

最简单的方法就是将 max-age 调低到更合理的值。目前，您已将其设置为 30 天。尝试将其设置为 15 分钟：

```
$this->getResponse()->setHeader('Cache-Control', 'max-age=900'); 
```

Web 缓存是一个有点复杂的话题，一些非常不同的客户端解释加剧了这种情况。但总的来说，这将减轻 Web 服务器的负载，同时确保新内容在合理的时间范围内可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:34:55.227

将客户端缓存的标准 HTTP 标头设置为您想要的任何内容。设置一个只有 Varnish 才能看到的自定义标头，例如`X-Varnish-TTL`Then 在您的 VCL 中，将以下代码合并到您的`vcl_fetch`sub 中：

```
if (beresp.http.X-Varnish-TTL) {
    C{
        char *ttl;
        /* first char in third param is length of header plus colon in octal */
        ttl = VRT_GetHdr(sp, HDR_BERESP, "\016X-Varnish-TTL:");
        VRT_l_beresp_ttl(sp, atoi(ttl));
    }C
    unset beresp.http.X-Varnish-TTL;  // Remove so client never sees this
} 
```

# class - 如何将自定义类导入 Flex 中的 mxml 文件？（动作脚本 3）

> ID：13432785
> 
> 赞同：3
> 
> 时间：2012-11-17T17:12:35.600
> 
> 标签：class, actionscript, import

我需要将我自己的类导入到 mxml 文件中，但总是会出现类不能嵌套的错误。我不知道如何使用我的课程（例如：NetConn.as）。你能帮助我吗？

```
<!--language:actionscript3>
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                            xmlns:s="library://ns.adobe.com/flex/spark" firstView="views.eazyRadioHomeView">
    <fx:Style source="eazyRadio.css"/>
    <fx:Script>
        <![CDATA[

            include "NetConn.as";

            import myNetConn;
            var easy=new NetConnectionEx();
        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Platzieren Sie nichtvisuelle Elemente (z. B. Dienste, Wertobjekte) hier -->

    </fx:Declarations>
</s:ViewNavigatorApplication>
--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:22:44.670

你需要

```
import com.yournamespace.NetConn; 
```

代替

```
include "NetConn.as" 
```

# visual-c++ - CUDA函数的条件编译

> ID：13432788
> 
> 赞同：2
> 
> 时间：2012-11-17T17:13:21.903
> 
> 标签：visual-c++, asynchronous, cuda, streaming

我创建了一个 CUDA 函数，用于使用其直方图计算图像的总和。

我正在尝试为多种计算能力编译内核和包装函数。

# **核心：**

```
__global__ void calc_hist(unsigned char* pSrc, int* hist, int width, int height, int pitch)
{
    int xIndex = blockIdx.x * blockDim.x + threadIdx.x;
    int yIndex = blockIdx.y * blockDim.y + threadIdx.y;

#if __CUDA_ARCH__ > 110   //Shared Memory For Devices Above Compute 1.1
    __shared__ int shared_hist[256];
#endif

    int global_tid = yIndex * pitch + xIndex;

    int block_tid = threadIdx.y * blockDim.x + threadIdx.x;

    if(xIndex>=width || yIndex>=height) return;

#if __CUDA_ARCH__ == 110 //Calculate Histogram In Global Memory For Compute 1.1

    atomicAdd(&hist[pSrc[global_tid]],1);   /*< Atomic Add In Global Memory */

#elif __CUDA_ARCH__ > 110   //Calculate Histogram In Shared Memory For Compute Above 1.1

    shared_hist[block_tid] = 0;   /*< Clear Shared Memory */
    __syncthreads();

    atomicAdd(&shared_hist[pSrc[global_tid]],1);    /*< Atomic Add In Shared Memory */
    __syncthreads();

    if(shared_hist[block_tid] > 0)  /* Only Write Non Zero Bins Into Global Memory */
        atomicAdd(&(hist[block_tid]),shared_hist[block_tid]);
#else 
    return;     //Do Nothing For Devices Of Compute Capabilty 1.0
#endif
} 
```

# 包装功能：

```
int sum_8u_c1(unsigned char* pSrc, double* sum, int width, int height, int pitch, cudaStream_t stream = NULL)
{

#if __CUDA_ARCH__ == 100
    printf("Compute Capability Not Supported\n");
    return 0;

#else
    int *hHist,*dHist;
    cudaMalloc(&dHist,256*sizeof(int));
    cudaHostAlloc(&hHist,256 * sizeof(int),cudaHostAllocDefault);

    cudaMemsetAsync(dHist,0,256 * sizeof(int),stream);

    dim3 Block(16,16);
    dim3 Grid;

    Grid.x = (width + Block.x - 1)/Block.x;
    Grid.y = (height + Block.y - 1)/Block.y;

    calc_hist<<<Grid,Block,0,stream>>>(pSrc,dHist,width,height,pitch);

    cudaMemcpyAsync(hHist,dHist,256 * sizeof(int),cudaMemcpyDeviceToHost,stream);

    cudaStreamSynchronize(stream);

    (*sum) = 0.0;
    for(int i=1; i<256; i++)
        (*sum) += (hHist[i] * i);

    printf("sum = %f\n",(*sum));

    cudaFree(dHist);
    cudaFreeHost(hHist);

    return 1;
#endif

} 
```

# 问题一：

编译时`sm_10`，包装器和内核不应该执行。但事实并非如此。整个包装函数执行。输出显示`sum = 0.0`。

我希望输出与`Compute Capability Not Supported`我`printf`在包装函数开头添加的语句一样。

如何防止包装器功能执行`sm_10`？我不想添加任何运行时检查，例如 if 语句等。可以通过模板元编程来实现吗？

# 问题2：

编译大于时`sm_10`，只有`cudaStreamSynchronize`在内核调用之后添加，程序才能正确执行。但如果我不同步，则输出为`sum = 0.0`. 为什么会这样？我希望该功能尽可能与主机异步。是否可以移动内核内的唯一循环？

我在 Windows 8 上使用 GTX460M、CUDA 5.0、Visual Studio 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:22:55.503

**广告。问题 1**

正如罗伯特在评论中已经解释的那样 -`__CUDA_ARCH__`仅在编译设备代码时定义。澄清一下：当您调用 nvcc 时，代码会被解析和编译两次——一次用于 CPU，一次用于 GPU。的存在`__CUDA_ARCH__`可用于检查这两个通道中的哪一个发生，然后对于设备代码 - 就像您在内核中所做的那样 - 可以检查您的目标是哪个 GPU。

然而，对于主机方来说，它并没有全部丢失。虽然您没有`__CUDA_ARCH__`，但您可以调用 API 函数[cudaGetDeviceProperties](https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__DEVICE.html#group__CUDART__DEVICE_1g1bf9d625a931d657e08db2b4391170f0)，它会返回有关您的 GPU 的大量信息。`major`特别是，您可能对`minor`表示计算能力的字段感兴趣。注意 - 这是在运行时完成的，而不是预处理阶段，因此相同的 CPU 代码将适用于所有 GPU。

**广告。问题2**

内核调用并且`cudaMemoryAsync`是异步的。这意味着如果您不调用`cudaStreamSynchronize`（或类似）后续 CPU 代码将继续运行，即使您的 GPU 尚未完成您的工作。这意味着，当您开始在循环中操作时，您`dHist`从中复制的数据`hHist`可能还不存在。`hHist`如果你想处理内核的输出，你*必须*等到内核完成。

请注意，`cudaMemcpy`(without `Async`) 内部具有隐式同步。

# sql - SQL Server Management Studio Express 2005 到 2008 R2

> ID：13432790
> 
> 赞同：0
> 
> 时间：2012-11-17T17:13:38.507
> 
> 标签：sql, sql-server, database

是否可以从 2005 年切换到 2008 年，包括 2005 年制作的数据库？还是会出错？我已经尝试过了，但它给了我错误 26。

这是错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:22:19.007

您是否尝试将 SQL Management Studio 2005 连接到 SQL2008R2 实例？请解释得更好；

sql server 2005 备份可以在大多数情况下在 2008R2 上恢复而不会出现问题；

两个实例都在同一台计算机上吗？SQL 浏览器是否启动？请记住，如果您在同一台计算机上保留超过 1 个 sql server 实例，最好启动 SQL Browser 服务

# css - CSS 固定布局导致水平滚动条显示在低分辨率屏幕上

> ID：13432799
> 
> 赞同：0
> 
> 时间：2012-11-17T17:14:43.667
> 
> 标签：css, fluid

我的网站在开发[http://hrcprojectconsulting.com/](http://hrcprojectconsulting.com/)下，当在我的分辨率和大小的屏幕上看到时，它看起来很好，否则，水平滚动条会弹出并使浏览烦人。

所以我不知道我到底要做什么。那里有流畅的布局，但它们填满了整个屏幕，这会让所有的东西都伸展开来。但是，如果我使用一些固定的 css，那么问题是根据屏幕大小和分辨率，可能会出现水平滚动条，这一定不会发生。

是的，是的，我已经完成了所有的阅读，事实上我正在学习一个非常好的教程

[http://www.netmagazine.com/tutorials/create-fluid-layouts-html5-and-css3#null](http://www.netmagazine.com/tutorials/create-fluid-layouts-html5-and-css3#null)

我理解作者的所作所为，而且看起来很容易，所以我就用我的做了，最简单的一步，它让我失望了，（因为我有另一个布局）

我现在的 HTML （我今天尝试添加页脚，但页脚既不停留在底部，也不被内容推下，而是溢出但那是另一回事）

所以这里是html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
   <html>
    <head>
<link rel="stylesheet" href= "<?php echo base_url() ?>css/main_style.css" />
<script type ="text/javascript" src="<?php echo base_url()?>js/1.8.js"></script>
        <title>Website</title>
    </head>
    <body>
        <div id="container">
            <div id="header"></div>
            <div id="content">
                <div id="left_content"></div>
                <div id="middle_content"></div>
                <div id="right_content"></div>
            </div>
        </div>
    </body>
</html> 
```

这是CSS

```
#container  {
    width:1040px;
    margin:0 auto;
}
#header {

    height:50px;
    margin-bottom:20px;
}
#left_content {
    float: left;
    width:180px;

    min-height: 600px;
    margin-right:20px;
}
#middle_content {
    font-family: 'trebuchet ms',geneva,arial,tahoma,sans-serif;
    font-size:8px;
    float: left;
    width:640px;

    min-height: 600px;
    margin-right:0px;
}
#right_content {
    float: right;
    width:180px;
    margin-right:20px;
    min-height: 600px;
}

#footer {

  float: left;

  background: green;

  margin-top: 20px;

  margin-right: 10px;

  margin-left: 10px;

  clear: both;

  width: 1020px;

  height:200px;

} 
```

所以; 跟随作者，我试图开始做的是开始修改最外层的包装容器，更改 1040px；到 96%。

一旦我这样做了，你看到的作为标题的蓝色条缩小到大约 400 像素并漂移到左边，加上你看到所有选项卡和框的网络表单，只是向下漂移到底部，完全不喜欢它自己从其余的，所以一团糟。

怎么来的？为什么我不能开始做作者对他的设计所做的事情？他从 96% 的变化开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:40:10.940

这是因为将 1040px 更改为 96% 会使内部的浮动元素有更多的“空间”来浮动。

如果 96% > 1040px，那么浮动将上升到顶部并彼此相邻。

尝试使所有子元素也基于 %。

# c++ - OpenCV 的 Python 或 C++ 编码之间的性能是否不同？

> ID：13432800
> 
> 赞同：90
> 
> 时间：2012-11-17T17:14:44.073
> 
> 标签：c++, python, performance, opencv

我的目标是一点一点地启动 opencv，但首先我需要确定 OpenCV 的哪个 API 更有用。我预测 Python 实现会更短，但与原生 C++ 实现相比，运行时间会更密集且更慢。有没有人知道可以评论这两个角度之间的性能和编码差异？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-11-17T18:12:23.120

正如前面的答案中提到的，与 C++ 或 C 相比，Python 速度较慢。Python 的构建是为了它的简单性、可移植性以及创造性，用户只需担心他们的算法，而不是编程问题。

但是在 OpenCV 中，有些不同。Python-OpenCV 只是原始 C/C++ 代码的包装器。它通常用于结合两种语言的最佳特性，**C/C++ 的性能和 Python 的简单性**。

因此，当您从 Python 调用 OpenCV 中的函数时，实际运行的是底层 C/C++ 源代码。所以性能不会有太大差异。（我记得我在某处读到性能损失<1％，不记得在哪里。对OpenCV中一些基本功能的粗略估计显示**最坏情况下**的损失为`<4%`.ie `penalty = [maximum time taken in Python - minimum time taken in C++]/minimum time taken in C++`） .

当您的代码有很多本机 python 代码时，就会出现问题。例如，如果您正在制作自己的函数，而这些函数在 OpenCV 中不可用，那么情况会变得更糟。此类代码在 Python 中本地运行，这大大降低了性能。

但是新的 OpenCV-Python 接口完全支持 Numpy。Numpy 是 Python 中用于科学计算的包。它也是原生 C 代码的包装器。它是一个高度优化的库，支持多种矩阵运算，非常适合图像处理。因此，如果您可以正确组合 OpenCV 函数和 Numpy 函数，您将获得非常高速的代码。

要记住的是，始终尽量避免 Python 中的循环和迭代。相反，使用 Numpy（和 OpenCV）中可用的数组操作工具。简单地添加两个 numpy 数组使用`C = A+B`比使用双循环快很多倍。

例如，您可以查看这些文章：

1.  [Python 中的快速数组操作](http://opencvpython.blogspot.com/2012/06/fast-array-manipulation-in-numpy.html)
2.  [OpenCV-Python接口、cv和cv2的性能比较](https://stackoverflow.com/questions/9357696/a-query-on-performance-comparison-of-opencv-python-interfaces-cv-and-cv2)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-07-08T18:46:28.713

openCV 的所有谷歌结果都是一样的：python 只会稍微慢一点。但我一次也没有看到任何关于此的分析。所以我决定做一些并发现：

**Python 比使用 opencv 的 C++ 慢得多，即使对于琐碎的程序也是如此。**

我能想到的最简单的例子是在屏幕上显示网络摄像头的输出并显示每秒的帧数。使用 python，我达到了 50FPS（在 Intel atom 上）。使用 C++，我得到了 65FPS，增加了 25%。在这两种情况下，CPU 使用率都使用单核，据我所知，受 CPU 性能的限制。此外，这个测试用例与我在过去从一个移植到另一个的项目中看到的一致。

这种差异从何而来？在 python 中，所有的 openCV 函数都返回图像矩阵的新副本。每当您捕获图像或调整图像大小时 - 在 C++ 中，您都可以重用现有内存。在python中你不能。我怀疑这次分配内存所花费的时间是主要区别，因为正如其他人所说：openCV 的底层代码是 C++。

在你把 python 扔出窗外之前：python 的开发速度要快得多，如果你没有遇到硬件限制，或者如果开发速度比性能更重要，那么使用 python。在我使用openCV 完成的许多应用程序中，我从python 开始，后来只将计算机视觉组件转换为C++（例如，使用python 的ctype 模块并将CV 代码编译到共享库中）。

蟒蛇代码：

```
import cv2
import time

FPS_SMOOTHING = 0.9

cap = cv2.VideoCapture(2)
fps = 0.0
prev = time.time()
while True:
    now = time.time()
    fps = (fps*FPS_SMOOTHING + (1/(now - prev))*(1.0 - FPS_SMOOTHING))
    prev = now

    print("fps: {:.1f}".format(fps))

    got, frame = cap.read()
    if got:
        cv2.imshow("asdf", frame)
    if (cv2.waitKey(2) == 27):
        break 
```

C++ 代码：

```
#include <opencv2/opencv.hpp>
#include <stdint.h>

using namespace std;
using namespace cv;

#define FPS_SMOOTHING 0.9

int main(int argc, char** argv){
    VideoCapture cap(2);
    Mat frame;

    float fps = 0.0;
    double prev = clock(); 
    while (true){
        double now = (clock()/(double)CLOCKS_PER_SEC);
        fps = (fps*FPS_SMOOTHING + (1/(now - prev))*(1.0 - FPS_SMOOTHING));
        prev = now;

        printf("fps: %.1f\n", fps);

        if (cap.isOpened()){
            cap.read(frame);
        }
        imshow("asdf", frame);
        if (waitKey(2) == 27){
            break;
        }
    }
} 
```

可能的基准限制：

*   相机帧率
*   定时器测量精度
*   花在打印格式上的时间

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-17T17:18:20.037

你是对的，Python 几乎总是比 C++ 慢得多，因为它需要一个解释器，而 C++ 不需要。但是，这确实需要 C++ 是强类型的，这会留下更小的错误余地。有些人喜欢被要求严格编码，而另一些人则喜欢 Python 与生俱来的宽容。

如果您想全面了解 Python 编码风格与 C++ 编码风格，这不是最好的地方，请尝试查找一篇文章。

编辑：因为 Python 是一种解释性语言，而 C++ 被编译为机器代码，***一般来说***，使用 C++ 可以获得性能优势。但是，关于使用 OpenCV，核心 OpenCV 库已经编译为机器代码，因此 OpenCV 库周围的 Python 包装器正在执行编译后的代码。换句话说，当涉及到从 Python 执行计算成本高昂的 OpenCV 算法时，您不会看到太多的性能损失，因为它们已经针对您正在使用的特定架构进行了编译。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-29T13:59:08.400

[sdfgeoff](https://stackoverflow.com/a/51235063/7404943)的答案是缺少*可以*在 Python 中重用数组的事实。预先分配它们并传递它们，它们就会被使用。所以：

```
 image = numpy.zeros(shape=(height, width, 3), dtype=numpy.uint8)
    #....
    retval, _ = cv.VideoCapture.read(image) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-04-05T15:29:10.483

为什么选择？如果您同时知道`Python`and `C++`，请使用`Python`用于研究`Jupyter Notebooks`，然后`C++`用于实现。的`Python`堆栈`Jupyter`，`OpenCV (cv2)`并`Numpy`提供快速原型设计。将代码移植到`C++`通常非常简单。

# php - 根据 DIV 名称选择 DIV

> ID：13432803
> 
> 赞同：-1
> 
> 时间：2012-11-17T17:14:54.720
> 
> 标签：php, html

目前我有一个名为“containerX”的 DIV。然而，X 可以改变任意数量，这取决于提交值的用户的输入。根据我想显示带有值的某个 DIV 的数字。

是否可以在 PHP 中创建一个“if / else”语句，根据名称显示某个 div。

例如

如果 div name = conter7 然后显示以下内容

否则，如果 div name = container 8 则显示以下内容

等等。

到目前为止已经尝试了很多，但似乎无法解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:27:27.420

当然，假设您能够在 PHP 中获得一个代表正确 div 名称的变量 - 有几个不同的选项，但这可能是最好的（无需太多更改即可工作）。

假设您有以下 div-

```
<div id='div1'>Some div stuff(1)</div>
<div id='div2'>Some div stuff(2)</div>
<div id='div3'>Some div stuff(3)</div> 
```

在页面的`head`标签中，为隐藏的 div 添加新样式：

```
<style>
    div.hidden {
        display:none;
    }
</style> 
```

然后，将您的 div 更改为类似于以下内容：

```
<div id='div1' <?php  if(divName!="containter1") echo "class='hidden'" ?> >Some div stuff(1)</div>
<div id='div2' <?php  if(divName!="containter2") echo "class='hidden'" ?> >Some div stuff(2)</div>
<div id='div3' <?php  if(divName!="containter3") echo "class='hidden'" ?> >Some div stuff(3)</div> 
```

`divName`如果变量不等于正确的字符串，那一点 PHP 会将每个 div 设置为我们之前创建的隐藏类。

这不是迄今为止最有效的代码，但是如果您对 PHP 不是太有经验（请原谅我这么说，但从短语来看`if div name = containter7`，我不得不假设您是该语言的新手），那么这将以最少的 PHP 参与完成工作。

# algorithm - 在两组点上找到平移和缩放以获得距离的最小二乘误差？

> ID：13432805
> 
> 赞同：21
> 
> 时间：2012-11-17T17:15:08.183
> 
> 标签：algorithm, math, point, least-squares

我有两组 3D 点（原始点和重建点）和关于对的对应信息 - 一组中的点代表第二组。我需要找到转换重构集的 3D 平移和缩放因子，以便平方距离之和最小（旋转也会很好，但点的旋转类似，所以这不是主要优先级，为了简单起见可能会被省略速度）。所以我的问题是 - 这是否已解决并在 Internet 上的某个地方可用？就个人而言，我会使用最小二乘法，但我没有太多时间（虽然我数学有点好，但我不经常使用它，所以我最好避免它），所以我如果存在，想使用其他解决方案。我更喜欢 C++ 中的解决方案，例如使用 OpenCV，但仅算法就足够了。

如果没有这样的解决方案，我会自己计算，我不想打扰你。

**解决方案：（**从您的回答中）
对我来说，这是 Kabsch 算法；
基本信息：[http](http://en.wikipedia.org/wiki/Kabsch_algorithm)
://en.wikipedia.org/wiki/Kabsch_algorithm 一般解决方案：[http ://nghiaho.com/?page_id=671](http://nghiaho.com/?page_id=671)

**仍然没有解决：** 我还需要规模。SVD 的比例值对我来说是无法理解的；当我需要所有轴的比例约为 1-4 时（由我估计），SVD 比例约为 [2000, 200, 20]，这根本没有帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-08-27T08:53:53.103

由于您已经在使用 Kabsch 算法，因此请看一下[Umeyama 的论文](http://web.stanford.edu/class/cs273/refs/umeyama.pdf)，该论文对其进行了扩展以获得规模。您需要做的就是获得点的标准偏差并将比例计算为：

```
(1/sigma^2)*trace(D*S) 
```

其中`D`是旋转估计中 SVD 分解中的对角矩阵，`S`是单位矩阵或`[1 1 -1]`对角矩阵，取决于行列式的符号`UV`（Kabsch 使用该符号将反射校正为适当的旋转）。因此，如果您有`[2000, 200, 20]`，则将最后一个元素乘以 +-1（取决于 的行列式的符号`UV`），将它们相加并除以您的点的标准差以获得比例。

您可以回收使用[Eigen](http://eigen.tuxfamily.org)库的以下代码：

```
typedef Eigen::Matrix<double, 3, 1, Eigen::DontAlign> Vector3d_U; // microsoft's 32-bit compiler can't put Eigen::Vector3d inside a std::vector. for other compilers or for 64-bit, feel free to replace this by Eigen::Vector3d

/**
 *  @brief rigidly aligns two sets of poses
 *
 *  This calculates such a relative pose <tt>R, t</tt>, such that:
 *
 *  @code
 *  _TyVector v_pose = R * r_vertices[i] + t;
 *  double f_error = (r_tar_vertices[i] - v_pose).squaredNorm();
 *  @endcode
 *
 *  The sum of squared errors in <tt>f_error</tt> for each <tt>i</tt> is minimized.
 *
 *  @param[in] r_vertices is a set of vertices to be aligned
 *  @param[in] r_tar_vertices is a set of vertices to align to
 *
 *  @return Returns a relative pose that rigidly aligns the two given sets of poses.
 *
 *  @note This requires the two sets of poses to have the corresponding vertices stored under the same index.
 */
static std::pair<Eigen::Matrix3d, Eigen::Vector3d> t_Align_Points(
    const std::vector<Vector3d_U> &r_vertices, const std::vector<Vector3d_U> &r_tar_vertices)
{
    _ASSERTE(r_tar_vertices.size() == r_vertices.size());
    const size_t n = r_vertices.size();

    Eigen::Vector3d v_center_tar3 = Eigen::Vector3d::Zero(), v_center3 = Eigen::Vector3d::Zero();
    for(size_t i = 0; i < n; ++ i) {
        v_center_tar3 += r_tar_vertices[i];
        v_center3 += r_vertices[i];
    }
    v_center_tar3 /= double(n);
    v_center3 /= double(n);
    // calculate centers of positions, potentially extend to 3D

    double f_sd2_tar = 0, f_sd2 = 0; // only one of those is really needed
    Eigen::Matrix3d t_cov = Eigen::Matrix3d::Zero();
    for(size_t i = 0; i < n; ++ i) {
        Eigen::Vector3d v_vert_i_tar = r_tar_vertices[i] - v_center_tar3;
        Eigen::Vector3d v_vert_i = r_vertices[i] - v_center3;
        // get both vertices

        f_sd2 += v_vert_i.squaredNorm();
        f_sd2_tar += v_vert_i_tar.squaredNorm();
        // accumulate squared standard deviation (only one of those is really needed)

        t_cov.noalias() += v_vert_i * v_vert_i_tar.transpose();
        // accumulate covariance
    }
    // calculate the covariance matrix

    Eigen::JacobiSVD<Eigen::Matrix3d> svd(t_cov, Eigen::ComputeFullU | Eigen::ComputeFullV);
    // calculate the SVD

    Eigen::Matrix3d R = svd.matrixV() * svd.matrixU().transpose();
    // compute the rotation

    double f_det = R.determinant();
    Eigen::Vector3d e(1, 1, (f_det < 0)? -1 : 1);
    // calculate determinant of V*U^T to disambiguate rotation sign

    if(f_det < 0)
        R.noalias() = svd.matrixV() * e.asDiagonal() * svd.matrixU().transpose();
    // recompute the rotation part if the determinant was negative

    R = Eigen::Quaterniond(R).normalized().toRotationMatrix();
    // renormalize the rotation (not needed but gives slightly more orthogonal transformations)

    double f_scale = svd.singularValues().dot(e) / f_sd2_tar;
    double f_inv_scale = svd.singularValues().dot(e) / f_sd2; // only one of those is needed
    // calculate the scale

    R *= f_inv_scale;
    // apply scale

    Eigen::Vector3d t = v_center_tar3 - (R * v_center3); // R needs to contain scale here, otherwise the translation is wrong
    // want to align center with ground truth

    return std::make_pair(R, t); // or put it in a single 4x4 matrix if you like
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-09T23:02:46.317

对于 3D 点，该问题称为绝对方向问题。C++ 实现可从 Eigen [http://eigen.tuxfamily.org/dox/group__Geometry__Module.html#gab3f5a82a24490b936f8694cf8fef8e60](http://eigen.tuxfamily.org/dox/group__Geometry__Module.html#gab3f5a82a24490b936f8694cf8fef8e60)和论文[http://web.stanford.edu/class/cs273/refs/umeyama.pdf](http://web.stanford.edu/class/cs273/refs/umeyama.pdf)

您可以通过 opencv 通过调用 cv::cv2eigen() 将矩阵转换为特征值来使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T16:11:32.147

从两组点的平移开始。使它们的质心与坐标系的原点重合。平移向量就是这些质心之间的差异。

现在我们有两组坐标表示为矩阵**P**和**Q**。一组点可以通过应用一些线性算子（执行缩放和旋转）从其他点获得。该运算符由 3x3 矩阵**X**表示：

**P** * **X** = **Q**

为了找到合适的缩放/旋转，我们只需要求解这个矩阵方程，找到**X**，然后将其分解为几个矩阵，每个矩阵代表一些缩放或旋转。

解决它的一个简单（但可能在数值上不稳定）的方法是将方程的两个部分乘以转置矩阵**P**（以摆脱非方阵），然后将方程的两个部分乘以倒置的**P ^T** * **:** _

**P ^T** * **P** * **X** = **P ^T** * **Q**

**X** = ( **P ^T** * **P** ) ^(-1) * **P ^T** * **Q**

对矩阵**X**应用[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)给出两个旋转矩阵和一个具有比例因子的矩阵：

 ****X** = **U** * **S** * **V**

这里**S**是一个具有比例因子的对角矩阵（每个坐标一个比例），**U**和**V**是旋转矩阵，一个适当地旋转点以便它们可以沿坐标轴缩放，另一个旋转它们一次以对齐它们的方向到第二组点。

* * *

示例（为简单起见，使用二维点）：

```
P =  1     2     Q =   7.5391    4.3455
     2     3          12.9796    5.8897
    -2     1          -4.5847    5.3159
    -1    -6         -15.9340  -15.5511 
```

解方程后：

```
X =  3.3417   -1.2573
     2.0987    2.8014 
```

SVD分解后：

```
U = -0.7317   -0.6816
    -0.6816    0.7317

S =  4  0
     0  3

V = -0.9689   -0.2474
    -0.2474    0.9689 
```

**在这里，SVD 已经正确地重构了我对矩阵P**执行的所有操作以获得矩阵**Q**：旋转 0.75 角度，将 X 轴缩放 4，将 Y 轴缩放 3，旋转角度 -0.25。

* * *

如果点集被统一缩放（每个轴的比例因子相等），则此过程可能会大大简化。

只需使用[Kabsch 算法](http://en.wikipedia.org/wiki/Kabsch_algorithm)即可获得平移/旋转值。然后执行这些平移和旋转（质心应与坐标系的原点重合）。然后为每对点（和每个坐标）估计[线性回归](http://en.wikipedia.org/wiki/Linear_regression)。线性回归系数正是比例因子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T04:37:35.593

一个很好的解释[在相应的 3D 点之间找到最佳旋转和平移](http://nghiaho.com/?page_id=671)

代码在 matlab 中，但使用 cv::SVD 函数转换为 opengl 很简单

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T16:36:46.877

您可能想尝试 ICP（迭代最近点）。给定两组 3d 点，它将告诉您从第一组到第二组的变换（旋转 + 平移）。如果您对 c++ 轻量级实现感兴趣，请尝试 libicp。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-16T11:18:18.610

一般的转换，以及规模可以通过[Procrustes Analysis](http://en.wikipedia.org/wiki/Procrustes_analysis)检索。它通过将对象相互叠加并尝试从该设置估计转换来工作。它已在 ICP 的上下文中多次使用。实际上，您的偏好，Kabash 算法是这种情况的一个特例。

此外，Horn 的对齐算法（基于四元数）也找到了一个非常好的解决方案，同时非常高效。[Matlab 实现](http://www.mathworks.com/matlabcentral/fileexchange/26186-absolute-orientation-horn-s-method)也可用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-28T07:37:26.993

如果您的点在所有方向上均匀缩放（我也无法理解 SVD-s 比例矩阵），则可以在没有 SVD 的情况下推断比例。这是我解决相同问题的方法：

1.  测量每个点到点云中其他点的距离以获得二维距离表，其中 (i,j) 处的条目是 norm(point_i-point_j)。对另一个点云做同样的事情，这样你就得到了两个表——一个用于原始点，另一个用于重建点。

2.  将一张表中的所有值除以另一张表中的对应值。因为这些点彼此对应，所以距离也是如此。理想情况下，结果表的所有值都彼此相等，这就是比例。

3.  分区的中值应该非常接近您正在寻找的比例。平均值也很接近，但我选择中位数只是为了排除异常值。

现在您可以使用比例值来缩放所有重建点，然后继续估计旋转。

提示：如果点云中的点太多而无法找到所有点之间的距离，那么距离的较小子集也可以工作，只要它是两个点云的相同子集。理想情况下，如果没有测量噪声，则只有一对距离可以工作，例如，当一个点云通过旋转它直接从另一个点云导出时。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-05-20T03:12:27.347

也可以使用 BaoweiLin 提出的ScaleRatio ICP 代码可以在github找到**

# ios - 当使用 CLGeocoder 的 ResreverseGeocodeLocation 但返回的地标为 nil 并且 kCLErrorDomain 错误 =8

> ID：13432807
> 
> 赞同：2
> 
> 时间：2012-11-17T17:15:09.713
> 
> 标签：ios, mapkit

我想通过 获取位置，`CLLocationCoordinate2D`我使用了以下代码

```
//newLocation is a CLLocationCoordinate2D object
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder reverseGeocodeLocation:newLocation completionHandler:
^(NSArray *placemarks, NSError *error){
CLPlacemark *placemark = [placemarks objectAtIndex:0];
self.locationInput.text =placemark.subLocality;
self.locationInput.text =placemark.ISOcountryCode;
}]; 
```

但返回的地标为 nil 且错误描述为 kCLErrorDomain error =8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:04:02.513

返回值记录在这里。

[https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocationConstantsRef/Reference/reference.html#//apple_ref/doc/uid/TP40010237-CH2-SW2](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocationConstantsRef/Reference/reference.html#//apple_ref/doc/uid/TP40010237-CH2-SW2)

8 号是“kCLErrorGeocodeFoundNoResult”，所以我怀疑您正在寻找没有结果的东西。我在其他地方读到 CLGeocoder 只能在设备（而不是模拟器）上运行，但我自己没有验证过。如果您确定您的搜索字符串应该得到结果，请在设备上尝试您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T02:41:55.677

我的问题是我正在使用连接到泰国服务器的 VPN，试图在英国邮政编码上执行 reverseGeocodeLocation。当我将 VPN 切换到英国服务器时，它运行良好。

# html - 从浏览器中的种子盒流式传输视频

> ID：13432810
> 
> 赞同：1
> 
> 时间：2012-11-17T17:15:34.170
> 
> 标签：html, flash, video, stream, video-player

我可以在我的计算机上以 WMP 流式传输视频，但我不能在 Android/iPad 上，因为它需要 HTTP 身份验证。

有任何想法吗？

# python - 按种类命名空间

> ID：13432812
> 
> 赞同：0
> 
> 时间：2012-11-17T17:15:50.493
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有一个需要分离数据的项目。

将实施多个“系统”。每个都将基于一个通用模型。要在 GAE 数据存储中使用它，我可以使用前缀`4EClass`：`3EClass`和`PthClass`. 我宁愿为此使用名称空间，因为它似乎更干净。

我希望能够在种类的子类中设置一个命名空间：

```
class Class(db.Model):
    namespace = '4E' 
```

有没有一种方法可以让 put、query 等与这些命名空间一起工作，最好不必这样做`Class.query(namespace=Class.namespace)`或类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:18:03.633

为此使用命名空间没有多大意义——命名空间与模型类是正交的。

相反，您可以指定一个独立于类名的种类名称：

```
class MyModel(db.Model):
  @classmethod
  def kind(cls):
    return "MyModel_Foo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T23:28:29.373

我认为您正在寻找的是多模型。这里有 ndb：[https](https://developers.google.com/appengine/docs/python/ndb/polymodelclass)
://developers.google.com/appengine/docs/python/ndb/polymodelclass 或 db：[https ://developers.google.com/appengine/docs/python/datastore/polymodelclass](https://developers.google.com/appengine/docs/python/datastore/polymodelclass)

我也建议您使用`ndb`而不是`db`包装。 [https://developers.google.com/appengine/docs/python/datastore/polymodelclass](https://developers.google.com/appengine/docs/python/datastore/polymodelclass)

# scala - 在 Scala 中匹配 BitSet 的模式

> ID：13432816
> 
> 赞同：0
> 
> 时间：2012-11-17T17:16:21.890
> 
> 标签：scala, pattern-matching

有没有一种简单/最好的方法来获得一个我可以像列表一样进行模式匹配的 BitSet？

```
val btst = BitSet(1,2,3,4)
btst match {
  ...
  case head :: tail => tail
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T17:31:48.440

根据定义，一个集合是一个无序的集合，并且在这样的集合上进行模式匹配是容易出错的。如果您愿意，请将其转换为列表...此外，您不应依赖`head`并`tail`始终返回相同的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T21:56:25.283

BitSet 是[有序](https://github.com/scala/scala/blob/master/src/library/scala/collection/immutable/BitSet.scala#L28)的，但没有提取器。

编辑：但不是没有幽默感。

```
object |<| {
  def unapply(s: BitSet): Option[(Int, BitSet)] =
    if (s.isEmpty) None
    else Some((s.head, s.tail))
}

  def flags(b: BitSet) = b match {
    case f"5 || 10" => println("Five and dime")  // alas, never a literal
    case 5 |<| any  => println(s"Low bit is 5iver, rest are $any")
    case i |<| any  => println(s"Low bit is $i, rest are $any")
    case _          => println("None")
  }

  def dump(b: BitSet) = println(b.toBitMask.mkString(","))
  val s = BitSet(5, 7, 11, 17, 19, 65)
  dump(s)
  // ordinary laborious tests
  s match { 
    case x if x == BitSet(5)                => println("Five")
    case x if x == BitSet(5,7,11,17,19,65)  => println("All")
    case x if x(5)          => println("Five or more")
    case _                  => println("None")
  }     
  // manually matching on the mask is laborious
  // and depends on the bit length
  s.toBitMask match {
    case Array(2L)          => println("One")
    case Array(657568L)     => println("First word's worth")
    case Array(657568L, _)  => println("All")
    case _                  => println("None") 
  }   
  // or truncate for special case
  s.toBitMask(0) match {
    case 2L                 => println("One")
    case 657568L            => println("First word's worth")
    case _                  => println("None")
  } 
```

# algorithm - 快速排序二进制数组

> ID：13432817
> 
> 赞同：1
> 
> 时间：2012-11-17T17:16:34.403
> 
> 标签：algorithm, sorting, quicksort

我想知道有多少比较，在最坏的情况下，Quicksort 需要对 size 的二进制数组进行排序`n`。
我无法找出这个问题的最坏情况。`[0 1 0 1 0 1..]`?
干杯，
eo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:19:29.653

不完全是快速排序，但如果你想对二进制数组进行排序，你可以在 O(n) 中完成。只需计算您有多少个 1 和 0，然后按照您想要的顺序写入。

例如，对于以下数组：

```
[0 1 0 1 0 1 1] 
```

您可以在 O(n) 中计算出三个 0 和四个 1。然后你只需先用三个 0 重写你的数组，然后再用四个 1 重写你的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:02:13.380

对包含少量唯一键的数组进行排序在实践中很常见。当唯一键的数量为 O(1) 时，人们想要一种适应 O(n) 时间的算法。在您的情况下，只有两个唯一的键。

QuickSort 平均为 O(nlogn)，但在最坏的情况下为 O(n^2)，对于你的情况，我已经在这个数组上测试了快速排序算法，数组 `[ 0 1 1 0 1 0 1 0 0 0 1 0 1 ]`的长度是`13`元素，算法需要`170`迭代来排序数组，即`n^2`.

这个 O(n) 算法的伪代码：

```
let n0 <- 0;
for i=0  to lenght(A)
    if A[i] == 0
        A[n0] = 0;
        ++n0

for i=n0 to lenght(A)
    A[i] = 1 
```

# javascript - 是否可以将请求标头添加到 iframe src 请求？

> ID：13432821
> 
> 赞同：99
> 
> 时间：2012-11-17T17:16:53.753
> 
> 标签：javascript, iframe, httprequest

我了解在 JavaScript 中进行 AJAX 调用时，您可以非常轻松地设置 HTTP 请求标头。

但是，通过脚本将 iframe 插入页面时，是否也可以设置自定义 HTTP 请求标头？

```
<iframe src="someURL"> <!-- is there any place to set headers in this? --> 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2017-02-16T17:22:04.653

您可以在 javascript 中发出请求，设置您想要的任何标头。然后你可以[`URL.createObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL)，得到适合`src`iframe 的东西。

```
var xhr = new XMLHttpRequest();

xhr.open('GET', 'page.html');
xhr.onreadystatechange = handler;
xhr.responseType = 'blob';
xhr.setRequestHeader('Authorization', 'Bearer ' + token);
xhr.send();

function handler() {
  if (this.readyState === this.DONE) {
    if (this.status === 200) {
      // this.response is a Blob, because we set responseType above
      var data_url = URL.createObjectURL(this.response);
      document.querySelector('#output-frame-id').src = data_url;
    } else {
      console.error('no pdf :(');
    }
  }
} 
```

保留响应的 MIME 类型。因此，如果您收到 html 响应，则 html 将显示在 iframe 中。如果您请求 pdf，浏览器 pdf 查看器将为 iframe 启动。

如果这是长期存在的客户端应用程序的一部分，您可能希望使用它[`URL.revokeObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL)来避免内存泄漏。

对象 URL 也很有趣。它们的形式是`blob:https://your.domain/1e8def13-3817-4eab-ad8a-160923995170`. 您实际上可以在新选项卡中打开它们并查看响应，并且当创建它们的上下文关闭时它们会被丢弃。

这是一个完整的例子：[https ://github.com/courajs/pdf-poc](https://github.com/courajs/pdf-poc)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-11-17T17:18:55.323

不，你不能。但是，您可以将`iframe`源设置为某种预加载脚本，该脚本使用 AJAX 来获取包含您想要的所有标题的实际页面。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-07-31T15:23:36.487

由于 createObjectURL 的贬值，@FellowMD 的答案不适用于现代浏览器，因此我使用了相同的方法，但使用了 iframe srcDoc 属性。

1.  使用 XMLHttpRequest 或任何其他方法检索要在 iframe 中显示的内容
2.  设置 iframe 的 srcdoc 参数

请在下面找到一个 React 示例（我知道这是矫枉过正）：

```
import React, {useEffect, useState} from 'react';

function App() {
  const [content, setContent] = useState('');

  useEffect(() => {
    // Fetch the content using the method of your choice
    const fetchedContent = '<h1>Some HTML</h1>';
    setContent(fetchedContent);
  }, []);

  return (
    <div className="App">
      <iframe sandbox id="inlineFrameExample"
              title="Inline Frame Example"
              width="300"
              height="200"
              srcDoc={content}>
      </iframe>

    </div>
  );
}

export default App; 
```

现在大多数浏览器都支持 Srcdoc。似乎Edge实现它有点晚了：[https ://caniuse.com/#feat=iframe-srcdoc](https://caniuse.com/#feat=iframe-srcdoc)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-06T20:34:03.617

事实证明 URL.createObjectURL() 在 Chrome 71 中已被弃用
（请参阅[https://developers.google.com/web/updates/2018/10/chrome-71-deps-rems](https://developers.google.com/web/updates/2018/10/chrome-71-deps-rems)）
基于@Niet the dark Absol 和@FellowMD 的出色答案，如果您需要传入身份验证标头，这里是如何将文件加载到 iframe 中。（您不能只将 src 属性设置为 URL）：

```
$scope.load() {
    var iframe = #angular.element("#reportViewer");
    var url = "http://your.url.com/path/etc";
    var token = "your-long-auth-token";
    var headers = [['Authorization', 'Bearer ' + token]];
    $scope.populateIframe(iframe, url, headers);
}

$scope.populateIframe = function (iframe, url, headers) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.onreadystatechange = handler;
    xhr.responseType = 'document';
    headers.forEach(function (header) {
        xhr.setRequestHeader(header[0], header[1]);
    });
    xhr.send();

    function handler() {
        if (this.readyState === this.DONE) {
            if (this.status === 200) {
                var content = iframe[0].contentWindow ||
                    iframe[0].contentDocument.document || 
                    iframe[0].contentDocument;
                content.document.open();
                content.document.write(this.response.documentElement.innerHTML);
                content.document.close();
            } else {
                iframe.attr('srcdoc', '<html><head></head><body>Error loading page.</body></html>');
            }
        }
    }
} 
```

并向 courajs 大喊：[https ://github.com/courajs/pdf-poc/blob/master/script.js](https://github.com/courajs/pdf-poc/blob/master/script.js)

# graph - 谷歌图表 API Y 是轴缩放数据

> ID：13432823
> 
> 赞同：0
> 
> 时间：2012-11-17T17:17:06.650
> 
> 标签：graph, google-visualization, linegraph

我正在使用以下数据默认数据：37.705 54.098 55.738 75.41 52.459 73.77 68.852 55.738

```
//chart.googleapis.com/chart
   ?chxs=0,676767,11.5,0,l,676767
   &chxt=y
   &chs=300x225
   &cht=lc
   &chco=3D7930
   &chd=s:Xhiugtqi
   &chg=14.3,-1,1,1
   &chls=2,4,0
   &chm=B,C5D4B5BB,0,0,0 
```

![正态图](../Images/ccb1441438b7b8000450f9d536c83b73.png)

我的问题是，当您更改 y 轴的范围时，为什么（以及如何阻止）谷歌图表重新调整您的数据？

例如，在这里我将 y 轴范围限制为 40，但它会缩小所有数据……这对我不利。无论 y 轴上限是多少，我都需要它来显示实际数据值。

```
//chart.googleapis.com/chart
   ?chxr=0,0,40
   &chxs=0,676767,11.5,0,l,676767
   &chxt=y
   &chs=300x225
   &cht=lc
   &chco=3D7930
   &chd=s:Xhiugtqi
   &chg=14.3,-1,1,1
   &chls=2,4,0
   &chm=B,C5D4B5BB,0,0,0 
```

![看到它缩放了所有数据值！ 多么糟糕的事情](../Images/883dac5ec59357256f41d8116df0b9ce.png)

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:27:47.180

嗯，我刚刚想通了。如果您为范围设置自己的最大值和最小值，它将缩放数据。

因此，这可以通过将轴范围设置为“实际”值来解决：

```
//chart.googleapis.com/chart
   ?chxr=0,0,40
   &chxs=0,676767,11.5,0,l,676767
   &chxt=y
   &chs=300x225
   &cht=lc
   &chco=3D7930
   &chd=s:Xhiugtqi
   &chg=14.3,-1,1,1
   &chls=2,4,0
   &chm=B,C5D4B5BB,0,0,0
   &chds=a 
```

# php - 如何在代理后面使用 imap_open？

> ID：13432824
> 
> 赞同：5
> 
> 时间：2012-11-17T17:17:06.850
> 
> 标签：php, curl, proxy, imap, fsockopen

我真的不知道如何问这个问题，所以我会尽可能地问它。是否可以使用代理连接从使用 PHP 的 pop3 或 imap 服务器读取邮件`imap_open`？

我更喜欢使用它，`imap_open`因为它处理邮件非常简单。但是，如果`imap_open`无法使用，还有哪些其他解决方案？CURL 可以`fsockopen`工作吗？我似乎找不到任何显示 PHP 代理后面的 pop3/imap 连接的示例。

任何建议都会非常有帮助！

# c# - 将参数传递给方法绑定

> ID：13432826
> 
> 赞同：5
> 
> 时间：2012-11-17T17:17:32.200
> 
> 标签：c#, .net, dependency-injection, ninject, ninject-2

我有一个非常简单的 Ninject 绑定：

```
Bind<ISessionFactory>().ToMethod(x =>
    {
        return Fluently.Configure()
            .Database(SQLiteConfiguration.Standard
                .UsingFile(CreateOrGetDataFile("somefile.db")).AdoNetBatchSize(128))
            .Mappings( 
                m => m.FluentMappings.AddFromAssembly(Assembly.Load("Sauron.Core"))
                      .Conventions.Add(PrimaryKey.Name.Is(p => "Id"), ForeignKey.EndsWith("Id")))
            .BuildSessionFactory();
    }).InSingletonScope(); 
```

我需要的是用一个参数替换**“somefile.db” 。**类似的东西

```
kernel.Get<ISessionFactory>("somefile.db"); 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:18:10.157

`IParameter`您可以在调用时提供额外的 s，`Get<T>`以便您可以像这样注册您的数据库名称：

```
kernel.Get<ISessionFactory>(new Parameter("dbName", "somefile.db", false); 
```

然后您可以`Parameters`通过以下方式访问提供的集合`IContext`（sysntax 有点冗长）：

```
kernel.Bind<ISessionFactory>().ToMethod(x =>
{
    var parameter = x.Parameters.SingleOrDefault(p => p.Name == "dbName");
    var dbName = "someDefault.db";
    if (parameter != null)
    {
        dbName = (string) parameter.GetValue(x, x.Request.Target);
    }
    return Fluently.Configure()
        .Database(SQLiteConfiguration.Standard
            .UsingFile(CreateOrGetDataFile(dbName)))
            //...
        .BuildSessionFactory();
}).InSingletonScope(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:34:54.627

现在这是 NinjectModule，我们可以使用 NinjectModule.Kernel 属性：

```
Bind<ISessionFactory>().ToMethod(x =>
    {
        return Fluently.Configure()
            .Database(SQLiteConfiguration.Standard
                .UsingFile(CreateOrGetDataFile(Kernel.Get("somefile.db"))).AdoNetBatchSize(128))
            .Mappings( 
                m => m.FluentMappings.AddFromAssembly(Assembly.Load("Sauron.Core"))
                      .Conventions.Add(PrimaryKey.Name.Is(p => "Id"), ForeignKey.EndsWith("Id")))
            .BuildSessionFactory();
    }).InSingletonScope(); 
```

# jquery - Fancybox“离开此站点”弹出窗口

> ID：13432827
> 
> 赞同：2
> 
> 时间：2012-11-17T17:17:35.920
> 
> 标签：jquery, fancybox

我正在尝试为儿童移动网站创建一个精美的弹出窗口。

*   它只会出现在外部链接中
*   它提供链接以继续到外部网站链接或关闭fancybox并返回页面

到目前为止，我能找到的唯一解决方案是对每个链接使用类似的东西......

```
<a id="external" href="#external-block">Go to external link</a> 

<div style="display:none">
<div id="external-block">
<h2>Warning</h2>
<p>Hey, you're leaving this site <p>
<a href="onclick="$.fancybox.close();">Return</a>
<a href="http://actuallink">Leave the site</a>
</div> 
```

在js中

```
$(document).ready(function() {
  $("a#external").fancybox();
}); 
```

但它对于每个链接都是多余的。我想找到一种方法来拥有一个 js 函数来检测页面上的链接是否是外部的，当它被点击而不是转到 url 时，它会抓取 href 并制作（即每个链接都没有隐藏的 div ) 一个带有消息的花式框弹出窗口，可以转到该 URL 或返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:15:48.973

使用fancybox 是必需的吗？没有它，这可能会更简单。

您可以创建一个隐藏的固定元素，该元素将充当灯箱，并在单击链接时使该框可见。当然，您还需要添加自己的功能来通过关闭按钮隐藏框，但这应该很简单。

要在这个新的灯箱中设置外部链接，您只需执行以下操作：

```
$('a[href^="http://"], a[href^="https://"]').click(function(e) {
    // This is used to override the default event and
    // stop the browser from redirecting the user to the url.
    e.preventDefault();

    // Set the href for the #external_link element inside the lightbox
    // to the one from the anchor tag that was clicked on.
    $("#lightbox #external_link").attr("href", $(this).attr("href"));

    // Show the light-box
    $("#lightbox").show();
}); 
```

如果你喜欢fancybox 提供的渐变效果，我建议你花点时间阅读[CSS 过渡](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:36:03.587

您可以在所有元素上设置一个事件处理程序`a`，检查它是否是外部链接，然后打开一个花式框窗口。就像是：

```
$("a").on("click", function(e) {       
    if ($(this).attr("href").indexOf("http://")>-1
       ||
       $(this).attr("href").indexOf("https://")>-1)
    {
        e.preventDefault();
        e.stopPropagation();
        message = "<div>This site opens in a new window<br/>" + 
                  "<input type=\"button\" value=\"Continue\" " +  
                     "onclick=\"location.href='"+$(this).attr("href")+"';\">"+
                  "</div>";
        $.fancybox(message);

    }
}); 
```

小提琴中的“继续”按钮不起作用，因为它阻止了外部链接，但它的工作代码：http: [//jsfiddle.net/6nfWJ/](http://jsfiddle.net/6nfWJ/)

# iphone - 如何用多个其他字符串替换出现的多个字符串 [NSString]

> ID：13432829
> 
> 赞同：6
> 
> 时间：2012-11-17T17:17:53.417
> 
> 标签：iphone, objective-c, ios, nsstring

```
NSString *string  = [myString stringByReplacingOccurrencesOfString:@"<wow>" withString:someString]; 
```

我有这个代码。现在假设我的应用程序的用户输入了两个不同的字符串，我想用两个不同的其他字符串替换，我该如何实现呢？我不在乎它是否使用私有 API，我正在为越狱平台开发。我的用户将输入 or 或 。我想用它们各自的待替换字符串替换这些字符串的任何出现:)

提前感谢：P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T17:22:52.943

最简单的解决方案是运行`stringByReplacingOccurrencesOfString`两次：

```
NSString *string  = [[myString
    stringByReplacingOccurrencesOfString:@"<wow>" withString:someString1]
    stringByReplacingOccurrencesOfString:@"<boo>" withString:someString2]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-17T18:15:29.150

dasblinkenlight 和 Matthias 的答案都可以，但它们都会导致创建几个中间 NSString；如果您不经常执行此操作，那并不是真正的问题，但是更好的方法看起来像这样。

```
NSMutableString *myStringMut = [[myString mutableCopy] autorelease];
[myStringMut replaceOccurrencesOfString:@"a" withString:somethingElse];
[myStringMut replaceOccurrencesOfString:@"b" withString:somethingElseElse];
// etc. 
```

然后你可以`myStringMut`像以前那样使用`myString`，因为 NSMutableString 是一个 NSString 子类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T17:21:47.820

我会再次运行字符串替换方法

```
NSString *string  = [myString stringByReplacingOccurrencesOfString:@"foo" withString:@"String 1"];
string = [string stringByReplacingOccurrencesOfString:@"bar" withString:@"String 2"]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-26T13:48:14.293

这在 Swift 3.1 中对我很有效

```
let str = "hi hello hey"

var replacedStr = (str as NSString).replacingOccurrences(of: "hi", with: "Hi")

replacedStr = (replacedStr as NSString).replacingOccurrences(of: "hello", with: "Hello")

replacedStr = (replacedStr as NSString).replacingOccurrences(of: "hey", with: "Hey")

print(replacedStr) // Hi Hello Hey 
```

# actionscript-3 - TypeError：AS3 构造函数代码中的错误 #1010

> ID：13432833
> 
> 赞同：2
> 
> 时间：2012-11-17T17:18:54.663
> 
> 标签：actionscript-3, flash, typeerror

`TypeError: Error #1010`当我试图在 AS3 中为一个小游戏创建构造函数代码时，我不断得到。似乎导致问题的代码是：

```
package  {
import flash.display.MovieClip;
import flash.events.MouseEvent;

public class Main extends MovieClip {
    var screen1:StartScreen;
    var screen2:InstructionsScreen;
    var screen3:SelectScreen;
    var screen4:Game1Screen;
    var screen5:Game2Screen;
    var screen6:Game3Screen;
    var screen7:FailScreen;
    var screen8:CompleteScreen;

    public function Main(){
        screen1 = new StartScreen();
        screen2 = new InstructionsScreen();
        screen3 = new SelectScreen();
        screen4 = new Game1Screen();
        screen5 = new Game2Screen();
        screen6 = new Game3Screen();
        screen7 = new FailScreen();
        screen8 = new CompleteScreen();

        screen1.startBtn.addEventListener(MouseEvent.CLICK,gotoSelect);
        screen1.instBtn.addEventListener(MouseEvent.CLICK,gotoInst);
        screen2.startBtn.addEventListener(MouseEvent.CLICK,gotoSelect2);
        screen3.game1Btn.addEventListener(MouseEvent.CLICK,gotoGame1);
        screen3.game2Btn.addEventListener(MouseEvent.CLICK,gotoGame2);
        screen3.game3Btn.addEventListener(MouseEvent.CLICK,gotoGame3);
        screen4.failBtn.addEventListener(MouseEvent.CLICK,gotoFail1);
        screen4.winBtn.addEventListener(MouseEvent.CLICK,gotoWin1);
        screen5.failBtn.addEventListener(MouseEvent.CLICK,gotoFail2);
        screen5.winBtn.addEventListener(MouseEvent.CLICK,gotoWin2);
        screen6.failBtn.addEventListener(MouseEvent.CLICK,gotoFail3);
        screen6.winBtn.addEventListener(MouseEvent.CLICK,gotoWin3);
        addChild(screen1);
    }
    private function gotoSelect(evt:MouseEvent):void{
        removeChild(screen1);
        addChild(screen3);
    }
    private function gotoInst(evt:MouseEvent):void{
        removeChild(screen1);
        addChild(screen2);
    }
    private function gotoSelect2(evt:MouseEvent):void{
        removeChild(screen2);
        addChild(screen3);
    }
    private function gotoGame1(evt:MouseEvent):void{
        removeChild(screen3);
        addChild(screen4);
    }
    private function gotoGame2(evt:MouseEvent):void{
        removeChild(screen3);
        addChild(screen5);
    }
    private function gotoGame3(evt:MouseEvent):void{
        removeChild(screen3);
        addChild(screen6);
    }
    private function gotoFail1(evt:MouseEvent):void{
        removeChild(screen4);
        addChild(screen7);
    }
    private function gotoWin1(evt:MouseEvent):void{
        removeChild(screen4);
        addChild(screen8);
    }
    private function gotoFail2(evt:MouseEvent):void{
        removeChild(screen5);
        addChild(screen7);
    }
    private function gotoWin2(evt:MouseEvent):void{
        removeChild(screen5);
        addChild(screen8);
    }
    private function gotoFail3(evt:MouseEvent):void{
        removeChild(screen6);
        addChild(screen7);
    }
    private function gotoWin3(evt:MouseEvent):void{
        removeChild(screen6);
        addChild(screen8);
    }
}
} 
```

当我尝试运行它时出现的错误消息是：

```
TypeError: Error #1010: A term is undefined and has no properties.
at Main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:31:49.463

我看不出代码本身有什么问题。我猜测其中一个影片剪辑`screen1`没有`screen6`定义命名按钮，或者`StartScreen`etc 类不存在或无法访问。

# jquery - Jquery如何使用他的名字选择输入

> ID：13432836
> 
> 赞同：1
> 
> 时间：2012-11-17T17:19:03.447
> 
> 标签：jquery, jquery-selectors

请给我一个输入文本，我想给它添加一个类：

```
<input type="text" name ="var[1]" /> 
```

我试过这条线但没有成功：

```
$('input[name=var[1]]').addClass('invalidField'); 
```

PS：此输入在标记中不存在，但使用 ajax 显示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:19:52.083

使用引号并确保在 dom 准备好后调用它：

```
$(function(){
    $('input[name="var[1]"]').addClass('invalidField');
}); 
```

仅当值为“简单”时，引号才是可选的。如果它包含括号、空格、大括号等，jQuery 无法获取值的结束位置，无法解析表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:20:21.563

```
$('input[name="var[1]"]').addClass('invalidField'); 
```

你错过了 ””

# java - 如何在 Java 中将 double 类型转换为 int？

> ID：13432845
> 
> 赞同：6
> 
> 时间：2012-11-17T17:20:19.587
> 
> 标签：java

我在看[http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html)

我在尝试

```
 double b = Math.sqrt(absoluteNumber);
    int c = b.intValue(); 
```

但我收到此错误：

```
Factorise.java:13: error: double cannot be dereferenced
int c = b.intValue(); 
```

请帮忙？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-17T17:23:01.993

`double`不是对象，它是原始类型。

简单的写作`(int)b`就可以完成这项工作。

如果你真的需要一个`Double`对象，你需要构造一个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-17T17:22:20.590

`double`是“原始类型”，它没有`intValue()`方法（实际上它没有*任何*方法，因为它是原始类型）。试试[Double](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html)包装类，它有一个`intValue()`方法。

```
Double b = Math.sqrt(absoluteNumber);
int c = b.intValue(); 
```

或者简单地使用铸造：

```
double b = Math.sqrt(absoluteNumber);
int c = (int) b; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T17:21:58.693

您可以简单地转换它：

```
int c = (int)b; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T17:27:06.577

您的类中的特定编译时错误是尝试对声明为原始类型的值调用方法的结果。原始类型不是`Object`s，因此没有属性。因此他们没有任何方法。

您可以将原始`double`值转换为原始`int`值，

```
double b = Math.sqrt(absoluteNumber) ;
int a = (int) b ; 
```

或将其`double`转换为`Double`--- 使用称为*自动装箱*的 Java 功能--- 以便使用该类实现的接口的`intValue`方法：`Number``Double`

```
double b = Math.sqrt(absoluteNumber) ;
int a = ( (Double) b ).intValue( ) ; 
```

另一种方法是使用类的`valueOf`and`intValue`方法`Double`：

```
double b = Math.sqrt(absoluteNumber) ;
int a = ( Double.valueOf(b) ).intValue( ) ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T17:57:38.210

这条简单的线将完成这项工作。

```
integer_var_name = (int) double_var_name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T17:24:43.687

尝试

```
public static void main(String[] args) {
        Double  b = Math.sqrt(43253);
        int c = b.intValue();

        System.out.println("#### S = " + c);

    } 
```

**输出**

```
#### S = 207 
```

# php - 修改自动链接正则表达式

> ID：13432850
> 
> 赞同：1
> 
> 时间：2012-11-17T17:20:49.610
> 
> 标签：php, regex

> **可能重复：**
> [php正则表达式匹配html标签之外](https://stackoverflow.com/questions/7891771/php-regex-to-match-outside-of-html-tags)

我在这里找到了一个不错的功能： [https ://stackoverflow.com/a/1945957](https://stackoverflow.com/a/1945957)

它将文本 URL 转换为正确的链接，但它也匹配标签中的 URL，例如`<img>`. 是否可以修改函数以仅匹配不在引号中的 URL（单引号或双引号）？

谢谢

```
/**
 * Replace links in text with html links
 *
 * @param  string $text
 * @return string
 */
function auto_link_text($text)
{
   $pattern  = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
   $callback = create_function('$matches', '
       $url       = array_shift($matches);
       $url_parts = parse_url($url);

       $text = parse_url($url, PHP_URL_HOST) . parse_url($url, PHP_URL_PATH);
       $text = preg_replace("/^www./", "", $text);

       $last = -(strlen(strrchr($text, "/"))) + 1;
       if ($last < 0) {
           $text = substr($text, 0, $last) . "&hellip;";
       }

       return sprintf(\'<a rel="nofollow" href="%s">%s</a>\', $url, $text);
   ');

   return preg_replace_callback($pattern, $callback, $text);
} 
```

输入：

```
<img src = "http://www.google.com/logo.png" /> http://www.google.com 
```

预期输出：

```
<img src = "http://www.google.com/logo.png" /> <a rel="nofollow" href="http://www.google.com">http://www.google.com</a> 
```

* * *

解决了：

```
#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))(?=[^>]*(<|$))# 
```

# wcf - 手动发布 WCF Web 服务

> ID：13432852
> 
> 赞同：0
> 
> 时间：2012-11-17T17:21:02.020
> 
> 标签：wcf, web-services, iis-7

我有一个工作的 WCF Web 服务。当我使用 F5 运行它时，我得到一个页面，当我单击其上的链接时，我的服务被调用，产生正确的输出。我还设置了 IIS7 服务器并将网站指向名为*c:\web\*的目录。在其中，我有一个名为*Index.html*的文件（带有测试链接的文件）。

除此之外，我有一个 DLL，我知道它是我创建的服务。不过，我不确定如何处理它。我想（手动）设置通过 IIS 提供的服务。稍后我将使用 VS 的自动发布工具，但现在，我想自己做这些脏活。

1.  包含服务的 DLL 去哪里了？
2.  我需要在 IIS 管理器中做什么才能使其工作？

我从昨天开始用谷歌搜索，但我没有变得更聪明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:01:20.870

问题 #1

1.  DLL 进入*bin*文件夹。
2.  *bin*文件夹进入*web.config*所在的同一根目录。
3.  *web.config*转到您使用 IIS 管理器创建的网站的根目录。
4.  有关详细信息，请参阅[此图像](http://4.bp.blogspot.com/-8OhVG3vxbx0/TzOFdgr6IGI/AAAAAAAAADI/j9dByR2tZYc/s1600/P8.png)。

问题2

1.  确保创建一个带有应用程序物理路径的网站。
2.  确保您的服务位于应用程序池中。
3.  确保池以正确的 .NET 框架为目标。
4.  确保绑定设置正确。
5.  可能，请检查您的防火墙是否对这个特定连接不敏感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:59:44.780

对于您的第一个问题 -编译后，Web 服务 DLL 应该位于服务的*bin文件夹中。*

[您可以在此处](http://www.codeproject.com/Articles/311342/Deploying-WCF-and-Silverlight-Applications-on-IIS)找到教程。

此外，可以在[此处](http://msdn.microsoft.com/en-us/vs2010trainingcourse_webservices.aspx)找到 WCF 和 Silverlight 应用程序的演练。

# javascript - 验证复选框造成麻烦

> ID：13432853
> 
> 赞同：0
> 
> 时间：2012-11-17T17:21:07.100
> 
> 标签：javascript, jquery, validation

我正在设置一个注册表单，用户必须接受条件才能提交表单。但是，我还没有找到成功验证复选框的方法。必须检查它，否则用户不能继续，如果它被检查 --> 继续脚本。但是，我的代码没有按我的意愿工作，我正在寻求正确的方法来做到这一点。

```
var Ehdot = $('checkbox[name=ehdot]').is(':checked');
if((Nimi==="")||(ehdot === false)){
if(Ehdot == false){
            alert('Olethan lukenut ehdot ja hyväksyt ne?');
            $('checkbox[name=ehdot]').focus();
            return false;

            }
            return false;
} 
```

关于这个的小提琴：http: [//jsfiddle.net/utWYs/1/](http://jsfiddle.net/utWYs/1/)

*如果有人敢说我为什么不使用验证插件，我会**杀**了一只小猫。![这个就在这里。](../Images/9f03fd3daa594e5db00e3010c34a7798.png)*

*我不想为此使用插件，因为它会使网站变得更重，而且我不会学到任何东西。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:50:10.810

您的代码中的一个小错误。

```
var Ehdot = $('checkbox[name=ehdot]').is(':checked'); 
```

`checkbox`您的 dom中没有命名元素。这将永远返回`false`。

您必须将此行更改为

```
var Ehdot = $('input[name=ehdot]').is(':checked'); 
```

# java - JDBC mysql Wamp

> ID：13432859
> 
> 赞同：0
> 
> 时间：2012-11-17T17:21:32.020
> 
> 标签：java, mysql, jdbc, wamp

我已经下载了 MySQL JDBC 驱动程序。在我的 Eclipsoe 项目中，我修改了构建路径，以便 mysql-connector-java.bin.jar 存在并且我可以从该 jar 调用函数。

从 Eclipse 运行应用程序时，一切都很好，并且与 MySql 数据库建立了正确的连接。

但是，当我在 WampServer 上上传并运行应用程序时，

```
 try {

            Class.forName("com.mysql.jdbc.Driver");

        } catch (ClassNotFoundException e) {

            System.out.println("Where is your MySQL JDBC Driver?");
            e.printStackTrace();
            addItem("Class not found");
            return;

        } 
```

它似乎没有进入 try-catch 的 ClassNotFoundExeption 块。

关于我做错了什么的任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:32:00.357

您在构建路径中有 jar，但您似乎在运行时缺少它。如果是 Web 应用程序，将 mysql jar 添加到 Web 应用程序的 lib 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T09:58:11.963

如果您使用的是 Java Project 而不是 Web 应用程序，则应该为 mysql jar 构建路径。

Java 项目的步骤 1) 右键单击​​您的 java 项目并选择首选项。2）在窗口对话框中单击Java构建路径，然后单击库选项卡。3）现在点击添加外部jar来添加mysql jar。

对于 Web 应用程序，您需要将 jar 放入 lib 目录。

# ruby-on-rails - 为 RGeo 点设置单个坐标

> ID：13432860
> 
> 赞同：7
> 
> 时间：2012-11-17T17:21:39.773
> 
> 标签：ruby-on-rails, geocoding, geospatial, postgis

RGeo 为 POINT 功能提供内置方法，例如 getter 方法`lat()`以及`lon()`从 POINT 对象中提取纬度和经度值。不幸的是，这些不能作为二传手。例如：

```
point = RGeo::Geographic.spherical_factory(:srid => 4326).point(3,5)     // => #<RGeo::Geographic::SphericalPointImpl:0x817e521c "POINT (3.0 5.0)"> 
```

我可以做这个：

```
point.lat      // => 5.0
point.lon      // => 3.0 
```

但我不能这样做：

```
point.lat = 4    // => NoMethodError: undefined method `lat=' for #<RGeo::Geographic::SphericalPointImpl:0x00000104024770> 
```

关于如何实现 setter 方法的任何建议？您会在模型中执行此操作还是扩展要素类？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-27T07:13:28.610

我是 RGeo 的作者，因此您可以在此基础上将此答案视为权威。

简而言之，请避免这样做。RGeo 对象故意没有设置方法，因为它们是不可变对象。这样它们就可以被缓存、用作哈希键、跨线程使用等。一些 RGeo 计算假设特征对象的值永远不会改变，因此进行这样的更改可能会产生意想不到和不可预测的后果。

如果您真的想要一个“更改”的值，请创建一个新对象。例如：

```
p1 = my_create_a_point()
p2 = p1.factory.point(p1.lon + 20.0, p2.lat) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:29:26.583

我发现了一些可行的方法，尽管可能有更优雅的解决方案。

在我的`Location`模型中，我添加了这些方法：

```
 after_initialize :init

  def init
    self.latlon ||= Location.rgeo_factory_for_column(:latlon).point(0, 0)
  end

  def latitude
    self.latlon.lat
  end

  def latitude=(value)
    lon = self.latlon.lon
    self.latlon = Location.rgeo_factory_for_column(:latlon).point(lon, value)
  end

  def longitude
    self.latlon.lon
  end

  def longitude=(value)
    lat = self.latlon.lat
    self.latlon = Location.rgeo_factory_for_column(:latlon).point(value, lat)
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T22:22:53.700

我最终在我的模型中做了这样的事情：

```
class MyModel < ActiveRecord::Base

  attr_accessor :longitude, :latitude
  attr_accessible :longitude, :latitude

  validates :longitude, numericality: { greater_than_or_equal_to: -180, less_than_or_equal_to: 180 }, allow_blank: true
  validates :latitude, numericality: { greater_than_or_equal_to: -90, less_than_or_equal_to: 90 }, allow_blank: true

  before_save :update_gps_location

  def update_gps_location
    if longitude.present? || latitude.present?
      long = longitude || self.gps_location.longitude
      lat = latitude || self.gps_location.latitude
      self.gps_location = RGeo::Geographic.spherical_factory(srid: 4326).point(long, lat)
    end
  end
end 
```

然后你可以像这样更新位置：

```
my_model.update_attributes(longitude: -122, latitude: 37) 
```

我没有在 after_initialize 块中加载经度/纬度，因为在我的应用程序中，我们永远不需要读取数据，只需写入即可。你可以很容易地添加它。

归功于[此答案](https://stackoverflow.com/questions/14815440/validate-geolocation-latitude-and-longitude)的验证。

# php - 将收音机表格插入mysql

> ID：13432861
> 
> 赞同：0
> 
> 时间：2012-11-17T17:21:39.517
> 
> 标签：php, javascript, jquery, html, mysql

有人可以帮助我通过 ajax 将无线电表单结果插入 mysql 吗？我尝试了一些东西，但它根本不起作用。

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head> 
 <script src='jquery.js' type="text/javascript"></script>
 <script src='documentation/documentation.js' type="text/javascript"></script>
 <link href='documentation/documentation.css' type="text/css" rel="stylesheet"/>
 <script type="text/javaScript" src="documentation/chili/jquery.chili-2.0.js"></script> 
 <script type="text/javascript">try{ChiliBook.recipeFolder="documentation/chili/"}catch(e){}</script>
 <script src='jquery.MetaData.js' type="text/javascript" language="javascript"></script>
 <script src='jquery.rating.js' type="text/javascript" language="javascript"></script>
 <link href='jquery.rating.css' type="text/css" rel="stylesheet"/>
</head>
<body>
<div id="tab-Testing">
<script>
$('#form1').submit(function() {
 var ans=$(this).serialize();
  $.ajax({
  type: "POST",
   url: "starsubmit.php",
  data:{data:ans}
 }).done(function( msg ) {
 alert( "Data Saved: " + msg );
 });
 return false;
});
</script>

<div class="Clear">&nbsp;</div>
<form id="form1" ">

        Question 1:bla bla bla

   <input class="star required" type="radio" name="Question 1" value="1"/>
    <input class="star" type="radio" name="Question 1" value="2"/>
    <input class="star" type="radio" name="Question 1" value="3"/>
    <input class="star" type="radio" name="Question 1" value="4"/>
    <input class="star" type="radio" name="Question 1" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 2:bla bla bla

    <input class="star required" type="radio" name="Question 2" value="1"/>
    <input class="star" type="radio" name="Question 2" value="2"/>
    <input class="star" type="radio" name="Question 2" value="3"/>
    <input class="star" type="radio" name="Question 2" value="4"/>
    <input class="star" type="radio" name="Question 2" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 3:bla bla bla

    <input class="star required" type="radio" name="Question 3" value="1"/>
    <input class="star" type="radio" name="Question 3" value="2"/>
    <input class="star" type="radio" name="Question 3" value="3"/>
    <input class="star" type="radio" name="Question 3" value="4"/>
    <input class="star" type="radio" name="Question 3" value="5"/>
   </div>
 <br>
   <div class="Clear">

        Question 4:bla bla bla

    <input class="star required" type="radio" name="Question 4" value="1" />
    <input class="star" type="radio" name="Question 4" value="2" />
    <input class="star" type="radio" name="Question 4" value="3" />
    <input class="star" type="radio" name="Question 4" value="4" />
    <input class="star" type="radio" name="Question 4" value="5" />
   </div>
   <br/>
   <div class="Clear">

        Question 5:bla bla bla

    <input class="star required" type="radio" name="Question 5" value="1"/>
    <input class="star" type="radio" name="Question 5" value="2"/>
    <input class="star" type="radio" name="Question 5" value="3"/>
    <input class="star" type="radio" name="Question 5" value="4"/>
    <input class="star" type="radio" name="Question 5" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 6:bla bla bla

    <input class="star required" type="radio" name="Question 6" value="1" />
    <input class="star" type="radio" name="Question 6" value="2" />
    <input class="star" type="radio" name="Question 6" value="3" />
    <input class="star" type="radio" name="Question 6" value="4" />
    <input class="star" type="radio" name="Question 6" value="5" />
   </div>

   <input type="submit" value="Submit scores!" />  </td>

</form>
</body>
</html> 
```

这就是我尝试的方式：

```
$('#form').submit(function() {
 var ans=$(this).serialize();
  $.ajax({
  type: "POST",
   url: "starsubmit.php",
  data:ans
 }).done(function( msg ) {
 alert( "Data Saved: " + msg );
 });
 return false;
}); 
```

和PHP：

```
<?php
include("db.php");
if($_SERVER["REQUEST_METHOD"] == "POST")
{
$question1 = mysql_real_escape_string($_POST['Question1']);
$question2 = mysql_real_escape_string($_POST['Question2']);
$question3 = mysql_real_escape_string($_POST['Question3']);
$question4 = mysql_real_escape_string($_POST['Question4']);
$question5 = mysql_real_escape_string($_POST['Question5']);
$question6 = mysql_real_escape_string($_POST['Question6']);

mysql_query("INSERT INTO answers (q1,q2,q3,q4,q5,q6) VALUES ('$question1','$question2','$question3','$question4','$question5','$question6')");
echo "<h1>Thank You !</h1>";
}

?> 
```

结果在浏览器的地址栏中可见，并且在提交时它们没有插入到mysql中，所以我认为问题出在ajax ..我不知道。

如果你有，请给我一个如何将带有单选按钮的表单插入 mysql 的示例。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:43:48.683

你需要记住：radiolist 只返回一个值。选中时也与复选框返回值相同。并且您必须在检查 $_POST、$_GET、$_REQUEST 之前设置此变量为 false

```
$q = array();
for ($i = 1; $i <= 6; $i++) {
  $q[$i] = isset($_POST['Question '+$i]) ? mysql_real_escape_string($_POST['Question'+$i]) : 0;
}
mysql_query("INSERT INTO answers (q1,q2,q3,q4,q5,q6) VALUES ('$q[1]','$q[2]','$q[3]','$q[4]','$q[5]','$q[6]')"); 
```

# r - 确定R中的嵌套级别？

> ID：13432863
> 
> 赞同：21
> 
> 时间：2012-11-17T17:21:44.343
> 
> 标签：r, list, nested

是否有一种简单的方法（即函数）来确定列表中的嵌套级别？我知道有`str`哪些可以用来获取这些信息。但是有什么东西可以简单地返回结果吗？我可以使用这样的函数来获取所有级别的 alist 的名称（递归）吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-17T18:52:35.333

一个小递归函数可以为你做到这一点：

```
depth <- function(this,thisdepth=0){
  if(!is.list(this)){
    return(thisdepth)
  }else{
    return(max(unlist(lapply(this,depth,thisdepth=thisdepth+1))))    
  }
} 
```

如果你有`package:testthat`，这里有一个测试集：

```
l1=list(1,2,3)
l2=list(1,2,l1,4)
l3=list(1,l1,l2,5)

require(testthat)
expect_equal(depth(l1),1)
expect_equal(depth(l2),2)
expect_equal(depth(l3),3) 
```

很抱歉在变量名中使用小写 L。可读性失败。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-24T15:58:56.657

您现在可以`depth()`从`purrr`包装中使用！

**注意：**目前该功能是开发版本的一部分，`purrr`但一旦包获得版本凹凸，它将成为官方 CRAN 版本的一部分

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T17:37:19.080

如果所有元素都已命名，则可以使用它（来自 的代码`unlist`）：

```
mylist <- list(a=list(x=1),b=list(c=list(y=c(2,3)),d=c("a","b")))
names(.Internal(unlist(mylist, TRUE, TRUE)))
#[1] "a.x"    "b.c.y1" "b.c.y2" "b.d1"   "b.d2" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-27T12:23:12.390

`rrapply()`在-package 中使用的另一种方法`rrapply`（ base 的扩展`rapply()`）：

```
library(rrapply)

l1 <- list(1, 2, 3)
l2 <- list(1, 2, l1, 4)
l3 <- list(1, l1, l2, 5)

max(rrapply(l1, f = function(x, .xpos) length(.xpos), how = "unlist"))
#> [1] 1
max(rrapply(l2, f = function(x, .xpos) length(.xpos), how = "unlist"))
#> [1] 2
max(rrapply(l3, f = function(x, .xpos) length(.xpos), how = "unlist"))
#> [1] 3 
```

# iis-express - IIS Express 是否支持网络花园模型？

> ID：13432882
> 
> 赞同：4
> 
> 时间：2012-11-17T17:23:23.177
> 
> 标签：iis-express

我使用 IIS express 在本地开发并始终对我的应用程序进行性能/负载测试，但我最近遇到了一些场景，特别是在发布到 Windows Azure 时，由于多个服务器导致的争用问题根本无法在本地模拟。我知道 IIS 支持网络花园模型，其中多个工作进程用于服务请求并更有效地利用多个处理器内核。IIS express 是否支持相同的设置？如果是这样，我在哪里配置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-18T10:29:36.503

It does not. Web garden and other application pool related features rely on Windows Process Activation Service and other IIS underlying mechanism which are not available for IIS Express.

# ios - JSON 在 iOS 上无法按预期工作

> ID：13432883
> 
> 赞同：1
> 
> 时间：2012-11-17T17:23:26.710
> 
> 标签：ios, json, cocoa-touch, nsarray

我目前正在尝试解析这个 JSON

```
[{"id":"1","dish_name":"Pasta & ketchup","category":"main","rating":"5","rating_count":null,"author":"Me","ingredients":"Pasta\nKetchup\nWater","description":"Very good for students\nCheap too!","picture":null,"protein":"7","fat":"11","carbs":"12","calories":"244","developer_lock":"1"},{"id":"2","dish_name":"Pasta & Kødsovs","category":"main","rating":"5","rating_count":null,"author":"Me","ingredients":"Pasta\nKødsovs\nWater","description":"Very good for students\nCheap too!","picture":null,"protein":"7","fat":"11","carbs":"12","calories":"244","developer_lock":"1"}] 
```

但它失败并与此代码崩溃

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [connection release];
    NSError *error = NULL;

    NSDictionary* json = [NSJSONSerialization
                      JSONObjectWithData:responseData
                      options:kNilOptions
                      error:&error];
    recipes = [[NSArray alloc] initWithArray:[json objectForKey:@"dish_name"]];
    [uit reloadData];
} 
```

有人有任何线索，为什么它会因错误而崩溃`-[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x8077240` ？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:34:33.960

以开头的错误消息`[__NSCFArray objectForKey:]`意味着您有一个 NSArray（JSON 的根对象是一个数组 - 请注意方括号的开始和结束），并且您正试图将其视为字典。总而言之，

```
recipes = [[NSArray alloc] initWithObject:[json objectForKey:@"dish_name"]]; 
```

应该

```
recipes = [[NSArray alloc] initWithObject:[[json objectAtIndex:0] objectForKey:@"dish_name"]]; 
```

请注意，数组中有两个对象，因此您可能也想使用`[json objectAtIndex:1]`。

**编辑：**如果你有动态数量的食谱，你可以这样做：

```
recipes = [[NSMutableArray alloc] init];
for (NSDictionary *dict in json) {
    [recipes addObject:[dict objectForKey:@"dish_name"]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:28:46.457

如果你的`json`NSDictionary 是一个真实有效的 NSDictionary 对象，你调用这个：

```
[json objectForKey:@"dish_name"] 
```

应该返回这个：

```
"Pasta & ketchup" 
```

这*绝对*不是一个数组。它是一个 NSString 对象。

这就是为什么对“ `initWithArray`”的调用是轰炸的原因。

# java - 如何从字符串中搜索特定字符并查找它出现的次数

> ID：13432890
> 
> 赞同：-4
> 
> 时间：2012-11-17T17:24:13.113
> 
> 标签：java

将以下句子存储在 String 中

```
“JAVA IS TOUGH LANGUAGE" 
```

我想要求用户提供一个字符作为输入，然后在上面的句子中打印该字符的出现总数。此外，如果用户想要搜索字符串中的特定短语或字符，他/她应该能够搜索它。

请告诉我初学者的简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:49:27.327

```
 String s ="JAVA IS TOUGH LANGUAGE";
       char c ='A'; //character c is static...can be modified to accept user input
    int cnt =0;
    for(int i=0;i<s.length();i++)
        if(s.charAt(i)==c)
            cnt++;
    System.out.println("No of Occurences of character "+c+"is"+cnt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:50:05.150

计算可以在一行中完成：

```
String sentence ="JAVA IS TOUGH LANGUAGE";
String letter = "x"; // user input

int occurs = sentence.replaceAll("[^" + letter + "]", "").length(); 
```

这通过用空白（有效地删除它）替换*不是*字母的每个字符（使用正则表达式`[^x]`），然后查看剩下的长度来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T18:09:03.777

此版本用户将传入他们希望搜索的字符。因此，例如，他们会从命令行调用程序，如下所示：

```
java TestClass A 
```

这将在字符串中搜索“A”。

```
public class TestClass {
  static String searchString = "JAVA IS TOUGH LANGUAGE";
  static public void main(String[] args) {
    int answer = 0;
    if(args.length > 0){
        char searchChar = args[0].charAt(0);
        for (int i = 0; i < searchString.length(); i++){
            if (searchString.charAt(i) == searchChar){
                answer += 1;
            }
        }
    }
    System.out.println("Number of occurences of " + args[0] + " is " + answer);
  }
} 
```

# r - 使用匿名函数的 R 流水线

> ID：13432894
> 
> 赞同：2
> 
> 时间：2012-11-17T17:24:22.310
> 
> 标签：r, pipeline

我有一个问题是[另一个问题](https://stackoverflow.com/questions/13354048/r-pipelining-functions)的延伸。

我希望能够管道匿名函数。在上一个问题中，管道定义函数的答案是创建一个管道运算符 "%|>%" 并以这种方式定义它：

```
"%|>%" <- function(fun1, fun2){
              function(x){fun2(fun1(x))}
} 
```

这将允许您调用一系列函数，同时不断地将前一个函数的结果传递给下一个函数。需要注意的是要预定义的功能。现在我试图弄清楚如何使用匿名函数来做到这一点。之前使用预定义函数的解决方案如下所示：

```
square <- function(x){x^2}
add5 <- function(x){x + 5}

pipelineTest <-
  square %|>%
  add5 
```

这给了你这种行为：

```
> pipelineTest(1:10)
 [1]   6   9  14  21  30  41  54  69  86 105 
```

我希望能够`pipelineTest`用这样的匿名函数定义函数：

```
anonymousPipelineTest <-
  function(x){x^2} %|>%
  function(x){x+5} %|>%
  x 
```

当我尝试使用与上述相同的参数调用它时，我得到以下信息：

```
> anonymousPipelineTest(1:10)
function(x){fun2(fun1(x))}
<environment: 0x000000000ba1c468> 
```

我希望得到的结果与`pipelineTest(1:10)`. 我知道这是一个微不足道的例子。我真正想要的是一种管道匿名函数的方法。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:52:38.553

使用 Compose 并调用结果函数会给出：

```
"%|>%" <- function(...) Compose(...)() 
```

现在摆脱'x'作为最终的“功能”（替换为实际功能，这不是必需的，但例如在这里）：

```
anonymousPipelineTest <-
     function(x){x^2} %|>%
     function(x){x+5} %|>% function(x){x}
anonymousPipelineTest(1:10)

[1]   6   9  14  21  30  41  54  69  86 105 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:23:37.783

`?funprog`这是帮助页面上提供的示例的应用程序：

```
Funcall <- function(f, ...) f(...)
anonymousPipelineTest <- function(x) Reduce( Funcall, list(
    function(x){x+5}, function(x){x^2}), 
    x, right=TRUE)
 anonymousPipelineTest(1:10)
 #[1]   6   9  14  21  30  41  54  69  86 105 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:17:55.903

我正在提出一个答案，这是我为寻找相同事物的其他人找到的最接近的答案。不过，我不会给自己点答案，因为这不是我想要的。

**返回一个函数：** 如果你想把几个函数放在一起，我发现最简单的方法是使用 R 的“Functional”包中的“Compose”函数。它看起来像这样：

```
anonymousPipe <- Compose(
  function(x){x^2},
  function(x){x+5}) 
```

这允许您像这样调用这一系列函数：

```
> anonymousPipe(1:10)
 [1]   6   9  14  21  30  41  54  69  86 105 
```

**返回数据：** 如果您只想从一些数据开始并通过一系列转换（我的初衷）将其发送，那么“撰写”函数中的第一个函数应该是您的起始数据，并且在“撰写”结束之后' 函数添加一个括号对来调用该函数。它看起来像这样：

```
anonymousPipeData <- Compose(
  seq(1:10),
  function(x){x^2},
  function(x){x+5})() 
```

' `anonymousPipeData`' 现在是一系列函数的结果数据。请注意末尾的一对括号。这就是导致 R 返回数据而不是函数的原因。

# java - 在 GAE 项目中使用 GWT 日历

> ID：13432895
> 
> 赞同：0
> 
> 时间：2012-11-17T17:24:24.960
> 
> 标签：java, eclipse, google-app-engine, gwt

我正在从事 gae 项目/我有一个处理数据并将其存储在 JDO 中的 servlet。现在我想用 ui 添加新页面。主要的 ui 元素是日历。最简单的方法是什么？使用 servlet、gwt、java 日历或什么？

谢谢你，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:34:45.660

这个问题有点模糊，您需要指定最简单的意思。

如果您已经设置了 GWT，那么在 GWT 中构建它会很容易，如果您想坚持使用普通的 servlet，那么设置一个带有日历的 JSP 页面相当简单。

在 JSP 案例中，您可以使用 java.util.Calendar 来构建您的日历，在 GWT 中您可能需要查看 com.google.gwt.user.datepicker.client.CalendarUtil。

# android - ViewPager 中的 WebViews 随机加载页面

> ID：13432896
> 
> 赞同：0
> 
> 时间：2012-11-17T17:24:27.740
> 
> 标签：android, webview, android-viewpager

我从[这里](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)获取了 viewPager 示例 ，它与 listViews 一起工作正常。

我对其进行了一些更改以使用 webviews。

我删除了 listView 方法，并将类更改为“扩展片段”，并在片段布局中添加了一个 webview，这是我加载 url 的地方

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    ((WebView)getActivity().findViewById(R.id.webView1)).loadUrl(imgURL);
} 
```

当我滑动到新片段但图像加载到随机片段上时，会调用这些方法。它加载在一个片段上，您需要滑动到其他片段，直到它随机加载到另一个片段上，但它永远不会出现在两个片段上。

我假设它是因为 ArrayListFragment 是静态的，所以我试图使其不是静态的并在 getItem 方法中创建新对象，但它导致了相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:46:26.837

显然 getActivity() 是罪魁祸首，我解决了加载

```
WebView wv = (WebView)v.findViewById(R.id.webView1);
wv.loadUrl(...); 
```

int onCreateView() 方法。

# java - 快速排序：这个实现有什么问题

> ID：13432899
> 
> 赞同：0
> 
> 时间：2012-11-17T17:24:45.683
> 
> 标签：java, quicksort

你能解释一下这个在java中实现的快速排序算法有什么问题吗？

```
static ArrayList<Integer> quickSort(ArrayList<Integer> array){

    if (array.size() <=1){
        ArrayList<Integer> a = new ArrayList<Integer>();

        return a;
    }

    int pivotIndex = array.size() / 2;

    int pivot = array.get(pivotIndex);
    ArrayList<Integer> left= new ArrayList<Integer>();
    ArrayList<Integer> right = new ArrayList<Integer>();

    for (int i = 0; i < array.size(); i++) {
        if (i!=pivotIndex){
        if (array.get(i) > pivot)
            right.add(array.get(i));
        else
            left.add(array.get(i));
        }

    }
    ArrayList<Integer> l = new ArrayList<Integer>();
    l.addAll(quickSort(left));
     l.add(pivot);
     l.addAll(quickSort(right)); 

    return l;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:40:06.163

代替

```
if (array.size() <=1) {
    ArrayList<Integer> a = new ArrayList<Integer>();

    return a;
} 
```

利用

```
 if (array.size() <=1){
   return array
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T17:26:55.790

一个明显的错误是未正确处理大小为 1 的数组。正确处理这一点很重要，因为这是递归的基本情况之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T17:49:10.120

该算法的主要问题 - 您正在为函数的每次调用创建新的 ArrayLists。通过这种方式，您可以取消快速排序的最佳功能 - 无需任何额外内存即可就地排序。尝试只使用第一个给定的**数组**。

# javascript - 每次调用对象属性时从函数返回一个值

> ID：13432902
> 
> 赞同：2
> 
> 时间：2012-11-17T17:24:57.390
> 
> 标签：javascript, prototype

我在javascript中有一个人为的例子来解释我想要做什么：

我有一个对象：

```
var Item = {
  _first = undefined,
  _second = undefined,
  whole = putTogether()
};

function putTogether() {
  if (_first && _second) 
    return _first + '_' + _second;

  return '{ Invalid Values }';
} 
```

我试图能够`Item.whole`作为财产访问。有没有一种方法可以做到这一点，以便在`putTogether`每次访问它时进行评估，而不是在创建对象时进行评估？

我知道我可以为 定义一个匿名函数`Item.whole`，但我特别想构造它，以便它可以作为值而不是函数来引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:28:00.933

这叫做吸气剂。是的，有可能：

```
var Item = {
  _first: undefined,
  _second: undefined
};
function putTogether() {
  if (this._first && this._second) 
    return this._first + '_' + this._second;
  return '{ Invalid Values }';
}

Object.defineProperty(Item, 'whole', {
    get: putTogether
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:32:05.713

你可以这样做：

```
var Item = {
    _first : undefined,
    _second : undefined
};

Object.defineProperty(Item, "whole", {
    get : function(){
        if (this._first && this._second)  return this._first + '_' + this._second;
        return '{ Invalid Values }';
    },
});

console.log(Item.whole); // prints  { Invalid Values }
Item._first = "a";
Item._second = "b";
console.log(Item.whole); // prints a_b 
```

[示范](http://jsfiddle.net/X8Nur/)

[​defineProperty 的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)MDN

# java - 在 for 循环中等待输入的最佳方法？

> ID：13432903
> 
> 赞同：1
> 
> 时间：2012-11-17T17:24:57.923
> 
> 标签：java, dialog, javafx-2

在 JavaFX 2 中，我通过读取 Excel 文件填充了 TableView。它看起来像这样：

```
identification    cellcount    calved
o0001             12345        false
o0002             65432        true
o0003             55555        false
... 
```

当用户按下“导入”按钮时，所有记录都必须添加到数据库中。但是，如果“产犊”字段的值为“真”，我会显示一个对话框窗口，用户必须在其中选择一个日期来指定产犊发生的时间。现在最大的问题是我希望我的 for 循环在对话框窗口打开后立即暂停。使用我当前的代码，所有对话框窗口都堆叠在一起。

这是加载 FXML 的 Dialog 方法：

```
public void showDialog(String sURL){
    final Stage myDialog = new Stage();
    myDialog.initStyle(StageStyle.UTILITY);
    myDialog.initModality(Modality.APPLICATION_MODAL);

    URL url = getClass().getResource(sURL);

    FXMLLoader fxmlloader = new FXMLLoader();
    fxmlloader.setLocation(url);
    fxmlloader.setBuilderFactory(new JavaFXBuilderFactory());
    try {
        Node n = (Node) fxmlloader.load(url.openStream());

        Scene myDialogScene = new Scene(VBoxBuilder.create().children(n).alignment(Pos.CENTER).padding(new Insets(0)).build());

        myDialog.setScene(myDialogScene);
        myDialog.show();
    } catch (Exception ex) {
        System.out.println(ex);
    }
} 
```

这是我处理 tablerows 的 for 循环：

```
@FXML
private void handle_ImportCowDataButton(ActionEvent event) {
    Cows selectedCow;

    for(ImportRow row: tblImport.getItems()){
        selectedCow = null;

        for (Cows cow : olCows) {
            if (cow.getOfficial().equals(row.getCownumber())) {
                selectedCow = cow;
            }
        }

        if (selectedCow != null) {
            if (row.getCalving()) {
                //if cow exists and cow has calved, show dialog window loading addcalving.fxml
                //then the for loop should wait until that dialog window is closed before continuing
                Context.getInstance().setPassthroughObject(selectedCow);
                Context.getInstance().showDialog("/GUI/calving/AddCalving.fxml");
            }
        } else {
            //if cow does not exist, show dialog window loading addcow.fxml
            //then the for loop should wait until that dialog window is closed before continuing
            Context.getInstance().setPassthroughObject(selectedFarmer);
            Context.getInstance().showDialog("/GUI/cow/AddCow.fxml");
        }
    }
} 
```

在`setOnCloseRequest()`我的`showDialog()`方法中使用是一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:50:24.597

如果您将奶牛列表复制到另一个数据结构（例如队列）中，并在处理每头奶牛时删除它，那么恢复处理它相对容易，因为只剩下需要处理的奶牛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:20:39.927

似乎答案比我想的要容易得多，只需使用`showAndWait()`方法而不是`show()`. 我怎么会错过...谢谢你的帮助。

方法的最终代码`showDialog()`：

```
public void showDialog(String sURL){
    final Stage myDialog = new Stage();
    myDialog.initStyle(StageStyle.UTILITY);
    myDialog.initModality(Modality.APPLICATION_MODAL);

    URL url = getClass().getResource(sURL);

    FXMLLoader fxmlloader = new FXMLLoader();
    fxmlloader.setLocation(url);
    fxmlloader.setBuilderFactory(new JavaFXBuilderFactory());
    try {
        Node n = (Node) fxmlloader.load(url.openStream());

        Scene myDialogScene = new Scene(VBoxBuilder.create().children(n).alignment(Pos.CENTER).padding(new Insets(0)).build());

        myDialog.setScene(myDialogScene);
        myDialog.showAndWait();
    } catch (Exception ex) {
        System.out.println(ex);
    }
} 
```

# eclipse-plugin - 用于播放 2 的 Eclipse 插件

> ID：13432907
> 
> 赞同：0
> 
> 时间：2012-11-17T17:25:26.140
> 
> 标签：eclipse-plugin, playframework, playframework-2.0

我是 Play2 框架和 Scala 的初学者。

是否有可用的 eclipse play 2 插件？

如果是，那么请向我提供相同的链接。我习惯了 Eclipse，以前从未使用过 Scala；因此对如何以及从何处开始感到困惑。查看 Play2 Doc，感觉就像在命令提示符 IDE 中工作，这非常困难（尽管我已经尝试过）

请让我知道 Play2 的 eclipse 插件或其他对此有帮助的 IDE。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:29:00.757

Eclipse 没有这样的插件。

玩！框架有一套很好的工具来完成以下任务

*   创建新的游戏项目
*   运行项目
*   应用程序的部署
*   做连续测试模式等

相信我，一旦你开始使用它，你就会爱上它。

除了你不需要任何 Scala 经验之外，对于 Play 框架，你可以使用 Java 语言，如果你喜欢它（你可以在创建新的 Play 项目时选择 Java 模板），也可以使用 IDE 进行语法高亮，代码完成ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T13:07:45.620

我对使用 Eclipse 和 Scala 插件的 Play 开发进行了简短的尝试。我个人觉得它很尴尬，而且不是很有帮助。（例如，IDE 报告的错误与 Play 编译器报告的错误并不总是相同。）

使用带有 Scala 插件的 Intellij IDEA IDE，我获得了更多乐趣。与 Eclipse 一样，IDEA 的当前版本没有对 Play Framework 2 的特定支持，但它对 Scala 有特定的支持。

Intellij IDEA 的下一个版本 v12*将*明确支持 Play Framework 2： http: [//www.jetbrains.com/idea/nextversion/index.html#Frameworks_Support](http://www.jetbrains.com/idea/nextversion/index.html#Frameworks_Support)（但仅限于付费的“终极”版，不在免费的“社区”版中）。

# php - 如何在php程序中检测字符串上的空格

> ID：13432914
> 
> 赞同：0
> 
> 时间：2012-11-17T17:25:59.097
> 
> 标签：php, string, whitespace, detect

我想对两个字符串进行处理，我必须知道是否有空格可以停止我的处理并继续我测试的其余字符，但这并不能解决问题：

```
 for ($i = 0; $i < $lenght; $i++) {

                    if($text[$i] <> '' && $mask[$i] <> ''){

                        $nbrcrypted = $stringtonumber[$text[$i]] + $stringtonumber[$mask[$i]];
                        $resultat .= $numbertostring[$nbrcrypted];
                    }else{

                        $indice = false;
                    }                    
                } 
```

我怎样才能做到这一点，提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:28:26.810

`if($text[$i] <> '' && $mask[$i] <> ''){`没用，`if($text[$i] !== ' ' && $mask[$i] !== ' '){`用于空格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:29:04.607

我不明白你实际上想要做什么，但如果你想测试你的字符串是否有空格：

```
if ( strpos( $yourString, ' ' ) !== false )
    null; // string has whitespace(s) 
```

# delphi - 如何阻止 TJvSearchFiles 递归连接？

> ID：13432916
> 
> 赞同：2
> 
> 时间：2012-11-17T17:26:17.647
> 
> 标签：delphi, search, jedi

我正在使用这个 JEDI 组件来枚举文件，但我无法让它跳过连接点。是否可以对代码进行设置或修改来解决此问题？

我不是 100% 确定 jvsearchfiles.pas 单元中的相关代码。但我认为它是在这里：

```
function TJvSearchFiles.EnumFiles(const ADirectoryName: string;
  Dirs: TStrings; const Search: Boolean): Boolean;
var
  Handle: THandle;
  Finished: Boolean;
  DirOK: Boolean;
begin
  DoBeginScanDir(ADirectoryName);

  { Always scan the full directory - ie use * as mask - this seems faster
    then first using a mask, and then scanning the directory for subdirs }
  Handle := FindFirstFile(PChar(ADirectoryName + '*'), FFindData);
  Result := Handle <> INVALID_HANDLE_VALUE;
  if not Result then
  begin
    Result := GetLastError in [ERROR_FILE_NOT_FOUND, ERROR_ACCESS_DENIED];;
    Exit;
  end;

  Finished := False;
  try
    while not Finished do
    begin
      // (p3) no need to bring in the Forms unit for this:
      if not IsConsole then
        DoProgress;
      { After DoProgress, the user can have called Abort,
        so check it }
      if FAborting then
      begin
        Result := False;
        Exit;
      end;

      with FFindData do
        { Is it a directory? }
        if (dwFileAttributes and FILE_ATTRIBUTE_DIRECTORY > 0) then
        begin
          { Filter out '.' and '..'
            Other dir names can't begin with a '.' }

          {                         | Event | AddDir | SearchInDir
           -----------------------------------------------------------------
            doExcludeSubDirs        |
              True                  |   Y       N           N
              False                 |   N       N           N
            doIncludeSubDirs        |
              True                  |   Y       Y           Y
              False                 |   N       Y           Y
            doExcludeInvalidDirs    |
              True                  |   Y       Y           Y
              False                 |   N       Y           N
            doExcludeCompleteInvalidDirs |
              True                  |   Y       Y           Y
              False                 |   N       N           N
          }
          if not IsDotOrDotDot(cFileName) and
            ((soIncludeSystemHiddenDirs in Options) or not IsSystemAndHidden(FFindData)) then
            { Use case to prevent unnecessary calls to DoCheckDir }
            case DirOption of
              doExcludeSubDirs, doIncludeSubDirs:
                begin
                  if Search and (soSearchDirs in Options) and DoCheckDir then
                    DoFindDir(ADirectoryName);
                  if DirOption = doIncludeSubDirs then
                    Dirs.AddObject(cFileName, TObject(True))
                end;
              doExcludeInvalidDirs, doExcludeCompleteInvalidDirs:
                begin
                  DirOK := DoCheckDir;
                  if Search and (soSearchDirs in Options) and DirOK then
                    DoFindDir(ADirectoryName);

                  if (DirOption = doExcludeInvalidDirs) or DirOK then
                    Dirs.AddObject(cFileName, TObject(DirOK));
                end;
            end;
        end
        else
        if Search and (soSearchFiles in Options) and DoCheckFile then
          DoFindFile(ADirectoryName);

      if not FindNextFile(Handle, FFindData) then
      begin
        Finished := True;
        Result := GetLastError = ERROR_NO_MORE_FILES;
      end;
    end;
  finally
    Result := FindClose(Handle) and Result;
  end;
end; 
```

这是上一个问题中给出的功能，但我无法让它工作。

```
function IsJunction(const FileName: string): Boolean;
const
  IO_REPARSE_TAG_MOUNT_POINT = $0A0000003;
var
  FindHandle: THandle;
  FindData: TWin32FindData;
begin
  Result := False;
  FindHandle := FindFirstFile(PChar(FileName), FindData);
  if FindHandle <> INVALID_HANDLE_VALUE then begin
    Result := ((FindData.dwFileAttributes and FILE_ATTRIBUTE_REPARSE_POINT)
                = FILE_ATTRIBUTE_REPARSE_POINT) and
                ((FindData.dwReserved0 and IO_REPARSE_TAG_MOUNT_POINT)
                = IO_REPARSE_TAG_MOUNT_POINT);
    winapi.windows.FindClose(FindHandle);
  end else
    RaiseLastOSError;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:14:18.003

您正在查看的函数已经有一个跳过目录的点：

```
if not IsDotOrDotDot(cFileName) and
   ((soIncludeSystemHiddenDirs in Options) or not IsSystemAndHidden(FFindData)) then 
```

所以你可以简单地扩展这个条件。但是，我不会通过添加另一个`and`子句来扩展它。我个人认为`if`这样的陈述非常不透明。我将引入一个解释变量：

```
var
  SkipDirectory: Boolean; 
```

然后像这样分配它：

```
if IsDotOrDotDot(cFileName) then
  SkipDirectory := True
else if IsSystemAndHidden(FFindData) and not (soIncludeSystemHiddenDirs in Options) then
  SkipDirectory := True
else if IsJunction(FFindData) then
  SkipDirectory := True
else
  SkipDirectory := False;

if not SkipDirectory then
  .... 
```

然后您需要重新工作`IsJunction`以接收`TWin32FindData`参数：

```
function IsJunction(const FindData: TWin32FindData): Boolean;
const
  IO_REPARSE_TAG_MOUNT_POINT = $0A0000003;
begin
  Result := ((FindData.dwFileAttributes and FILE_ATTRIBUTE_REPARSE_POINT)
              = FILE_ATTRIBUTE_REPARSE_POINT) and
              (FindData.dwReserved0 = IO_REPARSE_TAG_MOUNT_POINT);
end; 
```

尽管我可能会重新编写@Sertac 的 if 语句以进一步分解它。但也许这只是我个人的喜好。

```
function FlagIsSet(Flags, Flag: DWORD): Boolean;
begin
  Result := (Flags and Flag)<>0;
end;

function IsJunction(const FindData: TWin32FindData): Boolean;
const
  IO_REPARSE_TAG_MOUNT_POINT = $0A0000003;
begin
  Result := FlagIsSet(FindData.dwFileAttributes, FILE_ATTRIBUTE_REPARSE_POINT)
            and (FindData.dwReserved0=IO_REPARSE_TAG_MOUNT_POINT);
end; 
```

# android - 拉动刷新 (ChrisBanes) - 刷新后保存和恢复位置

> ID：13432917
> 
> 赞同：0
> 
> 时间：2012-11-17T17:26:29.813
> 
> 标签：android, listview, position

我正在使用 Chris Banes 的惊人的库拉刷新。

一切正常。但是列表视图没有方法 onSaveInstanceState onRestoreInstanceState

因此，我不知道如何去加载元素的新位置。

有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:52:23.700

最后，我在类的代码中看到了 Chris 提供了该方法：

获取可刷新视图

这可以访问信封内的对象。

其作品！;)

# algorithm - 确定用户可以在地图上到达的点

> ID：13432918
> 
> 赞同：0
> 
> 时间：2012-11-17T17:26:40.907
> 
> 标签：algorithm, map, points

如果我有一个这样定义的 PHP 地图

```
$map = array(
    '0' => array('1','2','3','4'),
    '1' => array('0','5'),
    '2' => array('0','6'),
    '3' => array('0','7'),
    '4' => array('0','8'),
    '5' => array('1','9','10'),
    '6' => array('2','10','11'),
    '7' => array('3','11','12'),
    '8' => array('4','12','9'),
    '9' => array('8','5'),
    '10' => array('5','6'),
    '11' => array('6','7'),
    '12' => array('7','8'),
); 
```

看起来像这样：

```
9-------5-------10
|       |       |
|       1       |
|       |       |
8---4---0---2---6
|       |       |
|       3       |
|       |       |
12------8-------11 
```

现在，假设我在位置 1，我可以移动 4 个（并且正好是 4 个）位置，我该如何处理用户可以移动到哪些位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:38:50.717

我会做以下事情（在伪代码中）：

```
reachable={1}
for i=0 to 4 (exclusive)
  newreachable={}
  for elem in reachable
    add map[elem] to newreachable
  reachable=newreachable 
```

对于每次迭代，`reachable`包含可能出现的位置，并`newreachable`获取您可以移动到的每个位置。

# extjs - Leaflet + Sencha NO touch + Sencha 建筑师集成：混合瓷砖

> ID：13432921
> 
> 赞同：1
> 
> 时间：2012-11-17T17:26:59.097
> 
> 标签：extjs, leaflet

我正在尝试在使用 Sencha Architect 时将 Sencha 4.1 (ExtJS) 与 Leaflet 映射库集成。

当页面加载时，图块混合在一起并出现偏移。我需要向上拖动页面才能看到图块。

完整的项目可在此处获得：[https](https://github.com/breizo/SenchaLeaflet) ://github.com/breizo/SenchaLeaflet 。

这是创建的自定义组件的摘录（在此处查看完整代码：[https](https://github.com/breizo/SenchaLeaflet/blob/master/ux/LeafletMap.js) ://github.com/breizo/SenchaLeaflet/blob/master/ux/LeafletMap.js ）。

```
constructor: function () {
    this.callParent(arguments);
    this.on({
        resize: 'doResize',
        scope: this
    });
    var ll = window.L;
    if (!ll) {
        this.setHtml('Leaflet library is required');
    }
}

 onRender: function() {
    this.callParent(arguments); 
    var renderTo = arguments[0].dom.id;
    debugger;
    var me = this,
        ll = window.L,
        element = me.mapContainer,
        mapOptions = me.getMapOptions(),
        map,
        tileLayer;

    if (ll) {
        // if no center property is given -> use default position
        if (!mapOptions.hasOwnProperty('center') || !(mapOptions.center instanceof ll.LatLng)) {
            mapOptions.center = new ll.LatLng(47.36865, 8.539183); // default: Zuerich
        }

        me.setTileLayer(new ll.TileLayer(me.getTileLayerUrl(), me.getTileLayerOptions()));
        tileLayer = me.getTileLayer();
        mapOptions.layers = [tileLayer];

        me.setMap(new ll.Map(renderTo, mapOptions));
        map = me.getMap();

        // track map events
        map.on('zoomend', me.onZoomEnd, me);
        map.on('movestart', me.onMoveStart, me);
        map.on('moveend', me.onMoveEnd, me);
        me.fireEvent('maprender', me, map, tileLayer);
    }
}, 
```

调试时，似乎调用 onRender 时，地图的父容器的大小还没有正确，特别是它的高度仅足以包含属性文本，大约 16 pix。当 doResize 被调用时，容器的大小是正确的，但它不会改变最终结果：瓷砖混合并偏移。

我尝试了对容器的各种更改，但没有任何效果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:42:49.830

1) 混合层的问题是由 CSS 引起的。您`leaflet.css`在 html 中的路径错误，因此未附加在文档中。要修复混合问题，请设置正确的 css 文件路径，或从 CDN 附加：

```
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.css" /> 
```

2) extjs生成的div造成的地图偏移错误：

```
<div class="x-llmap x-fit-item x-llmap-default" ...></div> 
```

它将地图容器推到底部并进行了错误的偏移计算。您还可以使用内联样式或 CSS 来解决此问题：

```
.leaflet-map-pane {
    top: 0;
} 
```

# javascript - 在 IF 语句中检查复选框

> ID：13432932
> 
> 赞同：2
> 
> 时间：2012-11-17T17:27:31.777
> 
> 标签：javascript, html, javascript-events

我目前无法使我的 IF 语句正常工作我希望选择屏蔽“ely”并选择文本框 3 或 4 的用户会自动勾选文本框 2。

这是我的 JavaScript 代码：

```
if(showShield.value == ("ely") && document.getElementById("cb3").checked = true; || document.getElementById("cb4").checked = true;)
    {
    document.getElementById("cb2").checked=true;
        } 
```

这可能是错误的，因为它不起作用所以我将如何检查用户选择文本框 3 或 4。

这是我的 HTML 代码：

```
<html>
<head>
<script type="text/javascript" src="myJavascript.js"></script>
</head>
<body>

<select id="likeShield" onchange="showTicks()">
<option value="select1">Select</option>
<option value="yesShield">Yes</option>
<option value="noShield">No</option>
</select>

<select id="showShield" onchange="showTicks()">
<option value="select1">Select</option>
<option value="arc">Arcane</option>
<option value="ely">Elysian</option>
<option value="spec">Spectral</option>
<option value="anylist">Choose any</option>
</select>

<table border = "1">
<tr>
   <th> tickbox </th>
   <th> shield parts </th>
   <th> description </th>
   <th> cost </th>
</tr>
<tr>
<td><input type="checkbox" id="cb1"></td>
   <td> arc sigil </td>
   <td> Large magic part </td>
   <td> 5m </td>
</tr>
<tr>
<td><input type="checkbox" id="cb2"></td>
   <td> arc shield </td>
   <td> A extremely powerful magic shield </td>
   <td> 60m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb3"></td>
   <td> arc special item </td>
   <td> special element </td>
   <td> 10m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb4"></td>
   <td> elysian sigil  </td>
   <td> A sigil found by dragons </td>
   <td> 50m </td>
</tr>   
<tr>
   <td><input type="checkbox" id="cb5"></td>
   <td> elysian shield </td>
   <td> A extremely powerful ranging shield </td>
   <td> 40m </td>
</tr>   
<tr>
   <td><input type="checkbox" id="cb6"></td>
   <td> elysian special item </td>
   <td> A special attack attached to shield </td>
   <td> 25m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb7"></td>
   <td> spectral sigil  </td>
   <td> easily obtainable from goblins </td>
   <td> 4m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb8"></td>
   <td> spectral shield </td>
   <td> Impressive stats </td>
   <td> 15m </td>
</tr>
<tr>
   <td><input type="checkbox" id="cb9"></td>
   <td> spectral special item </td>
   <td> Does double damage </td>
   <td> 30m </td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:32:29.223

```
if(showShield.value == "ely" && (document.getElementById("cb3").checked || document.getElementById("cb4").checked))//comparison
{
    document.getElementById("cb2").checked=true; //asignment
} 
```

1.  **[运算符优先级：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)** `&&`之前完成，`||`所以你需要括号
2.  `==`，不`=`用于比较（最好`===`不会自动转换类型并进行严格比较）
3.  `;`是一个*语句终止符*，不应在其中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:29:51.050

`if(showShield.value === "ely" && (document.getElementById("cb3").checked == true || document.getElementById("cb4").checked == true))`

无需使用分号并使用 == 而不是 =。条件也需要括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:40:41.537

```
if(showShield.value == ("ely") && document.getElementById("cb3").checked = true; || document.getElementById("cb4").checked = true;) 
```

`showShield.value == ("ely") && document.getElementById("cb3").checked = true;`js`showShield.value`必须检查条件，并且由于运算符优先级`ely`而被检查，然后检查“或”语句是否被检查。`cb3``cb4`

我们可以通过 .

```
 if(showShield.value == ("ely") && (document.getElementById("cb3").checked = true; || document.getElementById("cb4").checked = true)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T19:52:01.927

**javascript复选框如果其他条件**

```
$checkbox = document.getElementById("checkBoxId").checked;

if($checkbox == true) {
    //check true
} else {
    //check false
} 
```

**jQuery复选框如果其他条件**

```
$checkbox = $("#checkBoxid").is(":checked");

if($checkbox == true) {
     //check true
} else {
     //check false
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T17:31:54.840

尝试这个

```
if(ely.value == "ely" && (document.getElementById("checkBox3").checked ||
  document.getElementById("checkBox4").checked))
{
    document.getElementById("checkBox2").checked=true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T17:32:40.890

你可能想要：

```
if(ely.value == ("ely") && document.getElementById("checkBox3").checked == true || ely.value == ("ely") && document.getElementById("checkBox4").checked == true)
{
document.getElementById("checkBox2").checked=true;
    } 
```

或者

```
if(ely.value == ("ely") && (document.getElementById("checkBox3").checked == true || document.getElementById("checkBox4").checked == true))
{
document.getElementById("checkBox2").checked=true;
    } 
```

这是因为逻辑运算符有其比较顺序，就像算术乘法优先于加法一样。好吧，我是 JS 的新手，但我相信它在任何地方都是这样工作的。此外，您必须使用双等号进行比较，因为单用于分配值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-17T17:35:04.500

这里可能有很多错误（因为您在这里没有提供太多信息），但至少，而不是

```
document.getElementById("checkBox3").checked = true; 
```

你应该有

```
document.getElementById("checkBox3").checked == true 
```

“checkBox4”也是如此。

这里有一个快速解释为什么：

1）当您使用一个等号时，您正在*设置*一个值。因此，您实际上不是在测试是否`checkBox3`已检查，而是在告诉您要`checkBox3`检查。if 语句需要使用两个等号，因为它使语句成为问题而不是命令。

2) 分号仅在语句末尾是必需的。由于“if”行是一个完整的语句，因此您不希望在其中使用分号。

希望这是有道理的！

# neo4j - Spring Data Neo4j - 如何让 WrappingNeoServerBootstrapper 在 0.0.0.0 上监听

> ID：13432934
> 
> 赞同：3
> 
> 时间：2012-11-17T17:27:38.417
> 
> 标签：neo4j, spring-data-neo4j

一直试图让 WrappingNeoServerBootstrapper 在 0.0.0.0 而不是 localhost 上启动 Neo4j WebAdmin 界面。尝试了所有指定 JAVA_OPTS 的形式（例如，-Dorg.neo4j.server.webserver.address=0.0.0.0），在 WrappingNeoServerBootstrapper 的第二个构造函数参数中传递我自己的配置 - 但它总是在 localhost 上侦听。希望有人有解决方案或示例。这是我的 Spring 配置 - 回归基础。提前致谢。

```
<bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase" destroy-method="shutdown">
    <constructor-arg index="0" value="${com.calendr.neo4jDataDir}"/>
    <constructor-arg index="1">
        <map>
            <entry key="allow_store_upgrade" value="true"/>
            <entry key="enable_remote_shell" value="true"/>
        </map>
    </constructor-arg> 
</bean>

<bean id="serverWrapper" class="org.neo4j.server.WrappingNeoServerBootstrapper" init-method="start" destroy-method="stop">
     <constructor-arg ref="graphDatabaseService"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:01:22.407

在阅读了 Neo 代码后，我想通了。这是我的最终工作配置。

```
<neo4j:config graphDatabaseService="graphDatabaseService"/>

<bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase" destroy-method="shutdown">
    <constructor-arg index="0" value="${com.mycompany.neo4jDataDir}"/>
    <constructor-arg index="1">
        <map>
            <entry key="allow_store_upgrade" value="true"/>
            <entry key="enable_remote_shell" value="true"/>
        </map>
    </constructor-arg> 
</bean>

<bean id="config" class="com.mycompany.Neo4jServerConfig">
    <constructor-arg> 
        <map>
            <entry key="org.neo4j.server.webserver.address" value="0.0.0.0"/>
        </map>
    </constructor-arg>     
</bean>

<bean id="serverWrapper" class="org.neo4j.server.WrappingNeoServerBootstrapper" init-method="start" destroy-method="stop">
    <constructor-arg index="0" ref="graphDatabaseService"/>
    <constructor-arg index="1" ref="config"/>
</bean> 
```

这是配置类：

```
public class Neo4jServerConfig implements Configurator {

    private Configuration config;

    public Ne4jServerConfig(Map<String, String> config) {
        this.config = new MapConfiguration(config);
    }

    @Override
    public Configuration configuration() {
        return config; 
    }

    @Override
    public Map<String, String> getDatabaseTuningProperties() {
        return null;
    }

    @Override
    public Set<ThirdPartyJaxRsPackage> getThirdpartyJaxRsClasses() {
        return new HashSet<>();
    }
} 
```

# java - 获取 JCheckBox 选中框的值

> ID：13432941
> 
> 赞同：4
> 
> 时间：2012-11-17T17:28:40.367
> 
> 标签：java, swing, jcheckbox

我想问有没有办法从 JCheckBox 获取信息而无需 actionListener。在我的代码中，我扫描一个字符串文件，每行都有数据，如果选择，应该将其添加到我程序中的数组中。问题是我永远不会知道我将拥有多少个 JCheckBox，这取决于文件。

所以，我的问题是如何通过按下按钮（确定）将选定的字符串放入数组（或列表）中，这样我就可以用它们做其他事情（在我的情况下，我需要从文件或手动输入中获取数据和把它放在一个红黑树中，所以我需要将选定的字符串推送到我的 putDataInTheTree 方法）。

编辑：另外，是否可以不显示已经添加到程序中的那些 JCheckBoxes？IE如果我选择流体，下次我调用输入法流体不会显示在我的面板中？

提前致谢！

它的外观：

![在此处输入图像描述](../Images/c5b655d5a469e138ac2ee368f47b4404.png)

我的代码到目前为止：

```
public void input() {
    try {
        mainWindow.setEnabled(false);
        fromFile = new JFrame("Input from file");
        fromFile.setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
        fromFile.setLayout(new BorderLayout());
        fromFile.setSize(300,200);
        panelFromFile = new JPanel();
        panelFromFile.setLayout(new java.awt.GridLayout(0,1));
        JScrollPane scrollPane2 = new JScrollPane(panelFromFile); 
        scrollPane2.setMaximumSize(new Dimension(300, 180));

        FileReader File = new FileReader(data);
        BufferedReader Buffer = new BufferedReader(File); 
        while ((info = Buffer.readLine()) != null) {
            if (info != null) {
                JCheckBox check = new JCheckBox(info);
                panelFromFile.add(check);
            }
        }
        ok = new JButton("ok");
        ok.addActionListener(this);
        fromFile.add(scrollPane2, BorderLayout.CENTER);
        fromFile.add(ok, BorderLayout.SOUTH);
        fromFile.setLocationRelativeTo(null);
        fromFile.setResizable(false);
        fromFile.setVisible(true);
    }
    catch(Exception e) {
        text.append("Error in INPUT method");
        text.append(System.getProperty("line.separator"));
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T17:35:11.583

将您的复选框添加到集合中，当按下按钮时，遍历复选框并获取与每个选中复选框关联的文本：

```
private List<JCheckBox> checkBoxes = new ArrayList<JCheckBox>();
...
    while ((info = Buffer.readLine()) != null) {
        if (info != null) {
            JCheckBox check = new JCheckBox(info);
            panelFromFile.add(check);
            this.checkBoxes.add(check);
        }
    }

...
public void actionPerformed(ActionEvent e) {
    List<String> infos = new ArrayList<String>();
    for (JCheckBox checkBox : checkBoxes) {
        if (checkBox.isSelected() {
            infos.add(checkBox.getText());
        }
    }
    // TODO do something with infos
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T17:35:42.947

如果您存储复选框（例如在 a 中`List`），您可以遍历它们并在按下 OK 按钮时查询它们的选定状态。

要从`String`复选框中获取 ，您可以选择使用`putClientProperty`和`getClientProperty`方法，如 javadoc 的类中所述`JComponent`

# javascript - 使用 Javascript 或 jQuery 在 HTML 表中自动增加数据

> ID：13432943
> 
> 赞同：1
> 
> 时间：2012-11-17T17:28:59.427
> 
> 标签：javascript, jquery, html, html-table

我是 javascript 的新手。我的 HTML 表格有问题。（这只是一个参考，因为整个表的范围是 100,000 到 2,000,000。）

这是一个列表，它有点大，手动创建它需要很长时间，而且如果我输入了一个错误的“范围”，我将不得不编辑并重新排列，然后再次检查“范围”是否正确。我希望这可以在javascript中完成。任何人都可以帮助我将“范围”设置为像“r-1 和 r-2”这样的变量，并且一个函数可以从 100,000 到 2,000,000 自动将变量增量填充到 5,000 或 10,000。

HTML 表格

**[jsFiddle](http://jsfiddle.net/iamthestig/Nck5B/)**

```
<table align="center" width="100%" border="0" cellspacing="0" cellpadding="0">
     <tr>
          <td class="range" width="15%">100,000 - 105,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">125,000 - 130,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">150,000 - 155,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">175,000 - 180,000</td><td class="value" width="10%">VALUE</td>
     </tr>

     <tr>
          <td class="range" width="15%">105,000 - 110,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">130,000 - 135,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">155,000 - 160,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">180,000 - 185,000</td><td class="value" width="10%">VALUE</td>
     </tr>

     <tr>
          <td class="range" width="15%">110,000 - 115,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">135,000 - 140,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">160,000 - 165,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">185,000 - 190,000</td><td class="value" width="10%">VALUE</td>
     </tr>

     <tr>
          <td class="range" width="15%">115,000 - 120,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">140,000 - 145,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">165,000 - 170,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">190,000 - 195,000</td><td class="value" width="10%">VALUE</td>
     </tr>

     <tr>
          <td class="range" width="15%">120,000 - 125,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">145,000 - 150,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">170,000 - 175,000</td><td class="value" width="10%">VALUE</td>

          <td class="range" width="15%">195,000 - 200,000</td><td class="value" width="10%">VALUE</td>
     </tr>
</table>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:52:42.407

这将构建显示的表结构

```
 $(function(){ 
     /* start & end divided by 1000*/
    var start=100, end=2000, increment=25, rowCellCount=4;;
    var html=[];
    for(i=start; i<= end- (increment*rowCellCount)+increment ; i=i+5){
        html.push('<tr>');
        for( j=0; j< rowCellCount; j++){
            var valueStart= (i+j*increment), valueEnd=valueStart+5;

            var text= parseThousands(valueStart)+',000 ';
            text+= valueEnd <= end ? ' - ' + parseThousands(valueEnd)+',000' :'';        

            html.push( '<td class="range" width="15%">'+text+'</td><td class="value" width="10%">VALUE</td>');
         }
         html.push('</tr>');
    }

    $('table').html( html.join(''))

 });

    function parseThousands( val){
        var txt =val.toString();
        if( txt.length==4){       
             txt= txt.slice(0,1) +','+ txt.slice(1)       
        }
        return txt;
    } 
```

演示：http: [//jsfiddle.net/Nck5B/20/](http://jsfiddle.net/Nck5B/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:53:15.973

当然。旧代码变得多余，所以我将其删除。查看 jsFiddle：http: [//jsfiddle.net/WFqTX/4/](http://jsfiddle.net/WFqTX/4/)

您现在可以控制您的开始、结束、步骤和所有其他参数：

```
 /* here we define variables to dynamically create your
    data, so you don't have to write it manually */

    var start = 100000;
    var end = 125000;
    var step = 5000;

    /* for additional variability we will set number of
    columns as a variable */

    var colN = 4; 
```

# mqx - MQX RTCS 配置属性

> ID：13432944
> 
> 赞同：2
> 
> 时间：2012-11-17T17:29:01.603
> 
> 标签：mqx

嗨 anione 与 MQX 合作过吗？

我不知道如何设置 BSP_ENET_DEVICE_COUNT 以测试 enet 演示...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:27:53.470

您应该查看 user_config.h 和特定于板的头文件（例如 k60 塔的 TWRK60512.h）以获取此类设置。这些可以在 bsp 库源代码中找到。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T14:25:30.180

通常这是设置的，`{MQX_ROOT_DIR}\mqx\source\bsp\"your_bsp_name"\"your_bsp_name".h` 但您也可以在 user_config.h 上设置它。

# go - 执行外部程序/脚本并检测它是否请求用户输入

> ID：13432947
> 
> 赞同：1
> 
> 时间：2012-11-17T17:29:27.623
> 
> 标签：go

给出以下示例：

```
// test.go
package main

import (
        "fmt"
        "os/exec"
)

func main() {
    cmd := exec.Command("login")
    in, _ := cmd.StdinPipe()
    in.Write([]byte("user"))
    out, err := cmd.CombinedOutput()
    if err != nil {
         fmt.Println("error:", err)
        }
    fmt.Printf("%s", out)
} 
```

我如何检测到该过程不会完成，因为它正在等待用户输入？

我试图能够运行任何脚本，但如果由于某种原因它试图从标准输入读取，则中止它。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T04:12:09.787

检测过程不会完成是一个难题。事实上，它是计算机科学中经典的“无法解决”问题之一：[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。

通常，当您调用 exec.Command 并且不会向其传递任何输入时，它会导致程序从您的操作系统的空设备中读取（请参阅[exec.Cmd](http://golang.org/pkg/os/exec/#Cmd)字段中的文档）。在您的代码（以及下面的代码）中，您显式创建了一个管道（尽管您应该检查错误返回`StdinPipe`以防它未正确创建），因此您应该随后调用`in.Close()`. 在任何一种情况下，子进程都会得到一个 EOF，并且*应该*在自己之后清理并退出。

为了帮助处理无法正确处理输入或以其他方式陷入困境的进程，一般的解决方案是使用超时。在 Go 中，您可以为此使用 goroutine：

```
// Set your timeout
const CommandTimeout = 5 * time.Second

func main() {
  cmd := exec.Command("login")

  // Set up the input
  in, err := cmd.StdinPipe()
  if err != nil {
    log.Fatalf("failed to create pipe for STDIN: %s", err)
  }

  // Write the input and close
  go func() {
    defer in.Close()
    fmt.Fprintln(in, "user")
  }()

  // Capture the output
  var b bytes.Buffer
  cmd.Stdout, cmd.Stderr = &b, &b

  // Start the process
  if err := cmd.Start(); err != nil {
    log.Fatalf("failed to start command: %s", err)
  }

  // Kill the process if it doesn't exit in time
  defer time.AfterFunc(CommandTimeout, func() {
    log.Printf("command timed out")
    cmd.Process.Kill()
  }).Stop()

  // Wait for the process to finish
  if err := cmd.Wait(); err != nil {
    log.Fatalf("command failed: %s", err)
  }

  // Print out the output
  fmt.Printf("Output:\n%s", b.String())
} 
```

在上面的代码中，实际上有三个感兴趣的主 goroutine：主 goroutine 生成子进程并等待它退出；如果进程没有及时停止，则会在后台发送一个计时器 goroutine 以终止该进程；和一个 goroutine，当它准备好读取它时将输出写入程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:53:05.123

虽然这不允许您“检测”试图从标准输入读取的程序，但我只会关闭标准输入。这样，子进程在尝试读取时只会收到 EOF。大多数程序都知道如何处理封闭的标准输入。

```
// All error handling excluded
cmd := exec.Command("login")
in, _ := cmd.StdinPipe()
cmd.Start()
in.Close()
cmd.Wait() 
```

不幸的是，这意味着你不能使用组合输出，下面的代码应该允许你做同样的事情。它需要您导入`bytes`包。

```
var buf = new(bytes.Buffer)
cmd.Stdout = buf
cmd.Stderr = buf 
```

之后`cmd.Wait()`，您可以执行以下操作：

```
out := buf.Bytes() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T18:45:24.317

我认为解决方案是使用封闭的 stdin 运行子进程 - 通过适当调整[Cmd](http://golang.org/pkg/os/exec/#Cmd) .Stdin 然后[运行](http://golang.org/pkg/os/exec/#Cmd.Run)它而不是使用 CombinedOutput()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T20:01:32.747

最后，我将实现 Kyle Lemons 答案的组合，并强制新进程拥有自己的会话，而无需附加终端，这样执行的命令就会知道没有终端可供读取。

```
// test.go
package main

import (
    "log"
    "os/exec"
    "syscall"
)

 func main() {
    cmd := exec.Command("./test.sh")
    cmd.SysProcAttr = &syscall.SysProcAttr{Setsid: true}
    out, err := cmd.CombinedOutput()
    if err != nil {
        log.Fatal("error:", err)
    }
    log.Printf("%s", out)
} 
```

# java - Java Timing Framework - Animator 类查询

> ID：13432958
> 
> 赞同：0
> 
> 时间：2012-11-17T17:30:43.173
> 
> 标签：java, swing, animation

我正在构建一个动画来表示数组操作。到目前为止，我已经在一个表示为已删除的绘制矩形（索引）的对象上构建了一个动画，并且右侧的其余索引左移以占据正确的索引。对于每个要移动的矩形索引，我为该特定对象创建一个动画。

我希望能够在第一个索引完成后立即开始移动下一个索引的动画。我尝试了一个while循环来检查动画是否仍在运行，但这实际上阻止了当前动画的显示，因为等待循环很忙。在查看了 API 中的 Animator 类之后，我找到了一个相关的方法：

*void await() 导致当前线程等待直到动画完成，无论是它自己还是由于调用 stop() 或 cancel()，除非线程被中断。*

在这种情况下，当前线程是什么？我知道 Timing-Framework 运行自己的计时线程，这就是它所指的吗？

我应该如何编写另一个代码块，处理使用这个动画方法构建下一个索引动画等待第一个？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T18:23:01.637

由于这是一个 Swing GUI，我认为通过使用 Swing Timer 为您的动画提供更好的服务，因为所有动画都将在 Swing 事件线程上完成，而不会束缚和冻结这个重要的线程。您可以通过侦听器附加某种通知以查看动画何时完成，可能通过为您的动画代码添加 ChangeListener 或 PropertyChangeListener 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T01:46:02.807

如果您使用的是[Timing Framework](http://java.net/projects/timingframework)，则版本 1 有一个`TimingTarget`可以附加到`Animator`实例的接口。

这将提供有关`Animator`.

除了提供“tick”回调之外，它还提供`begin`和`end`.

您可以将一串`Animator`s 放在一起，在调用时开始下一个`end`。

不幸的是，我没有时间更新我的库以使用较新的版本，因此实际的接口和方法可能已经改变。

# macos - 如何使用 Applescript 获取图像的颜色配置文件？

> ID：13432959
> 
> 赞同：0
> 
> 时间：2012-11-17T17:30:46.653
> 
> 标签：macos, applescript

)

我想写一个苹果脚本来收集图像的颜色配置文件..谁能帮我解决这个问题？我不知道！！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:57:04.000

我喜欢使用[Phil Harvey 的 ExifTool](http://owl.phy.queensu.ca/~phil/exiftool/)来提取元数据。这是[我编写](http://www.johneday.com/219/exiftool-service-for-quick-metadata-access)的用于快速访问元数据的服务。

```
on run {input, parameters}
    -- creates a metadata folder in the Documents folder to store results
    set thePath to POSIX path of (path to documents folder) & "metadata" & "/"
    do shell script "mkdir -p " & quoted form of POSIX path of thePath

    set {inputFiles, outputFiles} to {{}, {}}
    repeat with anItem in input
        set end of inputFiles to quoted form of POSIX path of (anItem as text)
        tell application "Finder" to set {name:fileName, name extension:nameExtension} to anItem
        set baseName to text 1 thru ((get offset of "." & nameExtension in fileName) - 1) of fileName
        set end of outputFiles to quoted form of (thePath & baseName & ".txt")
    end repeat

    set {TID, text item delimiters} to {text item delimiters, space}
    set {inputFiles, outputFiles} to {(inputFiles as text), (outputFiles as text)}
    set text item delimiters to TID

    do shell script "exiftool -a " & inputFiles & " -w " & quoted form of (thePath & "%f.txt" as text) & "; open " & outputFiles
end run 
```

# jsf-2 - 如何从 JSF 2.0 应用程序中的 html 链接到本地 磁盘上的文件

> ID：13432960
> 
> 赞同：1
> 
> 时间：2012-11-17T17:30:46.607
> 
> 标签：jsf-2

我使用 tomcat 7.0 和 eclispe WTP 插件。我无法引用本地磁盘上的文件。 `<h:graphicImage value="C:/tmp/someFile.png"/>`

我试图通过添加位置 C:\Program Files (x86)\apache-tomcat-7.0.32\webapps 目录 tmp/ 来解决它并使用`<h:graphicImage value="/tmp/someFile.png"/>`

我还尝试从 eclipse 添加到 tomcat 文件：server.xml`<Context docBase="C:/tmp" path="/tmp" />`

```
<Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true">

    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" pattern="%h %l %u %t &quot;%r&quot; %s %b" prefix="localhost_access_log." suffix=".txt"/>

  <Context docBase="myProjectName" path="/myProjectName" reloadable="true" source="org.eclipse.jst.jee.server:myProjectName"/>
  <Context docBase="C:/tmp" path="/tmp" /></Host> 
```

并以相同的方式引用文件`<h:graphicImage value="/tmp/someFile.png"/>`

结果我有 HTTP 状态 404。描述请求的资源不可用。

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:59:42.937

会`<h:graphicImage>`自动在 URL 中添加当前 webapp 的上下文路径。如果您在 webbrowser 的内置 webdeveloper 工具集中查看了生成的 HTML 输出和/或 HTTP 流量监视器，您就会注意到它。

只需使用纯 HTML`<img>`元素即可。

```
<img src="/tmp/someFile.png" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:02:15.850

部署应用程序时，“webapp”目录充当应用程序的根目录（理想做法）。因此，如果您使用路径（url）`"/tmp/someFile.png"` 访问文件 someFile.png，则必须将文件放入 `"/src/main/webapp/tmp/someFile.png"`并在部署后将“webapp”的内容放入应用程序的根目录中。

所以基本上只要确保“tmp”在你的应用程序根目录中。

如果你想使用文件系统。[你可以在这里](https://stackoverflow.com/questions/4543936/load-the-image-from-outside-of-webcontext-in-jsf)看到这个答案。

# javascript - jquery 控制链接 this 失去作用域

> ID：13432961
> 
> 赞同：0
> 
> 时间：2012-11-17T17:31:03.623
> 
> 标签：javascript, jquery

我想知道是否有人新如何在“this”关键字的范围内保持链接控制。使用 .find(this).click 时它会脱离链条 有谁知道如何防止链条断裂

```
(function($) {
    $.fn.mycontrol = function() {
        $(window).resize(function() {
            alert('resize')
        }).scroll(function() {
            alert('scroll')    
        }).find(document).bind('init', function() {
            alert('scroll')
        }).ready(function() {
            $(this).trigger('init');
        }).find(this).click(function() {
            alert('click'); // $(this) loses scope here 
        });
})(jQuery);

$(document).ready(function() {
    $('#mycontrol').mycontrol()
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:52:47.553

`window`是一个对象窗口。这是包含 HTML 对象的 window.document。

所以 $(window).find(this) 也将 jquery 空对象作为 $(window).find(document) 返回。

`$(document).find(this)`代替工作，相当于`$(window.document)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:39:46.633

链接创建不可维护的代码。把它分成不同的行：

```
var $window =  $(window);

$window.resize(function() 
{
    alert('resize')
});

$window.scroll(function() 
{
   alert('scroll')    
});

// etc. 
```

然后你可以阅读它，你可以用调试器单步执行它，你可以删除和删除逻辑而不会破坏任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:33:50.530

如果我正确理解您要查找的内容，您应该能够`this`在开始链接之前保存值：

```
(function($) {
    $.fn.mycontrol = function() {
        var that = this;
        $(window).resize(function() {
            alert('resize')
        }).scroll(function() {
            alert('scroll')    
        }).find(document).bind('init', function() {
            alert('scroll')
        }).ready(function() {
            $(that).trigger('init');
        }).find(that).click(function() {
            alert('click'); // $(this) loses scope here 
        });
})(jQuery); 
```

# css - Twitter Bootstrap - 导航和媒体查询 - 链接对齐

> ID：13432972
> 
> 赞同：0
> 
> 时间：2012-11-17T17:32:10.387
> 
> 标签：css, twitter-bootstrap, media-queries

我在我的网站移动版导航栏中的链接对齐时遇到了一些问题。查看桌面版本时，一切正常。它看起来像这样：

![在此处输入图像描述](../Images/457842d3a50839c91583f53baf2d3779.png)

代码：

```
.navbar {
    margin-top: 30px;
    min-height: 50px;
    padding: 0;
    background-color: red;
    background-image: none;
    filter: -;
    border: none;
    -webkit-border-radius: none;
    -moz-border-radius: none;
    border-radius: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    *zoom: 1;
}

.navbar-inner {
    background-color: fuchsia;
    background-image: none;
    border: none;
    border-radius: 0;
    box-shadow: none;
}

.navbar li a,
.navbar .nav > li > a:hover {
    margin-left: 20px;
    background-color: #5593f8;
    webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
} 
```

现在是手机版。目前看起来是这样的：

![在此处输入图像描述](../Images/82c0c9d784670b0b06513b1c58a29449.png)

代码：

```
@media (max-width: 767px) {
    body {
      padding-right: 0;
      padding-left: 0;
    }
    .navbar {
        margin-top: 0px;
    }
    .navbar .nav > li {
        float: none;
        text-align: center;
    }
    .navbar li a,
    .navbar .nav > li > a:hover {
        margin: 0;
    }    
    .navbar .nav {
        width: 100%;
        background: red;
    }
    .navbar-inner {
        padding: 0;
        margin: 0;
    }
} 
```

你看到左边那个可以看到紫红色的小缝隙了吗？我不想要那个。我希望链接是`width: 100%`，但不知何故这是不可能的。我花了几乎一整天的时间来找出问题所在，但我无法解决这个问题。它不是边距，也不是填充，但它是什么？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:19:49.423

好，我知道了！

在上面发布的媒体查询之后，我有这个：

```
@media (max-width: 979px) {
       .navbar {
           margin-top: 0px;
       }
       .navbar-inner {
           padding-left: 5px;
        }
   } 
```

最后一条规则中声明的 5px 是您在上面的帖子中看到的差距。将这篇文章的规则移到第一篇文章的规则*之上*确实解决了这个问题。

# python - 我应该将产品图像存储为 db.ListProperty(db.Blob) 还是 db.ListProperty(db.Key)？

> ID：13432973
> 
> 赞同：1
> 
> 时间：2012-11-17T17:32:11.300
> 
> 标签：python, image, google-app-engine, datastore

我目前正在存储给定产品的上传图片，如下所示：

```
class Product(db.Model):
    images= db.ListProperty(db.Blob)
    # More properties ... 
```

我用以下方法检索它们：

```
class ImageHandler(webapp2.RequestHandler):
    def get(self):
        productKey = cgi.escape(self.request.get('id'))

        if productKey:
            try:
                product = Product.get(db.Key(productKey))
                if product and product.images:
                    idx = 0 # if not img is passed, return the first one
                    imageIndex = cgi.escape(self.request.get('img'))
                    if imageIndex:
                        imageIndex = int(imageIndex)
                        if imageIndex > 0 and imageIndex < len(product.images):
                            idx = imageIndex

                    self.response.headers['Content-Type'] = 'image/jpeg'
                    self.response.out.write(str(product.images[idx]))
                    return
                self.redirect('/img/image-missing.jpg')
                return
            except:
                self.redirect('/img/image-404.jpg')
                return
        self.redirect('/img/image-404.jpg') 
```

通过调用`/image?id={{productkey}}&img={{imageindex}}`.

现在考虑：

*   数据存储成本
*   CPU/内存/时间成本
*   可能迁移到另一个应用程序/数据存储甚至亚马逊等。
*   能够返回调整大小的图像以进行缩略图显示等。
*   我没有考虑的其他因素

我应该保持这样的状态，还是应该有一个单独的图像模型，它只包含 a `db.BlobProperty`，`db.ListProperty(db.Key)`而在产品模型中有 a ？

我不确定当我 get() 产品时将图像作为 blob 保存在产品内部是否会自动获取它们（这会很糟糕），或者它是否减少了数据存储访问，因为我不必获取另一个图像实体。

最后，任何改进这个 python 代码的建议（有很多重定向、返回和条件）肯定也会受到赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:18:07.587

如果您认为每个数据存储实体都绑定到 1MB 大小，那么将 Blob 列表存储到一个实体中很容易成为问题。最好将每个图像存储在一个单独的模型中，并为您的产品模型保留一个键列表。

# django - Django - 自定义结果列表 - 添加元素 ID

> ID：13432974
> 
> 赞同：1
> 
> 时间：2012-11-17T17:32:24.083
> 
> 标签：django, django-templates, django-admin

我想覆盖默认的管理面板结果列表 (change_list_results.html) 为每一行添加 ID`<tr>`

默认为：

```
<tbody>
        {% for result in results %}
            {% if result.form.non_field_errors %}
                <tr><td colspan="{{ result|length }}">{{ result.form.non_field_errors }}</td></tr>
            {% endif %}
            <tr class="{% cycle 'row1' 'row2' %}">{% for item in result %}{{ item }}{% endfor %}</tr>
        {% endfor %}
 </tbody> 
```

我想拥有：

```
<tbody>
        {% for result in results %}
            {% if result.form.non_field_errors %}
                <tr><td colspan="{{ result|length }}">{{ result.form.non_field_errors }}</td></tr>
            {% endif %}
            <tr class="{% cycle 'row1' 'row2' %}" id="{{ ID }}">{% for item in result %}{{ item }}{% endfor %}</tr>
        {% endfor %}
</tbody> 
```

我应该投入什么`{{ ID }}`来获取元素 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:06:32.370

不幸的是，“项目”上下文变量不保存实例数据，它只是一个包含每列的 html 的列表。为了实现您的需要，您必须根据 forloop 计数器在 'cl.result_list' 上下文变量中搜索等效项：

```
<tr class="{% cycle 'row1' 'row2' %}" id="{% with i=forloop.counter0|stringformat:"s"|add:":" %}{% with items=cl.result_list|slice:i %}{{ items.0.pk }}{% endwith  %}{% endwith %}">{% for item in result %}{{ item }}{% endfor %}</tr> 
```

或者，如果您不喜欢所有这些“with”标签，您可以创建一个自定义模板以直接从计数器索引中获取“cl.result_list”中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:14:34.607

我猜从一个附加到列表`{{ result.form.instance.id }}`的事实来看。`result.form``results`

只是演绎推理。让我知道它是否错了。

# php - 在 symfony 中加载资源

> ID：13432984
> 
> 赞同：3
> 
> 时间：2012-11-17T17:33:04.473
> 
> 标签：php, symfony

我想知道在 symfony 2 中加载 yaml 配置文件的最佳方法是什么。我说的是编写自己的文件并解析它们以在我的控制器中使用它们。

理想情况下，我应该能够合并来自多个配置文件的值，这些配置文件代表我在我的应用程序中拥有的各种环境（dev、prod、ecc）。

假设我的 myconf.yml 看起来像这样：

```
name: x
surname: y 
```

和 myconf_dev.yml 看起来像这样：

```
surname: w
city: nyc 
```

理想情况下，我想要一些这样的界面：

```
Magik::resolve("myconf", "dev"); 
```

这将返回

```
name: x
surname: w
city: nyc 
```

科幻？

我发现了这个[http://symfony.com/doc/2.0/components/config/resources.html](http://symfony.com/doc/2.0/components/config/resources.html)？采取正确的方法吗？或者有更好的东西可以使用。

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T21:49:51.963

[如果我们已经有了一个好的](http://symfony.com/doc/master/book/service_container.html#service-parameters)方法，为什么还要发明一种新方法？

Symfony 的服务容器可以完美地存储配置，您可以通过[导入](http://symfony.com/doc/master/book/service_container.html#importing-configuration-with-imports)或[容器扩展](http://symfony.com/doc/master/book/service_container.html#importing-configuration-via-container-extensions)来导入外部资源。

# java - notifyall() 后线程不返回

> ID：13432985
> 
> 赞同：4
> 
> 时间：2012-11-17T17:33:09.963
> 
> 标签：java, android, multithreading

我是 Java 多线程的新手。我已经进行了一些研究，阅读了教程并进行了测试，但是我遇到了这个问题。基本上，我正在设置游戏的骨架，并且我想要主活动类，一个包含方法的线程类，执行慢速操作（读取文件并将内容解压缩到缓冲区），并有一个线程是游戏循环对 UI 操作的反应。

首先，我有一个主活动类，它实例化并启动一个单独的线程：

```
public class ExperimentsActivity extends Activity {

// This is just a container class with some member data such as ByteBuffers and arrays
TestClass tclass = new TestClass(this);

// Main looping thread
MainLoopThread loop;
Thread mainLoop;

// Start the main looping thread which will trigger the engine's operations
loop = new MainLoopThread(tclass);
mainLoop = new Thread(loop);
mainLoop.start();
loop.setRunning(true);

(...)
} 
```

然后，我有一个`MainLoopThread`实现游戏逻辑线程的类：

```
public class MainLoopThread implements Runnable  {

public boolean running;
private TestClass baseData;

// Thread for data loading/unpacking ( CLASS DEFINITION BELOW )
GFXUnpack dataUnpack;
Thread dataUnpackThread;

public MainLoopThread( TestClass testClassStructure ) {
    running = false;
    baseData = testClassStructure;
}

public void setRunning ( boolean run ) {
    if ( run == true )
    {
        // Launch the thread which manages loading and unpacking graphics
        dataUnpack = new GFXUnpack(baseData.filepack[0]);
        dataUnpackThread = new Thread(dataUnpack);
        dataUnpackThread.start();
        dataUnpack.setRunning(true);
        fileOpened = false;

        // Open the GFX packet file
        try {
            synchronized (this) {
                dataUnpack.setOperation(2);                     
                Log.d("MainLoopThread", "File opening : waiting...");
                while ( dataUnpack.fileOpened == false ) {
                    wait();
                }
                Log.d("MainLoopThread", "File opening wait completed");
            }

            if ( dataUnpack.outCode == -1 ) 
                    Log.d("MainLoopThread", "File opening error !!");
                else fileOpened = true;
                    Log.d("MainLoopThread", "File opening completed");
            } 
            catch ( Exception exp ) {
                Log.d("MainLoopThread", "File opening code exception !!" + exp);
            }
        }
        else if ( dataUnpack.running == true ) dataUnpack.setRunning(false);              running = run;
    }

    // ------------------------------------
    // Here is the main looping thread. All the events related to loading 
    // and unpacking graphics go here
    public void run() {
        while (running) {
            synchronized (this) {
              // ------ Read a GFX packet and update texture pixels
              if ( fileOpened == true ) {
                  try {
                      // ( Do some stuff... )
                      wait();
                  } catch ( Exception exp ) {
                  Log.d("MainLoopThread", "Exception thrown !! " + exp );
              }
          }
      } // ( Thread-out code removed. Anyway, it never passed here )
  } 
```

最后，`GFXUnpack`包含在 SD 卡上打开文件的代码的线程类读取其中的内容并写入缓冲区：

```
public class GFXUnpack implements Runnable {
// -------------    
public boolean running = false;
private Filedata fdata;
private int operation = 0, parameter = 0;
public boolean fileOpened;
public int outCode;  // Used to signal the caller about the outcome of the operation
// ------------------------------
public GFXUnpack ( Filedata packetDataStructure ) {
    this.fdata = packetDataStructure;
}
// --------
public void setRunning ( boolean run ) {
    running = run;   operation = 0;  fileOpened = false;            
    outCode = 0;      parameter = 0;
}
// --------
public void setOperation ( int op ) {
    operation = op;
}
// ---
public void setOperation ( int op, int parm ) {
    operation = op;
    parameter = parm;
}
// ---------    
public synchronized void run() {
    while (running) {
        try {
      switch ( operation ) {
                case ( 2 ) :  // Open the gfx data file
                        ( ...do stuff... )
                        break;                  
                    }
                    // ---------
                    try {
                           ( ...Do some stuff here... )
                           Log.d("GFXUnpack", "Mapping file");
                           ( ...Do some stuff here... )
                           Log.d("GFXUnpack", "Mapped file");
                           fileOpened = true;
                           outCode = 1;
                    } catch ( Exception e ) {
                        Log.d("GFXUnpack", "File opening exception !! " + e);
                        outCode = -1;
                    }
                    finally {
                        operation = 0;       parameter = 0;
                        notifyAll();
                        Log.d("GFXUnpack", "Notified file opening");
                    }
                }
                break;
    // ----------------
            }
            // ----- Other cases here... 
        } finally {
        }
    }
} 
```

当我运行上面的，调试器输出是：

> MainLoopThread File opening : waiting...
> GFXUnpack 映射文件
> GFXUnpack 映射文件
> GFXUnpack 通知文件打开

然后，应用程序挂起，我必须强制关闭它。我想，因为我调用（在块中）`notifyAll()`的`run()`方法，调用者线程（MainLoopThread）会继续，我会看到调试器消息'文件打开完成'，但应用程序挂起。`GFXunpack``finally{}`

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:45:03.307

`MainLoopThread`实例等待`this`（的实例）`MainLoopThread`，`GFXUnpack`实例通知`this`（的实例`GFXUnpack`）。所以通知器不会通知等待线程。

这两个对象必须使用**相同的对象实例**来等待和通知。更好的是，您应该使用`java.util.concurrent`包中的高级抽象，例如 Semaphores、CountDownLatches 等，而不是这些难以使用的低级方法。

此外，`wait()`应始终在循环中调用，以检查唤醒所需的条件是否已实现，如果未实现，则由于虚假唤醒再次开始等待。

# ruby-on-rails - 将模型传递到另一个页面

> ID：13432986
> 
> 赞同：0
> 
> 时间：2012-11-17T17:33:11.360
> 
> 标签：ruby-on-rails, ruby

我必须遵循模型

```
class ModelA < ...
  attr_accessible ...
  has_many :ModelBs

  ...
end 
```

对于`new`我使用以下视图的操作

`view/modelA/new.html.erb`

```
...
<%= form_for @modelA do |f| %>
  ...
  <%= f.submit %>
<% end %>
... 
```

在`create`我执行的操作`redirect_to new_modela_modelb_path`（如果成功）中，这与创建 ModelA 的视图类似。问题是如果创建了 ModelB，我只想创建 ModelA，我想将 ModelA 传递给 ModelB 视图，然后同时创建两者。不确定这是否是正确的方法以及如何去做。

# ruby-on-rails - rescue_from ::AbstractController::ActionNotFound 不工作

> ID：13432987
> 
> 赞同：9
> 
> 时间：2012-11-17T17:33:17.333
> 
> 标签：ruby-on-rails, exception, ruby-on-rails-3.2, actioncontroller

我有以下代码：

```
unless Rails.application.config.consider_all_requests_local
  rescue_from Exception, with: :render_exception
  rescue_from ActiveRecord::RecordNotFound, with: :render_exception
  rescue_from ActionController::UnknownController, with: :render_exception
  rescue_from ::AbstractController::ActionNotFound, with: :render_exception
  rescue_from ActiveRecord::ActiveRecordError, with: :render_exception
  rescue_from NoMethodError, with: :render_exception
end 
```

它们都完美无瑕，除了 ::AbstractController::ActionNotFound

我也试过

```
AbstractController::ActionNotFound
ActionController::UnknownAction 
```

错误：

```
 AbstractController::ActionNotFound (The action 'show' could not be found for ProductsController): 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T17:45:14.070

[这个类似的问题](https://stackoverflow.com/questions/7342851/catch-unknown-action-in-rails-3-for-custom-404)表明您不能再捕获`ActionNotFound`异常。检查链接以获取解决方法。[这个](https://stackoverflow.com/a/7344312/760389)使用 Rack 中间件捕获 404 的建议对我来说是最干净的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-01T14:27:04.347

要在控制器中进行救援`AbstractController::ActionNotFound`，您可以尝试以下操作：

```
class UsersController < ApplicationController

  private

  def process(action, *args)
    super
  rescue AbstractController::ActionNotFound
    respond_to do |format|
      format.html { render :404, status: :not_found }
      format.all { render nothing: true, status: :not_found }
    end
  end

  public

  # actions must not be private

end 
```

这会覆盖引发的`process`方法（参见[源代码](https://github.com/rails/rails/blob/v3.2.21/actionpack/lib/abstract_controller/base.rb#L104-L122)）。`AbstractController::Base``AbstractController::ActionNotFound`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T08:15:23.850

我想我们应该赶上`AbstractController::ActionNotFound`。`ApplicationController`我试过以下**似乎不起作用**。

```
rescue_from ActionController::ActionNotFound, with: :action_not_found 
```

我找到了更简洁的方法来处理这个异常`ApplicationController`。要处理应用程序中的`ActionNotFound`异常，您必须覆盖`action_missing`应用程序控制器中的方法。

```
def action_missing(m, *args, &block)
  Rails.logger.error(m)
  redirect_to not_found_path # update your application 404 path here
end 
```

解决方案改编自：[coderwall 处理 Rails 应用程序中的异常](https://coderwall.com/p/whjmra/handling-exceptions-in-your-rails-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-10T20:14:59.510

正如 Grégoire 在他的回答中所描述的那样，覆盖`process`似乎有效。但是，Rails 代码说要改用 override `process_action`。但是，这不起作用，因为`process_action`由于在`process`.

[https://github.com/rails/rails/blob/v3.2.21/actionpack/lib/abstract_controller/base.rb#L115](https://github.com/rails/rails/blob/v3.2.21/actionpack/lib/abstract_controller/base.rb#L115)

[https://github.com/rails/rails/blob/v3.2.21/actionpack/lib/abstract_controller/base.rb#L161](https://github.com/rails/rails/blob/v3.2.21/actionpack/lib/abstract_controller/base.rb#L161)

# java - 如何将透明度应用于缓冲图像java

> ID：13432989
> 
> 赞同：3
> 
> 时间：2012-11-17T17:33:22.600
> 
> 标签：java, transparency, bufferedimage

我正在尝试绘制一个采用缓冲图像的方法，使其半透明，然后返回生成的缓冲图像。从那里我可以稍后画它。但是我的代码无法绘制任何东西。认为我很接近...

```
public BufferedImage ApplyTransparency(BufferedImage image)
{
    BufferedImage dest = new BufferedImage(overlay1.getWidth(), overlay1.getHeight(),
            BufferedImage.TYPE_INT_ARGB);

    Graphics2D g3 = dest.createGraphics(); 
    AlphaComposite ac = AlphaComposite.getInstance(AlphaComposite.DST_IN, 0.9F);
    g3.setComposite(ac);
    g3.drawImage(overlay1, 0, 0, null);

    return dest;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T17:49:00.853

您可以将图像绘制到新图像上，调整其透明度，如下所示

```
public Raster transform(Image img, float alpha) {
    BufferedImage bi = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    bi.getGraphics().drawImage(img, 0, 0, null);
    RasterOp rop = new RescaleOp(new float[] { 1.0f, 1.0f, 1.0f, alpha }, new float[] { 0.0f, 0.0f, 0.0f, 0.0f }, null);
    Raster result = rop.filter(bi.getData(), null);
    return result;
} 
```

# ruby - 如何将 yml 文件的内容传递给我的 erb 模板？

> ID：13432991
> 
> 赞同：1
> 
> 时间：2012-11-17T17:33:26.493
> 
> 标签：ruby, yaml, erb

我的 yml 文件如下所示：

```
defaults: &defaults
  key1: value1
  key2: value2
  ..
  .. 
```

我的模板文件有以下内容：

```
<%= key1 %>
<%= key2 %> 
```

所以我的脚本有一个文件列表，循环遍历它们，我想将 yml 对象传递给我的 erb 进行解析：

```
config = YAML::load(File.open('config.yml'))ENV['ENV']

file_names.each do |fn|

  file = File.new "#{fn}", "r"

  template = ERB.new file

  result = template.result

  # save file here

end 
```

如何将我的配置对象传递给 erb 模板系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T18:21:48.910

在[http://ciaranm.wordpress.com/2009/03/31/feeding-erb-useful-variables-a-horrible-hack-involving-bindings/的帮助下](http://ciaranm.wordpress.com/2009/03/31/feeding-erb-useful-variables-a-horrible-hack-involving-bindings/)

不是超级漂亮，但如果你把班级藏起来，那就还不错。缺点是您可能会在调用 ThingsForERB 类中不存在的其他方法时遇到问题，因此您需要先考虑一下，然后再`config['key1']`按照 Sergio 的建议进行更改以使用。

```
require 'erb'

config = {'key1' => 'aaa', 'key2' => 'bbb'}

class ThingsForERB
  def initialize(hash)
    @hash = hash.dup
  end
  def method_missing(meth, *args, &block)
    @hash[meth.to_s]
  end
  def get_binding
    binding
  end
end

template = ERB.new <<-EOF
  The value of key1 is: <%= key1 %>
  The value of key2 is: <%= key2 %>
EOF
puts template.result(ThingsForERB.new(config).get_binding) 
```

运行时输出为：

```
 The value of key1 is: aaa
  The value of key2 is: bbb 
```

# unity3d - iTween 考虑变换向量

> ID：13432993
> 
> 赞同：1
> 
> 时间：2012-11-17T17:33:40.173
> 
> 标签：unity3d

我正在使用 iTween.MoveTo 并且对于“路径”参数，我给出了一个变换数组。虽然变换被放置在一个球体上。对象在路径上移动得非常好，但它保持向上，而不是在球体上正确定向。

![在此处输入图像描述](../Images/c963b68c79322d32659713aecb7e4843.png)

我尝试使用“lookat”参数并给出我的球体的中心并且它有效（在稍微调整我的角色之后，如果它看着中心它实际上是站在它上面）但是他不会在路径上向前看.

那么，有什么方法可以让 iTween 将变换的向上向量考虑在内？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:15:22.047

一种方法是禁用“lookat”并在 iTween 发生时打开一个标志（我建议在补间期间使用 WaitForSeconds 的协程）。

然后，在您的 Update/FixedUpdate 例程中，您可以使用以下代码：

```
outSideObjectTransform.forward = outSideObjectTransform.position - lookTarget.position; 
```

这将使outsideObject 的前轴**方向**远离中心对象。对于任何轴都可以这样说。

此外，如果您想要完全相反（对象朝向它的“外观目标”），只需将两个向量的减法替换为加法即可。

我希望这有帮助。

# python - Python UnicodeEncodeError / Wikipedia-API

> ID：13432995
> 
> 赞同：2
> 
> 时间：2012-11-17T17:33:51.450
> 
> 标签：python, unicode, encoding, ascii, wikipedia-api

我正在尝试使用 Python 和 BeautifulSoup 解析此文档：

[http://en.wikipedia.org/w/api.php?format=xml&action=opensearch&search=rage_against_the_machine](http://en.wikipedia.org/w/api.php?format=xml&action=opensearch&search=rage_against_the_machine)

第七项作为这个文本标签：

> Rage Against the Machine 1994–1995 巡回演唱会

当我尝试打印文本“Rage Against the Machine's 1994–1995 Tour”时，python 给了我这个：

`UnicodeEncodeError: 'ascii' codec can't encode character u'\u2013' in position 31: ordinal not in range(128)`

我可以通过简单地将 u'\u2013' 替换为 '-' 来解决它，如下所示：

`itemText = itemText.replace(u'\u2013', '-')`

但是，我没有编码的每个字符呢？我不想忽略它们，也不想列出所有可能的查找和替换。

当然，必须存在一个库来尝试最好地从常见已知编码列表中检测编码（但很可能会出错）。

```
someText = getTextWithUnknownEncoding(someLocation);
bestAsciiAttemptText = someLibrary.tryYourBestToConvertToAscii(someText) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:36:16.607

将其解码为 UTF-8 应该可以：

```
itemText = itemText.decode('utf-8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:38:40.730

**通常，您应该尝试将字符保留为 unicode 或 utf-8**。避免将字符转换为本地代码页，因为这会导致信息丢失。

但是，如果你必须，这里是。很少有事情要做。让我们使用您的示例角色：

```
>>> s = u'\u2013' 
```

如果要打印字符串，例如用于调试，可以使用`repr`：

```
>>> print(repr(s))
u'\u2013' 
```

在交互式会话中，您只需键入变量名即可获得相同的结果：

```
>>> s
u'\u2013' 
```

如果您真的想将文本转换为您的本地代码页，并且此代码页之外的字符转换为“？”是可以的，您可以使用以下命令：

```
>>> s.encode('latin-1', 'replace')
'?' 
```

如果 '？' 还不够好，您可以使用`translate`将所选字符转换为等效字符，如[本答案所示](https://stackoverflow.com/questions/2700859/how-to-replace-unicode-characters-by-ascii-characters-in-python-perl-script-giv)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-17T17:38:26.400

您可能需要明确声明您的编码。

在文件的第一行（或在 hashbang 之后，如果有的话），添加以下行：

`-*- coding: utf-8 -*-`

这个“魔术注释”迫使 Python 期待 UTF-8 字符并且应该成功解码它们。

更多细节： http: [//www.python.org/dev/peps/pep-0263/](http://www.python.org/dev/peps/pep-0263/)

# neo4j - 在 Neo4j 1.8 及更高版本上使用 Java 嵌入式 API 在 AStar 遍历中设置初始 BranchState

> ID：13432998
> 
> 赞同：3
> 
> 时间：2012-11-17T17:34:00.470
> 
> 标签：neo4j

我正在尝试使用 Java 嵌入式 API 在 Neo4J 中实现有状态的 AStar 遍历。也就是说，一旦我到达图中的某个节点，我想传递一个对象，该对象包含一些收集到分支的上下文信息，用于选择/修剪向前的关系。这个想法是该`PathExpander.expand()`方法将检查包含在状态对象中的遍历的上下文，并决定哪些路径有资格进行扩展，以及以何种顺序。我这样做是为了防止非法的多节点子路径（实际上是转弯限制）被视为返回的最佳路径的一部分。该技术适用于 Dijkstra 遍历，因为[GraphAlgoFactory具有生成 dijkstra 的工厂方法，这些方法支持通过](http://api.neo4j.org/1.8/org/neo4j/graphalgo/GraphAlgoFactory.html)[InitialStateFactory](http://api.neo4j.org/1.8/org/neo4j/graphdb/traversal/InitialStateFactory.html)设置初始状态范围：

```
dijkstra(PathExpander expander, InitialStateFactory stateFactory, String relationshipPropertyRepresentingCost) 
dijkstra(PathExpander expander, InitialStateFactory stateFactory, CostEvaluator<Double> costEvaluator) 
```

伟大的。但是，我找不到相应的工厂方法来设置 AStar 遍历中的初始状态，唯一的选择是：

```
aStar(PathExpander expander, CostEvaluator<Double> lengthEvaluator, EstimateEvaluator<Double> estimateEvaluator) 
aStar(RelationshipExpander expander, CostEvaluator<Double> lengthEvaluator, EstimateEvaluator<Double> estimateEvaluator) 
```

可以预见的是，我对[PathFinder](http://api.neo4j.org/1.8/org/neo4j/graphalgo/PathFinder.html)`findSinglePath()`实例的调用以不合时宜的方式结束：

```
java.lang.UnsupportedOperationException: Branch state disabled, pass in an initial state to enable it
    at org.neo4j.kernel.Traversal$1.getState(Traversal.java:100)[neo4j-kernel-1.8.jar:1.8] 
```

那么，如何在 AStar 算法工厂方法中“传入初始状态”没有[InitialStateFactory参数？](http://api.neo4j.org/1.8/org/neo4j/graphdb/traversal/InitialStateFactory.html)查看 post 1.8 API 文档似乎也没有（明显的）答案。

或者，是否有更好的方法来确保一组“非法”多节点子路径永远不会出现在从`findSinglePath()`Dijkstra 或 AStar PathFinder 调用返回的最佳路径中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:47:41.787

因此，Dijkstra 算法是在 Neo4j 中使用遍历框架实现的，而 A* 是自定义实现。然而，有一个 TraversalAStar 类在遍历框架之上实现了 A*。该类没有构造函数让您通过[https://github.com/neo4j/neo4j/pull/604](https://github.com/neo4j/neo4j/pull/604)解决的问题进入初始分支状态。

与 GraphAlgoFactory 提供的相比，很少有人关注比较和优化 TraversalAStar，但它应该提供您所追求的功能......一旦它被合并。