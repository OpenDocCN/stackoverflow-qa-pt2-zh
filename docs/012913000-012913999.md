# StackOverflow 问答 12913000-12913999

# android - 意图获取卸载应用程序的 UID

> ID：12913000
> 
> 赞同：4
> 
> 时间：2012-10-16T10:46:56.240
> 
> 标签：android, android-intent, uid

我有一个在任何应用程序卸载时触发的接收器。我想获取应用程序的 UID。目前我得到了已卸载的包名称，但是当我尝试获取 UID 时，它返回 null。目前，我正在从以下代码中获取任何包的 UID。

```
public String getID(String pckg_name) {
        ApplicationInfo ai = null;
        String id = "";
        try {
            ai = pm.getApplicationInfo(pckg_name, 0);
            id = "" + ai.uid;
        } catch (final NameNotFoundException e) {
            id = "";
        }

        return id;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:49:41.983

卸载软件包后，您将无法获取 UID，因为它不再存在。**删除包后**`Intent`发送广播。然而...

 **...来自[文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REMOVED)：

删除（卸载）应用程序时广播`Intent`的广播包含一个额外的内容`EXTRA_UID`，其中包含先前分配给包的整数 uid。**

# android - mapOverlay 项目背景没有出现在旋转的地图视图中？

> ID：12913005
> 
> 赞同：2
> 
> 时间：2012-10-16T10:47:16.367
> 
> 标签：android, android-mapview

嗨，在我的应用程序中，我正在处理旋转地图的 mapview。这意味着将 mapview 添加到 rotateview 类并使用传感器管理器。在 mapview 中，单击特定的 pin 后会加载很多 pin，它会在覆盖项上显示该位置的名称因为我正在使用 BallonItemizedOverlay 类..![不显示叠加项目背景](../Images/435ef7310460e94310bd448ab053edd4.png)

但是当我删除旋转类时，它显示如下![显示叠加项目背景]](../Images/d41df9d9a1240c54c826889042d647b1.png)

这是我的旋转视图类`

```
 public class RotateView extends ViewGroup implements SensorListener 

    {

    private static final float SQ2 = 1.414213562373095f;
    private final SmoothCanvas mCanvas = new SmoothCanvas();
    private float mHeading = 0;
    boolean check=false;

    public RotateView(Context context) {
        super(context);
    }

    public void onSensorChanged(int sensor, float[] values) {
        //Log.d(TAG, "x: " + values[0] + "y: " + values[1] + "z: " + values[2]);
        synchronized (this) {
            mHeading = values[0];

            if(!check)
            {
                if(Math.round(values[0])>0 || Math.round(values[0])<=90)
                {         

                  onGpsUpdate();
                  direction="NE";
                  GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                  doinback.execute();
                }

                if(Math.round(values[0])>90 || Math.round(values[0])<=180)
                {         
                  check=true;
                  onGpsUpdate();
                  direction="SE";
                  GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                  doinback.execute();

                }
                if(Math.round(values[0])>180 || Math.round(values[0])<=270)
                {   
                  check=true;

                  onGpsUpdate();
                  direction="SW";
                  GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                  doinback.execute();

                }
                if(Math.round(values[0])>270 || Math.round(values[0])<=360)
                {   
                  check=true;   
                  onGpsUpdate();
                  direction="NW";
                  GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                  doinback.execute();

                }

                check=true;
            }
            else
            {
            if(Math.round(values[0])>0)
            {                                   
             if(Math.round(values[0])==45)
              {                           
                onGpsUpdate();
                direction="NE";
                GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                doinback.execute();

              }

              if(Math.round(values[0])==135)
              {       
                  check=true;
                  onGpsUpdate();
                  direction="SE";
                  GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                  doinback.execute();

              }
              if(Math.round(values[0])==225)
              { 
                  check=true;                
                  onGpsUpdate();
                  direction="SW";
                  GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                  doinback.execute();

              }
              if(Math.round(values[0])==315)
              { 
                  check=true;   
                  onGpsUpdate();
                  direction="NW";
                  GetPlacesDoInBack doinback=new GetPlacesDoInBack();
                  doinback.execute();

              }
            }
            }
            double lat=Double.parseDouble(lati);
            double lag=Double.parseDouble(longi);

            Location zeroLocation = new Location("");
            zeroLocation.setLatitude(lat);
            zeroLocation.setLongitude(lag);

            Location testLocation = new Location("");

            testLocation.setLatitude(Double.parseDouble("27.74993670"));
            testLocation.setLongitude(Double.parseDouble("85.37316799"));

            final float[] results= new float[3];
            // The computed distance in meters is stored in results[0].
            // If results has length 2 or greater, the initial bearing is stored in results[1].
            // If results has length 3 or greater, the final bearing is stored in results[2].
            Location.distanceBetween(lat, lag, Double.parseDouble("27.74993670"), Double.parseDouble("85.37316799"), results);

            final float bearing = results[1];

            double lat1=Double.parseDouble(lati);
            double lon1=Double.parseDouble(longi);

            double lat2=Double.parseDouble("27.74993670");
            double lon2=Double.parseDouble("85.37316799");

            double d1= Math.toRadians(lat2-lat1);
            double d2= Math.toRadians(lon2-lon1);

            lat1=Math.toRadians(lat1);
            lat2=Math.toRadians(lat2);

            double y=Math.sin(d2) * Math.cos(lat2);
            double x=Math.cos(lat1)*Math.sin(lat2) -
            Math.sin(lat1)*Math.cos(lat2)*Math.cos(d2);

            double  brng = Math.toDegrees(Math.atan2(y, x));
            brng=360-Math.abs(brng);

            // Log.e("","****"+brng+"***"+mHeading+"***"+(brng-mHeading));
            brng=360-Math.abs(zeroLocation.bearingTo(testLocation));

            //Log.e("",""+zeroLocation.bearingTo(testLocation)+"****"+bearing+"***"+(brng-mHeading)); 
            invalidate();
        }
    }

    class GetPlacesDoInBack extends AsyncTask<URL, Integer, Long>
    {
        int i=0;

        @Override
        protected Long doInBackground(URL... arg0) 
        {
            lati="35.227087";longi="-80.843127";
            response=UrltoValue.getValuefromUrl(DataUrls.nearbylocationsurl+"?lat="+lati+"&long="+longi+"&direction="+direction+"&id="+scatid);

            Log.e("Check",UrltoValue.getValuefromUrl(DataUrls.nearbylocationsurl+"?lat="+lati+"&long="+longi+"&direction="+direction+"&id="+scatid));
            Log.e("getplaces response", response);

                try
                {
                    JSONArray jarray=new JSONArray(response);
                    placesname=new String[jarray.length()];
                    placeslat=new String[jarray.length()];
                    placeslon=new String[jarray.length()];
                    placesaddr=new String[jarray.length()];
                    for(int i=0;i<jarray.length();i++)
                    {
                        placesname[i]=jarray.getJSONObject(i).getString("name");
                        placeslat[i]=jarray.getJSONObject(i).getString("latitude");
                        placeslon[i]=jarray.getJSONObject(i).getString("longitude");
                        placesaddr[i]=jarray.getJSONObject(i).getString("address");

                        Log.e("placesname",placesname[i]);Log.e("placeslat",placeslat[i]);
                        Log.e("placeslon",placeslon[i]);Log.e("placesaddr",placesaddr[i]);
                    }
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                }
            return null;

        }

        protected void onPostExecute(Long result) 
        {   
            home.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(click==0)
                    {
                        click=1;
                        headertext.setText("Categories");
                    home.setBackgroundResource(R.drawable.homeicon);
                    maplayout.setVisibility(View.GONE);
                    vlayout.setVisibility(View.VISIBLE);
                    }
                    else
                    {
                         BalloonItemizedOverlay.check=0;
                            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                            imm.hideSoftInputFromWindow(v.getWindowToken(),0);
                            Intent in=new Intent(DNCActivity.this,Main.class);
                            startActivity(in);
                            finish();   
                    }
                }
            });
            if(response.trim().equals("[]"))
            {

            }
            else
            {
                try
                {
                    for (Overlay overlay : mapOverlays) {
                        if (overlay instanceof BalloonItemizedOverlay<?> ) {
                            if (((BalloonItemizedOverlay<?>) overlay).balloonView != null)
                                ((BalloonItemizedOverlay<?>) overlay).balloonView.setVisibility(View.GONE);
                        }
                    }           
                    mapOverlays.clear();
                    if(!mapOverlays.isEmpty())
                    {
                        mapOverlays.remove(itemizedOverlay);
                        mapView.invalidate();           
                        mapView.getOverlays().remove(mapOverlays);
                        mapOverlays.clear();            
                    }
                     for(int j=0;j<placeslon.length;j++)
                     {
                        String templat=placeslat[j];
                        String templon=placeslon[j];
                        String title="Name: "+placesname[j];
                        String park="Address: "+placesaddr[j];
                        mapLoad(templat,templon,title);
                     }

                }
                catch(Exception e)
                {

                }
            }
        }
    }

    @Override
    protected void dispatchDraw(Canvas canvas) 
    {
        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        canvas.rotate(-mHeading, getWidth() * 0.5f, getHeight() * 0.5f);
        mCanvas.delegate = canvas;
        super.dispatchDraw(mCanvas);
        canvas.restore();
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) 
    {
        final int width = getWidth();
        final int height = getHeight();
        final int count = getChildCount();
        for (int i = 0; i < count; i++) 
        {
            final View view = getChildAt(i);
            final int childWidth = view.getMeasuredWidth();
            final int childHeight = view.getMeasuredHeight();
            final int childLeft = (width - childWidth) / 2;
            final int childTop = (height - childHeight) / 2;
            view.layout(childLeft, childTop, childLeft + childWidth, childTop + childHeight);
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
    {
        int w = getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec);
        int h = getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec);
        int sizeSpec;
        if (w > h) 
        {
            sizeSpec = MeasureSpec.makeMeasureSpec((int) (w * SQ2), MeasureSpec.EXACTLY);
        }
        else 
        {
            sizeSpec = MeasureSpec.makeMeasureSpec((int) (h * SQ2), MeasureSpec.EXACTLY);
        }
        final int count = getChildCount();
        for (int i = 0; i < count; i++) 
        {
            getChildAt(i).measure(sizeSpec, sizeSpec);
        }
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        return super.dispatchTouchEvent(ev);
    }

    public void onAccuracyChanged(int sensor, int accuracy) {

    }
} 
```

`如何在旋转的地图视图中显示叠加项目背景..任何人都可以帮助我请
提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:25:23.600

While rotating mapview with rotateview you have to rotate touch events also along with mapview by overriding `dispatchTouchEvent()`

See the following code

```
 @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        float[] coords = new float[] {
                event.getX(), event.getY()
        };
        adjustCoords(coords, -mHeading);
        MotionEvent evt = MotionEvent.obtain(event.getDownTime(), event.getEventTime(), event
                .getAction(), coords[0], coords[1], event.getPressure(), event.getSize(), event
                .getMetaState(), event.getXPrecision(), event.getYPrecision(),    event.getDeviceId(),
                event.getEdgeFlags());
        return super.dispatchTouchEvent(evt);
    }
    protected void adjustCoords(float[] coords, float deg) {
        float x = coords[0];
        float y = coords[1];
        int centerX = getWidth() / 2;
        int centerY = getHeight();
        // convert to radians
        float rad = (float) ((deg * Math.PI) / 180F);
        float s = (float) Math.sin(rad);
        float c = (float) Math.cos(rad);
        // translate point back to origin:
        x -= centerX;
        y -= centerY;
        // apply rotation
        float tmpX = x * c - y * s;
        float tmpY = x * s + y * c;
        x = tmpX;
        y = tmpY;
        // translate point back:
        x += centerX;
        y += centerY;
        coords[0] = x;
        coords[1] = y;
    } 
```

# java - 编译错误 - 在 IntelliJ IDEA 中复制类

> ID：12913012
> 
> 赞同：3
> 
> 时间：2012-10-16T10:47:42.227
> 
> 标签：java, maven, intellij-idea, compilation

我正在尝试`Make project`在 IDEA 中，但我有编译错误。如何解决这个问题？我在项目中没有重复的课程。当我按下`Jump to source`它时，它会显示`target`项目目录中的类。

```
duplicate class: com.kmware.ttk.kladr.model.KladrSchemStreet_ 
```

与项目中的所有类相同

IDEA 11.1.3 UBUNTU 12.04 JBoss 为 7

附加代码：

```
Round 1:
    input files: {com.kmware.ttk.kladr.model.KladrSchemBaseShortening_, com.kmware.ttk.kladr.model.KladrStreetShortening_, com.kmware.ttk.kladr.model.KladrSchemAltNames_, com.kmware.ttk.kladr.model.KladrSchem_, com.kmware.ttk.kladr.model.RQObject_, com.kmware.ttk.kladr.model.KladrBuilding_, com.kmware.ttk.kladr.model.KladrSettings_, com.kmware.ttk.kladr.model.KladrCity_, com.kmware.ttk.kladr.model.KladrSchemStreet_, com.kmware.ttk.kladr.model.KladrSchemBuilding_, com.kmware.ttk.kladr.model.KladrStreet_, com.kmware.ttk.kladr.dao.KladrUpdateDAO, com.kmware.ttk.kladr.dao.KladrStreetDAO, com.kmware.ttk.kladr.model.RQObject, com.kmware.ttk.kladr.model.KladrSettings, com.kmware.ttk.kladr.model.KladrBuilding, com.kmware.ttk.kladr.model.KladrSchemBaseShortening, com.kmware.ttk.kladr.model.KladrCity, com.kmware.ttk.kladr.model.KladrSchemStreet, com.kmware.ttk.kladr.model.KladrSchemAltNames, com.kmware.ttk.kladr.model.KladrSchem, com.kmware.ttk.kladr.dao.KladrStreetShorteningDAO, com.kmware.ttk.kladr.dao.BasicKladrDAO, com.kmware.ttk.kladr.dao.KladrBuildingDAO, com.kmware.ttk.kladr.dao.helper.LazyModelProperties, com.kmware.ttk.kladr.model.KladrStreet, com.kmware.ttk.kladr.model.KladrSchemBuilding, com.kmware.ttk.kladr.model.KladrStreetShortening}

    annotations: [javax.annotation.Generated, javax.persistence.metamodel.StaticMetamodel, javax.ejb.Stateless, javax.persistence.PersistenceContext, javax.ejb.TransactionAttribute, org.jboss.ejb3.annotation.TransactionTimeout, javax.persistence.MappedSuperclass, javax.persistence.Id, javax.persistence.Column, javax.persistence.Version, java.lang.Override, javax.persistence.Entity, javax.persistence.Table, javax.persistence.GeneratedValue, javax.persistence.Inheritance, javax.validation.constraints.NotNull, org.hibernate.validator.constraints.NotEmpty, javax.validation.constraints.Digits, java.lang.SuppressWarnings]

    last round: false

Note: Hibernate JPA 2 Static-Metamodel Generator 1.2.0.Final

Processor org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor matches [javax.persistence.Entity, javax.persistence.MappedSuperclass] and returns false.

Processor org.hibernate.validator.ap.ConstraintValidationProcessor matches [javax.persistence.PersistenceContext, javax.ejb.TransactionAttribute, javax.persistence.Column, javax.validation.constraints.NotNull, javax.persistence.Table, org.jboss.ejb3.annotation.TransactionTimeout, java.lang.Override, javax.persistence.Id, javax.persistence.Version, javax.persistence.MappedSuperclass, org.hibernate.validator.constraints.NotEmpty, javax.ejb.Stateless, javax.persistence.metamodel.StaticMetamodel, javax.persistence.Entity, javax.validation.constraints.Digits, javax.annotation.Generated, java.lang.SuppressWarnings, javax.persistence.Inheritance, javax.persistence.GeneratedValue] and returns false.

Round 2:

    input files: {com.kmware.ttk.kladr.model.KladrSchemStreet_, com.kmware.ttk.kladr.model.KladrSchemBuilding_, com.kmware.ttk.kladr.model.KladrSchemAltNames_, com.kmware.ttk.kladr.model.KladrStreet_, com.kmware.ttk.kladr.model.KladrSchemBaseShortening_, com.kmware.ttk.kladr.model.KladrBuilding_, com.kmware.ttk.kladr.model.KladrCity_, com.kmware.ttk.kladr.model.KladrSchem_, com.kmware.ttk.kladr.model.RQObject_, com.kmware.ttk.kladr.model.KladrStreetShortening_, com.kmware.ttk.kladr.model.KladrSettings_}

    annotations: []

Processor org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor matches [] and returns false.

Processor org.hibernate.validator.ap.ConstraintValidationProcessor matches [] and returns false.

Round 3:

    input files: {}

    last round: true

Compilation completed with 11 errors and 0 warnings

11 errors
0 warnings

/home/kelevra/java/KLADR/kladr/kladr-ejb/target/classes/com/kmware/ttk/kladr/model/KladrSchemStreet_.java
duplicate class: com.kmware.ttk.kladr.model.KladrSchemStreet_

/home/kelevra/java/KLADR/kladr/kladr-ejb/target/classes/com/kmware/ttk/kladr/model/KladrSchemBuilding_.java
duplicate class: com.kmware.ttk.kladr.model.KladrSchemBuilding_

/home/kelevra/java/KLADR/kladr/kladr-ejb/target/classes/com/kmware/ttk/kladr/model/KladrSchemAltNames_.java
duplicate class: com.kmware.ttk.kladr.model.KladrSchemAltNames_

... 
```

还有 8 节课

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:11:37.730

您是否以某种方式将模块的编译输出添加为依赖项？直接通过 IntelliJ 或通过 Maven。

# php - Apache2 - 分段错误

> ID：12913013
> 
> 赞同：1
> 
> 时间：2012-10-16T10:47:45.503
> 
> 标签：php, apache

Apache 服务器生成到 /var/log/apache2/error.log：

*[Tue Oct 16 11:36:40 2012] [notice] child pid 4091 exit signal Segmentation fault (11)*

我用 MySQL 数据库运行 PHP 应用程序。其他应用程序都可以。

问题是 PHP 代码还是服务器？

编辑，参数系统：

*   操作系统 Ubuntu 12.04
*   阿帕奇/2.2.22
*   PHP/5.3.10-1ubuntu3.4

# linux - cronjob 等待理解

> ID：12913016
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:47:54.523
> 
> 标签：linux, bash, shell, cron

波纹管是我的 cronjob 脚本，我只想

等待**3rd_job**完成以开始**4th,5th**

& 等待**2nd_job**完成以开始**第 6、7、8 个**工作。

我怎么能做到这一点提前谢谢

目前开始**第 4,5**份工作，它正在等待第**1,2,3**份工作的完成，但我只想等待**第 3**份开始第**4,5**份工作，只等待**第 2**份完成说明第**6,7,8 份工作**

```
 #!/bin/bash
    cd /home/ubuntu/
    PATH=$PATH:/usr/local/bin
    export PATH
    nohup scrapy crawl 1st_job &
    nohup scrapy crawl 2nd_job &
    nohup scrapy crawl 3rd_job &
    wait $(pgrep 3rd_job)
    nohup scrapy crawl 4th_job &
    nohup scrapy crawl 5th_job &
    wait $(pgrep 2nd_job)
    nohup scrapy crawl 6th_job &
    nohup scrapy crawl 7th_job &
    nohup scrapy crawl 8th_job & 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:04:52.587

您可以使用`$!`包含最后生成的异步任务的 PID 的变量：

```
#!/bin/bash
cd /home/ubuntu/
PATH=$PATH:/usr/local/bin
export PATH
nohup scrapy crawl 1st_job &
nohup scrapy crawl 2nd_job &
pid_2nd="$!"
nohup scrapy crawl 3rd_job &
wait $!
nohup scrapy crawl 4th_job &
nohup scrapy crawl 5th_job &
wait $pid_2nd
nohup scrapy crawl 6th_job &
nohup scrapy crawl 7th_job &
nohup scrapy crawl 8th_job & 
```

如果您想要一些更复杂的东西，例如以有向无环图方式执行（例如，一旦第 3 次完成开始 4-5 并且一旦第 2 次完成开始 6-8）我建议您将调用重新组织为函数，所以可以异步调用它们：

```
#!/bin/bash
second () {
    nohup scrapy crawl 2nd_job
    nohup scrapy crawl 6th_job &
    nohup scrapy crawl 7th_job &
    nohup scrapy crawl 8th_job &
}

third () {
    nohup scrapy crawl 3rd_job
    nohup scrapy crawl 4th_job &
    nohup scrapy crawl 5th_job &
}

cd /home/ubuntu/
PATH=$PATH:/usr/local/bin
export PATH
nohup scrapy crawl 1st_job &
third &
second & 
```

希望这会有所帮助=)

# android - 如何查看一些 Android 类的代码？

> ID：12913017
> 
> 赞同：1
> 
> 时间：2012-10-16T10:47:58.020
> 
> 标签：android

我正在开发一些 Android 应用程序，我需要查看一些 Android 类的源代码。我曾尝试使用 Android Source 工具（作为 Eclipse 扩展安装），但我仍然无法对 Android 类使用“Open Declaration”，因此我需要使用替代方法。请建议我，我可以在线打开某些课程的代码或下载资源吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:52:15.737

这是链接，它提供了有关其版本的类代码：

[http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/](http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/)

# sql - 如何根据一个表中的不同字段值减去两个总和（视图）

> ID：12913024
> 
> 赞同：0
> 
> 时间：2012-10-16T10:48:18.360
> 
> 标签：sql, tsql, sql-server-2000

示例：我需要其中 id = 1 的金额之和不等于 id <> 1 的金额之和的数字，以及 id 和差异。
该表（在本例中为视图）可能如下所示：

```
NUMBER   AMOUNT   ID

0001     500       1
0001     500       2
0002     400       3
0003     299       1
0003     300       3
0003     300       3 
```

非常感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:45:27.433

```
SELECT
    MyView.Number,
    MyView.Amount - D.OverOneTotal AS Difference
FROM
    MyView
    LEFT JOIN 
    (SELECT
        Number,
        SUM(Amount) OverOneTotal
    FROM
        MyView
    WHERE
        ID > 1
    GROUP BY 
        Number) D ON MyView.Number = D.Number
WHERE
    MyView.ID = 1
    AND MyView.Amount <> D.OverOneTotal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:39:24.617

使用此查询，您可以获得按数字分组的金额总和，ID 等于 1，ID 不等于 1。

```
SELECT NUMBER
, SUM(CASE WHEN ID = 1 THEN AMOUNT ELSE 0 END) AS Equals1
, SUM(CASE WHEN ID <> 1 THEN AMOUNT ELSE 0 END) AS NotEquals1
FROM DataTable
GROUP BY NUMBER 
```

如果这是您所期望的，请使用以下查询来获取按数字分组的差额。

```
SELECT NUMBER, (Equals1 - NotEquals1) AS DifferenceAmount
FROM
(
    SELECT NUMBER
    , SUM(CASE WHEN ID = 1 THEN AMOUNT ELSE 0 END) AS Equals1
    , SUM(CASE WHEN ID <> 1 THEN AMOUNT ELSE 0 END) AS NotEquals1
    FROM DataTable
    GROUP BY NUMBER
) AS GroupedTable
WHERE Equals1 <> NotEquals1 
```

# compiler-construction - 编译器组合源的阶段

> ID：12913029
> 
> 赞同：1
> 
> 时间：2012-10-16T10:48:35.860
> 
> 标签：compiler-construction

在进行语义分析（包括类型检查之类的东西）之前，我想拥有整个程序（通过抽象语法树或其他方式表示）很重要。

为了将所有信息放在一起，您必须组合源文件、引用库的元信息等。

这个组合阶段如何被称为因为“链接”通常是指将编译器生成的东西而不是输入文件和导入的库放在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:15:18.947

编译器通常将单个源文件编译为单个目标文件。

源文件不一定一次全部加载到内存中。并且目标文件在它们被**链接**之前不会被合并。

要进行类型检查（除其他外），编译器需要知道该编译单元引用其他单元的所有方式。在 C/C++ 中，这是通过预处理器中包含的头文件。

# jsf - 如何将 p:blockUI 与 p:tabView 一起使用

> ID：12913030
> 
> 赞同：2
> 
> 时间：2012-10-16T10:48:41.107
> 
> 标签：jsf, jsf-2, primefaces

我想创建带有进度条的选项卡。像这样的东西：

```
<p:tabView id="tabs" dynamic="true" cache="false">
    <p:tab id="tab1" title="tab1" >
        <ui:include src="tab1.xhtml" />
    </p:tab>
    <p:tab id="tab2" title="tab2" >
        <ui:include src="tab2.xhtml" />
    </p:tab>

    <p:blockUI block="tabs" trigger="tabs">  
        LOADING
    </p:blockUI>  
</p:tabView> 
```

但它不起作用。你能帮我纠正我的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:44:45.440

**尝试这个：**

```
<p:tabView id="tabs">

  <p:ajax event="tabChange" onstart="BUI.show()" oncomplete="BUI.hide()" />

  <p:tab id="tab1" title="tab1">
    <h:outputtext value="TAB 1" />
  </p:tab>

  <p:tab id="tab2" title="tab2">
    <h:outputtext value="TAB 2" />
  </p:tab>

</p:tabView>

<p:blockUI widgetVar="BUI" block="tabs">
  LOADING
</p:blockUI> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T12:34:18.017

以下代码对我有用（Primefaces 5.2）

```
<p:blockUI block="tabs" widgetVar="tabsBlocker">  
    LOADING
</p:blockUI>  

<p:tabView id="tabs" dynamic="true" cache="false" 
    onTabChange="PF('tabsBlocker').show()" 
    onTabShow="PF('tabsBlocker').hide()">

  <p:tab id="tab1" title="tab1" >
      <ui:include src="tab1.xhtml" />
  </p:tab>

  <p:tab id="tab2" title="tab2" >
      <ui:include src="tab2.xhtml" />
  </p:tab>

</p:tabView> 
```

# django - Sphinx - 记录 Django 模型

> ID：12913039
> 
> 赞同：12
> 
> 时间：2012-10-16T10:49:15.553
> 
> 标签：django, django-models, python-sphinx

我正在使用 Sphinx 来记录我拥有的 Django 应用程序。

在自动生成文档时，我希望 Sphinx 在文档中添加每个模块的字段。

狮身人面像完全跳过这些。事实上，没有任何领域的痕迹。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T12:03:20.783

你必须使用

```
@param description 
```

在模型的文档字符串中，对于您希望由 sphinx 记录的每个字段。

或者，你应该看看这个你想要的[片段（减去无聊的写作部分）](http://djangosnippets.org/snippets/2533/)

[编辑]

如果你打算使用这个片段，在 django>=1.6

```
obj._meta._fields() 
```

已删除，请更改为

```
_meta.fields 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-12T11:01:16.687

这是上面@Samuele Mattiuzzo 提到的一个片段，已更新以支持实际的 Django 版本（在 1.11 LTS 上测试）：

```
import inspect
from django.utils.html import strip_tags

def process_docstring(app, what, name, obj, options, lines):
    # This causes import errors if left outside the function
    from django.db import models

    # Only look at objects that inherit from Django's base model class
    if inspect.isclass(obj) and issubclass(obj, models.Model):
        # Grab the field list from the meta class
        fields = obj._meta.fields

        for field in fields:
            # Decode and strip any html out of the field's help text
            help_text = strip_tags(field.help_text)

            # Decode and capitalize the verbose name, for use if there isn't
            # any help text
            verbose_name = field.verbose_name

            if help_text:
                # Add the model field to the end of the docstring as a param
                # using the help text as the description
                lines.append(u':param %s: %s' % (field.attname, help_text))
            else:
                # Add the model field to the end of the docstring as a param
                # using the verbose name as the description
                lines.append(u':param %s: %s' % (field.attname, verbose_name))

            # Add the field's type to the docstring
            lines.append(u':type %s: %s' % (field.attname, type(field).__name__))

    # Return the extended docstring
    return lines

def setup(app):
    # Register the docstring processor with sphinx
    app.connect('autodoc-process-docstring', process_docstring) 
```

只需将其添加到您的末尾，`conf.py`模型字段将自动添加到文档中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T11:29:14.497

如果您打算在 django 1.7+ 中使用此[代码段](http://djangosnippets.org/snippets/2533/)：

1.  你必须设置你的 django 项目 `django.setup()`
2.  使用 `obj._meta.get_fields()` 代替： `obj._meta._fields()`

# ios - 我可以将 FBNativeDialogs 设置为在提要中显示“通过 MyApp”而不是“通过 iOS”吗？

> ID：12913041
> 
> 赞同：0
> 
> 时间：2012-10-16T10:49:29.487
> 
> 标签：ios, facebook, facebook-graph-api, ios6

有没有办法使用本机 iOS 6 FB 共享界面，使发布的提要项目显示“通过 MyApp”而不是“通过 iOS”？

我试过同时使用`FBNativeDialogs`and`SLComposeViewController`但结果总是显示“通过 iOS”。

# java - 比较数据的例外

> ID：12913042
> 
> 赞同：0
> 
> 时间：2012-10-16T10:49:30.650
> 
> 标签：java, exception, loops

使索引超出范围异常

```
 for (int recordData = 0; recordData < recordDataList.size(); recordData++)
    {
        RecordData nextRecordData = recordDataList.get(recordData + 1);
        if (nextRecordData.getRespondentId() !=     
            recordDataList.get(recordData).getRespondentId()) {
            rowDataNumber++;
        }
    } 
```

这里的大小是 3。但我还需要将第三个数据与第二个数据进行比较。我修改了我的喜欢

```
 for (int i = 1; i < recordDataList.size(); i++) {
                         RecordData recordData = recordDataList.get(i - 1);
                RecordData nextRecordData = recordDataList.get(i);
                         commentData = recordData.getCommentText();
if (nextRecordData.getRespondentId() != recordData
                        .getRespondentId()) {
                    rowDataNumber++;
                }
} 
```

大小是三，我只得到commentData 中的前两个数据，第三个数据没有显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:52:51.420

当您将一个值与下一个值进行比较时，需要有一个下一个值。

你需要使用

```
for (int i = 0; i < recordDataList.size() - 1; i++) {
    RecordData recordData = recordDataList.get(i);
    RecordData nextRecordData = recordDataList.get(i + 1); 
```

或者

```
for (int i = 1; i < recordDataList.size(); i++) {
    RecordData recordData = recordDataList.get(i - 1);
    RecordData nextRecordData = recordDataList.get(i); 
```

# objective-c - 如何使用 nsdictionary 拆分字符串和交换值

> ID：12913045
> 
> 赞同：0
> 
> 时间：2012-10-16T10:49:35.397
> 
> 标签：objective-c, ios

我是 ios 新手，正在尝试做这样的事情

```
self.dataArray = [dictionary valueForKey:@"LIST"];

{
  "List": [
    {
      "FULLNAME": "FirstName, LastName",
      "ID": "281"
    }
  ]
} 
```

我想交换“全名”中的值，即我希望它是姓氏，名字

我尝试了各种方法，但都行不通。有人能告诉我如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T10:57:02.253

假设您知道如何进行字典操作，这里有一种交换字符串中元素的方法：

```
NSString* name = @"Firstname, Lastname";
// Remove the space after comma (not necessary if you know the name will always
// have a space after comma, then just split on ', '.
NSString* normalizedName = [name stringByReplacingOccurrencesOfString:@", " withString:@","];
// Split the string on ','.
NSArray* nameParts = [normalizedName componentsSeparatedByString:@","];
// Reverse the array
NSArray* reverseNameParts = [[nameParts reverseObjectEnumerator] allObjects];
// Join the array with ', '
NSString* revname = [reverseNameParts componentsJoinedByString:@", "];
NSLog(@"Reversed name parts: %@", revname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:05:40.853

如果您的字典包含数组，我相信它应该是 objectForKey 而不是 valueForKey。

```
self.dataArray = [dictionary objectForKey:@"LIST"];
    for(NSString *fullname in self.dataArray){
        if([fullname isEqualToString:@"FULLNAME"]){
            NSArray *name = [fullname componentsSeparatedByString:@","];
            NSMutableString* reverseName = [NSMutableString string];
            for (int i=[name count]-1; i>=0;i--){
                [reverseName appendFormat:@", ", [name objectAtIndex:i]];
                //reverse name should be what you are looking for..or something close
            }
        }
    } 
```

希望这可以帮助

# php - preg_replace - 两个不同字符的正则表达式 php

> ID：12913053
> 
> 赞同：0
> 
> 时间：2012-10-16T10:49:55.757
> 
> 标签：php, regex

这是 preg_replace （正则表达式）从字符串中删除 ?ajax=true 或 &ajax=true 的正确语法吗？

```
echo preg_replace('/(\?|&)ajax=true/', '', $string); 
```

因此，例如 /hello/hi?ajax=true 会给我 /hello/hi 和 /hello/hi?ajax=true 会给我 /hello/hi

我需要逃避&吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:34:19.787

你为什么不试试呢？

您不需要转义“&”。它不是正则表达式中的特殊字符。

你的表达应该是有效的，这是你正在使用的一种替代方式。但是，如果您的交替中只有单个字符，那么如果您使用字符类，它会更具可读性。

```
echo preg_replace('/[?&]ajax=true/', '', $string); 
```

`[?&]`是一个字符类，它将匹配方括号之间列出的字符中的一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:57:20.090

我觉得你的表达没问题。您可以添加 (?i) 以忽略大写字母。结果应该是这样的：

```
echo preg_replace('/(\?|&)(?i)ajax=true/', '', $string); 
```

# python - 在 Heroku 上的 Python 中安装烧瓶

> ID：12913054
> 
> 赞同：0
> 
> 时间：2012-10-16T10:49:58.030
> 
> 标签：python, facebook, heroku, flask, virtualenv

我正在尝试遵循本[指南](https://devcenter.heroku.com/articles/python)。我制作`virtualenv`并安装`flask`在其中：

```
Requirement already satisfied (use --upgrade to upgrade): Flask in     /usr/local/lib/python2.7/dist-packages
Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in   /usr/local/lib/python2.7/dist-packages (from Flask)
Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /usr/local/lib/python2.7/dist-packages (from Flask) 
```

文件后`pip freeze > requirements.txt`仅包含：

```
argparse==1.2.1
distribute==0.6.28
wsgiref==0.1.2 
```

并且没有 Flask 包。我正在尝试运行简单的示例并得到：

```
ImportError: No module named flask 
```

如何正确安装软件包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:58:48.510

你需要`pip freeze > reuirements.txt`在你的 virtualenv 中运行。因此，请确保您的 virtualenv 已正确激活。由于 Heroku 文档主要是从 Linux 的角度编写的，这可能有点棘手，尤其是在 Windows 上（请参阅[相关问题](https://stackoverflow.com/questions/1365081/virtualenv-in-powershell)）：

*   Windows 命令提示符激活是使用`venv\Scripts\activate.bat`
*   如果您使用的是 Windows PowerShell，则需要改为运行`venv\Scripts\activate.ps1`。

请注意，您还需要激活 virtualenv `sudo`。例子：

```
sudo bash
source venv/bin/activate
pip install Flask 
```

然而，virtualenv 的要点之一是您不需要 sudo。因此，您可以简单地省略使用 sudo 并简单地运行：

```
source venv/bin/activate
pip install Flask 
```

# android - Android使用传感器改变亮度

> ID：12913055
> 
> 赞同：0
> 
> 时间：2012-10-16T10:50:01.043
> 
> 标签：android, android-sensors

我有一个应用程序，通过它我可以手动更改设备的亮度。我想使用传感器来做到这一点。我必须添加什么代码？另外我必须在清单中进行哪些更改？

这是我的代码：

```
package com.example.brightnessdemo;

import android.os.Bundle;
import android.provider.Settings;
import android.provider.Settings.SettingNotFoundException;
import android.provider.Settings.System;
import android.app.Activity;
import android.content.ContentResolver;
import android.view.Menu;
import android.view.Window;
import android.view.WindowManager;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity 
{

private SeekBar brightbar;  
private int brightness;  
private ContentResolver cResolver;  
private Window window; 

TextView tv;
//float BackLightValue = 0.5f;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    brightbar=(SeekBar)findViewById(R.id.seekBar1);
    tv=(TextView)findViewById(R.id.textView1);

    cResolver=getContentResolver();
    window=getWindow();

    brightbar.setMax(100);
    brightbar.setKeyProgressIncrement(1);

    try 
    {
        brightness=System.getInt(cResolver, System.SCREEN_BRIGHTNESS);
    } 
    catch (SettingNotFoundException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    brightbar.setProgress(brightness);

    int SysBackLightValue = (int)(brightness);
    android.provider.Settings.System.putInt(getContentResolver(),android.provider.Settings.System.SCREEN_BRIGHTNESS,SysBackLightValue);

    brightbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
    {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) 
        {
            System.putInt(cResolver, System.SCREEN_BRIGHTNESS, brightness);  
            android.view.WindowManager.LayoutParams layoutpars = window.getAttributes(); 
            layoutpars.screenBrightness = brightness;  
            window.setAttributes(layoutpars); 

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) 
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) 
        {
               brightness = progress;  
               tv.setText(""+brightness);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:01:37.190

您可以使用它来根据更改后的 seekbar 值进行设置

```
WindowManager.LayoutParams layout = getWindow().getAttributes();
layout.screenBrightness = brightness;
getWindow().setAttributes(layout); 
```

如果您需要它一致，那么您可以使用 IHardwareService 接口这是我发现的一个示例

[http://www.tutorialforandroid.com/2009/01/changeing-screen-brightness.html](http://www.tutorialforandroid.com/2009/01/changing-screen-brightness.html)

```
package com.test;

import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.util.Log;

public class Test extends Activity implements SensorEventListener{

 private SensorManager mSensorManager;
 private Sensor mLight;

 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

   mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
     mLight = mSensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);

 }
 @Override
 protected void onResume() {
   mSensorManager.registerListener(this, mLight, SensorManager.SENSOR_DELAY_NORMAL);
  super.onResume();
 }
 @Override
 protected void onPause() {
  mSensorManager.unregisterListener(this);
  super.onPause();
 }
 public void onAccuracyChanged(Sensor sensor, int accuracy) {
   if(sensor.getType() == Sensor.TYPE_LIGHT){
    Log.i("Sensor Changed", "Accuracy :" + accuracy);
   }

 }

 public void onSensorChanged(SensorEvent event) {
  if( event.sensor.getType() == Sensor.TYPE_LIGHT){
   Log.i("Sensor Changed", "onSensor Change :" + event.values[0]);
  }

 }
} 
```

# eclipse - Eclipse Juno 拼写检查器拒绝忽略 Javadoc @author 字段中的电子邮件地址

> ID：12913058
> 
> 赞同：3
> 
> 时间：2012-10-16T10:50:21.947
> 
> 标签：eclipse

我在课堂评论中有@author Javadoc 标签。令人沮丧的是，Eclipse Juno 拼写检查器，一个非常有用的工具，一直坚持认为电子邮件地址拼写错误，如下所示：

![电子邮件地址中的拼写检查错误](../Images/31d19a33f7c2c6f8d97457e882fdede4.png)

拼写选项“忽略 Internet 地址”已选中。将“@healthometry.com”添加到用户定义的字典没有帮助 - 拼写检查器一直坚持认为地址中有拼写错误“@healthometry.com”。

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:22:34.533

“@”是为 JavaDoc 中的标签保留的，因此您的邮件地址在那里根本无效。使用 HTML 序列“@” （没有空格）代替。

# php - PHP MYSQL 脚本错误

> ID：12913061
> 
> 赞同：0
> 
> 时间：2012-10-16T10:50:27.677
> 
> 标签：php, mysql

请帮忙找出一个错误：结果是查询为空！我不知道问题可能出在哪里，实际上我知道mysql_query可能有问题：

```
<?php
include("connect.php");
?>
<?php
$result = mysql_query("SELECT PEOPLE.ID AS ID, 
                            PEOPLE.NAME AS NAME, 
                            TICKETS.TICKETID AS TICKET_NO, 
                            RECEIPTS.DATENEW AS TICKET_DATE, 
                            PAYMENTS.TOTAL AS MONEY, 
                            CUSTOMERS.NAME AS CUSTOMER, 
                            PAYMENTS.PAYMENT AS PAYMENT
        FROM PEOPLE, RECEIPTS 
        INNER JOIN TICKETS ON RECEIPTS.ID = TICKETS.ID 
        INNER JOIN PAYMENTS ON RECEIPTS.ID = PAYMENTS.RECEIPT
        INNER JOIN CUSTOMERS ON TICKETS.CUSTOMER = CUSTOMERS.ID
        WHERE TICKETS.PERSON = '.$ID.'");
if ($num > 0 ) {
$i=0;
while ($i < $num) {
        $ID = stripslashes(mysql_result($result,$i,"ID"));
        $ID = stripslashes(mysql_result($result,$i,"ID"));
        $NAME = stripslashes(mysql_result($result,$i,"NAME"));
        $TICKET_NO = stripslashes(mysql_result($result,$i,"TICKET_NO"));
        $TICKET_DATE = stripslashes(mysql_result($result,$i,"TICKET_DATE"));
        $MONEY = stripslashes(mysql_result($result,$i,"MONEY"));
        $CUSTOMER = stripslashes(mysql_result($result,$i,"CUSTOMER"));
        $PAYMENT = stripslashes(mysql_result($result,$i,"PAYMENT"));

    $row .= '<tr>
    <td><a href="update.php?ID='.$ID.'">'.$ID.'</a></td>
    <td><a href="update.php?NAME='.$NAME.'">'.$NAME.'</a></td>
    <td><a href="update.php?TICKET_NO='.$TICKET_NO.'">'.$TICKET_NO.'</a></td>
    <td><a href="update.php?TICKET_DATE='.$TICKET_DATE.'">'.$TICKET_DATE.'</a></td>
    <td><a href="update.php?MONEY='.$MONEY.'">'.$MONEY.'</a></td>
    <td><a href="update.php?CUSTOMER='.$CUSTOMER.'">'.$CUSTOMER.'</a></td>
    <td><a href="update.php?PAYMENT='.$PAYMENT.'">'.$PAYMENT.'</a></td>
    <td><a href="delete.php?ID='.$ID.'">Delete</a></td>
    </tr>';

++$i; }} else { $row = '<tr><td colspan="2" align="center">Nothing found</td></tr>'; 
}

mysql_close();
?>
<table border="1" cellpadding="3" cellspacing="0"><? echo $row ?></table> 
```

我非常感谢您的支持！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:55:32.380

`$ID`value 为空，您必须在其中分配 value。

其次，您正在检查`$num>0`where 但 value 是`$num`什么？

从我的角度来看，您正在尝试获取获取的行数。

# c# - 视图引擎找不到我的视图

> ID：12913068
> 
> 赞同：1
> 
> 时间：2012-10-16T10:50:39.890
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, viewengine

尝试从发布操作返回 ViewResult 时出现以下错误：

> 未找到视图“索引”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置：~/Views/Home/Index.cshtml ~/Views/Shared/Index.cshtml ~/Views/Home/Home.cshtml
> ~/Views/Shared/Home.cshtml ~/Views/Home/Index。 aspx
> ~/Views/Home/Index.ascx ~/Views/Shared/Index.aspx
> ~/Views/Shared/Index.ascx ~/Views/Home/Home.master
> ~/Views/Shared/Home.master ~/Views/主页/Home.vbhtml
> ~/Views/Shared/Home.vbhtml

我的观点肯定得到认可，因为它适用于 GET 操作。

在 POST 操作中返回 ViewResult 的代码是：

```
return View("Index", "Home", Model); 
```

[这是视图](http://i.stack.imgur.com/YxQn2.png)。

任何人都可以建议为什么这不起作用？

更多上下文：get 操作可以很好地显示视图。post 操作实际上是针对不同的 url 但返回相同的视图。这是导致问题的发布操作。GET 和 POST 操作都在同一个控制器上`HomeController`。

这是（精简的）控制器：

```
public class HomeController : Controller
{
    [HttpGet]
    public ActionResult Index()
    {
        return View(new LoginModelBase());
    }

    [HttpPost]
    public ActionResult Login(UsernameLoginModel Model)
    {
        ...
        return View("Index", "Home", Model);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:01:08.627

我刚刚意识到它是什么！我使用了错误的`View(...)`方法重载。

它应该是：

```
View("Index", Model); 
```

# ember.js - 当父视图更改时，ContainerView 中的 currentView 消失

> ID：12913069
> 
> 赞同：1
> 
> 时间：2012-10-16T10:50:40.187
> 
> 标签：ember.js

这是示例[http://jsfiddle.net/EugeneVB/yhNzm/1/](http://jsfiddle.net/EugeneVB/yhNzm/1/) 当我转到 tab2，然后返回 tab1，ContainerView 是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:21:19.260

在您的小提琴中， tab1 模板指的是`{{view Em.ContainerView currentViewBinding="view.controller.cv"}}`

这里`view.controller.cv`（顺便说一句，可以像`cv`这里一样使用）是指您在 App.Tab1Controller init() 方法期间手动实例化的视图。此控制器仅在应用程序初始化期间实例化一次。

我认为 Ember.js 一直在跟踪潜在的泄漏，所以当你从 tab1 切换到 tab2 时，tab1View 会被破坏，它的所有 subwiews 也会被破坏。（因此，它的`currentView`. 因为它是一个绑定（记住 Ember.js 绑定是双向绑定），所以“view.controller.cv”也被销毁了。

# wxpython - 我可以更改部分静态文本的字体吗？

> ID：12913072
> 
> 赞同：0
> 
> 时间：2012-10-16T10:50:48.467
> 
> 标签：wxpython

我知道我可以使用“SetFont()”设置字体，但这仅适用于整个静态文本。我有这样的东西（不起作用，就像例子一样）：

```
sports = ['football', 'baseball', 'basketball']
for i in range(3):
    wx.StaticText(self.mypanel, -1, sports[i].SetFont(anyfont) + ' is great!', (50,50+20*i)) 
```

所以在所有这 3 个显示的句子中，只有第一个单词会收到字体；'是很棒的！' 不能接收字体。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:16:09.877

我很确定 StaticText 小部件不支持它。您可以在富文本模式下使用无边框只读（或禁用）TextCtrl 来执行此操作。如果您还没有，请下载 wxPython 演示包。它有一个更改其中某些单词的字体的示例。或者，您也可以使用 HTMLWindow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:50:34.733

你可以说“太棒了！” 进入不同的静态文本控件。如果你使用了sizer，很容易让它排列起来，看起来像一个静态文本

# jar - Jar 包含问题

> ID：12913073
> 
> 赞同：2
> 
> 时间：2012-10-16T10:50:51.523
> 
> 标签：jar

如何在导出项目之前将外部 jar 添加到我的项目中，以便即将使用我的代码的人不必下载这些 jar。他只需引用我提供的 jar 即可运行我的项目（不使用 Maven）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:00:51.727

您可能希望创建一个包含 your_jar.jar 子目录 lib 中所需库的 zip 文件，并添加一个 manifest-classpath 条目以指向这些库

```
Manifest-Version: 1.0
Created-By: Hand
Main-Class: com.bitplan.gen.parser.m2java
Class-Path: lib/com.bitplan.smartgenerator-4.2.3.jar 
```

解压后你的代码可以用 java -jar your_jar.jar 启动

# websocket - 在 websocket 中，服务器如何识别客户端的网络服务器

> ID：12913075
> 
> 赞同：0
> 
> 时间：2012-10-16T10:51:02.180
> 
> 标签：websocket

如果我没记错的话，为了拥有推送技术，客户端（比如浏览器）还需要运行一个小型 Web 服务器，该服务器正在侦听某个端口（比如 ijetty 在 8080 上运行）。现在，当实际的服务器知道任何事件时，它会将事件发送给客户端。这种方式根本不涉及 PULL 机制。这是正确的吗 ？或者存在一个持久连接，只要事件发生，服务器就会在该连接上发送数据。我的问题是：在前一种情况下（如果是真的），服务器如何知道客户端的 IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:02:30.547

WebSockets 使用基于 TCP 连接的套接字，基本上客户端使用挑战、websocket 版本、ip 和更多数据向服务器发出连接请求，然后服务器解密挑战并将其结果返回给客户端，这个过程称为握手。

如果握手被批准，则连接建立，客户端和服务器之间的套接字连接保持打开状态，服务器会像 ping 一样向客户端发送心跳来检查连接是否仍然打开。

阅读此 wiki 以了解更多信息：

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

# java - 哪种算法适合用于接触亲密？

> ID：12913076
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:51:18.300
> 
> 标签：java, c++, algorithm

我需要实施一个人与人之间视觉亲密的项目，有人可以推荐一种算法来计算人与人之间的亲密关系吗？

亲密感会随着时间而衰减（如果您长时间不点击/拨号，亲密感会自动衰减）。

假设在我的通讯录中：</p>

```
Person     Intimacy(0-100%)
   A         40%
   B         80%
   C         10% 
```

在我跟 A 打电话后，A 的亲密度需要提高，就像这样

```
Person     Intimacy(0-100%)
   A         42%
   B         80%
   C         10% 
```

跟踪5天后没有任何反应，A，B，C的亲密度需要下降，像这样

```
Person     Intimacy(0-100%)
   A         37%
   B         78%
   C         8% 
```

谢谢大家的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:56:58.563

> 亲密感会随着时间而衰减（如果您长时间不点击/拨号，亲密感会自动衰减）。

您可以使用表示为[半衰期的](http://en.wikipedia.org/wiki/Half-life)[指数衰减数](http://en.wikipedia.org/wiki/Exponential_decay)

```
double intimacy = Math.pow(0.5, time / halfLife); 
```

如果您的问题有标准解决方案，我会感到惊讶。

* * *

典型的图形具有这样的形状。

![在此处输入图像描述](../Images/fc8df79efb8d0ebca62962e7a6c715c0.png)

* * *

> 您是否要求一种算法来根据您打电话给他们的频率来确定您对通讯录中某人的了解程度？

为此，您可以再次使用[指数加权移动平均线](http://en.wikipedia.org/wiki/Exponential_smoothing)，我只是推测什么可能有用。

> 你能说得更详细些吗？

从你提供的数据来看，半衰期约为28天。您可以像这样每天使用 EWMA

```
double alpha = 1.0/28;

score = (contacted ? 1 : 0) * alpha + score * (1 - alpha); 
```

例如

```
contacted, prev score, score
TRUE        40%     42%
FALSE       42%     41%
FALSE       41%     39%
FALSE       39%     38%
FALSE       38%     36%
FALSE       36%     35% 
```

* * *

假设衰减是 28 天，我给同一个人打电话 200 天。分数看起来像

```
double score = 0;
double alpha = 1.0 / 28;
boolean contacted = true;
for (int i = 0; i < 200; i++) {
    score = (contacted ? 1 : 0) * alpha + score * (1 - alpha);
    System.out.printf("%.3f%n", score);
} 
```

印刷

```
0.036
0.070
0.103
... deleted ...
0.999
0.999
0.999 
```

分数不可能大于最大值（在本例`1`中为等式）。

# cmake - CMake：动态添加对 add_custom_command 的依赖

> ID：12913077
> 
> 赞同：7
> 
> 时间：2012-10-16T10:51:19.877
> 
> 标签：cmake, build-dependencies, cmake-custom-command

我有一个包含许多子项目的 CMake 项目。他们每个人都可以使用我提供的函数来生成一个包含某些特定信息的小文本文件（通过调用 add_custom_command）。在最后一步，我想将所有这些文件合并到一个大文本文件中。

我创建了一个自定义命令，它搜索创建的文件（都在一个地方）并合并它们。

问题是我想让这最后一步取决于子项目中的所有小步骤，而我实际上并不知道将提供多少文件。

我的最终命令如下所示：

```
add_custom_command(OUTPUT combination.txt
                   COMMAND create combination.txt from all files from /path/) 
```

我的 create-small-text-file-for-each-subproject 命令看起来像：

```
add_custom_command(OUTPUT /path/${sub_project_name}.txt
                   COMMAND create /path/${sub_project_name}.txt) 
```

当我创建这些小文件时，我想做一些事情，比如让“combination.txt”依赖于 /path/${sub_project_name}.txt

所以我希望我可以：

```
add_dependency(combination.txt /path/${sub_project_name}.txt) 
```

但是，这只适用于目标。

我也尝试过将 set_source_files_properties 与 OBJECT_DEPENDS 一起使用，但它似乎不起作用（也许它打算与 add_target 的 cpp 文件一起使用？）

我看到的最后一种让它工作的方法是使用一个缓存变量，它会累积所有这些小文件路径，然后像这样使用它：

```
add_custom_command(OUTPUT combination.txt
                   COMMAND create combination.txt from all files from /path/
                   DEPENDS ${all_small_files_list}) 
```

但这是我想做的最后一件事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T12:29:08.013

而不是使用`add_custom_command`你可以使用`add_custom_target`正确的依赖定义（所以它不是每次都构建）。

```
add_custom_target(project
                   COMMAND touch project.txt)

add_custom_target(project2
                   COMMAND touch project2.txt)

add_custom_target(combination
                   COMMAND cat project.txt project2.txt > combination.txt)

add_dependencies(combination project2)
add_dependencies(combination project)

add_executable(t t.c)
add_dependencies(t combination.txt) 
```

再说一遍：确保您使用的`DEPENDS`参数`add_custom_target`来创建一个真正的依赖链，以便项目目标和组合目标过时。

**更新**：我太早了。事实上，cmake（至少到 2.8.9）对于依赖项的工作方式如下：通过调用`add_dependencies`你不能添加一个依赖项，它是`OUTPUT`一个自定义命令 IOW 一个（生成的）文件的依赖项。与`add_dependencies`您只能添加`target`由`add_custom_target`. 但是，在 a 中，您可以使用-directive`add_custom_target`依赖于的输出。也就是说，这使它起作用：`add_custom_command``DEPENDS`

```
add_custom_command(OUTPUT project.txt
                   COMMAND uptime >> project.txt MAIN_DEPENDENCY t2.c)
add_custom_target(project DEPENDS project.txt)

add_custom_target(combination
                   COMMAND cat project.txt project2.txt > combination.txt)
add_dependencies(combination project) 
```

这将使组合目标始终重新生成，因为它没有`MAIN_DEPENDENCY`or `DEPENDS`，但`add_dependencies`允许使用 of。

# objective-c - 保存文件避免重复文件名和覆盖

> ID：12913078
> 
> 赞同：3
> 
> 时间：2012-10-16T10:51:19.967
> 
> 标签：objective-c, macos, cocoa, file

**所以，这是我的情况：**

*   我有一个应用程序提示用户选择一个文件夹来保存他的文件
*   现在假设他的文件是 : `a.png`, `b.png`,`c.png`

**我想要的是：**

*   如果文件 - 假设 -`a.png`已存在于所选文件夹中，请**不要**覆盖它。而是创建一个名为`a (1).png`. 如果文件`a (1).png`已经存在，则将其命名为`a (2).png`，依此类推——就像 OS X 在复制粘贴同名文件时所做的那样。

这就是我目前正在做的事情 - 但它仍然没有让我印象深刻：

```
NSString* target = [self getTargetPathForFile:filename path:folder];

NSString* fname = [target lastPathComponent];

while ([[NSFileManager defaultManager] fileExistsAtPath: [folder stringByAppendingPathComponent:fname]])
{
    //NSLog(@"FNAME : %@",fname);

    if ([self str:fname containsString:@")." options:nil])
    {
        NSArray* a = [fname componentsSeparatedByString:@"("];
        NSArray* b = [[a objectAtIndex:1] componentsSeparatedByString:@")"];

        fname = [NSString stringWithFormat:@"%@(%d)%@",[a objectAtIndex:0],[[b objectAtIndex:0] intValue]+1,[b objectAtIndex:1]];
    }
    else
    {
        fname = [NSString stringWithFormat:@"%@ (1).%@",[fname stringByDeletingPathExtension],[fname pathExtension]];
    }

    //NSLog(@"Setting filename to :: %@",fname);
}
target = [folder stringByAppendingPathComponent:fname]; 
```

任何想法如何去做？是否有任何可可友好（或内置）的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T11:07:16.577

为什么不试试这个：

```
NSString* fname = [target lastPathComponent];
NSString* fnameNoExt = [fname stringByDeletingPathExtension];
NSString* extension = [fname pathExtension];

int fileIndex = 1;
while ([[NSFileManager defaultManager] fileExistsAtPath: [folder stringByAppendingPathComponent:fname]])
{
    //NSLog(@"FNAME : %@",fname);
    fname = [NSString stringWithFormat:@"%@ (%d).%@", fnameNoExt, fileIndex, extension];
    //NSLog(@"Setting filename to :: %@",fname);
    fileIndex++;
}
target = [folder stringByAppendingPathComponent:fname]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:56:36.547

如果您并不真正关心您在其中一个评论中解释的文件名，并且可以考虑使用自动生成的文件名，请使用[`CFUUID`](https://developer.apple.com/library/ios/#documentation/CoreFoundation/Reference/CFUUIDRef/Reference/reference.html),`NSProcessInfo`或`mkstemp`.

*   用于`CFUUID`生成唯一标识符`str`：

    ```
    CFUUIDRef uuidref = CFUUIDCreate(NULL);
    CFStringRef cfstr = CFUUIDCreateString(NULL, uuidref);
    // If using ARC:
    NSString* filename = (__bridge_transfer NSString*)cfstr;
    // If not using ARC
    NSString* filename = [(NSString*)cfstr autorelease];
    // Then release the CFUUIDRef
    CFRelease(uuidref); 
    ```

*   使用`NSProcessInfo`

    ```
    NSString* filename = [[NSProcessInfo processInfo] globallyUniqueString]; 
    ```

*   使用`mkstemp`：见[CocoaWithLove](http://www.cocoawithlove.com/2009/07/temporary-files-and-folders-in-cocoa.html)

# php - PHP 将 HTML 表单数据发送到 MySQL + 一个外部 URL

> ID：12913081
> 
> 赞同：0
> 
> 时间：2012-10-16T10:51:32.357
> 
> 标签：php, forms

我的目标是以 html 形式提交的数据发送到 mysql 数据库（已经完成）和外部 URL。发送到 url 的原因也是为了将数据添加到我们呼叫中心的自动拨号系统。

我遇到的问题是，一旦将信息发送到数据库，我就无法理解如何发送到 url，我目前让我的 PHP 页面将数据发送到 mysql，然后发送到电子邮件地址。

网址示例：

```
http://domain.com/vicidial/non_agent_api.php?source=test&user=****&pass=****&function=add_lead&phone_number=07777777777 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:04:32.043

您可以使用 cURL 将 HTTP 请求发送到某个 url。

```
<?php

$ch = curl_init("http://domain.com/vicidial/non_agent_api.php?source=test&user=****&pass=****&function=add_lead&phone_number=07777777777");
curl_exec($ch);
curl_close($ch);
?> 
```

不能确定上面的代码片段是否有效，因为我现在没有 PHP 开发环境，但这应该是能够将数据发送到另一个 url 的基本思想。

更多帮助：[http ://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/function.curl-setopt.php)

# lucene - Hibernate Search 自动更新组合字段

> ID：12913088
> 
> 赞同：2
> 
> 时间：2012-10-16T10:51:50.197
> 
> 标签：lucene, hibernate-search

我有一个具有多个名称相关属性（firstName、lastName、title）的 Person 实体。所有与名称相关的属性都应存储在单个 lucene 索引字段“fullName”中。

```
@Indexed
@Entity
public class Person {
   ...
   private String firstName;
   private String lastName;
   private String title;

   @Field(store=Store.NO, index=Index.TOKENIZED)
   public String getFullName() {
      return firstName + " " + lastName + " " + title;
   }
} 
```

我面临的唯一问题是在更新名称相关属性时自动更新索引中的 fullName。

有没有办法告诉 Hibernate Search fullName 是一个组合字段，并且必须在其中一个部分更改时更新？也许是这样的？

```
@ComposedOf({"firstName", "lastName", "title"}) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:05:16.503

您的问题有几种解决方案，您选择的解决方案可能是个人喜好问题（您也可以应用它们的组合）：

1.  检查属性 _hibernate.search.​enable_dirty_check_ 并确保在您的情况下将其设置为*false*。默认值为*true*。有关更多信息，请参阅在线文档 - [http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/)
2.  将*@Field*注释也添加到 firstName、lastName 和 title。您会获得更大的索引大小，但通常这并不重要。作为副作用，脏检查将起作用（假设您的 JPA 注释是正确的。例如，我假设 getFullName 是瞬态的）
3.  使用类桥并可选择删除*getFullName*。使用类桥也会自动禁用脏检查优化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:58:36.087

```
@Indexed
@Entity
public class Person {
   ...
   @Field(name="fullName") String firstName;
   @Field(name="fullName") String lastName;
   @Field(name="fullName") String title;
} 
```

This is possible as you have chosen TOKENIZED and I'm assuming your analyzer is set to split the tokens on whitespace as you're adding whitespace to separate them: you can have multiple repetitions of a same field, the result is almost the same as splitting the compound terms (I say almost as it won't be able to determine ordering of terms in case you need a PhraseQuery looking for a specific order of keywords).

For more complex cases you would use a *ClassBridge* which disables the dirty-checking optimisation which has been annoying you in this case: Hibernate Search tracks if any persistent field was actually written to to decide if it can skip expensive reindexing operations but is then unable to detect such tricks.

# ruby - 将此 XML 请求转换为正确的 Savon 请求

> ID：12913091
> 
> 赞同：0
> 
> 时间：2012-10-16T10:51:58.457
> 
> 标签：ruby, xml, ruby-on-rails-3, soap, savon

有人可以转换这个：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://test.org/" xmlns:hon="http://schemas.datacontract.org/2004/07/TEST.RVU.Entity">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:Authenticate>
         <!--Optional:-->
         <tem:authenticationDet>
            <!--Optional:-->
            <hon:AccountType>0</hon:AccountType>
            <!--Optional:-->
            <hon:Password>bacon</hon:Password>
            <!--Optional:-->
            <hon:UserName>smith</hon:UserName>
         </tem:authenticationDet>
      </tem:Authenticate>
   </soapenv:Body>
</soapenv:Envelope> 
```

现在使用 Soap gem SAVON，如何以 client.request 方法可以处理的正确语法编写它？

我试过这个：

```
client.request :tem, :authenticate, body: { "authenticationDet" => { "AccountType" => 0, "Password" => "bacon", "UserName" => "smith"}} 
```

但我收到 HTTP 400 错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:07:51.423

您需要设置额外的命名空间。SOAP 操作必须用引号括起来以匹配您的操作。

脚本可能如下所示：

```
#!ruby

require "savon"

Savon.configure do |c|
  c.pretty_print_xml = true
  c.env_namespace = :soapenv
end

client = Savon::Client.new do
  wsdl.namespace = "http://test.org"
  wsdl.endpoint = "http://localhost"
end

resp = client.request :tem, 'Authenticate' do
  soap.namespaces["xmlns:hon"] = "http://schemas.datacontract.org/2004/08/TEST.RVU.Entity"
  soap.body = { "tem:authenticationDet" => 
                { "hon:AccountType" => 0,
                  "hon:Password" => "bacon",
                  "hon:UserName" => "smith" }
              }
end 
```

# c# - 如何检查鼠标是否在wpf中的按钮上

> ID：12913098
> 
> 赞同：-1
> 
> 时间：2012-10-16T10:52:27.847
> 
> 标签：c#, wpf, click, delay, mouseover

在开始之前，我必须说一下。我读过[这个问题](https://stackoverflow.com/questions/12638179/time-delay-on-trigger)。而且我看不出它与我几个小时前发布的[这个问题的重复。](https://stackoverflow.com/questions/12908968/how-to-check-if-mouse-is-over-a-button-in-wpf)

我原来的帖子是这样的：

我在 WPF 中使用了一些按钮来显示来自各种文件夹的图像。所有按钮的`Click`模式都是`Hover`。对于某些按钮，悬停后，它被路由到一个函数`OnButtonClick`。我想要做的是，只有在鼠标悬停在按钮上`X`几秒钟后，`OnButtonClick`才应该完成函数内部的处理。

XAML 代码：

```
 <Button Name="Dresses" MouseEnter="onMouseEnter" MouseLeave="onMouseLeave" Content="Dresses" Grid.Row="2" Height="25" Width="85" VerticalAlignment="Center" Grid.Column="5"  FontFamily="Tahoma" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Cursor="Hand" ClickMode="Hover">
        <Button.Background>
            <LinearGradientBrush>
                <GradientStop Color="Yellow" Offset="0" />
                <GradientStop Color="Green" Offset="1" />
            </LinearGradientBrush>
        </Button.Background>
    </Button> 
```

C#代码：

```
 private void OnButtonClickDresses(object sender, RoutedEventArgs e)
    {
            //Code for delay

            //Code which should run only if mouse on button after 5 seconds

    } 
```

PS：我是 WPF 和 C# 的初学者。因此，如果您可以发布一个最低限度的工作示例，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:07:04.827

这是给您的示例应用程序。

```
using System.Windows.Threading;

namespace MyWPF App
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>

public partial class MainWindow : Window
{

    DateTime dt;
    DispatcherTimer t;

    public MainWindow()
    {

        InitializeComponent();
        t = new DispatcherTimer();
        t.Tick += new EventHandler(t_Tick);

    }
    private void button1_MouseEnter(object sender, MouseEventArgs e)
    {
        dt=DateTime.Now;
        t.Interval = new TimeSpan(0, 0, 1);
        t.IsEnabled = true;

    }

    void t_Tick(object sender, EventArgs e)
    {

        if ((DateTime.Now - dt).Seconds >= 5)
        {
            MessageBox.Show("Hello");// Here you can put your code which you want to execute after 5 seconds.
        }

    }

    private void button1_MouseLeave(object sender, MouseEventArgs e)
    {
        t.IsEnabled = false;
    }
}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:19:06.577

您可以使用 MouseEnter 启动一个间隔为 X 秒的 Timer。在 MouseLeave 上，您停止此计时器。现在您将 OnButtonClickDresses 方法中的代码放入 Timer_Tick 方法中。

样本：

```
public partial class MainWindow : Window
{
    DispatcherTimer dt;

    public MainWindow()
    {
        InitializeComponent();
        dt = new DispatcherTimer();
        dt.Interval = new TimeSpan(0, 0, 5);//wait for 5 Seconds
        dt.Tick += new EventHandler(dt_Tick);
    }

    void dt_Tick(object sender, EventArgs e)
    {
        //do code
    }

    private void button1_MouseEnter(object sender, MouseEventArgs e)
    {
        dt.Start();
    }

    private void button1_MouseLeave(object sender, MouseEventArgs e)
    {
        dt.Stop();
    }
} 
```

编辑：

```
 <Button Name="Dresses" MouseEnter="button1_MouseEnter" MouseLeave="button1_MouseLeave" Content="Dresses" Grid.Row="2" Height="25" Width="85" VerticalAlignment="Center" Grid.Column="5"  FontFamily="Tahoma" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center" Cursor="Hand"
        <Button.Background>
            <LinearGradientBrush>
                <GradientStop Color="Yellow" Offset="0" />
                <GradientStop Color="Green" Offset="1" />
            </LinearGradientBrush>
        </Button.Background>
    </Button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:21:12.120

您不能在方法中使用它：

```
System.Threading.Thread.Sleep (5000); 
```

因为这会冻结你的界面。

为此，您应该使用某种异步任务。我建议：

```
Task.Factory.StartNew (() =>
{
   System.Threading.Thread.Sleep (5000);
})
. ContinueWith (() =>
{
     / / Code after 5 seconds
}
TaskScheduler.FromCurrentSynchronizationContext ()); 
```

虽然我不认为它是理想的，因为它可以将鼠标移开，然后放回去。这可能会导致混乱。

我推荐的方法：

使用事件 MouseEnter 和 MouseLeave，以及类

```
System.Diagnostics.Stopwatch 
System.Windows.Threading.DispatcherTimer 
```

我不完全理解你需要的逻辑，但我认为通过这两个类和事件你可以做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:04:33.843

这似乎适用于任意数量的按钮......

XAML：

```
 <Grid>
        <Button Name="myButton1" Content="Button 1" HorizontalAlignment="Left" Margin="34,51,0,0" VerticalAlignment="Top" Width="75" Click="HoverButton_Click" MouseEnter="HoverButton_MouseEnter" MouseLeave="HoverButton_MouseLeave"/>
        <Button Name="myButton2" Content="Button 2" HorizontalAlignment="Left" Margin="150,51,0,0" VerticalAlignment="Top" Width="75" Click="HoverButton_Click" MouseEnter="HoverButton_MouseEnter" MouseLeave="HoverButton_MouseLeave"/>
        <TextBox Name="myTextBox" HorizontalAlignment="Left" Height="147" Margin="34,91,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Top" Width="232"/>
    </Grid> 
```

代码：

```
 private Dictionary<Button, System.Threading.Timer> buttonTimers = new Dictionary<Button, System.Threading.Timer>();

    public MainWindow()
    {
        InitializeComponent();
    }

    private void HoverTime(object state)
    {
        var thisButton = state as Button;

        thisButton.Dispatcher.BeginInvoke((Action)delegate()
        {
            thisButton.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));
        });
    }

    private void HoverButton_Click(object sender, RoutedEventArgs e)
    {
        var button = sender as Button;

        myTextBox.Text += "Delayed hover: " + button.Content + Environment.NewLine;
    }

    private void HoverButton_MouseEnter(object sender, MouseEventArgs e)
    {
        var thisButton = sender as Button;

        var t = new System.Threading.Timer(new TimerCallback(HoverTime), sender, 2500, Timeout.Infinite);

        buttonTimers.Add(thisButton, t);
    }

    private void HoverButton_MouseLeave(object sender, MouseEventArgs e)
    {
        var thisButton = sender as Button;

        if (buttonTimers.ContainsKey(thisButton))
        {
            buttonTimers[thisButton].Dispose();
            buttonTimers.Remove(thisButton);
        }
    } 
```

# asp.net - 零停机时间 asp.net 部署和会话状态问题

> ID：12913101
> 
> 赞同：3
> 
> 时间：2012-10-16T10:52:33.817
> 
> 标签：asp.net, deployment, session-state

在工作中，对于繁忙的 ASP.NET MVC 网站的零停机部署，我们有一个相当不错的流程。有两个服务器组，因此我们可以转移流量，我们编写 db SP 以向后兼容并提前推出它们。一般来说，它运作良好。

然而，一个问题刚刚让我绊倒了。上次部署包括大量代码命名空间更改。

部署构建时，它破坏了现有的用户会话，因为处于其会话状态的对象不再存在于新的代码库中，例如，他们的会话包含 App_Code.UserDetails 并且站点现在有一个 XYZUserDetails 类

我理解这个问题以及它发生的原因，但我无法解决的是除了完全关闭网站以确保网站上没有活跃用户之外，是否还有什么可以做的。或者可能重新启动状态服务，以便每个人都被启动并必须再次登录。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:05:55.077

在考虑了这一点后，我得出了两种可能的解决方案：

a) 始终在停机时部署网站更新。将站点保持足够长的时间以使所有会话都过期。这在技术上是安全的选择，但在商业上是不可接受的

b) 模拟问题并查看可以做些什么来解决异常处理程序中的问题。尽管不是理想的最终用户体验，但在会话状态上捕获 SerializationExceptions 并刷新用户会话可能会更好。他们将不得不再次进行身份验证，但这并不像会话中断那么糟糕。

我预先做出的一个决定是，在开发过程中很难了解实时会话依赖关系，还有太多其他的事情需要考虑。

我将调查（b），因为这听起来很可行。

# php - Symfony 1.4 在路由中需要域名

> ID：12913105
> 
> 赞同：0
> 
> 时间：2012-10-16T10:52:56.660
> 
> 标签：php, symfony1, url-routing

我需要在我的 symfony 路由中使用域名，我的路由如下所示：

```
domain_example:
url: /routing/example/:domain_name
param: { module: myModule, action: index, sf_format: json }
requirements: { domain_name: '/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}$/' } 
```

我也试过：

```
requirements: { domain_name: '[/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}$/]' } 
```

如果我这样称呼我的路线：`mydomain.com/routing/example/otherdomain.com`- 我只是得到模块/动作不存在异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:57:20.847

*总结*

点在 Symfony中用作[段分隔符。](http://trac.symfony-project.org/browser/branches/1.4/lib/routing/sfPatternRouting.class.php#L49)因此，您应该将此选项添加到您的路由中，以强制 Symfony 仅用`/`作分隔符：

```
 options:
    segment_separators: [/] 
```

接下来，您的正则表达式是错误的，但 SO[有一个适合您](https://stackoverflow.com/a/1129242/569101)：

```
[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)? 
```

您的最终路线：

```
domain_example:
  url: /routing/example/:domain_name
  param:
    module: main
    action: index
    sf_format: json
  requirements:
    domain_name: '[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?'
  options:
    segment_separators: [/] 
```

# php - 使用默认的非值参数声明用户函数

> ID：12913106
> 
> 赞同：0
> 
> 时间：2012-10-16T10:53:02.887
> 
> 标签：php, function

在使用默认的非值参数声明用户函数时，有什么更好的方法，将参数定义为`false`或 as `NULL`？也就是说，什么更好，这个

```
 function func ($param = false) {

 } 
```

或这个

```
 function func ($param = NULL) {

 } 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:59:48.453

这会更好：

```
function func ($param = NULL) {

} 
```

“默认非值”参数应为 NULL，而不是`false`. False 是一个值。如果您打算测试参数的值或对其执行任何操作，我会选择`false`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T11:08:20.383

We can also use

```
function func ($param = "") { 
```

}

# entity-framework - 由于方法调用而嵌套 DbContext - 实体框架

> ID：12913108
> 
> 赞同：36
> 
> 时间：2012-10-16T10:53:21.513
> 
> 标签：entity-framework

在以下情况下，由于方法调用而嵌套了两个 DbContext：

```
public void Method_A() {
    using (var db = new SomeDbContext()) {
        //...do some work here
        Method_B();
        //...do some more work here
    }
}

public void Method_B() {
    using (var db = new SomeDbContext()) {
        //...do some work
    }
} 
```

问题：

1.  这种嵌套会导致任何问题吗？（并且正确的 DbContext 会在正确的时间处理吗？）

2.  这种嵌套是否被认为是不好的做法，是否应该将 Method_A 重构为：

    ```
    public void Method_A() {
        using (var db = new SomeDbContext()) {
            //...do some work here
        }

        Method_B();

        using (var db = new SomeDbContext()) {
            //...do some more work here
        }
    } 
    ```

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-29T13:45:12.700

您的`DbContext`派生类实际上在这里为您管理至少三件事：

*   描述数据库和实体模型的元数据，
*   底层数据库连接，以及
*   使用上下文加载的实体的客户端“缓存”，用于更改跟踪、关系修复等（请注意，尽管我将其称为“缓存”是因为需要更好的词，但这通常是短暂的，只是为了支持EF 功能。如果适用，它不能替代应用程序中的适当缓存。）

Entity Framework 通常缓存元数据（第 1 项），以便所有上下文实例（或至少使用相同连接字符串的所有实例）共享它。因此，在这里，您无需担心。

正如其他评论中提到的，您的代码导致使用两个数据库连接。这对您来说可能是也可能不是问题。

您最终还会得到两个客户端缓存（第 3 项）。如果您碰巧从外部上下文加载实体，然后再次从内部上下文加载，您将在内存中拥有它的两个副本。这肯定会令人困惑，并可能导致细微的错误。这意味着，如果您不想使用共享上下文对象，那么**您的选项 2 可能会比选项 1 更好。**

如果您使用**transactions**，还有其他考虑因素。拥有多个数据库连接可能会导致事务被提升为分布式事务，这可能不是您想要的。由于您没有提及数据库事务，因此我不会在这里进一步讨论。

# 那么，这会让你在哪里？

如果您使用此模式只是为了避免`DbContext`在代码中传递对象，那么**您最好重构`MethodB`以接收上下文作为参数**。应该反复出现多长寿命的上下文对象的问题。根据经验，为单个数据库操作或一系列*相关*数据库操作创建新上下文。（例如，请参阅[此博客文章](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/02/07/entity-framework-context-lifetime-best-practices.aspx)和[此问题](https://stackoverflow.com/q/5414076/439024)。）

（作为替代方案，您可以将构造函数添加到`DbContext`接收现有连接的派生类。然后您可以在多个上下文之间共享相同的连接。）

一种有用的模式是编写自己的类来创建上下文对象并将其存储为私有字段或属性。然后你让你的类实现`IDisposable`并且它的`Dispose()`方法处理上下文对象。您的调用代码会更新您的类的一个实例，并且根本不必担心上下文或连接。

# 您何时可能*需要*同时激活多个上下文？

当您需要编写多线程代码时，这会很有用。数据库连接不是线程安全的，因此您一次只能从一个线程访问一个连接（因此也是一个 EF 上下文）。如果这限制性太大，您需要多个连接（和上下文），每个线程一个。你可能会觉得[这](https://stackoverflow.com/q/9099359/439024)很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:52:13.627

您可以通过将上下文传递给 Method_B 来更改您的代码。如果这样做，则不需要创建第二个数据库调用 SomeDbContext。

在此链接中，stackoverflow 中有一个问题的答案 [正确使用数据上下文的“使用”语句](https://stackoverflow.com/questions/10282050/proper-use-of-using-statement-for-datacontext)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-22T13:15:29.247

答案有点晚了，但人们可能还在寻找，所以这是另一种方式。

创建类，关心为您处理。在某些情况下，解决方案中的不同地方会有一个可用的功能。这样可以避免创建 DbContext 的多个实例，并且可以使用任意数量的嵌套调用。

粘贴简单的例子。

```
public class SomeContext : SomeDbContext
{
    protected int UsingCount = 0;
    public static SomeContext GetContext(SomeContext context)
    {
        if (context != null)
        {
            context.UsingCount++;
        }
        else
        {
            context = new SomeContext();
        }
        return context;
    }

    private SomeContext()
    {
    }

    protected bool MyDisposing = true;
    protected override void Dispose(bool disposing)
    {
        if (UsingCount == 0)
        {
            base.Dispose(MyDisposing);
            MyDisposing = false;
        }
        else
        {
            UsingCount--;
        }
    }

    public override int SaveChanges()
    {
        if (UsingCount == 0)
        {
            return base.SaveChanges();
        }
        else
        {
            return 0;
        }
    }
} 
```

使用示例

```
public class ExmapleNesting
{
    public void MethodA()
    {
        using (var context = SomeContext.GetContext(null))
        {
            // manipulate, save it, just do not call Dispose on context in using
            MethodB(context);
        }

        MethodB();
    }

    public void MethodB(SomeContext someContext = null)
    {
        using (var context = SomeContext.GetContext(someContext))
        {
            // manipulate, save it, just do not call Dispose on context in using
            // Even more nested functions if you'd like
        }
    }
} 
```

简单易用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T09:52:19.730

如果您认为与数据库的连接数以及必须打开新连接的次数的影响，这不是一个重要问题，并且您没有限制支持您的应用程序以最佳性能运行，那么一切都很好。您的代码运行良好。因为只创建一个数据库上下文对你的性能影响很小，元数据在第一次加载后会被缓存，当代码需要执行查询时才会连接到你的数据库。考虑到很少的性能考虑和代码设计，我建议您创建上下文工厂，以便为您的应用程序的每个实例提供每个 Db 上下文的实例。

您可以查看此链接以了解更多性能注意事项 [http://msdn.microsoft.com/en-us/data/hh949853](http://msdn.microsoft.com/en-us/data/hh949853)

# c# - 使用 WinForm 和 MVC 时更改视图

> ID：12913109
> 
> 赞同：1
> 
> 时间：2012-10-16T10:53:24.010
> 
> 标签：c#, winforms

作为学校项目的一部分，我和一个小组将使用 C# 开发一个 Windows 应用程序。我们在 C# 方面不是很有经验，但对它有一些基本的了解。但是，我们确实有其他语言和平台的经验。

我们想构建一个应用程序，其中布局分为两个主要部分：菜单位于左侧，内容位于右侧。The menu will be more or less static and when an entry in the menu is chosen, the content will be changed.

我们无法找出实现这一目标的最佳方法，也无法找到有关这方面的好材料。这个想法是有一个窗口并向这个窗口添加一个视图（据我所知，这应该是一个 UserControl？）。该控件将是菜单。

现在，我们的问题是是否有人可以为我们指明正确的方向以实现程序中的导航。比如说，当一个菜单项被点击时，我们将如何改变窗口的内容以及我们将如何管理哪个视图是活动的？我想每个视图（在“内容区域”中）都会有一个控制器。我们对使用 WinForms 和 MVC 模式时的“最佳实践”感兴趣。

我们希望有人可以在这个项目中进一步帮助我们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:59:32.103

如果我是你，我会认真考虑使用 WPF 而不是 winforms。

它，以及 MVVM 模式的使用，让你可以用比使用 winforms 少得多的代码来完成一些令人印象深刻的事情。如果您还不知道 winforms，那么它的学习曲线也可能稍微不那么陡峭，因为 WPF 是一个经过深思熟虑的框架（至少在我看来）。

如果您使用 WPF 路线，请花一些时间了解绑定的工作原理以及如何将您的 ViewModel 绑定到 UI。一旦你对正确的 UI 分离有了很好的理解，你就可以比使用旧的 WinForms 框架做更多的事情。

当我第一次开始查看 WPF 时，我发现这个[链接非常有用。](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)尤其是 RelayCommand。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:06:07.457

如果您使用的是 Winforms，那么您拥有的选项是：

- 动态清除表单并在菜单导航上生成内容

- 使用 mdi 容器表单，它可以是许多子表单的父表单

如果您使用的是 WPF，则可以在基于使用的菜单选择加载的 Frame 控件中使用 Pages。您还可以使用 MVVM 模式来构建您的应用程序。

# iphone - 找不到映射的图像 UITimerPicker*

> ID：12913111
> 
> 赞同：0
> 
> 时间：2012-10-16T10:53:37.343
> 
> 标签：iphone, objective-c, ios5, storyboard

我的编译器在尝试编译故事板中包含 UITimerPicker 的代码时会失败。奇怪的是，这也发生在 iOS5 模拟器和设备上，但在 iOS6 上就可以了。

结果如下所示：

2012-10-16 12:21:13.454 biztrip[7263:15203] 找不到映射图像 UITimerPickerBackground-162.png

2012-10-16 12:21:13.489 biztrip[7263:15203] 找不到映射图像 UITimerPickerFrameLeft-162-Bar.png

2012-10-16 12:21:13.490 biztrip[7263:15203] 找不到映射图像 UITimerPickerFrameMiddle-162.png

2012-10-16 12:21:13.491 biztrip[7263:15203] 找不到映射图像 UITimerPickerFrameRight-162-Bar.png

2012-10-16 12:21:13.506 biztrip [7263:15203] ***由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”

最奇怪的想法是当我不使用情节提要时，但 xib 文件一切正常。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:52:39.010

Here is your issue: *'Could not instantiate class named NSLayoutConstraint'*. This means you are using auto-layout option. Auto-layout is iOS6 feature, that is why it's not working in iOS5 simulator.

Go to your storyboard, select ViewController (you'll have to do it for every ViewController) and uncheck *Use Autolayout* from *File Inspector* in the *Utilities* pane (pane on the right in Xcode).

Hope this helps.

# c# - 带有 c# 内联代码的 XHTML 1.0 过渡警告

> ID：12913114
> 
> 赞同：0
> 
> 时间：2012-10-16T10:53:45.970
> 
> 标签：c#, xhtml, inline-code

以下链接会引发验证警告，指出“属性值必须用引号引起来。

```
href=http://<%= HttpContext.Current.Request.Url.Host %>/rss.aspx/> 
```

这在浏览器中显示良好，并且似乎行为正确，但 Visual Studio 显示验证警告。如果我尝试：

```
href="http://<%= HttpContext.Current.Request.Url.Host %>/rss.aspx"/> 
```

浏览器未检测到该链接。我的报价应该在哪里，这样我就不会收到验证警告并且链接仍然有效？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:59:50.783

默认情况下，Visual Studio 2010 将针对 XHTML 1.0 过渡进行验证。

对于该标准，您需要引用所有属性（因为 XHTML 是一种 XML 方言）。

您可以更改目标架构以匹配您使用的实际标准：

![目标架构下拉菜单](../Images/e87b1677a5286438509f824833bc9b01.png)

如果您使用的是 HTML5 并且没有获得该选项，则可以安装[Microsoft Visual Studio 2010 SP1 的 Web 标准更新](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83)：

> Web 标准更新为 Visual Studio 2010 SP1 提供了非常需要的 HTML5 和 CSS3 支持。它使 VS 2010 智能感知和验证尽可能接近 W3C 规范，因为我们可以通过扩展获得。此扩展支持的最显着的功能是：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:34:28.040

这对我有用：

```
 href="<%="http://"+ HttpContext.Current.Request.Url.Host +"/rss.aspx" %> 
```

# magento - 自定义magento购物车

> ID：12913115
> 
> 赞同：1
> 
> 时间：2012-10-16T10:53:49.480
> 
> 标签：magento, cart, shopping

我想要一个页面，用户可以手动输入他们需要的东西（比如通过 sku）和数量，然后被带到结帐页面。如果您在示例 url 中看到，您可以像在任何电子商务网站中一样浏览商店、添加商品等。然而，这一页是不同的，因为访问者可以只输入他们需要的内容，而不是浏览页面。

参见示例：[http ://massagereview.com/mm5/merchant.mvc?Screen=EXOR&SubScreen=EXOR](http://massagereview.com/mm5/merchant.mvc?Screen=EXOR&SubScreen=EXOR)

那么我们如何自定义magento默认购物车并使用上面的简单页面使用产品sku / id创建订单，然后移动到结帐页面进行付款？请尽快帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:59:58.520

Magento 已经存在这种类型的产品，请查找产品类型“分组产品”。这是一个演示页面，展示了它的实际效果：[http ://demo.magentocommerce.com/magento-red-furniture-set.html](http://demo.magentocommerce.com/magento-red-furniture-set.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:54:27.207

通过 sku 添加到购物车是 Enterprise 1.12 的标准配置，但这里有一个免费的社区扩展[http://www.magentocommerce.com/magento-connect/fast-order-add-to-cart-by-sku-6156.html](http://www.magentocommerce.com/magento-connect/fast-order-add-to-cart-by-sku-6156.html) .

还有一个很好的教程关于如何做到这一点[http://prattski.com/2008/11/03/magento-add-product-to-cart-by-sku-form/](http://prattski.com/2008/11/03/magento-add-product-to-cart-by-sku-form/)

# struct - 从结构定义中定义 Go 方法有什么好处？

> ID：12913118
> 
> 赞同：6
> 
> 时间：2012-10-16T10:54:03.600
> 
> 标签：struct, go

Go 允许将方法与它们所处理的结构/数据类型分开定义。这是否意味着放置方法定义的灵活性或更多？

我听说 Go 的 struct/methods 系统被比作猴子补丁，但如果我理解正确，那么你真的不能将方法添加到任何现有类型（结构），因为方法必须与类型位于同一个包中。IE。无论如何，您只能对受您控制的类型进行修补。还是我错过了什么？

在哪些情况下，您会在单独的源文件（或同一源文件的不同部分）中定义类型及其方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T10:57:21.893

这是 Go over 基于类型的语言的一个优势：您可以随意组织文件：

*   你可以把所有类似的功能放在一起，即使有很多接收器类型
*   您可以拆分一个否则会太大的文件

通常，Go 没有添加无用的约束。所以答案也可能是*“为什么不”*？

> 您真的不能将方法添加到任何现有类型（结构），因为方法必须与类型位于同一包中

如果可以，您可能无法确定在两个不同包中的同一结构上使用相同函数名的情况下调用哪个函数。或者这会使某些软件包不兼容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T12:50:07.633

This is (partly, probably) because in Go, you can have methods on *any* type, not just struct:

```
type Age uint

func (a Age) Add(n Age) Age {
  return a + n
} 
```

This is also how you can add methods to an existing type. What you do is define a new type based on that existing type, and add methods as you like.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-16T10:59:20.667

在 go 中无法进行猴子修补。您定义方法的类型必须位于同一个包中。

您可以做的是在包内任何您喜欢的地方定义函数和方法。类型定义是否与该类型的方法定义在同一个文件中并不重要。

这使得可以将所有类型定义分组到一个文件中，并将方法实现放在另一个文件中。可能与方法所需的其他助手一起使用。

# java - 如何使用 StateManager gxt 3

> ID：12913119
> 
> 赞同：2
> 
> 时间：2012-10-16T10:54:08.533
> 
> 标签：java, gxt

我正在尝试通过以下方法获取 CookieProvider 的值：

```
public void getValue(){
    StateManager.get().get("idReg", String.class, new Callback<String, Throwable>() {            
    public void onFailure(Throwable reason) {
        state = "";
    }
    public void onSuccess(String result) {
    state = result; 
        });    
} 
```

发出以下异常：

```
java.lang.NullPointerException at
com.google.web.bindery.autobean.gwt.client.impl.JsniCreatorMap$.create$(JsniCreatorMap.java:44) 
at com.google.web.bindery.autobean.gwt.client.impl.AbstractAutoBeanFactory.     
create(AbstractAutoBeanFactory.java:38) at    
com.sencha.gxt.state.client.StateManager.getDefaultStateInstance(StateManager.java:90)
at com.sencha.gxt.state.client.StateManager$1.onSuccess(StateManager.java:73)
at com.sencha.gxt.state.client.StateManager$1.onSuccess(StateManager.java:1)
at com.sencha.gxt.state.client.CookieProvider.getValue(CookieProvider.java:54)
at com.sencha.gxt.state.client.StateManager.get(StateManager.java:64)
at com.rfrate.exrate.client.NorthComponent.setComboValue(NorthComponent.java:46)
at com.rfrate.exrate.client.NorthComponent.asWidget(NorthComponent.java:102)
at com.google.gwt.user.client.ui.Widget.asWidgetOrNull(Widget.java:46)
at com.sencha.gxt.widget.core.client.container.Container.add(Container.java:72)
at com.rfrate.exrate.client.ExRate.createNorth(ExRate.java:52) 
at com.rfrate.exrate.client.ExRate.onModuleLoad(ExRate.java:97) ... 9 more 
```

谁能给出一个在cookie中读取和写入变量字符串值的代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:26:20.530

我不确定是否使用 StateManager，但要读取写入 cookie，它很简单：

写：

```
 //javax.servlet.http.Cookie
Cookie localUserId = new Cookie("cookieName", user_info.getLocalDataId());nick_name.setPath("/");
nick_name.setMaxAge(36 * 24 * 60 * 60);
  //appengine specific
this.getThreadLocalResponse().addCookie(localUserId); 
```

读：

```
 //com.google.gwt.user.client.Cookies;
Cookies.getCookie("cookieName")); 
```

# jquery - 如何使用 jquery 处理整个页面的单个 Ajax 错误

> ID：12913120
> 
> 赞同：0
> 
> 时间：2012-10-16T10:54:33.223
> 
> 标签：jquery

在我的页面中，我使用 8 ajax 调用将数据发送到服务器端......

我不想为每个 ajax 调用处理 ajax 错误......

单个 ajax 错误处理整个页面中的所有 ajax 错误....

他们的任何继承是否可以用于整个页面..

```
 function SendConfirmationEmail(ShipmentID, ChannelOrderReference) {
var Url = '<%=Url.Action("SendShipmentEmail","Shipments") %>';
$.ajax({
    cache: false,
    type: "POST",
    data: 'strOrderShipmentId=' + ShipmentID + '&channelOrderReference=' + ChannelOrderReference,
    url: Url,
    datatype: "HTML",
    success: function (data) {
        if (data == "1") {
            SucessErrorMessageDisplay('DivStatus', 'lblStatus', 'imgStatus', 0, 'Email is successfully sent for Order#' + ChannelOrderReference + '');
        }
        if (data == "-2") {
            SucessErrorMessageDisplay('DivStatus', 'lblStatus', 'imgStatus', 0, 'Email Template is not Choosen for this Store');
        }
        if (data == "-1") {
            SucessErrorMessageDisplay('DivStatus', 'lblStatus', 'imgStatus', 0, 'Problem in Sending Email for Order#' + ChannelOrderReference + '');
        }
        if (data == "0") {
            SucessErrorMessageDisplay('DivStatus', 'lblStatus', 'imgStatus', 0, 'Connection Failed to Send Email for Order# ' + ChannelOrderReference + '');
        }
        if (data == "-3") {
            SucessErrorMessageDisplay('DivStatus', 'lblStatus', 'imgStatus', 0, 'ShipTo Email Address is Not Given for Order# ' + ChannelOrderReference + '');
        }
        // SucessErrorMessageDisplay('DivStatus', 'lblStatus', 'imgStatus', 0, 'Order# :' + ChannelOrderReference + ' is voided successfully');

    },
    error: function (xhr, ajaxOptions, thrownError) {
        if (xhr.status == 403) {
            window.location.href = '<%: Url.Action( "SessionExpire", "Home" ) %>';
        }
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:07:07.080

```
$.ajaxError(function myErrorHandler(e, xhr, options, thrownError) {
  alert("Ajax error!");
}); 
```

应该成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:01:06.677

希望我能理解你的问题...

当您调用 JQuery's`ajax`时，您将传入一个具有多个属性的对象。这些属性之一是`error`。JQuery 期望将一个函数分配给该属性。您提供了一个匿名函数，但没有理由 this 不能改为对函数的引用。

因此，您可以在脚本的其他地方定义一个函数，如下所示：

```
function handleError(xhr, ajaxOptions, thrownError) {
   if (xhr.status == 403) {
      window.location.href = '<%: Url.Action( "SessionExpire", "Home" ) %>';
   }
} 
```

然后在你的ajax调用中，引用这个：

```
$.ajax({
    cache: false,
    // etc...
    error: handleError
}); 
```

# python - Python 3.1 NameError 头痛

> ID：12913122
> 
> 赞同：2
> 
> 时间：2012-10-16T10:54:45.087
> 
> 标签：python, python-3.x

我是 Python 3.1 的新手，并且在 PyScripter 上工作。

一切似乎都很顺利，直到我编写的程序在 PyScripter 中执行时运行良好，但在 cmd 窗口中运行时失败。我没有包含所有代码，而是将问题隔离为包括 input() 函数在内的一部分。

这是我所拥有的：

```
myname = input('? ')
print (myname)
input ('Press any key to end') 
```

这在 PyScripter 中运行良好，我输入我的名字，点击 Return 并出现名称，但是当我尝试在 cmd 窗口中运行它时，我得到以下结果：

```
F:\Python_Programs\input.py
? Fenton
Traceback (most recent call last):
  File "F:\Python_Programs\input.py", line 17, in <module>
     myname = input('? ')
  File "<string>" line 1, in <module>
NameError: name 'Fenton' is not defined` 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:56:21.957

您的“命令窗口”使用的是 Python 2 而不是 3。在版本 2 中，您应该使用`raw_input`.

# filepicker.io - Filepicker.io Web - 禁用内联样式

> ID：12913124
> 
> 赞同：2
> 
> 时间：2012-10-16T10:54:54.203
> 
> 标签：filepicker.io

我在为 web 设置 filepicker.io 小部件时遇到了一些问题，特别是`filepicker-dragdrop`.

有没有办法禁用内联样式并用类替换它们？类似`data-fp-disable-styles`或可能在使用`data-fp-dropzone-class="..."`内联样式时会自动禁用。

尽管您可以使用属性向按钮添加类，但`data-fp-button-class`我无法摆脱 dropzone 和容器 div 上的内联样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:15:11.203

您可以设置 data-fp-drag-class 和 data-fp-class 选项来设置 dropzone 和容器 div 的样式，并为要用于覆盖内联样式的任何样式使用 !important 标志。

如果您正在寻找更完全可定制的解决方案，我们建议您使用原始 javascript api 创建您自己的拖动窗格 (https://developers.filepicker.io/docs/web/#widgets-droppane) 和/或选择按钮

# asp.net - Kendo MVC UI 组合框字典 捆绑

> ID：12913128
> 
> 赞同：3
> 
> 时间：2012-10-16T10:55:00.833
> 
> 标签：asp.net, asp.net-mvc-4, kendo-ui

如何将类型字典绑定到剑道组合框？

```
@(Html.Kendo().ComboBox()
.Name("Division")
.DataTextField("Key")
.DataValueField("Value")
.BindTo(Model.Filter.DivisionList)
) 
```

Model.Filter.DivisionList 是 Dictionary 使用上面的代码我有一个错误“不支持字典的序列化/反序列化，键必须是字符串或对象。”

这个问题有简单的解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:31:38.127

这对我有用：

```
.Name("PaymentTerm"
).BindTo(
   new SelectList(Model.CreditCollectionInfo.PaymentTerms.Select(
         s => new {
             Key = s.Key, 
             Value = s.Value
         }
), "Key", "Value") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:00:04.617

你可以通过绑定来`IEnumerable<SelectListItem>` 获取它，你可以使用简单的查询：

```
var selectList = Model.Filter.DivisionList.Select(c=>new SelectListItem{Text = c.Value, Value = c.Key.ToString()}); 
```

# node.js - 尝试安装任何模块时“无法从注册表获取消息”

> ID：12913141
> 
> 赞同：363
> 
> 时间：2012-10-16T10:56:08.603
> 
> 标签：node.js, npm

我无法从 npm 安装任何节点模块。

```
npm install socket.io 
```

上面的命令导致下面的输出，它无法安装 socket.io

```
npm http GET https://registry.npmjs.org/socket.io

npm ERR! Error: failed to fetch from registry: socket.io
npm ERR!     at /opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/get.js:139:12
npm ERR!     at cb (/opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/request.js:32:9)
npm ERR!     at Request._callback (/opt/node0610/lib/node_modules/npm/lib/utils/npm-registry-client/request.js:137:18)
npm ERR!     at Request.callback (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:109:22)
npm ERR!     at Request.<anonymous> (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:198:58)
npm ERR!     at Request.emit (events.js:88:20)
npm ERR!     at ClientRequest.<anonymous> (/opt/node0610/lib/node_modules/npm/node_modules/request/main.js:195:10)
npm ERR!     at ClientRequest.emit (events.js:67:17)
npm ERR!     at CleartextStream.<anonymous> (http.js:1134:11)
npm ERR!     at CleartextStream.emit (events.js:67:17)
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>
npm ERR! 
npm ERR! System Linux 2.6.18-194.el5
npm ERR! command "node" "/opt/node0610/bin/npm" "install" "socket.io"
npm ERR! cwd /opt/node0610/lib/node_modules
npm ERR! node -v v0.6.10
npm ERR! npm -v 1.1.0-3
npm ERR! message failed to fetch from registry: socket.io
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /opt/node0610/lib/node_modules/npm-debug.log
npm not ok 
```

我的 NPM 版本是：

```
[applmgr@dev node_modules]$ npm --version
1.1.0-3 
```

我的 NodeJS 版本是：

```
[applmgr@dev node_modules]$ node --version
v0.6.10 
```

* * *

## 回答 #1

> 赞同：805
> 
> 时间：2014-02-11T23:50:59.597

`npm v1.1.4`我对（和）有这个问题`node v0.6.12`，它们是`Ubuntu 12.04`存储库版本。

看起来该版本`npm`不再受支持，更新节点（以及使用它的 npm）解决了该问题。

首先，卸载过时的版本（可选，但我认为这解决了我遇到的全局模块未进入路径的问题）。

```
sudo apt-get purge nodejs npm 
```

然后启用 nodesource 的 repo 并安装：

```
curl -sL https://deb.nodesource.com/setup | sudo bash -
sudo apt-get install -y nodejs 
```

注意 - 之前的建议是使用 Chris Lea 的 repo，他现在已将其迁移到 nodesource，请参阅：

*   [https://chrislea.com/2014/07/09/joining-forces-nodesource/](https://chrislea.com/2014/07/09/joining-forces-nodesource/)
*   [https://nodesource.com/blog/chris-lea-joins-forces-with-nodesource](https://nodesource.com/blog/chris-lea-joins-forces-with-nodesource)

来自：[这里](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager#wiki-ubuntu-mint-elementary-os)

* * *

## 回答 #2

> 赞同：651
> 
> 时间：2012-10-29T10:32:11.873

[https://github.com/isaacs/npm/issues/2119](https://github.com/isaacs/npm/issues/2119)

我必须执行以下命令：

```
npm config set registry http://registry.npmjs.org/ 
```

但是，这将使`npm`安装包通过不安全的 HTTP 连接。如果可以的话，你应该坚持

```
npm config set registry https://registry.npmjs.org/ 
```

而是通过 HTTPS 安装。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-03-21T12:01:52.407

我在 Ubuntu 上。我使用 apt-get 安装节点。Npm 不包含在该软件包中，因此必须单独安装。我认为这会起作用，但显然 Ubuntu 发行版中的 npm 版本已经过时了。

节点[维基](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)有这个指令：

> 获取最新版本的 Node 或在较旧的 Ubuntu 和其他基于 apt 的发行版上安装可能需要一些额外的步骤。安装示例：

```
sudo apt-get update
sudo apt-get install -y python-software-properties python g++ make
sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs 
```

在那之后，npm 已经被包括在内并且运行良好。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-02-24T19:21:02.020

对我来说，这通常是代理问题，我尝试了一切：

```
npm config set registry http://registry.npmjs.org/
npm config set strict-ssl false

npm config set proxy http://myusername:mypassword@proxy.us.somecompany:8080
npm config set https-proxy http://myusername:mypassword@proxy.us.somecompany:8080
set HTTPS_PROXY=http://myusername:mypassword@proxy.us.somecompany:8080
set HTTP_PROXY=http://myusername:mypassword@proxy.us.somecompany:8080
export HTTPS_PROXY=http://myusername:mypassword@proxy.us.somecompany:8080
export HTTP_PROXY=http://myusername:mypassword@proxy.us.somecompany:8080
export http_proxy=http://myusername:mypassword@proxy.us.somecompany:8080

npm --proxy http://myusername:mypassword@proxy.us.somecompany:8080 \
--without-ssl --insecure -g install 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2014-06-03T10:20:39.770

您还需要安装 software-properties-common 才能使 add-apt-repository 正常工作。所以它会是

```
sudo apt-get purge nodejs npm
sudo apt-get install -y python-software-properties python g++ make software-properties-common
sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-04-04T00:57:08.680

对我有用的一件事是随机的 npm install 错误（在不同的时间（但相同的环境）下出错的包是不同的）是使用这个：

`npm cache clean`

然后重复这个过程。然后这个过程似乎更顺利，真正的问题和错误消息将出现，您可以在其中修复它然后继续。

这是基于在 Docker 实例中的一个非常裸的 Ubuntu 安装下运行一大堆包的 npm install 的经验。有时 Ubuntu 中缺少构建/制作工具，并且 npm 错误不会显示真正的问题，直到您出于某种原因清理缓存。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-03-27T00:23:11.587

这个问题是由于 https 协议造成的，这就是其他解决方案有效的原因（通过切换到非安全协议）。

对我来说，最好的解决方案是编译最新版本的 node，其中包括 npm

```
apt-get purge nodejs npm
git clone https://github.com/nodejs/node ~/local/node
cd ~/local/node
./configure
make
make install 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-09-22T19:39:21.667

现在有[来自joyent](https://github.com/joyent/node/wiki/installing-node.js-via-package-manager)（主要nodejs支持者）的官方说明。对于 Ubuntu：

```
sudo apt-get purge nodejs npm
curl -sL https://deb.nodesource.com/setup | sudo bash -
sudo apt-get install -y nodejs 
```

对于其他 unix 发行版、osx 和 windows，请参阅链接。请注意，这将同时安装 node 和 npm。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-12-20T19:11:45.410

唯一对我有用的是 Elementary OS Luna，一个 Ubuntu Fork。我在 x86 架构上。我在这里尝试了所有答案，但最终决定从源代码安装它。

首先，确保它没有使用包管理器安装：

```
sudo apt-get purge nodejs npm -y 
```

我去下载页面查找最新的源并下载它，[http://nodejs.org/download/](http://nodejs.org/download/)。您可以使用 curl、wget 或您的浏览器来获取它：

```
wget http://nodejs.org/dist/v0.10.34/node-v0.10.34.tar.gz
tar -xvf node-v0.10.34.tar.gz 
cd node-v0.10.34
./configure
make
sudo make install 
```

制作可能需要一段时间。完成后，您应该已经安装了 node 和 npm 并在您的 /usr/local/bin 目录中工作，该目录应该已经在您的路径上。您应该验证它的位置：

```
which npm node 
```

我还必须更改权限才能使其正常工作：

```
sudo chown -R $USER /usr/local 
```

如果它不起作用，请检查您的路径：

```
echo $PATH 
```

请注意，以这种方式安装它，它不会由 apt-get 包管理器管理。干杯!

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-20T07:49:57.763

以下方法对我有用，感谢 github 用户：midnightcodr

确保删除已安装的任何 nodejs/npm 包。

```
sudo apt-get purge nodejs

sudo apt-get purge npm 
```

现在使用下面的命令安装Node js（感谢github上的midnightcodr）

```
curl -L https://raw.github.com/midnightcodr/rpi_node_install/master/setup.sh | bash -s 0.10.24 
```

请注意，您可以使用命令 node 而不是 nodejs 调用 node。

安装节点后，安装 npm

```
sudo apt-get install npm 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-08-01T12:47:42.810

最近我在将node.js（不可避免地是npm）升级到最新版本后遇到了这个问题：

`> npm --version < 2.0.0-alpha-5`

注意：我没有*要求*不稳定的版本，我只是`brew install npm`在 OSX 上得到它。

降级 npm 为我解决了这个问题。

安装稳定版 npm 的最简单方法是`npm install -g npm`，但在某些情况下它可能无法正常工作，然后可能需要降级 node.js。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-10-16T16:13:23.570

可能是当时 npm 注册表已关闭或您的连接断开。

无论哪种方式，您都应该升级 node 和 npm。

我建议使用**nave**来管理您的节点环境。

[https://npmjs.org/package/nave](https://npmjs.org/package/nave)

它允许您轻松安装版本并在它们之间快速跳转。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-01-14T06:53:25.123

对于树莓派，我找到并修改了我在这里找到的[解决方案](http://raspberryalphaomega.org.uk/2014/06/11/installing-and-using-node-js-on-raspberry-pi/)
是我运行的

```
sudo su -
cd /opt
wget http://nodejs.org/dist/v0.10.28/node-v0.10.28-linux-arm-pi.tar.gz
tar xvzf node-v0.10.28-linux-arm-pi.tar.gz
ln -s node-v0.10.28-linux-arm-pi node
chmod a+rw /opt/node/lib/node_modules
chmod a+rw /opt/node/bin
echo 'PATH=$PATH:/opt/node/bin' > /etc/profile.d/node.sh 
```

我做的唯一模组是将所有 10.25 更改为 10.28，这是当时最新的 linux-arm-pi

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-05-12T22:27:42.617

@therefromhere 的答案是最好的。然而，Node 版本不断向前和向上移动，并且版本控制因 io.js 的重新合并而变得复杂。按照他回答中的步骤，您最终会得到 Node 版本`0.10.25`——而不是最新版本。

您仍然应该清除任何现有的 node/npm 包

```
sudo apt-get purge nodejs npm 
```

然后去查看[https://github.com/nodesource/distributions#debinstall上的](https://github.com/nodesource/distributions#debinstall)**nodesource deb**安装页面。

**所有 Node.js 版本都列**在上面的页面上，并带有用于安装它们的 Linux 命令。这些软件包将在**Debian 和 Ubuntu**上运行。

PS 如果您想在 Ubuntu Precise 或 Debian Wheezy 上运行 Node v4.4 或更高版本，您应该查看[有关在旧发行版上运行](https://github.com/nodesource/distributions/blob/master/OLDER_DISTROS.md)的信息。

PPS 如果您的**apt-get 失败**，脚本将无法完成（Google 引用失败了我的`apt-get update`）。您应该会看到有关将 NodeSource 签名密钥添加到您的密钥环的消息，以及一条指示您执行的最终消息`Run 'apt-get install nodejs' to install Node.js`。

PPPS npm 与 node 一起安装。安装后，您可以使用以下命令更新到最新的 npm`sudo npm install npm -g`

# android - 如何更改像gmail这样的操作栏

> ID：12913143
> 
> 赞同：3
> 
> 时间：2012-10-16T10:56:12.363
> 
> 标签：android, android-actionbar

我想创建一个actionbar，让它像gmail的actionbar。也就是说，当在 listView 中选中 item 时，actionbar 的 logo 会变成 Cancel 按钮。这是否必须自定义操作栏的布局？ ![在此处输入图像描述](../Images/3aad4c2d3aa5bac042ffabd49c1e83cb.png)

或者，它不是操作栏，而是上下文菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:39:34.777

感谢@Selvin 和@CommonsWare，它是一个上下文菜单，`ListView`或者`RecyclerView`，您可以调用[`startActionMode()`](https://developer.android.com/guide/topics/ui/menus.html#CAB)它来启动它（API 11 或更高版本）。

但是在`startActionMode()`，它不会调用`onItemCheckedStateChanged`，你必须自己实现一个来自适配器的点击监听器。

# jquery - twitter bootstrap 模态淡入淡出滚动页面

> ID：12913144
> 
> 赞同：0
> 
> 时间：2012-10-16T10:56:13.770
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

> **可能重复：**
> [Twitter Bootstrap 模式在显示页面上滚动](https://stackoverflow.com/questions/12894570/twitter-bootstrap-modal-scrolling-the-page-up-on-show)

我遇到了 Twitter Bootstrap 模式的问题。具体来说，如果我应用类`fade`来让模态淡入淡出一切正常。

但是我在页面向上滚动时遇到了这个奇怪的问题。

它并不总是一直向上滚动，我*认为*它仅在模态淡入淡出动画运行时滚动。

JSBIN：http: [//jsbin.com/ebepet/3#85](http://jsbin.com/ebepet/3#85)

# jquery - 自动播放/暂停 Youtube iframe

> ID：12913146
> 
> 赞同：1
> 
> 时间：2012-10-16T10:56:21.643
> 
> 标签：jquery, youtube, youtube-api, autoplay

我目前有这个代码：http: [//jsfiddle.net/D5EMp/25/](http://jsfiddle.net/D5EMp/25/)

此代码淡入/淡出嵌入了 YouTube 的 div。目前，当您单击观看节目时，它不会自动播放。我希望它在单击“观看 showreel”按钮时自动播放。

此外，如果视频正在播放并且您单击“X 隐藏”按钮，包装器会隐藏视频，但视频会继续播放。我想在按下“X Hide”按钮时暂停视频。

如何编辑现有代码以获得我想要的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T04:13:13.623

完全支持您想做的一切；只需使用 iframe Player API：

[https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:04:30.463

我认为您不能向 iframe 发送播放/暂停命令。但是，您可以做的是在您希望它播放时包含它（使用自动播放选项）并在您希望它停止时将其删除。试试这个： http: [//jsfiddle.net/D5EMp/26/](http://jsfiddle.net/D5EMp/26/)（我不能100%确认它可以工作，因为我现在阻止了youtube）

# jquery - Jquery 不寻常的幻灯片

> ID：12913156
> 
> 赞同：2
> 
> 时间：2012-10-16T10:56:58.883
> 
> 标签：jquery, jquery-animate

我正在创建一个不寻常的幻灯片，其中包含 3 张图片而不是一张，请看一下：

![在此处输入图像描述](../Images/d2db924bf9b1ae8023d1b63a82078c96.png)

所以正如我所说，它由 3 个部分组成，中间一个 100% 可见，另外两个每个只有 50% 可见，现在当你想要更改图像时，它们三个都向左或向右滑动，然后中间的一个走到一边，一半变得不可见。

现在我已经想出了如何做到这一点，我要处理的是我不知道如何知道我需要从`1`to`5`或任何其他数字滑动多少次，这很难解释，所以我做了这个小提琴：[http://jsfiddle.net/cnYSU/3/](http://jsfiddle.net/cnYSU/3/)

正如你在那个小提琴中看到的那样，我刚刚做了很多`if`，它变成了一个巨大的混乱，所以必须有一些更好的方法来做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:02:29.703

我提出了这个[解决方案](http://jsfiddle.net/scaillerie/QSC8T/2/)，您可以在其中导航下一个/上一个和页码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:32:17.740

这里我给你更简单的

[http://jsfiddle.net/viyancs/Wwr8Z/2/](http://jsfiddle.net/viyancs/Wwr8Z/2/)

# javascript - 如何保留输入字段并删除他的第一个父母

> ID：12913158
> 
> 赞同：1
> 
> 时间：2012-10-16T10:57:06.870
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我有以下场景：我想将输入字段附加到不同的父级。代码看起来像这样

```
 <div id="id1">
        <div id="id2">
             <input type="radio">
       </div>
    </div> 
```

我想将输入字段附加到“id1”并删除“id2”。最终结果应该是这样的

```
 <div id="id1">
        <input type="radio">
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:59:16.220

```
​$('#id2 input').​​​​appendTo($('#id1'))​​​​;
$('#id2').remove(); 
```

[演示](http://jsfiddle.net/MafhZ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T10:59:35.647

```
$('#id2 input').appendTo($('#id1'));
$('#id2').remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:00:24.520

在一行中：

```
​$("#id2"​​).find("input").appendTo("#id1"​).end().end().remove();​​​​​ 
```

另一行：

```
​$("#id2 input"​​).unwrap("#id2");​​​​​ 
```

**演示：http:** [//jsfiddle.net/CrmMG/](http://jsfiddle.net/CrmMG/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T11:03:02.917

```
$div = $('input:radio').clone();
$('#id2').remove();
$('#id1').append($div); 
```

[小提琴](http://jsfiddle.net/pintu31/D5rvT/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T11:03:13.317

你可以使用它们中的任何一个。

```
 $('#id2 input').​​​​appendTo($('#id1'))​​​​;
    $('#id2').remove();
    or
   $('#id2 input').unwrap(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T11:05:07.967

使用 jQuery `unwrap()`。它删除选择器的父级，将所选元素留在原处

```
$('#id2 input').unwrap() 
```

API 参考 [http://api.jquery.com/unwrap/](http://api.jquery.com/unwrap/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T11:00:29.650

```
$('#id1').append($('#id2 input'))
$('#id2').remove(); 
```

[现场演示](http://jsfiddle.net/67VYQ/2/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T11:01:27.190

接受你的意见

```
 var input =  $("inputselector"); 
```

将其放入所需的容器中

```
var parentRef =  $("inputselector").parent();
 $("inputselector").parent().parent().append( $("inputselector")); 
```

删除父级

```
 parentRef.remove(); 
```

# sockets - 通过套接字发送的二进制文件已损坏

> ID：12913160
> 
> 赞同：0
> 
> 时间：2012-10-16T10:57:13.113
> 
> 标签：sockets, tcp, header, send, recv

我正在做一个将在两台计算机之间传输文件的代码。我正在使用 tcp 套接字进行连接。问题是我需要将某种标头附加到我正在发送的文件字节中，以便接收者知道我正在发送的内容是文件的一部分。假设我的标题是`data`. 我将发送的字符串是：`data <file bytes>`.

我能够发送它们并且接收者能够接收它们，但文件似乎已损坏。尽管对于未格式化的文本文件，它运行良好，但对于其他文件，它似乎不能有效地解析文件。

```
while(1){
    fp = (char*) malloc (56);
    rc = recv(connfd,fp,55,0);

    if(strcmp(fp,"stop") == 0){
        break;
    }

    fp = fp + 5; //I do this to skip the 'data<space>" header
    wr = write(fd,pf2,rc-5);
    tot = tot + wr;
    printf("Received a total of %d bytes rc = %d \n",tot, rc);
} 
```

但是我尝试发送不带标头的文件并且我得到了未损坏的文件，但我需要为这个特定的代码使用那些“数据”标头。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:03:51.847

> ```
> fp = fp + 5; //I do this to skip the 'data<space>" header 
> ```

但是您不会`data<space>`在每次`receive()`通话中都收到标头。您必须保留一个缓冲区，将收到的所有数据添加到该缓冲区中，直到遇到另一个`"data<space>"`.

请注意，分隔符通常不是一个好主意。如果您发送一个包含字符串的文件`"data<space>"`怎么办？您的客户会假设在那之后会发送一个新文件，而实际上您仍在接收原始文件。

尝试发送某种消息长度标头，例如 uint32，它在您发送的每个文件之前占用四个字节。然后，您可以读取前四个字节，然后您就知道该文件还可以预期多少字节。

# php - 插入两个不同的数据库

> ID：12913165
> 
> 赞同：0
> 
> 时间：2012-10-16T10:57:24.297
> 
> 标签：php, mysql

我正在尝试使用 MySQL 插入两个不同的数据库；-

```
`$this->sql = "INSERT INTO tblfixedfare SELECT NULL, MAX(FixedFareID)+1, '1', '$fieldDay' FROM tblfixedfare UNION SELECT NULL, MAX(FixedFareID)+1, '2', '$fieldNight' FROM tblfixedfare,INSERT INTO tblfixedfaresetup SELECT NULL, MAX(FixedFareID)+1, '$fieldFrompc', '1', '2' FROM tblfixedfaresetup UNION SELECT NULL, MAX(FixedFareID)+1, '$fieldTopc', '2', '2' FROM tblfixedfaresetup";` 
```

每次插入都没有问题，因为两者都分别将两行插入每个表中。

我如何让这两个同时执行？目前我收到以下错误：

语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在附近使用的正确语法

```
'INSERT INTO tblfixedfaresetup SELECT NULL, MAX(FixedFareID)+1, 'DE115', '1', '2'' at line 2SQL: INSERT INTO tblfixedfare SELECT NULL, MAX(FixedFareID)+1, '1', '20' FROM tblfixedfare UNION SELECT NULL, MAX(FixedFareID)+1, '2', '30' FROM tblfixedfare UNION
                                INSERT INTO tblfixedfaresetup SELECT NULL, MAX(FixedFareID)+1, 'DE115', '1', '2' FROM tblfixedfaresetup UNION SELECT NULL, MAX(FixedFareID)+1, 'DE116', '2', '2' FROM tblfixedfaresetup` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:05:47.997

您可以使用两个不同的连接和单独的插入查询来插入两个数据库。或在插入时使用 databasename.table 名称。谢谢

# dynamic - 来自参数的动态图表系列数据 (SSRS)

> ID：12913166
> 
> 赞同：0
> 
> 时间：2012-10-16T10:57:28.487
> 
> 标签：dynamic, reporting-services, charts

如何在 SSRS 中创建动态系列图表。我有四个参数。选择参数后，图表将绘制。我的意思是图表的序列名称不会硬编码。系列名称将来自参数。我在系列区域中使用了表达式，例如“=Parameters!MyDuration.Value”，其中 MyDuration 是我的参数。但它没有用。请指导我如何编写表达式或任何其他方式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:55:18.110

我自己找到了我的问题的解决方案。参数中的动态系列名称将是这样的。=总和（字段（参数！MyParameterName.Value）.Value）。

# java - 限制 JTable 中显示的行 + 下一个/上一个按钮

> ID：12913167
> 
> 赞同：1
> 
> 时间：2012-10-16T10:57:30.170
> 
> 标签：java, swing, jtable

我正在尝试创建一个当时只显示一行的 JTable。当您按下 Next/Previous 时，表格将显示下一行或上一行，具体取决于按下的按钮。如果没有 Next/Previous，JTable 将显示第一个/最后一个元素。

一次只显示一行的代码：

```
tableModel = new DefaultTableModel(data, columnNames);
tableModel.setRowCount(0); //If I remove this, the things I add ends up att the 2nd line.
tableModel.addTableModelListener(resultTable);
resultTable = new JTable(tableModel);
scroll = new JScrollPane(resultTable, JScrollPane.VERTICAL_SCROLLBAR_NEVER, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);

final int rows = 1;
Dimension d = resultTable.getPreferredSize();
resultTable.setPreferredSize(new Dimension(d.width,resultTable.getRowHeight()*rows)); 
```

下一个按钮的代码（不工作，怎么办？显示与以前相同的元素）：

```
int height = resultTable.getRowHeight()*(rows-1);
JScrollBar bar = scroll.getVerticalScrollBar();
bar.setValue( bar.getValue()+height); 
```

上一个按钮的代码（不起作用，与上面相同，没有任何反应/变化。）

```
int height = resultTable.getRowHeight()*(rows-1);
JScrollBar bar = scroll.getVerticalScrollBar();
bar.setValue(bar.getValue()-height); 
```

做什么？一些帮助将不胜感激。一直试图永远解决这个问题。

编辑：尝试遵循此处的代码：[JTable 行限制](https://stackoverflow.com/questions/6175139/jtable-row-limitation)但无法使其正常工作。虽然我只想显示 1 行，而不是 10 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:27:58.123

从上面您指定行数以获取表中的单行

```
 final int rows = 2; 
```

或者，您可以尝试使用带有行标题的表格。这是一个示例 [http://www.java2s.com/Code/Java/Swing-Components/TableRowHeaderExample.htm](http://www.java2s.com/Code/Java/Swing-Components/TableRowHeaderExample.htm)

# java - Web 服务无法在 GlassFish 上运行

> ID：12913168
> 
> 赞同：1
> 
> 时间：2012-10-16T10:57:33.103
> 
> 标签：java, axis

我正在 Axis 1.4 版本的 Eclipse Helios 中生成 Web 服务客户端。通过使用本地主程序，客户端存根按预期工作正常，但是当我在 GlassFish 服务器上部署存根和应用程序时，出现以下异常：

编辑：现在它给出了这样的例外..

```
java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [META-INF/services/org.apache.axis.EngineConfigurationFactory], because it has not yet been started, or was already stopped
    at org.glassfish.web.loader.WebappClassLoader.findResourceInternal(WebappClassLoader.java:2074)
    at org.glassfish.web.loader.WebappClassLoader.findResource(WebappClassLoader.java:1034)
    at org.glassfish.web.loader.WebappClassLoader.getResource(WebappClassLoader.java:1169) 
```

谁能告诉我为什么会这样？

仅当我在 GlassFish 服务器上部署应用程序时才会发生这种情况。

谢谢，甘扬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:18:51.427

[这](https://stackoverflow.com/questions/3532262/cant-redeploy-war-that-uses-axis-in-glassfish-3)是指您遇到的类似问题。因此，正如我在评论中提到的，从全局`glassfish`类路径中删除所有与 Axis 相关的内容，将它们添加到您的应用程序中，一切都应该没问题。

将特定于框架的库保留在服务器全局库中并不是一个很好的做法。在全局类路径中应该使用 JDBC、日志框架等库，而不是 WS 堆栈特定的库。

# phantomjs - 适用于 Windows 的 Phantomjs 安装

> ID：12913172
> 
> 赞同：7
> 
> 时间：2012-10-16T10:57:49.730
> 
> 标签：phantomjs

[我从这里](http://phantomjs.org/download.html)下载了适用于 Windows 的“phantomjs-1.7.0-windows.zip” 。

我什至在环境变量中设置了提取文件夹的路径。但是当我尝试`phantomjs --version`在`phantomjs.exe`命令提示符中输入任何命令时出现“解析错误”。（我的 Windows 是 64 位的。）

为什么会抛出错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T14:34:43.337

键入`phantomjs --version`Windows*命令提示符*。

如果您通过执行来启动 PhantomJS `phantomjs.exe`，那么您现在处于 PhantomJS 交互模式 (REPL) 中。在此提示中，您应该键入 JavaScript 代码。

# git - Git 将当前提交哈希附加到提交命令的结果

> ID：12913173
> 
> 赞同：0
> 
> 时间：2012-10-16T10:57:53.843
> 
> 标签：git, git-alias

我想将正在进行的提交的哈希附加到其结果中。我可以使用以下命令检索哈希：

```
git log --format=%H | tail -1 
```

然后我尝试将*提交*与上面的命令合并，并在“.gitconfig”中创建一个别名，如下所示：

```
[alias]
    ci = !git commit && git log --format=%H | tail -1 
```

但这不起作用；别名的参数是发送到*tail*命令，而不是*git commit*。
我应该如何创建这个别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:37:49.143

```
ci = !sh -c 'git commit "$@" && git log --format=%H | tail -1' -- 
```

[你可以在这里](https://git.wiki.kernel.org/index.php/Aliases#Advanced_aliases_with_arguments)找到更多信息

这也是获取最后一次提交的哈希的更优方法：

```
git log -1 --pretty=format:%H 
```

# apache - 指向 php 文件 (mod_rewrite) 时使用 .htaccess 得到错误 500

> ID：12913179
> 
> 赞同：0
> 
> 时间：2012-10-16T10:58:27.887
> 
> 标签：apache, .htaccess, mod-rewrite

我制作了一个简单的 .htaccess 文件来暴露问题。

我希望对文件夹的所有请求都重定向到子文件夹文件“app/index.php”

```
RewriteEngine On

RewriteRule (.*) app/index.php [QSA] 
```

这适用于我的主机的基本网址（比如`http//myname.hosting.com/htaccessFolder`

问题是我有一个指向此文件夹的域，当访问它时，服务器返回`Internal Server Error 500`.

如果我这样做：

```
RewriteEngine On

RewriteRule (.*) somefile.php [QSA] 
```

重定向仅在文件不存在时有效（发生 404 未找到错误）。当文件存在时，我也会收到 500 错误。

我暂时要求托管支持但没有成功..

编辑 ：

奇怪的是，当我写：

```
RewriteEngine On

RewriteRule (.*) somefile.txt [QSA] 
```

它适用于机器人，所以问题似乎来自执行 php 文件..

编辑2：

这是我尝试使用的真实 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #RewriteCond %{REQUEST_FILENAME} -f 
    #RewriteRule .? - [L]

    #####################

    RewriteRule (.*) app/public/$1

    RewriteCond %{REQUEST_FILENAME} -f 
    RewriteRule .? - [L]

    RewriteRule app/public/(.*) $1

    #####################

    #RewriteCond %{REQUEST_FILENAME} question2answers/(.+)
    #RewriteRule .? - [L]

    #####################

    #RewriteCond %{REQUEST_FILENAME} !-f
    #RewriteRule (.*) index.php [L,QSA]

</IfModule> 
```

你可以看到只有公共块没有被评论但是当我去网站时我得到这个：请求的 URL /cgi-bin/php5.fcgi/index.php/index.php/index.php/index.php/ index.php/index.php/index.php/in.....

但我请求公共文件夹中的文件（如[http://website.com/css/style.css](http://website.com/css/style.css)（在 public/css 中）它按预期工作。当我不评论最后一个块时，我得到一个500 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:26:20.273

好的，我找到了避免重定向的解决方案：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #####################

    RewriteCond %{QUERY_STRING} stop
    RewriteRule (.*) - [L]

    #####################

    RewriteCond %{REQUEST_URI} question2answers/(.*)
    RewriteRule (.*) $1?htaccess=stop [L,QSA]

    #####################

    RewriteRule (.*) app/public/$1

    RewriteCond %{REQUEST_FILENAME} -f 
    RewriteRule (.*) $1?htaccess=stop [L]

    RewriteRule app/public/(.*) $1

    #####################

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule (.*) index.php?htaccess=stop [L,QSA]

</IfModule> 
```

我不明白所有，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:39:11.047

尝试在您的 htaccess 文件中添加：

```
Options -Multiviews 
```

它会关闭内容协商，这有时会影响 URL 如何映射到具有 php 等扩展名的文件。

# php - drupal 7-在自定义模块中移动和显示上传的图像

> ID：12913180
> 
> 赞同：0
> 
> 时间：2012-10-16T10:58:28.497
> 
> 标签：php, content-management-system, drupal-7, drupal-modules

我正在开发一个自定义模块，我想在其中：

1.  通过表单上传图片。
2.  将图像从默认文件夹移动到我想要的文件夹。
3.  最后在相同的表单下显示图像（在提交按钮下方）。

我已经通过实现 hook_menu 和 hook_form 实现了第一个目标，但是在过去的 3 天里，我在剩下的两个目标中陷入了非常严重的困境。每当我尝试从默认文件夹移动上传的图像时，我都会收到“位置无效”的错误消息，第三点我不明白该怎么做？我希望当用户选择图像并提交表单时，图像显示在提交按钮下的同一页面上。任何帮助将非常感激。这是我的代码：-

```
function create_ad_form($form, &$form_submit)
{
   ...

   $form['image_file'] = array(
     '#title' => t('Upload Banner:'),
     '#type' => 'file'
   );

   $form['#attributes']['enctype'] = 'multipart/form-data';

   ...
}

function create_ad_form_submit($form, &$form_state)
{
    $module=drupal_get_path('module', 'create_ad');
    $validators = array();

    $file = file_save_upload('image_file', $validators,"public://",FILE_EXISTS_RENAME);

     if ($file)
 {
    $file->status=FILE_STATUS_PERMANENT;
    file_save($file);

    $result = file_unmanaged_copy($file, $module, FILE_EXISTS_RENAME);
    if ($result == 1)
    {

    }
    else
    {
      drupal_set_message('Couldn\'t copy file: '.$file->name);
    }
  }
  else
  {
    form_set_error('create_ad', t("Failed to save the file."));
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:25:14.880

我已经设法显示图像，但仍然无法将图像移动到任何文件夹，因此将它们放在默认的“public://”目录中。此处讨论了在没有 ajax 的情况下在同一页面上显示图像：[Drupal 7 FAPI-在验证或提交处理程序中添加表单元素](https://stackoverflow.com/questions/12973378/drupal-7-fapi-adding-form-elements-in-validate-or-submit-handlers) 以及此处讨论的 ajax：[Drupal 7 FAPI - ajax 图像预览](https://stackoverflow.com/questions/13011522/drupal-7-fapi-ajax-image-preview)

# sublimetext2 - JSLint with Sublime text 2 - 系统找不到指定的文件

> ID：12913184
> 
> 赞同：2
> 
> 时间：2012-10-16T10:59:00.403
> 
> 标签：sublimetext2, jslint, sublime-jslint

我已经正确安装了 JSlint，但是当我尝试运行它时，出现以下错误：

【错误2】系统找不到指定的文件

[cmd: [u'/usr/local/bin/node', u'/usr/local/bin/jslint', u'--sloppy', u'-- indent', u'2', u'--node', u'--nomen', u'--vars', u'--plusplus', u'--stupid', u'']]

[dir : C:\Users\agrawal_d\AppData\Roaming\Sublime Text 2\Packages]

[路径: C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell \v1.0\;C:\Program Files\TortoiseSVN\bin;c:\Python27;C:\Program Files\nodejs\;C:\Users\agrawal_d\AppData\Roaming\npm]

[已完成]

不明白为什么会显示这个，谁能给我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:13:22.100

jslint 很可能必须使用 Node 和 NPM 包管理器单独安装在您的计算机上

请按照插件 README 中的插件安装说明进行操作。

这是带有一些图片的指南

[http://opensourcehacker.com/2012/04/12/jslint-integration-for-sublime-text-2/](http://opensourcehacker.com/2012/04/12/jslint-integration-for-sublime-text-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T13:41:05.693

我也遇到了这个问题，我通过替换到我的节点的路径来破解`JSLint.sublime-build`安装的 JSLint 包目录下的文件，它可以工作。`/usr/local/bin/node`

似乎您正在 Windows 平台下安装 sublime text。也许您需要找到节点安装的路径（例如，`C:\Program Files\nodejs\bin\node`）并确保 JSLint 包可以找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T05:49:26.207

这看起来很奇怪，但在我的情况下，解决方案是不同的。我收到以下错误： `FileNotFoundError: [WinError 3] The system cannot find the path specified: 'c:\\users\\arvind~1\\appdata\\local\\temp\\SublimeLinter3-arvind\\app.js'`

我检查了`c:\\users\\arvind~1\\appdata\\local\\temp\\`文件夹，发现它没有`SublimeLinter3-arvind`文件夹。我手动创建了这个文件夹，JSHint 它开始工作了..

# emacs - 如何更改特定基本模式缓冲器的变量

> ID：12913189
> 
> 赞同：5
> 
> 时间：2012-10-16T10:59:12.213
> 
> 标签：emacs, advising-functions, defadvice

目标：我想`show-trailing-whitespace`为所有缓冲区启用保存一些。引起问题的异常是`*Shell Command Output*`和它的表亲`*Async Shell Command*`。

我通常`show-trailing-whitespace`定制为`t`. 因此，它在所有新缓冲区中都处于活动状态。

我还想为某些缓冲区关闭它，其中最重要的是`*Shell Command Output*`。这给我带来了一个问题：

*   输出缓冲区不使用特殊模式；它还在`fundamental-mode`。我无法`fundamental-mode-hook`将这个设置挂钩。
*   当主要`after-major-mode-change-hook`模式更改为时运行 which `fundamental-mode`，但缓冲区以该模式启动，因此此挂钩未运行。
*   好像没有办法勾搭`get-buffer-create`。

我知道我总是可以使用这个特定示例`advise`的功能`get-buffer-create`，但我会尽量避免这种情况。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:45:00.970

您最好从另一边看问题，并且仅在您希望看到尾随空格的那些模式下设置 var。

但我认为你有一个很好的观点：这些 shell 输出缓冲区不应该使用`fundamental-mode`. 大概是时候了`M-x report-emacs-bug`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T15:40:03.567

根据接受的答案，这是一个代码片段，它仅对特定模式启用尾随空格突出显示：

```
(setq-default show-trailing-whitespace nil)

(defun namespace/show-trailing-whitespace ()
  "Highlight trailing whitespaces in this buffer."
  (setq-local show-trailing-whitespace t))

(dolist (hook '(prog-mode-hook text-mode-hook))
  (add-hook hook 'namespace/show-trailing-whitespace)) 
```

这个片段基本上取自[Steve Purcell 的配置](https://github.com/purcell/emacs.d/blob/master/lisp/init-whitespace.el)。

# c++ - std::list - 对一项进行排序

> ID：12913193
> 
> 赞同：0
> 
> 时间：2012-10-16T10:59:24.737
> 
> 标签：c++, list, sorting, stl

是否可以根据一个项目对列表进行排序？

例如，如果我有

```
1,3,2,4,5,6,7 ... 1000000 
```

而且我知道这是第二个元素，`3`是否可以在不重新排序整个列表的情况下有效地排序`3`到它的正确位置？`2``4`

**编辑：**我还应该注意，在这种情况下，假设列表的*其余部分*已经排序；只是`3`现在不合适了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T11:02:26.293

你可以简单地找到那个无序的对象（O（n）），取出对象（O（1）），找到正确的位置（O（n）），然后再次插入（O（1））。

假设 C++11，

```
#include <list>
#include <algorithm>
#include <iostream>

int main() {
    std::list<int> values {1, 2, 3, 9, 4, 5, 6, 7, 12, 14};

    auto it = std::is_sorted_until(values.begin(), values.end());
    auto val = *--it;
    // ^ find that object.

    auto next = values.erase(it);
    // ^ remove it.

    auto ins = std::lower_bound(next, values.end(), val);
    // ^ find where to put it back.

    values.insert(ins, val);
    // ^ insert it.

    for (auto value : values) {
        std::cout << value << std::endl;
    }
} 
```

在 C++11 之前，您需要[自己](http://en.cppreference.com/w/cpp/algorithm/is_sorted_until)[实现`std::is_sorted_until`](http://en.cppreference.com/w/cpp/algorithm/is_sorted_until).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:11:11.720

对于这种非常有限的情况，编写自己的冒泡排序可能比 std::sort 更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:08:20.350

If you think about the traversal possible for a list, it's clearly only end-to-end. So:

*   if you don't know where the mis-ordered element is you have to first scan through the elements one by one until you find it, then
*   you can remember the value and delete the out-of-order element from the list, then
*   there are two possibilities:
    *   that element is greater in your sorting order than any other element you've yet encountered, in which case you need to keep going through the remaining elements until you find the correct place to insert it.
    *   the element would belong somewhere amongst the elements you've already passed over, in which case:
    *   *   you can move backwards, or forwards from the first element again, until you find the correct place to put it.
    *   *   if you've created some records from your earlier traversal you can instead use it to find the insertion place faster, for example: if you've created a `vector` of list `iterator`s, you can do a binary search in the `vector`. Vectors of every Nth element, hash tables etc. are all other possibilities.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:15:22.863

这是如果你不使用`std::list`.

使用选择排序算法，`selectionSort(list,3)`如果您知道这是范围，您只需对项目 0 到 3 ( ) 进行排序。直到最后都不是整个范围。

示例代码：

```
#include <iostream>
using namespace std;

void selectionSort(int *array,int length)//selection sort function 
{
    int i,j,min,minat;
    for(i=0;i<(length-1);i++)
    {
        minat=i;
        min=array[i];
      for(j=i+1;j<(length);j++) //select the min of the rest of array
      {
          if(min>array[j])   //ascending order for descending reverse
          {
              minat=j;  //the position of the min element 
              min=array[j];
          }
      }
      int temp=array[i] ;
      array[i]=array[minat];  //swap 
      array[minat]=temp;

    }
}

void printElements(int *array,int length) //print array elements
{

    int i=0;
    for(i=0;i<length;i++)     cout<<array[i]<<"  ";
    cout<<" \n ";
}

int main(void)
{

    int list[]={1,3,2,4,5,6};   // array to sort 
    int number_of_elements=6;

    cout<<" \nBefore selectionSort\n";
    printElements(list,number_of_elements);      

    selectionSort(list,3); 

    cout<<" \nAfter selectionSort\n";
    printElements(list,number_of_elements);      

    cout<<" \nPress any key to continue\n";
    cin.ignore();
    cin.get();

   return 0;
} 
```

输出：

```
Before selectionSort
1  3  2  4  5  6

After selectionSort
1  2  3  4  5  6

Press any key to continue 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T11:02:32.603

如果您有这样的知识水平，为什么不自己交换物品而不是试图强迫`sort`为您做呢？

当然这是更好的方法。

即使您*不*知道它必须去哪里，您也可以快速找到它，将其移除，然后将其插入正确的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T11:03:49.307

我想您可以使用该`insert`方法来移动元素，但我想更多地了解您计算其“正确”位置的方式：可能有更适合的算法。

# iphone - 半透明状态栏下带有 UIRefreshControl 的 UITableView

> ID：12913208
> 
> 赞同：6
> 
> 时间：2012-10-16T11:00:04.920
> 
> 标签：iphone, objective-c, ios, uitableview, uirefreshcontrol

我创建了一个 UITableView，我想在我的半透明黑色状态栏下方滚动。在我的 XIB 中，我只是将表格视图的 y 位置设置为 -20，一切看起来都很好。

现在，我刚刚添加了一个下拉刷新 iOS6 UIRefreshControl，但是由于 -20 y 位置，它可以从状态栏后面拖动。我希望它的“拉伸到”位置位于状态栏下方而不是后面。

为什么它会搞砸是有道理的，但改变它的框架似乎没有任何区别，并且 tableview 的内容插图等没有任何区别。

文档建议，一旦设置了 refreshControl， UITableViewController 就会从那时起处理它的位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-19T19:44:52.863

您可以像这样子类化`UIRefreshControl`并实现`layoutSubviews`：

```
@implementation RefreshControl {
    CGFloat topContentInset;
    BOOL topContentInsetSaved;
}

- (void)layoutSubviews {
    [super layoutSubviews];

    // getting containing scrollView
    UIScrollView *scrollView = (UIScrollView *)self.superview;

    // saving present top contentInset, because it can be changed by refresh control
    if (!topContentInsetSaved) {
        topContentInset = scrollView.contentInset.top;
        topContentInsetSaved = YES;
    }

    // saving own frame, that will be modified
    CGRect newFrame = self.frame;

    // if refresh control is fully or partially behind UINavigationBar
    if (scrollView.contentOffset.y + topContentInset > -newFrame.size.height) {
        // moving it with the rest of the content
        newFrame.origin.y = -newFrame.size.height;

    // if refresh control fully appeared
    } else {
        // keeping it at the same place
        newFrame.origin.y = scrollView.contentOffset.y + topContentInset;
    }

    // applying new frame to the refresh control
    self.frame = newFrame;
} 
```

它考虑了tableView `contentInset`，但您可以将`topContentInset`变量更改为您需要的任何值，其余部分将由它处理。

我希望代码有足够的文档来理解它是如何工作的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T17:42:49.480

只需子类化 UIRefreshControl 并像这样覆盖 layoutSubviews：

```
- (void)layoutSubviews
{
    UIScrollView* parentScrollView = (UIScrollView*)[self superview];

    CGSize viewSize = parentScrollView.frame.size;

    if (parentScrollView.contentInset.top + parentScrollView.contentOffset.y == 0 && !self.refreshing) {
        self.hidden = YES;
    } else {
        self.hidden = NO;
    }

    CGFloat y = parentScrollView.contentOffset.y + parentScrollView.scrollIndicatorInsets.top + 20;

    self.frame = CGRectMake(0, y, viewSize.width, viewSize.height);

    [super layoutSubviews];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T12:41:53.130

当前[投票的答案](https://stackoverflow.com/a/13163753/814730)与您将组件拉下的事实不符（正如 Anthony Dmitriyev 指出的那样），偏移量不正确。最后一部分是修复它。

无论哪种方式：`UIRefreshControl`使用以下方法子类化：

```
- (void)layoutSubviews
{
    UIScrollView* parentScrollView = (UIScrollView*)[self superview];
    CGFloat extraOffset = parentScrollView.contentInset.top;

    CGSize viewSize = parentScrollView.frame.size;

    if (parentScrollView.contentInset.top + parentScrollView.contentOffset.y == 0 && !self.refreshing) {
        self.hidden = YES;
    } else {
        self.hidden = NO;
    }

    CGFloat y = parentScrollView.contentOffset.y + parentScrollView.scrollIndicatorInsets.top + extraOffset;

    if(y > -60 && !self.isRefreshing){
        y = -60;
    }else if(self.isRefreshing && y <30)
    {
        y = y-60;
    }
    else if(self.isRefreshing && y >=30)
    {
        y = (y-30) -y;
    }

    self.frame = CGRectMake(0, y, viewSize.width, viewSize.height);

    [super layoutSubviews];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T03:01:34.330

`UIRefreshControl` always sits above the content in your `UITableView`. If you need to alter where the refreshControl is place, try altering the tableView's top `contentInset`. The `UIRefreshControl` takes that into account when determining where it should be positioned.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T03:23:18.953

尝试这个：

```
CGFloat offset = 44;
for (UIView *subview in [self subviews]) {
    if ([subview isKindOfClass:NSClassFromString(@"_UIRefreshControlDefaultContentView")]) {
        NSLog(@"Setting offset!");
        [subview setFrame:CGRectMake(subview.frame.origin.x, subview.frame.origin.y + offset, subview.frame.size.width, subview.frame.size.height)];
    }
} 
```

这会将 UIRefreshControll 向下移动 44 个点；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-07T22:24:20.120

我发现覆盖其他答案中的 layoutsubviews 不仅仅改变了框架，它们还改变了行为（控件开始随着内容向下滑动）。要更改框架而不是我这样做的行为：

```
- (void)layoutSubviews {
    [super layoutSubviews];

    CGRect frame = self.frame;
    CGFloat desiredYOffset = 50.0f;
    self.frame = CGRectMake(frame.origin.x, frame.origin.y + desiredYOffset, frame.size.width, frame.size.height); 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-31T02:45:52.950

这非常顺利，但它是一个超级 hacky 的解决方案：

```
class CustomUIRefreshControl: UIRefreshControl {

    override func layoutSubviews() {
        let offset = UIApplication.shared.windows[0].safeAreaInsets.top
        frame = CGRect(
            x: frame.origin.x,
            y: frame.origin.y + offset/2.5,
            width: frame.size.width,
            height: frame.size.height
        )

        let attribute = [
            NSAttributedString.Key.font: UIFont(name: "Chalkduster", size: offset/2)!,
            NSAttributedString.Key.foregroundColor: UIColor.clear
        ]
        attributedTitle = NSAttributedString(string: "Hack", attributes: attribute)

        super.layoutSubviews()
    }
} 
```

# xml - 带有 XQJ 和 eXist 的 SAXParseException

> ID：12913214
> 
> 赞同：0
> 
> 时间：2012-10-16T11:00:28.377
> 
> 标签：xml, xquery, exist-db

我对 XQJ API 和 eXist 有疑问。每当我尝试在 eXist db 中查询我的文件时，我都会得到一个

```
XQJTO013 - org.xml.sax.SAXParseException; lineNumber: 928; columnNumber: 354; The reference to entity "quotDer" must end with the ';' delimiter. 
```

以及整个文档中的其他几个分隔符异常，无论何时`&quot;`使用（`&amp;`顺便说一句，不会引发错误）。

然而文件里面的“;” 设置在后面`&quot`，当我使用 eXist GUI 查询对话框查询文件时，它可以工作。当我通过 baseX db 中的 XQJ API 查询文件时也没有问题。

我试图将 SAX 解析器从 Saxon 更改为 Xerces，最后到 Oracle，每个都引发了错误。

我的问题是，XQJ eXist 实现中是否存在错误或者我遗漏了什么，希望您能帮助我。

我的类路径上有exist-xqj-api-1.0.1 的库。

* * *

这里有一些简单复制的代码

```
public static void main(String[] args) {

    XQDataSource xqs = new ExistXQDataSource();

    try {
        xqs.setProperty("serverName", "localhost");

        xqs.setProperty("port", "8080");
        XQConnection conn = xqs.getConnection("admin", "admin");

        XQPreparedExpression xqpe = conn.prepareExpression("element test {'&quot;bla&quot;'}"); 

        XQResultSequence rs = xqpe.executeQuery();
        rs.writeSequence(System.out, new Properties()); // SAXParseException is raised here

        conn.close();   

    } catch (XQException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:02:29.637

你能创建一个可以复制的小而孤立的例子吗？

例如，提交一个生成 XML 的小型 XQuery，然后导致此错误。文档可能不一定需要存在于数据库中。

如果您能够做到这一点，请在 XQJ.NET 问题跟踪器 [1] 上将其作为问题提出。

问候，

查尔斯

[1] [http://xqj.net/issues/](http://xqj.net/issues/)

# eclipse - Eclipse 和 Maven 通过命令行

> ID：12913218
> 
> 赞同：3
> 
> 时间：2012-10-16T11:00:33.707
> 
> 标签：eclipse, maven, maven-archetype

我可以通过跳过包含文件夹（**编辑 2**以及其他文件夹）的原型选择在 Eclipse IDE（版本 3.71）中创建一个简单的 Maven 应用程序：

```
src/main/resources
src/test/resources 
```

如果我使用命令行，这些文件夹会丢失。我一直在使用 Maven 指南使用[Maven 站点上指定的命令行为我的 Eclipse IDE 创建一个 Maven 项目](http://maven.apache.org/guides/mini/guide-ide-eclipse.html)

```
mvn archetype:generate -DgroupId=guide.ide.eclipse -DartifactId=guide-ide-eclipse 
```

如何通过命令行模仿 Eclipse 的行为？我试图找到正确的 archetypeID 并添加参数但没有成功。

**编辑1**

生成的 maven 项目包含在 git 存储库中，因此我可以按照[此问题中的详细说明导入项目](https://stackoverflow.com/questions/4869815/importing-a-maven-project-into-eclipse-from-git/7269917#comment15380158_7269917)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T11:17:06.160

长期以来，Maven 的 Eclipse 插件就发现了这种不一致问题。如果您使用 Eclipse IDE 执行 Maven 命令，它将无法完全按照 Maven 使用命令行的方式工作。所以大多数开发人员所做的是，从命令行运行 maven 命令，然后执行

`mvn eclipse:eclipse`

更新eclipse项目。之后，您返回 Eclipse IDE 并刷新您的项目。然后您的项目将根据通过命令行完成的更改进行更新。

还建议使用以下配置更新您的 pom.xml：

```
<plugin>
    <version>2.9</version>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <configuration>
        <wtpversion>2.0</wtpversion>
    </configuration>
</plugin> 
```

# pdf - 阻止 PDF 文件保存在浏览器中

> ID：12913219
> 
> 赞同：1
> 
> 时间：2012-10-16T11:00:36.710
> 
> 标签：pdf, pdf-generation

我想在我的网站上以 PDF 文件的形式显示一些信息。但我不希望用户在他的系统上下载或保存该 PDF 文件。我们可以避免保存 PDF 吗？

# java - Axis2 频繁的连接重置

> ID：12913225
> 
> 赞同：2
> 
> 时间：2012-10-16T11:00:49.157
> 
> 标签：java, axis, apache-httpclient-4.x, connection-reset

情况是这样的：

我使用 Axis2 1.6.2 并为 2 个 Web 服务生成了存根（使用***wsdl2java*** **）——我们称它们为WS#1**和**WS#2**。

我通过实现扩展 BasePoolableObjectFactory (org.apache.commons.pool.BasePoolableObjectFactory) 的 StubPoolableFactory 为存根使用池机制

为了实现这一点，存根由作为单例的适配器“包装”。适配器的骨架如下所示：

```
/** The Adapter class */
public class PdfServiceAdapter extends PoolableStubAdapter<PdfServiceStub> {

    /** The Singleton. */
private static PdfServiceAdapter pdfServiceAdapter;

/**
 * Gets the PdfService adapter instance.
 * 
 * @return the PdfService adapter
 */
public synchronized static PdfServiceAdapter getPdfServiceAdapter() {
    if (null == pdfServiceAdapter) {
        pdfServiceAdapter = new PdfServiceAdapter();
        pdfServiceAdapter.initiateStubPool();
    }
    return pdfServiceAdapter;
}

public void doSomething() throws AdapterException {

    try {
        stub = getStub();
    } catch (final Exception e) {
        throw new AdapterPreparationException(e);
    }
    try {

        //call some actual Stub method here...

    } catch (final Exception e) {
        stopWatch.stop("PdfService.doSomething.FAILURE");
        throw new AdapterExecutionException(e);
    } finally {
        final ServiceClient client = stub._getServiceClient();
        if (client != null) {
            try {
                client.cleanupTransport();
                client.cleanup();
            } catch (final AxisFault e) {
                log.warn("Something went wrong while cleaning up service client: ", e);
            }
        }
        releaseStub(stub);
    }
}

@Override
protected int getMaxActive() {
    return Integer.parseInt(ESignatureConfig.getInstance().getConfig().getString(
        "AXIS_STUB_POOL_EREQUEST_COMMUNICATION_MAX_ACTIVE"));
}

@Override
protected boolean getLifo() {
    return Boolean.parseBoolean(ESignatureConfig.getInstance().getConfig().getString(
        "AXIS_STUB_POOL_EREQUEST_COMMUNICATION_LIFO_FLAG"));
}

@Override
protected int getMaxIdle() {
    return Integer.parseInt(ESignatureConfig.getInstance().getConfig().getString(
        "AXIS_STUB_POOL_EREQUEST_COMMUNICATION_MAX_IDLE"));
}

@Override
protected long getMaxWait() {
    return Integer.parseInt(ESignatureConfig.getInstance().getConfig().getString(
        "AXIS_STUB_POOL_EREQUEST_COMMUNICATION_MAX_WAIT"));
}

@Override
protected String getEndPointURL() {
    return ESignatureConfig.getInstance().getConfig().getString("PDF_SERVICE_ENDPONT");
}
@Override
protected Stub getInstance() throws Exception {
    return new PdfServiceStub(AxisConfigurationContextFactory.getInstance().getConfigurationContext());
} 
```

}

正如您在请求存根实例时所看到的，**轴配置**被传递给存根。**这个 Axis 配置是从工厂返回的，它是一个单例，并且基于 MultiThreadedHttpConnectionManager 和缓存的 HTTP 客户端**。

现在，问题出在哪里：

*   有时并且通常在调用 Web 服务很长时间之后，如果我们调用**WS#1**并且在**WS#2**之后，调用 WS#2 时会出现**Connection Reset 错误**。如果在此连接重置后，我们再次调用 WS#1 和 WS#2，那么没问题。
*   此外，我们在对应用程序进行压力测试时也没有问题。只有当我们让它空闲并且只有当调用“back 2 back” **WS#1**和 **WS#2** ***时，连接重置才会发生在 WS#2 调用上***。

您认为这与我的实施有关吗？也许单例轴配置或某些情况下缓存的 HTTP 客户端负责此重置？

# user-interface - Netbeans 在编辑器模式下分隔 TopComponent 忽略最小大小

> ID：12913229
> 
> 赞同：2
> 
> 时间：2012-10-16T11:01:02.823
> 
> 标签：user-interface, netbeans, netbeans-platform

在我的 Netbeans 7.11 应用程序中，我在编辑器模式下有一个额外的单独顶部组件，它不遵守我使用 GUI-builder 指定的最小大小。

选中品牌的“窗口系统”选项卡中的“调整窗口大小时尊重最小大小”选项。

我的 .wsmode 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mode PUBLIC
        "-//NetBeans//DTD Mode Properties 2.0//EN"
       "http://www.netbeans.org/dtds/mode-properties2_0.dtd">
<mode version="2.0">
    <name unique="myTopComponent" />
    <kind type="view" />
    <state type="separated" />
    <constraints>
        <path orientation="horizontal" number="0" weight="1" />
        <path orientation="vertical" number="0" weight="1" />
    </constraints>
    <bounds x="150" y="150" width="1200" height="670" />
    <frame state="0"/>
    <empty-behavior permanent="true" />
</mode> 
```

我做错了什么或我错过了什么？

# svn - TortoiseSVN：如何忽略提交中的 bin 内容

> ID：12913232
> 
> 赞同：18
> 
> 时间：2012-10-16T11:01:08.107
> 
> 标签：svn, version-control, tortoisesvn, svnignore

我使用 TortoiseSVN 1.7.9。

我如何在项目文件夹中*忽略*/*删除*`/bin`文件夹中的内容？`svn commit`我不想提交诸如`.dll`,`.pdb`等文件。

我在**svn:ignore**`.dll` `.pdb`属性中输入了条目，但它不起作用，当我执行提交时，这些文件仍然显示在列表中。

 **我不使用命令行客户端。在 Windows 资源管理器中，我右键单击根项目文件夹，然后单击 TortoiseSVN 上下文菜单中的提交。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-16T11:41:33.593

您可以在[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-howto-unversion.html)和[SVNBook](http://svnbook.red-bean.com/en/1.8/svn.advanced.props.special.ignore.html)中找到答案。

TortoiseSVN 手册告诉我们：

> 如果文件已经在存储库中，则必须将它们从存储库中删除并添加到忽略列表中。幸运的是，TortoiseSVN 有一个方便的快捷方式来执行此操作。**TortoiseSVN → 取消版本并添加到忽略列表**将首先将文件/文件夹标记为从存储库中删除，保留本地副本。它还将这个项目添加到忽略列表中，这样它就不会被错误地再次添加回 Subversion。完成后，您只需要提交父文件夹。

请参阅 SVNBook 的重要说明；它解释了您的行为以及“为什么它不起作用”。

> Subversion 对可忽略文件模式的支持仅扩展到将未版本控制的文件和目录添加到版本控制的一次性过程。**一旦对象在 Subversion 的控制之下，忽略模式机制就不再适用于它**。换句话说，不要期望 Subversion 仅仅因为该文件的名称与忽略模式匹配而避免提交您对版本化文件所做的更改——Subversion 总是注意到它的所有版本化对象。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-23T21:27:26.993

忽略所有项目中的 bin、obj 和 .suo 文件和用户文件。只需将它们添加到配置文件中：

```
C:\Users\[USERNAME]\AppData\Roaming\Subversion\config ( in windows )
```

找到 global-ignores 部分并添加以下内容：

```
global-ignores = *.suo bin obj *.csproj.user
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T16:04:04.940

基本答案：不要将已编译的库和二进制文件存储在您的源存储库中。这是一个***源代码***库！

你不能忽略 Subversion 控制下的东西，并且构建的项目不应该首先存储在 Subversion 中。删除它们，然后设置 a`svn:ignore`在它们构建时忽略这些目录。这样，没有人会意外地重新提交这些构建的二进制文件。

如果您想存储二进制文件和库以供以后使用，请为此使用发布存储库。事实上，您甚至可以设置它，以便您的构建将自动从其他项目下载他们可能需要的 .dll。发布存储库可以像存储这些文件的另一个系统上的目录一样简单（并且可以复制到您的其他项目），或者像 Artifactory 或 Nexus 之类更复杂的东西（用于 Maven 和 Ivy 项目。我不认为 VS 和 C/C++ 项目有类似的东西）。

或者，您可以使用[Jenkins](http://jenkins-ci.org)进行构建，并将这些项目作为构建工件存储在 Jenkins 作业中。当有人需要它们时，他们可以通过 Jenkins 下载它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-08T07:19:26.473

您可以忽略全局级别的目录和文件。但是，您可以使用设置对话框，而不是破解配置文件，如 Calciol 的回答中所述：

[![在此处输入图像描述](../Images/e581df6f283a812b0642e7ecd8e9544e.png)](https://i.stack.imgur.com/P3HxY.png)

要启动设置对话框：

*   开始菜单：TortoiseSVN ==> 设置。
*   在资源管理器中单击鼠标右键以调出上下文菜单。TortoiseSVN ==> 设置。

更改在应用后立即生效。**

# asp.net-mvc - DisplayFor 忽略 html 属性的原因是什么？

> ID：12913234
> 
> 赞同：7
> 
> 时间：2012-10-16T11:01:09.577
> 
> 标签：asp.net-mvc, razor

尝试使用此功能时

```
@Html.DisplayFor(m => m.someField, new { htmlAttributes = "class = someclass" }) 
```

该字段在呈现时不包含类 someclass。我想它是因为它只是写出文本并且没有跨度元素或任何设置类的东西。

我真的很想设置 id 以便以后可以通过 js 更新它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T15:55:45.470

班级必须是`@class`

此评论有效

> DisplayFor()，没有任何 HTML 属性，因此你不能这样做。相反，还有其他方法可以使用 ur 类在 DIV/SPAN 中呈现数据.. – Nick 10 月 16 日 11:15

这个评论也是有效的

> 我认为应该是 @Html.DisplayFor(m => m.someField, new {@class="someClass"}) – Michel 10 月 16 日 11:30

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T12:21:02.153

该解决方案对我有用（例如，当模型为 Url 时）： [Razor view to DisplayFor DataType.Url that opens in new window](https://stackoverflow.com/questions/16648127/razor-view-to-displayfor-datatype-url-that-opens-in-new-window)

“您可以通过在...中添加文件来覆盖默认模板”

# css-selectors - 如何使用 webdriver 检查页面上的所有复选框？

> ID：12913235
> 
> 赞同：1
> 
> 时间：2012-10-16T11:01:10.950
> 
> 标签：css-selectors, webdriver, selenium-webdriver

我想选中/取消选中页面中存在的所有复选框。代码片段如下：-

```
@Test
public void checkBoxAll() {

    List<WebElement> checkBoxList=driver.findElements(By.cssSelector("input [type='checkbox']"));
    for(WebElement checkBox:checkBoxList)
    {
        checkBox.click();   
    }
    List<WebElement> unCheckedBoxList=driver.findElements(By.cssSelector("input:not(:checked)[type='checkbox']"));
    if(!CollectionUtils.isEmpty(unCheckedBoxList))
        Assert.fail();

} 
```

首先，我使用**("input [type='checkbox']")**找出所有复选框。然后在循环中单击它们，然后找到所有已选中的复选框（要成功执行测试用例，应该没有）。我尝试了谷歌的一些方法，但对我不起作用。请告诉我作为新手我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:09:59.150

不知道我之前在做什么或上面提出的解决方案有什么问题，但两者都没有工作。我尝试了不同的东西，下面是工作解决方案。***id='first'***是放置所有复选框的 div 的 id。

```
@Test
public void CheckBoxAll() {
    String cssSelectorForNotCheck=("[id='first'] input[type='checkbox']:not(:checked)");
    List<WebElement> checkBoxList=driver.findElements(By.cssSelector(cssSelectorForNotCheck));
    for(WebElement checkBox:checkBoxList)
    {
        checkBox.click(); 

    }
    checkBoxList=driver.findElements(By.cssSelector(cssSelectorForNotCheck));
    if(!checkBoxList.isEmpty()) {
        Assert.fail();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:11:57.683

一个解决方案是：

```
// Find all checked checkboxes with xpath
List<WebElement> checkBoxList=driver.findElements(By.xpath("//input[@type='checkbox' and @checked='checked']"));
        for(WebElement checkBox:checkBoxList)
        {
            checkBox.click(); 
        }

// Assert if any checkbox left checked
List<WebElement> allCheckedBoxList=driver.findElements(By.xpath("//input[@type='checkbox' and @checked='checked']"));
    if(!allCheckedBoxList.isEmpty()) {
        Assert.fail();
    } 
```

**更新** 如果您需要查找未选中的复选框，请改用以下 xpath：

```
//input[@type='checkbox' and not(@checked='checked')] 
```

# typescript - 无法从 TypeScript 中的文件加载类

> ID：12913238
> 
> 赞同：5
> 
> 时间：2012-10-16T11:01:15.297
> 
> 标签：typescript

我有一个看起来像这样的类：

```
export module GameModule {
    export class Game {
        private boardContainer: HTMLElement;
        private board: number[][];

        constructor (container: HTMLDivElement) {
            this.boardContainer = container;
            this.board = [[0, 0, 0], [0, 0, 0], [0, 0, 0]];

            this.drawGrid();
        }

        drawGrid() {

        }
    }
} 
```

和主要应用：

```
import GameModule = module("./GameModule");

window.onload = () => {
    new GameModule.GameModule.Game(<HTMLDivElement> document.getElementById('content'));
}; 
```

但是当我尝试编译代码时，我遇到了错误：

```
>tsc --module amd app.tss
app.tss(1, 27): The name '"./GameModule"' does not exist in the current scope
app.tss(1, 27): A module cannot be aliased to a non-module type
app.tss(4, 8): Expected car, class, interface, or module 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T11:44:07.873

你的代码对我来说编译得很好。这是我所拥有的：

**游戏模块.ts**

```
export module GameModule {
    export class Game {
        private boardContainer: HTMLElement;
        private board: number[][];

        constructor (container: HTMLDivElement) {
            this.boardContainer = container;
            this.board = [[0, 0, 0], [0, 0, 0], [0, 0, 0]];

            this.drawGrid();
        }

        drawGrid() {

        }
    }
} 
```

**Main.ts**

```
import GameModule = module("./GameModule");

window.onload = () => {
    new GameModule.GameModule.Game(<HTMLDivElement> document.getElementById('content'));
}; 
```

两者都在同一个目录中。当我编译它时

```
tsc --module amd Main.ts 
```

编译器报告没有问题。你能检查一下你是否可以准确地编译这两个类吗？另外，请发布您的完整代码（如果可能）。从错误消息中，我假设您的模块位于另一个目录中。

# sql-server - 分布式系统：sql server broker实现

> ID：12913245
> 
> 赞同：1
> 
> 时间：2012-10-16T11:01:36.017
> 
> 标签：sql-server, tsql

我有一个由 8 个服务器组成的分布式应用程序，所有服务器都运行 .NET windows 服务。每个服务都会轮询数据库中可用的工作包。

由于其他原因，轮询机制很重要（现在太无聊了）。

我认为这种轮询机制最好在队列中实现，因为 .NET 服务都将定期轮询数据库，并且在负载下我不想要死锁。

我想我希望每个 .NET 服务都将消息放入输入队列。数据库服务器将一次弹出输入队列中的每条消息，对其进行处理，然后将回复消息放在另一个队列中。

我遇到的问题是 SQL Server Broker (SSB) 的大多数示例都在数据库服务之间，而不是从 .NET 客户端启动。我想知道 SQL Server Broker 是否只是这项工作的错误工具。我看到代理 T-SQL DML 可从 .NET 获得，但我认为这应该工作的方式似乎不适合 SSB。

我认为我需要一个带有 2 个队列（进出）和一个激活存储过程的单一 SSB 服务。

这似乎不是 SSB 的工作方式，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:28:04.240

您得到的图片非常正确，但是该图片中缺少一些拼图：

*   SSB 主要是一种通信技术，旨在以完全事务的方式通过网络传递具有完全一次性语义 (EOIO) 的消息。它处理网络连接（身份验证、流量机密性和完整性）以及传输的确认和重试逻辑。
*   [内部激活](http://msdn.microsoft.com/en-us/library/ms171617%28v=sql.105%29.aspx)是一项独特的技术，因为它消除了驻留服务轮询队列的要求。轮询永远无法达到轻负载下低延迟*和*低资源消耗所需的动态平衡。轮询迫使高延迟（不频繁轮询以节省资源）或高资源利用率（需要频繁轮询以提供低延迟）。内部激活还具有自我调整能力，可以增加更多处理器以应对负载峰值（通过`max_queue_readers`) 同时仍然能够通过停用处理器来调低低负载下的处理。内部激活机制经常被忽视的优点之一是它完全包含在数据库中，即。它通过集群或数据库镜像故障转移进行故障转移，并在备份和复制附加操作中与数据库一起移动。还有一个[外部激活](http://blogs.msdn.com/b/sql_service_broker/archive/2009/05/18/get-started-with-using-external-activator.aspx)机制，但总的来说，对于任何适合内部上下文的东西，我更喜欢内部激活机制（例如，*不是*和 HTTP 请求，必须在引擎进程之外处理......）
*   [对话组锁定](http://msdn.microsoft.com/en-us/library/ms171615%28v=sql.105%29.aspx)同样是独一无二的，它是一种提供对相关消息处理的独占访问的方法。应用程序可以利用`conversation_group_id`作为业务逻辑键的优势，这几乎完全消除了死锁，即使在繁重的多线程下也是如此。

还有一个关于 Service Broker 的问题你弄错了：需要将响应放入单独的队列中。与您可能熟悉的大多数排队产品不同，SSB 原语不是消息，而是“对话”。会话是一个全双工的双向通信通道，你可以把它想象成一个 TCP 套接字。SSB 服务不需要“将响应放入队列”，而是可以简单地在接收到的消息的会话句柄上发送响应（很像在 TCP 套接字服务器中通过`send`在*同一个*套接字上发出 a 来响应）获取请求，而不是通过打开新套接字并发送响应）。此外，SSB 将处理固有的*消息相关性*这样发送方将确切地知道响应属于它发送的*哪个*请求，因为响应将在发送请求的同一会话句柄上返回（很像在 TCP 套接字情况下，客户端在它发送请求的同一个套接字）。当涉及到相关对话组的关联锁定时，此对话句柄再次很重要，请参见上面的链接。

您可以通过 SQLCLR 将 .Net 逻辑嵌入到 Service Broker 处理中。几乎所有 SSB 应用程序至少在一端直接或间接地（例如通过触发器）具有非 SSB 服务，完全包含在数据库中的分布式应用程序几乎没有用处。

# javascript - javascript代码的奇怪问题

> ID：12913247
> 
> 赞同：1
> 
> 时间：2012-10-16T11:01:36.753
> 
> 标签：javascript, jquery, encoding

我有一个简单的代码：

```
$(document).ready(function(){
    $(".button").click(function(){
        var f = $(this).closest('form');
        if(f != null){
            $(f).append('<div class="loadmask"></div>');                        
        }
    });
}); 
```

如您所见，我想将一个带有“loadmask”类的 div 附加到父表单。这里奇怪的东西`$(f).append('<div class="loadmask"></div>');`已经被编码 `$(f).append("<div class="loadmask"></div>&#34;);`并引发了一个javascript错误。

**更新：**

我已将代码更改为

```
$(document).ready(function(){           
            $(".button").click(function(){
                $(this).parent('form').append("<div class='loadmask'></div>");
            });
         }); 
```

仍然得到javascript错误：

```
SyntaxError: missing ) after argument list
[Break On This Error]   

$(this).parent('form').append("<div class="loadmask"></div>&#34;); 
```

并在 Eclipse 控制台：

```
00:57:17,593 ERROR [MinifierUtil:108] 22: 65: missing ) after argument list
00:57:17,593 ERROR [MinifierUtil:108] 22: 79: unterminated string literal
00:57:17,593 ERROR [MinifierUtil:108] 1: 0: Compilation produced 2 syntax errors.
00:57:17,593 ERROR [MinifierUtil:74] JavaScript Minifier failed for  

         $(document).ready(function(){          
            $(".button").click(function(){
                $(this).parent('form').append("<div class="loadmask"></div>&#34;);
            });
         }); 
```

我使用 eclipse Juno（使用 UTF-8 编码项目）、liferay 6.1 ga-1 和 jsf-2.0、icefaces-3 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:05:22.000

我无法重现您的问题。我怀疑由于某种原因，在您的 JavaScript 文件中编码了一个附加字符，该字符`&#34;`由 jQuery 表示。`&#34`恰好是[引号](http://www.w3schools.com/tags/ref_entities.asp)( `"`) 的实体，因此请确保您的代码中没有将其作为额外内容。尝试清理您的 JavaScript 源文件，然后重试。

另请注意，`closest`永远不会返回`null`。如果`form`未找到元素，则返回一个空列表（这可以通过在无格式页面上运行代码来轻松验证）。因此，您可以安全地编写代码，如下所示：

```
$(document).ready(function(){
    $(".button").click(function(){
        $(this).closest('form').append('<div class="loadmask"></div>');
    });
}); 
```

请参阅此小提琴以获得证明：http: [//jsfiddle.net/p48Rb/3/](http://jsfiddle.net/p48Rb/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:06:15.033

尝试使用`if (f.length)`，因为`$(this).closest('form')`返回一个长度 > 0（表单是第一个元素）或不（长度 0 计算为`falsy`）的 jQuery 对象。换句话说，`f`从不`null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T03:12:10.270

我真的不知道为什么，但似乎我的 xhtml (jsf2.0) 无法解码脚本代码中的 html char。

（&& 运算符上的 & 符号将引发相同的错误）

只是改变

`$(this).parent('form').append("<div class="loadmask"></div>");`到`$(this).parent('form').append("div").addClass("loadmask");`

和 &，使用子 if 语句而不是 && 将解决它的问题。

# asp.net-mvc - 处理大数据案例的一些方法

> ID：12913249
> 
> 赞同：0
> 
> 时间：2012-10-16T11:01:52.507
> 
> 标签：asp.net-mvc, database, performance, design-patterns, architecture

在我工作的公司，我们在加载数据库数据时遇到了一些性能问题。我们的 ERP 使用大型数据库，我们需要进行一些复杂的查询。我们按照 DDD 模式使用 C#，在前端我们使用 ASP.NET MVC。

我正在谈论的示例是：我们在系统中有很多列表（网格），其中数据由 ajax 加载。但是每次用户进入这样的页面（一个html页面）时，我们都需要在数据库中进行查询。

重要的是要说这些数据不仅用于“查询”。用户不断更改此数据。

我的疑问是您是否对我们如何将这个问题最小化有任何建议。我已经在服务器端搜索了一些缓存解决方案，但是我没有在高度复杂的场景中使用缓存的经验。

非常感谢，Renan Cunha。

# c++ - 从 C++ 解析 Python 代码

> ID：12913250
> 
> 赞同：0
> 
> 时间：2012-10-16T11:01:57.117
> 
> 标签：c++, python, parsing

我可以在背面找到大量信息，而不是这样:)

所以，总结是我想用 C++ 写一些 Python 代码完成的东西，但我想不出标记 Python 代码的最佳方法。

有没有图书馆可以做到这一点？

我倾向于直接从 C++ 调用 Python 的 tokenize.tokenize ......但是每当我看到从 C++ 调用 Python 代码时，我都会眼花缭乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:06:28.730

使用常规解析器生成器从语法生成解析器通常对 Python 来说是复杂的（例如，由于其重要的空格和困难的行继续规则）。

我不确定您使用 Python 的经验，但我的建议是从 Python 解析 Python 文件，并在 Python 中进行尽可能多的处理，然后使用明确定义的数据类型将结果返回给 C++ 代码（例如 stdc++ 的）并使用 Boost.python 进行绑定。

# php - fgetcsv 行尾

> ID：12913256
> 
> 赞同：1
> 
> 时间：2012-10-16T11:02:11.170
> 
> 标签：php, fgetcsv

嗨，我有一个 fgetcsv 函数，它读取 CSV 文件并将数据导出到列表中。这行得通，我已经在其他地方多次使用过这个功能，没有任何问题。

代码的相关位是：

```
ini_set("auto_detect_line_endings", true);

$file = fopen($_FILES['filename']['tmp_name'],"r");

while (($data = fgetcsv($file, 1000, ",")) !== FALSE)
   {
   $body_data['user_list'][] = $data;
   }

fclose($file); 
```

问题是读取的 CSV 会在列数据中单词之间的任何空格（空白）处停止。

我认为这`auto_detect_line_endings`会解决这个问题，难道这是造成问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:08:54.770

Change your while loop with this

```
while (!feof($file) ) {
        $body_data['user_list'][] = fgetcsv($file, 1024);
    } 
```

# django - Django 仅使用 ForeignKey 中的某些字段

> ID：12913259
> 
> 赞同：0
> 
> 时间：2012-10-16T11:02:16.847
> 
> 标签：django, django-models, django-admin

我有三个班

```
 Class Company(models.Model):
     name     = CharField( max_length = 26 , blank = True)
     #(...)

 class Person(models.Model):
     name     = CharField( max_length = 26 , blank = True)
     function = CharField( max_length = 50 , blank = True)
     company  = ForeignKey ( Company , related_name = 'persons' )
     # All the company table inside the data base is loaded in order to make the query,
     # This make a HUGE amount of data and takes too many time...
     # (...)
     def __unicode__(self):
          # caption uses both name and company__name fields but no other fields
          return self.name + '(' + self.company.name + ')'

 class Contact(models.Model):
      person  =  ForeignKey ( Person ) 
```

为了优化性能，我想使用最新的 person 字段

```
Person.objects.all().only('name', 'company__name') 
```

作为查询集。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:18:18.917

您可以使用 values 方法，该方法返回一个名为 ValuesQuerySet 的 QuerySet 子类。

```
Person.objects.all().values('name', 'company__name') 
```

有关更多信息[Django 文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:36:49.353

使用代理模型：

```
 class Person_short_manager(Manager):
    def get_query_set(self):
        return super(self, Person_short_manager).get_query_set().only('name','company__name')

 class Person_short(Person):
    objects = Person_short_manager(Manager)
    class Meta:
         proxy = True 
```

然后替换

```
 person  =  ForeignKey ( Person ) 
```

经过

```
 person  =  ForeignKey ( Person_short ) 
```

# java - 为什么 Java 方法需要返回类型

> ID：12913260
> 
> 赞同：0
> 
> 时间：2012-10-16T11:02:20.107
> 
> 标签：java, oop, methods, return-type

抱歉，如果这是一个相当愚蠢的问题，但我最近一直在尝试学习 Java，发现很难接受返回类型的概念——我似乎无法为他们找到任何正义。然而，这里有一些关于它们如何偏离原始 int 返回类型从而扩大方法/函数可以返回的内容。但是，我仍然不太明白为什么：这有功能上的原因吗？即，如果某行代码定义了某些东西的返回，为什么解释器不能简单地返回一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:05:25.080

我猜你隐含的问题是“为什么 Java 没有类型推断”，因为 Java 显然是一种静态类型的语言，因此返回类型必须在编译时明确知道。

对于这个问题的答案，您可以调查 Scala 的类型推断：它真的非常复杂且混乱，最终结果仍然不稳定。Java 采用了简单的方法：**没有类型推断**。这也符合 Java 成为“蓝领语言”的既定设计目标：显式类型对低技能开发人员来说更加明显和容易。

作为记录，我注意到您提到了“Java 解释器”，这表明您将 Java 误认为是一种动态的解释语言。Java是一种编译语言。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T11:04:31.703

一方面，Java 是静态类型的，因此在不知道返回类型的情况下，您无法将函数的响应分配给变量。

它还在一定程度上自我记录了该功能。

对于很多功能，`null`也可以返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T11:05:04.747

是一种设计选择，可以在编译时而不是运行时捕获更多错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T11:06:49.477

返回类型有助于加强[类型安全](http://en.wikipedia.org/wiki/Type_safety)。

# eclipse - eclipse vs tomcat部署-项目在eclipse中运行时导出的战争（部分）失败

> ID：12913264
> 
> 赞同：3
> 
> 时间：2012-10-16T11:02:40.087
> 
> 标签：eclipse, jakarta-ee, tomcat, unicode, servlet-3.0

我在 eclipse juno 中有一个 webapp——当我*在服务器上*运行时运行良好——在 eclipse 的浏览器中（我在 Windows 上）或在 FF 中。

右键单击 >**导出战争**> 将其转储到 $CATALINA_HOME/webapps > 一切正常（解压好了）***除了***

*   我的自定义标签 - 我有一个`WEB-INF\functions.tld`显然没有被读取的文件。`server.xml`自动生成的 Eclipse （在`Servers`项目中）和默认 Tomcat之间的唯一区别`server.xml`是以下行：

    ```
    <Context docBase="ted2012" path="/ted2012" 
    reloadable="true"source="org.eclipse.jst.jee.server:ted2012"/> 
    ```

`source`是 WTP 特定的属性。
*我设法解决了这个问题*- 请参阅我的[答案](https://stackoverflow.com/a/12956256/281545)

*   Tomcat 无法正确获取 Url - 请参阅我的[答案](https://stackoverflow.com/a/12956256/281545)中的图片。

问题 ：

1.  （未解决）为什么 Tomcat 不能正确解码 Url -**而 eclipse 可以**？失败在哪里？请参阅我的具体[问题以](https://stackoverflow.com/questions/14914983/webapp-behaves-as-expected-when-run-from-eclipse-while-when-exported-as-war-fail)获取有关调用堆栈的详细信息以及tomcat失败的确切位置
2.  为什么tomcat首先没有看到tld而eclipse看到了？为什么我必须编辑`web.xml`？（在我的回答中解决了，应该是另一个问题）

代码在[github](https://github.com/Utumno/ted2012)中 - 在 INSTRUCTIONS.txt 文件中，有详细的说明来设置项目并重现我在下面的答案中描绘的错误。

Tomcat 7.0.32、日食 4.2、Java 1.7.9

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T14:41:00.337

要正确解码 URI，您需要 Tomcat 中的 URIEncoding 连接器属性：

```
<connector ... URIEncoding="UTF-8" ... /> 
```

见我的咆哮[https://stackoverflow.com/a/15587140/995876](https://stackoverflow.com/a/15587140/995876)

所以它不附带普通代码，您需要在应用程序服务器配置中单独使用它或使用默认为 UTF-8 的应用程序服务器。不幸的是，没有办法从代码中影响这一点。

删除`decodeRequest`and never use `new String/getBytes`without explicit encoding 参数。

* * *

选择。

如果您无法编辑服务器连接器配置，您可以通过明确提供编码来修复您的代码`new String`：

```
public static String decodeRequest(String parameter) {
     return new String(parameter.getBytes("iso-8859-1"), "UTF-8");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:49:23.920

有帮助的一件事是添加到`web-xml`：

```
<jsp-config>
    <taglib>
        <taglib-uri>
            functions
        </taglib-uri>
        <taglib-location>
            functions.tld
        </taglib-location>
    </taglib>
</jsp-config> 
```

现在 tomcat (7.0.30) 看到我的 taglib 用于编码 URI。

* * *

奇怪的事情：当我用系统打印用户名时，我得到了？？？？在tomcat的控制台而不是象形文字中。也许这指向了问题？在我的控制器中，我有：

```
final String username = Helpers.decodeRequest(request
                .getParameter("user"));
System.out.println("ProfileController.doGet() user name DECODED : "
                                + username); 
```

在哪里 ：

```
private static final String CHARSET_FOR_URL_ENCODING = "UTF-8";

public static String decodeRequest(String parameter)
        throws UnsupportedEncodingException {
    System.out.println(Charset.defaultCharset()); // EDIT: suggested by @Esailija
    if (parameter == null)
        return null;
    System.out.println("decode - request.getBytes(\"iso-8859-1\"):"
            + new String(parameter.getBytes("iso-8859-1")));
    System.out.println("decode - request.getBytes(\"iso-8859-1\") BYTES:"
            + parameter.getBytes("iso-8859-1"));
    for (byte iterable_element : parameter.getBytes("iso-8859-1")) {
        System.out.println(iterable_element);
    }
    System.out.println("decode - request.getBytes(\"UTF-8\"):"
            + new String(parameter.getBytes(CHARSET_FOR_URL_ENCODING))); // UTF-8
    return URLDecoder.decode(new String(parameter.getBytes("iso-8859-1")),
            CHARSET_FOR_URL_ENCODING);
} 
```

所以Tomcat：

```
windows-1252 // EDIT: suggested by @Esailija
decode - request.getBytes("iso-8859-1"):╬╡╬╗╬╗╬╖╬╜╬▒╧?╬▒
decode - request.getBytes("iso-8859-1") BYTES:[B@d171825
-50
-75
-50
-69
-50
-69
-50
-73
-50
-67
-50
-79
-49
-127
-50
-79
decode - request.getBytes("UTF-8"):├Ä┬╡├Ä┬╗├Ä┬╗├Ä┬╖├Ä┬╜├Ä┬▒├?┬?├Ä┬▒
ProfileController.doGet() user name DECODED : ╬╡╬╗╬╗╬╖╬╜╬▒╧?╬▒
???????? // user Dao System.out.println("ελληναρα");
com.mysql.jdbc.JDBC4PreparedStatement@67322bd9: SELECT * FROM users WHERE username='╬╡╬╗╬╗╬╖╬╜╬▒╧?╬▒'
ProfileController.doGet() user : null 
```

日食：

```
UTF-8 // EDIT: suggested by @Esailija
decode - request.getBytes("iso-8859-1"):ελληναρα
decode - request.getBytes("iso-8859-1") BYTES:[B@44c353ae
-50
-75
-50
-69
-50
-69
-50
-73
-50
-67
-50
-79
-49
-127
-50
-79
decode - request.getBytes("UTF-8"):ÎµÎ»Î»Î·Î½Î±ÏÎ±
ProfileController.doGet() user name DECODED : ελληναρα
ελληναρα // user Dao System.out.println("ελληναρα");
com.mysql.jdbc.JDBC4PreparedStatement@73aae7c6: SELECT * FROM users WHERE username='ελληναρα'
ProfileController.doGet() user : com.ted.domain.User@4b22015d 
```

编辑：如果我在首选项>工作区>文本文件编码中更改eclipse编码并设置默认值（Cp1252）

```
windows-1252
decode - request.getBytes("iso-8859-1"):Î»Î±Î»Î±ÎºÎ·Ï‚
decode - request.getBytes("iso-8859-1") BYTES:[B@5ef1946a
-50
// same bytes ....
decode - request.getBytes("UTF-8"):ÃŽÂ»ÃŽÂ±ÃŽÂ»ÃŽÂ±ÃŽÂºÃŽÂ·Ã?Â‚
ProfileController.doGet() user name DECODED : Î»Î±Î»Î±ÎºÎ·Ï‚
ÎµÎ»Î»Î·Î½Î±Ï?Î±
com.mysql.jdbc.JDBC4PreparedStatement@4646ebd8: SELECT * FROM users WHERE username='Î»Î±Î»Î±ÎºÎ·Ï‚'
ProfileController.doGet() user : null 
```

***并且 Eclipse 也失败了***

* * *

**注意：** Tomcat 确实在地址栏中打印了正确的 url

![在此处输入图像描述](../Images/5285e81a0ca57b07104dbaba1e83755c.png)

日食很好：

![在此处输入图像描述](../Images/7ee26795cd0cd9d3caecb68239551bef.png)

请注意，Firefox 会自动解码 Url（令我困惑）

# android - 资源泄漏：流永远不会关闭

> ID：12913265
> 
> 赞同：0
> 
> 时间：2012-10-16T11:02:54.180
> 
> 标签：android, warnings

在我的真实项目中重现问题的捷径。环境：Android SDK 1.16、Eclipse 4.2.0、Windows。创建默认 Android 应用程序并将以下代码添加到 MainActivity.java：

```
private void Save1(boolean externalStorage)
{
    String s = "12345";
    File file;
    FileOutputStream fos = null;

    if ( externalStorage )
    {
        try
        {
            file = new File(getExternalFilesDir(null), "log");
            fos = new FileOutputStream(file);                  // Resource leak: 'fos' is never closed
        }
        catch(FileNotFoundException e)
        {
            return;
        }
    }
    else
    {
        try
        {
            fos = openFileOutput("log", Context.MODE_PRIVATE);
        }
        catch(FileNotFoundException e)
        {
            return;
        }
    }

    try
    {
        fos.write(s.getBytes());
        fos.close();
    }
    catch(IOException e)
    {
        return;
    }
}

private void Save2(boolean externalStorage)
{
    String s = "12345";
    File file;
    FileOutputStream fos = null;

    try
    {
        file = new File(getExternalFilesDir(null), "log");
        fos = new FileOutputStream(file);                  // OK
    }
    catch(FileNotFoundException e)
    {
        return;
    }

    try
    {
        fos.write(s.getBytes());
        fos.close();
    }
    catch(IOException e)
    {
        return;
    }
} 
```

行进功能`fos = new FileOutputStream(file)`，`Save1`警告：`Resource leak: 'fos' is never closed`

函数中的同一行`Save2`：没有警告。

请不要发送未经测试的答案，问题并不像看起来那么简单。添加`fos.close()`到函数的不同部分并没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:27:10.343

如果我像这样在 if 块中的 try 中添加 finally 块，它也会消失：

```
if (externalStorage) {
            try {
                fos = new FileOutputStream(new File(getExternalFilesDir(null),
                        "log"));
            } catch (FileNotFoundException e) {
                return;
            } finally {
                try {
                    fos.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        } else {
            try {
                fos = openFileOutput("log", Context.MODE_PRIVATE);
            } catch (FileNotFoundException e) {
                return;
            }
        } 
```

越来越有趣了……

所以我的猜测是，如果你在 try 块中打开 Stream 并且 catch 块有一个 return 语句，那么应该有一个 finally 块来关闭流。

之类的。。

A 在 eclipse 的一个简单的 java 项目中尝试了相同的代码，但仍然收到警告。所以看起来与 lint 或 android 无关。它看起来像 eclipse 编译器问题。以下是代码，我不得不创建一个虚拟的 openFileOutput() 方法，因为它在 java 中不可用：

```
private void Save1(boolean externalStorage) {
    String s = "12345";
    FileOutputStream fos = null;

    if (externalStorage) {
        try {
            fos = new FileOutputStream(new File("c://", "log"));
        } catch (FileNotFoundException e) {
            return;
        }
    } else {
        try {
            fos = openFileOutput("log", -1);
        } catch (FileNotFoundException e) {
            return;
        }
    }

    try {
        fos.write(s.getBytes());
        fos.close();
    } catch (IOException e) {
        return;
    }
}

/**
 * @param string
 * @param i
 * @return
 */
private FileOutputStream openFileOutput(String string, int i)
        throws FileNotFoundException {
        return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:19:37.217

这不是答案，而是在此处添加以使 OP 和其他读者清楚，而不是发表评论。

我已经使用当前版本的平台工具链（2012 年 10 月 14 日修订版）在 IDEA 11.2 API 15 中对此进行了测试，并且没有 lint 警告、编译错误或运行时错误。我通过创建异常并将 useExternalStorage 设置为 true 和 false 来强制该方法通过每条路径。

我的猜测是这是您的工具链或可能是 Eclipse 中的 lint/compile 错误（尽管不太可能，Eclipse 本身是否会进行这样的检查？）。

[编辑]

只是一个想法，（我会测试，但我忘记了如何使用 Eclipse）但是 FileInputStream(file) 可能会抛出一个 SecurityException ，它会被抛出到调用堆栈中的某个位置。如果你抓住它会发生什么？

[编辑]

这是我得到的最接近的警告，完全不相关。我相信这个警告不是针对你的。

![IDEA 11.2、API 15、SDK 工具 rev 14 的屏幕截图](../Images/c6d5303c37ffc1c8a4de1a29256147a2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:14:09.673

如果是`Exception`，则`fos`不会关闭。将 a 添加`finally`到`try-catch`将解决此问题。

```
 try
    {
        fos = openFileOutput("log", Context.MODE_PRIVATE);
    }
    catch(FileNotFoundException e)
    {
        return;
    }
    //add this:
    finally {
        if (fos != null) {
            fos.close();
        }
    } 
```

# tfs-workitem - 如何在 WIQL 中返回 TFS 工作项字段？

> ID：12913266
> 
> 赞同：0
> 
> 时间：2012-10-16T11:02:54.347
> 
> 标签：tfs-workitem

我正在尝试从 TFS 查询工作项信息 - 特别是从 CMMI 风险模板。看起来无论我在 select 子句中放了什么，我实际上仍然需要在 Fields 集合中查找值。使用此查询：

```
WorkItemCollection queryResults = workItemStore.Query(@"
                                            SELECT [System.Id], 
                                                    [System.WorkItemType], 
                                                    [System.Title], 
                                                    [Microsoft.VSTS.Common.Severity],
                                                    [Microsoft.VSTS.CMMI.Probability]
                                            FROM WorkItems 
                                            WHERE [System.TeamProject] = 'MyProj' 
                                            and [System.WorkItemType] = 'Risk' 
                                            ORDER BY [System.Id] "); 
```

我看不见

```
 queryResults[0].Severity or
 queryResults[0].Probability 
```

在输出中，但我可以看到

```
queryResults[0].Fields["Severity"]; 
```

在这种情况下，选择列表似乎无关紧要。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:54:54.430

仅为少数字段创建属性（我相信它是系统字段）。对于所有其他字段，您需要按照您的描述访问它。

所以你不会错过任何东西。

# android - Android检查被叫方何时收到拨出电话

> ID：12913267
> 
> 赞同：2
> 
> 时间：2012-10-16T11:02:55.923
> 
> 标签：android, phone-call

我正在开发android框架，

我想在被叫方收到拨出电话时以及通话结束时（从两侧）触发一个事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:07:03.260

为了知道主叫方是否收到了呼叫，您需要创建一个侦听器。

```
class PhoneInfo extends BroadcastReceiver {
/**
 * Getting the System Telephony Service and registering a listener for Voice Call state
 */
@Override
public void onReceive(Context context, Intent intent) {
    IncomingCallListener phoneListener = new IncomingCallListener();
    TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    telephony.listen(phoneListener, PhoneStateListener.LISTEN_CALL_STATE);
}

class IncomingCallListener extends PhoneStateListener {

    public void onCallStateChanged(int state, String incomingNumber) {
        Log.i(logcat,"CALL_STATE changed " + callflag);

        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:
            Log.i(logcat,"CALL_STATE_IDLE");
                                    //This is where call ends.
            break;

        case TelephonyManager.CALL_STATE_OFFHOOK:
                                    //This is where we know call is established
            break;

        case TelephonyManager.CALL_STATE_RINGING:
            Log.i(logcat,"CALL_STATE_RINGING");
            break;
        }

    }

} 
```

将此注册为您的活动 `phoneInfo = new PhoneInfo(this);` `registerReceiver(phoneInfo, new IntentFilter(Intent.ACTION_NEW_OUTGOING_CALL));`

现在通过日志，您可以看到在拨打或接听电话时状态是如何变化的。

# android - 如何获得发送的电子邮件信息？

> ID：12913274
> 
> 赞同：2
> 
> 时间：2012-10-16T11:03:16.657
> 
> 标签：android, email

我正在开发一个与电子邮件相关的应用程序。

我正在使用休闲代码获取收件箱邮件信息。

```
private void initProtocol() {
        EmailAuthenticator authenticator = new EmailAuthenticator(account);

        Properties props1 = new Properties();  
        props1.setProperty("mail.transport.protocol", "smtps");  
        props1.setProperty("mail.host", stmpHost);  
        props1.put("mail.smtp.auth", "true");  
        props1.put("mail.smtp.port", "465");  
        props1.put("mail.smtp.socketFactory.port", "465");  
        props1.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");  
        props1.put("mail.smtp.socketFactory.fallback", "false");  
        props1.setProperty("mail.smtp.quitwait", "false");  
        smtpSession = Session.getDefaultInstance(props1, authenticator); 

        Properties props2 = new Properties();
        props2.setProperty("mail.store.protocol", "imaps");
        props2.setProperty("mail.imaps.host", mailServer);
        props2.setProperty("mail.imaps.port", "993");
        props2.setProperty("mail.imaps.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props2.setProperty("mail.imaps.socketFactory.fallback", "false");
        imapSession = Session.getInstance(props2);
    }   
    public void getInboxMails() throws MessagingException {
        store = imapSession.getStore("imaps");
        store.connect(mailServer, account.username, account.password);

        inbox = store.getFolder("Inbox");
        inbox.open(Folder.READ_ONLY);
        Message[] messages = inbox.getMessages();

        for (int i = messages.length - 1; i >= 0; i--) 
        {

             Part p = messages[i]; 
            try {
                String subject = messages[i].getSubject();
                Log.v("info","subject="+subject);

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        return ;
    } 
```

它工作正常。

但我想获得发送的邮件信息。

如果有人知道如何获取发送邮件信息的解决方案。

请帮助我，在此先感谢。

# c# - 从数组中为 IN 子句创建 SQLParameter

> ID：12913275
> 
> 赞同：2
> 
> 时间：2012-10-16T11:03:16.973
> 
> 标签：c#, asp.net, sql-server

我有一个整数数组。我想在我的 selectCommand 中使用该数组来形成一个“IN”子句（“WHERE Cli.ID IN (1,2,3,4)”）。我试图将数组转换为字符串（下面的代码），但这（足够合理）不起作用。

我[从 2005 年找到了这篇 KB 文章，](http://support.microsoft.com/kb/555266)但建议的解决方法让我流血了。

有没有一种我想念的简单而优雅的方法来做到这一点？当然，这是一件很常见的事情吗？

```
 string iDlist = "";
        for (int i = 0; i < MyIDs.Length; i++)
        {
            iDlist += Convert.ToString(MyIDs[i]) + (i == 0 ? "" : ",");
        }

        this.sqlDataAdapter1.SelectCommand.CommandText = StandardQuery + @" where Cli.ID in (@iDlist)";

        this.sqlDataAdapter1.SelectCommand.Parameters.Clear();
        this.sqlDataAdapter1.SelectCommand.Parameters.Add(new SqlParameter("@iDlist", SqlDbType.VarChar));
        this.sqlDataAdapter1.SelectCommand.Parameters["@iDlist"].Value = iDlist; 
```

# amazon-ec2 - 保持 EC2 免费实例免费

> ID：12913278
> 
> 赞同：20
> 
> 时间：2012-10-16T11:03:32.447
> 
> 标签：amazon-ec2, amazon-web-services

我注册了 Amazon AWS 的免费套餐实例。到目前为止一切正常，但我有点困惑如何确保我不必为此付费。

具体来说，我为**“按比例每小时未附加到正在运行的实例的弹性 IP 地址”**收取了一些费用。

在管理控制台 > 弹性 IP 部分，我分配了一个新的弹性 IP 并将其附加到我的实例。似乎我可以再分配 4 个地址，但不能附加它们，这仅适用于一个实例。如何避免为未附加的弹性 IP 付费？如果我有 5 个弹性 IP 分配给我的账户，但只有一个实例，有没有办法？

我也不确定流量使用报告是如何工作的——我想我被允许“跨所有 AWS 服务聚合 *15 GB 带宽”，但前提是我使用公共 DNS 而不是弹性 IP。它是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-16T11:07:40.400

由于亚马逊只有有限数量的可用 IP 地址，因此他们对每个未附加的弹性 IP 地址收费。它可以防止订阅者分配有限资源而不使用它们，因为它们是免费的。

结论：只为正在运行的实例分配弹性IP地址，或者接受你被计费（收费相当合理）。

[您可以在EC2 Management Console](https://console.aws.amazon.com/ec2/home?s=Addresses)中释放不需要的地址。

# magento - magento 调整产品可见

> ID：12913281
> 
> 赞同：0
> 
> 时间：2012-10-16T11:03:47.297
> 
> 标签：magento, product

我有 2 个新的自定义产品属性，可以在类别列表和产品详细信息页面中启用或禁用产品。两者都是日期。需要计算当前日期是否在两个自定义日期之间。如果是，则必须启用该产品。我在代码中找不到在类别列表和详细信息页面中启用/禁用产品的位置。我不想在 phtml 中解决这个问题。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:13:29.227

你必须修改两件事：

*   产品集合，以便在您的两个新闻属性上添加过滤。例如，您可以实现`catalog_block_product_list_collection`来自`Mage_Catalog_Block_Product_List`（用于产品列表和搜索）的事件，您将在其中使用函数添加过滤`$collection->addAttributeToFilter('attribute_code', $condition)`

*   产品页面本身。您可以添加逻辑以通过多种方式显示或不显示您的产品。我会选择实现事件`catalog_product_is_salable_after`以便在此处添加您的逻辑并调用`$product->isSalable()`模板或控制器...

# visual-studio - 从 Visual Studio 连接到 SQL Server CE

> ID：12913285
> 
> 赞同：0
> 
> 时间：2012-10-16T11:04:07.830
> 
> 标签：visual-studio, mobile, sql-server-ce, windows-ce

我有一个从 Visual Studio 部署到模拟器的程序。首次启动程序时，会在模拟器上创建一个数据库。

是否有能力从我的计算机连接到该数据库？我不需要程序代码，我正在寻找现成的解决方案（VS 工具或单独的实用程序）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:22:50.043

您可以将[SQL Server CE 工具箱](http://visualstudiogallery.msdn.microsoft.com/0e313dfd-be80-4afb-b5e9-6e74d369f7a1/)安装到 Visual Studio 并享受它的所有功能！

阅读[Erik EJ 网站](http://erikej.blogspot.ch/2012/08/sql-server-compact-toolbox-31visual.html)上的这篇博文，了解 3.1 版的最新功能

![在此处输入图像描述](../Images/8b23b42c8fd2606c5e9562504a76b2f6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:26:19.733

我知道的唯一一个允许桌面计算机连接到单独设备上的 SQL Compact 数据库的工具是[Primeworks 的 DataPortConsole](http://primeworks-mobile.com/Products/DataPortConsole.html)。如果您可以在本地提取它，那么 SQLCE Toolbox（请参阅 marc_s 的答案）是一个很棒的工具。

**编辑**

不要被 marc_s 的精美图形所超越，这里是 DataPortConsole 之一。:)

![在此处输入图像描述](../Images/4ee770f165a0b1c4781d2eb3314740a6.png)

# android - 服务自动启动？在安卓中

> ID：12913287
> 
> 赞同：1
> 
> 时间：2012-10-16T11:04:14.240
> 
> 标签：android, android-intent, broadcastreceiver, android-service

我的 Android 应用程序中有 11 个服务。所有服务都`PendingIntent`在广播接收器中。我在一项服务中处理相机，在另一项服务中处理录像机。但是，当我发送启动一个或多个服务的意图时`BroadcastReceiver`，记录器服务会自动启动，并且在我停止启动的服务时它不会停止。

为什么会这样？我检查了代码，记录器服务没有在任何地方启动。

# backbone.js - 在 Backbone.js 中使用 View Render 重复时丢失范围

> ID：12913288
> 
> 赞同：1
> 
> 时间：2012-10-16T11:04:14.333
> 
> 标签：backbone.js

我是 Backbone.js 的新手，遇到了一个简单的视图和模型场景的范围问题。

我创建了一个具有单个默认“分数”值的简单模型。我还创建了一个简单的视图，其中包含一个“分数”的模板渲染值和一个每次按下时将分数增加一的按钮。每次更改分数值时，视图都会重复渲染。

我有这个工作，但在某种程度上，我认为可能是一个拙劣的。除非我在视图变量“thisView”中缓存“this”的值，否则模板只会第一次呈现。如果我不这样做，它似乎会失去焦点和渲染错误。这是一个好主意吗？或者我错过了关于重复应用渲染的一些东西。

感谢您的任何建议

```
<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
    <style>
       #view_container{background-color: rgba(12, 5, 11, 0.14);width: 100px;height: 100px;padding: 10px;}
    </style>
</head>
<body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

<!-- View Template -->
<script type="text/template" id="view-template">
    <div class="profileSpace">
        <p>Score: <%= score %></p>
    </div>
    <button id="increaseScoreButton">Increase Score</button>
</script>

<div id="view_container"></div>

<script type="text/javascript">
(function ($) {

MyModel = Backbone.Model.extend({
    defaults:{
        score:0
    },
    initialize: function(){

    },
    increaseScore: function(){

        //Increase Score by 1

        var currentScore = this.get("score");

        var newScore = currentScore +1;

        this.set({score:newScore});

    }
});

MyView = Backbone.View.extend({

        el: $("#view_container"),

        template: _.template($('#view-template').html()),

        initialize: function(model){

                thisView =this;

                this.model.bind('change', this.render, this);

                this.render();

            },
        events: {

            "click #increaseScoreButton":  "increaseScore"

        },

        increaseScore: function(){

            this.model.increaseScore();

        },
        render: function(){

            var currentScore = thisView.model.get("score");

            var html = thisView.template({"score":currentScore});

            $(thisView.el).html( html );
            return thisView;
        }
    });

myModel = new MyModel;
myApp = new MyView({model:myModel});

})(jQuery);

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:21:12.790

您通过绑定`change`事件`this.model.bind('change', this.render, this);`

此语法[在 Backbone 0.5.2 中引入，](http://backbonejs.org/#changelog)但您在示例中使用 Backbone 0.3.3。

> **0.5.2** — 2011 年*7 月 26 日*
> bind 函数现在可以采用可选的第三个参数来指定回调函数的 this。

将 Backbone 升级到更新的版本（截至今天为 0.9.2），您应该会得到预期的行为。

或者，正如 CoryDanielson 在评论中指出的那样，您可以使用[_.bindAll](http://underscorejs.org/#bindAll)来保证上下文：

```
MyView = Backbone.View.extend({
    initialize: function(model) {
        _.bindAll(this, 'render');
        this.model.bind('change', this.render);
        this.render();
    },

    render: function(){
        var currentScore = this.model.get("score");
        var html = this.template({"score":currentScore});
        $(this.el).html( html );
        return this;
    }
}); 
```

# excel - 如何使用苹果脚本在excel中创建多个系列

> ID：12913289
> 
> 赞同：0
> 
> 时间：2012-10-16T11:04:14.423
> 
> 标签：excel, applescript

我想使用苹果脚本在 excel 2011 中创建一个包含多个系列的图表。

```
 tell application "Microsoft Excel"
    tell worksheet "Sheet1" of active workbook
        set obj to make new chart object at end with properties {left position:20, top:88, width:33, height:90}
        set ochart to chart of obj
        set chart type of ochart to column clustered
        set series 1 of series collection to ochart
        tell series 1
            set xvalues to "=Sheet1!$B$7:$B$10"
            set name to "shartseries1"
        end tell
    end tell
end tell 
```

在此脚本中创建图表并成功设置图表类型，但未创建图表系列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:52:40.880

尝试：

```
tell application "Microsoft Excel"
    tell worksheet "Sheet1" of active workbook
        set obj to make new chart object at end with properties {left position:20, top:88, width:33, height:90}
        set ochart to chart of obj
        tell ochart
            set chart type to column clustered
            set newSeries to make new series at end with properties {series values:"=Sheet1!$B$7:$B$10", xvalues:"=Sheet1!$B$7:$B$10", name:"shartseries1"}
        end tell
    end tell
end tell 
```

# php - 如何检查模板中是否应用了过滤器？

> ID：12913291
> 
> 赞同：0
> 
> 时间：2012-10-16T11:04:15.363
> 
> 标签：php, symfony1, symfony-1.4

我正在开发一个管理员生成器模块。在用户使用过滤器之前，我想隐藏项目列表。所以我想检查一下，过滤器表单是否已发送。

`indexSuccess.php`我可以在模板中检查这个变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:11:33.903

当用户提交过滤器时，过滤器存储在会话中。

因此，在您的模板中，您可以通过调用会话来访问定义的过滤器。如果您没有默认过滤器，它将返回一个空数组（`sfOutputEscaperArrayDecorator`如果您使用输出保护可能是这样）。

例如，如果您的模块名称是`car`，您可以使用以下方法在模板中获取过滤器：

```
$filters = $sf_user->getAttribute('car.filters', null, 'admin_module'); 
```

如果你使用输出保护，你可以这样做：

```
$filters = sfOutputEscaper::unescape($sf_user->getAttribute('car.filters', null, 'admin_module')); 
```

如果你没有过滤器，你会得到这样的东西`var_dump`（使用第一个解决方案）：

```
object(sfOutputEscaperArrayDecorator)[181]
  private 'count' => int 0
  protected 'value' => 
    array
      empty
  protected 'escapingMethod' => string 'esc_specialchars' (length=16) 
```

第二个：

```
array
  empty 
```

例如，如果您定义了一些过滤器，您将获得：

```
array
  'model' => 
    array
      'text' => string 'test' (length=4)
  'updated_at' => 
    array
      'from' => null
      'to' => null
  'created_at' => 
    array
      'from' => null
      'to' => null 
```

# jquery - jQuery UI 可排序和可拖动防止将可拖动项目移动到可排序的最后一个子项

> ID：12913292
> 
> 赞同：0
> 
> 时间：2012-10-16T11:04:21.073
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-sortable

我正在使用 JQueryUI 来实现拖动和排序。

问题是如果可拖动项目放置在可排序的最后一个孩子之后，如何使可排序拒绝可拖动项目？

```
<ul id="draggable">
    <li>Drag Item 1</li>
    <li>Drag Item 2</li>
    <li>Drag Item 3</li>
    <li>Drag item 4</li>
</ul>

<ul id="sortable">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li> 
    <li>Last item</li> //if I placed drag item after this, the sortable list reject the drag item
</ul> 
```

1.  我将拖动项目 2 拖动到可排序
2.  如果将 Drag Item 2 放置在 sortable 的最后一个子项之前 -> 正常情况发生
3.  如果将 Drag Item 2 放在 sortable 的最后一个子项之后 -> 可排序列表拒绝 Drag Item 2

有什么建议吗？？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:13:37.267

最后我找到了我的问题的解决方案。你可以在这里看到：http: [//jsfiddle.net/yosafatade/KE2JM/3/](http://jsfiddle.net/yosafatade/KE2JM/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:41:31.697

问题来自#sortable height，因为当鼠标在最后一项之后移动时，会触发停止事件。

你可以在这里看到一个例子：[jsFiddle](http://jsfiddle.net/rrGAD/1/)

# python - 如何从列表列表中提取所有唯一组合

> ID：12913293
> 
> 赞同：2
> 
> 时间：2012-10-16T11:04:27.753
> 
> 标签：python, list, loops

我想遍历列表列表，并从列表中提取所有组合。

我可以通过以下方式做到这一点：

```
list = [['1','2','3'],['a','b','c'],['x','y','z']]
for itemi in list[0]:
    print itemi
    for itemj in list[1]:
        print itemi+itemj
        for itemk in list[2]:
            print itemi+itemj+itemk 
```

我的问题是我想在 list o' 列表中的不同数量的列表上执行此操作。起初只有一个列表，（现在）以 64 个列表结束。

上面的示例适用于 3 个列表，实际上所有列表都包含相同的值（0 到 255）。我使用上面的示例只是为了让您可以看到输出应该是什么样子。

我认为必须有更好的方法，而不必为每个列表大小的列表构建嵌套的 for 循环。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T11:06:54.313

使用[`itertools.product()`](http://docs.python.org/library/itertools.html?highlight=itertools#itertools.product)：

```
>>> l = [['1','2','3'],['a','b','c'],['x','y','z']]
>>> import itertools
>>> list(itertools.product(*l))
[('1', 'a', 'x'), ('1', 'a', 'y'), ('1', 'a', 'z'), ('1', 'b', 'x'), 
 ('1', 'b', 'y'), ('1', 'b', 'z'), ('1', 'c', 'x'), ('1', 'c', 'y'), 
 ('1', 'c', 'z'), ('2', 'a', 'x'), ('2', 'a', 'y'), ('2', 'a', 'z'), 
 ('2', 'b', 'x'), ('2', 'b', 'y'), ('2', 'b', 'z'), ('2', 'c', 'x'), 
 ('2', 'c', 'y'), ('2', 'c', 'z'), ('3', 'a', 'x'), ('3', 'a', 'y'), 
 ('3', 'a', 'z'), ('3', 'b', 'x'), ('3', 'b', 'y'), ('3', 'b', 'z'), 
 ('3', 'c', 'x'), ('3', 'c', 'y'), ('3', 'c', 'z')] 
```

这还不是您想要的，但很容易实现：

```
>>> for i in range(len(l)):
...     print(list(itertools.product(*l[:i+1])))
...
[('1',), ('2',), ('3',)]
[('1', 'a'), ('1', 'b'), ('1', 'c'), ('2', 'a'), ('2', 'b'), ('2', 'c'), 
 ('3', 'a'), ('3', 'b'), ('3', 'c')]
[('1', 'a', 'x'), ('1', 'a', 'y'), ('1', 'a', 'z'), ('1', 'b', 'x'), 
 ('1', 'b', 'y'), ('1', 'b', 'z'), ('1', 'c', 'x'), ('1', 'c', 'y'), 
 ('1', 'c', 'z'), ('2', 'a', 'x'), ('2', 'a', 'y'), ('2', 'a', 'z'), 
 ('2', 'b', 'x'), ('2', 'b', 'y'), ('2', 'b', 'z'), ('2', 'c', 'x'), 
 ('2', 'c', 'y'), ('2', 'c', 'z'), ('3', 'a', 'x'), ('3', 'a', 'y'), 
 ('3', 'a', 'z'), ('3', 'b', 'x'), ('3', 'b', 'y'), ('3', 'b', 'z'), 
 ('3', 'c', 'x'), ('3', 'c', 'y'), ('3', 'c', 'z')] 
```

在一个列表中获取所有内容：

```
>>> result = []
>>> for i in range(len(l)):
...     result.extend(list(itertools.product(*l[:i+1])))
...
>>> result
[('1',), ('2',), ('3',), ('1', 'a'), ('1', 'b'), ('1', 'c'), ('2', 'a'), 
 ('2', 'b'), ('2', 'c'), ('3', 'a'), ('3', 'b'), ('3', 'c'), ('1', 'a', 'x'), 
 ('1', 'a', 'y'), ('1', 'a', 'z'), ('1', 'b', 'x'), ('1', 'b', 'y'), 
 ('1', 'b', 'z'), ('1', 'c', 'x'), ('1', 'c', 'y'), ('1', 'c', 'z'), 
 ('2', 'a', 'x'), ('2', 'a', 'y'), ('2', 'a', 'z'), ('2', 'b', 'x'), 
 ('2', 'b', 'y'), ('2', 'b', 'z'), ('2', 'c', 'x'), ('2', 'c', 'y'), 
 ('2', 'c', 'z'), ('3', 'a', 'x'), ('3', 'a', 'y'), ('3', 'a', 'z'), 
 ('3', 'b', 'x'), ('3', 'b', 'y'), ('3', 'b', 'z'), ('3', 'c', 'x'), 
 ('3', 'c', 'y'), ('3', 'c', 'z')] 
```

得到你想要的确切形状：

```
>>> sorted(result)
[('1',), ('1', 'a'), ('1', 'a', 'x'), ('1', 'a', 'y'), ('1', 'a', 'z'), 
 ('1', 'b'), ('1', 'b', 'x'), ('1', 'b', 'y'), ('1', 'b', 'z'), ('1', 'c'), 
 ('1', 'c', 'x'), ('1', 'c', 'y'), ('1', 'c', 'z'), ('2',), ('2', 'a'), 
 ('2', 'a', 'x'), ('2', 'a', 'y'), ('2', 'a', 'z'), ('2', 'b'), ('2', 'b', 'x'), 
 ('2', 'b', 'y'), ('2', 'b', 'z'), ('2', 'c'), ('2', 'c', 'x'), ('2', 'c', 'y'), 
 ('2', 'c', 'z'), ('3',), ('3', 'a'), ('3', 'a', 'x'), ('3', 'a', 'y'), 
 ('3', 'a', 'z'), ('3', 'b'), ('3', 'b', 'x'), ('3', 'b', 'y'), ('3', 'b', 'z'), 
 ('3', 'c'), ('3', 'c', 'x'), ('3', 'c', 'y'), ('3', 'c', 'z')] 
```

# php - 如何为 xampp 1.8.1 和 php 5.4.7 找到 ffmpeg-php dll

> ID：12913298
> 
> 赞同：2
> 
> 时间：2012-10-16T11:04:30.963
> 
> 标签：php, ffmpeg, xampp, ffmpeg-php

在 Windows 上的 xampp 1.8.1 和 php 5.4.7 上安装 ffmpeg-php 扩展时遇到问题。有没有人为这个版本编译过 ffmpeg-php 的 dll，我知道如何安装扩展，但我找不到适合我的 php 版本的正确 dll。任何帮助将不胜感激。

# api - D 中基于任务的并行性

> ID：12913302
> 
> 赞同：3
> 
> 时间：2012-10-16T11:04:47.207
> 
> 标签：api, concurrency, parallel-processing, task, d

编程语言 D 是否以任何方式支持基于任务的并行性，无论是本机还是通过某些 API？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T12:41:39.983

查看*明显*命名的[并行模块](http://dlang.org/phobos/std_parallelism.html)

# blackberry-webworks - 如何在黑莓中创建一个 webview，它只允许我查看页面并禁用所有其他选项

> ID：12913309
> 
> 赞同：0
> 
> 时间：2012-10-16T11:05:19.090
> 
> 标签：blackberry-webworks

如何创建一个网页视图，它只给我查看网页的选项，其余选项应该被禁用。BrowserSession browserSession = Browser.getDefaultSession(); browserSession.displayPage("http://www.google.co.in/"); 我尝试了此代码，但无法禁用浏览器中的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:35:04.433

看起来您的帖子的“blackberry-webworks”标签错误，听起来像是一个 Java 问题？

无论如何... BlackBerry WebWorks 本质上是在设备上本地运行的网络应用程序/网页。

如果您要使用 WebWorks 进行开发，您只需创建一个网页（html、css、javascript），并创建一个 config.xml 文件，该文件告诉 SDK 您的应用程序是什么，它希望在设备上执行什么操作，以及请求所需的权限等

打包后，您的应用程序将像设备上的任何其他应用程序一样运行。WebWorks 最酷的地方在于，从技术上讲，您可以为网站创建启动器。它再次看起来像任何其他应用程序，有它自己的图标，并在它自己的 web 视图中启动。你不会有任何浏览器地址栏，或类似的东西，所以这可能是要走的路。

如果您需要一些“入门”信息，请查看[HTML5 WebWorks 网页](https://developer.blackberry.com/html5/documentation/what_is_a_webworks_app_1845471_11.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T12:38:05.620

我得到了解决方案。它可能会帮助某人

```
 BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();
        myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
        BrowserField browserField = new BrowserField(myBrowserFieldConfig);
        add(browserField);
        browserField.requestContent("http://www.google.co.in"); 
```

# c# - 在 IKVM 中使用 C# 中的 java.util.List

> ID：12913319
> 
> 赞同：1
> 
> 时间：2012-10-16T11:06:01.367
> 
> 标签：c#, ikvm

我正在尝试使用 C# 客户端调用 java 应用程序。发送的对象是 java.util.List 类型。我已将所需的 IKVM 程序集添加到我的 C# 项目中。我只是不确定应该如何实例化 List 对象。因为它只是在界面上，所以我不能只创建它的新实例。

```
 java.util.List myList = new java.util.List(); 
```

有人可以帮助我使用它吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:43:39.430

在java中有`Iterators`

示例用法：

```
 java.util.List matches = new java.util.ArrayList();
        //stuff to add elements to list
        Iterator it = matches.iterator();
        while (it.hasNext())
        {
            RuleMatch m = (RuleMatch)it.next();
            Console.WriteLine("Potential error:" + m.getMessage());
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T02:13:53.363

我们知道类型`java.util.List`是一个接口（它不是一个`class`类型，所以我们不能实例化）。您需要使用任何类类型，它是`java.util.List`.

```
java.util.List myList = new java.util.ArrayList(); 
```

甚至更好地使用类型参数：

```
java.util.List<Integer> myList = new java.util.ArrayList<>(); 
```

# java - 如何将上传的文件保留在表单中，直到使用 jsf-2 和 primefaces-3.4 提交

> ID：12913324
> 
> 赞同：4
> 
> 时间：2012-10-16T11:06:21.053
> 
> 标签：java, spring, jsf, primefaces, multifile-uploader

当我提交表单时，我有许多输入字段和 primefaces 组件来上传多个文件“p:fileUpload”的表单我无法获取上传的文件..被管理的 bean 是“RequestScoped”。那么如何在不创建管理 bean View 范围的情况下获取上传的文件呢？

上传方式

```
 public void upload(FileUploadEvent event) {
    try {
        FacesMessage msg = new FacesMessage("Success! ", event.getFile().getFileName() + " is uploaded.");
        FacesContext.getCurrentInstance().addMessage(null, msg);
        // Do what you want with the file
        String thumbnail = getDestination() + event.getFile().getFileName();
        int index = thumbnail.lastIndexOf('.');
        SystemFile systemFile = new SystemFile();
        systemFile.setAccount(getActor().getAccount());
        systemFile.setName(event.getFile().getFileName());
        systemFile.setPath(getTalentPath());

        systemFile.setFileType(FileUtil.checkFileType(thumbnail.substring(index + 1)));
        if (systemFiles == null) {
            systemFiles = new ArrayList<>();
        }
        systemFiles.add(systemFile);
        copyFile(event.getFile().getFileName(), event.getFile().getInputstream());
    } catch (IOException ex) {
        SystemLogger.getLogger(getClass().getSimpleName()).error(null, ex);
    }
} 
```

素面组件

```
 <p:fileUpload label="#{TalentMessages.lbl_Select_File}" fileUploadListener="#{talentPropertyAction.upload}"
                                  mode="advanced"
                                  multiple="true"
                                  uploadLabel="#{TalentMessages.lbl_upload_File}"
                                  cancelLabel="#{TalentMessages.lbl_cancel_File}"
                                  sizeLimit="2000000"
                                  oncomplete="completeUploadFile(#{talentPropertyAction.talentId});"
                                  /> 
```

然后保存功能

```
 @Setter
@Getter
private List<SystemFile> systemFiles;
try {
 // save something else then save the files
        if (systemFiles != null) {
            System.out.println("Not Null" + systemFiles);
            for (SystemFile systemFile : systemFiles) {
                TalentPropertyFile talentPropertyFile = new TalentPropertyFile();
                talentPropertyFile.setTalentProperty(talentProperty);
                talentPropertyFile.setFile(systemFile);
                getTalentService().save(getActor().getAccount(), talentPropertyFile);
            }
        } else {
            System.out.println("Null");
        }
    } catch (InvalidParameter ex) {
        SystemLogger.getLogger(getClass().getName()).error(null, ex);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T11:35:42.737

> *那么如何在不创建管理 bean View 范围的情况下获取上传的文件呢？*

只需将上传信息立即存储在更永久的位置，而不是作为请求范围 bean 的属性，无论如何都会在请求响应结束时被垃圾（注意：每次上传都算作一个单独的 HTTP 请求）。

```
public void upload(FileUploadEvent event) {
    // Now, store on disk or in DB immediately. Do not assign to a property.
}

public void save() {
    // Later, during submitting the form, just access them from there.
} 
```

如果您需要一些密钥来访问它们，请考虑将密钥存储在会话范围内。

# c# - 如何在wp7中将项目索引添加到导航页面

> ID：12913326
> 
> 赞同：-1
> 
> 时间：2012-10-16T11:06:26.267
> 
> 标签：c#, windows-phone-7

```
private void my_listbox_SelectionChanged(object sender, SelectionChangedEventArgs e)   
{            
    try
    {
        FrameworkElement element = (FrameworkElement)sender;
        SampleData item = (SampleData)element.DataContext;
        int index = dataSource.IndexOf(item);
        string s = "/Page"+index;
        s +=".xaml";
        NavigationService.Navigate(new Uri("s", UriKind.Relative));
    }
    catch
    {
        MessageBox.Show("Sorry..please try again..");
    }
} 
```

这是代码的一部分。这有什么问题？当我单击列表框中的项目时，它会进入导航失败功能。我想按下该项目并将其添加到导航页面。你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:14:10.897

删除 "s" 周围的引号：

```
NavigationService.Navigate(new Uri(s, UriKind.Relative)); 
```

如果你放`s`，那么你正在使用变量的内容`s`。如果您使用`"s"`，那么您将创建一个包含文字值的新字符串`s`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:44:47.903

看看你从数据源获取索引的方式我觉得，可能是你试图将 QueryString 参数传递给你的页面。如果是这样，试试这样

```
string s = "/Page.xaml?index=" + index; 
```

并在您的目标页面加载中，阅读该参数

```
string qryArgVal = "";
NavigationContext.QueryString.TryGetValue("index", out qryArgVal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:38:42.783

我找到了自己的答案。在列表框中获取索引的最简单方法是`int k = ((ListBox)sender).SelectedIndex;`，现在您的 k 将具有索引值

# facebook - Facebook Ads Api：创建暂停的广告组/广告

> ID：12913334
> 
> 赞同：0
> 
> 时间：2012-10-16T11:06:49.387
> 
> 标签：facebook, api, ads, adgroup

我正在尝试调用 FB API 以创建新的广告组和广告，广告组状态设置为 9（广告组已暂停）。

但是，我的新广告组经历了以下阶段：- adgroup_status：4（待审核）然后 - adgroup_status：1（活动）

那里发生了什么？

更糟糕的是 - 在审核过程完成后，我可以轻松地提出另一个暂停广告组的请求。所以...

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T22:11:30.660

这个问题是前段时间提出的，为其他读者解答。

文档：[https ://developers.facebook.com/docs/reference/ads-api/adgroup/](https://developers.facebook.com/docs/reference/ads-api/adgroup/)

注意：广告组在创建后处于待处理状态，直到它们被批准（或被拒绝）。广告组一旦获得批准，它将处于运行状态。如果您希望广告组在批准后不运行，您可以在暂停的广告系列中创建广告组，然后在您准备好运行广告组时恢复广告系列。

# objective-c - 插入排序 vs 冒泡排序 vs 快速排序算法

> ID：12913335
> 
> 赞同：1
> 
> 时间：2012-10-16T11:06:49.983
> 
> 标签：objective-c, algorithm, sorting, quicksort, bubble-sort

我正在研究我测试冒泡排序和插入排序和快速排序的课程，我对随机数进行了测试。结果表明，插入排序比冒泡排序快，而快速排序是最慢的排序。

所以我在时间方面有以下排名

1.  插入排序（最快）
2.  冒泡排序（第二分）
3.  快速排序（最慢）

考虑到插入和冒泡排序的复杂度为 O(n2)，而快速排序 O(n log n) 和 O(n log n) 应该更快！！！

有人可以与我分享解释吗？

谢谢

```
(NSMutableArray *)quickSort:(NSMutableArray *)a
{
    // Log the contents of the incoming array
    NSLog(@"%@", a);

    // Create two temporary storage lists
    NSMutableArray *listOne = [[[NSMutableArray alloc]
    initWithCapacity:[a count]] autorelease];
    NSMutableArray *listTwo = [[[NSMutableArray alloc]
    initWithCapacity:[a count]] autorelease];
    int pivot = 4;

    // Divide the incoming array at the pivot
    for (int i = 0; i < [a count]; i++)
    {
        if ([[a objectAtIndex:i] intValue] < pivot)
        {
           [listOne addObject:[a objectAtIndex:i]];
        }
        else if ([[a objectAtIndex:i] intValue] > pivot)
        {
           [listTwo addObject:[a objectAtIndex:i]];
        }
    }

    // Sort each of the lesser and greater lists using a bubble sort
    listOne = [self bubbleSort:listOne];
    listTwo = [self bubbleSort:listTwo];

    // Merge pivot onto lesser list
    listOne addObject:[[NSNumber alloc] initWithInt:pivot]];

    // Merge greater list onto lesser list
    for (int i = 0; i < [listTwo count]; i++)
    {
        [listOne addObject:[listTwo objectAtIndex:i]];
    }

    // Log the contents of the outgoing array
    NSLog(@"%@", listOne);

    // Return array
    return listOne;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:08:58.963

好吧，快速排序严重依赖输入。在进行快速排序之前，您需要 SHUFFLE 输入。如果您的输入已排序，则快速排序的复杂度可能为 O(n2)

对于小数组，插入排序也可以更快

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:12:09.947

这取决于数组大小。在小型数组上，简单的算法（例如插入排序）会做得很好，不需要更好的算法。

然而，当 n 很大时（比如 n=10000000），快速排序通常会比插入（或冒泡）排序好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:29:46.200

`O(nlogn)`那么是“更快” `O(n^2)`，但让我们回想一下大 O 符号的含义。

这意味着如果算法 A 的复杂度为`O(nlogn)`，对于某些常数`N_1`，并且`c1`，对于每个`n>N`- 算法“更快”那么`c1*n*log(n)`。如果算法 B 有`O(n^2)`，则有一些常数`N_2`，`c2`这样算法就“更快”`c2 * n^2 * log(n)`了`n > N_2`。

但是 - 在此之前会发生什么`N`？这个常数是`C`什么？我们不知道。**对于小输入，****算法`B`仍然可能比算法“更快”`A`**，但对于大输入 - 实际上`A`会更快（渐近界更好）。

例如，让我们以算法`A`在`T_1(n) = 10* nlog(n)`ops 中运行，而算法`B`在`T_2(n) = n^2`. for `n=3`- 我们得到了`T_1(3) = 10*3*2 = 60`（我们为 ceil 提供工具`log(n)`），并且`T_2(3) = 9`- 因此 algorithm `B`，虽然`O(n^2)`比`A`这个输入更快。

**关于快速排序和插入排序：**
快速排序通常非常快，并且在极少数情况下会衰减到二次时间（如果我们选择随机元素作为枢轴，这种情况发生的可能性很小）。

但是，快速排序中大 O 符号后面的常数大于插入排序。因此 -**一个可能的优化是：使用快速排序直到达到某个阈值**（比如 30 个元素），然后使用插入排序而不是快速排序对这个子数组进行排序。[这篇文章](https://stackoverflow.com/questions/12622015/why-should-insertion-sort-be-used-after-threshold-crossover-in-merge-sort)讨论了这种优化。

冒泡排序（根据经验）对于随机数组很糟糕，但如果数组几乎已排序并且“不合适”的元素在其开头，则可能会很好。

# jquery - 多次丢弃事件后的警报触发

> ID：12913338
> 
> 赞同：1
> 
> 时间：2012-10-16T11:06:55.017
> 
> 标签：jquery, jquery-droppable, jquery-draggable

我得承认，我几乎是一个菜鸟，但我一直在努力解决这个问题。我必须`if`在两次下降发生后触发，现在它在加载时触发。我在那里想念什么？

```
$(function() {
    $( "#draggable" ).draggable({
        revert: "invalid",
        snap: "#droppable",
    });
    $( "#droppable" ).droppable({
        accept: "#draggable",
        drop: function() {
            $("#whistle").get(0).play();
            $(this).data(droppable)
        }
    });
    $( "#draggable2" ).draggable({
        revert: "invalid",
        snap: "#droppable",
    });
    $( "#droppable2" ).droppable({
        accept: "#draggable2",
        drop: function() {
            $("#whistle").get(0).play();
            $(this).data(droppable2)
        }
    });
    if ($.queue(2)) {
        $("#whistle2").get(0).play();
        alert ("done!")
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:34:52.517

您可以使用两个`$.Deferred`s 及其`promise`-objects 来触发您的处理程序：

```
$(function() {

    var dfd1 = $.Deferred();
    var dfd2 = $.Deferred();

    $( "#draggable" ).draggable({
        revert: "invalid",
        snap: "#droppable",
    });
    $( "#droppable" ).droppable({
        accept: "#draggable",
        drop: function() {
            $("#whistle").get(0).play();
            $(this).data(droppable);
            dfd1.resolve();
        }
    });
    $( "#draggable2" ).draggable({
        revert: "invalid",
        snap: "#droppable",
    });
    $( "#droppable2" ).droppable({
        accept: "#draggable2",
        drop: function() {
            $("#whistle").get(0).play();
            $(this).data(droppable2);
            dfd2.resolve();
        }
    });
    //this will trigger when both dfds have been resolved
    $.when(dfd1.promise(), dfd2.promise()).then(function(){
        $("#whistle2").get(0).play();
        alert ("done!")
    });
}); 
```

查看[这个小提琴](http://jsfiddle.net/b4RGZ/)的演示（单击两个按钮，看看魔术发生了！）并阅读[`$.Deferred`](http://api.jquery.com/category/deferred-object/)和[`$.when`](http://api.jquery.com/jQuery.when/)

# iphone - 如何在图像上写文字并通过邮件发送？

> ID：12913339
> 
> 赞同：0
> 
> 时间：2012-10-16T11:07:00.307
> 
> 标签：iphone, objective-c, ios

我正在创建一个通过电子邮件发送照片的应用程序，我已经创建了图库，现在我希望我的应用程序可以在该照片上写文字并通过电子邮件发送。有什么建议么？教程是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:14:37.330

最简单但很棘手，`UIView`在 a`UIImageView`和 a中添加一个，用and`UILabel`更新。现在在此处截取屏幕截图[。](https://stackoverflow.com/a/2203293/1603234)并将其附在您的电子邮件中。`yourimage``text``UIImage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:13:08.520

您可以使用图像创建 UIImageView，然后将具有清晰背景的 UILabel 放置在图像视图上，最后使用 Core Graphics 制作 UIImage。像这样的东西：

```
UIImage *bcg = [UIImage imageNamed:@"image.png"];
UIImageView *imgView = [[UIImageView alloc] initWithImage:bcg];
imgView.frame = CGRectZero;//Some frame
[self addSubview:imgView];
[imgView release];

UILabel *text = [[UILabel alloc] initWithFrame:CGRectMake(0, imgView.frame.size.height - 20, imgView.frame.size.width, 20)];
text.backgroundColor = [UIColor clearColor];
text.text = @"Some text";
[imgView addSubview:text];

UIImage *resultImage = nil;
UIGraphicsBeginImageContext(CGSizeMake(self.bounds.size.width,
                                       self.bounds.size.height)); 

[self.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
CGSize imageSize = CGSizeMake(self.bounds.size.width,
                              self.bounds.size.height);
UIGraphicsBeginImageContext(imageSize);

[viewImage drawInRect:CGRectMake(0,
                                 0,
                                 imageSize.width,
                                 imageSize.height)
            blendMode:kCGBlendModeNormal alpha:1];

resultImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

这种方法比在上下文中绘制图像和文本更容易调试。

# asp.net - Asp.net Ajax Toolkit 滑块问题

> ID：12913341
> 
> 赞同：1
> 
> 时间：2012-10-16T11:07:03.063
> 
> 标签：asp.net, ajax, slider, ajaxcontroltoolkit

我在数据列表中使用 asp.net ajax 工具包滑块。以下是代码片段：

```
 <asp:TextBox ID="txt" runat="server"></asp:TextBox>                   
 <ajaxToolkit:SliderExtender ID="Slider" runat="server" Steps="1" 
 Minimum="1"  Maximum="4"  TargetControlID="txt"
 EnableHandleAnimation="true" /> 
```

唯一的问题是：它永远不会滑到第 2 步。它只能滑到第 1、3 和 4 步。

# javascript - 在 click() 上添加和删除标记字符

> ID：12913344
> 
> 赞同：0
> 
> 时间：2012-10-16T11:07:07.213
> 
> 标签：javascript, jquery

我想在用户单击链接时将标记字符添加到链接，并在他第二次单击链接时将其删除。

这是我所拥有的：

```
$('#text a').click(function () {
    $(this).addClass('clicked');
    $(this).text(markerTextChar +  $(this).text());
    $(this).click(function () {
        $(this).removeClass('clicked');
        $(this).text($(this).text().substring(1));
    });
}); 
```

标记是在单击时添加的，但是当我单击它以取消选择它时又添加了一次。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:08:50.083

Adding a event handler with `bind` (or `click`) doesn't remove the old ones.

You could [unbind](http://api.jquery.com/unbind/) it but this is not needed. Do this instead :

```
$('#text a').click(function () {
   if ($(this).hasClass('clicked')) {
        $(this).removeClass('clicked');
        $(this).text($(this).text().substring(1));
   } else {
      $(this).text(markerTextChar +  $(this).text());
       $(this).addClass('clicked');
   } 
}); 
```

[demonstration](http://jsfiddle.net/Ftw4U/)

* * *

You might also use [toggleClass](http://api.jquery.com/toggleClass/) and use `:before` in css to add your char, that would be much cleaner.

css :

```
.clicked:before {
    content: "yourmarker";
}​ 
```

javascript :

```
$('#text a').click(function () {
   $(this).toggleClass('clicked');
});​ 
```

[demonstration](http://jsfiddle.net/4Zfvj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:09:01.630

you have to unbind first click event do it like this

```
$('#text a').click(function () {
    $(this).addClass('clicked');
    $(this).text(markerTextChar +  $(this).text());
    $(this).removeAttr('onclick');
    $(this).click(function () {
        $(this).removeClass('clicked');
        $(this).text($(this).text().substring(1));
    });
}); 
```

# jquery - slidetoggle() 与 UL LI

> ID：12913346
> 
> 赞同：0
> 
> 时间：2012-10-16T11:07:32.147
> 
> 标签：jquery, slidetoggle

请找到下面的html和相关代码

```
<div class="lang">
            <a href="Text A url" class="uk lclick">Text A</a>
        </div>
        <div id="lang_menu" class="small_menu">
            <ul class="lang-list">
                <li><a href="Text B url" class="de">Text B</a></li>
                <li class="no-sep"><a href="Text C url" class="tr">Text C</a></li>
            </ul>
            <div class="small_menu_bottom">
            </div>
        </div>
​ 
```

1.  用户单击具有锚标记 'Text A' 的 div 'lang' ，单击此锚标记，用户将被重定向到特定页面。

2.  当用户点击 'lang' div 时，会执行 slideToggle() 函数并向用户显示 div 'langmenu'。（这会产生下拉效果）

3.  这个 'langmenu' div 还有两个锚标记（文本 B 和文本 C） 请找到上面的 html 代码。

4.  当用户单击任一锚标记时，页面将根据锚标记的 href 属性重定向到相应的 url。

5.  问题与用户选择的锚标记无关，即“文本 B”或“文本 c”，在页面重定向后，下拉列表中仅显示“文本 A”。应在何处显示选定的锚标记文本

请让我知道如何解决此问题。

请找到 jquery 和 css 。

```
.lang{background:url(someurl) no-repeat; display:block; padding:0 9px; width:145px;height:22px; cursor:pointer; position:absolute; top:24px; left:188px;}

.lang-list li a.uk{ background:url(someurl) left center no-repeat;}
.lang-list li a.de{ background:url(someurl) left center no-repeat;}
.lang-list li a.tr{ background:url(someurl) left center no-repeat;}

#lang_menu{position:absolute; top:48px; left:188px; width:159px;display:none; cursor:pointer; z-index:100;}

.small_menu, .small_menu_bottom{background:url(someurl) 0 0 no-repeat; width:159px;}
.small_menu_bottom{clear:both; background-position:-161px 0; height:10px; display:block; margin-bottom:-10px;}

.lang-list li{height:25px; line-height:25px; background:url(someurl) center bottom repeat-x; margin:0 1px;padding-left:15px;}

li.no-sep{ background:none;height:15px; line-height:15px; padding-top:8px;} 
```

我不经常使用 jquery，所以我发现很难解决这个问题。这可能是一个简单的修复，请告诉我。

```
$(document).ready(function () {
    $('.lang').click(function () {
        $("#lang_menu").slideToggle();
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:09:38.313

尝试 ：

> $(document).ready(function () { $('.lang > a').click(function () { $("#lang_menu").slideToggle(); }); });​</p>

在您的代码中，#lang_menu 是点击侦听器的一部分。如果它是嵌套的

# c++ - 调整矢量大小后，为什么我不能增加矢量

> ID：12913347
> 
> 赞同：1
> 
> 时间：2012-10-16T11:07:32.943
> 
> 标签：c++, vector

我正在尝试编写一个可以循环使用的数据结构，类似于循环列表，使用向量。我调整了我认为应该用十个元素初始化底层数组的大小。我不明白为什么我不能推进迭代器。有人可以帮忙吗。

我不能使用 push_back() ，因为它总是会附加到末尾，这不是我想要的。

```
// re-use start of vector when get to end
#include <vector>
#include <iostream>
#include <algorithm>

using std::cout;
using std::endl;
using std::vector;

class printme {
public:
   void operator() (int val) {cout << val << endl; }
};

//get a debug assertion - message says: vector iterators incompatible
//I assume this means that it is invalid after previous it++
int main(int argc, char* argv[])
{
   vector<int> myvec;
   myvec.resize(10);  //underlying array now has size=10 elements
   vector<int>::iterator it = myvec.begin();  //point to start of array
   for(int i = 0; i < 100; ++i) {
      if(it == myvec.end())           //on 2nd iteration crashes here - invalid iterator
         it = myvec.begin();

      myvec.insert(it++, i);
   }

   //print contents of vector - check 90-99 printed
   for_each(myvec.begin(), myvec.end(), printme());

    return 0;
} 
```

编辑将循环更改为：

```
for(int i = 0; i < 100; ++i) {
   if(it == myvec.end())
      it = myvec.begin();

   *it++ = i;
} 
```

我没有正确理解插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:26:02.667

根据您对输出的期望 - 我相信您误解了`insert`正在做的事情。以这种方式实现你的循环（不插入 - 只是替换）。`std::vector<>::insert`将向量的大小增加一 - 我相信这不是您所期望的。

不要这样做：

```
myvec.insert(it++, i); 
```

但是这个：

```
 *it++ = i; 
```

然后你会得到你想要的输出：

```
 //print contents of vector - check 90-99 printed
   for_each(myvec.begin(), myvec.end(), printme()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:08:42.753

Iterators can be invalidated by some operations on a vector - including `insert`. You'll need to re-fectch `it` in order to be able to use it after the `insert`.

```
vector<int>::iterator it = myvec.begin();  //point to start of array
for(int i = 0; i < 100; ++i) {
   if(it == myvec.end())           //on 2nd iteration crashes here - invalid iterator
       it = myvec.begin();

   myvec.insert(it++, i);
   //it can be invalid here, re-fetch it
   it = myvec.begin();
} 
```

# javascript - What XSS attacks could be done with window.location

> ID：12913352
> 
> 赞同：0
> 
> 时间：2012-10-16T11:07:52.587
> 
> 标签：javascript, jquery, google-chrome, browser

Which XSS attacks could be done when redirecting with `window.location` and user input data.

I think this ones

*   User can write a post with a title that contains `http://` so the end user ends up on a bad site.
*   User can write a post with title "`javascript:EvilCode()`" I think this will be executed in some browsers?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:15:25.007

如果您不先对数据进行 URL 编码，您可能会允许[XSS 。](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)

# php - Round integer to nearest multiple of 5 in PHP

> ID：12913353
> 
> 赞同：6
> 
> 时间：2012-10-16T11:08:07.390
> 
> 标签：php, rounding

Searching for a function ro round numbers to the nearest multiple of 5

```
22 -> 20
23 -> 25
40 -> 40
46 -> 45
48 -> 50 
```

and so on.

Tried this which always returns the higher value:

```
5 * ceil($n / 5); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-16T11:09:30.543

使用`round()`而不是`ceil()`.

```
5 * round($n / 5); 
```

`ceil()`将浮点数按顺序向上舍入到下一个整数。`round()`将使用标准舍入规则舍入到最接近的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:22:08.917

回到数学上来，因为 round 与小数一起使用，乘以 5 除以 10 然后四舍五入。再乘以 5 得到你想要的。（[其他](https://stackoverflow.com/a/12913384/31671)答案也有效，只是另一种看待它的方式）

```
function round_5($in)
{
    return round(($in*2)/10)*5;
}

echo round_5(48); 
```

看看这是否有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T02:37:42.273

好吧，在帮助一家加拿大公司制作 POS 时遇到这个问题，想出了这个解决方案，希望它对某人有所帮助。（加拿大在 2012 年取消了一分钱）。还包括进行含税定价，只需将“1”作为第二个参数传递。

```
 //calculate price and tax
function calctax($amt,$tax_included = NULL){
  $taxa = 'tax rate 1 here';
  $taxb = 'tax rate 2 here';
  $taxc = ($taxa + $taxb) + 1;
  if(is_null($tax_included)){
    $p = $amt;
   }else{
    $p = number_format(round($amt / $taxc,2),2);
   } 
  $ta = round($p * $taxa,2);
  $tb = round($p * $taxb,2);
  $sp = number_format(round($p+($ta + $tb),2),2);
  $tp = number_format(round(($sp*2)/10,2)*5,2);
  $ret = array($ta,$tb,$tp);
  return $ret;
} 
```

# objective-c - iphone将情节提要添加到现有应用程序- uinavigationcontroller

> ID：12913360
> 
> 赞同：0
> 
> 时间：2012-10-16T11:08:31.013
> 
> 标签：objective-c, ios, storyboard

大家好，我创建了一个空应用程序，而不是使用故事板创建单页应用程序。现在正在尝试使用情节提要来调整这个空的应用程序。

我在应用程序中添加了一个故事板，并在构建阶段分配为 mainstoryboard。

但是当我启动应用程序时，我的故事板没有显示 rootviewcontroller。

它说像

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

在这里检查我的应用委托代码。

> ```
> UINavigationController *rootNavigationController = (UINavigationController *)self.window.rootViewController;
> RootViewController *rootViewController = (RootViewController *)[rootNavigationController topViewController]; 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:14:15.133

你想用代码做什么？如果您想在应用启动时显示您的导航控制器。转到情节提要并点击 NavigationController ，转到属性检查器并选中 Initial View Controller 并将 rootViewController 添加到您的 MainNavigationController。现在启动应用程序..确保您在构建阶段设置了故事板名称？

# java - About Wikipedia Miner

> ID：12913361
> 
> 赞同：0
> 
> 时间：2012-10-16T11:08:32.647
> 
> 标签：java

I have a requirement where if I query for a word the system should tell weather the word represents a persons first name or last name or some disease or a country etc. I have heard about Wikipedia miner but I don't know which one to use. Can anyone guide me on this topic. If this is not possible with the Wikipedia miner, is there any other API to fetch this type of information?

Thanks...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:49:15.493

[我在 sourceforge 上](http://sourceforge.net/projects/wikipedia-miner/)找不到比 1.2 更新的 wikipedia-miner 工具包版本

网上有几篇关于 wikipedia-miner 及其在词义消歧中的使用的文章，例如[http://fedcsis.org/proceedings/fedcsis2012/pliks/253.pdf](http://fedcsis.org/proceedings/fedcsis2012/pliks/253.pdf)

# python - Python object deletion

> ID：12913362
> 
> 赞同：4
> 
> 时间：2012-10-16T11:08:36.843
> 
> 标签：python, python-2.7

```
a = [1,2,3,4,5]
b = a[1]
print id(a[1],b)   # out put shows same id.hence both represent same object.
del a[1]           # deleting a[1],both a[1],b have same id,hence both are aliases
print a            # output: [1,3,4,5]
print b            # output: 2 
```

Both b,a[1] have same id but deleting one isn't effecting the other.Python reference states that `'del' on a subscription deletes the actual object,not the name object binding`. Output: [1,3,4,5] proves this statement.But how is it possible that 'b' remains unaffected when both `a[0]` and `b` have same id.

**Edit:** The part `'del' on a subscription deletes the actual object,not the name object binding` is not true.The reverse is true. 'del' actually removes the name,object bindings.In case of 'del' on subscription (eg. del a[1]) removes object 2 from the list object and also removes the current `a[1]` binding to `2` and makes `a[1]` bind to `3` instead. Subsequent indexes follow the pattern.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T11:20:54.193

`del`不删除对象，它删除**引用**。

有一个对象是整数值`2`。一个对象被两个地方引用；`a[1]`和`b`。

您删除`a[1]`了 ，因此该引用消失了。**但这对对象** 没有影响`2`，只会对 in 中的引用产生影响`a[1]`。因此，通过名称可访问的引用仍然可以很好地`b`到达对象。`2`

即使你`del`所有的引用，这对*对象*没有影响。Python 是一种垃圾收集语言，所以它负责在一个对象在任何地方都不再被引用时进行通知，以便它可以回收该对象所占用的内存。这将在对象不再可访问后的一段时间内发生。¹

* * *

¹ CPython 使用引用计数来实现它的垃圾收集²，这使我们可以说对象通常会在它们的最后一个引用消失后立即被回收，但这是一个实现细节，而不是语言规范的一部分。您不必确切了解 Python 是如何收集垃圾的，也不应该编写依赖于它的程序；其他 Python 实现（例如 Jython、PyPy 和 IronPython）不会以这种方式实现垃圾收集。

²加上一个额外的垃圾收集机制来检测循环垃圾，这是引用计数无法处理的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T11:12:33.230

`del`只是减少该对象的引用计数。所以在`b = a[1]`对象之后`a[1]`有2个（比方说）引用。删除 a[1] 后，它从 中消失了`list`，现在只有 1 个引用，因为它仍然被 引用`b`。在参考之前不会发生实际删除。count 为 0，然后只在一个 GC 周期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:14:09.237

这里有多个问题。首先，调用`del`列表成员会从列表中删除项目，这会释放对象的引用计数，但不会释放它，因为变量`b`仍然引用它。你永远不能解除分配你有参考的东西。

这里要注意的第二个问题是，接近于零的整数实际上是池化的，并且永远不会被释放。不过，您通常不必费心知道这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T11:15:27.703

它们具有相同的功能`id`，因为 Python 重用了`id`for small integers，即使您删除了这些...这在*[文档](http://docs.python.org/c-api/int.html#PyInt_FromLong)**中有所提及：*

> 当前的实现为 -5 到 256 之间的所有整数保留一个整数对象数组，当您在该范围内创建一个 int 时，您实际上只是取回了对现有对象的引用。

我们可以看到这种行为：

```
>>> c = 256
>>> id(c)
140700180101352
>>> del c
>>> d = 256
>>> id(d)
140700180101352 # same as id(c) was

>>> e = 257
>>> id(e)
140700180460152
>>> del e
>>> f = 257
>>> id(f)
140700180460128 # different to id(e) ! 
```

# android - Can we bundle a directory inside apk file?

> ID：12913363
> 
> 赞同：1
> 
> 时间：2012-10-16T11:08:36.620
> 
> 标签：android

I have a directory which contains some files. I want to bundle this directory inside apk file so that when I install apk file the directory gets copied to a particular location on the android device.

Can I bundle a directory inside apk file as I didn't find this information on developer.android.com? Do I need to modify any configuration file for this?

Thanks.. Ajay

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:11:53.677

你不能，但你可以看看 android assets 文件夹，

[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

资产是原始资源，它们不会被 android 编译器压缩。

从开发者网站：

**资产/**

> 这是空的。您可以使用它来存储原始资产文件。您在此处保存的文件将按原样编译为 .apk 文件，并保留原始文件名。您可以像使用 URI 的典型文件系统一样导航此目录，并使用 AssetManager 将文件作为字节流读取。例如，这是放置纹理和游戏数据的好位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:12:45.093

apk 中的`assets/`文件夹旨在以任何格式存储任何额外的用户文件。它们将在编译阶段自动包含到 apk 中，并且可以使用`getAssets()`函数从应用程序访问。

# javascript - Pulling through text into div

> ID：12913367
> 
> 赞同：2
> 
> 时间：2012-10-16T11:08:42.423
> 
> 标签：javascript, jquery

I have a list of answers attached to sums for my maths game. Each time an answer is randomly selected from the list, it has a sum attached. The problem I am having is that I want the sum to be pulled into a div so it is displayed. I have done this before for images and sounds by using "preload="auto"". What is the equivalent for pulling text through?

Here is the list..

```
<ul style="display:none;" id="answerlist">

    <li data-answer="1" data-sum="4 - 3 ="></li>

    <li data-answer="2" data-sum="7 - 5 ="></li>

    <li data-answer="3" data-sum="1 + 2 ="></li>

    <li data-answer="4" data-sum="1 + 3 ="></li>

    <li data-answer="5" data-sum="4 - 3 ="></li>

    <li data-answer="6" data-sum="10 - 4 ="></li>

    <li data-answer="7" data-sum="4 + 3 ="></li>

    <li data-answer="8" data-sum="2 x 4 ="></li>

    <li data-answer="9" data-sum="4 + 5 ="></li>

    <li data-answer="10" data-sum="1 x 10 ="></li>

    <li data-answer="11" data-sum="10 + 1 ="></li>

    <li data-answer="12" data-sum="2 x 6 ="></li>

    <li data-answer="13" data-sum="9 + 4 ="></li>

    <li data-answer="14" data-sum="2 x 7 ="></li>

    <li data-answer="15" data-sum="11 + 4 ="></li>

  </ul> 
```

I want to print it through the div..

```
 <div class="mysum" class="sumstyle"> 
```

How would I do this?

Here is a fiddle to help... [http://jsfiddle.net/smilburn/ZAfVZ/11/](http://jsfiddle.net/smilburn/ZAfVZ/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:31:38.260

你的小提琴有很多代码要尝试通过。希望这可以帮助

```
var answer = /* generated somewhere in your code */
var sum= $('#answerlist li[data-answer="'+answer+'"]').data('sum');
$('.mysum').text(sum + answer); 
```

演示 [http://jsfiddle.net/rt44v/](http://jsfiddle.net/rt44v/)

# django - Read/Write permission for a program run with subprocess?

> ID：12913370
> 
> 赞同：0
> 
> 时间：2012-10-16T11:08:49.570
> 
> 标签：django, permissions, subprocess

I've got a Django app, which calls a program using `subprocess.call()`. This program creates a couple of files, which I then use back in my app. The problem is the program doesn't seem to have permission to create files. I also tried calls like `subprocess.call(['mkdir','/tmp/myapp'])` but the directory was not created. What do I need to do?

This is just with my dev server at the moment, which I invoke with

```
sudo python manage.py runserver 0.0.0.0:8080 
```

I can run the command from the terminal manually fine.

I can also use subprocess to `touch` the files, which it does fine, but when it runs the program that accesses the files itself, that program throws an error because it cannot.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T01:00:30.600

需要先创建 /tmp/myapp 目录。如果您在 Django 中的视图函数没有向您显示错误，则意味着您没有正确捕获它。尝试这样的事情：

```
response = HttpResponse()
calltxt = subprocess.call(['mkdir','/tmp/myapp'])
response.content = calltxt
return response 
```

将该函数附加到您的 urls.py 并将其加载到浏览器中。0 表示命令执行成功，1 表示错误（这类似于 Bash 中的 $! 变量）。

我认为情况并非如此，但如果您的 Django 应用程序部署在 Web 服务器中，那么在 Python 环境中创建文件和执行命令的用户就是拥有 Web 服务器守护程序的用户。例如 Apache 中的 www-data。因此，还需要更改此用户的权限，以便在其正常范围之外编写和执行命令。

# python - 传递给 URL 的输入表单中的空元素

> ID：12913372
> 
> 赞同：0
> 
> 时间：2012-10-16T11:08:51.293
> 
> 标签：python, html, forms, input

> **可能重复：**
> [如何防止提交 HTML 表单的输入字段值（如果它为空）](https://stackoverflow.com/questions/8029532/how-to-prevent-submitting-the-html-forms-input-field-value-if-it-empty)

如果我有一个三件式输入表单和一个提交按钮。

表 1 id：书
表 2 id：音乐
表 3 id：电视

假设我将“Book1”放在图书字段中，将“Music1”放在音乐字段中，而在 TV 字段中什么都没有，我会得到这个 URL：

```
http://url/search/?book=Book1&music=Music1&tv= 
```

发生的情况是，即使“tv”字段中没有任何内容，“&tv=”仍会附加到 URL。有没有办法阻止这种情况，或者这是标准的浏览器行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:12:08.033

这是标准和合乎逻辑的行为。“无值”与“空值”不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:26:15.337

这是由于浏览器的行为，正如[这个答案](https://stackoverflow.com/a/12913421/447356)中正确所说的那样。

要“克服”这种默认行为，您必须使用客户端脚本。我能想到的最简单和不打扰的方法是在你的页面上添加这个：

```
<script type="text/javascript">
window.onload = function() {
    for (var i = 0; i < document.forms.length; i++) {
        var oForm = document.forms[i];
        oForm.onsubmit = function() {
            for (var j = 0; j < this.elements.length; j++) {
                var element = this.elements[j];
                if (element.type === "text" && element.value === "")
                    element.disabled = true;
            }
        };
    }
};​
</script> 
```

这将在提交表单时自动禁用任何空文本框，导致浏览器不为它们发送任何值。

[现场测试用例](http://jsfiddle.net/wUenh/)。

# objective-c - Sort array of objects by their NSDate property

> ID：12913377
> 
> 赞同：31
> 
> 时间：2012-10-16T11:09:02.520
> 
> 标签：objective-c, nsmutablearray, nsdate, sorting

> **Possible Duplicate:**
> [How to sort an NSMutableArray with custom objects in it?](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)

How does one sort an array of objects by accessing their NSDate properties?

I know one can use `[mutableArray sortUsingSelector:@selector(compare:)];` on an array of dates, but how does one do it by accessing a NSDate property on each element in the array, sorting the objects by earliest date to latest date?

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-16T11:33:48.370

感谢所有答案，我遇到了解决我问题的答案。[检查 NSGod 的答案](https://stackoverflow.com/questions/6083408/sort-nsarray-of-custom-objects-by-their-nsdate-properties)

这是感谢用户的代码：NSGod：

```
NSSortDescriptor *dateDescriptor = [NSSortDescriptor
                                 sortDescriptorWithKey:@"startDateTime" 
                                             ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObject:dateDescriptor];
NSArray *sortedEventArray = [nodeEventArray
     sortedArrayUsingDescriptors:sortDescriptors]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-16T11:14:56.317

```
 NSSortDescriptor* sortByDate = [NSSortDescriptor sortDescriptorWithKey:@"nsdatepropertyname" ascending:YES];
    [mutableArray sortUsingDescriptors:[NSArray arrayWithObject:sortByDate]]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-16T11:14:14.630

您可以使用：

```
 NSArray *sortedArray = [mutableArray sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
        NSDate *first = [(Person*)a birthDate];
        NSDate *second = [(Person*)b birthDate];
        return [first compare:second];
    }]; 
```

或者看这个[链接](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T11:15:22.743

有一种方法叫做`-[NSArray sortedArrayUsingComparator:]`。它需要一个块，您可以在其中实现您认为适合您的对象的任何比较。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T11:12:48.907

您可以覆盖自定义类中的 compare 方法，以便它比较自定义类的两个对象并根据对象上的日期返回适当的 NSComparisonResult。

例如：

```
-(NSComparisonResult)compare:(YourClass*)otherObject
{
   return [self.date compare:otherObject.date];
} 
```

# android - How call requestLocationUpdates in thread?

> ID：12913378
> 
> 赞同：0
> 
> 时间：2012-10-16T11:09:02.690
> 
> 标签：android

I want get my location from a thread. I code as:

```
LocationManager locationManager;
            GeoPoint p;
            locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
            Criteria cri = new Criteria();
            String tower = locationManager.getBestProvider(cri, false);
            Location location = locationManager.getLastKnownLocation(tower); 
```

But How call `requestLocationUpdates` update location? Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:12:14.277

您拥有开发者文档中的所有内容：[请求位置更新](http://developer.android.com/guide/topics/location/strategies.html)。

```
// Acquire a reference to the system Location Manager
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

// Define a listener that responds to location updates
LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
      // Called when a new location is found by the network location provider.
      makeUseOfNewLocation(location);
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {}

    public void onProviderEnabled(String provider) {}

    public void onProviderDisabled(String provider) {}
  };

// Register the listener with the Location Manager to receive location updates
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

# php - Follow/Unfollow Link returning wrong value

> ID：12913382
> 
> 赞同：0
> 
> 时间：2012-10-16T11:09:23.927
> 
> 标签：php, mysql

more issues with following and unfollowing!

This time there is supposed to be a check to the database of if i'm following a user or not. If I am, its supposed to display "Unfollow", if i'm not its supposed to display "follow"

I have a user_follow table that contains the ID of the follower and the user followed, under the names "follower" and "user"

The code to get these:

```
$check_following = mysql_query("SELECT `follower`, `user` FROM user_follow WHERE `user`=$p_id'");
$follow_query = mysql_fetch_array($check_following); 
```

p_id is the profile i'm looking at. The if statement:

```
if(isset($_SESSION['id']) && $p_id != $_SESSION['id'])
      {
          if ($follow_query['follower'] == $_SESSION['id'] && $follow_query['user'] ==$p_id)
               { 
                 echo 'Unfollow';
               } 
          else { 
                 echo 'Follow';
               } 
 } 
```

Problem is, unfollow shows on 1 out of the 3 profiles i'm following, and follow shows on 2 profiles i'm following, echoing `$follow_query['follower']` shows 1, which isn't me (also shows 1 for another user)

Any ideas?

Thanks guys

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:16:40.903

`mysql_fetch_array`如果 sql 查询有更多结果，则返回多于一行。要正确迭代结果，请使用：`while ($row = mysql_fetch_array($result)){$array[] = $row;}`

# mysql - MySQL - 在查询中有两个选项，一个是“必须拥有”，另一个是“可选”吗？

> ID：12913387
> 
> 赞同：1
> 
> 时间：2012-10-16T11:09:47.073
> 
> 标签：mysql

为问题标题道歉，如果有人可以更好地解释它，请进行编辑。我有一个 MySQL 选择语句（我通过 Perl dbi 运行），如下所示：

```
select skills from my_table where (skills like '%maths%' or skills like '%english%'); 
```

这将运行，但它选择像“数学”这样的技能或像“英语”这样的技能。我想拥有它，所以它肯定会找到“数学”，如果有意义的话，也许会找到“英语”。

我认为它有点像当你有 时`and`，它只返回带有这些元素的结果。所以如果我做了：

```
select skills from my_table where (skills like '%maths%' and skills like '%english%'); 
```

它会返回具有两种技能的结果。

因此，如果可能的话，我想要的是两个 sql 的组合，“数学”是一个明确的发现，而“英语”是可选的。我希望我已经正确解释了这一点......任何帮助表示赞赏！

编辑：好的，也许我确实需要澄清......如果有“英语”选项，我希望找到它，但如果没有，我希望它仍然选择“数学”选项，但如果没有“数学”选项，那么我希望它什么也不返回。所以它不仅仅是一个或另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:15:32.257

这将返回`keyField`所有具有数学技能的行，以及一个额外的列来显示他们是否也有英语技能。

```
select   keyField,  
        'Maths' mathsSkill,
        CASE WHEN skills LIKE '%english%' THEN 'English' else 'No English' END englishSkill
from    my_table 
where   skills like '%maths%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:12:41.750

`I would like to have it so it definitely finds 'maths', and maybe finds 'english' if that makes sense.`如果这有道理，你是什么意思。

我认为您只需要执行以下操作

```
select skills from my_table where (skills like '%maths%') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:12:52.677

但如果“英语是可选的”，您可以简单地将其删除：

```
select skills 
from my_table 
where skills like '%maths%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T11:12:55.850

试试看嘛

```
select skills from my_table where skills like '%maths%'; 
```

这将给出数学记录。由于英语是可选的，因此您无需提供

# windows - Windows 任务计划程序一起编辑多个任务

> ID：12913388
> 
> 赞同：1
> 
> 时间：2012-10-16T11:09:48.030
> 
> 标签：windows, scheduled-tasks

视窗 2008 服务器。

是否可以同时编辑多个任务（批量更新）？

我有几个任务。我想在操作选项卡中编辑命令行。任务由构建过程自动创建，稍后执行（单次运行）。该任务也会自行删除，因此没有剩余物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:00:37.220

这是我为解决我的需求所做的事情：

*   将所有任务列出到 csv 文件：**schtasks /query /v /fo csv > c:\temp\tasks.csv**
*   使用正则表达式，我编辑了 csv 文件，只留下任务名称和操作
*   使用我想要的更新编辑 csv 文件（我的案例 - 操作）
*   带有循环的批处理文件以遍历文件中的所有条目并运行**schtasks /change /tn "name" /tr "new action" /rp**

csv 中的示例行：**“我的任务名称”、“我的新操作”**

批处理文件内容：

```
@echo off
for /F "tokens=1,2 delims=," %%a in (C:\temp\tasks.csv) do (
    echo Fixing Task: %%a
    schtasks /change /tn %%a /tr %%b /rp <password>
) 
```

我希望这有帮助...

# syntax - 我将如何查询 dbpedia 以获取编程语言列表？

> ID：12913389
> 
> 赞同：0
> 
> 时间：2012-10-16T11:09:53.657
> 
> 标签：syntax, sparql, dbpedia

我转到[dbPedia SPARQL 端点](http://dbpedia.org/sparql)并输入：

```
select distinct ?Programming_language where {[] a ?Programming_language} LIMIT 100 
```

但它只是吐出一个通用的概念列表，如动物、书籍、地点。

列出 100 种编程语言的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:17:32.087

啊哈，基于[足球的例子](http://dbpedia.org/snorql/?query=SELECT%20DISTINCT%20%20?player%20%7B%0D%0A?s%20foaf%3apage%20?player.%0D%0A?s%20rdf%3atype%20%3Chttp://dbpedia.org/ontology/SoccerPlayer%3E%20.%0D%0A?s%20dbpedia2%3aposition%20?position%20.%0D%0A?s%20%3Chttp://dbpedia.org/property/clubs%3E%20?club%20.%0D%0A?club%20%3Chttp://dbpedia.org/ontology/capacity%3E%20?cap%20.%0D%0A?s%20%3Chttp://dbpedia.org/ontology/birthPlace%3E%20?place%20.%0D%0A?place%20?population%20?pop.%0D%0AOPTIONAL%20%7B?s%20%3Chttp://dbpedia.org/ontology/number%3E%20?tricot.%7D%0D%0AFilter%20%28?population%20in%20%28%3Chttp://dbpedia.org/property/populationEstimate%3E,%20%3Chttp://dbpedia.org/property/populationCensus%3E,%20%3Chttp://dbpedia.org/property/statPop%3E%20%29%29%0D%0AFilter%20%28xsd%3aint%28?pop%29%20%3E10000000%20%29%20.%0D%0AFilter%20%28xsd%3aint%28?cap%29%20%3C40000%20%29%20.%0D%0AFilter%20%28?position%20=%20%22Goalkeeper%22@en%20%7C%7C%20?position%20=%20%3Chttp://dbpedia.org/resource/Goalkeeper_%2528association_football%2529%3E%20%7C%7C%20?position%20=%20%3Chttp://dbpedia.org/resource/Goalkeeper_%2528football%2529%3E%29%0D%0A%7D%20Limit%201000)。

```
SELECT DISTINCT  ?lang {
?lang rdf:type <http://dbpedia.org/ontology/ProgrammingLanguage>
} Limit 1000 
```

# terminal - 无法在 ConEmu 中启用 256 色

> ID：12913392
> 
> 赞同：23
> 
> 时间：2012-10-16T11:10:08.063
> 
> 标签：terminal, conemu, ansi-colors, 256color

我试图在奇妙的[ConEmu-Maximus5](http://code.google.com/p/conemu-maximus5/)控制台中获得 256 种颜色。

**更新：**现在它只显示 8 种颜色。我知道是因为 '$tput colors' 输出是 '8'

我已按照[说明](http://translate.google.ru/translate?hl=ru&sl=ru&tl=en&u=http://code.google.com/p/conemu-maximus5/wiki/AnsiEscapeCodes?show=content)进行操作并激活：

*   TrueMod（24 位颜色）支持
*   注入ConEmuHk
*   ANSI x3.64 / xterm 256 色

我不明白如何处理'*检查缓冲区/幻灯片。*'

*   我在 Windows 7 中。
*   我使用自定义直接链接启动 ConEmu，因此它会加载 cygwin bash 文件。

```
"C:\Program Files\ConEmu\ConEmu64.exe" /cmd ""C:\cygwin\bin\bash.exe" --login -i"

```

*   在我的 bashrc 配置文件中，我有 -> export TERM=cygwin
*   这是我的自定义命令提示符：

```
    功能提示{

    本地红=“\[\033[0;31m\]”
    本地 GREEN="\[\033[0;32m\]"
    本地冷却 =“\e[38;5;173m”
    本地 COOLGREEN="\e[38;5;113m"
    PS1="$COOLRED\u@\h $LIGHT_COOLGREEN\$PWD \[\e[0m\] > "

    }

    迅速的

```

*   顺便说一下，ConEmuANSI 的值是 ON。

我有一些屏幕截图：

![在此处输入图像描述](../Images/b6b8a799e6137a043fbed208fc1d0b5e.png)

如您所见，命令提示符看起来非常奢侈，因为它不喜欢 256 色设置。如果我将变量 COOLRED 和 COOLGREEN 替换为 RED 和 GREEN，那么它看起来不错，但它不是 256 色。

更多设置截图：

![在此处输入图像描述](../Images/ccaaebe66e363da1a3954458896dca73.png) ![在此处输入图像描述](../Images/306e7eb9dcf9acf8ad285c636d7ee090.png)

最后一个镜头是cygwin的薄荷糖。那里一切都很好。支持全 256 色。可惜薄荷没有标签。这主要是我尝试迁移到 ConEmu 的原因。

![在此处输入图像描述](../Images/251c7bd127f4a86ad1624430d9919d44.png)

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T12:22:33.900

Bash 不会将 ANSI 序列发送到控制台。它试图自己处理它们。而且，由于*nix终端一般只有8色（不考虑256色模式），bash使用8色调色板代替Windows终端常见的16色调色板。

我认为，256 色在 mintty 中有效，因为`_isatty`在该终端中返回零。但它在 ConEmu 下返回非零值。可能在未来的构建中我解决了这个难题（如何为某些应用程序创建具有 PTY 功能的真实终端）。

**至于问题**

事实上，你不需要 256 色。要重新定义提示调色板，您可以使用“使用背景扩展前景色”功能。在 breaf - 在 ConEmu 中设置颜色 16、17 等，将 bash 中的提示背景设置为 #5（可在 ConEmu 中配置），瞧。

ConEmu“扩展...”处理中有一个小错误。使用内部版本 121016 或更高版本。

```
PS1="\e[30;45m\u@\h \e[34;45m$PWD \[\e[0m\] > " 
```

![ConEmu 和真实控制台窗口](../Images/ba93f950fb863b21bc613da45dd7e8ab.png)

![ConEmu 设置](../Images/eb68a6798ba1791600bf423a696cf52d.png)

**以下信息与问题不符，但可能有用**

当前版本不支持“整个”控制台缓冲区中的 256 色模式（限制，是的，在计划中将其删除）。

所以，你可以走2条路

*   完全禁用回滚缓冲区（多种方式，例如“cmd -cur_console:h0”）
*   在滚动缓冲区的底部工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-08T16:31:37.653

我也无法获得 256 色支持（颜色会显示，但它们看起来与 16 色调色板相同）。我切换到“xterm”配色方案，现在它可以在本机 Windows 可执行文件（例如 Python）中使用，但不适用于使用 Cygwin 的任何东西。Cygwin 似乎具有您无法关闭的终端转义序列处理，这会破坏`ConEmuHk`注入。

[这记录在 ConEmu wiki 上，here。](https://code.google.com/p/conemu-maximus5/wiki/CygwinAnsi)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-30T16:50:41.490

我遇到了这个奇怪的问题和奇怪的解决方案，它以某种方式起作用。并且不知道这是否也与其他人一起，只是一些信息共享以防万一这会有所帮助。

我喜欢给我的游戏机上色，也喜欢使用真正的 256 位 RGB 着色。在按照 conemu/CMDer（我使用了分叉的）[指令](https://conemu.github.io/en/Xterm256Colors.html)进行配置之后。我的 256 位着色测试看起来像这样。[![在此处输入图像描述](../Images/a732189b542ab0ea99a09b169ea737e9.png)](https://i.stack.imgur.com/6E8re.png). 经过一番折腾并使用我的 bash 256 位功能进行了测试。即运行这个命令：

```
for i in {1..16384}; do echo -en "\e[38;5;${i}mTest";done 
```

*注意应该是{1..256}，但我不得不强制它进行更长的彩色打印，所以只需要更长的随机数..给出结果： [![在此处输入图像描述](../Images/ae2544b721142fbcb2204c2fb992d673.png)](https://i.stack.imgur.com/Jf9Sk.png)

但是运行了大约 2-3 次，我突然看到了这个干净的灰色阴影 [![在此处输入图像描述](../Images/7a9ac207a1e7af013b8ea7ac77a2fa40.png)](https://i.stack.imgur.com/jgPkU.png)

然后它就起作用了.. [![在此处输入图像描述](../Images/40c2ef21074415c160697165ef3e30b1.png)](https://i.stack.imgur.com/hJaHO.png)

很奇怪，但我得到了这个工作。会不会是因为优化原因，CMDer 不知何故没有使用完整的 256 位，并且在启动时被触发？？，

PS：我用于控制台的 CMDer cmd：

```
-cur_console:fp -cur_console:d:"C:\WS":P:"<Cobalt>":t:"test":C:"C:\Arbeit\tools\Iconka-Buddy-Ninja.ico" set "PATH=%ConEmuDrive%\Program Files\Git\usr\bin;%PATH%" & "%ConEmuDrive%\Program Files\Git\git-bash.exe" --no-cd --command=%ConEmuBaseDirShort%\conemu-msys2-64.exe /usr/bin/bash.exe -l -i 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T11:13:26.367

```
local COOLRED="\e[38;5;173m"

local COOLGREEN="\e[38;5;113m" 
```

那些`\e`s 可能来自例如 C`printf`字符串。您不希望它们在 shell 脚本中。坚持原来的`\033`符号。你也错过了闭幕式`\]`。这些行现在应该是

```
local COOLRED="\[\033[38;5;173m\]"

local COOLGREEN="\[\033[38;5;113m\]" 
```

# lua - lua - 从字符串调用函数

> ID：12913394
> 
> 赞同：1
> 
> 时间：2012-10-16T11:10:20.707
> 
> 标签：lua

根据我在本网站上阅读的内容，以下内容应该可以工作。可以请一些好心的人指出我要去哪里错了吗？

我在代码中嵌入了更多描述和打印返回，希望能更容易阅读

```
local m = {
 {opt = "Solar Panels", cmd = "solarPanel"}
     -- There are many more options here.
}  

function doTheMenu()
 print("Welcome to Spyder's Factory")
 print("")
 print("What would you like to make?")
 local n = 1
 local l = #m - 1
 while true do             --This while loop may or may not be relevant to the question, it's the menu
 term.clear()              --this is ComputerCraft lua, the term function is defined
 term.setCursorPos(1,2)    --elsewhere in an API
  for i, j in pairs(m) do
   if i == n then
    if i < 10 then print(i, "  ["..j.opt.."]") else  print(i, " ["..j.opt.."]") end
     fsel = j.cmd          --set fsel to the function name I require in case of a break
     tsel = j.opt          --Ditto, tsel, human-friendly name
   else
    if i < 10 then print(i, "   "..j.opt) else  print(i, "  "..j.opt) end
   end
  end
  local a, b = os.pullEvent("key") 
  if b == 200 and n > 1 then n = n - 1 end
  if b == 208 and n <= l then n = n + 1 end 
  if b == 28 then break end
 end
 write("\nSure, how many "..tsel.."? ")
 qty = tonumber(read())
 req[fsel] = req[fsel] + qty
 str = fsel.."("..qty..")"
 print("Loading function '"..fsel.."("..qty..")'") --Returns "Loading function 'solarPanel(1)'"
 func = loadstring(str)
 print(func)      --Returns "function: 2cdfc5a7"
 print("Loading function")
 func()  --The error line, Returns "string:1: attempt to call nil"
 --tellUserWhatNeed()
 --makeItHappen()
end

doTheMenu() 
```

问题是代码无法运行并出现错误：

```
string:1 attempt to call nil 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:21:29.167

这是最终起作用的解决方案：

```
local f = loadstring(str)
if f then
 setfenv(f, getfenv())
 f()
end 
```

这替换了上面的行：

```
print("Loading function '"..fsel.."("..qty..")'") 
func = loadstring(str)
print(func)    
print("Loading function")
func() 
```

以及添加用于加载函数的基本错误处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:30:11.210

还有什么是`term`变量，如果这就是你的所有代码，`term`没有定义并且是`null`）

也就是说：要么`_G[fsel]`是`nil`，要么`fsel`是`nil`？

你确定你有在_G中声明的函数，名字存储在fsel中吗？

在问题行之前打电话`print (_G[fsel])`，看看它给了你什么。

# database - 从 HTML5 中的数据库中删除记录

> ID：12913395
> 
> 赞同：1
> 
> 时间：2012-10-16T11:10:26.160
> 
> 标签：database, html, indexeddb, delete-row

使用 HTML5 代码，即使触发了 onsuccess 事件，我也无法从数据库中删除。我的删除代码如下：

```
btnDelete.addEventListener("click", function(){
        //alert("At Delete function");
        var AadharNumber = document.getElementById("AadharNumber").value;
        var transaction = db.transaction("CustDetails",IDBTransaction.READ_WRITE);
        var objectStore = transaction.objectStore("CustDetails");
        var request = objectStore.delete(AadharNumber);
        request.onsuccess = function(event){
            alert( "Aadhar Number: "+ AadharNumber + " deleted from the database");
        };

    },false); 
```

然后当我在删除后单击打印按钮时，我仍然可以看到相同的记录。下面是我的打印功能。

```
btnPrint.addEventListener("click", function () {
                    var output = document.getElementById("printOutput");
                    output.textContent = "";
                    var transaction = db.transaction("CustDetails", IDBTransaction.READ_WRITE);
                    var objectStore = transaction.objectStore("CustDetails");

                    var request = objectStore.openCursor();
                    request.onsuccess = function(event) {  
                        var cursor = event.target.result;  
                        if (cursor) {  
                            output.textContent += "<li>""Aadhar Number: " + cursor.key + " is " + cursor.value.name + "</li>";
                            cursor.continue();  

                        }  
                        else {  
                            console.log("No more entries!");  
                        }  
                    };  
                }, false); 
```

我的html代码如下：

```
<body><center>
<div id="container">
    <label for="txtName">
    Name:
    </label>
    <input type="text" id="txtName" name="txtName" />
    <br />
    <label for="txtEmail">
    Email:
    </label>
    <input type="text" id="txtEmail" name="txtEmail" />
    <br />
    <input type="button" id="btnAdd" value="Add Record" />
    <br />
    <label for="AadharNumber">
    ID:
    </label>
    <input type="text" id="AadharNumber" name="txtAadharNumber" />
    <input type="button" id="btnDelete" value="Delete Record" />
    <br />
    <input type="button" id="btnPrint" value="Print Records" />
    <br />
    <output id="printOutput" > </output>
</div>  
</center>
</body> 
```

我的删除有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:13:24.140

代码看起来不错，但是您可以检查将字符串键转换为整数值是否有助于从对象存储中删除对象。

```
var AadharNumber =  parseInt(document.getElementById("AadharNumber").value); 
```

# c# - JSON.NET \ 如何在 JSon.net 中连接两个 JSON

> ID：12913396
> 
> 赞同：5
> 
> 时间：2012-10-16T11:10:28.510
> 
> 标签：c#, json.net, concat

我有两个 JSON（作为简单的字符串） - 有没有巧妙的方法来连接它们？作为基础设施的一部分？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T11:17:33.447

```
string j1 = @"{""a"":1}";
string j2 = @"{""b"":2}";

var j = JsonConvert.SerializeObject(new[] { JsonConvert.DeserializeObject(j1), 
                                            JsonConvert.DeserializeObject(j2) }); 
```

或者

```
var j = JsonConvert.SerializeObject(new { obj1 = JObject.Parse(j1), 
                                          obj2 = JObject.Parse(j2) }); 
```

# forms - 使用 Form.serialize() 为“数据”发送之前修改 jQuery.AJAX 值

> ID：12913397
> 
> 赞同：0
> 
> 时间：2012-10-16T11:10:34.340
> 
> 标签：forms, jquery, serialization

我有一个 jQuery.ajax() POST 请求，它在单击按钮时运行并将其`data`参数设置为`$(this).parents('form').serialize()`.

表单中有一个 Textarea 具有默认占位符，我想在发送 AJAX 请求之前将其替换为空白值。`beforeSend`是否可以使用jQuery.ajax的事件来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:12:30.357

您可以简单地操作表单数据。

```
$.extend($(this).parents('form').serialize(), { textarea_name: "" }); 
```

如果您根本不希望发送值，`delete`则返回对象的属性`serialize()`。

# xpages - 在 XPages 中保存设计元素后如何强制重建？

> ID：12913398
> 
> 赞同：2
> 
> 时间：2012-10-16T11:10:39.420
> 
> 标签：xpages, lotus-domino

这只是我多年来忍受的那些事情之一，但我很想看看是否有人能解决这个问题。

在一天中的某个时间点（似乎没有模式），当我在保存应用程序后重新构建应用程序时，在浏览器中进行测试时更改将不明显。让它们出现的唯一方法是在服务器控制台上发出“告诉 http 重新启动”或重新启动 Designer 客户端（这似乎在某处发出更重的重建命令）。

清理项目也不起作用。

这真的只是一种烦恼，但我希望能够摆脱它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:45:18.357

当它发生在我身上时，我使用 Navigator 视图从 Local->xsp 和 WebContent->WEB-INF->classes 中删除所有编译的东西。

然后我运行 Project->Clean。这经常有帮助。

![航海家](../Images/1ec080565824d5274dbff1629aa1c748.png)

不时重启设计师也是不可避免的:)

# sql - Sql中的REPLACE替换不止一次问题

> ID：12913401
> 
> 赞同：0
> 
> 时间：2012-10-16T11:10:47.773
> 
> 标签：sql

很奇怪，不确定我是否正确，但输出很奇怪：

```
 select * 
   into #TempScormModuelsTable  
 from Scorm.ScormModules

 select * from #TempScormModuelsTable 
 DECLARE @ScormModuleId int

DECLARE db_cursor CURSOR FOR   
SELECT ScormModuleId from #TempScormModuelsTable

OPEN db_cursor
FETCH NEXT FROM db_cursor INTO @ScormModuleId
WHILE @@FETCH_STATUS = 0
  BEGIN

   update #TempScormModuelsTable  
   set Directory = REPLACE(Directory,'SCORM','ScormPackages'),
   RelativeHtmlPath = REPLACE(RelativeHtmlPath,'SCORM','ScormPackages')

     FETCH NEXT FROM db_cursor INTO @ScormModuleId
  END  

--drop table #TempScormModuelsTable 

CLOSE db_cursor
DEALLOCATE db_cursor 
```

然后在列目录中我有这个！E:\inetpub\www.sellandprosper.com\ScormPackagesPackagesPackagesPackagesPackagesPackagesPackages\SellingOfficeWithNewPCs

“ScormPackagesPackagesPackagesPackagesPackagesPackagesPackagesPackages”是“SCORM”，我只想要它作为 ScormPackages..yikes

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:45:50.863

那不是 SQL。

你需要一些更接近...

```
UPDATE
  Scorm.ScormModules_backup
SET
  Directory        = REPLACE(Directory,        'SCORM', 'ScormPackages'),
  RelativeHtmlPath = REPLACE(RelativeHtmlPath, 'SCORM', 'ScormPackages') 
```

SQL 已经基于设置，这自然会将其应用于每一行*（很像您的 FOREACH 伪代码）*。

我不确定您的`WHERE`子句是什么意思，但您也可以将`WHERE`子句附加到`UPDATE`s。

**编辑**

好的，您只是完全更改了问题中的代码。

现在，您正在查看游标，但正在对整个表进行更新。

因此，如果您有 8 行，则执行 8 次更新。但是每次你对表中的每一行都这样做。

# php - 使用 php 更新 sql 时出现 SQL 语法错误

> ID：12913402
> 
> 赞同：1
> 
> 时间：2012-10-16T11:10:48.970
> 
> 标签：php, sql, syntax

我有一个问题，我尝试用我的 php 脚本更新一个 mysql 数据库，但我变成了消息：

```
您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'mod = 3, drehtage = 4, schnitttage = 5, dreh = 0, schnitt = 0, off = 0, leiter =' 附近使用正确的语法
```

我希望你能帮助我，这是我更新数据库的代码（我只是编辑用户 + 通行证；））

```
    $con = mysql_connect('localhost', 'user', 'pass');
    如果 (!$con)
      {
      die('无法连接：' . mysql_error());
      }

    mysql_select_db("kup_projekte", $con);

    $aendern = "更新 drehs SET name = '".$t1."', drehdatum = '".$t2."', schnittdatum = '".$t3."', camera = '".$t4."' , assi = '".$t5."', mod = '".$t6."', drehtage = '".$t7."', schnitttage = '".$t8."', dreh = '"。 $t9."', schnitt = '".$t10."', off = '".$t11."', leiter = '".$t12."' 其中 id = '".$id."'" ;

    $update=mysql_query($aendern);
    mysql_close($con);

```

// 编辑 //

变量 $t1 - $t12 已填充并正确出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:12:11.807

mod 是[mysql 的保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)。如果要将其用作列名，则必须在 SQL 查询中将其括在反引号 (`) 中

# twitter-bootstrap - 使用 twitter bootstrap，如何让缩略图（如缩略图组件）具有相同的高度？

> ID：12913405
> 
> 赞同：4
> 
> 时间：2012-10-16T11:11:06.067
> 
> 标签：twitter-bootstrap, responsive-design

您可以在这里看到[http://twitter.github.com/bootstrap/components.html#thumbnails](http://twitter.github.com/bootstrap/components.html#thumbnails)在示例中带有标题和描述，如果一个单元格的标题或描述比另一个短得多或长得多，块的整个高度将相应地减少或增加。

如何使这些块具有相同的高度？

我尝试`display: table-row`在`ul`, 和类`display: table-cell`上进行设置`.thumbnail`，但不幸的是，这完全破坏了布局的响应能力：块内的图像高度和宽度不再自动调整大小。

更新：在 jsfiddle [http://jsfiddle.net/kwBuW/7/上设置问题的演示](http://jsfiddle.net/kwBuW/7/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:32:34.113

也许您可以修复具有缩略图类的高度 div。喜欢：

```
<div class="thumbnail" style="height: 400px;"> 
```

如果您希望每个内容都具有相同的高度，我认为您必须编写一个 JavaScript 来修复它，当然，在 DOM 准备好之后。喜欢：

```
var max = 0, jThumbnails = $("ul.gallery div.thumbnail");
jThumbnails .each(function(index, elt){
    max = Math.max(max, $(elt).height());
});
jThumbnails.setHeight(max); 
```

# nsstring - 核心图形从后台线程绘制 NSString

> ID：12913410
> 
> 赞同：0
> 
> 时间：2012-10-16T11:11:33.373
> 
> 标签：nsstring, core-graphics

我使用此代码使用队列中的核心图形在 UILabel（我已经对其进行了子类化）上绘制 NSString，但屏幕上没有显示任何内容。我没有错误。

我从队列中调用这样的函数。

```
[label1 createtext];

-(void)createtext
{          
    UIFont *font=[UIFont fontWithName:@"Times New Roman" size:15.0];
    //Core Text (Create Attributed String)

    NSMutableArray *Text=[globaltextarray Text];
    CGSize size=[[Text objectAtIndex:0] sizeWithFont:font];

    if (UIGraphicsBeginImageContextWithOptions != NULL)
        UIGraphicsBeginImageContextWithOptions(size,NO,0.0);
    else
        // iOS is < 4.0
        UIGraphicsBeginImageContext(size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();

    if (ctx != NULL)
        NSLog(@"not null context");
    UIColor *textColor = [UIColor blackColor];
    CGColorRef color = textColor.CGColor;

    CTFontRef font = CTFontCreateWithName((CFStringRef) @"TimesNewRomanPSMT", 15.0, NULL);

    CTTextAlignment theAlignment = kCTLeftTextAlignment;

    CFIndex theNumberOfSettings = 1;
    CTParagraphStyleSetting theSettings[1] = {
        { kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment),
            &theAlignment }
    };

    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(theSettings, theNumberOfSettings);

    NSDictionary *attributesDict = [NSDictionary dictionaryWithObjectsAndKeys:(id)font, (NSString *)kCTFontAttributeName,color, (NSString *)kCTForegroundColorAttributeName,paragraphStyle, (NSString *) kCTParagraphStyleAttributeName,nil];

    NSAttributedString *stringToDraw = [[NSAttributedString alloc] initWithString:[NSString stringWithCString:[[Text objectAtIndex:indexpath1.row] cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding] attributes:attributesDict];

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)stringToDraw);

    //Prepare our view for drawing

    CGContextSetTextMatrix(ctx, CGAffineTransformIdentity);
    CGContextTranslateCTM(ctx, 0, ([self bounds]).size.height );
    CGContextScaleCTM(ctx, 1.0, -1.0);

    //Create Frame
    CGMutablePathRef path = CGPathCreateMutable();
    CGRect rect  = self.frame;
    CGPathAddRect(path, NULL, rect);

    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);

    //Draw Frame
    CTFrameDraw(frame, ctx);

    UIGraphicsEndImageContext();
    //Release all retained objects
    CFRelease(framesetter);
    CFRelease(path);
    [stringToDraw release];
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T03:49:14.167

您正在创建一个临时图形上下文，将其绘制到其中，然后将其丢弃。你永远不会告诉 UIKit 在屏幕上放任何东西。

*您还*需要：

*   从该上下文的内容创建图像，使用[`UIGraphicsGetImageFromCurrentImageContext`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894-CH3-SW31)
*   在主线程上，将该图像放入视图中，或将图像绘制到另一个视图中

例如：

```
// In your class's declaration, define an image view to show your drawing.
// Make sure that this view is created (either as part of a storyboard/nib, or with explicit code)
@property (nonatomic) UIImageView *imageView;

- (void)createText
{
    CGSize size = /* you decide */;
    UIGraphicsBeginImageContext(size);

    // draw into the graphics context
    // after you're done:

    UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    dispatch_async(dispatch_get_main_queue(), ^{
        self.imageView.image = image;
    });
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-29T03:11:00.953

您不是在使用 CoreGraphics 框架进行绘制，而是在使用 UIKit 进行绘制，而这在后台线程中是不允许的。您只能从主线程调用 UIKit 方法。例如，您正在调用 UIGraphicsBeginImageContext() 但这是 UIKit 的一部分。无论如何，您不太可能从在后台线程中渲染小部件代码中获得任何好处，除非您正在执行一些真正断开连接的离线渲染（例如创建 PDF 或其他东西），那么您应该只在主线程中渲染您的小部件。

# exit - 如何退出我的 Dart (vm) 程序？

> ID：12913411
> 
> 赞同：3
> 
> 时间：2012-10-16T11:11:36.390
> 
> 标签：exit, dart, error-code

（对不起，我知道这主要是重复约翰埃文的问题，但之前的答案现在必须过时了。）

`exitCode`如果发生某种情况（仅用于调试目的），我希望能够指定并离开 my (vm) 程序。

请注意，我不能，并且在 API 的上下文中`import 'dart:builtin'`找不到提及。`exit()`

（我更详细的情况是我的工作涉及相当大量的详细输出，当我测试和调试东西时，我发现只`exit();`使用程序最方便 - 显然只适用于开发期间。）

谢谢，

_G

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:53:47.343

只需使用[`exit()`](http://api.dartlang.org/docs/continuous/dart_io.html#exit)：

```
import 'dart:io';

void main() {
  exit(0); // Standard out code, 0 = no errors.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:22:57.420

进一步的搜索表明，所需的支持现在在“io”库中，所以这对我有用：

（没有特定于错误代码的内容会在控制台上打印出来，但这没关系。）

# 进口（'飞镖：io'）；

主要的（） {

```
print("just before the exit command...");

exit(99);

print("We should not see this") 
```

}

# android - 如何更改 Mode.Clear 的默认颜色？

> ID：12913416
> 
> 赞同：2
> 
> 时间：2012-10-16T11:11:41.570
> 
> 标签：android, android-layout, bitmap

我想更改 Mode.Clear 的默认颜色。在我的应用程序中，我使用了一种擦除方法，其中清除选项首先留下一条黑线，然后我清除图像。我想根据我的背景使用不同的颜色来代替它。这是我的代码...

**擦除方法：**

```
public void erase(View v)

{
    //mPaint=new Paint();
   //mPaint.setAlpha(0);

//mPaint.setColor(Color.WHITE);
   //mPaint.setARGB(0, 255, 255, 255);
    mPaint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));
    //mPaint.setAntiAlias(true);
       //mBitmap.eraseColor(Color.TRANSPARENT);
      // mPaint.setStrokeWidth(45);
    // mPaint.setXfermode(new PorterDuffXfermode(PorterD

//uff.Mode.CLEAR));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:37:37.717

没有直接的解决方案。我有一个解决方法：

1.  在“移动”事件期间，正常显示路径，并将绘制的 Xfermode 设置为 null。
2.  在“修饰”事件期间，在画布上绘图之前，将绘图的 Xfermode 设置为清除。
3.  绘制后将绘制的 Xfermode 设置为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T20:06:42.980

嘿，我使用了一种技巧来删除黑线。在我的擦除按钮中，我将颜色设置为白色，而不是使用 XferMode..

```
if(erase){
paintColor = Color.parseColor(newColor);
drawPaint.setColor(paintColor);
} 
```

# javascript - 通过循环添加不同的分类

> ID：12913420
> 
> 赞同：1
> 
> 时间：2012-10-16T11:11:57.610
> 
> 标签：javascript, jquery

我有许多`li`元素，我需要一个类到第 1、第 4 和第 7、第 2、第 5 和第 8、第 3、第 6 和第 9。

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:14:33.400

这个应该做...

```
var classes = ["first_group", "second_group", "third_group"];

$("li").addClass(function(i) {
    return classes[i % 3];
});​
​ 
```

[js小提琴](http://jsfiddle.net/ynz3J/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:14:41.663

您可以使用[`:nth-child()`](http://api.jquery.com/nth-child-selector/)选择器：

```
$("li:nth-child(3n+1)").addClass("one");
$("li:nth-child(3n+2)").addClass("two");
$("li:nth-child(3n+3)").addClass("three"); 
```

**演示：http:** [//jsfiddle.net/vDTWn/](http://jsfiddle.net/vDTWn/)

# ftp - 文件未通过 Aptana 3 上传

> ID：12913422
> 
> 赞同：1
> 
> 时间：2012-10-16T11:12:06.997
> 
> 标签：ftp, aptana

我是 Aptana 3 的新手。我最近从使用 FTP (Filezilla) 和文本编辑器切换，只是为了加快文件编辑过程。

我主要在共享 Godaddy 托管帐户上处理 Wordpress 网站，并且在将我通过 Aptana 编辑的文件上传到我的实时网站时遇到了一些问题。

即我在“main.css”文件中编辑了几行。我将它保存在 Aptana 的“项目资源管理器”窗口中，设置好我的 FTP 连接并使其正常工作，然后单击“上传”图标。我刷新浏览器并没有任何改变，我可以看到网站仍在使用旧的 css。我也尝试过“同步”我的文件并点击“发布”按钮，但这也不起作用？

我也尝试在新的远程连接选项卡中编辑文件，但也没有乐趣。

我一直在寻找 Aptana 的部署或文件同步指南的简单演练，并观看了一些视频教程，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:59:49.530

在浏览器中按住`Control`+`F5`几秒钟。您可能只是在浏览器中运行 CSS 的缓存版本。那应该修剪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T17:07:00.313

我有同样的问题。我发现我必须做的是初始同步，我知道你提到你这样做了，但可能是它没有完全同步，因为它并不总是清楚 Aptana 同步发生了什么。

我做了什么：

1.  确保您的项目中有一个连接，并且它指向您要与之同步的服务器位置
2.  选择远程选项卡并右键单击所选连接中的文件，选择文件传输...
3.  这将打开同步窗口并启动比较，这对我来说是混乱的地方，如果文件夹结构不同，它会建议创建和删除大量文件。我发现我正在取消选择项目以确保安全，但这意味着它没有正确同步。确保您从同一根级别同步，然后让它进行完全同步，这似乎注册或记录了本地和远程文件之间的链接。
4.  运行同步。完成后，您现在可以使用上传图标从项目选项卡成功上传单个文件（在成功同步之前，这将不起作用 - 即使它看起来正在上传）。

希望这可以帮助。

# php - xPath，获取表格数据

> ID：12913429
> 
> 赞同：0
> 
> 时间：2012-10-16T11:12:24.690
> 
> 标签：php, xpath, domxpath

我有一个这样的 HTML：

```
<table>
  <tr>
     <th>Name</th>
     <th>Email</th>
     <th>Age</th>
  </tr>
  <tr>
     <td>Joe Bloggs</td>
     <td>joe@bloggs.com</td>
     <td>40</td>
  </tr>
  <tr>
     <td>John Doe</td>
     <td>john@doe.com</td>
     <td>40</td>
  </tr>
 </table> 
```

有没有办法使用 xPath 来获取前 2 列，即`Name`和`Email`字段？

我可以使用`$data = $xpath->query( '//table');`不确定如何仅获取前 2 列来获取表数据。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:14:29.047

获取前两个`td`：

```
//table/tr/td[position() <= 2] 
```

# windows - 多线程应用程序的 Windows 驱动程序

> ID：12913435
> 
> 赞同：0
> 
> 时间：2012-10-16T11:12:48.113
> 
> 标签：windows, driver, wdk

开发 Windows 驱动程序并为多线程应用程序提供 dll 以调用驱动程序功能。

```
pDriverObject -> MajorFunction[IRP_MJ_CREATE] = XXX_Create. 
```

如何处理调用 CreateFile 的多个线程？如何处理来自多个应用程序对 XXX_create 的调用？同样，我提供的其他接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:22:41.223

您不必做任何特定的事情来*创建*多个线程。Windows 内核是多线程的，将分配一个工作线程来处理每个 IRP 并在驱动程序中调用适当的函数。

但是，您必须确保您的函数是线程安全的。

# image - fo 图像对齐标题

> ID：12913441
> 
> 赞同：2
> 
> 时间：2012-10-16T11:13:04.710
> 
> 标签：image, alignment, xsl-fo, text-alignment

我想在**XSL-FO**中的图像下方打印带有标题的图像。标题应该有正确的对齐方式。

我正在为此使用表格。它打印带有标题的图像，但问题是与标题相比标题的对齐方式。如果图像的对齐方式是“正确的”，那么一切看起来都很好：标题就在右侧图像的下方。但如果图像位于中心或左侧，则仍位于页面的最右侧。

问题是表格是页面的全宽，但图像更小。如果表格的宽度和对齐方式与图像的宽度和对齐方式相对应，则可以解决此问题。

将非常感谢帮助解决此问题。

问候， rnv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:40:06.923

您可能希望确保表格没有占据页面的整个宽度，而只是它需要的宽度。这样，表格将与图像一样宽，并且您的标题将向右对齐，整齐地位于图像下方。

但是，现在您希望您的图像位于页面的中心。解决方案可能是将表格放在另一个表格中，并让这个外部表格占据页面的整个宽度。A`fo:block`也可以解决问题。

# iphone - iOS 动画启动画面

> ID：12913444
> 
> 赞同：14
> 
> 时间：2012-10-16T11:13:11.527
> 
> 标签：iphone, objective-c, ios, splash-screen, dynamic-splash-screen

是否可以在 iOS 开发中添加 .fla 文件作为启动画面？如果不是，闪屏接受哪些其他格式的动画文件？它接受动画 GIF 吗？或 .swf 文件？还是我必须逐帧编写动画。

如果是这样，程序是什么？我是否必须像添加图像一样添加它，只是扩展名不同？

我有一个 .fla 文件，我想将它添加到我的代码中。不幸的是，我找不到任何关于这是否可行的材料。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-16T13:47:56.983

似乎这里的人不知道启动画面和启动图像之间的区别。启动图像是静态的，您可以使用 xcode 配置它们并且无法更改它们。

但是在启动画面中，你可以做任何你喜欢的事情，它只是一个视图控制器，你可以在其中显示动画、视频或任何其他内容。您在启动图像之后和“登陆页面”之前显示 splass 屏幕。然后，在启动画面中，您可以逐帧创建动画，或者`MPMoviePlayerController`如 Krumelur 所说，将 .mp4 视频加载到文件中。

使用动画启动画面的人，通常会使用启动画面的颜色（动画第一帧的颜色或视频的颜色），所以看起来启动画面是启动画面的一部分。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T11:20:58.807

创建动画启动画面相对容易。您需要创建一个兼容的 .mp4 文件并将此影片的第一帧用作启动图像。然后实例化一个`MPMoviePlayerController`应用程序启动以全屏播放电影。电影将在启动图像显示后片刻开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:25:04.177

看起来不可能。您可能想看看以下 [动态启动画面](https://stackoverflow.com/questions/1959080/dynamic-default-png-splashscreen-in-3-0-iphone-sdk)

您必须逐帧编写动画。

[启动屏幕动画动画的](http://www.weston-fl.com/blog/?p=2134)另一个指南 启动屏幕上的动画

因此，您必须显示启动画面，然后您可以在视图中添加任何动画或添加任何电影（例如：.mov）

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T11:21:46.323

iOS 启动画面是静态的。所以它只是一个图像。但是您可以添加启动画面，然后在启动画面消失后添加电影（.mov 或其他 Apple 格式）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T11:16:01.200

您无法在 iOS 上显示 .fla 文件。在 iOS 中不允许 Flash 作为内容。此外，启动画面只能是静态图形。

# jaxb - JAXB 无法为 XBRL 生成 Java 类

> ID：12913445
> 
> 赞同：9
> 
> 时间：2012-10-16T11:13:12.070
> 
> 标签：jaxb, maven-jaxb2-plugin, xbrl, jaxb2-maven-plugin, cxf-xjc-plugin

我正在尝试为 XBRL 中定义的类型生成 Java 类。

我的构建过程基于 Maven 2，这是我的试验。我只粘贴`build`依赖于一些属性的部分：

`package`是我的目标包的名称

`catalog`是目录的路径和文件名。因为我没有互联网连接，我有很多条目，但我认为这些总是必要的

```
-- TR9401 for XBRL resources --
SYSTEM http://www.xbrl.org/2003/XLink http/www.xbrl.org/2003/xl-2003-12-31.xsd
SYSTEM http://www.w3.org/1999/xlink http/www.xbrl.org/2003/xlink-2003-12-31.xsd 
```

`xsd.path`是 XSD 所在的目录

`xsd.file`是以下极简XSD的文件名

```
 <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
       <xs:import namespace="http://www.xbrl.org/2003/instance"
        schemaLocation="http://www.xbrl.org/2003/xbrl-instance-2003-12-31.xsd"/>
     </xs:schema> 
```

我尝试过的所有插件都无法导入`xl:nonEmptyURI`。

但是`xl`映射到`http://www.xbrl.org/2003/XLink`（在我的目录中）哪个导入 `<import namespace="http://www.w3.org/1999/xlink" schemaLocation="xlink-2003-12-31.xsd"/>`定义 `nonEmptyURI`

怎么了？我该如何解决？

# 阿帕奇 CXF

```
 <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-xjc-plugin</artifactId>
            <executions>
                <execution>
                    <id>generate-sources</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>xsdtojava</goal>
                    </goals>
                    <configuration>
                        <xsdOptions>
                            <xsdOption>
                                <catalog>${catalog}</catalog>
                                <xsd>${xsd.path}/${xsd.file}</xsd>
                                <packagename>${package}</packagename>
                            </xsdOption>
                        </xsdOptions>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

失败

```
parsing a schema...

[ERROR] src-resolve: Cannot resolve the name 'xl:nonEmptyURI' to a(n) 'type definition' component.
  line 389 of cache/http/www.xbrl.org/2003/xbrl-linkbase-2003-12-31.xsd 
```

# jvnet maven-jaxb2-插件

```
 <plugin>
            <!-- http://jaxb.java.net/ -->
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <version>0.8.2</version>
            <executions>
                <execution>
                    <id>generate</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <catalog>${catalog}</catalog>
                <schemaDirectory>${xsd.path}</schemaDirectory>
                <generatePackage>${package}</generatePackage>
                <strict>false</strict>
                <extension>true</extension>
                <plugins>
                    <plugin>
                        <groupId>org.jvnet.jaxb2_commons</groupId>
                        <artifactId>jaxb2-basics</artifactId>
                        <version>0.6.4</version>
                    </plugin>
                    <plugin>
                        <groupId>org.jvnet.jaxb2_commons</groupId>
                        <artifactId>jaxb2-basics-annotate</artifactId>
                        <version>0.6.4</version>
                    </plugin>
                </plugins>
                <args>
                    <arg>-Xannotate</arg>
                    <arg>-XtoString</arg>
                </args>
            </configuration>
        </plugin> 
```

错误是一样的，稍微详细一点

```
[INFO] Parsing input schema(s)...
[ERROR] Error while parsing schema(s).Location [ cache/http/www.xbrl.org/2003/xbrl-linkbase-2003-12-31.xsd{389,74}].
org.xml.sax.SAXParseException: undefined simple type 'xl:nonEmptyURI'
    at com.sun.xml.xsom.impl.parser.ParserContext$1.reportError(ParserContext.java:180)
    at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.reportError(NGCCRuntimeEx.java:175)
    at com.sun.xml.xsom.impl.parser.DelayedRef.resolve(DelayedRef.java:110)
[...]
[ERROR] Error while parsing schema(s).Location [ cache/http/www.xbrl.org/2003/xbrl-linkbase-2003-12-31.xsd{412,77}].
org.xml.sax.SAXParseException: undefined simple type 'xl:nonEmptyURI'
    at com.sun.xml.xsom.impl.parser.ParserContext$1.reportError(ParserContext.java:180)
    at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.reportError(NGCCRuntimeEx.java:175)
    at com.sun.xml.xsom.impl.parser.DelayedRef.resolve(DelayedRef.java:110)
[ERROR] Failed to execute goal org.jvnet.jaxb2.maven2:maven-jaxb2-plugin:0.8.2:generate (generate) on project solvency2: Unable to parse input schema(s). Error messages should have been provided. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jvnet.jaxb2.maven2:maven-jaxb2-plugin:0.8.2:generate (generate) on project solvency2: Unable to parse input schema(s). Error messages should have been provided. 
```

# Mojo jaxb2-maven-plugin

```
 <plugin>
            <!--http://mojo.codehaus.org/ -->
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>1.5</version>
            <executions>
                <execution>
                    <id>xjc</id>
                     <phase>generate-sources</phase>
                    <goals>
                        <goal>xjc</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <schemaDirectory>${xsd.path}</schemaDirectory>
                <packageName>${package}</packageName>
                <catalog>${catalog}</catalog>
            </configuration>
        </plugin> 
```

同样的错误，Xerces 说的不同

```
[ERROR] file:[...]cache/http/www.xbrl.org/2003/xbrl-linkbase-2003-12-31.xsd[472,74]
org.xml.sax.SAXParseException: src-resolve: Cannot resolve the name 'xl:nonEmptyURI' to a(n) 'simpleType definition' component.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:53:50.010

在您的情况下，您肯定需要下载所有模式并将其添加到目录中。我在生成 Java 类时遇到了类似的问题，但我根本没有使用任何目录，只是将 XBRL 使用的所有模式放入同一个文件夹中。它们在 XBRL 网站上的组织方式相同：

```
src\main\resources\xbrl\
                       xbrl-instance-2003-12-31.xsd
                       xbrl-linkbase-2003-12-31.xsd
                       xl-2003-12-31.xsd
                       xlink-2003-12-31.xsd
                       xbrl_bindings.xjb 
```

我还添加了一个 JAXB 绑定，如您所见，以解决在源生成期间引发的冲突并将其放入同一文件夹中。

xbrl_bindings.xjb：

```
<bindings xmlns="http://java.sun.com/xml/ns/jaxb"
          xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
          version="2.1">
         <bindings schemaLocation="xl-2003-12-31.xsd" version="1.0">
           <bindings node="//xs:schema//xs:element[@name='title']">
             <property name="xlTitle"/>
         </bindings>
</bindings> 
```

Maven插件配置：

```
 <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-xjc-plugin</artifactId>
            <version>2.6.1</version>
            <executions>
                <execution>
                    <id>generate-sources</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>xsdtojava</goal>
                    </goals>
                    <configuration>
                        <sourceRoot>${basedir}/target/generated/src/main/java</sourceRoot>
                        <xsdOptions>
                            <xsdOption>
                                <bindingFile>${path.to.xsd}/xbrl_bindings.xjb</bindingFile>
                                <xsd>${path.to.xsd}/xbrl-instance-2003-12-31.xsd</xsd>
                            </xsdOption>
                        </xsdOptions>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

享受 XBRL :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T13:58:51.500

在您的目录中，您可能需要将 SYSTEM 更改为 PUBLIC。

另见：[这篇文章](http://java.dzone.com/articles/jaxb-xjc-imported-schemas-and)

根据这篇文章，PUBLIC 用于匹配命名空间 URI：

```
-- Match address.xsd by URL --
SYSTEM "http://www.example.com/address/address.xsd" "imports/address.xsd"

-- Match phone-number.xsd by namespace URI --
PUBLIC "http://www.example.com/phone-number" "imports/phone-number.xsd" 
```

您是否下载了 XSD 并将其放在导入文件夹中？

# performance - 从包含键值对的字符串有效地创建数据框

> ID：12913446
> 
> 赞同：12
> 
> 时间：2012-10-16T11:13:15.800
> 
> 标签：performance, algorithm, r

我想请您就 R 中的特定编码问题提供效率建议。我有一个以下样式的字符串向量：

```
[1] "HGVSc=ENST00000495576.1:n.820-1G>A;INTRON=1/1;CANONICAL=YES"
[2] "DISTANCE=2179"                                              
[3] "HGVSc=ENST00000466430.1:n.911C>T;EXON=4/4;CANONICAL=YES"    
[4] "DISTANCE=27;CANONICAL=YES;common" 
```

在向量的每个元素中，单个条目用 a 分隔，`;`并且大多数单个条目的格式为`KEY=VALUE`. 但是，也有一些条目只有格式`KEY`（参见 [4] 中的“common”）。在此示例中，有 15 个不同的键，并且并非每个键都出现在向量的每个元素中。15个不同的键是：

```
names <- c('ENSP','HGVS','DOMAINS','EXON','INTRON', 'HGVSp', 'HGVSc','CANONICAL','GMAF','DISTANCE', 'HGNC', 'CCDS', 'SIFT', 'PolyPhen', 'common') 
```

从这个向量我想创建一个看起来像这样的数据框：

```
ENSP HGVS DOMAINS EXON INTRON HGVSp                        HGVSc CANONICAL
1    -    -       -    -    1/1     - ENST00000495576.1:n.820-1G>A       YES
2    -    -       -    -      -     -                            -         -
3    -    -       -  4/4      -     -   ENST00000466430.1:n.911C>T       YES
4    -    -       -    -      -     -                            -       YES
GMAF DISTANCE HGNC CCDS SIFT PolyPhen common
1    -        -    -    -    -        -      -
2    -     2179    -    -    -        -      -
3    -        -    -    -    -        -      -
4    -       27    -    -    -        -    YES 
```

我写了这个函数来解决这个问题：

```
unlist.info <- function(names, column){
  info.mat <- matrix(rep('-', length(column)*length(names)), nrow=length(column), ncol=length(names), dimnames=list(c(), names))
  info.mat <- as.data.frame(info.mat, stringsAsFactors=F)

  for (i in 1:length(column)){
    info <- unlist(strsplit(column[i], "\\;"))
    for (e in info){
      e <- unlist(strsplit(e, "\\="))
      j <- which(names == e[1])
      if (length(e) > 1){
        # KEY=VALUE. The value might contain a = as well
        value <- paste(e[2:length(e)], collapse='=')
        info.mat[i,j] <- value
      }else{
        # only KEY
        info.mat[i,j] <- 'YES'
      }
    }
  }
  return(info.mat)
} 
```

然后我打电话：

```
mat <- unlist.info(names, vector) 
```

尽管这有效，但它确实很慢。此外，我正在处理超过 100.000 个条目的向量。现在我意识到循环在 R 中是不优雅和低效的，并且我熟悉将函数应用于数据帧的概念。但是，由于向量的每个条目都包含不同的子集`KEY=VALUE`或`KEY`条目，因此我无法提出更有效的函数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T11:38:42.547

干得好：

重新创建数据：

```
x <- c(
  "HGVSc=ENST00000495576.1:n.820-1G>A;INTRON=1//1;CANONICAL=YES",
  "DISTANCE=2179",
  "HGVSc=ENST00000466430.1:n.911C>T;EXON=4//4;CANONICAL=YES",
  "DISTANCE=27;CANONICAL=YES;common"
) 
```

使用您想要的名称创建一个命名向量。这用于稍后的快速查找：

```
names <- setNames(1:15, c('ENSP','HGVS','DOMAINS','EXON','INTRON', 'HGVSp', 'HGVSc','CANONICAL','GMAF','DISTANCE', 'HGNC', 'CCDS', 'SIFT', 'PolyPhen', 'common')) 
```

创建一个辅助函数，将每个变量分配到矩阵中的正确位置。然后使用`lapply`和`strsplit`：

```
assign <- function(x, names){
  xx <- sapply(x, function(i)if(length(i)==2L) i else c(i, "YES"))
  z <- rep(NA, length(names))
  z[names[xx[1, ]]] <- xx[2, ]
  z
}

sx <- lapply(strsplit(x, ";"), strsplit, "=")
ret <- t(sapply(sx, assign, names))
colnames(ret) <- names(names)
ret 
```

结果：

```
 ENSP HGVS DOMAINS EXON   INTRON HGVSp HGVSc                          CANONICAL GMAF DISTANCE HGNC
[1,] NA   NA   NA      NA     "1//1" NA    "ENST00000495576.1:n.820-1G>A" "YES"     NA   NA       NA  
[2,] NA   NA   NA      NA     NA     NA    NA                             NA        NA   "2179"   NA  
[3,] NA   NA   NA      "4//4" NA     NA    "ENST00000466430.1:n.911C>T"   "YES"     NA   NA       NA  
[4,] NA   NA   NA      NA     NA     NA    NA                             "YES"     NA   "27"     NA  
     CCDS SIFT PolyPhen common
[1,] NA   NA   NA       NA    
[2,] NA   NA   NA       NA    
[3,] NA   NA   NA       NA    
[4,] NA   NA   NA       "YES" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T21:07:50.790

这是利用原始配对的另一种更快的解决方案...

```
##                   test elapsed replications relative average
## 2    thell_solution(x)    0.37         1000    1.000 0.00037
## 3   andrie_solution(x)    1.04         1000    2.811 0.00104
## 1 original_solution(x)    2.61         1000    7.054 0.00261 
```

由于pairing[1] 总是被分配pairing[2]，除了最后一个布尔值（……我不明白为什么在原始字符串向量中对一个标志的处理方式不同……）我们可以利用序列和向量这一事实当名称没有值时将分配 NA （即： x[5] == NA ），我们也不需要多次调用名称。而且由于 strsplit 使用正则表达式，我们可以进行交替。

```
# Let `x` be as @Andrie made it in his answer.  Let `names` be as you had
# in the original question.

# A pre-built dummy record and empty list.
na.record <- setNames(rep(NA, time = length(names)), names)
y <- list()

do.call(rbind, lapply(strsplit(x, "(;|=)"), FUN = function(x) {
    x_seq <- seq.int(to = length(x), by = 2)
    y[x[x_seq]] <- x[x_seq + 1]
    y[is.na(y)] <- "YES"
    na.record[x[x_seq]] <- y
    na.record
}))

##      ENSP HGVS DOMAINS EXON   INTRON HGVSp HGVSc                         
## [1,] NA   NA   NA      NA     "1//1" NA    "ENST00000495576.1:n.820-1G>A"
## [2,] NA   NA   NA      NA     NA     NA    NA                            
## [3,] NA   NA   NA      "4//4" NA     NA    "ENST00000466430.1:n.911C>T"  
## [4,] NA   NA   NA      NA     NA     NA    NA                            
##      CANONICAL GMAF DISTANCE HGNC CCDS SIFT PolyPhen common
## [1,] "YES"     NA   NA       NA   NA   NA   NA       NA    
## [2,] NA        NA   "2179"   NA   NA   NA   NA       NA    
## [3,] "YES"     NA   NA       NA   NA   NA   NA       NA    
## [4,] "YES"     NA   "27"     NA   NA   NA   NA       "YES" 
```

# xcode - XCode合并了一个项目，但找不到资源

> ID：12913447
> 
> 赞同：2
> 
> 时间：2012-10-16T11:13:18.480
> 
> 标签：xcode

我有一个项目，前段时间合并了 mapbox-ios-sdk。Mapbox-ios-sdk 已经发生了一些变化，但我也将一些代码侵入其中。所以我尝试将 Mapbox-ios-sdk 从原点合并到我的分支中，经过一番努力，它终于编译好了。但是，我遇到了这个错误：

`2012-10-16 19:09:26.466 OfflineSpotty[81420:11f03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Unable to find LoadingTile.png (copy from framework 'Resources' folder)'`

图像已正确添加到左窗格中。为什么找不到它？

编辑：

它失败的行是：`RMRequireAsset(@"LoadingTile.png")`

我看到它实际上在 NSAssert 上失败了：

`#define RMRequireAsset(asset) NSAssert([[NSBundle mainBundle] pathForResource:[asset stringByReplacingOccurrencesOfString:[@"." stringByAppendingString:[asset pathExtension]] withString:@""] ofType:[asset pathExtension]], @"Unable to find %@ (copy from framework 'Resources' folder)", asset);`

更完整的信息

` *** 断言失败 -[RMLoadingTileView initWithFrame:], /Users/t2wu/Documents/Xcode_projects/Open_source/mapbox-ios-sdk/MapView/Map/RMLoadingTileView.m:24 2012-10-16 20:24:58.456 OfflineSpotty[ 17713:11f03] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法找到 LoadingTile.png（从框架“资源”文件夹复制）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:33:26.610

我遇到了同样的问题，终于找到了解决方案。

在 mapbox ios sdk 项目中有一个名为 MapBox.bundle 的文件，如下图所示： ![地图视图项目](../Images/5601f3e4412a6e96bbfc245258ad71ba.png)

我所要做的就是在我的主要项目目标中添加 MapBox.bundle（我只是使用拖放）（我猜你必须将它添加到 OfflineSpotty 目标）。

![Mapbox 捆绑目标](../Images/1601d0b712dbb86d2b5b30974df1eab1.png)

之后，项目构建并运行正常。

# javascript - 在 ASP.NET Visual Basic 中运行 JavaScript

> ID：12913448
> 
> 赞同：-3
> 
> 时间：2012-10-16T11:13:21.507
> 
> 标签：javascript, jquery, asp.net, vb.net, html

我有一个带有 jQ​​uery 和 JavaScript 的 web 应用程序，我想扩展 webapp 以便它可以做更多事情，但是我想要的功能在 ASP.net VB 中得到支持，

但是，我不知道 JavaScript 是否可以在 vb 之后运行。

基本上我希望网络应用程序按以下顺序运行：

1.  用户输入 URL 地址，然后

2.  ASP.net VB 将在`<script runat="server"></script>`

3.  初始化过程完成后，JavaScript 将运行在

`<script type="text/javascript"></script>`

有没有办法发生这种情况？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:22:49.607

这正是默认情况下服务器/客户端设置的工作方式。

ASP.NET（和其他服务器端语言）实际上只是预处理器。根据客户端发送的请求（例如查询字符串或表单值），服务器端将执行一些任务（例如保存到数据库），更改一些 HTML 输出（例如个性化样式），并返回*纯 HTML*页面回到浏览器。

**编辑**：为了清楚起见，VB 在服务器上执行，javascript 在返回客户端后执行。如果您愿意，您可以在 VB 中执行 javascript，但通常是 1\. 不必要的，2\. 效率低下，3\. 不会产生预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:17:29.887

您应该首先了解一下[服务器端和客户端](http://forums.asp.net/t/1368916.aspx/1)之间的区别。基本上，VB 或 C#（无论您选择使用哪个）在*服务器端*运行，而 JavaScript 在*客户端*（例如在浏览器内部）运行。

所以你想要的基本上是正确的做事方式：

1.  该页面在服务器端创建并发送到客户端。
2.  [客户端的浏览器可以在OnLoad](http://www.w3schools.com/jsref/event_body_onload.asp)函数上运行 javascript 。

**注意：**我建议还阅读有关[JQuery的内容](http://jquery.com/)

# c++ - _mm_extract_epi8(...) 以非文字整数作为参数的内在函数

> ID：12913451
> 
> 赞同：3
> 
> 时间：2012-10-16T11:13:32.473
> 
> 标签：c++, sse, intrinsics

我最近一直在使用 SSE 内在函数`int _mm_extract_epi8 (__m128i src, const int ndx)`，根据参考“从索引选择的压缩整数数组元素中提取一个整数字节”。这正是我想要的。

但是，我通过 a `_mm_cmpestri`on a确定索引，该索引对`_m128i`具有显式长度的字符串数据执行打包比较并生成索引。该索引的范围是 0..16，其中 0..15 表示有效索引，16 表示未找到索引。现在要在索引位置提取整数，我想执行以下操作：

```
const int index = _mm_cmpestri(...);
if (index >= 0 && index < 16) {
  int intAtIndex = _mm_extract_epi8(..., index);
} 
```

这给我们留下了 gcc (-O0) 编译器错误：

错误：选择器必须是 0..15 范围内的整数常量

解决此问题的一个讨厌的方法是`switch`在索引上设置一个并`_mm_extract_epi8`调用 0..15 范围内的每个索引。我的问题是是否有我看不到的更好/更好的方式。

更新：用-O3优化，没有编译错误；虽然仍然有 -O0 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:24:03.220

只是为了总结和结束这个问题。

我们讨论了 3 个选项来提取 [0..15] 中索引 i 处的字节，`_m128i sse`其中 i 在编译时无法简化为文字：

1) 开关 & `_mm_extract_epi8`: 在 [0..15] 中的每个 i 都有一个`switch`over i 和一个 case `_mm_extract_epi8(sse,i)`；像我现在一样工作是编译时文字。

2) Union hack：有一个`union SSE128i { __m128i sse; char[16] array; }`，将其初始化为`SSE128i sse = { _mm_loadu_si128(...) }`并使用 访问索引 i 处的字节`sse.array[i]`。

3) 将第 i 个元素打乱到位置 0 和`_mm_extract_epi8`：用于`_mm_shuffle_epi8(sse,_mm_set1_epi8(i))`将第 i 个元素打乱到位置 0；提取它`_mm_extract_epi8(sse,0)`。

评估：我在 Intel Sandy Bridge 和 AMD Bulldozer 架构上对三个选项进行了基准测试。切换选项以微弱优势获胜。如果有人感兴趣，我可以发布更详细的数字和基准设置。

**更新：评估** 基准设置：解析 1GB 文件的每个字节。对于某些特殊字节，增加一个计数器。用于`_mm_cmpistri`查找特殊字节的索引；然后使用提到的三种方法之一“提取”字节，并区分计数器增加的情况。代码是使用 GCC 4.6 和`-std=c++0x -O3 -march=native`.

对于每种方法，基准测试在 Sandy Bridge 机器上运行 25 次。结果（以秒为单位的运行时间的平均值和标准偏差）：

切换提取：平均值：1071.45 标准差：2.72006

Union hack：平均值：1078.61 标准差：2.87131

从位置 0 混洗和提取：平均值：1079.32 标准偏差：2.69808

差异是微不足道的。我还没有机会查看生成的 asm。不过，看到差异可能会很有趣。目前我无法发布基准测试的完整代码，因为它包含非公开来源。如果我有时间，我会提取这些并发​​布来源。

# java - 如何在 Selenium 中处理具有“UnexpectedAlertBehaviour”功能的警报？

> ID：12913453
> 
> 赞同：5
> 
> 时间：2012-10-16T11:13:38.437
> 
> 标签：java, selenium

在 selenium 框架 2.25 中，我看到我们有 UnexpectedAlertBehaviour 枚举类型，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T12:00:02.517

我在您的问题上找到了这部分文档：这对其他人也可能有用：

v2.25.0

=======

网络驱动程序：

*   添加了处理 BASIC 和 DIGEST 身份验证的 API

    对话框。目前未在任何驱动程序中实现。

*   警告用户 IE 驱动程序将不再使用 DLL

    下一个版本。

*   不推荐使用浏览器特定的 WebElement 子类。

*   向远程 webdrivers 添加了对“requiredCapabilities”的支持

    并在 Firefox 中实现了对这些的基本支持

    司机。未能满足所需的能力将导致

    SessionNotCreatedException 被抛出。

*   **添加了确定应如何处理未处理警报的能力。这由“unexpectedAlertBehaviour”功能处理，它可以是“accept”、“dismiss”或“ignore”之一。Java 代码应使用 UnexpectedAlertBehaviour 枚举。这目前仅在 Firefox 中实现。**

*   允许在 Firefox 中配置本机事件和

    （实验性地）在 IE 中使用“nativeEvents”功能。

*   将受支持的 Firefox 版本更新到 17。

......

[此处](https://groups.google.com/forum/#!msg/webdriver/RJ31baCFTfk/Ng-Lxw2yv1gJ)提供的完整列表

这里是[来源](http://code.google.com/p/selenium/source/browse/trunk/java/client/src/org/openqa/selenium/UnexpectedAlertBehaviour.java?r=17237)

```
package org.openqa.selenium;

    public enum UnexpectedAlertBehaviour {

      ACCEPT ("accept"),
      DISMISS ("dismiss"),
      IGNORE ("ignore")
      ;

      private String text;

      private UnexpectedAlertBehaviour(String text) {
        this.text = text;
      }

      @Override
      public String toString() {
        return String.valueOf(text);
      }

      public static UnexpectedAlertBehaviour fromString(String text) {
        if (text != null) {
          for (UnexpectedAlertBehaviour b : UnexpectedAlertBehaviour.values()) {
            if (text.equalsIgnoreCase(b.text)) {
              return b;
            }
          }
        }
        return null;
      }
    } 
```

正如我所看到的，您使用 unexpectedAlertBehaviour 来确定警报是否未处理，如果是，您将决定如何处理它。

我想它应该类似于（我的假设）：

```
try{
alert.accept();
}

catch(org.openqa.selenium.UnexpectedAlertBehaviour){
///...blablabla
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T06:02:10.103

它是一个 CapabilityType，因此您必须在创建驱动程序时传递的 DesiredCapabilities 中表示它。在 Python 中，我使用以下代码将此行为添加到我的 FireFox 驱动程序中：

```
 selenium.webdriver.DesiredCapabilities.FIREFOX["unexpectedAlertBehaviour"] = "accept" 
```

我还没有测试过这个 Java，但理论上它应该可以工作：

```
DesiredCapabilities cap = new DesiredCapabailities();
cap.setPreference(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, 
   org.openqa.selenium.UnexpectedAlertBehaviour.ACCEPT);
WebDriver driver = new FirefoxDriver(cap); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-09T12:23:52.073

要管理您可能遇到的任何错误，您只需使用`Exception NAMEERROR`这样的尝试/块：

```
from selenium.common.exceptions import UnexpectedAlertBehaviour
from selenium.common.exceptions import UnexpectedAlertPresentException
try:
  var = driver.some_function()
  return True
except UnexpectedAlertBehaviour:
  print "We have raised the UnexpectedAlertBehaviour"
  return False
except UnexpectedAlertPresentException:
  print "UnexpectedAlertPresentException"
  return False 
```

我知道这段代码不是用 Java 编写的，但基础是一样的。尝试/捕获异常名称。[您可以在我的 alerts() 处理帖子中看到](https://stackoverflow.com/questions/17576148/webdriver-error-no-alert-is-present-after-unexpectedalertpresentexception-is/30725963#30725963)一个示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-13T16:40:57.367

如果您将 Selenium 与 NodeJS 一起使用，那么您可以使用`options.setAlertBehavior(UserPromptHandler.ACCEPT)`.

完整示例（打字稿）：

```
 import { Builder } from 'selenium-webdriver';
import { Options } from 'selenium-webdriver/chrome';
import { UserPromptHandler } from 'selenium-webdriver/lib/capabilities';

(async () => {
    let options = new Options()
    options.addArguments(`--user-data-dir=./profile`)
    options.addArguments(`--no-sandbox`)
    options.windowSize({ width: 1280, height: 720 })
    options.setAlertBehavior(UserPromptHandler.ACCEPT)
    let driver = await new Builder().forBrowser('chrome').setChromeOptions(options).build();
})() 
```

您无需查找与**DesiredCapabilities**或**Capabilities**相关的任何内容，您可以使用变量填充该值`options`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-19T06:07:41.997

尝试这样做：

```
DesiredCapabilities ff = DesiredCapabilities.firefox();
ff.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR  UnexpectedAlertBehaviour.ACCEPT); 
```

# c++ - STL 或 Boost 中的 QStringList 替代方案

> ID：12913458
> 
> 赞同：1
> 
> 时间：2012-10-16T11:13:58.823
> 
> 标签：c++, string, boost, stl

在 Boost 或 STL 中是否有任何替代 QStringList 的方法。我想要实现的是拆分路径，例如。dvb://1.2.3.4/launchpad/dyn/index.htm 来分隔字符串，因为它可以通过简单地在 QString 列表中完成：

```
QStringList path = objectPath.split(QChar('/'), QString::SkipEmptyParts); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:16:06.997

[`boost::split`](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo/usage.html#id3240174)`std::vector<std::string>`可以基于一个或多个分隔符将字符串拆分为 a ：

```
#include <vector>
#include <string>
#include <boost/algorithm/string.hpp>
#include <boost/algorithm/string/split.hpp>

std::vector<std::string> path_parts;
std::string s("some/file/path");
boost::split(path_parts, s, boost::is_any_of("/")); 
```

# c# - 在同一方法中抛出和捕获异常

> ID：12913463
> 
> 赞同：1
> 
> 时间：2012-10-16T11:14:08.923
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

在我写入数据库的方法中，我处理错误，如下面的代码所示。在`catch (DbUpdateException ex)`我想重新抛出异常并在最后一个`catch (Exception ex)`.

这可能吗？怎么做？下面的代码不会这样做。

```
 using (Entities context = new Entities())
        {
            try
            {
                context.Office.Add(office);
                retVal = context.SaveChanges();
            }
            catch (DbUpdateException ex)
            {
                SqlException innerException = ex.GetBaseException() as SqlException;
                if (innerException != null && innerException.Number == (int)SQLErrorCode.DUPLICATE_UNIQUE_CONSTRAINT)
                {
                    throw
                        new Exception("Error ocurred");
                }
                //This is momenty where exception is thrown.
                else
                {
                    throw ex;
                }
            }
            catch (Exception ex)
            {
                throw
                    new Exception("Error");
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T11:17:18.780

以下会更好：

```
context.Office.Add(office);
retVal = context.SaveChanges(); 
```

让除了冒泡。如果您要做的只是重新投掷，则无需抓住东西。

注意：`throw ex;`将重置堆栈跟踪 - 您希望`throw;`正常执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:21:44.470

如果您想从其他捕获中捕获异​​常，则它们不能处于同一级别。

您当前的代码具有以下结构：

```
try
{
}
catch (...)
{
}
catch (...)
{
} 
```

您需要将其更改为：

```
try
{

    try
    {
    }
    catch (...)
    { 
       // throw X
    }                
}
catch (...)
{
   // catch X here
} 
```

但是如果你真的想要/需要这个，你应该仔细考虑。它看起来不像是一种高效的错误处理模式。

并查看[此答案](https://stackoverflow.com/a/4553119/60761)以了解（重新）抛出异常及其后果的 4 种不同方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:19:36.093

你试过嵌套你的`try...catch`块吗？

```
using (Entities context = new Entities())
    {
        try
        {
            try
            {
                context.Office.Add(office);
                retVal = context.SaveChanges();
            }
            catch (DbUpdateException ex)
            {
                SqlException innerException = ex.GetBaseException() as SqlException;
                if (innerException != null && innerException.Number == (int)SQLErrorCode.DUPLICATE_UNIQUE_CONSTRAINT)
                {
                    throw new Exception("Error ocurred");
                }
                //This is momenty where exception is thrown.
                else
                {
                    throw ex;
                }
            }
        }
        catch (Exception ex)
        {
            throw new Exception("Error");
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T11:19:23.600

[try-catch](http://msdn.microsoft.com/en-us/library/vstudio/0yd65esw.aspx)**只**处理一个catch 块，并按顺序对其进行评估。因此，如果您**确实**需要此功能，则需要在 try-catch 中放置一个 try-catch，如下所示：

```
using (Entities context = new Entities()) 
{ 
    try
    {
        try 
        { 
            context.Office.Add(office); 
            retVal = context.SaveChanges(); 
        } 
        catch (DbUpdateException ex) 
        { 
            SqlException innerException = ex.GetBaseException() as SqlException; 
            if (innerException != null && innerException.Number == (int)SQLErrorCode.DUPLICATE_UNIQUE_CONSTRAINT) 
            { 
                throw 
                    new Exception("Error ocurred"); 
            } 
            //This is momenty where exception is thrown. 
            else 
            { 
                throw ex; 
            } 
        } 
    }
    catch (Exception ex) 
    { 
        throw 
            new Exception("Error"); 
    } 

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T11:18:23.533

尝试这个：

```
void YourMethod()
{
using (Entities context = new Entities())
        {
            try
            {
                context.Office.Add(office);
                retVal = context.SaveChanges();
            }
            catch (DbUpdateException ex)
            {
                SqlException innerException = ex.GetBaseException() as SqlException;
                if (innerException != null && innerException.Number == (int)SQLErrorCode.DUPLICATE_UNIQUE_CONSTRAINT)
                {
                    throw
                        new Exception("Error ocurred");
                }
                //This is momenty where exception is thrown.
                else
                {
                    throw ex;
                }
            }
        }
} 
```

然后当你调用你的方法时，用 try catch 块括起来

```
try
{
     YourMethod()
}
catch (Exception ex)
{
     throw
         new Exception("Error");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T11:30:57.887

当您计划按照“paul”的描述嵌套您的 try-catch-block 时，请注意异常类型：

```
using (Entities context = new Entities())      
{          
  try
  {
      try
      {
          context.Office.Add(office);
          retVal = context.SaveChanges();
      }
      catch (DbUpdateException ex)
      {
          SqlException innerException = ex.GetBaseException() as SqlException;
          if (innerException != null && innerException.Number == (int)SQLErrorCode.DUPLICATE_UNIQUE_CONSTRAINT)
          {
              // this exception will be catched too in outer try-catch block <--------
              throw new Exception("Error ocurred");
          }
          //This is momenty where exception is thrown.
          else
          {
              throw ex;
          }
      }
  }
  // Catch (DbUpdateException  ex) if you plan to have the rethrown exception to be catched <------------
  catch (Exception ex)
  {
      throw new Exception("Error");
  } 
```

}

# sql-server-2008 - 添加到累积文件中

> ID：12913474
> 
> 赞同：0
> 
> 时间：2012-10-16T11:14:37.107
> 
> 标签：sql-server-2008

我有一个包含 291170 条记录的累积文件。在我需要添加到累积文件的新表中，有一些帐号已经在累积文件中，还有一些是新帐户。

我要做的就是将（delqsep12，queuesep12）上的这些变量合并到那里的那些帐户，但将最初存在的所有变量添加到那里已经没有的帐号，它们将只是空白。

所以累积文件（cummu12）有

```
account_number, netpayjun, netpayjul, netpayaug , delqsep12, queuesep12 
```

我要合并的添加文件只有

```
delqsep12, queuesep12 
```

所以最后我应该有 295519 行，新的 account_numbers 已经添加，那些已经用新变量更新了。此外，这些新变量可能包含旧帐户的某些内容，但有些可能为空。

# powershell - 通过powershell在文件夹中查找非重复文件

> ID：12913483
> 
> 赞同：0
> 
> 时间：2012-10-16T11:15:19.030
> 
> 标签：powershell

我有一个文件夹，其中包含文件 a.jpg、b.jpg、c.jpg、d.jpg、e.jpg 等。其中有一个子文件夹，其中包含文件 b.jpg、c.jpg、d.jpg。

使用 powershell 我想要非重复文件 ieajpg、c.jpg 并将它们移动到其他位置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:07:43.673

尝试使用 Compare-Object cmdlet：

```
$parent = Get-ChildItem D:\temp -Filter *.jpg
$child = Get-ChildItem D:\temp\test -Filter *.jpg
Compare-Object $parent $child -Property Name -PassThru | Copy-Item -Destination $Destination 
```

# c# - 在 datagridview 的水晶报表中找不到列

> ID：12913484
> 
> 赞同：0
> 
> 时间：2012-10-16T11:15:20.590
> 
> 标签：c#, datagridview, crystal-reports

我的代码有什么问题？每当我运行它时，我都会收到错误“ResidentID”找不到。但在我的网格视图中有这个列 ResidentID..

```
 var frmReportViewer = new frmReportViewer();
            DataTable dt = new DataTable();
            dt.Columns.Add("No");
            dt.Columns.Add("ResidentID");

            foreach (DataGridViewRow dr in this.dgrAdvancedSearch.Rows)
            {
                dt.Rows.Add(dr.Cells["No"].Value, dr.Cells["ResidentID"].Value);
            }

            CrystalDecisions.CrystalReports.Engine.ReportDocument rptDoc = default(CrystalDecisions.CrystalReports.Engine.ReportDocument);

            rptDoc = new crptAdvancedSearch();
            rptDoc.SetDataSource(dt);

            frmReportViewer.crvAdvancedSearch.ReportSource = rptDoc;
            frmReportViewer.ShowDialog();
            frmReportViewer.Dispose(); 
```

# ruby-on-rails - 我的课程必须包括什么才能使用 content_tag() 方法？

> ID：12913490
> 
> 赞同：1
> 
> 时间：2012-10-16T11:15:36.567
> 
> 标签：ruby-on-rails, haml, actionview

我的 ApplicationHelper 中有一些不错的辅助方法`three_columns`，现在我想将其分离到自己的类中以防止命名冲突。

```
# In my ApplicationHelper I have this:
def three_columns(&block)
  ThreeColumns.new(&block)
end

# And in a separate file:
class ThreeColumns
  include ActionView::Context
  include ActionView::Helpers::TagHelper

  def initialize(&block)
    content_tag(:div, class: :three_columns) do
      capture(self, &block)
    end
  end
end 
```

我想像这样使用它`<%= three_columns { .. } %>`，但我收到了这个错误：

```
undefined method `capture_haml' for #<ThreeColumns:0x007fa5a235a030 @output_buffer=nil> 
```

那么我必须做些什么才能使 HAML 的东西对我的 ThreeColumns 类可用？

谢谢你。

# java - 使用 Maven 加载类

> ID：12913494
> 
> 赞同：0
> 
> 时间：2012-10-16T11:15:56.817
> 
> 标签：java, maven

我想知道是否可以使用 maven 加载类。当我尝试通过 java loadclass() 函数加载类时，它会加载类但无法识别该类所做的各种导入，这很好。但是有吗加载类比通过 java loadclass() 函数更好的方法。谢谢

1.假设有两个类-A类和BI希望A访问B并获取B类中的一些方法名称。但我不想将依赖项添加到类路径中。我希望它通过maven发生。

# text-mining - 如何从损坏的数据集中恢复货币信息？

> ID：12913501
> 
> 赞同：0
> 
> 时间：2012-01-06T23:44:44.843
> 
> 标签：text-mining

这不是我的领域，所以如果这不在此堆栈的范围内，我深表歉意。

我正在清理（用于个人娱乐并进行可视化以与他人分享）调查数据（[下载，9MB](http://s.wordpress.org/resources/survey/wp2011-survey.tar.gz)），这些数据在向公众发布之前经过了一些操作以匿名。

其中一个问题是关于每小时付款率和允许自由形式的文本回答。其中一些答案的字符严重损坏，下图显示了两种最常见的情况：

![在此处输入图像描述](../Images/633cc1a39a360bf5bd295ace77625d4e.png)

我不想放弃这些答案，但我不知道如何将它们恢复到有意义的状态。

1.  要求更好的数据转储——向相关人员询问，但不要抱太大希望。

2.  尝试确定哪些字符以这种方式结束。处理编码总是很麻烦，而且这些看起来不像我以前见过的任何损坏的字符，所以我不知道从哪里开始以及是否有可用的工具来帮助解决这个问题。这甚至可能根本不是有效的字符或货币符号。

3.  尝试将损坏的字符与有效的货币字符匹配。我强烈怀疑两者中的一个可能是€字符，另一个可能是£，因为该调查倾向于英语国家。但是，我能否通过相对于其他答案的字符数量可靠地支持这种猜测？不幸的是，没有提供地理数据，所以我无法匹配国家/地区的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-01-07T13:50:44.063

经证实，这是由于测量软件中的导出错误引起的，字符确实对应于欧元和英镑。

> 正如你所怀疑的那样。
> 
> ![在此处输入图像描述](../Images/34f2cfc30065d86fab44bf3e0232ceb0.png)
> 
> 这是[@Polldaddy](https://twitter.com/#!/Polldaddy)导出到 csv 错误
> 
> *[皮特戴维斯](https://twitter.com/#!/pjadavies/status/155479113770082306)*

# actionscript-3 - AS3 框架脚本立即执行，而不是在指定时执行

> ID：12913512
> 
> 赞同：0
> 
> 时间：2012-10-16T11:17:23.160
> 
> 标签：actionscript-3, flashdevelop, flash-cs6

我有以下代码，它应该在剪辑完成播放后`MovieClip`添加一个帧脚本并将其添加`MovieClip`到要执行的脚本中。然而，下面显示的代码会在`MovieClip`添加后立即触发框架脚本，我不知道为什么。

```
function debugClick(e:MouseEvent) : void
{    
  nextLevAnim = new NextLevelAnim();
  gfx.addChild(nextLevAnim);
  nextLevAnim.addFrameScript(nextLevAnim.totalFrames, NextLevel);
}

function NextLevel() : void
{
  nextLevAnim.addFrameScript(nextLevAnim.totalFrames, null);

  // Actions....
} 
```

我尝试过使用更简单的示例，它工作正常，它`MovieClip`有 21 帧长，我尝试通过`totalFrames`and触发帧脚本`totalFrames - 1`，但没有任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:44:16.530

嗯，我工作`addFrameScript`不多，所以我不知道是什么导致了问题，但你可以尝试使用 hack。

使用 onEnterFrame 侦听器并检查当前帧是否等于帧数 (-1)。这并不理想，但如果你坚持这一点，它可能就可以了。

就目前`addFrameScript`而言，我的猜测是它不起作用，因为 addMovieClip 直到循环的渲染部分才会生效，所以添加的孩子的总帧数仍然为 0。您可以在初始化后添加侦听器`onAddedToStage`或`onAdded`添加 addFrameScript 事件处理程序`MovieClip`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:23:39.407

在这种情况下什么是`totalFrames`可变的？你试过`trace()`吗？我很确定它不包含帧总数的正确值，`nextLevAnim`您可能应该使用它`nextLevAnim.totalFrames`。

# ruby - 您如何处理 Savon 中的嵌套命名空间？

> ID：12913527
> 
> 赞同：2
> 
> 时间：2012-10-16T11:17:53.773
> 
> 标签：ruby, xml, ruby-on-rails-3, soap, savon

如果我有以下 SOAP 请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://test.org/" xmlns:hon="http://schemas.datacontract.org/2004/07/TEST.RVU.Entity">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:Authenticate>
         <!--Optional:-->
         <tem:authenticationDet>
            <!--Optional:-->
            <hon:AccountType>0</hon:AccountType>
            <!--Optional:-->
            <hon:Password>bacon</hon:Password>
            <!--Optional:-->
            <hon:UserName>smith</hon:UserName>
         </tem:authenticationDet>
      </tem:Authenticate>
   </soapenv:Body>
</soapenv:Envelope> 
```

如何使用包含 tem: 和 hon: 命名空间的 Savon gem 写下有效的肥皂请求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:12:13.707

您需要设置额外的命名空间。

脚本可能如下所示：

```
＃！红宝石

需要“savon”

Savon.configure 做 |c|
  c.pretty_print_xml = 真
  c.env_namespace = :soapenv
结尾

客户 = Savon::Client.new 做
  wsdl.namespace = "http://test.org"
  wsdl.endpoint = "http://www.your-real-endpoint.com"
结尾

resp = client.request :tem, 'Authenticate' 做
  soap.namespaces["xmlns:hon"] = "http://schemas.datacontract.org/2004/08/TEST.RVU.Entity"
  soap.body = { "tem:authenticationDet" =>
                { "hon:AccountType" => 0,
                  "hon:密码" => "培根",
                  "hon:用户名" => "史密斯" }
              }
结尾

```

# c# - NHibernate 延迟加载和对象比较

> ID：12913528
> 
> 赞同：3
> 
> 时间：2012-10-16T11:18:00.727
> 
> 标签：c#, nhibernate, lazy-loading

配置了延迟加载后，我遇到了关于对象比较的问题。我在每个域实体类中重写的 Equals 方法包含以下行：

```
if (obj == null || !obj.GetType().Equals(GetType())) 
```

显然，类型比较将失败，因为 obj 是代理实例。我已经看到了一些 NHibernate 片段，它们取消代理对象并返回真实实例。但是当我强制执行域驱动设计时，我不希望在我的域层中有任何特定于 ORM 的代码。我也无法取消代理调用方的实例 [例如 foo.Equals(Unproxy(bar))]，因为调用方是我的应用程序层，它也不包含任何 ORM 特定的代码（所有 NHibernate 依赖项都由 Windsor 注入）。

长话短说：是否有任何通用代码来获取真实实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T11:24:52.443

解决这个问题的方法是做一个演员：

```
public class Person
{
    public int Id { get; set; }

    public override bool Equals(object obj)
    {
        var person = obj as Person;

        if (person == null)
        {
            return false;
        }

        return person.Id == this.Id;
    }
} 
```

演员表有效，因为`proxy`继承自您的班级（例如`PersonProxy : Person`）

null 检查是不必要的，因为如果为 null 或不是可以转换为人的对象，则`as`转换只会返回 null 。`obj`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T12:03:20.647

或者，您可以创建`GetTypeUnproxied`如下所示的方法：[https ://github.com/sharparchitecture/Sharp-Architecture/blob/master/Solutions/SharpArch.Domain/DomainModel/BaseObject.cs](https://github.com/sharparchitecture/Sharp-Architecture/blob/master/Solutions/SharpArch.Domain/DomainModel/BaseObject.cs)

此方法甚至可以与继承映射一起使用，因为它返回代理内部对象的真实类型。

# maven - 在 netbeans 和 glassfish 中部署具有依赖关系的单个 ejb 模块

> ID：12913529
> 
> 赞同：3
> 
> 时间：2012-10-16T11:18:07.327
> 
> 标签：maven, netbeans, glassfish, ejb

在 NB 7.2 中，我有由 maven 管理的 ejb 模块，具有多个依赖项。我尝试在 Glassfish 3.1.2.2 上运行它，但似乎服务器无法解析类路径上的库。我认为部署命令中的参数（“deploy？DEFAULT=...” - 我不确定它是命令）是正确的 - 此命令中有所有库，但在创建 ejb 服务器期间抛出类未找到异常 - 尽管这类在部署命令的库中。

可以在没有企业应用程序的情况下部署具有依赖关系的单个 EJB 模块吗？

谢谢你的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:25:04.153

有几种部署 EJB 的机制。如果 EJB 具有依赖关系并在 Web 应用程序中使用，请检查它是否可以在 EJB lite 配置中使用。将它与 Web 应用程序一起部署在 WAR 文件中是最简单的。有一篇文章[介绍 Java EE 6 平台：第 3 部分](http://www.oracle.com/technetwork/articles/javaee/javaee6overview-part3-139660.html)，其中详细介绍了一些细节。

或者，您可以将其部署为包含依赖项的 EAR 文件的一部分。

如果 EJB 必须用作独立 EJB，则依赖项必须位于服务器类路径中，或者重新打包在 EJB jar 文件中。NetBeans 7.2.1 可以为您做到这一点。

# json - 使用 REST 发送列表/表格数据 JSON 的正确方法是什么？

> ID：12913531
> 
> 赞同：2
> 
> 时间：2012-10-16T11:18:13.770
> 
> 标签：json, api, rest, format

我正在研究 RESTful API。我们的一个屏幕显示了总计的表格。

下面是返回数据的两个 JSON 响应

第一的

```
 [
            {
                    "name": "Richard",
                    "bank_balance": 3000,
                    "assets_worth": 4000,
                    "total": 7000
            },
            {
                    "name": "John",
                    "bank_balance": 1000,
                    "assets_worth": 2000,
                    "total": 3000
            },
            {
                    "name": "Total",
                    "bank_balance":4000,
                    "assets_worth": 6000,
                    "total": 10000
            }    
    ] 
```

第二

```
 {
            "rows": [
                    {
                            "name": "Richard",
                            "bank_balance": 3000,
                            "assets_worth": 4000,
                            "total": 7000
                    },
                    {
                            "name": "John",
                            "bank_balance": 1000,
                            "assets_worth": 2000,
                            "total": 3000
                    }
            ],

            "grand_total": 
            {
                    "name": "Total",
                    "bank_balance":4000,
                    "assets_worth": 6000,
                    "total": 10000
            }    
    } 
```

考虑到 REST 标准，哪一个更正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:20:54.100

REST 只是一种用于设计网络应用程序的架构风格。它不会直接回答您关于数据结构的问题。

就我个人而言，我会采用第一种方法（只是没有总行），因为可以从行数据中轻松计算出总计，结果如下：

```
[
  {
    name: "Richard",
    bank_balance: 3000,
    assets_worth: 4000,
    total: 7000
  },
  {
    name: "John",
    bank_balance: 1000,
    assets_worth: 2000,
    total: 3000
  }
] 
```

我认为这里重要的设计原则是你的 API 不应该对数据表示持固执己见。一些使用您的 API 的应用程序可能会选择以表格格式显示数据，而其他应用程序可能会选择其他一些表示形式。一个好的 API 能够很好地满足不同的应用程序（和用例）。

# php - 如果php中的文件字段为空，我如何提交没有错误的表单？

> ID：12913532
> 
> 赞同：0
> 
> 时间：2012-10-16T11:18:12.803
> 
> 标签：php, html, mysql, sql

我有一个将记录插入表的页面。我遇到了一点麻烦，如果用户决定他不想包含图片，我如何提交没有错误的表单。或者有没有办法设置文件字段以从文件夹中选择默认图像并将其设置为文件条目，如果用户没有选择？

我已经能够解决这个问题。下面是代码：

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ($_FILES['photo'] && $_FILES['photo']['error'] == 0) {

$set['photo'] = "'" . $pix . "'";

$image = @getimagesize($_FILES['photo']['tmp_name']);
$size = ($_FILES["photo"]["size"]<= 512000);
if($image && $size = TRUE)
$pix= $_FILES['photo']['name'];

$kaboom = explode(".", $pix);
$pixExt = end($kaboom);
$photo= rand()."_".time().".".$pixExt; 
$tmpName = $_FILES['photo']['tmp_name']; 

$target = "../events/";

$target = $target . $photo; 
}
move_uploaded_file($tmpName, $target); 

    if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "pd")) {
      $insertSQL = sprintf("INSERT INTO events (title, detail, `date`, photo) VALUES (%s, %s, %s, '$photo')",
                           GetSQLValueString($_POST['title'], "text"),
                           GetSQLValueString($_POST['detail'], "text"),
                           GetSQLValueString($_POST['date'], "text"));

      mysql_select_db($database_connMain, $connMain);
      $Result1 = mysql_query($insertSQL, $connMain) or die(mysql_error());

      $insertGoTo = "confirm.php?user=" . $row_rsadmin['aID'] . "";
      if (isset($_SERVER['QUERY_STRING'])) {
        $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
        $insertGoTo .= $_SERVER['QUERY_STRING'];
      }
      header(sprintf("Location: %s", $insertGoTo));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:51:42.203

如果允许用户在不发送图片的情况下存储数据，那么仅在文件上传成功的情况下进行录制并不是一个好主意。

您应该重组代码，以便仅在上传图像时才进行图像上传，因此所有涉及的代码都`$_FILES['photo']`应该在这样的块内：

```
if ($_FILES['photo'] && $_FILES['photo']['error'] == 0) {
    // upload file here
} 
```

此外，在此块之外处理数据库功能也很重要，因此您必须在文件上传块之外创建一个记录集，并在其中添加与图像相关的值。

```
// [...]
$set = array(
    'title' => "'" . GetSQLValueString($_POST['title'], "text") . "'",
    // and so on ...
    'photo' => "null"
);
if ($_FILES['photo'] &&
    $_FILES['photo']['error'] == 0 &&
    $_FILES['photo']['size'] <= 512000) {
    $kaboom = explode(".", $pix);
    $photo = rand() . "_" . time() . "." . end($kaboom);
    $target = "../events/" . $photo;
    if (move_uploaded_file($_FILES['photo']['tmp_name'], $target)) {
        $set['photo'] = "'" . $photo . "'";
    }
}
// [...]
$insertSQL = sprintf("INSERT INTO events (`%s`) VALUES (%s)",
    implode("`,`", array_keys($set)),
    implode(",", $set));
// [...] 
```

这样，如果用户不上传图片，您就可以处理错误，并且还可以在没有图片的情况下记录数据。

**编辑：**我已经修改了上面的代码以反映插入语句中始终存在照片字段的需要。

**编辑2：**我在这次编辑中完全实现了*文件上传*块，以更接近提问者的实际情况，同时保持它的通用性。

# php - 将行插入远程和本地数据库mysql

> ID：12913540
> 
> 赞同：1
> 
> 时间：2012-10-16T11:18:28.837
> 
> 标签：php, mysql, insert, local

我有一个项目，我试图将几个值同时插入到 2 个数据库中。Database1 在本地，database2 在远程服务器上。我已经尝试过使用此代码，但在使用此代码时似乎无法插入行。对 php/mysql 来说有点新，但我想得到一些帮助来理解为什么这种语法不起作用。

在下面你会发现一块连接和（尝试）插入 DBB 的

```
$local = mysql_connect("localhost", "dbuser", "dbpassword");
$remote = mysql_connect("externalhost", "dbuser", "dbpassword");
$dbase1 = mysql_select_db("dbname", $local) or die(mysql_error());
$dbase2 = mysql_select_db("dbname", $remote) or die(mysql_error());

mysql_query("INSERT INTO table(value1,value2,value3)                             

VALUES('test','test','test')",$dbase1);

mysql_query("INSERT INTO tableExt(value1,value2,value3,value4,value5)                             

VALUES('test','test','test','test','test')",$dbase2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:22:48.513

```
mysql_query("INSERT INTO table(value1,value2,value3) VALUES('test','test','test')",$local); 
```

[http://php.net/mysql_query](http://php.net/mysql_query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:29:20.587

Cpanel 中有一个设置是否允许远程连接。默认情况下它是不活动的。您是否已授予 Cpanel 的许可？

# asp.net - 如何在购物车中添加支付功能

> ID：12913551
> 
> 赞同：0
> 
> 时间：2012-10-16T11:19:20.633
> 
> 标签：asp.net

我在 asp.net 中有电子商务网站。我已经使用 Datalist 添加了购物车，现在我想添加支付功能，购物车功能运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:20:55.250

以下是如何将 PayPal 结帐按钮与 ASP.NET 集成并解决单一表单问题；它还显示了如何获取购物车项目数据（警告：自己的博客文章）：

[将 PayPal 结帐按钮与 ASP.NET 2.0 集成](http://www.codersbarn.com/post/2008/03/27/Integrate-PayPal-Checkout-Button-with-ASPNET-20.aspx)

这也是一个专家参考，展示了如何构建对 PayPal 的请求：

[已发布 PayPal 与 ASP.NET 集成的文章](http://www.west-wind.com/weblog/posts/2004/Sep/02/PayPal-Integration-with-ASPNET-article-posted)

# jquery - NiceScroll 在 AJAX 加载后不起作用

> ID：12913559
> 
> 赞同：6
> 
> 时间：2012-10-16T11:19:54.033
> 
> 标签：jquery, ajax, scroll

我对 Nice Scroll 有疑问。它工作正常，但是当我加载 AJAX 图像时它不起作用。有趣的是，当我调整窗口大小、打开 Firebug 或其他什么时，它开始工作。

我该怎么做才能自动执行此操作？

我试过：

```
setTimeout(function(){
    $("window").trigger('resize');
}, 0); 
```

AJAX加载后的功能，但它不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T18:18:15.693

当 div 上的内容发生变化时，您需要调用 nicescroll resize 方法。

```
$("your-div-name").getNiceScroll().resize() 
```

请记住，如果 img 标签中未设置图像大小，则需要在所有图像完全加载后调用 resize。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T13:00:46.707

除了 InuYaksa 的回答如果您无法访问实现，您可以在内容包装器上实现鼠标悬停功能作为解决方法。

```
// Call resize whenever mouse
$("#scroll-area").mouseover(function() {
  $("#scroll-area").getNiceScroll().resize();
}); 
```

来自：[http ://eureka.ykyuen.info/2013/05/07/jquery-nicescroll-plugin-doesnt-work-for-dynamic-content/](http://eureka.ykyuen.info/2013/05/07/jquery-nicescroll-plugin-doesnt-work-for-dynamic-content/)

**改进的鼠标悬停解决方案**

```
//in the case of scrolling content loaded via AJAX
    $(document).on('mouseover','#scroll-area', function () {
       $(this).getNiceScroll().resize();
    }); 
```

**使用视口/换行**

```
$(document).on('mouseover','#scroll-wrap', function () {

    var widget_wrap=$(this);
    var widget_viewport=$(this).parent();

    widget_viewport.getNiceScroll(widget_wrap).resize();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T10:58:00.600

请您必须使用以下代码来解决您的问题。它适用于 ajax 负载。

```
$("MYSCROLLCONTAINERS").getNiceScroll().remove();
$("div[id^='ascrail']").remove();
jQuery("MYSCROLLCONTAINERS").niceScroll({
                autohidemode:false
            }); 
```

这对我有用。

# oracle - 使用 Oracle 从表选择语句创建 ul 和 li

> ID：12913562
> 
> 赞同：-2
> 
> 时间：2012-10-16T11:20:32.613
> 
> 标签：oracle

我想编写一个查询，通过它我可以遍历表的行，然后我想要一个来自该查询的 HTML 无序列表并将其保存在局部变量中以供进一步使用。

我必须使用光标吗？我可以从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:17:41.537

你可以只使用一个`select`语句：

```
SELECT '<HTML TAG>' || column_name || '</ HTML TAG>' from table_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:46:08.123

我通过谷歌搜索找到了解决方案。

[我在Stack Overflow 帖子](https://stackoverflow.com/questions/5822241/pl-sql-print-out-ref-cursor-returned-by-a-stored-procedure)中看到了解决方案。

我创建了一个类型如下：

```
 TYPE MyRec IS RECORD   (ANSWERCODE VARCHAR2(20),
                        SERIALNO NUMBER,
                        OSCODE varchar2(10),
                        Osname varchar2(150),
                        channel_code varchar2(10),
                        channel_name varchar2(100),
                        answerdescription VARCHAR2(500),
                        question_code VARCHAR2(20),
                        question varchar2(250),
                        STATUS varchar2(20),
                        ANSWERSTATUS varchar2(10),
                        IMAGEPATH varchar2(4000),
                        MODELVIEW varchar2(100),
                        MODEL_VIEW varchar2(10),
                        MAKENAME varchar2(100),
                        MODELNAME varchar2(100));
rec MyRec;
v_refcurosr SYS_REFCURSOR; 
```

然后调用该过程，因为我的过程是一个包含所有这些字段的游标。

```
v_answerstep:='<ol>';
pkg_answer.PROC_GET_ANSWER('QUESTION',V_QUESTIONCODE,V_PROVIDERCODE,Ip_UserID,v_refcurosr) ;
LOOP
      FETCH v_refcurosr INTO rec;
      EXIT WHEN v_refcurosr%NOTFOUND;
      v_answerstep:=v_answerstep||'<li>'|| rec.answerdescription|| '</li>';

END LOOP;
v_answerstep:=v_answerstep||'</ol>'; 
```

# c# - 如何通过allowe null值在NHibernate的hbm配置中设置唯一性

> ID：12913563
> 
> 赞同：2
> 
> 时间：2012-10-16T11:20:35.653
> 
> 标签：c#, nhibernate, nhibernate-mapping, constraints, unique

我有一个通过资产类使用 NHibernate 的项目。此类的 Hbm 配置是：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Domain" namespace="Domain.Entities">
  <class name="Asset" table="Table_Asset" >

    <id name="Id">
      <generator class="native" />
    </id>

    <property name="Code" unique="true"/>

  </class>
</hibernate-mapping> 
```

此类中的代码列是唯一的，但此列的值可能为 Null。所以代码的空值不能第二次插入。`SQL`我通过添加条件更改了相关约束`Where`：

```
CREATE UNIQUE NONCLUSTERED INDEX [IX_Asset_Code] ON [dbo].[Table_Asset] 
(
    [Code] ASC
)
WHERE ([Code] IS NOT NULL) 
```

这个更改解决了我的问题，但我需要一个解决方案来在我的 hbm 配置中设置这种类型的唯一性。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:15:15.980

尝试将 'where' 属性添加到您的 hbm：

```
`<class name="Asset" table="Table_Asset" where="[Code] IS NOT NULL">` 
```

# ios - 将数据传递给根控制器

> ID：12913565
> 
> 赞同：0
> 
> 时间：2012-10-16T11:20:39.960
> 
> 标签：ios, objective-c, uiviewcontroller

我正在开发一个联系人应用程序。我想通过打开这样的新视图来添加联系人：

**RootViewController.m... 它有一个 NSMutableArray 称为联系人**

```
- (IBAction)addContact:(id)sender {

    AddContViewController *cont = [[AddContViewController alloc]init];
    [self.navigationController presentViewController:cont animated:YES completion:nil];

} 
```

然后回来将联系人添加到根视图控制器的数组中：

**添加ContViewController.m**

```
- (IBAction)acceptAction:(id)sender {

    if ([[firstName text] length] < 1 && [[lastName text] length] < 1)
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Oh no!" message:@"Invalid contact information!" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
    else{ 
```

// 创建联系人并将其放入根视图控制器的数组中

```
 Contact *cont = [[Contact alloc]initWithFirstName:[firstName text] lastName:[lastName text] andDOB:[dobPicker date]]; 
```

**// 现在我不知道该怎么办....**

```
 [self dismissViewControllerAnimated:YES completion:^{
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Success!" message:@"Contact added successfully!" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
        }];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:31:49.637

您应该使用**委托**将新的 Contact 对象**传**回您的 RootViewController。

定义协议

```
@protocol AddContDelegate
   -(void)didAddnewContact:(Contact *)contact;
@end 
```

在您的 AddContViewController 上有一个委托属性：

```
@property (nonatomic, assign) id<AddContDelegate> delegate; 
```

在您的 addContact: 方法中分配委托：

```
- (IBAction)addContact:(id)sender {

    AddContViewController *cont = [[AddContViewController alloc]init];
    cont.delegate = self;
    [self.navigationController presentViewController:cont animated:YES completion:nil];

} 
```

在 RootViewController 中实现委托方法：

```
-(void)didAddnewContact:(Contact *)contact {
   [contacts addObject:contact];
} 
```

从 AddContViewController 调用委托：

```
- (IBAction)acceptAction:(id)sender {

    if ([[firstName text] length] < 1 && [[lastName text] length] < 1)
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Oh no!" message:@"Invalid contact information!" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
    else{

   Contact *cont = [[Contact alloc]initWithFirstName:[firstName text] lastName:[lastName text] andDOB:[dobPicker date]];

    if([self.delegate respondsToSelector:@selector(didAddnewContact:)]) {
        [self.delegate didAddnewContact:cont];
    }

    [self dismissViewControllerAnimated:YES completion:^{
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Success!" message:@"Contact added successfully!" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
        }];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:44:26.413

有几种方法可以传回数据。我建议设置一个委托方法。在任何导入后将其添加到 AddContViewController.h 的顶部：

```
@class addContViewController
@protocol addContViewControllerDelegate <NSObject>
-(void)addContViewController:(addContViewController *)controller didAddContact:(Contact *)contact;
@end 
```

在接口部分之后添加

```
@property (nonatomic, weak) id <addContViewControllerDelegate> delegate; 
```

然后在您的 RootViewController.h 中将协议添加到接口行`<addContViewControllerDelegate>`
现在在您的`RootViewController.m`方法中`addContact`，在您推送新视图之前，添加：

```
cont.delegate = self; 
```

现在在您`AddContViewController.m`而不是关闭视图中，调用：

```
[self.delegate addContViewController:self didAddContact:cont]; 
```

这将在您的 RootViewController 中调用一个新方法，它将传递联系人，在这里您可以根据需要对其进行操作，但首先关闭视图：

```
-(void)addContViewController:(addContViewController *)controller didAddContact:(Contact *)contact {
self dismissViewControllerAnimated:YES;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:46:07.017

您可能希望为此操作使用委托，以便您可以与 rootviewcontroller 通信以获取联系人对象。

使用navigationViewController 的堆栈可以实现相同`[navigationViewController viewControllers]`的目的，并且最后一个对象的类型是您的类的类型，您可以执行根的某些选择器并`AddContViewController`通过成功消息关闭您的选择器。

希望这会有所帮助！

# javascript - JavaScript：如何绑定方法？

> ID：12913566
> 
> 赞同：1
> 
> 时间：2012-10-16T11:20:41.910
> 
> 标签：javascript, oop

JSFiddle：http: [//jsfiddle.net/M2ALY/3/](http://jsfiddle.net/M2ALY/3/)

我的目标是制作一个我可以使用和分发的模块。因此我不能污染全局命名空间。我正在制作的模块也将在一个网页上多次使用。这就是我选择使用 OOP 的原因，但这带来了一个问题。

我希望我的对象绑定一个在用户单击 DOM 中的元素时运行的函数。在我制作的这个简化示例中，我希望在用户单击段落时弹出一个警告框。例如，在我正在处理的实际项目中，我需要的一件事是：用户单击画布，该函数确定用户单击的位置并将其保存到 this.clientX 和 this.clientY。

而不是做

```
this.bind = function() {
    $("p1").bind('click', function() {
        // code here
    });
} 
```

我想如果我这样做会起作用：

```
this.bind = function() {obj.codeMovedToThisMethod()} 
```

问题是这不是一个好的设计。在“类”中，您不需要知道将由该“类”组成的对象的名称。当我制作“类”的多个对象时，这并没有变得更好......

所以我想我可以做到

```
$("p1").bind('click', function(this) {
        // code here
    });
} 
```

但它不起作用，因为将它发送到函数中并没有像我想象的那样起作用。

我应该如何解决这个问题？这是一个简化的示例问题。（与 JSFiddle 相同。）

```
var test = function() {
    this.alert = function() {
        alert("Hi");
    }

    this.bind = function() {
        $("#p1").bind('click', function() {
            obj.alert();
        });
    }        
}

window.obj = new test();
obj.bind();

// What if I want to do this:

var test2 = function() {
    // Private vars
    this.variable = "This secret is hidden.";

    this.alert = function() {
        alert(this.variable);
    }

    this.bind = function() {
        $("#p2").bind('click', function(this) {
            obj2.alert();
            this.alert();
        });
    }        
}

window.obj2 = new test2();
obj2.bind();​ 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:27:04.283

阅读[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的介绍。由于它是关键字，因此不能将其用作参数名称。

使用任一

```
this.bind = function() {
    var that = this;
    $("#p2").on('click', function(e) {
        that.alert();
        // "this" is the DOM element (event target)
    });
} 
```

或者[`$.proxy`](http://api.jquery.com/jQuery.proxy/)，jQuery 跨浏览器等价于[`bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)函数：

```
this.bind = function() {
    $("#p2").on('click', $.proxy(function(e) {
        this.alert();
    }, this));
} 
```

# php - MAX(FIELD)+1 - 如果为空

> ID：12913567
> 
> 赞同：0
> 
> 时间：2012-10-16T11:20:44.797
> 
> 标签：php, mysql, pdo

对于我的插入之一，我有以下内容：（PDO / MySQL）

`$this->sql = "INSERT INTO tblfixedfare SELECT NULL, MAX(FixedFareID)+1, '1', '$fieldDay' FROM tblfixedfare UNION SELECT NULL, MAX(FixedFareID)+1, '2', '$fieldNight' FROM tblfixedfare"`

如果数据库不为空，则可以正常工作。`MAX(FixedFareID) == 1`如果表是空的，我将如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:23:24.230

```
SELECT NULL, IFNULL(MAX(FixedFareID), 0) + 1 
```

[编辑]

正如@AndreKR 提到的，使用`COALESCE`. 它在数据库之间具有更好的兼容性（在 Oracle 中，IFNULL 被称为 NVL）。此外，COALESCE 允许超过 2 个参数，在这种情况下，它返回第一个不为空的参数。我认为 COALESCE 的可读性较差，可能是因为非英语母语人士（如我）不太了解该术语，其中 IFNULL 是不言自明的。但为了更好的兼容性和更灵活的使用，这是一个小小的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:28:12.970

```
$this->sql = "INSERT INTO tblfixedfare SELECT NULL, IFNULL(MAX(FixedFareID),1)+1, '1', '$fieldDay' FROM tblfixedfare UNION SELECT NULL, IFNULL(MAX(FixedFareID),1)+1, '2', '$fieldNight' FROM tblfixedfare" 
```

# jquery - 显示具有样式的元素 display:none !important (jQuery)

> ID：12913573
> 
> 赞同：4
> 
> 时间：2012-10-16T11:20:57.840
> 
> 标签：jquery, css, show

正如[jQuery 文档中所说 --- .show()](http://api.jquery.com/show/)

> 注意：如果在您的样式中使用**!important**，例如**display: none !important** ，如果您希望 .show() 正常运行，则必须使用 **.css('display', 'block !important')**覆盖样式.

但似乎无法覆盖样式并且无法显示元素。我在这里做错什么了吗？

[jsfiddle](http://jsfiddle.net/FF3mc/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:26:23.020

当你使用它时`attr`它可以工作。jQueries`.css()`两者`.prop()`都不起作用

`attr`在这个从 javascript中删除的小提琴中`!important`，您将看到 CSS 如何`!important`甚至是内联样式。

[你的小提琴](http://jsfiddle.net/FF3mc/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:31:37.840

或者，您可以使用类来执行此操作（因此您的所有 CSS 都在 CSS 文件本身中，而不是由 javascript 直接更改）：http: [//jsfiddle.net/FF3mc/4/](http://jsfiddle.net/FF3mc/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T09:18:23.960

```
$('.classname').attr("style", "display: block !important"); 
```

我们不能在这里使用 .css() 因为它不支持 !important。

# iphone - 如何在Objective-C中一次导入一个类的所有子类？

> ID：12913576
> 
> 赞同：0
> 
> 时间：2012-10-16T11:21:00.710
> 
> 标签：iphone, objective-c

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:31:42.587

你得到的错误是因为 #import cycle 。当两个头文件相互导入时会发生这种情况。您可以使用@class 声明类，然后在实现文件中导入头文件。

# android - 像通知栏一样淡入 EditText？

> ID：12913577
> 
> 赞同：0
> 
> 时间：2012-10-16T11:21:03.070
> 
> 标签：android, android-edittext, uinavigationbar, swipe

我想让一个 EditText 从我的应用程序底部可见，就像通知栏从顶部一样。因此，如果我从底部到顶部滑动一个栏（可以一直显示），我的 EditText 应该如下图所示： ![在此处输入图像描述](../Images/369c0383345c9856f066f8d92d19b2ad.png)

有没有一种简单的方法来编程？或者你知道一个好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:37:21.987

我认为这个库可以帮助你：http: [//jasonfry.co.uk/blog/android-swipeview/](http://jasonfry.co.uk/blog/android-swipeview/)

# android - 在 motorolla 设备中将联系人 ACCOUNT_NAME 和 ACCOUNT_TYPE 作为 Null

> ID：12913578
> 
> 赞同：1
> 
> 时间：2012-10-16T11:21:03.320
> 
> 标签：android, android-contacts, android-contentresolver

我正在尝试获取设备中所有联系人的帐户名称和帐户类型，但对于 motorolla 设备（motorolla argon mini），我得到 ACCOUNT_TYPE 和 ACCOUNT_NAME 为空。

使用的代码 -

```
uri = ContactsContract.Data.CONTENT_URI;

projection = new String[]   {RawContacts.CONTACT_ID,RawContacts.ACCOUNT_NAME,RawContacts.ACCOUNT_TYPE,   StructuredName.GIVEN_NAME,StructuredName.FAMILY_NAME,StructuredName.MIDDLE_NAME , ContactsContract.Data.MIMETYPE};

if(uri!=null)
            {
                mQueryHandler.startQuery(mDbIds[i],
                        null,
                        uri,
                        projection,
                        selection,
                        null,
                        null);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:12:40.717

在原始联系人表中，“ACCOUNT_TYPE”和“ACCOUNT_NAME”在电话联系人的情况下可以为空，在谷歌联系人或 Facebook 等情况下不能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-02T09:01:38.640

在本机联系人应用程序中，您可以拥有来自不同来源的联系人。这些联系人可以是来自您的手机、SIM、谷歌联系人等的联系人。
它的值完全取决于设备制造商（如三星、摩托罗拉、谷歌 Pixel 等`account_type`）`account_name`。例如，在您的情况下，摩托罗拉手机联系人具有`account_type`和`account_name`为 null，而其他 OEM 可能并非如此。

如果您想知道联系人的来源（电话/SIM 联系人除外），您可以使用以下代码遍历所有帐户并获取不同的联系人来源。

```
final SyncAdapterType[] syncs = ContentResolver.getSyncAdapterTypes();
for (SyncAdapterType sync : syncs) {
    Log.d(TAG, "found SyncAdapter: " + sync.accountType);
    if (ContactsContract.AUTHORITY.equals(sync.authority)) {
        Log.d(TAG, "found SyncAdapter that supports contacts: " + sync.accountType);
        // we'll now get a list of all accounts under that accountType:
        Account[] accounts = AccountManager.get(this).getAccountsByType(sync.accountType);
        for (Account account : accounts) {
           Log.d(TAG, account.type + " |  " + account.name);
        }
    }
} 
```

# java - 如何为 onDraw 方法使用 switch case？

> ID：12913581
> 
> 赞同：1
> 
> 时间：2012-10-16T11:21:10.480
> 
> 标签：java, android, switch-statement, ondraw

我正在尝试在一种`onDraw`方法中使用开关盒，以便在按下按钮时更改要绘制的内容。我知道按钮有效并且变量“b1”正在更改，但`onDraw`不会更改要绘制的内容。我试过在代码的不同部分使用 .invalidate() 并且没有改变任何东西。将`onDraw`仅使用程序运行时最初加载的情况。我什至尝试在方法中放置一个 update() 方法`onDraw()`来更改“b1”的值，但它不起作用。

```
public void onDraw(Canvas canvas) {
    canvas.drawColor(Color.BLACK);
    update();

    switch (b1){
        case 0:
            canvas.drawBitmap(offtank, 15, 550, null);
            break;
        case 1:
            for (Sprite sprite : sprites) {
                sprite.onDraw(canvas);
            }
            canvas.drawBitmap(ontank, 15, 550, null);
            break;
    }
} 
```

这可能很简单，但我是一个菜鸟，我完全被难住了，在任何地方都找不到任何关于这个的东西。另外，我尝试使用 if 语句而不是 switch case，但仍然是同样的问题。

# sql - 使 Oracle SQL 优化器相信索引列（尽管非唯一）实际上包含唯一值

> ID：12913587
> 
> 赞同：2
> 
> 时间：2012-10-16T11:21:30.070
> 
> 标签：sql, oracle, optimizer-hints, cost-based-optimizer

我正在编写一个使用带有非`UNIQUE`索引列的视图。但是，在我的观点范围内，我相信该列将仅包含唯一值（由于该`WHERE`子句中施加的条件）。

当有人基于该列（例如`SELECT * FROM MY_VIEW WHERE COLUMN_WITH_NON_UNIQUE_INDEX = 'foo'`）查询视图时，就会出现真正的问题。优化器确信它将接收*许多*行（因为索引在技术上不是`UNIQUE`）。因此，优化器避免在视图中的其他位置使用其他索引以支持全表扫描（不酷）。

有没有办法让优化器相信具有非`UNIQUE`索引的列实际上将包含唯一值？当然，重复值可能会潜入列中，但这将被视为错误，不应导致合法的唯一数据受到影响。

不幸的是，我无法控制有问题的桌子（叹气）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:41:05.383

Oracle 允许您在视图上创建唯一（和主键）约束，这些约束未强制执行，但可为优化器提供正是此类信息

```
ALTER VIEW your_view_name
  ADD CONSTRAINT name_of_constraint UNIQUE( column_with_non_unique_index )
  RELY DISABLE NOVALIDATE; 
```

这将告诉 Oracle，它可以依赖于数据是唯一的这一事实，但它不需要验证约束。但是，优化器将能够使用约束提供的附加元数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:24:55.807

您可以尝试以下方法：

使用 dbms_stats 收集表的统计信息，并将 METHOD_OPT 设置为 FOR ALL COLUMNS SIZE AUTO 使用此设置，Oracle 会自动确定哪些列需要直方图以及每个直方图的桶数（大小）。您还可以手动指定哪些列应该有直方图以及每个直方图的大小。

```
dbms_stats.gather_table_stats(
ownname => 'schemaname' ,
tabname => 'tablename' ,
estimate_percent => 100 ,
method_opt => 'for all indexed columns size auto' ,
 cascade => true); 
```

# jquery - jQuery Ajax：如何等待在主脚本中完成 ajax？

> ID：12913590
> 
> 赞同：0
> 
> 时间：2012-10-16T11:21:43.227
> 
> 标签：jquery, ajax

我有代码：

```
$this.ajaxForm({
    beforeSend: function (form) {
        $('input[name *= "XXX"]').each(function (index) {
            $.GetJSON({
                url: "XXX",
                data: {
                    XXX: $(this).val()
                }
                success: function(json) {
                    if (json.error)
                    {
                    }
                }
            });
        }
        anotheraction();
    }
}); 
```

我想停止执行脚本的下一部分（在循环中或在“另一个动作”之前），直到前一个 Ajax 结束（当然如果是 json.error）。

编辑：我想打破一个循环（当我有 json.error 时）并在 beforeSend 中返回 false

Edit2：理论上 async:false 应该有帮助，但也不起作用。

有可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:23:16.860

如果您想延迟操作直到成功调用服务器，只需将其包含在成功回调中：

```
$.GetJSON({
    url: "XXX",
    data: {
        XXX: $(this).val()
    }
    success: function(json) {
        anotheraction();
        ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:23:38.053

是的，只需使用`return`关键字即可

# java - PostgreSQL + Hibernate + C3P0 = FATAL：抱歉，已经有太多客户端了

> ID：12913593
> 
> 赞同：3
> 
> 时间：2012-10-16T11:21:58.680
> 
> 标签：java, hibernate, postgresql, c3p0

我有以下代码

```
 Configuration config = new Configuration().configure();
    config.buildMappings();
    serviceRegistry = new ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry(); 
    SessionFactory factory = config.buildSessionFactory(serviceRegistry);
    Session hibernateSession = factory.openSession();
    Transaction tx = hibernateSession.beginTransaction();
    ObjectType ot = (ObjectType)hibernateSession.merge(someObj);
    tx.commit();
    return ot; 
```

`hibernate.cfg.xml`包含：

```
<session-factory>

    <property name="connection.url">jdbc:postgresql://127.0.0.1:5432/dbase</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    <property name="connection.driver_class">org.postgresql.Driver</property>

    <property name="connection.username">username</property>
    <property name="connection.password">password</property>

    <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>        
    <property name="hibernate.c3p0.acquire_increment">1</property>
    <property name="hibernate.c3p0.min_size">5</property>
    <property name="hibernate.c3p0.max_size">20</property>
    <property name="hibernate.c3p0.max_statements">50</property>
    <property name="hibernate.c3p0.timeout">300</property>
    <property name="hibernate.c3p0.idle_test_period">3000</property>
    <property name="hibernate.c3p0.acquireRetryAttempts">1</property>
    <property name="hibernate.c3p0.acquireRetryDelay">250</property>

    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.use_sql_comments">true</property>

    <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
    <property name="hibernate.current_session_context_class">thread</property>

    <mapping class="...." />

</session-factory> 
```

几秒钟和一些成功插入后，出现以下异常：

```
org.postgresql.util.PSQLException: FATAL: sorry, too many clients already
    at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:291)
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:108)
    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:125)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:30)
    at org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:22)
    at org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:30)
    at org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:24)
    at org.postgresql.Driver.makeConnection(Driver.java:393)
    at org.postgresql.Driver.connect(Driver.java:267)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:135)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
12:24:19.151 [          Thread-160] WARN                   internal.JdbcServicesImpl - HHH000342: Could not obtain connection to query metadata : Connections could not be acquired from the underlying database!
12:24:19.151 [          Thread-160] INFO                             dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
12:24:19.151 [          Thread-160] INFO                  internal.LobCreatorBuilder - HHH000422: Disabling contextual LOB creation as connection was null
12:24:19.151 [          Thread-160] INFO        internal.TransactionFactoryInitiator - HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
12:24:19.151 [          Thread-160] INFO               ast.ASTQueryTranslatorFactory - HHH000397: Using ASTQueryTranslatorFactory
12:24:19.151 [          Thread-160] INFO                        hbm2ddl.SchemaUpdate - HHH000228: Running hbm2ddl schema update
12:24:19.151 [          Thread-160] INFO                        hbm2ddl.SchemaUpdate - HHH000102: Fetching database metadata
12:24:19.211 [Runner$PoolThread-#0] WARN              resourcepool.BasicResourcePool - com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@ee4084 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (1). Last acquisition attempt exception: 
org.postgresql.util.PSQLException: FATAL: sorry, too many clients already
    at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:291) 
```

似乎休眠并没有实现连接。但是因为被调用而`hibernateSession.close()`导致异常。`Session is closed``tx.commit()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:06:31.323

我不太确定这里发生了什么，但我建议您不要将 hibernate.c3p0.acquireRetryAttempts 设置为 1。首先，这会使您的下一个设置 hibernate.c3p0.acquireRetryDelay 无关紧要——它设置了之间的时间长度重试尝试，但如果只有一次尝试（好吧，参数名称具有误导性，它设置了尝试的总数），则没有重试。您设置的效果只是让池在客户端进入时尝试获取连接，然后在失败时立即向客户端抛出异常。它根本不限制池将尝试获取的连接数（除非您将 breakOnAcquireFailure 设置为 true，在这种情况下，根据您的设置，任何未能获取连接都会使整个池无效）。

我同意 sol 对您缺乏可靠的资源清理的担忧。如果在您的设置下， commit() 表示 close() （并且您不允许显式调用 close？这似乎很糟糕），那么应该在 finally 块中提交（但在 finally 块中提交也似乎很糟糕，有时你不想提交）。无论关闭/提交有什么问题，使用您拥有的代码，openSession 和提交之间的偶尔异常都会导致连接泄漏。

但这不应该是您的太多打开连接问题的原因。如果您泄漏连接，您会发现连接池最终会冻结（因为 maxPoolSize Connectiosn 由于泄漏而被永远检出）。您只有 25 个打开的连接。其他事情正在发生。尝试查看您的日志。是否以某种方式初始化了多个连接池？（c3p0 在池初始化时在 INFO 级别转储配置信息，因此如果打开了多个池，您应该会看到多条消息。或者，您可以通过 JMX 检查正在运行的 c3p0 池，以查看是否/为什么打开了超过 25 个连接。 )

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:41:26.277

我找到了 c3p0 以这种方式表现的原因。问题很简单......这部分代码：

```
Configuration config = new Configuration().configure();
config.buildMappings();
serviceRegistry = new ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry(); 
SessionFactory factory = config.buildSessionFactory(serviceRegistry); 
```

被执行了多次。谢谢史蒂夫的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:01:39.883

我建议你使用 `try-catch-finally` 块，

请 `finally` 关闭会话

IE

```
try {           
        tx.commit();
    } catch (HibernateException e) {
        handleException(e);
    } finally {
        hibernateSession.close();
    } 
```

而且， postgresql.conf
中的 `max_connections` 属性默认为 100。如果需要，请增加它。

# node.js - 谷歌浏览器扩展中远程节点服务器上的socket.io

> ID：12913594
> 
> 赞同：1
> 
> 时间：2012-10-16T11:22:00.147
> 
> 标签：node.js, google-chrome-extension, socket.io

我正在开发 chrome 扩展，我正在尝试通过 socket.io（在我的后台脚本中）连接到我的节点服务器，但我无法在我的服务器上加载 socket.io.js ......我明白了A ：

> 拒绝加载脚本“http://myhost:8080/socket.io/socket.io.js”，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

于是我开始在网上搜索，我有点卡住了。甚至有可能做这样的事情吗？如果没有，我怎么能与我的服务器通信？请，非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:53:51.263

是的，这是可能的。您只需要在 manifest.json 中指定一些指令：

```
"content_security_policy": "default-src 'none'; script-src 'self'" 
```

# php - mysql - 搜索结果 - 多个表

> ID：12913595
> 
> 赞同：1
> 
> 时间：2012-10-16T11:22:03.580
> 
> 标签：php, mysql

我想编写一个查询来搜索多个表（新闻、文章、项目、文件）

在搜索时我发现了这个

```
SELECT title, post FROM news WHERE MATCH (title,post) AGAINST ('press'); 
```

我对其进行了测试并且它正在工作，但我未能将其扩展到多个表。

如何编写一个查询返回多个表的搜索结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:28:44.473

这是一种方法。我不确定 Match 是做什么的，但在哪里你也可以使用 Match 功能

```
Select Table1.Title, Table2.Post FROM Table1, Table2 WHERE Table1.Title = 'press' AND Table2.Title = 'press' 
```

此查询将为您提供 2 个表的标题和帖子，这两个表都包含新闻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:32:16.487

一种方法是使用[`union`](http://dev.mysql.com/doc/refman/5.0/en/union.html)：

```
SELECT title, post FROM news WHERE MATCH (title,post) AGAINST ('press')
UNION
SELECT title, post FROM articles WHERE MATCH (title,post) AGAINST ('press')
UNION
SELECT title, post FROM projects WHERE MATCH (title,post) AGAINST ('press')
UNION
SELECT title, post FROM files WHERE MATCH (title,post) AGAINST ('press') 
```

这现在基本上变成了一个伪表，所有记录都合并到一个数据集中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:46:52.387

看看这个查询，你可以这样使用 -

```
SELECT *
FROM news t1, articles t2, projects t3, files t4 WHERE MATCH ( t1.title, t1.post)
AGAINST ('press')  or Match(t2.title,t2.post) AGAINST('press') 
```

并在 MATCH() 函数中设置要搜索的所有列。

你可以试试这个，它可能对你有帮助。

# c++ - 将字符串和 int 添加到字符串

> ID：12913596
> 
> 赞同：0
> 
> 时间：2012-10-16T11:22:05.267
> 
> 标签：c++, string, int

> **可能重复：**
> [将 int 附加到 std::string](https://stackoverflow.com/questions/10516196/append-an-int-to-a-stdstring)

我想将字符串和 int 添加到我的字符串中。

在我的 LocationData::toString() 方法中，我试图将一堆东西一起添加到我的字符串**str**中。

它添加了第一个输入，它是一个字符串 sunType，它添加了第二个输入，一个整数。编译没有问题，但是当我运行我的代码时，输​​出是

**太阳类型：sunNo 地球之类的行星：**

它应该是

**太阳类型：**

**没有像地球一样的行星：**

那么我的代码有问题吗？我没有显示我的整个代码，因为它有些冗长。希望有人能回答我谢谢！

```
#include <iostream>
#include <string>

using namespace std;

class LocationData
{   
    private:
    string sunType;
    int noOfEarthLikePlanets;
    int noOfEarthLikeMoons;
    float aveParticulateDensity;
    float avePlasmaDensity;
    public:
    string toString();

};

string LocationData::toString()
{
    string str = "Sun Type: " + getSunType();
    str += "\nNo Of Earth Like Planets: " + getNoOfEarthLikePlanets();
    //str += "\nNo Of Earth Like Moons: " + getNoOfEarthLikeMoons();
    //str += "\nAve Particulate Density: " + getAveParticulateDensity();
    //str += "\nAve Plasma Density: " + getAvePlasmaDensity();
    return str;
}

int main()
{

    cout<<test.toString()<<endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:27:25.553

您正在向字符指针添加一个整数，该指针使指针前进所述数字。用于`std::stringstream`执行此操作，而不是进行各种转换。像这样的东西：

```
std::stringstream ss;
ss << "Sun Type: " << getSunType() << "\nNo Of Earth Like Planets: "<<getNoOfEarthLikePlanets();
std::string s = ss.str(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:32:10.193

使用[stringstream](http://en.cppreference.com/w/cpp/io/basic_stringstream)的 MWE ：

```
#include <sstream>
#include <iostream>
using namespace std;

int main(){
    stringstream ss;
    int i=40;
    ss<<"Hi ";
    ss<<i;
    ss<<"bye";
    cout<<ss.str()<<endl;
} 
```

正如预期的那样，输出“Hi 40bye”。

另请参阅[此问题](https://stackoverflow.com/questions/654991/good-tutorial-for-stringstream-manipulation-in-c)。

# ruby-on-rails - Ruby on Rails：如果出现错误标志，则页面不包含用户输入的数据

> ID：12913598
> 
> 赞同：0
> 
> 时间：2012-10-16T11:22:07.027
> 
> 标签：ruby-on-rails, ruby, database, model, controller

我有一个允许用户将项目输入数据库的应用程序。

他们可以选择通过文本框为某个字段输入新数据，也可以通过下拉菜单选择之前为该字段输入的数据。

如果用户填写表单，然后单击提交，但出现问题，比如他们错过了其中一个字段，页面会标记一个错误，说明缺少哪些字段，这很好。

但是，如果用户在文本框中输入了新数据，则会将其删除，并选择下拉列表中的第一个选项。

**这是我的项目控制器：**

```
class ProjectsController < ApplicationController

before_filter :authenticate_user!
#:except => [:show, :index]

    def index
        @projects = Project.all

respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @projects }
    end
  end

  # GET /projects/1
  # GET /projects/1.json
  def show
    @project = Project.find(params[:id])
        @project_project_id = params[:id]

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/new
  # GET /projects/new.json
  def new
    @project = Project.new
        @technol = Technol.new(params[:tech])

        @all_technols = Technol.all
        tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

        @project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/1/edit
  def edit
    @project = Project.find(params[:id])
        @project_technol = @project.projecttechnols.build

puts @project.inspect
puts @project.technols.inspect
  end

  # POST /projects
  # POST /projects.json
  def create    
    @project = Project.new(params[:project])
        @project.client = params[:new_client] unless params[:new_client].blank?
        @project.role = params[:new_role] unless params[:new_role].blank?
        @project.industry = params[:new_industry] unless params[:new_industry].blank?
        @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

if !params[:technols].nil?

            params[:technols][:id].each do |tech|

                if !tech.empty?

                    @project_technol = @project.projecttechnols.build(:technol_id => tech) 

                end
            end

end

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /projects/1
  # PUT /projects/1.json
  # PUT /projects/1
  # PUT /projects/1.json
  def update

    @project = Project.find(params[:id])

puts @project.inspect
puts @project.technols.inspect
        @project.client = params[:new_client] unless params[:new_client].blank?
        @project.role = params[:new_role] unless params[:new_role].blank?
        @project.industry = params[:new_industry] unless params[:new_industry].blank?
        @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /projects/1
  # DELETE /projects/1.json
  def destroy
    @project = Project.find(params[:id])
    @project.destroy

    respond_to do |format|
      format.html { redirect_to projects_url }
      format.json { head :no_content }
    end
  end

private

  helper_method :sort_column, :sort_direction
  def sort_column
    Project.column_names.include?(params[:sort]) ? params[:sort] : "project_name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end

    def per_page
      params[:per_page] ||= 1
    end
    def page 
      params[:page] ||= 1
   end
end 
```

**这是我的一些新项目视图**

```
<%= stylesheet_link_tag "new" %>

<h1>Create New Project</h1>
<HTML>

<%= stylesheet_link_tag "form" %>

<%= form_for(@project) do |f| %>

  <% if @project.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

      <ul>
      <% @project.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<CENTER>

   <div id = "project_name">
<div class="project_name">
    Project Name:
    <%= f.text_field :project_name,:maxlength => 30 %>
  </div>
</div>

   <div id ="smallbox">
<div id = "status">
  <div class="status"> 
    <%= f.label :status %> : 

    <%#= f.select :status, [['Active'],['Completed']], {:include_blank => true} %>
    <%= f.select :status, [['Active'],['Completed']] %>
  </div></div> 

<div class="client" STYLE="text-align: left;">
<%= label_tag :new_client, "Client" %><br/>
<%= text_field_tag :new_client, nil, :maxlength => 30 %>
Or
<%= f.select( :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "Select previous..") %>
</div>

   <div class="business_div" STYLE="text-align: left;">
<%= label_tag :new_business_div, "Business Division" %><br/>
<%= text_field_tag :new_business_div, nil, :maxlength => 30 %>
Or
<%= f.select( :business_div, Project.all.map {|p| [p.business_div]}.uniq, :prompt => "Select previous") %>
</div>

   <div class="start_date" STYLE="text-align: left;">
    <b>Start Date:</b>
    <%= f.text_field :start_date, :class => 'datepicker', :style => 'width: 80px;' %>
  </div>  

</P>

<div class="create_button">
<div class="actions">
    <%= f.submit "Save New Project", :class => "button",  :confirm => "Are you sure you want to save the new project?" %>
  </div>
</div>

</div> <%#= small div %>

<% end %>

<div class="back_button2">
<%= button_to "Back", projects_path , :class => "button", :method => "get" %>
</div> 
```

**这是我的项目模型**

```
class Project < ActiveRecord::Base
  attr_accessible  :fullname, :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benefits, :edited_date, :end_date, :entry_date, :financials, :industry, :keywords, :lessons_learned, :project_name, :role, :start_date, :status, :summary, :technol_ids, :tech , :technols

validates_presence_of :business_div, :client, :customer_benefits, :end_date, :financials, :industry, :lessons_learned, :project_name,  :role, :start_date, :status, :summary #, :keywords

validates_format_of :industry, :with => /\A[^\d]+\Z/, :message => "field should only have letters"
validates_format_of :business_div, :with => /\A[^\d]+\Z/, :message => "field should only have letters"
validates_format_of :client, :with => /\A[^\d]+\Z/, :message => "field should only have letters"
validates_format_of :exception_pm, :with => /\A[^\d]+\Z/, :message => "field should only have letters"
validates_format_of :project_owner, :with => /\A[^\d]+\Z/, :message => "field should only have letters"
validates_format_of :role, :with => /\A[^\d]+\Z/, :message => "field should only have letters"

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

  def set_fullname(a, b)
    fullname = [a, b].join(' ')
  end

accepts_nested_attributes_for(:technols)

end 
```

如果我需要包括其他任何内容，请告诉我。我已经被这个问题困扰了一段时间了。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:25:17.540

正如 railsdog 建议的那样，使用传递给`Projects#create`. 您的表单提交数据，并且该数据保存在称为`params`键/值对的变量中。该变量应该仍然可以从任何视图`Projects#create`呈现访问。

您需要做的是在表单元素上设置一些默认内容。`text_field`这是名为“project_name”的示例

```
<div class="project_name">
 Project Name:
  <%= f.text_field :project_name, params[:project_name],:maxlength => 30 %>
</div> 
```

您应该能够对任何其他字段执行相同或类似的操作。

# android - 无法将安卓手机连接到电脑进行调试

> ID：12913601
> 
> 赞同：1
> 
> 时间：2012-10-16T11:22:20.433
> 
> 标签：android

我正在使用三星 Galaxy y duos GT s6102。这是姜饼手机。我正在尝试学习为 android 平台开发应用程序。我可以在模拟器上测试我的应用程序，但不能在我的设备上测试。我使用了以下故障排除方法：

1.  安装/重新安装谷歌 USB 驱动程序。
2.  格式化我的手机。
3.  我的手机上的 USB 调试已打开。
4.  我也试过[这个链接](http://www.androidsim.net/2009/08/how-to-1-how-to-install-usb-driver-on.html)，但注意到有帮助。
5.  Windows 更新也没有可用的驱动程序。
6.  adb devices 也没有给出任何结果。
7.  该设备在其他设备的设备管理器中被检测为 SAMSUNG。

PS：我用的是windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:25:21.603

安装三星凯斯：

[http://www.samsung.com/us/kies/](http://www.samsung.com/us/kies/)

安装后，它还会安装三星 USB 驱动程序

# c# - 从可视化 foxpro 数据源动态获取 Schema 的速度问题

> ID：12913604
> 
> 赞同：2
> 
> 时间：2012-10-16T11:22:30.917
> 
> 标签：c#, sql, odbc, oledb, visual-foxpro

Visual Fox Pro ODBC 驱动程序（和 OLE DB）出现问题，我用来动态获取 DBF 表的所有列名的代码适用于小型数据集。但是，如果我尝试使用下面的代码获取大型表的表架构，那么获取架构可能需要 60 秒。

```
OdbcConnection conn = new OdbcConnection(@"Dsn=Boss;sourcedb=u:\32BITBOSS\DATA;sourcetype=DBF;exclusive=No;backgroundfetch=Yes;collate=Machine;null=Yes;deleted=Yes");     
OdbcCommand cmd = new OdbcCommand("Select * from " + listBox1.SelectedItem.ToString(), conn);
conn.Open();
try
{

    OdbcDataReader reader = cmd.ExecuteReader();
    DataTable dt = reader.GetSchemaTable();

    listBox2.Items.Clear();

    foreach (DataRow row in dt.Rows)
    {
        listBox2.Items.Add(row[0].ToString());
    }

    conn.Close();

}
catch (Exception ex)
{
    Console.WriteLine(ex.ToString());
    conn.Close();
} 
```

现在我知道这是由于 Select 命令将所有 500,000 条左右的记录拖到数据读取器中，然后它才能提取列名。但是visual fox pro在限制创纪录回报方面相当垃圾。

理想情况下，我希望将返回限制为仅 1 条记录，但假设我不知道任何列名来使用 WHERE 子句，这是行不通的。

VFP 可以使用 TOP SQL 命令，但要做到这一点，您需要一个 ORDER BY 来使用它，而且由于我没有任何列名可以使用，所以这也不起作用。

因此，试图想出一种巧妙的方法来动态获取表模式而不会降低 VFP 的速度，这让我有点难过。

我认为动态数据库转换不会更快。任何人都有任何聪明的想法（除了更改数据库系统，它在工作中被继承，我目前必须使用它:)）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:25:00.010

更改此行：

```
OdbcCommand cmd = new OdbcCommand("Select * from " + listBox1.SelectedItem.ToString(), conn); 
```

到这一行：

```
OdbcCommand cmd = new OdbcCommand(string.Format("Select * from {0} where 1 = 0", listBox1.SelectedItem.ToString()), conn); 
```

这将带回零记录，但会填充架构。现在您有了架构，您可以进一步构建过滤器。

# jquery - 有没有办法为像 iframe 这样的 div 使用不同的样式表？

> ID：12913606
> 
> 赞同：0
> 
> 时间：2012-10-16T11:22:38.310
> 
> 标签：jquery, html, css, iframe

我有一个使用 builderstyles.css 的网站构建器，然后我在其中有一个 div，然后显示用户网站。

问题是用户网站 div 既使用了我的 builderstyles.css 样式，也使用了它自己的样式。

这不是我想要的，因为用户可以覆盖我的 builderstyles 样式，而我的 builderstyles 也会影响用户样式。

我知道我可以将用户网站放入 iframe，但我不能为此应用程序执行此操作。

有没有办法为 div 使用完全不同的样式/样式表并且它不会影响页面的其余部分？还有另一种方法吗？

谢谢瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:35:40.143

HTML5`scoped`为样式标签添加了一个新属性。目前根本不支持它，但是有一个 polyfill 可用。将其与相关样式一起使用，并且可能进行重置，应该可以使您到达需要的位置。

[http://html5doctor.com/the-scoped-attribute/](http://html5doctor.com/the-scoped-attribute/)

（该页面上还有 pollyfill 链接）：[https ://github.com/thingsinjars/jQuery-Scoped-CSS-plugin](https://github.com/thingsinjars/jQuery-Scoped-CSS-plugin)

# powershell - 计算字符串中的字符，然后使用 PowerShell 插入分隔符

> ID：12913607
> 
> 赞同：1
> 
> 时间：2012-10-16T11:22:39.900
> 
> 标签：powershell

我有一个 linux 服务器，它将全天生成几个需要插入数据库的文件；使用 Putty，我可以将它们 sftp 到运行 SQL 2008 的服务器。问题是文件本身的结构，它有一个要放在不同列中的文本字符串，但是在 sql 中批量插入会尝试将其全部放入到一列而不是六列。Powershell 可能不是最好的方法，但我在几个网站上看到它如何查找和替换或附加到行尾，它可以计数和插入吗？

所以文件看起来是这样的：'18240087A +17135555555 3333333333'，其中18、24、00、87、A是不同的列，那么A和+之间有一个空格，即字符数10-19即另一列，然后字符 20-30 是一列，字符 31-36 是一个空格，它是新列，依此类推。所以我想插入一个'|' 或“，”，以便 sql 了解列的结束位置。PowerShell可以随机计数吗？

* * *

这可能不是回应所有回答的人的方式，我提前道歉。由于这是我的第一个 PowerShell 脚本，我感谢你们每个人的意见。这是生成 CDR 记录的 Avaya SIP 服务器，我必须从服务器中提取这些记录并将其插入 SQL 以供以后报告。导出的文件如下所示：

10/15 18:47

18470214A +14434444444 3013777777 CME-SBC HHHH-CM 4 M00 0

起初我只是想删除第一行并针对输出运行一个脚本，这是我从 Kieranties 帖子中修改的：

$test = 获取内容 C:\Share\CDR\testCDR.txt

$pattern = "^(.{2})(.{2})(.{1})(.{2})(.{1})(.{1})\s*(.{15}) (.{10})\s*(.{7})\s*(.{7})\s*(.{1})\s*(.{1})(.{1})(. {1})\s*(.*)$"

if($test -match $pattern){ $result = $matches.Values | 选择 -first ($matches.Count-1)

```
[array]::Reverse($result, 0, $result.Length)

$result = $result -join "|"    
$result | Out-File c:\Share\CDR\results1.txt 
```

}

但后来我意识到我需要第一行，因为它包含日期。不过，我可以尝试以另一种方式解决这个问题。

我现在还看到有时文件包含 2 行或更多行 CDR 信息，例如：

10/15 18:24

18240087A +14434444444 3013777777 CME-SBC HRSA-CM 4 M00 0

18240096A +14434444445 3013777778 CME-SBC HRSA-CM 4 M00 0

而我制作的 .ps1 文件没有给出第二个字符串，所以我尝试添加：

foreach ($test 中的$Data) { $Data = $Data -split(',')

它无法运行。我怎样才能做多行（可能还有第一行）？如果您知道可以提供帮助的教程，那也将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-10T15:54:43.253

PowerShell 是一个我喜欢的很棒的工具，它可以做很多事情。我看到您使用的是 SQL Server 2008。根据您在服务器上运行的 SQL Server 的版本，它很可能具有 SQL Server Integration Services (SSIS)，这是一个提取、转换和加载 (ETL) 工具帮助在许多情况下迁移数据，例如您的情况。您在此处描述的文件听起来像一个固定宽度的文件，SSIS 可以轻松处理和导入该文件，如果这是一个经常性需求（听起来像），SQL Server 有很好的方法来自动加载，包括 sftp 任务的自动化，甚至运行 PowerShell 脚本作为 ETL 的一部分（我已经做过几次）。

如果您的文件确实是固定宽度并且您想使用 PowerShell 将其转换为分隔文件，那么您在答案中使用的正则表达式方法效果很好，或者有几种方法使用 System.String 方法，例如 .insert()允许您在行中使用字符索引插入分隔符（使用 Get-Content 读取文件并每行创建一个 String 对象，然后使用 Foreach 循环或 Foreach-Object 和管道循环遍历它们）。一个稍微困难的方法是使用 .Substring() 方法。您可以使用 Substring 构建新的 String 行以提取每一列并将这些值与分隔符连接起来。对于刚接触 PowerShell 的人来说，这可能很多，但学习和熟练掌握它的最佳方法之一是练习以多种方式编写相同的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:22:27.433

我已经根据您的回复改进了我的答案（请注意，您最好更新您的实际问题以包含该信息！）

Powershell的`Get-Content`好处在于它将内容作为在行尾字符上拆分的数组返回。再加上允许从数组中进行多次赋值，你最终会得到一些简洁的代码。

以下具有根据您对我的原始答案的修改版本处理每一行的功能。然后它由处理文件的函数包装。

这会读取给定的文件，将第一行设置为`$date`，其余内容设置为`$content`. 然后它创建一个输出文件，将日期添加到输出中，然后循环执行正则表达式检查的其余内容，如果检查成功，则添加内容的解析版本。

```
Function Parse-CDRFileLine {
    Param(
        [string]$line
    )

    $pattern = "^(.{2})(.{2})(.{1})(.{2})(.{1})(.{1})\s*(.{15})(.{10})\s*(.{7})\s*(.{7})\s*(.{1})\s*(.{1})(.{1})(.{1})\s*(.*)$"
    if($line -match $pattern){ 
        $result = $matches.Values | select -first ($matches.Count-1)
        [array]::Reverse($result, 0, $result.Length)
        $result = $result -join "|"    
        $result
    }
}

Function Parse-CDRFile{
    Param(
        [string]$filepath
    )    

    # Read content, setting first line to $date, the rest to $content
    $date,$content = Get-Content $filepath    

    # Create the output file, overwrite if neccessary
    $outputFile = New-Item "$filepath.out" -ItemType file -Force

    # Add the date line
    Set-Content $outputFile $date

    # Process the rest of the content
    $content | 
        ? { -not([string]::IsNullOrEmpty($_)) } |
        % { Add-Content $outputFile (Parse-CDRFileLine $_) }
}

Parse-CDRFile "C:\input.txt" 
```

我使用了您的示例输入，得到的结果是：

```
18:24 10/15
18|24|0|08|7|A|+14434444444 30|13777777 C|ME-SBC |HRSA-CM|4|M|0|0|0
18|24|0|09|6|A|+14434444445 30|13777778 C|ME-SBC |HRSA-CM|4|M|0|0|0 
```

那里有大量的资源，但我特别建议的是 Douglas Finkes [Powershell for Developers](http://shop.oreilly.com/product/0636920024491.do)它简短、简洁且包含大量重要信息，可让您以正确的心态思考 Powershell

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:55:20.707

This is a way (really ugly IMO, I think it can better done):

```
$a = '18240087A +17135555555 3333333333'
$b = @( ($a[0..1] -join ''), ($a[2..3] -join ''), ($a[4..5] -join ''),
    ($a[6..7] -join ''), ($a[8] -join ''), ($A[10..19] -join ''),
    ($a[20..30] -join ''), ($a[31..36] -join ''))
$c = $b -join '|'
$c
18|24|00|87|A|+171355555|55 33333333|33 
```

I don't know if is the rigth splitting you need, but changing the values in each `[x..y]` you can do what better fit your need. Remenber that character array are 0-based, then the first char is 0 and so on.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:17:03.743

我不太遵守拆分规则。到底什么样的软件会写入文本文件？也许可以指示它改变结构？

话虽如此，插入管道很容易`.Insert()`

```
$a= '18240087A +17135555555 3333333333'
$a.Substring(0, $a.IndexOf('+')).Insert(2, '|').insert(5,'|').insert(8, '|').insert(11, '|').insert(13, '|')
# Output: 18|24|00|87|A|

# Rest of the line:
$a.Substring($a.IndexOf('+')+1)
# Output: 17135555555 3333333333 
```

从那里您可以继续拆分其余的行数据。

# php - PHP：致命错误：在非对象上调用成员函数 get()

> ID：12913611
> 
> 赞同：0
> 
> 时间：2012-10-16T11:22:49.137
> 
> 标签：php

运行我的代码时出现错误，它说调用非对象上的成员函数 getBallparkDetailsS​​tartDate()。

```
if($projectStatusId == ProjectStatusKeys::BALLPARK_ACTIVE) {
            $ballpark = $this->ballparkDetailsHandler->getBallparkDetailsByProjectId($projectId);               
            $projectDetails["startdate"] = $ballpark->getBallparkDetailsStartDate();
            $projectDetails["enddate"] = $ballpark->getBallparkDetailsEndDate();
            $projectDetails["projectid"] = $projectId;
            $projectDetails["name"] = $ballpark->getBallparkDetailsBookingRef();
            $projectDetails["status"] = ProjectStatusKeys::BALLPARK_ACTIVE; 
        } 
```

我在这一行得到了错误：**$projectDetails["startdate"] = $ballpark->getBallparkDetailsS​​tartDate();**

这是我的其他代码：

```
public function __construct($ballparkDetailsId, $project, 
        $ballparkDetailsBookingRef, 
        $ballparkDetailsStartDate, $ballparkDetailsEndDate, 
        $ballparkDetailsExpiryDate, $ballparkDetailsDescription, 
        $ballparkDetailsNotes) {
    $this->ballparkDetailsId = $ballparkDetailsId;
    $this->project = $project;
    $this->ballparkDetailsBookingRef = $ballparkDetailsBookingRef;
    $this->ballparkDetailsStartDate = $ballparkDetailsStartDate;
    $this->ballparkDetailsEndDate = $ballparkDetailsEndDate;
    $this->ballparkDetailsExpiryDate = $ballparkDetailsExpiryDate;
    $this->ballparkDetailsDescription = $ballparkDetailsDescription;
    $this->ballparkDetailsNotes = $ballparkDetailsNotes;
}

public function getBallparkDetailsId() {
    return $this->ballparkDetailsId;
}

public function getProject() {
    return $this->project;
}

public function getBankName() {
    return $this->getProject()->getBankName();
}

public function getBankRef() {
    return $this->getProject()->getBankRef();
}

public function getRegionName() {
    return $this->getProject()->getRegionName();
}

public function getProjectStatusName() {
    return $this->getProject()->getProjectStatusName();
}

public function getBallparkDetailsBookingRef() {
    return $this->ballparkDetailsBookingRef;
}

public function getBallparkDetailsStartDate() {
    return $this->ballparkDetailsStartDate;
}

public function getBallparkDetailsEndDate() {
    return $this->ballparkDetailsEndDate;
}

public function getBallparkDetailsExpiryDate() {
    return $this->ballparkDetailsExpiryDate;
}

public function getBallparkDetailsDescription() {
    return $this->ballparkDetailsDescription;
}

public function getBallparkDetailsNotes() {
    return $this->ballparkDetailsNotes;
}

public function getProjectId() {
    return $this->getProject()->getProjectId();
}

public function getProjectStatusId() {
    return $this->getProject()->getProjectStatusId();
}

}
?> 
```

我最后一次检查它运行良好。但是现在我不知道这是怎么回事？请帮我找出错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:36:27.507

显然

```
$ballpark = $this->ballparkDetailsHandler->getBallparkDetailsByProjectId($projectId); 
```

根本没有返回“球场”。可能它正在返回一个错误，或者类似一个空数组。

在引发错误的行之前尝试`var_dump()`'ing ，并查看它包含的内容（可能是 ,或其他类似的东西。`$ballpark``False``NULL``array()`

然后，检查文件`ballparkDetailsByProjectId()`中的函数`BallparkDetailsHandler.php`。猜测一下，您可能传递了一个无效的（即不存在、已删除等）`$projectId`。

然后你可以用错误检查重写代码：

```
if($projectStatusId == ProjectStatusKeys::BALLPARK_ACTIVE) {
        $ballpark = $this->ballparkDetailsHandler->getBallparkDetailsByProjectId($projectId);
        if (!is_object($ballpark))
            trigger_error("Error: bad project ID: '$projectId': $ballpark",
                E_USER_ERROR);

        $projectDetails["startdate"] = $ballpark->getBallparkDetailsStartDate();
        $projectDetails["enddate"] = $ballpark->getBallparkDetailsEndDate();
        $projectDetails["projectid"] = $projectId;
        $projectDetails["name"] = $ballpark->getBallparkDetailsBookingRef();
        $projectDetails["status"] = ProjectStatusKeys::BALLPARK_ACTIVE; 
    } 
```

然后在`BallparkDetailsHandler.php`文件中您可以修改此代码：

```
// Prepare query or die
if (!($stmt = $this->mysqli->prepare($query))
    return "Error in PREPARE: $query";

$stmt->bind_param("i", $projectId);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($ballparkDetailsBookingRef, $bankRef, $regionName,
     $projectStatusId, $projectStatusName,  $ballparkDetailsDescription,
     $ballparkDetailsNotes, $ballparkDetailsStartDate, $ballparkDetailsEndDate,
     $ballparkDetailsExpiryDate);
$stmt->fetch();

// If no data, then die
if(!$stmt->num_rows)
    return "No data in DB for projectID '$projectId': $query";

// Should be clear sailing from here on. Actually I ought to check
// whether all these new() here do return anything sensible, or not

$bank = new Bank("", "", $bankRef, "");
$region = new Region("", $regionName, "");
$projectStatus = new ProjectStatus($projectStatusId, $projectStatusName);
$project = new Project($projectId, $bank, $region, $projectStatus);

return new BallparkDetails("", $project,
    $ballparkDetailsBookingRef, $ballparkDetailsStartDate, 
    $ballparkDetailsEndDate, $ballparkDetailsExpiryDate, 
    $ballparkDetailsDescription, $ballparkDetailsNotes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:39:02.067

`$ballpark`显然不包含您认为与错误有关的对象。事实上，它显然根本不包含一个对象。

这意味着前面的行（设置`$ballpark`）没有正常工作。看起来它返回的值不是对象。

我不知道那个值是什么——它可能是`null`，也可能是整数、字符串、数组等。但不管它是什么，它都不是一个球场对象。

我建议你看看你的`getBallparkDetailsByProjectId()`方法来找到这个问题的根源。

# android - Android 相机预览上的 Phonegap 叠加图像

> ID：12913615
> 
> 赞同：5
> 
> 时间：2012-10-16T11:22:57.633
> 
> 标签：android, html, cordova

我已经搜索了好几天但没有取得很大的成功，Android 主题的所有 phonegap 覆盖都消失了，没有真正的答案，所以我只会再添加一个！:)

有没有一种简单的方法来操作 phonegap 相机 API，以便您可以将 PNG 添加到相机预览中？！

并像往常一样返回URI等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:35:24.917

您应该能够使用绝对定位将具有透明背景的 png 放置在从相机 API 返回的图像上。

# java - 使用现有库的 Web 应用程序最安全的日志记录框架是什么？

> ID：12913616
> 
> 赞同：1
> 
> 时间：2012-10-16T11:23:03.050
> 
> 标签：java, logging, frameworks

我需要为在容器（Tomcat、JBoss...）中运行的新 Web 应用程序确定日志框架。此应用程序使用不同的日志框架引用 java 库。

我的阅读表明，由于类加载器问题，一些日志框架在容器中不能很好地工作。我也读到这不再是问题了。情况令人困惑。状态如何？

似乎使用 SLF4J 并重定向到 Log4J + 使用到 SLF4J 的桥以获取引用的 Java 库（必要时）是安全的解决方案。

我应该为我的 Web 应用程序使用哪个日志框架并保持安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:17:59.207

After digging the subject deeper, I can conclude the following:

1.  The classloader issues are mostly reported around the Jakarta Common Logging (JCL) interface.
2.  In order to tackle the multiple logging frameworks used in different Java libraries, a logging interface such as SLF4J or JCL is necessary.
3.  SLF4J is a safe solution for web applications running in containers. It is preferable to accessing the logger provided by the container regarding portability issues.

I have summarized my findings in a blog [post](http://tshikatshikaaa.blogspot.nl/2012/10/understanding-logging-frameworks-in-java.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:23:40.283

您可以（并且应该）使用您的 Web 应用程序部署自己的日志库。无法保证服务器将支持哪种日志系统，也无法保证如何配置。通过提供您自己的，您可以根据您的应用程序需求对其进行定制。

因此，除非您可以指定和管理应用程序服务器，否则请交付您希望与应用程序一起使用的内容。

# c - linux中的kill和signal问题

> ID：12913617
> 
> 赞同：0
> 
> 时间：2012-10-16T11:23:08.443
> 
> 标签：c, signals

我们有一个库，它向`kill(pid, SIGUSR2)`提到`pid`的在我们的案例中大部分时间都在运行的信号发送信号。该进程具有信号命令，该命令具有与该信号相关的信号处理。

我可以看到这个 kill 命令正在工作并返回成功（0），但相应的信号处理程序有时会被调用，有时不会。

这种不一致的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:38:53.133

我得到了解决方案，基本上其他一些代码阻塞了`SIGUSR2`信号，所以我只是使用它解除阻塞`sigprocmask(SIG_UNBLOCK, &set, NULL);`并且它工作。

它只发生第一次的原因是它被阻塞的持续时间，基本上他们在解除阻塞之前阻塞了一段时间，这里的代码路径执行是这个进程第一次在这段时间内无法选择信号。

# php - 如何在 php 中返回 http 状态码？

> ID：12913619
> 
> 赞同：-2
> 
> 时间：2012-10-16T11:23:09.357
> 
> 标签：php, http, http-status

> **可能重复：**
> [使用 php 返回特定的 http 状态代码](https://stackoverflow.com/questions/3402067/return-a-specific-http-status-code-with-php)

如何以编程方式使用 php 发送特定的 http 状态码？是否有任何方法甚至是一个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:26:49.447

该`header()`功能是您所需要的。

`void header ( string $string [, bool $replace = true [, int $http_response_code ]] )`

将其`<?php`放在呈现响应输出的脚本的第一个标记之后。

你应该参考[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:25:21.057

看[`header()`](http://php.net/header.php)功能：

```
header('HTTP/1.0 404 Not Found'); 
```

将它放在脚本的任何输出之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:26:56.110

在向客户端发送任何其他内容*之前发送。*一些可能的状态标题如下：[`header()`](http://php.net/manual/en/function.header.php)

 *```
header('HTTP/1.1 200 OK');

// Page was not found:
header('HTTP/1.1 404 Not Found');

// Access forbidden:
header('HTTP/1.1 403 Forbidden');

// The page moved permanently should be used for
// all redrictions, because search engines know
// what's going on and can easily update their urls.
header('HTTP/1.1 301 Moved Permanently');

// Server error
header('HTTP/1.1 500 Internal Server Error');

// header for telling the browser that the content
// did not get changed
header('HTTP/1.1 304 Not Modified'); 
```*

# android - 我可以将 BlackBerry inApp 支付集成到我的 android 应用程序中吗？

> ID：12913620
> 
> 赞同：2
> 
> 时间：2012-10-16T11:23:10.620
> 
> 标签：android, in-app-purchase, blackberry-10, blackberry-android

我正在尝试将应用内购买（来自黑莓市场）集成到我的 android 应用程序中。当我将此库“ **paymentapi.jar** ”导入我的项目并运行它时，我收到以下警告/错误：

```
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.blackberry.api.paymentsdk.a) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.blackberry.api.paymentsdk.digitalGoods.a) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.blackberry.api.paymentsdk.paymentInstruments.a) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.blackberry.api.paymentsdk.paymentInstruments.b) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.blackberry.api.paymentsdk.purchaseHistory.a) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.a.a.a.b) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.a.a.a.c) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.a.a.a.d) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.a.a.a.e) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.a.a.a.f) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.a.a.a.i) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(net.rimlib.a.a.a.k) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx 
EXCEPTION FROM SIMULATION:
[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx local variable type mismatch: attempt to set or access a value of type java.lang.Object using a local variable of type boolean. This is symptomatic of .class transformation tools that ignore local variable information.

[2012-10-12 15:28:43 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx ...at bytecode offset 00000013
locals[0000]: I
locals[0001]: Lnet/rim/device/api/system/CodeSigningKey;
stack[top0]: I
...while working on block 0012
...while working on method b:(I)Z
...while processing b (I)Z
...while processing net/rimlib/a/a/b/b.class

[2012-10-12 15:28:55 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Dx 1 error; aborting
[2012-10-12 15:28:55 - com.jcentricity.forecastica.lite.activity.LoginActivity_BlackBerry] Conversion to Dalvik format failed with error 1 
```

我尝试了很多“**干净的项目**”、“java 构建路径”、关闭 Eclipse 等...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:28:43.470

不，你不能这样做。

BlackBerry Java-ME 应用内计费系统使用特定于 BlackBerry Java-ME 平台的类。因此，您甚至无法编译您的应用程序，更不用说运行它了。由于 Android 平台不支持 BlackBerry SDK，您将无法使用 BlackBerry 库进行应用内购买。

相反，您可以使用 Android 自己[的应用内购买系统](http://developer.android.com/guide/google/play/billing/index.html)来实现相同的功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T17:23:44.593

但是它说Android支持inApp购买那么如何？

[http://developer.blackberry.com/android/apisupport/apisupport_inapp_payments_support.html](http://developer.blackberry.com/android/apisupport/apisupport_inapp_payments_support.html)

# javascript - 我可以使用 Jquery 查找元素并将其 CSS 宽度设置为 current-width - x 吗？

> ID：12913621
> 
> 赞同：3
> 
> 时间：2012-10-16T11:23:10.727
> 
> 标签：javascript, jquery, css, dimensions

假设我需要将一些元素的宽度修正 19 像素。

是否可以`find`像这样设置元素并设置找到的元素 CSS-width：

```
 $el.find( '.ui-content' )
    .css({'width': "parseFloat(found_element_current_width) -19" }) 
```

如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T11:25:50.243

是的。

```
$el.find( '.ui-content' )
    .width(function(i, width) { return width - 19;  }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:37:38.853

从[`.css()`](http://api.jquery.com/css/)函数的文档中：

> 从 jQuery 1.6 开始，`.css()`接受类似于`.animate()`. `+=`相对值是一个以或`-=`递增或递减当前值开头的字符串。例如，如果一个元素的 padding-left 为 10px，则`.css( "padding-left", "+=15" )`总 padding-left 为 25px。

所以你可以这样做：

```
$el.find( '.ui-content' )
.css('width', '-=19'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:26:42.193

您可以使用`css`' 功能：

```
$el.find( '.ui-content' )
    .css('width', function(i, w){
         return (parseFloat(w) - 19) + 'px'
    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T11:28:50.073

是的你可以。

```
$el.find( '.ui-content' )
    .css('width', parseInt(yourwidth) - 19) 
```

# java - 根据缩进创建文件夹/文件路径

> ID：12913629
> 
> 赞同：2
> 
> 时间：2012-10-16T11:23:35.373
> 
> 标签：java

我想根据缩进创建特定文件的路径。我有一个命令返回存储库中项目的结构。如下图

```
Requirement
  abc.doc
Software
    Code
       File
         aaa.c
         bbb.c 
```

我想知道是否可以将aaa.c 的路径设为\Software\Code\File。如果您能给我一些如何做到这一点的想法，那将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:37:43.887

保留 <indent size, last file with that indent> 的映射。对于处理的每一行，在地图中查找具有（当前行的缩进 - 1）的条目。那是您当前文件的父级。

请注意，您需要一些约定来消除文件夹中的文件歧义。您还可以假设所有叶节点（没有子节点的）都是文件，但在这种情况下，将无法表示一个空文件夹。

假设所有叶节点都是文件的解决方案：

```
final Map<Integer, FileDesc> history = new HashMap<>();
final Set<File> files = new HashSet<>();
history.put(-1, new FileDesc(basePath, false));
for (String line : inputLines) {
  final int indent = indentSize(line);
  final String fileName = fileName(line);
  final FileDesc 
    parent = history.get(indent-1),
    previous = history.get(indent),
    current = new FileDesc(new File(parent.f, fileName), true);
  parent.isFile = false;
  if (previous != null && previous.isFile) files.add(previous.f);
  history.put(indent, current);
}
for (FileDesc desc : history.values())
  if (desc.isFile) files.add(desc.f); 
```

* * *

```
class FileDesc {
  final File f;
  boolean isFile;
  FileDesc(File f, boolean isFile) { this.f = f; this.isFile = isFile; }
} 
```

# .net - 使用 Mono 部署 Linux 以部署 aspnet 网站/网站应用程序？

> ID：12913631
> 
> 赞同：3
> 
> 时间：2012-10-16T11:23:41.370
> 
> 标签：.net, linux, apache, mono

我有一个 C#/ASP.NET 4.0 框架应用程序，它可以在带有 IIS 的 Windows 上运行。但最近我很想切换到 Linux/Mono。它提出了一些问题：

基于 goggled 我发现选项是使用 Mono cecil

所以我下载并安装在windows

**在窗口中：**

1) Mono 迁移分析器 2) 适用于 Windows、Gtk# 和 XSP 的 Mono

**在 openuse 中：**

zypper addrepo [http://download.mono-project.com/download-stable/openSUSE_11.4](http://download.mono-project.com/download-stable/openSUSE_11.4) mono-stable zypper refresh --repo mono-stable zypper dist-upgrade --repo mono-stable

然后我将我的 dll 提供给 Mono Migration Analyzer 以检查迁移。最后它也成功了

现在我的问题是

1）这一步之后我该如何继续？

2）我怎样才能使该网站/网站应用程序在单声道上运行以进行转换？

3）我怎样才能让它与 Apache Tomcat 服务器一起运行？

4）我怎样才能让它在opensuse环境中运行应用程序？

等待您的宝贵建议和意见

# sql - 在sql server中对表的行进行分组

> ID：12913633
> 
> 赞同：1
> 
> 时间：2012-10-16T11:23:47.857
> 
> 标签：sql, sql-server, sql-server-2008

我有下表，它有 2 列。我需要编写一个返回 3 列的查询，前 2 列应与表中存在的 2 列匹配，第 3 列应分组为 n 个拆分。例如，在这种情况下，我想分成 4 个组。所以第 1 4 行应该在第 3 列中返回 1，第 2 4 行应该返回 2，第 3 4 行应该返回 3，最后是最后 3 行（因为总共有 15 行) 应该返回 4。

```
DECLARE @NAMES TABLE ( [ID] INT IDENTITY, [NAME] VARCHAR(20) )   
INSERT INTO @NAMES SELECT 'NAME1' 
UNION ALL 
SELECT 'NAME2' 
UNION ALL 
SELECT 'NAME3' 
UNION ALL 
SELECT 'NAME4' 
UNION ALL 
SELECT 'NAME5' 
UNION ALL 
SELECT 'NAME6' 
UNION ALL 
SELECT 'NAME7' 
UNION ALL 
SELECT 'NAME8' 
UNION ALL 
SELECT 'NAME9' 
UNION ALL 
SELECT 'NAME10' 
UNION ALL 
SELECT 'NAME11' 
UNION ALL 
SELECT 'NAME12' 
UNION ALL 
SELECT 'NAME13' 
UNION ALL 
SELECT 'NAME14' 
UNION ALL 
SELECT 'NAME15' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:25:07.433

在 SQL Server 中尝试 NTILE() 函数

```
select ID, Name, ntile(4) over (order by Name) from @Names 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:28:02.463

尝试这个：

```
select *,((ID-1)/4)+1 
from @NAMES 
```

或者

```
select *,(ROW_NUMBER() over (order by id)-1)/4+1
from @NAMES 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/5233)

# asp.net-mvc-3 - 在 mvc3 中的 jquery 函数中回发后的 Ajax 调用

> ID：12913637
> 
> 赞同：0
> 
> 时间：2012-10-16T11:24:23.940
> 
> 标签：asp.net-mvc-3

在 mvc3 中回发后，我遇到了来自 Jquery 函数的 Ajax 调用问题。下面的 ajax 部分中提到的操作方法在回发之后不会被调用，而在回发之前它可以正常工作。实际上我正在尝试为文本框获取价值。这是我的 Jquery 函数..

```
 $("#ddlDiagnosis").change(function () {
            alert($("#ddlDiagnosis").val());
            var selection = $("#ddlDiagnosis").val();
            var datatosend = { selectedValue: selection };

            $.ajax({
                url: "home/GetDiagnosisICDCode",
                type: 'POST',
                data: { selectedValue: $(this).val() },  //datatosend,
                datatype: 'json',
                success: function (data) {
                    var elements = "";
                    $.each(data, function () {
                        $("#txtICDCode").val(this.ICDcode)
                    })
                }
            });

       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:35:31.940

您需要像这样更改网址

```
url: "/home/GetDiagnosisICDCode", 
```

并且`GetDiagnosisICDCode`必须是公共方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:44:08.827

您不能在回发后强制进行 ajax 调用，因为**页面状态在完整回发后会发生变化**。所以它不会发生。应该执行包含 ajax 调用的函数以发出 ajax 请求。为此，您可以使用 jquery 的`$(document).ready(function(){});`Incapsulate your method using jquery's Initialization function。在一个序列中，假设您可以先进行 ajax 调用，然后可以进行完整的回发。但是通过维护页面的状态是不可能的。

# cuda - OpenCL 动态并行性/GPU 产生的线程？

> ID：12913640
> 
> 赞同：4
> 
> 时间：2012-10-16T11:24:49.597
> 
> 标签：cuda, opencl, gpgpu

CUDA 5[刚刚发布](http://nvidianews.nvidia.com/Releases/NVIDIA-Releases-CUDA-5-Making-Programming-With-World-s-Most-Pervasive-Parallel-Computing-Platform-Even-Easier-88b.aspx)，它能够从另一个 GPU（主？）线程中生成 GPU 线程，从而最大限度地减少我们迄今为止看到的 CPU 和 GPU 之间的标注。

在 OpenCL 领域有哪些计划来支持 GPU 生成的线程？由于我负担不起选择封闭标准（我的用户群是“每个游戏玩家”），我需要知道 OpenCL 何时准备好在这方面的黄金时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:20:18.787

OpenCL Standard 通常是 CUDA 的回归方式（设备分区功能除外），我想这个功能将在一年内添加到 OpenCL 中。

2013 年 8 月 8 日编辑：此功能已在[OpenCL 2.0](https://www.khronos.org/news/press/khronos-releases-opencl-2.0)中引入。

# android - 使我的应用程序的背景菜单颜色和字体颜色对所有手机都相同

> ID：12913642
> 
> 赞同：1
> 
> 时间：2012-10-16T11:24:51.407
> 
> 标签：android, android-layout

我想在该菜单中应用程序的背景颜色必须为黑色，字体颜色必须为白色所有设备都相同....我在不同的设备上进行了测试，但在某些设备上看起来像我想要的，但在某些设备上看起来像白色菜单和黑色字体

我可以改变它并使其成为静态吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:26:57.380

是的，您可以通过以下方式做到这一点....

下面是代码....对于andorid的所有手机，**背景颜色为黑色，字体为白色**

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    /*
     * if (Integer.parseInt(android.os.Build.VERSION.SDK) <= 8)
     * menuInflater.inflate(R.menu.capture_black, menu); else
     */
    menuInflater.inflate(R.menu.main_capture, menu);

    setMenuBackground();
    return super.onCreateOptionsMenu(menu);
}

protected void setMenuBackground() {
    // Log.d(TAG, "Enterting setMenuBackGround");
    getLayoutInflater().setFactory(new Factory() {
        public View onCreateView(String name, Context context, AttributeSet attrs) {
            if (name.equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")) {
                try { // Ask our inflater to create the view
                    LayoutInflater f = getLayoutInflater();
                    final View view = f.createView(name, null, attrs);
                    /*
                     * The background gets refreshed each time a new item is
                     * added the options menu. So each time Android applies
                     * the default background we need to set our own
                     * background. This is done using a thread giving the
                     * background change as runnable object
                     */
                    new Handler().post(new Runnable() {
                        public void run() {
                            // sets the background color
                            view.setBackgroundColor(Color.BLACK);
                            // sets the text color
                            ((TextView) view).setTextColor(Color.WHITE);
                            // sets the text size
                            ((TextView) view).setTextSize(18);
                        }
                    });
                    return view;
                } catch (InflateException e) {
                } catch (ClassNotFoundException e) {
                }
            }
            return null;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:28:03.347

您需要为此创建自定义菜单。这是优秀的教程。

[http://www.codeproject.com/Articles/173121/Android-Menus-My-Way](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)

# php - MySQL 查询有效，但不能检索所有信息，可能效率不高

> ID：12913646
> 
> 赞同：1
> 
> 时间：2012-10-16T11:25:01.513
> 
> 标签：php, mysql

我正在使用 MySql 和 PHP 向轮询系统添加标签功能。用户将单击一个标签以列出所有带有相应标签的民意调查（AKA 命题）。链接看起来像这样，“/propositions/tagged/baseball”。

我使用 mod_rewrite 将“棒球”标签分配给名为 $tag 的变量。

```
RewriteRule ^propositions/tagged/(.*)$ /propositions/index.php?tag=$1 [L] 
```

它不返回与投票关联的标签的标签名称。我怎么会得到这些名字？

下面的查询有效，但它不返回与投票关联的标签的标签名称。我怎么会得到这些名字？另外，是否可以更有效地完成它。还有一件事，将标签与投票数据一起存储会更好吗？不久前，我看到 SO 这样做喜欢将标签包含在带有问题的表格列中。不知道他们是否仍然这样做或曾经这样做过，但不久前在某个地方看到或读过它。

非常感谢！

==================================================== =====

```
pb_prop (
  id int(11) NOT NULL auto_increment,
  active tinyint(1) NOT NULL default '1',
  submit_by int(11) NOT NULL,
  total_votes int(11) NOT NULL default '0',
  removed tinyint(1) NOT NULL default '0',
  PRIMARY KEY  (id)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

Described below as ".PROP_TABLE." p 
```

==================================================== =====

```
pb_prop_tags (
  id int(11) NOT NULL auto_increment,
  prop_id int(11) NOT NULL,
  tag_id int(11) NOT NULL,
  PRIMARY KEY  (id)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

Described below as ".PROP_TAGS_TABLE." pt 
```

==================================================== =====

```
pb_tags (
  tag_id int(11) NOT NULL auto_increment,
  tag_name varchar(64) NOT NULL,
  PRIMARY KEY  (tag_id)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

Described below as ".TAGS_TABLE." t 
```

==================================================== =====

```
pb_prop_answers (
  id int(11) NOT NULL auto_increment,
  prop_id int(11) NOT NULL,
  num_votes int(11) NOT NULL default '0',
  PRIMARY KEY  (id),
  KEY poll_id (prop_id)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

Described below as ".PROP_ANSWERS_TABLE." a 
```

==================================================== =====

下面的工作 SQL ...可以改进吗？自从发布原始 SQL 以来，我在 select 中添加了特定的列...去掉了一些通配符。此外，在 WHERE 中添加了更多内容以更好地过滤结果。

后显示原始 SQL。

```
 SELECT
                u.username, u.userid,
                p.*,
                pt.prop_id,
                pt.tag_id,
                t.*,
                (
                    SELECT
                            SUM(num_votes)
                    FROM
                            ".PROP_ANSWERS_TABLE." a
                    WHERE
                            a.prop_id = p.id
                ) AS total_votes,
                (
                    SELECT
                            count(*)
                    FROM
                            ".PROP_ANSWERS_TABLE." a
                    WHERE
                            a.prop_id = p.id
                ) AS total_answers
        FROM
                ".PROP_TABLE." p
        INNER JOIN 
                ".TAGS_TABLE." t
            ON 
                t.tag_name LIKE '%".$tag."%'
        INNER JOIN 
                ".PROP_TAGS_TABLE." pt
            ON 
                pt.tag_id = t.tag_id
        LEFT JOIN
                ".USERS_TABLE." u
            ON
                u.userid = p.submit_by
        WHERE
                pt.tag_id = t.tag_id
            AND
                pt.prop_id = p.id
            AND
                p.removed = 0
            AND
                p.active = 1
            AND
                t.tag_id = pt.tag_id
        ORDER BY
                {$sort} {$dir} 
```

原贴SQL：

```
 SELECT
            u.username, u.userid,
            p.*,
            pt.*,
            (
                SELECT
                        SUM(num_votes)
                FROM
                        ".PROP_ANSWERS_TABLE." a
                WHERE
                        a.prop_id = p.id
            ) AS total_votes,
            (
                SELECT
                        count(*)
                FROM
                        ".PROP_ANSWERS_TABLE." a
                WHERE
                        a.prop_id = p.id
            ) AS total_answers
    FROM
            ".PROP_TABLE." p
    INNER JOIN 
            ".PROP_TAGS_TABLE." pt
            ON 
            pt.tag_id = p.id
    INNER JOIN 
            ".TAGS_TABLE." t
            ON 
            t.tag_name LIKE '%".$tag."%'
    LEFT JOIN
            ".USERS_TABLE." u
            ON
            u.userid = p.submit_by
    WHERE
            p.removed = 0
        AND
            p.active = 1
        AND
            t.tag_id = pt.tag_id
    ORDER BY
            {$sort} {$dir} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:43:44.920

我认为您可以在没有子查询的情况下执行此操作，只需加入子查询中使用的表并使用主选择中的聚合函数即可。您将需要一个合适的（并且可能很长！） GROUP BY 子句来配合它。

像这样的东西（毫无疑问有错别字）

```
SELECT u.username, u.userid,
    p.*,
    pt.*,
    SUM(pat.num_votes) AS calc_total_votes,
    COUNT(pat.num_votes) AS calc_total_answers
FROM ".PROP_TABLE." p
INNER JOIN ".PROP_TAGS_TABLE." pt ON pt.tag_id = p.id
INNER JOIN  ".TAGS_TABLE." t ON t.tag_id = pt.tag_id AND t.tag_name LIKE '%".$tag."%'
LEFT JOIN ".PROP_ANSWERS_TABLE." pat ON pat.prop_id = p.id
LEFT JOIN ".USERS_TABLE." u ON u.userid = p.submit_by
WHERE p.removed = 0
AND p.active = 1
GROUP BY u.username, u.userid, p.id, p.active, p.submit_by, p.total_votes , p.removed, pt.id, pt.prop_id, pt.tag_id
ORDER BY {$sort} {$dir} 
```

下面根据您更新的 SQL 修改了 SQL。这是针对子选择执行 JOIN，它应该比每行的子选择更有效。

```
SELECT u.username, u.userid, p.*, pt.prop_id, pt.tag_id, t.*, Sub1.total_votes, Sub1.total_answers
FROM ".PROP_TABLE." p
INNER JOIN ".PROP_TAGS_TABLE." pt ON pt.prop_id = p.id
INNER JOIN ".TAGS_TABLE." t ON pt.tag_id = t.tag_id
LEFT OUTER JOIN (SELECT prop_id, SUM(num_votes) AS total_votes, count(*) AS total_answers
FROM ".PROP_ANSWERS_TABLE." 
GROUP BY prop_id ) AS Sub1 ON p.id = Sub1.prop_id
LEFT OUTER JOIN ".USERS_TABLE." u ON u.userid = p.submit_by
WHERE t.tag_name LIKE '%".$tag."%'
AND p.removed = 0
AND p.active = 1
ORDER BY {$sort} {$dir} 
```

然而，应该可以只用一个整体 group by 来做这个选择，而不需要一个子选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:31:11.213

使用 EXPLAIN 检查您的性能以及在进行 mysql 性能分析时使用了哪些索引。 [http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

如何解释 EXPLAIN 的结果可以在这里看到：http: [//dev.mysql.com/doc/refman/5.0/en/explain-output.html](http://dev.mysql.com/doc/refman/5.0/en/explain-output.html) 避免这样的事情：

*   可能的键是“空”
*   类型列显示“全部”
*   额外的列显示“使用文件排序”或“使用临时”

我注意到“使用临时”或“使用文件排序”通常是查询末尾附加 SORT BY 语句的结果。

检查索引是否用于所有连接。如果排序方向不反映所用索引的排序方向，则删除 SORT BY 也可能会加快该过程。但是，您必须检查在您的代码或 mysql 中对（小？）结果集进行排序是否更快。

# windows - linux和windows中制作目录的常用路径

> ID：12913648
> 
> 赞同：0
> 
> 时间：2012-10-16T11:25:03.620
> 
> 标签：windows, linux, macos, vaadin

我在 vaadin 创建了一个项目，报告将以 pdf 格式打印。一切都按预期工作，但我陷入了不知道我的应用程序是否将部署在 linux 环境、windows 或 Mac 中的地步。我必须指定制作目录的路径，以便在该目录中生成报告。我知道如何在 java 中创建目录，但问题是它可以是所有操作系统的通用路径吗示例： File file=new File(path); if(!file.exists()){ file.mkdirs(); }

我希望“路径”对所有操作系统都是通用的。提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:34:27.590

我认为你会得到的最好的是`System.getProperty("user.home");`。这将为您提供用户的主目录，您可以将其粘贴到那里的子目录中：

```
String path = System.getProperty("user.home") + File.pathSeparator + 
                       "myprogram" +  File.pathSeparator + 
                       "myFile";
File file = new File(path);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:06:36.193

如果这些报告是临时的或暂时的（例如要流式传输），我建议只需创建一个临时文件 (File#createTempFile)：这样您就不必担心它们的位置。

# c# - 如何编写一个 linq 查询，使 s.th. 像 where id != List

> ID：12913651
> 
> 赞同：-3
> 
> 时间：2012-10-16T11:25:10.913
> 
> 标签：c#, linq

> **可能重复：**
> [您将如何使用 Linq 进行“不在”查询？](https://stackoverflow.com/questions/183791/how-would-you-do-a-not-in-query-with-linq)

我有一个关于 LINQ 查询的问题，我有一个问题`List<int> foo;`，现在我需要检查以下内容：

```
var output = select a from db.User where a.id not in foo select a; 
```

我怎么能意识到这一点：**a.id 不在 foo 中**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:27:03.940

如果`foo`是一个列表，那么`where !foo.Contains(a.id)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:26:43.270

使用列表中的 contains 方法

```
var output = from a in db.User where !foo.Contains(a.id) select a; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T11:26:56.047

我的博客：[SQL to LINQ（案例 7 - 使用 IN 和 NOT IN 子句过滤数据）](http://pranayamr.blogspot.ca/2010/12/sql-to-linq-case-7-filter-data-by-using_15.html)

你用，`where <list>.Contains( <item> )`

```
var foo = {1, 2, 3};
var users = from p in db.users
                 where !foo.Contains(p.id)
                 select p; 
```

此的图像表示

![在此处输入图像描述](../Images/244d3f1ed0ec7e975fa634a46c93ebc7.png)

# batch-file - 批处理文件...以管理员身份运行

> ID：12913652
> 
> 赞同：0
> 
> 时间：2012-10-16T11:25:14.580
> 
> 标签：batch-file, administrator, runas

我成功创建了一个批处理文件来刷新我的 DNS……</p>

我添加了一个暂停，我在控制台窗口的标题栏中注意到......它没有以管理员身份运行。

我已经尝试了几种变体……非常感谢您提供一些指导。

我记得在某处读过一篇博客，它说大小写并不重要……驼峰式大小写在编写批处理文件时重要吗？

```
@echo off
echo.
pause
CD..
CD..
echo.
runas /user:<Administrator> ipconfig /flushdns
echo.
pause
echo. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:59:56.213

要使用此方法运行命令，请键入以下内容之一：

```
RUNAS /NOPROFILE /USER:computername/username "IPCONFIG /FLUSHDNS"
RUNAS /PROFILE /ENV /USER:domain/username "IPCONFIG /FLUSHDNS"
RUNAS /ENV /USER:username@domain "IPCONFIG /FLUSHDNS" 
```

将“计算机名”、“用户名”和/或“域”替换为适当的信息。这些方法的问题在于它们需要管理员密码，而我无法在我的机器上找到该密码。但是，如果它像 linux 一样，它是系统隐藏的随机生成的散列。您可以尝试的另一种方法是：

32 位：

```
REG ADD "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers" /V "%HOMEDRIVE%\WINDOWS\System32\ipconfig.exe" /D RUNASADMIN 
```

64 位：

```
REG ADD "HKLM\SOFTWARE\WOW6432\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers" /V "%HOMEDRIVE%\WINDOWS\System32\ipconfig.exe" /D RUNASADMIN 
```

此方法会将程序添加到注册表中，以便每次启动时都以管理员权限运行（兼容模式）。此方法仅在您的目录未更改时才有效。您必须在注册表中提供程序的直接路径。然后，您可以编写如下脚本：

```
@ECHO OFF
CD \
REG ADD "HKLM\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers" /V "%HOMEDRIVE%\WINDOWS\System32\ipconfig.exe" /D RUNASADMIN
IPCONFIG /FLUSHDNS
PAUSE>NUL 
```

我希望这可以帮助你一些。您可以查看[Verboon](http://www.verboon.info/index.php/2011/03/running-an-application-as-administrator-or-in-compatibility-mode/)以获取有关该 REG ADD 命令和兼容模式的更多信息。

# css - Chrome 最近引入了一个 CSS 错误？

> ID：12913657
> 
> 赞同：1
> 
> 时间：2012-10-16T11:25:27.013
> 
> 标签：css, jquery-ui, google-chrome

似乎某些新版本的 Chrome（大约 20 版）引入了渲染 CSS 的新错误。

这里应该是什么： ![正确渲染](../Images/be04ebfc67092fae108f0cc139c6d857.png)

以及新 Chrome 的显示方式： ![不正确的渲染](../Images/b1a84d83ecb771ff2a96492b86b3f380.png)

这是代码（jquery-ui）：

```
<a href="#" class="ui-state-default ui-corner-all">
<span class="ui-icon ui-icon-arrowreturnthick-1-w left" style="
"></span>Up</a> 
```

Firefox 和以前版本的 Chrome 可以正确呈现代码。

我知道我们无法修复这个错误，但有没有办法解决它？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T14:28:51.170

我签入了 IE9，没有按预期包装。

~~经过~~大量挖掘，我认为这是 Chrome 21 的错误，虽然似乎已修复，但我仍然在 Chrome 24 中看到类似的问题。

[我在browsershots.org](http://browsershots.org/http://webinar.videodidacte.fr/afitch2011.html)上检查了您的网站，发现损坏似乎在 Chrome 20.0.1132.57 [Chrome 20.0.1132.57 http://api.browsershots.org/png/original/fa/fac627c3240bca39ef441ef4a5379a41.png](http://api.browsershots.org/png/original/fa/fac627c3240bca39ef441ef4a5379a41.png)和 Chrome 21.0.1180.89 [Chrome 21.0之间.1180.89 http://api.browsershots.org/png/original/25/256df60f8f44dfa2fda3b7270094aa96.png](http://api.browsershots.org/png/original/25/256df60f8f44dfa2fda3b7270094aa96.png)

Chrome 21似乎有[很多](https://www.google.co.uk/search?q=chrome%2021%20rendering%20problems)（字体）渲染问题，例如在[发布的博客文章](http://www.blogger.com/comment.g?blogID=8982037438137564684&postID=4921361292784448327)中，我发现了一个相关的 WebKit 错误[Float imprecision 导致 LineLayout 中的子像素布局不正确，](https://bugs.webkit.org/show_bug.cgi?id=92778)这在 Chrome 22 中*显然*已修复。但是 Chrome报告错误包装的错误仍在[报告](http://code.google.com/p/chromium/issues/detail?id=141548)中，对于最后一个错误的[jsFiddle 示例](http://jsfiddle.net/hbsto/NnsgG/)，它在 Chrome 24 中对我来说仍然是坏的，而不是在 IE9 中

WebKit 错误中突出的一部分：

> 有效地意味着该值几乎可以偏离 1

我将其解释为“宽度可能相差近 1px”，实际上将*Up*锚标记的宽度从计算`width:31px`更改为硬编码`width:32px`可以更正该菜单项的问题。然而，这不是一个通用的修复，所以我建议删除导致错误的因素，即*float*属性。

`.left`将您的课程更改`{ float:left }`为：

```
.left {
    display: inline-block;
    vertical-align: top;
} 
```

看起来它解决了这个问题。但是，对于 IE 6 或 7 访问者来说，这不会“按原样”工作（请参阅[http://caniuse.com/#search=inline-block](http://caniuse.com/#search=inline-block)）。如果您需要网站在那些旧浏览器上的行为相同，有一些方法可以解决这个问题 -[如何在 IE6 上修复 display:inline-block？](https://stackoverflow.com/questions/3754469/how-to-fix-displayinline-block-on-ie6)

最后，如果这种方法可以接受，我会将 CSS`.left`规则重命名为更能代表属性应用位置的名称，例如`.nav-icon`:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:39:08.053

添加`white-space: nowrap`到`<a>`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:55:43.437

我认为诀窍是交换`<a>`，`<div>`但由于渲染是由 jquery-ui 完成的，因此可能会很棘手。我会尝试找到一种方法，并将其发布在这里。

# c# - 根据配置值防止网站中的 Http 请求

> ID：12913660
> 
> 赞同：0
> 
> 时间：2012-10-16T11:25:41.983
> 
> 标签：c#, asp.net, c#-4.0

我已经实现了部署在 IIS 中并启用了 http 和 https 端口的 ASP.Net 应用程序。现在我需要根据 Web.Config 值拒绝 HTTP 请求。如果此值设置为 True 那么它不应该接受 HTTP 附带的请求，就像它应该抛出错误一样`Invalid Operation.. Try requesting with Secure connection`。我做的第一件事是在 Global.asax 文件中检查它，如下所示：

```
 if (Utilities.Utility.HttpsCheck)
    {
        if (!Request.IsSecureConnection)
        {
            Response.Write("Invalid Operation");
        }
    } 
```

在这种方法中，我遇到了一个例外`request is not available in this context`。我用谷歌搜索了这个错误，并知道它无法`Request`在 ASP.NET 的全局文件中访问。

我尝试的下一个方法是在我的项目的每个页面中添加上面的代码，并在处理请求之前检查它。但是通过这种方式，我无法控制阻止对 HTML 页面的请求，我的项目中也有一些 html 页面，这些文件也需要限制。

如果我在页面中包含代码，那么它仅适用于该页面。但是我在网站上也有一些图像/视频文件，这些也需要限制。

有没有更好的方法来做到这一点？请在这方面帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:35:19.270

您可以将 IIS 配置为仅接受 https。Http 请求将自动被重定向。以下是如何配置 IIS 的示例。 [http://support.microsoft.com/kb/324069](http://support.microsoft.com/kb/324069)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:36:23.367

一个非常简单的方法是继承 Page 类并在子类页面中应用条件。你可以有一个限制的子类，一个不限制的子类。受限页面可以访问 Web 配置参数的值并根据需要进行重定向。

```
public class HttpsPage : Page {

protected override void OnLoad(..)
{
 if (Utilities.Utility.HttpsCheck)
    {
        if (!Request.IsSecureConnection)
        {
            Response.Redirect(your-url);
        }
    }
}
} 
```

这很粗糙。这是对您问题的基于代码的答案，但根据您的“确切”要求可能有 20 种更好的方法。

坦率地说，如果您不确定自己在做什么，那么我会非常仔细地考虑将任何您认为需要安全套接字的东西放到网络上……尤其是如果您放置的东西不是您的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:34:29.757

我已经实现了 HTTP 模块，以根据我的配置值限制我的网站的 HTTP 访问。通过使用它，我还可以限制对图像文件和 html 页面的 HTPP 访问。这是我的模块代码：

```
public void Init(HttpApplication context)
        {
            context.BeginRequest += new EventHandler(context_BeginRequest);
        }

        public void context_BeginRequest(Object source, EventArgs e)
        {
            //Code to reject the HTTP requests on basis of Config Value
            HttpApplication application = (HttpApplication)source;
            HttpContext context = application.Context;

            if (context != null)
            {
                if (Utilities.Utility.HttpsCheck)
                {
                    if (!context.Request.IsSecureConnection)
                    {
                        context.Response.StatusCode = (int)System.Net.HttpStatusCode.BadRequest;
                        context.Response.StatusDescription = "Secure connetion required";
                        context.Response.End();
                    }
                }
            }
        } 
```

# objective-c - 仅包含联系人令牌的 TITokenField

> ID：12913663
> 
> 赞同：0
> 
> 时间：2012-10-16T11:25:49.230
> 
> 标签：objective-c, ios, xcode

我正在使用 TITokenField 发送消息视图。我的问题是这个组件允许用户插入任何类型的令牌，即使不是在联系人的源数组中。我希望用户只能在该数组中选择联系人，而不是在其中输入任何随机文本。有什么好主意（和代码）来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T01:50:28.693

TITokenFieldView 现在有一个名为 forcePickSearchResult 的属性。如果将其设置为 YES，输入到字段中的文本将用于过滤源数组，但不会被标记化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:17:53.117

您可以使用 willAddToken 方法检查是否允许将令牌添加到令牌字段。在您的委托类上实现以下方法。该方法来自 TITokenFieldDelegate 协议。

```
- (BOOL)tokenField:(TITokenField *)tokenField willAddToken:(TIToken *)token
{
    if(someStatementCheck)
    {
         // do something as the token will be added to the field
         return YES;
     } else {
         // do something when not allowed to add token
         return NO;
     }
} 
```

# grails - 如何在 GSP 页面中使用 Gpath 编写条件表达式

> ID：12913665
> 
> 赞同：0
> 
> 时间：2012-10-16T11:25:51.107
> 
> 标签：grails, gsp, gpath

我想显示类型可能是 1 或 4 或 5 的附件

`${attachments} has got attachments with the attributes name, type`

**编辑：**

```
<g:findAll in="${attachments}" expr="it.type==1 || it.type==4 ||  it.type==5">
       <p>File: ${it.name}, ${it.type}</p>
    </g:findAll> 
```

我在尝试上面的方法，它没有工作，如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:16:25.073

```
<g:each in="${attachments.findAll{[1,4,5].contains(it.type)}}">
    <p>File: ${it.name}, ${it.type}</p>
</g:each> 
```

# linux - 用于创建自定义缩略图的 Bash 脚本

> ID：12913667
> 
> 赞同：5
> 
> 时间：2012-10-16T11:26:06.023
> 
> 标签：linux, shell, imagemagick, thumbnails

我需要一个 bash 脚本来获取某个指定文件夹中的所有图像；取它们的分辨率，如果它低于最小值，则什么也不做，否则创建一个中等拇指图像（200x150 像素）。

我在 Windows 中使用 Imagemagick。但是在 linux 上，我不能使用相同的脚本，所以我需要编写一个新脚本。

这就是我到目前为止所提出的。

```
#!/bin/bash
for files in /path/to/image/*
  do
       TESTFILE=`echo "$files" | sed 's/|/ /g' | xargs file -b | awk '{print $1}'`
       while read F
       CHECKSIZE=`file "$TESTFILE" -b | sed 's/ //g' | sed 's/,/ /g' | awk  '{print $2}' | sed 's/x/ /g' | awk '{print $1}'`
     if [ $CHECKSIZE -ge  200  ]; then
        convert -sample 200x150 "$F" "$F{_thumb}"
     fi
    done
  done 
```

但是当我运行这个脚本时，它没有给我缩略图，也没有给我任何错误。我对这些脚本很陌生。

**更新 ：**

我想出了这个脚本，谢谢大家。但现在我需要更多帮助。现在我想将新图像存储在图像文件夹内的文件夹中。例如，**/home/image**是所有文件所在的位置。我希望拇指图像存储在**/home/image/thumbs**中。我也想将文件重命名为**filename_thumb.jpg**，但以下脚本的问题是它存储为**filename.jpg_thumb**。

```
#!/bin/bash
THUMBS_FOLDER=/home/temp/thumbs
for file in /home/temp/*
do
  # next line checks the mime-type of the file
  IMAGE_TYPE=`file --mime-type -b "$file" | awk -F'/' '{print $1}'`
  if [ x$IMAGE_TYPE = "ximage" ]; then
      IMAGE_SIZE=`file -b $file | sed 's/ //g' | sed 's/,/ /g' | awk  '{print $2}'`
      WIDTH=`identify -format "%w" "$file"`
      HEIGHT=`identify -format "%h" "$file"`           
      # If the image width is greater that 200 or the height is greater that 150 a thumb is created
     if [ $WIDTH -ge  201 ] || [ $HEIGHT -ge 151 ]; then
        #This line convert the image in a 200 x 150 thumb 
        filename=$(basename "$file")
        extension="${filename##*.}"
        filename="${filename%.*}"
        convert -sample 200x150 "$file" "${THUMBS_FOLDER}/${filename}_thumb.${extension}"   
     fi
  fi     
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:11:17.070

另一种不使用 imageinfo 的方法：

请记住更改图像路径，在我的情况下，我在同一文件夹级别使用名为 imgs 的文件夹。

将内容复制到名为 create_thumbs.sh 的文件中，然后粘贴以下代码：

```
#!/bin/bash
THUMBS_FOLDER=/home/image/thumb
for file in /home/image/*
do
  # next line checks the mime-type of the file
  IMAGE_TYPE=`file --mime-type -b "$file" | awk -F'/' '{print $1}'`
  if [ x$IMAGE_TYPE = "ximage" ]; then
      IMAGE_SIZE=`file -b $file | sed 's/ //g' | sed 's/,/ /g' | awk  '{print $2}'`
      WIDTH=`echo $IMAGE_SIZE | sed 's/x/ /g' | awk '{print $1}'`
      HEIGHT=`echo $IMAGE_SIZE | sed 's/x/ /g' | awk '{print $2}'`           
      # If the image width is greater that 200 or the height is greater that 150 a thumb is created
     if [ $WIDTH -ge  201 ] || [ $HEIGHT -ge 151 ]; then
        #This line convert the image in a 200 x 150 thumb 
        filename=$(basename "$file")
        extension="${filename##*.}"
        filename="${filename%.*}"
        convert -sample 200x150 "$file" "${THUMBS_FOLDER}/${filename}_thumb.${extension}"   
     fi
  fi     
done 
```

调用它：

```
bash create_thumbs.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:40:56.967

这段代码可能更容易理解：

```
#!/bin/bash
for file in /path/to/images/*
do
  # next line checks the mime-type of the file
  CHECKTYPE=`file --mime-type -b "$file" | awk -F'/' '{print $1}'`
  if [ "x$CHECKTYPE" == "ximage" ]; then
    CHECKSIZE=`stat -f "%z" "$file"`               # this returns the filesize
    CHECKWIDTH=`identify -format "%W" "$file"`     # this returns the image width

    # next 'if' is true if either filesize >= 200000 bytes  OR  if image width >=201
    if [ $CHECKSIZE -ge  200000 ] || [ $CHECKWIDTH -ge 201 ]; then
       convert -sample 200x150 "$file" "$(dirname "$file")/thumb_$(basename "$file")"
    fi
  fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:44:51.400

您的脚本稍作更改，并且安装 imageinfo 可以按预期工作。请看下面的解决方案：

安装 imageinfo 工具（在我的情况下它已经安装，检查你是否已经拥有它）

```
sudo apt-get install imageinfo 
```

和脚本：

```
#!/bin/bash
for file in ./image/*
do
  # next line checks the mime-type of the file
  IMAGE_TYPE=`file --mime-type -b "$file" | awk -F'/' '{print $1}'`
  if [ "x$IMAGE_TYPE" == "ximage" ]; then

    WIDTH=`imageinfo --width "$file"`      # obtaining the image width
    HEIGHT=`imageinfo --height "$file"`    # obtaining the image height

    # If the image width is greater that 200 or the height is greater that 150 a thumb is created
    if [ $WIDTH -ge  201 ] || [ $HEIGHT -ge 151 ]; then
       #This line convert the image in a 200 x 150 thumb 
       convert -sample 200x150 "$file" "$(dirname "$file")/thumb_$(basename "$file")" 
    fi
  fi
done 
```

# c++ - ShowWindow 替代品

> ID：12913669
> 
> 赞同：0
> 
> 时间：2012-10-16T11:26:11.570
> 
> 标签：c++, window, terminate, showwindow

显然，当它的主窗口被隐藏（“最小化到托盘”）时，我无法终止给定的进程。所以我尝试在其他进程的 FormClosing 处理程序中再次显示窗口。也没有用。

现在我想使用 ShowWindow

```
IntPtr Handle = Gateway->MainWindowHandle;
ShowWindow((HWND)Handle.ToPointer(), SW_SHOWDEFAULT); 
```

不幸的是，这会产生

```
error LNK2028: Nicht aufgelöstes Token (0A000072) ""extern "C" int __stdcall ShowWindow(struct HWND__ *,int)" (?ShowWindow@@$$J18YGHPAUHWND__@@H@Z)", auf das in Funktion ""private: void __clrcall lidarctrl::Form1::Form1_FormClosing(class System::Object ^,class System::Windows::Forms::FormClosingEventArgs ^)" (?Form1_FormClosing@Form1@lidarctrl@@$$FA$AAMXP$AAVObject@System@@P$AAVFormClosingEventArgs@Forms@Windows@4@@Z)" verwiesen wird.
error LNK2019: Verweis auf nicht aufgelöstes externes Symbol ""extern "C" int __stdcall ShowWindow(struct HWND__ *,int)" (?ShowWindow@@$$J18YGHPAUHWND__@@H@Z)" in Funktion ""private: void __clrcall lidarctrl::Form1::Form1_FormClosing(class System::Object ^,class System::Windows::Forms::FormClosingEventArgs ^)" (?Form1_FormClosing@Form1@lidarctrl@@$$FA$AAMXP$AAVObject@System@@P$AAVFormClosingEventArgs@Forms@Windows@4@@Z)". 
```

抱歉 - 德语错误；不知道如何更改编译器的语言环境。

`Non resolved Token...in function...referenced by...`

`Reference to non-resolved extern symbol...in function...`

**我很欣赏有关要包含哪个标头、要加载的库的任何提示。**

我正在使用 Microsoft Visual C++ 2010 Express；该项目是一个普通的 Windows 窗体应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:53:45.377

在从标准 Windows 窗体应用程序模板创建的项目中，没有链接的标准/默认库通常包含在本机项目中。您需要在项目设置或代码中明确添加它们。在您包含 的地方`<windows.h>`，添加`#pragma`如下所示：

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#pragma comment(lib, "user32.lib") // <<--- Add Me 
```

这将链接您丢失的`ShowWindow`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:48:47.710

您可能没有使用 C++ 和 Win32。然后你会写

```
#include <windows.h>
//...
{
  //...
  HWND Handle = Gateway->MainWindowHandle; // Gateway probably is your class.
  ShowWindow(Handle, SW_SHOWDEFAULT);
} 
```

# intellij-idea - IDEA中奇怪的编译错误

> ID：12913676
> 
> 赞同：0
> 
> 时间：2012-10-16T11:26:28.527
> 
> 标签：intellij-idea

如何解决？“Это не каталог”的意思是“这不是目录”。

![编译错误](../Images/f9339fd824c0c2110482463cf7702639.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:27:45.507

在这种情况下，MAVEN CLEAN 会有所帮助。

# java - 如何从句子中获取单词以存储在Java命令提示符中的单独字符串中

> ID：12913677
> 
> 赞同：0
> 
> 时间：2012-10-16T11:26:28.620
> 
> 标签：java, android, variables, integer

我需要存储来自命令提示符的用户输入，例如，如果用户键入“hello 23”

我需要检查“你好”并将 23 存储在单独的整数中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:29:54.613

将用户的输入视为一个字符串，您应该将其拆分为空格，然后解析第二个元素。

```
Scanner in = new Scanner(System.in);  
String userInput;
userInput = in.nextLine();
String[] arrayOfStrings = userInput.split("\\s+");
Integer number = Integer.parseInt(arrayOfStrings[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:31:00.570

[Console.readline()](http://developer.android.com/reference/java/io/Console.html#readLine%28%29)

[String.split("\s+")](http://developer.android.com/reference/java/lang/String.html#split%28java.lang.String%29)

[整数.parseInt()](http://developer.android.com/reference/java/lang/Integer.html#parseInt%28java.lang.String%29)

# javascript - for 循环中的 Javascript WebSQL 查询。如何知道何时完成？

> ID：12913681
> 
> 赞同：8
> 
> 时间：2012-10-16T11:26:44.267
> 
> 标签：javascript, for-loop, web-sql

我想我有一个相对简单的问题，但我一直在思考，甚至​​谷歌也没有给我一个我可以使用的答案。

基本上我正在尝试复制一些使用 WebSQL 在本地存储的记录。复制不是问题，但我需要知道所有复制操作何时完成，然后我的程序才能继续。

WebSQL 调用是异步的，所以我通常做这些事情的唯一方法是使用回调函数。但是，因为查询是在 for 循环中完成的，所以我不能使用回调函数，因为它会在第一个完成的查询时触发，如代码所示。

代码如下：

```
function copyRecords(old_parent_id, new_parent_id, callback){
    var db = openDatabase('test', '1.0', 'test', 50 * 1024 * 1024);
    db.transaction(function (tx) {
        tx.executeSql('SELECT * FROM table WHERE parent_id = ?', [old_parent_id], function(tx, results){
            for(var i = 0; i < results.rows.length; i++){
                db.transaction(function (tx2) {
                    tx2.executeSql('INSERT INTO table (name, parent_id) VALUES (?, ?)', [results.rows.item(i).name, new_parent_id], callback);
                })
            }
        });
    });
} 
```

我也尝试过调用回调函数 when `i == results.rows.length`，但这并不能确保所有查询都已完成。

我想你们中的一些人以前也遇到过同样的问题，因此非常感谢有关如何解决此问题并确保仅在 for 循环完成时调用回调函数的任何帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T15:38:17.653

通常的方法是使用递归异步回调来处理每个单独的记录，而不是`for`循环。

虽然还有更多记录，但异步回调会调用自己。当没有记录时，它可以调用您提供的回调。

下面的代码将替换您的内部回调处理程序的内容：

```
(function nextRecord() {
    var row = results.rows.shift();
    if (row) {
        db.transaction(function (tx2) {
            tx2.executeSql('INSERT INTO table (name, parent_id) VALUES (?, ?)',
                [row.item(i).name, new_parent_id], nextRecord);
       });
    } else {
        callback();
    }
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:27:48.487

这最好通过记录“回调”函数的执行次数来完成，并且只有在达到结果集的全部数量时才继续。

这是您的修改后的代码：

```
function copyRecords(old_parent_id, new_parent_id, callback){
    var db = openDatabase('test', '1.0', 'test', 50 * 1024 * 1024);
    db.transaction(function (tx) {
        tx.executeSql('SELECT * FROM table WHERE parent_id = ?', [old_parent_id], function(tx, results){
            if (results.rows.length == 0) 
                callback(); // don't forget this case!
            else {
                var nbrInserted = 0; // This will keep track of how many have been inserted
                for(var i = 0; i < results.rows.length; i++){
                    db.transaction(function (tx2) {
                        tx2.executeSql('INSERT INTO table (name, parent_id) VALUES (?, ?)', [results.rows.item(i).name, new_parent_id], function() {
                            ++nbrInserted; // increment this for every insert
                            if (nbrInserted == results.rows.length) // check if complete
                                callback(); // Do your callback.
                        });
                    });
                }
            }
        });
    });
} 
```

至于我，我发现 WebSQL 的异步 API 有点繁琐，而且由于 WebSQL 数据库可能会消失（标准已被放弃），我建议大家切换到[SequelSphere](http://www.SequelSphere.com/)。它是一个 HTML5 / JavaScript 关系数据库，适用于所有浏览器和所有平台。它还将数据存储在 localStorage 中，为它提供了 WebSQL 的所有好处，没有任何麻烦。

如果上述解决方案对您不起作用，请告诉我。

祝你好运！

约翰...

# php - Mp4（通过使用 ffmpeg 连接两个 mp4 创建）不在 html5 视频标签中播放

> ID：12913691
> 
> 赞同：0
> 
> 时间：2012-10-16T11:27:07.667
> 
> 标签：php, html, ffmpeg, html5-video

我在 html5 的视频标签中播放 mp4 文件时遇到了麻烦。

我的服务器上有两个 mp4 文件。我使用以下代码。

```
<video width="320" height="240" controls="controls">
<source src="input.mp4" type='video/mp4 '/>
</video> 
```

这工作正常。之后，我使用 ffmpeg 连接两个 mp4。连接代码如下。

```
exec('ffmpeg -i input1.mp4 -qscale:v 1 intermediate1.mpg');
exec('ffmpeg -i input2.mp4 -qscale:v 1 intermediate2.mpg');
exec('cat intermediate1.mpg intermediate2.mpg | ffmpeg -f mpeg -i - -vcodec copy -acodec copy intermediate_all.mpg');
exec('ffmpeg -y -i intermediate_all.mpg -an -pass 1 -threads 2 $options temp.mp4');
exec('ffmpeg -y -i intermediate_all.mpg -acodec libfaac -ar 44100 -ab 96k -pass 2 -threads 2 $options temp.mp4');
exec('qt-faststart temp.mp4 new_output.mp4'); 
```

这种转换效果很好。我可以使用每个播放器播放这个文件，但是当我在视频标签中使用这个转换后的文件时它不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:30:39.153

你有没有尝试过。

```
<video width="320" height="240" controls="controls">
    <source src="input.mp4" type="video/mp4"/>
</video> 
```

(type='video/mp4', ' 必须是 ")。

# interface - MagicDraw - 使用真正的 UML 符号显示接口

> ID：12913694
> 
> 赞同：3
> 
> 时间：2012-10-16T11:27:21.680
> 
> 标签：interface, uml, tool-uml, magic-draw

我找不到一种方法（通过 MagicDraw 及其文档以及 Goolge 搜索）让 MagicDraw 显示一个接口，因为它在 UML 中使用原型符号 << interface >> 定义，而不仅仅是将其着色为绿色并画一个圆圈在右上角。

有人可以给我一个关于如何在 MagicDraw 中显示类似界面的提示吗？

PS：MagicDraw 16.8 是否有默认方式来绘制 .Net (C#) 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-17T09:57:33.770

我知道这是一个非常古老的问题，但如果其他人想知道答案（就像我到达这篇文章时的情况一样）：

1.  在 Containment 窗口中，右键单击 Data 文件夹并选择 New Element -> Stereotype。

2.  在 Data 文件夹下出现的新元素 << >> 中，将其重命名为 Interface。

3.  在 UML 主窗口中，右键单击您自己的界面符号并选择 Stereotype -> Interface [Element]（按照上述步骤创建 Stereotype 列表中的最后一项）。

这在 MagicDraw 版本 16 中进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:56:25.277

从理论上讲，您应该能够右键单击界面符号并更改“符号属性”/将原型显示为：文本。实际上可能有必要创建原型“界面”。我在 Magicdraw 17.0 中进行了尝试，但它没有按预期工作。可能需要向 NoMagic 报告错误。

# c# - Twain 扫描仪在 32 位上工作正常，但在 64 位上不行

> ID：12913695
> 
> 赞同：-2
> 
> 时间：2012-10-16T11:27:22.277
> 
> 标签：c#, twain

我正在使用此示例进行扫描 twain [.NET TWAIN 图像扫描仪](http://www.codeproject.com/Articles/1376/NET-TWAIN-image-scanner)

但是当我尝试在 64 位系统上运行我的项目时，它给了我这个错误：

> 试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）

根据我进行的多次搜索，我找到了 twaindsm.dll。我试图导入它，但系统卡住了。

我尝试用 32 位构建项目，但也没有成功。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T11:37:43.757

Twain DLL 适用于 32 位系统，基本上无法在 64 位上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-13T16:13:12.780

您可以找到 TWAINDSM DLL 的 64 位版本。在安装您的应用程序时，请确保此 DLL 与您的 exe 位于同一文件夹中，并确保您加载了此管理器。

在 64 位系统中，默认的 twain32 dll 位于 C:\Windows 下。因此，当 TWAIN 应用程序加载此模块时，它会加载 64 位版本。避免 DLL 解析与 TWAIN 冲突的最佳方法是移植您的 DSM 作为其中的一部分。这样它就可以在任何地方工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-19T14:34:28.187

> Twain DLL 适用于 32 位系统，基本上无法在 64 位上运行。

同意，这是问题的原因。

**这是解决方案：从 64 位应用程序访问扫描仪**

Asprise [Scanning C# VB.NET TWAIN WIA Scan SDK 可能是唯一适用于 64 位和 32 位应用程序的扫描库，这](http://asprise.com/c%23-vb.net-scanner-api/twain-wia-scan-pdf-library-overview.html)要归功于创新的正在申请专利的技术和质量实施。

您可以直接从 NuGet 获取该库：

[![在此处输入图像描述](../Images/2fd701a5b401093fee1b8112c471e4ea.png)](https://i.stack.imgur.com/Sk4OY.png) `Install-Package asprise-scan-scanner-twain-wia-api`

这是[C# VB.NET Twain Scanning Library API 的文档](http://asprise.com/c%23-vb.net-scanner-api/twain-wia-document-scan-library-sdk-samples-docs.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-17T12:32:21.650

将平台目标从项目属性更改为 x86。

# android - 获取 Android 的键盘文本值 Mono

> ID：12913701
> 
> 赞同：0
> 
> 时间：2012-10-16T11:27:52.737
> 
> 标签：android, keyboard, xamarin.android

创建键盘时如何获取键盘文本值

```
InputMethodManager imm=(InputMethodManager)getSystemService(yourActivity.this.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:19:45.177

为需要文本值的视图设置键侦听器

```
setOnKeyListener(new OnKeyListener() { //Make the view listen for key events
   public boolean onKey(View v, int keyCode, KeyEvent event) {
//Your code
            return true;
        }            
    }); 
```

# iphone - viewControllers 中的内存管理

> ID：12913703
> 
> 赞同：0
> 
> 时间：2012-10-16T11:27:58.687
> 
> 标签：iphone, variables, memory, memory-management, view

在我的应用程序中，我有许多*视图控制器*，并且在`viewDidUnload`这些视图的方法中，我一直将变量设置`nil`如下，`myString = nil;`但是我想知道这是否是正确的方法？

我的其他*viewController*都使用这行代码关闭/关闭，`[self dismissModalViewControllerAnimated:YES];`但是我不确定这是否会真正调用该`viewDidUnload`方法，或者是否有更好的卸载*viewController*的方法。

我从来没有 100% 清楚地知道内存管理的确切规则，而且我知道有了新`ARC`功能，它变得更容易了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:43:57.637

1.  您是否使用ARC？
2.  如果不使用 ARC，`myString = nil`则什么也不做，它不会释放任何东西（但`self.myString = nil`会）
3.  如果您将视图存储在`@property(retain)`( 或`@property(copy)`) 中，则应将这些属性设置回`nil`in `viewDidUnload`。（在弃用`iOS6`where之后`viewDidUnload`，您甚至应该在`didReceiveMemoryWarning`且仅当`isViewLoaded`is`YES`和`self.view.window`is时才释放它们`nil`）
4.  您不会`subviews`使用`dismissModalViewControllerAnimated`. 你解雇`UIViewControllers`。当你关闭一个 viewController 时，它会从视图层次结构中删除它的视图。一定要了解*视图*和视图*控制器*之间的区别（它们是不同的对象，MVC 模式的不同部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:39:54.233

**只需****定义**NSString *myString 并执行

```
myString = nil; 
```

然后它将空指针设置为 myString 但如果它被引用则不会释放内存。

现在，如果你创建NSString *myString 的@**属性，那么：**

```
self.myString = nil; 
```

如果它被引用，它会释放内存并添加空指针。

现在在**ARC**中，**不需要释放**对象，因为它会自动释放，而只是**明智地使用**.

在**非 ARC**中，**您需要释放**分配或引用的内存。

# android - 如何设置 android spinner 提示样式

> ID：12913704
> 
> 赞同：4
> 
> 时间：2012-10-16T11:27:58.360
> 
> 标签：android, android-spinner, prompt

我开发了一个例子。

在这里，我必须设置微调器提示的样式。请帮我。我该如何设计它？

这是我的**string.xml**代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="hello">Hello World, CustomizedListView!</string>
<string name="app_name">CustomizedListView</string>
<string name="status_prompt">Choose a Status</string>
</resources> 
```

此代码用于我的 main.xml：

```
<Spinner android:id="@+id/spinner1" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="106dp"
    android:layout_y="100dp"
    android:prompt="@string/status_prompt" 
    android:background="@drawable/btn_dropdown"/> 
```

在这里，我希望更改背景颜色和`textSize`，`textStyle`在下图中。我该如何改变这一点。

![微调器提示](../Images/70d7a5247f79bcde251a0622d7947427.png)

**编辑：** 我在**styles.xml中添加了以下代码**

```
<style name="spinner_style">                        
<item name="android:layout_width">fill_parent</item>
<item name="android:layout_height">wrap_content</item>
<item name="android:textColor">#040404</item>
<item name="android:typeface">monospace</item>
<item name="android:background">#FFFFFF</item>
</style> 
```

还在 main.xml 中为微调器添加了以下行：

```
 style="@style/spinner_style" 
```

但这对我也不起作用。如何设置微调器提示消息的样式。

**编辑：**

这是我的java代码`ArrayAdaper`：

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

    } 
```

如何在此处设置提示样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-18T20:09:13.427

为了更改提示，您需要使用与@aswin-kumar 建议的方法类似的方法，但下拉列表的第一个元素使用单独的样式：

首先，扩展`ArrayAdapter`并调用它`CustomArrayAdapter`：package com.example.project；

```
package com.example.project;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.TextView;

import java.util.List;

// I extend this using ArrayAdapter<String>, but you can use anything as the type
// parameter, or parameterize it as necessary.
public class CustomArrayAdapter extends ArrayAdapter<String> {

    private String title;

    public CustomArrayAdapter(Context aContext, int aTextViewResource, List<String> aOptions, String title) {
        super(aContext, aTextViewResource, aOptions);
        this.title = title;
    }

    @Override
    public View getDropDownView(int aPosition, View aConvertView, ViewGroup aParent) {

        LinearLayout v = null;

        if (aPosition == 0) {
            LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = (LinearLayout) inflater.inflate(R.layout.dropdown_header, aParent, false);
            TextView tv = (TextView) v.findViewById(R.id.dropdown_item);
            tv.setText(getItem(aPosition));
        } else {
            LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = (LinearLayout) inflater.inflate(R.layout.dropdown_item, aParent, false);
            TextView tv = (TextView) v.findViewById(R.id.dropdown_item);
            tv.setText(getItem(aPosition));
            tv.setHeight((int) (tv.getTextSize() * 2));
        }

        return v;
    }

    @Override
    public int getCount() {
        return super.getCount() + 1;
    }

    @Override
    public String getItem(int position) {
        if (position == 0) {
            return title;
        }
        return super.getItem(position - 1);
    }

    @Override
    public boolean isEnabled(int position) {
        return position != 0;
    }
} 
```

现在，为您的 使用以下布局`dropdown_header.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView
        android:id="@+id/dropdown_item"
        android:textColor="@android:color/black"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="16dp"
        android:paddingBottom="16dp"
        android:paddingLeft="16dp"
        android:gravity="left|center_vertical"
        android:textSize="9pt" />

    <!-- This adds a black separator line between the title and the items. You can remove
         if you want -->
    <LinearLayout
        android:id="@+id/separator"
        android:layout_height="4dp"
        android:layout_width="match_parent"
        android:background="@android:color/black"
        android:orientation="vertical"/>
    </LinearLayout> 
```

表单视图布局文件（form_view_layout.xml）：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/spinner_dialog_root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="9pt" /> 
```

微调器布局文件 ( `spinner_layout.xml`)：

```
 <Spinner
android:id="@+id/spinner"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:background="@android:color/transparent"/> 
```

现在，将新适配器连接到您的`Spinner`：

```
CustomArrayAdapter adapter = new CustomArrayAdapter(aActivity, R.layout.form_view_layout, aModel.getEnumerableOptions(), aModel.getTitle());
View parentView = aActivity.getLayoutInflater().inflate(R.layout.spinner_layout, aParent, false);

spinner = (Spinner) parentView.findViewById(R.id.spinner);
spinner.setAdapter(adapter); 
```

最后，将要显示的字符串添加到微调器适配器，`adapter`并设置适当的文件样式，一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:17:14.823

您需要为从`ArrayAdapter`. `getView()`当布局系统指示您在 pic 中显示的视图需要绘制时，将调用该函数。您可以覆盖它并添加 textSize、textStyle 等。

更新：粗略的代码示例是：

```
private class MySpinnerAdapter extends ArrayAdapter<String> {
        public MySpinnerAdapter(Context context, int resource,
                int textViewResourceId, List<String> objects) {
            super(context, resource, textViewResourceId, objects);
        }

    public View getView(int position, View convertView,
            ViewGroup parent) {
        View v = super.getView(position, convertView, parent);
        // apply the style and sizes etc to the Text view from this view v
        // like ((TextView)v).setTextSize(...) etc
        return v;
    }

    public View getDropDownView(int position, View convertView,
            ViewGroup parent) {
        // this is for each of the drop down resource that is created. 
            // you can style these things too
        }
} 
```

将此用作微调器的适配器：

```
mySpinner.setAdapter(new MySpinnerAdapter(ActivityName.this,
                    R.layout.spinner_item,
                    R.id.spinner_item_TextView, 
                    listOfItemsInSpinner)); 
```

# php - Symfony 清除所有环境的缓存和转储资产？

> ID：12913709
> 
> 赞同：2
> 
> 时间：2012-10-16T11:28:06.923
> 
> 标签：php, symfony

我知道我可以在每个环境中转储资产并清除缓存：

```
php app/console cache:clear --env=prod 
```

但是有没有办法清除*所有*环境的缓存？对于资产转储和具有该环境选项的所有命令，同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T14:53:51.127

也许你可以使用[Fabric](https://www.fabfile.org/)、[Capistrano](http://capistranorb.com/)或[Capifony](https://everzet.github.io/capifony/)之类的东西来自动化这个过程。

# facebook-apps - 申请已被删除

> ID：12913712
> 
> 赞同：2
> 
> 时间：2012-10-16T11:28:36.327
> 
> 标签：facebook-apps

我的兄弟有一个 Facebook 应用程序，它运行了一个多月，每天都有很多用户。当我们今天检查时，开发者仪表板没有显示该应用程序。它甚至没有在应用程序列表（仪表板的左窗格）中列出应用程序名称。

当我们检查服务器中的error_log时，最后一条消息是：

> [2012 年 10 月 15 日 22:28:31 UTC] OAuthException：验证应用程序时出错。申请已被删除。

为什么 Facebook 会自动删除该应用程序？还是因为 Facebook 服务器出现故障？我们如何联系 Facebook 团队对此进行调查？

或者，创建一个具有相同名称和其他详细信息的新应用程序将是解决此问题的唯一方法？

关于这个问题的任何提示或想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-18T06:00:27.870

如果您是该应用程序的所有者，您可以访问[https://developers.facebook.com/appeal](https://developers.facebook.com/appeal) 将会有一个受限应用程序您可以上诉。您可以看到您的应用程序受到限制的原因。像这样：

> 我们的自动化系统已将您的应用 NNN (123) 标记为收到大量负面用户反馈。
> 
> 请查看以下有关您的应用限制的常见问题。
> 
> *   仅在获得用户明确同意后发布或标记照片（FPP IV.3）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:42:18.467

facebook tends to delete apps that, for example, dont have a privacy policy or terms of service. I would go about and contact facebook about this. They'll be able to tell you more. good luck!

# emacs - 在 evil-normal-state-map 中重新绑定 :b 和 :e

> ID：12913713
> 
> 赞同：10
> 
> 时间：2012-10-16T11:28:38.873
> 
> 标签：emacs, evil-mode

我不知道如何在 Emacs 的邪恶模式下重新绑定`:b`and`:e`命令。谷歌也没有太大帮助。

我已经尝试过`(define-key evil-normal-state-map ":b" 'helm-buffers-list)`了，但是这搞砸了`:`输入命令的关键。

目前我正在使用`(define-key evil-normal-state-map ",b" 'helm-buffers-list)`，`(define-key evil-normal-state-map ",e" 'find-file)`但我更喜欢打开它们`:b`，`:e`所以在使用真正的 Vim 时动作是一样的。

请不要提及重新映射到Vim`,b`和`,e`在 Vim 中。:-)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T14:06:38.130

好的，需要（重新）定义一个`evil-ex-define-cmd`：

*   `(evil-ex-define-cmd "b[uffer]" 'helm-buffers-list)`
*   `(evil-ex-define-cmd "e[dit]" 'find-file)`

除了现在他们需要`<enter>`after `:<cmd>`。

**对**，在对源代码进行了更多搜索之后，我找到了解决方案：

*   `(define-key evil-ex-map "b" 'helm-buffers-list)`
*   `(define-key evil-ex-map "e" 'find-file)`

现在`<enter>`输入 fe 后不需要了`:b`。

# iis-7 - 明智的做法是：在 IIS 级别强制执行 HTTPS 或通过 web.config 设置强制执行 HTTPS？

> ID：12913715
> 
> 赞同：0
> 
> 时间：2012-10-16T11:28:39.717
> 
> 标签：iis-7, https

全部，

我需要通过 SSL 保护我的 Web 应用程序。我有几个选择

1.  通过 web.config 使用配置启用 HTTPS 连接。
2.  通过 IIS（安全）启用 HTTPS 设置。

但我进退两难，无法在两者之间做出明智的选择。我不知道除了 2 之外是否还有其他选项（除非 URL 重定向选项）。

请建议哪个选项可能是首选，为什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:53:50.060

全部，

我相信这个问题在 WCF Web 服务的上下文中是无关紧要的，其中需要使用“添加绑定功能”在 IIS 级别启用 HTTPS，以及使用相关的 clientCredentialType 将安全标记配置为传输。

`<bindings> <webHttpBinding> <binding name="webBind" bypassProxyOnLocal="true"> <security mode="Transport"> <transport clientCredentialType="None" /> </security> </binding> </webHttpBinding> </bindings>`

PS：我很抱歉格式化部分，因为我无法破解它。

# android - 它有时会发生 - OutOfMemoryError

> ID：12913720
> 
> 赞同：1
> 
> 时间：2012-10-16T11:29:17.590
> 
> 标签：android

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

我正在创建一个游戏。它工作得很好，但有时它会抛出这样的消息：`Out of memory on a 1024016-byte allocation`！我不明白为什么android确实不能分配1MB的内存？我正在使用`BitmapFactory.decodeResource(res, id)`功能。如果位图变得无用，我会立即回收它！我什至减小了位图的大小！如果有人知道如何解决此问题，我将不胜感激！LogCat 下面：

```
10-11 09:56:28.312 I/dalvikvm(13613): "main" prio=5 tid=1 RUNNABLE
10-11 09:56:28.312 I/dalvikvm(13613):   | group="main" sCount=0 dsCount=0 obj=0x40a32460 self=0x18e5828
10-11 09:56:28.312 I/dalvikvm(13613):   | sysTid=13613 nice=0 sched=0/0 cgrp=default handle=1075090664
10-11 09:56:28.312 I/dalvikvm(13613):   | schedstat=( 0 0 0 ) utm=788 stm=85 core=0
10-11 09:56:28.320 I/dalvikvm(13613):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:374)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:404)
10-11 09:56:28.320 I/dalvikvm(13613):   at mygames.airdefense.extensions.FunctionalHelper.getBmpFromRes(FunctionalHelper.java:30)
10-11 09:56:28.320 I/dalvikvm(13613):   at mygames.airdefense.weathereffect.Wind.<init>(Wind.java:37)
10-11 09:56:28.320 I/dalvikvm(13613):   at mygames.airdefense.game.GameEngineMultiPlayer.InitObjects(GameEngineMultiPlayer.java:268)
10-11 09:56:28.320 I/dalvikvm(13613):   at mygames.airdefense.game.GameEngineMultiPlayer.<init>(GameEngineMultiPlayer.java:170)
10-11 09:56:28.320 I/dalvikvm(13613):   at mygames.airdefense.game.GameActivity.onCreate(GameActivity.java:189)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.Activity.performCreate(Activity.java:4465)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.ActivityThread.access$700(ActivityThread.java:123)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.os.Looper.loop(Looper.java:137)
10-11 09:56:28.320 I/dalvikvm(13613):   at android.app.ActivityThread.main(ActivityThread.java:4424)
10-11 09:56:28.320 I/dalvikvm(13613):   at java.lang.reflect.Method.invokeNative(Native Method)
10-11 09:56:28.320 I/dalvikvm(13613):   at java.lang.reflect.Method.invoke(Method.java:511)
10-11 09:56:28.320 I/dalvikvm(13613):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-11 09:56:28.320 I/dalvikvm(13613):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-11 09:56:28.320 I/dalvikvm(13613):   at dalvik.system.NativeStart.main(Native Method)
10-11 09:56:28.320 I/dalvikvm(13613): 
10-11 09:56:28.328 D/skia    (13613): --- decoder->decode returned false
10-11 09:56:28.335 D/AndroidRuntime(13613): Shutting down VM
10-11 09:56:28.335 W/dalvikvm(13613): threadid=1: thread exiting with uncaught exception (group=0x40a311f8)
10-11 09:56:28.351 E/AndroidRuntime(13613): FATAL EXCEPTION: main
10-11 09:56:28.351 E/AndroidRuntime(13613): java.lang.OutOfMemoryError
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:374)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:404)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at mygames.airdefense.extensions.FunctionalHelper.getBmpFromRes(FunctionalHelper.java:30)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at mygames.airdefense.weathereffect.Wind.<init>(Wind.java:37)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at mygames.airdefense.game.GameEngineMultiPlayer.InitObjects(GameEngineMultiPlayer.java:268)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at mygames.airdefense.game.GameEngineMultiPlayer.<init>(GameEngineMultiPlayer.java:170)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at mygames.airdefense.game.GameActivity.onCreate(GameActivity.java:189)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.Activity.performCreate(Activity.java:4465)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.ActivityThread.access$700(ActivityThread.java:123)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.os.Looper.loop(Looper.java:137)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at java.lang.reflect.Method.invokeNative(Native Method)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at java.lang.reflect.Method.invoke(Method.java:511)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-11 09:56:28.351 E/AndroidRuntime(13613):     at dalvik.system.NativeStart.main(Native Method)
10-11 09:56:28.367 W/ActivityManager(  185):   Force finishing activity mygames.airdefense/.game.GameActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:49:26.153

```
public static Bitmap getBmpFromRes(Resources res, int id){  
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 1; // sample size value depends upon your image  so you have to              calculate it on run time.
    options.inPurgeable = true; //IMP
   return  BitmapFactory.decodeResource(res, id,options); } 
```

# javascript - 空多维数组初始化省略指针

> ID：12913722
> 
> 赞同：0
> 
> 时间：2012-10-16T11:29:22.473
> 
> 标签：javascript, arrays

有没有办法在 Javascript 中初始化空数组，在 php 中初始化相同的空数组？

```
$blah = array("0" => "wew", "1" => "fdafa");

foreach ($blah as $blat => $val) {
              $arr[] = $val
              $arr[$blah][] = 1; 
} 
```

要不就

```
foreach ($blah as $blat => $val) {
                  $arr[] = $val
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:34:53.703

不，您必须在将项目推送到它之前声明`var`并初始化它。`[]`

```
var blah = {"0":"wew", "1":"fdafa"}; // an object, not an array

var arr = [];
var obj = {}
for (var blat in blah) {
    var val = blah[blat];
    arr.push(val);
    obj[blat] = 1; 
} 
```

# sql - SQL Server 查询元素值的 xml 属性

> ID：12913724
> 
> 赞同：9
> 
> 时间：2012-10-16T11:29:28.917
> 
> 标签：sql, sql-server, xml, tsql, xquery

抱歉，如果这是在其他地方，我发现了很多类似的例子，但我无法让它与我的数据一起工作。2天后，我需要一个答案:(

基本上有一个 SQL Server 表，其中有一列包含 XML 数据。此数据包含我需要提取的值。

这是我的 XML。

```
 <CustomFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.kaseya.com/vsa/2007/12/ServiceDeskDefinition.xsd">
    <Field fieldName="AutoCategory">Event Log</Field>
    <Field fieldName="SType">Event Log</Field>
    <Field fieldName="STag1">AgentGuid</Field>
    <Field fieldName="STag2">AlertRegistrationId</Field>
    <Field fieldName="STag3">LogType</Field>
    <Field fieldName="SValue1">619764177412541</Field>
    <Field fieldName="SValue2">104</Field>
    <Field fieldName="SValue3">1380569194</Field>
    <Field fieldName="SdTicketId">RPSv1006330</Field>
    <Field fieldName="AgentName">bla bla</Field>
    <Field fieldName="MachineGroupGuid">86115414719112271316891312</Field>
    <Field fieldName="OrgFk">59165166782128125214185317</Field>
    <Field fieldName="GuidAgent">619764177412541</Field>
    <Field fieldName="AlertCount">0</Field>
    <Field fieldName="TicketTitle">bla bla</Field>
    <Field fieldName="LegacyId">152262</Field>
    <Field fieldName="LegacyRef">152262</Field>
    <Field fieldName="CwStatus">2</Field>
    <Field fieldName="CwTicketId">89495</Field>
</CustomFields> 
```

我需要能够提取与`CwTicketId`字段名称关联的值。

所以本质上，我想通过 XML 查找节点`fieldName = "CwTicketId"`并返回`89495`或等效值。

下面是我自己提出的代码，它提取值，但问题是有时 XML 的排序方式不同，因此值并不总是在我指定的行上，因此它返回准确的数据。

```
;WITH XMLNAMESPACES(DEFAULT N'http://www.kaseya.com/vsa/2007/12/ServiceDeskDefinition.xsd')
SELECT 
    ref as ServiceDeskID, 
    sdSummary as ServiceDeskSummary,
    customFields.value('(/CustomFields/Field/node())[17]', 'varchar(100)') as LegacyIDTicketing,
    customFields.value('(/CustomFields/Field/node())[19]', 'varchar(100)') as CWIDTicketing
FROM 
    [ksubscribers].[kasadmin].[SDIncident] 
```

我也需要第二个值，但如果我能弄清楚如何提取一个值，我可以复制另一个值。

希望有人可以帮助我，因为我已经开始扯掉我的头发了！

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T11:35:25.467

```
;WITH XMLNAMESPACES(DEFAULT N'http://www.kaseya.com/vsa/2007/12/ServiceDeskDefinition.xsd')
select
    T.C.value('data(.)', 'nvarchar(128)')
from [YOUR_TABLE] as Y
    outer apply Y.[YOUR_XML_COLUMN].nodes('/CustomFields/Field[@fieldName="CwTicketId"]') as T(C) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T11:50:08.357

尝试这个：

```
;WITH XMLNAMESPACES(DEFAULT N'http://www.kaseya.com/vsa/2007/12/ServiceDeskDefinition.xsd')
SELECT 
    ref as ServiceDeskID, 
    sdSummary as ServiceDeskSummary,
    CwTicketID = customFields.value('(/CustomFields/Field[@fieldName="CwTicketId"]/text())[1]', 'int')
FROM  
   [ksubscribers].[kasadmin].[SDIncident] 
```

这选择了`<Field>`具有`CwTicketId`作为其字段名称属性的节点 - 这将始终有效，无论 XML 及其节点如何排序（只要`fieldName` **值**保持不变`CwTicketId`）。

# php - HTML 输入表单 - 添加 Javascript 和 PHP 函数

> ID：12913726
> 
> 赞同：0
> 
> 时间：2012-10-16T11:29:38.077
> 
> 标签：php, javascript, html, forms

这个问题会让你思考：D。我有一个 HTML 输入表单，因为它似乎有太多的功能。有一个功能，所以当按下输入时它会提交数据。其他功能可以检查是否输入了某个关键字，以便将人们重定向到其他 URL。这一切都非常适合堆栈 overflov 的人。这是我的代码：

```
<script type="text/javascript"> 
<!-- 
function enter(e){ 
    if(e.keyCode == 13) 
    { 
        Login(); 
        return false; 
    } 
} 
//--> 
</script> 

    <script type="text/JavaScript"> 
     <!-- 
     function Login(){ 
     var keyword=document.getElementById("address").value; 
     var done=0; 
     keyword=keyword.toLowerCase(); 
     keyword=keyword.split(' ').join(''); 
     if (keyword=="example,example") { window.location="http://www.example.com"; done=1;} 
     if (keyword=="example1") { window.location="http://www.example1.com"; done=1;} 
     if (keyword=="example2") { window.location="http://www.example2"; done=1;} 
     if (done==0) { doSomethingElse(); } 
     } 
     //--> 
     </script>  

    <form name="enterkeyword" action="none"> 
        <input name="keyword" id="address" type="text" onkeypress="return enter(event);"/> 
        <div class="buttons"> 
        <button type="button" onclick="Login()">Submit</button> 
        </div> 
        </form> 
```

这就是问题所在。我需要找到一种方法将每个提交的查询保存到 excel 或 .CSV。我找到了一种使用 PHP 将输入数据保存到 .CSV 文件的方法。我测试了它并且它有效。但是，当我尝试使用输入表单上的现有功能来实现它时，它会搞砸一切。这是“查询保存功能”的代码，这是 HTML 部分：

```
<html>
<head>
    <title>My Form</title>
</head>

<body>
    <form action="save.php" method="post">
        <p>
            What is your favorite movie?<br>
            <input type="text" name="formMovie" maxlength="50" value="<?=$varMovie;?>" />
        </p>
        <p>
            What is your name?<br>
            <input type="text" name="formName" maxlength="50" value="<?=$varName;?>" />
        </p>                
        <input type="submit" name="formSubmit" value="Submit" />
    </form>
</body>
</html> 
```

这是 PHP 部分（save.php）：

```
<?php
if($_POST['formSubmit'] == "Submit")
{
    $errorMessage = "";

    if(empty($_POST['formMovie']))
    {
        $errorMessage .= "<li>You forgot to enter a movie!</li>";
    }
    if(empty($_POST['formName']))
    {
        $errorMessage .= "<li>You forgot to enter a name!</li>";
    }

    $varMovie = $_POST['formMovie'];
    $varName = $_POST['formName'];

    if(empty($errorMessage)) 
    {
        $fs = fopen("mydata.csv","a");
        fwrite($fs,$varName . ", " . $varMovie . "\n");
        fclose($fs);

        exit;
    }
}
?>

    <?php
        if(!empty($errorMessage)) 
        {
            echo("<p>There was an error with your form:</p>\n");
            echo("<ul>" . $errorMessage . "</ul>\n");
        } 
    ?> 
```

两个代码都很好用，但我只是不知道如何实现它们，所以它们可以一起工作以形成相同的形式......顺便说一句，这个 PHP 函数有 2 个输入字段，我只需要 1 个，如果有字段，我真的不需要这个错误消息空...我知道这很复杂，但是比我更了解这一点的人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:52:36.333

**完成更新**

嘿，我再次分离了功能并使代码可读和可维护。

索引.html

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles/index.css"/>
    </head>
    <body>
        <input type="text" id="txt" value="example1"/><br/>
        <input type="button" id="btn" value="doQuery()"/>

        <script src="scripts/index.js"></script>
    </body>
</html> 
```

索引.js

```
function processValue() {

    var inputText = document.getElementById("txt").value.toLowerCase().split(' ').join('');

    // Export query
    exportQuery( inputText );
}

function exportQuery( query ) {

    var script = document.createElement("SCRIPT");

    script.setAttribute( 'type', 'text/javascript' );
    script.setAttribute( 'src', 'exportQuery.php?query=' + query );

    document.head.appendChild( script );
}

var urlMapper = {

    "example,example": "http://www.example.com",
    "example1": "http://www.example1.com",
    "example2": "http://www.example2.com"
}

/**
 * Should be called when the PHP has finished execution
 */
function onPhpReady( query ) {

    var url = urlMapper[ query ];

    if( url !== undefined ) {

        goToUrl( url );

    } else {

        codeAddress();
    }
}

function goToUrl( url ) {

    window.location = url;
}

function codeAddress() {

    alert( "Access Denied" );
}

( function() {

    // Selfexecuting code.

    function addButtonClickListener() {

        var btn = document.getElementById("btn");

        btn.addEventListener( "click", processValue, false );
    }

    function processKeyPress( e ) {

        if( e.keyCode == 13 ) {

            processValue();
        }
    }

    function addInputKeyPressListener() {

        var input = document.getElementById("txt");

        input.addEventListener( "keypress", processKeyPress, false );
    }

    addButtonClickListener();
    addInputKeyPressListener();

}() ); 
```

导出查询.php

```
<?php
    // Get the request
    $query = $_GET['query'];

    if( !empty( $query ) ) 
    {
        writeToCSV( $query );
        notifyReady( $query );
    }

    function writeToCSV( $query ) {

        $fs = fopen( "storedQueries.csv", "a" );

        fwrite( $fs, $query . "\n" );

        fclose( $fs );
    }

    function notifyReady( $query ) {

        // print back as plain javascript
        print <<<ENDLINE
        onPhpReady( '$query' )
ENDLINE;
        // The ENDLINE ^ can't use spaces or it will give a parse error.
    }
?> 
```

资料来源：[丹尼网](http://www.daniweb.com/web-development/php/threads/20972/how-to-call-a-php-function-from-javascript-and-return-the-results-back-into-javascrip#post668543)

请注意我的目标是 Webkit，因此为了兼容性，您必须更改附加事件的方式等。

# java - Java中的内部类 - 非静态变量错误

> ID：12913731
> 
> 赞同：2
> 
> 时间：2012-10-16T11:29:50.227
> 
> 标签：java, class, inner-classes

我还是 java 新手，我尝试创建一个内部类并在 main 中调用该方法。但是有一个编译错误说“非静态变量 - 这不能从静态上下文中引用”

请帮忙

```
class Class1{

    public static void main(String args []){
        Class2 myObject = new Class2();
        myObject.newMethod();
    }

    public class Class2{
        public void newMethod(){
            System.out.println("Second class");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T11:31:34.187

内部类需要引用外部类的实例*才能**被*构造。如果您的类在逻辑上不需要它，那么使用`static`修饰符使其“只是一个嵌套类”：

```
public static class Class2 {
    public void newMethod(){
        System.out.println("Second class");
    }
} 
```

编辑：要创建一个内部类的实例`Class2`，*您*可以使用以下内容：

```
Class1 outer = new Class1();
Class2 myObject = outer.new Class2(); 
```

或更简单地说：

```
Class2 myObject = new Class1().new Class2(); 
```

...但除非你真的*想要*一个封闭实例的引用，否则让这个类只是一个嵌套类要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:32:56.747

通过添加 static 关键字使内部类成为静态的

```
public static class  Class2 
```

那么它应该可以工作。在非静态上下文中，你不能问任何静态的东西。或者，您可以通过创建对象而不将 class2 作为静态对象来访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:33:00.927

访问内部类就像访问类的任何其他常规方法一样。

因此，就像您需要对`instance`类的引用来访问其方法一样，同样您需要对外部类的实例的引用来实例化您的内部类：-

```
Class1.Class2 myObject = new Class1().new Class2(); 
```

或者，**另一种选择**是，您可以制作您的内部类`static`，在这种情况下它被称为 a `nested class`，那么您可以使用您原来的方式：-

```
public static class Class2{
    public void newMethod(){
        System.out.println("Second class");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T12:29:57.117

如果您是 Java 新手，下一个示例可能对您也有帮助。

1.  “main()”不适合任何复杂的逻辑。您不能从中调用任何在类中不是静态的方法。“main()”仅用于启动应用程序，

2.  在许多情况下，首先您需要创建包含方法“main”的类实例。例如，它是“OuterClass”。

3.  当“OuterClass”的实例存在时，你可以从它调用任何动态的东西，比如你的 InnerClass 对象的 InnerClass 方法。

这是一个例子：

```
public class OuterClass {
    public static void main(String args []){
        new OuterClass();   // Instance of First class
    }

    public OuterClass () { // constuctor
        InnerClass myObject = new InnerClass();
        myObject.newMethod();
    }

    public class InnerClass{
        public void newMethod(){
            System.out.println("Second class");
        }
    }

} 
```

# powershell - Powershell Get-ChildItem -Filter 与具有相同值的 Where 子句的操作方式不同

> ID：12913734
> 
> 赞同：18
> 
> 时间：2012-10-16T11:29:55.970
> 
> 标签：powershell, filter, get-childitem

我在名为 MyFolder 的服务器上有一个文件夹。还有其他文件夹称为 MyFolder.1、MyFolder.2、MyFolder.3 等。

如果我运行：

```
gci C:\Sample | ? { $_.Name -like "MyFolder.*" } 
```

我得到了预期的输出：

```
 Directory: C:\Sample

Mode                LastWriteTime     Length Name                                                                      
----                -------------     ------ ----                                                                      
d----        16/10/2012     12:16            MyFolder.1                                                                
d----        16/10/2012     12:16            MyFolder.2                                                                
d----        16/10/2012     12:16            MyFolder.3 
```

但是，如果我运行：

```
gci C:\Sample -Filter "MyFolder.*" 
```

我得到：

```
 Directory: C:\Sample

Mode                LastWriteTime     Length Name                                                                      
----                -------------     ------ ----                                                                      
d----        16/10/2012     12:16            MyFolder                                                                  
d----        16/10/2012     12:16            MyFolder.1                                                                
d----        16/10/2012     12:16            MyFolder.2                                                                
d----        16/10/2012     12:16            MyFolder.3 
```

我对**MyFolder**如何包含在输出中感到困惑。我希望输出是相同的。

[在线帮助](http://technet.microsoft.com/library/hh849800.aspx)强调过滤器的语法基于提供程序，但我不确定在此实例中使用的是哪个提供程序。

我在这里缺少基本知识吗？我试图将正则表达式字符串传递给过滤器，例如`"MyFolder\.*"`，但这根本不返回任何内容。我确定我错过了一些简单的东西。

我正在运行 Powershell 版本 2。

### 解析度

感谢 Roman Kuzmin 指出通配符匹配的差异。以下给出了预期的输出：

```
gci C:\Sample\MyFolder.* 
```

我将来会使用这种语法来减少代码中的噪音。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T12:24:13.837

FileSystem 提供程序使用 CMD 通配符而`Filter`不是 PowerShell 通配符。CMD 通配符在某些边缘情况下很有趣且不直观，主要是在历史上。这是一个有趣的解释：[https ://devblogs.microsoft.com/oldnewthing/20071217-00/?p=24143](https://devblogs.microsoft.com/oldnewthing/20071217-00/?p=24143)

另一个需要牢记的问题：`ls -Filter *.txt`实际上获取`*.txt*`PowerShell 意义上的文件，即扩展名以*txt***开头**的文件。在某些情况下，这可能是出乎意料且非常不愉快的 :)

 ** * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-16T12:06:48.070

```
gci C:\Sample -Filter "MyFolder.*"  # here is a filesystem provider; use wildcard `*`,`?` 
```

返回与（在 cmd.exe shell 中）相同的输出：

```
dir Myfolder.* 
```

如果您需要正则表达式，这就是方式（`-filter`不接受正则表达式）

```
gci C:\Sample | ? { $_.Name -match '^MyFolder\..*' } 
```

像这儿

```
gci C:\Sample | ? { $_.Name -like "MyFolder.*" } 
```

脚本块中的比较是`[string]`类型之间的。*

# ruby-on-rails - 可安装在导轨上的发动机和装置

> ID：12913737
> 
> 赞同：2
> 
> 时间：2012-10-16T11:30:21.323
> 
> 标签：ruby-on-rails, ruby, devise, gem, rails-engines

我有一个带设计的可安装导轨引擎。当我复制我的迁移并在虚拟应用程序中运行 rake db:migrate 时，它​​工作得很好。

但是当我使用新的 rails 应用程序时，将我的引擎添加到 gem 文件中，复制迁移并运行 rake db:migrate 我得到这个错误`"uninitialized constant Devise".`

我的路线文件中有这个：

```
mount Cms::Engine, :at => '/', :as => 'cms' 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:40:44.140

我认为您需要在引擎`engine.rb`文件中明确要求设计。

从[Rails 指南](http://edgeguides.rubyonrails.org/engines.html#other-gem-dependencies)：

> 请注意，如果您想在需要引擎时立即要求依赖项，则应在引擎初始化之前要求它们。例如：

所以只需添加`require 'devise'`到顶部或您的`engine.rb`.

# mysql - 如何创建一个 SQL 文件，其中插入到具有链接 ID 的多个表？

> ID：12913738
> 
> 赞同：0
> 
> 时间：2012-10-16T11:30:29.557
> 
> 标签：mysql, foreign-keys, bulkinsert

我有一个 PHP 程序，它将一系列数据库插入到几个表中。

程序要求生成它所做的插入的 SQL 转储，以便它们可以插入到另一个数据库中。（这第二个数据库具有相同的模式，但不同的数据）。

生成 SQL 转储很容易：只需在执行查询字符串时输出它们。

但是，因为我们正在使用交叉引用的 ID 字段对多个表进行插入操作，所以以这种方式生成的 SQL 包含外键字段的固定 ID 值。

即转储文件的示例可能如下所示：

```
insert into tableA  ....
insert into tableB  .... id_a = 365 ....
insert into tableC  .... id_b = 1895, id_a = 365 .... 
```

...其中“365”和“1895”通过 PHP 调用填充到查询中，`$mysqli->insert_id`以获取插入到前一个表中的记录的 ID。

因此，这代表了为将数据插入数据库而执行的查询的准确图景。

问题是当 SQL 转储在第二个数据库上运行时，这些固定的 ID 值显然不会正确。当第一条记录插入到第二个 DB 上的 tableA 中时，结果记录的 ID 不会是 365，因此由于后续插入 tableB 和 tableC 包含对该 ID 的固定引用，因此它们将插入其外键指向到错误的记录。

我怎么解决这个问题？

有没有一种方法可以生成这种类型的 SQL 转储，它引用同一查询转储中的其他插入但没有固定 ID？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:08:50.383

您可以先尝试插入数据，然后创建引用约束 ALTER TABLE。即使发生错误，INSERT IGNORE 也会继续将数据插入表中。因此，只有冲突的值不会填充到表中。

# bash - 用于删除文件夹名称并将其与不同目录中的部分文件名匹配的 Bash 脚本

> ID：12913742
> 
> 赞同：1
> 
> 时间：2012-10-16T11:30:31.990
> 
> 标签：bash, shell, compare, pattern-matching

[编辑] 问题解决了。脚本更新如下。感谢大家的帮助。我需要做一些修改才能使其全部使用文件夹名称和非空文件夹中的空格。

真的很难对付这个。

下载文件后，我的系统会创建两件事：

1.  一个文件（在我的“工作”目录中创建），例如

    *   Johns.Pizza.Place.5489231.job
    *   Marks.Hair.Salon.NY.888.job
    *   Rachels.Bike.and.Boat.Shop.11122287865.job
2.  带有文件名的文件夹（在我的“临时”目录中创建），例如

    *   约翰比萨店
    *   Marks.Hair.Salon.NY
    *   Rachels.Bike.and.Boat.Shop

如您所见，文件夹名称总是与文件名的一部分匹配，但每个文件总是附加一个随机数的长度，然后是扩展名（即“.job”）。

我想要做的是能够运行一个试图

1.  匹配文件目录中的文件夹名称但仅进行部分匹配，因为文件同时添加了随机数和扩展名，然后

2.  当找不到相关文件时删除这些文件夹（我在某些操作后使用 Hazel 删除文件）。如果找到一个文件夹的匹配文件，我不希望删除该文件夹。

这是我尝试过的，但我知道它不完整。显然，我试图仅在路径中提取文件夹名称以匹配已删除扩展名的部分文件名，但我不确定如何删除随机数字符串。

[编辑]：下面的最终工作脚本

```
#! /bin/sh

MainDir="/Users/Dhy/Desktop/Temp Files/1\. All Files/"
JobDir="/Users/Dhy/Documents/All Jobs/"                             

find "$MainDir"* -maxdepth 0 -type d | while read FolderName; do
SuffixName=$(basename "${FolderName}");
    preserve=''
    for file in "$JobDir"*.job; do
        if [[ $file\.[0-9]+ =~ $SuffixName ]]; then 
            preserve='on'
        break 
        fi
    done

    if [ -z $preserve ]; then
        rm -rf "$MainDir$SuffixName"
    fi
done 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:37:26.257

你可以这样做：

```
for Dir in $(find $MainDir* -maxdepth 0 -type d ); do
    FolderName=$(basename $Dir);
    cd /Users/Dhy/Documents/Jobs
    if [ -z "$(find . -regex "\./$FolderName\.[0-9]*\.job")" ]
         rmdir "$FolderName"
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:12:15.473

如果您绝对确定实际文件名不包含数字，则可以替换`name=${file%%[.]*}`为`name=${file%%.[0-9]*}`.

同样在您当前的脚本中，只要第一个`name`不匹配，您就删除该目录`FolderName`。正确的做法是检查所有`name`s 是否不匹配，即仅在内部 for 循环结束后删除目录。如果匹配，设置一个标志（在下面的例子中，一个非空字符串）以防止目录被删除。

这是我的想法：

```
#!/bin/bash

MainDir="/Users/Dhy/Desktop/Temp/"
JobDir="/Users/Dhy/Documents/Jobs/"

for Dir in $(find $MainDir* -maxdepth 0 -type d ); do
    FolderName=$(basename $Dir);
    preserve=''
    for file in $JobDir*.job; do
        if [[ $file =~ $FolderName\.[0-9]+ ]]; then 
            preserve='on'
            break 
        fi
    done

    if [ -z $preserve ]; then
       rmdir $MainDir$FolderName
    fi
done 
```

p/s：`.`在参数扩展中不是特殊字符，所以可以不带方括号使用。

p/s2：这里不需要`cd`，只需将路径附加到`*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:02:54.713

您对 %% 的使用是删除第一个点之后的所有内容，而不是最后一个点。像这样的东西可能是你想要的转换：

```
name="${file%.*.job}" 
```

% 运算符是非贪婪的，因此它将选择要删除的最短匹配字符串。

# android - HTML5 Canvas 在 Odroid-X 上运行缓慢

> ID：12913750
> 
> 赞同：2
> 
> 时间：2012-10-16T11:30:47.483
> 
> 标签：android, html5-canvas, odroid

我需要一个画布动画作为信息亭应用程序的背景。我有一个 Odroid-X 板（详细信息[在这里](http://www.hardkernel.com/renewal_2011/products/prdt_info.php?g_code=G133999328931)），我正在测试应用程序。我还在三星 Galaxy Nexus 智能手机上测试它们。我自己的动画和我在网上找到的其他动画在智能手机上运行起来就像一个魅力，但在 Odroid-X 板上却非常滞后。我在 Android 浏览器和带有 WebView 的 apk 中对其进行了测试，结果相同。任何人有任何想法来提高性能？

编辑：`android:hardwareAccelerated="true"`在 AndroidManifest.xml 中，它运行得更顺畅，但仍然有点过于滞后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:47:36.893

您可以尝试添加`transform: translateZ(0);`样式（并以版本为前缀...），它将 3D 转换应用于 DOM 元素，从而在可用的情况下启用硬件加速。

# php - 如何使用 php 抓取 Flash 视频应用程序

> ID：12913752
> 
> 赞同：0
> 
> 时间：2012-10-16T11:30:52.697
> 
> 标签：php, flash

有一个我想抓取的页面，它有一个 Flash 应用程序。当我把整个页面粘贴到我的本地主机上时，它不会播放。

我知道 Flash 应用程序的标记看起来像这样：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" 
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,115,0" width="1" height="1" id="flash8" align="middle">
<param name="allowScriptAccess" value="sameDomain" />
<param name="movie" value="http://www.ecam.com/swf/flash8.swf" /><param name="quality" value="high" /><param name="bgcolor" value="#ffffff" />
<embed src="http://www.ecam.com/swf/swf/flash8.swf" quality="high" bgcolor="#ffffff" width="1" height="1" name="flash8" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />
</object> 
```

但我不知道还有什么可以抓取的，所以我获取了 Flash 应用程序。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:32:28.483

是的，它不会因为路径而播放

```
 <param name="movie" value="/swf/flash8.swf" />
                                 ^----------- this is not on your local host 
```

你需要用类似的东西替换

```
 <param name="movie" value="http://istoleit.com/swf/flash8.swf" /> 
```

或者下载它并放置正确的路径....

# google-maps - Google Place API 问题

> ID：12913756
> 
> 赞同：2
> 
> 时间：2012-10-16T11:31:13.783
> 
> 标签：google-maps, google-places-api

我正在使用 Google place API 来获取某个位置附近的医院。

这（24.4758,54.3747）拉长**只给了两家医院**

[https://maps.googleapis.com/maps/api/place/search/json?location=24.4758,54.3747&radius=50000&types=hospital&sensor=false&key=YourAPIkey](https://maps.googleapis.com/maps/api/place/search/json?location=24.4758,54.3747&radius=50000&types=hospital&sensor=false&key=YourAPIkey)

我在谷歌地图上搜索了**Al Sharqi St - Abu Dhabi 附近的医院**，显示有十多家医院。

请建议在获取所有医院的 API 请求中还需要包含哪些内容。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:46:03.920

所有地点都归类在该类型下，`establishment`直到 Google 有足够的关于某个地点的元数据将其归类为支持的地点类型（如`restaurant`、等`bar`） 。`hospital`

一种解决方法是将地点类别类型作为 a`keyword`而不是类型传递。该`keyword`参数与所有可用字段匹配，包括但不限于姓名、类型和地址，以及客户评论和其他第三方内容。

[https://maps.googleapis.com/maps/api/place/search/json?location=24.4758,54.3747&radius=50000&keyword=hospital&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/search/json?location=24.4758,54.3747&radius=50000&keyword=hospital&sensor=false&key=YOUR_API_KEY)

请不要发布您的 API 密钥，因为它与您的开发者帐户相关联。我建议尽快在您的[API 控制台中重置它。](https://code.google.com/apis/console/)

# qt - 将 QtWebKit 与 Qt5 beta 一起使用

> ID：12913759
> 
> 赞同：2
> 
> 时间：2012-10-16T11:31:22.753
> 
> 标签：qt, webkit, qml, qtwebkit

我已经在 Mac 上安装了 Qt5 的 beta 版本，并试图将 Web 视图组件添加到另一个 qml 类型。但是我的程序因错误而失败：`module "QtWebKit" is not installed`.

我已将以下内容添加到我的 .pro 文件中：

> QT += webkit

和一个合适的包含语句到我的 .qml 文件：

> 包括 QtQuick 2.0
> 包括 QtWebKit 3.0

谁能建议可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:53:40.487

首先，我建议升级到 Qt 5 发行版。另请注意，如果您想在 .pro 文件中使用 WebKit，则需要 `QT += webkit webkitwidgets`从 Qt 5 开始包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:50:27.873

您有 Lion (10.7) 或更新版本的 Mac OS 吗？根据[Qt5 beta 已知问题列表](http://qt-project.org/wiki/Qt500beta1KnownIssues)，这是 Webkit 的要求。另请注意，它是[插件](http://qt-project.org/wiki/Qt-Add-ons-Modules)而不是 Essential 包，因此它可能不会默认出现在安装包中，因为它是可选的。

# javascript - Javascript 函数只能暂时工作

> ID：12913761
> 
> 赞同：0
> 
> 时间：2012-10-16T11:31:23.440
> 
> 标签：javascript, jquery, flot

我正在制作动态图： http://xenon.colorado.edu/portal/graph/index.php?station= [NWOT](http://xenon.colorado.edu/portal/graph/index.php?station=NWOT)

单击 x 轴年份应将图表放大到特定年份，但 setSelectionYear 函数仅暂时起作用。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:35:13.380

用它替换链​​接中的href`javascript:void(0);`正在重新加载页面。

# java - 如何在Java中获得对音频线的独占访问权限？

> ID：12913770
> 
> 赞同：0
> 
> 时间：2012-10-16T11:31:40.507
> 
> 标签：java, audio

我有一个播放音频文件的 java 应用程序。因此，在我的 java 应用程序播放音频文件或声音之前，我想静音所有其他应用程序声音，如 Windows 媒体播放器、VLC 播放器等，如果当时正在播放这些声音。

在我的 java 应用程序完成播放音频文件后，我想再次取消静音。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:33:44.583

不，你不能，这与 Java 无关，但操作系统不允许。表现良好的应用程序应在失去音频焦点时暂停播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:57:42.560

您不能在普通的旧 java AFAIK 中执行此操作。您需要使用 JNI 或 JNA。有一些用于音频访问的 API 可以解决问题，例如，您可以使用 java 中的 portaudio（最近有人宣布了一个这样做的开源项目，如果找不到，请在 portaudio maling 列表中询问），但是这个有一些问题：

*   它将使您的代码平台依赖。
*   它并不总是有效（例如，如果您没有权限，或者如果另一个软件已经在使用该设备，或者该设备没有独占模式，或者任何其他原因）。
*   您必须重新编程您的音频代码以使用 PA 接口而不是 javasound。

# java - XML 目录未按项目查看

> ID：12913772
> 
> 赞同：1
> 
> 时间：2012-10-16T11:31:46.217
> 
> 标签：java, xml, eclipse, xmlcatalog, opensymphony

我在我的应用程序“catalog.xml”文件中使用考虑：

```
<catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">

    <public
        publicId="-//OpenSymphony//SiteMesh 1.5 Decorators//EN"
        uri="platform:/resource/mgb/src/main/webapp/WEB-INF/sitemesh_1_5_decorators.dtd" />

    <system
        systemId="sitemesh_1_5_decorators.dtd"
        uri="platform:/resource/mgb/src/main/webapp/WEB-INF/sitemesh_1_5_decorators.dtd" />

</catalog> 
```

在一些 xml 文件中，我使用 DOCTYPE，如下所示：

```
<!DOCTYPE decorators SYSTEM "sitemesh_1_5_decorators.dtd"> 
```

或者

```
<!DOCTYPE decorators PUBLIC "-//OpenSymphony//SiteMesh 1.5 Decorators//EN" "sitemesh_1_5_decorators.dtd"> 
```

甚至（当然catalog.xml有另一个systemid）

```
<!DOCTYPE decorators PUBLIC "-//OpenSymphony//SiteMesh 1.5 Decorators//EN" "http://www.opensymphony.com/sitemesh/dtd/sitemesh_1_5_decorators.dtd"> 
```

这似乎没有任何效果。我将此文件导入项目，将所有内容添加到 Window>Preferences>XML Catalog。即使在 xml 文件中，我也看到了在 DOCTYPE 中使用此值的可能性。不幸的是，当我在没有网络连接的情况下启动项目时，我收到错误，我无法下载此文件。我错过了什么吗？这是 mvc 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:40:36.403

来自[http://www.xmlsoft.org/catalog.html](http://www.xmlsoft.org/catalog.html)

> 用户可以通过将查询重定向到自己的目录集来更改默认目录行为。这可以通过将 XML_CATALOG_FILES 环境变量设置为目录列表来完成，一个空的应该禁用加载默认的 /etc/xml/catalog 默认目录。

因此，请尝试将目录文件放入 /etc/xml/catalog（即使在 Windows 上）或设置/更改变量。

# php - 谷歌饼图动态与mysql和php

> ID：12913776
> 
> 赞同：1
> 
> 时间：2012-10-16T11:31:54.957
> 
> 标签：php, mysql, google-visualization

我想用提供的库动态生成谷歌饼图。

我有这个从mysql获取数据的代码：

```
$query = "SELECT name FROM mybase WHERE name = '$name' ";

        $mysqli = new mysqli();
        $mysqli->connect('localhost', 'blabla', 'blabla', 'blabla');
        $result = $mysqli->query($query);
        while ($row = $result->fetch_assoc()) {
            //here I cant figure out how to make data in format for pie chart
        } 
```

我需要将此数据获取到 Java 脚本。看到 x 次表示它在数据库中列出的次数：

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Name', 'Seen x times'],
          ['somenamefrommysql',     11],
          ['somenamefrommysql',      2],
          ['somenamefrommysql',  2],
          ['somenamefrommysql', 2],
          ['somenamefrommysql',    7]
        ]);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:07:50.677

可以从纯 JSON 创建 DataTable，因此如果您可以让 PHP 脚本以所需格式将结果作为 JSON 对象返回，那么它将起作用。

请参阅[https://developers.google.com/chart/interactive/docs/reference#DataTable](https://developers.google.com/chart/interactive/docs/reference#DataTable)

# php - 通过已经打开的套接字卷曲

> ID：12913777
> 
> 赞同：2
> 
> 时间：2012-10-16T11:31:59.900
> 
> 标签：php, sockets, curl

我想知道是否有一种方法可以`curl`通过已经打开的套接字来使用，例如，调整这个：

```
<?php
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    $out = "GET / HTTP/1.1\r\n";
    $out .= "Host: www.example.com\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
}
?> 
```

使用`curl_exec()`而不是`fgets($fp, 128)`

（或者，任何其他方式一直`curl()`在同一个流上使用，我的目标是阅读 twitter 流 api）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:03:51.097

这可能对您有用，因为您正在处理 Twitter Stream API

```
set_time_limit(0);
$ch = curl_init();
echo "<pre>";
curl_setopt($ch, CURLOPT_URL, "https://sitestream.twitter.com/2b/site.json");
curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'cgets');
curl_setopt($ch, CURLOPT_BUFFERSIZE, 128);
curl_setopt($ch, CURLOPT_USERPWD, 'user:password');
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_TIMEOUT, 1000000);
curl_exec($ch);

function cgets($ch, $string) {
    $length = strlen($string);
    printf("Received %d byte\n", $length);
    flush();
    return $length;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:19:39.690

没有办法强制 cURL 使用 PHP 中的现有套接字。虽然 cURL 在内部池化和重用连接，但不能强制它一直使用同一个连接，或者永远不要关闭它打开的连接。

您可以[查看 Phirehose](https://github.com/fennb/phirehose)（这是流式 API 的 PHP 接口），或者如果这还不够好，请在[Twitter 库](https://dev.twitter.com/docs/twitter-libraries#php)列表上购物 - 很可能有人已经用 PHP 解决了您的问题并将其打包。

尽管如此，使用 PHP 的流 API 听起来还是很奇怪。这是在 Web 服务器上，还是在独立的长时间运行的脚本上？

# objective-c - 如何在 Objective-C 中获取 html 代码？

> ID：12913783
> 
> 赞同：-4
> 
> 时间：2012-10-16T11:32:17.077
> 
> 标签：objective-c, uiwebview, html-parsing

我需要解析一些站点 -> 从这个站点获取一些 html 代码 -> 将此代码放入 NSString -> `[web loadHTMLString:someNSString baseURL: nil]`；

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T12:25:23.837

检查中的方法`MWFeedParser`，

```
- (NSString *)stringByConvertingHTMLToPlainText;
- (NSString *)stringByDecodingHTMLEntities;
- (NSString *)stringByEncodingHTMLEntities;
- (NSString *)stringWithNewLinesAsBRs;
- (NSString *)stringByRemovingNewLinesAndWhitespace; 
```

[https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)

# c# - 当默认值为空时，为什么在比较之前为字符串赋值

> ID：12913785
> 
> 赞同：5
> 
> 时间：2012-10-16T11:32:24.097
> 
> 标签：c#, asp.net

为什么在实际使用它进行比较之前，我总是需要为字符串变量赋值。例如：一些输入 - obj

```
 string temp;
        if (obj== null)
        {
            temp = "OK";
        }
        string final = temp; 
```

我收到编译时错误 - 类似于 - 无法使用未分配的变量“temp”。但是字符串变量的默认值为'null'，我想使用它。那么为什么不允许这样做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T11:33:13.907

> 当默认值为空时

局部变量的默认值**不是**null （或其他任何值）。它只是未分配。

您可能正在考虑一个字符串字段（类级别的变量）。那将是`null`：

```
private string temp;

private void M()
{
   if (obj== null)
   {
       temp = "OK";
   }
   string final = temp;  // default tnull
} 
```

但是在方法内部，只需使用您需要的值进行初始化：

```
string temp = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:33:59.227

然后将 null 作为局部变量的默认值：

```
string temp = null; 
```

这只是一个编译器提示，您可能忘记分配一个值。通过明确分配 null 你告诉编译器你已经考虑过了。

C# 语言规范 v. 4.0 第 1.6.6.2 节“方法体和局部变量”声明如下：

> 方法体可以声明特定于方法调用的变量。这样的变量称为局部变量。... C# 要求在获得其值之前**明确分配**一个局部变量。

# jquery - Jwplayer 无法运行

> ID：12913786
> 
> 赞同：0
> 
> 时间：2012-10-16T11:32:24.927
> 
> 标签：jquery, video, jwplayer

我试图将 JWPlayer 实现为：

```
<script type="text/javascript" src="js/jwplayer.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
         var divid= document.getElementById("mediaplayerid").getAttribute("id");
         alert(divid);
         jwplayer(divid).setup({
             flashplayer: "http://www.jeroenwijering.com/embed/player.swf",
             provider: "video",
             file: "Videos/2.mp4",
             autostart: false,
         });
     });
</script> 
```

我在表格中使用了一个 div 标签：

```
<tr>
    <td class="style3" style="width: 50%"></td>
    <td class="style3" style="width: 50%">           
        <div id="mediaplayerid"></div>
    </td>
</tr> 
```

JWPlayer 无法运行。我已经调试了脚本。它到达一个点 Jwplayer.setup 之后没有输出。可能是错误或任何代码错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:24:47.143

您只需要将 div id 指定为 jwplayer 设置的字符串。尝试替换`jwplayer(divid)`为`jwplayer('mediaplayerid')`.

这是完整的代码：

```
 <script type='text/javascript' src='jwplayer.js'></script>
    <script type="text/javascript">
        $(document).ready(function(){
            jwplayer('mediaplayerid').setup({
                flashplayer: "http://www.jeroenwijering.com/embed/player.swf",
                provider: "video",
                file: "Videos/2.mp4",
                autostart: false,
            });
        });
    </script>
    <div id="mediaplayerid"></div> 
```

另外，我不认为特定的播放器在我可以测试的情况下正常工作。我建议从[Longtail 的网站](http://www.longtailvideo.com/)获取最新版本。他们有一个很好的[设置向导](http://www.longtailvideo.com/jw-player/wizard/)，您可以使用它来创建您需要的嵌入代码。

# c - 在 Windows 上获取 c 目录中的每个文件

> ID：12913788
> 
> 赞同：2
> 
> 时间：2012-10-16T11:32:28.230
> 
> 标签：c, windows, linux, io, readdir

我目前正在处理一个 C 项目，我需要扫描一个目录并获取该目录中每个文件的文件名。代码需要在 Windows 和 Linux 上运行。我有使用以下代码的 linux 版本。

```
DIR *dp;
int i = 0;
struct dirent *ep;
char logPath[FILE_PATH_BUF_LEN];
sprintf(logPath, "%s/logs/", logRotateConfiguration->logFileDir);
printf("Checking pre existing log count in: %s\n", logPath);
dp = opendir(logPath);

if (dp != NULL)
{
    while ((ep = readdir(dp)) != NULL)
    {
        if (strcmp(ep->d_name, ".") != 0 && strcmp(ep->d_name, "..") != 0)
        {
            i = i + 1;
        }
    }
    closedir(dp);
}
else
{
    perror("Couldn't open directory");
}
logRotateConfiguration->logCount = i; 
```

为了使此代码正常工作，我正在使用，`#include <dirent.h>`但发现它与 Windows 不兼容。因此，在我的头文件中，我在 Linux 上使用了 ifdef 来包含 dirent.h，但不确定在 Windows 上可以使用什么。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:35:33.250

要在 Windows 上列出文件，您可以使用[`FindFirstFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)和[`FindNextFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx). 有关示例，请参阅[列出目录中的文件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365200%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:36:43.377

[dirent.h (clicky) 有一个免费的 windows 实现](http://www.softagalleria.net/dirent.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:02:18.307

MinGW（[链接](http://mingw.org)）有`dirent.h`。我在网上没有找到关于它具体实现 dirent 的文档，但我认为它与 unix-derivatives 版本足够相似。您可以查看头文件，然后决定是否使用它。

关于其他答案的注释：我不知道来自 softagalleria.net 的版本，所以我不能谈论它，但关于`FindFirstFile/FindNextFile`-API：如果您决定使用它，请确保使用“Unicode”-Versions（实际上是 UCS- 2) 因为 Ascii 版本只允许非常有限的路径长度。要使用 Unicode 版本，请定义宏并确保在所有路径前加上`\\?\`.

# actionscript-3 - Air 应用程序中的 URL Loader 类不返回结果

> ID：12913792
> 
> 赞同：0
> 
> 时间：2012-10-16T11:32:37.747
> 
> 标签：actionscript-3, apache-flex, air, flex4

我在我的空中应用程序中使用类 URLLoader，如果我在 url 中使用参数，则 flex 显示错误 #2032。如果在 Web 应用程序中使用相同的代码，即在 Web 浏览器中运行，则返回正确的结果。我还没有找到合适的解决方案。有没有办法在我的空中申请中返回结果？我使用了一个 web 调试器提琴手，来检查数据是否从服务器返回。数据从服务器正确返回，但未在空中应用程序中显示。

这是我使用网址的方式-

```
urlLoader=new URLLoader(new URLRequest('http://exaple.com?year=2012')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:09:55.723

如果您注意[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#URLLoader%28%29)（无论如何谁会这样做？！），您会看到构造[`URLLoader`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.htm)函数[`URLRequest`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html)

我一般使用 URLLoader 如下：

```
var urlRequest:URLRequest = new URLRequest('http://example.com?year=2012');
var urlLoader:URLLoader = new URLLoader();
urlLoader.dataFormat = URLLoaderDataFormat.TEXT; // default
urlLoader.addEventListener(Event.COMPLETE, urlLoader_complete);
urlLoader.load(urlRequest);

function urlLoader_complete(evt:Event):void {   
    trace(urlLoader.data);
} 
```

还要检查防火墙是否阻止了您的 adl.exe 进程。

# r - 在 SQL 或 R 中从时间戳创建子集

> ID：12913803
> 
> 赞同：2
> 
> 时间：2012-10-16T11:33:38.930
> 
> 标签：r, postgresql, timestamp, subset

我有一个包含许多表的数据集。我必须完成一个所有表格都需要相同尺寸（大小）的过程。

我必须在 2 个场景中创建子集：

1-基于时间戳（yyyy-mm-dd hour:min:sec）创建子集（timestamps列数据类型为varchar）：

1.1。我需要一个子集指的是一个特定的时间段：从2004-08-12到2004-09-02

1.2\. 根据时间从上述子集创建子集：从 8:00:00 到 20:00:00

2-根据记录数创建子集：要求前 10000 条数据记录。

此外，我正在使用 R 软件并同时应用 RPostgreSQL 包。所以我可以同时使用 Sql 和 R 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:52:17.860

据我所知，您描述的是一个相当简单的查询：

```
SELECT  *
FROM the_table
WHERE tscolumn::timestamptz BETWEEN DATE '2004-08-12' AND DATE '2004-09-02' 
  AND extract(hour FROM tscolumn::timestamptz) BETWEEN 8 AND 20
ORDER BY tscolumn;
LIMIT 10000; 
```

要使用 a 获得合理的行选择，`LIMIT`您需要一个`ORDER BY`.

参见[手册`extract`](http://www.postgresql.org/docs/current/static/functions-datetime.html)。

`text`但是，将时间戳存储在or`varchar`列中是很奇怪的。为什么要这么做？

# sonarqube - Jacocoant 和声纳不生成报告

> ID：12913808
> 
> 赞同：1
> 
> 时间：2012-10-16T11:34:03.220
> 
> 标签：sonarqube

我已经用 ant 配置了声纳，现在它工作正常，我正在为我的项目集成 jacoco 单元测试。我做了以下配置来实现这一点：

```
<property name="project.test" location="${project.path}/test" />
<property name="project.target" location="${project.path}/target" />
<property name="project.reports" location="${project.target}/reports" />
<property name="project.reports.juint" location="${project.reports}/junit" />
<property name="sonar.tests" value="${project.test}" />
<property name="sonar.sourceEncoding" value="UTF-8" />
<property name="sonar.surefire.reportsPath" location="${reports.junit.xml.dir}" />
<property name="sonar.dynamicAnalysis" value="reuseReports" />
<property name="sonar.core.codeCoveragePlugin" value="jacoco" />
<property name="sonar.jacoco.reportPath" value="target/jacoco.exec" />
<property name="sonar.core.codeCoveragePlugin" value="jacoco" /> 
```

其中“project.path”是我的主要项目文件夹，其中有我的 SRC 和 BUILD（包含类文件）目录。

```
<target name="test" depends="compile">
<taskdef name="junit" classname="org.apache.tools.ant.taskdefs.optional.junit.JUnitTask">
    <classpath>
        <path refid="compile.classpath"/>
    </classpath>
</taskdef>

<taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
</taskdef>

<jacoco:coverage destfile="target/jacoco.exec" xmlns:jacoco="antlib:org.jacoco.ant">
<junit fork="yes" dir="${basedir}" failureProperty="test.failed">
    <classpath location="${project.build}" />
    <classpath refid="compile.classpath" />

    <formatter type="xml" />
    <batchtest todir="${reports.juint.xml.dir}">
        <fileset dir="${project.test}">
        </fileset>
    </batchtest>
</junit>
</jacoco:coverage>

</target> 
```

但不幸的是，每次我执行我的 build.xml 时，我都会看到以下错误，并且除了 jacoco 之外的所有内容都可以工作，请有人帮助我，我需要使用*jacocoant为我的代码运行单元测试*

```
[sonar:sonar] 16:13:00.882 INFO  p.PhasesTimeProfiler - Sensor JaCoCoSensor...
[sonar:sonar] 16:13:00.956 INFO  o.s.p.j.JaCoCoPlugin - Project coverage is set to 0% as no JaCoCo execution data has been dumped: /archive/target/reports/junit/jacoco.exec
[sonar:sonar] 16:13:01.868 INFO  p.PhasesTimeProfiler - Sensor JaCoCoSensor done: 986 ms 
```

如果您需要任何进一步的信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:10:31.910

不应该

```
<property name="sonar.jacoco.reportPath" value="target/jacoco.exec" /> 
```

是

```
<property name="sonar.jacoco.reportPath" value="${project.target}/jacoco.exec" /> 
```

给定你上面的属性？

# javascript - 向 javascript 动画面板添加关闭按钮

> ID：12913821
> 
> 赞同：1
> 
> 时间：2012-10-16T11:34:41.813
> 
> 标签：javascript, jquery, html, slidetoggle

单击链接时，我正在使用以下 javascript 将打开的面板向右滑动。

jQuery（函数（$）{

```
$('a.panel').click(function() {
    var $target = $($(this).attr('href')),
        $other = $target.siblings('.active'),
        animIn = function () {
            $target.addClass('active').show().css({
                left: -($target.width())
            }).animate({
                left: 0
            }, 500);
        };

    if (!$target.hasClass('active') && $other.length > 0) {
        $other.each(function(index, self) {
            var $this = $(this);
            $this.removeClass('active').animate({
                left: -$this.width()
            }, 500, animIn);
        });
    } else if (!$target.hasClass('active')) {
        animIn();
    }
}); 
```

});

现在我还想在每个面板中添加一个关闭按钮，当单击时，面板应该关闭/向左滑动。

我有这个[jsfiddle](http://jsfiddle.net/sg3s/RZpbK/)工作

请问有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:44:48.473

干得好 -

[**工作演示**](http://jsfiddle.net/RZpbK/472/)

```
$('.close').click(function(){        
        $(this).closest('.panel').animate({
                    left: -200
                }, 500);
    }); 
```

# javascript - 无法将 HTMLImageElement 转换为字符串？

> ID：12913826
> 
> 赞同：2
> 
> 时间：2012-10-16T11:34:57.807
> 
> 标签：javascript

我正在使用 javascript 来访问一些嵌套在 img 中的元素。之后`<div>`，我想将这些图像添加到字符串变量中。

我写道：

```
var SomeVariable="";
$("myDivId img").each(function(){
  console.log(this);
  SomeVariable += this;
});
console.log(SomeVariable); 
```

在函数*`console.log`*中使用时`.each`，它显示如下内容：

`<img (some elements)>`，这正是我想要的。

当我*`console.log`*最后使用写整个值时，它说：

```
[object HTMLImageElement][object HTMLImageElement] 
```

我尝试使用一些转换，但我真的不知道如何实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T11:38:05.603

假设您想要他们 HTML 的字符串表示...

```
var html = $("myDivId img").clone().appendTo("<div />").html(); 
```

如果您只支持具有该`outerHTML`属性的浏览器。

```
var html = $("myDivId img")
           .map(function() { return this.outerHTML; }).get().join(""); 
```

你得到的原因`"[object HTMLImageElement]"`是因为[`Object`'s`toString()`](http://es5.github.com/#x15.2.4.2)会给你`"[object x]"`，对象`x`的`[[Class]]`（内部属性）在哪里。

# android - 什么是 android.os.NetworkOnMainThreadException

> ID：12913829
> 
> 赞同：1
> 
> 时间：2012-10-16T11:35:09.973
> 
> 标签：android

我是新手，如果我在我的安卓手机上运行它，我想将数据从我的安卓手机发送到我的电脑，它说`android.os.NetworkOnMainThreadException` 有人可以帮助我吗？

```
public void OnClick1(View v) {

    try{
        Socket s=new Socket("localhost",4445);

        DataOutputStream dout =new DataOutputStream(s.getOutputStream());

        dout.writeUTF("hello");
        dout.flush();

        dout.close();
        s.close();

    } catch (Exception e){
        System.out.println(e);
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:43:47.577

**NetworkOnMainThreadException：**当应用程序尝试在其主线程上执行网络操作时引发的异常。

`AsyncTask`您可以按如下方式创建一个类：

```
private class MyAsyncTask extends AsyncTask<Void, Void, Void>
{

    @Override
    protected void onPostExecute(Void result) {
        //Task you want to do on UIThread after completing Network operation
        //onPostExecute is called after doInBackground finishes its task.
    }

    @Override
    protected Void doInBackground(Void... params) {
       //Do your network operation here
        return null;
    }
} 
```

另外，不要忘记调用`doInBackground()`函数，使用`MyAsyncTask.execute()`. 希望这可以帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:39:15.200

可能这可以帮助您解决问题

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);       
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T15:21:22.887

这对我有用。

请尝试使用 localhost 中的 IP 地址

安卓权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

类`RetrieveFeedTask`代码：

```
class RetreiveFeedTask extends AsyncTask<String, Void, Void> {

  private Exception exception;

  protected Void doInBackground(String... datas) {
     try {
        Socket s = new Socket("10.10.10.46", 8888);

        DataOutputStream dout = new DataOutputStream(s.getOutputStream());
        for (String string : datas) {
           dout.writeUTF(string);
        }

        dout.flush();
        dout.close();
        s.close();
     } catch (Exception e) {
        this.exception = e;
     }
     return null;
  }

  protected void onPostExecute(Void void1) {
     // do nothing;
  }

  public RetreiveFeedTask() {
  }

  public Exception getException() {
     return exception;
  }

}

 @Override
 public void onClick(View v) {
     switch (v.getId()) {
     case R.id.btn:

        RetreiveFeedTask feedTask = new RetreiveFeedTask();
        feedTask.execute(new String[] { "hello", "hello" });
        if (feedTask.getException() != null) {
           Log.d(TAG, feedTask.getException().toString());
        }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T11:36:10.143

始终使用`Threads`，最好[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)是执行网络或任何其他需要时间的操作。读[这个](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)。

PS 在 Google 上进行一点搜索可以为您提供数百个结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T11:44:19.337

试试这个[AsyncTask 教程](http://www.vogella.com/articles/AndroidPerformance/article.html)。最佳实践使用异步方法。

简单地在 onCreate 方法中尝试这段代码

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder().detectAll().penaltyLog().penaltyDeath().build());
StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectAll().penaltyLog().penaltyDeath().build()); 
```

但有时很难记住在开发过程中在您的应用程序中做出所有正确的事情。那是`StrictMode`进来的。它允许在您的应用程序中设置策略以避免做不正确的事情。例如，如果您的应用程序违反了某些 Android 政策，以下设置将使您的应用程序崩溃。**StrictMode 应该只在开发过程中使用，而不是在您的实时应用程序中。**

最好避免使用`StrictMode`，选择使用`AsyncTask`方法。

# html - 扭曲的默认值

> ID：12913830
> 
> 赞同：0
> 
> 时间：2012-10-16T11:35:11.410
> 
> 标签：html, input

从阅读 Stack and the web 我收集到，出于安全原因，您无法预填充此选项。但是，我有许多用户需要填写的页面表单。通过将其他变量保留为会话变量，我可以让页面记住它们以前的条目并在回调该页面时重新显示它们、文本框、按钮等。我没有不知道如何对文件名输入表单组件做同样的事情。如果有解决方法有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:40:34.240

如果图像已经上传，您将需要在逻辑服务器端显示上传图像的缩略图，并提供上传新图像的选项，此时您将显示一个空文件输入。就像是...

```
if(sessioncontains("uploaded")) {
    out << "<img src=\"" + (sessionget("uploaded")->thumb) + "\"/>";
    out << "<label>Upload a new image</label>";
} else {
    out << "<label>Upload an image</label>";
}
out << "<input type=\"file\"/>"; 
```

**编辑**以便您希望在提交之前保存字段的值，您可以将它们发布到幕后的服务器。[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery). 或者您可以将它们序列化为`window.localStorage`数据 URL（注意存储限制）。

Javascript...

```
function retrieveFiles() {
    var files = [];
    var json = window.localStorage.getItem("files");
    if(json.length) {
        try {
            files = JSON.parse(json);
        } catch(ex) {
            console.err("There was an error", files, window.localStorage);
        }
    }
    return files;
}

function storeFiles(files) {
    window.localStorage.setItem("files", JSON.stringify(files));
}

$(function() {

    var arr = retrieveFiles();

    $("#file").on("change", function() {
        var files = $(this).prop("files");
        var reader = new FileReader();
        reader.onload = function(e) {
            arr.push(e.target.result);
            storeFiles(arr);
        }
        for(var i = 0; i < files.length; ++i) {
            reader.readAsDataURL(files[i]);
        }
    });

    $("form").on("submit", function() {
        // Post files array arr by AJAX
    });

}); 
```

HTML...

```
<form action="upload" method="post" enctype="multipart/form-data">
    <input type="file" id="file" multiple/>
    <button type="submit">Submit</button>
</form> 
```

# typo3 - Typo3 FCE 引用容器字段内的字段

> ID：12913835
> 
> 赞同：1
> 
> 时间：2012-10-16T11:35:30.130
> 
> 标签：typo3, typoscript, templavoila

这是我的 FCE 映射的屏幕截图：

![在此处输入图像描述](../Images/7bb7fdd61c78b6b46aea09051b3e0404.png)

我可以从“链接”字段的排版中通过“field_caption”引用“标题”字段。

这里是那个的打字稿：

```
 10 = TEXT
    10.field = field_caption 
```

如何从“链接”字段的排版中引用容器字段“图像和替代文本”内的“图像”字段？

我尝试使用“field_image”直接引用它，但它不起作用。

这是屏幕截图： ![在此处输入图像描述](../Images/f71944480b1aa993a38a739b0d66f6bd.png)

我要映射的标记是：

```
 <a href="resources/img/site/demo1.jpg">
      <img src="resources/img/site/demo1.jpg" alt="alternate text" />
      <div class="flex-caption">
        <p>caption text</p>
      </div>
    </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:56:16.393

好的，您想用链接包装图像。实际上你必须反过来做。

![在此处输入图像描述](../Images/fbfc0b7a57df80974179f31589314e68.png)

在我的情况下，`span link`因为`display:none;`它是我的链接占位符。在您的情况下，它是`field_link`.

现在单击以编辑您的 field_image 并单击数据处理。编辑 TS 代码：

```
10 = IMAGE
10.file.XY = 200,150
10.file.import = uploads/tx_templavoila/

10.stdWrap.typolink.parameter.field = link 
```

最后一行用链接包装图像。在你的情况下，它会是

```
10.stdWrap.typolink.parameter.field = field_link 
```

# django - 处理 Haystack 导入错误的最佳方法

> ID：12913838
> 
> 赞同：3
> 
> 时间：2012-10-16T11:35:35.060
> 
> 标签：django, django-haystack

以上就是我的总结，如果有其他想法请告诉我。

尝试在 urls.py 中执行此操作

```
from apps.search import search_indexes

import haystack
haystack.autodiscover() 
```

不导入 search_indexes 将无法工作。

我还在设置中使用此 hack 来使管理命令正常工作：

```
SKIP_COMMANDS = ['test']
if any([command in sys.argv for command in SKIP_COMMANDS]):
HAYSTACK_ENABLE_REGISTRATIONS = False 
```

摘自这篇文章：[Can't use django management commands because of Import Errors when haystack try to import multiligualmodel](https://stackoverflow.com/questions/8577449/cant-use-django-management-commands-because-of-import-errors-when-haystack-trie)

老实说，我想知道一直将 HAYSTACK_ENABLE_REGISTRATIONS 设置为 false 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:03:27.273

将 HAYSTACK_ENABLE_REGISTRATIONS 设置为 False 不起作用。

然而，我已经制定了一个适用于 Django 1.4、Apache mod_wsgi、Haystack 1.2.7 的配置。

试试这个配置：

myapp.search_indexes.py

```
from haystack import indexes, site
from apps.myapp.models import MyModel

class MyModelIndex(indexes.SearchIndex):
...

site.register(MyModel, MyModelIndex) 
```

设置.py

```
HAYSTACK_SITECONF = 'apps.myapp.search_indexes'

SKIP_COMMANDS = ['test']
if any([command in sys.argv for command in SKIP_COMMANDS]):
    HAYSTACK_ENABLE_REGISTRATIONS = False
... 
```

如果从一开始就在文档中就好了！

# playframework-2.0 - Scala Play 框架：将表单参数绑定到隐藏字段

> ID：12913840
> 
> 赞同：7
> 
> 时间：2012-10-16T11:35:41.290
> 
> 标签：playframework-2.0, scala-template

我正在使用 Play 2.0.4 并在我的 scala 模板中有以下表格。

```
@fieldGroup(field: Field, className: String = "field") = {
<div class="twipsies well @className">

    <a class="removeField btn danger pull-right">Remove Field</a>

    @inputText( // <=== I need a hidden input field here
        field("id")
    )

    @inputText(
        field("name"),
        '_label -> "Name",
        '_help -> "Use lower case, starts with an alphabet can contain numbers and underscores."
    )
} 
```

我的表单中需要一些隐藏字段，如何将其绑定到服务器端**表单**组件？我在 github 存储库中看到了一个**@inputHidden**模板助手，但它在稳定版本中不可用。我如何完成我正在寻找的东西？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T12:16:43.510

将其“手动”编写为通用 HTML：

```
<input type="hidden" name="id" value='@field("id").value' > 
```

或使用在**自己处理 HTML 输入创建部分的**[文档](http://www.playframework.org/documentation/2.0.4/JavaFormHelpers)中描述的方法。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-26T12:23:22.040

使用原始 HTML：

```
<input type="hidden" name="@field("id").name" value='@field("id").value' > 
```**

# android - 将相机意图图像保存到内部数据自定义目录

> ID：12913842
> 
> 赞同：2
> 
> 时间：2012-10-16T11:35:53.023
> 
> 标签：android, android-camera, android-camera-intent

**我的问题**

我有一个相机意图，我希望将图像保存到我的内部数据目录中的一个目录中。

我使用以下方法创建了目录：

```
 File mydir3 = new File(this.getApplicationContext().getFilesDir(),File.separator+"MyApplication"+File.separator+CCPhotoManager.DIRECTORY+File.separator+PhotoManager);
        mydir3.mkdirs(); 
```

然后我继续创建具有指定名称的文件，如下所示。

```
 String filePath = this.getApplicationContext().getFilesDir()+File.separator+"MyApplication"+File.separator+PhotoManager+File.separator+PhotoManager().getNewPhotoFileName()+PhotoManager;

        File file = new File(filePath); 
```

然后我在某处读到没有保存图像的原因是因为相机没有访问我的应用程序数据目录的权限，并且您需要使用它`FileOutputStream`来更改权限。但是，由于我的文件路径有路径分隔符，我无法使用`openFileStream(filePath,Context.MODE_WORLD_WRITABLE);`.

这就是我尝试以下内容的原因。

```
 try {
            FileOutputStream fos = new FileOutputStream(file);
            fos.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

但是，这显然不起作用，因为没有图像保存到使用下面的代码创建的文件中。

```
 Uri uriSavedImage=Uri.fromFile(file);
        Log.d("PhotoManager", "adding extra to intent: "+uriSavedImage.toString());
        Intent launchcameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        launchcameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
        startActivityForResult(launchcameraIntent,CAMERA_PIC_REQUEST); 
```

**我的问题**

如何获得相机意图以将其图像保存到内部数据中的自定义目录？

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:41:21.260

我曾经遇到过同样的问题，我用这个解决了它：

1.从默认文件夹中存在的图像创建一个文件：

```
File from = new File("path to default file created"); 
```

在您的代码路径中，此处描述为文件路径。

2.在您希望文件另存为的位置创建另一个文件：

```
File to = new File("target file path"); 
```

3.将文件重命名为：

```
from.renameTo(to); 
```

这样，默认路径中的文件将自动删除并在新路径中创建。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:34:13.753

所以这就是我解决它的方法。还要感谢@AppMobiGurmeet。

将照片保存到 SDCard 上的文件中，如下所示。

```
 File directory= new File(Environment.getExternalStorageDirectory()+File.separator+"MyApplication"+File.separator+"TemporaryImages");//+File.separator+CCPhotoManager.getInstance().getNewPhotoFileName()+CCPhotoManager.JPEG_FILE_SUFFIX);
        directory.mkdirs();

        File externalFile = new File(Environment.getExternalStorageDirectory()+File.separator+"MyApplication"+File.separator+"TemporaryImages"+File.separator+CCPhotoManager.getInstance().getNewPhotoFileName()+CCPhotoManager.JPEG_FILE_SUFFIX);

        Uri uriSavedImage=Uri.fromFile(externalFile);
        Log.d("PhotoManager", "adding extra to intent: "+uriSavedImage.toString());
        Intent launchcameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        launchcameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
        startActivityForResult(launchcameraIntent,CAMERA_PIC_REQUEST); 
```

然后是活动结果。（返回意图时）

```
 // SAVE THE PHOTO TO THE INTERNAL DATA DIRECTORY
            File to = new File(MyApplication.getAppContext().getFilesDir()+File.separator+"MyApplication"+File.separator+DIRECTORY+File.separator+this._currentPhotoName+JPEG_FILE_SUFFIX);
            File from = new File(Environment.getExternalStorageDirectory()+File.separator+"MyApplication"+File.separator+"TemporaryImages"+File.separator+this._currentPhotoName+JPEG_FILE_SUFFIX);

            try {
                FileChannel destination = new FileOutputStream(to).getChannel();
                FileChannel source = new FileInputStream(from).getChannel();
                if (destination != null && source != null) {
                    destination.transferFrom(source,0,source.size());
                    from.delete();
                }
                destination.close();
                source.close();
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

然而，我现在已经决定，在所有这些闲逛之后，内部数据目录不是存储图像和文件等内容的最佳位置，因为在某些设备上，内部空间非常小（三星 Galaxy Ace 大约200MB）。

我希望这可以帮助别人。

# java - 如何在 Eclipse IDE 中自动计算代码行数？

> ID：12913853
> 
> 赞同：1
> 
> 时间：2012-10-16T11:36:44.893
> 
> 标签：java, eclipse

> **可能重复：**
> [用于测量代码行的 Eclipse 插件](https://stackoverflow.com/questions/6986744/eclipse-plugin-for-measuring-lines-of-code)

我真的不想手动浏览我的 java 项目中的每个类。我有数十亿个课程，我真的很想知道我创建了多少行。有没有办法自动知道所有类的代码行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:40:12.940

我使用这个代码分析工具：[https ://developers.google.com/java-dev-tools/download-codepro](https://developers.google.com/java-dev-tools/download-codepro)

它告诉代码行等等

# grid - 通过网格在 Tkinter 中显示 Matplotlib 导航工具栏

> ID：12913854
> 
> 赞同：22
> 
> 时间：2012-10-16T11:36:48.850
> 
> 标签：grid, matplotlib, tkinter

我正在开发一个小的 Tkinter GUI 来绘制 matplotlib-plots。（它包含一些条目并根据其内容组装情节。）

我根据[http://matplotlib.org/examples/user_interfaces/embedding_in_tk.html](http://matplotlib.org/examples/user_interfaces/embedding_in_tk.html)设计了我的绘图小部件，只有我使用网格而不是包：

```
canvas = FigureCanvasTkAgg(fig, master=root)
canvas.get_tk_widget().grid(row=1,column=4,columnspan=3,rowspan=20) 
```

那部分有效。但是以同样的方式嵌入 NavigationToolbar 不会。当我包含以下行时，Tkinter 没有错误地崩溃：

```
toolbar = NavigationToolbar2TkAgg( canvas, root )
canvas._tkcanvas.grid(row=22,column=4) 
```

我知道这是因为 NavigationToolbar 在`pack`内部调用，并且`pack`不`grid`相处。但是，我*喜欢*网格，并且不想为了能够使用 NavigationToolbar 而重新设计我的整个 GUI。

是否有解决方法，以便我可以通过网格使用 NavigationToolbar2TkAgg？（我在这里找到了“子类和重载”的建议[，](http://matplotlib.1069221.n5.nabble.com/Trouble-embedding-toolbar-in-Tk-using-grid-td3760.html)但不知道该怎么做。）

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T12:40:36.460

您可以创建一个空框架，然后将其`NavigationToolbar`放入该框架中吗？我假设`NavigationToolbar`意志然后将自己包装在那个框架中。然后，您可以在框架上使用网格。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-06-25T07:59:08.010

这是 Bryan Oakleys 回答中提到的代码示例（将工具栏添加到框架，将框架放在网格上）：

```
 fig = Figure(figsize=(5, 5), dpi=100)

    canvas = FigureCanvasTkAgg(fig, master=root)
    canvas.get_tk_widget().grid(row=1,column=4,columnspan=3,rowspan=20)
    # here: plot suff to your fig
    canvas.draw()

    ###############    TOOLBAR    ###############
    toolbarFrame = Frame(master=root)
    toolbarFrame.grid(row=22,column=4)
    toolbar = NavigationToolbar2TkAgg(canvas, toolbarFrame) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-18T20:28:43.690

```
# the following works for me. I created an empty frame and display it using the grid
# management system, so the frame will be able to use pack management system
canvas = FigureCanvasTkAgg(fig, root)
canvas.draw()
canvas.get_tk_widget().grid(row=2, column=0)
frame = Frame(root)
frame.grid(row=0, column=1)
toobar = NavigationToolbar2Tk(canvas, frame)
canvas.get_tk_widget().grid(row=1, column=0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-01T00:19:59.653

我相信您正在寻找的是`pack_toolbar=False`kwarg
您的工具栏定义应如下所示：

```
toolbar = NavigationToolbar2Tk(canvas, root, pack_toolbar=False) 
```

以下两行在`NavigationToolbar2TK`构造函数中执行：

```
if pack_toolbar:
        self.pack(side=tk.BOTTOM, fill=tk.X) 
```

因此设置`pack_toolbar`为`False`禁用内部包装，允许您像往常一样使用网格。

```
toolbar.grid() 
```

# c# - 如何在 Mono MVC2 应用程序中清除 OutputCache

> ID：12913856
> 
> 赞同：2
> 
> 时间：2012-10-16T11:37:01.033
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, mono, outputcache

AddCacheItemDependency 用于使用以下代码清除 Mono Apache MVC2 应用程序中的 OutputCache。这 [在 ASP.NET 中的清除页面缓存中进行了描述](https://stackoverflow.com/questions/11585/clearing-page-cache-in-asp-net)

在 Mono 中，OutputCache 不会被清除。查看 GitHub 中的源代码表明 AddCacheItemDependency 未在 Mono 中实现。如何解决这个问题，以便可以清除 OutputCache？

安德鲁斯。

```
[OutputCache(Duration = 3600, VaryByParam = "none")]
public ActionResult Index()
{
  HttpContext.Current.Response.AddCacheItemDependency("Pages");
  return View();
}

public ActionResult Refresh()
{
HttpRuntime.Cache.Insert( "Pages", DateTime.Now);
} 
```

在 Global.asax.cs 中：

```
protected void Application_Start()
{
HttpRuntime.Cache.Insert( "Pages", DateTime.Now);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T12:24:46.677

您是否尝试手动删除输出缓存？

喜欢：

```
var urls = new List<string> {
                    Url.Action("Index", "ControllerName", new { area = "AreaName" }))
            };
urls.ForEach(HttpResponse.RemoveOutputCacheItem); 
```

# java - 在centos6中编译java类时出错，在tomcat6中

> ID：12913857
> 
> 赞同：2
> 
> 时间：2012-10-16T11:37:06.090
> 
> 标签：java, linux, tomcat6, centos5

我是 Linux 和 Centos6 的新手。我刚刚购买了服务器并想在其中部署我的网络应用程序。我在编译我的 servlet 类时遇到错误。`bash: javac: command not found`当我尝试编译我的类时，它向我展示了。但是当我在'/usr/lib/jvm/java-1.6.0/bin'中检查我的课程时，我找到了我的`javac`。然后我在命令的帮助下检查了 javac`./javac`我得到了 ERROR

```
[root:ip_address.com]# ./javac
# There is insufficient memory for the Java Runtime Environment to continue.
# pthread_getattr_np
Error occurred during initialization of VM
    java.lang.OutOfMemoryError: unable to create new native thread 
```

[当创建 < 100 个线程时](https://stackoverflow.com/questions/10742634/java-outofmemoryerror-when-creating-100-threads)，我按照“”Java `OutOfMemoryError` 中所示的步骤 操作 “”，它显示了获取限制的命令。

```
'[root:ipaddress.com]#  ulimit -a
core file size          (blocks, -c) unlimited
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 278528
max locked memory       (kbytes, -l) 32
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1024
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited'

[root:ipaddress.com]#  top
bash: top: command not found 
```

# php - 如何使用 Symfony 处理数据库视图？

> ID：12913858
> 
> 赞同：2
> 
> 时间：2012-10-16T11:37:13.670
> 
> 标签：php, symfony-1.4, doctrine-1.2, sql-view

有人知道如何在 PHP symfony1.4 中处理数据库视图吗？

我在数据库中手动创建了一个视图“ABC”。现在，我想从该视图“ABC”中选择记录，并在查询中添加 where 子句。如果可能的话举个例子。

编辑：

我的架构是：

```
Product:
  columns:
    name:             { type: string(127), notnull: true }
    launch_date:      { type: date }
    price:            { type: integer }
    status_id:        { type: integer }

ProductLocation :
    product_id:       { type: integer }
    name:             { type: string(50) }
    launch_date:      { type: date }
  relations:
    Product:          {onDelete: RESTRICT, local: product_id, foreign: id, foreignAlias: "Products" } 
```

我想为两个表的联合创建视图。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:30:13.450

您只需要使用`schema.yml`您在数据库中手动创建的每一件事来定义您的视图。

然后重建您的模式 ( `php symfony doctrine:build --model`)，您将能够使用 Doctrine 函数访问您的视图。但是如果你试图在这个视图中创建任何东西，你会得到错误，这是正常的。

如果您提供有关您的视图的更多信息（字段、名称等），我可以提供示例

**编辑：**

顺便问一下，你在谷歌上搜索过吗？

*   [这是 Doctrine doc 中的 View 部分](https://doctrine.readthedocs.org/en/latest/en/manual/component-overview.html#views)
*   [这是关于视图的教义博客上的博客](http://www.doctrine-project.org/blog/using-views-with-doctrine.html)文章

他们都解释了如何从查询中创建视图，然后使用它来浏览结果，但我几乎可以肯定你可以使用我上面描述的方法。

**编辑2：**

*在模式中定义视图与定义真实*表完全相同，尝试使用类似的东西（调整内部字段）：

```
Product_ProductLocation:
  columns:
    name:             { type: string(127), notnull: true }
    launch_date:      { type: date }
    price:            { type: integer }
    status_id:        { type: integer }
    product_id:       { type: integer } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:43:14.807

这在 Symfony 中是可能的。我没有尝试过，但我放了一个链接供您参考。[http://trac.propelorm.org/wiki/Documentation/1.3/FAQ#DoesPropelsupportViews](http://trac.propelorm.org/wiki/Documentation/1.3/FAQ#DoesPropelsupportViews)。祝你好运

# asp.net - asp.net 中的 Cookie 会话和 guid

> ID：12913863
> 
> 赞同：0
> 
> 时间：2012-10-16T11:37:35.920
> 
> 标签：asp.net

我是这个 cookie 会话部分的新手。

我需要你的帮助。请提出您的建议。

在我的应用程序中，我在会话状态标记中使用“UseCookies”。所以它需要cookie中的会话值。因此，如果在两个选项卡中运行我的应用程序，它会共享会话值。

如何解决这个问题。

它非常重要的问题给你的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:26:30.970

尝试在两个不同的浏览器中打开您的应用程序。通常每个浏览器都将cookies保存在不同的地方，因此每个浏览器都会创建一个新的会话cookie，因为找不到另一个浏览器创建的cookie。

# sony - SmartWatch控制屏幕的不同显示

> ID：12913868
> 
> 赞同：0
> 
> 时间：2012-10-16T11:38:18.270
> 
> 标签：sony, sony-smartwatch

我的应用程序以 3x3 的简单网格呈现数字 1-9 的简单屏幕。您可以在此处查看我的 SmartWatch 上的外观：[https ://www.youtube.com/watch?v=ijh5EOTTR-w](https://www.youtube.com/watch?v=ijh5EOTTR-w)

现在，这一切都是正确的。问题是用户报告了他的设备上同一个应用程序的不同显示，可以在这里看到：[https ://docs.google.com/open?id=0BwywSxPvL53dcmlwd0RJQWhVa0E](https://docs.google.com/open?id=0BwywSxPvL53dcmlwd0RJQWhVa0E)

两款智能手表都在相同的版本上运行：

*   智能手表版本 0.1.A.3.7
*   主机应用程序 1.2.37

唯一的区别是手机型号：问题出现在 Sony Xperia S 上，而在 Sony Xperia Sola 上一切正常。这两款手机都运行索尼的 Android Gingerbread（在升级到 ICS 后，Sola 上的所有手机都可以正常工作）。

我尝试以不同的方式指定数字（文本）的大小，使用 dip、px、mm，但在所有情况下，在 Sola 上它们的尺寸都比在 Xperia S 上小得多。

我不知道是什么造成了这种显着差异，并希望得到任何提示或帮助。谢谢！

PS我没有使用任何drawables。

这是我的代码，可以使事情更加清晰：

1）保存值的网格：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- px is used since this is a layout for the accessory display. -->
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="@dimen/smart_watch_control_height"
    android:layout_height="@dimen/smart_watch_control_width" 
    xmlns:tools="http://schemas.android.com/tools" 
    tools:ignore="PxUsage">

<GridView
    android:id="@+id/grid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="0px"
    android:layout_marginTop="-13px"
    android:columnWidth="40px"
    android:gravity="center"
    android:horizontalSpacing="0dip"
    android:numColumns="3"
    android:padding="0dip"
    android:stretchMode="none"
    android:verticalSpacing="0dip" />

</RelativeLayout> 
```

2）在网格的每个单元格中都有以下元素之一：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="16dip"
    android:textStyle="bold"
    android:textColor="#0000FF"
    android:gravity="center"
    android:padding="0dip"
/> 
```

3）控件中的绘制逻辑：

```
// Create background bitmap for animation.
background = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
// Set default density to avoid scaling.
background.setDensity(DisplayMetrics.DENSITY_DEFAULT);

LinearLayout root = new LinearLayout(mContext);
root.setLayoutParams(new LayoutParams(width, height));

LinearLayout sampleLayout= (LinearLayout) LinearLayout.inflate(mContext,
        R.layout.speed_dial_control, root);

// draw on the sampleLayout
GridView gridView = (GridView) sampleLayout.findViewById(R.id.grid);
gridView.setAdapter(adapter);

// adjust the size
sampleLayout.measure(width, height);
sampleLayout.layout(0, 0, sampleLayout.getMeasuredWidth(),
    sampleLayout.getMeasuredHeight());

// Draw on canvas
Canvas canvas = new Canvas(background);
sampleLayout.draw(canvas);

// Send bitmap to accessory
showBitmap(background); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:38:57.170

所以，另一个答案，因为第一个答案仍然相关 - 对于可绘制对象。

首先，您要使用 PX，因为 SmartWatch 显示屏由 128x128 像素组成。不应应用密度。

我已经修改了你的xmls。大多数情况下，我已经删除了不必要的定义。

网格：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- px is used since this is a layout for the accessory display. -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="@dimen/smart_watch_control_height"
    android:layout_height="@dimen/smart_watch_control_width"
    tools:ignore="PxUsage" >

    <GridView
        android:id="@+id/grid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:numColumns="3" />

</RelativeLayout> 
```

如您所见，我遗漏了您的大部分原始 xml。你真的只需要定义网格和列数。其余的将自行处理——即网格将均匀分布在父布局 (128x128) 中。

细胞：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/text1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:textColor="#0000FF"
    android:textSize="26px"
    android:textStyle="bold"
    tools:ignore="PxUsage" /> 
```

在这里，我将 textSize 更改为像素，并删除了填充，因为您不需要声明它。

这应该为您解决问题。我在不同的手机型号上进行了测试 - 效果很好。如果没有，您的适配器可能是问题所在。为了测试，我使用了一个简单的 ArrayAdapter，如下所示：

```
String[] numbers = new String[] {
        "1", "2", "3", "4", "5",
        "6", "7", "8", "9"
};

ArrayAdapter<String> adapter = new ArrayAdapter<String>(mContext, R.layout.cell, numbers); 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:23:04.517

要阻止 Android 应用密度，请尝试使用该`res/drawable-nodpi`文件夹。

我认为您的问题可能与[此问题](https://stackoverflow.com/questions/10974245/xml-layout-on-sony-smartwatch)相似。

# php - 使用SHA1时如何检查PHP字段是否为空

> ID：12913873
> 
> 赞同：5
> 
> 时间：2012-10-16T11:38:35.873
> 
> 标签：php, encryption, sql-update, sha1

我正在使用 SHA1 加密密码。在我的原始代码中，我检查了密码字段是否为空： if (empty($newpassword) and (empty($newpassword2))) { }

由于我现在使用 SHA1 并且当字段留空时它会自动生成 da39a3ee5e6b4b0d3255bfef95601890afd80709，我该如何重写我的代码？

将 da39a3ee5e6b4b0d3255bfef95601890afd80709 翻译回字符串？或者是其他东西？

请帮忙。

```
 if ($_SERVER['REQUEST_METHOD'] == 'POST')
    {
        // oude password controle
        if ($password == $qpassword)
            $oudpassword_goed = 1;
        // password controle
        if ($newpassword == $newpassword2)
            $newpassword_goed = 1;
        if (empty($newpassword) and (empty($newpassword2)))
            $newpassword_goed = 2;
        // email controle
        if ($email == $email2)
            $email_goed = 1;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T11:40:15.853

在散列*之前*检查输入。

另外，不要使用`empty()`. 这将告诉您用户输入了一个*空*密码，如果他们的密码是`0`（当然，您不允许只有一个字符的密码，对吗？）

[键盘](http://codepad.org/dm8usSrE)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:40:27.490

您*可以*检查`da39a3ee5e6b4b0d3255bfef95601890afd80709`它是否为空。

更好的是在散列之前检查空虚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:41:12.377

的 SHA1 散列`da39a3ee5e6b4b0d3255bfef95601890afd80709`是众所周知的空字符串散列。检查此值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T11:44:42.783

检查密码字段是否不为空的方法是`strlen()`检查您实际发送的字符串的长度，因此如果字符串长于`0`，则它不为空，否则显示错误，告诉他们他们的密码字段为空，不要将其添加到数据库中。此外，由于是加密哈希算法，因此无法转换`SHA1`回原始字符串`SHA1`，这会破坏其背后的目的。散列和加密之间的主要区别在于一个可以解密而另一个不能。然而，这并不意味着`SHA1`散列不能被暴力破解，它们确实是简单的目标，以及`MD5`，但这是此范围之外的另一个对话。

# api - 是否可以使用 Google 电子表格 API 在单元格中添加评论？

> ID：12913874
> 
> 赞同：5
> 
> 时间：2012-10-16T11:38:38.633
> 
> 标签：api, comments, spreadsheet

我正在查看 CellEntry API (https://developers.google.com/gdata/javadoc/com/google/gdata/data/spreadsheet/CellEntry) 以了解如何向单元格，但看不到像“addComment()”这样的明显内容。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-03T13:00:21.860

使用 google sheet API v4，您可以使用电子表格.batchUpdate 设置注释。示例 JavaScript SDK：

```
var requests = [];
requests.push({
  "repeatCell": {
    "range": {
      "sheetId": yourSheetId,
      "startRowIndex": 1,
      "endRowIndex": 2,
      "startColumnIndex": 0,
      "endColumnIndex": 1
    },
    "cell": {
      note: "Your note"
    },
    "fields": "note"
  }
});

gapi.client.sheets.spreadsheets.batchUpdate({
  spreadsheetId: yourDocumentId,
  requests: requests
}).then(function(response) {
  console.log(response);
  callback();
});
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-16T05:56:05.490

基于[Lars Gunnar Vik](https://stackoverflow.com/users/7110062/lars-gunnar-vik)的答案，这里有一个 Python 示例。

相关的代码在这里：

```
 body = {
        "requests": [
            {
                "repeatCell": {
                    "range": {
                        "sheetId": 1704890600,  # this is the end bit of the url
                        "startRowIndex": 0,
                        "endRowIndex": 1,
                        "startColumnIndex": 0,
                        "endColumnIndex": 1,
                    },
                    "cell": {"note": "Hey, I'm a comment!"},
                    "fields": "note",
                }
            }
        ]
    }
    result = (
        service.spreadsheets()
        .batchUpdate(spreadsheetId=SAMPLE_SPREADSHEET_ID, body=body)
        .execute()
    ) 
```

您可以通过重复列表中的对象来添加大量注释`"requests": []`。

需要注意的一些重要事项是：

*   `"sheetId"`是 url 中的结束编号
*   如果您想添加值和评论，我认为您需要分两次完成（我希望有人证明我错了！）

* * *

下面是一个写评论的完整程序：

```
import pickle
import os.path
from googleapiclient.discovery import build
from google_auth_oauthlib.flow import InstalledAppFlow
from google.auth.transport.requests import Request

# If modifying these scopes, delete the file token.pickle.
SCOPES = ["*", "https://www.googleapis.com/auth/spreadsheets"]

# The ID and range of a sample spreadsheet.
SAMPLE_SPREADSHEET_ID = "YOUR SPREADSHEET ID"

def main():
    """Shows basic usage of the Sheets API.
    Prints values from a sample spreadsheet.
    """
    creds = None
    # The file token.pickle stores the user's access and refresh tokens, and is
    # created automatically when the authorization flow completes for the first
    # time.
    if os.path.exists("token.pickle"):
        with open("token.pickle", "rb") as token:
            creds = pickle.load(token)
    # If there are no (valid) credentials available, let the user log in.
    if not creds or not creds.valid:
        if creds and creds.expired and creds.refresh_token:
            creds.refresh(Request())
        else:
            flow = InstalledAppFlow.from_client_secrets_file(
                "credentials.json", SCOPES
            )
            try:
                creds = flow.run_local_server()
            except OSError as e:
                print(e)
                creds = flow.run_console()
        # Save the credentials for the next run
        with open("token.pickle", "wb") as token:
            pickle.dump(creds, token)

    service = build("sheets", "v4", credentials=creds)

    # add a comment
    body = {
        "requests": [
            {
                "repeatCell": {
                    "range": {
                        "sheetId": 1704890600,  # this is the end bit of the url
                        "startRowIndex": 0,
                        "endRowIndex": 1,
                        "startColumnIndex": 0,
                        "endColumnIndex": 1,
                    },
                    "cell": {"note": "Hey, I'm a comment!"},
                    "fields": "note",
                }
            }
        ]
    }
    result = (
        service.spreadsheets()
        .batchUpdate(spreadsheetId=SAMPLE_SPREADSHEET_ID, body=body)
        .execute()
    )
    print("{0} cells updated.".format(result.get("totalUpdatedCells")))

if __name__ == "__main__":
    main() 
```

您需要添加自己的电子表格 ID

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T23:28:44.113

根据谷歌的说法，它还没有在 API 中。

[资源](https://groups.google.com/d/topic/google-spreadsheets-api/XejTrwutaR0/discussion)

# database - 将文本消息记录到数据库而不会导致客户端延迟的最简单方法

> ID：12913878
> 
> 赞同：0
> 
> 时间：2012-10-16T11:39:06.553
> 
> 标签：database, windows, logging

我有一堆软件工具安装在 50-100 台 Windows 7 用户 PC 上。这些工具目前都将警告、错误和信息消息记录到每台 PC 上的 tools.log 文件中。当我想查看特定 PC 上发生的情况时，我需要获取他们的日志文件。我更愿意将所有用户的日志数据存储在一个中央数据库中，以便我可以对其执行有用的查询。我还想对某些灾难性情况发出警报（例如，使用数据库“插入”触发器来检查某些情况）。

写入日志的软件工具是 Windows 批处理文件和 C++ 或 C# 应用程序。我需要一个 API 和一个小命令行工具，以便我可以通过两种方式直接写入日志：从使用 API 的应用程序或使用标准批处理文件语法通过管道传输到日志，例如

`echo Something bad happened | log_tool`

我的问题是：当我需要快速连续地将大量命令回显到日志时，有什么简单的方法*不会导致严重减速*？例如，如果每个管道都导致一个数据库事务，那么它就太慢了。

是否有任何现有的软件可以帮助我？（比如，memcached-backed-by-a-shared-database 类型的东西？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:56:25.917

这可能不是一个确切的答案，但 Windows 事件日志旨在完全执行（我认为）您想要执行的操作。

您可以通过调用 logevent.exe 从批处理文件写入事件日志（您可能需要先安装它）。

您可以使用 .Net 中的众多日志框架之一来写入事件日志（log4Net 是我的最爱）。

事件日志被设计为具有合理的性能；如果您要处理大量日志，log4Net 允许您批量处理日志。

事件日志可通过网络访问，并且有许多工具可用于监控这些日志，以及相应的工作流程（Nagios、BigBrother、MS MOM）。

# c++ - 使用 c++ 和 Qt 解析 xml 文件

> ID：12913881
> 
> 赞同：6
> 
> 时间：2012-10-16T11:39:12.047
> 
> 标签：c++, xml, qt, xml-parsing

我尝试解析具有以下结构的 XML 文件：

```
<I>
  <C c="test1">
     <H><Pd pd="123"/>
        <f p="789" r="456"/>
     </H>
     <M m="test2">
       <H><Pd pd="3456"/><R r="678"/>
       </H>
     </M>
  </C>
  <T t="0">
     <T2>123</T2>
     <T3>2345</T3>
  </T>
  <T t="1">
     <T1>23456</T1>
     <T2>23</T2>
     <T3>123</T3>
     <T4>456</T4>
  </T>
</I> 
```

我有一个数字列表，例如 0 和 1 和一个搜索模式，例如 '23' 现在我想在 XML 文件中搜索所有 T 节点，其中 t="a number from my list" 其中一个子节点（T1 , T2,T3) 包含搜索模式。

有人可以帮我解决这个问题吗？我想使用 Qt 功能，但不知道如何开始。

我对每一个提示都很高兴！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T12:15:30.580

未经测试，但这是我已经使用 Qt 扫描一个非常简单的 XML 文件的一种方式。也许这可以给你一个提示如何在这里使用它：

```
QDomElement docElem;
QDomDocument xmldoc;

xmldoc.setContent(YOUR_XML_DATA);
docElem=xmldoc.documentElement();

if (docElem.nodeName().compare("T")==0)
{
    QDomNode node=docElem.firstChild();
    while (!node.isNull())
    {
        quint32 number = node.toElement().attribute("t").toUInt(); //or whatever you want to find here..
        //do something
        node = node.nextSibling();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:38:00.287

对于 XML 的东西，建议使用 QtCore 模块中的 QXmlStreamReader 和 QXmlStreamWriter，只是因为 QDom 和 QSax 的东西已经有一段时间没有积极维护了。

[http://doc.qt.digia.com/4.7/qxmlstreamreader.html](http://doc.qt.digia.com/4.7/qxmlstreamreader.html)

[http://doc.qt.digia.com/4.7/qxmlstreamwriter.html](http://doc.qt.digia.com/4.7/qxmlstreamwriter.html)

我不会将示例代码从 qt 文档复制并粘贴到此处。希望你能很好地理解它们。您还可以检查 qt 4.x 中的示例/xml 目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:21:09.003

你可以使用 QXmlQuery。它的行为类似于 XQuery（我猜语法是一样的）。您可以利用 XQuery 的灵活性来解析您的 xml 文件。你可以从这样的代码开始：

```
QByteArray myDocument;
QBuffer buffer(&myDocument); // This is a QIODevice.
buffer.open(QIODevice::ReadOnly);
QXmlQuery query;
query.bindVariable("myDocument", &buffer);
query.setQuery("doc($myDocument)"); 
```

setQuery 方法允许您定义您的搜索模式。它可以基于元素 id、属性等等……就像 XQuery 一样。这是 QXmlQuery 文档页面： [链接](http://doc.qt.digia.com/4.8-snapshot/qxmlquery.html#details)

# java - Java 中的 Python 列表

> ID：12913888
> 
> 赞同：0
> 
> 时间：2012-10-16T11:39:28.123
> 
> 标签：java, python, xml-rpc

我正在使用从 java 到 python 的 XMLRPC 调用。

所以我在 python 中的服务器有这些远程方法，并在 java 中使用 apache xmlrpc lib 进行调用。

所以我总是喜欢使用 Dictionary 从电话中返回。因为当我使用字典时，Java 中的 Object 数据类型直接打印从 python 返回的值集。然后我使用 Map 进行迭代。

现在我必须以其中一种方法返回列表。我可以将 Object 转换为 List/ArrayList/HashMap。

需要帮助... 如何在 Java 中转换 Python 列表？

样本输出：

```
{hello=1, list=[Ljava.lang.Object;@1ba9f7} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:43:48.230

看起来转换工作正常 -是打印出 Java**数组**（不是列表）对象`[Ljava.lang.Object;@1ba9f7`的默认方式。不是很有帮助，但是你去...

 **您可以**使用**. `Arrays.asList(mylist)`请参阅[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)。

或者尝试使用以下方法打印出数组中的项目：

```
for (Object obj: myArray)
{ 
   System.out.println(obj);
} 
```**

# c# - 在终止任务之前正确使用 InvokeRequired

> ID：12913890
> 
> 赞同：0
> 
> 时间：2012-10-16T11:39:33.760
> 
> 标签：c#, .net, winforms, serial-port

我正在开发一个与串口相关的应用程序。在使用`DataReceived`事件时，`SerialPort`我需要使用接收到的字节更新文本框：

```
private void Connection_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    ledReceive.On = true;

    var data = Connection.ReadExisting();

    _readBuffer.Add(data);
    Invoke(new EventHandler(AddReceivedPacketToTextBox));       
} 
```

所以我`Invoke`用来更新文本框。但是有一个大问题。当我尝试关闭连接时，我的 UI 被冻结，我认为这是`Invoke`因为可能正在做某事。

一位朋友说我应该使用`RequiredInvoke`，但我不知道他到底是什么。如何在不弄乱调用和 UI 线程的情况下关闭连接？

这是我的关闭方法：

```
private void DisconnectFromSerialPort()
{
    if (Connection != null && Connection.IsOpen)
    {
        Connection.Close();
        _receivedPackets = 0; //reset received packet count
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:02:26.467

我不完全确定，但我猜想当您关闭连接时，更新 UI 的线程会被删除，这可以解释为什么它会冻结。但是如果不深入研究您的所有代码，我无法确定。

如果尝试访问您的元素的线程不是您的 UI 的原生线程，则 InvokeRequired 返回 true。或者，如果您更喜欢 MS 解释：

```
 // Summary:
    //     Gets a value indicating whether the caller must call an invoke method when
    //     making method calls to the control because the caller is on a different thread
    //     than the one the control was created on.
    //
    // Returns:
    //     true if the control's System.Windows.Forms.Control.Handle was created on
    //     a different thread than the calling thread (indicating that you must make
    //     calls to the control through an invoke method); otherwise, false. 
```

和一个基本的实现：

```
 public void ReceiveCall()
    {
        if (this.InvokeRequired)
        {
            this.Invoke(new CallDelegate(ReceiveCall), new object[] { });
            return; // Important to not continue on this method.
        }

        // Whatever else this function is suppose to do when on the correct thread.
    } 
```

Invoke 应该是您的函数所做的第一件事，以防止该线程深入您的 UI。现在，如果连接本身被确定在 UI 线程的边界内，它可能不会触发“InvokeRequired”。防止这种情况发生的一种方法是手动创建一个线程来更新未绑定到您的连接的 UI。

我在更新多个 UI 元素的渲染时遇到了类似的问题。时钟可以正常工作，但会“挂起”，直到所有 UI 都完成渲染，如果有很多 UI，这意味着它会跳过下一个滴答声。

```
 Thread updateUI = new Thread(updateUIDelegate);
     updateUI.Start(); 
```

这样，我的时钟（或您的连接）将启动一个独立线程，该线程自行完成其工作。您可能还需要检查 Monitor 类或 lock 关键字，以防止使用相同变量的线程或多个线程发生冲突。

编辑：或者您可以阅读很棒的答案，这可能比我的更有意义：[关闭串行端口时导致我的 UI 冻结的原因是什么？](https://stackoverflow.com/questions/12913936/proper-usage-of-invokerequired-before-terminating-a-task)

# java - 玩！框架：未收到数据

> ID：12913892
> 
> 赞同：1
> 
> 时间：2012-10-16T11:39:38.377
> 
> 标签：java, playframework-2.0

这是我定义的路线：
`GET /user/:id controllers.Users.show(id: Long)`

`Users`这是此 GET 请求 的处理程序（在类中）：

```
public static Result show(long id) {
        return ok("hello " + id);
    } 
```

我收到此错误：

> No data received 无法加载网页，因为服务器未发送数据。以下是一些建议： 稍后重新加载此网页。错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据。

这很奇怪，因为它是唯一存在此问题的页面，而且一切似乎都很正常。
那么为什么会这样呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:59:44.143

使用`Long`as`id`的类型（而不是`long`）：

```
public static Result show(Long id) {
    return ok("hello " + id);
} 
```

# android - Sqlite 选择语句不起作用

> ID：12913894
> 
> 赞同：0
> 
> 时间：2012-10-16T11:39:46.793
> 
> 标签：android, database, sqlite

我正在制作一个示例应用程序，其中我为 sqlite 创建了一个数据库，我还在表中插入了值。但是当我使用选择查询时，我得到了空指针异常。

这是我的课：

```
public class MainActivity extends Activity {

    Button insert;
    Button show;
    EditText name;
    EditText mobile;
    SQLiteDatabase db;
    String name_str;
    String mob_str;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        name = (EditText)findViewById(R.id.name_editText);

        insert = (Button) findViewById(R.id.insert_button);

        insert.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //Toast.makeText(getApplicationContext(), "Onclick works", Toast.LENGTH_LONG).show();

                name_str=name.getText().toString();
                Toast.makeText(getApplicationContext(), name_str, Toast.LENGTH_LONG).show();

                // create or open database file
                db = openOrCreateDatabase("Test.db" , SQLiteDatabase.CREATE_IF_NECESSARY,  
                                                                                      null);
                db.setVersion(1);
               // db.setLocale(Locale.getDefault());
                db.setLockingEnabled(true);

                //System.out.println("Database Created");

             // creating table in database
                db.execSQL("CREATE TABLE IF NOT EXISTS "+"contacts"+" " +
                                "( id INTEGER PRIMARY KEY AUTOINCREMENT," +
                                "  name varchar, " +
                                "  mobile varchar ); ");

                db.execSQL("INSERT INTO contacts(name, mobile)VALUES ('Swift','9830098300');");

                db.execSQL("drop table contacts");

                //Database Exists check
                File database=getApplicationContext().getDatabasePath("Test.db");

                if (!database.exists()) {
                    // Database does not exist so copy it from assets here
                    Log.i("Database", "Not Found");
                } else {
                    Log.i("Database", "Found");
                }

            }

        });
        show = (Button) findViewById(R.id.show_button);

        show.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
//                //Toast.makeText(getApplicationContext(), "Onclick works", Toast.LENGTH_LONG).show();
                Cursor c =db.rawQuery("SELECT COUNT() FROM sqlite_master WHERE name ='contacts';",null);
                if (c != null ) {
                    if  (c.moveToFirst()) {
                          do {
        String firstName = c.getString(c.getColumnIndex("name"));

                          }while (c.moveToNext());
                    }
               }

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是 main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/name_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="60dp"
        android:text="Name:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/name_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/name_textView"
        android:layout_alignBottom="@+id/name_textView"
        android:layout_marginLeft="14dp"
        android:layout_toRightOf="@+id/name_textView"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/mobile_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/name_editText"
        android:layout_marginTop="53dp"
        android:text="Mobile: "
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/mobile_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/mobile_textView"
        android:layout_alignBottom="@+id/mobile_textView"
        android:layout_alignLeft="@+id/name_editText"
        android:ems="10"
        android:inputType="phone" />

    <Button
        android:id="@+id/insert_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/mobile_editText"
        android:layout_centerVertical="true"
        android:text="Insert" />

    <Button
        android:id="@+id/show_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/insert_button"
        android:layout_alignBottom="@+id/insert_button"
        android:layout_alignRight="@+id/mobile_editText"
        android:text="Show" />

</RelativeLayout> 
```

日志猫：

```
10-16 17:16:28.938: D/AndroidRuntime(413): Shutting down VM
10-16 17:16:28.938: W/dalvikvm(413): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-16 17:16:28.958: E/AndroidRuntime(413): FATAL EXCEPTION: main
10-16 17:16:28.958: E/AndroidRuntime(413): java.lang.NullPointerException
10-16 17:16:28.958: E/AndroidRuntime(413):  at com.cyberswift.database.example.MainActivity$2.onClick(MainActivity.java:97)
10-16 17:16:28.958: E/AndroidRuntime(413):  at android.view.View.performClick(View.java:2408)
10-16 17:16:28.958: E/AndroidRuntime(413):  at android.view.View$PerformClick.run(View.java:8816)
10-16 17:16:28.958: E/AndroidRuntime(413):  at android.os.Handler.handleCallback(Handler.java:587)
10-16 17:16:28.958: E/AndroidRuntime(413):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-16 17:16:28.958: E/AndroidRuntime(413):  at android.os.Looper.loop(Looper.java:123)
10-16 17:16:28.958: E/AndroidRuntime(413):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-16 17:16:28.958: E/AndroidRuntime(413):  at java.lang.reflect.Method.invokeNative(Native Method)
10-16 17:16:28.958: E/AndroidRuntime(413):  at java.lang.reflect.Method.invoke(Method.java:521)
10-16 17:16:28.958: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-16 17:16:28.958: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-16 17:16:28.958: E/AndroidRuntime(413):  at dalvik.system.NativeStart.main(Native Method)
10-16 17:16:30.998: I/Process(413): Sending signal. PID: 413 SIG: 9 
```

我到底哪里错了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:52:58.720

You did not select `name` column in your query, so when looping the cursor ( `String firstName = c.getString(c.getColumnIndex("name"));`), it cannot find it.

Also, you should specify the column you count or count all in your SQL query:

```
db.rawQuery("SELECT name, COUNT(*) AS "+ "\""+ "count"+ "\""+ " FROM sqlite_master WHERE name ='contacts'",null); 
```

Then you can use `String firstName = c.getString(c.getColumnIndex("name"));` and `count` will have the needed value

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:08:53.003

正如 Mohamed 所说，您没有在查询中选择名称列。

据我所知，在 Android 中要计算行数，您应该选择所需的任何列，然后将 cursor.size() 作为计数。（最佳实践）

如果你想从游标中获取数据，首先你应该在 if (c != null ) 中验证 cursor.size() > 0。从数据库获取数据的示例：

```
if (cursor != null && cursor.size() > 0)
{
//  get count
int count = cursor.size();

//  to get data
cursor.moveToFirst();
while(!cursor.isAfterLast())
{
//  do get data from cursor
}
} 
```

# android - 当软输入消失时开始活动

> ID：12913896
> 
> 赞同：1
> 
> 时间：2012-10-16T11:39:48.393
> 
> 标签：android, android-activity, keyboard

我有这个代码，我有一个按钮，这个make出现一个编辑文本并强制软输入出现，当用户结束输入文本时我想做一些事情我怎么做？

```
public class MainActivity extends Activity implements OnClickListener {
    private EditText textInput;
    private Button btnAdd;
    private TextView text;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textInput = (EditText)this.findViewById(R.id.editText1);
        btnAdd = (Button)this.findViewById(R.id.button1);
        text = (TextView)this.findViewById(R.id.textView1);
        btnAdd.setOnClickListener(this);

    }

    public void onClick(View arg0) {
        int id = arg0.getId();
        switch(id){
        case R.id.button1:
            processOnClick();
            break;
        }

    } 

 private void processOnClick() {
        text.setVisibility(2);
        textInput.setVisibility(0);
        textInput.setInputType(0x00000001);
        textInput.getWindowVisibility();
        textInput.setCursorVisible(false);
        //textInput.onKeyDown(0x00000009,KeyEvent.KEYCODE_2);
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(textInput.findFocus(), 0);

    } 
```

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:58:21.707

你可以使用这个链接：[How to know if keyboard (dis)appears in Android?](https://stackoverflow.com/questions/5961927/how-to-know-if-keyboard-disappears-in-android)

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        // Checks whether a hardware or on-screen keyboard is available
        if (newConfig.keyboardHidden == Configuration.KEYBOARDHIDDEN_NO) {
            Toast.makeText(this, "Keyboard visible", Toast.LENGTH_SHORT).show();
        } else if (newConfig.keyboardHidden == Configuration.KEYBOARDHIDDEN_YES) {
            Toast.makeText(this, "Keyboard hidden", Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:04:26.247

这完全取决于您如何确定“用户结束输入文本”。

如果您可以认为用户在输入（例如）后等待程序响应 3 秒，您可以执行以下操作：

1.  在 . [`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)_ `EditText`每次文本更改时，都会通过回调通知您。
2.  每次输入后，启动一个`Thread`休眠预定时间（3 秒）的程序。如果休眠完成，则启动`Activity`. 如果用户在睡眠完成之前输入文本，则中断线程并重新开始。

一个更直接的实现是提供一个按钮，上面写着“Go”或“Start”这样的东西，这样用户就不会感到意外，你也不会做任何无意的事情。

# javascript - dojo enchancedGrid 在特定单元格上动态设置可编辑 false 不会进行更改

> ID：12913897
> 
> 赞同：1
> 
> 时间：2012-10-16T11:39:49.857
> 
> 标签：javascript, datagrid, dojo

我有我的数据网格，我点击实际的行然后循环它，我得到我想要的值并将可编辑的 true 更改为 false。我发现`render()`我无法使用这个功能。我尝试了很多方法，但我没有成功。所以我的问题是：当我在特定单元格上将可编辑更改为 false 时，如何告诉网格注意更改？

提前致谢

```
 var theStructure = grid.structure;
    var allCells = theStructure[0].cells;
    var _checker = 0;

    for(allItems in allCells) {
      if(_checker == 0) {
        allCells[3].editable = false;
        grid.render();
        _checker = 1;
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:15:10.803

没有直接的 API。我搜索了很多，这里有两个链接帮助我最终实现了它：

最后发表在[http://dojo-toolkit.33424.n3.nabble.com/dojox-grid-DataGrid-disable-cell-editing-on-specific-rows-td3987523.html](http://dojo-toolkit.33424.n3.nabble.com/dojox-grid-DataGrid-disable-cell-editing-on-specific-rows-td3987523.html)

Dojo-DataGrid的正确答案[:: How to dynamic fetch values as options for a select box in Dojo DataGrid](https://stackoverflow.com/questions/6734141/dojo-datagrid-how-to-dynamically-fetch-values-as-options-for-a-select-box-in)

请注意，第一个链接是有一个需要为行调用的方法，您希望不可编辑的列，但是一旦您单击不可编辑的列，它就会离开......并修复我们需要的点击字段的相应存储并使用通过第二个链接完成的 HTML span 元素显示它。

试试这些，它应该对我有用。如果不起作用，请告诉我们问题所在。

# android - 为什么我无法从丹麦获得 SIM 卡的手机号码？

> ID：12913898
> 
> 赞同：1
> 
> 时间：2012-10-16T11:39:50.863
> 
> 标签：android, telephony, telephonymanager

要获取用户的手机号码，这就是我所做的：

```
TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_MANAGER);
String mobileNumber = tm.getLine1Number(); 
```

这种方法似乎在菲律宾 100% 有效，那里的 SIM 卡大多是预付费的。如果您需要更改您的号码，您只需购买一个新号码。然而，在丹麦，我总是一无所获。这是为什么？除了这个之外，我还有什么方法可以获取用户的手机号码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:43:47.997

您的电话号码存储在 SIM 卡的内存中（这里我不是在谈论联系人内存）。这取决于 SIM 卡制造商是否将号码添加到您的 SIM 卡中。因此，您的 SIM 卡可能不包含该号码。

要解决这个问题，您需要在 SIM 中手动定义您的电话号码。使用任何旧的索尼爱立信手机或 iPhone，进入 SIM 设置（取决于手机型号）并为 SIM 卡定义您的号码。完成后，您的代码将能够从 SIM 中读取它。

在可能的情况下，我使用的 Tre-Sverige SIM 卡也没有存储在 SIM 卡上的电话号码，但按照上述步骤后，现在我可以读取号码了。

# multithreading - perl 程序中的多线程在 Windows 上产生意外结果

> ID：12913902
> 
> 赞同：3
> 
> 时间：2012-10-16T11:39:58.383
> 
> 标签：multithreading, perl

我是 perl 的新手，正在尝试多线程。我期待下面的程序创建所有线程并至少在 5 秒后打印“创建所有线程”，一旦执行并且所有线程都在等待输入值。

```
use threads;

my @arr = (1,2,3,4);
foreach (@arr) {
    sleep(1);
    print "\ncreating...\n";
    threads->new(\&echo, $_);
    print "\ncreated\n";
}
print "\ncreated all the threads\n";
sleep(200); #wait for the threads to finish

sub echo {
    my ($thread) = @_;
    print "\nthread($thread) Enter the value:\n";
    my $value = <>;
    print "\nthread($thread) Got value= $value\n";
} 
```

但我得到了关注：

```
creating...

created

thread(1) Enter the value:

creating... 
```

似乎还没有创建其他 3 个线程，如果我删除 sleep(1)，我有时会得到预期的结果，但是涉及 sleep(1)，即使等待几分钟，我也会得到上述结果。我可能会错过什么？我认为这是基本的东西，但我无法弄清楚。

更新：

相同的程序在 Linux 上完美运行，Windows 的平台特定问题可能是什么？

更新2：

在同一行上遵循 java 程序在同一个盒子上工作得很好：

```
import java.io.IOException;

public class MT {

    public static void main(String[] args)throws Exception {
        for(int i=0;i<4;i++){
            Thread.sleep(2000);
            new Thread(new Task(i)).start();
        }
        System.out.println("created all the threads");
        Thread.sleep(20000);

    }

    static class Task implements Runnable{

        int i;
        public Task(int i) {
            super();
            this.i = i;
        }
        @Override
        public void run() {
            try {
                System.out.println("Thread:"+i+" Enter value");
                int x= System.in.read();
                System.out.println(x);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

我不确定 perl 如何在 Windows 上支持多线程！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:12:57.963

您实际上有两个不同的阻塞问题：

1.  控制台上的 I/O 缓冲（感谢 Disco 3 的建议）。
2.  从标准输入读取的线程相互阻塞（但不是其他线程）。

考虑这个测试程序：

```
use threads;
 $| = 1;

my $thr1 = threads->new(\&echo, 1);
my $thr2 = threads->new(\&print_dots, 2);
sleep 10;
my $thr3 = threads->new(\&echo, 3);

sleep 200;

sub print_dots {
    while (1) {
        print ".";
        sleep 1;
    }
}

sub echo {

    my ($thread) = @_;
    print "\nthread($thread) Enter the value:\n";
    sleep 1;
    my $value = <>;
    print "\nthread($thread) Got value= $value\n";
} 
```

如果您不禁用 i/o 缓冲（由 完成`$|=1;`），那么您根本不会得到任何点。如果禁用输入缓冲，打印点的线程永远不会被阻塞。但是，从控制台读取的第二个线程仍然被第一个线程阻塞。

如果您需要在 Windows 上的 Perl 中从标准输入进行真正的非阻塞读取，有一些潜在的解决方案。 [`Win32::Console`](http://search.cpan.org/~jdb/Win32-Console-0.09/Console.pm)可能是一个很好的起点。[这是一个可能有用的讨论](http://www.perlmonks.org/?node_id=720675)。

# asp.net-mvc-3 - 在 MVC3 的控制器中编辑结果数据没有被传递回视图

> ID：12913912
> 
> 赞同：0
> 
> 时间：2012-10-16T11:40:35.980
> 
> 标签：asp.net-mvc-3, controller, edit

我创建了一个下拉列表，可以很好地传递该数据。但是，当我想编辑表单时，GET 操作中的旧值不会填充到表单中。我是 MVC 的新手，所以一个简洁的例子会很棒。更新 - 我想我知道发生了什么，需要帮助解决。ddl 仅包含我的下拉数据，因此我仅将下拉数据传递给编辑视图中的模型。表单的数据在我的代码下面的变量模型中，如何在视图中传递 ddl 和模型？

这是我在控制器中的代码

```
public ActionResult Edit(int id)
        {
            var ddl = new Users();
            ddl.DropDowns = userRepository.Getddl("Departments").Select(c => new SelectListItem
            {
                Value = c.DropdownID.ToString(),
                Text = c.DropdownText
            });
                        var model = userRepository.GetUserId(id);
            return View(ddl);
        }

        [HttpPost]
        public ActionResult Edit(Models.Users users)
        {
            userRepository.UpdateUser(users);
            return RedirectToAction("Index");
        } 
```

看法

```
@model Models.Users

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <div id="stylized" class="myform">
    <fieldset>
        <legend>User Account</legend>     

        <div class="editor-label">
            @Html.LabelFor(model => model.UserFullName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserFullName)
            @Html.ValidationMessageFor(model => model.UserFullName)
        </div>
       <br/>
        <div class="editor-label">
            @Html.LabelFor(model => model.UserName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserName)
            @Html.ValidationMessageFor(model => model.UserName)
        </div>
        <br/>
         <div class="editor-label">
            @Html.LabelFor(model => model.ProfileName)
        </div>
          <div class="editor-field">
       @Html.DropDownListFor(x=> x.DeptID,new SelectList(Model.DropDowns,"Value","Text"),"Select")      

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:15:37.117

您将错误的对象传递给您的视图。传递从 Repository 方法获得的用户对象。假设您的`GetUserID`方法返回一个`User`类对象并且它 `DropDowns`在您的用户对象中有一个属性

```
 public ActionResult Edit(int id)
 {
     var model = userRepository.GetUserId(id);
     model.DropDowns = userRepository.Getddl("Departments").
                                          Select(c => new SelectListItem
        {
            Value = c.DropdownID.ToString(),
            Text = c.DropdownText
        });                      
     return View(model);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:16:54.213

您需要将模型和 DropDownList 传递到视图中。主要对象应该是模型，因为这是您的视图所依据的。但是，由于您还需要将 DropDownList 放入视图中，您可以将其附加到模型或通过 ViewBag 添加它：

```
public ActionResult Edit(int id)
{
   var ddl = new Users();
   ddl.DropDowns = userRepository.Getddl("Departments").Select(c => new SelectListItem
   {
       Value = c.DropdownID.ToString(),
       Text = c.DropdownText
   });

   var model = userRepository.GetUserId(id);

   // When accessing this from the view, you will
   // call it by ViewBag.DepartmentsDropdown
   ViewBag.DepartmentsDropdown = dll;

   return View(model);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:09:35.827

you're passing a new (empty) `User` to the view. You want to pass the model to the view instead.

```
return View(model); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T12:12:45.247

如果我正确理解您的问题，则您的编辑视图未显示用户数据。相反，它显示一个空白表格，就好像它是一个“新”动作？

我认为您将错误的模型传递给您的视图-您应该传递模型，但您传递的是 ddl-（ddl 是新用户）。

您可以通过 viewbag 传递您的下拉列表，或者创建一个包含您的用户和下拉列表的视图模型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T12:20:47.437

创建例如。UsersViewModel 类，将 SelectList 等属性添加到提要下拉列表、用户列表和您希望传递到视图中的所有其他数据。在返回该类的视图初始化实例之前，设置属性并将其作为模型传递。

```
..
var model = new UsersViewModel
{
   Users = new SelectList(..),
   ...
}
return View(model); 
```

然后在您的视图中，您可以引用来自该 ViewModel 的所有对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T13:03:18.783

好的，感谢大家的意见，我能够解决它。我不想重新创建我拥有的模型。我没有看到数据的原因是因为我没有通过模型。所以我必须创建 ViewData 来保存我的下拉信息。事后看来，最好花更多时间在模型上，这样我就不会遇到这样的问题。没有大家的帮助，我不会得到这个。

在控制器中

```
ViewData["DepartmentDD"] = new SelectList(ddl.DropDowns, "Value", "Text"); 
```

在视图中

@Html.DropDownListFor(model => model.DeptID, (SelectList)ViewData["DepartmentDD"], "Choose one")

# javascript - 大型静态 HTML 和 jQuery 显示/隐藏

> ID：12913913
> 
> 赞同：-1
> 
> 时间：2012-10-16T11:40:39.327
> 
> 标签：javascript, jquery, dom

我正在学习 jQuery，正如您从我最后的问题中看到的那样。现在我尝试让一个非常大的静态 html 更易于导航。

html的一部分：

```
<a class="entryheader">...</a><br /><br />
<div class="entrycontent">...<br />
<p class="entryfoot">...</p>

<a class="entryheader">...</a><br /><br />
<div class="entrycontent">...<br />
<p class="entryfoot">...</p> 
```

我的 JS：

```
$("a.entryheader").click(function(){
 alert("clicked");
 $(this).next("div.entrycontent").show();
}); 
```

Entrycontent 默认是隐藏的，只有在用户点击 entryheader 时才可见。

如果我点击 entryheader 我会得到消息框，但 entrycontent 保持不可见。

我为 $(this).next 尝试了不同的方法，但都没有奏效。

可能我缺乏对DOM模型的理解。您推荐哪些工具和文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:48:59.303

问题是`next()`在 html 中查找下一个元素。在您的情况下，您使用一堆`BR`标签作为分隔符，所以`next()`将是`BR`

最好的解决方案是使用您拥有的代码并删除`BR`标签并使用 CSS 应用边距进行分隔。

如果你保留`BR`标签，你可以使用`index()`方法

```
$("a.entryheader").click(function(){
     var index=$("a.entryheader").index(this)
     $("div.entrycontent").eq(index).show();
}); 
```

**DEMO 使用索引** [http://jsfiddle.net/fUeZE/](http://jsfiddle.net/fUeZE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:55:11.003

The other way of achieving what you want with your code is using jQuery's `nextAll()` traversal method to match all of the next elements with a class of `.entrycontent` but then filtering to just the first found like so.

```
$("a.entryheader").click(function(){ 
    $(this).nextAll('div.entrycontent').first().show();
}); 
```

[DEMO](http://jsfiddle.net/qhP2s/)

More info on [.first()](http://api.jquery.com/first/) and [.nextAll()](http://api.jquery.com/nextAll/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:50:24.383

`$(this).next('div.entrycontent')`在你的情况下不会选择任何东西，因为锚标签之后的下一个兄弟是`<br />`标签。我会删除`<br />`标签并向锚标签添加一些边距底部以创建相同的效果，然后`.next`上面的代码将起作用。

# c# - 使用 c# 从 Windows 7 中的 USB 摄像头捕获图像

> ID：12913917
> 
> 赞同：0
> 
> 时间：2012-10-16T11:40:41.797
> 
> 标签：c#, windows-7, camera

好吧，我注意到微软试图放弃 WIA 有一些技巧（下载 dll 注册它们等） 但我想知道我是否喜欢通过 USB 快速抓取图片 现在微软的“官方”方式会是什么？我正在使用 Windows 7 和 Visual Studio Express 2010

如果可能的话，也许你可以给我一些代码建议，或者关于它的文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:24:12.167

我停止寻找它，我现在正在使用 Aforge，它工作得很好。

有点难过，它在没有评论或建议的情况下被否决，以帮助我找到它。我确信微软更喜欢与自己的视频摄像头通话，但恐怕它仍然未知，另一方面，Aforge 速度很快，效果很好。

# ruby-on-rails - 将模块与 attr_accessible、has_one、has_many 混合

> ID：12913922
> 
> 赞同：11
> 
> 时间：2012-10-16T11:40:59.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, multiple-inheritance, mixins

我可以在 Rails 中做这样的事情吗？

```
module Authored
  belongs_to :user
  attr_accessible creation_date
end

class Line < ActiveRecord::Base
  include Authored
end

class Document < ActiveRecord::Base
  include Authored
end

class User < ActiveRecord::Base
  has_many :creations, :class_name => 'Authored'
end 
```

或者我是否需要使用简单的继承，即使我的 Authored 类具有不同的类层次结构？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-16T11:47:45.870

```
module Authored
  extend ActiveSupport::Concern

  included do
    belongs_to :user
    attr_accessible :creation_date
  end
end

class Line < ActiveRecord::Base
  include Authored
end

class Document < ActiveRecord::Base
  include Authored
end 
```

有关更多信息`ActiveSupport::Concern`，请访问[http://api.rubyonrails.org/classes/ActiveSupport/Concern.html](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

# php - 从字符串中删除特殊的非标准字符

> ID：12913923
> 
> 赞同：1
> 
> 时间：2012-10-16T11:41:06.237
> 
> 标签：php, mysql, special-characters

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:43:25.090

尝试这个：

```
urldecode($string); 
```

而不是自己使用字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:44:00.067

你试过str_replace吗？格式是（要替换的项目，替换为，找到项目的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T14:33:40.173

我想你快到了。0x201D 是 unicode 字符“右双引号”

见[http://www.fileformat.info/info/unicode/char/201d/index.htm](http://www.fileformat.info/info/unicode/char/201d/index.htm)

那你可以试试...

```
preg_replace('/\\X201d/', '', $String); 
```

# jquery - 带有 :not 的 jQuery 选择器在 IE7 中不起作用

> ID：12913928
> 
> 赞同：1
> 
> 时间：2012-10-16T11:41:27.097
> 
> 标签：jquery

有人可以告诉我为什么这在 IE7 中不起作用，以及如何最好地重构它以在 IE7 以及其他主要浏览器（如 Chrome、Firefox 和 Safari）中工作？

```
 var validTabSet = $('[tabindex]:not([tabindex=-1]):not([type=hidden]):not([disabled=true])'); 
```

谢谢

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:52:23.330

您可以将传递给的选择器分解`:not`为[多重选择器](http://api.jquery.com/multiple-selector/)：

```
var validTabSet = $("[tabindex]:not([tabindex=-1], [type=hidden], [disabled=true])"); 
```

如果在 IE7 上仍然失败，您可以使用[not()](http://api.jquery.com/not/)方法代替选择器：

```
var validTabSet = $("[tabindex]").not("[tabindex=-1], [type=hidden], [disabled=true]"); 
```

# php - Alternative for if statement

> ID：12913931
> 
> 赞同：0
> 
> 时间：2012-10-16T11:41:40.893
> 
> 标签：php, if-statement

What other alternatives for the `if` statement in the following code, are there?

```
$page_title = $titles['default'];
$page_desc  = $descriptions['default'];

if(array_key_exists($module, $titles) && !empty($titles[$module]))
{
    $page_title = $titles[$module];
}
if(array_key_exists($module, $descriptions) && !empty($descriptions[$module]))
{
    $page_desc  = $descriptions[$module];
} 
```

The above code works great, I'm just looking to see if there's any room of improvement.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T11:43:06.580

```
$page_title = isset($titles[$module]) ? $titles[$module] : $titles['default'];
$page_desc  = isset($descriptions[$module]) ? $descriptions[$module] : $descriptions['default']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:54:16.720

What about this? ;)

```
($page_title = @$titles[$module]) or $page_title = $titles['default'];
($page_desc = @$descriptions[$module]) or $page_desc = $descriptions['default']; 
```

or this?

```
$page_title = @$titles[$module] ?: $titles['default'];
$page_desc = @$descriptions[$module] ?: $descriptions['default']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:55:26.127

This is a slightly different way :) - I make no statement to say it is better... it depends on the situation.

```
$titles += array("$module" => $titles['default']);
$descriptions += array("$module" => $descriptions['default']);

$page_title = $titles[$module];
$page_desc = $descriptions[$module]; 
```

# zend-framework - set permission in acl.ini in zend framework

> ID：12913934
> 
> 赞同：1
> 
> 时间：2012-10-16T11:42:04.093
> 
> 标签：zend-framework

can someone guide me for setting permission in acl.ini in zend framework i have a specific type of user and i want to give permission to access particular controller. i have implemented Admin_MarketingController in admin section and include this controller in default module which name is also MarketingController index action work properly but any action i want to access url sent to error page access Marketing controller in admin section it work properly. plz help me to set permission and access other action include file path :APPLICATION_PATH/modules/admin/controllers/MarketingController.php default controller MarketingController inherit with Admin_MarketingController

# c# - Named pipes performance issues

> ID：12913935
> 
> 赞同：4
> 
> 时间：2012-10-16T11:42:05.347
> 
> 标签：c#, delphi, io, named-pipes

I'm using named pipes for inter-procedural communication between C# and Delphi. C# uses the `System.IO.Pipes` package, whereas Delphi makes use of `Libby's pipes.pas`. Unfortunately, the communication is all but high-performance: Profiling showed me that the communication takes 72% of the whole runtime, the rest is used by calculations.
I was able to locate one problem that could take up resources: If I don't explicitly disconnect the sending client's connection in Delphi, *C# doesn't receive any data at all*.

## Delphi (sending)

```
FClient1.Write(msg[1], Length(msg));
FClient1.FlushPipeBuffers;
FClient1.WaitForReply(20);
FClient1.Disconnect;   // disconnect to signalize C# that the writing is finished
FClient1.Connect;      // connect again to prevent synchronization problems 
```

## C# (receiving)

```
// Wait for a client to connect
stc.pipeServer.WaitForConnection();
while (reconnect_attempts < MAX_RECONNECT_ATTEMPTS) // 
{
   string tmp = sr.ReadLine();

   // if result is empty, try again for <MAX_RECONNECT_ATTEMPTS> times
   // so you can eliminate the chance that there's just a single empty request
   while (tmp != null)// && result != tmp)
   {
      tmp = sr.ReadLine();
      result += tmp;
   }
   // sleep, increment reconnect, write debugging...
}
stc.pipeServer.Close(); 
```

Even though I guess that the reconnecting is expensive, I'm not entirely sure about it. One flow of data (roughly 1 / 11 kb) takes 130 (respectively 270ms for the 11kb) total (sending & receiving).

**My question would be**:
Is it necessary to force-disconnect the pipes to signalize that the client is done writing? As far as my observations go, *this is only necessary when sending with libby's*. Are there any other possible causes for the poor performance? Thanks in advance.

As an addition, here's the sending and receiving done vice versa:

## C# (sending)

```
 stc.pipeClient.Connect();
 StreamWriter sw = new StreamWriter(stc.pipeClient);
 //sw.AutoFlush = true;
 sw.WriteLine(msg);
 sw.Flush();
 stc.pipeClient.WaitForPipeDrain();  // waits for the other end to read all bytes 
 // neither disconnect nor dispose 
```

## Delphi (receiving)

```
 SetLength(S, Stream.Size);   Stream.Read(S[1], Length(S));  
 FPipeBuffer := FPipeBuffer + S;   { TODO 2 : switch case ID }   
// if the XML is complete, i.e. ends with the closing checksum   
if (IsFullMessage()) then
begin
   // end reading, set flag
   FIsPipeReady := true;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:00:31.770

经过大量（手动）分析后，我对这个问题提出了两个见解：

1.  利比的管道是一个复杂的野兽。由于它似乎使用多个线程并且在使用方面表现出奇怪的行为，因此手动使用 WinApi 毕竟更方便。此外，实际通信的性能有所提高。换句话说：*在这样一个相对简单的 IPC 场景中，libby 的管道似乎比 WinApi 慢。*
2.  匿名管道/使用标准输出和标准输入似乎比命名管道更快。

但是，我必须补充一点，我仍然有点困惑，无法判断这是真的还是我在这里计算了错误的数字。

下面是一个简单的例子，说明 Delphi 中的 WinApi 实现如何：

```
// setup pipes, you'll need one for each direction
// init handles with 0
    CreatePipe(ReadPipe1,       // hReadpipe
               WritePipe1,      // hWritePIpe
               @SecurityAttributes,        // Security
               PIPE_SIZE)                  // Size

    // setup Startupinfo
    FillChar(StartupInfo, Sizeof(StartupInfo), 0);
    StartupInfo.cb := Sizeof(StartupInfo);
    StartupInfo.dwFlags := STARTF_USESHOWWINDOW or STARTF_USESTDHANDLES;
    StartupInfo.hStdInput := ReadPipe1;
    StartupInfo.hStdOutput := WritePipe2;
    StartupInfo.wShowWindow :=  SW_HIDE; 

    // CreateProcess [...]

    // read
    Win32Check(
            ReadFile(
                  ReadPipe1,  // source
                  (@outputBuffer[1])^,               // buffer-pointer
                  PIPE_BUFFER_SIZE,                 // size
                  bytesRead,                       // returns bytes actually read
                  nil                             // overlapped on default
                  ));
    // send           
    Win32Check(
            WriteFile(
                WritePipe2,
                (@msg[1])^,         // lpBuffer - workarround to avoid type cast
                NumberOfBytesToWrite,
                bytesWritten,       // lpNumberOfBytesWritten
                nil                 // Overlapped   
                )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:45:11.457

也许您可以将命名事件用于 IPC 信令。当这些是本地的 (TEvent.Create('local\myserver'); 当您需要在不同会话之间进行 IPC 时（例如客户端应用程序和后台 windows 服务），这些在 Win7 等中工作正常，您需要更多权限等（默认全局\由于UAC，无法在win7中使用？）。 [http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devwin32/threadswaitingforatasktobecompleted_xml.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devwin32/threadswaitingforatasktobecompleted_xml.html)

例如：为每个连接创建一个事件（每个连接生成一个名称）。

或者看看不同的 IPC 命名管道 + 事件实现： [https ://micksmix.wordpress.com/2011/06/27/named-pipes-unit-for-delphi/](https://micksmix.wordpress.com/2011/06/27/named-pipes-unit-for-delphi/)

顺便说一句：你提到你使用了分析，但你不能说什么最花时间？你使用了什么样的分析？不是像 AQtime (http://smartbear.com/products/free-tools/aqtime-standard) 或 AsmProfiler (http://code.google.com/p/asmprofiler/) 这样的“分析器”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:53:42.423

简单的改进可能是：首先发送要发送的字节数（以便接收者知道它可以期望多少数据）然后发送数据

# c# - What causes my UI to freeze when closing a serial port?

> ID：12913936
> 
> 赞同：2
> 
> 时间：2012-10-16T11:42:08.513
> 
> 标签：c#, .net, winforms, serial-port

I am working on a serial port related application. While using `DataReceived` event of `SerialPort` I need to update a textbox with the received bytes:

```
private void Connection_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    var data = Connection.ReadExisting();
    _readBuffer.Add(indata);

    Invoke(new EventHandler(AddReceivedPacketToTextBox));       
} 
```

So I use `Invoke` to update the textbox. But there is a big problem. When I try to close connection, my UI gets freezed, I think this is becase `Invoke` is doing somehing perhaps.

A friend said I should use `RequiredInvoke`, but I have no idea what he ment really. How can I close the connection without messing up the invoke and UI thread?

Here is my close method:

```
private void DisconnectFromSerialPort()
{
    if (Connection != null && Connection.IsOpen)
    {
        Connection.Close();            
    }
} 
```

**UPDATE**

As Hans said I changed `Invoke` to `BeginInvoke` but now its a bit worse, my application stops working due to `InvalidOperationException` because the collection `_readBuffer` was modified (Thats what the detail says in VS)

Here is my code for adding text to textbox:

```
private void AddReceivedPacketToTextBox(object sender, EventArgs e)
{

    foreach (var i in _readBuffer)
        tbIn.Text += string.Format("{0:X2} ", i);

    tbIn.Text += Environment.NewLine;

    ScrollToBottom(tbIn);

    label4.Text = _receivedPackets.ToString();
    _receivedPackets++;

    _readBuffer.Clear(); //Possibly because clearing collection gets out of sync with BeginInvoke??         
} 
```

**2nd Update**

I still have the problem, changing the `Invoke()` to `BeginInvoke` didn;t help. I also tried to add disconnect to form closing event nu success...anytime I close my form it gets stock (I mean its parent form, because this form that has access to serialport is being called from another form`.

I mean I figured out that the UI gets locked only in 2 cases: If I clock a button which calls `Connection.Close()` also if I try to close the form, the parent form will throw exception that some objects are disposed.

I call the serial form like this from the parent form:

```
public DebugForm DebugForm;

private void button1_Click(object sender, EventArgs e)
{
    if (DebugForm != null)
    {
        DebugForm.BringToFront();
        return;
    }

    DebugForm = new DebugForm();
    DebugForm.StartPosition = FormStartPosition.CenterScreen;
    DebugForm.Closed += delegate
                             {
                                 WindowState = FormWindowState.Normal;
                                 DebugForm = null;
                             };

    DebugForm.Show();
    WindowState = FormWindowState.Minimized; 
} 
```

Could this be the problem?!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T12:04:30.367

是的，此代码在 Close() 调用中导致死锁的可能性非常高。在 DataReceived 事件处理程序停止运行之前，串行端口无法关闭。但在 UI 线程空闲并泵送消息循环之前，Invoke() 调用无法完成。它不是空闲的，它卡在 Close() 调用中。所以事件处理程序无法取得进展，因为它卡在 Invoke() 调用中，而您的主线程无法取得进展，因为它卡在 Close() 调用中，死锁城市。

最好的解决方法是改用 BeginInvoke()，这不会阻塞事件处理程序。根本不关闭串行端口是另一种解决方法，这没关系，因为当您的程序终止时，Windows 会自动处理它。通常，在设备忙于发送数据时关闭串行端口是不确定的，并且不可避免地会导致数据丢失。好的，当您调试代码但不是您通常希望在生产中看到的情况时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T14:43:04.067

这个问题可以通过添加一个计时器来解决：

```
 bool formClosing = false;
    private void Connection_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
      if (formClosing) return;
      _buffer = Connection.ReadExisting();
      Invoke(new EventHandler(AddReceivedPacketToTextBox));
    }
    protected override void OnFormClosing(FormClosingEventArgs e)
    {
      base.OnFormClosing(e);
      if (formClosing) return;
      e.Cancel = true;
      Timer tmr = new Timer();
      tmr.Tick += Tmr_Tick;
      tmr.Start();
      formClosing = true;
    }
    void Tmr_Tick(object sender, EventArgs e)
    {
      ((Timer)sender).Stop();
      this.Close();
    } 
```

感谢[MSDN的 JohnWein](http://social.msdn.microsoft.com/Forums/en/winforms/thread/cd2f052c-b245-4df7-a935-d0b1be943cf3)

# linqpad - Only seeing one output in results pane

> ID：12913937
> 
> 赞同：1
> 
> 时间：2012-10-16T11:42:16.713
> 
> 标签：linqpad

If I run C# statements in Linqpad

```
var doc = "<a></a>";
doc.Dump();
doc.Dump(); 
```

I see two lines in the result pane

But if I do

```
var doc = XDocument.Parse("<a></a>");
doc.Dump();
doc.Dump(); 
```

I see just one line in the result pane

```
<a></a> 
```

What's going on?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:24:56.850

当您转储 XDocument 或 XElement 时，LINQPad 会使用 XML 的语法着色来实例化自定义可视化器。每个文档都显示在自己的窗口中，因此您会注意到结果区域中有两个选项卡（都标有“XML”）。

# neo4j - Transaction performance and how to lighten transaction manager?

> ID：12913939
> 
> 赞同：0
> 
> 时间：2012-10-16T11:42:22.893
> 
> 标签：neo4j, spring-data-neo4j

I'm working about a identity, access and role management with SDN 2.1.0-RC4 without AspectJ. This system aims to manage around 120 000 users and data is extracted from legacy and HR applications. I have from 500 to 30000 updates/day, so performance can be a touchy subject I ran some workbenches with default configuration.

I used a very simple and stupid way. A simple class

```
@TypeAlias("event")
@NodeEntity
public class Event {

    @GraphId
    private Long graphId;

    @Indexed
    private Long eventId;

    @RelatedTo(type="PREVIOUS_EVENT", direction=Direction.OUTGOING)
    private Event previous;

    private String description;

        /.../
} 
```

and I insert data one by one

```
 /.../
/**
 * 
 */
public void loadAllData() {

    Event root = new Event();
    root.setEventId(0L);
    root.setDescription("ROOT");

    repository.save(root);
    Event curr = root;

    for(int i = 0; i< SIZE; i ++) {
        curr = insertData(curr, i );
    }
}

/**
 * @param curr
 * @param i
 * @return
 */
public Event insertData(Event curr, int i) {
    long lastTime = System.currentTimeMillis();
    Event evt = new Event();
    evt.setEventId(curr.getEventId()+1);
    evt.setPrevious(curr);
    evt.setDescription("event #"+i);
    repository.save(evt);
    curr = evt;
    delais[i] = System.currentTimeMillis() - lastTime;
    return curr;

}
/.../ 
```

I test several by overloading theses methods

1) use of @Transactional

```
@Override
@Transactional
public Event insertData(Event curr, int i) {
    return super.insertData(curr, i);
} 
```

2) Use of neo4j transaction

```
@Override
public void loadAllData() {
    gds = getContext().getBean(GraphDatabaseService.class);
    super.loadAllData();
}       

@Override
public Event insertData(Event curr, int i) {                
    Transaction tx = gds.beginTx();
    try {
        curr = super.insertData(curr, i);
        tx.success();
    } catch(Exception e) {
        tx.failure();
    } finally {
        tx.finish();
    }
    return curr;

} 
```

I know benchmark are a trolling subject and it's not what I want. So take theses values as they are: a stupid test

Results

**JtaTransactionManager**

Mean 47,20 ms, Min 21,00 ms, Max 425,00 ms

**GraphDatabaseService**

Mean 0,90 ms, Min 0,00 ms, Max 3,00 ms

JtaTransactionManager is very slow compared to native neo4j server, but JtaTransactionManager is a global and ambitious TransactionManager.

My purpose is how to lighten or create a custom transactionManager with less ambition, a smaller scope but still using the @Transactional annotation ?

May be I've missed something ?

Thanks you for any potential help or advice.

PS: my configuration

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/data/neo4j http://www.springframework.org/schema/data/neo4j/spring-neo4j-2.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <context:annotation-config/>
    <context:spring-configured/>

    <context:component-scan base-package="benchmark"/>

    <neo4j:repositories base-package="benchmark.repository"/>
    <neo4j:config graphDatabaseService="graphDatabaseService"/>

    <bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase" 
      destroy-method="shutdown">
         <constructor-arg index="0" value="data/benchmark.db" />
    </bean>

</beans> 
```

Marc DeXeT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:16:59.283

您使用两个完全不同的事务批量大小。

使用“neo4j”TM，您可以使用一个全局 tx 范围，其中包含您的所有更新（也就是数百或数千个操作）。

有了 tx，`@Transactional`您就拥有了单个操作的 tx 范围。因此，事务的开销会为每个操作添加一次，而不是一次。

所以试着在周围放一个@Transactional `loadAllData()`。

此外，为了获得更高的插入速度，请尝试使用`template.createRelationshipBetween(...., duplicate=true)`而不是`evt.setPrevious(curr)`. 所以你跳过所有的增量检测和重复消除。

# c# - How to keep the dockable bar of dotnetbar visible in auto-hide state until i click other controls?

> ID：12913940
> 
> 赞同：3
> 
> 时间：2012-10-16T11:42:24.497
> 
> 标签：c#, dockable, dotnetbar

Just like the title says. I create a dockable bar, one of dotnetbar controls in the form.And I set the bar in auto-hide state. Now I want to keep the bar visible in auto-hide state until I click other controls just like the visual studio's dockable bars.

I have tried to set the property "AutoHideVisible" true, but it just let the bar display in a very short time and then hide later.

```
dockableBar.AutoHideVisible = true; 
```

# sharepoint - 关闭时永久删除 Web 部件

> ID：12913941
> 
> 赞同：1
> 
> 时间：2012-10-16T11:42:31.940
> 
> 标签：sharepoint, sharepoint-2007

在 SharePoint 中，当用户关闭 Web 部件时，Web 部件会隐藏但不会从页面中删除。当用户单击关闭时，我想从页面中永久删除 Web 部件。有什么方法可以实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:20:27.853

否 - 但您可以停止显示关闭按钮，因此唯一的选择是删除。

*   工具部件 > 高级 > 允许关闭（取消选中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:14:24.803

删除 web 部件不是个性化功能的一部分。如果您删除 web 部件，它将永久地从该 web 部件页面中删除，并且不再是该页面的一部分。但是关闭将关闭特定用户的 web 部件。

# php - Virtual gridding/resizing of image collage in PHP

> ID：12913943
> 
> 赞同：13
> 
> 时间：2012-10-16T11:42:37.243
> 
> 标签：php, image, imagemagick, gd

I'm looking for a finshed solution or possibly some math/algorithms for creating a big image collage out of smaller product pictures? I know how to do it in a square fashion, from same sized pictures with gd/imagemagick but I'd like to have some variation built in.

For example, some of the pictures might be slightly taller, and if all are the same size and square - i might want 1 of them take up more space, just to mix up the design. keeping it interesting.

the more i think about this the harder it seems to do with a formula. having predefined "templates" for all the possible scenarios isn't going to work since the amount of pictures could vary from just 1 (no work needed) to 10+.

i'm not looking for any rotation or special effects, just the images in a grid with maybe some spacing inbetween and no overlapping.

any ideas how to accomplish this, and is there really nothing ready to go out there?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-16T20:26:40.193

我建议您创建一个网格和权重方法。

这个答案分为三个部分：

1.  [使用虚拟网格](https://stackoverflow.com/a/12948610/731138)
2.  [将图像随机放置到该网格中](https://stackoverflow.com/a/12949142/731138)
3.  [实施透明度](https://stackoverflow.com/a/12979857/731138)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-18T06:42:19.690

# 使用虚拟网格

创建一个具有真实宽度/高度（例如：600x800）和网格宽度/高度（例如：10x10）的新图像。然后你可以给图像一个虚拟大小和虚拟位置。我会试着一步一步地让你明白我的意思。

首先，我们需要一个环境。

```
class imageGrid
{

    private $realWidth;
    private $realHeight;
    private $gridWidth;
    private $gridHeight;
    private $image;

    public function __construct($realWidth, $realHeight, $gridWidth, $gridHeight)
    {
        $this->realWidth = $realWidth;
        $this->realHeight = $realHeight;
        $this->gridWidth = $gridWidth;
        $this->gridHeight = $gridHeight;

        // create destination image
        $this->image = imagecreatetruecolor($realWidth, $realHeight);

        // set image default background
        $white = imagecolorallocate($this->image, 255, 255, 255);
        imagefill($this->image, 0, 0, $white);
    }

    public function __destruct()
    {
        imagedestroy($this->image);
    }

    public function display()
    {
        header("Content-type: image/png");
        imagepng($this->image);
    }

}

$imageGrid = new imageGrid(800, 600, 10, 10);
$imageGrid->display(); 
```

这将给我们一个美丽的白色方块。然后，我们需要一个网格来显示图像。因为这可能难以想象，让我们展示一下。

```
public function demoGrid()
{
    $black = imagecolorallocate($this->image, 0, 0, 0);
    imagesetthickness($this->image, 3);
    $cellWidth = ($this->realWidth - 1) / $this->gridWidth;   // note: -1 to avoid writting
    $cellHeight = ($this->realHeight - 1) / $this->gridHeight; // a pixel outside the image
    for ($x = 0; ($x <= $this->gridWidth); $x++)
    {
        for ($y = 0; ($y <= $this->gridHeight); $y++)
        {
            imageline($this->image, ($x * $cellWidth), 0, ($x * $cellWidth), $this->realHeight, $black);
            imageline($this->image, 0, ($y * $cellHeight), $this->realWidth, ($y * $cellHeight), $black);
        }
    }
} 
```

通过调用：

```
$imageGrid = new imageGrid(800, 600, 10, 10);
$imageGrid->demoGrid();
$imageGrid->display(); 
```

我们可以看到 ：

![在此处输入图像描述](../Images/938fbe6f17111b26c16ae5af4a786a8f.png)

现在，我们想知道如何写一个 3x4 的矩形，并将其粘贴到我们的虚拟度量中的 (2,5)。我们需要搜索如何获得矩形的真实大小和位置。

```
public function demoPutSquare($sizeW, $sizeH, $posX, $posY)
{
    // Cell width
    $cellWidth = $this->realWidth / $this->gridWidth;
    $cellHeight = $this->realHeight / $this->gridHeight;

    // Conversion of our virtual sizes/positions to real ones
    $realSizeW = ($cellWidth * $sizeW);
    $realSizeH = ($cellHeight * $sizeH);
    $realPosX = ($cellWidth * $posX);
    $realPosY = ($cellHeight * $posY);

    // Getting top left and bottom right of our rectangle
    $topLeftX = $realPosX;
    $topLeftY = $realPosY;
    $bottomRightX = $realPosX + $realSizeW;
    $bottomRightY = $realPosY + $realSizeH;

    // Displaying rectangle
    $red = imagecolorallocate($this->image, 100, 0, 0);
    imagefilledrectangle($this->image, $topLeftX, $topLeftY, $bottomRightX, $bottomRightY, $red);
} 
```

通过调用：

```
$imageGrid = new imageGrid(800, 600, 10, 10);
$imageGrid->demoGrid();
$imageGrid->demoPutSquare(3, 4, 2, 5);
$imageGrid->display(); 
```

我们在网格中得到一个 3x4 的正方形，位于 (2,5) 处：

![在此处输入图像描述](../Images/62d4cd4cbb86976831faf0296ed93ece.png)

现在让我们更认真一点，我们有很好的措施，所以我们可以粘贴图像。

```
public function putImage($img, $sizeW, $sizeH, $posX, $posY)
{
    // Cell width
    $cellWidth = $this->realWidth / $this->gridWidth;
    $cellHeight = $this->realHeight / $this->gridHeight;

    // Conversion of our virtual sizes/positions to real ones
    $realSizeW = ceil($cellWidth * $sizeW);
    $realSizeH = ceil($cellHeight * $sizeH);
    $realPosX = ($cellWidth * $posX);
    $realPosY = ($cellHeight * $posY);

    // Copying the image
    imagecopyresampled($this->image, $img, $realPosX, $realPosY, 0, 0, $realSizeW, $realSizeH, imagesx($img), imagesy($img));
} 
```

通过调用：

```
$imageGrid = new imageGrid(800, 600, 10, 10);
$imageGrid->demoGrid();
$img = imagecreatefromjpeg("ninsuo.jpg");
$imageGrid->putImage($img, 3, 4, 2, 5);
$imageGrid->display(); 
```

我们得到：

![在此处输入图像描述](../Images/4d92f2a1c0ba6ea87bc5fbc0b75c6629.png)

这样我们就可以在好地方拍到一张照片，但我们失去了纵横比。让我们添加一个方法来正确调整我们的图像大小。

```
public function resizePreservingAspectRatio($img, $targetWidth, $targetHeight)
{
    $srcWidth = imagesx($img);
    $srcHeight = imagesy($img);

    $srcRatio = $srcWidth / $srcHeight;
    $targetRatio = $targetWidth / $targetHeight;
    if (($srcWidth <= $targetWidth) && ($srcHeight <= $targetHeight))
    {
        $imgTargetWidth = $srcWidth;
        $imgTargetHeight = $srcHeight;
    }
    else if ($targetRatio > $srcRatio)
    {
        $imgTargetWidth = (int) ($targetHeight * $srcRatio);
        $imgTargetHeight = $targetHeight;
    }
    else
    {
        $imgTargetWidth = $targetWidth;
        $imgTargetHeight = (int) ($targetWidth / $srcRatio);
    }

    $targetImg = imagecreatetruecolor($targetWidth, $targetHeight);

    imagecopyresampled(
       $targetImg,
       $img,
       ($targetWidth - $imgTargetWidth) / 2, // centered
       ($targetHeight - $imgTargetHeight) / 2, // centered
       0,
       0,
       $imgTargetWidth,
       $imgTargetHeight,
       $srcWidth,
       $srcHeight
    );

    return $targetImg;
} 
```

就在之前：

```
 imagecopyresampled($this->image, $img, $realPosX, $realPosY, 0, 0, $realSizeW, $realSizeH, imagesx($img), imagesy($img)); 
```

我们把 ：

```
 $img = $this->resizePreservingAspectRatio($img, $realSizeW, $realSizeH); 
```

这看起来像这样：

![在此处输入图像描述](../Images/f8c163a0df3cf1c9e0e2fe838a7f93cc.png)

我们现在有一个完整的功能类来完成你的工作。

```
class imageGrid
{

    private $realWidth;
    private $realHeight;
    private $gridWidth;
    private $gridHeight;
    private $image;

    public function __construct($realWidth, $realHeight, $gridWidth, $gridHeight)
    {
        $this->realWidth = $realWidth;
        $this->realHeight = $realHeight;
        $this->gridWidth = $gridWidth;
        $this->gridHeight = $gridHeight;

        // create destination image
        $this->image = imagecreatetruecolor($realWidth, $realHeight);
        $black = imagecolorallocate($this->image, 0, 0, 0);
        imagecolortransparent($this->image, $black);
    }

    public function __destruct()
    {
        imagedestroy($this->image);
    }

    public function display()
    {
        header("Content-type: image/png");
        imagepng($this->image);
    }

    public function putImage($img, $sizeW, $sizeH, $posX, $posY)
    {
        // Cell width
        $cellWidth = $this->realWidth / $this->gridWidth;
        $cellHeight = $this->realHeight / $this->gridHeight;

        // Conversion of our virtual sizes/positions to real ones
        $realSizeW = ceil($cellWidth * $sizeW);
        $realSizeH = ceil($cellHeight * $sizeH);
        $realPosX = ($cellWidth * $posX);
        $realPosY = ($cellHeight * $posY);

        $img = $this->resizePreservingAspectRatio($img, $realSizeW, $realSizeH);

        // Copying the image
        imagecopyresampled($this->image, $img, $realPosX, $realPosY, 0, 0, $realSizeW, $realSizeH, imagesx($img), imagesy($img));
    }

    public function resizePreservingAspectRatio($img, $targetWidth, $targetHeight)
    {
        $srcWidth = imagesx($img);
        $srcHeight = imagesy($img);

        $srcRatio = $srcWidth / $srcHeight;
        $targetRatio = $targetWidth / $targetHeight;
        if (($srcWidth <= $targetWidth) && ($srcHeight <= $targetHeight))
        {
            $imgTargetWidth = $srcWidth;
            $imgTargetHeight = $srcHeight;
        }
        else if ($targetRatio > $srcRatio)
        {
            $imgTargetWidth = (int) ($targetHeight * $srcRatio);
            $imgTargetHeight = $targetHeight;
        }
        else
        {
            $imgTargetWidth = $targetWidth;
            $imgTargetHeight = (int) ($targetWidth / $srcRatio);
        }

        $targetImg = imagecreatetruecolor($targetWidth, $targetHeight);

        imagecopyresampled(
           $targetImg,
           $img,
           ($targetWidth - $imgTargetWidth) / 2, // centered
           ($targetHeight - $imgTargetHeight) / 2, // centered
           0,
           0,
           $imgTargetWidth,
           $imgTargetHeight,
           $srcWidth,
           $srcHeight
        );

        return $targetImg;
    }

} 
```

我们现在可以用它来看看它是否有效：

```
$imageGrid = new imageGrid(800, 400, 12, 2);

$blue = imagecreatefrompng("cheers_blue.png");
$imageGrid->putImage($blue, 6, 2, 0, 0);
imagedestroy($blue);

$green = imagecreatefrompng("cheers_green.png");
$imageGrid->putImage($green, 2, 1, 6, 0);
imagedestroy($green);

$red = imagecreatefrompng("cheers_red.png");
$imageGrid->putImage($red, 2, 1, 8, 0);
imagedestroy($red);

$yellow = imagecreatefrompng("cheers_yellow.png");
$imageGrid->putImage($yellow, 2, 1, 10, 0);
imagedestroy($yellow);

$purple = imagecreatefrompng("cheers_purple.png");
$imageGrid->putImage($purple, 3, 1, 6, 1);
imagedestroy($purple);

$cyan = imagecreatefrompng("cheers_cyan.png");
$imageGrid->putImage($cyan, 3, 1, 9, 1);
imagedestroy($cyan);

$imageGrid->display(); 
```

![在此处输入图像描述](../Images/72449e5dc672f0edc166ff22e1e2f0bb.png)

就个人而言，我更喜欢不保留纵横比的那个:-)

![在此处输入图像描述](../Images/7302dfb19cf1a5ecb334c9b73126877d.png)

干杯! （嗯，享受我想说的！）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T17:58:48.353

# 实施透明度

首先在`__construct`方法上，替换：

```
 $white = imagecolorallocate($this->image, 255, 255, 255);
    imagefill($this->image, 0, 0, $white); 
```

经过 ：

```
 $transparent = imagecolorallocate($this->image, 255, 0, 255);
    imagefill($this->image, 0, 0, $transparent);
    imagecolortransparent($this->image, $transparent); 
```

然后，在`resizePreservingAspectRatio`方法上，在后面添加：

```
 $targetImg = imagecreatetruecolor($targetWidth, $targetHeight); 
```

以下几行：

```
 $targetTransparent = imagecolorallocate($targetImg, 255, 0, 255);
    imagefill($targetImg, 0, 0, $targetTransparent);
    imagecolortransparent($targetImg, $targetTransparent); 
```

现在我们开始。

![在此处输入图像描述](../Images/dece74ce98294e7d57580b346b3a3c54.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-18T07:18:22.750

# 将图像随机放置到该网格中

方法是：我们将摇动所有图像以获得一个随机数组，并将它们随机排列在行上：每行 1 到 4 个图像（您可以更改此值），并将在每行中使用较高的图像确定每条线的高度。因此，如果一个图像比另一个图像高 50%，如果它们不在同一行，您将保存比例。

这有点难，所以我决定在这部分的开发过程中从不使用图形。这就是为什么有很多步骤和调试的原因，但这有助于逐步获得最终结果。

我们得到所有图像的高度和它们的总和：

```
$images = array ();
$totalHeight = 0;
foreach (glob("images/*.jpg") as $jpg)
{
    $img = imagecreatefromjpeg($jpg);
    $images[$jpg] = imagesy($img);
    $totalHeight += $images[$jpg];
    imagedestroy($img);
}

echo "image list with heights:\n";
var_dump($images);
echo "total heights: {$totalHeight}\n"; 
```

给我们 ：

```
image list with heights:
array(12) {
  ["images/image1.jpg"]=>
  int(392)
  ["images/image10.jpg"]=>
  int(640)
  ["images/image11.jpg"]=>
  int(364)
  ["images/image12.jpg"]=>
  int(324)
  ["images/image2.jpg"]=>
  int(533)
  ["images/image3.jpg"]=>
  int(360)
  ["images/image4.jpg"]=>
  int(768)
  ["images/image5.jpg"]=>
  int(330)
  ["images/image6.jpg"]=>
  int(360)
  ["images/image7.jpg"]=>
  int(338)
  ["images/image8.jpg"]=>
  int(600)
  ["images/image9.jpg"]=>
  int(391)
}
total heights: 5400 
```

然后我们打乱图像数组以获得图像的随机排列。我们需要保留密钥，而 shffle 不需要，所以我们需要一点技巧。

```
// Shuffle image array of files preserving keys to get random image disposition
$keys = array_keys($images);
shuffle($keys);
$images = array_merge(array_flip($keys), $images);

// Separate image names and heights, will simplify our future work
$heights = array_values($images);
$images = array_keys($images);

echo "image list:\n";
var_dump($images);

echo "image heights:\n";
var_dump($heights); 
```

给我们 ：

```
image list:
array(12) {
  [0]=>
  string(17) "images/image6.jpg"
  [1]=>
  string(17) "images/image5.jpg"
  [2]=>
  string(18) "images/image10.jpg"
  [3]=>
  string(17) "images/image2.jpg"
  [4]=>
  string(18) "images/image12.jpg"
  [5]=>
  string(17) "images/image3.jpg"
  [6]=>
  string(17) "images/image4.jpg"
  [7]=>
  string(17) "images/image1.jpg"
  [8]=>
  string(17) "images/image8.jpg"
  [9]=>
  string(17) "images/image9.jpg"
  [10]=>
  string(18) "images/image11.jpg"
  [11]=>
  string(17) "images/image7.jpg"
}
image heights:
array(12) {
  [0]=>
  int(360)
  [1]=>
  int(330)
  [2]=>
  int(640)
  [3]=>
  int(533)
  [4]=>
  int(324)
  [5]=>
  int(360)
  [6]=>
  int(768)
  [7]=>
  int(392)
  [8]=>
  int(600)
  [9]=>
  int(391)
  [10]=>
  int(364)
  [11]=>
  int(338)
} 
```

这里重要的是检查我们是否保留了图像/高度关联。

现在，我们需要将图像高度转换为百分比：因此，如果您有 2 张图像，其中一张比第二张高 50%，因此您的第一张图片将占总高度的 66%，第二张将占总高度的 33%一。这个虚拟高度将用作我们网格上的高度。

```
$count = count($heights);
for ($i = 0; ($i < $count); $i++)
{
    $heights[$i] = ($heights[$i] * 100) / $totalHeight
}

echo "image heights in percents\n";
var_dump($heights);
echo "check : " . array_sum($heights) . " = 100\n"; 
```

导致 ：

```
Image heights in percents
array(12) {
  [0]=>
  float(6.6666666666667)
  [1]=>
  float(6.1111111111111)
  [2]=>
  float(11.851851851852)
  [3]=>
  float(9.8703703703704)
  [4]=>
  int(6)
  [5]=>
  float(6.6666666666667)
  [6]=>
  float(14.222222222222)
  [7]=>
  float(7.2592592592593)
  [8]=>
  float(11.111111111111)
  [9]=>
  float(7.2407407407407)
  [10]=>
  float(6.7407407407407)
  [11]=>
  float(6.2592592592593)
}
check : 100 = 100 
```

我们现在生成一个行数组，以查看每行将放置多少张图像。对于此示例，我们希望每行 1 到 4 个图像。在此处更改`rand() % 4 + 1`您希望每行获得多少图像的内容。示例：`rand() % 3 + 2`将为您提供 2 到 5 张图像。

```
$lines = array ();
while ($count > 0)
{
    $nbImages = rand() % 4 + 1;
    if (($count - $nbImages) < 0)
    {
        $nbImages = $count;
    }

    $lines[] = $nbImages;
    $count -= $nbImages;
}

echo "Number of lines : " . count($lines) . "\n";
echo "images per line disposition :\n";
var_dump($lines); 
```

导致 ：

```
Number of lines : 5
images per line disposition :
array(5) {
  [0]=>
  int(3)
  [1]=>
  int(1)
  [2]=>
  int(1)
  [3]=>
  int(4)
  [4]=>
  int(3)
} 
```

我们需要将图像与一条线以及一条线中的位置相关联。这将帮助我们获得图像在网格中的位置。

```
$imageLines = array();
foreach ($lines as $key => $numberImg)
{
    while ($numberImg--)
    {
        $imageLines[] = $key;
    }
}

echo "image / line association:\n";
var_dump($imageLines);

$imagePositions = array();
foreach ($lines as $numberImg)
{
    for ($i = 0; ($i < $numberImg); $i++)
    {
        $imagePositions[] = $i;
    }
}

echo "image / position in a line association:\n";
var_dump($imagePositions); 
```

导致 ：

```
image / line association:
array(12) {
  [0]=>
  int(0)
  [1]=>
  int(0)
  [2]=>
  int(0)
  [3]=>
  int(1)
  [4]=>
  int(2)
  [5]=>
  int(3)
  [6]=>
  int(3)
  [7]=>
  int(3)
  [8]=>
  int(3)
  [9]=>
  int(4)
  [10]=>
  int(4)
  [11]=>
  int(4)
}
image / position in a line association:
array(12) {
  [0]=>
  int(0)
  [1]=>
  int(1)
  [2]=>
  int(2)
  [3]=>
  int(0)
  [4]=>
  int(0)
  [5]=>
  int(0)
  [6]=>
  int(1)
  [7]=>
  int(2)
  [8]=>
  int(3)
  [9]=>
  int(0)
  [10]=>
  int(1)
  [11]=>
  int(2)
} 
```

现在，我们需要获得图像的总宽度。我们有 1 到 4 个图像，因此无论每行有多少图像，为了获得每个图像的整数大小，我们将 4（最大值）乘以从 4 到 1 的所有值。在这种情况下：4 * 3 * 2 * 1 = 24，所以如果我们有 1 幅图像/行，它的宽度将为 24，2 幅图像/行：24/2 = 12，3 幅图像/行：24/3=8，4 幅图像/行：24 /4=6。都是有效的整数。

```
$i = 4;
$virtualWidth = 1;
while ($i)
{
    $virtualWidth *= $i--;
}

echo "virtual width: {$virtualWidth}\n"; 
```

这里没有什么困难，这导致：

```
virtual width: 24 
```

我们现在需要根据每行的最高图像来确定每行的高度。我们也可以在这个计算中推断出我们的网格高度。

```
// Determine the virtual height needed for each line and for the whole grid
$imageHeights = array();
$index = 0;
foreach ($lines as $key => $numberImages)
{
    $slice = array_slice($heights, $index, $numberImages);

    echo "at line {$key}, images heights are:\n";
    var_dump($slice);

    $imageHeights[] = max($slice);
    $index += $numberImages;
}
$virtualHeight = array_sum($imageHeights);

echo "heights for each line:\n";
var_dump($imageHeights);
echo "total height = {$virtualHeight}\n"; 
```

这导致：

```
at line 0, images heights are:
array(3) {
  [0]=>
  float(6.6666666666667)
  [1]=>
  float(6.1111111111111)
  [2]=>
  float(11.851851851852)
}
at line 1, images heights are:
array(1) {
  [0]=>
  float(9.8703703703704)
}
at line 2, images heights are:
array(1) {
  [0]=>
  int(6)
}
at line 3, images heights are:
array(4) {
  [0]=>
  float(6.6666666666667)
  [1]=>
  float(14.222222222222)
  [2]=>
  float(7.2592592592593)
  [3]=>
  float(11.111111111111)
}
at line 4, images heights are:
array(3) {
  [0]=>
  float(7.2407407407407)
  [1]=>
  float(6.7407407407407)
  [2]=>
  float(6.2592592592593)
}
heights for each line:
array(5) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
  [3]=>
  float(14.222222222222)
  [4]=>
  float(7.2407407407407)
}
total height = 49.185185185185 
```

我们检查这个结果是否我们有每行的最高值，并且总和是否有效。

我们终于有了显示随机定位图像网格所需的所有信息。

```
$imageGrid = new imageGrid(800, 800, $virtualWidth, $virtualHeight);
foreach (glob("images/*.jpg") as $jpg)
{
    $img = imagecreatefromjpeg($jpg);

    $index = array_search($jpg, $images);
    echo "image {$index}:\n";

    $line = $imageLines[$index];
    echo "image is at line {$line}\n";

    $sizeW = ($virtualWidth / $lines[$line]);
    echo "width = {$virtualWidth} / {$lines[$line]} = {$sizeW}\n";

    $sizeH = $imageHeights[$line];
    echo "height = {$imageHeights[$line]}\n";

    $posX = $imagePositions[$index] * ($virtualWidth / $lines[$line]);
    echo "pos X = {$imagePositions[$index]} * ({$virtualWidth} / {$lines[$line]}) = {$posX}\n";

    $slice = array_slice($imageHeights, 0, $line);
    echo "Slice to calc Y:\n";
    var_dump($slice);

    $posY = array_sum($slice);
    echo "pos Y = {$posY}\n";

    echo "\n";

    $imageGrid->putImage($img, $sizeW, $sizeH, $posX, $posY);
    imagedestroy($img);
} 
```

这导致：

```
image 7:
image is at line 3
width = 24 / 4 = 6
height = 14.222222222222
pos X = 2 * (24 / 4) = 12
Slice to calc Y:
array(3) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
}
pos Y = 27.722222222222

image 2:
image is at line 0
width = 24 / 3 = 8
height = 11.851851851852
pos X = 2 * (24 / 3) = 16
Slice to calc Y:
array(0) {
}
pos Y = 0

image 10:
image is at line 4
width = 24 / 3 = 8
height = 7.2407407407407
pos X = 1 * (24 / 3) = 8
Slice to calc Y:
array(4) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
  [3]=>
  float(14.222222222222)
}
pos Y = 41.944444444444

image 4:
image is at line 2
width = 24 / 1 = 24
height = 6
pos X = 0 * (24 / 1) = 0
Slice to calc Y:
array(2) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
}
pos Y = 21.722222222222

image 3:
image is at line 1
width = 24 / 1 = 24
height = 9.8703703703704
pos X = 0 * (24 / 1) = 0
Slice to calc Y:
array(1) {
  [0]=>
  float(11.851851851852)
}
pos Y = 11.851851851852

image 5:
image is at line 3
width = 24 / 4 = 6
height = 14.222222222222
pos X = 0 * (24 / 4) = 0
Slice to calc Y:
array(3) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
}
pos Y = 27.722222222222

image 6:
image is at line 3
width = 24 / 4 = 6
height = 14.222222222222
pos X = 1 * (24 / 4) = 6
Slice to calc Y:
array(3) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
}
pos Y = 27.722222222222

image 1:
image is at line 0
width = 24 / 3 = 8
height = 11.851851851852
pos X = 1 * (24 / 3) = 8
Slice to calc Y:
array(0) {
}
pos Y = 0

image 0:
image is at line 0
width = 24 / 3 = 8
height = 11.851851851852
pos X = 0 * (24 / 3) = 0
Slice to calc Y:
array(0) {
}
pos Y = 0

image 11:
image is at line 4
width = 24 / 3 = 8
height = 7.2407407407407
pos X = 2 * (24 / 3) = 16
Slice to calc Y:
array(4) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
  [3]=>
  float(14.222222222222)
}
pos Y = 41.944444444444

image 8:
image is at line 3
width = 24 / 4 = 6
height = 14.222222222222
pos X = 3 * (24 / 4) = 18
Slice to calc Y:
array(3) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
}
pos Y = 27.722222222222

image 9:
image is at line 4
width = 24 / 3 = 8
height = 7.2407407407407
pos X = 0 * (24 / 3) = 0
Slice to calc Y:
array(4) {
  [0]=>
  float(11.851851851852)
  [1]=>
  float(9.8703703703704)
  [2]=>
  int(6)
  [3]=>
  float(14.222222222222)
}
pos Y = 41.944444444444 
```

为了调试我们的代码，我们以：

```
$debug = true;
if ($debug)
{
    echo ob_get_clean();
}
else
{
    ob_clean();
    $imageGrid->display();
} 
```

好的，您已经完成了所有步骤。结果呢？

![在此处输入图像描述](../Images/341c52fe09ee85c0d04a58b1bc05e991.png)

F5...

![在此处输入图像描述](../Images/61d09385d03630e4a234052840b2db40.png)

F5...

![在此处输入图像描述](../Images/9c4e0ee322ab487a70f316c1364a7815.png)

最终代码：

```
ob_start();

echo '<pre>';

// Get height of all images
$images = array ();
$totalHeight = 0;
foreach (glob("images/*.jpg") as $jpg)
{
    $img = imagecreatefromjpeg($jpg);
    $images[$jpg] = imagesy($img);
    $totalHeight += $images[$jpg];
    imagedestroy($img);
}

echo "image list with heights:\n";
var_dump($images);

// Shuffle image array of files preserving keys to get random image disposition
$keys = array_keys($images);
shuffle($keys);
$images = array_merge(array_flip($keys), $images);

// Separate image names and heights, will simplify our future work
$heights = array_values($images);
$images = array_keys($images);

echo "image list:\n";
var_dump($images);

echo "total heights: {$totalHeight}\n";

echo "image heights:\n";
var_dump($heights);

// Get percentage of image height compared to the total height
$count = count($heights);
for ($i = 0; ($i < $count); $i++)
{
    $heights[$i] = ($heights[$i] * 100) / $totalHeight; // becomes virtual height in a x100 grid
}

echo "image heights in percents\n";
var_dump($heights);
echo "check : " . array_sum($heights) . " = 100\n";

// Get random number of images per line and number of lines
// Between 1 to 4 images/line until there is no more image.
$lines = array ();
while ($count > 0)
{
    $nbImages = rand() % 4 + 1;
    if (($count - $nbImages) < 0)
    {
        $nbImages = $count;
    }

    $lines[] = $nbImages;
    $count -= $nbImages;
}

echo "Number of lines : " . count($lines) . "\n";
echo "images per line disposition :\n";
var_dump($lines);

// Associate an image with a line
$imageLines = array();
foreach ($lines as $key => $numberImg)
{
    while ($numberImg--)
    {
        $imageLines[] = $key;
    }
}

echo "image / line association:\n";
var_dump($imageLines);

// Associate an image with a position in a line
$imagePositions = array();
foreach ($lines as $numberImg)
{
    for ($i = 0; ($i < $numberImg); $i++)
    {
        $imagePositions[] = $i;
    }
}

echo "image / position in a line association:\n";
var_dump($imagePositions);

// We have from 1 to 4 images/line so we create a grid with a virtual width of 1*2*3*4.
// In this case, 1 image/line = 24, 2/line =24/2=12, 3/line=24/3=8, all are valid integers.
$i = 4;
$virtualWidth = 1;
while ($i)
{
    $virtualWidth *= $i--;
}

echo "virtual width: {$virtualWidth}\n";

// Determine the virtual height needed for each line and for the whole grid
$imageHeights = array();
$index = 0;
foreach ($lines as $key => $numberImages)
{
    $slice = array_slice($heights, $index, $numberImages);

    echo "at line {$key}, images heights are:\n";
    var_dump($slice);

    $imageHeights[] = max($slice);
    $index += $numberImages;
}
$virtualHeight = array_sum($imageHeights);

echo "heights for each line:\n";
var_dump($imageHeights);
echo "total height = {$virtualHeight}\n";

// Create a grid and place logically all images in the virtual area
$imageGrid = new imageGrid(800, 800, $virtualWidth, $virtualHeight);
foreach (glob("images/*.jpg") as $jpg)
{
    $img = imagecreatefromjpeg($jpg);

    // Determine position
    $index = array_search($jpg, $images);
    echo "image {$index}:\n";

    $line = $imageLines[$index];
    echo "image is at line {$line}\n";

    $sizeW = ($virtualWidth / $lines[$line]);
    echo "width = {$virtualWidth} / {$lines[$line]} = {$sizeW}\n";

    $sizeH = $imageHeights[$line];
    echo "height = {$imageHeights[$line]}\n";

    $posX = $imagePositions[$index] * ($virtualWidth / $lines[$line]);
    echo "pos X = {$imagePositions[$index]} * ({$virtualWidth} / {$lines[$line]}) = {$posX}\n";

    $slice = array_slice($imageHeights, 0, $line);
    echo "Slice to calc Y:\n";
    var_dump($slice);

    $posY = array_sum($slice);
    echo "pos Y = {$posY}\n";

    echo "\n";

    $imageGrid->putImage($img, $sizeW, $sizeH, $posX, $posY);
    imagedestroy($img);
}

$debug = false;
if ($debug)
{
    echo ob_get_clean();
}
else
{
    ob_clean();
    $imageGrid->display();
} 
```

我的方法可能不是最好的方法，但至少，它可以将图像随机定位到保留图像权重的网格中。这个主题很难处理，所以我希望这对你的情况来说足够了。

# sql-server - Consuming web-service using SQL CLR stored procedure not find default endpoint while debugging with VS2010

> ID：12913945
> 
> 赞同：0
> 
> 时间：2012-10-16T11:42:48.170
> 
> 标签：sql-server, visual-studio-2010, sqlclr

We develop SQL CLR stored procedure which calls methods of a web-service. We use VS2010 to develop and debug this project. The problem is the following exception when we try to start test script which calls our stored procedure:

```
A .NET Framework error occurred during execution of user-defined routine or aggregate
"WebServiceExample": 
System.InvalidOperationException: Could not find default endpoint element that
references  contract 'ServiceReference1.ExRatesSoap' in the ServiceModel client
configuration section.  This might be because no configuration file was found for your
application, or because no  endpoint element matching this contract could be found in
the client element.
System.InvalidOperationException:
... 
```

There are some recomendations regarding this problem in the Net which use wsdl.exe and sgen.exe utilities along with another manipulations. But we are interested in solution which utilizes only VS2010 tools, settings, options, etc. It's seemed unbeleivable that VS2010 can't cook this pie from beginning to end, we think we are doing something wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:20:04.103

您可能必须在配置文件中手动创建对 Web 服务的引用，例如从 SQL Server 调用它的 sqlserver.exe.config。这些不是为 SQL CLR 自动创建的，因为它是由 SQL Server 执行的。

# javascript - 如何在浏览器中显示页面，只有在它完全加载并跳转到垂直偏移位置之后？

> ID：12913946
> 
> 赞同：0
> 
> 时间：2012-10-16T11:42:47.910
> 
> 标签：javascript, visibility, onload, offset

我试图在浏览器完全加载并跳转到scrollBy函数中定义的滚动偏移位置后使页面显示在浏览器中。怎样才能达到这样的效果？

我在网上看到的大多数解决方案都是隐藏/显示“onload”上的元素。但是当使用偏移量时，我似乎无法让它工作。

例如，到目前为止，我已经尝试了几件事。在给出的示例代码中，在 scrollby 函数运行后将可见性值更改为可见。但是由于某种原因，scrollby 函数似乎总是最后运行，导致页面显示在顶部并立即跳转到偏移量。

我尝试过的其他变体是使用“显示：块”并使用覆盖整个页面的覆盖 div，稍后用 javascript 将其删除。但结果是一样的，scrollby 函数似乎总是最后运行 - 无论“goToByScroll”函数中的顺序如何。

```
function goToByScroll()
{
    window.scrollBy(0,300); // Jumps to specific offset

    document.getElementById("page").style.visibility="visible"; 
}
window.onload = goToByScroll; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:49:37.190

您需要在设置滚动位置和应用新样式之间将控制权交还给浏览器。简单编辑：

```
function goToByScroll()
{
    window.scrollBy(0,300); // Jumps to specific offset

    setTimeout('document.getElementById("page").style.visibility="visible"', 0); 
}
window.onload = goToByScroll; 
```

否则，浏览器应用 DOM 更改的顺序是不确定的。

在执行 JavaScript 代码时，浏览器**不会**对 DOM 应用更新；想象一下遍历一个大表，对每个单元格应用格式，作者通常会希望所有这些更改都立即出现。

浏览器仅在 JavaScript 空闲时（例如等待另一个事件）才对 DOM 应用更新。 `setTimeout`是延迟处理并允许浏览器应用到目前为止所做的任何更改的一种方法。

但是，`setTimeout`它将创建一个新的执行上下文，因此您将无法访问该函数的本地变量。理想情况下，您应该只使用 setTimeout 调用零参数函数，否则它只是另一个邪恶的`eval`声明：

```
function goToByScroll()
{
    window.scrollBy(0,300); // Jumps to specific offset
    setTimeout(showPage, 0);
}

function showPage()
{
    document.getElementById("page").style.visibility="visible"; 
}

window.onload = goToByScroll; 
```

# javascript - 变量未在对象中定义

> ID：12913948
> 
> 赞同：0
> 
> 时间：2012-10-16T11:42:52.240
> 
> 标签：javascript, object, timer

我已经声明了一个带有变量和方法的对象。这里简化了

```
var myObj = {
    myTimer: null,
    startTimer: function(){
        clearTimeout(myObj.myTimer);
        myObj.myTimer = setTimeout("myObj.myFunction()", 250);
    },
    myFunction: function(){
        alert('Hi');
    }
}; 
```

调用 startTimer 后，控制台会打印以下错误

```
Uncaught ReferenceError: myFunction is not defined
Uncaught ReferenceError: startTimer is not defined 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:46:43.853

您应该将函数传递给`setTimeout`而不是字符串，最好使用`this`而不是对象名称：

```
var myObj = {
    myTimer: null,
    startTimer: function(){
        clearTimeout(this.myTimer);
        this.myTimer = setTimeout(this.myFunction, 2500);
    },
    myFunction: function(){
        alert('Hi');
    }
}; 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/fpZBa/](http://jsfiddle.net/vyshniakov/fpZBa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:55:38.527

There was actually nothing wrong with my code, although it could probably be more pretty.

The problem was how i was calling the methods, and not within the object itself.

# c# - `全局变量`和`字段`之间的区别？

> ID：12913949
> 
> 赞同：10
> 
> 时间：2012-10-16T11:42:53.257
> 
> 标签：c#, variables, field, concept

`Fields`是类或结构中的变量，`local variables`位于方法中并且`global variables`可以在每个范围内访问（包括类和方法）。

这让我认为这`fields`可能是`global variables`但`global variables`不一定是，`fields`尽管我想不出一个坐在课堂之外的变量。

两者有明显区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T11:46:24.420

您标记了这个 C#，而 C# 并没有真正的“全局变量”。

但是一个`public static`字段（或属性）会接近。静态使它变得单一，并赋予它一个“全局”的生命周期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T11:48:33.813

我认为维基百科的定义在这里是合适的：

> 在面向对象编程中，字段（也称为数据成员或成员变量）是封装在类或对象中的数据。在常规字段（也称为实例变量）的情况下，对于对象的每个实例都有一个实例变量：例如，Employee 类有一个 Name 字段，并且每个员工都有一个不同的名称。静态字段（也称为类变量）是一个变量，由所有实例共享。

因此，全局变量几乎是一个静态字段（因此也是一个字段）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T11:48:13.847

正如您所说，全局变量是在整个范围内访问的变量，通常这是通过`static`类完成的。示例代码：

```
public class Demo {
    public static string ThisIsGlobal = "Global";
    private string _field = "this is a field in the class";
    public void DoSomething()
    {
        string localVariable = "Local";
        string localVariable2 = ThisIsGlobal; // VALID
    }

    public static void GlobalMethod()
    {
        string localVariable = _field; // THIS IS NOT VALID!
    }
} 
```

很多人说全局变量和状态不好，我觉得只要你用就应该用。在上面的例子中`ThisIsGlobal`是一个全局变量，因为它有`static`关键字。正如您在示例中看到的，您可以从实例方法访问静态变量，但不能从静态方法访问实例变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T11:51:24.520

许多变量位于类的特定实例之外，但它们仍然包含在“某些”类中。基本上，一个全局变量位于靠近*天空*中对象图顶部的位置，对象图中的所有后面/较低的类/成员都可以看到/引用它。

但是全局变量仍然只是某个类/模块的一个字段。

# javascript - 在输入框中输入时将整数转换为货币格式

> ID：12913950
> 
> 赞同：6
> 
> 时间：2012-10-16T11:42:57.150
> 
> 标签：javascript, integer, inputbox

我将尝试尽可能清楚地传达这一点。

我需要一个输入框来读取整数，例如“12345”并将其转换为货币格式，例如：$123.45。这需要在用户键入时进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-18T00:00:27.237

我创建了一个函数来立即执行此操作（在 keydown 上），以便在您之后执行此操作（keyup 或 blur）时摆脱中间值。它遵循[加拿大格式](http://docs.oracle.com/cd/E19455-01/806-0169/overview-9/index.html)，但您可以轻松更改它。

[**演示**](http://jsfiddle.net/pmrotule/93zgymx9/2/)

它在 IE < 9 中不起作用

```
$('.numberOnly').on('keydown', function(e){

  if(this.selectionStart || this.selectionStart == 0){
    // selectionStart won't work in IE < 9

    var key = e.which;
    var prevDefault = true;

    var thouSep = " ";  // your seperator for thousands
    var deciSep = ",";  // your seperator for decimals
    var deciNumber = 2; // how many numbers after the comma

    var thouReg = new RegExp(thouSep,"g");
    var deciReg = new RegExp(deciSep,"g");

    function spaceCaretPos(val, cPos){
        /// get the right caret position without the spaces

        if(cPos > 0 && val.substring((cPos-1),cPos) == thouSep)
        cPos = cPos-1;

        if(val.substring(0,cPos).indexOf(thouSep) >= 0){
        cPos = cPos - val.substring(0,cPos).match(thouReg).length;
        }

        return cPos;
    }

    function spaceFormat(val, pos){
        /// add spaces for thousands

        if(val.indexOf(deciSep) >= 0){
            var comPos = val.indexOf(deciSep);
            var int = val.substring(0,comPos);
            var dec = val.substring(comPos);
        } else{
            var int = val;
            var dec = "";
        }
        var ret = [val, pos];

        if(int.length > 3){

            var newInt = "";
            var spaceIndex = int.length;

            while(spaceIndex > 3){
                spaceIndex = spaceIndex - 3;
                newInt = thouSep+int.substring(spaceIndex,spaceIndex+3)+newInt;
                if(pos > spaceIndex) pos++;
            }
            ret = [int.substring(0,spaceIndex) + newInt + dec, pos];
        }
        return ret;
    }

    $(this).on('keyup', function(ev){

        if(ev.which == 8){
            // reformat the thousands after backspace keyup

            var value = this.value;
            var caretPos = this.selectionStart;

            caretPos = spaceCaretPos(value, caretPos);
            value = value.replace(thouReg, '');

            var newValues = spaceFormat(value, caretPos);
            this.value = newValues[0];
            this.selectionStart = newValues[1];
            this.selectionEnd   = newValues[1];
        }
    });

    if((e.ctrlKey && (key == 65 || key == 67 || key == 86 || key == 88 || key == 89 || key == 90)) ||
       (e.shiftKey && key == 9)) // You don't want to disable your shortcuts!
        prevDefault = false;

    if((key < 37 || key > 40) && key != 8 && key != 9 && prevDefault){
        e.preventDefault();

        if(!e.altKey && !e.shiftKey && !e.ctrlKey){

            var value = this.value;
            if((key > 95 && key < 106)||(key > 47 && key < 58) ||
              (deciNumber > 0 && (key == 110 || key == 188 || key == 190))){

                var keys = { // reformat the keyCode
                48: 0, 49: 1, 50: 2, 51: 3,  52: 4,  53: 5,  54: 6,  55: 7,  56: 8,  57: 9,
                96: 0, 97: 1, 98: 2, 99: 3, 100: 4, 101: 5, 102: 6, 103: 7, 104: 8, 105: 9,
                110: deciSep, 188: deciSep, 190: deciSep
                };

                var caretPos = this.selectionStart;
                var caretEnd = this.selectionEnd;

                if(caretPos != caretEnd) // remove selected text
                value = value.substring(0,caretPos) + value.substring(caretEnd);

                caretPos = spaceCaretPos(value, caretPos);

                value = value.replace(thouReg, '');

                var before = value.substring(0,caretPos);
                var after = value.substring(caretPos);
                var newPos = caretPos+1;

                if(keys[key] == deciSep && value.indexOf(deciSep) >= 0){
                    if(before.indexOf(deciSep) >= 0){ newPos--; }
                    before = before.replace(deciReg, '');
                    after = after.replace(deciReg, '');
                }
                var newValue = before + keys[key] + after;

                if(newValue.substring(0,1) == deciSep){
                    newValue = "0"+newValue;
                    newPos++;
                }

                while(newValue.length > 1 && 
                  newValue.substring(0,1) == "0" && newValue.substring(1,2) != deciSep){
                    newValue = newValue.substring(1);
                    newPos--;
                }

                if(newValue.indexOf(deciSep) >= 0){
                    var newLength = newValue.indexOf(deciSep)+deciNumber+1;
                    if(newValue.length > newLength){
                    newValue = newValue.substring(0,newLength);
                    }
                }

                newValues = spaceFormat(newValue, newPos);

                this.value = newValues[0];
                this.selectionStart = newValues[1];
                this.selectionEnd   = newValues[1];
            }
        }
    }

    $(this).on('blur', function(e){

        if(deciNumber > 0){
            var value = this.value;

            var noDec = "";
            for(var i = 0; i < deciNumber; i++)
            noDec += "0";

            if(value == "0"+deciSep+noDec)
            this.value = ""; //<-- put your default value here
            else
            if(value.length > 0){
                if(value.indexOf(deciSep) >= 0){
                    var newLength = value.indexOf(deciSep)+deciNumber+1;
                    if(value.length < newLength){
                    while(value.length < newLength){ value = value+"0"; }
                    this.value = value.substring(0,newLength);
                    }
                }
                else this.value = value + deciSep + noDec;
            }
        }
    });
  }
}); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T11:55:39.167

You can try something like this:

```
<script>
function formatAsDollars(el) {
  el.value = '$' + el.value.replace(/[^\d]/g,'').replace(/(\d\d?)$/,'.$1');
}
<\script>

<input onkeyup="formatAsDollars(this);"> 
```

I find it really annoying, others will too.

# joomla - jtableuser::store 在 Joomla 中失败

> ID：12913951
> 
> 赞同：1
> 
> 时间：2012-10-16T11:43:03.210
> 
> 标签：joomla, joomla2.5, joomla-extensions

我从前端注册用户并从电子邮件链接激活用户没有任何问题

但是，当管理员尝试启用/禁用用户时，我收到了这个奇怪的错误

**jtableuser: :store failed Unknown column 'resetCount' in 'field list'**

我了解到表结构中缺少 resetCount 字段并相应地更改了表，此问题已解决

谁能告诉我为什么/这个错误来自哪里？是否有任何新添加的模块/扩展触发此 resetCount ？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:01:30.563

需要将两个新字段添加到用户表中。转到扩展管理器并单击数据库。您可能会看到一条消息，指出数据库结构不是最新的。单击右上角的修复，这应该会更新用户表。

# c# - 使用后台工作者同时检索多个串口

> ID：12913952
> 
> 赞同：2
> 
> 时间：2012-10-16T11:43:04.177
> 
> 标签：c#, multithreading, serial-port

我想问一下使用后台工作者从串口读取数据的问题。是否可以使用一名工作人员从一个或多个串行端口检索数据？在worker中仅使用一个串行端口时，我可以检索数据。当我使用两个或更多端口时，我无法再检索数据（没有错误消息）。这是我的代码：

```
 private void worker_DoWork(object sender, DoWorkEventArgs e)
  {
        String p = "";
        String s = "";
        Int32 b = 0;
        MethodInvoker get_selectedPort = new MethodInvoker(() =>
            {
                p = comboBoxPressure.SelectedItem.ToString();
                s = comboBoxStrain.SelectedItem.ToString();
                b = Convert.ToInt32(comboBoxBaudrate.SelectedItem.ToString());
            });
        this.Invoke(get_selectedPort);

        SerialPort portPressure = new SerialPort();  // serial port 1
        portPressure.PortName = p;
        portPressure.BaudRate = b;
        portPressure.Parity = Parity.None;
        portPressure.StopBits = StopBits.One;
        portPressure.DataBits = 8;
        portPressure.Handshake = Handshake.None;

        SerialPort portStrain = new SerialPort(); // serial port 2
        portStrain.PortName = s;
        portStrain.BaudRate = b;
        portStrain.Parity = Parity.None;
        portStrain.StopBits = StopBits.One;
        portStrain.DataBits = 8;
        portStrain.Handshake = Handshake.None;

        try
        {
            portPressure.Open();
            portStrain.Open();
        }
        catch (Exception error)
        {
            MessageBox.Show("Error while trying open serial port!\r\n" + error.Message, "COM Port Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            worker.CancelAsync();
            return;
        }

        while (!worker.CancellationPending)
        {               
            System.Threading.Thread.Sleep(100);
            this.dataPressure = portPressure.ReadExisting();
            this.dataStrain = portStrain.ReadExisting();
            BeginInvoke((Action)(() => updateData()));
        }

        portPressure.Close();
        portStrain.Close();
    }

} 
```

# flash - 页面顶部的未知间隙/Flash 全屏问题

> ID：12913954
> 
> 赞同：1
> 
> 时间：2012-10-16T11:43:07.547
> 
> 标签：flash, samsung-smart-tv

我正在使用闪存开发三星智能电视应用程序。该应用程序嵌入在 html 页面中：

```
<body style="margin:0;border:0;padding:0" onload="Main.onLoad();" marginwidth="0" marginheight="0" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0">
<div style="margin-top:0;border:0;padding:0;background-color:red">
asdf
</div>
<!-- Flash -->
<div>
    <object style="margin-top:0;border:0;padding:0" onkeydown="Main.keyDown();" type="application/x-shockwave-flash" id="flashobj" width="960" height="540">
        <param name="movie" value="./Server.swf">
        <param name="allowFullScreen" value="true" />
    </object>

</div>              
</body> 
```

如您所见，边距、内边距和边框都设置为 0。电视应用程序尺寸设置为 960x540。闪光物体也是如此，但由于某种原因，闪光物体上方有一个白色间隙。我在那里放了一个 div 来测试是什么造成了差距，但这个 div 是 <body> 中的第一个元素，并且低于差距。我试着改变身体的颜色，白条也改变了颜色。

闪光灯对象也被推下视图尺寸。

是什么造成了这种差距，我该如何消除？还是有某种方法可以让智能电视上的 Flash 应用程序全屏显示？

![未知的空白](../Images/acde1b80f39a94490bc579c207d3607d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:30:25.730

奇怪..我第一次看到这种问题。

您可以随时使用`position:absolute`，它应该足以解决问题。

```
<object style="position:absolute; top:0; left:0; width:960px; height:540px" onkeydown="Main.keyDown();" type="application/x-shockwave-flash" id="flashobj" width="960" height="540">
    <param name="movie" value="./Server.swf">
    <param name="allowFullScreen" value="true" />
</object> 
```

# javascript - 推特引导。折叠子元素

> ID：12913958
> 
> 赞同：1
> 
> 时间：2012-10-16T11:43:18.160
> 
> 标签：javascript, jquery, html, twitter-bootstrap

假设我们有一个缩略图：

```
<div class="thumbnail">
    <img alt="" src="http://placehold.it/260x180" />
    <div class="details">
        <h5>Heading</h5>
        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>
    </div>
    <div class="btn-group">
        <a class="btn" href="#"><i class="icon-shopping-cart"></i></a>
        <a class="btn" data-toggle="collapse" data-target="?" href="#"><i class="icon-eye-open"></i></a>
        <a class="btn" href="#"><i class="icon-edit"></i></a>
    </div>
</div> 
```

是否可以`<p>`使用属性折叠/切换父级的段落？那应该是什么`data-target`样子？而且我还想问一下使用data-attributes是否合理还是使用`Twitter`js API更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:03:03.067

关于使用`data-`属性或 API 是否“更好”，除非您有特定的用例，否则这个问题毫无意义。无论您是使用`data-`属性还是使用 API，都可以实现相同的目标 - 小部件的初始化和/或配置。

有些人不喜欢使用`data-`属性，因此“更喜欢”使用 API，但对于外部观察者来说，实现者的偏好并不适用。同样，非程序员可能会发现使用`data-`“更容易”的属性，但同样，对于最终用户来说，设计师发现更容易的东西并没有什么区别，他们感兴趣的只是最终结果 - 小部件。

我最近确实有一个特定的用例，我必须使用 API - 我想在移动视图中显示手风琴（可折叠），而不是在应用程序的桌面视图中。如果我使用`data-`属性来初始化和配置手风琴，桌面视图会继承此属性并自动构建手风琴。在这种情况下，使用 API 会“更好”，因为这意味着我只能在屏幕小于`768px`宽度时初始化手风琴，避免使用一堆脚本来禁用桌面视图中的功能......

# java - 将 String.format() 用于日历与日期

> ID：12913959
> 
> 赞同：0
> 
> 时间：2012-10-16T11:43:20.297
> 
> 标签：java, date

为什么如果我使用`String.format(Date)`它会在默认时区打印日期，但是当我使用`String.format(Calendar)`它时会在日历的时区打印。实际上，后者是我需要的，但我可以确定这种行为会持续存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:41:40.083

正如我从 String.format 的实现中发现的那样（至少对于 JDK 1.5，它`printDateTime(Object, Locale)`包含这样的代码：

```
 } else if (arg instanceof Date) {
    // Note that the following method uses an instance of the
    // default time zone (TimeZone.getDefaultRef().
    cal = Calendar.getInstance(l);
    cal.setTime((Date)arg);
    } else if (arg instanceof Calendar) {
    cal = (Calendar) ((Calendar)arg).clone();
    cal.setLenient(true);
    } else { 
```

所以如果参数`String.format`是日期，`Calendar.getInstance(Locale)`则使用默认时区创建日历，如果参数是`Calendar`则使用日历的时区。此外，我没有找到任何明确的描述，并且该方法是私有的，所以不可能假设这种行为不会改变。

# django-haystack - django haystack 搜索点和减号

> ID：12913962
> 
> 赞同：0
> 
> 时间：2012-10-16T11:43:44.813
> 
> 标签：django-haystack

我的搜索索引中有产品名称，例如：**foo e-15**

我搜索**e-15**时没有得到结果，这正常吗？是否可以找到没有字母字符的字符串，例如**.** 和**-**？这个角色有我不知道的超能力吗？:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:52:30.013

使用 xapian+haystack 时遇到同样的问题：如果是减号，则无法获得查询“艺术家 - 歌曲名”的搜索结果。发现加号和减号字符在 xapian 中用作搜索运算符：[link](http://xapian.org/docs/queryparser.html)

但我仍然不知道如何改变或修复它。

# sql - 如何使用 t-sql 使用 table2 中的记录更新 table1

> ID：12913971
> 
> 赞同：1
> 
> 时间：2012-10-16T11:44:02.577
> 
> 标签：sql, sql-server, tsql, updates

我有两张桌子：

`Table1`：

```
RulesVectorID(nullable, primary),Weight,IsDeleted 
```

`Table2`：

```
RulesVectorID(forigen) , Weight,IsDeleted, NumberOfOffers, other fields... 
```

我想做两件事：

1.  分配`Id`给 table1 中的所有行`where RulesVectorID ==null`

    我试过这个：

    ```
    UPDATE myTable1
    SET RulesVectorID = SELECT MAX(RulesVectorID) + 1 FROM myTable1,
    WHERE RulesVectorID IS NULL 
    ```

2.  对于在步骤 (1) 中添加的行，我想复制它们的`Weight, IsDeleted`列并将 1 添加到它们的`NumberOfOffers`

    我试过这个：

    ```
    INSERT INTO myTable2 (Weight, IsDeleted, NumberOfOffers, RulesVectorID) 
    VALUES (
      SELECT Weight, IsDeleted, 1, RulesVectorID 
      FROM myTable1 
      WHERE myTable1.RulesVectorID NOT IN (SELECT RulesVectorID FROM myTable2)) 
    ```

有没有更清洁的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:16:22.540

假设您在每个表中的 [uniqueID] 列上都有一个索引，并且您只想使用表 2 中的数据更新表 1 中的现有行，并且两个表之间的 [uniqueID] 应该是相同的，您可以尝试以下操作：

```
UPDATE Table1
SET Table1.stfips=Table2.NEWstfips,
    Table1.areatype=Table2.NEWareatype,
    Table1.area=Table2.NEWarea
FROM Table2
JOIN Table1
    ON Table1.uniqueid=Table2.uniqueid 
```

我们在我们的暂存数据库中使用它，所以速度不是那么大的问题。对 1300 万条记录的粗略测试表明，这在我们的硬件 (YMMV) 上大约需要 15 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:48:55.837

```
;with t as (
select *, rn=row_number() over (order by weight)
from mytable1
where RulesVectorID is null)
update t set RulesVectorID = rn + isnull((Select max(RulesVectorID) from myTable1),0); 
```

删除后第二个查询看起来没问题`values()`

```
insert into myTable2 (Weight,IsDeleted,NumberOfOffers,RulesVectorID) 
select Weight,IsDeleted,1,RulesVectorID 
from myTable1 
where myTable1.RulesVectorID not in (select RulesVectorID from myTable2) 
```

# php - 创建 txt 文件列出子文件夹中的文件

> ID：12913972
> 
> 赞同：0
> 
> 时间：2012-10-16T11:44:04.940
> 
> 标签：php, javascript, linux, ubuntu

我有一个包含数千个子文件夹的目录。我想让它在每个子文件夹中自动创建一个文本文件，该文件将列出该子文件夹中的所有文件。我在 Ubuntu 10.04 上运行如何在 javascript 或 php 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:53:16.823

在 shell 中，它是一个命令（尽管嵌入了其他命令）：

```
find /start/path -type d -exec sh -c "ls {} > {}/files.txt" \; 
```

如果您确实需要其他语言版本，请说明您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:57:50.650

**这不是 php 的工作 .. 出于实验目的，您可以使用它：**

```
$di = new RecursiveIteratorIterator(new RecursiveDirectoryIterator(__DIR__, FilesystemIterator::SKIP_DOTS), RecursiveIteratorIterator::SELF_FIRST);
foreach ( $di as $file ) {
    $name = $file->getPathInfo() . "/files.txt";
    touch($name);
    file_put_contents($name, $file->getFilename() . PHP_EOL, FILE_APPEND);
} 
```

如果要删除文本文件，您可以随时运行

```
foreach ( $di as $file ) {
    $name = $file->getPathInfo() . "/files.txt";
    is_file($name) AND unlink($name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:57:03.007

它是一个示例 php 代码，它将在每个目录中创建一个文件“files.txt”，并将所有文件名放在该文件夹中（不会添加文件夹名称）。确保您对所有文件夹都有写权限

```
function recursive($directory)
{
    $dirs = array_diff(scandir($directory), Array( ".", ".." ));
    $dir_array = array();

    foreach($dirs as $d)
    {
        if(is_dir($directory."/".$d)){
            $dir_array[$d] = recursive($directory."/".$d);
        }
        else{
            $dir_array[$d] = $d;
            $fp = fopen("$directory/files.txt","a");
            fwrite($fp,"\n$d");
        }
    }
}   

recursive($start_directory);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:35:45.670

您可以通过使用 scandir 编写递归 PHP 函数来实现这一点。有关 PHP scandir 的更多帮助，[请查看此](http://www.php.net/manual/en/function.scandir.php)

# c# - 未能将切换状态检索为 0 或 1

> ID：12913977
> 
> 赞同：0
> 
> 时间：2012-10-16T11:44:32.847
> 
> 标签：c#, .net, wpf, mvvm, toggle

嘿，我刚开始研究切换按钮，我已经设置了按钮的属性。我想检查应该返回 1 或 0 的切换状态。

**XAML：**

```
<ToggleButton Grid.Column="3" Content="On" Command="{Binding VoltageToggleCommand}" IsChecked="{Binding Path=IsChecked}" Name="VoltageToggleBtn" /> 
```

**视图模型类：**

```
private ICommand mToggleButtonCommand;
    public ICommand VoltageToggleCommand
    {
        get
        {
            if (mToggleButtonCommand == null)
                mToggleButtonCommand = new DelegateCommand(new Action(ToggleButtonCommandExecuted), new Func<bool>(ToggleButtonCommandCanExecute));

            return mToggleButtonCommand;
        }
        set
        {
            mToggleButtonCommand = value;
        }
    }

    /// <summary>
    /// Check for ToggleButton State
    /// </summary>
    private bool isChecked;
    public bool IsChecked
    {
        get { return this.isChecked; }
        set
        {
            this.isChecked = value;
            this.OnPropertyChanged("IsChecked");
        }
    }

    public bool ToggleButtonCommandCanExecute()
    {
        return true;
    }

    public void ToggleButtonCommandExecuted()
    {
        Byte[] cmdArray = new Byte[256];
        int numBytes = 0;
        cmdArray[numBytes++] = // Here I wanna retrieve the toggle state i.e. 1 or 0
        // Some Code
    } 
```

因此，当我单击切换按钮时，控件到达`ToggleButtonCommandExecuted()`我需要检查状态并将其存储在`cmdArray`. 基本上在执行代码时 cmdArray[numBytes++] = 1 或 0。

我怎样才能实现它？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:49:13.590

您必须自己将布尔值转换为字节

```
cmdArray[numBytes++] = (byte)(IsChecked ? 1 : 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:46:46.323

使用[if 短格式](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)

```
IsChecked ? 1: 0 
```

# git - git 分支的对面 --set-upstream

> ID：12913988
> 
> 赞同：37
> 
> 时间：2012-10-16T11:45:08.057
> 
> 标签：git, branch

我想停止跟踪某些分支。我使用`git branch --set-upstream foo origin/foo`.

如何撤消此操作？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-16T12:12:48.933

在即将发布的 git 1.8 中，您将能够：

```
git branch --unset-upstream 
```

但是，目前您必须[按照 manojlds 的建议](https://stackoverflow.com/a/12914311/223092)进行操作，并使用两个`git config --unset`命令。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-16T12:05:31.880

试试下面的：

```
git config --unset branch.<branch>.remote
git config --unset branch.<branch>.merge 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T12:01:27.137

如果我理解您想要删除本地和远程分支之间的关联......我认为最简单的方法之一应该是编辑配置文件（.git/config）。

[您可以在此处找到与您的问题相关的内容](https://stackoverflow.com/questions/3046436/how-do-you-stop-tracking-a-remote-branch-in-git?rq=1)

> 要删除本地和远程分支之间的关联，并删除本地分支，请运行：
> 
> ```
> git config --unset branch.<branch>.remote
> git config --unset branch.<branch>.merge
> git branch -d <branch> 
> ```

# python - Python Selenium 套接字错误 - [Errno 61] 连接被拒绝

> ID：12913991
> 
> 赞同：1
> 
> 时间：2012-10-16T11:45:21.410
> 
> 标签：python, sockets, selenium, port

我在 Mac 上使用 Selenium 2.25.0 和 Python 2.7.1 绑定。运行此程序时遇到套接字错误：

```
# -*- coding: utf-8 -*-
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium import selenium 
import unittest, time, re, base64, urllib, httplib, urllib2

#Create Selenium object
browser = selenium("localhost", 4444, "*firefox", "http://www.google.com/")
#Start browser
browser.start() 
```

然后在最后一步（`browser.start`）我得到这个错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/selenium-2.25.0-py2.7.egg/selenium/selenium.py", line 189, in start
    result = self.get_string("getNewBrowserSession", start_args)
  File "/Library/Python/2.7/site-packages/selenium-2.25.0-py2.7.egg/selenium/selenium.py", line 223, in get_string
    result = self.do_command(verb, args)
  File "/Library/Python/2.7/site-packages/selenium-2.25.0-py2.7.egg/selenium/selenium.py", line 212, in do_command
    conn.request("POST", "/selenium-server/driver/", body, headers)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 941, in request
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 975, in _send_request
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 937, in endheaders
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 797, in _send_output
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 759, in send
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 740, in connect
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 571, in create_connection
socket.error: [Errno 61] Connection refused 
```

我试过摆弄不同的端口，但这并不能解决问题。抱歉，如果我在这里遗漏了一些明显的东西。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:53:56.667

在运行脚本之前，您必须启动服务器。转到 Selenium RC 服务器所在的目录，然后从命令行控制台运行以下命令。[您可以在此处](http://seleniumhq.org/docs/05_selenium_rc.html#installation)找到更多说明。

```
java -jar selenium-server-standalone-<version-number>.jar 
```

# jquery - 在 jQuery 选择器中使用哈希

> ID：12913993
> 
> 赞同：0
> 
> 时间：2012-10-16T11:45:29.087
> 
> 标签：jquery, jquery-selectors

我使用 jQuery 1.8.0 作为 WordPress 插件的一部分并存储鼠标单击 x/y 坐标并保留节点信息，包括父路径信息（类似于[获取元素的 jQuery 选择器](https://stackoverflow.com/questions/2068272/getting-a-jquery-selector-for-an-element/2068381#2068381)）。

经过一些实验后，我注意到 jQuery 无法读取我存储的某些选择器。一些例子：

`html#:eq(0)`-> '#' 不是必需的，但 jQuery 会使用或不使用 '#' 来评估它！
`body#:eq(0)`-> jQuery 无法对此进行评估，它在这一行中止/停止（与 html 标记的行为不同）

`div#:eq(1)`-> jQuery 评估这个（应该中止吗？）
`div:eq(1)`-> jQuery 在这一行中止/停止（应该工作吗？）

这是一个错误（如果是我会报告给 jQuery）？我对这个问题的评论的理解是，当且仅当元素有一个 id 时才应该出现“#”，但这似乎不是 jQuery 的行为方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:48:11.067

哈希是[id CSS 选择器](http://www.w3.org/TR/CSS2/selector.html#id-selectors)的一部分，因此当您基于某个 id 定位元素时必须包含它，并且不能在所有其他情况下包含它。

您的所有示例都属于后一类。

# javascript - 如何使用javascript获取没有id和name字段的输入框的值

> ID：12913994
> 
> 赞同：4
> 
> 时间：2012-10-16T11:45:31.347
> 
> 标签：javascript, html

我有一个带有 3 个输入框的表单，并且所有输入框都没有 id、name 字段。因此，如果我在其中输入值，如何使用 javascript 检查没有 id 和 name 字段的输入框的值

```
<form id='a' action='' >
    <input type='text' value='' />
    <input type='text' value='' />
</form> 
```

这是 html 中的代码，我想使用 javascript 获得输入框的值。我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:48:17.427

您可以参考他们并检查他们的`value`财产。

对于支持较新浏览器的奢侈...

```
[].forEach.call(document.querySelectorAll("#a input[type='text']"),
               function(input) {
                   var value = input.value;
               }); 
```

如果您需要支持那些似乎仍然存在的烦人浏览器，只需编写更多代码，您就可以了。

```
var inputs = document.getElementById("a").getElementsByTagName("input");
var i;
var length;
var value;

for (i = 0, length = inputs.length; i < length; i++) {
     // Check we have [type='text']
     if (inputs[i].type != "text") {
         continue;
     }
     value = inputs[i].value;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:53:16.373

您可以通过获取值`getElementsByTagName`，代码将是这样的

```
var inputs = document.getElementsByTagName('input');
value1 = inputs[0].value;
value2 = inputs[1].value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T12:05:56.947

您可以使用[`elements`](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#dom-form-elements)表单对象的属性，它将仅遍历`input`表单内的元素：

```
for (var i = 0; i < a.length; i++) {
  var e = a[i];
  if (e.type == 'text') {
    f(e.value);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T11:57:46.670

```
var inpObj = document.getElementsByTagName('input');
for(var i in inpObj){
   if(inpObj[i].type == "text"){
         alert(inpObj[i].value);
    }
} 
```

此代码将提醒所有输入文本字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T12:11:39.727

看起来您想要进行表单验证。对于 HTML5 中的表单验证，请查看此资源： [http ://www.the-art-of-web.com/html/html5-form-validation/](http://www.the-art-of-web.com/html/html5-form-validation/)

基本上，您只需使用 HTML 属性就可以完成一些验证，而无需使用 JavaScript。

# jquery - 只追加一次Jquery

> ID：12913995
> 
> 赞同：1
> 
> 时间：2012-10-16T11:45:32.580
> 
> 标签：jquery, loops, html-lists, append

最后，我有我的解决方案，但仍然有一个小问题。

我有这个清单

```
<ul id="tricky_list"> 
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
</ul>​ 
```

我只想显示前 3（三）个元素，并使用此功能在鼠标悬停时显示剩余的两个

```
var limit = 3;
var list = $("#tricky_list");
var more = 0;

function tricky_hide(){
    var morec = 0;
    $("li", list).each(function(index) {
        if (index >= limit) {
            $(this).hide();      
            morec = index - limit + 1;
        }
    });

    if (!more) more = morec;

    if (more) {
        list.append('<li class="more">' + more + ' more</li>');
        return true;
    }
    return true;
}

if (tricky_hide()) {
    list.live("mouseover", function() {
        $("li", list).each(function(index) {
            $(this).show();
        });
        $("li.more", list).hide();
    });

    list.live("mouseout", function() {
        tricky_hide();
    });
} 
```

它工作得很好，但我需要一些澄清。我有这个功能

```
if (more) {
            list.append('<li class="more">' + more + ' more</li>');
            return true;
        } 
```

附加`<li class="more">`on mouseout 事件。如果我在这个元素上“mouseover”和“mouseout”无限次，它会写在我的 html 文档中`<li class="more">`。如何防止这种情况？我怎样才能只附加一次（在页面加载时，即）这个元素？

谢谢大家！

小提琴：http: [//jsfiddle.net/MYM2C/](http://jsfiddle.net/MYM2C/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:48:59.937

我想说解决方案应该很简单：

```
li_element = list.find('li.more');
if (more && !li_element.length) {
    list.append('<li class="more">' + more + ' more</li>');
    return true;
} else {
    li_element.show();
} 
```