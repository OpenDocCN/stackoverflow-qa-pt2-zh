# StackOverflow 问答 13656000-13656999

# java - InputStream 和 ByteArrayInputStream 有什么区别？

> ID：13656004
> 
> 赞同：7
> 
> 时间：2012-12-01T03:15:19.903
> 
> 标签：java, inputstream, jnlp, bytearrayinputstream

以下代码摘自核心java卷1的java web start章节。

```
 ByteArrayOutputStream out = new ByteArrayOutputStream();
     PrintStream printOut = new PrintStream(out);
     printOut.print(panel.getText());
     //panel.getText() return a String
     InputStream data = new ByteArrayInputStream(out.toByteArray());
     FileSaveService service = (FileSaveService) ServiceManager
           .lookup("javax.jnlp.FileSaveService");
     service.saveFileDialog(".", new String[] { "txt" }, data, "calc.txt"); 
```

创建了四个对象，流被重定向了三次。有没有其他方法可以使用 jnlp api 将数据写入文件？InputStream 和 ByteArrayInputStream 有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T03:45:30.437

`ByteArrayInputStream`并且`ByteArrayOututStream`是内存中的实现，当您想以类似流的方式将数据临时存储在内存中，然后在其他地方再次将其抽出时使用。

例如，假设您有一个期望输入流作为参数的方法，例如

```
public Document parseXml(InputStream in) // build an XML document from data read in 
```

但是您想将说字符串的内容发送给它。然后你会使用 a`ByteArrayInputStream`并用你的 String 的内容填充它，然后将它传递`ByteArrayInputStream`给方法。

一个`ByteArrayOutputStream`使用示例可能是一个方法写入输出流，但您只想捕获结果并直接获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-25T09:25:49.847

InputStream 是一个抽象类，而 ByteArrayInputStream 是 InputStream 的一个具体类，并提供了由 (InputStream) 给出的抽象思想的自己的实现，

此外 ：

*   ByteArrayInputStream 包含一个内部缓冲区，其中包含可以从流中读取的字节。
*   内部计数器跟踪读取方法提供的下一个字节。

关闭 ByteArrayInputStream 无效。可以在流关闭后调用此类中的方法，而不会生成 IOException。

> 来自 Java Docs 公共类 ByteArrayInputStream 扩展 InputStream

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:33:39.093

`InputStream`是一个抽象类，所有从它扩展的类都代表一个字节的输入流。需要定义的子类的应用程序`InputStream`必须始终提供返回输入的下一个字节的方法。而 a`ByteArrayInputStream`包含一个内部缓冲区，其中包含可以从流中读取的字节。内部计数器跟踪该`read`方法提供的下一个字节。

由于多态性的概念，您可以将孩子分配给父母，就像

```
InputStream data = new ByteArrayInputStream(out.toByteArray()); 
```

如果我们调用`data.read()`那意味着我们正在`read`调用`ByteArrayInputStream`. 因为`ByteArrayInputStream`提供了`read()`抽象方法的`InputStream` 实现。`read()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T03:51:03.337

InputStream 是输入流的通用接口。
FileInputStream 和 ByteArrayInputStream 都实现了该接口。

# c - 3by3 线程同步：如何避免开销

> ID：13656005
> 
> 赞同：2
> 
> 时间：2012-12-01T03:15:37.460
> 
> 标签：c, multithreading, parallel-processing, synchronization, pthreads

假设我正在运行 N 个线程。每个线程都需要与下一个和上一个线程同步。

```
 for (i = 0 ; i < NITER; i++){
      do_something ();
      sync_with_neighbours (tId - 1, tId + 1);
    } 
```

我需要以最有效的方式实现同​​步。Pthread 屏障效率不高，因为这样每个线程都会等待最慢的线程到达屏障。

欢迎任何想法

编辑：

不，我们不必等待线程 0：

如果这两个相邻线程“i + 1”和“i - 1”准备就绪，则线程“i”将运行。

假设我们在 T 时刻在这种情况下运行 6 个线程：

*   th0：待定（运行 iter = m ）
*   th1：待定（运行 iter = m ）
*   th2：准备好（等待）
*   th3：准备好（等待）
*   th4：准备好（等待）
*   th5：待定（运行 iter = m ）

T + 1 的情况将是：

*   th0：待定（运行 iter = m ）
*   th1：待定（运行 iter = m ）
*   th2：准备好（等待）
*   th3：运行 iter = m + 1
*   th4：准备好（等待）
*   th5：待定（运行 iter = m ）

如您所见，每个人都无需等待 Th0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:59:19.510

我假设（按照您的示例）您的意思是同步不是真正的会合，而是交叉信号。因此，如果任何线程从每个邻居那里获得空闲信号，它都可以运行。为此，您可以使用信号量，每个线程一个。同步部分如下所示：

```
 UP(left_sem)
   UP(right_sem)
   DOWN(own_sem,2) 
```

（第一个和最后一个线程没有左右邻居，分别。因此，它们只需要一个简单的`DOWN`）

关于实现：经典的 System V 信号量似乎是合适的，因为 System V 系统调用已经处理了信号量数组，因此您只需要做一些索引。但是，每种信号量都应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:15:30.013

只是为了好玩-您可以查看我的游戏生活编码示例-

[http://parallel.cc/cgi-bin/bfx.cgi/test_cases.html](http://parallel.cc/cgi-bin/bfx.cgi/test_cases.html)

但是由于您没有 ParC，并且被 pThreads 卡住了，所以这有点棘手。最快的同步方法通常是使用一个简单的信号量机制，其中（p）线程保持热状态并且只读取一个内存位置直到它改变（例如等待它变为非零）。

要记住的事情：

如果您将数据和信号量分开，使得通过内存子系统的写入不是原子的和/或有序的东西可能不起作用（有时），因此至少确保所有内容都在同一缓存行上（如果可能），否则校验和您的数据所以接收方知道它有一套完整的数据。

注意 1：我假设您的意思是“速度”而不是“效率”，并且您拥有与线程一样多的内核。

注 2：pThreads 源于操作系统级别的多线程（粗略），只是在这个级别很烂（精细）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T04:02:03.427

一种方法可以通过使用 OpenMP 库（这个库也使用 pthreads）来传递，并使用[有序子句](http://msdn.microsoft.com/en-us/library/z3f31k66%28v=vs.80%29.aspx)。

> 在执行带有有序子句的 for 或并行 for 构造时，有序构造严格按照它们在循环的顺序执行中的执行顺序执行。

如果我正确理解您的问题，线程 8 必须与 7 和 9 同步，但 7 必须与 6 和 8 同步，依此类推，所以实际上每个线程都必须等待线程 0。一旦线程 0 准备好，线程 1 也可以准备好，依此类推。因此，看起来每个有序子句都可能有用。

# javascript - iframe onload 事件的弹出窗口被阻止

> ID：13656009
> 
> 赞同：1
> 
> 时间：2012-12-01T03:16:20.593
> 
> 标签：javascript, iframe, popupwindow, window.open, onload-event

我正在尝试解决网站购物车 API 质量不佳的问题，因此我通过使用 Javascript 在 iframe 中向他们的网站提交表单来创建功能。

基本上，这些是发生的步骤：

1.  用户点击“结帐”按钮
2.  以 iframe 为目标提交表单（这会将项目添加到 3rd 方网站上的用户购物车）
3.  通过 iframe 的 onload 事件，window.open 用于调出 3rd 方购物车页面。

这不会被解释为创建弹出窗口的直接用户交互，因此它会被弹出窗口阻止程序阻止。

我可能最终只在 iframe 中显示购物车页面，但有谁知道让弹出方法工作的方法吗？

# php - 这个 RSS 链接是如何编码的？

> ID：13656010
> 
> 赞同：0
> 
> 时间：2012-12-01T03:16:28.457
> 
> 标签：php, encoding, rss, simplepie

我正在使用 Simplepie 创建一个简单的 RSS 聚合器。我遇到了我想添加到我的聚合器中的这个提要 (http://feeds.washingtonpost.com/rss/linksets/opinions/george-will)。对于我的生活，我无法弄清楚如何链接编码（如：[http://feeds.washingtonpost.com/c/34656/f/636588/s/25e84385/l/0L0Swashingtonpost0N0Copinions0Cgeorge0Ewill0Edigesting0Ethe0Etwinkies0Elessons0C20A120C110C230Cbbd63dd40E34160E11e20E9cfa0Ee41bac90A6cc90Istory0Bhtml0Dwprss0Frss0Igeorge0Ewill/story01.htm](http://feeds.washingtonpost.com/c/34656/f/636588/s/25e84385/l/0L0Swashingtonpost0N0Copinions0Cgeorge0Ewill0Edigesting0Ethe0Etwinkies0Elessons0C20A120C110C230Cbbd63dd40E34160E11e20E9cfa0Ee41bac90A6cc90Istory0Bhtml0Dwprss0Frss0Igeorge0Ewill/story01.htm)）。

直到最近，当《华盛顿邮报》似乎将 MediaFed 作为他们的 RSS 提供商时，这种情况才被打破。所以我想知道它是 MediaFed 的东西还是 RSS 标准的东西。

使用 Simplepie，我只需执行以下操作：

```
$link = $item->get_link(); 
```

文档中的任何内容似乎都没有任何价值。

任何帮助将非常感激！

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:57:47.543

这是一个错误。我已经以各种可以想象的方式向 WaPo 报告了它，但我没有得到任何回应。

至于你关于编码的问题，它的 url 编码出错了——对我来说看起来是双重编码的，但也可能应用了其他“卫生”。

超级烦。

但是，您可以使用包含正确链接的 guid。;-)

# c++ - 极快的is_iequal？（不区分大小写的相等比较）

> ID：13656014
> 
> 赞同：4
> 
> 时间：2012-12-01T03:16:48.033
> 
> 标签：c++, performance, visual-c++, optimization

我试图弄清楚如何编写一个**非常**快速的`is_iequal`函数，针对 ASCII 进行优化，以不区分大小写的方式比较两个字符是否相等。

最终目标是让这个函子与`boost::algorithm::starts_with`等一起使用。

到目前为止，我的尝试产生了以下结果：

```
#include <locale>
unsigned long fast_rand(void);

template<class Ch> struct is_iequal
{
    std::ctype<Ch> const &ctype;
    is_iequal(std::ctype<Ch> const &ctype) : ctype(ctype) { }
    bool operator()(Ch const c1, Ch const c2) const
    {
        return c1 == c2 ||
            ('a' <= c1 && c1 <= 'z' && c1 - 'a' == c2 - 'A') ||
            ('A' <= c1 && c1 <= 'Z' && c1 - 'A' == c2 - 'a') ||
            !(c1 <= '\x7F' && c2 <= '\x7F') &&
            ctype.toupper(c1) == ctype.toupper(c2);
    }
};

int main()
{
    size_t const N = 1 << 26;
    typedef wchar_t TCHAR;
    std::locale loc;
    std::ctype<TCHAR> const &ctype = std::use_facet<std::ctype<TCHAR> >(loc);
    is_iequal<TCHAR> const is_iequal(ctype);  // Functor

    TCHAR *s1 = new TCHAR[N], *s2 = new TCHAR[N];
    for (size_t i = 0; i < N; i++) { s1[i] = fast_rand() & 0x7F; }
    for (size_t i = 0; i < N; i++) { s2[i] = fast_rand() & 0x7F; }

    bool dummy = false;
    clock_t start = clock();
    for (size_t i = 0; i < N; i++) { dummy ^= is_iequal(s1[i], s2[i]); }
    printf("%u ms\n", (clock() - start) * 1000 / CLOCKS_PER_SEC, dummy);
}

unsigned long fast_rand(void)  // Fast RNG for testing (xorshf96)
{
    static unsigned long x = 123456789, y = 362436069, z = 521288629;

    x ^= x << 16;
    x ^= x >> 5;
    x ^= x << 1;

    unsigned long t = x;
    x = y;
    y = z;
    z = t ^ x ^ y;

    return z;
} 
```

它在我的电脑上运行时间为 584 毫秒（VC++ 2011 x64）。

不过，对于我的应用程序来说，它仍然有点太慢了——它仍然是我实际程序中的瓶颈，这会导致轻微的 UI 延迟，如果可能的话，我想摆脱它。

`is_iequals`在不更改其界面的情况下，我可以做些什么来进一步优化？

* * *

**注意：**是的，我**知道**这段代码的各种问题（UTF-16 处理，隐式转换到/从的迂腐 C++ 问题`char`等），但它们与我的目标无关，所以我完全忽略他们暂时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:34:25.613

考虑内联 toLower `c<127`- 内存成本将小到足以在缓存中，但速度**可能**会更好：

```
char localToLow[128] =....
return c1 < 127 && c2 < 127 ? localToLow[c1]==localToLow[c2] :
    ctype.toupper(c1) == ctype.toupper(c2); 
```

（< 127 可以替换为 ((c1 | c2) & ~127 ) :) ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T03:37:03.323

@Mysticial 的评论以及一些调整似乎确实有所帮助。

首先我尝试了这个：

```
template<class Ch>
struct is_iequal
{
    std::ctype<Ch> const &ctype;
    is_iequal(std::ctype<Ch> const &ctype) : ctype(ctype) { }
    bool operator()(Ch const a, Ch const b) const
    {
        return a == b ||
            ('a' <= a && a <= 'z' || 'A' <= a && a <= 'Z') &&
            (a & ~('a' - 'A')) == (b & ~('a' - 'A')) ||
            a > SCHAR_MAX && b > SCHAR_MAX &&
            ctype.toupper(a) == ctype.toupper(b);
    }
}; 
```

这并没有多大帮助，但后来我想，嘿，为什么不交换两边`&&`？

```
template<class Ch>
struct is_iequal
{
    std::ctype<Ch> const &ctype;
    is_iequal(std::ctype<Ch> const &ctype) : ctype(ctype) { }
    bool operator()(Ch const a, Ch const b) const
    {
        return a == b ||
            (a & ~('a' - 'A')) == (b & ~('a' - 'A')) &&
            ('a' <= a && a <= 'z' || 'A' <= a && a <= 'Z') ||
            a > SCHAR_MAX && b > SCHAR_MAX &&
            ctype.toupper(a) == ctype.toupper(b);
    }
}; 
```

这使它下降到 138 毫秒！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T04:04:31.513

128x128 查找表。始终进行此查找（屏蔽输入）。

这将你的分支减少到一个（你打电话给上层吗？）。不做 && 或 || 的情况下计算那个 - 使用无分支逻辑。

也许使表格成为一个完整的字节平方。还可以尝试使用更紧凑的查找表，在其中通过位旋转提取查找，并进行更多旋转以确定它是否被丢弃并使用 == 代替。 `(a&b)|(c&~b)`没有`b?a:c`分支。

分支预测失败很糟糕。

试验和测试后选择表尺寸。

所以我的表是`bool equal[128][128] = {…}`- 不是查找然后相等，而只是查找。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T06:35:13.003

如果我更换，我会得到更快的结果：

```
('a' <= a && a <= 'z' || 'A' <= a && a <= 'Z') || 
```

...从您的回答中：

```
(unsigned char)((a & 0x20) - 'A') < 26 || 
```

会`a & 0x20`从小写转换为大写（它也会影响其他一些字符，但我们会在一秒钟内将它们屏蔽掉）。`'A'`如果折叠后的值小于 ，则减法会产生一个负数`A`。转换为无符号会减少模 UCHAR_MAX（通常为 255），因此负数变为大正数。然后只用一个测试，我们就可以发现它是以大写字母还是小写字母开头的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-14T06:35:40.093

我的回答是用 C 语言，但也许它对你仍然有用......

在编写更快（大约 3 倍）tolower 函数的过程中，我还在三台不同的机器上测试了各种形式的不区分大小写的 ascii 字符相等。这是我能得到的最快速度，令人惊讶的是，它比基于整数的位运算略快：

```
uint8_t is_eq_bsc(char c, char i){
    c |= (c | ' ');
    i |= (i | ' ');
    return c == i;
} 
```

这是三台不同机器上的基准测试的要点和我测试的各种代码： [https ://gist.github.com/benwills/5170f2e6adbb67e3ec4c](https://gist.github.com/benwills/5170f2e6adbb67e3ec4c)

# codeigniter - 使用 URL 在 Codeigniter 中搜索？

> ID：13656023
> 
> 赞同：1
> 
> 时间：2012-12-01T03:17:54.733
> 
> 标签：codeigniter, uri

搜索表格：

```
 <form action="<?php echo base_url()?>product/search" method="post">
        <input type="text" name="proname" />
        <button class="submit_btn" type="submit">TÌM KIẾM</button>
    </form> 
```

我的控制器：

```
function search(){
    $product_name = trim($this->input->post('proname'));
    $search = array('name' => $product_name);
    $param = $this->uri->assoc_to_uri($search);             
    if($product_name == '/'){
        redirect('product/search_result/'.$param);
    }else{
        redirect('product/search_result/'.$param);
    }
}

function search_result(){

    $result = $this->uri->segment_array();      
    $data['page_title'] = 'Result';     
    $data['pro'] = $this->data_mod->search_array('ebook',array('e_title_vn' => $result[4]));
    $data['keyword'] = $result[4];
    $this->load->view('search_result',$data);
} 
```

当我回显关键字时（如 $this->uri->segment(4)），例如：

```
từ khóa 
```

它会显示

```
t%E1%BB%AB%20kh%C3%B3a 
```

我不知道为什么，有人可以帮助我吗？

（我英语不好，很抱歉。我的语言是越南语。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:15:18.647

`$param`您在重定向 URL 上添加的内容将被编码，您应该使用

```
urldecode($this->uri->segment(4)); 
```

让它正确显示。

# .net - 如何使 .NET 应用程序看起来像 windows 8ish

> ID：13656028
> 
> 赞同：3
> 
> 时间：2012-12-01T03:18:52.123
> 
> 标签：.net, winforms, windows-8

所以 Windows 8 和它的 Metro 外观就在这里......是否有一种标准/正确的方法可以使应用程序在 .NET 中具有相同的外观？

我想我没有在谷歌上搜索正确的东西，因为我似乎找不到太多关于它的东西。VS2012 似乎产生了看起来很旧的应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:29:26.283

事实上，DevExpress 有一个用于 WinForms 的 Metro 主题：http: [//www.devexpress.com/Subscriptions/DXperience/DXv2/index.xml? page=47](http://www.devexpress.com/Subscriptions/DXperience/DXv2/index.xml?page=47)

当然，这意味着你必须有 DevExpress，虽然要花钱，但也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:45:29.160

您也可以参加[MahApps.Metro](http://mahapps.com/MahApps.Metro/)。

# macos - 如何在 OSX 上构建（而不是安装）时将 rpath 添加到 cmake 中的可执行文件？

> ID：13656033
> 
> 赞同：12
> 
> 时间：2012-12-01T03:19:47.550
> 
> 标签：macos, cmake

因此，如果您已经有一个二进制文件，您可以在 OSX 上使用“install_name_tool”添加一个 rpath，如下所示：

```
install_name_tool -add_rpath @executable_path/blah 
```

当您构建应用程序包时，xcode 会自动执行此操作。

我知道在 cmake 中您可以使用它来设置共享库的 install_name：

```
set_target_properties(nshared PROPERTIES BUILD_WITH_INSTALL_RPATH 1 INSTALL_NAME_DIR "@rpath") 
```

我的问题是，**将 rpath 添加到二进制文件相当于什么？**

（对于“你为什么要这样做？”在你们中间，去看看你 Applications/ 文件夹中任何应用程序上的 otool -l ，你会看到很多应用程序的条目如下：

```
Load command 15
          cmd LC_RPATH
      cmdsize 36
         path @executable_path/../../Frameworks/ 
```

这是标准做法。我只是想在cmake中做到这一点）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-01T19:26:50.600

您可以使用[POST_BUILD 命令](https://cmake.org/cmake/help/latest/command/add_custom_command.html#build-events)将`LC_RPATH`加载命令添加到构建的可执行文件中：

```
add_custom_command(TARGET executable 
    POST_BUILD COMMAND 
    ${CMAKE_INSTALL_NAME_TOOL} -add_rpath "@executable_path/../../Frameworks/"
    $<TARGET_FILE:executable>) 
```

该变量包含Darwin 下可执行文件`CMAKE_INSTALL_NAME_TOOL`的路径。`install_name_tool`

# php - php echo，清除我周围的html？

> ID：13656037
> 
> 赞同：0
> 
> 时间：2012-12-01T03:20:24.690
> 
> 标签：php, echo

我正在一个网站上上课，我有一个表单系统。我的朋友正在设计，因此索引站点实际上是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Nail n' Bolts man</title>
<link href="../../styles/main.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="../../js/main.js"></script>
</head>

<body>

    <div id="main">
        <center>
            <div id="header">
                Nails & Bolts APS - Admin side
                <img src="../images/header.jpg" alt="header" width="" height="" />
            </div>

            <?php require('php/newEmployee.php'); ?>
        </center>
    </div>

</body>
</html> 
```

然后在 newEmployee.php 我还需要另一个名为 varibleEcho.php 的文件 基本上这个文件只有一个带有 switch case 语句的函数，根据你从 newEmployee.php 调用的内容来回显不同的代码

但是由于某种原因，当我使用谷歌浏览器检查网站的来源时，似乎回显清除了除了我回显的内容之外的所有内容。这意味着我的元数据 css jquery 和这样的分散器。

关于它为什么有这种行为的任何想法？

编辑：

这是整个网站（indes.php 在那里）：

**newEmployee.php**

```
<?php
require('php/variableEcho.php');
    if(!isset($_POST['rank']) || !isset($_POST['fname']) || !isset($_POST['lname']) || !isset($_POST['initials']))
    {
        variableEcho(0);
        variableEcho(1);    
    }
    else if($_POST['rank'] == '' || $_POST['fname'] == '' || $_POST['lname'] == '' || $_POST['initials'] == '')
    {
        variableEcho(0);
        variableEcho(3);
        variableEcho(1);
    }
        else if($_POST['password'] != '')
    {
    echo $_POST['password'];
    $hasLetter = false;
    $hasNumber = false;
    $hasLength = false;

    $pwd = $_POST['password'];

    $strlen = strlen($pwd);
    $pwdarr = str_split($pwd);

    $ints = 0;
    $chars = 0;
    foreach($pwdarr as $x)
    {
        if(is_int($x))
        {
            $ints++;
        }
        if(ctype_alpha($x))
        {
            $chars++;
        }
    }
    if($ints >= $strlen || $chars >= $strlen)
    {
        variableEcho(0);
        variableEcho(4);
        variableEcho(1);
    }

    if($strlen >= 8)
    {
        variableEcho(0);
        variableEcho(4);
        variableEcho(1);
    }
}
?> 
```

**可变回声**

```
<?php
function variableEcho($echoSelect)
{
    switch($echoSelect)
    {
        case 0:
            echo('
                <form action="" method="post">
                    <table>
            ');
            break;

        case 1:
            echo('
                        <tr>
                            <td><label for="fname">First name*</label></td>
                            <td><input type="text" name="fname" id="fname"/></td>
                        </tr>
                        <tr>
                            <td><label for="lname">Last name*</label></td>
                            <td><input type="text" name="lname" id="lname"/></td>
                        </tr>
                        <tr>
                            <td><label for="rank">Rank*</label></td>
                            <td><input type="text" name="rank" id="rank"/></td>
                        </tr>
                        <tr>
                            <td><label for="initials">Initials (3 length)*</label></td>
                            <td><input type="text" name="initials" id="initials"/></td>
                        </tr>
                        <tr>
                            <td><label for="password">Password</label></td>
                            <td><input type="text" name="password" id="password"/></td>
                        </tr>
                        <tr>
                        <td><input type="submit"/></td>
                    </form>
            ');
            break;

        case 2:
            echo('
                        <tr>
                            <td><div class="errText">A password is required for admins.</div></td>
                            <td></td>
                        </tr>
            ');
            break;

        case 3:
            echo('
                        <tr>
                            <td><div class="errText">Please fill out all the obligatory fields.</div></td>
                            <td></td>
                        </tr>
            ');

        case 4:
            echo('
                        <tr>
                            <td><div class="errText">The password need to be of atleas one letter, one number, and 8 long.</div></td>
                            <td></td>
                        </tr>

            ');
            break;

        default:
            echo('
                biscuit
            ');
            break;
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:43:04.450

我发现了我的问题，遗憾的是这是一个简单的问题：P

需要'newEmployee.php'；

将包括该 php 文件。在该文件中，我需要另一个文件，其中文件路径是相对于 newEmployee.php 位置的。我现在改为包含主文件中的 variableEcho 和 newEmployee。

```
<?php
    require('../../php/variableEcho.php');
    require('../../php/newEmployee.php');               
?> 
```

# drupal-7 - Drupal 7 - Apache solr 搜索自定义字段并对字段进行排序

> ID：13656038
> 
> 赞同：1
> 
> 时间：2012-12-01T03:20:31.090
> 
> 标签：drupal-7

我在 Drupal 7中遇到**Apache Solr Search问题。**我已经使用模块 Apache Solr 搜索集成设置了一个站点 Drupal 7。现在我有一个名为**Content_Type_A**的内容类型，并且**Content_Type_A**有以下 5 个字段：

1.field_1

2.field_2

3.field_3

4.field_4

5.field_5

一个。我想使用**Apache Solr Search**来搜索**仅在 3 个字段中搜索的内容的问题： field_1, field_2, field_3**。

湾。我想按针对性对它们进行排序。内容的每个字段的相关性必须按此顺序排列，从最重要到不太重要：

*   字段_3

*   字段_1

*   字段_2

这是一个示例，您可以清楚地理解它： - 假设我们有 3 个内容：

```
- Content 1 : field_3: "The test title 1", field_1: "What Tont"

- Content 2 : field_3: "Tont center search", field_1: "Apple live"

- Content 3 : field_3: "La balle blanche", field_1: "test search" 
```

*   如果我搜索此文本：“Tont”结果必须按此顺序显示：

    *   第一个是内容 2“Tont center search”，因为“Tont”在它的 field_3

    *   第二个是 Content 1，因为“Tont”在 field_1 的名称中

*   如果我搜索此文本：“搜索”结果必须按此顺序显示：

    *   第一个是Content 2“Tont center search”，因为“search”在它的field_3

    *   第二个是内容 3，因为“搜索”在 field_1 的名称中

对我有什么想法吗？

我希望你能帮助我解决这个问题。

谢谢最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:53:54.593

请清楚您将为索引准备的数据格式。如果您将其作为 csv，那么您可以在模式中定义字段标题，并使用标志声明该字段是否可以被索引

```
<field name="id" type="string" indexed="true" stored="true" required="true" /> 
```

# css - 这是用纯色覆盖css背景图像的正确方法吗？

> ID：13656041
> 
> 赞同：3
> 
> 时间：2012-12-01T03:21:30.387
> 
> 标签：css

我有一个默认的 CSS 表，它使用图像作为背景，但对于网站的移动版本，我想用纯色覆盖图像。

我的默认样式表如下所示：

```
background-image: url('../img/gray_hash.png'); 
```

我当前的 CSS 文件如下所示：

```
background-image: url('');  
background-color: #ffffff; !important; 
```

这是正确的方法吗？如果我只是添加背景颜色，图像似乎优先。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T03:22:44.557

否。要删除背景图像，请使用`background-image:none`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:27:37.503

我只会使用速记

```
background: url('../img/gray_hash.png'); // (with any other properties needed) 
```

并覆盖

```
background: white; 
```

# shell - 管道排序到sed，匹配记录末尾的5个或更多数字？

> ID：13656042
> 
> 赞同：0
> 
> 时间：2012-12-01T03:22:23.683
> 
> 标签：shell, unix

文件

```
plym    fury    77      73      2500
chevy   nova    79      60      3000
ford    mustang 65      45      17000
volvo   gl      78      102     9850
ford    ltd     83      15      10500
Chevy   nova    80      50      3500
fiat    600     65      115     450
honda   accord  81      30      6000
ford    thundbd 84      10      17000
toyota  tercel  82      180     750
chevy   impala  65      85      1550
ford    bronco  83      25      9525 
```

我必须删除所有 10,000 美元或更多的汽车（文件中的最后一列）。我必须将排序的输出通过管道传输到 sed 来执行此操作，方法是在表示 5 位或更多位的正则表达式在记录末尾匹配时退出。

这是我必须管道的命令：`grep -iv chevy cars | sort -nk 5`

到目前为止我尝试过：

`grep -iv chevy cars | sort -nk 5 | sed -n '/[0-9]{5}*/'`

但无济于事。

* * *

```
So far we have:

grep -iv chevy cars | sort -nk 5

Now let's delete the cars that are $10,000 or more.  Pipe the output of the sort into
a sed to do this, by quitting as soon as we match a regular expression representing 5
(or more) digits at the end of a record (DO NOT use repetition for this):

You entered: grep -iv chevy cars | sort -nk 5 | sed -n '/[0-9]{5}$/'
Please try again. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T03:30:45.300

使用该`-n`开关，您必须明确地`p`打印匹配线，并`!p`打印非匹配线，即不花费 5 位数价值的汽车。还要添加`$`到模式以仅在末尾匹配，并为重复组转义`\{`和`\}`，否则它将匹配`{5}`数字后的文字字符串。

所以试试这个：`sed -n '/[0-9]\{5\}$/!p'`

如果您想在第一次匹配时退出而不是只打印相关匹配，请尝试使用`q`命令而不是`!p`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T00:25:26.850

尝试

```
sed '/[0-9][0-9][0-9][0-9][0-9]$/ d' 
```

看起来很乏味，但它确实有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-02T03:06:51.337

```
grep -iv chevy cars | sed '/[0-9][0-9][0-9][0-9][0-9]$/ d' 
```

# php - 用 RewriteRule 重写两个变量

> ID：13656044
> 
> 赞同：0
> 
> 时间：2012-12-01T03:22:46.850
> 
> 标签：php

我有这样的代码：

```
 echo "  <td width='57%' height='126' class='bord' ><a href='$category_name-$id.htm'
  class='title_style'>" . $title . "</a><br />
   "; 
```

因此，$category_name 是数据库中类别的名称。所以它改变了！

我需要使用 RewriteRule 重写它。我试过这样的东西

```
 Options +FollowSymlinks
   RewriteEngine on
   RewriteRule ^([a-zA-Z0-9-]+)-([0-9]+)\.htm$  classified.php?id=$1 [L] 
```

例如：假设 $category_name = Cars 和 $id =15 那么 url 应该是：Cars-15.htm

我提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:32:19.170

我怀疑您只想获取传入路径名的数字部分。

到目前为止，您的正则表达式是正确的，但您使用了错误的占位符。`$1`用于第一个捕获组，即您的案例中的类别。并`$2`包含第二个匹配组的内容，即数字 id。

所以你的 RewriteRule 应该是：

```
RewriteRule ^([a-zA-Z0-9-]+)-([0-9]+)\.htm$  classified.php?id=$2 [L] 
```

顺便说一句，这可以进一步简化：

```
RewriteRule ^([\w-]+)-(\d+)\.htm$  classified.php?id=$2 [L] 
```

（虽然也匹配类别部分中的下划线。）

# c# - C# 中的强制转换类

> ID：13656048
> 
> 赞同：3
> 
> 时间：2012-12-01T03:23:26.323
> 
> 标签：c#, casting

我有一个问题，为什么在这段代码中，One() 方法是从 B 类执行的，而 Two() 方法是从 A 类执行的？我知道那是在做铸造，但我不明白它的工作方式。顺便说一句，任何具有这种技巧的好的链接或书籍都将不胜感激。比你。

```
class Program
{
    static void Main(string[] args)
    {
        B b = new B();
        A a = (A)b;

        a.One(); 
        a.Two(); 
    }
}

public class A
{
    public virtual void One()
    {
        Console.WriteLine("A One");
    }
    public void Two()
    {
        Console.WriteLine("A Two");
    }
}

public class B : A
{
    public override void One()
    {
        Console.WriteLine("B One");
    }
    public new void Two()
    {
        Console.WriteLine("B Two");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T03:32:54.070

这是因为`Two()`不是虚拟方法。唯一`Two()`会从类中调用的时间`B`是，如果您专门查看`B`. 类`A`在调用时没有虚拟方法的查找表，`Two()`因此没有人知道在别处寻找不同的方法。

[您可以在我对这个问题](https://stackoverflow.com/questions/12965958/overriding-a-method-signature-using-virtual/12965973#12965973)的回答中看到更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:35:20.737

Two() 方法在类 A 中不是虚拟的（因此它不允许被覆盖，几乎与您必须将 B.Two() 设为新的原因相同 - 否则编译器会抱怨）。

因此，当您在基类中没有虚拟方法时，它并不意味着被覆盖。因此，当您将 B 类型的对象转换为 A 类型时，对 Two() 方法的调用将绑定到 A 类型的方法表，而不是 B 类型。

你可以在这里读更多关于它的内容：

[http://msdn.microsoft.com/en-us/library/6fawty39(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/6fawty39(v=vs.80).aspx) http://www.akadia.com/services/dotnet_polymorphism.html

# batch-file - .BAT 开关解析

> ID：13656049
> 
> 赞同：1
> 
> 时间：2012-12-01T03:23:29.893
> 
> 标签：batch-file, cmd, options, shift

Erm .. 我正在使用解析 BAT 文件的开关，如下所示：

```
<commands> -a -b -x -y -z -u abc ...... 
```

用户可以输入很多开关，也可以不输入。所以我使用循环移位使解析无限开关成为可能：

```
:loop
IF "%1"=="-a"
...
SHIFT
GOTO loop 
```

但是当脚本结束时，我总是让 cmd 执行开关并显示错误，例如

```
'-n' is not recognized as an internal... 
```

那么，有人知道吗？非常感谢... P/S：如果可能，请使用 BAT 脚本制作解决方案，因为使用其他语言可能会导致依赖问题，因为此脚本适用于任何装有 Windows 的计算机。

最后，再次感谢=）

编辑：尝试了 shf301 建议，我发现我曾经`DEL %0`删除自己，但似乎`%0`由于命令而被转移到参数中`SHIFT`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:00:44.720

哇...终于自己解决了~我`DEL %0`用 scirpt 的完整路径代替了`%0`，然后一切恢复正常。

# hibernate - Hibernate：我可以返回包含列表的非映射对象列表吗？

> ID：13656054
> 
> 赞同：1
> 
> 时间：2012-12-01T03:25:34.177
> 
> 标签：hibernate, native-sql, resulttransformer

我目前使用 .addScalar 和 ResultTransformer 返回没有任何 List 变量的非映射对象列表。我想修改我的对象以包含一个列表。

按照 Hibernate 文档中提供的初始示例，我成功地完成了类似的事情：

```
sess.createSQLQuery("SELECT ID as id, NM_CDE as nameCode, NM_VALUE as nameValue FROM EMP")
 .addScalar("id", Hibernate.LONG)
 .addScalar("nameCode", Hibernate.STRING)
 .addScalar("nameValue", Hibernate.STRING)
 .setResultTransformer(Transformers.aliasToBean(Employee.class)) 
```

假设数据是：

```
 ID    NM_CDE          NM_VALUE
  1     LEGAL           John Allan Doe
  1     NICKNM          Johnny
  1     FORMATTED       Doe, John 
```

假设上述假设数据，我希望返回一个对象，而不是返回 3 个对象。假设的 Employee.class 将被更新为包含一个 Name 对象列表。

这个：

```
private Long id;
private String nameCode;
private String nameValue; 
```

将被替换为：

```
private Long id;
private List<EmpName> empNameList; 
```

但是本机 SQL 和/或 Hibernate 语句需要如何更新？这甚至可能吗？

# php - Cakephp 验证规则在更新时触发，即使指定了 on=>'create'

> ID：13656055
> 
> 赞同：1
> 
> 时间：2012-12-01T03:25:36.533
> 
> 标签：php, validation, cakephp

我需要一个 Cakephp 2.2 专家来帮助我。我想使用以下“$this->data”进行更新：

```
array(
    'Button' => array(
        (int) 0 => array(
            'id' => '1',
            'on' => '0'
        ),
        (int) 1 => array(
            'id' => '2',
            'on' => '0'
        ),
        (int) 2 => array(
            'id' => '3',
            'on' => '1'
        ),
        (int) 3 => array(
            'id' => '4',
            'on' => '1'
        )
    )
) 
```

Button 模型中的验证规则是：

```
 public $validate = array(
        'id'=>array(
            'notEmpty'      => array(
                'rule'      => 'notEmpty',
                'required'  => true,
                'message'   => 'Module id can not be empty',
                'on'        => 'update'
            ),      
            'naturalNumber' => array(
                'rule'      => 'naturalNumber' ,
                'message'   => 'Module id is not integer',
                'on'        => 'update'
            )
        ),      
        'name'=>array(
            'notEmpty'      => array(
                'rule'      => 'notEmpty',
                'required'  => true,
                'message'   => 'Module name can not be empty',
                'on'        => 'create'                 
            ),      
            'alphaNumericWithSpaces'    => array(
                'rule'      => array('custom', '/^[a-z0-9 ]*$/i') ,
                'message'   => 'Module category is not alphanumeric'
            )
        ),
        'type'=>array(
            'notEmpty'      => array(
                'rule'      => 'notEmpty',
                'required'  => true,
                'message'   => 'Module category can not be empty',
                'on'        => 'create'
            ),
            'naturalNumber' => array(
                'rule'      => 'naturalNumber',
                'message'   => 'Module category is not integer'
            )
        ),
        'on'=>array(
            'boolean'       => array(
                'rule'      => 'boolean',
                'message'   => 'Module ON value is not boolean'
            )
        )); 
```

然后，在控制器中，我有以下代码：

```
if(!empty($this->data)) {
  if($this->Button->saveAll($this->data)) {
    debug ('Saved!');
  } 
  else {
    debug($this->Button->validationErrors);
  }
} 
```

问题是 'saveAll()' 没有进行更新，并引发以下验证错误，即使我在这些字段上使用了 => 'create' 以仅在创建记录时触发：

```
array(
    'name' => array(
        (int) 0 => 'Module name can not be empty'
    ),
    'type' => array(
        (int) 0 => 'Module category can not be empty'
    )
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:20:27.800

为了不妨碍 saveAll 的机制，请尝试使用 save() 和单个记录。在 CakePHP 2.2.4 中，CakeValidationSet::validate() 在查看 'required' 之前一定要检查 'on'（通过 $rule->skip()）。该错误表明它正在尝试创建而不是更新。

要保存许多 Button 记录，您可能想尝试使用此 $data 结构。也许也可以使用 saveMany()

```
array(
    (int) 0 => array(   
        'Button' => array(
            'id' => '1',
            'on' => '0'
        )
    )
    (int) 1 => array(
        'Button' => array(
            'id' => '2',
            'on' => '0'
        )
    ),
    (int) 2 => array(
        'Button' => array(
            'id' => '3',
            'on' => '1'
         )
    ),
    (int) 3 => array(
        'Button' => array(
            'id' => '4',
            'on' => '1'
        )
    )
) 
```

# gruntjs - 在 grunt 任务中对修改的文件进行操作

> ID：13656056
> 
> 赞同：0
> 
> 时间：2012-12-01T03:25:56.973
> 
> 标签：gruntjs

> **可能重复：**
> [您如何在 Grunt.js 中查看多个文件，但只在更改的文件上运行任务？](https://stackoverflow.com/questions/12063266/how-do-you-watch-multiple-files-but-only-run-task-on-changed-file-in-grunt-js)

在一个任务中，比如咖啡脚本编译器，我如何检索被更改的确切文件，以便我只能选择性地编译这些文件，而不必编译我的整个代码库。

# http - 将 Nginx 502/504 错误从 proxy_pass 重新映射为 408 错误

> ID：13656057
> 
> 赞同：1
> 
> 时间：2012-12-01T03:25:59.257
> 
> 标签：http, proxy, nginx

我想将 Nginx 无法与代理成功对话时生成的 502 和 504 错误重新映射为 408 错误。

需要明确的是，当 Nginx 返回 502/504 并且没有正文时，它应该返回 408 并且仍然没有正文。

我尝试添加此指令，但它显然破坏了响应标头：

```
error_page              502 =408;
error_page              504 =408; 
```

知道如何重新映射 Nginx 错误代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:44:47.817

[http://nginx.org/r/error_page](http://nginx.org/r/error_page)

> 语法： `error_page`code ... [=[response]] **uri** ;

您忘记指定`uri`参数（您的`=408`参数已被解释为**uri**）。

**更新：**

```
location / {
    error_page 502 504 =408 @empty;
}

location @empty {
    return 200 '';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T04:21:43.393

从[nginx 中 proxy_pass 网关关闭时返回的 HTTP 状态码是否可以更改？](https://stackoverflow.com/questions/8237761/)，这组指令似乎有效：

```
location = / {
  return 200;
}

location ~ ^[a-z/0-9@A-Z]*$ {
  error_page              502 504 =408 /;

  (proxy configuration goes here)
} 
```

然而，uri 的其他值没有。

# bash - 替换括号之间的所有字符

> ID：13656060
> 
> 赞同：0
> 
> 时间：2012-12-01T03:26:24.477
> 
> 标签：bash

我刚从 Windows 8 出来，现在遇到了一个大问题。我现在在 Ubuntu 12.10 上使用 FileHistory 将数据备份到外部硬盘驱动器，现在除了在文件名中附加时间戳之外，我的所有文件都已备份。

我需要删除以“（2012_”开头并以“）”结尾的括号之间的所有内容。

谁能帮我这个？这是我要修复的文件列表的屏幕截图：

[https://dl.dropbox.com/u/2526790/Screenshot%20from%202012-11-30%2021%3A19%3A06.png](https://dl.dropbox.com/u/2526790/Screenshot%20from%202012-11-30%2021%3A19%3A06.png)

任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:40:41.697

这个怎么样？

```
rename 's/\s\([^\)]+\)//' *.* 
```

我们可以为此感谢拉里沃尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:46:25.610

单程：

当前文件：

```
$ ls -l
total 0
-rw-r--r-- 1 guru None 0 Dec  1 09:14 a (2002).iso
-rw-r--r-- 1 guru None 0 Dec  1 09:14 b_(2003_2).iso 
```

重命名文件：

```
$ (
> IFS=""
> for i in *
> do
>  mv "$i" $(echo $i | sed 's/\(.*\)(.*)\(.*\)/\1\2/')
> done
> ) 
```

运行上述命令后：

```
$ ls -l
total 0
-rw-r--r-- 1 guru None 0 Dec  1 09:14 a .iso
-rw-r--r-- 1 guru None 0 Dec  1 09:14 b_.iso 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T04:01:17.863

你可以这样做：

```
for FILE in *; do
    mv "$FILE" "${FILE%(*}${FILE##*)}"
done 
```

这是因为从右边`${FILE%(*}`删除了最小的匹配项，即包括最后一个左括号和之后的所有内容，而从左边删除了最大的匹配项，即包括最后一个右括号之前的所有内容。结合它们，您应该得到除了最后一个括号之外的所有内容。即使任何文件名中也有其他括号，这也应该有效。`(*``${FILE##*)}``*)`

请注意，这种脚本移动很棘手，可能会搞砸您的文件名。我建议首先在上面使用`echo`而不是`mv`确认它确实对每个文件都做了正确的事情。

双引号也很重要，因为文件名中有空格。

如果您也想删除左括号之前的最后一个空格，只需将其包含在第一个模式中：`${FILE% (*}`.

# c - 从具有特定值的链表中删除节点

> ID：13656061
> 
> 赞同：0
> 
> 时间：2012-12-01T03:27:34.537
> 
> 标签：c, list, linked-list, nodes

我目前正在编写一个程序，该程序具有需要根据其值删除节点的功能。

我已经尝试并试图弄清楚。

到目前为止，我只有函数签名：

```
NODE* delete_node(NODE * ptr, int n, int *success_flag) 
```

我的链表结构如下：

```
/* declaration of structure */
typedef struct node
{
  int data;
  struct node *next;
} NODE; 
```

这是我已经拥有的一些关于另一个问题的代码：

```
#include <stdio.h>
#include <stdlib.h>

/* declaration of structure */
typedef struct node
{
  int data;
  struct node *next;
} NODE;

/* declaration of functions */
NODE* insert_node(NODE *ptr, NODE *new);
NODE* find_node(NODE *ptr, int n);
NODE* delete_node(NODE *ptr, int n, int *success_flag_ptr);
void print_backward_iteration(NODE *ptr);
void print_backward_recursion(NODE *ptr);

int main(int argc, char *argv[])
{
  int choice, x, flag_success;
  NODE *ptr, *new, *result;

  ptr = NULL;

  do
    {

      printf("\n1.\tInsert Integer into linked list\n");
      printf("2.\tFind integer in linked list\n");
      printf("3.\tDelete integer from linked list\n");
      printf("4.\tPrint out integers backward using the iterative strategy\n");
      printf("5.\tPrint out integers backward using the recursive strategy\n");
      printf("6.\tQuit\n");
      printf("\nEnter 1,2,3,4,5, or 6: ");
      scanf("%d", &choice);

      switch(choice)
    {
    case 1:

      printf("\nPlease enter an integer: ");
      scanf("%d", &x);
      new = (NODE *)malloc(sizeof(NODE));
      new->data = x;
      ptr = insert_node(ptr, new);
      printf("\nNode Inserted with value of %d.\n", ptr->data);
      break;

    case 2:

      printf("\nPlease enter an integer: ");
      scanf("%d", &x);
      result = find_node(ptr, x);

      if (result == NULL)
        {
          printf("\nValue could not be found.\n");
        }
      else
        {
          printf("\nValue %d was found.\n", x);
        }

      break;

    case 3:
      printf("\nPlease enter an integer: ");
      scanf("%d", &x);
      ptr = delete_node(ptr, x, &flag_success);

        if (result == NULL)
        {
          printf("\nValue could not be found.\n");
        }
      else
        {
          printf("\nValue %d was deleted.\n", x);
        }

      break;

    case 4:

      print_backward_iteration(ptr);
      break;

    case 5:

      printf("\n");
      print_backward_recursion(ptr);
      printf("\n");

      break;

    case 6:
      printf("\nThank you for using this program.\n");
    break;

    default:
      printf("\nInvalid Choice. Please try again.\n");
      break;

    }
    }
  while (choice != 6);

  printf("\n*** End of Program ***\n");
  return 0;
}

/* definition of function insert_node */
NODE* insert_node(NODE *ptr, NODE *new)
{

 new -> next = ptr;
 return new;

}

/* definition of function find_node */
NODE* find_node(NODE *ptr, int n)
{

  while (ptr != NULL)
    {
      if (ptr->data == n)  
    {
      return ptr;
    }
      else
    {
      ptr = ptr->next;
    }
    }
  return NULL;
  }

/* definition of function print_backward_iteration */
void print_backward_iteration(NODE *ptr)
{
  NODE *last, *current;

  last = NULL;

  printf("\n");

  while (ptr != last)
    {
      current = ptr;

      while (current != last)
    {
      current =  current -> next;
    }

      printf("%d  ", current -> data);
      last = current -> next;
    }

    printf("\n");

}

/* definition of function print_backward_recursion */
void print_backward_recursion(NODE *ptr)
{
  NODE *last, *current;

  last = NULL;

  while (ptr != last)
      {
    current = ptr;
    printf("%d  ", current -> data);
    print_backward_recursion(current -> next);
    last = current;
      }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T03:33:25.107

你必须做这样的事情：

```
NODE* delete_node(NODE * ptr, int n, int *success_flag)
{
   Node *aux = NULL;

   if(ptr == NULL) // this means that theres is no 'n' in this linked list
   {
    *success_flag = 0;  // means no value found
    return NULL;
   }
   if(ptr-> n == n){     // if this is the value you want
      aux = ptr->next;   // aux will point to the remaining list
      free(ptr);         // free the actual node
      *success_flag = 1; // mark as success 
      return aux;        // return the pointer to the remaining list
    }
   else // lets see the remaining nodes 
      ptr->next = delete_node(ptr->next,n,success_flag); 

  return ptr;
 } 
```

# python - 如何按类型替换 Django Queryset

> ID：13656064
> 
> 赞同：1
> 
> 时间：2012-12-01T03:28:01.010
> 
> 标签：python, django, django-queryset

我是 Django 新手，我有一个应用程序，它的数据库中有大约 60,000 个“项目”模型。

这个数量一直在增长，“项目”是我们制作的 Django 模型。我们的应用程序通常需要按特定顺序在我们的网站上显示这些项目。我们有 3 种类型的项目，我将它们称为 type1、type2、type3。这些项目也会在某个时间到期，而且数量一直在增长，所以我们不能创建一个静态列表并使用它，它必须是动态的。我们需要显示项目，例如（每页 32 个）：

```
type1 type2 type3 type1
type2 type3 type1 type2 
type3 type1 type2 type3
type1 type2 type3 type1
type2 type3 type1 type2
type3 type1 type2 type3
type1 type2 type3 type1
type2 type3 type1 type2 
```

我们还实现了无限滚动来显示这些项目，因此列表需要保持相同的顺序。例如：上面的第 2 页将以 type3 开头。

1.  现在我们按每种类型进行 3 个查询。
2.  为每个创建一个列表。
3.  创建另一个列表。
4.  然后迭代并以交替顺序将项目附加到 3 中的列表中。
5.  创建一个 Paginator 并返回特定页面。

我知道这是非常昂贵的，创建所有这些列表并遍历它们，但我正在努力寻找一种加速它的方法。我尝试过的一种方法是[Memcached](http://memcached.org)，

我在 Memcached 中存储了 1500 个项目，并且响应非常快。但是当密钥过期时，应用程序必须再次经历所有这些。我想到的一件事是创建一个管理命令（[https://docs.djangoproject.com/en/dev/howto/custom-management-commands/](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)）并从 crontrab 运行它以确保此列表始终在内存中。我们已经在 crontab（我们的数据提取）中运行了一些命令，所以这不会很糟糕。

我还尝试利用这样一个事实，即您可以使用过滤器创建一个 QuerySet，并且它在实际需要之前不会进入数据库。但由于我们每页显示 32 个项目，因此在实际实现时遇到了麻烦。这是因为它将显示一种类型的 10 个，另一种类型的 11 个和另一种类型的 11 个。

不同种类的量是不一样的。大约有：

> 类型1：~500
> 类型2：~36,000
> 类型3：~24,000

正因为如此，我在 type1 结束时以及 type2 结束时该怎么做时遇到了麻烦（不太可能有人会走到这一步，但仍然需要考虑它）。

编辑：感谢您的回复！这是我学校的顶点项目。这是我们中的任何人第一次使用 python。我之前在实习时使用过 Groovy 和 Grails，所以我熟悉 ORM 的概念。我将提供一些代码：

```
def index(request):
    type1Projects = list(project.objects.filter(type=type1))
    type2Projects = list(project.objects.filter(type=type2))
    type3Projects = list(project.objects.filter(type=type3))

    projects = list()

    while(len(type1Projects) > 0 or len(type2Projects) > 0 or len(type3Projects) > 0) :
        if(len(type1Projects) > 0) :
            projects.append(type1Projects.pop(0))
        if(len(type2Projects) > 0) :
            projects.append(type2Projects.pop(0))
        if(len(type3Projects) > 0) :
            projects.append(type3Projects.pop(0))

    paginator = Paginator(projects, 32)

    page = request.GET.get('page', 1)
    render_to_response('fake.html', {'projects':paginator.page(page)}, RequestContext(request)) 
```

如您所见，评估这些查询并将列表加载到内存中会产生很多开销。然后迭代和创建项目列表也需要一段时间。

在我们的顶点客户想要交替的类型之前，我们只是返回如下：

```
def index(request) :
    projects = projects.objects.all()

    paginator = Paginator(projects, 32)

    page = request.GET.get('page', 1)
    render_to_response('fake.html', {'projects':paginator.page(page)}, RequestContext(request)) 
```

这些是这个函数的简化版本，只是为了演示这个概念。第二个速度很快，因为它只评估它需要什么。交替方式花费的时间太长了，因为所有内容都加载到内存中然后迭代。

这是我试图利用 Django QuerySet 延迟评估的版本：

```
def index(request) :
    type1Projects = project.objects.filter(type=type1)
    type2Projects = project.objects.filter(type=type2)
    type3Projects = project.objects.filter(type=type3)

    page = request.GET.get('page', 1)

    type1Pag = Paginator(type1Projects, 11)
    type2Pag = Paginator(type2Projects, 11)
    type3Pag = Paginator(type3Projects, 11)

    type1List = list(type1Pag.page(page))
    type2List = list(type2Pag.page(page))
    type3List = list(type3Pag.page(page))

    projects = list()

    while(len(type1List) > 0 or len(type2List) > 0 or len(type3List) > 0) :
        if(len(type1List) > 0) :
            projects.append(type1List.pop(0))
        if(len(type1List) > 0) :
            projects.append(type2List.pop(0))
        if(len(type3List) > 0) :
            projects.append(type3List.pop(0))

    render_to_response('fake.html', {'projects':projects}, RequestContext(request)) 
```

这个版本确实工作得更快，这是一个比实际实施更简单的版本，因为有逻辑可以告诉从哪个项目类型开始，并将其限制为每页 32 个项目。但是它每页错过了一种类型的项目。一旦你到达更远的页面，我正在努力实现从此类列表中的项目 #5 开始的逻辑，然后转到下一页。

我希望这能澄清一点，抱歉昨晚让我感到困惑......我正在为决赛做准备，昨晚很累/可能没有好好思考。我将研究原始 SQL 和 NoSql。

@Saransh Mohapatra 直接使用 Redis 或 Memcache 到底是什么意思？我们现在使用 Memcache 来存储列表中的前 1500 个项目。问题是我们只希望我们的密钥在 5-10 分钟内有效。因此，当密钥过期然后有人访问该站点时，他们的响应速度很慢。这就是为什么我在谈论创建一个管理命令，然后使用 crontab 每 4 分钟运行一次，并让密钥在 10 分钟内有效。如果我们这样做了，那么列表将始终存在，但我不确定这是解决此问题的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:24:21.147

如果不查看您的代码，很难提出任何建议。但据我猜测，您的模型没有关系，因此如果使用 NoSql 而不是使用传统的 sql，它会快得多。

它会使它更快，你不必每次都缓存。您可能会查看 Reddis 甚至直接使用 memcache，而不仅仅是将其用于缓存。这些基本上是一种键值存储，因此在您的缓存项目中可以是键及其详细信息值。看一看

# ios - 在 iOS 中使用图像（png，jpg）的最佳格式是什么？

> ID：13656065
> 
> 赞同：12
> 
> 时间：2012-12-01T03:28:29.327
> 
> 标签：ios, xcode, uiimageview, uiimage

我正在使用背景图片，我希望它在不损失质量的情况下重量轻。

我在 Xcode 中找到了这个选项。

`Project-> Packaging -> Compress PNG Files`

这将帮助我提高文件大小？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-01T03:33:43.827

使用图像的格式是`PNG-24`文件格式，因为它`pixel`以最小的文件大小提供最高质量的图像。此外，在 ios 开发中，png 由于多种格式和可选编辑而受到青睐。

最重要的是，PNG 是一种无损压缩格式，这意味着它可以在不损失任何质量的情况下压缩图像。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-01T03:32:51.090

Png 支持透明度，而 jpg 不支持。因此，它们受到了苹果的青睐。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T03:33:35.620

PNG 支持透明背景，而 jpg 不支持。如果您不使用需要透明背景的图片，那么我认为jpg和png之间没有显着差异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-01T03:58:14.940

正如大多数其他人所说：iOS 开发`png`是首选。

为了减小文件大小，您可以使用`PNG-8`透明度，虽然会有点有趣，所以要小心。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-07T13:00:36.543

JPG 是一种文件格式，它使用真正的压缩方法而不改变颜色深度。它可以显着减小文件大小，无限变化，但以同样的方式降低质量。通常建议在照片上使用 JPG，因为它具有广泛的色彩配置文件。具有 80% 压缩率的 JPG 可能会有一点视觉质量损失，这是大多数人根本无法识别的。

您也可以将 PNG 24 位用于照片，但文件大小更大。

此外，您可以将 PNG 8bit 用于徽标或图表等图形。在那里，调色板减少到 256 种优化/选定的颜色。图形的视觉质量损失较低，因为它们已经带有较少的颜色。

无论如何，这仍然是一个需要决定的案例，是的，我是一名设计师。

# jquery - HTML5多文件上传：通过AJAX一一上传

> ID：13656066
> 
> 赞同：30
> 
> 时间：2012-12-01T03:29:03.113
> 
> 标签：jquery, html, ajax, file-upload, asyncfileupload

我有一个多文件上传表单：

```
<input type="file" name="files" multiple /> 
```

我正在使用 ajax 发布这些文件。我想一一上传选定的文件（创建单独的进度条，出于好奇）。

我可以通过以下方式获取文件列表或单个文件

```
FL = form.find('[type="file"]')[0].files
F  = form.find('[type="file"]')[0].files[0] 
```

让灵

```
FileList { 0=File, 1=File, length=2 }
File { size=177676, type="image/jpeg", name="img.jpg", more...} 
```

但是 FileList 是不可变的，我不知道如何提交单个文件。

我认为这是可能的，因为我看到了[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)。但是我不想使用这个插件，因为它与学习结果一样多（无论如何它需要太多的定制）。我也不想使用 Flash。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-03T21:45:08.443

要使这是一个同步操作，您需要在最后一个传输完成后开始新的传输。例如，Gmail 可以同时同时发送所有内容。AJAX 文件上传进度的事件是`progress`或`onprogress`在原始`XmlHttpRequest`实例上。

因此，在每个 之后`$.ajax()`，在服务器端（我不知道您将使用什么），发送一个 JSON 响应以在下一个输入上执行 AJAX。一种选择是将 AJAX 元素绑定到每个元素，以使事情变得更容易，因此您可以`success`在`$(this).sibling('input').execute_ajax()`.

像这样的东西：

```
$('input[type="file"]').on('ajax', function(){
  var $this = $(this);
  $.ajax({
    'type':'POST',
    'data': (new FormData()).append('file', this.files[0]),
    'contentType': false,
    'processData': false,
    'xhr': function() {  
       var xhr = $.ajaxSettings.xhr();
       if(xhr.upload){ 
         xhr.upload.addEventListener('progress', progressbar, false);
       }
       return xhr;
     },
    'success': function(){
       $this.siblings('input[type="file"]:eq(0)').trigger('ajax');
       $this.remove(); // remove the field so the next call won't resend the same field
    }
  });
}).trigger('ajax');  // Execute only the first input[multiple] AJAX, we aren't using $.each 
```

上面的代码适用于 multiple`<input type="file">`而不是 for `<input type="file" multiple>`，在这种情况下，它应该是：

```
var count = 0;

$('input[type="file"]').on('ajax', function(){
  var $this = $(this);
  if (typeof this.files[count] === 'undefined') { return false; }

  $.ajax({
    'type':'POST',
    'data': (new FormData()).append('file', this.files[count]),
    'contentType': false,
    'processData': false,
    'xhr': function() {  
       var xhr = $.ajaxSettings.xhr();
       if(xhr.upload){ 
         xhr.upload.addEventListener('progress', progressbar, false);
       }
       return xhr;
     },
    'success': function(){
       count++;
       $this.trigger('ajax');
    }
  });
}).trigger('ajax'); // Execute only the first input[multiple] AJAX, we aren't using $.each 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-03T22:21:36.800

[这看起来是一个非常好的教程，正是您正在寻找的](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)。

需要注意的是，并非所有浏览器都支持通过 vanilla ajax 上传，我仍然建议使用`iframe`. （IE 动态创建一个 iframe 并使用 javascript 发布它）

[我一直在使用这个脚本](http://lagoscript.org/jquery/upload)，我觉得它非常简洁。如果你想学习如何通过创建 iframe 来上传，你应该深入挖掘它的源代码。

希望能帮助到你 ：）

**额外编辑**

要使用 iframe 方法创建进度条，您需要在服务器端做一些工作。如果您使用的是 php，则可以使用：

*   php5.4+的[会话上传进度](http://php.net/manual/en/session.upload-progress.php)
*   php<5.4的[上传进度包](http://pecl.php.net/package/uploadprogress)

如果使用 nginx，您还可以选择使用他们的[上传进度模块进行编译](http://wiki.nginx.org/HttpUploadProgressModule)

所有这些都以相同的方式工作 - 每个上传都有一个 UID，您将通过 ajax 以一致的时间间隔请求与该 ID 关联的“进度”。这将返回服务器确定的上传进度。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-07T22:42:15.540

我面临同样的问题并提出了这个解决方案。我只是用多部分检索表单，并在递归调用（文件后的文件）中启动 ajax 请求，它只在完成时调用 next。

```
var form = document.getElementById( "uploadForm" );
var fileSelect = document.getElementById( "photos" );
var uploadDiv = document.getElementById( "uploads" );

form.onsubmit = function( event ) {
    event.preventDefault(  );

    var files = fileSelect.files;
    handleFile( files, 0 );
};

function handleFile( files, index ) {
    if( files.length > index ) {
        var formData = new FormData(  );
        var request = new XMLHttpRequest(  );

        formData.append( 'photo', files[ index ] );
        formData.append( 'serial', index );
        formData.append( 'upload_submit', true );

        request.open( 'POST', 'scripts/upload_script.php', true );
        request.onload = function(  ) {
            if ( request.status === 200 ) {
                console.log( "Uploaded" );
                uploadDiv.innerHTML += files[ index ].name + "<br>";
                handleFile( files, ++index );
            } else {
                console.log( "Error" );
            }
        };
        request.send( formData );
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-04T10:59:17.283

> 使用此源代码，您可以通过 ajax 一个一个地上传多个文件，如 google。您还可以看到上传进度

**HTML**

```
 <input type="file" id="multiupload" name="uploadFiledd[]" multiple >
 <button type="button" id="upcvr" class="btn btn-primary">Start Upload</button>
 <div id="uploadsts"></div> 
```

**Javascript**

```
<script>

function uploadajax(ttl,cl){

var fileList = $('#multiupload').prop("files");
$('#prog'+cl).removeClass('loading-prep').addClass('upload-image');

var form_data =  "";

form_data = new FormData();
form_data.append("upload_image", fileList[cl]);

var request = $.ajax({
          url: "upload.php",
          cache: false,
          contentType: false,
          processData: false,
          async: true,
          data: form_data,
          type: 'POST', 
          xhr: function() {  
      var xhr = $.ajaxSettings.xhr();
      if(xhr.upload){ 
        xhr.upload.addEventListener('progress', function(event){
                        var percent = 0;
                        if (event.lengthComputable) {
                            percent = Math.ceil(event.loaded / event.total * 100);
                        }
                        $('#prog'+cl).text(percent+'%')

                    }, false);
       }
      return xhr;
     }    
      })
      .success(function(res,status) {

        if(status == 'success'){

            percent = 0;
            $('#prog'+cl).text('');            

                $('#prog'+cl).text('--Success: ');

            if(cl < ttl){
                uploadajax(ttl,cl+1);
            }else{
               alert('Done ');

            }     

            }

      })
      .fail(function(res) {
      alert('Failed');
      });

}

$('#upcvr').click(function(){

var fileList = $('#multiupload').prop("files");
$('#uploadsts').html('');
var i
for ( i = 0; i < fileList.length; i++) {
$('#uploadsts').append('<p class="upload-page">'+fileList[i].name+'<span class="loading-prep" id="prog'+i+'"></span></p>');
if(i == fileList.length-1){
    uploadajax(fileList.length-1,0);
}
}

});

</script> 
```

**PHP**

```
upload.php
    move_uploaded_file($_FILES["upload_image"]["tmp_name"],$_FILES["upload_image"]["name"]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-11T09:42:45.550

**html代码**

```
<div class="row">
    <form id="singleUploadForm" name="singleUploadForm" style="float: right; padding-right: 25px">
        <input style="float: left;" id="singleFileUploadInput" type="file" name="files" class="file-input btn btn-default" required multiple/>
        <button style="float: left" type="submit" class="btn .btn-primary">Upload</button>
    </form>
</div> 
```

**JavaScript 代码**

```
$('#mutipleUploadForm').submit(function (event) {
    var formElement = this;
    var formData = new FormData(formElement);
    $.ajax({
        type: "POST",
        enctype: 'multipart/form-data',
        url: "/uploadFile",
        data: formData,
        processData: false,
        contentType: false,
        success: function (response) {
            alert("Image Uploaded Successfully");

            location.reload();
        },
        error: function (error) {
            console.log(error);
            // process error
        }
    });
    event.preventDefault();
}); 
```

**弹簧控制器类**

```
@PostMapping("/uploadFile")
@ResponseBody
public boolean uploadMutipleFiles(@RequestParam("file") MultipartFile[] file) {
    List<Boolean> uploadStatusList = new ArrayList<>();
    for (MultipartFile f : file) {
        uploadStatusList.add(uploadFile(f));
    }
    return !uploadStatusList.contains(false);
}

public boolean uploadFile(@RequestParam("file") MultipartFile file) {
    boolean uploadStatus = galleryService.storeFile(file);
    return uploadStatus;
} 
```

**春季服务类**

```
public boolean storeFile(MultipartFile file) {
    boolean uploadStatus = false;
    try {
        String fileName = file.getOriginalFilename();
        InputStream is = file.getInputStream();
        Files.copy(is, Paths.get(imagesDirectory + fileName), StandardCopyOption.REPLACE_EXISTING);
        System.out.println("File store success");
        uploadStatus = true;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return uploadStatus;
} 
```

# php - PHP-我如何从 javascript 中检索值？

> ID：13656068
> 
> 赞同：0
> 
> 时间：2012-12-01T03:29:24.657
> 
> 标签：php, string, fwrite

请帮我解决一下这个。我有以下代码，我可以从外部 js 文件中检索值

```
$phpBsetB= "<script>document.write(BsetB)</script>";
echo $phpBsetB; 
```

让我们假设 BsetB 存储一个字符串“abcde”。上面的代码将简单地打印出任何变量 BsetB 是 abcde。我的问题是，如果我添加以下代码

```
$handle = fopen("test.js", "w");
fwrite($handle, $phpBsetB);
fclose($handle); 
```

test.js 中保存的不是 abcde，而是保存的

```
<script>document.write(BsetB)</script> 
```

有什么办法可以让它保存 abcde 吗？非常感谢您的帮助！

谢谢你们的快速帮助！我想我需要解释更多我想要做什么。也许你们可以找到更好的方法来解决这个问题。我有一个网页，它加载一个名为 test.js 的外部平面文件。在 test.js 中，我在那里声明了一些变量。我想要做的是，这个网页当前正确读取了 test.js 中的所有变量，但它不会写入/更新 test.js 文件。我希望网页能够编写/更新这个 test.js。由于 javascript 无法在服务器端编写，我尝试使用 php 编写。关键是...我需要加载 test.js 文件，所以我可以编写/更新它。我的网页目前使用 js 读取，所以这就是为什么我的代码现在如此混乱......我只知道如何使用 javascript 读取 js 文件。检索值后，我需要将此 js 变量传递给 php。或者我应该创建 php 平面文件而不是 js？非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:40:07.570

下面的行被解释为一个字符串。

`$phpBsetB= "<script>document.write(BsetB)</script>";`

您必须创建一个请求以将值从客户端（javascript）发送到服务器端（php）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:42:14.607

您混淆了 php 和 javascript，它们不会在趋势中运行。

你的结果将永远是`<script>document.write(BsetB)</script>`因为`BsetB`它不是一个变量，它根本没有任何价值。

如果您从某个地方接收此值，那么它应该看起来像这样

```
$BestB = "abcde";
$phpBsetB= "<script>document.write($BsetB)</script>";
echo $phpBsetB;

$handle = fopen("test.js", "w");
fwrite($handle, $phpBsetB);
fclose($handle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:44:56.473

PHP 不能执行 JavaScript 函数，也不能处理标签——这就是浏览器的工作。PHP 将简单地输出您告诉它输出的内容，即：`<script>document.write(BsetB)</script>`

如果您想在浏览器中执行该功能，则在输出中回显它或通过脚本标签包含一个 test.js 文件。

话虽如此，它会产生一个 JavaScript 错误，因为`BsetB`未定义 Javascript 变量

它应该是

```
$BsetB= "<script>document.write('abcds')</script>";
echo  $BsetB; 
```

浏览器输出 **abcds**

或者

```
$my_output = "abc";
$BsetB= "<script>document.write('".$my_output."')</script>";

echo $BsetB; 
```

# php - XAMPP 开发的 PHP 站点可以在 IIS 服务器上运行吗？

> ID：13656069
> 
> 赞同：1
> 
> 时间：2012-12-01T03:29:30.620
> 
> 标签：php, iis, xampp

我目前正在我的 XAMPP 服务器上开发一个 Joomla PHP 网站。我的客户刚刚说他正在运行安装了 PHP 和 MySQL 的 Windows IIS 服务器。我想知道我的 XAMPP 开发站点会在他的服务器上工作，还是我必须在 IIS 服务器上开发我的站点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:35:48.940

XAMPP 服务器并不是真正的服务器，它是“免费和开源的跨平台 Web 服务器解决方案堆栈包，主要由 Apache HTTP 服务器、MySQL 数据库以及用 PHP 和 Perl 编程语言编写的脚本的解释器组成”。如果您的客户端运行的是 IIS 6.0 或 7.0 版，则通过 wiki，您可以使用 IIS7 的 PHP 管理器轻松安装 FastCGI，而且我相信有专门用于在 iis 上运行的 joomla 版本安装程序。 [http://php.iis.net/](http://php.iis.net/)

[http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/install-joomla-on-iis](http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/install-joomla-on-iis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:48:24.927

它应该在 IIS 上工作，前提是 IIS 正在处理 php 脚本，并且 XAMPP 和客户端 IIS 上的 PHP 版本最好是相同的。

# jsf - primefaces p:outputLabel 没有为 UIInput 设置标签，当它是 Omnifaces 树的子级时使用它的值

> ID：13656074
> 
> 赞同：0
> 
> 时间：2012-12-01T03:30:33.987
> 
> 标签：jsf, primefaces, omnifaces

p:outputLabel 会为相关的 UIInput 设置标签，但是当它是 Omnifaces 的子级时 o:tree 是行不通的。验证错误消息仍然使用 clientId。

Omnifaces outputLabel 可以为相关的 UIComponent 设置标签，并且可以与 o:tree 一起使用。

Primefaces 在 endEncode 方法中设置标签，使用 o:tree 时，在 endEncode 之前调用 validateValue 方法。

有人有解决方法吗？

# 更新：

版本：

*   爪哇 7
*   TomEE 1.5.1 (myfaces 2.1.9)
*   Primefaces-3.4.1
*   omn​​ifaces-1.3-SNAPSHOT-20121121

只能用myfaces重现，用Mojarra最后一个节点的lable值将用于其他节点的无效消息。

*   [mojarra](http://dl.dropbox.com/u/4606812/testee-mojarra.zip)的演示
*   [myfaces](http://dl.dropbox.com/u/4606812/testee-myfaces.zip)的演示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:24:12.093

我可以重现你的问题。这个问题与 OmniFaces 无关`<o:tree>`，但它实际上是 PrimeFaces 中的一个错误`<p:outputLabel>`。作为证据，尝试在 中使用它`<ui:repeat>`，您会看到完全相同的问题。

至于为什么它与 OmniFaces 一起工作`<o:outputLabel>`，那是因为它在关联的输入组件中将标签设置为 a `ValueExpression`。PrimeFaces 设置了当前评估的值，该值在请求消息时不一定是正确的值。

我建议将其作为[问题](http://code.google.com/p/primefaces/issues/list)报告给 PrimeFaces 人员，并附上使用`<ui:repeat>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:01:42.670

这个问题有两个部分。一个在primefaces一侧。它将评估值设置为 UIInput 的标签属性，而不是 ValueExpression。所以所有数据都使用相同的标签。二是兼容性问题。Myfaces 2.1.9 是 JSF2.1 并且需要`Component`遵循`VisitHint.SKIP_ITERATION`. Omnifaces 不支持它。这是一个使 Omnifaces 工作的补丁。

```
diff -r 0c0b57aa6780 src/org/omnifaces/component/tree/TreeInsertChildren.java
--- a/src/org/omnifaces/component/tree/TreeInsertChildren.java  Fri Nov 30 12:39:03 2012 -0400
+++ b/src/org/omnifaces/component/tree/TreeInsertChildren.java  Sun Dec 02 14:56:02 2012 +0800
@@ -16,6 +16,7 @@
 import javax.faces.component.UIComponent;
 import javax.faces.component.visit.VisitCallback;
 import javax.faces.component.visit.VisitContext;
+import javax.faces.component.visit.VisitHint;
 import javax.faces.context.FacesContext;
 import javax.faces.event.PhaseId;

@@ -66,6 +67,11 @@
     */
    @Override
    public boolean visitTree(VisitContext context, VisitCallback callback) {
+       Boolean skipIterationHint = context.getHints().contains(VisitHint.SKIP_ITERATION);
+       if (skipIterationHint != null && skipIterationHint.booleanValue())
+       {
+           return super.visitTree(context, callback);
+       }
        return Components.getClosestParent(this, Tree.class).visitTreeNode(context, callback);
    }

diff -r 0c0b57aa6780 src/org/omnifaces/component/tree/TreeNodeItem.java
--- a/src/org/omnifaces/component/tree/TreeNodeItem.java    Fri Nov 30 12:39:03 2012 -0400
+++ b/src/org/omnifaces/component/tree/TreeNodeItem.java    Sun Dec 02 14:56:02 2012 +0800
@@ -18,6 +18,7 @@
 import javax.faces.component.UIComponent;
 import javax.faces.component.visit.VisitCallback;
 import javax.faces.component.visit.VisitContext;
+import javax.faces.component.visit.VisitHint;
 import javax.faces.context.FacesContext;
 import javax.faces.event.PhaseId;

@@ -119,6 +120,12 @@
    @Override
    @SuppressWarnings({ "rawtypes", "unchecked" }) // For TreeModel. We don't care about its actual type anyway.
    public boolean visitTree(final VisitContext context, final VisitCallback callback) {
+       
+       Boolean skipIterationHint = context.getHints().contains(VisitHint.SKIP_ITERATION);
+       if (skipIterationHint != null && skipIterationHint.booleanValue())
+       {
+           return super.visitTree(context, callback);
+       }
        if (!isVisitable(context) || getChildCount() == 0) {
            return false;
        } 
```

## 更新：

此补丁与 JSF 2.0 有一些编译时兼容性

```
diff -r 0c0b57aa6780 src/org/omnifaces/component/tree/TreeFamily.java
--- a/src/org/omnifaces/component/tree/TreeFamily.java  Fri Nov 30 12:39:03 2012 -0400
+++ b/src/org/omnifaces/component/tree/TreeFamily.java  Mon Dec 03 09:33:00 2012 +0800
@@ -16,6 +16,8 @@

 import javax.faces.FacesException;
 import javax.faces.component.UIComponentBase;
+import javax.faces.component.visit.VisitContext;
+import javax.faces.component.visit.VisitHint;
 import javax.faces.context.FacesContext;
 import javax.faces.event.PhaseId;

@@ -136,4 +138,24 @@
        }
    }

+   /**
+    * 
+    * <a href="http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-545" >JSF Spec</a>
+    * @param context The faces context
+    * @param visitContext the visit tree context
+    * @return
+    */
+   boolean isSkippingIteration(final VisitContext visitContext) {
+       //
+       try {
+           //JSF 2.1
+           VisitHint skipHint = VisitHint.valueOf("SKIP_ITERATION");
+           return visitContext.getHints().contains(skipHint);
+       }
+       catch(IllegalArgumentException e) {
+           //JSF 2.0
+           Object skipHint = visitContext.getFacesContext().getAttributes().get("javax.faces.visit.SKIP_ITERATION");
+           return Boolean.TRUE.equals(skipHint);
+       }
+   }
 }
\ No newline at end of file
diff -r 0c0b57aa6780 src/org/omnifaces/component/tree/TreeInsertChildren.java
--- a/src/org/omnifaces/component/tree/TreeInsertChildren.java  Fri Nov 30 12:39:03 2012 -0400
+++ b/src/org/omnifaces/component/tree/TreeInsertChildren.java  Mon Dec 03 09:33:00 2012 +0800
@@ -66,6 +66,9 @@
     */
    @Override
    public boolean visitTree(VisitContext context, VisitCallback callback) {
+       if (isSkippingIteration(context)) {
+           return super.visitTree(context, callback);
+       }
        return Components.getClosestParent(this, Tree.class).visitTreeNode(context, callback);
    }

diff -r 0c0b57aa6780 src/org/omnifaces/component/tree/TreeNodeItem.java
--- a/src/org/omnifaces/component/tree/TreeNodeItem.java    Fri Nov 30 12:39:03 2012 -0400
+++ b/src/org/omnifaces/component/tree/TreeNodeItem.java    Mon Dec 03 09:33:00 2012 +0800
@@ -119,6 +119,10 @@
    @Override
    @SuppressWarnings({ "rawtypes", "unchecked" }) // For TreeModel. We don't care about its actual type anyway.
    public boolean visitTree(final VisitContext context, final VisitCallback callback) {
+       if (isSkippingIteration(context)) {
+           return super.visitTree(context, callback);
+       }
+       
        if (!isVisitable(context) || getChildCount() == 0) {
            return false;
        } 
```

# c# - OpenFileDialog 导致 WPF 应用程序崩溃

> ID：13656078
> 
> 赞同：1
> 
> 时间：2012-12-01T03:31:43.110
> 
> 标签：c#, wpf, openfiledialog, savefiledialog, filedialog

在我的`WPF`应用程序中，我曾经`OpenFileDialog`选择一个图像并将其加载到应用程序中，这可以正常工作。

但是，如果我从闪存驱动器运行相同的应用程序，图像会在`UI`冻结后加载，任何点击`UI`都会使应用程序崩溃。

我也有`manifest`应用程序的管理员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-06T19:55:49.237

我找不到很好的解释，但我用有效的本地路径设置 InitialDirectory 解决了这个问题（例如，Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:56:51.350

我以前从网络驱动器运行时看到过类似的情况。如果应用程序不是从完全受信任的来源加载的，您可能会收到 SecurityException。

在任何情况下，请尝试在无法查看您是否遇到异常的代码周围添加一个 try/catch 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:12:31.817

在这种情况下`OpenFileDialog`会导致应用程序挂起和崩溃。

所以转移`OpenFileDialog`到一个新线程。一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-09T14:38:05.257

我发现这个问题不仅发生在 WPF 中，而且发生在 WinForms 中。很难说问题的根源是什么，但似乎与 OpenFileDialog 相关的 Microsoft dll 有错误（对我来说，它是 CmnDlg32.dll）

我可以调用 ShowDialog() 函数的唯一方法是将它包装在事件中并在

```
this.BeginInvoke(
        new Action<YourObject, EventArgs>(YourObject_FileDialogOpened), new object[] 
                                                        { YourObjectInstance, e }); 
```

其中“this”是一个控件（例如，窗体）。

BeginInvoke(...) 您调用的授权将以适当的方式进行处理。

如果您在按钮单击事件或任何其他类似情况下使用 OpenFileDialog 调用，则不会出现问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-08T18:04:08.993

使用 OpenFileDialog 时 Winform 如何崩溃

```
using(var ofd = new OpenFileDialog())
{
   ofd.Filter = "Image Files (*.png;*.bmp;*.jpg)|*.png;*.bmp;*.jpg";
   if(ofd.ShowDialog() == DialogResult.OK) // <-- reason of crashing
   {
     PictureBox.Image = Image.FromFile(ofd.FileName);
   }
} 
```

如何解决问题

```
using(var ofd = new OpenFileDialog())
{
   ofd.Filter = "Image Files (*.png;*.bmp;*.jpg)|*.png;*.bmp;*.jpg";
   DialogResult Action = a.ShowDialog();
   if(Action == DialogResult.OK) // <-- To fix
   {
     PictureBox.Image = Image.FromFile(ofd.FileName);
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-07T19:49:48.407

使用这样的东西：

```
Dispatcher.Invoke(new Action(() =>
            {
                using (SaveFileDialog fd = new SaveFileDialog())
                {
                    var json = JsonConvert.SerializeObject(arScene, Formatting.Indented);

                    var bytes = UTF8Encoding.UTF8.GetBytes(json); // or any byte array data

                    fd.Filter = "JSon files (*.json)|*.json|All files (*.*)|*.*|ARScene (*.ARScene)|*.ARScene";
                    fd.Title = "Save an ARScene File";
                    fd.AutoUpgradeEnabled = true;
                    fd.DefaultExt = "ARScene";
                    fd.OverwritePrompt = false;
                    fd.RestoreDirectory = true;
                    fd.SupportMultiDottedExtensions = true;
                    fd.CreatePrompt = false;

                    if (fd.ShowDialog() == DialogResult.OK)
                    {
                        if (fd.FileName != "")
                        {
                            FileStream fs = (FileStream)fd.OpenFile();
                            if (fs != null)
                            {
                                fs.Write(bytes, 0, bytes.Length);
                                fs.Close();
                            }

                        }
                    }
                    fd.Dispose(); // not needed, but save;-)
                }
})); 
```

# sql-server - SQL Server 2008 存储过程

> ID：13656092
> 
> 赞同：0
> 
> 时间：2012-12-01T03:33:54.967
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

由于`customerAddress`.

这是我的代码：

```
CREATE PROCEDURE insertNewCustomer 
-- Add the parameters for the stored procedure here
@customerId char(8), 
@customerName varChar(20),
@customerAddress varChar(18),
@zipCode integer
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
INSERT INTO customer (customerId, customerName, customerAddress, zipCode)
VALUES ('Z0999999', 'Larisa Preiser', '3801 W. Temple Avenue', '92335')
END
GO

EXEC insertNewCustomer 1, '', '', 0 
```

关于如何使它截断它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:36:34.120

您是否使用 EXEC 语句执行了该过程？

您必须首先通过运行 CREATE PROCEDURE 命令创建过程，然后使用 EXECUTE 命令执行它。请阅读本教程。

[http://databases.about.com/od/sqlserver/a/storedprocedure.htm](http://databases.about.com/od/sqlserver/a/storedprocedure.htm)

尝试运行

```
EXECUTE insertNewCustomer 1, '', '', 0 
```

修改您的程序如下

```
CREATE PROCEDURE insertNewCustomer 
-- Add the parameters for the stored procedure here
@customerId char(8), 
@customerName varChar(20),
@customerAddress varChar(18),
@zipCode integer
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
INSERT INTO customer (customerId, customerName, customerAddress, zipCode)
VALUES (@customerId, @customerName, @customerAddress, @zipCode)
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:57:31.640

当您运行上述脚本时，用于在数据库中创建您的存储过程。

创建后执行存储过程。

例如

```
exec insertNewCustomer  'xxx','xxx','xxx',0 
```

请注意，您的示例查询不将输入参数作为输入插入到您的表中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T04:06:31.563

如果您运行已发布的 SQL Server 代码，它将创建一个存储过程。它不会运行存储过程或将任何行插入到您的客户表中。

创建存储过程后，就可以调用它了。大多数人会使用诸如 C# 之类的语言来调用存储过程。我不知道您使用的是什么其他语言（如果有的话）。

您还可以使用[EXECUTE](http://msdn.microsoft.com/en-us/library/ms188332.aspx)命令直接在 SQL Server Management Studio 中运行存储过程。（如果你有 SQL Server，你就有 EXECUTE 命令。）

# r - ggplot中的混合线和散点图

> ID：13656097
> 
> 赞同：9
> 
> 时间：2012-12-01T03:35:01.673
> 
> 标签：r, ggplot2

我环顾四周，但我被这个难住了。**我找不到绘制与散点图无关的线的方法。**这是我的一些数据和代码来澄清问题。我有以下形式的数据

```
> head(allData)
  AnnounceDate MarketProbability DealStatus binary BrierScore
1   2000-04-10         0.3333333   Complete      1  0.2340565
2   2000-06-14         0.2142857   Complete      1  0.3618200
3   2000-06-26         0.6846154   Complete      1  0.3690167
4   2000-06-16         0.1875000   Complete      1  0.4364041
5   2000-10-05         0.9555556   Complete      1  0.3078432
6   2000-10-19         0.8500000   Complete      1  0.2670799 
```

我想创建一个`MarketProbabilities`与的散点图`AnnounceDate`，并确定 a`DealStatus`是`Completed`还是`Terminated`使用颜色。

```
(ggplot(data=allData, aes(x=AnnounceDate, y=MarketProbability, colour=DealStatus))
 + geom_point() + scale_colour_hue(h = c(180,0))) 
```

![在此处输入图像描述](../Images/b0efa0b990ee69f1d327e177e6cfdb7e.png)

我也想叠加一个滚动的 Brier 分数，我试过了

```
(ggplot(data=allData, aes(x=AnnounceDate, y=MarketProbability, colour=DealStatus))
 + geom_point() + scale_colour_hue(h=c(180,0))
 + geom_line(aes(x=AnnounceDate, y=BrierScore))) 
```

![在此处输入图像描述](../Images/dca90506b5285c8d0c6af52452dbc744.png)

我很困惑为什么要绘制两条彩色线？如何将线与先前绘制的数据分离？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T04:10:03.820

正如@MattBagg 所指出的，通过将`aes()`for 颜色从主`ggplot()`调用移出并移入`geom_point()`调用来解决此问题。

```
library(ggplot2)

allData = read.table(header=TRUE,
colClasses=c("Date", "numeric", "character", "numeric", "numeric"),
text="AnnounceDate MarketProbability DealStatus binary BrierScore
2000-04-10         0.3333333   Complete      1  0.2340565
2000-06-14         0.2142857   Complete      1  0.3618200
2000-06-26         0.6846154   Complete      1  0.3690167
2000-06-16         0.1875000   Complete      1  0.4364041
2000-10-05         0.9555556   Complete      1  0.3078432
2000-10-19         0.8500000   Complete      1  0.2670799")

p1 = ggplot(data=allData, aes(x=AnnounceDate)) +
     geom_point(aes(y=MarketProbability, colour=DealStatus)) + 
     scale_colour_hue(h = c(180,0)) + 
     geom_line(aes(y=BrierScore))

ggsave(filename="plot_1.png", plot=p1, height=2.5, width=5) 
```

![在此处输入图像描述](../Images/15bcaf320d4204d9ae662ba0a9bc682c.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T03:49:55.930

ggplot() 中的 aes() 被后续的 geom 继承。您分配了 colour=DealStatus，它由 geom_line() 继承，它需要制作两条线来制作两种颜色。我无法对此进行测试，因为我在手机上，但尝试将颜色分配移出主 ggplot 并进入 geom_point()：

```
ggplot(data = allData, aes(x=AnnounceDate)) +
     geom_point(aes(colour=DealStatus, y=MarketProbability)) + 
     scale_colour_hue(h = c(180,0)) +
     geom_line(aes(y=BrierScore, group=1)) 
```

我正在添加一个常量作为组参数来告诉它连接所有点。否则，ggplot 有时会做出错误的猜测。

# css - css content 属性设置为“”时强制清除？

> ID：13656098
> 
> 赞同：1
> 
> 时间：2012-12-01T03:35:15.540
> 
> 标签：css, twitter-bootstrap, css-float

这是一个奇怪的 CSS 问题，我希望有人能对此有所了解......

我正在使用 Twitter Bootstrap，我看到一些非常奇怪的浮动/清除行为。我在主要内容中有一个右浮动 div 和一个横向表单。第二个表单字段似乎无缘无故地在浮动 div 下方清除。遍历所有 HTML 元素和 CSS 声明，这是导致这种情况发生的一个奇怪属性。我已将其简化为一个 CSS 声明：

```
 .control-group::before, .form-horizontal .control-group::after {
   display: table;
   content: "";
   line-height: 0;
 } 
```

具体来说，内容：“”；如果你禁用这个声明，它会随着第一个字段浮动，一切都很好。

我创建了一个 JS 小提琴来演示：http: [//jsfiddle.net/whiteatom/UJ89p/1/embedded/result/](http://jsfiddle.net/whiteatom/UJ89p/1/embedded/result/)

附源代码：http: [//jsfiddle.net/whiteatom/UJ89p/1/](http://jsfiddle.net/whiteatom/UJ89p/1/)

这是设计使然吗？W3规格？这是否仅针对某些浏览器（在 MacOS 上的 Chrome、Safari 和 FF 中测试）？Bootstrap 团队试图用这个空字符串属性来完成什么？我可以在不编辑引导 CSS 文件的情况下覆盖它吗？

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:43:03.953

> 这是设计使然吗？

是的。

> W3规格？

[这里是。](http://www.w3.org/TR/CSS21/generate.html#content)空字符串仍被视为内容；如果要完全阻止生成框，则需要`content: none`改用。在不修改 Bootstrap 文件的情况下，您应该能够将以下规则添加到您自己的样式表中（覆盖`content: ""`声明）：

```
/* Single-colon pseudo-elements for consistency with Bootstrap's IE8 compat */
.form-horizontal .control-group:before, .form-horizontal .control-group:after {
    content: none;
} 
```

请注意，浮动正在被清除，因为`::after`伪元素被用作清除修复。该`clear`声明位于 Bootstrap 样式表中其他地方的单独规则中：

```
.form-horizontal .control-group:after {
    clear: both;
} 
```

通过添加正确的`content: none`声明，它将完全防止伪元素被渲染，从而防止清除。

> 这是否仅针对某些浏览器（在 MacOS 上的 Chrome、Safari 和 FF 中测试）？Bootstrap 团队试图用这个空字符串属性来完成什么？

[一些非常旧的 Chrome、Safari、Firefox 和 Opera 版本不支持`content: none`](http://reference.sitepoint.com/css/content#compatibilitysection)，而是错误地将`content: ""`（使用空字符串）视为没有内容。支持的版本`content: none`正确处理这两个值，IE8 及更高版本也是如此。

我猜测使用空字符串，他们试图解释这些旧浏览器。如果是这种情况，它应该被覆盖，`content: none`因此较新的版本将使用正确的值，如下所示：

```
.form-horizontal .control-group:before, .form-horizontal .control-group:after {
    display: table;
    content: "";
    content: none;
    line-height: 0;
} 
```

如果是这样——这是我最好的猜测——那么可能需要一份错误报告。

# javascript - TinyMce 编辑器的 Bootstrap 主题/皮肤

> ID：13656101
> 
> 赞同：6
> 
> 时间：2012-12-01T03:35:39.510
> 
> 标签：javascript, jquery, css, twitter-bootstrap, tinymce

我想为我在 MVC ASP.NET 项目中使用的 TinyMCE 编辑器提供 Bootstrap 外观和感觉。我知道有一种方法可以在 TinyMCE 文档中创建单独的主题和单独的皮肤。

所以我创建了一个单独的主题，现在想用 Bootstrap CSS 类和图标自定义皮肤。

有没有人已经为 TinyMCE 实现了这种皮肤？如果可以，请您分享具有 Bootstrap 外观的 TinyMCE 皮肤文件。

或者请汇集您的建议。

# iphone - 自动布局是否必须适合 iPhone 5 和 iPhone 4 的背景？

> ID：13656106
> 
> 赞同：2
> 
> 时间：2012-12-01T03:36:22.843
> 
> 标签：iphone, ios, xcode

自动布局是否必须适合 iPhone 5 和 iPhone 4 的背景？特别是谈论 xib 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:09:59.613

不，您可以在没有自动布局的情况下适应背景。您可以使用自动调整大小（也称为“弹簧和支柱”），也可以在`layoutSubviews`或中手动进行`viewDidLayoutSubviews`。

# extjs - 关闭窗口时如何关闭计时器

> ID：13656112
> 
> 赞同：2
> 
> 时间：2012-12-01T03:37:51.433
> 
> 标签：extjs, extjs4

我在状态栏中设置了一个计时器。但问题是当我关闭窗口时，它会发现错误。我如何在 extjs 4 中没有任何错误地关闭窗口............

这是我的看法。有用

```
 var  clock = Ext.create('Ext.toolbar.TextItem', { text: Ext.Date.format(new Date(), 'g:i:s A')}),   

    this. bbar= Ext.create('Ext.ux.StatusBar', {
        id: 'win-statusbar',
        topBorder:false,
        text:'Status',
        defaultIconCls: 'info',
        defaultText: 'Status',
        items: [clock]
        });

     this.listeners= {
        render: {
            fn: function(){                 
            var task= Ext.TaskManager.start({
                 run: function(){
                     Ext.fly(clock.getEl()).update(Ext.Date.format(new Date(), 'g:i:s A'));
                 },
                 interval: 1000
             });
           }
        }
    }; 
```

## 控制器。如何在关闭窗口之前在此处设置“Ext.TaskManager.stop()”。

```
doClose: function (button) {
    var win = button.up('window');
    win.close();
} 
```

## 错误

```
Ext.fly(clock.getEl()) is null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:07:45.440

最后我解决了。我只是通过单击关闭按钮执行操作。

```
 this.listeners= {
        render: {
            fn: function(){                 
            var task= Ext.TaskManager.start({
                 run: function(){
                     Ext.fly(clock.getEl()).update(Ext.Date.format(new Date(), 'g:i:s A'));
                 },
                 interval: 1000
             });

             Ext.get('stop').on('click', function() {  //by close button id= 'stop'
                  Ext.TaskManager.stop(task);            
             }); 
           }
        }
    }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T19:34:50.090

这会奏效。

```
this.listeners= {
        render: {
            fn: function(){                 
            var task= Ext.TaskManager.start({
                 run: function(){
                     if(!Ext.fly(clock.getEl()))
                        Ext.TaskManager.stop(task);
                     Ext.fly(clock.getEl()).update(Ext.Date.format(new Date(), 'g:i:s A'));
                 },
                 interval: 1000
             });
           }
        }
    }; 
```

# java - java.util.InputMismatchException

> ID：13656113
> 
> 赞同：1
> 
> 时间：2012-12-01T03:38:04.413
> 
> 标签：java, sockets, client-server

编辑：输入为 25565、127.0.0.1、25565、testpassword、stop

我写了一些简单的代码来通过 RCON 向服务器发送命令，我收到了这个错误：

```
Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at mainclass.main(mainclass.java:21) 
```

这是我的代码：

```
import net.sourceforge.rconed.*;
import net.sourceforge.rconed.exception.BadRcon;
import net.sourceforge.rconed.exception.ResponseEmpty;

import java.net.SocketTimeoutException;
import java.util.Scanner;
class mainclass {
    public static void main(String args[]) throws SocketTimeoutException, BadRcon, ResponseEmpty{
        Scanner input = new Scanner(System.in);

        String ipStr, password, command;
        int localPort, port;

        System.out.println("Enter local Query port: ");
        localPort = input.nextInt();

        System.out.println("Enter game IP: ");
        ipStr = input.nextLine();

        System.out.println("Enter game port: ");
        port = input.nextInt();

        System.out.println("Enter password: ");
        password = input.nextLine();

        System.out.println("Enter command: ");
        command = input.nextLine();

        Rcon.send(localPort, ipStr, port, password, command);
    }
} 
```

注意：Rcon.send 函数分别需要一个 int、string、int、string 和 string。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:46:26.593

请注意，Scanner#nextInt()、Scanner#nextDouble() 和类似方法不处理行尾 (EOL) 令牌，因此如果您使用这些方法之一并希望通过调用 nextLine () 换行，您必须自己处理第一个 EOL。尝试改变

```
 Scanner input = new Scanner(System.in);

    String ipStr, password, command;
    int localPort, port;

    System.out.println("Enter local Query port: ");
    localPort = input.nextInt();

    System.out.println("Enter game IP: ");
    ipStr = input.nextLine();

    System.out.println("Enter game port: ");
    port = input.nextInt();

    System.out.println("Enter password: ");
    password = input.nextLine();

    System.out.println("Enter command: ");
    command = input.nextLine();

    Rcon.send(localPort, ipStr, port, password, command); 
```

至：

```
 Scanner input = new Scanner(System.in);

    String ipStr, password, command;
    int localPort, port;

    System.out.println("Enter local Query port: ");
    localPort = input.nextInt();
    input.nextLine();  // ***** added! *****

    System.out.println("Enter game IP: ");
    ipStr = input.nextLine();

    System.out.println("Enter game port: ");
    port = input.nextInt();
    input.nextLine();  // ***** added! *****

    System.out.println("Enter password: ");
    password = input.nextLine();

    System.out.println("Enter command: ");
    command = input.nextLine();

    Rcon.send(localPort, ipStr, port, password, command); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:48:36.003

你可以试试这个。请注意，我在所有场景中都使用了 input.nextLine()。

```
 System.out.println("Enter local Query port: ");
    localPort = Integer.parseInt(input.nextLine());

    System.out.println("Enter game IP: ");
    ipStr = input.nextLine();

    System.out.println("Enter game port: ");
    port = Integer.parseInt(input.nextLine());

    System.out.println("Enter password: ");
    password = input.nextLine();

    System.out.println("Enter command: ");
    command = input.nextLine(); 
```

# unix - 搜索行中的第一项，然后打印行和下一行

> ID：13656115
> 
> 赞同：2
> 
> 时间：2012-12-01T03:38:07.563
> 
> 标签：unix, awk, grep

我正在尝试在文件中搜索名称，然后打印以下行。我最初是这样解决的：

`grep -A 1 "searchterm" filename`

但是，这会搜索`searchterm`行中的所有位置；这是一个问题，因为我只希望在该行的第一部分匹配。

例如，如果我`1234`在以下文件中查找：

```
4567 otherstuff 1234
wrongsecondline
1234 otherstuff
rightsecondline 
```

它会找到`4567 otherstuff 1234`and `wrongsecondline`，当我真的想要`1234 otherstuff`and时`rightsecondline`。

关于如何仅搜索一行中的第一项，然后打印该行和第二行的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:56:25.703

用于`grep`打印匹配的行和以下行：

```
$ egrep -w -A1 "^1234" filename
1234 otherstuff
rightsecondline 
```

用于`awk`实现与上述相同的^(†</sup>：)

```
$ awk '$1=="1234"{print;getline;print}' filename
1234 otherstuff
rightsecondline 
```

用于`grep`仅打印匹配后的行（*之前*`<`的通知`filename`）：

```
$ grep -w -H --label=dummy -A1 '^1234' <filename | sed -ne 's#^dummy-##p'
rightsecondline 
```

用于`awk`实现与上述相同的^(†</sup>：)

```
$ awk '$1=="1234"{getline;print}' filename
rightsecondline 
```

^(†前提是没有连续的两行包含搜索词，并且文件中的最后一行不包含搜索词)

* * *

如果您希望两个或多个连续行包含搜索词，例如

```
4567 otherstuff 1234
wrongsecondline
1234 otherstuff once
1234 otherstuff again
rightsecondline 
```

...然后`awk`有状态地使用以实现与以下相同的输出`grep -A1`：

```
$ awk 'pr_after{print;pr_after=0}$1=="1234"{print;pr_after=1}' filename
1234 otherstuff once
1234 otherstuff again
rightsecondline 
```

...并使用`awk`有状态地始终打印匹配后的行，即使该行本身就是匹配：

```
$ awk 'pr_after{print;pr_after=0}$1=="1234"{pr_after=1}' filename
1234 otherstuff again
rightsecondline 
```

...或使用`awk`有状态仅打印紧跟在一个或多个匹配行之后的非匹配行，实现与`grep -H | sed`上述相同的输出：

```
$ awk '$1=="1234"{pr_after=1;next}pr_after{print;pr_after=0}' filename
rightsecondline 
```

* * *

在上面的示例中，`$1=="1234"{...}`是一个[模式/动作规则](http://www.gnu.org/software/gawk/manual/html_node/Getting-Started.html#Getting-Started)，表示*如果第一列等于文本，`1234`则执行...*，`pr_after{...}`表示*如果变量`pr_after`设置为某个非零非空值，则执行...*，[`getline`](http://www.gnu.org/software/gawk/manual/html_node/Getline.html)表示*读取下一个line 并继续执行 getline 之后的语句*，而[`next`](http://www.gnu.org/software/gawk/manual/html_node/Next-Statement.html#Next-Statement)意味着*读取下一行并在第一个模式处重新开始评估*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T05:32:19.370

假设您不想增强选择标准，则使用 grep 是完全合理的，但仅供参考，以下成语描述了如何使用 awk 选择给定特定模式的记录范围进行匹配：

```
a) Print all records from some pattern:

    awk '/pattern/{f=1}f' file

b) Print all records after some pattern:

    awk 'f;/pattern/{f=1}' file

c) Print the Nth record after some pattern:

    awk 'c&&!--c;/pattern/{c=N}' file

d) Print every record except the Nth record after some pattern:

    awk 'c&&!--c{next}/pattern/{c=N}1' file

e) Print the N records after some pattern:

    awk 'c&&c--;/pattern/{c=N}' file

f) Print every record except the N records after some pattern:

    awk 'c&&c--{next}/pattern/{c=N}1' file

g) Print the N records from some pattern:

    awk '/pattern/{c=N}c&&c--' file 
```

我将变量名称从“found”的“f”更改为“count”的“c”，因为这更能表达变量的实际含义。

因此，对于这种情况，您可以使用上面的成语“c”作为：

```
awk 'c&&!--c;/1234/{c=1}' file 
```

# c - 位域有用的情况？

> ID：13656119
> 
> 赞同：0
> 
> 时间：2012-12-01T03:38:55.633
> 
> 标签：c, bit-fields

位域在哪些情况下有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:53:47.080

在任何情况下，您都有多个要存储的布尔值并且您不想浪费内存。

例如，一个 32 位整数有 32 位。因此，您可以使用它来使用位字段存储 32 位布尔值。任何其他数据结构至少会使用 32 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T07:31:35.277

罗迪的回答在这里有一个很好的解释

[C中的位域操作](https://stackoverflow.com/questions/1044654/bitfield-manipulation-in-c)

*   位域使用起来更简洁（以/稍微/更冗长的编写为代价。
*   位域更健壮（无论如何，“int”的大小是多少）
*   位域通常与按位运算符一样快。
*   当您混合使用单个位域和多个位域时，位域非常强大，并且提取多位域涉及大量手动移位。
*   位域有效地自我记录。通过定义结构并因此命名元素，我知道它意味着什么。
*   位域还可以无缝处理大于单个 int 的结构。
*   对于按位运算符，典型的（不好的）做法是为位掩码使用大量#defines。

*   位域的唯一警告是确保编译器确实将对象打包成您想要的大小。我不记得这是否由标准定义，因此 assert(sizeof(myStruct) == N) 是一个有用的检查。

还要经历[什么时候值得使用位域？](https://stackoverflow.com/questions/4240974/when-is-it-worthwhile-to-use-bit-fields)，其中有一些很好的例子。

# android - LoaderManager 开始加载时通知 Fragment

> ID：13656123
> 
> 赞同：0
> 
> 时间：2012-12-01T03:39:18.813
> 
> 标签：android, android-listview, android-fragments, android-loadermanager, asynctaskloader

我有从 Internet 获取数据的**ListFragment**和**AsyncTaskLoader 。****ListFragment**由**BaseAdapter**填充。

加载数据时，**BaseAdapter**用旋转进度条填充第一行。当数据被加载并且没有发生错误时，数据被填充到**ListView**中。但是如果发生了一些错误（我在**AsyncTaskLoader**中有一个标志指示该错误），则**BaseAdapter**用错误消息填充第一行。

**问题：**

当加载出错时，**LoaderManager**会自动尝试再次加载数据（`forceLoad()`调用），这很好。但我需要通知**BaseAdapter**数据正在加载，以便**BaseAdapter**可以将错误消息更改为旋转进度条。

**当LoaderManager**调用时，是否有任何简单的好方法来通知片段`forceLoad()`？

**我的建议：**

ListFragment 将实现下面的接口，并将这个 ListFragment 传递到 AsyncTaskLoader 的构造函数中。

```
public interface LoadingListener {
    public void onLoadingStatusChanged(boolean isLoading);
} 
```

然后我可以打电话`onLoadingStatusChanged(true)`进来。我担心在 AsyncTaskLoader 中持有对 Fragment 的引用可能会泄漏该片段。`loadInBackground()``onLoadingStatusChanged(false)``deliverResult(T data)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:10:44.523

您建议的实现是处理事情的好方法。虽然`Loader`已经为`OnLoadComplete`and提供了回调`OnLoadCanceled`，所以一个开始的回调是你需要做的唯一补充。您还可以实现一个`OnLoadStart`随时触发`onForceLoad()`或被`onStartLoad()`调用的自定义回调，而不是`loadInBackground`它，它将更接近地反映现有的框架回调。

我建议，就像框架回调一样，您设置方法来注册和注销侦听器，而不是在构造函数中传递它，因此您的 Fragment 可以作为正常生命周期的一部分附加/删除自身，并且引用不会泄漏. 正如您所提到的，将它传递给构造函数而无法将其删除将被视为泄漏。

# jsf - jsf spring安全注入问题

> ID：13656125
> 
> 赞同：0
> 
> 时间：2012-12-01T03:39:31.830
> 
> 标签：jsf, spring-security

我在 LoginBean.java 中有以下内容

```
@ManagedBean(name = "loginMgmtBean")
@RequestScoped
public class LoginBean {
.....
@ManagedProperty(value = "#{authenticationManager}")
private AuthenticationManager authenticationManager;
@ManagedProperty(value = "#{rememberMeServices}")
private RememberMeServices rememberMeServices;
@ManagedProperty(value = "#{userDetailsService}")
private UserDetailsService userDetailsService;
..... 
```

在 context.xml 中

```
<bean id="loginBean" name="loginBean" class="com.merc.jsf.springsecurity.LoginBean" scope="prototype">
    <property   name="authenticationManager"    ref="authenticationManager"></property>
    <property   name="rememberMeServices"       ref="rememberMeServices"></property>
    <property   name="userDetailsService"       ref="customjdbcUserService"></property>
</bean>

<bean id="customjdbcUserService" class="com.merc.jsf.springsecurity.CustomJDBCDaoImpl">
    <property name="dataSource"         ref="dataSource"/>
    <property name="enableAuthorities"  value="true"/>
    <property name="usersByUsernameQuery">
        <value>SELECT USERNAME, PASSWORD, ENABLED FROM USERS WHERE USERNAME = ?</value>
    </property>
    <property name="authoritiesByUsernameQuery">
        <value>
            select U.USERNAME, UR.ROLE_NAME from USER_ROLES UR, USERS U WHERE U.ID = UR.USER_ID AND U.USERNAME = ?
        </value>
    </property>
</bean> 
```

为了记住我的功能，我在 login() 方法中执行以下操作。

```
UserDetails userDetails = userDetailsService.loadUserByUsername(getUserName()); 
```

这给了我一个NPE。userDetailsS​​ervice 为空。但是 authenticationManager 和 rememberMeServices 不为空。

我的 faces-config.xml 有以下内容

```
<navigation-rule>
    <display-name>pages/common/login.xhtml</display-name>
    <from-view-id>/pages/common/login.xhtml</from-view-id>
    <navigation-case>
        <from-action>#{loginMgmtBean.login}</from-action>
        <from-outcome>Secured</from-outcome>
        <to-view-id>/pages/secure/secured.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

# drupal-7 - 在 drupal 7.17 中创建快捷方式

> ID：13656129
> 
> 赞同：1
> 
> 时间：2012-12-01T03:40:22.283
> 
> 标签：drupal-7

在 drupal 7.17 中，我复制此 url #overlay=%3Fq%3Dadmin%252Fmodules 然后单击编辑，快捷方式，然后添加快捷方式我将其粘贴进去并收到此错误：链接必须对应于站点上的有效路径。在本教程中，我正在使用它创建一个新的快捷方式，这种情况下的 url 来自模块页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:42:48.133

快捷方式应该是`admin/modules`-`#overlay`当启用管理覆盖时，该部分将自动添加。

# java - Java XML 文件写入失败

> ID：13656132
> 
> 赞同：4
> 
> 时间：2012-12-01T03:41:38.743
> 
> 标签：java, xml, file, nullpointerexception, transformer

好的，我有一个 createUser 类，它应该创建一个 XML 文件来存储用户的数据。问题是当我运行它时出现此错误

> ```
> >        ERROR:  ''
> >     javax.xml.transform.TransformerException: java.lang.NullPointerException
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(Unknown
> > Source)
> >         at CreateUser.makeUser(CreateUser.java:156)
> >         at Welcomeclass.welcome(Welcomeclass.java:48)
> >         at Welcomeclass.main(Welcomeclass.java:32)
> >     Caused by: java.lang.NullPointerException
> >         at com.sun.org.apache.xml.internal.serializer.ToUnknownStream.characters(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(Unknown
> > Source)
> >         ... 5 more
> >     ---------
> >     java.lang.NullPointerException
> >         at com.sun.org.apache.xml.internal.serializer.ToUnknownStream.characters(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(Unknown
> > Source)
> >         at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(Unknown
> > Source)
> >         at CreateUser.makeUser(CreateUser.java:156)
> >         at Welcomeclass.welcome(Welcomeclass.java:48)
> >         at Welcomeclass.main(Welcomeclass.java:32) 
> ```

这意味着它无法将我的文档转换为 xml 文件。

这是它的代码。

```
/*imports*/
import java.util.Scanner;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Attr;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;
/*A class to create a user object and store it in a XML file for later retrieval
public class CreateUser {   
    static Scanner input = new Scanner(System.in);

    /*objects note: must be strings due to being stored in XML table*/
    static String name;
    static String age;
    static String bday;
    static String gender;
    static String location;
    static String orientation;
    static String relationship;
    static String hobbies;
    static String choice;
    static String username;
    static String password;

    static String fileLocation = "C:/Users/Steven/Workspace/twitter/src/users.xml";

    int count = 0;
    int maxId = 0;
    static int nextId  = 0;

    public static void makeUser() throws SAXException, IOException {
        /*gets user input to fill String objects*/
        System.out.println("Hello, to register we will need some information about you.");
        System.out.println("What is your name?");
        name = input.nextLine();
        System.out.println("How old are you(e.g. 45)?");
        age = input.nextLine();
        System.out.println("When is your birthday(MM/DD/YYYY)?");
        bday = input.nextLine();
        System.out.println("What is your gender?");
        gender = input.nextLine();
        System.out.println("Where do you live?");
        location = input.nextLine();
        System.out.println("What is your orientation?");
        orientation = input.nextLine();
        System.out.println("Are you in a relationship? (y/n)");
        choice = input.nextLine();
        if(choice.equals("y"))
            relationship = "In a relationship.";
        if(choice.equals("y"))  
            relationship = "Single.";
        System.out.println("What are your hobbies?");
        hobbies = input.nextLine();
        System.out.println("What will be your username?");
        username = input.nextLine();
        System.out.println("What will be your password?");
        password = input.nextLine();    

        /*create XML file to store the data*/
        try{
            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
            Document userslist = docBuilder.newDocument();
            /*create user element*/
            Element users = userslist.createElement("users");
            userslist.appendChild(users);

            Element user = userslist.createElement("user");
            users.appendChild(user);

            /*get the max id to set the next id if the file exists*/
            File xmlFile = new File(fileLocation);
            if(xmlFile.exists())
            {
                DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
                DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                Document idgetter = dBuilder.parse(xmlFile);
                idgetter.getDocumentElement().normalize();
                NodeList nodes = idgetter.getElementsByTagName("id");
                int maxId = 0;
                for(int i = 0; i < nodes.getLength(); i++){
                    if(Integer.parseInt(nodes.item(i).getTextContent()) > maxId )
                    {
                        maxId = Integer.parseInt(nodes.item(i).getTextContent());
                    }
                }
                nextId = maxId +1;
            }
            /*else create the file*/
            else
            {
                /*create the id attribute*/
                Attr attr = userslist.createAttribute("id");
                attr.setValue(String.valueOf(nextId));
                user.setAttributeNode(attr);

                /*fill in doc with objects*/
                Element dname = userslist.createElement("name");
                dname.appendChild(userslist.createTextNode(name));
                user.appendChild(dname);
                Element dgender = userslist.createElement("gender");
                dgender.appendChild(userslist.createTextNode(gender));
                user.appendChild(dgender);
                Element dlocation = userslist.createElement("location");
                dlocation.appendChild(userslist.createTextNode(location));
                user.appendChild(dlocation);
                Element dorientation = userslist.createElement("orientation");
                dorientation.appendChild(userslist.createTextNode(orientation));
                user.appendChild(dorientation);
                Element drelationship = userslist.createElement("relationship");
                drelationship.appendChild(userslist.createTextNode(relationship));
                user.appendChild(drelationship);
                Element dhobbies = userslist.createElement("hobbies");
                dhobbies.appendChild(userslist.createTextNode(hobbies));
                user.appendChild(dhobbies);
                Element dchoice = userslist.createElement("choice");
                dchoice.appendChild(userslist.createTextNode(choice));
                user.appendChild(dchoice);
                Element dusername = userslist.createElement("username");
                dusername.appendChild(userslist.createTextNode(username));
                user.appendChild(dusername);
                Element dpassword = userslist.createElement("password");
                dpassword.appendChild(userslist.createTextNode(password));
                user.appendChild(dpassword);
                Element dbday = userslist.createElement("birthday");
                dbday.appendChild(userslist.createTextNode(bday));
                user.appendChild(dbday);
                Element dage = userslist.createElement("age");
                dage.appendChild(userslist.createTextNode(age));
                user.appendChild(dage);

                /*transfer document to XML*/
                TransformerFactory transformerFactory = TransformerFactory.newInstance();
                Transformer transformer = transformerFactory.newTransformer();
                DOMSource source = new DOMSource(users);

                /*create the document in append mode */
                //StreamResult result = new StreamResult(new FileWriter(fileLocation, true));
                StreamResult result = new StreamResult(System.out);

                transformer.transform(source, result);
            }
        } catch (ParserConfigurationException pce) {
            pce.printStackTrace();
        } catch (TransformerException tfe) {
            tfe.printStackTrace();
        }
    }
} 
```

如果您不想花时间自己解决问题或查看它，那很好，但如果您有关于如何解决变压器问题的想法，那就太棒了。因为我很难弄清楚究竟是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T03:51:13.023

因为该对象不是有效的 XML，或者因为 XML 有一个空 (null) 文本节点。

表明`java.lang.NullPointerException`

```
at com.sun.org.apache.xml.internal.serializer.ToUnknownStream.characters(Unknown
> Source) 
```

如果您看一下，您将看到代码。为避免这种情况，请确保您从用户那里获得的所有条目都不为空，通过

```
int length = readValue.length();
if (length == 0){
  throw new NullPointerException("Node value can not be null");
} 
```

此外，您能否检查该对象是否是有效的 XML 以及字符实体等是否已正确编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T03:57:08.410

您会在何时为关系问题输入`NullPointerException`其他内容。`y`

```
 if (choice.equals("y"))
        relationship = "In a relationship.";
    if (choice.equals("y"))
        relationship = "Single."; 
```

快速解决方法是为字段设置默认值`relationship`

```
if ("y".equals(choice)) {
    relationship = "In a relationship.";
else {
    relationship = "Single.";
} 
```

# c - 使用 %*c 清除 scanf 缓冲区的危险

> ID：13656134
> 
> 赞同：2
> 
> 时间：2012-12-01T03:42:19.443
> 
> 标签：c, security, io, buffer

必要时在 scanf() 中使用 %*c 清除缓冲区是否有任何危险。

例如：

```
char c;
for (int i = 0; i < 5; i++) {
  scanf("%c%*c", &c);
} 
```

或者

```
char* str;
char c;
int i;
scanf("%s", str);
scanf("%d%*c", &i);
scanf("%c%*c", &c); 
```

是否应该担心缓冲区溢出或其他安全问题？似乎没有正式的文档说明在 scanf 中以这种方式在 C 中使用星号（**编辑**这不是真的），所以我很难找出输入的额外字符到底发生了什么。有没有更好的方法来清除 C 中的 scanf 缓冲区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T04:02:37.717

将您要完成的任务概念化为“我如何阅读和丢弃用户可能在我关心的内容之后键入的任何垃圾”，您将有更好的运气，这将引导您构建诸如

```
int c;
while ((c = getchar()) != EOF && c != '\n') ;  /* discard till end of line or EOF */ 
```

而且，您可以通过一开始不使用来避免整个问题，[出于其他几个原因](https://stackoverflow.com/questions/9134208/input-by-using-gets-function/9134440#9134440)`scanf`，这是一个好主意。阅读整行，如果你有，或者如果你没有，并手动解析它们。[`getline`](http://linux.die.net/man/3/getline)[`fgets`](http://linux.die.net/man/3/fgets)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T03:45:41.243

**如果要清除 scanf 缓冲区，这里是**

```
char c;
for(int i = 0; i < 5; i++) {
    scanf("%c", &c);
    while(getchar() != '\n')
        continue;
} 
```

或者

```
char c;
for(int i = 0; i < 5; i++) {
    scanf("%c", &c);
    fflush(stdin);
} 
```

但是，您的代码很危险...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T04:02:50.293

没有*scanf*缓冲区，但有一个“输入”缓冲区。清除它的最佳方法是使用`rewind(stdin)`. 但是，如果输入已被重定向，这种方法就会出现问题。

# configuration - 如何使用 CDH4 和 Yarn 查看我的 Hadoop 作业历史记录和日志？

> ID：13656138
> 
> 赞同：4
> 
> 时间：2012-12-01T03:43:30.707
> 
> 标签：configuration, hadoop, cloudera, hadoop-yarn

我用 Yarn 下载了 Hadoop 的 CDH4 tar，作业运行良好，但我不知道在哪里查看我的作业中的日志。在 MRv1 中，我只需访问 JobTracker 网络应用程序，它就有工作历史记录。也可以从这里访问单个作业的日志，或者通过转到 logs/userlogs 目录。

在我的新 Yarn 设置中（仅在单台计算机上运行），我有日志目录，但没有日志/用户日志文件夹。

当我转到 ResourceManager 网页 localhost:8088 时，有一个“所有应用程序”部分，但这里没有显示条目。当我转到 JobHistory 网页 localhost:19888 时，没有列出任何工作。

我想知道是否存在配置问题。这是我的 yarn-site.xml 条目：

```
<property>
  <name>yarn.nodemanager.local-dirs</name> 
  <value>/Users/dolan/cdh4/_hadoop_data/yarn/local</value>
</property> 
<property> 
  <name>yarn.nodemanager.log-dirs</name>
  <value>/Users/dolan/cdh4/_hadoop_data/yarn/logs</value> 
</property>
<property> 
  <name>mapreduce.jobhistory.address</name>
  <value>localhost:10020</value> 
</property>
<property> 
  <name>mapreduce.jobhistory.webapp.address</name>
  <value>localhost:19888</value> 
</property>
<property>
  <name>yarn.app.mapreduce.am.staging-dir</name>
  <value>/user</value>
</property> 
```

非常感谢有关调试内容的任何提示。

**更新：**我检查了 nodemanager 日志目录，它是空的。此外，jobhistory 目录是空的。一件奇怪的事情是 Hadoop 告诉我，`INFO mapreduce.Job: The url to track the job: http://localhost:8080/`但是当我从浏览器尝试时，该地址不可用。

**更新 #2：**我注意到我运行的每个作业都有相同的作业 ID（“job_local_0001”）。这似乎是某个地方的配置问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T19:35:44.370

听起来这里的工作是在本地运行，而不是在 YARN 上。要在 YARN 上运行作业，请确保您的 mapred-site.xml 中有此内容：

```
<property>
  <name> mapreduce.framework.name</name>
  <value>yarn</value>
</property> 
```

一般来说，您可能会通过向 cdh-user 邮件列表发送电子邮件来更快地回答此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T04:18:03.220

将以下配置添加到 mapred-site.xml 文件中

```
<property>
  <name> mapreduce.framework.name</name>
  <value>yarn</value>
</property>
<property> 
  <name>mapreduce.jobhistory.address</name>
  <value>localhost:10020</value> 
</property>
<property> 
  <name>mapreduce.jobhistory.webapp.address</name>
  <value>localhost:19888</value> 
</property> 
```

并删除您在 yarn-site.xml 中放入的 jobhistory 特定配置，例如。以上来自 yarn-site.xml 的最后两个配置

# c# - C# OleDB 删除命令

> ID：13656140
> 
> 赞同：2
> 
> 时间：2012-12-01T03:44:39.400
> 
> 标签：c#, database, crud, ole

我目前正在创建一个与 Microsoft Access 数据库连接的窗口应用程序，以对与教育相关的业务执行 CRUD 操作

其中一个工作流程是在 DataGrid 视图中搜索关键字并执行 CRUD 操作首先，我试图显示记录的数据网格视图（例如学生、参加课程的时间、什么课程...等）到收据号

应用逻辑是在datagrid View中获取receipt number并进行delete操作

所以我的问题是

1.  如何获取数据网格视图选定行中收据编号列的值？

2.  有 OleCommands 和 OleDataAdapter 来执行 CRUD 操作。我应该使用哪种方法？

以下是删除操作的代码

```
 public void delete_course_transaction(string receipt_no)
    {
        OleDbDataAdapter oledbAdapter = new OleDbDataAdapter();
        try
        {

            using (OleDbConnection connection = new OleDbConnection(connectionDBString))
            {
                string sql = "delete from COURSE_TAKE where COURSE_TAKE.RECEIPT_NO = '" + receipt_no + "'";
                connection.Open();
                oledbAdapter.DeleteCommand = connection.CreateCommand();
                oledbAdapter.DeleteCommand.CommandText = sql;
                int rows = oledbAdapter.DeleteCommand.ExecuteNonQuery();
                if (rows > 0)
                {
                    MessageBox.Show("Delete Course transaction Success!");
                }
            }
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:14:39.800

如果我理解正确：

对于您的第一个问题，您可以使用以下代码：

```
txtName.Text = dataGridView1[0, dataGridView1.CurrentRow.Index].Value.ToString(); 
```

你的第二个问题：参考这里：[http ://forums.asp.net/t/706106.aspx/1](http://forums.asp.net/t/706106.aspx/1)

# navigation - Zend Framework 2 Navigation with Partial

> ID：13656141
> 
> 赞同：1
> 
> 时间：2012-12-01T03:44:42.163
> 
> 标签：navigation, partial-views, zend-framework2

我正在使用此博客文章中概述的解决方案： [http](http://adam.lundrigan.ca/2012/07/quick-and-dirty-zf2-zend-navigation/) ://adam.lundrigan.ca/2012/07/quick-and-dirty-zf2-zend-navigation/ 类似于答案： [如何设置zf2中的2个导航？](https://stackoverflow.com/questions/12972316/how-to-set-up-2-navigations-in-zf2/12973806#12973806).

但是，我也尝试使用部分视图。当我尝试 setPartial() 时，我得到一个致命错误：

```
echo $this->navigation('navigation')->menu()->setPartial('navigation.phtml'); 
```

> 致命错误：Zend\ServiceManager\Exception\ServiceNotFoundException: Zend\ServiceManager\ServiceManager::get 无法在 /path/to/my/project/vendor/zendframework/zendframework/library/Zend/View 中获取或创建菜单实例/Helper/Navigation/AbstractHelper.php 在第 471 行

如果我取出 setPartial() 导航会很好地呈现（只是不是我希望它看起来的样子，因此是部分的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:26:55.460

在你的视图中试试这个：

```
$partial = array('myfolder/navigation.phtml', 'default');
$this->navigation('navigation')->menu()->setPartial($partial);

echo $this->navigation('navigation')->menu()->render(); 
```

# iphone - 播放音乐时更改文本颜色

> ID：13656152
> 
> 赞同：0
> 
> 时间：2012-12-01T03:46:42.340
> 
> 标签：iphone, xcode

我是 Xcode 编程的新手 :) 我想创建一个在 iPhone 上运行的卡拉 OK 软件。该软件将显示midi 或mp3 文件的歌词。但是现在我有一个问题，我不能改变我在网络上搜索的歌词句子中每个单词的颜色，他们告诉我使用 OpenGL ES 或改变单词每个像素的颜色来做到这一点有人能帮我解决这个问题吗问题？或建议我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:02:58.380

问题太宽泛了，但你可以从这个开始：

```
NSURL *url = [NSURL URLWithString:@"http://www.foo.com/lyricspage.txt"];
NSString *webPageString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:NULL];

UILabel *label = [[UILabel alloc]init];

label.text = webPageString;

label.textColor = [UIColor redColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:34:34.763

从 iOS 6 开始，您可以使用 a`UILabel`或 a`UITextField`或 a`UITextView`来显示属性字符串。在属性字符串中，您可以为字符串的不同部分分配不同的颜色。例如：

```
NSString *text = @"Raindrops on roses and whiskers on kittens";
NSMutableAttributedString *trib = [[NSMutableAttributedString alloc]
    initWithString:text];
// trib's characters will all be drawn in black by default
[trib addAttribute:NSForegroundColorAttributeName value:[UIColor redColor]
    range:NSMakeRange(13, 5)];
// Now the five characters starting at offset 13 (“roses”) will be drawn in red. 
```

Apple 在 WWDC 2012 上举行了两次关于使用属性字符串的会议：

*   [Session 222 - iOS 属性字符串简介](https://developer.apple.com/videos/wwdc/2012/#222)
*   [会话 230 - iOS 的高级属性字符串](https://developer.apple.com/videos/wwdc/2012/#230)

我建议你看视频。

# javascript - 替换按钮JS中的图像

> ID：13656155
> 
> 赞同：-1
> 
> 时间：2012-12-01T03:47:14.227
> 
> 标签：javascript, image, button

我有一个关于一个冗长的故事的相当棘手的问题，希望我能在没有太多背景的情况下很好地传达它。

我仅限于在允许我更改次要 css 和添加 javascript 等的预定义表单中工作。但是有部分源代码我无法编辑。

在此表单中，有一个按钮，其中嵌入了图像。我想使用一些 javascript 来删除此图像或将 src 替换为 " " 并保留按钮的功能。

按钮来源是：

> ```
>  <button type="submit" id="ID_formd1735f95_guest_login_submit">
>     <img src="images/icon-tick22.png" border="0" align="absmiddle" style="vertical-align:middle;" alt=""> Log In
>    </button> 
> ```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:58:04.923

这不是太难：http: [//jsfiddle.net/CrossEye/kN6WV/](http://jsfiddle.net/CrossEye/kN6WV/)

```
var button = document.getElementById("ID_formd1735f95_guest_login_submit");
var images = button.getElementsByTagName("IMG");
if (images && images.length) {
    button.removeChild(images[0]);
}​ 
```

# jquery - 粘性标题 - 使用 jquery 添加填充

> ID：13656156
> 
> 赞同：-2
> 
> 时间：2012-12-01T03:47:25.830
> 
> 标签：jquery

我正在使用此代码在滚动后从我的固定标题中删除徽标，但我还想在我的菜单中添加一个填充以使其在标题中居中。有人可以帮我修改此代码以添加填充到让我们说.main-menu。谢谢！

```
<script>
$(document).ready(function(){        
$(window).bind('scroll', function(){
    $("#logo").toggle($(this).scrollTop() < 128);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:01:44.597

我会问这是为了什么，但我认为直接回答可能是最好的。这是您问题的字面答案：

```
<script>
$(document).ready(function(){        
$(window).bind('scroll', function(){
    $("#logo").toggle($(this).scrollTop() < 128);
    $(".main_menu").css('padding', 5);
});
});
</script> 
```

# javascript - kineticjs 将组附加到鼠标

> ID：13656157
> 
> 赞同：2
> 
> 时间：2012-12-01T03:47:58.453
> 
> 标签：javascript, kineticjs

在 kineticJs 中，是否可以在将组添加到图层后将组绑定到用户鼠标指针，以便用户可以将组移动到他们想要放置的位置？然后，他们将单击以将其放置在该位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:27:17.023

这就是你可以做到的。当用户想要将组添加到图层时，将执行以下代码：

```
layer.add(group);
layer.draw();
console.log(stage.getMousePosition());
stage.on('mousemove',
    function (){
        var mouse = stage.getMousePosition();
        group.setX(mouse.x);
        group.setY(mouse.y);
        layer.draw();
    });
stage.on('click',
    function(){
        stage.off('mousemove');
    }); 
```

忘了说。为了让舞台连续获得 mousemove 事件，请在某个图层上绘制一个矩形并将其添加到舞台上，即使不透明度为 0，因为它不适用于空白区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:12:24.650

您还可以在创建组时将 group 属性设置为 draggable: true，或者在创建后将其设置为 draggable。

```
 <script>
  // make draggable on creation
   var group = new Kinetic.Group({
   draggable: true;
  });

  // make draggable after creation
  group.setDraggable(true);
 </script> 
```

这些也可以在使用相同方法移动组后关闭拖动。

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-a-group-with-kineticjs/)

# java-7 - 使用 Java 7 在 Netbeans 中打开字符串

> ID：13656163
> 
> 赞同：1
> 
> 时间：2012-12-01T03:48:49.623
> 
> 标签：java-7

即使我已经下载并安装了最新版本的 Netbeans 并将 JDK 1.7 设置为我的默认 Java 平台，我似乎也无法让 switch 语句与字符串一起使用。我错过了一些简单的东西吗？当我尝试编译时收到错误消息：“线程“main”中的异常 java.lang.RuntimeException：无法编译的源代码 - -source 1.5 不支持 switch 中的字符串（使用 -source 7 或更高版本来启用 switch 中的字符串） "

当我将 1.7 设置为默认值时，我不明白为什么编译器认为我使用的是源 1.5。有人有答案吗？谢谢。

# jquery - 将焦点放在 jQueryUI 对话框中的第一个表单元素

> ID：13656168
> 
> 赞同：2
> 
> 时间：2012-12-01T03:50:10.637
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors

我有一个使用 AJAX 获取的登录表单，我想在 jQuery UI 对话框中显示它，并且希望第一个输入字段具有自动对焦功能。我已经使用下面的代码让它工作了，但我发现它是一个相当黑客，并且认为应该有一个更好的解决方案。此外，Chrome 23、IE9 和 Firefox 16 的行为似乎一致，因此我想借此机会对这些东西进行更深入的了解，并希望有人愿意提供一些启示。

我在 SO 和其他地方发现了许多相关的问题，但没有一个建议的答案似乎对我有用。奇怪的是，许多问题都针对相反的问题。即取消自动对焦...

表单获取等由`Alt+l`使用 jQuery Hotkey 插件的键触发。第一个输入元素的 ID 为“用户”。代码是

```
$(document).bind('keydown', 'Alt+l', function () {
    $('<div>', {
        title: 'Log in'
    }).load('?action=login').dialog({
        modal: true,
        show: 'fade',
        hide: 'fade',
        resizable: false,
        draggable: false,
        open: function (e) {
            // Hack alert!
            setTimeout(function () {
                $('input:first', e.target).focus();
            }, 100);
        }
    });
    //$('#user').focus(); <- won't work; $('#user').length == 0
}); 
```

我不明白的是为什么我必须将`focus()`呼叫置于超时范围内才能正常工作。如果选择未被超时延迟，则选择`$('input:first', e.target)`（或等效的，已注释掉的）为空。`$('#user')`

如果有人可以解释这种行为，或者提供更好的解决方案，将不胜感激！

**更新**

获取的 HTML 只是一个常规表单

```
<form action="?action=login" method="post">
    <table>
        <tr><td><label for="user">Username:</label>
            <td><input id="user" type="text" name="user">
        <tr><td><label for="pass">Password:</label>
            <td><input id="pass" type="password" name="pass">
        <tr><td><td><input type="submit" value="Log in">
    </table>
</form> 
```

请注意，对于`?action=login`GET 和 POST 请求，URL 上的响应是不同的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:01:20.623

我认为问题在于我太早地创建了对话；之前`load`完成。因此，将回调中的对话框代码移动到`load`可以毫不拖延地工作：

```
$(document).bind('keydown', 'Alt+l', function () {
    $('<div>', {
        title: 'Log in'
    }).load('?action=login', function () {
        $(this).dialog({
            modal: true,
            show: 'fade',
            hide: 'fade',
            resizable: false,
            draggable: false,
            open: function () {
                $('input:first', this).focus();
            }
        });
    });
}); 
```

我认为这`load`是同步的，因此在哪里进行选择并不重要`$('input:first', this)`，但似乎并非如此。

也可能只需要将选择放在一个单独的事件中，以便在事件处理`load`完成后 DOM 正确更新。在这种情况下，这两种解决方案基本上是等价的，除了前者是丑陋的黑客，而后者不是。

如果其中任何一个是胡说八道，请不要犹豫，纠正我。

# c# - 如何为 OpenReadAsync 方法提供类实例？

> ID：13656175
> 
> 赞同：0
> 
> 时间：2012-12-01T03:51:11.713
> 
> 标签：c#

我有一个实例列表，每个实例都有一个字符串“Uri”。我想为列表的每个实例从 API 获取一些信息，并为实例的字段分配这些信息。但是在 void c_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e) 我无权访问实例。我试着用

```
 void cl_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        XDocument xml = XDocument.Load(e.Result);
        ClassName item = sender as ClassName ;       
        XElement element = xml.Root.Element("user");     
        item.SourseFirstName = (string)element.Element("first_name").Value; 
```

但我有一个`NullReferentsException`.

# python - QFlags python替代

> ID：13656176
> 
> 赞同：2
> 
> 时间：2012-12-01T03:51:16.500
> 
> 标签：python

在 PyQt4 中，有什么替代方法：

```
class TestClass
 {
 public:
     enum Option {
         OptionA = 0x0,  // 0x000000
         OptionB = 0x1,  // 0x000001
         OptionC = 0x2,  // 0x000010
         OptionD = 0x4,  // 0x000100
         OptionE = 0x8,  // 0x001000
         OptionE = 0x10 // 0x010000
         // ... some more options with value which is a power of two
     };
     Q_DECLARE_FLAGS(Options, Option)
 };

 Q_DECLARE_OPERATORS_FOR_FLAGS(TestClass::Options) 
```

如何将此块转换为python？

# php - php 示例中集成的 PostGIS 功能？

> ID：13656177
> 
> 赞同：2
> 
> 时间：2012-12-01T03:51:23.960
> 
> 标签：php, function, postgresql, geocoding, postgis

我正在为具有 PostGIS 功能的 postgreSQL 数据库编写客户端。这个客户端当然是通过 php 进行通信的。但是，我正在寻找可以从我的 php 文件中调用的可用 postGIS 函数的适当文档。

如果我能得到一个简单的例子来说明 postGIS 函数如何集成到 php 中，我将不胜感激。

干杯:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T19:04:10.857

Postgis 是在您的 postgresql 数据库中的某些模式中可用的存储过程。如果你有 PDO，你可以编写像对象一样调用然后非常接近的过程。有关可用的获取模式，请参阅 PHP PDO。

```
<?php
require_once 'constants.php';
class Postgis extends PDO
{
  public function __construct()
  {
    $this->pg = new PDO( PDO_DB_DSN );
    $this->pg->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
  }
  public function makePoint( $x, $y )
  {
    $preparedStatement = $this->pg->prepare( 'SELECT public.st_makepoint( ?, ? )' );
    $preparedStatement->execute( array( $x, $y ) );
    return $preparedStatement->fetchColumn();
  }
}

try
{
  $postgis = new Postgis();
  $point = $postgis->makePoint( 34, 44 ); //point holds the binary string of a point without srid
  var_dump( $point );
}
catch ( PDOException $e )
{
  // any errors here
  var_dump( $e->getMessage() );
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:41:31.463

PostGIS 在其网站上列出了其所有类型和功能，例如这里是[1.5 版参考文档](http://postgis.refractions.net/documentation/manual-1.5/reference.html)。您可以将这些函数称为 SQL，就像您从 PHP 中调用任何其他 SQL 一样。

因此，使用 PHP 的内置 PostgreSQL 函数，您可以执行以下操作：

```
$result = pg_query_params('
    SELECT ST_Distance( location, ST_SetSRID(ST_Point($1, $2), 27700) )
    FROM table WHERE id=$3', array(400000, 300000, 123) ); 
```

获取从英国网格参考系统中的 (400,000, 300,000) 到数据库表中第 123 行的位置列的距离（以米为单位）。

PostGIS函数周围可能有PHP包装器，但恐怕我不知道

# php - 从 javascript 生成的外部网站中提取内容

> ID：13656181
> 
> 赞同：2
> 
> 时间：2012-12-01T03:52:12.130
> 
> 标签：php, javascript, parsing

我知道如何使用 php 从外部网站提取 html 内容并对其进行解析，但问题是我要提取的内容是由 javascript 函数生成的。

代码如下所示：

```
 <div align="left">
   <div id="divCotizaciones"></div>
   <script type="text/javascript">
           getCotizaciones("cotizaciones_busca.dat");
   </script>
  </div> 
```

我想提取该函数生成的所有内容。这是我试图从中提取内容的网页：[http ://www.bvl.com.pe/neg_rv_alfa.html#](http://www.bvl.com.pe/neg_rv_alfa.html#)

我试过这个，但它不工作：

```
$html = new DOMDocument();
$html->loadHtmlFile('http://www.bvl.com.pe/neg_rv_alfa.html#');
$xpath = new DOMXPath($html);
$nodelist = $xpath->query('//*[@id="div"]/div[4]');
echo $output = $nodelist->item(0)->nodeValue;

// and this is the output I get: getCotizaciones("cotizaciones_busca.dat"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:03:26.590

不幸的是，您不能使用 DOM 或任何其他加载外部源的 PHP 函数（例如 get_file、curl 等）执行 JavaScript 代码。你需要 JavaScript 编译器，或者编程语言需要一个插件来编译 JavScript（例如 C++ 上的 WebKit） PHP 没有这种支持。

但是，您可以做的是查看数据是如何在浏览器中生成的以及它如何显示该数据。我为你做了那个，发现网格是通过向不同的 URL 发出请求而生成的。因此，不是调用`'http://www.bvl.com.pe/neg_rv_alfa.html#'`which 调用 JavaScript 函数`getCotizaciones("cotizaciones_busca.dat");` ，而后者又使用 ajax 调用此 URL。

[http://www.bvl.com.pe/includes/cotizaciones_busca.dat](http://www.bvl.com.pe/includes/cotizaciones_busca.dat)

这个 url 是您需要的数据，您可以通过 DOM 或其他方式加载它>

**提示**：使用 firebug 或任何开发工具控制台作为您选择的浏览器。每当你看到 ajax 请求时，看看它做了什么，它在哪里发出请求，以及什么是参数。检查存储函数的js文件的来源。看看它做了什么。在您的实例中`http://www.bvl.com.pe/js/cabecera_pie.js`，您将看到它根据用户单击的内容调用 ajax 请求。在 domload 等之前在 phpb 中复制它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:24:58.653

我认为只使用 PHP 是不可能的。

但是您可以在单独的进程中运行浏览器，让它加载页面并执行 javascript，然后您就可以获取结果。

[使用 PhantomJS - http://phantomjs.org/](http://phantomjs.org/)很容易做到这一点。

您将必须准备将加载页面的 javascript 文件，必要时模拟用户输入，查看 DOM 信息并使用 PhantomJS 文件 api 将结果保存在某处，然后在 PHP 中加载结果。您可以从示例开始 - 看看[https://github.com/ariya/phantomjs/blob/master/examples/pizza.js](https://github.com/ariya/phantomjs/blob/master/examples/pizza.js)

# objective-c - iOS UnitTests：无法链接到我的应用程序目标中的符号。怎么了？

> ID：13656186
> 
> 赞同：5
> 
> 时间：2012-12-01T03:53:10.663
> 
> 标签：objective-c, ios, xcode, unit-testing

设置：
Xcode 4.5.2 (4G2008a)
OS X 10.7.5

* * *

我有一个带有普通 iOS`Application`目标的 Xcode 项目。我正在尝试按照[Apple 文档的描述](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW1)`ApplicationTests`添加单元测试包（不是`LogicTests`包）。

我已仔细按照文档中提供的步骤进行操作，并重新检查了几次。但是，我无法构建 ApplicationTests 目标......当尝试链接到我的应用程序的一个类时，它失败并出现链接器错误。似乎设置目标的`Bundle Loader`构建设置`ApplicationTests`不起作用。但是 AFAICT，我已经正确设置了，如 Apple 文档所述。

* * *

我的复制步骤：

1.  按照[Apple 的文档设置 ApplicationTests 包](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW1)。
2.  在目标中编写一个单元测试方法，该方法从`ApplicationTests`目标中导入并练习一个类`Application`（例如`MyAppClass`）。
3.  在 Scheme 弹出窗口中选择 Application Target，在 run destination 弹出窗口中选择 iPhone 6.0 模拟器
4.  `Product`>`Test`

预期：
模拟器应该启动并且我`ApplicationTests`应该运行。

实际：
目标`ApplicationTests`无法构建并出现以下错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MyAppClass", referenced from:
      objc-class-ref in ApplicationTests.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

`MyAppClass`如果我在单元测试中删除对的引用，则`ApplicationTests`捆绑包将成功构建并运行。

同样，我似乎没有`Bundle Loader`在我的目标中正确设置构建设置`ApplicationTests`，但我已经重新检查过，我似乎正确地遵循了 Apple 的说明。

我做错了什么使我的`ApplicationTests`目标无法链接到我的`Application`目标中的符号？

* * *

**更新**`Application`：我还尝试使用和`ApplicationTests`目标从头开始创建新的虚拟项目。在虚拟项目中，我`MyAppClass`向目标添加了一个类`Application`，并且能够链接到它并成功运行`MyAppClass`在虚拟`ApplicationTests`目标中使用的单元测试。

所以我的虚拟项目中的应用程序测试有效。但它们在我的实际项目中不起作用。我已经比较了虚拟项目和真实项目中的目标，但找不到显着差异，这只会导致我的真实项目出现此问题。

我真正的项目很老（但也很复杂，所以很难重新开始）。我想知道项目的陈旧性是否阻止了这个相对较新的功能的工作？

在我看来，我的真实项目中的一个目标仍然存在构建设置问题。但我找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T00:24:31.237

相关问题： [使用静态库进行单元测试](https://stackoverflow.com/questions/10611988/unit-testing-in-with-a-static-library)

总之，无论使用 SenTest 还是 XCTest，您都需要确保

*   您的主项目设置为测试目标的依赖项

*   如果您的主要目标是静态库，则您的主要目标的库产品需要包含在测试目标的`link with binary libraries`构建阶段

缺少其中任何一个（或两者）都可能导致此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T10:45:54.190

您可以尝试使用 Xcode 5.0 打开项目吗？在项目/目标设置中选择单元测试目标，打开“常规”选项卡并检查所选的“目标”是否是您的主要应用目标。

这就是 Xcode 获取链接到单元测试包加载器的信息的地方。

# oracle - 在 oracle 中设置默认的 unix 日期时间

> ID：13656192
> 
> 赞同：-1
> 
> 时间：2012-12-01T03:55:09.497
> 
> 标签：oracle, oracle11g

我想在数据库表中插入一个默认的 Unix 日期时间。但我不能插入这个。请帮我设置默认的 Unix 日期时间。我是 Oracle 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:59:07.083

你在寻找`SYSTIMESTAMP`例如下面吗？

```
 INSERT INT TABLE(A, B, DATETIMECOL) 
  VALUES ('a', 'b', SYSTIMESTAMP); 
```

这将在数​​据库中插入服务器的当前时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:08:44.557

`SYSDATE`以 Oracle 形式返回当前日期和时间`DATE`（Oracle`DATE`始终包含日期和时间组件到秒）。

`SYSTIMESTAMP`以 Oracle 形式返回当前日期和时间，`TIMESTAMP WITH TIME ZONE`其中包括小数秒和时区。

如果您想插入`NUMBER`表示自 1970 年 1 月 1 日以来的秒数（我假设这是您所说的“Unix 日期时间格式”的意思，那将是`(SYSDATE - date '1970-01-01') * 60 * 60 * 24`.

# iphone - CGRectIntersectsRect 碰撞计数过多

> ID：13656195
> 
> 赞同：0
> 
> 时间：2012-12-01T03:55:55.360
> 
> 标签：iphone, objective-c, xcode

我有一个类似“雨”的动画，从屏幕顶部移动到底部（几个图像从顶部不断下降）。我还有一个由底部手指控制的篮子图像。我希望应用程序计算任何掉落的图像和篮子之间的“碰撞”数量，如果它们发生碰撞，则删除图像。

我使用了两个计时器：一个用于不断地从顶部放下图像。我将这些图像中的每一个都放在一个数组中。然后我有另一个计时器，每 0.001 次检查一次碰撞。

每次两个物体碰撞时，我都能得到计数，但问题是，计数太多了！例如，每次视觉碰撞都会计算 985 次碰撞。我在我的代码中做错了什么？：计时器：

```
[NSTimer scheduledTimerWithTimeInterval:(0.001) target:self selector:@selector(onCollisionCheckTimer) userInfo:nil repeats:YES]; 
```

碰撞检查器：

```
- (void)onCollisionCheckTimer{
    for (x = 0; x<100; x++){
        CALayer *layer = appleView[x].layer.presentationLayer;
        if(CGRectIntersectsRect(basketView.frame, layer.frame)) {
            collision++;
            printf("%i\n", collision);
            [appleView[x] removeFromSuperview];
        }
    }
} 
```

`printf("%i", collision);`每次碰撞都会输出数百个数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:04:56.567

首先，您的碰撞测试计时器持续时间太短了。实际上，主运行循环每秒只会运行大约 60 次，因此您应该使用更接近 0.016 的持续时间。您将永远不会得到每毫秒触发的预定计时器。

其次，即使从父视图中删除视图，视图仍保留其图层属性。所以可能发生的情况是，即使从超级视图中删除了下落的对象，您仍然在`appleView`集合中迭代它们，并且它们的属性使得它们仍然与篮子视图相交。

One way to fix this would be to check the `superview` property of each apple view before you check for collisions. Only if it's non-nil do you need to do the collision test.

# ios - 从核心数据中提取 NSDate 并在 IOS 中显示它

> ID：13656203
> 
> 赞同：1
> 
> 时间：2012-12-01T03:57:09.237
> 
> 标签：ios, objective-c, core-data

我正在制作一个 iPhone 应用程序，我在核心数据中有一个 NSDate，我正在尝试显示它，但我不断收到此错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSDate isEqualToString:]：无法识别的选择器发送到实例 0x81b7840”。

我下面的代码是从字典项中提取数据。我怎样才能让它工作？

```
self.lblTheDate.text = [self.item valueForKey:@"MyDate"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:39:09.847

使用类似于以下内容的方法将 NSDate（在您的字典中）转换为 NSString，但请选择您需要的正确日期和时间样式：

```
self.lblTheDate.text = [NSDateFormatter localizedStringFromDate:[self.item valueForKey:@"MyDate"] dateStyle:NSDateFormatterMediumStyle timeStyle:NSDateFormatterNoStyle] 
```

日期和时间样式有多种选择：

```
NSDateFormatterNoStyle     : Specifies no style,
NSDateFormatterShortStyle  : Specifies a short style, typically numeric only, such as “11/23/37” or “3:30pm”,
NSDateFormatterMediumStyle : Specifies a medium style, typically with abbreviated text, such as “Nov 23, 1937”,
NSDateFormatterLongStyle   : Specifies a long style, typically with full text, such as “November 23, 1937” or “3:30:32pm”,
NSDateFormatterFullStyle   : Specifies a full style with complete details, such as “Tuesday, April 12, 1952 AD” or “3:30:42pm PST” 
```

请注意，这些日期和时间样式的格式并不准确，因为它们取决于区域设置、用户首选项设置和操作系统版本。

类参考： [NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:07:11.720

似乎您获得了一个 NSDate 对象并希望将其分配给一个需要 NSString 作为参数的文本字段。
您必须首先将日期转换为 NSstring，例如使用 NSDateFormat

# unit-testing - 使用多部分请求测试 Grails 控制器

> ID：13656206
> 
> 赞同：1
> 
> 时间：2012-12-01T03:58:00.873
> 
> 标签：unit-testing, grails, groovy

我在 Grails 中编写了一个控制器，它接受多部分请求（xml+binary file1+binary file2+...）。如何对该控制器进行单元测试？如何在单元测试中设置请求的内容？任何示例代码表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-04T16:19:19.970

我正在使用 Grails 2.4，您可以在单元测试中简单地使用`GrailsMockMultipartFile`和`request.addFile`方法。

此代码适用于带有 Spock 测试框架的 Grails 2.4.4：

控制器端：

```
class FileUploadController {

    def upload() {
        def multipartFile = request.getFile('requestParamName')
        if (multipartFile.empty) {
            flash.message = 'Error: file cannot be empty'
            render(view: 'upload')
            return
        }

        // do something now with your file
    }
} 
```

单元测试端：

```
import grails.test.mixin.TestFor
import org.codehaus.groovy.grails.plugins.testing.GrailsMockMultipartFile
import spock.lang.Specification

@TestFor(FileUploadController)
class FileUploadControllerSpec extends Specification {

    void "upload should add flash error message if empty file in request"() {
        given:
        def multipartFile = new GrailsMockMultipartFile('requestParamName', 'someExcelFile.xls', 'application/vnd.ms-excel', new byte[0])
        request.addFile(multipartFile)

        when:
        controller.upload()

        then:
        assertEquals('Error: file cannot be empty', flash.message)
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T16:11:56.780

我们正在使用 Spock，我们的代码如下所示：

```
def mockFile = new MockMultipartFile(Constants.PARAM_DA_FILE, 'filename.xls', 'application/vnd.ms-
excel', articleFile.bytes)
params.(Constants.PARAM_DA_FILE) = mockFile
controller.request.addFile(mockFile) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T19:42:40.383

我从：[http](http://roshandawrani.wordpress.com/2011/02/03/grails-mock-testing-a-file-upload/) ://roshandawrani.wordpress.com/2011/02/03/grails-mock-testing-a-file-upload/ 得到它，它正在工作。这是示例：

```
import org.springframework.mock.web.MockMultipartFile
import org.springframework.mock.web.MockMultipartHttpServletRequest

class FileUploadControllerTests extends grails.test.ControllerUnitTestCase
{
    void testFileUpload()

    {

        def imgContentType = 'image/jpeg'

        def imgContentBytes = '123' as byte[]
        ....
        ....

        controller.metaClass.request = new MockMultipartHttpServletRequest()
        controller.request.addFile(
        new MockMultipartFile('image', 'myImage.jpg', imgContentType, imgContentBytes)       )
        ....
        controller.save()
        assertEquals HttpServletResponse.SC_OK, controller.response.status
        ....

    }
} 
```

# file - 如何使用 sed 用字符串替换 csv 文件中的空白字段

> ID：13656215
> 
> 赞同：1
> 
> 时间：2012-12-01T03:59:36.840
> 
> 标签：file, bash, csv, sed

我目前正在处理一个处理 csv 文件的脚本，并且我正在尝试使脚本用字符串“data_n/a”替换 csv 文件中的所有空白字段。最初我以为我可以简单地使用以下内容来完成此任务：

```
sed -e "s/hi/data_n\/a/g" 
```

但不幸的是，这会遗漏任何可能出现在 csv 文件行开头或结尾的空字段。我不知道该怎么做，所以我想知道是否有人可以帮助我朝着正确的方向前进或就我应该做什么提供建议？谢谢！

这里也是 csv 文件的示例：

```
,,6004,,,15:00.00,30004,Colleen,2010-02-10
2,Closed,6005,,,30:00.00,30005,Rich,2010-02-11
7,Closed,6001,,,30:00.00,10001,Mary Beth,2010-02-11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:52:14.457

使用**perl**正则表达式，

```
 perl -pe 's;^,|,$|(?<=,),;data_n\/a,;g' input.cvs 
```

使用**sed**，

```
$ sed -r 's;^,|,$;data_n\/a,;g
:l
s;,,;,data_n\/a,;g
t l' input.cvs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T04:50:22.077

如果**awk**是一个选项，您可以尝试以下方法：

```
awk -F, '{for(i=1;i<=NF;++i){if($i==""){printf "data_n/a"}else{printf $i} if(i<NF)printf ","} printf "\n"}' infile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:07:44.553

^ 表示行首，$ 表示行尾

```
sed "s/,,/data_n\/a,/g;s/^,/data_n\/a,/;s/,$/,data_n\/a/" file >outfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T08:54:31.470

这可能对您有用（GNU sed）：

```
sed -r ':a;s/(^,)|(,)(,)|(,)$/\2\4data_n\/a\1\3/g;ta' file 
```

# android - 如何在处理中提高 Android 模式下的帧速率？

> ID：13656217
> 
> 赞同：1
> 
> 时间：2012-12-01T03:59:45.187
> 
> 标签：android, processing

我正在使用来自 processing.js.com 网站的开源代码，它有 frame rate() 方法，

当我更改帧速率时，它会在 Java 和 Javascript 模式下显示移动形状的变化，但在 Android 模式下却没有，为什么会发生这种情况？我应该如何提高帧速率以加快可视化速度？

```
 // Set number of circles
  int count = 25;
  // Set maximum and minimum circle size
  int maxSize = 100;
  int minSize = 20;
  // Build float array to store circle properties
  float[][] e = new float[count][5];
  // Set size of dot in circle center
  float ds=2;
  // Selected mode switch
  int sel = 0;
  // Set drag switch to false
  boolean dragging=false;
  // If use drags mouse...
  void mouseDragged(){
    // Set drag switch to true
    dragging=true;
  }
  // If user releases mouse...
  void mouseReleased(){
    // ..user is no-longer dragging
    dragging=false;
  }

  // Set up canvas
  void setup(){
    // Frame rate
    frameRate(130);
    // Size of canvas (width,height)
    size(600,475);
    // Stroke/line/border thickness
    strokeWeight(1);
    // Initiate array with random values for circles
    for(int j=0;j< count;j++){
      e[j][0]=random(width); // X 
      e[j][1]=random(height); // Y
      e[j][2]=random(minSize,maxSize); // Radius        
      e[j][3]=random(-.5,.5); // X Speed
      e[j][4]=random(-.5,.5); // Y Speed    
    }
  }

  // Begin main draw loop (called 25 times per second)
  void draw(){
    // Fill background black
    background(0);
    // Begin looping through circle array
    for (int j=0;j< count;j++){
    // Disable shape stroke/border
    noStroke();
    // Cache diameter and radius of current circle
    float radi=e[j][2];
    float diam=radi/2;
    // If the cursor is within 2x the radius of current circle...
    if( dist(e[j][0],e[j][1],mouseX,mouseY) < radi ){
    // Change fill color to green.
    fill(64,187,128,100);
    // Remember user has circle "selected"  
    sel=1;
    // If user has mouse down and is moving...
    if (dragging){
      // Move circle to circle position
      e[j][0]=mouseX;
      e[j][1]=mouseY;
      }
    } else {
      // Keep fill color blue
      fill(64,128,187,100);
      // User has nothing "selected"
      sel=0;
    }
    // Draw circle
    ellipse(e[j][0],e[j][1],radi,radi);
    // Move circle
    e[j][0]+=e[j][3];
    e[j][1]+=e[j][4];

    /* Wrap edges of canvas so circles leave the top
    and re-enter the bottom, etc... */ 
    if( e[j][0] < -diam      ){ e[j][0] = width+diam;  } 
    if( e[j][0] > width+diam ){ e[j][0] = -diam;       }
    if( e[j][1] < 0-diam     ){ e[j][1] = height+diam; }
    if( e[j][1] > height+diam){ e[j][1] = -diam;       }

    // If current circle is selected...
    if (sel==1) {
      // Set fill color of center dot to white..
      fill(255,255,255,255);
      // ..and set stroke color of line to green.
      stroke(128,255,0,100);      
    } else {            
      // otherwise set center dot color to black.. 
      fill(0,0,0,255);
      // and set line color to turquoise.
      stroke(64,128,128,255);      
    }

    // Loop through all circles
    for(int k=0;k< count;k++){
      // If the circles are close...
      if( dist(e[j][0],e[j][1],e[k][0],e[k][1]) < radi){
        // Stroke a line from current circle to adjacent circle
        line(e[j][0],e[j][1],e[k][0],e[k][1]);
      }
    }
    // Turn off stroke/border
    noStroke();      
    // Draw dot in center of circle
    rect(e[j][0]-ds,e[j][1]-ds,ds*2,ds*2);
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:07:13.520

要更改草图中圆圈的速度，只需更改速度值就更容易了。

在您的 setup() 函数中，您设置以下内容：

```
 e[j][3] = random(-.5, .5); // X Speed
 e[j][4] = random(-.5, .5); // Y Speed 
```

这些值稍后用于在 draw() 函数中移动圆圈：

```
// Move circle
e[j][0] += e[j][3];
e[j][1] += e[j][4]; 
```

您可以简单地更改在 setup() 函数中设置的`e[j][3]`和`e[j][4]`值，或者您可以将它们替换为在代码开头在全局范围内分配的变量。以下是我要做的快速修改。记下`float speed = 0.5;`代码开头附近的变量集。如果使该值更大，则圆圈的移动会更快。

```
// Set number of circles
int count = 25;
// Set maximum and minimum circle size
int maxSize = 100;
int minSize = 20;
// Set speed
float speed = 0.5;
// Build float array to store circle properties
float[][] e = new float[count][5];
// Set size of dot in circle center
float ds = 2;
// Selected mode switch
int sel = 0;
// Set drag switch to false
boolean dragging = false;

// If use drags mouse...
void mouseDragged() {
  // Set drag switch to true
  dragging = true;
}

// If user releases mouse...
void mouseReleased() {
  // ..user is no-longer dragging
  dragging = false;
}

// Set up canvas
void setup() {
  // Size of canvas (width,height)
  size(600, 475);
  // Stroke/line/border thickness
  strokeWeight(1);
  // Initiate array with random values for circles
  for (int j = 0; j < count; j++) {
    e[j][0] = random(width); // X 
    e[j][1] = random(height); // Y
    e[j][2] = random(minSize, maxSize); // Radius
    e[j][3] = random(-speed, speed); // X Speed
    e[j][4] = random(-speed, speed); // Y Speed
  }
}

// Begin main draw loop (called 25 times per second)
void draw() {
  // Fill background black
  background(0);
  // Begin looping through circle array
  for (int j = 0; j < count; j++) {
    // Disable shape stroke/border
    noStroke();
    // Cache diameter and radius of current circle
    float radi = e[j][2];
    float diam = radi / 2;
    // If the cursor is within 2x the radius of current circle...
    if (dist(e[j][0], e[j][1], mouseX, mouseY) < radi) {
      // Change fill color to green.
      fill(64, 187, 128, 100);
      // Remember user has circle "selected"
      sel = 1;
      // If user has mouse down and is moving...
      if (dragging) {
        // Move circle to circle position
        e[j][0] = mouseX;
        e[j][1] = mouseY;
      }
    } else {
      // Keep fill color blue
      fill(64, 128, 187, 100);
      // User has nothing "selected"
      sel = 0;
    }
    // Draw circle
    ellipse(e[j][0], e[j][1], radi, radi);
    // Move circle
    e[j][0] += e[j][3];
    e[j][1] += e[j][4];

    /* Wrap edges of canvas so circles leave the top
    and re-enter the bottom, etc... */
    if (e[j][0] < -diam) {
      e[j][0] = width + diam;
    }
    if (e[j][0] > width + diam) {
      e[j][0] = -diam;
    }
    if (e[j][1] < 0 - diam) {
      e[j][1] = height + diam;
    }
    if (e[j][1] > height + diam) {
      e[j][1] = -diam;
    }

    // If current circle is selected...
    if (sel == 1) {
      // Set fill color of center dot to white..
      fill(255, 255, 255, 255);
      // ..and set stroke color of line to green.
      stroke(128, 255, 0, 100);
    } else {
      // otherwise set center dot color to black.. 
      fill(0, 0, 0, 255);
      // and set line color to turquoise.
      stroke(64, 128, 128, 255);
    }

    // Loop through all circles
    for (int k = 0; k < count; k++) {
      // If the circles are close...
      if (dist(e[j][0], e[j][1], e[k][0], e[k][1]) < radi) {
        // Stroke a line from current circle to adjacent circle
        line(e[j][0], e[j][1], e[k][0], e[k][1]);
      }
    }
    // Turn off stroke/border
    noStroke();
    // Draw dot in center of circle
    rect(e[j][0] - ds, e[j][1] - ds, ds * 2, ds * 2);
  }
} 
```

# c# - 如何下推验证消息？

> ID：13656218
> 
> 赞同：0
> 
> 时间：2012-12-01T03:59:59.607
> 
> 标签：c#, wpf, validation, xaml, textbox

我遵循[了本](http://www.codeproject.com/Articles/321745/WPF-Validation)教程并设法获得了验证消息。问题是它覆盖了上面的元素。我知道有一种使用边距的解决方法，但我想知道`TextBox`如果有错误消息是否可以向下推（或缩小它）。

![在此处输入图像描述](../Images/c8dc3d8872d5dded02b7e093d0511a89.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:13:30.743

仅当出现错误时，您才能使用 Validation.HasError 触发器添加所需的上边距。这基本上会使 TextBox 缩小，以便为错误消息腾出空间。

# android - 更改视图背景时的Android ClassNotFound异常

> ID：13656221
> 
> 赞同：1
> 
> 时间：2012-12-01T04:01:16.327
> 
> 标签：android, exception

对于我的活动，我创建了一个新视图并将其保存在公共静态字段中。然后我在活动中使用 setContentView 设置视图。但是，每当我尝试从另一个类更改视图的颜色时，都会出现如下异常：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.TwinBlade.PicturePassword/com.TwinBlade.PicturePassword.LockActivity}: java.lang.ClassNotFoundException: com.TwinBlade.PicturePassword.LockActivity
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
at android.app.ActivityThread.access$600(ActivityThread.java:139)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4945)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.TwinBlade.PicturePassword.LockActivity
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2101)
    ... 11 more

java.lang.ClassNotFoundException: com.TwinBlade.PicturePassword.LockActivity
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2101)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
    at android.app.ActivityThread.access$600(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:154)
    at android.app.ActivityThread.main(ActivityThread.java:4945)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

更新：

这是我在活动中所做的

```
public static View mView;

public void onCreate(Bundle savedInstanceState) {
    mView = new LinearLayout(this);
    mView.setBackgroundColor(Color.argb(0, 0, 0, 0));
    setContentView(mView);
} 
```

并从另一个类更改视图的颜色：

```
LockActivity.mView.setBackgroundColor(Color.argb(255, 0, 0, 0)); 
```

该活动已添加到清单中并且可以启动。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:08:13.667

您的`LockActivity`. 确保您已在清单文件中添加了该条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:14:26.757

`context.findViewById();`上下文是您的活动，或者您可以尝试

```
View view = (View) =LayoutInflater.from(activity.this).inflate(your layout,null) 
```

# c# - 连接两个对象的依赖注入

> ID：13656223
> 
> 赞同：2
> 
> 时间：2012-12-01T04:01:23.933
> 
> 标签：c#, dependency-injection, castle-windsor

现在在创建时`Engine`，它需要一个新`Compoment`的，并将`Engine`“this”本身传递给`Component`.

在创建时`Component`，它需要知道它的父级并通过调用它的函数`Engine`来与它集成。`IntegrateComponent()`

这是一种循环引用的情况。我如何在 DI 中做到这一点？（就我而言，温莎城堡）

```
public class Engine : IEngine {
  private IComponent _someComponent;
  public Engine() {
    _component = new Component(this);
  }
  public void IntegrateComponent() {
    //init component...
  }
}

public class Component : IComponent {
  private readonly IEngine _engine;
  public Component(IEngine engine) {
    _engine = engine;
    _engine.IntegrateComponent();
  }
}

static void Main() {
  var engine = new Engine();
} 
```

编辑 - - - - - - - - - - - - - - - - - - - -

我想要类似...

```
Register<IComponent>().ImplementedBy<Component>(); 
Register<IEngine>().ImplementedBy<Engine>(); 
---> Resolve<IEngine>(); ... 
```

但是我要如何告诉 DI 这个引擎和这个组件相互引用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:00:52.443

首先，您必须以没有循环引用的方式进行设计。如果没有，使用属性注入，您可以打破这个

```
var engine = new Engine();
engine.Component = new Component(engine); 
```

这是基于 Mark Seemann 的优秀著作 - .Net 中的依赖注入。

已经有一个线程：[看似循环依赖导致Castle Windsor出现问题](https://stackoverflow.com/questions/7715702/seemingly-circular-dependencies-causing-issues-with-castle-windsor)

# jquery - 遍历不工作在 div 内的表

> ID：13656224
> 
> 赞同：0
> 
> 时间：2012-12-01T04:01:31.990
> 
> 标签：jquery, ajax

我试图使用 .children() 清空 div 中的表，然后附加 ajax 的新结果，但我的遍历不起作用。我的 tr 是使用带有另一个函数的 ajax 动态创建的，以便我在 click 的成功 ajax 中调用该函数以再次重新加载请求，使其像再次重新加载 div 一样。请帮助伙计们..

html

```
<div id="curr-elem">
  <div class="box-header">
     <h3>Elementary Subject</h3>
  </div>
  <div id="curr-elem-content">
      <table id="curr-elem-tble">

        <tr>
          <td>
            <lable>Subject:<input type="text" readonly="readonly" value="a" rel="1" name="subject[0]"></lable>
          </td>
          <td>
             <input id="activate[0]" class="button active modal2 inactiveButton" type="button" disabled="disabled" value="Apply" name="active" rel="#loading-window">
             <input id="inactivate[0]" class="button inactive modal2 " type="button" value="Remove from list" name="active" rel="#loading-window">
          </td>
       </tr>
       <tr>
          <td>
            <lable>Subject:<input type="text" readonly="readonly" value="ssssss" rel="8" name="subject[1]"></lable>
          </td>
          <td>
             <input id="activate[1]" class="button active modal2 inactiveButton" type="button" disabled="disabled" value="Apply" name="active" rel="#loading-window">
             <input id="inactivate[1]" class="button inactive modal2 " type="button" value="Remove from list" name="active" rel="#loading-window">
          </td>
        </tr>
        <tr>
          <td>
            <lable>Subject:<input type="text" readonly="readonly" value="alvin" rel="9" name="subject[2]"></lable>
          </td>
          <td>
            <input id="activate[2]" class="button active modal2 inactiveButton" type="button" disabled="disabled" value="Apply" name="active" rel="#loading-window">
            <input id="inactivate[2]" class="button inactive modal2 " type="button" value="Remove from list" name="active" rel="#loading-window">
          </td>
        </tr>
        <tr>
          <td>
            <lable>Subject:<input type="text" readonly="readonly" value="ronniel" rel="10" name="subject[3]"></lable>
           </td>
           <td>
             <input id="activate[3]" class="button active modal2 inactiveButton" type="button" disabled="disabled" value="Apply" name="active" rel="#loading-window">
             <input id="inactivate[3]" class="button inactive modal2 " type="button" value="Remove from list" name="active" rel="#loading-window">
           </td>
        </tr>

  </table>
 </div>
</div> 
```

阿贾克斯：

```
 $('.active').live('click',function (){

            var prev = $(this).parent().prev().find('input[type=text]');
              var valText = $(prev).val();

              var relVal = $(this).parent().prev().find('input[type=text]').attr('rel');

                 var div = $(this).parent().parent().parent().parent().parent().attr('id');

               $.ajax({
                          type:'POST',
                          url:'add_subject.php',
                     dataType:'json',
                         data:{'func_numbr':'7','subjct_name':valText,'subjct_id':relVal},
                      success:function (data){
                        $('#mask2').hide();

                        $('#loading-window').hide();

                        $("[id*="+div+"]").children().children().find("table").html("");

                        load_elementary();

                      }     
               });

       });

function load_elementary(){ 
       var html;

                $.ajax({
                          type:'POST',
                          url:'add_subject.php',
                     dataType:'json',
                         data:{'func_numbr':'2'},
                      success:function (data){
                        var activator;

                        var disabler;
                         var counter_sub = 0 ;

                         $.each(data, function(i, item) {

                          if(data[i].subj_status == "0"){

                            classToAddInactve = "inactiveButton";
                            DisableInactve = "disabled=\"disabled\""
                            classToAddActve   = "";
                            DisableActve = ""
                           }

                           else{

                            classToAddInactve = ""
                             DisableInactve = ""
                             classToAddActve   = "inactiveButton";
                             DisableActve = "disabled=\"disabled\""
                           }

                          html = "<tr>";

                          html += "<td><lable>Subject: </label><input type='text' name='subject["+counter_sub+"]' rel='"+data[i].subj_id+"' value='"+data[i].subj_name+"' readonly='readonly'></td>";
                          html += "<td><input type='button' rel='#loading-window' id='activate["+counter_sub+"]' name='active' class='button active modal2 "+classToAddActve+"' value='Apply' "+DisableActve+"> ";
                          html += "<input type='button' rel='#loading-window' id='inactivate["+counter_sub+"]' name='active' class='button inactive modal2 "+classToAddInactve+"' value='Remove from list' "+DisableInactve+"></td>";
                          html += "</tr>";

                 $('#curr-elem-tble').append(html);

                 counter_sub = counter_sub +1;
                });
                      }     
               });
} 
```

加载元素（）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:56:52.837

对您的 HTML 标记的一些评论。

1.  假设您可以控制标记，通过向包含的 div 和动态表添加类来让您的生活更轻松。
2.  您`<label>`当前将元素定义为`<lable>`元素，从长远来看可能会导致问题（我冒昧地调用它们`<label>`）。
3.  `name`每个按钮的属性值都相同吗？
4.  说到`name`属性...除非您实际上要使用 a`<input type="submit">`或 a发布表单`.submit()`，否则您最好不要使用该`name`属性。它在 JavaScript 中几乎没有用（因为有更有效的方法可以在不使用它的情况下编写代码，除非你有单选按钮......那么这完全是另一回事）。

HTML：

```
<div id="curr-elem" class="container">
    <div class="box-header">
        <h3>Elementary Subject</h3>
    </div>
    <div id="curr-elem-content">
        <table id="curr-elem-tble" class="dynamic-table">
            <tr>
                <td>
                    <label for="subject_0">Subject:</label>
                    <input type="text" id="subject_0" name="subject[0]" readonly="readonly" value="a" rel="1">
                </td>
                <td>
                    <input type="button" id="activate_0" name="active" class="button active modal2 inactiveButton" disabled="disabled" value="Apply" rel="#loading-window">
                    <input type="button" id="inactivate_0" name="active" class="button inactive modal2" value="Remove from list" rel="#loading-window">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="subject_1">Subject:</label>
                    <input type="text" id="subject_1" name="subject[1]" readonly="readonly" value="ssssss" rel="8">
                </td>
                <td>
                    <input type="button" id="activate_1" name="active" class="button active modal2 inactiveButton" disabled="disabled" value="Apply" rel="#loading-window">
                    <input type="button" id="inactivate_1" name="active" class="button inactive modal2" value="Remove from list" rel="#loading-window">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="subject_2">Subject:</label>
                    <input type="text" id="subject_2" name="subject[2]" readonly="readonly" value="alvin" rel="9">
                </td>
                <td>
                    <input type="button" id="activate_2" name="active" class="button active modal2 inactiveButton" disabled="disabled" value="Apply" rel="#loading-window">
                    <input type="button" id="inactivate_2" name="active" class="button inactive modal2" value="Remove from list" rel="#loading-window">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="subject_3">Subject:</label>
                    <input type="text" id="subject_3" name="subject[3]" readonly="readonly" value="ronniel" rel="10">
                </td>
                <td>
                    <input type="button" id="activate_3" name="active" class="button active modal2 inactiveButton" disabled="disabled" value="Apply" rel="#loading-window">
                    <input type="button" id="inactivate_3" name="active" class="button inactive modal2" value="Remove from list" rel="#loading-window">
                </td>
            </tr>
        </table>
    </div>
</div> 
```

关于您的 JavaScript：

1.  `.live()` [自 jQuery 1.7 起已弃用](http://api.jquery.com/live/)。`.on()`如果您使用的是 1.7 或更高版本，则应该使用。如果您使用的是较低版本，则应`.delegate()`改为使用。不使用的[原因](https://stackoverflow.com/questions/8042576/whats-the-difference-between-jquery-live-and-on)有很多`.live()`。
2.  一般来说，在使用函数之前定义函数是一种很好的做法。由于您在这里使用 AJAX，这没什么大不了的，但您可能希望开始编写这样的代码。
3.  一般来说，您应该将 DOM 元素构建为实际元素，然后附加它们，而不是手动构建 HTML 字符串，然后使用`.innerHTML`属性或 jQuery`.html()`方法。字符串连接的长链变得混乱，很容易出错（而使用 jQuery，构建实际元素相当简单）。

JavaScript：

```
//define load_elementary function
var load_elementary = function load_elementary(table) {
    $.ajax({
        "type": "POST",
        "url": "add_subject.php",
        "dataType": "json",
        "data": {
            "func_numbr": "2"
        },
        "success": function (data, textStatus, jqXHR) {
            var tbody = $('<tbody />'),
                tr = $('<tr />'),
                td = $('<td />'),
                counter_sub = 0;
            $.each(data, function (i, item) {
                var label = $('<label />'),
                    textbox = $('<input />').attr('type', 'text').prop('readonly', true),
                    button = $('<input />').attr('type', 'button'),
                    row = tr.clone(),
                    cell = td.clone(),
                    subjIsNotActive = data[i].subj_status !== "0",
                    subjIsActive = !subjIsNotActive;
                //make first cell
                cell.append(label.attr('for', 'subject_' + counter_sub).text('Subject: '));
                cell.append(textbox.attr({
                    "id": "subject_" + counter_sub,
                    "name": "subject[" + counter_sub + "]",
                    "rel": data[i].subj_id
                }).val(data[i].subj_name));
                //append first cell
                row.append(cell);
                //make second cell
                cell = td.clone();
                cell.append(button.addClass('button active modal2').toggleClass('inactiveButton', subjIsNotActive).prop('disabled', subjIsNotActive).attr({
                    "id": "activate_" + counter_sub,
                    "name": "active",
                    "rel": "#loading-window"
                }).val('Apply'));
                cell.append(button.addClass('button inactive modal2').toggleClass('inactiveButton', subjIsActive).prop('disabled', subjIsActive).attr({
                    "id": "inactivate_" + counter_sub,
                    "name": "active",
                    "rel": "#loading-window"
                }).val('Remove from list'));
                //append second cell
                row.append(cell);
                //append row to tbody
                tbody.append(row);
                counter_sub += 1;
            });
            //empty current contents and then append tbody to table
            table.empty().append(tbody);
        }
    });
};
//add click handlers
$('.active').on('click', function () {
    var self = $(this),
        subj = self.parent().prev().find('input[type=text]'),
        text = subj.val(),
        rel = subj.attr('rel'),
        container = self.parents('div.container');
    $.ajax({
        "type": "POST",
        "url": "add_subject.php",
        "dataType": 'json',
        "data": {
            "func_numbr": "7",
            "subjct_name": text,
            "subjct_id": rel
        },
        "success": function (data, textStatus, jqXHR) {
            var table = container.find('table.dynamic-table');
            $('#mask2').hide();
            $('#loading-window').hide();
            load_elementary(table);
        }
    });
}); 
```

# c++ - 集合的 C++ mmap

> ID：13656226
> 
> 赞同：1
> 
> 时间：2012-12-01T04:01:49.570
> 
> 标签：c++, multithreading, set, fork, mmap

我有一个使用 fork() 的 C++ 程序，但我需要能够在父进程及其子进程之间共享一个可以读写的对象。从我的在线阅读来看，似乎 mmap 是这样做的方法。这是我所拥有的：

```
enum messageType {New = 0, Old = 1, No_Message = 2};

typedef struct {
    enum messageType type;
    unsigned int senderID;
    char message[100];
} StoredMessageData;

struct StoredMessage {
    unsigned int recipientID;
    vector<StoredMessageData> messages;

    StoredMessage(const unsigned int& intRecipient = 0, const vector<StoredMessageData>& data = vector<StoredMessageData>())
    : recipientID(intRecipient), messages(data)
    {
        messages.reserve(10);
    }

    bool operator<(const StoredMessage& compareTo) const
    {
        return recipientID < compareTo.recipientID;
    }

    bool operator==(const StoredMessage& compareTo) const
    {
        return recipientID == compareTo.recipientID;
    }
}; 
```

然后主要：

```
set<StoredMessage> * msgs;
msgs  = mmap(NULL, sizeof(set<StoredMessage>), PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANON, -1, 0); 
```

后来我主要使用fork（）。

我的问题有两部分：

1) 一个集合的大小是可变的，我已经知道在每个分叉的进程中，我希望能够添加一个 StoredMessage 并将一个 StoredMessageData 添加到 StoredMessage 中的向量。但是，我不确定 mmap 可以处理这个......它不只是为基础对象分配足够的空间吗？我可以让它分配足够的空间让我进行这些添加吗？

2）来自 main 的上述代码当前正在引发错误：

错误：从 âvoid*â 到 âstd::set、std::allocator >*â 的无效转换

有谁知道这意味着什么/如何解决它？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:31:02.253

STL 类 std::vector<> 和 std::set<> 使用 operator new() 分配内存。运算符 new() 从进程堆中分配内存。堆不在共享内存中，因此一个进程分配的任何内容都不能被另一个进程访问。

你有几个选择。首先是创建一个从共享内存分配的 std::allocator<> 。

其次（也是我的偏好）是不要在共享内存中使用任何使用指针的对象。这几乎消除了 STL 中的任何内容。

您还需要一个互斥锁来控制对共享数据的访问，这样两个进程就不会破坏您的共享数据。

# xcode - Xcode：如何在 UIImageView 旋转后获取 UIImage？

> ID：13656230
> 
> 赞同：1
> 
> 时间：2012-12-01T04:02:21.047
> 
> 标签：xcode, uiimageview, rotation, uiimage

我使用下面的代码来旋转 UIImageView（只旋转 90 度）。

```
degrees = 0;

- (IBAction)processRotate:(id)sender {

     float radians = degrees / 57.2958;

     imageView.center = CGPointMake(160, 180);

     imageView.transform = CGAffineTransformMakeRotation(radians);

     degrees += 90;

     if(degrees == 360){

         degrees = 0;
     }  

} 
```

如何使用当前的 imageView 获取 UIImage？任何帮助都非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T23:30:38.593

我假设您想在对 UIImageView 应用转换后从 UIImageView 获得旋转的 UIImage？那么这将不起作用，因为您将转换应用于 UIImageView 而不是 UIImage。如果你想旋转 UIImage 你应该做这样的[事情](https://stackoverflow.com/questions/1315251/how-to-rotate-a-uiimage-90-degrees)。

# java - 为什么控制台只有这句话？Hibernate：从客户中选择 max(id)

> ID：13656233
> 
> 赞同：0
> 
> 时间：2012-12-01T04:02:38.607
> 
> 标签：java, hibernate

我是休眠的新手，想编写一个休眠的一对多项目。我可以编译成功，但是控制台只有一句话：

```
Hibernate: select max(id) from customers. 
```

你能帮我找出错误吗？

1）这是`Customer.java`：

```
 package com.test;

    import java.util.Set;

    public class Customer 
    {

        private Long id;
        private String name;
        private Set orders;

        public Customer(String name,Set orders)
        {
            this.name=name;
            this.orders=orders;
        }
        public Customer(Set orders)
        {
            this.orders=orders;
        }
        public Customer(){}
        public Long getId() {
            return id;
        }
        public void setId(Long id) {
            this.id = id;
        }
        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public Set getOrders() {
            return orders;
        }
        public void setOrders(Set orders) {
            this.orders = orders;
        }

    } 
```

2）这是`Order.java`：

```
 package com.test;

    public class Order 
    {
    private Long id;
    private String orderNumber;
    private Customer customer;

    public Order(String orderNumber,Customer customer){
        this.orderNumber=orderNumber;
        this.customer=customer;
    }
    public Order(){}
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public String getOrderNumber() {
        return orderNumber;
    }
    public void setOrderNumber(String orderNumber) {
        this.orderNumber = orderNumber;
    }
    public Customer getCustomer() {
        return customer;
    }
    public void setCustomer(Customer customer) {
        this.customer = customer;
    }
    } 
```

3）这是`Customer.hbm.xml`：

```
 <?xml version="1.0"?>
    <!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

    <hibernate-mapping>

        <class name="com.test.Customer" table="customers">

            <id name="id" column="id" type="long">
                <generator class="increment"> 
                </generator>
            </id>

            <property name="name" type="string">
                <column name="name" length="15"></column>
            </property>     

            <set name="orders" cascade="save-update" inverse="true">
                <key column="customer_id"></key> 
                <one-to-many class="com.test.Order"/>
            </set>

        </class>

    </hibernate-mapping> 
```

4）这是`Order.hbm.xml`：

```
 <?xml version="1.0"?>
    <!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

    <hibernate-mapping>

        <class name="com.test.Order" table="orders">

            <id name="id" column="id" type="long">
                <generator class="increment"> 
                </generator>
            </id>

            <property name="orderNumber" type="string">
                <column name="order_number" length="15"></column>
            </property>     

            <many-to-one name="customer" column="customer_id" class="com.test.Customer">
            </many-to-one>

        </class>

    </hibernate-mapping> 
```

5）这是`hibernate.cfg.xml`：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-configuration PUBLIC
              "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
              "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
    <hibernate-configuration>
    <session-factory>
    <property name="connection.url">jdbc:mysql://localhost:8889/mydata</property>
    <property name="connection.username">root</property>
    <property name="connection.password">root</property>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>

    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="show_sql">true</property>

    <mapping resource="Customer.hbm.xml"/>
    <mapping resource="Order.hbm.xml"/>
    </session-factory>
    </hibernate-configuration> 
```

6）这是`Test.java`：

```
 package com.test;
    import java.util.HashSet;
    import org.hibernate.Session;
    import org.hibernate.SessionFactory;
    import org.hibernate.Transaction;
    import org.hibernate.cfg.Configuration;
    public class Test {
        public static SessionFactory sessionFactory;
        static
        {
            try
            {
                sessionFactory=new Configuration().configure().buildSessionFactory();//Configuration，sessionFactory are all objects
            }
            catch(Exception ex)
            {
                System.out.println("exception occured");
                ex.printStackTrace();

            }
        }
        public static void saveCustomerAndOrderWithCascade() throws Exception
        {
            Session session=sessionFactory.openSession();
            Transaction tx=null;
            try
            {
            tx=session.beginTransaction();
            Customer customer=new Customer("zhangsan",new HashSet());
            Order order=new Order();
            order.setOrderNumber("zhangsan_order1");

            Order order2=new Order();
            order.setOrderNumber("zhangsan_order2");

            Order order3=new Order();
            order.setOrderNumber("zhangsan_order3");

            order.setCustomer(customer);
            order2.setCustomer(customer);
            order3.setCustomer(customer);

            customer.getOrders().add(order);
            customer.getOrders().add(order2);
            customer.getOrders().add(order3);

            session.save(customer);
            tx.commit();
            }
            catch(Exception ex)
            {
                if(null!=tx)
                {
                    tx.rollback();
                }
            }
            finally
            {
                if(null!=session)
                {
                    session.close();
                }
            }

        }
        public static void main(String[] args) throws Exception
        {
            saveCustomerAndOrderWithCascade();
        }

    } 
```

控制台只有这些句子：

```
 log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
    log4j:WARN Please initialize the log4j system properly.
    Hibernate: select max(id) from customers 
```

有人能告诉我为什么它只有这个吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:36:56.990

这是因为您的客户类使用`increment`生成器来生成 PK 值。

`increment`生成器将发出`select max(pk_column) from table`，然后将检索到的值加一。然后将结果值用作新客户记录的 PK 值。

我会使用`identity`生成器并确保 PK 列的数据类型是`AUTO_INCREMENT`。这样，hibernate 将让 mySQL 使用它的`AUTO_INCREMENT`功能来生成 PK 值。

# web - 在 Service Stack REST API 服务中使用 SignalR

> ID：13656235
> 
> 赞同：19
> 
> 时间：2012-12-01T04:02:49.930
> 
> 标签：web, webserver, signalr, servicestack

是否可以在服务堆栈项目中使用 SignalR？我们目前正在为我们的 REST Web API 使用服务堆栈。我们对其架构、灵活性等总体上感到满意。现在我们正在探索使用事件驱动或推送技术（而不是轮询状态）与呼叫客户进行交流的方法。我应该注意，我们目前正在使用 AppHostHttpListenerBase 将我们的 API 托管在 Windows 服务中（与 IIS 内的托管相比）。

是否可以配置一条专用路由以某种方式传递给 SignalR Hub，以便这两者可以并存？例如`http://localhost:8000/api/live/jobs/jobid`会命中 SignalR 代码，但`http://localhost:8000/api/jobs/jobid`会路由到当前基于 DTO 的服务堆栈代码。

PS - 我们希望继续以自托管模式托管，因为我们喜欢移植到 Mono 并在 Linux 上运行的灵活性（而不是绑定到 IIS）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T01:08:35.783

这篇博文描述了如何将 SignalR 与 ServiceStack 后端一起使用： [SignalR、Filters 和 ServiceStack](http://www.strathweb.com/2013/03/signalr-filters-and-servicestack/)

总而言之，您必须将 ServiceStack Request 行为更改为 Bufferered，

```
public HelloAppHost()
    : base("Hello Web Services", typeof(HelloService).Assembly)
{
    PreRequestFilters.Add((req,res) => req.UseBufferedStream = true);
} 
```

然后可以在服务方法中添加[IncomingHub]、[OutgoingHub]属性，如Get()、Post()等。

至于 ServiceStack 中的 OWIN 支持，请不要屏住呼吸。[该线程](http://servicestack.uservoice.com/forums/176786-feature-requests/suggestions/4851342-owin-compatible-servicestack)显示了主要维护者的意见，即目前没有充分的理由添加支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:54:53.863

SignalR 提供使用 OWIN 构建的[自托管](https://github.com/SignalR/SignalR/wiki/Self-host)选项。

我注意到服务堆栈[很快也会有一个 OWIN 托管的实现](http://dhickey.ie/post/2012/10/11/ServiceStack-OWIN-support-sneak-peek.aspx)，以防您无法在适当的位置添加 SignalR。

然后，您可以使用[Firefly](https://github.com/FireflyServer/firefly)之类的东西轻松托管应用程序的两个部分，而无需将自己绑定到任何一个服务器实现。

以下是自主机启动代码供参考：

```
using System;
using Microsoft.AspNet.SignalR;
using Microsoft.Owin.Hosting;
using Owin;

namespace SignalR.Hosting.Self.Samples
{
    class Program
    {
        static void Main(string[] args)
        {
            string url = "http://localhost:8080";

            using (WebApplication.Start<Startup>(url))
            {
                Console.WriteLine("Server running on {0}", url);
                Console.ReadLine();
            }
        }
    }

    class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            app.MapHubs();
        }
    }

    public class MyHub : Hub
    {
        public void Send(string message)
        {
            Clients.All.addMessage(message);
        }
    }
} 
```

# php - 在php中计算时间不同

> ID：13656237
> 
> 赞同：1
> 
> 时间：2012-12-01T04:02:55.163
> 
> 标签：php, time, date-arithmetic

我想计算数据库中当前时间和时间的不同时间。数据库中的时间格式是日期时间`("Y-m-d H:i:s")`。这是我的代码。我是 php 新手，如果我写了一个愚蠢的代码，我深表歉意。

```
<?php
try { 
    $dbh = new PDO("mysql:host=$hostname;dbname=", $username, $password);

    $sql = "select * from time";
    echo "<table>";
    echo "<tr><th>ID</th><th>Name</th><th>Time</th></tr>";
    foreach ($dbh->query($sql) as $row)
        {
        $id=$row['id'];
        echo "<tr>";
        echo "<td>" . $row['id'] ."</td>";
        echo "<td>" . $row['name'] . "</td>";
        echo "<td>" . $row['time'] . "</td>";

        echo "</tr>";
        }
    echo "</table>";
    $today=date("Y-m-d H:i:s");
    $timeleft=($row['time']-$today);
    echo $today;
    echo 'Time left: '.$timeleft;
        $dbh = null;
    }
    catch(PDOException $e) { echo $e->getMessage(); }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:11:37.863

如何计算查询？

`$sql = "select *, (t.time - NOW()) AS 'difference' from time t";`

然后你只需要 echo echo`'Time left: ' . $row['difference'];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T04:08:23.407

```
<?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days');
?> 
```

# wordpress - 在 wordpress 中写入许多表（具有不同列）的表单

> ID：13656239
> 
> 赞同：1
> 
> 时间：2012-12-01T04:03:18.057
> 
> 标签：wordpress

目前，我正在使用 tablepress 使用表格格式输出不同的信息。我希望用户能够添加到现有信息。我需要一个 wordpress 中的表单，将用户帖子保存到这些不同的表中。我该怎么办？对不起，如果我听起来很愚蠢，但我对 html 很软。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:13:19.610

If you want to insert in posts table using custom form, you can use wp_insert_post().

This function inserts posts (and pages) in the database. It sanitizes variables, does some checks, fills in missing variables like date/time, etc. It takes an object as its argument and returns the post ID of the created post (or 0 if there is an error).

Reference : [http://codex.wordpress.org/Function_Reference/wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post)

# ruby - 把这个haml片段变成一个帮助干掉Sinatra

> ID：13656241
> 
> 赞同：2
> 
> 时间：2012-12-01T04:03:27.253
> 
> 标签：ruby, sinatra, haml

这一点haml有效：

```
%select{ :name => 'color', :value => @p.color}
  - Person.color.options[:flags].each do |colors|
    - if @p.color == colors
      %option{:value => colors, :selected => "selected"}= colors
    - else
       %option{:value => colors}= colors 
```

我正在尝试从中创建一个助手，以便我可以重用它：

```
helpers do
  def options(prop, p)
    Person.prop.options[:flags].each do |x|
      if p.prop == x
        "%option{:value => #{x}, :selected => 'selected'}= #{x}"
      else
        "%option{:value => #{x}}= #{x}"
      end  
    end
  end
end 
```

然后调用它：

```
%select{ :name => 'color', :value => @p.color}
  - options(color, @p) 
```

但我收到了这个错误：`undefined local variable or method 'color'`

我离得很远吗？

**编辑2：**

循环中发生了一些奇怪的事情。

即使是这样一个简单的例子：

```
helpers do
  def options(prop, p)
    Person.send(prop).options[:flags].each do |x|
    "<p>test</p>"
    end
  end
end 
```

和`= options(:color, @p)`

打印一个选项数组（在我的例子中`[:red, :blue, :yellow]`）并且不插入任何 html。但是，如果我这样做`puts <p>test</p>`，它确实会循环三次并正确打印它们——它们只是不会出现在 html 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:15:34.103

使用符号而不是未定义的方法：

```
options(:color, @p) 
```

代替：

```
options(color, @p) 
```

和辅助方法使用`send`：

```
if p.send(prop) == x 
```

代替

```
if p.prop == x 
```

也：

```
Person.send(prop) 
```

代替：

```
Person.prop 
```

另外，我怀疑 HAML 是否会接受像`"%option{:value => #{x}"`标签这样的字符串。

您可以使用 HTML 代替，或者只是找到另一种 DRY 方式，例如渲染部分或使用`haml_tag`：

```
def options(prop, p)
  Person.send(prop).options[:flags].each do |x|
    haml_tag :option, "#{x}", :value=>x
  end
end 
```

如果你使用`haml_tag`调用它`- options(:color, @p)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:45:08.997

这里发生了几件事。一、消息`undefined local variable or method 'color'`是线路引起的

```
- options(color, @p) 
```

在你的哈姆尔。这`color`是未定义的局部变量。如果我理解正确，您有一个`Person`具有各种属性的类，每个属性都有几个可能的选项，并且您希望能够选择使用哪一个，而无需对其进行硬编码并且需要多个辅助方法。一种方法是改变线路

```
Person.prop.options[:flags].each do |x| 
```

在你的助手中

```
Person.send(prop).options[:flags].each do |x| 
```

然后传递一个符号，指定调用助手时要使用的属性：

```
- options(:color, @p) 
```

下一个问题是将生成的代码写入输出。您的助手可以返回一个可以包含在内的字符串，也可以使用和`=`等助手直接写入输出。请注意，您不应该使用or的返回值，它会产生错误。[`haml_tag`](http://haml.info/docs/yardoc/Haml/Helpers.html#haml_tag-instance_method)[`haml_concat`](http://haml.info/docs/yardoc/Haml/Helpers.html#haml_concat-instance_method)`haml_tag``haml_concat`

所以在这里您可以在帮助程序中创建 HTML：

```
if p.prop == x
  "<option value='#{x}' selected='selected'>#{x}</option>"
else
  "<option value='#{x}' />#{x}</option>"
end 
```

然后使用它`=`（如果你使用`-`输出将被忽略）：

```
= options(:color, @p) 
```

如果你这样做，你需要确保帮助器返回你想要嵌入到你的 Haml 中的字符串。在这种情况下，助手返回调用的值`each`，[即数组本身](http://ruby-doc.org/core-1.9.3/Array.html#method-i-each)。您需要使用类似的东西`map`并`join`创建所需的字符串：

```
def options(prop, p)
  Person.send(prop).options[:flags].map do |x|
    if p.prop == x
      "<option value='#{x}' selected='selected'>#{x}</option>"
    else
      "<option value='#{x}' />#{x}</option>"
    end
  end.join("\n")
end 
```

另一种方法是使用`haml_tag`直接写入输出。

```
if p.prop == x
  haml_tag :option, x, :value=>x, :selected => true
else
  haml_tag :option, x, :value =>x
end 
```

请注意，在 Haml 中，[属性散列中具有布尔值](http://haml.info/docs/yardoc/file.REFERENCE.html#boolean_attributes)的任何条目只有在值为时才会输出`true`，并且它将根据输出正确格式化，例如获取`selected='selected'`XHTML 并且仅`selected`用于 HTML。所以最后一个例子可以简化为

```
haml_tag :option, x, :value=>x, :selected => (p.prop == x) 
```

（你总是可以用类似的方式简化另一个例子（返回一个字符串），比如`#{"selected='selected'" if p.prop == x}`，但 Haml 已经内置了它。）

# c# - 提供的行索引超出范围，即使在检查后也是如此

> ID：13656243
> 
> 赞同：1
> 
> 时间：2012-12-01T04:03:30.893
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, for-loop

我当前的代码：

```
Remove()
{
    for (int i = 0; i < ConGridView.RowCount; i++)
    {
        if (ConGridView.Rows[i].Cells[0].Value.ToString() == Address)
        {
            ConGridView.Rows.RemoveAt(i);
            break;
        }
    }
} 
```

所以每次客户端断开连接时我都试图调用删除函数。该函数将从 datagridview 中删除连接地址。当客户端一个一个断开连接时，它工作得很好。但是，如果 100 个连接被丢弃并且它试图在不到一秒的时间内删除 100 个连接，那么它就会出错，说“提供的行索引超出范围”。我应该如何检查？

到目前为止，我已经尝试过：尝试，抓住。if (ConGridView.Rows[i] != null), if (i < ConGridView.RowCount) 到目前为止似乎都不起作用。我还使用 (i < ConGridView.RowCount) 得到了结果，其中 i 为 26，而 RowCount 为 24，但 remove at 函数仍然激活..

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:09:41.657

你不能这样做。您的代码循环遍历 ConGridView 中的所有行，但它会像您一样删除它们。因此，有时您会尝试访问已删除的项目，这将导致您描述的错误。

可能是它以相反顺序遍历行的最佳方法。这样，在末尾删除一行不会影响您在开始时访问行的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T04:31:40.310

这个问题是因为您正在修改您正在迭代的集合。如果您使用临时数组和两个循环来删除您的条目会更好。

```
Remove()

// You can use an array/list or whatever you want below.
Collection<DataGridViewRow> rowsToDelete = new Collection<DataGridViewRow>();

        for (int i = 0; i < ConGridView.RowCount; i++)
        {
             if (ConGridView.Rows[i].Cells[0].Value.ToString() == Address)
                {
                        rowsToDelete.Add(ConGridView.Rows[i]);
                        break;
                }
        }

       // now remove the marked entries.
       foreach(DataGridViewRow deletedRow in rowsToDelete)
       {
           ConGridView.Rows.Remove(deletedRow);
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T04:06:28.067

问题是你用当前的行数初始化你的for循环，然后开始从datagridview中删除那些相同的行。在某些时候，您的 for 循环将尝试删除大于剩余行数的索引处的行。

试试这个：

```
for (int i = ConGridView.RowCount - 1; i >= 0; i--)
{
    if (ConGridView.Rows[i].Cells[0].Value.ToString() == Address)
    {
        ConGridView.Rows.RemoveAt(i);
         break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T04:11:59.387

你为什么不把总计数放到一个单独的变量中然后迭代

```
Remove()
{
    int totalConnections  = ConGridView.RowCount;

    for (int i = 0; i < totalConnections ; i++)
    {
        if (ConGridView.Rows[i].Cells[0].Value.ToString() == Address)
        {
            ConGridView.Rows.RemoveAt(i);
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-01T04:36:37.433

当您从数组中删除一个项目时，它会被重建；将其余元素向上移动 1 以消除已删除索引的间隙。

```
1\. guybrush threepwood
2\. murray
3\. elaine
4\. Jimmy Gibbs Jr. 
```

如果您在此处删除 2\. 项目；它变成了这样：

```
1\. guybrush threepwood
2\. elaine
3\. Jimmy Gibbs Jr. 
```

当你迭代时，想象一下：

```
for (int i = 0; i < myArray.Count; i++)
{
    if (i == 2) myArray.RemoveAt(i);
} 
```

运行此程序时，当 i = 3 时，3 处的元素发生了变化，您希望它是“elaine”，但它是“Jimmy Gibbs Jr.”。解决此问题的一种方法是`i`，如果我们将其删除，则将其减一，确保它`i`指的是正确的值。

```
for (int i = 0; i < myArray.Count; i++)
{
    if (i == 2)
    {
         myArray.RemoveAt(i);
         i--;
    }
} 
```

在这种情况下，我会选择 LINQ，不过，一切都会变得更容易。

```
myArray.RemoveAll(x => x == "murray"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T03:37:03.157

我已经尝试了这里每个人发布的所有建议，但是错误仍然存​​在。

我已经用不同的方式解决了这个问题......我已经切换到 TreeNodeView，因为这就是我最终要使用的。现在我可以删除任意数量的连接：

```
For each(TreeNode TN in ConTreeView) 
{ 
   ConTreeView.Nodes.Remove(TN); 
} 
```

# java - 给定两个 Java 线程，当其中一个线程完成时停止一个线程

> ID：13656244
> 
> 赞同：4
> 
> 时间：2012-12-01T04:04:01.433
> 
> 标签：java, concurrency, runnable

我正在为这个问题寻找一个干净的设计/解决方案：我有两个线程，可以运行只要用户想要，但最终会在用户发出停止命令时停止。但是，如果其中一个线程突然结束（例如，由于运行时异常），我想停止另一个线程。

现在两个线程都执行一个`Runnable`（所以当我说“停止线程”时，我的意思是我在`Runnable`实例上调用了一个 stop() 方法），我在想的是避免使用线程（线程类）并使用`CompletionService`接口然后将两个 Runnables 提交到该服务的一个实例。

有了这个，我将使用 CompletionService 的方法`take()`，当这个方法返回时，我会停止两个 Runnables，因为我知道其中至少一个已经完成。现在，这可行，但如果可能的话，我想知道一个更简单/更好的解决方案。

另外，当我们有`n`线程并且其中一个完成停止执行所有其他线程时，什么是一个好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T05:30:54.360

没有`Runnable.stop()`方法，所以这是一个明显的非首发。

不要使用`Thread.stop()`！*在绝大多数*情况下，它基本上是不安全的。

如果实施正确，这里有几种方法应该可行。

1.  您可以让两个线程定期检查一些公共标志变量（例如调用它`stopNow`），并安排两个线程在完成时设置它。（标志变量需要是易变的......或正确同步。）

2.  您可以让两个线程定期调用该`Thread.isInterrupted()`方法以查看它是否已被中断。然后每个线程在完成时都需要调用`Thread.interrupt()`另一个线程。

* * *

> 我知道 Runnable 没有那个方法，但是我传递给线程的 Runnable 实现确实有它，当调用它时，运行器将完成 run() 方法（类似于 Corsika 的代码，在这个答案下面）。

据我所知，Corsika 的代码*假定*有一种`stop()`方法可以在调用时执行正确的操作。真正的问题是你是如何实现它的？或者您打算如何实施？

*   如果您已经有一个可行的实现，那么您就有了解决问题的方法。

*   否则，我的回答提供了两种可能的方法来实现“立即停止”功能。

> 感谢您的建议，但我有疑问，“定期检查/呼叫”如何转化为代码？

这完全取决于该`Runnable.run()`方法执行的任务。它通常需要向某些循环添加检查/调用，以便测试合理地经常发生......但不要太频繁。您还想只检查何时可以安全地停止计算，这是您必须自己解决的另一件事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T13:27:29.233

以下内容应该有助于您了解如何将其应用于您的问题。希望能帮助到你...

```
 import java.util.*;

    public class x {

        public static void main(String[] args) {

            ThreadManager<Thread> t = new ThreadManager<Thread>();
            Thread a = new MyThread(t);
            Thread b = new MyThread(t);     
            Thread c = new MyThread(t);
            t.add(a);
            t.add(b);
            t.add(c);
            a.start();
            b.start();
            c.start();      
        }
    }

    class ThreadManager<T> extends ArrayList<T> {

        public void stopThreads() {
            for (T t : this) {
                Thread thread = (Thread) t;
                if (thread.isAlive()) {
                    try { thread.interrupt(); } 
                    catch (Exception e) {/*ignore on purpose*/}
                }
            }
        }
    }

    class MyThread extends Thread {

        static boolean signalled = false;

        private ThreadManager m;

        public MyThread(ThreadManager tm) {
            m = tm;
        }

        public void run() {
            try {           
                // periodically check ...
                if (this.interrupted()) throw new InterruptedException();
                // do stuff
            } catch (Exception e) {
                synchronized(getClass()) {
                    if (!signalled) {
                        signalled = true;
                        m.stopThreads();
                    }
                }
            }
        }
    } 
```

无论您使用停止标志还是中断，您都需要定期检查线程是否已收到停止信号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T04:08:55.700

你可以让他们互相访问，或者回调可以访问两者的东西，这样它就可以打断对方。考虑：

```
MyRunner aRunner = new MyRunner(this);
MyRunner bRunner = new MyRunner(this);
Thread a = new Thread(aRunner);
Thread b = new Thread(brunner);

// catch appropriate exceptions, error handling... probably should verify
// 'winner' actually is a or b
public void stopOtherThread(MyRunner winner) {
    if(winner == aRunner ) bRunner .stop(); // assumes you have stop on class MyRunner
    else aRunner.stop();
}

// later
a.start();
b.start();

// in your run method
public void run() {
    // la de da de da
    // awesome code
    while(true) fork();
    // other code here
    myRunnerMaster.stopOtherThread(this);
} 
```

# c - oracle数据库连接使用c语言

> ID：13656248
> 
> 赞同：0
> 
> 时间：2012-12-01T04:05:03.620
> 
> 标签：c, oracle

我想使用 c 语言连接到 Oracle 数据库。为此，我使用 oOacle 预编译器，我的操作系统是 ubuntu 11.04。

我的代码是

```
 #include<stdlib.h>
 #include "/home/prasad/oracle/product/10.2.0/db_1/precomp/public/sqlca.h"
 int var1;
 EXEC SQL BEGIN DECLARE SECTION;
 VARCHAR ENAME[10];
 int dno;
 EXEC SQL END DECLARE SECTION;
 main()
 {
     EXEC SQL CONNECT :SCOTT IDENTIFIED BY :TIGER;
     printf("\nConnected to ORACLE as user: \n");

 } 
```

我使用预编译器编译了它，但它给出了错误

> PCC-F-02044，CMD-LINE：选项值非法或超出范围：ltype=long

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:06:04.403

由于错误指的是命令行并且[`ltype`是一个命令行标志](http://docs.oracle.com/cd/E11882_01/appdev.112/e10825/pc_10opt.htm#sthref1642)，这表明它可能没有像查看您的代码那样深入。

如果您没有在命令行上指定标志，请检查配置文件中的设置 - 横幅`proc`显示在消息中显示“系统默认选项值取自...”的位置。在你的情况下，我猜那将是`/home/prasad/oracle/product/10.2.0/db_1/precomp/admin/pcscfg.cfg`.

假设明确将其设置为`long`，您可以尝试仅添加`ltype=short`到您的`proc`命令中，如果可行，则可以在`pcscfg.cfg`文件中更改它以使以后的生活更轻松。如果这没有帮助，请将您的整个`proc`命令和该文件的内容添加到您的问题中。

据我所知，Ubuntu 不是 Oracle 支持的平台，所以这也有可能不起作用，尽管这似乎不太可能......

# emacs - 检查字符串是否为“^M”

> ID：13656250
> 
> 赞同：0
> 
> 时间：2012-12-01T04:05:16.413
> 
> 标签：emacs, elisp

我试过`(char-equal chars ^M)`了，但失败了。我总是出错。如何比较这些特殊字符？

更新：解决方案是`(string-equal chars (char-to-string ?\^M))`

更新2：解决方案是`(string-equal chars "\^M")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:09:16.820

Control-M 用 Emacs Lisp 编写为`?\C-m`. 有关更多详细信息，请参见[此处](http://www.gnu.org/software/emacs/manual/html_node/elisp/Ctl_002dChar-Syntax.html#Ctl_002dChar-Syntax)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T04:27:17.153

知道了。`(string-equal chars "\^M")`.

@Chang Peng @Sean 谢谢。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T04:12:12.830

我猜你在你的函数中输入了“^M”作为“^”，然后是“M”。但那是2个字符。在 emacs 中，输入 ^M 字符的正确方法是 Cq Cm，而“^M”会以稍微不同的颜色显示在屏幕上。

# git - 致命：协议错误：错误的行长度字符：恳求

> ID：13656251
> 
> 赞同：0
> 
> 时间：2012-12-01T04:05:25.587
> 
> 标签：git, amazon-ec2

> **可能重复：**
> [Git Remote：错误：致命：协议错误：错误的行长字符：Unab](https://stackoverflow.com/questions/8170436/git-remote-error-fatal-protocol-error-bad-line-length-character-unab)

我正在尝试在 Amazon EC2 实例上配置 git 服务器，但我不断收到此错误。

一切都设置正确 - 我的 ssh 密钥有效，我可以登录到远程服务器，但是 git 一直在吐出这个错误。

有什么建议么？

# bash - ImageMagick 文本弧

> ID：13656252
> 
> 赞同：1
> 
> 时间：2012-12-01T04:05:33.450
> 
> 标签：bash, imagemagick, imagemagick-convert

我正在尝试拍摄一张图片，比如 front2.jpg 并在顶部添加“Hello World”弧线。但我似乎无法弄清楚如何让这个工作。我遇到错误

```
-bash: syntax error near unexpected token `(' 
```

命令

```
convert front5.jpg (-gravity north -pointsize 40 -fill '#ffffff' -background none label:'Hello World' -virtual-pixel transparent -distort Arc 320) -geometry +0+0 -composite front2.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:11:58.513

就像 bash 试图告诉你的那样：去掉括号。

```
convert front5.jpg -gravity north -pointsize 40 -fill '#ffffff' -background none label:'Hello World' -virtual-pixel transparent -distort Arc 320 -geometry +0+0 -composite front2.jpg 
```

我抓起一张随机的 jpg 并在上面尝试了这个命令，结果得到了一个整洁的小文本弧（顺便说一句，这是一个非常酷的效果）。

如果您避开括号，它也可以工作，但我找不到任何明显的结果差异，所以为了简单起见，我只使用第一个。

```
convert front5.jpg \( -gravity north -pointsize 40 -fill '#ffffff' -background none label:'Hello World' -virtual-pixel transparent -distort Arc 320 \) -geometry +0+0 -composite front2.jpg 
```

# javascript - 如果 src = pdf，如何从 IFRAME 打印 PDF？

> ID：13656271
> 
> 赞同：22
> 
> 时间：2012-12-01T04:09:02.200
> 
> 标签：javascript, pdf, iframe, printing

我有一个 iframe 需要直接指向 PDF 文件（不是带有 PDF 的页面）：

```
<iframe id="ecard-pdf" name="ecard-pdf" style="position: absolute;" src="/profile.pdf">
</iframe> 
```

我希望能够在这个 iFrame 中打印 PDF

我在其他不符合我需求的问题中找到了几种解决方案：

1.  需要在 iframe 中有一个函数（ [https://stackoverflow.com/a/473270/1246369](https://stackoverflow.com/a/473270/1246369)）
2.  建议聚焦框架，然后对其执行打印操作（ [https://stackoverflow.com/a/9616706/1246369](https://stackoverflow.com/a/9616706/1246369)）
3.  访问 iframe 的 contentWindow 并打印它（ [https://stackoverflow.com/a/9617566/1246369](https://stackoverflow.com/a/9617566/1246369)）
4.  那些的变体

但是，如果 iframe 的 src 直接指向 PDF 而不是围绕 PDF 包裹的页面，FireFox 和 IE 似乎无法执行此操作。

**火狐**：

它不打印，而是显示此对话框：“阻止此页面创建其他对话框”，带有“确定”和“取消”按钮，这两个按钮都不打印 PDF。

**即**：

只是忽略了我使用上述方法打印的尝试。

**问题**：

无论用户使用什么浏览器，如何允许用户在 iFrame 中打印 PDF？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-31T13:28:54.540

我一直在努力寻找一种适用于 IE 和 Chrome 的解决方案。这对我有用：

```
$(function() {
    var ua = window.navigator.userAgent;
    var msie = ua.indexOf('MSIE ');
    var trident = ua.indexOf('Trident/');
    var edge = ua.indexOf('Edge/');
    var url = '/url/to/file.pdf';
    var pdf ='';
    var style = 'position:fixed; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden;';

    if(msie > 0 || trident > 0 || edge > 0){
        pdf = '<object data="' + url + '" name="print_frame" id="print_frame" style="' + style + '" type="application/pdf">';
    }
    else{
        pdf ='<iframe src="' + url + '" name="print_frame" id="print_frame" style="' + style + '"></iframe>';
    }

    $(document.body).append(pdf);

    setTimeout(function(){
        window.frames["print_frame"].focus();
        window.frames["print_frame"].print();
    },2000);
}); 
```

...干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T22:53:32.857

正如this answer for a [similar question](https://stackoverflow.com/a/10654200/2374649)中所建议的那样，您可以这样做：

```
window.frames.pdfFrame.print(); 
```

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T23:37:53.600

选项1：

我没有对此进行测试，但我在这里找到了另一个答案：[https ://stackoverflow.com/a/4096547/2528978](https://stackoverflow.com/a/4096547/2528978)

假设您可以使用以下内容：

```
<style type="text/css" media="print">
   body *{display:none}
   iframe{display:block}
</style> 
```

那么只显示pdf？

选项 2：

创建一个指向“打印我”的 pdf 文件的超链接

```
<a href='Path/To/PDF'>Print Me</a> 
```

希望这可以帮助...

-安德鲁

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T04:27:40.993

这似乎有效：

```
 <style type="text/css" media="print">
   body *{display:none}
   iframe{display:block}
   </style> 
```

那么只显示pdf？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-05-19T09:24:20.127

```
const target_iframe = $("#pdfViewerIframe")

target_iframe.attr("src", URL.createObjectURL(new Blob([resp], {
                                type: "application/pdf"
                            })))

target_iframe[0].contentWindow.print() 
```

注意：`resp`是您从服务器获得的 pdf

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-12-26T07:31:24.283

您可以直接使用窗口打印选项。使用 onclick 选项

onclick="javascript:window.print();"

# set - set可以实例化吗？

> ID：13656278
> 
> 赞同：1
> 
> 时间：2012-12-01T04:10:25.533
> 
> 标签：set, instance, treemap

当这个问题困扰着我时，我正在阅读有关 Collections 的内容。

以下是我为测试我的疑问而编写的代码。

```
public static void main(String[] args) {        
    TreeMap<Integer, String> tree = new TreeMap<Integer, String>();
    tree.put(1, "1");
    tree.put(2, "2");
    Set<Integer> set = tree.keySet();
    System.out.println(set instanceof Set);
    System.out.println(set instanceof HashSet);
} 
```

结果 ：

真假

上面的代码说我的 set 对象是 Set 的一个实例。但是 Set 是一个 Interface 如何实例化它。我很困惑。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:13:22.463

`Set`是一个接口，所以不，你不能直接实例化它。但是，如果您不能拥有一个接口的实例，那么接口将毫无用处！返回的实例是接口`tree.keySet()`的一些具体*实现*`Set`。

[让我们变得超级具体，`TreeMap#keySet()`](http://www.docjar.com/html/api/java/util/TreeMap.java.html#791)看看[源代码](http://www.docjar.com/html/api/java/util/TreeMap.java.html#791)：

```
public Set<K> keySet() {
    return navigableKeySet();
} 
```

好吧，这并不能告诉我们太多。我们需要深入研究：

```
public NavigableSet<K> navigableKeySet() {
    KeySet<K> nks = navigableKeySet;
    return (nks != null) ? nks : (navigableKeySet = new KeySet(this));
} 
```

所以返回的具体类型是`KeySet`！这是你的`Set`接口实现。[http://www.docjar.com/html/api/java/util/TreeMap.java.html#1021](http://www.docjar.com/html/api/java/util/TreeMap.java.html#1021)

这解释了这一点：

```
System.out.println(set instanceof Set); // prints true
System.out.println(set instanceof HashSet); // prints false 
```

`Set`是一个接口；`HashSet`是该接口的实现。`foo instanceof Set`将适用于*任何*实现`true`的每个实例。我们已经确定了返回的对象的具体类型是 a ，而不是 a ，所以这就解释了为什么是- 因为是 a ，所以它不可能是 a ！`foo` *`Set``TreeMap#keySet()``KeySet``HashSet``set instanceof HashSet``false``set``KeySet``HashSet`*

 *如果这对您仍然没有意义，请继续[阅读`instanceof`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)：

> 运算符将`instanceof`对象与指定类型进行比较。您可以使用它来测试对象是类的实例、子类的实例还是实现特定接口的类的实例。*

# java - 在 JPanel 上绘制一个点

> ID：13656296
> 
> 赞同：6
> 
> 时间：2012-12-01T04:15:27.350
> 
> 标签：java, swing, user-interface, graphics, jpanel

有没有办法`JPanel`使用`java.awt.Graphics`类在 a 上绘制一个点？我找不到任何这样的方法。好吧，绘制线条和其他形状的方法有很多，（例如`.drawLine(int x1, int y1, int x2, int y2)`，但`Graphics`缺少绘制最基本几何对象的实现吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T05:12:30.063

是的，它确实缺少它，您将不得不使用：

```
.drawLine(x1, y1, x1, y1) 
```

（源点和目标点的位置相同）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-01T05:13:23.823

你可以使用这个：

```
Graphics2D g2d = (Graphics2D)g;
g2d.drawOval(5, 5, 100, 100); 
```

或者你可以查看[这篇](http://www.java-forums.org/new-java/16524-drawing-points-mouse.html)文章

# java - 将对象传递给实现可运行的类的目的

> ID：13656297
> 
> 赞同：1
> 
> 时间：2012-12-01T04:15:27.473
> 
> 标签：java, multithreading, runnable

有3个班。

1.  `CallMe`打印消息的基本类
2.  `Caller`实现`Runnable`并从主类获取对象`Synch`
3.  `Synch`为类创建对象`CallMe`并将其传递给`Caller`类并启动线程的主类。

**问题**：在`Synch`类中，需要将对象传递给类`Caller`吗？当我尝试在没有编译器`Caller`对象的情况下调用类时会抛出. 您能否提供这种行为的任何原因。`CallMe``NullPointerException`

例如：`Caller ob1 = new Caller("Hello"); // calling without an object of class "CallMe"`

以下是供参考的工作代码。

```
public class CallMe {
    void call(String msg) {
        System.out.print("[" + msg);
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            System.out.println("Interrupted");
        }
        System.out.println("]");
    }
}

class Caller implements Runnable {
    String msg;
    CallMe target;
    Thread t;

    public Caller(CallMe targ, String s) {
        target = targ;
        msg = s;
        t = new Thread(this);
        t.start();
    }

    public void run() {
        target.call(msg);
    }
}

class Synch {
    public static void main(String args[]) {
        CallMe target = new CallMe();
        Caller ob1 = new Caller(target, "Hello");
        Caller ob2 = new Caller(target, "Synchronized");
        Caller ob3 = new Caller(target, "World");
        // wait for threads to end
        try {
            ob1.t.join();
            ob2.t.join();
            ob3.t.join();
        } catch (InterruptedException e) {
            System.out.println("Interrupted");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:37:04.390

> 来电者 ob1 = new Caller("Hello");

首先，这将是一个编译时错误，因为您没有`Caller`仅将字符串作为参数的构造函数。

> 当我厌倦了对没有“CallMe”对象的类“Caller”的调用时，编译器会抛出空指针异常

我假设您打算按如下方式创建调用者：

```
Caller ob1 = new Caller(null, "Hello"); 
```

如果是这样，NPE 由您的 run 方法抛出，该方法由您在构造函数中的`thread.start()`调用自动调用。`Caller`似乎工作是用于在单独的线程`Caller`中运行该函数，因此传递给它的对象必须是非空值。NPE 的原因是您的案例中没有有效的对象。`CallMe``CallMe``CallMe`

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:38:55.853

由于该行，编译器会抛出 NullPointerException

```
target.call(msg) 
```

如果将 null 传递给 Caller 构造函数，则实例变量 target 将设置为 null，并且您正在调用 null 引用上的方法，因此会出现 NullPointerException。

至于为什么需要同时拥有“Caller”和“CallMe”类，这只是风格问题。这个想法是为您的代码可能包含的任何业务逻辑创建一个可运行的“包装器类”。这样线程就不会绑定到项目的核心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T04:46:07.293

Caller 中的 CallMe 对象*target*未初始化，因此在`null`您调用构造函数 Caller(target, "XXX") 对其进行初始化之前具有值。`null pointer exception`当您调用的对象具有 value 时，您总是会得到`null`。

如果您使用 Caller("XXX") 而不传入 CallMe 对象，`target`则 Caller 对象内部绝不会被初始化。

# jquery - jquery getJSON 没有响应，但直接访问确实

> ID：13656300
> 
> 赞同：1
> 
> 时间：2012-12-01T04:15:43.060
> 
> 标签：jquery, node.js

我正在将我的工作从旧环境迁移到新环境。我正在用较新的代码更新过时的代码，它似乎运行良好（我的 web 服务是用 node.js 编写的）

我的 web 服务在 node.js 中运行，我的网站使用 jquery。node.js 代码

```
var express = require('express');
var app = express();

app.get('/', function(req, res){
    console.log('GET request to /');
});

app.listen(8888);
console.log('Express server started on port 8888'); 
```

这是我的jQuery代码

```
$.getJSON('http://URL:8888/getTables', function(data){
    //stuff
}); 
```

但是在萤火虫控制台显示：

```
"http://URL.com:8888/getTables 200 OK 64ms" 
```

没有回应

如果我直接访问网站“http://URL.com:8888/getTables”，我会得到我的数据。

任何想法发生了什么？我会让 Web 服务继续运行，这样你就可以看到我在说什么。

使用它的网站是[http://www.URL.com/db/index.html](http://www.URL.com/db/index.html)

编辑：

```
 app.get('/getTables', function(req, res){
     console.log('GET request to /getTables');
     getTables(req, res);
     sendJSON(res, 200, cache_tables);
  });

function sendJSON(res, httpCode, body)
{
  var response = JSON.stringify(body);
  res.send(response, {'Access-Control-Allow-Origin': '*'}, httpCode);
} 
```

**更新**

我找到了我的解决方案，感谢您让我知道我的问题是跨域的，我认为我的 sendJSON 已经解决了它，但是由于我升级了 nodejs 和模块，它可能已经过时了。这是为那些想知道的人提供的解决方案：

```
//Middleware: Allows cross-domain requests (CORS)
var allowCrossDomain = function(req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
}

//App config
app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'secret' }));
  app.use(express.methodOverride());
  app.use(allowCrossDomain);
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

我不得不更新我所有的使用方法：

```
 app.get('/', function(req, res, next){
   console.log('GET request to /');
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:27:16.190

这是因为您在另一个端口上运行服务器，所以它被认为是 x 域。您可以将其设置为使用 JSONP

这个 SO 问题更详细[How do I send an AJAX request on a different port with jQuery?](https://stackoverflow.com/questions/2099728/how-do-i-send-an-ajax-request-on-a-different-port-with-jquery)

这是另一篇关于 COR 的详细信息[http://www.bennadel.com/blog/2327-Cross-Origin-Resource-Sharing-CORS-AJAX-Requests-Between-jQuery-And-Node-js.htm](http://www.bennadel.com/blog/2327-Cross-Origin-Resource-Sharing-CORS-AJAX-Requests-Between-jQuery-And-Node-js.htm)

[下面的评论更新]

我发现了一个帖子，其中包含使用 express 提供 jsonp 的示例设置，希望这会有所帮助......

[http://kiwidev.wordpress.com/2011/07/18/node-js-expressjs-and-jsonp-example/](http://kiwidev.wordpress.com/2011/07/18/node-js-expressjs-and-jsonp-example/)

该帖子中的代码示例如下：

**快递应用**

```
var express = require('express');

var app = module.exports = express.createServer();

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});

app.get('/logget', function(req, res){
    console.log('get to log');
    console.log(req.query.callback);
    console.log(req.param('somedata'))

    res.header('Content-Type', 'application/json');
    res.header('Charset', 'utf-8')  
    res.send(req.query.callback + '({"something": "rather", "more": "pork", "tua": "tara"});');  
});

app.listen(3000);
console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

**访问它的 HTML 页面**

```
<html>
    <head>
        <title>jsonp test</title>
        <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>      
        <script type="text/javascript">
            $(function(){               
                $('#jsonThingLink').click(function(e){
                    e.preventDefault();
                    console.log('jsonThingLink clicked');                   

                     $.ajax({
                        dataType: 'jsonp',
                        data: "somedata=blahblah",                      
                        jsonp: 'callback',
                        url: 'http://localhost:3000/logget?callback=?',                     
                        success: function(data) {
                            console.log('success');
                            console.log(data);
                            console.log(data.more);                
                        }
                    });
                });             
            });
        </script>
    </head>
    <body>
        <div id="jsonThing"><a href="#" id="jsonThingLink">test jsonp</a></div>    
    </body>
</html> 
```

# validation - Backbone.js - 验证模型构造函数参数

> ID：13656301
> 
> 赞同：1
> 
> 时间：2012-12-01T04:15:48.380
> 
> 标签：validation, backbone.js, parameters, constructor, options

我想用模型做简单的事情：

*   如果它们有效，则使用构造函数参数（但不仅仅是分配它们，我必须先映射它们，因为它们采用不同的格式）
*   在其他情况下，使用`defaults`

对此有什么推荐的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:35:10.830

`isValid()`您可以通过调用来实现这一点`initialize`。如果有效，则照常进行；否则，清除模型并将其重置为默认值：

```
initialize: function() {
    console.log("initializing model...");
    if (!this.isValid()) {
        console.log("Model is not valid, using defaults");
        this.clear({ silent: true });
        this.set(this.defaults, { silent: true });
    }
    console.log("Model is valid");
}, 
```

[请参阅此工作演示。](http://jsfiddle.net/N3vmg/)

**编辑**

可以在模型构造函数中使用对象，例如：

```
var model = new Backbone.Model({
    title: "test",
    hsa: {
        h: 120,
        s: "100%",
        a: "50%"
    }
}); 
```

您还可以将其指定为`hsa: "120, 100%, 50%"`或其他内容，并将该值转换为构造函数中的对象。

[看这里。](http://jsfiddle.net/7KpTQ/1/)

# linux - 我需要 Visual Studio 2012 的替代品

> ID：13656302
> 
> 赞同：-5
> 
> 时间：2012-12-01T04:16:14.930
> 
> 标签：linux, ide, visual-studio-2012

嘿，我不确定这是否是问的正确地方，如果不是，我很抱歉，但我需要 Visual Studio 2012 for Linux 的替代品，到目前为止，我发现了 2 个称为 Netbean 和 Eclipse，其中或任何其他你们可能知道哪个与 VS 2012 最接近或相似？谢谢你们的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T05:30:05.943

Linux 上有几个可用的 IDE。这是我的短名单：

*   对于 C#/VB.NET/Mono：[MonoDevelop](http://monodevelop.com/)
*   对于 Java/html/javascript/python/ruby/php/ 等等！：[IntelliJ IDEA](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html?IU)
*   对于 C/C++，有几种选择：[Eclipse](http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/junosr1)、[Netbeans](http://netbeans.org/features/cpp/index.html)、[Code::Blocks](http://www.codeblocks.org/)、[KDevelop](http://kdevelop.org/)

但这还不是全部，甚至没有接近！[Linux](http://linuxmafia.com/faq/Devtools/ides.html)的 IDE 列表要长得多，还有[按语言和平台划分的 IDE](http://en.wikipedia.org/wiki/Comparison_of_integrated_development_environments)矩阵。

希望这可以帮助！

# facebook - 缓存来自 Facebook、Twitter 和 Instagram 的提要

> ID：13656303
> 
> 赞同：0
> 
> 时间：2012-12-01T04:16:43.577
> 
> 标签：facebook, codeigniter, twitter, instagram

我正在为一个非营利性节日建立一个网站，我们希望有一个“媒体”页面，该页面会带来来自 instagram（标签搜索）的照片、来自 Facebook 的更新和照片（通过节日的专辑）、twitter 帖子（由用户和标签）。

我已经尝试了 Facebook 和 Twitter 的 JS 小部件，但想知道使用 PHP/Codeigniter 来提取提要并以某种方式缓存它们以获得更好的性能和对外观的更多控制。

最好将提要数据存储在服务器上的 json 文件中还是 MySQL 记录中？

我倾向于一个包含每个提要记录的表，该表基本上只存储提要 URL、JSON、上次更新时间和某种标识符。

然后我可以用以下类型的方法编写一个类：

```
get_feed($id='facebook_updates', $expiry_time=3600); 
```

1.  这似乎是一种合理的方式吗？还是已经存在更好的解决方案？

2.  我不太确定如何使用需要 Auth 的提要（推特和 Instagram）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:58:58.080

兄弟！

首先，这似乎是一种合理的方法，我不知道有什么更好的方法。但是，如果我必须做到这一点，我会把我的问题分成两部分：

*   用于从服务中获取信息的服务器端代码（我可能会将其存储为 json，以便我可以使用直接返回的信息）不时与 cronjobs 一起运行。

*   客户端（服务器也可以）以自定义样式显示该信息。

要使用需要身份验证的提要，您必须在每个提要中创建一个应用程序，授权它访问您的个人帐户并在代码中使用它。从未与 Instagram 合作过，但其他人有很好的文档说明如何做到这一点。

最后，通过一些修改，您也可以使用这个奇妙的工具来帮助您完成任务： http: [//plugins.in1.com/socialist](http://plugins.in1.com/socialist)

# java - 使用 LDAP 验证特定请求的凭据

> ID：13656304
> 
> 赞同：0
> 
> 时间：2012-12-01T04:16:46.570
> 
> 标签：java, authentication, web-applications, jboss, ldap

我有一个使用 JBoss 5.2 部署的 Web 应用程序。为了让用户使用该应用程序，他/她必须使用用户名和密码通过 LDAP 服务器（使用简单身份验证）进行身份验证。这一切都是通过`login-config.xml`为 JBoss 设置并提供`<login-module>`我们的实现来完成的。

问题出现在这里：登录后，我有一个场景要求用户在执行特定操作时提供用户名和密码（我还将使用 LDAP 服务器进行身份验证）。我希望能够重用用于验证用户进入 Web 应用程序的相同机制。

我的表单登录到应用程序帖子，`j_security_check`所以按照这个，我试图发送一个请求，`j_security_check`但 JBOSS 返回一个 404。从阅读了一下，我收集到`j_security_check`不能被任何任意请求访问，必须是响应对安全资源的质询请求。

那么，如何验证用户使用同一 LDAP 服务器提供的第二组凭据？

**编辑：**

澄清一下，问题是如何将用户的凭据输入发送到 LDAP 服务器进行身份验证。从用户那里获取输入等等都完成了。剩下的就是接受这个输入并将其发送到 LDAP 服务器并获得响应（这是我卡住的地方）。

如果有帮助的话，Web 应用程序的登录使用扩展 UsernamePasswordLoginModule 的自定义类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:37:14.070

因此，经过大量研究，我最终找到了 JBoss 环境的解决方案（这就是我正在使用的）。

捕获用户的凭据后，您可以通过 POST/GET 将它们发送到您的服务器，您的服务器可以执行以下操作以使用您配置的任何身份验证策略（在 中`login-config.xml`）来验证凭据：

```
WebAuthentication webAuthentication = new WebAuthentication();
boolean success = webAuthentication.login(username, password); 
```

为了对此进行扩展，我还能够通过`HttpServletRequest`（传递到我的服务器端处理程序）检查用户的角色/组：

```
boolean userIsInRole = servletRequest.isUserInRole("nameOfGroup") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:24:28.020

[Spring 安全文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ldap.html)对此进行了解释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T19:26:27.433

`WebAuthentication`想为不再存在的 JBoss 6.2+ 添加另一个答案。我使用创建 a`LoginContext`来达到相同的结果：

```
String SECURITY_DOMAIN_NAME = "ssd"; // the security domain's name from standalone.xml

String username = "user";
String password = "password";

LoginContext lc = null;
try {
    lc = new LoginContext(SECURITY_DOMAIN_NAME, new UsernamePasswordHandler(username, password.toCharArray()));
    lc.login();
    // successful login
} catch (LoginException loginException) {
    // failed login
} 
```

并使用uf`lc.getSubject().getPrincipals()`来验证角色。

# java - Java：for循环中的对象数组赋值

> ID：13656308
> 
> 赞同：2
> 
> 时间：2012-12-01T04:18:14.603
> 
> 标签：java, arrays, object, input, variable-assignment

我正在尝试使用 Dijkstra 的算法来找到从特定顶点（v0）到其余顶点的最短路径。这已解决并与以下链接中的此代码配合良好：[http ://en.literateprograms.org/index.php?title=Special:DownloadCode/Dijkstra%27s_algorithm_(Java)&oldid=15444](http://en.literateprograms.org/index.php?title=Special:DownloadCode/Dijkstra%27s_algorithm_(Java)&oldid=15444)

我无法从用户输入的 for 循环中分配 Edge 数组，而不是像这里那样对其进行硬编码。

从每个顶点为 Edge[] 邻接分配新边有什么帮助吗？请记住，它可能是 1 个或多个边缘。

```
class Vertex implements Comparable<Vertex>
{
    public final String name;
    public Edge[] adjacencies;
    public double minDistance = Double.POSITIVE_INFINITY;
    public Vertex previous;
    public Vertex(String argName) { name = argName; }
    public String toString() { return name; }

    public int compareTo(Vertex other){
    return Double.compare(minDistance, other.minDistance);
    }
}

class Edge{
    public final Vertex target;
    public final double weight;

    public Edge(Vertex argTarget, double argWeight){
        target = argTarget; weight = argWeight; }
    }

public static void main(String[] args)
{
    Vertex v[] = new Vertex[3];
    Vertex v[0] = new Vertex("Harrisburg");
    Vertex v[1] = new Vertex("Baltimore");
    Vertex v[2] = new Vertex("Washington");

    v0.adjacencies = new Edge[]{ new Edge(v[1],  1),
                             new Edge(v[2],  3) };
    v1.adjacencies = new Edge[]{ new Edge(v[0], 1),
                             new Edge(v[2],  1),};
    v2.adjacencies = new Edge[]{ new Edge(v[0],  3),
                                 new Edge(v[1],  1)  };

    Vertex[] vertices = { v0, v1, v2};
       /*Three vertices with weight: V0 connects (V1,1),(V2,3)
                                     V1 connects (V0,1),(V2,1)
                                     V2 connects (V1,1),(V2,3)
       */  
    computePaths(v0);
    for (Vertex v : vertices){
    System.out.println("Distance to " + v + ": " + v.minDistance);
    List<Vertex> path = getShortestPathTo(v);
    System.out.println("Path: " + path);
    }
}
} 
```

上面的代码可以很好地找到从 v0 到所有其他顶点的最短路径。将新边缘 [] 分配给边缘 [] 邻接时会出现问题。

例如，这不会产生正确的输出：

```
for (int i = 0; i < total_vertices; i++){
        s = br.readLine();
        char[] line = s.toCharArray();
        for (int j = 0; j < line.length; j++){  
           if(j % 4 == 0 ){ //Input: vertex weight vertex weight: 1 1 2 3
            int vert = Integer.parseInt(String.valueOf(line[j]));
            int w = Integer.parseInt(String.valueOf(line[j+2]));
            v[i].adjacencies = new Edge[] {new Edge(v[vert], w)};
        }
        }
    } 
```

与此相反：

```
v0.adjacencies = new Edge[]{ new Edge(v[1],  1),
                         new Edge(v[2],  3) }; 
```

如何获取用户输入并制作 Edge []，以将其传递给邻接？问题是它可能是 0 个边缘或许多边缘。

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:59:29.683

在您的情况下，您正在为 j 的每次迭代分配 v[i].adjacencies... 所以这意味着它 line.length = 8，然后 v[i].adjacencies 被分配了 2 次。我不认为那是你的意图。

```
 for (int j = 0; j < line.length; j++){  
       if(j % 4 == 0 ){ //Input: vertex weight vertex weight: 1 1 2 3
        int vert = Integer.parseInt(String.valueOf(line[j]));
        int w = Integer.parseInt(String.valueOf(line[j+2]));
        v[i].adjacencies = new Edge[] {new Edge(v[vert], w)};
    } 
```

你可以像这样改变你的代码......

```
 Edge[] edges = new Edge[line.length/4];  
    for (int j = 0; j < line.length; j++){           
       if(j % 4 == 0 ){ //Input: vertex weight vertex weight: 1 1 2 3
        int vert = Integer.parseInt(String.valueOf(line[j]));
        int w = Integer.parseInt(String.valueOf(line[j+2]));
        edges[j/4] =  {new Edge(v[vert], w)};
    }
   v[i].adjacencies = edges; 
```

它可能不是确切的代码，但您必须在循环之外分配。

# android - Android ImageView 不显示从套接字连接接收到的图像

> ID：13656309
> 
> 赞同：0
> 
> 时间：2012-12-01T04:18:18.900
> 
> 标签：android, sockets, imageview

我试图在 Android 应用程序中显示两个连续的图像，这些图像是通过套接字接收的（从使用 sendfile 的 C 程序）。发件人代码似乎工作正常，我在 Android 代码方面遇到了问题。

Android应用程序中的部分代码如下：

```
public class DisplayNewActivity extends Activity {
    ...
    @Override
    public void onCreate(Bundle savedInstanceState) {
        ....
        mHandler = new Handler() {
           @Override
           public void handleMessage(Message msg) {
               Drawable d2;
               d2 = (Drawable)msg.obj;
               imageSock.setImageDrawable(d2); // to set the arrived image in the imageshow object
           }
        };
        ...
        cThread = new Thread(new ClientThread());
        rThread = new Thread(new RcvThread());
        cThread.start();
    }

    public class ClientThread implements Runnable {
        public void run() {
           // thread used for socket connection.
           ...
           rThread.start(); // once the connection has been established
           ...
        }
    }

    @SuppressLint("HandlerLeak")
    public class RcvThread implements Runnable {
         public void run() {
            while (connected) {
               try {
                  InputStream inputStream = socket.getInputStream();
                  Drawable d = Drawable.createFromStream(inputStream, null);
                  Message msg = new Message();
                  msg.obj = d;
                  mHandler.sendMessage(msg);
               } catch (Exception e) {
                  Log.e("SocketConnectionv02Activity", "C: ErrorRCVD", e);
               }
            }
         }
    }
 } 
```

我面临的问题是，在正确显示 Android 应用程序接收到的第一张图像后，不显示接收到的下一张（正确接收到的）图像并留下显示空白的 imageview 对象。

有什么建议/想法来解决这个问题吗？

提前感谢您提供的任何帮助。

编辑：

```
public class DisplayNewActivity extends Activity {
    ...
    @Override
    public void onCreate(Bundle savedInstanceState) {
        ....
        mHandler = new Handler() {
           @Override
           public void handleMessage(Message msg) {
               Bitmap d2;
               d2 = (Bitmap)msg.obj;
               imageSock.setImageBitmap(d2); // to set the arrived image in the imageshow object
           }
        };
        ...
        cThread = new Thread(new ClientThread());
        rThread = new Thread(new RcvThread());
        cThread.start();
    }

    public class ClientThread implements Runnable {
        public void run() {
           // thread used for socket connection.
           ...
           rThread.start(); // once the connection has been established
           ...
        }
    }

    @SuppressLint("HandlerLeak")
    public class RcvThread implements Runnable {
         public void run() {
            while (connected) {
               try {
                  DataInputStream in = new DataInputStream(socket.getInputStream());
                  Bitmap d = BitmapFactory.decodeStream(in);
                  Message msg = new Message();
                  msg.obj = d;
                  mHandler.sendMessage(msg);
               } catch (Exception e) {
                  Log.e("SocketConnectionv02Activity", "C: ErrorRCVD", e);
               }
            }
         }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:33:28.513

听起来您遇到的问题是在接收数据后将数据解码为正确的图像。

我可能建议不要使用`Drawable.createFromStream()`，而是使用`BitmapFactory.decodeStream()`或手动将数据下载到`byte[]`第一个并使用`BitmapFactory.decodeByteArray()`. 有时，如果前者在接收数据时不能充分跟上解码器的速度，则后者很有用。

您当前使用的方法实际上最终调用了`BitmapFactory.descodeResourceStream()`，它用于从本地 res/ 包中读取图像数据，而不是从远程套接字中读取图像数据。

# javascript - Disqus 2012 造型

> ID：13656314
> 
> 赞同：3
> 
> 时间：2012-12-01T04:19:14.830
> 
> 标签：javascript, jquery, html, css, disqus

有谁知道如何设计新的**Disqus 2012**插件？**我相信它是通过iFrame**拉到您的网站上的。我想知道您是否可以通过 jQuery 定位特定类并在此之后更改属性。

您可以在此处查看示例：[http ://www.iamaaron.com/beta-five/consistent.html](http://www.iamaaron.com/beta-five/consistent.html)

我无法通过 jQuery 定位任何**Disqus**元素……我做错了吗？这是我的 jQuery 代码：

```
jQuery("#disqus-thread .publisher-anchor-color a").css({color:"#36B1BF"}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T04:24:28.927

不幸的是你不能。你所能做的就是提供基本的CSS，它会承担这一点。如果你改变你`a`的东西，它会解释它。我做了一些hackery来隐藏顶部的按钮，例如使用负值`margin-top`。但是，您无法通过 jQuery 更改任何内容，因为它是不在您服务器上的 iFrame。我知道这不是你要找的答案，但它就是答案。

在此页面上搜索“css”，您就会明白我的意思。

[http://help.disqus.com/customer/portal/articles/526768-introducing-disqus-2012-and-faq-](http://help.disqus.com/customer/portal/articles/526768-introducing-disqus-2012-and-f-a-q-)

# google-maps - 为什么我不能使用融合表绘制这个多边形

> ID：13656316
> 
> 赞同：0
> 
> 时间：2012-12-01T04:19:45.130
> 
> 标签：google-maps, google-fusion-tables

使用融合表绘制以下矩形（多边形）时出现问题。有人知道为什么它没有显示在融合表层中吗？

```
<Polygon><outerBoundaryIs><LinearRing><coordinates>
3.27852177628523660,49.83398437500000000 
3.27852177628523660,107.84179687500000000 
39.32224116462732000,107.84179687500000000 
39.32224116462732000,49.83398437500000000 
3.27852177628523660,49.83398437500000000
</coordinates></LinearRing></outerBoundaryIs></Polygon> 
```

我通过提取地图的绑定信息来创建此查询。您只能从地图中提取西南和东北方向。我使用这些计算了其他界限。我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:41:44.907

坐标应采用`lng,lat`KML 格式，而不是`lat,lng`

[https://developers.google.com/kml/documentation/kmlreference#polygon](https://developers.google.com/kml/documentation/kmlreference#polygon)

# sql-server - 在 Select 语句中返回带刻度的除数结果

> ID：13656317
> 
> 赞同：0
> 
> 时间：2012-12-01T04:20:08.530
> 
> 标签：sql-server, sql-server-2008, tsql

我正在尝试运行此查询，但在进行数学计算后似乎没有正确格式化数字。比例应为 2，但不会按应有的方式显示。

```
SELECT 30 / 60 as Diff FROM Table 
```

这返回为`0`

```
SELECT Convert( Numeric(8,2), 30 / 60 ) as Diff FROM Table 
```

这返回为`0.00`

我如何让它`0.50`根据需要返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:26:13.017

您可以尝试以下方法，实现它的方法很少。在字段本身上使用变量`CAST`，或者只是执行。`CONVERT`

```
 SELECT (CAST(30 AS DECIMAL(8,2)) / CAST(60 AS DECIMAL(8,2))) as Diff FROM Table

 SELECT (CAST(30/60) AS DECIMAL(8,2)) as Diff FROM Table

 SELECT (30/60.0) as Diff FROM Table;

 SELECT CONVERT(DECIMAL(8,2), 30/60.0) as Diff FROM Table 
```

请查看此[MSDN 文章以供进一步参考](http://msdn.microsoft.com/en-us/library/ms187928.aspx)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T04:24:51.883

在进行除法或除实数而不是整数之前转换为数字。在进行整数运算时，任何小数部分都会被丢弃。在分数被删除后转换对你没有任何好处。

```
SELECT CONVERT(NUMERIC(8,2),30.0/60.0) AS DIFF FROM TABLE 
```

或者如果选择列而不是使用数字

```
SELECT CONVERT(NUMERIC(8,2),columnA)/CONVERT(NUMERIC(8,2),columnB) AS DIFF FROM TABLE 
```

（转换两者只是为了确保根据我们想要的规则完成划分）

# mongodb - MongoDB 的 JSF 视图和 ObjectID 保存操作失败

> ID：13656322
> 
> 赞同：0
> 
> 时间：2012-12-01T04:21:35.687
> 
> 标签：mongodb, jsf, primefaces

免责声明：我是 JSF 的新手，但仍然找不到任何其他问题来帮助我解决这个问题。

我在 JSF 中有一个 CRUD 视图（如果这很重要，更具体地说是在 primefaces 对话框中）当我将 ID 设为 long 时它工作正常，但是当我使用 ObjectID 作为 ID 时（我使用 ObjectID，因为 Morphia 会自动生成一个 ID如果使用 ObjectID）。

如前所述，如果我使用 long ID 这工作正常。

这是 ObjectID 的输入字段和保存按钮的操作（我显示 ObjectID，因为保存方法返回 null ObjectID，如果不这样做，则只创建一条新记录）。

```
<p:inputText value="#{dealerBean.selectedDealer.id}"
    style="display:none;"  />

<p:commandButton id="saveButton" value="Save" update="dealers"
    actionListener="#{dealerBean.save}"
    title="Save" type="Submit" oncomplete="dealerDialog.hide()">
</p:commandButton>

//type of selectedDealer
@com.google.code.morphia.annotations.Entity
class Dealer {
    @com.google.code.morphia.annotations.Id
    @Property //Generates getters and setter in XTend
    org.bson.types.ObjectId id;
} 
```

我的猜测是，它在反序列化 ObjectID 时遇到了问题（尽管控制台中没有错误消息），但我对 JSF 的了解不够深入，无法知道从那里去哪里，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:19:30.420

感谢 kolossus 在上述编辑中的回答。这是我使用的代码（抱歉，它使用的是 groovy 而不是 Java）（由于 XTend 和验证的问题，我从 Xtend 切换到了 groovy）

```
@FacesConverter("objectId")
class ObjectIdConverter implements Converter {
    def Object getAsObject( FacesContext context, UIComponent component,
                               String value) {
        if(value == null || "".equals(value) || value.size() < 10) {
            return null
        }
        return new ObjectId(value)
    }

    def String getAsString(FacesContext context, UIComponent component,
                               Object value) {
        if(value == null){
            return null
        }
        if (value instanceof ObjectId) {
            return (value as ObjectId).toString()
        } else {
            throw new IllegalArgumentException( "Cannot convert "+ value +" in       KeyConverter" );
        }
    }
} 
```

# mysql - 提高 Solr 和 MySQL 对的性能（使用 JPA 通过“WHERE IN”连接）

> ID：13656323
> 
> 赞同：3
> 
> 时间：2012-12-01T04:21:37.823
> 
> 标签：mysql, sql, jpa, solr

我有一个由 Solr 索引的 MySQL 数据库。我使用 Solr（快速）执行搜索，并使用 JPA 从数据库中检索 Solr 搜索中的每个结果。JPA 在`WHERE IN`非常慢的数据库上运行查询。

有没有办法让这个过程更快，或者重构设计以提高性能？

我刚刚将整个应用程序从使用 MySQL 的全文搜索重构为使用 Solr，现在性能更差了。

注意：我需要立即对所有结果进行计算，因此我不能使用分页。

Java代码：

```
 SolrDocumentList documentList = response.getResults();
    Collection<String> listingIds = new ArrayList<>();
    for(SolrDocument doc : documentList) {
        String listingId = (String) doc.getFirstValue("ListingId");
        listingIds.add(listingId);
    }

    Query query = em.createNamedQuery("getAllListingsWithId");
    query.setParameter("listingIds", listingIds);
    List<ListedItemDetail> listings = query.getResultList(); 
```

命名查询：

```
<query>Select listing from ListingSet listing where listing.listingId in :listingIds</query> 
```

附加信息：

`SHOW CREATE TABLE ListingSet`产生[缩短]：

```
CREATE TABLE `listingset` (
  `LISTINGID` int(11) NOT NULL,
  `STARTDATE` datetime DEFAULT NULL,
  `STARTPRICE` decimal(10,2) DEFAULT NULL,
  `TITLE` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`LISTINGID`),
  KEY `FK_LISTINGSET_MEMBER_MEMBERID` (`MEMBER_MEMBERID`),
  CONSTRAINT `FK_LISTINGSET_MEMBER_MEMBERID` FOREIGN KEY (`MEMBER_MEMBERID`) REFERENCES `member` (`MEMBERID`),
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

**调查生成的 SQL**

查看生成的 SQL，JPA 会针对单个 JPA 查询运行大量 SQL 查询。ListingSet 表有 7 个与之链接的表，并为每个表运行一个单独的 SELECT 查询以获取每个列表 ID（其中有 1,000 - 10,000 个）。所以我的一个 JPA 查询被炸成了大约 7,000 个查询！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:57:00.010

以下只是关于调试问题的个人想法：

*   打开 mysql 查询日志并检查 JPA 不访问 MySQL 每个 ListingId 的每个查询。

    mysql -uroot -pYOUR-PASSWORD -e "SET GLOBAL log_output = 'FILE'；设置 GLOBAL general_log_file = '/tmp/mysql.log'；SET GLOBAL general_log = 'ON'；" 尾 -f /tmp/mysql.log

*   检查性能是否是由 MySQL 引起的，在您的 MySQL 数据库中运行等效的 SQL。

    从 ListingSet 中选择列表，其中列表 ID 位于（将您的真实列表 ID 放在这里）；

    确保在 ListingId 列上有索引（也许很有可能索引已经存在）

*   由于您只从 MySQL 读取行，也许您可​​以为更多从属设置 Replicate，然后将您的 ListingIds 拆分到所有从属 MySQL，然后合并结果。 [http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:49:33.920

该问题是由我使用 JPA 引起的。由于我的实体有很多关系，单个查询会爆炸成 1,000-10,000 个查询。

解决方法是在 JPA 中使用[Batch Processing](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Batch_Fetching)来防止 ORM n+1 查询问题。批处理导致 JPA 一次从相关表中请求所有相关行，而不是为每个实体一次请求。当一个查询返回*很多*结果，并且被查询的实体有很多关系时，这种解决方案是合适的。

确定 JPA 潜在问题的最简单方法是启用更精细的日志记录。对于 EclipseLink，将属性添加到`persistence.xml`：

```
 <property name="eclipselink.logging.level" value="FINEST"/> 
```

请注意，在 EclipseLink 的默认设置下生成的日志记录仅显示查询的 JPQL 形式。

# php - 如何使用 ajax 加载一行 youtube 视频，然后转到下一行

> ID：13656325
> 
> 赞同：0
> 
> 时间：2012-12-01T04:22:10.527
> 
> 标签：php, javascript, jquery, ajax, wordpress

我知道这个问题有点含糊，但我有一个网页，它只是一堵 youtube 视频墙。我将视频分成称为行的 div，每行大约有 3 个，也许 4 个视频。在我的脚本中，我使用 jQuery 函数为每个视频创建 SWFobjects，并且我有一些简单的 php 在 wordpress 循环中创建每一行视频。

我的问题是；有没有办法加载一行，3或4个视频，然后完成后继续wordpress循环到下一行，依此类推。我相信我的答案在于 ajax，但我没有这方面的经验。我知道 jquery 有一些很棒的工具和方法可以用来帮助处理 ajax，但我不知道从哪里开始，甚至不知道我在寻找什么。

从字面上看，该网页所做的只是循环遍历下面的这段代码，这减少了一点。但是它运行这个函数 3 次然后转到下一行并再运行 3 次，直到 wordpress 说该类别中没有更多帖子。我怎样才能让 ajax 一次做一行而不是“一次全部”。

```
<script type="text/javascript">
    var youtubeID = '<?php echo $urlYoutube; //pass the php var to js var?>';
    var divID = '<?php echo $divName;?>';
    getVideoSML(youtubeID, divID);
</script> 
```

如果不是答案，将不胜感激朝着正确方向的美好而慷慨的“推动”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:33:46.920

```
<script type="text/javascript">
    var youtubeID = '<?php echo $urlYoutube; //pass the php var to js var?>';
    var divID = '<?php echo $divName;?>';
    getVideoSML(youtubeID, divID);
</script> 
```

这不是您将数据从 PHP 传递到 Javascript 的方式。您应该阅读一些有关[JSON](http://en.wikipedia.org/wiki/JSON)和[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)的内容。[互联网上有很多教程， jQuery](http://jquery.com/)让一切变得非常简单（也可以看看）。

我不认为我有这个问题，但我认为你在理解循环时遇到了问题。AJAX 只是一种动态和异步加载页面的方式。如果我做对了，您应该使用 2 个循环：

```
$vps = 4; // number of videos per row
while (/* there are rows to be printed */) {
    for ($i = 0; $i < $vpr; $i++) {
        /* print the video */
    }
} 
```

# java - 在 JavaFX 和 Swing 控件之间切换

> ID：13656326
> 
> 赞同：0
> 
> 时间：2012-12-01T04:22:20.960
> 
> 标签：java, swing, javafx-2, javafx

我正在使用 JavaFX 控件开发一个摆动应用程序。在这个应用程序中，我有三个控制按钮`WebView`和`JTable`。单击`button1`表时应在屏幕上添加并删除 Web 视图，而单击其他按钮时应删除表并添加 Web 视图。

我正在使用以下代码。

```
 import javafx.application.Platform;
import javafx.scene.Scene;
import javafx.scene.web.*;
import javafx.stage.Stage;
import javafx.embed.swing.JFXPanel; 
import javafx.scene.Group;
import javax.swing.*;
import java.io.*;
import java.awt.*;
import java.awt.event.*;
 public class webviewtestclass extends JFrame implements ActionListener {
 JFXPanel fxpanel,fxpanel1;
 static String filepath;
JTable table;
  public  webviewtestclass()
  {
    setLayout(null);
    JButton b1= new JButton("OK");
    JButton b2= new JButton("OKK");
    add(b1);
    add(b2);
    b1.setBounds(20,50,50,30);
    b2.setBounds(70,50,50,30);
   b1.addActionListener(this);
   b2.addActionListener(this);

   fxpanel= new JFXPanel();
   add(fxpanel);
   fxpanel.setBounds(10,50,1000,800);

   Object obj=new Object[50][20];
   String title[]={"head1","head2"};
    table=new JTable(title,obj);
   add(table);

 }

   public void actionPerformed(ActionEvent ae)
   {
   if(ae.getActionCommand().equals("OK"))
    {
     remove(fxpanel);
      add(table);   

     }
     if(ae.getActionCommand().equals("OKK"))
     {
      remove(table);
      add(fxpanel);   

    }
     Platform.runLater(new Runnable() {
     public void run()
      {
        initFx(fxpanel);
      }}
        );
     }

  private static void initFx(final JFXPanel fxpanel)
  {
    String htmlpath="d:/lcrux/html/";
    Group group= new Group();
    Scene scene= new Scene(group);
    fxpanel.setScene(scene);    
    WebView webview = new WebView ();
    group.getChildren().add(webview);
    webview.setMinSize(1200,800);
     webview.setMaxSize(1200,800);  

      webview.setVisible(true);
      final WebEngine eng = webview.getEngine();
      File htmlFile = new File(htmlpath+filepath);
        try
        {
        eng.load(htmlFile.toURI().toURL().toString());
        }
        catch(Exception ex)
        {
        }
    }
  public static void main(final String args[])
    {

         webviewtestclass frm=new webviewtestclass();
         frm.show();

    }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:34:54.190

将两个组件放在 a[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)中以在它们之间进行交换。[在这个答案](https://stackoverflow.com/a/5786005/418556)`CardLayout`中可以看到使用 a 的代码。

![](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

# bash - 如何将参数传递给我需要使用 '/bin/bash' 执行的 myscript.sh

> ID：13656327
> 
> 赞同：0
> 
> 时间：2012-12-01T04:22:25.347
> 
> 标签：bash, shell, bin

如何将参数传递给我需要使用'/bin/bash'调用的myscript.sh，如下所示

`/bin/bash -c myscript.sh`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:24:06.063

```
./myscript.sh arg1 arg2 arg3 
```

或者

```
/bin/bash myscript.sh arg1 arg2 arg3 
```

（您不需要该`-c`选项）

在脚本中，您可以通过以下方式检索它们：

```
var1=$1
var2=$2 
```

# struts2 - Struts2错误：请求的资源（）不可用

> ID：13656329
> 
> 赞同：0
> 
> 时间：2012-12-01T04:22:46.727
> 
> 标签：struts2

你能帮我解决这个问题吗？当我尝试编写简单的 Struts2 HelloWorld 程序时。一直有这个错误：请求的资源（）不可用。你能帮我解决吗？谢谢！

![jar 文件](../Images/b50327e5010b8e1fb46f5521f6dfdd95.png)

## JSP 文件

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
hello world
</body>
</html> 
```

## 这是 HelloWorld.java

```
package com.test.action;

public class HelloWorld {
    public String execute()throws Exception
    {
        return "success";
    }
} 
```

## struts.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

    <struts>

        <package name="struts2" extends="struts-default">

            <action name="helloworld" class="com.test.action.HelloWorld">
                <result name="success">/helloworld.jsp</result>
            </action>

        </package>

    </struts> 
```

## web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

## 例外

```
Nov 30, 2012 11:07:54 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
Nov 30, 2012 11:07:54 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:test' did not find a matching property.
Nov 30, 2012 11:07:54 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Hibernate' did not find a matching property.
Nov 30, 2012 11:07:54 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:struts2' did not find a matching property.
Nov 30, 2012 11:07:54 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Nov 30, 2012 11:07:54 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1232 ms
Nov 30, 2012 11:07:54 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Nov 30, 2012 11:07:54 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Nov 30, 2012 11:07:55 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:269)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Nov 30, 2012 11:07:55 PM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
Nov 30, 2012 11:07:55 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/struts2] startup failed due to previous errors
Nov 30, 2012 11:07:55 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Nov 30, 2012 11:07:55 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Nov 30, 2012 11:07:55 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/64  config=null
Nov 30, 2012 11:07:55 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 821 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:52:10.873

`<filter-class>org.apache.struts2.dispatcher.FilterDispatcher<filter-class>`并删除不需要的 jar 文件。您只在 lib 文件夹中保留以下 jar 文件

commons-logging-1.0.4.jar freemarker-2.3.8.jar ognl-2.6.11.jar struts2-core-2.0.11.jar xwork-2.0.4.jar。

问候，那伽业。

# java - 需要 Java Singleton 解释

> ID：13656331
> 
> 赞同：2
> 
> 时间：2012-12-01T04:23:19.353
> 
> 标签：java, thread-safety, singleton

通常我使用第一个实现。几天前，我发现了另一个。谁能解释一下这两种实现之间的区别？第二个实现是线程安全的？在第二个例子中使用内部类有什么好处？

```
//--1st Impl
public class Singleton{

      private static Singleton _INSTANCE;

      private Singleton() {}
      public static Singleton getInstance(){
          if(_INSTANCE == null){
               synchronized(Singleton.class){
                      if(_INSTANCE == null){
                          _INSTANCE = new Singleton();
                      }
               }
          }
      return _INSTANCE;
      }  
}

//--2nd Impl
public class Singleton {
      private Singleton() {}

      private static class SingletonHolder { 
            private static final Singleton _INSTANCE = new Singleton();
      }

      public static Singleton getInstance() {
            return SingletonHolder._INSTANCE;
      }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T04:27:27.483

第一个实现使用所谓的“双重检查锁”。这是一件非常糟糕的事情。它*看起来*是线程安全的，但实际上并非如此。

第二种实现确实是线程安全的。

关于为什么第一个实现被破坏的解释相当复杂，所以我建议您获取一份 Brian Goetz 的[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)以获取详细解释。简短的版本是允许编译器`_INSTANCE`在构造函数完成之前分配变量，这可能导致第二个线程看到部分构造的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T04:28:20.960

第一个实现只有且只有当`_INSTANCE`变为易失性时才是线程安全的。第二个是线程安全的，因为只有在类加载器加载`_INSTANCE`后才会初始化。`SingletonHolder`

因此，当访问内部类时（比加载整个程序要晚得多），类加载器会加载内部类并初始化变量。因此，对于以后的任何访问，该对象都是现成的，因此该方法`getInstance()`是线程安全的。

第二种实现的美妙之处在于，您不必担心同步或计入类加载器为您做的事情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T05:10:55.970

#1 旨在确保延迟初始化。但是，在给定的情况下，#2 也确保了延迟初始化。_INSTANCE 仅在加载 Singleton.class 时创建，并且 Singleton.class 在首次调用 getSingleton() 时加载。类中没有其他方法。不需要双重检查锁定。当然在#1 _INSTANCE 应该是易变的。

注意：我不同意双重检查锁定是不好的。如果正确实施，它可能非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T04:30:37.677

第一个代码片段是[双重检查锁定习惯用法](http://en.wikipedia.org/wiki/Double-checked_locking)的示例，它曾经非常流行，但现在[已知不安全](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)，永远不应该使用。

第二个片段使用`final`Java 语言规范定义的类加载语义和关键字语义的组合，以确保延迟初始化和线程安全，因此要好得多。

# php - PHP 确认电子邮件不发送

> ID：13656332
> 
> 赞同：1
> 
> 时间：2012-12-01T04:23:30.180
> 
> 标签：php, mysql, email

我正在尝试在 php 中创建用户注册和电子邮件确认页面。这是注册用户和发送确认电子邮件的代码。一切运行良好，它将用户注册到数据库中，但它根本不向用户发送电子邮件。这是代码。

```
<?php

include('sqlconfig.php');

$tbl_name=temp_users;

/*Email Confirmation Code*/
$confirm_code=md5(uniqid(rand())); 

$Email=mysql_real_escape_string($_POST['email']);
$First_Name=mysql_real_escape_string($_POST['firstname']);
$Last_Name=mysql_real_escape_string($_POST['lastname']);
$Password=mysql_real_escape_string($_POST['password']);
$Confirm_pass=mysql_real_escape_string($_POST['conpassword']);
$Phone=mysql_real_escape_string($_POST['phone']);

/*Insert the data into the base*/
$sql = 'INSERT INTO temp_users(confirm, FirstN, LastN, password, confirmpassword, phone, email)
VALUES("'.$confirm_code.'", "'.$First_Name.'", "'.$Last_Name.'", "'.$Password.'", "'.$Confirm_pass.'", "'.$Phone.'", "'.$Email.'")';
$result=mysql_query($sql);

/*If data succesfully inserted proceed with this*/
if($result){

/*Send Email here*/
$to=$Email;

$subject="Newgenstudios Account Confirmation";

/*From*/
$header="From:Newgenstudios <noreply@newgenstudios.com>";

/* Your message */
$message="Welcome to Newgenstudios! Thank you for registering. \r\n";
$message="Here is your Comfirmation link \r\n";
$message.="Click on this link to activate your account \r\n";
$message.="http://www.newgensv01.dyndns.org/confirmation.php?passkey=$confirm_code";
$message="Account Details: \r\n";
$message="Name: $First_Name $Last_Name \r\n";
$message="Email: $Email \r\n";
$message="Password: $Password \r\n";
$message="Phone: $Phone \r\n";
$message="\r\n";
$message="Did you not register? Then please disregard this message. \r\n";

/* Send Email */
$sentmail = mail($to,$subject,$message,$header);
}

/*If not found*/
else {
echo "Not found your email in our database";
}

/* email succesfully sent */
if($sentmail){
echo "Your Confirmation link Has Been Sent To Your Email Address.";
}
else {
echo "Cannot send Confirmation link to your e-mail address";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:31:51.200

使用 PHP 附带的 mail() 函数不是发送电子邮件的好方法，因为它很容易被标记为垃圾邮件，并且您需要[设置标题](http://sg2.php.net/manual/en/function.mail.php)以确保您正确发送 HTML 电子邮件。

所以我建议你看看[PHPMailer](http://sourceforge.net/projects/phpmailer/)或 [SwiftMailer](http://swiftmailer.org/)，它们支持 HTML，支持不同的 mime 类型和 SMTP 身份验证

# smarty - 在 Prestashop 中，如何获取添加的最后一个产品的类别？

> ID：13656341
> 
> 赞同：0
> 
> 时间：2012-12-01T04:26:11.037
> 
> 标签：smarty, prestashop

我对 Prestashop、php 和 Smarty 没有太多经验。如何获取 lastProductAdded 的类别？我正在尝试将“继续购物”按钮重定向到添加的最后一个产品的类别。

`<a href="{$link->getCategoryLink($lastProductAdded.category->id)|escape:'htmlall':'UTF-8'}" class="button_large" title="{l s='Continue shopping'}">&laquo; {l s='Continue shopping'}</a>`

以下代码似乎不起作用，出于某种原因，将类别 ID 设为 0。（我也不知道这是否有意义）任何帮助将不胜感激。谢谢！

（变量 lastProductAdded 和函数 getCategoryLink 已经内置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:00:53.887

对于 Prestashop 1.4.x，您需要使用以下代码修改 Cart::getLastProduct()：

```
public function getLastProduct()
{
    $sql = '
        SELECT cp.`id_product`, cp.`id_product_attribute`, p.`id_category_default`
        FROM `'._DB_PREFIX_.'cart_product` cp
        JOIN `'._DB_PREFIX_.'product` p ON (cp.`id_product` = p.`id_product`)
        WHERE `id_cart` = '.(int)($this->id).'
        ORDER BY cp.`date_add` DESC';
    $result = Db::getInstance()->getRow($sql);
    if ($result AND isset($result['id_product']) AND $result['id_product'])
        return $result;
    return false;
} 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:10:00.880

你需要使用`$lastProductAdded.id_category_default`而不是`$lastProductAdded.category->id`

问候

# python - Python：二进制到十进制转换

> ID：13656343
> 
> 赞同：27
> 
> 时间：2012-12-01T04:26:14.020
> 
> 标签：python, function, binary, decimal

> **可能重复：**
> [将二进制字符串转换为 int](https://stackoverflow.com/questions/8928240/convert-binary-string-to-int)

如何在 Python 中将此二进制值“101011111”转换为十进制形式？

该函数将二进制数转换为十进制数。

输入：字符串 b：二进制数

输出： int d：b 的十进制表示

```
def Binary_to_Decimal(b):
    #what needs to be filled in
    return d 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-12-01T04:29:13.660

您可以使用允许基本规范的 int 强制转换。

```
int(b, 2)  # Convert a binary string to a decimal int. 
```

# c - C Minishell - 需要杀死僵尸以进行管道实现

> ID：13656344
> 
> 赞同：3
> 
> 时间：2012-12-01T04:26:37.797
> 
> 标签：c, shell, unix, parent-child, wait

所以我正在用 C 构建一个 minishell（用于 unix）。我只是想出了如何让管道工作，但是我遇到了僵尸问题。假设我有：

```
echo a | echo b | echo c 
```

当它应该输出“c”时，它不会输出任何东西。但是，如果我告诉我的 shell 执行每个子命令，然后在继续执行下一个命令之前等待，它就可以正常工作。然而，这不是一个真正的解决方案，因为我希望如果你不等待，你会得到管道之间的自然协调。

一旦执行最后一个命令，我很难设计一种有效的方法来等待所有僵尸。我在最后一次执行之后尝试这样做，但在 shell 退出之前：

```
while(waitpid(-1, NULL, WNOHANG) > 0); 
```

然而，没有运气。到目前为止，唯一可行的方法是告诉我的 shell 执行每个子命令，然后在开始下一个命令之前等待。这是整个主 shell 文件：

[http://pastebin.com/YV96mFy7](http://pastebin.com/YV96mFy7)

处理输入的主函数（processline()）从第 105 行开始。

感谢您的帮助，如果您需要更多内容，请询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:32:32.277

改变这个

```
while(waitpid(-1, NULL, WNOHANG) > 0); 
```

到：

```
while(wait(NULL) > 0);

/* which is equivalent to */
while(waitpid(-1, NULL, 0) > 0); 
```

这将导致父进程等待所有子进程完成，如果您不希望阻止父进程，则改为捕获`SIGCHLD`并调用`wait()`信号处理程序。

# vb.net - vb.net 游戏手柄支持，部分工作

> ID：13656346
> 
> 赞同：1
> 
> 时间：2012-12-01T04:27:01.630
> 
> 标签：vb.net, class, input, gamepad-api

我在论坛上找到了以下课程代码。它适用于游戏手柄（上、下、左、右），但按钮的所有代码都丢失了。任何人都可以填空吗？

这有效：

```
Private Sub joystick1_Up() Handles joystick1.Up
    moveUp()
End Sub 
```

这不会：

```
Private Sub joystick1_buttonPressed() Handles joystick1.buttonPressed
    MsgBox(joystick1.btnValue)
End Sub 
```

因为没有“buttonPressed”事件，我不知道怎么写。

这是课程：

```
Imports System.ComponentModel
Imports System.Runtime.InteropServices

Public Class joystick
    Inherits NativeWindow

    Private parent As Form
    Private Const MM_JOY1MOVE As Integer = &H3A0

    ' Public Event Move(ByVal joystickPosition As Point)
    Public btnValue As String
    Public Event Up()
    Public Event Down()
    Public Event Left()
    Public Event Right()

    <StructLayout(LayoutKind.Explicit)> _
    Private Structure JoyPosition
        <FieldOffset(0)> _
        Public Raw As IntPtr
        <FieldOffset(0)> _
        Public XPos As UShort
        <FieldOffset(2)> _
        Public YPos As UShort
    End Structure

    Private Class NativeMethods

        Private Sub New()
        End Sub

        ' This is a "Stub" function - it has no code in its body.
        ' There is a similarly named function inside a dll that comes with windows called
        ' winmm.dll. 
        ' The .Net framework will route calls to this function, through to the dll file.
        <DllImport("winmm", CallingConvention:=CallingConvention.Winapi, EntryPoint:="joySetCapture", SetLastError:=True)> _
        Public Shared Function JoySetCapture(ByVal hwnd As IntPtr, ByVal uJoyID As Integer, ByVal uPeriod As Integer, <MarshalAs(UnmanagedType.Bool)> ByVal changed As Boolean) As Integer
        End Function

    End Class

    Public Sub New(ByVal parent As Form, ByVal joyId As Integer)
        AddHandler parent.HandleCreated, AddressOf Me.OnHandleCreated
        AddHandler parent.HandleDestroyed, AddressOf Me.OnHandleDestroyed
        AssignHandle(parent.Handle)
        Me.parent = parent
        Dim result As Integer = NativeMethods.JoySetCapture(Me.Handle, joyId, 100, True)
    End Sub

    Private Sub OnHandleCreated(ByVal sender As Object, ByVal e As EventArgs)
        AssignHandle(DirectCast(sender, Form).Handle)
    End Sub

    Private Sub OnHandleDestroyed(ByVal sender As Object, ByVal e As EventArgs)
        ReleaseHandle()
    End Sub

    Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
        If m.Msg = MM_JOY1MOVE Then
            ' Joystick co-ords.
            ' (0,0) (32768,0) (65535, 0) 
            '
            '
            '
            ' (0, 32768) (32768, 32768) (65535, 32768)
            '
            '
            '
            '
            ' (0, 65535) (32768, 65535) (65535, 65535)
            '

            Dim p As JoyPosition
            p.Raw = m.LParam
            ' RaiseEvent Move(New Point(p.XPos, p.YPos))
            If p.XPos > 16384 AndAlso p.XPos < 49152 Then
                ' X is near the centre line.
                If p.YPos < 6000 Then
                    ' Y is near the top.
                    RaiseEvent Up()
                ElseIf p.YPos > 59536 Then
                    ' Y is near the bottom.
                    RaiseEvent Down()
                End If
            Else
                If p.YPos > 16384 AndAlso p.YPos < 49152 Then
                    ' Y is near the centre line
                    If p.XPos < 6000 Then
                        ' X is near the left.
                        RaiseEvent Left()
                    ElseIf p.XPos > 59536 Then
                        ' X is near the right
                        RaiseEvent Right()
                    End If
                End If
            End If
        End If
        If btnValue <> m.WParam.ToString Then
            btnValue = m.WParam.ToString
        End If
        MyBase.WndProc(m)
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:32:05.783

我不会使用较旧的 winmm，而是使用 XInput（或者如果可以，使用 XNA）。

有几种方法可以做到这一点。一个步骤是直接使用[MSDN 论坛上这个问题](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/19b19285-ae5d-42dc-86d5-0f66619be33b)所概述的 XInput dll 。不过，这仍然相当丑陋。可能“更简单”的方法是使用存在的包装库，如[SlimDX](http://slimdx.org/)或[SharpDX](http://sharpdx.org/)。

通过 SlimDX 或 SharpDX 使用 XInput 的优点之一是它也可以在 Windows 8 的 Windows 应用商店应用程序中工作:)。

这是[SharpDX 中 GamePad 示例的片段](http://code.google.com/p/sharpdx/source/browse/#git/Samples/XInput/XGamepadApp)：

C＃

```
var controllers = new[] { new Controller(UserIndex.One), new Controller(UserIndex.Two), new Controller(UserIndex.Three), new Controller(UserIndex.Four) };

// Get 1st controller available 
Controller controller = null; 
foreach (var selectControler in controllers) 
{ 
    if (selectControler.IsConnected) 
    { 
        controller = selectControler; 
        break; 
    }
} 
```

VB

```
Dim controllers As New List(Of Controller)
controllers.Add(New Controller(UserIndex.One))
controllers.Add(New Controller(UserIndex.Two))
controllers.Add(New Controller(UserIndex.Three))
controllers.Add(New Controller(UserIndex.Four))

Dim controller as Controller = Nothing; 
For Each selectController In controllers
    If selectController.IsConnected Then
        controller = selectController
        Exit For
    End If
Next 
```

然后，您可以使用以下方法使状态正常工作：

```
var state = controller.GetState(); 
```

您会注意到 XInput 使用了更多的轮询模型，因此您需要偶尔检查按钮按下以检测到这一点。如果您需要连续轮询，您可能可以启动一个新任务来执行此操作。

# html - 导航栏链接/项目与 CSS 大小相同

> ID：13656352
> 
> 赞同：0
> 
> 时间：2012-12-01T04:28:20.353
> 
> 标签：html, css, navigation

这是我从 css 按钮生成器获得的代码，我想知道如何使它们都具有相同的大小，而不是使按钮调整为文本长度。

```
 font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #42aaff 0%,
        #003366);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#42aaff),
        to(#003366));
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    border: 1px solid #003366;
    -moz-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,0.5);
    -webkit-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,0.5);
    box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(255,255,255,0.5);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.7),
        0px 1px 0px rgba(255,255,255,0.3);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:36:43.220

只需根据您最大的内容给它们一个固定的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:41:07.680

您可以使用固定 px 或百分比来执行此操作。但诀窍是然后执行 text-align:center 并且我会将它们放入列表中：

[http://codepen.io/anon/pen/CfjcG](http://codepen.io/anon/pen/CfjcG)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T05:31:04.387

好吧...您需要从中制作一个元素，该代码只是为您提供您在按钮创建器上设计的任何内容所需的效果，您需要将其应用于具有特定大小的元素..例子

```
.buttons{
    width:60px;
    height:30px;
    float:left;
    (all the button stuff)
} 
```

如果你想要它不同的大小，只需改变宽度和高度的值......这应该可以......让我知道它是否有效...... :)

# python - 简单的python文件写入（头脑空白）

> ID：13656354
> 
> 赞同：0
> 
> 时间：2012-12-01T04:28:34.043
> 
> 标签：python, file-handling

如何检查文件的第一行是否被占用？

```
f = open('whatever.txt','w')
f.write('first line')
f.close()
f = open('whatever.txt','w')
f.write('second line')
f.close() 
```

第二行只是覆盖。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:19:05.153

第二次`'a'`用作您的模式参数，以便它追加而不是覆盖。请参阅[`open()` 内置函数的文档](http://docs.python.org/2/library/functions.html#open)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:19:31.693

'w' 以写入模式打开文件。使用 'a' 表示附加模式。

# sql - 动态临时表

> ID：13656355
> 
> 赞同：0
> 
> 时间：2012-12-01T04:28:41.720
> 
> 标签：sql

我必须在 sql server 中创建一个基于列列表的动态临时表，例如，我有一个表 ListOfColumns，其中包含许多列名称，这些列引用了一个真实的表

```
ListOfColumns
ColumnNameA
ColumnNameB
ColumnNameC 
```

我创建了一个函数来获取包含所有这些列的字符串，格式如下：

```
"ColumnNameA, ColumnNameB, ColumnNameC" 
```

现在我需要根据名为 Report 的真实表中的那些列创建我的临时表。我可以有更多或更少的列（它是一个动态报告列生成器）

我需要做一个动态 SQL，我没有每一列的数据类型，我想用动态 sql 创建一个临时表并继承我的报告表的数据类型。有没有办法做到这一点？

顺便说一句...我不想使用全局变量。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:31:44.130

您不能创建动态临时表。

原因是临时表与 SQL 会话相关联。当您执行动态 SQL 时，它会创建一个在会话结束时终止的新会话。因此，表是在`exec`. 然后，当控制移回调用过程时，它会被丢弃（或脱离上下文）。

以下是一些解决方法，您可能都不喜欢：

1.  创建一个带有规范前缀的表，例如“_”来表示工作表。然后在存储过程中删除此表并捕获异常以在几乎所有情况下删除它。
2.  创建一个包含所有可能列值的临时表。
3.  为此类工作表创建您自己的“临时”数据库。
4.  使用通用列名并将这些通用列与您的列的对应关系保留在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:27:47.783

例如，如果您的报告表如下所示：

```
create table Report (
  ColumnNameA varchar(4),
  ColumnNameB integer,
  ColumnNameC integer,
  ColumnNameD varchar(8),
  ColumnNameE bit,
  ColumnNameF integer
 ); 
```

您可以创建以下过程：

```
create proc copy_table @col_names varchar(128)
as
DECLARE @SQLQuery AS NVARCHAR(500)
SET @SQLQuery = 'SELECT ' + @col_names + ' into ReportTemp from Report where 1 = 0'
EXEC(@SQLQuery); 
```

并使用您拥有的逗号分隔列字符串调用它，如下所示：

```
exec copy_table @col_names = 'ColumnNameA, ColumnNameB, ColumnNameC' 
```

并且您应该使用正确的列类型创建表。要对其进行测试，请插入一行，然后对其进行查询。

```
insert into ReportTemp values ('abc', 1, 2 );
select * from ReportTemp; 
```

要查看此操作，请查看此[sql fiddle](http://sqlfiddle.com/#!3/0c886/2)。

请注意，这**不会**继承约束、索引等——只是列名和类型。

# jquery - 更改已加载 iframe 的样式

> ID：13656356
> 
> 赞同：0
> 
> 时间：2012-12-01T04:28:43.940
> 
> 标签：jquery, html, css

我使用 iframe 作为一种灯箱容器，我需要在 iframe 加载 url 后更改 iframe 内容的样式，但是我似乎无法使用 css 或 jquery 执行此操作。

我努力了：

```
iframe html body {text-align:center}
$('iframe html body').css('text-align','center'); 
```

而且似乎都没有任何效果，我也尝试过设置其他属性，但对内容完全没有影响。

这个可以吗？？

# 编辑

好的，这似乎是与浏览器相关的问题，我实际上是在尝试根据加载的内容动态设置 iframe 的宽度和高度：

```
$('iframe').load(function () {
   $(this).height($(this).contents().height());
   $(this).width($(this).contents().width());
}); 
```

这适用于 safari 和 chrome，但在 Firefox 中完全没有效果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:30:57.217

如果 iframe 与父框架在同一个域中，则可以使用：

```
 $("iframe").contents(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:38:57.507

你到底想在这里实现什么？...你可以做的一件事是给 iframe 一个类或 id，并在 CSS 中定义你想要的规范。例如..

HTML

```
<iframe id="some_name"></iframe> 
```

CSS

```
#some_name{
    text-align:center;
} 
```

这应该做你需要的。

# python - 快速加载和处理包含 9000 万个元素的字典

> ID：13656361
> 
> 赞同：1
> 
> 时间：2012-12-01T04:29:36.467
> 
> 标签：python, optimization, dictionary

我有一张表格：

```
source ||| target ||| s1 s2 s3 s4 s5 ||| ||| c1 c2 . 
```

这种表格有两个文件，分别有9000万行和5000万行。我想处理它们以生成一个新文件。但是，由于我每次都犯错误，因此加载文件并从中生成 dicts 太耗时了。如果我每次都使用 marshal 转储和加载它们，仍然需要相当长的时间。有更快的方法吗？两种情况都附有代码。

```
htEnPT = defaultdict(list)
for phrase in open(phraseTable,'r'):
    parts = phrase.split(' ||| ')
    sourcePhrase = removePunctuations(parts[0])
    htEnPT[sourcePhrase].append(removePunctuations(parts[1]),parts[2],parts[3]) 
```

这每次都会加载字典并且需要很长时间。

如果我在完成上述操作后这样做，

```
marshal.dump(dict(PhraseTable),open(sys.argv[4],'wb')) 
```

然后，这样做：

```
marshal.load(open(sys.argv[1],'rb')) 
```

仍然需要很长时间。

那么，在原型设计时是否有更快的方法来处理如此大的文件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:43:20.050

您可以使用文件的一部分行进行测试。

# iframe - 调整 iframe 的大小

> ID：13656362
> 
> 赞同：1
> 
> 时间：2012-12-01T04:29:40.307
> 
> 标签：iframe, resize

想要获取一个 div 并查找 iframe 标签，看看它是否有宽度和高度，如果有，请将它们更改为我给出的数字，如果没有，则将宽度和高度添加到 iframe 。

```
<div class="player container">

    <iframe width="1280" height="720" src="http://www.youtube.com/"</iframe>  

</div> 
```

我只是不知道该怎么做，如果你能帮助我，那将是我的荣幸。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:34:50.383

使用 Javascript 试试这个：-

```
 <script type=&#34;text/javascript&#34;>
 <!--//
  function sizeFrame&#40;frameId&#41; {
  var F = document.getElementById&#40;frameId&#41;;
  if&#40;F.contentDocument&#41; {
   F.height = F.contentDocument.documentElement.scrollHeight+30; //FF 3.0.11, Opera 9.63, and Chrome
 } else {

 F.height = F.contentWindow.document.body.scrollHeight+30; //IE6, IE7 and Chrome

 }

}

 window.onload=sizeFrame; 

 //-->
</script>

<iframe width=&#34;100%&#34; id=&#34;myFrame&#34; src=&#34;testincludegallery.php?id=1&#34; scrolling=&#34;no&#34; frameborder=&#34;0&#34; onload=&#34;window.parent.sizeFrame&#40;&#39;myFrame&#39;&#41;;&#34;> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:35:32.300

```
var iframe = $("div").find("iframe");
var w = iframe.width();
var h = iframe.height();

iframe.attr('width', (w)?w+num:num);
iframe.attr('height', (h)?h+num:num); 
```

# bash - Ubuntu Bash 脚本按时间顺序更改文件名

> ID：13656366
> 
> 赞同：0
> 
> 时间：2012-12-01T04:30:52.137
> 
> 标签：bash, ubuntu

我有这个 bash 脚本，我试图将目录中的所有 *.txt 文件更改为其最后修改的日期。这是脚本：

```
#!/bin/bash
# Renames the .txt files to the date modified
# FROM: foo.txt  Created on: 2012-04-18 18:51:44
# TO:    20120418_185144.txt
for i in *.txt
do
mod_date=$(stat --format %y "$i"|awk '{print $1"_"$2}'|cut -f1 -d'.'|sed 's/[: -]//g') 
mv "$i" "$mod_date".txt
done 
```

我得到的错误是：

```
renamer.sh: 6: renamer.sh: Syntax error: word unexpected (expecting "do") 
```

任何帮助将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:44:13.697

我总是很惊讶地看到人们如何在`grep`通过`sed`s 到s 到`awk`s 到`cut`s 到`head`s 和`tail`s 的管道中变得非常聪明......

在您的特定情况下，您真的很幸运，因为该`date`命令可以格式化文件的修改日期（使用`-r`选项）！

因此，

```
#!/bin/bash

# It's a good idea to use one of the two:
shopt -s failglob
# shopt -s nullglob

for i in *.txt; do
    mod_date=$(date -r "$i" +'%Y%m%d_%H%M%S')
    mv "$i" "$mod_date.txt"
done 
```

应该做的伎俩。

关于`nullglob`or `failglob`：如果没有匹配的文件`*.txt`，则脚本将退出并出现错误（使用时`failglob`），或者，如果使用`nullglob`，则不会发生任何事情，因为在这种情况下`*.txt`会扩展为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:02:44.613

您粘贴的代码不完整。将下面的代码与您的代码进行比较。

```
#!/bin/bash
# Renames the .txt files to the date modified
# FROM: foo.txt  Created on: 2012-04-18 18:51:44
# TO:    20120418_185144.txt
for i in *.txt
do
    mod_date=$(stat --format %y "$i"|awk '{print $1"_"$2}'|cut -f1 -d'.' | sed 's/[: -]//g')
    mv "$i" "${mod_date}.txt"
done 
```

# c# - DatagramSocket 无法从 UdpClient 接收数据

> ID：13656372
> 
> 赞同：3
> 
> 时间：2012-12-01T04:31:56.877
> 
> 标签：c#, windows-runtime, datagram, udpclient

我正在制作一个连接到桌面应用程序的 Win RT 应用程序，它们开始以 UDP 和 TCP 进行通信。

我已经成功实现了 TCP 通信，因为我可以从 Win RT 发送到桌面，也可以从桌面发送到 Win RT。在 Win RT 上使用 StreamSocket，在桌面上使用 TcpListener。

我还成功地将 Udp 数据从 Win RT 发送到桌面，没有任何问题。但我无法接收从桌面发送到 Win RT 的数据。我使用下面的代码，我看不出有什么问题，但肯定有什么问题。

```
 var g = new DatagramSocket();
    g.MessageReceived += g_MessageReceived;
    g.BindEndpointAsync(new HostName("127.0.0.1"), "6700");
    .
    .
    .
    void g_MessageReceived(DatagramSocket sender, DatagramSocketMessageReceivedEventArgs args)
    { // <- break point here.

    } 
```

该断点永远不会停止代码，这意味着它永远不会收到消息。我只能想到 IBuffer，因为在我的 StreamSocket 上，我应该通过 reader.GetBuffers() 而不是 reader.GetBytes() 获取字节。然而，这是我需要在 Win RT 而不是桌面上考虑的事情。因为在 Tcp 上，我只发送字节，然后在 Win RT 中获得缓冲区，所以 DatagramSocket 也应该如此。

*   阅读器 = 数据阅读器

感谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T05:53:08.963

我对新的 DatagramSocket 类不熟悉，但通常绑定到 127.0.0.1 意味着您只会收到发送到环回适配器的消息。由于您的数据包来自另一台主机，因此它们应该在 NIC 上接收，而不是在环回适配器上。

**编辑**：通过查看您正在使用的 DatagramSocket API 的文档，您可以只使用该`BindServiceNameAsync()`方法而不是`BindEndpointAsync()`为了绑定到所有适配器上的指定端口，这与我的 System.Net.Sockets API 的行为相同下面的例子。因此，在您的示例中，您将拥有：

```
g.BindServiceNameAsync("6700"); 
```

当然，您还需要确保桌面主机上的防火墙设置允许它侦听指定端口上的传入 UDP 数据包。

试试下面的代码：

```
 using System.Net;
    using System.Net.Sockets;

    public class UdpState
    {
        public UdpClient client;
        public IPEndPoint ep;
    }

    ...

    private void btnStartListener_Click(object sender, EventArgs e)
    {
        UdpState state = new UdpState();
        //This specifies that the UdpClient should listen on EVERY adapter
        //on the specified port, not just on one adapter.
        state.ep = new IPEndPoint(IPAddress.Any, 31337);
        //This will call bind() using the above IP endpoint information. 
        state.client = new UdpClient(state.ep);
        //This starts waiting for an incoming datagram and returns immediately.
        state.client.BeginReceive(new AsyncCallback(bytesReceived), state);
    }

    private void bytesReceived(IAsyncResult async)
    {
        UdpState state = async.AsyncState as UdpState;
        if (state != null)
        {
            IPEndPoint ep = state.ep;
            string msg = ASCIIEncoding.ASCII.GetString(state.client.EndReceive(async, ref ep));
            //either close the client or call BeginReceive to wait for next datagram here.
        }
    } 
```

请注意，在上面的代码中，您显然应该使用发送字符串时使用的任何编码。当我编写那个测试应用程序时，我以 ASCII 格式发送了字符串。如果您以 Unicode 格式发送，只需使用`UnicodeEncoding.Unicode`而不是`ASCIIEncoding.ASCII`.

如果这些都不起作用，您可能需要中断像 Wireshark 这样的数据包捕获实用程序，以确保来自 RT 主机的 UDP 数据包实际上是到达桌面主机。

# c++ - 解码 Microsoft True Type 字体文件

> ID：13656373
> 
> 赞同：4
> 
> 时间：2012-12-01T04:32:15.057
> 
> 标签：c++, c, gcc, decode, truetype

我正在使用 TFT LCD 作为显示器 (480x800px) 的嵌入式平台 (STM32F407) 上工作，并希望使我的用户界面在某种程度上可以为最终用户定制。我认为最好的字体来源是 Windows 兼容，因为它们是最常见的。

我当前的实现使用我自己的二进制格式的自定义绘制字体和一个提供字符宽度和 ascii 值的描述符表，但必须一点一点地绘制我自己的字体是乏味的。

我想从 SD 卡中读取 True Type 字体文件，并能够在其中使用不同大小的字形，但我还没有看到关于如何实际实现这种魔力的严格实现。有人可以指出我正在寻找的一个好的 c/c++ 示例吗？

作为一种消除扭结的更好方法，我想制作一个简单的 gcc 命令行程序，该程序将使用“#”作为像素以选定的字体打印出我的输入。这样我就可以只担心实现，而不用担心可能弹出的任何其他随机错误。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:57:40.570

也许您可以使用[Freetype](http://www.freetype.org/index2.html)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:00:20.217

正如duskwuff 所说：TTF 主要是一种矢量格式，需要编写一个渲染器。最好使用图像文件来定义字体，或者使用 FNT (Windows) 或 BDF (UNIX) 等位图字体格式。

这是我对自己问题的回答：[AngelCode's BMFont](http://www.angelcode.com/products/bmfont/) [&](http://www.gamedev.net/topic/330742-quick-tutorial-variable-width-bitmap-fonts/) Useage 。这使得从已安装的字符集中选择选择性字符，混合字体并将带有映射文件的图像导出到每个字符。使用简单。

# javascript - 是否可以找到元素的父元素然后导航 DOM？

> ID：13656374
> 
> 赞同：1
> 
> 时间：2012-12-01T04:32:18.713
> 
> 标签：javascript, jquery

使用 jQuery 时，如何返回到导航 DOM。例如，如果我找到这样一个项目的父项：

```
$(this).parent() 
```

你怎么能找到 id 为 'foobar' 的东西。我试过了：

```
$(this).parent().$('foobar').addClass('hello') 
```

但我得到消息：

```
未捕获的类型错误：对象 [对象对象] 没有方法“$”
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:36:12.293

ID 必须是唯一的，要通过 ID 选择元素，您可以使用 ID selector `$('#foobar')`，但是如果您想在父元素中查找元素，可以使用`find`方法：

```
$(this).parent().find('#foobar').addClass('hello'); 
```

这与以下内容相同：

```
$('#foobar').addClass('hello'); 
```

请注意，如果您对多个元素使用 ID，则您的文档无效，您应该改用类。

```
$(this).parent().find('.foobar').addClass('hello'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:55:52.807

而 id 应该是唯一的，这样你就可以在`document.getElementById("foobar")`我之前找到多次出现并使用它：

```
/* returns an array of all elements with id */
function getElementsById(id){
  var t=document.getElementsByTagName("*"),a=[]
  for(var i=0;i<t.length;i++)
    if(t[i].id==id)a[a.length]=t[i]
  return a
} 
```

注意：如果你正在编写新代码，类有一个内置的 getElementsByClassName（因为它应该有多个）

编辑：这可以减少到`document.querySelectorAll("#id")`

# c++ - 为什么在这种情况下使用vector<>.push_back()时不使用动态内存？

> ID：13656375
> 
> 赞同：1
> 
> 时间：2012-12-01T04:32:25.623
> 
> 标签：c++, memory-management

我发现了一段 C++ 代码，如下所示：

```
// constructor that creates a 2D vector _store[nRow][nCol]
FlexiMatrix::FlexiMatrix(int nRow)
{
    for (int i = 0; i < nRow; i++){
        _store.push_back( vector<int>() );    
        _store[i].push_back( 0 );
    }
} 
```

并`_store`声明如下：`vector< vector<int> > _store;`

这似乎违反了我对局部变量和堆栈的理解。当我们退出这个构造函数时，本地创建的向量的内存不应该不存在吗？鉴于`vector<int>.push_back()`需要别名引用作为其输入参数，因此更是如此，因此永远不会调用复制构造函数，并且`push_back()`接收的是对局部变量的实际引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T04:35:27.997

> **所以复制构造函数永远不会被调用，`push_back()`接收的是对局部变量的实际引用？**

不
`std::vector_push_back()`，复制传递的对象。作为参数传递的对象的内容可能会被*复制/移动*（在 C++11 中）到新创建的对象。

`push_back()`从 C++11 开始有两种形式：

```
void push_back (const value_type& val);
void push_back (value_type&& val); 
```

在您的情况下，`vector<int>()`创建一个临时（r 值），因此将使用第二种形式。第二种形式会将临时的内容*移动*到添加到向量中的新对象。因此，它将使用移动构造函数而不是复制构造函数。

# c - printf 怎么会打印一个非空终止的字符串？

> ID：13656377
> 
> 赞同：7
> 
> 时间：2012-12-01T04:33:18.070
> 
> 标签：c

c编程书说我的字符串必须以空结尾才能使用 printf 打印，但以下程序仍然打印字符串，尽管它不是以空结尾的！

```
#include <stdio.h>
#include <stdlib.h>

int main(){
    int i ;
    char str[10] ;
    for(i = 0 ; i < 10 ; i++ ) {
        str[i] = (char)(i+97) ;
    }

    printf("%s",str) ;
} 
```

我正在使用代码块 IDE。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T04:38:58.113

读取超出数组范围是未定义的行为，实际上很不幸*它**没有*崩溃，如果您运行它足够多的时间或在可能（或可能不会）崩溃的函数中调用它，您应该始终终止字符串，或使用宽度说明符：

```
printf("%.10s", str); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T04:37:06.090

的第 10 个元素之后的内容`str`恰好是空值。该 null 超出了数组的定义边界，但 C 没有数组边界检查。在你的情况下，这就是它的结果，这只是运气。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T04:44:38.290

根据 C 标准，printf 函数打印字符串中的字符，直到找到一个空字符。否则在定义的数组索引之后它会做什么没有定义。我已经测试了你的代码。并在打印“abcdefghij”后打印一些垃圾值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T05:57:40.990

如果您在该调用之前执行其他操作，则您的堆栈区域将包含未使用的数据之外的其他数据。设想：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int use_stack(void) {
   char str[500];
   memset(str, 'X', sizeof(str));
   printf("Filled memory from %p to %p.\n", &str, &str+sizeof str);
}

void print_stuff() {
    int i;
    char str[16]; // changed that so that 10..15 contain X
    for(i = 0; i < 10; i++) {
        str[i] = (char)(i+97);
    }

    printf("%s<END>",str); // have a line break before <END>? Then it comes from i.
    printf("&str: %p\n", &str);
    printf("&i: %p\n", &i);
    // Here you see that i follows str as &i is &str + 16 (0x10 in hex)
}

int main() {
    use_stack();
    print_stuff();
} 
```

您的堆栈区域将充满`X`es 并`printf()`会看到它们。

在您的情况和环境中，堆栈在程序启动时巧合地“干净”。

编辑：这可能会也可能不会发生。如果编译器将变量`i`立即放在数组之后，您的数据仍然会被`NUL`终止，因为第一个字节是`i`（您碰巧打印的值 - 在您的情况下它可能是一个 libne 中断 - 而第二个字节是一个`NUL`字节。即使是这种情况，您的代码也会调用 UB（未定义的行为）。

`hexdump`如果你的输出包含一个`0A`字符，你能看看（通过管道程序输出或类似的方法）吗？如果是这样，我的猜测是正确的。我刚刚测试了它，在我的编译器（`gcc`）上似乎是这样。

如前所述，您不应该依赖任何东西。

EDIT2：如果您之前看到换行符`<END>`，我的猜测是正确的。如果您查看现在正在打印的指针，您可以比较它们在内存中的地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T04:37:23.240

因为在调试模式下，`*(str+10)`整个未使用的空间都有一个初始化值'0'，所以看起来它是 0 终止的。

```
bash-3.2$ clang -O0 t.c -o t #compile in debug mode
bash-3.2$ ./t
abcdefghij
bash-3.2$ clang -O2 t.c -o t #compile with optimization
bash-3.2$ ./t
abcdefghij2÷d= 
```

# http - Python 3，http.client HTTP 错误 400

> ID：13656381
> 
> 赞同：2
> 
> 时间：2012-12-01T04:33:42.190
> 
> 标签：http, python-3.x, imdb

[我一直在做一个小型宠物项目，我正在使用 http.client 与omdbapi](http://www.omdbapi.com/)进行交流（对不起，如果这是不好的术语，请随时纠正我）。从这里我使用以下代码访问网站上的数据：

```
import http.client, json
__connection = http.client.HTTPConnection("www.omdbapi.com")

def getDetailsFromTitle(title):
    __connection.request("GET", "/?t=" + title)
    return __processRequest()

def getDetailsFromID(id):
     __connection.request("GET", "/?i=" + id)
     return __processRequest()

def __processRequest():
    try:
        response = __connection.getresponse()
        data = response.read()
        data = data.decode("utf-8")
        return json.loads(data)
except: return None 
```

这在我最初的几次试验中效果很好，就像如果我抬头说“Eureka”或“Superbad”，我就能正确地取回所有数据；但是，一旦我输入“Bad Kids Go To Hell”，我在 __processRequest 中的尝试就被破坏了，并且 None 被返回。我设法从请求中获得的数据是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<HTML><HEAD><TITLE>Bad Request</TITLE>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD>
<BODY><h2>Bad Request</h2>
<hr><p>HTTP Error 400\. The request is badly formed.</p>
</BODY></HTML> 
```

它显然打破了 json.loads(data) 因为 data 不是预期的，但我不太确定为什么我会收到这个错误。我去网站输入“Bad Kids Go To Hell”，一切正常。

如果您需要更多帮助，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:16:10.787

要创建 url 的参数列表，您应该使用`[urlencode()][1]`. 在这种情况下，可能是字符串中的空格导致了问题，它们应该转换为“+”字符。

```
__connection.request("GET", "/"+(urlencode({'t': title}) 
```

# php - 将 my_ MySQL 中的值分组以单独显示 基于某些标准

> ID：13656382
> 
> 赞同：1
> 
> 时间：2012-12-01T04:33:42.860
> 
> 标签：php, html, mysql

我正在使用 MySQL 作为数据库的 php 项目。这是表结构

```
product_id (PK)
shop_id (FK)
product_name
product_desc 
```

Product_id 是主键，shop_id 是外键（显示产品属于哪个店铺）。现在我想选择这些产品并将它们显示在`<div>`. 对于每个店铺产品，我想展示不同的`<div>`. 例如，如果有三种产品说 p1、p2 和 p3，并且它们具有相同的 shop_id（比如）1，我希望它们单独显示`<div>`。每个shop_id都会有单独`<div>`的，属于那个shop_id的所有产品都会显示在那个里面`<div>`。如何使用 My_SQL 查询或使用 PHP 来做到这一点。我已经使用了这样的简单 SELECT 查询，但是我找不到`<div>`为单独的商店启动不同的方法。

```
$q = mysql_query("SELECT * FROM table");
echo "<div>";
while($product = mysql_fetch_assoc($q)){
echo $product['product_name']."<br/>";
}
echo "</div>"; 
```

它只是将所有产品放在一次潜水中，我想要单独的商店（包含该商店的所有产品）的单独 div。谢谢阅读..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:42:04.387

最简单的方法是在数组中按 id 对产品进行分组并循环遍历它们

```
$all_products = array();
while($product = mysql_fetch_assoc($q)){
    $all_products[$product['shop_id']][] = $product;
}

foreach($all_products as $shop_id => $product_array){
echo "<div id='shop_".$shop_id."'>";
   foreach($product_array as $product){
      echo $product['product_name']."<br/>";
    }
echo "</div>";
} 
```

或从每个商店 ID 调用产品数据

```
$q = mysql_query("SELECT * FROM shops");

while($shops = mysql_fetch_assoc($q)){
       $product_q = mysql_query("SELECT * FROM product_table WHERE shop_id=$shops['id']");
       echo "<div>";
       while($product = mysql_fetch_assoc($product_q)){
           echo $product['product_name']."<br/>";
           }
       echo "</div>";

    } 
```

# java - 从 Web 服务编辑 android 中的文本字段验证

> ID：13656384
> 
> 赞同：2
> 
> 时间：2012-12-01T04:33:51.870
> 
> 标签：java, android, web-services, validation, android-edittext

我开发了一款安卓应用。

该应用程序执行从 android 插入 mysql 数据库的值。

在这里，我调用了 Soap Web 服务。

在这里，我如何验证我的 edittext 字段。

这是我的网络服务代码：

```
public class RetailerWs {

public String insertData(String Firstname,String Lastname){

 try{

 Class.forName("com.mysql.jdbc.Driver");
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root","");
 PreparedStatement statement =  con.prepareStatement("INSERT INTO xcart_customers(firstname,lastname) VALUES ('"+Firstname+"','"+Lastname+"');");
 int result = statement.executeUpdate();
  }

 catch(Exception exc){
 System.out.println(exc.getMessage());
  }

return "Registration is  successfull!!";
}

 } 
```

这是我的安卓代码：

```
 btninsert = (Button)findViewById(R.id.btn_login);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         insertValues();
        }
    });
}
 public void insertValues(){
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
 EditText Firstname = (EditText) findViewById(R.id.tf_userName);
 String user_Name = Firstname.getText().toString();
 EditText Lastname = (EditText) findViewById(R.id.tf_password);
 String user_Password = Lastname.getText().toString();
 PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("Firstname");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//Define value for fname variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for userPassword variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("Lastname");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
     androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

        TextView result = (TextView) findViewById(R.id.result);
        result.setText(response.toString());

       }
     catch(Exception e){

      } 
```

我如何验证edittext字段。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:28:27.107

您可以通过执行以下操作来验证您的字符串是否为空：1-首先在您的类中声明您的 EditText 字段而不是在您的方法中：

```
EditText Firstname;
EditText Lastname; 
```

2-然后在 onCreate() 方法中初始化这些变量：

```
Firstname = (EditText) findViewById(R.id.tf_userName);
Lastname = (EditText) findViewById(R.id.tf_password); 
```

3- 在调用 insertValues() 之前；方法执行以下操作：

```
if(Firstname.equals(null)||Lastname.equals(null))
{Toast.makeText(context, "Enter Firstname and/or LastName", Toast.LENGTH_SHORT).show();}
else
{insertValues();} 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:42:12.243

您必须在此 android 代码中使用以下条件：

```
 EditText Firstname = (EditText) findViewById(R.id.tf_userName);
            EditText Lastname = (EditText) findViewById(R.id.tf_password);
            if(Firstname.getText().length()==0)
            {
                Firstname.setError("please enter the firstname");
            }
            else if(Lastname.getText().length()==0)
                {
                    Lastname.setError("please enter the lastname");
            }
            else
            {   
                insertValues();
            } 
```

它成功地为我工作

# python - 我可以让 matplotlib 滑块更加离散吗？

> ID：13656387
> 
> 赞同：13
> 
> 时间：2012-12-01T04:34:03.817
> 
> 标签：python, matplotlib, slider

我正在使用 matplotlib 滑块，类似于[此演示](http://matplotlib.org/examples/widgets/slider_demo.html)。滑块目前使用 2 个小数位，并且“感觉”非常连续（尽管它们在某种程度上必须是离散的）。我可以决定它们是离散的吗？整数步数？0.1 步长？0.5? 我的 google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-01T15:48:10.053

`valfmt`如果您只想要整数值，只需在创建滑块时传入一个适当的值（例如`valfmt='%0.0f'`）

但是，如果您想要非整数 invervals，则每次都需要手动设置文本值。但是，即使您这样做，滑块仍会顺利进行，并且不会“感觉”为离散间隔。

这是一个例子：

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.widgets import Slider

class ChangingPlot(object):
    def __init__(self):
        self.inc = 0.5

        self.fig, self.ax = plt.subplots()
        self.sliderax = self.fig.add_axes([0.2, 0.02, 0.6, 0.03],
                                          axisbg='yellow')

        self.slider = Slider(self.sliderax, 'Value', 0, 10, valinit=self.inc)
        self.slider.on_changed(self.update)
        self.slider.drawon = False

        x = np.arange(0, 10.5, self.inc)
        self.ax.plot(x, x, 'ro')
        self.dot, = self.ax.plot(self.inc, self.inc, 'bo', markersize=18)

    def update(self, value):
        value = int(value / self.inc) * self.inc
        self.dot.set_data([[value],[value]])
        self.slider.valtext.set_text('{}'.format(value))
        self.fig.canvas.draw()

    def show(self):
        plt.show()

p = ChangingPlot()
p.show() 
```

如果您想让滑块“感觉”完全像离散值，您可以将`matplotlib.widgets.Slider`. 关键效果由`Slider.set_val`

在这种情况下，你会做这样的事情：

```
class DiscreteSlider(Slider):
    """A matplotlib slider widget with discrete steps."""
    def __init__(self, *args, **kwargs):
        """Identical to Slider.__init__, except for the "increment" kwarg.
        "increment" specifies the step size that the slider will be discritized
        to."""
        self.inc = kwargs.pop('increment', 0.5)
        Slider.__init__(self, *args, **kwargs)

    def set_val(self, val):
        discrete_val = int(val / self.inc) * self.inc
        # We can't just call Slider.set_val(self, discrete_val), because this 
        # will prevent the slider from updating properly (it will get stuck at
        # the first step and not "slide"). Instead, we'll keep track of the
        # the continuous value as self.val and pass in the discrete value to
        # everything else.
        xy = self.poly.xy
        xy[2] = discrete_val, 1
        xy[3] = discrete_val, 0
        self.poly.xy = xy
        self.valtext.set_text(self.valfmt % discrete_val)
        if self.drawon: 
            self.ax.figure.canvas.draw()
        self.val = val
        if not self.eventson: 
            return
        for cid, func in self.observers.iteritems():
            func(discrete_val) 
```

作为使用它的完整示例：

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.widgets import Slider

class ChangingPlot(object):
    def __init__(self):
        self.inc = 0.5

        self.fig, self.ax = plt.subplots()
        self.sliderax = self.fig.add_axes([0.2, 0.02, 0.6, 0.03],
                                          facecolor='yellow')

        self.slider = DiscreteSlider(self.sliderax, 'Value', 0, 10, 
                                     increment=self.inc, valinit=self.inc)
        self.slider.on_changed(self.update)

        x = np.arange(0, 10.5, self.inc)
        self.ax.plot(x, x, 'ro')
        self.dot, = self.ax.plot(self.inc, self.inc, 'bo', markersize=18)

    def update(self, value):
        self.dot.set_data([[value],[value]])
        self.fig.canvas.draw()

    def show(self):
        plt.show()

class DiscreteSlider(Slider):
    """A matplotlib slider widget with discrete steps."""
    def __init__(self, *args, **kwargs):
        """Identical to Slider.__init__, except for the "increment" kwarg.
        "increment" specifies the step size that the slider will be discritized
        to."""
        self.inc = kwargs.pop('increment', 0.5)
        Slider.__init__(self, *args, **kwargs)
        self.val = 1

    def set_val(self, val):
        discrete_val = int(val / self.inc) * self.inc
        # We can't just call Slider.set_val(self, discrete_val), because this 
        # will prevent the slider from updating properly (it will get stuck at
        # the first step and not "slide"). Instead, we'll keep track of the
        # the continuous value as self.val and pass in the discrete value to
        # everything else.
        xy = self.poly.xy
        xy[2] = discrete_val, 1
        xy[3] = discrete_val, 0
        self.poly.xy = xy
        self.valtext.set_text(self.valfmt % discrete_val)
        if self.drawon: 
            self.ax.figure.canvas.draw()
        self.val = val
        if not self.eventson: 
            return
        for cid, func in self.observers.items():
            func(discrete_val)

p = ChangingPlot()
p.show() 
```

![在此处输入图像描述](../Images/31d54408ce197ab3d07410852e940fb4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-19T22:36:37.883

如果您不想将 Slider 子类化，我从@Joe Kington 的答案中挑选了几行来完成回调函数中的离散化：

```
sldr = Slider(ax,'name',0.,5.,valinit=0.,valfmt="%i")
sldr.on_changed(partial(set_slider,sldr)) 
```

进而：

```
def set_slider(s,val):
    s.val = round(val)
    s.poly.xy[2] = s.val,1
    s.poly.xy[3] = s.val,0
    s.valtext.set_text(s.valfmt % s.val) 
```

# c# - 以 64 位启动进程

> ID：13656389
> 
> 赞同：4
> 
> 时间：2012-12-01T04:34:17.403
> 
> 标签：c#, 32bit-64bit

我想显示屏幕键盘。结果我去了stackoverflow上的以下链接：

[使用 C# 中的按钮调用屏幕键盘](https://stackoverflow.com/questions/8800212/calling-the-on-screen-keyboard-using-a-button-in-c-sharp)

当我运行针对 x64 平台的 wpf 应用程序时，该技术非常有效。换句话说，它在我设置时起作用：

![在此处输入图像描述](../Images/e9e0da32096e719ba0ef54f50ac9fad8.png)

但如果我将它设置为 86x，它就不起作用。我需要将我的应用程序作为 x86 运行。我怎么解决这个问题？在 x64 位计算机上运行我的代码时，我只是有一个例外......

## 编辑

我有临时解决方案。我为解决这个问题所做的是在 Visual Studio（控制台应用程序）中创建一个新项目，并命名为 FooApplication，目标是 x64 位版本。该程序如下所示：

```
Class Program
{
    static void Main()
    {
         System.Diagnostics.Process.Start("osk.exe");
    }
} 
```

然后我可以从我原来的 wpf 应用程序中启动我正在执行的 FooApplication.exe 的计算器。

# iphone - 如何使用 Apples simpleFtpsample 项目中的 Listviewcontroller 类从 ftp 获取文件夹列表

> ID：13656395
> 
> 赞同：2
> 
> 时间：2012-12-01T04:35:29.243
> 
> 标签：iphone, objective-c, ios, xcode, ftp

如何使用 Apples simpleFtpsample 项目中的 Listviewcontroller 类从 ftp 获取文件夹列表。如何像我们使用 GetController 类的对象下载数据一样使用它请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:13:45.877

来自苹果网站的 ListController 类有助于列出目录。只需自定义一点，以便我们可以使用 Listcontroller 类的对象在其他类中使用它，如 rmaddy 在上面的评论中所建议的那样

# android - 如何使大型复杂 JSON 的解析更快？

> ID：13656398
> 
> 赞同：2
> 
> 时间：2012-12-01T04:35:53.703
> 
> 标签：android, json

我想解析一个大的 JSON。我怎样才能让它更快？现在需要很多时间。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:44:27.640

您可以使用一些包装器，例如[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)它经过优化以处理来自 json 的大数据并且易于使用。

您也可以尝试[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)以获得更好的性能。

以下是其他。

*   安卓内置：http: [//developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)
*   JSON.simple：[http ://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)
*   杰克逊：http: [//jackson.codehaus.org/](http://jackson.codehaus.org/)
*   Gson：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

[你可以在这里](http://martinadamek.com/2011/01/31/comparison-of-json-parsers-performance-on-android/)查看比较文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:55:20.450

根据一些[基准](http://martinadamek.com/2011/02/04/json-parsers-performance-on-android-with-warmup-and-multiple-iterations/)，杰克逊是最快的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T04:55:27.907

使用杰克逊 JSON 处理器[http://jackson.codehaus.org/](http://jackson.codehaus.org/) 大多数时候人们最终会解析整个 JSON 并忽略大部分数据。这使得该过程缓慢。如果要丢弃大​​量数据，在 SAX 模式下解析会快得多，因为您可以在找到所有需要的数据后立即停止解析。

# android - 关于Textview中数学和科学公式的动态生成

> ID：13656399
> 
> 赞同：3
> 
> 时间：2012-12-01T04:35:58.797
> 
> 标签：android, android-sqlite

我在阅读和显示数学和科学公式时遇到问题。它们没有像下面给出的图像那样出现。我将它显示在 中`TextView`，并且我曾经`setTypeface`将字体设置为“古吉拉特语”字体。

先感谢您。

我想显示数学公式，如：

![在此处输入图像描述](../Images/00cd8c37c0e0d5b5e09d8c8f539a4250.png)

...并显示科学方程式，例如：

![在此处输入图像描述](../Images/3515a8ab119e0305f8d90a5d7aca7f38.png)

还有，如何在 Android 中读取 Excel 表并存储在 SQLite 数据库中？我不使用`.csv`，因为我将古吉拉特语数据存储在 Excel 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:32:09.503

您可以使用 value 文件夹中 string.xml 文件中的 HTML 代码显示数学函数。像例子：

```
<string name="superscript"><html><i>a</i><sup>2</sup>+<i>y</i><sup>2</sup></html></string>
<string name="subscript"><html>f(x)<sub>1+x</sub></html></string> 
```

并在您的 xml 文件 TextView 中写入：

```
 <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/superscript" />

   <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/subscript" /> 
```

对于数学符号和字符，您可以查看此链接：

[http://en.wikipedia.org/wiki/Help:Displaying_a_formula](http://en.wikipedia.org/wiki/Help:Displaying_a_formula)

[http://barzilai.org/math_sym.htm](http://barzilai.org/math_sym.htm)

[http://www.myphysicslab.com/web_math.html](http://www.myphysicslab.com/web_math.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T05:14:25.057

对于 Excel ti SQLite3，快速搜索会引导我找到这些：

[如何将excel表格转换为android中的sqlite数据库](https://stackoverflow.com/questions/7412293/how-to-convert-excel-sheet-into-database-of-sqlite-in-android)

[如何在android程序中读取excel表](https://stackoverflow.com/questions/7357355/how-to-read-excel-sheets-in-android-program)

[http://www.razorsql.com/features/sqlite_import.html](http://www.razorsql.com/features/sqlite_import.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T12:23:21.107

对于第一个问题的解决方案在 android 中使用 MAthJAX

[http://cs.jsu.edu/wordpress/?p=498](http://cs.jsu.edu/wordpress/?p=498)

很容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T05:07:13.720

您可以使用 ImageView 并显示这些表达式的图像。这很容易。

# drupal - drupal7 主题页面创建

> ID：13656405
> 
> 赞同：0
> 
> 时间：2012-12-01T04:37:04.640
> 
> 标签：drupal, drupal-7

我在drupal中创建了主页。它工作正常。但我无法创建其他页面（例如，服务联系人，客户端。）（主页和其他页面不同）。我创建了page.tpl.php。我可以在 .info 文件中创建区域吗？在这里我附上了我的 page.tpl.php 文件。请任何人告诉我。（其他页面格式，如一个 leftcontent 和 2 rightcontent 结构。）。page.tpl.php：

```
 <div id="wrapper">
                              <header id="header">
                                    <div class="section clearfix">
                                    <div class="logo_left">
                                            <?php if ($logo): ?>
                                                    <a href="<?php print $front_page; ?>" title="<?php print t('Home'); ?>" rel="home" id="logo">
                                                            <img src="<?php print $logo; ?>" alt="<?php print t('Home'); ?>" />
                                                     </a>
                                            <?php endif; ?>
                               </div>
                               <nav class="logo_right"><?php print render($page['header']);?></nav>

                              </div></header> <!-- /.section, /#header -->

                                    <div id="menu">
                                            <!--ul>
                                                     <li><a href="#">About</a></li>
                                                     <li><a href="#">Service</a></li>
                                                     <li><a href="#">Client</a></li>
                                                     <li><a href="#">Contact</a></li>
                                            </ul-->

                                            <?php print render($page['header_menus']); ?>

                                    </div>

                                            <div id="content">
                                                                                                                            <article>
        <div id="content" class="column">
            <?php
            $url = request_uri();
            if(strpos($url, "user"))
            {
            }
            else
            {
            ?>
        <?php if ($breadcrumb): ?>
          <div id="breadcrumb"><?php print $breadcrumb; ?></div>
        <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T05:34:35.320

为主页创建另一个文件“ page--front.tpl.php ”，其他文件可以使用page.tpl.php

您可以使用以下链接在“默认首页”上设置主页

“管理员/配置/系统/站点信息”

# ruby-on-rails - 创建生成器 Rails

> ID：13656408
> 
> 赞同：0
> 
> 时间：2012-12-01T04:37:11.670
> 
> 标签：ruby-on-rails, ruby, generator

我在 Rails 中创建生成器时遇到问题，这是我遇到的错误。我正在尝试创建一个生成器，该生成器通过提供商 Twilio 创建 SMS 验证。

```
require "sms_auth-twilio"
NameError: uninitialized constant Twilio::Rails
from /Users/sherodtaylor/.rvm/gems/ruby-1.9.3-p125/gems/sms_auth-twilio-0.0.2/lib/sms_auth-twilio.rb:3:in `<module:Twilio>'
from /Users/sherodtaylor/.rvm/gems/ruby-1.9.3-p125/gems/sms_auth-twilio-0.0.2/lib/sms_auth-twilio.rb:2:in `<top (required)>'
from /Users/sherodtaylor/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
from /Users/sherodtaylor/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from /Users/sherodtaylor/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from (irb):1
from /Users/sherodtaylor/.rvm/rubies/ruby-1.9.3-p125/bin/irb:16:in `<main>' 
```

这是我的代码

```
 require "sms_auth-twilio/version"
   module Twilio
     class TwilioGenerator < Rails::Generator::Base
     source_root File.expand_path("../generator", __FILE__)
     def add_twilio_initializer
       copy_file "twilio.rb", "config/initializer/twilio.rb"
     end
     # config info for the API
     def twilio_config_info
       copy_file "twilio.yml", "config/twilio.yml"
     end
     # Verification Controller to verify the company
     def copy_verifications 
       copy_file "verifications_controller", "app/contoller/verifications_controller.rb"
     end
   end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:58:51.403

我不能肯定地说，但这通常不是我看到在 gem 中创建的生成器的方式。`gem_name.rb`通常它们与实际文件是分开的。我认为，如果您将生成器逻辑移到更常见的位置`lib/generators/generator_name/generator_name.rb`，您将会有更多的运气。然后您可以将要复制的文件放在子目录中`../generator_name/templates/`

另请注意，您需要将 .rb 结尾添加到您的`copy_file "verifications_controller,"`

要使模板正常工作，您可以按照我在[此处](https://github.com/joofsh/joofaq)编写的使用生成器的简单 gem 的布局进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:09:07.793

重新启动 Rails 服务器，然后尝试

如需帮助，请参阅此链接：[Rails 添加 Twilio 子帐户：未初始化的常量 User::Twilio](https://stackoverflow.com/questions/12685557/rails-adding-twilio-sub-accounts-uninitialized-constant-usertwilio)

# java - 我的 Java GUI 中已突出显示的按钮

> ID：13656416
> 
> 赞同：0
> 
> 时间：2012-12-01T04:38:43.337
> 
> 标签：java, swing, user-interface, jbutton

我在我的 Java GUI 中遇到了这个小问题。当我运行程序时，第一个按钮已经突出显示。如果我单击另一个按钮，该按钮将执行其相应的操作，但之后它只会在我单击任何其他按钮之前保持突出显示。请帮帮我！我已经发布了包含主类的代码，因为我觉得问题来自这里。

```
import java.awt.GridLayout;
import java.awt.FlowLayout;
import java.awt.BorderLayout;
import javax.swing.*;
import java.awt.event.*;
import java.util.*;
import java.awt.Graphics;

public class Terminal extends JFrame 
{
public int amountGot;
public String dishDelPos;
public int dishDeletePosition;
public int billDisplayAmount = 0;
public Graphics g;
public int dishquant;
public String dishQuantStr;
public int amount ;
Bill order1 = new Bill();
String dishQuant;
public JTextField amountField;
public JTextField billAmountField;
Scanner in = new Scanner(System.in);
public Terminal()
{
    terminalUI();
}

public final void terminalUI()
{

    JPanel panel1 = new JPanel();
    panel1.setBorder(BorderFactory.createEmptyBorder(4,4,4,4));
    panel1.setLayout(new GridLayout(5,5,5,5));

    String[] buttons = {
                                "Idli   (Rs 16)", "Uddina Vada", "Khara Bhath", "Kesari Bhath", "Chow-Chow Bhath", "Veg Pulao", "Vangi Bhath", "Puliogare", "Lemon Rice", "Veg Biryani", "Bisi Bele Bhath", "Poori,Saagu", "Curd Vada", "Plain Dosa", "Masala Dosa", "Onion Dosa", "Open Butter Masala Dosa", "Rava Dosa", "Set Dosa", "Tea", "Coffee"
                             };
    List<JButton> buttonDishes = new ArrayList<JButton>();
    for(int i = 0; i<buttons.length; i++)
    {
        buttonDishes.add(new JButton(buttons[i]));
    }
    for(int i = 0; i<buttons.length; i++)
    {
        panel1.add(buttonDishes.get(i));
        (buttonDishes.get(i)).setToolTipText("Order "+buttons[i]);
    }

    JButton displayButton = new JButton("Display The Bill");
    JButton clearButton = new JButton("Clear The Order");

    JPanel panel2 = new JPanel();
    JLabel amountFieldText = new JLabel("THE TOTAL AMOUNT IS ");
    panel2.setLayout(new FlowLayout());
    panel2.add(amountFieldText);
    panel2.add(amountField = new JTextField(20));
    amountField.setHorizontalAlignment(amountField.RIGHT);
    amountField.setEditable(false);

    JPanel panel4 = new JPanel();
    JLabel menuInstructionsLabel = new JLabel();
    menuInstructionsLabel.setText("CLICK ON THE DISHES OF YOUR CHOICE TO PLACE YOUR ORDER");
    panel4.setLayout(new FlowLayout());
    panel4.add(menuInstructionsLabel);

    JPanel panel = new JPanel();
    panel.setLayout(new FlowLayout());
    panel.add(panel4, BorderLayout.NORTH);
    panel.add(panel1, BorderLayout.NORTH);
    panel.add(panel2, BorderLayout.NORTH);
    panel.add(displayButton, BorderLayout.NORTH);
    panel.add(clearButton, BorderLayout.NORTH);

    (buttonDishes.get(0)).addActionListener(new ListenToIdli());
    (buttonDishes.get(1)).addActionListener(new ListenToVada());
    (buttonDishes.get(2)).addActionListener(new ListenToKhara());
    (buttonDishes.get(3)).addActionListener(new ListenToKesari());
    (buttonDishes.get(4)).addActionListener(new ListenToChow());
    (buttonDishes.get(5)).addActionListener(new ListenToPulao());
    (buttonDishes.get(6)).addActionListener(new ListenToVangi());
    (buttonDishes.get(7)).addActionListener(new ListenToPuliogare());
    (buttonDishes.get(8)).addActionListener(new ListenToLemon());
    (buttonDishes.get(9)).addActionListener(new ListenToBiryani());
    (buttonDishes.get(10)).addActionListener(new ListenToBisi());
    (buttonDishes.get(11)).addActionListener(new ListenToPoori());
    (buttonDishes.get(12)).addActionListener(new ListenToCurd());
    (buttonDishes.get(13)).addActionListener(new ListenToPlain());
    (buttonDishes.get(14)).addActionListener(new ListenToMasala());
    (buttonDishes.get(15)).addActionListener(new ListenToOnion());
    (buttonDishes.get(16)).addActionListener(new ListenToOpenButter());
    (buttonDishes.get(17)).addActionListener(new ListenToRava());
    (buttonDishes.get(18)).addActionListener(new ListenToSet());
    (buttonDishes.get(19)).addActionListener(new ListenToTea());
    (buttonDishes.get(20)).addActionListener(new ListenToCoffee());
    displayButton.addActionListener(new ListenToDisplay());
    clearButton.addActionListener(new ListenToClear());

    add(panel);

    setTitle("SAKKATH HOT MAGA DARSHINI");
    setSize(2000,1000);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setLocationRelativeTo(null);    
}

class ListenToClear implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        order1.deleteAll();
        amount = 0;
        amountField.setText(Integer.toString(amount));
        billAmountField.setText(Integer.toString(amount));
    }
}

class ListenToDisplay extends JFrame implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        JButton deleteButton = new JButton("Delete Order");
        JPanel displayPanel = new JPanel();
        displayPanel.add(deleteButton);
        deleteButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                dishDelPos = JOptionPane.showInputDialog("Enter the position of the order to be deleted");
                dishDeletePosition = Integer.parseInt(dishDelPos);
                order1.posdel(dishDeletePosition);
                repaint();
            }
        });
        setTitle("CURRENT BILL");
        setSize(500,500);
        setLocationRelativeTo(null);
        add(billAmountField = new JTextField(15), BorderLayout.PAGE_END);
        billAmountField.setEditable(false);
        billAmountField.setHorizontalAlignment(billAmountField.RIGHT);
        add(displayPanel);
        setVisible(true);
        repaint();
    }

    public void paint(Graphics g)
    {
        super.paint(g);
        order1.display(g);

    }

}

class ListenToIdli implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Idli");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Idli", dishquant,16);
        amount = amount+(16*dishquant);
        amountField.setText(Integer.toString(amount));
    }
}

class ListenToVada implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Uddina Vada");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Uddina Vada", dishquant,14);
        amount = amount+(14*dishquant);
        amountField.setText(Integer.toString(amount));
    }
}

class ListenToKhara implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Khara Bhath");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Khara Bhath",dishquant,14);
        amount = amount+(14*dishquant);
        amountField.setText(Integer.toString(amount));
        billAmountField.setText(Integer.toString(amount));
    }
}

class ListenToKesari implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Kesari Bhath");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Kesari Bhath",dishquant,14);
        amount = amount+(14*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToChow implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Chow-Chow Bhath");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Chow-Chow Bhath",dishquant,28);
        amount = amount+(28*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}   

class ListenToPulao implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Veg Pulao");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Veg Pulao",dishquant,22);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));
                }
}

class ListenToVangi implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Vangi Bhath");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Vangi Bhath",dishquant,22);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToPuliogare implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Puliogare");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Puliogare",dishquant,22);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToLemon implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Lemon Rice");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Lemon Rice",dishquant,22);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));

    }
} 

class ListenToBiryani implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Veg Biryani");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Veg Biryani",dishquant,22);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToBisi implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Bisi Bele Bhath");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Bisi Bele Bhath",dishquant,22);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToPoori implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Poori,Saagu");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Poori,Saagu",dishquant,25);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToCurd implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Curd Vada");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Curd Vada",dishquant,20);
        amount = amount+(20*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToPlain implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Plain Dosa");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Plain Dosa",dishquant,22);
        amount = amount+(22*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToMasala implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Masala Dosa");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Masala Dosa",dishquant,25);
        amount = amount+(25*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToOnion implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Onion Dosa");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Onion Dosa", dishquant,30);
        amount = amount+(30*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToOpenButter implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Open Butter Masala Dosa");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Open Butter Masala Dosa", dishquant,30);
        amount = amount+(30*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToRava implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Rava Dosa");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Rava Dosa", dishquant,28);
        amount = amount+(28*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}   

class ListenToSet implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Set Dosa");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Set Dosa", dishquant,23);
        amount = amount+(23*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToTea implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Tea");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Tea", dishquant,12);
        amount = amount+(12*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

class ListenToCoffee implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        dishQuantStr = JOptionPane.showInputDialog("Enter the quantity of Coffee");
        dishquant = Integer.parseInt(dishQuantStr);
        order1.placeOrder("Coffee", dishquant,12);
        amount = amount+(12*dishquant);
        amountField.setText(Integer.toString(amount));

    }
}

public static void main(String[] args)
{

    SwingUtilities.invokeLater(new Runnable()
    {
        public void run()
        {
            Terminal term = new Terminal();
            term.setVisible(true);

        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:13:37.643

将您的按钮设置为不可聚焦，以在单击后移除“突出显示”（聚焦）效果。

```
button.setFocusable(false); 
```

请注意，这将删除在组件之间切换的“选项卡”功能。

# sqlite - 如何在我的学生域上“安装”SQLite？

> ID：13656417
> 
> 赞同：1
> 
> 时间：2012-12-01T04:38:49.833
> 
> 标签：sqlite, web-applications, installation

我以前在我的 Windows 桌面上玩过 SQLite，但我从来没有在网络环境中使用过它，而且他们的网络文档对这样的事情非常不具体。本质上，我有来自学校的免费学生网络空间（一个 /public/html/ 目录），我想将它用于一个小型数据驱动的网络项目。SQLite 是我唯一的（免费）选项，我想知道如何......在这种情况下“安装”它？更具体地说，只是将文件扔到 html 目录中并收工是否安全？

如果有帮助，我很确定它是 Linux 环境（他们运行 Apache）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:41:38.283

看看是不是已经安装好了。在 bash 会话中尝试以下操作：

```
touch test.db
sqlite3 test.db 
```

如果没有，您必须下载并安装 sqlite3。

有用的提示：如果您一直在尝试运行“sqlite”二进制文件，它可能不存在。它被称为'sqlite3'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:48:14.437

SQLite 是一个*嵌入式*数据库；它通常不会安装，而是编译到用于访问数据库的任何程序中。

所有典型的服务器端扩展语言（[PHP](http://php.net/manual/en/book.sqlite.php)、[Ruby](http://rubygems.org/gems/sqlite3-ruby)、[Python](http://docs.python.org/2/library/sqlite3.html)、[Perl](http://search.cpan.org/~msergeant/DBD-SQLite-0.31/lib/DBD/SQLite.pm)等）都有 SQLite 支持模块。

您必须检查服务器上安装了哪一个，以及是否为它们启用了 SQLite 支持。

# php - 在 Codeigniter 构造函数中调用模型...如何

> ID：13656424
> 
> 赞同：0
> 
> 时间：2012-12-01T04:40:10.347
> 
> 标签：php, oop, codeigniter

我正在为 Codeigniter 中的代理机构开发 CRM，但我有一个问题，我似乎无法找到可靠的答案。如果我对控制器中的大多数方法执行一项任务，有没有办法只定义一次该操作？例如...

每个视图调用都会传递 $data 变量，就像这样......

```
$this->load->view('templates/template.php', $data); 
```

因此，如果我正在执行诸如在控制器的每个功能中获取管理员信息之类的操作，我怎么能告诉它一次执行该操作并将其传递给我的所有功能。

像这样...

```
$data['admin'] = $this->Crm_model->get_admin(); 
```

我已经尝试将 ^ 放在构造函数中，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:43:26.857

如果你这样做：

```
$data['admin'] = $this->Crm_model->get_admin(); 
```

在构造函数中，`$data`的作用域仅限于构造函数。您需要将其创建为类属性，以便将其作用于整个类。改为这样做

```
$this->data['admin'] = $this->Crm_model->get_admin(); 
```

在构造函数中，然后在其他方法中，您可以通过执行访问数组`$this->data`

这是一个例子：

```
class Foobar extends CI_Controller {

    public function __construct() {
        $this->data['foo'] = "bar";
    }

    public function index() {
        // use the class property data here to add more info to it
        $this->data['hello'] = "world";

        // now pass this to the view
        $this->load->view('myView', $this->data);
        // myView will receive both $foo and $hello

    }
} 
```

# android - 如何在Android中以圆形图案将文本绘制到视图中

> ID：13656425
> 
> 赞同：5
> 
> 时间：2012-12-01T04:40:32.033
> 
> 标签：android, textview, android-custom-view

我想以编程方式在圆形或半圆形中添加文本，以这样的方式，而不是有一个带有线条边缘的圆形，边缘就是单词。查看图片以获得更好的解释。

![文字圈](../Images/4b2511189890312730f184ac8e7f21a7.png)

我如何在 Android 中做到这一点，或者我可以阅读哪些资源来帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:47:06.780

为此，您需要将文本绘制到`Canvas`. 的任何子类都`View`被传入`Canvas`，`onDraw()`您可以使用它来绘制自定义文本。该方法`drawTextOnPath()`允许您将文本放在`Path`您选择的任何对象上。您可以通过创建新实例并使用`addArc()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:30:50.453

你可以使用下面的代码。并按照您想要的 Textview 进行制作。在这里，如果您想要某物作为背景图像，请使用 `setBackgroundResource(R.drawable.YOUR_IMAGE);`

```
 public class MainActivity extends Activity {
          @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
           setContentView(new GraphicsView(this));}

      static public class GraphicsView extends View {
         private static final String QUOTE = "text in a half-circle";
         private Path circle;
         private Paint cPaint;
         private Paint tPaint;

     public GraphicsView(Context context) {
      super(context);

      int color = Color.argb(127, 255, 0, 255);

      circle = new Path();
      circle.addCircle(230, 350, 150, Direction.CW);

      cPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
      cPaint.setStyle(Paint.Style.STROKE);
      cPaint.setColor(Color.LTGRAY);
      cPaint.setStrokeWidth(3);

      // For Background Image
     setBackgroundResource(R.drawable.YOUR_IMAGE);

      tPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
      tPaint.setStyle(Paint.Style.FILL_AND_STROKE);
     //TextColor you want to set
      tPaint.setColor(Color.BLACK);
      //TextSize you want to set
      tPaint.setTextSize(50);}

      @Override
         protected void onDraw(Canvas canvas) {
         canvas.drawTextOnPath(QUOTE, circle, 485, 20, tPaint);} 
                                            } 
} 
```

试试看。希望它会帮助你。

# javascript - 替换为 javascript

> ID：13656429
> 
> 赞同：0
> 
> 时间：2012-12-01T04:42:03.430
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery：无法附加 <script> 元素](https://stackoverflow.com/questions/610995/jquery-cant-append-script-element)

我正在尝试通过执行以下操作用 javascript 替换 div：

```
$("#frame").replaceWith("<script language='JavaScript' type='text/javascript'>AC_VHost_Embed(2672266,206,206,'',1,1, 2279587, 0,1,0,'912832a3e8b02d79380c8352f2d497f6',9);</script>") ; 
```

但在控制台中，错误显示 Unexpected token: ILLEGAL

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:48:59.810

我猜这是内联的 JavaScript，在这种情况下，您需要分解结束`</script>`标记。我还使它更具可读性：

```
$("#frame").replaceWith(
    "<script language='JavaScript' type='text/javascript'>"
    + "AC_VHost_Embed(2672266,206,206,'',1,1, 2279587, "
    + "0,1,0,'912832a3e8b02d79380c8352f2d497f6',9);"
    + "<" + "/script>"
); 
```

这样做的原因是浏览器不会认为您`</script>`的字符串内部是脚本块的结尾。例子：

```
<script>
    // Doesn't work!
    alert('</script>');
</script> 
```

您的浏览器会看到：

```
<script>
    // Doesn't work!
    alert('
</script>
');
</script> 
```

换句话说，您的浏览器认为脚本在它第一次看到时就结束了`</script>`。您可以通过将假货`</script>`分解成碎片来解决此问题。

```
<script>
    // Works fine!
    alert('<' + '/script>');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:50:23.820

~~在渲染后将脚本标记附加到 DOM 不会自动加载脚本。~~

看看这个 jQuery 函数来加载脚本：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

# php - PHP：file_get_contents & curl 不工作（但终端 curl 可以）

> ID：13656431
> 
> 赞同：-1
> 
> 时间：2012-12-01T04:42:04.187
> 
> 标签：php, curl, file-get-contents

我正在尝试从此链接卷曲 json：[http ://web-app.usc.edu/ws/soc/api/departments/20131](http://web-app.usc.edu/ws/soc/api/departments/20131)

我试过了：

文件获取内容：

```
$json = file_get_contents("http://web-app.usc.edu/ws/soc/api/departments/20131"); 
```

卷曲：

```
$ch = curl_init('http://web-app.usc.edu/ws/soc/api/departments/20131');
$response = curl_exec($ch); 
```

但是 file_get_contents “无法打开流”并且 curl 似乎挂起。有趣的是，在终端中卷曲 url 效果很好。

**怎么了？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:47:58.233

PHP 设置可以（并且应该）禁止在 url 上使用调用 fopen 的 file_get_contents。请参阅[http://www.php.net/manual/en/filesystem.configuration.php](http://www.php.net/manual/en/filesystem.configuration.php)。

卷曲是抓取文件的正确方法。我认为您的问题可能是缺少 curl 选项。尝试设置`CURLOPT_RETURNTRANSFER`为真。如果您不这样做，则直接输出转移，而不是作为调用的返回值`curl_exec()`。

```
$ch = curl_init('http://web-app.usc.edu/ws/soc/api/departments/20131');
curl_setopt ( $ch , CURLOPT_RETURNTRANSFER , true );
$response = curl_exec($ch); 
```

另一个 RTM 链接：[http ://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

# php - 它无法从 WHERE 子句中的变量中检索正确的值

> ID：13656433
> 
> 赞同：0
> 
> 时间：2012-12-01T04:42:29.820
> 
> 标签：php, mysqli

下面我有一个查询，它执行查询以从数据库中查找所有课程详细信息并将其显示在下拉菜单中，然后使用`$outputcourse`变量在消息中显示所选课程：

```
 $sql = "SELECT CourseId, CourseNo, CourseName FROM Course ORDER BY CourseNo"; 

    $sqlstmt=$mysqli->prepare($sql);

    $sqlstmt->execute(); 

    $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

    $courses = array(); // easier if you don't use generic names for data 

    $courseHTML = "";  
    $courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    $outputcourse = ""; 
    $hiddencourse = ""; 

    while($sqlstmt->fetch()) 
    { 
    $course = $dbCourseId;
    $courseno = $dbCourseNo;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  

    if (isset($_POST['courses']) && ($_POST['courses'] == $course)) {
    $outputcourse .= "<p><strong>Course:</strong> " . $courseno .  " - "  . $coursename . "</p>";
    $hiddencourse .= "<p><input type='hidden' id='hiddencourse' value='". $courseno . " - " . $coursename ."'></p>";
}

    } 

    $courseHTML .= '</select>'; 
```

现在我要做的是显示不属于所选课程的模块。现在我的查询在 php 中运行良好，但我遇到的问题是，如果我使用 mysqli 运行此查询，它无法`$dbCourseId`在 where 子句中检索变量，因此 WHERE 子句不正确。

WHERE 子句应该显示应该是的 courseId`1`但它一直显示`10`。如果我选择 courseId 应该在的不同课程`3`，它仍然会输出`10`。

那么我的问题是，哪个变量应该放在下面代码中的 bind->param() 中，我怎样才能撤销所选课程的正确 courseId？

下面是查询的代码：

```
$modulequery = "
SELECT
m.ModuleId, m.ModuleNo, m.ModuleName, m.Credits
FROM
Module m
WHERE
m.ModuleId NOT IN (
SELECT cm.ModuleId
FROM Course_Module cm
WHERE cm.CourseId = ?
)
ORDER BY m.ModuleNo
";

$moduleqrystmt=$mysqli->prepare($modulequery);
// You only need to call bind_param once
$moduleqrystmt->bind_param("i",$dbCourseId);
// get result and assign variables (prefix with db)

$moduleqrystmt->execute(); 

$moduleqrystmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName,$dbCredits);

$moduleqrystmt->store_result();

$modulenum = $moduleqrystmt->num_rows();     

echo $dbCourseId; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:40:27.133

在您检查用户是否单击`courseSubmit`按钮的 if 语句下方包括以下行：

```
if (isset($_POST['courseSubmit'])) {    

        //get the form data 
    $coursesdrop = (isset($_POST['courses'])) ? $_POST['courses'] : ''; 
```

现在，由于每个 Course 选项都包含 的值`$dbCourseId`，因此您可以使用`$coursesdrop`变量来检索其他查询中的 Course ID。

所以在另一个查询更改中：

`$moduleqrystmt->bind_param("i",$dbCourseId);`

至：

`$moduleqrystmt->bind_param("i",$coursesdrop);`

这解决了问题

# .htaccess - 图片盗链

> ID：13656434
> 
> 赞同：0
> 
> 时间：2012-12-01T04:42:31.877
> 
> 标签：.htaccess

我一直在寻找一种方法来阻止 .htaccess 其他域下载图像，到目前为止，这是我最喜欢的[答案，并进行了一些修改：](https://stackoverflow.com/questions/1245869/allow-deny-image-hotlinking-with-htaccess)

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain\.com [NC]
#RewriteCond %{HTTP_REFERER} !^http://(www\.)?otherdomain\.com [NC]
RewriteRule \.(gif|jpe?g|js|css)$ - [F,NC,L] 
```

好一个并且有效，但仅适用于某些图像。

有没有办法阻止对所有图像的访问？

提前致谢。

更新：我所有的图像文件都在 mydomain.com/Images

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:41:07.493

在这种情况下，您可能想试试[这个](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

```
RewriteCond expr "! %{HTTP_REFERER} -strmatch '*://%{HTTP_HOST}/*'"
RewriteRule ^/images - [F, NC]     # No need for L, it is implied when using F 
```

# cocos2d-iphone - 以编程方式在 UINavigation Bar 中创建一个左指向 UIBarButton

> ID：13656439
> 
> 赞同：0
> 
> 时间：2012-12-01T04:44:12.033
> 
> 标签：cocos2d-iphone, navigation, uinavigationbar, uibarbuttonitem, uinavigationitem

我正在尝试创建一个带有设置页面的应用程序，就像 IOS 的本机设置应用程序一样。但是我不知道如何创建一个左指向的 UIBarButton。基本上我想要一个导航栏顶部的左指向按钮，你可以设置它来调用一个函数。如果这有帮助，我正在使用引擎 cocos2d。我正在以编程方式创建整个应用程序。

这是我创建 UINavigationBar 的代码...

```
UINavigationBar *naviBarObj = [[[UINavigationBar alloc] initWithFrame:CGRectMake(0, 20, 320, 44)] autorelease];
[[[CCDirector sharedDirector] openGLView] addSubview:naviBarObj];
[naviBarObj release];
UINavigationItem *item = [[[UINavigationItem alloc] initWithTitle:@"Title"] autorelease];
UIBarButtonItem *back = [[[UIBarButtonItem alloc] initWithTitle:@"Back"
                                                         style:UIBarButtonItemStyleBordered
                                                        target:self
                                                        action:@selector(back)] autorelease];
item.leftBarButtonItem = back;
[naviBarObj setItems:[NSArray arrayWithObjects:item, nil] animated:YES]; 
```

虽然这会创建一个方形后退按钮。

我的目标是创造这样的东西

![左指向按钮](../Images/bbba62aeb4108b41d088ef2be26a423a.png)

我知道 UINavigationItem

`UINavigationItem *back2 = [[[UINavigationItem alloc] initWithTitle:@"Settings"] autorelease];`

和`[naviBarObj setItems:[NSArray arrayWithObjects:back,item, nil] animated:YES];`

会产生这种效果，但不幸的是我目前没有使用 UINavigationController 类。这一切都是在 CCLayer 中完成的。

谢谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:41:26.013

一种方法是使用自定义背景图像，但这有点乏味。

另一种方法就像您在上一部分中提到的那样，创建另一个“虚拟”先前导航项，标题设置为您希望在后退按钮上显示的文本，然后将这两个项目添加到 UINavigationBar。

```
UINavigationItem *item = [[[UINavigationItem alloc] initWithTitle:@"Title"] autorelease];    
UINavigationItem *back2 = [[[UINavigationItem alloc] initWithTitle:@"Settings"] autorelease];

[naviBarObj setItems:[NSArray arrayWithObjects:back2,item, nil] animated:YES]; 
```

但是，我认为您不需要 UINavigationController 来实现这些。为了处理您的后退按钮事件，我想您可以尝试让您的 CCLayer 成为 UINavigationBar 的代表，即。UINavigationBarDelegate：

```
@interface MyLayer : CCLayer <UINavigationBarDelegate> {
} 
```

然后将您的 UINavigationBar 的委托设置为该层：

```
naviBarObj.delegate = self; 
```

最后实现 didPopItem 以在单击按钮时获得事件通知：

```
- (void) navigationBar:(UINavigationBar *)navigationBar didPopItem:(UINavigationItem *)item
{
    [self back]; // or whatever 
} 
```

让我知道这个是否奏效。

# ruby - octopress 的类别菜单名称

> ID：13656452
> 
> 赞同：0
> 
> 时间：2012-12-01T04:47:01.503
> 
> 标签：ruby, octopress

我使用octopress作为我的博客引擎。最近在创建C++类别时，创建的菜单名称不是c++，“+”改为“-”，不知道为什么？希望有人能帮助我。非常感谢！

![像这样](../Images/58e3f207f5934f56cb7e9c5949fd237c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T06:04:09.463

为什么这很重要？

我也有像你这样的类别，但是博客中的类别名称仍然显示 C++。我认为没关系。

![在此处输入图像描述](../Images/3b1d9f7fb33ee91ed36e7748450f5dba.png)

![在此处输入图像描述](../Images/26b03063de9e2f5f75ea6e62a46cb52d.png)

# javascript - 许多人在 hrefs 中写 `javascript:void(0)` 而不是 `javascript:void 0`。括号有什么作用吗？

> ID：13656453
> 
> 赞同：14
> 
> 时间：2012-12-01T04:47:04.883
> 
> 标签：javascript

我看到人们`void(0)`一直在写作，但我不明白人们为什么使用括号。据我所知，他们没有目的。`void`不是函数，而是运算符。那么人们为什么要使用括号呢？他们有目的吗？[即使在 MDN 上也使用了括号](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T04:58:59.523

我不得不承认我过去曾多次使用过相同的构造，主要是因为我已经看到它在其他网站上被使用过。我不再使用它，因为不显眼的 JavaScript 比内联 JavaScript 更受欢迎；事实上，它几乎专门用于内联以确保页面不会刷新。

话虽如此，正如您正确指出的那样，它是一个运算符而不是一个函数。它仍然有效的原因仅仅是因为`(0)`和`0`是同一件事，所以这就是它的评估方式：

```
void (0); 
```

这与以下内容相同：

```
void 0; 
```

我想它被写成函数调用的原因是因为人们在使用内联函数时感觉更舒服:)

```
<a href="javascript:void 0">...</a> // hold on, that can't work, can it?!

<a href="javascript:void(0)">...</a> // ahhh, normality restored 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T04:51:02.013

> *“那么人们为什么要使用括号呢？”*

人做傻事。

> *“他们有目的吗？”*

不，他们不需要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T04:55:15.210

此[链接](http://www.coderenaissance.com/2011/02/javascripts-void-operator-explained.html)为您解释它。

> 澄清的一件事是 void 是一个运算符（不是函数）。因为这个 void(0) 在技术上是不正确的，尽管在实践中实现允许它以这种方式使用它应该在没有括号的情况下使用，例如 void 0。

所以它在技术上使用是错误的，`void(0)`但实际上 void 有两种不同的语法：

```
void (expression)
void expression 
```

**MDN**已经告诉你，虽然没有对这两种语法做出明确的说明，但它在技术上并不正确。

**礼貌：**

*   [http://www.coderenaissance.com/2011/02/javascripts-void-operator-explained.html](http://www.coderenaissance.com/2011/02/javascripts-void-operator-explained.html)
*   [http://www.w3resource.com/javascript/operators/void.php](http://www.w3resource.com/javascript/operators/void.php)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)

# java - Java 方法分派语义

> ID：13656461
> 
> 赞同：0
> 
> 时间：2012-12-01T04:48:47.237
> 
> 标签：java, methods, subclass

这是一个非常奇怪的问题，所以请多多包涵。

我想知道Java规范是否保证两个子类中的覆盖方法通过每个子类中的相同机制来解决。换句话说，如果我有

```
public class Foo {
    public int frob() {
        return 7;
    }
}

public class Bar extends Foo {
    @Override
    public int frob() {
        return 8;
    }
}

public class Baz extends Foo {
    @Override
    public int frob() {
        return 9;
    }
} 
```

和某处的方法：

```
public static int quux(Bar b) {
    return b.frob();
} 
```

我知道只打电话`.frob()`，打电话`b`有多安全`quux((Bar)new Baz())`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:55:45.220

`quux((Bar)new Baz())`甚至不会编译。`Baz` *（因为IS-NOT* a ，所以不能从 Baz 转换到 Bar `Bar`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:13:52.357

**-** Bar `IS-A`Foo 和 Baz `IS-A`Foo。

**-**但是 Bar 既不是 Baz 也不是 Baz 是 Bar，所以这个铸造是行不通的。

# javascript - 无法在 javascript 中获取我的网页高度？

> ID：13656463
> 
> 赞同：2
> 
> 时间：2012-12-01T04:49:13.150
> 
> 标签：javascript

我有一个不同的问题，当用户单击页面并拖动到某个位置时，我应该使用该坐标绘制一个矩形 div ...

但它工作正常，当用户不滚动窗口时..

如果他滚动窗口。然后他试图创建一个矩形意味着，然后它来到了较高的位置..

我该如何解决这个问题..我对javascript没有太多了解..

如果我不能详细解释你。随意问我..

谢谢拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T20:01:44.943

听起来您缺少滚动位置的起点和终点。在 mousedown 事件上获取滚动位置，然后在 mouseup 事件上获取滚动位置。使用滚动位置的变化来帮助确定 div 的大小。

在每个事件上，使用如下函数获取滚动位置：

```
function getScrollXY() {
  var scrOfX = 0, scrOfY = 0;
  if( typeof( window.pageYOffset ) == 'number' ) {
    //Netscape compliant
    scrOfY = window.pageYOffset;
    scrOfX = window.pageXOffset;
  } else if( document.body && ( document.body.scrollLeft || document.body.scrollTop ) ) {
    //DOM compliant
    scrOfY = document.body.scrollTop;
    scrOfX = document.body.scrollLeft;
  } else if( document.documentElement && ( document.documentElement.scrollLeft || document.documentElement.scrollTop ) ) {
    //IE6 standards compliant mode
    scrOfY = document.documentElement.scrollTop;
    scrOfX = document.documentElement.scrollLeft;
  }
  return [ scrOfX, scrOfY ];
} 
```

# c++ - 如何在 C++ 中传递 STL 对象的消息，例如 MPI 中的 std::map？

> ID：13656465
> 
> 赞同：4
> 
> 时间：2012-12-01T04:49:26.740
> 
> 标签：c++, stl, parallel-processing, mpi

`std::map`我想在 C++ 中通信 stl 对象，例如`std::list`使用 MPI，但我不知道如何制作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T04:54:23.617

不幸的是，这不可能直接。您将需要进行某种序列化。

由于您提到 MPI，您可能对高性能感兴趣。在这种情况下，使用序列化可能不是最好的主意。所以我会远离更复杂的 STL 结构，只使用`std::vector`.

# java - 具有多列的 JDBC 删除语句

> ID：13656467
> 
> 赞同：-1
> 
> 时间：2012-12-01T04:49:47.163
> 
> 标签：java, sql, jdbc

它说当我将它输入到 sql plus 时，我只添加了 ; 就错误地结束了这个语句 它完美地工作。我究竟做错了什么？

```
 Statement statement = connection.createStatement();
    statement.executeUpdate("delete from aplbuk  MODEL = '"+   textField_4.getText()  + "'AND  year = '" + textField_1.getText()  + "' AND Litres = '" + textField_2.getText() 
    + "' AND ENGINE_TYPE = '" + textField_3.getText() + "'");
    statement.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:53:01.377

查询`where`中的表名后缺少`aplbuk`关键字`delete from aplbuk MODEL`。

将查询更新为：

```
 statement.executeUpdate("delete from aplbuk  where  MODEL = '"+   
                           textField_4.getText()  + "'AND  year = '" + 
                           textField_1.getText()  + "' AND Litres = '" + 
                           textField_2.getText() + "' AND ENGINE_TYPE = '" + 
                           textField_3.getText() + "'"); 
```

此外，如果`year`和`Litres`是数字字段，则不要将值括在单引号中。

# r - 在 data.table() 中使用 sum() 引用赋值会产生不正确的结果

> ID：13656468
> 
> 赞同：1
> 
> 时间：2012-12-01T04:49:48.283
> 
> 标签：r, data.table

我有一个包含 3 列的 data.table 测试：Year、ID、Count（请参见下面的前 3 列）。我想添加第四列来汇总 ID 和年份，如下所示：

```
setkey(test, Year, ID)
test[, annualCount := sum(Count), by=list(Year, ID)] 
```

我得到的东西看起来很奇怪：似乎函数 [ 自动将 1 添加到我的年度计数。例如，ID 210 和 Y1 应该给我 8 而不是 9。

它是 data.table 中的错误吗？

```
 Year       ID    Count  annualCount
 1:   Y1      210        1            9
 2:   Y1      210        1            9
 3:   Y1      210        0            9
 4:   Y1      210        1            9
 5:   Y1      210        1            9
 6:   Y1      210        1            9
 7:   Y1      210        1            9
 8:   Y1      210        1            9
 9:   Y1      210        1            9
10:   Y1     3197        1            6
11:   Y1     3197        1            6
12:   Y1     3197        0            6
13:   Y1     3197        1            6
14:   Y1     3197        1            6
15:   Y1     3197        1            6 
```

更新：我使用的是 R 版本 2.15.0 (2012-03-30)，但我安装了 data.table_1.8.6。当我安装这个包时，我收到一个警告，这个版本是在 2.15.1 上构建的。这是错误的原因吗？

更新 2：我安装了最新的 R（此时为 2.15.2），但没有帮助。使用相同的数据集，如果我打电话

```
 test1 <- test[, list(annualCount = sum(Count)), by=list(Year, ID)] 
```

然后我得到正确的结果。但如果我打电话

```
test2 <- test[, list(annualCount = sum(Count, na.remove = T)), by=list(Year, ID)] 
```

然后 [ 自动将 1 添加到我的总和中。不幸的是，我无法从头开始复制带有此错误的数据集。

更新 3：dput(test) 输出。

```
structure(list(Year = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
                                  1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("Y1", "Y2", "Y3"), class = "factor"), 
               ID = c(210, 210, 210, 210, 210, 210, 210, 210, 210, 
                            3197, 3197, 3197, 3197, 3197, 3197), 
               Count = c(1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0)), 
          .Names = c("Year","ID", "Count"), class = c("data.table", "data.frame"), 
          row.names = c(NA, -15L), .internal.selfref = <pointer: 0x7fb6dc000778>) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:27:50.137

这不是人为错误的问题`data.table`，而是人为错误；）

为了复制，这里是一些示例数据。我已经包含了一些`NA`值来查看`sum`带有和不带有 remove s 参数的函数的结果`NA`，即`na.rm`, not `na.remove`：

```
set.seed(1)
test <- data.table(Year = rep("Y1", 15),
                   ID = c(rep(210, 9), rep(3197, 6)),
                   Count = sample(c(0, 1, NA), 15, 
                                  prob=c(.2, .65, .15), 
                                  replace=TRUE),
                   key = "Year,ID")
test
#     Year   ID Count
#  1:   Y1  210     1
#  2:   Y1  210     1
#  3:   Y1  210     1
#  4:   Y1  210    NA
#  5:   Y1  210     1
#  6:   Y1  210    NA
#  7:   Y1  210    NA
#  8:   Y1  210     0
#  9:   Y1  210     1
# 10:   Y1 3197     1
# 11:   Y1 3197     1
# 12:   Y1 3197     1
# 13:   Y1 3197     0
# 14:   Y1 3197     1
# 15:   Y1 3197     0 
```

在我们创建新列之前，让我们进行一些聚合，看看使用不同的选项会发生什么`sum`。

```
test[, list(annualCount = sum(Count)), by = key(test)]
#    Year   ID annualCount
# 1:   Y1  210          NA
# 2:   Y1 3197           4
test[, list(annualCount = sum(Count, na.rm = TRUE)), by = key(test)]
#    Year   ID annualCount
# 1:   Y1  210           5
# 2:   Y1 3197           4 
```

现在，使用您预期的结果创建新列。

```
test[, annualCount := sum(Count, na.rm = TRUE), by = key(test)][]
#     Year   ID Count annualCount
#  1:   Y1  210     1           5
#  2:   Y1  210     1           5
#  3:   Y1  210     1           5
#  4:   Y1  210    NA           5
#  5:   Y1  210     1           5
#  6:   Y1  210    NA           5
#  7:   Y1  210    NA           5
#  8:   Y1  210     0           5
#  9:   Y1  210     1           5
# 10:   Y1 3197     1           4
# 11:   Y1 3197     1           4
# 12:   Y1 3197     1           4
# 13:   Y1 3197     0           4
# 14:   Y1 3197     1           4
# 15:   Y1 3197     0           4 
```

# c# - 在 curl 中制定 POST 请求

> ID：13656469
> 
> 赞同：4
> 
> 时间：2012-12-01T04:50:04.120
> 
> 标签：c#, rest, post, curl

我正在使用 curl 向 Web 服务 http://localhost 2325//Service 发送 POST 请求

如何将 POST 请求的主体反序列化为一个变量，然后我可以在我的 POST 方法中访问该变量？

有人可以给我一个例子吗？

这是我的方法

```
[WebInvoke(RequestFormat = WebMessageFormat.Json, UriTemplate = "/user", Method = "POST")] public void Create(User us) 
```

类用户包含`user_id`和`user_name.`

有人可以帮忙吗？我所需要的只是一个如何在 curl 中制定 POST 请求的示例

我试过这个，但它不起作用

curl -v -H "接受: application/json" -H "Content-type: application/json" -X POST -d ' `{"user":{"user_name":"Name1","user:id":"11"}}'` http://localhost:3000/api/1/users

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:27:01.763

因为您在方法签名中命名了您的参数`us`，所以您的 JSON 需要是：

```
{"us":{"user_name":"Name1","user:id":"11"}} 
```

或者在方法签名中重命名您的参数“用户”。

# python - 获取文本 python 金字塔 utf8

> ID：13656475
> 
> 赞同：1
> 
> 时间：2012-12-01T04:50:40.250
> 
> 标签：python, utf-8, pyramid, gettext

我有一个项目使用 gettext 将英语翻译成日语，但是。这是我的代码 .py 文件导入 gettext

```
t=gettext.translation('noname','advbus/locale', languages=['ja'])
_=t.gettext
print _("Hello") 
```

并在文件 .po

```
msgid "Hello"
msgstr "今日は" 
```

我将 .po 文件编译为 .mop 文件，但显示不正确 今日は.(utf8) 当我运行 .py 文件时，它运行正常。但不对，我的意思是它不能显示 unicode (ä»Šæ—¥ã?¯) 我尝试为文件 .mo 文件设置 utf8。但是错误

```
 File "C:\env\Scripts\pserve-script.py", line 8, in <module>
    load_entry_point('pyramid==1.4a1', 'console_scripts', 'pserve')()
  File "C:\env\lib\site-packages\pyramid-1.4a1-py2.7.egg\pyramid\scripts\pserve.py", line 47, in main
    return command.run()
  File "C:\env\lib\site-packages\pyramid-1.4a1-py2.7.egg\pyramid\scripts\pserve.py", line 290, in run
    relative_to=base, global_conf=vars)
  File "C:\env\lib\site-packages\pyramid-1.4a1-py2.7.egg\pyramid\scripts\pserve.py", line 318, in loadapp
    return loadapp(app_spec, name=name, relative_to=relative_to, **kw)
  File "C:\env\lib\site-packages\paste\deploy\loadwsgi.py", line 247, in loadapp
    return loadobj(APP, uri, name=name, **kw)
  File "C:\env\lib\site-packages\paste\deploy\loadwsgi.py", line 272, in loadobj
    return context.create()
  File "C:\env\lib\site-packages\paste\deploy\loadwsgi.py", line 710, in create
    return self.object_type.invoke(self)
  File "C:\env\lib\site-packages\paste\deploy\loadwsgi.py", line 146, in invoke
    return fix_call(context.object, context.global_conf, **context.local_conf)
  File "C:\env\lib\site-packages\paste\deploy\util.py", line 56, in fix_call
    val = callable(*args, **kw)
  File "C:\env\advbus\advbus\__init__.py", line 195, in main
    config.scan()
  File "C:\env\lib\site-packages\pyramid-1.4a1-py2.7.egg\pyramid\config\__init__.py", line 946, in scan
    ignore=ignore)
  File "C:\env\lib\site-packages\venusian-1.0a7-py2.7.egg\venusian\__init__.py", line 197, in scan
    __import__(modname)
  File "C:\env\advbus\advbus\hello.py", line 3, in <module>
    t=gettext.translation('noname','advbus/locale', languages=['ja'])
  File "C:\env\lib\gettext.py", line 478, in translation
    t = _translations.setdefault(key, class_(fp))
  File "C:\env\lib\gettext.py", line 180, in __init__
    self._parse(fp)
  File "C:\env\lib\gettext.py", line 281, in _parse
    raise IOError(0, 'Bad magic number', filename)
IOError: [Errno 0] Bad magic number: 'advbus/locale\\ja\\LC_MESSAGES\\noname.mo' 
```

这是我在互联网上复制的subscribers.py 文件

```
 from pyramid.i18n import get_localizer, TranslationStringFactory

def add_renderer_globals(event):
    request = event['request']
    event['_'] = request.translate
    event['localizer'] = request.localizer

tsf = TranslationStringFactory('YOUR_GETTEXT_DOMAIN')

def add_localizer(event):
    request = event.request
    localizer = get_localizer(request)
    def auto_translate(*args, **kwargs):
        return localizer.translate(tsf(*args, **kwargs))
    request.localizer = localizer
    request.translate = auto_translate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:05:59.133

错误消息`Bad magic number`来自`gettext.py`指向格式不正确的`.mo`文件。阅读您自己的 Python 副本`gettext.py`，或查看[Apple 托管的`gettext.py`](http://www.opensource.apple.com/source/python/python-3/python/Lib/gettext.py).

我猜从 .po 到 .mo 的编译器工作不正常。向我们展示您的 .po 编译过程，也许我们可以提供进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:27:25.610

```
"Project-Id-Version: adv 0.0\n"
"Report-Msgid-Bugs-To: EMAIL@ADDRESS\n"
"POT-Creation-Date: 2012-12-01 11:41+0700\n"
"PO-Revision-Date: 2012-12-01 09:58+0700\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: ja <LL@li.org>\n"
"Plural-Forms: nplurals=1; plural=0\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 0.9.6\n"

#: advbus/hello.py:5
msgid "Hello"
msgstr "今日は" 
```

那是我的 .po 文件和我的 .mo 文件 ä»Šæ—¥ã¯ 字符串不正确 我尝试运行 .py 文件，它可以工作，但字符串相同 ä»Šæ—¥ã¯ 所以我设置了 utf-8对于 .mo 文件，字符串显示在 .mo 文件上正常。但是当我运行 .py 文件时，上面有错误

# javascript - Kendo UI Mobile 与 Google Adsense

> ID：13656479
> 
> 赞同：3
> 
> 时间：2012-12-01T04:51:13.197
> 
> 标签：javascript, kendo-ui, adsense

我正在尝试将广告添加到我的应用程序中。我已将 JavaScript 放置在正确的位置。问题是当我点击进入包含广告的页面时，只有广告显示在页面上。所有内容都消失了，只有一个带有广告的白屏。该应用程序也不会让我回击，因此我必须重新启动该应用程序。有谁知道为什么会发生这种情况？

这是我放置代码的示例。我可以将它放在页面上的任何位置，并获得与将其放在页脚中相同的结果。Adsense 代码的另一部分在 Head 中。

```
<div data-role="layout" data-id="child-page" data-platform="android">
        <div data-role="footer">
            <script type="text/javascript"
                src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:29:02.413

弄清楚了。我必须将脚本放在主体中，而不是放在 div 中。为了格式化它，我在脚本标签中添加了一个 ID，然后使用 CSS 将广告正确地显示在屏幕上。

# android - Android地图缩放到覆盖项目

> ID：13656481
> 
> 赞同：2
> 
> 时间：2012-12-01T04:51:48.907
> 
> 标签：android

我正在尝试在我的 android 应用程序上使用 Google 地图 API。我已经在特定的地理点坐标处设置了一个覆盖项。在打开活动时，它使用谷歌地图的默认地图视图以及该地理点的覆盖项目的正确位置。我的问题是，如何设置要为该地理点放大的视图，以便人们以更好的方式实际看到该位置，而不必通过跟踪覆盖项目手动放大。我希望放大它，这样我就可以看到本地区域，这样用户至少可以从中获得有用的信息。我的代码如下：

/ *---- HelloItemizedOverlay.java --------* /

```
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
Context mContext;

public void addOverlay(OverlayItem overlay)
{
    mOverlays.add(overlay);
    populate();
}

public HelloItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
}
public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
      super(boundCenterBottom(defaultMarker));
      mContext = context;
    }

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return mOverlays.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
  OverlayItem item = mOverlays.get(index);
  AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
  dialog.setTitle(item.getTitle());
  dialog.setMessage(item.getSnippet());
  dialog.show();
  return true;
}
} 
```

/*---- MainActivity.java ---- */

```
public class MainActivity extends MapActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView view = (MapView)findViewById(R.id.themap);
    view.setBuiltInZoomControls(true);

    final GeoPoint point = new GeoPoint(19240000,-99120000);
    OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");

    GeoPoint point2 = new GeoPoint(35410000, 139460000);
    OverlayItem overlayitem2 = new OverlayItem(point2, "Sekai, konichiwa!", "I'm in Japan!");

    final MapController control = view.getController();
    LocationManager manager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    LocationListener listener = new LocationListener() {

        @Override
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderDisabled(String arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onLocationChanged(Location arg0) {
            // TODO Auto-generated method stub
            control.setCenter(point);
        }
    };

    manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
    List<Overlay> mapOverlays = view.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

    itemizedoverlay.addOverlay(overlayitem2);
    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:07:13.817

@noobcoder 我使用了相同的示例，如果我的问题正确，您可以使用以下方法缩放到特定点。

[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapController#animateTo(com.google.android.maps.GeoPoint](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapController#animateTo(com.google.android.maps.GeoPoint) , java.lang.Runnable)

它至少对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:15:58.593

```
view = (MapView)findViewById(R.id.themap);
mapController = view.getController();

point = new GeoPoint((int) (38.897089* 1E6), (int) (-77.051437* 1E6));

mapControler .animateTo(point );
mapControler .setZoom(17);    //Set zoom level as you want..,. 
```

试试这个..，。

# jquery - 选中一行中的所有复选框时如何选中复选框？

> ID：13656487
> 
> 赞同：0
> 
> 时间：2012-12-01T04:53:52.187
> 
> 标签：jquery

嗨，所有其他复选框时，我如何检查复选框

```
<div id="Row-8">
    <span class="span2">
        <label class="checkbox">
            <input type="checkbox" class="regular-checkbox" onchange="checkallrowcheckboxes(this)" value="8" name="selectedObjects" id="8"><label for="rowcommoncheckbox-8"></label></label></span>
    <span class="span2">AddOrEdit</span>
    <span class="span2">
        <label class="checkbox">
            <input type="checkbox" value="8" class="regular-checkbox" name="chkAdd" id="Add-8"><label for="Add-8"></label></label></span>
    <span class="span2">
        <label class="checkbox">
            <input type="checkbox" value="8" class="regular-checkbox" name="chkEdit" id="Edit-8"><label for="Edit-8"></label></label></span>
    <span class="span2">
        <label class="checkbox">
            <input type="checkbox" value="8" class="regular-checkbox" name="chkDel" id="Delete-8"><label for="Delete-8"></label></label></span>
    <span class="span2">
        <label class="checkbox">
            <input type="checkbox" value="8" class="regular-checkbox" name="chkview" id="View-8"><label for="View-8"></label></label></span>
</div> 
```

看起来像这样

```
ChkColumn  PageName Chk1 Chk2 Chk3 Chk4 
```

我想要的是当右侧 os 行中的所有复选框都被选中时，左侧复选框应该被自动选中..即 Chkcolumn 应该在 Chk1 Chk2 Chk3 Chk4 被检查时自动检查..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:58:49.117

无耻的自我推销：这似乎是[我编写的 jQuery 插件](http://mjball.github.com/jQuery-CheckAll/)的完美用例。

尝试这个：

```
$('#Row-8 input[type="checkbox"]:first')
    .checkAll('#Row-8 input[type="checkbox"]:not(:first)');​ 
```

演示：http: [//jsfiddle.net/mattball/9ErH6](http://jsfiddle.net/mattball/9ErH6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:10:25.940

```
$(function() {
    $('#Row-8 input').change(function() {
        var add8 = $('#Add-8').is(':checked');
        var edit8 = $('#Edit-8').is(':checked');
        var delete8 = $('#Delete-8').is(':checked');
        var view8 = $('#View-8').is(':checked');
        if (add8 && edit8 && delete8 && view8) {
            $('#Row-8 input').attr('checked',false);
            $('#8').attr('checked',true);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T05:28:45.753

在这里演示：http: [//jsfiddle.net/Mx4q2/](http://jsfiddle.net/Mx4q2/)

我在复选框中添加了一些“驱动”/“驱动”类，然后使用了这个脚本：

```
function driveCheckbox(event){
    var $currentRow = $(this).parents('.row');

    var $checkedDrivers = $currentRow.find('.driving-checkbox:checked');
    if($checkedDrivers.length == 4){
        $currentRow.find('.driven-checkbox').prop('checked', true);
    } else {
        $currentRow.find('.driven-checkbox').prop('checked', false);
    }
}

function selectAll(event){

    var $currentRow = $(this).parents('.row');

    var $targets = $currentRow.find('.driving-checkbox');
    if($(this).is(':checked')){
        $targets.prop('checked', true);
    } else {
        $targets.prop('checked', false);
    }
}
$('.driving-checkbox').change(driveCheckbox);
$('.driven-checkbox').change(selectAll); 
```

​</p>

# r - R中带有NA的数据框

> ID：13656490
> 
> 赞同：1
> 
> 时间：2012-12-01T04:54:31.900
> 
> 标签：r, frame

我有一个数据框，其中有一些带有 NA 条目的行，我想找到该行的索引和条目为 NA 的列。我正在以嵌套的方式循环来做到这一点，这需要太长时间。有更快的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:05:48.950

```
set.seed(123)
dfrm <- data.frame(a=sample(c(1:5, NA), 25,T), b=sample(c(letters,NA), 25,rep=T)
which(is.na(dfrm), arr.ind=TRUE)
      row col
 [1,]   4   1
 [2,]   5   1
 [3,]   8   1
 [4,]  11   1
 [5,]  16   1
 [6,]  20   1
 [7,]  21   1
 [8,]  24   1
 [9,]   6   2 
```

# extjs4 - 当按下警报确定按钮时，将焦点设置在 extjs 中的表单字段上

> ID：13656491
> 
> 赞同：2
> 
> 时间：2012-12-01T04:54:37.437
> 
> 标签：extjs4

当我按下警报确定按钮时，我想在 extjs 的数字字段中设置焦点，但我做不到我尝试这个系统。这是我的代码

```
Ext.Msg.alert("Invoice",'Invoice Id &nbsp'+invno + '&nbsp  is not Available');  
                        Ext.getCmp('InvoiceNo').focus(true); 
```

我的号码字段是

```
{
        xtype             : 'numberfield',                
        hideTrigger       : true,
        decimalPrecision  : 0,
        keyNavEnabled     : false,
        mouseWheelEnabled : false,
        fieldLabel        : 'InvoiceNo',
        id                : 'InvoiceNo',
        name              : 'InvoiceNo',
        enableKeyEvents   : true,                           
        //minValue          : 1,
        msgDisplay        : 'tooltip',
        anchor            : '95%',
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:31:11.743

我可以通过这个过程做到这一点。

```
 var v = Ext.getCmp('InvoiceNo').getValue();
Ext.Msg.confirm('InvoiceNo','InvoiceNo'+v , function (button) {
  var InvoiceNo = Ext.getCmp('InvoiceNo');
    if (button == 'yes') {
        setTimeout(function(){
            InvoiceNo.setValue(v);
            InvoiceNo.focus(true)[0];
        },100);                             
    }                                
}, this); 
```

# django - Django URL 正在被提交按钮更改

> ID：13656495
> 
> 赞同：1
> 
> 时间：2012-12-01T04:55:34.007
> 
> 标签：django, url, button, parameters

我对 Django 很陌生，而且对一般的网络编程不是很熟悉，所以很可能有一个简单的方法可以解决我不知道的问题。

我的网络应用程序是一个照片库。人们可以单击照片以查看放大版本，其中任一侧的按钮用于显示较旧或较新的照片。此外，图库中的照片可以按标签排序，标签作为 URL 参数传递。

我的问题是，当我单击其中一个提交按钮时，Django 将我的 URL 中的参数替换为按钮的名称，从而破坏了我对所使用标签的引用。例如，“127.0.0.1:8000/gallery/view/6/?tag=people”在单击下一步时，在尝试时转换为“127.0.0.1:8000/gallery/view/6/?older=Older”处理网址。

我的 HTML 中的代码：

```
<form action="/gallery/view/{{ photo.id }}/?tag={{ tag }}" method="get">
    {% if has_newer %}
    <input type="submit" name="newer" value="Newer">
    {% endif %}

    <img src="{{ photo.photofile.url }}">

    {% if has_older %}
    <input type="submit" name="older" value="Older">
    {% endif %}
</form> 
```

在我的 view.py 中，我在 render_to_response 中传递了标签和其他信息，但我不确定如何/是否可以在处理按钮时回收它。

```
render_to_response('item/view.html', {'photo':photo, 'tag':tag, 'related_tags': related_tags, 'related_photos': related_photos, 'has_newer': has_newer, 'has_older': has_older}, context_instance=RequestContext(request)) 
```

这是处理按钮的 view.py 代码：

```
if 'newer' in request.GET:
    if has_newer:   
        return HttpResponseRedirect('/gallery/view/%s/?tag=%s'%(newer[1].id, tag))
    else:
        return HttpResponseRedirect('/gallery/')
if 'older' in request.GET:
    if has_older:
        return HttpResponseRedirect('/gallery/view/%s/?tag=%s'%(older[1].id, tag))
    else:
        return HttpResponseRedirect('/gallery/') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:02:46.157

```
<form action="/gallery/view/{{ photo.id }}/" method="get">
    {% if has_newer %}
    <input type="submit" name="newer" value="Newer">
    {% endif %}

    <!--This will append a tag parameter with given value to the querystring -->
    <input type="hidden" name="tag" value="{{ tag }}">

    <img src="{{ photo.photofile.url }}">

    {% if has_older %}
    <input type="submit" name="older" value="Older">
    {% endif %}
</form> 
```

请注意，查询字符串已被删除`action`（因为它不会被使用），`older`and`newer`参数仍将被发送。

# algorithm - 证明 NP 复杂性

> ID：13656496
> 
> 赞同：3
> 
> 时间：2012-12-01T04:55:36.753
> 
> 标签：algorithm, proof, np

我正在学习如何证明某事是NP。在 Thomas Cormen 的算法介绍书中，他指出，如果给出某个问题的解决方案，则某些东西是 NP，您可以在多项式时间内验证它是否正确。

假设问题是 2x + 9 = 55，假设我不知道找到正确的 x 值需要多长时间，但是解决问题的算法返回了解决方案 23。然后证明它是 NP，我只需将 23 代入等式，看看这是否需要多项式时间并给我 55？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T04:56:56.810

是的; 如果您可以*在多项式时间内检查此问题的**每个*实例的*每个*正确*和*每个错误答案的正确性，那么问题就在 NP 中。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T08:10:26.567

向@Mehrdad 答案添加信息：

请注意，NP 代表**Nondeterministic Polynomial time** - 这意味着根据定义 - 当且仅当它可以通过[Non-deterministic Turing Machine](http://en.wikipedia.org/wiki/Non-deterministic_Turing_machine)以多项式方式解决时，问题才属于 NP 。

这相当于说在标准计算模型（RAM 机器/确定性图灵机）中 - 您可以在多项式时间内验证答案（如 @Mehrdad 回答）。[定义等价的维基百科页面中](http://en.wikipedia.org/wiki/NP_%28complexity%29#Equivalence_of_definitions)描述了等价的证明

**奖励：**
“在图灵机上可验证（多项式）的所有事物是否也是多项式可解决的”和“在非确定性图灵机多项式上可解决的所有事物是否也可在确定性图灵机多项式上解决”的问题也是等价的。
答案尚不清楚，这个问题被称为[P vs NP 问题](http://en.wikipedia.org/wiki/P_versus_NP_problem)，这是计算机科学中最重要的开放性问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-23T04:21:27.103

虽然上面的问题涵盖了 NP-ness 的最后一步，也许是最可识别的步骤，但有 3 个基本步骤可以表明问题存在于 NP 中。

1.  决策问题：你能把你的问题变成一个决策问题吗？在方程问题的情况下，决策问题将是“是否有一个 x 使得 2x+9=55？” ?

2.  证书：您能确定您的决策问题的答案吗？同样，在方程问题的情况下，答案可能是 x = 23

3.  验证：您能否在多项式时间内验证证书。通过在多项式时间内进行验证，您知道问题不是 NP-Hard。一些验证步骤可能是：是 xa 数字吗？X 等于 55-9 的二分之一吗？

这就是你如何知道你的问题完全在 NP 中。**

# c++ - 不存在从“std::string”到“char”的合适转换

> ID：13656501
> 
> 赞同：2
> 
> 时间：2012-12-01T04:56:35.437
> 
> 标签：c++

我正在为学校做一个项目，但遇到了一些问题（标题中有错误）。

这是遇到错误的代码行：

```
kruskalS[n].nodeList[m].push_back(tempFirstCity); 
```

`kruskalS`是一个结构，`nodeList`是结构内的一个类型向量，`string`我正在尝试将`tempFirstCity`（也是 a `string`）插入到该数组中。

我很容易犯一个基本错误，因为自四月以来我没有做过任何编程。任何形式的帮助都将不胜感激，如果需要，我愿意从该程序中发布更多信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T05:27:09.907

A`std::string`是（某种意义上）`char`s 的容器。`push_back`函数用于将一个元素添加到容器的末尾。因此，当您调用时`kruskalS[n].nodeList[m].push_back(tempFirstCity);`，您说您正在尝试将一个元素添加到被`string`调用的末尾`kruskalS[n].nodeList[m]`。所以编译器期望一个元素是一个`char`.

如果您知道那`tempFirstCity`不是空的并且您想将第一个`char`from添加`tempFirstCity`到末尾`kruskalS[n].nodeList[m]`（包括您知道的情况`tempFirstCity.size() == 1`），您可以这样做

```
kruskalS[n].nodeList[m].push_back(tempFirstCity[0]); 
```

如果你想在任何当前内容之后添加整个字符串，你可以这样做

```
kruskalS[n].nodeList[m] += tempFirstCity; 
```

如果您希望没有当前内容和/或您只想用`tempFirstCity`字符串替换已经存在的任何内容，您可以这样做

```
kruskalS[n].nodeList[m] = tempFirstCity; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T04:58:23.250

您可以使用：

```
std::string::c_str() 
```

它返回一个`const char *`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T05:37:08.123

你说 nodeList 是一个字符串类型的数组。即`std::string nodeList[x]`其中 x 是一个常数。

然后为该数组分配一个新元素，其中 m < x 如下：

```
kruskalS[n].nodeList[m] = tempFirstCity; 
```

* * *

根据评论：

要附加到向量的末尾，您不需要索引 m：

```
kruskalS[n].nodeList.push_back(tempFirstCity); 
```

在索引 m 处插入：

```
vector<string>::iterator itr = nodeList.begin();
for (int i = 0; i < m; i++)
  itr++;
nodeList.insert(itr, tempFirstCity); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-01T04:59:15.280

在 C++ 中，您可以使用`string::c_str()`将字符串转换为 C 编程`char`数组。

# microdata - 零售品牌/公司主页的正确高级 schema.org 微数据项类型是什么？

> ID：13656515
> 
> 赞同：4
> 
> 时间：2012-12-01T05:00:34.043
> 
> 标签：microdata, schema.org, rich-snippets

在完成零售品牌的公司主页微数据的情况下，我想听听其他人会推荐使用或已经使用的 schema.org 项目类型。以[TOMS 的鞋子](http://www.toms.com/)为例：

示例 #1 - 使用 /Corporation 作为高级 itemtype 可以包含很多很棒的 /Organization 微数据，但与零售商店无关。

```
<html itemscope='itemscope' itemtype="http://schema.org/Website>
  <head></head>
  <body itemscope='itemscope' itemtype="http://schema.org/Corporation>
      various microdata here probably including Product microdata
  </body> 
</html> 
```

注意：唯一特定于 /Corporation 的 schema.org 属性是tickerSymbol，而 TOMS 没有。

示例 #2 - 如果 TOMS 开设了自己的实体零售店渠道并且每个地点都有自己的主页，则此代码将起作用。然而，对于 TOMS's.com，虽然示意图准确且表面更具描述性，但 TOMS.com 的微数据标记不正确，因为[/ShoeStore](http://schema.org/ShoeStore)派生自 /LocalBusiness - 它必须代表一个物理位置。

```
<html itemscope='itemscope' itemtype='http://schema.org/Website'>
  <head></head>
  <body itemscope='itemscope' itemtype='http://schema.org/ShoeStore'>
   a whole bunch of jabber here 
  </body> 
</html> 
```

注意：由于 TOMS 是虚拟的，因此不能是 /Store，这意味着您失去了非常酷的属性，例如“currenciesAccepted”、“paymentAccepted”和“priceRange”。

这只是“坐等”的情况，直到更多的模式被批准用于“虚拟场所”，还是有一种通过验证的方式来获得两全其美？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:55:33.520

假设您或多或少从 SEO 的角度来看待这个问题，请记住，主要的搜索引擎目前仅非常有限地使用微数据，而您正在谈论的模式（公司和鞋店）不是，据我所知，用于任何事情（还）。所以，在某种程度上，我认为整个事情目前在很大程度上是假设的。

但是，我认为重要的是要记住，您可以根据页面功能使用非常不同的微数据。您正在询问主页，对于主页，仅添加足够的微数据来描述相关实体的名称和类别可能是完全有效的。详细的产品数据会出现在产品页面上，更详细的组织数据会出现在 about 或 contact 页面等。换句话说，使用最能封装页面主要用途的架构。

顺便说一句，他们最近在 Schema.org 中添加了[GoodRelations 词汇](http://www.heppnetz.de/ontologies/goodrelations/v1.html#classes)，因此描述产品和其他与业务相关的数据的范围大大增加了。

# c++ - 为什么我的向量不能访问嵌套结构中的变量？

> ID：13656518
> 
> 赞同：1
> 
> 时间：2012-12-01T05:01:03.077
> 
> 标签：c++, variables, vector, struct, linked-list

```
#include<iostream>
#include<vector>
#include<string>
#include<list>
using namespace std;

struct record{
    int id;
    string fName;   
};
struct cells{
    list<record> rec[100];
};
vector<cells> hp(100);

int main()
{
    hp[0].rec[0].front().fName = "jon"; // problem occurs here
    return 0;
} 
```

我有2个结构。第一个结构 struct`record`由 2 个常规变量组成。在 struct 2 中，我有一个 type 的链表`record`，其中包括 struct 1 中列出的所有变量。为什么当我尝试使用我的向量访问 structs 中的变量时，会出现错误：

```
"linked list iterator not dereferencable?" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:11:55.160

如果我做对了，

改变

```
vector<cells> hp(100); 
```

至

```
vector<cells> hp(100, cells{{list<record>(1, record())}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:12:00.140

这就是你需要的

```
struct cells
{
    list<record> rec;

    cells():rec(100) {}
};

vector<cells> hp(100);

int main()
{
    hp.front().rec.front().fName = "jon";
    return 0;
} 
```

在您的代码中，如果您有一个 100`list`的数组，那么您实际上有 100 个列表，每个列表都未初始化。你不需要 100`list`秒。你需要 1`list`和 100 `records`。我已经在上面展示了如何做到这一点。

这可以编译并且也可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T05:12:22.767

单元格是一个包含 100 个列表的数组......并且每个列表都未初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T05:04:04.553

发生错误是因为您的所有列表都是*空*的。调用`front()`空容器是违法的。

# python - Python 。如何摆脱字符串中的'\ r'？

> ID：13656519
> 
> 赞同：4
> 
> 时间：2012-12-01T05:01:17.263
> 
> 标签：python, string, list, replace

我有一个 excel 文件，我将其转换为带有数字列表的文本文件。

```
test = 'filelocation.txt'

in_file = open(test,'r')

for line in in_file:
    print line

1.026106236
1.660274766
2.686381002
4.346655769
7.033036771
1.137969254

a = []

for line in in_file:
    a.append(line)
print a

'1.026106236\r1.660274766\r2.686381002\r4.346655769\r7.033036771\r1.137969254' 
```

我想将每个值（在每一行中）分配给列表中的单个元素。相反，它正在创建一个由 \r 分隔的元素。我不确定 \r 是什么，但为什么要将它们放入代码中？

我想我知道一种从字符串中删除 \r 的方法，但我想从源头解决问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T05:25:21.927

要接受任何`\r`, `\n`,`\r\n`作为换行符，您可以使用`'U'`（通用换行符）文件模式：

```
>>> open('test_newlines.txt', 'rb').read()
'a\rb\nc\r\nd'
>>> list(open('test_newlines.txt'))
['a\rb\n', 'c\r\n', 'd']
>>> list(open('test_newlines.txt', 'U'))
['a\n', 'b\n', 'c\n', 'd']
>>> open('test_newlines.txt').readlines()
['a\rb\n', 'c\r\n', 'd']
>>> open('test_newlines.txt', 'U').readlines()
['a\n', 'b\n', 'c\n', 'd']
>>> open('test_newlines.txt').read().split()
['a', 'b', 'c', 'd'] 
```

如果要从文件中获取数字（浮点）数组；请参阅将[文件字符串读入数组（以pythonic方式）](https://stackoverflow.com/a/11052673/4279)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T05:03:53.210

使用`rstrip()`or`rstrip('\r')`如果你确定最后一个字符总是`\r`.

```
for line in in_file:
    print line.rstrip() 
```

帮助`str.rstrip()`：

```
S.rstrip([chars]) -> string or unicode

Return a copy of the string S with trailing whitespace removed.
If chars is given and not None, remove characters in chars instead.
If chars is unicode, S will be converted to unicode before stripping 
```

`str.strip()`删除尾随和前导空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T05:03:35.610

您可以使用 strip() 从行中删除回车符和换行符

```
line.strip() 
```

IE

```
for line in in_file:
    a.append(line.strip())
print a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T05:04:48.203

要解决此问题，请执行以下操作：

```
for line in in_file:
    a.append(line.strip()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T05:05:18.067

`.strip()`删除不需要的空格的行：

```
lines = []

with open('filelocation.txt', 'r') as handle:
    for line in handle:
        line = line.strip()
        lines.append(line)

        print line

print lines 
```

另外，我建议您使用`with ...`符号打开文件。它更干净并自动关闭文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-29T15:49:21.113

首先，我通常喜欢@JF Sebastian 的回答，但我的用例更接近[Python 2.7.1：How to Open, Edit and Close a CSV file](https://stackoverflow.com/questions/14471049/python-2-7-1-how-to-open-edit-and-close-a-csv-file)，因为我的字符串来自*文本*文件，是从 Excel 作为 csv 输出的，并且是此外使用 csv 模块进行输入。如该问题所示：

> 至于'rU' vs 'rb' vs ...，csv文件真的应该是二进制的，所以使用'rb'。但是，从将 csv 文件复制到 Windows 上的记事本中的人那里获得 csv 文件并随后与其他一些文件合并，这样您就有了时髦的行尾，这并不少见。您如何处理取决于您的文件和您的偏好。– @kalhartt 1 月 23 日 3:57

我将坚持按照[python 文档中的](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCsQFjAA&url=http%3A%2F%2Fdocs.python.org%2Flibrary%2Fcsv.html&ei=Orq9Uo_QCYXboAThkYHoCA&usg=AFQjCNH1TvboyrkQiNKru1Z1o0-RkeoVRw&bvm=bv.58187178,d.cGU&cad=rja)建议阅读“rb” 。现在，我知道单元格中的 \r 是我使用 Excel 的怪癖的结果，所以我将创建一个全局选项来替换 '\r' 用其他东西，现在将是 ' \n'，但稍后可能是 '' （一个空字符串，不是双引号），只需简单的 json 更改。

# oracle - 为自动增量 ID 和默认 unix 日期时间创建触发器

> ID：13656520
> 
> 赞同：0
> 
> 时间：2012-12-01T05:01:39.650
> 
> 标签：oracle, triggers, oracle10g, oracle11g, oracle9i

任何人都可以帮助我为自动递增 fld_id 和 Unix 日期时间创建触发器。我的表字段是 fld_id(int),fld_date(number),fld_value(varchar2)。

我的插入查询是

```
insert into table (fld_value)values('xxx');
insert into table (fld_value)values('yyy'); 
```

我需要这样的表格记录

```
fld_id    fld_date     fld_value
1         1354357476    xxx
2         1354357478    yyy 
```

请帮我创建这个。我不能这样做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:06:07.013

如果你想`fld_id`成为一个序列值，你需要创建一个序列和一个触发器

```
CREATE SEQUENCE sequence_name
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

CREATE OR REPLACE TRIGGER trigger_name
  BEFORE INSERT ON table_name
  FOR EACH ROW
BEGIN
  SELECT sequence_name.nextval
    INTO :new.fld_id
    FROM dual;
  :new.fld_date := (SYSDATE - date '1970-01-01') * 60 * 60 * 24;
END; 
```

# ruby-on-rails - 从两个 id 创建 rails 记录

> ID：13656521
> 
> 赞同：3
> 
> 时间：2012-12-01T05:02:22.903
> 
> 标签：ruby-on-rails, activerecord

我正在尝试构建的功能允许用户访问餐厅。

我有用户、位置和餐厅模型。地点有很多餐厅。

我创建了一个带有 user_id 和 restaurant_id 属性的 Visits 模型，以及一个带有 create 和 destroy 方法的 visits_controller。

问题是，我**无法创建实际的访问记录**。关于我如何做到这一点的任何想法？还是我走错了路。

# 路由错误

```
No route matches {:controller=>"restaurants", :location_id=>nil} 
```

# 代码：

路线：

```
location_restaurant_visits POST   /locations/:location_id/restaurants/:restaurant_id/visits(.:format)     visits#create
 location_restaurant_visit DELETE /locations/:location_id/restaurants/:restaurant_id/visits/:id(.:format) visits#destroy 
```

模型：

```
class Visit < ActiveRecord::Base
  attr_accessible :restaurant_id, :user_id
  belongs_to :user 
  belongs_to :restaurant
end 
```

看法：

```
 <% @restaurants.each do |restaurant| %>
    <%= link_to 'Visit', location_restaurant_visits_path(current_user.id, restaurant.id), method: :create %>
    <% @visit = Visit.find_by_user_id_and_restaurant_id(current_user.id, restaurant.id) %>
    <%= @visit != nil ? "true" : "false" %>
  <% end %> 
```

控制器：

```
class VisitsController < ApplicationController
  before_filter :find_restaurant
  before_filter :find_user

  def create

    @visit = Visit.create(params[:user_id => @user.id, :restaurant_id => @restaurant.id])

    respond_to do |format|
      if @visit.save
        format.html { redirect_to location_restaurants_path(@location), notice: 'Visit created.' }
        format.json { render json: @visit, status: :created, location: @visit }
      else
        format.html { render action: "new" }
        format.json { render json: @visit.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @visit = Visit.find(params[:user_id => @user.id, :restaurant_id => @restaurant.id])
    @restaurant.destroy

    respond_to do |format|
      format.html { redirect_to location_restaurants_path(@restaurant.location_id), notice: 'Unvisited.' }
      format.json { head :no_content }
    end
  end

  private

  def find_restaurant
    @restaurant = Restaurant.find(params[:restaurant_id])
  end

  def find_user
    @user = current_user
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:14:00.473

我在这里看到了很多问题。第一个是您的操作中的这行代码`VisitController`（`create`以及您的操作中的相同行`destroy`）：

```
@visit = Visit.create(params[:user_id => @user.id, :restaurant_id => @restaurant.id]) 
```

`params`是一个[hash](http://www.ruby-doc.org/core-1.9.3/Hash.html)，所以你应该给它一个键（如果有的话），而不是一堆`key => value`绑定。你的意思可能是：

```
@visit = Visit.create(:user_id => @user.id, :restaurant_id => @restaurant.id) 
```

注意你初始化`@user`和`@restaurant`in before filter方法，所以这里不需要访问`params`。

不过，这行代码仍然有点奇怪，因为您正在创建一条记录，然后在几行之后保存它（`if @visit.save`）。这是多余`Visit.create`的：启动并保存记录，所以之后保存几乎没有意义。您可能想要做的是首先启动一个新`Visit`的`Visit.new`，然后保存：

```
def create

  @visit = Visit.new(:user_id => @user.id, :restaurant_id => @restaurant.id)

  respond_to do |format|
    if @visit.save
    ... 
```

我注意到的下一件事是您没有`@location`在您的`create`操作中启动 a，但是您在此处引用它：

```
format.html { redirect_to location_restaurants_path(@location), notice: 'Visit created.' } 
```

由于您将需要每条餐厅路线的位置（因为`restaurant`是嵌套资源），您不妨创建一个方法并`before_filter`为它创建一个方法，就像您使用`find_restaurant`：

```
before_filter :find_location

...

def find_location
  @location = Location.find(params[:location_id])
end 
```

下一个问题是，在您看来，您`location_restaurant_path`通过了`id`of`current_user`和 of `restaurant`。这里有两个问题。首先，第一个参数应该是位置，而不是用户（匹配 中的顺序`location_restaurant_path`）。下一个问题是，对于`_path`方法，您必须传递实际对象，而不是对象的 id。最后，你有`method: :create`，但`method`这里指的是 HTTP 方法，所以你想要的是`method: :post`：

```
link_to 'Visit', location_restaurant_visits_path(@location, restaurant.id), method: :post 
```

您必须添加一个`find_location`前置过滤器才能`RestaurantController`在`@location`此处的视图中使用。

可能还有其他问题，但这些都是开始的一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:38:51.877

`location_id`是`nil`并且路径定义没有说`(/:location_id)`强制在那里使用非零值以路由到该路径；`location_id`如果您可以从孩子的属性中派生它，则创建一条新路线（即 a`restaurant_id`指的是`Restaurant`已经知道自己的a `location_id`）。

# javascript - 从 javascript 到 Objective-C 的通信

> ID：13656526
> 
> 赞同：1
> 
> 时间：2012-12-01T05:03:24.880
> 
> 标签：javascript, objective-c, ios, xcode, ios5

我正在从 UIWebView 内的服务器加载 HTML 文件文件。在 HTML 文件中，我们有要打开的外部链接，并编写了一个 Javascript 函数来处理该事件。我想在应用程序内的一个单独的新 web 视图中打开该超链接。

有没有什么方法可以让服务器端 javascript 方法通知到 Objective-C 或任何将在 Objective-C 中调用的回调函数，然后我可以在我的代码中做一些事情？我已经看到了 WEBViewJavaScriptBridge 在 javascript 和目标 C 之间进行通信的示例。但是他们正在使用本地 HTML 文件来加载和通信。Bt 我的 HTML 文件在服务器端。如果有人能在这方面提供帮助，那就太好了。

我在这里放了一个示例 HTML 文件。在点击打开按钮时，我们有两个超链接“打开”和“关闭”，调用了一个显示警报的函数。所以我想将retuen回调传递给objective-C代码，而不是警报。

这里是：-

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale = 1.0, minimum-scale = 1.0, user-scalable=no"/>
<meta name="HandheldFriendly" content="True"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<title>Test HTML</title>
<script type="text/javascript">

function open(url, offset){
alert("Open Webview with url:"+ url + " & Offset: " + offset);
}

function close(url, offset){
alert("close webview");
}

</script>
</head>
<body>
<a href="javascript:open('http://www.tcm.com', '55')">Open</a><br>
<a href="javascript:close()">Close</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:43:09.040

您可以使用以下 webView delagate 方法从目标 c 与您的 HTML 进行通信...

```
- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

请通过这些方法的使用...我希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:02:57.510

我使用 webviewjavascriptbridge 来交流 javascript 和目标 C 代码。

在此示例代码中，请注意 bridge 的全局变量。

```
<!doctype html>
<html><head>
<style type='text/css'>
    html { font-family:Helvetica; color:#222; }
    h1 { color:steelblue; font-size:24px; margin-top:24px; }
    button { margin:0 3px 10px; font-size:12px; }
    .logLine { border-bottom:1px solid #ccc; padding:4px 2px; font-family:courier; font-size:11px; }
</style>
</head><body>
<h1>WebViewJavascriptBridge Demo</h1>
<script>
window.onerror = function(err) {
    alert('window.onerror: ' + err)
}
var bridge;
document.addEventListener('WebViewJavascriptBridgeReady', onBridgeReady, false)
function onBridgeReady(event){
    alert("Onbridge ready call");

    bridge = event.bridge
    var uniqueId = 1
    function log(message, data) {
        var log = document.getElementById('log')
        var el = document.createElement('div')
        el.className = 'logLine'
        el.innerHTML = uniqueId++ + '. ' + message + (data ? ': ' + JSON.stringify(data) : '')
        if (log.children.length) { log.insertBefore(el, log.children[0]) }
        else { log.appendChild(el) }
    }
    bridge.init(function(message) {
        log('JS got a message', message)
    })

    bridge.registerHandler('open', function(data, response) {
                           log('JS handler testJavascriptHandler was called', data)
                           response.respondWith({ 'Javascript Says':'open open open!' })
                           })

    bridge.registerHandler('testJavascriptHandler', function(data, response) {
        log('JS handler testJavascriptHandler was called', data)
        response.respondWith({ 'Javascript Says':'Right back atcha!' })
    })

    var button = document.getElementById('buttons').appendChild(document.createElement('button'))
    button.innerHTML = 'Send message to ObjC'
    button.ontouchstart = function(e) {
        e.preventDefault()
        bridge.send('Hello from JS button')
    }

    document.body.appendChild(document.createElement('br'))

    var callbackButton = document.getElementById('buttons').appendChild(document.createElement('button'))
    callbackButton.innerHTML = 'Fire testObjcCallback'
    callbackButton.ontouchstart = function(e) {
        e.preventDefault()
        log("Calling handler testObjcCallback")
        bridge.callHandler('testObjcCallback', {'foo': 'bar'}, function(response) {
            log('Got response from testObjcCallback', response)
        })
    }

}

function open(url, offset,e)
{
    alert(bridge);

    //alert("Open Webview with url:Yes Got it");

   //  alert(document.getElementById(offset).href);
    //  var bridge = event.bridge;
   // alert(bridge);

    window.location = url+'?offset='+offset//'myapp:myaction:url:offset'

    //requestFromObjc("buttonColor&someParam=1");
}

function close()
{
        alert("Open Webview with url:"+ url + " & Offset: " + offset);
}

function requestFromObjc(functionName, objcResult, callback)
{
    if (!objcResult)
    {
        window.location = 'myapp:myaction:param1:param2'
       // window.location = "myapp://objcRequest?function=" + functionName + "&callback=" + arguments.callee.name + "&callbackFunc=" + arguments.callee.caller.name;
    }
    else
    {
        window[callback](objcResult);
    }
}

</script>
<div id='buttons'></div> <div id='log'></div>

<body>
    <a id="55" href="javascript:open('http://www.tcm.com', '55',this)">Open</a><br>
    <a href="javascript:close()">Close</a>
</body>

</body></html> 
```

参考：[https ://github.com/marcuswestin/WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)

# javascript - AngularJS 不会在使用 document.write() 插入的 HTML 中执行

> ID：13656533
> 
> 赞同：3
> 
> 时间：2012-12-01T05:04:12.473
> 
> 标签：javascript, angularjs

我想插入来自 JS 函数的 HTML，该函数在加载正文时执行。最初身体是空的。

这个 HTML 有 AngularJS 命令，但问题是 AngularJS 不解析 HTML。

```
<!doctype html>
<html ng-app>
    <head>
        <script>
            function loadHTML(){
                html = '<ul ng-controller="phoneCtrl"><li ng-repeat="phone in phones">{{phone.name}}<p>{{phone.snippet}}</p></li></ul><script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script'+'><script src="controllers.js"></script'+'>';
                document.write = html;
            }
        </script>
    </head>
    <body onload="loadHTML();" ></body>
</html> 
```

controller.js 的内容是：

```
function phoneCtrl($scope) {
    $scope.phones = [
    {
        "name": "Nexus S",
        "snippet": "Fast just got faster with Nexus S."
    },

    {
        "name": "Motorola XOOM™ with Wi-Fi",
        "snippet": "The Next, Next Generation tablet."
    },

    {
        "name": "MOTOROLA XOOM™",
        "snippet": "The Next, Next Generation tablet."
    }
    ];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:38:49.203

onload 代码在 AngularJS 实际解析 DOM 之后执行。因此，要将它们捕获到 Angular 中，您必须使用 $compile。查看有关 $compile 如何工作的文档。

# php - 如何使用开关盒？

> ID：13656539
> 
> 赞同：1
> 
> 时间：2012-12-01T05:04:58.920
> 
> 标签：php

我如何在 switch 案例的代码中使用以下代码：

```
if($_GET['test']=='') {  $test='demo';} else {  $test=$_GET['test'];}
if($_GET['test1']=='') {  $test1='demo';} else {  $test1=$_GET['test1'];}
if($_GET['test2']=='') { $test2='demo';} else { $test2=$_GET['test2'];}
if($_GET['test3']=='') { $test3='demo';} else { $test3=$_GET['test3'];}
if($_GET['test4']=='') { $test4='demo';} else  { $test4=$_GET['test4'];}
if($_GET['test5']=='') {  $test5='demo';} else {  $test5=$_GET['test5'];} 
```

提前感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T05:08:50.130

为什么在`switch`这里使用a？您可以只使用一个简单`foreach`的变量并使用[变量 variables 创建变量](http://www.php.net/manual/en/language.variables.variable.php)：

```
foreach (array('test', 'test1', 'test2', 'test3', 'test4', 'test5') as $var) {
    $$var = isset($_GET[$var]) ? $_GET[$var] : '';
} 
```

或者，查看[`filter`](http://www.php.net/filter_input_array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:11:01.603

你总是可以使用三元运算符（[http://www.tuxradar.com/practicalphp/3/12/4](http://www.tuxradar.com/practicalphp/3/12/4)）

```
$test = $_GET['test'] == '' ? 'demo' : $_GET['test'] ;
$test1 = $_GET['test1'] == '' ? 'demo' : $_GET['test1'] ;
.. etc .. 
```

尽管可以通过循环更容易地完成重复变量的迭代。

# c++ - 当 C++11 应用程序使用非 C++11 库时，返回值损坏

> ID：13656545
> 
> 赞同：1
> 
> 时间：2012-12-01T05:06:07.063
> 
> 标签：c++, macos, c++11, shared-libraries, clang

我有一个在没有 C++11 标志 (-std=c++11) 的情况下编译的库和一个链接到使用 -std=c++11 构建的库的应用程序。它调用库中的一个函数，然后程序在库中崩溃得更深。我发现发生崩溃的函数（它只是一个返回类中的指针的简单函数）的反汇编在调用堆栈源自该程序时与库的测试程序不同，后者也是'不是用 C++11 标志构建的。

操作系统是 OS X Mountain Lion，编译器是 Clang++。

为什么 C++11 应用程序和非 C++11 库之间没有能力，以及当不同的生成代码在库中时何时生成反汇编，因此应该是相同的？

两种不同的反汇编：

```
TestApplication`Core::GetPointer() const at System.h:xxx:
0x100009690:  pushq  %rbp
0x100009691:  movq   %rsp, %rbp
0x100009694:  movq   %rdi, -8(%rbp)
0x100009698:  movq   -8(%rbp), %rdi
0x10000969c:  movq   64(%rdi), %rax  ;<-------Difference
0x1000096a0:  popq   %rbp
0x1000096a1:  ret    

Lib1Prototype`Core::GetPointer() const at System.h:xxx:
0x100019c10:  pushq  %rbp
0x100019c11:  movq   %rsp, %rbp
0x100019c14:  movq   %rdi, -8(%rbp)
0x100019c18:  movq   -8(%rbp), %rdi
0x100019c1c:  movq   40(%rdi), %rax  ;<------Difference
0x100019c20:  popq   %rbp
0x100019c21:  ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:30:51.703

在 OS X 使用的 x86-64 ABI 中，传入函数的第一个参数，传入`%rdi`函数的返回值`%rax`。* 所以这个函数接受一个指向某个数据结构的指针，并返回包含的 64 位值从偏移量 64 或 40 开始，具体取决于函数的编译方式。

因此，您需要查看定义该数据结构的头文件。它根据您是否编译为 C++11 来定义不同的数据结构。也许有一些明显的东西，比如`#ifdef`你知道的定义不同。或者也许有一个成员的类型定义不同。如果您无法弄清楚，请编辑您的问题并粘贴（通过指针）传递给`Core::GetPointer`函数的数据结构的定义。

# javascript - 使用 append() 动态添加 div

> ID：13656546
> 
> 赞同：1
> 
> 时间：2012-12-01T05:06:20.833
> 
> 标签：javascript, jquery, html, css

请通知我我是否解释得很好。我`.append()`用来在页面内重复一个 div。

HTML

```
 <html>
 <head>
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
 <script>
  $(document).ready(function(){
    $("#num").click(function () {
      $('#form').append("<div class='Box'>I'm new box by prepend</div>");   
    });
  });
  </script>
  </head>

  <body>
    <div id="form">
       Hai Add Another by clicking the button
    </div>
    <button id="num">Click Me</button>
  /body>
 </html> 
```

当我重复添加一个 div 时，这很有效。但我喜欢像下面的代码一样在外部调用它。

```
 <html>
  <head>
   <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
   <script>
    $(document).ready(function(){
      $("#num").click(function () {
        $('#form').append($('#Box'));   
      });
    });
  </script>
  </head>

  <body>
  <div id="form">
  Hai Add Another by clicking the button
  </div>
  <div class='Box'>I'm new box by prepend</div>
  <button id="num">Click Me</button>
 /body>
 </html> 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:10:22.680

尝试使用`clone()`：

```
 <html>
 <head>
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
 <script>
  $(document).ready(function(){
  $("#num").click(function () {
  $(".Box:first").clone().appendTo("#form"); 
});
});
  </script>
  </head>

  <body>
  <div id="form">
  Hai Add Another by clicking the button
  </div>
  <div class='Box'>I'm new box by prepend</div>
  <button id="num">Click Me</button>
 </body>
 </html>​ 
```

您必须在添加之前创建一个新元素。

[演示](http://jsfiddle.net/g3GLd/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T05:16:11.750

试试这个

```
 $(document).ready(function(){
    $("#num").click(function () {
       $(".Box").first().clone().appendTo("#form"); 
    });
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T05:09:37.713

尝试这样的事情： -

```
 $("#parent_div").append('<div id="created_div"></div>'); 
```

# php - 从行错误中选择数据

> ID：13656548
> 
> 赞同：1
> 
> 时间：2012-12-01T05:06:51.240
> 
> 标签：php

我有一些代码可以从一行中选择数据。它正在工作并正确打印结果，但我有一个我无法弄清楚的错误。

```
$rs=array();    
$select=array ("system_name", "location", "alarmtype", "severity", "start_time",     "end_time", "duration", "reason","shift_oparation", "system_oparation");

for ($i=0;$i<=9;$i++){
    $SQL = "SELECT (".$select[$i].") FROM (".$is.")  WHERE duration=('".$ic."') AND location=('".$id."')";
    $result = mysql_query($SQL);
    $db_field = mysql_fetch_array($result);
    $rs[$i]=$db_field[$select[$i]];
    echo $rs[$i];
} 
```

Echo 打印正确，但是有错误：

`Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:14:49.890

我认为您的一些查询不会返回任何内容。为了摆脱警告，您应该检查它是否`$result`实际上是一种资源。

试试这个：

```
$rs=array();    
$select=array ("system_name", "location", "alarmtype", "severity", "start_time",     "end_time", "duration", "reason","shift_oparation", "system_oparation");

for ($i=0;$i<=9;$i++){
$SQL = "SELECT (".$select[$i].") FROM (".$is.")  WHERE duration=('".$ic."') AND location=('".$id."')";
$result = mysql_query($SQL);

 if($result){
  $db_field = mysql_fetch_array($result);
  $rs[$i]=$db_field[$select[$i]];
  echo $rs[$i];
 }
} 
```

但是，如果您只使用一个查询，您的代码将更加高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:19:15.777

你正在做一些非常奇怪的事情。它看起来像是`$select`一个表中的列列表，您一次获取一列！

您可以使用以下查询一次全部选择它们：

```
$sql = "SELECT system_name, location, alarmtype, severity, 
start_time, end_time, duration, reason, shift_oparation, system_oparation
FROM " . $is . " WHERE duration = '" . $ic . "' AND location = '" . $id . "'"; 
```

请注意，我已经删除了一些多余的括号。在像这样动态构建 SQL 查询时也要非常小心。我假设您知道、 和的值`$is`，以免受到 SQL 注入攻击，`$ic``$id`

运行结果，然后遍历行数组

```
$result = mysql_query($sql);

if ($result)
{
    $row = mysql_fetch_array($result); //fetches the first result row as an array
                                       // Can be accessed like $row['system_name'] 

    foreach ($row as $key => $value)
        echo $key, " = ", $value;
}
else
    die(mysql_error() . $sql); 
```

如果结果为假，它将执行 die 语句并打印出 MySQL 返回的错误以及我们构建的查询，以便您查看它是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T05:19:43.310

> 警告：mysql_fetch_array() 期望参数 1 是资源，给出的布尔值。

这意味着 mysql 查询 [产生了错误](http://www.php.net/manual/en/function.mysql-query.php)。

> 返回值
> 
> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

使用[mysql_error](http://www.php.net/manual/en/function.mysql-error.php) 显示错误并查看它发生的原因。例如

```
if(!$result){
   echo mysql_error();
  } 
```

**Protip**：不要使用 mysql 库，如 php 手册中所述

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T05:21:08.657

选择语句有问题请检查选择查询，或者您可以运行单个选择查询并检查输出

# backbone.js - Backbone Marionette 使用 Require.js、Regions 以及如何设置

> ID：13656556
> 
> 赞同：2
> 
> 时间：2012-12-01T05:08:06.090
> 
> 标签：backbone.js, marionette, singlepage, regions, single-page-application

我目前正在编写一个 Backbone Marionette 应用程序，该应用程序最终相当于大约 6 个不同的“屏幕”或页面，它们经常共享内容，我不确定如何最好地构建和访问区域。

我正在使用此处描述的应用程序/模块设置：**[StackOverflow 问题 11070408：如何使用主干和 require.js 定义/使用多个路由](https://stackoverflow.com/questions/11070408/how-to-define-use-several-routings-using-backbone-and-requirejs)**。这将是一个应用程序，它将随着时间的推移添加新的功能和内容，并且需要可扩展（并且显然尽可能可重用）

我正在构建的单页应用程序在每个屏幕上都有 4 个主要部分：页眉、主要内容、次要内容、页脚。

所有页面的页脚将保持一致，其中 3 个页面的页眉将相同，并在其余 3 个页面上稍作修改（使用大约 80% 的相同元素/内容）。“更多内容”区域将可在各个页面中重复使用。

在我的 app.js 文件中，我正在定义我的区域，如下所示：

```
define(['views/LandingScreen', 'views/Header', 'router'], function(LandingScreen, Header, Router) {
    "use strict";
    var App = new Backbone.Marionette.Application();

    App.addRegions({
        header: '#mainHeader',
        maincontent: '#mainContent',
        morecontent: '#moreContent',
        footer: '#mainFooter'
    });

    App.addInitializer(function (options) {

    });

    App.on("initialize:after", function () {
        if (!Backbone.History.started) Backbone.history.start();
    });

    return App;
}); 
```

现在，回到前面提到的帖子中的应用程序设置，处理区域的最佳方式是什么。我会在每个子应用程序中独立地重新声明每个区域吗？这似乎是保持模块尽可能独立的最佳方式。如果我走那条路，在子应用程序之间打开/关闭或隐藏/显示这些区域的最佳方式是什么？

或者，我是否保留 app.js 中声明的区域？如果是这样，那么我将如何最好地从子应用程序中更改和协调这些区域的事件？在 app.js 文件中定义区域似乎与将模块和核心应用程序相互了解的内容保持在最低限度有悖常理。另外，我看到的每个示例在主应用程序文件中都有 appRegions 方法。那么从子应用访问和更改这些区域的最佳实践是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T22:19:52.193

我实际上有一个负责启动子应用程序的根应用程序，它通过它们应该显示的区域。我还使用了一个基于它的自定义组件，`Backbone.SubRoute`它为子应用程序启用了相对路由。

看看这个要点：[https ://gist.github.com/4185418](https://gist.github.com/4185418)

您可以轻松地调整它以发送定义多个区域的 addRegions 的“配置”对象，而不是`region`我发送给子应用程序`start`方法的值

请记住，每当您调用`someRegion.show(view)`Marionette 时，它​​将首先关闭当前显示在其中的任何视图。如果您有两个不同的区域，每个区域都在其自己的应用程序中定义，但它们都绑定到同一个 DOM 元素，那么唯一重要的是`show`最近调用了哪个区域。但是，这很麻烦，因为您没有获得关闭前一个视图的优势 - 例如，取消绑定事件绑定器。

这就是为什么，如果我有一个子应用程序从某种根应用程序“继承”一个区域，我通常只是将实际区域实例从该根应用程序传递给子应用程序，并将对该区域的引用保存为子应用的属性。这样我仍然可以调用`subApp.regionName.show(view)`它并且它工作得很好 - 如果您试图将事件从您的区域冒泡到您的应用程序（因为该区域将属于根应用程序，而不是子应用程序）。我几乎总是使用单独的实例`Marionette.EventAggregator`来管理事件，而不是依赖区域/视图/控制器/等的内置功能来解决这个问题。

也就是说，您可以获得两全其美 - 您可以将区域实例传递到您的子应用程序中，保存对它的引用以便您可以调用“关闭”，然后使用它的`regionInstance.el`属性来定义您自己的区域实例指向相同的元素。

```
for(var reg in regions) if regions.hasOwnProperty(reg) {
    var regionManager = Marionette.Region.buildRegion(regions[reg].el,
            Marionette.Region);
    thisApp[reg] = regionManager;
} 
```

这一切都取决于你的优先事项是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T01:17:19.527

我个人更喜欢在我的 Marionette 应用程序中使用这些模块。我觉得它消除了 require.js 添加到您的应用程序的复杂性。在我目前正在开发的一个应用程序中，我创建了一个 app.js 文件来定义我的主干应用程序，但我正在使用一个控制器模块来加载我的路由、填充我的集合并填充我的区域。

app.js ->

```
var app = new Backbone.Marionette.Application();
app.addRegions({
   region1: "#region1",
   region2: "#region2",
   region3: "#region3",
   region4: "#region4"
}); 
```

app.mainapp.js ->

```
app.module('MainApp', function(MainApp, App, Backbone, Marionette, $, _) {
   // AppObjects is an object that holds a collection for each region, 
   // this makes it accessible to other parts of the application
   // by calling app.MainApp.AppObjects.CollectionName.... 
   MainApp.AppObjects = new App.AppObjects.Core();

   MainApp.Controller = new Backbone.Marionette.Controller.extend({
     start: function() {
       // place some code here you want to run when the controller starts
     } //, you can place other methods inside your controller
   });

   // This code is ran by Marionette when the modules are loaded
   MainApp.addInitializer(function() {
     var controller = new MainApp.Controller();
     controller.start();
   });
}); 
```

然后，您将把您的路线放在另一个模块中，该模块将在控制器中访问。

然后在网页中，您将通过调用开始一切。

```
$(function () {
    app.start();
}); 
```

Marionette 将自动运行并加载您的所有模块。

我希望这能让你朝着某个方向开始。抱歉，我无法复制并粘贴整个应用程序代码，以便为您提供更好的示例。这个项目完成后，我将重新创建一个可以推送到网络的演示应用程序。

# html - 为什么div不会浮动在图像旁边？（改为在图像后面）

> ID：13656557
> 
> 赞同：0
> 
> 时间：2012-12-01T05:08:07.073
> 
> 标签：html, css

我试图有一个图像，然后在图像的右侧我想要一个 div 框。我一直在试图寻找这个原因，但我找不到它。我假设由于某种原因 div 不能浮动在图像旁边，因为我已经成功地用文本完成了它。

[http://jsfiddle.net/n8ZDQ/1/](http://jsfiddle.net/n8ZDQ/1/) （可以看到红色的div框其实大部分在图片后面，只有一部分从右侧弹出）

HTML：

```
<img src="http://stignatiusyardley.org/pictures/NFP/NFP%20family%20image.jpg" style="float:left;width:370px;height:246px;" /> 
```

​</p>

CSS：

```
#optin {
width:466px;
border:1px solid #CCCCCC;
height:166px;
background-color:red; 
```

}​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:11:36.463

div 本身不浮动！尝试添加`float: left`到`#optin`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T05:13:53.913

默认情况下，DIV 是一个`block`级别元素。只有`inline`or`inline-block`元素会以您想要的方式显示。要获得所需的效果，您需要制作 DIV`display: inline-block`或`float: left`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T05:13:54.023

将#optin的css调整为浮动

```
#optin {
    width:466px;
    border:1px solid #CCCCCC;
    height:166px;
    background-color:red;
    float: left;
}​ 
```

# java - 加入 MP3 文件 - 将 Java 代码转换为 Android

> ID：13656559
> 
> 赞同：3
> 
> 时间：2012-12-01T05:08:21.910
> 
> 标签：java, android, mp3

我正在尝试制作一个可以加入 2 个 MP3 文件并将它们保存在 android SD 卡上的程序。我有可以运行的 Java 代码，但是当我尝试将其转换为 Android 时，它会出现一些错误。

下面用 Java 编写代码。它工作完美。

```
import java.io.*;
public class TuneDoorJava {

    public static void main(String[] args) throws FileNotFoundException, IOException {
        FileInputStream fistream1 = new FileInputStream("F:\\aa.mp3");  // first source file
        FileInputStream fistream2 = new FileInputStream("F:\\bb.mp3");//second source file
        SequenceInputStream sistream = new SequenceInputStream(fistream1, fistream2);
        FileOutputStream fostream = new FileOutputStream("F:\\final.mp3");//destinationfile

        int temp;

        while( ( temp = sistream.read() ) != -1)
        {
            // System.out.print( (char) temp ); // to print at DOS prompt
            fostream.write(temp);   // to write to file
        }
        fostream.close();
        sistream.close();
        fistream1.close();
        fistream2.close();
    }
    } 
```

在Android中，我想做的是：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

      //  FileOutputStream fostream=null;
        FileInputStream fist=(FileInputStream)getResources().openRawResource(R.raw.t);
        FileInputStream fist2=(FileInputStream)getResources().openRawResource(R.raw.v);

        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File (sdCard.getAbsolutePath() + "/dir1");
        dir.mkdirs();
        File file = new File(dir, "filename");

       //FileInputStream fistream1 = new FileInputStream();  // first source file
        //FileInputStream fistream2 = new FileInputStream("F:\\bb.mp3");//second source file
        SequenceInputStream sistream = new SequenceInputStream(fist, fist2);

        FileOutputStream fostream = new FileOutputStream(file);

        int temp;
        while( ( temp = sistream.read() ) != -1)
        {
            // System.out.print( (char) temp ); // to print at DOS prompt
            fostream.write(temp);   // to write to file
        }
        fostream.close();
        sistream.close();
        fistream1.close();
        fistream2.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:18:17.900

**-**授予此权限`WRITE_EXTERNAL_STORAGE`

**这是我项目中的工作代码：**

```
public class ConcateSongActivity extends Activity {
    Button mbutt;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mbutt = (Button)findViewById(R.id.button_Click_Karo);
        mbutt.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                try {
                    FileInputStream fis1 = new FileInputStream("/sdcard/viv0.wav");
                    FileInputStream fis2 = new FileInputStream("/sdcard/viv1.wav");
                    SequenceInputStream sis = new SequenceInputStream(fis1,fis2);

                    FileOutputStream fos = new FileOutputStream(new File("/sdcard/vis.wav"));

                    int temp;

                    try {
                        while ((temp = sis.read())!= -1){

                            fos.write(temp);

                        }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:12:43.477

您需要通过在您的清单中添加以下行来授予您的应用写入 SD 卡的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# visual-studio-2010 - Visual Studio 2010，如何从包含路径中删除 $(ProjectDir)？

> ID：13656560
> 
> 赞同：0
> 
> 时间：2012-12-01T05:08:36.093
> 
> 标签：visual-studio-2010, visual-c++

我的 VC++ 项目配置为所有源文件都在 $(ProjectDir)\source\ 中（在包含路径中）。令人烦恼的是，似乎 $(ProjectDir) 以某种方式自动放入包含路径中......这并不是什么大不了的事，每次我写一个#include时，我都会得到一个带有很多目录的智能弹出窗口不'甚至没有头文件。有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:55:14.103

`Project properties --> VC++ directories --> Include Directories`您可以手动设置包含路径，而无需使用`$(ProjectDir)`.

# html - 中心和比例输入控件

> ID：13656566
> 
> 赞同：0
> 
> 时间：2012-12-01T05:10:05.473
> 
> 标签：html, css

鉴于[此页面](http://mygolfscore-app.com/)，我怎样才能更好地垂直居中并将 4 个按钮缩放为宽度的 50%（到浏览器的宽度）和高度的 20%（到浏览器的高度），而其他 20%（按钮将占用 80 % 因为它们有 4 个）高度均匀分布在它们之间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:26:54.987

检查这个**小提琴**：http: [//jsfiddle.net/dj2fu/](http://jsfiddle.net/dj2fu/)

你需要做几件事才能让它按照你想要的方式工作。

删除`<br>`s

应用以下 CSS：

```
html, body {
    min-height: 100%;
    position: relative;
    height: 100%;
    padding: 0;
    margin: 0;
}
#divMainMenu {
    margin: auto;
    height: 100%;
    width: 100%;
    display: table;
}
#divMainMenu input[type="button"] {
    display: block;
    width: 50%;
    margin: auto;
    height: 20%;
    margin-bottom: 2.5%;
    padding: 0;
    margin-top: 2.5%;
}​ 
```

# angularjs - AngularJS - 更新多个选择的选定选项

> ID：13656567
> 
> 赞同：1
> 
> 时间：2012-12-01T05:10:19.800
> 
> 标签：angularjs

我想做一个简单的“自动完成”。在输入中输入关键字并选择结果。然后将显示所选项目。我目前正在研究如何更改隐藏`select`和显示选定项目。你可以帮帮我吗？

```
<div ng-controller="MyCtrl">
    <input type="search" ng-model="query">
    <ul ng-repeat="game in games | filter:query" ng-show="query.length >= 2 && (games | filter:query).length">
        <li><a ng-click="selectGame(game.id)">{{ game.name }}</a></li>
    </ul>
    <select multiple name="games" style="display:none;" ng-options="game.id as game.name for game in games"></select>

    <ul class="selected-games">
        <li>{{ game.name }} - {{ game.year }}</li>
    </ul>
</div>

<script type="text/javascript">
function MyCtrl($scope, $http) {
    $http.get('/ajax/all/games/').success(function(data){
        $scope.games = data;
    });

    $scope.selectGame = function() {}; //?
}
//MyCtrl.$inject = ['$scope', '$http'];

// JSON data from URL
var games = [
    {'id': 1, 'name': 'Halo', 'year': '2005'},
    {'id': 2, 'name': 'Final Fantasy', 'year': '2008'},
    {'id': 3, 'name': 'Guitar Heroes', 'year': '2008'},
    {'id': 4, 'name': 'Warcraft', 'year': '2003'},
    {'id': 5, 'name': 'Starcraft II', 'year': '2010'},
    {'id': 6, 'name': 'Fifa 12', 'year': '2012'},
];
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:44:03.247

很难理解您想要的结果是什么，但请在此处查看我的更新：http: [//jsfiddle.net/rS6Hz/1/](http://jsfiddle.net/rS6Hz/1/)。`scope`我向名为 selectedGames 的数组添加了一个新变量，并通过添加到该数组来实现 ng-click。

```
$scope.selectedGames = [];

$scope.selectGame = function(game) {
    $scope.selectedGames.push(game);        
}; 
```

然后，在显示中，您必须添加一个`ng-model`到`select`它以执行任何操作（据我所知）并且`ul`of`selected-games`需要一个`ng-repeater`循环`selectedGames`

```
<select multiple name="games" ng-model="something" ng-options="game.id as game.name for game in selectedGames"></select>

<h1>Selected Games</h1>
<ul class="selected-games">
    <li ng-repeat="game in selectedGames">{{ game.name }} - {{ game.year }}</li>
</ul> 
```

（为了看到它，我删除了`display: none;`。`select`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T16:49:15.673

这是另一种方式，不使用单独的变量：

[http://jsfiddle.net/9Ag9r/](http://jsfiddle.net/9Ag9r/)

基本上：

```
 <ul class="selected-games">
        <li ng-repeat='game in games | filter:{selected:true}'>{{ game.name }} - {{ game.year }}</li>
 </ul> 
```

我相信这是一种比公认的更清洁的解决方案

# binding - Angular：仅当没有控制器时，具有模型绑定的输入才会作用于按键

> ID：13656572
> 
> 赞同：0
> 
> 时间：2012-12-01T05:10:27.297
> 
> 标签：binding, angularjs, keypress

这里有角度的新手，想法表示赞赏......

假设我想要一个输入字段来控制您键入时的窗口标题。具有模型绑定且没有关联控制器的字段按预期作用于按键。然而，它必须有更多的逻辑——任何用户输入之前的默认值，如果输入为空白，也使用它。

添加绑定到封闭元素的控制器为该逻辑提供了一个位置，但是按键更改行为消失了。我确信可以手动或使用 ui 重新创建它，但由于它本身就没有控制器，我想知道我是否错过了简单的干净方式。

简单版本，作用于按键，但没有智能：

```
<title ng-bind-template="{{windowTitle}}">Default Title (not seen)</title>
<input ng-model="windowTitle" type="text"> 
```

将控制器绑定放在头部（用于标题）和包含 div（用于输入），并在控制器函数内设置默认 $scope.windowTitle 确实使用该默认值，但它会破坏自动更新。

我知道在现实生活中你会想要一个真实的模型，但我真正想了解的是 Angular 的这两种工作方式。我还没有找到任何具体描述两种不同的隐式输入绑定行为的东西，但我还没有阅读所有文档。

我应该如何思考这个问题？

* * *

**编辑：**这不是我感兴趣的窗口标题或默认值本身。我试图理解这一点：

*   当字段或标题上没有控制器时，在字段中键入会立即更改窗口标题，在按键时。标题直接链接到字段值，没有其他角度连接。
*   使用围绕标题和字段的控制器绑定，在字段中键入对标题没有影响。

从那以后我意识到（我认为）是 ng-controller 绑定每次都会创建一个新的控制器实例。这是我之前没有显示的非工作代码：

```
<title ng-controller="TitleCtrl" ng-bind-template="{{windowTitle || 'Foo'}}">Foo</title>
...
<label ng-controller="TitleCtrl">
    <input ng-model="windowTitle" type="text">
    {{windowTitle}}
</label> 
```

模型绑定到该字段设置的值在该控制器的该实例中正确显示，并像以前一样在按键时更新。但是由于这两个控制器实例是分开的，所以绑定到标题有效，但它指向的数据没有绑定到字段。

不是吗？它在没有控制器的情况下工作的原因是这使得值全局，所以标题绑定看到由字段绑定设置的值。

那么从其他领域引用数据的规范方法是什么？创建服务？

我意识到这是基本的 Angular 东西，只是从这里开始，所以谢谢！

* * *

**编辑 2** 经过反思，我开始严重不尊重这整个问题，即使我写了它。

它是基于对 Angular 应用程序模型的太早理解不足。我只完成了官方教程的一部分，然后开始从一个不大但并非完全不重要的现有应用程序中删除所有 js，并探索 Angular 在这种情况下可以做什么。

我很快就物有所值，用很少的代码就可以使用几个功能，而且标记简单、清晰，感觉很好。但是我确实在内部化 Angular 思维方式方面出现了短路，当页面的不同部分需要相互协调时，我快速而肮脏的无架构方法就崩溃了，就像在这个问题中一样。

当我回到教程和其他学习时，我已经推迟了那个项目。如果其他人认为这个问题应该被删除，我会添加我的投票。或者也许它在某种程度上是有用的，尽管它是无知的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:38:03.250

好吧，有多种方法可以在不使用显式控制器和模型的情况下实现您想要的行为，您可以：

```
<title ng-bind-template="{{windowTitle && windowTitle || 'default'}}"></title> 
```

或者以更简单的方式：

```
<title>{{windowTitle && windowTitle || 'default' }}</title> 
```

在这两种情况下，我们都使用条件表达式：

```
(condition) && (answer if true) || (answer if false) 
```

但是，您应该努力从模板中删除逻辑。

# iphone - 在 UITableView 中添加动画部分？

> ID：13656580
> 
> 赞同：0
> 
> 时间：2012-12-01T05:11:03.193
> 
> 标签：iphone, uitableview, animation

我在 iPhone 应用程序中工作，使用 UITableView 开发我的应用程序。我有 3 个部分，每个部分有 1 行，当用户在 Section1 中按下 UIButton 调用 B1 方法以在此表视图中添加一个部分和行时。它工作正常。

我试图添加动画（添加更多的部分和行）。

```
 [UIView beginAnimations:nil context:nil];
  [UIView setAnimationDuration:0.2]; 
```

但是为所有行和部分设置动画，但我想在添加部分和行中添加动画。如何处理这个请帮助我？

提前致谢

我试过这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
     ExpandActive = NO;
    self.title=@"Expand Tables";
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if(ExpandActive == YES)
    {
        return 4; 
    }
    else
    {
         return 3;
    }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 1;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{

    if(ExpandActive == YES)
    {
        if(section == 0)
        {
            return @"Header1";
        }
        else  if(section == 1)
        {
             return @"Header1";
        }
        else if(section == 2)
        {
             return @"Header1";    
        }
        else if(section == 3)
        {
             return @"Header1";
        }

    }
    else
    {
        if(section == 0)
        {
             return @"Header1";
        }
        else  if(section == 1)
        {
             return @"Header1";
        }
        else if(section == 2)
        {
             return @"Header1";
        }
    }   
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 30;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.backgroundColor = [UIColor clearColor];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.userInteractionEnabled=YES;

    if(ExpandActive == YES)
    {
        if(indexPath.section == 0)
        {
            UIView *bg = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];
            bg.backgroundColor = [UIColor clearColor];
            bg.userInteractionEnabled = YES;

            UIButton *btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn setTitle:@"Yes" forState:UIControlStateNormal];
            btn.frame = CGRectMake(10, 5, 120, 40);
            [btn addTarget:self action:@selector(B1) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn];

            UIButton *btn1 =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn1 setTitle:@"No" forState:UIControlStateNormal];
            btn1.frame = CGRectMake(180, 5, 120, 40);
            [btn1 addTarget:self action:@selector(B2) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn1];
            cell.backgroundView = bg;
            [cell.contentView addSubview:bg];
        }
        else if(indexPath.section == 1) 
        {   
            text = [[UITextView alloc]initWithFrame:CGRectMake(0,0, 320, 50)];
            text.text=@"sdadd";
            [cell.contentView addSubview:text];
        }
        else if(indexPath.section == 2) 
        {
            UIView *bg = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];
            bg.backgroundColor = [UIColor clearColor];
            bg.userInteractionEnabled = YES;

            UIButton *btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn setTitle:@"Yes" forState:UIControlStateNormal];
            btn.frame = CGRectMake(10, 5, 120, 40);
            [btn addTarget:self action:@selector(B5) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn];

            UIButton *btn1 =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn1 setTitle:@"No" forState:UIControlStateNormal];
            btn1.frame = CGRectMake(180, 5, 120, 40);
            [btn1 addTarget:self action:@selector(B6) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn1];
            cell.backgroundView = bg;
            [cell.contentView addSubview:bg];
        }
        else if(indexPath.section == 3) 
        {
            UIView *bg = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];
            bg.backgroundColor = [UIColor clearColor];
            bg.userInteractionEnabled = YES;

            UIButton *btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn setTitle:@"Yes" forState:UIControlStateNormal];
            btn.frame = CGRectMake(10, 5, 120, 40);
            [btn addTarget:self action:@selector(B5) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn];

            UIButton *btn1 =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn1 setTitle:@"No" forState:UIControlStateNormal];
            btn1.frame = CGRectMake(180, 5, 120, 40);
            [btn1 addTarget:self action:@selector(B6) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn1];
            cell.backgroundView = bg;
            [cell.contentView addSubview:bg];
        }
    }
    else
    {
        if(indexPath.section == 0)
        {
            UIView *bg = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];
            bg.backgroundColor = [UIColor clearColor];
            bg.userInteractionEnabled = YES;

            UIButton *btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn setTitle:@"Yes" forState:UIControlStateNormal];
            btn.frame = CGRectMake(10, 5, 120, 40);
            [btn addTarget:self action:@selector(B1) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn];

            UIButton *btn1 =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn1 setTitle:@"No" forState:UIControlStateNormal];
            btn1.frame = CGRectMake(180, 5, 120, 40);
            [btn1 addTarget:self action:@selector(B2) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn1];
            cell.backgroundView = bg;
            [cell.contentView addSubview:bg];
        }
        else if(indexPath.section == 1) 
        {
            UIView *bg = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];
            bg.backgroundColor = [UIColor clearColor];
            bg.userInteractionEnabled = YES;

            UIButton *btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn setTitle:@"Yes" forState:UIControlStateNormal];
            btn.frame = CGRectMake(10, 5, 120, 40);
            [btn addTarget:self action:@selector(B3) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn];

            UIButton *btn1 =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn1 setTitle:@"No" forState:UIControlStateNormal];
            btn1.frame = CGRectMake(180, 5, 120, 40);
            [btn1 addTarget:self action:@selector(B4) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn1];
            cell.backgroundView = bg;
            [cell.contentView addSubview:bg]; 
        }
        else if(indexPath.section == 2) 
        {
            UIView *bg = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];
            bg.backgroundColor = [UIColor clearColor];
            bg.userInteractionEnabled = YES;

            UIButton *btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn setTitle:@"Yes" forState:UIControlStateNormal];
            btn.frame = CGRectMake(10, 5, 120, 40);
            [btn addTarget:self action:@selector(B5) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn];

            UIButton *btn1 =[UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btn1 setTitle:@"No" forState:UIControlStateNormal];
            btn1.frame = CGRectMake(180, 5, 120, 40);
            [btn1 addTarget:self action:@selector(B6) forControlEvents:UIControlEventTouchUpInside];
            [bg addSubview:btn1];
            cell.backgroundView = bg;
            [cell.contentView addSubview:bg];
        }
    }

    return cell;
}

-(void)B1
{

    NSLog(@"B1");
    ExpandActive = YES;
    [text removeFromSuperview];
    [self.tableView reloadData];
}

-(void)B2
{
    NSLog(@"B2");
    ExpandActive = NO;
    [self.tableView reloadData];
    [text removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:29:59.987

您似乎希望将新部分添加为第 1 部分。更新您的两个按钮方法，如下所示：

```
-(void)B1 {
    NSLog(@"B1");
    ExpandActive = YES;

    [self.tableView insertSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation: UITableViewRowAnimationFade];
}

-(void)B2 {
    NSLog(@"B2");
    ExpandActive = NO;

    [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation: UITableViewRowAnimationFade];
} 
```

随意使用不同的动画。

顺便说一句 - 你有很多重复的代码。您需要消除所有重复的代码。

这是一个例子：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSInteger effectiveSection = section;
    if (ExpandActive && effectiveSection > 1) {
        effectiveSection++;
    }

    switch (effectiveSection) {
        case 0:
            return @"Fixed Section 1";
        case 1:
            return @"Optional Section";
        case 2:
            return @"Fixed Section 2";
        case 3:
            return @"Fixed Section 3";
    }

    return nil; // this shouldn't be reached but makes the compiler happy
} 
```

`heightForRowAtIndexPath`另一件事，如果您有固定的高度，请不要实施该方法。这是非常低效的。相反，`rowHeight`在表格视图上设置属性。一个很好的地方是在`viewDidLoad`。只需设置一次，您就完成了。

还有一个 - 无需`userInteractionEnabled`在表格单元格或视图上进行设置。默认情况下启用。它对诸如`UILabel`和之类的东西被禁用`UIImageView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:25:54.210

UITableView 的使用`– insertSections:withRowAnimation:`方法。您还必须处理`-numberOfSectionsInTableView:`方法中返回的部分数。

# android - 使用 Django csrf_exempt 视图注册 Android GCM。最佳实践？

> ID：13656582
> 
> 赞同：2
> 
> 时间：2012-12-01T05:11:21.237
> 
> 标签：android, django, security, push-notification, csrf

在 Android GCM（推送通知服务）注册过程中，我的**移动客户端**必须向Django**视图发出****POST 请求**。默认情况下，视图需要 csrf_token ，但是可以使用**@csrf_exempt 装饰器****禁用**它。

 ******我的问题是：没有 csrf 检查视图的后果是什么？如果我从移动客户端（使用某种盐）编写令牌是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:27:11.743

这实际上取决于您的观点的性质。

csrf 令牌用于帮助防止调用您在同一台 PC 上已通过身份验证时不打算执行的操作。例如，您的 Django 应用程序中存在一个 URL [http://www.example.com/person/delete/356](http://www.example.com/person/delete/356)这将在您向其发布时删除 ID 为 356 的人。这可能正常，因为它需要身份验证才能触发它。但是，如果您在一个选项卡中登录了 Django 应用程序，并且有人向您发送了一封包含“http://www.example.com/person/delete/356”链接的网络钓鱼电子邮件（或类似电子邮件）——您点击它并且因为您已经在另一个选项卡中进行了身份验证，所以它可以工作。通过让 Django 期望一个 csrf 令牌，Django 只会处理它实际期望的请求 - 即 Django 知道它发出了令牌“12345ab”，因此当一个带有令牌“12345ab”的请求被返回时，如果它丢失了它的罚款。或者你发送“98765zx”它会失败。

如果您没有身份验证并且视图不执行任何操作（即它不更改数据，它只是显示它），那么创建@csrf_exempt 的风险非常低。

同样，如果这发生在移动应用程序中并且视图已通过身份验证，那么身份验证将不会在应用程序之间共享，因为它与浏览器选项卡一样，所以风险很低。

您还可以使用其他选项，在设置 HTTP 请求时，如果您能以某种方式获得预期的 csrf 令牌，那么您可以设置标头，就像在 AJAX 调用期间一样，请在[此处阅读 Django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:53:39.133

这取决于许多因素，特别是除了注册 ID 之外您收集的内容，以及客户端如何连接到服务器以进行 POST。

## 没有 CSRF 验证的 GCM 注册的最坏情况

攻击者可以将他自己控制的设备注册到受害者的帐户，并接收针对受害者的通知。

根据您正在做的事情，这可能不是那么糟糕，特别是考虑到 GCM 消息不应该包含任何敏感信息，而只是作为在更安全的方法下加载信息的触发器。

（即，如果 GCM 触发在客户端设备中加载基于身份验证的新页面的活动，由于攻击者的应用程序不会使用受害者的凭据进行身份验证，他们无法看到敏感信息）。

这比其他任何事情都更令人讨厌。

## 如果你想防止这种情况

1.  像 Nam 提到的那样设置一个令牌——如果您从服务器（即从 JavaScript 回调）启动 GCM 注册活动，只需设置一个客户端需要通过注册传回的令牌。CSRF 请求将与此步骤异步，并且由于缺少令牌而失败。

2.  如果您的应用程序通过应用程序专有的子域（即 app.site.com 在子域级别具有身份验证 cookie）与服务器通信，只要应用程序专门加载您自己的域（即没有外部网站)，并且服务器只允许访问该子域上的注册视图，因此很难被利用。CSRF 攻击很可能发生在浏览器中。

3.  使用 CookieManager 从应用程序内的站点 cookie 中提取 CSRF 豁免值，并将其作为 POST 变量添加到请求中。然后你不需要让视图 CSRF 豁免。这本质上是 Django 处理 AJAX CSRF 的方式。请务必`@ensure_csrf_cookie`在注册之前使用装饰器，以确保在客户端中设置了 CSRF cookie。

## 结论

不过老实说，用于 GCM 注册的 CSRF 在“让您彻夜难眠的问题”图腾柱上极低。CSRF 更多是账户管理中的一个问题（例如更改密码、进行银行交易等）。******

# linux - 为什么 Linux RT 不使用信号量？

> ID：13656584
> 
> 赞同：1
> 
> 时间：2012-12-01T05:11:51.300
> 
> 标签：linux, linux-device-driver

在阅读[1]时，我发现了以下内容

“这是通过将大多数内核自旋锁替换为支持优先级继承的互斥锁以及将所有中断和软件中断移动到内核线程来完成的。”

我的问题是为什么不是信号量？

[https://rt.wiki.kernel.org/index.php/CONFIG_PREEMPT_RT_Patch](https://rt.wiki.kernel.org/index.php/CONFIG_PREEMPT_RT_Patch)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:49:52.137

互斥量是二进制信号量，因此它们使用信号量。

具体来说，锁的目的是保证互斥。这意味着，创建一个关键部分的代码，一次只能由一个上下文执行。所以我们想要一个只允许一个竞争者的信号量——这种信号量是一个二进制信号量，它有一个特殊的昵称来表示这种用途：互斥量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:19:28.233

还发现了以下

刚刚找到这个\n [http://www.dilip.nijagal.com/geeky-stuff/45-technical-stuff/64-difference-between-semaphores-and-mutex](http://www.dilip.nijagal.com/geeky-stuff/45-technical-stuff/64-difference-between-semaphores-and-mutex)

# ruby-on-rails - 是否可以从事务块内部重新引发 ActiveRecord::Rollback 异常？

> ID：13656587
> 
> 赞同：0
> 
> 时间：2012-12-01T05:12:00.987
> 
> 标签：ruby-on-rails, exception, rollback

在我的 rails 应用程序中，我在控制器的创建操作中有一个事务块，我尝试在其中创建两条记录。

```
def create
  ActiveRecord::Base.transaction do
    @foo = Foo.new(params[:foo].except(:bar))
    raise ActiveRecord::Rollback unless @foo.save
    @bar = Bar.new(params[:foo][:bar])
    raise ActiveRecord::Rollback unless @bar.save
  end
end 
```

我希望能够从回滚中解救出来，这样我就可以返回一个错误，指示哪个保存失败。

```
rescue ActiveRecord::Rollback => e
  @foo.errors = e if @foo.errors.blank?
ensure
  respond_with @foo
end 
```

但是，我从来没有进入救援区。我认为这是因为，正如 rails 文档所述，事务块吃回滚异常并且不会重新引发它。有没有办法强制重新提出这个异常？

# jquery - 如何使用 off() 禁用对 div 的单击、完成动画并使用 Jquery 启用对 on() 的单击？

> ID：13656592
> 
> 赞同：4
> 
> 时间：2012-12-01T05:12:25.433
> 
> 标签：jquery, click

首先，我确实意识到有很多类似的问题，但我就是无法理解答案或 jsfiddle 答案不起作用！

我的问题既快速又简单，我有一个 div，点击它会将第二个 div 向右移动。但我希望 div 在执行动画时不可点击。这是我的代码：

```
$("#go").click(function() {
    $("#go").off()
   functionlist["flip"]()
    $("#go").on()
})​ 
```

但是 div 永远不会变成可点击的。我真的误解了语言吗？非常感谢！

[http://jsfiddle.net/g5mJd/12/](http://jsfiddle.net/g5mJd/12/)

编辑：我想避免在动画时使元素不可点击，因为我想在点击时执行其他功能并且`run`在此过程中仍然禁用它。我只以动画为例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:29:34.367

我认为你有点误解了什么`on()`和`off()`正在做什么。 `on()`不会恢复`off()`删除的点击处理程序，它会附加一个新的。您必须为其提供一个处理程序来附加。

而不是使用`on()`and `off()`，而是使用这个问题的解决方案：[Make an element unclickable while animated](https://stackoverflow.com/questions/10383016/make-an-element-unclickable-while-animated)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T05:40:13.263

这是一个有趣的。让我失望的是您无法评估 :animated 因为您正在使用方法转换。我已将以下内容添加到您的点击处理程序中，并在此处提供了一个分叉：

```
var functionlist = {
    flip: function() {
        $("#block").transition({
            x: '+=100'
        }, 500, function(){$("#block").attr('data-animating', "false");});
    },
    flop: function() {
        $("#block").transition({
            rotateY: '0deg'
        }, 500)

    }
};

$("#go").click(function() {
    if ($("#block").attr('data-animating') !== "true") {
        console.log($("#block").attr('data-animating'));
        $("#block").attr('data-animating', "true");
        functionlist["flip"]();
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T05:34:07.647

这不是 JQuery 开/关方法的正确用法。请再次浏览文档。

您应该将事件名称和处理函数传递给 on 方法。

`$("#id").on("click", function() {});`

和

$("#id").off("点击");

# crash - (cocos2d-x for iOS) UITextField 在输入时有时会崩溃

> ID：13656605
> 
> 赞同：1
> 
> 时间：2012-12-01T05:14:48.363
> 
> 标签：crash, uitextfield, cocos2d-x

我在我的 cocos2d-x 项目中添加了 UITextField。但是当输入时，应用程序有时会崩溃。请给我一些帮助，谢谢。这是我的代码

```
 m_textField = [[UITextField alloc] initWithFrame:CGRectMake(TEXT_FIELD_POSX, TEXT_FIELD_POSY, TEXT_FIELD_WIDTH, TEXT_FILED_HEIGHT)];
    m_textField.tag = CHAT_TEXT_TAG;
    m_textField.delegate = (AppController *)clientApp.delegate;
    [m_textField setBackgroundColor:[UIColor clearColor]];
    [m_textField setTextColor:[UIColor blackColor]];
    [m_textField setFont:[UIFont fontWithName:@"Helvetica" size:14]];
    m_textField.returnKeyType = UIReturnKeySend;
    m_textField.enablesReturnKeyAutomatically = YES;

    [[EAGLView sharedEGLView] addSubview:m_textField]; 
```

和崩溃线程`0

```
CoreGraphics 0x31e09fcc CGFontStrikeRelease + 71
1   
CoreGraphics 0x31e09f0b CGFontCacheUnlockStrike + 230
2   
CoreGraphics 0x31e09a89 CGGlyphLockUnlock + 52
3   
libRIP.A.dylib 0x34604acd ripc_DrawGlyphs + 1888
4   
CoreGraphics 0x31e05361 CGContextDelegateDrawGlyphs + 44
5   
CoreGraphics 0x31ee530d draw_glyphs + 396
6   
CoreGraphics 0x31e05109 CGContextShowGlyphsWithAdvances + 380
7   
WebCore 0x3664552b _ZN7WebCoreL22showGlyphsWithAdvancesERKNS_10FloatPointEPKNS_14SimpleFontDataEP9CGContextPKtPK6CGSizem + 1918
8   
WebCore 0x36644c8f _ZNK7WebCore4Font10drawGlyphsEPNS_15GraphicsContextEPKNS_14SimpleFontDataERKNS_11GlyphBufferEiiRKNS_10FloatPointEb + 1078
9   
WebCore 0x36644525 _ZNK7WebCore4Font14drawSimpleTextEPNS_15GraphicsContextERKNS_7TextRunERKNS_10FloatPointEii + 348
10  
WebCore 0x366443a3 _ZNK7WebCore4Font8drawTextEPNS_15GraphicsContextERKNS_7TextRunERKNS_10FloatPointEii + 134
11  
WebKit 0x34fd86ef _ZL11drawAtPointPKtiRKN7WebCore10FloatPointERKNS1_4FontEPNS1_15GraphicsContextEbPNS1_10BidiStatusEi + 210
12  
WebKit 0x34fda56b -[NSString(WebStringDrawing) __web_drawInRect:withFont:ellipsis:alignment:letterSpacing:lineSpacing:includeEmoji:truncationRect:measureOnly:renderedStringOut:drawUnderline:] + 3690
13  
WebKit 0x34f52187 -[NSString(WebStringDrawing) __web_drawInRect:withFont:ellipsis:alignment:letterSpacing:lineSpacing:includeEmoji:truncationRect:measureOnly:renderedStringOut:] + 114` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:28:02.100

您应该像这样实现您的委托方法：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    cocos2d::CCEGLView* pglview = cocos2d::CCDirector::sharedDirector()->getOpenGLView();
    if(pglview)
    {
        pglview->setIMEKeyboardState(false);
    }
    return YES;
} 
```

希望它会有所帮助:)。

# actionscript-3 - 如何将 Flex 库中的 MXML 对象添加到我的 ActionScript 项目中？

> ID：13656607
> 
> 赞同：1
> 
> 时间：2012-12-01T05:14:55.130
> 
> 标签：actionscript-3, apache-flex, actionscript, flash-builder, mxml

我在 Flex 库中创建了一些对象，现在我想将它们添加到我的 ActionScript 项目中。

我已将 Flex 库生成的 SWC 文件添加到我的 ActionScript 项目的构建路径中，它会看到我制作的对象（它们显示在自动完成中）但 addChild 不起作用，我该怎么做？

具体来说，它是我希望在我的 ActionScript 项目中弹出的菜单屏幕。

我试过用谷歌搜索很多答案，但他们似乎专注于如何将 MXML 对象转换为 ActionScript 代码，或者制作一个将 actioncode 放入的 MXML 项目。

谢谢

编辑：对于我上面所说的测试，一个简单的 ActionScript 项目和一个简单的 Flex 库项目以及 ActionScript 项目的构造器就是这样：

```
public function TestASProject()
    {
        var tc:TestComponent = new TestComponent();
        this.addChild(tc);
    } 
```

其中 TestComponent 是一个带有按钮的 MXML 组件。这样做会导致编译时错误，因为无法将 TestComponent 转换为我得到的 DisplayObject，但我不知道该怎么做。

另外要明确的是，无论我必须做什么来编译我将要做的 MXML 对象，我只想能够初始化它们并将它们添加到 ActionScript 中的显示中。我曾希望我可以通过使用 SWC 来实现这一点，但这就是我卡住的地方

# unicode - Erlang os:cmd/1 如何运行带有 Unicode 字符的命令？

> ID：13656609
> 
> 赞同：3
> 
> 时间：2012-12-01T05:15:15.490
> 
> 标签：unicode, operating-system, erlang, cmd

5> os:cmd("触摸编程").

> 异常错误：没有函数子句匹配 os:validate1([32534,31243]) (os.erl, line 330)
> in function os:cmd/1 (os.erl, line 165)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:12:45.670

Erlang 使用 latin1 作为其源文件，这意味着您不能直接在代码中使用中文或任何其他不在 latin1 编码中的符号。

实现您想要的最简单的方法是：

```
Name = [231,188,150,231,168,139,10].
os:cmd("touch " ++ Name). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T05:09:09.153

好吧，如果你的 shell 的语言环境是`UTF-8`，那么就这样做：

```
os:cmd(binary_to_list(unicode:characters_to_binary("touch 编程"))) 
```

但是在源文件中，你可以简单地写

```
os:cmd("touch 编程"). 
```

并将文件保存在 中`UTF-8`，然后一切正常。

似乎 Erlang 解析器对文字字符串做了一些特殊的事情。

# jquery - 如何使用 jQueryUI 将可拖动对象与动画交换？

> ID：13656611
> 
> 赞同：0
> 
> 时间：2012-12-01T05:15:22.437
> 
> 标签：jquery, jquery-ui

这看起来很简单，但我无法让它工作。我在 2 个不同的 droppables 中有两个 draggables。当我将一个可拖放对象从一个可拖放对象放置到另一个对象时，现有的可拖动对象应设置动画以移动到另一个可拖放区域。

```
$('.droppable').droppable({
    hoverClass: 'hoverClass',
    drop: function(event, ui) {
      var $from = $(ui.draggable),
          $fromParent = $from.parent(),
          $to = $(this).children(),
          $toParent = $to.parent();

      // This is where I replace draggables' positions without animation
      $toParent.html($from.css({left: '', top: '', 'z-index': ''}));
      $fromParent.html($to);
      makeDraggable();
    }
}); 
```

[http://jsfiddle.net/codef0rmer/AywmJ/](http://jsfiddle.net/codef0rmer/AywmJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:04:45.663

呜呼！！！我自己想通了。

演示：http: [//jsfiddle.net/codef0rmer/AywmJ/2/](http://jsfiddle.net/codef0rmer/AywmJ/2/)

**刚刚为交换写了这个小代码：**

```
function swap($el, fromPos, toPos, duration, callback) {
    $el.css('position', 'absolute')
      .css(fromPos)
      .animate(toPos, duration, function() {
        if (callback) callback();
      });
} 
```

**并更新了 drop 事件：**

```
$('.droppable').droppable({
    hoverClass: 'hoverClass',
    drop: function(event, ui) {
      var $from = $(ui.draggable),
          $fromParent = $from.parent(),
          $to = $(this).children(),
          $toParent = $(this);

      window.endPos = $to.offset();

      swap($from, $from.offset(), window.endPos, 200);
      swap($to, window.endPos, window.startPos, 1000, function() {
        $toParent.html($from.css({position: 'relative', left: '', top: '', 'z-index': ''}));
        $fromParent.html($to.css({position: 'relative', left: '', top: '', 'z-index': ''}));
        makeDraggable();
      });
    }
}); 
```

# numerical - 正弦定点输入

> ID：13656614
> 
> 赞同：1
> 
> 时间：2012-12-01T05:15:51.190
> 
> 标签：numerical, fixed-point, trigonometry

我想知道是否存在采用定点输入的正弦/余弦函数的实现。为了减少错误，我更喜欢这样的实现。一个简单的版本可能将 N 位无符号整数 k 作为输入并计算 sin(2*pi*k/2^N)。这样的事情存在吗？如果是这样，我会一直使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T16:16:46.360

我做了一个 16.16 定点正弦实现，你可以在这里找到它： [https ://code.google.com/p/libfixmath/source/browse/trunk/libfixmath/fix16_trig.c#47](https://code.google.com/p/libfixmath/source/browse/trunk/libfixmath/fix16_trig.c#47)

# math - 模数类的含义

> ID：13656615
> 
> 赞同：0
> 
> 时间：2012-12-01T05:15:56.473
> 
> 标签：math, cryptography, modulo, discrete-mathematics

我正在尝试在 Java 中实现 Paillier 密码系统，并且对带有 STAR 的模集的定义存在疑问。具体来说，如果我们在 Zn 中添加一颗星，我们的意思是什么？

我在两个之间感到困惑：

1) 它是素数的集合。2) 它是集合 Zn 减去元素零。

谷歌搜索没有帮助。至少对我来说不是。

![在此处输入图像描述](../Images/6b79edd346fe964c2e038e8b0c271c82.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:41:17.937

正如 Daniel Fischer 所指出的， (Z_n)* 是 Z_n 的单位群。实际上，(Z_n)* 是整数 x, 1 <= x < n 的集合，使得 GCD(x,n) = 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:47:09.880

这是密码学中使用的数论符号。请注意，密码学家通常使用与现代数论略有不同的符号。斯坦福大学的密码学导论课程中 对密码学家的数论进行了很好的介绍，[第 1 部分](https://crypto.stanford.edu/~dabo/cs255/handouts/numth2.pdf)和[第 2 部分。](https://crypto.stanford.edu/~dabo/cs255/handouts/numth1.pdf)[该表的第二部分](https://crypto.stanford.edu/~dabo/cs255/handouts/numth1.pdf)讨论了`(Z_n)*`.

如果你想了解更多关于一般数论的知识，我发现[当代抽象代数](https://rads.stackoverflow.com/amzn/click/com/0395861799)在我的密码学课程中非常有帮助。

# android - Android Google Maps 注册不起作用，它说输入的 MD5 证书无效

> ID：13656620
> 
> 赞同：6
> 
> 时间：2012-12-01T05:16:35.433
> 
> 标签：android

我正确生成了 md5 指纹

```
C:\Program Files\Java\jdk1.6.0_19\bin>keytool.exe -list -ali
as androiddebugkey -keystore "C:\android\debug.keystore" -st
orepass android -keypass android
androiddebugkey, Nov 11, 2012, PrivateKeyEntry,
Certificate fingerprint (MD5): **:**:**:**:**:**:**:**:**:**
:**:**:**:**:**:** 
```

> C:\Program Files\Java\jdk1.6.0_19\bin>

但是当我把它放在[https://developers.google.com/android/maps-api-signup.html](https://developers.google.com/android/maps-api-signup.html)

然后它显示，

> 您输入的指纹无效。请按浏览器上的返回按钮并输入有效的证书指纹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:10:48.517

在地图 API v2+ 中，您需要 SHA1 指纹而不是 md5

> 您可以使用以下命令发现开发人员证书的 SHA1 指纹：keytool -list -v -keystore mystore.keystore

# performance - 为什么 Contains() 运算符会降低 Entity Framework 的 Linq 查询？

> ID：13656623
> 
> 赞同：1
> 
> 时间：2012-12-01T05:17:48.993
> 
> 标签：performance, linq, entity-framework, .net-4.0, contains

[我在这里](http://www.dotnet-tricks.com/Tutorial/entityframework/J8bO140912-Tips-to-improve-Entity-Framework-Performance.html)读到，在实体框架中，如果您执行包含操作，它会降低性能：

> 包含在 SQL 中转换为“WHERE IN”，导致性能下降”

现在我有近 10 个表有 10 列，并且在获取记录时我使用包含近 8 列。

我的问题是真的吗？如果是的话，替代方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T08:16:22.097

**是**的 Contains() 会严重降低性能。

**所以你可以尝试下面提到的解决方案。**

我们能够通过添加一个中间表并从需要使用 Contains 子句的 LINQ 查询连接到该表来解决 EF Contains 问题。通过这种方法，我们能够获得惊人的结果。我们有一个大型 EF 模型，并且由于在预编译 EF 查询时不允许使用“包含”，因此使用“包含”子句的查询的性能非常差。

***概述：***

1.  在 SQL Server 中创建一个表 - 例如 HelperForContainsOfIntType，其 HelperID 为 Guid 数据类型，ReferenceID 为 int 数据类型列。根据需要创建具有不同数据类型的 ReferenceID 的不同表。

2.  在 EF 模型中为 HelperForContainsOfIntType 和其他此类表创建一个实体/实体集。根据需要为不同的数据类型创建不同的 Entity / EntitySet。

3.  在 .NET 代码中创建一个辅助方法，该方法接受 IEnumerable 的输入并返回一个 Guid。此方法生成一个新的 Guid，并将 IEnumerable 中的值与生成的 Guid 一起插入到 HelperForContainsOfIntType。接下来，该方法将这个新生成的 Guid 返回给调用者。为了快速插入 HelperForContainsOfIntType 表，创建一个存储过程，它接受值列表的输入并执行插入。请参阅[SQL Server 2008 (ADO.NET) 中的表值参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)。为不同的数据类型创建不同的助手或创建一个通用的助手方法来处理不同的数据类型。

**创建一个类似于以下内容的 EF 编译查询：**

```
static Func<MyEntities, Guid, IEnumerable<Customer>> _selectCustomers =
    CompiledQuery.Compile(
        (MyEntities db, Guid containsHelperID) =>
            from cust in db.Customers
            join x in db.HelperForContainsOfIntType on cust.CustomerID equals x.ReferenceID where x.HelperID == containsHelperID
            select cust 
    ); 
```

**使用要在 Contains 子句中使用的值**调用 helper 方法，并获取要在查询中使用的 Guid。****例如：****

 **```
var containsHelperID = dbHelper.InsertIntoHelperForContainsOfIntType(new int[] { 1, 2, 3 });
var result = _selectCustomers(_dbContext, containsHelperID).ToList(); 
```

我从**[这里得到的](https://stackoverflow.com/questions/7897630/why-does-the-contains-operator-degrade-entity-frameworks-performance-so-drama)****

# java - 使用 apache commons-exec 运行 git clone：如何输入密码？

> ID：13656627
> 
> 赞同：1
> 
> 时间：2012-12-01T05:18:08.723
> 
> 标签：java, git, apache-commons-exec

我尝试使用 apache commons-exec 运行 git clone 命令但卡住了，它根本没有提示我输入密码并阻止在那里。

```
DefaultExecutor executor = new DefaultExecutor();
executor.setStreamHandler( new PumpStreamHandler( System.out, System.err, System.in ) );
executor.execute( "git clone --progress -v https://xxx/prj.git" ); 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:53:13.490

我想出了一种解决此问题的方法，只需将用户名和密码包装为输入流：

```
String input="...";        
executor.setStreamHandler( new PumpStreamHandler( System.out, System.err, new ByteArrayInputStream(
            input.getBytes() ) ) ); 
```

# ruby-on-rails - .sass-cache 中的文件有什么用？

> ID：13656630
> 
> 赞同：5
> 
> 时间：2012-12-01T05:18:28.720
> 
> 标签：ruby-on-rails, sass

第一次使用 Sass 后，我注意到它`.sass-cache`在我的工作目录中留下了一个目录。我似乎无法使用其中的文件（在散列子目录中），那么这个目录是做什么用的？

我可以将它用作 VCS 吗？删除是否安全？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T05:29:17.347

[从文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#cache_stores)：

> Sass 缓存已解析的文档，以便无需再次解析即可重用它们，除非它们已更改。

它只是使编译更快。如果您删除它们，它们将在您下次编译时再次生成。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-03T01:00:49.997

> Sass 缓存已解析的文档，以便无需再次解析即可重用它们，除非它们已更改。

允许保存缓存将有助于 sass 更快地编译，但是如果它们冒犯了您完美的工作区（如我的），有几种方法可以解决它。

1.  仅限本地：对于某些人来说，sassc 文件的主要烦恼是您可能不希望它们在实时服务器上。如果是这种情况，您可以在大多数 FTP 程序（在本地）中设置过滤器以忽略 sass 缓存目录。（FileZilla 可以为同时运行的每个视图设置两个单独的过滤器，但这将禁用目录比较）。

2.  更改缓存位置：从命令行运行 sass 时，使用下面的参数来更改缓存位置，这样它就不会妨碍您！

    --缓存位置路径

3.  DISABLE CACHE：如果缓存真的困扰你，sass 提供一个参数来停止缓存

    --无缓存

# php - 如何在 php 中的 imagemagick 中提高图像分辨率

> ID：13656631
> 
> 赞同：-1
> 
> 时间：2012-12-01T05:18:46.343
> 
> 标签：php, pdf, imagemagick, png

我成功地根据pdf中的页面将完整的pdf文件转换为不同的png文件。但是现在的问题是图像的分辨率不如pdf文件中的那么好，有点模糊。谁能帮我解决这个问题？
我正在使用以下代码：-

```
if ($_FILES["file"]["error"] > 0)
                           {
                         echo $msg = $_FILES["file"]["error"] . "<br />";
                           }
                         else
                           {
                                move_uploaded_file($_FILES["file"]["tmp_name"],"images/" . $_FILES["file"]["name"]);

                            }

ini_set('max_execution_time', 100);
$file1=$_FILES["file"]["name"];
$file='images/' . $_FILES["file"]["name"];
$pages=exec("identify -format %n $file");
$explode=explode('.',$file);
    $explode=$explode[0];
for($i=0;$i<$pages;$i++)
{
    $im = new imagick( 'C:\wamp\www\test\upload\images\\'.$file1.'['.$i.']' ); 
    //$im->setImageColorspace(0); 
    #for thumbnail
    //$im->cropThumbnailImage(90,90);
    $im->setResolution(200,200);
    $im->setImageCompression(Imagick::COMPRESSION_LZW);
    $im->setImageCompressionQuality(0); 
    $im->setImageFormat('png'); 
    $im->adaptiveResizeImage(768,1024);

    $im->writeImage($explode.$i.'.png'); 
    //echo $explode.$i.'.png';
    $im->clear(); 
    $im->destroy();
}
unlink($file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:44:44.587

Imagick 的[setResolution](http://www.php.net/manual/en/imagick.setresolution.php)决定了图像的分辨率。

只需将值从`200,200`某个更高的数字增加，这将增加图像的分辨率。

# c# - 在 ClickOnce 应用程序中包含文件夹

> ID：13656633
> 
> 赞同：14
> 
> 时间：2012-12-01T05:18:56.283
> 
> 标签：c#, clickonce, publish

我创建了一个 Windows C# 项目并将其作为**ClickOnce**应用程序（项目属性中的发布功能）进行安装。我想*包含一个包含*Crystal Report (rpt) 文件的文件夹。在我的应用程序中，我将 rpt 文件的路径作为我的安装位置。如何在发布时包含此文件夹。这样我就不需要手动复制文件夹。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-06-18T14:25:36.290

所以汤姆已经解释了如何添加文件。您明确表示您希望在发布 ClickOnce 应用程序后为其添加一个文件夹。假设您在解决方案的根目录中有一个名为`Dependencies`的文件夹，其中包含一个`Reports`包含所有 RPT 文件的文件夹。以下是确保部署的应用程序包含`Dependencies`文件夹的所有内容的方法：

1.  在 Visual Studio 中右键单击您的项目，然后选择“卸载项目”。

2.  右键单击并选择以编辑 csproj 文件。

3.  在结束`</Project>`标记之前添加：

    `<ItemGroup>`
    `<Content Include="$(SolutionDir)Dependencies\**\*">`
    `<Link>%(RecursiveDir)%(Filename)%(Extension)</Link>`
    `<Visible>false</Visible>`
    `</Content>`
    `</ItemGroup>`

4.  这会将 Dependencies 文件夹中的所有内容添加到项目中。我们`\**\*`在 Include 末尾使用语法，`%(RecursiveDir)`以确保该`Reports`文件夹将出现在已发布的版本以及报告文件中。设置后`<Visible>false</Visible>`，您将看不到解决方案资源管理器中混乱的项目。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-01T19:28:23.250

您必须将项目添加到项目并将它们标记为“内容”（在解决方案资源管理器中选择项目，右键单击，属性，设置构建操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-26T13:18:59.637

假设我们有两个项目： main -`ProjectA`以及其他一些`ProjectB`对`ProjectA`. 在`ProjectB`我们有一个`FolderB`包含一些文件的文件夹，这些文件应该包含在`ProjectA`.

一旦我们构建，目录`ProjectA`中就会有所有引用的文件和文件夹`bin`。但是当我们使用 ClickOnce 工具发布解决方案时，引用的文件夹`ProjectB`不会包含在安装程序中，您也不会`Application Files`在项目发布设置的窗口中看到它们。

解决方案是创建一个名为`FolderB`in的新文件夹，并使用***Add As Link***选项`ProjectA`将现有项目表单添加`FolderB`到`ProjectB`这个新文件夹中。然后所有文件，包括链接到文件夹的文件，都将包含在发布中。`ProjectA`*`ProjectB`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-12T21:04:03.057

自 OP 以来已经有很长时间了，但是当我将文件夹添加到我的解决方案时，将 Crystal Report 添加到该文件夹​​并将其标记为“内容”（根据 Tom），然后发布并安装 - 文件夹和报告被添加到ClickOnce 安装位置。所以汤姆的解决方案对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-07T21:23:33.643

巴里有最好的解决方案，真的解决了我需要的一切！无需在多个项目中包含相同的文件，只需设置在调试中复制文件以实现本地功能和调试的预构建事件。解决了我在一个位置使用 rdlc（报告）并在多个项目中使用它们的问题。*

# iphone - 使用游戏中心向所有玩家显示相同的卡片

> ID：13656635
> 
> 赞同：3
> 
> 时间：2012-12-01T05:19:08.883
> 
> 标签：iphone, objective-c, ios, xcode, game-center

我对游戏中心完全陌生，我已经设法邀请朋友并管理打开按钮的 IBAction。

我正在使用 GKTurnbasedMatch 来管理回合，但对于多人游戏，如何向邀请的玩家选择类别的所有玩家显示卡片。

我怎么得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:36:31.093

这是关于 Gamecenter / 回合制的精彩教程：

[http://www.raywenderlich.com/5509/beginning-turn-based-gaming-with-ios-5-part-2](http://www.raywenderlich.com/5509/beginning-turn-based-gaming-with-ios-5-part-2)

特别是这部分：

> 如果我们发现 lastTurn 为空，我们将假设我们正在处理一个新的匹配，否则我们将假设我们已经有我们将要处理的 matchData。于是打开GCTurnBasedMatchHelper.m，将didFindMatch方法替换为如下：

```
-(void)turnBasedMatchmakerViewController: 
  (GKTurnBasedMatchmakerViewController *)viewController 
  didFindMatch:(GKTurnBasedMatch *)match {
    [presentingViewController 
      dismissModalViewControllerAnimated:YES];
    self.currentMatch = match;
    GKTurnBasedParticipant *firstParticipant = 
      [match.participants objectAtIndex:0];
    if (firstParticipant.lastTurnDate) {
        NSLog(@"existing Match");
    } else {
        NSLog(@"new Match");
    }
} 
```

您要做的是每回合将所有数据发送给所有玩家，因此当玩家第一次去（和发牌）时，他们应该将手牌发送给所有玩家。当他们不交易时，您不必发送所有数据，因此您可以发送不同类型的消息。发送信息：

```
BOOL success = [[GameCenterManager sharedInstance].Match sendDataToAllPlayers:data  withDataMode:GKMatchSendDataReliable error:&error]; 
```

只要确保数据有一个类型，这通常是消息的第一个字节，然后在客户端，读取第一个字节以确定它是什么类型的消息，然后使用 switch 语句或任何你喜欢的处理与不同类型的消息。

# android - 在 Android 上使用 Java 客户端库下载 Google 存储对象

> ID：13656636
> 
> 赞同：1
> 
> 时间：2012-12-01T05:19:08.960
> 
> 标签：android, google-api-java-client, google-cloud-storage, google-play-services

我正在尝试使用 java 客户端库从 GS 下载对象。调用 getObject.download(out) 时会引发 GoogleAuthException。异常为空。在目录中创建一个空文件。关于发生了什么的任何想法？有人对这些库有经验吗？

```
 GoogleAccountCredential credential=
            GoogleAccountCredential.usingOAuth2(FirefighterLog.getInstance(),
                    "https://www.googleapis.com/auth/devstorage.read_only");

    credential.setAccountName(name);

    com.google.api.services.storage.Storage storageService =
                new com.google.api.services.storage.Storage.Builder(transport, jsonFactory, credential)
                    .setApplicationName("myApp").build();
    try {
        Get getObject=storageService.objects().get("myBucket", "myObject");
        String appPath = FirefighterLog.getInstance().getApplicationContext().getFilesDir ().getAbsolutePath();
        java.io.File parentDir = new java.io.File(appPath);

        OutputStream out = new FileOutputStream(new java.io.File(parentDir,"myFileName" ));

        gettObject.getMediaHttpDownloader().setDirectDownloadEnabled(true);
        getObject.download(out);
        } catch (final GooglePlayServicesAvailabilityIOException availabilityException) {
          showGooglePlayServicesAvailabilityErrorDialog(
              availabilityException.getConnectionStatusCode());
        } catch (UserRecoverableAuthIOException userRecoverableException) {
          startActivityForResult(
              userRecoverableException.getIntent(), GS_AUTH_RESULT);
        } catch (IOException e) {

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:33:44.560

原来我使用的是旧版本的 GoogleAccountCredential，它没有抛出正确的异常。修复此问题后，引发的异常是 UserRecoverableAuthException，并且可以启动权限意图。现在像冠军一样工作。

# css - 图像列表在 Internet Explorer 中被截断

> ID：13656639
> 
> 赞同：0
> 
> 时间：2012-12-01T05:19:36.263
> 
> 标签：css, list, internet-explorer-8

前几天抓了一个单页模板，需要在 IE 中手动修复渲染。在右侧，在核心价值观列表下，

*   有子弹的图像替换。在 Chrome、Firefox 和 Safari 上看起来不错，但在 IE 上当然不行。我的猜测是边距设置*   ? [http://www.justicepartyct.org](http://www.justicepartyct.org)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:03:53.863

用于代替要点的小金弓图像实际上比屏幕上显示的要大得多。正在使用`background-size` CSS 属性减小大小。不幸的是，IE8 及以下不支持`background-size`.

我猜大于需要的尺寸是为了让子弹在视网膜显示器上看起来很清晰。如果您愿意放弃，请执行以下操作：

*   将弓形图像的大小调整为 17 像素乘 17 像素，如下所示 -![调整大小的图像](../Images/aaaeda9d37aaca20f5dcf24011d717fb.png)
*   用较小的版本替换当前的弓图像
*   从选择器中删除`-webkit-background-size`、`-moz-background-size`和 `background-size`CSS 声明`li`。这是可选的，但只是为了保持清洁。

# r - 对齐ggplot中的绘图区域

> ID：13656642
> 
> 赞同：21
> 
> 时间：2012-12-01T05:20:10.857
> 
> 标签：r, ggplot2

我正在尝试使用 grid.arrange 在 ggplot 生成的同一页面上显示多个图形。这些图使用相同的 x 数据，但具有不同的 y 变量。由于 y 数据具有不同的比例，这些图具有不同的维度。

我尝试在 ggplot2 中使用各种主题选项来更改绘图大小并移动 y 轴标签，但没有一个可以对齐绘图。我希望将图排列在 2 x 2 正方形中，以便每个图的大小相同并且 x 轴对齐。

下面是一些测试数据：

```
A <- c(1,5,6,7,9)
B <- c(10,56,64,86,98)
C <- c(2001,3333,5678,4345,5345)
D <- c(13446,20336,24333,34345,42345)
L <- c(20,34,45,55,67)
M <- data.frame(L, A, B, C, D) 
```

我用来绘制的代码：

```
x1 <- ggplot(M, aes(L, A,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')
x2 <- ggplot(M, aes(L, B,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')
x3 <- ggplot(M, aes(L, C,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')
x4 <- ggplot(M, aes(L, D,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')
grid.arrange(x1,x2,x3,x4,nrow=2) 
```

如果您运行此代码，您将看到由于 y 轴单位的长度较大，底部两个绘图的绘图区域较小。

如何使实际的绘图窗口相同？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-01T07:39:58.073

**编辑**

更简单的解决方案是：1）使用`cowplot`包（请参阅此处的答案）；或 2) 使用`egg`github 上提供的包。

```
# devtools::install_github("baptiste/egg")
library(egg)
library(grid)

g = ggarrange(x1, x2, x3, x4, ncol = 2)
grid.newpage()
grid.draw(g) 
```

**原来的**

**次要编辑：**更新代码。

如果您想保留轴标签，那么通过一些摆弄，并从[这里](https://stackoverflow.com/questions/13294952/left-align-two-graph-edges-ggplot)借用代码，就可以完成这项工作。

```
library(ggplot2)
library(gtable)
library(grid)
library(gridExtra)

# Get the widths
gA <- ggplotGrob(x1)
gB <- ggplotGrob(x2)
gC <- ggplotGrob(x3)
gD <- ggplotGrob(x4)
maxWidth = unit.pmax(gA$widths[2:3], gB$widths[2:3], 
                     gC$widths[2:3], gD$widths[2:3])

# Set the widths
gA$widths[2:3] <- maxWidth
gB$widths[2:3] <- maxWidth
gC$widths[2:3] <- maxWidth
gD$widths[2:3] <- maxWidth

# Arrange the four charts
grid.arrange(gA, gB, gC, gD, nrow=2) 
```

![在此处输入图像描述](../Images/561df7396a82169facccd9d1c28e25bb.png)

**替代解决方案：**包中 有用于将 grobs 组合成一个 grob`rbind`的`cbind`功能。`gtable`对于此处的图表，应使用 设置宽度`size = "max"`，但 CRAN 版本的`gtable`会引发错误。

一种选择是检查`grid.arrange`绘图，然后使用`size = "first"`or size = "last"` 选项：

```
# Get the ggplot grobs
gA <- ggplotGrob(x1)  
gB <- ggplotGrob(x2)
gC <- ggplotGrob(x3)
gD <- ggplotGrob(x4)

# Arrange the four charts
grid.arrange(gA, gB, gC, gD, nrow=2)

# Combine the plots   
g = cbind(rbind(gA, gC, size = "last"), rbind(gB, gD, size = "last"), size = "first")

# draw it
grid.newpage()
grid.draw(g) 
```

第二种选择是从包中获取`bind`函数。`gridExtra`

```
# Get the ggplot grobs
gA <- ggplotGrob(x1)  
gB <- ggplotGrob(x2)
gC <- ggplotGrob(x3)
gD <- ggplotGrob(x4)

# Combine the plots
g = cbind.gtable(rbind.gtable(gA, gC, size = "max"), rbind.gtable(gB, gD, size = "max"), size = "max")

# Draw it
grid.newpage()
grid.draw(g) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-04T06:24:00.653

这正是我编写[cowplot](http://cran.r-project.org/web/packages/cowplot/index.html)包的问题。它可以在该包中的一行中完成：

```
require(cowplot) # loads ggplot2 as dependency
# re-create the four plots
A <- c(1,5,6,7,9)
B <- c(10,56,64,86,98)
C <- c(2001,3333,5678,4345,5345)
D <- c(13446,20336,24333,34345,42345)
L <- c(20,34,45,55,67)
M <- data.frame(L, A, B, C, D)
x1 <- ggplot(M, aes(L, A,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')
x2 <- ggplot(M, aes(L, B,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')
x3 <- ggplot(M, aes(L, C,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')
x4 <- ggplot(M, aes(L, D,xmin=10,ymin=0)) + geom_point() + stat_smooth(method='lm')

# arrange into grid and align
plot_grid(x1, x2, x3, x4, align='vh') 
```

结果如下 ![在此处输入图像描述](../Images/eaa0d571620d1f1e86ab4a3beece9ec6.png) ：（请注意，cowplot 更改了默认的 ggplot2 主题。如果你真的想的话，你可以恢复灰色。）

作为奖励功能，您还可以在每个图表的左上角添加绘图标签：

```
plot_grid(x1, x2, x3, x4, align='vh', labels=c('A', 'B', 'C', 'D')) 
```

结果： ![在此处输入图像描述](../Images/9a21a8c21e7f474e53a12795d6472ffa.png)

`labels`我几乎在我制作的每一个多部分图表上都使用该选项。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-01T05:55:28.197

我会使用 faceting 来解决这个问题：

```
library(reshape2)
dat <- melt(M,"L") # When in doubt, melt!

ggplot(dat, aes(L,value)) + 
geom_point() + 
stat_smooth(method="lm") + 
facet_wrap(~variable,ncol=2,scales="free") 
```

![例子](../Images/25a17c4f0c132db116313fe5e3525259.png)

注意：外行可能会忽略不同刻面的尺度不同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-10T22:53:16.823

**Patchwork**是一个新的包，它使得格式化和布局多个 ggplot 变得非常容易。关于它的最好的事情之一是它会自动对齐绘图区域。另外，语法非常简单。

```
devtools::install_github("thomasp85/patchwork")
library(patchwork)
x1 + x2 + x3 + x4 + plot_layout(ncol = 2) 
```

[![在此处输入图像描述](../Images/a00ff0c6c76efcbcacd65ffc7ed9bf7e.png)](https://i.stack.imgur.com/04SIR.png)

> 查看 GitHub 页面以获取更多示例：[https ://github.com/thomasp85/patchwork](https://github.com/thomasp85/patchwork)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-07T01:28:48.390

如果您使用 RMarkdown 并编织成 PDF，我有另一种方法。Knitr 在创建 PDF 时提供了[绘制子图](https://stackoverflow.com/questions/12546365/subfigures-or-subcaptions-with-knitr)的功能，它允许您在一个图中有多个图，每个图都有自己的标题。

为此，必须单独显示每个图。通过将`cowplot`包中的几个函数连接在一起，我制作了以下函数，它可以对齐绘图，同时将它们保持为单独的对象：

```
plot_grid_split <- function(..., align = "hv", axis= "tblr"){
  aligned_plots <- cowplot::align_plots(..., align=align, axis=axis)
  plots <- lapply(1:length(aligned_plots), function(x){
    cowplot::ggdraw(aligned_plots[[x]])
  })
  invisible(capture.output(plots))
} 
```

这是一个示例，比较正常布局与使用函数：

```
---
output: pdf_document
header-includes:
   - \usepackage{subfig}
---

```{r}
plot_grid_split <- function(..., align = "hv", axis= "tblr"){
  aligned_plots <- cowplot::align_plots(..., align=align, axis=axis)
  plots <- lapply(1:length(aligned_plots), function(x){
    cowplot::ggdraw(aligned_plots[[x]])
  })
  invisible(capture.output(plots))
}
```

```{r fig-sub, fig.cap='Four Plots Not Aligned', fig.subcap=c('Plot One', 'Plot Two', 'Plot Three', 'Plot Four'), out.width='.49\\linewidth', fig.asp=1, fig.ncol = 2}  
library(ggplot2) 
plot <- ggplot(iris, aes(Sepal.Length, Sepal.Width, colour = Species)) +
  geom_point()

plot + labs(title = "A nice title")
plot + labs(caption = "A sample caption")
plot + theme(legend.position = "none")
plot + theme(legend.position = "top")
```  

```{r fig-sub-2, fig.cap='Four Plots Aligned', fig.subcap=c('Plot One', 'Plot Two', 'Plot Three', 'Plot Four'), out.width='.49\\linewidth', fig.asp=1, fig.ncol = 2}

x1 <- plot + labs(title = "A nice title")
x2 <- plot + labs(caption = "A sample caption")
x3 <- plot + theme(legend.position = "none")
x4 <- plot + theme(legend.position = "top")

plot_grid_split(x1, x2, x3, x4)
``` 
```

[![在此处输入图像描述](../Images/e611a15c7c63839639754c020d34a90e.png)](https://i.stack.imgur.com/tQmD9.png)

> *   [您可以在这篇文章](https://stackoverflow.com/a/49086985/7347699)中了解有关 R 中子图的更多信息。
> *   此外，您可以查看 knitr 选项以了解有关子图的块选项的更多信息：[https ://yihui.name/knitr/options/](https://yihui.name/knitr/options/)

# php - PostgreSql 查询检查两个值

> ID：13656643
> 
> 赞同：0
> 
> 时间：2012-12-01T05:20:14.057
> 
> 标签：php, sql, database

我试图为组合框完成自动完成功能，我按照[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/forum-search.html做到了](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/forum-search.html)

**我的 php 查询：**

```
if (!$con) {
    throw new Exception("Error in connection to DB");
     }

$sql = "SELECT first_name FROM students WHERE first_name ILIKE '%$query%' ORDER BY name ASC";

$result = pg_query($con, $sql);
ORDER BY name ASC";

 while ($row = pg_fetch_array($result))
       {  
        $names[] = array('name' => $row[0]);

       }

$name_list = array();
$name_list['success']       = true;
$name_list['names']     = $names;

$name_list['totalCount']    = count( $name_list['names'] );

echo json_encode($name_list); 
```

在我的情况下，用户可以输入姓氏而不是学生的名字，因此我需要编辑查询以使其在检查名字的结果为空后检查姓氏。这是我所做但没有工作的：

```
$sql = "SELECT first_name FROM students WHERE first_name ILIKE '%$query%' ORDER BY name ASC";
$result = pg_query($con, $sql);
if(pg_num_rows($result) == 0)
$sql = "SELECT last_name FROM students WHERE last_name ILIKE '%$query%' ORDER BY name ASC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:39:55.187

请尝试以下修改：它只是 PHP 手册中的一个示例，请相应地更改查询

```
<?php
  $result=pg_query($conn, "SELECT * FROM x WHERE a=b;");
  if  (!$result) {
    echo "query did not execute";
  }
  $rs = pg_fetch_assoc($result);
  if (!$rs) {
    echo "0 records"
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T08:53:06.990

使用 OR 条件：

```
SELECT first_name, last_name
FROM students 
WHERE first_name ILIKE '%$query%'
   OR last_name ILIKE '%$query%'; 
```

您还应该阅读术语“SQL 注入”。您的代码易受攻击。

# javascript - Javascript多个计时器倒计时

> ID：13656644
> 
> 赞同：2
> 
> 时间：2012-12-01T05:20:22.033
> 
> 标签：javascript, timer

我有一个页面，它是从数据库加载的产品列表。每个产品都有一个日期字段，该字段也是从数据库中加载的。每个产品都包含在一个 div 中，并且在该 div 中还加载了一个倒数计时器脚本。与产品相关的日期用于倒计时。此日期设置为隐藏字段，其中包含脚本可以访问的 div。因此每个产品 div 基本上如下所示：

```
<div id="prod1">
<input type="hidden" value"targetdate1"/>
<script type="text/javascript" src="countdown.js"></script>
</div>

<div id="prod2">
<input type="hidden" value"targetdate2"/>
<script type="text/javascript" src="countdown.js"></script>
</div>

<div id="prod3">
<input type="hidden" value"targetdate3"/>
<script type="text/javascript" src="countdown.js"></script>
</div>

<div id="prod4">
<input type="hidden" value"targetdate4"/>
<script type="text/javascript" src="countdown.js"></script>
</div>
 ....... 
```

因此，基本上脚本将在一个页面中多次加载。并且每个脚本应该只读取它自己的 div 中包含的隐藏字段。我试图找到一种使用 jquery 选择器/javascript 的方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:48:05.270

在您的 countdown.js 中尝试以下代码：

```
document.getElementsByTagName("script")[pos].parentElement  // pos will the serial number of the script tag 
```

现在，一旦 div 被选中，您就可以对其进行处理。

# scheme - 改进 Scheme 中的衍生示例

> ID：13656647
> 
> 赞同：0
> 
> 时间：2012-12-01T05:20:59.193
> 
> 标签：scheme, racket, r5rs

我试图让一个方案导数计算器更能接受输入，从求和过程开始，最终是乘积。我一直在尝试修改程序以接受形式的输入，`(deriv '(* x y (+ x 3)) 'x)`而不是`(deriv '(* x (* y (+ x 3))) 'x)`.

我正在处理的代码是：

```
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SUM RELATED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;makes a sum structure
(define (make-sum a1 a2)
    (list '+ a1 a2))

;checks if something is a sum structure
(define (sum? x)
(and (pair? x) 
   (eq? (car x) '+)))

;get first term of sum
(define (addend s) 
(cadr s))

;get second term of sum
(define (augend s)
(caddr s)) 
```

和

```
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;PRODUCT RELATED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;make a product structure
(define (make-product m1 m2) 
(list '* m1 m2))

;checks if something is a product structure
(define (product? x)
(and (pair? x) 
   (eq? (car x) '*)))

;get first factor of product
(define (multiplier p) 
(cadr p))

;get second factor of product
(define (multiplicand p) 
(caddr p)) 
```

我试图解决这个问题，但到目前为止没有太多的运气，这是我试图在几个不同的变体中实现的：

```
;makes a sum structure
(define (make-sum a1 a2)
(if (sum? a1)
  (if (sum? a2)
      (cons '+ (append (cdr a1) (cdr a2)))
      (cons '+ (append (cdr a1) (list a2)))
      (cons '+ (append (list a1) (cdr a2)))))
    (list '+ a1 a2)) 
```

它给了我一个糟糕的语法调用。而且我可以看到我的第二个 if 似乎真的不适合 if 语句，但是我的老师给了我假设它的外观结构，所以它让我感到困惑，它不起作用，或者假设我想工作。

如果有人能帮我理解这一点，那就太好了。

到目前为止，我对 Scheme 并不感兴趣，虽然知道或理解它似乎很酷，但我的老师在过去 2 周内试图适应它，但我无法掌握它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:46:31.630

因此，在您的情况下，您有带有 3 个参数的 if 子句，而它需要 2 个参数，因此您会收到错误消息。如果你想修复你的版本，你应该使用这样的版本

```
(define (make-sum a1 a2)
(if (sum? a1)
  (if (sum? a2)
      (cons '+ (append (cdr a1) (cdr a2)))
      (cons '+ (append (cdr a1) (list a2))))
  (if (sum? a2)
      (cons '+ (append (list a1) (cdr a2)))
      (list '+ a1 a2)))) 
```

或者，如果你想要更通用的代码，你肯定会使用函数，使用可变数量的参数 - 使用语法`(define (func-name . list-of-arguments) ...)`。例如，你可以有这样的 make-sum 函数：

```
(define (make-sum . args)
  (cons '+ (apply append (map (lambda (x) (if (sum? x) (cdr x) (list x))) args)))) 
```

所以，`(make-sum 'a '(+ a b) 'b '(* a b))`会返回`'(+ a a b b (* a b))`，猜猜这就是你所期望的。

顺便说一句，你在 scp 中没有那个程序吗？如果没有，你一定要试试，这是一本学习 sheme 和一般编程的好书。[http://mitpress.mit.edu/sicp/](http://mitpress.mit.edu/sicp/)

# php - 网站根目录（使用 Xampp）

> ID：13656650
> 
> 赞同：1
> 
> 时间：2012-12-01T05:21:25.727
> 
> 标签：php

我创建了一个使用 Xampp 作为本地服务器的网站。我现在的问题是，我想每次都从根目录开始包含文件并设置链接。

我尝试了很多方法，但仍然没有人在工作。:(

已经在 config.php 中尝试过：

```
 $docRoot = dirname(__FILE__).'/mywebsite/';
 and also  $docRoot = $_SERVER["DOCUMENT_ROOT"].'/mywebsite/'; 
```

对于包含，它的工作方式如下：

但它不适用于 HTML 中的链接。

如果我尝试使用 $docRoot 之类的东西：

```
<a href="<?=$docRoot?>index.php"></a> 
```

结果：

```
C:/xampp/htdocs/mywebsite/index.php 
```

所以它不会重定向到设置的链接......

但它应该只是：localhost/mywebsite/index.php

对不起我的英语，我正在学习它。:D

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:14:26.563

您要做的是从您的文件夹中包含一个本地文件，您不必使用 URL 来执行此操作，您必须使用该文件的本地文件路径，为什么不尝试这样的事情

```
<?php
// inside a config file 
define('DS' , '/' );
define('LOCAL_DIR' , 'mysite' );
define('ROOT_PATH' , $_SERVER["DOCUMENT_ROOT"] . DS . LOCAL_DIR . DS );
define('BASEURL' , $_SERVER["HTTP_HOST"] . DS . LOCAL_DIR . DS);
?> 
```

因此，每当您想在任何其他脚本中包含文件时，您都可以使用：

```
<?php
include( ROOT_PATH . 'your_includes_directory/filename.php' );
?> 
```

每当您想打印链接时，您都可以使用以下内容：

```
<a href="<?=BASEURL;?>filename.php?var1=asd>Link to file</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:29:37.890

```
<?php $docRoot= "http://" . $_SERVER['HTTP_HOST'].  $_SERVER['REQUEST_URI'];  ?> 
```

[检查有关 $_SERVER 变量的信息](http://www.php.net/manual/en/reserved.variables.server.php)

# android - 如何使用 Intent 将表情符号和文本从 Activity 传递到下一个

> ID：13656651
> 
> 赞同：2
> 
> 时间：2012-12-01T05:21:35.187
> 
> 标签：android, android-intent, android-activity, textview, android-edittext

我想从一秒到一秒传递文本和表情符号`EditText`以`Activity`显示`Activity`它，`TextView`并且我想在秒内使用这些数据`Activity`。例如，如果用户想在第二次编辑这些数据，`Activity`那么他们就可以了。我`Intent`以这种方式简单地传递数据：

发送：

```
Intent intent = new Intent(Template.this, Data.class);
EditText editText = (EditText) findViewById(R.id.text);
String message = editText.getText().toString();
intent.putExtra("EXTRA_MESSAGE", message); 
```

获取数据

```
Intent intent = getIntent(); String message = intent.getStringExtra("EXTRA_MESSAGE");
textView.setText(message); 
```

但`TextView`它没有显示表情符号，我也不知道如何进一步使用它`Intent`。

![带有表情和文字的 EditText 屏幕截图](../Images/03c893284680febdeb8d0e4a344f036b.png)

在这方面的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:46:06.303

通过意图发送情感字符串，如 :D :) 并将其获取到另一个活动中并由 Spannable 构建。

参考[https://stackoverflow.com/a/4302199/603233](https://stackoverflow.com/a/4302199/603233)

# android - Android OpenGLES 设备问题

> ID：13656653
> 
> 赞同：4
> 
> 时间：2012-12-01T05:22:01.640
> 
> 标签：android, performance, opengl-es, live-wallpaper, framebuffer

我最近开始使用 Android 学习 OpenGLES。我正在使用带有渲染的 GLWallpaperService 类创建动态壁纸。

Android 模拟器的问题是能够显示动画，但 **在使用 Android 设备 (HTC Incredible S) 进行测试时，FPS 保持在 45-50 左右，但屏幕保持空白。**

这是代码片段！

**onDrawFrame**

```
public void onDrawFrame(GL10 gl) {
    float currLevel = curve[(MAX_CURVE_POINT_NO + curveStart - 1)
            % MAX_CURVE_POINT_NO];
    if (!isCreated) {
        isCreated = !isCreated;
        _spriteVerices = BufferFactory.createFloatBuffer(8);
        spriteTextCordinates = BufferFactory.createShortBuffer(8);
    }
    _spriteVerices.put(spriteVerices);
    spriteTextCordinates.put(spriteTextCordinatesArray);
    _spriteVerices.position(0);
    spriteTextCordinates.position(0);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glEnable(GL10.GL_BLEND);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glEnable(GL10.GL_LINE_SMOOTH);
    gl.glEnable(GL10.GL_POINT_SMOOTH);

    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glOrthof(-1.0f, 1.0f, -1.5f, 1.5f, -1.0f, 1.0f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glScalef(0.8f, 0.8f, 1.0f);
    gl.glTranslatef(-0.2f, 0, 0);

    gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gl.glEnable(GL10.GL_TEXTURE_2D);

    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, _spriteVerices);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glTexCoordPointer(2, GL10.GL_SHORT, 0, spriteTextCordinates);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glPushMatrix();
    gl.glTranslatef(1.0f, currLevel, -0.01f);
    gl.glColor4f(0.0f, 0.5f, 1.0f, 1.0f);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
    gl.glPopMatrix();

    curve[curveStart] = ekgMap[curveStart]; // ((rand()%32768)/32768.0)*0.4-0.2;
    curveStart = (curveStart + 1) % MAX_CURVE_POINT_NO;
} 
```

**onSurfaceChanged**

```
public void onSurfaceChanged(GL10 gl, int width, int height) {

            gl.glViewport(0, 0, width, height);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluPerspective(gl, 60f, (float) width / (float) height, 1f, 100f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glTranslatef(0, 0, -5);
    gl.glRotatef(30f, 1, 0, 0);

    gl.glEnable(GL10.GL_LIGHTING);
    gl.glEnable(GL10.GL_RESCALE_NORMAL);
    gl.glEnableClientState(GL10.GL_NORMAL_ARRAY);

    // Set the color of light bouncing off of surfaces to respect the
    // surface color
    gl.glEnable(GL10.GL_COLOR_MATERIAL);

    setupLightSources(gl);

    // Turn on a global ambient light. The "Cosmic Background Radiation", if
    // you will.
    float[] ambientLightRGB = { 0.3f, 0.3f, 0.3f, 1.0f };
    gl.glLightModelfv(GL10.GL_LIGHT_MODEL_AMBIENT, ambientLightRGB, 0);
} 
```

**onSurfaceCreated**

```
public void onSurfaceCreated(GL10 gl, EGLConfig config) {

    this.loadTexture(gl, mContext, R.drawable.dot);

    gl.glClearDepthf(1f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL);

    // Turn on culling, so OpenGL only draws one side of the primitives
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glFrontFace(GL10.GL_CCW);
    gl.glCullFace(GL10.GL_BACK);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glEnable(GL10.GL_BLEND);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glEnable(GL10.GL_LINE_SMOOTH);
    gl.glEnable(GL10.GL_POINT_SMOOTH);
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:05:00.643

如果您确定您正确设置了 open gl，那么更多时候问题就不是您在哪里绘制了。您可能会超出视图范围。对你的翻译等要非常小心。

你可能还需要翻转你的多边形，我知道在你直接看它之前我就遇到过这个问题，因为你的绘图背对着你。

当我这样做时，我的抽奖看起来与此非常相似

```
*  This is where you draw the screen, called every auto onDraw Loop pass
         * ************************************************************************/
        //Log.d("Game", "Render");
        gl.glViewport(0, 0, Screen.SCREEN_WIDTH, Screen.SCREEN_HEIGHT);
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrthof(0, Screen.WIDTH_SCALE, 0, Screen.HEIGHT_SCALE, 1, -1);

        //gl.gltranslatef(x,y,z) will translate everything drawn here after by that amount, effectively scrolling the view.

        gl.glEnable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

        gl.glEnable(GL10.GL_TEXTURE_2D);
        MeshRect mRect; // this holds all of our rectangles

        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        /***************** so this is how it goes for rendering any object ****************************************************
        ball.Update(deltaTime);      //first update the object
        gl.glPushMatrix();
        gl.glLoadIdentity();
            gl.glTranslate(x,y,z);
            texture.bind(gl, Texture.TEXTURE_BALL2);       //then bind the texture we would like to use
            mRect = new MeshRect(ball.getMyRect());       //then create the rectangle at (0,0,0)
            mRect.Draw(GL10.GL_TRIANGLES, gl);       //Finally tell that rectangle to draw
        gl.glPopMatrix();
        *********************************************************************************************************************** 
```

当然这是正交的，你的看起来是 3d，但基本应该差不多。

# php - 合并数组元素

> ID：13656655
> 
> 赞同：-4
> 
> 时间：2012-12-01T05:22:39.517
> 
> 标签：php, arrays

```
Array
(
[0] => Array
    (
        [id] => 1
        [name] => abc
        [email] => abc@abc.com
        [hardware_type] => keybord
    )

[1] => Array
    (
        [id] => 1
        [name] => abc
        [email] => abc@abc.com
        [hardware_type] => mouse
    )

) 
```

和需要这样的结果

```
Array
(
[0] => Array
    (
        [id] => 1
        [name] => abc
        [email] => abc@abc.com
        [hardware_type] => keybord , mouse
    )

 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:33:13.443

考虑：

```
$a; // array input 1
$b; // array input 2 
```

这是您正在寻找的功能：

```
function datFunction($a, $b) {
    $c = array(); // array output
    foreach ($a as $key => $value) {
        if (array_key_exists($key, $b) and $b[$key] != $value) {
            $c[$key] = array($value, $b[$key]);
            // or $c[$key] = "$value , {$b[$key]}";
        } else {
            $c[$key] = $value;
        }
    }
    foreach ($b as $key => $value) {
        if (!array_key_exists($key, $c)) {
            $c[$key] = $value;
        }
    }
    return $c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:56:33.453

```
$array1 = array(array
    (
        'id' => 1,
        'name' =>' abc',
        'email' => 'abc@abc.com',
        'hardware_type' => 'keybord'
    ),array
    (
        'id' => 1,
        'name' => 'abc',
        'email' => 'abc@abc.com',
        'hardware_type' => 'mouse'
    )
    ,array
    (
        'id' => 2,
        'name' => 'abc2',
        'email' => 'abc@abc.com',
        'hardware_type' => 'mouse'
    )
);

function mergarrays($array){            
        $arrayout = array();
        for($i = 0; $i < count($array); ++$i){
        foreach($array[$i] as $key => $value){
                if(array_key_exists($key,$arrayout)){
                    if( strpos($arrayout[$key],$value) == null){
                        if($arrayout[$key] != $value)
                            {
                                if(!in_array($value,explode(',',$arrayout[$key]))){
                                    $arrayout[$key] = $arrayout[$key] . ','.$value;
                                    }                           
                            }                       
                        }                   
                }else
                {
                    $arrayout[$key] = $value ;
                }
            }
        }
        return $arrayout;
        }
print_r(mergarrays($array1)); 
```

# c++ - 这个复杂的正则表达式有什么作用

> ID：13656656
> 
> 赞同：0
> 
> 时间：2012-12-01T05:23:15.150
> 
> 标签：c++, regex, boost-regex

我在工作中遇到了以下正则表达式。它有什么作用？

```
,(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\")) 
```

为了理解它，我把它分成以下几个部分

*   `,`=匹配所有有`,`

*   `(?=`= 紧随其后

*   `(?:[^\"]*\"[^\"]*\")*`= 任何不匹配的内容`"`，后跟`"`，然后是任何不匹配的内容`"`，然后是`"`。例如，1111"aaaaa"

*   `(?![^\"]*\")`= 但后面没有任何不`"`匹配的内容`"`

换句话说，匹配任何`,`后面跟着`11111"111"`OR 的东西`""`

使用上述表达式的用例，只是为了标记一个字符串，用 分隔`,`，但我假设作者是为一些更通用的东西而构建的。

谁能提供比上面更简单的解释？

上面的表达式用于将表达式分配给 boost::regex()。

更新：实际上，它正在搜索“，”逗号，具有以下约束

1.  逗号后面可以有偶数个“”

2.  但是，逗号后面不能有一个 "

例如考虑字符串：a, "h,w", 23

第一个 "," 匹配，因为它后面有偶数个 " ("h,w")

"h,w" 之间的第二个 "," 不匹配，因为第二个表达式 (?![^\"]*\") 指出 "," 后面不应跟一个 "

最后最后一个 "," 匹配。

最终输出为 2 , ,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:44:47.693

看起来它会匹配任何逗号，但前提是`"`该逗号后面有偶数个字符。

`,`- 一个逗号。

`(?=`- 其次是...

`(?:[^\"]*\"[^\"]*\")*`- 任何以`"`标记结尾并包含偶数个`"`标记的字符串，或空字符串，

`(?![^\"]*\")``"`-后面的字符串中没有其他标记。

`)`关闭`(?=`.

如果我们已经知道整个输入字符串的`"`字符总数是偶数，没有嵌套或转义引号之类的东西，并且引号之间的逗号不应被视为分隔符，这可能很有用。例如，给定输入

```
25,"Hello, world!","More text",123.45 
```

正则表达式不应匹配 Hello 和 world 之间的逗号，但应匹配其他三个逗号。

# excel - 区分excel中的重复值

> ID：13656657
> 
> 赞同：2
> 
> 时间：2012-12-01T05:23:26.660
> 
> 标签：excel, duplicates

我需要具有相同列颜色的特定值的所有重复项。这将帮助我找到特定值有多少重复项，对应的列值等。请查找 [**Sample Excel**](https://docs.google.com/spreadsheet/ccc?key=0AltIfHyzagUAdG1HaHVyVGtFMFh5am4xUmJWa3NzUlE#gid=0)。如果我进行条件格式，突出显示重复项，这将为所有重复项提供相同的颜色，而不管值如何。这不会解决目的。如果有的话，还建议在 excel 中区分重复值的其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:12:44.427

没有办法用条件格式做你想做的事，但我认为下面的宏会做你想做的事。它构建了一个唯一值的字典，并为每个值分配一个随机颜色，然后匹配并重复用于任何重复项。

```
' Base function that can be used for different columns.
Sub colorDistinctInColumn(ByVal columnLetter As String)
    Dim lastRow As Integer
    Dim i As Integer
    Dim dict
    Dim currentCell As Range
    Dim columnNumber As Integer

    ' Create a dictionary to hold the value/colour pairs
    Set dict = CreateObject("Scripting.Dictionary")

    ' Find the last-used cell in the column of interest
    lastRow = ActiveSheet.Columns(columnLetter).Cells.Find( _
        "*", _
        SearchOrder:=xlByRows, _
        LookIn:=xlValues, _
        SearchDirection:=xlPrevious).Row

    ' Pick columnNumber using the given column letter
    columnNumber = ActiveSheet.Columns(columnLetter).Column

    ' Loop through all of the cells
    For i = 1 To lastRow
        Set currentCell = ActiveSheet.Cells(i, columnNumber)

        ' See if we've already come across the current value
        If Not dict.exists(currentCell.Value) Then

            ' This value has not been encountered yet,
            ' so store it and assign a random colour
            dict.Add currentCell.Value, RGB(Rnd * 255, Rnd * 255, Rnd * 255)
        End If

        ' Set the colour of the current cell to whichever colour
        ' has been stored for the current cell's value
        currentCell.Interior.Color = dict(currentCell.Value)
    Next i

    Set dict = Nothing
End Sub

' Actual Macro that will run in Excel
Sub colorDistinctInColumnA()
    Call colorDistinctInColumn("A")
End Sub 
```

# java - 无法找出这个简单 Java 代码中的错误

> ID：13656660
> 
> 赞同：2
> 
> 时间：2012-12-01T05:23:48.860
> 
> 标签：java

```
public class Test {
    class Foo {
        int frob() {
            return 7;
        }
    }

    class Bar extends Foo {
        @Override
        int frob() {
            return 8;
        }
    }

    class Baz extends Foo {
        @Override
        int frob() {
            return 9;
        }
    }

    public static int quux(Bar b) {
        return b.frob();
    }

    public static void main(String[] args) {
        System.out.println(quux(new Bar()));//this line gives non-static variable this cannot be referenced from a static context
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:27:40.587

您可以通过将嵌套类声明为*static*或通过在*Test*实例的上下文中实例化*Bar*来解决此问题。

 *它失败是因为（非静态）*Bar*必须在现有*Test*类实例的上下文中实例化；由于*main*是静态的，因此没有这样的野兽。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T05:28:42.073

```
public static void main(String[] args) {
    Test test = new Test();
    System.out.println(quux(test.new Bar()));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T05:39:29.930

非静态内部类具有对封闭类实例的隐藏引用。这意味着您必须有一个封闭类的实例才能创建内部类。您还必须使用一个特殊的“新”函数来正确初始化对封闭类的隐藏引用。例如，

```
 class Outer{   
        class Inner{
           public Inner() {
               System.out.println("Hello there.");
           }
        }

        public static void main(String args[]) {
            Outer o = new Outer();     
            Outer.Inner i = o.new Inner();
        }
    } 
```*

# asp.net - 在 sql 中存储大文本并在 asp .net 页面中显示

> ID：13656664
> 
> 赞同：0
> 
> 时间：2012-12-01T05:24:45.663
> 
> 标签：asp.net, sql-server

我想在 Sql Server 中存储大约 50000 个字符或更多字符的文本描述。我在我的应用程序中使用 FCK 编辑器和 3 层架构。然后我想检索该数据并显示应用程序中的所有文本。如果描述很大，则可以按页面显示。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:30:17.270

`varchar(max)`可以在您的限制范围内存储 2,147,483,647 个字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:36:58.460

您可以使用文本数据类型，

TEXT 用于大段字符串数据。

文字很好：

```
If you need to store large texts in your database
If you do not search on the value of the column
If you select this column rarely and do not join on it. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T05:37:20.683

如果您使用 sql server 2005 或 2008 作为数据库，请尝试使用**文本数据类型**。因为文本数据类型用于存储无限的字符串数据。**据我所知**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T09:38:25.910

您可以将其存储在多行中，而不是将整个数据存储为单个记录。保留列以标识表中的文件和行顺序。

```
 Create table Textfiledata
    (
    File_ID Numeric(10,0),
    File_Data Varchar(8000),
    Order Numeric(10,0),
    )

insert into Textfiledata(1,"some text",0);
insert into Textfiledata(1,"some text",1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T05:27:38.967

您可以选择数据类型 nvarchar(max)

# php - PHP：使用变量来保存表名，并在查询中使用该变量

> ID：13656667
> 
> 赞同：7
> 
> 时间：2012-12-01T05:25:13.767
> 
> 标签：php, mysql, database, variables

我目前正在学习 PHP，并且正在编写注册表单。在我的代码的某个地方，我有这些语句

```
$query = "SELECT `stud_no` FROM `tb_registered_users` WHERE `stud_no`='$studno'"; 
```

和

```
$query = "INSERT INTO `tb_registered_users`
VALUES ('".$studno."','".$firstname."','".$lastname."')"; 
```

但是我想声明这个变量并在上面提到的查询中使用它

```
$mysql_tb = 'tb_registered_users'; 
```

那么正确的语法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T05:31:49.623

```
<?php
$mysql_tb = 'tb_registered_users';
$query = "SELECT `stud_no` FROM `{$mysql_tb}` WHERE `stud_no`='$studno'";
$query = "INSERT INTO `{$mysql_tb}` VALUES ('".$studno."','".$firstname."','".$lastname."')"; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-01T05:26:34.927

```
$query = "INSERT INTO `" . $mysql_tb . "`
VALUES ('".$studno."','".$firstname."','".$lastname."')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T05:26:45.270

```
$mysql_tb = 'tb_registered_users';

$query = "SELECT `stud_no` FROM `".$mysql_tb."` WHERE `stud_no`='$studno'"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T05:27:32.980

你可以这样做

```
$query = "SELECT `stud_no` FROM " . $mysql_tb . " WHERE `stud_no`='$studno'"; 
```

但我建议查看 PDO（[http://www.php.net/manual/en/book.pdo.php](http://www.php.net/manual/en/book.pdo.php) && [http://net.tutsplus.com/tutorials/php/why-you-should-be-使用-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-01T05:30:15.693

```
$query = "SELECT `stud_no` FROM `".$mysql_tb."` WHERE `stud_no`='$studno'"; 
```

和

```
$query = "INSERT INTO `".$mysql_tb."` VALUES ('".$studno."','".$firstname."','".$lastname."')"; 
```

您可能还想考虑使用类似[PDO](http://www.php.net/manual/en/pdo.prepare.php)的东西，它允许您使用命名参数并避免 SQL 注入。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-11T20:51:37.297

如果使用双引号，也对我有用：

```
$newDataInput = "INSERT INTO $mysql_tb (Date,Time) VALUES ('$date','$time')"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-26T10:52:06.553

顺便说一句，你也可以使用 sprintf 函数来做同样的事情，如下所示

(PHP 4, PHP 5, PHP 7) sprintf — 返回一个格式化的字符串

```
$mysql_tb = 'tb_registered_users';
$query1 = sprintf("SELECT `stud_no` FROM `%s` WHERE `stud_no`='$studno'",$mysql_tb);
$query2 = sprintf("INSERT INTO `%s` VALUES ('".$studno."','".$firstname."','".$lastname."')",$mysql_tb); 
```

只需将 %s 放在要替换值的位置，然后使用第二个参数作为变量，如此处所示。它与 c 语言和 c++ 中的函数一样工作。您也可以用多个参数替换多个值。这是php手册帮助

[https://www.php.net/manual/en/function.sprintf.php](https://www.php.net/manual/en/function.sprintf.php) 希望有帮助

# wordpress - 在 WooCommerce 的结帐页面中在哪里更改条款和条件？

> ID：13656669
> 
> 赞同：0
> 
> 时间：2012-12-01T05:25:35.457
> 
> 标签：wordpress, woocommerce

我目前正在使用 Mystile 主题，并且想知道哪个文件可以让我更改条款和条件的内容。它目前只是一个指向主页的链接。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:16:29.047

只需创建一个页面，例如“术语”，在此处填写您的术语。

然后，从 Woocommerce 菜单 -> 设置 -> 页面 -> 术语页面 ID，选择您之前创建的“术语”页面。

# mysql - 优化 MySQL 查询以高效执行更大的搜索

> ID：13656671
> 
> 赞同：1
> 
> 时间：2012-12-01T05:25:56.487
> 
> 标签：mysql

我有一个查询，可以让用户按尺寸搜索鞋子数据库。他们可以选择多种尺码以及鞋子当前是否有货。

对于没有太多尺寸/产品返回/选择的较小搜索，该查询运行正常。但是，当我同时搜索多个尺寸时，查询需要更长的时间——而且很多时候它会导致服务器崩溃。

```
SELECT DISTINCT `#__{vm}_product`.`product_id`, `product_name`, `products_per_row`,
`category_browsepage`, `category_flypage`, `#__{vm}_category`.`category_id`,
`product_full_image`, `product_thumb_image`, `product_s_desc`, `product_parent_id`, 
`product_publish`, `product_in_stock`, `product_sku`, `product_url`, `product_weight`,
`product_weight_uom`, `product_length`, `product_width`, `product_height`, 
`product_lwh_uom`, `product_available_date`, `product_availability`, `#__{vm}_product`.`mdate`,
 `#__{vm} _product`.`cdate`, `#__{vm}_product_attribute`.`attribute_name`, 
`#__{vm}_product_attribute`.`attribute_value`, 
`#__{vm}_product_attribute`.`product_id` 

FROM (`#__{vm}_product`, `#__{vm}_category`, `#__{vm}_product_category_xref`,
`#__{vm}_shopper_group`) 

RIGHT JOIN `#__{vm}_product_attribute` ON `#__{vm}_product`.`product_id` = 
`#__{vm_product_attribute`.`product_id` 
WHERE (`#__{vm}_product_category_xref`.`product_id`=`#__{vm}_product`.`product_id` OR
`#__{vm}product_category_xref`.`product_id`=`#__{vm}_product`.`product_parent_id`) AND ((`#__{vm}_product_attribute`.`attribute_name` = 'Size') AND ((`#__{vm}_product_attribute`.`attribute_value` = '5'))) AND `#__{vm}_product_category_xref`.`category_id`=40 AND `product_publish`='Y' 

GROUP BY `#__{vm}_product`.`product_sku` 
ORDER BY CONVERT(`#__{vm}_product_attribute`.`attribute_value`, SIGNED INTEGER) 
LIMIT 0, 999 
```

输出将显示前 24 个结果。

我相信应该有一种方法可以使查询在查询多个大小的情况下花费的时间不那么长。任何提示将不胜感激。谢谢！

# iphone - 在 iOS6 中使用 JSON

> ID：13656680
> 
> 赞同：2
> 
> 时间：2012-12-01T05:27:13.307
> 
> 标签：iphone, ios, ios6, json

我在以前的 iOS 版本中使用过 JSONKit 库。iOS6 中 JSONKit 的问题是大多数方法已被弃用，并且在编译时收到警告。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:32:12.680

使用本机[NSJONSerialization 类](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html "NSJON序列化类")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T11:25:09.163

我有另一个相同的解决方案......

以下链接包含：

*   JSONKit.h
*   JSONKit.m

[ios-funda.blogspot.in/2012/11/working-with-json-in-ios6.html](http://ios-funda.blogspot.in/2012/11/working-with-json-in-ios6.html)

这个 JSONKit 类适用于 iOS6..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T16:13:41.877

对于任何感兴趣的人，这里有一个带有 iOS6 修复（和 Podspec 文件）的 repo。[https://github.com/JoistApp/JSONKit](https://github.com/JoistApp/JSONKit)

# java - 为什么 System.err 在 Eclipse 中比 System.out 慢？

> ID：13656681
> 
> 赞同：4
> 
> 时间：2012-12-01T05:27:21.400
> 
> 标签：java, eclipse, stderr, stdio

> **可能重复：**
> [Java：System.out.println 和 System.err.println 乱序](https://stackoverflow.com/questions/1883321/java-system-out-println-and-system-err-println-out-of-order)

为什么这个代码

```
 System.err.println("err");
    System.out.println("out"); 
```

印刷

```
out
err 
```

在 Eclipse 控制台上？

更新

如果我从命令行运行相同的代码，它会以正确的顺序打印。

更新

如果我将其修复为

```
 System.err.println("err");
    Thread.sleep(5);
    System.out.println("out"); 
```

它也在 Eclipse 中正确打印

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:28:46.503

它并不慢；他们只是不一定按顺序[冲洗](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#flush%28%29)。但是，您可以解决此问题：

```
System.err.println("err");
System.err.flush();
System.out.println("out"); 
```

* * *

好的，这似乎是一个已知的 Eclipse 错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=32205](https://bugs.eclipse.org/bugs/show_bug.cgi?id=32205)

# android - 如何在公开发布之前将 android 应用程序提交给客户进行审核？

> ID：13656684
> 
> 赞同：-1
> 
> 时间：2012-12-01T05:27:38.950
> 
> 标签：android

我无法将我的 android 应用程序放到应用商店。我需要一种将我的应用程序私下发送给客户的方法。请建议我一些方法来做到这一点。它很重要。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:30:05.210

您可以通过电子邮件向他发送 apk 或将其上传到任何站点。您的客户端将需要下载 apk 并手动安装。

# windows-8 - 启用/禁用 Microsoft 虚拟 WiFi 微型端口

> ID：13656694
> 
> 赞同：27
> 
> 时间：2012-12-01T05:28:54.757
> 
> 标签：windows-8, wifi

我禁用了我的`Microsoft Virtual WiFi Miniport`网络适配器`Control Panel\Network and Internet\Network Connections`。

只需右键单击微型端口网卡并单击禁用，它就消失了。现在我该如何启用它？禁用网卡后，`netsh wlan start hostednetwork`不再工作。回应是，

`The hosted network couldn't be started. The group or resource is not in the correct state to perform the requested operation.`

在我禁用适配器之前，它工作得很好，无论如何，这里的输出是 `netsh wlan show drivers,`

`Interface name: Wi-Fi`

```
Driver                    : Qualcomm Atheros AR9285 Wireless Network Adapter
Vendor                    : Qualcomm Atheros Communications Inc.
Provider                  : Microsoft
Date                      : 7/3/2012
Version                   : 3.0.0.130
INF file                  : C:\Windows\INF\netathrx.inf
Files                     : 2 total
                            C:\Windows\system32\DRIVERS\athrx.sys
                            C:\Windows\system32\drivers\vwifibus.sys
Type                      : Native Wi-Fi Driver
Radio types supported     : 802.11b 802.11g 802.11n
FIPS 140-2 mode supported : Yes
802.11w Management Frame Protection supported : Yes
Hosted network supported  : Yes
Authentication and cipher supported in infrastructure mode:
                            Open            None
                            Open            WEP-40bit
                            Open            WEP-104bit
                            Open            WEP
                            WPA-Enterprise  TKIP
                            WPA-Personal    TKIP
                            WPA2-Enterprise TKIP
                            WPA2-Personal   TKIP
                            Vendor defined  TKIP
                            WPA2-Enterprise Vendor defined
                            Vendor defined  Vendor defined
                            WPA-Enterprise  CCMP
                            WPA-Personal    CCMP
                            WPA2-Enterprise CCMP
                            Vendor defined  CCMP
                            WPA2-Enterprise Vendor defined
                            Vendor defined  Vendor defined
                            WPA2-Personal   CCMP
                            Vendor defined  Vendor defined
Authentication and cipher supported in ad-hoc mode:
                            Open            None
                            Open            WEP-40bit
                            Open            WEP-104bit
                            Open            WEP
                            WPA2-Personal   CCMP
                            Vendor defined  Vendor defined 
```

`netsh wlan show hostednetwork,`

## 托管网络设置

```
Mode                   : Allowed
SSID name              : "aczire"
Max number of clients  : 100
Authentication         : WPA2-Personal
Cipher                 : CCMP 
```

## 托管网络状态

```
Status                 : Not available 
```

执行后，

`netsh wlan set hostednetwork mode=allow`

`The hosted network mode has been set to allow.`

但再次进入，

`netsh wlan show hostednetwork`

## 托管网络设置

```
Mode                   : Allowed
SSID name              : "aczire"
Max number of clients  : 100
Authentication         : WPA2-Personal
Cipher                 : CCMP 
```

## 托管网络状态

```
Status                 : Not available 
```

`netsh wlan show settings`

## 无线局域网设置

```
Show blocked networks in visible network list: No
Only use GP profiles on GP-configured networks: No
Hosted network mode allowed in WLAN service: Yes
Allow shared user credentials for network authentication: Yes
Block period: Not Configured.
Auto configuration logic is enabled on interface "Wi-Fi" 
```

知道如何重新启用 Microsoft Virtual WiFi Miniport 适配器（在 Windows 8 Pro RTM 中）？我无能为力，请帮助:(

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-03T07:27:37.917

你去你的“设备管理器”，找到你的“网络适配器”，然后应该找到虚拟wifi适配器，然后右键单击它并启用它。之后，您以管理员权限启动 cmd，然后尝试：

```
netsh wlan start hostednetwork 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-25T01:06:44.897

从接受的答案：

> 你去你的“设备管理器”，找到你的“网络适配器”，然后应该找到虚拟wifi适配器，然后右键单击它并启用它

也许您的设备被隐藏了 - 首先您应该从设备管理器中取消隐藏它，然后从设备管理器工具中重新启用适配器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T03:56:33.883

我遇到了确切的问题，在网络连接或设备管理器中找不到托管的网络适配器。所以我所做的是禁用和启用 wifi 适配器，之后托管的网络适配器应该列在设备管理器中，然后你只需从那里启用适配器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T10:42:04.383

在网络设置中禁用适配器后，我遇到了同样的问题。但是当我转到系统->设备管理器并从“网络适配器”中找到它并重新启用它时。然后一切都恢复正常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-30T23:55:49.713

在我的情况下，我必须卸载并重新安装无线适配器驱动程序才能执行命令

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-06T11:21:43.303

在设备管理器中，您可以选择查看 > 显示隐藏的设备

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T19:42:32.767

`Microsoft Virtual WiFi Miniport`应该自动启动并绑定到底层功能驱动程序。尝试禁用并重新启用`AR9285`驱动程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-06T12:26:44.107

尝试添加此修补程序：hotfixv4.microsoft.com/Windows%207/Windows%20Server2008%20R2%20SP1/sp2/Fix362872/7600/free/427221_intl_i386_zip.exe

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-27T01:33:56.537

[http://www.instructables.com/id/How-to-Set-Up-a-Wireless-Hotspot-Windows-7/step1/Step-1-Enabling-the-Microsoft-Virtual-WiFi-Minipor/](http://www.instructables.com/id/How-to-Set-Up-a-Wireless-Hotspot-Windows-7/step1/Step-1-Enabling-the-Microsoft-Virtual-WiFi-Minipor/)

然后在命令提示符（ADMIN）中执行

> netsh wlan 启动托管网络

# iframe - iframe 文本输入不起作用

> ID：13656696
> 
> 赞同：2
> 
> 时间：2012-12-01T05:29:19.993
> 
> 标签：iframe, cordova, zooming, textinput

我已经使用 iFrame 将网站加载到我的 phonegap 应用程序中。

```
 <iframe id="divIFrame" src="https://mysite" border="0"></iframe> 
```

我使用下面的 css 来设置 iFrame 内容的缩放级别

```
 #divIFrame {
           -moz-transform: scale(0.45, 1.00);
            -webkit-transform: scale(0.45, 1.00);
            -o-transform: scale(0.45, 1.00);
            -ms-transform: scale(0.45,1.00);
            transform: scale(0.45, 1.00);
            -moz-transform-origin: top left;
            -webkit-transform-origin: top left;
            -o-transform-origin: top left;
            -ms-transform-origin: top left;
            transform-origin: top left;
            border: solid #ccc 10px;
        } 
```

将样式包含到我的 iframe 后，我无法在 iframe 内容（mysite）的文本框中输入值。文本框、单选按钮在加载到 iFrame 的 mysite 中不起作用。

当我删除缩放 css 上方时，文本框工作正常。如何解决这个问题？请帮我..

# ruby-on-rails - 运行 Hallon (libspotify) 示例时遇到问题

> ID：13656697
> 
> 赞同：0
> 
> 时间：2012-12-01T05:29:21.493
> 
> 标签：ruby-on-rails, ruby, rubygems, spotify

我正在尝试运行 Hallon gem [https://github.com/Burgestrand/Hallon提供的示例](https://github.com/Burgestrand/Hallon)

我遵循了所有这些说明： [https ://github.com/Burgestrand/Hallon/wiki](https://github.com/Burgestrand/Hallon/wiki)

但是，我仍然有一个问题。下面是我得到的错误。任何帮助将不胜感激！

> Basils-MacBook-Pro:Hallon Basil$ ruby​​ examples/show_published_playlists_of_user.rb /Users/Basil/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36 :in `require': cannot load such file -- weak_observable (LoadError) from /Users/Basil/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in`require' 来自 /Users/Basil/Desktop/Hallon/lib/hallon.rb:6:in `<top (required)>' from /Users/Basil/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in`require' 来自 /Users/Basil/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/ 1.9.1/rubygems/custom_require.rb:36:in `require' from /Users/Basil/Desktop/Hallon/examples/example_support.rb:46:in`'来自示例/show_published_playlists_of_user.rb:4:in `require_relative' from examples/show_published_playlists_of_user.rb:4:in`'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:58:17.780

错误消息包含答案：

```
require': cannot load such file -- weak_observable (LoadError) 
```

这意味着这应该可以解决您的问题：

```
gem install weak_observable 
```

# r - 使用 RStudio 更新 R

> ID：13656699
> 
> 赞同：304
> 
> 时间：2012-12-01T05:29:34.787
> 
> 标签：r, rstudio

如何通过 RStudio 更新 R？

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2013-07-12T23:15:36.560

为了完整起见，答案是：您不能在 RStudio 中执行此操作。@agstudy 说得对——您需要安装较新版本的 R，然后重新启动 RStudio，它会自动使用新版本，正如 @Brandon 指出的那样。

如果有一个类似于 install.packages() 函数或 update.packages(function) 的 update.R() 函数，那就太好了。

## 所以，为了安装 R，

1.  去[http://www.r-project.org](http://www.r-project.org)，
2.  点击“CRAN”，
3.  然后选择您喜欢的 CRAN 站点。我喜欢堪萨斯州：[http](http://rweb.quant.ku.edu/cran/) ://rweb.quant.ku.edu/cran/ 。
4.  单击“为 XXX 下载 R”[其中 XXX 是您的操作系统]
5.  遵循适用于您的操作系统的安装过程
6.  重启 RStudio
7.  麾

## --等等-我心爱的包裹呢？？--

好的，我使用的是 Mac，所以我只能提供 Mac 的准确详细信息——也许其他人可以提供 windows/linux 的准确路径；我相信这个过程会是一样的。

为确保您的软件包与您闪亮的新版本 R 一起使用，您需要：

1.  将旧 R 安装中的软件包移动到新版本中；在 Mac OSX 上，这意味着从这里移动所有文件夹：

    ```
    /Library/Frameworks/R.framework/Versions/2.15/Resources/library 
    ```

    到这里：

    ```
    /Library/Frameworks/R.framework/Versions/3.0/Resources/library 
    ```

    [您将在其中将“2.15”和“3.0”替换为您要升级的任何版本。**并且**只复制目标目录中还没有的任何包。即不要用你的旧包覆盖你的新“基础”包——如果你这样做了，别担心，无论如何我们会在下一步修复它。如果这些路径不适合您，请尝试使用`installed.packages()` 来查找正确的路径名。]

2.  现在您可以通过`update.packages()`在您的 RStudio 控制台中输入并在所有提示中回答“y”来更新您的包。

    ```
    > update.packages(checkBuilt=TRUE)
    class :
     Version 7.3-7 installed in /Library/Frameworks/R.framework/Versions/3.0/Resources/library 
     Version 7.3-8 available at http://cran.rstudio.com
    Update (y/N/c)?  y
    ---etc--- 
    ```

3.  最后，为了让自己确信你已经完成了一切，在 RStudio 控制台中输入这两个命令，看看你得到了什么：

    ```
    > version
    > packageStatus() 
    ```

* * *

## 回答 #2

> 赞同：149
> 
> 时间：2012-12-01T05:43:38.497

[您从官方网站](https://cran.r-project.org/)安装新版本的R。

当您重新启动 RStudio 时，它应该会自动以新版本启动。

如果您需要手动执行此操作，请在 RStudio 中转到：工具 -> 选项 -> 常规。

查看[@micstr 的答案](https://stackoverflow.com/questions/13656699/update-r-using-rstudio/17625368#17625368)以获得更详细的演练。

* * *

## 回答 #3

> 赞同：117
> 
> 时间：2013-12-01T15:17:47.930

如果您使用的是 windows，则可以使用[installr](http://cran.r-project.org/web/packages/installr/index.html)。[此处的](http://www.r-statistics.com/2013/03/updating-r-from-r-on-windows-using-the-installr-package/)示例用法

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2015-03-14T14:36:37.777

我建议使用 Windows 软件包安装程序[来](http://cran.r-project.org/web/packages/installr/installr.pdf)完成此操作。该软件包不仅会更新您的 R 版本，还会复制和更新您的所有软件包。[这里](http://www.r-statistics.com/2013/03/updating-r-from-r-on-windows-using-the-installr-package/)有一个关于这个主题的博客。只需在 R Studio 中运行以下命令并按照提示操作：

```
# installing/loading the package:
if(!require(installr)) {
install.packages("installr"); require(installr)} #load / install+load installr

# using the package:
updateR() # this will start the updating process of your R installation.  It will check for newer versions, and if one is available, will guide you through the decisions you'd need to make. 
```

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2016-07-27T17:07:32.717

如果您使用的是**Mac 电脑**，您可以使用新的[updateR](https://github.com/AndreaCirilloAC/updateR)包从 RStudio 更新 R 版本：[http ://www.andreacirillo.com/2018/02/10/updater-package-update-r-version-带有-a-function-on-mac-osx/](http://www.andreacirillo.com/2018/02/10/updater-package-update-r-version-with-a-function-on-mac-osx/)

总之，您需要执行以下操作：

> 要使用 updateR 从 Rstudio 中更新您的 R 版本，您只需运行以下**五行代码**：
> 
> ```
> install.packages('devtools') #assuming it is not already installed
> library(devtools)
> install_github('andreacirilloac/updateR')
> library(updateR)
> updateR(admin_password = 'Admin user password') 
> ```
> 
> 在安装过程结束时，一条消息将向您确认快乐的结局：
> 
> ```
> everything went smoothly
> open a Terminal session and run 'R' to assert that latest version was installed 
> ```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-10-17T22:38:30.213

将其粘贴到控制台并运行命令：

```
## How to update R in RStudio using installr package (for Windows)
## paste this into the console and run the commands
## "The updateR() command performs the following: finding the latest R version, downloading it, running the installer, deleting the installation file, copy and updating old packages to the new R installation."
## more info here: https://cran.r-project.org/web/packages/installr/index.html

install.packages("installr")
library(installr)
updateR()

## Watch for small pop up windows. There will be many questions and they don't always pop to the front. 
## Note: It warns that it might work better in Rgui but I did it in Rstudio and it worked just fine. 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-01-21T06:21:18.710

有一个名为**installr**的新软件包可以在 Windows 平台上的 R 中更新您的 R 版本。该软件包是在 3.2.3 版本下构建的

在 R Studio 中，单击*Tools*并选择*Install Packages...，*然后键入名称“installr”并单击 install。或者，您可以在控制台中键入*install.packages("installr")*。

一旦 R studio 完成安装包，通过在控制台中输入*require(installr)来加载它。*

要启动 R 安装的更新过程，请键入*updateR()*。此功能将检查 R 的较新版本，如果可用，它将指导您做出需要做出的决定。如果您的 R 安装是最新的，它将返回 FALSE。

如果您选择下载并安装更新的版本。有一个选项可以将所有包从当前的 R 安装复制/移动到较新的 R 安装，这非常方便。

更新过程结束后退出并重新启动 R Studio。R Studio 将加载较新的 R 版本。

*[如果您想了解有关如何使用**安装程序包**](http://www.r-statistics.com/2013/03/updating-r-from-r-on-windows-using-the-installr-package/)的更多信息，请点击此链接。*

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-04-18T16:21:52.027

只需在安装新版本的 R 后重新启动 R Studio。要确认您使用的是新版本，>version，您应该会看到新的详细信息。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-11-10T19:44:43.683

不要使用 Rstudio 来更新 R。Rstudio 不是 R，Rstudio 只是一个 IDE。这个答案是对不同操作系统的先前答案的总结。对于所有操作系统，提前查看您已[在此处](https://stackoverflow.com/questions/1401904/painless-way-to-install-a-new-version-of-r/22989094#22989094)安装的软件包会发生什么是很方便的。

WINDOWS ->> 以管理员身份打开 CMD/Powershell 并输入“R”进入交互模式。如果这不起作用，请搜索并运行 RGui.exe 而不是在控制台中编写 R ...然后：

```
lib_path <- gsub( "/", "\\\\" , Sys.getenv("R_LIBS_USER"))
install.packages("installr", lib = lib_path)
install.packages("stringr", lib_path)
library(stringr, lib.loc = lib_path)
library(installr, lib.loc = lib_path)
installr::updateR() 
```

MacOS ->> 您可以使用[updateR](https://github.com/AndreaCirilloAC/updateR)包。该软件包不在 CRAN 上，因此您需要在 Rgui 中运行以下代码：

```
install.packages("devtools")
devtools::install_github("AndreaCirilloAC/updateR")
updateR(admin_password = "PASSWORD") # Where "PASSWORD" stands for your system password 
```

请注意，计划在不久的将来[合并updateR 和 installR 以同时适用于 Mac 和 Windows。](https://www.r-statistics.com/2018/04/r-3-5-0-is-released-major-release-with-many-new-features/#more-61502)

Linux ->> For the moment `installr` is NOT available for Linux/MacOS (see documentation for current [version 0.20](https://www.rdocumentation.org/packages/installr/versions/0.20.0)). As R is installed, you can follow these [instructions](https://stackoverflow.com/questions/46214061/how-to-upgrade-r-in-linux) (in Ubuntu, although the idea is the same in other distros: add the source, update and upgrade and install.)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-15T16:54:12.650

我发现对我来说，在 Linux 下保持最新的最佳永久解决方案是安装 R 补丁项目。这将使您的 R 安装保持最新，并且您甚至不需要在安装之间移动您的包（这在 RyanStochastic 的回答中有描述）。

对于 openSUSE，请参阅[此处的说明](http://cran.r-project.org/bin/linux/suse/README.html)。

# c - 分别通过 TCP 套接字发送和接收字符串

> ID：13656702
> 
> 赞同：4
> 
> 时间：2012-12-01T05:29:56.160
> 
> 标签：c, sockets, tcp

我有一个 TCP 服务器和客户端，有一个已建立的套接字。假设我有以下情况：

服务器：

```
char *fn = "John";
char *ln = "Doe";

char buffer[512];

strcpy(buffer, fn);
send(*socket, buffer, strlen(buffer), 0);
strcpy(buffer, ln);
send(*socket, buffer, strlen(buffer), 0); 
```

客户：

```
char *fn;
char *ln;

char buffer[512];

bytes = recv(*socket, buffer, sizeof(buffer), 0);
buffer[bytes] = '\0';
strcpy(fn, buffer);

bytes = recv(*socket, buffer, sizeof(buffer), 0);
buffer[bytes] = '\0';
strcpy(ln, buffer);

printf("%s", fn); 
printf("%s", ln); 
```

预期结果：我想分别接收每个字符串（因为我将它们保存在不同的变量中），而不是第一个 recv() 获得 fn "John" 和 ln "Doe" 连接的 "JohnDoe"，程序卡住了第二个 recv()... 因为我已经完成了发送。

我尝试了以下方法： - 将 \0 添加到 fn 和 ln 字符串，如下所示：

```
char *fn = "John\0";
char *ln = "Doe\0"; 
```

但问题依然存在。

我可以施加某种条件，以便单独接收每个字符串吗？

编辑以添加更多问题：

1）为什么在某些情况下实际上是分开发送的，而其他情况下是联合发送的？

2）我应该 send() 和 recv() 交替吗？在我的代码的其他一些部分，它似乎是自我调节的，并且只在正确的时间接收正确的字符串，而无需我检查。这行得通吗？

3）关于发送一个带有我即将发送的字符串长度的标题，我如何解析传入的字符串以知道在哪里拆分？任何例子都会很棒。

4）我一定会检查我是否得到比我的缓冲区更大的东西，谢谢你指出它。

编辑2：

5) 因为我总是把东西放在大小为 512 的缓冲区字符数组中。即使我发送 1 个字母的字符串，每个发送操作是否不应该占用缓冲区的全部大小？这就是令人困惑的地方。我有“John”，但我将它放在一个大小为 512 的数组中并发送它，这不应该填满发送缓冲区，因此 recv() 函数还通过拉取整个数组大小来清空网络缓冲区512？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T05:39:52.877

首先，当客户端调用 时`recv(*socket, buffer, sizeof(buffer), 0);`，它将从网络接收*最多*sizeof(buffer) 个字符（此处为 512）。`send`这是来自网络缓冲区，与服务器上调用 了多少次无关。`recv`不寻找`\0`或任何其他字符 - 它是从网络缓冲区中提取的二进制文件。它将读取整个网络缓冲区或`sizeof(buffer)`字符。

您需要先签入`recv`以查看它是否同时具有名字和姓氏并适当地处理它。

您可以通过让服务器将字符串的长度作为流的前几个字节（“标头”）发送，或者通过扫描接收到的数据来查看是否有两个字符串来做到这一点。

您确实需要在每次调用时执行检查`recv`- 如果字符串长于 512 字节怎么办？然后你需要`recv`多次调用 s 来获取字符串。如果你得到第一个字符串，而第二个字符串只有一半怎么办？通常这两种情况只在处理大量数据时发生，但我以前在我自己的代码中看到过这种情况，所以`recv`即使在处理像这样的小字符串时，最好也加入良好的检查。如果您尽早练习良好的编码策略，那么您以后就不会那么头疼了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T05:39:41.300

正确的做法是用标头将发送的数据括起来。因此，您将传递消息的大小，包括消息的大小，然后在另一端您可以计算出消息的长度。

John 是 4 个字符，所以你有长度，比如“0004John”，那么你就会知道什么时候停止阅读。您可能还想在标题中添加一个命令，这很常见。例如，名字可能是 1，而名字可能是 2；

例如，“01004JOHN”将在缓冲区中设置并发送。

为此，您将项目添加到缓冲区，然后将缓冲区中的插入点增加您添加的值的大小。您可以使用它向缓冲区添加许多部分。*请确保您没有超出缓冲区的大小。

记住我给出的这些例子是不正确的，因为你没有传递数字的字符串表示，只是数字，所以它将是一个 long int 1、long int 4 然后是 chars 或 unicode，无论哪种方式，4 个字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T05:43:00.617

TCP是面向流的，而不是面向数据报的。如果是后者，你的东西会很好用。您有以下选择：

*   使用[SCTP](http://en.wikipedia.org/wiki/SCTP)
*   如果您能承受失去可靠性，请使用 UDP
*   以您可以使用的方式分隔字符串，方法是预先添加一个长度标记或添加一个`NUL`字节来终止每个字符串。

对于后者，您只需要`send(*socket, buffer, strlen(buffer)+1, 0);`包含`NUL`which is here，发送者将反复`recv()`查找字符串终止符，直到找到 2 个字符串。

请注意，您应该注意`strcpy()`: 只有在您绝对确定要写入的字符串正常时才使用它。

您的接收器可以

```
bytes = recv(*socket, buffer, sizeof(buffer), 0);
buffer[bytes] = '\0'; 
```

这很糟糕，因为如果缓冲区已满，那么`bytes == sizeof(buffer)`（在更复杂的情况下可能会发生）`buffer[bytes] = '\0'`写入缓冲区之外。所以使用

```
bytes = recv(*socket, buffer, sizeof(buffer) - 1, 0); 
```

你可以愉快地做

```
buffer[bytes] = '\0'; 
```

.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T02:32:36.663

而不是 sizeof(buffer) 使用 strlen(fn); 所以它只会传输确切数量的字节..如果您需要空终止符一起使用 strlen(fn)+1 但不要忘记将空终止符与 strcat() 连接

此外，如果您发送所有缓冲区大小而不使用 memset 清理，您也会有垃圾，所以要小心..

# url - web.xml 中网站基本页面的 url 模式

> ID：13656719
> 
> 赞同：5
> 
> 时间：2012-12-01T05:32:03.667
> 
> 标签：url, design-patterns, servlets, web.xml

我在网址“http://game.appspot.com/”上有应用程序。我需要从这个基本根调用一个 servlet，这意味着调用 servlet 的相对路径应该是“/”，但是当我这样做时它不起作用：

```
<url-pattern>/</url-pattern> 
```

在我的 web.xml 文件中，我不能把它留空，例如：

```
<url-pattern></url-pattern> 
```

因为当我尝试将其部署到谷歌应用引擎时出现错误。

我应该怎么办？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:40:41.907

使用欢迎文件 servlet hack 似乎有一种较旧的方法：

来自[http://www.coderanch.com/t/359995/Servlets/java/Servlets-Mapping-root-path-exclusively](http://www.coderanch.com/t/359995/Servlets/java/Servlets-Mapping-root-path-exclusively)：

```
<servlet>
  <description></description>
  <display-name>test</display-name>
  <servlet-name>test</servlet-name>
  <servlet-class>Test</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>test</servlet-name>
  <url-pattern>*.html</url-pattern>
</servlet-mapping>

<welcome-file-list>
  <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

如果您使用`index.html`，则需要`index.html`在磁盘上保存，即使是 0 字节文件，以便执行 servlet。我建议将 url 模式设置为其他文件扩展名，可能是 *.xyz，然后在与您的 servlet 关联的磁盘上有一个 0 字节的 index.xyz（我还没有测试过，但它*应该可以*工作）。

# windows - 使用凭据提供程序调用 com 对象

> ID：13656731
> 
> 赞同：0
> 
> 时间：2012-12-01T05:33:38.457
> 
> 标签：windows, authentication, com, windows-authentication, credential-providers

我想创建一个应用程序来登录 Windows，该应用程序将使用 QR 码、图形密码和 Kinect 运动密码用于我的学校项目。

我了解到我需要使用凭证提供程序。这是我第一次使用它，我非常困惑。

我的问题是：是否可以使用上述创建应用程序，然后让凭据提供程序调用该应用程序？我制作的应用程序是否必须是 com 对象？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:46:36.553

好消息——是的，有可能！坏消息 --- 你有很多工作要做;)
作为建议，最好让你的凭证提供者尽可能简单，并且所有用户身份验证工作都通过

> 二维码、图形密码和 Kinect 运动密码

将放入另一个应用程序。因此，凭据提供程序会将输入的凭据传递给该应用程序，并会收到身份验证结果。该应用程序将做最艰苦的工作。这个应用程序应该是一个 Windows 服务，因为它总是在运行关于是否有任何用户会话。例如，应用程序和凭证提供者之间的通信可以通过命名管道或任何其他 ipc 机制来完成。

对于其他问题：
凭据提供程序本身就是一个 COM。
要与其他应用程序通信，它们不必是 COM。
只要您有足够的权限，您就可以从凭证提供者那里获得任何应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:35:17.643

该进程不必是服务，您可以从 COM 对象启动 exe。

您可以做的是 regasm / codebase 您的 COM 对象，然后从 Initialize() 中的 Credential Provider 后期绑定到它

在 GetSerialization() 中，您将调用 COM 对象中的方法，该方法启动进程（exe）并通过命名管道连接。它将您需要的值返回给凭据提供程序，然后您继续登录。

# api - 如何从 Encompass360 中提取特定数据？它有任何API吗？

> ID：13656732
> 
> 赞同：1
> 
> 时间：2012-12-01T05:34:00.873
> 
> 标签：api

我有一个客户需要与 Encompass 360 代理版集成的解决方案。但我不了解 Encompass 360 代理版的架构。[我从那里的网站（ http://www.elliemae.com](http://www.elliemae.com)） 找不到任何信息。

因此，我希望目前正在使用该软件或对 Encompass 360 有特殊了解的人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:08:56.213

不确定您是否已经找到此信息，但这里是 SDK 指南的链接：http: [//help.elliemae.com/DocumentationLibrary/360/Encompass360SDKProgrammersGuide.pdf](http://help.elliemae.com/DocumentationLibrary/360/Encompass360SDKProgrammersGuide.pdf)

希望指南有所帮助！

# python - 当 Web 后端不仅仅是简单地回复请求时，我的应用程序应该如何构建？

> ID：13656736
> 
> 赞同：2
> 
> 时间：2012-12-01T05:34:46.397
> 
> 标签：python, architecture, rabbitmq, web-frameworks, gevent

我正在创建一个网站，允许玩家排队寻找类似技能的多人视频游戏玩家。简单的 Web 后端仅修改数据库并使用模板创建响应，但除此之外，我的后端还必须：

*   在排队或玩游戏时与玩家实时交流（通过 gevent-socketio）
*   在后台运行计算以找到平衡的游戏，随着等待时间的增加逐渐降低游戏质量（并在找到游戏时通过 SocketIO 通知玩家）
*   通过 UDP 套接字监控正在进行的游戏（如果玩家断开连接，请向队列请求替代）并最终使用结果更新数据库

我知道我将如何单独做这些事情，但我想知道我应该如何分离这些组件并让它们通信。我想我的网络框架（Flask）根本不应该参与这些其他事情。

由于我已经必须使用 gevent，我目前正计划为这些任务中的每一个启动单独的 greenlet。这将适用于我的所有任务（计算可能除外），因为它们通常会等待某些事情发生。但是，这根本无法扩展，因为我无法运行更多 Flask 实例。一切都依赖于在一个线程中运行的greenlets。

那么这是最好的方法吗？是否有另一种方法来处理分离这些任务（尤其是我将来可能使用的没有协程的语言）？我听说过 RabbitMQ/ZeroMQ 和 Celery 等工具，但我不确定如何以及是否使用它们来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:21:26.563

我的第一个想法是您可以使用面向服务的架构来分离这些任务。这些服务中的每一个都可以在单独的端口（或机器（或机器池））上运行 Flask 应用程序，并使用简单的 HTTP 相互通信。细分可能是这样的：

*   GameService：处理来自玩家的传入连接，并通过socketio与他们通信。
*   GameFinderService：接受来自 GameService 的 POST 请求，开始为玩家 X 寻找游戏。接受来自 GameService 的 GET 请求，为玩家 X 获取下一个最佳游戏。您可以将 Redis 用作每个已连接玩家的短暂游戏队列的后备存储，每次 GameStatusService（如下）通知我们更改时都会更新该队列。
*   GameStatusService：通过 UDP 监控进行中的游戏，当发生重大事件时，例如创建新游戏、玩家断开连接等，它会通知 GameFinderService 更改。然后 GameFinderService 将为每个连接的玩家适当地更新其队列。

Redis 非常好，因为它用作数据结构存储，允许您在没有太多开销的情况下维护短期和长期数据结构（例如队列）。

# java - 如何在具有月份和年份增量选项的检票口中使用 DatePicker？

> ID：13656743
> 
> 赞同：1
> 
> 时间：2012-12-01T05:36:18.327
> 
> 标签：java, datepicker, wicket

我在这样的 java wicket 中使用 DatePicker，

```
DateTextField txtInvoiceDate=new DateTextField("txtInvoiceDate",new PropertyModel<Date>(objmodel, "txtInvoiceDate"),new PatternDateConverter("dd/MM/yyyy", true));
        txtInvoiceDate.add(new DatePicker());
        add(txtInvoiceDate); 
```

它只显示月份增量选项，但我也想要年份增量选项。
所以请给我任何建议或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:11:11.170

我还没有发现用于增加年份的内置功能，但是有一种非常简单的方法可以更轻松地设置年份。只需覆盖 enableMonthYearSelection。

```
DateTextField txtInvoiceDate=new DateTextField("txtInvoiceDate",new PropertyModel<Date>(objmodel, "txtInvoiceDate"),new PatternDateConverter("dd/MM/yyyy", true));
DatePicker picker = new DatePicker(){
    @Override
    protected boolean enableMonthYearSelection() {
        return true;
    }
};
txtInvoiceDate.add(new DatePicker());
add(txtInvoiceDate); 
```

# python - 谷歌应用引擎 python 错误 TypeError: post() 只需要 1 个参数（给定 2 个）

> ID：13656746
> 
> 赞同：4
> 
> 时间：2012-12-01T05:36:56.737
> 
> 标签：python, google-app-engine

尝试使用 Ajax 和 jquery 实现投票按钮。我的赞成票有以下处理程序

```
class Upvote(PageHandler):
    def post(self):
            logging.error("1") 
```

我的投票网址映射到处理程序，如下所示：

```
app = webapp2.WSGIApplication([('/', FrontPage),
                               ('/upvote_([0-9]+)', Upvote) 
```

现在这给了我错误

```
TypeError: post() takes exactly 1 argument (2 given) 
```

然而

```
app = webapp2.WSGIApplication([('/', FrontPage),
                               ('/upvote_2', Upvote) 
```

适用于 upvote id 2。有人可以告诉我我在这里缺少什么吗？正则表达式错了吗？我是一个完整的新手，如果这个问题看起来太天真，我很抱歉。谢谢。

编辑：将（'/upvote_2）'，Upvote）更改为（'/upvote_2'，Upvote）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:45:22.627

在不了解您正在使用的应用程序的情况下，我假设正则表达式将捕获的组（由 括起来`(` `)`）作为参数添加。删除括号可以解决您的问题。

# php - PHP Echo 一个多维数组

> ID：13656748
> 
> 赞同：0
> 
> 时间：2012-12-01T05:37:03.980
> 
> 标签：php, mysql

我有一个多维数组，当我使用 print_r 时，它看起来像这样：

```
Array ( 

[car] => Array (   
           [72] => Camry 
           [62] => Lexus 
           [55] => honda 
           [44] => toyota 
                )

[Job] => Array (   
           [70] => Bookstore
           [73] => Cafe 
               ) 

[City] => Array (  
           [68] => Wisconsin
           [63] => Chicago 
           [47] => New York City 
           [46] => Los Angeles 
                ) 
 ) 
```

这是一个父/子多维数组。可以有任意数量的父母和任意数量的孩子。

如何回显一个多维数组，使其看起来像这样

```
Car
    Camry 
    Lexus 
    honda 
    toyota

Job
    Bookstore
    Cafe

City
    Wisconsin
    Chicago
    New York City
    Los Angeles 
```

我尝试打印多维数组：

```
function RecursiveWrite($array) {
                      foreach ($array as $vals) {
                          echo $vals['parent'] . "\n";
                          RecursiveWrite($vals['child']);
                      }
                  }     
RecursiveWrite($categories); // $categories is the name of the array 
```

当我运行代码时，这不会打印出任何输出。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:42:54.093

考虑到制表符和返回符号取决于您想要的 HTML 或 FILE 输出，代码如下：

```
$tab = "\t"; // tab
$return = "\r"; // return

foreach ($array as $key => $a) {
    echo $key.$return;
    foreach ($a as $value) {
        echo $tab.$value.$return;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:43:37.997

创建递归函数：

半伪：

```
function dumpArr (arr){
  foreach element in arr {
    if element is array/object{
      dumpArr(element)
    }else{
      echo element
    }
  }
} 
```

然后，您可以使用 CSS 来调整内边距、边距等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T06:22:00.783

下面的代码如你所愿显示：

```
 <?php
$arrayToPrint = Array (
        'car' => Array (   
        '72' => 'Camry', 
        '62' => 'Lexus', 
        '55' => 'honda', 
        '44' => 'toyota'
        ),
        'Job' => Array (   
        '70' => 'Bookstore',
        '73' => 'Cafe' 
        ) ,
        'City' => Array (  
        '68' => 'Wisconsin',
        '63' => 'Chicago' ,
        '47' => 'New York City', 
        '46' => 'Los Angeles'
        ) 
    ) ;
    echo "output in print_r( ):<pre>";
    print_r($arrayToPrint);
    echo "</pre>";
    echo "output in echo:<br/>";
    foreach($arrayToPrint as $arrayKey=> $arrayValue1) {
        echo '<pre>';
        echo $arrayKey;
            foreach($arrayValue1 as $leafNodeValue) {
                echo '<pre>    '.$leafNodeValue.'</pre>';
            }
        echo '</pre>';
    }
    ?> 
```

# javascript - 给定模式的正则表达式？

> ID：13656750
> 
> 赞同：2
> 
> 时间：2012-12-01T05:37:17.517
> 
> 标签：javascript, regex

我需要两个正则表达式，它匹配任何以`10PL`is结尾的东西`(a single whitespace) (any integer) (the string PL in caps) (line terminates)`。我尝试了以下方法，但它们都不起作用。例如。

```
var str="Visit W3Schools 45PL";  // should match this
var str1="Visit W3Schools 45PL Other";  // should NOT match this
var str2 = "Any Random value 133PL" // should match this
var str3 = "Any Random value 133Pl" // should NOT match this 
```

另一个应该匹配`21.323X230` `(a single whitespace) (any floating value) (the word X in caps) (any other floating point value) (line terminates)`。例如。

```
var test="Visit W3Schools 4X5";  // should match this
var test1="Visit W3Schools 4X5PL Other";  // should NOT match this
var test2 = "Any Random value 13.270X46.96" // should match this
var test3 = "Any Random value 13.21X12.36 " // should NOT match this, as last word is white space 
```

我尝试了以下模式（对于第一个模式（PL 模式））。

```
var patt1=/\s+\d+/PL/g;
var patt2 = /[ ]+[0-9]+/PL/g;
document.write(patt1.test(str));
document.write(patt2.test(str));
document.write(patt1.test(str1));
document.write(patt2.test(str1));
document.write(patt1.test(str2));
document.write(patt2.test(str2));
document.write(patt1.test(str3));
document.write(patt2.test(str3)); 
```

结果全部为空（document.write 没有写任何东西）。那么，谁能帮我找出这两种模式的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:46:24.270

您的模式中有语法错误 -`/`正则表达式的中间是

*   不需要（没有要匹配的文字斜线，是吗？），和
*   使正则表达式引擎感到困惑，因为它将其解释为结束正则表达式分隔符。然后它尝试解释`PL/g`为正则表达式修饰符（这当然不起作用）。

此外，您并没有告诉正则表达式它应该只在行尾匹配该模式。所以试试这个：

```
var patt1 = / \d+PL$/gm; 
```

`$`匹配（与`m`修饰符一起）行尾。如果没有那个修饰符，它只会匹配字符串的结尾。

对于第二个：

```
var patt2 = / \d+(?:\.\d+)?X\d+(?:\.\d+)?$/gm; 
```

另外，请不要`visit W3Schools`。这是互联网上最容易出错的地方之一。如果您不相信我，请查看[http://w3fools.com](http://w3fools.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:54:52.323

这应该这样做。

```
var str  = "Visit W3Fools 45PL";          // should match this
var str1 = "Visit W3Fools 45PL Other";    // should NOT match this
var str2 = "Any Random value 133PL"       // should match this
var str3 = "Any Random value 133Pl"       // should NOT match this

var test  = "Visit W3Fools 4X5";              // should match this
var test1 = "Visit W3Fools 4X5PL Other";      // should NOT match this
var test2 = "Any Random value 13.270X46.96";  // should match this
var test3 = "Any Random value 13.21X12.36 ";  // should NOT match this, as last word is white space

var patt1 = /\s\d+PL$/;

document.write( patt1 + ' =~ "' + str + '" => ' + patt1.test(str) + '<br>');
document.write( patt1 + ' =~ "' + str1 + '" => ' + patt1.test(str1) + '<br>');
document.write( patt1 + ' =~ "' + str2 + '" => ' + patt1.test(str2) + '<br>');
document.write( patt1 + ' =~ "' + str3 + '" => ' + patt1.test(str3) + '<br>');

var patt2 = /\s\d+(?:[.]\d+)?X\d+(?:[.]\d+)?$/;

document.write( patt2 + ' =~ "' + test + '" => ' + patt2.test(test) + '<br>');
document.write( patt2 + ' =~ "' + test1 + '" => ' + patt2.test(test1) + '<br>');
document.write( patt2 + ' =~ "' + test2 + '" => ' + patt2.test(test2) + '<br>');
document.write( patt2 + ' =~ "' + test3 + '" => ' + patt2.test(test3) + '<br>'); 
```

该页面写为：

```
/\s\d+PL$/ =~ "Visit W3Fools 45PL" => true
/\s\d+PL$/ =~ "Visit W3Fools 45PL Other" => false
/\s\d+PL$/ =~ "Any Random value 133PL" => true
/\s\d+PL$/ =~ "Any Random value 133Pl" => false
/\s\d+(?:[.]\d+)?X\d+(?:[.]\d+)?$/ =~ "Visit W3Fools 4X5" => true
/\s\d+(?:[.]\d+)?X\d+(?:[.]\d+)?$/ =~ "Visit W3Fools 4X5PL Other" => false
/\s\d+(?:[.]\d+)?X\d+(?:[.]\d+)?$/ =~ "Any Random value 13.270X46.96" => true
/\s\d+(?:[.]\d+)?X\d+(?:[.]\d+)?$/ =~ "Any Random value 13.21X12.36 " => false 
```

# iphone - 记录电话的对话 - ios

> ID：13656753
> 
> 赞同：0
> 
> 时间：2012-12-01T05:37:53.140
> 
> 标签：iphone, objective-c, ios, record, phone-call

> **可能重复：**
> [理论上可以使用 iPhone 通话记录器吗？](https://stackoverflow.com/questions/1809347/is-an-iphone-call-recorder-theoretically-possible)

我是一名 iPhone 开发人员。我想在通话过程中记录对话。我不知道苹果是否允许这样做。如果是，那么任何人都可以指导我如何做到这一点？

*   基本上在我的应用程序中，我正在录制 1 个音频。现在，当我从我的联系人中呼叫某人时，我想播放该音频并记录对话。播放和录制我想要的东西。我很困惑这是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:46:50.873

没有用于记录内置电话应用程序发出（或接收）的呼叫的公共 API。

您将必须实现自己的电话呼叫机制。您可能想要使用 VoIP。（例如，这就是[Google Voice](https://itunes.apple.com/us/app/google-voice/id318698524?mt=8)所使用的。）您需要在 Internet 上运行自己的服务器，或者与现有的 VoIP 服务签订合同。您将希望使用应用内购买让用户购买分钟，因为运行您自己的服务器或使用第三方服务需要花钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:40:44.590

没有用于此的公共 API。前往 App Store 的任何应用程序都无法记录使用标准电话应用程序拨打的电话。

# python - pyicu 未能在 Mountain Lion 上链接 icu4c

> ID：13656756
> 
> 赞同：2
> 
> 时间：2012-12-01T05:38:14.647
> 
> 标签：python, pip, homebrew, dyld

我使用`brew install icu4c`with`pip install pyicu`来安装 python ICU 支持，但最后我无法在我的 Mountain Lion 上工作。

```
$ brew install icu4c
dyld: DYLD_ environment variables being ignored because main executable (/usr/bin/sudo) is setuid or setgid
==> Downloading http://download.icu-project.org/files/icu4c/50.1/icu4c-50_1-src.tgz
Already downloaded: /Library/Caches/Homebrew/icu4c-50.1.tgz
==> ./configure --prefix=/usr/local/Cellar/icu4c/50.1 --disable-samples --disable-tests --enable-static --with-library-bits=64
==> make
==> make install
/usr/local/Cellar/icu4c/50.1: 235 files, 55M, built in 109 seconds

$ pip install pyicu
Downloading/unpacking pyicu
  Downloading PyICU-1.4.tar.gz (209kB): 209kB downloaded
  Running setup.py egg_info for package pyicu

Installing collected packages: pyicu
  Running setup.py install for pyicu
    building '_icu' extension
    /usr/bin/clang -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/local/include -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c _icu.cpp -o build/temp.macosx-10.4-x86_64-2.7/_icu.o -Wno-write-strings -DPYICU_VER="1.4"

…

    /usr/bin/clang++ -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.2.2/lib build/temp.macosx-10.4-x86_64-2.7/_icu.o build/temp.macosx-10.4-x86_64-2.7/bases.o build/temp.macosx-10.4-x86_64-2.7/calendar.o build/temp.macosx-10.4-x86_64-2.7/charset.o build/temp.macosx-10.4-x86_64-2.7/collator.o build/temp.macosx-10.4-x86_64-2.7/common.o build/temp.macosx-10.4-x86_64-2.7/dateformat.o build/temp.macosx-10.4-x86_64-2.7/errors.o build/temp.macosx-10.4-x86_64-2.7/format.o build/temp.macosx-10.4-x86_64-2.7/iterators.o build/temp.macosx-10.4-x86_64-2.7/layoutengine.o build/temp.macosx-10.4-x86_64-2.7/locale.o build/temp.macosx-10.4-x86_64-2.7/normalizer.o build/temp.macosx-10.4-x86_64-2.7/numberformat.o build/temp.macosx-10.4-x86_64-2.7/regex.o build/temp.macosx-10.4-x86_64-2.7/search.o build/temp.macosx-10.4-x86_64-2.7/transliterator.o build/temp.macosx-10.4-x86_64-2.7/tzinfo.o build/temp.macosx-10.4-x86_64-2.7/unicodeset.o -licui18n -licuuc -licudata -licule -o build/lib.macosx-10.4-x86_64-2.7/_icu.so -L/usr/local/lib

Successfully installed pyicu
Cleaning up... 
```

这是安装了 Xcode 4.5 和 46.DP2 的 Mountain Lion 设置。

```
$ python
Python 2.7.3 (default, Jun 14 2012, 00:46:15) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.61)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import icu
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/Cellar/python/2.7.3/lib/python2.7/site-packages/icu.py", line 37, in <module>
    from docs import *
  File "/usr/local/Cellar/python/2.7.3/lib/python2.7/site-packages/docs.py", line 23, in <module>
    from _icu import *
ImportError: dlopen(/usr/local/Cellar/python/2.7.3/lib/python2.7/site-packages/_icu.so, 2): Symbol not found: __ZNK6icu_5014LEFontInstance10getSubFontEPKtPiiiR11LEErrorCode
  Referenced from: /usr/local/Cellar/python/2.7.3/lib/python2.7/site-packages/_icu.so
  Expected in: dynamic lookup

>>> 

$ otool -L _icu.so
_icu.so:
/usr/local/lib/libicui18n.50.1.dylib (compatibility version 50.0.0, current version 50.1.0)
/usr/local/lib/libicuuc.50.1.dylib (compatibility version 50.0.0, current version 50.1.0)
/usr/local/lib/libicudata.50.1.dylib (compatibility version 50.0.0, current version 50.1.0)
/usr/local/lib/libicule.50.1.dylib (compatibility version 50.0.0, current version 50.1.0)
/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 56.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1669.0.0) 
```

有人遇到同样的问题吗？我还能尝试什么？

更多信息 /usr/local/bin/python：Mach-O 64 位可执行 x86_64 /usr/local/Cellar/python/2.7.3/lib/python2.7/site-packages/_icu.so：Mach-O 64 -位捆绑 x86_64

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T04:22:57.403

最后，我通过将`icu4c`版本降级到 4.8.1.1 使其工作。

```
$ brew uninstall icu4c

$ pip uninstall pyicu

$ brew versions icu4c
4.8.1.1  git checkout 3f0fb81 /usr/local/Library/Formula/icu4c.rb
50.1     git checkout 03ed757 /usr/local/Library/Formula/icu4c.rb
49.1.2   git checkout c25fd2f /usr/local/Library/Formula/icu4c.rb
4.8.1    git checkout 4ed0519 /usr/local/Library/Formula/icu4c.rb
4.4.1    git checkout c1e5cc2 /usr/local/Library/Formula/icu4c.rb

$ cd `brew --prefix`

$ git checkout 3f0fb81 /usr/local/Library/Formula/icu4c.rb

$ brew install icu4c

$ env LDFLAGS="-L/usr/local/opt/icu4c/lib" CPPFLAGS="-I/usr/local/opt/icu4c/include" pip install pyicu        

$ python
Python 2.7.3 (default, Jun 14 2012, 00:46:15) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.61)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import icu
>>> 
```

成功！

# python - 如何通过 urllib2 发送 HTTP/1.0 请求？

> ID：13656757
> 
> 赞同：6
> 
> 时间：2012-12-01T05:38:25.403
> 
> 标签：python, urllib2

似乎 urllib2 默认发送 HTTP/1.1 请求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-13T10:48:02.387

为了避免猴子补丁`httplib`（全局更改），您可以子类化`HTTPConnection`并定义自己的 http 处理程序：

```
#!/usr/bin/env python
try:
    from httplib import HTTPConnection
    from urllib2 import HTTPHandler, build_opener
except ImportError: # Python 3
    from http.client import HTTPConnection
    from urllib.request import HTTPHandler, build_opener

class HTTP10Connection(HTTPConnection):
    _http_vsn = 10
    _http_vsn_str = "HTTP/1.0" 

class HTTP10Handler(HTTPHandler):
    def http_open(self, req):
        return self.do_open(HTTP10Connection, req)

opener = build_opener(HTTP10Handler)
print(opener.open('http://stackoverflow.com/q/13656757').read()[:100]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T06:19:09.193

urllib2 在后台使用 httplib 进行连接。您可以将其更改为 http 1.0，如下所示。我已经包含了我的 apache 服务器访问日志，以显示 http 连接如何更改为 1.0

**代码**

```
import urllib2, httplib
httplib.HTTPConnection._http_vsn = 10
httplib.HTTPConnection._http_vsn_str = 'HTTP/1.0'
print urllib2.urlopen('http://localhost/').read() 
```

**访问日志**

```
127.0.0.1 - - [01/Dec/2012:09:10:27 +0300] "GET / HTTP/1.1" 200 454 "-" "Python-urllib/2.7"
127.0.0.1 - - [01/Dec/2012:09:16:32 +0300] "GET / HTTP/1.0" 200 454 "-" "Python-urllib/2.7" 
```

# session - windows azure 网站如何处理会话？

> ID：13656758
> 
> 赞同：5
> 
> 时间：2012-12-01T05:38:28.060
> 
> 标签：session, azure

我正在调查 Windows azure 中的一项新产品。特别是“网站”，我无法找到有关它如何处理会话数据的任何信息。有人知道吗？我将滑块移动到 2 个实例，这一切似乎都“正常工作”，但如果我确定它正在共享会话数据（或不共享会话数据？），我会觉得使用它会更好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T09:15:23.280

你有一些选择来解决这个问题

1.  sql解决方案

2.  表存储解决方案

3.  内存缓存解决方案

**Sql**是经典的解决方案。Sql 处理所有带有经典 sql 请求的会话。

**表存储**可以创造奇迹（根据我的经验）。它真的很容易扩展并且很容易实现（只需在你的 webconfig 上写几行代码）。

**Memcache**解决方案是最好的解决方案。Azure 提供了一组“缓存服务器”来存储会话（或其他可序列化对象）。它真的很容易扩展并且运行速度非常快。我在我的生产环境中使用这个解决方案，有 0 个问题和非常好的性能结果。

为了实现 Memcache，您只需在 web.config 中添加这些行：

```
<configuration>
    <configSections>        
        <section name="dataCacheClients" type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
        <!-- more config sections here -->
    </configSections>
    <dataCacheClients>
    <dataCacheClient name="default">
        <hosts>
        <host name="YOUR_NAME_HERE.cache.windows.net" cachePort="YOUR_PORT_HERE"/>
        </hosts>
    <securityProperties mode="Message">
            <messageSecurity authorizationInfo="YOUR_KEY_HERE">
                            </messageSecurity>
            </securityProperties>
    </dataCacheClient>
</dataCacheClients>
<!-- more configurations here --> 
```

概括

如果您不关心成本并且希望尽可能获得最佳性能，请选择 memcache 解决方案。如果您需要将成本保持在非常低的水平，请选择表格存储。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T23:11:28.793

如果您想了解有关 Windows Azure 网站架构的更多信息，我建议您观看 TechEd 2012 [Windows Azure 网站的本次会议：幕后花絮](http://channel9.msdn.com/Events/TechEd/Europe/2012/AZR305)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-23T17:56:02.060

由于上面链接的视频已经过时了，我想我会分享我在 Azure 上找到的有关会话的内容。

Azure 使用[Application Request Routing](http://www.iis.net/learn/extensions/planning-for-arr)。

> ARR 通过给他们一个特殊的cookie（称为affinity cookie）巧妙地跟踪连接的用户，它允许它在后续请求时知道他们正在与哪个服务器实例通信。这样，我们可以确定，一旦客户端与特定服务器实例建立会话，只要会话处于活动状态，它就会继续与同一服务器对话。

参考： [https](https://azure.microsoft.com/en-us/blog/disabling-arrs-instance-affinity-in-windows-azure-web-sites/) ://azure.microsoft.com/en-us/blog/disabling-arrs-instance-affinity-in-windows-azure-web-sites/ 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T08:19:36.293

你的目标是 ASP.NET 4.5 吗？

如果您没有使用 4.5 显式配置任何提供程序，它将默认使用现在包含在 Machine.config 中的 ASP.NET 通用提供程序。因此默认情况下它将使用 SQL 会话状态提供程序。不过，我希望它使用本地数据库，所以我不确定它将如何共享状态。

您可以通过打开一些会话来测试它，然后将实例数减至 1，然后查看某些会话是否丢失状态。

负载均衡器可能正在使用会话亲和性，在这种情况下，您可能不会注意到它是否不共享会话状态。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-01T05:59:41.850

你有多少个网络角色？如果将其保持为 1，则应该没问题，但是您可以在[此处](http://acloudyplace.com/2012/02/managing-session-state-in-windows-azure-what-are-the-options/)阅读有关多个 Web 角色将如何创建相同的会话状态问题的详细信息，如果您正在运行 Web 场，您会遇到......当运行 Web农场一个选项是在你的数据库中保持会话状态。所以你可以想象，如果你需要运行多个 Web 角色，那么你可以依靠 sql Azure（虽然表存储真的很酷，并且可能非常适合会话状态之类的东西）

但要更直接地回答您的问题，您可以使用多个 Web 角色来分配处理负载，而[Web 角色](http://blogs.msdn.com/b/brunoterkaly/archive/2012/05/13/essential-windows-azure-microsoft-cloud-knowledge-part-1-web-roles-worker-roles.aspx)只是“IIS 内部托管的前端 Web 应用程序和内容”。同样，如果您只使用一个网络角色，那么您的应用程序可能运行良好。但请注意，如果您需要扩展您的 Web 角色，它将阻碍您的会话持久性。

# android - Android AsyncTask 无法在未调用 Looper.prepare() 的线程内创建处理程序？

> ID：13656765
> 
> 赞同：2
> 
> 时间：2012-12-01T05:39:29.787
> 
> 标签：android, android-asynctask

为什么我在使用此代码时遇到此错误，`asynctask`即使我正在使用 `runOnUiThread()`这是我正在使用的代码（我正在使用片段）。

```
private class GmailXMPP_AfterLogin extends AsyncTask<AfterLogging, Void, Void> {

    private ProgressDialog _dialog;

    @Override
    protected void onPreExecute() {          
        super.onPreExecute();
        _dialog = new ProgressDialog(getActivity());     
        _dialog.setCancelable(false);
        _dialog.setTitle("colors");
        //((ProgressDialog)dialog).setIcon(R.drawable.icon);
        _dialog.setMessage("Your content is loading.. \nPlease wait..");
        _dialog.setIndeterminate(false);         
        _dialog.show();
        //ProgressBar_show();
        Log.i(TAG, " GmailXMPP_AfterLogin onPreExecute" );
    }

    @Override
    protected void onPostExecute(Void feed) {
        //ProgressBar_hide();       
        _dialog.dismiss();
        Log.i(TAG, " GmailXMPP_AfterLogin onPostExecute" );
    }

    @Override
    protected Void doInBackground(AfterLogging... arg0) {

        Log.i(TAG, " GmailXMPP_AfterLogin doInBackground" );
        AfterLogging after = arg0[0];
        final XMPPConnection _connection = after.getConn();
        final String Uname = after.getAcc_Name();

                //synchronized (contactJids) {
        Roster roster = Gtalk_xmpp_client.getRoster();
        String file_name;
        for (RosterEntry entry : roster.getEntries()) {
            if (entry.getType() == ItemType.to || entry.getType() == ItemType.both) {

                boolean yes = Contact_data_source.checkUsername(entry.getUser());
                Log.i(TAG, "Con=" + yes);
                if (!yes) {

                    Bitmap buddy_img = buddyImage(entry, _connection);
                    if (buddy_img != null)
                        file_name = Store(buddy_img);
                    else
                        file_name = "";
                    if (entry.getName() == null)
                        Contact_data_source.createContact( entry.getUser(), entry.getUser(), Uname, file_name, UsedStrings.GoogleAccount );
                    else
                        Contact_data_source.createContact( entry.getName(), entry.getUser(), Uname, file_name, UsedStrings.GoogleAccount );
                } else {
                    Log.i(TAG, "Con=exist");
                }
            }
        }               
        return null;
    }
 } 
```

logcat 显示

```
12-01 11:59:21.549: E/AndroidRuntime(16595): FATAL EXCEPTION: AsyncTask #1
12-01 11:59:21.549: E/AndroidRuntime(16595): java.lang.RuntimeException: An error occured while executing doInBackground()
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.lang.Thread.run(Thread.java:1019)
12-01 11:59:21.549: E/AndroidRuntime(16595): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.os.Handler.<init>(Handler.java:121)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.app.Dialog.<init>(Dialog.java:101)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.app.AlertDialog.<init>(AlertDialog.java:63)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.app.ProgressDialog.<init>(ProgressDialog.java:80)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.app.ProgressDialog.<init>(ProgressDialog.java:76)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at com.pipemedia.fragments.ChatAccountsFragment$GmailXMPP_AfterLogin.onPreExecute(ChatAccountsFragment.java:372)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.os.AsyncTask.execute(AsyncTask.java:391)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at com.pipemedia.fragments.ChatAccountsFragment.Gtalk_logInComplete(ChatAccountsFragment.java:435)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at com.pipemedia.xmpp.GmailXmppClient.Login(GmailXmppClient.java:60)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at com.pipemedia.fragments.ChatAccountsFragment$GmailXMPP.doInBackground(ChatAccountsFragment.java:337)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at  com.pipemedia.fragments.ChatAccountsFragment$GmailXMPP.doInBackground(ChatAccountsFragment.java:1)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-01 11:59:21.549: E/AndroidRuntime(16595):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
12-01 11:59:21.549: E/AndroidRuntime(16595):    ... 4 more 
```

这是创建错误的行

```
line 372 : progress_dialog = new ProgressDialog(getActivity()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T06:39:09.510

可能您在后台线程中调用了 AsyncTask.execute() 。

您只能在 UI 线程中执行 AsyncTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:43:49.877

asynctask 是一个在后台运行的线程，完成后只更新一次 ui 线程，但可运行线程不像 asynctask，可运行线程调用处理程序以循环更新 ui 线程，因此您不能将处理程序放入 asynctask .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T06:34:43.250

如果您想在已经在线程中运行的正在进行的任务中显示进度对话框，请尝试这种方式。可能对您有帮助::

```
Handler mHandler=new Handler();

mHandler.post(new Runnable() 
{
     public void run()
     {
          //SHOW PROGRESS DIALOG HERE                           
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T06:55:55.767

创造

```
progressDialog = ProgressDialog.show(SplashScreen.this, "Please wait...", "Porcessing ...", true); 
```

在要启动 AsyncTask 的 Activity 类中。

# javascript - java脚本图像翻转问题

> ID：13656767
> 
> 赞同：2
> 
> 时间：2012-12-01T05:39:36.840
> 
> 标签：javascript, html

我明天有一个作业要交。我被困在特定的要求上。我需要做一个 java 脚本图像翻转我是我的 HTML 使用单独的脚本页面。然后将页面链接到 Html Head 标签。

这是我的java脚本页面，而不是我使用标签中的函数，但它仍然没有调用它..有什么建议吗？

这是 javascript 文件：

```
// Pre load images for rollover
function imgOver() 
{
    document.getElementById('logo').src="images/logo1.jpeg"; 
}

function imgOut() 
{
    document.getElementById('logo').src="images/logo.jpeg"; 
}

onclick=”window.print( ); return false;” 
```

这是 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta name="author" content="Teancum Clark" />
        <meta name="class" content="INFO 2450 - Web Content Design" />
        <meta name="section" content="001" />
        <meta name="project" content="expresswebpractice2a" />
        <meta name="due_date" content="11/07/2012" />
        <meta name="instructor" content="Kim Bartholomew" />
        <meta name="description" content="Description of the project here..." />
        <meta name="keywords" content="expweb2a" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
        <title>Home</title>
        <link href="mystyles.css" rel="stylesheet" type="text/css" />

            <script type="text/javascript" src="MyScript.js"></script>

    </head>

    <body>
        <div class="fl" id="wrapper">
            <div class="fl" id="content">
                <div class="fl" id="header">
                    <div class="fl" id="leftImage">
                        <a href="#" onmouseover="imgOver();" onmouseout="imgOut()">
                        <img id="logo" alt="logo" height="150" src="images/logo1.jpeg" width="110" />
                        </a>

                    </div>
                    <div class="fl" id="rightImage">
                        <img class="rightImage"src="Images/banner.png" alt="Pets R Us banner"/>
                    </div>
                </div> <!--header-->

                <div class="fl" id="left">
                    <a class="buttons fl" href="index.htm">Home</a>
                    <a class="buttons fl" href="AboutUs.htm">About</a>
                    <a class="buttons fl" href="Tributes.htm">Tributes</a>
                </div><!--left-->

                <div class="fl" id="right">
                    right
                </div><!--right-->

                <div class="fl" id="footer">
                    The great Pets R Us staff came and picked her up two hours later and I didn't even have to worry about feeding or watering "Sophie".
                    We now have a regular appointment every Saturday...
                    <br/>
                    <br/>
                    Yours, 
                    <br/>
                    Jewel Anderson, 
                    <br/>
                    Centerville, UT
                    <br/>
                    <a class="buttons fl" href="Tribute.htm">Read More?</a>     

                        <img class="center" src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" height="31" width="88" />
                </div><!--footer-->

            <br style="clear:both; font-size:1px;" />
            </div><!--content-->
        </div><!--wrapper-->
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:02:01.870

```
onclick=”window.print( ); return false;” 
```

该行是非法的，并导致您的脚本文件被忽略，删除它，您的鼠标悬停/移出将开始工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:09:10.510

# php - php会话超时

> ID：13656772
> 
> 赞同：0
> 
> 时间：2012-12-01T05:39:56.387
> 
> 标签：php, session, timeout

作为对此的新手，如果用户没有点击“任何其他链接”，即在没有任何活动的情况下停留在该页面上，我试图在 100 秒后实现会话超时。我使用了以下 php 脚本，但我猜“ if" 条件检查每个脚本只进行一次，因此即使检查在某个时间后被违反，也不会发生自动重定向..所以有没有办法（仅使用 php 脚本），以便这次检查在页面上重复发生？ ?

```
if (isset($_SESSION['LAST_ACTIVITY']) and (time() - $_SESSION['LAST_ACTIVITY'] > 100)) 
{
    session_unset();                    
    session_destroy();                          
    header('Location: seesiontimeout.php');
} 
```

该`$_SESSION['LAST_ACTIVITY']`变量已在脚本开始时设置...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:49:01.713

您问...

> .so 有没有办法（**只使用 php 脚本**）让这个时间检查在页面上重复发生？

（强调我的）。

不，PHP 每次请求都会在服务器上运行一次以呈现动态 HTML。它不能只是闲置并以某种方式告诉浏览器，“嘿，你快要超时了！”

您必须设置一个反复询问服务器的客户端 javascript 函数。

> 我已经超时了吗？没有。
> 我已经超时了吗？没有。
> 我已经超时了吗？是的！重定向到超时页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:49:42.457

`is there a way(using only php script) so that this time check occurs repeatedly on the page`

不使用“仅 PHP”，但您可以在 JavaScript 中使用 AJAX 来继续调用服务器上的 PHP。

PHP 完全在服务器上运行，它*不由*客户端的浏览器执行。因此，您必须告诉客户端继续检查服务器以确定这样的事情。

# c++ - 使用 g++ 在 Cygwin 中编译 SDL

> ID：13656774
> 
> 赞同：1
> 
> 时间：2012-12-01T05:40:03.313
> 
> 标签：c++, compilation, g++, cygwin, sdl

因此，在学校，我使用 SDL 图形库制作了一个简单的游戏，并在 Visual Studios C++ 中完成。但是，我必须上交源代码才能通过 Cygwin 进行编译。我已经非常努力地找出链接所有内容的正确方法，但就是做不到。

通常我会通过 Cygwin 编译一个普通的 .cpp 文件，如下所示：

```
g++ -W -Wall -pedantic -o test test.cpp 
```

所以我的问题是：

为了编译（使用 g++）SDL 源代码，正确的命令行命令是什么。

另外，我应该如何文件夹所有文件，以便当我的导师得到它时，他可以运行与我完全相同的命令？

我应该将整个 SDL 库与源代码文件夹放在一起吗？我希望将所有内容分组，以便他所要做的就是运行正确的命令。

越简单越好:)

# firebase - 与 CodeMirror 实时协作

> ID：13656783
> 
> 赞同：6
> 
> 时间：2012-12-01T05:41:00.457
> 
> 标签：firebase, codemirror, firepad

我开始了这个小项目，在那里我将使用 CodeMirror 对代码进行实时协作。

我有一个 msgs 系统设置，因此很容易将对象从一个用户传递给另一个用户。我的问题是将它与 CodeMirror 集成。我发现它有 onchange 和 replaceRange(string, from, to) 事件。

我将 onchange 对象传递给其他用户并使用 replaceRange 来更新视图。问题是当使用 replaceRange 时，它​​会触发一个新的 onchange 并且它会来回发送 msgs。任何人都知道是否有某种方法可以在不触发 onchange 的情况下更新本地视图。或建议采取其他途径。（msgs 系统已经建立，很容易将 javascript 对象传递给其他客户端）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-10T03:15:01.113

# 您可以使用 Firepad

[FirePad](http://www.firepad.io)是代码镜像[的开源](https://github.com/firebase/firepad)（在 GitHub 上）实时协作插件。您可以在 4 行额外的代码和几分钟内使用 codemirror 进行设置。它使用[Firebase](http://www.firebase.com)作为后端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T11:49:12.320

要使其正常工作，您还必须合并更改。有关开源解决方案的演示（也使用 CodeMirror），请参阅[http://ot.substance.io/ 。](http://ot.substance.io/)

# css - 是什么让这个水平滚动条弹出？

> ID：13656784
> 
> 赞同：0
> 
> 时间：2012-12-01T05:41:07.760
> 
> 标签：css, responsive-design, horizontal-scrolling, fluid-layout, fluid

我有一个我正在为自己构建的单页站点，并且我有一个小但烦人的（对我而言）错误。

我正在努力使它对媒体查询友好，到目前为止，我所学到的一切都很好。困扰我的是，当网站水平调整大小时，有一部分水平滚动条会闪烁。

您可以在屏幕截图中看到位置。它的宽度约为 767 像素。

![滚动条截图](../Images/93cefd284c130390f74751cde6cd8078.png)

我认为它可能来自 1140.css 文件，这是我用来使其响应的框架，但我无法弄清楚是什么导致它或如何修复它。

你可以看看我的网站：

[http://vitaliyg.com](http://vitaliyg.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:48:35.523

在 Chrome 中给它一个爆炸看起来是由于

```
media="screen" 1140.css:10
.container {
    padding-left: 20px;
    padding-right: 20px;
} 
```

如果这些都关闭，滚动条不会出现..至少对我来说。

# iphone - 将 XML 文件转换为 Nib 文件？

> ID：13656787
> 
> 赞同：4
> 
> 时间：2012-12-01T05:42:02.953
> 
> 标签：iphone, objective-c, ios, xml

我想知道在objective-c中从XML文件到Nib文件的转换，我的要求通常是编译后的Xib文件它将转换为NIB文件（二进制数据格式）现在我想给我的项目一个外部Xml文件，我想将此文件转换为 Nib 文件。这可能吗？给我建议（这意味着将Xib文件替换为XML文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:38:00.653

这里我列出了普通 iPad xib 配置的详细信息，它是 plist 的形式。

```
<?xml version="1.0" encoding="UTF-8"?>
<archive type="com.apple.InterfaceBuilder3.CocoaTouch.iPad.XIB" version="8.00">
    <data>
        <int key="IBDocument.SystemTarget">1536</int>
        <string key="IBDocument.SystemVersion">12A206j</string>
        <string key="IBDocument.InterfaceBuilderVersion">2519</string>
        <string key="IBDocument.AppKitVersion">1172.1</string>
        <string key="IBDocument.HIToolboxVersion">613.00</string>
        <object class="NSMutableDictionary" key="IBDocument.PluginVersions">
            <string key="NS.key.0">com.apple.InterfaceBuilder.IBCocoaTouchPlugin</string>
            <string key="NS.object.0">1856</string>
        </object>
        <array key="IBDocument.IntegratedClassDependencies">
            <string>IBProxyObject</string>
            <string>IBUIView</string>
        </array>
        <array key="IBDocument.PluginDependencies">
            <string>com.apple.InterfaceBuilder.IBCocoaTouchPlugin</string>
        </array>
        <object class="NSMutableDictionary" key="IBDocument.Metadata">
            <string key="NS.key.0">PluginDependencyRecalculationVersion</string>
            <integer value="1" key="NS.object.0"/>
        </object>
        <array class="NSMutableArray" key="IBDocument.RootObjects" id="1000">
            <object class="IBProxyObject" id="841351856">
                <string key="IBProxiedObjectIdentifier">IBFilesOwner</string>
                <string key="targetRuntimeIdentifier">IBIPadFramework</string>
            </object>
            <object class="IBProxyObject" id="606714003">
                <string key="IBProxiedObjectIdentifier">IBFirstResponder</string>
                <string key="targetRuntimeIdentifier">IBIPadFramework</string>
            </object>
            <object class="IBUIView" id="766721923">
                <reference key="NSNextResponder"/>
                <int key="NSvFlags">274</int>
                <string key="NSFrame">{{0, 20}, {768, 1004}}</string>
                <reference key="NSSuperview"/>
                <reference key="NSWindow"/>
                <object class="NSColor" key="IBUIBackgroundColor">
                    <int key="NSColorSpace">3</int>
                    <bytes key="NSWhite">MQA</bytes>
                    <object class="NSColorSpace" key="NSCustomColorSpace">
                        <int key="NSID">2</int>
                    </object>
                </object>
                <object class="IBUISimulatedStatusBarMetrics" key="IBUISimulatedStatusBarMetrics">
                    <int key="IBUIStatusBarStyle">2</int>
                </object>
                <string key="targetRuntimeIdentifier">IBIPadFramework</string>
            </object>
        </array>
        <object class="IBObjectContainer" key="IBDocument.Objects">
            <array class="NSMutableArray" key="connectionRecords">
                <object class="IBConnectionRecord">
                    <object class="IBCocoaTouchOutletConnection" key="connection">
                        <string key="label">view</string>
                        <reference key="source" ref="841351856"/>
                        <reference key="destination" ref="766721923"/>
                    </object>
                    <int key="connectionID">3</int>
                </object>
            </array>
            <object class="IBMutableOrderedSet" key="objectRecords">
                <array key="orderedObjects">
                    <object class="IBObjectRecord">
                        <int key="objectID">0</int>
                        <array key="object" id="0"/>
                        <reference key="children" ref="1000"/>
                        <nil key="parent"/>
                    </object>
                    <object class="IBObjectRecord">
                        <int key="objectID">-1</int>
                        <reference key="object" ref="841351856"/>
                        <reference key="parent" ref="0"/>
                        <string key="objectName">File's Owner</string>
                    </object>
                    <object class="IBObjectRecord">
                        <int key="objectID">-2</int>
                        <reference key="object" ref="606714003"/>
                        <reference key="parent" ref="0"/>
                    </object>
                    <object class="IBObjectRecord">
                        <int key="objectID">2</int>
                        <reference key="object" ref="766721923"/>
                        <reference key="parent" ref="0"/>
                    </object>
                </array>
            </object>
            <dictionary class="NSMutableDictionary" key="flattenedProperties">
                <string key="-1.CustomClassName">ViewController</string>
                <string key="-1.IBPluginDependency">com.apple.InterfaceBuilder.IBCocoaTouchPlugin</string>
                <string key="-2.CustomClassName">UIResponder</string>
                <string key="-2.IBPluginDependency">com.apple.InterfaceBuilder.IBCocoaTouchPlugin</string>
                <string key="2.IBPluginDependency">com.apple.InterfaceBuilder.IBCocoaTouchPlugin</string>
            </dictionary>
            <dictionary class="NSMutableDictionary" key="unlocalizedProperties"/>
            <nil key="activeLocalization"/>
            <dictionary class="NSMutableDictionary" key="localizations"/>
            <nil key="sourceID"/>
            <int key="maxID">3</int>
        </object>
        <object class="IBClassDescriber" key="IBDocument.Classes">
            <array class="NSMutableArray" key="referencedPartialClassDescriptions">
                <object class="IBPartialClassDescription">
                    <string key="className">ViewController</string>
                    <string key="superclassName">UIViewController</string>
                    <object class="IBClassDescriptionSource" key="sourceIdentifier">
                        <string key="majorKey">IBProjectSource</string>
                        <string key="minorKey">./Classes/ViewController.h</string>
                    </object>
                </object>
            </array>
        </object>
        <int key="IBDocument.localizationMode">0</int>
        <string key="IBDocument.TargetRuntimeIdentifier">IBIPadFramework</string>
        <bool key="IBDocument.PluginDeclaredDependenciesTrackSystemTargetVersion">YES</bool>
        <int key="IBDocument.defaultPropertyAccessControl">3</int>
        <bool key="IBDocument.UseAutolayout">YES</bool>
        <string key="IBCocoaTouchPluginVersion">1856</string>
    </data>
</archive> 
```

但是没有找到关于 plist 中元素的文档。

我发现的一个解决方案是通过创建一个类似的 XIB 文件并使用它的 plist 来检查。试试这个，写这个 plist 数据，扩展名为 .xib 并加载该文件。

愿此链接对您有所帮助，

[这里](https://stackoverflow.com/questions/2618313/load-and-display-a-xib-from-the-web)

谢谢，

纳文山

# multithreading - 使用 Boost Thread 和 OpenCV OSX 显示 Windows 时出错

> ID：13656788
> 
> 赞同：0
> 
> 时间：2012-12-01T05:42:08.457
> 
> 标签：multithreading, macos, boost, opencv, homebrew

所以我知道以下链接：[Problem access camera when using Boost thread on OSX](https://stackoverflow.com/questions/5199257/problem-accessing-camera-when-using-boost-thread-on-osx)

但我的问题是，在 boost 线程中使用 openCV 时，我无法显示窗口。IE：

```
int main(int argc, char* argv[]) {
    CvCapture* cvInputObj = cvCaptureFromCAM((CV_CAP_ANY)); //OSX
    assert( cvInputObj != NULL ); //term on fail here
    cVision vision(cvInputObj); //Define cVision thread obj
    boost::thread cVision_thd(boost::bind(&cVision::Run, &vision));
    cVision_thd.join();
    std::cout<<"System Going Down..."<<std::endl;
} 
```

在 cVision 中，我做了一堆 openCv 调用，例如 for ex：

```
 cvNamedWindow("MONITOR", CV_WINDOW_AUTOSIZE);
        cvShowImage("MONITOR", imCur); 
```

etcetc，其中 imCur 被提取出来：

```
 imCur = cvQueryFrame(input); 
```

这个确切的代码在 Linux 中完美运行。我最初使用自定义 makefile 尝试过这个。那没有用。在此之后，我尝试使用 CMAKE。结果还是一样。并且在linux中仍然可以正常工作。我使用自制软件安装了 openCV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:41:49.747

在线程中创建窗口`main`，然后将窗口的名称作为参数传递给`cVision`构造函数。

请记住，该窗口是通过以下方式创建的：`cvNamedWindow("MONITOR", CV_WINDOW_AUTOSIZE);`

# boost - Cilk++ 与 Boost 库

> ID：13656792
> 
> 赞同：1
> 
> 时间：2012-12-01T05:42:28.557
> 
> 标签：boost, cilk, cilk-plus

使用 Boost Library 编译 Cilk++ 代码时遇到问题。

1.  Boost 库已安装在 /usr/include 之外。

在使用 cilk++ 编译时，我使用了 -I 选项来指定 boost 目录。我收到以下错误。

```
 /home/user/boost_1_51_0/boost/multi_array.hpp: In member function
 ‘boost::multi_array<T, NumDims, Allocator>& cilk boost::multi_array<T,
 NumDims, Allocator>::resize(const
 boost::detail::multi_array::extent_gen<NumDims>&) [with T = float,
 long unsigned int NumDims = 2ul, Allocator = std::allocator<float>]’:
 kdtree2.h:95: instantiated from here
 /home/user/boost_1_51_0/boost/multi_array.hpp:415: error: no matches
 converting function ‘min’ to type ‘const
 boost::multi_array_types::size_type& (cilk*)(const
 boost::multi_array_types::size_type&, const
 boost::multi_array_types::size_type&)’
 /home/user/cilk/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.2.4/../../../../include/c++/4.2.4/bits/stl_algobase.h:182:
 error: candidates are: template<class _Tp> const _Tp& std::min(const
 _Tp&, const _Tp&) /home/user/cilk/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.2.4/../../../../include/c++/4.2.4/bits/stl_algobase.h:226:
 error: template<class _Tp, class _Compare> const _Tp& std::min(const
 _Tp&, const _Tp&, _Compare) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:20:32.430

该问题通过在编译期间使用 -isystem 选项得到解决。

# android - 使用 ADT 21 时如何定义用户屏幕？

> ID：13656793
> 
> 赞同：1
> 
> 时间：2012-12-01T05:42:37.777
> 
> 标签：android, eclipse, adt

我昨晚把我的ADT更新到了21，但后来发现在ADT XML Overlay工具中，我无法定义自定义屏幕（1024*768，mdpi）。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:02:42.073

将您的 ADT 更新到版本 21 之后。

**`Add Custom`在旧版本中，如果您想要自定义设备配置，每次都必须设置屏幕。**

在 ADT21 Oversion 中，您可以通过

> **打开`AVD Manager`，你可以定义你的自定义屏幕`"Device Definition"`**

**替代方案（更简单的方法）**

> 在最新版本中，您不需要根据上述建议设置自定义设备配置，因为它提供了更简单的方法。您>只需使用您的设备配置制作模拟器，然后您将在`Graphical Layout`XML 中看到带有模拟器名称的那些配置

就像在使用名称为“Nexus7_Android_4.2”的Android 4.2创建我的Nexus7模拟器模拟器之后，我将自动在xml的图形布局中获得此设备配置。

下面是它的屏幕截图。

![在此处输入图像描述](../Images/b97d1e5e83c13f9e3be2d0ac367cfeab.png)

希望它会帮助你。

# zend-framework - 如何将图像从临时文件夹移动到zend框架服务器中项目内的文件夹？

> ID：13656798
> 
> 赞同：0
> 
> 时间：2012-12-01T05:43:06.623
> 
> 标签：zend-framework, zend-form, zend-file

我有用户可以上传图片的表格。我在本地工作，当用户上传添加到临时文件夹中的照片时，我需要将其移动到项目内的文件夹中。我需要知道如何在实时服务器中执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:08:34.313

如果你想用 Zend Framework 来做，使用 Zend_Filter_File_Rename：

```
 $moveTo = '/uploads';

    $upload = new Zend_File_Transfer_Adapter_Http();
    $upload->addValidator('Count', false, array('min' => 1, 'max' => 1))
           ->addValidator('Size', false, array('max' => '2000kB'))
           ->setDestination($moveTo);

    if (!$upload->isValid()) {
        return false;
    }

    $upload->receive();
    $name = $upload->getFileName();
    $newFile = "nefile.png";

    $filterFileRename = new Zend_Filter_File_Rename(array(
        'target'    => $moveTo . '/' . $nefile;
        'overwrite' => true
    ));
    $file = $filterFileRename->filter($name); 
```

# java - 在 Java 中循环一个 MIDI 序列

> ID：13656804
> 
> 赞同：4
> 
> 时间：2012-12-01T05:44:16.520
> 
> 标签：java, loops, delay, midi, javasound

我正在尝试在我正在制作的 java 游戏中循环一个 MIDI 序列，但我遇到了一些问题。

我当前的代码确实重复了这个序列，但是在序列结束和重新启动之间有很大的延迟。我怎样才能消除这个？

这是我的代码：

```
try
    {
    // From file
        final Sequence sequence = MidiSystem.getSequence(new File("main menu.mid"));
        sequencer = MidiSystem.getSequencer();
        sequencer.open();
        sequencer.addMetaEventListener(new MetaEventListener() {
            public void meta(MetaMessage msg) {
                if (msg.getType() == 47) { // End of track
                    sequencer.setTickPosition(0);
                    try
                    {
                        sequencer.setSequence(sequence);
                    } catch(InvalidMidiDataException e) {e.printStackTrace();}
                    sequencer.start();
                }
            }
        });
        sequencer.setSequence(sequence);

    // Start playing
        sequencer.start();
    } catch (IOException e) {e.printStackTrace();}
      catch (MidiUnavailableException e) {e.printStackTrace();}
      catch (InvalidMidiDataException e) {e.printStackTrace();} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:30:52.170

这个改编自[Java Sound tag Wiki](https://stackoverflow.com/tags/javasound/info)的源在循环之间没有“长时间延迟”的情况下播放 MIDI，这表明您听到的延迟是现有轨道的无声前奏/后奏的一部分。

```
import javax.sound.midi.*;
import javax.swing.JOptionPane;
import java.net.URL;

class LoopMidi {

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://pscode.org/media/EverLove.mid");

        Sequence sequence = MidiSystem.getSequence(url);
        Sequencer sequencer = MidiSystem.getSequencer();

        sequencer.open();
        sequencer.setSequence(sequence);
        //sequencer.setLoopStartPoint(2000);
        //sequencer.setLoopEndPoint(4000);
        sequencer.setLoopCount(5);

        sequencer.start();
        JOptionPane.showMessageDialog(null, "Everlasting Love");
    }
} 
```

那么解决方案在于：

1.  修剪 MIDI 轨道以消除这些延迟。
2.  设置现有 MIDI 的循环点（如上所示，但已注释掉）。

# objective-c - 如何在ios中生成条形码图像

> ID：13656813
> 
> 赞同：4
> 
> 时间：2012-12-01T05:46:13.437
> 
> 标签：objective-c

我正在使用以下代码生成条形码并在当前视图中显示条形码

```
OBLinear *pLinear = [OBLinear new];
    [pLinear setNBarcodeType: OB_CODE128A];
    [pLinear setPDataMsg: [[NSString alloc] initWithString: (@"SUKUMAR")]];
    //[pLinear setPSupData: [[NSString alloc] initWithString: (@"14562")]];
    [pLinear setFX: USER_DEF_BAR_WIDTH];
    [pLinear setFY: USER_DEF_BAR_HEIGHT];

    [pLinear setFLeftMargin: (USER_DEF_LEFT_MARGIN)];
    [pLinear setFRightMargin: (USER_DEF_RIGHT_MARGIN)];
    [pLinear setFTopMargin: (USER_DEF_TOP_MARGIN)];
    [pLinear setFBottomMargin: (USER_DEF_BOTTOM_MARGIN)];

    [pLinear setNRotate: (OB_Rotate0)];

    UIFont *pTextFont = [UIFont fontWithName: @"Arial" size: 8.0f];
    [pLinear setPTextFont: pTextFont];

 [pLinear drawWithView:view]; 
```

这工作正常，但是我需要生成条形码而不在视图中显示它。

如何生成条形码图像而不在视图中显示它。如果有人知道如何做到这一点，请帮助我。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:33:00.490

我猜这是您正在使用的类的接口：[OBLinear.h](https://github.com/tarnfeld/problem/blob/master/OBLinear.h)

如果是这样，看起来你可以`UIImage`通过这样做来生成：

```
UIImage *image;
[plLinear drawWithImage:&image]; 
```

然后你可以做任何你想做的事情`image`。例如，您可以使用`UIImagePNGRepresentation`PNG 数据将其转换为 PNG 并将其上传到您的服务器，或将其保存到文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T06:43:51.677

您可能正在寻找类似这样的问题：

[将 UIView 捕获为 UIImage](https://stackoverflow.com/questions/7177637/capture-uiview-as-uiimage)

# firefox - 从 Azure Blob 提供 Web 字体时出现 Firefox 跨域问题

> ID：13656815
> 
> 赞同：0
> 
> 时间：2012-12-01T05:46:33.180
> 
> 标签：firefox, web-config, same-origin-policy, azure-blob-storage, webfonts

我已经使用 Azure 网站设置了我的网站，并创建了一个存储帐户并为该帐户启用了 CDN。然后，我将所有静态文件移至我的存储帐户。问题是 Firefox 和 IE 不显示我的网络字体。

如何创建指定的标头`Access-Control-Allow-Origin "*"`？

# ruby - 带有 Bootstrap 复选框的 simple_form

> ID：13656819
> 
> 赞同：25
> 
> 时间：2012-12-01T05:47:10.077
> 
> 标签：ruby, twitter-bootstrap, erb, simple-form

我将 simple_form 与 Bootstrap 一起使用，我希望将“记住我”复选框内嵌在标签的左侧，如 Twitter Bootstrap 文档中所示：http: [//twitter.github.com/bootstrap/base- css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

我的表单代码如下所示：

```
<%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => { :class => 'well'}) do |f| %>
    <%= f.input :email %>
    <%= f.input :password %>
    <%= f.input :remember_me, :as => :boolean if devise_mapping.rememberable?  %>

    <%= f.button :submit, "Sign In" %>

<% end %> 
```

结果是复选框顶部的“记住我”标签。

我搞砸了什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-01T09:17:59.547

有许多选项，请参阅[此处](https://github.com/plataformatec/simple_form/issues/424)了解更多选项：

最直接的（我认为）是在您的复选框上使用`:label => false`and`:inline_label => true`来更改标签在 HTML 中的位置。

`<%= f.input :remember_me, :as => :boolean, :label => false, :inline_label => true if devise_mapping.rememberable? %>`

这对我来说是这样的：

![在此处输入图像描述](../Images/3028fc063c1862c1def9198de3824f1d.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-23T18:30:54.307

@alol 的答案非常适用于垂直表单（字段顶部的标签），但如果您正在使用水平表单并且您希望复选框标签显示在复选框的右侧，但仍与布局保持一致表格，你可以这样做：

```
f.input :remember_me, :as => :boolean, :label => "&nbsp;", :inline_label => true if devise_mapping.rememberable? 
```

如果需要，您还可以传递特定标签以用作内联标签而不是`true`：

```
f.input :remember_me, :as => :boolean, :label => "&nbsp;", :inline_label => "My Label" if devise_mapping.rememberable? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-15T21:52:03.137

我认为这个更简单一点：

```
f.input :remember_me, wrapper: :vertical_boolean, as: :boolean  if devise_mapping.rememberable? 
```

`config/initializers/simple_form_bootstrap.rb`包装器至少`simple_form 3.1.0rc2`在安装时捆绑在一起：

```
rails g simple_form:install --bootstrap 
```

# opengl - opengl 按四元数旋转

> ID：13656822
> 
> 赞同：0
> 
> 时间：2012-12-01T05:48:00.673
> 
> 标签：opengl, rotation

[我像这样](http://www.gamedev.net/page/resources/_/technical/math-and-physics/quaternion-powers-r1095)实现了我的四元数类。我可以将四元数转换为 3x3 旋转矩阵，但是我应该如何将它应用到我的模型视图矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:59:08.850

glMultMatrixf(GLfloat*) 和 glMultMatrixd(GLdouble*) 完全满足您的需求。唯一的事情是通过添加一些 0 和 1 将 3x3 矩阵 (O) 转换为 4x4 矩阵 (O')：

```
 |       0|
O' = |   O   0|
     |       0|
     | 0 0 0 1| 
```

请注意，openGL 以列优先顺序存储矩阵（如在 Fortran 中）。

# c# - 从 C# 中的 HTML 页面源获取最大的图像

> ID：13656828
> 
> 赞同：1
> 
> 时间：2012-12-01T05:48:57.040
> 
> 标签：c#, xaml, windows-runtime

基本上，我要做的是获取一个图像来表示一个页面（用于在 XAML GridView 中快速浏览）。

我有页面 URL（它是 HTML 内容），但现在我不完全确定如何继续。我可以只使用 Favicon，但我认为它不能很好地扩展到我用来显示它的 200x200 框。另一种选择（据我所知）是查看 HTML 源代码并挑选出最大的图像。

除了使用正则表达式来查找所有图像标签的高度/宽度然后比较它们之外，在 C# 中是否有更简单/更简单的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:59:27.640

无法从 HTML 源代码中确定图像的大小。`img`标签不需要`height`and`width`参数。如果未指定，则图像以其实际大小显示。如果`img`页面上的所有标签都指定了它们的高度和宽度，您可以选择具有最大值的标签。但这些是*显示*尺寸。实际尺寸可能大不相同。

100% 确定的唯一方法是下载每个图像并获取其大小。

顺便说一句，如果你在解析 HTML，你可能不应该用正则表达式来做。我知道这看起来很简单，但你几乎肯定会弄错而不处理一些常见情况。[通过使用Html Agility Pack](http://htmlagilitypack.codeplex.com/)之类的东西，您将节省大量时间和挫败感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:52:15.000

你可以试试

```
imageObject.ActualWidth 

imageObject.ActualHeight 
```

特性

# django - 如何在 django 中将文件流式传输到客户端

> ID：13656831
> 
> 赞同：4
> 
> 时间：2012-12-01T05:49:34.073
> 
> 标签：django, file, django-views, filestream

我想知道如何使用 django 将数据流式传输到客户端。

**目标**

用户提交表单，表单数据被传递给返回字符串的 Web 服务。字符串被打包 ( `tar.gz`) 并且 tarball 被发送回给用户。

我不知道是什么方法。我搜索并找到[了这个](http://djangosnippets.org/snippets/365/)，但我只有一个字符串，我不知道它是否是我想要的东西，我不知道用什么代替`filename = __file__`，因为我没有文件 - 只是一个字符串. 如果我为每个用户创建一个新文件，这将不是一个好方法。所以请帮助我。（对不起，我是网络编程的新手）。

编辑：

```
$('#sendButton').click(function(e) {
        e.preventDefault();
        var temp = $("#mainForm").serialize();
        $.ajax({
            type: "POST",
            data: temp,
            url: 'main/',
            success: function(data) {                
                $("#mainDiv").html(data.form);
                ????                

            }
        });
    }); 
```

我想使用ajax，所以我应该怎么做才能成功使用ajac函数并返回视图。真的感谢。

我的观点.py：

```
def idsBackup(request):
    if request.is_ajax():        
        if request.method == 'POST':
           result = ""
           form = mainForm(request.POST)
           if form.is_valid():
               form = mainForm(request.POST)
               //do form processing and call web service               

                    string_to_return = webserviceString._result 
                    ???
           to_json = {}
           to_json['form'] = render_to_string('main.html', {'form': form}, context_instance=RequestContext(request))
           to_json['result'] = result
           ???return HttpResponse(json.dumps(to_json), mimetype='application/json')
        else:
            form = mainForm()
        return render_to_response('main.html', RequestContext(request, {'form':form}))
    else:
        return render_to_response("ajax.html", {}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T06:26:46.770

[您可以使用字符串内容而不是实际文件创建ContentFile](https://docs.djangoproject.com/en/dev/ref/files/file/#the-contentfile-class)的 django 文件实例，然后将其作为响应发送。

示例代码：

```
from django.core.files.base import ContentFile
def your_view(request):
    #your view code
    string_to_return = get_the_string() # get the string you want to return.
    file_to_send = ContentFile(string_to_return)
    response     = HttpResponse(file_to_send,'application/x-gzip')
    response['Content-Length']      = file_to_send.size    
    response['Content-Disposition'] = 'attachment; filename="somefile.tar.gz"'
    return response 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T06:28:26.817

您可以修改代码段中的 send_zipfile 以满足您的需要。只需使用 StringIO 将您的字符串转换为可以传递给 FileWrapper 的类似文件的对象。

```
import StringIO, tempfile, zipfile
...
# get your string from the webservice
string = webservice.get_response() 
...
temp = tempfile.TemporaryFile()

# this creates a zip, not a tarball
archive = zipfile.ZipFile(temp, 'w', zipfile.ZIP_DEFLATED)

# this converts your string into a filelike object
fstring = StringIO.StringIO(string)   

# writes the "file" to the zip archive
archive.write(fstring)
archive.close()

wrapper = FileWrapper(temp)
response = HttpResponse(wrapper, content_type='application/zip')
response['Content-Disposition'] = 'attachment; filename=test.zip'
response['Content-Length'] = temp.tell()
temp.seek(0)
return response 
```

# javascript - 使用 jQuery 插件“Acid Tabs”在页面加载时选择特定选项卡

> ID：13656835
> 
> 赞同：1
> 
> 时间：2012-12-01T05:49:54.713
> 
> 标签：javascript, jquery, html

首先让我说我对javascript很陌生，所以如果这是一个简单的问题，我很抱歉。我正在使用[此处](http://www.my-html-codes.com/jquery-tabs-my-first-plugin)找到的 jQuery 插件“Acid Tabs”来处理我网页上的标签。到目前为止，我已经能够做我想做的一切，除了在页面加载时显示 #1 以外的选项卡。

据我所知，该插件没有提供一种简单的方法来做到这一点，而且我在这里找不到似乎可行的答案。我曾认为我可以在其他选项卡之一上提供模拟点击，并在页面中插入以下代码：

```
$('#tabHeader_2').click (); 
```

但是在尝试了很多变化之后，我找不到让它工作的方法。我希望我在这里遗漏了一些明显的东西，有什么办法让它工作吗？

# android - 安卓防止apk

> ID：13656836
> 
> 赞同：6
> 
> 时间：2012-12-01T05:50:01.237
> 
> 标签：android, apk

我构建了一个 android 应用程序，但我希望当我将其用于测试时，用户无法复制它，并且该 apk 不应安装在其他设备上？怎么可能。我可以保护该 apk 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:00:39.343

获取您要测试的设备的设备 ID，然后检查当前设备是否是您想要的设备之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:53:10.353

有一些在线服务可以让您上传应用程序并通过浏览器使用它，例如 appuffer.com。此外，HP 还提供了将应用程序上传到其网络中的真实设备并在远程设备上在线测试您的应用程序的能力。如果您不想与测试人员共享代码，我认为这是一种解决方案。

# selenium - 在 Windows 7 中使用 ruby （我有红宝石矿）、黄瓜和 capybara 设置 selenium webdriver

> ID：13656838
> 
> 赞同：0
> 
> 时间：2012-12-01T05:50:18.493
> 
> 标签：selenium

我想在窗口 7 中使用 ruby​​ cucumber 和 capybara 设置 selenium webdriver，以便在家练习。有人可以提供详细的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:34:57.900

我举个例子：

```
require "selenium-webdriver"
gem "test-unit"
require "test/unit"

class Papidal < Test::Unit::TestCase

  def setup
    @driver = Selenium::WebDriver.for :firefox
    #@base_url = "http://localhost:8090/"
    @accept_next_alert = true
    @driver.manage.timeouts.implicit_wait = 30
    @verification_errors = []
  end

  def teardown
    @driver.quit
    assert_equal [], @verification_errors
  end

  def test_papidal
    @driver.get("http://localhost:8090/myproject/")
    @driver.find_element(:xpath, "//a[@wicketpath='showModalLink']").click
  end

  def element_present?(how, what)
    @driver.find_element(how, what)
    true
  rescue Selenium::WebDriver::Error::NoSuchElementError
    false
  end

  def verify(&blk)
    yield
  rescue Test::Unit::AssertionFailedError => ex
    @verification_errors << ex
  end

  def close_alert_and_get_its_text(how, what)
    alert = @driver.switch_to().alert()
    if (@accept_next_alert) then
      alert.accept()
    else
      alert.dismiss()
    end
    alert.text
  ensure
    @accept_next_alert = true
  end
end 
```

如果您想将此与 Internet Explorer 一起使用：

*   更改 @driver = Selenium::WebDriver.for :firefox 通过这个 @driver = Selenium::WebDriver.for :ie
*   放入您的 PATH（环境变量）：IEDriverServer.exe（您可以从以下网址下载：[http](http://code.google.com/p/selenium/downloads/detail?name=IEDriverServer_x64_2.30.2.zip) ://code.google.com/p/selenium/downloads/detail?name=IEDriverServer_x64_2.30.2.zip ）并在执行前执行剧本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:02:14.130

selenium 默认与 capybara 一起提供，将 :js => true 添加到您的黄瓜步骤中，您应该一切顺利。我正在使用没有黄瓜的 rspec，但我有类似的东西

```
describe "Something" do 
it "should use selenium", js: true do 

page.should have_content "It works!"
end 
```

你应该看到 Firefox 出现了你可能想考虑一个无头驱动程序来降低浏览器启动成本

这是 Rails 3 in Action 的一个项目，它有一些使用 selenium 的特性

[https://github.com/rails3book/ticketee](https://github.com/rails3book/ticketee)

# c# - 使用枚举将字符串转换为整数并将其存储为c#中的整数数组

> ID：13656842
> 
> 赞同：0
> 
> 时间：2012-12-01T05:50:39.237
> 
> 标签：c#, string, enums, foreach, to-char

我想将字符串转换为字符数组。此外，字符数组中的值必须使用枚举转换为数值。作为整数返回的值必须存储在整数数组中。

我的编码是：

```
enum alphabets {  a = 1,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}
static void Main()
    {
       int row,column;
       String value1;
       Console.WriteLine("Enter string");
       string UserString= Console.ReadLine();
       int len = UserString.Length;

       if (len % 2 == 0)
          {
             row = len / 2;
             column = len / 2;
             PrintMatrix(row, column, len, value1);
          }

    Console.ReadKey();
    }

static void PrintMatrix(int row, int column, int len, string value1)
{
    Console.WriteLine("Matrix");
    string mat_row = value1.Substring(0, row);
    string mat_col = value1.Substring(row, len - row);
    GenNum(mat_row,len);
    GenNum(mat_col,len);
}

static void GenNum(string val, int len)
{
    string res = val; 

    foreach (char c in res)
      {
         string name = c.ToString();
         alphabets parsed = (alphabets)Enum.Parse(typeof(alphabets), name);
         int NumGen = (int)parsed;
         Console.WriteLine (NumGen);
      }
} 
```

我尝试将其转换`string name`为`char[]`如下所示的错误：

![错误1](../Images/a7f19136675b77e950f3f9d7d582c7c9.png)

所以，我试图改变`NumGen as int[]`，它说这样的错误：

![错误2](../Images/bd4449942777c40031e8755b69edad4a.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:02:20.803

看看下面是不是你需要的，GenNum 现在返回你的字符串表示的 int[] ！

```
 enum alphabets { a = 1, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z }
    static void Main()
    {
        Console.WriteLine("Enter string");
        string UserString = Console.ReadLine();
        int len = UserString.Length;
        int row = 1, column = 3;

        if (len % 2 == 0)
        {
            row = len / 2;
            column = len / 2;
            PrintMatrix(row, column, len, UserString);
        }

        Console.ReadKey();
    }

    static void PrintMatrix(int row, int column, int len, string value1)
    {
        Console.WriteLine("Matrix");
        string mat_row = value1.Substring(0, row);
        string mat_col = value1.Substring(row, len - row);
        int[] arrayRow = GenNum(mat_row, len);
        int[] arrayCol = GenNum(mat_col, len);
    }

    static int[] GenNum(string val, int len)
    {
        string res = val;
        int[] intArray = new int[len];
        int index = 0;

        foreach (char c in res)
        {
            string name = c.ToString();
            alphabets parsed = (alphabets)Enum.Parse(typeof(alphabets), name);
            int NumGen = (int)parsed;
            intArray[index++] = NumGen;
            Console.WriteLine(NumGen);
        }

        return intArray;
    } 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:06:23.937

您正在使用此枚举方法来执行一些操作，只需将字符的数值转换为 int，然后从最小字符 ('a') 中减去并加一即可。当然，这仅适用于拉丁小写字母，但这似乎就是您要处理的全部内容，因此我们可以忽略对字符的数值进行算术运算时可能出现的众多问题。

要将 a 转换`char`为`int`，您可以使用以下命令：

```
// ch is a char
int intVal = (int)ch; 
```

您可以将这些保存在一个数组中，您应该创建一个适当长度的数组（即输入字符串的长度），然后在循环遍历源字符串的每个字符时，将`int`结果保存在正确的槽中的数组。有很多方法可以做到这一点。就个人而言，我会使用一个可枚举的块，如下所示：

```
private static IEnumerable<int> StringToInts(string val) {
    var aVal = (int)'a';
    foreach(var ch in val)
        yield return (int)ch - aVal + 1;
} 
```

然后在您的调用代码中，您可以使用 LINQ 提取一个数组：

```
var intArray = StringToInts("Some string").ToArray(); 
```

# c# - 如何以编程方式禁用 C# 控制台应用程序的快速编辑模式？

> ID：13656846
> 
> 赞同：31
> 
> 时间：2012-12-01T05:51:28.847
> 
> 标签：c#, console-application

我已经尝试了几种解决方案，比如一个 ->

[http://www.pcreview.co.uk/forums/console-writeline-hangs-if-user-click-into-console-window-t1412701.html](http://www.pcreview.co.uk/forums/console-writeline-hangs-if-user-click-into-console-window-t1412701.html)

但是，我观察到 GetConsoleMode(IntPtr hConsoleHandle, out int mode) 中的模式对于不同的控制台应用程序会有所不同。它不是一成不变的。

我可以在控制台应用程序上禁用鼠标单击（右/左按钮）以实现相同的场景。我发现它可以使用 IMessageFilter 完成，但仅适用于窗口窗体应用程序，而不适用于控制台应用程序。

请指导。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2016-04-19T14:06:03.623

对于像我这样喜欢*简单*地复制/粘贴代码的人，这里是受接受答案启发的代码：

```
using System;
using System.Runtime.InteropServices;

static class DisableConsoleQuickEdit {

   const uint ENABLE_QUICK_EDIT = 0x0040;

   // STD_INPUT_HANDLE (DWORD): -10 is the standard input device.
   const int STD_INPUT_HANDLE = -10;

   [DllImport("kernel32.dll", SetLastError = true)]
   static extern IntPtr GetStdHandle(int nStdHandle);

   [DllImport("kernel32.dll")]
   static extern bool GetConsoleMode(IntPtr hConsoleHandle, out uint lpMode);

   [DllImport("kernel32.dll")]
   static extern bool SetConsoleMode(IntPtr hConsoleHandle, uint dwMode);

   internal static bool Go() {

      IntPtr consoleHandle = GetStdHandle(STD_INPUT_HANDLE);

      // get current console mode
      uint consoleMode;
      if (!GetConsoleMode(consoleHandle, out consoleMode)) {
         // ERROR: Unable to get console mode.
         return false;
      }

      // Clear the quick edit bit in the mode flags
      consoleMode &= ~ENABLE_QUICK_EDIT;

      // set the new mode
      if (!SetConsoleMode(consoleHandle, consoleMode)) {
         // ERROR: Unable to set console mode
         return false;
      }

      return true;
   }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-01T06:09:29.620

如果要禁用快速编辑模式，则需要调用[GetConsoleMode](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683167%28v=vs.85%29.aspx)来获取当前模式。然后清除启用快速编辑的位，并调用[SetConsoleMode](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686033%28v=vs.85%29.aspx)。假设您有非托管函数的托管原型，您将编写：

```
const int ENABLE_QUICK_EDIT = 0x0040;

IntPtr consoleHandle = GetConsoleWindow();
UInt32 consoleMode;

// get current console mode
if (!GetConsoleMode(consoleHandle, out consoleMode))
{
    // Error: Unable to get console mode.
    return;
}

// Clear the quick edit bit in the mode flags
mode &= ~ENABLE_QUICK_EDIT;

// set the new mode
if (!SetConsoleMode(consoleHandle, consoleMode))
{
    // ERROR: Unable to set console mode
} 
```

如果要禁用鼠标输入，则要清除鼠标输入位。

```
const int ENABLE_MOUSE_INPUT = 0x0010;

mode &= ~ENABLE_MOUSE_INPUT; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-20T11:17:12.037

阅读上述答案后，无法使用 GetConsoleWindow()。而是必须使用 GetStdHandle()。

所以这里有一个用于启用/禁用 QuickEditMode 的复制和粘贴类。调用**ConsoleWindow.QuickEditMode(false);** 禁用控制台窗口的快速编辑模式。

```
using System;
using System.Runtime.InteropServices;

public static class ConsoleWindow
{
    private static class NativeFunctions
    {
        public enum StdHandle : int
        {
            STD_INPUT_HANDLE = -10,
            STD_OUTPUT_HANDLE = -11,
            STD_ERROR_HANDLE = -12,
        }

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern IntPtr GetStdHandle(int nStdHandle); //returns Handle

        public enum ConsoleMode : uint
        {
            ENABLE_ECHO_INPUT = 0x0004,
            ENABLE_EXTENDED_FLAGS = 0x0080,
            ENABLE_INSERT_MODE = 0x0020,
            ENABLE_LINE_INPUT = 0x0002,
            ENABLE_MOUSE_INPUT = 0x0010,
            ENABLE_PROCESSED_INPUT = 0x0001,
            ENABLE_QUICK_EDIT_MODE = 0x0040,
            ENABLE_WINDOW_INPUT = 0x0008,
            ENABLE_VIRTUAL_TERMINAL_INPUT = 0x0200,

            //screen buffer handle
            ENABLE_PROCESSED_OUTPUT = 0x0001,
            ENABLE_WRAP_AT_EOL_OUTPUT = 0x0002,
            ENABLE_VIRTUAL_TERMINAL_PROCESSING = 0x0004,
            DISABLE_NEWLINE_AUTO_RETURN = 0x0008,
            ENABLE_LVB_GRID_WORLDWIDE = 0x0010
        }

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern bool GetConsoleMode(IntPtr hConsoleHandle, out uint lpMode);

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern bool SetConsoleMode(IntPtr hConsoleHandle, uint dwMode);
    }

    public static void QuickEditMode(bool Enable)
    {
        //QuickEdit lets the user select text in the console window with the mouse, to copy to the windows clipboard.
        //But selecting text stops the console process (e.g. unzipping). This may not be always wanted.
        IntPtr consoleHandle = NativeFunctions.GetStdHandle((int)NativeFunctions.StdHandle.STD_INPUT_HANDLE);
        UInt32 consoleMode;

        NativeFunctions.GetConsoleMode(consoleHandle, out consoleMode);
        if (Enable)
            consoleMode |= ((uint)NativeFunctions.ConsoleMode.ENABLE_QUICK_EDIT_MODE);
        else
            consoleMode &= ~((uint)NativeFunctions.ConsoleMode.ENABLE_QUICK_EDIT_MODE);

        consoleMode |= ((uint)NativeFunctions.ConsoleMode.ENABLE_EXTENDED_FLAGS);

        NativeFunctions.SetConsoleMode(consoleHandle, consoleMode);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-12T19:32:58.533

对于那些使用 vb.net

```
Const ENABLE_QUICK_EDIT As UInteger = &H40
Const STD_INPUT_HANDLE As Integer = -10

   <DllImport("kernel32.dll", SetLastError:=True)>
Public Function GetStdHandle(ByVal nStdHandle As Integer) As IntPtr
End Function

<DllImport("kernel32.dll")>
Private Function GetConsoleMode(ByVal hConsoleHandle As IntPtr, <Out> ByRef lpMode As UInteger) As Boolean
End Function

<DllImport("kernel32.dll")>
Private Function SetConsoleMode(ByVal hConsoleHandle As IntPtr, ByVal dwMode As UInteger) As Boolean
End Function 

    Friend Function Go() As Boolean
    Dim consoleHandle As IntPtr = GetStdHandle(STD_INPUT_HANDLE)
    Dim consoleMode As UInteger

    If Not GetConsoleMode(consoleHandle, consoleMode) Then
        Return False
    End If

    consoleMode = consoleMode And Not ENABLE_QUICK_EDIT

    If Not SetConsoleMode(consoleHandle, consoleMode) Then
        Return False
    End If

    Return True
End Function

sub main()
go()
end sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-30T18:06:58.943

通过使用下面的代码组合，我可以启用或禁用快速编辑模式。

```
const int ENABLE_QUICK_EDIT = 0x0040;

// STD_INPUT_HANDLE (DWORD): -10 is the standard input device.
const int STD_INPUT_HANDLE = -10;

[DllImport("kernel32.dll", SetLastError = true)]
static extern IntPtr GetStdHandle(int nStdHandle);

[DllImport("kernel32.dll")]
static extern bool GetConsoleMode(IntPtr hConsoleHandle, out int lpMode);

[DllImport("kernel32.dll")]
static extern bool SetConsoleMode(IntPtr hConsoleHandle, int dwMode); 
```

要启用，简单做`currentConsoleMode &= ENABLE_QUICK_EDIT;`

要禁用，请执行 `currentConsoleMode &= ~ENABLE_QUICK_EDIT`

然后调用**SetConsoleMode**。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-01-22T12:02:39.423

我碰巧在我的控制台应用程序中启用了快速编辑模式时偶然发现了同样的问题，该应用程序是用 C 编写的，并且多年来一直在 windows 7 32 位下工作。在将其移植（不是真正的移植，而是调整了一些代码行）到 Windows 10 64 位（仍然是 32 位应用程序）之后，我观察到了相同的行为。所以我寻找解决方案。

但是由于我不知道的原因，代码的工作方式相反，即`ENABLE_QUICK_EDIT_MODE`在模式参数中设置该位实际上会禁用快速编辑模式。并重置位启用快速编辑模式......？？？

这是我的代码：

```
 /// <summary>
/// This flag enables the user to use the mouse to select and edit text. To enable
/// this option, you must also set the ExtendedFlags flag.
/// </summary>
const int QuickEditMode = 64;

// ExtendedFlags must be combined with
// InsertMode and QuickEditMode when setting
/// <summary>
/// ExtendedFlags must be enabled in order to enable InsertMode or QuickEditMode.
/// </summary>
const int ExtendedFlags = 128;

BOOLEAN EnableQuickEdit()
{
    HWND conHandle = GetStdHandle(STD_INPUT_HANDLE);
    int mode;
    DWORD dwLastError = GetLastError();
    if (!GetConsoleMode(conHandle, &mode))
    {
        // error getting the console mode. Exit.
        dwLastError = GetLastError();
        return (dwLastError == 0);
    }
    else 
        dwLastError = 0;
    mode = mode & ~QuickEditMode;

    if (!SetConsoleMode(conHandle, mode | ExtendedFlags))
    {
        // error setting console mode.
        dwLastError = GetLastError();
    }
    else
        dwLastError = 0;
    return (dwLastError == 0);
}

BOOLEAN DisableQuickEdit()
{
    HWND conHandle = GetStdHandle(STD_INPUT_HANDLE);
    int mode;
    DWORD dwLastError = GetLastError();

    if (!GetConsoleMode(conHandle, &mode))
    {
        // error getting the console mode. Exit.
        dwLastError = GetLastError();
        return (dwLastError == 0);
    }
    else
        dwLastError = 0;

    mode = mode | QuickEditMode;

    if (!SetConsoleMode(conHandle, mode))
    {
        // error getting the console mode. Exit.
        dwLastError = GetLastError();
    }
    else
        dwLastError = 0;
    return (dwLastError == 0);
} 
```

问候沃尔夫冈

# .net - ActiveX 作为 .Net 桌面应用程序和浏览器之间的桥梁

> ID：13656852
> 
> 赞同：0
> 
> 时间：2012-12-01T05:52:26.680
> 
> 标签：.net, activex

我想在基于浏览器的应用程序和基于 .Net 的桌面应用程序之间进行通信。我可以使用 ActiveX 作为沟通的桥梁吗？我创建了一个 ActiveX 控件，我可以从浏览器访问它。如何从桌面应用程序访问同一个 ActiveX 实例？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:54:45.793

您希望 .NET 应用程序作为独立的 EXE 启动并获取对浏览器中托管的 ActiveX 对象的引用？我认为浏览器不会公开对它们托管的 ActiveX 控件的访问（更不用说可以有多个浏览器实例，因此也可以有多个 ActiveX 控件实例）。

您**可以**将 .NET 应用程序转换为 DLL，由 ActiveX 控件加载。

# c++ - 无法安装 Visual Studio C++ 包含文件“excpt.h”

> ID：13656856
> 
> 赞同：11
> 
> 时间：2012-12-01T05:53:33.947
> 
> 标签：c++, windows, visual-studio, compiler-errors

我正在尝试编译一个 Visual Studio C++ 项目，但由于编译器报告“无法打开包含文件：'excpt.h'：没有这样的文件或目录”，我无处可去。该问题已在 Internet 上多次报告，但对于我的特殊情况，我找不到任何帮助。问题不在于项目的包含路径设置不正确，问题在于我的计算机中缺少此包含文件（可能还有一堆其他文件）。我的硬盘上没有这样的文件。所以我尝试安装 Windows SDK 7.1。该文件不在已安装的 SDK 中（尽管它应该在）。我尝试修复安装，卸载它，重新安装它......无数次。我也无数次尝试安装、修复、卸载、重新安装 Visual Studio 2010 Professional，安装和不安装 Windows SDK。我什至尝试卸载专业版来安装 express VC++ ......似乎没有任何效果，没有'excpt.h'永远不会安装在我的电脑上。我一无所知...有人有解决方案的提示吗？我在 Windows 7 上。

作为补充信息，请注意“excpt.h”包含在“windows.h”中。此外，“excpt.h”文件通常与 Windows SDK 一起安装在“c:\program files (x86)\microsoft sdks\windows\v7.1\include\”之类的路径下，Visual Studio 则安装在类似的路径下“C:\Program Files\Microsoft Visual Studio 10.0\VC\include\”。

编辑：如果可能有帮助，我可能会添加与我的 Visual Studio 安装相关的文件夹 C:\Program Files\Microsoft Visual Studio 10.0\VC\include 只有两个文件......这当然不正常！！！但是，我找不到任何方法让安装程序安装所有应出现在此目录中的 .h 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T06:09:03.467

查看 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\excpt.h 中是否有它 检查以确保 Visual Studio 中的系统包含路径正确。如果一切都失败了，卸载所有的东西，所有的 SDK 等等，然后重新安装 Visual C++。

第三方搜索程序在查找内容方面比 Windows 程序做得更好。尝试特工 Ransack。免费。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T02:59:48.697

对于那些有同样问题的人，这是我在大约 10 小时的安装/卸载/清理周期后找到的解决方案......我已经使用[它](http://archive.msdn.microsoft.com/vs2010uninstall)完全卸载了 Visual Studio 。之后，使用控制面板，我卸载了 Windows SDK 以及所有可以与它或 Visual Studio 相关联的东西（例如 .NET 框架）。然后，我通过手动删除位于 C:/Program 文件中的 Visual Studio 和 Windows SDK 文件夹来删除所有剩余部分。最后，我删除了注册表中与 Windows SDK 或 Visual Studio 相关的所有条目（它们位于 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft）。然后，我重新安装了 Visual Studio……它终于可以正常工作了。我应该补充一点，在任何安装或卸载步骤之后，我使用 CCleaner 重新启动并清理了注册表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-26T08:11:26.843

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-31T16:40:59.940

我有同样的问题，并尝试了 OP 给出的答案，但没有奏效。`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC`但是，将（特别是 bin、lib 和 include）的内容从可以工作的机器复制到这台机器上是可行的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-07T12:32:36.027

在安装到与 C: 不同的驱动器号时，Visual Studio 2012 安装程序似乎有问题。我已将 VS2012 安装到 D: 驱动器并得到相同的错误。我发现由于某种未知原因，安装程序将一些文件放入了正确的位置：

D:\Program 文件 (x86)\Microsoft Visual Studio 11.0

但其余文件位于

C:\Program 文件 (x86)\Microsoft Visual Studio 11.0

所以我将文件从 C: 移动到 D: 位置，它解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-19T03:36:11.830

有些情况会导致这样的问题。如果你已经卸载了 vs2010。你永远失去了 .net framework 4 的平台 C++ 二进制文件。您必须删除所有 VS 2010 2012 2013，清理系统及其随附组件并从头开始重新安装。或者你可以下载[这个包](http://www.gekius.com/tec/?portfolio=standard-windows-platform-binaries-and-headers-for-visual-studio-2010 "VS2010 的 C++ 二进制文件")。将它们包含在您的项目中，可以正确解决您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-29T07:25:51.220

一种简单的方法，只需从其他计算机复​​制 vc 目录（C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-19T18:17:02.780

修复您的 Visual Studio 安装是一个好主意，但您不一定需要重新安装相同的旧版本 VS。我卸载了 VS 2015，然后修改了我的 VS 2017 安装以添加 VC++ v140 构建工具，现在我的项目构建了。

# iphone - TableViewCell 根据 xcode 中的内容自动调整其高度？

> ID：13656857
> 
> 赞同：1
> 
> 时间：2012-12-01T05:53:43.637
> 
> 标签：iphone, xcode, uitableview

`tableViewCell`我需要根据其中的内容设置高度。我有一些动态高度的标签，标签中`tableViewCell`的行数不是恒定的。有时，如果一个标签的文本是`null`另一个标签，则可能会占据它的位置。所以我需要的是根据内容的高度`tableViewCell`？`autoresize`

```
-(void)viewDidLoad
{
self.tableView=[[UITableView alloc] initWithFrame:CGRectMake(0,150,327,[array count]*205) style:UITableViewStylePlain];
                self.tableView.delegate=self;
                self.tableView.dataSource=self;
                self.tableView.scrollEnabled = NO;
                [self.view addSubview:self.tableView];

                float fscrview = 150 + self.tableView.frame.size.height + 20;
                testscroll.contentSize=CGSizeMake(320, fscrview);
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

        return [array count];
    }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier=@"Cell";

        UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil)
        {
            cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];

            UILabel *name1 = [[UILabel alloc] initWithFrame:CGRectZero];
            name1.tag = 111;
            name1.backgroundColor = [UIColor clearColor];
            [name1 setFont:[UIFont fontWithName:@"Helvetica-Bold" size:14]];
            [name1 setLineBreakMode:UILineBreakModeWordWrap];
            [cell addSubview:name1];

            UILabel *code = [[UILabel alloc] initWithFrame:CGRectZero];
            codetype.tag = 112;
            codetype.backgroundColor = [UIColor clearColor];
            [codetype setFont:[UIFont fontWithName:@"Helvetica" size:12]];
            [codetype setLineBreakMode:UILineBreakModeWordWrap];
            [cell addSubview:codetype];

            line1 = [[UILabel alloc] initWithFrame:CGRectZero];
            line1.tag = 113;
            line1.backgroundColor = [UIColor clearColor];
            [line1 setFont:[UIFont fontWithName:@"Helvetica" size:12]];
            [line1 setLineBreakMode:UILineBreakModeWordWrap];
            [cell addSubview:line1];

            line3 = [[UILabel alloc] initWithFrame:CGRectZero];
            line3.tag = 114;
            line3.backgroundColor = [UIColor clearColor];
            [line3 setFont:[UIFont fontWithName:@"Helvetica" size:12]];
            [line3 setLineBreakMode:UILineBreakModeWordWrap];
            [cell addSubview:line3];

            city = [[UILabel alloc] initWithFrame:CGRectZero];
            city.tag = 115;
            city.backgroundColor = [UIColor clearColor];
            [city setFont:[UIFont fontWithName:@"Helvetica" size:12]];
            [city setLineBreakMode:UILineBreakModeWordWrap];
            [cell addSubview:city];

        }

        cell.accessoryType= UITableViewCellAccessoryDetailDisclosureButton;
        NSMutableDictionary *d =[[NSMutableDictionary alloc]initWithDictionary: [arr2 objectAtIndex:indexPath.row]];

        NSString *name2 = [d  objectForKey:@"Name"];
        CGSize constraint1 = CGSizeMake(175, 2000.0f);
        CGSize size1 = [name2 sizeWithFont: [UIFont fontWithName:@"Helvetica-Bold" size:14] constrainedToSize:constraint1 lineBreakMode:UILineBreakModeWordWrap];
        UILabel *name1 = (UILabel *)[cell viewWithTag:111];
        name1.frame = CGRectMake(105,25, 175, size1.height);
        [name1 setNumberOfLines:size1.height/16];
        name1.text = [d  objectForKey:@"Name"];
        [name1 setTextColor:UIColorFromRGB(COLOR_BLUE)];

        NSString *codetype2 = [d  objectForKey:@"Type"];
        CGSize constraint2 = CGSizeMake(175, 2000.0f);
        CGSize size2 = [codetype2 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint2 lineBreakMode:UILineBreakModeWordWrap];
        UILabel *codetype1 = (UILabel *)[cell viewWithTag:112];
        codetype1.frame = CGRectMake(105,name1.frame.size.height+25, 175, size2.height);
        [codetype1 setNumberOfLines:size2.height/16];
        codetype1.text=[d objectForKey:@"CodeType"];

        NSString *line2 = [d  objectForKey:@"Line1"];
        NSString *line4 = [d  objectForKey:@"Line2"];

        if([line2 isEqualToString:@""])
        {
            if([line4 isEqualToString:@""])
            {
                NSString *city2 = [d  objectForKey:@"City"];
                CGSize constraint4 = CGSizeMake(175, 2000.0f);
                CGSize size4 = [city2 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
               city = (UILabel *)[cell viewWithTag:115];
                city.frame = CGRectMake(105,codetype1.frame.size.height+codetype1.frame.origin.y, 175, size4.height);
                [city setNumberOfLines:0];
                city.text = [d  objectForKey:@"City"];
            }
            else
            {
                NSString *line4 = [d  objectForKey:@"Line2"];

                CGSize constraint4 = CGSizeMake(175, 2000.0f);
                CGSize size4 = [line4 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
                line3 = (UILabel *)[cell viewWithTag:114];
                line3.frame = CGRectMake(105,codetype1.frame.size.height+codetype1.frame.origin.y, 175, size4.height);
                [line3 setNumberOfLines:0];
                line3.text = [d  objectForKey:@"Line2"];

                NSString *city2 = [d  objectForKey:@"City"];
                CGSize constraint5 = CGSizeMake(175, 2000.0f);
                CGSize size5 = [city2 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint5 lineBreakMode:UILineBreakModeWordWrap];
                city = (UILabel *)[cell viewWithTag:115];
                city.frame = CGRectMake(105,line3.frame.size.height+line3.frame.origin.y, 175, size5.height);
                [city setNumberOfLines:0];
                city.text = [d  objectForKey:@"City"];

            }

        }
        else
        {
            NSString *line2 = [d  objectForKey:@"Line1"];
            CGSize constraint3 = CGSizeMake(175, 2000.0f);
            CGSize size3 = [line2 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint3 lineBreakMode:UILineBreakModeWordWrap];
            line1 = (UILabel *)[cell viewWithTag:113];
            line1.frame = CGRectMake(105,codetype1.frame.size.height+codetype1.frame.origin.y, 175, size3.height);
            [line1 setNumberOfLines:0];
            line1.text = [d  objectForKey:@"Line1"];

            if([line4 isEqualToString:@""])
            {
                NSString *city2 = [d  objectForKey:@"City"];
                CGSize constraint5 = CGSizeMake(175, 2000.0f);
                CGSize size5 = [city2 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint5 lineBreakMode:UILineBreakModeWordWrap];
               city = (UILabel *)[cell viewWithTag:115];
                city.frame = CGRectMake(105,line1.frame.size.height+line1.frame.origin.y, 175, size5.height);
                [city setNumberOfLines:0];
                city.text = [d  objectForKey:@"City"];
            }
            else
            {
                NSString *line4 = [d  objectForKey:@"Line2"];

                CGSize constraint4 = CGSizeMake(175, 2000.0f);
                CGSize size4 = [line4 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
                line3 = (UILabel *)[cell viewWithTag:114];
                line3.frame = CGRectMake(105,line1.frame.size.height+line1.frame.origin.y, 175, size4.height-3);
                [line3 setNumberOfLines:0];
                line3.text = [d  objectForKey:@"Line2"];

                NSString *city2 = [d  objectForKey:@"City"];
                CGSize constraint5 = CGSizeMake(175, 2000.0f);
                CGSize size5 = [city2 sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint5 lineBreakMode:UILineBreakModeWordWrap];
                city = (UILabel *)[cell viewWithTag:115];
                city.frame = CGRectMake(105,line3.frame.size.height+line3.frame.origin.y+4, 175, size5.height);
                [city setNumberOfLines:0];
                city.text = [d  objectForKey:@"City"];

            }

        }

        UILabel *state=[[UILabel alloc]initWithFrame:CGRectMake(105,city.frame.size.height+city.frame.origin.y+5,320,10)];
        state.font=[UIFont fontWithName:@"Helvetica" size:12];
        [state setTextAlignment:UITextAlignmentLeft];
        [state setText:[d valueForKey:@"State"]];
        state.tag=116;
        [cell addSubview:state];
        [state release];

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

        return 1;

}   
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
 UIView *sectionHeaderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, tableView.sectionHeaderHeight)];
    sectionHeaderView.backgroundColor = [UIColor colorWithWhite:0 alpha:0];
    sectionHeaderView.userInteractionEnabled = YES;
    sectionHeaderView.tag = section;

    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(12,2, tableView.bounds.size.width-10, 18)];
    headerLabel.backgroundColor = [UIColor whiteColor];
    [headerLabel setTextAlignment:UITextAlignmentCenter];
    headerLabel.textColor = [UIColor grayColor];
    headerLabel.shadowColor = [UIColor darkGrayColor];
    headerLabel.shadowOffset = CGSizeMake(0, 1);
    headerLabel.font = [UIFont boldSystemFontOfSize:18];
    headerLabel.text = @"Details";

    [sectionHeaderView addSubview:headerLabel];

    return sectionHeaderView;
    } 
```

在这里，我将其设为 205 。但是当文本`tableViewCell`增加时，我看不到 last `tableViewCell`..标签的最后几行

我怎样才能`tableViewCell`达到`auto-resize`它的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:26:04.630

您可以在 中指定单元格的高度`– tableView:heightForRowAtIndexPath:`。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGFloat height=60;  //set default row height
    if(check_for_the_rows_which_need_increased_height) {
        height+=50;   //Add appropriate increase
    }
    return height;
} 
```

您需要调用`[yourTableView reloadData]`或`[yourTableView reloadRowsAtIndexPaths:indexPath withRowAnimation:UITableViewRowAnimationAutomatic]`再次调用上述方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:18:45.033

你可以检查你 textHeight 然后设置你的行高

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
  NSString *Yourtext = [yourTextAry objectAtIndex:[indexPath row]];

  CGSize constraint = CGSizeMake(yourLabelWidth , 20000.0f);

  CGSize size = [Yourtext sizeWithFont: [UIFont fontWithName:@"Verdana" size:13] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

  CGFloat height = MAX(size.height, 44.0f);

  return height;
} 
```

如果文本为空，则将其从数组中删除，或者将高度传递为零..:)

# python - 将字典内列表中的键*值相乘？

> ID：13656858
> 
> 赞同：1
> 
> 时间：2012-12-01T05:54:05.370
> 
> 标签：python

`a = {u'1': ['abc', 'thanks', 2.0, 999.0],u'2': ['def', 'for', 2.0, 100.0],u'3': ['ghi', 'helping', 1.0, 99999.0],u'4': ['jkl', 'me', 3.0, 2120.0] etc:[etc]}`

所以我试图让所有的字典都相乘 { key : List [ blah, blah, **numbers** , **numbers** ], key : List [ blah, blah, **numbers** , **numbers** ], etc} 这证明很麻烦:(。我想要的输出`108557`是从 (2*999)+(2*100)+(1*99999)+(3*2120) 派生的。

我在这里找到了一个答案[Multiply keys*values in a dict?](https://stackoverflow.com/questions/10865979/multiply-keysvalues-in-a-dict) 这几乎解决了我的问题。因为他能够乘以这本字典来`a = {2: 4, 3: 2, 5: 1, 7: 1}`得到答案。我无法将列表合并到此代码中！提前感谢您的帮助。`26``sum([key * val for key, val in a.items()])`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T06:02:04.880

如果数字**始终**是最后两个元素，您可以这样做：

```
sum([val[-2] * val[-1] for val in a.values()]) 
```

**使用 Blckknght 的提示更新**编辑****

# social-networking - 使用 Facebook 评论社交插件——许多 Facebook 用户评论不公开

> ID：13656860
> 
> 赞同：3
> 
> 时间：2012-12-01T05:54:23.293
> 
> 标签：social-networking, facebook-comments, facebook-social-plugins

我希望能够在使用 Facebook 评论社交插件的网站上使用网站评论功能。当我登录 Facebook 时，我会在评论框旁边看到我的个人资料图片，如果有其他评论，我可以看到其他评论。

当我发表评论时，它会立即显示，但似乎没有公开注册。如果我退出 Facebook，我的评论就会消失。

更多信息也即将曝光（2013 年 3 月 26 日添加）。有[几个受此错误影响的](https://www.facebook.com/help/community/question/?id=424116631001496)人试图在 Facebook 上获得有关此问题的帮助，但到目前为止没有成功。

在我向我的 Facebook 开发人员资料中添加了一个虚假应用程序后，我能够向[Facebook 发布一个错误](http://developers.facebook.com/bugs/337187823051879)，但是它已经被关闭而没有得到解决。

由于 Facebook 评论现在被多家新闻媒体用作独家在线互动方式，这个问题意味着一些 Facebook 用户被剥夺了参与当日新闻社区讨论的权利。Facebook 是否希望如此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T22:41:56.110

随着时间的推移，在与许多人的交谈中，我对这个问题有了更多的了解。从[托管评论插件的网站的角度来看](https://developers.facebook.com/bugs/326412907462211)，我了解到来自某些用户的评论，不在网站禁止列表中，由 Facebook 自动排队等待审核。

[此外，我最近在 Stack Overflow 上](http://facebook.stackoverflow.com/questions/7455247/auto-approve-all-comments-in-comments-plugin)遇到了一个答案，该答案表明“新鲜”的 Facebook 帐户旨在用于评论插件中的审核，大概是为了防止刚刚创建 Facebook 帐户的人使用新帐户发帖其他网站上的垃圾评论。我不会认为我的帐户是“新鲜的”，但它还不到一年。在关闭[网站报告](https://developers.facebook.com/bugs/326412907462211)的 Facebook 响应中，他们声明“您添加到报告中的受影响用户没有朋友，我们怀疑该用户是假的并要求审核。这是设计使然。” 虽然 Facebook 希望限制虚假用户在这些评论中发帖的可能性是可以理解的，但这一指标显然也会吸引合法用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T14:12:31.673

Q.Mark, I strongly recommend that site owners not use the Facebook Social Plugin to support commenting on their sites, unless they want to annoy visitors.

Facebook uses an Orwellian blacklist/censorship model which prevents many people from posting comments. Users get no explanation for why their comments won't post. Rather, it's made to look like a malfunction of the web site, and it is only apparent after the users waste their time composing a comment.

There's discussion of the problem here (among many other places): [https://www.facebook.com/help/community/question/?id=10200248881692914](https://www.facebook.com/help/community/question/?id=10200248881692914)

(Copy saved here: [http://burtonsys.com/Why_cant_I_post_comments_on_sites_that_have_the_facebook_social_plugin.pdf](http://burtonsys.com/Why_cant_I_post_comments_on_sites_that_have_the_facebook_social_plugin.pdf) )

A FB "Like" button is useful, but site owners should not use Facebook to support comments. Use Disqus, or LiveFyre, or *anything* else besides Facebook.

(I realize this doesn't solve your problem, sorry! But perhaps if enough site owners dump Facebook for comments then Facebook will stop what they're doing.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T07:11:22.587

我可以发表评论，但即使启用了在 fb 上的分享，它也没有显示在我的个人资料中。

要提交错误，您只需访问developers.facebook.com/bugs 并开始在搜索字段中输入内容，您将看到一个从那里创建错误报告的选项。

# mysql - SQL - 从多个表创建视图

> ID：13656864
> 
> 赞同：11
> 
> 时间：2012-12-01T05:55:24.743
> 
> 标签：mysql, sql, postgresql

我有三张桌子：

```
POP(country, year, pop)
FOOD(country, year, food)
INCOME(country, year, income) 
```

我正在尝试创建一个视图，例如：

```
V(country, year, pop, food, income) 
```

到目前为止，这是我的代码。我认为它不正确：

```
CREATE VIEW V AS
(SELECT * FROM POP
UNION
SELECT * FROM FOOD
UNION
SELECT * FROM INCOME); 
```

一个问题是，存在于的国家/地区`POP`可能不存在于`FOOD`。一年也一样。中存在的年份`POP`可能不存在于 中`FOOD`。所以，我一直认为上面的代码行不通。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-01T06:12:12.300

联盟不是你想要的。您想使用连接来创建单行。有点不清楚是什么构成了表格中的唯一行以及它们之间的真正关系，而且还不清楚一张表是否每年都会为每个国家/地区提供行。但我认为这会奏效：

```
CREATE VIEW V AS (

  SELECT i.country,i.year,p.pop,f.food,i.income FROM
    INCOME i
  LEFT JOIN 
    POP p 
  ON
    i.country=p.country
  LEFT JOIN
    Food f
  ON 
    i.country=f.country
  WHERE 
    i.year=p.year
  AND
    i.year=f.year
); 
```

左（外）连接将返回第一个表中的行，即使第二个表中没有匹配项。我写这篇文章是假设您在收入表中每年都会为每个国家/地区设置一行。如果你不让事情变得有点毛茸茸，因为我上次检查的 MySQL 没有内置对 FULL OUTER JOIN 的支持。有一些方法可以模拟它，它们将涉及工会。本文深入探讨了该主题：[http ://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/](http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T06:16:47.243

谢谢您的帮助。这就是我最终为了让它发挥作用而做的事情。

```
CREATE VIEW V AS
    SELECT *
    FROM ((POP NATURAL FULL OUTER JOIN FOOD)
    NATURAL FULL OUTER JOIN INCOME); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-03-09T15:38:33.647

这也有效，您不必使用 join 或任何东西：

```
DROP VIEW IF EXISTS yourview;

CREATE VIEW yourview AS
    SELECT table1.column1, 
    table2.column2
FROM 
table1, table2 
WHERE table1.column1 = table2.column1; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-01T06:11:13.627

你是用`MySQL`还是`PostgreSQL`？

您想使用[JOIN](http://dev.mysql.com/doc/refman/5.6/en/join.html)语法，*而不是*UNION。例如，使用 INNER JOIN：

```
CREATE VIEW V AS
SELECT POP.country, POP.year, POP.pop, FOOD.food, INCOME.income
FROM POP
INNER JOIN FOOD ON (POP.country=FOOD.country) AND (POP.year=FOOD.year)
INNER JOIN INCOME ON (POP.country=INCOME.country) AND (POP.year=INCOME.year) 
```

但是，这只会在所有三个表格中都存在每个国家和年份时显示结果。如果这不是您想要的，请查看左外连接（使用上面的相同链接）。

# ios - 使用 AFNetworking 上传

> ID：13656868
> 
> 赞同：2
> 
> 时间：2012-12-01T05:55:31.780
> 
> 标签：ios, ios5, file-upload, afnetworking

```
NSURL *url = [NSURL URLWithString:@"http://127.0.0.1:8000/photo/"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSDictionary *headers = [NSDictionary dictionaryWithObject:data forKey:@"attachment"];
//NSLog(@"strimng");
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"upload/" parameters:nil constructingBodyWithBlock: ^(id<AFMultipartFormData> formData) {
    NSLog(@"strimng");
    [formData appendPartWithFileData:data name:@"attachment" fileName:@"attachment.jpg" mimeType:@"image/jpeg"];
    NSLog(@"strimng");
}];
NSLog(@"strimng");
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[operation start]; 
```

我正在尝试使用 AFNetworking 从 iphone 上传图像，但这不起作用。formdata appenddata 命令之前的 NSLog 被注销。但之后的那个似乎没有。我还检查了 NSdata 是否为零，但事实并非如此。并且 obv 请求没有被发送。请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T08:05:59.250

假设您必须上传图像，为什么要`NSDictionary`使用`data`? 没必要，你只需要使用`data`inside `multipartFormRequestWithMethod`。

尝试以下

```
// Get the image that you want to upload via ImagePicker or a @property
UIImage *imageIWantToUpload = self.image;

// Create the NSData object for the upload process
NSData *dataToUpload = UIImageJPEGRepresentation(imageIWantToUpload, 0.5);

NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"upload/" parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    [formData appendPartWithFileData:dataToUpload name:@"attachment" fileName:@"attachment.jpg" mimeType:@"image/jpg"];
}];

// You can add then the progressBlock and the completionBlock
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:progress];
[operation setCompletionBlockWithSuccess:success failure:failure]; 
```

您还应该仔细检查您的服务器端是否需要一些参数，因为您将`NSMutableURLRequest`参数的字段设置为`nil`.

# c# - C#如何获取硬件设备的功能HardwareDisabled属性

> ID：13656874
> 
> 赞同：3
> 
> 时间：2012-12-01T05:57:14.633
> 
> 标签：c#, device-driver, human-interface

我试图判断是否**禁用**了硬件设备（特别是多点触控数字化仪） 。

[我可以使用此处的](https://stackoverflow.com/a/6877468/1868148)**DisableHardware**类成功启用/禁用设备。

我找到了具有属性**HardwareDisabled的****[DEVICE_CAPABILITIES](http://msdn.microsoft.com/en-us/library/windows/hardware/ff543095%28v=vs.85%29.aspx)**结构。但是，如果我调用**SetupDiGetDeviceRegistryPropertyW**来返回 SPDRP_CAPABILITIES，我无法将返回值 (DWORD) 转换为有用的 uint。

 ****我相信我从 byte[] => uint 的转换是错误的，我总是得到 128。

```
private static bool IsDeviceHardwareDisabeld(IntPtr info, SP_DEVINFO_DATA devdata)
{
    Trace.WriteLine("IsDeviceHardwareDisabeld");
    uint SPDRP_CAPABILITIES = 0x0000000F;
    uint CM_DEVCAP_HARDWAREDISABLED = 16384u;

    uint propId = SPDRP_CAPABILITIES;

    uint proptype, outsize;
    IntPtr buffer = IntPtr.Zero;
    try
    {
        uint buflen = 512;
        buffer = Marshal.AllocHGlobal((int)buflen);
        outsize = 0;
        SetupDiGetDeviceRegistryPropertyW(
            info,
            ref devdata,
            propId,
            out proptype,
            buffer,
            buflen,
            ref outsize);
        Trace.WriteLine("OUTSIZE: " + outsize.ToString()); // 4
        byte[] lbuffer = new byte[outsize];
        Marshal.Copy(buffer, lbuffer, 0, (int)outsize);
        int errcode = Marshal.GetLastWin32Error();
        if (errcode == ERROR_INVALID_DATA) throw new Exception("ERROR_INVALID_DATA");
        CheckError("SetupDiGetDeviceRegistryPropertyW", errcode);

        uint capabilities = BitConverter.ToUInt32(lbuffer, 0); // always 128
        uint bitwise = capabilities & CM_DEVCAP_HARDWAREDISABLED; // always 0
        bool isHardwareDisabled = bitwise > 0;
        Trace.WriteLine("HARDWAREDISABLED: " + isHardwareDisabled.ToString());
        return isHardwareDisabled;
    }
    finally
    {
        if (buffer != IntPtr.Zero)
            Marshal.FreeHGlobal(buffer);
    }
} 
```

对于 DEVICE_CAPABILITIES 的值，我的转换总是返回**128**。****

# html - 需要 CSS em 帮助

> ID：13656878
> 
> 赞同：2
> 
> 时间：2012-12-01T05:58:04.923
> 
> 标签：html, css

我目前正在设计一个带有 em 单位的网页。我想我并没有像我想象的那样理解它，因为在我尝试将两个单独的 span 标签与 margin-left 对齐时出现了问题。它们被放置在我标题的左上角。使用 display:block 将它们放置在彼此之上。当我使用 margin-right 来对齐 span 标签时，较大的 span 和较小的标签没有正确对齐。我使用相同的数字作为margin-right，但它们仍然搞砸了。

*   这是因为我使用的是 em 的吗？
*   我怎样才能解决这个问题？

我将在下面粘贴我正在使用的代码，以便您了解我正在使用什么。希望我已经解释得足够好。

**HTML**

```
 <div class="header1">
      <span class="title">Title goes here</span>
      <span class="subtitle">This is the subtitle</span>
    </div> 
```

**CSS**

```
body {
    color: #333;
    font-family: 'lucida grande', tahoma, verdana, arial, sans-serif;
    font-size: 62.5%; /* 10px */
    line-height: 1.28;
}
.main1 {
  width: 96em;
  /* horizontally center the website layout */
  margin: 0 auto; margin-top: .8em;
  text-Align: left; /* override body {text-align:center} */
}
div.header1 {
  clear: both;
  width: 100%;
  height: 9em;
  background: #ff0000;
  color: #fff;
}
.title {
  font: small-caps 700 3.7em "Goudy Old Style", Garamond, "Big Caslon", "Times New Roman", serif;
}
.subtitle {
  font-weight: lighter;
  font-size: 1.4em;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:40:52.220

问题的描述非常混乱，并没有解释您想要实现的目标以及您最好的尝试是什么。您指的是*左右*边距，但它们都没有在您的代码中为所讨论的元素设置。您指的是设置`display: block`，但没有这样的设置。

我假设您希望主标题出现在副标题上方（在 xy 平面上）。为此，您需要设置`display: block`或者更好地使用`div`标记来代替，`span`或者最好使用适当的标题标记，例如`h1`并`h2`适当考虑它们对垂直边距和字体粗细的默认影响（即，如果需要，在 CSS 中覆盖它们）。而且我假设您希望它们左对齐相同的数量。

看来您没有考虑`em`单位的相对性。根据定义，它等于元素的字体大小（在 中除外`font-size`，它等于父元素的字体大小）。

我怀疑您尝试`span`使用相同的值设置两个元素的左边距，例如`1em`. 但这两个元素的含义并不相同，因为它们的`em`大小不同。如果你想将它们的左边距设置为第一个元素的字体大小，你可以设置

```
.title { margin-left: 1em; }
.subtitle { margin-left: 2.6429em; } 
```

该数字`2.6429`是字体大小的比率，由 3.7/1.4 计算得出。

`div`在封闭元素上设置左边距会更容易。它的字体大小等于`body`元素的字体大小，所以如果你想将它设置为主标题的字体大小，你可以使用

```
div.header1 { margin-left: 3.7em; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:04:58.097

检查下面的链接我希望这对你有帮助

[http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T06:55:02.017

**px：**像素（电脑屏幕上的一个点）

**em：** 1em 等于当前字体大小。2em 表示当前字体大小的 2 倍。例如，如果一个元素以 12 pt 的字体显示，那么 '2em' 就是 24 pt。'em' 在 CSS 中是一个非常有用的单位，因为它可以自动适应读者使用的字体。

[见参考](https://stackoverflow.com/questions/609517/why-em-instead-of-px)

因此，您可以改用`px`它`em`，这是一种很好的做法。

希望它会帮助你。谢谢。！！

# java - 如何在黑莓的画布上旋转带有文本的圆圈

> ID：13656879
> 
> 赞同：3
> 
> 时间：2012-12-01T05:58:08.200
> 
> 标签：java, blackberry, touch

如何**在 TouchEvent 或 TrackBallMoveEvent 上使用文本旋转圆圈。**

1.  我如何创建这样的圈子？

    我创建了一个圆圈并旋转它，但它总是从 0 度开始。

2.  有没有其他选择来创建这种圈子？

每个圆圈都有不同的文字，每个**圆圈都可以独立移动**。

![在此处输入图像描述](../Images/0b6bba7b7b269c0a852975cf66b0e612.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T13:04:29.083

所以，这绝对是不完整的，但我认为这是你最需要的。

## 限制/假设

1.  到目前为止，我只实现了触摸处理，因为我认为这更困难。如果我以后有时间，我会回来添加**轨迹球**处理。
2.  我没有给旋转的圆盘任何*动力*。用户的手指离开光盘后，光盘停止旋转。
3.  我不确定光盘之间的焦点转换是否 100% 正确。你必须做一些测试。至少，他们大多是对的。
4.  当您在标题中提到**Canvas**时，我认为这并不意味着您需要它来使用[J2ME Canvas](http://www.blackberry.com/developers/docs/5.0.0api/javax/microedition/lcdui/Canvas.html)。使用 RIM UI 库编写 BlackBerry 应用程序几乎是我所做的全部工作。

## 解决方案

本质上，我创建了一个`Field`子类来表示每个光盘。您可以通过传入一个标签数组来创建该字段，这些标签将围绕周长、半径和颜色进行间隔。每个硬编码`DiscField`是文本的边缘插图，假设光盘之间存在一定的大小差异。你可能应该让它更有活力。

```
public class DiscField extends Field {

   /** Used to map Manager's TouchEvents into our coordinate system */
   private int _offset = 0;
   private int _radius;
   private int _fillColor;
   private double _currentRotation = 0.0;
   private double _lastTouchAngle = 0.0;
   private boolean _rotating = false;
   private String[] _labels;
   /** Text inset from outer disc edge */
   private static final int INSET = 30;  

   private DiscField() {      
   }

   public DiscField(String[] labels, int radius, int fillColor) {
      super(Field.FOCUSABLE);
      _labels = labels;
      _radius = radius;
      _fillColor = fillColor;
   }    

   protected void layout(int width, int height) {
      setExtent(Math.min(width, getPreferredWidth()), Math.min(height, getPreferredHeight()));
   }

   private void drawFilledCircle(Graphics g, int x, int y, int r) {
      // http://stackoverflow.com/a/1186851/119114
      g.fillEllipse(x, y, x + r, y, x, y + r, 0, 360);
   }

   private void drawCircle(Graphics g, int x, int y, int r) {
      g.drawEllipse(x, y, x + r, y, x, y + r, 0, 360);
   }

   protected void paint(Graphics graphics) {
      int oldColor = graphics.getColor();
      graphics.setColor(_fillColor);
      drawFilledCircle(graphics, _radius, _radius, _radius);
      graphics.setColor(Color.WHITE);
      drawCircle(graphics, _radius, _radius, _radius);

      // plot the text around the circle, inset by some 'padding' value
      int textColor = (_fillColor == Color.WHITE) ? Color.BLACK : Color.WHITE; 
      graphics.setColor(textColor);
      // equally space the labels around the disc
      double interval = (2.0 * Math.PI / _labels.length);
      for (int i = 0; i < _labels.length; i++) {
         // account for font size when plotting text
         int fontOffsetX = getFont().getAdvance(_labels[i]) / 2;
         int fontOffsetY = getFont().getHeight() / 2;
         int x = _radius + (int) ((_radius - INSET) * Math.cos(i * interval - _currentRotation)) - fontOffsetX;
         int y = _radius - (int) ((_radius - INSET) * Math.sin(i * interval - _currentRotation)) - fontOffsetY;
         graphics.drawText(_labels[i], x, y);
      }

      graphics.setColor(oldColor);
   }

   protected void drawFocus(Graphics graphics, boolean on) {
      if (on) {
         int oldColor = graphics.getColor();
         int oldAlpha = graphics.getGlobalAlpha();
         // just draw a white shine to indicate focus
         graphics.setColor(Color.WHITE);
         graphics.setGlobalAlpha(80);
         drawFilledCircle(graphics, _radius, _radius, _radius);
         // reset graphics context
         graphics.setColor(oldColor);
         graphics.setGlobalAlpha(oldAlpha);
      }
   }  

   protected void onUnfocus() {
      super.onUnfocus();
      _rotating = false;
   }

   protected boolean touchEvent(TouchEvent event) {
      switch (event.getEvent()) {
      case TouchEvent.MOVE: {
         setFocus();         
         // Get the touch location, within this Field
         int x = event.getX(1) - _offset - _radius;
         int y = event.getY(1) - _offset - _radius;
         if (x * x + y * y <= _radius * _radius) {
            double angle = MathUtilities.atan2(y, x);
            if (_rotating) {
               // _lastTouchAngle only valid if _rotating
               _currentRotation += angle - _lastTouchAngle;
               // force a redraw (paint) with the new rotation angle
               invalidate();
            } else {
               _rotating = true;
            }         
            _lastTouchAngle = angle;

            return true;
         }
      }
      case TouchEvent.UNCLICK:
      case TouchEvent.UP: {
         _rotating = false;
         return true;      
      }  
      case TouchEvent.DOWN: {
         setFocus();                 
         int x = event.getX(1) - _offset - _radius;
         int y = event.getY(1) - _offset - _radius;
         if (x * x + y * y <= _radius * _radius) {
            _lastTouchAngle = MathUtilities.atan2(y, x);
            _rotating = true;
            return true;
         }
      }
      default:
         break;
      }           
      return super.touchEvent(event);
   }

   protected boolean trackwheelRoll(int arg0, int arg1, int arg2) {
      return super.trackwheelRoll(arg0, arg1, arg2);
      // TODO!
   }

   public int getPreferredHeight() {
      return getPreferredWidth();
   }

   public int getPreferredWidth() {
      return 2 * _radius;
   }

   public String[] getLabels() {
      return _labels;
   }

   public void setLabels(String[] labels) {
      this._labels = labels;
   }

   public int getRadius() {
      return _radius;
   }

   public void setRadius(int radius) {
      this._radius = radius;
   }

   public double getCurrentAngle() {
      return _currentRotation;
   }

   public void setCurrentAngle(double angle) {
      this._currentRotation = angle;
   }

   public int getOffset() {
      return _offset;
   }

   public void setOffset(int offset) {
      this._offset = offset;
   }
} 
```

包含所有`DiscField`对象的是`DiscManager`. 它将子元素对齐`DiscFields`，并处理触摸事件的适当委托......因为字段重叠，并且不属于其半径（即角）的**范围**`sublayout()`内的触摸应该由更大的圆盘处理。`DiscField`

 **```
 /** 
    * A DiscManager is a container for DiscFields and manages proper delegation
    * of touch event handling.
    */
   private class DiscManager extends Manager {

      private int _maxRadius = 0;

      public DiscManager(long style){
         super(style);

         DiscField outerDisc = new DiscField(new String[] { "1", "2", "3", "4", "5", "6" }, 
               180, Color.BLUE);
         _maxRadius = outerDisc.getRadius();
         DiscField middleDisc = new DiscField(new String[] { "1", "2", "3", "4", "5" }, 
               120, Color.GRAY);
         middleDisc.setOffset(_maxRadius - middleDisc.getRadius());
         DiscField innerDisc = new DiscField(new String[] { "1", "2", "3", "4" }, 
               60, Color.RED);
         innerDisc.setOffset(_maxRadius - innerDisc.getRadius());

         // order matters here:
         add(outerDisc);
         add(middleDisc);
         add(innerDisc);
      }

      protected void sublayout(int width, int height) {
         setExtent(2 * _maxRadius, 2 * _maxRadius);

         // each disc needs to have the same x,y center to be concentric
         for (int i = 0; i < getFieldCount(); i++) {
            if (getField(i) instanceof DiscField) {
               DiscField disc = (DiscField) getField(i);
               int xCenter = _maxRadius - disc.getRadius();
               int yCenter = _maxRadius - disc.getRadius();
               setPositionChild(disc, xCenter, yCenter);
               layoutChild(disc, 2 * _maxRadius, 2 * _maxRadius);
            }
         }
      }

      protected boolean touchEvent(TouchEvent event) {
         int eventCode = event.getEvent();
         // Get the touch location, within this Manager
         int x = event.getX(1);
         int y = event.getY(1);

         if ((x >= 0) && (y >= 0) && (x < getWidth()) && (y < getHeight())) {
            int field = getFieldAtLocation(x, y);
            if (field >= 0) {
               DiscField df = null;
               for (int i = 0; i < getFieldCount(); i++) {
                  if (getField(field) instanceof DiscField) {
                     int r = ((DiscField)getField(field)).getRadius();
                     // (_maxRadius, _maxRadius) is the center of all discs
                     if ((x - _maxRadius) * (x - _maxRadius) + (y - _maxRadius) * (y - _maxRadius) <= r * r) {
                        df = (DiscField)getField(field);
                     } else {
                        // touch was not within this disc's radius, so the one slightly bigger
                        // should be passed this touch event                        
                        break;
                     }
                  }
               }
               // Let event propagate to child field
               return (df != null) ? df.touchEvent(event) : super.touchEvent(event);
            } else {
               if (eventCode == TouchEvent.DOWN) {                    
                  setFocus();
               }
               // Consume the event
               return true;
            }
         }
         // Event wasn't for us, let superclass handle in default manner
         return super.touchEvent(event);
      }
   } 
```

最后，使用它们的屏幕：

```
public class DiscScreen extends MainScreen {

   public DiscScreen() {
      super(MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR);

      add(new DiscManager(Field.USE_ALL_WIDTH));
   }
} 
```

## 结果

![在此处输入图像描述](../Images/8eda069aabdd8e7cd2cf49b80cc6001c.png)**

# javascript - 如何在javascript中停止间隔动画

> ID：13656881
> 
> 赞同：3
> 
> 时间：2012-12-01T05:58:55.157
> 
> 标签：javascript, animation, settimeout, setinterval

所以我有这个由 41 帧组成的动画，我试图让这个动画在最后一帧结束并停留在最后一帧，我必须承认......我很迷茫。任何帮助都会很棒！非常感谢！

一旦我弄清楚如何停止动画，我还想让它在鼠标悬停时启动并恢复到第 1 帧 onmouseout。

**html**：

```
 <div id="door">
       <img src="images/Animation_Door/0001.png">
       <img src="images/Animation_Door/0002.png">
       <img src="images/Animation_Door/0003.png">
       ...(41 frames in total)
    </div> 
```

**CSS**：

```
 #door {
    background-color:transparent;
    position:absolute;
    width:800px;
    height:700px;
    top:90px;
    left:50%;
    margin-left:-400px;
    padding:0px;
    overflow:hidden;
    cursor:pointer;
    z-index:25;
  }

  #door img{
    display: none;
  }

  #door img:first-child {
    display: block;
  } 
```

**脚本**：

```
var interval = setInterval("function ani()", 50);  
     setTimeout(function(){ clearInterval(interval) }, 40);

     onload = function startAnimation() { 
        var frames = document.getElementById("door").children;
        var frameCount = frames.length;
        var i = 0;
     setInterval(function ani() { 
        frames[i % frameCount].style.display = "none";
        frames[++i % frameCount].style.display = "block";
     }, 50);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:13:43.687

```
function startAnimation() { 
  var frames = document.getElementById("door").children;
  var frameCount = frames.length;

  for (i=0; i<41; i++) {
      setTimeout(function(){
          frames[i].style.display = "none";
          frames[i+1].style.display = "block";
      },50*i);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:00:18.620

我发现当它启动 for 循环时：

```
for (i=0; i<41; i++) 
```

i<41 并不意味着帧，而是毫秒。这就是为什么它停在一个奇怪的地方。

i<61 让它停在第 41 帧。

非常感谢！！！！！！

# proxy - gsoap 多个 wsdls 但只有一个代理类

> ID：13656883
> 
> 赞同：1
> 
> 时间：2012-12-01T05:59:24.893
> 
> 标签：proxy, wsdl, gsoap

我想使用 gsoap 访问多个 Web 服务并将其全部组合成 1 个可执行文件。我遇到的问题是即使我在多个 wsdls 上执行 wsdl2h，然后使用 soapcpp2 编译标头，也只生成了 1 个代理对象。以下是我使用的命令行参数：

```
wsdl2h -o header.h -ttypemap.dat -s http://services.web.com/WebService/Service1.asmx?WSDL http://services.web.com/WebService/Service2.asmx?WSDL
soapcpp2 -pMy  -i -wx -C -Igsoap-2.8/gsoap/import header.h 
```

我遇到的问题是，每当我尝试访问 Service2 wsdl 中定义的服务时，都会出现异常。“System.Web.Services.Protocols.SoapException：服务器无法识别 HTTP Header SOAPAction 的值：

如果我只编译单个 wsdl（只编译 Service2 wsdl），则访问 Service2 上的服务的代码相同。

然后我检查 Service1 和 Service2 wsdls。它们具有相同的“targetNamespace”。这就是为什么只创建 1 个代理。

我的问题是：我该如何解决这个问题？我需要访问 Service1.wsdl 和 Service2.wsdl 上的服务并将它们放入 1 个二进制文件中。

我已经阅读了 gsoap 手册并在 wsdl2h 和 soapcpp2 的命令行参数上尝试了几种组合，但没有运气。

任何帮助深表感谢。

我使用 gsoap 2.8.11 顺便说一句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T15:33:38.447

这个问题已经很老了，所以我会很快帮助随机的谷歌用户（我在谷歌搜索相同问题的解决方案时发现了它）。如果需要更多详细信息，请询问。

无论如何，解决方案：使用*-q*参数（提供命名空间名称）多次调用*wsdl2h*并每次生成唯一的 .h 文件。然后，在每个头文件上调用*soapcpp2* - 这将为每个头文件生成代理文件，并包装在命名空间声明中。

# php - 如何使用 PHP 从 xml 输出中获取值

> ID：13656887
> 
> 赞同：0
> 
> 时间：2012-12-01T05:59:33.133
> 
> 标签：php, xml, soap, soapui

如何使用 PHP 从以下结果中获取值。

```
<?xml version="1.0" encoding="UTF-8"?>
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <soapenv:Header/>
      <soapenv:Body>
        <p558:registerDonorResponse xmlns:p558="http://ws.ots.labcorp.com">
          <p558:registerDonorReturn xmlns:p118="http://data.ws.ots.labcorp.com">
            <p118:clientRegistrationId>clr1</p118:clientRegistrationId>
            <p118:labcorpRegistrationNumber>100059064</p118:labcorpRegistrationNumber>
            <p118:registrationTime>2012-12-01T05:40:51.628Z</p118:registrationTime>
          </p558:registerDonorReturn>
        </p558:registerDonorResponse>
      </soapenv:Body>
    </soapenv:Envelope> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:10:53.503

您的 XML 包含以名称空间为前缀的标记，因为它在 SOAP 响应中很常见。

查看来自 php 的 SimpleXML 文档的以下[评论：](http://www.php.net/manual/en/simplexmlelement.getnamespaces.php#107541)

```
$xml = <<<XML
<?xml version="1.0" encoding="UTF-8"?>
<people xmlns:p="http://example.org/ns" xmlns:t="http://example.org/test">
    <p:person id="1">John Doe</p:person>
    <p:person id="2">Susie Q. Public</p:person>
</people>
XML;

$sxe = new SimpleXMLElement($xml);

$ns = $sxe->getNamespaces(true);

$child = $sxe->children($ns['p']);

foreach ($child->person as $out_ns)
{
    echo $out_ns;
} 
```

在您的情况下，访问属性的代码应如下所示（在 so.xml 文件中针对您的 XML 进行了测试）：

```
<?php
  $xml = file_get_contents('so.xml');
  $sxe = simplexml_load_string($xml);

  $ns = $sxe->getNamespaces(true);

  $child =
    $sxe->children($ns['soapenv'])->
      Body->children($ns['p558'])->
      registerDonorResponse->registerDonorReturn->children($ns['p118']);

  var_dump($child); 
```

结果：

```
$ php -f so.php 
object(SimpleXMLElement)#4 (3) {
  ["clientRegistrationId"]=>
  string(4) "clr1"
  ["labcorpRegistrationNumber"]=>
  string(9) "100059064"
  ["registrationTime"]=>
  string(24) "2012-12-01T05:40:51.628Z"
} 
```

但是请注意，手动发出 SOAP 请求和解析响应通常是一种不好的做法，请考虑为此使用[SOAP 客户端](http://www.php.net/manual/en/book.soap.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:16:21.830

你试过什么？

无论如何，您可以使用 PHP[`simplexml_load_file`](http://www.php.net/manual/en/function.simplexml-load-file.php)或全功能[`DOMDocument class`](http://www.php.net/manual/en/class.domdocument.php)

# javascript - 如何中断当前迭代并在 setInterval() 中继续下一次迭代？

> ID：13656890
> 
> 赞同：3
> 
> 时间：2012-12-01T05:59:57.340
> 
> 标签：javascript, timing

就像`continue`用于中断当前迭代并继续下一个迭代一样，我如何`setInterval()`在 JavaScript 中中断当前迭代并继续下一个间隔而不等待？

```
var intervalID = window.setInterval( function() {
   if(conditionIsTrue) {
      // Break this iteration and proceed with the next
      // without waiting for 3 seconds.
   }
}, 3000 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:09:00.900

您可以“简单地”（或不那么简单地）清除间隔，然后重新创建它：

```
// run the interval function immediately, then start the interval
var restartInterval = function() {
    intervalFunction();
    intervalID = setInterval(intervalFunction, 3000 );
};

// the function to run each interval
var intervalFunction = function() {
    if(conditionIsTrue) {
      // Break this iteration and proceed with the next
      // without waiting for 3 seconds.

      clearInterval(intervalID);
      restartInterval();
   }
};

// kick-off
var intervalID = window.setInterval(intervalFunction, 3000 ); 
```

[这是一个演示/测试小提琴。](http://jsfiddle.net/6J4vv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-15T05:47:15.537

刚刚对此进行了测试，它充当循环中的 continue 语句。对于现在发现这一点的其他编码人员，只需`return`在 setInterval 中使用。

```
var myRepeater = setInterval( function() {
   if(conditionIsTrue) {
      return;
   }
}, 1000 ); 
```

编辑：为了在中断当前执行循环后立即执行，可以改为执行类似的操作（理论上。如果`conditionIsTrue`保持为**真**，请注意递归问题）：

```
function myFunction() {
    if(conditionIsTrue) {
       myFunction();
       return;
    }
    // Interval function code here...
}

var myRepeater = setInterval( myFunction, 1000 ); 
```

# html - 奇怪！重要边距

> ID：13656904
> 
> 赞同：1
> 
> 时间：2012-12-01T06:02:23.227
> 
> 标签：html, css, margin

我现在在一个网站上工作，我刚刚开始使用标题。但出于某种奇怪的原因，它在顶部提供了 28px 的边距。当我检查时，它说这是因为：

```
 media="screen"
    html {
    margin-top: 28px !important;
    } 
```

HTML

```
<header>
        <div id='header_container'>
            <h1><a href="<?php bloginfo('url'); ?>/"><?php bloginfo('name'); ?></a></h1>

            <?php wp_nav_menu( array("theme_location"=>"main") ); ?>
        </div>
</header> 
```

这是我所有的CSS

```
* {
    margin: 0;
    padding: 0;
}

#wrapper {
margin: 0 auto;
width: 960px;
}

header {
    width: 100%;
    height: 81px;
    background-color: grey;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}

div#header_container {
    width: 960px;
    margin: 0 auto;
}

div#header_container>h1 {
    margin: 0 auto;
}

div#header_container>h1 {
    font-family: arial;
    font-size: 14px;

}

div#header_container>h1 a {
    background-image: url(images/logo.svg);
    width: 272px;
    height: 19px;
    display: block;
    text-indent: -9999px;
    float: left;

}

/* menu thing */
ul#menu-main-menu {
    list-style-type: none;
}

ul#menu-main-menu>li {
    margin: 0;
    padding: 0;
}

ul#menu-main-menu>li>a {
    display:block;
    float: left;
    padding: 10px;
    margin: 0 5px 0 0;
    text-decoration: none;
} 
```

我找不到边距，你可以吗？我很困惑它来自哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:17:18.467

我找到了答案：

如果它在您的网站上起作用，请打开您的用户个人资料（用户 > 您的个人资料）并取消选中“显示在前面”选项以使其消失。

但是谢谢你们的帮助！

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:53:25.047

我认为您正在使用 wordpress，这与管理顶栏有关，可以通过插件禁用，但 css 规则仍处于启用状态。

标记为**!important 的**CSS 规则优先于后面的规则。

要解决此问题，您可以在 css 文件的顶部和底部添加以下代码。但是您必须输入**!important**以便它覆盖之前的规则。或者，您可以在 html 标记中添加内联样式。

```
html {
    margin-top: 0px !important;
} 
```

# google-maps - 是否可以使用固定电话号码跟踪谷歌地图位置？

> ID：13656905
> 
> 赞同：4
> 
> 时间：2012-12-01T06:02:25.113
> 
> 标签：google-maps

我想使用电话号码在谷歌地图上定位一个位置。可能吗？如果是，我需要在请求 url 中附加的参数是什么。截至目前，我正在附加“地址”，我的网址是

[http://maps.googleapis.com/maps/api/geocode/json?address=THE+FRENCH+LAUNDRY&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=THE+FRENCH+LAUNDRY&sensor=false)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:49:59.730

据我所知，谷歌地图不可能做到这一点（但也许其他人知道更多......）。在某些国家/地区，例如意大利（我居住的地方），它甚至可能是违法的（取决于一些法律参数）。

尽管如此，我在 SO 中看到一些用户表示，一些由 Google 开发和管理并安装在 Android 设备上的应用程序似乎能够这样做（当然，在合法的国家）。这些应用程序很可能使用普通用户/开发人员无法访问的 Google 在线数据库。

此外，还有其他公司提供定位服务，如果他/她使用蜂窝电话和如果他/她使用陆线电话（在合法的国家），则可以定位用户。

# jquery - 单击页面上的任意位置时jQuery隐藏元素

> ID：13656908
> 
> 赞同：-2
> 
> 时间：2012-12-01T06:03:14.773
> 
> 标签：jquery

```
<div class="buttons">
<a  class="showSingle" target="1">Click 1</a>
<a  class="showSingle" target="2">Click 2</a>
<a  class="showSingle" target="3">Click 3</a>
<a  class="showSingle" target="4">Click 4</a>
</div>

<div id="div1" class="targetDiv">Results from click 1</div>
<div id="div2" class="targetDiv">Results from click 2</div>
<div id="div3" class="targetDiv">Results from click 3</div>
<div id="div4" class="targetDiv">Results from click 4</div>​

jQuery(function(){
        jQuery('.showSingle').click(function(){
              jQuery('.targetDiv').hide();
              jQuery('#div'+$(this).attr('target')).show();
        });
}); 
```

​</p>

我找到了很多方法来做到这一点，但似乎无法让它按照我设置的方式工作。当您单击页面上的任何位置而不是单击 .showSingle 或在 .targetDiv 框内时，我需要隐藏 .targetDiv 。

[http://jsfiddle.net/XwN2L/1063/](http://jsfiddle.net/XwN2L/1063/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:14:48.053

更新：我将它绑定到 html 而不是 body 以修复在内容区域之外的点击。

这是您的功能，只要单击页面正文就会触发：

```
jQuery('html').click(function(){
    if( !jQuery(event.target).hasClass('targetDiv') ){
        jQuery('.targetDiv').hide();
    }
}); 
```

​ 然后，我们还需要添加

```
e.stopPropagation();
e.preventDefault(); 
```

对于您的第一个功能，请防止双重操作。（另外，不要忘记将 e 添加到您的函数参数中）

这是一个小提琴： - [http://jsfiddle.net/XwN2L/1065](http://jsfiddle.net/XwN2L/1065)

祝你好运。

# javascript - 我错过了什么逻辑？

> ID：13656909
> 
> 赞同：2
> 
> 时间：2012-12-01T06:03:27.517
> 
> 标签：javascript, jquery, html

我有一个`#wrapper`div 包装一个`#pane`div，#wrapper，`overflow-x:scroll.` 我想要做的是当我触摸 时`#wrapper`，`#pane`应该跟随我的手指移动。

我的代码是

```
$('#wrapper').on('touchmove',function(event){
    var touch = event.originalEvent.targetTouches[0];
    var move_x = touch.pageX;
    $('#wrapper').scrollLeft(move_x);                   
}) 
```

结果是：是的，#pane 只是在反向跟随我的手指，但是当我的手指离开并再次触摸时，#pane 滚动位置会立即跳转到我的手指 x 位置，这不是我想要的。当我触摸它时，#pane 不应该移动，直到我拖动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T06:06:38.787

如果您不希望它跳到您的手指位置，则必须存储当前位置，并根据您触摸的原始位置与您停止触摸的结束位置之间的差异来移动它。

# php - PHP，从数据库中获取数据

> ID：13656911
> 
> 赞同：2
> 
> 时间：2012-12-01T06:04:00.213
> 
> 标签：php, mysql

我想用 PHP 从数据库中检索数据并将其显示在网站上。

此代码无法正常工作。我想在我的数据库中显示所有雪佛兰汽车。

```
<?php
$db = mysqli_connect("localhost","myusername",
"mypassword","database");

if (mysqli_connect_errno()) { 
    echo("Could not connect" .
      mysqli_connect_error($db) . "</p>");
    exit(" ");
}

$result = mysqli_query($query);

if(!$result){
  echo "<p> Could not retrieve at this time, please come back soon</p>" .   
    mysqli_error($dv);
}

$data = mysql_query("SELECT * FROM cars where carType = 'Chevy' AND active = 1")
  or die(mysql_error());

echo"<table border cellpadding=3>";
while($row= mysql_fetch_array( $data ))
{
  echo"<tr>";
  echo"<th>Name:</th> <td>".$row['name'] . "</td> ";
  echo"<th>ImagePath:</th> <td>".$row['imagePath'] . " </td></tr>";
  echo"<th>Description:</th> <td>".$row['description'] . "</td> ";
  echo"<th>Price:</th> <td>".$row['Price'] . " </td></tr>";
}
echo"</table>";
?> 
```

如何使用 PHP 从数据库中获取数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T06:05:37.723

**你没有查询数据库，所以它不会给你结果**

这就是它的工作原理

1）通过以下方式连接到数据库[`mysql_connect()`](http://www.php.net/manual/en/function.mysql-connect.php)

```
mysql_connect("localhost", "username", "password") or die(mysql_error()); 
```

2）比选择数据库喜欢 [`mysql_select_db()`](http://in2.php.net/manual/en/function.mysql-select-db.php)

```
mysql_select_db("Database_Name") or die(mysql_error()); 
```

3）你需要使用[`mysql_query()`](http://in2.php.net/manual/en/function.mysql-query.php)

像

```
 $query = "SELECT * FROM cars where carType = 'chevy' AND active = 1";
 $result =mysql_query($query); //you can also use here or die(mysql_error()); 
```

看看是否有错误

4) 比[`mysql_fetch_array()`](http://in2.php.net/manual/en/function.mysql-fetch-array.php)

```
 if($result){
         while($row= mysql_fetch_array( $result )) {
             //result
        }
      } 
```

所以试试

```
$data = mysql_query("SELECT * FROM cars where carType = 'chevy' AND active = 1")  or die(mysql_error()); 
 echo"<table border cellpadding=3>"; 
 while($row= mysql_fetch_array( $data )) 
 { 
    echo"<tr>"; 
    echo"<th>Name:</th> <td>".$row['name'] . "</td> "; 
    echo"<th>ImagePath:</th> <td>".$row['imagePath'] . " </td></tr>"; 
    echo"<th>Description:</th> <td>".$row['description'] . "</td> "; 
    echo"<th>Price:</th> <td>".$row['Price'] . " </td></tr>"; 
 } 
 echo"</table>"; 
 ?> 
```

## **笔记：**

`Mysql_*`函数已弃用，因此请使用`PDO`or`MySQLi`代替。我建议 PDO 更容易阅读，你可以在这里学习[PDO Tutorial for MySQL Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)也检查[Pdo for初学者（为什么？以及如何？）](http://www.brightmeup.info/article.php?a_id=2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T06:05:52.607

```
<?php 
 // Connects to your Database 
 mysql_connect("hostname", "username", "password") or die(mysql_error()); 
 mysql_select_db("Database_Name") or die(mysql_error()); 
 $data = mysql_query("SELECT * FROM cars where cars.carType = 'chevy' AND cars.active = 1") 
 or die(mysql_error()); 
 Print "<table border cellpadding=3>"; 
 while($row= mysql_fetch_array( $data )) 
 { 
 Print "<tr>"; 
 Print "<th>Name:</th> <td>".$row['name'] . "</td> "; 
 Print "<th>ImagePath:</th> <td>".$row['imagePath'] . " </td></tr>"; 
 Print "<th>Description:</th> <td>".$row['description'] . "</td> "; 
 Print "<th>Price:</th> <td>".$row['Price'] . " </td></tr>"; 
 } 
 Print "</table>"; 
 ?> 
```

# php - Imagemagick在图像上叠加两个文本？

> ID：13656912
> 
> 赞同：0
> 
> 时间：2012-12-01T06:04:12.653
> 
> 标签：php, imagemagick

我试图在图像上叠加两个文本（一个更大，一个不同的颜色，最终会成为笔画），但我得到的结果是一个混乱的结果。

我在用

```
convert front2.jpg 
\( -pointsize 90 -font Helvetica-Narrow-Bold -fill black -background none -stroke black -strokewidth 15 label:"Hello World World" -virtual-pixel transparent -distort arc 160 \) -gravity north -geometry +0+12 -compose over -composite front5.jpg 
\( -pointsize 90 -font Helvetica-Narrow-Bold -fill white -stroke none -background none label:"Hello World World" -virtual-pixel transparent -distort arc 160 \) -gravity north -geometry +0+10 -compose over -composite front5.jpg 
```

我怎样才能做到这一点并获得正确的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:12:34.157

我刚刚意识到我错过了你的帖子；这些示例将创建投影效果。无论我尝试什么，我都无法正常工作！更新 - 中风将起作用，但不适用于我的本地设置；最后一个例子有中风。

这对我有用，但速度很慢：

```
exec("convert image.jpg -thumbnail 800x800 temp.png");

$cmd = " temp.png \( -pointsize 90 -font Helvetica-Narrow-Bold -fill black -background none label:\"Hello World World\" -virtual-pixel transparent -distort arc 160 \) ".
" -gravity north -geometry +0+12 -compose over -composite  ".
" \( -pointsize 90 -font Helvetica-Narrow-Bold -fill white -background none label:\"Hello World World\" -virtual-pixel transparent -distort arc 160 \) ".
" -gravity north -geometry +0+10 -composite ";

exec("convert $cmd text_circle.png"); 
```

这样用了一半的时间就完成了，但是有个问题就是文字比图片大！做一些计算来减少 $size[0] 和 $size[1] 可以克服这个问题。

```
$size = getimagesize("temp.png");
$cmd = " temp.png \( \( -size $size[0]x$size[1] xc:none -fill black -font Helvetica-Narrow-Bold -pointsize 90 -stroke black -strokewidth 4 -gravity north -annotate +0+0 \"Hello World World\" -font Helvetica-Narrow-Bold -fill white -annotate +3+3 \"Hello World World\" \) -virtual-pixel transparent -distort arc 160 \) ".
" -composite ";
exec("convert $cmd text_circle1.png"); 
```

# makefile - 编译错误：内核模块

> ID：13656913
> 
> 赞同：13
> 
> 时间：2012-12-01T06:04:43.637
> 
> 标签：makefile, linux-kernel, kernel-module, kernel

我是内核编程的新手，我希望运行这个内核模块（发布在下面）......我为此运行了 makefile（发布在下面），但我收到以下错误：有人可以帮我理解如何克服这一点：内核程序应该无错误地运行，因为它取自[英特尔的实现](http://download.intel.com/embedded/software/IA/324264.pdf)：

```
obj-m += hello-1.o

all:
make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

这是错误：

```
snehil@ubuntu:~/Desktop/measure$ make
make -C /lib/modules/3.0.0-12-generic/build M=/home/snehil/Desktop/measure modules
make[1]: Entering directory `/usr/src/linux-headers-3.0.0-12-generic'
CC [M]  /home/snehil/Desktop/measure/measure1.o
/home/snehil/Desktop/measure/measure1.c: In function ‘hello_start’:
/home/snehil/Desktop/measure/measure1.c:108:2: error: implicit declaration of function
  ‘kmalloc’ [-Werror=implicit-function-declaration]
/home/snehil/Desktop/measure/measure1.c:108:8: warning: assignment makes pointer from  
 integer without a cast [enabled by default]
/home/snehil/Desktop/measure/measure1.c:115:11: warning: assignment makes pointer from
 integer without a cast [enabled by default]
/home/snehil/Desktop/measure/measure1.c:124:12: warning: assignment makes pointer from  
integer without a cast [enabled by default]
/home/snehil/Desktop/measure/measure1.c:130:13: warning: assignment makes pointer from
integer without a cast [enabled by default]
cc1: some warnings being treated as errors

make[2]: *** [/home/snehil/Desktop/measure/measure1.o] Error 1
make[1]: *** [_module_/home/snehil/Desktop/measure] Error 2
make[1]: Leaving directory `/usr/src/linux-headers-3.0.0-12-generic'
make: *** [all] Error 2
snehil@ubuntu:~/Desktop/measure$ gcc measure1
gcc: error: measure1: No such file or directory
gcc: fatal error: no input files
compilation terminated. 
```

这是内核模块代码：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/init.h>
#include <linux/hardirq.h>
#include <linux/preempt.h>
#include <linux/sched.h>

#define SIZE_OF_STAT 100000
#define BOUND_OF_LOOP 1000
#define UINT64_MAX (18446744073709551615ULL)

void inline Filltimes(uint64_t **times) {
unsigned long flags;
int i, j;
uint64_t start, end;
unsigned cycles_low, cycles_high, cycles_low1, cycles_high1;
volatile int variable = 0;

asm volatile ("CPUID\n\t"
"RDTSC\n\t"
"mov %%edx, %0\n\t"
"mov %%eax, %1\n\t": "=r" (cycles_high), "=r" (cycles_low)::"%rax", "%rbx", "%rcx", 
          "%rdx");
asm volatile ("CPUID\n\t"
"RDTSC\n\t"
"CPUID\n\t"
"RDTSC\n\t"
"mov %%edx, %0\n\t"
"mov %%eax, %1\n\t": "=r" (cycles_high), "=r" (cycles_low):: "%rax", "%rbx", "%rcx",
 "%rdx");
asm volatile ("CPUID\n\t"
"RDTSC\n\t"::: "%rax", "%rbx", "%rcx", "%rdx");

for (j=0; j<BOUND_OF_LOOP; j++) {
for (i =0; i<SIZE_OF_STAT; i++) { 

variable = 0;

preempt_disable();
raw_local_irq_save(flags);

asm volatile (
"CPUID\n\t"
"RDTSC\n\t"
"mov %%edx, %0\n\t"
"mov %%eax, %1\n\t": "=r" (cycles_high), "=r" (cycles_low):: "%rax", "%rbx", "%rcx", 
"%rdx");
/*call the function to measure here*/
asm volatile(
"CPUID\n\t"
"RDTSC\n\t"
"mov %%edx, %0\n\t"
 "mov %%eax, %1\n\t": "=r" (cycles_high1), "=r" (cycles_low1):: "%rax", "%rbx", "%rcx",
"%rdx");

raw_local_irq_restore(flags);
preempt_enable();

start = ( ((uint64_t)cycles_high << 32) | cycles_low );

end = ( ((uint64_t)cycles_high1 << 32) | cycles_low1 );

if ( (end - start) < 0) {
printk(KERN_ERR "\n\n>>>>>>>>>>>>>>  CRITICAL ERROR IN TAKING THE TIME!!!!!!\n loop(%d)
 stat(%d) start = %llu, end = %llu, variable = %u\n", j, i, start, end, variable);
times[j][i] = 0;
}
else 
{
times[j][i] = end - start;
}
}
}   
return;
}
uint64_t var_calc(uint64_t *inputs, int size)
{
 int i;
uint64_t acc = 0, previous = 0, temp_var = 0;
for (i=0; i< size; i++) {
if (acc < previous) goto overflow;
previous = acc;
acc += inputs[i];
}
acc = acc * acc;
if (acc < previous) goto overflow;
previous = 0;
for (i=0; i< size; i++){
if (temp_var < previous) goto overflow;
previous = temp_var;
temp_var+= (inputs[i]*inputs[i]);
}
 temp_var = temp_var * size;
if (temp_var < previous) goto overflow;
temp_var =(temp_var - acc)/(((uint64_t)(size))*((uint64_t)(size)));
 return (temp_var);
overflow:
printk(KERN_ERR "\n\n>>>>>>>>>>>>>> CRITICAL OVERFLOW ERROR IN var_calc!!!!!!\n\n");
return -EINVAL;
}
static int __init hello_start(void)
{
int i = 0, j = 0, spurious = 0, k =0;
uint64_t **times;
uint64_t *variances;
uint64_t *min_values;
uint64_t max_dev = 0, min_time = 0, max_time = 0, prev_min =0, tot_var=0,    
max_dev_all=0, var_of_vars=0, var_of_mins=0;

printk(KERN_INFO "Loading hello module...\n");

times = kmalloc(BOUND_OF_LOOP*sizeof(uint64_t*), GFP_KERNEL);
if (!times) {
printk(KERN_ERR "unable to allocate memory for times\n");
return 0;
}

for (j=0; j<BOUND_OF_LOOP; j++) {
times[j] = kmalloc(SIZE_OF_STAT*sizeof(uint64_t), GFP_KERNEL);
if (!times[j]) {
printk(KERN_ERR "unable to allocate memory for times[%d]\n", j);
for (k=0; k<j; k++)
kfree(times[k]);
return 0;
}
}

variances = kmalloc(BOUND_OF_LOOP*sizeof(uint64_t), GFP_KERNEL);
if (!variances) {
printk(KERN_ERR "unable to allocate memory for variances\n");
return 0;
}

min_values = kmalloc(BOUND_OF_LOOP*sizeof(uint64_t), GFP_KERNEL);
if (!min_values) {
printk(KERN_ERR "unable to allocate memory for min_values\n");
return 0;
}

Filltimes(times);

for (j=0; j<BOUND_OF_LOOP; j++) {

max_dev = 0;
min_time = 0;
max_time = 0;

for (i =0; i<SIZE_OF_STAT; i++) {
if ((min_time == 0)||(min_time > times[j][i]))
min_time = times[j][i];
if (max_time < times[j][i])
max_time = times[j][i];
}

max_dev = max_time - min_time;
min_values[j] = min_time;

if ((prev_min != 0) && (prev_min > min_time))
spurious++;
if (max_dev > max_dev_all)
max_dev_all = max_dev;

variances[j] = var_calc(times[j], SIZE_OF_STAT);
tot_var += variances[j];

printk(KERN_ERR "loop_size:%d >>>> variance(cycles): %llu; max_deviation: %llu ;min 
 time: %llu", j, variances[j], max_dev, min_time);

prev_min = min_time;
}

var_of_vars = var_calc(variances, BOUND_OF_LOOP);
var_of_mins = var_calc(min_values, BOUND_OF_LOOP);
printk(KERN_ERR "\n total number of spurious min values = %d", spurious);
printk(KERN_ERR "\n total variance = %llu", (tot_var/BOUND_OF_LOOP));
printk(KERN_ERR "\n absolute max deviation = %llu", max_dev_all);
printk(KERN_ERR "\n variance of variances = %llu", var_of_vars);
printk(KERN_ERR "\n variance of minimum values = %llu", var_of_mins);

for (j=0; j<BOUND_OF_LOOP; j++) {
kfree(times[j]);
}
kfree(times);
kfree(variances);
kfree(min_values);
return 0;
}

static void __exit hello_end(void)
{
printk(KERN_INFO "Goodbye Mr.\n");
}

module_init(hello_start);
module_exit(hello_end); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-02T01:43:03.590

如果您使用 kmalloc 或 kzalloc() 进行内存分配，则必须包含`#include<linux/slab.h>`. 它们被称为slab 分配器，这些slab 是块，即存在于RAM 中的“**缓存**”，并且在物理上是连续的。这些slab分配器使用底层的“**伙伴系统算法**”，伙伴分配器提供更细粒度的分配。

**更多参考请通过以下链接： http:** [//en.wikipedia.org/wiki/Slab_allocation](http://en.wikipedia.org/wiki/Slab_allocation) [http://en.wikipedia.org/wiki/Buddy_algorithm](http://en.wikipedia.org/wiki/Buddy_algorithm)

希望这能回答你的问题！！！！！！！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T12:42:39.947

您还没有包含`kmalloc`. 将`#include <linux/slab.h`> 添加到您的代码中。

# php - 如何访问从 php/soap 返回的这个 stdClass 对象中的项目？

> ID：13656917
> 
> 赞同：0
> 
> 时间：2012-12-01T06:04:57.703
> 
> 标签：php, soap, stdclass

我正在使用 osticket api 并开发了此功能以将 osticket 集成到我的 Web 应用程序中：

```
 function ReadTicket($ticketID)
    {
     $osticket = new SoapClient('url');

    $args = array(

        'username'        => 'someuser',

        'password'        => 'some pass',

        'ticketID'        => 1234); 

    try {
        $result = $osticket->__call('ostTicket.getMessages',$args);

      print_r( $result  );    

}

catch (SoapFault $e) {

    throw $e;

} 
} 
```

这是 print_r 命令的结果：

`Array ( [0] => stdClass Object ( [question] => stdClass Object ( [id] => 80 [created] => 2012-11-25T14:48:29-06:00 [name] => name [message] => body ) [answers] => Array ( [0] => stdClass Object ( [id] => 80 [created] => 2012-11-30T23:52:48-06:00 [name] => Admin Admin [message] => testttttttttt ) ) )`)

如何访问结果并仅打印出 id 和 message？

这是对肥皂电话 [http://www.cyberde.nl/software-en-US/osticket-soap-mod/ostticket-getmessages/的参考](http://www.cyberde.nl/software-en-US/osticket-soap-mod/ostticket-getmessages/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:43:42.280

```
foreach($result[0]['answer'] as $ans)//one ore more answers
 echo $ans['id']." '".$ans['message']."'<br/>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:02:26.387

它应该像`$result[0]->question->id`或对于多个结果

```
foreach($result as $r){
  echo $r->question->id;
  foreach($r->answers as $answer){
    echo $answer->id;
  }
} 
```

# language-agnostic - 你可以迭代地模拟递归什么结构

> ID：13656918
> 
> 赞同：-6
> 
> 时间：2012-12-01T06:05:03.713
> 
> 标签：language-agnostic

我认为这将是一个堆栈，但它可以是一个跳过列表、bst 还是队列？

将它作为一个堆栈是有意义的，因为我们可以继续推入它并弹出。但是队列会更好吗，因为它按照它们进入的顺序添加它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:02:02.840

您自己基本上回答了一半：使用堆栈是有意义的，因为如果您使用递归，您可以按照编译器执行的相同顺序向堆栈推送和弹出堆栈。以人们期望的方式做事是一件好事（即使您*可以*以不同的方式做事）。

堆栈也是该问题最简单的解决方案，也是开销最小的容器，并且元素按照您在进行递归时通常想要的顺序出现，而无需您做任何特殊的事情。

相比之下，队列的复杂性要高得多，因为它有头和尾，而且内存管理也更复杂（堆栈基本上只是一块内存和一个递增/递减的指针）。

此外，当使用队列时，元素会按照您推入它们的顺序出现。这对于某些问题可能无关紧要（例如，如果您只想迭代每个元素一次并且不关心顺序），但它可以做到不必要的复杂回溯。例如，当递归细分数据块或递归遍历树时，您将首先递归到左半部分，然后再到左半部分，以此类推。
当您达到最大深度时，您将想要回溯一个级别并递归到右半部分（并回溯另一个级别，依此类推）。使用堆栈，只需简单的*pop*即可轻松完成。使用队列，您必须明确记住要去哪里。这当然不是不可能的，但也不是微不足道的。

您还提到了跳过列表。请注意，skiplist 并不是真正像“列表”那样简单的东西，而是一个相当复杂的结构，更类似于搜索树。它也不是问题的“自然选择”，并且由于它的复杂性绝对不是您想要用于递归之类的东西（尽管如果一个足够顽固，它可能会起作用）。

# javascript - 在父节点中查找子节点索引的最快方法

> ID：13656921
> 
> 赞同：34
> 
> 时间：2012-12-01T06:05:27.757
> 
> 标签：javascript, html, dom

我想找到具有 id 的子 div 的索引`'whereami'`。

```
<div id="parent">
   <div></div>
   <div></div>
   <div id="whereami"></div>
   <div></div>
</div> 
```

目前我正在使用这个函数来查找孩子的索引。

```
function findRow(node){
    var i=1;
    while(node.previousSibling){
        node = node.previousSibling;
        if(node.nodeType === 1){
            i++;
        }
    }
    return i; //Returns 3
}

var node = document.getElementById('whereami'); //div node to find
var index = findRow(node); 
```

小提琴：http: [//jsfiddle.net/grantk/F7JpH/2/](http://jsfiddle.net/grantk/F7JpH/2/)

**问题**
当有数千个 div 节点时，while 循环必须遍历每个 div 来计算它们。这可能需要一段时间。

有没有更快的方法来解决这个问题？

*注意id会变成不同的div节点，所以需要重新计算。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-01T08:05:55.660

出于好奇，我针对 jQuery[`.index()`](http://api.jquery.com/index/)和以下代码运行了您的代码：

```
function findRow3(node)
{
    var i = 1;
    while (node = node.previousSibling) {
        if (node.nodeType === 1) { ++i }
    }
    return i;
} 
```

[**跳转到 jsperf 结果**](http://jsperf.com/sibling-index/9)

事实证明，jQuery 比您的实现（在 Chrome/Mac 上）慢了大约 50%，而我的实现可以说比它慢 1%。

**编辑**

不能完全放过这个，所以我添加了另外两种方法：

*使用 Array.indexOf*

```
[].indexOf.call(node.parentNode.children, node); 
```

对我早期的实验代码的改进，如[HBP 的回答](https://stackoverflow.com/a/13657458/1338292)中所见，它`DOMNodeList`被视为一个数组，它用于`Array.indexOf()`确定`.parentNode.children`其中所有元素的位置。我的第一次尝试是使用`.parentNode.childNodes`，但由于文本节点而给出了不正确的结果。

*使用 previousElementSibling*

受[user1689607 的回答](https://stackoverflow.com/a/13660565/1338292)启发，最近的浏览器除了被调用之外还有另一个属性`.previousSibling`。`previousElementSibling`，它将两个原始语句合二为一。IE <= 8 没有此属性，但`.previousSibling`已经具有此属性，因此可以进行[特征检测](https://gist.github.com/1393418)。

```
(function() {
    // feature detection
    // use previousElementSibling where available, IE <=8 can safely use previousSibling
    var prop = document.body.previousElementSibling ? 'previousElementSibling' : 'previousSibling';

    getElementIndex = function(node) {
        var i = 1;
        while (node = node[prop]) { ++i }
        return i;
    } 
```

**结论**

IE <= 8 浏览器不支持使用`Array.indexOf()`，仿真速度不够快；但是，它确实提高了 20% 的性能。

使用特征检测并`.previousElementSibling`产生 7 倍的改进（在 Chrome 上），我还没有在 IE8 上对其进行测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T07:39:51.753

通过选择`Array` `indexOf`，您可以使用：

```
 var wmi = document.getElementById ('whereami');
  index = [].indexOf.call (wmi.parentNode.children, wmi); 
```

[仅在 Chrome 浏览器上测试]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-01T14:51:46.897

我在[jsPerf 测试中添加了两个测试](http://jsperf.com/sibling-index/7)。两者都使用`previousElementSibling`，但第二个包含 IE8 及更低版本的兼容性代码。

*它们在现代浏览器（这是当今使用的大多数浏览器）中*都表现得非常好，但在旧浏览器中会受到一点影响。

* * *

这是第一个不包含兼容性修复程序的。它适用于 IE9 及更高版本，以及几乎所有的 Firefox、Chrome 和 Safari。

```
function findRow6(node) {
    var i = 1;
    while (node = node.previousElementSibling)
        ++i;
    return i;
} 
```

* * *

这是具有兼容性修复的版本。

```
function findRow7(node) {
    var i = 1,
        prev;
    while (true)
        if (prev = node.previousElementSibling) {
            node = prev;
            ++i;
        } else if (node = node.previousSibling) {
            if (node.nodeType === 1) {
                ++i;
            }
        } else break;
    return i;
} 
```

* * *

因为它会自动抓取元素兄弟姐妹，所以不需要对 进行测试`nodeType`，并且整个循环更短。这解释了性能的大幅提升。

* * *

我还添加了一个循环的最后一个版本，`.children`并将 与`node`每个版本进行比较。

这不如`previousElementSibling`版本快，但仍然比其他版本快*（至少在 Firefox 中）*。

```
function findRow8(node) {
    var children = node.parentNode.children,
        i = 0,
        len = children.length;
    for( ; i < len && children[i] !== node; i++)
        ; // <-- empty statement

    return i === len ? -1 : i;
} 
```

* * *

* * *

回到`previousElementSibling`版本，这里有一个可能会稍微提高性能的调整。

```
function findRow9(node) {
    var i = 1,
        prev = node.previousElementSibling;

    if (prev) {
        do ++i;
        while (prev = prev.previousElementSibling);
    } else {
        while (node = node.previousSibling) {
            if (node.nodeType === 1) {
                ++i;
            }
        }
    }
    return i;
} 
```

~~我还没有在 jsPerf 中对其进行测试，但是~~`previouselementSibling`我认为根据 a 的存在将它分成两个不同的循环只会有帮助。

~~也许我会稍微补充一下。~~

我继续并将其添加到此答案顶部链接的测试中。它确实有一点帮助，所以我认为这可能是值得的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-01T09:04:12.977

比 Jack 的解决方案略有改进，提高了 3%。确实有点奇怪。

```
function findRow5(node)
{
    var i = 2;
    while (node = node.previousSibling)
        i += node.nodeType ^ 3;
    return i >> 1;
} 
```

`nodeType`因为在这种情况下（并且在大多数情况下）只有两个可能的 s：

```
Node.ELEMENT_NODE == 1
Node.TEXT_NODE == 3 
```

所以 xor 3 with `nodeType`, 将给出`2`and `0`。

[http://jsperf.com/sibling-index/4](http://jsperf.com/sibling-index/4)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-01T06:56:13.667

由于您使用的是 jQuery。索引应该可以解决问题

```
jQuery('#whereami').index() 
```

但是以后你打算如何使用索引呢？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-01T07:41:51.253

试试这个：

```
function findRow(node) {
    var i = 1;
    while ((node = node.previousSibling) != null) {
        if (node.nodeType === 1) i++;
    }
    return i; //Returns 3
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-01T15:05:07.093

一般来说，除非代码在循环中运行，否则性能上的微小差异的影响可以忽略不计。必须运行一次代码而不是每次都将明显更快。

做一次这样的事情：

```
var par = document.getElementById('parent');
var childs = par.getElementsByTagName('*');
for (var i=0, len = childs.length;i < len;i++){
  childs[i].index = i;
} 
```

随后找到索引很容易：

```
document.getElementById('findme').index 
```

听起来您所做的任何事情都可以通过在 DOM 和 javascript 之间建立更清晰的关系而受益。考虑学习 Backbone.js，这是一个小型 javascript MVC 库，它使 Web 应用程序更易于控制。

编辑：我已经删除了我使用的 jQuery。我通常会避免使用它，但在 SO 上有相当的偏好，所以我认为它最终还是会被使用。在这里您可以看到明显的区别：http: [//jsperf.com/sibling-index/8](http://jsperf.com/sibling-index/8)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-02T22:13:37.407

我假设给定一个元素，其中所有子元素在文档上按顺序排序，最快的方法应该是进行二进制搜索，比较元素的文档位置。然而，正如结论中介绍的那样，该假设被拒绝。你拥有的元素越多，表现的潜力就越大。例如，如果您有 256 个元素，那么（理想情况下）您只需要检查其中的 16 个！对于65536，只有256！性能增长到 2 的幂！查看更多数字/统计数据。访问[维基百科](https://en.wikipedia.org/wiki/Binary_search_tree)

```
(function(constructor){
   'use strict';
    Object.defineProperty(constructor.prototype, 'parentIndex', {
      get: function() {
        var searchParent = this.parentElement;
        if (!searchParent) return -1;
        var searchArray = searchParent.children,
            thisOffset = this.offsetTop,
            stop = searchArray.length,
            p = 0,
            delta = 0;

        while (searchArray[p] !== this) {
            if (searchArray[p] > this)
                stop = p + 1, p -= delta;
            delta = (stop - p) >>> 1;
            p += delta;
        }

        return p;
      }
    });
})(window.Element || Node); 
```

然后，您使用它的方式是获取任何元素的“parentIndex”属性。例如，查看以下演示。

```
(function(constructor){
   'use strict';
    Object.defineProperty(constructor.prototype, 'parentIndex', {
      get: function() {
        var searchParent = this.parentNode;
        if (searchParent === null) return -1;
        var childElements = searchParent.children,
            lo = -1, mi, hi = childElements.length;
        while (1 + lo !== hi) {
            mi = (hi + lo) >> 1;
            if (!(this.compareDocumentPosition(childElements[mi]) & 0x2)) {
                hi = mi;
                continue;
            }
            lo = mi;
        }
        return childElements[hi] === this ? hi : -1;
      }
    });
})(window.Element || Node);

output.textContent = document.body.parentIndex;
output2.textContent = document.documentElement.parentIndex;
```

```
Body parentIndex is <b id="output"></b><br />
documentElements parentIndex is <b id="output2"></b>
```

**限制**

*   此解决方案的实现在 IE8 及更低版本中不起作用。

# 二进制 VS 线性搜索在 20 万个元素上（可能会导致某些移动浏览器崩溃，请注意！）：

*   在这个测试中，我们将看到线性搜索找到中间元素 VS 二进制搜索需要多长时间。为什么是中间元素？因为它是在所有其他位置的平均位置，所以它最能代表所有可能的位置。

### 二进制搜索

```
(function(constructor){
   'use strict';
    Object.defineProperty(constructor.prototype, 'parentIndexBinarySearch', {
      get: function() {
        var searchParent = this.parentNode;
        if (searchParent === null) return -1;
        var childElements = searchParent.children,
            lo = -1, mi, hi = childElements.length;
        while (1 + lo !== hi) {
            mi = (hi + lo) >> 1;
            if (!(this.compareDocumentPosition(childElements[mi]) & 0x2)) {
                hi = mi;
                continue;
            }
            lo = mi;
        }
        return childElements[hi] === this ? hi : -1;
      }
    });
})(window.Element || Node);
test.innerHTML = '<div> </div> '.repeat(200e+3);
// give it some time to think:
requestAnimationFrame(function(){
  var child=test.children.item(99.9e+3);
  var start=performance.now(), end=Math.round(Math.random());
  for (var i=200 + end; i-- !== end; )
    console.assert( test.children.item(
        Math.round(99.9e+3+i+Math.random())).parentIndexBinarySearch );
  var end=performance.now();
  setTimeout(function(){
    output.textContent = 'It took the binary search ' + ((end-start)*10).toFixed(2) + 'ms to find the 999 thousandth to 101 thousandth children in an element with 200 thousand children.';
    test.remove();
    test = null; // free up reference
  }, 125);
}, 125);
```

```
<output id=output> </output><br />
<div id=test style=visibility:hidden;white-space:pre></div>
```

### 向后（`lastIndexOf`）线性搜索

```
(function(t){"use strict";var e=Array.prototype.lastIndexOf;Object.defineProperty(t.prototype,"parentIndexLinearSearch",{get:function(){return e.call(t,this)}})})(window.Element||Node);
test.innerHTML = '<div> </div> '.repeat(200e+3);
// give it some time to think:
requestAnimationFrame(function(){
  var child=test.children.item(99e+3);
  var start=performance.now(), end=Math.round(Math.random());
  for (var i=2000 + end; i-- !== end; )
    console.assert( test.children.item(
        Math.round(99e+3+i+Math.random())).parentIndexLinearSearch );
  var end=performance.now();
  setTimeout(function(){
    output.textContent = 'It took the backwards linear search ' + (end-start).toFixed(2) + 'ms to find the 999 thousandth to 101 thousandth children in an element with 200 thousand children.';
    test.remove();
    test = null; // free up reference
  }, 125);
});
```

```
<output id=output> </output><br />
<div id=test style=visibility:hidden;white-space:pre></div>
```

### 前向 (`indexOf`) 线性搜索

```
(function(t){"use strict";var e=Array.prototype.indexOf;Object.defineProperty(t.prototype,"parentIndexLinearSearch",{get:function(){return e.call(t,this)}})})(window.Element||Node);
test.innerHTML = '<div> </div> '.repeat(200e+3);
// give it some time to think:
requestAnimationFrame(function(){
  var child=test.children.item(99e+3);
  var start=performance.now(), end=Math.round(Math.random());
  for (var i=2000 + end; i-- !== end; )
    console.assert( test.children.item(
        Math.round(99e+3+i+Math.random())).parentIndexLinearSearch );
  var end=performance.now();
  setTimeout(function(){
    output.textContent = 'It took the forwards linear search ' + (end-start).toFixed(2) + 'ms to find the 999 thousandth to 101 thousandth children in an element with 200 thousand children.';
    test.remove();
    test = null; // free up reference
  }, 125);
});
```

```
<output id=output> </output><br />
<div id=test style=visibility:hidden;white-space:pre></div>
```

### PreviousElementSibling 计数器搜索

计算 PreviousElementSiblings 的数量以获取 parentIndex。

```
(function(constructor){
   'use strict';
    Object.defineProperty(constructor.prototype, 'parentIndexSiblingSearch', {
      get: function() {
        var i = 0, cur = this;
        do {
            cur = cur.previousElementSibling;
            ++i;
        } while (cur !== null)
        return i; //Returns 3
      }
    });
})(window.Element || Node);
test.innerHTML = '<div> </div> '.repeat(200e+3);
// give it some time to think:
requestAnimationFrame(function(){
  var child=test.children.item(99.95e+3);
  var start=performance.now(), end=Math.round(Math.random());
  for (var i=100 + end; i-- !== end; )
    console.assert( test.children.item(
        Math.round(99.95e+3+i+Math.random())).parentIndexSiblingSearch );
  var end=performance.now();
  setTimeout(function(){
    output.textContent = 'It took the PreviousElementSibling search ' + ((end-start)*20).toFixed(2) + 'ms to find the 999 thousandth to 101 thousandth children in an element with 200 thousand children.';
    test.remove();
    test = null; // free up reference
  }, 125);
});
```

```
<output id=output> </output><br />
<div id=test style=visibility:hidden;white-space:pre></div>
```

### 没有搜索

如果浏览器优化了搜索，测试结果将是基准测试。

```
test.innerHTML = '<div> </div> '.repeat(200e+3);
// give it some time to think:
requestAnimationFrame(function(){
  var start=performance.now(), end=Math.round(Math.random());
  for (var i=2000 + end; i-- !== end; )
    console.assert( true );
  var end=performance.now();
  setTimeout(function(){
    output.textContent = 'It took the no search ' + (end-start).toFixed(2) + 'ms to find the 999 thousandth to 101 thousandth children in an element with 200 thousand children.';
    test.remove();
    test = null; // free up reference
  }, 125);
});
```

```
<output id=output> </output><br />
<div id=test style=visibility:hidden></div>
```

## 结论

但是，在 Chrome 中查看结果后，结果与预期相反。更笨的前向线性搜索是惊人的 187 毫秒，3850%，比二分搜索快。显然，Chrome 不知何故神奇地超越`console.assert`并优化了它，或者（更乐观地）Chrome 在内部使用 DOM 的数字索引系统，并且这个内部索引系统通过在对象`Array.prototype.indexOf`上使用时应用的优化暴露出来。`HTMLCollection`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-21T18:23:16.133

# 2020 年 - 使用表格的解决方案 - Clean Vanilla JS 方法

> **归功于：** [阿兰克鲁兹](https://stackoverflow.com/users/4259032/alain-cruz)
> 
> **资料来源：** [https](https://stackoverflow.com/a/58845058/3626361) ://stackoverflow.com/a/58845058/3626361 （如果对您有帮助，请给他投赞成票）
> 
> **问题：**如何通过点击返回表格单元格的行列索引？

```
const cells = document.querySelectorAll('td');
cells.forEach(cell => {
  cell.addEventListener('click', () =>
    console.log("Row index: " + cell.closest('tr').rowIndex + " | Column index: " + cell.cellIndex));
}); 
```

```
<table>
  <tr>
    <td>0:0</td>
    <td>0:1</td>
    <td>0:2</td>
    <td>0:3</td>
  </tr>
  <tr>
    <td>1:0</td>
    <td>1:1</td>
    <td>1:2</td>
    <td>1:3</td>
  </tr>
  <tr>
    <td>2:0</td>
    <td>2:1</td>
    <td>2:2</td>
    <td>2:3</td>
  </tr>
</table> 
```

干杯! 斯特凡诺

# python - 如何过滤掉python中的单词？

> ID：13656925
> 
> 赞同：2
> 
> 时间：2012-12-01T06:05:59.283
> 
> 标签：python, string, sorting

例如：

```
item =['the dog is gone', 'the dog and cat is gone']
words= ['dog','cat'] 
```

我希望能够过滤掉`dog`，`cat`所以它会显示：

```
item=['the  is gone', 'the   and  is gone'] 
```

```
item1=[] 
for w in words:
   for line in item:
      if w in line:
         j=gg.replace(it,'')
         item1.append(j) 
```

我得到以下信息：

```
['the  is gone', 'the cat and  is gone', 'the  and dog is gone'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T06:16:54.000

您正在遍历每个单词的所有行并附加替换。您应该切换这些循环：

```
item1 = [] 
for line in item:
    for w in words:
        line = line.replace(w, '')
    item1.append(line) 
```

注意：我更改了一些代码

*   改为`gg`_`line`
*   改为`it`_`item`
*   删除了检查是否`line`包含`w`，因为它由`replace`

`replace`不知道单词边界。如果您只想删除整个单词，您应该尝试不同的方法。使用[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)

```
import re

item1 = [] 
for line in item:
    for w in words:
        line = re.sub(r'\b%s\b' % w, '', line)  # '\b' is a word boundry
    item1.append(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T08:13:18.767

您可以改用这种方法：

```
item =['the dog is gone', 'the dog and cat is gone']
words= ['dog','cat'] 

item2 = [" ".join([w for w in t.split() if not w in words]) for t in item]

print item2

>>> ['the is gone', 'the and is gone'] 
```

# concurrency - MIPS 并发

> ID：13656926
> 
> 赞同：1
> 
> 时间：2012-12-01T06:06:00.103
> 
> 标签：concurrency, mips

就并发而言，这两种将值存储在全局变量中的方式有​​什么区别？：

```
lis $4
.word 0x10008008
sw $3, 0($4) 
```

对比

```
sw $3, 8($GP) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T06:17:42.247

[http://www.mips.com/media/files/MD00565-2B-MIPS32-QRC-01.01.pdf](http://www.mips.com/media/files/MD00565-2B-MIPS32-QRC-01.01.pdf)

“lis $4”似乎不是一个有效的 MIPS 指令

# php - PHP实时查看执行状态，可以吗？

> ID：13656928
> 
> 赞同：3
> 
> 时间：2012-12-01T06:06:25.277
> 
> 标签：php, ubuntu

我正在使用 ubuntu 和 mktorrent，我想知道是否可以将 mktorrent 命令的输出实时传输到我的 php 应用程序？所以我可以查看创建种子的状态吗？目前，`exec`只需坐在那里等待（有时需要一个多小时：O）以完成 torrent 制作。php proc open 命令是否执行与此类似的操作，还是我必须通过屏幕会话设置找出某种疯狂的 ajax？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:25:56.577

PHP 完全在服务器上执行，呈现的页面被发送到您的浏览器。为了显示任何进度并更新它，您必须反复从服务器请求它（或者让服务器通过套接字或长轮询或其他方式发送进度，但想法是一样的）

您需要一种方法让服务器从命令和某种 JS (AJAX) 发出进度更新以与服务器通信以获取这些更新。

如果您可以让 mktorrent 命令将进度输出到文件，则可以让 php 在页面加载时读取文件并将其回显给用户。您可以使用简单的[元刷新标签](http://en.wikipedia.org/wiki/Meta_refresh)在几秒钟后刷新进度页面。

有关让 PHP 异步执行 shell 命令的信息，请参阅[PHP 中的异步 shell exec，](https://stackoverflow.com/questions/222414/asynchronous-shell-exec-in-php)这样您的 PHP 脚本就不必等待它完成，从而导致您的页面挂起，直到任务完成。

# android - Android：我正在用列表填充列表视图。通过解析获取值来填充列表

> ID：13656931
> 
> 赞同：0
> 
> 时间：2012-12-01T06:07:26.940
> 
> 标签：android, android-xml

这是创建适配器和填充列表的代码。我还给出了列表包含的值。

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.two_line_list_item, android.R.id.text1, temp);
           // temp is list
            lst.setAdapter(adapter); 
```

我认为我在列表结构中遇到的问题与 listview 不兼容请提供有效的方法来做到这一点 temp 中的值是

```
 12-01 10:58:51.161: I/System.out(521): list has value  [
 12-01 10:58:51.161: I/System.out(521):         asdfasdf
 12-01 10:58:51.161: I/System.out(521):         asdf
 12-01 10:58:51.161: I/System.out(521):         cat5
 12-01 10:58:51.180: I/System.out(521):         asdf
 12-01 10:58:51.180: I/System.out(521):       , 
 12-01 10:58:51.190: I/System.out(521):         asdf
 12-01 10:58:51.190: I/System.out(521):         fdf
 12-01 10:58:51.190: I/System.out(521):         cat5
 12-01 10:58:51.190: I/System.out(521):         zxcv
 12-01 10:58:51.200: I/System.out(521):       , 
 12-01 10:58:51.200: I/System.out(521):         dasdasd
 12-01 10:58:51.200: I/System.out(521):         adsd
 12-01 10:58:51.200: I/System.out(521):         cat3
 12-01 10:58:51.200: I/System.out(521):         asdf
 12-01 10:58:51.200: I/System.out(521):       , 
 12-01 10:58:51.200: I/System.out(521):         sad 
 12-01 10:58:51.200: I/System.out(521):         de
 12-01 10:58:51.200: I/System.out(521):         cat1
 12-01 10:58:51.200: I/System.out(521):         asdf
 12-01 10:58:51.210: I/System.out(521):       , 
 12-01 10:58:51.210: I/System.out(521):         asdasd
 12-01 10:58:51.210: I/System.out(521):         asd
 12-01 10:58:51.210: I/System.out(521):         cat2
 12-01 10:58:51.210: I/System.out(521):         zxcv
 12-01 10:58:51.210: I/System.out(521):       , 
 12-01 10:58:51.210: I/System.out(521):         asdasdf
 12-01 10:58:51.210: I/System.out(521):         fdsfsdfdfsf
 12-01 10:58:51.210: I/System.out(521):         cat4 +
 12-01 10:58:51.210: I/System.out(521):         zxcv
 12-01 10:58:51.210: I/System.out(521):       ] 
```

# c++ - 从 BST 中删除唯一的节点

> ID：13656932
> 
> 赞同：0
> 
> 时间：2012-12-01T06:07:50.397
> 
> 标签：c++

我的 BST 只有一个节点。我写了一个代码来删除那个节点，但它仍然存在。就像它没有被......更新一样。这是我的简单代码，只是为了测试案例

```
void Delete(BSTree* tree, int& key)
{
    if (key == tree->key)
        tree=NULL;
} 
```

而且我的 BSTree 类没有父级。只是值和左右指针。我的代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:10:43.693

You aren't changing the actual `tree` pointer. You're only changing the pointer that was allocated on the stack, pointing to the same address as the passed-in pointer.

You want `BSTree *&tree` so that you get the reference to the original pointer, so that any changes effect it.

As Als points out, don't forget to free memory in addition to the above.

# probability - Amazon Interview about Success probability

> ID：13656940
> 
> 赞同：-1
> 
> 时间：2012-12-01T06:09:25.580
> 
> 标签：probability

> **Possible Duplicate:**
> [Failure rate of a system](https://stackoverflow.com/questions/6819334/failure-rate-of-a-system)

If a system has a 10% independent chance of failing in any given hour, what are the chances of it failing in a given 2 hour period or n-hours period? Note: 10% failure probability in 1 hour has nothing to do with 10% of the time . It's just that a system has a 10% independent chance of failing in any given hour

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T06:19:03.553

*   让`P`[`fail`]是系统在任何给定小时内发生故障的概率。
*   那么`P`[`nofail`]，系统在任何给定小时内不发生故障的概率为`1 - P`[`fail`]。
*   它在 2 小时内不失败的机会是 ( `P`[`nofail`]) ^(`2`)，因为它必须在每个小时内独立地不失败，并且[两个独立事件的联合概率是每个事件概率的乘积](http://en.wikipedia.org/wiki/Independence_%28probability_theory%29#Two_events)（即*`P(A ∩ B) = P(A)*P(B)`*）。
*   那么，更一般地说，`chance of it not failing in n hours`是 ( `P`[`nofail`]) ^(`n`) 。
*   `n`它在几个小时内失败的机会是`1 - (chance of not failing in n hours)`。

你应该能够从那里解决它。

# django - Django apache mod_wsgi 权限被拒绝

> ID：13656946
> 
> 赞同：0
> 
> 时间：2012-12-01T06:10:36.577
> 
> 标签：django, apache, mod-wsgi, chmod

我已经安装了 apache 和 mod_wsgi，所有的网页都被检索和显示了，但是当我尝试访问一个静态文件（例如：http://localhost/static/css/base. css）它说我无权访问该文件，媒体文件也是如此。所以基本上返回的网页只是纯 HTML。

我已按照演示幻灯片[http://code.google.com/p/modwsgi/downloads/detail?name=mod_wsgi-pycon-sydney-2010.pdf](http://code.google.com/p/modwsgi/downloads/detail?name=mod_wsgi-pycon-sydney-2010.pdf)中的步骤操作，并通过`chmod o+rx /home/loai/workspace/Faculty` 我的 httpd 让其他人可以访问这些目录。 conf部分是：

```
WSGIScriptAlias / /home/loai/workspace/Faculty/Faculty/wsgi.py
WSGIPythonPath /home/loai/workspace/Faculty

Alias /media/ /home/loai/workspace/Faculty/Faculty/media
Alias /static/ /home/loai/workspace/Faculty/Faculty/static

<Directory /home/loai/workspace/Faculty/Faculty/static>
Order deny,allow
Allow from all
</Directory>

<Directory /home/loai/workspace/Faculty/Faculty/media>
Order deny,allow
Allow from all
</Directory>

<Directory /home/loai/workspace/Faculty/Faculty>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

奇怪的是，当我删除“文件”指令时，它变成：

```
<Directory /home/loai/workspace/Faculty/Faculty>
Order deny,allow
Allow from all
</Directory>

instead of 

<Directory /home/loai/workspace/Faculty/Faculty>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

然后尝试访问任何静态或媒体文件引发（未找到）而不是权限被拒绝！但仍然加载了纯 html 页面！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:08:20.843

代替：

```
Alias /media/ /home/loai/workspace/Faculty/Faculty/media
Alias /static/ /home/loai/workspace/Faculty/Faculty/static 
```

采用：

```
Alias /media/ /home/loai/workspace/Faculty/Faculty/media/
Alias /static/ /home/loai/workspace/Faculty/Faculty/static/ 
```

如果挂载点上有斜杠，则目录上需要有斜杠。如果您没有匹配它们，则可能无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:44:53.220

试试这个..如果它确实尝试添加媒体目录的配置。确保递归设置静态文件夹的读取权限

```
 <VirtualHost *:80>

    DocumentRoot /home/loai/workspace/Faculty/

    Alias /static/ /home/loai/workspace/Faculty/static/

    <Directory /home/loai/workspace/Faculty>
    Order allow,deny
    Allow from all
    </Directory> 
    <Location "/static/">
        SetHandler None
    </Location>

    WSGIScriptAlias / /home/loai/workspace/Faculty/Faculty/wsgi.py
    </VirtualHost> 
```

更新：

我建议将您的静态文件夹复制到教师应用程序之外。我已经更改了配置文件中的路径。

# android - Android displaying images dynamically

> ID：13656947
> 
> 赞同：2
> 
> 时间：2012-12-01T06:10:42.107
> 
> 标签：android, image, parsing

I've been having lots of troubles using adapter to display my images properly into my imageView. So basically I have a JSON string and I am parsing through it to get the url of each image. Then I want to display the each image with its title in a list view fashion.

I found this code online where it works perfectly when only one image needs to be displayed, but it doesn't work when I have to do this dynamically. Anyone has some good suggestions on how to get it to work? I attached parts of my codes for references.

Thank you!!!

```
 //results => JSON string
 ArrayList<HashMap<String, Object>> resultList = new ArrayList<HashMap<String, Object>>();
 for(int i = 0; i < results.length(); i++){
 JSONObject c = results.getJSONObject(i);

// Storing each json item in variable
cover = c.getString(TAG_COVER);
String title = c.getString(TAG_TITLE);

try {

    URL urlS = new URL(cover);
    new MyDownloadTask().execute(urlS);

    }catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
// creating new HashMap
HashMap<String, Object> map = new HashMap<String, Object>(); 

// adding each child node to HashMap key => value
map.put(TAG_COVER, cover);
map.put(TAG_TITLE, title);
// adding HashList to ArrayList
resultList.add(map);
}
}
   } catch (JSONException e) {
e.printStackTrace();
  } 

/**
 * Updating parsed JSON data into ListView
 * */
ListAdapter adapter = new SimpleAdapter(this, resultList,
        R.layout.list_item,
        new String[] {TAG_TITLE}, new int[] {
        R.id.title});

setListAdapter(adapter); 
```

And here is the image downloaded codes I found :

```
private class MyDownloadTask extends AsyncTask<URL, Integer, Bitmap> {
    @Override
    protected Bitmap doInBackground(URL... params) {
        URL url = params[0];
        Bitmap bitmap = null;
        try {
            URLConnection connection = url.openConnection();
            connection.connect();
            InputStream is = connection.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bitmap = BitmapFactory.decodeStream(bis);
            bis.close();
            //is.close(); THIS IS THE BROKEN LINE
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }

        return bitmap;
    }

    protected void onPostExecute(Bitmap bitmap) {
        if (bitmap != null) {
            ImageView myImage = (ImageView) findViewById(R.id.list_image);
            myImage.setImageBitmap(bitmap);
        } else {
            Toast.makeText(getApplicationContext(), "Failed to Download Image", Toast.LENGTH_LONG).show();
        }

    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:19:15.747

有很好的图书馆调用`AQuery`。您可以使用它，只需编写 2 行代码即可轻松获取所有这些东西，此外，它还会为您缓存所有图像，特别是如果您在`ListView`

```
AQuery aq = new AQuery(activity);
aq.id(R.id.image).image(url, false, true); 
```

我也觉得用起来会更好`CustomAdapter`。我不确定是否可以使用`SimpleAdapter`. 希望这会帮助你。

# php - 会话无法在 wamp 上运行，但可以在实时服务器上运行

> ID：13656952
> 
> 赞同：4
> 
> 时间：2012-12-01T06:11:29.823
> 
> 标签：php, session, wamp

我有这段代码，我已经尝试了我能想到的一切，让它在我的 WAMP 本地服务器上工作，任何帮助将不胜感激。我是 PHP 笨蛋。这适用于实时服务器，但不适用于我的 WAMP 服务器。我确实登录了，只是页面似乎没有将会话变量传递给正确的用户级别。这就是第一次对糟糕的描述感到抱歉的原因。

```
if(!empty($_SESSION['LoggedIn']) && !empty($_SESSION['login']))
 {
if ($level == "Administrator") {

echo 'My Content';
}

elseif ($level == "Bank Officer") {
echo "";
}

elseif ($level == "Agent") {
echo "";
 }

elseif(!empty($_POST['login']) && !empty($_POST['password']))
{
$login = mysql_real_escape_string($_POST['login']);
$password = $_POST['password'];

$checklevel = mysql_query("SELECT * FROM users WHERE login = '".$login."' AND password = '".$password."' ");
if(mysql_num_rows($checklevel) == 1)
{
    $row = mysql_fetch_array($checklevel);
    $level = $row['level'];
    $_SESSION['level'] = $level;
}

$checklogin = mysql_query("SELECT * FROM users WHERE login = '".$login."' AND password = '".$password."' AND level='".$level."'");
if(mysql_num_rows($checklogin) == 1)
{
    $row = mysql_fetch_array($checklogin);
    $firstname = $row['firstname'];
    $login = $row['login'];
    $agent = $row['agent'];
    $_SESSION['agent'] = $agent;
    $_SESSION['firstname'] = $firstname;
    $_SESSION['login'] = $login;
    $_SESSION['LoggedIn'] = 1; 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:25:36.397

```
if ($_SESSION['level'] == "Bank Officer") 
{
    header('Location: index3.php'); 
    exit;
}
elseif ($_SESSION['level'] == "Agent")
{
    header('Location: index4.php'); 
    exit;
}
elseif ($_SESSION['level'] == "Bank Manager") 
{
    header('Location: index5.php'); 
    exit;
}
else
{
    echo "Contact Administrator";
    exit;
} 
```

# windows - Problems with building opencv 2.3.1, 2.4.2 and 2.4.3, on Windows 7 using MinGW

> ID：13656956
> 
> 赞同：0
> 
> 时间：2012-12-01T06:12:21.800
> 
> 标签：windows, opencv, build, mingw, dynamic-linking

Last few days I am struggling with installation OpenCV 2.3.1 on Windows using MinGW compiler. First I've tried newest version 2.4.3 and 2.4.2 but same problem occured. Then I tried older version 2.3.1 but still.

Actually I followed these instructions [http://www.pansenti.com/wordpress/?page_id=174](http://www.pansenti.com/wordpress/?page_id=174) Everything went smooth until building with MinGW. Here is my console output

```
C:\OpenCV-2.3.1\opencv\cmake-release>C:\MinGW\bin\mingw32-make.exe install
Scanning dependencies of target libjpeg
[  0%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapimin.obj
[  0%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapistd.obj
[  0%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jccoefct.obj
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jccolor.obj
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcdctmgr.obj
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jchuff.obj
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcinit.obj
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmainct.obj
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmarker.obj
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmaster.obj
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcomapi.obj
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcparam.obj
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcphuff.obj
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcprepct.obj
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcsample.obj
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jctrans.obj
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdapimin.obj
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdapistd.obj
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdatadst.obj
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdatasrc.obj
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdcoefct.obj
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdcolor.obj
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jddctmgr.obj
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdhuff.obj
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdinput.obj
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmainct.obj
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmarker.obj
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmaster.obj
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmerge.obj
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdphuff.obj
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdpostct.obj
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdsample.obj
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdtrans.obj
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jerror.obj
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctflt.obj
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctfst.obj
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctint.obj
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctflt.obj
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctfst.obj
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctint.obj
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctred.obj
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jmemansi.obj
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jmemmgr.obj
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jquant1.obj
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jquant2.obj
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jutils.obj
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/transupp.obj
Linking C static library ..\lib\libjpeg.lib
[  8%] Built target libjpeg
Scanning dependencies of target zlib
[  8%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/adler32.obj
[  8%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/compress.obj
[  8%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/crc32.obj
[  9%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/deflate.obj
[  9%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzclose.obj
[  9%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzlib.obj
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\gzlib.c: In function 'gz_error':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\gzlib.c:518:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
[  9%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzread.obj
[  9%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzwrite.obj
[  9%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/infback.obj
[ 10%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inffast.obj
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\inffast.c: In function 'inflate_fast':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\inffast.c:324:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
[ 10%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inflate.obj
[ 10%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inftrees.obj
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\inftrees.c: In function 'inflate_table':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\inftrees.c:330:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
[ 10%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/trees.obj
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c:1244:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c:1244:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c: In function '_tr_init':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c:410:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c: In function '_tr_stored_block':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c:883:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c: In function '_tr_align':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c:919:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c: In function '_tr_flush_block':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c:1020:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c: In function '_tr_tally':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\trees.c:1071:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
[ 10%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/uncompr.obj
[ 11%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/zutil.obj
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\zutil.c: In function 'zcalloc':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\zutil.c:308:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\zutil.c: In function 'zcfree':
C:\OpenCV-2.3.1\opencv\3rdparty\zlib\zutil.c:316:1: warning: visibility attribute not supported in this configuration; ignored [-Wattributes]
Linking C static library ..\lib\zlib.lib
[ 11%] Built target zlib
Scanning dependencies of target opencv_core
[ 11%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/alloc.obj
[ 11%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/arithm.obj
[ 11%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/array.obj
[ 11%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/cmdparser.obj
[ 11%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/convert.obj
[ 12%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/copy.obj
[ 12%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/datastructs.obj
[ 12%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/drawing.obj
[ 12%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/dxt.obj
[ 12%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/lapack.obj
[ 12%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/mathfuncs.obj
[ 13%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/matmul.obj
[ 13%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/matop.obj
[ 13%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/matrix.obj
[ 13%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/out.obj
[ 13%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/persistence.obj
[ 14%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/precomp.obj
[ 14%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/rand.obj
[ 14%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/stat.obj
[ 14%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/system.obj
[ 14%] Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/tables.obj
Linking CXX shared library ..\..\bin\opencv_core231.dll
[ 14%] Built target opencv_core
Scanning dependencies of target opencv_imgproc
[ 14%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/accum.obj
[ 14%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/approx.obj
[ 14%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/canny.obj
[ 14%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/color.obj
[ 14%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/contours.obj
[ 15%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/convhull.obj
[ 15%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/corner.obj
[ 15%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/cornersubpix.obj
[ 15%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/deriv.obj
[ 15%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/distransform.obj
[ 16%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/emd.obj
[ 16%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/featureselect.obj
[ 16%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/featuretree.obj
[ 16%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/filter.obj
[ 16%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/floodfill.obj
[ 16%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/geometry.obj
[ 17%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/grabcut.obj
[ 17%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/histogram.obj
[ 17%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/hough.obj
[ 17%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/imgwarp.obj
[ 17%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/inpaint.obj
[ 17%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/kdtree.obj
[ 18%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/linefit.obj
[ 18%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/lsh.obj
[ 18%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/matchcontours.obj
[ 18%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/moments.obj
[ 18%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/morph.obj
[ 19%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/precomp.obj
[ 19%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/pyramids.obj
[ 19%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/pyrsegmentation.obj
[ 19%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/rotcalipers.obj
[ 19%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/samplers.obj
[ 19%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/segmentation.obj
[ 20%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/shapedescr.obj
[ 20%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/smooth.obj
[ 20%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/spilltree.obj
[ 20%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/subdivision2d.obj
[ 20%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/sumpixels.obj
[ 21%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/tables.obj
[ 21%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/templmatch.obj
[ 21%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/thresh.obj
[ 21%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/undistort.obj
[ 21%] Building CXX object modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/utils.obj
mingw32-make[2]: *** No rule to make target `lib/opencv_core231.lib', needed by `bin/opencv_imgproc231.dll'.  Stop.
mingw32-make[1]: *** [modules/imgproc/CMakeFiles/opencv_imgproc.dir/all] Error 2
mingw32-make: *** [all] Error 2

C:\OpenCV-2.3.1\opencv\cmake-release> 
```

Same problem occured during installation 2.4.3 and also 2.4.2\. (crash during linking opencv_imgproc)

I don't know what I am doing wrong. It seems that I am not including some libraries.

Thank you for any advice

# php - How to clear the Laravel Application Key via Terminal

> ID：13656957
> 
> 赞同：-2
> 
> 时间：2012-12-01T06:12:36.930
> 
> 标签：php, ubuntu, terminal, laravel

I'm creating a application. I want to clear the Laravel Application key via terminal. Not manually.

Is there any way to clear via artisan. I can only generate via following command

```
php artisan key:generate 
```

But there is no option to delete the key via artisan command.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:34:34.420

我现在相信没有办法，但是如果你使用 git 只是 fork laravel，请继续清空应用程序密钥，并且每当从你的 repo 启动一个新的 Laravel 项目克隆时，只需生成一个密钥而不进行任何编辑。

我看到你使用的是 Ubuntu，但你知道有一个用于 Alfred 的 OSX 扩展，用于[在这里](https://github.com/clarkeash/Laravel-Alfred-Extension)创建 Laravel 项目，并附带 Jeffrey Way 的生成器。

# .htaccess - 删除尾部斜杠和非 www 到 www - 使用 .htaccess

> ID：13656960
> 
> 赞同：1
> 
> 时间：2012-12-01T06:12:46.910
> 
> 标签：.htaccess, mod-rewrite, trailing-slash

同时组合 2 个 mod_rewrite 时，我遇到了 .htacess 的问题：

*   删除尾部斜杠
*   将非 www 重定向到 www

这是我的 .htaccess 文件

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

# Redirect non-www to www
RewriteCond %{HTTP_HOST} !^www\.domain\.com$ [NC]
RewriteRule ^(.+)/$ http://www.domain.com/$1 [R=301,L]

# Remove trailing slash
RewriteCond %{HTTP_HOST} ^domain.com
RewriteRule (.*) http://www.domain.com/$1 [R=301,L] 
```

当我只使用其中一个时，它们工作得很好，但是当我把它们放在一起时，页面就像永远加载一样。

请帮助我找到一种可以在同一个 .htaccess 中使用它们的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:20:06.800

试试这个：

```
RewriteEngine on
Options +FollowSymLinks
RewriteBase /
#Non www to www without trailing slash
RewriteCond %{HTTP_HOST} ^(domain\.com)/?$ [NC]
RewriteRule ^(.*/?[^/]+)/?$ http://www.domain.com/$1 [R=301,L,OR]
RewriteRule  .* http://www.domain.com [R=301,L] 
```

结果：

`http://domain.com/aa/`到`http://ww.domain.com/aa`

`http://domain.com/aa/bb/`到`http://ww.domain.com/aa/bb`等

除此以外`http://domain.com/`的所有内容都将`http://www.domain.com/`带有斜杠

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T13:57:27.923

**使用 HTACCESS 的非万维网 URL：**

您可以将以下代码添加到您的 .htaccess 文件中，您可以在您的网站根目录中找到它，如果您没有找到它，您可以在文本编辑器中将其复制并保存为 .htaccess，然后上传。

**ps：**请确保在继续之前备份 .HTACCESS 文件。不正确的代码可能导致 500 错误。

```
 RewriteEngine On
            RewriteCond %{HTTP_HOST} !^www.example.com$ [NC]
            RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 

```

**删除尾部斜杠**

关闭尾部斜杠时要小心。如果您的主机启用了 mod_dir，请确保关闭默认启用的目录斜杠。无论您设置什么规则，该指令都会在目录末尾添加一个斜杠。要禁用此功能，请将其添加到 htaccess 文件的顶部：

```
 DirectorySlash Off 

```

默认情况下，您的浏览器甚至您的服务器都会在目录中添加尾部斜杠。这样做是有原因的。如果你必须去掉斜杠，你会这样做：

```
 RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !(.*)$
    RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 

```

# linux - Where is $KERNEL_VERSION defined

> ID：13656963
> 
> 赞同：1
> 
> 时间：2012-12-01T06:13:35.370
> 
> 标签：linux

I was going through some makefiles and I observed that this statement is used quite often

```
ifneq ($(KERNELRELEASE),) 
```

to see if the file is invoked from the kernel build system . I have tried going into /usr/src/mykernelheaders and tried a printenv. But I still do not see $KERNELRELEASE defined. Where exactly is it defined in linux?

# android - 在android中通过SQLite删除一行

> ID：13656965
> 
> 赞同：1
> 
> 时间：2012-12-01T06:14:03.217
> 
> 标签：android, sqlite

我想写一个查询来从表中删除一行。我对写声明感到困惑。我需要一些帮助来修改这个。

```
db.delete(TABLE_NAME, "_id="+id, null); 
```

我从 editText 获取我的 id，然后将其放入 String id。这是获取我的身份的方法：

```
String id = editId.getText().toString(); 
```

如果没有足够的信息让您理解我的问题，请告诉我。我将添加缺少的部分。

我找到了很多数据，但我仍然无法修改它。我会感谢你的帮助。

这是我的 onCreate 函数：

```
public void onCreate(SQLiteDatabase db) {
        final String INIT_TABLE = "CREATE TABLE " + TABLE_NAME + " (" +
                                  _ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                                  NAME + " CHAR, " +
                                  TEL + " CHAR, " +
                                  EMAIL + " CHAR);"; 
        db.execSQL(INIT_TABLE);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:27:31.620

正如您所说**“我想编写一个查询以从表中删除一行。”**

```
 private void deleteRow(int id)
    {
        try
        {
            db.execSQL("delete from tablename where tablefield=" +id);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    } 
```

您可以调用此函数并在其中传递 id 以删除行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:20:45.293

对我来说看起来不错，请参阅以下语法：

```
String table = "TableName";
String where = "ColumnNumeric = 100"
    + " AND ColumnString = 'value2'";
String whereArgs = null;
mDb.delete(table, where, whereArgs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:41:38.147

```
 public void delete_byID(int id){
     SQLiteDatabase db = this.getWritableDatabase();
     db.delete(TABLE_NAME, KEY_ID+"="+id, null);
    } 
```

# jquery - jQuery Mobile - List with collapsible content

> ID：13656966
> 
> 赞同：1
> 
> 时间：2012-12-01T06:14:29.753
> 
> 标签：jquery, list, hide, show, expand

I'm trying to make a list where some entries can be clicked to expand/show more/hide. It's very similar to a `collapsible`, but some items have "extra info" and others don't. Also, it should be more on the "list" side, semantically. I've tried searching for "collapsible list item" but I come up with more "lists inside collapsibles".

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T19:33:24.000

**只需对不需要**展开或折叠的项目使用这样的普通列表视图即可。

```
<ul data-role="listview" data-theme="b">
<li><a href="acura.html">Acura</a></li>
</ul> 
```

然后对于**确实**使用可折叠列表的项目，例如

```
<div data-role="collapsible">
   <h3>Stock #3 Order #3</h3>
   <ul data-role="listview">
   <li>Info 1</li>
   <li>Info 2</li>
   <li>Info 3</li>
   </ul>

   </div> 
```

# php - XML Parsing Error: no element found Location: moz-nullprincipal. NOT fetching data from another domain

> ID：13656970
> 
> 赞同：0
> 
> 时间：2012-12-01T06:14:51.020
> 
> 标签：php, json

I'm trying to use a PHP file to pull data from a database and convert it to JSON using a $.getJSON call, but I just get the following error:

```
XML Parsing Error: no element found Location: moz-nullprincipal:{af08ce9b-940c-41a3-bd20-e4e5ad1a6d23} Line Number 17, Column 3:
?>
--^ 
```

Everything I can find says this is because I'm trying to pull the data from another domain, but this isn't the case for me; the website is a Maven web project that's running on a local Glassfish web server.

Here's my PHP file:

```
<?php

$dsn = "mysql:host=localhost;dbname=oaaa";
$username = "username";
$password = "password";

$pdo = new PDO($dsn, $username, $password);
$rows = array();

if (isset($_GET['activity'])) {
    $stmt = $pdo->prepare("SELECT * FROM events WHERE type = ? ORDER BY date");
    $stmt->execute(array($_GET['activity']));
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
}

echo json_encode($rows);
?> 
```

Here's my JavaScript file:

```
$(document).ready(function() {
    $.getJSON('php/query-database.php', {activity: 'Abseiling'}, function(data) {

        $.each(data, function(index, array) {
            $('.events').append(array['title']);
        });

    });
}); 
```

**UPDATE:** The problem has been resolved, turns out it was simply the fact that my Maven web project couldn't run the PHP files, so the PHP files did not return any data. After creating a PHP project, everything is working fine.

# java - 用于格式化（或美化）html、xml、.java 文件的 Java API 或 Web 服务

> ID：13656971
> 
> 赞同：0
> 
> 时间：2012-12-01T06:15:59.000
> 
> 标签：java, solr, formatting, pretty-print

是否有任何 Java API（或 Web 服务）来美化/格式化/漂亮打印 html、xml 和 .java 源代码文件？

所以基本上，我在 Apache Solr 服务器中索引这些不同类型的文件，然后在用户搜索它时获取它。我为此使用 Solr Cell。（它就像一个 grepcode 应用程序。）

这里的问题是文件内容以纯文本形式出现，没有任何格式（因为 Solr 字段类型在架构中是“文本”）。

我正在寻找任何 API（Java 中）或 Web 服务，以便我可以将其连接到我的应用程序中并将文本（Java 中的字符串）转换为格式良好的输出以显示在网页上。

欣赏指点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:57:25.613

我得到了解决方案 html 和标签就可以了。
我想要的只是在显示内容（字符串）时保留空格。

谢谢。

# html - 在 Canvas 上的 X、Y 坐标处绘制像素的公式

> ID：13656977
> 
> 赞同：1
> 
> 时间：2012-12-01T06:17:06.753
> 
> 标签：html, canvas, 2d

所以我知道 HTML5 画布像素方法与正常情况略有不同。我正在从 Scala Swing 应用程序中移植一个光线追踪器，其中旧的绘制方法如下所示：

```
for {
  x <- pixels.s.indices
  y <- pixels.s(x).indices
} {
  g.setColor(pixels.s(x)(y))
  g.fillRect(x, y, x, y)
} 
```

`pixels.s`像这样的二维数组在哪里：

```
[[Color, Color, Color], 
 [Color, Color, Color], 
 [Color, Color, Color]] 
```

即它精确地映射到二维笛卡尔平面。

所以现在我稍微改变了策略，我有一个 FLATTENED 对象数组，其中`x`,`y`和`color`:

```
[{ x: 0, y: 0, color: { red: 33, green: 220, blue: 181 },
 { x: 0, y: 1, color: { red: 33, green: 220, blue: 231 },
 { x: 0, y: 2, color: { red: 33, green: 220, blue: 221 },
 ...
 { x: 319, y: 238, color: { red: 23, green: 10, blue: 31 },
 { x: 319, y: 239, color: { red: 13, green: 120, blue: 11 }] 
```

我正在尝试使用以下代码将扁平的颜色数组绘制到屏幕上：

```
var imageData = context.createImageData(width, height);
var numPixels = width*height;
for (var i = 0; i < numPixels; i++) {
  imageData.data[(i*4)]     = tracedScene[i].color.red;
  imageData.data[(i*4) + 1] = tracedScene[i].color.green;
  imageData.data[(i*4) + 2] = tracedScene[i].color.blue;
  imageData.data[(i*4) + 3] = 255; // alpha  color
};
context.putImageData(imageData, 0, 0); 
```

但结果有点不对劲。我已经检查了三倍的测试，实际数组是正确的屏幕数据。我只是渲染不正确。我目前得到这个：

![在此处输入图像描述](../Images/136e323c603b115d268692e8c66346e6.png)

而我应该看到：

![在此处输入图像描述](../Images/a6d5b46c55b486c19fc930cd951bb13c.png)

现在（几年前）我在 Swing 版本中也有完全相同的图形异常，这是因为我绘制图像的方式。我不记得我是如何修复它的。

我希望能够做的是有一些方法：

```
drawPixel(x, y, color, canvas) { ... } 
```

能够在 x, y 处用颜色绘制特定像素。或者......一种传统的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:27:01.950

您输入的“扁平化”数组的顺序错误：它应该按行排列，但您的是按列排列。

```
[{ x: 0, y: 0, color: { red: 33, green: 220, blue: 181 },
 { x: 1, y: 0, color: { red: 33, green: 220, blue: 231 },
 { x: 2, y: 0, color: { red: 33, green: 220, blue: 221 },
 ... 
```

（假设 y 是从上到下，x - 从左到右）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T06:28:51.903

图像数据从`(0, 0)`到`(1, 0)`，您的代码从`(0, 0)`到`(0, 1)`。换句话说，存在行/列主要顺序的冲突。

无论如何，根据您的性能需求，您可能会想太多。

> 我希望能够做的是有一些方法：
> 
> `drawPixel(x, y, color, canvas) { ... }`
> 
> 能够在 x, y 处用颜色绘制特定像素。

为什么不只填充单个像素？

```
ctx.fillStyle = 'rgba(red, green, blue, alpha)';
ctx.fillRect(x, y, 1, 1); 
```

**这将在填充大约 100 个像素时效率低下，并且您需要切换到图像数据。**

如果你想保持你的数据结构相同，你可以使用这样的东西，它应该可以工作：

```
var imageData = context.createImageData(width, height);
var numPixels = width*height;
var pixelCount = 0;
for (var i = 0; i < width; i++) {
    for (var j = 0; j < height; j++) {
        var wpixel = j * width * 4;
        wpixel += i * 4;
        console.log(wpixel);
        imageData.data[(wpixel)]     = tracedScene[pixelCount].red;
        imageData.data[(wpixel) + 1] = tracedScene[pixelCount].green;
        imageData.data[(wpixel) + 2] = tracedScene[pixelCount].blue;
        imageData.data[(wpixel) + 3] = 255; // alpha  color
        pixelCount++; // independent of i and j the way I wrote it
    }
}
context.putImageData(imageData, 0, 0); 
```

演示：http: [//jsfiddle.net/t9edv/](http://jsfiddle.net/t9edv/)

# python - 为什么在使用 multiprocessing.Pool 时出现异常？

> ID：13656979
> 
> 赞同：2
> 
> 时间：2012-12-01T06:18:29.107
> 
> 标签：python, multiprocessing

这是我的代码：

```
import multiprocessing

class Worker:
    def run(self, msg):
        print '%s, it works!' % msg

def start_process():
    print 'Starting',multiprocessing.current_process().name

if __name__=='__main__':
    pool = multiprocessing.Pool(processes=2, initializer=start_process,)
    pool.apply_async(Worker().run, args=('congbo',))
    pool.close()
    pool.join() 
```

但是我在控制台中遇到了一个异常：

```
Starting PoolWorker-1
Starting PoolWorker-2
Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/python2.7/multiprocessing/pool.py", line 319, in _handle_tasks
    put(task)
PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup __builtin__.instancemethod failed 
```

我刚刚将一个 class.func 传递给了 pool.apply_async()，但我遇到了异常。谁能告诉我如何将 class.func 传递给 pool.apply_async(), 3x ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:00:43.977

作为类的一部分的函数不称为函数，它们称为方法，并且您不能将对象实例的方法传递给 apply_async()，您需要使用函数。

这样做的原因`multiprocessing`是所有关于在多个进程中做事，当你传递一个实例方法时，你传递的是一个对象的一部分。并且该对象仅存在于其中一个进程中，因此其他进程无法访问它。

改变你的

```
class Worker:
    def run(self, msg):
        print '%s, it works!' % msg 
```

到

```
def run(msg):
    print '%s, it works!' % msg 
```

并使用它，它应该可以工作。

# iphone - UIView 根据边缘调整大小

> ID：13656981
> 
> 赞同：3
> 
> 时间：2012-12-01T06:19:01.150
> 
> 标签：iphone, objective-c, ipad, uiview, uitextfield

如何`UIView`根据边缘调整大小？

实际上我正在以`UITextField`编程方式创建，如果用户想要，他们可以`UITextField's`通过拖动边缘来增加和减少高度和宽度..

我不想按比例改变它的高度和宽度。如果用户想要高度，那么只有高度会改变，如果宽度那么只有宽度。

所以我找到了以`UIView`编程方式获取 One 然后放入其中的解决方案`UITextField`。

**所以我的问题是，**我们如何通过触摸 UIView 的边缘来改变 UIView 的高度和宽度？

我知道一切，`UIPanGestureRecognizer`但不想那样。

我已经浏览了[这个 stackoverw 链接。](https://stackoverflow.com/questions/8460119/how-to-resize-uiview-by-dragging-from-its-edges)也得到了[这个解决方案](http://www.cocoacontrols.com/controls/spuserresizableview)，但它对我没有用..

请建议我该怎么做？

**更新**

目前在[SPUserResizableView](http://www.cocoacontrols.com/controls/spuserresizableview)上工作，我认为这会很有用..

感谢我所有的朋友。。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T06:02:52.717

这很简单 。你听说过——

```
TouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;

TouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;

TouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;

TouchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; 
```

你只需要在你的 UIView 类中添加这个方法。然后通过某种计算，您可以做到这一点。说当你触摸触摸开始时，方法会被调用......在触摸移动中，你可以移动 uiview 的动画以增加或减少高度或宽度。因为上述所有函数都会为您提供 x 和 y 的坐标。

希望这可以帮助你。

# command-line - 如何创建仅移动子目录而不移动主目录的批处理文件

> ID：13656983
> 
> 赞同：5
> 
> 时间：2012-12-01T06:19:02.283
> 
> 标签：command-line, batch-file

如何移动主文件夹中的所有子文件夹，而不是主文件夹本身。

源路径为 c:\book\music\

我不想移动主文件夹本身，因为我收到 I/O 设备错误。

我可以使用什么代码来执行此操作？请把代码拼出来，因为我是一个使用命令行的婴儿 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:38:08.643

这是一个较长的脚本，但它应该工作得很好。它使用“dir”，但您也可以查看“forfiles”。forfiles 比较灵活，但是真的很难用。

```
@echo off
@rem USAGE: MoveDirs From To

setlocal

    set from="%~1"
    set to="%~2"

    if "%1"=="" goto :Usage
    if "%2"=="" goto :Usage

    for /f "delims=;" %%a in ('dir "%1" /ad /b ') do call :MoveIt "%1" "%2" "%%a"

    goto :EOF

:MoveIt
    move "%~1\%~3" "%~2" > nul || echo Failed to move %3 to %2 & goto :EOF
    echo Moved %3 to %2
    goto :EOF

:Usage
    echo Usage: moveDirs.bat  FromDirectory ToDirectory
    goto :EOF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T06:50:16.620

您可能还想阅读 XCOPY。您可以复制文件，只有那些不是空子目录的文件。

检查命令以了解更多信息。

```
xcopy /? 
```

# javascript - 如何使用 javascript 更改字符串的一部分中的文本？

> ID：13656989
> 
> 赞同：2
> 
> 时间：2012-12-01T06:19:48.733
> 
> 标签：javascript

我有一个包含以下内容的 javascript 字符串：

```
data-href="/Admin/Edit?pk=0001I&amp;rk=50050055" 
```

如何更改此字符串，以便将 rk 的值更改为字符串 newRowKey 中保存的值？不确定它是否有帮助，但数据格式总是看起来像这样，rk 后跟一个 =，然后以 "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:22:35.610

```
datahref="/Admin/Edit?pk=0001I&amp;rk=50050055"; 
```

如果您构建 URL，则更改它

```
datahref="/Admin/Edit?pk=0001I&amp;rk="+ newRowKey; 
```

或者如果您知道现有值，请替换它

```
datahref.replace("50050055", newRowKey); 
```

如果你不知道 rk 的值，但你知道它在 URL 中的最后一个，你可以使用 indexOf 来找到它。

```
datahref = datahref.substring(0,datahref.indexOf("rk=")+3) + newRowKey; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T06:31:21.117

```
data_href.replace(/rk=.*$/,'rk=' + newRowKey); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T06:32:57.963

也许你想要一个正则表达式来替换那个 rk。

```
newRowKey = 'XXXXXX'
s = 'Edit?pk=0001I&amp;rk=50050055';
s2 = s.replace(/(.*;)(rk=)(.*)(&|)/, '$1$2' + newRowKey)
alert( s + "\n" + s2 );

//2nd test
s = 'Edit?pk=0001I&amp;rk=50050055&';

s2 = s.replace(/(.*;)(rk=)(.*)(&|)/, '$1$2' + newRowKey)
alert( s + "\n" + s2 ); 
```

​演示：http: [//jsfiddle.net/fedmich/g3TjE/](http://jsfiddle.net/fedmich/g3TjE/)

# mysql - [MySQL] 如何选择有记录的用户

> ID：13656990
> 
> 赞同：1
> 
> 时间：2012-12-01T06:19:57.467
> 
> 标签：mysql

我有这些表：

**用户**：

```
|user_id|user_name|
|-------|---------|
|   1   |  John   |
|-------|---------|
|   2   |  Mark   |
|-------|---------|
|   3   |  Paul   |
|-------|---------| 
```

**记录**：

```
| record_id | user_id |    records   |
|-----------|---------|--------------|
|    1      |    3    | lorem ipsum  |
|-----------|---------|--------------|
|    2      |    3    | dolor sit    |
|-----------|---------|--------------|
|    3      |    3    | consectetur  |
|-----------|---------|--------------|
|    4      |    1    | adipisicing  |
|-----------|---------|--------------|
|    5      |    3    | eiusmod      |
|-----------|---------|--------------|
|    6      |    1    | consectetur  |
|-----------|---------|--------------| 
```

我想要的是选择有记录的用户。在这种情况下，只有***约翰***和***保罗***应该返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:22:58.820

使用子查询：

```
SELECT user_name FROM users WHERE user_id IN (SELECT DISTINCT user_id FROM records) 
```

或使用 INNER JOIN：

```
SELECT u.user_name FROM users u
INNER JOIN records r ON u.user_id=r.user_id
GROUP BY u.user_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:23:46.717

```
SELECT u.user_name, r.records FROM users as u, records as r where u.user_id = r.user_id 
```

# php - Codeigniter 从一个 db 表中获取数据并用它在另一个表中创建条目时遇到问题

> ID：13656999
> 
> 赞同：2
> 
> 时间：2012-12-01T06:21:50.383
> 
> 标签：php, sql, codeigniter, xampp

我正在尝试从 MySQL 5.4 表中获取信息，在另一个表中创建一个条目，然后删除之前的条目。我看不出我做错了什么。

我正在运行 Acer Aspire 5920，

Ubuntu 12.04，

Xampp 1.8.1,

代码点火器 2.1.3

MySQL 5.4

这是错误的屏幕截图：

![错误消息的屏幕截图](../Images/92f8df38c570f16e50580c9bb2c086c8.png)

这是原始条目的屏幕截图：

![在此处输入图像描述](../Images/83dca88963f7aae5557aca5d3bec6ee1.png)

这是创建条目的屏幕截图：

![创建的数据库条目的图片](../Images/49e5e4fb729d434da67118850b13fb04.png)

```
public function add_user($key){

    $this->db->where('key', $key);

    $temp_user = $this->db->get('temp_users');

    if($temp_user){

        $row = $temp_user->row();

        $data = array(
                'email' => $row-email,
                'password' => $row->password
            );

        $did_add = $this->db->insert('users', $data);

    }

    if($did_add){

        $this->db->where('key', $key);
        $this->db->delete('temp_users', $key);

    }else{
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:13:39.663

```
 $data = array(
                'email' => $row-email,
                'password' => $row->password
            ); 
```

应该

```
 $data = array(
                'email' => $row->email,
                'password' => $row->password
            ); 
```

“$ row-email”中缺少“>”