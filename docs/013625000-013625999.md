# StackOverflow 问答 13625000-13625999

# iphone - iOS - 我可以在运行时更改 localizable.strings 内容吗？

> ID：13625008
> 
> 赞同：6
> 
> 时间：2012-11-29T11:41:06.777
> 
> 标签：iphone, ios, xcode, localization, localizable.strings

每次启动应用程序时，我都会通过 JSON 文件加载翻译。我可以解析那个 JSON，清理它并将它放在 localizable.strings 文件中吗？

如果没有，我能否从 Documents 目录中创建的可本地化文件加载本地化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:31:40.537

没有第一个，因为部署后您无法编辑应用资源

但是，您可以告诉 NSBundle 使用不同的 localizeFile.. 或者下载 json 并将其放入 NSBundle

将可本地化的内容放入：

```
<APP/DOCUMENTS>/<APPNAME>.bundle/<LANGUAGE_CODE>.lproj/Localizable.strings 
```

初始化一个新的可可包

```
NSBundle *b = [NSBundle bundleWithPath:@"<APP/DOCUMENTS>/<APPNAME>.bundle/"]; 
```

然后在捆绑包上使用它：

```
 - (NSString *)localizedStringForKey:(NSString *)key value:(NSString *)value table:(NSString *)tableName 
```

例如

```
[b localizedStringForKey:@"HIHO" value:nil table:nil]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T11:44:25.157

您无法编辑应用程序包中的任何内容，因此请不要回答您的第一个问题。（请注意，您可能可以在模拟器中执行此操作，但它肯定无法在设备上运行。）

不确定第二个问题。

# java - 我们如何在java中配置基于注解的spring aspect

> ID：13625012
> 
> 赞同：-2
> 
> 时间：2012-11-29T11:41:09.723
> 
> 标签：java, spring, aspect

我们如何在java中配置基于注解的spring aspect？

假设我们要拦截一个spring服务，我们通常通过AOP切入点表达式来实现。这个例子详细说明了如何使用注释而不是表达式来做到这一点。当我们使用注释时，这更便携。

有很多例子，但很少有正确的内容。因此把它放在这里...

这是一个已解决的问题。我正在发布我的答案，以便对包括我自己在内的其他人有所帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:41:09.723

Spring 中基于注解的 AOP 建议

1.定义注解

```
 public @interface ApplyAuthorisationAdvice {
 } 
```

`<aop:aspectj-autoproxy />` 如果之前没有完成，请在 spring 配置文件中设置

2.

```
import org.aopalliance.aop.Advice;
import org.aspectj.lang.annotation.Aspect;

@Aspect
@Component
public class AuthorisationAspect implements Advice {

    private final static Logger logger = Logger.getLogger(AuthorisationAspect.class);

    @Autowired
    MyService myService;

    @SuppressWarnings("unchecked")
    @AfterReturning(pointcut = "@annotation(com.example.ApplyAuthorisationAdvice)", returning = "result")
    public void afterReturning(JoinPoint joinPoint, Object result) {

        if (result != null && (result instanceof List)) {
            // filter stuff
        }

    }
} 
```

3.对需要拦截的服务应用注解

```
@Component("myService")
public class MyServiceImpl implements MyService {
  @ApplyAuthorisationAdvice 
   public List<MySummary> search(MyContext searchContext) {
   }
} 
```

# java - 贝宝实现...c++

> ID：13625013
> 
> 赞同：-4
> 
> 时间：2012-11-29T11:41:11.590
> 
> 标签：java, php, c++, paypal

必须对贝宝网站进行编程。这是一个允许通过贝宝在用户之间进行货币兑换的网站。

1 - 我该怎么做？2 - 我与一位非常熟练的程序员交谈，他告诉我，为了让这个东西在你自己的应用程序中工作，你需要在 C++ 中实现它。可惜我不能和他多说话。编辑：同一位程序员告诉我它也可以用 Java 编写。

我会欣赏所有的意见。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:56:59.540

PayPal 有无数的 SDK 和解决方案供您将其集成到您的网站中，并且不依赖于一种语言。如果你觉得特别受虐，你可以用 PHP、Python 甚至 Java 或 C++ 编写一个支持 PayPal 的网站。

这只是 HTTP 调用——将命令从您的 Web 服务器传递到 PayPal，并且知道如何解释回调以将您的数据库记录更新为已付款、已取消等。

# java - Sonar 在同一个项目中是否支持多种语言？

> ID：13625022
> 
> 赞同：41
> 
> 时间：2012-11-29T11:41:39.867
> 
> 标签：java, groovy, sonarqube, sonar-runner

我正在为我的一个项目进行设置，`Sonar`该项目是`Groovy`和`Java`. 我可以为这两种语言中的任何一种单独配置项目，但不能一起配置。有没有办法做到这一点？我试过这个

> sonar.language = java,grvy

但没用

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-29T12:34:43.830

**2014 年 4 月 14 日更新：**

从 SonarQube 4.2 开始，支持多语言项目。

`sonar.language`这在未设置时会自动发生。

在此处查看我的示例项目：[https ://github.com/bellingard/multi-language-project](https://github.com/bellingard/multi-language-project)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:10:23.050

如果您使用的是 Sonar 3.4 版。然后我写了一个新的maven插件来帮助你进行多语言代码分析。

它仍然是测试版

[https://code.google.com/p/sonar-multilang-maven-plugin/wiki/UserGuide](https://code.google.com/p/sonar-multilang-maven-plugin/wiki/UserGuide)

如果您对此工具有任何问题，请在该项目网站上告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:01:28.440

在 实现[https://jira.sonarsource.com/browse/SONAR-926](https://jira.sonarsource.com/browse/SONAR-926)之前，您可以使用 sonar.branch 和 sonar.language 属性的组合来分别分析项目语言并在仪表板中拥有两个不同的项目。

# joomla - Joomla 组件 - 向管理员（后端）添加新字段以过滤前端的查询

> ID：13625023
> 
> 赞同：2
> 
> 时间：2012-11-29T11:41:40.333
> 
> 标签：joomla, model, custom-fields

希望有人可以帮助我 - 我一直在使用[Hello World Guide](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_06#site.2Fviews.2Fhelloworld.2Ftmpl.2Fdefault.xml)来帮助我向管理模型添加一个下拉字段，该字段将过滤前端模型中的查询。

我的新下拉字段都在管理端工作，并从数据库中提取记录以供选择，但现在我被困在最后一点 - “显示所选消息”。在本教程中，他们扩展了“JModelItem”并返回 JTable，但我需要创建一个从在管理模型上创建的新下拉字段中选择的值过滤的查询。

换句话说 - 站点模型如何从我在管理模型中创建的下拉列表中获取选定的值？

我非常接近完成这项工作，并且真正掌握了我对 MVC 的理解——如果有人能指出我正确的方向，我将永远感激不尽！

祝一切顺利

MB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:12:12.700

如果我是对的，您想将管理组件模型访问到站点模型，那么您可以尝试以下示例：

**例子 ：**

```
JModelLegacy::addIncludePath(JPATH_ROOT.'/components/com_banners/models', 'BannersModel');
$model = JModelLegacy::getInstance('Banners', 'BannersModel', array('ignore_request'=>true));
$banners = $model->getItems(); 
```

# java - 如何在 Scala 或 Java 中读取具有混合编码的文本文件？

> ID：13625024
> 
> 赞同：55
> 
> 时间：2012-11-29T11:41:41.177
> 
> 标签：java, scala, utf-8, character-encoding, weka

我正在尝试解析 CSV 文件，最好使用 weka.core.converters.CSVLoader。但是，我拥有的文件不是有效的 UTF-8 文件。它主要是一个 UTF-8 文件，但某些字段值采用不同的编码，因此没有整个文件有效的编码，但无论如何我都需要解析它。除了使用像 Weka 这样的 java 库之外，我主要在 Scala 中工作。我什至无法读取使用 scala.io.Source 的文件：例如

```
Source.
  fromFile(filename)("UTF-8").
  foreach(print); 
```

抛出：

```
 java.nio.charset.MalformedInputException: Input length = 1
at java.nio.charset.CoderResult.throwException(CoderResult.java:277)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:337)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:176)
at java.io.InputStreamReader.read(InputStreamReader.java:184)
at java.io.BufferedReader.fill(BufferedReader.java:153)
at java.io.BufferedReader.read(BufferedReader.java:174)
at scala.io.BufferedSource$$anonfun$iter$1$$anonfun$apply$mcI$sp$1.apply$mcI$sp(BufferedSource.scala:38)
at scala.io.Codec.wrap(Codec.scala:64)
at scala.io.BufferedSource$$anonfun$iter$1.apply(BufferedSource.scala:38)
at scala.io.BufferedSource$$anonfun$iter$1.apply(BufferedSource.scala:38)
at scala.collection.Iterator$$anon$14.next(Iterator.scala:150)
at scala.collection.Iterator$$anon$25.hasNext(Iterator.scala:562)
at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:400)
at scala.io.Source.hasNext(Source.scala:238)
at scala.collection.Iterator$class.foreach(Iterator.scala:772)
at scala.io.Source.foreach(Source.scala:181) 
```

我很高兴将所有无效字符扔掉或用一些虚拟字符替换它们。我将有很多这样的文本以各种方式处理，并且可能需要将数据传递给各种第三方库。一个理想的解决方案是某种全局设置，它会导致所有低级 java 库忽略文本中的无效字节，以便我可以在不修改的情况下调用此数据的第三方库。

解决方案：

```
import java.nio.charset.CodingErrorAction
import scala.io.Codec

implicit val codec = Codec("UTF-8")
codec.onMalformedInput(CodingErrorAction.REPLACE)
codec.onUnmappableCharacter(CodingErrorAction.REPLACE)

val src = Source.
  fromFile(filename).
  foreach(print) 
```

感谢 +Esailija 为我指明了正确的方向。这导致我[如何检测非法 UTF-8 字节序列以在 java 输入流中替换它们？](https://stackoverflow.com/questions/3801890/how-to-detect-illegal-utf-8-byte-sequences-to-replace-them-in-java-inputstream) 它提供了核心的 java 解决方案。在 Scala 中，我可以通过使编解码器隐式来使其成为默认行为。我想我可以通过将隐式编解码器定义放在包对象中来使其成为整个包的默认行为。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-29T13:04:42.300

这就是我设法用java做到这一点的方法：

```
 FileInputStream input;
    String result = null;
    try {
        input = new FileInputStream(new File("invalid.txt"));
        CharsetDecoder decoder = Charset.forName("UTF-8").newDecoder();
        decoder.onMalformedInput(CodingErrorAction.IGNORE);
        InputStreamReader reader = new InputStreamReader(input, decoder);
        BufferedReader bufferedReader = new BufferedReader( reader );
        StringBuilder sb = new StringBuilder();
        String line = bufferedReader.readLine();
        while( line != null ) {
            sb.append( line );
            line = bufferedReader.readLine();
        }
        bufferedReader.close();
        result = sb.toString();

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch( IOException e ) {
        e.printStackTrace();
    }

    System.out.println(result); 
```

无效文件是用字节创建的：

```
0x68, 0x80, 0x65, 0x6C, 0x6C, 0xC3, 0xB6, 0xFE, 0x20, 0x77, 0xC3, 0xB6, 0x9C, 0x72, 0x6C, 0x64, 0x94 
```

它`hellö wörld`采用 UTF-8 格式，混入了 4 个无效字节。

随着`.REPLACE`您看到正在使用的标准 unicode 替换字符：

```
//"h�ellö� wö�rld�" 
```

使用`.IGNORE`，您会看到忽略的无效字节：

```
//"hellö wörld" 
```

不指定`.onMalformedInput`，你会得到

```
java.nio.charset.MalformedInputException: Input length = 1
    at java.nio.charset.CoderResult.throwException(Unknown Source)
    at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
    at sun.nio.cs.StreamDecoder.read(Unknown Source)
    at java.io.InputStreamReader.read(Unknown Source)
    at java.io.BufferedReader.fill(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-08-31T14:40:40.460

Scala 的 Codec 有一个解码器字段，它返回一个`java.nio.charset.CharsetDecoder`：

```
val decoder = Codec.UTF8.decoder.onMalformedInput(CodingErrorAction.IGNORE)
Source.fromFile(filename)(decoder).getLines().toList 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-09-22T15:03:39.020

scala 源的解决方案（基于@Esailija 的回答）：

```
def toSource(inputStream:InputStream): scala.io.BufferedSource = {
    import java.nio.charset.Charset
    import java.nio.charset.CodingErrorAction
    val decoder = Charset.forName("UTF-8").newDecoder()
    decoder.onMalformedInput(CodingErrorAction.IGNORE)
    scala.io.Source.fromInputStream(inputStream)(decoder)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T11:46:41.950

忽略无效字节的问题是决定它们何时再次有效。请注意，UTF-8 允许对字符进行可变长度字节编码，因此如果一个字节无效，您需要了解从哪个字节开始读取才能再次获得有效的字符流。

简而言之，我认为您不会找到一个在阅读时可以“纠正”的库。我认为一个更有成效的方法是首先尝试清理这些数据。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-31T13:21:16.563

如果一个失败，我将切换到不同的编解码器。

为了实现该模式，我从[另一个 stackoverflow question](https://stackoverflow.com/questions/7930814/whats-the-scala-way-to-implement-a-retry-able-call-like-this-one)中获得了灵感。

我使用默认的编解码器列表，并递归地遍历它们。如果它们都失败了，我会打印出可怕的部分：

```
private val defaultCodecs = List(
  io.Codec("UTF-8"),
  io.Codec("ISO-8859-1")
)

def listLines(file: java.io.File, codecs:Iterable[io.Codec] = defaultCodecs): Iterable[String] = {
  val codec = codecs.head
  val fileHandle = scala.io.Source.fromFile(file)(codec)
  try {
    val txtArray = fileHandle.getLines().toList
    txtArray
  } catch {
    case ex: Exception => {
      if (codecs.tail.isEmpty) {
        println("Exception:  " + ex)
        println("Skipping file:  " + file.getPath)
        List()
      } else {
        listLines(file, codecs.tail)
      }
    }
  } finally {
    fileHandle.close()
  }
} 
```

我只是在学习 Scala，所以代码可能不是最优的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T11:51:11.133

一个简单的解决方案是将您的数据流解释为 ASCII，忽略所有非文本字符。但是，您甚至会丢失有效的编码 UTF8 字符。不知道你是否可以接受。

编辑：如果您事先知道哪些列是有效的 UTF-8，您可以编写自己的 CSV 解析器，该解析器可以配置在哪些列上使用哪种策略。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T12:10:17.493

`ISO-8859-1`作为编码器使用；这只会给你打包成字符串的字节值。这足以解析大多数编码的 CSV。（如果您混合了 8 位和 16 位块，那么您就有麻烦了；您仍然可以读取 ISO-8859-1 中的行，但您可能无法将行解析为块。）

将各个字段作为单独的字符串后，您可以尝试

```
new String(oldstring.getBytes("ISO-8859-1"), "UTF-8") 
```

生成具有正确编码的字符串（如果您知道，请为每个字段使用适当的编码名称）。

`java.nio.charset.Charset.CharsetDecoder`编辑：如果你想检测错误，你将不得不使用。当出现错误时，以这种方式映射到 UTF-8 只会在字符串中为您提供 0xFFFF 。

```
val decoder = java.nio.charset.Charset.forName("UTF-8").newDecoder

// By default will throw a MalformedInputException if encoding fails
decoder.decode( java.nio.ByteBuffer.wrap(oldstring.getBytes("ISO-8859-1")) ).toString 
```

# jquery - 多个文件上传jquery：出现错误

> ID：13625038
> 
> 赞同：0
> 
> 时间：2012-11-29T11:42:34.460
> 
> 标签：jquery, file, uploader

我正在使用 jquery 插件“http://blueimp.github.com/jQuery-File-Upload/”进行多个文件上传。

当我上传 2 或 3 个文件时，它工作正常，但当我上传超过 3 个文件时，有时它可以工作，但有时它会出错。

错误也每次我都变得不同。

1.  任务代币 >
2.  空文件结果
3.  SyntaxError: JSON.parse: 意外字符

# android - 在我的应用程序后台显示一个简单的通知

> ID：13625039
> 
> 赞同：2
> 
> 时间：2012-11-29T11:42:34.787
> 
> 标签：android

任何人都可以帮助我如何发出通知，通知用户他后台应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:48:32.617

您需要覆盖`onPause()`活动的方法。并且必须触发`notification`.

对于通知，请参阅[此](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)。您还可以从[此处](http://developer.android.com/training/basics/activity-lifecycle/index.html)查看 Activity 生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:01:39.893

`onPause()`and方法在`onResume()`被带到后台并再次进入前台时被调用，但是当应用程序第一次启动并且在它被杀死之前也会被调用。你可以在这里阅读更多：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

这是通知示例作为您的问题。

```
private static final int MY_NOTIFICATION_ID = 1;
    private NotificationManager notificationManager;
    private Notification myNotification;

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();

        notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        myNotification = new Notification(R.drawable.ic_action_search,
                "Notification!", System.currentTimeMillis());
        Context context = getApplicationContext();
        String notificationTitle = "Exercise of Notification!";
        String notificationText = "http://android-er.blogspot.com/";
        Intent myIntent = new Intent(Intent.ACTION_VIEW,
                Uri.parse("www.google.com"));
        PendingIntent pendingIntent = PendingIntent.getActivity(
                MainActivity.this, 0, myIntent, Intent.FLAG_ACTIVITY_NEW_TASK);
        myNotification.defaults |= Notification.DEFAULT_SOUND;
        myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
        myNotification.setLatestEventInfo(context, notificationTitle,
                notificationText, pendingIntent);
        notificationManager.notify(MY_NOTIFICATION_ID, myNotification);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:05:07.047

我建议在 onStop() 和 onStart() 中执行此操作，而不是在 onPause() 和 onResume() 中执行此操作。否则，每当您在活动中添加某些内容但您的活动仍然可见时（例如，因为您收到短信而弹出一个弹出窗口......），您的通知就会被调用，这会出现在您的活动前面. 在这种情况下将调用 onPause()，而不是 onStop()。

# azure - 设置 SQL Azure 规则“WINDOWS AZURE SERVICES”=YES 是否意味着 azure 上的任何人都可以连接到我的服务器？

> ID：13625044
> 
> 赞同：9
> 
> 时间：2012-11-29T11:42:59.340
> 
> 标签：azure, azure-sql-database

在管理服务器时，在 SQL Azure 管理控制台中，您可以选择设置“允许的 IP 地址”和“允许的服务”。在“允许的服务”中，您可以允许 WINDOWS AZURE SERVICES 但这究竟是什么意思？具体来说，这是否意味着在 Azure 上运行 VM 的其他任何人都可以连接到我的服务器（假设他们知道用户名和密码）？或者是否有其他限制，例如只有在同一订阅中运行的 Azure 服务才能连接，或者只有链接资源？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T11:48:31.337

“WINDOWS AZURE SERVICES”的意思正是您所怀疑的——在 Windows Azure 中运行任何类型的服务（Azure 网站、Azure 云服务/web/worker 角色、Azure 虚拟机）的任何人都可以访问您的 SQL 数据库。但为了真正连接到您的数据库，必须了解以下**所有**内容：

*   您的 Windows Azure SQL Server 的名称（对您来说是唯一的）（例如：**xxx99yyy** .database.windows.net）
*   （要连接的数据库的名称）
*   登录数据库
*   数据库密码

链接资源仅用于直观地帮助您围绕单个应用程序和[其他一些轻量级的东西](https://stackoverflow.com/questions/11732982/what-is-linked-resources-for-on-the-new-portal-of-windows-azure)组织所有资源。

# android - 带有标签和 Viewpager 的 Android 片段

> ID：13625048
> 
> 赞同：9
> 
> 时间：2012-11-29T11:43:11.113
> 
> 标签：android, android-fragments, android-viewpager, android-tabs

![在此处输入图像描述](../Images/57c9fa17c4281f04d86d5438ea9e9eba.png)

我们正在构建一个包含片段嵌套的应用程序，如上所示。

1.  特色标签 - 详细信息标签和地图标签
2.  详细信息选项卡将有一个幻灯片 - 如查看页面滑块和可滚动的信息下方。
3.  地图选项卡将显示地图。

![在此处输入图像描述](../Images/3c746e38b573520803187b5c7d8f1c82.png)

如上所示，我已经实现了选项卡和地图以及滑块。现在我很困惑如何在滑块下方添加内容，这将使详细信息选项卡可滚动。

**我试过什么？**

单击详细信息选项卡时，片段将尝试在其中膨胀两个片段布局。

**AndroidTabLayoutActivity.java**

```
package com.mink7.abs;

import com.viewpagerindicator.CirclePageIndicator;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;
import java.util.Random;
import android.support.v4.app.FragmentTabHost;
import com.viewpagerindicator.PageIndicator;

import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class AndroidTabLayoutActivity extends TabActivity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);

                // FragmentTabHost tabHost;

                setContentView(R.layout.main);
                // tabHost = (FragmentTabHost) findViewById(R.id.tabMode);

                TabHost tabHost = getTabHost();

                /*
                 * mAdapter = new TestFragmentAdapter(getSupportFragmentManager());
                 *
                 * mPager = (ViewPager) findViewById(R.id.pager);
                 * mPager.setAdapter(mAdapter);
                 *
                 * mIndicator = (CirclePageIndicator) findViewById(R.id.indicator);
                 * mIndicator.setViewPager(mPager);
                 */

                // Tab for Photos
                TabSpec photospec = tabHost.newTabSpec("Details");
                photospec.setIndicator("Details",
                                getResources().getDrawable(R.drawable.icon_photos_tab));
                Intent photosIntent = new Intent(this, DetailsActivity.class);
                photospec.setContent(photosIntent);

                // Tab for Songs
                TabSpec songspec = tabHost.newTabSpec("Maps");
                // setting Title and Icon for the Tab
                songspec.setIndicator("Maps",
                                getResources().getDrawable(R.drawable.icon_songs_tab));
                Intent songsIntent = new Intent(this, MapsActivity.class);
                songspec.setContent(songsIntent);

                // Tab for Videos
                /*
                 * TabSpec videospec = tabHost.newTabSpec("Videos");
                 * videospec.setIndicator("Videos",
                 * getResources().getDrawable(R.drawable.icon_videos_tab)); Intent
                 * videosIntent = new Intent(this, VideosActivity.class);
                 * videospec.setContent(videosIntent);
                 */

                // Adding all TabSpec to TabHost
                tabHost.addTab(photospec); // Adding photos tab
                tabHost.addTab(songspec); // Adding songs tab
                // tabHost.addTab(videospec); // Adding videos tab
        }

} 
```

**详细信息Activity.java**

```
package com.mink7.abs;

import android.os.Bundle;
import android.support.v4.view.ViewPager;
import com.viewpagerindicator.CirclePageIndicator;

public class DetailsActivity extends BaseSampleActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.place_details_layout);

        mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);

    }
} 
```

**BaseSampleActivity.java**

```
package com.mink7.abs;

import java.util.Random;

import com.viewpagerindicator.PageIndicator;

import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public abstract class BaseSampleActivity extends FragmentActivity {
    private static final Random RANDOM = new Random();

    TestFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;
    //FragmentTabHost mTabHost;

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.random:
                final int page = RANDOM.nextInt(mAdapter.getCount());
                Toast.makeText(this, "Changing to page " + page, Toast.LENGTH_SHORT);
                mPager.setCurrentItem(page);
                return true;

            case R.id.add_page:
                if (mAdapter.getCount() < 10) {
                    mAdapter.setCount(mAdapter.getCount() + 1);
                    mIndicator.notifyDataSetChanged();
                }
                return true;

            case R.id.remove_page:
                if (mAdapter.getCount() > 1) {
                    mAdapter.setCount(mAdapter.getCount() - 1);
                    mIndicator.notifyDataSetChanged();
                }
                return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:55:52.637

请注意，从 Android 4.2 或最新的兼容性库开始支持 Fragments 嵌套。以前它根本不受支持。至于下面的内容 - 只需将它们全部放在一个容器中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-07T20:09:51.323

我在任何地方都使用 holoevery 来做到这一点，但是应该与 ABS 或“本机”类似

```
public class FragmentTestTabs extends Fragment implements  ActionBar.TabListener, OnPageChangeListener {
    private ViewPager mViewPager;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         getSupportActivity().getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
         getSupportActivity().getSupportActionBar().addTab( getSupportActivity().getSupportActionBar().newTab().setText(getString(R.string.firtsRow))
                        .setTabListener(this));
         getSupportActivity().getSupportActionBar().addTab( getSupportActivity().getSupportActionBar().newTab().setText(getString(R.string.secondRow))
         .setTabListener(this));
    }
    @Override
    public void onDestroyView() {
        super.onDestroyView();
        getSupportActivity().getSupportActionBar().removeAllTabs();
        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
    }
    @Override
    public void onPause() {
        super.onPause();
    }
    @Override
    public void onResume() {
        super.onResume();
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_view_pager);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        mViewPager = (ViewPager) view.findViewById(R.id.pager);
        MyAdapter adapter = new MyAdapter(getChildFragmentManager());
        adapter.addFragment(new FragmentDiets());
        adapter.addFragment(new FragmentCurrentDiet());
        mViewPager.setOnPageChangeListener(this);
        mViewPager.setAdapter(adapter);
        mViewPager.setCurrentItem(0);
    }

    public class MyAdapter extends FragmentPagerAdapter {
        private final ArrayList<Fragment> mFragments = new ArrayList<Fragment>();

        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return mFragments.size();

        }

        public void addFragment(Fragment fragment) {
            mFragments.add(fragment);
            notifyDataSetChanged();
        }

        @Override
        public Fragment getItem(int position) {
            return mFragments.get(position);
        }

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if(mViewPager!=null)
        mViewPager.setCurrentItem(tab.getPosition());

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onPageSelected(int position) {
         getSupportActivity().getSupportActionBar().setSelectedNavigationItem(position);

    } 
```

而 fragment_view_pager 它只是一个 viewpager 视图：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.view.ViewPager
        android:id="@+id/pager" xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     >
</android.support.v4.view.ViewPager> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T00:17:55.630

*我已经使用嵌套片段（4.2）成功实现了一个类似的项目。

对于嵌套片段，请使用 getChildFragmentManager()，而不是使用 getSupportFragmentManager()。

例如在 tabFragment 中使用 viewpagerFragment，示例代码是：

```
public class TabFragment extends Fragment 
{
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
                                      Bundle savedInstanceState)
{
  ..
  ..
  ..
  mTabHost.setup(this.getActivity().getApplicationContext(),          
                                     getSupportFragmentManager(),R.layout.*);
  mTabHost.setOnTabChangedListener(tabChangeListener);
  mTabHost.addTab(mTabHost.newTabSpec("label").setIndicator("tag"),
                    ViewPagerFragment.class, arg);
}

public class ViewPagerFragment extends Fragment
{

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle         
                         savedInstanceState) 
{
    return inflater.inflate(.......);
}
@Override
public void onViewCreated(View view, Bundle savedInstanceState)
{

    mViewPager = (ViewPager) view.findViewById(R.id.viewPager);
    mViewPager.setAdapter(new MyAdapter(getChildFragmentManager()));

}
public class MyAdapter extends FragmentPagerAdapter
{
    public MyAdapter(FragmentManager fm)
    {
        super(fm);
    }
    @Override
    public int getCount() 
    {
        return size;

    }

    @Override
    public Fragment getItem(int position) 
    {

    }

    @Override
    public CharSequence getPageTitle(int position) 
    {

    }

}* 
```

# android - 在我的应用中即时上传和 Google+ 图片

> ID：13625049
> 
> 赞同：6
> 
> 时间：2012-11-29T11:43:21.400
> 
> 标签：android, google-plus, android-gallery

我目前遇到以下问题：当我想从图库中检索图像时，我使用以下代码来启动图库的意图。

```
public void useGallery() {
    this.intentbasedleave=true;
    Intent intent = new Intent(Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    intent.setType("image/*");
    startActivityForResult(
            Intent.createChooser(intent, getString(R.string.pleaseselect_image)), IMAGE_PICK);
} 
```

当我从图库中获取数据时，我使用此方法：

```
private void imageFromGallery(int resultCode, Intent data) {
    Uri selectedImage = data.getData();
    String[] filePathColumn = { MediaStore.Images.Media.DATA };

    Cursor cursor = getContentResolver().query(selectedImage,
            filePathColumn, null, null, null);
    cursor.moveToFirst();

    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    String filePath = cursor.getString(columnIndex);
    cursor.close();

    this.updateImageView(BitmapFactory.decodeFile(filePath));
} 
```

这有效，除非选择的图片来自 Google+ 或即时上传。那么 BitmapFactory.decodeFile(filePath)) 似乎为空？因为该方法引发了一个空指针异常。

因此，我的问题是：我如何使用来自 Google+ 的图片和来自画廊的即时上传图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T16:03:55.003

使用`BitmapFactory.decodeUri`而不是`BitmapFactory.decodeFile`.

您可以将方法简化`imageFromGallery`为

```
private void imageFromGallery(int resultCode, Intent data) {
  Uri selectedImage = data.getData();
  updateImageView(BitmapFactory.decodeUri(getContext().getContentResolver(), selectedImage));
} 
```

（假设您可以从某个地方访问上下文）。

# java - 对地图中的对象进行分组

> ID：13625050
> 
> 赞同：0
> 
> 时间：2012-11-29T11:43:22.617
> 
> 标签：java

这可能是微不足道的，但我需要确保我以正确的方式去做。

我有一个具有 property 的 person 对象`country_id`。我需要根据`country_id`然后最后将人分组到 1 个 Map 对象中。地图应该有作为的键`country_id`和它的值作为属于那个的人员对象的列表`country_id.`

所以流程应该是：

*   遍历人员对象
*   查找`country_id`并放入列表中。例如`person A(id=10)`在 list_A
*   同样`person B(id-20)`在 list_B
*   然后把它们放到HashMap中？

我的最终操作应该是`PersonMap(country_id-<PersonList>,country_id-<PersonList> )`

这种方法是正确的还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:18:53.840

[Guava](https://code.google.com/p/guava-libraries/)有一个很好的[索引](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimaps.html#index%28java.lang.Iterable,%20com.google.common.base.Function%29)方法，它返回一个由表达式索引的*Multimap 。*

```
ListMultimap<Integer, Person> multimap = Multimaps.index(personList, new Function<Person, Integer>(){
  public Integer apply(Person source){
    return source.getCountryId();
  }
}); 
```

如果您需要，Multimap 本身可以被视为一个地图：

```
Map<Integer, Collection<Person>> map = multimap.asMap(); 
```

通过[LambdaJ 的分组功能](http://code.google.com/p/lambdaj/wiki/LambdajFeatures#Grouping_items)可以获得更好、更流畅的 API ：

```
Group<Person> group = group(personList, by(on(Person.class).getCountryId())); 
```

但是，LambdaJ 的 Group 对象没有任何将其转换为地图的方法，因此您必须手动执行此操作。但也许您可以更改界面，以便您可以返回一个组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:47:08.393

您可以在`Map`循环时将人员放入其中。只需在地图中查找您需要的列表，如果找不到，请创建它并将其放入地图中。

假设`country_id`是一个`int`而不是使用`PersonMap`，因为我不知道它是如何工作的：

```
Map<Integer,List<Person>> map = new HashHap<Integer,List<Person>>();

for (Person person : collectionOfPeople) {
    int cid = person.getCountryId();

    List<People> list = map.get(cid);

    if (list == null) {
        list = new ArrayList<People>();
        map.put(cid,list);
    }

    list.add(person);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T12:01:14.200

或者你可以使用 Google Guava 项目

**使用 Google guava Multimap 和 Function 实现 GroupBy**

这是使用 google guava Multimap 和 Function 通过类似功能为集合创建组的一种方法。

代码很简单，我们只需使用 的 `index`方法来对`Multimap`我们的数据进行分组，在这里我们使用我们的 2 列按部门对它进行分组。

# 样本输出

```
关键=开发
  1：格雷格
  3：罗马
关键 = 支持
  2：狮子座
  4：乔比

```

```
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

import com.google.common.base.Function;
import com.google.common.collect.Lists;
import com.google.common.collect.Multimap;
import com.google.common.collect.Multimaps;

public class GroupByMultimap {
    public static void main(String[] args) {
        Object[] o1 = new Object[] { 1, "Greg", "Dev" };
        Object[] o2 = new Object[] { 2, "Leo", "Support" };
        Object[] o3 = new Object[] { 3, "Roman", "Dev" };
        Object[] o4 = new Object[] { 4, "Jobby", "Support" };

        List<Object[]> rows = Lists.newArrayList(o1, o2, o3, o4);
        Multimap<String, Object[]> grouped = Multimaps.index(rows,
                new Function<Object[], String>() {
                    @Override
                    public String apply(Object[] item) {
                        return (String) item[2];
                    }
                });

        Iterator<String> keyIterator = grouped.asMap().keySet().iterator();
        while (keyIterator.hasNext()) {
            String key = keyIterator.next();
            System.out.println("key = " + key);
            Collection<Object[]> dataRows = grouped.get(key);
            for (Object[] o : dataRows) {
                System.out.println(String.format("  %d : %s", o[0], o[1]));
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:47:36.427

您可以在使用国家 ID 作为比较值的人员对象上实现[可](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)比较，然后您的人员对象可以按国家/地区排序。

# extjs - 如何使用关联模型作为 DataView 的数据源

> ID：13625053
> 
> 赞同：0
> 
> 时间：2012-11-29T11:43:30.407
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我有一个如下所示的模型结构，我想知道如何使用 Bookings 数组作为我的 DataView 的数据源。

模型结构：

```
Client
  ClientId
  Name
  Bookings (HasManyAssociation)
  Contacts (HasManyAssociation)
  AjaxProxy
    JsonReader (ImplicitIncludes is set to true so child models are created with one call)

Booking
  BookingNodeId
  BookingDetails

Contact
  ContactNodeId
  ContactDetails 
```

上面给了我一个数据结构如下：

```
Client
  Bookings[
    Booking
    Booking
  ]
  Contacts[
    Contact
    Contact
  ] 
```

我想要做的是，从我的 Bookings 数组创建一个商店，然后将该商店用作我的 DataView 的数据源，或者直接使用 Bookings 数组作为数据源（我真的不在乎我是如何做到的说实话）。

如果我在我的 Booking 模型上设置 AjaxProxy，它可以正常工作，但显然我无法在加载我的 JSON 时自动创建我的客户端和联系人。

在我看来，客户端模型是分层的顶级模型，是加载数据的模型。

**编辑：**

我想出来如下（特别感谢下面的handet87的dataview.setStore（）指针）。

在这种情况下，关键是要知道创建关系实际上设置了另一个名为的存储，在本例中为 BookingsStore 和 ContactsStore。我需要做的就是 dataview.setStore("BookingsStore")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:22:08.143

使用 Ajax 请求从服务器获取数据，然后您可以将解析的 json 数据用作数组。定义一个商店并将该数据添加到该商店。最后，将该商店分配给您的数据视图。

```
Ext.Ajax.request({
url: '/Default.aspx',
params: {
    'params': itemId
},
failure: function (response) {
    Ext.Msg.alert('error', 'error');
},
success: function (response, opts) {
    var jsonData = JSON.parse(response.responseText);
    //now you can access jsonData.Bookings

    var store = Ext.create('Ext.data.Store', {
        model: 'MyApp.model.Client'         
    });

    store.setData(jsonData.Bookings);

    dataview.setStore(store);
}}); 
```

主要的方法就是这样。希望这可以帮助。

# iphone - 应用程序应添加 rootViewController

> ID：13625058
> 
> 赞同：1
> 
> 时间：2012-11-29T11:44:00.713
> 
> 标签：iphone, objective-c, ios, uiapplicationdelegate

当应用程序被激活时，我正在创建一个文件。基于该文件的存在，加载不同的视图。

我正在尝试的是

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    // Override point for customization after application launch.

    // Add the view controller's view to the window and display.
    if(condition true)
    {
        //[window addSubview:viewController.view];
        [self.window setRootViewController:viewController];
        [window makeKeyAndVisible];
        return YES;
    }else{
        //[window addSubview:signViewController.view];
        [self.window setRootViewController:secondViewController];
        [window makeKeyAndVisible];
        return YES;
    }

   // return YES;
} 
```

我得到的错误是`Application windows are expected to have a root view controller at the end of application launch`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:09:32.413

在使用它之前，您应该首先`alloc`和您的视图控制器。`init`

```
if(condition true)
{
    //[window addSubview:viewController.view];
    viewController = [[ViewController alloc] init];
    [self.window setRootViewController:viewController];
    [window makeKeyAndVisible];
    return YES;
}else{
    //[window addSubview:signViewController.view];
    secondViewController = [[SecondViewController alloc] init];
    [self.window setRootViewController:secondViewController];
    [window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:13:19.410

检查您是否有视图控制器的 alloc 和 init。使用 viewController=[[ViewControllerName alloc]init];

当我的 viewController 未分配时，我得到了同样的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:47:58.517

写吧

```
[window makeKeyAndVisible];
    return YES; 
```

在**else**之后或之前**}**

# c# - 将工具箱组件添加到 c# 图形

> ID：13625060
> 
> 赞同：1
> 
> 时间：2012-11-29T11:44:07.943
> 
> 标签：c#, graphics

我想将普通工具箱按钮添加到我的 Windows 窗体应用程序中，它会覆盖窗体的 onpaint 方法以将窗体的形状更改为椭圆形。当我在加载事件中添加创建新按钮的代码时，根本没有可见的效果，我看不到任何按钮。

请帮助我如何使用图形和普通控件。

我在这里粘贴代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing.Drawing2D;

namespace gadget2
{
    public partial class Form1 : Form
    {
        Button[] b = new Button[3];
        GraphicsPath shape = new GraphicsPath();
        public Form1()
        {
            InitializeComponent();
        }
        protected override void OnPaint(System.Windows.Forms.PaintEventArgs e)
        { 
            shape.AddEllipse(50, 50, 200, 200);
            this.Region = new System.Drawing.Region(shape);
        }
        private void Form1_Load(object sender, EventArgs e)
        {
            for (int i = 0; i < 3; i++)
            {
                b[i] = new Button();
                b[i].AutoSize = false;
                b[i].Width = 100;
                b[i].Height = 100;
                b[i].Location = new Point(255, 70 + i * 30);
                this.Controls.Add(b[i]);
                b[i].Show();
                b[i].BackColor = Color.Black;
                b[i].BringToFront();
            }  
        }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Mayank");
    }

    private void button2_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Mayank");
    }

    private void button3_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Mayank");
    }
} 
```

}

# python - Python将精度降低为零

> ID：13625061
> 
> 赞同：1
> 
> 时间：2012-11-29T11:44:08.263
> 
> 标签：python, decimal, rounding, zero

我有一段代码正在查看来自某些计算并且非常精确的数字，并且该代码试图根据原始数字（在计算之前）找出正确的精度。然后它使用以下方法应用舍入：

```
with localcontext() as ctx:
    ctx.prec = 5 # simplification for the sake of this example
    my_figure = +my_figure 
```

只要 my_figure 不等于零，一切都很好。这根本不影响零，因此它的精度与之前相同（不是本示例中的 5）。

```
my_figure = Decimal('0.0000...') # 0E-30, it comes from some calculations, not assigned like that
with localcontext() as ctx:
    ctx.prec = 5 # simplification for the sake of this example
    my_figure = +my_figure
    print my_figure # I get 0E-30, no rounding applied, I was expecting 0.0000 
```

是否有任何适当的方法可以像它影响零一样做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T13:48:40.390

做[`Decimal.normalize`](http://docs.python.org/2/library/decimal.html#decimal.Decimal.normalize)你想做的事吗？它不会将精度保持为 5dp，但至少会将 0E-30 压缩到合理的水平。

# uiscrollview - 滚动 UITableView 时如何移动视图？

> ID：13625062
> 
> 赞同：1
> 
> 时间：2012-11-29T11:44:07.250
> 
> 标签：uiscrollview, uiscrollviewdelegate

我有一个搜索框和一个显示结果的表格视图。我想要的是，当我在表格视图中向上滚动时，searchBox 以相同的速度和距离上升。

这是我的代码：

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
    if(tableView.contentOffset.y >= 110){
        CGRect frame = searchBox.frame;
        frame.origin.y = - (tableView.contentOffset.y-110);
        searchBox.frame = frame;
    }
} 
```

如果我慢慢滚动，这段代码就可以了。

如果我滚动得很快，当我向下滚动时，搜索框的某些部分不会显示。

我哪里错了？

# c - C 声明意味着什么？

> ID：13625066
> 
> 赞同：0
> 
> 时间：2012-11-29T11:44:28.443
> 
> 标签：c

考虑下面的 C 声明：

```
typedef char (* ( * (* ARR ) ( ) ) [8]) (int,int) ;    
ARR arr; 
```

表示什么`arr`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:49:12.487

从最左边的标识符开始，然后记住它`[]`并`()`在之前绑定`*`，因此`*a[]`是指针数组，是指向数组的指针，`(*a)[]`是`*f()`返回指针的函数，`(*f)()`是指向函数的指针：

```
typedef                ARR                           -- ARR is a typedef for
                    (* ARR )                         -- a pointer
                    (* ARR ) ( )                     -- to a function
                ( * (* ARR ) ( ) )                   -- returning a pointer
                ( * (* ARR ) ( ) ) [8]               -- to an 8-element array
             (* ( * (* ARR ) ( ) ) [8])              -- of pointers
             (* ( * (* ARR ) ( ) ) [8]) (       )    -- to functions
             (* ( * (* ARR ) ( ) ) [8]) (int,int)    --   taking two int parameters
typedef char (* ( * (* ARR ) ( ) ) [8]) (int,int) ;  --   and returning char 
```

所以

```
ARR arr; 
```

声明`arr`为一个指向函数的指针，该函数返回一个指向 8 元素指针数组的指针，该指针指向返回 char 的函数。

这是一个在实践中会是什么样子的示例：

```
char f0(int a, int b) { ... }
char f1(int x, int y) { ... }
char f2(int g, int h) { ... }
...
char f7(int r, int s) { ... }

// funcArr is an *array* of pointers to functions, not a function
char (*funcArr[8])(int, int) = {f0, f1, f2, f3, ..., f7}; 

// func is a function that will return the funcArr array
char (*(*func())[8])(int,int) { return funcArr; }

arr = func;

char c = (*(*(*arr)())[i])(x,y); 
```

所以，最后一行

1.  取消引用`arr`
2.  调用结果函数 ( `func`)
3.  取消引用从 返回的指针`func`，这给了我们数组 ( `funcArr`)
4.  在索引处找到函数指针`i`
5.  取消引用*该*指针给我们`f0`...`f7`
6.  并调用结果函数

使`typedef`代码更具可读性的一种方法是分阶段进行：

```
typedef char CharFunc(int, int);
typedef CharFunc *CharFuncArray[8];
typedef CharFuncArray *ArrayFunc();

ArrayFunc *arr; 
```

就个人而言，我不喜欢以这种方式做事，因为你如何从`ArrayFunc *arr`到

```
char c = (*(*(*arr)())[i])(x,y); 
```

而像这样的声明

```
char (*(*(*arr)())[8])(int,int); 
```

告诉你应该如何*使用*`arr`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:49:11.107

`arr`是一个`pointer to a function returning pointer to an array of 8 pointers to a function which takes 2 int as an argument returning char`

有关更多信息，请参阅[使用顺时针/螺旋规则对复杂声明进行命名](http://c-faq.com/decl/spiral.anderson.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T11:51:45.317

`arr`是指向函数的指针，返回指向数组的指针 8 指向函数的指针，该函数将 2 个参数作为返回字符的 int。你肯定需要检查这个[链接](http://c-faq.com/decl/spiral.anderson.html)，它可以帮助你解码这些复杂的声明。

PS：我建议不要有这么复杂的声明。把它分成几部分。

# vb.net - 复制 T 列表

> ID：13625068
> 
> 赞同：-1
> 
> 时间：2012-11-29T11:44:34.237
> 
> 标签：vb.net, list, visual-studio-2012, copy, addrange

我正在使用 VS2012，vb.net。

如果我有一个类型为 t 的列表，并且我希望将其复制到另一个列表，则以下代码有效：

```
list2.Clear()
list2.AddRange(list1) 
```

但是，如果 t 的第一个列表中有另一个类型为 t2 的列表，则上面的代码不起作用。

我可以帮忙将 t 列表的内容复制到另一个列表中，其中 t 列表中有另一个 t2 列表。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:14:06.323

```
However, if the first list of t has another list of type t2 inside it, this above code does not work. 
```

它*确实*有效，但它执行[的是浅拷贝，而不是深拷贝](https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy)。

假设您想对`List(Of List(Of Integer))`. 你可以这样做：

```
Dim list1 As List(Of List(Of Integer))

*Populate list 1*

Dim copy = list1.Select(Function(innerList) innerList.ToList).ToList 
```

现在您必须独立列表，因为您使用 复制每个内部列表`ToList`，并使用 复制外部列表`ToList`。请注意，如果内部列表中有引用类型对象而不是整数，则还需要克隆每个单独的对象以进行深层复制。

# c# - C# 关闭时最小化到系统托盘

> ID：13625069
> 
> 赞同：18
> 
> 时间：2012-11-29T11:44:36.663
> 
> 标签：c#, system-tray

嗨，在我的 c# 应用程序中，当表单关闭时，我试图将应用程序最小化到系统托盘。这是我尝试过的代码。

```
 public void MinimizeToTray()
    {
        try
        {
            notifyIcon1.BalloonTipTitle = "Sample text";
            notifyIcon1.BalloonTipText = "Form is minimized";

            if (FormWindowState.Minimized == this.WindowState)
            {
                notifyIcon1.Visible = true;
                notifyIcon1.ShowBalloonTip(500);
                this.Hide();
            }
            else if (FormWindowState.Normal == this.WindowState)
            {
                notifyIcon1.Visible = false;
            }
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

我正在调用该方法来形成关闭事件。但问题是它没有最小化到托盘。它只是关闭表格。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-05-27T20:31:08.213

`e.Cancel = true;`即使您关闭计算机，代码也将始终取消事件，但这里有一个代码可以帮助您：

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
 {
     if (e.CloseReason == CloseReason.UserClosing)
     {
          myNotifyIcon.Visible = true;
          this.Hide();
          e.Cancel = true;
     }
 } 
```

它将允许以编程方式关闭表单。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-29T11:52:09.017

在表单关闭事件中编写一个事件。

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
 {
        e.Cancel = true;                         
        Hide();
 } 
```

并使用自定义菜单条写入通知图标以显示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-19T21:03:52.313

```
 namespace MinimizeTrayNotification
     {
      public partial class Form1 : Form
       {
    public Form1()
    {
        InitializeComponent();
    }

    private void MinimzedTray()
    {
        notifyIcon1.Visible = true;
        notifyIcon1.Icon = SystemIcons.Application;

        notifyIcon1.BalloonTipText = "Minimized";
        notifyIcon1.BalloonTipTitle = "Your Application is Running in BackGround";
        notifyIcon1.ShowBalloonTip(500);

    }

    private void MaxmizedFromTray()
    {
        notifyIcon1.Visible = true;
        notifyIcon1.BalloonTipText = "Maximized";
        notifyIcon1.BalloonTipTitle = "Application is Running in Foreground";
        notifyIcon1.ShowBalloonTip(500);

    }

    private void Form1_Resize(object sender, EventArgs e)
    {
        if(FormWindowState.Minimized==this.WindowState)
        {
        MinimzedTray();
        }
      else  if (FormWindowState.Normal == this.WindowState)
        {

            MaxmizedFromTray();
        }
        }

    private void notifyIcon1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        this.WindowState = FormWindowState.Normal;
        Form1 frm = new Form1();
        frm.Show();
        MaxmizedFromTray();

    }

    private void notifyIcon1_MouseClick(object sender, MouseEventArgs e)
    {
        this.WindowState = FormWindowState.Normal;
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (e.CloseReason == CloseReason.UserClosing)
        {
            e.Cancel = true;
            this.WindowState = FormWindowState.Minimized;
            this.ShowInTaskbar = false;
            this.Hide();

        }

    }

    private void notifyIcon1_Click(object sender, EventArgs e)
    {
        this.WindowState = FormWindowState.Normal;
        notifyIcon1.BalloonTipText = "Normal";
        notifyIcon1.ShowBalloonTip(500);
    }
 } 
```

}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T11:49:56.530

您应该取消该`FormClosing`事件，然后调用您的`MinimizeToTray()`函数。

这是通过`Cancel`.`FormClosingEventArgs`

另外，考虑在某些情况下使用`bool`某个地方来**允许**关闭`Form`，例如，如果您正在使用`File > Exit`菜单或其他东西：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if(!allowClosing)
    {
        e.Cancel = true;
        MinimizeToTray();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-05T05:11:07.780

要在关闭时最小化，请将**WindowState**设置为**Minimized**

```
private void Form1_FormClosing(Object sender, FormClosingEventArgs e) {
    e.Cancel = true;
    WindowState = FormWindowState.Minimized;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T11:53:27.750

您需要使用 FormClosing-Event。

```
private void Form1_FormClosing(Object sender, FormClosingEventArgs e) {
    e.Cancel = true;
    MinimizeToTray();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-06T13:53:17.423

您可以按照以下 C# 示例处理`FormClosing`诸如[micsoft Form Closing Event之类的事件](https://msdn.microsoft.com/en-us/library/system.windows.forms.form.closing(v=vs.110).aspx)

```
private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        // Determine if text has changed in the textbox by comparing to original text.
        if (textBox1.Text != strMyOriginalText)
        {
            // Display a MsgBox asking the user to save changes or abort.
            if (MessageBox.Show("Do you want to save changes to your text?", "My Application",
                MessageBoxButtons.YesNo) == DialogResult.Yes)
            {
                // Cancel the Closing event from closing the form.
                e.Cancel = true;
                // Call method to save file...
            }
        }
} 
```

# mysql - 使用 Solr 进行动态索引

> ID：13625071
> 
> 赞同：0
> 
> 时间：2012-11-29T11:44:40.797
> 
> 标签：mysql, solr, indexing, dataimporthandler

如何使用 DataimportHandler 和 MySQL 数据库在 solr 4.0 中进行动态索引？我有 data-config.xml 文件，其中包含数据库信息和索引查询。数据库更新时有没有办法动态索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:34:16.747

DIH 提供了执行[Delta 导入](http://wiki.apache.org/solr/DataImportHandler#Using_delta-import_command)的能力。
DIH 将维护最后一次成功构建的时间戳。
因此，如果您的数据库正在维护更新记录的时间戳，则增量查询将考虑在最后一次构建时间戳之后更新的所有记录。
它是一种增量构建索引的方式。

# asp.net - 突出显示选定周的 asp.net 日历

> ID：13625075
> 
> 赞同：0
> 
> 时间：2012-11-29T11:44:48.497
> 
> 标签：asp.net, calendar

我需要在 asp.net 日历中突出显示选定日期的一周。由于我们可以为所选日期指定样式，asp.net 日历是否可以选择为所选日期的整个星期指定样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:48:01.103

您可以使用 calendar_dayrender 事件

```
public void Calendar1_DayRender(object sender, DayRenderEventArgs e)
    {
        e.Day.IsSelectable = false;
        DataRow[] rows = Tables.Select(
              String.Format(
                 "Date='{0}' and Month='{1}' and Year='{2}'",
                 e.Day.Date.Day,
                 e.Day.Date.Month,
                 e.Day.Date.Year
              )
           );

        foreach (DataRow row in rows)
        {
                System.Web.UI.WebControls.Image image;
                image = new System.Web.UI.WebControls.Image();
                 if (somecondition)
                {

                    e.Cell.CssClass = "cssclass";

                }

    } 
```

# php - PHP PDO ODBC - 等于运算符中的数据类型不兼容

> ID：13625078
> 
> 赞同：5
> 
> 时间：2012-11-29T11:44:58.860
> 
> 标签：php, sql, pdo, odbc

我似乎无法使用带有参数的简单 WHERE 子句来工作，我不断收到一条错误消息：

```
[Microsoft][ODBC SQL Server Driver][SQL Server]The data types varchar(max) and text are incompatible in the equal to operator. (SQLExecute[402] at ext\pdo_odbc\odbc_stmt.c:254) 
```

我已经以多种不同的方式尝试过这个查询，例如

未命名：

```
$query = $DBH->prepare("SELECT TOP 1 * FROM bksb_Resources WHERE ResourceType = ?");
$query->execute( array('assessment') ); 
```

未命名并使用 bindValue 将其设置为字符串

```
$query = $DBH->prepare("SELECT TOP 1 * FROM bksb_Resources WHERE ResourceType = ?");
$query->bindValue(1, 'assessment', PDO::PARAM_STR);
$query->execute(  ); 
```

命名并使用 bindParam 将其设置为字符串：

```
$val = 'assessment';
$query = $DBH->prepare("SELECT TOP 1 * FROM bksb_Resources WHERE ResourceType = :myp");
$query->bindParam(':myp', $val, PDO::PARAM_STR);
$query->execute(  ); 
```

但无论我怎么做，我总是收到这个错误信息。

有问题的列的类型是：varchar(max)，因此假设发送的参数是“文本”类型，即使我将其指定为字符串值（char、varchar）

我无法更改数据库，因为它是用于另一个软件的。

解决方法是什么？我真的不想每次执行这样的 where 子句时都必须 CAST（或者每个人都这样做？）。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-15T08:46:04.683

我们有一个类似的问题，在我们的例子中，我们的`/etc/odbc.ini`文件中有以下内容：

```
[ServerAlias]
Driver = FreeTDS
Server = 1.2.3.4
PORT = 1433
TDS_Version = 8.0 
```

我们发现，如果您更改为`TDS_Version`我们`7.2`所有的绑定查询开始正常工作。

```
[ServerAlias]
Driver = FreeTDS
Server = 1.2.3.4
PORT = 1433
TDS_Version = 7.2 
```

我不确定原因，但我怀疑它可能记录在某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T19:01:19.703

您是否尝试将字段类型更改为 CHAR o VARCHAR？（而不是具有这种不兼容性的 VARCHAR(MAX) ）。

或者您是否尝试过转换数据类型？

```
$val = 'assessment';
$query = $DBH->prepare(
    "SELECT TOP 1 * FROM bksb_Resources WHERE
    CONVERT(VARCHAR, ResourceType) = :myp");
$query->bindParam(':myp', $val, PDO::PARAM_STR);
$query->execute(); 
```

对不起，我没有 MS SQL Server 来测试代码，但我从这个页面得到了这个提示：[https ://msdn.microsoft.com/en-us//library/ms176089.aspx](https://msdn.microsoft.com/en-us//library/ms176089.aspx)

请注意警告：

> char 和 varchar 数据类型支持代码页转换，但 text 数据类型不支持。与早期版本的 SQL Server 一样，不会报告代码页转换期间的数据丢失。

希望能帮助到你！

# mysql - 查询左连接不返回预期结果

> ID：13625079
> 
> 赞同：0
> 
> 时间：2012-11-29T11:44:59.987
> 
> 标签：mysql, left-join

我有两个查询 1) 树和 2) 单元

**第一次查询**

```
SELECT * FROM tree WHERE entity_id = 8656 
```

返回以下数据：

```
entity id | parent_id | length
-------------------------------
8656      | 8656      | 0
8656      | 8655      | 1
8656      | 8654      | 2
8656      | 8653      | 3
8656      | 4331      | 4
8656      | 2         | 5
8656      | 1         | 6 
```

**第二次查询**

```
SELECT * FROM units WHERE activity_id =10066 
```

返回

```
id  | activity_id | activity_name | region_id | region_name 
-----------------------------------------------------------
136 | 10066       | Cricket       | 4331      | Yote
137 | 10066       | Cricket       | 8653      | Handbreath
140 | 10066       | Cricket       | 8656      | Kevb 
```

预期结果

```
 entity id | parent_id | length | region_name
    --------------------------------------------
    8656      | 8656      | 0      | Kevb
    8656      | 8655      | 1      | null
    8656      | 8654      | 2      | null
    8656      | 8653      | 3      | Handbreath
    8656      | 4331      | 4      | Yote
    8656      | 2         | 5      | null
    8656      | 1         | 6      | null 
```

我试过这个查询

```
SELECT tree . * , units.region_name
FROM tree
LEFT JOIN units ON tree.parent_id = units.region_id
WHERE tree.entity_id = 8656
AND units.activity_id = 10066 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:49:19.740

通过移动`u.activity_id =10066`到 the`LEFT JOIN`而不是`WHERE`子句，我能够产生结果：

```
select t.entity_id,
  t.parent_id,
  t.length,
  u.region_name
from tree t
left join units u
  on t.parent_id = u.region_id
  and u.activity_id =10066
WHERE t.entity_id = 8656 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f1593/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:49:12.430

尝试这个：

```
SELECT t.entity_id, t.arent_id, t.length, A.region_name
FROM tree t 
LEFT JOIN (SELECT region_id, region_name FROM units WHERE activity_id =10066 ) AS A ON t.arent_id = A.region_id 
WHERE entity_id = 8656 
```

**或者**

```
SELECT t. * , u.region_name
FROM tree t
LEFT JOIN units u ON t.parent_id = u.region_id AND u.activity_id = 10066
WHERE t.entity_id = 8656 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:55:56.997

如果你显示你的左连接查询将会很有帮助..无论如何试试这个......

```
 SELECT t.entity_id, t.parent_id, t.length, u.region_name from tree t
    left join units u on t.parent_id = u.region_id and u.activity_id =10066
    WHERE t.entity_id = 8656 
```

# emacs - 期待一种使光标像 Emacs 中的心跳一样闪烁的方法

> ID：13625080
> 
> 赞同：5
> 
> 时间：2012-11-29T11:45:08.173
> 
> 标签：emacs, elisp

如何让 Emacs 中的光标像心跳一样闪烁。就像电脑暂停时笔记本电脑前面板上的 LED 一样。

有`blink-cursor-alist`控制光标闪烁的变量，但我不知道如何使用它来满足我的要求。

是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T11:08:47.147

这种简单的次要模式实现了心跳式闪烁光标。您可以调整`heartbeat-cursor-colors`以获得不同的色调或其变化。

该代码在 Emacs 24.2.1 中进行了测试，但很容易移植到旧版 Emacsen。

```
(require 'cl)
(require 'color)

(defvar heartbeat-fps 16)
(defvar heartbeat-period 5)

(defun heartbeat-range (from to cnt)
  (let ((step (/ (- to from) (float cnt))))
    (loop for i below cnt collect (+ from (* step i)))))

(defun heartbeat-cursor-colors ()
  (let ((cnt (* heartbeat-period heartbeat-fps)))
    (mapcar (lambda (r)
              (color-rgb-to-hex r 0 0))
            (nconc (heartbeat-range .2 1 (/ cnt 2))
                   (heartbeat-range 1 .2 (/ cnt 2))))))

(defvar heartbeat-cursor-timer nil)
(defvar heartbeat-cursor-old-color)

(define-minor-mode heartbeat-cursor-mode
  "Change cursor color with the heartbeat effect."
  nil "" nil
  :global t
  (when heartbeat-cursor-timer
    (cancel-timer heartbeat-cursor-timer)
    (setq heartbeat-cursor-timer nil)
    (set-face-background 'cursor heartbeat-cursor-old-color))
  (when heartbeat-cursor-mode
    (setq heartbeat-cursor-old-color (face-background 'cursor)
          heartbeat-cursor-timer
          (run-with-timer
           0 (/ 1 (float heartbeat-fps))
           (lexical-let ((colors (heartbeat-cursor-colors)) tail)
             (lambda ()
               (setq tail (or (cdr tail) colors))
               (set-face-background 'cursor (car tail)))))))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T12:40:42.593

您猜测该选项与“眨眼”一词有关。因此，您按 Ch a（表示中意）并输入“blink”。在我的 emacs 上，我有两个选择：`blink-cursor-mode`和`blink-matching-open`. 第一个看起来不错。描述说：“切换闪烁光标模式”。

我的 emacs 上的快捷方式说：`<menu-bar> <options> <blink-cursor-mode>`. 所以我猜这个选项在菜单的某个地方，可能在“选项”下。我打开选项菜单，它是：带有复选框的“闪烁光标”。

这听起来也像是一个可以定制的选项。所以我输入`M-x customize-option`然后`blink-cursor-mode`。这使我可以切换值并将其保存以供将来的会话使用。

**编辑：**要为光标设置 ON 和 OFF 之间的间隔，有一个名为`blink-cursor-interval`. 您可以使用`M-x customize-variable`然后`blink-cursor-interval`设置间隔。该变量`blink-cursor-alist`将 OFF 状态光标类型与 ON 状态光标类型匹配，并且与闪烁速度无关。

**EDIT2：**据我所知，没有办法让光标逐渐关闭和打开，因为ON状态下的光标形状可能与OFF状态下的形状不同（所以形状会逐渐变化必需的）。

# installation - 如何在 Pharo 上安装 UIBuilder

> ID：13625081
> 
> 赞同：1
> 
> 时间：2012-11-29T11:45:09.157
> 
> 标签：installation, smalltalk, pharo, uibuilder

我正在为毕业（计算机科学）学习 Smalltalk，并开始使用[Pharo](http://www.pharo-project.org)。

我已经阅读并看到有一个很好的 UI 构建框架，称为[UIBuilder 工具](http://www.squeaksource.com/UIBuilder.html)。但我对如何在 Pharo 上安装它感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:21:45.370

请注意，不幸的是，这只适用于旧版本的 Pharo。

安装说明是注册部分给出的 e/g/

在成绩单粘贴中

```
MCHttpRepository
    location: 'http://www.squeaksource.com/UIBuilder'
    user: ''
    password: '' 
```

选择它并从菜单中选择 DoIt。

然后，这将下载类并安装在映像中。执行此操作的工具是 Monticello，更多信息请参见 Pharo By Example [Monticello 章节](https://gforge.inria.fr/frs/download.php/27018/Monticello.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T17:33:17.037

旧的“UIBuilder”项目似乎已经死亡/停止。Squeaksource 页面 [http://www.squeaksource.com/UIBuilder.html](http://www.squeaksource.com/UIBuilder.html)说：

“为 Pharo-Smalltalk 开发 UI 构建器的尝试失败。”

现在有一个新的“UI Painter”项目作为 GSOC 2013 的一部分为基于 Spec 的 Pharo 开发。更多信息可以在这里找到：http: [//uipainter-gsoc.over-blog.com/](http://uipainter-gsoc.over-blog.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:36:17.263

如果你能侥幸成功，那就用 Glamour 构建你的 UI。这包含在 Moose 中。否则，为 Pharo 创建 UI 的受支持（但在开发中）方法是使用 Spec。

# java - JPA 序列跳过值

> ID：13625084
> 
> 赞同：2
> 
> 时间：2012-11-29T11:45:21.107
> 
> 标签：java, jpa, db2, websphere, jpa-2.0

我正在使用 Open JPA 2.0、WebSphere V8 和数据库是 DB2 V10。

使用以下语法创建序列

> 创建序列“MYSCHEMA”。“SEQ_TABLEA”作为整数开始，增量为 1 最小值 1000 最大值 2147483647 没有循环缓存 100 顺序；

我的实体类定义使用如下序列

```
@Entity
@Table(name="MYSCHEMA.SEQ_TABLEA")
public class MyEntity implements Serializable {

    @Id
    @SequenceGenerator(name="TABLEA_ID_GENERATOR", sequenceName="MYSCHEMA.SEQ_TABLEA")
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="TABLEA_GENERATOR")
    @Column(name="ID")
    private Integer myId;

    .. 
```

在 3 到 4 天内多次插入 TABLEA 后，我发现序列号已跳过许多值。创建序列的插入如 1,2,3,100,101,102,103,104,105,200,201,202,300,301,302,303,304,305,306,307,308,309,310,400,.. 等

对出了什么问题有任何看法吗？插入时我没有发现任何错误，在此期间也没有退回数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:52:26.893

这是非常正常的行为。排序器将预取/预解析值的间隔（并将间隔参数保存在数据库中），但由于某种原因，他最终不会实际使用（保存实体）所有这些值。稍后，当它到达所述间隔的最后一个值时，它将创建一个新值，而无需关心/重新检查上一个间隔的所有值是否都已用完。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:52:33.117

`@SequenceGenerator`尝试在注释上设置分配大小。这指定了分配序列号时要增加的数量。

```
@SequenceGenerator(name="TABLEA_ID_GENERATOR", 
  sequenceName="MYSCHEMA.SEQ_TABLEA", allocationSize=1) 
```

[Java API](http://docs.oracle.com/javaee/5/api/javax/persistence/SequenceGenerator.html#allocationSize%28%29)

[关于 JPA 中序列的好文章](http://royontechnology.blogspot.com/2010/04/note-on-allocationsize-parameter-of.html)

# javascript - 为动态创建的表格行着色

> ID：13625085
> 
> 赞同：1
> 
> 时间：2012-11-29T11:45:21.337
> 
> 标签：javascript, css, colors, html-table, row

我正在为表格行着色问题而苦苦挣扎。我正在寻求一些指导：

简而言之，我可以使用 JS 为表创建行；我正在使用 JS，因为我不提前知道我需要多少行。我想根据数据内容为某些行着色。我以这种方式使用嵌入式 CSS：

```
// CSS:
.newRow{
    color: #dd0000;
    background-color:#ffd700;
}

// JS:
// create a row in the body of the table
row=document.createElement('tr');
if(resp.items[i].mimeType.indexOf("folder") !== -1){
    row.className = "newRow";
} 
```

我在 FF 和 IE 中得到的是文本是红色的，但行背景仍然是白色的。
有人可以提供有关我要偏离轨道的地方的见解吗？

---编辑添加所有代码---

谢谢大家的回复。我在这里粘贴了我的代码，但是我不得不隐藏在 Oauth2 身份验证中使用的几个令牌，所以我还没有弄清楚如何让 jsfiddle 运行（正在处理它）。

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
<style type="text/css">
table.gridTable {
    font-family: verdana,arial,sans-serif;
    font-size:11px;
    color:#333333;
    border-width: 1px;
    border-color: #666666;
    border-collapse: collapse;
}
table.gridTable th {
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #666666;
    background-color: #dedede;
}
table.gridTable td {
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #666666;
    background-color: #ffffff;
}

  .newRow
{
  color: #dd0000;
  background-color:#ffd700;
}

    </style>
  </head>
  <body>

    <!--Add a button for the user to click to initiate auth sequence -->
    <button id="authorize-button" style="visibility: hidden">Authorize</button>
    <script type="text/javascript">
      var clientId = '<obscured on purpose>';
      var apiKey = '<obscured on purpose>';
      // To enter one or more authentication scopes, refer to the documentation for the API.
      var scopes = 'https://www.googleapis.com/auth/drive';

      // Use a button to handle authentication the first time.
      function handleClientLoad() {
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth,1);
      }

      function checkAuth() {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
      }

      function handleAuthResult(authResult) {
        var authorizeButton = document.getElementById('authorize-button');
        if (authResult && !authResult.error) {
          authorizeButton.style.visibility = 'hidden';
          makeApiCall();
        } else {
          authorizeButton.style.visibility = '';
          authorizeButton.onclick = handleAuthClick;
        }
      }

      function handleAuthClick(event) {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        return false;
      }

      function makeTable(foo){
          alert("Length: " + foo.items.length);
      }

      // Load the API and make an API call.  Display the results on the screen.
      function makeApiCall() {
        gapi.client.load('drive', 'v2', function() {

          var request = gapi.client.drive.files.list ();

          request.execute(function(resp) {

              //
              // number of files
             document.getElementById('numFiles').innerHTML='Number of files ' + resp.items.length;

              //
              // create a table
              var root=document.getElementById('myTable');
              var tbl = document.createElement('table');
              tbl.className='gridTable';

              //makeTable(resp);

              //
              // why do I have to do this?
              tbl.setAttribute("id", "table1");

              //
              // todo: create a table header
              var thead = document.createElement('thead');
              tbl.appendChild(thead);
              var orderArrayHeader = ["Title","Date","Mod by","ID","Mime type","File size","Kind"];
              for(var i=0;i<orderArrayHeader.length;i++){
                    thead.appendChild(document.createElement("th")).
                    appendChild(document.createTextNode(orderArrayHeader[i]));
                }

              //
              // create table body
              var tbo=document.createElement('tbody');
              var row, cell;

              //
              // actually make the table
              for(var i=0;i<resp.items.length;i++){

                  //
                  // create a row in the body of the table
                row=document.createElement('tr');
                if(resp.items[i].mimeType.indexOf("folder") !== -1){

                    row.className = "newRow";
                }

                  //
                  // create columns for this row

                    cell=document.createElement('td');
                    cell.appendChild(document.createTextNode(resp.items[i].title));
                    row.appendChild(cell);

                    cell=document.createElement('td');
                    cell.appendChild(document.createTextNode(resp.items[i].modifiedDate));
                    row.appendChild(cell);

                    cell=document.createElement('td');
                    cell.appendChild(document.createTextNode(resp.items[i].lastModifyingUserName));
                    row.appendChild(cell);

                    cell=document.createElement('td');
                    cell.appendChild(document.createTextNode(resp.items[i].id));
                    row.appendChild(cell);

                    cell=document.createElement('td');
                    cell.appendChild(document.createTextNode(resp.items[i].mimeType));
                    row.appendChild(cell);

                    cell=document.createElement('td');
                    cell.appendChild(document.createTextNode(resp.items[i].fileSize));
                    row.appendChild(cell);

                    cell=document.createElement('td');
                    cell.appendChild(document.createTextNode(resp.items[i].kind));
                    row.appendChild(cell);                  

                  tbo.appendChild(row);

              }

              //
              // now that all the rows have been created, add them to the table body
              tbl.appendChild(tbo);

              //
              // insert the table into the div with ID 'myTable' 
              root.appendChild(tbl);

              //
              // fooling around with table elements
              trows = document.getElementById("table1").rows;
//            alert(trows.length);
              row0 = trows[0];
//            alert(row0.cells.length);
//            myCells = row0.cells;
//            myCells[0].value = "WTF?";
              //
              // list of files
/*             for (i=0; i<resp.items.length; i++) {

                    //
                    // assign values
                    var titulo = resp.items[i].title;
                    var fechaUpd = resp.items[i].modifiedDate;
                    var userUpd = resp.items[i].lastModifyingUserName;
                    var fileID = resp.items[i].id;

                    //
                    // create a list
                    var fileInfo = document.createElement('li');
                    fileInfo.appendChild(document.createTextNode('TITLE: ' + titulo + ' FILE ID: ' + fileID + ' - LAST MODIF: ' + fechaUpd + ' - BY: ' + userUpd));                
                    document.getElementById('content').appendChild(fileInfo);

            }
 */          });        
        });
      }
    </script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>    
    <p id="numFiles"></p>
    <div id="content"></div>
    <div id="myTable"></div>
  </body>
</html> 
```

嗨，我试图支持 Akhil 的回答......即使我还没有解决问题，它也有助于获得更多知识。但我需要有 15 个我尚未获得的声望点。所以我要感谢所有插话的人。顺便说一句，Chrome 中的行为相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:55:25.480

如果您没有创建 td 标签，您可能会遇到这种情况。

确保您创建了适当的 td 标签并将其添加到您的 tr 元素中。

```
var row=document.createElement('tr');
var td =document.createElement('td');
td.innerHTML="aaa";
row.appendChild(td); 
```

# android - 使用 iText 将数据转换为 PDF

> ID：13625088
> 
> 赞同：2
> 
> 时间：2012-11-29T11:45:27.767
> 
> 标签：android, itext

我使用 iText 在我的 Android 应用程序中生成 PDF。我需要在 pdf 中添加一个 LIST。这个列表需要来自我已经在适配器中拥有的数据。我的适配器已经填充了正确的数据，所以我只需要知道如何将适配器中的数据以 LIST 形式添加到我的 PDF 文件中。PS：填写应用程序另一部分的动态数据。所以这个数据只需要在 PDF 中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:51:52.437

这是在 PDF 表中添加数据的方法..

```
private static void descriptionTable(Document p,ArrayList<String> list) throws BadElementException 
      {
            PdfPTable table = new PdfPTable(3);

            table.setWidthPercentage(100);

            PdfPCell c1 = new PdfPCell(new Phrase("Site Address",ele_noraml_black));
            c1.setHorizontalAlignment(Element.ALIGN_LEFT);
            c1.setColspan(1);
            c1.setBorderWidth(1);
            c1.setPaddingBottom(10);
            c1.setBorderColor(celalBorderColor);
            table.addCell(c1);

            c1 = new PdfPCell(new Phrase(list_tree_tree.get(0),ele_noraml_black));
            c1.setHorizontalAlignment(Element.ALIGN_LEFT);
            c1.setBorderWidth(1);
            c1.setColspan(2);
            c1.setPaddingBottom(10);
            c1.setBorderColor(celalBorderColor);
            table.addCell(c1);
 try {
                p.add(table);
            } catch (DocumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
} 
```

# ios - 如何保持对象一对多 RestKit

> ID：13625091
> 
> 赞同：0
> 
> 时间：2012-11-29T11:45:31.357
> 
> 标签：ios, core-data, restkit

我对 RestKit 中的一对多映射关系感到困惑。我的 json 看起来像这样

```
object: {
    sub_objects: [{sub_object}]
} 
```

我需要为`array`核心数据中的关系自动完成项目。数组可能为空，但对象必须离开。

这是我的对象映射

```
[objMapping mapKeyPath:@"sub_objects" toRelationship:@"subObjects"  withMapping:subObjMapping]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:03:33.793

也许第二个字符串应该`@"subObject"`没有最后的“s”？

# php - 将 mm/dd/yyyy 转换为 mysql 时间戳？

> ID：13625093
> 
> 赞同：2
> 
> 时间：2012-11-29T11:45:38.733
> 
> 标签：php, mysql, timestamp

我已经尝试了大约两个小时来让这个工作没有运气。我正在尝试将像 11/18/2012 这样输入的日期转换为 mysql 时间戳，但我尝试过的所有内容都以数据库中的 0000-00-00 00:00:00 或 NULL 结尾:(我' m 使用 PHP + MYSQL，所以任何一个解决方案都会很棒

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T11:50:36.390

尝试这个

```
 $release_date=$_POST['release_date'];
    echo date("Y-m-d H:i:s",strtotime($release_date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:49:53.223

使用[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)：

```
SELECT TIMESTAMP(STR_TO_DATE('11/18/2012','%m/%d/%Y')) 
```

[http://sqlfiddle.com/#!2/d41d8/4363/0](http://sqlfiddle.com/#!2/d41d8/4363/0)

您说您尝试过：

```
UNIX_TIMESTAMP(STR_TO_DATE('$release_date','%m/%d/%y')) 
```

这不起作用的原因是因为`UNIX_TIMESTAMP`的返回类型是无符号整数，而不是`TIMESTAMP`。这就是为什么你不能将它插入到`TIMESTAMP`列中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:48:09.687

PHP 的[DateTime](http://www.php.net/manual/en/datetime.construct.php)来救命了！

```
$datetime = new DateTime($alternativeFormat);
echo $datetime->format('Y-m-d H:i:s'); // mysql format 
```

也可以让 MySQL 更改数据，但我建议不要这样做。通过使用该`DateTime`对象，您可以打开查询以支持其他格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:59:38.560

正确答案将取决于您正在尝试做什么，但在大多数情况下，它是这些事情的组合：

1.  使用 DateTime 对象而不是字符串来表示 PHP 中的时间戳。（在输入时转换它而不是在写入数据库时​​）。
2.  使用具有占位符的数据库接口，并在填写 DateTime 值时，自动将它们转换为适当的字符串格式

这使您不必转换为甚至知道 MySQL 所期望的本机格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T11:51:34.760

我最喜欢的方法：

```
$date = '10/1/2012';
$mysqlDate = date('Y-m-d', strtotime($date)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T11:47:07.350

你试过吗：http `strtotime()`: [//php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

或在“/”上爆炸，然后使用`mktime()`： http: [//php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

```
$parts = explode('/', $date);
$timestamp = mktime(0, 0, 0, $parts[0], $parts[1], $parts[2]); 
```

或此处发布的答案中的任何其他建议？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T11:54:43.913

我会尝试这样的事情。

```
$sDate = '11/18/2012';

$aDate = explode('/', $sDate);

$sMySQLTimestamp = sprintf(
   '%s-%s-%s 00:00:00',
    $aDate[2],
    $aDate[0],
    $aDate[1]
);

var_dump($sMySQLTimestamp);
> string(19) "2012-11-18 00:00:00" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-29T11:55:32.700

您可以将示例日期输入为 2012/11/18 吗？

如果是，请使用

```
select convert('2012/11/18' ,DATETIME) 
```

或者你可以使用

```
 select convert(str_to_date('11/18/2012','%m/%d/%Y'),DATETIME) 
```

# android - 是否为持久数据服务

> ID：13625097
> 
> 赞同：2
> 
> 时间：2012-11-29T11:46:01.573
> 
> 标签：android, android-service

我有一个应用程序可以在活动之间将一些复杂的数据保存在内存中。

至于现在我使用一个在 getter 和 setter 中使用的`Singleton`类。`SharedPreferences`

**我想要什么**：只要我的应用程序在最近的应用程序中运行并显示，我希望一个类永远不会被释放或找到一种方法来实现这一点而不会产生任何后果。

*   所以我想知道，我有更好的方法吗？
*   服务会更好吗？
*   如果是这样，我应该启动和/或绑定它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:53:34.693

如果您使用服务，则不会绑定它，因为取消绑定可能会导致它停止。

您可以创建一个静态对象并在自定义应用程序类中创建它。因此，只要您的应用程序处于活动状态，该对象就由强引用持有。

或组合，使用单例类但让应用程序类存储引用以防止垃圾收集（GC）

聊天后：

在自己的进程中运行的服务应该是您可以构建的最持久的东西。但是，您需要通过 AIDL 与服务进行通信，这是一个跨进程桥，如果通信是高速的，它会提高性能。

# postgresql - 迭代函数返回的表

> ID：13625102
> 
> 赞同：0
> 
> 时间：2012-11-29T11:46:09.993
> 
> 标签：postgresql, plpgsql

我已经声明了两个函数（duplicate_iofs 和 duplicate_ioftypes），它们在执行 INSERT 操作后都返回一个表：

```
CREATE OR REPLACE FUNCTION duplicate_iofs(IN iof_group_src_id integer, IN iof_group_dst_id integer)
    RETURNS TABLE(src_id integer, new_id integer) AS $$
BEGIN
    -- DO INSERT REQUESTS
END;

CREATE OR REPLACE FUNCTION duplicate_ioftypes(IN iof_group_src_id integer, IN iof_group_dst_id integer)
    RETURNS TABLE(src_id integer, new_id integer) AS $$
BEGIN
    -- DO INSERT REQUESTS
END; 
```

我怎样才能在第三个函数中做类似的事情：

```
-- 1\. Call duplicate_iofs(...) and store the result table (e.g. iofs_table)

-- 2\. Call duplicate_ioftypes(...) and store the result table (e.g. ioftypes_table).

-- 3\. Iterate through 'iofs_table' and 'ioftypes_table' with nested loops :
FOR iof_row IN SELECT * FROM iofs_table LOOP
    FOR ioftype_row IN SELECT * FROM ioftypes_table LOOP
        -- DO SOMETHING
    END LOOP;
END LOOP; 
```

注意：duplicate_iofs() 和 duplicate_ioftypes() 必须只调用一次，因此不得在嵌套循环中调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:13:17.837

你可以尝试这样的事情：

```
DECLARE
    curs_iof CURSOR FOR SELECT * FROM iofs_table;
    curs_ioftype CURSOR FOR SELECT * FROM ioftypes_table;
BEGIN
    OPEN SCROLL curs_iof;
    OPEN SCROLL curs_ioftype;

    FETCH curs_iof INTO iof_row;
    WHILE FOUND LOOP
        FETCH FIRST FROM curs_ioftype INTO ioftype_row;
        WHILE FOUND LOOP

            -- DO SOMETHING

            FETCH curs_ioftype INTO ioftype_row;
        END LOOP;
        FETCH curs_iof INTO iof_row;
    END LOOP;

    CLOSE curs_iof;
    CLOSE curs_ioftype;
END; 
```

详情[在这里](http://www.postgresql.org/docs/current/static/plpgsql-cursors.html)。

# c# - 使用 tabControl.TabPages[0].Controls.Add() 时如何停止表单闪烁？

> ID：13625103
> 
> 赞同：0
> 
> 时间：2012-11-29T11:46:11.183
> 
> 标签：c#, winforms, visual-studio-2012, tabcontrol, .net-4.5

我正在使用下面的代码将表单添加到 tabControls tabPage

```
private void btnStudents_Click(object sender, EventArgs e)
    {
       foreach (Form c in tabStudents.TabPages[0].Controls)
        {
            tabStudents.TabPages[0].Controls.Remove(c);
            c.Dispose();
        }

        //load form
        StudentsMasterForm f = new StudentsMasterForm
        {
            TopLevel = false,
            FormBorderStyle = FormBorderStyle.None,
            Dock = DockStyle.Fill
        };

        tabStudents.TabPages[0].Controls.Add(f);
        f.Show();
    } 
```

然而问题是，单击按钮时（即加载表单时），表单闪烁过多。我曾尝试使用 `tabCustomersAndOrders.TabPages[0].SuspendLayout();` and `tabCustomersAndOrders.TabPages[0].ResumeLayout();` `，但闪烁并没有消失。

我想从一种形式过渡到另一种形式，以尽可能顺利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:09:56.440

在 TabControl 上启用双缓冲可能会有所帮助。使用双缓冲，控件图形全部渲染到内存中，然后仅在所有控件渲染完成后才显示。

这意味着在完成之前会有明显的延迟，但应该消除多个控件渲染的闪烁效果。

以下将启用双缓冲：

```
myTabControl.SetStyle(ControlStyles.DoubleBuffer | 
      ControlStyles.UserPaint | 
      ControlStyles.AllPaintingInWmPaint,
      true); 
```

另一种选择（我推荐的）是从不同的角度看待问题。有什么方法可以改变 UI 设计，以便预先缓存这种形式的填充，或者在渲染到屏幕之前发生？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-28T08:45:11.747

只需将其粘贴到您的主 GUI 中：

```
protected override CreateParams CreateParams
        {
            get
            {
                CreateParams cp = base.CreateParams;
                cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
                return cp;
            }
        } 
```

这应该可以解决您的问题。至少从我在网上搜索的很多东西来看，这个有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:36:58.973

为了将此问题标记为已回答，我在这里发布了一个指向另一个 stackoverflow 问题的链接，该问题可以解决我的问题。

这是[如何修复用户控件闪烁的链接](https://stackoverflow.com/questions/2612487/how-to-fix-the-flickering-in-user-controls?lq=1)

# c# - 如何获取在asp.net c#中检查的ID

> ID：13625123
> 
> 赞同：0
> 
> 时间：2012-11-29T11:47:09.887
> 
> 标签：c#, asp.net

```
<asp:CheckBox runat="server" CssClass=" checkbox-tab"  ID="chbcountry" /><%#(Eval("Description")) %> 
```

我正在绑定数据库中的数据

```
 rspCountry.DataSource = countries;
 rspCountry.DataBind(); 
```

该复选框存在于中继器控件中。如何获取国家/地区的 id

编辑：OP添加的代码

```
<asp:Repeater runat="server" ID="rspCountry"> 
    <ItemTemplate > 
        <asp:Label runat="server" ID="lblCountry" CssClass=" checkbox-desc" > 
        <asp:CheckBox runat="server" CssClass=" checkbox-tab" ID="chbcountry" />
          <%#(Eval("Description")) %>
        </asp:Label>
        <br/>
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:52:01.683

请使用 itemcommand 事件获取被选中的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:58:53.117

如果我理解您的问题，您有一个`Id`在数据库中命名的字段，并且您希望能够在用户单击特定的`CheckBox`. 如果是这种情况，您可以使用这样的属性：

```
<asp:CheckBox runat="server" CssClass=" checkbox-tab"  
              ID="chbcountry" InternalId=" <%#(Eval("Id")) %>" />  <%#(Eval("Description")) %> 
```

然后，在 CodeBehind 中，您可以像这样访问它：

```
string id = chbcountry.Attributes["InternalId"]; // Returns the Id 
```

# wpf - 如何在 XAML 中覆盖 Datagrid 单元格样式？

> ID：13625125
> 
> 赞同：1
> 
> 时间：2012-11-29T11:47:23.773
> 
> 标签：wpf

我在 app.xaml 中定义了如下样式：

```
<Style TargetType="DataGridCell">
        <Setter Property= "BorderThickness" Value="1"/>            
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="DataGridCell">
                            <Grid Height="18">
                                <Border BorderBrush="Black" BorderThickness=".2" >
                                    <Border x:Name="border" Background="#992288ff" BorderBrush="Black" BorderThickness=".2">
                                      ......
                      ......
                  ......
                                    </Border>
                                </Border>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
     </Style.Triggers> 
```

在我的表单中，我为一个单元格定义了一种样式。代码如下：

```
 <DataGridTextColumn Width="*" Header="Status" Binding="{Binding Status, Mode=TwoWay}" IsReadOnly="True" >
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="Foreground">
                                <Setter.Value>
                                    <Binding Converter="{StaticResource FGColorKey}"/>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn> 
```

这里我只定义前景样式。但是我在 app.xaml 中为单元格模板定义的样式不适用于此单元格。请看下面的图片：

![在此处输入图像描述](../Images/8cb04ab84bbcec7d28f5d8ecb5e3acc0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T12:51:15.420

通过`CellStyle`在列上设置属性，该样式将用于该列中的每个单元格，系统将不再关心您定义为资源的样式。

要应用这两种样式，您必须将 cellstyle 中的样式基于 app.xaml 中资源中的样式。

您可以通过`BasedOn`在样式上设置属性来做到这一点，如下所示：

```
<DataGridTextColumn.CellStyle>
    <Style TargetType="DataGridCell" BasedOn="{StaticResource {x:Type DataGridCell}}">
        <Setter Property="Foreground">
            <Setter.Value>
                <Binding Converter="{StaticResource FGColorKey}"/>
            </Setter.Value>
        </Setter>
    </Style>
</DataGridTextColumn.CellStyle> 
```

# mysql - Mysql 日期加密

> ID：13625131
> 
> 赞同：0
> 
> 时间：2012-11-29T11:47:40.747
> 
> 标签：mysql, date, encryption

我正在使用 AES_ENCRYPT 方法来加密 Mysql 数据，但是当我尝试它用于 Mysql 日期类型字段时，它不起作用。如何使用 AES_ENCRYPT 加密 Mysql 日期字段？我已经通过谷歌搜索它但到目前为止没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:58:15.097

从mysql手册：

```
AES_ENCRYPT() encrypts a string and returns a binary string. 
AES_DECRYPT() decrypts the encrypted string and returns the original string. 
The input arguments may be any length. 
If either argument is NULL, the result of this function is also NULL. 
```

这意味着您需要将加密数据存储在 varchar 或 text 类型的列中。

# mod-rewrite - mod_rewrite 隐藏 URL GET 参数

> ID：13625132
> 
> 赞同：0
> 
> 时间：2012-11-29T11:47:40.560
> 
> 标签：mod-rewrite

尝试使用 mod_rewrite 隐藏 GET 参数 URL domain.com/users/edit.php?id=1234 所以 URL 会变成这样 domain.com/users/1234

我尝试了下面的 mod_rewrite 但不起作用。有什么建议么？

```
RewriteRule ^users/([0-9]+)$ /?id=$1 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:52:24.660

这应该有效：

```
RewriteRule ^users/([0-9]+)$ /users/edit.php?id=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:51:01.147

我没有对此进行测试，但请尝试：

```
RewriteEngine on
RewriteRule ^users/([0-9]+)$ users/edit.php?id=$1 [L] 
```

# rtc - RTC Eclipse 插件无法识别通过 RTC scm 进行的更新

> ID：13625136
> 
> 赞同：1
> 
> 时间：2012-11-29T11:47:57.020
> 
> 标签：rtc

我有一个脚本：

1.  加载一个 rtc 工作区
2.  将文件签入工作区

签入文件未反映在“待定更改”中。是否需要配置一个钩子（或其他方法），以便使用 scm 工具所做的任何更改都反映在 rtc 客户端上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T14:05:28.683

如果您在 Windows 上使用 RTC 4.0 Eclipse 客户端，启用“Preferences > Team > Jazz Source Control > Local Changes > Automatically detect changes”可能会有所帮助。

请参阅“ [Rational Team Concert 4.0 “新的和值得注意的”](https://jazz.net/downloads/rational-team-concert/releases/4.0?p=news#scm_autodetect) “

![自动侦测](../Images/ef35721d95f61d9aacfa3e41b13ba459.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:56:13.823

仅在以下情况下才会反映在“待定更改”视图中：

*   本地工作区已加载（附加到您的脚本已签入文件的 repo 工作区：它应该是同一个本地工作区）
*   您刷新“待定更改”视图，要求刷新“远程*和*本地更改”，或直接刷新正确的本地工作区）

![刷新](../Images/c7d86a87d8881928f3752cd00cb0fe63.png)

（来自“[将 RTC Eclipse 客户端与其他工具一起使用](https://jazz.net/library/article/531/)”）

从[该线程](https://jazz.net/forum/questions/49852/pending-changes-view-refresh?redirect=/forum/questions/49852/pending-changes-view-refresh)看来，“待定更改”视图仅针对*远程*更改自动刷新：

> 当您的 Eclipse 客户端接收到报告有新传入更改集的 RSS 提要事件时，Pending Changes 视图应该已经自动刷新。

# ruby-on-rails - 在 rails 和 ember pages 上混合纯 ruby

> ID：13625139
> 
> 赞同：4
> 
> 时间：2012-11-29T11:48:03.743
> 
> 标签：ruby-on-rails, ember.js

我正在启动一个将在 Ember 中开发的新 Web 应用程序。像任何网站一样，会有很多静态页面，如主页、关于页面、身份验证页面等。

最好的方法是什么？使用标准 RoR 制作静态页面并拥有一个运行应用程序的页面，还是使用 Ember 制作每个页面？

如果 Ember 应用程序位于“theapp.html.erb”页面上，我如何告诉路由器只在该页面上启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:43:15.163

在您的情况下，我将使用 Ruby on Rails 开发网站。然后在 Ember 应用程序应该存在的页面上，我将包含必要的 JavaScript。这样，Ember 应用程序只会在正确的页面被踢出。

# c# - 如何更好地从集合中的集合中获取集合？

> ID：13625143
> 
> 赞同：4
> 
> 时间：2012-11-29T11:48:11.760
> 
> 标签：c#

正如您从下面的代码中看到的那样，正在从列表中的列表中构建对象集合。想知道是否有更好的方法来编写这种讨厌的方法。

提前喝彩

```
private List<ListINeed> GetListINeed(Guid clientId)
         {
         var listINeed = new List<objectType>();
             someobject.All(p =>
                                 {
                                     p.subcollection.All(q =>
                                                        {
                                                            listINeed.Add(q.subObject);
                                                            return true;
                                                        });
                                     return true;
                                 });
             return listINeed;
         } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:50:56.403

使用[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)

```
private List<ListINeed> GetListINeed(Guid clientId)
{
    return someobject.SelectMany(p=> p.subcollection)
                             .Select(p=>p.subObject).ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:23:32.130

如果您对使用查询语法感兴趣，您会这样做。

```
var query = from c in someObject
            from o in c.subCollection
            select o; 
```

这使得在某些情况下阅读起来更好一些，例如

```
var query = from c in someObject
            from o in c.subCollection
            where c.SomeValue > 12
            select o; 
```

真的是个人喜好，我只是觉得查询语法更容易阅读。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:53:08.080

怎么样

```
return someobject.SelectMany(so=>so.subcollection).Select(o=>o.subObject).ToList(); 
```

这实际上几乎否定了对函数的需求，除非您打算在其中做其他事情（如 clientId 参数所暗示的那样）。

# java - 没有运行第一个活动

> ID：13625144
> 
> 赞同：4
> 
> 时间：2012-11-29T11:48:16.867
> 
> 标签：java, android, xml, android-layout

我的第一次应用程序活动发生错误。错误是：“应用程序意外停止”

我的第一个 xml 活动是 visit_record.xml

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" > 
```

我为此活动创建的类是：visit_record.java

```
public class visit_record extends ListActivity {
    static final String[] LIST = new String[] {"My Task", "Task Execution", "Non-Ticket Task"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.visit_record,LIST));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text

            Intent intent;
            switch (position) {
               case 0:
               intent= new Intent(visit_record.this, My_Task.class);
                startActivity(intent);
              break;
                case 1:
                    intent=new Intent(visit_record.this, task_execution.class);
                    startActivity(intent);
                    break;
                case 2:
                    intent=new Intent(visit_record.this, non_ticket_task.class);
                    startActivity(intent);  
                    break;

                   default:
                    break;
            }}

    });
}} 
```

请指导我为什么它会出错而不是在手机中运行应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:50:03.553

您已扩展 ListActivity ，当您这样做时，您的 ListView 必须具有 id `android:id="@android:id/list"`。你错过了。

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/list"
android:layout_width="match_parent"
android:layout_height="match_parent" > 
```

检查此[问题](https://stackoverflow.com/q/11050817/603744)以获取更多详细信息。

# html - 响应式菜单在 IE 中无法正确显示

> ID：13625146
> 
> 赞同：0
> 
> 时间：2012-11-29T11:48:22.243
> 
> 标签：html, css, wordpress

我正在网站上工作：insterstings.co.uk，它具有响应性，并且我对原始主题进行了一些更改。

出于某种原因，在 IE8（可能是其他原因）中，菜单显示为响应式菜单。我尝试更改媒体查询大小，但没有帮助。

主标题图像也远离正文内容，我试过检查它但没有运气。我讨厌 IE，在其他浏览器中一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:55:10.570

尝试将 repsond.js 添加到 IE8 及以下版本。它为 IE 提供了一些媒体查询功能：[https ://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:53:20.810

9以下的IE版本不支持媒体查询：[http ://caniuse.com/css-mediaqueries](http://caniuse.com/css-mediaqueries)

CSS 的正常流程将接管，因此 IE8 将显示您最后在 CSS 中删除的任何内容。

编辑：您可能想阅读这篇文章，其中涵盖了针对具有不同 CSS 的旧 IE 版本。我已经使用这种方法有一段时间了，效果很好： http: [//paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

# android - Android 使用带/不带缓存的 RestService

> ID：13625148
> 
> 赞同：1
> 
> 时间：2012-11-29T11:48:25.667
> 
> 标签：android

我目前正在创建一个高性能的移动应用程序。现在我正在研究消费休息服务的各种设计模式。其中一种突出的模式是[此处](http://dl.google.com/googleio/2010/android-developing-RESTful-android-apps.pdf)的 Google IO 讨论。我如何查看开发此设计的代码。我将使用 Spring Rest 执行实际的 HTTP Rest 并使用序列化库对 POJO 进行序列化。[我在这里](http://www.codeproject.com/Articles/429997/Sample-Implementation-of-Virgil-Dobjanschis-Rest-p)遇到了这个实现，并将其用作我的应用程序的蓝图。现在一个主要问题来了。

```
public interface HttpMethods {
    public Object getForObject(Object ... params);
    public Object putForObject(Object ... params);
}

   public class LocationsHttpMethods implements HttpMethods{

    private final Context mContext;

    public LocationsHttpMethods(Context context)
    {
        mContext=context;
    }
    @Override
    public Location[] getForObject(Object... params) {
        return null;
    }

    @Override
    public Object putForObject(Object... params) {
        return null;
    }

} 
```

我的位置只是一个 pojo 类。现在困扰我的问题是我给出的第二个链接只是使用布尔值来返回数据。我将返回一个数组。

```
package com.confiz.rest.services;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

import com.confiz.rest.providers.IProvider;
import com.confiz.rest.providers.LocationsProvider;

public class ProcessorService extends Service
{
    private Integer lastStartId;
    private final Context mContext = this;

    /**
     * The keys to be used for the required actions to start this service.
     */
    public static class Extras
    {
        /**
         * The provider which the called method is on.
         */
        public static final String PROVIDER_EXTRA = "PROVIDER_EXTRA";

        /**
         * The method to call.
         */
        public static final String METHOD_EXTRA = "METHOD_EXTRA";

        /**
         * The action to used for the result intent.
         */
        public static final String RESULT_ACTION_EXTRA = "RESULT_ACTION_EXTRA";

        /**
         * The extra used in the result intent to return the result.
         */
        public static final String RESULT_EXTRA = "RESULT_EXTRA";
    }

    private final HashMap<String, AsyncServiceTask> mTasks = new HashMap<String, AsyncServiceTask>();
    /**
     * Identifier for each supported provider.
     * Cannot use 0 as Bundle.getInt(key) returns 0 when the key does not exist.
     */
    public static class Providers
    {
        public static final int LOATIONS_PROVIDER = 1;
    }

    private IProvider GetProvider(int providerId)
    {
        switch(providerId)
        {
        case Providers.LOATIONS_PROVIDER:
            return new LocationsProvider(this);
        }
        return null;
    }

    /**
     * Builds a string identifier for this method call.
     * The identifier will contain data about:
     *   What processor was the method called on
     *   What method was called
     *   What parameters were passed
     * This should be enough data to identify a task to detect if a similar task is already running.
     */
    private String getTaskIdentifier(Bundle extras)
    {
        String[] keys = extras.keySet().toArray(new String[0]);
        java.util.Arrays.sort(keys);
        StringBuilder identifier = new StringBuilder();

        for (int keyIndex = 0; keyIndex < keys.length; keyIndex++)
        {
            String key = keys[keyIndex];

            // The result action may be different for each call.
            if (key.equals(Extras.RESULT_ACTION_EXTRA))
            {
                continue;
            }

            identifier.append("{");
            identifier.append(key);
            identifier.append(":");
            identifier.append(extras.get(key).toString());
            identifier.append("}");
        }

        return identifier.toString();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        // This must be synchronised so that service is not stopped while a new task is being added.
        synchronized (mTasks)
        {
            // stopSelf will be called later and if a new task is being added we do not want to stop the service.
            lastStartId = startId;

            Bundle extras = intent.getExtras();

            String taskIdentifier = getTaskIdentifier(extras);

            Log.i("ProcessorService", "starting " + taskIdentifier);

            // If a similar task is already running then lets use that task.
            AsyncServiceTask task = mTasks.get(taskIdentifier);

            if (task == null)
            {
                task = new AsyncServiceTask(taskIdentifier, extras);

                mTasks.put(taskIdentifier, task);

                // AsyncTasks are by default only run in serial (depending on the android version)
                // see android documentation for AsyncTask.execute()
                task.execute((Void[]) null);
            }

            // Add this Result Action to the task so that the calling activity can be notified when the task is complete.
            String resultAction = extras.getString(Extras.RESULT_ACTION_EXTRA);
            if (resultAction != "")
            {
                task.addResultAction(extras.getString(Extras.RESULT_ACTION_EXTRA));
            }
        }

        return START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent)
    {
        return null;
    }

    public class AsyncServiceTask extends AsyncTask<Void, Void, Object>
    {
        private final Bundle mExtras;
        private final ArrayList<String> mResultActions = new ArrayList<String>();
        private final String mTaskIdentifier;

        /**
         * Constructor for AsyncServiceTask
         * 
         * @param taskIdentifier A string which describes the method being called.
         * @param extras         The Extras from the Intent which was used to start this method call.
         */
        public AsyncServiceTask(String taskIdentifier, Bundle extras)
        {
            mTaskIdentifier = taskIdentifier;
            mExtras = extras;
        }

        public void addResultAction(String resultAction)
        {
            if (!mResultActions.contains(resultAction))
            {
                mResultActions.add(resultAction);
            }
        }

        @Override
        protected Object doInBackground(Void... params)
        {
            Log.i("ProcessorService", "working " + mTaskIdentifier);
            Object result = false;
            final int providerId = mExtras.getInt(Extras.PROVIDER_EXTRA);
            final int methodId = mExtras.getInt(Extras.METHOD_EXTRA);

            if (providerId != 0 && methodId != 0)
            {
                final IProvider provider = GetProvider(providerId);

                if (provider != null)
                {
                    try
                    {
                        result = provider.RunTask(methodId, mExtras);
                    } catch (Exception e)
                    {
                        result = false;
                    }
                }

            }

            return result;
        }

        @Override
        protected void onPostExecute(Object result)
        {
            // This must be synchronised so that service is not stopped while a new task is being added.
            synchronized (mTasks)
            {
                Log.i("ProcessorService", "finishing " + mTaskIdentifier);
                // Notify the caller(s) that the method has finished executing
                for (int i = 0; i < mResultActions.size(); i++)
                {
                    Intent resultIntent = new Intent(mResultActions.get(i));

                    //What to do here
                    resultIntent.put(Extras.RESULT_EXTRA, true);
                    //What to do here ends.

                    resultIntent.putExtras(mExtras);
                    resultIntent.setPackage(mContext.getPackageName());
                    mContext.sendBroadcast(resultIntent);
                }

                // The task is complete so remove it from the running tasks list
                mTasks.remove(mTaskIdentifier);

                // If there are no other executing methods then stop the service
                if (mTasks.size() < 1)
                {
                    stopSelf(lastStartId);
                }
            }
        }
    }
} 
```

现在，如果您浏览到包含 AsyncService 的代码，然后将`resultIntent.put(Extras.RESULT_EXTRA, true);`

现在我应该如何将数据传递回意图。我听说 Serializable 不好，而 Parceable 是丑陋的代码。我还能用什么。其次，我在哪里添加 SQL 缓存检索代码。如何将此代码添加到框架中。希望我说得通。

# entity-framework - ObjectStateEntry 的状态为“已添加”，而相应的实体为“未更改”？

> ID：13625151
> 
> 赞同：0
> 
> 时间：2012-11-29T11:48:32.157
> 
> 标签：entity-framework, entity-framework-4.3

我们使用 EF5 进行用户管理，并在 和 之间建立简单的一对多关系`Users`，`Partners`而这两个类都是自跟踪实体类。

![用户伙伴关系](../Images/a6d137cf4248a617a4619b15bd81ada8.png)

在向数据库添加新用户时，我们创建一个新用户实体并检查合作伙伴实体是否已存在于数据库中并相应地设置合作伙伴。

```
var user = new User {
   Partner = userRepository.FirstOrDefault(e => e.PartnerCode == partnerCode) }; 
```

现在，当我们执行时，`SaveChanges`我们面临的问题是`ObjectStateManager`返回一个属性设置`ObjectStateEntry`为的`Partner`实例：`State``Added`

![对象状态条目](../Images/d07e7e9c3d7a06ca696fcf982666861e.png)

不清楚为什么这个状态设置为`Added`，因为如果我们只是按照对象的`Entity`属性`ObjectStateEntry`导航到原始实体，我们会看到它仍然具有状态`Unchanged`：

![在此处输入图像描述](../Images/d3971d2391b38ad5fea831c9a2374017.png)

这会导致合作伙伴实体被写入数据库的问题，即使它已经存在也非常烦人。

这里有什么可能是错误的建议吗？

# selenium-webdriver - 无法将 VM 上的 selenium webdriver 节点注册到主机上的集线器

> ID：13625153
> 
> 赞同：5
> 
> 时间：2012-11-29T11:48:36.647
> 
> 标签：selenium-webdriver, selenium-grid

我有一个 IP 主机`192.168.3.146`。此 IP 是 DHCP 服务器提供的静态 IP。现在我将网络配置为桥接的虚拟机。

我将 IP 视为`10.0.2.15`. 既然它是桥接的，我是否也应该在`192.168.3.x`分配给 VM 的范围内获得任何东西？

当我从这个 VM 注册到主机时，我无法注册 Web 驱动程序，它只是说“正在注册”，并且在我杀死它之前什么都不做。

用于注册节点的命令：

`java -jar selenium-server-standalone-2.26.0.jar -role web driver -hub http:/192.168.3.146:4444/grid/register -port 5558 -host 10.0.2.15 -browser "browserName=firefox, version=6, platform=WINDOWS"`

也试过：

`java -jar selenium-server-standalone-2.26.0.jar -role node -port 5558 -hub http:/192.168.3.146:4444/grid/register`

注意：这两个命令`http:/`都是故意的 - 请忽略它。我实际上正在使用`//`，因为我在发布时遇到错误，我使用过：/

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-22T15:11:22.417

获得此设置的最简单方法是使用 NAT 网络和本地端口转发。这种设置的好处是您可以离线运行所有内容，而不是依赖不断变化的动态 IP 地址。这是你如何做到的：

将 Guest VM 配置为使用 NAT 网络，为端口 4444 和 5555 添加端口转发规则。

**主机，作为集线器**

```
java -jar selenium-server-standalone.jar -role hub -port 4444 
```

**来宾机器，作为节点**

```
java -jar selenium-server-standalone.jar -role node -host 127.0.0.1 -port 5555 -hub http://10.0.2.2:4444/grid/register 
```

我使用此设置在 VirtualBox 中运行modern.ie VM 机器的多个实例，并且运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:59:21.083

我在尝试通过虚拟机从主机远程运行时遇到了同样的问题。我使用了 Oracle VM Virtual Box。

由于 VM 被分配了 2 个不同的 IP，一个通过 NAT 分配，另一个通过桥适配器分配......因此 Selenium 节点无法向 Selenium HUB 注册自身，因为默认情况下它注册 NAT。

***断开/禁用分配了“10.0.2.15”IP 的 VM NAT N/W 适配器的 Internet。不要触摸网桥适配器设置...然后尝试注册节点...它可以工作。***

我建议通过 VM >> Settings>> Network Screen 连接 Bridge Adapter 请检查下面的链接...

[http://www.thegeekstuff.com/2012/03/virtualbox-guest-additions/](http://www.thegeekstuff.com/2012/03/virtualbox-guest-additions/) [https://blogs.oracle.com/fatbloke/entry/networking_in_virtualbox1](https://blogs.oracle.com/fatbloke/entry/networking_in_virtualbox1)

希望这会有所帮助......一切顺利:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:27:56.987

hmmmmm .... 简单地在远程机器上运行 selenium 服务器怎么样：

```
java -jar selenium-server-standalone-2.26.0.jar 
```

在您的例如 BaseTest.java （您有 webDriver 初始化的地方）中，您只需添加：

```
static WebDriver driver;

    private String loginBaseUrl;

    @BeforeClass
    public static void firefoxSetUp() throws MalformedURLException {

          DesiredCapabilities capability = DesiredCapabilities.firefox();

        driver = new RemoteWebDriver(new URL("http://192.168.4.52:4444/wd/hub"), capability);

        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
        driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);
        driver.manage().window().setSize(new Dimension(1920, 1080));
    }
    @Before
    public void homePageRefresh() throws IOException {
        driver.manage().deleteAllCookies();
        driver.get(propertyKeysLoader("login.base.url"));
    }

    @AfterClass
    public static void closeFirefox(){
        driver.quit();

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-29T01:57:10.013

我遇到过同样的问题。我为具有默认属性的虚拟机配置了 NAT 和“仅主机适配器”网络。我使用“仅主机适配器”的 IP 解决了它。

对我来说，NAT的IP是10.0.2.15（和你一样），“Host-only adapter”的IP是192.168.56.101。所以我用：

> java -jar selenium-server-standalone-2.26.0.jar -role webdriver -hub http:// `192.168.3.146`:4444/grid/register -port 5558 -host `192.168.56.101`-browser "browserName=firefox, version=6, platform=WINDOWS"

# javascript - 如何从不透明度暂停和恢复淡入淡出（）？

> ID：13625154
> 
> 赞同：0
> 
> 时间：2012-11-29T11:48:38.747
> 
> 标签：javascript, jquery, opacity, fadein, resume

我正在尝试从暂停的不透明度恢复fadeIn()。我有两个可拖动的。如果一个被丢弃（我称之为draggable_purple），一个紫色的div开始淡入。只有特定的不透明度。达到不透明度后，会出现另一个 div（浅蓝色），并带有一条消息以删除黄色可拖动对象。删除黄色可拖动对象后，我希望紫色 div 继续淡入。

这听起来有点牵强，请原谅我的代码，我试图将其缩小到在这种情况下唯一重要的元素。

在 JsFiddle 你会找到我的解决方案，但它不起作用。我的问题是；你将如何解决这个问题，为什么我自己的解决方案不起作用。提前感谢您的时间。

[**提琴手**](http://jsfiddle.net/Nr9d7/)

**jQuery**

```
$("#draggable_purple").draggable({
    revert: true
});

$("#draggable_yellow").draggable({
    revert: true
});

$("#orange").droppable({
    drop: function(event, ui) {
        if (ui.draggable.is('#draggable_purple')) {
            $(this).parent().find('#purple').fadeTo(1500, 0.5, onhold);

            $(this).droppable('destroy');
        }
    }
});

function onhold() {
    $(this).parent().find('#lightblue').show();
}

$('#lightblue').droppable({
    accept: '#draggable_yellow',
    drop: function(event, ui) {
        $(this).hide('fast'); $('#purple').css('opacity', 0.5).fadeIn(1500, 1.5);
    }
}); 
```

**HTML**

```
 <div id="orange">
         <div id="purple">
          </div>
        <div id="lightblue"> Drop the yellow div,
            to continue the fadeIn
          </div>
          </div>

 <div id="draggable_purple"> start purple fadeIn
          </div>
 <div id="draggable_yellow"> resume fadeIn
          </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:01:48.580

良好的稳定暂停/恢复非常棘手，但是 - 好消息 - 有一个 jQuery**[插件](http://tobia.github.com/Pause/)**可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:01:51.107

您正在使用`.fadeIn`黄色方法而不是`.fadeTo`（我不确定为什么您有`1.5`任何一种..我认为`1`会这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:01:58.100

改变这个：

```
$('#purple').css('opacity', 0.5).fadeIn(1500, 1.5); 
```

对此：

```
$('#purple').fadeTo(1500, 1); 
```

[这是更新的小提琴](http://jsfiddle.net/opoe/Nr9d7/)

* * *

**另一件事**，这一行：

```
$(this).parent().find('#purple').fadeTo(1500, 0.5, onhold); 
```

是没有意义的。你有`id`，它是*独一无二*的，不需要`parent`and `find`：

```
$('#purple').fadeTo(1500, 0.5, onhold); 
```

# php - PHP - 将html放在php标签之外的变量中

> ID：13625157
> 
> 赞同：-2
> 
> 时间：2012-11-29T11:48:48.903
> 
> 标签：php, html

我有问题，如何放置我的 html 内容，如下所示：

```
<?php
$html = 
?>
//in this space, i will place my html
<span></span>
<?php
; 
?>
// and i print it
<?php echo $html;?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:52:06.750

为什么不在 PHP 标记之间这样做呢？

```
<?php
  $html = '<span></span>';
  echo $html;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:51:40.960

据我了解，您可能想看看[heredoc](http://www.php.net/manual/de/language.types.string.php#language.types.string.syntax.heredoc)语法。但是，您的问题并不完全清楚。

```
<?php
$html = <<<EOT
<span></span>
<!-- You can place anything in here "without escaping" -->
EOT;
echo $html;
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T11:54:39.810

为此，您需要输出缓冲。

```
<?php
ob_start();
?>
<!-- your html code here -->
<span></span>
<?php
$html = ob_get_clean();
?> 
```

# c# - 锁定框架 3.5 和 4.0？

> ID：13625160
> 
> 赞同：1
> 
> 时间：2012-11-29T11:49:03.993
> 
> 标签：c#, .net, multithreading, .net-4.0, locking

[AFAIK](http://msdn.microsoft.com/en-us/library/vstudio/dd289498%28v=vs.100%29.aspx)，这两个版本之间存在差异`lock`。

框架 4 增加了一项检查监视器输入期间是否存在异常（如内存不足异常）

并且有一个`lockTaken`标志指示是否应该（在`finally`子句中）释放锁（由于`try`子句中的代码失败）。

就像是

```
bool lockTaken = false;
try
{
   Monitor.Enter (lockObj, ref lockTaken);
   ...
}
finally { if (lockTaken) Monitor.Exit (lockObj); } 
```

（非常类似于`using`代码（处置...））

**但是**通过反射器观看我看到完全不同的东西：

```
[SecuritySafeCritical]
public static void Enter(object obj, ref bool lockTaken)
{
    if (lockTaken)
    {
        throw new ArgumentException(Environment.GetResourceString("Argument_MustBeFalse"), "lockTaken");
    }
    ReliableEnter(obj, ref lockTaken);
} 
```

*最后尝试的模式在哪里？*

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:01:39.920

您应该查看使用`lock`语句而不是查看框架代码的反编译方法。因此，如果您尝试反编译以下方法：

```
object syncRoot = new object();
void Foo()
{
  lock(syncRoot) {}
} 
```

你会看到你所期望的：

```
void Foo()
{
  bool lockTaken;
  try
  {
    Monitor.Enter(syncRoot, out lockTaken);
  }
  finally
  {
    if (lockTaken)
        Monitor.Exit(syncRoot);
  }
} 
```

# ruby-on-rails - 高效的 ActiveRecord has_and_belongs_to_many 查询

> ID：13625171
> 
> 赞同：13
> 
> 时间：2012-11-29T11:49:19.080
> 
> 标签：ruby-on-rails, activerecord, has-and-belongs-to-many

我有具有 has_and_belongs_to_many 关系的 Page 和 Paragraph 模型。给定一个paragraph_id，我想获得所有匹配的页面。例如：

```
pages = Paragraph.find(paragraph_id).pages.all 
```

但是，这需要两个查询。它可以在一个查询中完成：

```
SELECT "pages".* FROM "pages" 
INNER JOIN "pages_paragraphs" ON "pages_paragraphs"."page_id" = "pages"."id" 
WHERE "pages_paragraphs"."paragraph_id" = 123 
```

但这可以在没有的情况下完成吗

*   使用 find_by_sql
*   无需修改 page_paragraphs 表（例如添加 id）。

更新：

我的页面模型如下所示：

```
class Page < ActiveRecord::Base
  has_and_belongs_to_many :paragraphs, uniq: true
end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-29T14:34:35.863

**使用 has_many :through 关系，您可以使用：**

```
pages = Page.joins(:pages_paragraphs).where(:pages_paragraphs => {:paragraph_id => 1}) 
```

在此处查看在联接表上*指定条件*：http : [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

如果要将页面和段落放在一起：

```
pages = Page.joins(:pages_paragraphs => :paragraph).includes(:pages_paragraphs => :paragraph).where(:pages_paragraphs => {:paragraph_id => 1}) 
```

**使用 has_and_belongs_to_many：**

```
pages = Page.joins("join pages_paragraphs on pages.id = pages_paragraphs.page_id").where(["pages_paragraphs.paragraph_id = ?", paragraph_id]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-13T06:19:04.677

你可以用`eager_load`这个

```
pages = Paragraph.eager_load(:pages).find(paragraph_id).pages 
```

我发现了一篇关于这类事情的文章： [Robert Pankowecki](http://blog.arkency.com/by/pankowecki/)[在 Rails 3 和 4 中进行急切加载（预加载）的 3 种](http://blog.arkency.com/2013/12/rails4-preloading/)方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:57:20.823

您可以`includes`为此使用：

`pages = Paragraph.includes(:pages).find(paragraph_id).pages`

# git-svn - Git svn 子树工作流程

> ID：13625172
> 
> 赞同：1
> 
> 时间：2012-11-29T11:49:22.273
> 
> 标签：git-svn, git-subtree, git-workflow

我有**项目 A**，其中包括**项目 B 的本地分支**。也就是说，项目 B 的潜在修改源包含在项目 A 的子树中。项目 A 使用 svn，项目 B 使用 git。

使用 git 作为项目 A 的本地副本，我想：

*   能够**将项目 B 的上游变更合并**到项目 A中。
*   能够**回馈项目 B**对项目 A 中包含的项目 B 的分叉的一些（不是全部）修改。
*   这样做的方式是将**干净的单个提交**（未压缩）发送到项目 A（通过 git-svn）和项目 B（通过 git）。

我一直在努力寻找一个混合 git-svn 和 git-subtree 功能的解决方案（git-submodule 是不可能的，因为我想要一个独特的源代码树）。但我找不到完美的解决方案。

# sql-server - SQL 服务器中的 Class.forName

> ID：13625173
> 
> 赞同：1
> 
> 时间：2012-11-29T11:49:23.623
> 
> 标签：sql-server, jdbc

我使用 SQL Server 2008 作为数据库。并使用**JDBC**，我以 Under 的身份访问数据库。

```
public class DBConn {
public static void main(String[] args) throws ClassNotFoundException, SQLException{

    Connection con =null;
    //Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
    con = DriverManager.getConnection("jdbc:sqlserver://BG4WS0552:1433;databaseName=DynamicsAx2009",
            "TESTUSER", "Sonata@123");
    Statement stmt = con.createStatement();
    String query = "SELECT * FROM custtable";
    DatabaseMetaData dmd = con.getMetaData();
    ResultSet rs = dmd.getColumns ("DynamicsAx2009", "%", "custtable", null) ;
    ResultSetMetaData rsmd = rs.getMetaData();
    int i = 1;
    while (rs.next()) {
        System.out.print(i++ + " COLUMN_NAME is " + rs.getString("COLUMN_NAME"));
        System.out.print(" TYPE:" + rs.getString("TYPE_NAME"));

        System.out.println("  DATA_TYPE is " + rs.getString("DATA_TYPE"));
    }
}} 
```

参见上面的代码，我已经注释掉了 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver")。即使我的程序运行良好。请在不注册驱动程序的情况下告诉我它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:48:52.623

由于 JDBC 4.0 驱动程序应该`java.sql.Driver`通过在`/META-INF/services/java.sql.Driver`. 将使用[java.util.ServiceLoader](http://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html)`DriverManager`自动加载和注册所有以这种方式声明自己的驱动程序。

这消除了使用`Class.forName()`（或系统属性`jdbc.drivers`）加载驱动程序的需要，只要驱动程序符合 JDBC 4.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:01:27.763

现代 JDBC 驱动程序不再需要 Class.forName 调用。如果这些安装正确，它们会自行注册（使用 jar 文件服务清单）。

但最好有代码，以防万一不起作用。

# sql - SQL查询返回两个表的报告

> ID：13625176
> 
> 赞同：4
> 
> 时间：2012-11-29T11:49:28.883
> 
> 标签：sql, sql-server-2008, tsql, pivot

我有两个表，`Answers`和`Users`，看起来像这样：

```
Answers (AnswerID, QuestionNumber, Answer, UserID)
Users (UserID, FirstName, LastName) 
```

我可以运行什么 SQL 查询来返回这样的报告：

![在此处输入图像描述](../Images/d035ebff00f7862bba0843173b8a2288.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:02:34.663

您可以使用该`PIVOT`函数来转换此数据。您将 (Firstname/Lastname) 作为标题似乎很不寻常，`Name`但如果这是您想要的，那么您可以使用以下内容：

```
select *
from
(
  select a.questionnumber,
    u.firstname +' '+ u.lastname as Name,
    a.answer
  from answers a
  left join users u
    on a.userid = u.userid
) src
pivot
(
  max(answer)
  for name in ([John Smith], [Bob Jones])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/666f1/1)

结果：

```
| QUESTIONNUMBER | JOHN SMITH | BOB JONES |
-------------------------------------------
|              1 |       blah |      test |
|              2 |      hsdfk |    (null) | 
```

我想你会想要`Question Numbers`作为标题，下面有答案：

```
select *
from
(
  select 'QuestionNumber'+cast(a.questionnumber as varchar(10)) questionnumber,
    u.firstname +' '+ u.lastname as Name,
    a.answer
  from answers a
  left join users u
    on a.userid = u.userid
) src
pivot
(
  max(answer)
  for questionnumber in ([QuestionNumber1], [QuestionNumber2])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/17f8e/10)

结果：

```
|       NAME | QUESTIONNUMBER1 | QUESTIONNUMBER2 |
--------------------------------------------------
|  Bob Jones |            test |          (null) |
| John Smith |            blah |           hsdfk | 
```

如果您有已知数量的要转换的项目，上述答案将非常有用。但是如果你有一个未知的数字，那么你可以`PIVOT`对数据使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('QuestionNumber'+cast(questionnumber as varchar(10))) 
                    from answers
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT Name, ' + @cols + ' from 
             (
              select ''QuestionNumber''+cast(a.questionnumber as varchar(10)) questionnumber,
                u.firstname +'' ''+ u.lastname as Name,
                a.answer
              from answers a
              left join users u
                on a.userid = u.userid
            ) x
            pivot 
            (
                max(answer)
                for questionnumber in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/666f1/7)

结果：

```
|       NAME | QUESTIONNUMBER1 | QUESTIONNUMBER2 |
--------------------------------------------------
|  Bob Jones |            test |          (null) |
| John Smith |            blah |           hsdfk | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:51:46.707

这称为交叉表查询 - 有大量关于如何生成它们的示例；例如：

[http://www.simple-talk.com/sql/t-sql-programming/creating-cross-tab-queries-and-pivot-tables-in-sql/](http://www.simple-talk.com/sql/t-sql-programming/creating-cross-tab-queries-and-pivot-tables-in-sql/)

**编辑**

@Bluefleet 使用 pivot 可能是最好的答案；使用简单的交叉表可能需要您提前了解数据形状的某些方面，因此列本质上是硬编码的 - 如果列是稳定的集合，那么以下应该可以工作：

```
declare @Answers table (AnswerID int, QuestionNumber int , Answer int , UserID int)
declare @Users table (UserID int , FirstName varchar(10), LastName varchar(10))
declare @Questions table (QuestionNumber int, QuestionName varchar(10))

insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (1, 1, 10, 1)
insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (2, 2, 20, 1)
insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (3, 3, 30, 2)
insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (1, 1, 40, 2)
insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (2, 2, 50, 2)
insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (3, 3, 60, 3)
insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (1, 1, 70, 3)
insert into @Answers (AnswerID, QuestionNumber, Answer, UserID) values (2, 2, 80, 3)

insert into @Users (UserID, FirstName, LastName) values (1, 'Tom', 'Smith')
insert into @Users (UserID, FirstName, LastName) values (2, 'Dick', 'Brown')
insert into @Users (UserID, FirstName, LastName) values (3, 'Harry', 'Robinson')

insert into @Questions (QuestionNumber, QuestionName) values (1, 'Question 1')
insert into @Questions (QuestionNumber, QuestionName) values (2, 'Question 2')
insert into @Questions (QuestionNumber, QuestionName) values (3, 'Question 3')

select 
    QuestionName, MAX(User1) as 'Tom Smith', MAX(User2) as 'Dick Brown', MAX(User3) as 'Harry Robinson'
from 
(
select 
    q.QuestionName,
    (case when a.UserID=1 then Answer else null end) as 'User1',
    (case when a.UserID=2 then Answer else null end) as 'User2',
    (case when a.UserID=3 then Answer else null end) as 'User3'
from @Answers a
join @Users u on u.UserID = a.UserID
join @Questions q on q.QuestionNumber = a.QuestionNumber
) as combined
group by QuestionName

QuestionName Tom Smith   Dick Brown  Harry Robinson
------------ ----------- ----------- --------------
Question 1   10          40          70
Question 2   20          50          80
Question 3   NULL        30          60 
```

# wpf - VisualStateManager 不会跳过“非生成”转换

> ID：13625187
> 
> 赞同：0
> 
> 时间：2012-11-29T11:49:58.643
> 
> 标签：wpf, silverlight, xaml, transition, visualstatemanager

Blend / WPF / Silverlight 中的 VisualState 工具非常棒，但我认为我们都同意这有时会出现问题。这是一个示例，我想要一些澄清/解决方法/修复。

考虑一堆这样定义的视觉状态：

```
<VisualState x:Name="Hidden">
       <Storyboard>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                                <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="contentPresenter">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <CircleEase EasingMode="EaseOut"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="contentPresenter">
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <CircleEase EasingMode="EaseOut"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <CircleEase EasingMode="EaseOut"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Revealed">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="contentPresenter">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <CircleEase EasingMode="EaseOut"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="contentPresenter">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <CircleEase EasingMode="EaseOut"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <CircleEase EasingMode="EaseOut"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <CircleEase EasingMode="EaseOut"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState> 
```

现在创建一系列触发器来踢切换到这些状态，但选择**忽略转换**。

过渡仍在播放。似乎视觉状态管理器看到故事板具有多个连续关键帧并播放整个内容，而不是在不使用转换时跳过填充。

我想要的效果是 2 阶段隐藏/显示，其中*内容*淡出然后缩小。不幸的是，这意味着将始终播放状态“转换”，无论我决定忽略转换。

我是愚蠢还是这是一个错误？有解决方法吗？

编辑 - 在这种情况下使用急性缓动功能“延迟”过渡会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:52:27.393

在 VisualState 中声明的 Storyboard 是在 VSM*处于该状态*时播放的 Storyboard 。

您正在谈论忽略的转换是在从 VisualState*转换到 VisualState 时*播放的情节提要。这些在 VisualStateGroup.Transitions 部分中单独指定。

所以，像：

```
<VisualStateGroup x:Name="Something">
    <VisualState x:Name="Hidden">
    <VisualState x:Name="Revealed">

    <VisualStateGroup.Transitions>
        <VisualTransition From="Hidden" To="Revealed">
            <Storyboard>
                ...
            <Storyboard>
        </VisualTransition>
        <VisualTransition From="Revealed" To="Hidden">
            <Storyboard>
                ...
            <Storyboard>
        </VisualTransition>
    </VisualStateGroup.Transitions>
</VisualStateGroup> 
```

并在情节提要中填写适当的动画。

在此之后，当您将 false 传递给 VisualStateManager 的 GoToState 或 GoToElementState 方法的 useTransitions 参数时，您将看不到转换。

# android - 如何故意使我的phonegap应用程序崩溃？

> ID：13625190
> 
> 赞同：1
> 
> 时间：2012-11-29T11:50:04.880
> 
> 标签：android, cordova

我想为我的应用程序添加从崩溃中重新启动的功能。所以，我需要模拟崩溃中止。这应该很容易，但我不能让它自己崩溃。

这是一个 phonegap 应用程序，最好的会从 html 中的 javascript 崩溃。但无论我尝试过，应用程序都不会崩溃，应用程序只是挂在那里，没有响应任何点击。我试图在 java phonegap 插件中编写一些代码，但是，我也不能让它崩溃。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:08:15.563

尝试这样的事情：

```
Object obj=null;
obj.toString(); 
```

这应该会导致 NullPointerException。当您没有在任何地方捕获它时，您应该能够测试您的恢复功能。但是请考虑从您的用户那里获取错误报告的可能性——在其他地方，您将永远无法修复仅在其他人的设备上发生的丑陋错误。

# php - 通过与另一个规则合并来强制在 htaccess 中使用 www

> ID：13625191
> 
> 赞同：0
> 
> 时间：2012-11-29T11:50:07.340
> 
> 标签：php, apache, .htaccess, fuelphp

我正在尝试使用 htaccess 文件中的 RewriteRule 在我的网站上强制 www 。

我正在使用 FuelPHP，我必须在 htaccess 文件中有以下重写规则，但我发现强制 www 的方法在我当前的设置中效果不佳。

当前的 htaccess 代码

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?/$1 [L] 
```

我在这里找到的强制 www 的代码

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

如何结合这些以启用强制 www 并且在 htacess 文件中仍然有其他规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:58:25.707

尝试使用这个：

```
RewriteEngine on
RewriteBase /

# Redirect to wwww
RewriteCond %{HTTP_HOST} !^www\.yourdomain\.com
RewriteRule (.*) http://www.yourdomain.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:28:54.653

FuelPHP 在公用文件夹中带有一个 .htaccess 文件，其中包含针对这种情况的重写示例。

# c# - 如何仅用鼠标左键选择 ListViewItem？

> ID：13625192
> 
> 赞同：1
> 
> 时间：2012-11-29T11:50:11.337
> 
> 标签：c#, winforms, listview

如何防止右键单击在单击和双击时选择列表视图中的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:15:01.877

您可以使用此代码，我认为它应该可以完成工作。如果 SelectedIndexChanged 事件处理程序因右键单击而触发，则您需要设置一些`bool`变量以指示已在您的`MouseDown`, 然后选择的项目中单击鼠标右键，然后在事件上重置指示器。检查代码：`Clear``MouseUp`

```
bool rightClicked = false;
private void listView1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
    {
        rightClicked = true;
    }
    else
    {
        rightClicked = false;
    }
}
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (rightClicked)
    {
        listView1.SelectedItems.Clear();
    }

}

private void listView1_MouseUp(object sender, MouseEventArgs e)
{
    rightClicked = false;
} 
```

**编辑：**这是我能做的最好的，它保留了选择但闪烁。该解决方案可以使用项目的一些自定义绘图来实现，但这需要太多时间。我把它留给你。

```
bool rightClicked = false;
int [] lviListIndex = null;
private void listView1_MouseDown(object sender, MouseEventArgs e)
{
      if (e.Button == System.Windows.Forms.MouseButtons.Right)
      {
            rightClicked = true;
            lviListIndex = new int[listView1.SelectedItems.Count];
            listView1.SelectedIndices.CopyTo(lviListIndex, 0);
      }
      else
      {
            rightClicked = false;
      }
}
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
      if (rightClicked)
      {
            listView1.SelectedIndices.Clear();   
      }
}

private void listView1_MouseUp(object sender, MouseEventArgs e)
{
      if (rightClicked)
      {
            listView1.SelectedIndexChanged -= new System.EventHandler(listView1_SelectedIndexChanged);
            if (lviListIndex != null)
            {
                 foreach (int index in lviListIndex)
                 {
                      listView1.SelectedIndices.Add(index);
                 }
            }
            lviListIndex = null;
            listView1.SelectedIndexChanged += new System.EventHandler(listView1_SelectedIndexChanged);
      }
      rightClicked = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T22:17:51.543

子类化列表视图并添加此覆盖：

```
protected override void WndProc(ref Message m)
        {
            const int WM_RBUTTONUP = 0x0205;
            const int WM_RBUTTONDOWN = 0x0204;

            if ((m.Msg != WM_RBUTTONDOWN) && (m.Msg != WM_RBUTTONUP))
            {
                base.WndProc(ref m);
            }
        } 
```

这通过忽略来自鼠标右键的消息来工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T11:54:54.727

你可以这样检查 `if (e.Button == MouseButtons.Left)`

# ios - UIBarButtonItem 仅在我滑动时被调用

> ID：13625194
> 
> 赞同：0
> 
> 时间：2012-11-29T11:50:23.727
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uinavigationbar, uibarbuttonitem

我正在使用导航栏顶部的 BarButtonItem。我已经为 BarButtonItem 分配了一个 doneMethod。当我按下按钮时它没有被检测到，但是如果我尝试在 BarButtonItem 顶部进行一些滑动，它正在调用 doneMethod。这对我来说真的很奇怪。谁能告诉我为什么？ ![在此处输入图像描述](../Images/baf6e7e47b0e36528972d5b1111a7bef.png)

这是我的示例应用程序的屏幕截图。在 .h 文件中，我将方法编写为

```
- (IBAction) doneButtonPressed:(id)sender; 
```

以及 .m 中的相应实现

```
- (IBAction) doneButtonPressed:(id)sender{
   NSLog(@"Done Button Pressed");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:08:10.460

看起来您在 Interface Builder 中连接了它，因此请确保您已使用“Touch Up Inside”事件。听起来您可能无意中使用了“Touch Drag Inside”。

# c# - 我如何使用带有图标的 jquery datepicker 文本框

> ID：13625203
> 
> 赞同：1
> 
> 时间：2012-11-29T11:50:52.577
> 
> 标签：c#, javascript, jquery, asp.net, datepicker

我想在我的 asp.net 应用程序中使用 jquery datepicker 但它不起作用

在我的项目中是带有 Calender.ico 的文件夹（图像）

这是我在master.master中的代码：

```
 <script>

        $(function () {
            $("#txtVon").datepicker({
                showOn: 'button',
                buttonImage: '/images/Calender.ico', 
                buttonImageOnly: true,
                dateFormat: "mm-dd-yy"
            });
        });

       </script> 
```

这是我在 createuser.aspx 中的代码

```
<asp:TextBox ID="txtVon" runat="server" ReadOnly="True" ></asp:TextBox> 
```

我怎么弄错了？我没有看到图标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:33:22.020

如果您希望 datepicker 在图标单击时也可见？这是我所做的：

```
<input id='invdate' name='invdate' type='text'/>
<span style='padding:5px'><img id='dpimage' alt="img" src='calendar2.gif'></span>

$(function() {
  $("#invdate").datepicker();
  $("#dpimage").click(function () {
    $("#invdate").datepicker("show")
  });
}); 
```

[**演示**](http://jsfiddle.net/a3Jfq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:56:47.067

我认为这是您的文本框的 ID。您编写**txtVon**，但 ASP.NET 呈现不同的东西。因此，客户端 ID 更可能是**C001_txtVon**之类的东西。

所以最好给你的文本框一个像**cDatePicker**这样的 CssClass并在你的 jQuery 选择器中使用它。

或者让你的 ID 选择器更加模糊，比如`$("input[id*='txtVon']").datepicker({});`

最后一点；您最好使用 .png 文件而不是 .ico，因为我认为并非所有浏览器都正确支持 .ico。

[http://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support](http://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:53:44.443

而不是这个

```
'/images/Calender.ico 
```

放置一个非 ico 图像，例如：calender.gif..something like that

# ios - 游戏中心登录问题

> ID：13625209
> 
> 赞同：0
> 
> 时间：2012-11-29T11:51:11.910
> 
> 标签：ios, ios6, game-center, gamekit

我对 Game Center 有一个奇怪的问题，希望有人能帮助我。我的预期行为是这个。我在 iOS 6 和调试中：

- 当我启动应用程序时，我使用 GameCenter 登录，但如果用户未登录，我不显示界面，我的想法是如果它已登录到 GC 很好但如果他不是我不在乎

- 在应用程序内部之后，如果他想访问与此相关的功能，我有一个登录 gameCenter 的按钮

问题来了，当我使用从未使用过我的游戏的设备尝试应用程序时，即使他已登录到 gameCenter，用户也未经过身份验证，如果他从我的按钮使用界面登录，他将在下一次执行时登录无需交互即可开始

奇怪的是，在完成处理程序中，`NSError* error`参数为 nul 但本地`localPlayer.isAuthenticated`为 false

这怎么可能？有人发现这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:33:11.533

您是否创建了沙盒帐户？您必须为测试创建一个沙盒帐户。如果您提供身份验证代码，我可以提供更多帮助

# jquery - jQuery - 使用缓动插件调整图像效果

> ID：13625210
> 
> 赞同：1
> 
> 时间：2012-11-29T11:51:17.533
> 
> 标签：jquery, image, resize, easing

我希望模拟[http://www.templatemonster.com/flash-templates/27545.html](http://www.templatemonster.com/flash-templates/27545.html)上的效果（当您尝试将鼠标悬停在缩略图上时）。

我正在使用 jQuery 和缓动插件，这就是我到目前为止所拥有的：http: [//jsfiddle.net/RtYMV/](http://jsfiddle.net/RtYMV/)

JS：

```
$(document).ready(function() {
    $('.line a').hover(
        function() {
            $(this).find('img').stop().animate({
                width: '88px',
                height: '88px',
                top: '6px',
                left: '6px',
                easing: 'easeInBounce'}, 111);
        },
        function() {
            $(this).find('img').stop().animate({
                width: '100px',
                height: '100px',
                top: '0',
                left: '0',
                easing: 'easeOutBounce'}, 111);
    });
}); 
```

但显然我在运行缓动插件时遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:16:56.087

该[`.animate()`](http://api.jquery.com/animate/)函数可以接收每个选项的单独参数或两个对象映射参数，第一个用于指示 css 属性，第二个用于指示其余属性，因此，您的代码应如下所示：

```
$(document).ready(function() {
    $('.line a').hover(
        function() {
            $(this).find('img').stop().animate({
                width: '88px',
                height: '88px',
                top: '6px',
                left: '6px'},
                {easing: 'easeInBounce',duration: 111});
        },
        function() {
            $(this).find('img').stop().animate({
                width: '100px',
                height: '100px',
                top: '0',
                left: '0'},
                {easing: 'easeOutBounce',duration: 111});
    });
}); 
```

此外，您没有在 jsfiddle 中包含 jquery easing 插件（在侧边栏的“管理资源”部分执行）。

查看工作[**演示**](http://jsfiddle.net/gnel/RtYMV/3/)

# svg - 如何识别代码是由 Raphael 生成还是由 D3 库生成

> ID：13625213
> 
> 赞同：-1
> 
> 时间：2012-11-29T11:51:23.403
> 
> 标签：svg

我正在使用 D3 和 Raphael 两个库来创建图形。

现在，我怎么知道哪些代码来自 Raphael，哪些来自 D3？

假设我根据需要自定义了所有代码，有什么方法可以知道使用 javaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:21:35.250

拉斐尔设置`style="webkit-tap-highlight-color: rgba(0,0,0,0)"`了它创建的所有元素，所以你可以...

```
function isRaphael(element) {
  if (!element || !element.getAttribute("style")) return null;
  return element.getAttribute("style").indexOf("webkit-tap-highlight-color") != -1;
} 
```

# ant - Ant：使用外部编译器并行构建

> ID：13625216
> 
> 赞同：2
> 
> 时间：2012-11-29T11:51:33.617
> 
> 标签：ant, build, parallel-processing, dependencies

我需要一些关于蚂蚁的帮助。我怎样才能让 ant 表现得与 ant 相似`make -j <n>`？请注意，我不是在构建 java，而是为专有语言调用外部编译器。

虽然有任务`<parallel>`（以及 的类似属性`<for>`），但它们似乎不支持依赖关系，或者更确切地说，我还没有找到一种方法来应用依赖关系。

但是，我在属性文件中确实有可用的依赖项，格式如下：

```
fileA=fileB fileC 
fileB=fileC 
```

fileA/B/C 是我的目标文件的基本名称。

目前有大约 850 个文件要构建。使用`<for>`I 遍历此列表（通过消除依赖关系正确排序）来调用编译器。我已经被建议使用`<sequential>`，但这意味着将依赖项转换成块，`<sequential>`这有点糟糕。

关于如何使`<for ... parallel="yes">`循环尊重依赖关系的任何想法，或者关于如何解决这个问题的任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:47:52.617

我认为本机 Ant 中没有任何东西可以做到这一点，但这个示例是 Groovy 的[GPars](http://www.gpars.org/0.12/guide/guide/7.%20Dataflow%20Concurrency.html)支持的“数据流并发”模型的绝对理想用例，因此您可以使用脚本任务执行某些操作：

```
<project name="gpars-test">
  <path id="groovy.path">
    <pathelement location="groovy-all-1.8.8.jar" />
    <pathelement location="gpars-0.12.jar" />
  </path>

  <!-- Target to build one file - expects a property "filetobuild"
       containing the name of the file to build -->
  <target name="buildOneFile">
    <echo>Imagine I just built ${filetobuild}...</echo>
  </target>

  <target name="main">
    <script language="groovy" classpathref="groovy.path"><![CDATA[
      import static groovyx.gpars.dataflow.Dataflow.task
      import groovyx.gpars.dataflow.Dataflows

      // load dependencies
      def deps = new Properties()
      new File(basedir, 'dependencies.properties').withInputStream {
        deps.load(it)
      }

      def df = new Dataflows()
      // spawn one "task" per file to be compiled
      deps.each { file, dependencies ->
        task {
          if(dependencies) {
            // wait for dependencies - reading df.something will suspend
            // this task until another task has written the same variable
            dependencies.split(/ /).each { dep ->
              def dummy = df."${dep}"
            }
          }

          // now we know all our dependencies are done, call out to build
          // this one.    
          def compiler = project.createTask('antcall')
          compiler.target = "buildOneFile"
          def prop = compiler.createParam()
          prop.name = "filetobuild"
          prop.value = file
          try {
              compiler.perform()
          } catch(Exception e) {
              // do something
          } finally {
              // we're done - this will release any other tasks that are blocked
              // depending on us
              df."${file}" = "done"
          }
        }
      }

      // now wait for all tasks to complete
      deps.each { file, dependencies ->
        def dummy = df."${file}"
      }
      println "finished"
    ]]></script>
  </target>
</project> 
```

请注意，这确实假设您要构建的*所有文件都列在依赖项文件中，包括那些没有依赖项的文件，即*

```
fileA=fileB fileC 
fileB=fileC
fileC= 
```

如果 no-deps 文件名未在属性中列出，那么您将不得不做更多的摆弄才能将它们放在那里 - 就在`def df = new Dataflows()`您需要添加一些内容之前

```
deps.values().collect().each { depString ->
  depString.split(/ /).each {
    // if we find a fileX that something depends on but which does not
    // itself appear in the deps map, assume it has no dependencies
    if(!deps.containsKey(it)) {
      deps.setProperty(it, "")
    }
  }
} 
```

# .net - .NET StructureMap IOC 请求实例并传递参数

> ID：13625233
> 
> 赞同：0
> 
> 时间：2012-11-29T11:52:26.360
> 
> 标签：.net, arguments, structuremap

我试图向 StructureMap 请求一个实例并立即传递参数，以配置实例（使用我传递的参数），但我不知道该怎么做！

这是代码，很容易理解我想要做什么。

```
class MyRegistry : Registry {

public MyRegistry() {

    // Use a new Connection for each instance
    For<ISQLRepositoryCommands>().Use(x => new SQLRepositoryCommands(DatabaseConnections.NewSqlConnection()));

    // WHAT I Want to do is.. remove the line above of code and let only this.
    For<ISQLRepositoryCommands>()
    .Use(x => {
        if( x.arguments != null ) {
            // Specific connection passed by parameter
            return new SQLRepositoryCommands( (SqlConnection) x.arguments[0]);
        }       
        // default connection
        return new SQLRepositoryCommands(DatabaseConnections.NewSqlConnection());
    }); 
} 
```

}

主要的

```
public static class StartUseStructureMap {
public static void Main() {
    // SQLRepositoryCommands with default connection associated
    var def = ObjectFactory.GetInstance<ISQLRepositoryCommands>();

    // SQLRepositoryCommands with custom connection associated
    var personalizedConnection = new SqlConnection("cstring");
    var personalized = ObjectFactory.GetInstance<ISQLRepositoryCommands>(new Arguments[] { new Argument(personalizedConnection) };
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:22:46.363

这个伪代码只是我的想法，也许有更好的方法来实现它。但这是我会做的。

您可以使用的一件事是工厂模式，但为此您需要稍微调整您的代码。但在我们进行这一步之前，我们必须摆脱直接使用`SqlConnection`您的注册码。尽管 StructureMap 不需要显式注册所有对象，但我们可以做一个包装器，我们可以在 StructureMap 中注册，并且每次创建 SqlConnection 时都会调用它。这样，我们就可以将创建的 SqlConnection 逻辑放在那里，这取决于连接字符串（是否为空）。这是它的样子：

```
public interface ISQLConnectionWrapper
{
      SqlConnection GetConnection(string connectionName);
}

public class SQLConnectionWrapper : ISQLConnectionWrapper
{
    public SqlConnection GetConnection(string connectionName)
    {
        if (string.IsNullOrWhiteSpace(connectionName))
            return DatabaseConnections.NewSqlConnection();
        return new SqlConnection(connectionName);
    }
} 
```

然后我们可以调整一个小的 SQLRepositoryCommands 类，以便在构造函数中使用一个构建器，该构建器将返回一个知道要创建哪个连接的包装器：

```
public class SQLRepositoryCommands : ISQLRepositoryCommands
{
    private readonly Func<string, ISQLConnectionWrapper> _aBuilder;
    public SQLRepositoryCommands(Func<string, ISQLConnectionWrapper> aBuilder)
    {
        // guard clause first of course.
        _aBuilder = aBuilder;
    }

    public void DoWork(string connectionName = null)
    {
        var connection = _aBuilder(connectionName);
    }
} 
```

我添加了 DoWork 方法，该方法实际上使用构建器来获得正确的连接并完成工作。

那么这里是你如何注册它：

```
// register
ObjectFactory.Initialize( c =>
    {
              c.For<ISQLConnectionWrapper>().Use<SQLConnectionWrapper>();
              c.For<Func<string, SqlConnection>>().Use(d => (s => ObjectFactory.GetInstance<ISQLConnectionWrapper>().GetConnection(s)));
        c.For<ISQLRepositoryCommands>().Use<SQLRepositoryCommands>();
    }); 
```

这里是你如何使用它：

```
// use
var command = ObjectFactory.GetInstance<ISQLRepositoryCommands>();
command.DoWork("MyConnection"); // specific connection
command.DoWork(); // default connection 
```

就像我说的。也许有更好的方法可以做到这一点，但这段代码应该可以工作。

# javascript - 使用 iframe 嵌入 Youtube 视频会给出“不安全的 JavaScript 尝试......”

> ID：13625239
> 
> 赞同：12
> 
> 时间：2012-11-29T11:52:50.933
> 
> 标签：javascript, iframe, youtube, youtube-iframe-api

我正在尝试使用以下代码嵌入 YouTube 视频：

```
<iframe width="425" height="319" frameborder="0" wmode="Opaque"allowfullscreen=""
      src="http://www.youtube.com/embed/8vJwFvFi4ZY?wmode=transparent">
</iframe> 
```

虽然它工作正常，但它在控制台中给出了这个错误：

> Chrome 版本 22.0.1229.94：
> 
> > 不安全的 JavaScript 尝试从 URL [http://www.youtube.com/embed/8vJwFvFi4ZY?wmode=transparent的框架访问具有 URL](http://www.youtube.com/embed/8vJwFvFi4ZY?wmode=transparent) [http://example.com/](http://example.com/)
> > 的框架。 域、协议和端口必须匹配。
> 
> 火狐 17.0 版：
> 
> > 错误：访问属性“toString”的权限被拒绝

我四处搜索，但我发现这可能是 YouTube 的问题，他们应该解决它，

**问题是**：我怎样才能摆脱这个错误？（无论如何，甚至通过压制它。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T14:28:35.683

你无法阻止它，至少我所知道的任何方式都无法阻止（我已经尝试了很多）。iframe 目标中有一个脚本试图访问您的文档，可能正在寻找它可以调用以启用 API 的全局函数。

另一件事是，即使使用他们自己的[iframe API](https://developers.google.com/youtube/iframe_api_reference) ，错误仍然存​​在：http : [//jsbin.com/izabed/1/edit](http://jsbin.com/izabed/1/edit)

这没有什么害处，您的视频可以正常工作。但如果你在控制台中运行它，它看起来有点大胆。他们可能应该将此作为参数包含在内，起初我认为这是`origin`参数的想法，但它没有任何区别。

还值得注意的是，他们自己的[演示](https://developers.google.com/youtube/youtube_player_demo)显示相同的错误（和其他错误）。此外，如果您使用`embed`标签而不是 iframe，它不会显示任何错误。

所以你可以做这样的事情来防止大多数桌面浏览器中的错误：

```
if(haveflash) {
    // use <embed>
} else {
    // use iframe
} 
```

## 更新

大多数浏览器不再支持 Flash，[Adobe 也不](https://theblog.adobe.com/adobe-flash-update/)支持。不幸的是，这意味着使用`<embed>`不再是一个可行的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:23:49.017

将讨论从评论转移到这个答案。简而言之，问题是不允许跨域 JS 对象访问，在您的情况下，youtube.com 上的脚本正试图对父页面执行此操作。

如果您只想显示 youtube 视频，则可以改用`<embed>`标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-20T08:00:11.183

只需添加`?html5=1`以防止此错误。（切换到 HTML5 播放器）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:03:05.817

它是什么浏览器？当我尝试在此页面中使用 Firefox 中的 JavaScript 附加 iframe 时，不会出现错误/警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-28T02:44:35.097

既然只能使用 CSS，为什么还要使用 Javascript？它每次都有效。您甚至可以将任何视频合并到响应式滑块中。

或者只是访问：[http ://embedresponsively.com/](http://embedresponsively.com/)

```
<style>
.embed-container 
{ 
position: relative; 
padding-bottom: 56.25%; 
height: 0; 
overflow: hidden; 
max-width: 100%; 
} 

.embed-container iframe, .embed-container object, .embed-container embed 
{ 
position: absolute; 
top: 0; 
left: 0; 
width: 100%; 
height: 100%; 
}
</style>

<div class='embed-container'>

<iframe src='https://www.youtube.com/watch?v=tntOCGkgt98' frameborder='0' allowfullscreen>
</iframe>
</div> 
```

# c++ - 使用new和delete时交叉编译出错

> ID：13625245
> 
> 赞同：3
> 
> 时间：2012-11-29T11:53:02.893
> 
> 标签：c++, arm, cross-compiling

我想在 ChibiOS 上运行我的 C++ 代码，如果我用`new` `delete`C 函数 malloc 和 free 替换，我可以编译和链接代码。但我仍然想解决这个问题。当我使用时`new` `delete`，我收到以下错误：

```
no memory region specified for loadable section `.ARM.extab' 
```

这是链接脚本

```
 /*
 * BCM2835 memory setup.
 */
__und_stack_size__  = 0x0004;
__abt_stack_size__  = 0x0004;
__fiq_stack_size__  = 0x0010;
__irq_stack_size__  = 0x0080;
__svc_stack_size__  = 0x0004;
__sys_stack_size__  = 0x0400;
__stacks_total_size__   = __und_stack_size__ + __abt_stack_size__ + __fiq_stack_size__ + __irq_stack_size__ + __svc_stack_size__ + __sys_stack_size__;

MEMORY
{
     ram : org = 0x8000, len = 0x06000000 - 0x10021 
     extabram : org = 0x06008000 - 0x10020, len = 0x10000 - 0x20
}

__ram_start__       = ORIGIN(ram);
__ram_size__        = LENGTH(ram);
__ram_end__     = __ram_start__ + __ram_size__;

SECTIONS
{
    . = 0;

    .text : ALIGN(16) SUBALIGN(16)
    {
        _text = .;
        KEEP(*(vectors))
        *(.text)
        *(.text.*)
        *(.rodata)
        *(.rodata.*)
        *(.glue_7t)
        *(.glue_7)
        *(.gcc*)
        *(.ctors)
        *(.dtors)
    } > ram

    .ARM.extab : {*(.ARM.extab* .gnu.linkonce.armextab.*)} > extabram

    __exidx_start = .;
    .ARM.exidx : {*(.ARM.exidx* .gnu.linkonce.armexidx.*)} > ram
    __exidx_end = .;

    .eh_frame_hdr : {*(.eh_frame_hdr)}

    .eh_frame : ONLY_IF_RO {*(.eh_frame)}

    . = ALIGN(4);
    _etext = .;
    _textdata = _etext;

    .data :
    {
        _data = .;
        *(.data)
        . = ALIGN(4);
        *(.data.*)
        . = ALIGN(4);
        *(.ramtext)
        . = ALIGN(4);
        _edata = .;
    } > ram 

    .bss :
    {
        _bss_start = .;
        *(.bss)
        . = ALIGN(4);
        *(.bss.*)
        . = ALIGN(4);
        *(COMMON)
        . = ALIGN(4);
        _bss_end = .;
    } > ram    
}

PROVIDE(end = .);
_end = .;

__heap_base__              = _end;
__heap_end__               = __ram_end__ - __stacks_total_size__;
__main_thread_stack_base__ = __ram_end__ - __stacks_total_size__; 
```

链接描述文件中缺少什么？

* * *

**编辑** 在我跟随 Chris Desjardins 回答后，我收到以下错误：

```
 Linking build/ch.elf
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-abort.o): In function `abort':
    abort.c:(.text+0x10): undefined reference to `_exit'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-fstatr.o): In function `_fstat_r':
    fstatr.c:(.text+0x1c): undefined reference to `_fstat'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-sbrkr.o): In function `_sbrk_r':
    sbrkr.c:(.text+0x18): undefined reference to `_sbrk'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-signalr.o): In function `_kill_r':
    signalr.c:(.text+0x1c): undefined reference to `_kill'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-signalr.o): In function `_getpid_r':
    signalr.c:(.text+0x44): undefined reference to `_getpid'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-writer.o): In function `_write_r':
    writer.c:(.text+0x20): undefined reference to `_write'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-closer.o): In function `_close_r':
    closer.c:(.text+0x18): undefined reference to `_close'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-isattyr.o): In function `_isatty_r':
    isattyr.c:(.text+0x18): undefined reference to `_isatty'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-lseekr.o): In function `_lseek_r':
    lseekr.c:(.text+0x20): undefined reference to `_lseek'
    /home/robu/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/libc.a(lib_a-readr.o): In function `_read_r':
    readr.c:(.text+0x20): undefined reference to `_read'
    collect2: error: ld returned 1 exit status
    make: *** [build/ch.elf] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:17:41.797

似乎 ARM.extab 部分在内存中没有位置。在这个例子中，他们把它放在闪存中。

[http://hertaville.com/2012/06/29/a-sample-linker-script/](http://hertaville.com/2012/06/29/a-sample-linker-script/)

但是你应该可以只为它雕刻一些内存，如下所示：

```
MEMORY
{
    ram : org = 0x8000, len = 0x06000000 - 0x10021 
    extabram : org = 0x06008000 - 0x10020, len = 0x10000 - 0x20
} 
```

然后将 ARM.extab 部分放入新的 ram 区域：

```
.ARM.extab : {*(.ARM.extab* .gnu.linkonce.armextab.*)} > extabram 
```

您也可以尝试将其放入普通的 ram 部分...

```
.ARM.extab : {*(.ARM.extab* .gnu.linkonce.armextab.*)} > ram 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:09:36.440

.ARM.extab 部分在需要异常支持时创建。

`malloc`和之间的区别之一`new`是 new 不能返回 NULL：它必须在内存分配失败的情况下抛出异常。

[使用--force_new_nothrow](http://www.keil.com/support/man/docs/armccref/armccref_CIHEEGJF.htm)选项编译会有帮助吗？

# php - 将 CRE Loaded 6.2 pro 版本升级到更高版本？

> ID：13625247
> 
> 赞同：0
> 
> 时间：2012-11-29T11:53:08.313
> 
> 标签：php

这是否可以将 CRE Loaded PRO 6.2 版升级到更高版本？

如果是，那么升级的要求是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:52:37.287

是的，CRE Loaded 现在是 Loaded Commerce。有一个名为 6.5 (6.5.1b) 的新版本。您可以购买完整版或升级，它带有数据库转换器来导入您的数据。

6.2 的大多数模板也可以正常工作，有些需要关闭一些未使用的信息框（一个信息页）

在 www.loadedcommerce.com 上联系销售人员以获取信息或直接在该站点订购。

# java - 多个节点（网络上的计算机）支持的 Java（蛮力应用程序）

> ID：13625249
> 
> 赞同：0
> 
> 时间：2012-11-29T11:53:09.890
> 
> 标签：java, multithreading, networking, cluster-computing

好的，我认为问题很简单。这仅适用于大学测试。我想蛮力攻击一些密码（不复杂，只是为了通过蛮力找到给定的字符串）。它基本上是一个 loooong for 循环组合，可以在新线程中执行。有没有办法在同一网络上的计算机上分发该“线程”？使用多台计算机（例如在电子课程中 - 有 100 台计算机）只是为了支持它们的处理能力相同的 for 循环（线程）。并且所有解析都显示在程序启动的那台计算机上（某种主计算机或服务器计算机）。

在 Java 中可能有这样的事情吗？Windows 7 是操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:09:10.473

如果您想自己构建应用程序而不是使用框架，我建议您浏览 RMI Trail：请参阅[http://docs.oracle.com/javase/tutorial/rmi/](http://docs.oracle.com/javase/tutorial/rmi/)

前段时间我自己做了一个简单的分布式计算引擎，结果证明使用 RMI 很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:21:01.133

它非常简单。您需要有一台主/控制器计算机和几台工作计算机或从属计算机。master 将问题分解成块并将块分配给 slave。从站执行大量工作，并在完成后向主站报告。

最复杂的部分是让主/从相互交谈。一个相对简单的解决方案是使用套接字并发明一些简单的通信协议。

主算法看起来像；

```
break problem into chunks
while problem not solved {
  wait for socket comms from slave
  if slave is asking for a chunk of work
    allocate chunk to slave
  else if slave is reporting a chunk didn't contain the solution
    mark chunk as completed
    allocate chunk to slave
  else if slave is reporting a chunk did contain the solution
    problem is solved
} 
```

从属算法看起来像；

```
while problem not solved {
  ask master for a chunk of work
  process this chunk
  if chunk contains solution
    problem is solved
  report results back to master
} 
```

您需要使您的块大小足够大，以便奴隶将大部分时间用于解决问题而不是与主人交谈。从站与主站对话的频率可能会决定单个主站能够处理的从站数量。乍一看，我会说调整块的大小，以便从站需要 2 或 3 分钟来处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:05:01.593

感谢您的回答。我可以使用任何已经制作的东西，我不需要对那部分进行编码。问题是，没有多个小问题，所以我可以将它们分发到其他集群并等待他们解决它们......只有一个 LONG LOOP，一个 LONG FOR LOOP 我想使用多个处理能力加速同一本地网络中的计算机。

我认为这应该是一些连接 Java 虚拟机的工具，而不是我单独编写的软件。不知何故，这是我看到解决方案的唯一方法。

# jquery - 使用 jquery 隐藏 tr 和 td

> ID：13625250
> 
> 赞同：-4
> 
> 时间：2012-11-29T11:53:10.347
> 
> 标签：jquery

我想在点击标签时隐藏 tr 和一些 td，我制作了一个不隐藏最后一个 tr 的函数，现在我想隐藏 1、2、3 并且只有 4，我想显示 5、4a 和 4b。[小提琴](http://jsfiddle.net/hvFRY/)

```
<head>
<script type="text/javascript">
$(function(){
$('a').click(function(){
$('tr').not(':last').hide()
})
})
</script>
</head>
<body>
<table width="664" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>1</td>
</tr>
<tr>
<td>2</td>
</tr>
<tr>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>4a</td>
<td>4b</td>
</tr>
<tr>
<td>5</td>
</tr>
</table>
<a href="#">hide</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:56:50.493

```
$('tr').not(':last').find('td:first').hide() 
```

[http://jsfiddle.net/hvFRY/2/](http://jsfiddle.net/hvFRY/2/)

# sql - 如何通过sql选择第一个，最后一个，上一个和下一个

> ID：13625251
> 
> 赞同：2
> 
> 时间：2012-11-29T11:53:10.543
> 
> 标签：sql, sql-server

我正在尝试从 sql 语句创建记录的分页，我能够获得所有的下一条和上一条，但最后一条记录显示上一条记录为下一条，因为 sql 查询只返回 1 行而不是 2 行。我正在设置下一个基于第一个结果和先前作为第二个结果。

数据：

*   苹果
*   香蕉
*   葡萄
*   橙子

sql：

```
select * 
from (select top 1 fruit 
      FROM table 
      where fruit > 'Banana' 
      order by fruit asc) as x 

UNION ALL 

select * 
from (select top 1 fruit 
      FROM table 
      where fruit < 'Banana' order by fruit desc) as y 
```

结果：

```
fruit
--------
Grape
Apple 
```

这很好用！

对于第一条记录 - 我得到正确的结果，第一条记录是真实的。对于最后一条记录 - 我得到一个结果，它是获取上一条记录的第二个查询。但是我无法知道它的最后一条记录，所以它输出为 Next 而不是 Previous。

我如何确定这是最后一条记录，而返回的单行实际上是前一条？

或者

如何让查询为 Next 查询返回 NULL 行？所以我可以针对 NULL 结果进行测试？

奖励积分！

我怎样才能有一个查询可以给我第一条记录、最后一条记录以及下一条和上一条，这样我就可以启用循环分页了？如果在第一条记录上显示最后一条记录为上一条。如果在最后一条记录上显示下一条记录作为第一条记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:09:14.707

```
SELECT
  *
FROM
(
  SELECT
    MIN(fruit)   as first,
    MAX(fruit)   as previous
  FROM
    yourTable
  WHERE
    fruit < 'banana'
)
CROSS JOIN
(
  SELECT
    MIN(fruit)   as next,
    MAX(fruit)   as last
  FROM
    yourTable
  WHERE
    fruit > 'banana'
) 
```

或者，更短，但我不确定它会更高效......

```
SELECT
  MIN(CASE WHEN fruit < 'banana' THEN fruit END)   as first,
  MAX(CASE WHEN fruit < 'banana' THEN fruit END)   as previous,
  MIN(CASE WHEN fruit > 'banana' THEN fruit END)   as next,
  MAX(CASE WHEN fruit > 'banana' THEN fruit END)   as last
FROM
  yourTable 
```

或者，作为最后一个奇怪的选择......

```
SELECT
  (SELECT TOP 1 fruit FROM yourTable WHERE fruit < 'banana' ORDER by fruit ASC)  AS first,
  (SELECT TOP 1 fruit FROM yourTable WHERE fruit < 'banana' ORDER by fruit DESC) AS previous,
  (SELECT TOP 1 fruit FROM yourTable WHERE fruit > 'banana' ORDER by fruit ASC)  AS next,
  (SELECT TOP 1 fruit FROM yourTable WHERE fruit > 'banana' ORDER by fruit DESC) AS last 
```

*（如果您有数千条记录，这可能很有用，因为每条记录都可以快速且单独地搜索。）*

# html - Selenium，无法浏览和更新文件

> ID：13625253
> 
> 赞同：1
> 
> 时间：2012-11-29T11:53:15.817
> 
> 标签：html, selenium, selenium-rc, selenium-webdriver

我正在使用 selenium 进行自动化，我需要一个 html 代码来单击浏览窗口（标记为 1）并选择文件（callform.txt）并更新到源文件列表路径![下面是相同的图像](../Images/94ea4c0e0805cff15f1eaa079c0bb943.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:57:27.517

您可以使用 autoit。只需从给定链接下载 autoit 软件并安装即可。

[AutoIt网站](http://www.autoitscript.com/site/autoit/)

根据您的需要在 autoit 中编写几行脚本，并在导致该窗口出现的行之前调用已编译的 exe。

Autoit 窗口信息工具将帮助您识别所需控件的 ID 和类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:43:25.243

上传文件：

1.使用autoit工具-a。记录单击浏览按钮并选择文件的部分。湾。将 AutoIt 脚本转换为 .exe。C。使用下面的脚本

```
String[] commands = new String[]{};
commands = new String[]{"C:\\Documents and Settings\\axtst079\\Desktop\\Hari1.exe"}; //location of the autoit executable
Runtime.getRuntime().exec(commands); 
```

有关 Auto 的更多信息，请参阅 [http://automationtricks.blogspot.in/2010/09/how-to-upload-file-in-selenium.html](http://automationtricks.blogspot.in/2010/09/how-to-upload-file-in-selenium.html)

```
2\.            uploadElement.findElement(By.id("uploader_browse")).click();
                uploadElement.sendKeys("C:\\Pictures\\Sample Pictures\\someimage.jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:41:48.023

使用搜索文本框的 Xpath，试试这个

```
 <tr>
    <td>open</td>
    <td>http://www.pdfonline.com/convert-pdf/</td>
    <td></td>
  </tr>
  <tr>
   <td>assertTitle</td>
   <td>Online&nbsp;PDF&nbsp;Converter — Create&nbsp;PDF   &amp;&nbsp;Convert&nbsp;PDF&nbsp;to Word —Free!</td>
   <td></td>
  </tr>
  <tr>
    <td>type</td>
    <td>id=File1</td>
    <td>C:\Users\Downloads\xyz.doc</td>  // Path of file
   </tr> 
```

![这是硒脚本检查它是否有效](../Images/7cb4604c46e3e10142cdd315a5353203.png)

```
Check this Example, let me know 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T07:10:21.207

上传窗口是一个 Windows 组件，您不能使用 Selenium 单击所需的文件。这样做的方法是使用 Autoit。获取上传窗口的名称，在“文件名”输入框中输入已有的文件名。然后单击“打开”按钮。这是示例代码 -

```
WinGetHandle("Choose File to Upload") ;
ControlFocus("Choose File to Upload", "", "Edit1");
Send("Callform.txt");
ControlClick("Choose File to Upload", "", "Button1", "left", "1", "", ""); 
```

“classnameNN(Edit1/Button1)”可以不同，请通过 Autoit 窗口信息检查窗口的“classnameNN”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T13:23:11.413

您可以在此处使用机器人 JAR 文件。使用机器人 JAR 文件，您可以使用键盘快捷键。

# php - Zend Form，如果元素中有默认值，则无法获取输入值

> ID：13625255
> 
> 赞同：0
> 
> 时间：2012-11-29T11:53:23.600
> 
> 标签：php, zend-framework, zend-form, zend-form-element, zend-form-sub-form

我正在使用 Zend Framework 1.12，制作一个包含多个表单的页面。我在其中使用一个主表单和子表单。因此，我只有一个验证代码部分。这些子表单指向数据库中的不同表。目的是，如果数据库中有关于该表单的行，表单应该从数据库中获取默认值，以便用户有机会更改该数据。如果数据库中没有一行，这种形式的输入将被插入到数据库中。首先，我可以从 db 中获取值并将它们显示为表单元素的值。但是当我改变它并尝试用

```
$form->getValues(); 
```

我无法访问在页面中输入（或编辑）的值，我只是重新访问数据库中默认输入的值。这个表格应该可以随时编辑，我有多个表格来处理不同类型的数据，它们也可以做同样的事情。我一定做错了什么？任何的想法？

（补充）这里是我的控制器代码相关部分的摘要：

```
$masterform = new Application_Form_GeneralForm(); // a class which extends Zend_Form
$form1 = new Application_Form_SmallForm(); // a class which extends Zend_Form_Subform
$masterform->addSubform($form1, 'form1');
                         // so far, for form 1, no problem. My second form will be 
                         // added to the masterform after this first form is submitted,
                         // which works fine.

$form2 = new Application_Form_AnotherSmallForm(); // a class which extends Zend_Form_Subform

$request = $this->getRequest();
if ($request->isPost()){
    if ($generalform->isValid($request->getPost())) {
         $form2->loadValues(); // the part that form elements are filled with data 
                               // taken from db, a method defined in `AnotherSmallForm` 
                               // class. Just assigning values to elements with `setValue()`

         $form2->saveValues(); // Here is the problem, another method to save the 
// current values to db. (defined in form class). I have to do this in this fragment of code, so i don't know to 
// use which order ( saveValues() and loadValues() methods' order )` 

         $masterform->addSubform($form2, 'form2');
    }
} 
```

因此，第一步：将 $form1 添加到 $masterform。

第二步：$masterform 提交（现在只包含$form1），然后将$form2 添加到$masterform。在添加之前，$form2 的值会加载到表单元素中。

第三步：$masterform 提交，（$form1 和 $form2 也是如此）。如果 $form2 中的值有任何更改，则必须通过此提交在 db 中更新它们。

这是此代码的目标，由于第三步而无法完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:56:43.663

你有你的问题，在发送帖子值之后，你正在用默认的数据库值重写它。

```
if ($request->isPost()){
.........................
    $form2->loadValues(); // here you're rewriting it!
    $form2->saveValues(); 
```

简单**地改变顺序**，首先 saveValues() 然后 loadValues()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:14:24.640

我终于弄明白了。即使子表单是在相互关联的条件下创建的，它们也应该在`if($request->isPost())`条件块之外创建。因此，如果您必须通过步骤添加它们（就像我必须这样做，在提交 $form1 之后创建 $form2，并且 $form1 保留在页面中），您应该测试它们的要求是否直接和单独地得到满足。我的这种方法行不通。它应该是这样的：

```
$masterform = new Application_Form_GeneralForm(); 
$form1 = new Application_Form_SmallForm();
$masterform->addSubform($form1, 'form1');                          

$form2 = new Application_Form_AnotherSmallForm(); 

if (/* the requirement you want to check if $form2 should be added or not, 
    and this could easily be checking some value which is submitted with 
    $form1, so you have already checked if $form1 has been submitted */ ) 
    $masterform->addSubform($form2, 'form2'); // we add it if requirement is met

$request = $this->getRequest();
if ($request->isPost()){
    if ($generalform->isValid($request->getPost())) {
         $form2->saveValues(); // be sure it saves the final values added to form
         ////.......
    }
} 
```

而且，我不再在这里了，我在表单类`loadValues()`的方法中调用了该方法。`init()`因此，正如 konradwww 所说， saveValues() 应该首先发生，然后 loadValues() 接下来发生。这可以通过使用表单类中的loadValues()来完成，它无论如何都属于表单的初始化过程。

# azure - 将应用程序发布到 Azure 时发生错误

> ID：13625256
> 
> 赞同：1
> 
> 时间：2012-11-29T11:53:25.333
> 
> 标签：azure, azure-web-app-service

我刚开始玩 Azure 平台。我尝试将一个简单的应用程序上传到 Azure 云，看看它是如何工作的。为此，我正在使用 Eclipse Indigo 和 Azure 的 eclipse 插件。但是，在发布到云时出现以下错误：“归档上传部署包 (.cspkg)” 我搜索了 aroudn，发现其他人也有同样的问题。

应用程序大小为 382MB ！！！！！！我想这就是我收到此错误的原因。但是为什么大小那么大？我只有一个带有一个 .jsp 文件的 hello world 应用程序。当运行到模拟器时，我指向我想要使用的服务器安装。之后整个安装是否会在发布时上传到云端？即使在这种情况下，我也使用大约 50 MB 的 Tomcat？剩下的 230Mb 来自哪里？如何减小我的应用程序的大小？我还想知道 Eclipse Indigo 是否支持 Azure 的 Eclipse 插件。我在 Azure 网站上读到需要 Eclipse Helios。

# c# - C# 编译器相关对象引用未设置为对象的实例

> ID：13625263
> 
> 赞同：0
> 
> 时间：2012-11-29T11:53:51.910
> 
> 标签：c#, compiler-errors, compiler-warnings

> **可能重复：**
> [是否有 NullReferenceException 没有给出变量名称的原因？](https://stackoverflow.com/questions/5257626/is-there-a-reason-why-nullreferenceexception-does-not-give-the-name-of-the-varia)

为什么甚至像 C# 或 Java 这样的高级语言也不能轻松地提供一种机制来查找哪个对象类型和实例（变量）为空？我们是否需要为此编写自定义逻辑。

```
 ex:   SampleClass sc = null;
       sc.SomeMethod(); 
```

我想说“SampleClass 类型的对象 sc 为空”而不是天真的异常消息“对象引用未设置为对象的实例”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:05:18.383

这里的术语值得明确。`sc`不是对象，是变量。变量的值是一个参考。引用可能为空，也可能是对真实对象的引用。

现在，至于为什么它不像听起来那么简单......

在这段代码中：

```
sc.SomeMethod(); 
```

...有两个操作：

*   将 的值加载`sc`到执行堆栈上
*   通过执行`SomeMethod`堆栈上的引用执行

这是第二次失败的操作，并且该操作实际上并不“知道”第一次操作。

当涉及更多操作时，情况会变得更糟。关于什么：

```
Foo().Bar().SomeMethod() 
```

在这种情况下，您希望异常显示什么？

就我个人而言，我很少发现很难弄清楚异常的来源 - 行号通常可以很清楚地说明，而*不清楚*的情况通常正是存在无法轻易给出的长表达式的情况无论如何，在异常中只有一个答案。

我想CLR/编译器有*可能*就一个额外的表达成一致，比如行号映射，它表示“对于 IL 指令 X，执行堆栈的顶部来自带有诊断消息 Y 的表达式”。感觉它会很麻烦 - 正如我所说，它不应该真的让你那么头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:56:46.173

因为在大多数情况下，事情并没有那么简单。

以这种方法为例：

```
public int Foo(string bar)
{
    return bar.Length;
} 
```

`bar`可能`null`取决于仅在运行时知道的因素。这是编译器无法验证的。

# java - Netbeans 7.2.1 - 每个项目类别的默认项目目录

> ID：13625266
> 
> 赞同：1
> 
> 时间：2012-11-29T11:54:02.197
> 
> 标签：java, netbeans, directory, default

首先，我已经看到了[如何在 Netbeans 6.9 中更改默认项目目录（文件夹）的问题？](https://stackoverflow.com/q/3077531/851432)我已经编辑了文件中`projectsFolder`变量的值`projectui.properties`以更改默认项目目录，并且它起作用了。

问题在于它是全局更改，这意味着每个项目类别（Java、Android、PHP 等）现在都将使用此目录作为默认项目目录。但是，我希望有单独的默认目录，例如`~/Development/Andoid`Android 项目、`~/Development/Java`Java 项目、`~/Development/PHP`PHP 项目。我知道很可能我来这里是为了失望，但谁知道呢！

*那么，您是否知道这样做的任何技巧或技巧？*

# jquery - 通过数据库在JQuery中获取数组值

> ID：13625269
> 
> 赞同：0
> 
> 时间：2012-11-29T11:54:16.357
> 
> 标签：jquery, asp.net-mvc-3

```
$(document).ready(function(){
var availableTags = [
            "ActionScript",
            "AppleScript",
            "Apple",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];

alert(availableTags);
}); 
```

这里的值是通过硬编码传递的。但我想要一个通过数据库的availableTags这个值

```
dbProdMgmtEntities context= new dbProdMgmtEntities();

            var getvalueofproduct = (from p in context.tblProducts
                                     select new
                                     {
                                         p.Title 
                                     }).ToArray();
            ViewBag.locations = getvalueofproduct; 
```

这在我的 jquery 代码中获取数组值和这个值。

# java - 如何发现哪个 Jar 或包创建了对象

> ID：13625273
> 
> 赞同：1
> 
> 时间：2012-11-29T11:54:47.133
> 
> 标签：java, tomcat, object, memory

我的问题似乎很简单，但我还没有找到解决方案。

我需要知道 Tomcat 中部署的包是如何消耗内存的。

我尝试了一些工具，如 VisualVM 和 JConsole，但我无法发现我部署的包中的哪个创建了对象。例如，我可以看到有很多`java.lang.String`对象，但我需要知道它们是从哪个包/JAR 创建的。

THX 编辑 omg ......所以 prooooo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:10:46.737

您可以尝试使用**对象查询语言 (OQL)**来查询堆。也许这将有助于你的目的。

你可以参考这个链接，看看你是否得到了你需要的东西。 [VisualVM 中的对象查询语言](http://visualvm.java.net/oqlhelp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:35:22.800

您可以尝试使用 [MAT(Memory Analyzer Tool)](http://www.eclipse.org/mat/) 使用此工具，您可以检查使用 VisualVM 获取的堆转储...对于堆中的每个对象，您可以查看哪些对象引用了该对象，因此哪些对象阻止了其他对象从被垃圾收集

# html - 如果另一个图像太宽，如何将图像定位在另一个图像上

> ID：13625280
> 
> 赞同：1
> 
> 时间：2012-11-29T11:55:10.393
> 
> 标签：html, css

这是我的代码：

```
<html>
<head>
   <style type="text/css">
     #superdown{
         position :relative;
         right: 10px;
         top: 10px;
     }

     #down{
       position: absolute;
       top: 10px;
       right :10px;
     }
   </style>
</head>

<body>
  <div id="superdown"> 
    <img src="http://images4.alphacoders.com/177/177506.jpg">
    <div id="down">
      <img id="yes" src="http://img.wallpaperstock.net:81/hi%2c-loser-wallpapers_17839_1024x768.jpg">
    </div>
  </div>
</body>
</html> 
```

很明显，我的背景图片太大了，所以我需要滚动我的水平条来查看它。我希望我的粉红色图片距背景图片顶部 10 像素，距背景图片右侧 10 像素。但根据浏览器设置的 px 似乎。我希望粉红色图片位于右上角，如何？对不起我的烂英文...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:02:19.320

我希望你看起来像这样：-[**演示**](http://tinkerbin.com/dNyxftT1)

只需给`position:absolute;`Parent **Div**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:01:59.857

出于某种原因，当您`position: relative;`在#superdown 图像上使用时，#down 图像的绝对定位是基于浏览器的边界。解决此问题的一种方法是将 #superdown 设置为`position: absolute;`，尽管我当然不确定这是否不会弄乱您页面中的其他内容。

# php - 如何从 Smarty 模板文件中的这个数组中获取值？

> ID：13625284
> 
> 赞同：1
> 
> 时间：2012-11-29T11:55:29.967
> 
> 标签：php, smarty

```
从 smarty Tpl 如何检索数组值。

大批
(
    [0] => 数组
        (
            [0] => 数组
                (
                    [ques_id] => 45
                    [optid1] => 234
                    [optid2] => 235
                    [optid3] => 236
                    [optid4] => 237
                    [optans1] => 无限的个人和商业责任
                    [optans2] => 对公司利润和股东收益征税（双重征税）
                    [optans3] => 很难从投资者那里筹集资金
                    [optans4] => 收入通过个人纳税申报表流动
                    [optcount1] => 10
                    [optcount2] => 26
                    [optcount3] => 19
                    [optcount4] => 4
                    [答案] => 235
                    [计数] => 4
                )

        )

    [1] => 数组
        (
            [难以从投资者那里筹集资金] => 19
            [无限的个人和商业责任] => 10
            [收入通过个人纳税申报流动] => 4
        )

    [2] => 数组
        (
            [对公司利润和股东收益征税（双重征税）] => 26
        )

)

```

这里如何从 smarty 中的这个数组中获得**[公司利润和股东收益被征税（双重征税）] => 26 。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:59:53.987

`$arrayName[0][0].optans1`应该给你“无限的个人和商业责任”

# svn - TortoiseSVN 1.7.9：合并的差异在哪里？

> ID：13625285
> 
> 赞同：1
> 
> 时间：2012-11-29T11:55:32.010
> 
> 标签：svn, merge, tortoisesvn

我有一个新的 TortoiseSVN (V 1.7.9)，现在合并对话框没有任何差异选项。

我想要的是在我进行合并之前查看我的分支和主干之间的所有差异。

如果您查看较旧的屏幕截图，则有一个差异按钮： [http ://bchavez.bitarmory.com/archive/2008/06/03/quothow-toquot-svn-merge-with-tortoisesvn.aspx](http://bchavez.bitarmory.com/archive/2008/06/03/quothow-toquot-svn-merge-with-tortoisesvn.aspx)

有什么新方法可以做到这一点吗？

是的，我知道如何在命令行上执行此操作，但是对于 TortoiseSVN，我明确需要它。

编辑：查看合并对话框的屏幕截图 - 没有 diff 功能：![乌龟合并对话框](../Images/dfa313019cdbb051a1271e05750a9d93.png)

测试合并只是检查是否存在合并冲突，分支之间没有旧版本的差异。我还测试了“显示日志”按钮 - 这只是所选分支的日志列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:00:54.853

右键单击文件夹并选择

TortoiseSVN -> 设置

在设置中单击差异查看器并设置您喜欢的合并工具，例如 winMerge 或 BeyondCompare

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:37:33.710

这种差异能力不再在合并工作流程中。相反，您可以这样做：

1.  从回购浏览器...
2.  右键单击 ->在分支上*标记以进行比较*
3.  右键单击 ->比较主干上的*URL 。*

这将触发该文档中描述的[比较文件夹](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-diff.html#tsvn-dug-compare-revs)情况（这与比较来自 SVN 日志的 *修订*时出现的情况相同。![在此处输入图像描述](../Images/c348b4753acbaa25fb4abd790c7a28ae.png)

* * *

另外一个选项：

1.  访问分支的工作副本。
2.  按住`Shift`鼠标右键单击要比较的分支文件夹。
3.  选择 TortoiseSVN 的*Diff with URL*选项。
4.  指定要比较的主干的 URL。

如果您在文件夹上执行此操作，那么您将获得 TortoiseMerge 的*统一差异*查看器，这可能是也可能不是您想要的。

# c# - 如何向用户显示 Web 服务异常？

> ID：13625287
> 
> 赞同：0
> 
> 时间：2012-11-29T11:55:37.287
> 
> 标签：c#, asp.net-mvc-3, web-services

当我在我的 MVC 3 控制器中从 Web 服务中获得异常时，如何向用户显示此消息并返回到他所在的页面？

我想向用户展示一些东西，比如......

如果我正在创建一个用户并且该用户的名称已经存在，那么我会抛出一个带有消息的异常（“具有该名称的用户......已经存在”）并且我想在我的控制器捕获中获取此异常并向用户显示警报或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:36:51.950

您必须将要显示的错误添加到`ModelState`.

例如，

```
public ActionResult CreateUser(User user)
{
    try
    {
       _webServiceProxy.CreateUser(user);
    }
    catch(...)
    {
       ModelState.AddModelError("", "The user name already exists");
    }

    return View();
} 
```

在视图中，您可能应该拥有`@Html.ValidationSummary()`向用户显示错误的选项。

如果要在用户名字段附近显示错误消息，则必须将字段名作为第一个参数传递。

IE

```
ModelState.AddModelError("Name", "..."); 
```

在视图中你必须使用`@Html.ValidationMessageFor(m => m.Name)`

如果您出于某种原因想在警告框中显示错误（我不喜欢这个），您可以通过在视图底部渲染小脚本来实现。您必须从控制器通过 ViewBag 将错误传递给视图。

控制器，

```
ViewBag.Error = "The user name already exists"; 
```

看法，

```
@{
   var error = ViewBag.Error;
}

<script type="text/javascript">
   var error = "@error";
   if(error)
     alert(error);
</script> 
```

# c - 填充数组时崩溃

> ID：13625289
> 
> 赞同：1
> 
> 时间：2012-11-29T11:55:41.670
> 
> 标签：c, arrays, stdio

我用 C 写了一个简单的程序：

```
#include <stdio.h>

main(){
    int a[20], b[20];
    int n, i;
    printf("Enter a number: ");
    scanf("%d", &n);
    for(int j=0; j<n; j++){
        printf("Enter a number for a[%d]: ", j);
        scanf("%d", a[j]);
        printf("\n");
    }
} 
```

此代码编译但在运行时`n`大于 2 并且当向数组中输入第二个数字时发生崩溃。

我不明白为什么它崩溃了，请给我解释一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:58:10.853

`scanf`接受一个*指向*存储值的位置的指针。即 的地址`a[j]`。所以`scanf("%d", &(a[j]) );`，或`scanf("%d", a+j);`（记住，`a[j]`等价于`*(a+j)`）。

此外，还有其他各种问题。对于初学者来说，它应该是`c`还是`c++`？目前它也不是真的（尽管它更接近`c`）。如果有人输入大于 会发生什么`20`？

如果您想知道导致崩溃的原因，它会将`a[j]`其中的任何值（只是一些未初始化的垃圾）解释为地址，然后尝试写入该（完全无效的）地址。它不喜欢这样，操作系统会杀死你的程序。这称为[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)。

# c# - MonoDroid VS 找不到架构信息

> ID：13625298
> 
> 赞同：3
> 
> 时间：2012-11-29T11:56:11.027
> 
> 标签：c#, android, for-loop, mono, xamarin.android

我正在尝试使用 MenuInflater 在 MonoDroid 中创建菜单，但我不断收到“找不到‘菜单’的架构信息

```
 <?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:id="@+id/Search"
         android:title="@string/Search"
         android:icon="@drawable/ic_menu_search_holo_light"
         android:showAsAction="ifRoom"
        />
  <item android:id="@+id/AddProduct"
        android:title="@string/AddProduct"
        android:icon="@drawable/ic_menu_add"
        android:showAsAction="ifRoom"
        />
</menu> 
```

Resource.designer.cs 不包含菜单，我尝试通过更改为 AndroidResource 来修复它，然后重新构建。

MenuInflater 代码。

```
 protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        //Use UI created in Main.axml
        SetContentView(Resource.Layout.Main);

        var AddNewProduct = FindViewById<Button>(Resource.Id.AddNewProduct);
        AddNewProduct.Click += (sender, e) =>
        {
            StartActivity(typeof(AddProduct));
        };
    }
    public override void OnCreateOptionsMenu(IMenu menu)
    {
        MenuInflater menuInfalter = MenuInflater;
        menuInfalter.Inflate(Resource.Menu.MainMenu, menu);

        base.OnCreateOptionsMenu(menu);
    } 
```

我知道有很多糟糕的代码。但我只需要知道如何将我的菜单 xml 添加到 Resource.designer.cs？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:51:12.903

通过 MonoDevelop 或 Visual Studio 添加您的菜单目录和任何资源文件。这样，它们将被添加到 csproj 并在构建过程中打包。仅将文件添加到目录不会将它们包含在构建中。

# java-ee-6 - Openbravo 源代码错误

> ID：13625300
> 
> 赞同：0
> 
> 时间：2012-11-29T11:56:13.350
> 
> 标签：java-ee-6, openbravo

嗨，我是 Openbravo 开发的新手，正在尝试对其进行配置。

我已经检查了 openbravo 形式的源代码 [Openbravo](https://code.openbravo.com/erp/devel/main)

并成功运行并在命令提示符中`ant istall.source`找到消息。`BUILD Successfully`

所以我在 Eclipse 中导入它，但主要的 Openbravo 项目在源文件中显示错误

即它缺少一些库和文件夹，例如：

```
import org.openbravo.client.application.process.BaseProcessActionHandler can't find the folder 
```

和许多其他这样的库。

请帮我解决这个错误。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:44:58.833

您在 wiki 文档中有详细信息。考虑以下链接以在 Eclipse IDE 中设置 Openbravo。
**[在 Eclipse IDE 中设置](http://wiki.openbravo.com/wiki/How_to_setup_Eclipse_IDE)**
这是来自 Openbravo**[开发人员指南的页面](http://wiki.openbravo.com/wiki/ERP_2.50%3aDevelopers_Guide/Development_Environment/Setting_up_Development_Environment_with_Eclipse_IDE#Import_into_Eclipse_IDE)**

# html - 当其中一个图像变大时，如何保持其他图像不动？

> ID：13625303
> 
> 赞同：1
> 
> 时间：2012-11-29T11:56:27.833
> 
> 标签：html, css

HTML

```
<img id="btnLeft" src="img/btnLeft.png"/>
<img id="logo01" src="img/logo01.png"/> 
```

CSS

```
#btnLeft{heigth:64px;}
#btnLeft:hover{height:74px;} 
```

在鼠标悬停时`btnLeft`下推`#logo01`10px。
我想`#logo01`留在原地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:07:40.763

为您的图像元素创建一个单独的 div，根据您的喜好将它们向左或向右浮动，然后`vertical-align: top`在包含`div`. 这是一个示例：http: [//jsfiddle.net/94zVg/](http://jsfiddle.net/94zVg/)。

出现此问题的原因是您必须并排成像元素，这些元素将与其包含块的底部对齐。当一个图像被放大时，它会扩展包含块，而另一个元素会下降到它的底部。浮动和垂直对齐解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:08:15.427

也给第一张图片一个宽度，否则它的宽度会按比例扩大并将相邻的图片向下推。

```
#btnLeft{height:64px;width:100px;}
#btnLeft:hover{height:74px;} 
```

这是一个显式宽度的演示：http: [//jsfiddle.net/XRKK4/](http://jsfiddle.net/XRKK4/)

这是一个没有明确宽度的演示：http: [//jsfiddle.net/XRKK4/1/](http://jsfiddle.net/XRKK4/1/)

# c# - 在 Windows 8 中检查 Internet 连接（可用性）

> ID：13625304
> 
> 赞同：17
> 
> 时间：2012-11-29T11:56:29.543
> 
> 标签：c#, windows-8, microsoft-metro

如何在 Windows 8、C# 开发中检查 Internet 连接可用性？我查看了 MSDN，但页面已被删除。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-29T12:51:47.023

我使用这个片段没有问题：

```
public static bool IsInternet()
{
    ConnectionProfile connections = NetworkInformation.GetInternetConnectionProfile();
    bool internet = connections != null && connections.GetNetworkConnectivityLevel() == NetworkConnectivityLevel.InternetAccess;
    return internet;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-17T14:17:48.427

我必须使用 GetConnectionProfiles() 和 GetInternetConnectionProfile() 才能使其在所有设备上工作。

```
class ConnectivityUtil
{
    internal static bool HasInternetConnection()
    {            
        var connections = NetworkInformation.GetConnectionProfiles().ToList();
        connections.Add(NetworkInformation.GetInternetConnectionProfile());

        foreach (var connection in connections)
        {
            if (connection == null)
                continue;

            if (connection.GetNetworkConnectivityLevel() == NetworkConnectivityLevel.InternetAccess)
                return true;
        }

        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T07:28:54.127

对于 Windows Phone 以下代码可能有用：

```
var networkInformation = NetworkInformation.GetConnectionProfiles();    
if (networkInformation.Count == 0)    
{    
  //no network connection    
} 
```

# c# - 在gridview的列中更改/设置新值

> ID：13625305
> 
> 赞同：0
> 
> 时间：2012-11-29T11:56:30.430
> 
> 标签：c#, asp.net, visual-studio-2008

这是我的代码：

```
protected void CallCardStatus_RowDataBound(object sender, GridViewRowEventArgs e)
{
    var thisRow = e.Row;
    if (e.Row.RowType == DataControlRowType.DataRow)
    {

         switch (thisRow.Cells[11].Text)
         {
              case "MBMK":
                        thisRow.Cells[9].Text = "JBPM MELAKA";
                        break;
              case "IPBJMA":             
                        thisRow.Cells[9].Text = "JBPM KUALA LUMPUR";
                        break;
              case "JBPMBJ":
                        thisRow.Cells[9].Text = "JBPM SELANGOR";    
                        break;
                    default:
                        break;
           }

      }
 } 
```

这是我的gridview标记的一部分。

```
 <asp:GridView ID="CallCardStatus" runat="server" AutoGenerateColumns="False"
    OnRowDataBound="CallCardStatus_RowDataBound" HorizontalAlign="Center" 
    OnRowCommand="CallCardStatus_RowCommand" 
    DataKeyNames="call_card_no" Width="100%" 
         <Columns>
                <asp:BoundField DataField="call_city_desc" HeaderText="City" 
            meta:resourcekey="BoundFieldResource4">
                    <HeaderStyle BackColor="#666666" BorderColor="#999999" BorderStyle="Groove" 
                BorderWidth="4px" Font-Names="Arial Narrow" Font-Size="Large" 
                HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Left" Font-Names="Arial Narrow" BorderColor="#999999" 
                BorderStyle="Inset" BorderWidth="2px" Font-Size="10pt" />
                </asp:BoundField>
                <asp:BoundField DataField="owner_department_code" HeaderText="PSCC" 
                    Visible="False" />
            </Columns>
        </asp:GridView> 
```

我想更改网格视图中的值。我已经尝试过上面的代码，但它不起作用。请帮助..Siti .. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:17:24.417

在方法后面的代码中编写您的逻辑并按如下方式调用该方法：

如果您使用的是模板文件，则调用方法如下：

```
 <asp:TemplateField HeaderText="Column_Name" SortExpression="Column_Name">
  <ItemTemplate>
  <asp:Label ID="Label1" runat="server" 
      Text='<%# YourMethodName(Eval("DatabaseFiledName")) %>'></asp:Label>
  </ItemTemplate>
 </asp:TemplateField> 
```

或者，如果您使用的是 boundField 那么

```
<asp:BoundField DataField="<%#YourMethodName(Eval("DatabaseFiledName")) %>" HeaderText="Column_Name" ReadOnly="True" SortExpression="Column_Name"/> 
```

并且您的方法背后的代码将是：

```
public string YourMethodName(object strValue)
 {
    string retString ="";

   switch (Convert.ToString(strValue))
     {
          case "MBMK":
                retString "JBPM MELAKA";
               break;
          case "IPBJMA":             
                   retString = "JBPM KUALA LUMPUR";
                    break;
          case "JBPMBJ":
                   retString  = "JBPM SELANGOR";    
                    break;
                default:
                    break;

          return retString;
       }
} 
```

# opengl - 在 ubuntu 来宾虚拟框中打开 GL 调用流程

> ID：13625322
> 
> 赞同：2
> 
> 时间：2012-11-29T11:57:11.123
> 
> 标签：opengl, virtualbox

我通过将 glxgears.c 演示代码与 mesa 提供的 libGL.so 链接来编译它。

此编译适用于虚拟盒子中的 ubuntu 客户机，主机是 windows 7。

我在 ubuntu 中运行我的演示代码，在运行时它正在访问由虚拟盒来宾添加提供的 VBoxOGL.so 并使用主机的 3D 硬件加速。

如果我将 VBoxOGL.so 重命名为其他名称，我的演示代码不是使用硬件加速，而是使用软件渲染。

你能告诉我我的演示代码是如何连接到 VBoxOGL.so 的吗？

我需要来自 democode->libGL.so->how 的流程？->VBoxOGL.so->h/w。由于这两个库在编译期间没有链接在一起，我不确定如何将 libGL 调用定向到 VBoxOGL.so。

帮助我了解流程以及哪个库或模块正在执行此重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:08:23.557

我不知道 Virtual Box 的内部结构，但我最好的猜测是它们要么 LD_PRELOAD 那个 .so 而不是 libGL.so，要么它被实现为 Mesa 状态跟踪器并像其他 DRI2 一样作用于 Mesa 的背面基于 GPU 的驱动程序可以。

# c# - C#-比较组合框和列表项的组合框

> ID：13625328
> 
> 赞同：0
> 
> 时间：2012-11-29T11:57:34.330
> 
> 标签：c#, visual-studio-2010, c#-4.0, itextsharp

我有一个组合框，我可以在其中选择三个项目和一个包含项目的列表，我首先要检查从组合框中选择的值是否在列表中，然后是与组合框一相同的列表项；想对它做一些操作。

```
List<string>names = af.GetBlankSignatureNames();
comboBox1.SelectedItem.ToString();//combobox value taken 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:05:12.343

你可以做：

```
if(names.Any(r=> r == comboBox1.SelectedItem.ToString())
{
     // match found
}
else
{
    // not found
} 
```

或从列表中获取项目尝试：

```
string str = names.FirstOrDefault(r=> r == comboBox1.SelectedItem.ToString()); 
```

if`str`为 null 表示在`names`列表中未找到字符串，如果它不为 null，那么您也得到了字符串，*（顺便说一下，与 相同`comboBox1.SelectedItem.ToString()`）*

# php - 使用 get_post() 时如何解决 wordpress 的 query.php 中未定义的偏移量 0

> ID：13625330
> 
> 赞同：0
> 
> 时间：2012-11-29T11:57:42.007
> 
> 标签：php, wordpress

在 wordpress 中，我正在使用：

```
$posts=get_posts($args)
foreach($posts as $post){
   //do stuff
} 
```

但是，当没有帖子时，我得到

> 未定义的偏移量：第 2859 行 C:\xampp\htdocs\wrDTC\wp-includes\query.php 中的 0

我已经尝试使用`if($posts){}`，但通知仍然出现。除了关闭 php 中的错误消息外，如何防止此通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T11:39:13.617

您不能简单地将 $posts 用作循环中的变量名称。

"$posts" 在 wordpress 的查询中作为全局使用，必须是数组。

如果您选择将 var $posts 命名为 var $posts，这将导致未定义的偏移量 0，因为您的 $posts 没有偏移量 0。请记住，您只需重置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:58:51.650

使用这样的东西......

```
 if(!empty($args) && count($args)>0){
    $posts=get_posts($args)
    foreach($posts as $post){
       //do stuff
    } 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:59:16.527

尝试在 $args 中定义偏移量，即 ('offset' => 1)，而不是使用通常的 {} 尝试使用钩子和“endforeach;”

我在 wordpress dev 中的 foreach 语句的结构如下：

```
<?php foreach($myPosts as $post) : setup_postdata($post) ?>

      <?php the_title(); ?>
      <?php the_content(); ?>
      // etc
      <?php endforeach; ?> 
```

# objective-c - 为什么在拖动视图时不多次调用touchesMoved方法--IOS

> ID：13625332
> 
> 赞同：1
> 
> 时间：2012-11-29T11:58:09.697
> 
> 标签：objective-c

这是 panGesture 的实例。

```
 pangstr = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];

- (void)handlePan:(UIPanGestureRecognizer *)recognizer{

    CGPoint translation = [recognizer translationInView:baseView];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, recognizer.view.center.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:baseView];

    if (recognizer.state == UIGestureRecognizerStateEnded) {

        CGPoint velocity = [recognizer velocityInView:baseView];
        CGFloat magnitude = sqrtf((velocity.x * velocity.x));
        CGFloat slideMult = magnitude / 1000;
        NSLog(@"magnitude: %f, slideMult: %f", magnitude, slideMult);
        float slideFactor = 0.15 * slideMult;

        CGPoint finalPoint = CGPointMake(recognizer.view.center.x + (velocity.x * slideFactor),
                                         recognizer.view.center.y + (velocity.y * slideFactor));
} 
```

现在我的问题是如何在 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 函数中使用 (panGestureRecogniser *)recogniser 参数。我特别想要这个，因为我想在我的 TouchesMoved 函数中获取 finalPoint 的值，而 CGPoint finalPoint 使用 *recogniser 参数。

如果有人能给我一个解决方案，那就太好了谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:03:12.230

为什么不直接使用识别器状态？

```
if (recognizer.state == UIGestureRecognizerStateChanged) 
{
    //Save whatever information you need here
} 
```

关于共享变量，使用不同的变量`StateChanged`并将它们同步到`StateEnded`？

# php - 使用 MYSQL 链接表允许产品表中的多个选项

> ID：13625333
> 
> 赞同：0
> 
> 时间：2012-11-29T11:58:09.733
> 
> 标签：php, mysql, database

我正在创建一个购物篮类，并希望产品具有不确定数量的选项，例如颜色、尺寸等。

我知道我应该使用多个表来存放选项数据，但不知道该怎么做。到目前为止，这是我的表结构。

```
CREATE TABLE IF NOT EXISTS options (
        ID varchar(40) PRIMARY KEY,
        Option int,
        Value varchar(100),
        Cost decimal(10,2)
        );

CREATE TABLE IF NOT EXISTS products (
        ID int PRIMARY KEY AUTO_INCREMENT,
        Title varchar(200),
        Description text,
        Specification text,
        Price decimal(10,2),
        CategoryID int,
        Weight int,
        OptionID int,
        Discount int(2),
        Featured boolean,
        Images text,
        Stock int,
        Related text,
        Offer boolean,
        OfferDetails text,
        Language int
        );
CREATE TABLE IF NOT EXISTS basket (
        `ID` int(11) PRIMARY KEY AUTO_INCREMENT,
        `ProductID` int(11),
        `Quantity` int(11),
        `OptionID` int(11),
        `Cookie` varchar(40)
        ); 
```

我想将所有选项存储在选项表中，并通过一个唯一 ID 将它们链接到产品。

我猜当用户选择一个选项时，我需要另一个表来存储信息。然后使用此表获取选择选项数据以输出到篮子

此外，我需要能够查看相同的产品，即相同的选项和 productID 是否已经在购物篮中，这样我就可以简单地更新数量而不是添加新行。

我可以通过使用大量的 for 循环和查询来做到这一点，但我真的想限制它。

对不起，如果不清楚。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:14:49.927

我假设您有另一张桌子供客户使用。这些选项适用于产品。您可以为每种产品提供一个或多个选项。这是一个多对一的关系。您可以为每个用户拥有多个产品，这也是多对一的关系。您可以（应该？）将这些关系分解。

该表（`purchase`以它为例）将包含与以下相对应的列（至少）：

```
primary key,
customer ID,
product ID
amongst other things. 
```

您最初可能会看到这个问题是可能有 0 个或多个选项。为此，您需要另一个表（`optSel`例如调用它）。这将具有对应于以下（至少）的列：

```
purchase table primary key, 
option id, 
and other things. 
```

then when an option is chosen, it can be thrown in that `optSel`table. 稍后可以通过连接轻松访问它。这将选项与用户和产品联系起来。当然，您可以将其拆分为不同的方式，这只是一种技术的一个示例。

# php - 使用 php foreach 制作嵌套列表

> ID：13625337
> 
> 赞同：0
> 
> 时间：2012-11-29T11:58:20.513
> 
> 标签：php, mysql, foreach

我正在尝试使用 foreach 循环使用 php 创建一个嵌套列表，但我现在有点卡住了。我的代码使用 foreach 循环并检查该项目是否为标题，如果是，它将在其下方开始一个嵌套列表。现在的问题是，如果它不是标题，我想将相应的列表项放入其标题下方的**单个**ul 元素中。现在，正如您所看到的，由于 foreach 循环，它将不是标题的每个列表项都放入了它自己的单独的 ul 元素中。我怎样才能解决这个问题？

```
<ul>
    <?php foreach($listitems as $listitem) :  ?>

        <?php if( $listitem['heading'] == 1) : ?>
            <li><?php echo $listitem['listitem']; ?><!--begin nested list-->
        <?php endif; ?>             

        <?php if( $listitem['heading'] == 0) : ?>                   
                <ul><li><?php echo $listitem['listitem']; ?></li></ul>                                                          
        <?php endif; ?>                         

    <?php endforeach; ?>
    </li><!--end nested list-->
</ul> 
```

这是所需的 html 输出：

```
<ul>
    <li>Javascript Basics<!--begin nested list-->
                <ul>
                    <li>Getting Started</li>
                    <li>Data and Variables</li>
                    <li>Functions</li>
                    <li>Scope</li>
                    <li>Working With Objects</li>
                    <li>Creating Objects</li>
                    <li>Arrays</li>
                    <li>Conditions And Decisions</li>
                    <li>Loops</li>
                </ul>
            </li><!--end nested list-->
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:19:21.857

当标题更改时，您需要设置内部列表的开始和结束标签。

像这样的东西

```
<ul>
    <?php 
    $NonHeadCount = 0;
    $HeadingOpen = false;
    foreach($listitems as $listitem)
    {
        if( $listitem['heading'] == 1)
        {
            $HeadingOpen = true;
            if ($NonHeadCount != 0)
            {
                echo "</ul>";
            }
            echo "<li>".$listitem['listitem'];
            $NonHeadCount = 0;
        }           

        if( $listitem['heading'] == 0)
        {
            if ($NonHeadCount == 0)
            {
                echo "<ul>";
            }
            echo "<li>".$listitem['listitem']."</li>";
        }

    }
    if ($NonHeadCount != 0)
    {
        echo "</ul>";
    }
    if ($HeadingOpen)
    {
        echo "</li>";
    }
    ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:26:18.313

您必须更改 $listitems 格式。

有些像这样：

```
<?php
    $listitems = array(
      'item1' => array(
         'item11',
         'item12',
         'item13'
      ),
      'item2' => array(
         'item21',
         'item22',
      ),
      'item3',
      'item4'
    );

?> 
```

然后，这样做：

```
<?php
echo "<ul>";

    foreach($listitems as $item => $listitem):
       echo "<li>$item</li>";
       if(count($listitem) > 0):
          echo "<ul>";
            foreach($lisitem as $item):
                echo "<li>$item</li>";
            endforeach;
          echo "</ul>";
       endif;
    endforeach;

   echo "<ul>";
    ?> 
```

# wpf - 绑定到应用样式/模板的控件

> ID：13625343
> 
> 赞同：3
> 
> 时间：2012-11-29T11:58:48.037
> 
> 标签：wpf, xaml, binding, controltemplate, commandparameter

我想（重新）模板化一个控件，例如一个组合框。

**XAML：**

```
<ComboBox Style="{StaticResource MyComboBoxStyle}" ... >
    <!-- ... -->
</ComboBox> 
```

在 ControlTemplate 我想要一个按钮。

**资源字典：**

```
<Style x:Key="MyComboBoxStyle" TargetType="{x:Type ComboBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBox}">
                <Grid>
                    <!-- ... -->

                    <Button Command="{TemplateBinding Tag}" CommandParameter="{Binding ???}" />

                    <!-- ... -->
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

但我想将 设置为`CommandParameter`应用模板的控件（在本例中为 ComboBox）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T12:09:18.810

好的，我找到了正确的解决方案。

我已将绑定设置为`Binding RelativeSource={RelativeSource TemplatedParent}`

```
<Style x:Key="MyComboBoxStyle" TargetType="{x:Type ComboBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBox}">
                <Grid>
                    <!-- ... -->

                    <Button Command="{TemplateBinding Tag}" CommandParameter="{Binding RelativeSource={RelativeSource TemplatedParent}}" />

                    <!-- ... -->
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# c - 带有不需要的颜色的纹理

> ID：13625344
> 
> 赞同：1
> 
> 时间：2012-11-29T11:58:48.657
> 
> 标签：c, opengl, textures, glut

我正在尝试学习如何在 OpenGL 中使用纹理。我没有安装 freeimage，所以我必须使用 for 循环创建位图。
我要做的是简单地采用所有红点的纹理，并将其映射到正方形内：

```
#import <OpenGL/OpenGL.h>
#import <GLUT/GLUT.h>
#import <stdlib.h>
#import <string.h>
#import <math.h>

GLuint texture;
GLfloat (*pixels) [3];

void init()
{

    // Inizializzazione

    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, 1, 1, 1000);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0, 0, -100, 0, 0, 0, 0, 1, 0);

    // Inizializzazione della texture

    glGenTextures(1, &texture);

    pixels= malloc(256*256*sizeof(GLfloat[3]));

    for(GLuint i=0; i<256*256;i++)
    {
        pixels[i][0]=1.0;
        pixels[i][1]= pixels[i][2]= 0.0;
    }

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, 256, 256, 0, GL_RGB, GL_FLOAT, pixels);

}

void display()
{
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, texture);

    glPushMatrix();
    glBegin(GL_QUADS);
    glVertex3f(0, 0, 0);
    glTexCoord2f(0.0, 0.0);
    glVertex3f(10, 0, 0);
    glTexCoord2f(0.0, 1.0);
    glVertex3f(10, 10, 0);
    glTexCoord2f(1.0, 1.0);
    glVertex3f(0, 10, 0);
    glTexCoord2f(0.0, 1.0);
    glEnd();
    glPopMatrix();

    glDisable(GL_TEXTURE_2D);

    glutSwapBuffers();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DEPTH | GLUT_DOUBLE);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(600, 600);
    glutCreateWindow(argv[0]);
    glutDisplayFunc(display);
    init();
    glutMainLoop();
    free(pixels);
    return 0;
} 
```

问题是所有像素都是红色的，但我得到一个白色方块而不是红色方块：

![在此处输入图像描述](../Images/d0a5207d62a6ca79cb1e85f2b6dee9a5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:16:09.583

你需要在上传数据之前绑定纹理，所以在 glTexImage2D 之前使用 glBindTexture。同样，就目前而言，纹理将是不完整的，因为它没有 mipmap，并且缩小和放大过滤器的默认值需要它们。使用 glTexParameter 将过滤器设置为线性，或者创建 mipmap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:31:19.700

试一试：

```
#include <GL/glut.h>

GLuint texture;
void init()
{
    // Inizializzazione della texture
    unsigned int i;
    GLfloat* pixels = (GLfloat*)malloc( 256 * 256 * sizeof( GLfloat ) * 3 );
    for( i = 0; i < 256 * 256; i++ )
    {
        GLuint base = i * 3;
        pixels[ base + 0 ] = 1.0f;
        pixels[ base + 1 ] = 0.0f;
        pixels[ base + 2 ] = 0.0f;
    }

    glGenTextures(1, &texture);
    glBindTexture( GL_TEXTURE_2D, texture );

    // disable mipmap filtering since we aren't uploading mipmaps
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGB, 256, 256, 0, GL_RGB, GL_FLOAT, pixels );

    free( pixels);
}

void display( void )
{
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, 1, 1, 1000);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0, 0, -100, 0, 0, 0, 0, 1, 0);

    glEnable(GL_DEPTH_TEST);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, texture);

    // important because GL_TEXTURE_ENV defaults to GL_MODULATE
    glColor3ub(255,255,255);

    glPushMatrix();
    glBegin(GL_QUADS);
    glVertex3f(0, 0, 0);
    glTexCoord2f(0.0, 0.0);
    glVertex3f(10, 0, 0);
    glTexCoord2f(0.0, 1.0);
    glVertex3f(10, 10, 0);
    glTexCoord2f(1.0, 1.0);
    glVertex3f(0, 10, 0);
    glTexCoord2f(0.0, 1.0);
    glEnd();
    glPopMatrix();

    glDisable(GL_TEXTURE_2D);

    glutSwapBuffers();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DEPTH | GLUT_DOUBLE);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(600, 600);
    glutCreateWindow(argv[0]);

    init();

    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
} 
```

# javascript - 如何在点击提交时使用 Javascript 在表单操作中传递用户输入的 URL

> ID：13625350
> 
> 赞同：1
> 
> 时间：2012-11-29T11:58:52.443
> 
> 标签：javascript

```
<body>
    <form name="testarea" method="post" action="?URL">
        <input type="text" id="test1" name="URL"/>
        <input type="submit" value="Submit"/>
    </form>
</body> 
```

现在我想：

1.  使用用户在 URL 文本框中输入的值
2.  `action=''`用于在点击时传递给表单`Submit`。这需要在提交时传递相同的 URL 将在同一个 iFrame 中启动 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:02:07.183

您可以使用 jQuery 来设置表单的 action 属性，如下所示：

```
var url = $("#test1").val();
$(form).attr("action", url) 
```

如果您无法使用 jquery，可以参考以下帖子：

[http://netfactory.dk/2007/09/28/changeing-a-form-submit-url-with-javascript/](http://netfactory.dk/2007/09/28/changing-a-form-submit-url-with-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:09:27.483

您可以使用方法 Get 而不是 Post

```
<body>
<form name ="testarea" Method="Get" Action="youpage.html">
<input type='text' id='test1' name='URL'/>
<input type='submit' value='Submit'/>
</form> 
```

更新：

我不知道这是正确的，但你也可以这样尝试

```
<input type='text' id='test1' name=''/>
<input type='button' value='Submit' onclick="window.location.href=window.location+'?'+document.getElementById('test1').value;"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:29:53.433

在您的表单**后**放置以下代码段：

```
function addListener(element, eventName, handler) {
    if (element.addEventListener) {
        element.addEventListener(eventName, handler, false);
    }
    else if (element.attachEvent) {
        element.attachEvent('on' + eventName, handler);
    }
    else {
        element['on' + eventName] = handler;
    }
}

var form = document.forms['testarea'];
var input = document.getElementById('test1');

addListener(form, 'submit', function () {
   var url = input.value;
   form.setAttribute('action', url);
}); 
```

我没有测试过它，但它应该可以工作。我建议您使用 jquery 之类的库，而不是编写纯 javascript。您将使生活更轻松，并且跨浏览器问题更少。

在 jQuery 中，您的代码将如下所示：

```
​$('form[name="testarea"]').on('submit', function () {
    var url = $('#test1').val();
    $(this).attr('action', url);    
});​​​​​​​​​​​​​​​​​​​​​​ 
```

# html - 为什么 1px 宽度的边框会使 div 增加 20 像素？

> ID：13625352
> 
> 赞同：5
> 
> 时间：2012-11-29T11:58:53.637
> 
> 标签：html, css

下面的 html 文档有两个 div，一个带边框 ( `id='with'`)，一个不带 ( `id='without`)。带边框的 div 被渲染（至少在 firefox 和 chrome 上）明显高于带边框的 div。

我曾预计它们的高度最多变化 2 个像素，然而，`alert`告诉我它们的高度相差 19 个像素。

我不明白为什么会这样。

```
<!DOCTYPE HTML>
<html>
<head>
  <title>Height of divs with/without a border</title>
  <script type="text/javascript" src='jquery-1.8.3.js'></script>

  <script type='text/javascript'>

    $(document).ready(function() {

           alert($('#with'   ).height() + ' / ' + 
                 $('#without').height());

    });

  </script>

</head>
<body>

  <div style='width:300px;border:black 1px solid;background-color:yellow' id='with'>
    <h1>With a border</h1>
    bla<br>
    bla<br>
    bla<br>
  </div>

  <div style='width:300px;background-color:green' id='without'>
    <h1>Without a border</h1>
    bla<br>
    bla<br>
    bla<br>
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T12:05:13.190

`<h1 />`这是因为当有边框时，嵌套的上边距被包含在内。注意@Elliott 的小提琴不起作用，因为边距已被 jsfiddle 的默认设置删除。

编辑：查看更多信息[http://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T12:15:33.000

默认情况下，`<h1>`元素具有顶部和底部边距，并且[这些边距是折叠的](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)。关于边距如何折叠（即合并）有一些规则。适用于您的示例的规则是：

> # 父母和第一个/最后一个孩子
> 
> 如果没有边框、内边距、内联内容或间隙将块的外边距顶部与其第一个子块的外边距顶部分开，或者没有边框、内边距、内联内容、高度、最小高度或最大-height 将块的边距底部与其最后一个子块的边距底部分开，然后这些边距折叠。折叠的边距最终在父级之外。

在您的示例中，该规则可以解读为：

*   `div#without`没有边框，它的上边距（为 0）折叠为上边距`h1`（约为 20px）。*折叠的边距最终在 div 之外*。这意味着这 20px 不会添加到 div 的高度。

*   `div#with`有一个边框，所以`h1`（大约 20 像素）的上边距在 div*内*呈现，使其比预期高 20 像素。

# c# - 有没有办法检测我正在使用什么样的连接？WiFi、3G 还是以太网？

> ID：13625359
> 
> 赞同：6
> 
> 时间：2012-11-29T11:59:26.330
> 
> 标签：c#, winforms, networking, wifi, 3g

我正在尝试检测我连接到哪种网络连接。是WiFi还是3G？有没有办法使用 c# win forms .net 2.0 或 4.0 来做到这一点？

```
 foreach (NetworkInterface adapter in adapters)
        {
            if (adapter.OperationalStatus == OperationalStatus.Up)
            {
                if (adapter.NetworkInterfaceType == NetworkInterfaceType.Wireless80211)
                {
                    lblNetworkType.Text = "you are using WiFi";
                    break;
                }
                else if (adapter.NetworkInterfaceType == NetworkInterfaceType.Ppp)
                {
                    lblNetworkType.Text = "you are using 3G or ADSL or Dialup";
                    break;
                }
                else if (adapter.NetworkInterfaceType == NetworkInterfaceType.Ethernet)
                {
                    lblNetworkType.Text = "you are using Ethernet";
                    break;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:08:08.137

不幸的是，没有一种“简洁”的方式来做到这一点。3G 连接看起来与 ADSL 或拨号连接相同（网络类型为 PPP）。

如果您确定您永远只能使用 WiFi/3G，那么您可以检查[GetAllNetworkInterfaces](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getallnetworkinterfaces.aspx)`NetworkInterface`提供的类中的信息，如果接口类型为 PPP，则将其视为 3G。但正如我提到的，其他类型的调制解调器连接也是如此。

编辑：在设备名称或描述中查找“3G”、“HSPA”、“HSDPA”、“加密狗”可能会有一些运气。但这只是一个“体面的猜测”，而不是绝对确定的。

# jquery - jQuery UI 选项卡和多选 href 对基标记的错误处理

> ID：13625370
> 
> 赞同：1
> 
> 时间：2012-11-29T12:00:35.463
> 
> 标签：jquery, jquery-ui, href, multi-select, base

我正在尝试解决最近对 jQuery UI 的更改带来的问题。我正在使用 codeigniter、jquery 1.8.2.、jquery UI 1.9.1。

我总是把它放在头部：

```
<base href="http://www.example.com/" /> 
```

所以我可以为我的图像、ajax 调用和其他原因使用集中的 url 方法。问题是，jquery UI 也将使用它作为所有页面的所有锚点 href 的参考。例如，如果您将 jQuery UI 选项卡放入

[http://www.example.com/view/users/1](http://www.example.com/view/users/1)

第一个选项卡将加载主页的内容，因为它加载

[http://www.example.com/#](http://www.example.com/#)路径

仅与多选（http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/）相同的问题，选中全部并取消选中全部会将您重定向到主页，因为

```
<a href="#"> 
```

将带您到[http://www.example.com/#](http://www.example.com/#)而不是调用当前页面的 js 函数，例如[http://www.example.com/view/users/1#](http://www.example.com/view/users/1#)

找到类似的票：

[http://bugs.jqueryui.com/ticket/4941](http://bugs.jqueryui.com/ticket/4941)

[http://bugs.jqueryui.com/ticket/8637](http://bugs.jqueryui.com/ticket/8637)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:20:13.737

```
$.fn.__tabs = $.fn.tabs;$.fn.tabs = function (a, b, c, d, e, f) {
var base = location.href.replace(/#.*$/, '');
$('ul>li>a[href^="#"]', this).each(function () {
    var href = $(this).attr('href');
    $(this).attr('href', base + href);
});
$(this).__tabs(a, b, c, d, e, f);
}; 
```

奇怪的。这对我有用。对于标签。

# design-patterns - EventStore 和应用程序生命周期

> ID：13625376
> 
> 赞同：4
> 
> 时间：2012-11-29T12:00:54.707
> 
> 标签：design-patterns, cqrs, neventstore

也许这个问题很愚蠢，但我有点困惑。假设我们想要利用这种模式：

*   企业应用程序中的事件存储范围究竟是什么？

*   事件存储是在多个进程之间共享，还是只是一个进程内概念？

*   当应用程序关闭时，事件会发生什么？它们是绑定到应用程序“实例”还是应用程序？

*   事件存储和带有 Publisher/Subscriber 的 MessageBus 之间有什么区别（我们可以存储消息历史的事实的一部分？

*   谁负责消息的幂等性？

*   这句话的实际含义是什么：*“有趣的是，即使不存在跨所涉及的各种资源（例如消息队列和持久存储）的分布式事务，EventStore 也能够确保完全事务性的体验。这是通过拆分来实现的将分布式事务分成更小的部分并单独执行每个事务”*（[来自这个项目](https://github.com/joliver/EventStore)）我无法理解如何将事务分成几个小部分，即使所有事务本身都是事务性的，也可以替换分布式事务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T21:08:20.983

> 企业应用程序中的事件存储范围究竟是什么？

在这个意义上，事件存储就像一个数据库。它不受任何给定应用程序的限制。但是，它可以通过业务/语言边界来确定范围。例如，如果您将系统划分为子系统，则每个子系统都可以拥有自己的事件存储实例。

> 事件存储是在多个进程之间共享，还是只是一个进程内概念？

它不是一个过程中的概念。它在进程/应用程序之间共享，就像数据库一样。

> 当应用程序关闭时，事件会发生什么？它们是绑定到应用程序“实例”还是应用程序？

事件存储将存储应用程序要求它存储的所有事件。事件以流 ID 为键，该 ID 通常是[聚合根](https://stackoverflow.com/questions/1958621/whats-an-aggregate-root)的 ID 。这不受特定应用程序实例的约束。

> 事件存储和带有 Publisher/Subscriber 的 MessageBus 之间有什么区别（我们可以存储消息历史的事实的一部分？

消息历史的存储基本上是功能方面的主要区别。用例的不同之处在于消息总线用于在端点之间传递消息，而事件存储则用于持久化消息（通常是事件）。

> 谁负责消息的幂等性？

你作为开发者。事件存储将事件视为由流键入的序列化数据，可能带有版本控制。通过版本控制，它可以处理某些冲突，但由您决定消息是否具有幂等性。

> 我无法理解如何将事务分成几个小部分，即使所有事务本身都是事务性的，也可以取代分布式事务。

看看[澄清 Saga 模式](http://kellabyte.com/2012/05/30/clarifying-the-saga-pattern/)。基本思想是，不是将多个操作分组到单个分布式事务下，而是将操作分解为多个部分。如果某个部分失败（这将导致分布式 tx 中的回滚），则会发送一条错误消息，允许相关方回滚操作。这可以看作是一种补偿形式，是分析许多业务场景的一种更自然的方式。例如，当付款交易被视为无效时，它不会被删除，而是会添加补偿交易。这种表示活动的方式更符合现实，因为在现实中很少有“未完成”的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T22:25:07.033

多少问题！

> 企业应用程序中的事件存储范围究竟是什么？

事件存储不是一种正确的模式，它是一种通常与两种不同（但密切相关）模式一起使用的技术：[事件溯源](http://martinfowler.com/eaaDev/EventSourcing.html)和[命令和查询责任分离](http://cqrs.wordpress.com/)。作为“存储”，它只是保持与业务相关的应用程序状态的一种方式。

这两种模式经常与[领域模型结合使用，因为它们与 Evans 在](http://gojko.net/2010/06/11/evolution-of-ddd-cqrs-and-event-sourcing/)[领域驱动设计](https://rads.stackoverflow.com/amzn/click/com/0321125215)中引入的模式配合得很好。

EventStore 允许您持久化域事件（事件溯源方式）或应用程序事件（又名命令，在 CQRS 中）。它不同于文档和关系存储，因为您不保存模型的状态，而是保存导致它的事件。但是，您可以使用 RDBMS 或文档数据库来存储事件。

然后要检索实体，您可以简单地按顺序播放注册的每个事件/命令。快照可用于加快此过程。

> 事件存储是在多个进程之间共享，还是只是一个进程内概念？

这取决于商店的实现，但没有理由阻止它在多个进程和/或应用程序中使用。

> 当应用程序关闭时，事件会发生什么？它们是绑定到应用程序“实例”还是应用程序？

同样，它取决于商店的实施。最简单的事件存储将事件保存到编号的文件中，因此当应用程序关闭时，事件仍然存在（这总是让我想起 Thompson 的话：“我们有持久性对象，我们称它们为文件”）。
但是，如果您的应用程序确实需要它，没有什么能阻止您在内存中拥有一个易失性事件存储。我会将其实现为仅附加的集合，以保持输入顺序。

> 事件存储和带有 Publisher/Subscriber 的 MessageBus 之间有什么区别（我们可以存储消息历史的事实的一部分？

消息总线是传递消息的工具。事件（和命令）是消息，因此您可以使用它来传递它们。相反，事件存储是一种持久性工具。

> 谁负责消息的幂等性？

在最常见的情况下，设计领域模型的人。在非 DDD 系统中，是设计消息（事件或命令）的人。事实上，幂等性必须由消息的接收者来保证，而不是由技术本身来保证。

鉴于此，EventStore 可以在检测到重复消息时合并它们。但这并不能使模型本身具有幂等性。

> 这句话实际上是什么意思：“有趣的是，即使不存在跨所涉及的各种资源（例如消息队列和持久存储）的分布式事务，EventStore 也能够确保完全事务性的体验。这是通过拆分来实现的将分布式事务分成更小的部分并单独执行每个事务”（来自这个项目）我无法理解如何将事务分成几个小部分，即使所有事务本身都是事务性的，也可以替换分布式事务。

这取决于作者赋予“完全交易体验”的含义。对我来说，这句话看起来是错误的，因为它会破坏[布鲁尔定理](http://www.julianbrowne.com/article/viewer/brewers-cap-theorem)。

你会发现这个来自 Microsoft 和 Greg Young 的[CQRS Journey很有用。](http://msdn.microsoft.com/en-us/library/jj554200.aspx)

明天在办公室见 :-)

# r - 在 R 中生成一个新变量，其中第 n 个观察值取决于另一列的第 n-1 个观察值

> ID：13625378
> 
> 赞同：1
> 
> 时间：2012-11-29T12:00:58.910
> 
> 标签：r, dataframe

假设我有一个看起来像这样的数据框：

```
>df
city  year  ceep
  1    1      1
  1    2      1
  1    3      0
  1    4      1
  1    5      0
  2    1      0
  2    2      1
  2    3      1
  2    4      0
  2    5      1
  3    1      1
  3    2      0
  3    3      1
  3    4      0
  3    5      1 
```

现在我想创建一个新变量 'veep'，它取决于来自不同行的 'city' 和 'ceep' 的值。例如，

```
veep=1 if ceep[_n-1]=1 & city=city[_n-1]
veep=1 if ceep[_n+2]=1 & ceep[_n+3]=1 & city=city[_n+3] 
```

`n`观察的行在哪里。我不确定如何将这些条件翻译成 R 语言。我想我遇到问题的地方是选择观察行。我正在考虑以下代码：

```
df$veep[df$ceep(of the n-1th observation)==1 & city==city(n-1th observ.)] <- 1
df$veep[df$ceep(of the n+2th observation)==1 & df$ceep(of the n+3th observation)==1 &
city==city(n+3th observ.)] <- 1

#note: what's in parentheses is just to demonstrate where I'm having trouble 
```

任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:45:37.813

这是一种写出逻辑步骤的方法。请注意使用`idx`来索引向量。这对于避免超出范围的索引是必要的。

```
idx <- seq_len(nrow(df))

# Set a default value for the new variable
df$veep <- NA 
```

您的第一组逻辑标准不能应用于 的第一行`df`，因为索引`n - 1`是`0`，而这不是有效的行索引。因此，用于`tail(*, -1)`挑选除 and 的第一个条目之外的所有条目，`veep`并`city`使用`head(*, -1)`挑选除`ceep`and的最后一个条目之外的所有条目`city`。

```
df[tail(idx, -1), "veep"] <- ifelse(
  head(df$ceep, -1) == 1 &
  tail(df$city, -1) == head(df$city, -1),
  1, tail(df$veep, -1)) 
```

您的下一组标准不能应用于 的最后三行`df`，因为`n + 3`那样将是无效索引。所以再次使用`head`and`tail`函数。一个棘手的部分是第一个`ceep`语句基于`n + 2`, not `n + 3`，因此需要`head`和的组合`tail`。

```
df[head(idx, -3), "veep"] <- ifelse(
  head(tail(df$ceep, -2), -1) == 1 &
  tail(df$ceep, -3) == 1 &
  head(df$city, -3) == tail(df$city, -3),
  1, head(df$veep, -3))

> df$veep
 [1] NA  1  1 NA  1 NA NA  1  1 NA NA  1 NA  1 NA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:24:10.853

您可以像这样使用 for 循环

```
df$veep <- 0   

for (i in seq(nrow(df))){
 if (i > 1 & i < nrow(df)-2){
    if (df[i-1,"ceep"]==1 & df[i-1,"city"] == df[i,"city"])
       df[i,"veep"] <- 1
 }
} 
```

# android - 在 Eclipse MainActivity.java 上的哪里插入 webview 代码？

> ID：13625379
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:01:02.210
> 
> 标签：android, html, eclipse, webview

**您好，我试图在我的 mainactivity 中插入一段代码，因此当我的 webview 应用程序的用户尝试在没有互联网连接的情况下打开它时，会出现错误页面。**

**这个：**

![在此处输入图像描述](../Images/233429785fc332cd5404f20ad7121cfc.png)

**而不是这个：**

![在此处输入图像描述](../Images/704f1496b99c239bff082011c7a46d5a.png)

**我在我的主要活动中已经拥有的代码是：**

```
package com.mutesoft.kokobeans;

import com.mutesoft.kokobeans.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class kokobeansActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);

        WebView mainWebView = (WebView) findViewById(R.id.mainWebView);

        WebSettings webSettings = mainWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        mainWebView.setWebViewClient(new MyCustomWebViewClient());
        mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

        mainWebView.loadUrl("http://facebook.com");
    }

    private class MyCustomWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }
} 
```

**我在[防止 WebView 显示“网页不可用”上](https://stackoverflow.com/questions/6552160/prevent-webview-from-displaying-web-page-not-available)看到的代码是这样的，因为我认为它可以解决我的问题：**

```
mWebView.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                mWebView.loadUrl("file:///android_asset/myerrorpage.html");
            }
        }); 
```

**但是我只用了几天的eclipse，我不知道在哪里插入这段代码。有人可以插入它并像他应该的那样完整地粘贴它，并用不同的颜色“突出显示”或者你把它放在哪里？厌倦了我无法修复的许多错误.. :)**

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:04:05.553

您始终可以尝试在启动时测试连接性，如果设备未连接，则从原始文件夹而不是文件加载实际的 HTML 代码。

```
public static boolean isConnected(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();
    if (info == null) {
        return false;
    }
    return info.isConnected();
} 
```

ps 这个需要权限

# .net - 拖动选项卡以显示在前面

> ID：13625387
> 
> 赞同：2
> 
> 时间：2012-11-29T12:01:20.073
> 
> 标签：.net, wpf, tabcontrol, tabitem

我正在将应用程序外部的数据拖到 TabControl 上。我希望能够拖过“标签”并将该标签带到前面。TabControl 和 TabItems 上的拖动事件似乎只针对活动选项卡触发，并且仅在拖动选项卡内容时触发，而不是“选项卡”本身。

![拖到选项卡](../Images/588698d507b4e60a3c3324fef2c3b1fb.png)

控件的标记是：

```
<Window
    x:Class="DragOverTabExample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow"
    Height="350"
    Width="525">
    <TabControl
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch">
        <TabItem
            Header="Tab A">
            <TextBlock>Tab A</TextBlock>
        </TabItem>
        <TabItem
            Header="Tab B">
            <TextBlock>Tab B</TextBlock>
        </TabItem>
    </TabControl>
</Window> 
```

我已经尝试将行为添加到 TabControl 和下面的各个 TabItems，附加到 DragOver 和 DragEnter 事件，但如上所述，在拖动选项卡本身时似乎没有触发。

```
namespace Sample
{
    public class ActivateOnDragOverBehaviour : Behavior<TabControl>
    {
        protected override void OnAttached()
        {
            AssociatedObject.DragOver += ActivateTab;
        }

        private void ActivateTab(object sender, DragEventArgs e)
        {
            // Bring hovered tab to front
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:57:25.413

您必须在 TabControl 上设置 AllowDrop="True" 才能触发事件

# c++ - 在 DLL 中分配内存并将指向它的指针指向客户端应用程序是不好的做法吗？

> ID：13625388
> 
> 赞同：16
> 
> 时间：2012-11-29T12:01:21.667
> 
> 标签：c++, design-patterns

我正在使用动态加载 DLL 的 exe。DLL 中的函数在堆上分配内存并将指向该内存的指针传递给 exe。

一位资深人士表示，这样做是不好的做法。他说，如果我必须在 exe 和 DLL 之间共享内存，则 exe 必须分配内存并将指向该内存的指针传递给 DLL，反之亦然。这是真的？为什么？

编辑：就我而言，我计划在 DLL 本身内部分配和释放内存。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T13:03:09.760

以下是让调用者提供指针的一些原因：

1.  **对称所有权语义。**其他几个答案已经解释了这一点。
2.  **避免分配器和释放器不匹配。** 正如[Aesthete 的回答](https://stackoverflow.com/a/13625555/179715)中提到的，如果 DLL 分配一个指针并返回它，调用者*必须*调用相应的释放器来释放它。这不一定是微不足道的：DLL 可能与一个版本的 / 静态链接，而`malloc`/`free`则与/`.exe`的不同版本链接。（例如，DLL 可能使用发布版本，而 DLL使用专门的调试版本。）`malloc``free``.exe`
3.  **灵活性。** 如果 DLL 用于一般用途，则让调用者分配内存可为调用者提供更多选择。假设调用者不想使用`malloc`，而是希望从某个特定的内存池中分配内存。也许这是调用者可以提供指向堆栈上分配的内存的指针的情况。如果 DLL 自己分配内存，则调用者没有这些选项中的任何一个。

（第二点和第三点也主要可以通过`.exe`提供一个分配器/释放器供 DLL 代码使用来解决。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-29T12:07:32.377

设计模式背后的基本思想之一是所有权。这个想法是 - `one who creates a resource (and thereby holds it in the pointer) should be responsible for deleting the resource`。这将确保设计的神圣性，并且在项目的更长生命周期中，其开发人员可以看到更少的错误。

所以现在在你的情况下，任何可执行文件都可以附加 DLL，他可以尝试删除资源，这可能会导致未来的问题。所以我认为反之亦然，我认为这是一个合理的建议。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-29T12:10:59.453

我以前见过这个问题，它是由链接到 CRT（静态、动态 MT 等）的 DLL 和 exe 引起的。

我将在 DLL 和可执行文件之间传递一个指向内存的指针，它们都应该提供某种`Free()`功能来从各自的堆中释放内存。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-29T12:21:13.527

通常，堆（The One Heap）属于进程，从哪里分配都没有关系，所以这可以正常工作，**除非它不是**。

因此，声称这是“不良做法”是有效的。很少有事情比可以正常工作的事情更糟糕，除非它不能正常工作。

最糟糕的是，当一切都崩溃时，并不能立即看出哪里出了问题，而且您很容易在不知不觉中遇到问题。这可能就像将特定版本的 CRT 链接到您的 DLL 一样简单。或者您团队中的某个人可能出于某种原因创建了一个单独的堆。或者，其他一些不是立即显而易见的原因导致另一个堆被创建。

使 free-from-wrong-heap 情况如此恶劣的原因在于，您通常不知道会发生什么，或何时（或是否有人会注意到）。

*您可能会从堆函数或*异常中获得 NULL 返回值。您的应用程序可能已经为它们中的任何一个做好了准备，也可能没有（老实说，您总是检查返回值，不是吗？）。它可能会在释放后立即崩溃，或者您可能只是默默地泄漏内存并在几分钟或几小时后耗尽地址空间（或内存），没人知道为什么。或者是其他东西。
因此，您所看到的可能与导致问题的原因（明显）不相关。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-29T14:44:54.007

我只想指出，**将分配器传递**给 DLL 以分配内存是非常安全的，并且是 C++ std 库本身使用的标准模型。在这种情况下，分配是由 DLL 通过调用者传递的方法完成的，**避免传递指针**，并避免链接到不同实现的问题`malloc()`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-29T12:28:29.110

exe 和 dll 可能有不同的堆。当任何一个尝试释放另一个分配的内存时，释放失败并且存在泄漏。

仅当 exe 和 dll 使用相同版本的 CRT 动态使用 CRT 时，它们才使用相同的堆。

所以在同一个二进制文件中进行分配和释放是一个很好的建议。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-29T12:07:02.363

我认为交出原始指针通常是不好的做法。如果是 dll，它应该返回一个智能指针，该指针具有一个自定义删除器，可以适当地处理清理（选项是`std::unique_ptr`，`std::shared_ptr`或`boost::shared_ptr`按优先顺序排列）。

事实上，使用它可能更安全，`std::weak_ptr`或者`boost::weak_ptr`- 这些要求您在每次要访问资源时进行检查，因为此时 dll 可能已被卸载。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-29T12:11:47.030

正如@kumar_m_kiran 已经指出的那样，这是关于所有权问题，但是我想指出，@aleguna 也是正确的，因此，恕我直言，正确的规则是“在 DLL 或 EXE 中分配和释放相同的内存，但不是在两者中” .

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-29T12:41:20.460

这不一定是不好的做法，但它是危险的做法（而且可能是坏的）。您需要仔细考虑谁负责释放内存。exe 可能无法（或不应该）直接释放 DLL 的内存，因此可能会在以后将此指针传递回 DLL。所以现在我们在一个 EXE 和一个 DLL 之间来回传递一个指针，这不是很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-15T15:21:11.703

I'd say no, it's not "bad practice". From my experience, you just need to be careful that you release that pointer in the right memory space. I've built a graphics engine that allocated assets in multiple DLLs (each DLL represented a mini game); using a shared_ptr (at the time it was Boost, however, I'm sure the C++11 (or newer) std::shared_ptr supports the same semantics). I would supply a function that would delete the memory in the right space. The main concern, at this point, is that you ensure you free your shared_ptrs before you free the DLL. I can't recall now, but we might have used a list of shared_ptrs owned by the DLL/DLL wrapper, and all other uses of the pointer were through a weak_ptr TO that shared_ptr.

# c# - 串行命令 - NEC 投影仪

> ID：13625389
> 
> 赞同：0
> 
> 时间：2012-11-29T12:01:23.627
> 
> 标签：c#, com, serial-port

我正在开发一个将串行命令写入 NEC 投影仪的 C# 应用程序。我可以`RealTerm`使用“发送号码”功能很好地发送命令，但似乎无法让它通过我的应用程序工作。

命令的格式是

**`POWER ON - 02H 00H 00H 00H 00H 02H`**

**`POWER OFF - 02H 01H 00H 00H 00H 03H`**

我尝试使用`WriteLine(command)`- 作为字符串发送，并使用以下代码将其转换为字节数组：

```
public static byte[] ToByteArray(string StringToConvert)
{
    char[] CharArray = StringToConvert.ToCharArray();
    byte[] ByteArray = new byte[CharArray.Length];
    for (int i = 0; i < CharArray.Length; i++)
    {
        ByteArray[i] = Convert.ToByte(CharArray[i]);
    }

    return ByteArray;
} 
```

似乎没有任何效果，我应该从我的 C# 端向端口发送什么？希望有人能尽快提供帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:04:37.460

您可以使用 Write 方法，它需要一个字符串作为参数：

[SerialPort.Write](http://msdn.microsoft.com/en-us/library/y2sxhat8.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:57:09.897

尝试从字符串转换这些命令没有什么意义。它们不是字符串。因此，只需以本机格式将它们写在您的代码中：

```
private byte[] powerOnCmd  = new byte[] { 0x02, 0x00, 0x00, 0x00, 0x02 };
private byte[] powerOffCmd = new byte[] { 0x02, 0x01, 0x00, 0x00, 0x03 }; 
```

现在很简单：

```
private void sendCommand(byte[] cmd) {
   serialPort1.Write(cmd, 0, cmd.Length);
}
private void PowerOn() {
   sendCommand(powerOnCmd);
} 
```

# c# - XML 节点编辑。

> ID：13625394
> 
> 赞同：4
> 
> 时间：2012-11-29T12:01:28.687
> 
> 标签：c#, asp.net, xml

我将查询字符串中的值分配给这些文本框并且效果很好，但是每当我在其中一个文本框中编辑文本并尝试将编辑后的数据保存在 XML 节点中时，我都无法

```
protected void Page_Load(object sender, EventArgs e) 
{ 
    if (Request.QueryString != null) 
    { 
        TextBox_firstname.Text = Request.QueryString["column1"]; 
        TextBox_lastname.Text = Request.QueryString["column2"]; 
    } 
    else 
    { 
    } 
} 
```

这段代码有什么问题吗？它将未编辑的版本保存在节点中！

```
public string str_id; 
public int id; 
id = int.Parse(str_id); 

XDocument xdoc = XDocument.Load(filepath); 

if (id == 1) 
{ 
    var StudentNodeWithID1 = xdoc.Descendants("students") 
        .Elements("student") 
        .Where(s => s.Element("id").Value == "1") 
        .SingleOrDefault(); 
    StudentNodeWithID1.Element("first_name").Value = TextBox_firstname.Text; 
    StudentNodeWithID1.Element("last_name").Value = TextBox_lastname.Text; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:09:00.047

Page_Load 在每次加载时触发（在回发时以及在初始加载时）。`Request.QueryString`在您的事件处理程序尝试保存之前，您的代码当前在每次加载时默认这些值。

改为这样做：

```
 protected void Page_Load(object sender, EventArgs e) 
        {
            if (!IsPostBack && Request.QueryString != null) 
            { 
                TextBox_firstname.Text = Request.QueryString["column1"]; 
                TextBox_lastname.Text = Request.QueryString["column2"]; 
            } 
            else 
            { 
            } 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:41:34.100

如果您要提交已编辑的文本框，则需要将代码包装在您`Pageload`的`IsPostback`检查中，以确保值不会重置为原始值。

# timestamp - 如何使用列类型 Timestamp 创建外部 Hive 表

> ID：13625400
> 
> 赞同：1
> 
> 时间：2012-11-29T12:01:43.490
> 
> 标签：timestamp, hive, hiveql

我想从 HDFS 中包含 epoch 的文本文件创建一个外部 Hive 表。假设文件位于`/user/me/test.txt`. 这是文件内容：

```
1354183921
1354183922 
```

我安装了 Hive 0.8.1 并且应该能够使用类型 Timestamp，所以我创建了表：

```
hive> CREATE EXTERNAL TABLE test1 (epoch Timestamp)
      LOCATION '/user/me'; 
```

然后我查询了表：

```
SELECT * FROM test1; 
```

并得到以下异常：

```
Failed with exception java.io.IOException:java.lang.IllegalArgumentException: 
Timestamp format must be yyyy-mm-dd hh:mm:ss[.fffffffff] 
```

创建外部表时我错过了什么吗？我很困惑，因为 Hive（自 0.8 起）在第二个支持 Unix 纪元格式的时间戳：[https ://cwiki.apache.org/Hive/languagemanual-types.html#LanguageManualTypes-Timestamps](https://cwiki.apache.org/Hive/languagemanual-types.html#LanguageManualTypes-Timestamps)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:09:41.147

Timestamp 字符串必须采用错误消息和链接中指定的格式 yyyy-mm-dd hh:mm:ss[.fffffffff]。要使用包含 epoch 的数据，您必须定义为 BIGINT，然后使用内置 UDF from_unixtime() 转换为表示日期的字符串。然后，您可以使用其他[内置 UDF 日期函数](https://cwiki.apache.org/Hive/languagemanual-udf.html#LanguageManualUDF-DateFunctions)来操作此日期。

# c++ - read() 和 write() 到返回损坏值的套接字

> ID：13625405
> 
> 赞同：0
> 
> 时间：2012-11-29T12:01:56.967
> 
> 标签：c++, linux, sockets, solaris

我尝试使用`write()`命令写入套接字。我需要写入的数据是结构类型的，它包含数据类型`char`和`int`数据类型的值。但是当我将数据写入服务器套接字时，`int`变量的值被破坏了。我`16777216`一如既往地收到一个价值。

我正在从一`Solaris`台机器写到一台`Linux`机器。`Solaris`是32位机器，`Linux`也是64位机器。这对我的问题有什么影响。

我使用`htonl`/`ntohl`和反之亦然将`int`eger 值从服务器传递到服务器。但是，如果我将整个结构类型写入套接字，我该如何使用它呢？谁能帮我解决这个问题？

```
PCHAR data = NULL;
int size = sizeof(WSMsg);
int retry = 10;
data = new char [sizeof(WSMsg)];
memcpy(data, msg, sizeof(WSMsg));
int n = write(fd, &data[0], size); 
```

这是我的代码部分。这`WSMsg`是结构类型和具有`int`和`char`类型值。

我正在从包含数字、`char`类型值的数据库表中写入特定行。我正在写这样的不同表格的不同行。因此，如果我需要使用`htonl`/`ntohl`那么我需要将所有这些数字转换为网络字节。由于我有 20 个或更多表及其具有整数类型值的结构，因此将所有这些转换并发送出去对我来说将是一项耗时的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:10:22.820

看来您的字节顺序有问题。有几种不同的方法可以解决这个问题：一种是研究[序列化](http://en.wikipedia.org/wiki/Serialization)，即将您发送的结构转换为与字节顺序问题无关的格式；另一种解决方案是创建结构的副本，并在需要时使用 eg `htons`/ ：`htonl`

```
WSMsg temp = *msg;
temp.someShortField = htons(temp.someShortField);
// etc. 
```

然后当然在接收端做相反的事情。

# ios - CCUserDefault、ios/android 游戏和游戏更新

> ID：13625412
> 
> 赞同：1
> 
> 时间：2012-11-29T12:02:13.497
> 
> 标签：ios, save, cocos2d-x

我的游戏使用cocos2d-x，会先在iOS平台上发布，然后在Android平台上发布。我用 CCUserDefault 保存了很多东西（分数、完成了哪个级别、获得的硬币数量等......）。但现在我有一个很大的疑问。当游戏收到第一次更新时会发生什么？CCUserDefault 使用存储在应用程序存储空间中某处的 xml 文件。该文件被创建并保留，直到卸载应用程序。我想知道应用程序更新后会发生什么。旧的xml文件会保留吗？因为如果不是，我应该如何处理应用程序更新（更新意味着将添加 2,3 个或更多新关卡包，但有关旧包的信息，如分数、已完成的关卡和未完成的关卡、硬币数量等等......，绝对不要丢失）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:32:21.503

据我所知，它们通常不会在更新时重置，您需要删除该应用程序。我认为你在第一次/上一次更新时需要做一些设置来表示/告诉版本，如果它不等于最近的版本，而不是用一些基本设置更新你的 NSUserDefualt 或者说重置你的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:00:15.327

好的，我找到了答案。CCUserDefault 将 xml 文件存储在：

> application_home/库/缓存

iOS App Programming Guide 声明所有数据在

> application_home/文档
> 
> application_home/库

将被保留。也就是说，更新后，您的 userdefault.xml 文件仍然存在。

# java - 获取kdtree的最小元素

> ID：13625415
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:02:23.670
> 
> 标签：java, kdtree

我想得到一个kdtree二维（x，y）的最小元素。最小元素是kdtree的每个元素（x'，y'），x

作为可以重复的元素 x，返回其中之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:52:42.787

找到离 (-BIG_NUMBER,-BIG_NUMBER) 最近的点怎么样？

# asp.net-mvc-3 - 如何为此编写好的 LINQ 查询？

> ID：13625416
> 
> 赞同：0
> 
> 时间：2012-11-29T12:02:25.423
> 
> 标签：asp.net-mvc-3, linq

我有一个 LINQ 查询。当我运行查询时，执行操作需要花费大量时间。我怎样才能修改查询以表现良好。这是 LINQ 查询。

**询问**

```
var model = (from items in Db.Items
                         where items.ItemNo == DD.ItemNumber
                         select new ViewModel()
                         {
                             INo = items.ItemNo,
                             BTags = (from asd in Db.BibContents where asd.BibId == items.BibId && asd.TagNo == "245" && asd.Sfld == "a" select asd.Value).FirstOrDefault(),
                             Sid = (from stat in Db.ItemStatus1 where stat.Id == items.StatusId select stat.Description).FirstOrDefault(),
                             Option = DD.Option
                         }).ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:05:07.120

您应该在 SQL Profiler 和 Query Analyzer 中分析查询。问题可能是您的表上的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:50:16.203

确保 EF 不会导致**Select N+1**问题。

[http://blogs.microsoft.co.il/blogs/gilf/archive/2010/08/18/select-n-1-problem-how-to-decrease-your-orm-performance.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/08/18/select-n-1-problem-how-to-decrease-your-orm-performance.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:02:34.560

首先，虽然您的查询始终使用数据库对象，但您最好在 SQL 中完成所有工作，只将结果带到 LINQ。

这可能会提高你的表现。

# google-bigquery - 调用 projectListRequest.execute() 方法时出现 NoSuchMethodError 错误

> ID：13625419
> 
> 赞同：1
> 
> 时间：2012-11-29T12:02:48.157
> 
> 标签：google-bigquery

我正在尝试使用 JSP Servlets 开发一个简单的 BigQuery 应用程序。我正在遵循[https://developers.google.com/bigquery/docs/authorization上给出的示例](https://developers.google.com/bigquery/docs/authorization)

在早期阶段，doGet 方法没有被调用，所以我重写了 Service 方法。代码看起来像这样

```
public class BigQueryWebServerAuthDemo extends AbstractAuthorizationCodeServlet {

 protected void service(HttpServletRequest req, HttpServletResponse resp)
          throws IOException, ServletException {
     System.out.println(" Start service ");
     doGet(req, resp);
 }

  @Override

  public void doGet(HttpServletRequest request, HttpServletResponse response)
  throws IOException {

   System.out.println(" Start doGet ");

   doPost(request, response);
     }

  public void doPost(HttpServletRequest request, HttpServletResponse response)
      throws IOException {
  System.out.println(" Start doPost "); 

response.setContentType("text/html");

PrintWriter writer = response.getWriter();

System.out.println(" Begin loadbigquery() ");

Bigquery bigquery = CredentialUtils.loadbigquery();

System.out.println(" end loadbigquery() ");

Bigquery.Projects.List projectListRequest = bigquery.projects().list();
ProjectList projectList = projectListRequest.execute();

if (projectList.getProjects() != null) {

  java.util.List<Projects> projects = projectList.getProjects();
  writer.println("<h3>BigQuery project list:</h3>");

  for (ProjectList.Projects project : projects) {
    writer.printf("%s<br />", project.getProjectReference().getProjectId());
  }

}
System.out.println(" End doPost "); 
 }

      @Override
     protected AuthorizationCodeFlow initializeFlow() throws ServletException, IOException {

    System.out.println(" inside BigQueryWebServerAuthDemo ---  initializeFlow() "); 

     return CredentialUtils.newFlow();
    }

   @Override
  protected String getRedirectUri(HttpServletRequest request) throws ServletException, IOException {

    System.out.println(" inside BigQueryWebServerAuthDemo --- getRedirectUri() "); 

   return CredentialUtils.getRedirectUri(request);
   }

   @Override
   protected String getUserId(HttpServletRequest request) throws ServletException,               IOException {

    System.out.println(" inside BigQueryWebServerAuthDemo --- getUserId "); 

       return request.getParameter("userId");  
      } 
```

}

我有一个 JSP 页面，从中获取参数“userId”。现在我在 execute() 方法 [projectListRequest.execute()] 上得到一个 NoSuchMethodError，尽管 Eclipse 编译器没有显示任何错误。

下面是我的 web.xml 配置信息

```
 <servlet>
       <servlet-name>oauth2callback</servlet-name>
       <servlet-class>main.BigQueryWebServerAuthCallBack</servlet-class>
     </servlet>

    <servlet-mapping>
      <servlet-name>oauth2callback</servlet-name>
      <url-pattern>/oauth2callback</url-pattern>
    </servlet-mapping>

    <servlet>
       <servlet-name>ServletBigQuery</servlet-name>
       <servlet-class>main.BigQueryWebServerAuthDemo</servlet-class>
    </servlet>

    <servlet-mapping>
      <servlet-name>ServletBigQuery</servlet-name>
      <url-pattern>/ServletBigQuery</url-pattern>
    </servlet-mapping> 
```

如上面提到的教程中给出的，我还有 2 个类 CredentialUtils 和 BigQueryWebServerAuthCallBack。

我实际上是 Java 新手。我想摆脱 NoSuchMethodError 错误。任何帮助将不胜感激。

# c# - 如何更改我的树视图图标 insted of +,- 就像 c#.net win 表单中的 Windows 资源管理器树视图

> ID：13625420
> 
> 赞同：4
> 
> 时间：2012-11-29T12:02:48.173
> 
> 标签：c#, winforms, treeview, uxtheme

如何更改在`ShowPlusMinus`和/或`ShowRootLines`are时出现的加号 (+) 和减号 (-) 图像的展开/折叠图像`true`。

为了帮助可视化，我想制作以下 TreeView [![树视图加/减 +/-](../Images/268de339531d57ff74691dbfb42705be.png)](https://i.stack.imgur.com/8SPo0.png)

看起来像这样（如 Windows 资源管理器）

[![树视图箭头](../Images/3a3d3b580f2c0835eb9193a5386f07be.png)](https://i.stack.imgur.com/ru2FM.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-08T02:11:34.297

扩展[Ivan Ičin](https://stackoverflow.com/a/13626068/3504007)的解决方案：

```
[DllImport("uxtheme.dll", ExactSpelling = true, CharSet = CharSet.Unicode)]
private static extern int SetWindowTheme(IntPtr hwnd, string pszSubAppName, string pszSubIdList);

public static void SetTreeViewTheme(IntPtr treeHandle) {
     SetWindowTheme(treeHandle, "explorer", null);
} 
```

要使用，请将 a 添加`TreeView`到您的表单中，然后在`Form_Load`：

```
SetTreeViewTheme( treeView1.Handle ); 
```

或者，您可以扩展 TreeView 对象

```
public class MyTreeView : TreeView
{

    [DllImport("uxtheme.dll", ExactSpelling = true, CharSet = CharSet.Unicode)]
    private static extern int SetWindowTheme(IntPtr hwnd, string pszSubAppName, string pszSubIdList);

    public MyTreeView() {
        SetWindowTheme(this.Handle, "explorer", null);
    }
} 
```

[![树视图之前和之后](../Images/c7e3a4ebb714420d024aa317d94b75a2.png)](https://i.stack.imgur.com/gdMfy.png) *描述调用前后的样子`SetWindowTheme`*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-08T12:17:34.477

当你想自定义你的treeview控件时，微软在treeview控件上提供了一个名为“TreeViewDrawMode”的属性，它的值是一个枚举，它有3个值：Normal、OwnerDrawText、OwnerDrawAll，在你的情况下，你必须使用OwnerDrawAll。将该属性设置为 OwnerDrawAll 后，当显示树视图的节点时，将触发名为“DrawNode”的事件，因此您可以在那里处理您的绘图。当你自己画的时候，通常你需要画3个东西：展开/折叠图标、节点图标、节点文本。我的示例如下： //定义图标文件路径 string minusPath = Application.StartupPath + Path.DirectorySeparatorChar + "minus.png"; string plusPath = Application.StartupPath + Path.DirectorySeparatorChar + "plus.png"; 字符串节点路径 = 应用程序。

```
 public FrmTreeView()
    {
        InitializeComponent();
        //setting to customer draw
        this.treeView1.DrawMode = TreeViewDrawMode.OwnerDrawAll;
        this.treeView1.DrawNode += new DrawTreeNodeEventHandler(treeView1_DrawNode);
    }

    void treeView1_DrawNode(object sender, DrawTreeNodeEventArgs e)
    {
        Rectangle nodeRect = e.Node.Bounds;
        /*--------- 1\. draw expand/collapse icon ---------*/
        Point ptExpand = new Point(nodeRect.Location.X - 20, nodeRect.Location.Y + 2);
        Image expandImg = null;
        if (e.Node.IsExpanded || e.Node.Nodes.Count < 1)
            expandImg = Image.FromFile(minusPath);
        else
            expandImg = Image.FromFile(plusPath);
        Graphics g = Graphics.FromImage(expandImg);
        IntPtr imgPtr = g.GetHdc();
        g.ReleaseHdc();
        e.Graphics.DrawImage(expandImg, ptExpand);

        /*--------- 2\. draw node icon ---------*/
        Point ptNodeIcon = new Point(nodeRect.Location.X - 4, nodeRect.Location.Y + 2);
        Image nodeImg = Image.FromFile(nodePath);
        g = Graphics.FromImage(nodeImg);
        imgPtr = g.GetHdc();
        g.ReleaseHdc();
        e.Graphics.DrawImage(nodeImg, ptNodeIcon);
        /*--------- 3\. draw node text ---------*/
        Font nodeFont = e.Node.NodeFont;
        if (nodeFont == null)
            nodeFont = ((TreeView)sender).Font;
        Brush textBrush = SystemBrushes.WindowText;
        //to highlight the text when selected
        if ((e.State & TreeNodeStates.Focused) != 0)
            textBrush = SystemBrushes.HotTrack;
        //Inflate to not be cut
        Rectangle textRect = nodeRect;
        //need to extend node rect
        textRect.Width += 40;
        e.Graphics.DrawString(e.Node.Text, nodeFont, textBrush, Rectangle.Inflate(textRect, -12, 0));
     } 
```

我的测试结果是这样的： ![结果图片](../Images/52d94262e5e13c191071e8350e65030b.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T12:41:17.853

我能想到的方法有3种：

1.  Sunny已经提到使用`SetWindowTheme(TreeView.Handle, "explorer", null)`

2.  如果可以选择使用 WPF 并添加 TreeViewItem 对象

3.  重写 OnPaint 方法，这太复杂了，考虑到你只能做 1，所以 1 或 2 由你来选择。

# java - 从 ProgressBar 更改为 ImageView Android

> ID：13625422
> 
> 赞同：0
> 
> 时间：2012-11-29T12:03:03.143
> 
> 标签：java, android, android-progressbar

我正在尝试检查启动线程的 EditText `(AsyncTask)`。该线程启动一个 ProgressBar。好吧，当这个线程完成后，我会评估答案，如果有 ProgressBar 的位置正确，我需要放置一些像“ok”这样的图像，如果它不正确，则像“error”这样的图像。总是在 ProgressBar 所在的位置。

这个 ProgressBar 不是一个对话框，它在 EditText 的右边

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:08:49.447

您可以使用 ViewSwitcher 组合布局。第一个子视图是 ProgressBar，第二个是 ImageView。您可以在运行时放置“ok”或“error”图像并调用 ViewSwitcher 的 showNext() 方法来交换视图。

希望有帮助。

# android - 如何在一个线程中向多个联系人发送消息

> ID：13625427
> 
> 赞同：0
> 
> 时间：2012-11-29T12:03:12.603
> 
> 标签：android, sms, mms

如何在一个线程中向多个联系人发送消息？

例如：

送至：NO1,NO2,NO3

线程表中的结果如下：

```
recipient_ids:1 2 3

type：1 
```

解决方案更新（20121213）：

自己搭建android系统，并使用中的libary

```
out/target/common/obj/JAVA_LIBRARIES 
```

并参考股票 mms 应用程序，创建或获取新线程 ID

```
getOrCreateThreadId(Context context, String recipient) 
```

收件人：逗号分隔的数字列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:06:53.207

如果是短信，您可以在下面使用，

**MobNumber**是一个数组

```
 for (int i = 0; i < MobNumber.size(); i++) 
        {
                 SmsManager sender=SmsManager.getDefault();
                 sender.sendTextMessage(MobNumber.get(i).toString(),null,Text , null, null);
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:26:22.547

自己搭建android系统，并使用中的libary

```
out/target/common/obj/JAVA_LIBRARIES 
```

并参考股票 mms 应用程序，创建或获取新线程 ID

```
getOrCreateThreadId(Context context, String recipient) 
```

收件人：逗号分隔的数字列表

# eclipse - Xtext：结合测试和验证

> ID：13625430
> 
> 赞同：0
> 
> 时间：2012-11-29T12:03:31.793
> 
> 标签：eclipse, unit-testing, validation, xtext, rule

我是 Xtend 和单元测试领域的新手。我正在测试我的语法，我想写一个测试它的验证。

这里有一个简单的例子：

我的语法：

```
Domainmodel: entities+=Entity* ;

Entity:
'ENTITY' name=ID 'END_ENTITY'; 
```

现在假设我也插入了这个验证规则：

```
@Check
public void checkNoJack(Entity e){
   if (e.getName().equals("Jack")){
      error("This name is not valid.",null);
   }
} 
```

所以，如果我尝试写：

```
ENTITY Jack END_ENTITY 
```

我会收到一个错误。

但是，如果我尝试这个 Xtend 测试：

```
@Test
def void example() throws Exception{
   parserHelper.parse("ENTITY Jack END_ENTITY")
} 
```

一切都会好起来的。

如何在测试中考虑验证规则？

更新：名称解析正确：

```
@Test
    def void example() throws Exception{
        val model = parserHelper.parse("ENTITY John END_ENTITY");
        val entity=model.entities.get(0);
        assertEquals(entity.name, "John");
    }

    @Test
    def void example2() throws Exception{
        val model = parserHelper.parse("ENTITY Jack END_ENTITY");
        val entity=model.entities.get(0);
        assertEquals(entity.name, "Jack");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:57:18.443

使用 ParserHelper 和方法解决：

```
parse.assertNoError 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:31:02.337

尝试添加此测试以确保正确解析名称：

```
@Test
def void example() throws Exception{
   Entity entity = parserHelper.parse("ENTITY John END_ENTITY");
   assertEquals(entity.getName(), "John");
} 
```

# java - 在 Java 7 中将 sun.locale.formatasdefault 设置为 true

> ID：13625432
> 
> 赞同：6
> 
> 时间：2012-11-29T12:03:49.350
> 
> 标签：java, java-7

以下代码将有助于说明我的问题：

```
import java.util.Locale;
import java.text.*;

public class LocaleTest {
   public static void main(String[] args) {
      System.out.println(Locale.getDefault());
      System.out.println("java-version-" +System.getProperty("java.version"));
      System.setProperty("sun.locale.formatasdefault","true");
      System.out.println("prop:" +System.getProperty("sun.locale.formatasdefault"));
      System.out.println("getLocale-" +Locale.getDefault());
   }
} 
```

我们知道，Java 7 中存在错误，在 Locale.getDefault() 中。但是按照 Oracle 的建议，我已将系统属性“sun.locale.formatasdefault”设置为 true。尽管我现在正在获取我的 m/c 语言环境，但它始终显示为 en_US，即使我的 m/c 语言环境设置为 fr_BE。

这是上面代码的输出，它是在 Java 1.7.0_09 上编译和运行的：

```
zh_CN
java-版本-1.7.0_09
道具：真
getLocale-en_US

```

关于可能导致的任何想法？提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:16:18.850

您需要在启动 JVM***之前设置该系统属性。***您可以通过命令行参数执行此操作：

```
java -Dsun.locale.formatasdefault=true TargetClass 
```

或者在您不控制 JVM 启动的环境中，您可以通过`_JAVA_OPTIONS`环境变量进行设置：

*   ***尼克斯**

    ```
    export _JAVA_OPTIONS=-Dsun.locale.formatasdefault=true 
    ```

*   **视窗**

    ```
    SET _JAVA_OPTIONS=-Dsun.locale.formatasdefault=true 
    ```

在 Windows 中，如果您希望更改不仅适用于该 CMD，而且适用于整个系统，您可以创建一个 Windows 系统变量 JAVA_TOOL_OPTIONS

# php - 在 CKEditor 中使用内联编辑将数据保存到 PHP/Mysql

> ID：13625434
> 
> 赞同：4
> 
> 时间：2012-11-29T12:03:56.990
> 
> 标签：php, mysql, ajax, ckeditor

我想使用新的 CKEditor 4 ( [http://docs.ckeditor.com/#!/guide/dev_inline-section-2](http://docs.ckeditor.com/#!/guide/dev_inline-section-2) ) 的“内联编辑”，但找不到任何关于如何使用 PHP 保存数据的示例/MySQL。你能帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T20:23:27.697

你需要一些 AJAX 魔法。通过页面内的 JavaScript，您可以获得编辑后的 ​​HTML。然后将其发送到 PHP 脚本获取它的服务器，并可以将其传递到 MySQL。

这是一个简单的测试用例，它将向您展示绳索。

让我们从可编辑的 HTML 开始。

```
<div id='textToBeSaved' contenteditable='true'>
    <p>Using the <strong>Terminal</strong> in OS X makes you all-powerful.</p>
</div> 
```

我们还需要一个“保存”按钮，用于启动 POST 事件。

```
<button onclick='ClickToSave()'>Save</button> 
```

这样的按钮可以很好地放置在 CKEditor 工具栏中，但这需要更多的编码，我会把它留给比我更擅长 JavaScript 的人。

当然你想包括CKEditor。对于我的示例代码，我还将使用 jQuery，我将使用它来 AJAXing 结果。

```
<script src='//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js' type='text/javascript'></script>
<script type='text/javascript' src='CKEditor4/ckeditor.js'></script> 
```

现在，当您按下“保存”按钮时将执行的脚本。它将使用 CKeditor 获取编辑后的 ​​HTML，然后使用 jQuery 发送它。

```
<script type='text/javascript' language='javascript'>
// <![CDATA[
function ClickToSave () {
    var data = CKEDITOR.instances.textToBeSaved.getData();
    $.post('save.php', {
        content : data
        })
    }
// ]]> 
```

就是这样，您不需要任何其他客户端。

在服务器上，您必须拥有 PHP 代码，该代码将在脚本 POST 更新的 HTML 时起作用。如果您逐字使用我的代码，该脚本必须名为 save.php 并位于 HTML 所在的同一目录中。我这里的单行代码只会将您的 HTML 保存在 /tmp 文件夹内的一个临时文件中。随意添加您的 MySQL 魔法。

```
<?php
file_put_contents('/tmp/serverside.html', $_POST['content']);
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T14:03:44.273

这是我过去的做法：

与`current_page_id`我们希望更新的表行相关，否则我们将不知道需要更新哪些记录。

```
<div id="editable">My body text</div>
<input type="hidden" name="page_id" id="current_page_id" value="10" />

<script type="text/javascript">

CKEDITOR.disableAutoInline = true;
CKEDITOR.inline('editable', {
    on: {
        blur: function( event ) {

            var params = {
                page_id: $("#current_page_id").val(),
                body_text: event.editor.getData()
            };

            $.ajax({
                url: 'php_file_to_post_to.php',
                global: false,
                type: "POST",
                dataType: "text json",
                data: params,
                success: function(result) {
                    console.log(result);
                }
            });

        }
    }
});

</script> 
```

在您的`php_file_to_post_to.php`PHP 文件内部，您只需捕获 ajax 发布请求并根据变量更新行，该`page_id`变量也与编辑的内容一起发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T10:46:35.670

这是获取文本区域数据的方式

```
CKEDITOR.instances.editor1.getData() 
```

`CKEDITOR`只不过是您用来创建功能的对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T10:43:26.380

非常感谢您的代码。尝试使用 file_put_contents('page.php', **stripslashes** ($_POST['content']));改进解码代码 并添加到 div **onBlur="ClickToSave()"**现在您可以删除 de save 按钮。

# c# - 如何从 UserControl 实例创建 DataTemplate？

> ID：13625436
> 
> 赞同：2
> 
> 时间：2012-11-29T12:04:09.080
> 
> 标签：c#, wpf, user-controls, datatemplate

**问题**

基本上我想做以下事情，但似乎我不能：

```
UserControl myControl = new UserControl();
DataTemplate template = new DataTemplate(myControl); 
```

问题：是否可以从 UserControl 实例构造 DataTemplate？如果没有，还有其他可能的解决方案吗？

* * *

**真正的问题**

我正在从事一个项目，其中大多数 UI 视图都是简单的静态 Word 类文档（例如，一些文本字段，也许还有一些图像，没什么花哨的）。因为从事这个项目的大多数人都不是程序员，所以我们为 UI 生成设计了非常简单的内部标记语言。简单视图的标记示例如下：

```
First name: [Person.FirstName]
Last name: [Person.LastName]
Address: [Person.Address.Street], [Person.Address.City] 
```

现在这些模板在运行时加载，并基于它们创建用户控件。在这种情况下，将创建一个用户控件，它只包含几个堆栈面板和文本块，因此生成的控件看起来有点像文本文档。XAML 等效项类似于：

```
<StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="First name: "/>
        <TextBlock Text={Binding Person.FirstName}
    </StackPanel>
    <StackPanel>
        ...
    </StackPanel>
    ...
</StackPanel> 
```

然后，我开始实现对列表的支持，但想不出如何做到这一点。理论上它很简单，我想出了以下语法（+ XAML 等效项）：

```
[List Customers]
First name: [Person.FirstName]
Last name: [Person.LastName]
Address: [Person.Address.Street], [Person.Address.City]
[EndList]

->

<StackPanel>
    <ItemsControl ItemsSource="{Binding Customers}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                [Insert code from previous XAML example here]
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</StackPanel> 
```

但我不能这样做，因为我似乎无法直接从 UserControl**实例**构造 DataTemplate 。**如果我的 UserControls 是types**就不会有问题，但它们不是。

一种可能的解决方案是我可以将*ItemsControl.Items*直接绑定到 UserControls 列表（而不是绑定到*ItemsSource*和*ItemTemplate*），但这在我们的案例中是次优的，原因有几个。我愿意先尝试其他一些解决方案！

**更新**

澄清一下：我所拥有的只是 UserControl 类的普通实例，其中包含我需要的内容。例如

```
UserControl control = new UserControl();
var panel = new StackPanel();
panel.Children.Add(...);
panel.Children.Add(...);
control.Content = panel;
// How to use that control as ItemTemplate for ItemsControl?
// It seems that it is not possible directly but I want to
// know what my options are. 
```

我没有针对它的类，因为我在运行时构建它，并且我不想通过发出 IL 代码来动态创建新类型，因为它太痛苦了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T13:22:13.450

从 Code behind 创建数据模板如下所示：

```
FrameworkElementFactory factory = new FrameworkElementFactory(MyUserControl.GetType());
DataTemplate dt = new DataTemplate();
dt.VisualTree = factory;

yourItemsControlInstance.ItemTemplate = dt; 
```

数据模板是要在运行时构建的控件的定义，即使用 ElementFactory 构建的方式。您不希望 ItemsControl 中的每个项目都使用相同的 UserControl 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:34:15.860

啊，我现在明白你的问题了。我认为没有一种简单的方法（一两行代码）可以从 UserControl 实例创建数据模板。

但是为了解决你的问题，我看到了两个方向：

1.  在创建用户控件的地方，创建一个数据模板并使用它。使用嵌套的 FrameworkElementFactories 会很麻烦。我从来没有这样做过，MSDN 文档说与 Xaml 中的数据模板相比，您可能会遇到一些您无法做到的限制。但如果它很简单，它必须是可行的。Sacha Barber 曾经有一篇代码项目文章，您可以将其用作指导（如果需要）。
2.  您将 UserControl 的创建打包在一个名为的方法中`private UserControl createMyUserControl(){}`

并做这样的事情：

```
 ItemsControl itemsControl = new ItemsControl();
    foreach (var customer in Customers) 
    {
       var usercontrol = createMyUserControl(...);
       usercontrol.DataContext = customer;
       itemsControl.Items.Add(usercontrol);
    } 
```

在我看来，第二个选项不太优雅，所以我会先检查选项 1。

[WPF: How to create Styles in code/and magic Content](http://www.codeproject.com/Articles/29699/WPF-How-to-create-Styles-in-code-and-magical-Conte)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:35:59.237

我认为你可以`UserControl`用`ContentControl`. 只需将 的内容设置为`ContentControl`所需的模板并将其用作 ItemsControl 的 ItemTemplate。

# c# - Windows 8 背景任务（时间触发器）？

> ID：13625437
> 
> 赞同：0
> 
> 时间：2012-11-29T12:04:10.407
> 
> 标签：c#, windows-8, background-process, recurrence

我是 Windows 8 的新手。我想提醒用户我的应用程序中存储的任务。

预定通知允许我举杯并更新应用程序的磁贴以提醒用户。但它不支持重复（重复功能）。所以我想使用带有时间触发器的后台任务。文档说该应用程序应该出现在锁定屏幕上。

这令人困惑，这究竟是什么意思？后台任务什么时候触发？我如何使用它以便它支持循环并且我可以通知用户。对此的任何样品将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:19:28.477

时间触发任务仅适用于锁定屏幕上的应用程序。但是，有一项维护任务适用于所有应用程序。无需将设备放置在锁定屏幕上，维护任务仅在设备插入交流电源时运行。

请参阅[如何使用维护触发器。](http://msdn.microsoft.com/en-us/library/windows/apps/hh977060.aspx)

# sql - 将 Varchar 转换为 DateTime - Varchar 没有用于划分日期部分的字符

> ID：13625438
> 
> 赞同：1
> 
> 时间：2012-11-29T12:04:11.050
> 
> 标签：sql, sql-server

是否可以将 5122012 的 varchar 转换为 05/12/2012 的日期时间？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:21:54.883

首先，如果没有日期和月份的尾随零，您将无法做到这一点。所以你的输入数据必须是这样的：

```
05122012 
```

其次，最好使用“本机”格式：

```
20121205 
```

服务器无论如何都明白什么

如果这是获取您提供的数据的唯一方法，您将需要一个函数来测试并返回日期

基本功能是这样的（SQL Server 2008 示例）：

如果输入数据是：`05122012`如果您需要不带尾随，则此函数有效，`0`您需要将检查添加到函数中

```
create function [dbo].[Str2Date] ( @data as varchar(8))
returns datetime
AS
begin
    declare @day char(2), @mon char(2), @year char(4)
    set @day = substring(@data,1,2)
    set @mon = substring(@data,3,2)
    set @year = substring(@data,5,4)
    set @data = @year+@mon+@day
    return convert (datetime,@data,112)
end

select dbo.Str2Date('05122012') 
```

# java - Spring Project Builder 在 Eclipse 中究竟执行了什么？

> ID：13625439
> 
> 赞同：8
> 
> 时间：2012-11-29T12:04:15.950
> 
> 标签：java, eclipse, spring

更准确地说，我正在建立一个使用 Spring 进行依赖注入的 Maven 项目。由于我希望 Maven 将 Spring Project 性质添加到我的 Eclipse 项目文件中，因此我将其放入`maven-eclipse-plugin`我的部分`pom.xml`：

```
<additionalProjectnatures>
   <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
</additionalProjectnatures> 
```

我无法在 Spring 站点上找到有关此 Maven 设置的任何官方文档。大多数其他站点，例如[this one](http://ahoehma.wordpress.com/2008/04/16/maven-eclipse-spring/)或this [SO answer](https://stackoverflow.com/a/9116690/709431)，也建议将其放入配置部分：

```
<additionalBuildcommands>
    <buildCommand>
        <name>org.springframework.ide.eclipse.core.springbuilder</name>
    </buildCommand>
</additionalBuildcommands> 
```

查看 Eclipse，我看到该构建器也已配置。这个builder具体是做什么的？

# solr - Solr 从 3.4 升级到 4

> ID：13625444
> 
> 赞同：0
> 
> 时间：2012-11-29T12:04:27.413
> 
> 标签：solr

为了利用 Solr 4 上的数据透视功能，我从 3.4 升级。

由于这次升级，我应该继续对内容进行完整的重新索引，还是它们以某种方式兼容？

关于我当前正在访问我的 solr server 3.4 的客户端应用程序，升级后它们会出现问题吗？（我对它们进行的初步测试正在运行，当您不使用新功能时，查询响应中返回的 xml 模式似乎没有改变）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:12:32.767

如果要使用 Solr 4 索引结构，则需要进行完整的重新索引。否则，您需要在 solrconfig 中更改 Lucene 版本以使用旧索引。

`_version_`如果您想使用[实时获取](http://wiki.apache.org/solr/RealTimeGet)功能，架构将需要一个名为的新字段。

除此之外，大多数事情对客户来说几乎是一样的。

# mysql - mysql：选择行 X 小时前到最近的小时

> ID：13625447
> 
> 赞同：0
> 
> 时间：2012-11-29T12:04:32.490
> 
> 标签：mysql

我在 mysql 查询中有一个子句要选择 3 天前的时间戳，到最近的一天：

```
WHERE TO_DAYS(wit_matches.created) = TO_DAYS(NOW() - INTERVAL 3 DAY)) 
```

我想更改它，以便它选择时间戳为 3 天左右的行，但选择最接近的小时 - 即最接近的小时的 72 小时（这是一个每小时运行一个的 cron 作业）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:33:05.553

你可以试试这个。

```
WHERE wit_matches.created BETWEEN (NOW() - INTERVAL 73 HOUR) AND (NOW() - INTERVAL 72 HOUR) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-05-01T17:27:55.750

71.5 < 72 < 72.5 一旦你掌握了它就很容易了

# android - 究竟什么是 Google Play 软件包名称？

> ID：13625448
> 
> 赞同：0
> 
> 时间：2012-11-29T12:04:32.690
> 
> 标签：android, packages, google-play

过去和现在的 Google Play 软件包名称到底是什么（让它们以 old 为前缀）？

我知道这个：

```
private static final String GooglePlayStorePackageNameOld = "com.android.market";
private static final String GooglePlayStorePackageNameNew = "com.android.vending";
private static final String GoogleAndroidPitPackageName  = "de.androidpit.app"; 
```

不确定`"com.android.market"`，应该是`com.android`还是`com.google`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:54:12.847

它是**com.android.vending**并尝试使用此链接并使用代码：

[Android Market 或 Google Apps 的软件包名称是什么](https://stackoverflow.com/questions/4439043/what-is-the-package-name-of-the-android-market-or-google-apps/4439898#4439898)

# c# - 如何将玩家存储在数组中？

> ID：13625451
> 
> 赞同：1
> 
> 时间：2012-11-29T12:04:38.737
> 
> 标签：c#, arrays, storage

非常基本，但我正在创建一个游戏，我将在游戏中有 2 到 4 个玩家我需要知道如何询问用户会有多少玩家，然后将这个数量存储在我的数组中以供以后使用？！

这是我到目前为止写的

```
 {
        int NumberofPlayers;
        {
            do
            {
                Console.WriteLine("Please enter number of players (2-4): ");
                String StringNumberOfPlayers = Console.ReadLine();
                NumberofPlayers = int.Parse(StringNumberOfPlayers);

            }
            while (NumberofPlayers > 4 || NumberofPlayers < 2);
        }

        // need get the number of players and set the required elements in
        // playerPositions to 0 on the board
    }
            static int [] PlayerPositions = new int [4];

    static void Main()
    {
        ResetGame();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:09:17.610

你在正确的轨道上，只需分配大小为的数组`NumberofPlayers`

```
static int [] PlayerPositions;

public void ResetGame()
{
    int NumberofPlayers;
    do
    {
        Console.WriteLine("Please enter number of players (2-4): ");
        String StringNumberOfPlayers = Console.ReadLine();
        NumberofPlayers = int.Parse(StringNumberOfPlayers);
    }
    while (NumberofPlayers > 4 || NumberofPlayers < 2);

    // need get the number of players and set the required elements in
    // playerPositions to 0 on the board
    PlayerPositions = new int [NumberofPlayers];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:13:58.600

将数组的大小设置为 NumberofPlayers。

```
PlayerPositions = new int [NumberofPlayers]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:09:41.370

为此，您为什么不创建一个 PlayerPositions 列表。

```
List<PlayerPositions> players = new List<PlayerPositions>(); 
```

根据用户的输入，将这些对象添加到上面的列表中。

```
while (NumberOfPlayers > 0)
{
players.Add(new PlayerPositions());
NumberOfPlayers--;
} 
```

# android - 如何实现调用哪个上下文菜单

> ID：13625454
> 
> 赞同：0
> 
> 时间：2012-11-29T12:04:45.603
> 
> 标签：android, android-listview, viewflipper, onlongclicklistener, android-contextmenu

我有一个视图翻转器，里面有两个列表视图。我已将 onLongLickListener 注册到两个 listViews。当我在上下文菜单上按下某些东西时，我可以获得项目的位置等，但我无法获得哪个 listView 拥有当前菜单。如果需要，我可以提前提供一些代码，thanx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:56:27.777

在 onCreate 中调用了这两个

```
listView1.setOnItemLongClickListener(new OnItemLongClickListener() {

        public boolean onItemLongClick(AdapterView<?> l, View v,
                int position, long id) {
            selected_list = 1;
            return false;
        }

    });
    listView2.setOnItemLongClickListener(new OnItemLongClickListener() {

        public boolean onItemLongClick(AdapterView<?> l, View v,
                int position, long id) {
            selected_list = 2;
            return false;
        }

    }); 
```

以这种方式工作和使用：

```
 public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();

    if(selected_list==1){
           //do something.
    }else if(selected_list==2){
           //do o/w
    }
 } 
```

# wordpress - Magento 中可用的块

> ID：13625455
> 
> 赞同：0
> 
> 时间：2012-11-29T12:04:49.383
> 
> 标签：wordpress, magento, block

我正在尝试从 wordpress 访问 magento。下面是我用来访问magento侧边栏购物车的简单代码。

```
<?php

/*
 * Initialize magento.
 */
require_once '/Applications/XAMPP/xamppfiles/htdocs/conover-store/app/Mage.php';
Mage::init();

/*
 * Add specific layout handles to our layout and then load them.
 */
$layout = Mage::app()->getLayout();
$layout->getUpdate()
    ->addHandle('default')
    ->addHandle('some_other_handle')
    ->load();

/*
 * Generate blocks, but XML from previously loaded layout handles must be
 * loaded first.
 */
$layout->generateXml()
       ->generateBlocks();

/* 
 * Now we can simply get any block in the usual way.
 */
$cart = $layout->getBlock('header')->toHtml();
echo $cart;

?> 
```

我正在寻找可用块代码的完整列表/文档，例如“cart_sidebar”、“header”等，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:01:08.823

从技术上讲，没有完整的列表，因为它们都是任意的！

`<block name="..." />`布局 XML中的每个声明*都可能*适用于渲染范围，也*可能不适用。*渲染范围由调用时为更新对象设置的布局更新句柄确定`load()`。此外，块可以通过布局对象在 PHP 中直接实例化。

因此，对于特定的渲染范围，有很多选择。如果只需要一个特定的块及其子块，则由开发人员决定是否值得为渲染范围实例化所有块。对于当前的问题，似乎是这样。因此，所有可用的块都可以通过检查布局对象的受保护`_blocks`属性来确定：

```
// after generateBlocks() is called...

$blocks = $layout->getAllBlocks();
sort($blocks);

$list = "<table><thead><tr><th>Name in Layout</th><th>Class</th><th>Template</th></tr></thead>";
foreach ($blocks as $block) {
    $list .= sprintf('<tr><td>%s</td><td>%s</td><td>%s</td></tr>',$block->getNameInLayout(),get_class($block),$block->getTemplateFile());
}
$list .= "</table>";

echo $list; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:29:40.457

给出访问**Mage.php**文件的当前路径。

例如，

Wordpress 在**/Applications/XAMPP/xamppfiles/htdocs/wordpress/**
下，Magento 在**/Applications/XAMPP/xamppfiles/htdocs/magento/下**

使用以下代码从 wordpress 根目录下的文件中包含 Mage 文件。

```
require_once '../magento/app/Mage.php'; 
```

# asp.net - 使用 app.config 文件中的客户端端点

> ID：13625456
> 
> 赞同：2
> 
> 时间：2012-11-29T12:05:01.520
> 
> 标签：asp.net, wcf-client

.net 4.0

我有两个 Web 项目使用自己的`web.config`文件并使用相同的端点来调用相同的 WCF Web 服务。

两者都使用具有`app.config`文件的通用项目（dll）。我想将端点信息移动到该配置文件中 - 这可能吗？我想要端点信息

```
<client>  
    <endpoint/> 
<client/> 
```

由两个 Web 应用程序从共同的地方共享？

`Web.config`此处省略文件绑定信息

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
   <system.serviceModel>
      <bindings/>          
      <client configSource="client.config">
   <system.serviceModel/>
</configuration> 
```

`client.config`公共项目中的文件

```
 <client>
      <endpoint
        name="endpoint1"
        address="http://localhost/ServiceModelSamples/service.svc"
        binding="wsHttpBinding"
        bindingConfiguration="WSHttpBinding_IHello"
        behaviorConfiguration="IHello_Behavior"
        contract="IHello"/ > 
```

为错字道歉 我更改了两件事 1\. client.config 有一个元素将其删除。2\. 在项目的构建属性中添加 COPY "$(TargetDir)*.config" "$(ProjectDir)"

只需在 web.config (configSource) 和 client.config 中提及 VStudio 大喊设计时间但运行良好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:10:49.900

您可以通过“外包”它来共享部分 WCF 配置：

```
<system.serviceModel>
    <client configSource="client.config" />
    .....
</system.serviceModel> 
```

然后在你的`client.config`：

```
<?xml version="1.0" encoding="utf-8"?>
<client>
    <endpoint name="ABC"
        address="http://......."
        binding="......."
        contract="......" />
</client> 
```

您不能将东西放入`app.config`通用程序集中，因为 .NET 框架不会使用/查看这些配置文件。您需要将您的信息放入应用程序或网站的**主**`web.config`配置文件 ( ) - 但您*可以*将某些部分“外部化”为单独的外部文件并像这样共享它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:17:07.050

我曾在这种情况下工作过，我认为这是不可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T22:36:13.440

另一种方法是使用自定义 ChannelFactory 类，然后通过注入或默认规则指定 client.config 路径。

以下是如何编写接受自定义配置路径的自定义 ChannelFactory： [http ://weblogs.asp.net/cibrax/archive/2007/10/19/loading-the-wcf-configuration-from-different-files-on -the-client-side.aspx](http://weblogs.asp.net/cibrax/archive/2007/10/19/loading-the-wcf-configuration-from-different-files-on-the-client-side.aspx)

我曾经`this.GetType.Assembly.GetExecutingAssembly().ManifestModule.Name + ".config"`动态获取与我的共享库名称匹配的默认配置文件。

您可以让您的两个 Web 应用程序使用配置路径实例化自定义 ChannelFactory，或者您可以在与 Web 服务交互的公共库中添加一个抽象层，然后您的 Web 应用程序使用新的抽象对象而不是直接依赖于网络服务。当您需要在不影响 Web 应用程序的情况下适应 Web 服务的更新时，这非常有用。

此 SO 答案中的更多详细信息：[使用 ConfigurationManager 从任意位置加载配置](https://stackoverflow.com/questions/4738/using-configurationmanager-to-load-config-from-an-arbitrary-location/14246260#14246260)

# crystal-reports - 使用 Crystal Reports 8.5 在公式编辑器中从 For 循环内的列表中检索数据的语法

> ID：13625470
> 
> 赞同：4
> 
> 时间：2012-11-29T12:05:38.847
> 
> 标签：crystal-reports, report

从公式编辑器中 for 循环内的列表中检索数据的语法是什么？我写了这样的东西，但它显示了一个错误。任何人都可以纠正它吗？

```
Local NumberVar i;
Local NumberVar intCount := Count({FOODMASTER.FOOD_SORT});
For i := 1 to intCount Do
(
 If (i = 1) Then     
  {TMPMONTHLYDETAIL.TMP_QTY}[i];         
 Else If (i > 1) Then            
 Exit For;

 i := i + 1;

); 
```

其中 {FOODMASTER.FOOD_SORT} 是 int 数据类型，而 {TMPMONTHLYDETAIL.TMP_QTY} 是十进制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:31:17.943

这段代码在逻辑上并没有多大意义，更不用说语法了。你到底想完成什么？您可能需要重新考虑一些事情，但这里有一些事情可以帮助您入门：

1.  您不需要手动递增`i`，因为 for 循环使用默认步长 1 为您执行此操作。
2.  您说 {TMPMONTHLYDETAIL.TMP_QTY} 是数字，而不是数组或字符串，因此您不能通过`{TMPMONTHLYDETAIL.TMP_QTY}[i]`.
3.  您的 for 循环实际上并没有做任何有用的事情。在循环开始时，您执行`i:=1`然后立即检查是否`i=1`，否则您只需退出循环。整个循环可以被删除并减少到只是返回`{TMPMONTHLYDETAIL.TMP_QTY}[1]`。

# sql - 在 PL/SQL 开发人员中使用定义语句

> ID：13625473
> 
> 赞同：3
> 
> 时间：2012-11-29T12:05:59.160
> 
> 标签：sql, oracle, plsqldeveloper, psql

这是我的家庭作业中的一项任务：

```
DEFINE countryid = CA
DECLARE 
country_record countries%ROWTYPE;
BEGIN
  SELECT *
  INTO country_record
  FROM countries
  WHERE country_id = '&countryid';
END; 
```

根据任务要求**countryid 应使用 define 语句声明并应赋予默认值 CA**，然后应根据用户输入的值执行 select。
当我运行脚本时，我得到 4 个错误，*当我注释掉 DEFINE countryid = CA 脚本成功执行时。*
**我的问题：** PL/SQL Developer 中是否提供定义语句？
如果是，我做错了什么，你能建议一个正确的用法吗？

编辑：我收到以下错误：

```
ORA-06550 row 3 column 8
PLS-00201 identificator 'COUNTRY_RECORD' have to be declared
ORA-06550 row 4 column 3
PL/SQL ORA-00904: invalid identificator
ORA-06550 row 2 column 3
PL/SQL SQL statement ignored 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T12:22:14.617

DEFINE 是一个 SQLPLUS 的东西，因此除了 COMMAND 窗口之外，PLSQL Developer 不支持它。对于 sql / test 窗口，只需将其删除（它将看到 & 并为您提供一个弹出窗口供您以这种方式定义它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:31:43.233

在 PLSQL Developer 中，您可以使用此代码，但使用**Command Window**。

DEFINE countryid = 'CA' DECLARE country_record countries%ROWTYPE; BEGIN SELECT * INTO country_record FROM countries WHERE country_id = '&countryid'; 结尾;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T17:01:49.210

```
DEFINE countryid = CA
DECLARE 
country_record countries%ROWTYPE;
BEGIN
  SELECT *
  INTO country_record
  FROM countries
  WHERE country_id = :countryid;
END; 
```

# c - 管理私有堆

> ID：13625474
> 
> 赞同：3
> 
> 时间：2012-11-29T12:06:02.380
> 
> 标签：c, linux, heap-memory

我在某些项目中看到（基本上是许多 C/C++ 中的嵌入式应用程序），它们管理动态分配如下

*   在初始化期间获取大量内存（根据需要）。该区域被指定为该应用程序的堆。
*   跨不同例程的所有动态分配都是通过为分配和维护（跟踪和调试分配）而设计的包装器在此内存中进行的。

**问题：**

Q1：上面提到的私有堆管理设计的优点。

Q2：C、Linux API 中是否有任何内置函数提供接口以在先前分配的块中进行动态分配。我找遍了它，但无法抓住它

Q3：如果 Q2 中提到的选项不可用。关于如何实现 Q2 中提到的目标的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:26:28.607

正如您所说，**基本上许多 C/C++ 中的嵌入式应用程序**使用不同的方法来获取您定义的动态内存。

我认为它基本上是为了减少内存和正确使用而完成的。

如果您尝试了解 malloc() 或 calloc() 函数如何在 c 中用于动态内存分配，那么您肯定会得到答案。我可以解释一下... **它（malloc）真正做的是维护一个空闲内存的链表。但最初，空闲列表是空的。当第一个 malloc() 被调用时，我们调用 sbrk() 来为空闲列表获取一块新的内存。这块内存被分割，一部分归还给用户，剩下的回到空闲链表。会有一个全局变量 malloc_head，它是空闲链表的头部。当 malloc() 被调用时，它会在它的列表中寻找一块足够大的内存。如果它找到一个，那么它将从链表中删除该内存并将其返回给用户。当调用 free() 时，内存被放回链表中。现在，为了提高效率，如果空闲列表上有一块比请求大得多的内存，然后它将该块分成两块——一个是请求的大小（填充为 8 的倍数），其余的。其余的放在空闲列表上，请求大小的一个返回给用户。**

有关详细信息，请尝试参考[http://web.eecs.utk.edu/~huangj/cs360/360/notes/Malloc2/lecture.html](http://web.eecs.utk.edu/~huangj/cs360/360/notes/Malloc2/lecture.html) [http://web.eecs.utk.edu/~huangj/cs360/360 /notes/Malloc1/lecture.html](http://web.eecs.utk.edu/~huangj/cs360/360/notes/Malloc1/lecture.html)

**问题1->**现在对于您的第一个问题，优势可能是以更有效的方式节省内存和分配，这取决于正在实施其方式的项目。

**问题2->**我还没有在 c 中看到任何内置库或 API 这样做。

**问题3->**要实现您自己的 API，您需要参考给定的 C 链接和 R&K 书。这本书解释得更详细。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:43:11.647

Q1：

1.  *性能*- 在堆被分配之后（通常在初始化期间完成），所有未来的分配都非常快，它主要只是堆内的一些指针运算。
2.  *碎片*- 大内存块的单一分配可防止由于多个分配/释放造成的内存碎片。
3.  *控制*- 拥有所有可用内存使系统更加健壮。这在分配失败是不可接受的情况下可能很重要。

预分配内存与后备列表的概念密切相关。

Q2：

我不知道 C 中有这样的 API，但在 C++ 中实际上有内置的运算符可以帮助实现 - 请参阅[Placement new](http://en.wikipedia.org/wiki/Placement_syntax)。这样的实用程序也应该很容易在 C 中实现。

问题 3：

例如（非常高级）：

1.  分配内存。
2.  在内存中创建一个空闲空间块的堆结构（最初它将包含一个代表整个内存的块）。
3.  创建占用的内存块的堆结构（最初它将是空的）。
4.  分配时 - 遍历堆并找到适当大小的块；从堆中删除它并填充新数据。计算块中的剩余内存并将其重新插入堆中。被占用的块插入到被占用的块堆中。
5.  释放时 - 从占用的块堆中删除块并将其插入空闲内存堆。

# javascript - 如何连接 jQuery 对象？

> ID：13625476
> 
> 赞同：5
> 
> 时间：2012-11-29T12:06:04.423
> 
> 标签：javascript, jquery, html

## $.and?

所以我有一个 var 包含一些 jquery 对象，其中包含一些元素（在本例中为 <a> 元素）

```
var elements = $('a'); 
```

然后，我想在使用 click 函数时向该字符串添加一些其他元素（在本例中为 <b> 元素）......

```
elements.and('b').on("click", function(){
    //some random code
}); 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T12:07:36.240

您在寻找[添加](http://api.jquery.com/add/)吗？

```
elements.add('b').... 
```

请注意，`$('a, b');`这也可以。

# c# - 如何访问位于不同 DLL 中的属性

> ID：13625479
> 
> 赞同：1
> 
> 时间：2012-11-29T12:06:11.410
> 
> 标签：c#, .net

我有一个名为“动态”的属性和`SetDefaultValues()`位于同一 DLL 中的方法。属性如下图

```
public class ManagedProperty: DataModelObject, ISerializable 
{

    public bool Dynamic 
    {
        get 
        {
            return m_dynamic;
        }
        set 
        {
            m_dynamic = value;
        }
    }
    private bool m_dynamic = true;
} 
```

方法 SetDefaultValues() 会将所有值默认为默认值。我现在面临的问题是，每当我重新启动窗口服务时，它都会从原始值默认，这是一个错误。所以我想要的条件是每当“动态”属性为假时，它不应该被破坏

所以导致窗口服务中代码的问题如下所示。调试器显示属性 Dynamic 始终为 true

```
 for (int i = 0; i < allObjects.Count; i++)
                                    {
                                        DataModelObject dmo = (DataModelObject)allObjects.GetAt(i);
                                        dmo.SatisfyGRs(allObjects); // Satisfy all GUID references.
                                        if (dmo is ManagedDevice)
                                        {
                                            ManagedDevice md = (ManagedDevice)dmo;

                                            // Set default values for user defined properties
                                            if (md.SetDefaultValues())
                                            {
                                                SaveObject(md, false);
                                            }
                                            md.CheckThresholds();   // Check thresholds on all properties
                                        }
                                    } 
```

我修改它如下所示，但我不知道它不能正常工作，并设置为默认值。谁能告诉我这里出了什么问题，或者一切都正确，我需要检查其他环境

```
 for (int i = 0; i < allObjects.Count; i++)
                                    {
                                        DataModelObject dmo = (DataModelObject)allObjects.GetAt(i);
                                        dmo.SatisfyGRs(allObjects); // Satisfy all GUID references.
                                        if (dmo is ManagedDevice)
                                        {
                                            ManagedDevice md = (ManagedDevice)dmo;
                                            ManagedProperty userprop = new ManagedProperty();
                                            if (userprop.Dynamic == false){
                                            // Set default values for user defined properties
                                            if (md.SetDefaultValues())
                                            {
                                                SaveObject(md, false);
                                            }}
                                            md.CheckThresholds();   // Check thresholds on all properties
                                        }
                                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:11:29.913

问题是您在字段初始化程序中将 m_dynamic 设置为 true ：

```
private bool m_dynamic = true; 
```

然后你有这个代码：

```
ManagedProperty userprop = new ManagedProperty();
if (userprop.Dynamic == false) 
```

它怎么可能不是真实的呢？当您实例化一个 ManagedProperty 时，Dynamic 每次都会为真。

# jquery - jQuery Walidate 和 textareas

> ID：13625482
> 
> 赞同：0
> 
> 时间：2012-11-29T12:06:42.863
> 
> 标签：jquery, validation, jquery-plugins, textarea

我在这里与 texareas 相关的 jQuery“Walidate”插件（[http://jquery.dop-trois.org/walidate/](http://jquery.dop-trois.org/walidate/)）有一点问题。

```
$("textarea").walidate("validate"); 
```

这似乎不起作用。我的意思是，如果里面没有写任何东西，textarea 会被正确标记为必需的，但是当里面写东西时也是如此！当它不应该时它仍然被标记为必需的:(

Walidate可能不适用于textareas吗？有解决办法吗？通过 javascript 自己检查并不难，但如果 Walidate 能为我做到这一点，那就太好了。

感谢您的阅读和评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:29:48.750

现在在我添加的较新版本 2.4.3.1 中`textarea`修复`textElementSelector`。

# java - Grails - 通过从基类中选择使用超类

> ID：13625483
> 
> 赞同：0
> 
> 时间：2012-11-29T12:06:46.590
> 
> 标签：java, grails, select, hql, grails-orm

我有这样的域类：

```
Base {
    filed filed11
}

Super extends Base{
    Right filed2
}

Supers extends Base{
    Left filed2
} 
```

我想做这样的事情：

```
from Base b 
  left join Super as s 
    with b.id = s.id where s.field2.isOk == true 
```

问题是：如何在一个查询中加入超类和基类？因为我的查询不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:50:15.637

从一个实体到另一个关联实体需要连接。您在这里没有任何关联：`Super`extends `Base`。它是继承，因此 Super**是一个**Base。

```
from Super s where s.field2.isOK == true 
```

打个比方来解释：

你不会问*“把所有的衣服都给我有鞋带的鞋子”*。你问*“把所有有鞋带的鞋子都给我”*。因为衣服没有鞋子（反之亦然）。鞋*是*衣服。

# sql - 通过 Spring Batch 在 Oracle 中并行更新分区表

> ID：13625486
> 
> 赞同：0
> 
> 时间：2012-11-29T12:06:59.193
> 
> 标签：sql, oracle, plsql, spring-batch

我在 Oracle 中有一张表：

*   500,000,000 条记录
*   和 109 个字段

我按范围对表进行了分区，如下所示：

```
create table AC.MY_DEAL
(
REFERENCE                  VARCHAR2(20) not null,
EXTERNAL_REFERENCE         VARCHAR2(20),
BOOK_DATE                  DATE not null,
blah blah blah...
)
partition by range (BOOK_DATE)(
partition DEAL_01 values less than (TO_DATE('01/31/2012','MM/DD/YYYY')), --January
partition DEAL_02 values less than (TO_DATE('02/31/2012','MM/DD/YYYY')), --February
blah blah blah... for other months
partition DEAL_12 values less than (TO_DATE('02/31/2012','MM/DD/YYYY')), --December
);
alter table AC.MY_DEAL add constraint PK_MY_DEAL primary key (REFERENCE); -- Primary Key
create index IX_MY_DEAL on AC.MY_DEAL (BOOK_DATE) local;                  -- Partition Key 
```

> **现在我想编写一个 SPRING BATCH 代码来并行更新表的所有 12 个分区的一个字段。**

谁能帮我找出如何与春季批处理并行更新这些分区？

我写了一个，但我认为它仍然会一个一个地更新分区 - 不是并行的。如果您想查看我的 Spring Batch 配置，我也可以添加它们。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:38:51.120

我认为您最好的选择是查看适当版本的 Oracle 的并行 DML 文档：例如。[http://docs.oracle.com/cd/B28359_01/server.111/b28313/usingpe.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28313/usingpe.htm)

通常，您需要在事务中启用并行 DML，并配置服务器的并行查询参数。

那里还有一个关于监控并行 DML 的有用部分。

# database - 如何将图像添加到数据库表

> ID：13625490
> 
> 赞同：0
> 
> 时间：2012-11-29T12:07:14.337
> 
> 标签：database, vb.net, image, linq, web

我正在编写一个网站*注释 -*在 Visual Studio 2010 中的 VB 中不是一个项目，并绑定了一个 LINQ 数据库。我构建了一个用户注册页面，提示用户输入他们的姓名、电子邮件、密码和他们需要的管理员级别。这也是添加照片的功能。这是通过标准的 asp:fileupload 控件实现的。目前它不工作。我希望浏览文件，然后单击“注册”按钮将所有用户详细信息添加到数据库中。我到目前为止的代码如下。

```
Private Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
    If IsPostBack Then
        Dim UpPath As String
        UpPath = "~/Uploads/"
        Image1.Visible = True
        Image1.ImageUrl = Session("ImagePath")

        If Not Directory.Exists(UpPath) Then
            Directory.CreateDirectory("C:\UploadedUserFiles\")
        End If

    End If
End Sub

Protected Sub btnRegister_Click(sender As Object, e As System.EventArgs) Handles btnRegister.Click

    Dim savePath = "\Uploads\"
    Dim appPath As String = Server.MapPath("~")

    If (FileUPload1.HasFile) Then
        Dim savePath2 As String = savePath & Session("currentuser") & "" & FileUPload1.FileName
        FileUPload1.SaveAs(appPath & savePath2)
        Session("ImagePath") = "." & savePath
    End If

    ' variables to store the user's registration details
    Dim username As String
    Dim email As String
    Dim password As String
    Dim retypedPassword As String

    ' variables to store the user's selected roles
    Dim productOwner As Boolean
    Dim projectManager As Boolean
    Dim scrumMaster As Boolean
    Dim developer As Boolean

    ' populate variables with the values from the web page
    username = txtUsername.Text
    email = txtEmail.Text
    password = txtPassword.Text
    retypedPassword = txtRetypePassword.Text

    ' check which user roles have been selected
    productOwner = checkProductOwner.Checked
    projectManager = checkProjectManager.Checked
    scrumMaster = checkScrumMaster.Checked
    developer = checkDeveloper.Checked

    ' boolean to check if the entered details are valid
    Dim isValid As Boolean
    isValid = True

    ' check if the values entered by the user are valid
    If _
        String.IsNullOrEmpty(username) Or _
        String.IsNullOrEmpty(email) Or _
        String.IsNullOrEmpty(password) Or _
        String.IsNullOrEmpty(retypedPassword) Or _
        password <> retypedPassword Then
        isValid = False
    End If

    ' if the values are valid, then populate the USER table with the new user and the USER ROLES table
    ' with the roles they are allowed in any project that will be created

    If isValid Then
        ' set up LINQ connection with database
        Dim db As New AgileClassesDataContext()

        ' create a user to populate a row in the USER table
        Dim user As New User With _
        {.Name = username, _
         .Password = password, _
         .Email = email}

        ' add the new user to the USER table
        db.Users.InsertOnSubmit(user)

        ' submit the changes to the database
        Try
            db.SubmitChanges()
        Catch ex As Exception
            Console.WriteLine(ex)
            db.SubmitChanges()
        End Try 
```

目前我还没有在数据库中声明“FileUPload1”，因为每当我尝试添加它时，我都会收到一条错误消息“无法将 System.Web.UI.WebControls.FileUpload 类型转换为 System.Data.Linq.Binary”我不知道怎么做才能避免这种情况。我正在使用的数据库表是：

用户

-UserID (int, 递增) -Name (nvarchar) -Password (nvarchar) -Email (nvarchar) -PhotoID (image)

任何建议都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:00:33.230

我建议您在构建网站时不要将图像保存到数据库中。您最好将图像保存在硬件上，并仅将图像路径推送到数据库。

有一些最佳实践的解释，所以看看：

[https://stackoverflow.com/a/348373/350977](https://stackoverflow.com/a/348373/350977)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:34:17.760

如果您最终决定使用 SQL Server 来完成，那么您需要：

1.  在数据库中创建一个图像类型的字段
2.  创建一个存储过程，该过程将使用此图像接收所有参数
3.  在您的应用程序方面，您需要将上传的文件转换为**System.Data.Linq.Binary**类型以将其传递给 sp，您可以这样做：**new System.Data.Linq.Binary(FileUpload1.FileBytes)**

从数据库中检索图像后，您将拥有相同的对象类型**System.Data.Linq.Binary**。要在您的网站上显示，您必须：

1.  将其转换为 base64 字符串
2.  将此 base64 推送到 img src

    System.Data.Linq.Binary img = "从您的数据库中检索到的图像"

    img src="data:image;base64,@Convert.ToBase64String(img.ToArray())"

# unix - 从unix中的字符串中提取一个单词

> ID：13625492
> 
> 赞同：1
> 
> 时间：2012-11-29T12:07:17.770
> 
> 标签：unix, sed, awk

我想从unix中的字符串中提取模式之前的单词。我怎样才能做到这一点？

例如：假设字符串中的字符串是“sv_z = sample.scr”，我必须搜索“.scr”。如果在字符串中找到，我必须提取整个单词。在此示例中，输出应为 sample.scr。到达单词的分隔符可以是空格、双引号或等于。

这里还有几个例子：

```
sv_z=sample.scr
sv_z=urhk_dbCall("sample.scr")
sv_z="sample.scr" 
```

这是我的预期输出：

```
sample.scr
sample.scr
sample.scr 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:13:29.160

这是一种使用方法`grep`：

```
grep -o '[^ "=]*\.scr' file 
```

解释：

*   `-o`标志与模式完全匹配。
*   `[ ... ]`是一个字符类。如果克拉 ( `^`) 用作该类中的第一个字符，则它是该类的否定，它实际上意味着“没有以下字符”。
*   `*`表示匹配最后一个字符，零次或任意次数。

*编辑：*

或者，如果您需要更严格的要求，则需要 Perl-regex 和[积极的前瞻](http://www.regular-expressions.info/lookaround.html)。在下面的示例中，这将确保匹配后跟双引号、空格或行尾。此外，您可以将星号 ( `*`) 更改为加号 ( `+`)，表示匹配一次或多次。因此，这将过滤掉以下内容：`.scr`. 但是从您的示例输入中并不清楚您在此处寻找的*确切内容。*祝你好运。

```
grep -oP '[^ "=]*\.scr(?=("| |$))' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:24:02.147

在这个 awk 脚本中，我使用变量“d”来包含允许的分隔符列表，以保存在脚本中多次重复它们：

```
$ cat file
sv_z=sample.scr
sv_z=urhk_dbCall("sample.scr")
sv_z="sample.scr"
sv_z="unscrambled"
sv_z="sample.scrambled"

$ awk -v d=' "=' 'match($0,"["d"][^"d"]+\.scr(["d"]|$)") { $0=substr($0,RSTART,RLENGTH); gsub("["d"]",""); print NR, $0 }' file
1 sample.scr
2 sample.scr
3 sample.scr 
```

与发布的 grep -o 解决方案进行比较：

```
$ grep -n -o '[^ "=]*.scr' file
1:sample.scr
2:sample.scr
3:sample.scr
4:unscr
5:sample.scr 
```

请注意 grep 输出中可能不需要的最后两行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:41:37.057

另一种解决方案：

```
 awk -F= 'NR==1{print $2}{FS="\""}NR>1{print $2}' file 
```

# spring - 如何将 AMQ PooledConnectionFactory 与 spring 集成一起使用？

> ID：13625493
> 
> 赞同：0
> 
> 时间：2012-11-29T12:07:26.527
> 
> 标签：spring, jms, activemq, spring-integration

我正在使用与 spring integration 2.1.3 和 spring 3.0.5 集成的 activemq 3.7 和 activemq pool 3.7 库。当我尝试像这样定义connectionFactory时，出现以下异常

```
<bean id="connectionFactory" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory">
        <bean class="org.apache.activemq.pool.PooledConnectionFactory"
            destroy-method="stop">
            <property name="connectionFactory">
                <bean class="org.apache.activemq.pool.PooledConnectionFactory" destroy-method="stop">
                    <constructor-arg name="brokerURL" value="${jms.broker.url}" />
                </bean>
            </property>
        </bean>
    </property>
    <property name="sessionCacheSize" value="10" />
    <property name="cacheProducers" value="false" />
</bean> 
```

这是一个例外：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'connectionFactory' defined in class path resource 
[META-INF/integration-context.xml]: 
Cannot create inner bean 'org.apache.activemq.pool.PooledConnectionFactory#1445748' 
of type [org.apache.activemq.pool.PooledConnectionFactory] 
while setting bean property 'targetConnectionFactory'; nested exception is 
org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'org.apache.activemq.pool.PooledConnectionFactory#1445748' 
defined in class path resource [META-INF/integration-context.xml]: 
Initialization of bean failed; 
nested exception is java.lang.reflect.MalformedParameterizedTypeException 
```

如果我使用 ActiveMQConnectionFactory 而不是 PooledConnectionFactory 一切都部署得很好但我有性能我有性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:43:28.037

第一：你能显示堆栈跟踪的其余部分以及“jms.broker.url”属性的值吗？

第二：如果您使用 Spring 的“缓存”CF 进行包装，则实际上没有必要使用“池化”CF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T08:37:21.917

Spring 使用无界通配符方法抛出异常：

```
public ObjectPoolFactory<?> getPoolFactory() {
    return null;
} 
```

虽然还没有找到解决方案。

# javascript - 将 xml 数据加载到 HTML 中

> ID：13625500
> 
> 赞同：0
> 
> 时间：2012-11-29T12:07:49.033
> 
> 标签：javascript, html, xml

我正在尝试将 xml 文件中的数据访问到 html 文件中，我的 JavaScript 代码是：

```
var xmlDoc;
var abc = new Array();

if (window.XMLHttpRequest){
    xmlDoc = new window.XMLHttpRequest();
    xmlDoc.open("GET","wwww/../student.xml",false);
    xmlDoc.send("");
    xmlDoc = xmlDoc.responseXML;
}

var x = xmlDoc.getElementsByTagName("CD");

for (i = 0; i < x.length; i++){
    abc[i] = x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue;
    document.write("value of abc["+i+"] is "+abc[i]);
} 
```

但它在 IE 中不起作用。它显示一个错误，即“访问被拒绝”。

有人可以告诉我为什么它不能在 IE 中工作吗？

已编辑

整个代码是

```
 var xmlDoc;

 try
{

 if (window.XMLHttpRequest)

 {

  xmlDoc=new window.XMLHttpRequest();

 xmlDoc.open("GET","cd_catalog.xml",false);

 xmlDoc.send("");xmlDoc=xmlDoc.responseXML;

} 

else if (ActiveXObject("Microsoft.XMLDOM"))

{

xmlDoc=new ActiveXObject("Microsoft.XMLDOM");

xmlDoc.async=false;

xmlDoc.load("cd_catalog.xml");

}

}catch(e)

{

document.write("error");

}

document.write("<table border='1'>");

var x=xmlDoc.getElementsByTagName("CD");

for (i=0;i<x.length;i++){

document.write("<tr><td>");

document.write(x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue);

document.write("</td><td>");document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);

document.write("</td></tr>");

}

document.write("</table>"); 
```

我从这里得到了这个代码[http://www.scribd.com/doc/19290029/XML-Javascript-Tutorial](http://www.scribd.com/doc/19290029/XML-Javascript-Tutorial)

它的名称为**Load an XML String - A Cross browser Example**

我无法在 IE7 中运行它.. 有人可以 hrlp

# sql - 选择所有行的字段等于 false 的连接记录

> ID：13625501
> 
> 赞同：1
> 
> 时间：2012-11-29T12:07:57.137
> 
> 标签：sql, ms-access

我有两个表：客户和地址。只能有 1 个客户记录，但一个客户可能有多个地址。每个地址都有名为“活动”的真/假字段。

我正在尝试设计一个查询来选择任何没有活动地址的客户。因此，地址记录全部标记为“active = false”或根本没有地址记录的客户。

我为此在 Access 中工作，因此 SQL 需要对 MS 友好。但是我很想知道进行这种选择的一般 SQL 技术。

编辑：表结构

## 顾客

CustomerID、CustomerName、CustomerDoB

## 地址

AddressID、AddressName、AddressPostcode、CustomerID、Active

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:15:20.410

```
select customer_id
from customers c
where not exists (select 1
                  from   addresses a
                  where  a.customer_id = c.customer_id
                  and    a.active = true
                 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:18:08.770

这应该为您指明正确的方向，没有表架构我做了一些假设：

```
SELECT * FROM Customers
WHERE ID Not In (SELECT CustomerID FROM Addresses WHERE Active = -1) 
```

这假定客户表中有一个 ID，地址表中有一个 CustomerID

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:20:06.347

这适用于 Ms-Access：

```
SELECT Customers.*
FROM Customers LEFT JOIN Addresses ON (Customers.customer_id = Addresses.customer_id AND Addresses.Active = TRUE)
WHERE Addresses.customer_id is null 
```

使用左连接我正在选择所有客户，并且我正在尝试使用地址表中的活动地址加入每个客户。如果加入不成功，Addresses.customer_id 将为空。

# mysql - 查询基于年份创建的用户数

> ID：13625507
> 
> 赞同：0
> 
> 时间：2012-11-29T12:08:13.490
> 
> 标签：mysql

我有一个包含 id、name、created_date 列的表。我需要得到像这样的输出

```
Years  count_of_name_created

2010     10

2012      9 
```

等等。现在我已经完成了两个查询，但我需要在单个查询中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:10:51.787

尝试这个 ：：

```
Select YEAR(logged_date), count(1)
from my_table group by YEAR(logged_date) order by count(1) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:22:38.703

请注意，虽然上述答案是有效的，但如果您有一个月没有创建任何内容，您将得到一个缺失的行，而不是计数为 0 的行（这会使图表一团糟！）。您可以使用整数表（即，一列，10 行，值为 0 到 9）交叉连接几次以获取一系列数字，并将其作为月份添加到开始日期以获取列表个月。并将其与您的查询结合起来以获取计数（当没有匹配的记录时，为您提供计数为 0 的月份）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:11:20.607

鉴于 created_date 是 DateTime 类型，您可以这样做：

```
SELECT YEAR(created_date) AS Year, COUNT(id) FROM userTable GROUP BY YEAR(created_date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:31:20.547

完全按照规格：

```
Select YEAR(created_date) as Years, 
       count(name) as count_of_name_created
from <table_name> 
group by YEAR(created_date) 
order by count(name) desc; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:12:57.483

此`MySQL`查询应该有效

```
SELECT DATE_FORMAT(created_date, '%Y') as 'year', COUNT(id) as 'total'
FROM users
GROUP BY DATE_FORMAT(created_date, '%Y') 
```

另见这个[问题](https://stackoverflow.com/questions/5166344/mysql-count-totals-by-year-and-month)

# c# - 我如何将时间与我在文本框中设置的时间进行比较

> ID：13625510
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:08:15.367
> 
> 标签：c#

我写了这段代码：

```
DateTime LateInTime = Convert.ToDateTime(dsAtt.Tables[0].Rows[i][1]);
int resultIn = DateTime.Compare(StfInTime, LateInTime);

if (resultIn > 0)
{
    if (DateTime.Compare(LateInTime, AlwLateTime)<=0) // count for 15min
    {
        CLD += 1;
    }
    else if (DateTime.Compare(LateInTime, AlwLateTime1) <= 0) // count for 30min
    {
        CLD1 += 1;
    }
    else if (DateTime.Compare(LateInTime, AlwLateTime2) <= 0) // count for 60min
    {
        CLD2 += 1;
    }
    else
    {
        LateTime += 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:14:51.363

我想这就是你所追求的。它减去两次以创建[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)它们之间的时间量，然后提取 span 表示的分钟数：

```
DateTime LateInTime = Convert.ToDateTime(dsAtt.Tables[0].Rows[i][1]);
TimeSpan timeLateBy = LateInTime - StfInTime;
double minutesLateBy = timeLateBy.TotalMinutes;

if (minutesLateBy > 0)
{
    if (minutesLateBy <= 15)
        CLD += 1;
    else if (minutesLateBy <= 30)
        CLD1 += 1;
    else if (minutesLateBy <= 60)
        CLD2 += 1
    else
        LateTime += 1;
} 
```

# asp.net-mvc - 使用 Html 帮助器时可移植区域 MVC 视图表单中的 NullReference

> ID：13625515
> 
> 赞同：2
> 
> 时间：2012-11-29T12:08:35.730
> 
> 标签：asp.net-mvc, razor, portable-areas

## 更新

考虑到罪魁祸首是 MvcContrib 依赖项和 .NET 4.5 Web 应用程序之间存在一些冲突，我试图避免使用 MvcContrib PA，所以我完全重建了一个新的解决方案而不使用它们（我正在试验 Autofac + MEF）。然而，即使在这个解决方案中，我也得到了完全相同的错误。通过在我的视图中注释掉一行，事实证明，有问题的方法是模型的 Title 属性的 @Html.EditorFor 。如果我用@Html.TextBoxFor 替换它，一切似乎都正常。所以这似乎排除了 PA 和 MvcContrib 的任何问题。任何想法？

## 原帖

我在使用带有一些便携式区域（[http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/](http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/)）的 MVC4 Razor 应用程序时遇到了一个奇怪的问题，其中在我的区域视图中使用 HTML 助手时突然开始抛出异常。例外情况如下：

```
System.NullReferenceException 未被用户代码处理
  H结果=-2147467261
  Message=对象引用未设置为对象的实例。
  来源=App_Web_field.master.5f132152.8jdnc_7s
  堆栈跟踪：
       在 http://server/Views/InputBuilders/EditorTemplates/Field.Master:line 5 中的 ASP.views_inputbuilders_editortemplates_field_master.__Render__control1(HtmlTextWriter __w, Control parameterContainer)
       在 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter 作家，ICollection 孩子）
       在 System.Web.UI.Control.RenderChildren（HtmlTextWriter 作家）
       在 System.Web.UI.Control.Render（HtmlTextWriter 编写器）
       在 System.Web.UI.Control.RenderControlInternal（HtmlTextWriter 编写器，ControlAdapter 适配器）
       在 System.Web.UI.Control.RenderControl（HtmlTextWriter 编写器，ControlAdapter 适配器）
       在 System.Web.UI.Control.RenderControl（HtmlTextWriter 编写器）
       在 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter 作家，ICollection 孩子）
       在 System.Web.UI.Control.RenderChildren（HtmlTextWriter 作家）
       在 System.Web.UI.Page.Render（HtmlTextWriter 编写器）
       在 System.Web.Mvc.ViewPage.Render（HtmlTextWriter 编写器）
       在 System.Web.UI.Control.RenderControlInternal（HtmlTextWriter 编写器，ControlAdapter 适配器）
       在 System.Web.UI.Control.RenderControl（HtmlTextWriter 编写器，ControlAdapter 适配器）
       在 System.Web.UI.Control.RenderControl（HtmlTextWriter 编写器）
       在 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）
  内部异常：

```

我认为相关的代码是：

```
 @using Cad.Web.Areas.Assets
@model Cad.Web.Areas.Editing.Models.ItemEditModel

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>@StringResources.NewItem</legend>
        @Html.HiddenFor(model => model.Id)
        @Html.HiddenFor(model => model.AuthorId)

        <ol>
            <li>
                @Html.LabelFor(model => model.Title)    
                @Html.EditorFor(model => model.Title)
                @Html.ValidationMessageFor(model => model.Title)
            </li>
            <li>
                @Html.LabelFor(model => model.Description)
                @Html.TextAreaFor(model => model.Description, 4, 60, null)
                @Html.ValidationMessageFor(model => model.Description)
            </li>
        </ol>

        @Html.AntiForgeryToken()
        <input type="submit" value="@StringResources.Create" />
    </fieldset>
} 
```

如果我注释掉两个*li*的内容，一切正常。如果我取消注释它们，只要操作方法返回其结果，我就会得到异常。我可以确认传递给视图的模型不为空，我什至可以无错误地访问其字段，例如通过添加带有*@Model.Title*的段落。我尝试在任何*@Html...*行中设置断点，但它没有被命中，并且抛出了相同的异常。

看起来我的便携式区域（包括视图）有问题，但我没有从这个异常中得到任何线索。这是我用 PA 构建整个架构的过程，至少这对像我这样的新手有用（VS2012、C#、MVC4）：

a) 创建一个*新的空白解决方案*。在其中，创建一个包含 PA的*新类库项目。**使用 NuGet 将MvcContrib.Mvc3-ci*添加到此项目，以及对*MVC 程序集*的引用（System.Web.Mvc、System.Web.Routing、System.Web.Razor 等：我刚刚从我的主机复制了所有与 MVC 相关的引用网络项目 - 见下文 (b)-)。创建您的*PA 文件夹*，其中包含控制器、模型和视图的子文件夹。将视图设置为*嵌入式资源*，并添加一个派生自*PortableAreaRegistration*的区域注册类（在 PA 文件夹的同一命名空间中），如下所示：

```
public class EditingAreaRegistration : PortableAreaRegistration
{
    public override string AreaName { get { return "Editing"; } }

    public override void RegisterArea(AreaRegistrationContext context, IApplicationBus bus)
    {
        base.RegisterArea(context, bus);
        context.MapRoute(
            "Editing_default",
            "Editing/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

此外，在 Areas 文件夹中添加一个最小的 web.config：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
      <compilation debug="true" targetFramework="4.5" />
      <httpRuntime targetFramework="4.5" />
    </system.web>
</configuration>
```

在 Views 文件夹中，我放置了一个 _ViewStart.cshtml（我从主机 Web 应用程序中获取）。

b) 创建一个*主机 Web 应用程序*，引用 PA 项目和相同的 MvcContrib。在*global.asax*中添加对*PortableAreaRegistration.RegisterEmbeddedViewEngine()*的调用，使其看起来像这样：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    PortableAreaRegistration.RegisterEmbeddedViewEngine();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    AuthConfig.RegisterAuth();
}
```

我还在这个 Web 应用程序中添加了一个（非便携式）区域（用于管理目的）；在那里，在 Areas 文件夹中，我确保 web.config 中的 pages 元素具有 validateRequest="false" （[http://www.myclojureadventure.com/2010/06/mvccontrib-portable-areas-part-1.html](http://www.myclojureadventure.com/2010/06/mvccontrib-portable-areas-part-1.html)）。然后我可以在我的路线中指定区域名称（当然，Resharper 之类的工具会在视图中发出错误信号，但我可以放心地忽略它）并且我被带到 PA，就好像它实际位于主机 Web 应用程序中一样.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:17:13.350

你能展示你的模型吗？

您的任何模型字段是否是异物？

在不知道你的模型是什么样子的情况下，你可以试试这个：

```
 <ol>
        <li>
            @if(Model.Title!=null) {
               @Html.LabelFor(model => model.Title)    
               @Html.EditorFor(model => model.Title)
               @Html.ValidationMessageFor(model => model.Title)
            }
        </li>
        <li>
            @if(Model.Description!=null) {
               @Html.LabelFor(model => model.Description)
               @Html.TextAreaFor(model => model.Description, 4, 60, null)
               @Html.ValidationMessageFor(model => model.Description)
            }
        </li>
    </ol> 
```

即使-您-知道您的对象不为空，您的视图也不知道。例如，如果您的模型确实有外来对象引用

```
public Description Description { get; set; } 
```

您可以尝试将其更改为

```
public virtual Description Description { get; set; } 
```

看看会发生什么。

# asp.net - 匹配 web.config 转换中的元素名称

> ID：13625518
> 
> 赞同：17
> 
> 时间：2012-11-29T12:08:52.163
> 
> 标签：asp.net, deployment, web-config, web-deployment

我正在尝试按元素名称匹配元素，我必须在发布时更改 sessionState 元素超时，但我无法通过任何属性值匹配它。

```
<sessionState timeout="5000"/> 
```

如何匹配 Web.Release.config 中的这个元素？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-29T12:26:43.083

这应该工作：

```
<sessionState timeout="2000" 
 xdt:Transform="SetAttributes(timeout)">
</sessionState> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-25T17:04:31.900

如果有人想在这里更改所有属性，那就是

```
<sessionState xdt:Transform="SetAttributes" xdt:Locator="XPath(/configuration/system.web/sessionState)" 
                mode="SQLServer"
                stateConnectionString="tcpip=1234.00" 
                sqlConnectionString="myConnection"
                cookieless="false" 
                timeout="2000"  /> 
```

# matlab - 如何从单元格数组中删除一组特定的行？

> ID：13625519
> 
> 赞同：3
> 
> 时间：2012-11-29T12:08:58.383
> 
> 标签：matlab, octave

我有一个大约 6000 行的单元格数组。接下来，我有一个带有一组行索引的向量，我们称之为`removalIdx`. 我想创建一个新的元胞数组，其中包含原始元胞数组中的所有行，除了`removalIdx`. 关于如何在不恢复到 for 循环的情况下执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:11:52.787

以下示例代码应回答您的问题：

```
B = {'hello';'world';'are';'you';'there'}; %# Example cell array
ToRemove = [2; 4]; %# Example indices to remove
Soln = B; %# Create the new cell array
Soln(ToRemove) = []; %# Remove the offending rows 
```

注意：

```
>> Soln

Soln = 

    'hello'
    'are'
    'there' 
```

# android - 远程调试

> ID：13625528
> 
> 赞同：1
> 
> 时间：2012-11-29T12:09:27.760
> 
> 标签：android, testing, remote-debugging

我有一个 android 应用程序，可以在我所有可用的设备上完美运行。但是客户提供了应用程序无法运行的设备列表。有远程调试工具吗？这样我就可以要求他们连接手机并远程调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-13T09:37:04.873

我建议使用 TestDroid.com 它不是最有效的工具，但允许您控制物理设备并通过浏览器查看输出。

如果您有预算，Bugfinders 提供出色的测试服务，使用人群测试在数百个地点的数百台设备上进行测试。

或者在模拟器中进行测试将提供半准确的结果，但根据错误应该没问题。

# php - Preg匹配多个单词

> ID：13625532
> 
> 赞同：0
> 
> 时间：2012-11-29T12:09:43.290
> 
> 标签：php, regex

我有一个看起来像这样的模式：

```
$my_pattern = "/(^|[\n\r\f\t \.\,])" . $my_text . "([\n\r\f\t \.\,]|$)/iu" 
```

我有几个单词可能是 $my_text，我正在寻找一种方法来为所有这些单词进行预匹配。我知道我可以做一个 foreach 并为每次迭代更改 $my_text，但是我怎样才能一步完成呢？

所以，如果我有一个数组`my_textes = array("my_text1", "my_text2");` And 这样的句子：

"我寻找 my_text1 和 my_text2",

我希望能够找到 my_text1 和 my_text2。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:40:38.540

把正则表达式变成这样：

```
$my_pattern = "/(^|[\s.,])(my_text1|my_text2)([\s.,]|$)/iu"; 
```

内爆函数将在这里为您提供帮助。

[代码示例](http://ideone.com/08ikHk)

# .net - 从外部应用程序访问 Visual Studio

> ID：13625536
> 
> 赞同：2
> 
> 时间：2012-11-29T12:10:05.217
> 
> 标签：.net, visual-studio, visual-studio-extensions

我想知道是否可以从外部应用程序访问 Visual Studio，以便应用程序对 Visual Studio 中发生的事件做出反应。通过添加一个预先构建的扩展，该扩展被添加到 Visual Studio，然后与应用程序交互，反之亦然。

有点像首先构建为应用程序的扩展。

我想要实现的是构建一个与 Visual Studio 对话的应用程序。因此，我会像往常一样构建一个应用程序，但我希望它能够根据使用 Visual Studio 时在 Visual Studio 中发生的情况与活动和操作进行交互。

因此，如果我单击添加新项目，我的应用程序（如果打开）可以基于单击“新项目”到“您只需单击以打开一个新项目”的操作更改文本，这将在我的应用程序中表示。

我想我可能只是创建一个扩展，但我只是想知道是否也有可能拥有另一个可以做到这一点的开放应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:55:24.247

首先让我说我认为扩展可能最适合您的需求。但是由于您的问题是是否可以从另一个应用程序完成，所以答案是**肯定**的，使用**[开发工具环境 (DTE)](http://msdn.microsoft.com/en-us/library/envdte.dte.aspx)**。该库允许您访问许多 Visual Studio 功能，例如：

*   [附加到另一个 Visual Studio 实例](http://msdn.microsoft.com/en-us/library/6cefss65.aspx)

*   [在 Visual Studio 中执行命令](https://stackoverflow.com/a/7740199/1379664)

甚至[订阅 Visual Studio 中发生的事件](https://stackoverflow.com/q/7825489/1379664)

DTE 还可用于创建宏、向 VS 工具箱添加更多控件等。

# yii - 如何访问外键相关表字段

> ID：13625537
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:10:10.957
> 
> 标签：yii, foreign-key-relationship

我有两张桌子：

**用户**

*   用户身份
*   用户名
*   安全问题 ID

**安全问题**

*   安全问题 ID
*   安全问题
*   用户身份

现在在控制器中我正在采取行动=

```
public function actionCreate(){

     if(isset($_POST['email']))
     {
            $record=User2::model()->find(array(
                'select'=>'userId, securityQuestionId, primaryEmail,password,userId',
                'condition'=>'primaryEmail=:email',
                'params'=>array(':email'=>$_POST['email']))
            );

            if($record===null)
            {
                echo "Email invalid";
            }
            else 
            {
                echo "email exists";
            }
       }
} 
```

所以 $record->securityQuestionId 显示 id。现在我想显示实际的安全问题。在 user2 模型中，我的关系为

```
securityQuestion'=>array(self::BELONGS_TO, ' Securityquestion', 'securityQuestionId'), 
```

那么我怎样才能显示实际的安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:05:29.413

您的表有点奇怪：由于 User 有 securityQuestionId，我们可以认为 User 属于 SecurityQuestion，但您在 SecurityQuestion 中也有 userId，因此 SecurityQuestion 也属于 User。

对我来说，你应该有：

**用户**

```
id
username
id_question 
```

**安全问题**

```
id
question 
```

在您的模型规则中：

**用户**

```
'securityQuestions'=>array(self::BELONGS_TO, 'SecurityQuestion', 'id_user'), 
```

**安全问题**

```
'user'=>array(self::HAS_MANY, 'User', 'id_user'), 
```

现在有相关的SecurityQuestion：

```
$model = User::model()->find(...);
//display the related question
$model->securityQuestion->question; 
```

# python - 匿名用户错误编辑

> ID：13625538
> 
> 赞同：0
> 
> 时间：2012-11-29T12:10:12.120
> 
> 标签：python, django, facebook, authentication, django-facebook

我已经为我的网站安装了**django-facebook-4.0.8**。该软件包已成功安装，但会出现不同类型的错误。请帮忙！

我正在使用 AUTH_PROFILE_MODULE = 'django_facebook.FacebookProfile'。

它将用户注册为**AUTH 用户**，但未在 django_facebook_facebookprofile 表中注册。注册后，它给出了**“AnonymousUser”对象没有属性“后端”**

这是我的**回溯：**

```
Environment:

Request Method: POST
Request URL: http://pydev.aviesta.com/facebook/connect/?facebook_login=1

Django Version: 1.4.2
Python Version: 2.6.6
Installed Applications:
['mezzanine.boot',
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.redirects',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.sitemaps',
'django.contrib.staticfiles',
'cartridge.shop',
'mezzanine.conf',
'mezzanine.core',
'mezzanine.generic',
'mezzanine.blog',
'mezzanine.forms',
'mezzanine.pages',
'mezzanine.galleries',
'mezzanine.twitter',
'mezzanine.accounts',
'user_attr',
'facebook',
'django_facebook',
'django_extensions',
'filebrowser_safe',
'south',
'grappelli_safe',
'django.contrib.admin',
'django.contrib.comments']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.redirects.middleware.RedirectFallbackMiddleware',
'django.middleware.common.CommonMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'cartridge.shop.middleware.ShopMiddleware',
'mezzanine.core.request.CurrentRequestMiddleware',
'mezzanine.core.middleware.TemplateForDeviceMiddleware',
'mezzanine.core.middleware.TemplateForHostMiddleware',
'mezzanine.core.middleware.AdminLoginInterfaceSelectorMiddleware',
'mezzanine.pages.middleware.PageMiddleware']

Traceback:
File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response

response = middleware_method(request, callback, callback_args, callback_kwargs) File "/usr/lib/python2.6/site-packages/mezzanine/pages/middleware.py" in process_view
return view_func(request, *view_args, **view_kwargs) File "/usr/lib/python2.6/site-packages/django/views/decorators/csrf.py" in wrapped_view
return view_func(*args, **kwargs) File "/usr/lib/python2.6/site-packages/django_facebook/decorators.py" in _wrapped_view
return view_func(request, *args, **kwargs) File "/usr/lib/python2.6/site-packages/django_facebook/views.py" in connect
response = _connect(request, facebook_login) File "/usr/lib/python2.6/site-packages/django_facebook/views.py" in _connect
action, user = connect_user(request) File "/usr/lib/python2.6/site-packages/django_facebook/connect.py" in connect_user
user = _login_user(request, facebook, auth_user, update=False) File "/usr/lib/python2.6/site-packages/django_facebook/connect.py" in _login_user
login(request, authenticated_user) File "/usr/lib/python2.6/site-packages/django/contrib/auth/__init__.py" in login
request.session[BACKEND_SESSION_KEY] = user.backend File "/usr/lib/python2.6/site-packages/django/utils/functional.py" in inner
return func(self._wrapped, *args)
Exception Type: AttributeError at /facebook/connect/
Exception Value: 'AnonymousUser' object has no attribute 'backend' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:55:19.667

基本上你在打电话

```
self.login(request, user) 
```

无需调用

```
authenticate(username=user, password=pwd) 
```

第一的

当您调用身份验证时，django 会在用户上设置后端属性，注意要使用哪个后端，请参阅此处了解更多详细信息[https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth。认证](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.authenticate)

# javascript - jQuery localStorage 和数组

> ID：13625540
> 
> 赞同：0
> 
> 时间：2012-11-29T12:10:14.373
> 
> 标签：javascript, jquery, local-storage

我想要做的是将输入表单中的一些数据存储到一个数组中，但是如果它不存在，有什么方法可以创建数组，然后运行脚本的其余部分，否则，如果它确实存在，那么继续相同脚本也是如此。

我想将数组存储为 localStorage，以便稍后我可以显示这些项目。

```
var routes = [];

div.on('click', function() {
   routes.push({ routeF : $('input[name=routeFrom]').val() });
   routes.push({ routeT : $('input[name=routeTo]').val() });
   routes.push({ leaving : $('select').val() });

   localStorage['routes'] = JSON.stringify(routes);
   var storedRoutes = JSON.parse(localStorage['routes']);
}); 
```

我希望能够做到这一点而不做：

```
if(routes[]) {
    //do code
} else { 
    var routes = []; 
    //do same code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:08:59.610

路由变量是否已经声明？

如果是这样，您应该能够执行以下操作：

```
div.on('click', function() {
  // The following line will set routes to an empty array if set.
  // Be careful here, as if you have not declared routes as a variable,
  // it will become a global variable.
  (!routes || !routes.length) && (routes = []);
  // End Change ...
  routes.push({ routeF : $('input[name=routeFrom]').val() });
  routes.push({ routeT : $('input[name=routeTo]').val() });
  routes.push({ leaving : $('select').val() });

  localStorage['routes'] = JSON.stringify(routes);
  var storedRoutes = JSON.parse(localStorage['routes']);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:04:03.810

只需将代码放在 if 语句后面：

```
if(routes) {
    // do nothing
} else { 
    var routes = []; 
}
// do the code for both cases 
```

或者，没有“无”：

```
if( ! routes) {
    var routes = []; 
}
// do the code 
```

# php - Firefox/Chrome/LAMP：UTF-8 - 无效字符

> ID：13625543
> 
> 赞同：2
> 
> 时间：2012-11-29T12:10:25.380
> 
> 标签：php, html, firefox, google-chrome, utf-8

我试图将网站转换为 UTF-8。为此，我将 PHP 文件转换为 UTF-8，添加一个`header('Content-Type: text/html; charset=utf-8')`，添加`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`到 HTML 标头，将 mysql 表内容转换为 utf-8 (ALTER ...)，并将 MySQL 连接编码设置为 utf- 8.

现在，一切似乎都很好，但有时 IE8、Firefox 和 Chrome 会显示 - 而不是德语变音符号。IE9 根本没有显示这个问题。

刷新后，问题解决了，但过一会或几次刷新后�再次出现，....

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:46:33.707

通常这种行为是由 IE 的 quirks 模式引起的。如果您的页面不是有效的 HTML，浏览器可以退回到 quirksmode，您可以检查此按 F12 以显示开发人员工具栏。

如果显示的模式是 quirksmode，您可以通过编写有效的 HTML 来解决您的问题。有可用的离线和[在线 HTML 验证器](http://validator.w3.org/)。

如果显示的模式与您的浏览器匹配，那么您可以使用[W3-checker](http://validator.w3.org/i18n-checker/)来查找您的页面编码问题。

编辑：

还要确保在使用连接对象之前设置它的编码。您写道您将 MySQL-connection 设置为 utf-8，但您没有写出您是如何做到的。

```
// tells the mysqli connection to deliver UTF-8 encoded strings.
$db = new mysqli($dbHost, $dbUser, $dbPassword, $dbName);
$db->set_charset('utf8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:15:46.500

好的，我知道了！

问题是，嵌入式广告服务器（OpenX）更改了 mysql 客户端编码。

现在，我在执行“view_local”后将字符集设置回 UTF-8，现在一切似乎都很好！

感谢您的支持，帮助我找到了这个问题的根本原因！

# grails - Grails Platform Core，导航 API：添加分隔符的简单方法？

> ID：13625544
> 
> 赞同：1
> 
> 时间：2012-11-29T12:10:28.077
> 
> 标签：grails, grails-2.0, grails-platform-core

我正在使用插件平台核心的[导航 API](http://grailsrocks.github.com/grails-platform-core/guide/nav.html)，组织和显示菜单似乎很有趣。

Twitter 引导菜单可以选择添加水平分隔线，方法是添加 `<li class="divider"></li>`

有没有办法在菜单中定义分隔符`navigation DSL`并在菜单中生成这个 li？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T16:18:35.277

我在邮件列表中回答了这个问题：http: [//grails.1312388.n4.nabble.com/platform-core-Navigation-easy-way-to-add-separators-td4638175.html](http://grails.1312388.n4.nabble.com/platform-core-Navigation-easy-way-to-add-separators-td4638175.html)

# django - 无法在模板中链接 css 文件

> ID：13625545
> 
> 赞同：0
> 
> 时间：2012-11-29T12:10:30.153
> 
> 标签：django, django-templates

我是 django 的新手，我正在尝试将 css 文件链接到模板。

1.  我正在使用开发服务器
2.  在我的 settings.py 项目中，我有应用程序 'django.contrib.staticfiles'
3.  在我的`project/app`文件夹中，我有`static`文件夹和里面`file.css`
4.  在`index.html`文件（内部`project/app/templates/app`）中，我尝试使用`<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/file.css" />`并尝试使用`STATIC_URL`.

不幸的是，变量 STAIC_URL（和 MEDIA_URL）是空字符串，所以结果 url 是`/file.css`.

任何人都可以帮助我吗？我知道 settings.py 中的一些 STATIC_URL 变量在哪里，但是 StaticFinder 应该在 app/static 中自动找到文件，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:42:44.203

您需要使用 RequestContext 或[`render`](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#render)快捷方式，以确保运行上下文处理器并将变量添加到您的模板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:55:55.713

这是包含所有必需信息的[Django 文档页面。](https://docs.djangoproject.com/en/dev/howto/static-files/)

您可能忘记设置`STATIC_ROOT`,然后运行命令，该命令将从项目静态目录中的所有应用程序中收集所有静态文件。`STATIC_URL``setting.py``./manage.py collectstatic`

# c# - 在不同线程 .NET 中创建的控件

> ID：13625546
> 
> 赞同：2
> 
> 时间：2012-11-29T12:10:38.733
> 
> 标签：c#, multithreading

我目前正在调试我们的 .NET 应用程序中的有线问题。我们将表单和控件动态地插入在一起，作为对某些服务器事件的反应。与服务器的通信当然是在线程中完成的。所有 UI 元素都通过 Control 的调用机制进行操作。

我仍然得到跨线程异常。在某些子控件中，InvokeRequired 属性为 true，尽管其父控件的 InvokeRequired 属性为 false。所以这些孩子一定是在主线程之外创建的。我目前正在寻找可能导致此错误控件创建的线程。正如您在 Visual Studio 线程视图的屏幕截图中所见，有许多名为“mainX”的工作线程（这些只是其中的一部分），我不知道它们来自哪里。

这是“旧”主线程的某种标准命名模式吗？也许是由于 - 我不知道 - 多次调用 Application.Run 或类似的东西？

![有线工作线程](../Images/0b1a61790318c01ca1642ac8e741f4cb.png)

欢迎任何建议！

**编辑**（总结一下）
我有一个带有 InvokeRequired == false 的根控件和一些带有 InvokeRequired == true 的子控件。这怎么可能呢？root.Controls.Add(child) 应该已经抛出异常。

是否有人知道导致线程命名模式的原因，如屏幕截图所示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:39:01.340

我认为可能发生的情况是，您在控件创建其句柄之前以某种方式检查了控件的 InvokeRequired 属性。如果你这样做，InvokeRequired 将返回 false，即使它是一个单独的线程。

您可以通过检查 Control.IsHandleCreated 来检查这一点，因此您至少可以查明这是否正在发生。但是，如果确实发生了这种情况，则修复它是另一回事……

# java - Java中的ASCII字符集问题

> ID：13625550
> 
> 赞同：4
> 
> 时间：2012-11-29T12:10:47.263
> 
> 标签：java, ascii

考虑一个简单的例子：

```
System.out.println("¬");
System.out.println((int)(('¬')));
System.out.println((char)170); 
```

我得到的输出如下（从示例代码开始）：

```
¬
172
ª 
```

为什么会出现这种情况？我查看了[字符 170 的 ASCII 图表](http://www.theasciicode.com.ar/extended-ascii-code/logical-negation-symbol-ascii-code-170.html)，它说它确实是`¬`. 甚至（在 Windows 上），当一个`Alt`+170 时，我得到`¬`.

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:13:48.350

Java 的（内部）默认字符集是 UTF-16 (Unicode)。

十进制 170 是 AA 十六进制，所以你的角色是 FEMININE ORDINAL INDICATOR，见[这里](http://www.fileformat.info/info/unicode/char/00aa/index.htm)。

[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的文档指出：

char：char 数据类型是单个 16 位 Unicode 字符。它的最小值为“\u0000”（或 0），最大值为“\uffff”（或 65,535，包括在内）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:15:48.760

不，如果您没有明确指定，Java 是 UTF。看看[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)你会发现 unicode U+00AC (==172) 是否定符号，unicode U+00AA (==170) 是阴性序数字符。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:16:40.347

[ASCII（维基百科）](https://en.wikipedia.org/wiki/ASCII)只有 128 个字符。

因此，您正在某种“增强的 ASCII”表中查找表，可能是 Latin-1 / ISO-8859-1 字符集，而 Java 使用**Unicode**，通常是两个字节的 Unicode 变体。

[Unicode 字符列表（维基百科）](https://en.wikipedia.org/wiki/List_of_Unicode_characters)与 Java 所做的一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:29:06.240

如果您真的想在 system.out 中打印它，请使用 unicode 等效项，如下所示；

```
 System.out.println("\u00AC"); 
```

希望这可以帮助。

# javascript - 重新加载时更改 div 的背景颜色

> ID：13625556
> 
> 赞同：0
> 
> 时间：2012-11-29T12:11:01.090
> 
> 标签：javascript, jquery, css

每次重新加载窗口时，我都希望更改为 div 类的背景颜色。
我使用此代码在刷新时更改正文的背景颜色：

```
<script type="text/javascript">
<!-- //Enter list of bgcolors:
var bgcolorlist=new Array("silver", "#BAF3C3", "#c3baf3")

document.body.style.background=bgcolorlist[Math.floor(Math.random()*bgcolorlist.length)]
// -->
</script> 
```

但我希望更改“.three”的背景颜色，因此每次重新加载窗口时，每个具有“three”类的 div 都会具有不同的背景颜色（从一组颜色中选择）。
似乎无法弄清楚如何做到这一点，这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:12:55.563

用这个

```
var bgcolorlist=new Array("silver", "#BAF3C3", "#c3baf3")

$(".three").css("background-color",bgcolorlist[Math.floor(Math.random()*bgcolorlist.length)]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:22:29.520

*如果必须*更改背景颜色，您可以使用`localStorage`在重新加载页面之前检查背景颜色：

```
var colours = ['#F00','#0F0'];//my eyes!
var currentColour = +(localStorage.previousBGColour || -1)+1;
currentColour = currentColour >= colours.length ? 0 : currentColour;//if index is not set reset to colour at index 0
document.getElementById('theDiv').style.backgroundColor = colours[currentColour];
localStorage.previousBGColour =  currentColour;//store colour that's currently in use 
```

请注意，并非所有浏览器都支持`localStorage`：例如，有些人仍在使用旧的、糟糕的 IE8。

*jQuery*

```
$(document).ready(function()
{
    (function()
    {//this IIFE is optional, but is just a lot tidier (no vars cluttering the rest of the script)
        var colours = ['#F00','#0F0'],
        currentColour = +(localStorage.previousBGColour || -1) + 1;
        $('#theDiv').css({backgroundColor:colours[currentColour]});
        localStorage.previousBGColour = currentColour;
    }());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:13:49.720

使用 JQuery 你可以做到

```
$(document).ready(function(){
    $('.three').css('background-color',bgcolorlist[Math.floor(Math.random()*bgcolorlist.length));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:13:51.130

```
var bgcolorlist = ['silver', '#BAF3C3', '#C3BAF3'];

$(function() {
    $('.three').css({
        background: bgcolorlist[Math.floor(Math.random()*bgcolorlist.length)]
    });
}); 
```

每次页面加载时，它都会从列表中选择一种随机颜色并将其设置在正文的 css 上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:19:09.250

通过使用纯 JS：

```
window.onload = function(){
    var arr = document.querySelectorAll(".three");
    for(var i=0;i<arr.length;i++){
         arr[i].style.background = bgcolorlist[Math.floor(Math.random()*bgcolorlist.length)]
    }
} 
```

这将为所有具有三类随机颜色的 div 提供。如果您希望所有内容都相同，只需将 math.random 缓存到变量中

# javascript - Windows 7 中闪烁的任务栏图标

> ID：13625560
> 
> 赞同：0
> 
> 时间：2012-11-29T12:11:16.353
> 
> 标签：javascript, windows, browser, taskbar

我已经构建了一个即时聊天工具，该工具在大多数情况下都可以完美运行，当有新聊天到达时提醒用户时遇到了一些问题，我在 XP 和 7 上都可以正常工作，前提是任务栏图标未组合，当用户在 Windows 7 中组合了任务栏图标时，有没有办法聚焦窗口或闪烁任务栏图标？

我目前的方法是使用 titlealert jQuery 插件在新消息到达时更改页面标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:34:38.857

您可以使用

```
window.focus() 
```

但这并不总是有效。让任务栏图标闪烁的可能性不可用。

# spring - 为什么每次访问 servlet 时我的 Spring 应用程序上下文都会重新加载？

> ID：13625563
> 
> 赞同：2
> 
> 时间：2012-11-29T12:11:28.387
> 
> 标签：spring, servlets, quartz-scheduler

几个月前，我做了一个简单的应用程序，如果在数据库中找到某些条件，我每天晚上都会运行它来向我的用户发送电子邮件。我使用 Spring 3.1.0 和 Quartz 1.8.5 来实现这一点；到目前为止，一切都很好。

该应用程序部署在 weblogic 服务器中。

上周，我被要求修改应用程序以允许手动命令它通过 URL 运行。

我向它添加了一个 servlet，它运行良好：每次有人调用 URL 时，应用程序就会运行。

但是出现了一个附带效应——每个 servlet 调用也会引发 spring 上下文的重新加载，并创建另一个 Quartz 实例。因此，如果该 servlet 被调用 n 次，当 Quartz 解雇我的工作时，我的应用程序将重复发送 n+1 封电子邮件，而不是仅发送 1 封。

我想了解为什么会发生这种情况以及如何解决这个问题。请问你能帮帮我吗？

以下是我的问题的相关文件。

日志文件摘录，包括应用程序的启动：

```
28/11/2012 16:37:48 org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
28/11/2012 16:37:48 org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Wed Nov 28 16:37:48 BRST 2012]; root of context hierarchy
28/11/2012 16:37:48 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from URL [file:/C:/bea/user_projects/workspaces/app/target/app-1.0.0/WEB-INF/classes/app-context.xml]
28/11/2012 16:37:48 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [app-data-context.xml]
28/11/2012 16:37:48 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [app-scheduler.xml]
28/11/2012 16:37:48 org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from class path resource [app.properties]
28/11/2012 16:37:48 org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@599bcd: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,appDS,job,cronTrigger,org.springframework.scheduling.quartz.SchedulerFactoryBean#0,appDAO,appService,mailerService,appTask, (...)]; root of factory hierarchy
28/11/2012 16:37:50 org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup start
INFO: Starting beans in phase 2147483647

**28/11/2012 16:37:50 org.springframework.scheduling.quartz.SchedulerFactoryBean startScheduler
INFO: Starting Quartz Scheduler now**

28/11/2012 16:37:50 org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization completed in 2109 ms 
```

每次调用 servlet 时出现的日志文件摘录：

```
<28/11/2012 16h37min50s BRST> <Notice> <WebLogicServer> <BEA-000360> <Server started in RUNNING mode> 
28/11/2012 16:39:06 org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@11f7458: startup date [Wed Nov 28 16:39:06 BRST 2012]; root of context hierarchy
28/11/2012 16:39:06 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [app-context.xml]
28/11/2012 16:39:06 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [app-data-context.xml]
28/11/2012 16:39:06 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [app-scheduler.xml]
28/11/2012 16:39:06 org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from class path resource [app.properties]
28/11/2012 16:39:06 org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@10ca001: defining beans [(...)]; root of factory hierarchy
28/11/2012 16:39:06 org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup start
INFO: Starting beans in phase 2147483647
**28/11/2012 16:39:06 org.springframework.scheduling.quartz.SchedulerFactoryBean startScheduler
INFO: Starting Quartz Scheduler now** 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <description>generic web.xml</description>

    <!-- ====================================== --> 
    <!--               SPRING                   -->
    <!-- ====================================== --> 
    <!-- Loading Application Bean's. -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:app-context.xml</param-value>
    </context-param>

    <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener>

   <servlet>
        <display-name>appServlet</display-name>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>br.com.app.publicInterface.appServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/appServlet</url-pattern>
    </servlet-mapping>

</web-app> 
```

app-context.xml 摘录：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
        <property name="locations">
            <list>
               <value>classpath:app.properties</value>
            </list>
       </property>
    </bean>

    <import resource="classpath:app-data-context.xml"/>
    <import resource="classpath:app-scheduler.xml"/>

    <!-- DAOs -->
    <!-- Services -->   
    <!-- tasks -->

</beans> 
```

应用程序调度程序.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <bean name="job" class="org.springframework.scheduling.quartz.JobDetailBean">
        <property name="jobClass" value="br.com.app.job.QuartzJob" />
        <property name="jobDataAsMap">
            <map>
                <entry key="gerenciadorTasks">
                    <ref bean="gerenciadorTasks" />
                </entry>
            </map>
        </property>
    </bean>

    <bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="job" />
        <property name="cronExpression" value="${quartz.cronExpression}" />
    </bean>

    <bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="quartzProperties">
            <props>
                <prop key="org.quartz.scheduler.skipUpdateCheck">true</prop>
                <prop key="org.quartz.jobStore.isClustered">true</prop> 
                <prop key="org.quartz.scheduler.instanceName">NotificadorQuartzScheduler</prop>  
                <prop key="org.quartz.scheduler.instanceId">AUTO</prop> 
            </props>
        </property>
        <property name="triggers">
            <list>
                <ref bean="cronTrigger" />
            </list>
        </property>
    </bean>

</beans> 
```

AppServlet 源代码：

```
public class AppServlet extends HttpServlet   {

    private static final long serialVersionUID = 7213474106234238692L;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        PrintWriter out = resp.getWriter();

        out.println("execução iniciada em: " + new Date());
        ApplicationContext context = new ClassPathXmlApplicationContext("classpath:app-context.xml");   
        GerenciadorTasks gt = (GerenciadorTasks) context.getBean(SpringNameBeans.GERENCIADOR_TASKS);
        gt.init();
        out.println("execução terminada em: " + new Date());

    }

} 
```

非常感谢您的宝贵时间。

# 解决方案

--- 按照@Boris 的信息，我稍微修改了我的servlet。我的上下文已经加载，我只需要访问它：

```
public class AppServlet extends HttpServlet   {

    private static final long serialVersionUID = 7213474106234238692L;

    ApplicationContext applicationContext = null;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        PrintWriter out = resp.getWriter();

        out.println("execução iniciada em: " + new Date());
         if (applicationContext == null){
                applicationContext = WebApplicationContextUtils.getWebApplicationContext(this.getServletContext());
        }
        GerenciadorTasks gt = (GerenciadorTasks) applicationContext.getBean(SpringNameBeans.GERENCIADOR_TASKS);
        gt.init();
        out.println("execução terminada em: " + new Date());

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:49:15.673

在您的代码中，您要在每个 GET 方法上创建一个新的应用程序上下文，您应该在 servlet init() 方法中创建您的上下文，或者改用 Web App root contet：

```
public class AppServlet extends HttpServlet   {

@Autowired
ApplicationContext applicationContext;

@Override
public void init(ServletConfig arg0) throws ServletException {
     WebApplicationContextUtils.getWebApplicationContext(arg0.getServletContext())
        .getAutowireCapableBeanFactory().autowireBean(this);
}

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        PrintWriter out = resp.getWriter();

        out.println("execução iniciada em: " + new Date());

        GerenciadorTasks gt = (GerenciadorTasks) this.applicationContext.getBean(SpringNameBeans.GERENCIADOR_TASKS);
        gt.init();
        out.println("execução terminada em: " + new Date());

    }
} 
```

目前尚不清楚您的 GerenciadorTasks 是否是单例的，所以在我的回答中我使用 getbean() 而不是自动装配。**在每个 GET 请求上调用 init() 不太可能是您想要做的**。另请注意，[根 Web 应用程序上下文](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring?lq=1)已在您的配置中创建

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:app-context.xml</param-value>
    </context-param>

    <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener> 
```

如果您想在 spring 中使用调度，请考虑使用[相应的 API](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html)。

因此，我认为仅使用调度 api 的根 Web 应用程序上下文是可行的方法。还要看看[Spring lifecyle beans](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-processor)。

# android - 如何缩放打开的街道地图

> ID：13625564
> 
> 赞同：1
> 
> 时间：2012-11-29T12:11:35.027
> 
> 标签：android, android-mapview

如何缩放 openstreet 地图？我下面的代码只有一个 mapview.builinzoom 控件（TRUE）

我如何像在 googlemapview 中一样提供我的缩放级别有一个类似的功能

```
MapController mc = mapView.getController();
mc.setZoom(15); 
```

那么如何在 openstreet 地图中添加这种类型的函数，以便在启动应用程序时它已经缩放并显示正确的结果？

```
import org.osmdroid.DefaultResourceProxyImpl;
import org.osmdroid.ResourceProxy;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapView;

import com.google.android.maps.MapController;

import android.os.Bundle;
 import android.app.Activity;
import android.graphics.drawable.Drawable;

public class MainActivity extends Activity {

 MyItemizedOverlay myItemizedOverlay = null;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
    int markerWidth = marker.getIntrinsicWidth();
    int markerHeight = marker.getIntrinsicHeight();
    marker.setBounds(0, markerHeight, markerWidth, 0);

    ResourceProxy resourceProxy = new       
   DefaultResourceProxyImpl(getApplicationContext());

    myItemizedOverlay = new MyItemizedOverlay(marker, resourceProxy);
    mapView.getOverlays().add(myItemizedOverlay);

    GeoPoint myPoint1 = new GeoPoint(24.893379000000000000, 67.028060900000010000);
    myItemizedOverlay.addItem(myPoint1, "myPoint1", "myPoint1");
    GeoPoint myPoint2 = new GeoPoint(24.824796300000000000, 67.031565699999990000);
    myItemizedOverlay.addItem(myPoint2, "myPoint2", "myPoint2");

    } 

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:19:33.663

请参阅 API，特别是[IMapView](http://osmdroid.googlecode.com/svn/branches/release_3_0_5/osmdroid-android/src/org/osmdroid/api/IMapView.java)和[IMapController](http://osmdroid.googlecode.com/svn/branches/release_3_0_5/osmdroid-android/src/org/osmdroid/api/IMapController.java)接口。你应该得到这样的东西：

```
mapView.getController().setZoom(16); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:48:09.817

你禁用这条线并为你的应用程序运行，

```
 mapView.setBuiltInZoomControls(true); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-22T14:12:26.223

不要在 xml 中创建你的地图视图，在 xml 中对我来说拖拽地图和缩放控件不起作用。

但是，像这个例子一样以编程方式创建对我有用。

[https://code.google.com/p/osmdroid/source/browse/branches/rotation/OpenStreetMapViewer/src/org/osmdroid/MapActivity.java?r=914](https://code.google.com/p/osmdroid/source/browse/branches/rotation/OpenStreetMapViewer/src/org/osmdroid/MapActivity.java?r=914)

# node.js - IntelliJ 社区版中的 NodeJS 插件不起作用

> ID：13625565
> 
> 赞同：21
> 
> 时间：2012-11-29T12:11:38.303
> 
> 标签：node.js, intellij-idea

我曾尝试在 IntelliJ IDEA CE 中使用 NodeJS 插件，但无法使其正常工作。安装插件并重新启动 IDE 后，它说找不到据说 NodeJS 需要的 Javascript 插件（尽管文档中没有这样说）。

NodeJS 插件是否仅适用于 IntelliJ IDEA 的许可版本？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-29T12:20:56.647

[NodeJS 插件](http://plugins.intellij.net/plugin/?idea&pluginId=6098)需要 IntelliJ IDEA Ultimate，因为它依赖于仅在商业版中可用的 JavaScript 插件。

它也适用于 WebStorm、PhpStorm、RubyMine 和 PyCharm 产品。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-26T05:52:29.857

Node.js 列在仅在 Ultimate 版本中支持的框架中。

此列表在 Intellij 的功能中提供（比较 Ultimate 与 Community 版本）：

[https://www.jetbrains.com/idea/features/editions_comparison_matrix.html](https://www.jetbrains.com/idea/features/editions_comparison_matrix.html)

# android - Android的整数数据类型

> ID：13625571
> 
> 赞同：0
> 
> 时间：2012-11-29T12:12:04.550
> 
> 标签：android, integer, types

我知道在 Java 中有两种整数。首先是“int”，它是原始整数。第二个是“整数”，它是一个包含方法和东西的类。

在为 Android 编程时，我看到了另一种类型：所有小写字符的“整数”。它在“android.R”命名空间中声明，其中只有四个静态方法。

它是什么？为什么会在那里？它与“int”和“Integer”有什么关系（如果有的话？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:14:05.387

似乎与动画有关：http: [//developer.android.com/reference/android/R.integer.html](http://developer.android.com/reference/android/R.integer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:21:04.530

R.integer 是 xml 中定义的整数的整数资源文件。就像 R.layout、R.style、R.id、R.string 等。[这里](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)解释一下它的用途。基本上是`<integer> </integer>`res/values 文件夹中 xml 文件中的资源元素。

编辑：哎呀，你问 android.R 命名空间中的整数资源值是什么。在上面的解释中，我解释了这些是如何在您自己的应用程序命名空间中声明的。android.R 命名空间中的 .integer 资源值是相同的，但在 Android 框架中声明并用于动画持续时间。

[这个](https://stackoverflow.com/questions/3337513/what-are-the-actual-ms-time-values-for-androids-animtime-constants)SO 问题是关于 android.R.integer 中常量的值实际上是什么。在android框架的某个地方，有一个`res/values/<name>.xml`声明这些整数常量的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:19:52.780

这些仍然是整数，我相信 R.class 中的每个成员/方法都返回一个整数。然而，这些与时间有关，确切地说是动画的时间。R.integer 只是一个类名，imo 他们不应该将它命名为 this 因为有些人之前已经导入了 this 而不是整数，所以请检查你的导入:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:29:32.263

integer 是 android 中使用的某种 xml 格式的标签。这个整数可能是动画时间或类似的东西。当我们导入 app.R 然后 app.R.integer 变得可见。

由于 xml 使用所有小写关键字，因此它使用整数而不是整数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T12:14:34.433

**Integer**是类，**int**是原始类型。

Integer 类将原始类型 int 的值包装在一个对象中。Integer 类型的对象包含一个类型为 int 的字段。

也许你可以试试这个：

```
Preferences -> Java -> Code Style -> Organize Imports -> (check) 
Do not create imports for types starting with a lowercase letter 
```

我确定它是否有帮助，但让我们试一试:)

# c# - 转换表达式 > 表达式的谓词 > 谓词

> ID：13625573
> 
> 赞同：2
> 
> 时间：2012-11-29T12:12:12.287
> 
> 标签：c#, expression, predicate

我的表达式有问题

我有一个实体

```
public class User{ 
public string Username{get;set;}
  public int PhoneNumber{get;set;}
  public string FIrstName{get;set;}
  public string LastName{get;set;}
} 
```

我有一个 DTO

```
public class DTOUser{
  public string Username{get;set;}
  public int PhoneNumber{get;set;}
  public string FIrstName{get;set;}
  public string LastName{get;set;}
  } 
```

然后我有一个通用的代码片段

```
 public IList<DTOUser> SelectAll(Expression<Func<DTOUser, bool>> predicate)
    {
           using (var adc = _conn.GetContext())
        {   
       // what should I do ?? so i can convert Predciate to get all values from Users (Entity)   
//it generates an error because predicate can't be cast into Entity User                    
 //   var users = adc.Users.All(predicate);
       }          
    } 
```

我想通过传递 LAMBDA 表达式来获取 DTOUser 列表

```
accountrepo.SelectAll( user => user.firstname.equals ("sample")); 
```

我研究了这个问题并得出结论，因为 DTOUser 和 User 是不同的类型，所以很难将表达式从一种类型转换为另一种类型。

Jon Skeet 提出了一种解决方案：

[如何将 Expression<Func<T, DateTime>> 转换为 Expression<Func<T, object>>](https://stackoverflow.com/questions/729295/how-to-cast-expressionfunct-datetime-to-expressionfunct-object)

但是由于这个解决方案似乎我必须将每个值从 DTOUser 映射到 User 这不会使它更复杂，因为我的 DTOUser 包含超过 15 个属性。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:16:50.547

您不能直接从一种类型转换为另一种类型，您可以执行以下操作：

1.  手动映射
2.  使用反射自动映射（因为属性名称相同）
3.  使用[自动映射器](http://automapper.codeplex.com/)

对于使用反射的映射，您可以使用以下通用代码：

```
public static T1 CopyProperties<T1, T2>(T2 model)
    where T1 : new()
    where T2 : new()
{
    // Get all the properties in the model
    var type = model.GetType();
    var properties = type.GetProperties();

    var result = new T1();
    var resultType = result.GetType();
    var resultProperties = resultType.GetProperties();

    // Loop through each property
    foreach (var property in properties)
    {
        var resultProperty = resultProperties.FirstOrDefault(n => n.Name == property.Name && n.PropertyType == property.PropertyType);
        if (resultProperty != null)
        {
            resultProperty.SetValue(result, property.GetValue(model, null), null);
        }
    }
    return result;
} 
```

它将复制具有相同类型和名称的属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:21:27.177

我认为您可以从链接中使用 Jon Skeet 的答案，并在您的 User （部分）类中定义从 DTOUser 到 User 的显式转换：

```
public static explicit operator User(DTOUser dto)
{
    return new User
    {
        Prop1 = dto.Prop1,
        Prop2 = dto.Prop2,
        ...
    }
} 
```

# wordpress - wordpress 小部件和发布内容问题

> ID：13625574
> 
> 赞同：1
> 
> 时间：2012-11-29T12:12:23.063
> 
> 标签：wordpress, wordpress-theming

我有点卡住了。我使用的模板有一个名为 products 的自定义帖子类型。当我在这里添加帖子/页面时，我可以使用页面中的小部件代码显示它们。

该小部件显示输入到自定义字段中的内容，但我一生都无法弄清楚如何修改代码以显示来自 custompost 类型内容部分的内容。有什么见解吗？

这是生成小部件的 shortcodes.php 文件中的代码。

```
 $count_posts = wp_count_posts('product');
    $published_posts = $count_posts->publish;
    $out ='';
    $out .=' <div class="pricing-table">';
        $out .= '<ul>';
        $counter = 0; 
        while ( have_posts() ) : the_post();
        $counter++;
        $product_price = get_post_meta($post->ID,'_product_price',true);
          $out .= '<li class="heading-column '.$class_heading.' color'.$counter.'">';
            $out .= '<h3>'.get_the_title().'</h3>';
            $out .= '<h5>';
            $out .= $currency ? $currency : "&#36;";
            $out .= $product_price;
            if ($billing_cycle == "none") {
              $out .= ""; 
            } else {
              $out .= ' per '.$billing_cycle; 
            }
            $out .= '</h5>';
          $out .= '</li>';
        endwhile;
        $out .= '</ul>';  

        $out .= '<div class="clear"></div>';
        $out .= '<ul>';
        while ( have_posts() ) : the_post();
        $product_url = get_post_meta($post->ID,'_product_url',true);
        $product_feature = get_post_meta($post->ID,'_product_feature',true);
        $features_list = explode(",",$product_feature);
        $counter++;
          $out .= '<li class="pric-column '.$class_column;
          if ($counter%$columns==0) $out .= '-last';
          $out .= '">';
            foreach ($features_list as $flist) {
            $out .= '<ul class="feature-list">';
              $out .= '<li>'.$flist.'</li>';
            }
            $out .= '<li class="last">';
            $out .= '<a class="button" href="'.$product_url.'"><span>'.$product_button_text.'</span></a>';
            $out .= '</li>';
            $out .= '</ul>';  
      endwhile;wp_reset_query();
      $out .= '</ul>';  
  $out .= '</div>';

  return '[raw]'.$out.'[/raw]';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:08:23.237

您的代码不起作用，因为[`the loop`](http://codex.wordpress.org/the_loop)没有被填充。
在那里它将执行页面的默认循环。（如果它还没有运行，那就是）

你也做一些不喜欢的事情`$published_posts`。

您应该使用[`WP_Query`](http://codex.wordpress.org/Class_Reference/WP_Query).

帮助您入门：

```
$query_args = array(
    'post_type' => 'products', // the post type name
    'post_status' => 'publish',
);
$products = new WP_Query ($query_args)

// before loop stuff like opening tags
while($products->have_posts()): $products->the_post();
    // do your stuff like display post_meta
endwhile;
// after loop stuff like closing tags 
```

这应该让你开始。
如果您需要任何帮助，请告诉我！

# iphone - iOS 通讯录谓词

> ID：13625580
> 
> 赞同：1
> 
> 时间：2012-11-29T12:12:51.640
> 
> 标签：iphone, objective-c, ios, abaddressbook

我得到了地址簿中所有联系人的数组：

```
 NSMutableArray *records = (__bridge NSMutableArray *)ABAddressBookCopyArrayOfAllPeople( addressBook ); 
```

谓词以什么格式表示联系人的名字？我试过**记录。**正如这个问题中所建议的那样：[搜索 ABAddressbook iOS SDK](https://stackoverflow.com/questions/5153377/search-abaddressbook-ios-sdk)但我得到一个未知的密钥异常。数组中的项目似乎是**__NSCFType**类型。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:16:32.983

嘿，从设备获取联系信息，您可以使用我的波纹管代码也与我创建的联系 bean 类一起看这个..

您还需要包括 AddressBook.framework

```
#import <AddressBook/AddressBook.h>
#import <AddressBook/ABAddressBook.h>
#import <AddressBook/ABPerson.h>

[contactList removeAllObjects];

// open the default address book. 
ABAddressBookRef m_addressbook = ABAddressBookCreate();
if (!m_addressbook) {
    NSLog(@"opening address book");
}

// can be cast to NSArray, toll-free
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);

// CFStrings can be cast to NSString!

for (int i=0;i < nPeople;i++) { 
 MContact *contact = [[MContact alloc] init];

 ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);
 CFStringRef firstName, lastName;
 firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
 lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
 contact.name = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

 ABMutableMultiValueRef eMail  = ABRecordCopyValue(ref, kABPersonEmailProperty);
 if(ABMultiValueGetCount(eMail) > 0) {
  contact.email =  (NSString *)ABMultiValueCopyValueAtIndex(eMail, 0);
  [contactList addObject:contact];
 }

 CFRelease(ref);
 CFRelease(firstName);
 CFRelease(lastName);

} 
```

这里 MContact 是下面的 NObject (Bean) 文件

```
@interface MContact : NSObject { 
NSString *email; 
NSString *name; 
NSString *lastName; 
NSString *phone; 

BOOL isSelected; 
} 
@property (nonatomic, retain) NSString *email; 
@property (nonatomic, retain) NSString *name; 
@property (nonatomic, retain) NSString *lastName; 
@property (nonatomic, retain) NSString *phone; 

@property (nonatomic) BOOL isSelected; 
@property (nonatomic, readonly) NSString *displayName; 
@end 
```

我希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:37:57.193

马里奥看看下面的代码。我已经对其进行了测试，并且工作正常。

```
 // Retrieving the address from address book...
    ABAddressBookRef ref = ABAddressBookCreate();
    CFArrayRef getArr = ABAddressBookCopyArrayOfAllPeople(ref);
    CFIndex totCount = CFArrayGetCount(getArr);
    for (int m = 0; m < totCount; m++)
    {
        ABRecordRef recordRef = CFArrayGetValueAtIndex(getArr, m);
        ABMultiValueRef names = ABRecordCopyValue(recordRef, kABPersonPhoneProperty);
        NSString* getFirstName = (__bridge NSString *)names;
        NSLog(@"The name is :-%@\n", getFirstName);       
        getFirstName = (__bridge NSString*)ABMultiValueCopyValueAtIndex(names, 1);
        NSLog(@"The phone number is :-%@\n", getFirstName);
    } 
```

如有任何疑问，请回复我。

# javascript - 如何从调整大小函数中访问变量值

> ID：13625585
> 
> 赞同：1
> 
> 时间：2012-11-29T12:13:03.720
> 
> 标签：javascript, jquery

我有一个 else..if 语句，它根据 为变量赋值`window.width`，我想做的是在 a 中使用这个值，`window.resize`但现在 get`'undefined'`获取`currentSize`该值。我应该怎么做才能获得价值？

JS

```
//Code ran onload
if(windowWidth >= 924) {
    incrementValue = 3;
    currentSize = 'desktop';
}
else if(windowWidth > 615 && windowWidth < 924) {
    incrementValue = 2;
    currentSize = 'tablet';
}
else {
    incrementValue = 1;
    currentSize = 'mobile';
}

$(window).resize(function() {
    windowWidth = $(window).width();

    if(windowWidth >= 924) {
        incrementValue = 3;
        var newSize = 'desktop';
    }
    else if(windowWidth > 615 && windowWidth < 924) {
        incrementValue = 2;
        var newSize = 'tablet';
    }
    else {
        incrementValue = 1;
        var newSize = 'mobile';
    }

    console.log(currentSize); //'undefined'
    if (currentSize !== newSize) {
        var currentSize = newSize;

        incrementTotal = 0;
        slideIndex = 0;

        //Reset slider to start
        $carouselSlides.css( 'left', 0 );
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:17:10.733

不要`currentSize`像`var`这样重新定义

```
if (currentSize !== newSize) {
    var currentSize = newSize; 
```

去除那个`var`

```
if (currentSize !== newSize) {
    currentSize = newSize; 
```

这是一个示例，它允许您根据是否存在重现或消除错误`var`：

*   [http://jsfiddle.net/94zVg/2/](http://jsfiddle.net/94zVg/2/)
*   [http://jsfiddle.net/94zVg/3/](http://jsfiddle.net/94zVg/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:47:00.900

```
<script>
//global scope
var currentSize = 'desktop', incrementTotal = 0, incrementValue = 0, slideIndex = 0, $carouselSlides = $('#carouselSlides');

function windowResize(windowWidth) {
    var data = [];
    if (windowWidth >= 924) {
        data = ['desktop', 3];
    } else if (windowWidth > 615 && windowWidth < 924) {
        data = ['tablet', 2];
    } else {
        data = ['mobile', 1];
    }
    return data.length ? data : false;
}

$(window).resize(function() {
    var windowWidth = $(this).width();
    var data = windowResize(windowWidth);
    // data[0] = desktop, tablet OR mobile
    // data[1] = 1, 2 OR 3
    incrementValue = data[1];

    if (currentSize !== data[0]) {
        currentSize = data[0];

        incrementTotal = 0;
        slideIndex = 0;

        //Reset slider to start
        $carouselSlides.css('left', 0);
    }    

    // set the style for the current screen size   
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:26:07.733

您的 newSize 超出范围：

```
$(window).resize(function() {
   windowWidth = $(window).width();
var newSize =0;
   if(windowWidth >= 924){
      incrementValue = 3;
        newSize = 'desktop';
    } else if(windowWidth > 615 && windowWidth < 924) {
      incrementValue = 2;
      newSize = 'tablet';
    } else {
      incrementValue = 1;
      newSize = 'mobile';
    }

    if (currentSize !== newSize) {
      var currentSize = newSize;

      incrementTotal = 0;
      slideIndex = 0;

      //Reset slider to start
      $carouselSlides.css( 'left', 0 );
    }
  }); 
```

# java - phonegap应用程序中的ios隐私设置

> ID：13625596
> 
> 赞同：0
> 
> 时间：2012-11-29T12:13:35.230
> 
> 标签：java, javascript, jquery, jquery-mobile, native

关闭 ios iphone 上的定位服务。

应用程序尝试使用地理位置获取位置。

如果没有在应用程序上获取地理位置而不是显示“设置”和“取消”按钮的“打开定位服务...”消息。

如果用户点击“设置”按钮而不是直接打开 ios 隐私设置（不是手动）。

我使用过 jquery mobile、phonegap、html5、css3

请帮助我的朋友

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T09:19:24.223

ios < 5.1 试试这个；

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:17:58.583

它不能从phonegap完成。在电话间隙中从未实现过该功能。它在 5.0 版之前对原生应用程序可用，但 Apple 在 5.1 版中删除了应用程序设置 URL 方案。

# hive - 如何在蜂蜡中对 Hive 查询进行备份/源版本控制

> ID：13625601
> 
> 赞同：0
> 
> 时间：2012-11-29T12:13:48.643
> 
> 标签：hive, hue

HUE/蜂蜡界面可以方便地保存查询。我希望有更多的控制权。

**将保存的查询置于版本控制之下或备份它们的好方法是什么？**

背景：目前我在普通编辑器中编辑查询并将它们保存为 .hive (+ normal hg/git) 以执行我将查询复制到 hue/beeswax 中的执行查询中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:18:42.987

这些是 2.3 版本中针对的痛点。

现在没有办法导出/导入查询：一切都保留在 Hue 数据库中。

在[HUE-950](https://issues.cloudera.org/browse/HUE-950)中，计划让查询编辑器将查询保存回文件（可以受版本控制）。还将添加一个垃圾机制。

此外，直接使用版本控制存储库中的文件将在[HUE-951](https://issues.cloudera.org/browse/HUE-951)中完成。

[这在Hue 邮件列表](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!forum/hue-user)上的这个[线程](https://groups.google.com/a/cloudera.org/group/hue-user/browse_thread/thread/56d8d8663fb21649#)中有更多讨论。

# php - 如何从两个源表单和其他表中插入mysql数据

> ID：13625602
> 
> 赞同：1
> 
> 时间：2012-11-29T12:13:49.113
> 
> 标签：php, mysql, database

我有一个包含以下列的表格：

```
id
bid
name
text
time 
```

该`bid`字段来自另一个表，其余来自一个`$_POST`表单。

谁能解决这个问题？

```
$name$_POST['name'];

$text=$_POST['text'];

$time=date(j/F/Y); 
```

SQL 查询：

```
INSERT INTO table1 (bid) SELECT bid FROM table2 WHERE id='6'

INSERT INTO table 1 
(name, text, time)
VALUES ($name, $text, $time) 
```

我需要这两个都发生在一个查询中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:19:49.937

我想你需要这个::

```
Insert into my_table (id, bid, name, text, time) values (var_id, (Select bid from table_2 where id2=var_id ), var_name, var_text, var_time) 
```

# php - 使用jquery通过实时结果逐一检查网站是否处于活动状态

> ID：13625609
> 
> 赞同：0
> 
> 时间：2012-11-29T12:14:07.883
> 
> 标签：php, ajax, jquery, real-time

我有一个 php 代码来检查一个 url 是否有效。

```
while(urls exist) {
check(each url);
} 
```

假设您在表单上输入了一个 url 列表来检查它们，当我使用检查器（使用 curl 和 while 循环）进行处理时，代码所做的是一一检查所有这些，然后显示所有结果数据同时。因此，如果 url 太多，加载需要很长时间而不显示结果，然后 BUM，所有结果！

我想要的是实现 jQuery 或其他东西来检查第一个 url 并立即显示结果，然后是下一个 url 等等。像这样：

```
 Checking (2 of 200)
    Live!
    Live!
    Checking... 
```

任何人都可以帮助我或链接到教程，我找不到任何相关的东西，只是如何使用 jQuery Ajax 提交表单......谢谢！

额外的问题：使这种多线程的任何方法都像：

```
Live!
Live!
Checking...
Checking...
Checking... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:16:03.857

如果您想从浏览器检查服务器是否可用，最好是发出 HEAD 请求（不下载内容）：

```
$.ajax({
    type: "HEAD",
    url: 'http://www.google.com',
    success : function() {
       alert('my server is alive !');
    }, error: function() {
        alert('world is gone !');
    }
}); 
```

当然，由于这些请求是异步的，它们会自动并行化（真正并行请求的确切数量取决于浏览器）。

# windows-phone-7 - Windows Phone 7文本块上的水平滚动

> ID：13625610
> 
> 赞同：1
> 
> 时间：2012-11-29T12:14:09.910
> 
> 标签：windows-phone-7, xaml, windows-phone-7.1, textblock, horizontal-scrolling

如何将 Windows Phone 上的 TextBlock 设置为水平滚动。我知道您可以将其设置为自动换行，但我不希望这样。如果给定的文本超出 TextBlock 的边界，我希望用户能够水平滚动。

我似乎无法在 XAML 中找到允许执行此操作的属性。就像我说的那样，我发现的只是让文本换行，这是我不想要的。

代码：

```
<TextBlock FontSize="20" Text="{Binding COM}" Foreground="Black" 
           FontWeight="Normal" HorizontalAlignment="Stretch" 
           Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" 
           TextWrapping="NoWrap" /> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:17:38.610

您可以将 包装`TextBlock`在 a`ScrollViewer`中以实现此效果：

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" >
      <TextBlock Text="this is really long text that will probably go off the screen any second now"/>
</ScrollViewer> 
```

文本将全部在一行上。如果您希望文本位于多行上，请设置`TextWrapping`为`Wrap`，并为`TextBlock`.

我建议至少设置 2048 的宽度，因为这是任何 Windows Phone 控件的最大尺寸（[如何增加 Windows Phone 中 TextBlock 控件的高度限制](https://stackoverflow.com/questions/10696050/how-to-increase-height-limit-of-the-textblock-control-in-windows-phone)）。

# android - Horizo ntal ScrollView 末尾有图像，onScroll 想要为这些图像设置动画

> ID：13625613
> 
> 赞同：1
> 
> 时间：2012-11-29T12:14:26.460
> 
> 标签：android, android-layout

我在这两个 ImageView 的左侧和右侧都有 Horizo​​ntalScrollView。

在极左滚动左侧图像视图应隐藏，在极右滚动右侧 ImageView 应隐藏。我有任何用于 Horizo​​ntalScrollView 的事件侦听器来检测是否没有向右或向左滚动的范围。

xml中的代码如下

```
 <HorizontalScrollView 
         android:id="@+id/HorrisontalScrollView"
         android:fillViewport="true"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:fadingEdge="none" 
         android:scrollbars="none"
         android:layout_alignParentBottom="true"
        >       
//some images to be scroll

 </HorizontalScrollView>

<ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/LeftArrrow"
            android:background="@drawable/nav_arrow_left"
            android:layout_alignParentLeft="true"
            android:layout_alignParentBottom="true"
            ></ImageView>
        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/LeftArrrow"
            android:layout_alignParentRight="true"
            android:background="@drawable/nav_arrow_right"
            android:layout_alignParentBottom="true"
            ></ImageView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:27:36.243

您需要先检测滚动结束以获得帮助[单击此链接](https://stackoverflow.com/questions/10316743/detect-end-of-scrollview)

然后根据需要为图像设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:24:58.467

您可以创建一个子类`HorizontalScrollView`并覆盖该`onOverScrolled`方法。请参阅此链接： [Horizo​​ntalScrollView#onOverScrolled](http://developer.android.com/reference/android/widget/HorizontalScrollView.html#onOverScrolled%28int,%20int,%20boolean,%20boolean%29)

# wpf - 从视图模型中取消关闭窗口？

> ID：13625618
> 
> 赞同：3
> 
> 时间：2012-11-29T12:14:38.723
> 
> 标签：wpf, events, mvvm, viewmodel, mvvm-light

我有一个 WPF 应用程序，它允许我编辑一些数据。

我想如果我们尝试关闭应用程序，用户必须承认他将丢失其修改。

但是在这里，我遇到了几个问题：

1.  windows对象上没有“关闭”命令（当我猜想背后的代码有事件时，我可以执行命令）
2.  我不知道用 MVVM 模式取消某些东西的推荐方法是什么？通常我会放`e.Cancel = true;`，但我们不能放，因为它是一个命令

那么你会如何询问用户他是否确定要使用 MVVM 模式关闭窗口呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:13:29.337

这个概念是为您的窗口添加一个“挂钩”到窗口关闭事件的行为。一旦行为被挂钩，您可以执行几乎任何您需要的操作，而不会违反 MVVM 的原则。检查此链接以获取有关如何创建窗口关闭行为的信息：

[http://gallery.expression.microsoft.com/WindowCloseBehavior/](http://gallery.expression.microsoft.com/WindowCloseBehavior/)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:07:08.143

由于您将此问题标记为“mvvm-light”，因此您可以检查 MVVMLight 中的 EventToCommand。它可能会满足您的需求。

这个问题类似：

[使用 WPF / MVVM Light Toolkit 处理窗口关闭事件](https://stackoverflow.com/questions/3683450/handling-the-window-closing-event-with-wpf-mvvm-light-toolkit)

# java - Java GWT VerticalPanel 替换小部件

> ID：13625622
> 
> 赞同：0
> 
> 时间：2012-11-29T12:14:59.533
> 
> 标签：java, gwt, replace, widget

`VerticalPanel`是否可以用另一个小部件替换 java GWT中的现有小部件？我尝试执行以下操作：

```
verticalPanel.remove(widget1);
verticalPanel.add(widget2); 
```

不幸的是，这`widget2`在末尾添加了，`verticalPanel`但我想替换`widget1`...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:28:57.347

您想使用`VerticalPanel.remove(int index)`和`VerticalPanel.insert(Widget w, int beforeIndex)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:17:49.870

你总是可以

```
verticalPanel.clear();
verticalPanel.add( widget2 ); 
```

调用是否`.remove(...)`返回`true`或`false`- 后者表示面板中不存在小部件？

你也可以试试[`.remove( int index )`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/ComplexPanel.html#remove%28int%29)。

干杯，

# zend-framework - 通过zend框架访问不同的google日历

> ID：13625625
> 
> 赞同：1
> 
> 时间：2012-11-29T12:15:11.813
> 
> 标签：zend-framework, google-calendar-api

我是 Google Calendar API 的新手，并且已经完成了我认为是一个很好的教程，允许我使用 zend 框架查看事件并将其添加到我的日历中。

[http://www.ibm.com/developerworks/library/x-googleclndr/](http://www.ibm.com/developerworks/library/x-googleclndr/)

我的页面按照示例工作，但我只能连接到我的默认日历，我希望连接到另一个日历。

我在 zend 站点上找到了一个示例来循环遍历我的日历的所有实例，所以我在 uri 中看到了我的用户名，但是在我的代码中替换用户名不起作用。

谁能建议如何查看/编辑不同的谷歌日历？

谢谢

**更新，通过更改 $query->setUser 参数，在事件列表代码中，我设法连接到不同的日历。

我将如何为事件插入做类似的事情？

# php - IE中缺少标题横幅图像？

> ID：13625627
> 
> 赞同：2
> 
> 时间：2012-11-29T12:15:20.770
> 
> 标签：php, image, internet-explorer, header

我的标题横幅图像在 Firefox 中显示正常，但在 IE 中显示不正常。我通常只有一个 .Jpeg 图像，但在圣诞节时我有一个动画 .gif 似乎都没有在 IE 中显示。有人可以帮我检查一下吗？

[http://www.clarksonsedinburgh.co.uk/](http://www.clarksonsedinburgh.co.uk/)

非常感谢，

帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:22:12.940

尝试使用此代码

```
<img width="966" height="100%" alt="Clarksons of Edinburgh" src="/imgs/bg/clarksons Christmas.gif"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:19:26.060

```
<img src="/imgs/bg/clarksons Christmas.gif" width="966" height="" alt="Clarksons of Edinburgh" /> 
```

也许它不喜欢 height=""

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:19:41.750

您的图像高度未指定，IE 认为它的高度=1

设置高度属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:19:22.733

```
HTML1512: Unmatched end tag. 
www.clarksonsedinburgh.co.uk, line 39 character 1
HTML1514: Extra "<body>" tag found. Only one "<body>" tag should exist per document. 
www.clarksonsedinburgh.co.uk, line 40 character 1
HTML1508: Unmatched end tag. 
www.clarksonsedinburgh.co.uk, line 82 character 286 
```

这就是 IE 提醒我的

# c++ - 尽管违反了单一定义规则，编译器/链接器怎么可能选择替代的内联构造函数？

> ID：13625629
> 
> 赞同：4
> 
> 时间：2012-11-29T12:15:23.433
> 
> 标签：c++, compiler-construction, linker

参考[什么决定了两个源文件中的同名类包含哪个类定义？](https://stackoverflow.com/questions/13388536/what-determines-which-class-definition-is-included-for-identically-named-classes)，其中故意，明显违反了[一个定义规则](http://en.wikipedia.org/wiki/One_definition_rule)，我仍然感到困惑，编译器/链接器甚至可以选择一个定义而不是另一个定义。

（基于答案/评论的附录：我正在寻找一个示例，说明编译器/链接器如何*产生*如下所示的结果，给出的代码故意违反标准，因此代码导致未定义的行为。）

代码示例是：

```
// file1.cpp:

#include <iostream>
#include "file2.h"

struct A
{
    A() : a(1) {}
    int a;
};

int main()
{
    // foo() <-- uncomment this line to draw in file2.cpp's use of class A

    A a; // <-- Which version of class A is chosen by the linker?
    std::cout << a.a << std::endl; // <-- Is "1" or "2" output?
} 
```

...

```
//file2.h:

void foo(); 
```

...

```
// file2.cpp:

#include <iostream>
#include "file2.h"

struct A
{
    A() : a(2) {}
    int a;
};

void foo()
{
    A a; // <-- Which version of class A is chosen by the linker?
    std::cout << a.a << std::endl; // <-- Is "1" or "2" output?
} 
```

在这种情况下，该函数`foo()`有时会打印 1，有时会打印 2。

但是 for 的构造函数`A`是内联的！这不是函数调用！因此，我认为*编译器*必须在编译函数时在函数本身`a`的编译代码中包含用于实例化对象的代码的汇编/机器指令。`foo()``foo()`

因此，我认为*稍后*，在链接时，链接器不会更改汇编/机器指令以定义`foo()`何时决定将函数包含`foo()`在已编译的二进制文件中（因为它只知道`foo()`实际上被调用，在链接时）。根据这种推理，链接器不可能影响将哪个内联构造函数代码编译到函数`foo()`中，因此尽管故意违反了单一定义规则，但始终使用的必须是 file2 的内联构造函数版本。

如果 for 的构造函数`A`不是内联的，那么我会理解，在`foo()`编译函数时，函数的 JUMP 语句（构造函数`A`）可能会放在函数的汇编代码中`foo()`；然后，稍后，在链接时，链接器可以用它选择的构造函数的两个定义来填充 JUMP 语句的地址`A`。

我能想到的唯一解释是，实际上，尽管存在内联构造函数，但有时会`foo()`打印`1`，有时会`foo()`打印`2`是编译器在编译“file2.cpp”时，会在编译的程序集/机器代码中创建 SPACE 表示用于对 A 的构造函数`foo()`进行内联调用的函数，但实际上并不填充程序集/机器代码本身；并且稍后，在链接时，链接器将构造函数的代码复制`A`到函数本身的编译定义中的预定位置`foo()`，使用它在构造函数的内联函数的两个定义之间的（任意）选择`A`.

我的解释是正确的，还是有其他解释？在这个例子中，尽管故意违反了单一定义规则，编译器/链接器怎么可能选择调用哪个构造函数`A`，因为构造函数调用是内联的？

**附录：我更改了标题并在顶部附近添加了一段澄清，以回应评论和答案，以明确表示我理解此示例中的行为未定义，并且我正在寻找一个示例来说明如何一个真正的编译器/链接器甚至*可以*产生一次观察到的行为。请注意，我不是在寻找可以预测任何特定时间行为的答案。**

**附录 2**：作为对评论的回应，我`A a;`在 VS 调试器的行中放置了一个断点并选择了“反汇编”视图。事实上，从反汇编代码中可以看出，尽管存在“内联”，但在这种情况下，编译器选择不内联对象的构造函数调用`a`：

![线`A a; 的反汇编视图  来自问题中的代码示例：编译器选择不内联构造函数调用，尽管它是内联的。](../Images/635be328b1fd14c1307331c43ef4e741.png)

因此，Alf 的回答是正确的：尽管构造函数是隐式`inline`的，但构造函数调用并没有被内联。

`inline`因此，一个切题的问题出现了：关于构造函数是否比常规成员函数更不可能被内联（假设在这两种情况下显式或隐式地存在），是否可以做出明确的陈述 - 一种方式或另一种方式？如果*可以*对此发表声明并且答案是“是的，编译器更有可能拒绝`inline`构造函数，而不是拒绝`inline`常规成员函数”，那么后续问题将是“为什么”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T12:27:45.100

在类定义中定义你的构造函数等同于使用关键字`inline`和它的类外定义。

`inline`不需要/保证机器代码的内联扩展。它暗示了这一点，但仅此而已。

的保证效果`inline`是允许在多个翻译单元中定义相同的函数（然后必须在使用它的所有翻译单元中基本上相同地定义它）。

因此，您的逻辑基于对调用的必需/保证内联扩展的假设，由于假设不正确而产生不正确的结论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:29:16.417

我真的很惊讶代码可能会链接。我几乎可以肯定它没有与 MS Visual Studio 链接，链接器抱怨名称冲突。

在这种情况下，如果你真的不想给它们起不同的名字，你可以使用匿名命名空间来定义你的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:33:50.860

违反 ODR 不需要诊断。也就是说，如果你这样做，你的程序的行为是不确定的：任何事情都可能发生。在示例中，可能不涉及链接器，因为所有成员函数都是内联的，因此代码很可能会毫无怨言地编译和链接，并执行看起来应该执行的操作。然而，该标准并没有保证会发生这种情况。这就是未定义行为的含义。

# wpf - CheckBox 在工具栏中或作为控件的行为差异

> ID：13625634
> 
> 赞同：7
> 
> 时间：2012-11-29T12:15:37.867
> 
> 标签：wpf, binding, checkbox, contextmenu, toolbar

当我将CheckBox 控件的`isChecked`属性`bool`作为控件放置在用户控件或窗口上时，我可以将其获取到属性。但是，如果我将它放在工具栏中，它甚至不可见，除了可能是薄的左边缘或右边缘（但绑定仍然有效）。如果我放入一个 ContextMenu，它会显示为选中或未选中，但绑定目标不受影响。

这是 Window.Resources 中的 ContextMenu 定义：

```
<ContextMenu x:Key="ContentMenu" DataContext="{Binding MyView}">
  <CheckBox IsChecked="{Binding Path=IsRed}"/>
</ContextMenu> 
```

这是包含 CheckBox 和带有 CheckBox 的 ToolBar 的 StackPanel：

```
<StackPanel Height="20" Orientation="Horizontal" DockPanel.Dock="Top" DataContext="{Binding MyView}">
    <CheckBox IsChecked="{Binding Path=IsRed}"/>

 <ToolBar Margin="10,0,0,0">
<CheckBox Width="18" Height="18" IsChecked="{Binding Path=IsRed}"/>
 </ToolBar>
 </StackPanel> 
```

我只想问

1）如果有人可以建议工具栏问题的解决方案（也许是不同的模板？），

2）定义上下文菜单的正确方法`DataContext`（这似乎是实际问题）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T13:09:35.097

我明白你的意思，复选框现在看起来像一个切换按钮。如果您查看工具栏的控件模板，您会看到它调整了某些类型的子控件的控件模板。

如果你愿意的话，有一个技巧或错误，如果你把 Checkbox 放在一些布局容器中，如 Stackpanel、Grid 等，那么它的 controltemplate 不会被调整：

```
<ToolBar>
  <Grid><CheckBox IsChecked="True" VerticalAlignment="Center">Test</CheckBox></Grid>
</ToolBar> 
```

# c# - 如何使用命令行参数中的文件路径在 C# 中打开访问数据库？

> ID：13625635
> 
> 赞同：3
> 
> 时间：2012-11-29T12:15:40.127
> 
> 标签：c#, file, command-line, path

我需要将访问数据库的文件路径指定为命令行参数并将其传递给我的 C# 程序，该程序将打开并对其执行操作。

在命令提示符中，我输入`F:\\count`了我应该能够使用 args[0] 访问的内容，但出现`Invalid value for key 'data source'`异常。

当我在代码中放置相同的路径时，`string path = "F:\\count"`它就可以工作了。

请告诉我我做错了什么！我迷路了。

这是我的代码：

```
namespace CountProjectPages
{
   public class CountProjectPages
   {
   private static OleDbConnection myConnection;

    static void Main(string[] args)
    {
        try
        {
            string path = args[0];
            AppDomain.CurrentDomain.SetData("DataDirectory",path);

            myConnection = new OleDbConnection("Provider=Microsoft.JET.OLEDB.4.0;Data Source=|DataDirectory|\\test.mdb;Jet OLEDB:Database Password=aaa");
                string myScalarQuery = "SELECT COUNT (Content.Page) from Content";
                OleDbCommand myCommand = new OleDbCommand(myScalarQuery, myConnection);
                myConnection.Open();
                int total = (Int32)myCommand.ExecuteScalar();
                Console.WriteLine(total); 

                Console.WriteLine("DataSource: {0}",myConnection.DataSource);

        }
        catch (Exception ex)
        {
            Console.WriteLine("Ex: " + ex);
        }
        finally
        {
            myConnection.Close();
        } 

    }

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:12:51.017

回答你的问题

> 您是否认为也可以将文件名（例如 test.mdb）作为命令行参数传递？

[如何在 Microsoft Access 中使用命令行开关](http://support.microsoft.com/kb/209207)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:26:37.100

检查此代码：

```
 static void Main(string[] args)
    {

        string dbPath = null;
        if (args.Length > 0)
        {
            dbPath = args[0];
            string connectionString = "PROVIDER=MICROSOFT.JET.OLEDB.4.0;DATA SOURCE=" + dbPath + ";";
            using (OleDbConnection conn = new OleDbConnection(connectionString))
            {
                conn.Open();

                //TODO: handle other db commands...
            }
        }
    } 
```

确保使用如下引号将命令参数作为完整或相对路径传递给 mdb 文件：“f:\some directory\MyDataBase.mdb”

# c# - c#来自文件关闭连接的图像

> ID：13625637
> 
> 赞同：5
> 
> 时间：2012-11-29T12:15:47.207
> 
> 标签：c#, filelock

我在图片框中使用 c# 显示图像。然后我想更改图像的名称。我不能，因为我知道该图像正在被另一个进程使用。

我以这种方式打开图像

```
 Image image1 = Image.FromFile("IMAGE LOCATION"); ;
        pictureBox1.Image = image1; 
```

然后尝试以这种方式更改它的名称，我得到一个 IO 异常，说“该进程无法访问该文件，因为它正在被另一个进程使用。

```
System.IO.File.Copy(@"OldName", @"NewName"); //copy changes name if paths are in the same folder 
```

对象 image1 不是持有图像吗？为什么文件仍然被上一个进程锁定？任何建议，将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T12:19:41.887

看看这个问题：[Free file locked by new Bitmap(filePath)](https://stackoverflow.com/questions/4803935/free-file-locked-by-new-bitmapfilepath/8701748#8701748)

要释放锁，您需要复制这些位：

```
Image img;
using (var bmpTemp = new Bitmap("image_file_path"))
{
     img = new Bitmap(bmpTemp);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T12:24:57.090

你可以试试这个：

```
Image image1 = null;

using(FileStream stream = new FileStream("IMAGE LOCATION", FileMode.Open))
{
    image1 = Image.FromStream(stream);
}

pictureBox1.Image = image1 
```

;

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T12:17:51.967

是的，以这种方式`picture box`控制磁盘上的锁定`IO`文件。

如果要重命名链接文件，可以：

*   或 dispose `picture box`，然后重*命名*文件（如果这适合您的应用程序）

*   或分配给`picture box`图像的副本/克隆。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-14T01:08:36.183

你需要处理你的图像：

```
 Image image1 = Image.FromFile("IMAGE LOCATION"); ;
    pictureBox1.Image = image1;
 image1.Dispose(); 
```

采取行动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-09T04:08:44.283

这个解决方案解决了我的问题。我正在使用图片框并直接从磁盘加载其图像，而无需中间图像文件。完成后，我正在执行“picturebox.dispose”，但并没有释放图像文件，我无法删除它，因为“vshost 正在使用文件”。我必须显式创建一个图像变量（IE 将 MyImage 作为图像进行调暗），然后首先将图像加载到图像变量中，然后将 MyImage 加载到图片框中。通过引用图像，我可以执行 MyImage.dispose。这关闭了 vshost 和图像之间的链接，我能够以编程方式删除它。

# java - 在小程序中使用 log4j 或 logback 的优点

> ID：13625639
> 
> 赞同：1
> 
> 时间：2012-11-29T12:15:55.883
> 
> 标签：java, applet

在小程序中使用此记录器是否合理？它们的大小> 300kb，对于applet 来说并不算少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:20:48.617

这是没有道理的。不仅尺寸是问题。

您的小程序应使用有效证书（或为使用此小程序的每个用户更改的本地安全策略）签名，以允许 log4j/logback 在客户端工作站上打开文件（或套接字）。

如果您对小程序进行了签名，那么在客户端工作站上记录日志是没有用的。仅将 Log4j/Logback 用于开发。

# error-handling - 无法在轴 1.4 中维护多个会话

> ID：13625643
> 
> 赞同：1
> 
> 时间：2012-11-29T12:16:08.220
> 
> 标签：error-handling, axis, netsuite

我想从 Netsuite 添加、获取和更新客户详细信息。我使用 apache axis 1.4（由 Netsuite 推荐）与 Netsuite 公开的 Web 服务进行通信。我可以成功登录，但是一旦我登录，我就无法进行进一步的操作，比如添加、更新和获取客户。

这是我得到的错误消息：

```
AxisFault

faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
faultSubcode: 
faultString: Your connection has timed out.  Please log in again. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T03:06:13.743

解决方案：对于其他遇到同样问题的人来说，问题出在哪里。显然，NetSuite 更改了他们的 Web 服务 URL，但没有更新他们的文档。您必须使用的新网址是：

[https://webservices.na1.netsuite.com/services/](https://webservices.na1.netsuite.com/services/) ...

我怀疑这是北美客户的终点。

非常感谢！感谢 Paul Hooker 的宝贵**[建议](http://www.linkedin.com/groups/NetSuite-SuiteTalk-Web-Services-stopped-3295906.S.198688554)**。

# ios - 管理您的应用程序未出现在 iTunes Connect 面板中

> ID：13625644
> 
> 赞同：2
> 
> 时间：2012-11-29T12:16:09.227
> 
> 标签：ios, iphone-developer-program

我需要将应用程序上传到 iTunes 商店。拥有证书、配置文件，但是当我登录 iTunes 时，菜单“管理您的应用程序”没有出现。

为什么？

![](../Images/a9a2b17f73d06c6a28ac4caecd1ca401.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:32:42.663

我认为您对 iTunes Connect 中的“管理您的应用程序”没有足够的权限。请让您的开发人员资料代理授予您管理员权限。

# nsis - 如何使用参数检测启动 NSIS 安装程序

> ID：13625645
> 
> 赞同：0
> 
> 时间：2012-11-29T12:16:08.923
> 
> 标签：nsis

我有 NSIS 安装程序。如何使用参数检测启动 NSIS 安装程序？

例如`installer.exe /DEBUG`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:24:44.383

[获取选项](http://nsis.sourceforge.net/Docs/AppendixE.html#E.1.12)：

```
!include FileFunc.nsh
!include LogicLib.nsh

Function .onInit
${GetParameters} $0
ClearErrors
${GetOptions} $0 "/DEBUG" $1
${IfNot} ${Errors}
    MessageBox mb_ok "Debug"
${EndIf}
FunctionEnd 
```

# ios - Monotouch：在自定义 UITableViewCell 内定位的关系项目

> ID：13625646
> 
> 赞同：0
> 
> 时间：2012-11-29T12:16:13.840
> 
> 标签：ios, cocoa-touch, xamarin.ios

如何根据图像和文本的存在来对齐图像和文本。例如，我有 2 个图像，我需要将它们垂直放置在另一个之上，但是当缺少任何一个（未提供）时，另一个应该垂直居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:29:55.793

此代码假定您有基本的 imageview 框架设置（大小和 x 位置）。它将视图集合以相等的间距垂直放置在视图中。如果集合只有一个图像，它甚至会居中。

```
 UIImageView img1, img2;
        List<UIView> subViews;

        if (img1 != null)
        {
            subViews.Add(img1);
        }

        if (img2 != null)
        {
            subViews.Add(img2);
        }

        float totalHeight = 0;

        foreach (UIView subView in views)
        {
            totalHeight += subView.Frame.Height;                
        }

        float spacing = (this.Bounds.Height - totalHeight) / (subView.Length +1) ;
        float currentY = 0;

        foreach (UIView subView in subViews)
        {
            currentY += spacing;

            if (subView.Superview == null)
            {
                this.Add (subView);
            }

            subView.Frame = new RectangleF(subView.Frame.X,currentY,subView.Frame.Width, subView.Frame.Height);

            currentY += subView.Frame.Height;

        } 
```

# ios - 目录应用程序和应用程序批准规则

> ID：13625649
> 
> 赞同：1
> 
> 时间：2012-11-29T12:16:31.777
> 
> 标签：ios, xcode, app-store, appstore-approval

我的任务是制作一个应用程序，该应用程序本质上是一份包含行业相关新闻的季度出版物。它的大约。十页PDF，我必须把它变成一些花哨的东西。我一直认为 Apple 拒绝了功能有限的应用程序，或者没有有效使用 iOS 平台但看到大量目录应用程序正是如此，特别是那些只是汽车图片的应用程序？

虽然这里没有人能说它是否会被拒绝，但有没有人对这种类型的应用程序和审查过程有任何经验？看起来比其他品类轻松多了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:27:18.410

在此处查看指南：

[https://developer.apple.com/appstore/guidelines.html](https://developer.apple.com/appstore/guidelines.html)

我认为当他们谈论有限的功能时，他们的意思是特别愚蠢的应用程序什么都不做。如果您的应用程序有用且有意义，则不会因此而被拒绝。

无论如何，这总是一个猜测！你必须与这些人一起冒险。

# logging - 是否可以防止 sinatra/padrino 记录请求？

> ID：13625654
> 
> 赞同：1
> 
> 时间：2012-11-29T12:16:46.163
> 
> 标签：logging, sinatra, padrino

我正在寻找一种方法来防止将健康检查请求记录到我的应用程序中。我可以看到这些项目正在使用 Rack::CommonLogger，但我在忽略某些请求的文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:03:13.227

由于我要求提供 sinatra/padrino 解决方案，因此我想我会回答 padrino 的问题，这要归功于[Qatsi 的回答](https://stackoverflow.com/questions/13625654/is-it-possible-to-prevent-sinatra-padrino-from-logging-a-request/13693516#13693516)引发了更明智的搜索。

在我`app/app.rb`的中，我将 healthcheck 移到了它自己的应用程序中，看起来像这样：

```
class MyApplicationHealth < Padrino::Application
  set :logging, false
  get(:index) { 'OK' }
end 
```

然后`config/apps.rb`我在运行状况检查点安装了该应用程序，如下所示：

```
Padrino.mount("MyApplicationHealth").to('/myapplicationhealthcheckuri') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:15:38.010

如果您有一个模块化应用程序，请尝试将此部分（即用于健康检查的部分）拆分为单独的模块并使用类似的东西：

```
class NonLogged < Sinatra::Base
  configure :production, :development do
    enable :logging
  end
  ...
end 
```

# spring - 在 spring 配置 xml 中读取上下文参数值

> ID：13625658
> 
> 赞同：1
> 
> 时间：2012-11-29T12:17:00.127
> 
> 标签：spring, tomcat

在 context.xml 中添加了以下参数

```
<Parameter name="channel" value="any"
         override="false"/> 
```

我想在spring配置xml中读取channel的值

```
<intercept-url pattern="/**" access="ROLE_USER" requires-channel="READ_VALUE_OF_CHANNEL_PARAMETER" /> 
```

READ_VALUE_OF_CHANNEL_PARAMETER 需要更换。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:30:58.463

找到了答案

```
<intercept-url pattern="/**" access="ROLE_USER" requires-channel="#{contextParameters.channel}" /> 
```

# php - 如何在不重新启动 Apache 或更改域的情况下清除 php 的 gettext 缓存？

> ID：13625659
> 
> 赞同：23
> 
> 时间：2012-11-29T12:17:00.830
> 
> 标签：php, gettext, php-gettext

[这是php 手册](http://php.net/manual/en/function.gettext.php)中的一小段代码：

```
putenv('LC_ALL=zh_CN');
setlocale(LC_ALL, 'zh_CN');

bindtextdomain('domain', './locale');
textdomain('domain');

echo gettext('Hello'); 
```

它将输出**文件**中定义的你`domain.mo`，但问题是只要 Apache 正在运行，`gettext()`总是返回缓存的结果。

如果我将 Hello 的翻译更改**为**您好**，**它`domain.mo`仍然会输出**您好**。

但是，可以通过将和的`domain`参数更改为新名称来解决此问题。喜欢从到。但是每次更新文件时编辑php文件真的很痛苦。`bindtextdomain()``textdomain()``"domain"``"domain2"``.mo`

有没有更好的方法来做到这一点，比如删除一些文件夹或调用一些 php 函数来完成这项工作？这样我就可以为此目的编写一个小脚本。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-29T15:25:31.160

每个解决方案（[1](https://stackoverflow.com/questions/2177895/how-do-you-use-gettext-on-server-apache-you-cant-restart)、[2](http://www.php.net/manual/en/function.gettext.php#58310)、[3](http://blog.ghost3k.net/articles/php/11/gettext-caching-in-php)）都建议更改`domain`以摆脱缓存问题，但这会在内存中创建大量过期缓存。

因此，我深入研究了 gnu-gettext 源以获取有关缓存策略的详细信息（bindtextdom.c:78。）

调用时`bindtextdomain(domain, dirname)`会检查`domain`缓存中是否存在；如果是这样，它将检查是否`dirname`与缓存中的相同。如果这失败了，它将强制为同一个域刷新缓存，而不是在内存中创建一个新的。

修复非常简单，首先创建一个指向存储文件的`locale`文件夹的虚拟链接`.mo`：

```
cd locale
ln -s . nocache 
```

然后在前面加一行`bindtextdomain()`

```
bindtextdomain('domain', './locale/nocache');
bindtextdomain('domain', './locale'); 
```

现在每次都强制刷新缓存。

* * *

更新：

这种 hack 在某些情况下可能不起作用（无法弄清楚确切的条件。）这个解决方案*不*应该在生产环境中使用，但只适用于那些需要在保持 httpd 运行的同时修复某些问题的人！

只要可以，请避免从一开始就使用 gettext，这确实是古老的东西，应该永远弃用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-23T06:46:56.770

我在从to`clearstatcache();`翻译后调用了函数，它工作正常而无需重新启动 apache。加载我在任何语言文件中所做的每个更改。`messages.po``messages.mo`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-07T13:36:46.600

好的，在我的情况下，我需要通过 service php5.6-fpm-sp restart 重新启动 phpfpm。

如果你使用 php-fpm 你必须重启 phpfpm 以清除 gettext 的缓存，重启 apache2 不起作用。

希望对其他人有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T14:57:00.410

恕我直言，没有直接的方法可以做到这一点（除了您提到的域解决方法），这就是我们使用[php-gettext](https://launchpad.net/php-gettext/)的原因。

更新：我们已经开始将其维护为[motranslator](https://packagist.org/packages/phpmyadmin/motranslator)，可由 Composer 安装并与所有 PHP 版本兼容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-18T14:16:38.517

我的解决方案是使用不同的名称保存文件，例如使用日期，然后更改域：

```
#the path for a domain, the .mo files must match the domain
#the trick to avoid permanent caching, is to use different names for the domain,             like the date messages_180320151250
$domain = 'messages_180320151300';

#sets the path for a domain, the .mo files must match the domain
bindtextdomain($domain, $_SERVER['DOCUMENT_ROOT']."/apps/cp/locale");

textdomain($domain); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-03T02:56:43.020

使用`apachectl graceful`命令要求进程重新读取配置。它将在请求完成服务后结束请求。所以看起来很安全。

根据[Apache HTTP Server 2.2 文档](http://httpd.apache.org/docs/2.2/en/stopping.html)

USR1 或优雅信号使父进程建议子进程在当前请求后退出（或者如果它们没有提供任何服务，则立即退出）。父级重新读取其配置文件并重新打开其日志文件。随着每个孩子的死亡，父母用新一代配置中的孩子替换它，立即开始服务新请求。

它对我有用。

# android - ViewGroup 将“onPressed”状态传输到其子级

> ID：13625661
> 
> 赞同：0
> 
> 时间：2012-11-29T12:17:08.317
> 
> 标签：android, touch, gallery

我有一个画廊和它的项目的自定义布局。每个上有两个按钮。每次我触摸一个项目视图时，它的按钮都会被按下。

当我单击一个按钮时，另一个按钮不会收到 onPressed 状态，但是当我单击附近时，它们都会收到它。

如何防止更改未触摸按钮的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:55:42.047

用下面的自定义类替换您`Buttons`的项目布局，`Button`然后查看该行为是否仍然存在：

```
public class SpecialButton extends Button {

    // implement constructors

    @Override
    public void setPressed(boolean pressed) {
        if (pressed && (getParent() instanceof View) && ((View) getParent()).isPressed()) {
            return;
        }
        super.setPressed(pressed);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:08:37.650

我已经有一个被覆盖的类作为按钮所在的容器。所以 Luksprog 提到的方式我覆盖了 setPressed()

```
public class GalleryItem extends FrameLayout {
    @Override
    public void setPressed(boolean pressed) {

        return;
    }

} 
```

# python - 在python中查找两个字符串中重复出现的单词的数量

> ID：13625662
> 
> 赞同：-2
> 
> 时间：2012-11-29T12:17:09.893
> 
> 标签：python, string, nltk

我想知道如果输入是两个字符串并且输出应该是两个字符串中重复出现的单词的数量，是否有一个库或函数可以返回一个数字......

输入：

```
string 1= my name is user
string 2= my friend is here 
```

输出：

```
2 
```

因为“my”和“is”在两个字符串中都重复...我听说 nltk 可以帮助我，如果真的有人可以指导我使用这个功能...请帮帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T12:20:00.063

不确定`nltk`- 似乎有点矫枉过正（除非您想要一些高级标记化）。如果您可以仅通过空格来标记单词，那么您可以使用如下集合：

```
>>> a = 'one two three four five'
>>> b = 'three blind mice'
>>> set(a.split()).intersection(b.split())
set(['three']) 
```

并采取的长度...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T12:43:06.557

```
res=set(a.split())&set(b.split())
print len(res) 
```

# java - 获取 Eclipse 项目绝对路径（在使用 tomcat 服务器的 Web 应用程序中）

> ID：13625665
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:17:20.080
> 
> 标签：java, jsf, tomcat

我正在尝试获取我的 Eclipse 项目的绝对路径：所以我写了这个；

```
 File file= new File("");
   System.out.println(file.getCanonicalPath());
   projectPath=file.getCanonicalPath(); 
```

所以当我在一个类中作为java应用程序执行它时它给了我正确的路径 `C:\Documents and Settings\Administrateur\Bureau\ready code\JavaServerFacesProject`

但是当我尝试在我的网络应用程序中使用它时，它给出了这个：

`C:\Documents and Settings\Administrateur\Bureau\eclipse\eclipse`

所以任何想法如何做到这一点非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:22:44.030

在 Eclipse 中，您可以在 Run Configurations 对话框中为您的项目设置工作目录。

您是否尝试过在那里设置非默认设置？

（如果你不能设置任何东西，你可以尝试这里建议的 JVM 选项：[https](https://stackoverflow.com/a/7838900/1143126) ://stackoverflow.com/a/7838900/1143126 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:29:41.143

从 Web 应用程序读取文件是一个典型的陷阱，无论何时执行此操作都会受到影响。

Web 应用程序（尤其是 Java EE）没有考虑使用文件系统进行读/写操作，它们依赖于容器（在您的情况下为 Tomcat）知道如何获取所需资源的事实。

所以基本的建议是：不要这样做。

但由于我基本上讨厌这种答案，所以我会给你一些建议。

**永远不要使用工作目录**

你永远不知道你的工作目录在哪里，而且更常见的是，在任何生产系统中，web-app 都无权在工作目录上写入。

例如，如果你将 webapp 部署到 tomcat 服务器，在 windows 机器上作为服务运行，你会发现你的工作目录是`\Windows\System32`

你真的不想在那里写一些上传的文件，例如......

你有几个选择，我更喜欢在 web-xml 中设置一个路径，并可能从服务器配置中覆盖它（使用上下文）。

第二个选项，更好的是，将路径保存到 Web 应用程序访问的数据库表中。

前任：

在你设置的 web.xml

```
<context-param>
  <description>Uploaded files directory</description>
  <param-name>file-storage</param-name>
  <param-value>c:\app\storage\uploaded</param-value>
</context-param> 
```

然后在你的 server.xml 中（或者你可以使用上下文目录并在那里放置一个包含以下代码的文件）你在上下文中覆盖这个设置。

```
<Context
    <Parameter
      name="file-storage"
      value="E:\app\storage\uploaded"
      type="java.lang.String"
      override="false" />
</Context> 
```

[检查tomcat文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

第三个选项，在稍微愉快的情况下，您只想编写一些临时文件，webapp 工作目录可作为 servlet 上下文参数访问，名为： *javax.servlet.context.tempdir*

如果我在你那里我会去数据库表。

所有这些复杂性是因为您可以在不同的tomcat实例上拥有同一个应用程序的多个实例，甚至在不同的机器上，甚至将不同的Web应用程序放到同一个实例中，因此没有简单的方法来制作“相对”路径就是全部情况。

大多数网络应用程序决定在 db 上序列化数据（使用 lob 或类似对象），只要有这种必要性，或者依赖某种服务（FTP、cifs、nfs ...）。

# wcf - C 盘中的 Traces.svclog

> ID：13625667
> 
> 赞同：1
> 
> 时间：2012-11-29T12:17:27.280
> 
> 标签：wcf, windows-8, trace

我使用的是 Windows 8。在驱动器 C 的根目录 (C:) 中有 27 个 WCF 跟踪文件；其中 26 个命名为 <guid>Traces.svclog，一个是 Traces.svclog。我试图找出哪些应用程序正在创建这些文件；因为我没有任何使用[此处](http://dotnetrobert.com/?q=node/63)描述的 wcf 跟踪的应用程序。

这是我的 C:\ 目录的视图： ![svclog 文件视图](../Images/1708cba189ad49c4a3d2942066c360b2.png)

我查看了所有的痕迹：只有 2 条独特的痕迹，其余的是它们的精确副本。这是其中之一的详细信息；

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>589828</EventID>
<Type>3</Type>
<SubType Name="Information">0</SubType>
<Level>8</Level>
<TimeCreated SystemTime="2012-10-15T06:37:57.4222685Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
<Execution ProcessName="Microsoft.VisualStudio.Web.Host" ProcessID="7104" ThreadID="78" />
<Channel />
<Computer>MYCOMP</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Information">
<TraceIdentifier>http://msdn.microsoft.com/tr-TR/library/System.ServiceModel.Activation.WebHostCompilation.aspx</TraceIdentifier>
<Description>ASP.Net hosted compilation.</Description>
<AppDomain>7f594460-3-129947566686622036</AppDomain>
<Source>System.ServiceModel.Activation.ServiceParser/17864371</Source>
<ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/StringTraceRecord">
<VirtualPath>/BI/DataService.svc</VirtualPath>
</ExtendedData>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

所以 C:\ 目录充满了垃圾痕迹。我已经安装了 WCF&WF 示例，这可能是造成这种情况的原因。你能帮我解决这个问题吗？找出哪个应用程序正在这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:07:59.997

在您的驱动器中搜索 app.config 文件，这些文件具有在 system.servicemodel 跟踪源上启用跟踪的 systems.diagnostics 部分。

# php - 我可以使用 Moodle 'API' 还是必须刮掉它

> ID：13625676
> 
> 赞同：4
> 
> 时间：2012-11-29T12:17:51.857
> 
> 标签：php, html, web-scraping, moodle

我非常讨厌Moodle。不过我必须使用它，所以我想我会为它创建一个新的“前端”。我想知道 Moodle 是否有一个我可以挂钩的 API。我希望让它与大多数标准 Moodle 一起工作，所以我不能依赖任何必须启用或添加到 Moodle 的东西。

如果没有“API”，我可以使用最好的方法来抓取它吗？我最擅长 PHP，但我对新想法持开放态度。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T01:00:50.257

看这里：[http ://docs.moodle.org/dev/Core_APIs](http://docs.moodle.org/dev/Core_APIs)

在这里：[http ://docs.moodle.org/dev/Web_services_API](http://docs.moodle.org/dev/Web_services_API)

Moodle 是一个开源项目。如果您不喜欢它（或其中的一部分），为什么不加入社区并帮助它变得更好呢？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T02:52:12.107

如果您确切地说出您不喜欢什么，以至于您显然准备花费数百个小时来“修复”它，那将有所帮助。

如果只是外观，那么您可以使用主题来更改 HTML 和 CSS。主题对于管理员来说是微不足道的，因此如果您制作的东西很棒，那么说服管理员这样做并不难。

否则，您可能有兴趣加入[这个](https://moodle.org/mod/forum/discuss.php?d=206736)基于 HTML5 的新官方移动客户端，这里是[文档](http://docs.moodle.org/dev/Moodle_Mobile)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:22:32.707

简洁的答案：[http ://docs.moodle.org/dev/Main_Page](http://docs.moodle.org/dev/Main_Page)

但说真的，Web 应用程序的“前端”几乎就是应用程序。没有它，你只有一个数据库。自己复制整个 Moodle 开发团队的工作似乎是一个巨大的轮子改造案例。

如果您只是想重新设计 Moodle，请查看[http://docs.moodle.org/dev/Theme_development](http://docs.moodle.org/dev/Theme_development)。

# java - wicket 如何处理 html 注入

> ID：13625684
> 
> 赞同：1
> 
> 时间：2012-11-29T12:18:25.003
> 
> 标签：java, wicket

当我使用此代码创建 html 页面时：

```
 '<br/>' is not a valid email address. 
```

我看到而不是`<br />`换行，什么都可以

然后我有检票口输入文本字段，其中有 EmailValidator。当我放在那里时，`<br />`我可以看到同一行，但`<br />`用新行替换。检票口怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:13:53.693

如果您想在浏览器中看到任何 html 代码，则需要对其进行转义。如果在检票口组件中使用 html 作为值，则需要调用`Component.setEscapeModelStrings(true);`

# rackspace-cloud - 容器实现

> ID：13625685
> 
> 赞同：0
> 
> 时间：2012-11-29T12:18:29.360
> 
> 标签：rackspace-cloud, rackspace

我目前正在开发一个项目，用户将上传项目，但其他用户将能够克隆这些项目（想想 github-esque）。

现在我最初的想法是为每个项目创建一个容器，以便轻松克隆它们。虽然我仍然会存储对每个文件的引用及其在数据库中的位置。

为每个项目创建一个容器是最好的选择，还是我应该坚持每个用户一个容器？我知道容器中的文件数量限制很大，但我觉得我的初始计划会更好地扩展。

想人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:36:12.157

这只是个人意见，因为我目前也在我的项目中使用机架空间云。我认为为每个用户创建一个容器仍然是不错的选择，因为您可以在容器内复制、移动对象。

此外，通过为每个用户创建容器，您可以轻松获取当前大小的对象、用户容器，这样您就可以知道他们当前拥有的可用空间，而无需额外计算。

# javascript - Rails 回形针和 AJAX 表单

> ID：13625686
> 
> 赞同：1
> 
> 时间：2012-11-29T12:18:36.487
> 
> 标签：javascript, ruby-on-rails, ajax, forms, paperclip

我有一个包含表单的模式，用户可以在其中上传照片。正确上传照片后，我想通过 Ajax 进行响应并显示一条消息。

不幸的是，表单是在 HTML 中提交的，而不是在 JS 中提交的。

任何想法？

表格代码：

```
<%= form_for(Object.new() , :url => {:controller => 'objects', :action => 'create'}, :remote=> true, :html => { :multipart => true }) do |f| %>
     <%= f.file_field :photo, label: 'add a photo' %>
     <%= button_tag(type: 'submit', class: "btn btn-success") do %>
            <i class="icon-arrow-up icon-white upload"></i>Upload
     <% end %>
<% end %> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:08:43.440

您不能使用 AJAX 上传文件。这可能是提交是 HTML 而不是 JS 的原因。

不过，您有一些技巧可以解决此问题：

*   HTML5：[http ://www.queness.com/post/11434/7-javascript-ajax-file-upload-plugins](http://www.queness.com/post/11434/7-javascript-ajax-file-upload-plugins)
*   闪存：[http ://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)
*   iframe 方法：[http ://www.google.com/search?q=ajax%2Biframe%2Bupload](http://www.google.com/search?q=ajax%2Biframe%2Bupload)

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:03:51.357

不幸的是，rails 无法使用 ajax 直接上传文件，因为 javascript 无法直接访问硬盘文件。显然有一个涉及 iframe 的解决方法：这个先前的问题可能会对您有所帮助：

[RAILS - 回形针不适用于 Ajax](https://stackoverflow.com/questions/1829238/rails-paperclip-dont-work-with-ajax?rq=1)

以及一些关于以 Rails 形式上传文件的内容：

[http://guides.rubyonrails.org/form_helpers.html#dealing-with-ajax](http://guides.rubyonrails.org/form_helpers.html#dealing-with-ajax)

# c# - 自定义 Ad-hoc 报告架构

> ID：13625689
> 
> 赞同：0
> 
> 时间：2012-11-29T12:18:46.090
> 
> 标签：c#, nhibernate, architecture, reporting, metamodel

我将描述我正在努力实现的目标，并感谢任何关于如何设计解决方案的架构和技术建议。

我正在开发一个应用程序，该应用程序需要允许最终用户从一组有限的数据中创建临时报告。这些是我试图克服的全球障碍：

**报告设计和元模型**

最终用户应该能够完成由以下步骤组成的报告向导：

1.  选择报告根（实体是所有关系的根，例如投诉）
2.  在根实体的属性上创建过滤器
3.  在与根实体（例如客户、用户）相关的其他实体的属性上创建过滤器
4.  选择报告表的列（从跨选定关系的所有列的联合中）
5.  选择排序表达式
6.  选择分组表达式
7.  保存报告

这在商业应用程序中很常见，SugarCRM 就是一个很好的例子。

我想定义一个自定义元模型来描述报告。应用程序使用 NHibernate 作为 ORM，其想法是使用 Criteria API 来构造报告查询，因此元模型应包含查询所需的所有数据（投影、连接、过滤器、排序和按表达式分组）。是否有我可以适应此解决方案的元模型示例？

技术方面存在以下问题：

**浏览现有数据模型**

如何从数据模型中提取字段和关系？首先想到的是使用反射，但是由于用户可以将自定义字段添加到实体（不会更改实体类），这不是解决方案。剩下的是数据库本身或 NHibernate 映射文件。Nhibernate 是否为此公开 API 或手动 XML 查询是唯一的选择？

**报告呈现**

此外，呈现报告也是一个问题。报告必须在运行时设计，但据我所知，rdlc 无法做到这一点。这种方法有哪些替代方法？避免 rdlc 并以纯 HTML 呈现？还有其他框架吗？

也欢迎对实现这些功能并可用作灵感的开源（c#、java）项目提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:51:44.103

## 报告设计和元模型

数据模型需要关联路径、列名和列索引

例如

```
class Report
{
    public Layout Layout { get; set; }
    public string EntityTypeFullName { get; set; }
    /// each Filter is a compare on one Property
    public ICollection<Filter> Filters { get; }
    public IList<Column> Columns { get; }
}

class Column
{
    public string HeaderText { get; set; }

    /// e.g. Contract.User.Name
    public string AssociationPath { get; set; }
}

// in code
var query = session.CreateCriteria(EntityTypeFullName);
// recursive method which adds simple properties as Restrictions and calls itself
// with query.CreateCriteria(referencePropertyName, Filters.Select(CropAssociationPath));
AddFilter(query, report.Filters) 
```

## 浏览现有数据模型

NHibernate 通过`Configuration.ClassMappings`和`Configuration.GetClassMapping(Type)`/或有用的反射优化访问和一些元数据公开详细的元数据，`ISessionFactory.GetClassMetadata(Type)`最重要的是`PropertyNames`，`GetPropertyValue(obj, name, mode.Poco)`

## 报告呈现

我在这里帮不上忙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:51:11.097

可以使用[PdfReport](http://pdfreport.codeplex.com/wikipage?title=How%20to%20create%20auto%20generated/dynamic%20columns)创建临时报告。PdfReport 是一个代码优先的报告引擎，它建立在 iTextSharp 和 EPPlus 库之上。它与 .NET 3.5+ Web 和 Windows 应用程序兼容。PdfReport 支持从数据表到内存中强类型列表的广泛数据源，无需数据库： http: [//pdfreport.codeplex.com/](http://pdfreport.codeplex.com/)

# android - 如何在sql查询中传递逗号分隔的字符串值？

> ID：13625690
> 
> 赞同：5
> 
> 时间：2012-11-29T12:18:45.730
> 
> 标签：android, string, sqlite

我创建了一个与数据库相关的应用程序。

在此我创建简单的数据库并在 sql 查询中使用**in**从数据库中获取值。

我的问题是我得到了像“2,6,8,9,10”这样的字符串。首先我拆分这个字符串并存储在一个数组列表中。没有逗号。在这个数组列表之后，我用逗号合并，比如 2,6,8,9,10 这个。

这一切我都做得很好。我在查询中使用此字符串从数据库中获取值。我的查询是

```
SELECT tm.icon,tm.topic_no,td.topic_id,td.name FROM topicmaster tm ,topicmaster_description td  WHERE td.topic_id =tm.topic_id AND  td.langid='3' AND tm.oraganisationid ='1' AND  td.topic_id in(2,6,8,9,10); 
```

这。

但是当我传递合并字符串时，它看起来像

```
SELECT tm.icon,tm.topic_no,td.topic_id,td.name FROM topicmaster tm ,topicmaster_description td  WHERE td.topic_id =tm.topic_id AND  td.langid='3' AND tm.oraganisationid ='1' AND  td.topic_id in('2,6,8,9,10'); 
```

所以我无法运行查询，因为原因中的传递值不同**`in`** 。在上面的查询中工作正常，因为它`s like a`in(2,6,8,9,10) `in second it look like a`in('2,6,8,9,10') `so what to do. how to remove this`'` from string?

首先我拆分字符串

```
//getTopicFile ArrayList with 
    public  ArrayList<String> getAssignTopicArrayList(String passString) 
    {
        ArrayList<String> rtnArrayList=new ArrayList<String>();
        try 
        {
            StringTokenizer strTokens = new StringTokenizer(passString,",");
            while (strTokens.hasMoreElements()) 
            {
                rtnArrayList.add(String.valueOf(strTokens.nextToken()));
            }
        } catch (Exception ex) 
        {
            ex.printStackTrace();
            System.err.println("Error in Fetch ArrayList-->"+ex.toString());
        }
        return rtnArrayList;
    }       
    //getTopicFile ArrayList with 
```

在我合并新字符串之后

```
genHelper.showErrorLog("Assign Topic-->"+chapterAssignTopicName);
        ArrayList<String> getTopicList=genHelper.getAssignTopicArrayList(chapterAssignTopicName);

        String passConcat = "";
        for (int i = 0; i < getTopicList.size(); i++) 
        {
            System.out.println("Topic List--->"+getTopicList.get(i));

            if(getTopicList.size()==1)
            {
                passConcat=passConcat.concat(String.valueOf(getTopicList.get(i)));
            }
            else
            {
                if(getTopicList.size()-1 == i)
                {
                    System.err.println("value if --> " + i);
                    passConcat=passConcat.concat(String.valueOf(getTopicList.get(i)));
                }else {
                    System.err.println("value else--> " + i);
                    passConcat=passConcat.concat(String.valueOf(getTopicList.get(i)).concat(","));
                }
            }
        }

        genHelper.showErrorLog("PassConcat String-->"+passConcat); 
```

然后我得到了新字符串并在下面传入查询

```
String topicQuery="SELECT tm.icon,tm.topic_no,td.topic_id,td.name FROM topicmaster tm ,topicmaster_description td  WHERE td.topic_id =tm.topic_id AND  td.langid='"+LanguageActivity.languageId+"' AND tm.oraganisationid ='"+genHelper.loadPreferences(String.valueOf(R.string.sharePrefin_Login_organizationid))+"' AND  td.topic_id in('"+passConcat+"')"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:32:50.887

不应该

```
String topicQuery="SELECT tm.icon,tm.topic_no,td.topic_id,td.name FROM topicmaster tm ,topicmaster_description td  WHERE td.topic_id =tm.topic_id AND  td.langid='"+LanguageActivity.languageId+"' AND tm.oraganisationid ='"+genHelper.loadPreferences(String.valueOf(R.string.sharePrefin_Login_organizationid))+"' AND  td.topic_id in('"+passConcat+"')"; 
```

是

```
String topicQuery="SELECT tm.icon,tm.topic_no,td.topic_id,td.name FROM topicmaster tm ,topicmaster_description td  WHERE td.topic_id =tm.topic_id AND  td.langid='"+LanguageActivity.languageId+"' AND tm.oraganisationid ='"+genHelper.loadPreferences(String.valueOf(R.string.sharePrefin_Login_organizationid))+"' AND  td.topic_id in("+passConcat+")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:28:37.353

你最好的选择，假设你正在使用准备好的语句，并且你想保持你的数据库安全，是用 sql 字符串 '.... in (?,?,?,...)' 来准备语句，其中数字的 '？' 等于数组中实际值的数量。

缺点是您牺牲了性能，因为您需要在每次希望执行时准备语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:32:55.303

使用一些像 indexOf 和 replace 函数这样的字符串操作来摆脱这些逗号。

# erlang - 带有加密应用程序的 erlang 系统不会以嵌入式模式启动

> ID：13625692
> 
> 赞同：1
> 
> 时间：2012-11-29T12:18:58.553
> 
> 标签：erlang, embedded-resource

我有一个根据[http://www.erlang.org/doc/system_principles/create_target.html](http://www.erlang.org/doc/system_principles/create_target.html)
创建的系统， 其中包括加密应用程序。

我可以启动它，但是在我将“-mode embedded”添加到 bin/start 之后，似乎某些东西不再启动了。

我被卡住了，我该如何调查？我还在 bin/start 中添加了 -sname 和 -setcookie，当我删除 -mode 嵌入式系统启动时，应用程序工作，我可以使用分布式 erlang 技术连接到它。但是嵌入它根本不交互。

最小的测试用例是将以下补丁应用到来自[https://github.com/basho/rebar/wiki/Release-handling](https://github.com/basho/rebar/wiki/Release-handling)的示例应用程序一旦你“rebar generate”并启动它，你将无法连接到它的erlang vm。它也不会优雅地停止。有任何想法吗？

```
diff --git a/rel/reltool.config b/rel/reltool.config
index 0c26333..ba4bd35 100644
--- a/rel/reltool.config
+++ b/rel/reltool.config
@@ -6,7 +6,6 @@
          kernel,
          stdlib,
          sasl,
-         crypto,
          test
         ]},
          {rel, "start_clean", "",
@@ -24,7 +23,6 @@
        {app, sasl,   [{incl_cond, include}]},
        {app, stdlib, [{incl_cond, include}]},
        {app, kernel, [{incl_cond, include}]},
-       {app, crypto, [{incl_cond, include}]},
        {app, test, [{incl_cond, include}]}
       ]}. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:42:17.077

> 在嵌入式模式下，所有代码在系统启动期间根据引导脚本加载。（也可以稍后通过显式命令代码服务器加载代码）。

我想你可能忘了加载一些库模块。

对于 debug `erl`，你现在使用 +v 吗？

> +V
> 
> ```
> Makes the emulator print out its version number. 
> ```
> 
> **> +v
> 
> ```
> **Verbose**.** 
> ```

如何使用rebar [（rebar generation）](https://github.com/basho/rebar/wiki/Release-handling "钢筋生成")做同样的事情（release operation）？Rebar 会自动为您生成相同类型的文件。**您可以将这些文件与您的文件进行比较并找出错误。**尤其是**引导脚本**。

# graph - 资源分配图死锁检测

> ID：13625693
> 
> 赞同：1
> 
> 时间：2012-11-29T12:19:07.593
> 
> 标签：graph, operating-system, process

我知道循环请求会导致死锁，但我想知道以下是否也会导致死锁......

![资源图](../Images/c4223f1a574914cda6ec57c9cd9ba63e.png)

我不清楚，但我也认为如果“由于两个或多个程序/进程在完成操作之前都需要对方的响应而导致失败或无法继续”

这是否意味着如果进程 2 和进程 4 都需要 R7，这将导致死锁？（多个进程请求的资源 R5 和 R4 相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:32:01.877

使用图片中的符号最简单的死锁图是当两个进程各自需要相同的两个资源时。例如，如果在您的示例进程中`P2`依赖于 resource `R5`，则可能会出现死锁。假设两个`P2`和`P4`每个请求都`R7`和`R5`，即`P2`锁定`R7`和`P4`锁定`R5`。then `P2`is waiting`R5`和`P4`is waiting for `R7`，即各自在等待对方释放锁。这是一个最小的例子。

在您的情况下，没有这种可能性，因为两个不同的进程从未共享过两个资源。唯一有问题的是`P4`。如果与`P2`or发生争用`P7`，则要么`P4`先执行（没问题），要么先执行另一个进程，解锁资源并允许`P4`执行（也没问题）。

# java - Java在我的字符串中添加双引号

> ID：13625695
> 
> 赞同：1
> 
> 时间：2012-11-29T12:19:09.297
> 
> 标签：java, string, quotes

我用 3 个 Strings 创建了一个类。

*代码第 1 部分：*

```
public static final String GET_BY_QUALIFICATION_PRODUIT = " INNER JOIN rel_qualifications_produit ON rel_qualifications_produit.idqualifications = qualifications.idqualifications WHERE rel_qualifications_produit.idproduit = ? order by order asc"; 
```

我在另一种方法中使用了测试属性。

*代码第 2 部分：*

```
String s = search + QualificationSQL.GET_BY_QUALIFICATION_PRODUIT;
statement = connection.prepareStatement(s);' 
```

问题是*测试*显示`""order by test asc""`而不是`"order by test asc"`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:39:44.827

您可以从`String`使用中删除双引号字符`replaceAll("\"", "");`

# ruby-on-rails - 立即声明整个示例组待处理

> ID：13625698
> 
> 赞同：0
> 
> 时间：2012-11-29T12:19:24.150
> 
> 标签：ruby-on-rails, rspec

我认为有一个命令可以在 rspec (rails) 中声明整个示例组处于待处理状态，我相信它类似于`before {pending}`，但我再也找不到它了。有谁知道你怎么能做到这一点？

```
 context "Group1" do
            before { pending }
            it "example1" do
            end
            it "example2" do
            end
            it "example3" do
            end
        end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:20:46.730

```
 pending "Group1" do
        it "example1" do
        end
        it "example2" do
        end
        it "example3" do
        end
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:23:28.237

用待处理的简单替换描述或上下文

```
 pending "Group1" do
        before { pending }
        it "example1" do
        end
        it "example2" do
        end
        it "example3" do
        end
    end 
```

# c++ - 在 Ubuntu 12.04.1 LTS libssl libcrypto 上取消定义引用

> ID：13625700
> 
> 赞同：0
> 
> 时间：2012-11-29T12:19:32.610
> 
> 标签：c++, linker, ubuntu-12.04

我添加了一系列错误`-l ssl and -l crypto`。但是我不知道我需要安装哪个版本库

```
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:48: undefined reference to `SSL_library_init'
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:49: undefined reference to `SSL_load_error_strings'
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:50: undefined reference to `SSL_library_init'
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:52: undefined reference to `CRYPTO_num_locks'
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:55: undefined reference to `CRYPTO_set_locking_callback'
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:56: undefined reference to `CRYPTO_set_id_callback'
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:48: undefined reference to `SSL_library_init'
/usr/include/boost/asio/ssl/detail/openssl_init.hpp:49: undefined reference to `SSL_load_error_strings' 
```

有很多选择，例如

```
Note, selecting 'libss7-dbg' for regex 'libssl*'
Note, selecting 'libssl0.9.8-dbg' for regex 'libssl*'
Note, selecting 'libss7-dev' for regex 'libssl*'
Note, selecting 'libssl0.9.8' for regex 'libssl*'
Note, selecting 'libss2' for regex 'libssl*'
Note, selecting 'libssm-dev' for regex 'libssl*'
Note, selecting 'libssl' for regex 'libssl*'
Note, selecting 'libssh-4' for regex 'libssl*'
Note, selecting 'libssh-2-dev' for regex 'libssl*'
Note, selecting 'libssh-2-doc' for regex 'libssl*'
Note, selecting 'libssl1.0.0' for regex 'libssl*'
Note, selecting 'libsscm3' for regex 'libssl*'
Note, selecting 'libssl-ocaml-dev' instead of 'libssl-ocaml-dev-l8h98'
Note, selecting 'libssl-ocaml' instead of 'libssl-ocaml-l8h98'
Note, selecting 'libssreflect-ocaml' instead of 'libssreflect-ocaml-kevs8'
Note, selecting 'libssreflect-ocaml-dev' instead of 'libssreflect-ocaml-dev-kevs8'
Note, selecting 'python-libssh2' instead of 'python2.7-libssh2'
libss2 is already the newest version. 
```

和

```
Note, selecting 'libcryptokit-ocaml' for regex 'libcrypto*'
Note, selecting 'libcryptokit-ocaml-02n31' for regex 'libcrypto*'
Note, selecting 'libcryptgps-ocaml-dev' for regex 'libcrypto*'
Note, selecting 'libcrypt-blowfish-perl' for regex 'libcrypto*'
Note, selecting 'libcrypt-saltedhash-perl' for regex 'libcrypto*'
Note, selecting 'libcrypt-gcrypt-perl' for regex 'libcrypto*'
Note, selecting 'libcryptui' for regex 'libcrypto*'
Note, selecting 'libcrypt-generatepassword-perl' for regex 'libcrypto*'
Note, selecting 'libcrypt-dh-gmp-perl' for regex 'libcrypto*'
Note, selecting 'libcrypt-cbc-perl' for regex 'libcrypto*'
Note, selecting 'libcrypt-dsa-perl' for regex 'libcrypto*'
Note, selecting 'libcrypt-dh-perl' for regex 'libcrypto*'
Note, selecting 'libcrypt-openssl-bignum-perl' for regex 'libcrypto*'
Note, selecting 'libcryptgps-ocaml-dev' instead of 'libcryptgps-ocaml-dev-1zmb9'
Note, selecting 'libcryptokit-ocaml' instead of 'libcryptokit-ocaml-02n31'
Note, selecting 'libcryptokit-ocaml-dev' instead of 'libcryptokit-ocaml-dev-02n31'

g++ -pthread -l ssl -lcrypto IpcManagerMain.cpp -o IpcManagerMain.o  -lentity++ -lpersistence++ -lplatform++ -lreflection++ -lmonitor++ -lmeta++ -lipc++ -lbroadcast++ -lutilities++ -L/usr/lib          -lboost_serialization -lboost_thread-mt -lboost_date_time -lboost_iostreams -lboost_program_options -lboost_filesystem -lboost_system 
```

还有更多，但我已经缩短了。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:25:26.327

想象一下（虚构的）链接器试图链接这些模块：

```
link moda modb modc modd 
```

链接器不会（出于效率原因）记录它看到的所有符号`moda`以尝试将它们与`modb`. 例如，如果是一个巨大的库，那么如果在整个过程中记住`moda`所有符号，则链接过程会变得非常慢（并且消耗内存） 。`moda`

结果，链接器总是只记住（到目前为止）丢失的符号，并尝试在**随后**出现的模块中找到它们。请注意，这仅适用于库。这是因为同一库/应用程序的对象可能具有循环依赖关系。

这意味着例如，仅在和而*不是*在（再次，如果和是库）`modb`中搜索缺少的符号。`modc``modd`*`moda``moda``modc``modd`*

 *因此，如果您`modx`使用了 的符号，那么您必须*在*链接命令中`mody`提及。`mody` *`modx`*

 *例如，如果您有文件和`main.o`，那么您需要像这样编写链接命令：`funcs.o``libmatrix.a`

```
gcc funcs.o main.o -lmatrix 
```

否则，如果你写`gcc -lmatrix funcs.o main.o`， 的符号`libmatrix.a`将不会被`funcs.o`和看到`main.o`。**

# php - 在 PHP 中加载依赖项的正确方法是什么？

> ID：13625707
> 
> 赞同：6
> 
> 时间：2012-11-29T12:19:42.107
> 
> 标签：php, include, dependencies

我对在 PHP 中加载依赖类的正确方法/最佳实践有疑问。

`include_once`我通常以类似于 Java 导入的方式将所有依赖项放在每个类的开头。就像是：

```
include_once 'dto/SomeObjectDTO.php;'
include_once 'dao/SomeObjectDAO.php;'
include_once 'util/SomeObjectUtil.php;'

class SomeObjectService{
    #class code here
} 
```

这是加载类的最佳方式吗？或者也许将所有类加载到`Bootstrap.php`? 其他方法？

请注意，我说的是加载我自己的类，而不是像框架这样的复杂外部类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:22:07.357

PHP的你可以注册你的自动加载方法。Symfony 2 包含一个很好的类来做这件事。

[http://php.net/manual/en/function.spl-autoload-register.php](http://php.net/manual/en/function.spl-autoload-register.php)

我已经对其进行了调整以与我们编写的库一起使用。

[https://github.com/homer6/altumo/blob/master/source/php/loader.php](https://github.com/homer6/altumo/blob/master/source/php/loader.php)

[https://github.com/homer6/altumo/blob/master/source/php/Utils/UniversalClassLoader.php](https://github.com/homer6/altumo/blob/master/source/php/Utils/UniversalClassLoader.php)

这种改编允许您拥有不需要顶级名称空间具有相同文件夹名称的名称空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:26:14.823

自 5.3 版起 PHP 支持命名空间。这允许您拥有一个包和类层次结构，就像您从 C++ 或 Java 中了解它们一样。

查看这些资源以了解更多信息：

[http://www.php.net/manual/en/language.namespaces.basics.php](http://www.php.net/manual/en/language.namespaces.basics.php)

[http://php.net/manual/en/language.namespaces.importing.php](http://php.net/manual/en/language.namespaces.importing.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T12:28:39.190

就像 Homer6 所说，自动加载是 php 内置的依赖加载机制。

[PHP-FIG](http://www.php-fig.org/)提出了一系列称为 PSR 的 PHP 编码标准。PSR-0 处理类命名和自动加载。以下是一些链接：

*   [要求和示例自动加载器](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)
*   [关于这个主题的一篇好文章](http://phpmaster.com/autoloading-and-the-psr-0-standard/)

另外，请记住，自动加载是有代价的。在建议的默认自动加载器中有很多字符串工作和 fs 工作（您可以实现自己的更快的自动加载器，但它不符合标准）。当您需要加载大量类时，这会使自动加载变慢。因此，如果您只需要加载 2 个类，您的方法会更快、更容易理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:23:49.200

```
set_include_path(get_include_path()
        . PATH_SEPARATOR . 'path1'
        . PATH_SEPARATOR . 'path2'
);

// auto load classes:
function autoloadClasses($className) {
require_once $className . '.php';
}

spl_autoload_register('autoloadClasses'); 
```

# wcf - wcf idispatchmessageinspector BeforeSendReply 未调用

> ID：13625709
> 
> 赞同：3
> 
> 时间：2012-11-29T12:19:51.043
> 
> 标签：wcf, idispatchmessageinspector

我已经在我的服务中实现了 idispatchmessageinspector。我不想将此作为属性。我希望 BeforeSendReply 将其他数据添加到标题中。我遇到的问题是它没有被调用并且标头返回null。本质上，我将此视为事件驱动，每次方法完成执行时都会调用它。

有人可以解释*BeforeSendReply*的执行吗？

希望这是有道理的。

我想要完成的示例如下：

```
class test
implements itest
implements idispatchmessageinspector 

public function testFunction as string implements itest.testFunction 
begin
return somestring
end

sub BeforeSendReply (reply ...) implement ..
begin

dim header = ...

reply.headers.add(header)

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:39:48.500

使类实现`IDispatchMessageInspector`接口不会使其添加到 WCF 管道中。您需要使用行为在端点调度运行时中插入检查器的实例。[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)找到更多详细信息。

# c# - 运行在其他计算机上开发的项目或 .cs 文件

> ID：13625714
> 
> 赞同：-4
> 
> 时间：2012-11-29T12:20:06.537
> 
> 标签：c#, visual-studio

我在其他计算机上开发了几个项目和 .cs 文件。

如何在不同的计算机上运行所有这些？如果我已经有同名的项目怎么办？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:24:18.043

只需复制解决方案的整个目录并在 Visual Studio 中打开？项目没有链接到它们正在运行的机器。您可能遇到的唯一问题是安装的组件（如水晶报告或 devexpress）或具有绝对位置的链接项目（基本上不驻留在解决方案目录的东西）

如果您已经有项目（具有不同的路径）但名称相同，请确保打开正确的项目。如果路径与文件相同，您将覆盖它们。

源代码没有什么特别之处，只是机器上的文件

# windows-phone-7 - WP7如何过滤列表框

> ID：13625715
> 
> 赞同：1
> 
> 时间：2012-11-29T12:20:15.163
> 
> 标签：windows-phone-7, search, filter, listbox, real-time

我有一个`ListBox`大约有 100 件物品。现在我想`ListBox`根据用户输入的内容进行过滤`TextBox`。我想实时搜索，所以我处理`TextBox_OnTextChanged`事件。

我的第一个解决方案是在文本更改时设置`ListBox`'s 。`ItemsSource`这真的很慢。

[许多人](https://stackoverflow.com/questions/7295948/how-to-implement-search-in-listbox-wp7)建议使用`CollectionViewSource`，但这并不能使它更快。

如何`ListBox` **实时**快速**过滤**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:39:00.010

检查数据绑定源的过滤方法

[带有 ObservableCollection<T> 和动态过滤器的 Silverlight ListBox](https://stackoverflow.com/questions/3732145/silverlight-listbox-with-observablecollectiont-and-dynamic-filter)

# c++ - 如何在 Visual Studio 2012 上使用带有控制台的 GUI Windows 应用程序？

> ID：13625721
> 
> 赞同：0
> 
> 时间：2012-11-29T12:20:46.323
> 
> 标签：c++, visual-studio, user-interface

我一直在搜索 StackOverflow，但似乎找不到我的问题的确切解释：

我正在运行一个在 Visual Studio 2012 下编译的 GUI 应用程序。由于它是一个 GUI 应用程序，有时很难正常调试它，所以我需要在执行时打印出一些值。我已经做了几个 printf 但问题是，因为它是一个 GUI 应用程序，所以在调试它时没有可用的控制台。我需要调试并有一个控制台来显示 printf 的这些输出值。我知道在 CodeBlocks 下可以这样做，但是该项目非常大，必须将所有内容迁移到 gcc CodeBlocks。

谁能告诉我如何显示这样的控制台或如何解决这个问题并得到类似的结果？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:51:25.433

Windows 应用程序不能同时是 GUI 和控制台。

但是有一个解决方法：

*   如果您的应用程序基于 MFC，请使用`TRACE`宏。
*   `OutputDebugString`否则，请围绕功能制作自己的包装器。

当您在调试器下启动我们的程序时，两者都将输出到 Visual Studio 的“输出”窗格

当然，您始终可以将诊断消息输出到良好的旧日志文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:39:07.717

从控制台启动您的 gui...然后附加到您的调试器。

# c# - ASP.NET 图表中的反向轴

> ID：13625722
> 
> 赞同：0
> 
> 时间：2012-11-29T12:20:47.723
> 
> 标签：c#, asp.net, charts

我正在处理我希望两个轴都反转的代码。我的代码是

```
Dictionary<int, string> employees = new Dictionary<int, string>();
employees.Add(5, "Sell");
employees.Add(4, "Your Manegers");
employees.Add(3, "Your Peers");
employees.Add(2, "Your Direct Reports");
employees.Add(1, "Others");

Chart1.Series[0].ChartType = SeriesChartType.Bar;
Chart1.Series[0].Color = System.Drawing.Color.Green;

Chart1.Series[0].BorderColor = System.Drawing.Color.Yellow;
//Chart1.ChartAreas[0].AxisY.IsReversed = true;
Chart1.ChartAreas[0].AxisX.IsReversed = true;
Chart1.Series[0].XAxisType = AxisType.Secondary; 
```

我想要这样的输出：

[图 http://www.hfi.com/images/graph.png](http://www.hfi.com/images/graph.png)

# magento - 用于安全链接的 Magento 管理模板标签？

> ID：13625725
> 
> 赞同：1
> 
> 时间：2012-11-29T12:20:59.403
> 
> 标签：magento

我需要链接到同一网站 (https) 上的安全页面。我可能可以通过 xml 破解某些东西，扩展 cms_page 块，并在构造函数中放置一个安全指令，但我只是想知道是否有一个模板标签（供管理员使用）可以为我获取一个安全链接。我试图这样做：

```
<a href="{{config path='web/secure/base_url'}}secure_page">Secure page</a> 
```

但是magento吃掉了“secure_page”部分，只在href部分留下了配置模板标签。有没有人做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:01:52.757

```
<a href="{{store url="secure_page" _secure="true"}}">Secure page</a> 
```

以下是适用参数的列表：http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/reference/geturl_function_parameters](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/geturl_function_parameters)

# android - 如何沿所需方向移动物体？

> ID：13625730
> 
> 赞同：4
> 
> 时间：2012-11-29T12:21:03.860
> 
> 标签：android

我需要的方向是：

![在此处输入图像描述](../Images/8397dbe317289144ecc883afe1c259cf.png) 我从 droidz 活动示例和 rockpaperscissors 示例中看到了如何通过用手或与墙壁碰撞时在不同方向上移动图像。

问题1：

现在我想在四个方向上移动四个不同的图像，如上图所示。而当他们碰到墙壁时，他们应该消失并从起点重新开始，一个接一个地沿着相同的方向重新开始。

问题2：

当移动时触摸其中任何一个时，它应该消失并且不应该继续循环仅针对该图像，或者应该进行另一个活动。请帮我解决这两个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:11:03.200

您可以使用 API 11 中提供的这些功能

```
((TextView)findViewById(R.id.textView)).setTranslationX(200);
((TextView)findViewById(R.id.textView)).setTranslationY(300); 
```

**更新** 试试这个代码示例代码。

```
 final TextView tv = (TextView)findViewById(R.id.textView);
    new Timer().schedule(new TimerTask() {

        @Override
        public void run() {
        MainActivity.this.runOnUiThread(new Runnable() {

            public void run() {
                tv.setTranslationX(tv.getTranslationX()+10);
                tv.setTranslationY(tv.getTranslationY()+10);
                tv.invalidate();

            }
        });

        }
    }, 1000 , 1000);
    tv.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "Clicked!", Toast.LENGTH_SHORT).show();

        }
    }); 
```

**更新**

实现您在图片中显示的内容。这是实现该功能的简要说明

*   为每个视图创建一个路径数组（点的二维数组）

    意见将旅行

*   根据需要为每个视图创建一个计时器，重复间隔为 100 毫秒或更短。

*   在这些计时器中，从该路径数组中获取一个点并将其传递给您的视图。

*   永远在该路径上循环意味着以循环方式。

*   设置`onClck()`该视图的侦听器。

*   在该侦听器中取消（）该视图的相应计时器并销毁该视图或将可见性设置为 GONE。

通过实现这一点，您可以轻松完成此任务。

# sharepoint-2010 - 是否可以通过 CAML 请求检索 SharePoint 列表

> ID：13625731
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:21:11.990
> 
> 标签：sharepoint-2010, caml, sharepoint-list, sharepoint-clientobject

任何人都可以帮助我使用客户端对象模型 (CSOM) 通过 CAML 请求检索 SharePoint**列表**（非列表项）。

我知道如何使用 CAML 查询获取列表项（我可以在 List 对象中使用 GetItems() 方法）：

```
public ListItemCollection GetItems(CamlQuery query_); 
```

我想对列表做同样的事情，但找不到方法，有可能吗？

我正在寻找这样的东西：

```
SP.Web.GetLists(CamlQuery query) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T08:31:51.623

// "ctx" 是客户端上下文的对象

```
ListCollection lists = web.Lists;                
ctx.Load(lists);
ctx.ExecuteQuery(); 
```

在对象“列表”中，您将获得所有列表名称。

# jquery - 无法隐藏或显示附加的 div

> ID：13625737
> 
> 赞同：0
> 
> 时间：2012-11-29T12:21:30.197
> 
> 标签：jquery

从较早的帖子（[此处](https://stackoverflow.com/questions/13618669/show-and-hide-divs-at-a-specific-time-interval-using-jquery-but-stop-the-last-di)）中获得此脚本

我对此进行了一些编辑，所以现在我得到了：

```
<div id="outer" style="display: none"></div>

$(document).ready(function() {
$("#outer").css("display","block");
var $divs = $("#outer > div").hide(),
    current = 0;

$divs.eq(0).show();
function loadContent() {
    for(var i=0; i<20; i++) {
        $("#outer").append("<div id='divs"+i+"'>test"+i+"</div>");
    }  
}
function showNext() {
    if (current < $divs.length - 1) {
        $divs.eq(current).delay(2000).fadeOut('fast', function() {
            current++;
            $divs.eq(current).fadeIn('fast');
            showNext();
        });
    }
}
loadContent();
showNext(); 
```

});​</p>

如果我只是将一些放入 HTML 中，那么显示和隐藏 div 的 jQuery 就可以工作。但不是当我将它们附加到我的函数中时。

[小提琴](http://jsfiddle.net/rZ2yF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:29:00.857

您需要在加载 div 后隐藏它们（通过调用`loadContent`），并`showNext`在它们隐藏后调用：

```
$(document).ready(function() {
    $("#outer").css("display","block");
    var current = 0;

    function loadContent() {
        for(var i=0; i<20; i++) {
            $("#outer").append("<div id='divs"+i+"'>test"+i+"</div>");
        }  
    }

    function showNext() {
        if (current < $divs.length - 1) {
            $divs.eq(current).delay(2000).fadeOut('fast', function() {
                current++;
                $divs.eq(current).fadeIn('fast');
                showNext();
            });
        }
    }
    loadContent();
    var $divs = $("#outer > div");
    $divs.hide();
    showNext();
}); 
```

这是一个演示：http: [//jsfiddle.net/rZ2yF/1/](http://jsfiddle.net/rZ2yF/1/)

# python - 通过python中的指针访问作为另一个结构成员的结构

> ID：13625738
> 
> 赞同：0
> 
> 时间：2012-11-29T12:21:32.567
> 
> 标签：python, pointers, structure, pass-by-reference, ctypes

我的结构如下

```
class DEVINFO(Structure):
       _fields_ = [("szDeviceName", c_char*MAX_PATH),                                           
                   ("pDevExtension", POINTER(DEVEXTENSION))] 
```

上面，DEVEXTENSION结构如下

```
class DEVEXTENSION(Structure):
            _fields_ = [("szProductName",c_char*MAX_PATH),
                        ("szManfName",c_char*MAX_PATH),
                        ("szSerialNumber",c_char*32)] 
```

我的问题是我将如何访问“DEVEXTENSION”结构的成员。

```
devInfo = DEVINFO()
devInfo.szDeviceName = "USB Flash 302"
print(devInfo.szDeviceName) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:24:47.410

从[ctypes 教程](http://python.net/crew/theller/ctypes/tutorial.html#pointers)：

> 指针实例有一个 contents 属性，它返回指针指向的对象

因此，`devInfo.pDevExtensions.contents.szProductName`例如，假设这`DEVINFO`将产生一个*实例*-对`DEVEXTENSION`我来说，它在这里并不明显（但我不熟悉 ctypes）。

另请注意，[PEP-8](http://www.python.org/dev/peps/pep-0008/)建议`CapWords`使用类名，并`CAPS`为常量保留。

# jfreechart - 如何使用 jfree 图表在条形图中的条形上显示自定义值？

> ID：13625740
> 
> 赞同：2
> 
> 时间：2012-11-29T12:21:50.093
> 
> 标签：jfreechart

通过使用 StandardCategoryItemLabelGenerator()，我能够在条形图上显示确切的范围轴值，现在我的问题是我不想显示范围轴值，而是想显示该条形的其他值我怎么能做到这一点？

```
for (String IDS : idMap.keySet()) {
    List<String> listValues = idMap.get(IDS);
    if(listValues != null && listValues.get(1) != null) {
       dataSet.setValue(Double.valueOf(listValues.get(1)), "", IDS);
    }
}
JFreeChart chart = ChartFactory.createBarChart3D("", "", "Time taken ", dataSet,PlotOrientation.VERTICAL, true, true, false);
chart.setTitle(new org.jfree.chart.title.TextTitle("Time Duration",new java.awt.Font("SansSerif", java.awt.Font.BOLD, 10)));
chart.getLegend().setItemFont(new java.awt.Font("SansSerif",0,7));
chart.removeLegend();
final CategoryPlot plot = chart.getCategoryPlot();
plot.setNoDataMessage("No data available");
final CategoryItemRenderer renderer = plot.getRenderer();
renderer.setItemLabelsVisible(true);
final BarRenderer r = (BarRenderer) renderer;
r.setMaximumBarWidth(0.05);
r.setBaseItemLabelGenerator(new StandardCategoryItemLabelGenerator());
r.setBaseItemLabelsVisible(true);
r.setSeriesItemLabelFont(0, new java.awt.Font("Times New Roman",Font.NORMAL,7));
r.setSeriesPositiveItemLabelPosition(0,     
                    new ItemLabelPosition(ItemLabelAnchor.OUTSIDE3, TextAnchor.BOTTOM_LEFT, TextAnchor.BOTTOM_LEFT, -Math.PI/2));
final ValueAxis rangeAxis = plot.getRangeAxis();
rangeAxis.setLabelFont(new java.awt.Font("SansSerif", java.awt.Font.BOLD, 8));
final CategoryAxis axis = plot.getDomainAxis();
axis.setLabel("ids");
axis.setLabelFont(new java.awt.Font("SansSerif", java.awt.Font.BOLD, 8));
axis.setCategoryLabelPositions(CategoryLabelPositions.createUpRotationLabelPositions(Math.PI / 8.0));
axis.setTickLabelFont(new java.awt.Font("SansSerif", java.awt.Font.BOLD, 6));
plot.setDomainGridlinesVisible(true);
plot.setRangeGridlinesVisible(true); 
```

通过使用上面的代码，我能够在条形图上显示精确的范围轴值，但我不希望范围轴值我需要在条形图上显示一些其他值 listValues.get(2) 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T13:42:49.870

`StandardCategoryItemLabelGenerator`为此使用 的实例`MessgeFormat`，默认为*ArgumentIndex* `{2}`。其他*ArgumentIndex*值在抽象父级中[定义](https://github.com/jfree/jfreechart/blob/a362a41d4d944f6be5d3ec2f93c32bc975e10c0b/src/main/java/org/jfree/chart/labels/AbstractCategoryItemLabelGenerator.java#L66)。例如，

```
renderer.setBaseItemLabelGenerator(
    new StandardCategoryItemLabelGenerator(
        "{0} {1} {2} {3}", NumberFormat.getInstance()));
renderer.setBaseItemLabelsVisible(true); 
```

您还可以覆盖`generateLabel()`以返回您想要的任何值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T14:50:58.857

```
renderer.setBaseItemLabelGenerator(
new StandardCategoryItemLabelGenerator()
 @Override
 public String generateLabel(CategoryDataset dataset, int row, int column) {
        return "Your Text" +row+","+column;
 }
); 
```

# javascript - RegEx：将文本拆分为单词保留换行符

> ID：13625741
> 
> 赞同：0
> 
> 时间：2012-11-29T12:21:51.630
> 
> 标签：javascript, regex

我有一个字符串：

`"This is the\nstring with\nline breaks\n"`

我需要得到：

`[This, is, the\n, string, with\n, line, breaks\n`]

当我使用 .split(/\s{1,}/) - \n 换行符消失。如何保存它们？

需要考虑多个空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:29:56.360

也许a`match`会给你你想要的

```
"This is the\nstring with\nline breaks\n".match( /([^\s]+\n*|\n+)/g );

// ["This", "is", "the\n", "string", "with\n", "line", "breaks\n"] 
```

`[^\s]+`表示尽可能多的非空格（一个或多个），
`\n*`表示尽可能多的新行（0 或更多），
`|`表示*OR*， `\n+`表示尽可能多的新行（一个或多个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:38:09.017

通过使拆分成为捕获组，它们将出现在结果数组中。然后你可以按摩：

```
 "This is the\nstring with\nline breaks\n".split(/(\s+)/); 
```

结果是 ：

```
["This", " ", "is", " ", "the", "\n", "string", " ", "with", "\n", "line", " ", 
 "breaks", "\n", ""] 
```

我将作为练习留下这个数组的操作将产生您请求的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:24:16.860

改用这个：

```
.split(/ +/); // (/ +/ to take multiple spaces into account.) 
```

因为：

```
"This is the\nstring with\nline breaks\n".split(' '); 
```

回报：

```
["This", "is", "the
string", "with
line", "breaks
"] 
```

您可能不会从字面上看到`"\n"`这些字符串，因为它们在控制台中被呈现为实际的换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:24:56.637

仅按空格分割

```
.split(" "); 
```

# c++ - 是否可以同时初始化两个需要彼此指针的类？

> ID：13625743
> 
> 赞同：1
> 
> 时间：2012-11-29T12:21:55.993
> 
> 标签：c++, class

我正在做一个蛇游戏。我有两个班，`snake`和`food`。当我调用`snake->move()`它时，它需要检查没有冲突，为此它需要知道`food`的位置是什么，因此需要一个指向`food`. `food`有一个函数可以将它移动到一个新的随机位置 ，`move->setNewPosition()`它需要知道 的位置，`snake`以便它在移动时不会与蛇发生碰撞。为此，它需要一个指向`snake`.

因此，对于这两个类，我需要提供一个指向另一个必须初始化的类的指针。但是要初始化另一个类，我需要初始化另一个类，依此类推。有什么方法可以同时初始化两个需要相互指针的类？

如果不是，那么构建我的程序以允许我检查其他类的坐标的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:25:24.447

如果我没有误解你，请创建`init`在游戏循环开始之前调用的函数：

```
void initSnake()
{
   auto snake = new Snake();
   auto food = new Food();   
   snake->setFood(food);
   food->setSnake(snake);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:27:32.057

您可以为它们定义一个基类，它具有以下方法：

```
virtual void setPosition(const int x, const int y)
virtual void getPosition(int &x, int &y) const 
```

Snake 也应该使用它们，如果需要，只需覆盖它们。`setPosition`现在，`getPosition`如果您将另一个对象作为带有 type 的参数，这两个类可以直接调用对方`Base`。

另一种方法是；在您的`main()`-function 或您定义蛇的任何地方：

```
int main()
{
    Snake* s = new Snake;
    Food* f = new Food;
    Snake->setLocation(0,0); // Wherever you want the snake to start from
} 
```

每当你创建一个新食物时，给它蛇的位置：`f->setRandomLocation(snake->getLocation())`参数将是坐标，而不是放置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:29:13.587

当他们的运动功能被调用时，他们只需要找到其他蛇和食物的位置的设施。在初始化时无需知道它们的存在！

因此，您可以拥有蛇集合和食物集合，并将对这些集合的引用传递给任何新创建的蛇和食物。只需先创建这些集合。

你可以通过另一个类来做到这一点，也许它也可以作为一个工厂。

```
class GameManager;

class Snake
{
    friend class GameManager;

    public:
        int getX() { return _x; }
        int getY() { return _y; }

        void setPosition(int x, y) { /* ... */ }

    private: 
        Snake(GameManager* manager, int x, int y) : _manager(manager), _x(x), _y(y) {}

        GameManager* _manager;
        int _x, _y;
};

class GameManager
{
    public: 
        const std::vector<Snake*>& Snakes() { return _snakes; }

        Snake* SpawnSnake(int x, int y) 
        {
            Snake* newSnake = new Snake(this, x, y);
            snakes.push_back(newSnake);
            return snake;
        }

    private:
        std::vector<Snake*> _snakes;
}; 
```

（只是一个例子。代码未经测试，看它是否真的编译。E&OE）

因为构造函数是私有的`GameManager`，所以确保所有创建的蛇都在蛇向量中找到。`Snake`每条蛇都可以调用`_manager.Snakes()`以获取包含游戏中所有其他蛇的向量，然后它可以单独查询它们的位置。这也很容易推广到支持食品。

与其他答案中建议的“构造初始化”模式相比，这具有很小的优势，因为它确保当您获得一个新`Snake`对象时，它实际上已经准备好使用......这个例子并不完全是 RAII，但它需要一个使其合理异常安全的最小努力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:27:17.500

一种选择是有一个`Manager`他们都向其发送请求的类，这将更有意义（但不能解决您的特定问题）。

不过，如果您有`class A`and `class B`，并且每个都需要另一个，您可以执行以下操作：

```
A *a = new A;
B *b = new B;
// check a and b to make sure they are not NULL
a->set_b(b);
b->set_a(a); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:30:20.377

嗯，不确定你的游戏是如何运作的，但我认为会有很多食物对象？

也许一个想法是创建一个`Collision`接受 Snake 玩家并在游戏中存储所有 Food 玩家的类。所以 Collision 构造函数可能看起来像这样

```
Collison(Snake &snake, Vector<Food*> &foods)
{

} 
```

Collision 类还将有一个碰撞更新循环，您在代码中的某处调用该循环。此循环将检查蛇对象是否与食物对象碰撞。您可以做任何您想做的事情。从`foods vector` 更改中删除食物食物位置，无论如何。

```
collison.UpdateCollisions() ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T12:45:05.637

我建议打破循环依赖，而不是把它锤进去：让两个移动函数都将环境（即它可以碰撞的事物的列表）作为参数。

# iphone - 如何在 iPhone 内部键盘上输入文本时移动 UITextview

> ID：13625744
> 
> 赞同：3
> 
> 时间：2012-11-29T12:22:02.643
> 
> 标签：iphone, keyboard, ios6, uitextview

我有一个`UITextView`子视图。我将根据**textViewDidChange**`UIView`方法中的文本更改 texview 高度。我的想法是当下面的文本视图高度进入键盘内部时，我看不到在文本视图中输入的文本。如何解决问题文本范围超过键盘。如何使输入的文本显示给用户。**`textview`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:24:45.770

您可以使用如下字体检查文本的大小：

```
[@"MYString" sizeWithFont:myFont]; 
```

知道了这一点，您可以将它与 textview 的大小进行比较，现在当您的文本更大时！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:31:21.420

接受这个`UITextView`，`UIScrollView`然后使用 contentSize 设置内容大小`UITextView`并滚动`UIScrollView`底部

设置内容大小如下..

```
float sizescrollview = yourTextView.frame.origin.y + yourTextView.frame.size.height + 20;
scrview.contentSize=CGSizeMake(320, sizescrollview); 
```

并像下面这样滚动`UIScrollView`键盘的上方..

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];
scrView.frame = CGRectMake(0, -150, 320, scrView.frame.size.height);
[UIView commitAnimations]; 
```

我希望这可以帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:25:32.507

当文本视图到达键盘时向上移动文本视图，或者当文本超过最大文本视图大小时降低字体大小。**

# android - 更新数据 Android

> ID：13625745
> 
> 赞同：1
> 
> 时间：2012-11-29T12:22:03.563
> 
> 标签：android, database, webserver, google-cloud-messaging

我想开发一个需要定期更新其数据的应用程序，为此我将添加一个管理员。我想为管理员创建一个网站，只有管理员会去那里更新数据，然后当有更新时，服务器会使用 GCM 向 android 应用程序发送通知，应用程序将同步并且数据将被更新。

现在因为我需要使用服务器，这意味着我的数据库将是 MySQL 对吗？

或者是否有另一种方法可以做同样的事情，但不用担心使用 MySQL 和 json？

我没有自己的服务器，我打算使用像 xamp 或 wamp 这样的本地服务器，而且我更习惯于使用 sqlite，如果有解决方案来解决 sqlite 这个问题，我会很高兴知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:30:48.943

您所说的应用程序可以通过使用 JSON 来实现。为此，您需要使用相关数据制作 api。

# java - 变量不起作用android

> ID：13625762
> 
> 赞同：1
> 
> 时间：2012-11-29T12:22:56.337
> 
> 标签：java, android, local-variables

我对变量 scoretemp 有疑问。它总是返回 0。在 if 条件下它正在工作。

```
for (final Score score2 : scores) {
  scoretemp = score2.getResult();
} 
```

但是当我试图在最后一行得到结果时。

```
TV2.setText(""+scoretemp); 
```

它总是无缘无故地为零。

代码：

```
BScore.setOnClickListener(new View.OnClickListener() {

  double scoretemp;

  public void onClick(View arg0) {
    BScore.setVisibility(View.GONE);
    sp.play(click, 1, 1, 0  , 0, 1);
    int scoreresult = totalscore;
    final RequestControllerObserver observer2 = new RequestControllerObserver() {
      public void requestControllerDidReceiveResponse(final RequestController requestController) {
        // get the scores from our controller
        final ScoresController scoresController = (ScoresController) requestController;
        final List<Score> scores = scoresController.getScores();
        if(scores!=null){
          for (final Score score2 : scores) {
            scoretemp = score2.getResult();
          }
          // we're done!
          dismissDialog(DIALOG_PROGRESS);
        }
      }
    public void requestControllerDidFail(final RequestController aRequestController, final Exception anException) {
      dismissDialog(DIALOG_PROGRESS);
      Toast.makeText(getApplicationContext(), "لا يوجد إتصال بالأنترنت أو خطأ في إستقبال البيانات", Toast.LENGTH_LONG).show();
}
  };
// set up a ScoresController with our observer
ScoresController scoresController2 = new ScoresController(observer2);
showDialog(DIALOG_PROGRESS);
scoresController2.setMode(mode);
scoresController2.loadRangeForUser(Session.getCurrentSession().getUser());
TV2.setText(""+scoretemp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:45:13.437

回调方法 requestControllerDidReceiveResponse 是异步调用的，所以它可以并且很可能会在 TV2.setText(""+scoretemp); 之后调用。叫做。

您可以在 requestControllerDidReceiveResponse 方法中进行更新（在 GUI 线程上调用），或者在值发生更改时触发某种 propertychangedevent，然后由 GUI 线程处理。

# linux - 是否可以连接到多个服务器并在日志中搜索文本？

> ID：13625771
> 
> 赞同：0
> 
> 时间：2012-11-29T12:23:37.363
> 
> 标签：linux

我有 8 个 Web 服务器和 8 个应用服务器，我需要在每个服务器上查找特定的文本字符串。

通常，我会通过 putty 连接到服务器并在下面键入以搜索该文本：

```
grep "XMemcached network layout exception" /logs/handle1.log 
```

无论如何我可以通过脚本自动执行此操作，因此它会自动连接到这些服务器并搜索这些单词？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:30:25.367

登录其中一台服务器并执行类似的操作

`for host in web1 web2 web3 [...] app1 app2 app3 [...]; do ssh $host grep "XMemcached network layout exception" /logs/handle1.log | sed "s/^/$host: /"; done`

这只是一个基本的一次性脚本；如果您发现自己反复做这种事情，请考虑安装[`clusterssh`](http://www.debian-administration.org/articles/551).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:42:45.497

有可能的。我通过 ssh 执行此类任务。

设置没有密码但有证书的 ssh 身份验证。在您启动 grep 命令的（监控）计算机上，您需要使用`ssh-keygen`. `~/.ssh/`这将在您的文件夹中为您创建一个密钥对。一个私人的，一个秘密的一个另一个公共的。您需要将公钥复制到要搜索日志的每台目标计算机。您可以将文件复制`scp`到目标计算机。然后登录到目标计算机并将公钥文件的内容附加到文件中`~/.ssh/authorized_keys`。

现在您应该能够从监控计算机登录到目标计算机而无需密码。请通过尝试登录来验证这一点`ssh <target computer>`。

如果这可行，您可以`cat`通过 ssh 连接将日志文件连接到本地 grep 命令，如下所示：

```
echo `ssh <user>@<target computer> "cat <log file>"` | grep <search term> 
```

这只是一种解决方案，它非常容易且快速地建立起来。使用此解决方案，您始终停留在本地监控计算机上，并且只检索您想要搜索的日志文件。一个更舒适的解决方案可能是编写一个小 bash 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:26:58.397

我个人喜欢 RabbitMQ 将盒子连接在一起来完成这样的事情。

然后，使用[http://sphinxsearch.com/](http://sphinxsearch.com/)在搜索方面提供帮助是有帮助的。

就个人而言，我会通过rabbit将所有日志传输到中央搜索服务器。如果搜索流量很大，可能会使用几个框。

# vb.net - Grid.Children.Add 没有显示

> ID：13625772
> 
> 赞同：0
> 
> 时间：2012-11-29T12:23:38.903
> 
> 标签：vb.net, silverlight-5.0

我正在尝试将单词 ONE、TWO、THREE 添加到我的 3 x 3 LayoutRoot Grid 从左上角到右下角的对角线。

但我没有在屏幕上看到任何东西。我在 XAML 中打开了 Gridlines，所以我可以看到 3 x 3 Grid，但看不到单词 ONE、TWO、THREE。

我究竟做错了什么？

代码：

```
Partial Public Class MainPage
Inherits UserControl

Dim textblock1 As TextBlock
Dim textblock2 As TextBlock
Dim textblock3 As TextBlock

Public Sub New()
    InitializeComponent()
End Sub

Public Sub Test()

    textblock1.Text = "One"
    textblock2.Text = "Two"
    textblock3.Text = "Three"

    Grid.SetRow(textblock1, 0)
    Grid.SetColumn(textblock1, 0)
    LayoutRoot.Children.Add(textblock1)

    Grid.SetRow(textblock2, 1)
    Grid.SetColumn(textblock2, 1)
    LayoutRoot.Children.Add(textblock2)

    Grid.SetRow(textblock3, 2)
    Grid.SetColumn(textblock3, 2)
    LayoutRoot.Children.Add(textblock3)
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:13:24.060

您需要初始化文本块，最好在您的`Test()`方法中，**并且**您需要*调用* `Test()`，例如从`New()`：

```
Public Sub New()
    InitializeComponent()
    Test()
End Sub

Public Sub Test()

    textblock1 = New TextBlock
    textblock2 = New TextBlock
    textblock3 = New TextBlock
    ... 
```

# c++ - 用平凡的ctor对派生类进行统一初始化

> ID：13625774
> 
> 赞同：8
> 
> 时间：2012-11-29T12:23:48.337
> 
> 标签：c++, inheritance, c++11, uniform-initialization, list-initialization

我试图用 c++11 统一初始化来解决一些极端情况，但我不知道为什么会这样：

```
struct Base
{
    int x,y,z;
};

struct Derived : Base
{
};
static_assert (std::is_trivial<Base>::value, "Base must be trivial");
static_assert (std::is_trivial<Derived>::value, "Derived must be trivial");

Base b{1, 2, 3};           // 1) This compiles fine
Derived d{10, 20, 30};     // 2) This fails 
```

标记为**2**的行失败，并带有 和 的“**没有匹配的 Derived 初始化构造函数”**消息。`clang 3.1``g++ 4.7`

我不明白为什么在 Derived 的情况下，它试图调用构造函数而不执行（我不知道如何调用它，也许是**聚合初始化**？）就像第 1 行的情况一样）。

以下推理中的某些内容是错误的？：

A）微不足道的保证它可以被静态初始化

B）要静态初始化，不需要在运行时执行任何代码，因此不需要构造函数调用 `A+B`=>为什么它试图调用它知道微不足道的类型的构造函数？

我很困惑......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T12:41:37.400

琐碎与如何初始化某些东西无关。重要的是您的`Derived`类型是否为*aggregate*，事实并非如此：

`§8.5.1 [dcl.init.aggr] p1`

> *聚合*是一个数组或一个类（第 9 条），没有用户提供的构造函数（12.1），没有用于非静态数据成员*的大括号或等号初始化器*（9.2），没有私有或受保护的非静态数据成员（第 11 条），**没有基类（第 10 条）**，也没有虚函数（10.3）。

聚合初始化只能初始化聚合，所以list-initialization（统一初始化的官方名称）只能尝试寻找合适的构造函数。

您可以做的是提供一个`constexpr`转发到基类的构造函数，并添加一个`default`ed 默认构造函数：

```
struct Derived : Base{
    Derived() = default;
    constexpr Derived(int a, int b, int c) : Base{a, b, c}{}
}; 
```

# javascript - 无法在jquery中加载json数据

> ID：13625776
> 
> 赞同：3
> 
> 时间：2012-11-29T12:23:49.100
> 
> 标签：javascript, ajax, json, jquery

我正在尝试从 twitter 获取 json 数据。[http://api.twitter.com/1/statuses/public_timeline.json](http://api.twitter.com/1/statuses/public_timeline.json) 这是我的代码

```
<html>
<head>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
    <script>
        $(document).ready(function(){

            $("button").click(function(){
                $.getJSON("http://api.twitter.com/1/statuses/public_timeline.json",function(result){
                    $.each(result, function(i, field){
                        $("div").append(field + " ");
                    });
                });
            });
        });
    </script>
</head>
<body>

<button>Get JSON data</button>
<div></div>

</body>
</html> 
```

它来自[http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_getjson](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_getjson) 但它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:29:52.357

您在 JavaScript中以[同源策略运行。](https://developer.mozilla.org/en/docs/Same_origin_policy_for_JavaScript)这基本上是说，您无法访问来自不同域的资源（在您的情况下，另一个域是 twitter.com）。

一种解决方案是使用 JSONP。twitter [API 支持这一点](https://dev.twitter.com/docs/api/1/get/search)。在您的情况下，您可以使用 jQuery 运行 JSONP 请求，如下所示：

```
$.ajax({
  url: "http://api.twitter.com/1/statuses/public_timeline.json",
  cache: false,
  dataType: 'jsonp',
  success: function( result ){
    $.each(result, function(i, field){
                        $("div").append(field + " ");
                    });
  }
}); 
```

^(此外，w3schools 也不是可靠的信息来源。最好使用[Mozilla Developer Network](https://developer.mozilla.org/en-US/)之类的东西。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:29:43.740

查看您尝试加载的 json 文档。当我尝试访问它时，它返回以下错误：

```
{"errors":[{"message":"Sorry, that page does not exist","code":34}]} 
```

在您担心代码片段是否正常工作之前，我会尝试用对 twitter 的有效 api 调用替换 url。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:29:55.973

`Cross-Origin`由于资源共享，您尝试从其他域获取文档并且请求的 URL 阻止了您的请求。你可以在这里阅读：[http ://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)

您可以将 JSONP 与 jQuery 一起使用，这应该允许您完成请求，但是您请求的页面会收到 404 错误，因此无论如何您可能对结果无能为力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T06:33:57.037

您可以使用 $.ajax() jquery 方法从其他域访问 json 数据。请参阅下面的代码示例

```
 $.ajax({

   url : " // twitter api url",
   dataType : "JSON",
   cache : false,
   success : function(success)
    {
     $.each(success, function(index,value) {$("div").append(value + ""); })
    }

   error : function() { //Statements for handling ajax errors }

   }); 
```

您在该 ajax 请求中使用的 url 返回一个包含错误的 json 数组

```
{"errors": [{"message": "The Twitter REST API v1 is no longer active. Please       
migrate to API v1.1\. https://dev.twitter.com/docs/api/1.1/overview.", "code": 68}]} 
```

您需要在处理请求之前迁移到 API v1.1，将 twitter api url 替换为 API v1.1 中提供的新 json url

# php - 如何在 PHP 中将单位与数字（如 30px = 30 + "px"）分开？

> ID：13625778
> 
> 赞同：0
> 
> 时间：2012-11-29T12:23:51.667
> 
> 标签：php

我正在寻找一种将数字与其单位分开的方法——比如 400px (400 + px)、30em (30 + em)、5% (5 + %) 等。

这可能很简单，但我在 PHP 手册中找不到任何预制函数来做到这一点。

假设我有这个：

```
$variable = "50px";
// and this is what I need:
$result = array(50, 'px'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:28:18.157

试试这个

```
<?php
$str = '400px';
$arr = preg_split('/(?<=[0-9])(?=[a-z]+)/i',$str);                                                               
print_r($arr); 
```

比你会得到像

```
Array
(
    [0] => 400
    [1] => px
) 
```

现在你可以得到

```
 echo  $arr[0]; //for 400
  echo $arr[1];  // for px 
```

[**键盘**](http://codepad.org/1WhmfOvA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:35:40.857

我更喜欢这种方法：

```
$arr[0] = intval($str);   
$arr[1] = substr($str, strlen($arr[0])); 
```

# asp.net-mvc-3 - 使用 EF 在代替触发器中设置 uniq 编号

> ID：13625779
> 
> 赞同：1
> 
> 时间：2012-11-29T12:24:04.513
> 
> 标签：asp.net-mvc-3, entity-framework, tsql, triggers

我正在使用带有数据库优先方法的 ASP.NET MVC3 和实体框架。我有一个带有 id(key)、数字和描述列的表。我需要在插入项目后生成一个数字。我在生成我需要的数字的地方创建而不是触发器（这取决于数据库中已经存在的最后一个数字）。问题是：当用户同时插入项目时，两种情况下的数字是相同的。因此，对于两个插入的项目，触发器都会触发，并且在触发器内部，select 返回相同的最后一个已存在的项目数。

解决此类问题的最佳做法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:30:02.820

我相信这会对你有所帮助。

[http://www.sqlteam.com/article/custom-auto-generated-sequences-with-sql-server](http://www.sqlteam.com/article/custom-auto-generated-sequences-with-sql-server)

此外，如果您使用的是 SQL Server 2012，还有一个称为 SQL 序列的新功能。这是 Oracle 数据库长期以来所拥有的东西。

如果您需要这些数字而没有任何间隙，我建议您锁定表（防止写入），查询它，使用 max(number) 更新行并解锁它。

# php - 处理文件请求和可用性

> ID：13625780
> 
> 赞同：1
> 
> 时间：2012-11-29T12:24:09.547
> 
> 标签：php, javascript, ajax, file, jquery

我见过许多网站使用的文件保护方法，例如 youtube、文件托管网站、音乐网站、facebook.. 他们正在使用特殊的方式来控制文件的可用性....

链接看起来像这样，

```
http://www.mysite.com/music/audio.mp3?Expires=1354180089&Key=APKAIKAIRXBA2H7FXITA 
```

**到期后**，文件不再可用，因此想要使用该文件的用户必须使用新的到期代码再次请求它......这将避免在其他站点非法使用该文件并保护带宽......

使用这种方式时，文件不会像**http://www.mysite.com/music/audio.mp3那样永远​​可用**

我到处搜索教程，但我找不到任何......帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:30:43.603

在这种情况下，audio.mp3 不是一个真正的 mp3 文件，它是一个脚本，它检查会话过期时间，如果它有效，则生成正确的标题，并打印出位于服务器某处的真实 mp3 文件和只有脚本可以访问它。像这样的伪代码：

```
 if (session valid) {
       //set the right header;
       //print out the mp3 file;
  } else {
       //text/html header;
       //print the message about session being invalid;
  } 
```

# asp.net - 如果方法参数是字符串或整数，则 ASP.NET WebAPI 抛出 404

> ID：13625785
> 
> 赞同：7
> 
> 时间：2012-11-29T12:24:16.847
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我对 ASP.NET MVC4 WebAPI 做了一个非常简单的测试，发现了一些有趣的问题：

当一个方法采用复杂类型时，它会起作用，但是当它采用 string 或 int 时，它会抛出 404，如给出的屏幕截图：“AddProduct”有效，但始终找不到“Test”和“Test1”。

我应该如何正确调用该方法？

![Web API 代码](../Images/43e8ab8d7862ec0dc9b955c6b520cdfe.png)

![调用测试方法时出现 404](../Images/cb478803f0ed61b548f631b1d644af02.png)

![我的路线配置](../Images/482747a084bfda4bf516b86ace5a04a9.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-26T19:13:25.060

您需要使用 [FromBody] 属性来装饰您的字符串或 int 参数。

> [HttpPost] public string Test([FromBody]string username)
> 
> [HttpPost] public int Test1([FromBody]int value)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T14:45:47.680

尝试这个：

该网站接受“[FormBody]”的值，因此您应该由“={0}”发布（{0} 被您的字符串数据替换）

```
$.ajax({
    url: "api/values",
    data: "='hello world'",
    dataType: "text",
    type: "POST",
    success: function (data) {
        $("#result").val(data);
    },
    fail: function (data) {
        alert(data);
    }
}); 
```

另请参阅此答案： [POST a string to Web API controller in ASP.NET 4.5 and VS 2012 RC](https://stackoverflow.com/questions/11662064/post-a-string-to-web-api-controller-in-asp-net-4-5-and-vs-2012-rc)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T14:46:33.713

你有没有尝试过，

```
$.ajax({
  url : "/api/product/test",
  data : { username : "edi" },
  dataType : "json",
  type : "POST",
  success : function(res){ console.log(res); },
  error : function(req, stat, err){ console.log(stat + ": " + err); }
}); 
```

现在它失败了，因为您已将整个 json 对象（在 jquery ajax 方法中）用引号括起来。

不带引号试试，让我知道！

还，

在测试字符串用户名和 int 值等单个变量时，请注意 WEB API 会期望它完全一样。

这家伙，

```
[HttpPost]
public string Test1(int value) { ... } 
```

将寻找与此 url 签名匹配的帖子（我使用 HTTPIE）...

$ http POST [http://yourwebsite.com/api/test1](http://yourwebsite.com/api/test1)值=1

其中“4”是该 Test1 方法中变量“value”的值。

更多关于 HTTPIE 的信息：[Scott Hanselman 关于安装 HTTPIE](http://www.hanselman.com/blog/InstallingHTTPIEHTTPForHumansOnWindowsGreatForASPNETWebAPIAndRESTfulJSONServices.aspx)

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-09T07:05:02.867

我为此搜索了将近一天，因为我希望我的数据是 JSON，所以假设您需要在这里发布一个值：

INT：

```
$.post('/api/mywebmethod', { "": 10 }) 
```

细绳

```
$.post('api/mywebmethod', { "": "10" }); 
```

控制器

```
[HttpPost]
public IHttpActionResult MyWebMethod([FromBody]int id)
{
//do work
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-09T07:14:22.900

使用`Route`

```
[RoutePrefix("api/Product")]
public class ProductController:ApiController
{
[Route("Add"),HttpPost]
public string AddProduct(Product productModel)

[Route("Test"),HttpPost]
public string Test(string userName){}
} 
```

**调用：** localhost:xx//api/product/Add

# c# - MapPolyline 未绘制

> ID：13625797
> 
> 赞同：3
> 
> 时间：2012-11-29T12:25:02.803
> 
> 标签：c#, bing-maps, windows-phone-8

我正在尝试在我的地图中使用 MapPolyLine 来显示实时路线，希望这次它会移动/[缩放](https://stackoverflow.com/questions/13607184/transform-path-polyline-corresponding-to-map-zoom-move-action)。问题是地图上没有显示这条线，我找不到任何编程错误：

C＃

```
MapLayer pathLayer;

//Constructor
 pathLayer = new MapLayer();
 MapPolyline line = new MapPolyline();
 line.StrokeColor = Colors.Red;
 line.StrokeThickness = 10;
 //line.Path.Add(several points); Tested, no effect
 MapOverlay overlay = new MapOverlay();
 overlay.Content = line;
 //overlay.GeoCoordinate = new GeoCoordinate(0,0); Tested, no effect
 //overlay.PositionOrigin = new Point(0.0, 1.0); Tested, no effect
 pathLayer.Add(overlay);
 MyMap.Layers.Add(pathLayer);

void geolocator_PositionChanged(Geolocator sender, PositionChangedEventArgs args)
{
  MapPolyline line = pathLayer.First(TrackPath).Content as MapPolyline;
  line.Path.Add(args.Position.Coordinate); // Checked values, line.Path adds them correctly
} 
```

编辑：新信息。模拟器在尝试使用 XAML 添加它时显示错误，并且模拟器在地图顶部显示类的名称作为图形故障：

![顶部是模拟器错误，右侧是 XAML](../Images/f606ff965a211b7a37e54e116d40f68b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T21:25:35.137

`MapPolylines`并且`MapPolygons`应该添加到`MapElements`集合中......而不是 a`MapLayer`或 a `MapOverlay`。

您应该能够使此示例为您工作。

```
 MapPolyline line = new MapPolyline();
        line.StrokeColor = Colors.Red;
        line.StrokeThickness = 10;
        line.Path.Add(new GeoCoordinate(47.6602, -122.098358));
        line.Path.Add(new GeoCoordinate(47.561482, -122.071544));
        MyMap.MapElements.Add(line); 
```

在您的 GeoCoord 观察器中，您必须从地图`MapElements`集合中获取线，并将新位置添加到线的路径中，而不是像我一样预先定义。这应该是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T16:19:28.740

在 Windows Phone 8.1 中尝试以这种方式添加点。“punkty”是我的收藏。

```
 List<BasicGeoposition> PosList = new List<BasicGeoposition>();
  foreach (var item in punkty)
  {
    PosList.Add(new BasicGeoposition()
    {
      Latitude = item.Position.Latitude,
      Longitude = item.Position.Longitude
    });
  }

  //Example of one point
  //PosList.Add(new BasicGeoposition()
  //{
  //  Latitude = 52.46479093,
  //  Longitude = 16.91743341
  //});

  MapPolyline line = new MapPolyline();
  line.StrokeColor = Colors.Red;
  line.StrokeThickness = 5;
  line.Path = new Geopath(PosList);

  myMap.MapElements.Add(line); 
```

# image - ImageMagick 和精灵表

> ID：13625798
> 
> 赞同：3
> 
> 时间：2012-11-29T12:25:03.897
> 
> 标签：image, command-line, imagemagick

我正在编写一个生成精灵表的小脚本。我有 6 个精灵表，我需要重新组织它们并将它们的内容（一旦订购）放在一个唯一的文件中。

我顺理成章地选择使用 ImageMagick。但在这里我被困住了。

这是我到目前为止所拥有的：

```
 convert '%d.png[0-5]' \( -crop 456x912+0+0 -crop 3x6+0+0@ +append \) -append  test.png 
```

这个命令行需要我的 6 个文件（0.png 到 5.png）裁剪它们，并将它们分成 18 个精灵。拆分后，18 个精灵水平对齐，然后与前 18 个精灵垂直对齐。

问题是这个命令似乎只水平对齐它们。test.png 不是由 18x6 的 sprite 组成，而是由 108x1 的 sprite 组成。

知道如何在一个命令中执行此操作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T00:51:41.177

您可以为此尝试另一种 imagemagick 工具“蒙太奇”。

```
$ for i in `seq 1 18 `; do convert -background none -fill black -size 32x32 -pointsize 14 caption:"$i" $i.png; done

$ montage `ls ?.png` `ls ??.png` -tile 6x3 -geometry 32x32 tile.jpg 
```

![结果](../Images/8e26f1ee868b64bb8c2c5427c035db46.png)

# c# - 暂停/恢复循环？

> ID：13625803
> 
> 赞同：2
> 
> 时间：2012-11-29T12:25:31.010
> 
> 标签：c#, multithreading

我有一个贯穿 500.000ish 列表的 for 循环。对于其中的每一个，它都在排队一个 SmartThreadPool 作业。

`lines.Length`下面包含 500.000ish 项目。

我的问题是我在一次将它们全部排队时遇到内存问题。所以我虽然写了一个逻辑来防止这种情况：

```
int activeThreads = _smartThreadPool2.ActiveThreads;
if (activeThreads < maxThreads) 
{
    int iia = 0;
    for (int i = 0; i < lines.Length; i++)
    {
        if (doNotUseAdditive.Checked == true)
        {
            foreach (string engine in _checkedEngines) // Grab selected engines
            {
                query = lines[i];

                _smartThreadPool2.QueueWorkItem(
                new Amib.Threading.Func<string, string, int, int, int>(scrape),
                query, engine, iia, useProxies);

                iia++;
            }
        }
    }
}
else
{
    // Wait
    wait.WaitOne();
} 
```

问题是我无法在我的 for 循环中运行该 if 语句，因为当我回到它时，它不会记住它在循环中的位置。

我正在使用：

```
ManualResetEvent wait = new ManualResetEvent(false);  //global variable 
```

到“暂停/恢复”

我需要在使用 X 线程后以某种方式暂停循环，然后当线程可用时返回并继续循环。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:36:05.643

我认为在单独的线程中处理列表中的每个项目并不是一个好主意。即使使用自定义线程池也很容易出错（你的例子证明了我的观点）。

首先，您应该正确确定工作线程的数量。看来您正在处理计算密集型操作（所谓的 CPU 绑定操作），您应该使用工作线程数等于逻辑处理器数。

您可以使用[Parallel LINQ](http://msdn.microsoft.com/ru-ru/library/dd460688.aspx)将所有工作集拆分为适当数量的块并并行处理这些块。

Joe Albahari 有一系列关于这个主题的精彩文章：[C# 中的线程。第 5 部分。并行编程。](http://www.albahari.com/threading/part5.aspx)

这是使用 PLINQ 的伪代码：

```
lines
  .AsParallel()
  .WithDegreeOfParallelism(YourNumberOfProcessors)
  .Select(e => ProcessYourData(e)); 
```

# sql - 用 SQL 中另一个表中的列更新表

> ID：13625805
> 
> 赞同：4
> 
> 时间：2012-11-29T12:25:32.760
> 
> 标签：sql, sql-server

我需要根据从以下两个表中提取的数据创建一个新表：

第一张表：

```
Var     cur_number
-------------------
 A        10
 B         8 
```

第二张表：

```
Var    new_number
-------------------
 A          2
 A         11
 B          4
 B          6 
```

新表应包含“Var”列和“Number”列，其中每个变量将有一行带有其 cur_number，其余行将包含来自第二个表的 new_number 列的数字，其中 new_number <当前编号。例如，在上面显示的示例中，对于 A，将有一行包含 10（其 cur_number）和一行包含“2”（因为 2<10，但是 11>10）。

在我的示例中，新表将是：

```
Var         Number
 A            10
 A            2
 B            8
 B            4
 B            6 
```

数据库非常大，运行时间很关键，所以我不能在两个表上使用 UNION ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:05:43.377

此脚本假定 table1 中每个“Var”值只有一条记录。

--从table1中全部插入

```
insert into newtable (var,number)
select var,cur_number from table1 t1 
```

--insert from table2 where new_number < cur_number

```
insert into newtable (var,number)
select t2.var, t2.new_number 
from table2 t2
inner join table1 t1 on t1.var = t2.var and t2.new_number < t1.cur_number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:38:17.803

~~试试这个：~~

 ~~```
SELECT var, cur_number
FROM FirstTable
UNION
SELECT t2.var, t2.new_number
FROM Firsttable t1
INNER JOIN SecondTable t2 ON t2.new_number < t1.cur_number; 
```~~  ~~**更新：**如果您使用的是 SQL Server 2008 或更高版本，则可以使用[**`MERGE`**](http://technet.microsoft.com/en-us/library/bb510625%28v=sql.100%29.aspx)将两个表合并为一个，如下所示：

```
MERGE INTO FirstTable AS TGT
USING SecondTable AS SRC
  ON  SRC.new_number >= TGT.cur_number
WHEN NOT MATCHED THEN
  INSERT (var, cur_number)
  VALUES (SRC.var, SRC.new_number); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/c1be6/1)

这会将两个表的值合并到第一个表中。第一个表将包含：

```
VAR    CUR_NUMBER
A          10
B          8
A          2
B          4
B          6 
```

**请注意：**使用时`MERGE`：

*   您必须用分号终止`MERGE`语句，这是强制性的。
*   你不能`INSERT`在里面，`WHEN MATCHED`这就是为什么我`>=`在`WHEN NOT MATCHED`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:45:42.230

如果您知道这两个表中没有重复值，那么您可以使用`UNION ALL`而不是`UNION`

```
select * from table1 t1
UNION ALL
select* from table2 t2
where t2.new_number < t1.cur_number 
```

通过重复值，我的意思是这样的：

```
table1:

var           cur_number
A                8

table2:

var           new_number
A                8 
```

不同之处在于`UNION ALL`它比使用. 如果您有重复，这是我的经验中最好的。`UNION``UNION``SELECT DISTINCT``UNION`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:34:00.790

为什么不使用`Union`？* [SQLFIDDLE](http://sqlfiddle.com/#!2/1c6f0/13)

```
select * from first
union 
select s.var,s.new_number from second s
join first f
on s.var = f.var
join (
select f.var, max(f.cur_number) maxn
from first f
group by f.var) as t
on t.var = s.var
where s.new_number < t.maxn
order by var asc
; 
```

结果

```
VAR     CUR_NUMBER
A        10
B        8
A        2
B        4
B        6 
```~~

# flash - 将更改事件添加到自定义 MXML 组件

> ID：13625806
> 
> 赞同：1
> 
> 时间：2012-11-29T12:25:33.663
> 
> 标签：flash, events, flash-builder, mxml, custom-component

我正在 Flash Builder 4.5 中构建一个 MXML 项目

我有一个包含 TextInput 字段的自定义 MXML 组件。我希望自定义组件具有触发主应用程序中的功能的更改事件。

我搜索了这个网站，发现很多帖子与我想要的很接近，但我无法准确找到我需要的东西，我现在很困惑。

我创建了一个测试项目来尝试解决这个问题。目前，它似乎触发了一次事件然后停止。请看一下，让我知道我哪里出错了。非常感谢。

**自定义组件.mxml**

```
 <?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
           width="40" height="20"> 
    <mx:Script>
    <![CDATA[

        [Bindable]
        public var value:Number;

        protected function inputBox_clickHandler(event:KeyboardEvent):void
        {
            if (event.keyCode == 38 ) {
                keyUp();
            }
            if (event.keyCode == 40 ) {
                keyDown();
            }
        }
        protected function keyUp():void
        {
            value = value++;
            dispatchEvent(new Event('change'))
        }
        protected function keyDown():void
        {
            value = value--;
            dispatchEvent(new Event('change'))
        }
    ]]> 
</mx:Script>
<mx:Metadata>
    [Event(name="change", type="flash.events.Event")]
</mx:Metadata>

<mx:TextInput id="inputBox" x="0" y="0" width="40" height="20"
              text="{value}"
              keyDown="inputBox_clickHandler(event)"
              change="dispatchEvent(new Event('change'))" 
              />
 </mx:Canvas> 
```

**主.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
            xmlns:CustomComponents="CustomComponents.*"
            minWidth="955" minHeight="600" layout="absolute">
<mx:Script>

    <![CDATA[

        private function changeTestLabel():void 
        {
            testLabel.text = String(myComponent.value);
        }

    ]]> 

</mx:Script>
<CustomComponents:customComponent x="180" y="183"
    id="myComponent" value="0"
    change="changeTestLabel()">
</CustomComponents:customComponent>
<mx:Label id="testLabel" x="165" y="206" text="Test label"/>

</mx:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:26:40.947

我已经找到了解决方案...

线索是它在第一次进行更改时起作用，将值更改为默认的“0”。问题是 var 值是 Number 类型，而 inputBox.text 是 String 类型。

因此，我添加了以下功能：

```
 protected function textChange():void
  {
   value = Number(inputBox.text);
   dispatchEvent(new Event('change'))
  } 
```

我还将 change="dispatchEvent(new Event('change'))" 属性更改为

```
valueCommit="textChange()" 
```

......这解决了它。

感谢所有不厌其烦地看这个的人。

# data-recovery - 从加密的 btrieve 文件中恢复数据

> ID：13625807
> 
> 赞同：0
> 
> 时间：2012-11-29T12:25:38.967
> 
> 标签：data-recovery, encryption, btrieve

我有一个简单的问题，但对我来说是个大问题。

为了迁移目的，我需要恢复加密 btrieve 文件中的数据，但我无法访问记录结构。

有人知道这种技术吗？还是开源程序？

感谢您提供任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:10:45.047

“加密”是指它有一个所有者名称，还是说当你在文本编辑器中打开它时，它看起来很奇怪？

Btrieve 数据文件需要 Btrieve / Pervasive PSQL 引擎才能被读取。一旦你有了引擎，你就可以打开它并阅读它。您仍然需要知道记录布局（或猜测）才能从中提取有意义的数据。Btrieve 文件不存储字段元数据，因此任何 Btrieve 工具只会将记录视为字节集合。

如果您知道记录结构，您可以使用 DDF Builder 或 Pervasive Control Center 创建表定义，然后使用 ODBC（或 JDBC、ADO.NET、PDAC、ActiveX 或 OLEDB）访问表并使用您的最喜欢的工具。

# iphone - iphone safari 中的部分黑色背景

> ID：13625808
> 
> 赞同：1
> 
> 时间：2012-11-29T12:25:40.493
> 
> 标签：iphone, css, safari, background-color

几天前，我意识到我的主页`www.blog-it-solutions.de`无法在 iPhone Safari 中正确显示。

这是它的外观：

![iPhone Safari 屏幕](../Images/b1d0109ad44984f2e318b43d46faf74f.png)

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:38:03.477

也许它是页面某处的png，我在我的网站上遇到了同样的问题，我通过将png转换为jpeg来解决它并且它有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:01:07.733

您可以：

1.  将文件重新保存为其他图像文件（JPEG、GIF）
2.  如果是渐变图片，那么可以使用[CSS3 Gradient](http://www.colorzilla.com/gradient-editor/)来实现效果。

# html - 在ios中将PDF转换为HTML？

> ID：13625811
> 
> 赞同：0
> 
> 时间：2012-11-29T12:25:46.923
> 
> 标签：html, objective-c, ios, pdf

***待办事项***：将 pdf 文件转换为 HTML 文件

例如：下面链接中的 pdf 文件

[http://www.inkwelleditorial.com/pdfSample.pdf](http://www.inkwelleditorial.com/pdfSample.pdf)

应转换为 HTML 文件。

***研究***：我用谷歌搜索并发现了几种将 HTML 转换为 PDF 的方法，例如

1.  [使用 Cocoa-Touch 在 iOS 中将 html 文件转换为 PDF 文档](https://stackoverflow.com/questions/6316192/convert-html-file-to-pdf-document-in-ios-using-cocoa-touch)
2.  [使用 iOS 创建 PDF](http://spitzkoff.com/craig/?p=160)
3.  [生成 PDF 内容](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html)

但无法获得任何反之亦然的方法，即将 pdf 转换为 HTML。

目标 C 中是否有任何库可用于上述目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:32:52.553

抱歉，我认为没有一种可靠的方法来保持格式（也没有获取所有文本。）

您最好使用 pspdfkit 显示和搜索 pdf

# java - JVisualVM 无 法使用 --openpid 参数连接到进程

> ID：13625812
> 
> 赞同：6
> 
> 时间：2012-11-29T12:25:53.163
> 
> 标签：java, jconsole, jvisualvm, java-service-wrapper, procrun

我有一个作为 win 服务运行的应用程序（使用[Apache-Procrun](http://commons.apache.org/daemon/procrun.html)）。我想用 JVisualVM 监控那个应用程序。我使用命令行参数`--openpid <PID>`没有成功，具有讽刺意味的是，旧的 JConsole 设法连接到该应用程序。

![JVisualVM 与 JConsole 0:1](../Images/76d96d2f7bd70d62a15b685b4697b968.png)

[我还检查了 JVisualVM-故障排除指南](http://visualvm.java.net/troubleshooting.html)`%TMP%\hsperfdata_username`中描述的 -Directory 的所有问题。一切都很好。

如何让 JVisualVM 监控我的应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T12:30:52.477

JVisualVM 无​​法使用该参数连接到 win 服务`--openpid <PID>`！[由于一个Bug](http://java.net/jira/browse/VISUALVM-537?focusedCommentId=351488&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#action_351488)，旧的 JConsole 只能在 WinXP 中使用。另一种方法是为服务指定一个 JMX 代理。

此 VM 参数必须传递给 prunsrv.exe

```
-Dcom.sun.management.jmxremote.port=3333 \
-Dcom.sun.management.jmxremote.ssl=false \
-Dcom.sun.management.jmxremote.authenticate=false \ 
```

有关更多详细信息，请查看：[Connecting to JMX Agents Explicitly](http://visualvm.java.net/jmx_connections.html)

# dynamics-crm-2011 - 功能区的 ToolTipTitle 和 ToolTipDescription 中的换行

> ID：13625814
> 
> 赞同：2
> 
> 时间：2012-11-29T12:25:59.250
> 
> 标签：dynamics-crm-2011, dynamics-crm, ribbon

有没有办法在 MS CRM 2011 功能区的 ToolTipTitle 和 ToolTipDescription 中换行？下面的代码在标题中放置了一个换行符，而不是在工具提示文本中（使用此代码的工具提示文本是“onetwo”）：

```
<Button Id="tmpBut" Command="tmpCmd" 
LabelText="one&#x200b;&#x200b;two" 
ToolTipTitle="one&#x200b;&#x200b;two" 
ToolTipDescription="one&#x200b;&#x200b;two" 
TemplateAlias="isv" Image16by16="/_imgs/ribbon/Activate_16.png" 
Image32by32="/_imgs/ribbon/Activate_32.png" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:52:08.780

未经测试，但对[CRM SDK（社区）内容](http://msdn.microsoft.com/en-us/library/gg328323.aspx)的搜索表明 Description 属性是这样的：

```
&#x0a;&#x0d; 
```

# ios - 使用 Facebook SDK 3.1 防止 iOS 本机登录

> ID：13625819
> 
> 赞同：0
> 
> 时间：2012-11-29T12:26:17.987
> 
> 标签：ios, facebook-ios-sdk

我正在寻找一种方法来防止使用 Facebook SDK 3.1 进行本机 Facebook iOS 6.0 登录。我问这个是因为我想在登录时请求读取和发布权限。使用本机登录仅允许您请求读取权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:20:17.443

我找到了解决这个问题的方法。要在 Login 上请求读取和发布权限，从而阻止本机对话框，请使用已弃用的方法 openActiveSessionWithPermissions。

# etl - 我们可以使用环境变量控制 DMExpress 中的源格式/布局吗？

> ID：13625826
> 
> 赞同：0
> 
> 时间：2012-11-29T12:26:49.013
> 
> 标签：etl

我正在使用 DMExpress 任务对我的业务数据进行 taransformations。这些业务数据有多种格式/布局。我需要能够使用单个任务在多个源布局上进行转换。这里有 DMExpress 专家吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:01:31.870

我发现在单个任务的帮助下对多个源布局进行转换的一种方法是使用 Dmexpress SDK 为任务编写脚本，而不是使用 GUI 任务编辑器构建任务。与 GUI 编辑器相比，SDK 提供了更多的灵活性。

但是，如果您绑定到 GUI，那么有一种方法可以解决这个特定目的。您应该为源布局定义一个通用名称。只有源布局名称绑定到任务，而不是实际的布局定义。因此，您可以更改布局定义，同时保持布局名称不变以获得通用任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T20:42:14.900

仅供参考 - DMExpress 现在称为 DMX（Syncsort 大约一年前更改了名称）。

您是否在一个文件中有多种不同的记录类型，或者每种类型的记录都在一个单独的文件中？您的问题对此不清楚。

如果它们在单独的文件中，这很容易，但您需要为每个文件创建单独的 DMX 任务。在每个任务中，将其中一个文件定义为源文件并创建与该文件格式匹配的记录布局。

如果它们在同一个文件中，则只会稍微困难一些。您可以通过创建多个目标并使用 SourceName() 函数为每个目标定义命名条件将它们拆分为单独的文件（此函数返回当前记录来自的文件的名称）。然后您可以将它们作为单独的文件处理（见上文）。除非您在该单个文件中的不同类型的记录之间存在父子关系，否则此方法有效。如果是这种情况，请发布一些示例数据，我可以建议如何处理它。

# r - 使用多个 if 条件

> ID：13625828
> 
> 赞同：3
> 
> 时间：2012-11-29T12:26:55.947
> 
> 标签：r, if-statement, for-loop

在对数据进行一些操作之后，我想自动重命名数据，从字符串中获取名称片段，将这些片段合并，然后分配给数据。我尝试在 for 循环中使用“if”函数，但代码不起作用。我尝试在“if”函数中使用“grep”作为条件。

```
 filepath<-c("C:/Users/Amministratore/Documents/Isolante-T_0-W_0-P1_0.csv", 
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_0-P1_1.csv", 
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_0-P1_2.csv", 
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_0-P1_3.csv",          
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_0-P1_4.csv",
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_0-P1_5.csv",
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_0-P1_6.csv",
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_1-P1_0.csv",
      "C:/Users/Amministratore/Documents/Isolante-T_0-W_1-P1_1.csv",
       ....)
    for(i in filepath){
    ......
    f <- substr(i,10,23)                  # first piece of name
    f2 <- as.character(substr(i,40,57))   # second piece of name

    if (grep("W_0",f2)){
        m<-c("_sin")
    }
    if (grep("W_1",f2)){
        m<-c("_jan2_febreal")
    }
    if (grep("W_2",f2)){
        m<-c("_real")
    }
    if (grep("W_3",f2)){
        m<-c("_step")
    }

    if (grep("P1_0",f2,value = FALSE)){
        t<-c("_t0.025")
    }
    if (grepl("P1_1",f2,value = FALSE)){
        t<-c("_t0.05")
    }
    if (grepl("P1_2",f2,value = FALSE)){
        t<-c("_t0.1")
    }
    if (grepl("P1_3",f2,value = FALSE)){
        t<-c("_t0.15")  
    }
    if (grepl("P1_4",f2,value = FALSE)){
        t<-c("_t0.2")
    }
    if (grepl("P1_5",f2,value = FALSE)){
        t<-c("_t0.25")
    }
    if (grepl("P1_6",f2,value = FALSE)){
        t<-c("_t0.3")
    }
}
Outputfilename <- paste(paste(f,m,sep=""),t,sep="") 
```

结果是：

```
Errore in if (grep("W_1", f2)) { : l'argomento ha lunghezza zero 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:20:38.807

没有任何`for`循环或`if`语句，在我看来，您可以简单地对所有内容进行矢量化：

```
f <- substr(filepath,10,23)

m <- t <- character(length(filepath))

m[grepl("W_0",filepath)]<-"_sin"
m[grepl("W_1",filepath)]<-"_jan2_febral"
m[grepl("W_2",filepath)]<-"_real"
m[grepl("W_3",filepath)]<-"_step"

t[grepl("P1_0",filepath)]<-"_t0.025"
t[grepl("P1_1",filepath)]<-"_t0.05"
t[grepl("P1_2",filepath)]<-"_t0.1"
t[grepl("P1_3",filepath)]<-"_t0.15"
t[grepl("P1_4",filepath)]<-"_t0.2"
t[grepl("P1_5",filepath)]<-"_t0.25"
t[grepl("P1_6",filepath)]<-"_t0.3"

Outputfilename <- paste(f,m,t,sep="") 
```

您也可以简化以下方式：

```
f <- substr(filepath,10,23)

m <- t <- character(length(filepath))

w <- array(c(paste("W",0:3,sep="_"),
             "_sin", "_jan2_febral", "_real", "_step"), dim=c(4,2))
p <- array(c(paste("P1",0:6,sep="_"),    
           paste("t_0.",c("025","05","1","15","2","25","3"),sep="")), dim=c(7,2))

for(i in 1:nrow(w)){m[grepl(w[i,1],filepath)] <- w[i,2]}
for(i in 1:nrow(p)){t[grepl(p[i,1],filepath)] <- p[i,2]}
Outputfilename <- paste(f,m,t,sep="") 
```

如果你愿意，你可以包装一个函数：

```
outputfile.namer <- function(filepath,w,p){
    # filepath being your vector of file paths
    # w and p your correspondance tables for your "W_" and "P_" series respectively

    f <- do.call(rbind,strsplit(gsub("C:/Users/","",filepath),split="/"))[,1]
    # the preceding is more general than `f <- substr(filepath,10,23)` to grab the name of the User
    m <- t <- character(length(filepath))
    for(i in 1:nrow(w)){m[grepl(w[i,1],filepath)] <- w[i,2]}
    for(i in 1:nrow(p)){t[grepl(p[i,1],filepath)] <- p[i,2]}
    paste(f,m,t,sep="")
    } 
```

# python - Python 无法打印客户端 IP 或客户端主机名

> ID：13625841
> 
> 赞同：0
> 
> 时间：2012-11-29T12:27:45.147
> 
> 标签：python, centos, samba

如何打印在我的共享文件夹中删除文件的客户端电脑的 IP 或主机名？此代码有效，但它只打印我自己的 IP 和主机名，而不是在我的共享文件夹中删除文件的另一台电脑。我使用**Centos 6.3**。我使用**Samba**共享我的文件夹。我使用**Python 2.7**和**PYinotify**脚本。

这是我的代码

```
import pyinotify

wm = pyinotify.WatchManager()

mask = pyinotify.IN_DELETE | pyinotify.IN_CREATE

class EventHandler(pyinotify.ProcessEvent):

    def process_IN_CREATE(self, event): 
    print "",now.strftime("%b-%d-%Y @ %I:%M %p"),"  "   ,socket.gethostname()," ","Create ","  ",event.name,"  ",event.path

    def process_IN_DELETE(self, event):
    print "",now.strftime("%b-%d-%Y @ %I:%M %p"),"  "    ,socket.gethostname()," ","Shift+Del","",event.name," ",event.path

handler = EventHandler()

notifier = pyinotify.Notifier(wm, handler)

wdd = wm.add_watch('/echoshare', mask, rec=True)

auto_add = '/echoshare'

notifier.loop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:06:10.193

我认为您误解了 (py)inotify 是什么。这是一种监视文件系统事件的方法，您将获得有关 samba 服务器在**本地**文件系统上完成的操作的信息。

如果您查看[inotify 文档](http://linux.die.net/man/7/inotify)，您会注意到 inotify_event 结构不包含有关用户执行操作的任何信息。

我想对您的问题最简单的解决方案是在您的 samba 服务器上启用[事件日志记录](https://wiki.samba.org/index.php/Event_Logging)并解析生成的事件以获取您想要的信息

# unit-testing - Yii 中的 PHPUnit 扩展警告

> ID：13625842
> 
> 赞同：4
> 
> 时间：2012-11-29T12:27:50.437
> 
> 标签：unit-testing, yii, warnings

我正在设置单元测试以使用 Yii 框架。除了 Yii，我的 PHPUnit 也很好用。但是当我尝试测试它时，随着 Yii 的出现，它每次都会给我以下警告。

```
Warning: include(PHPUnit_Extensions_Story_TestCase.php): failed to open stream:
No such file or directory in D:\xampp\htdocs\yii1112\framework\YiiBase.php on li
ne 423

Warning: include(): Failed opening 'PHPUnit_Extensions_Story_TestCase.php' for i
nclusion (include_path='.;D:\xampp\htdocs\sms_dev\protected\extensions\yii-mail;
D:\xampp\htdocs\sms_dev\protected\extensions\giix-components;D:\xampp\htdocs\sms
_dev\protected\components;D:\xampp\htdocs\sms_dev\protected\models;D:\xampp\php\
PEAR') in D:\xampp\htdocs\yii1112\framework\YiiBase.php on line 423 
```

我搜索了很多，也在 Yii 论坛上问过，但似乎没有任何结果。

有谁知道这个警告是什么意思？我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T09:06:38.510

该文件`PHPUnit_Extensions_Story_TestCase.php`是 package 的一部分`PHPUnit_Story`，可以通过以下方式安装：

```
pear install phpunit/PHPUnit_Story 
```

另请参阅：[PHPUnit 找不到 PHPUnit_Extensions_Story_TestCase。缺少什么包裹？](https://stackoverflow.com/questions/12977235/phpunit-cant-find-phpunit-extensions-story-testcase-what-package-is-missing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T13:01:00.500

使用 pear 安装依赖项 [**现在 pear 包没有更新更好地使用 composer 安装**]

```
sudo pear channel-discover pear.phpunit.de
sudo pear install phpunit/PHPUnit_Story
sudo pear install phpunit/PHP_Selenium 
```

**如果您使用 composer 安装 phpunit 会更好，这些错误不会出现**

第 1 步：在项目根目录中创建 composer.json 文件：

```
{
    "require-dev": {
        "phpunit/phpunit": "4.6.*",
        "phpunit/phpunit-selenium": ">=1.4",
        "phpunit/dbunit": ">=1.3",
        "phpunit/phpunit-story": "*",
        "phpunit/php-invoker": "*"
    },
    "autoload": {
        "psr-0": {"": "src"}
    },
    "config": {
        "bin-dir": "bin/"
    }
} 
```

第 2 步：使用以下命令将 composer 安装到您的项目中：

```
curl -sS https://getcomposer.org/installer | php 
```

确保作曲家是可执行的：

```
chmod +x composer.phar 
```

让 composer 安装依赖：

```
./composer.phar install --dev 
```

检查您是否安装了项目特定的 phpunit 版本：

```
bin/phpunit --version 
```

上面指定的是软链接

```
ls -la bin/phpunit
bin/phpunit -> ../vendor/phpunit/phpunit/phpunit 
```

之后，您可以将供应商目录中的“phpunit”软链接到正在使用的 php 目录中。这将删除所有与

```
PHP Warning:  include(classes/PHPUnit_Extensions_Story_TestCase.php)
PHP Warning:  include(): Failed opening 'classes/PHPUnit_Extensions_Story_TestCase.php' 
PHP Warning:  include(classes/Composer\Autoload\ClassLoader.php) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:25:13.440

protected/tests 目录不在您的包含路径中。我建议将您的受保护目录从任何公共位置移动，并将受保护的文件夹添加到包含路径中。所以`d:\xampp\htdocs\sms_dev\protected\`不要单独列出每个目录。

要么这是问题所在，要么文件不存在，您必须检查您的代码。

# c# - 是否有正确的方法来测试 EF 代码优先存储库模式？

> ID：13625844
> 
> 赞同：0
> 
> 时间：2012-11-29T12:28:03.973
> 
> 标签：c#, entity-framework, unit-testing, ef-code-first, repository-pattern

这是在 3 天的研究和编写代码之后发生的。我有 EF Code First (EF5) 和基于它构建的通用存储库模式。 ![基础设施](../Images/df5616a6ec2037fec2752d1085a07852.png)

现在我有`ICustomerRepository<Customer> : IRepository and CustomerRepository : RepositoryBase<MyContext> , ICustomerRepository`. 因此，当我开始对此进行测试时，我发现我必须编写 A FakeDbContext 、 A Fake IDbSet ，然后还要伪造数据，并且还要做很多事情。当我知道我将使用我的内存数据和 Linq to Entities 测试 Linq to Objects 时，所有这一切都需要以集成测试的形式进行另一套测试。因此，要么我的代码结构错误，因此编写单元测试非常困难，要么有更好的方法来编写我不知道的测试，或者我应该只进行集成测试。我正在使用 NUnit 和最小起订量。

编辑：我要测试的是什么？我正在尝试检查 GetCustomersByType 、 Add 、 GetOrderPlacedByCustomer 等方法。试图查看这些方法中的逻辑是否正确。我猜这就是单元测试的用途。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:48:07.100

我认为如果您创建一个测试初始化​​方法，该方法将在每次测试之前设置所有数据，即黑盒测试，您将获得更多。最后，您将知道存储库层在真实数据库上正常工作，而不是模拟数据库。

例如：

```
 public static void Init()
    {
        _unityContainer = new UnityContainer();
        _unityContainer.LoadConfiguration();
        _persistenceFactory = _unityContainer.Resolve<IPersistenceFactory>();
        _unitOfWork = _persistenceFactory.GetUnitOfWork();
        _usersRepository = _persistenceFactory.GetUsersRepository();
        _usersRepository.RemoveAll();
        _unitOfWork.Commit();
    }

    public static void InsertTestData()
    {
       User u = new User("johndoe@gmail.com", "John Doe", "johndoe");

        _usersRepository.Add(u);
        _unitOfWork.Commit();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:50:50.457

您可以使用`[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope%28v=vs.100%29.aspx)`模拟数据库访问，但不提交对数据库的实际更改。像这样的东西：

```
[TestMethod]
public void AddingShouldWork()
{
    using (var transaction = new TransactionScope())
    {
        var repository = new ICustomerRepository<Customer>();
        var customer = new Customer();
        customer.Name = "OEM Computers Inc.";
        repository.Add(customer);
    }
} 
```

通过不调用`transaction.Complete()`操作，就像回滚一样处理，导致没有数据库插入。这正是您想要进行单元（而不是集成）测试的行为。您也可以使用`Moq<Customer>`不创建真实实体。

# web-services - 恢复已删除的条目

> ID：13625845
> 
> 赞同：0
> 
> 时间：2012-11-29T12:28:06.753
> 
> 标签：web-services, sugarcrm

我正在使用 SugarCRM SOAP Web 服务。

我可以通过设置从 SOAP 中删除一个条目

> ```
>  'id'=BeanID
>     'deleted'=1 
> ```

但我不能像

> **“已删除”=0**

我可以从 MySQL(phpMyAdmin) 做，但不能从 SOAP Web 服务做。

这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:11:37.933

你正在做任何事情；这是通话的错误。

请对以下错误进行投票，以便在 Sugar 中更快地修复它

[http://www.sugarcrm.com/support/bugs.html#issue_58986](http://www.sugarcrm.com/support/bugs.html#issue_58986)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T04:08:18.630

我有同样的问题，刚才找到了解决方案。我没有正确测试它，但它现在似乎工作..'sugar_root'/include/database/DBManager.php

# 变化 1

```
 $where .= " AND deleted=0"; 
```

到

```
 //$where .= " AND deleted=0"; 
```

# 变化 2

```
 return "SELECT * FROM ".$bean->getTableName()." $where AND deleted=0"; 
```

到

```
 //return "SELECT * FROM ".$bean->getTableName()." $where AND deleted=0";
    return "SELECT * FROM ".$bean->getTableName()." $where"; 
```

# 变化 3

```
 if($fieldDef['name'] == 'deleted' && empty($bean->deleted)) continue; 
```

到

```
 //if($fieldDef['name'] == 'deleted' && empty($bean->deleted)) continue; 
```

如果有人在进行更改后发现任何问题，请在此处发布。干杯

# asp.net - asp.net HiddenField：动态添加自定义属性

> ID：13625848
> 
> 赞同：9
> 
> 时间：2012-11-29T12:28:14.397
> 
> 标签：asp.net

如何在 ASP.NET 中向 HiddenValueField 添加自定义属性？具体来说，我需要一个动态生成的 HiddenValue 控件的 class="gmapPoint" 属性。这是该页面上的 JavaScript 所必需的

```
var hiddenField = new HiddenField();
hfield.Value = "myValue";
hfield.... Attributes["class"] 
```

- 我怎么能做类似的事情？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-29T13:04:19.793

使用[`HtmlInputHidden`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlinputhidden%28v=vs.110%29.aspx)control 而不是`HiddenField`. 它允许以编程方式访问`<input type=hidden>`服务器上的 HTML 元素并具有[`.Attributes`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.attributes.aspx)以下属性：

```
var hiddenField = new HtmlInputHidden();
hiddenField.Value = "myValue";
hiddenField.Attributes["class"] = "a-class-for-a-hidden-field"; 
```

# matlab - 带有分类数据的 KNN 分类

> ID：13625849
> 
> 赞同：19
> 
> 时间：2012-11-29T12:28:16.957
> 
> 标签：matlab, octave, classification, knn, ordinal

我正忙于一个涉及 k-最近邻回归的项目。我混合了数值和分类字段。分类值是有序的（例如银行名称、帐户类型）。数字类型是，例如薪水和年龄。还有一些二进制类型（例如，男性、女性）。

如何将分类值纳入 KNN 分析？

据我所知，不能简单地将每个分类字段映射到数字键（例如银行 1 = 1；银行 2 = 2 等），因此我需要一种更好的方法来使用分类字段。我听说可以使用二进制数 - 这是一种可行的方法吗？建议将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T07:57:26.353

您需要找到适用于您的数据的**距离函数。**二元指标变量的使用隐含地解决了这个问题。这样做的好处是允许您使用这种数据继续您可能基于矩阵的实现，但更简单的方法 - 并且适用于大多数基于距离的方法 - 是只使用修改后的距离函数。

这样的组合数不胜数。您需要尝试最适合您的方法。本质上，您可能希望对数值使用一些经典度量（通常应用归一化；但也可以将此归一化移动到距离函数中），加上其他属性的距离，并适当缩放。

在基于距离的算法的大多数实际应用领域中，这是最困难的部分，优化您的特定领域的距离函数。您可以将其视为预处理的一部分：定义相似性。

*不仅仅是*欧几里得距离。有多种集合论测量方法可能更适合您的情况。例如，谷本系数、Jaccard 相似度、Dice 系数等。余弦也可能是一种选择。

有专门讨论相似性搜索主题的整个会议 - 除了欧几里得向量空间之外，没有人声称这在任何事情上都是微不足道的（实际上，甚至没有）：[http ://www.sisap.org/2012](http://www.sisap.org/2012)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:32:13.443

将分类数据转换为数字的最直接方法是使用指示符向量。请参阅我在之前的评论中发布的参考资料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T23:53:48.140

我们可以使用局部敏感哈希 (LSH) + 编辑距离并假设每个 bin 代表不同的类别吗？我知道分类数据没有显示任何顺序，并且 LSH 中的箱是根据散列函数排列的。对我来说，找到给出有意义数量的 bin 的哈希函数听起来就像学习度量空间。

# javascript - 刷新jquery mobile后样式和javascript不起作用

> ID：13625853
> 
> 赞同：0
> 
> 时间：2012-11-29T12:28:24.120
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我在使用 jQuery Mobile 时遇到了这个问题。当我登陆主页时，所有的 CSS 和 javascript 都可以正常工作。单击链接或按钮时，事件按预期工作。

但是在进入任何页面后说关于我们，然后刷新该特定页面，如果我们回到主页，一些 CSS 将丢失，并且 javascript 也不再工作，尽管链接工作正常。

回到主页后，简单的警报也不起作用。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:54:13.563

jQuery Mobile 中的标准 Ajax 导航只会检索`<body>`您正在导航到的页面。这意味着任何链接到/定义在后续页面标题中的 CSS 或脚本都将被忽略。这意味着用户加载的第一页的标题必须包含所有后续页面所需的所有样式/脚本。如果您刷新“关于”，这将成为您的初始页面，并且显然此页面的标题不包含与您的主页相同的内容。您可以更新您的标题或在链接中使用`rel="external"`或`data-ajax="false"`属性来禁用 JQM ajax 导航，并以更常规的方式导航到/从“关于”页面，整个页面将被加载。您可以查看[此页面](http://jquerymobile.com/test/docs/pages/page-links.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:41:30.067

转到另一个页面并刷新正在删除`<body>`.

尝试使用外部样式表以确保样式保持不变。

您的`<body>`刷新前：

```
<body style="background: -moz-linear-gradient(top, #E7E7E7, #121212); background: -webkit-gradient(linear, center top, center bottom, from(#E7E7E7), to(#121212));" class="ui-mobile-viewport ui-overlay-d"> 
```

而你`<body>`的刷新后：

```
<body class="ui-mobile-viewport ui-overlay-c"> 
```

此页内脚本也消失了，尝试将其移至外部脚本：

```
<script type="text/javascript">
            $(document).ready(function(){
                $(".second-tech").hide();
                $(".third-tech").hide();

                $("#mobileicon").click(function(){
                    if ($(".second-tech").is(':visible')) {

                       //... Lots more code...

                });
            });
        </script> 
```

# ios - iOS 和可能的 Android/其他移动平台上的 PayPal MECL 不适当的 UX 消息问题

> ID：13625854
> 
> 赞同：0
> 
> 时间：2012-11-29T12:28:27.627
> 
> 标签：ios, paypal, integration, user-experience

我们正在客户的应用程序中实施 PayPal MECL 库，但我们遇到了一些我们似乎无法改变的糟糕用户体验。完成 PayPal 体验后，PayPal 会显示“请稍候，我们正在将您转移到业务站点...”消息。显然这是一个 iOS 应用程序而不是“商业网站”......

通过在 UIWebViewDelegate 方法中侦听新的 URL 请求，在完成 PayPal 体验后关闭 Web 视图，流程起作用：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

这个问题似乎是 PayPal 通过编辑 DOM（JS 或类似的）用消息更新他们的 web 视图，这不会创建新的 web 请求，因此不会触发 shouldStartLoadWithRequest。注意：重定向后大约一秒钟后会发出一个新请求，但为时已晚，不适当的副本已呈现给用户。

是否有人在 iOS 或 Android 上使用 MECL 设法通过[SetExpressCheckout](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)服务器调用或配置[MECL URL 获取参数](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPECOnMobileDevices)来更改此副本/体验？到目前为止，我一直无法找到解决方案，但会发布解决方案，如果我们找到一个。任何帮助将不胜感激，因为我们似乎无法在 PayPals 文档中找到解决方案......

**注意：**当按下 PayPal 网页视图上的取消按钮时，我们也遇到了类似的用户体验问题，导致重定向，但之前出现了类似的错误副本“取消此次购买并返回卖家的网站？”。这被称为确认对话，但没有显示任何按钮，并且无论如何都会重定向。疯狂的用户体验。如果有人知道解决方案，请再次发布。

![](../Images/71ee851c46caa65777c4adf2d7cc063c.png)

![](../Images/61c2eecda9da5cf03528b02ec4be8c1d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:39:51.103

这是我们友好的 PayPal 支持团队的回复（付费保留合同）。

*“嗨*_*，

不幸的是，MECL Web 视图上确实没有任何可定制的选项。它们基本上是按原样提供的。

谢谢， *_* “*

看起来这是一个封闭的盒子。糟糕的用户体验或其他支付解决方案。我接受这个作为答案，因为看起来很可能在这里无能为力。

# batch-file - 通过双击和从命令提示符执行 .bat 文件有什么区别

> ID：13625860
> 
> 赞同：2
> 
> 时间：2012-11-29T12:28:41.887
> 
> 标签：batch-file

我从命令提示符运行以下批处理文件 (.bat) 文件，也通过双击运行，但在这两种情况下它都会提供不同的输出。

```
@echo off

echo The user name is %USERNAME% > log.txt

set instDir=%cd%

set Prop_TXT="%instDir%\bin\packages\sometextfile.txt"

findstr /C:StringToFind %Prop_TXT% >> log.txt

for /F "usebackq  tokens=1,2,3 delims=/" %%i in (`findstr javavm %Prop_TXT%`) do (

set DIRE=%%j

"%instDir%\bin\%DIRE%\bin\java.exe" -version 2>> log.txt

) 
```

在命令提示符下，`log.txt`给出 Java 版本的正确输出。双击`log.txt`显示**“系统找不到指定的路径”。**

请帮我。我做了很多谷歌搜索，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:14:54.933

**第一**：设置 instDir=%cd%

如果您将当前路径保存在变量“CD”中，为什么要将其再次存储在“instdir”变量中？

**第二**：需要在FOR里面展开变量，可以使用setlocal enabledelayedexpansion命令。

**第三**：一个区别是在命令提示符中你需要使用一个 % 符号，当你在脚本中使用两个 %% 时，“FOR %%i”或“SET DIRE=%%j”不能直接在命令提示符。

尝试这个：

```
@echo off
echo The user name is %USERNAME% > log.txt

set Prop_TXT=".\bin\packages\sometextfile.txt"

findstr /C:StringToFind %Prop_TXT% >> log.txt

for /F "usebackq tokens=1,2,3 delims=/" %%i in (`findstr javavm %Prop_TXT%`) do (
    set "DIRE=%%j"
    Call ".\bin\%%DIRE%%\bin\java.exe" -version 2>> log.txt
) 
```

# javascript - jQuery：在悬停时选择给定类的所有元素，除了这个

> ID：13625862
> 
> 赞同：4
> 
> 时间：2012-11-29T12:28:57.957
> 
> 标签：javascript, jquery, jquery-selectors

我在同一个类的页面上有十个元素。

当我将鼠标悬停在其中一个上时，我想改变其他九个。

这是我到目前为止所拥有的...

```
$("*[class='myClass']:not(this)").css({"top":"10px"}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:32:11.433

使用属性选择器按类选择有点多余（更不用说慢了），因为有一个类选择器。尝试这个：

```
$(".myClass").mouseover(function() {
    $('.myClass').not(this).css({"top":"10px"});
}); 
```

如果要重置鼠标悬停效果，请使用`hover()`两个函数参数。此外，在这种情况下最好使用类。

```
$(".myClass").hover(function() {
    $('.myClass').not(this).addClass('foo');
},
function() {
     $('.myClass').not(this).removeClass('foo');
}); 
```

```
.foo { top: 10px; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:32:30.133

使用[`.not`方法](http://api.jquery.com/not/)：

> 从匹配元素集中移除元素

```
$("*[class='myClass']").not(this).css({"top":"10px"}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T15:34:38.523

你可以使用这个：

```
$(".myClass:not(:hover)") 
```

或这个：

```
$(".myClass").not(":hover") 
```

或这个：

```
$(".myClass").not(this) 
```

最后一个假设您在`mouseover`or `mousenter`(or `hover`) 事件处理程序中。我也相信你必须在鼠标悬停时重置样式。工作演示：http: [//jsfiddle.net/tt8cz/](http://jsfiddle.net/tt8cz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:34:28.950

您也可以使用`.not`接受 jQuery 对象的方法：

```
$('.myClass').not($(this)).css({"top":"10px"}); 
```

乍一看，[文档并没有提到这种可能性，但是第一批评论之一确实如此](http://api.jquery.com/not/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:36:11.757

你也可以只用 CSS 来做到这一点：

HTML：

```
<ol id="items">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
</ol>​ 
```

CSS：

```
#items:hover > li { padding-left:5px; }
#items:hover > li:hover { padding-left:0; } 
```

我用过`padding-left`，但你当然可以使用任何属性。

**[JSF](http://jsfiddle.net/rS7ZR/1/)**中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T12:36:34.910

如果我正确理解您要执行的操作，您可以更改 的所有元素的样式`.myClass`，然后将其更改回`this`：

```
$('.myClass').hover(function() {
    $(".myClass").css({"background":"blue"});
    $(this).css({"background":"red"});
});​ 
```

[http://jsfiddle.net/hAMPA/](http://jsfiddle.net/hAMPA/)

或者也按照 Rory McCrossan 的建议处理悬停状态。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T13:07:08.853

我使用背景颜色参数制作了下一个示例。

```
$(document).ready(function(e) {
    $('.myClass').live('mouseover',function(){
        var element = $(this);
        $(this).css({"background-color":"#FF0000"});
        $('.myClass').each(function(){
            if(element.html() != $(this).html()){
                $(this).css({"background-color":"#FFFFFF"});
            }
        });
    });
}); 
```

# django - 为什么我的生产服务器中没有获取该位置？

> ID：13625865
> 
> 赞同：0
> 
> 时间：2012-11-29T12:29:09.017
> 
> 标签：django, gunicorn

在我看来，我正在使用以下代码片段对用户进行地理定位：

```
try:
  jsonResponse = urllib2.urlopen("http://www.geoplugin.net/json.gp?ip="+request.META['REMOTE_ADDR']).read()
  response = simplejson.loads(jsonResponse)
  kwargs['loc'] = response['geoplugin_countryCode']
except:
  kwargs['loc'] = 'error'
return basic_html(request,'index.html',kwargs) 
```

在我的开发服务器（`manage.py runserver`）中，这工作正常。在我的`gunicorn`生产服务器中，`loc`是空白的（甚至不是`error`）。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:49:22.470

你确认你有价值`REMOTE_ADDR`吗？通常它没有被填充，因此可能是您发送了一个空白 IP，而 geoplugin 服务正在返回一个空白国家代码作为响应。

# javascript - 无法将焦点设置在 Twitter Bootstrap 的 Typeahead 的输入上

> ID：13625866
> 
> 赞同：14
> 
> 时间：2012-11-29T12:29:10.307
> 
> 标签：javascript, jquery, twitter-bootstrap, focus, bootstrap-typeahead

当我删除这些属性时：

```
data-source="<?=str_replace('"', '&quot;', json_encode($equipment, JSON_HEX_TAG | JSON_HEX_APOS)); ?>" data-items="4" data-provide="typeahead" 
```

我能够执行此操作：

```
$(document).ready(function() {
    $('.first').focus();
}); 
```

这是我的 HTML 标记：

```
<div class="itemx">
    <input type="text" class="input-large first" autocomplete="off" placeholder="Equipment Name/Label" name="equip[]" data-source="<?=str_replace('"', '&quot;', json_encode($equipment, JSON_HEX_TAG | JSON_HEX_APOS)); ?>" data-items="4" data-provide="typeahead" />
    <input type="text" class="input-large second" placeholder="Quantity" name="quant[]" />
</div> 
```

**注意：** Typeahead 运行良好，这并没有错：

```
data-source="<?=str_replace('"', '&quot;', json_encode($equipment, JSON_HEX_TAG | JSON_HEX_APOS)); ?>" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T16:37:44.313

我最近遇到了这个问题。当我`.typeahead()`首先声明代码块时，它自行修复，然后赋予字段焦点。如果我颠倒顺序，`.typeahead()`功能就会中断。

```
$('#myField').typeahead({
    ...
});

$('#myField').focus(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-21T15:42:03.263

typeahead 有它自己的焦点方法版本。焦点事件的默认行为被阻止，因此唯一的方法是保持预先输入的引用。

```
var typeaheadReference = $('.typeahead').typeahead({ ... }; 
```

然后你就打电话`typeaheadReference.focus();`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-09T22:23:08.290

不要问我为什么，但这是唯一对我有用的东西：

```
setTimeout("$('[name=search_input]').focus();", 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T21:01:52.200

Typeahead 正在积极阻止默认焦点事件。我不知道为什么（也许有一个用例，焦点会提前输入，我还没有看到）。

在[typeahead.js 源代码](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-typeahead.js)中（在第 316 到 321 行的末尾）：

```
 $(document).on('focus.typeahead.data-api', '[data-provide="typeahead"]', function (e) {
    var $this = $(this)
    if ($this.data('typeahead')) return
    e.preventDefault()
    $this.typeahead($this.data())
  }) 
```

改成：

```
 $(document).on('focus.typeahead.data-api', '[data-provide="typeahead"]', function (e) {
    var $this = $(this)
    if ($this.data('typeahead')) return true
    $this.typeahead($this.data())
  }) 
```

返回 true 允许焦点事件完成（仅在建立预输入时第一个焦点之后运行）并删除`e.preventDefault()`调用允许焦点在初始设置时触发。

我有一个更改[请求](https://github.com/twitter/bootstrap/pull/6753)- 将根据作者的回复更新答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-24T16:48:08.200

这取决于您使用的是哪个版本，我在 0.9.3 中遇到了这个问题。

不是最干净的，但您可以尝试设置超时：

setTimeout(function(){ $('.first').focus(); }, 0);

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-08T09:02:21.043

使用 typeahead.js 0.10.2，Evil Closet Monkey 指定的解决方案*几乎*对我有用。如指定的那样，您必须在调用“typeahead”之后设置焦点，但请记住，“typeahead”调用将操纵 DOM 并添加其他元素。调用“typeahead”后，找到代表输入框的元素并将焦点设置为该元素。如下所示，输入元素具有分配给它的类“tt-input”。

例子：

html:

```
<div id="levelSearchBox" style="clear: both">
    <input class="typeahead" type="text" placeholder="Search" data-bind="value: selectedRootLevel" />
</div> 
```

js：

```
 $('#levelSearchBox .typeahead').typeahead({
        hint: true,
        highlight: true,
        minLength: 0,
        autoselect: true
    }, {
        displayKey: 'name',
        source: levels.ttAdapter()
    }).on('typeahead:selected', function ($e, datum) {
        selectedCallBack(datum["name"]);
    });

    $('#levelSearchBox .tt-input').focus(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-02T19:14:10.907

我创建了一个 jsfiddle 供人们快速测试库的版本 [http://jsfiddle.net/uryUP/](http://jsfiddle.net/uryUP/)

我意识到我的另一段代码正在禁用我的输入框导致焦点失败，但这帮助我意识到这是我的代码而不是库

```
$('#locationSearchText').typeahead({
            minLength: 1,
            highlight: true
        },
        {
            source: function (query, process) {
                return process([{value:'abcdefg'}]);
            }
        });

$('#locationSearchText').focus().typeahead('val', 'abc'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-29T13:07:56.763

也许输入是隐藏的。

```
$('input:visible').focus(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-11T08:35:09.147

我最终使用点击事件而不是焦点，它对我有用。

# css - CSS 定位：左浮动一行，下面跟着一个块

> ID：13625875
> 
> 赞同：0
> 
> 时间：2012-11-29T12:29:42.540
> 
> 标签：css, css-float

我想要从左到右的一排块，然后是下面的一个块。

这是我希望在浏览器中看到的图片。 ![所需的 HTML 呈现](../Images/ad320ac40f5fbfcda2a200c30f7edc95.png)

我需要通过 CSS 进行所有定位，而不是通过表格。这是我的 HTML 和我的 CSS ......

```
<!DOCTYPE html>
<html>
 <head><link rel="stylesheet" href="demo.css" /><head>

<body>

<form action="">
  <fieldset>
    <legend>Field set A</legend>
    <label for="password">Password
      <input id="password" name="password" type="text" value="my password" />
    </label>            
  </fieldset>               
  <fieldset class="radio">
    <legend>Chaining mode</legend>
      <label for="chain-cfb">
          <input id="chain-cfb" name="chain" type="radio" />CFB
      </label>
      <label for="chain-cbc">
          <input id="chain-cbc" name="chain" type="radio" />CBC
      </label>
  </fieldset>               
</form>

<hr />
<p style="padding-top: 1em;">Some text underneath</p>   
</body> 
</html> 
```

...这是 demo.css 的内容...

```
fieldset
{
    float: left;
    display: block;
    width: 17em;
    margin: 0 1em 1em 0;
    padding: 0 1em 1em 1em;
}

fieldset.radio input
{
    clear: both;
    float: left;
    width: auto;
}

input
{
    display: block;
    width: 15em;
}

label
{
    display: block;
    margin-bottom: 1em;
    font-weight: bold;
}

label.first
{
    padding-top: 1em;
} 
```

我阅读它的方式应该是使用此代码获得所需的结果。但我不是。这是呈现的内容......

![HTML的实际呈现](../Images/e39cb5f422cf4d6dd8a05b0b87e9e981.png)

**为了获得预期的结果，我需要对我的 html/css 进行哪些更改？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:32:31.287

您需要使`<hr />`元素清除浮动。`hr { clear: left; }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:34:10.663

一种无需清除的方法是：

```
form { overflow: hidden; } 
```

我通常创建一个名为的类`floatbox`并在每个包含浮动元素的容器上使用它

```
.floatbox { overflow: hidden; } 
```

匹配的html然后是

```
<form class="floatbox" action="">
    <fieldset><p>I'm floating</p></fieldset>
    <fieldset><p>me too</p></fieldset>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:31:51.373

添加：

```
hr {
    clear: left;
} 
```

到您的样式表以清除您的浮动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:32:11.043

您可以使用 ole' 虚拟清除元素技巧：

```
<form action="">
  <fieldset>
    <legend>Field set A</legend>
    <label for="password">Password
      <input id="password" name="password" type="text" value="my password" />
    </label>            
  </fieldset>               
  <fieldset class="radio">
    <legend>Chaining mode</legend>
      <label for="chain-cfb">
          <input id="chain-cfb" name="chain" type="radio" />CFB
      </label>
      <label for="chain-cbc">
          <input id="chain-cbc" name="chain" type="radio" />CBC
      </label>
  </fieldset> 
  <div style="clear:both"> </div>      
</form> 
```

这可以确保您的表单实际上占据与其内部元素一样多的空间。

简单清除的问题`hr`是表单的宽度和高度为零，如果您也将样式应用于表单，这可能会出现问题。

# facebook-graph-api - Graph API 仅返回页面帖子

> ID：13625884
> 
> 赞同：1
> 
> 时间：2012-11-29T12:30:07.317
> 
> 标签：facebook-graph-api, field, facebook-page

我使用 Graph API 从我的托管页面获取某些数据。我需要的是我页面上的点赞、签到和talking_about_count。当我添加签入和talking_about_count 时，我收到API 不知道这些字段的错误。所以我删除了那些，只要求喜欢和 id。API 返回的是一个列表，其中包含来自页面的帖子，仅显示 id、创建日期和喜欢的内容（如果有的话）。

我测试了其他一些字段，例如 about 和 website，但它们给出的错误与 checkins 和talking_about_count 相同，因此我无法从我的页面中获取基本数据..

我使用的链接是这样的：

```
https://graph.facebook.com/168707433219493/feed?access_token=[Access_Token]&fields=id,likes,checkins,talking_about_count 
```

我得到的错误是：

```
{
   "error": {
      "message": "(#100) Unknown fields: checkins,talking_about_count.",
      "type": "OAuthException",
      "code": 100
   }
} 
```

当我只要求 id 并喜欢时，我得到：

```
{
   "data": [
      {
         "id": "168707433219493_333476503426186",
         "created_time": "2012-11-28T19:38:57+0000"
      },
      {
         "id": "168707433219493_370257573064477",
         "created_time": "2012-11-22T08:12:11+0000"
      },
      {
         "id": "168707433219493_423778884356339",
         "likes": {
            "data": [
               {
                  "name": "Guido van Tricht",
                  "id": "1117357415"
               }
            ],
            "count": 1
         },
         "created_time": "2012-11-19T22:46:01+0000"
      }
   ],
   "paging": {
      "previous": "https://graph.facebook.com/168707433219493/feed?fields=id,likes&access_token=[Access_Token]&limit=25&since=1354131537&__previous=1",
      "next": "https://graph.facebook.com/168707433219493/feed?fields=id,likes&access_token=[Access_Token]&limit=25&until=1350819853"
   }
} 
```

我希望有人知道如何解决我的问题，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:42:12.140

`talking_about_count`应该在 中`/PAGE_ID`，而不是在提要中。

为什么不从以下位置获取此数据：

```
https://graph.facebook.com/168707433219493?access_token=[Access_Token] 
```

# c# - AJAX 工具包 Accordion 在发布时不起作用

> ID：13625885
> 
> 赞同：1
> 
> 时间：2012-11-29T12:30:10.037
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit

我正在使用 AJAX 控件工具包中的 AJAX 手风琴来显示从数据库中提取的项目的动态列表。我从后面的代码生成整个手风琴。这在本地测试时没有问题，但是当我在线发布时，手风琴显示第一个项目但单击时不执行任何其他操作，基本上没有响应任何内容。手风琴内容中还有指向其他页面的链接，这些确实有效。

对于aspx，我使用的是一个masterpage，里面有一个toolkitscriptmanager：

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server EnablePartialRendering="true">
    </asp:ToolkitScriptManager> 
```

在内容中，我还添加了一个 scriptmanagerproxy，希望能解决问题，但没有。

空手风琴是这样的：

```
<asp:accordion ID="Accordion1" runat="server"
HeaderCssClass="Header" ContentCssClass="Contents"
Font-Names="Verdana" Font-Size="10"
BorderColor="#000000" BorderStyle="Solid" BorderWidth="1"
FramesPerSecond="100" FadeTransitions="true"
TransitionDuration="500">
</asp:accordion> 
```

这是我当前生成手风琴的代码：

```
public void getRequests()
    {

        DataTable requests = getRequests();

        if (requests.Rows.Count == 0)
        {
            return;
        }

        for (int i = 0; i < requests.Rows.Count; i++)
        {

            DataTable makers = getInformationByRequest();
            AjaxControlToolkit.AccordionPane pane1 = new AjaxControlToolkit.AccordionPane();
            pane1.ID = "pane" + i;
            Table table = new Table();
            table.Width = Unit.Percentage(100);
            TableRow row = new TableRow();
            row.CssClass = "Header";
            for (int j = 0; j < 4; j++)
            {
                Create panel head with information
            }
            table.Rows.Add(row);
            pane1.HeaderContainer.Controls.Add(table);

            Table table1 = new Table();
            table1.Width = Unit.Percentage(100);

            TableRow rowhead = new TableRow();
            rowhead.CssClass = "Contents";

            TableCell cellName = new TableCell();
            cellName.Text = "Bedrijf naam";
            TableCell cellStatus = new TableCell();
            cellStatus.Text = "Request status";
            TableCell cellAction = new TableCell();
            cellAction.Text = "Actie";

            rowhead.Cells.Add(cellName);
            rowhead.Cells.Add(cellStatus);
            rowhead.Cells.Add(cellAction);

            table1.Rows.Add(rowhead);

            for (int j = 0; j < makers.Rows.Count; j++)
            {
                TableRow row1 = new TableRow();

                if (makers.Rows.Count != 0)
                {
                    //method to create table1
            }
            pane1.ContentContainer.Controls.Add(table1);
            }

            Accordion1.Panes.Add(pane1);
        } 
```

正如我所说，这在调试时没有任何问题。

任何帮助是极大的赞赏。

编辑：

我用这个解决了它：

[http://geekswithblogs.net/lorint/archive/2007/03/28/110161.aspx](http://geekswithblogs.net/lorint/archive/2007/03/28/110161.aspx)

感谢 henk mollema 让我走上了正轨。

# ios - xcode 4.5 不断进入 std::string 内部代码

> ID：13625888
> 
> 赞同：1
> 
> 时间：2012-11-29T12:30:19.340
> 
> 标签：ios, xcode, string

我对 XCode 4.5.1 有一个非常烦人的问题。

每次我的代码要调用一些 STL 成员函数（例如 std::string::c_str()）时，XCode 都会进入调用内部，我必须反复退出以返回以返回源代码。这只发生在 STL 代码上，而不是我自己的函数。

我该如何解决这种烦人的行为？

谢谢。

# c# - 将图像切成 9 块 C#

> ID：13625891
> 
> 赞同：11
> 
> 时间：2012-11-29T12:30:25.150
> 
> 标签：c#, image, picturebox

> **可能重复：**
> [图像分成 9 块](https://stackoverflow.com/questions/4118150/image-splitting-into-9-pieces)

尽管我用谷歌搜索了足够多的东西，但不幸的是未能找到帮助。这个[代码项目教程](http://www.codeproject.com/Articles/4366/Displaying-split-Bitmap-files "代码项目教程")也没有为我提供我真正需要的东西。

我在 WinForm 中有一个 Image 和 9 个 PictureBox。

```
Image img = Image.FromFile("media\\a.png"); // a.png has 312X312 width and height
//          some code help, to get
//          img1, img2, img3, img4, img5, img6, img7, img8, img9
//          having equal width and height
//          then...
pictureBox1.Image = img1;
pictureBox2.Image = img2;
pictureBox3.Image = img3;
pictureBox4.Image = img4;
pictureBox5.Image = img5;
pictureBox6.Image = img6;
pictureBox7.Image = img7;
pictureBox8.Image = img8;
pictureBox9.Image = img9; 
```

这是给您的示例图像：

![在此处输入图像描述](../Images/62358637d9a042686c85a0c95b36bccf.png)

这是我的图片拼图课程项目的一部分。我已经完成了 Photoshop 图片，现在想动态剪切。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T12:33:55.313

首先，不要使用 img1，img2... 使用大小为 9 的数组。然后使用这样的几个循环更容易做到这一点：

```
var imgarray = new Image[9];
var img = Image.FromFile("media\\a.png");
for( int i = 0; i < 3; i++){
  for( int j = 0; j < 3; j++){
    var index = i*3+j;
    imgarray[index] = new Bitmap(104,104);
    var graphics = Graphics.FromImage(imgarray[index]);
    graphics.DrawImage( img, new Rectangle(0,0,104,104), new Rectangle(i*104, j*104,104,104), GraphicsUnit.Pixel);
    graphics.Dispose();
  }
} 
```

然后你可以像这样填写你的盒子：

```
pictureBox1.Image = imgarray[0];
pictureBox2.Image = imgarray[1];
... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T12:41:59.570

您可以尝试使用此代码。它基本上创建了一个图像矩阵（就像您在项目中需要的那样）并绘制`Bitmap`大图像的每个适当部分。您可以使用相同的概念`pictureBoxes`并将它们放入矩阵中。

```
Image img = Image.FromFile("media\\a.png"); // a.png has 312X312 width and height
int widthThird = (int)((double)img.Width / 3.0 + 0.5);
int heightThird = (int)((double)img.Height / 3.0 + 0.5);
Bitmap[,] bmps = new Bitmap[3,3];
for (int i = 0; i < 3; i++)
    for (int j = 0; j < 3; j++)
    {
        bmps[i, j] = new Bitmap(widthThird, heightThird);
        Graphics g = Graphics.FromImage(bmps[i, j]);
        g.DrawImage(img, new Rectangle(0, 0, widthThird, heightThird), new Rectangle(j * widthThird, i * heightThird, widthThird, heightThird), GraphicsUnit.Pixel);
        g.Dispose();
    }
pictureBox1.Image = bmps[0, 0];
pictureBox2.Image = bmps[0, 1];
pictureBox3.Image = bmps[0, 2];
pictureBox4.Image = bmps[1, 0];
pictureBox5.Image = bmps[1, 1];
pictureBox6.Image = bmps[1, 2];
pictureBox7.Image = bmps[2, 0];
pictureBox8.Image = bmps[2, 1];
pictureBox9.Image = bmps[2, 2]; 
```

# php - 是否有用于操作单位和数量的 PHP 库/类？

> ID：13625894
> 
> 赞同：8
> 
> 时间：2012-11-29T12:30:31.840
> 
> 标签：php, class, units-of-measurement

我正在寻找一个 PHP 库/类来以类似于[`ruby-units`](https://github.com/olbrich/ruby-units)gems 的方式来操作单位和数量。我找到了一个将 Ruby 库移植到 JavaScript 的端口[`js-quantities`](https://github.com/gentooboontoo/js-quantities)，而不是 PHP。

**是否有任何用于操作单位和数量的 PHP 库/类？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:49:45.697

[**Zend Framework 1**](http://framework.zend.com/)确实包含一个名为的组件[`Zend_Measure`](http://framework.zend.com/manual/1.12/en/zend.measure.html)非常复杂，但已从**Zend Framework 2**中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T20:09:46.220

我一直在寻找同样的东西并遇到了[https://github.com/triplepoint/php-units-of-measure](https://github.com/triplepoint/php-units-of-measure)

我自己还没有尝试过，但它看起来非常完整。

编辑：我查看了上面提到的类，以了解我想要的东西，但它并没有像茶匙和汤匙那样进入美国的等效措施。课程可以加强，但我想我会继续走我自己的道路。

# haskell - applicative 到底有多少是关于应用而不是“组合”？

> ID：13625905
> 
> 赞同：12
> 
> 时间：2012-11-29T12:31:19.790
> 
> 标签：haskell, type-constraints, applicative, category-theory

对于[不确定性传播`Approximate`类型](https://github.com/leftaroundabout/uncertainly-haskell/blob/master/Data/Uncertain.hs)，我希望有`Functor`through的实例`Monad`。然而，这不起作用，因为我需要包含类型的向量空间结构，所以它实际上必须是类的受限版本。由于似乎仍然没有这些标准库（或者是否存在？请指出我。有[rmonad](http://hackage.haskell.org/package/rmonad)，但它使用`*`而不是`Constraint`作为上下文类型，这对我来说似乎已经过时了），我编写[了自己的](https://github.com/leftaroundabout/constrained-categories)版本暂时。

这一切都很容易`Functor`

```
class CFunctor f where
  type CFunctorCtxt f a :: Constraint
  cfmap :: (CFunctorCtxt f a, CFunctorCtxt f b)  => (a -> b) -> f a -> f b

instance CFunctor Approximate where
  type CFunctorCtxt Approximate a = FScalarBasisSpace a
  f `cfmap` Approximate v us = Approximate v' us'
   where v' = f v
         us' = ... 
```

但直接翻译`Applicative`，如

```
class CFunctor f => CApplicative' f where
  type CApplicative'Ctxt f a :: Constraint
  cpure' :: (CApplicative'Ctxt f a) => a -> f a
  (#<*>#) :: ( CApplicative'Ctxt f a
             , CApplicative'Ctxt f (a->b)
             , CApplicative'Ctxt f b)        => f(a->b) -> f a -> f b 
```

不可能，因为函数`a->b`没有必要的向量空间结构* `FScalarBasisSpace`。

然而，起作用的是改变受限应用类的定义：

```
class CFunctor f => CApplicative f where
  type CApplicativeCtxt f a :: Constraint
  cpure :: CAppFunctorCtxt f a  => a -> f a
  cliftA2 :: ( CAppFunctorCtxt f a
             , CAppFunctorCtxt f b
             , CAppFunctorCtxt f c )        => (a->b->c) -> f a -> f b -> f c 
```

然后定义`<*>#`而不是`cliftA2`作为自由函数

```
(<*>#) = cliftA2 ($) 
```

而不是一种方法。没有约束，这是完全等价的（事实上，[很多`Applicative`实例都是这样](https://stackoverflow.com/questions/5358868/how-and-why-is-ap-defined-as-liftm2-id-in-haskell)），但在这种情况下，它实际上更好：`(<*>#)`仍然有无法满足的约束`a->b`，`Approximate`但这不会伤害应用实例，而且我仍然可以做有用的事情，比如

```
ghci> cliftA2 (\x y -> (x+y)/x^2) (3±0.2) (5±0.3)        :: Approximate Double 
0.8888888888888888 +/- 0.10301238090045711 
```

[我](http://blog.omega-prime.co.uk/?p=127)认为`CApplicative`对于. `Set`_

## 所以我的问题：

比? `<*>`_`liftA2`

同样，在不受约束的情况下，它们无论如何都是等价的。我实际上发现`liftA2`更容易理解，但在 Haskell 中，考虑传递“函数容器”而不是对象容器和一些“全局”操作来组合它们可能更自然。并`<*>`直接引出所有`liftAμ`对于*μ* ∊ ℕ，而不仅仅是`liftA2`; 从`liftA2`only这样做[是行不通](https://github.com/leftaroundabout/constrained-categories/blob/master/Control/Applicative/Constrained.hs#L77)的。

但是，这些受约束的类似乎对`liftA2`. 特别是，它允许所有s 的`CApplicative`实例，这在基方法时*不起作用。*而且我认为我们都同意应该始终比.`CMonad`*`<*>#``Applicative``Monad`*

 *范畴论者会对这一切说什么？有没有办法在`liftAμ`不需要`a->b`满足相关约束的情况下获得将军？

* * *

*这种类型的*线性函数*实际上确实具有向量空间结构，但我绝对不能局限于这些。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T12:53:52.640

据我了解（作为非类别理论家），基本操作是`zip :: f a -> f b -> f (a, b)`（将一对有效计算映射到有效计算，从而产生一对）。

然后你可以定义

*   `fx <*> fy = uncurry ($) <$> zip fx fy`
*   `liftA2 g fx fy = uncurry g <$> zip fx fy`

[请参阅Edward Yang 的](http://blog.ezyang.com/2012/08/applicative-functors/)这篇文章，这是我[通过 Typeclassopedia 找到的](http://www.haskell.org/haskellwiki/Typeclassopedia#Alternative_formulation)。*

# c++ - gcc：在同一条指令上使用相同的 var 时参考参数更改

> ID：13625907
> 
> 赞同：2
> 
> 时间：2012-11-29T12:31:39.800
> 
> 标签：c++, gcc

我指出了一个奇怪的 gcc 行为：当在同一条指令上使用相同的变量时，并且当这个变量被一个函数调用（通过引用或指针传递的变量）修改时，变量的变化不会被其他函数修改相同的指令。

这是正常的 c++ 行为还是虚假的？
注意：未设置优化 (-O) 标志。
注意 2：这适用于 solaris CC 编译器。

使用 gcc 4.5.3 进行演示（在 linux 或 mingw/cygwin 上）

```
class C {
public:
  const C & inc(int & i) const       
  {
     ++i;
     cout << "inc: i = " << i << endl; return *this;
  }
  const C & see(int i) const   
  {     
     cout << "see: i = " << i << endl; return *this; 
  }
  const C & see2(const int & i) const {  
    cout << "see2: i = " << i << endl; return *this; }
  };

int main()
{
  C c;
  int i = 0;
  c.see(i).inc(i).see(i).see2(i).inc(i).see(i).see2(i);
  c.see(i);
  return 0;
} 
```

输出：

> 参见：i = 0
> inc：i = 1
> 参见：i = 0 **:1 预期**
> see2：i = 1
> inc：i = 2
> 参见：i = 0 **:2 预期**
> see2：i = 2
> 参见：i = 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:37:23.973

函数参数的求值顺序彼此之间是不确定的。在这种情况下，gcc 选择了评估`i`为提前传递给`see`方法调用。

您的代码相当于：

```
class C {};
C &inc(C &c, int &i) { ++i; return c; }
C &see(C &c, int i) { std::cout << i << '\n'; return c; }
C c;
int i = 0;
see(inc(c, i), i); 
```

的参数的有效评估顺序`see`是：

```
1\. evaluate inc(...) to pass c to see(...)
2\. evaluate i as an rvalue to pass to see(...)

1\. evaluate i as an rvalue to pass to see(...)
2\. evaluate inc(...) to pass c to see(...) 
```

在前一种情况下，程序打印`1`；在后者它打印`0`。

请注意，行为是*未指定*的，但不是*未定义*的；它必须打印`0`或`1`。这是因为在调用`inc`;之前和之后获得了一个序列点。在 C++11 中，函数的执行相对于调用函数 (1.9p15) 中的评估是不确定的（但不是未排序的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:39:59.873

这是正确的行为：标准没有指定执行给定语句的子表达式的顺序。在您的情况下，显然编译器首先执行所有子表达式，即在对任何调用进行评估*之前*，`i`制作 的副本`i`以将它们传递给 的不同调用。`see()`*`inc()`*

# android - ListItem 应在按下时更改背景颜色、文本和图像的颜色

> ID：13625908
> 
> 赞同：2
> 
> 时间：2012-11-29T12:31:42.043
> 
> 标签：android, android-layout, listview, highlight, listitem

我有一个 ListView，其中每个项目都有一个带有 bg 图像、一个 textView 和 2 个 imageViews 的自定义 LinearLayout。现在我需要在用户触摸项目时，所有这些都切换到“按下”状态：

*   LiearLayout 的背景图像必须替换为另一个
*   TextView 应该改变 textColor
*   项目中的两个 ImageViews 都应该切换到替代图像

通常这样的事情将使用内部带有选择器的xml资源来完成，例如LinearLayout将使用带有内部选择器的drawable作为背景，TextView将使用带有选择器和颜色的drawable作为textColor，而ImageViews使用带有内部图像的选择器作为src。

问题是按下状态仅由 LinearLayout 而不是由子视图（？）检测到，因此只有背景图像发生变化。

我已经尝试使用 OnTouchListener 实现这一点，但随之而来的问题是我无法安全地访问列表项中的视图。

我尝试缓存在列表项的 getView() 中返回的视图，以便稍后更改图像和文本颜色。这通常有效，但例如，如果其中一个列表项打开另一个活动，则视图会以某种方式丢失并且突出显示的状态会无限期保持。我已经尝试过调试，如果我使用调试器进行调试，它可以正常工作。

此外，重用 cachedView 似乎没有什么好处，而且完全把事情搞砸了，所以我只是每次都为列表项膨胀一个新视图（这一定是低效的）。

以防万一，这是我用于自定义列表适配器的自定义列表项的代码：

```
public class MyListItem extends AbstractListItem
{
    private int iconResource, iconHighlightedResource;
    private int textResource;
    private View.OnClickListener onClickListener;
    private LinearLayout currentView;

    private ImageView imgIcon;
    private TextView txtText;
    private ImageView imgArrow;
    private boolean bIsHighlighted;

    public MyListItem(int iconResource, int iconHighlightedResource, int textResource, View.OnClickListener onClickListener)
    {
        this.iconResource = iconResource;
        this.iconHighlightedResource = iconHighlightedResource;
        this.textResource = textResource;
        this.onClickListener = onClickListener;
    }

    public View getView(View cachedView)
    {
        this.currentView = buildView();
        populateView();
        update();
        return this.currentView;
    }

    private LinearLayout buildView()
    {
        LayoutInflater inflater = (LayoutInflater)App.get().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        return (LinearLayout)inflater.inflate(R.layout.my_menu_item, null);
    }
    private void populateView()
    {
        this.imgIcon = (ImageView)this.currentView.findViewById(R.id.img_menu_item_icon);
        this.txtText = (TextView)this.currentView.findViewById(R.id.txt_menu_item_text);
        this.txtText.setText(this.textResource);
        this.txtText.setTypeface(App.fontCommon);
        this.imgArrow = (ImageView)this.currentView.findViewById(R.id.img_menu_item_arrow);
        this.currentView.setOnClickListener(this.onClickListener);
        this.currentView.setOnTouchListener(this.highlighter);
    }

    private View.OnTouchListener highlighter = new View.OnTouchListener()
    {
        @Override
        public boolean onTouch(View v, MotionEvent event)
        {
            int nAction = event.getAction();
            int nActionCode = nAction & MotionEvent.ACTION_MASK;
            switch (nActionCode)
            {
                case MotionEvent.ACTION_DOWN:
                    bIsHighlighted = true;
                    update();
                    break;
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_CANCEL:
                    bIsHighlighted = false;
                    update();
                    break;
            }
            return false;
        }
    };

    private void update()
    {
        if (this.bIsHighlighted)
        {
            updateForHighlightedState();
        }
        else
        {
            updateForNormalState();
        }
    }

    private void updateForHighlightedState()
    {
        Resources r = App.get().getResources();
        this.currentView.setBackgroundResource(R.drawable.button_beveled_m_call_to_action_taking_input);
        this.imgIcon.setImageResource(this.iconHighlightedResource);
        this.txtText.setTextColor(r.getColor(R.color.white));
        this.imgArrow.setImageResource(R.drawable.arrow_highlighted);
    }
    private void updateForNormalState()
    {
        Resources r = App.get().getResources();
        this.currentView.setBackgroundColor(r.getColor(R.color.white));
        this.imgIcon.setImageResource(this.iconResource);
        this.txtText.setTextColor(r.getColor(R.color.text_dark));
        this.imgArrow.setImageResource(R.drawable.arrow);
    }
} 
```

这是布局文件（xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="@color/white"
    android:gravity="center_vertical"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/img_menu_item_icon"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/info" />

    <TextView
        android:id="@+id/txt_menu_item_text"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="24dp"
        android:text="Menu item"
        android:textColor="@color/text_dark"
        android:layout_marginLeft="5dp" />

    <ImageView
        android:id="@+id/img_menu_item_arrow"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/arrow" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T15:00:15.570

经过大量的试验终于成功了：列表项布局中的每个子视图都必须有`android:duplicateParentState="true"`. 然后他们都可以只使用选择器可绘制对象。代码内部不需要额外的努力。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="@drawable/my_item_bg"
    android:gravity="center_vertical"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/img_menu_item_icon"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/selector_info"
        android:duplicateParentState="true" />

    <TextView
        android:id="@+id/txt_menu_item_text"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="24dp"
        android:text="Menu item"
        android:textColor="@drawable/selector_color_my_button_text"
        android:layout_marginLeft="5dp"
        android:duplicateParentState="true" />

    <ImageView
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/selector_arrow"
        android:duplicateParentState="true" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T12:45:46.397

您应该创建自定义可绘制选择器，并将它们设置为列表视图元素的背景。

第 1 步，创建另一个布局（在本例中命名为 layout_selected），具有适合您按下状态的背景颜色（如您提供的布局文件，但将线性的背景属性设置为另一种颜色）。

然后您将定义一个可绘制选择器，该选择器将放置在您的可绘制文件夹中），定义应在哪个实例中使用哪个背景。这看起来像这样：

```
<!-- pressed -->
<item android:drawable="@drawable/layout_selected" android:state_pressed="true"/>
<!-- focused -->
<item android:drawable="@drawable/layout_normal" android:state_focused="true"/>
<!-- default -->
<item android:drawable="@drawable/layout_normal"/> 
```

最后，要在列表中使用它，当您为适配器设置布局时，请将其设置为我们刚刚创建的选择器，而不是您的标准布局。

也许有点难以解释，但您想使用“可绘制选择器”来完成您想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T12:48:46.930

我建议为列表视图添加 ViewHolder 模式。这将优化您的列表视图绘图和创建 UI。

此外，我们可以使用 setTag 来保存行的实例。在那里你可以处理触摸事件。

# css - 如何在中间元素周围设置适当的边框？

> ID：13625913
> 
> 赞同：1
> 
> 时间：2012-11-29T12:31:58.620
> 
> 标签：css

如何在 midItem 元素周围设置适当的边框？

[http://jsfiddle.net/PmfLm/](http://jsfiddle.net/PmfLm/)

这是同一个小提琴的缩小代码，

```
<!DOCTYPE html>
<meta charset="utf-8"> 
<html>
<head>
    <style type="text/css">
    span,.midItem {
        border-style: solid;
    }
    .midItem {
        border-color: blue;
        padding: 5px;
    }
    p {
        text-align:justify;     
    }
    .leftPage,.rightPage{
        display:inline-block;
        width: 33%;
        padding: 5px;
    }
    .centerBox {
        display:table-cell;
        text-align: center;
        vertical-align: middle;
    }
    .leftBox,.rightBox {
        display: table;
        border-style:dotted; 
        border-width:5px;
        width: 100px;
        height: 100px;
        border-color:green;
    }
    .leftBox,.leftPage {
        float:left; 
    }
    .rightBox,.rightPage {
        float:right; 
    }
    </style>
</head>
<body>
<span class="leftPage"><span class="leftBox"><p class="centerBox">Leftbox</p></span>
<p>Some Text</p>
</span>
<span class="rightPage"><span class="rightBox"><p class="centerBox">rightBox</p></span>
<p>SomeText</p>
</span>
<p class="midItem">SomeText</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:35:58.790

没有正确回答你的问题，但你需要这样的东西吗？如果是，则清除浮动，`overflow: hidden;`用于容器 div

[**演示**](http://jsfiddle.net/PmfLm/2/)

CSS

```
span,.midItem {
    border-style: solid;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:43:38.833

如果您使用 table-cell 在所有元素中获得相同的高度，那么您应该将其设置为所有三个元素

```
.midItem {
    border-color: blue;
    padding: 5px;
    display:table-cell;
}
.leftBox,.leftPage {
    display:table-cell;
}
.rightBox,.rightPage {
    display:table-cell;
} 
```

[http://jsfiddle.net/PmfLm/3/](http://jsfiddle.net/PmfLm/3/)

# iphone - cocos2d 我的图像视网膜没有调整大小

> ID：13625914
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:31:59.573
> 
> 标签：iphone, xcode, cocos2d-iphone, retina-display

我在 cocos2d 视网膜图片的应用程序中遇到问题。当我运行应用程序时，会显示图像视网膜，但不会调整大小。帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:17:19.387

首先检查您的应用程序是否启用。

`if( ! [director_ enableRetinaDisplay:YES] )`

其次，您的图像命名如下：

```
[sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];      // Default on iPhone RetinaDisplay is "-hd"
[sharedFileUtils setiPadSuffix:@"-ipad"];                   // Default on iPad is "ipad"
[sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];    // Default on iPad RetinaDisplay is "-ipadhd" 
```

image.png（正常 - 尺寸为 320x480）

image-hd.png（视网膜 - 尺寸为 640x960）

image-ipad.png（普通 ipad - 尺寸为 1024x768）

image-ipadhd.png（ipad 视网膜 - 尺寸为 2048x1536）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:33:07.230

请查看[苹果文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)以获取启动图像（所有应用程序都需要）。

由于 iPhone 5 在 iOS6-sdk 中带有不同的屏幕分辨率。

您需要做的就是创建一个名为`Default-568h@2x.png`resolution 的启动文件`1136x640`，并将其放在您的 Resources/iphone 文件夹中。

如果您将应用程序从较旧的 sdk 更新到较新的 sdk，请检查您的 plist 文件和启动映像的选项。

# bash - 解析日志文件的最佳方式

> ID：13625915
> 
> 赞同：2
> 
> 时间：2012-11-29T12:32:05.227
> 
> 标签：bash, shell, logging, sed, grep

我有一个看起来像这样的日志文件：

```
Client connected with ID 8127641241
< multiple lines of unimportant log here>
Client not responding
Total duration: 154.23583
Sent: 14
Received: 9732
Client lost

Client connected with ID 2521598735
< multiple lines of unimportant log here>
Client not responding
Total duration: 12.33792
Sent: 2874
Received: 1244
Client lost 
```

该日志包含许多以 . 开头`Client connected with ID 1234`和结尾的块`Client lost`。他们永远不会混淆（一次只有一个客户）。

我将如何解析此文件并生成如下统计信息：

![在此处输入图像描述](../Images/504b3ecaf4f35c634bcd44511630f8c7.png)

我主要是询问解析过程，而不是格式。

我想我可以遍历所有行，在找到`Client connected`一行时设置一个标志并将 ID 保存在一个变量中。然后 grep 行，保存值，直到找到该`Client lost`行。这是一个好方法吗？有更好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:17:59.030

这是使用的快速方法`awk`：

```
awk 'BEGIN { print "ID Duration Sent Received" } /^(Client connected|Total duration:|Sent:)/ { printf "%s ", $NF } /^Received:/ { print $NF }' file | column -t 
```

结果：

```
ID          Duration   Sent  Received
8127641241  154.23583  14    9732
2521598735  12.33792   2874  1244 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:10:58.907

如果您确定日志文件不会有错误，并且字段始终按相同的顺序排列，则可以使用以下内容：

```
#!/bin/bash

ids=()
declare -a duration
declare -a sent
declare -a received
while read _ _ _ _ id; do
   ids+=( "$id" )
   read _ _ duration[$id]
   read _ sent[$id]
   read _ received[$id]
done < <(grep '\(^Client connected with ID\|^Total duration:\|^Sent:\|Received:\)' logfile)

# printing the data out, for control purposes only
for id in "${ids[@]}"; do
   printf "ID=%s\n\tDuration=%s\n\tSent=%s\n\tReceived=%s\n" "$id" "${duration[$id]}" "${sent[$id]}" "${received[$id]}"
done 
```

输出是：

```
$ ./parsefile
ID=8127641241
    Duration=154.23583
    Sent=14
    Received=9732
ID=2521598735
    Duration=12.33792
    Sent=2874
    Received=1244 
```

但数据存储在相应的关联数组中。这是相当有效的。在另一种编程语言（例如 perl）中它可能会稍微高效一些，但是由于您只用 和 标记了您的帖子，`bash`我想我完全回答了您的问题。`sed``grep`

解释：`grep`只过滤我们感兴趣的行，而 bash 只读取我们感兴趣的字段，假设它们总是以相同的顺序出现。该脚本应该易于理解并根据您的需要进行修改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T13:18:36.190

awk：

```
awk 'BEGIN{print "ID Duration Sent Received"}/with ID/&&!f{f=1}f&&/Client lost/{print a[1],a[2],a[3],a[4];f=0}f{for(i=1;i<=NF;i++){
        if($i=="ID")a[1]=$(i+1)
        if($i=="duration:")a[2]=$(i+1)
        if($i=="Sent:")a[3]=$(i+1)
        if($i=="Received:")a[4]=$(i+1)
}}'log 
```

如果你的数据块之间总是有一个空行，上面的 awk 脚本可以简化为：

```
 awk -vRS="" 'BEGIN{print "ID Duration Sent Received"}
{for(i=1;i<=NF;i++){
        if($i=="ID")a[1]=$(i+1)
        if($i=="duration:")a[2]=$(i+1)
        if($i=="Sent:")a[3]=$(i+1)
        if($i=="Received:")a[4]=$(i+1)
}print a[1],a[2],a[3],a[4];}' log 
```

输出：

```
ID Duration Sent Received
8127641241 154.23583 14 9732
2521598735 12.33792 2874 1244 
```

如果您想获得更好的格式，请将输出通过管道传输到`|column -t`

你得到：

```
ID          Duration   Sent  Received
8127641241  154.23583  14    9732
2521598735  12.33792   2874  1244 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T13:30:18.023

中的一个解决方案`perl`

```
#!/usr/bin/perl

use warnings;
use strict;

print "\tID\tDuration\tSent\tReceived\n";

while (<>) {
  chomp;
  if (/Client connected with ID (\d+)/) {
    print "$1\t";
  }
  if (/Total duration: ([\d\.]+)/) {
    print "$1\t";
  }
  if (/Sent: (\d+)/) {
    print "$1\t";
  }
  if (/Received: (\d+)/) {
    print "$1\n";
  }
} 
```

样本输出：

```
 ID  Duration    Sent    Received
8127641241  154.23583   14  9732
2521598735  12.33792    2874    1244 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T13:10:15.473

### 使用段落模式啜饮文件

使用 Perl 或 AWK，您可以使用一种特殊的段落模式来插入记录，该模式使用记录之间的空白行作为分隔符。在 Perl 中，用于`-00`使用段落模式；在 AWK 中，您将*RS*变量设置为空字符串（例如`""`）以执行相同的操作。然后您可以解析每条记录中的字段。

### 使用面向行的语句

或者，您可以使用 shell while 循环一次读取每一行，然后使用 grep 或 sed 解析每一行。您甚至可以使用 case 语句，具体取决于解析的复杂性。

例如，假设您的记录中始终有 5 个匹配字段，您可以执行以下操作：

```
while read; do
    grep -Eo '[[:digit:]]+'
done < /tmp/foo | xargs -n5 | sed 's/ /\t/g' 
```

循环将产生：

```
23583   14  9732    2521598735  33792
2874    1244    8127641241  23583   14
9732    2521598735  33792   2874    1244 
```

您当然可以使用格式，添加标题行等等。关键是你必须知道你的数据。

AWK、Perl 甚至 Ruby 是解析面向记录格式的更好选择，但如果您的需求是基本的，shell 肯定是一个选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T14:43:34.843

Perl 的一个简短片段：

```
perl -ne '
    BEGIN {print "ID Duration Sent Received\n";}
    print "$1 " if /(?:ID|duration:|Sent:|Received:) (.+)$/;
    print "\n" if /^Client lost/;
' filename | column -t 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T15:12:35.843

```
awk -v RS= -F'\n' '
BEGIN{ printf "%15s%15s%15s%15s\n","ID","Duration","Sent","Received" }
{
   for (i=1;i<=NF;i++) {
      n = split($i,f,/ /)    
      if ( $i ~ /^(Client connected|Total duration:|Sent:|Received:)/ ) {
         printf "%15s",f[n]
      }
   }
   print ""
}' 
```

# jqgrid - 将新的按钮列添加到现有的 Jqgrid 并使用按钮访问行数据

> ID：13625919
> 
> 赞同：1
> 
> 时间：2012-11-29T12:32:10.183
> 
> 标签：jqgrid

我的 jqgrid 在每一行都有数据，对于每一行我应该在网格中添加一个按钮，单击一个按钮应该访问行数据并生成相同的图形...帮助我如何添加一个带有按钮的新列以及如何获取行数据

# c# - 将 XDR 转换为 XSD

> ID：13625921
> 
> 赞同：0
> 
> 时间：2012-11-29T12:32:25.797
> 
> 标签：c#, xml, xsd, schema

我有一个[这种](http://msdn.microsoft.com/en-us/library/windows/desktop/ms760255%28v=vs.85%29.aspx)格式的 xml 模式文档

```
<Schema xmlns="urn:schemas-microsoft-com:xml-data" 
  xmlns:dt="urn:schemas-microsoft-com:datatypes">
  <AttributeType name="scale" default="4.0"/>
  <ElementType name="GPA" content="textOnly" dt:type="float">
    <attribute type="scale"/>
  </ElementType>
  <AttributeType name="studentID"/>
  <ElementType name="student" content="eltOnly" model="open" order="many">
    <attribute type="studentID"/>
    <element type="GPA"/>
  </ElementType>
</Schema> 
```

我想从给定的模式生成 C# 中的类。我在网上查到 XSD.exe 只能从 W3C XML Schemas 生成类。有没有办法将此格式转换为 W3C？

我是 XSD 的新手，并尝试重写它，但遇到了很多错误。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:39:16.843

你可以试试这个：

[C# 从 XSD 自动生成类对象](https://stackoverflow.com/questions/1709697/c-sharp-auto-generation-of-class-objects-from-xsd)

或者，我刚刚编写了一个开源的通用建模器。您可以使用它以您喜欢的任何语言生成课程。

[https://github.com/homer6/modeler](https://github.com/homer6/modeler)

如果你 fork 粗略的cppmodeler 分支，它会类似于 C#。要么这样，要么我可以专门为你设计。

它不是基于 XSD，但我可以适应它。我计划在接下来的几天内编写对多重性的支持。

这是示例格式：[https ://github.com/homer6/modeler/blob/crudecppmodeler/simple.jm](https://github.com/homer6/modeler/blob/crudecppmodeler/simple.jm)

希望有帮助...

# php - date_parse_from_format 到 unix 时间戳

> ID：13625922
> 
> 赞同：4
> 
> 时间：2012-11-29T12:32:26.043
> 
> 标签：php

我有一个关于`date_parse_from_format()`方法的问题：

```
$parsed = date_parse_from_format("Y d M H:i T", '2012 28 Nov 21:00 CET'); 
```

> 返回具有给定日期详细信息的关联数组。

这将返回一个包含一些日期信息的数组。但是有什么方法可以将其转换为 unix 时间戳？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T12:45:52.647

约翰，

下面是一个如何在您的场景中实施 mktime 的确切示例：

```
$parsed = date_parse_from_format("Y d M H:i T", '2012 28 Nov 21:00 CET');
$new = mktime(
        $parsed['hour'], 
        $parsed['minute'], 
        $parsed['second'], 
        $parsed['month'], 
        $parsed['day'], 
        $parsed['year']
);
echo $new; //returns: 1354136400 
```

* * *

为了将来参考，您可以使用`var_dump()`或`print_r()`在数组上查看如何访问嵌套值。

**$parsed 的 var_dump**

```
array (size=16)
  'year' => int 2012
  'month' => int 11
  'day' => int 28
  'hour' => int 21
  'minute' => int 0
  'second' => int 0
  'fraction' => boolean false
  'warning_count' => int 0
  'warnings' => 
    array (size=0)
      empty
  'error_count' => int 0
  'errors' => 
    array (size=0)
      empty
  'is_localtime' => boolean true
  'zone_type' => int 2
  'zone' => int -60
  'is_dst' => boolean false
  'tz_abbr' => string 'CET' (length=3) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T12:39:34.170

[您可以通过尝试使用mktime()](http://ie.php.net/manual/en/function.mktime.php)作为日期来获取 UNIX 时间戳。

**例如：**

```
echo mktime(12, 20, 0, 10, 4, 2012 ); 
```

你会得到这样的输出`1349353200`

如果您想要上午/下午，只需在下午添加 12 小时。

**例如：**

```
mktime($isAM ? $hrs : ($hrs + 12), $mins, $secs, $m, $d, $y); 
```

你也可以使用 strtotime()：

[strtotime()](http://ie.php.net/strtotime) - 将任何英文文本日期时间描述解析为 Unix 时间戳

```
echo strtotime("2012-11-03 11:24:00PM"); 
```

你会得到这样的输出`1351985040`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-22T10:12:12.323

在 PHP >=5.3 中，您可以使用 DateTime 构造函数，其功能与`date_parse_from_format`. 加分项：它是单行的。

例如，要将 UK 格式的日期转换为 UNIX 时间戳，我们可以这样做：

```
DateTime::createFromFormat("d/m/Y, H:i", '27/03/2020, 22:00')->getTimestamp()

-> int(1585346400) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:38:23.620

mktime() 应该完全满足您的需求 :) 查看[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)以了解如何使用它！

# microsoft-test-manager - 如何通过命令行从测试计划内的测试套件运行测试用例

> ID：13625924
> 
> 赞同：2
> 
> 时间：2012-11-29T12:32:28.510
> 
> 标签：microsoft-test-manager, tcm

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\TCM.exe" run /create "/title:Overnight Build Run" /planid:8 /collection:http://hahaha:8080/tfs/DevelopmentCollection /teamproject:SQL"/querytext:SELECT * FROM TestSuite WHERE Planid='8'" "/settingsname:SoakTest" /owner:test\test /builddir:\\wxxx\Builds\SQL\Live "/testenvironment:Soak" /include 
```

它运行测试计划中的所有测试我只想从该测试计划内的测试套件中运行测试，查询应该是什么？

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:12:27.027

您可以使用参数 /suiteid 调用 tcm.exe 来运行属于特定测试套件的测试用例：

```
TCM.exe run /create /title:<Title> /planid:<PlanId> /suiteid:<SuiteId> /collection:http://hahaha:8080/tfs/DevelopmentCollection /teamproject:SQL /settingsname:SoakTest /owner:test\test /builddir:\\wxxx\Builds\SQL\Live /testenvironment:Soak /include 
```

采用

```
tcm.exe suites /list /planid:<your plan id> /collection:<CollectionURL> /teamproject:<Team Project name> 
```

列出属于特定测试计划的所有测试套件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:40:34.303

这就是如何找出测试套件 ID 号

```
cd C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE

TCM suites  /list  /planid:8 /collection:your peoject TFS URL /teamproject:Project Name 
```

# tomcat - Netbeans7.1.1 - tomcat 6.0.35 部署错误 - 部署错误：未授权访问Tomcat服务器

> ID：13625930
> 
> 赞同：0
> 
> 时间：2012-11-29T12:32:51.560
> 
> 标签：tomcat, web-applications, netbeans-7

我在 Netbeans 中创建了一个 Java Web 项目，默认情况下创建了 index.jsp 文件，其中包含“Hello World”。我试图运行它，但得到以下错误 -

`Deployment error: Access to Tomcat server has not been authorized. Set the correct username and password with the "manager" role in the Tomcat customizer in the Server Manager.See the server log for details.`

在阅读了一些博客之后，我修改了 tomcat-users.xml 文件，目前它看起来像 -

```
<tomcat-users>
  <!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
-->
  <role rolename="manager"/>
  <role rolename="admin"/>
  <role rolename="standard"/>
  <user username="admin" password="admin" roles="admin,manager,standard"/>
</tomcat-users> 
```

此外，检查`Tools->Servers->Connection`netbeans 下的用户名和密码及其正确，即 admin/admin。

但仍然得到相同的部署错误。

它在行中显示错误`build-impl.xml`-

```
 <nbdeploy clientUrlPart="${client.urlPart}" debugmode="true" forceRedeploy="${forceRedeploy}"/> 
```

做了清洁和建造，但没有运气。

Apache Tomcat 日志显示 -

```
Nov 29, 2012 6:10:28 PM org.apache.catalina.core.StandardHostValve custom
SEVERE: Exception Processing ErrorPage[errorCode=401, location=/401.jsp]
org.apache.jasper.JasperException: Unable to compile class for JSP
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:604)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:438)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:421)
    at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:342)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.FileNotFoundException: C:\Program Files (x86)\apache-tomcat-6.0.35\work\Catalina\localhost\manager\org\apache\jsp\_401_jsp.java (The system cannot find the path specified)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
    at org.apache.jasper.compiler.Compiler.setupContextWriter(Compiler.java:298)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:230)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:354)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    ... 20 more

Nov 29, 2012 6:10:36 PM org.apache.catalina.core.StandardHostValve custom
SEVERE: Exception Processing ErrorPage[errorCode=401, location=/401.jsp]
org.apache.jasper.JasperException: Unable to compile class for JSP
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:604)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:438)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:421)
    at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:342)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.FileNotFoundException: C:\Program Files (x86)\apache-tomcat-6.0.35\work\Catalina\localhost\manager\org\apache\jsp\_401_jsp.java (The system cannot find the path specified)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
    at org.apache.jasper.compiler.Compiler.setupContextWriter(Compiler.java:298)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:230)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:354)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    ... 20 more

Nov 29, 2012 6:10:36 PM org.apache.catalina.core.StandardHostValve custom
SEVERE: Exception Processing ErrorPage[errorCode=401, location=/401.jsp]
org.apache.jasper.JasperException: org.apache.jasper.JasperException: Unable to load class for JSP
    at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:161)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:340)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:438)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:421)
    at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:342)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.jasper.JasperException: Unable to load class for JSP
    at org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:630)
    at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:149)
    ... 20 more
Caused by: java.lang.ClassNotFoundException: org.apache.jsp._401_jsp
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:134)
    at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66)
    at org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:628)
    ... 21 more 
```

有人可以建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:51:51.180

我想到了。对于netbeans 7，还需要tomcat 7。Tomcat 6 没有工作。

# ruby-on-rails - 使用 activerecord 搜索的 Ruby 集字典

> ID：13625936
> 
> 赞同：0
> 
> 时间：2012-11-29T12:33:05.843
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 应用程序中，我从 mysql 数据库中获取数据，部分代码：

```
@search = ArtLookup.find(:all, :conditions => ['MATCH (ARL_SEARCH_NUMBER) AGAINST(? IN BOOLEAN MODE) and ARL_KIND = 1', search_condition.gsub(/[^0-9A-Za-z]/, '')]) 
```

但主要问题是我有不同的供应商价目表，并且我在 db 中对相同的变量有不同的编码，例如：

```
LEMFÖRDER 
```

但是我怎样才能为我设置字典`search_condition`，如果我`search_condition`是例如：

```
LEM?FORDER or
LEMFOERDER or
LEMFÖRDER 
```

它会`LEMFÖRDER`在数据库中找到我的吗？

我知道这听起来很奇怪，对不起我的英语，但我在我的例子中解释了一切......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:27:00.277

我认为，在这种情况下，您应该开始使用库来处理全文搜索和其他搜索功能，例如 Solr 或 Sphinx。

看看[http://pat.github.com/ts/en/searching.html](http://pat.github.com/ts/en/searching.html)。

这种复杂性很常见，并且已经在许多算法中实现。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:59:00.877

*如果我正确理解了您的问题*，您希望 Mysql 将这三个值视为同一事物。现在，假设它们在特定语言中被认为是相同的东西（例如，德语中的 ß = ss），Mysql 将根据您的[排序规则设置](http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-sets.html)自动处理这个问题，因此选择正确的排序规则应该会为您修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:49:19.480

您可以通过使用 ActiveRecord 的[AREL](https://github.com/rails/arel)引擎来做到这一点，如下所示：

```
def lookup(*alternatives)
  match_condition = 'MATCH (ARL_SEARCH_NUMBER) AGAINST(? IN BOOLEAN MODE)'

  or_conditions = alternatives.map do |alternative|
    ArtLookup.where(match_condition, alternative).
    where_values.reduce(:and)
  end

  and_condition = ArtLookup.where('ARL_KIND = 1').where_values.reduce(:and)

  # Build a disjunction
  conditions = or_conditions.shift

  or_conditions.each do |condition|
    conditions = conditions.or(condition)
  end

  # Build the final conjunction
  conditions = conditions.and(and_condition)

  ArtLookup.where(conditions)
end 
```

然后你可以找到如下对象：

```
@search = lookup('LEM?FORDER', 'LEMFOERDER', 'LEMFÖRDER') 
```

或者直接提供一个数组：

```
alternatives = [
  'LEM?FORDER',
  'LEMFOERDER',
  'LEMFÖRDER'
]

@search = lookup(*alternatives) 
```

我知道这对于它正在做的简单事情来说代码太多了。但它应该这样做，我不知道有更好的方法。我没有测试该代码，因此它可能包含一些小错误。

# shell - Shell脚本，检查作业副本违规

> ID：13625937
> 
> 赞同：1
> 
> 时间：2012-11-29T12:33:12.567
> 
> 标签：shell, diff, similarity

我打算检查 .c 代码中提交的硬件答案。

有人有链接或 bash shell 脚本代码来检查文件相似性（相似行的百分比等）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:56:51.333

**Ready-to-use-programm**
一方面，悉尼大学有一个名为[Sherlock](http://sydney.edu.au/engineering/it/~scilect/sherlock/)的小 C 程序，它完全可以满足您的需求：显示相似度百分比。你只需要自己编译它，但我认为这不会是一个问题。

**自己做**
另一方面，如果您使用的是基于 unix 的系统并想自己做这一切，可以使用以下`comm`命令：

```
compare two sorted files line by line and write to standard output: 
the lines that are common, plus the lines that are unique.
(taken from the manpage) 
```

这里需要注意的重要一点是，它`comm`仅适用于已**排序**的文件，因此您必须先对它们进行排序。如果你有两个文件，比如说`first.txt`你`second.txt`可以`comm`这样使用：

```
comm -12 <(sort first.txt) <(sort second.txt) 
```

指定的 -`-12`选项会抑制两个文件中唯一的行，因此您只会得到两个文件上出现的行。

# java - 使用 iframe 在浏览器中显示 tiff 图像

> ID：13625942
> 
> 赞同：1
> 
> 时间：2012-11-29T12:33:26.407
> 
> 标签：java

我在 jsp 文件中使用以下代码显示 pdf 图像：

```
showcaflink="ImageGet?ImagePath="+ImagePath+"'";

<a href='"+showcaflink+"' id='autoshowcaf' onclick='hideMe()' target='myIframe' class='content3' style='font-family:Verdana; color:#06C; text-decoration:none; font-size:12px;></a>

//using iframe as

<iframe src="" name="myIframe" width="100%" height="700" frameborder="0" style="visibility:hidden; overflow:auto;" id="myframe"></iframe> 
```

它适用于 pdf 图像，但不适用于始终下载的 tiff 图像。有什么建议么？它在java中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:48:30.410

显示 PDF 是浏览器的功能。如果您使用旧版本的浏览器，即使是 pdf 文件也会被下载。

# jquery - ASP.NET MVC 验证成功时将颜色从红色变为绿色

> ID：13625943
> 
> 赞同：0
> 
> 时间：2012-11-29T12:33:33.603
> 
> 标签：jquery, asp.net-mvc

我已经使用数据注释成功地实现了对所有字段的验证，但是现在我想要的是，当在我的字段中输入的值有效时，我希望它的颜色从默认的红色变为绿色，表明它是成功。

对此有任何想法..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T12:39:15.517

将输入从错误更改为有效后，Jquery 会自动添加有效类，因此只需为其添加样式

CSS：

```
input.valid
{
    border: 1px solid Green;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T14:10:54.097

在您的默认 css 文件中有以下代码：

```
/* styles for validation helpers */
.field-validation-error
{
    color: #e80c4d;
    font-weight: bold;
}

.field-validation-valid
{
    display: none;
}

input.input-validation-error
{
    border: 1px solid #e80c4d;
}

input[type="checkbox"].input-validation-error
{
    border: 0 none;
}

.validation-summary-errors
{
    color: #e80c4d;
    font-weight: bold;
    font-size: 1.1em;
}

.validation-summary-valid
{
    display: none;
} 
```

你可以改变你想要的地方。

# sql - 使用递归 CTE 来解析组，而不是层次结构

> ID：13625944
> 
> 赞同：3
> 
> 时间：2012-11-29T12:33:41.770
> 
> 标签：sql, sql-server, common-table-expression

我正在尝试使用以下示例数据在 SQL Server 中执行递归 CTE

```
Class        Student
------       ------
English      Sally   <- Sally is what were searching for
English      Peter   <- Peter's on same Class as Sally
Swedish      Peter   <- Found because Peter's on this class
Dutch        Peter   <- Found because Peter's on this class
Finnish      Harry   <- Not found, no relation to class or student
Swedish      Tim     <- Found because Peter's on Swedish class
Spanish      Lauren  <- Not found, no relation to class or student
Spanish      Colin   <- Not found, no relation to class or student 
```

所以我需要一个 CTE，我将“Sally”作为参数，它会找出与 Sally 相关的所有不同班级，然后是与 Sally 所在班级相关的所有学生，然后是与同一班级的学生相关的所有班级Sally，依此类推，直到找不到更多行。

但我只是不知道如何编写连接，这是我尝试过的，但惨遭失败：

```
WITH myCTE (Class, Student) AS
(
    SELECT Class, Student FROM TABLE1 WHERE TABLE1.Student= 'Sally'
    UNION ALL
    SELECT t.Class, t.Student FROM TABLE1 t
    JOIN myCTE t2 ON t2.Class = t.Class
)
SELECT * FROM myCTE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:34:25.280

第一个问题是你有无限递归：Sally 和 Peter 一起学习英语，谁和 Sally 一起学习英语，谁和 Peter 一起学习英语……

整理好之后，您需要在递归 CTE 中添加一个额外的查询。您目前正在加入`Class`以获取同一班级的其他学生，但您还需要加入`Student`以获取其他学生的班级。

像这样的东西应该工作：

```
WITH cteSource As
(
   SELECT
      Class,
      Student,
      -- Create a unique ID for each record:
      ROW_NUMBER() OVER (ORDER BY Student, Class) As ID
   FROM
      TABLE1
),
cteRecursive (Class, Student, IDPath) As
(
   SELECT
      Class,
      Student,
      -- Used to exclude records we've already visited:
      Convert(varchar(max), '/' + Convert(varchar(10), ID) + '/')
   FROM
      cteSource
   WHERE
      Student = 'Sally'

   UNION ALL

   -- Students in the same class:
   SELECT
      T.Class,
      T.Student,
      R.IDPath + Convert(varchar(10), T.ID) + '/'
   FROM
      cteSource As T
      INNER JOIN cteRecursive As R
      ON T.Class = R.Class
   WHERE
      CharIndex('/' + Convert(varchar(10), t.ID) + '/', R.IDPath) = 0

   UNION ALL

   -- Other classes for the students:
   SELECT
      T.Class,
      T.Student,
      R.IDPath + Convert(varchar(10), T.ID) + '/'
   FROM
      cteSource As T
      INNER JOIN cteRecursive As R
      ON T.Student = R.Student
   WHERE
      CharIndex('/' + Convert(varchar(10), t.ID) + '/', R.IDPath) = 0
)
SELECT
   Class,
   Student,
   IDPath
FROM
   cteRecursive
; 
```

使用您的测试数据，您将获得以下结果：

```
English   Sally   /7/
English   Peter   /7/5/
Dutch     Peter   /7/5/4/
Swedish   Peter   /7/5/6/
Swedish   Tim     /7/5/6/8/
Dutch     Peter   /7/5/6/4/
Swedish   Peter   /7/5/4/6/
Swedish   Tim     /7/5/4/6/8/ 
```

如果您使用的是 SQL 2008 或更高版本，则使用 a 可能会获得更好的性能`IDPath`，`HierarchyID`但您需要使用真实数据进行测试。

**编辑**
您可能需要将最终选择更改为：

```
SELECT DISTINCT
   Class,
   Student
FROM
   cteRecursive 
```

处理有多个路径指向同一记录的情况。例如，“Dutch/Peter”、“Swedish/Peter”和“Swedish/Tim”都出现了两次。

# android - 将 xml 定义的布局与编程的布局相结合

> ID：13625947
> 
> 赞同：2
> 
> 时间：2012-11-29T12:33:51.990
> 
> 标签：android

我编写了使用完全由 xml 定义的布局的活动，例如：

```
setContentView(R.layout.my_layout_defined_by_xml); 
```

我还编写了使用完全以编程方式创建的布局的活动，例如：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    game_frame_layout = new FrameLayout(getApplicationContext());

    game_frame_layout.addView(some_view_I_made);

    setContentView(game_frame_layout); 
```

但是我从来没有做过，也不知道怎么做，就是将两者结合起来（这甚至可以做到吗？）例如，假设我想让整个屏幕充满在 xml 中定义的按钮和视图，但希望以编程方式在某处添加一个额外的按钮。或者相反，我可能希望以编程方式创建的布局包括由 xml 定义的子布局。

我怀疑它实际上可能非常微不足道，但一个问题是我不知道如何将 layoutResID（如 R.id.my_layout_defined_by_xml）转换为布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:36:01.370

您可以像这样从 xml 文件创建一个 View 对象：

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.your_layout_file_name, null); 
```

反之亦然：您可以创建一个扩展 View 的类，例如 MyTextView，当您想将其包含在您的 xml 文件中时，您可以这样做：

```
<com.example.mypackage.MyTextView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:clickable="false" /> 
```

# java - 为什么在这种情况下为原始工作返回 null ？

> ID：13625956
> 
> 赞同：18
> 
> 时间：2012-11-29T12:34:18.317
> 
> 标签：java, jls

这段丑陋的代码确实可以编译，但如果`s == null`

```
public static boolean isNullOrEmpty(String s)
{
    return s != null ? s.isEmpty() : null;
} 
```

虽然这不是（如预期的那样）：

```
public static boolean isNullOrEmpty(String s)
{
    if(s != null)
        return s.isEmpty();
    else
        return null;
} 
```

我知道它们都明显是错误的，但是当我在我们的源代码中找到第一段代码时，我很惊讶它确实编译了。

编辑：这是 Java 7 中 JLS 的相关部分。我猜第一个语句会适用，但粗体的语句会适用。

**15.25 条件运算符？：**

[...]

条件表达式的类型确定如下：

[...]

*   如果第二个和第三个操作数之一是原始类型 T，而另一个的类型是对 T 应用装箱转换（第 5.1.7 节）的结果，则条件表达式的类型是 T。

[...]

*   **否则，第二个和第三个操作数分别是 S1 和 S2 类型。令 T1 为对 S1 应用装箱转换产生的类型，令 T2 为对 S2 应用装箱转换产生的类型。条件表达式的类型是将捕获转换 (§5.1.10) 应用于 lub(T1, T2) (§15.12.2.7) 的结果。**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T12:36:46.600

**第一个**有一个三元运算符，其结果类型为`Boolean`. NPE 正在将 a 转换`null`为 a `boolean`。

它实际上是这样的：

```
Boolean temp = s != null ? s.isEmpty() : null; //no problems here
return temp; //crash when temp==null 
```

**第二个**是尝试返回错误的类型（对象而不是原始类型） - 因此无法编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:49:12.547

类似于[JAVA 中的三元运算符](https://stackoverflow.com/questions/8098953/tricky-ternary-operator-in-java-autoboxing?lq=1)

三元运算符使用 JLS 中引用的规则进行自动装箱：

[拳击转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)

> 此规则是必要的，因为条件运算符（第 15.25 节）将装箱转换应用于其操作数的类型，并在进一步的计算中使用结果。

**问题在于Java中的自动装箱。问题是由于第二个操作数不是第三个。**

```
public static boolean isNullOrEmpty(String s)
    {
        return s != null ? null : null;
    } 
```

此代码不会编译

[条件运算符的 JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:44:11.743

三元运算符需要为两个操作数找出最合适的返回类型。

因此，它允许对返回类型进行一些“修饰”。

*如您的第一个代码片段所示：*

```
public static boolean isNullOrEmpty(String s)
{
    return s != null ? s.isEmpty() : null;
} 
```

`s.empty()`返回原语`boolean`，而第三个操作数返回`null`. 所以最具体的常见返回类型是`Boolean`. 编译器工作就像将行替换为：

```
return s != null ? s.isEmpty() : (Boolean)null; 
```

返回类型方法需要一个`boolean`原语，所以编译器说：“酷，我只需要拆箱我的结果！”。不幸的是，`null`它不是不可拆箱的，并且会导致丑陋的 NPE。

*使用您的第二个片段：*

```
public static boolean isNullOrEmpty(String s)
{
    if(s != null)
        return s.isEmpty();
    else
        return null;
} 
```

由于编译器没有链接此代码中的两个返回语句=> 对它来说可能是一项太难的工作，因此不会对预返回类型进行额外的“抛光”。

因此，在这种情况下，代码甚至不编译是合乎逻辑的，因为`null`它与`Boolean`! 因此，不会发生任何类型的演员表。

要编译它，它应该写成：

```
public static boolean isNullOrEmpty(String s)
    {
        if(s != null)
            return s.isEmpty();
        else
            return (Boolean)null;
    } 
```

但不会阻止著名的 NPE 在尝试拆箱时发生；）

# c# - Nhibernate 实体更新一致性

> ID：13625958
> 
> 赞同：0
> 
> 时间：2012-11-29T12:34:23.410
> 
> 标签：c#, nhibernate, caching

如果我有一个包含 UserPhoto 对象集合的 User 对象，该对象当前正在使用 NHibernate 进行级联更新。所以你保存了用户对象，所有的 UserPhoto 也被保存了。

有没有一种方法可以通过保存 UserPhoto 来上传新的 UserPhoto，而不必保存整个用户对象层次结构？

我努力了

```
userPhoto.User = user; // to set the parent object which will provide the UserPhoto with the correct UserId when saving it
session.Save(userPhoto); 
```

这可以使用正确的 UserId 很好地保存数据库中的行，但是如果我这样做了

```
session.Get<User>(userId) 
```

它不包含新照片。我猜 NHibernate 最初在代码中获取用户对象时正在缓存它，然后我在 DB 级别添加用户照片，但 NHibernate 缓存仍然包含不引用新照片的早期用户对象，我添加新照片后，需要为该用户对象刷新 NHibernate 缓存。这是正确的，我该如何刷新？我正确使用 NHibernate 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:43:24.623

NHibernate ISession 具有一级缓存或实体缓存，这对于加载用户两次时的引用相等性很重要。你必须

*   打电话`session.Refresh(user)`或
*   将照片添加到用户收藏

我倾向于第二个，因为它可以防止在会话处于活动状态并且不需要数据库往返时损坏模型（用户）。

如果您不知道用户是否已经加载并且只需要参考

```
var user = session.Load<User>(userId);
userPhoto.User = user;
session.Save(userPhoto);

if (NHibernateUtil.IsInitialized(user))
{
    user.Photos.Add(userPhoto);
} 
```

# objective-c - 需要一个浮点数以标准形式显示 Obj C

> ID：13625959
> 
> 赞同：2
> 
> 时间：2012-11-29T12:34:27.113
> 
> 标签：objective-c, ios, xcode, floating-point, decimal

我有一个应用程序正在计算过滤器的值。这些值通常在 10^-9 值范围内。目前这个计算的值被发送到一个浮点数。有没有一种简单的方法可以强制这个数字以标准形式显示？即 x*10^-9 而不是长小数。问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:42:34.420

你想要[`NSNumberFormatter`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)上课。具体来说，您要将`numberStyle`属性设置为`kCFNumberFormatterScientificStyle`. 就像是：

```
NSNumberFormatter *numFormatter = [[NSNumberFormatter alloc] init];
numFormatter.numberStyle = kCFNumberFormatterScientificStyle;
NSString *result = [numFormatter stringFromNumber:[NSNumber numberWithFloat:someFloat]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:03:51.340

有一个用于以标准格式准备字符串的修饰符：`%g`和`%G`：

这不会**强制**使用标准形式，但非常大和非常小的数字将采用标准形式而没有尾随零。看看我加粗的部分。

> *   **％G**
> 
> “double”参数以科学或标准格式输出。**仅当转换产生的指数小于 -4 或大于精度时才使用科学计数法**；否则使用标准表示。使用科学记数法，标记指数的“e”是小写的。精度是指所需的有效位数（不一定是小数位数）。从结果中删除尾随零，并且仅当小数点后跟数字时才会出现小数点。
> 
> *   **％G**
> 
> 与 "%g" 格式相同，只是在科学计数法中标记指数的 'E' 为大写。

^(^(^([资源](http://www.thinkage.ca/english/gcos/expl/c/lib/printf.html))))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:39:04.480

```
float yourfloat = [insert here];

float display = yourfloat;

bool neg = false;

if (display < 0)
{
    neg = true;
    display *= -1;
}

int e = 0;

while (display < 1 && display > 0)
{
    display *= 10;
    e++;
}

if (e > 0)
    NSLog(@"%f*10^-%d", display * (neg ? -1 : 1), e);
else
    NSLog(@"%f", display * (neg ? -1 : 1)); 
```

当然，将 替换`NSLog`为字符串，或者您需要输出。

# sql - SQL：每个父亲的平均孩子数

> ID：13625961
> 
> 赞同：0
> 
> 时间：2012-11-29T12:34:31.543
> 
> 标签：sql, average

我必须创建一个 sql 语句来显示父亲和他们的平均孩子数量。

这是我的 sql 脚本：

```
create table breeder (
breederNumber   number(3) primary key,
name            varchar2(20),
residence       varchar2(20),
password        varchar2(20)
);

create table race (
raceCode        varchar2(2) primary key,
raceName        varchar2(20) not null
);

create table sheep (
earTagNumber    number(2) primary key,
father          number(2),
mother          number(2),
raceCode        varchar2(2),
name            varchar2(20),
previousBreeder number(3),
genotype        varchar2(7),
gender          varchar2(1) check (gender = 'M' OR gender = 'F'),

constraint fk_previousBreeder foreign key (previousBreeder) references breeder(breederNummer) on delete cascade,
constraint rk_raceCode foreign key (raceCode) references race(raceCode) on delete cascade,
constraint fk_mother foreign key (mother) references sheep(earTagNumber) on delete cascade,
constraint fk_father foreign key (father) references sheep(earTagNumber) on delete cascade
); 
```

这是我到目前为止所拥有的：

```
select (s1.father), avg(s2.earTagNumber) as averageNumberOfKids
from sheep s1
join sheep s2 on s1.earTagNumber= s2.father
group by s1.father; 
```

输出我得到的：

```
FATHER AVERAGENUMBEROFKIDS
------ -------------------
                      6.75 
```

谁能帮我？

部分测试数据： http: [//pastie.org/5452411](http://pastie.org/5452411)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:30:07.907

这是每个父亲的孩子总数：

```
Select 
  fathers.EarTagNumber,
  fathers.Name,
  Count(*) As NumberOfKids
From
  sheep fathers
    Inner Join 
  sheep children
    On fathers.earTagNumber = children.father
Group By
  fathers.EarTagNumber,
  fathers.Name; 
```

这是孩子的平均人数（孩子总数/父亲人数）

```
Select
  Avg(NumberOfKids) As AvgKids
From (
  Select 
    fathers.EarTagNumber,
    Count(*) As NumberOfKids
  From
    sheep fathers
      Inner Join 
    sheep children
      On fathers.earTagNumber = children.father
  Group By
    fathers.EarTagNumber
) a; 
```

[http://sqlfiddle.com/#!4/e5121/10](http://sqlfiddle.com/#!4/e5121/10)

# javascript - 使 jQuery mouseenter 应用于新的新元素

> ID：13625971
> 
> 赞同：4
> 
> 时间：2012-11-29T12:35:45.897
> 
> 标签：javascript, jquery, html

```
$('.class1').mouseenter(function() {

   $('<div class="class1"> </div>').appendTo('body');

}); 
```

以上是伪代码，它显示了我正在尝试做的事情。我将鼠标悬停在 class1 的一个元素上，然后创建了 class1 的另一个元素。

我的问题是这个`mouseenter`活页夹不会为新创建的 class1 元素触发。我怎样才能让这个`mouseenter`触发器也适用于新创建的元素？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:42:14.197

从 jQuery 1.7 开始，您可以使用 'on' 绑定事件，以便将事件委托给与指定选择器匹配的包含元素。

因此，在您的情况下，将事件绑定到正文，并指定`class1`选择器，如下所示：

```
$('body').on('mouseenter' ,'.class1', function(e) {
    $('<div class="class1"></div>').appendTo('body');
}); 
```

有关更多信息，请参阅此处的文档：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

< 1.7 版本用于实现此目的的函数是 'live()'，这在 1.7 版本中已弃用，取而代之的是升级的 'on()' 方法。有关更多信息，请参阅此处的旧文档：http: [//api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:43:24.770

更好的解决方案是在父元素甚至正文上使用 .on() 。

```
$('body').on('mouseenter', '.class1', function(){
     $(this).append('<div class="class1"> </div>');
}); 
```

这与旧的 live() 事件更相似，因为父级也会在添加到 body 的任何新元素上查找事件。

编辑：不要忘记在该函数中使用 $(this) 而不是强制 jQuery 进行第二次 DOM 查找 :) 抱歉，我没看懂那个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:42:14.150

您可以尝试使用`delegate`or`on`方法（取决于您使用的 jquery 版本）。

基本上，您将委托附加到父元素并听取子元素的操作。

```
$('body').on('mouseenter', '.class1', function() {}); 
```

这仅在`body`元素上注册事件处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T12:54:29.570

[这有效](http://jsfiddle.net/DR2zz/2/)：

```
$('body').mouseenter(addDiv);

function addDiv() {
    $('<div class="class1"> </div>').appendTo('body');
} 
```

新添加的div在使用时[不触发该功能](http://jsfiddle.net/DR2zz/)`$('#container').on('mouseenter', '.class1', addDiv);`

修复了[小提琴](http://jsfiddle.net/DR2zz/2/)和代码。

然而，[Jed Watson](https://stackoverflow.com/users/1744579/jed-watson)提出了一个[更好的建议](https://stackoverflow.com/a/13626088/1835379)

# javascript - 如何为另一个输入附加输入文件类型值

> ID：13625972
> 
> 赞同：0
> 
> 时间：2012-11-29T12:35:49.440
> 
> 标签：javascript, jquery, input

我有个问题。我想将输入文件类型加载的文件的名称传递给文本框中的另一个 - 文本类型，以便文件名的样式有点吸引人......这是我的代码，谢谢帮助。

```
<fieldset>
    <label>
        <input type="text" value="" class="file_name_field">
    </label>
</fieldset>
<fieldset>
    <input type="file" value="wybierz plik " class="add_file_field">
    <span>przeglądaj</span>
</fieldset> 
```

```
$(document).ready(function(){
    var fileName = $('.add_file_field').val();
    $('.file_name_field').val().replace(fileName);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:40:31.043

```
$(function(){
 $('.add_file_field').change(function(){
  $('.file_name_field').val($(this).val());
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:42:03.837

替换我最初的答案：我误解了您问题的性质。

.val() 是典型的 jQuery 函数，因为它是一个 getter 和一个 setter。因此，不带参数的 .val() 返回所选元素的 value 属性，要设置该属性，请调用 .val(newValue)。

您上面的调用从 value 属性中获取字符串对象，然后用新字符串替换它，然后字符串消失，因为您没有在任何地方分配它。

# ios - 如何将双击手势添加到 UITextView

> ID：13625973
> 
> 赞同：4
> 
> 时间：2012-11-29T12:35:52.100
> 
> 标签：ios, uitextview, uitapgesturerecognizer

目前我想让 UITextView 有一个双击手势。UITableView 似乎有自己的双击手势，当我们双击时，会选择一些文本。所以我想将这个默认的双击手势移除到我自己的手势识别器中。我尝试了很多方法，都失败了。似乎没有办法删除 UITextView 的默认识别器。我还想在这个 UITextView 上添加一个透明视图来执行双击事件，但是这个子视图会阻止 UITextView 上的其他手势。是否有一些方法可以将双击手势识别器添加到 UITextView？我真的希望有一个解决方法。

我仍然期待 iOS5 的解决方法 :)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T12:38:08.533

文本视图上附加了许多其他手势识别器。因为你似乎不需要它们。您可以删除它们。

```
myTextView.gestureRecognizers = nil; 
```

在添加双击识别器之前。有用。

然后你可以添加

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(mySelector)];
tapRecognizer.numberOfTapsRequired = 2;
tapRecognizer.numberOfTouchesRequired = 1;
[myTextView addGestureRecognizer:tapRecognizer]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:22:48.240

我在iOS6上有解决方案，我们可以使用UIGestureRecognizerDelegate，并覆盖gestureRecognizerShouldBegin:和gestureRecognizer:shouldReceiveTouch:。在这两个方法中，我们可以检查手势是否为doubleTapGestureForZooming，如果不是返回NO，或者返回YES。这在 iOS6 中完美运行，但在 iOS5 中这两个委托方法尚未被调用，因此 iOS5 可能需要另一种解决方法。最后，我得到了解决方法，我们可以覆盖 UITextView 的 addGestureRecognizer 方法来删​​除默认手势，希望这对其他人有帮助。

PS：UITextView的系统手势我们真的不能移除，我们甚至不能改变他们的属性。似乎当事件发生时，UItextview 的所有手势都会再次添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-02T08:00:56.340

我知道这个问题很老，但为了让未来的搜索者保持最新，我想我会添加另一个从 iOS 7 到 10 对我有用的解决方案。它基本上汇集了[这里](https://stackoverflow.com/questions/6587453/filtering-single-and-double-taps/6587505#6587505)和[这里](https://stackoverflow.com/questions/8876202/uitapgesturerecognizer-single-tap-and-double-tap)讨论的解决方案，但对它们进行了调整以获得`UITextView`识别自定义双击。

它通过子类化`UITextView`并覆盖该`addGestureRecognizer:`方法来实现这一点，以便将我们的自定义回调注入双击手势并配置单击手势以尊重新的双击钩子。

我这样做是`addGestureRecognizer:`因为 a`UITextView`会根据其当前状态不断删除和添加手势，因此您必须不断将其重置。

这段代码应该足以让某人开始：

```
@interface MyCustomTextView ()

/**
 *  we want to keep track of the current single-tap gesture so we can make sure
 *  it waits for a double-tap gesture to fail before firing
 */
@property (weak, nonatomic) UITapGestureRecognizer *singleTap;

/**
 *  we want to keep track of the current double-tap gesture so we can tell a single
 *  tap gesture to ignore this double-tap when the single tap gesture changes
 */
@property (weak, nonatomic) UITapGestureRecognizer *doubleTap;

@end

@implementation MyCustomTextView

/**
 *  this will fire when the text view is double-tapped
 *
 *  @param tgr
 */
- (void)_handleTwoTaps:(UITapGestureRecognizer *)tgr
{
    // ADD CODE HERE
}

/**
 *  the reason why I've overridden this methods is these gestures change quite a bit
 *  depending on the state of the UITextView, (eg, when in focus and out of focus)
 *  and so this provides a reliable way to make sure any new gestures get updated
 *  with custom overrides.
 *
 *  @param gestureRecognizer
 */
- (void)addGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
{
    [super addGestureRecognizer:gestureRecognizer];
    if ([gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]]) {
        UITapGestureRecognizer *tgr = (UITapGestureRecognizer *)gestureRecognizer;
        if ([tgr numberOfTapsRequired] == 1 && [tgr numberOfTouchesRequired] == 1) {
            self.singleTap = tgr;
            if (self.doubleTap) {
                [tgr requireGestureRecognizerToFail:self.doubleTap];
            }

        } else if ([tgr numberOfTapsRequired] == 2 && [tgr numberOfTouchesRequired] == 1) {
            [tgr addTarget:self action:@selector(_handleTwoTaps:)];
            self.doubleTap = tgr;
            if (self.singleTap) {
                [self.singleTap requireGestureRecognizerToFail:tgr];
            }
        }
    }
}

// NOTE: I'm not sure if this is needed but it's been there for years
// and so I thought I would include it just in case
- (void)removeGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
{
    if ([gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]]) {
        UITapGestureRecognizer *tgr = (UITapGestureRecognizer *)gestureRecognizer;
        if ([tgr numberOfTapsRequired] == 2 && [tgr numberOfTouchesRequired] == 1) {
            [tgr removeTarget:self action:@selector(_handleTwoTaps:)];
        }
    }
    [super removeGestureRecognizer:gestureRecognizer];
}

@end 
```

# javascript - 如何在谷歌地图 v3 中禁用默认信息窗口

> ID：13625974
> 
> 赞同：1
> 
> 时间：2012-11-29T12:35:52.710
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在开发一个谷歌地图应用程序，我正在从另一个存储在数据库中的 kml 文件加载多边形。该 kml 文件包含多边形和默认信息窗口（在多边形内单击时），我想禁用该信息窗口。请告诉我该怎么做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:32:33.783

如果您使用 Google Maps API v3 KmlLayer 来显示 KML，则可以使用构造函数中的[suppressInfoWindows:true](https://developers.google.com/maps/documentation/javascript/reference#KmlLayerOptions)属性禁用默认 InfoWindow

# asp.net - 在 ASP.NET 中创建新用户后，User.Identity.Name 不再保留当前登录用户的用户名？

> ID：13625975
> 
> 赞同：1
> 
> 时间：2012-11-29T12:35:56.990
> 
> 标签：asp.net, asp.net-membership, identity

我对 asp.net 会员课程很陌生。请原谅我提出如此基本的问题。我做了一个简短的搜索，但没有找到答案，我的时间不多了。

我正在使用 LoginName、LogIn 和 CreateUSerWizard 控件。

一切正常，除非我创建一个新用户。登录名立即更改为显示我创建的新用户的名称。我在登录时将 User.Identity.Name 存储在 Session("user") 中，所以我想我可以通过在 CompleteWizard Step 的 ActivateStep 事件中设置 Session 变量的值来更改 User.Identity.Name 的内容但 User.Identity.Name 是只读的。

创建新用户后如何更改User.Identity.Name的内容或更改LogInName的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:42:31.333

如果您使用`CreateUserWizard`来创建新用户，则需要将[`LoginCreatedUser`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx)设置为`false`.

# ruby-on-rails - Rails PaperTrail 版本控制

> ID：13625978
> 
> 赞同：0
> 
> 时间：2012-11-29T12:36:02.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paper-trail-gem

我正在使用 Paper Trail gem 对我的模型之一进行版本化。

它工作得非常好，我在它记录版本时进行了改进，以便它只跟踪批准产品的更新，这部分工作正常。

我还需要做的是捕获批准的版本。自然，在批准时，我的已批准字段设置为 false，因此它不会捕获版本。有谁知道我如何修改下面我的产品模型中的行来实现这一点？

```
has_paper_trail :on => [:update,:approve], :if => Proc.new { |p| p.approved == true } 
```

编辑：似乎 papertrail 不适用于自定义控制器操作。任何人都可以验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:23:56.147

如您所见，`paper_trail/has_paper_trail.rb#L65`它仅适用于三个默认事件`create, update, destroy`。一种可能的解决方法是`update`在您的方法中触发事件，`approve`您可能已经在这样做了。

```
# in your model
def approve!
  self.approved = true
  save
end 
```

# php - 是否可以在不使用任何库的情况下在 PHP 中创建带有 POST 请求的 Restful Web 服务？

> ID：13625983
> 
> 赞同：3
> 
> 时间：2012-11-29T12:36:26.080
> 
> 标签：php, json, rest, post

基本要求是知道我们是否可以在请求正文有效负载具有以 json 格式发送的数据时迭代 $_POST，例如

```
{"City":{"countryCode": "IN","regionCode":"KR"}} 
```

只有当我们将数据发送为

```
m={"City":{"countryCode": "IN","regionCode":"KR"}} 
```

当我们将其设置为空/空时，我们可以使用`$_POST['m']` Content-Type 设置为 default来访问它。`application/x-www-form-urlencoded``application/json` `$_POST`

如果我们尝试访问它`$_POST`而不是`$_POST['m']`它返回 null/empty。

**注意：**我是 PHP 的新手。是否可以在没有任何库的情况下创建 Web 服务。PHP 可以在不使用任何库的情况下接受带有 json 数据的 post 请求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T12:38:05.597

要获取原始 POST 数据（而不是访问单独的 POST 变量，例如 $_POST['m']），您可以使用以下包装器：

```
$json = file_get_contents('php://input'); 
```

如果您有兴趣了解更多关于[包装器](http://us.php.net/manual/en/wrappers.php.php)的信息，可以阅读有关包装器的手册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:41:11.767

这就是我获取数据并将其保存到我的数据库的方式。

```
 $return    = array();
 $data      = json_decode(stripslashes($_REQUEST['Data']));

 $email     = $data->{"paramA"};
 $password      = $data->{"paramB"}; 
```

我想它可能会帮助你。

# perl - 如何添加服务器的凭据

> ID：13625990
> 
> 赞同：-3
> 
> 时间：2012-11-29T12:36:45.453
> 
> 标签：perl, windows-xp

我对 perl 很陌生，我们有非常紧急的需求。我需要将 bat 文件代码转换为 Perl 脚本代码。我很困惑，我们如何在 Perl 中添加凭据。在 bat 文件中：我有上述示例凭据

如何在 Perl 中更改上述凭据。如何在 Perl 脚本中编写上述凭据。Help 非常适合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:01:10.340

要执行外部命令，您可能需要使用`system`内置命令。但是，它不会捕获输出：

```
system "program", "-argument", "value", "-argument2", ...; 
```

在使用它之前，您应该阅读[整个文档](http://perldoc.perl.org/functions/system.html)并查看[`exec`](http://perldoc.perl.org/functions/exec.html),[`qx{}`](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)和[`open`](http://perldoc.perl.org/functions/open.html), 以了解不同的细微差别。

如果您的要求更复杂，您应该查看[CPAN](http://www.cpan.org/)上的 IPC 系列模块。

# java - 在 Java 中随机化整数数组的最快方法

> ID：13625997
> 
> 赞同：4
> 
> 时间：2012-11-29T12:37:07.037
> 
> 标签：java, arrays, random

是否可以在没有 ArrayLists/Collections 等帮助的情况下从一个数组中选择一个随机元素并将其移动到另一个数组（除非您可以在数组上使用 shuffle）？并确保不再选择该元素？我想过将其设置为 null 似乎您无法将其删除，但我不确定。

基本上我想得到`myArray`洗牌或随机化，我认为最好的方法是以随机顺序将它们从一个中拉出来并将它们添加到一个新的......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T12:42:45.310

您也可以使用`Collections.shuffle(List)`shuffle 数组：

```
Integer[] data = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
Collections.shuffle(Arrays.asList(data));

System.out.println(Arrays.toString(data)); 
```

将打印例如 [6, 2, 4, 5, 10, 3, 1, 8, 9, 7]。

`Arrays.asList`不会创建新列表，而是为数组创建一个 List 接口包装器，因此对列表的更改也会传播到数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T12:39:28.787

您可以使用[Collections.shuffle()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)方法来打乱列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T12:43:42.987

**-**您可以使用点`Collection`赞`List`然后使用的`shuffle()`方法。

**-**或者如果你想坚持使用数组，那么首先你需要**将数组转换为列表，然后使用 shuffle() 方法。**

**例如：**

```
Integer[] arr = new Integer[10];

List<Integer> i = new ArrayList<Integer>(Arrays.asList());

Collections.shuffle(i); 
```

# android - 如何将视图与布局相关联

> ID：13625998
> 
> 赞同：1
> 
> 时间：2012-11-29T12:37:21.007
> 
> 标签：android, android-layout, android-fragments

我正在将 Android 应用程序转换为使用片段以支持横向模式下的平板电脑。

我想在平板电脑上以横向模式并排显示两个活动。目前，第一个活动 (DisplayNotams) 有一个按钮，该按钮调用意图来显示第二个活动 (图表)。第一个是单个项目的文本显示，使用寻呼机一次查看一个，第二个是绘制项目的图表。

Chart 不使用 xml 布局文件，因为它创建了自己的 ChartView，因此：

```
ChartView mView;
mView = new ChartView(this, mCentreLat, mCentreLong, mRadius);
setContentView(mView); 
```

（ChartView 类扩展了 View，并包含大部分绘图代码。）

我正在使用 github 示例 commonsguy/cw-omnibus/LargeScreen/EU4you 来作为我修改后的代码的基础。问题（对我来说）是这在 layout 和 layout-large-land 中使用了不同的布局 xml 文件来区分两者。由于我只有 DisplayNotams 的布局 xml 文件，而 Chart 没有，我不知道如何进行。

有什么办法可以让这个例子适应我的情况吗？

作为参考，EU4You中的两个xml文件如下。

在布局中：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/countries"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
/> 
```

在 layout-large-land 中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <FrameLayout
    android:id="@+id/countries"
    android:layout_weight="30"
    android:layout_width="0px"
    android:layout_height="fill_parent"
  />
  <FrameLayout
    android:id="@+id/details"
    android:layout_weight="70"
    android:layout_width="0px"
    android:layout_height="fill_parent"
  />
</LinearLayout> 
```

“国家”对应于我的 DisplayNotam，“详细信息”对应于我的图表。

**感谢那些回答的人。这就是我想出的，**替换

```
ChartView mView;
mView = new ChartView(this, mCentreLat, mCentreLong, mRadius);
setContentView(mView); 
```

和

```
ChartView mView;
mView = new ChartView(this, mCentreLat, mCentreLong, mRadius);
setContentView(R.layout.chart);
FrameLayout fl = (FrameLayout)findViewById(R.id.chart_frame);
fl.addView(mView); 
```

并创建一个新的 chart.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <FrameLayout
        android:id="@+id/chart_frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:41:16.183

有一组`addView`函数可用于`ViewGroup`. 您可以使用它来将孩子添加到`FrameLayout`s.

```
ChartView mView;
mView = new ChartView(this, mCentreLat, mCentreLong, mRadius);

FrameLayout frame = (FrameLayout) findViewById(R.id.countries);
frame.addView(mView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:47:18.520

`setContentView(mView)`您可以在`onCreateView`Fragment 类的 -Method 中返回 ChartView，而不是使用：

```
 @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            ChartView mView;
            mView = new ChartView(this, mCentreLat, mCentreLong, mRadius);
            return mView;
        } 
```

# iphone - 将 C++ 库链接到基于视图的应用程序。[XCODE]

> ID：13625999
> 
> 赞同：0
> 
> 时间：2012-11-29T12:37:23.357
> 
> 标签：iphone, objective-c, xcode

我正在尝试将基于 C++ 的库文件链接到基于视图的 xcode 项目。
我正在为 iPhone 模拟器构建一个应用程序。

所以问题是，是否可以将 C++ 库链接到 Objective-C 项目？
如果是，那么我是否需要在 Objective-C 代码和库之间有一个接口？
或者我可以直接在 Objective-C 类/方法中使用 lib C++ 函数/类。

有人可以指出一些很好的教程/示例，以了解如何加载基于 C++ 的库并在 XCODE 中基于视图的应用程序中使用它。

我已经浏览了这个链接：
[http ://www.eosgarden.com/en/articles/xcode-static-libraries/](http://www.eosgarden.com/en/articles/xcode-static-libraries/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:14:08.567

你应该不需要做太多事情。您是否已将所有使用该库的文件重命名为`.mm`? 之后，一切都应该正常工作。您可以将 C++ 代码放在第一行，然后将 Objective-C 代码放在另一行。