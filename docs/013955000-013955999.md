# StackOverflow 问答 13955000-13955999

# javascript - 单击带有 jQ uery 的链接

> ID：13955001
> 
> 赞同：6
> 
> 时间：2012-12-19T14:55:32.957
> 
> 标签：javascript, jquery, html

我制作了一个小脚本，但我想知道我是否可以仅使用 jQuery 触发页面上的链接。

**JS**

```
var vars = [], hash;
  var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
  for(var i = 0; i < hashes.length; i++)
  {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
  }

  $('a.more').each(function() {
    var self = this;

    if (vars['deeplink'] == 'true') {
       /* this must trigger the link and that will trigger $(self).click */
    }

    $(self).click(function() {
      var theid = self.href.split('#').pop();
      var row = document.getElementById('info-art' + theid);
      var now = typeof(row.style.display) != 'undefined' ? row.style.display : 'none';
      $('tr.info').each(function() { this.style.display = 'none'; });
      if (now == 'none') {
        row.style.display = $.browser.msie ? 'block' : 'table-row';
      }
    });
  }); 
```

**HTML**

```
<td><a class="more" href="#8714681006955">[+]</a></td> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T14:59:28.660

```
$( selector ).click() 
```

就像在[jQuery 文档](http://api.jquery.com/click/)中一样：

> 当不带参数调用 .click() 时，它是 .trigger("click") 的快捷方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T14:57:15.103

您可以`jQuery.trigger for this` [在此处使用 jquery 文档](http://api.jquery.com/trigger/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T15:04:00.530

基于“我是否可以仅使用 jQuery 触发页面上的链接”，我假设您想要触发本机点击事件（作为您发布的代码的替代方案）。如果我理解正确，那么您可能会发现下面的答案很有帮助。

这是[Karl Swedberg](http://www.learningjquery.com/author/karl)[回答](http://api.jquery.com/trigger/#comment-48277488)的完整副本：

> 使用 .trigger('click') 不会触发原生点击事件。要模拟默认点击，您可以像这样绑定点击处理程序：
> 
> ```
> $('#someLink').bind('click', function() {
>   window.location.href = this.href;
>   return false;
> }); 
> ```
> 
> 其中“someLink”是您选择的实际选择器。
> 
> 然后，如果需要，您可以基于其他交互触发绑定的单击处理程序。
> 
> ```
> $('input.mycheckbox').click(function() {
>   if (this.checked) {
>     $('#someLink').trigger('click');
>   }
> }); 
> ```

[http://api.jquery.com/trigger/#comment-48277488](http://api.jquery.com/trigger/#comment-48277488)

如果您觉得这有帮助，请务必为原作者投票。

# websocket - WebSocket 关闭操作码

> ID：13955006
> 
> 赞同：4
> 
> 时间：2012-12-19T14:55:54.863
> 
> 标签：websocket, rfc

当我`close()`在客户端 (FF) 上的 websocket 连接并调试我的服务器端以查看传入的数据时，我将其转换为十六进制以读取它，我收到类似“8880825d04de”的信息（仍然被屏蔽）。在每次关闭尝试时，我都会收到类似的数据“8880XXXXXX”。

掩码应该是“825d04de”，因为它每次都会改变，并且 RFC 告诉我客户端的关闭消息被屏蔽了。8880 让我感到困惑，因为在 RFC 中应该指示关闭消息的操作码是 0x8。

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:51:42.593

好吧，我猜它会像这样分解：

```
8 - FIN
8 - close opcode
8 - MASK + 3 bits of 0 for payload length
0 - 4 bits of 0 for payload length 
```

# scala - 函数式 XML 拉取处理教程

> ID：13955009
> 
> 赞同：4
> 
> 时间：2012-12-19T14:56:06.057
> 
> 标签：scala, functional-programming, stax

我正在寻找一个关于使用函数方法的 XML 拉取处理（例如 StAX）的好教程——没有可变值。

我想象它将涉及许多处理有趣元素并绕过无趣元素的递归过程。

Scala 代码会更可取，但我可能可以通过任何函数式语言的算法来解决问题。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:30:27.290

[Scales Xml 拉解析](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.4.4/RepeatedSections.html "秤 Xml 拉")提供了拉解析的简单抽象（通过 stax 和 Scalaz Iteratees）。0.5 版还添加了异步拉解析。

上面的组合中有很多代码，但如果你能说出你正在处理什么样的 xml 结构，那就太好了，它可能有助于提出其他建议。

# wpf - 如何在没有 AttachedProperty 或 DependencyProperty 的情况下使用 IDataErrorInfo 验证 PasswordBox？

> ID：13955013
> 
> 赞同：5
> 
> 时间：2012-12-19T14:56:08.333
> 
> 标签：wpf, xaml, c#-4.0, mvvm

我正在 WPF 中创建一个包含用户名、密码框和确认密码框的注册表单。

我打算`IDataErrorInfo`在视图模型上使用进行验证，但由于 PasswordBox 的`Password`属性不是 DependencyProperty（出于安全原因）。

我不想使用 AttachedProperty，所​​以我能想到的唯一选择是使用后面的代码将密码值传递给 ViewModel，但我不知道如何引发这样的验证错误。

如何在没有绑定的情况下对 PasswordBox 控件进行验证？

我可以使用验证规则而不是 IDataErrorInfo（如果需要）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-10T11:06:00.127

迟到总比不回答好:)

如果您想避免在运行时将密码作为纯文本暴露在内存中，则选择使用 PasswordBox.SecurePassword 属性。您可能仍希望对输入的值进行一些验证，例如检查它是否足够长（SecureString 类具有 Length 属性）。在这种情况下，我应用 ErrorTemplate 的最简单方法是在 viewmodel 中使用一个额外的属性并将 PasswordBox 的任何其他属性绑定在它上面。一般来说，我更喜欢使用 Tag 属性，但任何废弃属性都适合。

所以，代码看起来像

视图模型：

```
public class MyViewModel : ViewModelBase, IDataErrorInfo
{
    // some code skipped

    private SecureString password;
    public SetPassword(SecureString pwd)
    {
        password = pwd.Copy();
        password.MakeReadOnly();
        OnPropertyChanged("PasswordExtra");
    }

    public bool PasswordExtra
    {
        get { return false; }
    }

    #region IDataErrorInfo
    // public string Error realization skipped

    public string this[string propertyName]
    {
        get
        {
            if (propertyName == "PasswordExtra")
            {
                if (password.Length < 8)
                    return "Password is too short";
            }
            return null;
        }
    }
    #endregion IDataErrorInfo
} 
```

看法：

```
private void onPasswordChanged(object sender, RoutedEventArgs e)
{
    (DataContext as MyViewModel).SetPassword((sender as PasswordBox).SecurePassword);
} 
```

XAML：

```
<PasswordBox
    Tag="{Binding PasswordExtra, ValidatesOnDataErrors=True}"
    PasswordChanged="onPasswordChanged"/> 
```

# css - hasLayout 块与 hasLayout 缩放

> ID：13955021
> 
> 赞同：3
> 
> 时间：2012-12-19T14:56:33.397
> 
> 标签：css, compass-sass, haslayout

当我遇到这个页面时，我一直在浏览指南针的在线参考：http: [//compass-style.org/reference/compass/utilities/general/hacks/](http://compass-style.org/reference/compass/utilities/general/hacks/)

在此页面上，似乎有 2 种方法可以为 IE 实现 has-layout hack。其中一个设置`zoom: 1;`其他设置`display: inline-block;`，然后将其重新设置回`display: block;`。

手册没有解释的是这两者之间的区别。

有什么区别吗？是否存在您更愿意使用其中一种的特殊情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:34:29.823

第一种方法：

```
@mixin has-layout-block {
  @if $legacy-support-for-ie {
    // This makes ie6 get layout
    display: inline-block;
    // and this puts it back to block
    & {
      display: block; } } } 
```

将编译为：

```
selector {
    display: inline-block;
}
selector {
    display: block;
} 
```

第二种方法：

```
@mixin has-layout-zoom {
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *zoom: 1; } } 
```

将编译为：

```
selector {
    *zoom: 1;
} 
```

这两种方法都会成功地给出一个元素 hasLayout，所以纯粹从这个角度来看，你使用哪个并不重要。

第一种方法将通过[验证](http://jigsaw.w3.org/css-validator/)，而第二种方法不会。但是，第二种方法中的验证失败是完全没有问题的；使用的黑客是[“安全的”](http://mathiasbynens.be/notes/safe-css-hacks)。

我到处使用第二种方法，因为它更短并且不涉及两个规则。

真的不值得担心（IE6/7 快要死了），但如果你想了解更多信息，请阅读[this](http://www.satzansatz.de/cssd/onhavinglayout.html)和[this](http://onhavinglayout.fwpf-webdesign.de/hack_management/)。

# powershell - 使用 Powershell 在 CSV 中查找重复项

> ID：13955024
> 
> 赞同：0
> 
> 时间：2012-12-19T14:56:41.867
> 
> 标签：powershell

我有几个超过 1GB 的 CSV，无法在 Excel 中打开。每行有 5 个字段。我需要比较其中 3 个字段（名称、大小、修改日期）并**保留除 1**个之外的所有重复项。并删除唯一字段。

如果这不可能，那么我需要**将除 1**个重复项之外的所有重复项移动到另一个文件中（然后该文件将用于确定我需要删除哪些文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:24:16.003

创建一个哈希表。逐行读取文件。将相关字段连接为键。检查密钥是否存在于哈希表中。如果是这样，您将得到一个重复的行。如果没有，你得到（第一次出现）唯一的一行。将其添加到哈希表并将该行记录到另一个文件中。

# wcf - 尝试使用 SlSvcUtil.exe 引用可移植库

> ID：13955026
> 
> 赞同：2
> 
> 时间：2012-12-19T14:56:43.293
> 
> 标签：wcf, silverlight, portable-class-library, slsvcutil

当我将它指向便携式库时，有人可以确认该`/reference`开关不起作用吗？`slsvcutil.exe`看起来，它只是忽略了可移植库中提供的类型，并在 reference.cs 中创建了自己的类，这导致了引用可移植库的 silverlight 项目中的重复类型。

有什么原因，为什么它不应该工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:21:04.360

终于找到[这个问题](https://stackoverflow.com/questions/5826401)了，答案是正确的！由于某些（意外）原因，默认构造函数解决了该问题。甚至可以将其设为私有。奇怪的。

# javascript - jquery mobile，在listview li中动态添加可折叠内容

> ID：13955028
> 
> 赞同：2
> 
> 时间：2012-12-19T14:56:47.713
> 
> 标签：javascript, jquery-mobile

我有一个空列表视图：

```
<ul data-role="listview" data-theme="d" id="test">

</ul> 
```

我想动态添加包含可折叠内容的 li 标签，但我不知道如何“刷新”它以便显示可折叠内容？

我试过了：

```
$(document).on('pageinit', function() {
$('#test').append('<li><a href="#"><div data-role="collapsible" class="member-item" data-theme="a"><h3>title</h3><p>some content</p></div></a><a href="#">test</a></li>');
$('#test').listview("refresh");
}); 
```

但这只会刷新 li 部分。

然后我尝试了：

```
$(document).on('pageinit', function() {
$('#test').append('<li><a href="#"><div data-role="collapsible" class="member-item" data-theme="a"><h3>title</h3><p>some content</p></div></a><a href="#">test</a></li>');
$('#test').listview("refresh");
$('.member-item').collapsible('refresh');
}); 
```

但是我只是得到加载图标并且页面没有加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:03:28.343

看起来我必须触发“创建”然后刷新列表视图：

```
$('#test').trigger('create');
$('#test').listview("refresh"); 
```

# c# - 动态自定义树访问

> ID：13955029
> 
> 赞同：2
> 
> 时间：2012-12-19T14:56:53.133
> 
> 标签：c#, tree, composite

我正在寻找访问和编辑以下树结构，但在互联网上找不到好方法。

```
class SimpleNode
{
    string Name;
    SimpleType Type;
    List<SimpleList> Children;
}

class SimpleList
{
    //some list-based properties
    List<SimpleNode> Items;
} 
```

我需要能够查找和编辑节点而不诉诸：

```
Node.Children[0].Items[0].Children[1].Items[3] 
```

之类的。我通过一个返回树元素的函数尝试了这个，但是编辑返回的元素似乎并没有影响实际的树。更复杂的是，我不想排除两个相同的节点存在于树中的不同点。

很明显，这是我第一次使用树形结构，并且真的需要一些帮助。

* * *

经过进一步调查（根据 Drew），复合模式概念是有意义的，尤其是方法转发/聚合返回概念。这里的技巧是我可能在树的两个不同点有两个具有相同标识符（类型和名称）的节点。

不起作用的代码类似于（它早已不复存在）：

```
Node GetNode(Type type, string name)
{ // returns node } 
```

我试过类似的东西：

```
Node nodeToEdit = GetNode(params);
nodeToEdit.Name = "New Name"; 
```

或者

```
nodeToEdit.Children.Add(new Node()); 
```

但它似乎没有吸收树。如果应该有，请告诉我，因为我一定错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-12T07:18:13.080

正如评论中所述，在使用树木时，您迟早会在树上行走并对项目执行操作。通常，您使用某种递归函数，它接收节点作为参数并使用子节点调用自身。

在您的示例中，树中有两种不共享公共界面的项目。这增加了一些复杂性，因为您必须检查两种类型的项目。

下面的示例显示了一个遍历树的简单函数。该方法接收节点作为参数和节点的级别。此外，还有两个回调：一个用于`SimpleNode`项目，另一个用于项目调用`SimpleList`。由于遍历树的过程是相同的，您可以共享此代码并为场景提供处理树元素的特定方法。

```
void TreeWalk(SimpleNode node, int level, Action<SimpleNode, int> inspectNode, Action<SimpleList, int> inspectList)
{
    if (node == null)
        return;
    if (inspectNode != null)
        inspectNode(node, level);
    foreach(var simpleLst in node.Children)
    {
        if (inspectList != null)
            inspectList(simpleLst, level + 1);
        foreach(var child in simpleLst.Items)
            TreeWalk(child, level + 2, inspectNode, inspectList);
    }
} 
```

由于需要节点，因此方法首先验证输入参数。然后它调用可以对`SimpleNode`. 如果满足某些标准，则此类操作的示例可能是更改节点值。

然后该方法检查节点的子节点。首先，它调用项目的回调方法，然后`SimpleList`迭代`Items`. `simpleList`对于每个节点，它会再次为子节点调用自身。级别也随之增加。

以下示例显示了在满足某些条件时如何更改节点值。由于没有对`SimpleList`项目执行的操作，`null`因此用作相应回调的参数。

```
// Change node "11" to "11x"
var nameToLookFor = "11";
var newName = "11x";
TreeWalk(data, 0, 
    (node, level) => {
        if (node.Name == nameToLookFor)
            node.Name = newName;
    }, 
    null); 
```

出于测试原因，打印树的内容很有帮助。您可以使用另一组回调方法来实现此目的：

```
TreeWalk(root, 0, 
    (node, level) => Console.WriteLine(new String(' ', level * 2) + string.Format("Node: {0} - {1}", node.Name, node.Type)), 
    (list, level) => Console.WriteLine(new String(' ', level * 2) + "List")); 
```

# jquery - 如何读取特定类型的 json 数据

> ID：13955030
> 
> 赞同：0
> 
> 时间：2012-12-19T14:56:55.137
> 
> 标签：jquery, json, parsing

这是我的示例 json 数据

```
{"Caption":"BBA Feedback Form ","Notes":"Fields marked with \u003cfont size=\"-2\"  color=\"#e30102\" face=\"Verdana\"\u003e&nbsp;(*)&nbsp;\u003c/font\u003e are  compulsory","Name":"Name\u003cfont size=\"-2\" color=\"#e30102\" face=\"Verdana\"\u003e&nbsp;*&nbsp;\u003c/font\u003e","Subject":"Subject\u003cfont size=\"-2\" color=\"#e30102\" face=\"Verdana\"\u003e&nbsp;*&nbsp;\u003c/font\u003e","Email":"Email Address\u003cfont size=\"-2\" color=\"#e30102\" face=\"Verdana\"\u003e&nbsp;*&nbsp;\u003c/font\u003e","Details":"Feedback\u003cfont size=\"-2\" color=\"#e30102\" face=\"Verdana\"\u003e& nbsp;*&nbsp;\u003c/font\u003e"} 
```

我想用 jquery 解析它并填写我的标签。我在下面尝试过这样的方法，但没有奏效。

```
 function LoadEnquiryData() {
    $.ajax({
        type: "POST",
        url: urlToHandler + "?ac=show",
        data: {},
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            $("input[id*='enq_lblcaption']").val(data["Caption"])
            $("input[id*='enq_lblnotes']").val(data["Notes"])
            $("input[id*='enq_lblfield_name']").val(data["Name"])
            $("input[id*='enq_lblfield_subject']").val(data["Subject"])
            $("input[id*='enq_lblfield_email']").val(data["Email"])
            $("input[id*='txtEnqDetails']").val(data["Details"])
            $("input[id*='btnEnqSubmit']").val(data["SubmitVal"])

        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
        }
    });
} 
```

所以请指导我如何解析它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:01:53.373

我会提供比“没有用”更多的帮助（比如你得到什么错误），但从你所拥有的来看，我没有看到任何明显的错误。从 json 中，您可以通过两种方式访问​​您的字段：

第一个，你喜欢`data["Caption"]` 或第二个，喜欢`Data.Caption`

我会验证您返回的数据，以确保它与您提供的样本相匹配。您可能会得到这些对象的数组吗？如果没有返回数据的服务器代码，很难分辨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:10:11.070

你确定`data`变量不是`null`或`undefined`？

我这么说是因为你的逻辑是正确的。此外，有两种方法可以`data`通过执行以下操作来获取您的信息：

```
data["Caption"] 
```

或者

```
data.Caption 
```

*（对其他值做同样的事情）*

但是你不能这样做似乎很奇怪。如果您想测试我告诉您的内容，请转到此处：

[http://jsfiddle.net/oscarj24/6NUNd/](http://jsfiddle.net/oscarj24/6NUNd/)

并且`json`只有在`data`is not`null`或`undefined`.

* * *

我建议你先打印你的`data`变量`console.log(data);`，然后看看你`$.ajax callback`的工作是否正常。

* * *

希望这可以帮助 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:00:54.837

```
$("input[id*='enq_lblcaption']").val(data.Caption)
$("input[id*='enq_lblnotes']").val(data.Notes)
and so on... 
```

我的错，你不需要 parseJSON ——我已经在用它做别的事情了，只是把它放在这里。我已经在上面编辑了我的代码，这应该可以正常工作。

# javascript - ExtJs MVC 应用程序不会加载

> ID：13955041
> 
> 赞同：4
> 
> 时间：2012-12-19T14:57:21.763
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我目前正在尝试启动我创建的 ExtJs MVC 应用程序，并将其集成到另一个应用程序中。由于不清楚的原因，它拒绝启动，也没有给出任何合理的信息来说明它发生的原因，查看下面的代码，我能够确定`init`函数运行到最后，但不是`launch`or `beforeLaunch`。也`Das.SubApp`延伸`Ext.app.Controller`.

```
 this.subApp = Ext.create('Das.SubApp', {
        appFolder: '/Scripts/app/das/FBrowser',
        name: 'FBrowser',
        controllers: ['BrowerController'],
        dependencies: {
            css: [],
            js: []
        },
        init: function() {console.log("initialized")},
        beforeLaunch: function() {
            console.log("Before launch");
        },
        launch: function () {
            console.log("launched library");
           } 
```

这是来自 BrowserController 的代码：

```
Ext.define('FBrowser.controller.BrowserController',{
extend: 'Ext.app.Controller',
views: ['browser.tree_dir',...],
stores: [...],
requires: ['FBrowser.Utilities'],

init: function() {

    this.control({..}) 
```

有人知道可能出了什么问题吗？

编辑：好的，所以我似乎找到了问题的一部分，似乎没有设置应用程序路径，我仍然不明白为什么会这样，不应该`appFolder`指向正确的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:39:45.527

这很容易；

`Ext.app.Controller`不具有

*   应用文件夹
*   姓名
*   发射前

如果你以这种方式初始化它，它就不会调用启动方法，因为这一切都完成了，或者更好地说属于`Ext.app.Application`控制器。另请注意，您只能拥有一个活动`Ext.app.Application`实例，否则您将搞砸`EventBus`（覆盖第一个的总线`Ext.app.Application`）。即使您添加这些属性（appFolder，名称），它们也不会执行任何操作，因为它们仅在`Ext.app.Application`派生自`Ext.app.Controller`

**解决方案**

`Das.SubApp`需要`Ext.app.Application`（如果不是真的需要，请不要扩展，因为无论如何您只能激活一个实例）。

您可能也对**[这个](https://stackoverflow.com/questions/13939305/an-extjs-app-calling-another-extjs-app)**答案或**[这个感兴趣](https://stackoverflow.com/questions/7645180/using-more-than-one-controller-with-extjs-4-mvc)**

# .net - 通过 .NET MVC 4 中的第三个实体关联两个实体

> ID：13955055
> 
> 赞同：3
> 
> 时间：2012-12-19T14:57:50.753
> 
> 标签：.net, asp.net-mvc-4

我正在使用 .NET MVC 4 构建一个网站。我所拥有的是具有与其他人有关的角色的人。例如，A 是 B、​​D 的父亲，A 是 C 的丈夫。

我不确定这是否是正确的方法，但我正在考虑创建一个 Persons 类和一个 Roles 类。不知何故，我想通过 Roles 实例将 Persons 实例与另一个 Persons 实例连接起来，并将其保存在数据库中。

所以关联表必须有三列 Person1|Role|Person2。

我怎样才能最好地在模型中表示这一点？

编辑

谢谢您的帮助。我做了一些与你提议的非常相似的事情。

```
public class Persons
{
    public Guid PersonsID { get; set; }
    public string Name { get; set; }
    ICollection<Relations> Relations { get; set; } 

}

public class RelationshipType
{
    public Guid ID {get; set;}
    public string Type { get; set; }
    public ICollection<Relations> Relations { get; set; }

}

public class Relations
{
    public Guid RelationsID { get; set; }
    public virtual Persons RealtedPerson { get; set; }
    public virtual RelationshipType RelationType { get; set; }
    public virtual Persons RealtedTo { get; set; }
} 
```

这给出了三个表，其中表 Relations 有两个指向 Persons 的外键和一个指向 RelationshipType 的外键。不，如果我删除一个人，包括此人在内的关系也可能会被删除。

最后一个问题。为什么你选择一个枚举而不是一个导致表格的类？

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:03:36.870

那你应该做这样的事情

```
class Person{
   string Id{ get; set; }
   string Name{ get; set; }
   ...
   List<Relation> relations{ get; set; }

}

class Relation
{
   string id{ get; set; }
   Person relatedPerson{ get; set; }
   RelationType relationType { get; set; }
   Person relatedto { get; set; }
}

enum RelationType{
  Husband,
  Father,
  Child,
  ...
} 
```

# .htaccess - 在 htaccess 中使用重定向重写

> ID：13955058
> 
> 赞同：2
> 
> 时间：2012-12-19T14:57:53.833
> 
> 标签：.htaccess, redirect

原始 URL 1 - www.mysite.com/gallery-category.php?gallname=garments&GalleryID=10
SEF URL 1 - [http://www.mysite.com/photos-garments~10.html](http://www.mysite.com/photos-garments~10.html)

原始 URL 2 - www.mysite.com/gallery-category.php?gallname=furniture&GalleryID=20
SEF URL 2 - [http://www.mysite.com/photos-furniture~20.html](http://www.mysite.com/photos-furniture~20.html)

原始 URL 3 - www.mysite.com/gallery-category.php?gallname=plastics&GalleryID=30
SEF URL 3 - [http://www.mysite.com/photos-plastics~30.html](http://www.mysite.com/photos-plastics~30.html)

为了得到这个 SEF URL，我在 .htaccess 中写了 RewriteRule 为

```
RewriteRule ^photos-(.+)~(.+).html gallery-catagory.php?gallname=$1&GalleryID=$2&%{QUERY_STRING} [nc] 
```

但现在我只想重定向一个特定的 URL 以重定向到另一个页面。

即只有[http://www.mysite.com/photos-plastics~30.html](http://www.mysite.com/photos-plastics~30.html)被重定向到[http://www.mysite.com/plasticphotos.html](http://www.mysite.com/plasticphotos.html)其他 2 个原始 URL 是同一页面

我在重定向 URL 下尝试过，它正在工作，但它使用浏览器中的查询字符串重定向 - [http://www.mysite.com/plasticphotos.html?gallname=plastics&GalleryID=30](http://www.mysite.com/plasticphotos.html?gallname=plastics&GalleryID=30)

重定向网址

```
Redirect /photos-plastics~30.html http://www.mysite.com/plasticphotos.html 
```

输出 URL 假设为 - [http://www.mysite.com/plasticphotos.html](http://www.mysite.com/plasticphotos.html)

请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:50:25.637

重定向会自动附加查询字符串。如果你不想要查询字符串，试试这个 RewriteRule：

RewriteRule photos-plastics~30.html [http://www.mysite.com/plasticphotos.html](http://www.mysite.com/plasticphotos.html) ? [大]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:46:48.400

这似乎正在发生，因为您有一个 mod_rewrite 规则重写`^photos-(.+)~(.+).html`到`gallery-catagory.php?gallname=$1&GalleryID=$2` **，并且**您有一个 mod_alias 指令重定向`photos-plastics~30.html`到`/plasticphotos.html`. 这不是查询字符串问题，因为查询字符串*被您的 mod_rewrite 规则附加*。这是因为 mod_rewrite 和 mod_alias 指令在 URL 文件映射处理管道的不同部分应用于相同的 URI。这意味着重写规则正在破坏 URI，并且重定向指示将其标记为重定向，因此您最终会得到一个带有两个指令的 frankenstein URI。

每当您混合使用 mod_rewrite 和 mod_alias 时，您*必须确保它们不会相互干扰*。这两个模块都应用于处理管道的不同点。为确保它们不会互相搞砸，请坚持使用 mod_rewrite，因为您已经在使用它进行内部重写。将此规则添加到**您当前的规则之上**：

```
RewriteRule ^photos-plastics~30.html$ /plasticphotos.html [L,R=301] 
```

# c++ - 未定义对“sendArrayObj::count()”的引用

> ID：13955060
> 
> 赞同：3
> 
> 时间：2012-12-19T14:58:00.050
> 
> 标签：c++, linux, object

我有一个编译基本错误。

简而言之，我的主要内容是：

主文件

```
#include "sendArrayObj.h"
sendArrayObj* sendqueue;

void foo(){
    int i = sendqueue->count()
}

int main(){
    int i =10;
    sendqueue = new sendArrayObj(i);
    foo();
} 
```

发送数组对象.h

```
using namespace std;
#include <string.h>
#include <string>
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <unistd.h>

class sendArrayObj{
private:
    int size,toEnqueue,toDequeue,lastDequeuedInd;
    unsigned long long totalEnqueued,totalDequeued;

public:
    char** arr;
    int* lengths;
    sendArrayObj(int size);
    void enqueue(string str);
    char* dequeue();
    int count();
    int getDequeuedSize();

}; 
```

sendArrayObj.cpp

```
#include "sendArrayObj.h"

pthread_mutex_t mutex_requestsqueue = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t mutex_count = PTHREAD_MUTEX_INITIALIZER;

sendArrayObj::sendArrayObj( int size){
this->size = size;
toEnqueue = 0;
toDequeue = 0;
totalEnqueued = 0;
totalDequeued = 0;
lastDequeuedInd = -1;
arr = (char**)malloc(size*sizeof(char*));//alloc number of pointers
lengths = (int*)malloc(size*sizeof(int));//alloc number of lengths
}

void sendArrayObj::enqueue(std::string str){
int strSize = str.size();
pthread_mutex_lock( &mutex_requestsqueue );
if (arr[toEnqueue]!= NULL){
    free(arr[toEnqueue]);
    toDequeue = (toDequeue+1)%size;
    totalDequeued++;
}
arr[toEnqueue] = (char*)malloc(strSize);
memcpy(arr[toEnqueue],(char*)str.c_str(),strSize);
lengths[toEnqueue] = strSize;
toEnqueue = (toEnqueue+1)%size;
totalEnqueued++;
pthread_mutex_unlock( &mutex_requestsqueue );
}

char* sendArrayObj::dequeue(){
pthread_mutex_lock( &mutex_requestsqueue );
//allocate memory to the ans 
//char* ans = new char[lengths[toDequeue]];
char* ans = arr[toDequeue];
lastDequeuedInd = lengths[toDequeue];
//memcpy(ans,arr[toDequeue],lengths[toDequeue]);
//if (arr[toDequeue]!=NULL){
    //delete[] arr[toDequeue];
arr[toDequeue] = NULL;
//}
toDequeue = (toDequeue+1)%size;
totalDequeued++;
//printf("totalDequeued is %d\n",totalDequeued);
pthread_mutex_unlock( &mutex_requestsqueue );
return ans;

}

int sendArrayObj::count(){
pthread_mutex_lock( &mutex_count );
int ans = totalEnqueued-totalDequeued; 
pthread_mutex_unlock( &mutex_count );
//printf("count is %d\n",ans);
return ans;
}

int sendArrayObj::getDequeuedSize(){    
return lastDequeuedInd;
} 
```

我的编译批次是

```
g++ -g -pthread utils/hregex.cpp ExcludeFields.cpp utils/sha1.cpp utils/utils.cpp utils/base64.cpp utils/xmlhelper.cpp utils/messagehelper.cpp utils/safe_queue.cpp utils/parser.cpp utils/default_config.cpp ExcludesParameters.cpp main_process_helper.cpp main.cpp -Iutils -Ibusiness_objects -o telepath_sniff 
```

并且文件在文件夹“utils”中

知道为什么我会得到它吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:01:02.077

~~您必须告诉链接器要将哪些目标文件链接到您的应用程序中。~~

编辑：

您发布了以下命令，并由我进行了可读性调整：

```
g++ -g -pthread 
utils/hregex.cpp \
ExcludeFields.cpp \
utils/sha1.cpp \
utils/utils.cpp \
utils/base64.cpp \
utils/xmlhelper.cpp \
utils/messagehelper.cpp \
utils/safe_queue.cpp \
utils/parser.cpp \
utils/default_config.cpp \
ExcludesParameters.cpp \
main_process_helper.cpp \
main.cpp -Iutils -Ibusiness_objects -o telepath_sniff 
```

使用 GNU 工具，您可以将依赖项放在依赖项*之后*。

例如，如果`main.cpp`取决于`foobar.cpp`，你写

```
g++ main.cpp foobar.cpp 
```

因为链接器会尝试链接`main.cpp`，然后保留一个稍后需要解决的引用列表。你订错了。

最后，你完全失去`sendArrayObj.cpp`了。

所以，

*   把所依赖的放在第一位，把它依赖的放在*后面*
*   添加`sendArrayObj.cpp`到您的~~构建脚本~~命令

* * *

旁注：您通常应该

*   使用包括警卫
*   避免全局变量
*   避免手动内存管理
*   不暴露可写成员变量
*   要么很好地定义复制语义，要么一起禁止复制
*   不使用 C 头文件（例如 use `cstdio`， not `stdio.h`）
*   如果成员函数`const`不应该改变类实例的可观察状态，则创建成员函数
*   不放入`using namespace`头文件
*   喜欢标准库容器，例如动态分配的数组`std::list`或`std::vector`超过动态分配的数组
*   为管理内存的类编写析构函数
*   释放记忆
*   使用一致的缩进方案
*   不包括您不需要的标题，这会花费您的时间和金钱
*   使用构建系统（例如 makefile、IDE 项目文件、cmake、Scons）
*   获得有关您是新手的主题的良好介绍性文献
*   如果你没有读过好的介绍性文献，就不要写那么大的项目，这对 C++来说是~~双重的~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:12:29.090

您的编译命令行似乎`sendArrayObj.cpp`缺少它。添加它应该可以解决这个特定问题；但是，考虑分别为不同的编译单元构建目标文件以加快后续编译（您只需重新编译那些更改的编译单元）。

# wix - 安装 SQL Server 2008 R2 Express 版本时出错

> ID：13955066
> 
> 赞同：1
> 
> 时间：2012-12-19T14:58:16.520
> 
> 标签：wix, wix3.5, wix3.6, sql-server-2008r2-express

我正在尝试对 SQL Server 2008 R2 Express 版本进行无人值守的静默安装。

我正在使用下面的代码来实现它

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
  xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
<Fragment>

<PackageGroup Id="SqlServer2008R2">

<ExePackage InstallCommand="/q /action=INSTALL /IACCEPTSQLSERVERLICENSETERMS=1 /FEATURES=SQLEngine /INSTANCENAME=SQLSERVERINSTANCE /SQLSVCACCOUNT='NT AUTHORITY\SYSTEM' /SECURITYMODE=SQL /SAPWD=abc#Wd1234 /SQLSYSADMINACCOUNTS='NT AUTHORITY\SYSTEM' /ADDCURRENTUSERASSQLADMIN=TRUE /TCPENABLED=1 /NPENABLED=1"
              InstallCondition="VersionNT64"
              DetectCondition="Instance"
              Name="SQLEXPR_x64_ENU.exe"
              Compressed="no"
              Vital="yes"
              PerMachine="yes"
              Permanent="yes"
              Cache="no"
              DownloadUrl="http://download.microsoft.com/download/5/1/A/51A153F6-6B08-4F94-A7B2-BA1AD482BC75/SQLEXPR_x64_ENU.exe"
              >
    <RemotePayload
      Size="77677408"
      ProductName="Microsoft SQL Server 2008 R2 Express"
      Description="Microsoft SQL Server 2008 R2 Express"
      Version="10.50.1600.1"
      CertificatePublicKey="fjhuirh8454850495jffjk5"
      CertificateThumbprint="hfgjhrt758947jjgi58g"
      Hash="584809tgjgjfgjk58ifjufkjjkjfi"
      />
     </ExePackage>
    </PackageGroup>
  </Fragment>
</Wix> 
```

在安装期间，我收到此错误
参数：'"C:\ProgramData\Package Cache\2FF1A50B2277987C9CD65B99812CEAF2A67EA362\SQLEXPR_x64_ENU.exe" /q /action=INSTALL /IACCEPTSQLSERVERLICENSETERMS=1 /FEATURES=SQLEngine /INSTANCENAME=SQLSERVERINSTANCE /SQLSVCACCOUNT='NTAUTH ' /SECURITYMODE=SQL /SAPWD=abc#Wd1234 /SQLSYSADMINACCOUNTS='NT AUTHORITY\SYSTEM' /ADDCURRENTUSERASSQLADMIN=TRUE /TCPENABLED=1 /NPENABLED=1' **错误 0x84b40000：进程返回错误：
0x84b40000：无法执行 EXE 包。0x84b40000: 无法配置每台机器的 EXE 包。应用执行包：SQLEXPR_x64_ENU.exe，结果：0x84b40000，重启：无[05DC：** 我检查了我在上述代码中使用的命令提示符上的参数，只是为了检查我是否缺少安装 sql server 2008 R2 快速版所需的任何重要参数，但它在命令提示符上工作并安装了 SQL 服务器2008 R2 express版没有问题。但我无法使用所有这些参数进行无人值守安装。请帮帮我，我坚持下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:37:15.547

将此替换`/IACCEPTSQLSERVERLICENSETERMS=1`为`/IACCEPTSQLSERVERLICENSETERMS`

在 sql server express 2008 中不使用 /IACCEPTSQLSERVERLICENSETERMS 但在 sql server express 2008 sp1 中，...您必须使用 /IACCEPTSQLSERVERLICENSETERMS

我不能用命令行安装 sql express 2008 r2 我认为这个版本有静默安装的问题，而手动安装没有任何问题，所以我使用 sql server express 2008 并且它可以工作。

# rest - FosRestBundle。如何在重定向时返回完整响应

> ID：13955069
> 
> 赞同：4
> 
> 时间：2012-12-19T14:58:31.190
> 
> 标签：rest, symfony, fosrestbundle

当我将数据发布到服务器重定向时：

```
$view = $this->routeRedirectView('get_config', array('id' => $config->getId()));
return $this->handleView($view); 
```

这是请求被重定向到的操作代码：

```
/** 
 * @View()
 */
public function getConfigAction($id)
{   
    $config = $this->getConfigById($id);
    return array('configs' => array($config));
} 
```

创建工作正常。但是重定向不起作用，因为我希望它起作用。当我执行以下命令时

```
curl -v -H "Accept: application/xml" -H "Content-type: application/json" -X POST \
-d '{"config": {"name": "TEST1"}}' http://localhost:8888/app_dev.php/configs 
```

输出是：

```
< HTTP/1.0 201 Created
< Date: Wed, 19 Dec 2012 14:13:17 GMT
< location: http://localhost:8888/app_dev.php/configs/12 
```

我无法管理包含新创建实体的响应。这是所需的输出：

```
< HTTP/1.0 201 Created
< Date: Wed, 19 Dec 2012 14:13:17 GMT
< location: http://localhost:8888/app_dev.php/configs/12
<?xml version="1.0" encoding="UTF-8"?>
<result>
  <entry>
    <entry>
      <id>12</id>
      <name><![CDATA[TEST1]]></name>
    </entry>
  </entry>
</result> 
```

# delphi - SerAndDeser.pas(298)：W1036 变量“tForm”可能尚未初始化

> ID：13955077
> 
> 赞同：1
> 
> 时间：2012-12-19T14:58:52.440
> 
> 标签：delphi, variables, build, warnings, delphi-xe2

有一个代码

```
for j := 0 to mForm.ComponentCount - 1 do
    if mForm.Components[j] is TableFormInfo then
      //try
        //table := nil;
        //tempFmtable := nil;
        //tForm := nil;

        tForm := mForm.Components[j] as TableFormInfo;

        table := TTableSpec(DBSchema.Tables.FindComponent(tForm.Table));
        tempFmtable := TfmTableData.Create(MainWindow);
        tempFmtable.Name := tForm.Name;
        tempFmtable.tname := tForm.Table;
        //tempFmtable.Caption := Utf8ToAnsi(table.Description);
        tempFmtable.Left := tForm.LeftValue;
        tempFmtable.Top := tForm.TopValue;
        tempFmtable.Height := tForm.HeightValue;
        tempFmtable.Width := tForm.WidthValue;

        tempFmTable.IBQuery1.SQL.Clear;
        tempFmtable.IBQuery1.SQL.Add('select * from ' + table.Name);
        tempFmtable.IBQuery1.Open;
        tempFmtable.DragKind:=dkDock;
        tempFmtable.DragMode:=dmAutomatic;

        i := 0;
        querystr:='select ';
        while i <= tForm.ComponentCount - 1 do
          begin
          if tForm.Components[i] is TableFieldInfo then
          begin
            //querystr:='select ';
            //field := nil;
            //tempFmtable.Show;
            field := tForm.Components[i] as TableFieldInfo;
            tempFmtable.Caption:=tForm.Caption;
            tempFmtable.DBGrid1.Columns[i].FieldName := field.FieldNameValue;
            tempFmtable.DBGrid1.Columns[i].Title.Caption := field.DescriptionValue;
            tempFmtable.DBGrid1.Columns[i].Index := field.IndexValue;
            tempFmtable.DBGrid1.Columns[i].Visible := field.VisibleValue;
            tempFmtable.DBGrid1.Columns[i].Width:=field.WidthValue;
            //tempFmtable.CheckListBox1.Items.Add(field.Description);
            //tempFmtable.CheckListBox1.Checked[i] := field.Visible;
            //tempFmtable.Show;
             if field.VisibleValue  then querystr:=querystr+ConvertNameField(field.FieldNameValue)+', ';
          end;
            //inc(i);
          if tForm.Components[i] is SettingsFormInfo then
            begin
              //sForm:=nil;
              sForm:=tForm.Components[i] as SettingsFormInfo;
              tempsettings := TfmSettings.Create(tempFmtable);
              tempsettings.Caption:=sForm.Caption;
              //tempsettings := TfmSettings.Create(tempFmtable);
              tempsettings.Name := sForm.Name;
              tempsettings.Left := sForm.LeftValue;
              tempsettings.Top := sForm.TopValue;
              tempsettings.Height := sForm.HeightValue;
              tempsettings.Width := sForm.WidthValue;
              tempSettings.CheckListBox1.Clear;
              //for k:=0 to sForm.ComponentCount-1 do
              k:=0;
              while k<=sForm.ComponentCount-1 do
                begin
                  if sForm.Components[k] is ItemCheckListBoxInfo then
                    begin
                      //item:=nil;
                      item:=sForm.Components[k] as ItemCheckListBoxInfo;
                      tempsettings.CheckListBox1.Items.Add(item.TextValue);
                      tempsettings.CheckListBox1.Checked[item.IndexValue]:=item.CheckedValue
                    end;
                  if sForm.Components[k] is LabelInfo then
                    begin
                      //labelobj:=nil;
                      labelobj:=sForm.Components[k] as LabelInfo;
                      tempsettings.Label1.Caption:=labelobj.CaptionValue;
                    end;
                  if sForm.Components[k] is EditInfo then
                    begin
                      //edit:=nil;
                      edit:=sForm.Components[k] as EditInfo;
                      TEdit(tempsettings.FindComponent(edit.Name)).Text:=edit.TextValue;
                    end;
                    inc(k);
                end;
             if ((tForm.Components[i] is SettingsFormInfo) and (i=tForm.ComponentCount-1) and (k=sForm.ComponentCount)) then tempsettings.Show;
            end;
             //inc(i);
             //if ((tForm.Components[i] is SettingsFormInfo) and (i=tForm.ComponentCount-1) and (k=sForm.ComponentCount)) then tempsettings.Show;
             inc(i);
          end;

        {for i := 0 to table.Fields.ComponentCount - 1 do
        begin
          descr := Utf8ToAnsi(((table.Fields.Components[i]) as TFieldSpec).Description);
          tempFmtable.CheckListBox1.Items.Add(descr);
          tempFmtable.DBGrid1.Columns[i].Title.Caption := descr;
          tempFmtable.CheckListBox1.Checked[i] := true;
        end; }

        Delete(querystr, Length(querystr)-1, 1);
        querystr:=querystr+'from '+table.Name;
        tempFmTable.IBQuery1.SQL.Clear;
        tempFmtable.IBQuery1.SQL.Add(querystr);
        tempFmtable.IBQuery1.Open;
        for s := 0 to tForm.ComponentCount-1 do
          begin
            if tForm.Components[s] is TableFieldInfo then
              begin
                //field := nil;
                //tempFmtable.Show;
                field := tForm.Components[s] as TableFieldInfo;
                if field.VisibleValue then
                   begin
                     for t := 0 to tempFmtable.DBGrid1.Columns.Count-1 do
                       begin
                       if ((tempFmTable.DBGrid1.Columns[t].Title.Caption=field.DescriptionValue) and (tempFmtable.DBGrid1.Columns[t].FieldName=field.FieldNameValue)) then
                           tempFmTable.DBGrid1.Columns[t].Width:=field.WidthValue;
                       end;
                   end;
              end;
          end;
        tempFmtable.Show; 
```

通过反序列化进入状态。我想在 tForm 变量使用之前标记它

```
table := TTableSpec(DBSchema.Tables.FindComponent(tForm.Table)); 
```

它在上一行初始化

```
tForm := mForm.Components[j] as TableFormInfo; 
```

但是尽管在组装过程中出现了这个警告

```
[dcc32 Warning] SerAndDeser.pas(298): W1036 Variable 'tForm' might not have been initialized 
```

为什么？如何在不丢失应用程序功能的情况下摆脱警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:06:36.983

你的缩进都是错误的。我认为这是让你感到困惑的地方。如果你正确缩进代码，它看起来像这样：

```
for j := 0 to mForm.ComponentCount - 1 do
  if mForm.Components[j] is TableFormInfo then
    // try
    // table := nil;
    // tempFmtable := nil;
    // tForm := nil;

    tForm := mForm.Components[j] as TableFormInfo;

table := TTableSpec(DBSchema.Tables.FindComponent(tForm.table)); 
```

我认为现在可以清楚地看到`for`循环之后的代码可以在没有`tForm`分配的情况下执行。

从问题的缩进中可以清楚地看出，您打算将赋值后面的长段代码放在`if`语句中。但是编译器遵循代码而不是缩进。

您将需要在`begin/end`代码中添加一些对。就我个人而言，我从不使用单语句语法——我所有的块都是用`begin/end`对包裹的复合块。在我看来，单语句语法是 Pascal 的一大错误。确实是C。

我使用内置的代码格式化程序来理顺你的缩进。这可能是一个有用的工具，可以帮助您修复代码。它可以让你掌握如何正确布置缩进。

最后，正如我之前至少对你说过一次的那样，不要`tForm`用作变量名。这隐藏了名为 的类型`TForm`。`T`前缀是为类型保留的。您应该调用您的表单变量，`Form`或者可能表明它是一个局部变量。`LForm``L`

# mysql - 仅在 MySQL 中插入一次或更新（如果存在） - Facebook 应用

> ID：13955078
> 
> 赞同：1
> 
> 时间：2012-12-19T14:58:56.277
> 
> 标签：mysql, facebook, insert, duplicates, facebook-apps

几周以来我一直在尝试制作一个 facebook 游戏，但我被困住了.. 这可能是一个容易回答的问题，但这是我第一次使用 mysql，我没有找到可以帮助我的东西互联网。

我想做的是一个 Flash 游戏，人们在确认后在后台上传他们的个人数据，如电子邮件、姓名、姓氏，并获得分数，在获得更高分数后，如果现有值较低，则字段更新。

现在我已经设法创建了这段代码

```
$dbhost     = 'bla bla';
$dbuser     = 'bla bla';
$dbpass     = 'bla bla';
$data       = 'bla bla';

$db = mysql_connect($dbhost, $dbuser, $dbpass);

if (mysql_errno() > 0) {
if (mysql_errno() == 1203) {
    die("DB error");
} else {
    die("DB error");
}
}

if ($_REQUEST['action'] == "add") {
mysql_select_db($data, $db);
$insert = "INSERT INTO FB (UID, first_name, last_name, email, link) 
VALUES (

    '".$_REQUEST['uid']."', 
    '".$_REQUEST['first_name']."', 
    '".$_REQUEST['last_name']."', 
    '".$_REQUEST['email']."', 
    '".$_REQUEST['link']."'

    )";

$res = mysql_query($insert, $db) or die ("Save Error");
mysql_close($db);
echo "Added to DB!";
} 
```

它工作得很好，但它有一个问题..如果我再次提交我的字段，另一个重复的行会出现在表中，并且具有相同的信息。

我希望用户只提交一次.. 因此有一个唯一的行，如果他设法获得更高的分数，则只更新他的分数。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:03:35.677

创建一个适当的`UNIQUE`密钥，然后使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)：

```
ALTER TABLE FB ADD UNIQUE KEY (UID);

INSERT INTO FB
  (UID, first_name, last_name, email, link) 
VALUES
  (123, 'foo', 'bar', 'foo@bar.com', '')
ON DUPLICATE KEY UPDATE
  first_name = VALUES(first_name),
  last_name  = VALUES(last_name),
  email      = VALUES(email)
  link       = VALUE(link)
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:15:13.270

原始海报提到了一些关于评分的事情，但它没有作为表格中的一列出现......这*应该*检查新分数是否低于当前分数，如果是，那么新分数将分配给更新中的字段，否则使用当前分数。

```
$insert = "INSERT INTO FB (UID, first_name, last_name, email, link, score) 
VALUES (
    '".$_REQUEST['uid']."', 
    '".$_REQUEST['first_name']."', 
    '".$_REQUEST['last_name']."', 
    '".$_REQUEST['email']."', 
    '".$_REQUEST['link']."', 
    '".$_REQUEST['score']."'
    )
ON DUPLICATE KEY UPDATE
score = IF(score < VALUES(score), VALUES(score), score)
"; 
```

# python - 在 Python 中避免线程中的 Stack Overflow 错误的方法

> ID：13955081
> 
> 赞同：-1
> 
> 时间：2012-12-19T14:59:04.400
> 
> 标签：python, multithreading, stack-overflow

作为一名本地 Java 开发人员，我想我已经达到了我习惯的情况。

我正在使用 PyDev 开发一个多线程 Python 2.7 应用程序，并在 Windows 7 64 位上从 Eclipse 运行。它是多线程的，因为它使用 wxPython，因此它使用 GUI 主线程和繁重的线程（我或我有一些繁重的任务），每个回调一个线程。

我已经到了一个弹出`0xc00000fd`错误的地步，其中`python27.dll`包含一条 appcrash 消息。这发生在线程中的函数返回值时。如果我减少回调正在使用的数据量，那么这段代码可以正常工作，所以我很确定堆栈上的东西太多了，并且任何地方都没有递归出错。

我可以打电话`stack_size`在创建之前调用线程来增加我可用的空间，如果我要弄清楚有多少空间可以满足它，也许这可以工作一段时间。线程将不得不做更多而不是更少的工作，所以这似乎是一个创可贴的情况。

我认为 Python 使用堆内存创建了堆栈，所以这在 Python 中应该不是问题吗？它是我的众多第三方 api 之一，它是真正的罪犯吗？那么，如果没有 C 语言中的低级内存创建决策能力，我如何将其中的一些从堆栈中取出并放入堆内存中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T15:03:48.173

正如[Guido 所说，](http://mail.python.org/pipermail/python-dev/2006-January/059621.html) [Python 永远不应该崩溃](http://wiki.python.org/moin/CrashingPython)：

> 我并不是说它是不可破解的。我的意思是，如果你让它崩溃，除非被证明是轻率的，否则它就是一个错误。

因此，如果发生崩溃，则将其视为 Python 本身的错误。这是极不可能的，并且很可能您的扩展模块之一正在做坏事，并使用 Python。

我的建议是去掉一些东西，直到你确切地找到问题所在。如果它只发生在核心 python 的东西上，那么你需要提交一个错误报告，否则，它需要去任何扩展模块的开发人员那里导致它。

# javascript - JavaScript：访问与变量同名的数组？

> ID：13955082
> 
> 赞同：5
> 
> 时间：2012-12-19T14:59:06.067
> 
> 标签：javascript, arrays

> **可能重复：**
> [从字符串中获取变量](https://stackoverflow.com/questions/13882215/get-variable-from-a-string)

*我有一个名为myArray*的数组和一个名为*myVar*的变量。myVar 变量保存一个值“myArray”（myVar 的值等于数组名称）。我可以使用 myVar 变量以某种方式访问​​数组元素吗？一些代码来解释我的意思：

```
var myArray = {1, 2, 3};
var myVar = "myArray"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T15:02:10.873

这里的关键是[括号符号](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

如果`myArray`是全局的

```
var myArray  = ["1","2","3"];
var myVar = "myArray";
console.log(window[myVar]); 
```

最好使用命名空间

```
var myData = {};
myData.myArray  = ["1","2","3"];
var myVar = "myArray";
console.log(myData[myVar]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:02:59.270

如果您的数组 ( `myArray`) 是一个全局变量，那么您可以使用`window[myVar]`. 如果它是一个局部变量，那么唯一的方法就是使用`eval(myVar)`（或其类似物）。

```
arr = window[myVar] // assuming myArray is a global variable
arr[0] = 5 // same as myArray[0] = 5 
```

# xslt - 在 XSLT 中，如何设置价格范围变量并在样式表的其他地方使用它？

> ID：13955088
> 
> 赞同：3
> 
> 时间：2012-12-19T14:59:24.137
> 
> 标签：xslt, xslt-1.0

想将价格转换为明确的价格*范围*，例如，我可以说“低于 20 美元”而不是 17.95 美元。使用 xml:choose 对我有用，但是当我尝试将结果放入类属性时，出现错误：

*XSLT 转换期间出错：发生未知错误 ()*

我一直在阅读 xsl:variable 但在这种情况下似乎找不到设置变量的正确方法。

XML

```
 <?xml version="1.0" encoding="UTF-8"?>
    <productSearchResponse>
        <status>SUCCESS</status>
        <products found="20">
            <product>
                <itemNumber>50575</itemNumber>
                <itemName>Example 1</itemName>
                <price>$ 17.95</price>
            </product>

            ...

            <product>
                <itemNumber>81588</itemNumber>
                <itemName>Example 2</itemName>
                <price>$ 25.95</price>
            </product>
        </products>
    </productSearchResponse> 
```

样式表

```
<?xml version="1.0" encoding="UTF-8"?>          
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html"/>
<xsl:template match="/">
    <html>
        <head>
        </head>
        <body>
            <xsl:for-each select="/essentials/webservice">
                <xsl:for-each select="document(@filename)/productSearchResponse/products/product">                  
                    <xsl:variable name="producingCountry" select="producingCountry"/>
                    <xsl:variable name="price" select="price"/>
                    <xsl:variable name="priceNoSymbol" select="translate($price,'&#36;', '')"/> 

                    <!-- Assign pricing bands -->                       
                        <xsl:choose>                            
                            <xsl:when test="$priceNoSymbol &lt; '20'">  
                                <xsl:variable name="priceBand" select="'under20'" />
                            </xsl:when>                             
                            <xsl:when test="$priceNoSymbol &gt; '39.99'">   
                                <xsl:variable name="priceBand" select="'20to40'" />
                            </xsl:when>                             
                            <xsl:otherwise>
                                <xsl:variable name="priceBand" select="'over40'" /> 
                            </xsl:otherwise>                                
                        </xsl:choose>

                    <!-- Make the product div -->
                        <div class="product {$producingCountry} {$price} {$priceNoSymbol}     ">    
                        <!--           How do I insert priceBand into the class attribute? ^ -->    
                            <xsl:apply-templates select="itemName"/><br/>                           
                            <xsl:apply-templates select="producingCountry"/><br/>                       
                            <xsl:apply-templates select="price"/><br/><br/>                                                 
                        </div>

                </xsl:for-each>
            </xsl:for-each>
        </body>         
    </html>
</xsl:template>
</xsl:stylesheet> 
```

生成的 html

```
 <html>
    <head>
        <body>

            <div class="product France $ 17.95 17.95 ">
                Example 1
                <br>
                France
                <br>
                $ 17.95
                <br>
                <br>
            </div>

            ...

            <div class="product Portugal $ 25.95 25.95 ">
                Example 2
                <br>
                Portugal
                <br>
                $ 25.95
                <br>
                <br>
            </div>

        </body>
    </html> 
```

所需的 html

```
 <html>
    <head>
        <body>

            <div class="product France $ 17.95 17.95 under20 ">
                Example 1
                <br>
                France
                <br>
                $ 17.95
                <br>
                <br>
            </div>

            ...

            <div class="product Portugal $ 25.95 25.95 20to40">
                Example 2
                <br>
                Portugal
                <br>
                $ 25.95
                <br>
                <br>
            </div>

        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:20:57.697

我没有详细研究整个问题，但你应该替换

```
<xsl:choose>                            
  <xsl:when test="$priceNoSymbol &lt; '20'">  
    <xsl:variable name="priceBand" select="'under20'" />
  </xsl:when>                             
  <xsl:when test="$priceNoSymbol &gt; '39.99'">   
    <xsl:variable name="priceBand" select="'20to40'" />
  </xsl:when>                             
  <xsl:otherwise>
    <xsl:variable name="priceBand" select="'over40'" /> 
  </xsl:otherwise>                                
</xsl:choose> 
```

和

```
<xsl:variable name="priceband">
  <xsl:choose>                            
    <xsl:when test="$priceNoSymbol &lt; 20">under20</xsl:when>                             
    <xsl:when test="$priceNoSymbol &lt; 40">20to40</xsl:when>                             
    <xsl:otherwise>over40</xsl:otherwise>
  </xsl:choose>
</xsl:variable> 
```

和

```
<xsl:variable name="priceNoSymbol" select="translate($price,'&#36;', '')"/> 
```

和

```
<xsl:variable name="priceNoSymbol" select="number(translate($price,'&#36;', ''))"/> 
```

当您在这样的`xsl:when`元素内定义变量时，它几乎立即超出范围，并且在`xsl:choose`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:21:32.733

使用[`number()`](https://developer.mozilla.org/en-US/docs/XPath/Functions/number)on`$priceNoSymbol`和比较 to`20.00`而不是`'20.00'`. 您可能在这里进行字符串比较，这似乎不是您想要的。您可能还需要`$priceBand`在`xsl:when`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:27:06.067

> ```
>  <xsl:choose>                            
>                         <xsl:when test="$priceNoSymbol &lt; '20'">  
>                             <xsl:variable name="priceBand" select="'under20'" />
>                         </xsl:when>                             
>                         <xsl:when test="$priceNoSymbol &gt; '39.99'">   
>                             <xsl:variable name="priceBand" select="'20to40'" />
>                         </xsl:when>                             
>                         <xsl:otherwise>
>                             <xsl:variable name="priceBand" select="'over40'" /> 
>                         </xsl:otherwise>                                
>                     </xsl:choose> 
> ```

原因是这样定义的三个变量`priceBand`，立即超出范围，当你稍后引用这样的变量时，结果是“变量未定义”错误。

**使用**：

```
 <xsl:variable name="priceBand">                       
                   <xsl:choose>                            
                        <xsl:when test=
                       "$priceNoSymbol &lt; 20">under20</xsl:when>                             
                        <xsl:when test=
                        "$priceNoSymbol > 39.99">20to40</xsl:when>                             
                        <xsl:otherwise>over40</xsl:otherwise>                                
                    </xsl:choose>
               </xsl:variable> 
```

# iphone - 找到第一个逗号时从 NSString 中删除字符

> ID：13955089
> 
> 赞同：-3
> 
> 时间：2012-12-19T14:59:24.570
> 
> 标签：iphone, objective-c, ios

我有一个`NSString`& 我想从中删除一些字符，当在其中找到第一个逗号时。

```
ex. str = @"0,1,2,3"; 
output - > str = @"1,2,3"; 
```

这该怎么做。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:02:18.927

检查以下代码：

```
NSMutableArray *tempArray=[[NSMutableArray alloc]initWithArray:[yourString componentsSeparatedByString:@","]];
if([tempArray count] > 0)
{
   [tempArray removeObjectAtIndex:0];
}
NSString *output=[tempArray componentsJoinedByString:@","]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:01:49.173

```
NSMutableArray *arr1 = [[str1 componentsSeparatedByString:@","] mutableCopy];
if ([arr1 count]){
    [arr1 removeObjectAtIndex:0];
}
NSString *finalStr = [arr1 componentsJoinedByString:@","]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T15:04:57.843

一般情况：

```
NSString* str= @"0,1,2,3";
NSRange range= [str rangeOfString: @","];
if(range.location!=NSNotFound)
{
    str= [str substringWithRange: NSMakeRange(range.location+1, str.length-range.length-1)];
    NSLog(@"%@",str);
} 
```

如果字符串没有逗号，它不会造成崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T16:46:18.277

试试这个：

```
NSString *str1=@"0,1,2,3";
NSMutableArray *arr1=[[NSMutableArray alloc]initWithArray:[str1 componentsSeparatedByString:@","]];
if([arr1 count]>1)[arr1 removeObjectAtIndex:0];//as 1st comma is found. means atleast 2 elements must be there.
NSString *finalString=[arr1 componentsJoinedByString:@","]; 
```

注意：这个没有编译和检查..我只是在 Windows 中输入记事本。

# php - 实时但不在测试服务器上时出现语法错误

> ID：13955090
> 
> 赞同：0
> 
> 时间：2012-12-19T14:59:25.350
> 
> 标签：php, function, syntax

我有一个函数可以从数组 kay 中删除下划线并将其替换为空格以便插入数据库。

当它在他的测试服务器上运行时，它运行良好，但是当它运行时，它会在第 22 行报告一个语法错误——期待一个 ")" 。

这是功能：

```
function fixArrayKey(&$arr)
{
    $arr=array_combine(array_map(function($str){return str_replace("_"," ",$str);},array_keys($arr)),array_values($arr));
    foreach($arr as $key=>$val)
    {
        if(is_array($val)) fixArrayKey($arr[$key]);
    }
} 
```

第 22 行是 $arr=array_combine 开始的地方。

在我的一生中，我看不到它哪里出了问题，甚至无法理解为什么它可以在本地服务器上运行，但不能在实时服务器上运行。

我的实时服务器是 IIS7 服务器，这与它有什么关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:10:35.487

也许如果你让它更简单一点，你会发现错误所在

```
function fixArrayKey(&$arr)
{
    $keys   = array_keys($arr));
    $values = array_values($arr);

    // Try without the lambda function
    $map = array_map('lambda_replace', $keys);

    // Or you can uncoment the line below (and comment the one above) to use
    // the lambda function
    //$map = array_map(function($str){return str_replace("_"," ",$str);}, $keys);

    $arr = array_combine($map, $values);

    foreach ($arr as $key=>$val)
    {
        if(is_array($val)) fixArrayKey($arr[$key]);
    } 
}

function lambda_replace($str)
{
    return str_replace('_', ' ', $str);
} 
```

一个好主意是在开发和生产环境上都做一个`phpinfo()`以确定它们之间的任何差异。例如，PHP 上的模块在不同版本上的行为不同，甚至 PHP 本身在不同版本中也有不同的特性。

# html - 输入类型=“日期”在 IE 中不起作用

> ID：13955096
> 
> 赞同：5
> 
> 时间：2012-12-19T14:59:39.617
> 
> 标签：html, browser

为什么 type="date" 在 Chrome 中有效但在 IE 中无效：

```
<input name="start_date" type="date" value="<?php echo $today;?>" autocomplete="off" required="required"> 
```

如果您需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T15:02:28.657

input type='date' 是 HTML 5 的一项功能。因此，它尚未被所有浏览器实现，并且不会被 IE 7 和 8 等旧浏览器支持。

[http://caniuse.com/#search=date](http://caniuse.com/#search=date)

您应该使用带有 javascript 的 polyfill 来处理这些情况，并在不支持 HTML5 的浏览器上提供一致的用户体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:02:32.153

您只需在浏览器中打开[http://html5test.com/](http://html5test.com/)之类的站点即可测试哪个浏览器支持新 HTML5 标准的哪些元素

# java - 对从 json 数据解析的对象进行排序

> ID：13955097
> 
> 赞同：5
> 
> 时间：2012-12-19T14:59:40.890
> 
> 标签：java, android, comparable

我的 Android 客户端获取服务器 JSON 响应如下：

```
{"students":[{"id":1,"name":"John","age":12},
             {"id":2,"name":"Thmas","age":13}
             {"id":3,"name":"Merit","age":10}
             ...]} 
```

[我的 Android 客户端代码使用gson](http://code.google.com/p/google-gson/)解析对 Java 对象的 JSON 响应。

我对应的Java类：

```
public class StudentList{
  private List<Student> students;

  public List<Student> getStudents(){
    return students;   
  }
}

public class Student{
  private long id;
  private String name;
  private int age;

  public long getId() {
    return id;
  }
  public String getName(){
    return name;
  }
  public int getAge(){
    return age;
  }

} 
```

此时对我来说一切正常，我可以成功地将 JSON 数据解析为我的 Java 对象，如下所示：

```
//'jsonData' is the server responsed json data 
StudentList students = gson.fromJson(jsonData, StudentList.class) 
```

然后，我想修改一下以按字母顺序获取`students`（来自`json`数据）**，按**学生的`name`. 我尝试了以下方式：（我更改了`Student`类以实现`Comparable<>`接口）：

```
public class Student implements Comparable<Student>{
  private long id;
  private String name;
  private int age;

  public long getId() {
    return id;
  }
  public String getName(){
    return name;
  }
  public int getAge(){
    return age;
  }

  // Override compareTo(), sort by 'name'
  @Override
  public int compareTo(Student obj) {
    return this.getName().compareToIgnoreCase(obj.Name());      
  } 
} 
```

使用上述修改后`Student`的类，我尝试再次解析 json 数据：

```
//'jsonData' is the server responsed json data 
StudentList students = gson.fromJson(jsonData, StudentList.class) 
```

但是结果`students`还是和排序前一样。我的排序解决方案根本不起作用。**为什么？？我哪里错了？？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:03:17.397

简单地实现 Comparable 不会让你的类被排序；您必须实际*做*一些事情来对其进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:04:02.220

gson 不会对列表中的项目进行排序，它仍然只会添加项目。[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)您可以在使用方法创建列表后对其进行排序：

```
java.util.Collections.sort(students); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:03:24.053

仅仅因为您的课程`Comparable`不会使每个集合都自动排序。你必须告诉一个特定的集合使用自然排序，通过使用类似的东西`Collections.sort(students);`

# cakephp - 为什么 CakePHP 2.2.4 中的视图缓存在缓存视图后会导致空白页？

> ID：13955098
> 
> 赞同：4
> 
> 时间：2012-12-19T14:59:42.323
> 
> 标签：cakephp, caching, view

我正在将 CakePHP 1.3 应用程序更新到 2.2.4，并按照 CakePHP Book 2.0 中概述的步骤打开视图缓存。视图缓存在 1.3 应用程序中一直运行良好，但是当我在 2.2.4 应用程序中打开它时，每个视图都会最初显示。但是，一旦视图被缓存，任何后续尝试加载该视图都会导致空白页面没有源代码和错误消息。

这是我到目前为止所尝试的：

1.  尝试将调试级别从 0 更改为 1 和 2。
2.  仔细检查了我的引导文件以确保加载了 CacheDispatcher。
3.  仔细检查了我的 AppController 是否有 public $helpers = array('Cache');
4.  仔细检查了我的 AppController 的 public $cacheAction = true;
5.  将 tmp 文件夹、子文件夹和文件 chmod 到 777。
6.  检查调试和错误日志是否有错误，但一无所获。
7.  Apache 错误和访问日志也没有显示错误。

如果我从 tmp/cache/views 中删除缓存的视图，然后重新加载它显示的页面。但是由于视图被缓存，另一个重新加载会导致空白页面。知道这里发生了什么吗？它在 1.3 应用程序中工作...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T22:40:36.233

在我的应用程序控制器中，我更改了： public $cacheAction = true; 公开 $cacheAction = "1 小时"; 并且视图现在从缓存而不是空白页面显示。我会称这个为固定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:47:21.000

完全空白的页面，没有错误，消息...等几乎总是在 PHP-only 文件中的关闭 PHP 标记结束后有一个空格或额外字符。检查您的控制器、模型、行为...等。（在纯 PHP 文件中完全不关闭 PHP 标记是一种很好的做法。这样可以防止出现空白屏幕）。

# php - 带有 YUM 的 PHP 扩展目录

> ID：13955099
> 
> 赞同：3
> 
> 时间：2012-12-19T14:59:52.540
> 
> 标签：php, amazon-ec2, yum, ec2-ami

我已经在 Linux 机器上安装了 PHP，但似乎无法从 PHP 中找到“模块”目录。在安装了 MAMP 的 Mac 上，此文件夹位于 中`~/Applications/MAMP/bin/php/php5.3.6/`，但我无法确定此文件夹在 Linux 上的安装位置，`yum`.

任何知道 yum 安装这些 PHP 目录的人吗？

* * *

**编辑：有关环境的更多信息**

我在 Amazon Linux AMI (ami-1624987f) 上使用 Amazon EC2。但在开发过程中，我使用 Ubuntu 并通过`apt-get`.

安装由`yum install php php-devel php-mysql`

现在，当将应用程序移动到 EC2 时，似乎 apt 在此 AMI 上不可用，我必须使用 yum。似乎**yum**安装与**apt**不同，因为我找不到上述文件夹。

**编辑2：结论**

还有更多问题，所以最后我从 Amazon Linux 切换到了 Ubuntu，在那里我也可以使用 apt-get。但是chanthemanless的答案是有效的。感谢大家！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T23:30:02.513

您可以运行：

```
sudo php -i | grep extension 
```

输出应显示如下：

extension_dir => /blah/blah/blah

或者你可以运行：

```
sudo find / -name '*php*' 
```

并查看您拥有 php 文件的所有地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-09T05:29:40.827

我在 Amazon EC2 实例中使用 PHP 7.2.24，即使安装了扩展并且我无法找到路径。通过执行 phpinfo() 我发现 extension_dir 设置为 /usr/lib64/php/modules 安装所有目录的位置。

我修改了 /etc 文件夹下的 php.ini 仍然无法反映。但后来发现这个非常有用的链接[点击这里](https://forums.aws.amazon.com/thread.jspa?messageID=820299&tstart=0)我发现我们需要在修改后重新启动php-fpm，然后重新启动apache。

> sudo systemctl restart php-fpm.service

我希望它可以帮助某人。

# php - 提交 HTML / PHP 表单后需要保持弹出 div 打开

> ID：13955103
> 
> 赞同：0
> 
> 时间：2012-12-19T15:00:19.907
> 
> 标签：php, jquery, html, forms, jquery-animate

我有一个弹出 div ，当用户单击 div 时会打开`#request-brochure-ribbon`。这很好用。但是，弹出窗口包含一个提交给 PHP 脚本的 HTML 表单。当用户执行此操作时，弹出的 div 将消失，您必须再次单击它才能看到提交 HTML 表单时 PHP 脚本显示的成功消息。

使用下面的 Javascript。有没有办法修改它以保持弹出 div 直到他们单击关闭按钮？

谢谢！

```
$(document).ready(function(){
    $('#request-brochure-ribbon').click(function(){
        $('#brochure-request-popout').animate({
            'right':'10px',
        },500);       
    });

    $('#close').click(function(){
        $('#brochure-request-popout').animate({
            'right':'-1500px'
        },500);
    });     
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:06:28.457

提交表单后您的页面可能会重新加载，您正在寻找 ajax 来提交您的表单：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - 如何仅在 Galaxy S3 上运行应用程序？

> ID：13955109
> 
> 赞同：1
> 
> 时间：2012-12-19T15:00:36.943
> 
> 标签：android, android-layout

我只想在 Android 的 Galaxy S3 上运行我的应用程序。我必须在 Android 中更改什么：Manifiestfile。我在 SO 和 Google 上搜索了很多，但仍然没有找到正确的解决方案。请有人帮我解决这个问题。提前致谢。

```
<supports-screens
    android:anyDensity="true"
    android:compatibleWidthLimitDp="120"
    android:largeScreens="true"
    android:largestWidthLimitDp="120"
    android:normalScreens="false"
    android:requiresSmallestWidthDp="120"
    android:resizeable="true"
    android:smallScreens="false"
    android:xlargeScreens="false" /> 
```

我必须在上面的代码中更改什么，还是必须在此处添加其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:17:05.690

您可以在发布应用程序的开发者控制台中限制某些设备/手机。不在您的应用程序中。

更新：Se 也此回复：[如何将 android 应用程序限制为特定设备制造？](https://stackoverflow.com/questions/9510649/how-to-restrict-android-app-to-specific-device-make)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:10:12.607

您需要使用[android.os.Build](http://developer.android.com/reference/android/os/Build.html)并使用`Build.MODEL`,`Build.PRODUCT`和`Build.MANUFACTURER`字段。

但这只会在安装后起作用。

```
String mf = android.os.Build.MANUFACTURER;

if (mf.equals("Samsung")) {
    //device is samsung
} else {
    //device not samsung
} 
```

然后扩展该逻辑以包含模型。我不知道你的应用程序使用了什么技术，但基本上你可以在检查成功时放置一个`init()`或 a`main()`或 w/e，然后给用户某种对话框或消息来告诉他为什么它失败（他设备类型错误）

不过，如前所述，您可以在[发布](http://market.android.com/publish/)应用程序本身时将应用程序限制在特定设备上。

当设备运行您的代码时，这个小技巧只会在安装后起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:15:25.283

如果您要在 Play 商店中发布，您可以选择哪些设备可以安装您的应用。搜索类似这样的内容：

> 此应用程序可用于超过 2242 台设备。显示设备

# git - 如何通过提交消息在存储库中查找 git 提交？

> ID：13955110
> 
> 赞同：7
> 
> 时间：2012-12-19T15:00:38.393
> 
> 标签：git

我们最近将我们的 SVN 存储库转换为 GIT。看来我们通过这种转换丢失了一些提交，并想验证这一点。

所以我们想为每个 svn commit 找到一个匹配的 git commit 来检查转换是否真的发生了。

`$ git log|grep "some partial commit message"`这是不够的，因为它只遍历直接祖先并忽略不是直接祖先的分支。

`$ git show <commit-hash>`因为 svn 没有 sha1sums 所以不能工作。

我发现的最接近的事情是：`$ git reflog show --all --grep="releasenotes"|xargs git show --shortstat`但这似乎并不完全有效，因为它似乎在更多的地方 grep 而不仅仅是提交消息（我们得到了误报）。

我也试过用这个：`$ git rev-list --all|xargs -n1 bash -c 'git show|head -n10'|grep -i release`

基本上我缺乏一个很好的方法来打印没有差异的提交消息。

[编辑]

我不确定，但我想这应该列出存储库中的所有提交消息。

```
git rev-list --all|xargs -n1 git log -n1 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T15:09:40.460

您可以只使用该`--all`选项`git log`

```
git log --all --oneline --graph --decorate | grep "message" 
```

这相当于

```
git log --all --oneline --graph --decorate --grep "message" 
```

或者，如果您希望有上下文并且没有很多提交，您可能想要做类似的事情

```
git log --all --oneline --graph --decorate | less
/ message 
```

这样你就可以看到*你*的提交相对于其他提交的位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T15:12:58.123

您可以使用以下`--grep`选项[`git log`](http://git-scm.com/docs/git-log)：

```
$ git log --all --grep=word 
```

请参阅“[如何 grep git commits for a certain word](https://stackoverflow.com/questions/1337320/how-to-grep-git-commits-for-a-certain-word) ”：这是用于 grep 提交*消息*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:35:03.990

您也可以使用图形用户界面。

```
gitk 
```

它将打开一个 GUI，然后将您的提交消息写入**包含框**，然后按 Enter 键。

它将显示所有匹配的提交并突出显示。

# php - 在 facebook App 中上传图片

> ID：13955119
> 
> 赞同：3
> 
> 时间：2012-12-19T15:00:58.050
> 
> 标签：php, facebook, file-upload, upload

我正在创建一个 facebook，我已经在普通 PHP 程序中使用了几次上传图像代码。我现在在 facebook 应用程序中使用它。这是我的代码

```
 $image=clean($_FILES['image']['name']);
echo '<h1>Got it</h1>'.$image;
    //if it is not empty
    if (isset($_FILES))
    {
    //get the original name of the file from the clients machine
        $filename = stripslashes($_FILES['image']['name']);
            echo '<h1>Got it 2</h1>'.$filename;

    //get the extension of the file in a lower case format
        $extension = getExtension($filename);

        $extension = strtolower($extension);
    //if it is not a known extension, we will suppose it is an error and 
        // will not  upload the file,  
    //otherwise we will do more tests

 if (($extension != "jpg") && ($extension != "jpeg") && ($extension !=
 "png") && ($extension != "gif")) 
        {
        //print error message
            echo '<h1>Unknown extension!</h1>'.$filename.'hi';
            $errors=1;
        }
        else
        {
//get the size of the image in bytes
 //$_FILES['image']['tmp_name'] is the temporary filename of the file
 //in which the uploaded file was stored on the server
 $size=filesize($_REQUEST['image']['tmp_name']);

//compare the size with the maxim size we defined and print error if bigger
if ($size > MAX_SIZE*1024)
{
    echo '<h1>You have exceeded the size limit!</h1>';
    $errors=1;
}

//we will give an unique name, for example the time in unix time format
$image_name=time().'.'.$extension;
//the new name will be containing the full path where will be stored (images 
//folder)
$newname="images/".$image_name;
//we verify if the image has been uploaded, and print error instead
$copied = copy($_REQUEST['image']['tmp_name'], $newname);
if (!$copied) 
{
    echo '<h1>Copy unsuccessfull!</h1>';
    $errors=1;
    $newname="copy";
}}} 
```

这是我的 HTML 代码。显然在 for 里面

```
<td><label for="image">Image</td>
                        <td><input type="file" id="image" name="image" ></td> 
```

问题是我总是收到错误“未知扩展名”，如果我使用`$_REQUEST`而不是`$_FILES`那么我只能看到上传文件名的第一个字母。 **PS：问题不在于 GetExtention 功能。问题在于任何可以告诉我我缺少什么的`$_FILES['image']['name'])`人** 。我在过去 2 小时内一直停留在这一点上。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:48:50.140

请确保在使用文件上传时，您必须`enctype="multipart/form-data"`在表单标签中使用。希望对您有所帮助。

# android - Android Foursquare 显示

> ID：13955122
> 
> 赞同：0
> 
> 时间：2012-12-19T15:01:11.937
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/77e2f86a1c8ee705fc689064c4cea220.png)

我想知道 Foursquare 使用哪种类型的布局来显示这样的内容？我没记错，他们没有使用 ListView。实际上，他们将使用其他视图，例如 TableView 或其他东西。如果您知道，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:09:26.400

这不仅仅是一种观点。它可以是许多视图。

我的猜测是一个父级的 RelativeLayout，其中包含多个子 LinearLayouts 或内部包含多个元素的相对布局，例如 ImageViews、TextViews 等。整个事情可能被包裹在片段中，并通过顶部的操作栏进行控制。

这再次只是一个猜测，因为根据您所针对的设备类型、优化要求等，有很多很好的方法可以实现这个 UI。

# zend-framework - Zend_Session_SaveHandler_Interface 和 session_id 之谜

> ID：13955128
> 
> 赞同：2
> 
> 时间：2012-12-19T15:01:30.297
> 
> 标签：zend-framework, zend-session, libmemcached

我正在尝试根据此代码设置我自己的 Zend_Session_SaveHandler [http://blog.digitalstruct.com/2010/10/24/zend-framework-cache-backend-libmemcached-session-cache/](http://blog.digitalstruct.com/2010/10/24/zend-framework-cache-backend-libmemcached-session-cache/)

这很好用，只是我的 session_id 表现得很神秘。我正在使用 Zend_Session_SaveHandler_Cache 类，你可以在上面的博客中找到它（除了我把它放在我自己的库中，所以它的名字现在以 My_ 开头）。

在我的引导程序中，我有：

```
protected function _initSession()
{            
    $session = $this->getPluginResource('session');
    $session->init();    
    Zend_Session::getSaveHandler()->setCache( $this->_manager->getCache( 'memcached' ) );
} 
```

让我的会话基于我的 .ini 文件中的此代码进行

```
resources.cachemanager.memcached.frontend.name                            = Core
resources.cachemanager.memcached.frontend.options.automatic_serialization = On
resources.cachemanager.memcached.backend.name                             = Libmemcached
resources.cachemanager.memcached.backend.options.servers.one.host         = localhost
resources.cachemanager.memcached.backend.options.servers.one.port         = 11213 
```

到现在为止还挺好。直到有人尝试登录并调用 Zend_Session::rememberMe()。在 Zend_Session 的评论中可以阅读

> 通常“rememberMe()”表示安全上下文更改，因此应使用新的会话 ID

这当然是非常正确的，并且生成了一个新的会话 id。成功登录后，用户 Zend_Auth 数据被写入这个新会话。我可以看到这一点，因为我在博客的原始类中添加了一些日志记录功能。

这就是事情出错的地方。这个新 id 显然没有在 Zend_Session 上传递，因为 Zend_Session 一直在读取旧 id 的会话数据。换句话说，没有 Zend_Auth 实例的那个。因此，用户无法再登录。

那么问题来了，如何让我的 saveHandler 在重新生成后使用新的 id 呢？为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:40:17.520

好的，我在这里脸红了......我在寻找错误的地方来找到这个错误。我的会话 saveHandler 工作得很好（所以如果你想要 libmemcached 会话管理，我可以推荐[Mike Willbanks 他的工作）。](http://blog.digitalstruct.com/2010/10/24/zend-framework-cache-backend-libmemcached-session-cache/)

当时出了什么问题？好吧，除了从文件切换到 libmemcached 之外，我还从在引导程序中设置会话切换到在 application.ini 中设置它。所以，而不是把线像

```
session.cookie_domain = mydomain.com 
```

在我的 application.ini 中（然后在引导程序中用作设置会话的选项），我现在正确地写了

```
resources.session.cookie_domain = mydomain.com 
```

And this is were things went wrong, because.... I only changed those lines for production, I forgot to change them further down the ini file. In other words, my development env. got the cookie_domain of my production env., which is wrong as I use an other domain name during devolepment. So, on every page load, my cookie was invalidaded and a new session started. Mysterie solved...

# signalr - 使用 Signalr Asp.Net 进行网站开发

> ID：13955140
> 
> 赞同：-1
> 
> 时间：2012-12-19T15:02:14.633
> 
> 标签：signalr

我想使用 Signalr 技术开发网站（ aspx Page ）。（不是 MVC 架构）

任何人都可以帮助我如何与 Signalr 交互数据库。（如编辑、更新、删除）

谢谢。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:43:26.323

SignalR 用于客户端和服务器之间的实时通信。至于与数据库通信，这与任何其他 asp.net 应用程序没有什么不同。

您可以利用 SignalR 让客户端调用服务器方法，然后再与数据库进行通信，但由于安全问题，我会厌倦这种方法。

# php - PHP 数组的总和

> ID：13955144
> 
> 赞同：0
> 
> 时间：2012-12-19T15:02:17.410
> 
> 标签：php, arrays, sum

以下代码显示了订购产品的单个重量：

```
$weightsql = 'select op.products_name, op.products_quantity , p.products_weight from ' . TABLE_ORDERS_PRODUCTS . ' op left join ' . TABLE_PRODUCTS . ' p on op.products_id = p.products_id where op.products_id =  '.$pro['products_id'];

$weightq = tep_db_query( $weightsql );

while ($weight = tep_db_fetch_array( $weightq )){

        if($category_parent_id != 0)$list_items[] = $weight['products_weight'].'&nbsp;&nbsp;&nbsp;';

} 
```

这显示了订购的每个产品的重量。我坚持的不是显示单独的重量，而是显示总重量。例如，如果产品订购了 3 次，重量为 7 公斤，此时代码显示：

```
Product                   7.00  7.00  7.00 
```

我如何让它显示总重量，21公斤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:04:39.957

利用[`array_sum()`](http://us3.php.net/manual/en/function.array-sum.php)

```
array_sum() examples
<?php
$a = array(2, 4, 6, 8);
echo "sum(a) = " . array_sum($a) . "\n";

$b = array("a" => 1.2, "b" => 2.3, "c" => 3.4);
echo "sum(b) = " . array_sum($b) . "\n";
?>
The above example will output:
sum(a) = 20
sum(b) = 6.9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:04:53.963

只需在循环之前将计数器设置为 0 并在循环期间添加 do 它，如下所示：

```
 $total = 0;
 $weightsql = 'select op.products_name, op.products_quantity , p.products_weight from ' . TABLE_ORDERS_PRODUCTS . ' op left join ' . TABLE_PRODUCTS . ' p on op.products_id = p.products_id where op.products_id =  '.$pro['products_id'];

 $weightq = tep_db_query( $weightsql );

 while ($weight = tep_db_fetch_array( $weightq )){
      if($category_parent_id != 0) {
           $list_items[] = $weight['products_weight'].'&nbsp;&nbsp;&nbsp;';
           $total += $weight['products_weight'];
      }

 } 
```

然后变量 $total 应该返回 21。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:07:17.407

如果您已通过 id 选择产品，最简单的解决方案是将行数乘以权重。无需将其放入数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:02:13.167

```
$weightsql = 'select op.products_name, sum(op.products_quantity * p.products_weight) as weightsum from ' . TABLE_ORDERS_PRODUCTS . ' op left join ' . TABLE_PRODUCTS . ' p on op.products_id = p.products_id where op.products_id =  '.$pro['products_id'];

echo $weight['weightsum'] 
```

感谢您的帮助 （！）

# typescript - 如何在 TypeScript 接口中定义静态属性

> ID：13955157
> 
> 赞同：180
> 
> 时间：2012-12-19T15:02:42.890
> 
> 标签：typescript

我只想**在打字稿**界面中声明一个静态属性？我还没有找到任何关于这个的地方。

```
interface myInterface {
  static Name:string;
} 
```

是否可以？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2017-04-28T07:24:17.387

遵循@Duncan 的@Bartvds 的回答，在这里提供多年过去后的可行方法。

在 Typescript 1.5 发布后（@Jun 15 '15），您的有用界面

```
interface MyType {
    instanceMethod();
}

interface MyTypeStatic {
    new():MyType;
    staticMethod();
} 
```

可以在装饰器的帮助下以这种方式实现。

```
/* class decorator */
function staticImplements<T>() {
    return <U extends T>(constructor: U) => {constructor};
}

@staticImplements<MyTypeStatic>()   /* this statement implements both normal interface & static interface */
class MyTypeClass { /* implements MyType { */ /* so this become optional not required */
    public static staticMethod() {}
    instanceMethod() {}
} 
```

请参阅我在 github[问题 13462](https://github.com/Microsoft/TypeScript/issues/13462#issuecomment-295685298)上的评论。

视觉结果：编译错误，提示缺少静态方法。 [![在此处输入图像描述](../Images/d5f04b4b7436daa3830d312ea1fb042b.png)](https://i.stack.imgur.com/xV9F7.png)

静态方法实现后，提示缺少方法。 [![在此处输入图像描述](../Images/a1855a0e96be252b2d7cd3804aa53316.png)](https://i.stack.imgur.com/jummd.png)

静态接口和普通接口都完成后编译通过。 [![在此处输入图像描述](../Images/43cbf126a31f65b58857887129368434.png)](https://i.stack.imgur.com/awoDo.png)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-12-19T15:25:46.847

你不能在 TypeScript 的接口上定义静态属性。

假设您想更改`Date`对象，而不是尝试添加到 的定义中`Date`，您可以将其包装起来，或者简单地创建丰富的日期类来完成不做的事情`Date`。

```
class RichDate {
    public static MinValue = new Date();
} 
```

因为 Date 是 TypeScript 中的一个接口，所以你不能使用`extends`关键字将它扩展为一个类，这有点遗憾，因为如果 date 是一个类，这将是一个很好的解决方案。

如果您想扩展 Date 对象以提供`MinValue`原型上的属性，您可以：

```
interface Date {
    MinValue: Date;
}

Date.prototype.MinValue = new Date(0); 
```

调用使用：

```
var x = new Date();
console.log(x.MinValue); 
```

如果你想让它在没有实例的情况下可用，你也可以......但它有点挑剔。

```
interface DateStatic extends Date {
    MinValue: Date;
}

Date['MinValue'] = new Date(0); 
```

调用使用：

```
var x: DateStatic = <any>Date; // We aren't using an instance
console.log(x.MinValue); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-08-01T09:48:11.393

静态修饰符不能出现在类型成员上（TypeScript 错误 TS1070）。这就是为什么我建议使用抽象类来解决任务：

**例子**

```
// Interface definition
abstract class MyInterface {
  static MyName: string;
  abstract getText(): string;
}

// Interface implementation
class MyClass extends MyInterface {
  static MyName = 'TestName';
  getText(): string {
    return `This is my name static name "${MyClass.MyName}".`;
  }
}

// Test run
const test: MyInterface = new MyClass();
console.log(test.getText()); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-10-12T18:45:24.940

**您可以正常定义接口：**

```
interface MyInterface {
    Name:string;
} 
```

但你不能只做

```
class MyClass implements MyInterface {
    static Name:string; // typescript won't care about this field
    Name:string;         // and demand this one instead
} 
```

**为了表达一个类的静态属性应该遵循这个接口，你需要一些技巧：**

```
var MyClass: MyInterface;
MyClass = class {
    static Name:string; // if the class doesn't have that field it won't compile
} 
```

你甚至可以保留类名，TypeScript (2.0) 不会介意：

```
var MyClass: MyInterface;
MyClass = class MyClass {
    static Name:string; // if the class doesn't have that field it won't compile
} 
```

如果你想静态继承许多接口，你必须先将它们合并成一个新的：

```
interface NameInterface {
    Name:string;
}
interface AddressInterface {
    Address:string;
}
interface NameAndAddressInterface extends NameInterface, AddressInterface { }
var MyClass: NameAndAddressInterface;
MyClass = class MyClass {
    static Name:string; // if the class doesn't have that static field code won't compile
    static Address:string; // if the class doesn't have that static field code won't compile
} 
```

或者，如果您不想命名合并的接口，您可以执行以下操作：

```
interface NameInterface {
    Name:string;
}
interface AddressInterface {
    Address:string;
}
var MyClass: NameInterface & AddressInterface;
MyClass = class MyClass {
    static Name:string; // if the class doesn't have that static field code won't compile
    static Address:string; // if the class doesn't have that static field code won't compile
} 
```

工作[示例](http://www.typescriptlang.org/play/#src=%20%20%20%20interface%20NameInterface%20%7B%0D%0A%20%20%20%20%20%20%20%20Name%3Astring%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20interface%20AddressInterface%20%7B%0D%0A%20%20%20%20%20%20%20%20Address%3Astring%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20%0D%0A%20%20%20%20interface%20NameAndAddressInterface%20extends%20NameInterface%2C%20AddressInterface%20%7B%20%7D%0D%0A%20%20%20%20var%20MyClass%3A%20NameAndAddressInterface%3B%0D%0A%20%20%20%20MyClass%20%3D%20class%20MyClass%20%7B%0D%0A%20%20%20%20%20%20%20%20static%20Name%3Astring%3B%20%2F%2F%20if%20the%20class%20doesn%27t%20have%20that%20static%20field%20code%20won%27t%20compile%0D%0A%20%20%20%20%20%20%20%20static%20Address%3Astring%3B%20%2F%2F%20if%20the%20class%20doesn%27t%20have%20that%20static%20field%20code%20won%27t%20compile%0D%0A%20%20%20%20%7D%0D%0A)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-12-20T14:54:16.267

静态属性通常放置在对象的（全局）构造函数中，而“interface”关键字适用于对象的实例。

如果您使用 TypeScript 编写课程，那么前面给出的答案当然是正确的。它可能有助于其他人知道，如果您正在描述一个已经在其他地方实现的对象，那么可以像这样声明包含静态属性的全局构造函数：

```
declare var myInterface : {
  new(): Interface;
  Name:string;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-09-16T21:00:55.457

`new()`上面指定静态类型的@duncan 解决方案也适用于接口：

```
interface MyType {
    instanceMethod();
}

interface MyTypeStatic {
    new():MyType;
    staticMethod();
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-12-02T06:58:36.907

此处未提及的另一个选项是使用表示静态接口的类型定义变量并为其分配类表达式：

```
interface MyType {
    instanceMethod(): void;
}

interface MyTypeStatic {
    new(): MyType;
    staticMethod(): void;
}

// ok
const MyTypeClass: MyTypeStatic = class MyTypeClass {
    public static staticMethod() { }
    instanceMethod() { }
}

// error: 'instanceMethod' is missing
const MyTypeClass1: MyTypeStatic = class MyTypeClass {
    public static staticMethod() { }
}

// error: 'staticMethod' is missing
const MyTypeClass2: MyTypeStatic = class MyTypeClass {
    instanceMethod() { }
} 
```

[效果与使用装饰器的回答](https://stackoverflow.com/a/43674389/1113002)相同，但没有装饰器的开销

[操场](https://www.typescriptlang.org/play/index.html#code/JYOwLgpgTgZghgYwgAgLIE8Aq6AOKDeAsAFDJnKgDOYcISqEYAFgPYAmAFAJQBcyAbi2BsA3CQC+JEqEixEKDNjwBlGmGAJkRUuRAQA7tz6LcEMTrLU46hA2bsjAoaIlTiAenfIWAaxIIWEGo0LFMAYQAbOEpKY1CVNQ1kAF5kBCiYkKUISOjKLRJyZBwAVwAjCKSrG2RqjTtWTi4tZEkLCiCaOggGh2b8VtdiEk9kaCgWKD4Aciou+kZG6Yp8gFtgGNAAc39A4JM8XJiARjjs1Wsk1PS8rPCM-O0i0oqqxM0620W+lra2ka840mM0+vTYyw2yHWmxAO2IAU6d0ODwATGdTBcatcHkicjinuQ5rQFvYmr8JEA)

GitHub上的相关[建议/讨论](https://github.com/microsoft/TypeScript/issues/33892)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-01-11T20:49:38.103

如果您要定义一个静态类（即所有方法/属性都是静态的），您可以执行以下操作：

```
interface MyStaticClassInterface {
  foo():string;
}

var myStaticClass:MyStaticClassInterface = {
  foo() {
    return 'bar';
  }
}; 
```

在这种情况下，静态“类”实际上只是一个普通的-ol'-js-object，它实现了所有的方法`MyStaticClassInterface`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-04-22T07:22:28.907

是的，有可能。这是解决方案

```
export interface Foo {

    test(): void;
}

export namespace Foo {

    export function statMethod(): void {
        console.log(2);
    }

} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-04-05T01:27:56.533

我对顶级答案的复杂程度感到有些惊讶！但也许这只是因为这个线程太老了。

编辑：实际上，经过一些测试，我最初的尝试被证明实际上是无用的，而且这个问题比我最初预期的更难解决。

然而，经过大约一个小时左右的修补，我想我可能刚刚找到了迄今为​​止最好/最干净的解决方案（基于我最初的想法）！如果提出的问题是*“如何在界面中包含静态属性？”* ，那么我认为这是一个相当不错的答案。如果您只需要一个接口（编译时键入/要求/约束​​），这至少比扩展一个类要好。由于解决方案是 100% 环境（不像`extends`-based 类扩展，就像一些答案所暗示的那样）和类都是常量（不可变引用，在使用标准类声明语法而不是像我在这里所做的那样使用类表达式时不会提升）。这不会产生运行时开销，也不需要运行时类继承。您可以在一个接口中定义整个类（静态和非静态成员）（环境类用作）！

*这是它是如何完成的！*

```
/** ./interface.ts */
// In a file module (best), or wrap in ts module or namespace block

// Putting this in a module provides encapsulation ensuring that no one is
// at risk of misusing this class (it must be used as a type only). 

// Export only a type reference which will make it error is someone tries 
// to use it as a value (such as in an `extends` clause, or trying to 
// instantiate it).

/** 
 * Other Ideas For Names To Differentiate From Actual Classes/Non-Ambient Values:
 * MyClassInterface or _Interface_MyClass or MyClass_Interface or Interface_MyClass  
 **/
declare class _MyClassInterface {
    static staticProp: string;
    static staticMethod(): number;
    readonly prop: boolean 
    /** 
     * Note: Above, readonly won't need to be specified in the real class 
     * but the prop *will* still be readonly anyway.
     *
     * Now for the only caveat!
     * It does appear however that you cannot mark anything private or 
     * protected in this pseudo-interface which is a bummer, only props
     * and methods that appear only in the real class can be.
     */
    prop2: boolean;
    method(): Function;
    constructor(p1: string, p2: number);
}

export type MyClassInterface = typeof _MyClassInterface; 
```

现在使用接口

```
/** ./consumer.ts */
import { MyClassInterface } from "./interface" // type import

const MyClass: MyClassInterface = class {
    static staticProp: string;
    prop: boolean;
    prop2: boolean;
    protected onlyOnRealClass: boolean; /* this is ok since this prop doesn't exist on the interface */

    static staticMethod() {
        return 5;
    }

    method() {
        return () => {};
    }

    constructor(p1: string, p2: number) {}
}; 
```

请注意，这里的`typeof`关键字是绝对必要的（如果我没记错的话，那是因为没有它，打字稿认为我们正在指定实例类型，而我们真正想要的是类本身的类型）。例如当我们做

```
const a: MyClass = new MyClass() 
```

*没有*`typeof`关键字，我们说它`a`应该是 MyClass 的一个实例*，*而不是 MyClass 本身。

*`abstract`确保您不会意外尝试实例化该类...*

编辑：实际上我从我的答案中删除了 abstract 关键字，因为事实证明，真正的类实际上继承了环境类的抽象属性（有意义），因此如果编译器抱怨，则不会实例化提供其类型的环境类被标记为抽象...如果环境类被意外实例化，则只需要处理 ts 不会出错。然后在环境类声明/名称前加上下划线和/或`Interface`在名称中包含该单词可能是一个不错的主意，这样它的正确使用就很清楚了（编辑：我已经通过将接口封装在文件模块中来解决这个问题从而使其对所有其他代码私有，然后仅导出对它的类型引用）。

这就是它的全部内容！

将接口放入模块并不是完全必要的，但它提供了一些小好处，包括：

1.  在整个实现代码中使用的“公开”广泛使用的类型注释变得稍微小一些，因为它不再包含关键字`typeof`

2.  与包装的环境类/接口声明不同，导出的/面向外部的标识符严格来说是一种类型（别名），因此如果有人尝试实例化它或在扩展子句中使用它（或在其他任何地方使用它），则会发生错误预计运行时值）

在此示例中，我没有为类表达式提供类名，因为类表达式与所有函数表达式一样，如果未提供类名，则只会继承分配给它们的标识符。因此，如果您的标识符与您想要的该类或函数的名称相同，则可以不使用它。或者，您可以像往常一样提供一个内联，它将优先于标识符。类或函数名也可以在函数/类创建后更改，但只能通过 Object.defineProperty 或 Object.defineProperties。

FWIW 类实际上可以`implemented`（至少在最新版本的 TS 中）由另一个类，但静态属性无论如何都会被忽略。似乎`implementing`任何事情都只适用`prototype`于两个方向（到/从）。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-10-14T13:09:37.743

## 解决方案

返回实例类型`I`并确保`C`extends `I`：

```
type StaticImplements<I extends new (...args: any[]) => any, C extends I> = InstanceType<I>; 
```

与实例方法的接口：

```
interface MyInstance {
    instanceMethod();
} 
```

与静态方法的接口：

```
interface MyClassStatic {
    new (...args: any[]): MyInstance;
    staticMethod();
} 
```

需要静态方法并使用自己的方法扩展的类：

```
class MyClass implements StaticImplements<MyClassStatic, typeof MyClass> {
    static staticMethod();
    static ownStaticMethod();
    instanceMethod();
    ownInstanceMethod();
} 
```

## 推理

在接口中定义静态方法在[#33892](https://github.com/microsoft/TypeScript/issues/33892)中讨论，抽象静态方法在[#34516](https://github.com/microsoft/TypeScript/issues/34516)中讨论。

根据 Val 和 Aleksey 的回答（谢谢），这个解决方案：

*   不需要额外的运行时值
*   类自己的成员信息被保留
*   允许构造函数约束

## 测试

原样 -[游乐场链接](https://www.typescriptlang.org/play?#code/C4TwDgpgBAysCGwCWBjAkgWzAGwhiAdsAM4A8aUEAHsIQCbFQEQDuUAFAHTfwBOA5sQBcUeARABtALoBKKAF4AfKPEAaKAGFKNeozTL5UNAWIICKCABVwEcooDcAWABQLpEQi8AZvAtQAsiDGpmJ+AN4uAJDuIeYQ-hDAABYA9nTsMiIEAK4YAEaeTs4Avi5uHt6+0IEa2PDExHCIqFARzpHMbFw8AsIqkrIigcFmFkWRIcgoCclpGVm5BbxFpa7OKHUNASC19YxIWLj4RIxNU5g4eIQkpDWbjQhT6qCQKV7buw3KbROPLZOoGapdJyMJQXiJbK8AhQAAMxXGAJQUBSLAIZ0BiWBGVa4Mh0KgAEYEVEYqN4li5qC8cAoTCAEwk9qoggjUIU2Yg3EQ2kEgDMTNWLhQKRMKVwnGwKX47Due04SKBVJk9igAHo1VAAPIAaWFouI4ogkulsp2904LIx00pIJV6s1uv1YolUplnQ+9wynDJ7KVdtVGu1evWBqNJvdrE9e29LLZcX9GXtQd1QA)：

```
MyClass.staticMethod(); // OK
MyClass.ownStaticMethod(); // OK
new MyClass().instanceMethod(); // OK
new MyClass().ownInstanceMethod(); // OK 
```

如果`staticMethod`要从`MyClass`- [Playground Link](https://www.typescriptlang.org/play?#code/C4TwDgpgBAysCGwCWBjAkgWzAGwhiAdsAM4A8aUEAHsIQCbFQEQDuUAFAHTfwBOA5sQBcUeARABtALoBKKAF4AfKPEAaKAGFKNeozTL5UNAWIICKCABVwEcooDcAWABQLpEQi8AZvAtQAsiDGpmJ+AN4uAJDuIeYQ-hDAABYA9nTsMiIEAK4YAEaeTs4Avi5uHt6+0IEa2PDExHCIqFARzpHMbFw8AsIqkrIigcFmFkWRIcgoCclpGVm5BbxFpa7OKHUNASC19YxIWLj4RIxNU5g4eIQkpDWbjQhT6qCQKV7buw3KYVAA9L9QACivF4KV4UX+UEmLWh00SqXSch+vES2V4BCgAAZiuNYVAUiwCGdUDMERlWlAUcA0RiAIw4qIxUbxeFzJGU1HoqAAJgZ7QJBBGoRZs0RFKpNKgAGY+asXCgUiYUrhONgUvx2Hc9pxYaS2TIigqlSq1RqtQ1OALiXDRRkDfLFcRlRBVer2J0PvcMpwmcK9Yj7etHc7XRqPebiN6BUK4v67fYgA)中删除：

```
class MyClass implements StaticImplements<MyClassStatic, typeof MyClass> {} // Type 'typeof MyClass' does not satisfy the constraint 'MyClassStatic'. Property 'staticMethod' is missing in type 'typeof MyClass' but required in type 'MyClassStatic'. 
```

如果`instanceMethod`要从`MyClass`- [Playground Link](https://www.typescriptlang.org/play?#code/C4TwDgpgBAysCGwCWBjAkgWzAGwhiAdsAM4A8aUEAHsIQCbFQEQDuUAFAHTfwBOA5sQBcUeARABtALoBKKAF4AfKPEAaKAGFKNeozTL5UNAWIICKCABVwEcooDcAWABQLpEQi8AZvAtQAsiDGpmJ+AN4uAJDuIeYQ-hDAABYA9nTsMiIEAK4YAEaeTs4Avi5uHt6+0IEa2PDExHCIqFARzpHMbFw8AsIqkrIigcFmFkWRIcgoCclpGVm5BbxFpa7OKHUNASC19YxIWLj4RIxNU5g4eIQkpDWbjQhT6qCQKV7buw3KYVAA9L9QACivF4KV4UUmLUh00SqXSch+vES2V4BCgAAZiuNoVAUiwCGdUDM4RlWlAkcAUWiAIxYqL-KAxUbxWFzBHk5GoqAAJjp7TxBBGoRZs3hZIpVKgAGY+asXCgUiYUrhONgUvx2Hc9pxocS2TIigqlSq1RqtQ1OALCTDRRkDfLFcRlRBVer2J0PvcMpwmcK9fD7etHc7XRqPebiN6BUK4v67fYgA)中删除：

```
class MyClass implements StaticImplements<MyClassStatic, typeof MyClass> {} // Class 'MyClass' incorrectly implements interface 'MyInstance'. Property 'instanceMethod' is missing in type 'MyClass' but required in type 'MyInstance'. 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-02-17T12:01:07.953

您可以使用相同的名称[将接口与命名空间合并：](https://www.typescriptlang.org/docs/handbook/declaration-merging.html#merging-namespaces-with-classes-functions-and-enums)

```
interface myInterface { }

namespace myInterface {
  Name:string;
} 
```

但是这个接口只有知道它有属性才有用`Name`。你不能实现它。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-06-15T18:01:57.163

我为我的特定用例找到了一种方法（没有装饰器）。

检查静态成员的重要部分是`IObjectClass`并`cls: IObjectClass<T>`在`createObject`方法中使用：

```
//------------------------
// Library
//------------------------
interface IObject {
  id: number;
}
interface IObjectClass<T> {
  new(): T;
  table_name: string;
}
function createObject<T extends IObject>(cls: IObjectClass<T>, data:Partial<T>):T {
  let obj:T = (<any>Object).assign({},
    data,
    {
      id: 1,
      table_name: cls.table_name,
    }
  )
  return obj;
}

//------------------------
// Implementation
//------------------------
export class User implements IObject {
  static table_name: string = 'user';
  id: number;
  name: string;
}

//------------------------
// Application
//------------------------
let user = createObject(User, {name: 'Jimmy'});
console.log(user.name); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-11-03T08:00:03.603

虽然 Typescript 的接口中不支持 static 关键字，但我们可以通过创建一个**`function interface`**具有静态成员的来实现它。

在我的以下代码中，我创建了一个**`Factory`**具有两个静态成员**`serialNumber`**和**printSerial**的函数接口。

```
// factory is a function interface
interface Factory<T> {
    (name: string, age: number): T;

    //staic property
    serialNumber: number;

    //static method
    printSrial: () => void;
}

class Dog {
    constructor(public name: string, public age: number) { }
}

const dogFactory: Factory<Dog> = (name, age) => {
    return new Dog(name, age);
}

// initialising static members

dogFactory.serialNumber = 1234;
dogFactory.printSrial = () => console.log(dogFactory.serialNumber);

//instance of Dog that DogFactory creates
const myDog = dogFactory("spike", 3);

//static property that returns 1234
console.log(dogFactory.serialNumber)

//static method that prints the serial 1234
dogFactory.printSrial(); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-09-08T03:28:45.453

这是一个相当简单的方法：

```
interface MyClass {
    new (): MyClassInstance;
    staticMethod(): string;
}

interface MyClassInstance {
    instanceMethod(): string;
}

const Class: MyClass = class {
    static staticMethod() {
        return "This is a static method";
    }
    instanceMethod() {
        return "This is an instance method";
    }
}

Class.staticMethod();

// Has type MyClassInstance
const instance = new Class();
instance.instanceMethod(); 
```

请注意，这不允许您像通常那样使类扩展接口，但在许多情况下这已经足够了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-07-14T22:06:49.587

我实施了类似[Kamil Szot's](https://stackoverflow.com/a/40006145/11899061)的解决方案，但效果不佳。我没有足够的声誉将其发布为评论，因此我将其发布在此处，以防有人尝试该解决方案并阅读此内容。

解决方案是：

```
interface MyInterface {
    Name: string;
}

const MyClass = class {
    static Name: string;
}; 
```

但是，使用类表达式不允许我`MyClass`用作类型。如果我写类似：

```
const myInstance: MyClass; 
```

`myInstance`结果是 type `any`，我的编辑器显示以下错误：

```
'MyClass' refers to a value, but is being used as a type here. Did you mean 'typeof MyClass'?ts(2749) 
```

我最终失去了一个比我想用类的静态部分的接口实现的更重要的类型。

[Val](https://stackoverflow.com/a/43674389/11899061)使用装饰器的解决方案避免了这个陷阱。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-10-02T14:10:56.040

其他解决方案似乎偏离了幸福的道路，我发现我的场景包含在我在下面解释的[Typescript 文档中：](https://www.typescriptlang.org/docs/handbook/interfaces.html#difference-between-the-static-and-instance-sides-of-classes)

```
interface AppPackageCheck<T> {
  new (packageExists: boolean): T
  checkIfPackageExists(): boolean;
}

class WebApp {
    public static checkIfPackageExists(): boolean {
        return false;
    }

    constructor(public packageExists: boolean) {}
}

class BackendApp {
    constructor(public packageExists: boolean) {}
}

function createApp<T>(type: AppPackageCheck<T>): T {
    const packageExists = type.checkIfPackageExists();
    return new type(packageExists)
}

let web = createApp(WebApp);

// compiler failure here, missing checkIfPackageExists
let backend = createApp(BackendApp); 
```

# ruby-on-rails - 使用 Rails.cache.write 设置原始值

> ID：13955160
> 
> 赞同：4
> 
> 时间：2012-12-19T15:02:50.390
> 
> 标签：ruby-on-rails, ruby, caching, memcached

我正在尝试将整个 response.body 保存到 memcached。我这样做是这样的：

```
Rails.cache.write(request.headers['HTTP_X_MEMCACHED_KEY'], response.body) 
```

问题是它在值前面加上了一些垃圾：

```
o: ActiveSupport::Cache::Entry  :@compressedF:@expires_in0:@created_atf1355928410.584484:@value"GsI";s<!DOCTYPE html>... 
```

我试图传递`:raw => true`给`Rails.cache.write`，但它返回 false 并且没有将值放入 memcached。我认为它失败了，因为 response.body 没有正确转义。

我也尝试过这种方式：

```
Rails.cache.write(request.headers['HTTP_X_MEMCACHED_KEY'], Marshal.dump(response.body), :raw => true) 
```

它有效，但值中仍有一些垃圾：

```
I"fD<!DOCTYPE html>... 
```

如何将干净的值放入 memcached？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:38:07.650

似乎 memcached 无法缓存数据，因为`response.body`.

现在我`response.body.bytes.to_a.map(&:chr).join`作为值传递，它工作正常，但我仍然想知道它是否是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T18:36:24.497

写作`response.body.force_encoding('ASCII-8BIT')`可能是一个解决方案

# python - 不使用可迭代的列表理解

> ID：13955161
> 
> 赞同：2
> 
> 时间：2012-12-19T15:02:51.217
> 
> 标签：python, list-comprehension

我正在尝试通过从另一个没有重复的列表中选择随机元素来构建一个列表。想想洗一包纸牌。我显然可以为此编写一些非 Python 的代码，但我不想这样做。

所以这就是我想要做的：

`new = [deck[i] where 0<(i = some_rand_int)<51 if new.count(deck[i]) == 0]`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T15:06:09.747

> 我正在尝试通过从另一个没有重复的列表中选择随机元素来构建一个列表。

使用[`random.sample`](http://docs.python.org/2/library/random.html#random.sample)：

> **随机样本（人口，k）**
> 
> 返回从总体序列中选择的唯一元素的 ak 长度列表。用于无放回的随机抽样。

尝试这个：

```
result = random.sample(deck, n) 
```

* * *

要随机播放整个列表，请使用[`random.shuffle`](http://docs.python.org/2/library/random.html#random.shuffle)：

```
random.shuffle(deck) 
```

* * *

> 仍然很好奇这是否可以使用列表理解来完成！

并不真地。列表包含保留元素的顺序，但允许您投影或过滤它们。洗牌不是投影或过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:10:32.673

您可以为此使用生成器：

```
import random

def pick(deck):
    while True:
        try:
            newCard = random.choice(deck)
            deck.remove(newCard)
        except:
            print 'deck is empty...'
        yield newCard

def resetDeck():
    deck = []
    newCard = None
    for i in range(1,53):
        deck.append(i)
    return deck 
```

pick(deck) 从牌组中挑选一张牌，如果你想重新创建牌组，请使用 resetDeck()。实施后，使用 pick(deck).next() 从甲板中选择卡片。

# c++ - 为什么添加内联汇编注释会导致 GCC 生成的代码发生如此巨大的变化？

> ID：13955162
> 
> 赞同：82
> 
> 时间：2012-12-19T15:02:52.917
> 
> 标签：c++, gcc, assembly, optimization, inline-assembly

所以，我有这个代码：

```
constexpr unsigned N = 1000;
void f1(char* sum, char* a, char* b) {
    for(int i = 0; i < N; ++i) {
        sum[i] = a[i] + b[i];
    }
}

void f2(char* sum, char* a, char* b) {
    char* end = sum + N;
    while(sum != end) {
        *sum++ = *a++ + *b++;
    }
} 
```

我想看看 GCC 4.7.2 会生成的代码。所以我跑了`g++ -march=native -O3 -masm=intel -S a.c++ -std=c++11`，得到了以下输出：

```
 .file   "a.c++"
        .intel_syntax noprefix
        .text
        .p2align 4,,15
        .globl  _Z2f1PcS_S_
        .type   _Z2f1PcS_S_, @function
_Z2f1PcS_S_:
.LFB0:
        .cfi_startproc
        lea     rcx, [rdx+16]
        lea     rax, [rdi+16]
        cmp     rdi, rcx
        setae   r8b
        cmp     rdx, rax
        setae   cl
        or      cl, r8b
        je      .L5
        lea     rcx, [rsi+16]
        cmp     rdi, rcx
        setae   cl
        cmp     rsi, rax
        setae   al
        or      cl, al
        je      .L5
        xor     eax, eax
        .p2align 4,,10
        .p2align 3
.L3:
        movdqu  xmm0, XMMWORD PTR [rdx+rax]
        movdqu  xmm1, XMMWORD PTR [rsi+rax]
        paddb   xmm0, xmm1
        movdqu  XMMWORD PTR [rdi+rax], xmm0
        add     rax, 16
        cmp     rax, 992
        jne     .L3
        mov     ax, 8
        mov     r9d, 992
.L2:
        sub     eax, 1
        lea     rcx, [rdx+r9]
        add     rdi, r9
        lea     r8, [rax+1]
        add     rsi, r9
        xor     eax, eax
        .p2align 4,,10
        .p2align 3
.L4:
        movzx   edx, BYTE PTR [rcx+rax]
        add     dl, BYTE PTR [rsi+rax]
        mov     BYTE PTR [rdi+rax], dl
        add     rax, 1
        cmp     rax, r8
        jne     .L4
        rep
        ret
.L5:
        mov     eax, 1000
        xor     r9d, r9d
        jmp     .L2
        .cfi_endproc
.LFE0:
        .size   _Z2f1PcS_S_, .-_Z2f1PcS_S_
        .p2align 4,,15
        .globl  _Z2f2PcS_S_
        .type   _Z2f2PcS_S_, @function
_Z2f2PcS_S_:
.LFB1:
        .cfi_startproc
        lea     rcx, [rdx+16]
        lea     rax, [rdi+16]
        cmp     rdi, rcx
        setae   r8b
        cmp     rdx, rax
        setae   cl
        or      cl, r8b
        je      .L19
        lea     rcx, [rsi+16]
        cmp     rdi, rcx
        setae   cl
        cmp     rsi, rax
        setae   al
        or      cl, al
        je      .L19
        xor     eax, eax
        .p2align 4,,10
        .p2align 3
.L17:
        movdqu  xmm0, XMMWORD PTR [rdx+rax]
        movdqu  xmm1, XMMWORD PTR [rsi+rax]
        paddb   xmm0, xmm1
        movdqu  XMMWORD PTR [rdi+rax], xmm0
        add     rax, 16
        cmp     rax, 992
        jne     .L17
        add     rdi, 992
        add     rsi, 992
        add     rdx, 992
        mov     r8d, 8
.L16:
        xor     eax, eax
        .p2align 4,,10
        .p2align 3
.L18:
        movzx   ecx, BYTE PTR [rdx+rax]
        add     cl, BYTE PTR [rsi+rax]
        mov     BYTE PTR [rdi+rax], cl
        add     rax, 1
        cmp     rax, r8
        jne     .L18
        rep
        ret
.L19:
        mov     r8d, 1000
        jmp     .L16
        .cfi_endproc
.LFE1:
        .size   _Z2f2PcS_S_, .-_Z2f2PcS_S_
        .ident  "GCC: (GNU) 4.7.2"
        .section        .note.GNU-stack,"",@progbits 
```

我不擅长阅读汇编，所以我决定添加一些标记来了解循环体的去向：

```
constexpr unsigned N = 1000;
void f1(char* sum, char* a, char* b) {
    for(int i = 0; i < N; ++i) {
        asm("# im in ur loop");
        sum[i] = a[i] + b[i];
    }
}

void f2(char* sum, char* a, char* b) {
    char* end = sum + N;
    while(sum != end) {
        asm("# im in ur loop");
        *sum++ = *a++ + *b++;
    }
} 
```

GCC 吐出了这个：

```
 .file   "a.c++"
    .intel_syntax noprefix
    .text
    .p2align 4,,15
    .globl  _Z2f1PcS_S_
    .type   _Z2f1PcS_S_, @function
_Z2f1PcS_S_:
.LFB0:
    .cfi_startproc
    xor eax, eax
    .p2align 4,,10
    .p2align 3
.L2:
#APP
# 4 "a.c++" 1
    # im in ur loop
# 0 "" 2
#NO_APP
    movzx   ecx, BYTE PTR [rdx+rax]
    add cl, BYTE PTR [rsi+rax]
    mov BYTE PTR [rdi+rax], cl
    add rax, 1
    cmp rax, 1000
    jne .L2
    rep
    ret
    .cfi_endproc
.LFE0:
    .size   _Z2f1PcS_S_, .-_Z2f1PcS_S_
    .p2align 4,,15
    .globl  _Z2f2PcS_S_
    .type   _Z2f2PcS_S_, @function
_Z2f2PcS_S_:
.LFB1:
    .cfi_startproc
    xor eax, eax
    .p2align 4,,10
    .p2align 3
.L6:
#APP
# 12 "a.c++" 1
    # im in ur loop
# 0 "" 2
#NO_APP
    movzx   ecx, BYTE PTR [rdx+rax]
    add cl, BYTE PTR [rsi+rax]
    mov BYTE PTR [rdi+rax], cl
    add rax, 1
    cmp rax, 1000
    jne .L6
    rep
    ret
    .cfi_endproc
.LFE1:
    .size   _Z2f2PcS_S_, .-_Z2f2PcS_S_
    .ident  "GCC: (GNU) 4.7.2"
    .section    .note.GNU-stack,"",@progbits 
```

这要短得多，并且有一些显着差异，例如缺少 SIMD 指令。我期待相同的输出，中间有一些评论。我在这里做了一些错误的假设吗？GCC 的优化器是否受到 asm 注释的阻碍？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-19T15:18:22.663

[与优化的交互在文档中的“带有 C 表达式操作数的汇编器指令”](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Extended-Asm.html)页面的中途进行了解释。

GCC 不会尝试理解`asm`; 中的任何实际程序集。它唯一知道的内容是您（可选地）在输出和输入操作数规范以及寄存器破坏列表中告诉它的内容。

特别要注意：

> 没有任何输出操作数的`asm`指令将被视为与 volatile`asm`指令相同。

和

> 关键字表示该`volatile`指令具有重要的副作用 [...]

因此，`asm`循环内部的存在抑制了矢量化优化，因为 GCC 假设它有副作用。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-19T15:14:46.143

请注意，gcc 将代码向量化，将循环体分成两部分，第一部分一次处理 16 个项目，第二部分稍后处理其余部分。

正如 Ira 评论的那样，编译器不解析 asm 块，所以它不知道它只是一个注释。即使这样做了，它也无法知道您的意图。优化的循环使主体加倍，是否应该将您的 asm 放入每个循环中？您希望它不执行 1000 次吗？它不知道，所以它走安全路线并退回到简单的单循环。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T16:31:11.257

我不同意“gcc 不理解`asm()`块中的内容”。例如，gcc 可以很好地处理优化参数，甚至可以重新排列`asm()`块，使其与生成的 C 代码混合。这就是为什么，如果您查看例如 Linux 内核中的内联汇编程序，它几乎总是带有前缀`__volatile__`以确保编译器“不会移动代码”。我让 gcc 移动了我的“rdtsc”，这让我测量了做某件事所花费的时间。

如文档所述，gcc 将某些类型的`asm()`块视为“特殊”，因此不会优化块两侧的代码。

这并不是说 gcc 有时不会被内联汇编程序块弄糊涂，或者只是决定放弃某些特定的优化，因为它无法遵循汇编程序代码的后果等等。更重要的是，它经常会因为缺少clobber标签而感到困惑——所以如果你有一些指令，比如`cpuid`这会改变 EAX-EDX 的值，但是您编写的代码只使用 EAX，编译器可能会将内容存储在 EBX、ECX 和 EDX 中，然后当这些寄存器被覆盖时，您的代码会表现得很奇怪......如果你很幸运，它会立即崩溃 - 然后很容易弄清楚发生了什么。但是如果你不走运，它就会崩溃……另一个棘手的问题是在 edx 中给出第二个结果的除法指令。如果您不关心模数，很容易忘记 EDX 已更改。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-10-06T02:22:46.410

**这个答案现在被修改了：它最初是用一种思维方式编写的，将内联基本 Asm 视为一个非常明确的工具，但它与 GCC 中的完全不同。Basic Asm 很弱，因此编辑了答案。**

每个程序集注释都充当断点。

编辑：但是一个坏的，当你使用基本 Asm 时。没有显式 clobber 列表的内联`asm`（`asm`函数体内的语句）是 GCC 中的一个弱指定特性，它的行为很难定义。它似乎没有*（*我没有完全掌握它的保证）附加到任何特别的东西，所以虽然如果函数运行，汇编代码必须在某个时候运行，**但不清楚它何时运行任何非微不足道的优化级别**。可以用相邻指令重新排序的断点不是一个非常有用的“断点”。结束编辑

您可以在解释器中运行程序，该解释器会在每个注释处中断并打印出每个变量的状态（使用调试信息）。这些点必须存在，以便您观察环境（寄存器和内存的状态）。

如果没有注释，则不存在观察点，并且循环被编译为单个数学函数，采用环境并产生修改后的环境。

你想知道一个无意义的问题的答案：你想知道每条指令（或者可能是块，或者可能是指令范围）是如何编译的，但没有单独的指令（或块）被编译；整个东西是作为一个整体编译的。

一个更好的问题是：

*你好海湾合作委员会。为什么你认为这个 asm 输出正在实现源代码？请逐步解释，每一个假设。*

但是，您不会希望阅读比 asm 输出更长的证明，以 GCC 内部表示形式编写。

# html - 用 CSS3 动画模仿闪烁标签

> ID：13955163
> 
> 赞同：164
> 
> 时间：2012-12-19T15:02:54.497
> 
> 标签：html, css, css-animations, blink

我真的想在不使用 javascript 或 text-decoration 的情况下让一段文本以老式风格闪烁。

没有过渡，只有 *blink*、*blink*、*blink*！

* * *

这与[那个问题](https://stackoverflow.com/questions/16344354)不同，因为我要求在没有连续转换的情况下*闪烁*，而其他问题的 OP 询问如何*用连续转换**替换*闪烁

 ** * *

## 回答 #1

> 赞同：270
> 
> 时间：2013-04-15T10:30:36.727

最初的 Netscape`<blink>`有 80% 的占空比。这非常接近，尽管 real`<blink>`只影响文本：

```
.blink {
  animation: blink-animation 1s steps(5, start) infinite;
  -webkit-animation: blink-animation 1s steps(5, start) infinite;
}
@keyframes blink-animation {
  to {
    visibility: hidden;
  }
}
@-webkit-keyframes blink-animation {
  to {
    visibility: hidden;
  }
}
```

```
This is <span class="blink">blinking</span> text.
```

[您可以在此处找到有关关键帧动画的](https://css-tricks.com/snippets/css/keyframe-animation-syntax/)更多信息。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-12-19T15:02:54.497

让我告诉你一个小技巧。

正如 Arkanciscan[所说](https://stackoverflow.com/a/8318171/1137334)，您可以使用 CSS3 过渡。但他的解决方案看起来与原来的标签不同。

你真正需要做的是：

```
@keyframes blink {
  50% {
    opacity: 0.0;
  }
}
.blink {
  animation: blink 1s step-start 0s infinite;
}
```

```
<span class="blink">Blink</span>
```

[**JSfiddle 演示**](http://jsfiddle.net/es6e6/1641/)

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-12-19T15:14:55.883

试试这个 CSS

```
@keyframes blink {  
  0% { color: red; }
  100% { color: black; }
}
@-webkit-keyframes blink {
  0% { color: red; }
  100% { color: black; }
}
.blink {
  -webkit-animation: blink 1s linear infinite;
  -moz-animation: blink 1s linear infinite;
  animation: blink 1s linear infinite;
} 
```

```
This is <span class="blink">blink</span>
```

​ 您需要浏览器/供应商特定的前缀：http: [//jsfiddle.net/es6e6/1/](http://jsfiddle.net/es6e6/1/)。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-04-08T14:35:20.993

实际上不需要`visibility`or `opacity`- 你可以简单地使用`color`，它的好处是只对文本保持“闪烁”：

```
blink {
    display: inline;
    color: inherit;
    animation: blink 1s steps(1) infinite;
    -webkit-animation: blink 1s steps(1) infinite;
}
@keyframes blink { 50% { color: transparent; } }
@-webkit-keyframes blink { 50% { color: transparent; } }
```

```
Here is some text, <blink>this text will blink</blink>, this will not.
```

小提琴：http: [//jsfiddle.net/2r8JL/](http://jsfiddle.net/2r8JL/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-08-07T07:16:21.783

我要为此下地狱：

```
=keyframes($name)
  @-webkit-keyframes #{$name}
    @content
  @-moz-keyframes #{$name}
    @content
  @-ms-keyframes #{$name}
    @content
  @keyframes #{$name}
    @content

+keyframes(blink)
  25%
    zoom: 1
    opacity: 1

  65%
    opacity: 1 

  66%
    opacity: 0

  100%
    opacity: 0

body
  font-family: sans-serif
  font-size: 4em
  background: #222
  text-align: center

  .blink
    color: rgba(#fff, 0.9)
    +animation(blink 1s 0s reverse infinite)
    +transform(translateZ(0))

.table
  display: table
  height: 5em
  width: 100%
  vertical-align: middle

  .cell
    display: table-cell
    width: 100%
    height: 100%
    vertical-align: middle 
```

[http://codepen.io/anon/pen/kaGxC](http://codepen.io/anon/pen/kaGxC)（波旁威士忌）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-03-01T19:30:06.173

另一种变化

```
.blink {
    -webkit-animation: blink 1s step-end infinite;
            animation: blink 1s step-end infinite;
}
@-webkit-keyframes blink { 50% { visibility: hidden; }}
        @keyframes blink { 50% { visibility: hidden; }}
```

```
This is <span class="blink">blink</span>
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-12-11T11:05:52.897

如果你想要平滑闪烁的文本或类似的东西，你可以使用以下代码：

```
 .blinking {
    -webkit-animation: 1s blink ease infinite;
    -moz-animation: 1s blink ease infinite;
    -ms-animation: 1s blink ease infinite;
    -o-animation: 1s blink ease infinite;
    animation: 1s blink ease infinite;
  }

  @keyframes "blink" {

    from,
    to {
      opacity: 0;
    }

    50% {
      opacity: 1;
    }
  }

  @-moz-keyframes blink {

    from,
    to {
      opacity: 0;
    }

    50% {
      opacity: 1;
    }
  }

  @-webkit-keyframes "blink" {

    from,
    to {
      opacity: 0;
    }

    50% {
      opacity: 1;
    }
  }

  @-ms-keyframes "blink" {

    from,
    to {
      opacity: 0;
    }

    50% {
      opacity: 1;
    }
  }

  @-o-keyframes "blink" {

    from,
    to {
      opacity: 0;
    }

    50% {
      opacity: 1;
    }
  }
```

```
<span class="blinking">I am smoothly blinking</span>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-05T09:17:03.100

在我的情况下，它以 1 秒的间隔闪烁文本。

```
.blink_me {
  color:#e91e63;
  font-size:140%;
  font-weight:bold;
  padding:0 20px 0  0;
  animation: blinker 1s linear infinite;
}

@keyframes blinker {
  50% { opacity: 0.4; }
} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2018-08-15T19:37:24.963

如果你想要一些发光效果使用这个

```
@keyframes blink {
  50% {
    opacity: 0.0;
  }
}
@-webkit-keyframes blink {
  50% {
    opacity: 0.0;
  }
}

atom-text-editor::shadow  .bracket-matcher .region {
    border:none;
    background-color: rgba(195,195,255,0.1);
    border-bottom: 1px solid rgb(155,155,255);
    box-shadow: 0px 0px 9px 4px rgba(155,155,255,0.1);
    border-radius: 3px;
    animation: blink 2s steps(115, start) infinite;
    -webkit-animation: blink 2s steps(115, start) infinite;
} 
```

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2015-09-02T11:52:49.653

请为您的代码找到以下解决方案。

```
@keyframes blink {
  50% {
    color: transparent;
  }
}

.loader__dot {
  animation: 1s blink infinite;
}

.loader__dot:nth-child(2) {
  animation-delay: 250ms;
}

.loader__dot:nth-child(3) {
  animation-delay: 500ms;
}
```

```
Loading <span class="loader__dot">.</span><span class="loader__dot">.</span><span class="loader__dot">.</span>
```*

# java - SBT运行scala和java的区别？

> ID：13955166
> 
> 赞同：9
> 
> 时间：2012-12-19T15:02:55.973
> 
> 标签：java, scala, sbt, log4j2

我正在尝试遵循 SBT 0.12.1 项目中的[log4j2 配置教程](http://logging.apache.org/log4j/2.x/manual/configuration.html)。这是我的*build.sbt*：

```
name := "Logging Test"

version := "0.0"

scalaVersion := "2.9.2"

libraryDependencies ++= Seq(
  "org.apache.logging.log4j" % "log4j-api" % "2.0-beta3",
  "org.apache.logging.log4j" % "log4j-core" % "2.0-beta3"
) 
```

我有两个独立的主要课程。第一个`logtest.ScalaTest`在*src/main/scala/logtest/ScalaTest.scala*：

```
package logtest

import org.apache.logging.log4j.{Logger, LogManager}

object ScalaTest {
  private val logger = LogManager.getLogger(getClass())
  def main(args: Array[String]) {
    logger.trace("Entering application.")
    val bar = new Bar()
    if (!bar.doIt())
      logger.error("Didn't do it.")

    logger.trace("Exiting application.")
  }
} 
```

第二个`logtest.JavaTest`在*src/main/java/logtest/JavaTest.java*：

```
package logtest;

import org.apache.logging.log4j.Logger;
import org.apache.logging.log4j.LogManager;

public class JavaTest {
  private static Logger logger = LogManager.getLogger(JavaTest.class.getName());

  public static void main(String[] args) {
    logger.trace("Entering application.");
    Bar bar = new Bar();

    if (!bar.doIt())
      logger.error("Didn't do it.");

    logger.trace("Exiting application.");
  }
} 
```

如果我`logtest.ScalaTest.main()` 从 sbt 内部运行，我会得到我期望的输出，因为*src/main/resources/log4j2.xml*将根日志记录级别设置为跟踪：

```
> run-main logtest.ScalaTest
[info] Running logtest.ScalaTest 
10:26:23.730 [run-main] TRACE logtest.ScalaTest$ - Entering application.
10:26:23.733 [run-main] TRACE logtest.Bar -  entry
10:26:23.733 [run-main] ERROR logtest.Bar - Did it again!
10:26:23.733 [run-main] TRACE logtest.Bar -  exit with (false)
10:26:23.733 [run-main] ERROR logtest.ScalaTest$ - Didn't do it.
10:26:23.733 [run-main] TRACE logtest.ScalaTest$ - Exiting application.
[success] Total time: 0 s, completed Dec 21, 2012 10:26:23 AM 
```

但是，当我 `logtest.JavaTest.main()`从 sbt 内部运行时，我得到不同的输出

```
> run-main logtest.JavaTest
[info] Running logtest.JavaTest 
ERROR StatusLogger Unable to locate a logging implementation, using SimpleLogger
ERROR Bar Did it again!
ERROR JavaTest Didn't do it.
[success] Total time: 0 s, completed Dec 21, 2012 10:27:29 AM 
```

据我所知，`ERROR StatusLogger Unable to ...`这通常表明 log4j-core 不在我的类路径中。缺少 TRACE 消息似乎表明我的 log4j2.xml 设置也不在类路径上。如果我运行 Foo.main 与 LoggerTest.main，为什么类路径会有任何差异？还是有其他原因导致这种行为？

## 更新

我使用 SBT Assembly 构建了这个项目的胖 jar，并指定 logtest.JavaTest 为主类。从命令行运行它会产生正确的结果：

```
$ java -jar "Logging Test-assembly-0.0.jar" 
10:29:41.089 [main] TRACE logtest.JavaTest - Entering application.
10:29:41.091 [main] TRACE logtest.Bar -  entry
10:29:41.091 [main] ERROR logtest.Bar - Did it again!
10:29:41.091 [main] TRACE logtest.Bar -  exit with (false)
10:29:41.091 [main] ERROR logtest.JavaTest - Didn't do it.
10:29:41.091 [main] TRACE logtest.JavaTest - Exiting application. 
```

# GitHub 示例

按照 Edmondo1984 的建议，我整理了一个完整的例子，放到了[github 上](https://github.com/ecartner/sbt-run-log)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:27:23.290

这类问题通常是由于类加载差异造成的，在这种情况下，差异并非微不足道。

在这个初始化阶段，`LogManager`静态初始化器在类第一次加载时被调用。如果您查看静态初始化程序内部，您将看到：

```
 Enumeration<URL> enumResources = null;
        try {
            enumResources = cl.getResources(LOGGER_RESOURCE);
        } catch (IOException e) {
            logger.fatal("Unable to locate " + LOGGER_RESOURCE, e);
        } 
```

稍后在代码中，您将看到枚举资源的循环以创建记录器上下文工厂。

但是，当您运行 Scala 类`enumResources.hasMoreElements()`时返回**true**，而当您运行 java 类时它返回**false**（因此没有记录器上下文并且根本没有记录器被添加到 LogManager 中）。

如果您进一步调查，您会发现该`cl`变量实际上是一个类加载器，在 Java 类的情况下是一个实例，`sun.misc.Launcher$AppClassLoader`而对于 Scala 类是一个实例`sbt.classpath.ClasspathUtilities$$anon$1`

如果您查看静态初始化程序的开头，您将看到以下语句：

```
 static {
        // Shortcut binding to force a specific logging implementation.
        PropsUtil managerProps = new PropsUtil("log4j2.LogManager.properties");
        String factoryClass = managerProps.getStringProperty(FACTORY_PROPERTY_NAME);
        ClassLoader cl = findClassLoader(); 
```

所以你可能想看看这个`findClassLoader()`方法：

```
private static ClassLoader findClassLoader() {
            ClassLoader cl;
            if (System.getSecurityManager() == null) {
                cl = Thread.currentThread().getContextClassLoader();
            } else {
                cl = java.security.AccessController.doPrivileged(
                    new java.security.PrivilegedAction<ClassLoader>() {
                        public ClassLoader run() {
                            return Thread.currentThread().getContextClassLoader();
                        }
                    }
                );
            }
            if (cl == null) {
                cl = LogManager.class.getClassLoader();
            }

            return cl;
        } 
```

在这两种情况下，由于 SecurityManager 不为 null，它返回当前的 Thread 上下文类加载器。您的 Java 类和 Scala 类是不同的。

# time - 使用时间范围之间的 VBS 登录脚本

> ID：13955168
> 
> 赞同：1
> 
> 时间：2012-12-19T15:02:58.487
> 
> 标签：time, vbscript, login-script

我需要在登录时运行一个 vbs 脚本，它将根据第二天 22:00 到 06:00 之间的时间范围运行一个批处理脚本。

我的当前脚本如下

```
If Hour(Now()) >= 20 AND hour(Now()) < 6 Then
   //RUN SCRIPT
Else
   //RUN OTHER SCRIPT
End If 
```

现在，当我使用中午时间（例如 6 点和 11 点）时，脚本运行良好，但关于它却没有。我可以看到问题在于没有考虑到接下来的几天时间，实际上是及时回溯。我需要的是以下

如果时间是第 1 天的 20:00 但小于第 2 天的 06:00，则运行脚本，否则运行其他脚本

这需要在一周中的每一天在这些时间之间连续运行。

请问你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:15:51.377

为什么不直接将 AND 更改为 OR？在这种情况下，当一天中的小时大于 20 时，它将触发。如果一天中的小时小于 6，它也会触发。少看它需要触发的时间范围，而多看时间范围，不包括不需要触发的时间。

```
If Hour(Now()) >= 20 OR hour(Now()) < 6 Then
   //RUN SCRIPT
Else
   //RUN OTHER SCRIPT
End If 
```

[VB 脚本日期函数](http://www.scriptingmaster.com/asp/date-functions.asp)

# ios - 自定义 UIView 不接收触摸事件

> ID：13955170
> 
> 赞同：2
> 
> 时间：2012-12-19T15:03:08.517
> 
> 标签：ios, cocoa-touch, uiview

我正在为我的应用程序构建一个自定义滑块。

我在 Github 上找到了一个图书馆作为灵感。

我已经创建了文件：`NKSlider`作为库的子类`UIView`并在其上实现`drawRect`并实现了方法：`touchesMoved:withEvent:`和`touchesBegan:withEvent:`. 但是没有调用任何触摸事件。

这就是我将此自定义视图添加到我的视图控制器的方式：

```
NKHandler *nk = [[NKHandler alloc] init];
nk.frame = CGRectMake(20, 20, 280, 36);
[self.view addSubview:nk];
[self.view addSubview:[[NKHandler alloc] initWithFrame:CGRectMake(20, 60, 280, 100)]]; 
```

这就是课程。我究竟做错了什么？？

这`.h`

```
#import <UIKit/UIKit.h>

@interface NKHandler : UIView

@end 
```

和`.m`

```
#import "NKHandler.h"

static inline CGPoint CGPointTopCenter(CGRect rect) {
  CGPoint p; p.x = rect.origin.x + (rect.size.width / 2); p.y = rect.origin.y; return p;
}
static inline CGPoint CGPointBottomCenter(CGRect rect) {
  CGPoint p; p.x = rect.origin.x + (rect.size.width / 2); p.y = rect.origin.y + rect.size.height; return p;
}
static inline CGPoint CGPointLeftCenter(CGRect rect) {
  CGPoint p; p.x = rect.origin.x; p.y = rect.origin.y + (rect.size.height / 2); return p;
}
static inline CGPoint CGPointRightCenter(CGRect rect) {
  CGPoint p; p.x = rect.origin.x + rect.size.width; p.y = rect.origin.y + (rect.size.height / 2); return p;
}

@implementation NKHandler {
  int _selectedStep;
}

-(id)init {
  self = [super init];
  if (self) {
    self.backgroundColor = [UIColor clearColor];

    self.clipsToBounds = NO;
    self.opaque = YES;

    _selectedStep = 5;   
  }
  return self;
}

-(void) setStep:(int) step {
  _selectedStep = step;
  [self setNeedsDisplay];
}

-(void)layoutSubviews {
  ... layout stuff ...
}
-(void)drawRect:(CGRect)rect {
  ... Boring drawing stuff ..
}

#pragma mark - Touch Handling

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
  NSLog(@"%s", __PRETTY_FUNCTION__);
  [self setStep:(_selectedStep+1)%11];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
  NSLog(@"%s", __PRETTY_FUNCTION__);
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:09:14.193

```
nk.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T12:01:05.130

如果**userInteractionEnabled 技巧不起作用**，也许您应该检查视图的父视图**自动调整大小属性**。

我像下面这样更改它，因为故事板“最初”以纵向模式加载它，但我以横向模式呈现它，所以**父级的视图高度变为 0 px**。甚至视图本身保持其高度，父母变为 0 px，因此视图没有收到事件。

![在此处输入图像描述](../Images/02b998f5574eed2d2e2e0703816f52e2.png) ![在此处输入图像描述](../Images/8ba6f367ace78a9d078a1a389a6420ab.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T23:03:33.187

这可能是一个超级边缘情况，但是当我的自定义视图类意外地从`UICollectionViewCell`代码中下降时，我遇到了这个问题，但在 XIB 中使用的元素是`UIView`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-05T00:44:48.623

我已经看到这条线导致 UIView 事件出现问题：

```
contentView.translatesAutoresizingMaskIntoConstraints = NO; 
```

在您使用 pushViewController 和 popViewControllerAnimated 方法推送和弹出视图控制器后，这一行可能会让人头疼。一旦您的 contentView 再次显示，您可能会发现事件处理不起作用。

# python - Python中以字符串形式抛出错误的文件路径

> ID：13955176
> 
> 赞同：9
> 
> 时间：2012-12-19T15:03:25.100
> 
> 标签：python, string, error-handling, filepath

作为我程序的一部分，我需要在 Python 中以字符串的形式放置很多文件路径。例如，我的目录之一是`D:\ful_automate\dl`. 但是 Python 将某些字符一起识别为其他字符并抛出错误。在示例中，错误是`IOError: [Errno 22] invalid mode ('wb') or filename: 'D:\x0cul_automate\\dl`。这对我来说经常发生，每次我需要将目录名称更改为可能没有问题的名称时。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T15:04:13.057

`\`字符用于形成字符转义；`\f`有特殊意义。

改用`/`或使用原始字符串`r''`。或者，您可以确保 Python 将反斜杠读取为反斜杠，方法是使用附加的`\`.

```
r'D:\ful_automate\dl'
'D:\\ful_automate\\dl'
'D:/ful_automate/dl' 
```

演示以显示差异：

```
>>> 'D:\ful_automate\dl'
'D:\x0cul_automate\\dl'
>>> r'D:\ful_automate\dl'
'D:\\ful_automate\\dl' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:31:58.457

使用原始字符串而不是字符串，即使用 r'filepath' 它解决了 blacklash "\" 的问题

# struts2 - 如何通过 从 jsp 到同一个动作类的迭代列表？

> ID：13955186
> 
> 赞同：1
> 
> 时间：2012-12-19T15:03:40.423
> 
> 标签：struts2

```
<s:iterator value="newIssues">
  <s:property value="is.description"/>
  <s:property value="is.component"/>
</s:iterator>
<input type="submit" align="bottom" value="Done" id="mysubmit"/> 
```

现在，NewTickets 是我的动作类。这个类提供了 newIssues 数组列表来迭代它。我希望在我按下提交时使用相同的列表。我该怎么做？

# iphone - 从背景切换到前景时，UIButton currentimage 不返回图像？

> ID：13955188
> 
> 赞同：3
> 
> 时间：2012-12-19T15:03:43.667
> 
> 标签：iphone, objective-c, uibutton

我正在检查按钮的图像以获取其状态，如下所示：

```
if([syncBtn.currentImage isEqual:[UIImage imageNamed:@"playbtn1.png"]])
{
  //Do something if play button
}
else if([syncBtn.currentImage isEqual:[UIImage imageNamed:@"syncbtn1.png"]])
{
  //Do something if sync button
}
else 
{
   //do something when no image on button
} 
```

按钮上总是有一个图像，无论是 syncbtn1.png 还是 playbtn1.png。

上面的检查工作正常，但是当我去后台然后返回前台时，只有它无法从上面的方法检查按钮的当前图像，它处于其他状态。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:11:00.663

这是因为您正在比较 UIImage 实例。它们在默认情况下被缓存，因此您大部分时间都会获得相同的实例。但是当应用程序进入后台后，缓存被清除并且你得到一个新的实例，这意味着它不再匹配了。

修复它的两个选项..

**使用您当前的方式：**

1.  只创建一次图像实例并将它们保存在一个强大的属性中。
2.  将这些图像分配给您的按钮，并检查这些实例。

**使用按钮状态：**

1.  设置`playbtn1.png`图像为`UIControlStateNormal`
2.  设置`syncbtn1.png`图像为`UIControlStateSelected`
3.  现在只需设置并检查`syncBtn.selected`- 如果您更改所选标志，图像将自动更改。

# r - 添加其他文本时R中的下标

> ID：13955200
> 
> 赞同：11
> 
> 时间：2012-12-19T15:04:24.120
> 
> 标签：r, plotmath

你将如何为 R 中标题的一个特定单词添加下标？例如，假设标题是`"A_2 and B_2."`如何添加这两个下标？我知道`expression("A"[2])`并`expression("B"[2])`单独为这些字母添加下标。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T18:07:58.417

您根本不需要`paste`（或为此引用）：

```
expression( A[2]~and~B[2] ) 
```

测试：

```
plot(1,1, main=expression( A[2]~and~B[2] ) ) 
```

语法原则是波浪线（创建空格）和星号（非空格绘图分隔符）用于分隔项目，并且不需要引号，除非您使用绘图函数名称....例如想要单词“ paste" 或 "sqrt" 出现在表达式的显示版本中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T15:10:54.783

只需将它们粘贴在一起：

`expression(paste("A"[2], " and B"[2])`

# jquery - 验证插件在更新面板中不起作用

> ID：13955201
> 
> 赞同：5
> 
> 时间：2012-12-19T15:04:27.803
> 
> 标签：jquery, asp.net

我有一个更新面板，面板内的文本框和按钮可用。现在我正在使用 jQuery Validation 插件，但是在更新面板中使用时，验证插件不起作用。

例如：

```
function GetAddressTargetList() {
    var objArray = new Array();
    var objAddressElement = new Object();

    objAddressElement = new Object();
    objAddressElement.Id = "ddlAccType"; 
    objAddressElement.Rules = "required";
    objAddressElement.TargetControlType = "select";
    objArray[objArray.length] = objAddressElement;
    objAddressElement = new Object();
} 
```

并在页面级别（.aspx）

```
$(document).ready(function () {
    GetAddressTargetList();
});

function pageLoad(sender, args) {
    // To load the tooltip in update panel
    if (args.get_isPartialLoad()) {
        GetAddressTargetList();
    }
} 
```

当我使用更新面板工作时，如何获得验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:10:33.770

我认为您忘记启动`pageLoad`

将此添加到您的代码中：

```
$(document).ready(function () {
    Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(PageLoaded);
});

function PageLoaded(sender, args) {
    GetAddressTargetList();
} 
```

参考： http: [//msdn.microsoft.com/en-us/library/bb397523 (VS.100).aspx](http://msdn.microsoft.com/en-us/library/bb397523(VS.100).aspx)

## 更新

我已将**pageLoad 更新为 PageLoaded**，以避免在**rs**评论后发生冲突。在我看来，UpdatePanel 有一种自定义方式来处理事件，我们在这里尝试的是在 UpdatePanel 更新内容后触发 javascript 上的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:17:44.093

试试这个而不是 document.ready，在每个部分回发之后调用 ajax pageLoad

```
function pageLoad() { 
    GetAddressTargetList();
  } 
```

# unix - 为什么 ksh 中的以下 IF 条件总是评估为真？

> ID：13955208
> 
> 赞同：2
> 
> 时间：2012-12-19T15:04:53.080
> 
> 标签：unix, if-statement, ksh

考虑一下，下面的代码按预期工作：

```
if [[ $SOME_VARIABLE = "TRUE" ]]; then
   echo "Only echoed when \$SOME_VARIABLE stores string \"TRUE\"."
fi 
```

但是当我删除相等运算符周围的空间时，它总是评估为 0 退出状态（至少这是我认为它必须返回的，因为它被认为是真的）：

```
if [[ $SOME_VARIABLE="TRUE" ]]; then
   echo "Always true."
fi 
```

* * *

**更新：**

只是为了确认问题是否出在相等运算符上：

```
#!usr/bin/ksh

SOME_VARIABLE=FALSE

if [[ $SOME_VARIABLE == "TRUE" ]]; then
   echo "Only echoed when \$SOME_VARIABLE stores string \"TRUE\"."
fi

if [[ $SOME_VARIABLE=="TRUE" ]]; then
   echo "Always true."
fi

[kent@TEST]$ sh test.sh
Always true. 
```

* * *

**更新：**

概括：

1.  使用与上面`=`相同`==`，但已过时。
2.  始终注意您的空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:15:41.783

来自`ksh(1)`：

> 条件表达式。
> 
> ```
>  A conditional expression is used with the [[ compound command  to  test
>    attributes  of  files and to compare strings.  Field splitting and file
>    name generation are not performed on the words between [[ and ]].  Each
>    expression  can  be constructed from one or more of the following unary
>    or binary expressions:
> 
>    **string** True, if string is not null.
> 
>    ... 
> ```

所以下面的表达式为真：

```
[[ somestring ]] 
```

现在考虑你的第二个例子：

```
if [[ $SOME_VARIABLE="TRUE" ]]; then 
```

假设`$SOME_VARIABLE`是“SOMETHINGNOTTRUE”，这将扩展为：

```
if [[ SOMETHINGNOTTRUE=TRUE ]]; then 
```

“SOMETHINGNOTTRUE=TRUE”是一个非零长度字符串。因此这是真的。

如果要在 中使用运算符`[[`，则必须按照文档中的说明在它们周围放置空格（注意空格）：

```
 string == pattern
          True, if string matches pattern.  Any part  of  pattern  can  be
          quoted to cause it to be matched as a string.  With a successful
          match to a pattern, the .sh.match array  variable  will  contain
          the match and sub-pattern matches.
   string = pattern
          Same as == above, but is obsolete. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:18:56.043

因为如果字符串不是空字符串，则测试的一种参数形式为真。由于唯一以`=TRUE`它结尾的参数肯定不是空字符串，因此测试评估为真。

太空，最后的边界:-)

始终注意您的空间并牢记分词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:59:56.540

只是为了堆积，这在 ksh 手册页中明确指出（在`test`命令的描述中）：

> 请注意，如果`test`or的参数数量`[ ... ]`少于五个，则应用一些特殊规则（由 POSIX 提供）：如果`!`可以剥离前导参数以**仅保留一个参数**，则**执行字符串长度测试**（同样，即使参数是一元运算符）

（强调我的）

# mongodb - 检查 MongoDB upsert 是否进行了插入或更新

> ID：13955212
> 
> 赞同：61
> 
> 时间：2012-12-19T15:05:21.597
> 
> 标签：mongodb

我在文档中任何明显的地方都找不到这个。我想知道是否有可能知道 Mongo 是否在 upsert 操作中执行了插入或更新？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-19T15:12:42.367

是的，在安全调用（或 getLastError）中，更新函数将返回一个带有 upsert 字段和 updatedExisting 字段的数组。

您可以在此处阅读 PHP 版本：[http](http://php.net/manual/en/mongocollection.insert.php) ://php.net/manual/en/mongocollection.insert.php位于底部。

正如它在文档中所说`upserted`：

> 如果发生了 upsert，该字段将包含新记录的 _id 字段。对于 upsert，此字段或 updatedExisting 将存在（除非发生错误）。

`_id`因此，如果插入已完成，则upserted 包含新记录的，或者`updatedExisting` 如果更新记录，它将增加。

我确信所有驱动程序中都会出现类似的情况。

### 编辑

它实际上是or`updatedExisting`字段中的布尔值`true``false`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-19T15:33:33.690

仅供参考，在 node.js 中：

```
collection.update( source, target, { upsert: true }, function(err, result, upserted) {
  ...
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-23T17:27:23.260

仅供参考，在 node.js 中使用 Mongoose 3.6：

```
model.update( findquery, updatequery, { upsert: true }, function(err, numberAffected, rawResponse) {
  ...
}); 
```

rawResponse 在更新现有文档时看起来像这样：

```
{ updatedExisting: true,
  n: 1,
  connectionId: 222,
  err: null,
  ok: 1 } 
```

当它创建一个新文档时，它看起来像这样：

```
{ updatedExisting: false,
  upserted: 51eebc080eb3e2208a630d8e,
  n: 1,
  connectionId: 222,
  err: null, 
```

（两种情况都会返回 numberAffected = 1）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-23T10:53:29.297

答案取自《MongoDB 应用设计模式》一书！[确定 upsert 是插入还是更新](https://i.stack.imgur.com/ikXsE.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-10T09:46:04.063

在 Node.js 下使用 MongoDB 驱动`3.5.9`，我发现使用`updateOne`with后有这些我们感兴趣的属性`{ upsert: true }`：

```
{
  modifiedCount: 0,
  upsertedId: null,
  upsertedCount: 0,
  matchedCount: 1
} 
```

当 upsert 插入一些东西时，我们将获取`upsertedCount > 0`并`upsertedId`保存新插入的文档 ID。当 upsert 修改了某些东西时，我们会得到`modifiedCount > 0`.

所有 CRUD 操作的教程都在这里[https://mongodb.github.io/node-mongodb-native/3.6/tutorials/crud/](https://mongodb.github.io/node-mongodb-native/3.6/tutorials/crud/)

# php - 语法错误（当似乎没有！）

> ID：13955223
> 
> 赞同：1
> 
> 时间：2012-12-19T15:06:06.403
> 
> 标签：php, mysql, syntax, foreach, eval

我花了一个小时左右试图找出这个错误。在我看来它是正确的，但我到目前为止还不是专家。所以我想我会问专家！我不断收到此错误：

> 解析错误：语法错误，意外的 '' (T_ENCAPSED_AND_WHITESPACE)，期待标识符 (T_STRING) 或变量 (T_VARIABLE) 或数字 (T_NUM_STRING) 在 ... 第 29 行

从这行代码：

```
eval("$var_value = $_REQUEST['{$value}']"); 
```

这是它周围的代码..

```
function save_edits($var_name, $var_value)
{
    eval("{$var_name} = sql_safe({$var_value});");
    eval("mysql_query(\"UPDATE settings set {$var_name}='{$var_value}' where variable='{$var_name}'\") or die(mysql_error());");
}     
foreach ($_REQUEST as $key => $value)
{
    eval("$var_value = $_REQUEST['{$value}']");
    save_edits($value, $var_value);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T15:08:10.460

缺少一个`]`is 出现：

```
eval("$var_value = $_REQUEST['{$key}\'");
                                     ^^ 
```

还缺少一个`)`：

```
eval("{$var_name} = sql_safe({$var_value};");
                                        ^^ 
```

但是，您应该**避免`eval`付出很多代价**，尤其是使用`$_REQUEST`s （暗示用户输入）。就目前而言，此查询将对您的网站有害：

```
http://your-site.com/?foo='];exec('rm%20*.*'); 
```

那么如何重构：

```
function save_edits($var_name, $var_value)
{
    $clean_name = mysql_real_escape_string($var_name);
    $clean_value = mysql_real_escape_string($var_value);
    $sql = "UPDATE settings "
        .= "SET    value = '{$clean_value}' "
        .= "WHERE  variable = '{$clean_name}'";
    mysql_query($sql) or die(mysql_error());
}     
foreach ($_REQUEST as $key => $value)
{
    save_edits($key, $value);
} 
```

但是，您应该真正考虑使用：

```
CREATE TABLE settings
(
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  value VARCHAR(255)
); 
```

然后，您可以清理名称和值字段。您可能还想研究使用[PDO](http://php.net/manual/en/book.pdo.php)来更好地防止漏洞利用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:22:20.583

最大的问题是你的`eval`字符串评估产生了无意义的代码。尝试：

```
echo "$var_value = $_REQUEST['{$value}']"; 
```

查看该字符串中的变量是如何被插值的以及结果是什么。*这*就是试图成为`eval`d 以及产生语法错误的原因。

总的来说，再次：这是我一段时间以来见过的最可怕的代码。忘掉它。忘记`eval`存在。把它扔掉。白手起家。

# silverlight - 性能 - ListBox 中的 Silverlight ContextMenuService

> ID：13955225
> 
> 赞同：0
> 
> 时间：2012-12-19T15:06:15.233
> 
> 标签：silverlight, xaml, wcf-ria-services

使用 Silverlight5、RIA 服务、DataPager 对 ListBox 进行 7500 行查询。

遇到了一个有趣的问题 - 在分页 500 个左右的项目后，内存使用量从 70MB 变为 250MB ish，并且性能严重下降。

如果我注释掉 ContextMenuService，一切正常。

问题：如何在每个 listboxitem 上实现高性能的右键单击功能？

```
<ListBox x:Name="AccountItems" SelectionMode="Extended" ItemsSource="{Binding Data, ElementName=AccountsDataSource}" ScrollViewer.HorizontalScrollBarVisibility="Disabled">

    <ListBox.ItemTemplate>
        <DataTemplate>
            <ListBoxItem>
                <TextBlock Grid.Column="2" Name="textBlockCaptionFirstName" Text="{Binding FirstName}" HorizontalAlignment="Left" TextAlignment="Center" TextWrapping="Wrap" >
                    <!-- Right click -->
                    <controlsInputToolkit:ContextMenuService.ContextMenu>
                        <controlsInputToolkit:ContextMenu>
                            <controlsInputToolkit:MenuItem Header="Convert account to another User" Click="Person_Click">
                                <controlsInputToolkit:MenuItem.Icon>
                                    <Rectangle Width="16" Height="16" Fill="{StaticResource PersonAccountIcon}"/>
                                </controlsInputToolkit:MenuItem.Icon>
                            </controlsInputToolkit:MenuItem>
                            <controlsInputToolkit:MenuItem Header="Convert account to a System account" Click="ServiceAccount_Click">
                                <controlsInputToolkit:MenuItem.Icon>
                                    <Rectangle Width="16" Height="16" Fill="{StaticResource ServiceAccountIcon}"/>
                                </controlsInputToolkit:MenuItem.Icon>
                            </controlsInputToolkit:MenuItem>

                            <controlsInputToolkit:Separator/> snip.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:09:06.150

[此处](http://silverlight.codeplex.com/workitem/6206)描述了问题/解决方法

# javascript - 为什么 Object.prototype === 不是 myNewObj.prototype？

> ID：13955226
> 
> 赞同：11
> 
> 时间：2012-12-19T15:06:18.770
> 
> 标签：javascript, prototype-programming

所以如果你看看这个小提琴[http://jsfiddle.net/r0k3t/z8f2N/1/](http://jsfiddle.net/r0k3t/z8f2N/1/)你可以看到

```
var me = { fName: "ken", lName: "n" };

console.log(Object.prototype === Object.getPrototypeOf(me)); 
```

返回真。为什么不

```
console.log(Object.prototype === me.prototype); 
```

鉴于我将“我”对象创建为对象字面量，它的原型应该是 Object.prototype 并且第一行似乎证实了这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T15:08:56.270

```
Object.prototype === me.constructor.prototype; // true 
```

我现在让你猜猜它是如何`getPrototypeOf`工作的:-)

此外，非标准但几乎无处不在的解决方案（感谢 jAndy）：

```
Object.prototype === me.__proto__; // true 
```

# scala - 使用 SBT 构建的 scala 无法导入 java 类？

> ID：13955230
> 
> 赞同：5
> 
> 时间：2012-12-19T15:06:55.030
> 
> 标签：scala, sbt

在使用 sbt 构建一个简单的 Scala 类时，我遇到了一些奇怪的问题。代码很简单，我从互联网上复制来启动一个码头服务器：

```
object JettyEmbedded {

  def main(args: Array[String]) {
    val server = new org.eclipse.jetty.server.Server(9080)
    val context= new org.eclipse.jetty.webapp.WebAppContext()

    context.setServer(server)
    context.setContextPath("/");
    context.setWar("src/main/webapp")
    server.setHandler(context);

    try {
      server.start()
      server.join()
    } catch {
      case e: Exception => {
        e.printStackTrace()
        System.exit(1)
      }
    }
  }
} 
```

用 SBT 和 scala 2.9.2 编译，我得到以下错误：

```
[error] /src/main/scala/JettyEmbedded.scala:4: object eclipse is not a member of package org
[error] val server = new org.eclipse.jetty.server.Server(9080) 
```

我可以在 build.sbt 中看到，我有如下依赖项：

```
"org.eclipse.jetty" % "jetty-webapp" % "8.1.7.v20120910" % "container",
"org.eclipse.jetty.orbit" % "javax.servlet" % "3.0.0.v201112011016" % "container;provided;test" artifacts (Artifact("javax.servlet", "jar", "jar")) 
```

如果我只是删除这个有问题的文件并使用容器运行 Jetty 服务器：从 sbt 开始，它运行没有问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:37:20.817

更改此行：

```
"org.eclipse.jetty" % "jetty-webapp" % "8.1.7.v20120910" % "container", 
```

到：

```
"org.eclipse.jetty" % "jetty-webapp" % "8.1.7.v20120910" % "container;provided", 
```

解决了这个问题。

sbt 不要将“容器”类放入编译类路径中，而在 Eclipse 中它并不关心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:20:09.183

看起来您的文件中没有正确的码头依赖项`build.sbt`。

```
libraryDependencies ++= Seq(
  "org.eclipse.jetty" % "jetty-server" % "8.1.7.v20120910",
  "org.eclipse.jetty" % "jetty-webapp" % "8.1.7.v20120910"
) 
```

# ruby - @users 变量为空。忘记传递 will_paginate 的集合对象？

> ID：13955232
> 
> 赞同：6
> 
> 时间：2012-12-19T15:07:14.413
> 
> 标签：ruby, variables, factory-bot, railstutorial.org, isnullorempty

**问题**localhost:3000/users/ 不会显示

当我第一次尝试通过 rails 教程时，我谦虚地进入。我在第 10 章，我已经解决了 5 个小时的问题。当我尝试访问 localhost:3000/users/ 时，我收到一个错误（我相信这与 factory_girl 有关），它解释了**@users 变量为空**并且我**忘记为 will_paginate 传递一个集合对象**。

我目前在第 10 章第 10.23 节，每次运行时：

> $ bundle exec rake db:reset
> 
> $ bundle exec rake db:populate
> 
> $ bundle exec rake db:test:prepare

我得到一个错误解释

> 耙中止！工厂已注册：微博

这是我第二次尝试本章，因为我第一次遇到问题并从第9章开始。请帮助并在提供指导时清晰详细。我很高兴发布任何有用的文件。

这是我的 index.html.erb - 我将这些保存为 HTML，是否应该将它们保存为 ruby​​ 文件？

```
<% provide(:title, 'All users') %>
<h1>All users</h1>

<%= will_paginate %>

<ul class="users">
  <%= render @users %>
</ul>

<%= will_paginate %> 
```

这是我的用户控制器

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update, :destroy]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy

  def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
  end
end

   def new
    @user = User.new
   end

 def index
    @title = "All users"
    @users = User.paginate(:page => params[:page])
  end

def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Do more of the things you love!"
      redirect_to @user
    else
      render 'new'
    end
  end

def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_url
  end

private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

    def admin_user
      redirect_to(root_path) unless current_user.admin?
    end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T15:39:16.233

在您的用户控制器中，确保您有 @users，如果您使用 will_paginate，请确保您调用`.paginate(page: params[:page], per_page: 20]`并在您的视图中拥有`<%= will_paginate @users %>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:24:06.930

`/users`应该指向 UsersController#index。确保您正在分配集合`@users`。

例如，在最基本的层面上它可能看起来像这样：

```
def index
  @users = User.all # not paginated
  @users = User.paginate(page: params[:page]) # paginated
end 
```

至于测试数据库错误，我猜那是因为您不止一次定义了一个 :micropost 工厂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-20T14:25:30.493

而不是 @user = User.find(params[:id]) 你应该使用 @users = User.paginate(page: params[:page])

# ruby - 如何测试 JSON REST API

> ID：13955233
> 
> 赞同：15
> 
> 时间：2012-12-19T15:07:16.157
> 
> 标签：ruby

我是 ruby​​ 的新手（使用 ruby​​ 的第一天），所以请原谅任何新手问题和缺乏理解。

我正在尝试验证对 http 标注的响应。

例如，假设端点如下：

```
https://applicationname-api-sbox02.herokuapp.com 
```

而且，我正在尝试通过发送这样的获取请求来验证用户身份：

```
get_response = RestClient.get( "https://applicationname-api-sbox02.herokuapp.com/api/v1/users", 
                    {
                        "Content-Type" => "application/json",
                        "Authorization" => "token 4d012314b7e46008f215cdb7d120cdd7",
                        "Manufacturer-Token" => "8d0693ccfe65104600e2555d5af34213"
                    }
                ) 
```

现在，我想验证响应并执行以下操作： - 解析响应以确保它是有效的 JSON - 进行一些验证并验证 JSON 具有正确的数据（例如验证 id == 4） - 如果出现错误遇到，请使用“raise”方法引发异常。

在我第一次微弱的尝试中，我尝试了以下方法：

```
puts get_response.body
if get_response.code == 200
puts "********* Get current user successful"
else
puts "Get current user failed!!"
end 
```

现在，这返回了获取当前用户成功，但我如何真正解析 json，验证正确的 id，并在发生错误时引发异常？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T15:32:36.980

与其引发异常，不如编写一个测试。

一种直接的方法，使用来自 std lib 的 json 解析器和单元测试框架：

```
require 'minitest/autorun'
require 'rest_client'
require 'json'

class APITest < MiniTest::Unit::TestCase
  def setup
    response = RestClient.get("https://applicationname-api-sbox02.herokuapp.com/api/v1/users", 
      {
         "Content-Type" => "application/json",
         "Authorization" => "token 4d012314b7e46008f215cdb7d120cdd7",
         "Manufacturer-Token" => "8d0693ccfe65104600e2555d5af34213"
      }
    ) 
    @data = JSON.parse response.body
  end

  def test_id_correct
    assert_equal 4, @data['id']
  end
end 
```

执行`ruby $filename`

[JSON.parse](http://ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html#method-i-parse)将 JSON 字符串解析为 ruby[​​ 哈希](http://ruby-doc.org/core-1.9.3/Hash.html)

[开始使用 minitest](http://rubylearning.com/blog/2011/07/28/how-do-i-test-my-code-with-minitest/)

如果您使用的是 ruby​​ 1.8，则需要安装[json gem](https://rubygems.org/gems/json)并安装[minitest gem](https://rubygems.org/gems/minitest)或切换到旧的 testunit API。如果您选择后者，那么您需要更改`require 'minitest/autorun'`->`require 'test/unit'`和`MiniTest::Unit::TestCase`->`Test::Unit::TestCase`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-18T18:24:28.583

我参加聚会有点晚了，但我最近共同创建了一个 rspec 驱动的框架`Airborne`，专门为此目的而调用。看看：[https ://github.com/brooklynDev/airborne](https://github.com/brooklynDev/airborne)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-21T07:33:03.457

这是我们规范中的一个示例，因此您可以了解我们如何测试 json api：

```
it 'returns charge' do
  get "/charges/#{charge.id}", '', headers

  expect(response.status).to eq(200)
  expect(response).to match_response_schema(:charge)
  expect(response).to match_json(<<-JSON)
  {
    "id":"{id}",
    "email": "{email}",
    "ip": "127.0.0.1",
    "amount": 10500,
    "state": "captured",
    "captured_amount": 10500,
  }
  JSON
end 
```

让我们仔细看看

1.  `match_response_schema(:charge)`

这个匹配器检查我们得到的响应中的 json 通常是有效的。我们为此使用[json-schema](https://github.com/ruby-json-schema/json-schema)（json 模式验证器）。Thoughtbot 的人在这篇博文中有[详细的指南](https://robots.thoughtbot.com/validating-json-schemas-with-an-rspec-matcher)如何使用 json 模式验证器和创建自己的匹配器。

[了解 JSON Schema](http://spacetelescope.github.io/understanding-json-schema/index.html)是我获得很多关于如何为 JSON 文档创建模式的有用信息的地方。

2.  `match_json`

这是我们自己的匹配器，我们最近发布了[match_json](https://github.com/WhitePayments/match_json) gem。使用它，您可以测试 json 的结构和值。这是此匹配器的两个重要功能：

*   如果您不知道确切的值，可以使用 {id}、{uuid} {date_time} 等模式。我们有预定义的模式，但您也可以添加自己的模式。
*   您会收到明确的失败消息您的 json 有什么问题，例如在“> array”中找不到“5”：[1,2,3]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:31:49.667

可以使用 json gem 解析 json：http: [//flori.github.com/json/](http://flori.github.com/json/)

解析后的 json 是通过 key/value 访问的，就像在 javascript 中一样。您可以轻松验证这些值并有条件地引发错误。

引发错误是这样完成的：

```
raise "the ID was #{id} instead of 4" 
```

编写单元测试可以使用 Test::Unit - [http://www.ruby-doc.org/stdlib-1.9.3/libdoc/test/unit/rdoc/Test/Unit.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/test/unit/rdoc/Test/Unit.html)

# mysql - 通过再添加一个左连接来更改结果

> ID：13955235
> 
> 赞同：2
> 
> 时间：2012-12-19T15:07:17.223
> 
> 标签：mysql

以下是我的两个查询，其中仅添加一个左连接结果就会搞砸。第二个查询结果是准确的，但在第一个查询中通过添加一个左连接输出不正确（如您所见，我只添加了一个左连接，但我没有在 where 子句中对该连接进行任何过滤）。请让我知道我该如何解决这个问题？谢谢，

**第一个查询：**

```
SELECT Distinct  count(event_id) as event_count from events 
Left Join events on events.event_id = my_events.i_event_id 
Left Join atdees on events.event_id = atdees.fk_event_id

where my_events.v_title != "NULL" and  r_present = 1 and resident_id = '208'  and event_atd > date_sub(curdate(), interval 37 day) group by event_count  order by event_count desc limit 5 
```

结果：

```
26  |  12   |  11   |   10 
```

**第二个查询：**

```
SELECT Distinct  count(event_id) as event_count from events 
Left Join events on events.event_id = my_events.i_event_id 

where my_events.v_title != "NULL" and  r_present = 1 and resident_id = '208'  and event_atd > date_sub(curdate(), interval 37 day) group by event_count  order by event_count desc limit 5 
```

结果：

```
2  |  1   |  1   |   1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:13:52.077

左连接的作用是添加额外的（重复的）行。

如果你去掉`count`并只列出行，你会看到很多重复的行。
这是因为您要的是 and 之间的叉`events`积`atdees`；当然，还有更多的事件和 atdees 组合，而不仅仅是事件。

基本逻辑真的。

将您的顶级查询更改为

```
SELECT count(distinct event_id) as event_count from events 
Left Join events on events.event_id = my_events.i_event_id 
Left Join atdees on events.event_id = atdees.fk_event_id

where my_events.v_title != "NULL" and  r_present = 1 and resident_id = '208'
and event_atd > date_sub(curdate(), interval 37 day) 
group by event_count  
order by event_count desc 
limit 5 
```

你应该得到相同的结果*（虽然这要慢得多）*

进一步注意`left join`s**不过滤**，它们添加东西。
如果你想过滤你会使用`inner join`s
（*这是一个**严重**的过度简化*）

**About`distinct`**
关键字可以在聚合函数 的`distinct`内部和外部起作用。如果你在里面使用它，它只会计算（总和等）唯一值。如果您在聚合函数之外使用它，它只会列出唯一的行。

也就是说：`distinct`它自己消除了重复的行（它适用于结果集中的所有列）。

`distinct`in a function 仅用作该函数的过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:13:22.947

使用`COUNT(DISTINCT)`，而不是`DISTINCT COUNT()`：

```
SELECT count(distinct event_id) as event_count from events 
```

`COUNT(DISTINCT)`将计算不同值的数量，而不是行数......当您添加额外的 时`LEFT JOIN`，您正在增加行数，从而更改`COUNT()`.

此外，您可能会仔细检查您的`GROUP BY`... 按聚合函数分组是没有意义的。

# vba - excel/vba中的字符串解析，用数字和冒号分隔

> ID：13955242
> 
> 赞同：0
> 
> 时间：2012-12-19T15:07:55.560
> 
> 标签：vba, excel

我在 VBA 中设置了一个字符串，该字符串是从另一个程序中提取的。当我将此数据拉入 Excel 时，它具有以下格式：

```
EXAMPLE EXAMPLE EXAMPLE EXAMPLE 
EXAMPLE EXAMPLE EXAMPLE EXAMPLE 

001: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE 

002: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE

003: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE 
```

使用我当前的 VBA 代码，您单击一个表单控件，它会将数据放入单元格中，就像我键入它一样。我想将它分开，所以当我单击控件时，它将数据放入由数字分隔的单独单元格中。那是，

```
EXAMPLE EXAMPLE EXAMPLE EXAMPLE 
EXAMPLE EXAMPLE EXAMPLE EXAMPLE 

001: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE 
```

进入第一个单元格，

```
002: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE 
```

进入相邻的单元格，并且

```
003: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE 
```

进入下一个相邻的单元格，依此类推，无论我有多少数字。我希望我已经充分解释了我的情况，以便有人提供帮助。请原谅我对 VBA 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:13:47.313

您可以使用[拆分](http://msdn.microsoft.com/en-us/library/gg278528%28v=office.14%29.aspx)并将数组处理到单元格中。Selection 对象上还有一个 TextToColumns 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:07:26.270

使用[正则表达式](http://msdn.microsoft.com/en-us/library/6wzad2b2%28v=vs.84%29.aspx)。添加对`Microsoft VBScript Regular Expressions 5.5`from的引用`Tools -> References`。然后你可以编写如下代码：

```
Public Function PasteValues()
Dim s As String, re As New RegExp
Dim matches As MatchCollection, m As Match

Dim rng As Range
'Destination workbook, worksheet within workbook, and starting cell
Set rng = ActiveWorkbook.Worksheets(1).Range("A1")

s = "EXAMPLE EXAMPLE EXAMPLE EXAMPLE " & Chr(13) & _
    "EXAMPLE EXAMPLE EXAMPLE EXAMPLE " & Chr(13) & _
    Chr(13) & _
    "001: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE " & Chr(13) & _
    Chr(13) & _
    "002: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE " & Chr(13) & _
    Chr(13) & _
    "003: EXAMPLE EXAMPLE EXAMPLE - EXAMPLE "

'Finds a sequence of non-digits (\D) followed by either 
    '1) a sequence of digits followed by a colon -- (\d*:)
    '2) the end of the string -- $
'The either/or is defined by the pipe -- |
re.Pattern = "(\D*)((\d*:)|$)"

'We want to match all instances, not just the first
re.Global = True

Set matches = re.Execute(s)
For Each m In matches
    'Each item in the SubMatches collection corresponds to a pair of parentheses.
    'e.g. m.SubMatches(0) returns the matched string corresponding to (\D*)
    'In this case, we aren't interested (I'm assuming) in the actual numbers, just that
    'they are there, but we could see them using SubMatches(1) or SubMatches(2)
    rng.Value = m.SubMatches(0)

    'Advance the range to the next column
    Set rng = rng.Offset(, 1)
Next
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:44:00.823

这是我们使用[多分隔符 split](https://stackoverflow.com/questions/13884864/excel-text-to-time/13887208#13887208)的帖子。

你可能会从中得到一个想法。

*   检查行首是否以数字开头
*   按空格、制表符或任何特定字符分割，而不是作为分隔符
*   如果您有多个分隔符，您可以使用上述方法

请评论您尝试过的内容。很高兴从那里提供帮助。

# shell - 在 shell 脚本中解析命令的输出并将结果存储在变量中

> ID：13955245
> 
> 赞同：0
> 
> 时间：2012-12-19T15:08:01.620
> 
> 标签：shell, cut, unix

当我执行以下`svn`命令时，我得到以下输出。

```
$ svn log -r 1:HEAD --limit 1 http://plugins.svn.wordpress.org/bulk-delete
------------------------------------------------------------------------
r91525 | plugin-master | 2009-02-03 10:39:23 +0530 (Tue, 03 Feb 2009) | 1 line

adding bulk-delete by sudar
------------------------------------------------------------------------ 
```

我正在编写一个 shell 脚本，我想解析上述命令的输出并获取修订号（在本例中为 r91525）并将其存储在 shell 变量中，以便我可以在后续命令中使用它。

我尝试了 cut 命令并且能够在第二行中获得修订号，但其他行仍然出现。

```
$ svn log -r 1:HEAD --limit 1 http://plugins.svn.wordpress.org/bulk-delete | cut -f1 -d'|'
------------------------------------------------------------------------
r91525 

adding bulk-delete by sudar
------------------------------------------------------------------------ 
```

问题：如何检索修订号并存储在 shell 变量中，以便我可以在后续命令中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:13:14.493

试试这个 ：

```
svn blahblah |awk 'NR==2{print $1;exit;}' 
```

测试：

```
kent$  echo "------------------------------------------------------------------------
r91525 | plugin-master | 2009-02-03 10:39:23 +0530 (Tue, 03 Feb 2009) | 1 line

adding bulk-delete by sudar
------------------------------------------------------------------------"|awk 'NR==2{print $1;exit;}'
r91525 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:13:29.593

你可以用`sed`这个。

```
 svn log --limit 1 | sed -n -e 's/^\(r[0-9]\+\).*/\1/p' 
```

这将只打印出修订，例如`r1234`

如果您只需要修订号，请使用

```
 svn log --limit 1 | sed -n -e 's/^r\([0-9]\+\).*/\1/p' 
```

更新：将其存储在变量中

重击：

```
REVISION=$(svn log --limit 1 | sed -n -e 's/^r\([0-9]\+\).*/\1/p') 
```

tcsh

```
 set revision = `svn log --limit 1 | sed -n -e 's/^r\([0-9]\+\).*/\1/p'` 
```

# c# - 如何从 html 中删除特定标签

> ID：13955247
> 
> 赞同：1
> 
> 时间：2012-12-19T15:08:07.813
> 
> 标签：c#, html

> **可能重复：**
> [如何使用 HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

我有下面的html代码：

```
<div><span class="help">This is text.</span>Hello, this is text.</div>
<div>I have a question.<span class="help">Hi</span></div> 
```

现在，我想删除`<span class="help"></span>`使用 C# 之间的文本。所以，我只想离开

```
<div>Hello, this is text.</div>
<div>I have a question.</div> 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:27:01.200

您应该使用 [Html Agility Pack](http://htmlagilitypack.codeplex.com/)来处理 html。

```
string text = @"<div><span class=""help"">This is text.</span>Hello, this is text.      </div>
                <div>I have a question.<span class=""help"">Hi</span></div>";
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(text);
var nodes = doc.DocumentNode.SelectNodes("//span[@class='help']");
foreach( HtmlNode node in nodes)
{
   node.Remove();
} 
String result = doc.DocumentNode.InnerHtml; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:16:33.157

我有想法用来`Html Agility Pack`解析html。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);  // this is your string
var divs = doc.DocumentNode.Elements("div")
      .Select(div => string.Format("<div>{0}</div>", div.LastChild.InnerText)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:13:29.593

你可以使用正则表达式

```
 string val = @"<div><span class=""help"">This is text.</span>Hello, this is text.</div><div>I have a question.<span class=""help"">Hi</span></div>";
        Regex reg = new Regex("<span .+?</span>", RegexOptions.IgnoreCase | RegexOptions.Singleline);
        string ret = reg.Replace(val, "");
        Debug.WriteLine(ret); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-19T15:12:03.430

获取包含 runat="server" 的元素，以便可以从代码隐藏中访问它们，然后在合适的时候尝试通过其 id 名称获取元素并执行 element.innerHTML = ""; 或 element.innerText = "";

# sql-server-2008 - SQL Server 代理作业完成但存储过程未运行

> ID：13955249
> 
> 赞同：1
> 
> 时间：2012-12-19T15:08:10.073
> 
> 标签：sql-server-2008, dynamics-crm-2011, sql-server-agent

我有一个存储过程，可以在 CRM2011 SQL Server 上简单地运行一系列 UPDATE 语句。目标是让它通过 SQL Server 代理作业每 30 分钟运行一次。存储过程不需要任何参数。

我创建了作业并添加了一个步骤来调用 T-SQL 语句“EXEC mystoredprocname”。我右键单击并“在此步骤开始作业”，它成功完成。但是，没有任何更新反映在数据库中。

如果我在查询行中手动运行“EXEC mystoredprocname”，它会正常执行并且数据库会按预期更新。

这看起来应该非常简单，所以我不确定我的过程中的故障在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:08:39.403

正如您在评论中提到的您的存储过程使用过滤视图，我相当愿意打赌您*没有*作为通过 Windows 身份验证进行身份验证并且还具有正确 CRM 权限的用户运行计划，因为经常已经注意到，过滤视图实现了 CRM 的基于 Windows 的身份验证模型。

所以我有三个建议：

1.  仔细检查以确保计划在具有正确读取权限的 CRM 用户的 Windows 帐户下运行。

2.  由于您致力于直接更新表，因此您想要使用过滤视图的唯一原因是因为它`OptionSet`为您打包了 s 的字符串表示形式的检索。相反，您可以直接查询`StringMap`表并引用常规视图，您无需成为 CRM 用户即可访问这些视图。您还会注意到速度有所提高，因为过滤视图会因安全检查而减慢。

3.  如果您*不*打算直接更新表，为什么不将您的存储过程重写为一个您可以安排每 30 分钟更新一次的小应用程序呢？除非您有一个巨大的增量，否则这应该是首选方法。您获得了 CRM Web 服务中内置验证模型的优势，尽管您失去了基于集合的方法的好处，但我认为*使用*第三方系统的好处超过了潜在的黑客攻击和破坏的坏处在系统中。如果您不是 .NET 开发人员（即使您是），CRM SDK 有许多示例可以帮助您入门。

以下是与我上述观点相关的其他一些问题，可能会对您有所帮助。

*   [如何在 crm 之外的应用程序中从 sql server 获取选项集值](https://stackoverflow.com/questions/12614163/how-to-get-option-set-values-from-sql-server-in-an-application-outside-crm)
*   [通过外部工具安排工作流程](https://stackoverflow.com/questions/11723350/schedule-workflows-via-external-tool)
*   [在 Microsoft CRM 2011 中计划任务](https://stackoverflow.com/questions/9470827/scheduling-tasks-in-microsoft-crm-2011)
*   [如何保存记录并立即使用其 GUID](https://stackoverflow.com/questions/12038381/how-to-save-a-record-and-immediately-use-its-guid/12042053#12042053)

# android - 如何为不同的尺寸和密度创建 AVD？

> ID：13955254
> 
> 赞同：-1
> 
> 时间：2012-12-19T15:08:25.733
> 
> 标签：android, android-emulator, avd, multiscreen

我是android编程的初学者。我想将程序更改为多屏幕程序。我想创建一些模拟器来测试我的程序。我想在此链接（http://developer.android.com/guide/practices/screens_support.html#testing）中创建一些检查 table3 的模拟器，但我不知道如何选择和修复模拟器的大小？

我创建了一个具有此功能的模拟器。

Name=SmallWithHighQuality / Target= Android 4.1 / Size of sd card=128MB 在皮肤部分，以相反的分辨率，我写 480*640

在 Android 虚拟设备管理器窗口中，我选择开始按钮，然后选择将显示缩放到真实设备，以相反的屏幕尺寸，我写 3。但是当我运行程序时，一个模拟器打开，其屏幕大于我的模拟器的屏幕创建的。为什么？

我要更改显示器 DPI 吗？我应该写什么而不是 Monitor DPI？

对不起，如果这是个愚蠢的问题。

感谢您的建议。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:17:41.630

在“设备定义”选项卡上打开 AVG 管理器，单击“创建新设备”，然后根据需要设置名称和分辨率，然后在右侧选择要设置的像素密度，还有更多选项可供选择需要。所有最好的伴侣

# excel - 比较两个 Excel 工作表并仅根据电子邮件地址列查找两者的唯一条目

> ID：13955255
> 
> 赞同：1
> 
> 时间：2012-12-19T15:08:33.503
> 
> 标签：excel

我有两个 Excel 工作表，其中包含我们附属公司的联系信息。我们提供两种不同的产品，戒指和吊坠，并为每种产品提供单独的表格，其中包含订购该产品的公司的附属联系信息。

我雇主当前的问题是重叠。我们的一些附属公司同时销售和营销吊坠和戒指，因此它们都在两个列表中。

我被要求过滤列表并为他们提供每个列表唯一的联系人列表，如刚刚出现在环会员列表中的联系人列表，以及刚刚出现在吊坠会员列表中的联系人列表列表。他们还要求提供一份同时出现在两个列表中的联系人列表。

由于是手动输入的，并非所有联系人信息都以标准化方式输入，例如，某些联系人在一个列表中具有中间首字母，而在另一个列表中没有，或者 North 在一个列表中缩写，但在另一个列表中没有等等。所以我需要根据电子邮件地址列比较列表。

任何帮助将不胜感激。

我是他们的网络开发人员，不做高级的 Excel 工作。我最后的手段是将表格导出为 csv 列表，将它们导入 MYSQL 数据库，然后编写一个快速脚本来分离和导出我需要的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T17:21:36.227

您有一个解决方案，但没有将其发布为答案，因此我建议您使用替代方案。

@BrOSs 建议为每张工作表设置一个数据透视表，我会将其开发为*工作表组合*。首先，确保来源是显而易见的（例如，添加一列，其中一个是 P，另一个是 R）。在示例中 P 和 R 是列标签，但如果移动到报告过滤器区域，则`F`可以过滤以显示 P 或 R 或​​两者：

![SO13955255 示例](../Images/529eb911acc5230722ac41e1b6e73b9b.png)

在行标签区域中添加更多字段可能是识别不匹配作为数据质量审查的一部分的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T17:13:39.727

这可以通过条件格式来完成。

将每个列表中的电子邮件复制并粘贴到新工作表中。假设 A 列代表列表 1，C 列代表列表 2。现在突出显示 A 列中的数据，

主页> 条件格式 > 新规则 > 使用公式确定要格式化的单元格。

一个公式框写入以下内容： =ISNA(MATCH(A2,$C$2:$C$20,0)) 假设 C 列中的数据限制为 20 行。对 C 列执行相同的操作 =ISNA(MATCH(C2,$A$2:$A$15,0)) 假设 A 列中的数据限制为 15 行。

现在单击格式按钮，选择您希望将独特单元格突出显示为的颜色，然后单击确定。

您的两列都突出显示了独特的单元格。

# c# - C# 使用 PsExec - 没有答案

> ID：13955257
> 
> 赞同：1
> 
> 时间：2012-12-19T15:08:39.093
> 
> 标签：c#, .net, psexec

直接从提示执行以下语句

```
\\my_ip -u my_user -p my_pass -w C:\ta33 tasklist 
```

返回预期的任务列表。但是在 C# 代码中使用相同的语句，例如

```
string executeCommand = "\\\\10.141.86.30 -u biebls -p 1krahsavs -w C:\\ta33 tasklist";
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = System.IO.Directory.GetCurrentDirectory() + "\\PsExec.exe";
psi.Arguments = executeCommand;
psi.UseShellExecute = false;
psi.RedirectStandardOutput = true;
psi.RedirectStandardError = true;
Console.WriteLine("File [" + psi.FileName + "] - Args [" + psi.Arguments + "]");
Process p = new Process();
p.StartInfo = psi;
p.Start();
StreamReader outputReader = p.StandardOutput;
StreamReader errorReader = p.StandardError;
p.WaitForExit(); 
```

等了十分钟后我没有得到任何答复。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:08:57.353

我很确定您的输出缓冲区已满并等待清空。人们在使用`Process`. 这是一些代码示例的快速浏览[http://csharptest.net/321/how-to-use-systemdiagnosticsprocess-correctly/](http://csharptest.net/321/how-to-use-systemdiagnosticsprocess-correctly/)

# objective-c - 返回时如何显示/隐藏更多导航控制器？

> ID：13955258
> 
> 赞同：1
> 
> 时间：2012-12-19T15:08:49.263
> 
> 标签：objective-c, uinavigationcontroller, navigation, uinavigationbar, uitabbar

我的标签栏有超过 6 个项目，当我单击 [更多] 项目时，它会显示其他项目与表格视图。

然后单击其中一项，我隐藏了导航栏的使用`setNavigationBarHidden:YES`，`viewDidLoad`并且我有一个自定义按钮单击以返回[更多]使用`popViewControllerAnimated:YES`。

当它回来时，导航栏仍然隐藏，我怎样才能在[更多]屏幕上显示导航栏恢复？（我需要[更多]中的编辑按钮）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:14:28.797

打电话`setNavigationBarHidden:NO animated:YES`之前，打电话`popViewControllerAnimated:YES`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-13T02:00:29.610

我将此添加到我的自定义标签栏控制器类的 viewdidAppear 中，这不是正确的方法，但我没有遇到任何问题

```
tabBarController!.moreNavigationController.isNavigationBarHidden = true
tabBarController!.tabBar.isHidden = true 
```

# jmeter - 如何在 JMeter 的日期范围内生成随机固定间隔？

> ID：13955259
> 
> 赞同：1
> 
> 时间：2012-12-19T15:08:52.957
> 
> 标签：jmeter

我有 StartDate（例如 2011-01-01）和 EndDate（例如 2011-12-31）。我所有的数据都放在这个范围内。

在测试计划中，我需要生成具有固定持续时间的随机间隔（对于 4 个案例：1、3、7 天和 1 个月长），它们放置在此日期范围 [2011-01-01; 2011-12-31]。这些案例中的每一个都必须具有定义的权重。

我应该如何获得具有随机开始日期和随机结束日期的固定间隔（并将这些随机日期放入 2 个变量中）？

我发现[了这个](http://justjmeter.blogspot.com/2012/04/2.html)java-script 的变体

初始脚本在这里：

```
var startDate = new Date();
startDate.setDate(1);
startDate.setMonth(0);
startDate.setYear(1991);
var startDateTime = startDate.getTime();

var endDate = new Date();
endDate.setDate(31);
endDate.setMonth(11);
endDate.setYear(2003);
var endDateTime = endDate.getTime();

var randomDate = new Date();
var randomDateTime = startDateTime+Math.random()*(endDateTime-startDateTime);
randomDate.setTime(randomDateTime);

var rndDate = randomDate.getDate();
var rndMonth = randomDate.getMonth() + 1;
var rndYear = randomDate.getFullYear();

if (rndDate.toString().length == 1)
rndDate = "0" + rndDate;
if (rndMonth.toString().length == 1)
rndMonth = "0" + rndMonth;

rndDate + "/" + rndMonth + "/" + rndYear; 
```

但是我需要生成固定间隔的随机开始日期（我称之为 ${RandomStartDate}），然后添加间隔的长度以获得它的结束日期（这个日期我称之为 ${RandomEndDate}）。

然后我将脚本更改为 1 天的间隔（1 天为 86400 秒）：

```
var startDate = new Date();
startDate.setDate(01);
startDate.setMonth(01);
startDate.setYear(2011);
var startDateTime = startDate.getTime();

var endDate = new Date();
endDate.setDate(31);
endDate.setMonth(12);
endDate.setYear(2011);
var endDateTime = endDate.getTime();

var randomSDate = new Date();
var randomSDateTime = startDateTime+Math.random()*((endDateTime - 86400) -startDateTime );
randomSDate.setTime(randomSDateTime);

var randomEDate = new Date();
var randomEDateTime = (randomSDateTime +  86400);    //add 1 day long interval (86400 s)
randomEDate.setTime(randomEDateTime);   //convert number format to string format of date
var rndSDate = randomSDate.getDate();
var rndSMonth = randomSDate.getMonth()+1 ;
var rndSYear = randomSDate.getFullYear();

var rndEDate = randomEDate.getDate();      
var rndEMonth = randomEDate.getMonth()+1 ;
var rndEYear = randomEDate.getFullYear();

if (rndSDate.toString().length == 1)      
rndSDate = "0" + rndSDate;
if (rndSMonth.toString().length == 1)
rndSMonth = "0" + rndSMonth;

if (rndEDate.toString().length == 1)      
rndEDate = "0" + rndEDate;
if (rndEMonth.toString().length == 1)
rndEMonth = "0" + rndEMonth;

var RandomStartDate = rndSYear + "-" + rndSMonth + "-" + rndSDate;
vars.put ("RandomStartDate", RandomStartDate);

var RandomEndDate = rndEYear + "-" + rndEMonth + "-" + rndEDate;
vars.put ("RandomEndDate", RandomEndDate); 
```

**但是这个脚本生成的 RandomEndDate 等于 RandomStartDate。** 如果我单独生成 RandomStartDate（没有与 RandomEndDate 连接的代码部分），则脚本运行良好。

请问你能帮帮我吗？怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:25:32.320

你可以用更少的代码在 Beanshell 中完成它：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;

calendar = Calendar.getInstance();
calendar.set(2011, 0, 1);
startTime = calendar.getTimeInMillis();
calendar.set(2012, 11, 31);
endTime = calendar.getTimeInMillis();
randomTime1 = startTime + (long)(Math.random()*(endTime-startTime));
randomTime2 = randomTime1 + (long)(Math.random()*(endTime - randomTime1)+86400000);

formatter = new SimpleDateFormat("yyyy-MM-dd");
calendar.setTimeInMillis(randomTime1);
vars.put("start", formatter.format(calendar.getTime()));
calendar.setTimeInMillis(randomTime2);
vars.put("end", formatter.format(calendar.getTime())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:47:12.157

对于这种情况，我会选择将复杂性放在 jMeter 之外，并创建一个 perl 脚本以根据您的要求生成 100 对日期，并使用[CSV Data Set Config 将](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)它们读入 jMeter 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:16:11.010

我找到了解决方案！

这是正确的脚本，它允许对具有固定长度（1 天长的间隔​​）的随机间隔进行建模，并获得 2 个变量开始和结束 - ${RandomStartDate} 和 ${RandomEndDate}：

```
var startDate = new Date();
startDate.setDate(01);
startDate.setMonth(01);
startDate.setYear(2011);
var startDateTime = startDate.getTime();

var endDate = new Date();
endDate.setDate(31);
endDate.setMonth(12);
endDate.setYear(2011);
var endDateTime = endDate.getTime();

var randomSDate = new Date();
var randomSDateTime = startDateTime+Math.random()*((endDateTime - 86400000) -startDateTime );
randomSDate.setTime(randomSDateTime);

var randomEDate = new Date();
var randomEDateTime = (randomSDateTime + 86400000);    //add 1 day long interval (86400000 ms)
randomEDate.setTime(randomEDateTime);   //convert number format to string format of date
var rndSDate = randomSDate.getDate();
var rndSMonth = randomSDate.getMonth()+1 ;
var rndSYear = randomSDate.getFullYear();

var rndEDate = randomEDate.getDate();      
var rndEMonth = randomEDate.getMonth()+1 ;
var rndEYear = randomEDate.getFullYear();

if (rndSDate.toString().length == 1)      
rndSDate = "0" + rndSDate;
if (rndSMonth.toString().length == 1)
rndSMonth = "0" + rndSMonth;

if (rndEDate.toString().length == 1)      
rndEDate = "0" + rndEDate;
if (rndEMonth.toString().length == 1)
rndEMonth = "0" + rndEMonth;

var RandomStartDate = rndSYear + "-" + rndSMonth + "-" + rndSDate;
vars.put ("RandomStartDate", RandomStartDate);

var RandomEndDate = rndEYear + "-" + rndEMonth + "-" + rndEDate;
vars.put ("RandomEndDate", RandomEndDate); 
```

我的错误是我认为时间是以**秒**为单位的，但它是以**毫秒为单位**的！

# ruby - 使用 Ruby 和 Mechanize 填写远程登录表单之谜

> ID：13955267
> 
> 赞同：3
> 
> 时间：2012-12-19T15:09:12.790
> 
> 标签：ruby, forms, mechanize

我正在尝试实现一个 Ruby 脚本，该脚本将接受用户名和密码，然后继续在另一个网站上的登录表单上填写帐户详细信息，然后返回然后点击链接并检索帐户历史记录。为此，我使用了 Mechanize gem。

我一直在关注[这里](http://mechanize.rubyforge.org/EXAMPLES_rdoc.html)的例子， 但我似乎仍然无法让它工作。我已经大大简化了这一点，试图让它部分工作，但一个据说简单的表格填写让我受不了。

这是我的代码：

```
# script gets called with a username and password for the site
require 'mechanize'

#create a mechanize instant
agent = Mechanize.new 

agent.get('https://mysite/Login.aspx') do |login_page|

    #fill in the login form on the login page
    loggedin_page = login_page.form_with(:id => 'form1') do |form|
        username_field = form.field_with(:id => 'ContentPlaceHolder1_UserName')
        username_field.value = ARGV[0]
        password_field = form.field_with(:id => 'ContentPlaceHolder1_Password')
        password_field.value = ARGV[1]

        button = form.button_with(:id => 'ContentPlaceHolder1_btnlogin')
    end.submit(form , button)

    #click the View my history link
    #account_history_page = loggedin_page.click(home_page.link_with(:text => "View My History"))

    ####TEST to see if i am actually making it past the login page
    #### and that the View My History link is now visible amongst the other links on the page
    loggedin_page.links.each do |link|
        text = link.text.strip
        next unless text.length > 0
        puts text if text == "View My History"
    end
    ##TEST 

end 
```

终端错误信息：

```
stackqv2.rb:19:in `block in <main>': undefined local variable or method `form' for main:Object (NameError)
from /usr/local/lib/ruby/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize.rb:409:in `get'
from stackqv2.rb:8:in `<main>' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T16:55:05.653

您不需要`form`作为参数传递给`submit`. `button`也是可选的。尝试使用以下内容：

```
loggedin_page = login_page.form_with(:id => 'form1') do |form|
    username_field = form.field_with(:id => 'ContentPlaceHolder1_UserName')
    username_field.value = ARGV[0]
    password_field = form.field_with(:id => 'ContentPlaceHolder1_Password')
    password_field.value = ARGV[1]
end.submit 
```

如果您确实需要指定用于提交表单的按钮，请尝试以下操作：

```
form = login_page.form_with(:id => 'form1')
username_field = form.field_with(:id => 'ContentPlaceHolder1_UserName')
username_field.value = ARGV[0]
password_field = form.field_with(:id => 'ContentPlaceHolder1_Password')
password_field.value = ARGV[1]

button = form.button_with(:id => 'ContentPlaceHolder1_btnlogin')
loggedin_page = form.submit(button) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:55:04.107

这是范围问题：

```
page.form do |form|
  # this block has its own scope
  form['foo'] = 'bar' # <- ok, form is defined inside this block
end

puts form # <- error, form is not defined here 
```

ramblex 的建议是不要在您的表单中使用块，我同意，这样就不会那么混乱了。

# ios - XCode 构建失败不显示错误

> ID：13955270
> 
> 赞同：1
> 
> 时间：2012-12-19T15:09:17.603
> 
> 标签：ios, xcode, build

我正在尝试构建我的应用程序。我运行它（直到最近运行良好），现在它不起作用，它没有给我任何错误，控制台中也没有任何东西。有什么想法可以找到问题吗？

编辑：发生的事情是我的产品名称以数字开头，它自动将我的捆绑包填充为 com.domain.-mwg 而不是带有连字符的数字。因此，我进入 info.plist 并在捆绑标识符上将其更改为 com.domain.5mwg 之后它就搞砸了。我尝试将 plist 改回来，但它仍然一团糟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:13:07.847

启用“异常断点”。

1.  在 Xcode 的左侧，选择“Breakpoint Navigator”。
2.  在此窗格的底部，单击“+”按钮并选择“添加异常断点”。

其余设置如下所示：

![异常断点](../Images/2b8d6e96d0ed366e0b384f321d243139.png)

# c# - 如何以编程方式检测 word(2003) 文档是否已损坏？

> ID：13955275
> 
> 赞同：2
> 
> 时间：2012-12-19T15:09:27.577
> 
> 标签：c#, ms-word, ms-office, office-interop

> **可能重复：**
> [如何以编程方式判断 Word 文档是否已损坏？](https://stackoverflow.com/questions/924128/how-to-programatically-tell-if-a-word-document-is-corrupt)

我想检查 word（.doc 二进制格式）文档是否使用 c# 损坏。我正在使用 Interop.Word 从现有 doc 文件生成 PDF 和 html，并希望检测和隔离损坏的 doc 文件以进行手动处理。如果文件损坏，Interop.Word 不会生成任何异常或事件，它只会显示一个用于选择正确编码的对话框。我使用标志“DisplayAlerts = Word.WdAlertLevel.wdAlertsNone”抑制所有对话框，因为在哪里停止进程执行。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:15:36.910

[阅读此处](http://zirmandli.wordpress.com/2007/07/04/read-word-doc-using-c/)描述的 Word 文档。如果文档损坏，您应该得到一个例外。（另请查看您问题下方评论中发布的问题）

# xcode - xcode interface builder和IOS模拟器的区别

> ID：13955276
> 
> 赞同：6
> 
> 时间：2012-12-19T15:09:29.703
> 
> 标签：xcode, interface-builder, ios-simulator

我是 Xcode 的新手，我在界面生成器和 iphone 模拟器之间遇到了问题

正如您在下面看到的，我为模拟器设置了 imageview 大小，但是一些按钮位置发生了变化，按钮文本消失了，甚至按钮也消失了。

[http://postimage.org/image/w9ej1c3z1/](http://postimage.org/image/w9ej1c3z1/)

我只是打开一个新项目并添加如下图所示的按钮，然后运行该项目。又是同样的事情！我做错了什么？

[http://postimage.org/image/6gl55tehd/](http://postimage.org/image/6gl55tehd/)

xcode 版本为：4.5.2

ios模拟器版本为6.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:51:08.737

请在选择时单击视图控制器底部的“应用视网膜 4 外形尺寸”按钮来验证您的设计...

如果您单击该按钮，它将更改为模拟器大小，您可以检查设计

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:11:43.833

您的界面构建器设置为 iPhone 5 的分辨率。您的模拟器设置为 iPhone 4S 的分辨率。在模拟器菜单栏中选择`Device -> Hardware - iPhone 5 (Retina)`，您将看到其他按钮。

这是一个很好的教程，它解释了如何同时支持 iPhone 5 和 <= iPhone 4S 的屏幕分辨率。[在 Interface Builder 中使用 iOS 6 自动布局约束](http://www.techotopia.com/index.php/Working_with_iOS_6_Auto_Layout_Constraints_in_Interface_Builder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:12:13.707

看起来您的视图适用于 4" 屏幕，但您正在 3.5" 模拟器中运行。您可能只需要稍微调整一下自动调整大小即可使其正常工作。

# asp.net - ASP.NET AJAX CollapsiblePanelExtender - 如何更改垂直展开方向？

> ID：13955277
> 
> 赞同：1
> 
> 时间：2012-12-19T15:09:32.977
> 
> 标签：asp.net, ajax, collapsiblepanelextender

我在购物页面上使用了可折叠面板扩展器。我用它来显示/隐藏特别优惠。包含这些的面板固定在页面底部。我有面板工作（扩展和收缩），但我需要更改面板以使其向下折叠而不是向上折叠。默认的折叠行为是向上折叠。这给我带来了一个问题，因为折叠面板后特价面板和页面底部之间存在间隙。

我的代码如下：

```
<!--teaser panel-->
    <asp:UpdatePanel ID="upTeaser" runat="server" UpdateMode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="lbShowHideTeaserPanel" EventName="Click"/>
        </Triggers>
        <ContentTemplate>
            <asp:AlwaysVisibleControlExtender ID="AlwaysVisibleControlExtender1" runat="server"
             TargetControlID="pnlTeaserContainer" 
             VerticalSide="Bottom" 
             HorizontalSide="Center"
             ScrollEffectDuration=".1"
             >
            </asp:AlwaysVisibleControlExtender>
            <asp:CollapsiblePanelExtender ID="CollapsiblePanelExtender1" runat="server" CollapseControlID="lbShowHideTeaserPanel"
                CollapsedText="[+] Show Special Offers" ExpandControlID="lbShowHideTeaserPanel"
                ExpandedText="[-] Hide Special Offers" TargetControlID="pnlTeaserContent" TextLabelID="lbShowHideTeaserPanel"
                SuppressPostBack="true" >
            </asp:CollapsiblePanelExtender>
            <asp:Panel ID="pnlTeaserContainer" runat="server" CssClass="teaserContainer">
                <asp:Panel ID="pnlTeaserCollapser" runat="server">
                    <div style="text-align:right;">
                        <asp:LinkButton ID="lbShowHideTeaserPanel" runat="server" 
                        OnClick="lbShowHideTeaserPanel_Click"  
                        Text="[-] Hide Special Offers" style="color:#ff761b;" ></asp:LinkButton>
                    </div>
                </asp:Panel>
                <asp:Panel ID="pnlTeaserContent" runat="server" Visible="true">
                    <asp:Literal ID="litTeaserText" runat="server"></asp:Literal>
                </asp:Panel>
            </asp:Panel>
        </ContentTemplate>
    </asp:UpdatePanel>
    <!--end teaser panel--> 
```

基本上我需要做的是防止面板向上塌陷后出现间隙；类似于“CollapseDirection="up"，或者如果无法更改折叠方向，则在折叠后将面板重新定位到屏幕底部。

谢谢！

# c# - Windows 8 空白应用程序 + DEP0700 错误

> ID：13955297
> 
> 赞同：7
> 
> 时间：2012-12-19T15:10:47.467
> 
> 标签：c#, visual-studio, windows-8, windows-store-apps, windows-store

我发现一些帖子提到了这个错误，但没有一个有帮助。我创建了一个新的 C# Windows Store 项目，当我尝试在模拟器上构建和运行它时，我在 Visual Studio 中收到以下错误：

```
Error   1   Error : DEP0700 : Registration of the app failed. error 0x80072EE4: The Visual Elements extension failed while processing the Notification element. (0x80073cf6)    TestDeploy 
```

以下是运行另一篇文章中提到的 Power Shell 命令的详细信息：

```
12/18/2012 3:03:59 PM   404 Error   error 0x80073CF6: AppX Deployment operation failed. The specific error text for this failure is: error 0x80072EE4: The Visual Elements extension failed while processing the Notification element.  
12/18/2012 3:03:59 PM   401 Error   Deployment Register operation on Package cc8bb3bb-d444-4dbe-ae12-64684b12b727_1.0.0.0_neutral__2awvr17ztw74c from:  (C:\Users\myself\documents\visual studio 2012\Projects\TestDeploy\TestDeploy\bin\Debug\AppX\AppxManifest.xml)  failed with error 0x80073CF6\. See http://go.microsoft.com/fwlink/?LinkId=235160 for help diagnosing app deployment issues.   
12/18/2012 3:03:59 PM   605 Information The last successful state reached was PackagesInUseClosed.  
12/18/2012 3:03:59 PM   300 Error   error 0x80073CF6: Cannot register the cc8bb3bb-d444-4dbe-ae12-64684b12b727_1.0.0.0_neutral__2awvr17ztw74c package due to the following error: Package could not be registered.
.   
12/18/2012 3:03:59 PM   316 Error   error 0x80072EE4: Cannot register the cc8bb3bb-d444-4dbe-ae12-64684b12b727_1.0.0.0_neutral__2awvr17ztw74c package because the following error was encountered during the registration of the windows.visualElements extension: <Error message string not found>.    
12/18/2012 3:03:59 PM   306 Error   error 0x80072EE4: While installing the cc8bb3bb-d444-4dbe-ae12-64684b12b727_1.0.0.0_neutral__2awvr17ztw74c package, the system failed to register the windows.visualElements extension due to the following error: <Error message string not found>.    
12/18/2012 3:03:59 PM   5092    Error   error 0x80072EE4: The Visual Elements extension failed while processing the Notification element.   
12/18/2012 3:03:57 PM   10002   Information Creating Resiliency File C:\ProgramData\Microsoft\Windows\AppRepository\4850558d-7f7f-4109-9376-3b78bf5acc86_S-1-5-21-1715567821-179605362-839522115-27106_1.rslc for Register Operation on Package cc8bb3bb-d444-4dbe-ae12-64684b12b727_1.0.0.0_neutral__2awvr17ztw74c.    
12/18/2012 3:03:57 PM   603 Information Started deployment Register operation on a package with main parameter: file:///C:/Users/myself/documents/visual%20studio%202012/Projects/TestDeploy/TestDeploy/bin/Debug/AppX/AppxManifest.xml. See http://go.microsoft.com/fwlink/?LinkId=235160 for help diagnosing app deployment issues.   
12/18/2012 3:03:57 PM   301 Information The calling process is C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe 
```

有任何想法吗？我已经完全控制了项目中的每个人，多次重新启动，尝试重新安装 Visual Studio，并以管理员身份运行 Visual Studio。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T16:48:48.940

根据我发现的不同谷歌搜索的建议，我通过杀死并重新启动 explorer.exe 来“工作”。对我来说真的没有意义，或者似乎工作可靠，但至少有时它确实有效...... oO

*编辑*

一个更有效的解决方案是重新安装 Visual Studio 2012 和安装 Visual Studio Update 1 的某种组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T22:22:28.827

我遇到了同样的错误，在我的情况下，循环 explorer.exe 和卸载/重新安装 Studio 2012 Ultimate with Update 3 都不起作用。

起作用的是使用“以管理员身份运行”启动 Visual Studio 2012

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:26:44.653

似乎，这个问题必须做一些事情来安装应用程序到本地机器和模拟器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T08:57:31.587

我的情况是我复制了一个 WP 8.1 项目并将一些代码合并到复制的项目中。完成合并后，当我将它部署到模拟器时，我收到“无法注册包”消息。

但我原来的 WP 8.1 项目在模拟器上成功运行。

根本原因是我删除了一些应用程序徽标 png 图像。VS2013 不会告诉你图像丢失但显示“无法注册包”。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-02T15:51:00.727

`Add-AppDevPackage.ps1`在卸载使用 VS 安装的自定义应用程序并尝试通过 VS 或直接使用脚本重新安装新版本后，这发生在我身上

虽然这不是您想听到的，但重新启动为我解决了这个问题。我尝试杀死资源管理器进程并如上所述重新启动它，但这对我不起作用。

# wcf - wsHttpBinding（使用 https 和 aspNetCompatibilityEnabled 进行路由）元数据错误 302

> ID：13955298
> 
> 赞同：3
> 
> 时间：2012-12-19T15:10:48.480
> 
> 标签：wcf, https, basichttpbinding, wshttpbinding

我正在开发一个 WCF 服务，该服务与带有 https 端口的 ASP.NET MVC 2 应用程序一起运行，该端口已使用`webMatrix-ssl`证书进行配置。该服务在浏览器中完美运行，也可以下载 wsdl。但是，当我尝试将服务加载到`wcftestclient`工具以及我自己的客户端时，出现以下错误。

```
Error: Cannot obtain Metadata from 'localhost:44300/MyService' If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error    URI: localhost:44300/MyService    Metadata contains a reference that cannot be resolved: 'localhost:44300/MyService'.    The remote server returned an unexpected response: (302) Found.    Too many automatic redirections were attempted.HTTP GET Error    URI: localhost:44300/MyService    There was an error downloading 'localhost:44300/MyService'.    The request failed with the error message:--" 
```

我已经添加了`aspNetCompatibilityEnabled="true"`wcf 服务路由的属性，如果该属性已被删除，一切正常。最初，此服务已配置为`basicHttpBinding`& 有同样的问题。读完这篇[文章](http://seroter.wordpress.com/2010/09/19/lesson-learned-wcf-routing-service-and-the-basichttpbinding/)后，我已经更改`wshttpBinding`为怀疑绑定也可能是问题，仍然遇到同样的问题，下面是我的`web.config`。

你们中的任何人都可以帮我修复这个吗？

```
<system.serviceModel>    
    <extensions>
      <behaviorExtensions>
        <add name="ExceptionBehavior" type="ServiceExceptionHander.ExceptionHandlerBehaviorExtension, ServiceExceptionHandler" />
      </behaviorExtensions>
    </extensions>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true" />
          <ExceptionBehavior />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="ServiceImplementation.MyService" behaviorConfiguration="ServiceBehavior">
        <endpoint binding="wsHttpBinding" bindingConfiguration="securityBinding" contract="ServiceContracts.IMyServiceContracts"/>    
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>    
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="securityBinding">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>          
        </binding>
      </wsHttpBinding>   
    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true">
      <serviceActivations>
        <add factory="System.ServiceModel.Activation.ServiceHostFactory" service="ServiceImplementation.MyService" relativeAddress="MyService.svc"/>
      </serviceActivations>
    </serviceHostingEnvironment>    
</system.serviceModel> 
```

# android - 找到同一个文件

> ID：13955303
> 
> 赞同：0
> 
> 时间：2012-12-19T15:11:02.083
> 
> 标签：android, file, compare, byte

考虑文件夹中的 1000 个文件。现在我想在该文件夹中找到相同的文件。

我逐字节比较厌倦了它，但花了很长时间才完成。这是代码

```
fs1=new BufferedInputStream(new FileInputStream(file1));
fs2=new BufferedInputStream(new FileInputStream(file2));

int b1,b2;
do
{
b1=fs1.read();
b2=fs2.read();
    if(b1!=b2)
    {
        match=false;    
        break;
    }
}while(found && b1 !=- 1);

if(match)
{
    Log.e("cyb", "Matched");
} 
```

还有其他方法可以找到相同的文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:13:05.360

优化代码应该做的第一件事是检查比较文件的大小。如果大小不同，那么将文件读入内存并逐字节比较它们是没有意义的。

您可以做的另一件事是首先为每个文件计算 CRC，然后仅对具有相同 CRC（和相同长度）的文件进行实际比较。如果您要处理许多相同长度的不同文件，这将极大地限制昂贵的逐字节比较的数量。

# c# - request.GetResponse 总是给出一个超时

> ID：13955306
> 
> 赞同：12
> 
> 时间：2012-12-19T15:11:13.043
> 
> 标签：c#, .net, httpwebrequest, timeout

我为一个程序创建了一个函数，当请求类型为时它确实有效`GET`，如果是`POST`，它总是在行上产生超时异常（并且没有达到 50s 的超时）`HttpWebResponse response = (HttpWebResponse)request.GetResponse();`
我尝试了很多东西，但我没有找到原因，这里有人知道吗。

**编辑：让它工作，如果有人感兴趣：[https](https://gist.github.com/4347248)**

://gist.github.com/4347248 任何帮助将不胜感激。

我的代码是：

```
public ResRequest request(string URL, RequestType typ, CookieCollection cookies, string postdata ="", int timeout= 50000)
    {
        byte[] data;
        Stream req;
        Stream resp;

        HttpWebRequest request = WebRequest.Create(URL) as HttpWebRequest;
        request.Timeout = timeout;
        request.ContinueTimeout = timeout;
        request.ReadWriteTimeout = timeout;
        request.Proxy = new WebProxy("127.0.0.1", 8118);
        request.Headers.Add(HttpRequestHeader.AcceptLanguage, "de");
        request.Headers.Add("UA-CPU", "x86");

        request.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
        request.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; WOW64; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.5.21022; .NET CLR 3.5.30729; .NET CLR 3.0.30618) ";
        request.CookieContainer = new CookieContainer();
        request.CookieContainer.Add(cookies);
        if (typ == RequestType.POST)
        {
            data = System.Text.Encoding.Default.GetBytes(postdata);
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded";
            request.ContentLength = data.Length;
            req = request.GetRequestStream();//after a few tries this produced a Timeout error
            req.Write(data, 0, data.Length);
            req.Close();
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();//This line produces a Timeout Exception
            resp = response.GetResponseStream();

            if ((response.ContentEncoding.ToLower().Contains("gzip"))) 
            {
                resp = new System.IO.Compression.GZipStream(resp, System.IO.Compression.CompressionMode.Decompress);
            } else if ((response.ContentEncoding.ToLower().Contains("deflate"))) {
                resp = new System.IO.Compression.DeflateStream(resp, System.IO.Compression.CompressionMode.Decompress);
            }

            return new ResRequest() { result = new System.IO.StreamReader(resp, System.Text.Encoding.UTF8).ReadToEnd(), cookies = response.Cookies, cstring = cookiestring(response.Cookies) };

        }
        else
        {
            request.Method = "GET";

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            resp = response.GetResponseStream();

            if ((response.ContentEncoding.ToLower().Contains("gzip")))
            {
                resp = new System.IO.Compression.GZipStream(resp, System.IO.Compression.CompressionMode.Decompress);
            }
            else if ((response.ContentEncoding.ToLower().Contains("deflate")))
            {
                resp = new System.IO.Compression.DeflateStream(resp, System.IO.Compression.CompressionMode.Decompress);
            }

            return new ResRequest() { result = new System.IO.StreamReader(resp, System.Text.Encoding.UTF8).ReadToEnd(), cookies = response.Cookies, cstring = cookiestring(response.Cookies) };
        }

    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T16:22:51.247

那么它是`req.GetRequestStream()`每次都挂起，还是“尝试几次”然后挂起？

如果它工作了几次然后挂起，则可能是您没有正确关闭请求，这导致您的连接用完。确保`Close()`和/或您正在创建`Dispose()`的`HttpWebResponse`对象和所有 Streams 和 Readers。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-05T13:11:34.197

你必须使用 response.Dispose();

方法结束

# python - 从环境变量中获取参数

> ID：13955319
> 
> 赞同：4
> 
> 时间：2012-12-19T15:12:09.120
> 
> 标签：python, environment-variables

我想从我的脚本中读取新的环境变量。我正在尝试通过 ssh 导出这个 var。我试过了

```
test = "qwerty"
cmd = "export my_password=%s;python script.py" % test 
```

通过 ssh 执行此命令。在脚本中：

```
if os.environ.has_key("my_password"): print "ok"
else: print "failed" 
```

结果我“失败了”。我应该如何设置这个环境变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:14:34.033

只需在命令之前添加它而不导出它：

```
cmd = "my_password=%s python script.py" % test 
```

# php - 如何使用 file_get_contents 发送文件？

> ID：13955323
> 
> 赞同：1
> 
> 时间：2012-12-19T15:12:15.640
> 
> 标签：php, rest, file-get-contents

> **可能重复：**
> [使用 file_get_contents 上传文件](https://stackoverflow.com/questions/4003989/upload-a-file-using-file-get-contents)

我想在另一台服务器上发送 jpg 文件`file_get_contents`？

我将它用于`POST`数据，但如果我将 jpg 文件放在`data`数组中，则不起作用

```
$postdata = http_build_query(
    array(
        'collection' => 'test',
        'data' =>  array('name'=>'Test name','Surname'=>'Test Surname')
    )
);

$opts = array(
    'http' => array(
        'method' => "POST",
        'header' => "Connection: close\r\n".
                "Content-type: application/x-www-form-urlencoded\r\n".
                "Content-Length: ".strlen($postdata)."\r\n",
        'content' => $postdata
    )
);

$context = stream_context_create($opts);

$result = file_get_contents('http://localhost/test/index.php/save-doc', false, $context); 
```

# ruby-on-rails - 如何使用 twitter 引导图标而不是链接？

> ID：13955325
> 
> 赞同：2
> 
> 时间：2012-12-19T15:12:16.890
> 
> 标签：ruby-on-rails, twitter-bootstrap, icons, ruby-on-rails-3.2

> **可能重复：**
> [在 Ruby on Rails 3 中使用 Twitter Bootstrap 图标作为链接的最佳方式？](https://stackoverflow.com/questions/10764862/best-way-to-use-twitter-bootstrap-icons-as-links-in-ruby-on-rails-3)

我有以下代码来删除一个项目：

```
 <%= link_to "delete", sense,   :method => :delete,
                                   :confirm => "You sure?" %> 
```

如何将 :method 和 :confirm 附加到`icon-remove`boostrap 中使用的。我想要类似的东西：

```
 <%= link_to <i class="icon-search"></i>, sense,   :method => :delete,
                                                      :confirm => "You sure?" %> 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:17:12.630

```
<%= link_to sense, :method => :delete, :confirm => "You sure?" do %>
  <i class="icon-search"></i>
<% end %> 
```

这应该这样做。

# dynamics-nav - 我如何要求在资产净值页面上必填字段？

> ID：13955327
> 
> 赞同：5
> 
> 时间：2012-12-19T15:12:19.280
> 
> 标签：dynamics-nav

似乎 NAV 的基本性质是抵制要求填充字段是强制性的。对于我们的业务逻辑，必须填充某些字段才能使数据有效。例如，客户记录必须至少有姓名和电话号码。我搜索了很多地方，但没有找到合适的解决方案。那么如何实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:23:29.400

在努力寻找一种简洁的方法来要求填充卡片上的某些字段之后，我想出了以下内容，并且它（到目前为止）对我有用。我开始感觉到 NAV 并不意味着必须有必填字段，但我需要它们用于我们的业务逻辑。无论如何，我们走吧……

**第一步：** - 我们有一个用于各种验证逻辑的代码单元，我在其中添加了读取自定义表格的功能，该表格列出了必填表格及其字段。该函数采用表号、关键字段和“创建模式”。它返回一个文本“完成状态”值。我找到了我正在验证的记录的表格。我遍历必填字段，如果未填充该字段，我将其添加到不完整字段列表中。如果未完成字段列表为空，则完成状态为“完成”。如果填充了不完整字段的列表，则会显示一条消息，指示缺少的字段，并允许用户选择取消创建新记录或保留在（新的或现有的）记录上并输入缺少的数据，并且完成状态设置为“删除” 取消创建，或“返回”以保留记录。逻辑如下：

```
CheckMadatoryFields(TableNumber : Integer;KeyField : Code[10];CreateMode : Boolean)   Completion Status : Text[30]

// Read the 'LockoutFields' table to find the manditory fields for the table passed in.
LockoutFields.RESET;
LockoutFields.SETRANGE("Table No.", TableNumber);
LockoutFields.SETFILTER("Filter ID", 'MANDITORY_FIELD');

// Get a record reference for the table passed in
RecRef.OPEN(TableNumber);
RecRef.SETVIEW('WHERE("No." = FILTER(' + KeyField + '))');

// Set this to done, i.e. data is complete (don't delete by mistake).
CompletionStatus := 'done';

IF RecRef.FINDFIRST THEN BEGIN

// Check the record's manditory field(s) listed in the 'LockoutFields' table to see if they're blank.
  IF LockoutFields.FINDSET THEN BEGIN
    REPEAT
    FldRef := RecRef.FIELD(LockoutFields."Field No.");

    IF FORMAT(FldRef.VALUE) = '' THEN
      FldList := FldList + ' - ' + FldRef.CAPTION + '\';

  UNTIL LockoutFields.NEXT = 0;

END;

IF FldList <> '' THEN BEGIN
  // If creating the record, add the 'Cancel Create' message, otherwise don't.
  IF CreateMode THEN
    DeleteRecord := CONFIRM(Text_ManditoryField + '\' + FldList + '\' + Text_CancelCreate, FALSE)
  ELSE BEGIN
    DeleteRecord := FALSE;
    MESSAGE(Text_ManditoryField + '\' + FldList, FALSE);
  END;

  // Return a 'delete' status when deleting, or a 'return' status to stay on the record.
  IF DeleteRecord THEN
    CompletionStatus := 'delete'
  ELSE
    CompletionStatus := 'return';
  END;
END;

RecRef.CLOSE;` 
```

**第 2 步：** - 在您要检查必填字段的卡上，在我的情况下是客户卡，我添加了一个函数来调用上述代码单元中的验证函数。我还在 OnQueryClosePage 触发器中添加了逻辑来调用我的本地函数。这一切都很好，因为用户无法在不填写必填字段或取消创建客户的情况下关闭客户卡，**除非**用户使用 Ctrl+PgUp 或 Ctrl+PgDn，这会将它们从记录中删除。诀窍是将正确的逻辑放在 OnNextRecord 触发器中，以便执行验证并且 Ctrl+PgUp 或 Ctrl+PgDn 仍然起作用（注意：我在 mibuso 的某个地方找到了这个位，非常感谢！）。逻辑如下：

```
OnNextRecord(...)
IF CheckManditoryFields = TRUE THEN BEGIN
  Customer := Rec;
  CurrentSteps := Customer.NEXT(Steps);
  IF CurrentSteps <> 0 THEN
    Rec := Customer;
  EXIT(CurrentSteps);
END;

OnQueryClosePage(...)
EXIT(CheckManditoryFields);

CheckMandatoryFields() ExitValue : Boolean
// Check for manditory fields on this table.  If there are missing manditory
// fields, the user can cancel this create, in which case, a 'TRUE' value is
// returned and we'll delete this record.

ExitValue := TRUE;

IF Rec."No." <> '' THEN BEGIN  // This is blank if user quits immediately after page starts.
  CompletionStatus := HHValidation.CheckManditoryFields(18,Rec."No.",CreateMode);

  IF (CompletionStatus = 'delete')
  AND (CreateMode = TRUE) THEN  // User cancelled create (not edit), delete the record and exit.
    Rec.DELETE(TRUE)
  ELSE
    IF CompletionStatus = 'done' THEN  // User completed manditory fields, OK to exit.
      ExitValue := TRUE
    ELSE
      ExitValue := FALSE;  //User did not complete manditory fields and wants to return and add them.
END; 
```

我想就是这样。自定义表的详细信息实际上取决于您要如何对其进行编码。验证码单元可以是您想要的。使用表格允许在不更改任何逻辑的情况下添加或删除必填字段，并且这种“通用”验证逻辑可以放在任何页面上。关键是卡上的两个触发器，并且有一个通用的验证例程可以调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T11:11:37.453

我在表单（经典客户端）上使用了此代码，但 OnNextRecord 代码中有一个错误。

```
OnNextRecord(...)
IF CheckManditoryFields = TRUE THEN BEGIN
  Customer := Rec;
  CurrentSteps := Customer.NEXT(Steps);
  IF CurrentSteps <> 0 THEN
    Rec := Customer;
  EXIT(CurrentSteps);
END; 
```

您还应该涵盖 CheckMandatoryFields 返回 FALSE 的情况。否则，当我请求下一条记录时，它会显示一条空记录。它应该是这样的：

```
OnNextRecord(...)
IF CheckManditoryFields = TRUE THEN BEGIN
  Customer := Rec;
  CurrentSteps := Customer.NEXT(Steps);
  IF CurrentSteps <> 0 THEN
    Rec := Customer;
  EXIT(CurrentSteps);
END ELSE
  EXIT(Steps); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T09:31:42.897

OnNextRecord 函数中还有另一个错误：

```
 OnNextRecord(...)
    IF CheckManditoryFields = TRUE THEN BEGIN
      Customer := Rec;
      CurrentSteps := Customer.NEXT(Steps);
      IF CurrentSteps  0 THEN
        Rec := Customer;
      EXIT(CurrentSteps);
    END ELSE
      EXIT(Steps); 
```

在页面（或表单）的源表上设置的过滤器不会复制到执行步骤的记录中。因此，您可以导航到不在您的过滤器集中的记录。

相反，将 Rec 分配给客户，您应该复制它：

```
 OnNextRecord(...)
    IF CheckManditoryFields THEN BEGIN
      Customer.COPY(Rec);
      CurrentSteps := Customer.NEXT(Steps);
      IF CurrentSteps  0 THEN
        Rec := Customer;
      EXIT(CurrentSteps);
    END ELSE
      EXIT(Steps); 
```

# objective-c - Objective-C浮点加法错误

> ID：13955329
> 
> 赞同：1
> 
> 时间：2012-12-19T15:12:24.897
> 
> 标签：objective-c, floating-point

> **可能重复：**
> [Objective-C 中的浮点数问题](https://stackoverflow.com/questions/1193554/trouble-with-floats-in-objective-c)

我已将这个问题分解为尽可能简单。随意尝试相同的事情并告诉我您是否遇到相同的错误以及您可能有什么解决方案。我已经在几台电脑上试过了。

```
float total = 200000.0f + 154196.8f;
NSLog(@"total: %f", total); 
```

输出是：

```
total: 354196.812500 
```

如果有人有任何合乎逻辑的解释，请随时分享。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T15:17:38.487

我建议你刷上你的花车

[http://www.altdevblogaday.com/2012/05/20/thats-not-normalthe-performance-of-odd-floats/](http://www.altdevblogaday.com/2012/05/20/thats-not-normalthe-performance-of-odd-floats/)

如果您需要更高的精度，请使用双精度。

另外[http://randomascii.wordpress.com/2012/03/08/float-precisionfrom-zero-to-100-digits-2/](http://randomascii.wordpress.com/2012/03/08/float-precisionfrom-zero-to-100-digits-2/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T15:21:12.733

请参阅[每个程序员应该了解的浮点运算知识](http://floating-point-gui.de/)，以获得所有深入的理解。简短的回答是，所有浮点表示对其精度都有限制，并且可以用少量十进制数字表示的事物可能无法用少量二进制数字表示（特别是不能以浮点格式表示） ）。

请注意，虽然`double`可以改善事情，但它不是灵丹妙药。有小的舍入误差是很常见的，即使是`double`. 当您期望 2 时，您可能很容易得到 1.99999999。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T15:20:23.080

暗示：

```
long double total = 200000.0 + 154196.8;
NSLog(@"total: %Lf", total); 
```

在我的机器上打印正确的值。
一个 32 位浮点数有一个 23 位尾数，最接近的值为 0.5+0.25+0.125。
您应该使用更多位来获得正确的表示。

# .net - XmlSerializer 是否可以支持循环引用？

> ID：13955330
> 
> 赞同：2
> 
> 时间：2012-12-19T15:12:25.443
> 
> 标签：.net, xml-serialization, circular-reference

我正在使用 .NET`XmlSerializer`类将 XML 字符串写入 StringWriter（不是 WCF 或 JSON 或其他任何涉及服务的东西）。

经过数小时试图找出为什么我`There was an error generating the XML document`在调用后出现异常后`XmlSerializer.Serialize()`，我终于发现它涉及循环引用。我的课程如下所示：

```
class Table
{
    public List<Columns> Columns {get; set;}
}

class Column
{
    public Table Table {get; set;}
} 
```

如您所见，一个表有一个列集合，但该集合中的每一列也包含对其父表的引用。

***我***不想在序列化过程中忽略该属性。我希望能够反序列化它而不必重建引用。当我使用 WCF 时，有一种方法可以通过网络保留引用以减小 XML 的大小。当然，.NET 提供了一些类似的方法来将循环关系序列化为 XML，而不会损害 XML 本身的完整性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:31:16.833

不，`XmlSerializer`不支持这个。您提到 WCF：WCF 并没有真正使用`XmlSerializer`（除非您的类型明确标记为此类）-它更喜欢使用`DataContractSerializer`，并且`DataContractSerializer` *可以*支持循环引用，但只能在构造时启用标志：

```
var serializer = new DataContractSerializer(typeof(Foo),
    new DataContractSerializerSettings
{
    PreserveObjectReferences = true
}); 
```

请注意，`DataContractSerializerSettings`仅在 .NET 4.5 及更高版本中；在此之前，同样适用于构造函数重载（`preserveObjectReferences`参数）。

注意`XmlSerializer`和`DataContractSerializer`不是 1:1 兼容的；他们在许多微妙的方面表现不同。

# php - 使用 CodeIgniter 在子文件夹中路由控制器

> ID：13955335
> 
> 赞同：22
> 
> 时间：2012-12-19T15:12:35.203
> 
> 标签：php, codeigniter, codeigniter-2

因为我想分离系统的前端和后端。我在控制器内创建了 2 个文件夹作为前端和后端

下面是我的控制器文件夹的结构

```
controller
 --frontend
   ---store.php
   ---processing.php
   ---profile.php
   ---authenticate.php
   ---register.php 

 --backend
   ---authenticate.php
   ---stats.php
   ---users.php
   ---property_manage.php
   ---register.php 
```

我可以使用

```
frontend/store/add
frontend/store/manage
......

backend/stats/sales
backend/stats/payments
..... 
```

但我想从 url 中删除前端和后端段。

我检查了 codeigniter 中的路由功能，但据我所知，我需要单独指定每条路由。由于我有大约 12 个控制器，每个控制器都有大约 10 -15 个功能，我可能必须为路由指定每个功能。

有没有其他有效的方法来实现使用路由或任何其他方式？（不使用任何 htaccess）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T15:15:35.547

做这个：

```
$route['store/(:any)'] = 'frontend/store/$1';
$route['processing/(:any)'] = 'frontend/processing/$1';
$route['profile/(:any)'] = 'frontend/profile/$1'; 
```

后端相同：

```
$route['backend/(:any)'] = 'backend/authenticate/$1'; 
```

您不必为控制器的每个功能在 routes.php 中创建每个规则，如上所述，每个控制器一个规则就足够了。

[URI 路由：CodeIgniter 用户指南](https://www.codeigniter.com/user_guide/general/routing.html#uri-routing)

`$1`表示第一个表达式，这里`(:any)`是表达式，每个规则可以有多个表达式，表达式表示为`$1`，`$2`以此类推。

同样，`(:num)`将匹配仅包含数字`(:any)`的段，将匹配包含任何字符的段，`(\d+)`将匹配任何数字，`([a-z]+)`将匹配任何字母文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-25T07:43:54.150

对于前端，您可以在 routes.php 中添加：

```
$this->set_directory( "frontend" ); 
```

所以在浏览器 URL 中，不需要包含“前端”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:16:34.110

您必须能够以某种方式区分前端和后端。也许设置一个路由，将任何带有“admin”的uri转发到后端，而将任何没有“admin”的uri转发到前端。

# android - Android：来自相机意图的位图检索错误的高度和宽度数据

> ID：13955338
> 
> 赞同：2
> 
> 时间：2012-12-19T15:12:37.093
> 
> 标签：android

我`CameraIntent`在我的应用程序中使用，但应用程序中的照片与保存在 SDCard 上的照片的分辨率不同。

我正在使用以下代码：

```
 Intent mCameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            mCameraIntent.putExtra("android.intent.extras.CAMERA_FACING", 1);
            startActivityForResult(mCameraIntent, mCameraRequest);

        protected void onActivityResult(int requestCode, int resultCode, Intent data)
        {
                if(requestCode == mCameraRequest)
                {
                    Bitmap photo = (Bitmap)data.getExtras().get("data");

                    int width = photo.getWidth();
                    int height = photo.getHeight();

                }
        } 
```

width 的值为 320，height 的值为 200，在 SDCard 上照片的分辨率为 2592x1552。我需要确切的宽度和高度才能将照片调整为所需的分辨率。我做错了什么？`getWidth()`和`getHeight()`返回错误的值还是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:23:52.767

`Bitmap`您收到的是`onActivityResult`缩略图。

如果您想访问实际文件，您应该提供希望保存图像的 URI，并带有[EXTRA_OUTPUT](http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_OUTPUT)意图额外：

```
Intent mCameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
mCameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, outputUri);
mCameraIntent.putExtra("android.intent.extras.CAMERA_FACING", 1);
startActivityForResult(mCameraIntent, mCameraRequest); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:24:38.860

来自 android.provider.MediaStore.ACTION_IMAGE_CAPTURE 的 javadoc

```
/** The caller may pass an extra EXTRA_OUTPUT to control where this image will be written. If
* the EXTRA_OUTPUT is not present, then a small sized image is returned as a Bitmap object    in
* the extra field. This is useful for applications that only need a small image. If the
* EXTRA_OUTPUT is present, then the full-sized image will be written to the Uri value of
* EXTRA_OUTPUT.
**/ 
```

正如 javadoc 中提到的：您会收到一个**小**图像。所以我建议使用 EXTRA_OUTPUT 并从存储在 sdcard 上的位图中获取大小。（请参阅[BitmapFactory.Options](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)仅获取图像的大小）

# c# - Keyboard.Focus 不适用于 WPF 中的文本框

> ID：13955340
> 
> 赞同：24
> 
> 时间：2012-12-19T15:12:51.430
> 
> 标签：c#, wpf, xaml, textbox, focus

我正在努力解决在 wpf 中看起来如此简单的问题，但我还没有发现为什么我不能让我的应用程序按照我的计划运行。

当用户按下 ctrl+f 时，我的 wpf 应用程序中会弹出一个小搜索框。我想要的只是插入符号在搜索框文本框中闪烁，准备好接受任何用户输入，而无需用户单击它。这是文本框的 xaml 代码，它是可见的、启用的、可点击测试的、可停止的和可聚焦的。

```
 <TextBox x:Name="SearchCriteriaTextBox" Text="{Binding SearchCriteria}" Focusable="True" IsEnabled="True" IsTabStop="True" IsHitTestVisible="True" Style="{DynamicResource SearchTextBoxStyle}" Grid.Column="1" Margin="5,10,0,5" /> 
```

在后面的代码中，当搜索框的可见性受到影响时，我会调用此方法。搜索框在应用程序启动时加载。

```
 /// <summary>
    /// Handles events triggered from focusing on this view.
    /// </summary>
    /// <param name="sender">The sender.</param>
    /// <param name="dependencyPropertyChangedEventArgs">The key event args.</param>
    private void OnIsVisibleChanged(object sender, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        if (!((bool) dependencyPropertyChangedEventArgs.NewValue))
        {
            return;
        }

        SearchCriteriaTextBox.Focus();
        Keyboard.Focus(SearchCriteriaTextBox);
        SearchCriteriaTextBox.Select(0, 0);

        if (SearchCriteriaTextBox.Text.Length > 0)
        {
            SearchCriteriaTextBox.SelectAll();
        }
    } 
```

问题是，代码被调用，组件变为 IsFocused=true 但没有获得键盘焦点。我错过了什么吗？除非另一个控件猛烈地保持在我很确定我没有编码的键盘焦点上，否则为什么这段相当简单的代码将无法正常工作。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-19T15:31:34.543

作为一种解决方法，您可以尝试使用 将`Dispatcher`焦点设置在以后的[DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)，例如`Input`

```
Dispatcher.BeginInvoke(DispatcherPriority.Input,
    new Action(delegate() { 
        SearchCriteriaTextBox.Focus();         // Set Logical Focus
        Keyboard.Focus(SearchCriteriaTextBox); // Set Keyboard Focus
     })); 
```

从您的问题描述来看，听起来您没有设置键盘焦点。WPF 可以有多个焦点范围，因此多个元素可以有逻辑焦点 ( `IsFocused = true`)，但是只有一个元素可以有键盘焦点并接收键盘输入。

您发布的代码应该正确设置焦点，因此之后必须发生某些事情才能将键盘焦点移出您的`TextBox`. 通过将焦点设置为稍后的调度程序优先级，您将确保将键盘焦点设置为`SearchCriteriaTextBox`最后完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-29T05:34:03.247

在 Rachel 的解决方案的基础上，有一种更简单的方法。

在 XAML 中添加到 TextBox Loaded="Got_Loaded"

在后面的代码中

```
 private void Got_Loaded(object sender, RoutedEventArgs e)
    {
        Keyboard.Focus(((TextBox)sender));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-04T14:36:26.037

如果它对我有这个问题的任何人有帮助，并且我的应用程序有一个主窗口，其中多个用户控件放置在具有可见性数据绑定的单独网格中。因为在构建应用程序时网格就在那里，所以在 Loaded 或 Constructor 上调用的 .Focus() 将在构建时调用，而不是在可见性时调用。

无论如何，我通过在网格的 MouseEnter 事件上调用 .Focus() 来修复它。对我来说很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-09T14:53:48.807

我遇到了类似的问题。

就我而言，我需要一个特定的文本框在弹出模式窗口后获得键盘焦点。这将节省用户在他/她开始提供输入信息之前将焦点移到此文本框的额外工作。

我尝试了 Window.Loaded += (o, e) => Keyboard.Focus(textBox)，但这不起作用。

所以我使用了一种解决方法，并且完成了工作，甚至认为它可能不是那么优雅。

这里是：

```
Window.PreviewKeyDown += Window_PreviewKeyDown;

private void Window_PreviewKeyDown(object sender, KeyEventArgs e) {
    Keyboard.Focus(TextBox);
    Window.PreviewKeyDown -= Window_PreviewKeyDown;
} 
```

# excel - 可以自动分割一个大的excel文件吗？

> ID：13955343
> 
> 赞同：0
> 
> 时间：2012-12-19T15:12:54.550
> 
> 标签：excel, vba

将大型excel文件放置到特定目录时是否可以自动拆分它？是否有可以在后台运行的脚本来实现这一目标？

我需要通过过滤excel工作簿中的数据来拆分这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:39:49.470

使用**C#**（或任何**.Net**语言），您可以访问**FileSystemWatcher**组件，该组件将通知目录中的任何更改。

然后，您可以使用任何 Excel 互操作 API 拆分文件，例如 PIA 提供的标准 API（但您需要在运行您的守护程序的服务器上安装 Excel）或仅文件 API，如**NPOI**（**Apache POI**的 .Net 端口） ： http: [//npoi.codeplex.com/](http://npoi.codeplex.com/)。

# css - 电子邮件通讯渐变颜色未正确呈现

> ID：13955360
> 
> 赞同：-1
> 
> 时间：2012-12-19T15:13:28.997
> 
> 标签：css, html, linear-gradients

我是 HTML 和 CSS 的新手，所以我在我的时事通讯中使用渐变色，但渐变色没有在电子邮件上呈现，所以任何人都可以帮我解决这个问题，这是我的样式标签

```
.DivFirst
{
   padding:10px 40px;
   border-radius: 50px;
   width:500px;
   background: -webkit-linear-gradient(#0A284B, #135887);
   background: -o-linear-gradient(#0A284B, #135887);
   background: -moz-linear-gradient(top, #0A284B, #135887);
   background: linear-gradient(#0A284B, #135887);
   -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#0A284B',   endColorstr='#135887', GradientType=1)";
   zoom 1;
   -pie-background: linear-gradient(#FFFFFF, #C5CBC3);
   behavior: url(/PIE.htc);
} 
```

这是我的 HTML 代码

```
<div class="DivFirst">
This is the best of the world
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:45:17.833

我相当确定大多数浏览器的 HTML 电子邮件不支持背景渐变。我建议查看以下链接：

[http://www.campaignmonitor.com/css](http://www.campaignmonitor.com/css)

[http://coding.smashingmagazine.com/2012/03/13/techniques-overcome-poor-css-support-email/](http://coding.smashingmagazine.com/2012/03/13/techniques-overcome-poor-css-support-email/)

[http://caniuse.com/](http://caniuse.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:50:21.277

电子邮件主要采用表格样式。

遗憾的是，在呈现 CSS 和 HTML 时，电子邮件客户端并不像浏览器那样“方便”。

查看 MikeTedeschi 发布的链接。我也发布了它们，但我删除了它们，因为我错过了他的帖子。为 MikeTedeschi 的帖子竖起大拇指；）

# python - pylint人类可读消息ID列表？

> ID：13955361
> 
> 赞同：42
> 
> 时间：2012-12-19T15:13:34.540
> 
> 标签：python, pylint

最新版本的 pylint 允许抑制带有人类可读消息 ID 的消息。例如，而不是

```
class MyTest(unittest.TestCase):  # pylint: disable=R0904
    ... 
```

您可以指定：

```
class MyTest(unittest.TestCase):  # pylint: disable=too-many-public-methods
    ... 
```

此[页面](http://www.logilab.org/card/pylintfeatures)列出了数字消息 ID。但是，我正在寻找消息 id 的人类可读版本的完整列表。我在哪里可以找到该列表？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-20T05:57:08.177

我认为网络上（还）不存在这样的列表，尽管`pylint --list-msgs`会自动生成一个。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-10-05T19:34:16.627

我偶然发现了您的问题，我自己正在寻找这样的列表。所以我决定`pylint --list-msgs`通过正则表达式进行处理。然后我创建了这样一个列表。您可以[在此处](https://github.com/b0wl/readable-pylint-messages/blob/master/README.md)访问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-10T21:41:56.177

[这](https://github.com/ethanchewy/PythonBuddy/blob/master/PythonBuddy/pylint_errors/pylint_errors.py)是用于消息的 pylint 错误字典，以获取最新版本的`pylint --list-msgs`.

格式为 PYLINT_ERROR_ID: ERROR_MESSAGE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-24T04:27:06.627

[您可以在此处的 pylint 文档中找到它： https](https://docs.pylint.org/en/v2.12.2/technical_reference/features.html#pylint-checkers-options-and-switches) ://docs.pylint.org/en/v2.12.2/technical_reference/features.html#pylint-checkers-options-and-switches

# javascript - 切换可变数量的表格行

> ID：13955363
> 
> 赞同：12
> 
> 时间：2012-12-19T15:13:36.187
> 
> 标签：javascript, jquery, html-table

我有一个表，单击链接应显示属于单击行中的数据的“子行”。

由于子行数可能从 0 到 n 不等，我想我应该通过该`.val`方法计算子行数，对吗？因此，该值应该是具有类名“附属”的不可见行数，直到下一个`tr`没有类名的行。我怎样才能做到这一点？我做了一些尝试，但我对 jQuery 很陌生。

我想像这样来计算 tr.affiliated 的数量：

```
 var affiliatednumber = $(this).find("tr.affiliated").val().stop(); 
```

[演示](http://jsfiddle.net/6t6QT/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T15:22:51.627

如果您在每个父母上放置一个类，`tr`您可以`nextUntil()`像这样使用：

```
<tbody>
    <tr class="parent">
        <td>John</td>
        <td>HR Admin</td>
        <td>10/10/1980</td>
        <td>Yes</td>
        <td><a class="showaffiliated" href="#">Yes</a></td>
    </tr>
    <tr class="affiliated">
        <td colspan="2">Amanda</td>
        <td colspan="3">20/20/1985</td>
    </tr>
    <tr class="affiliated">
        <td colspan="2">Louis</td>
        <td colspan="3">20/10/2010</td>
    </tr>
</tbody> 
```

```
$("tr.affiliated").hide();

$("a.showaffiliated").click(function() {
    var $affiliated = $(this).closest(".parent").nextUntil(".parent");
    $affiliated.toggle();
    var affiliatednumber = $affiliated.length;
}); 
```

[**示例小提琴**](http://jsfiddle.net/6t6QT/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:25:30.670

[http://jsfiddle.net/6t6QT/2/](http://jsfiddle.net/6t6QT/2/)

Your use of `.val` and `.stop` don't make sense, and you are not using an input but an `a`. I used `.nextUntil` since the rows will be grouped together; just find the closest parent row of the `a` (this is the "master" row) and use `.nextUntil` to find its affiliated rows -- next until the other master row. It would also help if the master rows had their own class.

# regex - 当不在 SRC 或 HREF 中时，正则表达式替换双空格

> ID：13955370
> 
> 赞同：0
> 
> 时间：2012-12-19T15:13:54.463
> 
> 标签：regex, vb.net

目前我正在做一个项目来去除所有不必要的 HTML。我已经让它工作了，但我正在使用以下代码替换双空格：

```
Private Function stripDubbleSpace(ByVal fileContent As String) As String
    While fileContent.IndexOf("  ") <> -1
        fileContent = fileContent.Replace("  ", " ")
    End While
    Return fileContent.Replace("  ", " ")
End Function 
```

上面的代码有效，但在 HREF 或 SRC 中，当您将双倍空格替换为 1 个空格时，url 将变为 404。不要问为什么我的网址中有空格，我知道这不是最好的方法。

示例：
`/images/my img.jpg`（2 个空格）将替换为`/images/my img.jpg`（1 个空格），不应替换。

当它不在 HREF 或 SRC 中时，如何仅替换双空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:27:25.570

您用单空格替换双空格的代码并没有真正使用正则表达式。如果你想要正则表达式，那么它应该如下所示：

`myurl = myurl.replace(/\s{2,}/g, ' ');`

下一步是扩展正则表达式以检测`HREF`和`SRC`标记并跳过它们。

[参考1](http://weblogs.asp.net/scottcate/archive/2004/12/13/281955.aspx)

[参考文献 2](http://msdn.microsoft.com/en-us/library/t9e807fx.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:45:53.247

使用[Html 敏捷包](http://htmlagilitypack.codeplex.com/)。Regex 不够聪明，无法解析带有嵌套结构的 Html，或者至少，您最终会遇到极其复杂的 Regex 表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:44:38.367

最后我不想使用解析器，因为仅此功能将花费更多时间。我的最终解决方案是找到所有属性 KEY="VALUE"。用标签替换这些属性中的空格。然后用1个空格替换所有双空格，最后用空格替换标签。现在属性仍然会保留空间，我不需要图书馆。

# asp.net - 我试图限制对某些页面的访问没有成功。任何想法为什么？

> ID：13955373
> 
> 赞同：1
> 
> 时间：2012-12-19T15:14:23.257
> 
> 标签：asp.net, vb.net, user-roles

好的，我已经搜索了这个网站以及其他寻找答案的网站，但都无济于事。

我们的新网站带有管理部分，允许所有成员访问此管理部分中的某些页面。

但是，只有 3 个可以访问所有页面。

我正在尝试使用登录页面通过感兴趣的项目菜单让所有用户进入管理部分。

我们的目标是，当用户进入此部分并单击他们无权查看的项目时，他们将被重定向回欢迎页面。

更好的选择当然是一条消息，“您无权查看此页面”。

是否有我可以修改的链接或示例代码来帮助我完成这项任务？

我下面的代码不起作用。

它引导我到管理部分就好了。然后在每个链接的 page_load 事件上，我会使用会话来尝试限制用户。

示例：如果 Session("Admin") <> True then response.Redirect("home.aspx") End If

但并不限制任何人查看屏幕上列出的任何链接。

```
Sub CmdLogin_Click(ByVal Sender As Object, ByVal E As EventArgs) Handles CmdLogin.Click

    Dim StrUser As String, StrPass As String
    Dim BValid As Boolean
    Dim Conn As OleDbConnection
    Dim Cmd As OleDbCommand
    Dim rs As OleDbDataReader
    Dim StrSQL As String

    ' We will request all variables from our form with this.
    'Protect against SQL Injection
    StrUser = Replace(txtUser.Text, "'", "''", 1, -1, 1)
    StrPass = Replace(txtPass.Text, "'", "''", 1, -1, 1)

    ' This is our boolean variable for validation purposes set to true if valid user
    BValid = False

    ' Initialize Database Connection
    Conn = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;data source=" & Server.MapPath("App_Data\Members.mdb"))
    ' Create Select Command
    StrSQL = "SELECT Access_Level, myEmail,UserPassword FROM tblUsers WHERE myEmail='" & StrUser & "' AND UserPassword = '" & StrPass & "'"
    'Response.Write(StrSQL)
    'Response.End()
    Cmd = New OleDbCommand(StrSQL, Conn)

    Conn.Open()

    rs = Cmd.ExecuteReader()

    ' This acts like the (Not RecordSource.Eof) in ASP 3.0
    While rs.Read()
        If rs("Access_Level") = "1" Or rs("Access_Level") = "2" Then
            Session("Admin") = True
            Response.Redirect("admin.aspx")
            'Response.Write(StrPass)
            'Response.End()
            Dim redirectTo As String = Trim(Session("RedirectTo"))
            BValid = True
        Else
        End If
    End While

    ' Don't forget this
    Conn.Close()

    ' This handles all response per validation
    ' If validated it goes to admin.aspx page
    If BValid = True Then
        Session("userid") = StrUser
        Dim redirectTo As String = Trim(Session("RedirectTo"))
        If redirectTo <> "" Then
            Response.Redirect(redirectTo)
        Else  'They just got in without trying to go to a restricted page
            Response.Redirect("admin.aspx")
        End If
    ElseIf BValid = False Then
        lblError.Text = "Login failed: Please try again."
    End If
    End Sub 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:29:26.327

你不需要你在这里尝试做的体操。考虑使用成员资格、角色和内置 .net 功能来限制对特定文件夹/页面的访问。

请看一下我的一篇文章如何轻松做到这一点：

[如何限制未登录的未授权用户查看网页](https://stackoverflow.com/questions/12550768/how-to-restrict-unlogged-unauthorized-users-from-viewing-web-pages-in-asp-net/12551115#12551115)

# android - 接收大型 XML 对象

> ID：13955378
> 
> 赞同：1
> 
> 时间：2012-12-19T15:14:35.147
> 
> 标签：android, xml-parsing, xmlpullparser

我的应用程序以 XML 格式从服务器接收一些数据。我使用`XmlPullParser`. 一切正常。直到服务器以 BASE64 编码（最多 10+Mb）发送大型嵌套对象 - 位图或文件。在虚拟机堆很小的旧设备上（例如 2.3）应用程序崩溃`String text = parser.getText();`（内存不足）

在这种情况下我该怎么办？

有什么方法可以获取流吗？或者mabey`XmlPullParser`可以把它分开并分部分给我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:23:27.043

一种可能是切换到[Sax Parsing](https://developer.android.com/reference/javax/xml/parsers/SAXParser.html)。主要区别在于它不需要一次将整个 xml 字符串读入内存。相反，它将以小块的方式通过它。

设置起来有点复杂，但如果你在网上搜索“Android Sax Parsers example”之类的东西，有一些很好的示例可以帮助你入门。这真的不再困难，只需花一点时间来习惯这样做，而不是使用拉式解析器。

# entity-framework - 如何调整实体框架 POCO T4 模板以在单独的项目中创建类？

> ID：13955379
> 
> 赞同：3
> 
> 时间：2012-12-19T15:14:36.783
> 
> 标签：entity-framework, t4, entity-framework-5, edmx

我喜欢在与 DbContext 分离的项目中保留我的代码或 T4 生成的 POCO。这有助于我确保我的实体类不与任何一种数据访问服务耦合。

当我创建一个新的 DB first EDMX 模型时，向导会生成一个 T4 模板来生成与 DbContext 相同的项目中的所有 POCO。如何修改此模板以将类添加到单独的项目？

仔细观察，将 DbContext 移动到新项目可能会容易得多，但是 T4 没有调用，`fileManager.StartNewFile`所以我不知道从哪里开始告诉它在其他地方创建文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:16:55.860

您可以从 DAL 项目中排除 .tt 文件，然后将其**作为链接**添加到另一个项目中。

这意味着您不必更改模板，因为它可以看到您的模型。

运行模板时生成的文件将包含在您的数据对象程序集中，尽管物理文件将在您的 DAL 项目中。

唯一的缺点是您必须在更新模型时手动运行自定义工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-09T06:53:02.610

我会说：

1.- 在您的模型项目（MyProject.Model proyect）中创建一个文件，一个具有您想要的名称的 .tt 文件...（本示例为 MyModel.tt）

2.- 进入 DAL proyect，打开 WhatModel.tt 文件并将内容复制到 MyModel.tt...

3.- 从 DAL 项目中删除whateverModel.tt。

4.- 在 MyModel.tt 中查找：

```
const string inputFile = @"WhateverModel.edmx"; 
```

5.-并将其替换为：

```
const string inputFile = @"..\TheRelativeRouteToYourEdmxFileGoesHere.edmx"; 
```

6.- 并且... 运行自定义工具来生成您的模型。

**注意：** 7.- 当然，您将不得不更改一些 using 指令和命名空间，但它对我有用。

# python - Z3py - 滚动

> ID：13955385
> 
> 赞同：3
> 
> 时间：2012-12-19T15:14:56.493
> 
> 标签：python, z3, smt

有没有推荐的按位向左或向右滚动的方法？

例如带有一个字节 - `0x57 rolr 3 = 0xEA`。

我在 Z3py 文档中没有找到任何“滚动”操作。我正在考虑`BitVec`为每一位使用 s ，但这似乎效率不高/可能行不通。任何建议表示赞赏，谢谢。

编辑：感谢到目前为止的答案。这更像是一个 API 问题，因为我现在很讨厌它。这是我作为起点的内容。

```
def roll(bt):
count = BitVecVal(int('0x03', 16), 8)
s.add(bt == (bt << count | bt >> (8 - count)) & 0xFF)

a = BitVec('a', 8)
s = Solver()
roll(a)
s.add(a == BitVecVal(int('0xEA', 16), 8))
s.check() 
```

这不会打印任何内容，并且模型不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:25:56.327

您可以像这样进行旋转：

```
size = 0x100  # size of the bitvector

rotated = (x << n) | (x >> (size - n)) & (size - 1) 
```

# jquery - 使用jQuery单击按钮时向左移动元素X增量

> ID：13955387
> 
> 赞同：3
> 
> 时间：2012-12-19T15:15:10.653
> 
> 标签：jquery, html

我有一个元素，我想在每次单击按钮时向左移动 800 像素。

我已经编写了以下代码，它只将我的元素向左移动一次，而不是在每次点击时，任何人都可以提出正确的方法吗？

```
$('.hero-nav li.prev a').click(function(){
    $('.hero-carousel').animate({'margin-left':'-640px'}, 1000);

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T15:17:04.377

您缺少 1 个重要角色....

```
$('.hero-nav li.prev a').click(function(){
    $('.hero-carousel').animate({'margin-left':'-=800px'}, 1000);
}); 
```

= 符号使它相对移动。没有它是绝对移动的。

# php - 计算 NULL 列时的 FreeTDS 无效游标状态

> ID：13955388
> 
> 赞同：3
> 
> 时间：2012-12-19T15:15:12.827
> 
> 标签：php, sql-server, freetds, unixodbc

我在运行`COUNT()`对包含 NULL 值的字段使用该函数的查询时遇到问题。

我正在将 FreeTDS v0.91 与 unixODBC、PHP 5.3.10 和 SQL Server 2008 一起使用。我有使用 7.2 协议的连接。我正在尝试运行以下查询：

```
SELECT COUNT(ProductCode) AS p FROM Membership 
```

仅当 Membership 中的每个 ProductCode 为空时，此查询才会引发错误。当我直接在 SQL Server 上运行它时，它会评估它应该如何（到 0）。

当我尝试从 FreeTDS 运行此查询时，我收到此错误：

> SQLSTATE[24000]：无效游标状态：0 [FreeTDS][SQL Server]无效游标状态（SQLFetchScroll[0] at /builddir/build/BUILD/php-5.3.10/ext/pdo_odbc/odbc_stmt.c:537）

有谁知道为什么我会收到这个错误？我记得当我尝试一次循环遍历两个结果集时遇到了类似的错误，但这是一个查询。

当`ProductCode`. 它似乎只有在结果`COUNT()`为零时才会失败。

有谁知道可能导致此问题的原因或我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T03:18:03.563

由于产品代码为 NULL，因此 SQL Server 不计算它来执行此操作，您需要告诉它：

```
 ISNULL(ProductCode, 0 ) 
```

或者

```
ISNULL(ProductCode, '' ) 
```

# git - git grep——但仅限于索引中的新文件或修改文件

> ID：13955390
> 
> 赞同：20
> 
> 时间：2012-12-19T15:15:14.537
> 
> 标签：git, grep

是否可以`git grep`只搜索索引/缓存中的新文件或修改文件？

（此用例是在预提交挂钩中使用，该挂钩会`console.log`在预期提交中查找“调试”代码。但我不会被`console.log`“现有”代码所困扰。最好这也无法匹配这些实例`console.log`已被*删除*，但我可以忍受那些匹配！）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-27T11:32:14.100

事实证明，做到这一点的方法不是通过`git grep`，而是通过一个完全不同的命令，它也恰好能够搜索：`git diff-index`。（简单性和正交性的另一个胜利......）

我想要的可以通过以下方式实现：

```
$ git diff-index -U --cached -G <regexp> HEAD 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-20T09:45:15.600

我通常只是做类似的事情：

```
git diff | grep TODO 
```

如果您有足够多的更改线让这很烦人，那么我添加`| grep '^+'`, 或开始使用`-[ABC]`选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T16:15:39.130

您可以创建一个 git pre-commit 钩子（它只是一个 shell 脚本，在您的 .git/hooks 目录中标记为可执行文件），它扫描您的提交差异以查找任何新添加的行（`+`开头带有符号的那些用于“调试” " 模式），并执行一个`exit 1`如果它发现这样的行。

这告诉`git commit`您在开始 $EDITOR 以编辑提交消息之前中止提交。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T15:27:14.653

我有一个名为的 Perl 程序`dirty`，它可以检测 repo 中的新文件或更改的文件，然后我可以说`grep string_to_find $(dirty)`.

```
#!/usr/bin/perl

use warnings;
use strict;

my @lines = qx/svn status 2>&1/;
exit if @lines == 0;

chomp @lines;
my $first = $lines[0];
if ( $first !~ /svn: warning: .+ not a working copy/ ) {
    @lines = grep { !/^[?]/ } @lines; # Ignore unversioned files
    s/^........// for @lines;
    print "$_\n" for @lines;
    exit;
}

@lines = qx/git status --short --untracked-files=no/;
chomp @lines;
s/^...// for @lines;

print "$_\n" for @lines; 
```

请注意，它足够聪明地检查 Subversion 存储库或 Git 存储库中的脏文件，具体取决于它检测到的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-26T14:33:17.780

这是 grep 更改行的小别名：

```
 grep-changed = "!f(){ git diff-index -U -G \"$@\" HEAD; };f "
    grep-staged  = "!f(){ git diff-index -U --cached -G \"$@\" HEAD; };f " 
```

# jquery - jQuery .autocomplete 不过滤

> ID：13955393
> 
> 赞同：2
> 
> 时间：2012-12-19T15:15:28.963
> 
> 标签：jquery, jquery-ui, asp-classic, jquery-autocomplete, jquery-ui-autocomplete

我是 jQuery 和 JSON 的新手，花了几个小时但仍然没有解决问题

来自服务器的 JSON 是有效的，通过 jsonlit.com 检查，但它仍然显示所有数据（未过滤）。

来自 serverURI.asp 的 JSON

```
["A. ASRUNADI", "A. MURSYID", "A. RIFANI", "A.Z MAKMUR IS", "ABBAS", "ABDI  IRWANTO"] 
```

我的jQuery

```
$("#keyword").autocomplete({
    source: function(request, response){
       $.getJSON("serverURI.asp", function(data){
           var source = data
           response(source);
       });
    }
}); 
```

但是....当我将 JSON 作为 var 放在 jquery 中时，它的工作原理...同时我已经在我的 html 元标记中使用了 utf-8

```
$(function() {
    var availableTags = ["A. ASRUNADI", "A. MURSYID", "A. RIFANI", "A.Z MAKMUR IS", "ABBAS", "ABDI  IRWANTO"];
    $("#keyword").autocomplete({
        source: availableTags
    });
}); 
```

我的 ASP（经典）生成 JSON 如下

```
 dim strResultEMP
strResultEMP = "["
for strEmpCount = 0  to strTotalCountEmp
    strEmpObj = split(strEmpSplit(strEmpCount), "$$$")
        if strEmpCount < strTotalCountEmp then
            strResultEMP = strResultEMP & """" & ucase(strEmpObj(1)) & """" & ", "
        else
        strResultEMP = strResultEMP & """" & ucase(strEmpObj(1)) & """" & ""
        end if

next
strResultEMP = strResultEMP & "]" 
response.write strResultEMP 
```

仅供参考，我使用 JSON2.asp 和 JSON UTIL，但它仍然相同。调试和捕捉我使用 Firebug 的服务器响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:35:06.343

如果您不想在服务器端进行过滤，您应该对源发出 AJAX 请求，然后将该源传递给自动完成小部件：

```
$(function () {
    /* Make the AJAX request once for the source array: */
    $.getJSON("serverURI.asp", function (data) {
        /* Initialize the widget with the data we got back: */
        $("#keyword").autocomplete({
            source: data
        });
    });
}); 
```

请记住，如果您有大量数据，这可能会降低用户浏览器的速度。如果您有很多 (>500) 项，我强烈建议您在服务器上进行过滤。

# android - Android NDK，OpenSL ES - 知道缓冲区何时被填满

> ID：13955397
> 
> 赞同：3
> 
> 时间：2012-12-19T15:15:35.080
> 
> 标签：android, android-ndk, opensl

如果我将一个缓冲区排入队列以记录到缓冲区队列中 - 有没有办法知道该缓冲区何时被实际填充，所以我可以使用它？

同样，有没有办法知道缓冲区何时播放？

对于上下文：我正在修改名为“native-audio”的 NDK 示例。它使用 SLAndroidSimpleBufferQueueItf 进行播放，并评论说，对于我想做的流记录，也应该使用这样的队列。现在我想知道，因为从我记得在某处读过的内容来看，不能保证在下一次录制回调调用时缓冲区已被填充（或在播放回调中播放，就此而言） - 人们怎么知道什么时候缓冲区已被使用？肯定有什么办法，否则这一切都会有点没用？^^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T16:24:04.207

对于录制，如果您注册 an `slBufferQueueCallback`，`IBufferQueue_RegisterCallback`您应该在缓冲区被填满时获得回调。

另请参阅android-ndk 列表上的[讨论：](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/hLSygQrmcPI)

> 如果我理解得很好，每次填充队列中的缓冲区时，记录器都会回调，并且这些缓冲区按照它们入队的顺序填充。但是回调似乎没有公开指向相应填充缓冲区的指针。那么有什么方法可以找回呢？OpenSL ES 规范中的示例代码显示了一个播放示例，该示例使用作为回调上下文传入的结构来跟踪这些内容，是这样做的吗？
> ……
> 对。这是 OpenSL ES 1.0.1 规范中的一个已知缺陷。OpenSL ES 1.1 添加了显式参数来标识缓冲区，但 Android 目前基于 1.0.1 规范。一种解决方法是自己维护一个索引以指示正在完成哪个缓冲区。

# visual-studio-2012 - 为构建服务器自定义 Visual Studio 2012 的 Web 发布管道 (WPP)

> ID：13955398
> 
> 赞同：4
> 
> 时间：2012-12-19T15:15:34.987
> 
> 标签：visual-studio-2012, tfsbuild, msdeploy, msbuild-wpp

我正在为大型企业服务基础架构创建构建和部署基础架构。我们将 TFS Build 2012 用于构建服务器，使用 Visual Studio 2012 生成 WPP 部署包，并使用 MSDeploy 2.1 执行实际部署。（我们不能使用 MSDeploy 3，因为它存在许多错误 - NTLM 身份验证被 WMSvc 破坏等）。

我创建了一个“Project.wpp.targets”文件并添加了以下属性：

```
<DeployOnBuild Condition="$(DeployOnBuild) == '' And '$(OutDir)' != '$(OutputPath)' ">true</DeployOnBuild>
<WebPublishMethod>Package</WebPublishMethod>
<DeployManagedPipelineMode>Integrated</DeployManagedPipelineMode>
<Disable_CopyWebApplication>True</Disable_CopyWebApplication> 
```

当编译发生在构建服务器上时，OutDir 将不同于 OutputPath 并且 WPP 将被激活。构建输出以下文件：

```
Project.zip
Project.SetParameters.xml
Project.SourceManifest.xml
Project.deploy.cmd
Project.deploy-readme.txt 
```

里面的 project.zip 是：

```
Archive.xml
Parameters.xml
systemInfo.xml 
```

**问题 1** - SourceManifest.xml 文件是做什么用的，为什么它不在 zip 包中？似乎创建用于部署的 zip 文件包的全部原因是它完全自包含。那个 SourceManifest 文件是“松散的”——我们不能再把一个 zip 文件扔到我们的部署文件共享上。为什么不在包裹里？它还指向*构建服务器*上的特定路径！

**问题 2** - Archive.xml 文件的用途是什么？SourceManifest.xml 似乎有些多余 - 我看到一个提供程序，许多提供程序等。在 Microsoft 文档中，他们在包中提到了“manifest.xml”。这个文件看起来像清单，但它被称为“archive.xml”。文件名重要吗？manifest.xml 与archive.xml 不同吗？它们与 SourceManifest.xml 有什么关系，它看起来相似但同时又不同？

**问题 3** - systemInfo.xml 的用途是什么？它似乎列出了在构建服务器上为 IIS 角色安装的所有组件。例如，如果我在本地机器上的命令行运行构建，它会列出已安装的 .NET 2.0 和 4.0 以及我机器上各种 IIS 组件的一些 True/False 值。问题是这些设置与我实际想要部署的内容*无关！*MSDeploy 是否查看过此文件？可以禁用它的生成吗？我绝对不希望来自构建服务器的配置工件影响生产！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T04:24:42.833

生成的 zip 包是自给自足的，可以与 msdeploy.exe 一起使用，而无需目录中的任何其他文件。

您可以通过设置来防止生成*cmd*和*SetParameters*文件`GenerateSampleDeployScript=False`。您无法将*SourceManifest*配置为在构建后删除，但您可以安全地手动执行此操作。

**SourceManifest.xml**基本上是一个诊断工件。实际上，这是`-source:manifest=Project.SourceManifest.xml`同步的`-dest:package=Project.zip`

**archive.xml**是包提供者对其中内容的内部表示。该文件始终称为archive.xml，并且提到manifest.xml 的文档是错误的。

我实际上不确定如何使用**systeminfo.xml**。我不知道禁用该功能的方法，但我也从未遇到过其属性影响部署的情况。

# ant - 如何递归运行 chown ant 任务？

> ID：13955402
> 
> 赞同：0
> 
> 时间：2012-12-19T15:15:50.133
> 
> 标签：ant, chown

我想以递归方式更改 AIX 中目录的所有权。我用

```
<osexec commandbase="su" dir="/bin" mode="osexec">
<args>
<arg line="chown -R ${broker_admin_name}:${broker_admin_name} ${broker_installation_directory}/dcx"/>
</osexec> 
```

这段代码正确吗？我想更改 dcx 下所有目录和文件的所有权，包括 dcx，但我无法通过这样做来更改所有权。我也尝试：

```
<chown owner="${broker_admin_name}">
<fileset dir="${broker_installation_directory}/dcx" includes="**/*">
</fileset>
<dirset dir="${broker_installation_directory}/dcx" includes="**/*">
</dirset>
</chown> 
```

但是通过这种方式，只有 dcx 下的目录的所有权发生了变化，而不是文件。另外，我可以通过 build.xml 中的普通 shell 命令执行此操作吗？即`chown -R abc:abc xyz`，我怎样才能直接在 build.xml 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:47:57.180

您是否收到“不允许操作”错误消息？

# 例子

在 Ubuntu 上，chown 任务受操作系统限制：

```
$ ant

build:
    [chown] chown: changing ownership of `/home/mark/tmp/build/one/test.txt': Operation not permitted
    [chown] chown: changing ownership of `/home/mark/tmp/build/three/test.txt': Operation not permitted
    [chown] chown: changing ownership of `/home/mark/tmp/build/two/test.txt': Operation not permitted
    [chown] chown: changing ownership of `/home/mark/tmp/build': Operation not permitted
    [chown] chown: changing ownership of `/home/mark/tmp/build/one': Operation not permitted
    [chown] chown: changing ownership of `/home/mark/tmp/build/three': Operation not permitted
    [chown] chown: changing ownership of `/home/mark/tmp/build/two': Operation not permitted
    [chown] Result: 1
    [chown] Applied chown to 3 files and 4 directories. 
```

运行“chown”命令演示了相同的限制

```
$ chown -R an_other_user build
chown: changing ownership of `build/one/test.txt': Operation not permitted
chown: changing ownership of `build/one': Operation not permitted
chown: changing ownership of `build/two/test.txt': Operation not permitted
chown: changing ownership of `build/two': Operation not permitted
chown: changing ownership of `build': Operation not permitted 
```

最好的解决方案是以 root 用户身份运行 ANT：

```
$ sudo ant 
```

## 构建.xml

```
<project name="demo" default="build">

    <target name="init">
        <mkdir dir="build/one"/>
        <mkdir dir="build/two"/>

        <echo file="build/one/test.txt" message="helloworld"/>
        <echo file="build/two/test.txt" message="helloworld"/>
    </target>

    <target name="build" depends="init">
        <chown owner="an_other_user" verbose="true">
            <fileset dir="build"/>
            <dirset dir="build"/>
        </chown>
    </target>

    <target name="clean">
        <delete dir="build"/>
    </target>

</project> 
```

# java - 使用 CRUD 和 Java Play！在多部分表单上填充多个模型的框架

> ID：13955407
> 
> 赞同：1
> 
> 时间：2012-12-19T15:16:09.873
> 
> 标签：java, playframework, crud, playframework-1.x

我有一个Java Play！Play 中内置的应用程序！1.2.3 与几个模型相互链接。特别是，一个模型生成的格式化文本对象列表作为另一个模型的一部分返回，如下所示：

```
@Entity
public class Parent extends Model {

    @Required
    @Expose
    public String name; // and a dozen others

    @Expose
    @OneToMany(mappedBy="parent", cascade = {CascadeType.PERSIST, CascadeType.REMOVE})
    public List<Child> fields;  

} 
```

`Child`但是，我不想以自己的形式创建每个对象，而是希望主窗体的部分专门用于创建固定数量的这些对象。所以表单上会有一个“名称”字段，而且（为了论证）两组字段，每组对应一个`Child`对象，在表单上。

顺便说一句，在这种情况下使用 a 的原因`List`是，将来我们可能想要制作`Parent`具有不同数量的字段的对象，在这种情况下我们会设计新的表单。

那可能吗？替代方案似乎很麻烦！

此外，因为这个对象会很长，我理想情况下希望将它填充到一个多页表单上，但是除了将所有页面都作为一个动态页面的一部分或发布之外，我怎么能做到这一点并不明显页面之间的临时变量，两者都没有持久性，并且似乎使 CRUD 的所有神奇用途变得毫无意义。是否有推荐的方法将控制器表单拆分为多个页面？

# windows - Windows 批处理文件 - 无法设置变量值

> ID：13955408
> 
> 赞同：2
> 
> 时间：2012-12-19T15:16:14.490
> 
> 标签：windows, if-statement, batch-file, windows-console

我正在编写一个脚本，该脚本应该清空`Recycle.Bin`连接到计算机的所有设备/分区。

它通过测试可能的可用设备（从 a 到 z 字母）来执行此操作，不包括未连接的设备。

由于循环`IF`内的语句，该脚本无法正常工作。`FOR`我怎样才能解决这个问题？

```
@echo off
Setlocal EnableExtensions EnableDelayedExpansion
FOR %%G IN (a b c d e f g h i j k l m n o p q r s t u v w x y z) DO (
    SET nodev=none
    fsutil fsinfo volumeinfo "%%G:" | find "Errore:" > nul
    IF %ERRORLEVEL% EQU 0 SET nodev="%%G:"
    IF "%%G:" NEQ "%nodev%" (
        RD /s /q "%%G:\RECYCLED"
        RD /s /q "%%G:\RECYCLER"
        RD /s /q "%%G:\$Recycle.Bin"
    )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:21:19.513

有几个问题。

首先，您在`nodev`变量`%`周围设置 '，仅在访问变量时使用。

其次，您需要在`for`循环内使用延迟扩展来访问该变量，方法是使用`!`'s 而不是`%`'s。

试试这个

```
@echo off
Setlocal EnableDelayedExpansion
FOR %%G IN (a b c d e f g h i j k l m n o p q r s t u v w x y z) DO (
SET nodev=none
fsutil fsinfo volumeinfo "%%G:" | find "Errore:" > nul
IF !ERRORLEVEL! EQU 0 SET nodev="%%G:"
IF "%%G:" NEQ "!nodev!" (
RD /s /q "%%G:\RECYCLED"
RD /s /q "%%G:\RECYCLER"
RD /s /q "%%G:\$Recycle.Bin"
)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:23:34.460

试试这个而不是 fsutil。它的代码更简洁。

```
@echo off
Setlocal EnableDelayedExpansion
FOR %%G IN (a b c d e f g h i j k l m n o p q r s t u v w x y z) DO (
    cd /d "%%G:" 2>nul
    IF !ERRORLEVEL! EQU 0 (
        RD /s /q "%%G:\RECYCLED"
        RD /s /q "%%G:\RECYCLER"
        RD /s /q "%%G:\$Recycle.Bin"
    )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:20:41.940

为什么不下载一个简单的程序，比如

```
EmptyRecycleBin.exe 
```

完美运行

使用 google 获取链接

# java - Spring库中的REST（RestTemplate）是否支持HTTPS协议？

> ID：13955409
> 
> 赞同：11
> 
> 时间：2012-12-19T15:16:22.007
> 
> 标签：java, spring, rest, https

我正在尝试通过 连接到 Web 服务器`HTTPS`，但`response.getBody()`返回`null`但我想返回 JSON 数组。是`statusCode`200 并且标头包含正确的信息，但响应正文是`null`. `RestTemplate`为此，我专门使用标准 Spring API `postForEntity()`。也许为了做到这一点，我必须使用一些特殊的 Spring API？

不幸的是，我在 Spring REST 文档中找不到有关`HTTPS`支持和`SSL`/'TLS' 证书的任何信息（它非常有限）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-19T15:28:16.883

您可以使用 配置`RestTemplate`，`HttpComponentsClientHttpRequestFactory`例如：

```
<bean id="httpComponentsClientHttpRequestFactory" class="org.springframework.http.client.HttpComponentsClientHttpRequestFactory"/>

<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
    <constructor-arg ref="httpComponentsClientHttpRequestFactory"/>
</bean> 
```

这允许在后台`RestTemplate`使用[Apache HttpComponents HttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/)，它绝对支持 SSL。

看起来`HttpClient`by 提供的`HttpComponentsClientHttpRequestFactory`支持 SSL 开箱即用，因此您可能几乎不需要配置。

# flash - flash：loadSound 加载完成后，歌曲再次从头开始播放

> ID：13955414
> 
> 赞同：3
> 
> 时间：2012-12-19T15:16:35.927
> 
> 标签：flash, audio, actionscript, actionscript-2

我有这个简单的代码

```
var mySound:Sound = new Sound();
mySound.loadSound("128kbps_stereo.mp3", true); 
```

它确实加载声音并播放它。然而，这首歌播放了一会儿，然后重新开始！所以声音由于某种原因在短时间内播放了两次

我对此进行了一些调查，结果发现它在 mp3 完成加载后再次自动播放歌曲，我不知道为什么

我尝试创建一个空白的 mySound.onLoad 函数，但仍然没有。我绝对不会从任何地方调用 mySound.play() ！我不知道为什么会这样

有人可以启发我吗？

编辑：现在修复了这个......在评论中查看错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:58:28.090

长话短说：发布备份 swf 文件并将旧 index.swf 文件复制到服务器...

向所有人道歉

# php - 警告：wpdb::prepare() 缺少参数 2，

> ID：13955416
> 
> 赞同：5
> 
> 时间：2012-12-19T15:16:41.520
> 
> 标签：php, wordpress

两天前我升级到了*Wordpress 3.5 。*我不使用很多插件，GoDaddy 向我保证我的插件工作正常。但是，我第一次在我的博客文章中收到此错误消息。

你能帮我解决这个问题吗？

> 警告：wpdb::prepare() 缺少参数 2，在第 91 行的 /home/content/52/8331652/html/wp-content/themes/chateau-2.0/functions.php 中调用并在 /home/content/ 中定义第 990 行的 52/8331652/html/wp-includes/wp-db.php

[这](http://christycanterbury.com/2012/12/18/new-ideas-at-baron-knyphausen/)是帖子顶部屏幕右侧出现此问题的页面之一。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T16:37:52.253

WordPress 3.5 进行了一些重大更改以降低某些安全风险，例如[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。该`wpdb::prepare`方法的使用不安全，因为插件开发人员发送完整的查询而不是分离参数。这意味着“准备好的”语句没有准备好，实际上是直接将参数传递到查询中，这是一个安全禁忌。从 3.5 开始，此方法现在需要三个参数。

要解决您当前的问题，请编辑您的 php.ini 文件，找到 for 的行`error_reporting`并将其更改为以下...

```
error_reporting(E_ALL & ~(E_NOTICE|E_WARNING)); 
```

重新启动您的服务器。

这将防止报告所有小的脚本错误。

或者，将错误发送到日志文件。在 php.ini 中，找到这一行（取消注释），并将其更改为...

```
error_log "/path/to/php-error.log" 
```

这将防止错误显示在您的网站上。相反，它们将被写入只有您可以看到的日志。

如果此错误困扰您，您可以尝试让流氓插件使用虚拟值。我们可以看到该`wpdb::prepare`方法接受三个参数......

```
$wpdb->query( 
    $wpdb->prepare( 
        "
            DELETE FROM $wpdb->postmeta
            WHERE post_id = %d
            AND meta_key = %s
        ",
        13, 'stack overflow' 
    )
); 
```

通过让受影响的插件在`null`方法中发送 a 作为第二个和第三个参数，它将彻底解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T15:22:43.680

在 wp-config.php 添加这一行：

```
@ini_set('display_errors', 0); 
```

您的主题/插件无法正确访问新的 WordPress API。它仍然可以工作，但会生成错误警告。查看[更长的解释](http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T06:31:06.933

在functions.php中添加“”作为查询后的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T17:00:27.427

我也面临同样的问题。我将此代码添加到我的 wp-config.php 文件中。

```
@ini_set('display_errors', 0); 
```

然后我很高兴，再也没有警告信息了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-03T06:07:04.660

它发生是因为

**$wpdb->prepare**必须使用**参数**执行。

你没有参数吗？

然后，另一种选择：

添加 WHERE 进行查询：

```
$sql = "SELECT * FROM TB_YOUR_TABLE WHERE %d AND ..."; 
```

魔术键 = **WHERE %d**必须为真

并包含一个真正的参数：

```
$results = $wpdb->get_results( 
              $wpdb->prepare($sql,1) 
           ); 
```

**1**对 mysql 为真

希望能帮助到你！

# zend-framework2 - ZF2：如何将整个应用程序的 basePath 设置为相同？

> ID：13955426
> 
> 赞同：1
> 
> 时间：2012-12-19T15:17:13.303
> 
> 标签：zend-framework2, zend-framework-mvc, zend-framework-modules

该手册的示例显示了如何仅为某些特定设置 basePath `viewModel`：

```
$this->getHelper('basePath')->setBasePath() 
```

但是我想将它设置在一个地方的某个地方，然后对于`viewModel`我在任何控制器中创建的任何东西都是一样的。我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T02:44:03.587

您可以在配置中设置全局基本路径：

```
'view_manager' => array(
    'base_path' => '/path/'
) 
```

# css - 选择没有图像的段落

> ID：13955427
> 
> 赞同：1
> 
> 时间：2012-12-19T15:17:14.457
> 
> 标签：css, selector, paragraph

所以这里是示例 HTML：

```
<p>Hello</p>
<p>World</p>
<p><img src="catpic.jpg" /></p> 
```

`text-indent`如果段落不包含任何图像，我如何应用于所有段落。

在这种情况下，只会选择第一个两个元素。

```
p [insert magic] { text-indent: 2em; } 
```

我可以使用 CSS3，但我不想使用 JavaScript。此外，我不能向现有元素添加额外的类或任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:19:10.570

你不能这样做，这涉及到 DOM 树下查看图像是否存在，然后返回给段落文本缩进。

我认为你最好的选择是给所有`p`标签一个文本缩进，然后给一个相同值`img`的负数`margin-left`

# git - 克隆 git re 时出错

> ID：13955433
> 
> 赞同：1
> 
> 时间：2012-12-19T15:17:39.573
> 
> 标签：git, version-control, repository, git-submodules, git-checkout

所以我正在使用 git 参与这个项目。

有一堆源文件和我们引用的一些库。这些库作为子模块（例如 BulletPhysics）放入 git 中，我们的团队不得更改。

根据墨菲定律，这种改变已经发生，伴随着提交/推送，这似乎没有任何效果......

...直到有人丢失了他的本地仓库并不得不重新克隆。好吧，所发生的只是项目的某些部分被实际下载，但是当涉及到项目符号时，所发生的只是

```
Unable to checkout 'cc1b481c8ec2868595db30303d88bd12bc1bcf2a' in submodule path 'extern/bullet' 
```

我们的主管告诉我们，它已被尝试更改子弹的提交/推送操作破坏，我们无权执行此操作，并且他不知道如何解决此问题。

有人可以在不评判他的情况下帮我解决这个问题吗？;)

问候， LDer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:39:45.990

我找到了解决方案：

（网络上的几个来源，结合在一起。随意添加您自己的评论。）

首先，转到终端中的子模块文件夹。就我而言，/path/to/.../project/extern/bullet. 在那里执行以下命令

```
cd /path/to/.../project/extern/bullet 
```

使用“git log”，找到最后一次有效提交的 sha-id。就我而言，“cc1b481c8ec2868595db30303d88bd12bc1bcf2a”之前的那个。正如您可能猜到的那样，它是“c2720237e96e126dddb37f0496242d3adbf31ab0”。这是应该解决的问题：

```
git reset --hard c2720237e96e126dddb37f0496242d3adbf31ab0
git submodule init
git submodule update
cd /path/to/.../project
git add extern/bullet
git commit
git push 
```

到目前为止，回购按预期工作。

最好的问候， LDericher

# php - 异常后恢复 PHP 以执行脚本

> ID：13955436
> 
> 赞同：14
> 
> 时间：2012-12-19T15:17:43.553
> 
> 标签：php, try-catch

我有一个 php 脚本，可以说在执行期间脚本会引发异常。我希望我的 PHP 从它停止的地方（它抛出异常的地方）恢复。

我应该将相同的执行代码放在代码的“catch”部分吗？

例如，假设连接到 mySQL 它因连接超时而失败

```
 function someCode(){
        $pdostmt = $this->prepare($this->sql);
        if($pdostmt->execute($this->bind) !== false) {
            if(preg_match("/^(" . implode("|", array("select", "describe", "pragma")) . ") /i", $this->sql))
                return $pdostmt->fetchAll($this->fetchOption);
            elseif(preg_match("/^(" . implode("|", array("delete", "insert", "update")) . ") /i", $this->sql))
                return $pdostmt->rowCount();
   }
   try {
        someCode();
        }   
    } catch (PDOException $e) {  
        //re-execute same code as within the try clause?
        someCode();
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-19T15:31:21.880

首先，应该明确一个异常*只有在没有被捕获的情况下才是致命的*。捕获异常不会**停止**脚本执行。它只是停止 try 块中的堆栈帧并将控制权转移到 catch 块。从那里您的脚本将继续正常执行。

通过在这里捕获异常，我们仍然在捕获异常后恢复正常的脚本执行......

```
try {
  echo "Try...\n";
  throw new Exception("This is an exception");
} catch(Exception $e) {
  echo "Exception caught with message: " . $e->getMessage() . "\n";
}

echo "Script is still running..."; 
```

还有另一种处理未捕获异常的方法，使用[异常处理程序](http://php.net/manual/en/function.set-exception-handler.php)。但是，如果您不使用 try 和 catch 语句，执行流程仍将停止。这是异常的性质：

```
function myExceptionHandler($e) {
  echo "Uncaught exception with message: " , $e->getMessage(), "\n";
}

set_exception_handler('myExceptionHandler'); // Registers the exception handler

throw new Exception("This is Exception 1");
echo "Execution never gets past this point";
throw new Exception("This is Exception 2");
throw new Exception("This is Exception 3"); 
```

**编辑：**澄清你的问题后，我认为我应该说明你想要的不是异常处理程序，但你实际上根本不想使用异常。您正在尝试做的事情根本不需要抛出异常。如果您打算做的只是处理这样的错误，请不要将 PDO 置于异常模式。异常应该只用于处理**异常**错误。例外的全部意义在于确保你信守诺言。例如，如果您的函数承诺它将始终返回一个 PDOStatement 对象，并且在某些情况下它不可能做到这一点，那么抛出异常是有意义的。这让调用者知道我们已经到了**无法**兑现承诺的地步。

你想要的是基本的错误处理......

```
function someCode(){
        $pdostmt = $this->prepare($this->sql);
        if($pdostmt->execute($this->bind) !== false) {
            if(preg_match("/^(" . implode("|", array("select", "describe", "pragma")) . ") /i", $this->sql))
                return $pdostmt->fetchAll($this->fetchOption);
            elseif(preg_match("/^(" . implode("|", array("delete", "insert", "update")) . ") /i", $this->sql))
                return $pdostmt->rowCount();
        } else {
           return false;
        }
}

while (someCode() === false) {
  /* Call someCode() until you get what you want */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T15:39:10.357

使用 php 4/5 register_shutdown_function。

文档在这里： http: [//php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-20T06:05:47.207

我将假设您无法处理正在抛出的函数中的异常。如果您想恢复抛出异常的位置，则需要在那里处理异常。其他任何东西都是糟糕的编码，会导致您或从事该项目的任何其他人感到困惑。我们让异常上树，因为由于范围问题，我们无法在它自己的函数中处理它们。

至于你的例子，我将对此进行扩展。您说操作无法继续，因为连接无法发生。实际上，我们不想公然重试该函数，因为我们实际上将创建一个持续尝试连接的挂起点，因此我们使用树上更高的 catch 块，我们可以通知用户并让他们决定我们想要做什么. 这样做我们可以在正确的地方使用 catch 块来保存数据，这样我们就可以恢复数据并在以后执行它。实际上，我们希望在 try 块之前的某个点结束。

这将为您提供更清晰的执行路径。有时您必须重新考虑一个函数/方法，以便它正确地做一件事和一件事。

简单直接地回答你的问题。不，在 catch 块中调用 try(ed) 函数是个坏主意，原因很简单，因为您不再有 try 块来在那里捕获异常。异常带来更有意义的错误处理，然后只是传递 true 和 false 作为返回。但是，这确实意味着您必须绕一圈来处理它们。

现在举一个替代示例...假设我们有多个可以连接的服务器，并且您想运行该列表，您可以将 try/catch 放入循环中，catch 将检查该异常并在之前进行任何清理执行下一个循环。如果发生任何其他异常，我们将（重新）抛出异常。实现您的目标的正确方法是这样的。

```
function someCode() {
    $pdostmt = $this->prepare($this->sql);

    while($status == false) {
        try {
            $status = $pdostmt->execute($this->bind)

        } catch (PDOException $e) {
            if($e->getMessage("What ever the error message is") {
                //Fix it here
            } else {
                throw $e;
            }
        }
    }
    //Do other stuff
    return $data; //or true/false
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:23:37.490

如果您在执行过程中不会遇到异常，您也许可以使用 try catch 的 finally 部分。

```
try {
  // some crashing code
} catch (Exception $e) {
  //some catch code
} finally {
  //code that will run anyways.
} 
```

# c# - 编译错误：CS0433 类型与导入类型冲突

> ID：13955437
> 
> 赞同：7
> 
> 时间：2012-12-19T15:17:45.733
> 
> 标签：c#, asp.net, visual-studio-2010

以前从来没有出现过这个错误。我已经阅读了很多关于它的内容，我认为是我灵魂中的一些参考资料导致了冲突。但我找不到它。没有名称为“WeekOverview”的参考。仅在 App_Code 文件夹中找到它。

试图清理，重建，批处理和一切。但正如我所说，我认为这是一个参考。但是我怎样才能得到正确的呢？

**我发布时出错**

```
CS0433: The type 'WeekOverview' exists in both 
'c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\personalwebb\75767f9d\62ef58be\assembly\dl3\b22616ea\c17e3cb3_f0ddcd01\App_Web_tzf1insv.DLL' and 
'c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\personalwebb\75767f9d\62ef58be\assembly\dl3\26ecbd1c\01966db2_f0ddcd01\App_Code.DLL' 
```

**视觉工作室中的警告**

```
The type 'WeekOverview' in 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website\ea888009\78e5b795\App_Web_jmrhajtx.5.cs' 
conflicts with the imported type 'WeekOverview' in 
'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website\ea888009\78e5b795\App_Code.cmrt8ckb.dll'. 
Using the type defined in 
'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website\ea888009\78e5b795\App_Web_jmrhajtx.5.cs'. c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\website\ea888009\78e5b795\App_Web_jmrhajtx.4.**cs 
```

**编辑**

我的问题是我在 App_Code 中的 WeekOverview 和一个名为 WeekOverview 的 .aspx 页面。为了解决这个问题，我要么必须在我的 WeekOverview 类周围获得一个命名空间。或更改班级名称。两者都有效，我围绕它创建了一个命名空间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:39:08.597

我认为您在 App_Code 特殊文件夹中有一个源文件，以及一些`WeekOVervew`定义相同类型 ( ) 的页面内代码隐藏。如果这些类型做不同的事情，那么它们应该被恰当地命名，解决错误，如果这些类型做同样的事情，那么你应该只有一个副本，也解决错误。

删除或更正重复的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:43:19.597

如果这突然出现，请尝试删除 .net 框架文件夹中的临时 asp.net 文件。如果它回来了，那么你有一个引用问题。

# virtual-machine - 克隆 VirtualBox 机器

> ID：13955438
> 
> 赞同：1
> 
> 时间：2012-12-19T15:17:48.800
> 
> 标签：virtual-machine, virtualbox

我在 Centos5.8 上运行 Oracle VM VirtualBox。

我目前有两台机器；一个使用 Windows XP 和 IE6，第二个使用 Windows XP IE7。

我现在想创建第三个运行 Windows XP 的 IE8。

除了创建新机器并重新安装 Windows 之外，是否可以克隆或复制其中一台现有机器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:22:00.177

是的。我对 VirtualBox 并不完全熟悉（我使用 VMware Player），但概念仍然相同。克隆虚拟机的最简单方法是关闭虚拟机。找到该机器的文件所在的位置（通常是 .vmdk），然后复制并粘贴它。然后，您可以告诉 VirutalBox 打开该副本。

VirtualBox 提供的克隆功能是提供热克隆，或者在机器运行时克隆机器。大多数产品对此功能收费，但仍允许用户使用上述过程在关闭机器的情况下创建冷拷贝。

* * *

-或者-

如果这不起作用，您可以复制 .vdi 文件（硬盘驱动器）并将其附加到新 VM 作为主 HDD。我在一个论坛上找到了这个帖子。

“我已经成功地使用命令 VBoxManage clonevdi ImageYouWantToCopy.vdi DestinationImage.vdi 复制了 .vdi 硬盘映像。然后只需创建一个使用新 .vdi 的新 VM。这有点麻烦，但似乎工作正常。 "

[https://forums.virtualbox.org/viewtopic.php?t=674](https://forums.virtualbox.org/viewtopic.php?t=674)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-11T16:56:05.313

是的，您可以克隆一个带有所有快照的 VirtualBox 机器。最好从命令行执行，因为它变得非常可重复，您可以一遍又一遍地使用它。

从命令行类型：

```
C:\Program Files\Oracle\VirtualBox\VBoxManage.exe clonevm old_VM_name --mode all new_VM_name --basefolder "C:\Users\username\VirtualBox VMs" --register 
```

这里是解释

`--mode all`: 声明所有快照和文件夹都应该被复制。

`--basefolder "C:\Users\username\VirtualBox VMs"`: 提到 VM 文件夹的位置

`--register`: 注册 VM，以便您可以在从 VirtualBox GUI 或 CLI 克隆过程后立即使用它

# c++ - 将字符串添加到二维数组并显示 cout 消息时出错（没有错误消息？）

> ID：13955439
> 
> 赞同：1
> 
> 时间：2012-12-19T15:17:47.060
> 
> 标签：c++, arrays

我是这个论坛的新手。任何关于代码、布局或其他相关内容的**建设性批评都将受到欢迎！**

我遇到的问题是关于（如标题所示）将字符串添加到标准座位预订程序中`fullName`的数组中。`seatArray`

我得到的错误是，一旦编译，`'please enter your second name'`. 编译时调试器中没有显示错误。我还假设这意味着没有任何东西被添加到我的数组中`seatArray`，所以如果你至少能指出我正确的方向，我将不胜感激！

注意：所有类都是单独的头文件

首先，我的 main.cpp 文件

```
// Main class - Scotia2
// Main cpp file
#include <iostream>
#include "menu.h"
using namespace std;

int main()
{

Menu m;
m.userMenu();

return 0;
}; 
```

我的`Menu`课（我不确定这与问题是否相关，但无论如何我都会包括在内）

```
// Menu class - Scotia2

#include <iostream>
#include "flight.h"

using namespace std;

class Menu
{
// Access specifier
public:

    int userMenu()
        {
            Flight f1;
            Booking b1;

            int option;

            cout << "Scotia Airlines\n";
            cout << "\n 1- Check Availability";
            cout << "\n 2- Book a Seat";
            cout << "\n 3- Cancel a Reservation";
            cout << "\n 4- Exit \n ";
            cout << "-------------------\n\n ";

            cin >> option;

            do{
                switch (option)
                {
                    case 1: f1.seatPlan();
                        break;

                    case 2: b1.addBooking();
                        break;

                    //case 3: c1.cancel; // Link to cancel.h
                        //break;

                    case 4: return (0);
                        break;
                }
              }while (option == 0); // End of do-while

                return option;
            cout << "\n";
        }// End of userMenu function
};// End of menu class 
```

我的`Flight`班级：

```
// Flight Class - Scotia 2
// Contains information on seating (array), space available and return to menu option.
#include <iostream>
#include <string>
#include "booking.h"

using namespace std;

class Flight
{

public:

    public:
    struct Seat
        {
            int Available;
            string fullName;
        };// End of struct

// Structure for seat plan (24 spaces available)
    struct Seat seatArray[4][6];

    void seatPlan()
    {   //------
        cout << "Scotia Airlines Seating Plan\n";
        cout << "------------------------\n";
        cout << " 1D  2D  3D  4D  5D  6D\n";
        cout << " 1C  2C  3C  4C  5C  6C\n";
        cout << "                       \n";
        cout << " 1B  2B  3B  4B  5B  6B\n";
        cout << " 1A  2A  3A  4A  5A  6A\n";
        cout << "------------------------\n\n\n";
        //------
        for (int i=0;i<4;i++)
        {
            for (int j=0;j<6;j++)
                {
                if (seatArray[i][j].Available == 0)
                cout << seatArray[i][j].fullName;

                else
                cout << "Seating Plan is unavailable";
                }
        }// End of for loop
    }// End of seatPlan function

};// End of Flight class 
```

最后，我的`Booking`课。我假设这是发生错误的地方。我尝试以不同的方式布置我的代码，因为我认为事情可能没有按正确的顺序执行。然而，这并没有真正奏效。

```
//Booking class - Scotia Airlines
//This class will reserve a seat for passenger

#include <iostream>
#include <string>

using namespace std;

class Booking{

    public:
    struct Seat
        {
            int Available;
            string fullName;
        };// End of struct

// Structure for seat plan (24 spaces available)
    struct Seat seatArray[4][6];

//variables for taking in customer details, calculating ticket cost (inc discounts) and adding details to system
    public:
    string fName, sName, busName, fullName;
    int age, livesAt;
    float discount, tickPrice, tCost;

    void addBooking()

    {
    cout << "\tBooking Menu \n\n";
    cout << "Please select ticket type: \n";
    cout << "1- Business \n";
    cout << "2- Western Isles \n";
    cout << "3- Ordinary \n";
    cin >> livesAt;

    // This will be used to calc total cost for each passenger dependant on ticket type
                    if(livesAt == 1)
                        {
                            discount = 0.75;
                            cout << "Please enter your business name\n";
                            cin >> busName;
                        }

                        else if (livesAt == 2)
                            {
                            discount = 0.90;
                            }

                        else
                            {
                            discount = 0.0;
                            }

    // Calculation - Standard ticket price is 60
                tickPrice = 60.0;
                tCost = (tickPrice * discount);

    //Create full name for pass to asign to seat
                fullName = fName + " " +sName;

    for(int i = 0; i < 4; i++)
     {
         for(int j = 0; j < 6; j++)
         {
             if(seatArray[i][j].Available == 1)
             {

                cout << "Please enter your first name \n";
                cin >> fName;
                cout << "Please enter your second name \n";
                cin >> sName;
                cin >> seatArray[i][j].fullName;
                seatArray[i][j].Available = 0;

             }// end of if
         }// end of nested for
     };//end of for

    // Message on screen for customer displaying cost of flight
        cout << "*******************************\n";
        cout << "\tBooking for " << fullName << " confirmed\n";
        cout << "\tTotal cost = " << tCost << " GBP.\n";

    }// End of addBooking function
};// End of Booking class 
```

我知道代码可能有点草率（相当新手程序员）所以正如我所说，任何提示等都非常受欢迎！#

亲切的问候，

ZM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:31:42.733

你想用这条线做什么：

```
cin >> seatArray[i][j].fullName; 
```

为什么用户在输入名字和姓氏之后还要输入他们的全名？或者，也许我误会了。正如@ahenderson 指出的那样，只需在.h 文件中声明SeatPlan 并在.cc 中定义方法。否则它是内联的，这意味着它会在项目中包含此 .h 文件的任何位置复制代码。从空间的角度来看效率低下。通常可以内联非常小的函数，这些函数只返回一些东西或进行非常小的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:28:46.680

在您使用第二个名称 ( `cin >> sName;`) 后，您会再次使用 来提示用户`cin >> seatArray[i][j].fullName;`。您是否打算改为执行以下操作？

```
cout << "Please enter your first name \n";
cin >> fName;
cout << "Please enter your second name \n";
cin >> sName;
fullName = = fName + " " + sName;
seatArray[i][j].fullName = fullName; 
```

此外，一旦输入了第二个名称，循环将继续，并提示下一个可用座位的名称。您需要设置一个条件，以便`for`在预订座位后跳出两个循环。你可以这样做：

```
bool booked = false;
for(int i = 0; i < 4 && !booked; i++)
{
  for(int j = 0; j < 6 && !booked; j++)
  {
    if(seatArray[i][j].Available == 1)
    {
      cout << "Please enter your first name \n";
      cin >> fName;
      cout << "Please enter your second name \n";
      cin >> sName;
      fullName = = fName + " " + sName;
      seatArray[i][j].fullName = fullName;
      booked = true;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:28:58.163

```
 cout << "Please enter your first name \n";
            cin >> fName;
            cout << "Please enter your second name \n";
            cin >> sName;
            cin >> seatArray[i][j].fullName; 
```

这将：

*   提示输入名字
*   将单个空格分隔的字符串读入局部变量 fName
*   提示输入第二个名字
*   将单个空格分隔的字符串读入局部变量 sName
*   *将另一个*以空格分隔的字符串读入`seatArray[i][j].fullName`

这些读取中的任何一个都将等待您输入某些内容，因此一旦您输入第二个名称，它就会静默返回等待`fullName`。

你已经有了这个代码：

```
//Create full name for pass to asign to seat
fullName = fName + " " +sName; 
```

但它在循环之前，何时`fName`并且`sName`尚未分配任何值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:29:18.067

在您回答“请输入您的第二个名字”后，您的程序仍在等待输入：

```
cin >> seatArray[i][j].fullName; 
```

# java - 将大包添加到新项目中（Eclipse）

> ID：13955441
> 
> 赞同：0
> 
> 时间：2012-12-19T15:17:53.807
> 
> 标签：java, eclipse

我创建了一个构建大量图表的构建器项目

该项目包含 4 个不同的包，每个包包含 2-4 个类。

我的问题是如何实现这个项目及其所有类并在我的新项目中使用它们而不必复制所有类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:19:35.560

将构建器项目添加到客户端项目的构建路径或从您的构建器项目构建一个 jar 并将其导入您的客户端项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:21:01.737

你可以为你的项目制作一个 jar。在 Eclipse 中，您可以使用 File -> Export.. -> Java -> Jar 文件来执行此操作。然后你可以导入你在新项目中创建的jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:21:07.727

在您的项目属性中，有一种方法可以引用您工作区中存在的其他项目。

转到项目 > 属性 > Java 构建路径 > 项目 > 添加

# sql - SQL合并多行

> ID：13955444
> 
> 赞同：0
> 
> 时间：2012-12-19T15:17:56.813
> 
> 标签：sql, oracle, concatenation, grouping

我正在简化问题，但这里的概念应该是相同的......

假设我们有一个`FOO`包含字段`ID`和`ATTRIB`的表，以及一个`BAR`包含字段`ID`、`A_MATCHING_ID`、的表`STATUS`。这些表如下所示：

**表 FOO：**

```
ID    -     ATTRIB
=====
1001  -     ATR_A
1002  -     ATR_B
1003  -     ATR_A
1004  -     ATR_B
1005  -     ATR_B

etc. 
```

* * *

**表酒吧：**

```
ID    -     FOO_MATCHING_ID   -     STATUS
=====
9901  -     1001              -     STAT_A
9902  -     1001              -     STAT_A
9903  -     1001              -     STAT_B
9904  -     1002              -     STAT_C
9905  -     1002              -     STAT_B
9906  -     1002              -     STAT_B
9907  -     1003              -     STAT_A

etc. 
```

`FOO`to是一对多的关系`BAR`。

我想使用计算/依赖字段 [HAS_STAT_A] 对这两个表运行查询：

**预期的查询结果：**

```
FOO_ID      -     HAS_STAT_A
=====
1001        -     TRUE
1002        -     FALSE
1003        -     TRUE 
```

**我怎样才能做到这一点？**

```
SELECT FOO.ID AS FOO_ID, [FILL THIS IN] AS HAS_STAT_A 
FROM FOO 
JOIN BAR ON FOO.ID = BAR.FOO_MATCHING_ID; 
```

我想过使用`CASE`，但不知道如何在多条记录中使用它。我还想过添加一些额外的子查询，但也不知道如何安排这些。

[这是相似](https://stackoverflow.com/q/10527157/698590)的，但不是我想要实现的。它导致我出现以下情况，但我得到了`GROUP BY`错误。当我添加`GROUP BY`时，我得到`MISSING KEYWORD`错误。

```
SELECT FOO.ID AS FOO_ID, 
    INSTR (LISTAGG (BAR.STATUS, ',') WITHIN GROUP (ORDER BY BAR.STATUS), 'STAT_A') AS HAS_STAT_A 
FROM FOO 
JOIN BAR ON FOO.ID = BAR.FOO_MATCHING_ID; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:21:04.577

```
select  foo.id as foo_id
,       case 
        when max(case when lower(trim(bar.status)) = 'stat_a' then 1 end) = 1 then 'true' 
        else 'false' 
        end as has_stat_a 
from    foo 
join    bar
on      foo.id = bar.foo_matching_id
group by
        foo.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:32:09.510

这是一种方法

```
SELECT 
    FOO.ID AS FOO_ID, 
    SUM(CASE WHEN BAR.[STATUS]='STAT_A' THEN 1 ELSE 0 END) AS HAS_STAT_A
FROM FOO 
    INNER JOIN BAR ON FOO.ID = BAR.FOO_MATCHING_ID
GROUP BY
    FOO.ID 
```

您也可以使用“have”关键字过滤掉 has_stat_a 为 0 的行

```
SELECT 
    FOO.ID AS FOO_ID, 
    SUM(CASE WHEN BAR.[STATUS]='STAT_A' THEN 1 ELSE 0 END) AS HAS_STAT_A
FROM FOO 
    INNER JOIN BAR ON FOO.ID = BAR.FOO_MATCHING_ID
GROUP BY 
    FOO.ID
HAVING
    SUM(CASE WHEN BAR.[STATUS]='STAT_A' THEN 1 ELSE 0 END) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:35:49.003

如果可能存在 in`foo`中没有匹配行的行`bar`，您可以尝试以下操作：

```
SELECT
    foo.id AS foo_id,
    NVL
    (
        (
            SELECT
                'TRUE'
            FROM
                bar
            WHERE
                bar.foo_matching_id = foo.id
                AND
                bar.STATUS = 'STAT_A'
                AND
                ROWNUM <= 1
        ),
        'FALSE'
    )
FROM
    foo 
```

可能有更有效的方法来重写此查询。

# facebook - 通过客户端 SDK 进行 facebook 身份验证 - 安全概念

> ID：13955450
> 
> 赞同：2
> 
> 时间：2012-12-19T15:18:16.827
> 
> 标签：facebook, api, authentication, login

我想我不完全理解 facebook OAuth-API 处理身份验证的方式。据我了解，它的工作原理基本上是这样的（客户端是 Android 手机，我的服务器是标准 LAMP 设置）： [fb auth http://i.imagebanana.com/img/hvlsb2dp/fbAuth.png](http://i.imagebanana.com/img/hvlsb2dp/fbAuth.png)

现在的问题是，客户端当然可以通过向我的服务器提交错误的用户 ID 来伪造第 3 步 - 例如，如果我的服务器响应请求[http://server.com/getConfidentialData.php?fbID=%FBID%](http://server.com/getConfidentialData.php?fbID=%FBID%)，并且用户设法获取其他人的 fb-userID，他可以将其放入请求中，他将获得属于其他人的数据。

如果我使用PHP-SDK，它如何知道我的用户是否登录了Android-App？

这是它应该工作的方式，还是我错过了什么？

谢谢，大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:58:41.633

唯一真正的解决方案：

当您拥有一个带有私人用户数据的服务器并且并非所有内容都在 Facebook 上时，您需要进行服务器端登录，一旦您了解了流程，这并不难实现。

检查 Facebook 上的图表并遵循他们在本示例中提供的指南，您就可以开始了。

[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:27:25.790

我有完全相同的问题......同样的感觉，但既然你没有任何答案，我会带你去看看我发现的。

我设计了以下解决方案：

我向我的服务器发送 fb 用户 ID、他的电子邮件（以在我的服务器中识别他）和他的访问令牌（通过 https 的所有内容，就好像它是一个特殊的登录调用一样）。

从我的服务器上我尝试访问令牌，如果这个有效（*）我也在我的服务器中登录和更新/注册用户。

(*) 我首先定义了工作，就好像我可以访问用户的电子邮件一样，但是具有该权限的任何其他应用程序都可以模拟我的用户，所以现在我延长了令牌寿命，这仅在令牌来自我的应用程序时才有效。

我希望这会有所帮助，同时，如果有人能真正解决这个问题并向我们解释其他人如何避免这种情况，我将不胜感激。

干杯!

# android - Android SQLiteConstraintException：错误代码 19

> ID：13955455
> 
> 赞同：0
> 
> 时间：2012-12-19T15:18:28.340
> 
> 标签：android, exception, sqlite

我有这个数据库结构：

```
protected static final String Buildings =
        "CREATE TABLE " 
                + Building.BUILDING_TAG + " ( " 
                + Building.ID + " LONG PRIMARY KEY, "
                + Building.NOME + " TEXT,"
                + Building.POSIZIONE + " TEXT, " 
                + Building.DESCRIZIONE + " TEXT, "
                + Building.DATA_C + " LONG, "
                + Building.DATA_U + " LONG, "
                + Building.LINK + " TEXT, "
                + Building.NUMERO_DI_PIANI + " INTEGER NOT NULL, "
                + Building.VERSIONE + " INTEGER, "
                + Building.FOTO + " TEXT, "
                + Building.GEOMETRIA + " TEXT "
                +");"; 
```

我正在尝试插入这些数据：

```
id=6 
descrizione=nel mezzo del cammin di nostra vita 
data_creazione=1353904373000 
geometria=[[46074778,13234062],[46074778,13235521],[46073945,13235521],[46073885,13233976],[46074778,13234062],] 
versione=1 
link=http://www.caso.com/ 
nome=erferf 
foto= 
posizione=[46074332,13234748] 
data_update=1355731095000 
```

每次我从模拟器中删除数据库时，在代码中，我都会尝试删除具有相同 ID 的最终建筑物。

这是错误：

```
E/Database(16622): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
E/Database(16622):  at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
E/Database(16622):  at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
E/Database(16622):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1582)
E/Database(16622):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426) 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:22:33.577

当错误在右边时，我正在向左看。

我也忘了保存字段**numero_di_piani**

这么笨！

# url - Joomla 菜单和侧边菜单的 URL 结构

> ID：13955459
> 
> 赞同：0
> 
> 时间：2012-12-19T15:19:07.890
> 
> 标签：url, menu, joomla2.5, joomla-sef-urls

我似乎无法按照我想要的方式获得我的 URL 结构。

我的类别/文章有以下结构

趋势
-子趋势--文章
--文章
-子趋势-- 文章 --
文章

等等。

我的主菜单有一个名为“趋势”的菜单项，其中有一个显示“子趋势”的子菜单。当我单击其中一个菜单项时，我的 url 是 domain.com/trends/subtrend，这正是我想要的。

但是在某些页面上，我有一个仅将子趋势显示为菜单项的侧菜单，当我单击其中一个菜单项时，我的 url 是 domain.com/subtrend，但我希望它是 domain.com/trends/subtrend。就像我的类别结构是如何制作的以及我的主菜单如何显示它一样。

我读到 Joomla 基于菜单结构“创建”它的 URL 结构，但是如何修复我的 URL 结构，以便侧菜单链接到与我的主菜单相同类型的链接。

请注意，我不考虑使用外部链接并手动插入它们作为解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:29:50.927

如果我解决了您的问题，您有两个不同的菜单吗？让我称它们为“Trends”和“TrendsSide”作为侧边菜单。

要保留结构 domain.com/trends/subtrend，您必须编辑 TrendsSide 中的每个条目并为每个子趋势使用“菜单项别名”。然后您必须从原始趋势菜单中选择相同的菜单条目。

现在您有两个不同的菜单，但第二个条目的每个条目都指向第一个菜单的一个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T21:56:10.360

使用 sh404sef：

Sh404sef > Configuration > General > by Components > Tags 在文本框中添加“tags/”。

例子：

之前 - [https://castle-rock-lake.com/adams-county.html](https://castle-rock-lake.com/adams-county.html)

之后 --> [https://castle-rock-lake.com/tags/adams-county.html](https://castle-rock-lake.com/tags/adams-county.html)

# file - ASP.NET 中的 Response.Output 是否修改流中文件的编码？

> ID：13955462
> 
> 赞同：0
> 
> 时间：2012-12-19T15:19:12.440
> 
> 标签：file, encoding, stream, response

在我的**ASP.NET Web 窗体**应用程序中，我必须让用户下载 XML 文件。为了做到这一点，当他们按下下载按钮时，会执行以下代码：

```
Response.Clear()
Response.CacheControl = "Private"
Response.Cache.SetExpires(DateTime.Now.AddMinutes(3))
Response.ContentEncoding = Encoding.GetEncoding("ISO-8859-1")
Response.ContentType = "text/xml"
Response.AddHeader("Content-Disposition", String.Format("attachment; filename={0}.xml", fileName))
Dim xmlFile As String = _xmlServices.GetXmlFile(fileId);

If Not String.IsNullOrEmpty(xmlFile) Then
    Dim xdoc As XmlDocument = New XmlDocument()
    xdoc.LoadXml(xmlFile)
    xdoc.Save(Response.Output)
End If

Response.Flush()
Response.End() 
```

该`GetXmlFile(fileId)`函数返回一个包含 XML 的字符串。获得的字符串已经具有指定的编码 ( `<?xml version="1.0" encoding="ISO-8859-1"?>`) 和签名。这意味着如果文件被修改，签名将不再有效。

`GetXmlFile(fileId)`我对**WPF 应用程序**使用相同的功能，它运行良好。

然而，在我的 ASP.NET 应用程序中，我有两个问题：

1.  如果我没有明确指定`Response.ContentEncoding = Encoding.GetEncoding("ISO-8859-1")`下载的 XML 文件有编码`<?xml version="1.0" encoding="UTF-8"?>`。这不是一个大问题。

2.  **从ASP.NET 应用程序**下载的 XML 文件比从**WPF 应用程序**下载的文件多一个回车符。这些文件可能看起来与解析相同，因为回车出现在标记的末尾，而不会影响数据。但签名无效，因为文件在放置后已更改。

因此，我认为`Response.Output`流以某种方式修改了文件。或者这个错误背后可能有另一个原因？

# css - 在 iFrame 中缩小文本/内容而不创建额外的空白

> ID：13955463
> 
> 赞同：3
> 
> 时间：2012-12-19T15:19:25.343
> 
> 标签：css, html, iframe

我的网站上有一个 iframe 浏览器实例，我已经缩小了使用从这个[问题](https://stackoverflow.com/questions/166160/how-can-i-scale-the-content-of-an-iframe)中找到的答案的内容。我注意到，因为我使用的是 CSS 缩放和转换属性，所以我的 iframe 浏览器实例周围出现了额外的空白。填充的 iframe 加上它周围的空白包含我的 iframe 的原始宽度和高度（在通过变换和缩放缩小之前）。

结果如下所示：

![在此处输入图像描述](../Images/cea350e343a710b58ecfeca570bb2bc4.png)

请注意，灰色突出显示的部分是页面的原始非 iframe 部分。iframe 是页面中未突出显示的部分。在原始 iframe 内部，有缩小的浏览器实例及其周围的额外空白区域。

摆脱这个空白的最佳方法是什么，或者是否有不同的方法来缩小我的 iframe 以便不创建额外的空白？

这是我当前的 CSS：

```
#iframe {
    width: 800px; 
    height: 800px; 
    border; 1px solid black; 
    zoom: 1.00; 
    -moz-transform: scale(0.65); 
    -moz-transform-origin: 0 0;
    -o-transform: scale(0.65); 
    -o-transform-origin: 0 0; 
    -webkit-transform: scale(0.65); 
    -webkit-transform-origin: 0 0;
} 
```

和 HTML：

```
<iframe id = 'iframe' src = 'http://www.wsj.com'></iframe> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:13:25.700

我创建了一个包含 iFrame 的 Div。Div 充当 iFrame 的限制性边界，并消除了额外的空白。

CSS：

```
#iframe {
    width: 1100px; 
    height: 1000px; 
    border: 1px solid black; 
    zoom: 1.00; 
    -moz-transform: scale(0.65); 
    -moz-transform-origin: 0 0;
    -o-transform: scale(0.65); 
    -o-transform-origin: 0 0; 
    -webkit-transform: scale(0.65); 
    -webkit-transform-origin: 0 0;
}
#iframetest {
    width: 715px; 
    height: 650px; 
    margin: 10px; 
    border-style: solid; 
    border-width: 10px;
}        
#iframetest a {
    position: absolute; 
    top: -16px; 
    right: -16px;
} 
```

HTML：

```
echo "<div id = 'iframetest' style = 'display: none'>
          <iframe id = 'iframe' src = 'http://www.wsj.com'></iframe>
          <a href = 'javascript: closeiframe();'><img src = 'images/exitbutton.png' 
           width = '22px' height = '22px'>
          </a>
      </div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:10:55.710

此代码使整个页面嵌入，但您可以调整宽度和高度

```
<head>
<style type="text/css">
html {height:100%}
body {
margin:0;
height:100%;
overflow:hidden
}
</style>
</head>

<body>
<iframe allowtransparency=true frameborder=0 id=rf sandbox="allow-same-origin allow-forms allow-scripts" scrolling=auto src="http://www.wsj.com" style="width:100%;height:100%"></iframe>
</body> 
```

# bash - 如何使用时间戳进行 grep 计数

> ID：13955466
> 
> 赞同：7
> 
> 时间：2012-12-19T15:19:34.923
> 
> 标签：bash, shell, unix, terminal, grep

如何`grep`使用时间戳进行计数？

示例：如果我有一个文件，我`xyz`每次都在其中搜索一个值。该文件会定期更新。

```
20121912-07:15:55 abc cbfr xyz
20121912-07:16:40 mni cbfr xyz
-----------
-----------
-----------

20121912-08:15:55 gty cbfr xyz
20121912-08:20:55 jui uio xyz 
```

我想找出`xyz`在`20121912-08:15:55`这种情况下应该是`2`.

执行 a`grep -c "xyz" filename`读取整个文件并给出结果。我想在最后一次更新之后或使用时间戳来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:26:39.950

试试这个单行：

```
awk '$NF=="xyz"&&$1>="20121912-08:15:55"{x++;}END{print x}' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T23:10:42.430

我假设您想查找出现的模式：“xyz”，其中日期/时间值大于或等于指定的日期/时间：“20121912-08:15:55”。这就是我使用`GNU awk`. 像这样运行：

```
awk -v pattern="xyz" -v time="20121912-08:15:55" -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    stamp = convert(time)
}

$0 ~ pattern && convert($1) >= stamp {
    i++
}

END {
    print i
}

function convert(var) {

    x = "(....)(..)(..)-(..):(..):(..)"
    y = "\\1 \\3 \\2 \\4 \\5 \\6"

    return mktime(gensub(x,y,"",var))
} 
```

结果：

```
2 
```

或者，这是单线：

```
awk -v pattern="xyz" -v time="20121912-08:15:55" 'BEGIN { stamp = convert(time) } $0 ~ pattern && convert($1) >= stamp { i++ } END { print i } function convert(var) { return mktime(gensub(/(....)(..)(..)-(..):(..):(..)/,"\\1 \\3 \\2 \\4 \\5 \\6","",var)) }' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:56:41.553

您可以告诉 sed 从给定范围（起点和终点）的文件中打印行 - 范围可以是正则表达式或行号表示法。

根据您的需要，应该这样做：

```
$ sed -n '/20121912-08:15:55/,$p' input.txt | grep -c xyz 
```

这里起点由日期给出，被视为正则表达式，终点是最后一行符号`$`。`p`告诉 sed 打印给定范围内的行。`-n`sed 选项告诉它不打印正在处理的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T19:52:40.093

从 Kent 的回答中汲取灵感，这里有一些 Perl 将奇数时间戳转换为 YYYYMMDD 格式：

```
ts="20121912-08:15:55" patt="xyz" perl -lane  '
    BEGIN {
        ($wanted_ts = $ENV{ts}) =~ s/^(....)(..)(..)/$1$3$2/;
        $pattern = qr{$ENV{patt}};
    }
    ($this_ts = $F[0]) =~ s/^(....)(..)(..)/$1$3$2/;
    $count++ if $this_ts ge $wanted_ts and /$pattern/;
    END {print $count}
' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T15:24:58.950

这是一种 hack，但仅`grep`适用于您想要的最早日期，然后使用管道打印所有行，`-A`然后通过管道传输到`grep -c xyz`：

```
$ fgrep -A 100 '20121912-08:15:55' file | fgrep -c 'xyz'
2 
```

注意：`fgrep`只是固定字符串`grep`，因为您不使用`regex`模式，它与做`grep -F`.

由于不那么 hacky 的方式是使用`sed`从日期开始打印所有行，这样您就不需要确保值 to`-A`将涵盖文件的长度：

```
$ sed -n '/20121912-08:15:55/,$p' file | fgrep -c 'xyz'
2 
```

这当然假设您的文件是按时间戳排序的，如果不是那么：

```
$ sort file | sed -n '/20121912-08:15:55/,$p' | fgrep -c 'xyz'
2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T16:19:27.557

嗯，赶紧写一篇：

```
 grep xyz filename | sed -r 's/^([^ ]+).*/ 20121912-08:15:55 <= \1/' | sed -r 's/([0-9]{4})([0-9]{2})([0-9]{2})/\1\3\2/g' | sed 's/[-:]//g' | bc | grep 1 | wc -l 
```

它非常难看（我不是 sed 也不是命令行大师）并且可能会缩短，但这是一种方法。下面的解释：

```
 grep xyz filename                                  //gets all interseting lines
| sed -r 's/^([^ ]+).*/ 20121912-08:15:55 <= \1/'    //transform them into 
                                                       //comparison with the 
                                                       //date you want
| sed -r 's/([0-9]{4})([0-9]{2})([0-9]{2})/\1\3\2/g' //invert day and month
| sed 's/[-:]//g'                                    //remove separators
| bc                                                 //ask bc result 
| grep 1                                             //get true results only
| wc -l                                              //and finally count them 
```

对于您示例的最后一行，这些步骤将给出：

```
20121912-08:20:55 jui uio xyz                  //grep 'xyz'
20121912-08:15:55 <= 20121912-08:20:55         //sed
20121219-08:15:55 <= 20121219-08:20:55         
20121219081555 <= 20121219082055               
1                                              //result from bc 
```

高温高压

# asp.net-mvc-3 - 尝试向 wcf REST 服务发布请求时出现意外的 HTML 响应

> ID：13955468
> 
> 赞同：0
> 
> 时间：2012-12-19T15:19:37.763
> 
> 标签：asp.net-mvc-3, wcf, wcf-rest

有人可以告诉我如何将请求发布到 wcf 休息服务吗？我的代码在下面

```
TResponse Post<TRequest, TResponse>(string uri, TRequset input){
  HttpClient client = new HttpClient();
  HttpContent content = new ObjectContent<TRequest>(input, new XmlMediaTypeFormatter());
  HttpResponseMessage message = client.PostAsync(uri, content).Result;
  return message.Content.ReadAsAsync<TResponse>().Result;
} 
```

但它给出了以下异常

```
System.InvalidOperationException was unhandled by user code
HResult=-2146233079
Message=No MediaTypeFormatter is available to read an object of type 'String' from content with media type 'text/html'.
Source=System.Net.Http.Formatting 
```

消息变量的值为

```
message {StatusCode: 400, ReasonPhrase: 'Bad Request', Version: 1.1, Content: System.Net.Http.StreamContent, Headers:
{
Connection: Close
Cache-Control: private
Date: Wed, 19 Dec 2012 14:36:32 GMT
Server: ASP.NET
Server: Development
Server: Server/10.0.0.0
X-AspNet-Version: 4.0.30319
Content-Length: 1766
Content-Type: text/html
}}  System.Net.Http.HttpResponseMessage 
```

我知道 wcf rest 已被弃用。但是有人可以告诉我如何实现吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:20:10.710

默认情况下，WCF 使用 SOAP 作为消息协议，从您的示例来看，您似乎正在使用 XML 正文执行 HTTP。

如果您使用的是普通的 WCF 服务，那么使用典型的 WCF 客户端（通过 ChannelFactory 或类似的东西创建）并使用它来调用不同的操作会更容易。

如果您没有使用典型的 WCF 服务，那么共享您的配置/代码可以帮助您获得更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:40:44.910

每当您收到 HTML 和您预期的数据时，HTML 很可能代表来自服务器的错误消息。捕获并显示它，您将看到错误是什么。

# jquery - 根据搜索条件从表中过滤。这是搜索模块的好方法吗？

> ID：13955470
> 
> 赞同：0
> 
> 时间：2012-12-19T15:19:54.223
> 
> 标签：jquery, html

我相信这是一个很好的实现，所以我决定在这里问，因为我在谷歌中没有找到任何结果。

我有一个包含许多行的表，其中包含来自数据库查询的结果。它是一个搜索模块，我想捕获每个字符输入并从表中过滤掉与输入值不匹配的结果。

最好的方法是什么？我正在考虑检查每个`<tr>`id，如果搜索条件与 id 属性中的字符串不匹配，这将`<tr>`被隐藏。

我正在考虑使用 ajax 请求来发布输入，但网络流量会增加，搜索不会那么快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:45:52.077

好吧，我不认为过滤视觉组件是一个好方法。HTML 只是视觉数据。

我宁愿将数据创建为对象的集合，然后将此集合用作表的源。每当您更改源时，更新生成的输出。这将为您提供更大的灵活性，但也可以分离关注点。

我使用knockoutJS来解决这个问题。

干杯。

# android - Actionbarsherlock 后退按钮和智能手机后退按钮

> ID：13955472
> 
> 赞同：0
> 
> 时间：2012-12-19T15:20:02.647
> 
> 标签：android, android-activity, actionbarsherlock, android-lifecycle

**问题：**

当我在第二个活动上按下智能手机和操作栏的后退按钮时，我有想要回调的主要活动。但它总是崩溃，当我放一个finish（）时它才起作用；在主要活动中，但如果我这样做，那么智能手机的后退按钮将无法正常工作。

**主要活动：**

```
public class Principal extends SherlockActivity {

    public static int THEME = R.style.Theme_Sherlock;
    private Button entrar;
    private Button cadastrar;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            //setTheme(Principal.THEME); //Used for theme switching in samples
            super.onCreate(savedInstanceState);
            setContentView(R.layout.home);

            entrar = (Button)findViewById(R.id.entrar); 
            entrar.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                {

                    startActivity(new Intent(Principal.this,LoginActivity.class)); 
                    finish();
                }
            });
            cadastrar = (Button)findViewById(R.id.cadastrar_home); 
            cadastrar.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                {

                    Intent intent = new Intent(Principal.this, RegisterActivity.class);
                    startActivity(intent);
                    //finish();
                }
            });
        } 
```

**第二活动：**

```
public class RegisterActivity extends SherlockActivity{

    protected void onCreate(Bundle savedInstanceState) {
        setTheme(Principal.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) 
        {

        case android.R.id.home:
             // Do whatever you want, e.g. finish()
            Intent intent = new Intent(this, Principal.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
             break;

          }
        return true;
    }
} 
```

已经尝试了很多方法，但都没有，只有finish();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:24:36.117

在您的第二个活动中，只需删除您的意图和 startActivity 的东西。只需要：

```
case android.R.id.home:
    finish();
break; 
```

finish() 将从后台堆栈中删除该活动，因此在启动您希望用户通过按后退按钮返回的新活动时不要使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:26:28.657

您不想从 重新启动您的主要活动`SecondActivity`，您只想完成第二个活动并返回到上一个活动。尝试将以下代码替换为`SecondActivity`--

```
Intent intent = new Intent(this, Principal.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent); 
```

只需`finish()`.

# google-maps-api-2 - 如何在 Google Maps v2 中获取标记的位图？

> ID：13955473
> 
> 赞同：2
> 
> 时间：2012-12-19T15:20:03.580
> 
> 标签：google-maps-api-2

在 Android 版 Google Maps v2 中，有一个**Marker**对象。它有一个图标字段，允许您为此标记设置可绘制对象。但是，我想获得以前在标记上设置的图标。有没有办法做到这一点？我在地图上有几十个标记，我想计算每个标记的可绘制对象的边界，以避免碰撞。

谢谢你，伊戈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:35:44.580

以下是 Google Maps APIS v2 演示文件中的示例代码。这向我们展示了如何使用谷歌地图中的自定义图标。

```
 private void addMarkersToMap() {
        // Uses a colored icon. this is default icon.
        mBrisbane = mMap.addMarker(new MarkerOptions()
                .position(BRISBANE)
                .title("Brisbane")
                .snippet("Population: 2,074,200")
                .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));

        // **Uses a custom icon.**
        mSydney = mMap.addMarker(new MarkerOptions()
                .position(SYDNEY)
                .title("Sydney")
                .snippet("Population: 4,627,300")
                .icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow))); 
```

**R.drawable.arrow**将是您的自定义图标：使用图形软件（如 Photoshop）制作您的图标，然后将您的图标插入项目中的**res/drwable**文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T07:35:42.667

**这对我有帮助**

```
 markerOptions.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED)); 
```

# c# - Word 2007 删除分节符

> ID：13955478
> 
> 赞同：3
> 
> 时间：2012-12-19T15:20:19.180
> 
> 标签：c#, replace, ms-word, ms-office

我有一个 word 2007`.doc`文件，其中包含多个按部分分隔的子文档。

有没有办法从文档中删除所有分节符？

我已尝试查找并替换它们，但收到错误消息。

```
private void RemoveAllSectionBreaks(Word.Document doc)
{
    Word.Find find = doc.Range(ref oMissing, ref oMissing).Find;
    find.ClearFormatting();
    //find.Text = "^b"; // This line throws an error
    find.Text =((char)12).ToString(); // Same error when attempting it this way
    find.Replacement.ClearFormatting();
    find.Replacement.Text = "";

    find.Execute(ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, Word.WdReplace.wdReplaceAll, ref oMissing, ref oMissing, ref oMissing, ref oMissing);
} 
```

该`find.Text`行将产生错误 -

> 用户代码未处理 SEHException
> 
> 外部组件引发的异常。

我没有得到任何关于错误可能是什么的进一步细节。该代码在 Word 2003 中工作正常，但我需要在 Word 2007 中工作。

我是否遵循 2007 年单词的正确方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T16:45:58.640

我最终采用了不同的方法。由于单词查找功能导致错误，我决定对搜索/删除进行编码。以下代码删除了它遇到的所有分节符。

```
private void RemoveAllSectionBreaks(Word.Document doc)
{
    Word.Sections sections = doc.Sections;
    foreach (Word.Section section in sections)
    {
        section.Range.Select();
        Word.Selection selection = doc.Application.Selection;
        object unit = Word.WdUnits.wdCharacter;
        object count = 1;
        object extend = Word.WdMovementType.wdExtend;
        selection.MoveRight(ref unit, ref count, ref oMissing);
        selection.MoveLeft(ref unit, ref count, ref extend);
        selection.Delete(ref unit, ref count);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:30:32.273

回归较晚，但​​我使用的另一个解决方案是，您也可以使用 vsto 查找和替换使用“^m”作为节和“^p”作为段落替换分节符，或者用空字符串替换分节符。

```
using Word = Microsoft.Office.Interop.Word;

object missing = Missing.Value;
Word.Document tmpDoc = wordApp.Documents.Open(fileToOpen);

object findText = "^m";
object replaceText = "^p^p";
tmpDoc.Range().Find.Execute(ref findText,
    true, true, true, ref missing, ref missing, ref missing,
    ref missing, ref missing, ref replaceText, Word.WdReplace.wdReplaceAll, 
    ref missing, ref missing, ref missing, ref missing); 
```

# javascript - div 与其他 div 高度相同

> ID：13955479
> 
> 赞同：5
> 
> 时间：2012-12-19T15:20:20.317
> 
> 标签：javascript, css, html

我有多个`div`标签：

存放内容的 main `div`，如果内容变大，高度显然也会变大，但其他 div 不会。

如何让其他 div 占据主 div 的高度？

## 代码

```
<div id="container">
    <span id="header">Fiction Tools</span>
    <span id="paragraph">Lots of text will be in this text box, 
    describing in great detail the awesomeness of Fiction Tools 
    and it’s capabilities. Fiction Tools is known for lots of 
    awesome things, here are a few:</span>
    <ul id="lists">
        <li>We have this awesome design made by Driptone.</li>
        <li>Did I mention, the design is awesome? Well, it is.</li>
        <li>You should be reading this in the voice of Morgan Freeman.</li>
        <li>In a galaxy, far, far away...</li>
    </ul>
    <span id="secondparagraph">Be sure to check out our latest 
    deals which can be found on our Twitter and Facebook profiles 
    for more updates! For any other updates, you can look at our 
    news feed to the right of your screen or tablet.</span>
    <br />
    <div id="first"></div>
    <div id="second"></div>
</div> 
```

## CSS

```
#container {
    border: 1px solid #aaa;
    width: 768px;
    min-height: 200px;
    background: white;
    position: absolute;
}

#first{
    border: 1px solid #aaa;
    width: 768px;
    min-height: 200px;
    background: white;
    position: absolute;
    top: 3px;
    left: 3px; 
    z-index:-1;
}

#second{
    border: 1px solid #aaa;
    width: 768px;
    min-height: 200px;
    background: white;
    position: absolute;
    top: 6px;
    left: 6px;
    z-index: -2;
}

#header {
    position: relative;
    font-size: 24px;
    font-weight: bold;
    color: #404040;
    padding: 25px;
    top: 15px;
}

#paragraph {
    position: relative;
    font-size: 12px;
    color: #8f8f8f;
    padding-left: 25px;
    padding-top: 20px;
    display: block;
}

#secondparagraph {
    position: relative;
    font-size: 12px;
    color: #8f8f8f;
    padding-left: 25px;
    padding-top: 7px;
    display: block;
}

#lists {
    position: relative;
    padding-left: 25px;
    padding-top: 10px;
} 
```

目前它看起来像这样：

![当前布局](../Images/9cb7e3cd4a0e4f5c9eac6a354295c88a.png)

如您所见，包含内容的 div 获得了高度，但其他人没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:33:19.960

您是否尝试将高度设为 100%：

[http://jsfiddle.net/egjUZ/](http://jsfiddle.net/egjUZ/)

```
#first{
        border: 1px solid #aaa;
    width: 768px;
    min-height: 200px;
    background: white;
    position: absolute;
    top: 3px;
    left: 3px; 
    z-index:-1;
    height: 100%;
}
#second{
    border: 1px solid #aaa;
    width: 768px;
    min-height: 200px;
    background: white;
    position: absolute;
    top: 6px;
    left: 6px;
    z-index:-2;
    height: 100%
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:34:46.827

我的第一个解决方案很糟糕，这按预期工作。

HTML

```
<div id="main">
    <span id="header">Fiction Tools</span>
    <span id="paragraph">Lots of text will be in this text box, describing in great detail the awesomeness of Fiction Tools and it’s capabilities. Fiction Tools is known for lots of awesome things, here are a few:</span>
    <ul id="lists">
        <li>We have this awesome design made by Driptone.</li>
        <li>Did I mention, the design is awesome? Well, it is.</li>
        <li>You should be reading this in the voice of Morgan Freeman.</li>
        <li>In a galaxy, far, far away...</li>
    </ul>
    <span id="secondparagraph">Be sure to check out our latest deals which can be found on our Twitter and Facebook profiles for more updates! For any other updates, you can look at our news feed to the right of your screen or tablet.</span>
    <br />
    <div id="first"></div>
    <div id="second"></div>
</div> 
```

CSS

```
#main div {
    height: 100%;
}

#main, #main div {
    background-color:white;
    border: 1px solid #aaa;
    min-height: 200px;
    position: absolute;
    width: 768px;
}

#main span {
    font-size: 12px;
    padding: 25px;
    position: relative;
}

#first{
    top: 3px;
    left: 3px;
    z-index:-1;
}

#second{
    top: 6px;
    left: 6px;
    z-index:-2;

}

#header {
    font-size: 24px;
    font-weight: bold;
    color: #404040;
    top: 15px;
}

#paragraph {
    font-size: 12px;
    color: #8f8f8f;
    padding-top: 20px;
    display: block;
}

#secondparagraph {
    color: #8f8f8f;
    padding-top: 7px;
    display: block;
}

#lists {
    position: relative;
    padding-left: 25px;
    padding-top: 10px;
} 
```

JSfiddle [http://jsfiddle.net/tpcAU/2/](http://jsfiddle.net/tpcAU/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:29:24.547

这可以使用 jQuery 来完成，如下所示：

```
var articleHeight = $("#container").height();
$("#first").css({'height': +articleHeight});
$("#second").css({'height': +articleHeight}); 
```

这可能不是最好的方法，但它应该工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:29:33.420

如果您的主要目标是给出一个*堆叠的外观*，那么您也可以将您的内容包装在“第一个”和“第二个”div 中。

```
<div id="container">
 <div id="first">
  <div id="second">
 <!-- content as before -->
  </div>
 </div>
</div> 
```

# c# - 与 Code First 的单向一对多关系

> ID：13955482
> 
> 赞同：7
> 
> 时间：2012-12-19T15:20:33.250
> 
> 标签：c#, .net, entity-framework, ado.net, ef-code-first

我在联系人和电话之间有一个一对多的单向关系，定义如下：

```
class Contact {
    int ContactId {get; set}
    ICollection<Phone> Phones {get; set}
}
class Phone {
    int PhoneId {get; set;}
    string PhoneNumber {get; set;}
} 
```

现在在域层，我尝试执行以下操作：

```
someContact.Phones.Remove(somePhone); 
```

当我尝试打电话时，`context.SaveChanges()`我得到一个例外，因为关系被定义为必需的（例如，没有联系人就不能存在电话）。
如何在不使用外键或 Phone 中的导航属性且无需在调用`DbSet<Phone>.Remove(Phone)`之前先调用的情况下解决此问题`SaveChanges()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:43:28.760

你基本上回答了你自己的问题，因为你描述的两件事是分开的：

1.  取消链接对象
2.  删除对象

EF 可能有一个聪明的方法来做到这一点，但其他人也提出了同样的问题，并得到了你提到的答案：

例如[EF 4.1：从集合中删除子对象不会删除它 - 为什么？](https://stackoverflow.com/questions/6125871/ef-4-1-removing-child-object-from-collection-does-not-delete-it-why)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:45:58.190

有一种方法可以完成 Matthew 在单个步骤中描述的两种镫骨。它需要对您的模型进行一些更改 - 您必须向`Phone`实体添加外键并创建一个包含`PhoneId`和的复合键`ContactId`。

这使得`Phone`类的实例与类的实例相关联`Contact`。使用这些设置，当您从联系人`someContact.Phones.Remove(somePhone);`中删除电话时，EF 会从数据库中删除电话，因为它知道如果没有与该特定联系人的连接，电话就无法存在。

**楷模：**

```
public class Contact {
    public int ContactId { get; set; }
    public virtual ICollection<Phone> Phones { get; set; }
}

public class Phone {
    public int PhoneId { get; set; }
    public int ContactId { get; set; }
    public string PhoneNumber { get; set; }
} 
```

**配置：**

```
modelBuilder.Entity<Contact>()
    .HasMany(o => o.Phones)
    .WithRequired()
    .HasForeignKey(f => f.ContactId)
    .WillCascadeOnDelete(true);

modelBuilder.Entity<Phone>()
    .HasKey(o => new { o.PhoneId, o.ContactId }); 
```

# java - 我使用 PircBot API 的机器人没有连接到服务器

> ID：13955483
> 
> 赞同：1
> 
> 时间：2012-12-19T15:20:35.523
> 
> 标签：java, sockets, bots

我决定为我的 Twitch.TV 频道编写一个 IRC 机器人。它使用 PircBot API。

我在尝试运行它时收到以下错误消息：

```
java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown 
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at org.jibble.pircbot.PircBot.connect(PircBot.java:140)
    at NewbieBot.main(NewbieBot.java:19) 
```

我到目前为止的代码是：

```
import org.jibble.PircBot.*;
import java.io.IOException;

public class NewbieBot extends PircBot {
    public NewbieBot() {
        this.setName("newbiebot");
    }

    public void main(String[] args) {
        NewbieBot bot = new NewbieBot();
        bot.setVerbose(true);
        bot.setAutoNickChange(true);
        try {
            System.out.println("Attempting to join server");
//            bot.connect("newbiedoodle.jtvirc.com", 6667, "newbieschannel");
            bot.connect("irc.esper.net", 6697, "newbiebot");
        } catch (NickAlreadyInUseException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (IrcException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        if (bot.isConnected()) {
            System.out.println("Connected!");
        }
        else {
            System.out.println("Failed to connect.");
            return;
        }
    }
}
public void onMessage(String channel, String sender, String login, String hostname, String message) {
    if (message.equalsIgnoreCase("test!") {
        sendMessage(channel, "Testing!");
    }
    if (message.equalsIgnoreCase(">cmds")) {
        sendMessage(channel, "   ------ Commands ------   ");
        sendMessage(channel, ">cmds: Show the bot commands");
        sendMessage(channel, ">rules: Show the stream rules");
        sendMessage(channel, ">mods: Show list of online mods");
        sendMessage(channel, ">info: Show channel info");
    }
} 
```

如果有人能弄清楚什么是错的，请告诉我。

注意：我在家中对此进行了测试并完全禁用了防火墙，但它仍然无法连接。

# facebook-graph-api - Facebook API：我无法将消息发布到朋友的墙或其他人的墙

> ID：13955488
> 
> 赞同：-1
> 
> 时间：2012-12-19T15:20:47.663
> 
> 标签：facebook-graph-api

我不知道为什么我可以用来`$post=$facebook->api('/me/feed','post','message');`在我的墙上发布消息（只有消息，没有链接，没有视频，没有照片），但是当我用我的朋友 ID 或其他 ID 替换“我”时，我无法发布消息，尽管我的应用程序有权需要在提要上发布消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:23:44.870

在用户朋友的墙上发帖是一项已弃用的功能，并且很快将不再可用，因为在 99% 的情况下它是不需要的和垃圾邮件。

请参阅路线图：

[https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)

```
Removing ability to post to friends walls via Graph API 
```

因此，如果您创建一个新应用程序，“2013 年 2 月重大更改”将已被激活，并且不再可能。这主要是出于垃圾邮件的原因，朋友墙上没有严肃的应用程序帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:10:54.897

是的，但在 Facebook 于 2013 年 2 月建立新路线图后，这是可能的。只需在您的项目中实现 GarphAPI 和 ASIHTTPRequest 并使用以下代码在朋友墙上发布带有图像的文本......

```
 NSString *urlString = [NSString stringWithFormat:@"https://graph.facebook.com/%@/photos?access_token=%@",[FRIEND_ID], fbGraph.accessToken];

    UIImage * pic = [UIImage imageNamed:@"image.png"];
    NSData *picData = UIImageJPEGRepresentation(pic, 1);
    NSURL *url = [NSURL URLWithString:urlString];
    ASIFormDataRequest *newRequest = [ASIFormDataRequest requestWithURL:url];
    [newRequest setPostValue:@"This is Sample Text" forKey:@"message"];
    [newRequest setData:picData forKey:@"data"];
    [newRequest setPostValue:fbGraph.accessToken forKey:@"access_token"];
    [newRequest setDelegate:self];
    [newRequest startAsynchronous]; 
```

这将作为 100% 的欢呼。我现在正在使用它...顺便将 FBGraph.h 和 ASIFormDataRequest.h 导入到您的实现文件中。

# collections - groovy：更改列表的每个元素并加入

> ID：13955489
> 
> 赞同：11
> 
> 时间：2012-12-19T15:20:52.320
> 
> 标签：collections, groovy, closures

我想将列表的每个元素用单引号括起来并将它们连接成一个字符串。

样本输入：`["aa", "bb", "cc"]`

预期输出：`"'aa', 'bb', 'cc'"`

我猜想这可以通过收集+关闭来完成，所以我尝试了：

```
def mylist = ["aa", "bb", "cc"]
println mylist.collect{ 'it' }.join(', ') 
```

但输出是：`"it, it, it"`这不是我想要的。

如何在列表的每个元素上附加和预先附加一个单引号？除了收集和加入之外，还有其他单线（或短）常规解决方案吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T15:29:20.367

你应该试试

```
mylist.collect{ "'$it'" }.join(', ') 
```

与`'it'`您一起返回字符串“it”。

# xslt - XSLT 2.0 在 Java 中使用 Saxon 进行排序

> ID：13955495
> 
> 赞同：0
> 
> 时间：2012-12-19T15:21:01.603
> 
> 标签：xslt, saxon

这是 XSLT 排序边缘情况的后续，[用于按元素名称进行升序排序](https://stackoverflow.com/questions/13052896/xslt-sort-edge-case-for-ascending-sort-by-element-name)

我已经设法使用该问题中描述的答案解决了大多数问题。但是，仍然存在排序无法按预期工作的情况。

这是我的源 XML -

```
<Sources>
   <name rank="">ABcoop / Jiji Commodities News (Japanese) !RSC!</name>
   <name rank="">ABcoop Treasury &amp; Company News (Japanese) !RSS!</name>
   <name rank="">ABcoop Treasury News (Japanese) !RS!</name>
   <name rank="">AB Corporate Finance News !RINVB!</name>
   <name rank="">AB Insider !RITV!</name>
</Sources> 
```

我的 XSLT：

```
<xsl:stylesheet version="2.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
default-collation="http://saxon.sf.net/collation?decomposition=full">

 <xsl:strip-space elements="*"/> 

 <xsl:template match="/*">
  <xsl:copy>
    <xsl:apply-templates select="name">
     <xsl:sort select="@rank" data-type="number"/>   
    <xsl:sort />     
    </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="name">
  <name rank="{@rank}">
    <xsl:copy-of select="text()"/>
    <xsl:apply-templates select="name">
     <xsl:sort select="@rank" data-type="number"/>   
    <xsl:sort />     
    </xsl:apply-templates>
  </name>
 </xsl:template>
</xsl:stylesheet> 
```

排序输出（不正确）：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <Sources>
       <name rank="">ABcoop / Jiji Commodities News (Japanese) !RSC!</name>
       <name rank="">ABcoop Treasury &amp; Company News (Japanese) !RSS!</name>
       <name rank="">ABcoop Treasury News (Japanese) !RS!</name>
       <name rank="">AB Corporate Finance News !RINVB!</name>
       <name rank="">AB Insider !RITV!</name>
    </Sources> 
```

预期的：

```
<?xml version="1.0" encoding="UTF-8"?>
       <Sources>
           <name rank="">AB Corporate Finance News !RINVB!</name>
           <name rank="">AB Insider !RITV!</name>
           <name rank="">ABcoop / Jiji Commodities News (Japanese) !RSC!</name>
           <name rank="">ABcoop Treasury &amp; Company News (Japanese) !RSS!</name>
           <name rank="">ABcoop Treasury News (Japanese) !RS!</name>           
        </Sources> 
```

编辑：附加信息，因为有几个答案建议我使用默认排序规则（删除默认排序规则属性）或`collation = "http://www.w3.org/2005/xpath-functions/collation/codepoint"`xsl:sort 元素。

但是，上一篇文章中指出的问题是，当使用 unicode 代码点作为排序规则 URI 时，我的源 XML 中的其他元素没有正确排序。

例如，

```
<Sources>
<name>FX Buzz News Service !fxbuz!</name>
<name>French General News Service !fb!</name>
<name>French Money / Debt News Service !fg!</name>
</Sources> 
```

未使用 unicode 代码点排序规则正确排序。我正在尝试找到适用于所有情况的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:26:21.737

您正在按 rank 属性排序，但这在每个元素中具有相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:20:42.383

尝试将 lang="en" 添加到 xsl:sort 以获得“英语”排序而不是 unicode 代码点排序。它可能不是你想要的，但它可能会更接近。

# signals - QThread、信号和槽

> ID：13955496
> 
> 赞同：-1
> 
> 时间：2012-12-19T15:21:02.377
> 
> 标签：signals, qthread, blackberry-10, slots

尝试将相机预览缓冲区渲染到 BB10 中的 opengl 渲染器时出现问题（但与任何平台相关）。我的渲染器只是一个基本的开放式 gl 渲染器，它通过一个相对无限的渲染循环但是我希望从我的相机类（我实例化我的渲染器）中发送相机预览缓冲区，所以

```
myThread = new QThread();
renderer = new BPRenderer();
renderer->moveToThread(myThread);
connect(myThread, SIGNAL(started()), renderer, SLOT(run()));
connect(this, SIGNAL(NewTexture(int)), renderer, SLOT(SetTextureFromRaw(unsigned char*)));
myThread->start(); 
```

所以发出函数是：

```
emit this->NewTexture(camera->buf); 
```

所以这很基本，我知道它的更新很好。但似乎我的线程可能有问题，因为虽然运行信号运行良好，但我的 settexturefromraw 插槽从未被触发，我尝试将其设置为本地摄像头功能以检查它不是摄像头（此）功能，但这是工作很好，所以我确定它是 settexturefromrawfunc。

如果有人有任何想法，请将它们扔给我，因为这已经让我很长时间了！干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:09:22.983

检查控制台输出（您可能需要通过 SSH 连接到设备并执行“slog2info”）以查看信号是否实际正在连接。如果没有看到其余的代码，很难确定，但我猜想 NewTexture 的参数不匹配。

在 connect 调用中，您正在连接到 NewTexture(int)。当您发出它时，您调用的是 this->NewTexture(camera->buf)。通过参数名称，它看起来更像是一个指针。

# ios - 在 iOS 中使用存储在 Documents（不是捆绑包）中的图像进行内存管理

> ID：13955498
> 
> 赞同：2
> 
> 时间：2012-12-19T15:21:06.497
> 
> 标签：ios, memory-management, uiimageview, maps

我有自定义 mapView（我将其命名为 JMMapView，它继承自 UIView），我在 UIScrollView 中创建了 UIImageView。它做一些基本的事情，如缩放、滚动、添加精确点等等。但主要问题是它加载了一个存储在 Documents 文件夹中的图像（图像在运行时下载并永久存储在文档文件夹中）并占用大量内存。例如，所有图像都是从 100kb 到 800kb，但只加载一个图像内存是从 20mb 到 40mb。我做错了什么？为什么需要这么多内存？我使用ARC，图像都是PNG，大小为2000x2000。

数据控制器.m

```
+(NSData*) getDataOfUrlString:(NSString*)urlString {
    NSString *fullLocalUrlString = [self formLocalDocumentsUrlWithPath:urlString];
    NSString *remoteUrl;
    NSData *data = [NSData dataWithContentsOfFile:fullLocalUrlString];
    if (!data) {
        NSString *remoteUrlString = [WSController formRequestURLWithMethod:urlString];
        remoteUrl = remoteUrlString;
        data = [NSData dataWithContentsOfURL:[NSURL URLWithString:remoteUrlString]];
        if (data) {
            [self createFoldersPathForFileWithFullUrlString:fullLocalUrlString];
            [data writeToFile:fullLocalUrlString atomically:YES];
        } else {
            WLog([NSString stringWithFormat:@"data was not even downloaded from url:%@", remoteUrlString]);
        }
    }

    if (!data) {
        DLog(@"loaded data:%@, from urlString:%@", data ? @"YES" : @"NO", fullLocalUrlString);
        DLog(@"Can't download from remote url:%@\n", remoteUrl);
    }
    return data;
} 
```

MapPreviewViewController.m

```
//In background with @autoreleasepool
NSData* data = [DataController getDataOfUrlString:abstractUrl];
UIImage *image = nil;
if (data) {
     DLog(@"returning map image with path:%@", abstractUrl);
     image = [UIImage imageWithData:data];
}
 //On Main thread
if (image && !mapView) {
     mapView = [[JMMapView alloc] initWithImage:image fitSize:fitSize];
     [mapView setViewController:self];
     [self.view addSubview mapView];
} 
```

JMMapView：UIView

```
#define KEY_BUTTON @"buttonKey"
#define KEY_COORDINATES @"coordinatesKey"
#define KEY_OBJECT @"jmObjectKey"

@interface JMMapView () {
    UIImageView *mapView;
    CGSize fitSize;
    NSArray *pinpoints;
    NSArray *directions;
    UIScrollView *scrollView;
    CGPoint pinchCenter;
    NSDictionary *currentPoint;

    NSDictionary *openPinpoint;
    UIViewController *activeViewController;

    FPPopoverController *popController;

}

@end

@implementation JMMapView

#pragma mark - initialization
-(id)initWithImage:(UIImage *)image fitSize:(CGSize)newSize {

    self = [self initWithFrame:CGRectMake(0, NAVIGATION_BAR_HEIGHT - 44, newSize.width, newSize.height)];
    if (self) {
        [self initMapViewWithImage:image fitSize:newSize];
    }
    return self;
}

-(void) initMapViewWithImage:(UIImage*)mapImage fitSize:(CGSize)newFitSize {

    mapView = [[UIImageView alloc] initWithImage:mapImage];
    [self finishInitWithFitSize:newFitSize];
}

-(void) finishInitWithFitSize:(CGSize)newFitSize {
    mapView.frame = [Utilities reframe:mapView.frame toFitSize:newFitSize];

    CGRect scrollFrame = CGRectMake(0, 0, newFitSize.width, newFitSize.height);
    scrollView = [[UIScrollView alloc] initWithFrame:scrollFrame];
    [scrollView setContentSize:newFitSize];
    [mapView setCenter:CGPointMake(scrollView.frame.size.width/2, scrollView.frame.size.height/2)];
    [mapView setUserInteractionEnabled:YES];

    [scrollView addSubview:mapView];
    [self addSubview:scrollView];

    fitSize = newFitSize;
    [self initZooming];

}
//gesture recognizer
...
//

#pragma mark - private methods
//pinch handling
..
//
//Add pinpoint
-(void) addPinpointToArray:(UIButton*)pin position:(JMMapPosition *)position pinpointType:(PINPOINT_TYPE)pinType object:(id)object{
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                          pin, KEY_BUTTON,
                          position, KEY_COORDINATES,
                          object, KEY_OBJECT,
                          nil];
    switch (pinType) {
        case PINPOINT_TYPE_CHILD_OBJECT:
        {
            if (!pinpoints) {
                pinpoints = [[NSArray alloc]  initWithObjects:dict, nil];
            } else {
                NSMutableArray *arrayM = [NSMutableArray arrayWithArray:pinpoints];
                [arrayM addObject:dict];
                pinpoints = [NSArray arrayWithArray:arrayM];
            }
            break;
        }

        case PINPOINT_TYPE_DIRECTION:
        {
            if (!directions) {
                directions = [[NSArray alloc]  initWithObjects:dict, nil];
            } else {
                NSMutableArray *arrayM = [NSMutableArray arrayWithArray:directions];
                [arrayM addObject:dict];
                directions = [NSArray arrayWithArray:arrayM];
            }
            break;
        }
        case PINPOINT_TYPE_OBJECT:
            currentPoint = dict;
            break;
        default:
            break;
    }
}

#pragma mark - public methods
-(void)setViewController:(UIViewController *)newController {
    if (activeViewController != newController) {
        activeViewController = newController;
    }
}

-(void)addPinpointWithObject:(id)object mapPosition:(JMMapPosition*)position pinpointType:(PINPOINT_TYPE)pinType
 {
    static UIImage *greenPin = nil;
    static UIImage *redPin = nil;
    static UIImage *directionPin = nil;
    if (greenPin == nil) {

        greenPin = [UIImage imageNamed:@"pin_green"];
        redPin = [UIImage imageNamed:@"pin"];
        //todo direction pin
        directionPin = [UIImage imageNamed:@"pin_direction"];
    }
    UIImage *image = nil;
    switch (pinType) {
        case PINPOINT_TYPE_CHILD_OBJECT:
            image = greenPin;
            break;

        case PINPOINT_TYPE_OBJECT:
            image = redPin;
            break;

        case PINPOINT_TYPE_DIRECTION:
            image = directionPin;
        default:
            break;
    }
    CGFloat width = image.size.width;
    CGFloat height = image.size.height;
    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, width, height)];
     [self setButton:button positionToCoords:position];
    [button setBackgroundImage:image forState:UIControlStateNormal];

    [mapView addSubview:button];

    if (pinType == PINPOINT_TYPE_CHILD_OBJECT) {
        [button setTag:[pinpoints count]];
        [button addTarget:self action:@selector(pinpointPressed:) forControlEvents:UIControlEventTouchUpInside];
    } else if (pinType == PINPOINT_TYPE_DIRECTION) {
        [button setTag:[directions count]];
        [button addTarget:self action:@selector(directionPressed:) forControlEvents:UIControlEventTouchUpInside];

    }

    //add pinpoint to register
    [self addPinpointToArray:button position:position pinpointType:pinType object:object];
}

-(void) destroyAllMapView {
    //[self dismissPopover];
    [self setViewController:nil];
    for (NSDictionary *dict in pinpoints) {
        @autoreleasepool {
            UIButton *button = [dict objectForKey:KEY_BUTTON];
            [button removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents];
            //[button removeFromSuperview];

        }
    }
    [self setNilToEveryGlobalObject];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:41:49.787

图像压缩为 PNG 时可能为 100-800kb，但必须在内存中完全解压缩。

这意味着具有 Alpha 透明度 (RGBA) 的 2000x2000 图像将是 2000x2000x4 字节，或大约 15 兆字节。这就是为什么图像会占用这么多内存的原因。

您应该做的第一件事是确保图像没有 Alpha 通道，并且显示它们的视图已`opaque`设置`YES`为禁用任何透明度/混合。

您可能也应该使用基于图块的方法。Apple 有很好的示例代码，可以通过他们的[PhotoScroller](https://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080)示例项目来演示这一点。

# java - 如何从安卓手机获取数据？

> ID：13955500
> 
> 赞同：-5
> 
> 时间：2012-12-19T15:21:05.827
> 
> 标签：java, android, bluetooth

可以说我想通过蓝牙从我的手机中获取我的所有联系人列表并将它们列出在我的电脑上.. 有什么办法可以做到这一点或一些教程吗？

在这种情况下它需要手机是“服务器”是否正确，所以在手机中我将添加一个应用程序来接收来自我的计算机的所有请求，然后发送结果？

例如，假设我想从电脑进入手机中的画廊。如果我按下按钮，它会向手机发送请求，手机中的应用程序会分析请求，然后通过蓝牙将所有文件发送到电脑。所以如果我有一个网站和该网站的服务器，手机就需要成为服务器。这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:27:14.823

使用可以使用[android.bluetooth](http://developer.android.com/guide/topics/connectivity/bluetooth.html)。[这](http://mobile.tutsplus.com/tutorials/android/android-quick-look-bluetoothadapter/)可以给你一个开始的地方。

# hibernate - Struts 2 Message Store Interceptor not working with field error（使用 Hibernate 验证）

> ID：13955501
> 
> 赞同：0
> 
> 时间：2012-12-19T15:21:09.977
> 
> 标签：hibernate, struts2, interceptor, interceptorstack

我有一个带有一些文本字段的 Jsp，它们使用 Hibernate 验证注释（操作中的 @Valid 或 @NotNull）进行验证，除了一个（输入图像文件）使用默认的 Struts2 验证（使用 ActionName-validation.xml）进行验证。当提交的表单无效时（当文本字段为空时），我想重定向到另一个操作，并且我想存储字段错误。

我试过这个：

```
<interceptors>
    <interceptor name="SessionCheckInterceptor" class="util.SessionCheckInterceptor"/>
        <interceptor-stack name="mySessionValidationStack">              
            <interceptor-ref name="defaultStackHibernate" />
            <interceptor-ref name="SessionCheckInterceptor" />
        </interceptor-stack>      
</interceptors> 

<default-interceptor-ref name="mySessionValidationStack"/> 

<action name="insert" class="actions.InsertAction" >       
    <interceptor-ref name="mySessionValidationStack">
        <param name="fileUpload.allowedTypes">image/png</param>
    </interceptor-ref> 
    <interceptor-ref name="store">
        <param name="operationMode">STORE</param>
    </interceptor-ref>
    <interceptor-ref name="defaultStack" />
    <result name="success" type="tiles" >baseLayout</result>
    <result name="error" type="redirectAction" >
        <param name="actionName">showinsertform</param>
    </result>
    <result name="input" type="redirectAction" >
        <param name="actionName">showinsertform</param>
    </result>
</action>

<action name="showinsertform" class="actions.ShowInsertFormAction" > 
    <interceptor-ref name="mySessionValidationStack" />
    <interceptor-ref name="store">
        <param name="operationMode">RETRIEVE</param>
    </interceptor-ref>
    <result name="success" type="tiles" >insert</result>
    <result name="error" type="tiles" >baseLayout</result>
</action> 
```

但是当我提交表单时，重定向成功而没有显示字段错误消息。也许我设置错误的拦截器？使用休眠我需要覆盖一些东西？如果我尝试在操作中手动设置错误消息（使用 addActionError），它们会起作用！会不会是休眠错误字段消息没有存储在会话中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:12:24.630

Hibernate 插件 struts-plugin.xml 在这里您使用的是**defaultStackHibernate**，它不包括在[struts-default.xml](http://struts.apache.org/2.3.7/docs/struts-defaultxml.html)中定义的存储拦截器，您应该在使用它之前将存储拦截器包含到您的自定义拦截器堆栈中。

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

```
<package name="hibernate-default" extends="struts-default" abstract="true">

    <interceptors>

        <interceptor name="hibernateSessionInterceptor" class="com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInterceptor" />
        <interceptor name="hibernateValidatorInterceptor" class="com.googlecode.s2hibernate.struts2.plugin.s2hibernatevalidator.interceptor.HibernateValidatorInterceptor">
            <param name="excludeMethods">input,prepare,back,cancel,browse</param>
        </interceptor>

        <interceptor-stack name="defaultStackNoValidation">
           <interceptor-ref name="exception"/>
            <interceptor-ref name="alias"/>
            <interceptor-ref name="servletConfig"/>
            <interceptor-ref name="prepare"/>
            <interceptor-ref name="i18n"/>
            <interceptor-ref name="chain"/>
            <interceptor-ref name="debugging"/>
            <interceptor-ref name="profiling"/>
            <interceptor-ref name="scopedModelDriven"/>
            <interceptor-ref name="modelDriven"/>
            <interceptor-ref name="fileUpload"/>
            <interceptor-ref name="checkbox"/>
            <interceptor-ref name="staticParams"/>
            <interceptor-ref name="params">
              <param name="excludeParams">dojo\..*,^struts\..*</param>
            </interceptor-ref>
            <interceptor-ref name="conversionError"/>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
        </interceptor-stack>

        <interceptor-stack name="basicStackHibernate">
            <interceptor-ref name="basicStack"/>
            <interceptor-ref name="hibernateSessionInterceptor"/>
        </interceptor-stack>

        <interceptor-stack name="defaultStackHibernate">
            <interceptor-ref name="defaultStackNoValidation"/>
            <interceptor-ref name="hibernateSessionInterceptor"/>
            <interceptor-ref name="hibernateValidatorInterceptor"/>
        </interceptor-stack>

        <interceptor-stack name="defaultStackHibernateStrutsValidation">
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="hibernateSessionInterceptor"/>
        </interceptor-stack>

    </interceptors>

    <default-interceptor-ref name="defaultStackHibernate"/><!--

    <global-exception-mappings>
        <exception-mapping exception="org.hibernate.validator.InvalidStateException" result="input" name="input"/>
    </global-exception-mappings>

--></package>

<package name="hibernateManager" namespace="/hibernateManager" extends="struts-default">

    <interceptors>
        <interceptor name="hibernatePluginInterceptor" class="com.googlecode.s2hibernate.struts2.plugin.interceptors.InternalHibernatePluginInterceptor" />
        <interceptor name="managerInterceptor" class="com.googlecode.s2hibernate.struts2.plugin.interceptors.HibernateManagementInterceptor" />
    </interceptors>

    <default-class-ref class="com.googlecode.s2hibernate.struts2.plugin.actions.HibernateManagementAction"/>

    <action name="" method="index">
        <interceptor-ref name="hibernatePluginInterceptor"/>
        <interceptor-ref name="managerInterceptor"/>
        <interceptor-ref name="validationWorkflowStack"/>
        <result>/WEB-INF/temp/hibernatePlugin/management.jsp</result>
        <result name="input">/WEB-INF/temp/hibernatePlugin/management.jsp</result>
    </action>
    <action name="*" method="{1}">
        <interceptor-ref name="hibernatePluginInterceptor"/>
        <interceptor-ref name="managerInterceptor"/>
        <interceptor-ref name="validationWorkflowStack"/>
        <result>/WEB-INF/temp/hibernatePlugin/management.jsp</result>
        <result name="input">/WEB-INF/temp/hibernatePlugin/management.jsp</result>
    </action>

</package> 
```

# ruby-on-rails - 没有从 ruby on rails 中的响应参数获取实际的图像存储路径。

> ID：13955504
> 
> 赞同：0
> 
> 时间：2012-12-19T15:21:16.120
> 
> 标签：ruby-on-rails, image, titanium-mobile, image-uploading

我正在使用钛进行图像捕获，然后使用 ruby​​ on rails 上传。在钛中捕获图像后，我只需点击`/img_uploaders/upload`rails 的 URL 即可调用。结果，发送了对该`upload`方法的发布请求。

这就是我在控制台中得到的：-

```
Started POST "/img_uploaders/upload" for 192.168.0.180 at 2012-12-19 20:40:31 +0
530
Processing by ImgUploadersController#upload as MULTIPART_FORM
  Parameters: {"media"=>#<ActionDispatch::Http::UploadedFile:0x569e308 @original
_filename="tixhr1442726854.jpeg", @content_type="image/jpeg", @headers="Content-
Disposition: form-data; name=\"media\"; filename=\"tixhr1442726854.jpeg\"\r\nCon
tent-Type: image/jpeg\r\nContent-Transfer-Encoding: binary\r\n", @tempfile=#<Fil
e:C:/Users/user/AppData/Local/Temp/RackMultipart20121219-3924-is4hsq>>}
  ←[1m←[35m (49.0ms)←[0m  BEGIN
  ←[1m←[36mSQL (82.0ms)←[0m  ←[1mINSERT INTO `img_uploaders` (`avatar_content_ty
pe`, `avatar_file_name`, `avatar_file_size`, `avatar_updated_at`, `created_at`,
`name`, `path`, `type`, `updated_at`) VALUES (NULL, NULL, NULL, NULL, '2012-12-1
9 15:10:31', NULL, NULL, NULL, '2012-12-19 15:10:31')←[0m
  ←[1m←[35m (141.0ms)←[0m  COMMIT
Redirected to http://192.168.0.187:3000/
Completed 302 Found in 858ms (ActiveRecord: 277.0ms) 
```

如上面的控制台输出所示，该表正在获取图像路径和图像名称的空值。我不知道我的图像存储在哪里以及如何获取图像位置的路径。

这是我`upload`被调用的方法：-

```
def upload
  @photo = ImgUploader.new(:avatar => params[:media])

  if @photo.save
    redirect_to root_url
  else
    render :action => 'new'
  end    
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:53:12.117

如评论中所述，将字段更改为媒体后，我得到了问题的解决方案。

谢谢。结案。

# mysql - Mysql 复制 :: 正确查询的从属设备上的错误（重复条目）

> ID：13955505
> 
> 赞同：0
> 
> 时间：2012-12-19T15:21:15.270
> 
> 标签：mysql, replication, duplicates, slave

我有一个主机和从机（不同的机器），并且由于一个重复输入错误而停止了从机。如果我在从属设备上运行导致错误的查询（我可以通过 SHOW SLAVE STATUS 看到该查询）（复制停止时），则没有错误，但从属设备被此查询停止（事实上，如果我尝试用 START SLAVE 重新开始复制​​，错误再次出现）。为什么正确的查询（我可以在从属设备上运行它而没有错误消息）可以停止复制？

## 表结构

```
CREATE TABLE `table` (
  `a` int(9) unsigned NOT NULL AUTO_INCREMENT,
  `b` varchar(255) NOT NULL,
  `c` varchar(25) DEFAULT NULL,
  `d` char(40) NOT NULL,
  `e` char(64) DEFAULT NULL,
  `f` varchar(255) NOT NULL,
  `g` varchar(100) NOT NULL,
  `h` varchar(25) NOT NULL,
  `i` enum('disabled','enabled') DEFAULT 'disabled',
  `j` enum('disabled','enabled') DEFAULT 'disabled',
  `k` enum('disabled','enabled') DEFAULT 'disabled',
  `l` enum('production','sandbox') CHARACTER SET latin1 NOT NULL DEFAULT 'production',
  `m` enum('active','uninstalled') NOT NULL DEFAULT 'active',
  `n` datetime NOT NULL,
  `o` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
  `p` int(11) DEFAULT NULL,
  `q` char(40) DEFAULT NULL,
  `r` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `s` char(40) DEFAULT NULL,
  PRIMARY KEY (`a`),
  UNIQUE KEY `b_d_index` (`b`,`d`),
  KEY `e` (`e`),
  KEY `f` (`f`),
  KEY `g` (`g`),
  KEY `h` (`h`),
  KEY `i` (`i`),
  KEY `j` (`j`),
  KEY `k` (`k`),
  KEY `l` (`l`),
  KEY `m` (`m`),
  KEY `n` (`n`),
  KEY `o` (`o`),
  KEY `p` (`p`),
  KEY `d` (`d`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC 
```

## 完全错误

```
Error 'Duplicate entry 'B-D' for key 'b_d_index'' on query. Default database: 'database_name'. Query:
INSERT INTO `table` 
SET `b` = 'B',`c` = 'C',`d` = 'D',`e` = 'E',`f` = 'F',`g` = 'G',`h` = 'H',`i` = 'I',`j` = 'J',`k` = 'K',`l` = 'L',`m` = 'M',`n` = NOW(),`o` = NOW(),`p` = NULL,`q` = 'Q',`r` = NOW() 
ON DUPLICATE KEY UPDATE `c` = 'C',`d`= 'D',`e`='E',`f`='F',`g`='G',`h`='H',`i`='I',`j`='J',`k`='K',`l`='L',`m`='M',`o`='2012-12-19 14:06:34' 
```

提前致谢。

# html - 将一个 div 放在另一个位于中心的 div 旁边

> ID：13955511
> 
> 赞同：0
> 
> 时间：2012-12-19T15:21:30.220
> 
> 标签：html

我想将 a放置在`div`另一个`div`位于屏幕中心的右侧，并带有`margin-left: auto; margin-right: auto;`.

我试图将两个 div 包装成一个似乎不起作用，因为它使包装器而不是第一个 div 居中。

有什么想法吗？谢谢！

到目前为止我的CSS代码：

```
#text {
width: 500px;
height: auto;
margin-left: auto;
margin-right: auto;
margin-top: 150px;
}

#image {
overflow: hidden;
float: right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:29:08.960

谢谢你`css`；你也有`html`吗？

尝试拉动`div`包装的外部；你的定位应该有效。如果它继续给您带来问题，请尝试

```
{position: absolute;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:37:39.227

这有点骇人听闻，但这似乎运作良好（至少在 Chrome 中）。

```
<div style="position:relative; width:50%; border:1px solid black; margin-left: auto; margin-right: auto;">
    centered text
    <div style="position:absolute; left:100%; top:-1px; width:50px; border:1px solid red">
        right text
    </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

外部的`position: relative;`属性`div`使内部 div 的绝对定位“相对于”外部 div。仅`position: relative;`在内部使用`div`会产生不同的结果（尽管您可能会付出一些努力）。

将内部定位`div`到`left:100%;`将内部的左边界`div`带到外部的右边界`div`。`top:-1px;`用于补偿外部`div`边界。如果你没有边界，`top:0px;`应该就足够了。`width`内部的可以`div`设置为外部`div`宽度的百分比。

我建议将它放入[jsFiddle](http://jsfiddle.net)并使用属性，直到你得到它恰到好处。您还需要在您选择的目标浏览器中进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:04:17.690

我想做到这一点的最好方法是在您的左侧 div 上使用一个边距，使其位于中心位置，然后将您的第二个 div 向左浮动以对接它，这样就可以了

```
<div style="position:relative;float:left;width:800px;margin:0 auto">
 <div style="position:relative;float:left;width:500px;margin:0 0 0 150px">
  This should go to the centre of the centred 800px div
 </div>
 <div style="position:relative;float:left;width:150px">
  This will be pushed up to the left of the centred 500px div
 </div>
</div> 
```

我认为这不那么“hacky”......

# java - 在类中保存密码的最理想方式 - Java

> ID：13955515
> 
> 赞同：3
> 
> 时间：2012-12-19T15:22:06.050
> 
> 标签：java, design-patterns, passwords, abstract-class, password-protection

我有两个类“用户配置文件”和“指纹配置文件”，它们扩展了一个抽象类“配置文件”。

轮廓：

```
/**
 * Template for User profiles or Fingerprint profiles
 */
public abstract class Profile {

    /**
     * Profile Name
     */
    private String name;

    /**
     * Profile id
     */
    private int id;

    /**
     * Set the name of this profile
     * @param name
     */
    public void setProfileName(String name) {
        this.name = name;
    }

    /**
     * Set the id of this profile
     * @param name
     */
    public void setIdNumber(int id) {
        this.id = id;
    }

    /**
     * Get the name of this profile
     */
    public String getProfileName() {

        return name;

    }

    /**
     * Get the id of this profile
     */
    public int getIdNumber() {
        return id;
    }

} 
```

我的下一堂课是 UserProfile

```
public class UserProfile extends Profile {

    /**
     * Users password
     */
    private char[] password;

    /**
     * Set User password
     * @param password
     */
    public void setPassword(char[] password){

        this.password = password;

    }

    /**
     * Get User password
     */
    public char[] getPassword(){

        return password;

    }

} 
```

只看这个类似乎很狡猾，能够像这样检索密码似乎是完全错误的（即使 get 方法是**private**）。

在制作我的 FingerPrintProfile 类以及拥有一个“FingerprintData”对象时，似乎我将面临同样的问题，该对象本质上也需要安全。

有没有人知道一种安全的方法，或者最好是人们用来解决这种情况的一种模式？

谢谢 ！

**奖金问题**

我创建了抽象类来为两种类型的配置文件提供模板，指纹数据和文本密码之间似乎存在共同点。但是，不可能创建一个可能是 char 数组或 FingerprintData 对象的抽象字段“密码”。有任何想法吗？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T15:31:19.487

使用密码时，您可能应该使用某种形式的加密，这样密码就不会以纯文本形式存储。[您可以在此处](http://en.wikipedia.org/wiki/Public-key_encryption)阅读有关其工作原理的信息的信息。

[这](http://www.mindrot.org/projects/jBCrypt/)是 Bcrypt 的 Java 实现的链接，它至少可以帮助您入门。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T15:33:03.440

> 有没有人知道一种安全的方法，或者最好是人们用来解决这种情况的一种模式？

你需要问自己“安全防范什么？”。

当然，如果某些不受信任的代码在与此类相同的 JVM 中执行，它可能会获取密码。但你为什么要允许这种情况发生？

*   您无法保护内存数据免受在同一 JVM 中以完全权限运行的不受信任的代码的影响。

*   如果您小心，您可以保护数据免受在安全沙箱中运行的不受信任的代码的影响；例如，通过创建自定义 a`Permission`并使用`SecurityManager`来检查（例如）该`getPassword`方法的调用者是否具有所需的权限。（你还需要做一些其他的事情......）

* * *

话虽如此，处理密码的“最佳实践”方法是使用（真正的）安全散列算法创建和存储种子散列。你可以在这里做同样的事情。问题是，如果您确实需要明确的密码，那将无法正常工作……因为散列的整个想法是使恢复密码变得不可行。但另一方面是，如果密码是明确的，坏人可能会捕获它。

加密存储密码对于 JVM 中不受信任的代码是不安全的。给定时间、精力和不受信任的人与坏人之间的隐蔽信息通道，应该可以恢复使用的密钥和算法，从而解密数据。坏人可能会通过核心转储或读取 JVM 进程的页面文件来获取信息。

最重要的是，如果您的平台安全性遭到破坏（JVM 或操作系统），您无法保证明文或加密的密码将保持安全。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-23T11:32:51.583

改用“对象思维”。您当前的设计根本不是 OOP。您应该*公开*配置文件的行为，而不是设置和获取密码。例如：

```
interface Profile {
  void rename(String name);
  String identity();
  boolean authenticate(char[] password)
} 
```

Getters/setters 是 OOP 中的一种反模式。

# java - Java 实际参数与形式参数不匹配，但它们匹配吗？

> ID：13955516
> 
> 赞同：6
> 
> 时间：2012-12-19T15:22:16.200
> 
> 标签：java, inheritance, constructor, arguments

我有一个扩展实体的类 Player：

**玩家：**

```
public class Player extends Entity {
    public Player(char initIcon, int initX, int initY) {
        //empty constructor
    }
... 
```

**实体：**

```
public Entity(char initIcon, int initX, int initY) {
        icon = initIcon;
        x = initX;
        y = initY;
    }
... 
```

这几乎是您所期望的，但是在编译时我收到一个错误，内容为

```
Player.java:2: error: constructor Entity in class Entity cannot be applied to the given types:
    public Player(char initIcon, int initX, int initY)
required: char,int,int
found: no arguments
reason: actual and formal argument lists differ in length 
```

但它显然确实有必要的论据。这里发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T15:24:07.910

您需要通过调用其构造函数来初始化超类`super`

```
public Player(char initIcon, int initX, int initY) {
    super(initIcon, initX, initY);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T15:23:59.050

您的超类构造函数有 3 个参数，并且似乎没有空构造函数。因此，您的子类构造函数应该显式调用传递值的超类构造函数。

```
public class Player extends Entity {
    public Player(char initIcon, int initX, int initY) {
        //empty constructor
        super(initIcon,initX,initY);
    }
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T15:51:37.803

没有对超级构造函数的显式调用（如其他答案或下面所示），因此 VM 将使用隐式 0-arg 构造函数……但此构造函数不存在。因此，您必须对有效的超级构造函数进行显式调用：

```
 public class Player extends Entity {
    public Player(char initIcon, int initX, int initY) {
        super(initIcon,initX,initY);
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T15:24:53.587

您需要从扩展类的构造函数中显式调用基类的构造函数。你这样做：

```
public class Player extends Entity {
    public Player(char initIcon, int initX, int initY) {
        super(initIcon, initX, initY);
        // rest of player-specific constructor
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T16:06:11.443

当子类继承父类时，默认调用父类的默认构造函数。在上述情况下，您已经在 Parent 类中定义了参数构造函数，因此 JVM 不提供默认值，并且您的子类正在调用那里不存在的父默认构造函数。要么在 Parent 类中指定默认构造函数，要么使用 super 调用父类的 Parametric 构造函数。

```
public class Player extends Entity {
public Player()
{}
public Player(char initIcon, int initX, int initY) {
    //empty constructor
} 
```

或者

```
public Player
(char initIcon, int initX, int initY) {
super(initIcon, initX, initY);
} 
```

# html5-history - 页面标题不会被 history.pushState 改变

> ID：13955520
> 
> 赞同：40
> 
> 时间：2012-12-19T15:22:28.210
> 
> 标签：html5-history

我刚刚在 Google Chrome 中打开了一个带有少量基本标签（如 html、body、head 等）的空白 HTML 页面，并尝试在控制台中执行以下命令：

```
history.pushState(null, 'my test title', '/test/url'); 
```

历史事件工作正常，但页面标题保持不变。可以吗？我应该每次都手动更改吗？如果我应该，为什么 pushState() 方法中有这样的参数，如标题？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-07T02:10:06.117

当前的浏览器似乎不支持 pushState 标题属性。您可以通过在 JS 中设置来轻松实现相同的目标。

```
document.title = "This is the new page title."; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-27T08:59:37.597

`document.title`如果您想要良好的 SEO，不建议使用设置标题。

您可能需要考虑使用[History.js](https://github.com/browserstate/history.js)

> [History.js](https://github.com/browserstate/history.js)在所有浏览器中优雅地支持 HTML5 History/State API（pushState、replaceState、onPopState）。包括对数据、标题、replaceState 的持续支持。支持 jQuery、MooTools 和原型。

[演示](http://browserstate.github.com/history.js/demo/)

[资源](https://stackoverflow.com/a/26325048/586051)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-17T09:07:26.813

当您使用 history.pushState 时，以下代码将更改页面标题

```
$(document).prop('title','your page title'); 
```

它也与 IE 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-19T04:15:27.027

目前，所有现代浏览器都使用 history.push() 更改标题，但您必须更改 URL。如果您只添加“#locationhash”，它不会更改标题，这是有道理的。

# c# - wpf datatrigger 绑定到方法

> ID：13955522
> 
> 赞同：5
> 
> 时间：2012-12-19T15:22:30.520
> 
> 标签：c#, wpf, bind, datatrigger

我有一个返回真或假的方法。

我希望将此方法绑定到我的 DataTrigger

```
 <DataGrid ItemsSource="{Binding Source={StaticResource SmsData}, XPath=conv/sms}">
        <DataGrid.RowStyle>
            <Style TargetType="{x:Type  DataGridRow}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=check}" Value="true">
                        <Setter Property="Foreground" Value="Black" />
                        <Setter Property="Background" Value="Blue" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.RowStyle>
    </DataGrid> 
```

如果返回值为“true”，则执行 setter ...

我的代码：

```
public MainWindow()
{
    DataContext = this;
    InitializeComponent();
}

public string check
{
    get
    {
       return "true";
    }
} 
```

我怎样才能得到这个工作？我现在收到一个错误（在运行时，而不是让我的程序崩溃）：BindingExpression 路径错误：在 'object' ''XmlElement' 上找不到 'check' 属性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:33:00.537

RowStyle 的 DataContext 是 DataGrid 的 ItemsSource 中的一项。在您的情况下，这是一个 XMLElement。要绑定到DataGrid的DataContext，必须通过ElementName引用DataGrid，Path就是元素的DataContext。像这样：

```
 <DataGrid Name="grid" ItemsSource="{Binding ... 
    <DataGrid.RowStyle>
        <Style TargetType="{x:Type DataGridRow}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=grid, Path=DataContext.check}" Value="true">
                    <Setter Property="Foreground" Value="Black" />
                    <Setter Property="Background" Value="Blue" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
</DataGrid> 
```

# android - Kindle Fire：MediaPlayer：播放多种声音时出现奇怪的声音

> ID：13955528
> 
> 赞同：3
> 
> 时间：2012-12-19T15:22:41.003
> 
> 标签：android, audio, kindle-fire

我只是问这个问题，因为我在互联网上找不到任何关于它的信息，可能是因为它是一种罕见的情况。

问题是我有一个使用多个 MediaPlayers 播放 mp3 样本的钢琴应用程序。这是获得快速响应的唯一方法，而不必像在声音池中那样将它们全部加载到内存中，或者求助于本机代码合成器。

它工作得很好，我在普通的安卓设备上没有任何问题。但是，在 Amazon Kindle Fire（第一版）上，我在弹奏几个键后会发出奇怪的声音。看起来 MediaPlayer 本机实现在某种程度上存在一些错误。我没有得到真正的错误，但声音被切断或产生乱码的奇怪渲染噪音。这当然让我的用户不满意，并且给我留下了一个低评价的应用程序。

我尝试使用 .ogg 示例切换渲染引擎。这些效果很好，不再有奇怪的噪音，但它们也被切断了，使它不是一个很好的替代品。

我发现的唯一线索是一些关于无效数据的错误消息，我有时会收到。我会尝试看看我是否可以修复那个，但我担心它与它无关。

有人在 Kindle Fire（或其他平台）上遇到过类似问题吗？

**更新** 似乎有时会弹出有关不正确数据的奇怪错误确实导致了这种情况。我正在使用 AssetFileDescriptors 加载原始资源文件。这是完全相同的东西`MediaPlayer.create(R.raw.mp3file)`。我刚刚用 sdcard 上的样本进行了测试，现在我没有遇到任何奇怪的音频问题。所以，我想我真的可以解决这个问题。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:27:27.167

好吧，解决方案非常简单。而且我现在也明白为什么它很少遇到了。

我发现我没有完全复制`MediaPlayer.create(R.raw.resid)`源代码。我忘记`AssetFileDescriptor`在每次使用后关闭它们，并且只是重复使用它们。不知何故，这不是一个好习惯，切换到关闭它们修复了它！

# c# - IsChecked 在 WPF 中未正确绑定

> ID：13955533
> 
> 赞同：0
> 
> 时间：2012-12-19T15:22:54.810
> 
> 标签：c#, wpf, wpf-controls, checkbox

我有一个绑定到 itemsControl 的列表。第一项绑定得很好，不是 isChecked 部分。

这是代码

```
var LstTemplates = Templates.Select(x=>new {TName=x.TemplateName,TId = x.Id, IsLinked = IsLinked(x.Id)});
itemsControlTemplates.ItemsSource = LstTemplates; 
```

IsLinked 是一个返回布尔值的函数

```
private bool IsLinked(int Id)
{
   return (AnotherList.Any(x=>x.id==Id));
} 
```

在 XAML 中

```
<CheckBox CommandParameter="{Binding TId}" Content="{Binding TName}" IsChecked="{Binding IsLinked}" /> 
```

以上不起作用......或者更确切地说，应用程序在完全不相关的代码上冻结并中断。

但是，如果我采用相同的“{Binding IsLinked}”并将其输出到消息框甚至复选框的内容，那么它会显示......

我哪里做错了？

更新：好的，忽略我所说的代码在不相关代码处中断的部分，这会产生误导。

```
 <ItemsControl Name="itemsControlTemplates" >
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="2">

                                    <CheckBox CommandParameter="{Binding TId}" Content="{Binding TName}" IsChecked="{Binding IsLinked}" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl> 
```

当我将“IsLinked”输出到内容时，它会显示。如何让它绑定到“IsChecked”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:32:57.790

IsChecked 正在尝试进行双向绑定...我认为这在匿名类型上是不可能的。

尝试

```
IsChecked="{Binding IsLinked, Mode=OneWay}" 
```

# c# - 在 C# 中，如何单向序列化不可序列化的？

> ID：13955540
> 
> 赞同：44
> 
> 时间：2012-12-19T15:23:22.727
> 
> 标签：c#, serialization

通常，我需要序列化一个对象，用于日志记录或调试。这是一种单向序列化——我不需要稍后再把它弄回来，我只需要把一个对象变成一个字符串写到某个地方。

是的，是的——这就是为什么您应该始终覆盖该`ToString`方法的原因。我知道这个。但我经常处理我没有写过也不能改变的对象。此外，我不想为我编写的每个类编写和更新 ToString 方法。

XML 序列化提供了一个看似完美的解决方案——只需将该对象扁平化为 XML。但是有很多限制，特别是你不能序列化 IDictionary，你必须有一个无参数的构造函数。我可以在我的课堂上解决这些问题，但是——再一次——我经常与其他人的课堂一起工作。

那么，获得对象的全面字符串表示的解决方案是什么？我缺少一些简单的东西吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-19T15:26:20.903

使用您自己的逻辑（可能还有一些反射）的扩展方法怎么样？

```
public static class SerializerExtension
{
    public static String OneWaySerialize(this Object obj)
    {
        if (Object.ReferenceEquals(obj, null))
        {
            return "NULL";
        }
        if (obj.GetType().IsPrimitive || obj.GetType() == typeof(String))
        {
            if (obj is String)
                return String.Format("\"{0}\"", obj);
            if (obj is Char)
                return String.Format("'{0}'", obj);
            return obj.ToString();
        }

        StringBuilder builder = new StringBuilder();
        Type objType = obj.GetType();
        if (IsEnumerableType(objType))
        {
            builder.Append("[");

            IEnumerator enumerator = ((IEnumerable)obj).GetEnumerator();
            Boolean moreElements = enumerator.MoveNext();
            while (moreElements)
            {
                builder.Append(enumerator.Current.OneWaySerialize());
                moreElements = enumerator.MoveNext();
                if (moreElements)
                {
                    builder.Append(",");
                }
            }

            builder.Append("]");
        }
        else
        {
            builder.AppendFormat("{0} {{ ", IsAnonymousType(objType) ? "new" : objType.Name);

            PropertyInfo[] properties = objType.GetProperties();
            for (Int32 p = properties.Length; p > 0; p--)
            {
                PropertyInfo prop = properties[p-1];
                String propName = prop.Name;
                Object propValue = prop.GetValue(obj, null);
                builder.AppendFormat("{0} = {1}", propName, propValue.OneWaySerialize());
                if (p > 1)
                {
                    builder.Append(", ");
                }
            }

            builder.Append(" }");
        }

        return builder.ToString();
    }

    // http://stackoverflow.com/a/2483054/298053
    private static Boolean IsAnonymousType(Type type)
    {
        if (type == null)
        {
            return false;
        }
        return Attribute.IsDefined(type, typeof(System.Runtime.CompilerServices.CompilerGeneratedAttribute), false)
            && type.IsGenericType && type.Name.Contains("AnonymousType")
            && (type.Name.StartsWith("<>") || type.Name.StartsWith("VB$"))
            && (type.Attributes & TypeAttributes.NotPublic) == TypeAttributes.NotPublic;
    }

    private static Boolean IsEnumerableType(Type type)
    {
        if (type == null)
        {
            return false;
        }
        foreach (Type intType in type.GetInterfaces())
        {
            if (intType.GetInterface("IEnumerable") != null || (intType.IsGenericType && intType.GetGenericTypeDefinition() == typeof(IEnumerable<>)))
            {
                return true;
            }
        }
        return false;
    }
} 
```

像这样称呼它：

```
someDefinedObject.OneWaySerialize(); 
```

**修订**

1.  初始版本
2.  2012 年 12 月 26 日更新
    *   添加了对 IEnumerable 的检查（感谢 aboveyou00）
    *   添加了对匿名类型的检查（并在输出时将其标记为“新”）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-19T15:27:47.023

如果您习惯于序列化为 JSON，[Json.NET](http://json.codeplex.com/)是解决此问题的好方法。

# jquery - 如何找到由于jquery .live而导致事件的元素

> ID：13955541
> 
> 赞同：2
> 
> 时间：2012-12-19T15:23:24.357
> 
> 标签：jquery

如何找到由于 .live (jQuery 方法) 而导致事件的元素的 ID？

以下是一个例子：

```
$("form[data-f=true]").live("submit", function (evt) {
    /*
      If I have <input type="submit" name="Submit1" data-f="true" /> and this button is clicked, then I want to know it's Submit1 button.
    */
}); 
```

我检查了 evt 及其属性/字段，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:24:24.883

用这个，

```
event.target //DOM object.

evt.target.id  //id of source element.

sourceElement = $(evt.target.id); // will get you jQuery object 
```

*请注意，从 jQuery 1.7 开始，不推荐使用 $.live。改用 $.on 。*

获取导致提交的元素。

```
$(document).ready(function() {
    $(document).on('submit', 'form[data-f=true]', function() { 

    var elem = $("input[type=submit][clicked=true]");
    alert(elem.attr('id'));
    // DO WORK

});

$("form[data-f=true] input[type=submit]").click(function() {
    $("input[type=submit]", $(this).parents("form")).removeAttr("clicked");
    $(this).attr("clicked", "true");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:01:59.943

该`submit`事件由表单本身发出，因此 将`.target`是正在提交的表单。如果您想知道最后点击表单内的哪个按钮，您需要绑定到从按钮冒出的事件，例如`click`：

```
$("form").on("click", ":submit", function (event) {
    console.log(event.target); // The submit button last clicked
});​ 
```

从这里您可以选择提交或不提交表格。此处理程序仅响应`form`元素上发生的单击事件，从`submit`内部的按钮开始。

演示：http: [//jsfiddle.net/5sQZ5/1/](http://jsfiddle.net/5sQZ5/1/)

您可以在表单中动态添加对最后单击元素的引用，以便在表单的`submit`处理程序中确定谁引发了事件：

```
// Tell submit buttons to update parenting forms when clicked
$(":submit").on("click", function (event) {
    $(this).closest("form").data("target", this);
});

// When a form is submitted, find last associated submit button
$("form").on("submit", function (event) {
    console.log( $(this).data("target") ); 
}); 
```

演示：http: [//jsfiddle.net/5sQZ5/2/](http://jsfiddle.net/5sQZ5/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:24:40.173

在事件处理程序中，`this`指向事件的生成器

```
$("form[data-f=true]").live("submit", function (evt) {
    $(this); // is the event generator.
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:28:14.443

当前元素将应用于处理函数，因此您可以简单地使用`this.id`：

```
$("form[data-f=true]").live("submit", function (evt) {
    alert(this.id)
}); 
```

您还可以询问事件本身以查看哪个元素引发了事件：

```
$("form[data-f=true]").live("submit", function (evt) {
    alert(evt.target.id)
}); 
```

# javascript - 删除 Record，在 Ember Data 中调用适配器的 deleteRecord 之前重置关系

> ID：13955548
> 
> 赞同：3
> 
> 时间：2012-12-19T15:23:38.127
> 
> 标签：javascript, ember.js, ember-data

由于我必须处理一个棘手的 API，我对 deleteRecord Hook 有疑问。假设我有一个父/子模型，我想删除一个子记录。我必须调用的网址是这样的：

[http://myapi.com/parent/:parent_id/child/:child_id](http://myapi.com/parent/:parent_id/child/:child_id)

因此，在 deleteRecord 适配器中，我尝试使用要删除的记录来构建 url，例如：

```
deleteRecord: function(store, type, record) {
   var url = 'http://apiurl/parent/' + record.get('parent.id') + '/child/' + record.get('id') 
   ....
} 
```

但问题是调用适配器的deleteRecord时，参数中的记录没有关系（我认为它们之前已重置）。

有没有办法解决这个问题？

谢谢

# c++ - 文件处理类对象

> ID：13955549
> 
> 赞同：1
> 
> 时间：2012-12-19T15:23:42.903
> 
> 标签：c++

这是一个用于实现离线消息系统的 C++ 程序。首先，用户必须通过选择用户名和密码来注册帐户。然后他们可以向其他用户发送和接收消息。

我已经编写了程序，但似乎存在一些逻辑错误。

我在注册时将用户详细信息写入文件电子邮件。数据作为对象写入文件。

假设我注册了 3 个帐户。但我无法登录 IE。我无法验证登录并将控制权传递给`signin()`；

为了解决该错误，我创建了一个`print()`显示文件电子邮件内容的函数。

我已将其放置在登录身份验证部分之前，以查看是否存在数据记录

但是没有显示记录。

在解决此问题之前，我无法测试代码的其他部分。

我认为可能导致错误的部分代码：

```
#include<fstream.h>
#include<conio.h>
#include<string.h>
#include<process.h>
#include<stdio.h>

int user;           // to keep a track of no. of users

class mail
{
public:
    char un[25];             // user name
    char pd[25];             // passsword
    int ino;                 // no. of inbox messages
    int sno;                 //no.of sent messags
    char isbj[25][25];
    char ssbj[25][25];
    char imsg[25][50];
    char smsg[25][50];       // character array to store inbox and sent messages respecvly
    void reg();             // func to sign up
    void signin();
    mail()
    {
    }
    ~mail()
    {
    }
};

void print();
void print()                     // for testing purpose. retrieving data in the file
{
    mail o;
    cout<<"\nRunning print func();";

    ifstream filein;
    filein.open("email",ios::in|ios::binary);
    if(!filein)
    {
        cout<<"Unable to open file to read\n";
    }
    else
    {
        filein.seekg(0);
        filein.read((char *)&o,sizeof(o));
        while(filein)
        {
            puts(o.un);
            puts(o.pd);
            cout<<o.ino<<"  "<<o.sno;
            filein.read((char *)&o,sizeof(o));
        }
        getch();
    }
}

void mail::reg()                      // sign up function
{
    clrscr();
    cout<<"Enter user name ( enter unique name )\n";
    gets(un);
    cout<<"Enter password\n";
    gets(pd);
    ofstream filout;
    filout.open("email",ios::app|ios::binary);
    if(!filout)
    {
        cout<<"cannot open file\n";
    }
    else
    {
        ino=-1;
        sno=-1;                  // initialising no. of sent and inbox msgs as 0 on regtrn

        filout.write((char *)&this,sizeof(this));
        filout.close();
    }
    cout<<"You are now registered. Plz login\n";
    getch();

}        // end of sign up or register func

void mail::signin()
{
    .
        .
        .
} // end of signin

void screen(void);
void signup(void);

void main()
{
    clrscr();
    char usrnm[25],pwd[25],s[25],c;
    int i;
m:
    clrscr();
    screen();
    gotoxy(30,4);
    c=getch();
    if(c=='i'||c=='I')               //if user opts to sign in
    {
        gotoxy(62,11);
        gets(usrnm);
        gotoxy(62,13);
        for(i=0;i< 25;i++)                   // getting password
        {
            if( i < 0)
                i=0;
            pwd[i]=getch();
            if(pwd[i]=='\b')
            {
                i-=2;
                cout<<"\b \b";
                continue;
            }

            if(pwd[i]=='\r')
                break;
            cout<<"*";
        }
        pwd[i]='\0';
        clrscr();              // pwd now contains password for sign in

        print();

        int f;
        {                       // local block

            mail obj;
            ifstream filein;
            filein.open("email",ios::in|ios::binary);    // to read records from file and authenticating the user
            if(!filein)
            {
                cout<<"Unable to open file to read\n";
            }
            else
            {
                filein.seekg(0);
                filein.read((char *)&obj,sizeof(obj));
                while(filein)
                {
                    if(strcmp(usrnm,obj.un)==0)
                    {
                        f=1;
                        if(strcmp(pwd,obj.pd)==0)
                        {
                            obj.signin();            // user authenticated. now transfering control
                            break;
                        }
                        else
                        {
                            cout<<"wrong password\n";
                            getch();
                            break;
                        }
                    } // end of if
                    else
                    {
                    }
                    filein.read((char *)&obj,sizeof(obj));
                }               // end of while
                filein.close();
            } // end of else

        }

        if(f==0)
            cout<<"Wrong username or password\n";
        getch();
        goto m;
    }
    else if(c=='s'||c=='S')       // user opts to sign up
    {
        signup();
        getch();
        goto m;
    }
    else if(c=='e'||c=='E')       // user choose to exit
        exit(0);
    else
    {
        clrscr();
        cout<<"you have entered a wrong key. please check and try again\n";
        getch();
        goto m;
    }

}  //end of main

void signup()                   // sign up function
{
    int t;
    clrscr();
    {
        mail obj;
        ifstream filin;
        filin.open("user.txt",ios::ate);      // a file to store the no. of currently registered user. THIS IS FOR FUTURE USE
        if(!filin)
        {
            cout<<"cannot open file\n";
        }
        else
        {
            filin.seekg(0);
            filin>>t;
        }
        filin.close();
        user=t;
        ++user;                     // incrementing no. users

        ofstream filout;
        filout.open("user.txt",ios::out);
        if(!filout)
        {
            cout<<"cannot open file\n";
        }
        else
        {
            filout.seekp(0);
            filout<<user;                 //Updating user
        }
        filin.close();
        obj.reg();

    }  // end of block

    return;

}       // end of sign up

void screen()                // function for login screen
{
    .
        .
} 
```

完整代码：

```
#include<fstream.h>
#include<conio.h>
#include<string.h>
#include<process.h>
#include<stdio.h>

int user;           // to keep a track of no. of users

class mail
{
public:
    char un[25];             // user name
    char pd[25];             // passsword
    int ino;                 // no. of inbox messages
    int sno;                 //no.of sent messags
    char isbj[25][25];
    char ssbj[25][25];
    char imsg[25][50];
    char smsg[25][50];       // character array to store inbox and sent messages respecvly
    void reg();             // func to sign up
    void signin();
    mail()
    {
    }
    ~mail()
    {
    }
};

void print();
void print()                     // for testing. retrieving data in the file
{
    mail o;
    cout<<"\nRunning print func();";

    ifstream filein;
    filein.open("email",ios::in|ios::binary);
    if(!filein)
    {
        cout<<"Unable to open file to read\n";
    }
    else
    {
        filein.seekg(0);
        filein.read((char *)&o,sizeof(o));
        while(filein)
        {
            puts(o.un);
            puts(o.pd);
            cout<<o.ino<<"  "<<o.sno;
            filein.read((char *)&o,sizeof(o));
        }
        getch();
    }
}

void mail::reg()                      // sign up function
{
    clrscr();
    cout<<"Enter user name ( enter unique name )\n";
    gets(un);
    cout<<"Enter password\n";
    gets(pd);
    ofstream filout;
    filout.open("email",ios::app|ios::binary);
    if(!filout)
    {
        cout<<"cannot open file\n";
    }
    else
    {
        ino=-1;
        sno=-1;                  // initialising no. of sent and inbox msgs as 0 on regtrn

        filout.write((char *)&this,sizeof(this));
        filout.close();
    }
    cout<<"You are now registered. Plz login\n";
    getch();

}        // end of sign up or register func

void mail::signin()
{
    int f,i;
    char subj[25],message[50],usrnm[25];    // temporary varibles to store subject,message and username

start:
    clrscr();
    cout<<"1.compose \n2.inbox \n3.Sent\n4.logout";
    cout<<"\nEnter ur choice\n";
    int ch;
    cin>>ch;

    switch(ch)
    {

    case 1:                                       // switch for compose message
        cout<<"enter username\n";
        gets(usrnm);
        {            // beginning of local loop
            mail temp;

            ifstream filein;
            filein.open("email",ios::in|ios::binary);
            if(!filein)
            {
                cout<<"Unable to open file to read\n";
            }
            else
            {
                filein.read((char *)&temp,sizeof(temp));
                while(filein)
                {
                    if(strcmp(usrnm,temp.un)==0)
                    {
                        cout<<" User name valid\n";
                        f=1;
                        cout<<"Enter subject\n";
                        gets(subj);
                        cout<<"Enter message\n";
                        gets(message);
                        temp.ino++;
                        strcpy(temp.isbj[temp.ino],subj);
                        strcpy(temp.imsg[temp.ino],message);  // copying message to recepient inbox

                        sno++;
                        strcpy(ssbj[sno],subj);
                        strcpy(smsg[sno],message);  // copying messages to sender sent folder

                        cout<<"Your message has been sent successfully\n";
                        break;
                    }
                    else      // to avoid if else mismatch
                    {
                    }
                    filein.read((char *)&temp,sizeof(temp));
                }               // end of while
            }
            filein.close();

            mail temp1;

            long pos;                  // below code modifies current users object
            fstream fio("email",ios::in|ios::out|ios::binary);
            pos=fio.tellg();
            fio.read((char*)&temp1,sizeof(temp1));
            while(fio)
            {
                if(strcmp(un,temp1.un)==0)
                {
                    fio.seekg(pos);
                    fio.write((char*)&this,sizeof(this));
                    break;
                }
                pos=fio.tellg();
                fio.read((char*)&temp1,sizeof(temp1));
            }   //end of while
            fio.close();

            mail temp2;               // below code modifies recipients object

            fio.open("email",ios::in|ios::out|ios::binary);
            pos=fio.tellg();
            fio.read((char*)&temp2,sizeof(temp2));
            while(fio)
            {
                if(strcmp(temp.un,temp2.un)==0)
                {
                    fio.seekg(pos);
                    fio.write((char*)&temp,sizeof(temp));
                    break;
                }
                pos=fio.tellg();
                fio.read((char*)&temp2,sizeof(temp2));
            } // end of while
            fio.close();
        } // end of block

        if(f==0)
            cout<<"invalid user. Please enter a valid user name\n";
        getch();
        break;

    case 2:
        if(ino<0)
            cout<<"There are no messages in your inbox\n";
        else
        {
            for(i=0;i<=ino;i++)
            {
                cout<<"\nMessage "<<i+1<<"\n";   // printing inbox messages
                puts(isbj[i]);
                puts(imsg[i]);
            }
        }
        getch();
        break;

    case 3:
        if(sno<0)
            cout<<"There are no sent messages\n";
        else
        {
            for(i=0;i<=sno;i++)
            {
                cout<<"\nMessage "<<i+1<<"\n";      // printing sent messages
                puts(ssbj[i]);
                puts(smsg[i]);
            }
        }
        getch();
        break;

    case 4:
        cout<<"Logout sucess\n";
        return;

    default : cout<<"wrong choice\n";

    } // end of switch

    goto start;

} // end of signin

void screen(void);
void signup(void);

void main()
{
    clrscr();
    char usrnm[25],pwd[25],s[25],c;
    int i;
m:
    clrscr();
    screen();
    gotoxy(30,4);
    c=getch();
    if(c=='i'||c=='I')               //if user opts to sign in
    {
        gotoxy(62,11);
        gets(usrnm);
        gotoxy(62,13);
        for(i=0;i< 25;i++)                   // getting password
        {
            if( i < 0)
                i=0;
            pwd[i]=getch();
            if(pwd[i]=='\b')
            {
                i-=2;
                cout<<"\b \b";
                continue;
            }

            if(pwd[i]=='\r')
                break;
            cout<<"*";
        }
        pwd[i]='\0';
        clrscr();              // pwd now contains password for sign in

        print();

        int f;
        {                       // local block

            mail obj;
            ifstream filein;
            filein.open("email",ios::in|ios::binary);    // to read records from file and authenticating the user
            if(!filein)
            {
                cout<<"Unable to open file to read\n";
            }
            else
            {
                filein.seekg(0);
                filein.read((char *)&obj,sizeof(obj));
                while(filein)
                {
                    if(strcmp(usrnm,obj.un)==0)
                    {
                        f=1;
                        if(strcmp(pwd,obj.pd)==0)
                        {
                            obj.signin();            // user authenticated. now transfering control
                            break;
                        }
                        else
                        {
                            cout<<"wrong password\n";
                            getch();
                            break;
                        }
                    } // end of if
                    else
                    {
                    }
                    filein.read((char *)&obj,sizeof(obj));
                }               // end of while
                filein.close();
            } // end of else

        }

        if(f==0)
            cout<<"Wrong username or password\n";
        getch();
        goto m;
    }
    else if(c=='s'||c=='S')       // user opts to sign up
    {
        signup();
        getch();
        goto m;
    }
    else if(c=='e'||c=='E')       // user choose to exit
        exit(0);
    else
    {
        clrscr();
        cout<<"you have entered a wrong key. please check and try again\n";
        getch();
        goto m;
    }

}  //end of main

void signup()                   // sign up function
{
    int t;
    clrscr();
    {
        mail obj;
        ifstream filin;
        filin.open("user.txt",ios::ate);      // a file to store the no. of currently registered user. THIS IS FOR FUTURE USE
        if(!filin)
        {
            cout<<"cannot open file\n";
        }
        else
        {
            filin.seekg(0);
            filin>>t;
        }
        filin.close();
        user=t;
        ++user;                     // incrementing no. users

        ofstream filout;
        filout.open("user.txt",ios::out);
        if(!filout)
        {
            cout<<"cannot open file\n";
        }
        else
        {
            filout.seekp(0);
            filout<<user;                 //Updating user
        }
        filin.close();
        obj.reg();

    }  // end of block

    return;

}       // end of sign up

void screen()                // function for login screen
{
    int i;
    for(i=0;i<80;i++)
        cout<<"*";
    cout<<" SuperMail                             New to SuperMial ? Create an Account     ";
    for(i=0;i<80;i++)
        cout<<"*";
    cout<<" Press S To Sign up                    Already have a account Press I to sign in";
    for(i=0;i<80;i++)
        cout<<"-";
    gotoxy(1,6);
    cout<<"\n\n\n\n Super mail is built on the idea that \n it can be more intuitive,efficient and \n useful and may be even fun:\n\n Lots of space\n\n Less spam";
    gotoxy(1,22);
    for(i=0;i<80;i++)
        cout<<"-";
    gotoxy(32,23);
    cout<<"PRESS E TO EXIT";
    gotoxy(1,24);
    for(i=0;i<80;i++)
        cout<<"-";
    gotoxy(50,10);
    cout<<"-------------------------------";
    gotoxy(50,11);
    cout<<"| USERNAME :                  |";
    gotoxy(50,12);
    cout<<"-------------------------------";
    gotoxy(50,13);
    cout<<"| PASSWORD :                  |";
    gotoxy(50,14);
    cout<<"-------------------------------";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:31:24.713

我还没有通读所有代码，但一个问题是

```
filout.write((char *)&this,sizeof(this)); 
```

`this`是一个指针，因此上面的代码将您的类实例的地址写入文件。您可以使用写出所有班级成员

```
filout.write((char*)this,sizeof(*this)); 
```

我希望这也会写出一些您不需要/不需要的数据，例如 v-table 的地址。相反，您最好明确地保留您关心的类成员。

# asp.net - 返回的 Sitecore 布局文件名

> ID：13955555
> 
> 赞同：1
> 
> 时间：2012-12-19T15:24:03.923
> 
> 标签：asp.net, vb.net, sitecore

我正在尝试从使用 Sitecore 开发的网站获取地址栏 URL 中的网页名称。

```
http://localhost:52543/About/AboutUs.aspx 
```

我的代码没有返回我预期的“AboutUs.aspx”，而是返回了 Sitecore 布局控制文件名：“BrowserFixedLaout.aspx”。

我正在使用以下代码：

```
Dim test As String = System.IO.Path.GetFileName(Request.Url.ToString()) 
```

与 Sitecore 合作时，您如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:31:08.277

如果要在 Sitecore 中获取页面（项目）的名称，可以使用

```
Sitecore.Context.Item.Name 
```

如果您只想获取 /AboutUs.aspx，您可以使用

```
HttpContext.Current.Request.Path 
```

并在最后/仅参加之后

# servicestack - Servicestack json 序列化器序列化为一个空对象 {}。

> ID：13955562
> 
> 赞同：1
> 
> 时间：2012-12-19T15:24:23.167
> 
> 标签：servicestack

就在昨天，我正在使用类型化的 redis 客户端进行一些重放测试，并使用了一个小型 DTO：

```
public class OrderDto
  {
  public int OrderNo;
  public double Subtotal;
  public double Total;
  } 
```

这与序列化程序一起工作得很好（我假设它默认为 redis 客户端中的 json 序列化程序）。我会在redis中得到类似的东西：

```
"{\"OrderNo\":1,\"Subtotal\":10,\"Total\":11.37}" 
```

现在，当我将其扩展为如下内容时：

```
public class CalcOrderDto
{
    public int OrderNo;
    public double MerchandiseQuantity;
    public double MerchandiseGross;
    public double MerchandiseAdjustment;
    public double MerchandiseTaxable;
    public double MerchandiseNet;
    public double MerchandiseTaxesTotal;

    public double ShippingQuantity;
    public double ShippingGross;
    public double ShippingAdjustment;
    public double ShippingTaxable;
    public double ShippingNet;
    public double ShippingTaxesTotal;

    public double FinalQuantity;
    public double FinalGross;
    public double FinalAdjustment;
    public double FinalTaxable;
    public double FinalNet;
    public double FinalTaxesTotal;
} 
```

现在我只得到这个：

```
"{}" 
```

我的问题是为什么！？这也是另一个 Web 服务项目中的问题，因此我目前只提供 XML。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T16:17:09.607

尝试使用属性而不是字段。

# rotation - 我的 UIAlertView 没有从一开始就旋转到横向模式

> ID：13955567
> 
> 赞同：0
> 
> 时间：2012-12-19T15:24:35.443
> 
> 标签：rotation, uialertview, landscape

我在这个网站上发现了很多类似的问题，但它们都没有完全帮助我解决我的问题。

我的 ViewController 处于横向模式，我希望我的 UIAlertView 以相同的模式出现。我在这里找到了一些答案，但它只有在以纵向模式显示 UIAlertView 后才会旋转它。

这是我使用的代码：

```
 - (void)didPresentAlertView:(UIAlertView *)alertView
 {
 // UIAlertView in landscape mode

 [UIView beginAnimations:@"" context:nil];
 [UIView setAnimationDuration:0.1];
 alertView.transform = CGAffineTransformRotate(alertView.transform, 3.14159/2);
 [UIView commitAnimations];
 } 
```

为了将 UIViewController 旋转到横向模式，我使用了以下代码：

```
 - (BOOL)shouldAutorotate {

UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];

if (orientation==UIInterfaceOrientationLandscapeRight) {
    // do some sh!t
}

return YES;
}

-(NSUInteger)supportedInterfaceOrientations{
   return UIInterfaceOrientationMaskLandscapeRight;
} 
```

# php - 如何限制长网页以及如何再次扩展？

> ID：13955571
> 
> 赞同：0
> 
> 时间：2012-12-19T15:24:40.820
> 
> 标签：php, database, loops

我的 php 网页有问题。此页面是一家汽车销售公司。该页面列出了数据库中的所有车辆。但是如果有100辆车，页面会很长，用户需要向下滚动直到最后。但是如何限制所有列表并显示5乘5。我的意思是在第一个视图中，用户可以看到5辆车，然后如果他想查看更多，他可以点击“查看更多”链接查看下一个5张图片，以此类推。

我正在使用的代码是这样的。它仍然有效。但我需要修改。那么我该怎么做呢？如何添加“查看更多”链接/按钮？请帮我...！

```
$car = mysql_query("SELECT * FROM vehicle_info ORDER BY id desc");
while($row = mysql_fetch_array ($image))
   {
  echo $row['id'];
      echo "<br>";
      echo "<img width=200 src='".$row['directory']."'>";
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:31:08.783

您正在搜索的是**分页**。

# 老学校的方式

基本上，这是由 MySQL 的**[limit](http://dev.mysql.com/doc/refman/5.0/en/select.html)**函数完成的。

```
$car = mysql_query("SELECT * FROM vehicle_info LIMIT 5,10 ORDER BY id desc"); 
```

检索第 6-15 行。很多人似乎对*LIMIT*命令的顺序感到困惑。把它想象成*跳过 5 行*，*取 10 行*。

此外，您必须添加页码才能浏览结果。

# 现代方式

但是，如上所述，还可以选择使用*AJAX*和*jQuery*插件构建**无限滚动。**在这种情况下，您不需要构建页码链接。请参阅[此示例](http://ferienfotos.hotelplan.ch/boards/index)。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:40:28.677

是的，您需要一个用于 mysql 数据的分页器脚本，您可以测试此代码！？

[http://www.phpeasystep.com/phptu/29.html](http://www.phpeasystep.com/phptu/29.html)**

# java - 我必须使用 jexcel 使用 java 中的列值对 xls 工作表行进行排序

> ID：13955574
> 
> 赞同：3
> 
> 时间：2012-12-19T15:24:48.293
> 
> 标签：java, excel, groovy, jexcelapi

我在java中使用jexcel api。我需要读取 xls 特定的列值，并且必须根据该值对 xls 中的整个行进行排序。然后我必须将这些行以排序方式保存在新的 xls 中。我可以使用 TreeMap 做到这一点，但它为 memmoryOutOfBound 异常创造了可能性。

所以我需要一个有效的方法。任何排序代码都会有很大帮助。请使用 jexcel 的 Treemap 找到我的代码实现

```
def sort() {
        def wbSetting = nullenter code here
        def writableWorkBook = null`enter code here`
        def writableSheet = null`enter code here`
        Workbook workbook = Workbook.getWorkbook(new File(grailsApplication.config.app.xls.path));
        Sheet sheet = workbook.getSheet(0);
        Cell[] flagCell = sheet.getColumn(1)
        TreeMap map = new TreeMap (Collections.reverseOrder());

        flagCell.each { flag ->
            Cell firstName = sheet.getCell(0, flag.getRow());
            Cell lastName = sheet.getCell(1, flag.getRow());
            Cell ageCell = sheet.getCell(2,flag.getRow());

            String first = firstName.getContents();
            String last = lastName.getContents();
            String age=ageCell.getContents()
            if(!age.isEmpty())
            {
            map.put(age,first+"-"+last)
            }
        }
        workbook.close()

        wbSetting = new WorkbookSettings()
        wbSetting.setUseTemporaryFileDuringWrite(true)
        String filename = grailsApplication.config.app.calcfilesoutput.path
        writableWorkBook = Workbook.createWorkbook(new File(filename), wbSetting)
        writableSheet = writableWorkBook.createSheet("sheet1", 0)

        int i=0
        Iterator iterator= map.entrySet().iterator();
        while(iterator.hasNext())
        {
            def it=iterator.next();
            String fullName=map.get(it.getKey().toString())
            String[] result=fullName.split("-")
            String first=result[0]
            String last=result[1]

            writableSheet.addCell(new Label(0, i, first))
            writableSheet.addCell(new Label(1, i, last))
            writableSheet.addCell(new Label(2, i, it.getKey().toString()))
            i++;
        }
        writableWorkBook.write();
        writableWorkBook.close();
    } 
```

我的 xls 有三列，即名字、姓氏和年龄。我通过添加已经排序的 TreeMap 使用年龄列值对行进行排序。但这不是一种有效的方法。如果可能，请提供其他示例代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:11:21.373

如果您发现 Map 太占用内存，您可以创建一个小子类用作记录。使对象具有可比性。大概是这样的：

```
 private static class MyRecord implements Comparable<MyRecord>
  {
    int age;
    String name;

    @Override
    public int compareTo(MyRecord o)
    {
      if (o == null)
      {
        return -1;
      }
      return (age - o.age);
    }
  } 
```

然后，您可以创建这些 MyRecord 对象的列表，关闭原始电子表格，对列表进行排序，然后从排序列表中写出您的新电子表格。

# java - 将字符串数字转换为双精度，然后在 Java 中正确格式

> ID：13955579
> 
> 赞同：1
> 
> 时间：2012-12-19T15:25:00.377
> 
> 标签：java, numbers, format

好的，所以我已经为此搜索了 2 个小时，请在将其标记为重复之前查看问题。

我有许多包含数字的字符串

数字都会这样

```
String one = 611960;
String two = 64850;
String three = 0;
String four = 636; 
```

我希望能够以正确的格式拥有这些，如

6,119.60 648.50 0.00 6.36

我试过了

```
DecimalFormat df = new DecimalFormat("#,###,###,##0.00"); 
```

并将字符串转换为双精度，例如

```
double amount = Double.parseDouble(one); 
```

这似乎给了 611960.0

然后我做

```
String gfeeOne = df.format(amount); 
```

这反过来又给出了 611,960.00

所以在这个阶段我有点迷茫。这应该很简单，也许我迷路了。我想涵盖所有情况，例如 1000000000 例如 1,000,000,000.00

非常感谢帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T15:27:06.477

您拥有的字符串被解释为整数，因为它们没有任何类型的小数分隔符（这取决于语言环境，请注意...）。所以你基本上只需要将你的数字除以 100，或者换句话说，将小数点向左移动两位。

你应该试试：

```
double amount = Double.parseDouble(one)/100.0; 
```

或者，更好的是，您可以将自己从基本浮点舍入问题中解脱出来，并使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)：

```
BigDecimal amount = new BigDecimal(one).movePointLeft(2);
String gfeeOne = df.format(amount); 
```

**警告**如果考虑非常大的值，请务必使用`BigDecimal`，因为这样可以保留精度，而浮点数可能会丢失精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:34:35.800

您还可以使用 String.Format：

```
String one = String.Format("%,.2f", (double)611960); 
```

会将整`(double)`数值转换为浮点值。格式字符串`%,.2f`会将浮点数 ( `f`) 转换为带两个小数点 ( `.2`) 的字符串表示形式，并添加分组分隔符 ( `,`)。

# clojure - 在clojure中，如何获取当前命名空间的文件名？

> ID：13955580
> 
> 赞同：8
> 
> 时间：2012-12-19T15:25:02.950
> 
> 标签：clojure

我正在编写一些代码，这些代码需要存储有关当前命名空间的数据。我的代码正在生成一个本体，我需要分配需要在 clojure 调用之间持续存在的 URI。这些 URI 是自动生成的，因此不仅仅是代码作者编写它们的情况。

我想使用与 Emacs 存储数据的方式类似的机制；通过生成一些 lisp 表单并将它们保存在文件中。然后可以在 clojure 启动并且每个人都很高兴时评估这些。使用 leningen 等工具时的问题是，这些文件最终会出现在根目录中。

我可以根据标准目录约定进行构建，但我更喜欢直接从 clojure 获取数据；我知道编译器将源位置数据添加到 clojure；有没有办法让我自己访问它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T16:48:06.397

如果您正在寻找代码当前在运行时执行的命名空间，那么您可以简单地查看 的值`clojure.core/*ns*`：

```
user> (defn which-ns? [] (str *ns*))
user> (which-ns?)
"user"
user> (ns user2)
user2> (which-ns?)
"user2" 
```

`def`如果您正在查找定义了 var 或命名空间的文件，那么编译器在评估表单时会将您引用的源代码位置作为元数据存储在 var 上：

```
user> (defn foo [x] (inc x))
user> (meta #'foo)
{:arglists ([x]), :ns #<Namespace user>, :name foo, :line 1, :file "NO_SOURCE_FILE"} 
```

“NO_SOURCE_FILE”是因为您正在评估在 REPL 中输入的表单。如果您评估源文件中的代码，`:file`则将指向源文件的路径名。

# php - Magento 1.7 重写类

> ID：13955581
> 
> 赞同：1
> 
> 时间：2012-12-19T15:25:05.073
> 
> 标签：php, magento, overriding

我正在尝试覆盖 magento 类

```
class Mage_Adminhtml_Controller_Sales_Invoice extends Mage_Adminhtml_Controller_Action 
```

我创建了一个主管和文件 local/myModules/Adminhtml/Controller/Sales/Invoice.php，它的代码是。

```
include_once("Mage/Adminhtml/controller/Sales/Invoice.php");

class myModules_Adminhtml_Controller_Sales_Invoice extends Mage_Adminhtml_Controller_Sales_Invoice
{
    public function printAction()
   {
    echo "child class";exit;
    if ($invoiceId = $this->getRequest()->getParam('invoice_id')) {
        if ($invoice = Mage::getModel('sales/order_invoice')->load($invoiceId)) {
            $pdf = Mage::getModel('sales/order_pdf_invoice')->getPdf(array($invoice));
            $this->_prepareDownloadResponse('invoice'.Mage::getSingleton('core/date')->date('Y-m-d_H-i-s').
                '.pdf', $pdf->render(), 'application/pdf');
        }
    }
    else {
        $this->_forward('noRoute');
    }
  }
} 
```

而 local/myModules/Adminhtml/config.xml 是

```
 <?xml version="1.0"?>
  <config>
<modules>
    <myModules_Adminhtml>
        <version>1.1</version>
    </myModules_Adminhtml>
</modules>

<global>
        <blocks>
            <adminhtml>
                <rewrite>
                  <sales_order_view>myModules_Adminhtml_Block_Sales_Order_View</sales_order_view>
                </rewrite>
            </adminhtml>
        </blocks>
    </global>

<admin>
        <routers>
            <adminhtml> 
                <use>admin</use>
                <args>
                    <modules> 
                        <myModules_Adminhtml before="Mage_Adminhtml">myModules_Adminhtml</myModules_Adminhtml>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin> 
```

在浏览器中我有网址

```
/index.php/admin/sales_order_invoice/print/invoice_id/49191/ 
```

但它不显示“子类”；

实际上我想覆盖发票打印功能。我在 XML 中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:10:47.543

1) 'myModules' 应该是`MyModules`

2）由于您正在使用`<myModules_Adminhtml before="Mage_Adminhtml">`

代替

```
class Mage_Adminhtml_Controller_Sales_Invoice extends Mage_Adminhtml_Controller_Action 
```

和

```
include_once Mage::getModuleDir('controllers', 'Mage_Adminhtml') . DS . 'Sales' . DS . 'InvoiceController.php';

class MyModules_Adminhtml_Sales_InvoiceController extends Mage_Adminhtml_Sales_InvoiceController{
    ...
} 
```

阅读更多 @

[创建 Magento 模块的基础知识](http://coding.smashingmagazine.com/2012/03/01/basics-creating-magento-module/)

[如何重载控制器](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)

[Magento：覆盖核心文件（块、模型、资源、控制器）](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)

# ruby-on-rails - rails 控制台需要 nokogiri 返回 false （但适用于 irb）

> ID：13955586
> 
> 赞同：14
> 
> 时间：2012-12-19T15:25:17.427
> 
> 标签：ruby-on-rails, ruby, gem, nokogiri

我的环境在 Mac 上`ruby 1.9.3p327`。`rails 3.2.8`

我将宝石添加`nokogiri`到我的`Gemfile`. 运行`bundle install`命令。命令 show me`Using nokogiri (1.5.5)`和`gem list`命令 return `nokogiri (1.5.5)`。

在 rails 控制台中`require 'nokogiri'`return`false`但在`irb`其中 return `true`。

这怎么可能？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-19T15:37:13.563

根据[API 文档](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-require)的前两行，`require`将：

*   `true`加载成功则返回
*   `false`如果已经加载则返回
*   `LoadError`如果找不到文件，则引发

由于 Rails 控制台会加载您的 gem，因此之前可能需要 Nokogiri。厄布不这样做。

# java - 在 JSP 中嵌入小程序

> ID：13955594
> 
> 赞同：0
> 
> 时间：2012-12-19T15:26:01.987
> 
> 标签：java, jsp, applet, classname

所以我正在学习如何将小程序嵌入到 jsp 页面中。但问题是，当我运行 index.jsp 时，总是会出现错误。该错误说缺少小程序的类，我不知道如何解决。我把applet的全类名放在index.jsp中，applet的jar文件就制作好了。这是applet和jsp的代码。

```
 package HelloApplet;

    import java.applet.Applet;
    import java.awt.Graphics;

    public class HelloApplet extends Applet {

        @Override
        public void paint(Graphics g) {
             g.drawString("Hello applet!", 50, 25);
        }//end paint

    }//end class

    <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>JSP Page</title>
        </head>
        <body>
            <h1>Hello World!</h1>
            <br>
            <applet code="HelloApplet.HelloApplet" archive="HelloApplet.jar" width="600" height="480"/>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:35:03.447

代码属性可以是 .jar 吗？一切都在正确的目录中？

尝试这样的事情：

```
<applet code="HelloApplet.class" name="HelloApplet" archive="HelloApplet.jar"
    width=300 height=300>
    <param name="bgcolor" value="ffffff">
    <param name="fontcolor" value="000000">
    Your browser is not Java enabled.
</applet> 
```

如需更多帮助，请使用此[链接](http://www.w3schools.com/tags/tag_applet.asp)

# javascript - 在 Javascript 中对命名空间使用延迟初始化

> ID：13955595
> 
> 赞同：1
> 
> 时间：2012-12-19T15:26:03.053
> 
> 标签：javascript, namespaces, javascript-namespaces

我在 JavaScript、命名空间和缩小/连接方面遇到了几个问题。我无法控制（至少我不想控制）文件连接的顺序。使用命名空间函数，该函数在给定字符串（例如 'com.example.ExampleClass'）时仅返回一个对象，当我在另一个字符串中需要它时，可能不会定义一个“类”。

假设我有一个 DocumentProvider 对象，它需要来自 EventDispatcher 的功能。但是，在我当前的设置中，DocumentProvider 在 EventDispatcher 之前连接。我想在原型上定义这个功能，所以我不能在构造函数中扩展它。

所以，我提出的解决方案是使用延迟初始化：

*   定义顶层`namespace(alias, factory)`函数
*   在命名空间中使用伪重载将工厂分配给指定名称或返回工厂创建的对象

或者，我可以将其拆分为`define(alias, factory)`和`import(alias)`。更好的可读性，更污染全局空间。

我的问题是：我是否过度设计？这个问题有更好、更简单、更“标准”的解决方案吗？将命名空间功能（具有不同的实现）添加到语言中的风险是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:30:08.107

查看[RequireJS](http://requirejs.org/)它可能会为您节省大量时间。

# android - 为什么 `android:screenOrientation="behind"` 在 android 4.1.2 中不起作用？

> ID：13955606
> 
> 赞同：33
> 
> 时间：2012-12-19T15:26:36.913
> 
> 标签：android, android-activity, orientation, screen-orientation, android-orientation

作为一个测试样本，有一个包含 2 个活动的应用程序：在按钮单击`MainActivity`时启动。 它在 Android 4.0.4 上运行良好，但在 Android 4.1.2 上我遇到了意外行为。`SecondActivity`

系统设置中的 AutoRotation 已关闭（或已打开 - 没关系，“后面”选项无论如何都会被忽略）。
`android:screenOrientation="landscape"`is set for`MainActivity`和`android:screenOrientation="behind"`is set for `SecondActivity`，这意味着也`SecondActivity`必须以横向启动。
对于 Android 4.0.4 确实如此，但在 Android 4.1.2`SecondActivity`上是纵向的。

AndroidManifest.xml：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.my.example.testbehindorientation.MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.my.example.testbehindorientation.SecondActivity"
        android:configChanges="screenSize|orientation"
        android:label="@string/title_activity_second"
        android:screenOrientation="behind" >
    </activity>
</application> 
```

第二活动.java：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);
    logOrientation("onCreate");
}

@Override
protected void onDestroy() {
    super.onDestroy();
    logOrientation("onDestroy");
}

@Override
protected void onResume() {
    super.onResume();
    logOrientation("onResume");
}

private void logOrientation(String prefix) {
        int requestedOrientation = this.getRequestedOrientation();
        WindowManager lWindowManager =  (WindowManager) getSystemService(WINDOW_SERVICE);
        Configuration cfg = getResources().getConfiguration();
        int lRotation = lWindowManager.getDefaultDisplay().getRotation();   
        int orientation = cfg.orientation;
        Log.i(LOG_TAG, prefix + ", requestedOrientation is " + requestedOrientation + ", rotation is " + lRotation + ", orientation is " + orientation);
} 
```

单击按钮后，不带`android:configChanges="screenSize|orientation"`行的`AndroidManifest.xml`记录输出：`SecondActivity``MainActivity`

```
onCreate, requestedOrientation is 3, rotation is 1, orientation is 2
onResume, requestedOrientation is 3, rotation is 1, orientation is 2
onDestroy, requestedOrientation is 3, rotation is 0, orientation is 1
onCreate, requestedOrientation is 3, rotation is 0, orientation is 1
onResume, requestedOrientation is 3, rotation is 0, orientation is 1 
```

日志中包含`android:configChanges="screenSize|orientation"`的行`AndroidManifest.xml`：

```
onCreate, requestedOrientation is 3, rotation is 1, orientation is 2
onResume, requestedOrientation is 3, rotation is 1, orientation is 2 
```

现在没有活动娱乐，但结果总是一样的——`SecondActivity`从纵向开始！:( 也就是`SecondActivity`在onResume之后由于某种原因旋转到纵向。为什么？。

测试：

*   三星 Galaxy S3 与 Android 4.0.4 (好的)
*   三星 Galaxy S3 与 Android 4.1。？（漏洞）
*   带有 Android 4.1.2 的模拟器，带有纵向主屏幕方向（错误）
*   Android 4.0.3 模拟器（好的）
*   Android 4.2 模拟器（错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-16T05:54:36.770

如果您在使用清单更改方向时遇到问题，您可以在 java 中更改方向。这是清单和活动的完整代码。

**清单.xml**

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.my.example.testbehindorientation.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.my.example.testbehindorientation.SecondActivity"
        android:configChanges="screenSize|orientation"
        android:label="@string/title_activity_second" >
    </activity>
</application> 
```

**景观中的第二个活动**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);            
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);//Change according to need this is for landscape
    logOrientation("onCreate");
}

@Override
protected void onDestroy() {
    super.onDestroy();
    logOrientation("onDestroy");
}

@Override
protected void onResume() {
    super.onResume();
    logOrientation("onResume");
}

private void logOrientation(String prefix) {
        int requestedOrientation = this.getRequestedOrientation();
        WindowManager lWindowManager =  (WindowManager) getSystemService(WINDOW_SERVICE);
        Configuration cfg = getResources().getConfiguration();
        int lRotation = lWindowManager.getDefaultDisplay().getRotation();   
        int orientation = cfg.orientation;
        Log.i(LOG_TAG, prefix + ", requestedOrientation is " + requestedOrientation + ", rotation is " + lRotation + ", orientation is " + orientation);
} 
```

**在MainActivity的*onCreate()*方法中添加如下代码**

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);//Change according to need this is for landscape 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T07:36:06.713

`android:targetSdkVersion="16"`

在清单文件中删除此语句，因为 SDKVersion=16 仅适用于 v4.0。

# machine-learning - 余弦相似度多文档聚类的数学方法

> ID：13955608
> 
> 赞同：3
> 
> 时间：2012-12-19T15:26:52.277
> 
> 标签：machine-learning, cluster-computing, information-retrieval, document-classification, cosine-similarity

余弦相似度：通常在比较两个文档时使用。它测量两个向量之间的角度。如果该值为零，则两个向量之间的角度为 90 度，并且它们不共享任何项。如果值为 1，则两个向量除了幅度之外是相同的。当数据稀疏、不对称并且缺乏特征的相似性时，使用余弦。

当我将余弦用于两个向量（文档）时，我将根据下表获得结果

```
id        Doc1(TF)  Doc2 (TF)
London        5        3
Is            2        2
Nice         10        3
City          0        1 
```

然后将其标准化到最后。然后，我将得到余弦 Cos(v1,v2)= 90%

但是，如果我有 10 份文件，这意味着我得到了

```
Cos(v1,v2)= ? 
Cos(v1,v3)= ?
Cos(v1,v5)= ?
Cos(v1,v6)= ?
Cos(v1,v7)= ?
Cos(v1,v8)= ?
Cos(v1,v9)= ?
Cos(v2,v3)= ? 
Cos(v2,v4)= ?
Cos(v2,v5)= ?

And so o n 

Until 

Cos(v9,v10)= ? 
```

然后我必须比较结果。

有什么快速的方法吗？我怎样才能得到 10 个或更多文件的 cos。

我知道我怎样才能得到两个文件的余弦但是我怎样才能得到更多的文件呢？我想要数学方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:23:58.870

有一个非常棘手的优化很容易被忽视。

大多数时候，您的向量将是*sparse*。如果您查看余弦相似度的公式，请注意向量长度不会改变。所以你可以预先计算它们。

对于点积，请注意，如果您的向量在 10% 的维度中为非零，则*两者都*将在仅 1% 的维度中为非零。所以你只想计算非零维度的产品！例如，在您的示例中，您想跳过单词`City`。

如果您随后将数据转置为基于列的布局并将零放在那里，您可以以分布式方式非常快速地计算它。例如，列`v1`中将*缺少*`City`文档。然后计算每列中的成对乘积，并将它们输出到相应的文档对。最后，您使用总向量长度对这些总和进行归一化。**Mahout**应该已经这样做了，因此您应该在一本关于 Mahout 的好书中找到有关此方法的详细信息（抱歉，我没有好的指示）。

处理大量文本的关键思想是**利用稀疏性**。尽量避免任何值为 0 的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:25:57.143

这里有一些优化。由于成对距离矩阵关于诊断对称，因此只计算矩阵的上三角形。此外，要进行实际的聚类，假设您有成对距离矩阵，您可以在 n-1 次迭代中执行此操作。计算成对距离矩阵的一种快速方法是使用并行编程（比如 GPU）。结果表明，在 GPU 上计算成对距离比 CPU 快 64 倍。然而，对于像单链路层次聚类这样的聚类算法，实际的聚类必须在 CPU 上完成

# perl - perl 仅用于查找和替换完全匹配

> ID：13955610
> 
> 赞同：2
> 
> 时间：2012-12-19T15:26:54.490
> 
> 标签：perl, pattern-matching, replace, substitution

我正在尝试在 perl 中实现替换。我有一个二进制矩阵，我想替换

0 与 1

和

1 与 2。

所以我使用了以下行

```
s/1/2/g foreach @remaining; 
```

但是，此命令最终也替换了我的列名，其中包含数字。例如，它将 1234 转换为 2234。

我希望它只匹配和替换 1s 而不是 1234。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T15:28:57.480

使用单词边界，例如：

```
s/\b1\b/2/g foreach @remaining; 
```

同时替换 0 和 1：

```
s/\b([01])\b/1+$1/eg foreach @remaining; 
```

# java - 创建单例实例的工厂方法

> ID：13955614
> 
> 赞同：5
> 
> 时间：2012-12-19T15:27:02.623
> 
> 标签：java, multithreading

我在静态工厂方法中编写了以下代码以返回 DefaultCache 的单个实例。

```
public static ICache getInstance() {
   if (cacheInstance == null) {
      synchronized (ICache.class) {
         if (cacheInstance == null) {
            cacheInstance = new DefaultCache();
         }
      }
   }
   return cacheInstance;
} 
```

我们真的需要在同步块中对**cacheInstance进行第二次空检查吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:32:11.257

您需要第二次检查，因为在您尝试获取锁时，该值可能已由另一个线程设置。事实上，在您进入同步块之前，您无法安全地查看此值。它可以在任何时间之前由另一个线程设置。

最简单的惰性单例是使用枚举

```
public enum DefaultCache implements ICache {
     INSTANCE
} 
```

我假设您没有这样做，因此您可以更改实现。

顺便说一句：我建议您仅在可能的情况下使用无状态单例，并尽可能对所有有状态对象使用依赖注入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T15:31:42.083

我会避免使用延迟初始化的单例进行争用检查：

```
public class Singleton {
    public static ICache getInstance() {
       return LazyCacheInitializer.INSTANCE;
    }

    private class LazyCacheInitializer {
       private static final ICache INSTANCE = new DefaultCache();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:34:05.877

是的，否则可以创建两个以上的实例。假设您有多个线程。第一个测试是在竞争条件下完成的，即一些线程同时将变量视为 null 并尝试设置实例。如果没有第二次检查，每个线程都会创建一个新实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:31:06.803

假设`cacheInstance`是静态的，您应该考虑两种可能的初始化策略：

*   延迟初始化：单例字段在首次使用时填充了一个实例（如您的示例中所示）。

*   （标准）初始化：一旦类被 JVM 加载，单例字段就会被一个实例填充。

所以如果你打算使用惰性初始化，你应该检查是否为空，否则你只会返回一个空指针。

或者，您也可以在静态块中初始化该字段。

```
//class declaration
 static {   
  cacheInstance = new DefaultCache(); 
 } 
```

或在您声明它的同一行

```
private static final DefaultCache cacheInstance = new DefaultCache(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T16:13:17.417

您始终可以使用`enum`Peter 发布的基于单例模式的实现，但请记住，您的所有实现都是**每个类加载器**的单例。

您还必须留意`Cloneable`界面。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-19T15:29:29.287

有一个私有构造函数来避免所有这些检查。

```
class Singleton {
    private static final Singleton instance = new Singleton();

    private Singleton() {
    }

    public static final Singleton getInstance() {
        return instance;
    }
} 
```

# javascript - jquery tablesorter - 在ajax更新时我失去了排序功能

> ID：13955617
> 
> 赞同：3
> 
> 时间：2012-12-19T15:27:09.170
> 
> 标签：javascript, jquery, ajax, tablesorter

我已经看到了一些这样的问题，但据我所知，我所做的一切都是正确的，我对为什么这不起作用感到有点困惑。

这是我在 click 函数中的 ajax 调用。`#result_area`是表格的主体，如您所见，我正在替换内容。内容加载正常，但我失去了表格排序功能。奇怪的是，我确信这曾经有效，所以我对发生了什么变化感到有些困惑。我已经签入了萤火虫，并且肯定会调用触发器更新。

**更新**

当我收到以下错误 $("#result_table").trigger("update"); 叫做：

```
Error: TypeError: parsers[i] is undefined
Source File: http://swishprint.dev/assets/js/common/jquery.tablesorter.js
Line: 483 
```

第 483 行指的是以下内容：

```
function getCachedSortType(parsers,i) {
return parsers[i].type;
}; 
```

**表初始化函数（在 doc ready 中调用）：**

```
 function table_init() {
        $('#result_table').tablesorter({
        widgets: ['zebra'],
        widgetZebra: {
            css: ["dark", "darker"]
        },
        headers: {
            0: {
            sorter: false
            },
            5: {
            sorter: false
            },
            7: {
            sorter: false
            },
            8: {
            sorter: false
            }
          }
       });
} 
```

**点击功能：**

```
 function leftsort_click(event) { //main sort click (left menu)

    //build url and other unrelated stuff
            var page = window.name,
            page_index, api = $('#right_pane').jScrollPane({
                showArrows: true,
                maintainPosition: false
            }).data('jsp');   
            if (!$(this).hasClass('sort_cat')) {        
            $('ul.sort_ul li, ul.cat_items li').removeClass('active');
            $(this).addClass('active');
            var sid = $(this).attr('id');
            var title = $(this).html();
            var loadUrlx = page;
            if ((sid != '') && (sid != 'undefined')) {
                loadUrlx += '/' + sid;
            }
            var loadUrlStub = loadUrlx;
            if ($('.rpp_btn.active').length >= 1) {
                var res_per_page = $.trim($('.rpp_btn.active').html());
                page_index = $.trim($('.res_page_select.active a').html());
                if (($('.rpp_btn.active').hasClass('just_clicked')) || (!$('.res_page_select').hasClass('just_clicked'))) {
                page_index = '1';
                }
                if ((page_index != 1) || (res_per_page != 25)) {
                loadUrlx += '/' + page_index + '/' + res_per_page;
                }
                $('.rpp_btn, .res_page_select').removeClass('just_clicked');
            }       
            loadUrlx = b_url + loadUrlx;
            if (History.enabled) {
                History.pushState(null, null, loadUrlx);
                //var hash=History.getHash(), rootUrl = History.getRootUrl(), State = History.getState(), url = State.url, relativeUrl = url.replace(rootUrl,'');
            }
//Ajax call            
              $.ajax({
                    cache: false,
                    url: loadUrlx,
                    success: function(result) {
                        $("#result_area").html(result);
                        if ((page != 'home') && (page != 'guides')) {
                            var count_ele = $('.hidden_rescount').length;

                            //get td width and set width of table headers
                            api.reinitialise();
                            tsizer();
                            $("#result_table").trigger("update");
                        }
                    }
            });
        } 
```

**调用点击功能（在文档中）：**

```
$('#mainc').on("click", "ul.sort_ul li, ul.cat_items li", function(event) {
    leftsort_click.call(this);
    });
    } 
```

我的 HTML

```
<table width="100%" class="result_table tablesorter scrollableFixedHeaderTable" id="result_table" style="">
    <thead id="t_header">
        <tr>
            <th class="border_apps th_first th_img no-sort" id="th_img">IMG</th>
            <th class="border_apps th_name header headerSortUp" id="th_name">NAME</th>
            <th class="border_apps th_cat header" id="th_cat">CAT</th>
            <th class="border_apps th_urate header" id="th_urate">RATING <small>(USER)</small></th>
            <th class="border_apps th_orate header" id="th_orate">RATING <small>(ODDBALL)</small></th>
            <th class="border_apps th_info no-sort" id="th_info">INFO</th>
            <th class="border_apps th_alert header" id="th_alert">W</th>            <th class="border_apps th_edit no-sort" id="th_edit">EDIT</th>            <th class="border_apps th_last th_link no-sort" id="th_link">LINK</th>
        </tr>
    </thead>
    <tbody id="result_area">
//results here

</tbody>
</table> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:32:37.577

您需要使用 jQuery 的 on() 方法（特别是事件委托）来考虑动态加载的信息（通过 Ajax）。[http://api.jquery.com/on/](http://api.jquery.com/on/)

当您最初加载页面时，您的所有 jQuery 代码都是针对当时页面中存在的元素运行的。jQuery / JavaScript 不知道之后动态加载的内容对 DOM 所做的任何更改。使用 on() 的委托方法，您可以绑定到页面加载时存在的容器。当动态内容添加到容器中时，容器中触发的任何事件都会冒泡到现有元素，然后被正确处理。

例如你可以做这样的事情 -

```
$('#result_area').on('event', 'element_causing_event', function() {... 
```

在这种情况下 element_causing_event 将导致事件冒泡到 #result_area 然后可以处理它。

检查文档（http://tablesorter.com/docs/example-ajax.html）后，您似乎可以更新表格以让插件知道已添加数据 -

```
$('#result_table').trigger('update'); 
```

这应该允许正常排序。尝试在 AJAX 请求的成功回调中调用它。

# shell - 如何使用子目录的 LS 命令列出文件？

> ID：13955618
> 
> 赞同：0
> 
> 时间：2012-12-19T15:27:09.890
> 
> 标签：shell

我有这样的文件结构：

```
a
----1
----2
----3

b
----1
----2
----3 
```

我需要计算级别 2 的文件，级别 1 是 a,b 目录，那么有什么办法吗？获取特定级别的文件？

我是一个天真的 shell 程序员，到目前为止我用过的都是 ls | wc-l，但在这种情况下它会返回 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:58:41.983

Yet another way...

```
L2FilesDirs=`ls -d */* | wc -l`
L2Dirs=`ls -d */*/ | wc -l`

L2OnlyFiles=$(( $L2FilesDirs - $L2Dirs )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:36:09.467

假设 bash 或类似的 shell，使用 globbing 和数组

```
$ ls -R
.:
a  b

./a:
1  2  3

./b:
4  5  6
$ level2=(*/*)
$ echo "num files at level 2: ${#level2[@]}"
num files at level 2: 6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:29:54.337

有几个选项。

1.  递归计算所有文件：

    ```
    find . -type f | wc -l 
    ```

2.  `a`仅计算以下文件`b`：

    ```
    find a b -type f | wc -l 
    ```

3.  计算深度 2 的所有对象：

    ```
    find . -mindepth 2 -maxdepth 2 | wc -l
    find a b -mindepth 1 -maxdepth 1 | wc -l 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T15:30:20.323

一些 find(1) 可执行文件支持 mindepth 和 maxdepth 选项（遗憾的是，它们不是 POSIX，但如果您使用 Linux 或 Cygwin 等 GNU 工具）：

```
find . -mindepth 2 -maxdepth 2 
```

它列出了所有子目录中的所有文件系统对象（除了 . 和 .. 条目，这可能是你想要的）。

# c++ - 对 TR1 使用 boost 时，boost math 特殊函数编译错误

> ID：13955627
> 
> 赞同：1
> 
> 时间：2012-12-19T15:27:24.793
> 
> 标签：c++, gcc, boost

我一直在升级一个已经工作的项目，该项目依赖于 boost 1.43 到 boost 1.52。编译时，我在数学特殊函数头中收到一组奇怪的错误。不幸的是，我无法从下面的输出中找出导致它的代码。数学错误似乎无处不在，`DisplayWindow.h`并且`DisplayWindow.cpp`不使用这些数学函数。Linux 上的编译器是 gcc 4.1.2。boost 1.51 也是如此。有谁知道可能导致问题的原因？

我不确定这是否重要——我将 boost 用作[此处](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_tr1/usage.html#boost_tr1.usage.include_style)描述的 TR1 插件。

```
In file included from /home/p/plau/include/boost/fusion/tuple/tuple.hpp:22,
             from /home/p/plau/include/boost/fusion/tuple.hpp:10,
             from /home/p/plau/include/boost/fusion/include/tuple.hpp:10,
             from /home/p/plau/include/boost/tr1/tuple.hpp:58,
             from /home/p/plau/include/boost/tr1/utility.hpp:117,
             from /home/p/plau/include/boost/tr1/tr1/utility:38,
             from /home/p/plau/include/boost/serialization/nvp.hpp:19,
             from /home/p/plau/include/boost/bimap/bimap.hpp:57,
             from /home/p/plau/include/boost/bimap.hpp:13,
             from /home/p/plau/include/rlearn/Action.h:13,
             from /home/p/plau/include/rlearn/EnvWrapper.h:5,
             from ./rlsiva/DisplayWindow.h:9,
             from src/DisplayWindow.cpp:1:
/home/p/plau/include/boost/fusion/tuple/detail/preprocessed/tuple.hpp:21:7: warning: no newline at end of file
/home/p/plau/include/boost/math/special_functions/trunc.hpp: In function T boost::math::trunc(const T&, const Policy&):
/home/p/plau/include/boost/math/special_functions/trunc.hpp:24: error: raise_rounding_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/trunc.hpp: In function int boost::math::itrunc(const T&, const Policy&):
/home/p/plau/include/boost/math/special_functions/trunc.hpp:47: error: raise_rounding_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/trunc.hpp: In function long int boost::math::ltrunc(const T&, const Policy&):
/home/p/plau/include/boost/math/special_functions/trunc.hpp:62: error: raise_rounding_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/trunc.hpp: In function boost::long_long_type boost::math::lltrunc(const T&, const Policy&):
/home/p/plau/include/boost/math/special_functions/trunc.hpp:79: error: raise_rounding_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<0>&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:82: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:82: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:85: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:85: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:103: error: check_series_iterations is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:103: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<53>&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:115: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:115: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:118: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:118: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<64>&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:168: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:168: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:171: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:171: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<24>&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:223: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:223: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:226: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:226: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function typename boost::math::tools::promote_args<T, float, float, float, float, float>::type boost::math::log1p(T, const Policy&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:320: error: checked_narrowing_cast is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:320: error: expected primary-expression before , token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:320: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function float boost::math::log1p(float, const Policy&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:355: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:355: error: expected primary-expression before float
/home/p/plau/include/boost/math/special_functions/log1p.hpp:355: error: expected ; before float
/home/p/plau/include/boost/math/special_functions/log1p.hpp:355: error: expected unqualified-id before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:358: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:358: error: expected primary-expression before float
/home/p/plau/include/boost/math/special_functions/log1p.hpp:358: error: expected ; before float
/home/p/plau/include/boost/math/special_functions/log1p.hpp:358: error: expected unqualified-id before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function long double boost::math::log1p(long double, const Policy&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:367: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:367: error: expected primary-expression before long
/home/p/plau/include/boost/math/special_functions/log1p.hpp:367: error: expected ; before long
/home/p/plau/include/boost/math/special_functions/log1p.hpp:367: error: expected unqualified-id before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:370: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:370: error: expected primary-expression before long
/home/p/plau/include/boost/math/special_functions/log1p.hpp:370: error: expected ; before long
/home/p/plau/include/boost/math/special_functions/log1p.hpp:370: error: expected unqualified-id before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function double boost::math::log1p(double, const Policy&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:392: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:392: error: expected primary-expression before double
/home/p/plau/include/boost/math/special_functions/log1p.hpp:392: error: expected ; before double
/home/p/plau/include/boost/math/special_functions/log1p.hpp:392: error: expected unqualified-id before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:395: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:395: error: expected primary-expression before double
/home/p/plau/include/boost/math/special_functions/log1p.hpp:395: error: expected ; before double
/home/p/plau/include/boost/math/special_functions/log1p.hpp:395: error: expected unqualified-id before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp: In function typename boost::math::tools::promote_args<T, float, float, float, float, float>::type boost::math::log1pmx(T, const Policy&):
/home/p/plau/include/boost/math/special_functions/log1p.hpp:465: error: raise_domain_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:465: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:468: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:468: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/log1p.hpp:487: error: check_series_iterations is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/log1p.hpp:487: error: expected primary-expression before > token
/home/p/plau/include/boost/math/special_functions/hypot.hpp: In function T boost::math::detail::hypot_imp(T, T, const Policy&):
/home/p/plau/include/boost/math/special_functions/hypot.hpp:45: error: raise_overflow_error is not a member of boost::math::policies
/home/p/plau/include/boost/math/special_functions/hypot.hpp:45: error: expected primary-expression before > token
make: *** [../../objs/rlsiva/release/DisplayWindow.o] Error 1
make: Leaving directory `/home/p/plau/retina/project/components/rlsiva' 
```

更新：尝试在 Windows 上使用 mingw-gcc 4.7 和 boost 1.52 编译相同的代码会得到以下输出。

```
In file included from e:/code/boost_1_52_0/boost/math/constants/calculate_constants.hpp:11:0,
                 from e:/code/boost_1_52_0/boost/math/constants/constants.hpp:288,
                 from e:/code/boost_1_52_0/boost/math/complex/details.hpp:22,
                 from e:/code/boost_1_52_0/boost/math/complex/asin.hpp:9,
                 from e:/code/boost_1_52_0/boost/math/complex.hpp:10,
                 from e:/code/boost_1_52_0/boost/tr1/complex.hpp:13,
                 from e:/code/boost_1_52_0/boost/tr1/tr1/complex:28,
                 from e:/code/boost_1_52_0/boost/math/policies/error_handling.hpp:15,
                 from e:/code/boost_1_52_0/boost/math/special_functions/gamma.hpp:32,
                 from e:/code/boost_1_52_0/boost/math/special_functions/detail/bessel_jy.hpp:14,
                 from e:/code/boost_1_52_0/boost/math/special_functions/bessel.hpp:17,
                 from e:/code/boost_1_52_0/boost/math/special_functions/airy.hpp:10,
                 from e:/code/boost_1_52_0/boost/math/special_functions.hpp:15,
                 from e:/code/boost_1_52_0/boost/random/generate_canonical.hpp:22,
                 from e:/code/boost_1_52_0/boost/random.hpp:52,
                 from e:/games/rlearn/rlearn/Random.h:4,
                 from e:/games/rlearn/rlearn/Comparators.h:4,
                 from e:/games/rlearn/rlearn/function/StoredActionFunction.h:5,
                 from e:/games/rlearn/rlearn/ValueFunction.h:18,
                 from e:/games/rlearn/rlearn/Extractor.h:8,
                 from e:/games/rlearn/rlearn/DataStructures.h:7,
                 from ./rlsiva/SivaController.h:5,
                 from src/DisplayWindow.cpp:3:
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp: In function 'T boost::math::trunc(const T&, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp:24:14: error: 'raise_rounding_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp: In function 'int boost::math::itrunc(const T&, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp:47:31: error: 'raise_rounding_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp: In function 'long int boost::math::ltrunc(const T&, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp:62:32: error: 'raise_rounding_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp: In function 'boost::long_long_type boost::math::lltrunc(const T&, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/trunc.hpp:79:49: error: 'raise_rounding_error' is not a member of 'boost::math::policies'
In file included from e:/code/boost_1_52_0/boost/math/complex/asin.hpp:12:0,
                 from e:/code/boost_1_52_0/boost/math/complex.hpp:10,
                 from e:/code/boost_1_52_0/boost/tr1/complex.hpp:13,
                 from e:/code/boost_1_52_0/boost/tr1/tr1/complex:28,
                 from e:/code/boost_1_52_0/boost/math/policies/error_handling.hpp:15,
                 from e:/code/boost_1_52_0/boost/math/special_functions/gamma.hpp:32,
                 from e:/code/boost_1_52_0/boost/math/special_functions/detail/bessel_jy.hpp:14,
                 from e:/code/boost_1_52_0/boost/math/special_functions/bessel.hpp:17,
                 from e:/code/boost_1_52_0/boost/math/special_functions/airy.hpp:10,
                 from e:/code/boost_1_52_0/boost/math/special_functions.hpp:15,
                 from e:/code/boost_1_52_0/boost/random/generate_canonical.hpp:22,
                 from e:/code/boost_1_52_0/boost/random.hpp:52,
                 from e:/games/rlearn/rlearn/Random.h:4,
                 from e:/games/rlearn/rlearn/Comparators.h:4,
                 from e:/games/rlearn/rlearn/function/StoredActionFunction.h:5,
                 from e:/games/rlearn/rlearn/ValueFunction.h:18,
                 from e:/games/rlearn/rlearn/Extractor.h:8,
                 from e:/games/rlearn/rlearn/DataStructures.h:7,
                 from ./rlsiva/SivaController.h:5,
                 from src/DisplayWindow.cpp:3:
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<0>&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:82:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:82:44: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:85:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:85:47: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:103:4: error: 'check_series_iterations' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:103:39: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<53>&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:115:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:115:44: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:118:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:118:47: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<64>&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:168:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:168:44: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:171:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:171:47: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'T boost::math::detail::log1p_imp(const T&, const Policy&, const mpl_::int_<24>&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:223:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:223:44: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:226:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:226:47: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'typename boost::math::tools::promote_args<RT>::type boost::math::log1p(T, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:320:11: error: 'checked_narrowing_cast' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:320:55: error: expected primary-expression before ',' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:320:74: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'float boost::math::log1p(float, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:355:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:355:43: error: expected primary-expression before 'float'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:355:43: error: expected ';' before 'float'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:355:48: error: expected unqualified-id before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:358:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:358:46: error: expected primary-expression before 'float'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:358:46: error: expected ';' before 'float'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:358:51: error: expected unqualified-id before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'long double boost::math::log1p(long double, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:367:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:367:43: error: expected primary-expression before 'long'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:367:43: error: expected ';' before 'long'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:367:54: error: expected unqualified-id before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:370:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:370:46: error: expected primary-expression before 'long'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:370:46: error: expected ';' before 'long'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:370:57: error: expected unqualified-id before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'double boost::math::log1p(double, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:392:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:392:43: error: expected primary-expression before 'double'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:392:43: error: expected ';' before 'double'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:392:49: error: expected unqualified-id before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:395:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:395:46: error: expected primary-expression before 'double'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:395:46: error: expected ';' before 'double'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:395:52: error: expected unqualified-id before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp: In function 'typename boost::math::tools::promote_args<RT>::type boost::math::log1pmx(T, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:465:14: error: 'raise_domain_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:465:44: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:468:15: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:468:47: error: expected primary-expression before '>' token
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:487:4: error: 'check_series_iterations' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/log1p.hpp:487:39: error: expected primary-expression before '>' token
In file included from e:/code/boost_1_52_0/boost/math/complex/fabs.hpp:10:0,
                 from e:/code/boost_1_52_0/boost/math/complex.hpp:28,
                 from e:/code/boost_1_52_0/boost/tr1/complex.hpp:13,
                 from e:/code/boost_1_52_0/boost/tr1/tr1/complex:28,
                 from e:/code/boost_1_52_0/boost/math/policies/error_handling.hpp:15,
                 from e:/code/boost_1_52_0/boost/math/special_functions/gamma.hpp:32,
                 from e:/code/boost_1_52_0/boost/math/special_functions/detail/bessel_jy.hpp:14,
                 from e:/code/boost_1_52_0/boost/math/special_functions/bessel.hpp:17,
                 from e:/code/boost_1_52_0/boost/math/special_functions/airy.hpp:10,
                 from e:/code/boost_1_52_0/boost/math/special_functions.hpp:15,
                 from e:/code/boost_1_52_0/boost/random/generate_canonical.hpp:22,
                 from e:/code/boost_1_52_0/boost/random.hpp:52,
                 from e:/games/rlearn/rlearn/Random.h:4,
                 from e:/games/rlearn/rlearn/Comparators.h:4,
                 from e:/games/rlearn/rlearn/function/StoredActionFunction.h:5,
                 from e:/games/rlearn/rlearn/ValueFunction.h:18,
                 from e:/games/rlearn/rlearn/Extractor.h:8,
                 from e:/games/rlearn/rlearn/DataStructures.h:7,
                 from ./rlsiva/SivaController.h:5,
                 from src/DisplayWindow.cpp:3:
e:/code/boost_1_52_0/boost/math/special_functions/hypot.hpp: In function 'T boost::math::detail::hypot_imp(T, T, const Policy&)':
e:/code/boost_1_52_0/boost/math/special_functions/hypot.hpp:45:14: error: 'raise_overflow_error' is not a member of 'boost::math::policies'
e:/code/boost_1_52_0/boost/math/special_functions/hypot.hpp:45:46: error: expected primary-expression before '>' token
make: *** [../../objs/rlsiva/release/DisplayWindow.o] Error 1
make: Leaving directory `/e/retina/project/components/rlsiva' 
```

UPDATE2：使用 VC 的 TR1 支持，相同的代码在带有 VC10 的 Windows 上编译得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T13:42:22.617

我在我们的代码中看到了相同类型的错误消息，并且可以通过以下示例重现它们：

```
#include<boost/random.hpp>
#include<iostream>
int main(){
  boost::random::mt19937 ranGen(std::time(0));
  boost::uniform_int<> dist(1, 50);
  std::cout << dist(randGen) << std::endl;
  return 0;
} 
```

使用相同的 TR1 插入方法进行编译时：

```
g++ tst.cpp -I/path/to/boost/include/boost/tr1/tr1 -I/path/to/boost/include 
```

使用 boost 1.52.0 和 gcc 4.4.6。

在我们的例子中，`boost/random.hpp`它涵盖了我们需要的功能，但还包括最终导致这些奇怪的编译器错误的其他头文件。

我们能够通过替换来解决这个问题

```
#include<boost/random.hpp> 
```

更具体地满足我们的需求：

```
#include<boost/random/mersenne_twister.hpp>
#include<boost/random/uniform_int.hpp>
#include<ctime> 
```

从而忽略了有问题的标题。

您可以使用相同的解决方法来使用`random.hpp`和`bimap.hpp`。

# c# - 获取对象结构化差异和统计信息或如何创建差异工具的模式

> ID：13955630
> 
> 赞同：8
> 
> 时间：2012-12-19T15:27:37.703
> 
> 标签：c#, algorithm, design-patterns, data-structures, comparison

假设我有这样的结构

```
public class Form
{
    #region Public Properties

    public List<Field> Fields { get; set; }

    public string Id { get; set; }

    public string Name { get; set; }

    public string Version { get; set; }

    public int Revision { get; set; }

    #endregion
} 
```

所以`Form`类包含字段列表，假设字段本身是用这种结构表示的

```
public class Field
{
    #region Public Properties

    public string DisplayName { get; set; }

    public List<Field> Fields { get; set; }

    public string Id { get; set; }

    public FieldKind Type { get; set; }

    public FieldType FieldType { get; set; }

    #endregion
} 
```

`Field`基本上是复合结构，每个都包含`Field`子字段列表。所以结构是分层的。Field 也引用了`FieldType`该类。

```
public class FieldType
{
    #region Public Properties

    public DataType DataType { get; set; }

    public string DisplayName { get; set; }

    public string Id { get; set; }

    #endregion
} 
```

最后我们参考了`DataType`

```
public class DataType
{
    #region Public Properties

    public string BaseType { get; set; }

    public string Id { get; set; }

    public string Name { get; set; }

    public List<Restriction> Restrictions { get; set; }

    #endregion
} 
```

我想要实现的是获得这种复杂结构的差异，比方说，如果我有某种比较器，它将给我作为一个类的整个表单的结构化差异，比如说差异结果。当我说结构化差异时，我的意思是它应该是这样的。

1.  字段差异`Form`（输出`Form`在版本字段中有差异（不同颜色）
2.  集合的差异`Fields`，包括字段与已编辑字段的层次结构
3.  `FieldType`和的行为相同`DataType`
4.  检测删除和添加`Field`到`Form`（所以可能每个差异都会有一个类型）

我现在拥有的。我从通用方法开始，并尝试使用 ReflectionComparer 实现 IEqualityComparer 接口

```
public bool Equals(T x, T y)
{
    var type = typeof(T);

    if (typeof(IEquatable<T>).IsAssignableFrom(type))
    {
        return EqualityComparer<T>.Default.Equals(x, y);
    }

    var enumerableType = type.GetInterface(typeof(IEnumerable<>).FullName);

    if (enumerableType != null)
    {
        var elementType = enumerableType.GetGenericArguments()[0];
        var elementComparerType = typeof(DifferenceComparer<>).MakeGenericType(elementType);

        var elementComparer = Activator.CreateInstance(elementComparerType, new object[] { _foundDifferenceCallback, _existedDifference });

        return (bool)typeof(Enumerable).GetGenericMethod("SequenceEqual", new[] { typeof(IEnumerable<>), typeof(IEnumerable<>), typeof(IEqualityComparer<>) }).MakeGenericMethod(elementType).Invoke(null, new[] { x, y, elementComparer });
    }

    foreach (var propertyInfo in type.GetProperties())
    {
        var leftValue = propertyInfo.GetValue(x);
        var rightValue = propertyInfo.GetValue(y);

        if (leftValue != null)
        {
            var propertyComparerType = typeof(DifferenceComparer<>).MakeGenericType(propertyInfo.PropertyType);

            var propertyComparer = Activator.CreateInstance(propertyComparerType, new object[] {_foundDifferenceCallback, _existedDifference});

            if (!((bool)typeof(IEqualityComparer<>).MakeGenericType(propertyInfo.PropertyType)
                .GetMethod("Equals")
                .Invoke(propertyComparer, new object[] { leftValue, rightValue })))
            {
                // Create and publish the difference with its Type
            }
        }
        else
        {
            if (!Equals(leftValue, rightValue))
            {
                // Create and publish the difference with its Type
            }
        }
    }

    //return true if no differences are found
} 
```

和`Difference`类

```
public struct Difference
{
    public readonly string Property;

    public readonly DifferenceType Type;

    public readonly IExtractionable Expected;

    public readonly IExtractionable Actual;
} 
```

但可能这不是我想要的方式，因为我应该更精确地比较 Field，考虑到每个 Field 都有 Id，对于不同的形式也可能不同，我想更好地控制比较过程。对我来说，这听起来更像是一个差异工具。

所以我正在寻找好的模式和相当好的结构来将差异发布到客户端代码，这可以很容易地可视化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:46:27.433

鉴于您的课程已经众所周知，我将使用以下内容：

*   一个 IDiffable 接口，使一个类具有一个 DiffWith(T other) 类，返回一个差异枚举。那么在你的每个类中实现你的 DiffWith 是有意义的，考虑到它们几乎是固定的，这应该是微不足道的。

*   一个单独的 ReflectionDiff （可能是静态的）类，它将按照您的方式使用反射进行比较。这个可以使用属性来白名单/忽略任何属性/字段。这样，您可以拥有一个默认的差异引擎来快速实现差异，并准确使用您正在使用的反射代码。您可以简单地使用 diff 实现 like ：

    ```
    public override IEnumerable<Difference> DiffWith(Field other)
    {
      return ReflectionDiff.Diff(this, other);
    } 
    ```

您将获得一个包含所有脏反射代码的单个类（实际上并不需要），并且可以在每个 diffable 类中实现 DiffWith 的简单实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:38:49.587

在调查了一下并比较了不同的资源后，我实现了这样的算法。

1.  获取您的对象并构建图形（使用 .GetType().GetProperties()，将每个属性添加为根节点的子节点。节点的键将是属性名称。
2.  如果遇到任何自定义类型或 IEnumerable 的属性，请递归执行。
3.  创建图形比较器并简单比较两个图形

稍后我将发布我的代码并更新答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:18:52.543

不确定您所追求的解决方案有多*优雅，但如果您只是想要一个非常快速且编码最少的解决方案，那么也许：*

1.  序列化您的实例以与文本格式进行比较（例如使用 JSON.NET 的 JSON）
2.  将序列化对象写入文本文件
3.  启动一个 diff 工具，将 2 个文本文件作为参数传递（类似 ExamDiff 的东西很容易做到这一点）

就像我说的，这是一个快速的解决方案，但可能足以满足您的需求。否则，有可用的命令行 diff 工具将输出一个 unix 风格的 diff 文件，然后您可以为其编写自己的可视化工具。

# c# - 来自 2 级 Task.ContinueWith 的意外行为

> ID：13955631
> 
> 赞同：4
> 
> 时间：2012-12-19T15:27:40.283
> 
> 标签：c#, task-parallel-library

我有一些这样的代码：

**第一类**

```
Task<List<ConfSession>> getSessionsTask = Task.Factory.StartNew(() =>
            {
                var confSessions = 
                    TaskHelper<ConfSession>.InvokeTaskMagic(request);
                //PROBLEM - THIS CODE RACES TO THE NEXT LINE 
                //BEFORE confSessions IS POPULATED FROM THE LINE ABOVE - IE 
                //confSessions IS ALWAYS AN EMPTY LIST 
                //WHEN IT'S RETURNED
                return confSessions;
            }
        ); 
```

**Class2（任务助手）**

```
//methods
public static List<T> InvokeTaskMagic(HttpWebRequest request)
{
    var resultList = new List<T>();

    Task<WebResponse> task1 = Task<WebResponse>.Factory.FromAsync(
        (callback, o) => ((HttpWebRequest)o).BeginGetResponse(callback, o)
        , result => ((HttpWebRequest)result.AsyncState).EndGetResponse(result)
        , request);

    task1.ContinueWith((antecedent) =>
    {
        if (antecedent.IsFaulted)
        {
            return;
        }

        WebResponse webResponse;
        try
        {
            webResponse = task1.Result;
        }
        catch (AggregateException ex1)
        {
            throw ex1.InnerException;
        }

        string responseString;

        using (var response = (HttpWebResponse)webResponse)
        {
            using (Stream streamResponse = response.GetResponseStream())
            {
                StreamReader reader = new StreamReader(streamResponse);
                responseString = reader.ReadToEnd();
                reader.Close();
            }
        }

        if (responseString != null)
        {
            resultList = 
               JsonConvert.DeserializeObject<List<T>>(responseString);
        }
    });

    return resultList;
} 
```

TaskHelper 是我创建的一个类，用于标准化我在几种方法中拥有的一堆冗余任务代码。它的存在只是为了获取一个 HttpWebRequest，在 Task 中执行它，在 ContinueWith 块中获取响应，将响应解析为 a `List<T>`，然后返回`List<T>`.

我将 Class1 对 TaskHelper 的调用包装在一个任务中，因为我需要先从 InvokeTaskMagic 方法获取结果，然后再继续进入 class1（即 class1 中的下一步是使用`List<T>`. 正如代码中的注释中所说，我的问题是class1 中的 Task 每次都返回一个空列表，因为它没有等待 TaskHelper 类中 InvokeTaskMagic 方法的响应。

这是预期的吗？有没有办法让 getSessionsTask 等待返回，直到 TaskHelper.InvokeTaskMagic 返回？

更新：工作代码如下 - 感谢 Servy 的帮助。

```
public static class TaskHelper<T> where T : class
{
    //methods
    public static Task<List<T>> InvokeTaskMagic(HttpWebRequest request)
    {
        var resultList = new List<T>();

        Task<WebResponse> task1 = Task<WebResponse>.Factory.FromAsync(
            (callback, o) => ((HttpWebRequest)o).BeginGetResponse(callback, o)
            , result => ((HttpWebRequest)result.AsyncState).EndGetResponse(result)
            , request);

        return task1.ContinueWith<List<T>>((antecedent) =>
        {
            if (antecedent.IsFaulted)
            {
                return new List<T>();
            } 

            WebResponse webResponse;
            try
            {
                webResponse = task1.Result;
            }
            catch (AggregateException ex1)
            {
                throw ex1.InnerException;
            }

            string responseString;

            using (var response = (HttpWebResponse)webResponse)
            {
                using (Stream streamResponse = response.GetResponseStream())
                {
                    StreamReader reader = new StreamReader(streamResponse);
                    responseString = reader.ReadToEnd();
                    reader.Close();
                }
            }

            if (responseString != null)
            {
                return JsonConvert.DeserializeObject<List<T>>(responseString);
            }
            else
            {
                return new List<T>();
            }
        }); 
    }
} 
```

InvokeTaskMagic 方法是这样调用的：

```
var getCommentsAboutTask = Task.Factory.StartNew(() =>
            {
                var comments = TaskHelper<Comment>.InvokeTaskMagic(request);
                return comments;
            });

        getCommentsAboutTask.ContinueWith((antecedent) =>
            {
                if (antecedent.IsFaulted)
                { return; }

                var commentList = antecedent.Result.Result;
                UIThread.Invoke(() =>
                {
                    foreach (Comment c in commentList)
                    {
                        AllComments.Add(c);
                        GetCommentRelatedInfo(c);
                    }
                });
            }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T15:30:41.717

> 这是预期的吗？有没有办法让我的 class1.task1 continueblock 等待我的 class2.task2 continueblock？

当然，只需调用`ContinueWith`第二个任务的延续而不是第一个任务。

如果您需要它等到两者都完成，您可以使用`Task.Factory.ContinueWhenAll`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:31:25.947

前段时间我做了一些类似于你的代码的事情，很难让它在错误处理等方面正常工作。

首先，我创建了一个通用方法来处理具有不同返回类型的延续

```
private AsyncCallback EndAsync<T1, T2>(TaskCompletionSource<T2> tcs,
                                       Func<IAsyncResult, T1> endMethod, 
                                       Func<T1, T2> continueWith) {
    return ar => {
        T1 result1;
        try {
            result1 = endMethod(ar);
        }
        catch (Exception err) {
            tcs.SetException(err);
            return;
        }

        try {
            T2 result2 = continueWith(result1);
            tcs.SetResult(result2);
        }
        catch (Exception err) {
            tcs.SetException(err);
            return;
        }
    };
} 
```

然后我像这样创建异步任务：

```
public Task<List<T>> GetDataAsync(IProxy proxy) {
    var tcs = new TaskCompletionSource<List<T>>();
    var asyncCallback = EndAsync(tcs, 
                                 proxy.EndGetData, 
                                 result => result != null ? 
                                           ProcessResult(result) : 
                                           new List<T>());
    proxy.BeginGetData(asyncCallback);

    return tcs.Task;
} 
```

# c++ - 编写 std::vector 与普通数组的线程安全

> ID：13955634
> 
> 赞同：22
> 
> 时间：2012-12-19T15:27:57.460
> 
> 标签：c++, stl, thread-safety, openmp

我[在 Stackoverflow](https://stackoverflow.com/questions/1362110/is-the-c-stdset-thread-safe)上读到，**没有一个 STL 容器对于写入来说是线程安全的**。但这在实践中意味着什么？这是否意味着我应该将可写数据存储在普通数组中？

我预计并发调用`std::vector::push_back(element)`可能会导致数据结构不一致，因为它可能需要调整向量的大小。但是像这样的情况呢，不涉及调整大小：

1.  使用数组：

```
int data[n];
// initialize values here...

#pragma omp parallel for
for (int i = 0; i < n; ++i) {
    data[i] += func(i);
} 
```

2.  使用`std::vector`:

```
std::vector<int> data;
data.resize(n);
// initialize values here...

#pragma omp parallel for
for (int i = 0; i < n; ++i) {
    data[i] += func(i);
} 
```

第一个实现真的比第二个实现更好 a) 在线程安全方面和 b) 在性能方面？我更喜欢使用 std::vector，因为我对 C 风格的数组不太满意。

编辑：我删除了`#pragma omp atomic update`保护写入。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-19T15:33:21.617

两者同样安全。如果没有从多个线程访问元素，你就可以了。您的并行循环将只访问每个元素一次，因此只能从一个线程访问。

标准中有空间让容器的成员函数成为非线程安全的。在这种情况下，您使用`vector<int>::operator[]`，因此您需要明确保证该成员的线程安全，这似乎是合理的，因为即使在非常量向量上调用它也不会修改向量本身。所以我怀疑在这种情况下是否存在问题，但我没有寻找保证[编辑：rici 找到它]。即使它可能不安全，您也可以`int *dataptr = &data.front()`在循环之前执行然后索引关闭`dataptr`而不是`data`.

顺便说一句，这段代码*不能*保证安全`vector<bool>`，因为它是多个元素共存于一个对象中的一种特殊情况。数组是安全的`bool`，因为其中的不同元素是不同的“内存位置”（C++11 中的 1.7）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-19T15:39:24.843

对于指定数据竞争规则的 c++11，描述了容器的线程安全性。该标准的相关部分是第 23.2.2 节第 2 段：

> 尽管有（17.6.5.9），当同时修改同一序列中不同元素中包含的对象的内容时，需要实现来避免数据竞争，除了vector<bool>。
> 
> [注意：对于大小大于一的向量<int> x，x[1] = 5 和 *x.begin() = 10 可以在没有数据竞争的情况下同时执行，但是 x[0] = 5 和 * x.begin() = 10 同时执行可能会导致数据竞争。作为一般规则的一个例外，对于 vector<bool> y，y[0] = true 可能与 y[1] = true 竞争。——尾注]

除非特别允许，否则提到的 § 17.6.5.9 基本上禁止任何标准库接口的任何并发修改，因此我引用的部分确切地告诉您允许的内容（包括您的使用）。

由于 Steve Jessop 提出了这个问题，第 23.2.2 节的第 1 段明确允许同时使用`[]`顺序容器：

> 为避免数据竞争 (17.6.5.9)，实现应将以下函数视为 const：begin、end、rbegin、rend、front、back、data、find、lower_bound、upper_bound、equal_range、at 和，关联除外或无序的关联容器，operator[]。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T15:30:54.330

它的主要含义是，如果您有多个线程访问该向量，则不能依赖 C++ 来防止您通过多个并发写入来破坏数据结构。所以你需要使用某种保护。另一方面，如果您的程序不使用多个线程，而您的示例似乎没有，那么您就很好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T15:32:04.463

在这种情况下，您应该只用必要数量的值构建您的向量吗？一切都会好起来的。

```
std::vector<int> data(n, 0); 
```

`resize()`效果很好。性能将是相同的。多线程访问不会破坏向量的原因是：您的数据位于它的位置并且不会从那里移动。OMP 线程一次不会访问同一个元素。

# javascript - 在 Mobile Safari 上的 setTimeout 内设置 window.location

> ID：13955636
> 
> 赞同：1
> 
> 时间：2012-12-19T15:28:04.927
> 
> 标签：javascript, jquery, window, mobile-safari, settimeout

在 setTimeout 内，我正在设置新打开的窗口的位置。为[避免弹出](http://theandystratton.com/2012/how-to-bypass-google-chromes-javascript-popup-blocker)窗口拦截器，使用临时本地 URL 打开窗口，然后将位置更改为目标 URL。这适用于所有桌面浏览器，包括 Safari。

然而，**在 Mobile Safari 中，新窗口的位置不会更新，直到用户将焦点返回到原始窗口，**即临时页面留在原处。

这就是 JavaScript/jQuery 的相关部分的样子：

```
var self = $(this);
if (self.is("a")) {
    var clickEventHandler = function(event) {
        event.preventDefault();
        if (self.attr("target")) {
            var newWindow = window.open('loading.htm',self.attr("target"));
            var externalURL=self.attr("href");
            setTimeout( function() { newWindow.location=externalURL; }, 100 );
        }
    }
    $(this).bind("click", eventHandler);
} 
```

# android - 如何在 Eclipse 中设置默认作为 Android 项目运行

> ID：13955639
> 
> 赞同：0
> 
> 时间：2012-12-19T15:28:12.663
> 
> 标签：android, eclipse, configuration

我正在 Eclipse v4.2 (Juno) 下开发一个 Android 应用程序，我想将我的运行按钮的首选项设置为始终将我的项目作为 Android 应用程序运行。

我只是找不到配置和设置的选项！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:46:21.090

我认为你应该使用：

右键单击您的项目 → *Run application as...* → 在*Android*部分下，选择*“Browse...”*并选择您的项目。

然后应用/运行，它应该为您保存。

如果您想选择 AVM / 设备，或者 Eclipse 应该为您使用最佳设备，您也可以选择这些选项。

# mysql - Magento：在销售订单网格中的不同行上订购商品

> ID：13955641
> 
> 赞同：1
> 
> 时间：2012-12-19T15:28:19.520
> 
> 标签：mysql, magento, zend-db, magento-1.6

我正在运行 Magento Community 1.6.2

我正在尝试编辑我的销售订单网格，以便单个项目（属于多个项目订单的一部分）出现在它们自己的行上。

我添加到 Grip.php 中的 prepareCollection 函数（首先要操作这些列）如下：

```
 protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass())
        ->join(
            'sales/order_item',
            '`sales/order_item`.order_id=`main_table`.entity_id',
            array(
                'skus'  => new Zend_Db_Expr('group_concat(`sales/order_item`.sku SEPARATOR "<br>")'),
                'names' => new Zend_Db_Expr('group_concat(`sales/order_item`.name SEPARATOR "<br>")'),
                'quantities' => new Zend_Db_Expr('group_concat(`sales/order_item`.qty_ordered SEPARATOR "<br>")'),
                )
            );
            $collection->getSelect()->group('entity_id');

        $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

我使用以下内容添加了列：

```
 $this->addColumn('skus', array(
        'header'    => Mage::helper('Sales')->__('SKUs'),
       'width'     => '120px',
        'index'     => 'skus',
       'type'        => 'text',

      ));

     $this->addColumn('names', array(
       'header'    => Mage::helper('Sales')->__('Item Names'),
       'width'     => '320px',
       'index'     => 'names',
       'type'        => 'text',
    )); 

      $this->addColumn('quantities', array(
        'header'    => Mage::helper('Sales')->__('Quantities'),
        'width'     => '100px',
        'index'     => 'quantities',
        'type'        => 'text',

    )); 
```

目前，在该函数中，我只是简单地添加了一个`<br>`，以便在查看订单网格时呈现单独的线条。这不足以满足我的需求。我计划使用从该网格导出的 CSV，并且绝对必须在单独的行中包含分项订单组件。

感谢您的协助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T02:38:53.973

我修改了 sku 数组定义，而不是创建“数量”。

```
$collection = Mage::getResourceModel($this->_getCollectionClass())
    ->join(
    'sales/order_item',
    '`sales/order_item`.order_id=`main_table`.entity_id',
        array(
            'skus'  => new Zend_Db_Expr('group_concat( `sales/order_item`.sku, "(", floor(`sales/order_item`.qty_ordered), ")" SEPARATOR ", ")'),
        )); 
```

我相信您可以使用 floor( `sales/order_item`.qty_ordered) 将您的“数量”定义转换为整数。

订单网格结果中的 SKU 列类似于：MBA001(2)、MOF004(1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:59:16.513

我真的不知道是否可以在不创建法师销售订单项目网格的情况下完成您的要求。

以下是您向我询问的上一篇文章中的有效内容……也许它们会对您有所帮助：

```
$collection->getSelect()->join('catalog_product_index_eav', '`catalog_product_index_eav`.`entity_id` = `main_table`.`product_id` AND `catalog_product_index_eav`.`attribute_id` = (SELECT attribute_id FROM eav_attribute WHERE attribute_code = "brand")', array('attribute_id'));
$collection->getSelect()->join('eav_attribute_option_value', '`eav_attribute_option_value`.`option_id` = `catalog_product_index_eav`.`value`', array('brand' => 'value')); 
```

# javascript - 在 Wordpress 上安装 Farbtastic

> ID：13955642
> 
> 赞同：1
> 
> 时间：2012-12-19T15:28:21.610
> 
> 标签：javascript, wordpress, colorbox, color-picker, color-wheel

尝试在我的 Wordpress 站点中安装 Farbtastic 颜色选择器插件，但没有成功。

似乎我正在按照教程所说的那样做所有事情，但是没有出现色轮，只出现了默认值。

这是我正在使用的代码：

在 HTML 标记中包含 farbtastic.js 和 farbtastic.css：

```
<script type="text/javascript" src="farbtastic/farbtastic.js"></script>
<link rel="stylesheet" href="farbtastic/farbtastic.css" type="text/css"/> 
```

在 HTML 中添加一个占位符 div 和一个文本字段，并为每个字段指定一个 ID：

```
<form><input type="text" id="color" name="color" value="#123456" /></form>
<div id="colorpicker"></div> 
```

将其包含在您的 HTML 标记中：

```
<script type="text/javascript">
   $(document).ready(function() {
     $('#colorpicker').farbtastic('#color');
   });
</script> 
```

请帮助某人，因为我觉得某处有愚蠢的错误，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:04:11.920

我的猜测是相对路径“farbtastic/farbtastic.*”与当前页面无关。

# sql - 从具有内部联接的 SQL 表中删除

> ID：13955644
> 
> 赞同：2
> 
> 时间：2012-12-19T15:28:26.103
> 
> 标签：sql, tsql

我有以下查询。

```
SELECT T2.* FROM Schema.Table1 T1 INNER JOIN
Schema.Table2 T2 ON T1.ColumnName = T2.ColumnName
WHERE  T1.SomeOtherColumn = 123456 
```

我想从上面的查询中删除所有内容（表 2 中基于 Inner Join 和 Where 子句具有匹配输出的所有内容。我尝试了以下但不工作。

```
DELETE Schema.T2.* FROM Schema.Table2 T2 INNER JOIN 
Schema.Table1 T1 ON T1.ColumnName = T2.ColumnName 
WHERE T1.SomeOtherColumn = 123456 
```

请帮忙！

编辑：

感谢你们。TIL FROM 可以在不使用子查询格式的情况下使用两次。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T15:30:37.050

```
DELETE  FROM T2
FROM    Schema.Table2 T2 
JOIN    Schema.Table1 T1 
ON      T1.ColumnName = T2.ColumnName 
WHERE   T1.SomeOtherColumn = 123456 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:35:13.567

您还可以修改查询以从带有子查询的单个表中进行选择，例如

```
DELETE 
FROM Table2
WHERE Table2.ColumnName = (SELECT Table1.ColumnName 
                           FROM Table1
                           WHERE Table1.SomeOtherColumn = 123456) 
```

（请注意，这仅在子查询返回单个值时才有效，否则将引发错误）

# java - Android DialogFragment 自动调整大小

> ID：13955645
> 
> 赞同：4
> 
> 时间：2012-12-19T15:28:26.087
> 
> 标签：java, android, android-ui, android-dialogfragment

我的问题类似于[Android 中的 Full Screen DialogFragment](https://stackoverflow.com/questions/7189948/full-screen-dialogfragment-in-android)，但这个问题并不能完全解决我的问题。

我有一个`DialogFragment`我想为其设置最大尺寸的东西，如果 DialogFragment 超出了显示的边界，它会自动缩小尺寸。这似乎应该融入操作系统，但我能够提出的唯一解决方案是轮询显示尺寸并在尺寸超出显示范围时手动调整大小。

在`DialogFragment`'s中`onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)`：

```
 // Display the first screen
    m_rootView = inflater.inflate(R.layout.fragment_popup, container, false);

    // Readjust the size of the dialog fragment if it is too large for the display
    Globals.AdjustSizeOfDialogFragment(getActivity(), container); 
```

调整代码大小`Globals.java`：

```
// Adjusts the size of a dialog fragment's popup view to ensure that it fits within the display of the current device
public static void AdjustSizeOfDialogFragment(final Activity parentActivity, final View popupRoot)
{
    // If all of our function parameters are valid
    if ((parentActivity != null) && (popupRoot != null))
    {
        // If the dialog's root view has already rendered (has defined layout parameters)
        if (popupRoot.getLayoutParams() != null)
        {
            // Resize the dialog now
            ResizeDialogFragment(parentActivity, popupRoot);
        }
        // Else the view has not finished rendering yet
        else
        {
            // Assign a listener to notify us when it has finished rendering
            popupRoot.addOnLayoutChangeListener(new OnLayoutChangeListener()
            {
                public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom)
                {
                    // Remove the layout listener
                    v.removeOnLayoutChangeListener(this);

                    // Now we can render the dialog
                    ResizeDialogFragment(parentActivity, popupRoot);
                }
            });
        }
    }
}

// Does the actual logic/math behind the AdjustSizeOfDialogFragment function
private static void ResizeDialogFragment(Activity parentActivity, View popupRoot)
{
    // Retrieves information about the display of the current device
    DisplayMetrics              deviceDisplayMetrics    = new DisplayMetrics();
    // Layout parameters that need to be applied to the popup's root view
    LinearLayout.LayoutParams   llParams                = null;
    FrameLayout.LayoutParams    flParams                = null;

    // If all of our function parameters are valid
    if ((parentActivity != null) && (popupRoot != null) && (popupRoot.getLayoutParams() != null))
    {
        // Retrieve the layout parameters from the popup's root view and also get information on the current device's display
        if (popupRoot.getLayoutParams() instanceof LinearLayout.LayoutParams)
        {
            llParams = (LinearLayout.LayoutParams) popupRoot.getLayoutParams();
        }
        else if (popupRoot.getLayoutParams() instanceof FrameLayout.LayoutParams)
        {
            flParams = (FrameLayout.LayoutParams) popupRoot.getLayoutParams();
        }
        parentActivity.getWindowManager().getDefaultDisplay().getMetrics(deviceDisplayMetrics);

        // If either the height or width of the popup view is greater then the height or width
        // of the current display, clip them to approximately 90% of the display's width/height.
        if (llParams != null)
        {
            if (llParams.width > deviceDisplayMetrics.widthPixels)
            {
                llParams.width = (int) (deviceDisplayMetrics.widthPixels * 0.9);
            }
            if (llParams.height > deviceDisplayMetrics.heightPixels)
            {
                llParams.height = (int) (deviceDisplayMetrics.heightPixels * 0.9);
            }
        }
        else if (flParams != null)
        {
            if (flParams.width > deviceDisplayMetrics.widthPixels)
            {
                flParams.width = (int) (deviceDisplayMetrics.widthPixels * 0.9);
            }
            if (flParams.height > deviceDisplayMetrics.heightPixels)
            {
                flParams.height = (int) (deviceDisplayMetrics.heightPixels * 0.9);
            }
        }
    }
} 
```

问题是：真正的 Android 方法是什么？这是我唯一的选择吗？这似乎应该内置在操作系统中，但我问过的人都找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:22:13.813

也许你有这个问题，因为窗口正在调整显示你的 DialogFragment，所以如果在显示的活动中设置属性`windowSoftInputMode`，可以解决你的问题。`adjustNothing``AndroidManifest.xml`

```
<activity
    ...
    android:windowSoftInputMode="adjustNothing">
... 
```

仅供参考：[https ://developer.android.com/training/keyboard-input/visibility.html#ShowOnStart](https://developer.android.com/training/keyboard-input/visibility.html#ShowOnStart)

# javascript - 通过 JavaScript 提交数据的最简单方法是什么？

> ID：13955646
> 
> 赞同：1
> 
> 时间：2012-12-19T15:28:27.313
> 
> 标签：javascript

我有一个托管在域 X 上的 JS 脚本，但嵌入在域 Y 上。我想将一些数据发送回域 X 上的页面（可能通过 POST）。

我尝试寻找解决方案，但我发现的大多数信息都涉及使用 jQuery。是否可以通过纯 JavaScript 做到这一点？我应该担心跨站点脚本问题吗？

基本上，我试图拥有类似于谷歌分析的东西（一个小部件将数据发送回家）。我可以处理数据，但我的 JavaScript 经验非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:44:38.347

提交数据的最简单方法是使用`form`. 你可以创建一个表单，设置`action`，`method`属性，添加`input`数据，设置它的值，然后做`form.submit()`。为了不将用户重定向到您的站点，您还应该`target`使用隐藏 iframe 的名称填充属性。在这种情况下，表格将被提交“in it”。页面不会重新加载，但您的页面将被加载到 iframe（隐藏）中。此方法允许您执行 POST 请求。

如果你只需要 GET 请求，事情就更简单了：`Image`在 JS 中创建一个对象并`src`使用请求的 url 设置字段。我不知道这个解决方案的跨浏览器和稳定性如何，但据我记得，它是有效的。事实上，您可以创建任何其他加载其内容的元素（样式、脚本（并放置一些代码以响应评估））并将其添加到页面。

关于跨域的东西：

*   如果是 GET 请求，您可以发送和接收信息。
*   在 POST 请求的情况下，没有（就我而言）获得响应的方法。

我建议您阅读一些有关 JavaScript 和 HTML 表单中的 DOM 操作的内容，以了解它的机制以及在 JS 中模拟表单提交的方法（基本上我在前两段中描述了它）。

# php - 如何根据 .htaccess 中的文件类型限制文件上传大小限制

> ID：13955649
> 
> 赞同：13
> 
> 时间：2012-12-19T15:28:30.613
> 
> 标签：php, apache, .htaccess

使用 .htaccess，是否可以根据文件类型限制 php 文件上传大小限制？

例如，图片的最大上传限制为 2 MB，PDF 和 DOC 的最大上传限制为 10 MB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:12:52.970

我会为此使用[LimitRequestBody](http://httpd.apache.org/docs/2.2/mod/core.html#limitrequestbody)指令。但是，引用：

> 该`PUT`方法的实现将需要一个至少与服务器希望为该资源接受的任何表示一样大的值。

您可以将其设置为 10Mb 以让 Apache 切断任何肯定太大的请求，然后在您的脚本中进一步测试和过滤。该指令主要用于防止拒绝服务攻击。如果没有这个指令，Apache 会很乐意在整个文件到达您的脚本之前接受它，因此用户可能会在被告知文件太长之前上传 100Gb 文件。

但是，该指令不会窥探请求的主体，因此您无法使用它过滤文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:19:53.190

您可以更改大小限制并设置允许的类型，但我不相信您可以加入两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-05T14:19:02.747

> 是的，您可以使用以下方法在**.htaccess**中定义和限制文件大小：

```
php_value post_max_size 1000M
php_value upload_max_filesize 1000M 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-20T07:50:12.017

One method to help protect your server against DOS attacks involves limiting the maximum allowable size for file uploads. Here, we are limiting file upload size to 10240000 bytes, which is equivalent to around 10 megabytes. For this rule, file sizes are expressed in bytes. Note: this code is only useful if you actually allow users to upload files to your site.

LimitRequestBody 10240000

# google-app-engine - 禁用查询日志记录 - Google Appengine SDK Python

> ID：13955651
> 
> 赞同：5
> 
> 时间：2012-12-19T15:28:39.707
> 
> 标签：google-app-engine, python-2.7

我的情况是，我有一个调用 logging.debug(xxx) 的包。我想禁用这个包的所有日志记录语句。有没有办法通过配置做到这一点？

例如，我运行的每个查询都在开发服务器的控制台中打印出来：

> 调试：根：选择实体。**路径**，Entities.entity FROM "dev~xxxx!!Entities" AS Entities INNER JOIN "dev~xxxx!!EntitiesByProperty" AS ebp_0 ON Entities。**路径**= ebp_0。**路径**INNER JOIN "dev~xxxx!!EntitiesByProperty" AS ebp_1 ON Entities。**路径**= ebp_1。**路径**INNER JOIN "dev~xxxx!!EntitiesByProperty" AS ebp_2 ON Entities。**路径**= ebp_2。**路径**在哪里 ebp_0.kind = :1 AND ebp_0.name = :2 AND ebp_0.value = :3 AND ebp_1.kind = :4 AND ebp_1.name = :5 AND ebp_1.value = :6 AND ebp_2.kind = :7 AND ebp_2.name = :8 AND ebp_2.value = :9 按实体排序。**路径**ASC

所以我知道如何通过修改sdk源来禁用它，基本上注释掉里面的日志语句`__StarSchemaQueryPlan`

```
logging.debug(query) 
```

有没有办法在不接触 SDK 代码的情况下禁用日志记录？我们目前没有定义任何 loggingConfigurations，而是使用 basicConfiguror。

* * *

最终解决方案谢谢@lucemia：

```
class Filter(object):
    def filter(self, record):
        if record.funcName=='__StarSchemaQueryPlan' and record.module=='datastore_sqlite_stub':
            return 0
        else:
            return 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T17:51:21.517

您可以尝试修改日志级别。

由于该模块使用默认记录器。以下代码将禁用所有级别小于关键的日志。

```
import logging
logger = logging.getLogger() # get the default logger
logger.setLevel(50) # set the skip all log which is smaller than critical (50) 
```

## 测试用例

### a_lib.py

```
import logging

def main():
    logging.error("test")
    logging.critical('c') 
```

### a_test_case.py

```
import a_lib
import logging

logger = logging.getLogger()
logger.setLevel(50)
a_lib.main() 
```

### 结果

```
> python a_test.py
CRITICAL:root:c 
```

# 编辑 1

另一种方法是使用过滤器

```
import logging

# define a new filter
class Filter():
    def filter(self, record):
        # extract property of record such as record.funcName, record.module
        # http://docs.python.org/2/library/logging.html#logrecord-attributes

        if record.module == "a_lib":
            # if the record is from a module you don't want to log
            return 0
        else:
           # for record you want to log
            return 1

 # apply this filter

 filter = Filter()
 logger= logging.getLogger()
 logger.addFilter(filter) 
```

# javascript - 如果 margin-left = -3200 则禁用按钮

> ID：13955652
> 
> 赞同：1
> 
> 时间：2012-12-19T15:28:45.613
> 
> 标签：javascript, jquery, html

我试图弄清楚如果`margin-left`元素上的按钮等于`-3200`像素，如何禁用按钮。我有以下似乎在页面加载时运行我的功能，有人能看到我哪里出错了吗？

```
if ($('.hero-carousel')offset().left = -3200) {
    alert('test');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:29:30.547

您在 offset() 之前错过了`dot`，需要使用 =`=`而不是`=`进行`equality`比较。

```
if($('.hero-carousel').offset().left == -3200) {
    alert('test');    
} 
```

编辑

要获得剩余边距，您需要使用 css 函数而不是 offset()

```
if($(".hero-carousel").css("margin-left") == -3200 + "px") {
    alert('test');    
} 
```

# css - 右侧的菜单项（左边距问题）

> ID：13955655
> 
> 赞同：0
> 
> 时间：2012-12-19T15:28:52.077
> 
> 标签：css, menu, alignment

我正在构建[这个站点](http://ffio.it/bozzasettembrini/)，如您所见，我将导航菜单移到了左侧。如果您将鼠标悬停在任何项目“Home”/“L'istituto”/“Infanzia/Primaria”（等）上，子项目将显示在右侧。一切都很好，除了`position:relative;` `left:130px`on `.main-navigation li ul li`a 使下面的项目不可点击（因为那里有块，由于 . 移动到右侧`left:130px`。我怎样才能让下面的项目仍然可点击？提前谢谢。

PS：如果我尝试使用`z-index: 999999`on `.main-navigation li a`，`.main-navigation li`我将无法再访问子项目（第一个除外）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:54:56.300

我设置了这个并工作了:)

```
.main-navigation li ul {
margin: 0 0 0 200px;
position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:42:21.070

尝试优化垂直导航栏的宽度。

# mysql - AND OR 导致出现的结果多于应有的结果

> ID：13955659
> 
> 赞同：0
> 
> 时间：2012-12-19T15:29:00.977
> 
> 标签：mysql

我正在尝试显示与特定时间范围匹配的结果-效果很好。但是，我想添加一个子句，说明显示的结果必须是 party_type`1`或`2`.

所以我做了这个

```
WHERE start_datetime >= '$DATE_START_SELECTED'
AND end_datetime < '$DATE_END_SELECTED' 
AND PARTY_TYPE='1'
OR PARTY_TYPE='2'
GROUP BY events.ENTRANCE_PRICE 
```

但现在它显示了昨天的一些额外事件……但有趣的是，它没有显示任何更早的事件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T15:30:58.207

这应该可以解决问题

```
WHERE start_datetime >= '$DATE_START_SELECTED'
AND end_datetime < '$DATE_END_SELECTED' 
AND (PARTY_TYPE='1'
OR PARTY_TYPE='2')
GROUP BY events.ENTRANCE_PRICE 
```

整个事情的稍微干净的版本将是

```
WHERE start_datetime >= '$DATE_START_SELECTED'
AND end_datetime < '$DATE_END_SELECTED' 
AND (PARTY_TYPE IN (1,2))
GROUP BY events.ENTRANCE_PRICE 
```

您可能还想查看[此处](http://www.tuxradar.com/practicalphp/9/3/13)以了解有关使用多个 WHERE 条件的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:32:42.160

如[运算符优先级](http://dev.mysql.com/doc/en/operator-precedence.html)中所述，`AND`优先级高于`OR`. 因此，您当前的过滤器被评估为：

```
WHERE (      start_datetime >= '$DATE_START_SELECTED'
         AND   end_datetime <  '$DATE_END_SELECTED' 
         AND PARTY_TYPE='1'
      )   OR PARTY_TYPE='2' 
```

您应该添加括号以强制满足您的要求的优先级：

```
WHERE       start_datetime >= '$DATE_START_SELECTED'
        AND   end_datetime <  '$DATE_END_SELECTED' 
        AND  (PARTY_TYPE='1' OR PARTY_TYPE='2') 
```

或者，或者，使用 MySQL 的[`IN()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_in)运算符：

```
WHERE       start_datetime >= '$DATE_START_SELECTED'
        AND   end_datetime <  '$DATE_END_SELECTED' 
        AND  PARTY_TYPE IN ('1','2') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T15:32:40.130

您需要使用方括号来确保根据需要对布尔值进行评估。尤其是聚在一起

```
(PARTY_TYPE='1' OR PARTY_TYPE='2') 
```

为你带来

```
WHERE start_datetime >= '$DATE_START_SELECTED'
AND end_datetime < '$DATE_END_SELECTED' 
AND (PARTY_TYPE='1' OR PARTY_TYPE='2')
GROUP BY events.ENTRANCE_PRICE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T16:47:06.777

在您的查询中，AND 和 OR 的作用级别存在歧义。您想设置相同的两个条件：关于日期开始、日期结束（这些都可以）和party_type（1 或 0）。相反，在您的查询中，您将它们视为四个独立的。设置如下：

```
 start_datetime >= '$DATE_START_SELECTED'
    end_datetime < '$DATE_END_SELECTED' 
    AND (PARTY_TYPE='1' OR PARTY_TYPE='2') 
```

我希望它有所帮助。

# git - Git：我看不到最后一次提交

> ID：13955663
> 
> 赞同：2
> 
> 时间：2012-12-19T15:29:11.283
> 
> 标签：git

我正在`git log --all`显示所有提交，但最后没有显示......

甚至，当我推送它时`Everything up-to-date`，我希望能够推送最后一个 commitS。

我做了 git show-branch ，它说：

```
[master] Merge branch 'master' of bitbucket.org:jargd/contract 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:29:42.873

```
* (no branch) 
```

意思是“[分离的头](https://stackoverflow.com/a/3965714/6309)”

您可以在该提交处创建一个分支：

```
git checkout -b newBranch 
```

并推动那个分支。

# oracle - EF 无法识别 Oracle 中的视图 PK

> ID：13955666
> 
> 赞同：1
> 
> 时间：2012-12-19T15:29:13.423
> 
> 标签：oracle, entity-framework, view, primary-key

我使用 Oracle 作为 DB、VS2012 和 EF 5.0。

我知道该表有一个 PK（复合键），我创建了一个视图

```
create view v_table_name as select * from table_name 
```

当我尝试将视图添加到 EF 时，它说没有 PK 并使对象只读。我试图在视图中添加一个 PK，但它告诉我`table can have only on primary key`.

我使用了以下

```
ALTER VIEW V_TABLE_NAME 
ADD CONSTRAINT V_V_TABLE_NAME_PK PRIMARY KEY (DRSY, DRRT, DRKY) DISABLE NOVALIDATE; 
```

知道为什么 EF 不识别 PK 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:33:26.763

因为据我所知，EF 不会为视图推断 PK。

如果 PK 上有 PK，您实际上不必将 PK 添加到视图中`table_name`。

您只需要[告诉 EF 关键列是什么。](http://blogs.msdn.com/b/alexj/archive/2009/09/01/tip-34-how-to-work-with-updatable-views.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:37:05.763

**在没有 NOVALIDATE 的情况下**尝试以下

 **```
ALTER VIEW V_TABLE_NAME 
ADD CONSTRAINT V_V_TABLE_NAME_PK PRIMARY KEY (DRSY, DRRT, DRKY) DISABLE ; 
```

[**NOVALIDATE 问题**](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:8806498660292)

您可以按照下面提到的链接进行操作。

[**将主键添加到 Oracle 视图**](https://stackoverflow.com/questions/2041308/adding-primary-key-to-sql-view?rq=1)

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T13:27:50.143

确保在视图中查询的基础表具有 PK 或至少一个您可以在视图中指定的不可为空的列。如果您使用 [sampath] 提供的解决方案：[https](https://stackoverflow.com/users/1077309/sampath) ://stackoverflow.com/users/1077309/sampath但列可以为空 EF 不会基于视图创建对象。

在这种情况下可以在 DbContext 中指定键。

```
modelBuilder.Entity<EntityName>().HasKey(e => new {e.KeyCol1, e.KeyCol2,     e.KeyCol3}); 
```**

# javascript - 禁用href标签

> ID：13955667
> 
> 赞同：353
> 
> 时间：2012-12-19T15:29:13.030
> 
> 标签：javascript, html

尽管该链接已禁用，但仍可单击。

```
<a href="/" disabled="disabled">123n</a> 
```

如果它被禁用，我可以让它不可点击吗？我应该使用 JavaScript 吗？

* * *

## 回答 #1

> 赞同：459
> 
> 时间：2014-11-21T09:07:09.680

在 css 的帮助下，您将禁用超链接。试试下面

```
a.disabled {
  pointer-events: none;
  cursor: default;
}
```

```
<a href="link.html" class="disabled">Link</a>
```

* * *

## 回答 #2

> 赞同：288
> 
> 时间：2012-12-19T15:30:30.507

超链接没有禁用属性。如果您不希望链接某些内容，则需要`<a>`完全删除该标签。

或者，您可以删除其`href`属性 - 尽管这有其他 UX 和可访问性问题，如下面的评论中所述，因此不推荐。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2012-12-19T15:31:10.920

您可以使用：

```
<a href="/" onclick="return false;">123n</a> 
```

* * *

## 回答 #4

> 赞同：80
> 
> 时间：2014-10-08T15:05:02.877

您可以使用以下解决方案之一：

## HTML

```
<a>link</a> 
```

## JavaScript

```
<a href="javascript:function() { return false; }">link</a>
<a href="/" onclick="return false;">link</a> 
```

## CSS

```
<a href="www.page.com" disabled="disabled">link</a>

<style type="text/css">
    a[disabled="disabled"] {
        pointer-events: none;
    }
</style> 
```

* * *

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2012-12-19T15:32:37.993

尝试这个：

```
<a href="javascript:void(0)" style="cursor: default;">123n</a> 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2012-12-19T15:31:30.033

该[`<a>`标签](http://www.w3.org/TR/html401/struct/links.html#h-12.2)没有`disabled`属性，仅用于`<input>`s （和`<select>`s 和`<textarea>`s）。

要“禁用”链接，您可以删除其`href`属性，或添加返回 false 的单击处理程序。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2016-01-26T10:32:24.057

HTML：

```
<a href="/" class="btn-disabled" disabled="disabled">123n</a> 
```

CSS：

```
.btn-disabled,
.btn-disabled[disabled] {
  opacity: .4;
  cursor: default !important;
  pointer-events: none;
} 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2019-03-08T09:15:56.633

**提示 1：使用 CSS** `pointer-events: none;`

**提示 2：使用 JavaScript** `javascript:void(0)` （这是最佳实践）

```
<a href="javascript:void(0)"></a> 
```

**技巧一：使用 Jquery** `$('selector').attr("disabled","disabled");`

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2012-12-19T15:31:13.050

您需要删除`<a>`标签才能摆脱它。

或尝试使用：-

```
 <a href="/" onclick="return false;">123n</a> 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2019-12-12T17:42:05.527

仅限 CSS：这会从`href`.

```
.disable { 
    pointer-events: none; 
    cursor: default; 
} 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-06-14T18:46:00.863

让父母拥有`pointer-events: none`会像这样禁用孩子`a-tag`（要求 div 覆盖 a 并且没有 0 宽度/高度）：

```
<div class="disabled">
   <a href="/"></a>
</div> 
```

在哪里：

```
.disabled {
    pointer-events: none;
} 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2012-12-19T15:32:32.880

```
$(document).ready(function() {
   $('a').click(function(e) {
     e.preventDefault();
  });
}); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2017-08-15T09:20:43.750

您可以模拟`<a>`标签上的 disabled 属性。

`<a href="link.html" disabled="">Link</a>`

```
a[disabled] {
   pointer-events: none;
   cursor: default;
} 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-05-22T13:29:33.733

您可以使用此代码在运行时使用 javascript 禁用链接

> $('.page-link').css("pointer-events", "none");

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2020-01-24T20:32:53.343

我有一个：

```
<a href="#">This is a disabled tag.</a> 
```

希望它会帮助你;）

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2012-12-19T15:33:38.900

如果你想摆脱指针，你可以使用 css 来做到这一点[cursor](http://www.w3schools.com/cssref/pr_class_cursor.asp)。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-04-08T16:45:27.190

我们不能直接禁用它，但我们可以执行以下操作：

1.  添加`type="button"`.
2.  删除`href=""`属性。
3.  添加`disabled`属性，以便通过更改光标显示它已被禁用，并且它变暗。

PHP 中的示例：

```
<?php
if($status=="Approved"){ 
?>
  <a type="button" class="btn btn-primary btn-xs" disabled> EDIT
     </a>
  <?php    
}else{
?>
  <a href="index.php" class="btn btn-primary btn-xs"> EDIT
    </a>
  <?php    
}
?> 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2020-09-09T12:12:51.730

试试这个

```
 <a href="javascript:void(0)">Click Hare</a> 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2017-09-11T08:34:51.147

就我而言，我使用

```
<a href="/" onClick={e => e.preventDefault()}> 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2021-08-04T10:50:53.780

您可以使用 CSS 禁用链接

```
pointer-events: none 
```

[参考：使用 hugo 编写代码](https://codewithhugo.com/disable-html-anchor/)

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2020-05-24T00:56:57.633

最好的答案总是最简单的。无需任何编码。

如果 (a) 锚标记没有 href 属性，则它只是超链接的占位符。所有浏览器都支持！

```
<a href="/">free web counters</a><br  />
<a "/">free web counters</a>
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2019-09-20T12:46:09.533

我能够使用 ng-href 三元运算来达到预期的结果

```
<a ng-href="{{[condition] ? '' : '/'}}" ng-class="{'is-disabled':[condition]}">123n</a> 
```

在哪里

```
a.is-disabled{
   color: grey;
   cursor: default;

   &:hover {
      text-decoration: none;
   }
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-05-10T19:59:13.097

我看到这里已经发布了大量答案，但我认为还没有任何明确的答案可以将已经提到的方法结合到我发现可行的方法中。这是为了使链接既显示为禁用，又不将用户重定向到另一个页面。

此答案假定您正在使用**jquery**和**bootstrap**`href` ，并在禁用时使用另一个属性临时存储该属性。

```
//situation where link enable/disable should be toggled
function toggle_links(enable) {
    if (enable) {
        $('.toggle-link')
        .removeClass('disabled')
        .prop('href', $(this).attr('data-href'))
    }
    else {
        $('.toggle-link')
        .addClass('disabled')
        .prop('data-href', $(this).prop('href'))
        .prop('href','#')
    } 
```

```
a.disabled {
  cursor: default;
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-11-20T10:40:16.637

以下是禁用 a 标签的各种方法：

> ```
> <a >Link Text</a> remove the href from your anchor tag
> <a href=”javascript:void(0)”/>Link text</a> put javascript:void(0) in href
> <a href="/" onclick="return false;">Link text</a> using return false 
> ```
> 
> 因为锚标签没有禁用属性。如果您想停止 jQuery 函数内的锚标记行为，则可以在函数开头使用以下行：

```
$( "a" ).click(function( e ) {
e.preventDefault();
$( "<div>" )
.append( "default " + e.type + " prevented" )
.appendTo( "#log" );
}); 
```

[event.preventDefault()](https://api.jquery.com/event.preventdefault/)

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-02-07T06:00:11.193

正确使用按钮和链接。

• 按钮激活网页上的**脚本功能（对话框、展开/折叠区域）。**

• 链接将您带到另一个位置，可以是不同的页面，也可以是同一页面上的不同位置。

如果您遵循这些规则，则不会出现任何需要禁用链接的情况。即使您使链接看起来在视觉上被禁用并且单击时为空白

`<a href="" ng-click="Ctrl._isLinkActive && $ctrl.gotoMyAwesomePage()"`

您不会考虑可访问性，屏幕阅读器会将其作为链接阅读，视障人士会一直想知道为什么链接不起作用。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-05-24T17:04:16.017

如果您使用的是 WordPress，我创建了一个插件，可以做到这一点以及更多，而无需知道如何编写任何代码。您需要做的就是添加要禁用的链接的选择器，然后选择“在新选项卡中使用此选择器禁用所有链接”。从出现的下拉菜单中单击更新。

[单击此处查看演示此操作的 gif](http://wpdevpowers.com/wp-content/uploads/2019/04/2.-Disable-all-links-with-this-selector.gif)

您可以[从 WordPress.org 插件存储库获取免费版本](https://wordpress.org/plugins/wp-dev-powers-element-selector-jquery-powers/)以进行试用。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2022-01-10T17:39:48.237

**如果您需要使用 Javascript 禁用 laravel 上的链接，这是我的解决方案：**

链接（刀片.php）：

```
<a href='/link/to/path' class='btn btn-primary mt-3' onclick='disableLink(this)'>Confirmar</a> 
```

.css 文件

```
.isDisabled {
    cursor: not-allowed;
    opacity: 0.5;
}

a[aria-disabled="true"] {
    color: currentColor;
    display: inline-block; /* For IE11/ MS Edge bug */
    pointer-events: none;
    text-decoration: none;
} 
```

.js 文件

```
function disableLink(link) {
    // 1\. Add isDisabled class to parent element
    link.parentElement.classList.add('isDisabled');
    // 2\. Store href so we can add it later
    link.setAttribute('data-href', link.href);
    // 3\. Set aria-disabled to 'true'
    link.setAttribute('aria-disabled', 'true');
}

function enableLink(link) {
    // 1\. Remove 'isDisabled' class from parent span
    link.parentElement.classList.remove('isDisabled');
    // 2\. Set href
    link.href = link.getAttribute('data-href');
    // 3\. Remove 'aria-disabled', better than setting to false
    link.removeAttribute('aria-disabled');
} 
```

参考：[https ://css-tricks.com/how-to-disable-links/](https://css-tricks.com/how-to-disable-links/)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-03-12T09:46:12.010

当您将鼠标悬停在**href**标记上时，它会显示在浏览器窗口的左下角。

我个人认为向用户显示类似**javascript:void(0)**的东西是可怕的。

取而代之的是，关闭**href**，使用 jQuery/其他任何东西做你的魔法并添加一个样式规则（如果你仍然需要它看起来像一个链接）：

```
a {
    cursor:pointer;
} 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2014-03-16T14:13:39.157

**适合我的变体：**

```
<script>
  function locker(){
    if ($("a").hasClass("locked")) {
         $("a").removeClass('locked').addClass('unlocked');
         $("a").attr("onClick","return false");
    } else {
         $("a").css("onclick","true");
         $("a").removeClass('unlocked').addClass('locked');
         $("a").attr("onClick","");
    }
  }
</script>

<button onclick="locker()">unlock</button>

<a href="http://some.site.com" class="locked">
  <div> 
      .... 
  <div>
</a> 
```

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2017-11-25T00:15:37.557

如果您只是想暂时禁用链接但将 href 留在那里以便以后启用（这是我想要做的），我发现所有浏览器都使用第一个 href。因此我能够做到：

```
<a class="ea-link" href="javascript:void(0)" href="/export/">Export</a> 
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2018-03-31T15:31:43.247

```
<a href="/" disabled="true" onclick="return false">123</a>
```

只需添加：这通常有效，但是如果用户在浏览器中禁用了 javascript，它将无法正常工作。

1) 在集成 bootstrap 3 插件后，您可以选择在锚标签上使用 Bootstrap 3 类来禁用 href 标签

```
<a href="/" class="btn btn-primary disabled">123n</a>
```

或者

2) 了解如何在浏览器中使用 html 或 js 启用 javascript。或创建一个弹出窗口，告诉用户在使用网站之前启用 javascript 使用

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2016-11-01T15:46:09.573

您可以通过返回 false 来禁用锚标记。在我的情况下，我对 Jquery 手风琴使用 angular 和 ng-disabled，我需要禁用这些部分。

所以我创建了一个小 js 片段来解决这个问题。

```
 <a class="opener" data-toggle="collapse"
                   data-parent="#shipping-detail"
                   id="shipping-detail-section"
                   href="#shipping-address"
                   aria-expanded="true"
                   ng-disabled="checkoutState.addressSec">
                   Shipping Address</a>
     <script>
          $("a.opener").on("click", function () {
           var disabled = $(this).attr("disabled");
           if (disabled === 'disabled') {
            return false;
           }
           });
     </script> 
```

* * *

## 回答 #33

> 赞同：-3
> 
> 时间：2020-08-10T08:56:56.443

## 有一种**简单而干净**的方法，如下所示：

```
<a href="/shopcart/">

  <button class="btn" disabled> Make an Order </button>

</a> 
```

在默认情况下**禁用**属性`<button>`不会让点击通过`<button>`元素直到`<a>`元素。所以`<a>`元素甚至不知道发生了一些点击。通过**在**`<button>`. _

# c++ - is_assignable<> 的结果不一致

> ID：13955677
> 
> 赞同：7
> 
> 时间：2012-12-19T15:29:33.037
> 
> 标签：c++

> **可能重复：**
> [is_convertible is_assignable 有什么区别](https://stackoverflow.com/questions/13952404/what-is-the-difference-between-is-convertible-is-assignable)

我使用这个测试代码：

```
cout<<std::is_assignable<int, int>::value<<endl;
cout<<std::is_assignable<int, char>::value<<endl;
cout<<std::is_assignable<int&, int>::value<<endl;
cout<<std::is_assignable<int&, char>::value<<endl;
cout<<std::is_assignable<int, int&>::value<<endl;
cout<<std::is_assignable<int, char&>::value<<endl; 
```

vs2012中的结果是：

```
true
true
true
true
true
true 
```

在 gcc4.7.2 我得到：

```
false
false
true
true
false
false 
```

根据标准，哪个结果是正确的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:39:31.207

`is_assignable<T,U>`为真，如果：

> 表达式`declval<T>() = declval<U>()`格式正确

`declval<T>`被声明为返回对 的引用的函数`T`：

```
template <class T>
  typename add_rvalue_reference<T>::type declval() noexcept; 
```

where`add_rvalue_reference<T>::type`是*右值*引用类型 ( `T&&`) 如果`T`是对象或函数类型，或者`T`本身是引用类型。

这意味着只有当它是非常量*左值*引用类型`is_assignable<T,U>`时才为真。如果是对象类型，则为*右值*引用类型；所以表达式是一个*xvalue*，不能分配给它。`T`*`add_rvalue_reference<T>::type`*`declval<T>()`**

 ***所以，除非我误读了标准，否则 GCC 是正确的，而 VS2012 是错误的。即使它看起来更有意义`is_assignable<int,int>`，但事实并非如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:40:10.503

`is_assignable<T,U>::value`当 是 格式正确时被定义为 true`declval<T>() = declval<U>()`并且`declval<T>`被定义为返回的函数`add_rvalue_reference<T>::type`。

我们必须记住，赋值仅对作为左操作数的可修改左值有效。还要记住引用折叠的规则（尤其是最后两个）：

```
T&  &  -> T&
T&& &  -> T&
T&  && -> T&
T&& && -> T&& 
```

所以每种情况：

1.  `is_assignable<int, int>`和`is_assignable<int, char>`

    我们能否将返回右值引用（一个 xvalue）的函数的结果分配给另一个返回右值引用（另一个 xvalue）的函数的结果。不，我们不能。这应该是`false`。

2.  `std::is_assignable<int&, int>`和`std::is_assignable<int&, char>`

    我们能否将返回右值引用（xvalue）的函数的结果分配给返回左值引用（左值）的函数的结果。我们当然可以。这应该是`true`。

3.  `std::is_assignable<int, int&>`和`std::is_assignable<int, char&>`

    我们能否将返回左值引用（左值）的函数的结果分配给返回右值引用（xvalue）的函数的结果。不，我们不能。这应该是`false`。

所以我说 GCC 就在这里。***

# mongodb - MongoDB equal to

> ID：13955679
> 
> 赞同：2
> 
> 时间：2012-12-19T15:29:34.860
> 
> 标签：mongodb, pymongo

I'm trying to run a MongoDB query and return those records where a field is null (more specifically None in pyMongo). So it has to be equal to null.

I know this is not equal to:

```
{"firstName": {"$ne": None }} 
```

I can't find the equal operator in the documentation.

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:33:56.140

{"firstName":{ $type: 10 } } should give you what you want

[http://docs.mongodb.org/manual/faq/developers/#faq-developers-query-for-nulls](http://docs.mongodb.org/manual/faq/developers/#faq-developers-query-for-nulls)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:34:45.410

If you want to find records having firstName defined in record with value None defined:

```
db.testcoll.find({$and: [{"firstName": None}, {"firstName": {$exists: true}}]}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:33:54.597

If I understand correctly it should be just:

```
{"firstName": None} 
```

* * *

With yours you are getting all the documents that have a value different of `None`. `{"firstName": {"$ne": None }}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:34:10.383

Use `{"firstName": { "$exists": false }}` to find records where there's no such field.

# ruby-on-rails - Mongoid 将嵌入文档插入到许多文档中

> ID：13955688
> 
> 赞同：1
> 
> 时间：2012-12-19T15:30:12.723
> 
> 标签：ruby-on-rails, mongoid

比方说，我有两个模型

```
class User
  embeds_many :notifications
  field :age, type :Integer

class Notification
  embedded_in :user
  field :message, type: String 
```

我想创建通知并将其添加到所有用户，匹配特定条件。我想出的只是：

```
notification = Notification.new
notification.message = "Hello"
User.where(:age.ge => 18).push(:notifications, notification) 
```

但这行不通。任何的想法？

UPD：我知道，有办法让它像这样工作：

```
users = User.where(:age.ge => 18)
users.each do |user|
  notification = Notification.new
  notification.message = "Hello"
  user.notifications << notification
  user.save
end 
```

但这似乎是丑陋且低效的代码。

UPD2：最后，此代码可以直接与驱动程序一起使用，如 Winfield 所述：

```
users = User.where(:age.ge => 18)
notification = Notification.new
notification.message = "Hello"
User.collection.update(users.selector, {'$push' => {notifications: notification.as_document}}, multi: true) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:47:31.403

您可能可以在原始 Mongo Driver 级别执行此操作：

```
db.users.update({}, { $push: { notifications: { message: 'Hello!' } } }) 
```

但是，如果您的目标是完成群发消息功能，您最好为这些通知创建一个特殊集合，并让您的应用程序代码拉取系统范围的通知和以用户为目标的通知。

必须更新系统中的每个用户对象以发送大量消息不是可扩展的设计。

# javascript - 有什么方法可以让 Kinetic.js 支持 IE8？

> ID：13955693
> 
> 赞同：5
> 
> 时间：2012-12-19T15:30:27.410
> 
> 标签：javascript, html, canvas, internet-explorer-8, kineticjs

我现在处于一种情况，我需要一些复杂的代码与 Kinetic.js 和一个画布元素一起在 IE8 上工作。

Kinetic.js 官方没有支持 IE8 的计划。

我尝试使用[webshims lib](http://afarkas.github.com/webshim/demos/)，但 Kinetic.js 在以下代码中失败：

```
Kinetic.Canvas = function(width, height) {
    this.element = document.createElement('canvas');
    this.context = this.element.getContext('2d'); //<-- Error here

    // set dimensions
    this.element.width = width;
    this.element.height = height;
}; 
```

错误是“对象不支持属性或方法'getContext'”。这对我来说很有意义，因为我不希望 IE8 文档创建的元素画布实现画布元素的方法，但如果`<canvas>`元素已经创建，webshims 就会播放并且您可以使用这些方法。但是，强制 Kinetic.js 使用单个画布元素会破坏它的一些功能（因为它会动态创建画布对象）。

为了实现这一目标，我有哪些选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:17:53.877

简单回答是不。”

正如一位评论员所提到的，[Google Chrome Frame](http://www.google.com/chromeframe?quickenable=true)是一个不错的替代品，它本质上需要将 Chrome 的渲染引擎安装为 IE 插件。

有[excanvas 项目](https://code.google.com/p/explorercanvas/)，一开始可能听起来不错。这是在 VML (SVG) 中实现画布的尝试，以便 IE 6-8 可以使用画布。

帆布是可怕的。特别是对于任何动画，它不能做一些画布图像处理的东西。而且已经快4年没有更新了。我强烈建议不要使用它，但它供您考虑。

# android - Android 使用 UniversalImageLoader 加载联系人图片

> ID：13955698
> 
> 赞同：0
> 
> 时间：2012-12-19T15:30:37.720
> 
> 标签：android

在我的应用程序中，我尝试使用 UniversaImageLoader 加载联系人图像，但遇到了一些问题，并且几乎没有查询 1) 即使当我在手机上单独运行 Uniimagloader 时，我得到列表但没有图像，我做错了什么？2）我使用了该项目中的一些代码，并且还加载了 jarfile，但仍然出现以下错误

```
FATAL EXCEPTION: main
12-19 20:37:22.050: E/AndroidRuntime(10152): java.lang.NoClassDefFoundError: com.nostra13.universalimageloader.core.ImageLoader
12-19 20:37:22.050: E/AndroidRuntime(10152):    at org.app.activity.BaseActivity.<init>(BaseActivity.java:11)
12-19 20:37:22.050: E/AndroidRuntime(10152):    at org.app.activity.ProfileActivity.<init>(ProfileActivity.java:39)
12-19 20:37:22.050: E/AndroidRuntime(10152):    at java.lang.Class.newInstanceImpl(Native Method)
12-19 20:37:22.050: E/AndroidRuntime(10152):    at java.lang.Class.newInstance(Class.java:1301)
12-19 20:37:22.050: E/AndroidRuntime(10152):    at android.app.Instrumentation.newActivity(Instrumentation.java:1022) 
```

3) ImageLoader 的配置：我在我的适配器中这样做，我可以这样做吗？这样做我得到了错误，`maxImageWidthForMemoryCache(800)`它说 Add cast to method reciever。

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
                    .maxImageWidthForMemoryCache(800)
                    .maxImageHeightForMemoryCache(800)
                    .httpConnectTimeout(5000)
                    .httpReadTimeout(30000)
                    .threadPoolSize(5)
                    .threadPriority(Thread.MIN_PRIORITY + 2)
                    .denyCacheImageMultipleSizesInMemory()
                    .memoryCache(new UsingFreqLimitedMemoryCache(2000000))  
                    .discCache(new UnlimitedDiscCache(cacheDir))  
                    .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
                    .build(); 
```

我很震惊。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:35:49.667

尝试确保上下文变量是一个 Activity 实例。过去就有这种错误。

# excel - VBA中的Excel过滤和复制

> ID：13955708
> 
> 赞同：6
> 
> 时间：2012-12-19T15:31:03.270
> 
> 标签：excel, vba, filter

我正在开发一个 VBA 脚本，该脚本从 Access 中提取一系列日期，然后过滤数据并根据过滤后的数据创建图表。过滤后的数据将转到一个单独的工作表，图表将从该工作表中提取其数据。我可以使用 SQL 语句从 Access 中获取数据，但我`AutoFilter`在 Excel 中出错了。这是我所拥有的...

```
Sheet3.Range("F4:F500").AutoFilter(, "Riveter 01").Copy Destination:=Sheet2.Range("A5") 
```

它给出了应用程序定义或对象定义的错误，我不知道为什么。这是正确的方法还是有更简单的方法？

PS：这个过滤器将发生在 22 台不同的机器上，所以我计划为每台机器运行一个循环。如果这不是最快或正确的方法，请告诉我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T16:35:05.220

你需要把它分成两部分。过滤然后复制/粘贴。见下文：

```
With Sheet3
    .AutoFilterMode = False
    With .Range("F4:F500")
        .AutoFilter Field:=1, Criteria1:="Riveter 01"
        .SpecialCells(xlCellTypeVisible).Copy Destination:=Sheet2.Range("A5")
    End With
End With 
```

删除过滤器：

```
On Error Resume Next
    Sheet3.ShowAllData
On Error GoTo 0 
```

On Error Resume Next 适用于没有过滤器跳过错误的情况。请注意对于那些寻求通用解决方案的人来说，使用 Sheet3 和 Sheet2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:47:52.993

我认为您必须分两个单独的步骤执行此操作：

1.  过滤数据
2.  将过滤后的数据复制到另一个工作表

这里的答案有一个很好的例子来说明如何做到这一点：[自动过滤宏，然后只复制可见数据并粘贴到下一个可用行](https://stackoverflow.com/questions/11903878/autofilter-macro-then-copy-visible-data-only-and-paste-to-next-available-row)

# android - Android : 启动 Skype 在后台

> ID：13955719
> 
> 赞同：1
> 
> 时间：2012-12-19T15:31:18.347
> 
> 标签：android, skype, autostart

我希望这只是一个暂时的问题，并且 Skype 允许自动启动功能。

我需要启动 Skype 以便它可以接收 Skype 通话和视频通话，然后启动我的应用程序。我与老人一起工作的简单是非常宝贵的。我的应用程序连续运行。

下面的代码似乎在 BOOT BroadcastReceiver 中实现了这个目标。

```
 PackageManager  pmi = context.getPackageManager();
        String packageName ="com.skype.raider";     
        context.startActivity(pmi.getLaunchIntentForPackage(packageName));  
        Log.d("ANDRO_ASYNC",String.format("should launch Skype"));  
        Intent intent1 = new Intent(context,MyApp.class);
        intent1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        Bundle bundle = new Bundle();
        bundle.putInt("FromBoot",1);
        intent1.putExtras(bundle);
        try{ // hoping to schedule the start to after Skype has finished                
            Thread.sleep(20000);                 
        }catch(InterruptedException ex){
            Log.d("ANDRO_ASYNC",String.format("error in delay loop"));  
                    }
        context.startActivity(intent1); 
```

这会启动 Skype 并等待 20 秒才能启动我的应用程序。我的应用程序最终出现在屏幕上（所需的效果）。

然而，它对大多数人来说是一个小问题，但对我来说却是一个大问题。在第一次 Skype 通话后，Skype 的蓝色欢迎屏幕保持不变，用户必须按返回按钮。实际上，这使得结束 Skype 通话的方式有所不同，具体取决于它是第一次通话还是后续通话。

问题。

我可以从我的应用程序中关闭 Skype 吗？

我可以从我的应用中检测到 Skype 是否已完成通话？

# django - 基于 Django 类的通用视图 (Createview) 'bool' 对象没有属性 '__dict__' 错误

> ID：13955722
> 
> 赞同：0
> 
> 时间：2012-12-19T15:31:20.587
> 
> 标签：django, django-class-based-views

通过 CreateView（使用 modelform）创建对象时，我遇到了问题。

先上代码：

看法：

```
class KlientCreateView(CreateView):
form_class = KlientCreateForm
model = Klient
template_name = 'forms/klient_pridat.html'
success_url = '/thanks' 
```

网址配置：

```
url(r'^klient_pridat/$', KlientCreateView.as_view(), name='url_klient_pridat'), 
```

模板：

```
{% block content %}
<form action="" method="post">{% csrf_token %}
<h3>formular</h3>
{{ form.as_p }}
<input type="submit" value="Submit" />
</form>
{% endblock %}    

Traceback:
File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/lib/python2.7/site-packages/django/views/generic/base.py" in view
  47\.             return self.dispatch(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/views/generic/base.py" in dispatch
  68\.         return handler(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/views/generic/edit.py" in post
  172\.         return super(BaseCreateView, self).post(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/views/generic/edit.py" in post
  138\.             return self.form_valid(form)
File "/usr/lib/python2.7/site-packages/django/views/generic/edit.py" in form_valid
  113\.         return super(ModelFormMixin, self).form_valid(form)
File "/usr/lib/python2.7/site-packages/django/views/generic/edit.py" in form_valid
  60\.         return HttpResponseRedirect(self.get_success_url())
File "/usr/lib/python2.7/site-packages/django/views/generic/edit.py" in get_success_url
  101\.             url = self.success_url % self.object.__dict__

Exception Type: AttributeError at /klient_pridat/
Exception Value: 'bool' object has no attribute '__dict__' 
```

填写表格并推送提交后，我得到错误页面

```
'bool' object has no attribute '__dict__' 
```

从回溯并进行一些搜索，我猜这是由 get_success_url() 方法引起的（可能是由于表单中的错误“动作”。我也尝试过：

```
<form action="{% url url_klient_pridat %}" method="post">{% csrf_token %}
OR <form action="" method="post">{% csrf_token %}
OR <form action="/klient_pridat/" method="post">{% csrf_token %} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:37:42.600

`KlientCreateForm.save`应该返回一个`Klient`实例。

* * *

现在，它返回一个`bool`（即，`True`或`False`）。

# mysql - 关于编写 SQL 查询的问题

> ID：13955723
> 
> 赞同：1
> 
> 时间：2012-12-19T15:02:55.620
> 
> 标签：mysql, sql

考虑我有两个表/列：

```
Employee - > EmpId, DeptNo, EmpName, Salary
Department -> DeptNo, DeptName 
```

编写查询以获取所有部门中薪水最高的员工姓名。我试过这个：

```
Select max(salary),empname 
from Employee 
where deptno = (select deptno 
                from department
                where deptname in('isd','it','sales') 
```

这是对的吗？其实是面试题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:27:37.537

这是[groupwise max](http://jan.kneschke.de/projects/mysql/groupwise-max/) mysql 模式的一个示例。一种方法是：

```
 SELECT e.salary, e.name, d.deptname
    FROM Employee AS e 
     JOIN (
       SELECT max(salary) AS max_sal, deptno
       FROM Employee
       GROUP BY deptno
     ) AS d_max ON (e.salary=d_max.max_sal AND e.deptno=d_max.deptno)
     JOIN Department AS d ON (e.deptno = d_max.deptno) 
```

虽然如果一个部门有多个员工的最高工资，它将返回一个部门的多行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:37:25.630

对于这样的问题，我个人会使用 cte 和 row_number 。例如：

```
with myCTE as
(
    select e.empName, e.salary, d.deptName, 
        row_number() over (partition by e.deptNo order by e.salary desc) as rn
    from Employee as e
    inner join Department as d
        on d.DeptNo=e.DeptNo
)

select m.empName, m.deptName, m.salary
from myCTE as m
where m.rn=1 
```

在关系的情况下（同一部门的两名员工具有相同的最高工资），那么这是不确定的（它只会返回其中一个）。如果您想同时返回它们，请将 row_number 更改为dense_rank。

# .net - 流式处理 WCF - 400 错误请求

> ID：13955729
> 
> 赞同：2
> 
> 时间：2012-12-19T15:31:31.017
> 
> 标签：.net, wcf, streaming, http-status-code-400

在过去的几天里，我一直在设置流媒体服务，每次我回到任务时，我都会遇到同样的 400 错误请求。我在这里和网上搜索了许多帖子，这似乎是一个常见问题，但每种情况都不同。下面是我的绑定设置的当前状态 - 我觉得这必须是我忽略的一些小东西。

来自 WCF 分析器的信息：

*   调用服务时，会引发警告，说明“未找到配置评估上下文”。
*   下一个条目指出“未找到匹配的服务标签。添加了默认端点。”

这使我相信我设置的任何内容都没有应用于服务，因此抛出错误请求错误，因为它使用了我的流超过的 ~64kb 默认值。

```
 <!-- Services Config -->
        <system.web>
        <httpRuntime maxRequestLength="2097150" executionTimeout="7200"/>
        <compilation debug="true" targetFramework="4.0" />    
        </system.web>
    <system.serviceModel>
    <bindings>
      <basicHttpBinding>        
          <binding name="StreamingService"  maxReceivedMessageSize="2147483647"  maxBufferSize="2147483647" transferMode="Streamed" >
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
            <security mode="None">
            </security>
          </binding>        
      </basicHttpBinding>
    </bindings>
    <services>
      <service name="StreamingService" behaviorConfiguration="StreamingServiceBehavior">
          <endpoint address="http://localhost:50577/StreamingContent.svc"
         binding="basicHttpBinding" bindingConfiguration="StreamingService"
         contract="IStreamingContent" name="BasicHttpBinding_IStreamingContent" />
      </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

       <!-- Web Server Config -->
        <bindings>
        <basicHttpBinding>
  <binding name="BasicHttpBinding_IStreamingContent" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:01:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Streamed"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647"
           maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
    </basicHttpBinding>
    </bindings>    
    <client>
        <endpoint address="http://localhost:50577/StreamingService.svc"
             binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IStreamingService"
            contract="StreamingService.IStreamingService" name="BasicHttpBinding_IStreamingService" />
        </client> 
```

任何新的观点肯定会有所帮助。

**编辑**：我在接受下面的建议后更新了上面的配置，但我仍然在探查器中遇到同样的问题，没有找到匹配的标签，只有这一次我*相信*我的设置是正确的.....显然不是因为它会工作现在不会了吧？

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:35:45.947

我认为您的问题的原因之一是您使用`<client>`服务器端的部分配置端点，而实际上您应该使用`<services>`部分来配置您的服务端点。请在此处查看流式传输的服务器配置文件示例[http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/streaming-in-wcf/](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/streaming-in-wcf/)

非常小心你的配置文件，这是 WCF 中出现大多数问题的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T21:03:27.767

对于未来的读者。

我得到“没有找到匹配的标签。添加了默认端点。”

我的xml很好。（在我花了一个小时试图找到格式错误的 xml 之后）。

对我来说，问题是我更改了具体服务类的命名空间。

关键是这个。

在 .svc 文件中，有一些标记

```
<%@ ServiceHost Language="C#" Debug="true" Service="MyCompany.MyNamespace.MyConcreteService" %> 
```

这必须是 .cs 类的完全限定名称。

和

您的服务模型 xml 也必须具有完全限定的名称。

```
 <service name="MyCompany.MyNamespace.MyConcreteService"
           behaviorConfiguration="MyServiceBehavior"
           >

        <!-- 
        Whole bunch of other stuff not shown here
        -->

  </service> 
```

以上将模仿类

```
namespace MyCompany.MyNamespace
{
    public class MyConcreteService : IMyService
    {
    }
} 
```

确保您具有正确的完全限定名称，并且它们被正确复制到 .svc 文件和 xml 中。

我从这里得到了答案：

[https://social.msdn.microsoft.com/Forums/vstudio/en-US/3bb9b3ad-8fc4-40a6-9bb8-fb34f9011d39/bad-request-error-when-uploading-file-to-server?forum=wcf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/3bb9b3ad-8fc4-40a6-9bb8-fb34f9011d39/bad-request-error-when-uploading-file-to-server?forum=wcf)

***WCF 可能无法识别该元素。元素中“名称”属性的值必须是服务类的完全限定名称 - 因为您使用 IIS 来托管服务，所以它需要与 @ 中的“服务”属性值相同.svc 文件中的 ServiceHost 标记。***

# html - 不能在 IE10 中工作

> ID：13955731
> 
> 赞同：34
> 
> 时间：2012-12-19T15:31:34.777
> 
> 标签：html

虽然我很确定这是昨天或前一天的工作`<input type="number" min="0" max="50" step="10" value="0" />`，例如，在 IE10 中不再工作。我已经用[http://ie.microsoft.com/testdrive/HTML5/Forms/Default.html](http://ie.microsoft.com/testdrive/HTML5/Forms/Default.html)测试了我的浏览器，但它不再工作了。还有谁有相同的问题吗？或者，它从来没有工作过？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-18T20:49:59.533

Internet Explorer 10 支持数字输入。从[他们的文档](http://msdn.microsoft.com/en-us/library/ie/hh773064%28v=vs.85%29.aspx)的粗略检查以及在浏览器本身中使用它的尝试中可以明显看出这一点。例如，尝试在数字输入中放置一个字母将导致在控件失去焦点时清除该值。

您还可以通过以编程方式执行上述测试来检测对数字的支持：

```
// Create the element
var element = document.createElement( "input" );

// Give it the number property and invalid contents
element.type = "number";
element.value = "qwerty";

// Value should be empty
alert( element.value ? "Not Supported" : "Supported" ); 
```

运行这个测试：http: [//jsfiddle.net/VAZwT/](http://jsfiddle.net/VAZwT/)

很可能您将逐步增强的 UI（微调器）等同于对控件本身的支持。我已经看到这让一些人感到困惑。*一些*浏览器通过额外的控件来补充数字输入，但这不是（据我所知）支持的要求。

`min`对、`max`和`step`jsfiddle的一些简单测试：http: [//jsfiddle.net/sDVK4/show/](http://jsfiddle.net/sDVK4/show/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-19T15:41:16.930

**请选择[以下答案](https://stackoverflow.com/a/16092812/1410020)，`Sampson`因为它更合适**

* * *

IE 不支持 input type="number" 但您可以使用 polyfill 使其工作。

这是解决方案： http: [//html5please.com/#number](http://html5please.com/#number)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-19T15:34:43.020

IE10 不支持数字。资料来源：[我可以使用...吗？](http://caniuse.com/#feat=input-number)

刚刚在我们的 Windows 8 测试机上进行了验证，在他们的 IE10 测试驱动站点上没有数字微调器。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-21T17:02:19.123

Microsoft 仍然存在输入类型=数字的验证错误/错误，这也在 IE11 中。

[https://connect.microsoft.com/IE/feedback/details/850187/html5-constraint-validation-is-broken-in-ie11-for-input-type-number](https://connect.microsoft.com/IE/feedback/details/850187/html5-constraint-validation-is-broken-in-ie11-for-input-type-number)

就像我又开始喜欢 Internet Explorer 一样……希望他们能在 IE12 中解决这个问题，祈祷

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-03T11:39:27.470

这是我开发的解决方案，我认为效果很好，希望对某人有所帮助

```
function handleKeyPress(e) {
    let newValue = e.target.value + e.key;
    if (
    // It is not a number nor a control key?
    isNaN(newValue) && 
    e.which != 8 && // backspace
    e.which != 17 && // ctrl
    newValue[0] != '-' || // minus
    // It is not a negative value?
    newValue[0] == '-' &&
    isNaN(newValue.slice(1)))
        e.preventDefault(); // Then don't write it!
}
```

```
Insert a number:
<input onKeyPress="handleKeyPress(event)"/>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-20T14:38:07.193

IE 不支持 input type="number" 但您可以使用 jQueryUI Spinner 小部件。它使用起来非常简单，并且有许多对开发人员友好的 API。

jQuery-UI Spinner 演示： [https ://jqueryui.com/spinner/](https://jqueryui.com/spinner/)

jQuery-UI Spinner API [https://api.jqueryui.com/spinner/#event-change](https://api.jqueryui.com/spinner/#event-change)

# javascript - JavaScript：从数字中获取第二个数字？

> ID：13955738
> 
> 赞同：51
> 
> 时间：2012-12-19T15:31:52.270
> 
> 标签：javascript, numbers

我有一个分配给变量的数字，如下所示：

```
var myVar = 1234; 
```

现在我想从该数字中获取第二个数字（在本例中为 2），而无需先将其转换为字符串。那可能吗？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-19T15:33:31.770

所以你想从一个数字的十进制书写中得到第二个数字。

最简单和最合乎逻辑的解决方案是将其转换为字符串：

```
var digit = (''+myVar)[1]; 
```

或者

```
var digit = myVar.toString()[1]; 
```

如果您不想以简单的方式进行操作，或者您想要更有效的解决方案，您可以这样做：

```
var l = Math.pow(10, Math.floor(Math.log(myVar)/Math.log(10))-1);
var b = Math.floor(myVar/l);
var digit = b-Math.floor(b/10)*10; 
```

[示范](http://jsfiddle.net/QgbSf/)

对于对表演感兴趣的人，我做了一个[jsperf](http://jsperf.com/get-second-digit)。对于像我一样使用日志的随机数是迄今为止最快的解决方案。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-01-18T05:48:17.980

从右数第一个数字 → `number % 10`=`Math.floor((number / 1) % 10)`

```
1234 % 10; // 4
Math.floor((1234 / 1) % 10); // 4 
```

右起第 2 位数字 →`Math.floor((number / 10) % 10)`

```
Math.floor((1234 / 10) % 10); // 3 
```

右起第 3 位数字 →`Math.floor((number / 100) % 10)`

```
Math.floor((1234 / 100) % 10); // 2 
```

从右数第 n 位 →`Math.floor((number / 10^n-1) % 10)`

```
function getDigit(number, n) {
  return Math.floor((number / Math.pow(10, n - 1)) % 10);
} 
```

数字中的位数→`Math.max(Math.floor(Math.log10(Math.abs(number))), 0) + 1` *归功于：[https ://stackoverflow.com/a/28203456/6917157](https://stackoverflow.com/a/28203456/6917157)*

```
function getDigitCount(number) {
  return Math.max(Math.floor(Math.log10(Math.abs(number))), 0) + 1;
} 
```

**从左或右开始的**第 n 个数字****

 **```
function getDigit(number, n, fromLeft) {
  const location = fromLeft ? getDigitCount(number) + 1 - n : n;
  return Math.floor((number / Math.pow(10, location - 1)) % 10);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T15:33:30.070

通过将数字除以 10 直到数字小于 100，在循环中去除尾随数字。然后用 10 取模得到第二个数字。

```
if (x > 9) {
    while (x > 99) {
        x = (x / 10) | 0;  // Use bitwise '|' operator to force integer result.
    }
    secondDigit = x % 10;
}
else {
    // Handle the cases where x has only one digit.
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-19T15:34:24.533

“数字”是一回事。

该数字的*表示*（例如，base-10 字符串“1234”）是另一回事。

如果您想要十进制字符串中的特定数字......那么最好的选择是从字符串中获取它:)

问：您知道 Javascript 中的整数运算存在缺陷，对吗？

问：为什么不使用字符串如此重要？这是家庭作业吗？面试题？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-08T06:37:19.270

```
function getNthDigit(val, n){
    //Remove all digits larger than nth
    var modVal = val % Math.pow(10,n);

    //Remove all digits less than nth
    return Math.floor(modVal / Math.pow(10,n-1));
}

// tests
[
  0, 
  1, 
  123, 
  123456789, 
  0.1, 
  0.001
].map(v => 
  console.log([
      getNthDigit(v, 1),
      getNthDigit(v, 2),
      getNthDigit(v, 3)
    ]
  ) 
);
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-01-06T01:43:08.290

你知道，我知道这个问题问的是如何在没有数字的情况下做到这一点，但标题是“JavaScript：从数字中获取第二个数字？” 意味着很多人在寻找获取特定数字、句号的方法时会找到这个答案。

我不是在抨击最初的提问者，我确信他/她有他们的理由，但从搜索实用性的角度来看，我认为值得在这里添加一个答案，将数字转换为字符串并返回，因为，如果没有别的，这是一种更简洁、更容易理解的方式。

```
let digit = Number((n).toString().split('').slice(1,1))

// e.g.
let digit = Number((1234).toString().split('').slice(1,1)) // outputs 2 
```

在没有字符串转换的情况下获得数字很棒，但是当您尝试编写清晰简洁的代码时，其他人和未来您可以快速且完全理解，我认为快速字符串转换单行是一种更好的方法正在做。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-01-14T18:22:54.987

这就是我对递归的处理方式

```
function getDigits(n, arr=[]) {
   arr.push(n % 10)

   if (n < 10) {
     return arr.reverse()
   }
   return getDigits(Math.floor(n/10),arr)
  }

const arr = getDigits(myVar)
console.log(arr[2]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-19T16:13:31.043

我不知道你为什么需要这个逻辑，但下面的逻辑会给你第二个数字

```
<script type="text/javascript">
    var myVal = 58445456;
    var var1 = new Number(myVal.toPrecision(1));
    var var2 = new Number(myVal.toPrecision(2));     
    var rem;
    rem = var1 - var2;
    var multi = 0.1;
    var oldvalue;
    while (rem > 10) {
        oldvalue = rem;
        rem = rem * multi;
        rem = rem.toFixed();           
    }
    alert(10-rem);       
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-01T11:57:55.380

```
function getDigit(number, indexFromRight) { 
            var maxNumber = 9
            for (var i = 0; i < indexFromRight - 2; i++) {
                maxNumber = maxNumber * 10 + 9
            }
            if (number > maxNumber) {
                number = number / Math.pow(10, indexFromRight - 1) | 0
                return number % 10
            } else
                return 0
        }
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-11T16:51:49.290

从一个数字作为字符串或整数取回任何宪章只是一个简单的想法：

```
const myVar = 1234;
String(myVar).charAt(1)
//"2"
parseInt(String(myVar).charAt(1))
//2 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-07T20:41:59.067

你可以使用这个函数 index = 0 会给你右边的第一个数字（那些） index = 1 会给你右边的第二个数字（十位）

等等

```
const getDigit = (num, index) => {

    if(index === 0) {
        return num % 10;
    }

    let result = undefined;

    for(let i = 1; i <= index; i++) {
        num -= num % 10;
        num /= 10;
        result = num % 10;
    }

    return result;

} 
```

例如：

```
getDigit(125, 0)   // returns 5
gitDigit(125, 1)   // returns 2
gitDigit(125, 2)   // returns 1
gitDigit(125, 3)   // returns 0 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2012-12-19T15:46:02.087

```
var newVar = myVar;
while (newVar > 100) {
    newVar /= 10;
}

if (newVar > 0 && newVar < 10) {
   newVar = newVar;
}

else if (newVar >= 10 && newVar < 20) {
   newVar -= 10;
}

else if (newVar >= 20 && newVar < 30) {
   newVar -= 20;
}

else if (newVar >= 30 && newVar < 40) {
   newVar -= 30;
}

else if (newVar >= 40 && newVar < 50) {
   newVar -= 40;
}

else if (newVar >= 50 && newVar < 60) {
   newVar -= 50;
}

else if (newVar >= 60 && newVar < 70) {
   newVar -= 60;
}

else if (newVar >= 70 && newVar < 80) {
   newVar -= 70;
}

else if (newVar >= 80 && newVar < 90) {
   newVar -= 80;
}

else if (newVar >= 90 && newVar < 100) {
   newVar -= 90;
}

else {
   newVar = 0;
}

var secondDigit = Math.floor(newVar); 
```

我就是这样做的:)

这是一个 JSFiddle 显示它的工作原理:) [http://jsfiddle.net/Cuytd/](http://jsfiddle.net/Cuytd/)

这也假设您的原始数字始终大于 9……如果它不总是大于 9，那么我想您不会问这个问题；）**

# javascript - 尝试将新节点附加到现有节点不适用于自定义架构

> ID：13955739
> 
> 赞同：2
> 
> 时间：2012-12-19T15:31:54.183
> 
> 标签：javascript, kendo-ui, kendo-treeview

使用 Kendo UI Web v2012.3.1114 时，我遇到的问题是我正在尝试使用我通过 AJAX 调用服务器检索的节点对 TreeView 进行简单的附加，并出现以下错误。

该节点的格式与从正常读取函数返回的数据完全相同。我已经成功地用于`data("kendoTreeView").insertBefore(...)`同一棵树并调用，但是当我尝试使用`data("kendoTreeView").append(...)`它时失败了。

错误信息：

> 未捕获的类型错误：对象# 的属性“数据”不是函数 kendo.web.min.js:25

因为我必须能够为以前是叶子的节点创建新的子节点，所以我不能使用任何其他 API 来执行此操作。

我制作了一个[jsFiddle](http://jsfiddle.net/XJbvd/)，显示了树的定义以及我希望能够做什么。我尝试在 Kendo 网站上引用工作示例，但似乎一旦我使用自定义模式，事情就会向南。

这是我正在使用的来自 jsFiddle 的代码：

```
function populateHierarchyTree(quotaSetID, columnID, treeDiv) {

    var transport = {
        read: {
            url: '/Quota/QuotaHierarchy/GetQuotaHierarchyChildrenFromParent',
            dataType: 'json',
            data: { columnDefinitionID: columnID, quotaSetID: quotaSetID, batchSize:10 },
            type: 'POST'
        }
    };

    var schema = {
        model: {
            id: 'id',
            hasChildren: 'hasChildren'
        }
    };

    var dataSource = new kendo.data.HierarchicalDataSource({
        transport: transport,
        schema: schema
    });

    treeDiv.kendoTreeView({
        loadOnDemand: true,
        dataSource: dataSource,
        dataTextField: "text",
    });
}

// This function is called with a single node which contains the exact same structure returned from GetQuotaHierarchyChildrenFromParent used by the read. ParentElement could be anything.
function AddNode(node,parentElement,treeView){
    treeView.append(node,parentElement);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:22:03.740

你如何选择`parentElement`？你确定它是一个`kendoTreeView`节点吗？

尝试这个：

```
treeView.append(node, parentElement.closest(".k-item")); 
```

通过添加`.closest(".k-item");`我尝试找到的最接近的`node`祖先`parentNode`。

# linux - 内核中的 sock_create()

> ID：13955748
> 
> 赞同：0
> 
> 时间：2012-12-19T15:32:11.937
> 
> 标签：linux, sockets, linux-kernel

我正在寻找`__sock_create()`代码以更好地了解内核的内部机制，并发现内核调用`try_module_get()`了两次；这是一个片段：

```
static int __sock_create(struct net *net, int family, int type, int protocol, struct socket **res, int kern)
{
   sock = sock_alloc();
   ...
   if (!try_module_get(pf->owner))
      goto out_release;

   err = pf->create(net, sock, protocol);
   ...

   if (!try_module_get(sock->ops->owner))
      goto out_module_busy

   ...
} 
```

本质上，如果与套接字相关的回调在模块中，那么每当`socket()`来自用户空间的每个回调都会增加模块的引用计数两次。这种行为的理由是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:15:24.867

您有两个模块，因此有两个引用计数增量。一是Packet族模块，二是socket型模块。

结帐[http://www.haifux.org/lectures/217/netLec5.pdf](http://www.haifux.org/lectures/217/netLec5.pdf)以供参考。

# netbeans - 突出显示 netbeans 7.2 中打开的文件

> ID：13955749
> 
> 赞同：2
> 
> 时间：2012-12-19T15:32:20.270
> 
> 标签：netbeans, netbeans-7, netbeans-7.2

是否可以在 Netbeans 的文件窗口中跟踪打开的文件？在 Visual Studio 中有一个选项“在解决方案资源管理器中跟踪活动项目”可能在 Netbeans 中有类似的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T16:33:19.383

是的，在菜单栏中：**`View -> Synchronize Editor with Views`**. 如果选中，则在“项目”和“文件”中选择当前文件，反之亦然。

# macos - 在 C++ 中模拟按键

> ID：13955761
> 
> 赞同：2
> 
> 时间：2012-12-19T15:32:56.750
> 
> 标签：macos

我希望我的程序在我不亲自动手的情况下按下键盘上的某些键。所以我需要一个模拟按下任意键的子程序。我可以使用什么代码在 C++ 中完成此操作（按任意键）？（我正在 Xcode 中为 MacOSX 创建一个程序）

好的，我现在对鼠标进行了排序，我只需要按键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:08:40.967

您可以使用低级事件函数，例如`CGEventPost`. 在更高的层次上，查看可访问性 API，例如`AXUIElementPerformAction`.

# ms-access - 将 2 个具有 2 个公共字段的表合并为 1 个具有 2 个字段和一个源指示符的表

> ID：13955765
> 
> 赞同：-2
> 
> 时间：2012-12-19T15:32:59.413
> 
> 标签：ms-access

这是我第一次发帖，如有错误请见谅：）

源文件：字段

表 1：ID、客户编号

表 2：ID、客户编号

表 1 显示了 Customer，表 2 显示了 Bill Payer。两个表都使用 ID 作为交易 ID。所以一个事务在表 1 中有 1 条记录，在表 2 中有 1 条记录。

期望的输出：

表 3：ID、客户编号、客户/付款人。

我知道我可以将表查询附加到 1 个目标表来实现，但如果我可以使用 ONE SELECT 查询来做到这一点，这将使我的数据库的“流程”更加顺畅，因为我正在替换旧查询。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:35:57.177

```
SELECT ID, Client_Number, 'Customer' AS Type FROM Table 1
UNION ALL
SELECT ID, Client_Number, 'Payer' AS Type FROM Table 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:36:09.950

```
SELECT ID, ClientNumber, 'Customer' as Kind FROM Customer
UNION ALL
SELECT ID, ClientNumber, 'Player' as Kind FROM Player 
```

# 3d - DirectX Unproject 问题

> ID：13955771
> 
> 赞同：0
> 
> 时间：2012-12-19T15:33:23.393
> 
> 标签：3d, directx, directx-11, sharpdx, direct3d11

我有一个正交投影，我尝试从屏幕空间中取消投影一个点。

以下是视图和投影矩阵：

```
var w2 = ScreenWidthInPixels/2;
var h2 = ScreenHeightInPixels/2;

view  = Matrix.LookAtLH(new Vector3(0, 0, -1), new Vector3(0, 0, 0), 
                        Vector3.UnitY);
proj  = Matrix.OrthoOffCenterLH(-w2, w2, -h2, h2, 0.1f, 10f); 
```

这是我取消投影 Point`p`的方法，该点以屏幕像素为单位：

```
var m = Vector3.Unproject(p, 0, 0, ScreenWidthInPixels, ScreenHeightInPixels, 
                  0.1f, 10f, // znear and zfar
                  view *proj); 
```

我的代码不起作用，矩阵`m`仅包含`Nan`. 当我尝试反转时，`view * proj`我得到一个只有零的矩阵。

所以我怀疑我的问题与正交投影矩阵有关。

以下是我的问题：

*   问题可能是由于 OrthoOffCenterLH 投影中的大值导致的下溢引起的吗？
*   我必须传递哪些`x,y,width,height`参数`Unproject(...)`？
*   `minZ`中的and`maxZ`参数有什么意义`Unproject(...)`？
*   `p.Z`我通过什么重要`Unproject(...)`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:54:52.297

不幸的是，SharpDX 文档现在不在线。所以我的解释可能是基于我找到的代码的旧版本。

> 问题可能是由于 OrthoOffCenterLH 投影中的大值导致的下溢引起的吗？

什么大值？我假设屏幕宽度和高度小于 2000。那绝对不是很大。不要担心这个。

> 我必须为 Unproject(...) 中的 x、y、width、height 传递哪些参数？

这些是视口的尺寸。这是必需的，因为视图和投影矩阵将向量转换为剪辑空间。这通常是 x 和 y 的 [-1, 1] 和 z 的 [0, 1]。首先需要将位置从屏幕空间转换到剪辑空间。这就是这些价值观的用途。

> Unproject(...) 中的 minZ 和 maxZ 参数有什么意义？

这就是您对输入向量的 z 分量进行编码的方式。它还用于将坐标标准化为屏幕空间。通常，您可以将其保留为 0 和 1。

> 我在 Unproject(...) 中为 pZ 传递的内容是否重要？

是的当然。此参数指定视锥体/立方体中的深度。如果你传入`minZ`，你会得到前面点的未投影坐标。如果你通过`maxZ`，你会得到背面的位置。中间的每个值都会导致中间的坐标。这是因为 2D 点映射到 3D 点的整个射线。

最后，该`Unproject`方法应该适用于正交投影矩阵。在您的情况下，结果`view*proj`只是缩放和平移的简单组合，应该是完全可逆的。你确定得到的逆只包含零吗？如果是这样，那么请将原始矩阵添加到您的问题中。也许还有其他事情发生。

# c# - 没有颁发者证书

> ID：13955777
> 
> 赞同：0
> 
> 时间：2012-12-19T15:33:31.553
> 
> 标签：c#, bouncycastle

我有一个例外：`No issuer certificate for certificate in certification path found.`

```
PkixBuilderParameters builderParams = new PkixBuilderParameters(rootCerts, holder);
builderParams.IsRevocationEnabled = false;
X509CollectionStoreParameters intermediateStoreParameters =
                new X509CollectionStoreParameters(intermediateCerts);
builderParams.AddStore(X509StoreFactory.Create("Certificate/Collection", 
                intermediateStoreParameters));
PkixCertPathBuilderResult result = 
                builder.Build(builderParams); // exception in this line 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:41:18.043

这意味着您使用的证书没有可以链接到的颁发（根 CA）证书。所有证书都颁发（并链接）到其他证书。系统找不到颁发此特定证书的证书，因此无法验证它。

如果这是自签名证书，您是否在颁发此证书的计算机上安装了根证书？

# excel-2007 - 没有 VBA 的 Excel 2007 组合框

> ID：13955780
> 
> 赞同：1
> 
> 时间：2012-12-19T15:33:35.877
> 
> 标签：excel-2007

我正在尝试在不使用 VBA 的情况下在工作表上生成一个组合框。我非常熟悉 VBA 的流程，但我希望没有 VBA 经验的用户可以维护此工作簿。我知道有一种方法可以在没有 VBA 的情况下生成和填充组合框，但自从我使用它以来，它一直是 eon 的。任何进修指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:03:22.217

您正在考虑数据验证。

# android - 如何检测android中的用户存在？

> ID：13955782
> 
> 赞同：8
> 
> 时间：2012-12-19T15:33:40.833
> 
> 标签：android, android-camera, user-input, android-sensors

我知道在 Galaxy Samsung SIII 中，可以在设置中配置一个选项，以避免在用户注视屏幕时关闭屏幕。我认为手机使用摄像头或某种存在传感器。

1.  是否有可能以编程方式进行？
2.  即使是，某些设备也无法做到这一点。我在这里想象一些可能性：使用相机、加速度计，甚至是用户活动：屏幕是否打开，触摸，我不知道。android有一个关于“用户存在”的特定库吗？在可用时使用最好的传感器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:45:48.530

是的，有这样的事情。

您可以使用[SensorManager](http://developer.android.com/reference/android/hardware/SensorManager.html)获取传感器事件。例如，光[传感器](http://developer.android.com/reference/android/hardware/Sensor.html)将对您有用：

```
private SensorManager sensorManager;
private Sensor lightSensor;
private float lightAmount;

public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     sensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
     lightSensor = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);

     SensorEventListener listener = new SensorEventListener() {
         @Override
         public void onSensorChanged(SensorEvent event) {
             // returns the current light amount
             lightAmount = event.data[0];
         }

     lightSensor.registerListener(listener);
} 
```

但当然，他不能独自完成所有工作。对光传感器进行编程以查看屏幕何时变亮，如果为真，*则*意味着用户不再看它。您可以使用加速度计（如您所说）来帮助您。我找到了一些代码并对其进行了修改，该类应该是这样的：

```
public class AccelerometerDetector {

    boolean isAvailable = false;
    boolean isEnabled = false;

    /**
     * Constructor.
     *
     * @param enable : True to enable the accelerometer
     * @throws UnsupportedOperationException
     *  - thrown if the Accelerometer is not available on the current device.
     */
    public AccelerometerDetector(boolean enable) 
            throws UnsupportedOperationException 
    {
            /* Check if the sensor is available */
            for (String accelerometer : Sensors.getSupportedSensors())
                    if (accelerometer.equals(Sensors.SENSOR_ACCELEROMETER))
                            isAvailable = true;

            if (!accelerometerAvailable)
                    throw new UnsupportedOperationException(
                                    "Accelerometer is not available.");

            if (enable)
                    setEnableAccelerometer(true);
    }

    /**
     * Set if the Accelerometer is enabled or not.
     *
     * @param enable
     * @throws UnsupportedOperationException
     */
    public void setEnableAccelerometer(boolean enable)
            throws UnsupportedOperationException 
    {
            if (!accelerometerAvailable)
                    throw new UnsupportedOperationException(
                                    "Accelerometer is not available.");

            /* If should be enabled and isn't already */
            if (enable && !this.isEnabled) {
                    Sensors.enableSensor(Sensors.SENSOR_ACCELEROMETER);
                    this.isEnabled = true;
            } else /* If should be disabled and isn't already */
            if (!enable && this.isEnabled) {
                    Sensors.disableSensor(Sensors.SENSOR_ACCELEROMETER);
                    this.isEnabled = false;
            }
    }

    /**
     * Read the values provided by the Accelerometer.
     *
     * @return Current Accelerometer-values.
     * @throws UnsupportedOperationException
     *             if the Accelerometer is not available on this device.
     * @throws IllegalStateException
     *             if the Accelerometer was disabled.
     */
    public float[] readAccelerometer() 
            throws UnsupportedOperationException, IllegalStateException 
    {
            if (!isAvailable)
                    throw new UnsupportedOperationException(
                                    "Accelerometer is not available.");

            if (!this.isEnabled)
                    throw new IllegalStateException(
                                    "Accelerometer was disabled.");
            /* Get number of sensor-values the sensor will return. Could be
             * variable, depending of the amount of axis (1D, 2D or 3D
             * accelerometer). */
            int sensorValues = Sensors
                            .getNumSensorValues(Sensors.SENSOR_ACCELEROMETER);
            float[] values = new float[sensorValues];

            /* Make the OS fill the array we passed. */
            Sensors.readSensor(Sensors.SENSOR_ACCELEROMETER, values);

            return values;
    }
} 
```

还要在您的 Manifest.xml 中声明此功能：

```
<uses-feature android:name="android.hardware.sensor.light" />
<uses-feature android:name="android.hardware.sensor.accelerometer" /> 
```

您所说的“存在传感器”可能是光/接近传感器。但是您不能使用接近传感器，因为它通常只有 5 厘米的范围。

![在此处输入图像描述](../Images/77a7dd4ed454b5912ea3528159d7446c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T16:10:37.597

您可以使用设备的前置摄像头检测用户的面部，从而检查用户的存在。好消息是它可以在任何带有前置摄像头的安卓手机上使用。

[这](https://github.com/kevalpatel2106/Prevent-Screen-Off)是来自 GitHub 的库，它演示了如何使用 Google Play Services 的 Vision API 来实现它。

# javascript - 使用 D3.js 对折线图中的线条进行动画处理

> ID：13955790
> 
> 赞同：4
> 
> 时间：2012-12-19T15:34:12.880
> 
> 标签：javascript, line, d3.js, transition

我有我的折线图，有 2 条线。绘制我的折线图的数据是从 .csv 文件中提取的。

谁能解释我如何从一个空图表开始，当我单击一个按钮时，我的线条会在图表上显示动画？

提前致谢！！

var button=d3.select("#button");

```
var margin = {top: 30, right: 20, bottom: 50, left: 60},
width = 700 - margin.left - margin.right,
height = 300 - margin.top - margin.bottom;

var parseDate = d3.time.format("%d-%b-%y").parse;

//treats value passed to it as a time/date
//OUTPUT RANGE
var x = d3.time.scale()
    .range([0, width]);

//OUTPUT RANGE  
var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis().scale(x)
    .orient("bottom")
    .ticks(5);

var yAxis = d3.svg.axis().scale(y)
    .orient("left")
    .ticks(5);

//assigns coordinates for each piece of data    
var valueline = d3.svg.line()
    .interpolate("linear")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

//second line data
var valueline2 = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.open); });

//create area for 'area' below line 
var area = d3.svg.area()
    .x(function(d) { return x(d.date); })
    .y0(height)
    .y1(function(d) { return y(d.close); });    

//creates area to draw graph    
var svg = d3.select("body")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
//groups content    
.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

function make_x_axis() {
    return d3.svg.axis()
        .scale(x)
        .orient("bottom")
        .ticks(5)
}

function make_y_axis() {
    return d3.svg.axis()
        .scale(y)
        .orient("left")
        .ticks(30)
}

// csv callback function
d3.csv("myData2.csv", function(data) {
    data.forEach(function(d) {
    d.date = parseDate(d.date);
    //+ operator sets any 'close' values to nuneric
    d.close = +d.close;
    d.open = +d.open; 
```

});

```
//INPUT DOMAINS
//.extent() returns min and max values of argument
x.domain(d3.extent(data, function(d) { return d.date; }));
//returns max of whichever set of data is bigger
y.domain([0, d3.max(data, function(d) { return Math.max(d.close, d.open); })]);

//draws lines
//passes the valueline array to path object
svg.append("path") // Add the valueline path.
    .attr("class", "line")
    //adds dashed line
    .style("stroke-dasharray", ("5, 9")) // <== This line here!!
    .attr("d", valueline(data));

button.on("click", function() { 
    svg.append("path")      // Add the valueline2 path. 
        .attr("class", "line2")
        .transition()
        .attr("d", valueline2(data));
    })

svg.append("g") // Add the X Axis
    .attr("class", "x axis")
    //moves x axis to bottom of graph
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

//text label for x-axis 
svg.append("text") // text label for the x axis
    .attr("transform", "translate(" + (width / 2) + " ," + (height + margin.bottom - 5 ) + ")")
    .style("text-anchor", "middle")
    .text("Date");

svg.append("g") // Add the Y Axis
    .attr("class", "y axis")
    .call(yAxis);

//text label for y-axis 
svg.append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 0 - margin.left)
    .attr("x",0 - (height / 2))
    //adds extra left padding as original y pos = 0
    .attr("dy", "1em")
    .style("text-anchor", "middle")
    .text("Value");

//adding a title to the graph
svg.append("text")
    .attr("x", (width / 2))
    .attr("y", 0 - (margin.top / 2))
    .attr("text-anchor", "middle")
    .style("font-size", "16px")
    .style("text-decoration", "underline")
    .text("Me Graph Larry");

//draw x axis grid  
svg.append("g")
    .attr("class", "grid")
    .attr("transform", "translate(0," + height + ")")
    .call(make_x_axis()
    .tickSize(-height, 0, 0)
    .tickFormat("")
)

//draw y axis grid
svg.append("g")
    .attr("class", "grid")
    .call(make_y_axis()
    .tickSize(-width, 0, 0)
    .tickFormat("")
)

});<!--d3.csv close--> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T15:59:04.263

您需要为动画设置一个合理的起始值：

```
var startvalueline2 = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(0);      })

button.on("click", function() { 
    svg.append("path")                     // Add the valueline2 path. 
        .attr("class", "line2")
        .attr("d", startvalueline2(data)); // set starting position
        .transition()
        .attr("d", valueline2(data));      // set end position
}); 
```

您还可以查看 Mike 的[路径转换页面](http://bost.ocks.org/mike/path/)。了解如何在使用`svg:path`.

# php - 向 PHP 发出 AJAX 请求时导致 500 内部服务器错误的原因是什么？

> ID：13955791
> 
> 赞同：3
> 
> 时间：2012-12-19T15:34:18.760
> 
> 标签：php, jquery, ajax

我收到内部服务器错误，状态 500，我不知道如何排除故障。我为 ajax 调用添加了错误捕获，但并没有告诉我太多。如何添加代码以了解请求文件中发生的情况？我试过做，`var_dump()`但什么也没发生。

```
 $('#createpanelbutton').live('click', function(){

        var panelname = $('#panelname').val();
        var user_cat = $('#user_cat').val();
        //var whocan = $('#whocan').val();
        var errors='';
        if(panelname=='')
            errors+='Please enter a Brag Book name.<br/>';
        if(user_cat=='0')
            errors+='Please select a category.<br/>';
        if(errors!=''){
            $('#panel_errors2').html('<span class="panel_brag_errors">'+errors+'</span>');
            return false;
        }else{

         $('#createpanelbutton').val('Creating Brag Book...');
            $.ajax({
                async:false,
                dataType:'json',
                type: 'POST',
                url:baseurl+'createpanel.php',
                error:function(data,status,jqXHR){ alert("handshake didn't go through")},
                data:'name='+encodeURIComponent(panelname)+'&category='+encodeURIComponent(user_cat)+'&collaborator='+encodeURIComponent('me'),
                success:function(response){
                    if(response.status=='success')
                        location.href=response.url;
                    if(response.status=='failure')
                        $('#panel_errors2').html('<span class="panel_brag_errors">'+response.message+'</span>');
                }
            });
        }
    }); 
```

对 php 文件 createpanel.php 的 Ajax 调用：

```
 <?php

include_once('s_header2.php');

if($_POST){

    if($_POST['name'] == ''){
            $msg = "Please enter Brag Book name.";
            $result = array("status"=>'failure', "message"=>$msg);
    }elseif($_POST['category'] == ''){
            $msg = "Please select category.";
            $result = array("status"=>'failure', "message"=>$msg);
    }else{

        $db = Core::getInstance();
        $dbUp = $db->dbh->prepare("SELECT id FROM ".USERS_PANEL." WHERE user_id = :uID and title = :tit");         
        $result = '2';
        $dbUp->execute(array(':uID'=>$_SESSION['sesuid'],':tit'=>$_POST['name']));
        $result = '3';
        $numrows = $dbUp->rowCount();
        $result = '4';
        if($numrows == 0){
         $result = '5';
        $dbIn = $db->dbh->prepare("INSERT INTO ".USERS_PANEL." (`user_id`,`title`,`category_id`,`desc`,`type`,`friend_id`) VALUES (?, ?, ?, ?, ?, ?)");

         $dbIn->execute(array($_SESSION['sesuid'],$_POST['name'],$_POST['category'],$_POST['panel_desc'],$_POST['collaborator'],$_POST['jj']));

         $lid = $db->dbh->lastInsertId();            
        //header("Location: ".BASE_URL.addslashes($_POST['bname'])."-".$lid."/");

        $panelurl=BASE_URL.$_POST['name']."-".$lid."/";
        $result = array("status"=>'success', "url"=>$panelurl, "name"=>$_POST['name'], "id"=>$lid);

        }else{              
            $result = array("status"=>'failure', "message"=>'You already have a Brag Book with that name.');
        }
    }

}

echo json_encode($result) ;die;

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:40:56.467

内部服务器错误是众多[HTTP 状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)之一，其来源在服务器端（最有可能是 PHP）。

检查您的网络服务器日志。您的 500 错误的根源在那里:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:39:37.690

您的 ajax 请求未发送此帖子变量：`$_POST['panel_desc']`

# php - Symfony 中的功能测试：如何让匹配跨越多行？

> ID：13955796
> 
> 赞同：0
> 
> 时间：2012-12-19T15:34:31.867
> 
> 标签：php, json, web-services, symfony-1.4, functional-testing

我正在为 Symfony 中的 json api 构建一些功能测试。

使用`sfTestFunctional`对象来测试我的结果，我会尝试验证以下响应：

```
{
    "result": true,
    "content": [
           "one",
           "two"
    ]
} 
```

有类似的东西：

```
$browser = new sfTestFunctional(new sfBrowser());

$browser->
    get('/hi')->
    with('response')->
    begin()->
    isStatusCode(200)->
    matches('/result\"\: true/')->
    matches('/one.*two/m')->
end() 
```

现在这就是我得到的：

```
ok 1 - status code is 200
ok 2 - response content matches regex /result\\: true/"
not ok 3 - response content matches regex /one.*two/m 
```

当然，我做错了什么。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:52:46.863

正则表达式失败。

您应该使用包含*换行符*[的](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)[*dotall*](http://php.net/manual/en/reference.pcre.pattern.modifiers.php) [(PCRE_DOTALL)](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)[标志`s`](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)*。*

 **> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。

所以：

```
$browser->
    get('/hi')->
    with('response')->
    begin()->
    isStatusCode(200)->
    matches('/result\"\: true/')->
    matches('/one.*two/sm')->
end() 
```

否则，您可以进行两个不同的测试：

```
$browser->
    get('/hi')->
    with('response')->
    begin()->
    isStatusCode(200)->
    matches('/result\"\: true/')->
    matches('/\"one\"')->
    matches('/\"two\"')->
end() 
```**

# mysql - 表中的双重计数

> ID：13955799
> 
> 赞同：3
> 
> 时间：2012-12-19T15:34:42.100
> 
> 标签：mysql, sql

我有一个表用户：

```
user_id    name
1          John
2          Dan
3          Jane
4          Sophie
5          Jodie 
```

然后我有一个名为 associates 的表：

```
user_id    assoc_id
1          2
1          3 
3          4
3          1
3          5
4          1
5          1
5          2 
```

我想要做的是显示每个用户有多少关联，或者没有

所以，结果会显示

```
user_id    Name     Number of Associates
1          John     2
2          Dan      0
3          Jane     3
4          Sophie   1
5          Jodie    2 
```

我正在尝试的工作但没有显示那些 0

这是我正在尝试的，我如何得到0？

```
SELECT u.user_id, u.name, count(a.user_id) as howmany from users u
join associates a on a.user_id = u.user_id
group by u.user_id order by u.user_id asc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:37:24.567

你需要一个左外连接：

```
SELECT u.user_id, u.name, count(a.user_id) as howmany 
FROM users u LEFT OUTER JOIN associates a 
ON a.user_id = u.user_id
GROUP BY u.user_id 
ORDER BY u.user_id ASC 
```

将`LEFT OUTER JOIN`包括第一个表的每一行，即使它们不存在于连接表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:47:57.050

试试这个 ：

```
 SELECT u.user_id, 
    u.name, 
    count(a.user_id) as howmany 
    FROM users u 
    LEFT OUTER JOIN associates a 
    ON a.user_id = u.user_id
    GROUP BY u.user_id 
    ORDER BY u.user_id ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:37:49.680

尝试使用左连接而不是内连接，这应该选择没有相应关联的行。

```
SELECT u.user_id, u.name, count(a.user_id) as howmany 
from users u
left join associates a 
  on a.user_id = u.user_id
group by u.user_id 
order by u.user_id asc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:48:57.550

这也适用于严格的规则（如果我没有犯任何错字）：

```
SELECT   users.*, ISNULL(associatesCount.AssocCount, 0) AS AssocCount
FROM    users
LEFT JOIN (
        SELECT user_id, COUNT(*) AS AssocCount
        FROM associates
        GROUP BY user_id
        ) AS associatesCount
        ON users.user_id = associatesCount.user_id 
```

# java - 在任何地方访问 HttpServletRequest

> ID：13955806
> 
> 赞同：0
> 
> 时间：2012-12-19T15:35:03.807
> 
> 标签：java, spring, hibernate, open-session-in-view

我曾经有一个基于 JSF 2 应用程序 cookie 的对话过滤器中的打开会话。现在我想建立相同的机制，但与技术无关。重用一些代码，我在一个扩展了[OncePerRequestFilter](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html)的类中编写了这个：

```
@Override
protected void doFilterInternal(HttpServletRequest request,
        HttpServletResponse response, FilterChain filterChain)
        throws ServletException, IOException {

    UUID conversationId = lookupConversationOrCreateIfNecessary(request,
            response);

    log.debug("Binding conversation '{}' to request '{}'", conversationId,
            request);
    bindConversation(conversationId, request);

    try {
        filterChain.doFilter(request, response);
    } finally {
        log.debug("Unbinding conversation '{}' from request '{}'",
                conversationId, request);
        unbindConversation(conversationId, request);
    }

} 
```

现在，当我到达时，`bindConversation(conversationId, request)`我只需添加一个请求属性，该属性指向映射到 Hibernate [Session](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Session.html)的 conversationId 。

无论如何，在 JSF 中，我可以使用它来访问当前请求并使用`FacesContext.getCurrentInstance().getExternalContext().getRequest()`它实现[CurrentSessionContext](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/context/spi/CurrentSessionContext.html)。但是在普通的 servlet 中，我如何以编程方式访问当前请求？

注意：我一直在阅读 OncePerRequestFilter javadocs，我发现了这个：

> 从 Servlet 3.0 开始，过滤器可以作为 REQUEST 或 ASYNC 调度的一部分被调用，这些调度发生在单独的线程中。可以在 web.xml 中配置过滤器是否应该参与异步调度。但是，在某些情况下，servlet 容器采用不同的默认配置。因此，子类可以重写方法 shouldNotFilterAsyncDispatch() 以静态声明它们 [原文如此] 是否确实应该在两种类型的调度期间被调用一次，以提供线程初始化、日志记录、安全性等。这种机制补充而不是取代在 web.xml 中使用调度程序类型配置过滤器的需要。

[那么，使用ThreadLocal](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)来实现我想要的会很危险吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:51:41.203

正如您在问题中提到的那样：使用 ThreadLocal 似乎是一个不错的选择。我不明白为什么一旦您将过滤器用于 REQUEST 和 ASYNC 就会不安全。

**编辑**

```
@Override
protected void doFilterInternal(HttpServletRequest request,
                                HttpServletResponse response, FilterChain filterChain)
        throws ServletException, IOException {

    UUID conversationId = lookupConversationOrCreateIfNecessary(request,
            response);

    log.debug("Binding conversation '{}' to request '{}'", conversationId,
            request);

    ConversationHolder.setId(conversationId);

    bindConversation(conversationId, request);

    try {
        filterChain.doFilter(request, response);
    } finally {
        log.debug("Unbinding conversation '{}' from request '{}'",
                conversationId, request);
        ConversationHolder.clear();
        unbindConversation(conversationId, request);
    }

}

@Override
protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {
    return false; //to be sure both REQUEST and ASYNC are filtered
} 
```

和 ConversationHolder

```
public class ConversationHolder extends ThreadLocal<UUID>{

    private static ConversationHolder INSTANCE = new ConversationHolder();

    public static void setId(UUID conversationId){
          INSTANCE.set(conversationId);
    }

    public static UUID getId(){
        return INSTANCE.get();
    }

    public static void clear(){
        INSTANCE.remove();
    }

} 
```

由于 conversationId 是一个局部变量，它不会在请求之间共享。

由于 ConversationHolder 是一个 ThreadLocal，因此您在 doFilter(...) 期间从中获得的值将是正确的。（除非您在请求处理期间手动创建新线程，但这不是推荐的设计）

# javascript - 发布和获取相同的 jquery 请求

> ID：13955811
> 
> 赞同：4
> 
> 时间：2012-12-19T15:35:17.427
> 
> 标签：javascript, jquery, ajax, django

在我的 Django 应用程序中，我希望能够发布和获取相同的 jQuery 请求。

我的 HTML：

```
 <form  method="post" id='validation_form'>
    {% csrf_token %}
        <input id='username' type="text" name="username" value=""/>
        <button type="submit">Submit</button>
    </form> 
```

JS：

```
 var username = $('#username').val()
   $.post('/auth_validate', {'username': username}, function(data) { 
   // Get Request to get something.
   } 
```

意见：

```
 def auth_validate(request):
       error = False
       if request.method == 'POST':
           username = request.POST.get('username')

           if User.objects.filter(username__exact=username).exists():
               error = 'Sorry this username is already taken' 
```

我想在我以前发布的同一个 jQuery 请求中得到“错误”。有可能这样做吗？

谢谢您的帮助。

编辑：这是我找到的解决方案。

JS：

```
 function validateForm() {
    var username = $('#username').val()
    var result=''
    $.get('/auth_validate_username/', {'result':result}, function(data){
       $.post('/auth_validate_username/', {'username': username}, function(data) { 
       $('#error_message').html(data); 
      });
    });
    return false;
    }; 
```

html:

```
 <form  method="post" onsubmit="return validateForm();">
    {% csrf_token %}
        <input id='username' type="text" name="username" value=""/>
        <div id='error_message'></div>
        <button type="submit">Submit</button>
    </form> 
```

意见：

```
 def auth_validate_username(request):
       result = ''
       if request.method == 'POST':
          username = request.POST.get('username')
          if User.objects.filter(username=username):
             result='Sorry but this name is already taken'

    return HttpResponse(result) 
```

这样我首先发布值用户名。如果用户名已经存在结果更改，然后我得到它。

诀窍是将发布请求放入获取请求中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:43:00.037

不要使用 $.post，而是使用 $.ajax 命令。它们做的事情完全相同，但 $.ajax 为您提供了更多可玩的功能。

```
$.ajax({
  type: 'POST',
  url: "/auth_validate",
  data: {
    'username': username
  },
  success: function(data){
    //There was successfully data here!
  },
  error: function(xhr, data, error){
    //An error was thrown!
  }
}); 
```

然后在此行上方添加一行将返回 403（或类似）HTTP 错误代码（我会提供它，但我不熟悉 Django 的来龙去脉）：

```
error = 'Sorry this username is already taken' 
```

这样，您的成功消息将通过成功处理程序路由，您的错误将通过错误处理程序路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:43:10.613

如果用*get*表示`GET`方法，为什么不直接在 url 参数中添加查询？

```
 var username = $('#username').val()
   $.post('/auth_validate?myvar=thevalue', {'username': username}, function(data) { 
   // Get Request to get something.
   } 
```

但也许我误解了这个问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:39:47.483

您可以返回一个 http 代码 400（错误请求）并为您的请求添加一个错误处理程序`post`，这应该可以解决问题。

我对 django 不是很熟悉，所以我只是给你一个抽象的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:40:04.840

我认为你应该看看[dajax](http://www.dajaxproject.com/) [API](http://django-dajax.readthedocs.org/en/latest/api.html)。这将完成这项工作。

# java - Java 服务器猜谜游戏 - 多客户端问题

> ID：13955812
> 
> 赞同：0
> 
> 时间：2012-12-19T15:35:20.453
> 
> 标签：java, multithreading

这是我在玩猜谜游戏时遇到的问题。基本上我想要做的是拥有一台服务器并让许多客户端连接到它。目前已经完成，我可以将客户端连接到服务器来玩游戏，猜数字游戏。问题是我希望每个单独的客户都能够玩游戏。目前该游戏正在服务器本身上进行。因此，虽然多个客户端可以加入，但每次客户端加入时游戏都会重新开始。当输入正确答案时，服务器会给客户他的分数。只是要清楚我正在运行服务器类，然后我正在运行客户端类。我希望能够在客户端类窗口而不是服务器窗口上玩游戏。这是我的代码，请您告诉我该怎么做。猜谜游戏源自java sun knock knock 教程。在这里找到[http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html) 谢谢。

客户端类

```
import java.io.*;
import java.net.*;

public class GClient {
public static void main(String[] args) throws IOException {

    Socket kkSocket = null;
    PrintWriter out = null;
    BufferedReader in = null;

    try {
        kkSocket = new Socket("127.0.0.1", 4444);
        out = new PrintWriter(kkSocket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host: taranis.");
        System.exit(1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for the connection to: taranis.");
        System.exit(1);
    }

    BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
    String fromServer;
    String fromUser;

    while ((fromServer = in.readLine()) != null) {
        System.out.println("Server: " + fromServer);
        if (fromServer.equals("Bye."))
            break;

        fromUser = stdIn.readLine();
    if (fromUser != null) {
            System.out.println("Client: " + fromUser);
            out.println(fromUser);
    }
    }

    out.close();
    in.close();
    stdIn.close();
    kkSocket.close();
}
} 
```

服务器类

```
 import java.net.*;
 import java.io.*;

public class GServer {
public static void main(String[] args) throws IOException {
    ServerSocket serverSocket = null;
    boolean listening = true;

    try {
        serverSocket = new ServerSocket(4444);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 4444.");
        System.exit(-1);
    }
    System.err.println("Started KK server listening on port 4040");
    while (listening)
    new GThread(serverSocket.accept()).start();

    serverSocket.close();
}
} 
```

协议类

```
import java.util.*;

public class GProtocol {
int guess = 0, number = new Random().nextInt(100) + 1;
int score = 10;
int guessmade = 0;
boolean gameRunning = true;
Scanner scan = new Scanner(System.in);

public String processInput(String theInput) {
    String theOutput = null;

    String ID;
    System.out.println("Please Enter your ID...");
    ID = scan.next( );

    System.out.println("Please guess the number between 1 and 100\. You have 10 guesses. Your score is however many guesses you have left");

    while (guess != number)
    {

        try {

        if ((guess = Integer.parseInt(scan.nextLine())) != number) {

          System.out.println(guess < number ? "Higher..."  : "Lower...");
          score = score - 1; // here the score variable has one value taken away form it each time the user misses a guess
          guessmade = +1; // here the guess made variable is given +1 variable
        }
        else {
          System.out.println("Correct!");

        }

        }

      catch (NumberFormatException e) {
        System.out.println("Please enter valid numbers! '");

      }   

    }   

    theOutput = ID + "  your score is " + score ; // here the score is returned

    return theOutput;}} 
```

线程类

```
import java.net.*;
import java.io.*;

public class GThread extends Thread {
private Socket socket = null;

public GThread(Socket socket) {
super("GMultiServerThread");
this.socket = socket;
}

public void run() {

try {
    PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(
                new InputStreamReader(
                socket.getInputStream()));

    String inputLine, outputLine;
   GProtocol kkp = new GProtocol();
    outputLine = kkp.processInput(null);
    out.println(outputLine);

    while ((inputLine = in.readLine()) != null) {
    outputLine = kkp.processInput(inputLine);
    out.println(outputLine);
    if (outputLine.equals("Bye"))
        break;
    }
    out.close();
    in.close();
    socket.close();

} catch (IOException e) {
    e.printStackTrace();
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:02:47.040

In Protocol class, you write Messages to `System.out`. The instance of the `Protocol` class is executed in the environment of the server, thus the output is printed to the server's output. To show the output in the client's console, you'll have to send the messages via the socket to the client and print it there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:04:35.910

首先，最好的做法是[**实现** `Runnable`而不是**扩展** `Thread`](https://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread)。这不一定能解决你的问题。

现在，令人困惑的是您实际上想要实现的目标。您说您希望多个客户端玩游戏，但现在每个连接到服务器的客户端都开始一个新游戏。我认为这是正确的做法，但您似乎希望拥有一个游戏实例和多个客户端同时玩它。这是非常违反直觉的，但是如果您简单地创建`GProtocol`类的单个实例，将其传递给多个客户端并使用`synchronize`关键字来确保线程安全地访问其数据，您就可以实现它。

# firebase - Firebase 存储如何存储和检索图像

> ID：13955813
> 
> 赞同：286
> 
> 时间：2012-12-19T15:35:23.037
> 
> 标签：firebase, firebase-realtime-database, firebase-storage

如何在 Firebase 上存储和查看图像？

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2012-12-19T17:04:16.403

**更新 (20160519)**：*Firebase 刚刚发布了一项名为[Firebase Storage](https://firebase.google.com/docs/storage/)的新功能。这允许您将图像和其他非 JSON 数据上传到专用存储服务。我们强烈建议您使用它来存储图像，而不是将它们作为 base64 编码数据存储在 JSON 数据库中。*

你当然可以！根据图像的大小，您有几个选择：

**1\. 对于较小的图像（10mb 以下）**

我们在这里有一个示例项目： [https ://github.com/firebase/firepano](https://github.com/firebase/firepano)

一般的方法是在本地加载文件（使用 FileReader），这样您就可以将其存储在 Firebase 中，就像存储任何其他数据一样。由于图像是二进制文件，因此您需要获取 base64 编码的内容，以便将其存储为字符串。或者更方便的是，您可以将其存储为[data: url](http://en.wikipedia.org/wiki/Data_URI_scheme)然后准备作为 img 标签的 src 放入（这就是示例所做的）！

**2.对于更大的图像**

Firebase 确实有 10mb（utf8 编码的字符串数据）的限制。如果您的图像更大，则必须将其分成 10mb 的块。您是对的，尽管 Firebase 针对频繁更改的小字符串而不是数兆字节的字符串进行了优化。如果您有大量的大型静态数据，我肯定会推荐 S3 或 CDN。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-03-27T21:17:32.420

是的，您可以在 Firebase 中存储和查看图像。您可以使用文件选择器来获取图像文件。然后你可以随心所欲地托管图像，我更喜欢 Amazon s3。托管图像后，您可以使用为图像生成的 URL 显示图像。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-03-26T04:39:49.083

我最终自己将图像存储为 base64 格式。当从 firebase 回调时，我将它们从它们的 base64 值转换。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-12-21T05:41:26.113

您还可以使用名为的服务`Filepicker`将您的图像存储到他们的服务器和[Filepicker](https://www.filestack.com/docs/)，现在称为 Filestack，将为您提供图像的 url。您可以将 URL 存储到 Firebase。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-29T16:55:58.517

有几种方法我首先按照 Grendal2501 的方法进行。然后我做了类似于 user15163 的操作，您可以将图像 URL 存储在 firebase 中并将图像托管在您的 firebase 主机或 Amazon S3 上；

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-16T10:15:43.517

在 JSON 中使用 Base64 字符串会非常繁重。解析器必须做很多繁重的工作。目前，Fresco 只支持 base 支持 Base64。最好在 Amazon Cloud 或 Firebase Cloud 上放一些东西。并获取图像作为 URL。这样您就可以使用 Picasso 或 Glide 进行缓存。

# html - 是否可以在电子邮件中使用渐变？

> ID：13955814
> 
> 赞同：16
> 
> 时间：2012-12-19T15:35:24.643
> 
> 标签：html, css, linear-gradients

是否可以使用 CSS 在时事通讯电子邮件中的元素上使用渐变？是否支持完整的属性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T15:42:29.430

简而言之，没有。

电子邮件客户端很少支持 HTML5 或 CSS3，因此它会中断任何不支持的客户端。

你总是可以有一个后备，但加载时间不会改变太多，添加 CSS3 只是添加更多代码来跟踪。

我建议使用图像标签并将图像托管在您的服务器上，如果您真的必须使用渐变的话。

对于电子邮件，通常越简单越好。就个人而言，我更喜欢接收纯文本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-06-11T12:06:45.360

如今，电子邮件客户端对 CSS 渐变的支持得到了改进，这样的事情在大多数情况下都可以使用：

```
background-image: linear-gradient(to top, rgba(0, 0, 0, 0), transparent); 
```

Windows 上的 Outlook 不支持，但您可以使用 VML（矢量标记语言）使其也可以在那里工作，即：

```
<!--[if gte mso 9]>
  <v:rect xmlns:v="urn:schemas-microsoft-com:vml" fill="true" stroke="false" style="width:600px;">
  <v:fill type="gradient" color="#0072FF" color2="#00C6FF" angle="90" />
  <v:textbox style="mso-fit-shape-to-text:true" inset="0,0,0,0">            
  <div><![endif]-->
  Text over gradient
<!--[if gte mso 9]></div></v:textbox></v:rect><![endif]-->
```

我为 Maizzle 框架编写了[电子邮件渐变](https://maizzle.com/guides/css-background-gradients-html-emails/)指南，它还展示了如何在 Outlook 中进行正文背景渐变，以及其他一些技巧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-03T17:02:29.473

FWIW，这是我在电子邮件中支持 CSS 的首选资源：[https ://www.campaignmonitor.com/css/](https://www.campaignmonitor.com/css/)

它没有背景渐变的具体信息，因为这属于`background-image`属性。我的预感是电子邮件客户端之间存在不一致的支持（如果有的话），因为它是 CSS 的一个相当功能。我唯一的犹豫是我认为背景渐变被视为`background-image`，除了 Outlook 之外，它似乎有不错的支持。

# android - 如何在 android 应用程序中使用图像自定义标题栏？

> ID：13955815
> 
> 赞同：2
> 
> 时间：2012-12-19T15:35:29.993
> 
> 标签：android, sdk, titlebar

我会使用图标和文本自定义应用程序的每个活动的标题栏。我尝试了一些方法，但它们不起作用。有谁能够帮我？

这是我的代码示例：

```
public class TitleBar extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.activity_main);

    if ( customTitleSupported ) {
      getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar);
    }
    // user can also set color using “Color” and then “Color value constant”
    // myTitleText.setBackgroundColor(Color.GREEN);
  }
} 
```

在 xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

  <TextView
    android:id="@+id/myTitleText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="appuntiiiiiii" />

</LinearLayout>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:45:40.690

我知道这可能对您的需求有点过分，但如果您真的想要一些很酷的东西，您应该尝试实现 ActionBar。它可以从 API11 官方获得，但您可以实现[ActionBarSherlock](http://actionbarsherlock.com/)，它的外观和工作方式几乎相同。我喜欢这个！

至于您的代码，没有 ImageView 那么您怎么可能显示图像。在 TextView 之前需要一个 imageView

# c# - 为什么每个 Char 静态“Is...”都有字符串重载，例如 IsWhiteSpace(string, Int32)？

> ID：13955816
> 
> 赞同：15
> 
> 时间：2012-12-19T15:35:32.647
> 
> 标签：c#

[http://msdn.microsoft.com/en-us/library/1x308yk8.aspx](http://msdn.microsoft.com/en-us/library/1x308yk8.aspx)

这允许我这样做：

```
var str = "string ";
Char.IsWhiteSpace(str, 6); 
```

而不是：

```
Char.IsWhiteSpace(str[6]); 
```

似乎不寻常，所以我查看了反射：

```
[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
public static bool IsWhiteSpace(char c)
{
    if (char.IsLatin1(c))
    {
        return char.IsWhiteSpaceLatin1(c);
    }
    return CharUnicodeInfo.IsWhiteSpace(c);
}

[SecuritySafeCritical]
public static bool IsWhiteSpace(string s, int index)
{
    if (s == null)
    {
        throw new ArgumentNullException("s");
    }
    if (index >= s.Length)
    {
        throw new ArgumentOutOfRangeException("index");
    }
    if (char.IsLatin1(s[index]))
    {
        return char.IsWhiteSpaceLatin1(s[index]);
    }
    return CharUnicodeInfo.IsWhiteSpace(s, index);
} 
```

三件事让我印象深刻：

1.  为什么只对上限进行限制检查？抛出`ArgumentOutOfRangeException`, 而低于 0 的索引将给出字符串的标准`IndexOutOfRangeException`
2.  我已经阅读了一般性[`SecuritySafeCriticalAttribute`](http://msdn.microsoft.com/en-us/library/system.security.securitysafecriticalattribute(v=vs.95).aspx)的问题，但仍然不清楚它在这里做什么以及它是否与上限检查相关联。
3.  `TargetedPatchingOptOutAttribute``Is...(char)`在其他方法上不存在。例子`IsLetter`等`IsNumber`_

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T15:47:23.073

因为不是每个字符都适合一个`C#`字符。例如，`""`需要 2 个 C# ，并且仅通过重载`chars`就无法获得有关该字符的任何信息。`char`有了`String`索引，这些方法可以查看索引`i`处的字符是否为高代理`char`，然后读取`char`下一个索引的低代理，[根据算法将它们相加](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)，并检索有关代码点的信息[`U+20000`](http://www.fileformat.info/info/unicode/char/20000/index.htm)。

这就是 UTF-16 可以编码 100 万个不同代码点的方式，它是一种可变宽度编码。编码一个字符需要 2-4 个字节，或 1-2 个 C# 字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T15:49:02.493

> 为什么只对上限进行限制检查？

它没有。它执行*无符号*比较，因此每个负数都将比较大于长度并引发相应的异常。这恰好没有被准确地反编译。

# jquery - 如何在 DotNetNuke 中安装 jquery 插件？

> ID：13955819
> 
> 赞同：4
> 
> 时间：2012-12-19T15:35:53.170
> 
> 标签：jquery, jquery-plugins, dotnetnuke, dotnetnuke-6

我需要弄清楚如何将任何新的 jQuery 插件安装到 DotNetNuke (DNN)

我对 jQuery 非常熟悉，而且我知道如何引用源文件等。

我需要弄清楚的是在代码中包含`<script>`标签以包含新插件的位置。

目前我正在做的是在任何给定页面的 HTML 模块中包含插件脚本/CSS 标记。

我想在文件的页眉或页脚中包含 js/cs。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T00:02:54.783

有几个选项。对于 DNN 6.x 或更高版本，您通常应该使用客户端资源管理 API 来注册文件。这实际上非常简单，因为您只需要注册一个控件：

```
<%@ Register TagPrefix="dnn" Namespace="DotNetNuke.Web.Client.ClientResourceManagement" Assembly="DotNetNuke.Web.Client" %> 
```

然后包含特定文件：

```
<dnn:DnnJsInclude runat="server" FilePath="jquery.cycle.min.js" PathNameAlias="SkinPath" /> 
```

我们通常通过皮肤来执行此操作，就像我们为大多数网站做自定义皮肤一样，或者，如果我们正在构建需要插件的自定义模块，我们将在模块的适当 ascx 文件中执行此操作。

如果您只需要特定页面上的插件而不是特定模块，则添加它的最佳位置是通过页面设置 -> 高级 -> 页面标题标签。

您可以在此处了解更多信息：http: [//www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx)

# sql - UNION 子查询的奇怪行为，为什么？

> ID：13955828
> 
> 赞同：1
> 
> 时间：2012-12-19T15:36:40.337
> 
> 标签：sql, postgresql, navicat

以下两个查询返回相同的信息；但是，**第一个需要 1.1 秒**才能完成，**第二个需要 0.06 秒**。

此表有**198,810 条记录**并`"Contacts"."ReqID"`已编入索引。

1.  为什么我看到（看似）不太复杂的查询对性能造成了如此大的影响？
2.  为什么 UNION 子查询会加快这个过程？

****编辑****

我已经快速连续地运行了两个查询，并且没有看到性能变化。

* * *

## 查询 1

```
SELECT
    "Contacts"."ContactID",
    "Contacts"."ReqID"
FROM
    "Contacts"
WHERE
    "Contacts"."ReqID" = 2426; 
```

****编辑****

解释分析

```
Index Scan using "Contacts_ReqID_idx" on "Contacts"  (cost=0.00..30.08 rows=11 width=78) (actual time=0.076..0.115 rows=14 loops=1)
  Index Cond: ("ReqID" = 2426)
Total runtime: 0.159 ms 
```

**1.1秒**返回**14条记录**。

* * *

## 查询 2

```
SELECT
    "T1"."ContactID",
    "T1"."ReqID"
FROM
    (
        SELECT
            "Contacts"."ContactID",
            "Contacts"."ReqID"
        FROM
            "Contacts"
        WHERE
            "Contacts"."ReqID" = 2426
        UNION
        SELECT
            "Contacts"."ContactID",
            "Contacts"."ReqID"
        FROM
            "Contacts"
        WHERE
            "Contacts"."ReqID" = 2426
    ) AS "T1"
ORDER BY
    "ReqID" 
```

****编辑****

解释分析

```
Sort (cost=61.74..61.80 rows=22 width=100) (actual time=0.313..0.329 rows=14 loops=1)
  Sort Key: "Contacts"."ReqID"
  Sort Method: quicksort  Memory: 26kB
  ->  HashAggregate  (cost=60.81..61.03 rows=22 width=78) (actual time=0.266..0.285 rows=14 loops=1)
        ->  Append  (cost=0.00..60.37 rows=22 width=78) (actual time=0.063..0.201 rows=28 loops=1)
              ->  Index Scan using "Contacts_ReqID_idx" on "Contacts"  (cost=0.00..30.08 rows=11 width=78) (actual time=0.059..0.106 rows=14 loops=1)
                Index Cond: ("ReqID" = 2426)
              ->  Index Scan using "Contacts_ReqID_idx" on "Contacts"  (cost=0.00..30.08 rows=11 width=78) (actual time=0.006..0.024 rows=14 loops=1)
                Index Cond: ("ReqID" = 2426)
Total runtime: 0.410 ms 
```

**0.06 秒**返回**14 条记录**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:44:49.497

事实证明，Navicat（我用来访问和管理我的数据库的软件）正在运行一些额外的代码，允许在运行简单`SELECT * FROM [Table]`语句时就地编辑数据。以下是我从支持代表处收到的电子邮件。

* * *

> 尊敬的 [Navicat 用户]，
> 
> 谢谢你的电邮。请注意，为了获取列信息并允许之后更新数据，当查询是简单的 SELECT 查询时，Navicat 将运行额外的 SQL。使用 UNION，Navicat 不允许用户更新查询结果中的任何数据。
> 
> ...
> 
> 此致
> Mayho Ho
> Navicat 支持中心

# shell - 如何基于命令行自动化应用程序？

> ID：13955830
> 
> 赞同：1
> 
> 时间：2012-12-19T15:36:51.643
> 
> 标签：shell, batch-file, automated-tests

我有一个基于 Java 的应用程序，我使用命令提示符运行它。我目前正在手动测试它。我想自动化这个过程。我应该使用什么工具或脚本？

例如：

1.  首先，我将运行`java`命令来运行 .java 文件。
2.  我的申请将为我提供 5 个选项。例如
    我。添加
    ii。减去
    三。乘以四。划分。

它应该选择其中一个选项并添加数字并使用预期结果验证结果。所有这些都将使用命令提示符完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:44:19.700

我意识到您要求的是命令提示符解决方案，但您确实应该研究 JUnit。对于更多种类的测试条件，这将是一个更易于维护的解决方案。如果使用命令行，则必须解析所有输入和输出。为了真正测试您的代码，您不必经过命令行的中间部分（stdin、stdout）；您应该拥有运行 Java 代码的 Java 代码，因为它可以访问变量。

如果您真的打算使用命令行，则必须向我们提供有关程序运行方式的更多详细信息。这只是在黑暗中拍摄：

`inputs.txt` （这些是将提供给您的程序的输入）

```
Add
4
6 
```

`test.bat`

```
@ECHO OFF
:: I just assume that your program prompts for input and waits for stdin
java YourMainClass < inputs.txt > testOutput.txt 
:: Program prompts for an operation; "Add" is read from inputs.txt
:: Program prompts for values; "4" and "6" are read from inputs.txt
:: Program prints out the result, which is redirected to testOutput.txt
:: Now you have to read in the testOutput.txt file and look at the last line
FOR /F %%i IN (testOutput.txt) DO SET RESULT=%%i
:: The variable RESULT now contains your program's answer
:: Create a variable to compare your actual result with the expected result
SET EXPECTED=10
IF %RESULT% == %EXPECTED% ECHO "You were correct"
IF NOT %RESULT% == %EXPECTED% ECHO "You were not correct" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:51:23.343

标准输入可以输入到 java 应用程序中。如果您使用的是 bash，则可以按以下方式完成：

```
java myapp.java < test1 
```

其中 myapp.java 是您的应用程序的主方法，而 test1 是您的测试输入（一个普通的旧文本文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:39:55.397

您需要使用批处理文件。将您的命令放在记事本文件中并将其另存为`.bat`.

如果它们不是本机批处理命令，尽管您可能需要更改一些内容，但您需要在我确认之前发布命令。

# sql-server - SQL Server 查询的执行时间成倍增加

> ID：13955831
> 
> 赞同：2
> 
> 时间：2012-12-19T15:36:58.983
> 
> 标签：sql-server, performance, execution-time

在运行连接多个表的查询时，我目前遇到了一些性能问题。主表有 1.7 亿条记录，非常大。

我遇到的是，当我使用 top 1000 子句运行查询时，结果是即时的。但是，当我将其增加到最高 8000 时，查询很容易运行 15 分钟（然后我将其杀死）。通过反复试验，我发现引爆点是 Top 7934（像魅力一样工作）和 Top 7935（永远运行）

是否有人认识到这种行为并看到我做错了什么？也许我的查询在某些方面有问题。

提前致谢

```
SELECT  top 7934 h.DocIDBeg
    ,h.[Updated By]
    ,h.Action
    ,h.Type
    ,h.Details
    ,h.[Update Date]
    ,h.[Updated Field Name]
    ,i.Name AS 'Value Set To'
    ,COALESCE(i.Name,'') + COALESCE(h.NewValue, '') As 'Value Set To'
    ,h.OldValue
FROM
    (SELECT  g.DocIDBeg
            ,g.[Updated By]
            ,g.Action
            ,g.Type
            ,g.Details
            ,g.[Update Date]
            ,CAST(g.details as XML).value('auditElement[1]/field[1]/@name','nvarchar(max)') as 'Updated Field Name'
            ,CAST(g.details as XML).value('(/auditElement//field/setChoice/node())[1]','nvarchar(max)') as 'value'
            ,CAST(g.details as XML).value('(/auditElement//field/newValue/node())[1]','nvarchar(max)') as 'NewValue'
            ,CAST(g.details as XML).value('(/auditElement//field/oldValue/node())[1]','nvarchar(max)') as 'OldValue'
    FROM(
            SELECT a.ArtifactID
                  ,f.DocIDBeg
                  ,b.FullName AS 'Updated By'
                  ,c.Action
                  ,e.ArtifactType AS 'Type'
                  ,a.Details
                  ,a.TimeStamp AS 'Update Date'
            FROM [EDDS1015272].[EDDSDBO].[AuditRecord] a
                        LEFT JOIN [EDDS1015272].[EDDSDBO].AuditUser b
                            ON a.UserID = b.UserID
                        LEFT JOIN [EDDS1015272].[EDDSDBO].AuditAction c
                            ON a.Action = c.AuditActionID
                        LEFT JOIN [EDDS1015272].[EDDSDBO].[Artifact] d
                            ON a.ArtifactID = d.ArtifactID
                        LEFT JOIN [EDDS1015272].[EDDSDBO].[ArtifactType] e
                            ON d.ArtifactTypeID = e.ArtifactTypeID
                        INNER JOIN [EDDS1015272].[EDDSDBO].[Document] f
                            ON a.ArtifactID = f.ArtifactID
            ) g
    ) h
LEFT JOIN [EDDS1015272].[EDDSDBO].[Code] i
ON h.value = i.ArtifactID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:01:53.213

我以前经常使用数据仓库，并且经常遇到类似的问题。根本原因显然是内存使用，就像这里已经提到的那样。如果您确实需要查询所有 1.7 亿条记录，我认为重写查询不会有太大帮助，而且我认为您等待更多的内存资源是不行的。所以这只是我的一个简单的解决方法：

尝试拆分您的查询。例如，首先从连接到 AuditUser 表的 AuditRecord 记录表中查询您需要的所有数据，并将结果存储在另一个（例如临时表）表中。然后将这个新表与 Artifact 表连接起来，依此类推。在这种情况下，这些步骤将需要更少的内存，然后运行整个查询并将其挂起。因此，从长远来看，您将不会有一个查询，而是一个易于跟踪的脚本，因为您可以在控制台中打印出一些状态，并且它将完成他的工作，这与永远不会结束的查询不同

还要确保你真的需要一次查询所有这些数据，因为我想不出你需要它的用例，但如果它是一个应用程序，那么你应该实现分页，如果它是一些导出功能，那么也许有是可用于批处理数据的时间线。例如每天导出数据，只查询昨天的数据。在这种情况下，您将提出增量导出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:51:19.857

“通过反复试验，我发现引爆点是 Top 7934（就像魅力一样）和 Top 7935（永远运行）”

这听起来很像泄漏。Adam Mechanic 在下面的视频中做了一个很好的内部演示。基本上顶部强制需要内存的排序。如果内存授予不足以完成操作，则其中一些会在磁盘上完成。

[https://www.youtube.com/watch?v=j5YGdIk3DXw](https://www.youtube.com/watch?v=j5YGdIk3DXw)

前往 1:03:50 观看 Adam 演示泄漏。在他的查询中，668,935 行没有溢出，但 668,936 行溢出，查询时间增加了一倍以上。

如果您有时间，请观看整个会议。非常适合性能调优！

正如@Remus 所建议的那样，也可能是转折点，但这一切都是在不知道实际计划的情况下猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:55:14.873

我认为子选择会强制服务器在应用过滤器之前获取所有内容，这将导致更多的内存使用（xlm 字段）并且很难使用像样的 qry 计划

至于奇怪的top行为：top对qry计划的生成有很大的影响。7935 可能是 1 个最佳计划的截止点，并且 sql server 在需要获取更多时会选择不同的路径。或者它可能会回到内存并在 7935 上耗尽内存

更新：

我重新设计了您的 qry 以消除嵌套选择，我并不是说它现在会变得更快，但它消除了一些未使用的字段，并且应该更容易理解和基于 qry 计划进行优化。因为我们现在不知道每张桌子的确切大小，我们几乎无法运行 qry 来测试它不可能给你最好的答案。但我可以尝试一些技巧：

第一步是检查您是否需要所有左连接，如果不需要，则将它们转换为内部连接 ​​例如：AuditUser，AuditRecord 总是可以有一个用户？

您可以尝试的另一件事是最好将较小表的数据放入 tmp 表中，并将较大的表连接到该 tmp 表，可能会消除很多要加入的记录

如果可能的话，您可以进行一些非规范化，例如将用户名放在 auditrecord 2 中，这样您就可以完全消除 AuditUser 上的联接

但这取决于您需要什么，您可以/被允许和数据/服务器

```
SELECT  top 7934 f.DocIDBeg
    ,b.FullName AS 'Updated By'
    ,c.Action
    ,e.ArtifactType AS 'Type'
    ,a.Details
    ,a.TimeStamp AS 'Update Date'
    ,CAST(a.Details as XML).value('auditElement[1]/field[1]/@name','nvarchar(max)') as 'Updated Field Name'
    ,i.Name AS 'Value Set To'
    ,COALESCE(i.Name,'') + COALESCE(CAST(a.Details as XML).value('(/auditElement//field/newValue/node())[1]','nvarchar(max)') as 'NewValue', '') As 'Value Set To'
    ,CAST(a.Details as XML).value('(/auditElement//field/oldValue/node())[1]','nvarchar(max)') as 'OldValue'
FROM [EDDS1015272].[EDDSDBO].[AuditRecord] a
                        LEFT JOIN [EDDS1015272].[EDDSDBO].AuditUser b
                            ON a.UserID = b.UserID
                        LEFT JOIN [EDDS1015272].[EDDSDBO].AuditAction c
                            ON a.Action = c.AuditActionID
                        LEFT JOIN [EDDS1015272].[EDDSDBO].[Artifact] d
                            ON a.ArtifactID = d.ArtifactID
                        LEFT JOIN [EDDS1015272].[EDDSDBO].[ArtifactType] e
                            ON d.ArtifactTypeID = e.ArtifactTypeID
                        INNER JOIN [EDDS1015272].[EDDSDBO].[Document] f
                            ON a.ArtifactID = f.ArtifactID
                        LEFT JOIN [EDDS1015272].[EDDSDBO].[Code] i
                            ON CAST(a.details as XML).value('(/auditElement//field/setChoice/node())[1]','nvarchar(max)') = i.ArtifactID 
```

# asp.net-mvc - 与 Kendo Ui Child Grid 交互

> ID：13955833
> 
> 赞同：2
> 
> 时间：2012-12-19T15:37:06.283
> 
> 标签：asp.net-mvc, kendo-ui

我目前正在使用带有层次结构视图的 MVC Kendo Grid 来显示子帐户。这是我的主网格（下面的子网格） 对于这个网格，我设置了更改事件（也在下面）。我的问题是，如何为子网格设置相同的更改功能？每个都有不同的 ID，所以我目前无法正确选择它。编辑：**我只需要所选子行中的帐户 ID**

```
 @(Html.Kendo().Grid<TRX.CRM.Dashboard.Entities.DashBoard.Accounts>()
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.Acct_FName).Width(80);
        columns.Bound(p => p.Acct_LName).Width(80);
        columns.Bound(p => p.Acct_Type).Width(90);
        columns.Bound(p => p.Acct_LastContact).Width(140);
        columns.Bound(p => p.Acct_Zip).Hidden();
        columns.Bound(p => p.ID).Hidden();

    })
       .ClientDetailTemplateId("ChildAccounts")
       .DataSource(dataSource => dataSource
        .Ajax() // Specify that the data source is of ajax type
        .Model(model => model.Id(a => a.ID))
        .Events(events => events.Error("error"))
        .Read(read => read.Action("ReadAccounts", "Accounts")) // Specify the action method and controller name
        .Destroy(destroy => destroy.Action("DeleteAccount", "Accounts"))
        .PageSize(50)
    )
    .Pageable()
    .Filterable()
    .Selectable()
    .Scrollable()
    .Sortable()
    .Events(events => events.Change("gridChange"))
    .Events(events => events.DataBound("dataBound"))
    .ToolBar(toolbar => toolbar.Template(
    @<text>
<div class="toolbar">
    <select id="FilterCategory"></select>
    <input type="search" id="Search" style="width: 230px" />
</div>
</text>
    ))
) 
```

子网格：

```
 <script id="ChildAccounts" type="text/kendo-tmpl">
    @(Html.Kendo().Grid<TRX.CRM.Dashboard.Entities.DashBoard.Accounts>()
        .Name("SubAccounts_#=ID#")
        .Columns(columns =>
        {
        columns.Bound(p => p.Acct_FName).Width(80);
        columns.Bound(p => p.Acct_LName).Width(80);
        columns.Bound(p => p.Acct_Type).Width(90);
        columns.Bound(p => p.Acct_LastContact).Width(140);
        columns.Bound(p => p.Acct_Zip).Hidden();
        columns.Bound(p => p.ID).Hidden();
        })
        .DataSource(dataSource => dataSource
            .Ajax()
            .Read(read => read.Action("ReadSubAccounts", "Accounts", new { ID = "#=ID#" }))
        )
        .Pageable()
        .Sortable()
        .Selectable()
        .ToClientTemplate()
)
</script>

 function dataBound() {
   // this.expandRow(this.tbody.find("tr.k-master-row").first());
} 
```

这是 GridChange 函数（为简洁而缩短）

```
function gridChange(e) {
    //Enable all button -Prakash Date-07/27/2012
    accountsButtons.button({ disabled: false });
    $("#nodeList").html('');
    $("#updateMessage").html('');
    $("#noteMessage").html('');
    $("#Note_Description").val('');
    kdata = this; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:10:48.893

将相同的事件声明到子网格中绝对没有问题。

```
@(Html.Kendo().Grid<TRX.CRM.Dashboard.Entities.DashBoard.Accounts>()
        .Name("SubAccounts_#=ID#")
        .Columns(columns =>
        {
             columns.Bound(p => p.Acct_FName).Width(80);
        columns.Bound(p => p.Acct_LName).Width(80);
        columns.Bound(p => p.Acct_Type).Width(90);
        columns.Bound(p => p.Acct_LastContact).Width(140);
        columns.Bound(p => p.Acct_Zip).Hidden();
        columns.Bound(p => p.ID).Hidden();
        })
        .Events(ev=>ev.Change("detailGridChange"))
        .DataSource(dataSource => dataSource
            .Ajax()
            .Read(read => read.Action("ReadSubAccounts", "Accounts", new { ID = "#=ID#" }))
        )
        .Pageable()
        .Sortable()
        .Selectable()
        .ToClientTemplate()
)

<script>
    function detailGridChange(e){
          var parentDataItem = $('#Grid').data().kendoGrid.dataItem($(this.element).closest('.k-detail-row').prev('.k-master-row'));
          alert(parentDataItem.ID);
    }
</script> 
```

# c++ - 在发布模式下构建使用 VTK 的应用时出现错误

> ID：13955835
> 
> 赞同：1
> 
> 时间：2012-12-19T15:37:13.037
> 
> 标签：c++, windows, qt, mingw, vtk

今天是个好日子！

我们正在使用`Qt 4.8`框架和`VTK`. 我们正在`C++`使用`QtCreator`和`MingW-32`编译器进行编码。在调试模式下，编译正常结束，我们可以启动并测试应用程序。但是，现在我们要构建一个发布版本，出现了疯狂的错误消息：

```
Invalid parameter passed to C runtime function.
Invalid parameter passed to C runtime function.
QWidget: Must construct a QApplication before a QPaintDevice 
```

我的伙伴用谷歌搜索了一下，发现在尝试使用 VTK 构建发布版本时这是一个相当普遍的问题。建议的解决方案是将VTK调试库的路径添加到系统路径中，在发布之前。然而，这对我们不起作用。截至目前，我们正在毫无头绪地试图完成这座建筑。

您知道解决方案可能是什么吗？

提前致谢！

干杯!

**编辑：**这是该问题的假定解决方案的链接：[假定的解决方案](http://dzenanz.wordpress.com/2011/04/05/qwidget-must-construct-a-qapplication-before-a-qpaintdevice/)

# sql - 根据字段计数

> ID：13955841
> 
> 赞同：1
> 
> 时间：2012-12-19T15:37:34.137
> 
> 标签：sql, oracle

我有一个带有容器编号的表和一个带有时间戳的 completed_on 日期字段。它还具有船舶 ID 和起重机 ID。我需要通过询问 completed_on 是否为空来计算已完成和未完成的容器数量。

我写过这样的东西，但它不起作用。

```
select vessel,
  crane_no,
  count(container_no) tot_moves,
  case when completed_on is null then count(container_no) end as pending,
  case when completed_on is not null then count(container_no) end as completed,
min(completed_on) first_m,
max(completed_on) last_m
from
containers
group by vessel, crane_no, completed_on 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:40:54.827

你非常接近......该`case`语句应该在你的聚合`count`函数中：

```
select 
  vessel,
  crane_no,
  count(container_no) tot_moves,
  count(case when completed_on is null then 1 end) as pending,
  count(case when completed_on is not null then 1 end) as completed,
  min(completed_on) first_m,
  max(completed_on) last_m
from
  containers
group by 
  vessel, 
  crane_no, 
  completed_on 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:46:02.960

试试这个：

```
 select 
      vessel,
      crane_no,
      count(container_no) tot_moves,
      count(case when completed_on is null then 1 end) as pending,
      count(case when completed_on is not null then 1 end) as completed,
      min(completed_on) first_m,
      max(completed_on) last_m
    from containers group by  vessel, crane_no, completed_on 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T16:53:34.257

还有另一种方法可以做到这一点，而不是使用`CASE`. 我不确定 Oracle 如何优化事物，但这*可能*会更快（您需要进行自己的分析）。

```
select vessel,
       crane_no,
       count(container_no) tot_moves,
       count(*) - count(completed_on) as pending,
       count(completed_on) as completed,
       min(completed_on) first_m,
       max(completed_on) last_m
from containers
group by vessel, crane_no, completed_on 
```

这是可行的，因为几乎所有聚合（包括`COUNT()`）都会忽略空值。您可以使用总行数和已完成行数之间的差异来获取待处理的移动。此外，`count(completed_on)` *应该*被缓存，并且不会运行两次（一些 RDBMS 允许在`SELECT`子句中重复使用列别名，但我不知道 Oracle 是否支持这一点）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T15:40:54.587

就像是：

```
select vessel,
    crane_no,
    count(container_no) tot_moves,
    sum(case when completed_on is null then 1 else 0 end) as pending,
    sum(case when completed_on is not null then 1 else 0 end) as completed,
    min(completed_on) first_m,
    max(completed_on) last_m
from containers
group by vessel, crane_no, completed_on; 
```

这`case`是决定是否应计算每一行，并`sum`根据这些计算出实际计数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T15:41:00.347

将 count() 放在箱子周围。

```
select vessel,
  crane_no,
  count(container_no) tot_moves,
  count(case when completed_on is null then container_no end) as pending,
  count(case when completed_on is not null then container_no end) as completed,
min(completed_on) first_m,
max(completed_on) last_m
from
containers
group by vessel, crane_no; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-19T15:41:32.230

```
SELECT
  vessel,
  crane_no,
  COUNT(container_no)                                       AS "tot_moves",
  SUM(CASE WHEN completed_on IS NULL     THEN 1 ELSE 0 END) AS "pending",
  SUM(CASE WHEN completed_on IS NOT NULL THEN 1 ELSE 0 END) AS "completed",
  MIN(completed_on) first_m,
  MAX(completed_on) last_m
FROM containers
GROUP BY vessel, crane_no; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T09:59:36.780

count 函数默认不计算 null。您可以使用 nvl2 函数来操作查询，以帮助您仅计算空值。例子 ：

```
select count(completed_on) as completed , 
       count(nvl2(completed_on,null,1)) as pending
from containers; 
```

# asp.net-mvc - 部分模型 .NET MVC

> ID：13955844
> 
> 赞同：1
> 
> 时间：2012-12-19T15:37:41.083
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api

首先，我将澄清我正在使用使用 WEB API 的数据库优先方法来提供 REST 服务。（一般都是用老式的方式开发，只对部分功能使用EF）

我有一个对应于数据库表的模型让我们说

```
Model Client
--id
--owns
--address
--VAT number
--Credit card number

Model Session
--id
--clientID (FK)
--date 
```

现在有几次我只想将模型的一部分返回给客户端，有时模型数据的组合 {ClientName , Owns , LastSessionDate ) 或其他几种组合

唯一想到的策略是为每个响应创建不同的模型（带有重复的验证声明等）。或者当响应只是模型的一部分（不是组合）时，只需取消我不想要的字段并告诉解析器不要呈现空字段。

这是正确的方法还是我误解了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:49:09.033

通常，我为每个响应（或 Web 应用程序中的屏幕/视图）提供不同的模型类。有时您可以重复使用这些视图模型，但通常麻烦多于其价值。

# ios - 带有 NSXMLParser 和 ARC 的 EXC_BAD_ACCESS

> ID：13955847
> 
> 赞同：3
> 
> 时间：2012-12-19T15:37:49.763
> 
> 标签：ios, automatic-ref-counting, exc-bad-access, nsxmlparser

iOS 开发的初学者，我将尝试实现一个通过 XML 文件显示 RSS 提要的应用程序。

在`viewDidLoad`我的`UITableView`班级中，我正在使用`UIActivityIndicator`等待数据加载。

但是，在应用程序将返回主线程的那一刻，我在函数`EXC_BAC_ACCESS`末尾有一个代码 2 。`parseXMLStart`我不明白为什么...

这里的错误信息：

```
Thread 6 : 0-[NSXMLParser dealloc]
Message  : EXC_BAC_ACCESS (code=2, address=0xc)
Line     : 0xbb0840:  movl   (%eax,%ecx), %ecx 
```

我不知道我的错误是什么以及在哪里。我该如何解决？

* * *

这是我的代码：

```
=> Class Type :: UITableViewController    

>> Header

@interface DataListViewController : UITableViewController {
    UIActivityIndicatorView *activityView;
    NSMutableArray *dataFromXML;
}

- (void)parseXMLStart;
- (void)parseXMLDone;

@end

>> Main

@implementation DataListViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor whiteColor];
    self.title = @"View 1";

    activityView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    activityView.center = self.view.center;

    [self performSelectorInBackground:@selector(parseXMLStart) withObject:nil];

    [activityView startAnimating];
    [activityView setHidesWhenStopped:YES];

    [self.view addSubview:activityView];
}

#pragma mark - UIActivityIndicator Methods

- (void)parseXMLStart
{
    // To Show the animation
    sleep(1);

    dataFromXML = [[NSMutableArray alloc] init];

    // COMMENT TO TEST /*

    [dataFromXML addObject:@"Element 1"];
    [dataFromXML addObject:@"Element 2"];
    [dataFromXML addObject:@"Element 3"];

    // */ COMMENT TO TEST

    // ------------------------------------------------------------------------------------------------------------------------------------

    // UNCOMMENT TO TEST
    /*

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"xml"];
    NSURL *url = [[NSURL alloc] initWithString:[[NSString stringWithFormat:@"file://%@",filePath] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]];

     XML2ObjectParser *parserWords = [[XML2ObjectParser alloc] parseXMLAtURL:url toObject:@"Word" parseError:nil];

    NSLog(@">> parserWords Items Count :: %i", parserWords.items.count);

    for (int i = 0; i < [parserWords.items count]-1; i++) {
        Word *aWord = [[Word alloc] init];
        aWord = (Word *)[[parserWords items] objectAtIndex:i];
        [dataFromXML addObject:aWord];
    }

    NSLog(@">> dataFromXML Count :: %i", dataFromXML.count);

    */
    // UNCOMMENT TO TEST

    // --------------------------------------------------------------------------------------------------------------------------------------------

    // EXC_BAD_ACCESS (code=2, address=0xc)
    // Thread 6 : 0-[NSXMLParser dealloc]
    // 0xbad840:  movl   (%eax,%ecx), %ecx

    // --------------------------------------------------------------------------------------------------------------------------------------------

    [self performSelectorOnMainThread:@selector(parseXMLDone) withObject:nil waitUntilDone:YES];
}

- (void)parseXMLDone
{
    [activityView stopAnimating];
    [self.tableView reloadData];
}

# pragma mark - Table View Method

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dataFromXML count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellID = @"CellID";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];
    }

    cell.textLabel.text = [dataFromXML objectAtIndex:[indexPath row]];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DataListDetailViewController *_dataListDetailViewController = [[DataListDetailViewController alloc] init];

    _dataListDetailViewController.title = [dataFromXML objectAtIndex:[indexPath row]];

    [self.navigationController pushViewController:_dataListDetailViewController animated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:41:03.177

在我看来，您的选择器输入错误。你有 `@selector(parsingXMLDone)`而且应该是`@selector(parseXMLDone)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:26:38.527

我找到了错误。

这不是我的错，而是ARC。

我解释一下，当解析 XML 完成时，后台线程被杀死，并且在 ARC 想要释放 NSXMLParser 之后。

这就是为什么它会导致 EXC_BAD_ACCESS，因为 ARC 想要释放一个已经释放的对象（AKA NSXMLParser）。

解决方案是在没有 ARC 的情况下编译我的类，在目标的构建阶段使用标志“fno-objc-arc”。

请参阅：[NSXMLParser 仅在启用 ARC 的情况下提供 EXC_BAD_ACCESS](https://stackoverflow.com/questions/11304725/nsxmlparser-gives-exc-bad-access-only-with-arc-enabled?rq=1)

谢谢您的帮助。

# jsf - JSF2：自定义复合组件处的 NullpointerException

> ID：13955848
> 
> 赞同：0
> 
> 时间：2012-12-19T15:37:58.617
> 
> 标签：jsf, jsf-2, myfaces, composite-component

我一直在尝试创建一个自己的组件来“替换” Richfaces 垫片，该组件在 Richfaces 4 中不再可用。

我找到了实际实现的链接：[https ://community.jboss.org/wiki/SpacerImplementationForJSF2OrRichFaces4](https://community.jboss.org/wiki/SpacerImplementationForJSF2OrRichFaces4)

我试图注册新的标签库：

richext.taglib.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0">

<namespace>http://java.sun.com/jsf/composite/richext</namespace>
    <tag>
        <tag-name>spacer</tag-name>
        <source>../richext/spacer.xhtml</source>
    </tag> 
```

web.xml

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>WEB-INF/richext.taglib.xml</param-value>
</context-param> 
```

将 spacer.xhtml 更改为：

```
<composite:implementation>

    <h:panelGroup rendered="#{cc.attrs.height > 0}">
        <br/>
    </h:panelGroup>

    <h:graphicImage value="../img/spacer.gif"
                    width="#{cc.attrs.width}px"
                    height="#{cc.attrs.height}px"/>
</composite:implementation> 
```

我添加了

```
xmlns:richext="http://java.sun.com/jsf/composite/richext" 
```

到我想使用间隔的页面。

我的文件：WebContent/WEB-INF/richext.taglib.xml

网页内容/richext/spacer.xhtml

网页内容/img/spacer.gif

现在，当访问我使用分隔符的页面时（其他页面工作正常），我在浏览器中得到 NullpointerException，而不是在服务器日志中。

```
java.lang.NullPointerException
at org.apache.myfaces.view.facelets.tag.composite.CompositeComponentDefinitionTagHandler.apply(CompositeComponentDefinitionTagHandler.java:113)
at org.apache.myfaces.view.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:57)
at org.apache.myfaces.view.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:48)
at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:394)
at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:448)
at org.apache.myfaces.view.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:390)
at org.apache.myfaces.view.facelets.tag.UserTagHandler.apply(UserTagHandler.java:138)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:51)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:59)
at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
at org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate.apply(ComponentTagHandlerDelegate.java:294)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:54)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:51)
at org.apache.myfaces.view.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:57)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:51)
at org.apache.myfaces.view.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:48)
at org.apache.myfaces.view.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:179)
at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.buildView(FaceletViewDeclarationLanguage.java:417)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:78)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1188)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:763)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:454)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:77)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:919)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1016)
at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:895)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659) 
```

我哪里做错了？我错过了什么吗？

如果这很重要，我的服务器是 Websphere 8.0.0.2。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:09:24.740

你根本不需要那个`richext.taglib.xml`文件和那个`web.xml`条目。只需将复合组件放在`/resources/richext`文件夹中，完全按照您找到的答案中的说明。您的具体问题是因为您试图将复合组件注册为标记文件（这是两个完全独立的概念）。不正确的 taglib 文件可能会导致 MyFaces 像这样阻塞。

### 也可以看看：

*   [复合组件信息](https://stackoverflow.com/tags/composite-component/info)
*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)

# javascript - 获取dom模型中给定的前一个元素

> ID：13955849
> 
> 赞同：3
> 
> 时间：2012-12-19T15:38:01.120
> 
> 标签：javascript, jquery

我的页面上有元素列表

```
input
input
span
input
span
etc 
```

我想选择每个跨度之前的每个输入，然后选择我必须做的任何事情。有没有可用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:40:28.770

用于`prev()`选择任何给定范围的前一个输入：

```
$(this).prev("input"); 
```

* * *

如果您尝试在 1 个选择器中选择所有跨度的所有先前输入，请尝试以下操作：

```
​$("span").prev("input"); 
```

[http://jsfiddle.net/6hPRa/1/](http://jsfiddle.net/6hPRa/1/)

```
$("span").prev("input").css("background-color", "pink");​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T15:41:04.697

你必须使用[.prev()](http://api.jquery.com/prev/)

前任 ：

```
$('span').prev("input")  //this is input element 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T15:39:37.533

使用 .parent() 或 .parents('.selector').first()

```
jQuery('.given').parent(); 
```

或者没有 jQuery

```
var el = document.getElementById('id');
el.parentNode... 
```

啊，前一个元素......好吧，现在你有答案了。还有一种方法

```
.siblings() 
```

如果你想要 prev-prev 元素这样做

```
jQuery('.given').prev().prev(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T15:41:58.070

定义哪个应该是第一个并不容易，我建议为每个设置 tabindex ，然后使用它作为选择器，您总是可以轻松地抓住前一个或下一个

# android - 在android 4.1+中添加一个按钮来关闭通知而不创建新的活动

> ID：13955850
> 
> 赞同：0
> 
> 时间：2012-12-19T15:38:01.447
> 
> 标签：android, notifications, android-activity

我想在通知中添加一个按钮来关闭它，因为它是持久的。我有 2 个按钮。其中一个我使用 addAction，因为我调用了另一个活动。但另一个只需要关闭通知。我发现的唯一方法是使用关闭通知的操作创建一个新的 Activity，这样我就可以像使用另一个按钮一样执行关闭按钮。

但是有没有办法在不创建新活动的情况下做到这一点？

我不知道它是否足够清楚，如果您不能理解，请告诉我，我会尝试更好地解释。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:39:52.480

您应该只能使用通知管理器

```
NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.cancel(NOTIFICATION_ID); 
```

# c# - 适合一对List的数据类型 对象，作为一个容器来容纳两者

> ID：13955859
> 
> 赞同：3
> 
> 时间：2012-12-19T15:38:45.680
> 
> 标签：c#, types, code-design

在我开始从事的一个新项目中，我自己学习 c#，

其中一种方法，接受`List<string>`类型数据，作为参数传入。我想知道，现在……需要**其中两个**列表、两种类型的数据或两组，

就这个例子来说，说我有一个*优点* 和*缺点*，或者..*女孩*和*男孩*，

这些实际上是 2 个独立的元素或对象列表，我需要作为参数传入，并且我希望它作为一个数据类型传递，然后，在方法内部，我将处理数据列表的分离, 所以.. 而不是几个`List`对象 i, 想(在那里一秒钟, a`Dictionary`将是合适的...)

虽然我只有一个元素（一个项目......每个都是一个`List`），但在我需要传递的这种数据类型中

我该怎么做才能得到这个结果？

我将尝试说明它：

```
List<string> classGirls = new List<string>();
List<string> classBoys = new List<string>(); 
```

对于源中的 eace 项目...从源中加载两者

已完成 List Girls + List Boys 已填充，尽管知道您将只有一个女孩和一个男孩 ListObjects，但您如何将它们作为字典传递？

```
public bool foundAMatch( string Lookup, List<string> G , List<string> B){
{
    var firstGirl = G.ElementAt(0);
    var firstBoy = B.ElementAt(0);

    return firstGirl == Lookup && firstBoy !=Lookup ;
} 
```

相反，我需要它像

```
 public bool foundAmatch(string Lookup, someDataType.... Kids)
  {
    var firstGirl = kids-girls <-- first entity in kids;
    var firstBoy = kids-boys <-- first entity in Kids; 

    return firstGirl == Lookup && firstBoy !=Lookup ;
  } 
```

记住的几件事...关于数据的属性，它应该具有良好的性能...自然需要，尽管最重要的是，它应该是适当的/易于安排的，并且适合使用循环进行排序的迭代，并且受到所有类型的影响的统计操作。

*   问题是，

您将如何实现逻辑，它是我正在考虑的现有数据类型**吗？**

如果不是，您将在这种情况下实施什么方法来选择/制作数据类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:49:44.617

您可以使用继承轻松解决此问题：

```
public abstract class Person
{
    public string Name { get; private set; }  // The setter is private because we only have to set this name when we create an instance

    protected Person(string name)
    {
        Name = name;
    }
}

public class Male : Person
{
    public Male(string name) : base(name)  // This constructor calls the constructor of the class it inherits and passes on the same argument
}

public class Female : Person
{
    public Female(string name) : base(name)
}

public bool IsMatch(string needle, IEnumerable<Person> haystack)
{
    var firstGirl = haystack.OfType<Female>().FirstOrDefault();
    var firstBuy = haystack.OfType<Male>().FirstOrDefault();
    return firstGirl != null &&
           firstGirl.Name == needle &&
           firstBoy != null &&
           firstBoy.Name != needle;
} 
```

编辑：

我很喜欢扩展方法，所以我会这样写方法：

```
public static class PersonExtensions
{
    public static bool IsMatch(this IEnumerable<Person> haystack, string needle)
    {
        // same method logic in here
    }
} 
```

然后你可以使用它：

```
var people = new List<Person>();
people.Add(new Male { Name = "Bob" });
people.Add(new Female { Name = "Mary" });
var isMatch = people.IsMatch("Jane"); 
```

编辑2：

将性别作为`Person`类的属性可能会更好：

```
public enum Sex
{
    Male,
    Female
}

public class Person
{
    public string Name { get; private set; }
    public Sex Gender { get; private set; }

    public Person(string name, Sex gender)
    {
        Name = name;
        Gender = gender;
    }
} 
```

并将方法更改为：

```
var firstGirl = haystack.FirstOrDefault(p => p.Gender == Gender.Female);
var firstBoy = haystack.FirstOrDefault(p => p.Gender == Gender.Male); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:00:43.097

获得一个集合的最好方法是创建一个代表男孩和女孩的类。请在下面找到示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private class Kid
        {
            public bool Gender { get; set; }
            public String Name { get; set; }
        }

        private List<Kid> kids;

        private void Form1_Load(object sender, EventArgs e)
        {
            // === Load data =================================================
            kids = new List<Kid>();
            kids.Add(new Kid { Name = "John", Gender = true });
            kids.Add(new Kid { Name = "Paul", Gender = true });
            kids.Add(new Kid { Name = "Jack", Gender = true });
            kids.Add(new Kid { Name = "Brenda", Gender = false });
            kids.Add(new Kid { Name = "Judith", Gender = false });
            kids.Add(new Kid { Name = "Sofia", Gender = false });

            Kid foundKid = foundAMatch("sofIa");
        }

        private Kid foundAMatch(string name)
        {
            var result = (from K in kids
                          where K.Name.ToLower() == name.ToLower() 
                          select K);

            if (result.Count() != 0)
                return result.First();
            else
                return null;
        }

        private Kid foundAMatch(string name, bool gender)
        {
            var result = (from K in kids
                          where K.Name.ToLower() == name.ToLower() && K.Gender == gender
                          select K);

            if (result.Count() != 0)
                return result.First();
            else
                return null;
        }

    }
} 
```

# ios - FBLoginButton 不请求权限

> ID：13955861
> 
> 赞同：0
> 
> 时间：2012-12-19T15:38:55.267
> 
> 标签：ios, facebook

首先，为模糊的问题道歉！在短时间内，我收到了一个应用程序，该应用程序在发布 Facebook 状态更新时开始失败。它似乎使用了一个非常旧版本的 Facebook SDK，所以我找到的代码示例都没有工作。

尝试发布时的错误消息意味着`facebook.users.setStatus`不推荐使用端点。`facebook.stream.publish`因此，我更新了似乎是当前支持的调用代码。

这会导致权限错误（代码 200）。

然后我更改了 Facebook 应用记录以请求`publish_actions`许可。这在 Facebook 预览页面上看起来不错： [![](../Images/30e71f658beb7cc782c6b3e445aedfe1.png)](https://i.stack.imgur.com/3S18D.png)

...但似乎没有反映在应用内 Facebook 登录屏幕上： [http ://s13.postimage.org/d5sf8j0zr/i_Phone_No_Permissions_Request_Redact.png](http://s13.postimage.org/d5sf8j0zr/i_Phone_No_Permissions_Request_Redact.png)

我现在已经等了几个小时，所以我认为问题不在于 Facebook 传播应用程序设置。谁能告诉我我是否走在正确的轨道上？

计划 B 将使用最新的 Facebook SDK 重写 Facebook 访问，但这需要升级 XCode 和 Mac OS，我很想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:51:42.523

在处理 Open Graph 操作时使用 publish_actions 权限。根据我的阅读，您将需要扩展的 publish_stream 权限。

# php - Drupal 7 Drupal_goto 如何使用 POST 发送参数

> ID：13955864
> 
> 赞同：0
> 
> 时间：2012-12-19T15:38:56.520
> 
> 标签：php, drupal, drupal-7

我需要使用 drupal_goto，但我需要使用 POST 方法传递一些参数。

实际上我使用这段代码：

```
$url="someURL";

$params= array('query'=>array(
'n'=> $data,
'VerPedido'=>'back'
));
drupal_goto($url,$params); 
```

此代码重定向并传递参数添加到 URL，示例

> `http://XXXX/someURL?n=1&VerPedido=back`

我需要使用 POST 方法传递此信息，因为我需要在目标 URL 获取此参数

我已经阅读[了这篇文章](https://stackoverflow.com/questions/5576619/php-redirect-with-post-data)，但为此我需要在 form_submit 添加 html 代码

我试图添加这个：

```
$output="
<form action='someURL' method='post' name='frm'>
<input type='hidden' name='n' value='".$data."'>
<input type='hidden' name='VerPedido' value='back'>

</form>
<script language=\"JavaScript\">
document.frm.submit();
</script>"; 
```

返回$输出；

但是因为这个代码在 mymodule_form_submit($form_id, $form_values) 不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:49:32.180

如果您想使用 drupal_goto 本身，那么它是不可能的，但您可以使用 PHP 标头函数。看[这里](https://stackoverflow.com/questions/6300081/php-post-variable-with-headers)

# ruby-on-rails-3 - 带有 ruby 1.8.7 的 Railsinstaller

> ID：13955866
> 
> 赞同：0
> 
> 时间：2012-12-19T15:39:13.007
> 
> 标签：ruby-on-rails-3

谁能告诉我如何使用 ruby​​ 1.8.7 在 windows7 中安装 rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:47:33.887

我建议安装一个 ruby​​ 版本管理器，例如[pik](https://github.com/vertiginous/pik)来管理安装沙盒 1.8.7 - 特别是，查看 github 页面上的自述文件，以使用 msi 安装程序包从头开始安装 ruby​​。ruby 版本管理器非常方便，因为它可以让您在不同的 rubies 之间来回切换，安装不同的 gem，如果这对您很重要，可以安装各种 ruby​​ 而无需管理员权限（运行安装程序包对于 pik 可能需要管理员权限）。

从这一点开始，使用像`gem`安装 Rails 一样的标准 Ruby 工具。我建议使用 bundler 安装[bundler](http://gembundler.com/)，`gem install bundler`然后使用 bundler 来处理其余的 gem 需求，如 bundler 链接中所述，尤其是[此处](http://gembundler.com/rails3.html)。Bundler 很棒，因为它根据目录中的文件精确地管理您的配置；这意味着多个项目可以安装不同库的多个版本，但 Bundler 确保每个项目的配置都是一致的。您甚至可以将您的项目（包括您的打包程序 Gemfile）移动到另一台计算机上并运行`bundle install`，这将确保您的另一台计算机使用完全相同版本的相同 gem 来运行您的软件 - 非常适合部署。

# javascript - 在 jvectormap 上放一些文本

> ID：13955869
> 
> 赞同：1
> 
> 时间：2012-12-19T15:39:18.047
> 
> 标签：javascript, web, jvectormap

我正在使用 jvectormap 插件，我想知道是否有办法将一些文本直接放在地图上，例如国家名称？

谢谢 ！

# c# - EF5 转换返回列表 到它的正确类型

> ID：13955870
> 
> 赞同：0
> 
> 时间：2012-12-19T15:39:23.757
> 
> 标签：c#, linq, entity-framework

使用 Entity Framework 5，以下代码无效，因为我试图将 a`List<string>`转换为`List<TRK_USER>`. 说得通。

```
List<TRK_USER> userList = db.TRK_USER.Select(t => t.USER_FIRST).ToList(); 
```

但是，我想维护 TRK_USER 对象的类型。我希望/期望的是，我可以将其转换`List<string>`为 a`List<TRK_USER>`并为所有缺失的属性获取空值。所以在这种情况下，我会有一个`List<TRK_USER>`只有 USER_FIRST 填充数据的地方。这可以通过一些神奇的扩展方法实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:43:25.070

假设 TRK_USER 有一个无参数的构造函数，你可以这样做：

```
List<TRK_USER> userList = db.TRK_USER
            .Select(t => new TRK_USER{ USER_FIRST = t.USER_FIRST})
            .ToList(); 
```

但是你为什么要这样做呢？

```
List<string> userFirstNamesList = db.TRK_USER
            .Select(t => t.USER_FIRST)
            .ToList(); 
```

会给出完全相同的信息，只是没有不必要的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:42:16.063

试试这个：

```
List<TRK_USER> userList =
      db.TRK_USER
            .Select(t => new TRK_USER{USER_FIRST = t.USER_FIRST})
            .ToList(); 
```

# c++ - 如何创建一个简单的 GStreamer 源插件？

> ID：13955872
> 
> 赞同：3
> 
> 时间：2012-12-19T15:39:25.050
> 
> 标签：c++, c, plugins, gstreamer, multimedia

我正在阅读`GStreamer`插件指南，它有一章关于插件源，但只有一段长。有没有人有关于如何创建基本源插件的任何提示/教程？

我正在考虑阅读源插件，`gstreamer`但它们太复杂了。我可以看看任何简单的基础知识吗？

# c# - System.IO.FileNotFoundException：找不到网络路径。在 Windows 7 上使用 DirectoryEntry 对象时出现异常

> ID：13955880
> 
> 赞同：3
> 
> 时间：2012-12-19T15:39:44.363
> 
> 标签：c#, .net, directoryentry

我正在尝试使用 DirectoryEntry 对象连接到远程 Windows 7 机器。这是我的代码

```
DirectoryEntry obDirEntry = new DirectoryEntry("WinNT://hostName", "hostName\\testUser", "password123", AuthenticationTypes.Secure);               
            try
            {
                if (obDirEntry.Properties.Count > 0)
                {                        
                   //ok
                }
            }
            catch (Exception excp)
            {} 
```

如果我能够连接到远程 windows server 2003 机器或本地 windows 7 机器，那么我没有收到任何错误。但是，当我尝试连接到远程 Windows 7 机器时，我在线上遇到异常`if (obDirEntry.Properties.Count > 0)`

```
 Exception :System.IO.FileNotFoundException: The network path was not found.

 at System.DirectoryServices.Interop.UnsafeNativeMethods.IAds.GetInfo()
 at System.DirectoryServices.DirectoryEntry.RefreshCache()
 at System.DirectoryServices.DirectoryEntry.FillCache(String propertyName)
 at System.DirectoryServices.PropertyCollection.get_Count() 
```

我能够 ping 那个远程 windows 7 m/c。防火墙和 UAC 也关闭了。问题是我在每台远程 Windows 7 机器上都遇到了这个问题。我试图将 ip 地址放在 url 而不是主机名中，但在这种情况下，即使在本地机器上我也会遇到异常。nslookup 命令能够解析远程 m/c 主机名。这可能是什么原因？有什么可能的解决方案？提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:06:54.580

您需要正确访问远程注册表才能以这种方式连接到 Windows 7 (&8) 系统。

[这里](http://www.peppercrew.nl/index.php/2011/09/connect-to-remote-registry-fails-with-an-error-is-preventing-this-key-from-being-opened/)有关于如何成功连接到远程注册表的指南。它收集所需的所有不同信息 - 启用文件和打印机共享、启用远程注册表服务以及将连接到远程注册表的特定用户添加到`HKLM\SYSTEM\CurrentControlSet\Control\SecurePipeServers\winreg`.

在远程系统上执行所有这些任务后，您应该能够使用`WinRT://remoteHost`. 我在我拥有的一些系统上对其进行了测试，并且可以正常工作。

如果系统是域绑定系统并且用于连接的帐户是域管理员帐户，这可能会自动运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-23T19:17:32.640

我最近在一些已建立的内部网站上遇到了这个问题。

我发现应该修复的一个项目是 Microsoft 修补程序：http: [//support.microsoft.com/kb/2545850](http://support.microsoft.com/kb/2545850)。您可以判断这是否是您的问题，因为服务器重新启动将暂时纠正错误。

However in my case this did not work. Checking settings in IIS I noticed that under my sites' "Authentication" section, ASP.NET Impersonation was enabled (it was being set to "true" in the web.config). I disabled it and that resolved the issue for me.

# jquery - ajax 在浏览器上返回错误，但在 Dreamweaver 上成功

> ID：13955883
> 
> 赞同：2
> 
> 时间：2012-12-19T15:39:47.450
> 
> 标签：jquery, ajax, cordova, dreamweaver

我正在用dreamweaver 6编写一个电话应用程序。我的ajax在我的浏览器上返回错误而没有任何结果，而我所有的电话都没有返回任何内容（这意味着电话没有读取代码），但是它返回了期望的结果在 Dreamweaver 实时视图上。下面是代码

```
//I removed the last part of the $uri for security reasons
var $uri="http://62.173.32.43?";

var Y1="87FBA0AC7252EDD6";

var Y2=Encrypt(key,uniqueSession);

var Y3=(Encrypt(key,MSISDN));
var fulladd = $uri + 
              "OPERATION=" +
              Y1.toString() + 
              "&SESSION_ID=" + 
              Y2.toString() + 
              "&MSISDN=" + 
              Y3.toString() + 
              "&USE_XML=True";

$.ajax({
    type: "GET",
    url: fulladd,
    dataType: "xml",
    success: function(){
        alert("done...");
    },
    complete: parseXML,
    error: function(){
        alert("Error Connecting, ensure you are connected to the internet");
    }); 
```

# mysql - 从 Ubuntu 10.04 迁移到 12.04 时的资源获取异常（Hibernate、c3p0、MySQL）

> ID：13955890
> 
> 赞同：1
> 
> 时间：2012-12-19T15:40:18.833
> 
> 标签：mysql, hibernate, tomcat, ubuntu-12.04, c3p0

这里有各种类似的问题，但没有一个可以解决我的问题的答案。

我正在运行一个 Java EE 应用程序（从源代码构建的[YAWL](http://www.yawlfoundation.org)），它使用 Hibernate 和 c3p0 连接到 MySQL DB。该应用程序在 Tomcat 用户实例（通过 创建`tomcat6-instance-create`）上运行。**它在 Ubuntu 10.04 环境中完美运行**，但`com.mchange.v2.resourcepool.CannotAcquireResourceException`在“升级”到 Ubuntu 12.04 时出现错误。

似乎相关的环境变化是：

*   MySQL 5.1.66 --> 5.5.28
*   雄猫 6.0.24 --> 6.0.35
*   `tomcat6-instance-create`现在添加一个符号链接`lib`文件夹（以便 Eclipse 可以正确创建实例；请参阅[Debian bug #297675](https://bugs.launchpad.net/ubuntu/+source/tomcat6/+bug/297675)）

Java 没有改变：它在两个版本上都是 OpenJDK 6b24。

由于最后的更改，我不得不将`catalina.properties`自己的共享库文件夹与`lib`符号链接分开，但我在 10.04 上重新创建了它，它仍然在那里一切正常。

以下是来自 INFO 级别的休眠日志的摘录。（INFO 级别意味着您可以在（长！）第三行看到所有正在使用的属性。）

```
[INFO] 2012-12-19 14:53:15,302 org.hibernate.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
[INFO] 2012-12-19 14:53:15,308 org.hibernate.Version - HHH000412: Hibernate Core {4.1.2.Final}
[INFO] 2012-12-19 14:53:15,311 org.hibernate.cfg.Environment - HHH000205: Loaded properties from resource hibernate.properties: {hibernate.connection.password=****, hibernate.c3p0.acquire_increment=1, hibernate.query.substitutions=true 1, false 0, yes 'Y', no 'N', hibernate.cache.region_prefix=hibernate.test, hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory, hibernate.c3p0.idle_test_period=3000, hibernate.cache.use_second_level_cache=true, hibernate.show_sql=false, hibernate.c3p0.max_statements=100, hibernate.jdbc.batch_size=0, hibernate.bytecode.use_reflection_optimizer=false, hibernate.c3p0.timeout=5000, hibernate.generate_statistics=true, hibernate.cache.use_query_cache=true, hibernate.max_fetch_depth=1, hibernate.jdbc.use_streams_for_binary=true, hibernate.c3p0.min_size=2, hibernate.connection.username=root, hibernate.connection.driver_class=com.mysql.jdbc.Driver, hibernate.current_session_context_class=thread, hibernate.c3p0.max_size=20, hibernate.connection.provider_class=org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider, hibernate.cache.use_structured_entries=true, hibernate.dialect=org.hibernate.dialect.MySQLDialect, hibernate.connection.url=jdbc:mysql:///yawl_r1872}
[INFO] 2012-12-19 14:53:15,311 org.hibernate.cfg.Environment - HHH000407: Using java.io streams to persist binary types
[INFO] 2012-12-19 14:53:15,311 org.hibernate.cfg.Environment - HHH000021: Bytecode provider name : javassist
[INFO] 2012-12-19 14:53:15,331 org.hibernate.cfg.Configuration - HHH000221: Reading mappings from resource: org/yawlfoundation/yawl/resourcing/resource/Participant.hbm.xml

[...]

[INFO] 2012-12-19 14:53:15,970 org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator - HHH000130: Instantiating explicit connection provider: org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
[INFO] 2012-12-19 14:53:15,982 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider - HHH010002: C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql:///yawl_r1872
[INFO] 2012-12-19 14:53:15,982 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider - HHH000046: Connection properties: {user=root, password=****}
[INFO] 2012-12-19 14:53:15,983 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider - HHH000006: Autocommit mode: false
[WARN] 2012-12-19 14:53:45,331 org.hibernate.engine.jdbc.internal.JdbcServicesImpl - HHH000342: Could not obtain connection to query metadata : Connections could not be acquired from the underlying database!

[...]

[INFO] 2012-12-19 14:53:45,788 org.hibernate.tool.hbm2ddl.SchemaUpdate - HHH000102: Fetching database metadata
[INFO] 2012-12-19 14:53:45,788 org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator - HHH000130: Instantiating explicit connection provider: org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
[INFO] 2012-12-19 14:53:45,789 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider - HHH010002: C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql:///yawl_r1872
[INFO] 2012-12-19 14:53:45,789 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider - HHH000046: Connection properties: {user=root, password=****}
[INFO] 2012-12-19 14:53:45,789 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider - HHH000006: Autocommit mode: false
[ERROR] 2012-12-19 14:54:15,053 org.hibernate.tool.hbm2ddl.SchemaUpdate - HHH000319: Could not get database metadata
java.sql.SQLException: Connections could not be acquired from the underlying database!
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:529)
    at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
    at org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:84)
    at org.hibernate.tool.hbm2ddl.ManagedProviderConnectionHelper.prepare(ManagedProviderConnectionHelper.java:55)
    at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:194)
    at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:178)
    at org.yawlfoundation.yawl.resourcing.datastore.HibernateEngine.initialise(HibernateEngine.java:121)
    at org.yawlfoundation.yawl.resourcing.datastore.HibernateEngine.<init>(HibernateEngine.java:88)
    at org.yawlfoundation.yawl.resourcing.datastore.HibernateEngine.getInstance(HibernateEngine.java:96)
    at org.yawlfoundation.yawl.resourcing.datastore.persistence.Persister.<init>(Persister.java:54)
    at org.yawlfoundation.yawl.resourcing.datastore.persistence.Persister.getInstance(Persister.java:59)
    at org.yawlfoundation.yawl.resourcing.ResourceManager.setPersisting(ResourceManager.java:1794)
    at org.yawlfoundation.yawl.resourcing.rsInterface.ResourceGateway.init(ResourceGateway.java:83)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: com.mchange.v2.resourcepool.CannotAcquireResourceException: A ResourcePool could not acquire a resource from its primary factory or source.
    at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1319)
    at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
    at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
    ... 40 more 
```

Hibernate 和 c3p0 属性如下：

```
hibernate.query.substitutions true 1, false 0, yes 'Y', no 'N'
hibernate.dialect org.hibernate.dialect.MySQLDialect
hibernate.connection.driver_class com.mysql.jdbc.Driver
hibernate.connection.url jdbc:mysql:///yawl_r1872
hibernate.connection.username root
hibernate.connection.password yawl
hibernate.c3p0.max_size 20
hibernate.c3p0.min_size 2
hibernate.c3p0.timeout 5000
hibernate.c3p0.max_statements 100
hibernate.c3p0.idle_test_period 3000
hibernate.c3p0.acquire_increment 1
hibernate.connection.provider_class org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
hibernate.show_sql false
hibernate.current_session_context_class thread
hibernate.generate_statistics true
hibernate.jdbc.batch_size 0
hibernate.jdbc.use_streams_for_binary true
hibernate.max_fetch_depth 1
hibernate.cache.region_prefix hibernate.test
hibernate.cache.use_second_level_cache true
hibernate.cache.use_query_cache true
hibernate.cache.use_structured_entries true
hibernate.cache.region.factory_class org.hibernate.cache.ehcache.EhCacheRegionFactory 
```

由于这些属性列在 INFO 注释中，我认为它们肯定被正确阅读和使用。我可以使用 很好地连接到数据库`mysql yawl_r1872 -u root -p yawl`，因此凭据很好（并且请记住，它在 Ubuntu 10.04 上运行良好）。

我尝试过但没有奏效的事情：

*   使用非共享库配置（每个 webapp 使用库）
*   使用 Hibernate 方言`MySQL5Dialect`和`MySQL5InnoDBDialect`
*   使用带有明确给出的主机和端口（例如，`//localhost:3306/yawl_r1872`）的连接 URL，以及不带下划线的 DB 名称
*   中取消注释`max_connections = 100`。`/etc/mysql/my.cnf`（我认为无论如何它默认为 100。）
*   升级 MySQL Connector/J 库（从 5.1.13 到 5.1.22）
*   使用 Tomcat 7.0.26 实例（通过 Ubuntu`tomcat7-user`包；有趣的是，它没有`lib`修复符号链接）
*   通过[MySQL Sandbox](https://launchpad.net/mysql-sandbox)使用 MySQL v5.1.66 服务器（正常的 MySQL 5.5 实例关闭）。我想我设置正确：添加`bind-address = 127.0.0.1`到它的`.cnf`文件中，检查它是否在 127.0.0.1:5166 上正确监听，并使用`jdbc:mysql://127.0.0.1:5166/yawl_r1872`带有用户名`root`和密码的连接 URL`msandbox`
*   检查我是否可以通过`mysql yawl_r1872 --protocol=TCP -h 127.0.0.1 -u root -p`. （显然，默认情况下使用 UNIX 套接字，所以以前我实际上并没有确认可以建立 JDBC 样式的 TCP 连接。）
*   从一些最小的 Java JDBC 代码检查 JDBC 连接（工作正常）

为了完整起见，以下是我的`catalina.properties`设置，使用`shared`实例 ( `$CATALINA.BASE`) 中的文件夹：

```
package.access=sun.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.,sun.beans. 
package.definition=sun.,java.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper.
common.loader=${catalina.base}/shared,${catalina.base}/shared/*.jar,${catalina.base}/lib,${catalina.base}/lib/*.jar,${catalina.home}/lib,${catalina.home}/lib/*.jar
server.loader=
shared.loader=
tomcat.util.buf.StringCache.byte.enabled=true 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:59:16.743

原来是Hibernate本身。该代码使用的是 v4.1.2（使用 c3p0 v0.9.1）。在升级到 v4.1.9（仍然随 c3p0 v0.9.1 一起提供）时，它都神奇地自行修复了。我之前没有尝试升级 Hibernate 和 c3p0，因为相同的代码在 Ubuntu 10.04 上运行良好，并且我使用 MySQL Sandbox 和 MySQL v5.1 进行的测试应该已经排除了任何影响代码的 DB 功能/API 问题。

我浏览了从 4.1.2 到 4.1.9 的 Hibernate 更改日志，但看不到任何相关的内容，因此我仍然对 Ubuntu 12.04 环境的哪些方面与 10.04 相比存在问题一无所知。

（它在升级到最新的 c3p0 v0.9.2-pre8 版本时仍然有效，并且 MySQL 连接器/J 更新很好。）

# cakephp - CakePHP 模型验证中的 HTML5 表单验证规则

> ID：13955895
> 
> 赞同：1
> 
> 时间：2012-12-19T15:40:37.187
> 
> 标签：cakephp, html5-validation

FormHelper 有没有办法在模型中定义的规则的输入标记中生成 HTML5 验证属性？

例如

在模型中

```
var $validate = array(
        'title' => array(
            'message' => 'This field cannot be left blank',
            'required' => true
        )
    ); 
```

在视野中

```
echo $this->Form->input('title'); 
```

浏览器中的 HTML

```
<input type="text" title="This field cannot be left blank" required /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:30:34.513

您可以使用以下方法从控制器访问验证标准`$this->Model->validate`：

```
//controller
$this->set('validation', $this->Model->validate); 
```

如果你愿意，你可以在视图中使用它，但是......我不认为 CakePHP 实现了任何类似于你正在寻找的东西，所以你可以尝试为此目的创建一个帮助器来扩展 Form 帮助器。

# mysql - sql创建表不起作用

> ID：13955898
> 
> 赞同：0
> 
> 时间：2012-12-19T15:40:52.597
> 
> 标签：mysql, sql, create-table

尝试将此表迁移到我服务器上的数据库中，但我不断收到错误 1146 project.users 不存在。谁能明白为什么？

```
 CREATE TABLE IF NOT EXISTS `project`.`users` (
      `username` VARCHAR(50) NOT NULL ,
      `password` VARCHAR(50) NOT NULL ,
      `enabled` BIT(1) NOT NULL ,
      PRIMARY KEY (`username`) )
    ENGINE = InnoDB
    DEFAULT CHARACTER SET = latin1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:47:03.333

所以我把它放在一个稍作修改的小提琴中：

[http://sqlfiddle.com/#!2/287ac/1](http://sqlfiddle.com/#!2/287ac/1)

```
CREATE TABLE IF NOT EXISTS `users` (
  `username` VARCHAR(50) NOT NULL ,
  `password` VARCHAR(50) NOT NULL ,
  `enabled` BIT(1) NOT NULL ,
  PRIMARY KEY (`username`) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1 
```

它按预期工作。

尝试确保您有“项目”数据库，或将名称项目更改为您要迁移到的名称。

# javascript - 正则表达式用值替换所有逗号

> ID：13955904
> 
> 赞同：13
> 
> 时间：2012-12-19T15:40:57.580
> 
> 标签：javascript, regex

我有一个看起来像这样的字符串：“Doe, John, A”（姓氏、名字、中间名首字母）。

我正在尝试编写一个将字符串转换为“Doe*John*A”的正则表达式。

但是，我必须考虑此字符串的所有空格，因此“Doe , John , A”仍会转换为“Doe*John*A”。

此外，字符串“Doe John A”应转换为“Doe*John*A”。

我开始写这篇文章，但我认为我被困在空格和用户不提供逗号的可能性上。

这是我所拥有的：

```
var myString = "John, Doe, A";
var myOtherString = "John  Doe   A";

var myFunction = function (aString) {
        aString = aString.replace(", ", "*");
        aString = aString.replace(", ", "*");

return aString;

}; 
```

这些都应该返回`"Doe*John*A"`。

我想我在这个功能中重复自己太多了。我也没有考虑到不提供逗号的可能性。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T15:43:46.990

就在这里。改为使用`replace`带有正则表达式的函数。这有几个优点。首先，您不必再调用它两次。其次，很容易解释任意数量的空格和可选的逗号：

```
aString = aString.replace(/[ ]*,[ ]*|[ ]+/g, '*'); 
```

请注意，空格周围的方括号是可选的，但我发现它们使空格字符更易于阅读。如果您想允许/删除那里的任何类型的空格（制表符和换行符），请`\s`改用：

```
aString = aString.replace(/\s*,\s*|\s+,/g, '*'); 
```

请注意，在这两种情况下，我们都不能简单地将逗号设为可选，因为这将允许零宽度匹配，这将`*`在字符串中的每个位置引入 a。（感谢 CruorVult 指出这一点）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T15:54:44.240

如果要替换所有非单词字符，请尝试以下操作：

```
str.replace(/\W+/g, '*'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T15:43:58.870

String.replace 仅替换第一次出现。要全部替换它们，请为“global”添加“g”标志。您还可以使用字符组和 + 运算符（一个或多个）来匹配字符链：

```
aString.replace("[,\s]+", "*", "g"); 
```

这将用 . 替换所有逗号和空格链`*`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T15:49:10.653

试试这个删除所有空格和逗号，然后用 * 替换。

`Myname= myname.replace(/[,\s]/,"*")`

编辑为从模式中删除“至少两个项目”。但至少要有一个项目。

`Myname= myname.replace(/([,\s]{1,})/,"*")`

[参考：在 Rublar 上](http://rubular.com/r/6btBOKRqHy)。但是，根据 m.buettner，您最好使用正则表达式 :)

# c++ - 类构造函数“C2248：'std::basic_ios<_Elem,_Traits>::basic_ios'：无法访问在类 'std::basic_ios<_Elem,_Traits> 中声明的私有成员”

> ID：13955905
> 
> 赞同：2
> 
> 时间：2012-12-19T15:40:57.957
> 
> 标签：c++, visual-studio-2010, stl, ansi

这是我的第一篇文章。

我阅读了很多主题，似乎我做得很好，但是当我尝试编译以下代码时再次出现上述错误：

```
// Header file

#include <fstream>
#include <ostream>
#include <string>

using namespace std;

class CLogger
{
private:
    ostream m_oStream;

public:
    CLogger(ostream& oStream);
    CLogger(const string sFileName);
};

// Implementation file

CLogger::CLogger(ostream& oStream) : 
m_oStream(oStream) // <-- Here is the problem?!
{
}

CLogger::CLogger(const string sFileName) :
    m_oStream(ofstream(sFileName.c_str()))
{   
} 
```

你可以帮帮我吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:43:40.260

```
CLogger::CLogger(ostream& oStream) : // <-- Here is the problem?!
m_oStream(oStream) 
```

问题不在第一行，而在第二行。

由于 member`m_oStream`被声明为非引用，因此上面的第二行尝试复制`oStream`它是不可能的，因为复制构造函数已`std::ostream`被禁用`private`，这是您在错误消息*“无法访问私有”中看到的成员。”*

修复是这样的：

```
std::ostream * m_oStream; //declare it as pointer.
bool m_deleteStream;      //flag whether to delete m_oStream or not 
```

现在这样做：

```
CLogger::CLogger(ostream& oStream) : 
m_oStream(&oStream), m_deleteStream(false)
{
}

CLogger::CLogger(const string sFileName) :
m_oStream(new std::ofstream(sFileName)), m_deleteStream(true)
{
  //Note : in C++03, you've to pass sFileName.c_str() to 
  //the constructor of std::ostream   
} 
```

然后你要把析构函数写成：

```
~CLogger()
 {
    if ( m_deleteStream )
    {
        delete m_oStream;
    }
 } 
```

重要的一点：由于这是一个资源管理（记录器）类，因此使其不可复制是一个好主意，因为复制对于记录器实例没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:43:26.947

在

```
m_oStream(ofstream(sFileName.c_str())) 
```

你用它构建一个`ofstream`并复制构建你`m_oStream`的。写吧

```
m_oStream(sFileName.c_str()) 
```

流既不是可复制构造的，也不是可复制分配的，尽管它们是可移动类型，所以我猜你在这个例子中*没有*使用 C++11。

出于同样的原因，

```
CLogger::CLogger(ostream& oStream) : 
    m_oStream(oStream) 
```

不会工作。您不能复制，只能移动（在 C++11 中）或持有某种形式的引用。

* * *

边注：

从您的示例中，您是否这样做并不完全清楚，但不要忘记在头文件中包含保护。

# java - glBufferSubData 1281 错误

> ID：13955910
> 
> 赞同：0
> 
> 时间：2012-12-19T15:41:04.630
> 
> 标签：java, debugging, opengl, lwjgl

我正在尝试使实例化渲染正常工作，但我似乎找不到 glBufferSubData 给我 1281 异常（无效值）的原因。

这是我的代码：

```
FloatBuffer square_vertices_fb = BufferUtils.createFloatBuffer(16);
     square_vertices_fb.put(square_vertices);
     square_vertices_fb.rewind();

     FloatBuffer instance_colors_fb = BufferUtils.createFloatBuffer(instance_colors.length);
     instance_colors_fb.put(instance_colors);
     instance_colors_fb.rewind();

     FloatBuffer instance_positions_fb = BufferUtils.createFloatBuffer(instance_positions.length);
     instance_positions_fb.put(instance_positions);
     instance_positions_fb.rewind();
    glBufferData(GL_ARRAY_BUFFER, square_vertices.length + instance_colors.length + instance_positions.length, GL_STATIC_DRAW);
    System.out.println(Integer.toString(glGetError()));
    glBufferSubData(GL_ARRAY_BUFFER, 0, square_vertices_fb);
    System.out.println(Integer.toString(glGetError()));
    glBufferSubData(GL_ARRAY_BUFFER, square_vertices.length, instance_colors_fb);
    glBufferSubData(GL_ARRAY_BUFFER, square_vertices.length + instance_colors.length, instance_positions_fb); 
```

我在第一次错误检查时得到 0（无错误），但在第一个 glBufferSubData 之后出现 1281 错误。

关于这里有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:47:48.897

好的，我发现 LWJGL 的 glBufferSubData 需要以字节为单位的偏移量。问题已解决。

# memory - 即使未达到 memory_limit，PHP 也会出现内存不足错误

> ID：13955914
> 
> 赞同：23
> 
> 时间：2012-12-19T15:41:14.937
> 
> 标签：memory, php, php-ini

我刚刚继承了一个带有 PHP 脚本的站点，该脚本一直在 117 MB 内存不足。即使我通过 php.ini 将 PHP 的 memory_limit 变量增加到 312 MB，也会发生这种情况。

**由于 pcguru 提供了一个很好的线索，现在这个问题得到了解决。请参阅下面开始的我的答案：*我终于找到了答案***

`ini_get('memory_limit')`返回在 php.ini 中设置的值，所以我确定 Apache 在更改值后已经重新启动。我`memory_get_usage(true)`用来返回脚本在沿途各个点消耗的内存。当它达到 117 MB 时，它一直在失败。

是否有一些我不知道的内部 PHP 限制，它从来没有为单个脚本分配超过 117MB 的空间？

服务器有 1GB 的 RAM 并运行 CentOS。我有 root shell 访问权限。PHP 版本为 5.3.18。MySQL 版本为 5.1.66-cll。

该脚本位于用户名/密码后面，我无法提供对其的公共访问权限。

编辑添加：

1）感谢大家迄今为止的帮助。您可以在我对以下各种答案下的特定用户评论的回复中找到更多信息。

2) Suhosin 肯定没有安装。我检查了多个地方，包括运行脚本并检查常量和运行 php -v

3) apache 日志没有记录我收到的具体错误消息。日志在 php.ini 中打开。我通过 grep 管道搜索整个日志。

4）在这种情况下是否可能报告了错误的错误？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T07:53:04.993

我终于找到了答案。线索来自 pcguru 的回答，开头是“因为服务器只有 1 GB 的 RAM……”。

凭直觉，我想看看 Apache 是否有自己的内存限制，因为这些限制可能会影响 PHP 分配内存的能力。在 httpd.conf 的顶部，我发现了这个语句：RLimitMEM 204535125

这是由 whm/cpanel 放在那里的。根据以下网页 whm/cpanel 在虚拟服务器上错误地计算其值... [http://forums.jaguarpc.com/vps-dedicated/17341-apache-memory-limit-rlimitmem.html](http://forums.jaguarpc.com/vps-dedicated/17341-apache-memory-limit-rlimitmem.html)

内存不足的脚本大部分都通过了，所以我将 RLimitMEM 增加到 268435456 (256 MB) 并重新运行脚本。它完成了数组合并并生成了 csv 文件以供下载。

ETA：在进一步阅读 RLimitMEM 和 RLimitCPU 之后，我决定将它们从 httpd.conf 中删除。这允许 ini_set('memory_limit','###M') 工作，我现在给那个特定的脚本它需要的额外内存。我还将该服务器上的 RAM 增加了一倍。

感谢大家帮助发现这个相当棘手的问题，特别是 pcguru 提出了让我找到解决方案的重要线索。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-19T20:58:51.563

由于服务器只有 1 GB 的 RAM，我倾向于您实际上完全用完系统内存的可能性。

[看到这个线程](https://stackoverflow.com/questions/8808125/random-php-fatal-error-out-of-memory-errors)。您会得到相同的“PHP 致命错误：内存不足”，而不是更常见的“致命错误：允许的内存大小...”。您的错误表明系统根本无法分配更多内存，这意味着即使是 PHP:s 内部函数也无法分配更多内存，更不用说您自己的代码了。

PHP 如何配置为与 Apache 一起运行？作为模块还是作为 CGI？您可以同时运行多少个 PHP 进程？你有可用的交换空间吗？

如果您在 Apache 中使用 PHP 作为模块，Apache 有一个讨厌的习惯，即保留 PHP 进程分配的内存。猜测由于它无法重新启动worker中的PHP模块，所以只需完全重新启动worker。随着时间的推移，每个为 PHP 提供服务的工作人员都会简单地增长到 PHP 内存限制，因为该工作人员服务于一个分配大量 RAM 的脚本。因此，如果您同时有许多工作人员，每个工作人员使用 100 MB 以上，您将很快耗尽 RAM。尝试限制 Apache 中同时工作的人数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T15:52:45.160

这可能不是您问题的答案，但是如果您从命令行运行 PHP，您可以覆盖 php.ini 的内存限制。

```
php -d memory_limit=321M my_script.php 
```

我不确定通过 cli 的默认内存限制是多少。

此外，您可以运行`php --ini`并检查结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T16:31:23.257

这不是为什么您的脚本在使用一定的内存后死亡的答案，但是您可以通过完全在 PHP 脚本本身中删除内存限制来解决它：

```
ini_set('memory_limit', '-1'); 
```

**这是危险的。** 如果您有一个失控的脚本，PHP 将占用内存，直到您的服务器没有剩余可分配并崩溃。*因此，只有在确定*脚本本身没有问题时才应该使用它，并且仅用于测试输出。

至于PHP是否对内存使用有一些每个脚本的限制，没有。我亲自运行了近 1GB 内存使用的脚本。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-12-19T16:09:39.470

您的代码中某处有一个无限循环。

# objective-c - 使用 GCC 在 Windows 7 上的 Objective-C

> ID：13955924
> 
> 赞同：1
> 
> 时间：2012-12-19T15:41:38.373
> 
> 标签：objective-c, gcc, windows-7, batch-file

我正在学习`Objective-C`。我在 Windows 7 上设置了 GNU Step(GCC) 来编译和运行`Objective-C`. 我跑`cmd.exe`和打字

`1: gcc -x objective-c <filename.m> -o <obj.o>`

然后我输入

`2: obj.o`

并且`Objective-C`文件执行。首先请告诉我我是否在赛道上。如果是，那么我该如何制作`BAT`文件来执行这两个步骤？`Objective-C`否则告诉我在 GCC 上编译和运行文件的正确方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:50:26.920

您可以尝试编写一个简单的 GNUmakefile 并使用 GNUstep-make 构建您的源代码（应该已经安装）这里是如何编写的。将它与源文件放在同一个文件夹中，然后键入 make。

[http://www.gnustep.it/nicola/Tutorials/WritingMakefiles/node2.html](http://www.gnustep.it/nicola/Tutorials/WritingMakefiles/node2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:00:49.587

GNU Step shell 就像 unix shell，所以你的`.bat`文件不会执行。所以创建一个`.sh`文件

例如

运行文件.sh

```
echo "Argument $1"
gcc -x objective-c $1 -o MyObj.o
MyObj.o 
```

`$1`传递给`.sh`文件的参数在哪里`user/myDir>sh runFile.sh MyFile.m`

* * *

**已编辑**

这是`cm.sh`我在运行 GNU 步骤时使用的

命令文件

```
gcc -o hello hello.m -I /c/GNUstep/GNUstep/System/Library/Headers -L  /c/GNUstep/GNUstep/System/Library/Libraries -lobjc -lgnustep-base -fconstant-string-class=NSConstantString 
```

这是`hello.m`我运行的程序

```
#import  <Foundation/Foundation.h>

int main()
{
printf("helkjfkaskdhfkjas\n\n");

NSObject *obj;
NSString *str1 = @"Hello";
NSString *str = [[NSSstring alloc] initWithString:str1];

printf("cnst = %d     var =%d",[str1 retainCount],[str retainCount]);

return 0;
} 
```

# ios - 如何有效地设置http body请求？

> ID：13955930
> 
> 赞同：2
> 
> 时间：2012-12-19T15:42:11.033
> 
> 标签：ios, nsdictionary, parameter-passing, key-value, http-request

在我的应用程序中，我目前正在从每个视图控制器发送 http 请求。但是，目前我正在实现一个类，它应该具有发送请求的方法。

我的请求在参数数量上有所不同。例如，要获取 tableview 的列表，我需要将类别、子类别、过滤器和另外 5 个参数放入请求中。

这就是我的请求现在的样子：

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
         [request setValue:verifString forHTTPHeaderField:@"Authorization"]; 
         [request setURL:[NSURL URLWithString:@"http://myweb.com/api/things/list"]];
         [request setHTTPMethod:@"POST"];
         [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

         NSMutableString *bodyparams = [NSMutableString stringWithFormat:@"sort=popularity"];
         [bodyparams appendFormat:@"&filter=%@",active];
         [bodyparams appendFormat:@"&category=%@",useful];
         NSData *myRequestData = [NSData dataWithBytes:[bodyparams UTF8String] length:[bodyparams length]];
[request setHTTPBody:myRequestData] 
```

我的第一个想法是创建一个方法，它接受所有这些参数，那些不需要的参数是 nil，然后我会测试哪些是 nil，哪些不是 nil 将附加到参数字符串（ms）。

然而，这是非常低效的。后来我在考虑传递一些带有参数存储值的字典。类似于 android 的 java 中使用的带有 nameValuePair 的数组列表。

我不确定，如何从字典中获取键和对象

```
 -(NSDictionary *)sendRequest:(NSString *)funcName paramList:(NSDictionary *)params 
{
  // now I need to add parameters from NSDict params somehow
  // ?? confused here :)   
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T16:04:27.313

你可以从字典中构造你的 params 字符串，如下所示：

```
/* Suppose that we got a dictionary with 
   param/value pairs */
NSDictionary *params = @{
    @"sort":@"something",
    @"filter":@"aFilter",
    @"category":@"aCategory"
};

/* We iterate the dictionary now
   and append each pair to an array
   formatted like <KEY>=<VALUE> */      
NSMutableArray *pairs = [[NSMutableArray alloc] initWithCapacity:0];
for (NSString *key in params) {
    [pairs addObject:[NSString stringWithFormat:@"%@=%@", key, params[key]]];
}
/* We finally join the pairs of our array
   using the '&' */
NSString *requestParams = [pairs componentsJoinedByString:@"&"]; 
```

如果您记录`requestParams`字符串，您将获得：

> filter=aFilter&category=aCategory&sort=某事

PS 我完全同意@rckoenes，这`AFNetworking`是此类操作的最佳解决方案。

# asp.net-mvc - Asp.Net MVC 4 - 将对象模型添加到另一个对象模型中的 ICollection

> ID：13955936
> 
> 赞同：1
> 
> 时间：2012-12-19T15:42:25.980
> 
> 标签：asp.net-mvc, model, icollection

## 一些背景

我的 Asp.Net MVC 4 数据库第一个应用程序、提交和评论中有 2 个表。*（还有很多，但它们与这个问题无关）*。任何给定的提交都可以有任意数量的评论（一对多）与之关联。

我有一个提交详细信息页面，用户可以在该页面上打开一个带有部分视图的 jQuery 对话框，以向提交添加评论。此部分视图绑定到为添加注释而创建的强类型视图模型。

## 表格/模型

**提交表**

这是提交表的类模型。（为简单起见，我省略了一些属性）。

```
Partial Public Class Submission
    Public Property Submission_ID As Integer
    Public Property Submission_Hash As String
    Public Property Created As Nullable(Of Date)
    Public Property Modified As Date

    Public Overridable Property Comments As ICollection(Of Comment) = New HashSet(Of Comment)
End Class 
```

**评论表**

这是 Comment 表的类模型。（再次，为简单起见，我省略了一些属性）。

```
Partial Public Class Comment
    Public Property Comment_ID As Integer
    Public Property User_ID As Nullable(Of Integer)
    Public Property Comment_Type As Nullable(Of Integer)
    Public Property Comment1 As String
    Public Property Created As Nullable(Of Date)
    Public Property Modified As Date

    Public Overridable Property Comment_Type1 As Comment_Type
    Public Overridable Property User As User
    Public Overridable Property Submissions As ICollection(Of Submission) = New HashSet(Of Submission)
End Class 
```

## 要求

我正在尝试做的是向给定提交的已存在的评论集合中添加新评论。

## 至今...

到目前为止，我有一个添加注释对话框的视图模型，它在我的控制器中初始化，然后将填充的视图模型返回给控制器的 post 方法。这是代码

**视图模型**

```
Public Class SubmissionAddCommentViewModel

    <Display(Name:="Submission")> _
    Public Property Submission_ID As Integer

    <Display(Name:="User")> _
    Public Property User_ID As Integer

    <Display(Name:="Comment type")> _
    Public Property Comment_Type As Integer

    <Required(ErrorMessage:="Please enter a comment.")> _
    <Display(Name:="Comment")> _
    Public Property Comment As String

End Class 
```

**视图模型生成器**

```
Public Class SubmissionAddCommentViewModel_Builder

    Implements IModelBuilder(Of SubmissionAddCommentViewModel, Comment)
    ReadOnly db As GeosightEntities
    ReadOnly submission As Submission

    Public Sub New(db As GeosightEntities, submission As Submission)
        Me.db = db
        Me.submission = submission
    End Sub

    Public Function CreateFrom(entity As Comment) As SubmissionAddCommentViewModel Implements IModelBuilder(Of SubmissionAddCommentViewModel, Comment).CreateFrom
        Dim model = New SubmissionAddCommentViewModel()

        model.Submission_ID = submission.Submission_ID
        model.User_ID = GetLoggedIn_ID()

        Return model
    End Function

    Public Function Rebuild(model As SubmissionAddCommentViewModel) As SubmissionAddCommentViewModel Implements IModelBuilder(Of SubmissionAddCommentViewModel, Comment).Rebuild
        Return model
    End Function

    Public Sub Add(model As SubmissionAddCommentViewModel)
        Dim comment As New Comment

        ' Map the ViewModel and Model fields
        comment.Comment_Type1 = If(IsNothing(model.Comment_Type), Nothing, db.Comment_Type.Find(model.Comment_Type))
        comment.User = db.Users.Find(model.User_ID)
        comment.Comment1 = model.Comment
        comment.Modified = Now

        ' Add the comment
        db.Submissions.Find(model.Submission_ID).Comments.Add(comment)
        db.SaveChanges()
    End Sub

End Class 
```

**控制器获取方法**

```
Function AddComment(Optional ByVal id As Integer = Nothing) As ActionResult

    Dim commentAddView As New SubmissionAddCommentViewModel
    Dim submission As Submission = db.Submissions.Find(id)
    Dim comment As New Comment

    If IsNothing(submission) Then
        Return HttpNotFound()
    End If

    Me.builder_AddComment = New SubmissionAddCommentViewModel_Builder(db, submission)

    ' Create the instance of the submission add comment view model
    commentAddView = builder_AddComment.CreateFrom(comment)

    If Request.IsAjaxRequest Then
        Return PartialView("AddCommentPartial", commentAddView)
    End If

    Return View(commentAddView)
End Function 
```

**控制器 Post 方法**

```
<HttpPost()> _
Function AddComment(ByVal commentAddView As SubmissionAddCommentViewModel) As ActionResult

    Dim comment As New Comment
    builder_AddComment = New SubmissionAddCommentViewModel_Builder(db, db.Submissions.Find(commentAddView.Submission_ID))

    ' Handle invalid comment models
    If Not ModelState.IsValid Then

        If Request.IsAjaxRequest Then
            Return PartialView("AddCommentPartial", commentAddView)
        End If

        Return View(commentAddView)
    End If

    ' Add the comment
    Me.builder_AddComment.Add(commentAddView)

    ' Display the successful message
    If Request.IsAjaxRequest Then
        Return PartialView("AddCommentSuccessPartial", commentAddView)
    End If

    Return RedirectToAction("Details", New With {.id = commentAddView.Submission_ID})

End Function 
```

## 问题

在测试上述功能时，`db.SaveChanges()`在 ViewModel 构建器中一直执行成功，但是一旦运行此行，执行就会停止。我不知道发生了什么，因此完全卡住了。

有谁知道**A）**我是否要以正确的方式添加评论？**B）**为什么这条线在没有任何错误的情况下停止执行？

* * *

## 更新

感谢 Peter Smith 建议在代码周围放置一个 Try Catch，我不知道为什么我一开始没有想到或这样做。

我现在收到以下错误：

> {MySql.Data.MySqlClient.MySqlException (0x80004005): 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '(SELECT" & vbLf & " `Submission_Comment`. `Submission_ID`, " & vbLf & " 附近使用的正确语法`Submission_Comment`。在 MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId) 的第 1 行" & vbCrLf & " 在 MySql.Data.MySqlClient.MySqlStream.ReadPacket()" & vbCrLf & " & vbCrLf & " 在 MySql。 Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int64& insertedId)" & vbCrLf & " 在 MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)" & vbCrLf & " 在 MySql.Data.MySqlClient .MySqlDataReader.NextResult()" & vbCrLf & " 在 MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior 行为)" & vbCrLf & " 在 MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()" & vbCrLf & " 在 MySql。数据.MySqlClient.MySqlCommand。`2 identifierValues, List`1 generateValues)" & vbCrLf & " 在 System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter 适配器)}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:16:23.973

我设法找到了问题并实施了解决方案。为了帮助可能遇到与我相同问题的其他人，这是我的解决方案。

在我的 MySQL 模式中，Submission 和 Comment 表之间的中间表 (Submission_Comment) 有 2 列...Submission_ID 和 Comment_ID。

当我设置表时，我将这些列设为外键，但忘记将它们设为复合主键。**将 2 列设为复合主键解决了我的问题。**

# c++ - 致命错误：QTextStream：没有这样的文件或目录

> ID：13955938
> 
> 赞同：0
> 
> 时间：2012-12-19T15:42:39.900
> 
> 标签：c++, linux, qt4, codeblocks

我想尝试在 qt4 中写一些东西。我开始阅读教程。我尝试从这个页面运行简单的代码：http: [//zetcode.com/gui/qt4/datetime/](http://zetcode.com/gui/qt4/datetime/)我很惊讶。我最好的 IDE（code::Blocks，最新版本）告诉我：

> 致命错误：QTextStream：没有这样的文件或目录

嗯，感兴趣。如果改变了什么，我正在使用 Arch Linux。

当然，我搜索了 /usr 目录，并且那里有适当的文件。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-17T05:31:41.727

在 Ubuntu/Debian 上，这将修复您的错误：

```
 apt-get install qt4-dev-tools 
```

（抱歉，我不了解 Arch Linux。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T13:52:21.377

截至 2017 年，`qt4-dev-tools`不包括`qt4-dev`. 在 ubuntu 16 或更高版本上，您可能需要：

```
apt-get install qt4-dev-tools qt4-make libqt4-dev 
```

令人不安的是，`apt-cache search QTextStream`它没有列出该包，而是列出了带有 .so 的包

# mongodb - MongoDB upsert - 在更新之前知道数据的版本，以防更新

> ID：13955946
> 
> 赞同：1
> 
> 时间：2012-12-19T15:43:11.867
> 
> 标签：mongodb

在 MongoDB 中，启用写关注，如果数据库执行更新或插入，我可以获得信息。如果有更新，是否有可能知道更新前的数据是什么？类似于传统 RDBMS 中的更新触发器 - 删除和插入。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:29:21.363

您可以使用[findAndModify](http://docs.mongodb.org/manual/reference/command/findAndModify/)更新并返回修改前的文档状态。

# android - 适用于 Android 的 3rd 方平台 sdks 或库概述

> ID：13955947
> 
> 赞同：5
> 
> 时间：2012-12-19T15:43:13.123
> 
> 标签：android, sdk, amazon-web-services, libraries, facebook-android-sdk

我对 android 还是有点陌生​​，我一直在努力寻找一个可以概述适用于 android 的 3rd 方平台 sdk 的地方，例如：facebook SDK、onecloud sdk（用于使用 box.com）， AWS Sdk（用于使用 Amazon Web Services）等等。

我正在寻找一些与您可以从[Programmable Web API 目录](http://www.programmableweb.com/apis/directory)中检索到的 API 列表等效的资源，但寻找适用于 Android 的可用 SDK。我知道实际上上面 API 目录中列出的大多数 API 都可以通过 android 使用 XMPP、REST 等进行访问。但我特别关注的是已经通过 SDK 打包的内容，它不仅隐藏了网络部分，而且可能实现缓存或其他方便的功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T14:59:26.777

[实际上，我刚刚在AppBrain 网站上](http://www.appbrain.com/stats/libraries/dev)找到了一个很好的关于 Android 可用 sdks 和库的概述。如果有人知道更好的资源，请分享

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T06:03:27.037

[在这里](http://edgar.tumblr.com/post/2060687444/a-list-of-3rd-party-libraries-for-android)查看，有一个列表，但您每天都可以找到新的库。始终搜索它们并查看编程论坛。

# liferay-6 - 带有标签的搜索容器分页

> ID：13955950
> 
> 赞同：4
> 
> 时间：2012-12-19T15:43:23.183
> 
> 标签：liferay-6

我有 3 个标签，即。3-Jsp 和一个主要的 Jsp 包括所有选项卡。所有选项卡都有搜索容器。当我单击下一步时，它会自动将我发送到第一个选项卡。我的标签是完美的问题，只有在 searchcontainer 上触发操作时才会出现。

">

```
 <liferay-ui:search-container-results
        results="<%=ListUtil.subList(users, searchContainer.getStart(), searchContainer.getEnd()) %>"
        total="<%=usersNameList.size() %>"
    />
        <liferay-ui:search-container-row
            className="com.liferay.portal.model.User"
            keyProperty="userId"
            modelVar="userToDisplay"
        >
            <liferay-ui:search-container-column-text
                name="UserName"
                value="<%=userToDisplay.getFullName() %>"
            /> 
```

我应该在 iteratorurl 中写什么来克服这个问题..帮帮我。

谢谢杰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:15:47.517

朋友我得到了解决方案。

```
<%
    PortletURL url= renderResponse.createRenderURL();  
//creates a portlet url and now add the attributes that make you traverse till current page.
//In my case view->Group tab -> Add Users(addUserSelected is action) -> SearchContainer
// tabs 1 takes value group
//action is addUserSelected so it will traverse till here
//Now only set this url in Iterator URL in search container
    url.setParameter("tabs1", "Group");
    url.setParameter("actionvalue","user");
    url.setParameter("action","addUserSelected"); //name of action by which you get the page on current tab
    url.setParameter("typePage","adduser");
%>

<liferay-ui:search-container delta="10" emptyResultsMessage="Data-Not-Found" iteratorURL="<%=url %>" >

    <liferay-ui:search-container-results
        results="<%=ListUtil.subList(users, searchContainer.getStart(), searchContainer.getEnd()) %>"
        total="<%=usersNameList.size() %>"
    />
        <liferay-ui:search-container-row
            className="com.liferay.portal.model.User"
            keyProperty="userId"
            modelVar="userToDisplay"
        >
            <liferay-ui:search-container-column-text
                name="UserName"
                value="<%=userToDisplay.getFullName() %>"
            />

            <liferay-ui:search-container-column-text>
                <input type="checkbox" name="userCheck" id="userCheck" value="<%=String.valueOf(userToDisplay.getUserId())%>"/>
            </liferay-ui:search-container-column-text>
            <%-- //<%} %> --%>
        </liferay-ui:search-container-row>
        <liferay-ui:search-iterator/>

</liferay-ui:search-container> 
```

注意：不要使用静态名称，尽管您可以使用

# json - 如何使用 Dart 序列化获取 JSON 序列化字符串

> ID：13955956
> 
> 赞同：10
> 
> 时间：2012-12-19T15:43:45.937
> 
> 标签：json, serialization, dart

对于以下代码

```
var address = new Address();
address.street = 'N 34th';
address.city = 'Seattle';
var serialization = new Serialization()
 ..addRuleFor(address);
String output = serialization.write(address); 
```

我如何获得这样的 json 输出：

```
address: {'street':'N 34th', 'city':'Seattle'} 
```

上述代码生成的输出如下：

```
{"roots":[{"__Ref":true,"rule":3,"object":0}],"data":[[],[],[],[["Seattle","N 34th"]]],"rules":"{\"roots\":[{\"__Ref\":true,\"rule\":1,\"object\":0}],\"data\":[[],[[{\"__Ref\":true,\"rule\":4,\"object\":0},{\"__Ref\":true,\"rule\":3,\"object\":0},{\"__Ref\":true,\"rule\":5,\"object\":0},{\"__Ref\":true,\"rule\":6,\"object\":0}]],[[],[],[\"city\",\"street\"]],[[]],[[]],[[]],[[{\"__Ref\":true,\"rule\":2,\"object\":0},{\"__Ref\":true,\"rule\":2,\"object\":1},\"\",{\"__Ref\":true,\"rule\":2,\"object\":2},{\"__Ref\":true,\"rule\":7,\"object\":0}]],[\"Address\"]],\"rules\":null}"} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T18:21:57.257

事实证明，`dart:json`图书馆使这变得非常容易。您需要`toJson`在您的课程中实施以使其工作。

例如：

```
class Address {
  String street;
  String city;

  Map toJson() {
    return {"street": street, "city": city};
  }
}

main() {
  var addr = new Address();
  addr.street = 'N 34th';
  addr.city = 'Seattle';
  print(JSON.stringify(addr));
} 
```

这将打印出：

```
{"street":"N 34th","city":"Seattle"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:59:50.487

您可以将[JsonObject 用于 Dart](https://github.com/chrisbu/dartwatch-JsonObject)，将其添加到您的`pubspec.yaml`文件中，然后运行`pub install`（工具 - > Pub 安装）

```
dependencies:
  json_object: 
    git: git://github.com/chrisbu/dartwatch-JsonObject.git 
```

然后将您的代码更改为调用`objectToJson`：

```
import 'package:json_object/json_object.dart';

var address = new Address();
address.street = 'N 34th';
address.city = 'Seattle';
String output =  objectToJson(address); 
```

请注意，`objectToJson`目前仅在 Dart VM 中需要镜像支持（反射功能）。截至 2012 年 12 月 20 日，它在 dart2js 中不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:19:14.750

我认为你想要 dart:json 包而不是序列化。序列化的输出是 JSON，但它是序列化结构的 JSON，它担心诸如处理周期之类的事情对于您正在查看的内容来说太过分了。使用基本的 json 包，您可以实现一个 toJson() 方法，该方法将进行转换并且自动处理基本系统对象。这样做的好处是不需要镜像，所以它可以在当前的 dartj2s 上工作。或者您可以像上一个答案一样使用 json_object 。

# sharepoint-2007 - 从代码调用时，sharepoint 2007 ItemEventReceiver 未触发

> ID：13955957
> 
> 赞同：0
> 
> 时间：2012-12-19T15:43:46.407
> 
> 标签：sharepoint-2007

我开发了许多响应 ItemUpdated 事件的 ItemEventReceiver 被调用。当我手动编辑列表中的一个项目时，事件会触发，并且在我的世界中一切正常，但是当我编写一个调用同一个列表的应用程序时，获取第一个项目并调用 item.Update() 事件接收器不会触发。但是，我知道我的应用程序正在运行，因为当我通过 SharePoint（Web 前端）检查项目时，我可以看到项目的修改日期已更改。

有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:45:24.940

是的，你忽略了一些东西！您绝对确定事件接收器没有触发吗？不你不是。你有没有放入一些调试语句？呃，不，我没有。布偶！

我的事件处理程序依赖于配置中的设置，这些设置位于 Web 前端的 web.config 中，但不适用于应用程序。

# html - 为视网膜显示器设置特定样式表

> ID：13955959
> 
> 赞同：2
> 
> 时间：2012-12-19T15:44:01.180
> 
> 标签：html, css, stylesheet, media-queries, retina-display

我正在寻找一种方法来设置不同的样式表，具体取决于用户设备是非视网膜还是视网膜。我遇到了很多不同的方法，所以现在我不知道该做什么。尽管在我看来，这似乎更容易，更有效：

```
<link rel="stylesheet" href="myCss.css" media="screen and min-device-pixel-ratio: 2"> 
```

但我不确定它是最新的语法，这是否适用于所有现代浏览器（包括 ie9），有没有办法改进这种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:49:04.680

在您现有的样式表中

```
@media 
(-webkit-min-device-pixel-ratio: 2), 
(min-resolution: 192dpi) { 
    /* Retina-specific stuff here */
} 
```

从

[CSS 技巧](http://css-tricks.com/snippets/css/retina-display-media-query/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:51:17.273

您使用标签中的`media`属性的方法`link`是一个好的开始。虽然我建议使用`media query`可以直接在`.css`.

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

你可以这样做：

```
@media only screen and (min--moz-device-pixel-ratio: 2),
only screen and (-o-min-device-pixel-ratio: 2/1),
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (min-device-pixel-ratio: 2){
    /* The retina stuff here */
    } 
```

进一步阅读：[http ://menacingcloud.com/?c=highPixelDensityDisplays](http://menacingcloud.com/?c=highPixelDensityDisplays)

# linux - 更改为名称中带有空格的目录

> ID：13955960
> 
> 赞同：0
> 
> 时间：2012-12-19T15:44:01.307
> 
> 标签：linux, bash

问这个问题感觉很傻，但似乎无法将目录更改为`Windows XP IE7`. 有关我尝试过的内容，请参见下文。

```
[root@localhost VirtualBox VMs]# ls -l
total 8
drwxr-xr-x 4 justMe justMe 4096 Dec 19 07:20 Windows XP IE6
drwxr-xr-x 4 justMe justMe 4096 Dec 19 06:48 Windows XP IE7
[root@localhost VirtualBox VMs]# cd Windows XP IE6
-bash: cd: Windows: No such file or directory
[root@localhost VirtualBox VMs]# cd Win*
[root@localhost Windows XP IE6]# ls -l
total 3558896
drwx------ 2 justMe justMe       4096 Dec 19 07:20 Logs
drwx------ 2 justMe justMe       4096 Dec 19 07:20 Snapshots
-rw------- 1 justMe justMe      18529 Dec 19 07:20 Windows XP IE6.vbox
-rw------- 1 justMe justMe      18586 Dec 19 07:20 Windows XP IE6.vbox-prev
-rw------- 1 justMe justMe 3640700928 Jul 24 12:03 Windows XP IE6.vdi
[root@localhost Windows XP IE6]# 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:45:23.913

在 Bash 中，您必须[引用](http://www.gnu.org/software/bash/manual/bashref.html#Quoting)其中包含空格的命令参数。

这就是为什么避免这种空白是一个好主意的原因之一。

你需要：

```
$ cd "Windows XP IE6" 
```

# wpf - 是否有一种简单的方法可以确定控件的可见边界以优化渲染？

> ID：13955961
> 
> 赞同：5
> 
> 时间：2012-12-19T15:44:03.393
> 
> 标签：wpf, rendering, clipping

我们有一个非常大的子控件，它会进行大量渲染以显示其细节，但由于该控件只有一部分实际上是可见的（它被层次结构更上层的东西剪裁，不一定是它的直接父级）我们只想渲染OnRender 调用期间的可见部分。

考虑下图。孩子是 100x50，但可见区域是一个矩形，在孩子坐标中具有 (10,5) 和 (100,50) 的角。这就是我们正在寻找的区域。

![剪掉的孩子](../Images/91069eb08f0468e00b0ce1bb47f3996b.png)

注意：您不能简单地进行从子级到父级的坐标转换并测试裁剪，因为它可能不是进行裁剪的父级。

考虑在 ScrollViewer 中嵌套的 Canvas 控件。内部 Canvas 可以很好地完全位于外部 Canvas 的边界内，但外部 Canvas 可能会被 ScrollViewer 裁剪，因此内部 Canvas 在视觉上也被它裁剪。

遍历视觉树并测试每个父级会降低性能。

那么 WPF 中是否有任何内置的东西可以获取控件可见区域的边界？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T02:17:30.897

我建议，一般来说，在您的 OnRender 方法中，您应该仔细注意它们的 Z 顺序来组合或渲染可见项目，但不必花时间担心可见的内容。这不是 C++。WPF 设计背后的部分原因是系统应该能够为您决定什么是可见的，什么是不可见的。它旨在成为更高级别的抽象。如果您发现您正在编写代码来测试什么是可见的，以及该可见部分的边界是什么——您可能没有正确使用它。是..有点懒惰。这（你上面描述的）应该很简单。

当您的可见对象四处滑动或以垂直顺序（即 Z 顺序）移动时，它们将变得可见或不可见。如果您希望某些东西不可见，尽管它在 Z 顺序中的位置，那么您可以使其不可见（理想情况下，通过将其绑定到评估为 Visibility.Visible、Visibility.Hidden 或 Visibility.Collapsed 的属性）。

另请注意：在查看图形的各种实现时——尤其是对于从其他平台进入 WPF 的开发人员，我经常发现实际上没有必要重写 OnRender。除非您有大量必须实时呈现的图形，否则您通常可以让 WPF 为您完成工作，并且只需定义您想要在 XAML 中显示的内容。

# mongodb - 从 MongoDB C# 获取 upsert 结果代码或确认

> ID：13955965
> 
> 赞同：2
> 
> 时间：2012-12-19T15:44:10.437
> 
> 标签：mongodb, insert, upsert

我想知道 MongoDB 是否执行了插入或更新了记录。如何通过 C# 驱动程序找到它？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:42:34.557

最新版的官方c#驱动默认开启了SafeMode，这意味着所有的操作都通过getLastError方法返回操作结果。SafeMode 也被重命名为 WriteConcern。

# cvs - 如何在 cvs 客户端中设置文件名和提交编码

> ID：13955969
> 
> 赞同：3
> 
> 时间：2012-12-19T15:44:29.793
> 
> 标签：cvs

在 CVS for eclipse 插件中有“服务器编码”属性，但在正常`cvs`命令中没有。

如何指定要使用的编码？

我正在尝试使用 cygwin 的两者版本将 cvs repo 转换为 git。当“服务器编码”为“cp1251”时，Eclipse 文件名和注释正常显示

在 cygwin 环境下，LANG 变量的变化是没有影响的。

在 cvs 手册页中没有“编码”、“代码页”或类似内容的引用

```
$ cvs --version
Concurrent Versions System (CVS) 1.12.13 (client/server) 
```

如果我使用文件名命令提取 cvs 日志，`cvs rlog`然后将其传递给 iconv -f -t 那么它会正确显示。这证明有某种方法可以提取这些信息。

看起来 git cvsimport 使用 cvsps 输出并提供了一些将选项传递给 cvsps 的方法。下一个问题是 - 我如何告诉 cvsps 转换输出？也许我应该使用一些真正的 cvsps 的 cvsps 包装器？或某种临时补丁集存储？

# exception - ZK 中的 vlayout 问题

> ID：13955970
> 
> 赞同：2
> 
> 时间：2012-12-19T15:44:33.760
> 
> 标签：exception, components, zk, zul

我是 ZK 的新手。我已经创建了一个包含 vlayout 组件的 zul 文件。这是整个代码：

```
 <?page title="My Chart"?>

   <zk xmlns="http://www.zkoss.org/2005/zul"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.zkoss.org/2005/zul
      http://www.zkoss.org/2005/zul/zul.xsd">

    <vlayout apply="org.zkoss.bind.BindComposer" viewModel="@id('vm') @init('util.charts.LineChartVM')" >
       <chart id="chart" title="Half-Year Report" width="520" height="350" paneColor="#FFFFFF"
           type="line" yAxis="Amount"
           model="@bind(vm.model)" engine="@bind(vm.engine)" threeD="@bind(vm.threeD)"
       />
      <hlayout visible="@bind(not empty vm.message)">
         You clicked on :<label value="@bind(vm.message)"/>
     </hlayout>
    </vlayout>

  </zk> 
```

此外，我在 pom 文件中添加了以下代码段：

```
 <dependency>
        <groupId>org.zkoss.zk</groupId>
        <artifactId>zul</artifactId>
        <version>3.6.3</version>
    </dependency> 
```

但是，当我运行该文件时，出现以下错误：

```
org.zkoss.zk.ui.metainfo.DefinitionNotFoundException: Component definition not found: vlayout in [LanguageDefinition: xul/html],... 
```

我的 zul 版本似乎不支持 vlayout。有谁知道这个问题的可能解决方案？有没有人有类似的经历？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T16:02:14.353

问题是你的 pom.xml 中的 zk 版本。
[Vlayout](http://books.zkoss.org/wiki/ZK_Component_Reference/Layouts/Vlayout)从 5.0.4 开始可用，但您使用
的是 3.6.3，我想最好使用 6.5.0，这是最新的 zk。
但是您至少需要 6.0 cos，因为您正在使用数据绑定。

# reporting-services - 在“报表管理器”网站中创建新文件夹后出现 SSRS 错误？

> ID：13955972
> 
> 赞同：0
> 
> 时间：2012-12-19T15:44:40.200
> 
> 标签：reporting-services

> **可能重复：**
> [“找不到指定的报表服务器 url”错误部署报表服务器](https://stackoverflow.com/questions/11279871/the-specified-report-server-url-could-not-be-found-error-shile-deploying-repor)

我在我的“报告管理器”网页上组织报告，我创建了一个新文件夹并在其中移动了一些报告。

之后我在 SSRS 中收到以下错误：

> TargetServerURL 无效。在部署设置中为报表服务器指定有效 URL

![在此处输入图像描述](../Images/ce49d27e3e65928245bbbe018e46f914.png)

新文件夹中的 URL 是`http://10.0.1.106/Reports/Pages/Folder.aspx?ItemPath=%2fSurveyLevel&ViewMode=Detail`（这是相关的 URL）

这是“报告管理器”页面的屏幕截图 -

![在此处输入图像描述](../Images/7aafd9734649ed44c6aeb72df2c98760.png)

# javascript - 如何在每个循环中推迟一个 jQuery

> ID：13955976
> 
> 赞同：16
> 
> 时间：2012-12-19T15:44:45.067
> 
> 标签：javascript, jquery, underscore.js

我在 jQuery 每个循环中执行“繁重”的画布操作，导致速度较慢的设备（IE 和 iPad）有时变得完全没有响应。

所以我想我可以使用下划线`_.defer()`将每个循环中的函数排队，例如：

```
function handleAsset = _.defer(function(){
//weightlifting goes here (partly async)
});

$.each(assets, handleAsset); 
```

然而，这会引发一个奇怪的错误（堆栈跟踪指向`$.each`）：

```
Uncaught TypeError: Object 20877 has no method 'call' 
```

这种方法有缺陷吗？这是由于处理函数内部正在进行异步操作吗？是否有另一种/更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-19T15:59:38.573

这是有缺陷的。您应该尝试在可能的最低点*解耦*/*分解代码。*我认为从长远来看，仅仅解耦循环的每次迭代就足够了。

但是，您真正需要做的是，设置一个*异步失控计时器*，为实现提供足够的空间来更新*UI 队列*（或*UI 线程*）。这通常使用`setTimeout()`（客户端）、`nextTick`（node.js）或`setImmediate`（即将推出）等方法完成。

例如，假设我们有一个数组，我们想要处理每个条目

```
var data = new Array(10000).join( 'data-' ).split('-'); // create 10.000 entries

function process( elem ) {
    // assume heavy operations
    elem.charAt(1) + elem.charAt(2);
}

for(var i = 0, len = data.length; i < len; i++ ) {
    process( data[i] );
} 
```

现在这段代码是一个经典的循环，遍历数组并处理它的数据。它还会消耗 100% 的 CPU 时间，因此只要需要处理所有条目就会*阻塞*浏览器*UI 队列（这基本上意味着浏览器 UI 将冻结并变得无响应）。*

为了避免这种情况，我们可以创建一个这样的结构：

```
var data  = new Array(10000).join( 'data-' ).split('-'); // create 10.000 entries

function runAsync( data ) {
    var start = Date.now();

    do {
        process( data.shift() );
    } while( data.length && Date.now() - start > 100 );

    if( data.length ) {
        setTimeout( runAsync.bind( null, data ), 100 );
    }
}

runAsync( data.concat() ); 
```

**这里会发生什么？**

我们基本上在做的是：

*   *在100 毫秒*的时间范围内获取数组并处理尽可能多的数据/条目
**   之后，停止处理（调用`setTimeout`）并让 UI 有机会更新*   只要我们在数组中还有数据就这样做*

 *任何超过*100 毫秒*的延迟通常都会被人眼识别为“*滞后*”。任何低于它的东西看起来都很流畅和漂亮（至少我们的眼睛会这样告诉我们）。100ms 是一个很好的值作为最大处理时间的限制。我什至建议降低到 50 毫秒。

这里需要注意的是*整体处理时间*会增加，但我认为处理时间更长并保持响应更好，而不是更快的处理和非常糟糕的用户体验。

* * *

快速演示：

*   [经典迭代（移动红色方块，会阻塞）](http://jsfiddle.net/VZSAw/5/)
*   [失控脚本计时器（移动红色方块，将是可能的）](http://jsfiddle.net/VZSAw/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:20:48.210

所以你想限制并发异步操作的数量？您的实施中的缺陷是您将推迟每个操作，直到前一个操作完成。

一种选择是使用序列助手，然后您可以将此队列分解为更易于管理的块进行处理。

[https://github.com/michiel/asynchelper-js/blob/master/lib/sequencer.js](https://github.com/michiel/asynchelper-js/blob/master/lib/sequencer.js)

```
var actions = [];
$.each(assets, function(key, value) {

    actions.push(function(callback) {
      $.ajax({
          url: 'process.php?id='+val,
          success: function(msg) {

            callback();
          }
        });
    });
  }
);

var sequencer = new Sequencer(actions);
sequencer.start(); 
```

如果您将您的操作数组拆分为两个数组，并让它们并排运行，那么您将只能同时运行两个进程，直到两个队列都完成。

例如

```
var arr1 = actions.splice(0,100);
var arr2 = actions.splice(100,200);

var sequencer1 = new Sequencer(arr1);
sequencer1.start();

var sequencer2 = new Sequencer(arr2);
sequencer2.start(); 
```*

# android - HTTP Live Streaming (HLS) 在 Android 4 上不自适应？

> ID：13955977
> 
> 赞同：2
> 
> 时间：2012-12-19T15:44:53.193
> 
> 标签：android, http-live-streaming

我一直在尝试使用 HLS 将视频流式传输到 Android 设备，这是自 HoneyComb 以来正式支持的。问题是，当我使用 Apple HLS 测试流时，似乎没有适应性。当我有一个良好的连接时，我会得到一个高质量的流媒体，但是当我使用 3G 时，我会得到相同的质量和流媒体延迟。为此，我一直在使用标准的 Android 类：

```
String Url = AppleUrl = "http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8";
MediaController mMediaController = new MediaController(this);
VideoView mVideoView = (VideoView) findViewById(R.id.vid);
mVideoView.setVideoPath(Url);
mVideoView.setMediaController(mMediaController);
mVideoView.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
         mp.start();
    }
}); 
```

使用 VLC 时，我得到相同的结果，是否有人测试过 Android 是否真的支持 HLS 流的自适应性？

**更新**

将流 URL 更新为多轨 m3u8 播放列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T10:27:35.043

事实证明，Android 确实支持 HLS 流，但自适应比特率切换部分被忽略了。一旦连接变得更好或更糟并且选择了不同的视频轨道，流就会冻结，然后应用程序就会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:05:55.543

在您的代码示例中，播放列表的 URL 是针对特定比特率的，除非 Android 客户端知道备用再现，否则无法进行自适应流式传输。

您需要为`VideoView`. 试试这个包含多个比特率的：http: [//devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8)

# javascript - 关于编写 jQuery 插件

> ID：13955978
> 
> 赞同：7
> 
> 时间：2012-12-19T15:44:57.000
> 
> 标签：javascript, jquery

我现在已经编写了我的第四个插件，我开始注意到我的开发模式的趋势，并且不确定是否有更好的方法来处理它。

我正在使用插件方法（Addy Osmani 概述的轻量级启动模式，请参见此处：[http](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns) ://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns ）

在我的 Plugin.prototype 中，我有一堆方法，包括我用来调用插件中所有方法的 init() 函数。请原谅混乱，但这就是它的样子：

```
Plugin.prototype = {
init: function() {
this.doMethodOne();
this.doMethodTwo(this.element, this.options)
this.doMethodThree();
},

doMethodOne: function() { .. }
doMethodTwo: function(el, options) { .. }
doMethodThree: function() { .. }

}

$.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, 
                new Plugin( this, options ));
            }
        });
    } 
```

我遗漏了一些信封代码，但我希望你能明白。

我发现我的代码有点缺乏，因为我几乎只是线性地调用我的代码并将其存储在插件命名空间中。

我已经多次阅读插件开发模式和创作文本，仍然这样写。我该如何改进呢？

谢谢 ！

# javascript - 模块模式中的私有成员，不可变？

> ID：13955980
> 
> 赞同：5
> 
> 时间：2012-12-19T15:45:10.030
> 
> 标签：javascript, closures

```
function modify(val, newVal) {
    val = newVal;
}
constructorFunc = function () {
    var _private = false;

    return {
        modifyPrivate: function(toVal) {
            return modify(_private, toVal);  // LINE REFERRED TO BELOW AS X
        }
    };
}
var x = constructorFunc(); 
x.modifyPrivate(true); 
x.modifyPrivate(true);  // _private still starts off as false, meaning it wasn't set to true 
```

我有一个问题是为什么我第二次调用 x.modifyPrivate(true) 为什么当行 X 运行时，传入的 _private 的值仍然是“假”。

如果我稍微修改一下我对闭包的了解，使我可以理解这一点，即闭包是通过引用完成的，并且当您更改引用的值时，您并没有更改原始引用指向的值，而是更改了引用本身指向一些新的价值......但这整件事非常令人困惑，我相信那里的人可以向我指出网上的一张图表来解释这一点。

我也很想知道如何编写此代码，以便实际上修改 _private 以供后续调用 modify()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:49:34.040

JavaScript 总是按值传递，因此无法将变量传递给函数并让函数像您尝试做的那样为其分配新值。

该`modify`功能实际上根本不需要。只需这样做：

```
constructorFunc = function () {
    var _private = false;

    return {
        modifyPrivate: function(toVal) {
            _private = toVal;
            return this; 
        }
    };
}
var x = constructorFunc(); 
x.modifyPrivate(true); 
```

该方法`modifyPrivate`可以访问 private `_private`，因为它是在内部范围中定义的。它`this`按照raina77ow 的建议返回，因此您可以根据需要链接另一个方法调用`x`（例如`x.modifyPrivate(true).foo()`，如果您`foo`像为 所做的那样定义`modifyPrivate`）。

* * *

现在，如果您确实需要修改无法访问该范围的外部函数的值，您可以将私有值包装在一个对象中，然后传递该对象。在这种情况下，传递的值将是对对象的引用，因此可以修改其属性（请注意，您不能重新分配给对象，只需操作属性）：

```
function modify(valObj, newVal) {
    valObj.val = newVal;
    // return whatever is apropriate
}
constructorFunc = function () {
    var _private = {
        val : false
    };

    return {
        modifyPrivate: function(toVal) {
            return modify(_private, toVal);
        }
    };
}
var x = constructorFunc(); 
x.modifyPrivate(true); 
```

# jquery-ui - 如何使用 JqueryAutocomplete 在请求中发送多个参数

> ID：13955981
> 
> 赞同：0
> 
> 时间：2012-12-19T15:45:11.320
> 
> 标签：jquery-ui, jquery, jquery-autocomplete

我正在开发一个返回 JSON 的 API，但 API 调用有两个参数，“term”和“country”：

```
http://127.0.0.1:8000/internalapi/cidades/?country=PT&term=Barreir 
```

如何修改此调用以支持额外的 API 参数“国家”？

```
<script>
$(function() {
    function log( message ) {
        $( "<div>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( "#city" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "http://127.0.0.1:8000/internalapi/cidades/",
                dataType: "jsonp",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                },
                success: function( data ) {
                    response( $.map( data.geonames, function( item ) {
                        return {
                            label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                            value: item.name
                        }
                    }));
                }
            });
        },
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    });
});
</script> 
```

有什么线索吗？

最好的祝福，

* * *

更新1：

选择国家的 HTML：

```
<div class="fieldWrapper">
    <label for="id_country">País:</label>
    <select id="id_country" name="country">
        <option selected="selected" value="">(Nothing)</option>
        <option value="PT">Portugal</option>
        <option value="ES">Espanha</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:46:52.813

您应该将参数添加到数据对象中：

```
 data: {
                featureClass: "P",
                style: "full",
                maxRows: 12,
                name_startsWith: request.term,
                country: $('#id_country').find(":selected").val()
            }, 
```

# grails - Grails Export Plugin - 导出 Div 内容，而不是文档中的类列表

> ID：13955986
> 
> 赞同：0
> 
> 时间：2012-12-19T15:45:27.580
> 
> 标签：grails, plugins, groovy, export, pdf-generation

安装 grails 导出插件并添加后

`<r:require module="export"/>`

`<export:resource />`

到我的 GSP，最终目标是将包含的 DiV/表格内容呈现为 PDF。

*--- 没有类呈现它只是一个到期的 javascript 动态生成的支付过程计算表，因此用户可以在提交支付表单之前将支付摘要作为 pdf 打印到他的本地文件系统。---*

添加按钮集：

```
<export:formats formats="['csv', 'excel', 'ods', 'pdf', 'rtf', 'xml']" /> 
```

并删除所有未使用的数组元素，除了`'pdf'`

在控制器 `def exportService`中添加成功。

在文档中给出了以下示例：

```
def list = {
    if(!params.max) params.max = 10

    if(params?.format && params.format != "html"){
        response.contentType = grailsApplication.config.grails.mime.types[params.format]
        response.setHeader("Content-disposition", "attachment; filename=books.${params.extension}")
exportService.export(params.format, response.outputStream,Book.list(params), [:], [:])
    }

    [ bookInstanceList: Book.list( params ) ]
} 
```

现在我无法适应我的表格/ div内容的用例。如果这是微不足道的，请随意投反对票，然后提示我的想法来解决这个问题。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:31:02.613

导出插件“导出”您明确想要的数据。因此，在给定的示例中，将 Book.list(params) 数据集馈送到导出插件以将其导出。因此，我只想在页面上导出特定的 div / 表格，您必须向导出插件提供所需的数据。

在您的页面上创建一个能够在控制器中生成数据集并将该数据集提供给导出插件的按钮将是一种解决方案。

# mysql - 将 .sql 文件插入您的 MySQL 数据库

> ID：13955988
> 
> 赞同：3
> 
> 时间：2012-12-19T15:45:34.367
> 
> 标签：mysql, database, phpmyadmin, xampp

我已经安装了 XAMPP。在此我通过 PhpMyadmin 创建了一个数据库。

如何将 SQL 文件上传到数据库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T15:54:52.977

按照 setps 将您的 sql 文件上传到数据库。

1.  从您的浏览器运行此链接`http://localhost/phpmyadmin`。
2.  选择`Database`要上传的`SQL`文件。（如果没有 DB，则创建新数据库）。
3.  单击顶部菜单部分的导入选项并上传文件。

请检查屏幕截图以供参考。

![在此处输入图像描述](../Images/efa48d2e49a929b5e017d06ae06cbd4e.png) ![在此处输入图像描述](../Images/0eed69f21f5fff6158b75882310e1c02.png) 试试看……这对你有帮助……

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T15:54:23.287

在您的 mysql 控制台中，您必须键入以下命令：

```
mysql> use YourDataBaseName
mysql> source YourFile.sql 
```

或在您的控制台类型中：

```
mysql -u root -p [YourPassword] [YourDataBaseName < YourFile.sql 
```

欲了解更多信息，您可以访问：[http ://www.cyberciti.biz/faq/import-mysql-dumpfile-sql-datafile-into-my-database/](http://www.cyberciti.biz/faq/import-mysql-dumpfile-sql-datafile-into-my-database/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:47:17.707

在 phpmyadmin 中选择顶部菜单中的导入并从该页面打开您的 sql 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:46:26.673

[如何使用 phpMyAdmin 将 SQL 文件导入数据库](http://www.dewahost.com/tutorials/cpanelx/importsqlfile.html)

# debugging - 仅为 Tomcat 7 上的 CAS (jasig) 类激活 DEBUG

> ID：13955991
> 
> 赞同：2
> 
> 时间：2012-12-19T15:45:41.933
> 
> 标签：debugging, logging, tomcat7, cas

我想仅为部署[`cas.war`](http://www.jasig.org/cas)webapp 的 Tomcat 7 中的 CAS 类激活 DEBUG 日志。

因此，我遵循了有关日志记录的[Tomcat 7 文档](http://tomcat.apache.org/tomcat-7.0-doc/logging.html)并将其添加到我的`/etc/tomcat7/logging.properties`文件中：

```
...
org.apache.catalina.level=FINEST
...
org.jasig.cas.level = ALL 
```

但是后来我拥有了 Tomcat 7 本身的所有日志（例如 ClassLoader 调试内容），而且似乎我仍然没有 CAS 的 DEBUG 日志......

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:13:35.833

实际上，不需要修改 Tomcat 7`logging.properties`文件。

您必须编辑`WEB-INF/classes/log4j.xml`并`cas.war`修改该行：

```
<logger name="org.jasig" additivity="true">
    <level value="DEBUG" />
    <appender-ref ref="cas" />
</logger> 
```

# objective-c - 停止与核心数据托管对象相关的堆增长

> ID：13955995
> 
> 赞同：0
> 
> 时间：2012-12-19T15:45:54.107
> 
> 标签：objective-c, ios, xcode, core-data, instruments

当我运行仪器时，我注意到一些堆增长。没有泄漏，但有一些内存未清除，这看起来是由于我使用核心数据造成的。

![仪器截图](../Images/e30e5c9cd086da6453f8d128262e20cb.png)

从堆栈跟踪看来，增长发生在我保存托管对象时。

**这就是我创建托管对象的方式：**

```
ScramblerGame *game = (ScramblerGame *)[NSEntityDescription insertNewObjectForEntityForName:@"ScramblerGame" inManagedObjectContext:self.context];
game.time = [NSNumber numberWithInt:self.time];
game.score = 0; //etc... 
```

ScramblerGame 是直接从数据模型创建的托管对象子类，无需修改。

**这就是我访问和更新托管对象的方式：**

```
self.game.score = [NSNumber numberWithInt:[self.game.score intValue] + score]; 
```

`self.game`是另一个类中对托管对象的弱引用。

**这是在游戏结束时调用的方法，用于保存或删除数据。** 这也是我在引用图像的堆栈跟踪中调用的最后一个方法，这会导致堆增长。

```
-(void)saveAndHandleGameData:(BOOL)stillPlaying{
[[NSNotificationCenter defaultCenter] removeObserver:self name:NSManagedObjectContextObjectsDidChangeNotification object:nil];

//save the data to disk
self.game.inProgress = [NSNumber numberWithBool:stillPlaying];
SCAppDelegate *appDelegate = ((SCAppDelegate *)[[UIApplication sharedApplication] delegate]);
NSManagedObjectContext *context = appDelegate.managedObjectContext;

if([self.game.score intValue] == 0)
    [context deleteObject:self.game];
[context save:nil];
self.game = nil;

} 
```

那么我对导致这种情况的核心数据有什么问题吗？关于如何停止堆增长的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:55:55.583

一切看起来都很好。内存的最小增加可以认为是正常的，应该是可以预期的。

# xcode - 将 GMP 链接到 Xcode 4.5

> ID：13955996
> 
> 赞同：0
> 
> 时间：2012-12-19T15:45:55.817
> 
> 标签：xcode, macos, dll, hyperlink, gmp

我已经下载了 GMP 多精度库，并通过终端使用命令编译了以下代码，`gcc main.c -lgmp`但我无法弄清楚如何`GMP`在 XCode 4.5 中包含该库，因为在线的howtos 有点令人困惑。

我真的需要`GMP`为我的项目使用该库，任何评论都会有很大帮助。

```
#include <stdio.h>
#include <gmp.h>

int main(int argc, const char * argv[])
{
    printf("Hello, World!\n");
    mpz_t a;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T18:43:32.623

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 解决了
> 
> 1) 打开左侧面板，转到*“项目名称”、目标、构建阶段、将二进制文件与库链接*并选择您的库。
> 
> 2）打开左侧面板，转到*“ProjectName”，Project，Header Search Paths，*写下您的库的标题所在的路径（*.h*文件，通常在*/usr/local/include*）。
> 
> 3）打开左侧面板，转到*“ProjectName”，Project，Library Search Paths，*写下您的库所在的路径（*.a*或*.dylib*文件，通常在*/usr/local/lib*）

# c# - 从 Server.Execute 调用创建 ZIP 文件

> ID：13955999
> 
> 赞同：0
> 
> 时间：2012-12-19T15:46:16.770
> 
> 标签：c#, .net, dotnetzip

我有一个 .NET 网站和一个页面，当导航到（使用 EssentialObjects PDF 库）时将返回生成的 PDF。

我希望有另一个页面能够在循环中多次调用 Server.Execute 并执行 PDF 页面的 URL，并使用返回的响应在内存中创建 PDF 并使用 DotNetZip 压缩它们并返回此包含多个 PDF 的最终 zip 文件给用户。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T19:00:40.020

对于任何想要这样做的人，我最终都使用了这段代码。然后可以轻松地将其放入一个循环中以获取一大堆页面，将它们转换为 PDF，然后将它们全部压缩到一个 zip 文件中。

```
Dictionary<string, byte[]> pdfByteList = new Dictionary<string, byte[]>();
string pageName = "TestPage";
string htmlToConvert = GetHTML(pageName); //Perform the Server.Execute() code here and return the HTML

PdfConverter converter = new PdfConverter();
byte[] pdfBytes = converter.GetPdfBytesFromHtmlString(htmlToConvert);
pdfByteList.Add(pageName, pdfBytes);

using (ZipFile zip = new ZipFile())
{
    int i = 0;
    foreach(KeyValuePair<string,byte[]> kvp in pdfByteList)
    {
        zip.AddEntry(kvp.Key, kvp.Value);
        i++;
    }

    Response.Clear();
    Response.BufferOutput = true; // false = stream immediately
    Response.ContentType = "application/zip";
    Response.AddHeader("content-disposition", "attachment; filename=TheZipFile.zip");
    zip.Save(Response.OutputStream);
} 
```