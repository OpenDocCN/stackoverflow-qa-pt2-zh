# StackOverflow 问答 12699000-12699999

# c# - 在没有 getter 和 setter 方法的情况下让基类访问子类变量

> ID：12699000
> 
> 赞同：1
> 
> 时间：2012-10-02T21:59:54.180
> 
> 标签：c#, inheritance

基类`MasterClass`包含一个包含`string`键和`HookObj`值的 Dictionary，其中`HookObj`包含（来自派生类）变量 Type，并引用它的 get/set 方法。

现在，当基类`MasterClass`从某个源接收数据时，它将像这样转换/分配它：

```
//Data came in from an external source, see if we know what variable to assign the value to
public void receiveData(string key, string value)
{
    if (dict.ContainsKey(key))
        assignVal(dict[key], value);
    else
        throw new NotImplementedException(); //use NotImplementedException as placeholder until we make proper exception
}

//Cast the value-string to the proper type and assign it
private void assignVal(HookObj hookobj, string value)
{
    try
    {
        if (hookobj.theType == typeof(string))
            hookobj.setMethod(value);
        else if (hookobj.theType == typeof(int))
            hookobj.setMethod(Int32.Parse(value));
        else if (hookobj.theType == typeof(float))
            hookobj.setMethod(float.Parse(value));
        else
            throw new NotImplementedException();
    }
    catch (RuntimeBinderException ex) { throw new NotImplementedException("", ex); }
    catch (System.FormatException ex) { throw new NotImplementedException("", ex); }
} 
```

存在`HookObj`：

```
internal class HookObj
{
    public Type theType { get; private set; }
    public Action<dynamic> setMethod { get; private set; }
    public Func<dynamic> getMethod { get; private set; }

    public HookObj(Type theType, Action<dynamic> setMethod, Func<dynamic> getMethod)
    {
        this.theType = theType;
        this.setMethod = setMethod;
        this.getMethod = getMethod;
    }
} 
```

使用 getter 方法不需要解释。所以现在让我们看看这对最终用户来说有多混乱：

```
class Attachvariable : MasterClass
{
    public Attachvariable(int id) : base(id) { }
    public Attachvariable(int userID, string position)
        : base()
    {
        this.userID = userID;
        this.position = position;
    }

    int userID;
    string position;

    protected override void hookMethod()
    {
        newHookAndAdd(typeof(int), set_userID, get_userID, "userID").
        newHookAndAdd(typeof(string), set_position, get_position, "position");
    }

    public void set_userID(dynamic theVal)
    {
        userID = theVal;
    }
    public void set_position(dynamic theVal)
    {
        position = theVal;
    }

    public dynamic get_userID()
    {
        return userID;
    }
    public dynamic get_position()
    {
        return position;
    }
} 
```

我希望它更像这样：

```
protected override void hookMethod()
{
    newHookAndAdd(ref userID, "userID");
    //etc
} 
```

但是似乎无法存储参考以供以后使用..有什么方法可以使这对用户更加友好？我猜每个变量创建两个函数会变得非常混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:23:45.407

您可以创建一个泛型`Hook<T>`类来保存该值，并为其创建一个抽象`Hook`基类来保存该类型，以便`MasterClass`可以在不知道钩子的实际类型的情况下获取类型：

```
public class MasterClass {

  private Dictionary<string, Hook> _dict;

  public Hook<T> AddHook<T>(string name, T value){
    Hook<T> hook = new Hook<T>(value);
    _dict.Add(name, hook);
    return hook;
  }

  public void receiveData(string key, string value) {
    Hook hook;
    if (_dict.TryGetValue(key, out hook)) {
      if (hook._type == typeof(string)) {
        (hook as Hook<string>).Value = value;
      } else if (hook._type == typeof(int)) {
        (hook as Hook<int>).Value = Int32.Parse(value);
      } else {
        throw new NotImplementedException(); // type not found
      }
    } else {
      throw new NotImplementedException(); // name not found
    }
  }

}

public abstract class Hook {
  internal Type _type;
  internal Hook(Type type) {
    _type = type;
  }
}

public class Hook<T> : Hook {
  public T Value { get; set; }
  public Hook(T value) : base(typeof(T)){
    Value = value;
  }
} 
```

现在用户可以创建`Hook<T>`对象来保存这些值：

```
class Attachvariable : MasterClass {

  private Hook<int> userId;
  private Hook<string> position;

  private Attachvariable() : base() {
    userId = AddHook("userID", 0);
    position = AddHook("position", String.Empty);
  }

  public Attachvariable(int id, string pos) : this() {
    userId.Value = id;
    position.Value = pos;
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:38:05.153

我做了类似于@Guffa 的回答的事情，但是我没有使用对象为属性保存“Hook”包装器，而是使用 lambdas 使用它们的原始值类型来获取/设置属性：

**硕士课：**

```
class MasterClass
{
    Dictionary<string, HookObj> dict = new Dictionary<string, HookObj>();

    //Data came in from an external source, see if we know what variable to assign the value to
    public void receiveData(string key, string value)
    {
        if (dict.ContainsKey(key))
            assignVal(dict[key], value);
        else
            throw new NotImplementedException(); //use NotImplementedException as placeholder until we make proper exception
    }

    //Cast the value-string to the proper type and assign it
    private void assignVal(HookObj hookobj, string value)
    {
        try
        {
            if (hookobj.theType == typeof(string))
                hookobj.SetValue(value);
            else if (hookobj.theType == typeof(int))
                hookobj.SetValue(Int32.Parse(value));
            else if (hookobj.theType == typeof(float))
                hookobj.SetValue(float.Parse(value));
            else
                throw new NotImplementedException();
        }
        catch (RuntimeBinderException ex) { throw new NotImplementedException("", ex); }
        catch (System.FormatException ex) { throw new NotImplementedException("", ex); }
    }

    protected void newHookAndAdd<T>(Action<T> setter, Func<T> getter, string name)
    {
        HookObj hook = new HookObj<T>(setter, getter);
        dict.Add(name, hook);
    }
} 
```

**钩子对象**

```
public class HookObj<T> : HookObj
{
    public Action<T> setMethod { get; private set; }
    public Func<T> getMethod { get; private set; }

    public HookObj(Action<T> setMethod, Func<T> getMethod)
        : base(typeof(T))
    {
        this.setMethod = setMethod;
        this.getMethod = getMethod;
    }

    public override void SetValue(object value)
    {
        setMethod((T)value);
    }

    public override object GetValue()
    {
        return getMethod();
    }
}

public abstract class HookObj
{
    public Type theType { get; private set; }

    public HookObj(Type theType)
    {
        this.theType = theType;
    }

    public abstract void SetValue(object value);
    public abstract object GetValue();
} 
```

然后你的 MasterClass 的子类：

```
class Attachvariable : MasterClass
{
    public int UserID { get; set; }
    public string Position { get; set; }

    public Attachvariable()
    {
        hookMethod();
    }

    protected void hookMethod()
    {   
        newHookAndAdd(value => UserID = value, () => UserID, "userID");
        newHookAndAdd(value => Position = value, () => Position, "position");
    }
} 
```

你甚至可以设置你的钩子注册者来提供一个解析器：

```
class YesNoVariable : MasterClass
{
    public bool YesNo { get; set; }

    public YesNoVariable()
    {
        hookMethod();
    }

    protected void hookMethod()
    {   
        newHookAndAdd(value => YesNo = value, () => YesNo, "yesno", (input) => input == "yes");
    }
} 
```

我没有完成将解析器作为可选参数添加到基本处理程序的动作，我将把它留给你，因为在这个阶段它是微不足道的。本质上，您`assignValue`将检查是否`HookObj`分配了解析器，如果有，则使用它。否则，它会执行您已经拥有的相同动作。

事实上，我会让所有的钩子都使用解析器并具有特定`IntHookObj`的 ，`FloatHookObj`等等。该`newHookAndAdd`方法本质上是一个工厂。如果用户提供他们自己的解析器，它将`HookObj`使用该自定义解析器创建一个。如果`T`是 int/float/string 它将实例化一个已知的`HookObj`实现，因此您不会将所有解析逻辑与分配过程混合在一起。

编辑：我最终将使用自定义解析器的实现组合在一起，并完全放弃了 if/elseif/elseif 类型检查：

**挂钩基类**

```
public abstract class HookObj<T> : HookObj
{
    public Action<T> setMethod { get; private set; }
    public Func<T> getMethod { get; private set; }

    protected HookObj()
        : base(typeof(T))
    {

    }

    public void SetSetter(Action<T> setMethod)
    {
        this.setMethod = setMethod;
    }

    public void SetGetter(Func<T> getMethod)
    {
        this.getMethod = getMethod;
    }

    protected abstract T Parse(string value);

    public override void SetValue(string value)
    {
        T parsedValue = Parse(value);
        setMethod(parsedValue);
    }

    public override object GetValue()
    {
        return getMethod();
    }
}

public abstract class HookObj
{
    public Type theType { get; private set; }

    public HookObj(Type theType)
    {
        this.theType = theType;
    }

    public abstract void SetValue(string value);
    public abstract object GetValue();
} 
```

**标准钩子实现**

```
public class StringHook : HookObj<string>
{
    protected override string Parse(string value)
    {
        return value;
    }
}

public class IntHook : HookObj<int>
{
    protected override int Parse(string value)
    {
        return Int32.Parse(value);
    }
}

public class FloatHook : HookObj<float>
{
    protected override float Parse(string value)
    {
        return float.Parse(value);
    }
} 
```

**自定义钩子解析器处理程序**

```
public class CustomHook<T> : HookObj<T>
{
    public Func<string, T> inputParser { get; private set; }

    public CustomHook(Func<string, T> parser)
    {
        if (parser == null)
            throw new ArgumentNullException("parser");

        this.inputParser = parser;
    }

    protected override T Parse(string value)
    {
        return inputParser(value);
    }
} 
```

**硕士课：**

```
class MasterClass
{
    Dictionary<string, HookObj> dict = new Dictionary<string, HookObj>();

    //Data came in from an external source, see if we know what variable to assign the value to
    public void receiveData(string key, string value)
    {
        if (dict.ContainsKey(key))
            assignVal(dict[key], value);
        else
            throw new NotImplementedException(); //use NotImplementedException as placeholder until we make proper exception
    }

    //Cast the value-string to the proper type and assign it
    private void assignVal(HookObj hookobj, string value)
    {
        hookobj.SetValue(value);
    }

    protected void RegisterProperty<T>(Action<T> setter, Func<T> getter, string name, Func<string, T> inputParser)
    {
        var hook = new CustomHook<T>(inputParser);
        hook.SetSetter(setter);
        hook.SetGetter(getter);
        dict.Add(name, hook);
    }

    protected void RegisterProperty(Action<string> setter, Func<string> getter, string name)
    {
        var hook = new StringHook();
        hook.SetSetter(setter);
        hook.SetGetter(getter);
        dict.Add(name, hook);
    }

    protected void RegisterProperty(Action<int> setter, Func<int> getter, string name)
    {
        var hook = new IntHook();
        hook.SetSetter(setter);
        hook.SetGetter(getter);
        dict.Add(name, hook);
    }

    protected void RegisterProperty(Action<float> setter, Func<float> getter, string name)
    {
        var hook = new FloatHook();
        hook.SetSetter(setter);
        hook.SetGetter(getter);
        dict.Add(name, hook);
    }
} 
```

现在，MasterClass 可以做一些工作。具体来说，我*觉得*这些`RegisterProperty`方法（取代了 newHookAndAdd）是重复工作，你必须为你支持的每个“标准”钩子类型添加条目。我确信有一个更好的方法可以做到这一点，但现在它提供了您的“Attachvariable”子类，而不关心使用了哪些钩子，它们**知道**本机支持哪些类型，以及它的类型安全。任何本机不支持的类型，它们*必须*提供类型安全的解析器。

**附变量样本：**

```
class Attachvariable : MasterClass
{
    public int UserID { get; set; }
    public string Position { get; set; }
    public bool YesNo { get; set; }
    public bool ProperBoolean { get; set; }

    public Attachvariable()
    {
        RegisterProperties();
    }

    protected void RegisterProperties()
    {   
        RegisterProperty(value => UserID = value, () => UserID, "userID");
        RegisterProperty(value => Position = value, () => Position, "position");
        RegisterProperty(value => YesNo = value, () => YesNo, "yesno", (input) => input == "yes");
        RegisterProperty(value => ProperBoolean = value, () => ProperBoolean, "ProperBoolean", (input) => Boolean.Parse(input));
    }
} 
```

原生支持`string`and属性；`int`他们遇到了`RegisterProperty`与他们的类型相关的超载。但是，这些`bool`类型本身不受支持，因此它们提供了自己的解析逻辑。“yesno”只是检查字符串是否等于“yes”。“ProperBoolean”执行标准`Boolean.Parse`。用法如下：

```
Attachvariable obj = new Attachvariable();

obj.receiveData("userID", "9001");
obj.receiveData("position", "Hello World!");
obj.receiveData("yesno", "yes");
obj.receiveData("ProperBoolean", "True");

Console.WriteLine(obj.UserID); //9001
Console.WriteLine(obj.Position); //"Hello World!"
Console.WriteLine(obj.YesNo); //True
Console.WriteLine(obj.ProperBoolean); //True

obj.receiveData("yesno", "something else!");
Console.WriteLine(obj.YesNo); //False

obj.receiveData("ProperBoolean", "Invalid Boolean!"); //throws exception on `Boolean.Parse` step as intended 
```

我曾想过让“标准”挂钩从 CustomHook 继承，然后将解析方法向下传递，但这样您就可以创建新的标准挂钩，这些挂钩可能具有更复杂的解析逻辑，因此应该更容易阅读/实现。无论如何，我把它扔掉了，如果我要在生产中使用它，我会花更多的时间来清理/改进/测试。

一个*biiiiiiiig*加号是这使得对您的单个钩子类型实现进行单元测试变得*非常容易。*可能会重构`MasterClass`以使单元测试更容易（尽管现在很简单），也许将钩子创建者移动到单独的工厂/构建器中。

编辑：哎呀，现在只需扔掉底座`theType`上的字段`HookObj`并用接口替换它：

```
public interface IHookObj
{   
    void SetValue(string value);
    object GetValue();
} 
```

您可以在整个过程中传播更改（`HookObj<T>`不再调用传入的基本构造函数`typeof(T)`，`MasterClass`现在绑定到`IHookObj`接口）。这意味着您可以更轻松地定义使用*他们想要的任何逻辑*、解析或其他方式的钩子，并且应该更容易测试。

编辑：是的，这是一个示例实现，您的 API 的*第三方使用者*可以提供他们自己的钩子，这些钩子可以在他们的应用程序中重用。如果他们在`Person`任何地方都使用了对象，他们只需定义一个钩子，它就可以被重用：

```
class SomeCustomUsage : MasterClass
{
    public Person SomeoneUnimportant { get; set; }

    public SomeCustomUsage()
    {
        RegisterProperty(value => SomeoneUnimportant = value, () => SomeoneUnimportant, "SomeoneUnimportant", new PersonHook());
    }
} 
```

他们的`PersonHook`存在：

```
public class PersonHook : HookObj<Person>
{
    protected override Person Parse(string value)
    {
        string[] parts = value.Split(',');
        var person = new Person(parts[0], parts[1]);

        if (person.FirstName == "Bob")
            throw new Exception("You have a silly name and I don't like you.");

        if (String.IsNullOrWhiteSpace(person.FirstName))
            throw new Exception("No first name provided.");

        if (String.IsNullOrWhiteSpace(person.LastName))
            throw new Exception("No last name provided.");

        return person;
    }
} 
```

提供`HookObj<T>`重载也将所有重载折叠为更简单的代码重复更少的东西（但仍然*感觉*`RegisterProperty`不太对劲）：

 *```
protected void RegisterProperty<T>(Action<T> setter, Func<T> getter, string name, HookObj<T> hook)
{
    hook.SetSetter(setter);
    hook.SetGetter(getter);
    dict.Add(name, hook);
}

protected void RegisterProperty<T>(Action<T> setter, Func<T> getter, string name, Func<string, T> inputParser)
{
    var hook = new CustomHook<T>(inputParser);
    RegisterProperty(setter, getter, name, hook);
}

protected void RegisterProperty(Action<string> setter, Func<string> getter, string name)
{
    var hook = new StringHook();
    RegisterProperty(setter, getter, name, hook);
}

protected void RegisterProperty(Action<int> setter, Func<int> getter, string name)
{
    var hook = new IntHook();
    RegisterProperty(setter, getter, name, hook);
}

protected void RegisterProperty(Action<float> setter, Func<float> getter, string name)
{
    var hook = new FloatHook();
    RegisterProperty(setter, getter, name, hook);
} 
```

结果可能如下所示：

```
SomeCustomUsage customObj = new SomeCustomUsage();
customObj.receiveData("SomeoneUnimportant", "John,Doe");
Console.WriteLine(customObj.SomeoneUnimportant.LastName + ", " + customObj.SomeoneUnimportant.FirstName); //Doe, John

customObj.receiveData("SomeoneUnimportant", "Bob,Marley"); //exception: "You have a silly name and I don't like you."
customObj.receiveData("SomeoneUnimportant", ",Doe"); //exception: "No first name provided."
customObj.receiveData("SomeoneUnimportant", "John,"); //exception: "No last name provided." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:13:15.503

为什么所有的烟雾和镜子？像这样更直接的事情有什么问题？

**建议一**

```
public abstract class BaseClass
{
    protected virtual int UserId { get; set; }
}

public class ChildClass : BaseClass
{
    private int _userId;

    protected override int UserId
    {
        get { return _userId; }
        set { _userId = value; }
    }
} 
```

**建议二**

```
public abstract class BaseClass
{
    protected readonly Dictionary<string, object> Values = new Dictionary<string, object>();
}

public class ChildClass : BaseClass
{
    public ChildClass()
    {
        Values["UserID"] = 123;
        Values["Foo"] = "Bar";
    }
} 
```*

# xpath - 多次选择同一个父节点的 xpath 表达式

> ID：12699007
> 
> 赞同：1
> 
> 时间：2012-10-02T22:00:37.557
> 
> 标签：xpath, xpath-1.0

我有一些类似这样的 HTML：

```
<tr class="odd">
  <td class="player large-link">
    <a name="some name"/> <!-- I want to return this but two times. -->
  </td>
  <td class="bookings">
    <span/>
    <span/>
  </td>
</tr> 
```

是否可以基于两者返回`<a name="some name"/>`元素两次`<span/>`？对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:46:01.807

XPath 1.0 使用节点集的概念，而 XPath 2.0 使用序列。节点集是真正的集，所以你不能让同一个节点成为节点集的成员两次。但是，您可以做下一个最好的事情，即迭代一组已识别`span`节点并使用您的高级语言，然后对节点上的每个跨度节点执行一些操作`a`。

## 例子

例如，假设您在 XSLT 中使用 XPath。然后，XSLT 1.0 样式表的这个片段将在节点上执行一些操作，`a`次数与您拥有节点的次数一样多`span`。该片段假定在进入时，焦点节点是该节点的父`tr`节点。

```
<xsl:for-each select="tr/td[@class="bookings"]/span">
  <xsl:for-each select="(../../td[@class='player large-link']/a[name='@some name'])[1]">
    <!-- The `a` node is now the focus node. -->
    <!-- Insert desired action here on the focus node. -->
  </xsl:for-each>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:16:34.067

> 是否可以基于两者返回`<a name="some name"/>`元素两次`<span/>`？

不是使用单个 XPath 1.0 表达式——由 XPath 1.0 表达式选择的节点形成所谓的“节点集”——这是一个真正的集合——它是重复数据删除的。

在 Xpath 2.0 中，可以构造一个节点*序列*，并且一个序列可以多次包含同一个节点：

```
/*/*/a[@name='some name']/*[1]/.., /*/*/a[@name='some name']/*[2]/.. 
```

上面的 XPath 2.0 表达式指定了一个包含两个想要的相同元素的序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:19:31.170

这在 XPath 1 中是不可能的，但在 XPath 2 中您可以使用 for..in..return：

```
for $s in tr/td[@class="bookings"]/span return $s/../preceding-sibling::td/a 
```

（假设 html 解析器已插入结束 td、span 标签，因此 td 成为前面的元素，而不是父元素）

# testing - 如何在 Selenium IDE 中添加动态命令？

> ID：12699008
> 
> 赞同：0
> 
> 时间：2012-10-02T22:00:38.190
> 
> 标签：testing, selenium, automation, selenium-ide

我正在使用 Selenium IDE 创建一些自动化 TC，我的站点上有动态内容区域，有时该区域的内容 id=100，有时 id=101。

当脚本找不到 id=100 时，如何告诉 selenium 不要停止并尝试查找 id=101 ？

动作 = 点击

目标1：

```
//html/body/div/div/div[4]/div/div[3]/div[3]/ul/li[3]/a/div 
```

如果此目标失败，我希望 selenium 使用以下目标：

目标 2：

```
//html/body/div/div/div[4]/div[3]/div[3]/ul/li[3]/a/div 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:07:18.960

您可以使用 sideflow 循环和转到。[https://github.com/darrenderidder/sideflow](https://github.com/darrenderidder/sideflow)

如果步骤失败，请使用 verify 而不是 assert 让测试继续进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:27:16.577

There's probably a hack that would allow you to do this with the IDE, but you should really consider using WebDriver for this with the language of your choice (Python or Ruby are excellent options, but almost all popular languages are supported).

# python - 在 Django 模板中显示可读文本时出错

> ID：12699023
> 
> 赞同：0
> 
> 时间：2012-10-02T22:02:03.680
> 
> 标签：python, django

我正在尝试在用户注册我的 django webapp 时向他们发送邮件。在尝试以下代码后，它将从模板中获取消息并以可读格式将其呈现在用户电子邮件中。但它一直这样显示；

```
 <django.template.base.Template object at 0x033079D0> 
```

而不是模板中的可读格式。我希望它以可读的文本显示，而不是像上面的格式。

意见：

```
 Subject='Beta Invite'
     message=loader.get_template('letter.html')
     from_email='test@gmail.com'

      def invite_me(request):
          if request.method=="POST":
              form=InviteForm(request.POST)
              if form.is_valid():
                 form.save()
                 #get input data and send email to the user.
                 msg=EmailMessage(Subject,message,from_email,Invite.objects.values_list('email_address', flat=True))
                 msg.send()
                 return HttpResponse('Thanks For Inputting Your Email, Go Check Your Email For Our Invite!')
            else:
                return HttpResponse('Invalid Email Address')
        else:
            form=InviteForm()
            return render_to_response('home.html',{'InviteForm':InviteForm},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:08:39.287

您需要调用模板渲染方法。就像是：

```
msg=EmailMessage(Subject, message.render(Context()),
    from_email, Invite.objects.values_list('email_address', flat=True)) 
```

注意：如果您有模板的“上下文”，则需要将其传递给 Context()。

请在[此处](https://docs.djangoproject.com/en/dev/ref/templates/api/)查看文档。他们有一些很好的例子（几乎就是这个问题）

# javascript - 从 jsp 页面执行 bash 脚本

> ID：12699025
> 
> 赞同：0
> 
> 时间：2012-10-02T22:02:11.370
> 
> 标签：javascript, bash, jsp, tomcat

我之前编写了一个执行 java 类的 bash 脚本，它在运行该类之前会进行其他检查。运行时需要参数；`./SyncIPs.cmd 10.0.1.45`并执行一些命令。

我正在尝试使用 html/javascript 按钮在 jsp 页面中运行此脚本。到目前为止，我有两个jsp文件如下：

门户网站.jsp：

```
 <%
      if(request.getParameter("submitted")==null)
  {

    if(check)
    {

        %><%@include file="Sync.jsp" %><%
    }
    else
    {

        %><%@include file="Sync.jsp" %><%
    }   
 }
     %> 
```

同步.jsp：

```
 <%
   if(request.getParameter("submit") == null)
   {

   %>
    <div class=display>this is the Sync</div>

    </div>

    <br>
    <form method="POST" action="/project/jsp/Portal.jsp" id=form2>

  <input type=hidden name=sync>
      <!---this is where I want my script to be run from,--->

   <input type="button" value="" name="submit" action="run" 
   onClick="if(runOnSubmit()){getSomethingWithAjax
   ('Portal.jsp'+getAllFormElementsAndMakeIntoURI(true),
   '','hereIsTheMainHeaderSpan',false,false);}">
   <%
   }//end if
   %> 
```

如何让该脚本运行并发布在 portal.jsp 页面上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:40:58.817

你必须在你的 .jsp 中加入一些 java 代码

```
try {
  Process p = Runtime.getRuntime().exec("/path_to_your_script/SyncIPs.cmd 10.0.1.45");
  p.waitFor();
  System.out.println("exit code: " + p.exitValue());
} catch (Exception e) {
  System.out.println(e.getMessage());
} 
```

注意：注意可能的安全问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:31:38.543

使用`Runtime.getRuntime().exec()`可能是您需要的。

高温高压

# c++ - c++ 右值移动语义，关于流的问题

> ID：12699027
> 
> 赞同：1
> 
> 时间：2012-10-02T22:02:23.487
> 
> 标签：c++, c++11, move-semantics

关于语义和性能的几个问题：

```
x = 0;
While (x < 10) {
  std::cout << "Some text here to send to cout";
  ++x;
} 
```

我使用 gcc 4.7，要流式传输的文本是否应该包含在 std::move 中？

像这样：

```
 x = 0;
    While (x < 10) {
      std::cout << std::move("Some text here to send to cout");
      ++x;
    } 
```

虽然我在问，在这种情况下是否更好地将字符串设为静态，例如：

```
x = 0;
While (x < 10) {
  static const char* s = "Some text here to send to cout";
  std::cout << s;
  ++x;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:04:46.123

移动一个字符串字面量对你没有多大好处：它在任何情况下都会产生一个指针，并且这个指针将按值传递。关于使字符串文字静态化，我希望它根本没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:06:34.553

没有也没有。`operator<<`它的参数是右值还是左值没有任何区别`const char *`：在后一种情况下，标准的左值到右值（纯概念）转换将在传递给之前自动应用`operator<<`。

# algorithm - 加入有序数组的最佳方法是什么？

> ID：12699028
> 
> 赞同：2
> 
> 时间：2012-10-02T22:02:33.270
> 
> 标签：algorithm

我有几个整数数组。每个数组中的元素都是有序的。数组没有重复项。

我需要将所有数组合并为一个，以便生成的数组仅包含每个数组中存在的元素。

例如，我有数组

(1,2,3,4,5) (2,3,5) (1,2,4,5)

结果必须是 (2,5)

实现最佳性能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T22:20:01.077

如果期望数组包含许多不同的数字并且所有数字中只有少数，

*   选择两个最小的数组，通过依次遍历它们来计算它们的交集（如合并排序），O(len1 + len2)
*   虽然并非所有数组都已被扫描，但选择下一个最小数组，并使用顺序扫描 if 计算其与先前处理的数组的交集的交集，否则`length(intersection)*log(length(array)) >= length(array)`查找交集的元素。`array`

最坏情况的复杂度是 O(sum(lengths))，如果幸运的话，你可以绕过`k * sum(log(length))`，其中`k`是交叉点中元素的数量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T22:15:17.907

这应该有效：

*   为每个数组创建一个索引
*   如果对于每个数组，相应索引处的元素相同，则将元素添加到结果列表并将每个索引增加一
*   否则增加指向最低元素的索引
*   重复直到超过第一个数组

如果数组可以包含多个数字的实例，这也应该有效，例如数组 (1,1,2,2)，(2,2,3,3) 将导致 (2,2)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T23:06:53.987

这就是我的想法：创造一个`HashMap<Integer, Integer>`它会是什么样子`numer->hits`；遍历所有数组：

*   如果hashMap中存在元素，则增加count(value)，即count++；
*   如果元素不存在，则将 count = 1 写入值

毕竟你将拥有，数字->计数

```
1->1
2->3
3->2
4->2
5->3 
```

所以你再次遍历 HashMap 并打印 if(value==arrays.lenth)

所以空间是 O(N) 和 O(N) 步。

注意 hashmap 的访问是恒定的时间（yahoooooo）。

# c - 使用微控制器改变信号的相位值

> ID：12699029
> 
> 赞同：-1
> 
> 时间：2012-10-02T22:02:49.453
> 
> 标签：c, embedded, avr, avr-gcc

我正在尝试使用带有 ATmega32-A 微控制器的可编程波形发生器 AD9833 生成正弦波。（MCLK = 8MHz 时钟频率）。我正在使用 USART 通信，所以如果我在超级终端中改变频率或相位，那么波形频率和相位必须改变。我为此编写了小代码，如下所示。

但从上面的代码我正在生成正弦波。如果我输入频率，那么波形频率也会完全改变，但我试图改变相位，那么这就是问题所在。如果我进入相位为 90，那么它会改变 10 度，它不会改变 90。我不知道它为什么会这样产生以及我犯了什么错误？我错过了什么吗？仅相位问题。

提前致谢。

如果我想输入相位的浮点值，例如 2.5 度，我必须改变什么。在函数中将“无符号整数阶段”转换为“浮点阶段”。如果我这样尝试，“<<”与浮点数不兼容。如果我想以 35.8 度进入相位，我必须做什么。请建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:19:14.307

从数据表第 15 页：

> 该信号相移 2π/4096 × PHASEREG

如果要使用度数，请在发送之前按如下方式修改相位（uint32_t 可能需要包含 stdint.h 文件）：

```
phase = (uint32_t)phase * 4096 / 360; 
```

如果您不是特别关心精度，您可以执行以下操作，使用 16 位除法而不是 32 位除法：

```
phase = phase * (4096 / 360); 
```

# javascript - 实现像 A,B,C... AA,AB,... AAA... 这样的编号方案，类似于将数字转换为 radix26

> ID：12699030
> 
> 赞同：3
> 
> 时间：2012-10-02T22:02:50.133
> 
> 标签：javascript, algorithm, character-encoding, type-conversion

> **可能重复：**
> [Xnary（类似于二进制但不同）计数](https://stackoverflow.com/questions/8797736/xnary-like-binary-but-different-counting)

在 JavaScript 中，我想在 JavaScript 中实现一个编号方案，以便 1 是 A，2 是 B，...... 26 是 Z，27 是 AA，28 是 AB .....

为此，代码如下：

```
function convertor(n){

     var x = n-1,
         baseCharCode = "A".charCodeAt(0);

     var arr = x.toString(26).split(''),
         len = arr.length;

     return arr.map(function(val,i){
         val = parseInt(val,26);

         if( (i === 0) && ( len > 1)){
              val = val-1;
         }

         return String.fromCharCode(baseCharCode + val);
     }).join('');
} 
```

它似乎工作正常，但是有什么优化它的想法或其他实现方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:18:49.250

该系统类似于[十六进制](http://en.wikipedia.org/wiki/Hexavigesimal)（以 A = 0 开头），称为双射 base-26（它没有 0）。您可以使用标准的基本转换算法来转换它，如下所示：

```
function toDecimal(str) {
    var decimal = 0;
    var letters = str.split(new RegExp());

    for(var i = letters.length - 1; i >= 0; i--) {
        decimal += (letters[i].charCodeAt(0) - 64) * (Math.pow(26, letters.length - (i + 1)));
    }

    return decimal;
} 
```

本质上，您从十六进制转换为以 10 为底，如下所示。假设您必须字符串“AB”。你所拥有的是：

```
1 0 (positions)
---
A B
+ +
| |
| +----> 2 * (26 ^ 0) +
+------> 1 * (26 ^ 1)
       = 28 
```

这给了你28。

另一个例子：

```
2 1 0 (positions)
A B C
+ + +
| | |
| | +----> 3 * (26 ^ 0) +
| +------> 2 * (26 ^ 1) +
+--------> 1 * (26 ^ 2)
           = 731 
```

# php - 如何在 PHP 中显示特殊字符

> ID：12699037
> 
> 赞同：17
> 
> 时间：2012-10-02T22:03:49.010
> 
> 标签：php, special-characters, htmlspecialchars

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-08T14:55:03.287

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T22:14:51.907

You can have a mix of PHP and HTML in your PHP files... just do something like this...

```
<?php
$string = htmlentities("Résumé");
?>

<html>
<head></head>
<body>
<p><?= $string ?></p>
</body>
</html> 
```

That should output `Résumé` just how you want it to.

If you don't have short tags enabled, replace the `<?= $string ?>` with `<?php echo $string; ?>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-07T08:03:12.427

In PHP there is a pretty good function **utf8_encode()** to solve this issue.

```
echo utf8_encode("Résumé");

//will output Résumé instead of R�sum� 
```

[Check the official PHP page.](http://php.net/manual/en/function.utf8-encode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T22:11:43.520

> So I try htmlspecialchars() or htmlentities() which outputs <p>Résumé<p> and the browser renders <p>Résumé<p>.

If you've got it working where it displays `Résumé` with `<p></p>` tags around it, then just don't convert the paragraph, only your string. Then the paragraph will be rendered as HTML and your string will be displayed within.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T08:57:40.007

$str = "Is your name O\'vins?";

// Outputs: Is your name O'vins? echo stripslashes($str);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-27T06:55:38.750

This works for me:

Create/edit `.htaccess` file with these lines:

```
AddDefaultCharset UTF-8
AddCharset UTF-8 .php 
```

If you prefer create/edit `php.ini`:

```
default_charset = "utf-8" 
```

Sources:

*   [https://stackoverflow.com/a/6989559/496176](https://stackoverflow.com/a/6989559/496176)
*   [https://stackoverflow.com/a/1610475/496176](https://stackoverflow.com/a/1610475/496176)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-07T13:29:56.190

Try This

Input:

```
<!DOCTYPE html>
<html>
<body>

<?php
$str = "This is some <b>bold</b> text.";
echo htmlspecialchars($str);
?>

<p>Converting &lt; and &gt; into entities are often used to prevent browsers from using it as an HTML element. <br />This can be especially useful to prevent code from running when users have access to display input on your homepage.</p>

</body>
</html> 
```

Output:

```
This is some <b>bold</b> text.

Converting < and > into entities are often used to prevent browsers from using it as an HTML element. This can be especially useful to prevent code from running when users have access to display input on your homepage. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-31T19:09:22.303

This works for me. Try this one before the start of HTML. I hope it will also work for you.

```
<?php header('Content-Type: text/html; charset=iso-8859-15'); ?>
<!DOCTYPE html>

<html lang="en-US">
<head>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-26T21:00:09.897

The following worked for me when having a similar issue lately:

```
$str = iconv('iso-8859-15', 'utf-8', $str); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-03T21:38:54.893

One of the best ways to do this is, change Collation in my SQL database.

step 1: Go to the Mysql database

step 2: Select the Text-based Row you want to get displayed (Eg., post or comments)

step 3: edit the row and select collation as below.

```
utf8mb4_unicode_ci 
```

Make sure to change the collation of text rows whichever you want to display the special characters.

Sometimes htmlspecialchars_decode() or any other entity() doesn't convert your special chars to normal. So, the above method will definitely help.

# java - java中的双序列化与长序列化

> ID：12699040
> 
> 赞同：9
> 
> 时间：2012-10-02T22:03:55.853
> 
> 标签：java, performance, serialization, deserialization, hbase

我可以在 HBase 中将数字存储为 Long 和 Double。在 Java 中，它们都占用 8 个字节。

使用 Double 的优点是它为存储整数提供了更广泛的范围。

但是，我认为 Long 的范围也足以供我使用。

有人对 Long vs Dobule 的序列化和反序列化性能有任何想法吗？我对它们之间的比较感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T22:08:10.967

如果要存储整数，请使用`Long`. 您关于*“使用 Double 的优势在于它为存储整数提供了更广泛的范围”的*说法是不正确的。两者都是 64 位长，但`double`必须使用一些位作为指数，留下更少的位来表示幅度。您可以在 a 中存储更大的数字，`double`但会丢失精度。

换句话说，对于大于某个上限的数字，您不能再存储相邻的“整数”......给定一个高于此阈值的整数值，“下一个”可能`double`会比前一个数字大 1 以上。

例如

```
public class Test1  
{

    public static void main(String[] args) throws Exception 
    {
        long   long1 = Long.MAX_VALUE - 100L;
        double dbl1  = long1;
        long   long2 = long1+1;
        double dbl2  = dbl1+1;
        double dbl3  = dbl2+Math.ulp(dbl2);

        System.out.printf("%d %d\n%f %f %f", long1, long2, dbl1, dbl2, dbl3);
    }

} 
```

这输出：

```
9223372036854775707 9223372036854775708
9223372036854776000.000000 9223372036854776000.000000 9223372036854778000.000000 
```

注意

1.  Long.MAX_VALUE-100 的双重表示***不***等于原始值
2.  Long.MAX_VALUE-100 的双重表示加 1 无效
3.  在这个量级上，一个双精度值和下一个可能的双精度值之间的差值为 2000。

另一种说法是它的`long`精度不到 19 位，而精度`double`只有 16 位。Double 可以存储大于 16 位的数字，但代价是对低位数字进行截断/舍入。

如果您需要超过 19 位的精度，`BigInteger`则必须使用 ，预期性能会下降。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:13:20.387

这看起来像是一场错误的战斗：

来自[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

> long 数据类型是一个 64 位有符号二进制补码整数。它的最小值为-9,223,372,036,854,775,808，最大值为9,223,372,036,854,775,807（含）。

这非常接近 19 位有效数字

来自[维基百科](http://en.wikipedia.org/wiki/Double_precision)

> 这给出了 15 - 17 位有效十进制数字的精度。

所以，尽管它明显的“优势” Double 将比 Long 为您提供更差的服务。我只是在这里猜测，但直觉上我会说浮点类型的序列化/反序列化是比整数数据类型的相同操作更昂贵的操作，但即使存在差异，它们在现代系统上也会非常小。

因此，在处理整数时，请坚持使用 Long。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T22:24:58.527

在不知道具体情况的情况下，我会想象 a`long`和 a`double`都具有相同的序列化：获取 64 位并将它们放在网络上。同样，我想反序列化只是从线路上取下 64 位并声明它们现在代表 a `long`or的问题`double`。任何 64 位都将代表一个有效的`long`或`double`（尽管不是所有的都代表一个有限的双精度），所以没有任何验证或额外的工作。

# python - Lindenmayer 系统 Python

> ID：12699042
> 
> 赞同：0
> 
> 时间：2012-10-02T22:04:08.367
> 
> 标签：python, python-3.x

对不起，如果这是一个愚蠢的问题，但我正在从这个网站学习 python：

[http://interactivepython.org/courselib/static/thinkcspy/Strings/strings.html#exercises](http://interactivepython.org/courselib/static/thinkcspy/Strings/strings.html#exercises)

问题 10-14：

我正在研究 Lindenmayer 系统问题，我不知道 L、R、X、Y 代表什么。书上已经说过 F = 前进，B = 后退，- = 左转，+ = 右转 那么 L、R、X、Y 还剩下什么？

它们是由用户任意定义的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:25:14.083

L-系统是根据语法定义的。语法有一组*终结*符（有时称为*文字*）和一组*非终结符*。

终端无法扩展，但它们由海龟执行。相反，可以扩展非终结符（并且语法给出了控制扩展的规则），但它们不能直接执行，因为它们不是海龟指令。

在 L 系统中，终端是字符 F、B、+ 和 -，它们清楚地映射到海龟执行的特定操作。所有其他字符都是非终结符：它们可以根据提供的规则扩展为终结符和非终结符序列，以增加图形的复杂性。

因此，L、R、X、Y 是非终结符的任意名称。我们也可以称它们为 K、L、M、N，并且 L 系统不会改变。有时，名称是作为符号角色的提示（例如，L 可能意味着“左手组件”），但有时它们只是任意的（如 X 和 Y）。

# jquery - Jquery表单序列化 - jqgrid上的多项选择

> ID：12699045
> 
> 赞同：0
> 
> 时间：2012-10-02T22:04:38.290
> 
> 标签：jquery, spring-mvc, jqgrid, jqgrid-php

我有一个 jqGrid，我在其中向 colmodel 发送一个名为“**设备**”的特定属性的字符串值。只要值在网格上完美显示，一切都很好。我还添加了一个添加和编辑按钮，一切都很好，工作正常，表单按预期显示。（原谅这篇明显长的帖子，但它非常容易理解）

我在添加表单上修改了名为设备的字段，并像这样注入了我自己的多项选择

**模型**

```
 {name:'equipments',index:'equipments', width:6, editable:true, edittype:'custom',
              editoptions:{
                  custom_element:function(){                                  
                        return $('<div id="mytrensferselect"><div class="transfer"><select id="select1" multiple="multiple"></select><a href="#" id="addbutton">add</a></div><div class="transfer"><select id="select2" multiple="multiple"></select><a href="#" id="removebutton">remove</a></div></div>');  
                      },
                      custom_value:function(ele){
                                return ele.val();           
                      }                               
                  }                           
            } 
```

**添加按钮 - beforeShowForm 选项**

```
 bSubmit: "Save and New",
                    bCancel: "Cancel",
                    beforeShowForm: function(form) {
                            $.get('<c:url value="/moduleinstances/retrieveequipments?miId="/>' , function(data){  //load in my list of equipments as json string
                                var obj = jQuery.parseJSON(data);  //parse the resulting json in order to populate select1 and select2
                            $("#select1").html(obj.remaining);
                            $("#equipments").removeAttr("name").removeAttr("id").removeClass("customelement");
                            $("#select2").html(obj.owning).attr("name","equipments").attr("id","equipments").addClass("customelement");
                            $('#addbutton').click(function() {
                                return !$('#select1 option:selected').remove().appendTo('#equipments');
                            });
                            $('#removebutton').click(function() {
                                return !$('#equipments option:selected').remove().appendTo('#select1');
                            });
                            }); //End AJAX CALL abd CUSTOM Transfer Select logic

//Start Logic For Custom Save and Close Button

                        $('<a href="#">Save and Close<span class="ui-icon ui-icon-disk"></span></a>').click(function() {
                            if($.isNumeric($(form.selector+" #rateOfPay").val())){
                                $.post('<c:url value="/moduleinstances/create/${courseModule.id}"/>', $('#FrmGrid_list2').serialize() , function(data){
                                    $('#list2').trigger("reloadGrid");
                                    $("#cData").trigger('click');
                                }); 
                            }else{
                                    alert("Pay Rate must be numeric");
                            }                      
                        }).addClass("fm-button ui-state-default ui-corner-all fm-button-icon-left")
                        .prependTo("#Act_Buttons>td.EditButton");
                        $('#title').attr('value','${courseModule.name}'); 
                        $("#leadLecturer").val( '${lecturer.id}' );
                    } 
```

这是我添加表单的相关部分。

![在此处输入图像描述](../Images/06c57122f47bd0bc5575cec66a3883fe.png)

当我单击**保存和新建**时，该功能工作正常，这是我通过`bSubmit: "Save and New"`上面取消清除的提交按钮。这方面的邮政数据显示在您的左侧。当我单击`Save and close`作为我的自定义按钮的按钮时。帖子数据显示在您的右侧。

![在此处输入图像描述](../Images/38712e22966e182f946879886227c00b.png)

Save and Close 使用 jquery 像这样序列化整个表单`$('#FrmGrid_list2').serialize()`，这就是它变得毛茸茸的地方。

如果我们查看在这两种情况下发布的设备内容，我们可以看到名称差异。似乎 jqGrid 足够智能，可以计算出它的一组值，而 jquery serialize() 并没有按照我想要的方式进行。我正在使用 Spring MVC 3.0，这是我的设备数据执行操作的地方。

```
@RequestMapping(value = "update", method = RequestMethod.POST)
public @ResponseBody String update(Model uiModel,
        @RequestParam("id") Long mId,
        @RequestParam("campus") Long cId,
        @RequestParam("leadLecturer") Long lId,//This is actually a Person ID.
        @RequestParam("semesterStartDate") @org.springframework.format.annotation.DateTimeFormat(pattern = "MMMM dd, yyyy") java.util.Calendar semesterstartdate,
        @RequestParam("semesterEndDate") @org.springframework.format.annotation.DateTimeFormat(pattern = "MMMM dd, yyyy") java.util.Calendar semesterenddate,
        @RequestParam("tuitionStartDate") @org.springframework.format.annotation.DateTimeFormat(pattern = "MMMM dd, yyyy") java.util.Calendar tuitionstartdate,
        @RequestParam("tuitionEndDate") @org.springframework.format.annotation.DateTimeFormat(pattern = "MMMM dd, yyyy") java.util.Calendar tuitionenddate,
        @RequestParam("rateOfPay") Double rateOfPay,
        @RequestParam("equipments[]") ArrayList<String> equipments,
        HttpServletRequest httpServletRequest) { Bla...bla...bla } 
```

看看最后一个**@RequestParam**，Spring能够处理项目数组，但是当它使用jQuery序列化发布时，动作找不到名为“**设备[] ”的参数我在**[这里](http://www.craiglotter.co.za/2010/06/28/jquery-and-ajax-how-to-send-all-selected-values-from-a-multiple-select-box/)看到了一个关于这个的链接，我可以简单地这样做吗？

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:28:12.367

好的，为了其他人的利益，我为解决问题所做的是将表单手动序列化为格式正确的 json-string 并将该字符串变量发送到服务器。就像是

```
//select each form element and get its value using jquery
    var customPostData = '({ sessionNumber: "'+$("#sessionNumber").val()+'", sessionDate: "'+$("#sessionDate").val()+'", starttime: "'+$("#starttime").val()+'", endtime: "'+$("#endtime").val()+'", sessionStatus: "'+$("#sessionStatus").val()+'", sessionType: "'+$("#sessionType").val()+'", topic: "'+$("#topic").val()+'", id: "'+myId+'", equipments:'+selectedequips.toSource()+'})';
    var submitdata = eval('(' + customPostData + ')'); //use parseJSON insted of eval

    $.post("my-url", submitdata , function(data){
       //use the returning information in the data variable
    }); 
```

# php - jQuery => PHP 表单验证

> ID：12699048
> 
> 赞同：0
> 
> 时间：2012-10-02T22:04:41.330
> 
> 标签：php, forms

嗨，这是我第一次编写php来处理表单数据，我已经实现了jQuery来验证，我已经编写了PHP来处理表单，还有加密，加盐转义和过滤，在我写代码之前要将数据插入数据库，我只是想知道如何将 php 验证的结果发送回前端。jQuery 中有一定的安全级别，但是这可能会被关闭，但是通过 php 的安全级别更高，尤其是在电子邮件验证方面。PHP 在一个单独的文件中，所以我想知道将 PHP 程序连接回前端以通知用户他们的数据是否可以接受的最佳方式。我听说过会话重定向和 Ajax，但不想在 JS 关闭的情况下使用它。

谢谢蚂蚁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:20:40.443

为此使用 AJAX，这将允许您将数据发送到您的 PHP 脚本，并将用户保持在当前页面上。然后，您可以返回类似`true`或`false`取决于是否所有内容都通过了 PHP 验证的内容。

如果用户禁用了 Javascript，那么他们就不会让花哨的网站做有趣的事情。如果用户没有启用 javascript，请[在​​此处查看如何处理。](http://www.w3schools.com/tags/tag_noscript.asp)

本质上，您需要做一个常规表单，并让用户提交/重新加载页面，其中包含他们需要知道他们完成或修复错误所需的任何错误/成功消息。

# regex - 正则表达式：匹配字符串开头的文件名和结尾的参数

> ID：12699050
> 
> 赞同：-1
> 
> 时间：2012-10-02T22:04:43.467
> 
> 标签：regex

我正在寻找与下面字符串开头的**thank-you.aspx和末尾的****ty=1**匹配的正则表达式。这两个组件将始终相同，但中间的所有其他信息都会不同。我正在使用正则表达式在数据库中查找这些特定的thank-you.aspx URL。

**谢谢你.aspx** ?source=302454&ve=60493&fn=TestName%20&ln=TestName&leadimportid=0& **ty=1**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:07:41.543

我认为这会起作用：

```
^thank-you\.aspx.*ty=1$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:13:11.370

`^thank-you.aspx\?.*?&ty=1$`

`?`关键是`.*?`要有一个非贪婪的重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:27:28.410

For a MySQL selection

```
SELECT db.table.url WHERE db.table.url REGEXP '^thank-you.aspx.*\&ty=1$' 
```

# nginx - 作为 nginx 服务器上 Apache ab 测试的结果，每秒请求值非常低

> ID：12699055
> 
> 赞同：1
> 
> 时间：2012-10-02T22:04:52.953
> 
> 标签：nginx, amazon-ec2, memcached, apc, apachebench

我正在以下设置上测试我的新站点 * 2 个 m1.large ec2 实例作为弹性负载均衡器后面的 Web 服务器 * 两个 Web 服务器都安装了 memcache/apc/nginx/php-fpm * 1 个 m1.large ec2 实例用于 mongo db我从远程服务器运行它， `ab -n 100 http://beta.domain.com/` 我得到以下结果

```
Server Software:        nginx/1.1.19
Server Hostname:        beta.domain.com
Server Port:            80

Document Path:          /
Document Length:        50817 bytes

Concurrency Level:      1
Time taken for tests:   127.032 seconds
Complete requests:      100
Failed requests:        0
Write errors:           0
Total transferred:      5117100 bytes
HTML transferred:       5081700 bytes
Requests per second:    0.79 [#/sec] (mean)
Time per request:       1270.322 [ms] (mean)
Time per request:       1270.322 [ms] (mean, across all concurrent requests)
Transfer rate:          39.34 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       21   42 100.4     26    1018
Processing:  1119 1228  69.4   1218    1488
Waiting:      941 1016  41.8   1015    1159
Total:       1144 1270 121.6   1246    2199

Percentage of the requests served within a certain time (ms)
  50%   1246
  66%   1271
  75%   1281
  80%   1295
  90%   1364
  95%   1483
  98%   1547
  99%   2199
 100%   2199 (longest request) 
```

APC命中率在98%左右。此外，我在进行此测试时正在检查 memcached 日志文件，我可以看到 ab 正在访问两台服务器并访问 memcached 上的值（全部命中，没有未命中）。但 RPS 值仍然是 0.79。这不是很低吗？我错过了这里的重点吗？

**编辑**

此外，所有静态内容（css、js、图像）都从 Amazon S3 以 gz 格式提供，并且有 1 年的到期日期。

**编辑 2 **

我用参数运行了相同的测试，`-c 50`结果如下

```
Concurrency Level:      50
Time taken for tests:   49.332 seconds
Complete requests:      100
Failed requests:        0
Write errors:           0
Total transferred:      5118200 bytes
HTML transferred:       5082800 bytes
Requests per second:    2.03 [#/sec] (mean)
Time per request:       24666.145 [ms] (mean)
Time per request:       493.323 [ms] (mean, across all concurrent requests)
Transfer rate:          101.32 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       20   33  10.0     30      58
Processing:  7656 20521 6139.1  21495   29328
Waiting:     7538 20415 6131.9  21407   29243
Total:       7687 20554 6140.3  21540   29380

Percentage of the requests served within a certain time (ms)
  50%  21540
  66%  23255
  75%  25744
  80%  26204
  90%  27414
  95%  28098
  98%  29259
  99%  29380
 100%  29380 (longest request) 
```

** 负载生成 **

我猜ab是这样做的，不是吗？抱歉，我对基准测试很陌生 :) 我还添加`-c 50`并再次运行了测试。见上面的结果。

** 测试页面 **

此页面列出了 20 个带有图像、描述等的产品。进行一些后端计算，但结果都缓存在 memcache 中，因此它实际上从未命中数据库 (mongo)。我可以从 memcache 日志文件中看到这一点。

** 还有什么 **

这是`vmstat`ab 测试期间在其中一台服务器上的结果

```
procs -----------memory---------- ---swap-- -----io---- -system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa
 0  0      0 7161224  21028 199896    0    0    26    16   29   30  1  0 99  0 
```

和`iostat`

```
Linux 3.2.0-29-virtual  10/02/2012  _x86_64_    (2 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.67    0.00    0.31    0.15    0.34   98.54

Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
xvdap1            4.25        48.00        32.40     178001     120160
xvdb              0.17         0.54         0.00       1993          4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:12:00.733

这是否低取决于许多因素。

**负载生成**

你是如何产生负载的？如果您一次发送一个请求，则该值可能并非不合理。您发送多少并发请求？

**测试页面有什么作用？**

该页面上的处理量有多大？在系统没有任何负载的情况下完全加载页面需要多长时间？

**还有什么要检查的**

假设上述两种情况都没有出现问题，请查看服务器上对哪些资源征税。

采用

> vmstat
> 
> iostat

找出你在哪里失去性能。CPU是固定的吗？磁盘队列有多长？您是否正在使用所有可用内存？

**AWS 特定**

如果您有任何重要的 IO，您会发现 EBS 存储并不是很快。该问题的解决方案一直是将多个 EBS 卷条带化到软件 RAID

[http://www.mysqlperformanceblog.com/2009/08/06/ec2ebs-single-and-raid-volumes-io-bencmark/](http://www.mysqlperformanceblog.com/2009/08/06/ec2ebs-single-and-raid-volumes-io-bencmark/)

最近 AWS 发布了一项名为 Provisioned IO 的新服务，该服务将保证来自 EBS 卷的一定数量的磁盘 IO。它更昂贵，但不需要任何特殊配置即可使用（创建 EBS 卷时必须选择适当的选项）。

# objective-c - 如何回到目标C的主运行循环

> ID：12699056
> 
> 赞同：1
> 
> 时间：2012-10-02T22:04:52.220
> 
> 标签：objective-c, ios

我的第一个项目使用从 RedPark（ios 设备到 RS232）购买的串行电缆。我已经通过发送和接收数据让它工作了。（还不算太远。）我希望我的应用程序如何工作是 iphone 通过发送命令和外部设备回复所需的数据来充当通信的主人。

很多时候，我需要同时要求几个数据包。

我遇到了一个问题，就是RedPark提供的readByteAvaible()，事件驱动，所以不能在viewDidLoad或者其他方法中同时发送多个命令。我尝试了不同的方法来获取我需要的所有包。就像多线程一样。它们都不起作用。从库常见问题解答中，它说“在处理这些之前，您必须返回到您的运行循环”。

我对目标 C 还很陌生，仍然感到有些困惑。谁能告诉我如何实现这一目标？或者可能是关于目标 C 的主运行循环的一些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:18:27.907

运行循环是 Cocoa 版本的[事件循环](http://en.wikipedia.org/wiki/Event_loop)。所以这只是一系列要做的事情。Objective-C 是动态的，因此列表往往是目标和选择器；这不像 Win32 或 Mac Classic Toolbox 等旧的纯静态运行时之一，您需要等待消息结构然后根据消息类型输入一些复杂的分支。

运行循环和线程具有一对一的关系，主运行循环是在主线程上运行的。

总的来说，如果你不考虑任何额外的想法，那么你的所有代码都将出现在主运行循环上，因为提供所有控件的 UIKit 只在主运行循环上工作。

所以，假设你有一个 UIButton 并且它被连接起来调用`didPressButton:`then：

```
- (IBAction)didPressButton:(id)sender
{
    // this code is running on the main run loop

    NSLog(@"I'm executing on the main run loop");

    // when this method ends, control will return to the run loop
} 
```

您可能不想多线程，您可能只想在运行循环上安排。

您可以使用这些[`performSelectorOnMainThread:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorOnMainThread%3awithObject%3awaitUntilDone%3a)方法从任何地方在主运行循环上安排一些事情。如果您已经在主线程上，您可以使用它[`performSelector:withObject:afterDelay:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3a)来安排在主运行循环上发生的事情，但只有在已经安排了其他事情之后。您可以传递 0.0 的延迟以使其下一次发生，但也可以给已经安排在下一次发生的任何其他事情运行的机会。

RedPark 的 SDK 仅在您交出您的电子邮件地址后才可用，因此我拒绝这样做；你能给我们更多关于它是如何制定的信息吗？它是阻塞、回调、委托还是其他什么？

# jquery - 将变量从 $.ajax() 传递到 ASMX Web 服务

> ID：12699057
> 
> 赞同：0
> 
> 时间：2012-10-02T22:04:57.010
> 
> 标签：jquery, .net, web-services

有人可以告诉我如何将 $.ajax() 调用中的变量传递给 ASMX Web 服务吗？

网络服务：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Data.SqlClient;

public class Psyience
{
    public int ID;
    public string Choice;
    public string First;
    public string Last;
    public string Email;
}
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

[System.Web.Script.Services.ScriptService]
[System.Web.Script.Services.GenerateScriptType(typeof(Psyience))]
public class CRUD : System.Web.Services.WebService
{

    [WebMethod]
    public Psyience[] Anchor()
    {
        List<Psyience> items = new List<Psyience>();
        string constr = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["myConString"].ConnectionString;
        SqlConnection con = new SqlConnection(constr);
        SqlCommand cmd = con.CreateCommand();
        cmd.CommandText = "select Choice from tbl_Psyience WHERE Choice = 'Anchor'";
        try
        {
            con.Open();

            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                Psyience item = new Psyience();
                item.Choice = dr["Choice"].ToString();
                items.Add(item);
            }
            con.Close();
            return items.ToArray();
        }
        catch
        {
            return null;
        }
    }

} 
```

这是jQuery：

```
$(document).ready(function () {
    $.ajax({ type: "POST",
        url: "Services/CRUD.asmx/Anchor",
        data: "{ }",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            var result = response.d;
            var myRecord = "";
            $.each(result, function (index, res) {
                myRecord = res.Choice;
            $('#myDiv').append(myRecord);
            });

        },
        error: function (msg) {
            $('#myErr').html("Error while calling web service,,")
        }
    });
}); 
```

我想将一个字符串值从 jQuery 传递到我的 Web 服务中的命令文本。

“从 tbl_Psyience 选择选择 WHERE 选择 = 'passVarToHere'”

不知道如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:07:19.287

您在ajax 请求的**数据属性中执行此操作**

```
data: { 'Choice' : yourchoice },  // Yourchoice in string 
```

你的 WebMethod 将接受一个字符串参数

```
public Psyience[] Anchor(string Choice)
    { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:09:30.700

当然，“选择”变量可以从文本框控件中获取值，如下所示：

```
var passvartoHere = $("#txtbox").val(); 
```

编辑：我的解决方案将与上面已经发布的解决方案一起使用。

# typescript - TypeScript：可变参数函数的类型

> ID：12699058
> 
> 赞同：36
> 
> 时间：2012-10-02T22:04:58.110
> 
> 标签：typescript

> **可能重复：**
> [带有 TypeScript 的开放式函数参数](https://stackoverflow.com/questions/12697275/open-ended-function-arguments-with-typescript)

可变参数函数是否有任何可接受的类型签名？例子：

```
function sum () {
  var sum = 0;
  for (var i = 0; i < arguments.length; i++) {
    sum += arguments[i];
  }
  return sum;
};

console.log(sum(1, 2, 3, 4, 5)); 
```

给我编译错误：

```
foo.ts(9,12): Supplied parameters do not match any signature of call target 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-02T22:28:59.517

在 TypeScript 中，您可以使用 " `...`" 来实现上述模式：

```
function sum (...numbers: number[]) {
  var sum = 0;
  for (var i = 0; i <  numbers.length; i++) {
    sum += numbers[i];
  }
  return sum;
}; 
```

这应该可以解决您的错误。

# java - 将 Weka 分类器的结果写入 Java 文件

> ID：12699059
> 
> 赞同：0
> 
> 时间：2012-10-02T22:05:01.703
> 
> 标签：java, text-files, weka

我在 Java 代码中的 Weka 中生成决策树，如下所示：

```
 J48 j48DecisionTree = new J48();   
        Instances data = null;
        data = new Instances(new BufferedReader(new FileReader(dt.getArffFile())));              
        data.setClassIndex(data.numAttributes() - 1);
        j48DecisionTree.buildClassifier(data); 
```

我可以将 Weka 结果缓冲区的结果保存到程序中的文本文件中，以便在运行时将以下内容保存到文本文件中：

> === 分层交叉验证 === === 总结 ===

```
Correctly Classified Instances         229               40.1754 %
Incorrectly Classified Instances       341               59.8246 %
Kappa statistic                          0.2022
Mean absolute error                      0.1916
Root mean squared error                  0.3138
Relative absolute error                 80.8346 %
Root relative squared error             91.1615 %
Coverage of cases (0.95 level)          96.3158 %
 Mean rel. region size (0.95 level)      70.9774 %
Total Number of Instances              570     

=== Detailed Accuracy By Class ===

           TP Rate   FP Rate   Precision   Recall  F-Measure   ROC Area  Class
             0.44      0.012      0.786     0.44      0.564      0.76     Business and finance and economics
             0         0          0         0         0          0.616    Fashion and celebrity lifestyle
             0.125     0.01       0.667     0.125     0.211      0.663    Film
             0         0.002      0         0         0          0.617    Music
             0.931     0.78       0.318     0.931     0.474      0.633    News and current affairs
             0.11      0.006      0.786     0.11      0.193      0.653    Science and nature and technology
             0.74      0.012      0.86      0.74      0.796      0.85     Sport 
```

加权平均 0.402 0.224 0.465 0.402 0.316 0.667

```
=== Confusion Matrix ===

  a   b   c   d   e   f   g   <-- classified as
 22   0   0   0  25   2   1 |   a = Business and finance and economics
  0   0   1   0  59   0   0 |   b = Fashion and celebrity lifestyle
  0   0  10   1  69   0   0 |   c = Film
  0   0   1   0  69   0   0 |   d = Music
  5   0   2   0 149   0   4 |   e = News and current affairs
  1   0   0   0  87  11   1 |   f = Science and nature and technology
  0   0   1   0  11   1  37 |   g = Sport 
```

dt 是我的一个类的一个实例，用来表示决策树的细节。

当我运行大量分类器时，这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:03:00.727

是的，这是可以做到的。但是您需要在 Weka 中创建一个评估实例并从该实例中调用适当的方法：

```
Evaluation eval = new Evaluation(data);
eval.evaluateModel(j48DecisionTree, data);
System.out.println(eval.toSummaryString("\nResults\n======\n", true)); 
```

会给个总结。

但随后的方法如：

```
eval.pctCorrect(); 
```

可以调用。有关详细信息，请参阅[Weka Javadoc](http://bio.informatics.indiana.edu/ml_docs/weka/weka.classifiers.Evaluation.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:52:29.953

Weka 分类器有一个广泛的`#toString()`方法，它为您提供人类可读的表示，在本例中为树。您还可以使用`#toSource(String)`获取决策树的等效 Java 代码。

如果您想存储模型以供以后重新使用，请查看`weka.core.SerializationHelper`.

# ruby-on-rails - rake 迁移中止：找不到表“角色”

> ID：12699060
> 
> 赞同：2
> 
> 时间：2012-10-02T22:05:06.290
> 
> 标签：ruby-on-rails, migration, rake, abort

我只是继承了我试图为其运行迁移的代码，但我不断收到 rake aborted 错误。我遇到过其他似乎有类似问题的人，但大多数涉及 Heroku，我正在尝试在本地运行它（开始。）

我已经尝试使用 PostgreSQL 和 SQLite 进行故障排除，并且都产生了相同的问题。引用的表“角色”是调用的第二个迁移，所以我很难弄清楚是什么导致它无法构建。非常感谢任何和所有的帮助。提前致谢。

这是角色迁移：

```
class CreateRoles < ActiveRecord::Migration
  def change
    create_table :roles do |t|
      t.string :name

      t.timestamps
    end
  end
end 
```

这是 SQLite 的跟踪：

```
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
Could not find table 'roles'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/sqlite_adapter.rb:470:in `table_structure'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/sqlite_adapter.rb:351:in `columns'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:228:in `yield'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:228:in `default'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:228:in `columns'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:248:in `column_names'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:261:in `column_methods_hash'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/dynamic_matchers.rb:69:in `all_attributes_exists?'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/dynamic_matchers.rb:27:in `method_missing'
/Users/sa/Documents/AptanaWorkspace/recprototype/config/initializ
ers/constants.rb:1:in `<top (required)>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:245:in `load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:245:in `block in load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:236:in `load_dependency'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:245:in `load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/engi
ne.rb:588:in `block (2 levels) in <class:Engine>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/engi
ne.rb:587:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/engi
ne.rb:587:in `block in <class:Engine>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:30:in `instance_exec'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:30:in `run'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:55:in `block in run_initializers'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:54:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:54:in `run_initializers'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/appl
ication.rb:136:in `initialize!'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/rail
tie/configurable.rb:30:in `method_missing'
/Users/sa/Documents/AptanaWorkspace/recprototype/config/environme
nt.rb:5:in `<top (required)>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:251:in `require'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:251:in `block in require'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:236:in `load_dependency'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:251:in `require'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/appl
ication.rb:103:in `require_environment!'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/appl
ication.rb:292:in `block (2 levels) in initialize_tasks'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:205:in `call'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:205:in `block in execute'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:200:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:200:in `execute'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:158:in `block in invoke_with_call_chain'
/Users/sa/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in
 `mon_synchronize'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:151:in `invoke_with_call_chain'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:176:in `block in invoke_prerequisites'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:174:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:174:in `invoke_prerequisites'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:157:in `block in invoke_with_call_chain'
/Users/sa/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in
 `mon_synchronize'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:151:in `invoke_with_call_chain'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:144:in `invoke'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:116:in `invoke_task'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:94:in `block (2 levels) in top_level'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:94:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:94:in `block in top_level'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:133:in `standard_exception_handling'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:88:in `top_level'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:66:in `block in run'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:133:in `standard_exception_handling'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:63:in `run'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/bin/rake:33:in `
<top (required)>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate => environment 
```

这是 PostgreSQL 的跟踪：

```
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
PG::Error: ERROR:  relation "roles" does not exist
LINE 4:              WHERE a.attrelid = '"roles"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a
.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"roles"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/postgresql_adapter.rb:1106:in `async_exec'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/postgresql_adapter.rb:1106:in `exec_no_cache'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/postgresql_adapter.rb:650:in `block in exec_query'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/notifications/instrumenter.rb:20:in `instrument'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/abstract_adapter.rb:275:in `log'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/postgresql_adapter.rb:649:in `exec_query'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/postgresql_adapter.rb:1231:in `column_definitions'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/postgresql_adapter.rb:845:in `columns'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:228:in `yield'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:228:in `default'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:228:in `columns'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:248:in `column_names'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/model_schema.rb:261:in `column_methods_hash'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/dynamic_matchers.rb:69:in `all_attributes_exists?'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.1/lib/active
_record/dynamic_matchers.rb:27:in `method_missing'
/Users/sa/Documents/AptanaWorkspace/recprototype/config/initializ
ers/constants.rb:1:in `<top (required)>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:245:in `load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:245:in `block in load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:236:in `load_dependency'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:245:in `load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/engi
ne.rb:588:in `block (2 levels) in <class:Engine>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/engi
ne.rb:587:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/engi
ne.rb:587:in `block in <class:Engine>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:30:in `instance_exec'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:30:in `run'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:55:in `block in run_initializers'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:54:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/init
ializable.rb:54:in `run_initializers'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/appl
ication.rb:136:in `initialize!'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/rail
tie/configurable.rb:30:in `method_missing'
/Users/sa/Documents/AptanaWorkspace/recprototype/config/environme
nt.rb:5:in `<top (required)>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:251:in `require'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:251:in `block in require'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:236:in `load_dependency'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.1/lib/activ
e_support/dependencies.rb:251:in `require'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/appl
ication.rb:103:in `require_environment!'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/railties-3.2.1/lib/rails/appl
ication.rb:292:in `block (2 levels) in initialize_tasks'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:205:in `call'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:205:in `block in execute'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:200:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:200:in `execute'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:158:in `block in invoke_with_call_chain'
/Users/sa/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in
 `mon_synchronize'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:151:in `invoke_with_call_chain'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:176:in `block in invoke_prerequisites'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:174:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:174:in `invoke_prerequisites'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:157:in `block in invoke_with_call_chain'
/Users/sa/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in
 `mon_synchronize'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:151:in `invoke_with_call_chain'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb
:144:in `invoke'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:116:in `invoke_task'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:94:in `block (2 levels) in top_level'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:94:in `each'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:94:in `block in top_level'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:133:in `standard_exception_handling'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:88:in `top_level'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:66:in `block in run'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:133:in `standard_exception_handling'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/applica
tion.rb:63:in `run'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/bin/rake:33:in `
<top (required)>'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `load'
/Users/sa/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate => environment 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T03:29:13.690

这不是您问题的直接答案，但无论如何我都会将其作为答案发布，因为我认为它会对您有所帮助。

与其从一开始就运行所有代码的迁移，不如`schema.rb`为应用程序使用该文件。请注意，这仅在您首次设置已开始使用的现有应用程序时有效（因为它强制创建所有表，因此删除任何内容），但这是在此加载数据库的正确方法案子。迁移意味着增量更改。

要将架构加载到数据库中：

```
rake db:schema:load 
```

然后您的数据库将根据`schema.rb`文件进行设置（为此，Rails 会自动更新该文件）。

**编辑** 问题的原因可能是应用程序中的某些代码在引用`roles`表（或更可能是`Role`模型）的迁移之前加载。当文件中有数据库查询时，这种情况经常发生`routes.rb`，但它可能来自`environment`调用 rake 任务时加载的任意数量的文件（任务就是这种情况`:migrate`）。

**编辑 2**查看您的堆栈跟踪：

> /Users/sa/Documents/AptanaWorkspace/recprototype/config/initializ ers/constants.rb:1:in `'

我猜该`config/initializers/constants.rb`文件有类似`Role.all`. 每当加载 Rails 环境时都会加载初始化程序（Rails 提供的大多数 rake 任务都是这种情况）。

您仍然应该使用该`rake db:schema:load`任务，但是您需要在运行它之前注释掉该行（当然，如果我的理论是正确的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T03:40:10.187

似乎 正在对需要角色表存在`config/initializers/constants.rb`的类做一些事情。`Role`当您运行迁移时，初始化程序会正常加载，因此您的应用程序会因为该表尚不存在而崩溃。

很可能在角色表在他们的机器上创建之后，添加对现有角色表的依赖的开发人员这样做了。

你可以

*   假设 schema.rb 已签入，尝试加载架构而不是运行迁移`rake db:schema:load`。如果加载架构加载初始化程序，这将不起作用 - 我不记得是否是这种情况
*   从 SQL 转储中恢复数据库
*   注释掉有问题的代码（或用表存在的测试将其括起来），然后运行迁移/加载模式 - 所做的任何事情都不太可能对运行迁移至关重要。如果注释掉该代码会产生更多故障，请使用源代码管理将应用程序恢复到最初签入迁移后的状态，希望任何此类问题都更容易解决

# python - 我的程序填满了内存。还有另一种方法吗？

> ID：12699061
> 
> 赞同：2
> 
> 时间：2012-10-02T22:05:09.550
> 
> 标签：python

我知道对象 refguess 变成 95^n 个字符长，这就是存储在内存中的内容。是否可以一次将一个元素加载并迭代到内存中，在加载新元素之前将其擦除？最终，我想将它移植到 GPU 上运行，以利用着色器核心的卓越数字处理能力，因此较小的 RAM 占用空间将是最佳选择。

```
import itertools
import string

i = 1
refguess = ''
password = ' ~}}'
charlist = list(string.printable)
charlist = charlist[1:95]

while refguess != password:
    i += 1
    for idx, val in enumerate(list(itertools.product(charlist,repeat=i))):
        refguess = ''.join(map(str,val))
        if refguess == password:
            print('Password is ' + '(' + refguess + ')')
            break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:16:58.517

正如 Mark Ransom 所发布的，答案是我在不需要的时候列出了一份清单。

谢谢！

# mysql - 简化自联接 SQL

> ID：12699062
> 
> 赞同：1
> 
> 时间：2012-10-02T22:05:12.047
> 
> 标签：mysql, sql, join, self-join

我目前正在执行以下连接，执行查询需要很长时间，有没有办法让它运行得更快？我在表中有 23 个字段。我在字段 'id' (int) 5 reg (varchar) 9 上有一个主键

```
SELECT a1.*, ( SELECT COUNT(reg) FROM auction a2 WHERE reg = a1.reg) AS c1 FROM auction a1

CREATE TABLE IF NOT EXISTS `db1` (
  `id` int(5) unsigned NOT NULL AUTO_INCREMENT,
  `adate` varchar(10) NOT NULL,
  `lnu` int(4) NOT NULL,
  `reg` varchar(9) NOT NULL,
  `mk` varchar(50) NOT NULL,
  `mod` varchar(50) NOT NULL,
  `type` varchar(25) NOT NULL,
  `ree` varchar(50) NOT NULL,
  `co` varchar(50) NOT NULL,
  `fu` varchar(20) NOT NULL,
  `tran` varchar(20) NOT NULL,
  `mt` varchar(9) NOT NULL,
  `mile` int(6) NOT NULL,
  `ree` int(6) NOT NULL,
  `apv` int(6) NOT NULL,
  `ds` int(2) NOT NULL,
  `sr` varchar(50) NOT NULL,
  `sen` int(10) NOT NULL,
  `keep` int(2) unsigned NOT NULL,
  `tmp` char(1) DEFAULT NULL,
  `rk` varchar(100) DEFAULT NULL,
  `st` varchar(3) DEFAULT NULL,
  `dd` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `date` (`adate`) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:08:42.953

从您当前的架构来看，您应该`index`在`reg`列上提供。

```
SELECT a1.*, a2.totalCount
FROM    auction a1
        INNER JOIN 
        (
            SELECT reg, COUNT(*)  totalCount
            FROM auction a2
            GROUP BY reg
        ) a2 
            ON a2.reg = a1.reg 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:08:25.337

如前所述，如果您唯一的索引是 (id, reg) 上的主键，那么通过在 (reg) 上单独添加索引可以大大加快此查询的速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:08:18.460

您是否尝试过使用子查询：

```
SELECT a1.*, a2.cnt
FROM auction a1
INNER JOIN
(
    SELECT COUNT(reg) cnt, reg
    FROM auction
    GROUP BY reg
) a2
    on a1.reg = a2.reg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:25:50.573

您有 2 个选项：

1.  在连接列上有一个索引，即 reg 。这可能有助于加快查询。

2.  使用 CTE。

使用 CTE001 AS (Select count( *) as GroupCount, reg from auction group by reg) 选择 a。*, c.GroupCount 来自 CTE001 c 内部加入拍卖 a 上 c.reg = a.reg;

# mysql - 如何在hibernate中使用 between 子句比较日期

> ID：12699064
> 
> 赞同：6
> 
> 时间：2012-10-02T22:05:21.973
> 
> 标签：mysql, spring, hibernate, date

我想获取介于两个时间戳之间的记录。我想要这个使用休眠。我尝试使用以下查询进行操作，但没有得到任何输出

`HQL = "From AddressInfo address where address.addressId = '"+newValues.get("pickupAddress").toString()+"' and address.updatedDateAndTime between date_format('" + DateUtility.getTimeOfBeforeOneMinute() + "', '%m/%d/%y %H:%i:%s') and date_format('"+DateUtility.getCurrentDate()+"','%m/%d/%y %H:%i:%s')";`

这是从控制台形成的 SQL 查询：

`select addressinf0_.T_ADM_NPK_ADDRESS_ID as T1_5_, addressinf0_.T_ADM_VNM_USER_ID as T2_5_, addressinf0_.T_ADM_FPK_USER_ASSIGNED_ID as T3_5_, addressinf0_.T_ADM_VNM_STREET_1 as T4_5_, addressinf0_.T_ADM_VNM_STREET_2 as T5_5_, addressinf0_.T_ADM_VNM_STREET_3 as T6_5_, addressinf0_.T_ADM_VNM_CITY as T7_5_, addressinf0_.T_ADM_VNM_STATE as T8_5_, addressinf0_.T_ADM_VNM_ZIPCODE as T9_5_, addressinf0_.T_ADM_DNM_LATITUDE as T10_5_, addressinf0_.T_ADM_DNM_LONGITUDE as T11_5_, addressinf0_.T_ADM_TNM_CREATE_DATETIME as T12_5_, addressinf0_.T_ADM_TNM_UPDATE_DATETIME as T13_5_ from t_address_master addressinf0_ where addressinf0_.T_ADM_NPK_ADDRESS_ID='19' and (addressinf0_.T_ADM_TNM_UPDATE_DATETIME between date_format('Tue Oct 02 17:09:53 EDT 2012', '%m/%d/%y %H:%i:%s') and date_format('Tue Oct 02 17:10:53 EDT 2012', '%m/%d/%y %H:%i:%s'))`

 `我的数据库有一条记录 T_ADM_TNM_UPDATE_DATETIME = 10/2/2012 5:10:40 PM

但是结果集无法获取此查询...我不知道我哪里出错了。

谁能进一步指导我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T16:06:45.953

您应该使用 HQL 参数而不是连接。

举个例子：

```
Map<String, Object> parameterNameAndValues = new HashMap<String, Object>();

Date startDate;
Date endDate;

// Assign values to startDate and endDate

parameterNameAndValues.put("startDate", startDate);
parameterNameAndValues.put("endDate", endDate);

String hqlQuery = "FROM EntityName WHERE fechaInicio BETWEEN :startDate AND :endDate";

Query query = this.sessionFactory.getCurrentSession().createQuery(hqlQuery);

for (Entry<String, Object> e : parameterNameAndValues.entrySet()) {
    query.setParameter(e.getKey(), e.getValue());
}

return query.list(); 
```

这将绑定日期参数，hibernate 将为您进行必要的转换，以避免完整性检查和错误。请记住，即使 MySQL 以该格式保存 Date 对象，其他数据库也可能不会，它会破坏 Hibernate 的帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-28T10:30:20.997

使用此代码：

```
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");

java.util.Date date = df.parse(startDate);

java.util.Date date1 = df.parse(endDate);

Date fromDate = new java.sql.Date(date.getTime()); 

Date toDate = new java.sql.Date(date1.getTime());

return this.sessionFactory.openSession().createQuery("From UserDailyLogin where userProfile.userId='"+id+"' And createdDate BETWEEN '"+startDate+ "' AND '"+endDate+"' ").list(); 
````

# c# - NSubstitute：使用数组参数检查接收到的方法

> ID：12699066
> 
> 赞同：48
> 
> 时间：2012-10-02T22:05:26.270
> 
> 标签：c#, nsubstitute

我想验证我的 NSubstitute 模拟上的方法是否使用特定的数组参数调用。

说接口, `IProcessor`, 有一个方法`void ProcessSomething(Foo[] something])`。假设我的测试类名为`Commander`. 我这样设置我的测试：

```
//prepare
var processor = Substitute.For<IProcessor>;
var commander = new Commander(processor);
var foo1 = new Foo("alpha");
var foo2 = new Foo("bravo");
var foos = new [] {foo1, foo2};

//act
commander.DoSomething(foo1, foo2);

//verify
processor.Received().ProcessSomething(foos);  // FAILS 
```

`Received()`调用失败并显示：

```
NSubstitute.Exceptions.ReceivedCallsException : Expected to receive a call matching:
    ProcessSomething(Foo[])
Actually received no matching calls.
Received 1 non-matching call (non-matching arguments indicated with '*' characters):
    ProcessSomething(*Foo[]*) 
```

所以这看起来像 ProcessSomething 是用其他数组调用的`foos`，对吧？

好吧，如果我改为测试这个，我使用 捕获参数值`Arg.Do()`，它会成功：

```
//prepare
//... as before
var actualFoos = null;

processor.ProcessSomething(Arg.Do<Foo[]>(x => actualFoos = x));

//act
commander.DoSomething(foo1, foo2);

//verify
Assert.That(actualFoos, Is.EqualTo(foos));   // SUCCEEDS 
```

因此，捕获参数并比较它是否相等（在此示例中使用 NUnit）是可行的，但验证接收到的调用失败。

这是 NSubstitute 中的错误，还是我用错了？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-02T22:16:24.400

我假设您的`Commander`对象将接受参数并将它们放入一个数组中，然后它会使用该数组来调用`Processor`模拟。

您的`foos`变量是您在设置中创建的另一个数组。即使它们具有相同的元素，数组也不会相互比较。所以 NSubstitute 会抱怨它没有收到预期的值（它收到了另一个恰好包含相同元素的数组）。

**编辑：**试试这个版本：

```
//prepare
var processor = Substitute.For<IProcessor>;
var commander = new Commander(processor);
var foo1 = new Foo("alpha");
var foo2 = new Foo("bravo");
var foos = new [] {foo1, foo2};

//act
commander.DoSomething(foo1, foo2);

//verify
processor.Received().ProcessSomething(Arg.Is<Foo[]>(foos2 => foos.SequenceEqual(foos2)); 
```

这需要导入`System.Linq`命名空间

# java - 蚂蚁如果目标失败

> ID：12699067
> 
> 赞同：0
> 
> 时间：2012-10-02T22:05:30.563
> 
> 标签：java, ant, ant-contrib

我有一个 ant 任务，它从 `myproject.properties`. 环境属性值设置为 `prod`并显示“Prod 条件为真”。我看到该 `${environment}`变量设置为 prod，但如果条件永远不会为真。有人可以解释为什么吗？

myproject.properties：

```
environment=prod 
```

构建.xml：

```
<project name="my-project" default="run" basedir=".">
  <property file="myproject.properties" />
  <target name="run">
  <echo message="running target run ${environment}"/>
    <if>
      <equals arg1="${environment}" arg2="prod">
        <then>
          <echo message="Prod condition is true"/>
           <!--do prod environment specific task-->
       </then> 
    </if>    
  </target>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:59:52.100

除了您的`equals`任务缺少结束标签（实际上它应该是一个自闭合标签）这一事实之外，我敢打赌您在某处隐藏了一个空格。在你的`echo`，用撇号或其他东西包围属性的打印输出：

`<echo message="running target run '${environment}'"/>`

您可能会在值的末尾看到一个空格。这是我能想到的唯一合理的解释。或者，尝试运行，`-Denvironment=prod`看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:05:02.427

以下解决方案使用核心 ANT。它避免使用[ant-contrib](http://ant-contrib.sourceforge.net/)扩展提供的“if”任务。

```
<project name="my-project" default="run" basedir=".">
    <property file="myproject.properties" />

    <condition property="prod.set">
        <equals arg1="${environment}" arg2="prod"/>
    </condition>

    <target name="run" if="prod.set">
        <echo message="Prod condition is true"/>
    </target>
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T04:51:09.483

希望您会这样做，但只是提醒一下，您是否在 project.xml 中包含了 antcontrib jar 并放置了相关的 taskdef？如果不是，请更正构建文件，并将 ant contrib jar 复制到类路径中

```
<project name="SampleWS" default="run" basedir=".">
<taskdef resource="net/sf/antcontrib/antlib.xml" classpath="lib/ant-contrib-0.6.jar" onerror="ignore"/>
 <property file="myproject.properties" />
 <target name="run">
 <echo message="running target run ${environment}"/>
    <if>
      <equals arg1="${environment}" arg2="prod"/>
        <then>
          <echo message="Prod condition is true"/>
           <!--do prod environment specific task-->
       </then> 
   </if>    
</target>
</project> 
```

# objective-c - 使 UIScrollView 的最后一页不可访问但在“结束反弹”中可见？

> ID：12699070
> 
> 赞同：0
> 
> 时间：2012-10-02T22:05:49.507
> 
> 标签：objective-c, xcode, uiscrollview, bounce

只是想知道是否有人有任何“简单”的想法来做到这一点。实际上，我想要一种在倒数第二个页面（子视图）上结束 scrollView 的方法，但最后一个在反弹中可见 - 尽管不可访问（scrollView 不会分页到该视图）。

我尝试了一些解决方法，但到目前为止还没有成功。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:10:04.630

当然。将滚动视图的内容大小设置为小于内容的实际宽度——例如，如果您在其中有三个 320pt 宽的视图并且您只希望前两个可访问，请将其内容大小设置为`(640, <whatever>)`. 第三个视图将在滚动视图结束时可见，但在其他情况下无法访问。

# php - 获取选择框选项值不起作用

> ID：12699078
> 
> 赞同：1
> 
> 时间：2012-10-02T22:06:47.960
> 
> 标签：php, html, forms, post

我正在尝试从选择框中获取选项值，但不起作用：

**HTML：**

```
<form action="" method="post" name="module_gen">
    <select id="module_gen_select_ver" name="module_gen_select_ver">
        <option value="joomla15">Joomla 1.5</option>
        <option value="joomla25_30">Joomla 2.5/3.0</option>
    </select>
</form> 
```

**PHP：**

```
if(isset($_POST['module_gen_select_ver'] ) == 'joomla15') {
    $xmldata = '</install>';
}
elseif(isset($_POST['module_gen_select_ver'] ) == 'joomla25_30') {
    $xmldata = '</extension>';
} 
```

当我单击提交按钮时，它似乎没有考虑选项的值。

谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:13:12.220

你的 if 条件是错误的。

```
if(isset($_POST['module_gen_select_ver'] ) == 'joomla15') 
```

正在获取 的返回值`isset($_POST['module_gen_select_ver'] )`，它是一个布尔值，然后将其与 进行比较`'joomla15'`，因此不满足条件。它应该是：

```
if(isset($_POST['module_gen_select_ver']) and $_POST['module_gen_select_ver'] == 'joomla15') 
```

条件仍然是安全的，就好像它没有设置一样，第二个条件甚至不会被读取用于所有意图和目的。

或者您可以简单地将 if 和 elseif 都包装在其中，`if(isset($_POST['module_gen_select_ver'])`然后将其从 if 和 elseif 中删除，因此：

```
if(isset($_POST['module_gen_select_ver'])
{
    if($_POST['module_gen_select_ver'] == 'joomla15')
//etc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:14:09.093

由于括号错误，您的 if 逻辑有缺陷。现在，您正在`isset($_POST['module_gen_select_ver'] )`比较`'joomla15'`. 相信你打算比较`$_POST['module_gen_select_ver']`一下`'joomla15'`。

# ios - 带有前缀的自定义类未显示在 Interface Builder 的自定义类组合框中

> ID：12699079
> 
> 赞同：4
> 
> 时间：2012-10-02T22:06:49.827
> 
> 标签：ios, class, interface-builder

如果我创建了一个从 UIViewController 派生的名为 MTViewController 的自定义类，我无法在 XCode 4.5 的 Interface Builder 的自定义类组合框中选择它。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T23:03:40.773

我认为这是界面生成器的错误。而且它与 UIViewController 或 MTViewController 无关。出于某种原因，它没有在那里显示一些新添加的类名，但是如果您自己键入并运行应用程序，您不会收到任何错误。

此外，您可以尝试这个，在创建一个类后关闭项目并再次打开它。如果你这次去身份检查员，你会在那里看到类名。所以在我看来，这是 XCode 中的一个错误。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T19:48:16.683

您可以尝试这些步骤中的任何一个。

1.  确保它继承 UIViewController。@interface MTViewController : UIViewController
2.  如果存在 MTViewController.m，则在构建阶段进行目标检查
3.  删除 UIViewController UI 对象并将其重新放回并检查它是否出现在自定义类中

4.  只是为了重置它关闭你的项目并再次打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-17T13:50:02.283

好的，我刚刚将 iMac 和 Macbook 升级到 Xcode 6.3。在我的 iMac 上，我的项目一切都很顺利，但在我的 Macbook 上，我无法让我的任何自定义视图控制器出现在我的任何 xib 的文件所有者的自定义类字段中。即使创建一个新项目仍然行不通。我知道这对我的项目没有问题，因为它适用于我的 iMac。

因此，经过数小时尝试不同的解决方案和调整后，唯一有效的方法是卸载 Xcode 6.3 并重新安装它。我相信这个问题是由于多年来我通过多个版本的 Xcode 升级而导致的。

如果您遇到此问题，请为阅读本文的任何人省去头痛，并从 Xcode 的干净版本开始。

# python - Python：遍历列表但重复一些项目

> ID：12699083
> 
> 赞同：0
> 
> 时间：2012-10-02T22:07:12.623
> 
> 标签：python, scripting

在 Python 中，我正在编写一个脚本来模拟客户下订单。它将包括创建订单、向其中添加行，然后签出。我目前正在这样做：

```
api = ['login', 'createOrder', 'scanBarCode', 'addLine', 'checkout']
for apiName in apiList:
  #call API 
```

我更多地将其设计为一个框架，因此可以轻松添加新的 API，以防万一发生变化。我的设计问题是这样的：我如何对其进行编码，以便我可以调用 scanBarCode 和 addLine N 次？就像是：

```
api = ['login', 'createOrder', 'scanBarCode', 'addLine', 'checkout']
numberOfLines = (random number)
for apiName in apiList:
  #call API
  #if API name is scanBarCode, repeat this and the next API numberOfLines times, then continue with the rest of the flow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:13:36.100

类似以下内容应该可以帮助您入门：

```
import random
api = ['login', 'createOrder', 'scanBarCode', 'addLine', 'checkout']
numberOfLines = random.randint(1, 10)   # replace 10 with your desired maximum
for apiName in api:
    if apiName == 'scanBarCode':
        for i in range(numberOfLines):
            # call API and addLine
    else:
        # call API 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:14:45.480

使用 range 或（最好）xrange 循环：

```
if apiName == 'scanBarCode':
    for _ in xrange(numberOfLines):
        {{ do stuff }} 
```

# perl - Perl 添加分隔符并删除最后一个

> ID：12699088
> 
> 赞同：1
> 
> 时间：2012-10-02T22:07:54.107
> 
> 标签：perl

我有几行文件，我想将所有行与分隔符组合并删除最后一行。

它不适用于 perl。但使用 sed。你能帮助用perl完成这项工作吗？

```
 cat a
a
b
c
d

 cat a |perl -lane 'printf("%s|",$_)' |perl -lane 's/|$//;print'
a|b|c|d|

 cat a |perl -lane 'printf("%s|",$_)' |sed 's/|$//'
a|b|c|d 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:36:15.747

为什么添加然后删除？

```
perl -pe'chomp; $_="|$_" if $. > 1; END { print "\n"; }' 
```

* * *

顺便一提，

```
cat file | perl -e'...'   # Useless use of cat 
```

可以写成

```
perl -e'...' <file 
```

由于提供的所有解决方案都是从 ARGV 读取的，因此您甚至可以删除重定向并将文件名作为参数传递。

```
perl -e'...' file 
```

* * *

为了好玩，打高尔夫球：

```
perl -pE'chomp;$.>1&&s/^/|/;END{say""}'  # Based on mine
perl -nlE'push@L,$_}{$"="|";say"@L"'     # Based on JRF's
perl -E'chomp(@L=<>);say join"|",@L'
perl -0777pe's/\n(?!\z)/|/g' 
```

只有第一个不浪费内存。最后一个可能是最快的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T22:23:59.633

[加入](http://perldoc.perl.org/functions/join.html)使这变得微不足道。你可以这样做：

```
cat a | perl -lne'push @lines,$_;END{print join "|", @lines}' 
```

...但是你得到了无用的`cat`奖励，所以减少到：

```
perl -lne'push @lines,$_;END{print join "|", @lines}' a

a|b|c|d 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T22:14:25.103

尝试逃避它，

```
cat a |perl -lane 'printf("%s|",$_)' |perl -lane 's/\|$//;print' 
```

Perl 将`|`其视为一种`or`搜索和替换。

# jquery - 如何阻止 JqueryUI 模态对话框多次启动？

> ID：12699089
> 
> 赞同：0
> 
> 时间：2012-10-02T22:07:53.420
> 
> 标签：jquery, dialog, modal-dialog

这是场景 - 没有代码（这样更简单）：

1.  加载包含内容（包括脚本）的 div。
2.  其中一个脚本是 JqueryUI 模态对话框的初始化——它在脚本稍后的单击事件中“打开”......即，它没有同时初始化和打开。
3.  点击事件打开这个具有表单的模式。
4.  提交表单后，将进行 ajax 调用 - 将数据保存到数据库，然后导致“.load”函数重新加载整个 div - 再次加载该组脚本（包括模式的初始化）

然后...

*[编辑]*

**第一次单击打开模式和表单时，一切都很好。任何后续时间 - 多次运行表单和 ajax 调用。**

*[/编辑]*

对我来说似乎很清楚，再次初始化模态会导致单击事件触发时调用两个实例。

苏..

有没有办法（因为 - 记住 - 保存此代码的 div 正在重新加载 - 是的，我已经尝试将它放在该 div 之外......不行）来阻止初始化再次发生？

* * *

这是我尝试使用 $.one 函数的方法：

```
$("body").one("load", function(e){
    $("#scheduleMessagePopupDiv").dialog({
       autoOpen: false,
       height: 450,
       width: 340,
       modal: true,
       resizeable: false,
       dragable: false
    });
    alert("hello");
}); 
```

没用..警报永远不会触发...显然对话框从未初始化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:47:16.090

在我看来，这可以通过简单地使用`$.one()`函数[http://api.jquery.com/one/来解决](http://api.jquery.com/one/)

# lua - 挂钩机制的行为

> ID：12699097
> 
> 赞同：2
> 
> 时间：2012-10-02T22:08:12.963
> 
> 标签：lua, hook

我对钩子机制有一个奇怪的行为，我不明白，我喜欢一些帮助。

这是一个非常简单的例子，因为我正在学习语言：

富功能：

```
 function foo () print ("i'm in foo") end 
```

一些数据功能：

```
 function data () print ("This is the data : ") end 
```

然后我做钩子设置：

```
debug.sethook(data , "c") 
```

有线的事情是当我调用 foo 这是我得到的输出：

```
This is the data : 
This is the data : 
This is the data : 
This is the data : 
i'm in foo 
```

这是整个程序，所以没有隐藏的东西可能导致它。

我想知道为什么钩子被调用 4 次而不是一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:17:22.993

在下面的程序中，我只看到 3 条消息，而不是 4 条。解释是调用钩子在设置后为每个调用调用：`foo`, `print`, `tostring`, 由 调用`print`。

```
function foo () print ("i'm in foo") end
function data () print ("This is the data : ",debug.traceback()) end
debug.sethook(data , "c")
foo() 
```

# mysql - MySQL 在制表符分隔的文件中包含逗号 (LOAD DATA INFILE)

> ID：12699098
> 
> 赞同：2
> 
> 时间：2012-10-02T22:08:13.683
> 
> 标签：mysql, tabs, comma, delimited, file-io

这是一个特殊的场景：我正在尝试将一个制表符分隔文件导入 mysql，其中某些行的价格列高于 1,000。当我完成导入时，逗号后面的值被排除在外，最后我的表中只有 1。在 Linux 和 Windows 环境中都进行了尝试，结果相同。

例如，如果制表符分隔文件中的第 1 行、第 1 列包含值 1,564.50，那么我的 MySQL 表中的第 1 行第 1 列最终为 1。这是我正在使用的声明。

```
LOAD DATA LOCAL INFILE 'blah.txt'
 INTO TABLE `table1`
 FIELDS TERMINATED BY '\t'
 OPTIONALLY ENCLOSED BY  ''''
 LINES TERMINATED BY '\n'; 
```

所以我的问题是 1\. 有人可以确认这一点，或者如果我遗漏了一些东西，我该如何解决这个问题。2\. 如果这是一个 mysql 错误，我有什么选项可以解决正确导入这些值直到 mysql 修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:52:21.907

Windows 的默认分隔符是逗号。将其更改为另一个字符并将其与您的源数据匹配。

要更改默认分隔符：

转到控制面板--> 区域和语言选项（或日期、时间和区域选项--> 在某些机器上的区域和语言选项）--> 单击自定义按钮。在打开的对话框中，您将看到“列表分隔符”选项，您可以在其中将逗号更改为不同的字符 --> 单击应用，然后单击确定，然后再次应用。现在，当您进入 Excel 并选择导出为 CSV 时，新字符将用作分隔符。

# c++ - Avl 树删除中哪个子树的优先级更高

> ID：12699103
> 
> 赞同：0
> 
> 时间：2012-10-02T22:08:25.277
> 
> 标签：c++, c, data-structures

在 Avl 树上，当您删除具有 2 个子节点的节点时。我知道您可以将其替换为其后继节点（右子树上的最小值）或其前身（左子树上的最大值）。

我的问题是：在标准中，我与节点交换到哪个子树？继任者还是前任者？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:13:44.710

只要您事后进行所有必要的重新平衡，您就可以使用其中任何一种——算法可以通过任何一种方式运行。

如果您想变得非常聪明，您可以根据之后需要最少重新平衡的情况来选择其中一个。不过，这比总是选择下一个更大或更小的键要复杂得多。

# eclipse - Maven eclipse 插件：使用链接或虚拟文件夹作为源文件夹

> ID：12699107
> 
> 赞同：2
> 
> 时间：2012-10-02T22:08:48.223
> 
> 标签：eclipse, maven, maven-eclipse-plugin

我正在使用 maven-eclipse-plugin（不是 M2E！）来生成我的项目。我已经在一个源目录下检查了项目：C:\source，并且这个源没有按照 Maven 约定进行组织。我的 Eclipse 工作空间位于 C:\eclipse\workspace 下，其中有 POM 文件。

在 POM 中，我已指定创建链接/虚拟文件夹来以 Maven 格式（src/main/java 等）组织源：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-eclipse-plugin</artifactId>
        <version>2.9</version>
        <configuration>
          <linkedResources combine.children="append"> 
            <linkedResource>
              <name>src</name>
              <type>2</type>
              <locationURI>virtual:/virtual</locationURI> 
            </linkedResource>
            <linkedResource>
              <name>src/main</name>
              <type>2</type>
              <locationURI>virtual:/virtual</locationURI> 
            </linkedResource>
            <linkedResource>
              <name>src/main/java</name>
              <type>2</type>
              <locationURI>WORKSPACE_LOC/source/mymodule</locationURI>
            </linkedResource>
          </linkedResources>
          ...
        </plugin> 
```

当我通过运行为 eclipse 创建项目时`mvn eclipse:clean eclipse:eclipse`，生成的`.project`文件具有链接文件夹（或虚拟文件夹）：

```
<linkedResources>
    <link>
        <name>src</name>
        <type>2</type>
        <locationURI>virtual:/virtual</locationURI>
    </link>
    <link>
        <name>src/main</name>
        <type>2</type>
        <locationURI>virtual:/virtual</locationURI>
    </link>
    <link>
        <name>src/main/java</name>
        <type>2</type>
        <locationURI>WORKSPACE_LOC/source/mymodule</locationURI>
    </link>
</linkedResources> 
```

但是`.classpath`生成的文件不会将这些文件夹作为我的项目的源文件夹添加到类路径中，即缺少如下条目：

```
<classpathentry including="**/*.java" kind="src" path="src/main/java"/> 
```

如果我要使用 eclipse（而不是使用 maven-eclipse-plugin）创建一个项目，我可以根据需要创建虚拟/链接文件夹并将它们作为源文件夹添加到项目中。

使用该插件，我被迫将源文件夹的绝对路径指向为 sourceDirectory。该插件似乎无法识别链接/虚拟文件夹，因此不会将它们作为源文件夹添加到我的项目中。有没有解决方案，我可以将链接文件夹作为源文件夹添加到使用 Maven eclipse 插件生成的 eclipse 项目中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:00:15.690

您是否尝试过以下方法？

1.  将源代码（包括现有的 POM 文件）签出到`C:\source`.

2.  打开 Eclipse 到工作区`C:\eclipse\workspace`。

3.  选择**文件 > 导入... > Maven > 现有 Maven 项目**

4.  导航到包含您的`pom.xml`文件的目录并继续导入。

这适用于我将源路径和工作空间路径完全分开的项目。

# c++ - 双向链表中的自定义数据类型

> ID：12699108
> 
> 赞同：1
> 
> 时间：2012-10-02T22:08:54.617
> 
> 标签：c++, types, g++, linked-list, doubly-linked-list

我正在尝试在双向链表中使用自定义数据类型。我可以创建列表，但是当我尝试调用插入函数时，它会出错。是什么导致了这个错误？

主.cpp：

```
#include "command.h" //my custom class 
#include "doublyLinkedList.h"
int main(){

    //create a queue of jobs:
    doublyLinkedList<command>* queue = new doublyLinkedList<command>;

    //creating a new command:
    command *c = new command();
    c->createCommand();
    c->print();
    const command *d = new command(c->name, c->description, c->shellString);

    queue->insert(*d); //problem line
}; 
```

doubleLinkedList.h 的插入函数：

```
template <class Type>
void doublyLinkedList<Type>::insert(const Type& insertItem)
{
nodeType<Type> *current;      //pointer to traverse the list
nodeType<Type> *trailCurrent; //pointer just before current
nodeType<Type> *newNode;      //pointer to create a node
bool found;

newNode = new nodeType<Type>; //create the node
newNode->info = insertItem;  //store the new item in the node
newNode->next = NULL;
newNode->back = NULL;

if(first == NULL) //if the list is empty, newNode is 
                  //the only node
{
   first = newNode;
   last = newNode;
   count++;
}
else
{
    found = false;
    current = first;

    while (current != NULL && !found) //search the list
        if (current->info >= insertItem)
            found = true;
        else
        {
            trailCurrent = current;
            current = current->next;
        }

    if (current == first) //insert newNode before first
    {
        first->back = newNode;
        newNode->next = first;
        first = newNode;
        count++;
    }
    else
    {
          //insert newNode between trailCurrent and current
        if (current != NULL)
        {
            trailCurrent->next = newNode;
            newNode->back = trailCurrent;
            newNode->next = current;
            current->back = newNode;
        }
        else
        {
            trailCurrent->next = newNode;
            newNode->back = trailCurrent;
            last = newNode;
        }

        count++;
    }//end else
}//end else
}//end insert 
```

该代码适用于整数和字符串，但不适用于“命令”类型。

错误：

```
In file included from main.cpp:2:0:
doublyLinkedList.h: In member function âvoid doublyLinkedList<Type>::insert(const Type&) [with Type = command]â:
main.cpp:34:18:   instantiated from here
doublyLinkedList.h:171:13: error: no match for âoperator>=â in âcurrent->nodeType<command>::info >= insertItemâ
doublyLinkedList.h:171:13: note: candidates are:
/usr/include/c++/4.6/bits/stl_pair.h:232:5: note: template<class _T1, class _T2> bool std::operator>=(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.6/bits/stl_iterator.h:315:5: note: template<class _Iterator> bool std::operator>=(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/stl_iterator.h:365:5: note: template<class _IteratorL, class _IteratorR> bool std::operator>=(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/basic_string.h:2621:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator>=(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/basic_string.h:2633:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator>=(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
/usr/include/c++/4.6/bits/basic_string.h:2645:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator>=(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:12:34.400

似乎您正在尝试保持列表排序，但是您还没有为`command`. `operator>=`如果您想按原样使用它，您需要为您的类型实现。

它的签名可能看起来像这样：

```
bool operator>= (const command& a, const command& b); 
```

# tsql - 使用带有子查询的内部联接更新表

> ID：12699111
> 
> 赞同：0
> 
> 时间：2012-10-02T22:09:03.120
> 
> 标签：tsql, subquery

我已经在网上搜索并无法提出解决方案。我感谢提供的任何帮助。

我有一张包含这些值的表格，等等。

```
Item Charge No  Item Ledger Entry No    IsReceivedInFull
--------------------------------------------------------
Ocean Freight   1525593
Factory Cost    1525593
Overhead        1525593
Factory Cost    1525593
Fee             1525593
Duty            1525593
Landing Freight 1525593 
```

我正在尝试遍历我的结果以检查每个项目分类帐条目是否我的表中有这五个组件；“海运”、“工厂成本”、“费用”、“关税”和“陆运”。如果一个单独的项目分类帐条目号至少有五行，每个上述项目费用号都有一个，那么我想将“IsReceivedInFull”设置为“是”

我来自 ABAP 编程背景，知道这可以通过几个 LOOP 语句轻松完成，但我是 T-SQL 新手，一直在努力解决这个简单的问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:16:19.520

你可以试试这个：

```
UPDATE mytable tgt
SET    tgt.isreceivedinfull="Yes"
WHERE  tgt.isreceivedinfull is null and
       exists(SELECT src.item_ledger_Entry_no, count(*) 
              FROM   mytable src
              WHERE  src.item_ledger_entry_no = tgt.item_ledger_entry_no  
                     and src.item_charge_no in ("Ocean Freight", 
                                                "Factory Cost", 
                                                "Fee", 
                                                "Duty", 
                                                "Landing Freight")
                    group by src.item_ledger_entry_no
                    having count(*) >= 5) 
```

您可能必须根据您的数据库类型调整字符串文字（“或'），以及字段名称和表名称，因为它们在您的示例中不可用。

那应该行得通。

解释：如果子选择的结果是非空记录集（意味着多于一行），则存在条件将为真。通过在子选择的 where 子句中使用 tgt.item_ledger_entry_no，如果此特定项目具有您要查找的 5 个条目，您将只获得非空值。说到这里，它还将为所有具有相同 ID 但其中一个不在您的列表中的行设置“是”（名为“开销”）。并且因为您有重复的行（名为“Factory Cost”的行有两次），所以有条件设置为大于或等于。

希望有帮助

丹尼尔

# c++ - 带有 Boost.Asio 的数据报 Unix 域套接字

> ID：12699114
> 
> 赞同：3
> 
> 时间：2012-10-02T22:09:22.243
> 
> 标签：c++, boost, boost-asio

我正在努力使用同步客户端代码接收数据，该同步客户端代码使用带有 Boost.Asio 的数据报 Unix 套接字。

服务器似乎工作正常，因为如果我用*netcat*连接到它，我会收到数据。但是，当尝试使用下面的代码时，它会卡在 receive_from() 中。*strace*显示调用了 receive_from() 系统调用但没有收到任何内容，而服务器上的*strace*显示正在尝试向客户端发送数据但它没有这样做。

```
boost::asio::io_service io_service;

boost::asio::local::datagram_protocol::socket socket(io_service);
socket.open();

cmd::cmd cmd;
cmd.type = cmd::cmdtype::request;
cmd.id = cmd::cmdid::dumptop;

boost::asio::local::datagram_protocol::endpoint receiver_endpoint("socket.unix");

/* The server receives this data successfully */
socket.send_to(
    boost::asio::buffer(reinterpret_cast<char*>(&cmd), 
    sizeof(cmd)),
    receiver_endpoint
);

boost::array<char, 128> recv_buf;
boost::asio::local::datagram_protocol::endpoint ep;

/* When the server sends data, nothing is received here.
   Maybe it's an issue with the endpoint??? */
size_t len = socket.receive_from(
    boost::asio::buffer(recv_buf), ep); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T22:53:25.780

问题是您只设置了发送端。

要通过同一个套接字接收，您需要绑定到文件名，就像在服务器端一样。这是代码最后几行的修改版本：

```
boost::array<char, 128> recv_buf;
boost::asio::local::datagram_protocol::endpoint ep("socket.unix.client");
// bind to the previously created and opened socket:
socket.bind(ep);

/* now get data from the server */
size_t len = socket.receive_from(
    boost::asio::buffer(recv_buf), ep); 
```

通常的习惯用法是服务器具有众所周知的文件名（`socket.unix`在您的代码中），并且每个通信客户端通过执行诸如附加自己的 pid 之类的操作来创建自己的唯一名称。此示例只是`socket.unix.client`为了简单起见，但当然这会将您限制为只有一个客户端，直到您更改它。

# paypal - 哪家基于 API 的支付提供商最适合众筹模式？

> ID：12699116
> 
> 赞同：2
> 
> 时间：2012-10-02T22:09:30.873
> 
> 标签：paypal, payment-gateway, payment, crowdsourcing

我正在开发一个新的以个人事业为中心的网站，为有需要的家庭、生病的人、受灾者等捐款。我现在正处于计划阶段，正在努力制定付款细节。我理想的提供者将提供以下能力：

*   运行内联事务（在我的网站上，我们没有 iFrame）
*   通过 API 创建用户和/或向尚未创建的用户汇款
*   通过 API 从主要持有账户向收款人付款或一次向多个收款人汇款

根据研究，我认为 PayPal Payments Standard 或 Pro 不会起作用。PayPal Standard 不是内联的，PayPal Pro 以拒绝众包应用程序而闻名。例如，Fiverr.com 和 GoFundMe.com 使用 PayPal Standard 大概是因为他们没有获得 PayPal Pro 的批准。

我对使用 PayPal Standard 的另一个担忧是，我可能会受到两次费用的打击：一次是在收款到持有账户时，一次是向个人收款人付款。

有没有人有这方面的经验或对支付提供商的建议？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:31:28.350

在我看来，最好使用的 API 是 WEPAY.COM。我会接受这个建议，因为我可能是唯一一个在我的回复中没有试图向你出售任何东西的人。我正在 www.Canigive.com 开发一个类似的教育平台，我们正在使用 wepay api，它对我们非常有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:48:44.320

我认为我们的产品[Balanced](https://www.balancedpayments.com)非常适合，因为它就是[为此而设计的](https://www.balancedpayments.com/flow)。

付款方式与任何信用卡处理程序非常相似，但是，资金不会进入您的商家帐户，而是存放在[*托管*帐户](http://en.wikipedia.org/wiki/Escrow)中，直到您准备好付款为止。准备好付款后，您可以创建两笔付款，一笔给商家（将收到大部分资金），另一笔给您自己收取费用。

一切都通过 RESTful API 运行，因此无需 iFrame 或将用户重定向到您的站点。

付款目前仅限于美国境内，因为 Balanced 使用次日 ACH 向商家结算信用，但是您可以从世界任何地方收取资金，前提是您可以使用美元付款。

要查看我们的客户与您所询问的业务模式相似，请查看[Crowdtilt](https://www.crowdtilt.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T04:33:35.963

实际上，PayPal 推荐的方法是 Adaptive Payments API 中的 Preapproval 功能。这也是 GoFundMe 使用的 AFAIK。

我已经在 quora 上回答了两个与此相关的问题，您可能会对 PayPal 推荐的众筹项目方法感兴趣：

[http://www.quora.com/PayPal/I-want-to-use-Paypal-for-my-self-hosted-crowdfund-campaign-but-I-heard-they-might-close-my-account-如果有太多钱进来了，那就有办法解决这个问题](http://www.quora.com/PayPal/I-want-to-use-Paypal-for-my-self-hosted-crowdfund-campaign-but-I-heard-they-might-close-my-account-if-theres-too-much-money-coming-in-is-there-a-way-to-fix-this)

[http://www.quora.com/PayPal/Is-paypal-better-for-crowdfunding-than-amazon-payments-why-or-why-not/answer/Praveen-Alavilli?snids=55404046#ans1382191](http://www.quora.com/PayPal/Is-paypal-better-for-crowdfunding-than-amazon-payments-why-or-why-not/answer/Praveen-Alavilli?snids=55404046#ans1382191)

如果您有任何我可以帮助的问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T22:56:57.550

PayPal 的“自适应支付”是支持众筹模式的最佳产品。 [https://developer.paypal.com/docs/classic/lifecycle/crowdfunding/](https://developer.paypal.com/docs/classic/lifecycle/crowdfunding/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T20:23:35.390

[Braintree](https://www.braintreepayments.com/)是一个全栈支付平台，可以支持与您类似的众筹业务。我们可以为您提供开始接受在线和移动支付所需的一切。您似乎对向收款人付款的能力感兴趣，因为目前我们不支持付款。如果您有任何问题，请随时与我们联系。披露：我在布伦特里工作

# iphone - 将 NSNotificationCenter 代码块方法与 ARC 一起使用时未调用视图控制器 dealloc

> ID：12699118
> 
> 赞同：8
> 
> 时间：2012-10-02T22:09:41.563
> 
> 标签：iphone, ios, uiviewcontroller, nsnotificationcenter, dealloc

当我在视图控制器的方法中使用`-addObserverForName: object: queue: usingBlock:`for时，该方法最终不会被调用。 `NSNotificationCenter``-viewDidLoad:``-dealloc`

（当我删除`-addObserverForName: object: queue: usingBlock:`时，`-dealloc`再次调用。）

使用`-addObserver: selector: name: object:`似乎没有这个问题。我究竟做错了什么？（我的项目正在使用 ARC。）

下面是我的实现示例，以防我在这里做错了什么：

```
[[NSNotificationCenter defaultCenter] addObserverForName:@"Update result"
                                                  object:nil
                                                   queue:nil
                                              usingBlock:^(NSNotification *note) {
                                                  updateResult = YES;
                                              }]; 
```

提前感谢您的帮助。

我尝试添加以下内容（无济于事）：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    if ([self isMovingFromParentViewController]) {
        [[NSNotificationCenter defaultCenter] removeObserver:self];
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T22:26:30.957

`updateResult`是一个实例变量，可防止对象在该块保留时被释放。

换句话说，你有一个保留周期。对象保留块，块保留对象。

您将需要创建对该实例及其变量的弱引用或 unsafe_unretained 引用以失去该关系。

在通知块之前添加以下内容：

```
__unsafe_unretained YouObjectClass *weakSelf = self; 
```

或（如果您使用的是 iOS5 及更高版本）

```
__weak YouObjectClass *weakSelf = self; 
```

然后，在该块中，通过新的弱引用引用该对象：

```
[[NSNotificationCenter defaultCenter] addObserverForName:@"Update result"
                                                  object:nil
                                                   queue:nil
                                              usingBlock:^(NSNotification *note) {
                                                  weakSelf.updateResult = YES;
                                              }]; 
```

请注意，保留周期本身并不是一件坏事。有时您实际上希望它们发生。但在这些情况下，您可以确定循环将在特定时间后中断（例如动画块）。一旦块执行完毕并从堆栈中删除，循环就会中断。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T22:29:06.967

这很可能是因为您有一个保留周期。

这通常是当您的块隐式保留自我并且自我以某种方式保留块时的情况。您将有一个保留周期，因为每个都保留另一个，因此它们的 retainCount 永远不会达到零。

您应该激活`-Warc-retain-cycles`将警告您此类问题的警告。

所以在你的情况下，你正在使用变量`updateResult`，我假设它是一个实例变量，这隐含地保留`self`。相反，您应该使用一个临时的弱变量来表示自我，并在您的块中使用它，这样它就不会被保留并且您会破坏保留循环。

```
__block __weak typeof(self) weakSelf = self; // weak reference to self, unretained by the block
[[NSNotificationCenter defaultCenter] addObserverForName:@"Update result"
                                              object:nil
                                               queue:nil
                                          usingBlock:^(NSNotification *note) {
                                              // Use weakSelf explicitly to avoid the implicit usage of self and thus the retain cycle
                                              weakSelf->updateResult = YES;
                                          }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-19T16:21:47.560

这不是保留周期。

`NSNotificationCenter`持有块，块是持有`self`。因为`[NSNotificationCenter defaultCenter]`是一个生活在所有应用程序生命周期中的单例，所以它是`self`间接的。

# maven - 在 Maven 3 中，如何将模块的 project.version 用作另一个项目的依赖项

> ID：12699119
> 
> 赞同：3
> 
> 时间：2012-10-02T22:09:42.390
> 
> 标签：maven, parent-child, maven-3, pom.xml

我有如下概述的多模块 ejb3-web 应用程序：

```
project
- pom.xml
project_ear
- pom.xml
project_ejb
- pom.xml
project_web
- pom.xml 
```

而且我有不同的类似项目，其中包括前一个（project_ejb）。

```
project2
- pom.xml
project2_ear
- pom.xml
project2_ejb
- pom.xml (here, project_ejb is gonna be included as a dependency)
project2_web
- pom.xml 
```

如您所见，它们具有相似的结构。无论如何，我面临的问题是当我想使用 ${project.version} 我无法清理或构建 project2 了。

* * *

这里是项目的 pom 样本

**“项目”父pom：**

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.project</groupId>
<artifactId>project</artifactId>
<version>${project.version}</version> 
<packaging>pom</packaging> 
```

**“project_ejb”pom：**

```
 <modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>com.project</groupId>
        <artifactId>project</artifactId>
    <version>${project.version}</version>
    <relativePath>../project/pom.xml</relativePath>
</parent>     

<artifactId>projectEjb</artifactId>
<packaging>ejb</packaging> 
```

**项目2父pom：**

```
 <modelVersion>4.0.0</modelVersion>
<groupId>com.projectdata</groupId>
<artifactId>projectdata</artifactId>
<version>${project.version}</version>
<packaging>pom</packaging> 
```

**project2_ejb pom**

```
 <modelVersion>4.0.0</modelVersion> 
<artifactId>projectdataEjb</artifactId>
<packaging>ejb</packaging>

<parent>
            <groupId>com.projectdata</groupId>
    <artifactId>projectdata</artifactId>
            <version>${project.version}</version>
    <relativePath>../projectdata/pom.xml</relativePath>
    </parent> 
```

我已将 project_ejb 模块作为依赖项添加到 project2_ejb 中：

```
 <dependency>
        <groupId>com.project</groupId>
        <artifactId>projectEjb</artifactId> 
        <scope>provided</scope> 
        <type>ejb</type>
    </dependency> 
```

总而言之，当我构建项目时，一切正常。但是，当我尝试构建 project2 时，它出现了一个问题，出现 maven 控制台并说：

```
 IllegalArgumentException: Illegal character in path at index 79: http://abcsvn01.host.myproject.net/maven/my/inhouse/com/project/project/${project.version}/project-${project.version}.pom -> [Help 1] 
```

值得一提的是，当我删除 ${project.version} 并写入常量时，一切正常。但是，为什么我在 maven3 已经为我提供时不使用此功能。

我将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:58:54.517

当您引用父级时，您必须包含特定版本。你不能使用`${project.version}`. 这是因为您可能只想构建孩子，而父母在回购中。然后，您将需要指向特定的父级。

你的孩子发生的事情是它试图找到一个名为的 pom 文件`project-${project.version}.pom`，这是因为你没有给出明确的版本号。

这将起作用（将版本更改为您的特定版本）。该版本将由子代继承。

```
<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>com.project</groupId>
    <artifactId>project</artifactId>
    <version>1.0-SNAPSHOT</version>
    <relativePath>../project/pom.xml</relativePath>
</parent>     

<artifactId>projectEjb</artifactId>
<packaging>ejb</packaging> 
```

接下来是您需要提供依赖项的`projectEjb`版本`project2_ejb`。否则它将不知道`projectEjb`要使用哪个版本。您的`project`和`project2`不相关，因此它们的版本会有所不同。

添加了版本标签（更改为您的特定版本）：

```
<dependency>
    <groupId>com.project</groupId>
    <artifactId>projectEjb</artifactId>
    <version>1.0-SNAPSHOT</version>
    <scope>provided</scope> 
    <type>ejb</type>
</dependency> 
```

# objective-c - 动画 UIView 原点仅在第一次尝试后才有效

> ID：12699121
> 
> 赞同：2
> 
> 时间：2012-10-02T22:09:45.067
> 
> 标签：objective-c, ios, animation, uiview

我有一个带有一些标签的 UIView，我在我的故事板中构建了我想在单击地图注释时对其进行动画处理。我的一切都很好，除了动画有点不对劲。第一次单击注释时，帧位置未设置动画。但是，如果我取消选择然后重新选择注释，它的动画效果会很好。我还为背景颜色设置了动画，这似乎在第一次选择时工作正常，所以无论它是 frame 属性所特有的，也许是因为它在加载时没有正确设置？我再次在故事板中做了所有这些，所以我不知道我错过了什么。

我的标签/视图的代码（全部内置在我的故事板中，并使用正确的 IBOutlets 的参考出口）。文件.h：

```
@property (weak, nonatomic) IBOutlet UIView *stationinfo;
@property (weak, nonatomic) IBOutlet UILabel *stationname;
@property (weak, nonatomic) IBOutlet UILabel *stationsong;
@property (weak, nonatomic) IBOutlet UILabel *stationartist; 
```

文件.m：

```
@synthesize stationinfo;
@synthesize stationname;
@synthesize stationsong;
@synthesize stationartist; 
```

请在下面找到回调代码：

```
- (void) mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
    //NSLog(@"Selected ");
    self.stationname.text = ((userStation *)view.annotation).name;
    self.stationsong.text = ((userStation *)view.annotation).song;
    self.stationartist.text = ((userStation *)view.annotation).artist;
    [UIView
     animateWithDuration:0.25
     delay: 0.0
     options: UIViewAnimationCurveEaseInOut
     animations:^ {
        CGRect anim = self.stationinfo.frame;
        anim.origin.y = 0.0;
        self.stationinfo.frame = anim;
        self.stationinfo.backgroundColor = [UIColor redColor];
    }
     completion:^(BOOL finished){
         NSLog(@"DONE!");
     }];
}

- (void) mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view {
    //NSLog(@"Deselected");
    [UIView
     animateWithDuration:0.25
     delay: 0.0
     options: UIViewAnimationCurveEaseInOut
     animations:^ {
         CGRect anim = self.stationinfo.frame;
         anim.origin.y = -100.0;
         self.stationinfo.frame = anim;
         self.stationinfo.backgroundColor = [UIColor greenColor];
     }
     completion:^(BOOL finished){
         NSLog(@"DONE!");
     }];
} 
```

非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:22:20.877

**编辑：**虽然下面的工作之前，我发现它实际上不再需要！我只能想象前几天我在调整我的故事板时无意中修复了这个错误，当时我对我的布局应用了适当的约束等，以确保它在新的屏幕尺寸上看起来不错。

我发现的解决方法是在完整功能中再次执行动画。虽然不优雅，但它似乎可以工作（因为只有第一个动画调用不起作用，第二个动画调用完成了它再次执行）。请注意，这将导致延迟，因为第一次尝试必须先完成。我猜帧的某些属性是由第一个动画初始化的，这是动画位置所需的。

```
[UIView
         animateWithDuration:0.25
         delay: 0.0
         options: UIViewAnimationCurveEaseInOut
         animations:^ {
            CGRect anim = self.stationinfo.frame;
            anim.origin.y = 0.0;
            self.stationinfo.frame = anim;
        }
        completion:^(BOOL finished){
            CGRect anim = self.stationinfo.frame;
            anim.origin.y = 0.0;
            self.stationinfo.frame = anim;
        }]; 
```

我想另外一种方法可以在主要动画之前触发一个中性动画，看看它是否具有相同的效果。

# c# - 在 rowdatabound 事件上设置行数据

> ID：12699127
> 
> 赞同：1
> 
> 时间：2012-10-02T22:10:44.603
> 
> 标签：c#, .net, gridview

我有一张`id="table_results_header"`在`ItemTemplate`. 是否有可能使用该`rowdatabound`事件来调用封装gridview 的每一行上发生的该表的实例，以便我可以以编程方式操作样式？

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    however_you_get_to_the_table.BackColor = System.Drawing.Color.Blue;
} 
```

我真的很想知道这是否可以做到？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:14:06.713

是的，您可以使用`FindControl`

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
  ((Table)e.Row.FindControl("table_results_header")).BackColor = Color.Blue;
} 
```

# python - 寻找不同的组合

> ID：12699132
> 
> 赞同：1
> 
> 时间：2012-10-02T22:11:13.900
> 
> 标签：python

如何找到 40 个字母字符串的所有组合？

`D`我必须找出 20和 20`R`可以组成多少种组合。

因为在一种组合中可能是......

`DDDDDDDDDDDDDDDDDDDDRRRRRRRRRRRRRRRRRRRR`

那是1个组合，现在我该如何计算其余的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:34:54.577

要计算 20`D`和 20的每个组合`R`，我们可以认为有 40 个“槽”，其中 20 个槽将由 填充`D`，其余的将由 填充`R`。[所以，我们可以用C(40, 20)来计算组合](http://en.wikipedia.org/wiki/Combination)的总数，或者40选20，可以用下面的公式来表示：

```
40!/(20!*(40-20)!) 
```

或者在 Python 中：

```
>>> import math
>>> math.factorial(40) / (math.factorial(20) * math.factorial(40-20))
137846528820L 
```

请注意，这与具有 20和 20的字符串的***唯一***排列数相同，但如果您只计算该字符串的排列数，您将计算出很多重复项，如果您尝试通过以下方式计算创建每个排列都需要很长时间。`D``R`

如果您想实际生成独特的排列（我不建议这样做），一种方法是使用`itertools.combinations(range(40), 20)`. 这里返回的每个元素都是 20 个整数的元组，这将是该`D`特定排列中每个元素的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:21:45.693

有很多排列组合。仅仅为了计算它们而生成它们通常不是一个好主意。您应该寻找一个数学公式来解决这个问题，或者可能使用动态编程来计算结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:14:43.823

这是一个内置在 itertools 中的不错的函数：

这直接取自此链接：[9.7。itertools — 创建迭代器以实现高效循环的函数](http://docs.python.org/library/itertools.html#itertools.permutations)

```
def permutations(iterable, r=None):
    # permutations('ABCD', 2) --> AB AC AD BA BC BD CA CB CD DA DB DC
    # permutations(range(3)) --> 012 021 102 120 201 210
    pool = tuple(iterable)
    n = len(pool)
    r = n if r is None else r
    if r > n:
        return
    indices = range(n)
    cycles = range(n, n-r, -1)
    yield tuple(pool[i] for i in indices[:r])
    while n:
        for i in reversed(range(r)):
            cycles[i] -= 1
            if cycles[i] == 0:
                indices[i:] = indices[i+1:] + indices[i:i+1]
                cycles[i] = n - i
            else:
                j = cycles[i]
                indices[i], indices[-j] = indices[-j], indices[i]
                yield tuple(pool[i] for i in indices[:r])
                break
        else:
            return 
```

*编辑*

我已经包含了一个我在 SO 上找到的链接，它提供了一个使用 JavaScript 执行此操作的很好的示例：[是否有任何预先构建的方法可以在 JavaScript 中查找给定字符串的所有排列？](https://stackoverflow.com/questions/5232295/is-there-any-pre-built-method-for-finding-all-permutations-of-a-given-string-in)

如果您不介意 PHP，以下是直接取自此链接的示例：[4.26。查找数组的所有排列](http://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm)

注意：要使用该`pc_permute`函数，您需要将字符串分成字符数组。

```
function pc_permute($items, $perms = array( )) {
    if (empty($items)) { 
        print join(' ', $perms) . "\n";
    }  else {
        for ($i = count($items) - 1; $i >= 0; --$i) {
             $newitems = $items;
             $newperms = $perms;
             list($foo) = array_splice($newitems, $i, 1);
             array_unshift($newperms, $foo);
             pc_permute($newitems, $newperms);
         }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:26:37.513

根据您想对组合执行的操作，有很多方法可以解决这个问题。如果您只想知道存在的组合/排列的数量，数学可以告诉您。

如果您想做一些事情，比如构建一个蛮力算法来检查给定字符集的所有可能排列，itertools.product() 可以提供帮助。

[http://docs.python.org/library/itertools.html#module-itertools](http://docs.python.org/library/itertools.html#module-itertools)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T23:30:53.707

这是一个生成所有不同排列的生成器。

```
def distinct_pem(A,D):
    if A==0: yield 'D'*D
    elif D==0: yield 'A'*A
    elif A==1 and D==1:
        yield 'AD'
        yield 'DA'
    else:
        if A>=2:
            for string in distinct_pem(A-2,D):
                yield  'AA'+string
        if A>1 and D>1:
            for string in distinct_pem(A-1,D-1):
                yield  'AD'+string
                yield  'DA'+string
        if D>=2:
            for string in distinct_pem(A,D-2):
                yield  'DD'+string 
```

*对于 10，这是非常快的，但它与 20（也许它可以变得更有效率？）斗争。*

# php - 让 Ajax 提交表单数据，但不会为 textarea 提交

> ID：12699135
> 
> 赞同：0
> 
> 时间：2012-10-02T22:11:26.307
> 
> 标签：php, javascript, jquery, html, ajax

所以我得到了一个大部分工作的 Ajax 表单，但它只提交来自输入标签的数据。在我的 MySql 数据库中，两个输入表单都将正确提交，但我的 textarea 将填写为“未定义”。

HTML：

```
<div id="contact_form">
  <form name="contact" method="post" action="">
    <fieldset>

      <input title="name" label="Name" type="text" name="name" id="name" size="30" value="" class="text-input" />
      <label class="error" for="name" id="name_error">This field is required.</label>

      <input title="email" type="text" name="email" id="email" size="30" value="" class="text-input" />

      <label class="error" for="email" id="email_error">This field is required.</label>

      <textarea type="text"  name="request" maxlength="1000" cols="25" rows="6" title="request" class="text-input"></textarea>

      <label class="error" for="request" id="request_error">This field is required.</label>

        <br />
      <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
    </fieldset>
  </form>
</div> 
```

Javascript：

```
$(function() {
  $('.error').hide();
  $('input.text-input').css({backgroundColor:"#FFFFFF"});
  $('input.text-input').focus(function(){
    $(this).css({backgroundColor:"#FFDDAA"});
  });
  $('input.text-input').blur(function(){
    $(this).css({backgroundColor:"#FFFFFF"});
  });

  $(".button").click(function() {
        // validate and process form
        // first hide any error messages
    $('.error').hide();

      var name = $("input#name").val();
        if (name == "") {
      $("label#name_error").show();
      $("input#name").focus();
      return false;
    }
        var email = $("input#email").val();
        if (email == "") {
      $("label#email_error").show();
      $("input#email").focus();
      return false;
    }
        var request = $("textarea#request").val();
        if (request == "") {
      $("label#request_error").show();
      $("textarea#request").focus();
      return false;
    }

        var dataString = 'name='+ name + '&email=' + email + '&request=' + request;
        //alert (dataString);return false;

        $.ajax({
      type: "POST",
      url: "bin/process.php",
      data: dataString,
      success: function() {
        $('#contact_form').html("<div id='message'></div>");
        $('#message').html("<h2>Contact Form Submitted!</h2>")
        .append("<p>We will be in touch soon.</p>")
        .hide()
        .fadeIn(1500, function() {
          $('#message').append("<img id='checkmark' src='images/check.png' />");
        });
      }
     });
    return false;
    });
});
runOnLoad(function(){
  $("input#name").select().focus();
}); 
```

PHP：

```
<?php
 $name=$_POST['name']; 
 $email=$_POST['email'];
 $request=$_POST['request']; 
 mysql_connect("localhost", "root", "") or die(mysql_error()); 
 mysql_select_db("form") or die(mysql_error()); 
 mysql_query("INSERT INTO `ajaxform` VALUES ('$name', '$email', '$request')") or die(mysql_error());
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:13:37.283

Textarea 没有**id="request"**

```
<textarea type="text"  name="request" maxlength="1000" cols="25"
   rows="6" title="request" class="text-input"></textarea>

$("textarea#request").val(); 
```

添加字段的 id 或试试这个

```
$("textarea[name='request']").val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:14:35.010

这就是问题：

`var request = $("textarea#request").val();`

您没有`id`.`textarea`

要修复，请执行以下操作之一：

1.  `var request = $("textarea.text-input").val();`
2.  `<textarea type="text" id="request" name="request" maxlength="1000" cols="25" rows="6" title="request" class="text-input"></textarea>`

# c++ - 如何确定在给定（游戏）项目上使用定点数的可行性？

> ID：12699140
> 
> 赞同：3
> 
> 时间：2012-10-02T22:11:49.640
> 
> 标签：c++, optimization, mobile, fixed-point, marmalade

[因为我的案例与游戏项目有关，所以我考虑在GameDev](http://gamedev.stackexchange.com)上发布这个问题，但我认为这更适合更广泛的编程 SE。请让我知道这个问题是否会更好地发布在那里。

根据我的理解——如果我错了，请纠正我——移动游戏开发（这是我的情况）可以从使用定点计算中受益匪浅，因为这将确保平台之间的更多一致性，并且会提高性能设备无法正确处理浮点的情况。

但是定点确实有局限性，最明显的是溢出。所以我的问题是，假设我们已经确定定点是给定目标平台的最佳选择，如何确定给定项目的要求是否允许使用它们。

为了让事情更清楚，我想分享一些我遇到问题的代码：

```
CIwVec2 calculateBezier(float t, CIwVec2 p0, CIwVec2 p1, CIwVec2 p2) {
    float u = 1 - t;

    CIwVec2 p = IW_FIXED(u * u) * p0;   // (1 - t)²P0
    p += IW_FIXED(2 * u * t) * p1;      // 2(1 - t)tP1
    p += IW_FIXED(t * t) * p2;          // t²P2

    return p;
} 
```

在这个项目中，我使用[Marmalade SDK](http://madewithmarmalade.com)，它使用 C++ 并带有自己的定点数实现（它们有 16 位和 32 位，我现在使用的是 32 位）和一个 Vector 类(CIwVec2) 使用该实现进行位置和计算（包括标量乘法，如上面的代码所示）。哦，IW_FIXED 只是一个将浮点数转换为定点数的宏。

当我尝试运行上述代码时，出现**乘法溢出**错误。调试值如下：

```
t = 0
u = 1 (which converts to 4096 in int32 fixed-point with IW_FIXED)
p0.x = 1638400 (400.0f with IW_FIXED_TO_FLOAT)
p0.y = 409600 (100.0f with IW_FIXED_TO_FLOAT) 
```

老实说，我对定点数没有完全的了解。我理解这个想法，但是定点运算对我来说并不完全清楚（我一定已经放弃了大多数与基数 2 相关的数学课，真让我感到羞耻）。但是我完全被这样一个事实所震惊，像 1.0f * 400.0f 这样简单的东西会导致定点溢出。

所以，虽然我认为在我的项目中支持定点不会有问题，但似乎情况并非如此。该游戏是一个自上而下的汽车游戏，不会有巨大的轨道或任何东西，但它们必须至少与设备的屏幕一样大（或者更好的是，它的分辨率），因为我们的目标是对于平板电脑来说，像 1.0f * 400.0f 这样的问题意味着定点是不可能的。

我对这个假设是否正确？而且，对于未来的项目和其他有类似问题的人，我们如何评估项目中定点数的可行性？此外，如何在 16 位和 32 位之间做出决定将是一个很大的好处:)

（对不起，很长的帖子，感谢您的时间！）

**更新：**

所以，总结一下到目前为止的一些反应。理想的情况是以某种方式实现您的定点数，以便具有满足您需求的必要范围（Mooing Duck 的回答）。此外，对于 32 位数字的操作，最安全的做法是使用 64 位进行计算（timday 的答案和 Max 的评论）。顺便说一句，Marmalade 确实有一些“安全的固定乘法”函数，但对于 CIwVec2 的标量乘法运算符重载（它`IW_FIXED_MUL`在下面使用，它不能安全地乘法），情况并非如此。

最后，关于我的特定场景，似乎从 Marmalade 6.1 开始，仅使用浮点数可能是最好的解决方案。

**编辑：** 虽然 Max 的回答确实解决了我的问题，但这主要是因为它是果酱特有的东西。正因为如此，我选择了 Mooing Duck 的答案作为选择的答案，因为我觉得它通常会帮助更多的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:33:01.790

定点可以看成是存储分数的上半部分，你的情况下半部分是4096。所以1.0f等于4096/4096，它在内存中存储为4096。我不再赘述分数乘法，因为我不记得它们，但重要的部分是当乘法`A/D * B/D`得到结果`C/D`时，然后`C`是`A*B/D`。

所以：在你拥有`1.0f * 400.0f`的地方，计算机将其视为`4096 * 1638400 / 4096`。一个小代数表明这应该导致 1638400 (400.0f)，但如果小数点库对此不够聪明，它会在进行除法之前得到一个临时值 6710886400，这对于`int`.

由于您的浮点数的分母为 4096，因此您的“浮点数”精确到最接近的 0.00024，范围为 -524288.999f 到 524287.999f（ish）。您的编译器中有没有办法降低“浮点数”的准确性以获得更大的范围？否则你就完蛋了。

# 编辑

Max 确认 4096 是 Marmalade 的一部分，无法更改。在这种情况下，我看到几个选项：
（1）不要使用定点。
(2) 尽量将所有浮点数保持在 -128 和 128 之间。
(3) 使用特殊函数将标量与下面`CIwVec2`使用的 a 相乘`IW_FIXED_MUL`。最好将 包装`float`在一个特殊的类中并重载`operator*`to 调用`IW_FIXED_MUL`。不要提供对 的隐式转换`float`，否则您将永远找不到所有错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:44:23.790

您所看到的以及它所暗示的 32 位中间体（请参阅 Mooing Duck 的回答）对我来说似乎是一个严重的弱点。

我过去曾成功使用过定点库（在 386/486 时代的 x86 上），并且在校正移位之前它们都使用 64 位中间体进行乘法运算（事实上，我似乎记得英特尔提供了一个非常好的 32x32-to-64位乘法指令非常适合此）。较高的中间精度为您在数据范围上带来了很大的自由度；我真的很讨厌使用像这个 Marmalade lib 似乎受到限制的东西，但可以理解为什么他们可能出于可移植性的原因不得不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:35:11.787

今天在移动开发中使用定点是没有意义的，当您使用 Marmalade 6.1 时 Marmalade 6.1 于 9 月发布。

很少有没有 FPU 的 Android 手机，但大多数手机都有 FPU、带有 GLES 1.0 和 GLES 2.0 的 GPU 我们现在针对带有果酱的 GLES 2.0 设备。

Marmalade 有 IW_FIXED 的原因是他们有自己的称为 IwGX 的图形层。

2012 年 9 月之前（果酱 6.1）。IwGX 不支持浮点数。这就是为什么开发人员即使针对最近的 GLES 2.0 设备也被迫使用固定数字。

今天在果酱中使用固定数字没有任何好处。

--

无论如何，如果您仍然希望使用固定点进行多重处理，则有[IW_FIXED_MUL](http://developer.roolez.com/marmaladesdk/api/api/group__IwGeomCore.html#ga80fe95d765a6448e758f64bfd74433d)功能

**添加：**示例中的代码是正确的。

# variables - Powershell - 用变量替换代码块

> ID：12699142
> 
> 赞同：1
> 
> 时间：2012-10-02T22:12:03.903
> 
> 标签：variables, powershell, active-directory

我有一个关于语句中的代码块和变量的简单问题。我的脚本收集用户输入并创建一个字符串，稍后可以在 powershell 语句中使用。

```
$filter = @()
While ($filter[-1] -ne "end") {
  $filter += read-host 'Type the name of an OU you want to filter or type "end" to start the script'
  if ($filter[-1] -eq "end") {
    break
  }
  $strFilter += "`$_`.DistinguishedName -notlike `"*" + $filter[-1] + "*`" "
  $strFilter += "-and "
}
$strFilter = $strFilter.SubString(0,$strFilter.length-5) 
```

基本上，用户将输入任意数量的单词，这些单词将被附加到字符串中`"$_.DistinguishedName -notlike "*<WORD>*""`并将它们放在一起，`-and`直到输入最后一个单词。

那部分工作正常，它使用这个生成的字符串来收集似乎不起作用的信息；我有一种感觉，我只是想念一些非常简单的东西。

例如：

```
$computers = get-adcomputer -Filter 'ObjectClass -eq "Computer"' -properties "OperatingSystem","CanonicalName","Description"
$filteredComputers = $computers | where-object { $strFilter } 
```

$filteredComputers 返回与 $computers 相同的结果，这让我相信带有我的字符串变量的 Where-object 语句没有做任何事情。

感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:36:03.593

`Where-Object`脚本块应该评估为布尔值（或可以强制为布尔值的东西）。您只提供了一个字符串，如果不是空的，PowerShell 将强制转换为布尔值 $true。尝试这样的事情：

```
$strFilter = @()
while (...) { ...
    $strFilter += "*$($filter[-1])*"
}

$filteredComputers = $computers | 
   Where {$dn=$_.DistinguishedName; @($strFilter | Where {$dn -like $_}).Count -eq 0} 
```

这使用嵌套管道遍历每个过滤器术语并将其应用于当前对象的 DistinguishedName - 我们必须将其隐藏，因为在嵌套管道`$_`中采用当前 $strFilter 数组元素的值。如果其中任何一个通过了`like`测试，那么计数将大于零，并且不会通过管道传递。只有那些不匹配的（count == 0）才应该通过管道传递。

这是这种方法的一个示例：

```
C:\PS> $strFilter = '*ba*','*bog*'
C:\PS> 'foo','bar','baz','abba','boggle' | 
           Where {$dn=$_; @($strFilter | Where {$dn -like $_}).Count -eq 0}

foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:50:23.100

例如，我们只需要从我们的用户文件夹中获取文件夹 Documents 或“我的文档”：

```
[scriptblock]$filterBlock = { $_.Name -like '*ocum*' }
dir | ?{ & $filterBlock } 
```

答案由两部分组成：1）将您的字符串转换为 [ScriptBlock] 2）使用 & 字符来调用您的字符串（即您的脚本块）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:38:48.450

在您运行此代码的时间点：

$filteredComputers = $计算机 | where-object { $strFilter }

$strfilter 的值是多少？

如果您回显 $strfilter 的值，请尝试在其位置手动输入该值，是否有效？如果是这样，那么话是对的，但执行方法是错误的。

# shell - 显示带有评估变量的文件内容

> ID：12699143
> 
> 赞同：0
> 
> 时间：2012-10-02T22:12:05.050
> 
> 标签：shell, unix

假设我有一个模板文本文件，其中大部分内容是静态的，但有一些变量。例如

```
My favorite site is ${FAV_SITE} 
```

假设 FAV_SITE 设置为 stackoverflow.com：

```
export FAV_SITE=stackoverflow.com 
```

如何将解析了 vars 的文件内容打印到 STDOUT，即

```
My favorite site is stackoverflow.com 
```

不使用 sed 或 awk 等花哨的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:46:05.860

这是完成这项工作的几乎微不足道的 Perl 部分。

```
#!/usr/bin/env perl
#
# Substitute environment variables into text

use strict;
use warnings;

while (<>)
{
    while (m/\${(\w+)}/g)
    {
        my $env = $1;
        if (defined $ENV{$env})
        {
            my $sub = $ENV{$env};
            s/\${$env}/$sub/g;
        }
    }
    print;
} 
```

如果未定义环境变量，则`${VARIABLE}`符号保持不变。

例如，在输入数据上：

```
This is ${HOME} and so is this (${HOME}) and that's ${USER} and that's all.
This is ${UNDEFINED} and that is ${UNDEF} too. 
```

输出可能是：

```
This is /work4/jleffler and so is this (/work4/jleffler) and that's jleffler and that's all.
This is ${UNDEFINED} and that is ${UNDEF} too. 
```

Perl 可能没有它应该的那么紧凑，但是如果您知道读取操作符`<>`和匹配、替换和打印操作符在默认变量`$_`.

* * *

在 RHEL 5 Linux（不要问）上使用 Perl 5.12.1（自制），我使用：

```
$ cat x3 
This is ${UNDEFINED} and that is ${UNDEF} too.
This is ${HOME} and so is this (${HOME}) and that's ${USER} and that's all.
$ perl subenv.pl x3
This is ${UNDEFINED} and that is ${UNDEF} too.
This is /work4/jleffler and so is this (/work4/jleffler) and that's jleffler and that's all.
$ 
```

如果您使用此处的文档创建模板，请小心；shell 也会扩展这些变量。

我还在`/usr/bin/perl`RHEL 机器上找到了 Perl 5.8.8，它产生了相同的输出。我还检查了 Mac OS X 10.7.5 上的 Perl 5.16.0，以及相应的结果（不同的主目录）。我还在 HP-UX 11.00 机器上找到了一个 Perl 5.6.1，`${USER}`它没有在环境中设置，但它被`${HOME}`正确替换了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:21:31.083

您可以将模板文件制作成 bash 脚本吗？

```
#!/bin/bash
# This is a template, execute it to get interpolated text:
cat <<HERE
My favorite site is ${FAV_SITE}
HERE 
```

使用示例：

```
export FAV_SITE=stackoverflow.com
bash ./template.txt.sh 
```

~~（哦，你可能需要访问 reddit.com）~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:31:32.057

使用 Perl：

```
#!/usr/bin/perl

use strict;

my $inFile = $ARGV[0];

print "\nInput File=".$inFile;

open(FILEHANDLE, "<$inFile") || die("Could not open file");

my @fileLines = <FILEHANDLE>;

my $rslt;

foreach my $line(@fileLines)
{
    #chomp($line);

    #print "\nLINE BEFORE=".$line;

    while($line =~ m/(\${\w+})/g)
    {
        if($1)
        {
            my $plchldr = $1;

            my $varName = $plchldr;

            $varName =~ s/(\$|{|})//g;

            my $varVal = $ENV{$varName};

            if($varVal)
            {
                $line =~ s/\Q$plchldr/$varVal/g;
            }
        }
    }

    $rslt .= $line;

    #print "\nLINE AFTER=".$line;
}

print "\nRESULT = ".$rslt;

close(FILEHANDLE);

print "\n";

exit(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T23:08:52.510

Always be wary of `eval`, but:

```
while read l; do eval echo "\"$l\""; done < input-file 
```

Only use this if you control the input. For example, if the input contains a line like `"; rm -rf /"` it would be most unfortunate to run this script.

# android - 在我的 android 应用程序中与 facebook 集成出现错误“无法找到提供程序...”

> ID：12699144
> 
> 赞同：0
> 
> 时间：2012-10-02T22:12:10.733
> 
> 标签：android, facebook, integration

我正在开发一个应该与 Facebook 集成的 android 应用程序。我正在使用 Facebook 教程来了解如何做到这一点，但我已经连续几天收到这个错误了。我在我的 android 模拟器中安装了 Facebook 应用程序，并在 Facebook 中配置了我的密钥哈希。（我已经尝试过 cygwin 但它没有用，所以我在其他问题中阅读时分了 3 个不同的步骤）

我浏览了所有相关的问题，但我无法得到答案。我得到的只是错误，上面有一个带有“facebook”标志的空白页面。

编辑：现在我也收到一条消息：“MyApp 为 facebook 登录配置错误。按确定返回应用程序而不将其连接到 facebook。”

我的代码：

```
public class LoginActivity extends Activity {
    Facebook facebook;
    private SharedPreferences prefs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        facebook = new Facebook(getString(R.string.facebookAppId));

        prefs = getPreferences(MODE_PRIVATE);
        String access_token = prefs.getString("access_token", null);
        long expires = prefs.getLong("access_expires", 0);
        if(access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if(expires != 0) {
            facebook.setAccessExpires(expires);
        }
        if(!facebook.isSessionValid()) {

            facebook.authorize(this, new String[] {"email", "read_friendlists"}, new DialogListener() {
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = prefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();
                }
                public void onFacebookError(FacebookError error) {
                    System.out.println("onFacebookError()");
                    error.printStackTrace();
                }
                public void onError(DialogError e) {}
                public void onCancel() {}
            });
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        try{
            facebook.authorizeCallback(requestCode, resultCode, data);
        }finally{
            finish();
        }
    }

    @Override
    public void onResume() {    
        super.onResume();
        //extend facebook session
        facebook.extendAccessTokenIfNeeded(this, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:16:25.013

I solved the problem. for people getting the same problem, so, i don't know why but if you make the login activity as main activity, it will leave a blank page and do nothing. but after I've changed it to be called only clicking a button, it showed me the error, and when I printed the stack-trace, i found in the logcat my real hash-key. after all, it was just a problem with the hash key, in windows the facebook instructions don't work well.

# java - （作业）Java GUI：按钮递增/递减 2 而不是 1

> ID：12699145
> 
> 赞同：1
> 
> 时间：2012-10-02T22:12:12.760
> 
> 标签：java

我正在开发一个带有两个按钮和一个显示变量（num）的简单 java GUI 程序。这些按钮被命名为“增量”和“减量”，它们的功能是增加或减少显示的变量 num，初始设置为 50。

虽然程序会编译，但递增和递减按钮将 num 的值增加/减少 2 而不是 1。我已经尝试过诸如将代码“num++”更改为“num = num + 1”之类的方法，但这仍然会导致按钮增加 2。

这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Assignment_4 extends JFrame {
    private int num = 50;
    private JButton increment;
    private JButton decrement;
    private JLabel label;
    private JPanel buttonPanel;
    private JPanel displayPanel;

    public Assignment_4() {
        increment = new JButton ("Increment");
        decrement = new JButton ("Decrement");
        increment.addActionListener (new incListener());
        decrement.addActionListener (new decListener());
        increment.addActionListener (new incListener());
        decrement.addActionListener (new decListener());

        num = 50;
        label = new JLabel ("" + num);

        buttonPanel = new JPanel();
        displayPanel = new JPanel();

        buttonPanel.add(increment);
        buttonPanel.add(decrement);
        displayPanel.add(label);

        setLayout(new BorderLayout());
        add(buttonPanel, BorderLayout.CENTER);
        add(displayPanel, BorderLayout.NORTH);
    }

    private class incListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            num++;
            label.setText("" + num);
        }
    }

    private class decListener implements ActionListener {
        public void actionPerformed (ActionEvent event) {
            num--;
            label.setText("" + num);
        }
    }

    public static void main(String[] args) {
        Assignment_4 win = new Assignment_4();
        win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        win.pack();
        win.setVisible(true);
    }
} 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:14:27.283

您已经为两者附加了两个动作侦听器实例，您只需要一个。

```
increment.addActionListener (new incListener()); 
decrement.addActionListener (new decListener()); 
//Remove the extra ones
//increment.addActionListener (new incListener()); 
//decrement.addActionListener (new decListener()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:15:01.760

您已经为每个按钮添加了两次递增和递减侦听器。

# sql-server - sql server 将char解析为int

> ID：12699152
> 
> 赞同：0
> 
> 时间：2012-10-02T22:12:57.077
> 
> 标签：sql-server

我有两个使用相同代码的 SQL 服务器数据库。

我收到以下错误：

```
 Error when executing tsp_parse_str_int at line 26\. Error message: Conversion failed when converting the nvarchar value '1000 ' to data type int. 
```

如果您注意到有一个前导空格，但是在我的代码中，我将在转换之前删除空格！

```
 SET @temp = (select replace(@temp, ' ', ''))
    SET @projid = cast(@temp as int) 
```

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:20:01.630

试试这个

```
SET @temp = (select RTRIM(@temp))
SET @projid = cast(@temp as int) 
```

`RTRIM`修剪右侧空间并`LTRIM`修剪左侧空间。同时删除左右两边的空格`LTRIM(RTRIM(@temp))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:30:49.117

我在 SQL Server 2012 中尝试了下面的代码，它*完全没有*任何修剪就可以工作。你确定它只是一个普通的''而不是另一个隐藏字符吗？

```
declare @temp nvarchar(20)
declare @projid int
set @temp = '  12345    '
--SET @temp = (select replace(@temp, ' ', ''))
SET @projid = cast(@temp as int)
select @projid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T02:59:13.163

我发现它实际上不是一个空格，无论是回车制表符还是换行符，我都摆脱了：

替换（替换（替换（MyField，CHAR（10），''），CHAR（13），''），CHAR（9），''）

# java - 使用 Swing 工具包构建 Java GUI

> ID：12699153
> 
> 赞同：3
> 
> 时间：2012-10-02T22:13:08.590
> 
> 标签：java, swing, user-interface, animation

我即将开始一个项目，我将在其中构建一个道路网络模拟器。该程序将在 GUI 方面采用 2D 形式，因此基本上是带有简单移动汽车等的自上而下的道路视图。

我确实有一些 Swing 的经验，我以前用它来构建一个模拟器，但不是在提供移动物体等的实际动画的意义上。因此，我的问题是，你是否建议在这样的项目中使用 swing，还是有其他更适合此类应用的可能性？我对其他工具包了解不多，但我问的主要原因是确保挥杆不会以任何方式限制我需要实现的目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:48:45.353

为此目的使用 Swing 并没有错。有许多优秀的开源动画 API 会让你的生活变得更轻松。

*   [时序框架](http://java.net/projects/timingframework)
*   [三叉戟](http://kenai.com/projects/trident/pages/Home)

您将自己评估其中的每一个，看看哪些会满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:54:53.373

我推荐 javafx 因为 oracle 会支持它。Swing 已死 oracle 不会修复新的错误，也不会创建更多功能

# android - 使用 CheckBox 指导从 SQLite 到 ListView

> ID：12699154
> 
> 赞同：0
> 
> 时间：2012-10-02T22:13:09.547
> 
> 标签：android, sqlite, listview, checkbox

我对 Android 很陌生，我需要一些指导。

到目前为止，我有两个活动。第一个包含一个 ActionBar 和一个 ListView。我希望 ListView 填充包含 TextView 和 CheckBox 的行。文本由从数据库读取的用户名表示。ActionBar 具有用于操作的按钮：“新建”和“删除”。“新”打开一个新活动，将新用户添加到数据库中，删除操作应从列表和数据库中删除选中的条目。屏幕：

主要活动：http: [//imgur.com/ILljQ](http://imgur.com/ILljQ)

创建个人资料活动：http: [//imgur.com/EbpD3](http://imgur.com/EbpD3)

为了获得这些，我使用了 SQLiteHelper 和数据库的数据源以及 ListView 的自定义 ArrayAdapter。我有一个问题和一些顾虑，如下所列。

1\. 问题：当我添加一个新用户时，我只能在使用后退按钮退出应用程序后看到 ListView 中的更改。

2\. 自定义 ArrayAdapter 是一个很好的解决方案，还是我应该使用 CursorAdapter？单击时，列表项应将与其关联的信息用于另一个活动/片段。下面是我的自定义适配器。它现在可以工作，但下一步是实现删除操作，我不完全确定我是如何做到的。这是我需要建议的地方。谢谢！

```
 public class CustomUserAdapter extends ArrayAdapter<UserProfile>{

        ArrayList<UserProfile> users;
        private LayoutInflater inflater;

        public CustomUserAdapter(Context context, ArrayList<UserProfile> users) {
        // TODO Auto-generated constructor stub
        super(context, R.layout.users_list_row, users);
        this.users = users;
        inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
        UserProfile user = users.get(position);
        CheckBox checkBox;
        TextView textView;

        if(convertView == null){
            convertView =  inflater.inflate(R.layout.users_list_row, null);
            checkBox = (CheckBox) convertView.findViewById(R.id.checkElement);
            textView = (TextView) convertView.findViewById(R.id.textElement);

            //tag row
            convertView.setTag(new UserHolder(textView, checkBox));
        } else {
            UserHolder userHolder = (UserHolder) convertView.getTag();
            checkBox = userHolder.getCheckBox();
            textView = userHolder.getUserText();
        }

        //tag checkbox
        checkBox.setTag(user);

        //checkbox listener
        checkBox.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            }
        });

        checkBox.setChecked(false);
        textView.setText(user.getUsername());

        return convertView;
            }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:58:52.177

1）改变你的arraylist后，记得调用“adapter.notifyDataSetChanged();” 在与列表视图链接的适配器上

2) arrayadapter 应该可以正常工作。请记住，当您从数组列表中删除联系人时，请在适配器上再次调用 notfiydatasetchanged。还要记住，为了删除对象的 Sql 条目，您需要一个 id 或某种可以引用 SQLite 数据库的 ID（id，自动增量是标准的）

这是一个使用对话框在每个项目上实现侦听器并删除的示例。

```
list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, final int arg2, long arg3) {
            // TODO Auto-generated method stub
            AlertDialog.Builder dialog = new AlertDialog.Builder(ContactExampleActivity.this);
            dialog.setTitle("title");
            dialog.setMessage("message");
            dialog.setPositiveButton("delete", new DialogInterface.OnClickListener(){
                public void onClick(DialogInterface dialog, int which) {
                    //delete from array and delete from sqlite database here

                    adapter.notifyDataSetChanged();
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:58:33.847

> 问题：当我添加一个新用户时，我只能在使用后退按钮退出应用程序后看到 ListView 中的更改。

将新用户添加到 ArrayList ( `users`) 后，请务必调用`notifyDataSetChanged()`适配器。

> 自定义 ArrayAdapter 是一个很好的解决方案，还是我应该使用 CursorAdapter？

如果 UserProfile 相当轻量并且没有任何方法（即，它只是数据），那么 CursorAdapter 可能对您有一些不错的优势。否则，我会坚持使用 ArrayAdapter。

> 单击时，列表项应将与其关联的信息用于另一个活动/片段。下面是我的自定义适配器。它现在可以工作，但下一步是实现删除操作，我不完全确定我是如何做到的。这是我需要建议的地方。

如何实现删除按钮将取决于上面代码中不清楚的几个因素。您可以使用复选框侦听器跟踪已选择的项目，然后在单击垃圾桶图标时删除所有选中的项目。在这种情况下也一定`notifyDataSetChanged()`要这样做。

# ruby-on-rails - 可以在 rails 中使用 form_for 来调用模型的方法并将参数传递给它吗？

> ID：12699158
> 
> 赞同：1
> 
> 时间：2012-10-02T22:13:13.210
> 
> 标签：ruby-on-rails

假设我有一个看起来像这样的模型：

```
class SomeModel

  def method(var1, var2) do
    do.something.with(var1)
    do.something.with(var2)
  end

end 
```

是否可以在 Rails 的视图中编写一个 form_for，`method`当用户点击提交时调用它，并将输入字段中设置的值作为参数传递给该方法？对不起，如果这是基本的，但我似乎无法自己弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:27:38.280

form_for 为表单创建 html。它不处理提交本身。当用户按下提交时，控制器中的一个方法被调用。

在控制器方法中，您可以调用模型方法。这是正确的地方，因为控制器的工作是处理输入参数并管理要调用的模型对象。输入字段可在控制器的 params 哈希中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T21:23:13.010

情况并非总是如此。您可以使用以下内容来访问 state_machine 的 status_events' 方法：

```
"model[status_event]" => "do_stuff" 
```

这将触发与该事件相关的任何块。但由于某种原因，我没有使用自定义方法，不知道为什么......

# python - 使用 Python 访问亚马逊卖家中心

> ID：12699161
> 
> 赞同：1
> 
> 时间：2012-10-02T22:13:28.080
> 
> 标签：python, web, amazon, urllib2, urllib

我正在尝试创建一个应用程序：

1.  登录[亚马逊卖家中心](https://sellercentral.amazon.com/gp/homepage.html?ie=UTF8&%2aVersion%2a=1&%2aentries%2a=0)

2.  打开其中包含的多个页面，检索呈现的页面源，包括由 javascript 填充的值

3.  解析呈现页面源并为用户输出报告。（此部分已完成）

我已经能够通过使用 firefox 插件 firebug 查看呈现的页面源，将其复制到文件来手动完成此任务，并且我已经完成了解析器的编写。但是，我想使这个过程自动化，并使其尽可能用户友好，以便与可能不太精通技术的人分享。

我的困难在于使用 Python 完成第 1 步和第 2 步。我一直在搜索和阅读有关使用库 urllib、urllib2 和 cookielib 的信息，但我无法弄清楚如何让它正常工作。

例如，我在 stackoverflow 上找到了这个片段：

```
import urllib, urllib2, cookielib

username = "xxx"
password = "xxx"

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
login_data = urllib.urlencode({'username':username,'j_password':password})
opener.open('https://sellercentral.amazon.com/gp/homepage.html', login_data)
resp = opener.open('https://sellercentral.amazon.com/myi/search      /ItemSummary.amzn?')
print resp.read() 
```

现在，我知道我的 opener.open 是错误的，但我不知道在哪里可以找到我需要指出的亚马逊卖家中心登录脚本。

另外，我不确定我是否以正确的方式解决这个问题。非常感谢任何方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:06:18.840

请参阅[Amazon Marketplace Web Services](https://developer.amazonservices.com/index.html/181-1514245-7614537)作为替代方案。他们似乎没有 Python 库，但有[其他语言的客户端](https://developer.amazonservices.com/gp/mws/api.html/181-1514245-7614537?ie=UTF8&group=bde&section=feeds&version=latest)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:23:03.313

看看这个

[http://seleniumhq.org/](http://seleniumhq.org/)

或这个

[http://wwwsearch.sourceforge.net/mechanize/j](http://wwwsearch.sourceforge.net/mechanize/j)

在浏览器环境中做你想做的事情可能会更容易一些。

```
br.select_form(name="order")
# Browser passes through unknown attributes (including methods)
# to the selected HTMLForm.
br["cheeses"] = ["mozzarella", "caerphilly"]  # (the method here is __setitem__)
# Submit current form.  Browser calls .close() on the current response on
# navigation, so this closes response1
response2 = br.submit() 
```

# binary - Erlang：将二进制数据转换为包含连续数的列表

> ID：12699167
> 
> 赞同：1
> 
> 时间：2012-10-02T22:13:47.910
> 
> 标签：binary, erlang

%问题
假设我有一个二进制数：
1011011101111011111
每个数字都是一位。

我希望能够将其转换为：
[1, 11, 111, 1111, 11111]

...并最终进入：
[1, 2, 3, 4, 5]

%我试过什么我
试过二进制：split，但数据总是以比特块编码。我只想处理原始数据（如果可能的话。）

%我要完成的工作
我正在为路由协议设计标头。我希望标头包含数据包已经访问过的地址列表。我想如果我给标题本身一个由零分隔的连续的标题组成的标题，我就不必对标题的总长度施加任何限制。标头的标头将通过两个连续的零与标头本身分开。因此，如果我有一个有效负载，上面写着：
<<"Hello World">>
，并且 alice、bob 和 carl 访问了数据，那么标头将是：
<<"alicebobcarl">>
，标头的标头将是：
(8*5 个) 0 (8*3 个) 0 (8*4 个) 00
假设我们对标头使用一些 8 位编码。

然后实际的数据包将显示为：
(8*5 个) 0 (8*3 个) 0 (8*4 个) 00 <<"alicebobcarl">> <<"Hello World">>

为了破译报头，我将首先找到 00 的第一个实例，然后将 00 之前的所有内容拆分为每个 0。然后我会将结果列表转换为一个列表，其中包含数据包经过的每个地址中的位数。然后我终于可以从标头中读取地址并检索有效负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:48:16.467

对 resque 的[位串理解：](http://www.erlang.org/doc/reference_manual/expressions.html#id79375)

```
1> Inp = <<1:1,0:1,3:2,0:1,7:3>>.
<<"À">>
2> [ size(B) || B <- binary:split(<< <<I>> || <<I:1>> <= Inp >>, <<0>>, [global]) ].
[1,2,3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:51:18.380

你可以将二进制转换为字符串吗？

假设您可以，然后执行以下操作：

```
B = "1011011101111011111",
S = string:tokens(B, "0"),
R = lists:map(fun(E)->length(E) end, S). 
```

但这不是有效的。期待好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:42:32.657

这是解析标头的方法：

```
-module(bitcnt).
-export([parse_header/1]).

parse_header(Message) ->
        parse_header(Message, []).

parse_header(<<0:1, 0:1, Body/bitstring>>, Header) ->
        %% stop if found header delimiter - two consecutive zero bits
        %% return parsed header and message body
        {lists:reverse(Header), Body};
parse_header(<<1:1, Rest/bitstring>>, []) ->
        %% handle if first bit is '1'
        parse_header(Rest, [1]);
parse_header(<<1:1, Rest/bitstring>>, [H | T]) ->
        %% handle consecutive '1' bits of header
        parse_header(Rest, [H+1 | T]);
parse_header(<<0:1, Rest/bitstring>>, Header) ->
        %% handle delimiters inside header - '0' bit
        parse_header(Rest, [0 | Header]). 
```

让我们在shell中测试它。假设这样的标题'10110111'（必须解析为[1,2,3]）+分隔符'00'+一些主体<<12345:64>>：

```
2> B1 = <<1:1,0:1,1:1,1:1,0:1,1:1,1:1,1:1,0:1,0:1,12345:64>>.
<<183,0,0,0,0,0,0,12,14,1:2>>
3> 
3> bitcnt:parse_header(B1).
{[1,2,3],<<0,0,0,0,0,0,48,57>>}
4> 
4> <<12345:64>>.
<<0,0,0,0,0,0,48,57>> 
```

另一个测试'11101'（必须解析成[3,1]）+'00'+<<12345:64>>

```
5> B2 = <<1:1, 1:1, 1:1, 0:1, 1:1, 0:1, 0:1, 12345:64>>.
<<232,0,0,0,0,0,0,96,57:7>>
6> 
6> bitcnt:parse_header(B2).                             
{[3,1],<<0,0,0,0,0,0,48,57>>} 
```

即使标头为空（消息以两个连续的零位开头） - 函数将标头解析为空列表：

```
7> B3 = <<0:1, 0:1, 12345:64>>.
<<0,0,0,0,0,0,12,14,1:2>>
8> 
8> bitcnt:parse_header(B3).    
{[],<<0,0,0,0,0,0,48,57>>} 
```

**附言**

顺便说一句，**您的标题格式非常多余**。如果您想编码大数字，例如数字 1024 - 您需要将其转换为 1024 个连续的“1”位！

**有两种方法可以改善标题格式：**

*   如果您知道您的任何数字小于某个阈值数字：计算您需要多少位来对具有最大值**的数字进行编码，并使用预定义长度的位串对标头中的每个数字进行编码**。例如 - 如果你所有的数字都小于 2^32 - 你需要 32 位来编码这个间隔中的每个数字

*   如果您无法定义阈值（具有最大值的数字）：**使用可变长度编码**。例如，[Elias 伽玛编码](http://en.wikipedia.org/wiki/Elias_gamma_coding)或[指数哥伦布编码](http://en.wikipedia.org/wiki/Exponential-Golomb_coding)。

# javascript - Javascript 复制没有标签的文本

> ID：12699168
> 
> 赞同：1
> 
> 时间：2012-10-02T22:13:57.117
> 
> 标签：javascript, copy, clipboard

我有一个脚本，单击该脚本会将 div 的内容复制到剪贴板

```
<script type="text/javascript">
var program=document.getElementById('code');
ShowLMCButton(program.innerHTML, '', '', './static/js/lmcbutton.swf');
</script> 
```

但是当我单击“复制”时，它会复制

```
<p>Line 1<br />Line 2</p> 
```

反正有没有像这样复制它：

1号线 2号线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:22:22.150

您可以使用[textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)或[innerText](http://msdn.microsoft.com/en-us/library/ie/ms533899%28v=vs.85%29.aspx)。根据 MDN，区别在于：

> *   请注意，虽然`textContent`获取所有元素的内容，包括`<script>`和`<style>`元素，但大多数等效的 IE 特定属性 ,`innerText`没有。
> *   `innerText`也知道样式，不会返回隐藏元素的文本，而 `textContent`会。
> *   由于`innerText`知道 CSS 样式，它会触发重排，而`textContent`不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:16:02.750

听起来你想要[innerText](http://www.yourwebskills.com/innerhtml.php)而不是 innerHTML？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:26:33.560

您正在使用外部库，因此您应该参考库文档。

无论如何，这里有一个相关的[帖子](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)。

# bash - 带有空格的Bash文件夹列表？

> ID：12699174
> 
> 赞同：1
> 
> 时间：2012-10-02T22:14:28.253
> 
> 标签：bash, shell

我有以下代码来查找超过 10 MB 的特定文件：

```
[[ -n "$1" ]] || { echo "Usage: findlarge [PATHNAME]"; exit 0 ; }
FILES=`find $1 -type f -size +10000k -exec ls -lh {} \; | awk '{ print $9 ";" }'`

echo -ne $FILES 
```

它工作得很好，直到它遇到一个有空格的文件路径。因此，例如，我有一个文件夹，其中有一个大文件，`/var/www/html/Web Content/largefile.zip`但脚本只会返回`/var/www/html/Web`.

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:16:09.140

将您`$1`放入引号以处理空间，并使用`-printf`参数输出您的文件列表：

```
[[ -n "$1" ]] || { echo "Usage: findlarge [PATHNAME]"; exit 0 ; }
find "$1" -type f -size +10000k -printf '%p;' 
```

用于`;`匹配您现有的代码，但您可以替换`\n`为在单独的行上输出每个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:16:19.187

尝试以下操作：

```
#!/bin/bash

[[ -n "$1" ]] || { echo "Usage: findlarge [PATHNAME]"; exit 0 ; }

FILES="$(find "$1" -type f -size +10000k -printf '%Ts %p\n' | cut -d ' ' -f2-)"

echo "$FILES" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:28:03.673

您应该发出文件名`-print0`（保证输出它们与文件系统上存在的*完全相同*），并将它们存储在一个数组中（这是在它们之间进行分隔的唯一方法，保证适用于所有可能的内容）。

```
[[ -n "$1" ]] || { echo "Usage: findlarge [PATHNAME]"; exit 0 ; }

files=()
while IFS='' read -d '' -r; do
  files+=( "$REPLY" )
done < <(find "$1" -type f -size +10000k -print0)

printf '%s\n' "${files[@]}" 
```

bash 中的数组可以包含任何非 NUL 字符，甚至是换行符（在 POSIX 文件名中有效）。其他方法不能保证保留文件名可能包含的特殊字符。

有关在 bash 中处理 find 输出的一般方法的更多信息，请参阅[http://mywiki.wooledge.org/BashFAQ/001](http://mywiki.wooledge.org/BashFAQ/001)

# python - 在 python 中为谷歌应用引擎创建枚举模型类的最佳方法？

> ID：12699184
> 
> 赞同：0
> 
> 时间：2012-10-02T22:15:13.993
> 
> 标签：python, google-app-engine, database-design

我想创建一个本身继承自 db.Model 的基本枚举类。这个想法是创建几个可用于枚举类的任何后代的辅助函数。这些属性在某种程度上可能非常广泛，但是我可以在基枚举类中声明几个常见的属性（例如，“名称”）。在 App Engine 中是否有处理枚举模型的标准方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:05:51.250

看来您必须编写自己的属性类型类（您可能可以扩展 db.IntegerProperty）。[Nick Johnson 的 ChoiceModel 类是](https://github.com/Arachnid/aetycoon/blob/master/__init__.py#L496)如何做到这一点的一个例子：

```
 This works by mapping each choice to an integer.  The choices must be hashable
  (so that they can be efficiently mapped back to their corresponding index).

  Example usage:

  >>> class ChoiceModel(db.Model):
  ...   a_choice = ChoiceProperty(enumerate(['red', 'green', 'blue']))
  ...   b_choice = ChoiceProperty([(0,None), (1,'alpha'), (4,'beta')])

  You interact with choice properties using the choice values:

  >>> model = ChoiceModel(a_choice='green')
  >>> model.a_choice
  'green'
  >>> model.b_choice == None
  True
  >>> model.b_choice = 'beta'
  >>> model.b_choice
  'beta' 
```

（链接代码和引用的评论是在 Apache 许可下发布的；版权所有 2011 Nick Johnson。）

# jquery - setInterval mouseout 和 mouseover

> ID：12699185
> 
> 赞同：0
> 
> 时间：2012-10-02T22:15:15.140
> 
> 标签：jquery, animation, setinterval

```
$(document).ready(function() {
    var timer; 

    var click = function() {
        $('div button').trigger('click');
    }

    $('div button').click(function(){
        //animation
    }

    $('div').live('mouseover mouseout', function(event) {

        if (event.type == 'mouseover') {
            clearInterval(timer);
        }
        else {
            timer = setInterval(click, 1000);

        }
    });
}); 
```

正如您在上面看到的，我试图让 setInterval 在鼠标悬停时工作并在鼠标悬停时停止。代码目前正在运行，但动画在页面加载后没有开始。所以现在你必须将鼠标悬停在 div 上，鼠标移出，然后动画就会开始。
如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:28:58.340

Just add trigger after binding

```
$('div button').click(function(){
    //animation
}.trigger('click') 
```

# spring - 当检查的异常在事务中传播时会发生什么？

> ID：12699189
> 
> 赞同：5
> 
> 时间：2012-10-02T22:15:32.400
> 
> 标签：spring, spring-transactions

我知道事务管理器中的默认回滚策略是在发生 RuntimeExceptions 时自动回滚。但是，如果我有一个允许传播的已检查异常会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:15:09.080

> 但是请注意，Spring 框架的事务基础代码默认情况下只会在运行时、未经检查的异常情况下将事务标记为回滚；也就是说，当抛出的异常是 RuntimeException 的实例或子类时。（默认情况下，错误也会导致回滚。）从事务方法抛出的检查异常不会导致事务回滚。

[资源](http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html)

即使抛出检查异常，Spring 也会像一切正常一样提交事务。
如果需要，您可以配置已检查异常的回滚。
喜欢

```
<tx:advice id="txAdvice" transaction-manager="txManager">
  <tx:attributes>
     <tx:method name="get*" read-only="false" rollback-for="AnyCheckedException"/>
     <tx:method name="*"/>
  </tx:attributes>
</tx:advice> 
```

`AnyCheckedException`被抛出 时将执行回滚。

这可能会有所帮助：[Spring transaction management with checked and unchecked exception](https://javasight.wordpress.com/2009/02/17/understanding-spring-transaction-management-with-checked-and-unchecked-exceptions/)

# android - 将 ForeignCollection 转换为 ArrayList - ORMLite、Gson 和 Android

> ID：12699190
> 
> 赞同：29
> 
> 时间：2012-10-02T22:15:33.327
> 
> 标签：android, arraylist, gson, ormlite, foreign-collection

如果我对我的解释不是很清楚，我深表歉意，但如果需要，我会添加并编辑这个问题以便清楚起见。

我正在开发一个 Android 应用程序，它通过外部 API 接收数据并使用 ORMLite 在本地存储数据。在本地存储数据和使用 ORMLite 之前，我有从服务器检索 JSON 并通过以下方式解析它的模型：

```
Gson gson = new Gson();

String result = ApiClient.httpPost("/user_route");

User user = gson.fromJson(result, User.class); 
```

用户类已定义

```
public class User {
  int id;
  String name;
  ArrayList<Image> media;
} 
```

和图像类：

```
public class Image {
  int id;
  int creator_id;
  String url;
} 
```

这是模型和方法的简化表示，但我相信我保留了所有相关信息。顺便说一句，`media`是一个 JSON 对象，其中包含`Images`.

现在我也在尝试将数据存储在本地。为了使用 ORMLite 在用户和图像之间建立关系，您似乎必须使用 ForeignCollection 类和 @ForeignCollectionField 注释。我不相信 Gson 可以直接`media`将 User 类中的字段的 Json 解析为 ForeignCollection 对象，所以我认为我需要创建两个字段`mediaCollection`和`media`.

使用 ORMLite，User 类现在看起来像这样：

```
@DatabaseTable(tableName = "Users")
public class User {
  @DatabaseField(generatedId = true)
  int id;

  @DatabaseField
  String name;

  @ForeignCollectionField
  ForeignCollection<Image> mediaCollection;

  ArrayList<Image> media;
} 
```

带有 ORMLite 的 Image 类如下所示：

```
@DatabaseTable(tableName = "Images")
public class Image {

  @DatabaseField(generatedId = true)
  int id;

  @DatabaseField(foreign=true, foreignAutoCreate=true, foreignAutoRefresh=true)
  private User user;

  @DatabaseField
  int creator_id;

  @DatabaseField
  String url;

} 
```

应用程序的流程是如何工作的，首先我为用户访问本地数据库。我执行一些逻辑，然后确定我是否需要实际访问服务器以“更新”或“刷新”用户数据。

无论数据来自本地还是来自远程服务器，我都需要`Image`在同一个视图中显示。就目前而言，`Image`根据数据是本地数据还是远程数据，URL 的 URL 存储在不同类型的对象中。我想做的是，如果`Image`存储在一个`ForeginCollection`对象中，将该对象转换为一个`ArrayList`，然后继续执行我的其余代码，提取`Image`URL 并显示它。

我想有两个问题。

1.  这是一个好的计划还是我应该编写两种完全不同的方法来`Image`从数据中提取 URL，而不是将对象从 转换`ForeignCollection`为`ArrayList`？

2.  如果这*是*一个好计划，我如何将 a 转换为`ForeginCollection`a `ArrayList`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T14:07:52.947

> 这是一个好的计划还是我应该编写两种完全不同的方法来从数据中提取图像 URL，而不是将对象从 ForeignCollection 转换为 ArrayList？

它应该工作。我没有看到一个简单的方法来做到这一点。

几点：

*   是否有某种方法可以将其标记`ForeignCollection`为瞬态，以便在通过 JSON 传输时将其忽略？然后，您可以`User`对 JSON 和 ORMLite 使用相同的对象。
*   某种`hydrate()`方法会很好，所以它会从`media`->转换，`mediaCollection`反之亦然。
*   如果您需要将 JSON 传输的图像加载到外部集合中，那么您应该使用该[`Dao.getEmptyForeignCollect(...)`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#getEmptyForeignCollection%28java.lang.String%29)方法。获得集合后，您可以将图像添加到其中，它们将被添加到表格中。

> 如果这是一个好计划，我如何将 ForeignCollection 转换为 ArrayList？

这更容易。A`ForeignCollection`是一个`Collection`。你可以做一个：

```
media = new ArrayList<Image>(mediaCollection); 
```

所以你的`User.getMedia()`方法应该检查`null`，如果是的话，从`mediaCollection`现场转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-11T13:56:07.890

只是为了转换`@ForeignCollectionField`为`ArrayList<Object>` 你可以这样做：

```
ArrayList<Object> taskFieldsList = new ArrayList<Object>(your collection); 
```

希望对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:59:50.910

除了首先将对象存储在数据库中，然后让 ormlite 在 ForeignCollection 中检索它们之外，您无法创建 ForeignCollection。您可以使用 Collection 而不是 ForeignCollection，但它的工作方式相同。我所做的如下：我在父类中有两个集合。一种是将 json 或 xml 反序列化为的 ArrayList。当父对象被存储时，dao 将 Arraylist 中的对象存储到数据库中，存储在链接到另一个 Collection 的表中，即 ForeignCollection。检索父对象时，它会自动包含 ForeignCollection 中的对象。它并不完美，但它有效。

# jquery - 使用jQuery加载背景时如何淡入div

> ID：12699191
> 
> 赞同：0
> 
> 时间：2012-10-02T22:15:44.107
> 
> 标签：jquery, css, image, load

我们有一些类 'divBG' 的 div，我们希望它们中的每一个在其背景加载后立即淡入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:15:44.107

```
$(".divBG").hide(); //hide all cubes of class cubes
$(".divBG").each(function(){

    var id=this.id; //get cube id
    bg = $(this).css('background-image');    //get div bg url
    bg = bg.replace(/^url\(["']?/, '').replace(/["']?\)$/, '');     //change css url property: [url('url')] ---> [url] only

    if (bg) {       //if div has bg
        var a = new Image;  
        a.onload = function( ){ $('#'+id).fadeIn(1000)};        //fade in cube when image is loaded. 
        a.src = bg; //load image with given url
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:25:06.403

你的意思是这样的？

```
function loadImage(div, imageUrl)
{   
    var img = new Image();
    $(img).load(function () 
        {
            $(div).html(this).fadeIn(1000);
        }
    ).attr('src', imageUrl);
}

loadImage("#div1", "image.png"); 
```

这会将图像加载到 div 中，然后将其淡入。如果要将其用作背景，可以将它们放在一个容器中并在其上放置一些文本。

# emacs - 如何在emacs中的文件名中匹配关键字的条件

> ID：12699193
> 
> 赞同：2
> 
> 时间：2012-10-02T22:15:55.290
> 
> 标签：emacs, elisp

如何检测当前缓冲区或打开文件的文件名是否包含关键字？或匹配emacs中的正则表达式？

我想根据文件名为不同的c源设置样式，例如

```
if <pathname contains "linux">
   c-set-style "linux"
else if <pathname contains "kernel">
   c-set-style "linux"
else
   c-set-style "free-group-style" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T23:10:48.087

该函数[`buffer-file-name`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Buffer-File-Name.html)返回当前缓冲区的名称，或者`nil`如果当前缓冲区没有访问文件。

该函数[`string-match`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Regexp-Search.html)将正则表达式与字符串匹配，并返回第一个匹配项的开始索引，或者`nil`如果没有匹配项。

因此，您可以根据文件名设置样式，如下所示：

```
(require 'cl)

(defvar c-style-pattern-alist '(("linux" . "linux\\|kernel"))
   "Association list of pairs (STYLE . PATTERN) where STYLE is the C style to
be used in buffers whose file name matches the regular expression PATTERN.")

(defvar c-style-default "free-group-style"
   "Default C style for buffers whose file names do not match any of the
patterns in c-style-pattern-alist.")

(defun c-set-style-for-file-name ()
   "Set the C style based on the file name of the current buffer."
  (c-set-style
    (loop with file-name = (buffer-file-name)
          for (style . pattern) in c-style-pattern-alist
          when (string-match pattern file-name) return style
          finally return c-style-default)))

(add-hook 'c-mode-hook #'c-set-style-for-file-name) 
```

# jquery - 将输入值更改为 jquery 对象

> ID：12699201
> 
> 赞同：1
> 
> 时间：2012-10-02T22:16:29.263
> 
> 标签：jquery, string, object

当用户从下拉框中选择时，我想将输入字段的值更改为 jquery 对象，该对象是来自另一个页面的 span 元素。当我附加到#myDiv 时，这工作正常；跨度元素出现。但是，我正在尝试更改文本输入值，这会在选择更改时显示“对象对象”。我不明白这种不一致。我怎样才能像#myDiv 那样正确更改值？谢谢你。

```
<script>

function schedule(selectedValue){

var selectedValue = selectedValue - 1;

$.get('/file.xml', function(data)
{
    var $slides = $(data).find('span.desctext'),
    selectedslide = $slides.eq(selectedValue);

    $('#myDiv').append(selectedslide);
    $("#fvdescription").val(selectedslide);

});

}
</script> 
```

HTML：

```
<form action="preview.php" method="post">
Action: <select name="whichslide" onchange="schedule(this.value)">
<option value="ab">Add & Bump</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option></select><br />
Year: <input type="text" name="year" size="3"> <br> URL: <input type="text" name="url" size="35"> <br> Description: <input type="text" name="description" id="fvdescription" size="75" value="Description goes here">  <br>
<input type="submit" name="preview" value="Preview"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:20:55.660

好吧，您不能将元素作为文本框的*值*。它基本上只是将`toString`您的 jQuery 对象的值作为值，如果它返回结果集，它将始终是“对象对象”。

你到底想在你的文本框中显示什么？如果您想从 内部发短信`span`，请执行以下操作：

`$("#fvdescription").val(selectedslide.html());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:21:39.010

这里 selectedslide 是一个**jQuery 对象**

$('#myDiv').append(selectedslide);

在这种情况下，您将对象附加到 div 元素

```
$("#fvdescription").val(selectedslide); 
```

但是在这里，您将值直接写入文本字段，该文本字段在您的文本字段中显示为对象。

试试这个

```
$("#fvdescription").val(selectedslide.html()); 
```

# google-chrome - 保存到 Google 云端硬盘 - 选择位置

> ID：12699203
> 
> 赞同：2
> 
> 时间：2012-10-02T22:16:40.153
> 
> 标签：google-chrome, google-drive-api

您可以在 Chrome 中打印当前网页（以 PDF 格式），然后将其上传到 Google Drive 中的特定位置吗？

我正在寻找插件或以编程方式实现这一目标？也许使用某种html标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:16:35.990

Chrome 内置了此功能 -[在 Chrome 中打印页面](http://support.google.com/chrome/bin/answer.py?hl=en&answer=1379552)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T20:49:24.550

要打印任何网页，请按 Ctrl+P

# restkit - Restkit 错误初始化 RKCLient

> ID：12699205
> 
> 赞同：2
> 
> 时间：2012-10-02T22:16:49.630
> 
> 标签：restkit

我已将我的 RestKit 安装更新到 0.10.2。

我已经按照 github 上的说明进行操作，我的项目构建完美。

但是，每当我尝试使用例如初始化 RKClient 实例时：`[RKClient clientWithBaseURL:@"http://127.0.0.1"];`我得到以下异常：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString path]: unrecognized selector sent to instance 0x324790'

*** First throw call stack:

(0x22f0022 0x1f7acd6 0x22f1cbd 0x2256ed0 0x2256cb2 0x1e23cf 0x1e20df 0x1e1ff4 0x1c4338 0x1c3da3 0x1cb33 0xdfc386 0xdfd274 0xe0c183 0xe0cc38 0xe00634 0x21daef5 0x22c4195 0x2228ff2 0x22278da 0x2226d84 0x2226c9b 0xdfcc65 0xdfe626 0x1b56d 0x2e75 0x1) 
```

我的项目设置：

![在此处输入图像描述](../Images/7f34b161c7cfc2f4d6c8a8e94772dad8.png)我需要提供更多信息吗？我怎么解决这个问题？ ![在此处输入图像描述](../Images/9e28d1917f4e38db32fddbdeb6cce94b.png) ![在此处输入图像描述](../Images/2c6f6831e6a6021618f7c35b6dac497e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:19:01.140

您可能想尝试“clientWithBaseURLString”，因为您正在传递一个 NSString。

# css - 一侧成一定角度的背景正方形

> ID：12699210
> 
> 赞同：3
> 
> 时间：2012-10-02T22:17:12.277
> 
> 标签：css, background-image, transparent, css-shapes

我希望能够仅使用 CSS 创建一个透明背景，但一端有一个角度。我找到了各种尝试这样做的方法，但无法完全理解。我真的不想使用任何脚本，只是 CSS。

背景图像需要如下所示：

[![斜边正方形](../Images/f7ff2cf9451c9020c42352d2b77960b7.png)](https://i.stack.imgur.com/0G7P5.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T22:23:07.807

您可以使用边框来做到这一点：http: [//jsfiddle.net/wNhjb/](http://jsfiddle.net/wNhjb/)

```
#shape {
   height: 0; 
   width: 80px;
   border-top: 80px solid blue;
   border-left: 40px solid transparent;
} 
```

​</p>

# c# - C# 奇数列表行为

> ID：12699214
> 
> 赞同：3
> 
> 时间：2012-10-02T22:18:10.763
> 
> 标签：c#, list, pointers

这可能是一个有点愚蠢的问题，但我似乎根本找不到任何关于这种行为的信息。

这是代码：

```
class Cars
{
    public int year = 0;
    public string make = " ";
    public string model = " ";

    public Cars()
    {
    }

    public Cars(int tYear, string tMake, string tModel)
    {
        year = tYear;
        make = tMake;
        model = tModel;
    }

    public string ConvertToString()
    {
        return year.ToString() + make + model;
    }
}

class Program
{
    Cars oneCar = new Cars();
    List<Cars> manyCars = new List<Cars>();

    public void Init()
    {
        manyCars.Add(new Cars(1993, "Nissan", "240SX"));
        manyCars.Add(new Cars(2001, "Isuzu", "Rodeo"));
        manyCars.Add(new Cars(2010, "Ford", "F150"));

        oneCar = manyCars[2];
        oneCar.model = "Pinto";

        for (int i = 0; i < manyCars.Count(); i++)
            Console.WriteLine(manyCars[i].ConvertToString());

        Console.WriteLine(oneCar.ConvertToString());
    }

    static void Main(string[] args)
    {
        Program prg1 = new Program();
        prg1.Init();
    }
} 
```

输出是这样的：

> 1993日产240SX
> 
> 2001五十铃牛仔竞技表演
> 
> 2010福特平托
> 
> 2010福特平托

为什么第三行读的是 Pinto 而不是 F150？似乎将 oneCar 变量设置为指针或其他东西。如何避免这种情况？我认为这就是“新”关键字所完成的。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:19:31.950

因为`Cars`是一个对象，而对象`Reference Types`在 C# 中。

当你调用这行代码时：

```
oneCar = manyCars[2]; 
```

您指向`oneCar`的内存位置`manyCars[2]`。它们引用的是同一个对象。更新`oneCar`也更新`manyCars[2]`。

[这个链接](http://www.albahari.com/valuevsreftypes.aspx)有一个很好的关于引用和值类型的文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:23:52.893

`manyCars[2]`是福特。所以分配后`oneCar`是同一个福特。但请记住，类类型是引用类型。这意味着`oneCar`和`manyCars[2]`指向同一个汽车对象！因此设置与设置`oneCar.model = "Pinto"`具有相同的效果`manyCars[2].model = "Pinto"`。

`oneCar = manyCars[2];`不会创建对象内容的副本。您可以向汽车类添加一个`Clone`方法

```
public Cars Clone()
{
    return (Cars)MemberwiseClone(); // This method is inherited from object.
} 
```

那么这真的会创建一个副本

```
oneCar = manyCars[2].Clone(); 
```

现在`oneCar`和`manyCars[2]`是两个不同的对象，更改`oneCar's`模型不会影响`manyCars[2]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T22:33:47.743

在 c# 中有值和引用类型——类是引用类型。您上面的代码将三个新的汽车对象添加到 ManyCars 列表中 - 然后将 OneCar 变量设置为第三个列表元素的引用 - 在您的情况下为 F150。然后，您使用 Pinto 覆盖模型属性，然后遍历您的列表。

您基本上已将 OneCar 设置为指向原始 Car 对象的指针。如果要复制对象，然后可以更改而不影响 List 中的原始对象，则需要克隆 Car 对象，而不仅仅是将其分配给 OneCar 变量。

干杯西蒙

# wso2 - XSLT 自定义 java 函数与撒克逊？WSO2 ESB 4.5

> ID：12699216
> 
> 赞同：0
> 
> 时间：2012-10-02T22:18:13.370
> 
> 标签：wso2, wso2esb

我想知道我们是否失去了对 XSLT-Stylesheets 的自定义 Java 函数支持（ESB 4.0.3 中的 Xalan 可用），因为 Saxon 现在是 WSO2 ESB 4.5 中的 XSLT 处理器（HE 版）？

### 原始 XSLT，与 ESB 4.0.3 一起使用：

我在 esb4.5.0/repository/components/dropins 中复制了自定义 DateParser.jar

```
<xsl:stylesheet extension-element-prefixes="transform" version="1.0"
   xmlns:transform="xalan://my.extension.DateParser"
     ...
   <xsl:value-of select="transform:sdf('dd.MM.yyyy HH:mm:ss',./timestamp)"/> 
```

这显示在错误日志中（缩短）：

```
 ERROR XSLTMediator Unable to perform XSLT transformation using :
  Caused by: net.sf.saxon.trans.XPathException: Cannot find a matching  function named    {xalan://my.extension.DateParser}sdf() 
```

### 为 Saxon 更改了 XSLT，不适用于 ESB 4.5.0 ###

由于 Saxon 以与 Xalan 不同的方式处理自定义 java 函数，因此我像这样更改了 XSLT-Stylesheet

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:transform="java:my.extension.DateParser" 
       ...
     <xsl:value-of select="transform:sdf('dd.MM.yyyy HH:mm:ss',./timestamp)"/> 
```

现在这出现在错误日志中（缩短）：

```
 Caused by: net.sf.saxon.trans.XPathException: Cannot find a matching ... function named {java:my.extendsion.DateParser}sdf(). Note that direct calls to Java methods are not available under Saxon-HE 
```

我想知道标准 WSO2 ESB 发行版（包含 Saxon-HE）是否不支持“直接调用 Java 方法”。由于 Saxon-Enterprise（付费版）将提供这种支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:43:07.400

我找不到一种方法来获取由 XSLT 样式表调用的自定义 java 函数，因为使用的 XSLT 处理器 SAXON-HE 版本禁止此扩展点。

也许这种“解决方法”或替代方法也可能对其他人有所帮助：

我没有在 XSLT-Stylesheet 中调用自定义 java 函数，而是使用[PojoCommand](http://synapse.apache.org/userguide/mediators.html#POJOCommand)（这只是一个示例/调试片段）在如下序列中转换了消息：

```
 <sequence>
    <log category="INFO" level="full" separator=","/>
    <pojoCommand name="foo.bar.DebugCommand">
     <property name="append" value="bar"/>
     <property action="ReadAndUpdateMessage" expression="//dummy3/text()" name="original"/>
    </pojoCommand>
    <log category="INFO" level="full" separator=","/>
    <drop/>
 </sequence> 
```

如果您只想转换文本节点并保留周围的 XML 标记，请不要忘记[XPath 函数/text()。](http://www.w3schools.com/xpath/xpath_examples.asp)

这是 DebugCommand 实现：

```
 import org.apache.synapse.Command;
  ...
 public class DebugCommand implements Command{

 private static Log log = LogFactory.getLog(DebugCommand.class);
 private String original = null;
 private String append = null;
 private String appendedOriginal;

 @Override
 public void execute() {
    log.info("Entering:"+toString());
    appendedOriginal = ""+original+":"+append;
    original = appendedOriginal;
    log.info("Exiting:"+toString());
 }

public String getOriginal() {
    return original;
}

public void setOriginal(String original) {
    this.original = original;
}

public String getAppend() {
    return append;
}

public void setAppend(String append) {
    this.append = append;
}

public String getAppendedOriginal() {
    return appendedOriginal;
}

public void setAppendedOriginal(String appendedOriginal) {
    this.appendedOriginal = appendedOriginal;
}

@Override
public String toString() {
    StringBuilder builder = new StringBuilder();
    builder.append("DebugCommand [original=");
    builder.append(original);
    builder.append(", append=");
    builder.append(append);
    builder.append(", appendedOriginal=");
    builder.append(appendedOriginal);
    builder.append("]");
    return builder.toString();
}
  } 
```

# ruby - Ruby 语法粗箭头

> ID：12699218
> 
> 赞同：0
> 
> 时间：2012-10-02T22:18:19.623
> 
> 标签：ruby

我正在努力学习 Ruby。我不明白这个函数的最后一行在做什么，特别是胖箭头=>。符号 :word 是否对变量 masquerade_word 做某事，反之亦然，它是一个赋值吗？另外，我很困惑，符号`:word`是否与`session[:word]`. 任何人都可以请澄清...

```
post "/new" do
  word = Word.get_random
  masquerade_word = Word.masquerade(word)

  session[:word] = word
  session[:incorrect_guesses] = 0
  session[:chars_left] = word.size
  session[:revealed_word] = masquerade_word

  {:word => masquerade_word}.to_json
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:22:14.660

这是一种定义哈希的方法。

它与`Hash(:word, masquerade_word)`

关键是`:word`，价值是`masquerade_word`

# java - Java - Spring - 搜索域对象

> ID：12699219
> 
> 赞同：2
> 
> 时间：2012-10-02T22:18:20.647
> 
> 标签：java, spring, search, domain-object

我有一个控制器，它使用 Spring 自动将 HTTP 请求参数映射到业务域对象。我将域对象中的字段数据保存到数据库中。

我有另一个控制器需要支持搜索与域对象相关的任何字段组合。对于某些字段（例如日期字段），我需要允许在一个范围内进行搜索。所以，我不能重用域对象，因为它只有一个日期字段。

例如，我有一个带有日期字段的报告域对象。但是，搜索需要一个“来自”报告日期字段和一个“至”报告日期字段。

我是否应该创建一组仅用于搜索的域对象，这些对象主要反映业务域对象（支持范围搜索的字段除外）？还是有更好的方法来做到这一点？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:25:19.127

如何在现有域对象中为范围添加两个字段而不是创建新对象？
就像添加两个新字段`fromReportDate`和`toReportDate`您的报告域对象一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:20:55.723

你能考虑引入一个类似[Criteria](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Criteria.html)的对象吗？

我不会根据您当前拥有的内容创建更多业务对象，仅仅是因为您没有对这些实体进行建模 - 您正在对用于查找它们的搜索条件进行建模。

例如，您可能会执行以下操作：

```
CriteriaBuilder<Report> builder = new CriteriaBuilder<Report>();
builder.addFrom("date", new Date())
builder.addTo("date", new Date());
Criteria<Report> criteria = builder.build(); 
```

可以反射性地检查类属性，`CriteriaBuilder`以确保您没有尝试将标准绑定到不存在的字段。

# graph - 无法在graphviz中打印集群子图的标签和轮廓框

> ID：12699222
> 
> 赞同：1
> 
> 时间：2012-10-02T22:18:29.727
> 
> 标签：graph, graphviz, dot, graph-visualization

我是 graphviz 和 DOT 语言的新手。我正在尝试使用集群 subgprahs 生成图表。但是，当我有集群时，每个集群都在脚本中精确指定了节点位置，graphviz 不会生成集群的轮廓框或标签！具体来说，如果我有以下 DOT 脚本：

```
digraph G{
subgraph cluster0{
label="Cluster 0"
a->b
}
subgraph cluster1{
label="Cluster 1"
c->d
}
} 
```

那么生成的图是： ![当用户未指定节点位置时使用集群生成的图形](../Images/eaf4b486cc4fe90de915bff02cbab0e4.png)

但是，使用以下 DOT 脚本，我在其中准确指定了 4 个节点的节点位置：

```
digraph G{
subgraph cluster0{
label = "Cluster 0"
a[pos="10,200"]
b[pos="100,200"]
a->b
}
subgraph cluster1{
label = "Cluster 1"
c[pos="10,100"]
d[pos="100,100"]
c->d
}
} 
```

生成的图形是： ![当用户指定节点位置时使用集群生成的图形](../Images/ec80e36ab36dd8c17133d522fe1ed37e.png)

请注意，在这种情况下，集群的轮廓框和集群的标签都不会打印！在这种情况下，如您所见，两个集群之间有明确的分界线 - 集群不重叠，所以原则上 graphviz 显示它们应该没有问题，对吗？

无论如何，我如何告诉 graphviz 绘制集群轮廓框和标签？对此的任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:25:07.097

点布局引擎不支持该`pos`属性。

要呈现预定义所有节点位置的图形，您应该使用or`neato`选项。`fdp``-n`

`neato`不支持集群（尽管现在[看来应该如此](http://www.graphviz.org/content/dot-fixed-node-positions-ie-edge-routing-only)）。幸运的是，`fdp`有！

因此，您可以使用以下命令：

```
dot -Tpdf -Kpdf -n -O filename.dot 
```

或者

```
fdp -Tpdf -n -O filename.dot 
```

不幸的是，节点相对于集群的位置还可以，但集群似乎仍然被 fdp 移动（`-n`switch 没有任何区别）。

我没有尝试使用最新版本（我使用的是 2.29.20120504），但如果最新版本也不起作用，这可能是一个错误报告的情况。

顺便说一句，由于假设位置以英寸为单位，这将创建一个非常大的图表。

* * *

我使用 fdp 获得的输出（带或不带`-n`开关） - 我添加`size=20`以限制图像大小：

![fdp 输出](../Images/7993a8ac7ecc09e77f2b2cdc18e2df1b.png)

* * *

不使用的替代解决方案`pos`：

```
digraph G{
subgraph cluster0{
label = "Cluster 0"
{rank=same; a->b;}
}
subgraph cluster1{
label = "Cluster 1"
{rank=same; c->d; }
}

a -> c [style=invis];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T10:40:22.000

您的代码在[viz.js](http://viz-js.com/)上的 svg 中呈现良好。我能够看到集群周围的边界。

也许您使用的 graphviz 版本很旧，升级应该可以解决这个问题。

# iphone - XCode - 转换为飞 UTF8 字符，如 \u00e8

> ID：12699226
> 
> 赞同：1
> 
> 时间：2012-10-02T22:18:33.600
> 
> 标签：iphone, objective-c, encoding, utf-8, character-encoding

我有一个`NSString`包含 UTF8 字符的字符串，例如： **“test \u00e8”** <- 请注意，包含此字符串的字符串与具有以下内容不同：

```
NSString *a = @"test \u00e8"; 
```

相反，它等于有一个字符串，例如：

```
NSString *a = @"test \ \ u00e8"; //note the double \\ for escape... 
```

所以..显然`[NSString stringWithUTF8String:...]`我无法获得所需的字符串：**"testè"**。

有没有办法转换我的字符串并制作可读的 utf8 字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:33:28.007

惊人的！有效。有一些小的语法错误，所以这是正确的代码：

```
NSArray *fragments = [str componentsSeparatedByString:@"\\u"];
if([fragments count])
{
    NSEnumerator *stringEnumerator = [fragments objectEnumerator];
    NSMutableString *decodedString =
    [[stringEnumerator nextObject] mutableCopy];

    NSString *nextFragment;
    while(nextFragment = [stringEnumerator nextObject])
    {
        if([nextFragment length] >= 4)
        {
            unichar decodedCharacter = 0;

            for(int c = 0; c < 4; c++)
            {
                unichar hexValue = [nextFragment characterAtIndex:c];

                if(hexValue >= 'a')
                    hexValue = 0xa + (hexValue - 'a');
                else
                    hexValue = hexValue - '0';

                decodedCharacter = (decodedCharacter << 4) + hexValue;
            }

            [decodedString appendFormat:@"%C", decodedCharacter];
            [decodedString appendString:[nextFragment substringFromIndex:4]];
        }
        else
        {
            // there seems to be a parsing error; maybe just append
            // next fragment?
        }
    }
    return decodedString;
}
return str; 
```

非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:37:23.117

我认为您将不得不自己编写一些东西，理由`\uabcd`是通常由编译器在编译时解析，而不是由`NSString`. 幸运的是，我认为这并不难。

```
NSString *fragments = [string componentsSeparatedByString:@"\u"];

if([fragments count])
{
    NSObjectEnumerator *stringEnumerator = [fragments objectEnumerator];
    NSMutableString *decodedString = 
                  [[[stringEnumerator nextObject] mutableCopy] autorelease];

    NSString *nextFragment;
    while(nextFragment = [stringEnumerator nextObject])
    {
         if([nextFragment length] >= 4)
         {
              unichar decodedCharacter = 0;

              for(int c = 0; c < 4; c++)
              {
                  unichar hexValue = [nextFragment characterAtIndex:c];

                  if(hexValue >= 'a')
                      hexValue = 0xa + (hexValue - 'a');
                  else
                      hexValue = hexValue - '0';

                  decodedCharacter = (decodedCharacter << 4) + hexValue;
              }

              [decodedString appendFormat:@"%C", decodedCharacter];
              [decodedString appendString:[nextFragment substringFromIndex:4]];
         }
         else
         {
              // there seems to be a parsing error; maybe just append
              // next fragment?
         }
    }

    NSLog(@"decoded string is %@", decodedString);
} 
```

# regex - Reg Exp 从 HTML 中提取所有文件

> ID：12699227
> 
> 赞同：3
> 
> 时间：2012-10-02T22:18:37.890
> 
> 标签：regex, extract

使用正则表达式我想提取包含在某些 HTML 文本中的文件或图像的所有链接。尝试了几个例子，但由于很多原因都失败了（主要是我不擅长正则表达式:)）

1）首先我试过这个：

```
> Regex("<img[^>]+src=[""']([^""']+)[""']", RegexOptions.Singleline Or
> RegexOptions.IgnoreCase) 
```

（它适用于图像）

2）然后这个：

```
Regex("href=[""']([^""']+)[""']", RegexOptions.Singleline Or RegexOptions.IgnoreCase) 
```

1）提取所有图像，它工作正常，但这只是部分解决方案。2）提取所有href =“asdf”，但我只想提取指向文件的href，我不想要锚（#middlesection）或.aspx甚至没有像href =“www.google.com/site”这样的扩展名的url

我想知道如何从给定文本中提取所有文件，作为以点和三个字符结尾的任何链接的文件:)

我对“.aspx”或“.html”不感兴趣，对“id_content=99”之类的无扩展网址也不感兴趣，也对“#anchor123”之类的锚点不感兴趣。

是否可以将其打包到一个 RegExp 中？这一切背后的想法是，我必须将某些 HTML 中引用的每个文件从一个地方复制到另一个地方，因此我需要一个仅包含要复制的文件路径的 ArrayList。

提前致谢！

添加了一些示例代码，只是为了澄清这与“野外”html 无关

给出这个代码：

```
<p>This is a paragraph</p>
<br>
<a href="#someplace">Go to someplace</a>
<ul>
    <li><p><a href="../files/document.pdf">Important PDF 1</a></p></li>
    <li><p><a href="../files/document.xls">Important XLS</a></p></li>
</ul>
<a href="content.aspx?id_content=55">Go to content 55</a>
<br>
<img src="../images/nicelogo.jpg"> 
```

我想得到这个：

```
"../files/document.pdf"
"../files/document.xls"
"../images/nicelogo.jpg" 
```

我不想得到这个：

```
"#someplace"
"content.aspx?id_content=55" 
```

就是这样，使用我拥有的 reg exp，我得到了所有链接，我只想要那些代表文件的链接。HTML 是我手写的（长篇大论），因此不会出现奇怪的双双引号或格式错误的标签或奇怪的字符。

我知道它可以做到，因为它几乎完成了，我只是不知道如何告诉我“只给我最后有“.something”的匹配项是“something”一个三个字符的长字符串”。我清楚了吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:17:23.107

根据您的示例，大部分表达式不应匹配问号、片段哈希或双引号：

```
"([^?#"]*)\.[a-z]{3,4}" 
```

最后一部分是强制在 3 到 4 个字符之间加上句点。

**编辑**

要捕获双引号之间的部分：

```
"(([^?#"]*)\.[a-z]{3,4})" 
```

不确定如何避免使用 ASP 对基本名称进行内存捕获，在 PCRE 中您将使用`?:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:43:19.533

您真的不想尝试自己解析 URL。有各种格式可以引用资源。您可以`src=foo`不使用引号, `src='foo'`, `src="foo"`, 您可以包含本身引用其他资源的样式表，您需要进行实体解码 ( `src='f&quot;oo'`) 和 URL 编码 ( `src='f o o'`)，并处理相对 URL 和绝对 URL（您知道吗`src='//somesite.com/blah'`？？） 等等。还有你提到的问题，可能还有更多我没有想到的问题。StackOverflow 上已经有很多关于为什么尝试使用 RegEx 解析 HTML 是一个坏主意的问题，答案从[严肃](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)到[幽默](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)不等。`src='http://somesite.com/blah'``src='somesite.com/blah'`

相反，为什么不使用已经解决问题的现有工具，比如[wget](http://www.gnu.org/software/wget/)？请参阅 wget 的[递归下载](http://www.gnu.org/software/wget/manual/wget.html#Recursive-Download)支持以跟踪链接并爬取站点以获取参考资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:32:29.653

像这样的东西应该工作：

```
<a href=\"(.*\.[a-z0-9]{3})\" 
```

但如果是这样，你必须向我保证，当你后悔为此使用正则表达式时，你会回来并在这里发表评论。

# python - numpy python类调用错误的__setitem__

> ID：12699228
> 
> 赞同：2
> 
> 时间：2012-10-02T22:18:38.177
> 
> 标签：python, numpy

我有以下课程：

```
class autoArray2(numpy.ndarray):
    def __new__(self, *args, **kwargs):
        obj = numpy.array(*args, **kwargs)
        return(obj)

    def __setitem__(self, coords, value):
        print("HERE") 
```

但是，似乎`array.__setitem__`正在调用而不是我指定的那个。

```
a = numpy.array([[1,2],[2,3]])
b = autoArray2(a)
a[0,0] = 1 
```

“这里”没有打印出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:40:08.100

子类化一个 numpy 数组有点棘手。 如果您想进行子类化， [Stefan van der Walt 的幻灯片](http://mentat.za.net/numpy/numpy_advanced_slides/)和[numpy 文档是很好的起点。](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html)

```
import numpy as np

class AutoArray2(np.ndarray):
    def __new__(cls, input_array):
        # Input array is an already formed ndarray instance
        # We first cast to be our class type
        obj = np.asarray(input_array).view(cls)
        return obj
    def __array_finalize__(self, obj):
        if obj is None: return
    def __setitem__(self, coords, value):
        print("HERE")

a = np.array([[1,2],[2,3]])
b = AutoArray2(a)
b[0,0] = 1 
```

产量

```
HERE 
```

关键因素是对`view(cls)`. 没有它，您将返回一个普通的`ndarray`，而不是 AutoArray2 实例。

此外，`a[0,0] = 1`正在使用`a`-- 普通的`ndarray`. 要使用`b`你`__setitem__`需要的`b[0,0] = 1`。

# regex - 如何在vimscript中对带有文本的变量使用正则表达式？

> ID：12699229
> 
> 赞同：5
> 
> 时间：2012-10-02T22:18:40.473
> 
> 标签：regex, vim

我将文本保存在变量中，例如，如下所示：

```
let text = getline(line(".")-1) 
```

如何检查文本是否与正则表达式匹配？我期待这样的事情：

```
let text = getline(line(".")-1)
if regexp_match(text, "^[Ss]tuff$")
    dostuff
endif 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T23:02:06.743

进行了更多研究，发现我需要的是[=~# 运算符](http://vimhelp.appspot.com/eval.txt.html#expr-%3D%7E%23)，用于检查某些文本是否与正则表达式匹配：

```
if "text"=~#"^te.."
    echo "Matches!" 
```

# objective-c - 什么可能导致这个文件在 CI 构建机器上编译需要这么长时间，但在我的笔记本电脑上却没有？

> ID：12699232
> 
> 赞同：1
> 
> 时间：2012-10-02T22:18:55.760
> 
> 标签：objective-c, xcode

我有一个 Objective-C 类文件，它几乎完全由一个返回`NSDictionary`. 被`NSDictionary`构造为一个非常大的文字。5250 行文字。这是中间某处的摘录：

```
-------8<-------
@{
  kSectionKey : year_1982_section,
  kItemsKey : @[
    @{ kItemCode : @"03388", kNameKey : january, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03389", kNameKey : march, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03390", kNameKey : april, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03391", kNameKey : may, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03392", kNameKey : june, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03393", kNameKey : july, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03394", kNameKey : august, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03395", kNameKey : september, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03396", kNameKey : october, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03397", kNameKey : november, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
    @{ kItemCode : @"03398", kNameKey : december, kApprovedKey : @YES, kRequiresAuthorizationKey : @NO },
  ]
},
-------8<------- 
```

是的，我知道您想知道我们为什么要这样做，而不是仅仅加载 JSON 或 XML 文件。我不想在这个论坛上辩论是有充分理由的。

事实证明，在我的笔记本电脑上用 Xcode 编译它真的很快。但是将其编译为我们持续集成的一部分确实很慢。我们最后一次尝试（并取消）至少 22 分钟。

知道为什么会这样吗？CI 机器是 2012 Mac Pro，具有 64 GB RAM 和 SSD。构建由 Jenkins 启动，它通过命令行运行 Xcode。

# php - 获取或发布时事通讯订阅？

> ID：12699234
> 
> 赞同：-4
> 
> 时间：2012-10-02T22:19:09.673
> 
> 标签：php, javascript, forms, html

> **可能重复：**
> [我什么时候应该使用 GET 或 POST 方法？他们之间有什么区别？](https://stackoverflow.com/questions/504947/when-should-i-use-get-or-post-method-whats-the-difference-between-them)

我正在为我的网站创建一个时事通讯订阅区，我想知道首选哪种方法？... **GET**还是**POST**？由于我允许人们为将来的时事通讯注册他们的电子邮件，我认为**GET**将是首选方法，但我听到很多人只是说对所有事情都使用**POST**。

我知道 GET 更快、更不安全并且不能存储尽可能多的字符。

你怎么看？**获取**还是**发布**？

**编辑：**我知道这篇文章可能会被遗忘，因为这是一个相当简单的问题，但我问的是首选方式。不只是一些半......方式！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:20:53.197

如果要插入或更新某些内容，通常使用 POST。GET 如果你想检索数据。如果您让人们通过提交带有电子邮件地址的表单来注册，您应该使用 POST。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:24:30.900

POST一般用于修改服务器上的数据，GET一般应该返回数据并且是幂等的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:34:32.507

两者之间的技术差异基本上很小。您可能会在这里或那里遇到限制或奇怪的实现，但您主要关心的是您要公开的 API 的语义含义。

每个网页、每个 Web 服务、任何可在线访问的资源都是所有者向世界公开的 API。该 API 应尽可能遵循标准和约定，以便任何希望使用该 API 的人更容易理解。

看一下[HTTP 动词的定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)：

*   **GET：** GET 方法意味着检索由 Request-URI 标识的任何信息（以实体的形式）。如果 Request-URI 指的是数据生成过程，则生成的数据应作为响应中的实体返回，而不是过程的源文本，除非该文本恰好是该过程的输出。
*   **POST：** POST 方法用于请求源服务器接受请求中包含的实体，作为 Request-Line 中 Request-URI 标识的资源的新下级。

本质上...如果您要检索数据，请使用`GET`. 如果您要插入数据（这是您的情况），请使用`POST`. 当然还有更多。修改数据使用`PUT`，获取有关数据的元数据，使用`HEAD`，删除数据使用`DELETE`，你明白了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T22:21:30.710

两者都可以，但是邮件将通过 GET 保存在历史记录中，如果你不想要这个，你应该使用 POST

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-02T22:29:42.333

虽然 POST 和 GET 都可以工作**，但实际首选的方式是 POST。**这两种方法都有其局限性，但在这种情况下，它们都不会限制您的实现，因为这将是一个有点“简单”的页面。

使用 get 告诉服务器要做什么，而不是设置数据。是的，您是对的，用户可以阅读 GET，但他们也可以阅读/修改您的帖子，因此没有必要考虑这一点。

只需遵循标准并使用 POST。

有关更多信息，请参阅以下页面：

```
http://www.w3schools.com/php/php_post.asp
http://www.w3schools.com/php/php_get.asp
http://www.cs.tut.fi/~jkorpela/forms/methods.html 
```

# r - 如何在 R 中创建显示预测模型、数据和残差的图表

> ID：12699236
> 
> 赞同：7
> 
> 时间：2012-10-02T22:19:19.637
> 
> 标签：r, plot, regression, prediction

给定两个变量`x`和`y`，我对变量运行 dynlm 回归，并希望根据其中一个变量绘制拟合模型，底部的残差显示实际数据线与预测线的差异。我以前见过它，我以前也做过，但是对于我的一生，我不记得如何去做或找到任何解释它的东西。

这让我进入了我有一个模型和两个变量的球场，但我无法获得我想要的图表类型。

```
library(dynlm)
x <- rnorm(100)
y <- rnorm(100)
model <- dynlm(x ~ y)

plot(x, type="l", col="red")
lines(y, type="l", col="blue") 
```

我想生成一个看起来像这样的图表，您可以在其中看到模型和真实数据相互重叠，并将残差绘制为底部的单独图表，显示真实数据和模型如何偏离。 ![目标](../Images/9e659b0abf0eb2db32d6c26f26234e83.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T23:21:06.050

这应该可以解决问题：

```
library(dynlm)
set.seed(771104)
x <- 5 + seq(1, 10, len=100) + rnorm(100)
y <- x + rnorm(100)
model <- dynlm(x ~ y)

par(oma=c(1,1,1,2))
plotModel(x, model) # works with models which accept 'predict' and 'residuals' 
```

这是代码`plotModel`，

```
plotModel =  function(x, model) {
  ymodel1 = range(x, fitted(model), na.rm=TRUE)
  ymodel2 = c(2*ymodel1[1]-ymodel1[2], ymodel1[2])
  yres1   = range(residuals(model), na.rm=TRUE)
  yres2   = c(yres1[1], 2*yres1[2]-yres1[1])
  plot(x, type="l", col="red", lwd=2, ylim=ymodel2, axes=FALSE,
       ylab="", xlab="")
  axis(1)
  mtext("residuals", 1, adj=0.5, line=2.5)
  axis(2, at=pretty(ymodel1))
  mtext("observed/modeled", 2, adj=0.75, line=2.5)
  lines(fitted(model), col="green", lwd=2)
  par(new=TRUE)
  plot(residuals(model), col="blue", type="l", ylim=yres2, axes=FALSE, 
       ylab="", xlab="")
  axis(4, at=pretty(yres1))
  mtext("residuals", 4, adj=0.25, line=2.5)
  abline(h=quantile(residuals(model), probs=c(0.1,0.9)), lty=2, col="gray")
  abline(h=0)
  box()  
} 
```

![在此处输入图像描述](../Images/ec5780f41685783cace34ab5e69eb98a.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T23:18:14.050

你要找的是`resid(model)`. 尝试这个：

```
library(dynlm)
x <- 10+rnorm(100)
y <- 10+rnorm(100)
model <- dynlm(x ~ y)

plot(x, type="l", col="red", ylim=c(min(c(x,y,resid(model))), max(c(x,y,resid(model)))))
lines(y, type="l", col="green")
lines(resid(model), type="l", col="blue") 
```

![在此处输入图像描述](../Images/1b591de543b2de663ed4351f09945cbe.png)

# javascript - 附加 CSS 类

> ID：12699239
> 
> 赞同：0
> 
> 时间：2012-10-02T22:19:34.737
> 
> 标签：javascript, css, class

我有一个标签式导航菜单。我的目标：

1.  一旦用户鼠标悬停选项卡 X。将“tabActive”类添加到选项卡 X，如果选项卡已经具有“tabActive”类，则将其删除
2.  显示分区“X”

我有第二部分，我的 java 代码检测到哪个选项卡被悬停，但我无法正确切换我的附加类。

到目前为止我的代码：

**HTML**

```
<div id="subnav">
<div id="nav1" onmouseover="toggleDisplay('contentPayment')"  class="Payment myNav">
<a href="#">Payment</a></div>
<div id="nav2"  onmouseover="toggleDisplay('content-shipping')" class="Shipping myNav">
<a href="#">Shipping</a></div>
<div id="nav3" class="Warranty myNav">
<a href="#">Warranty</a></div>
<div id="nav4" class="Feedback myNav">
<a href="#">Feedback</a></div>
</div> 
```

**JAVASCRIPT**

```
<script>

var divs = new Array();
divs.push("contentPayment");
divs.push("content-shipping");

function hasClass(element, cls) {
    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
}

function toggleDisplay(id) {
for (var i = 0; i < divs.length; i++) {
    var item = document.getElementById(divs[i]);
    item.style.display = 'none';
}

//Now use the passed ID to show the div you wanted to show
var target = document.getElementById(id);
target.style.display = 'block';

if (id == "contentPayment") {
    var CurrentTab = document.getElementById("nav1");
    var AlreadyActive = hasClass("nav1", " tabActive");

    if (AlreadyActive == true) {
        CurrentTab.className = "Payment myNav";
    } else {

        CurrentTab.className += " " + "tabActive";
    }

}
}

</script>​ 
```

任何想法我的问题是什么？我知道 jQuery 会容易*得多*，但我正在为 eBay 编码，他们不允许这样做。如何让我的 tabActive 类正确切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:23:16.303

不久前，我写了一些 poj add、remove 和类函数。他们看起来像这样：

```
 hasClass: function( element, className ) {
        return ( element.className.search( new RegExp( '(^|\s)' + className + '($|\s)' ) ) !== -1 );
    },
    addClass: function( element, className ) {
        if ( element.className === '' ) {
            element.className = className;
        } else {
            // add class only if element does not already have the class
            if ( this.hasClass( element, className ) === false ) element.className += ' ' + className;
        }
    },
    removeClass: function( element, className ) {
        element.className = element.className.replace( new RegExp( '(^|\s)' + className + '($|\s)' ), ' ' ).replace( /^\s|\s$/, '' );
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:05:15.260

函数有一些错误`toggleDisplay`。我想你想这样做：

```
var divs = new Array();
divs.push("contentPayment");
divs.push("content-shipping");

function toggleDisplay(id) {
    for (var i = 0; i < divs.length; i++) {
        var item = document.getElementById(divs[i]);
        item.style.display = divs[i] == id ? 'block' : 'none';
        item.className = item.className.replace(' tabActive', '');
    }

    var target = document.getElementById(id);
    target.className += " " + "tabActive";
}

function showAllTabs() {
    for (var i = 0; i < divs.length; i++) {
        var item = document.getElementById(divs[i]);
        item.style.display = 'block';
        item.className = item.className.replace(' tabActive', '');
    }
}​ 
```

当鼠标移出该选项卡时，您需要显示所有选项卡，否则您将永远无法将鼠标悬停在隐藏的选项卡上。

```
<div id="subnav">
<div id="contentPayment" onmouseover="toggleDisplay('contentPayment')" onmouseout="showAllTabs()" class="Payment myNav">
<a href="#">Payment</a></div>
<div id="content-shipping"  onmouseover="toggleDisplay('content-shipping')" onmouseout="showAllTabs()" class="Shipping myNav">
<a href="#">Shipping</a></div>
<div id="nav3" class="Warranty myNav">
<a href="#">Warranty</a></div>
<div id="nav4" class="Feedback myNav">
<a href="#">Feedback</a></div>
</div>​​​​​​​​​​​​ 
```

# c# - Windows 服务未安装

> ID：12699240
> 
> 赞同：0
> 
> 时间：2012-10-02T22:19:52.993
> 
> 标签：c#, visual-studio, windows-services

我正在尝试这个演练：

[http://msdn.microsoft.com/en-us/library/ff649818.aspx](http://msdn.microsoft.com/en-us/library/ff649818.aspx)

在第 6 步中，我遇到了使用问题，`Installutil`因此不得不将其复制到`Debug`windows 服务的文件夹中`exe`。现在命令行运行，但服务未安装，我收到以下错误消息。

我从哪里开始发现问题？

![在此处输入图像描述](../Images/b6b9cae9fbe5aaff01d55db663126abb.png)

这是我正在使用的命令行应用程序：

![在此处输入图像描述](../Images/453cef5c8447b70bf36647b5b0e7b178.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:33:02.313

使用 Visual Studio 命令提示符确保 installutil 在您的路径中。

确保以管理员身份运行上述命令。最简单的方法是在开始菜单中找到它，然后右键单击它，然后选择“以管理员身份运行”。最快的方法是按下开始按钮，键入“visual studio 命令提示符”，然后按下 control+shift+enter。

![以管理员身份运行](../Images/5100b4cd1adaeaf7ee3150facb7d39cb.png)

# sql - 使用控制组创建随机版本控制

> ID：12699245
> 
> 赞同：0
> 
> 时间：2012-10-02T22:20:18.857
> 
> 标签：sql

我正在尝试获取一个结果集并将其分成三组不同大小的组。我一直在查看 ntile、rank、row number 但无法弄清楚。

我可以选择前 n%。但是我需要下一个 n%。

我需要分成以下不同大小的组。15%、42.5%、42.5%。创建一个 15% 的对照组和两个版本从剩余的记录中平均分割。

以前的要求是 50-50 拆分，我只是使用带有行号的模数，但不确定这是否也适用。

我可以编写更新语句或存储过程来完成此操作，但我更愿意在查询中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:40:44.900

这个或类似的东西应该这样做：

```
DECLARE @TotalRows float

SELECT @TotalRows = count(*)
 from MyTable

SELECT Col1, Col2, ColEtc, Ranking
  ,case
     when Ranking < @TotalRows * .15 then 1
     when Ranking < @TotalRows * .575 then 2
     else 3
   end  Ranking
 from (select Col1, Col2, ColEtc
         ,row_number() over (order by Col1) Ranking
        from MyTable) xx
 order by xx.Ranking, xx.Col1, xx.Col2 
```

这两个查询可以与 CTE 结合使用，但这似乎过于复杂。您需要检查特定于您的数据的边缘情况。

# ruby - 在 Ruby MongoDB 驱动程序中阻止 findAndModify

> ID：12699246
> 
> 赞同：0
> 
> 时间：2012-10-02T22:20:25.013
> 
> 标签：ruby, mongodb, queue, mongoid

我试图在 MonogDB 中实现这样的目标：

```
require 'base64'
require 'mongo'

class MongoDBQueue

  def enq(thing)
    collection.insert({ payload: Base64.encode64(Marshal.dump(thing))})
  end
  alias :<< :enq

  def deq
    until _r = collection.find_and_modify({ sort: {_id: Mongo::ASCENDING}, remove: true})
      Thread.pass
    end
    return Marshal.load(Base64.decode64(_r["payload"]))
  end
  alias :pop :deq

  private

    def collection
      # database, collection & mongodb index semantics here
    end

end 
```

自然地，我想要一个 Ruby 中的磁盘支持队列，它不会破坏我的可用内存，我将它与 Anemone 网络蜘蛛框架一起使用，默认情况下使用`Queue`该类，有一个可以使用`SizedQueue`该类的 fork，但是当使用a`SizedQueue`对于“页面队列”和“链接队列”，它经常死锁，大概是因为它试图使一个页面出队并处理它，并且它找到了新的链接，这种情况无法调和。

还有一个 Redis 队列的现有实现，但是这也耗尽了我在这台机器上的所有可用内存（可用内存为 16Gb，所以这不是微不足道的）

正因为如此，我想使用这个 MongoDB 后端，但我认为实现很疯狂。感觉就像一个可怕的`Thread.pass`解决方案，但 Anemone 是多线程的，而且 MongoDB 不支持阻塞读取，所以这是一个棘手的情况。

以下是我的参考资料：

*   anemone 的 Redis 队列实现：[https ://github.com/chriskite/anemone/blob/queueadapter/lib/anemone/queue/redis.rb](https://github.com/chriskite/anemone/blob/queueadapter/lib/anemone/queue/redis.rb)

*   MongoDB findAndModify：[http ://www.mongodb.org/display/DOCS/findAndModify+Command](http://www.mongodb.org/display/DOCS/findAndModify+Command)

问题：

*   任何人都可以评论这是多么理智，相比之下`sleep`（这应该触发VM将控制权传递给下一个线程，无论如何，但`sleep`感觉更脏）
*   我应该也许`Thread.pass`和`sleep`？（我猜不是，见上文）
*   我可以从 MongoDB 块中读取吗？这里有人谈论过，但从未谈过任何事情：[https ://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/rqnHNFXaZ0w](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/rqnHNFXaZ0w)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:34:01.090

Kernel.sleep 实际上是一个更好的解决方案，否则您将在那里旋转（尽管在每次查询后将控制权传递给其他线程）。由于 findAndModify 是原子的，因此只有一个线程（即使在 JRuby 上）会承担这项工作，所以我不太明白这里的“阻塞”问题是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:46:11.550

1) MongoDB 中的读取是阻塞的。如果您执行 findOne() 或 findAndModify()，则调用将不会返回，直到数据出现在客户端。如果您执行 find()，则调用不会返回，直到您获得游标：然后您可以根据需要在游标上迭代。

2) 默认情况下，写入 MongoDB 是“一劳永逸”。如果您关心数据完整性，则需要通过在连接、数据库或集合对象中设置 :safe => true 来进行安全写入

# jquery - 将 jQuery 动态数据传递给 GoogleMaps API

> ID：12699247
> 
> 赞同：0
> 
> 时间：2012-10-02T22:20:26.253
> 
> 标签：jquery, google-maps, slider

我有一个简单的 jQuery 滑块，它允许用户在时间尺度上滑动，还有一个嵌入式谷歌地图（API V3）。代码如下所示：

```
<script type="text/javascript">
    // Slider
    $(function() {
           $( "#slider" ).slider({
                value:0,
                min: 0.00,
                max: 24.00,
                step: 1,
                slide: function( event, ui ) {
                  $( "#amount" ).val( ui.value + " hrs");
                }
           });
           $( "#amount" ).val( $( "#slider" ).slider( "value" ) + " hrs" );
    });
</script> 
```

紧随其后的是地图：

```
<script type="text/javascript">
function init() {
    // pass in json data from django
    var json_data = {{ json_data|safe }};

    // custom settings
    ...

    // initialize map 
    var map = new google.maps.Map(document.getElementById("map_canvas"), settings); 

    // create custom markers
    ...

    for (var i = 0; i < json_data.length; i++) {
        ... 
        if ( json_data[i][3] == time) {
        // custom marker logic
        ...
        }; 

    } // end for loop
} // end function         
$(function(){

// initialize map
init();

// get slider value
$("#slider").bind("slide", function(event, ui) {
    var time = ui.value;
});
</script> 
```

希望这很清楚。我基本上错过了这两者之间的胶水。我可以在移动光标时获取滑块的值 ( `var time = ui.value`)，但是如何`time`在移动滑块时将此动态变量传递给 maps 脚本？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:20:28.140

我对您想要实现的目标一无所知，但我可以猜测一下。

```
for (var i = 0; i < json_data.length; i++) {
    ... 
    if ( json_data[i][3] == time) {
    // custom marker logic
    ...
    }; 
} 
```

我相信这是每次触发“幻灯片”事件时都应该调用的代码。

好吧，您只需将这段代码移动到幻灯片处理程序中（在 var time = ui.value; 之后），这样每次都会调用它并且您可以访问 time 变量。init() 函数我相信它只被调用一次，所以它没有用。

此外，我相信您必须从更大的数据集中显示一组自定义标记。为此，请务必遍历较大数据集中的所有标记并调用 setMap(null)，以便在显示合适的标记之前隐藏所有标记。

让我知道这是否是您正在寻找的。

# .htaccess - 使用 htaccess 将 domain.com 重定向到 www.domain.com

> ID：12699251
> 
> 赞同：2
> 
> 时间：2012-10-02T22:20:47.650
> 
> 标签：.htaccess, redirect, rewrite

如何使用 htaccess 重写引擎将“空”子域[http://domain.com](http://domain.com)重定向到[http://www.domain.com 。](http://www.domain.com)它必须是 301 永久重定向，并传达 url 和查询字符串的其余部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T22:29:25.983

尝试将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301] 
```

查询字符串会自动附加。

# c# - C5 通用集合库中的小型集合相对来说非常慢 - 有什么办法吗？

> ID：12699252
> 
> 赞同：4
> 
> 时间：2012-10-02T22:20:49.383
> 
> 标签：c#, performance, collections, containers, c5

我最近一直在用 C# 测试 C5 集合，我很喜欢它们的功能。对于大型集合，性能似乎与通用对应物相当。但是，对于小型集合，它们的速度要慢得多。我怀疑相对速度的急剧下降来自 C5 集合执行的恒定时间操作。我知道的一项操作是触发事件。这可能是小型集合性能不佳的原因吗？可以通过关闭某些功能来解决这个问题吗？这是性能测试：

```
//Two containers to be tested. 'Test' is a wrapper over decimal.
var arrayList = new C5.ArrayList<Test>();
var genericList = new System.Collections.Generic.List<Test>();

var toBeAdded = new List<Test>();
var watch = new Stopwatch();

//Fill both tested containers
for (int i = 10; i > 0; i--)
{
    var test = new Test(i);
    genericList.Add(test);
    arrayList.Add(test);
}

//Fill the container the range of which will be inserted to the tested containers
for (int i = 5; i > 0; i--)
{
    toBeAdded.Add(new Test(i+0.5m));
}

//Test the speed of adding a range of values and sorting for both containers
watch.Start();
genericList.AddRange(toBeAdded);
Console.WriteLine("Adding values for generic list: {0} ticks", watch.ElapsedTicks);
watch.Restart();
genericList.Sort();
Console.WriteLine("Sorting for generic list: {0} ticks", watch.ElapsedTicks);

watch.Restart();
arrayList.AddAll(toBeAdded);
Console.WriteLine("Adding values for C5 ArrayList: {0} ticks", watch.ElapsedTicks);
watch.Restart();
arrayList.Sort();
Console.WriteLine("Sorting for C5 ArrayList: {0} ticks", watch.ElapsedTicks); 
```

和测试类：

```
class Test : IComparable
{
    private decimal _number;
    internal Test(decimal aNumber)
    {
        _number = aNumber;
    }        
    public int CompareTo(object obj)
    {
        var test = (Test) obj;
        return _number.CompareTo(test._number);
    } 
} 
```

输出是：

```
Adding values for generic list: 56 ticks
Sorting for generic list: 770 ticks
Adding values for C5 ArrayList: 3575 ticks
Sorting for C5 ArrayList: 4815 ticks 
```

C5 和测试都是发布版本。大约 60 倍的插入速度和 6 倍的排序速度在测试运行之间的比率是一致的。

编辑：上述测试是从 VS 中运行的。在 VS 之外运行的结果是：

```
Adding values for generic list: 54 ticks
Sorting for generic list: 2135 ticks
Adding values for C5 ArrayList: 5765 ticks
Sorting for C5 ArrayList: 5198 ticks 
```

同样，插入速度约为 100 倍，排序速度约为 2 倍，这在测试运行之间是一致的。

我的项目包括很多小容器的操作，它们的性能是最重要的。C5 容器的功能很棒，我很想使用它们，但目前由于性能原因不能使用。我将不胜感激对此事的任何见解。

EDIT2：根据 Iridium 的回答，我在循环中执行了测试（将包括容器创建在内的整个逻辑放入循环中，以排除任何编译器优化技巧），丢弃前两个结果并平均随后的 1000 个结果。他们来了：

```
Adding values for generic list: 1.09 ticks
Sorting for generic list: 14.07 ticks
Adding values for C5 ArrayList: 1.92 ticks
Sorting for C5 ArrayList: 13.69 ticks 
```

现在 C5 插入速度慢了 76%，并且排序与 List 的排序相当。这对我的目的来说已经足够了。我接受铱星的回答。不过，如果有人对较慢的插入有任何见解，请分享。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T07:51:41.540

我想知道您的结果是否有点误导，并且您在 C5 中看到的差异实际上（可能）是由于首次使用 add/sort 方法时程序集加载/JIT 编译的开销。由于系统程序集已经被加载/NGen'ed，通用集合不会因此受到影响。

我使用 C5 2.1.4596.30350 重复了您的测试，但多次运行整个测试（没有重新启动应用程序以避免任何一次性开销）。结果似乎表明，第一次使用 C5 集合时存在时间损失（与 JIT 编译等一次性开销一致），该时间损失在后续使用中消失，从而使 C5 性能实际上与通用集合的性能相同。

![泛型与 C5 在重复运行中添加和排序的图表]](../Images/76b4b09b5c0bd376d8ca64b28635c0ea.png)

# c# - 尝试使用 JSON.NET 和 DataContractJsonSerializer 反序列化 JSON 失败

> ID：12699257
> 
> 赞同：1
> 
> 时间：2012-10-02T22:21:11.263
> 
> 标签：c#, .net, json, json.net, datacontractserializer

请帮助，我被卡住了。我有一个 WCF 服务，它返回如下内容：

```
{
   "GetDataRESTResult":
     [
       {"Key1":100.0000,"Key2":1,"Key3":"Min"},
       {"Key1":100.0000,"Key2":2,"Key3":"Max"}
     ]
} 
```

我想反序列化它，但无论我使用什么（JSON.NET 或 DataContractJsonSerializer），我都会遇到错误。使用 DataContractJsonSerializer 时，我使用的是代码：

```
byte[] data = Encoding.UTF8.GetBytes(e.Result);
MemoryStream memStream = new MemoryStream(data);
DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(List<DataDC>));
List<DataDC> pricinglist = (List<DataDC>)serializer.ReadObject(memStream); 
```

其中 DataDC 是我从 WCF REST 服务的服务引用中获得的数据合同，我从中获取 JSON 数据，我得到的错误是 InvalidCastException ...

尝试使用 JSON.NET 我得到另一个异常，但我仍然无法弄清楚，有人可以帮忙吗？

编辑这是一个 JSON.NET 堆栈跟踪：

> 无法将当前 JSON 对象（例如 {"name":"value"}）反序列化为类型“System.Collections.Generic.List`1[MyApp.MyServiceReference.DataDC]”，因为该类型需要 JSON 数组（例如 [1, 2,3]) 正确反序列化。要修复此错误，要么将 JSON 更改为 JSON 数组（例如 [1,2,3]），要么将反序列化类型更改为普通的 .NET 类型（例如，不是像整数这样的原始类型，而不是像这样的集合类型可以从 JSON 对象反序列化的数组或列表。JsonObjectAttribute 也可以添加到类型中以强制它从 JSON 对象反序列化。路径“GetDataRESTResult”，第 1 行，位置 23。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T04:05:11.663

> {"GetDataRESTResult":[{"Key1":100.0000,"Key2":1,"Key3":"Min"},{"Key1":100.0000,"Key2":2,"Key3":"Max"}] }

您的数据是一个 JSON 对象（它有一个键“GetDataRESTResult”，其值为 JSON 数组）。因此，您应该反序列化的类型应该是对象，而不是集合。

```
DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(DataDC));
DataDC pricinglist = (DataDC)serializer.ReadObject(memStream); 
```

如果您的类型 DataDC 看起来像这样，它将起作用：

```
public class DataDC
{
    public List<Keys> GetDataRESTResult { get; set; }
}
public class Keys
{
    public double Key1 { get; set; }
    public int Key2 { get; set; }
    public string Key3 { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:25:29.077

下面的代码有效

```
string json = @" {""GetDataRESTResult"":[{""Key1"":100.0000,""Key2"":1,""Key3"":""Min""},{""Key1"":100.0000,""Key2"":2,""Key3"":""Max""}]}";

dynamic dynObj = JsonConvert.DeserializeObject(json);
foreach (var item in dynObj.GetDataRESTResult)
{
    Console.WriteLine("{0} {1} {2}", item.Key1, item.Key3, item.Key3);
} 
```

你也可以使用 Linq

```
var jObj = (JObject)JsonConvert.DeserializeObject(json);
var result = jObj["GetDataRESTResult"]
                .Select(item => new
                {
                    Key1 = (double)item["Key1"],
                    Key2 = (int)item["Key2"],
                    Key3 = (string)item["Key3"],
                })
                .ToList(); 
```

# c# - 处理从服务器到浏览器的时间延迟的最佳方法是什么？

> ID：12699258
> 
> 赞同：0
> 
> 时间：2012-10-02T22:21:13.257
> 
> 标签：c#, javascript, asp.net-mvc

> **可能重复：**
> [如何将 javascript 倒计时与服务器时间同步](https://stackoverflow.com/questions/5357719/how-to-sync-a-javascript-countdown-with-server-time)

我正在将 C# .Net MVC 4 用于应用程序

我有一个服务器端函数，以秒为单位计算“剩余时间”的数量。这个数量被传递给视图有两个目的。1\. 显示它和 2\. 启动一个 javascript setInterval 例程，该例程将倒计时离开客户端的时间。

我注意到计算和 setInterval 倒计时的实际开始之间存在时间延迟。

捕获计算和 setInterval 开始之间的时间量的最佳方法是什么，以便剩余的时间可以被该延迟抵消？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:38:23.957

要计算任意代码运行所需的时间：

```
var start = new Date();

... // arbitrary code;

var timeElapsed = new Date() - start; // time in ms 
```

# java - Hibernate - 在父表和子表中的列上设置过滤

> ID：12699259
> 
> 赞同：2
> 
> 时间：2012-10-02T22:21:14.460
> 
> 标签：java, sql, hibernate, jsf, hibernate-mapping

我有一个`Node`与`NodeData`s 相关的。这些`NodeData`s 有修订，并且 Node 有一列`latestRevision`告诉它哪个是最后一个修订。

我正在尝试找出我需要的映射，以便通过`latestRevision`in过滤下面的集合`Node`。

```
 <class name="Node" table="RatNodes">
    <id name="id">
        <generator class="native"/>
    </id>
    <set fetch="join" name="nodeDatas" table="RatNodeData" inverse="true" access="field" cascade="all-delete-orphan" order-by="dataOrder asc">
        <key column="nodeID" on-delete="cascade"/>
        <one-to-many class="NodeData"/>
        <filter name="revisionFilter" condition="revision = latestRevision"/>
    </set>
    <property name="questionNumber" access="field"/>
    <property name="type" access="field"/>
</class>
<class name="NodeData" table="RatNodeData">
    <composite-id>
        <key-property name="nodeID" access="field"/>
        <key-property name="key" access="field" column="dataKey"/>
        <key-property name="order" access="field" column="dataOrder"/>
        <key-property name="revision" access="field"/>
    </composite-id>
    <property name="value" access="field" type="EncodedStringUserType" column="dataValue"/>
</class> 
```

当我启用过滤器时，这个映射的结果是一个错误：

```
Caused by: com.jnetdirect.jsql.JSQLException: Invalid column name 'latestRevision'. 
```

它吐出的查询是：

```
select nodedatas0_.nodeID as nodeID1_, nodedatas0_.dataKey as dataKey1_, nodedatas0_.dataOrder as dataOrder1_, nodedatas0_.revision as revision1_, nodedatas0_.nodeID as nodeID46_0_, nodedatas0_.dataKey as dataKey46_0_, nodedatas0_.dataOrder as dataOrder46_0_, nodedatas0_.revision as revision46_0_, nodedatas0_.dataValue as dataValue46_0_ from RatNodeData nodedatas0_ where  nodedatas0_.revision = nodedatas0_.latestRevision and nodedatas0_.nodeID=? order by nodedatas0_.dataOrder asc 
```

我可以说这是错误的，因为它正在寻找，`latestRevision`但`NodeData`我不知道如何告诉它寻找`Node`。这在休眠中可能吗？如果我只是使用 SQL，这似乎是一个非常简单的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:56:36.303

最终这样做而不是尝试在映射文件中这样做：

```
List datas = session.createCriteria(NodeData.class)
                .add(Restrictions.eq("nodeID", this.id))
                .add(Restrictions.eq("revision", this.latestRevision))
                .list(); 
```

我不确定这是否是正确的方法。也很想听听映射文件解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:55:18.020

您尚未将任何过滤器或“latestRevision”定义为过滤器参数。所以它不会知道实体的实际含义。尝试使用以下。

如需进一步帮助，请查看[链接](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/filters.html)。

# javascript - 如何将数据添加到数据在父对象的父对象中的 selectAll 占位符？

> ID：12699265
> 
> 赞同：2
> 
> 时间：2012-10-02T22:21:38.620
> 
> 标签：javascript, d3.js

最初，我有一个来自 csv 的平面散列结构，它具有以下字段：

```
zoneId,op,metricName,value 
```

然后我嵌套它

```
d3.nest()
  .key(function(d){return d.zoneId})
  .key(function(d){return d.op})
  .entries(data) 
```

现在它的层次结构看起来像

```
zoneId -> op -> <details> 
```

这是数据的示例

```
nestedData = {
[{
  "key": "zone1",
  "values": [{
    "key": "Get",
    "values": [{
      "zoneId":"zone1"
      "op":"Get"
      "metricName":"CompletionTime",
      "value":"10ms"
    }, {
      "zoneId":"zone1"
      "op":"Get"
      "metricName":"Throughput",
      "value":"100 query/s"
    }]
  },{
    /* Similar to the "values" of last bracket */
    }]
  }]
}, {
  "key": "zone2",
  "values": [
    /* Similar to the "values" of last bracket */
    ]
  }]
}]
} 
```

现在我想从这个嵌套数据结构中构建一个表。

*   每个区域占用一个表
*   每个操作都是一行
*   在每一行
    *   左列是操作名称
    *   右列是格式化版本的指标（例如：“10 ms @ 100 QPS”）

**问题是：**

我应该如何将数据绑定到 <tr> 占位符？由于 <table> 有数据，但当我将它们附加到 <table> 时 <tbody> 没有，而 <tr> 在 <tbody> 下。

```
var tables = d3.select('#perfs .metrics')
          .selectAll('table')
          .data(nestedData)
          .enter().append('table');
/* added tbody and data */
tables.append('tbody')
      .selectAll('tr')
      .data(???).enter()
      .append('tr')
      .selectAll('td')
      .data(function(d){return [d.key,d.value];})   // left and right column
      .enter().append('td')
      .text(function(d){ /* iterate through the metrics and format them */ }) 
```

以下是我能想到的两个解决方案：

*   将数据分配给 tbody（但听起来很 hacky！）
*   访问 this.parentNode.__data__ （听起来也很老套！）

你能给点建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:29:04.843

如果您查看[API](https://github.com/mbostock/d3/wiki/API-Reference)`[selection.append()](https://github.com/mbostock/d3/wiki/Selections#wiki-append)`，它会显示：

> 每个新元素都继承当前元素的数据

换句话说，`<tbody>`默认情况下将具有绑定到`<table>`. 因此，您的代码将是：

```
var metrics = d3.select('#perfs .metrics');
var tables = metrics.selectAll('table').data(nestedData);
tables.enter().append('table');

var tbody = tables.append('tbody');
var rows = tbody.selectAll("tr").data(function(d) { return d.values; });
rows.enter().append("tr");
var cells = rows.selectAll("td").data(function(d) { return d.values; });
cells.enter().append("td")
  .text(function(d){ /* iterate through the metrics and format them */ }); 
```

# c# - 如何以文化感知方式格式化 TimeSpan 的 HH:mm:ss 分隔符？

> ID：12699273
> 
> 赞同：10
> 
> 时间：2012-10-02T22:22:28.997
> 
> 标签：c#, c#-4.0, datetime, globalization, cultureinfo

我正在开发一个可以在世界上许多国家看到的应用程序。显示小时、分钟和秒的国家不多，除了 : 作为分隔符，但有一些国家，我想确保时间格式正确，适合他们所在的地区。DateTime 在这方面做得很好，但 TimeSpan 不是。这些片段来自我在 Visual Studio 2010 中使用 .Net 4 的即时窗口，我的区域设置为马拉雅拉姆语（印度）。dateTime.Now 调用还反映了我的时钟、Microsoft Outlook 和其他区域的时间显示方式。

```
DateTime.Now.ToString()
"02-10-12 17.00.58" 
```

[http://msdn.microsoft.com/en-us/library/dd784379.aspx](http://msdn.microsoft.com/en-us/library/dd784379.aspx)说“如果 formatProvider 为 null，则使用与当前区域性关联的 DateTimeFormatInfo 对象。如果 format 是自定义格式字符串，则 formatProvider 参数被忽略。” 按理说，我什至不需要传入当前 CultureInfo。我在这里想要的格式是 hh.mm.ss 但在大多数其他语言中显然是 hh:mm:ss，如果还有其他可能性，它也应该自动反映这些 - 基本上 TimeSpan*应该*是文化感知的，就像 DateTime是。

然而：

```
timeRemaining.ToString()
"00:02:09"
timeRemaining.ToString("c")
"00:02:09"
timeRemaining.ToString("c", CultureInfo.CurrentCulture)
"00:02:09"
timeRemaining.ToString("g")
"0:02:09"
timeRemaining.ToString("G")
"0:00:02:09.0000000"
timeRemaining.ToString("t")
"00:02:09"
timeRemaining.ToString("g", CultureInfo.CurrentCulture)
"0:02:09"
timeRemaining.ToString("g", CultureInfo.CurrentUICulture)
"0:02:09"
timeRemaining.ToString("G", CultureInfo.CurrentUICulture)
"0:00:02:09.0000000"
timeRemaining.ToString("G", CultureInfo.CurrentCulture)
"0:00:02:09.0000000"
timeRemaining.ToString("t", CultureInfo.CurrentCulture)
"00:02:09" 
```

我正在寻找一个简单的单行来以文化感知的方式输出 timeSpan。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T22:53:23.583

看起来像一个错误，您可以在 connect.microsoft.com 上报告它。同时，一种解决方法是利用 DateTime 格式。像这样：

```
using System;
using System.Globalization;

class Program {
    static void Main(string[] args) {
        var ci = CultureInfo.GetCultureInfo("ml-IN");
        System.Threading.Thread.CurrentThread.CurrentCulture = ci;
        var ts = new TimeSpan(0, 2, 9);
        var dt = new DateTime(Math.Abs(ts.Ticks));
        Console.WriteLine(dt.ToString("HH:mm:ss"));
        Console.ReadLine();
    }
} 
```

输出：

> 09.02.09

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-08T10:40:02.843

这更像是一个评论，但需要一些空间，所以我把它写成一个答案。

虽然 .NET 中的字符串格式`DateTime`已经存在很长时间了，`TimeSpan`但 .NET 4.0 (Visual Studio 2010) 中的格式是新的。

文化有一个`DateTimeFormatInfo`对象，该对象由使用`DateTime`并包含有关是否使用冒号`:`或句`.`点或其他小时、分钟和秒之间的其他内容的信息。现在，`TimeSpan`似乎没有使用这个`DateTimeFormatInfo`对象，并且没有什么叫做“TimeSpanFormatInfo”。

这是一个例子：

```
// we start from a non-read-only invariant culture
Thread.CurrentThread.CurrentCulture = new CultureInfo("");

// change time separator of DateTime format info of the culture
CultureInfo.CurrentCulture.DateTimeFormat.TimeSeparator = "<-->";

var dt = new DateTime(2013, 7, 8, 13, 14, 15);
Console.WriteLine(dt);  // writes "07/08/2013 13<-->14<-->15"

var ts = new TimeSpan(13, 14, 15);
Console.WriteLine(ts);  // writes "13:14:15" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-30T14:07:13.560

> 我正在寻找一个简单的单行来以文化感知的方式输出 timeSpan。

然后我认为您最好使用该`DateTime`课程为您进行格式化：

```
string display = new DateTime(timespan.Ticks).ToLongTimeString(); 
```

假设它`timespan`的持续时间在 0 到 24 小时之间。

# sh - sh 脚本中的布尔表达式

> ID：12699275
> 
> 赞同：0
> 
> 时间：2012-10-02T22:22:42.460
> 
> 标签：sh, boolean-expression

我有这个简单的脚本，它不会运行，因为`if [ ... ]` 有人可以告诉我这有什么问题吗？

```
#! /bin/sh
if [ $# -ne 2 AND $# -ne 3 ]
then
    echo "Usage $0 <input> <output> [<comment>]"
    exit 1
fi; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:24:12.423

尝试以下操作：

```
#! /bin/sh
if [ $# -ne 2 -a $# -ne 3 ]
then
    echo >&2 "Usage $0 <input> <output> [<comment>]"
    exit 1
fi 
```

或者 ：

```
#! /bin/sh
if [ $# -ne 2 ] && [ $# -ne 3 ]
then
    echo >&2 "Usage $0 <input> <output> [<comment>]"
    exit 1
fi 
```

如果您想使用 bash ：

```
#! /bin/bash
if [[ $# -ne 2 && $# -ne 3 ]]
then
    echo >&2 "Usage $0 <input> <output> [<comment>]"
    exit 1
fi 
```

# objective-c - 返回两个矩形交集的方法

> ID：12699277
> 
> 赞同：0
> 
> 时间：2012-10-02T22:22:54.083
> 
> 标签：objective-c

我是编程和objective-c的新手（所以我可能会离开这里），我正在通过objective c第4版教科书进行编程，并且已经陷入其中一个练习。

谁能告诉下面的方法有什么问题？在我的程序中有一个矩形类，它具有设置它的宽度、高度和原点的方法（来自一个名为 XYPoint 的类）。

containsPoint 方法检查一个矩形的原点是否在另一个矩形内。当我测试此方法时，即使矩形确实包含该点，它也总是返回“否”。

intersects 方法将一个矩形作为参数 (aRect) 并在 if 语句中使用 containsPoint 方法来检查它是否与接收方相交，如果相交，则返回一个矩形，该矩形的原点位于相交处并具有正确的宽度和高度。

```
-(BOOL) containsPoint:(XYPoint *) aPoint
{
//create two variables to be used within the method 
float upperX, upperY;

//assign them values, add the height and width to the origin values to range which the XYPoint must fall into 
upperX = origin.x + height;
upperY = origin.y + width;    

//if the value of aPoint's x and y points fall between the object's origin and the upperX or upperY values then the rectangle must contain the XYPoint and a message is sent to NSLog

if ((aPoint.x >= origin.x) && (aPoint.x <= upperX) && (aPoint.y >= origin.y) && (aPoint.y <= upperY) ) 
{
    NSLog(@"Contains point");
    return YES;

}

else
{
    NSLog(@"Does not contain point");
    return NO;

}

}

-(Rectangle *) intersects: (Rectangle *) aRect
{
//create new  variables, Rectangle and XYPoint objects to use within the method
Rectangle *intersectRect = [[Rectangle alloc] init];
XYPoint *aRectOrigin = [[XYPoint alloc] init];
float wi, he;   //create some variables

if ([self containsPoint:aRect.origin]) {     //send the containsPoint method to self to test if the intersect
    [aRectOrigin setX:aRect.origin.x andY:origin.y];   //set the origin for the new intersecting rectangle
    [intersectRect setOrigin:aRectOrigin];
    wi = (origin.x + width) - aRect.origin.x;   //determine the width of the intersecting rectangle
    he = (origin.y + height) - aRect.origin.y;  //determine the height of the intersecting rectangle
    [intersectRect setWidth:wi andHeight:he];   //set the rectangle's width and height

    NSLog(@"The shapes intersect");
    return intersectRect;
}

//if the test returned NO then send back these values
else {
    [intersectRect setWidth:0\. andHeight:0.];
    [aRectOrigin setX:0\. andY:0.];
    [intersectRect setOrigin:aRectOrigin];

    NSLog(@"The shapes do not intersect");
    return intersectRect;
}
} 
```

当我使用以下代码进行测试时

```
 int main (int argc, char * argv [])
{
    @autoreleasepool {

        Rectangle *aRectangle = [[Rectangle alloc] init];
        Rectangle *bRectangle = [[Rectangle alloc] init];
        Rectangle *intersectRectangle = [[Rectangle alloc] init];
        XYPoint *aPoint = [[XYPoint alloc] init];
        XYPoint *bPoint = [[XYPoint alloc] init];

        [aPoint setX:200.0 andY:420.00];
        [bPoint setX:400.0 andY:300.0];

        [aRectangle setWidth:250.00 andHeight:75.00];
        [aRectangle setOrigin:aPoint];

        [bRectangle setWidth:100.00 andHeight:180.00];
        [bRectangle setOrigin:bPoint];    

        printf("Are the points within the rectangle's borders?  ");  
        [aRectangle containsPoint: bPoint] ? printf("YES\n") : printf("NO\n");  
        intersectRectangle = [aRectangle intersects:bRectangle];

}
    return 0;   
} 
```

我得到以下输出

```
Contains point  
The origin is at 0.000000,0.000000, the width is 250.000000 and the height is 75.000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T04:51:56.803

这是代码（我目前正在使用 Stephen Kochan 的“Objective-C 第 5 版编程”），根据您的变量和语法判断，看起来您也是。

```
 // Use Floats for XYPoint and Rectangular exercise 8.4 on pg. 166 
```

# 导入“矩形.h”

# 导入“XYPoint.h”

int main(int argc, const char * argv[]) {

```
@autoreleasepool {
    Rectangle *myRect = [[Rectangle alloc] init];
    Rectangle *yourRect = [[Rectangle alloc] init];
    XYPoint   *myPoint = [[XYPoint alloc] init];
    XYPoint   *yourPoint = [[XYPoint alloc] init];

    // For first Rectangle set w, h, origin
    [myRect setWidth:250 andHeight:75];
    [myPoint setX:200 andY:420];
    myRect.origin = myPoint;

    // Second Rectangle
    [yourRect setWidth:100 andHeight:180];
    [yourPoint setX:400 andY:300];
    yourRect.origin = yourPoint;

    // Find Points of intersection
    float x1, x2, y1, y2;
    x1 = MAX(myRect.origin.x, yourRect.origin.x);
    x2 = MIN(myRect.origin.x + myRect.width, yourRect.origin.x + yourRect.width);
    y1 = MAX(myRect.origin.y, yourRect.origin.y);
    y2 = MIN(myRect.origin.y + myRect.height, yourRect.origin.y + yourRect.height);

    // Make Intersecting Rectangle
    Rectangle *intrRect = [[Rectangle alloc] init];
    [intrRect setWidth: abs(x2 - x1) andHeight: abs(y2 - y1)];

    // Print Intersecting Rectangle's infor for a check
    NSLog(@"Width = %g, Height = %g, Bottom point = (%g, %g), Top point = (%g, %g)", intrRect.width, intrRect.height, x1, y1, x2, y2);

}
return 0; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:31:42.237

为什么不直接使用包含的函数来确定交叉点和/或包含：

```
if (CGRectContainsPoint(CGRect rect, CGPoint point))
{
    // Contains point...
} 
```

或者

```
if (CGRectIntersectsRect(CGRect rectOne, CGRect rectTwo))
{
    // Rects intersect...
} 
```

或者

```
if (CGRectContainsRect(CGRect rectOne, CGRect rectTwo))
{
    // RectOne contains rectTwo...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:26:08.840

您在几何和 Objective-C 中都犯了许多错误，但这就是您学习的方式！

1.  几何：两个矩形相交一个的原点不需要在另一个的区域内。您的两个矩形相交，但交点不包含任何一个原点。所以你`containsPoint:`会回来的`NO`。
2.  只有在创建对象时才分配对象，而不是在您调用的代码创建并返回它们时分配。因此，您的分配`Rectangle *intersectRectangle = [[Rectangle alloc] init];`创建了一个对象，然后您的分配将其丢弃`intersectRectangle = [aRectangle intersects:bRectangle];`
3.  对于诸如此类的简单类，通常创建`init`设置属性的方法，因为创建对象而不设置属性是没有用的。例如，对于您的`XYPoint`班级，您通常会有一个初始化方法`- (id) initWithX:(float)x andY:(float)y;`。然后，您可以`[[XYPoint alloc] initWithX:200.0 andY:420.0]]`一次性创建和初始化。
4.  *正如您正在试验的那样，这并不重要，但在具有值语义*的非常简单和小类的实际代码中- 这意味着它们的行为很像整数和浮点数 - 通常使用结构 ( `struct`) 和函数而不是对象和方法。查找`NSRect`和`NSPoint`作为示例的定义。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-22T11:50:18.010

```
 //intersect function
 -(Rectangle *)intersect:(Rectangle *)secondRec
 {
 int intersectRectWidth;
 int intersectRectHeight;
 int intersectRectOriginX;
 int intersectRectOriginY;
 Rectangle * intersectRec =[[Rectangle alloc]init];
 intersectRectOriginX = MAX(self.origin.x,secondRec.origin.x);

 intersectRectOriginY = MAX((self.origin.y) , (secondRec.origin.y));
int myWidth=self.width+self.origin.x;
int secondRecWidth=secondRec.width+secondRec.origin.x;
int tempWidth=secondRecWidth - myWidth;
if (tempWidth > 0) {
    intersectRectWidth=secondRec.width - tempWidth;
}
else
{
    tempWidth=abs(tempWidth);
    intersectRectWidth = self.width - tempWidth;
}

//height
int myHeight=self.height+self.origin.y;
int secondRecHeight=secondRec.height +secondRec.origin.y;
int tempHeight=secondRecHeight - myHeight;
if (tempHeight > 0) {
    intersectRectHeight=secondRec.height - tempHeight;
}
else
{
    tempHeight=abs(tempHeight);
    intersectRectHeight = self.height - tempHeight;
}
intersectRec.width=intersectRectWidth;
intersectRec.height=intersectRectHeight;
XYPoint * intersectOrigin =[[XYPoint alloc]init];
[intersectOrigin setX:intersectRectOriginX andY:intersectRectOriginY];
[intersectRec setOrigin:intersectOrigin];
return intersectRec; 
```

}

```
 //main
    XYPoint * org1=[[XYPoint alloc]init];
    XYPoint * org2=[[XYPoint alloc]init];
    Rectangle * firstRec=[[Rectangle alloc]init];
    Rectangle * secondRec=[[Rectangle alloc]init];
    Rectangle * intersectRec=[[Rectangle alloc]init];
    [org1 setX:400 andY:300];
    [org2 setX:200 andY:420];
    [firstRec setOrigin:org1];
    [secondRec setOrigin:org2];
    [firstRec setWidth:100 andHeight:180];
    [secondRec setWidth:250 andHeight:75];
    intersectRec=[firstRec intersect:secondRec];
    NSLog(@"intersect rectangle origin.x= %i origin.y=%i width=%i height=%i",intersectRec.origin.x,intersectRec.origin.y,intersectRec.width,intersectRec.height); 
```

# jquery - jQuery - 排除某些输入的 if 语句

> ID：12699283
> 
> 赞同：0
> 
> 时间：2012-10-02T22:23:40.183
> 
> 标签：jquery, if-statement

我的 if 语句有问题，但我无法正确获取代码。

我`divs`在一个带有表单元素的页面上有多个。我有一个重置按钮，可以清除所有输入字段，`.val(" ")`但我需要以`input[type=button]`某种方式排除。

我对 if 语句知之甚少，而且格式肯定在某处出错。

```
<!-- Reset only current div -->
$('.reset_form').live('click', function() {
    $(this).parents("div.menu_creation_form").find("input").val('');
    if () {
        $(this).parents("div.menu_creation_form").find("input[type=button]").val();
    }
    else() {
        // do nothing
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:25:25.730

您只能使用相同类型的[属性选择器](http://api.jquery.com/multiple-attribute-selector/)选择文本输入：

```
$(this).parents("div.menu_creation_form").find("input[type=text]").val(''); 
```

`type`但是，如果您没有将属性显式设置为等于，这将不起作用`text`。如果您不使用 type 属性，则将使用默认值并呈现一个文本框，但此选择不会找到它。为了解决这个问题，您可以使用`:text`选择器：

```
$(this).parents("div.menu_creation_form").find("input:text").val(''); 
```

不过，我认为后一种方法要慢一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:28:01.080

你首先不需要 if-else ..试试这个

```
 $(this).parents("div.menu_creation_form").find("input:not([type=button])").val(''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:28:48.280

HTML：

```
<div class="menu_creation_form">
    <input type="button" value="Clear" class="reset_form" />
    <input type="text" value="Jim" />
</div> 
```

​jQuery：

```
​$('.reset_form').click(function() {
    $('input').not('[type="button"]').val('');
});​​​​​​​​​​​​​ 
```

小提琴：http: [//jsfiddle.net/gromer/kuu26/1/](http://jsfiddle.net/gromer/kuu26/1/)

关键是使用[`.not`](http://api.jquery.com/not/). `if`根本不需要。

# iphone - 使用无效参数调用“setRegion”时，iOS 6 Map 崩溃

> ID：12699284
> 
> 赞同：1
> 
> 时间：2012-10-02T22:23:42.693
> 
> 标签：iphone, objective-c

刚刚遇到这个 iOS 6 特有的奇怪问题。我使用以下代码在 iPhone 地图中固定一组给定的地址，它在 iOs 4 和 5 上运行良好。但是在 iOS 6 上运行时崩溃，如下所示堆栈跟踪，

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Invalid Region <center:+0.00000000, +0.00000000 span:+177.61462012, +900.00000000>'`

我使用的代码很简单，

`CLLocationCoordinate2D topLeftCoord; topLeftCoord.latitude = -90; topLeftCoord.longitude = 180;

```
CLLocationCoordinate2D bottomRightCoord; 
bottomRightCoord.latitude = 90; 
bottomRightCoord.longitude = -180; 

for (id<MKAnnotation> annotation in self.mapView.annotations) { 
    topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude); 
    topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude); 
    bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude); 
    bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude); 
}
region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.5;
region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.5;

region = [self.mapView regionThatFits:region];
[self.mapView setRegion:region animated:YES]; 
```

`

所以问题显然在于计算 longitudeDelta 我相信因为它试图访问错误的经度 +900.000。因此，我改变了

上面的代码

`region.span.latitudeDelta= self.mapView.region.span.latitudeDelta /2.0002; region.span.longitudeDelta= self.mapView.region.span.longitudeDelta /2.0002;`

崩溃得到解决，但地图指向世界上不同的位置。希望大家能对此有所了解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T14:07:55.830

我想你明白了：

> “问题显然在于计算 longitudeDelta ”

我经历过同样的事情，我所做的很简单：

```
-(void)myFunction
{
    MKCoordinateRegion region;
    region.span.longitudeDelta = 10;
    region.center = CLLocationCoordinate2DMake(46, 2);
    [map setRegion:region];
} 
```

**它在第 2 次或第 3 次调用后崩溃`myFunction`**，但是当我使用`latitudeDelta`而不是时`longitudeDelta`，**它可以完美运行**。

此外，崩溃日志是：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException',
    reason: 'Invalid Region <center:+46.00000000, +2.00000000 span:-1.99143220, +10.00000000>' 
```

这让我觉得这处`longitudeDelta`房产很糟糕。

PS：不需要设置 longitudeDelta 和 latitudeDelta 因为**longitudeDelta = f(latitudeDelta)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T14:51:56.050

当然会崩溃。

1.  当只有 1
2.  当只有 n 个相同位置的注解时

只需考虑这些情况并有一个备份区域，因为在这种情况下算法会失败。

例如

```
if(noAnnotation) setRegion: world
if(annotationCount < 2) setRegion: region for annotation1 (with a span of e.g. 0,05/0,05)
else 
    ... Do the algo
    if longitudeDelta == 0 setRegion: region for annotation1 (with a span of e.g. 0,05/0,05)
    Else setRegion: like you do now 
```

# php - 如何获取选定单选按钮的值

> ID：12699288
> 
> 赞同：2
> 
> 时间：2012-10-02T22:23:53.267
> 
> 标签：php, forms

如何获取所选单选按钮的值。将其用作绘制矩形（或圆形）的坐标。最终我想为相同目的获得所有答案的平均值。

这是我的html表单的代码：

```
<form id="FormName" action="draw.php" method="get" name="FormName">

  <table border="3">
    <tr>
      <td><span class="hiddenDiv"> Here is my question </span>
      </td>
      <td><span class="hiddenDiv">
            <input type = "radio"  name = "g1" id="g1q1"  value = "-3"  />
            </span>
      </td>
      <td><span class="hiddenDiv">
              <input type = "radio"  name = "g1" id="g1q2"  value = "-2" />
            </span>
      </td>
      <td><span class="hiddenDiv">
              <input type = "radio"  name = "g1" id="g1q3"  value = "-1" />
            </span>
      </td>
      <td><span class="hiddenDiv">
              <input  name = "g1" type = "radio" id="g1q4"  value = "0" />
            </span>
      </td>
      <td><span class="hiddenDiv">
              <input type = "radio"  name = "g1" id="g1q5"  value = "1" />
            </span>
      </td>
      <td><span class="hiddenDiv">
              <input type = "radio"  name = "g1" id="g1q6"  value = "2" />
            </span>
      </td>
      <td><span class="hiddenDiv">
              <input type = "radio"  name = "g1" id="g1q7"  value = "3" />
            </span>
      </td>
    </tr>
</form>
```

这是我正在尝试使用的 draw.php。

```
<?php  
    // Create a 55x30 image
    $im = imagecreatetruecolor(620, 620);
    $white = imagecolorallocate($im, 255, 255, 255);
    $black = imagecolorallocate($im, 130, 130, 130);
    $red = imagecolorallocate($im, 255, 0, 0);
    $answer = 'g1q1';
     //$rrr = $('input[name=g1]:checked','FormName');

    // Draw a white rectangle
    imagefilledrectangle($im, 0, 0, 620, 620, $white);
    imagefilledrectangle($im, 24,  24, 600, 600, $black);
    imageline($im, 0, 310, 620, 310, $white);
    imageline($im, 310, 0, 310, 620, $white);
    imagefilledrectangle($im, $answer*12, $answer*12, $answer*12+12, $answer*12+12, $red);
    //imagefilledellipse 
    // Save the image
    imagepng($im, './imagefilledrectangle.png');
    imagedestroy($im);

    //Get the file
    $content = file_get_contents('./imagefilledrectangle.png');

    echo '<img src="'.$snippet_theme.'./imagefilledrectangle.png" />'; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:26:32.360

您正在使用 GET，所以它很简单

```
$val = $_GET['g1']; 
```

对于 POST，它将是`$_POST[<name>]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:27:26.320

In php, to get that code you could add a submit button then you get the values through `$_POST`

example: `$_POST['g1']`

# scala - 接受多种类型和数量的参数scala

> ID：12699294
> 
> 赞同：1
> 
> 时间：2012-10-02T22:24:17.793
> 
> 标签：scala, types, parameters, constructor

我正在开发的程序中有类似于以下代码（仅带有更多参数）的内容：

```
class Particle {
   //variables
   def this(position: Position2D, velocity: Vector2D) = {
   this()
   //constructors
   }

   def this(xPos: Double, yPos: Double, magnitude: Double, angle: Double) = {
   this(new Position2D(xPos, yPos), new Vector2D(magnitude, angle))
   }
} 
```

而且我想让程序能够接受第一个参数的`Position2D`对象和`Doubles`第二个参数的两个对象，或者第一个参数的两个对象和^(第二)`Doubles`个参数的`Vector2D`对象，而无需为每个组合创建更多语句的参数。我知道可以使用类似的东西：^(`this`)

```
def this(posObj: Either[Position2D, Array[Double]], velObj: Either[Vector2D, Array[Double]]) = {...} 
```

然后测试看看是什么类型`posObj`和`velObj`是什么；但是，我很好奇是否有一种方法可以做到这一点，而不需要 的^(第二)部分`Either`只是一个项目，例如 an `Array`，这样您就可以`Particle`像下面这样初始化：

```
val a = new Particle(new Position(3, 6), 30, 5)
val b = new Particle(3, 6, new Vector2D(30, 5))
val c = new Particle(new Position(3, 6), new Vector2D(30, 5))
val d = new Particle(3, 6, 30, 5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:35:06.687

简短的回答是否定的，构造函数是严格的，因为方法（或本例中的构造函数）的参数数量（假设您不希望它们出现在 Seq 中）必须非常具体。

可能通过将裸对包含在 Tuple2 中并创建一个类型类实例来解包每个这将是可能的，但这将比仅添加构造函数复杂一个数量级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T00:02:36.097

一个可能的解决方案是在构造函数中使用 2 个参数列表创建您的类，一个采用 the `Position2D`，一个采用 the `Vector2D`，然后从`Tuple2`它们创建隐式转换：

```
case class Vector2D(x: Double, y: Double)
case class Position2D(x: Double, y: Double)

implicit def tuple2Vector2D(t: (Double,Double)): Vector2D = Vector2D(t._1, t._2)
implicit def tuple2Position2D(t: (Double,Double)): Position2D = Position2D(t._1, t._2)

class Particle(val v: Vector2D)(val p: Position2D)

scala> new Particle(1.1,3.1)(6.1,0.3)
res15: Particle = Particle@15a74f84

scala> new Particle(new Vector2D(1.1,3.1))(6.1,0.3)
res16: Particle = Particle@47283198

scala> new Particle(1.1,3.1)(new Position2D(6.1,0.3))
res17: Particle = Particle@2571e404

scala> new Particle(new Vector2D(1.1,3.1))(new Position2D(6.1,0.3))
res18: Particle = Particle@38be7bc0 
```

# django - Django 1.4 mod_wsgi - 403 禁止，访问/拒绝

> ID：12699297
> 
> 赞同：0
> 
> 时间：2012-10-02T22:24:41.417
> 
> 标签：django, mod-wsgi

我浪费了大约 3 天时间试图让 apache 与 django 一起工作并且非常沮丧。我读了

[https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/)

[http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)

链接之间的配置不同，我怀疑它们现在有点过时了 django 1.4 我在 apache 日志中面临的错误是

> (13)Permission denied：访问/拒绝

# 环境：

蟒蛇 2.62

Windows Azure 上的 Centos 6.2

阿帕奇/2.2.15

姜戈 1.4

# 路径：

/home/craig/django/myproject/myproject/wsgi.py

# 权限：

/home/：drwxrwxr-x

/home/craig/：drwxrwxr-x

/home/craig/django/：drwxrwxr-x

/home/craig/django/myproject/：drwxrwxr-x

/home/craig/django/myproject/myproject/：drwxrwxr-x

/home/craig/django/myproject/myproject/wsgi.py:-rw-r--r--

# http.conf：

```
DocumentRoot "/var/www/html"

<Directory /> 
Options FollowSymLinks
AllowOverride All
</Directory>

<Directory /home/craig/django/myproject/myproject>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory>

WSGIScriptAlias / /home/craig/django/myproject/myproject/wsgi.py
WSGIPythonPath /home/craig/django/myproject

<VirtualHost *:80>
ServerName myserver.domain.net
</VirtualHost> 
```

# wsgi.py

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:03:44.043

当我从 Django 1.3 升级到 1.4 时，我使用了守护进程（我没有使用旧版本的 Django）。这对我有用的 Django 1.4`wsgi.py`文件由`createprojet`. 这是我的一个配置的简化版本：

```
Listen 8091

<VirtualHost 127.0.0.1:8091>

  ServerAdmin admin@foobar.com
  ServerName foobar.com

  # Django 1.4 project and virtualenv
  WSGIDaemonProcess foobar python-path=/home/micah/www/foobar.com/foobar:/home/micah/www/foobar.com/venv/lib/python2.6/site-packages
  WSGIProcessGroup foobar
  WSGIScriptAlias / /home/micah/www/foobar.com/foobar/foobar/wsgi.py

</VirtualHost> 
```

我应该注意到 Apache 在 Nginx 代理后面（因此是虚拟主机的 IP 地址）并且我使用的是虚拟环境（因此是`python-path`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:55:44.280

通过运行以下命令禁用 SELINUX 可以立即解决此问题： setenforce 0

这可能不是最佳实践，但出于开发目的，它为我完成了工作

# c# - C# 应用程序中的 System.ArgumentOutOfRangeException

> ID：12699298
> 
> 赞同：1
> 
> 时间：2012-10-02T22:24:42.770
> 
> 标签：c#, indexing

我已经实现了 Cuong 在这里建议的解决方案： [C# Processing Fixed Width Files](https://stackoverflow.com/questions/12543223/c-sharp-processing-fixed-width-files)

我还让它通过一个文件夹并将其应用于该文件夹中的所有 .txt 文件。

一切正常，但对于某些 .txt 文件，它在 var csvLines 上失败，并出现以下错误：

```
{"Index and length must refer to a location within the string.\r\nParameter name: length"}

A first chance exception of type 'System.ArgumentOutOfRangeException' occurred in mscorlib.dll
System.ArgumentOutOfRangeException: Index and length must refer to a location within the string.
Parameter name: length
   at System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy)
   at System.String.Substring(Int32 startIndex, Int32 length)
   at FixedWidthFiles.Main.<>c__DisplayClass11.<>c__DisplayClass13.<buttonProcessAllFiles_Click>b__d(KeyValuePair`2 pair) in \\GBMACCMPFS11\Shhk$\Visual Studio 2010\Projects\FixedWidthFiles\FixedWidthFiles\Main.cs:line 138
   at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   at System.String.Join(String separator, IEnumerable`1 values)
   at FixedWidthFiles.Main.<>c__DisplayClass11.<buttonProcessAllFiles_Click>b__c(String line) in \\GBMACCMPFS11\Shhk$\Visual Studio 2010\Projects\FixedWidthFiles\FixedWidthFiles\Main.cs:line 137
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.IO.File.InternalWriteAllLines(TextWriter writer, IEnumerable`1 contents)
   at System.IO.File.WriteAllLines(String path, IEnumerable`1 contents)
   at FixedWidthFiles.Main.buttonProcessAllFiles_Click(Object sender, EventArgs e) in \\GBMACCMPFS11\Shhk$\Visual Studio 2010\Projects\FixedWidthFiles\FixedWidthFiles\Main.cs:line 140 
```

知道有什么问题吗？它可能是文件，但我希望可以在代码中更正/改进一些东西:)

* * *

代码是这样的：

```
private void buttonProcessAllFiles_Click(object sender, EventArgs e)
{
    if (fileFolderPath == "")
    {
        MessageBox.Show("Load Folder First", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);

    }
    else
    {
        int count = 0;
        //foreach (var file in Directory.GetFiles(fileFolderPath, "*.txt", SearchOption.AllDirectories))
        foreach (var file in Directory.GetFiles(fileFolderPath, "*.txt"))
        {
            count++;
            System.Diagnostics.Debug.WriteLine(count);
            fileFolderFull = Path.GetFullPath(file);
            System.Diagnostics.Debug.WriteLine(fileFolderFull);
            fileFolderName = Path.GetFileNameWithoutExtension(file);
            System.Diagnostics.Debug.WriteLine(fileFolderName);

            //MessageBox.Show("Full Folder: " + fileFolderFull);
            //MessageBox.Show("File Name: " + fileFolderName);

            var lines = File.ReadAllLines(fileFolderFull);

            var widthList = lines.First().GroupBy(c => c)
                                         .Select(g => g.Count())
                                         .ToList();

            var list = new List<KeyValuePair<int, int>>();

            int startIndex = 0;

            for (int i = 0; i < widthList.Count(); i++)
            {
                var pair = new KeyValuePair<int, int>(startIndex, widthList[i]);
                list.Add(pair);

                startIndex += widthList[i];
            }

            try
            {
                var csvLines = lines.Select(line => string.Join(",",
                                    list.Select(pair => line.Substring(pair.Key, pair.Value))));

                File.WriteAllLines(fileFolderPath + "\\" + fileFolderName + ".csv", csvLines);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine(ex);
            } 
        }

        MessageBox.Show("File Saved", "Completed", MessageBoxButtons.OK, MessageBoxIcon.Information);
    }
} 
```

错误所在的行是：

```
var csvLines = lines.Select(line => string.Join(",",
                                        list.Select(pair => line.Substring(pair.Key, pair.Value)))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:27:42.830

通读堆栈跟踪。第一个有趣的位置是：

```
Visual Studio 2010\Projects\FixedWidthFiles\FixedWidthFiles\Main.cs:line 138 
```

这是您的文件，带有您的代码。例外情况是，您正在从大于字符串大小的索引中读取字符串。这一切都表明您的代码中存在错误。转到该文件并分析该行。一旦您考虑到这一点并且不知道为什么该位置的索引可能超出范围，请复制该代码以及周围的一些代码，然后将其发布在此处。仅凭该堆栈跟踪就很难说出更多信息。

编辑：您已经添加了代码，太酷了！

由于它在子字符串中肯定失败，请查看子字符串作为索引的内容：它是对的值。该值来自列宽的增量总和，因此很可能您的一个输入文件只是有一行...太短了。检查文件开头或结尾的虚假空行！

您必须删除这些行的文件，或者针对它修复代码：不要盲目地调用子字符串，而是使用 if 或 Math.min 保护它：

```
str.Substring(
    Math.Min(str.Length, pair.Key), // here it MAY be needed a str.Length-1 instead!
    Math.Min(Math.Max(0,str.Length-pair.Key), pair.Value)
) 
```

这样，对于所有太短的行，field-cutter 将返回空字符串。请注意，最好保护两个参数，并且值得检查 Length-StartIndex 是否为负数，因为它们 StartIndex 可能大于空行的长度:)

顺便提一句。通过 StartIndex，我当然是指 pair.Key..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:30:57.793

我认为它在 Substring 方法上失败了。您可以添加检查 line.Length > (pair.Key + pair.Value) 吗？

# .htaccess - 如何为动态域创建动态子域

> ID：12699299
> 
> 赞同：0
> 
> 时间：2012-10-02T22:24:43.717
> 
> 标签：.htaccess

在我目前正在工作的应用程序中，我需要动态创建子域。如果我知道我需要重定向到的域是什么，那将是非常微不足道的。关键是我可以有很多域指向同一个服务器，每个域可能有很多子域，我想要一个可以处理它的 htaccess。

例如：domain1.com、domain1.com.br、domain2.com、domain2.co.uk 都可以指向我的服务器。当用户尝试访问 sub.domain1.com 时，我希望它被透明地重定向（没有 301 重定向）到 domain1.com。如果他尝试访问 sub.domain1.com.br，我希望它被透明地重定向到 domain1.com.br 等等（请注意，两个重定向都指向完全相同的点，唯一的区别在于地址酒吧）。

到目前为止，我尝试对从 www 重定向的行进行更改，但未成功。到非 www 域，但没有按预期工作：

```
 //This works
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

    //This ends with a "too many redirections" error
#RewriteCond %{HTTP_HOST} ^(.*)$ [NC]
#RewriteRule ^(.*)$ http://%1/$1 [L,QSA] 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:47:23.540

尝试这个：

```
RewriteCond %{HTTP_HOST} ^(.+)\.([^.]{4,})\.([a-z]{3,4}|[a-z]{2,3}\.[a-z]{2}|[a-z]{2})$ [NC]
RewriteRule ^(.*)$ http://%2.%3/$1 [L,R=301] 
```

这应该涵盖所有这些：

*   domain1.com
*   domain1.com.br
*   domain2.co.uk
*   domain3.es
*   domain4.info

# javascript - 移动谷歌地图中心javascript api

> ID：12699300
> 
> 赞同：36
> 
> 时间：2012-10-02T22:24:46.057
> 
> 标签：javascript, maps

在我的项目中，我想将地图的中心移动到新坐标。这是我的地图代码

```
function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(0, 0),
      zoom: 4,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
  }
  function moveToLocation(lat, lng){
     var center = new google.maps.LatLng(lat, lng);
     var map = document.getElementById("map_canvas");
     map.panTo(center);

  } 
```

确实调用了 moveToLocation 函数，但地图没有重新居中。知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-02T22:55:18.573

你的问题是`moveToLocation`，你`document.getElementById`用来尝试获取`Map`对象，但这只会让你得到一个`HTMLDivElement`，而不是`google.maps.Map`你期望的元素。所以你的变量`map`没有`panTo`功能，这就是它不起作用的原因。您需要做的是将`map`变量隐藏在某个地方，它应该按计划工作。您可以像这样使用全局变量：

```
window.map = undefined;      // global variable

function initialize() {
  const mapOptions = {
    center: new google.maps.LatLng(0, 0),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  // assigning to global variable:
  window.map = new google.maps.Map(
    document.getElementById("map_canvas"), mapOptions);
}

function moveToLocation(lat, lng){
  const center = new google.maps.LatLng(lat, lng);
  // using global variable:
  window.map.panTo(center);
} 
```

请参阅此处的工作 jsFiddle：http: [//jsfiddle.net/fqt7L/1/](http://jsfiddle.net/fqt7L/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-20T13:20:45.867

使用动态显示 Google Maps API，获取数据库中的数据以显示地点、纬度、经度并使用 AngularJS 在中心显示地图标记。由Sureshchan完成...

[![谷歌地图截图](../Images/3cc8b19565f9cfaf1240a2ae92032844.png)](https://i.stack.imgur.com/OZ0Ot.png)

```
$(function() {
    $http.get('school/transport/scroute/viewRoute?scRouteId=' + scRouteId).success(function(data) {
        console.log(data);

        for (var i = 0; i < data.viewRoute.length; i++) {
            $scope.view = [];
            $scope.view.push(data.viewRoute[i].stoppingName, data.viewRoute[i].latitude, data.viewRoute[i].longitude);
            $scope.locData.push($scope.view);
        }            

        var locations = $scope.locData;
        var map = new google.maps.Map(document.getElementById('map'), {                    
            mapTypeId : google.maps.MapTypeId.ROADMAP
        });
        var infowindow = new google.maps.InfoWindow();
        var bounds = new google.maps.LatLngBounds();
        var marker, j;

        for (j = 0; j < locations.length; j++) {
            marker = new google.maps.Marker({
                position : new google.maps.LatLng(locations[j][1], locations[j][2]),
                map : map
            });

            google.maps.event.addListener(marker, 'click', (function(marker, j) {
                bounds.extend(marker.position);
                return function() {
                    infowindow.setContent(locations[j][0]); 
                    infowindow.open(map, marker);
                    map.setZoom(map.getZoom() + 1);
                    map.setCenter(marker.getPosition());
                }
            })(marker, j));
        };
        map.fitBounds(bounds);
    });
}); 
```

# drupal-7 - 如何将自定义 js 文件添加到 pixture_reloaded Drupal 7 主题？

> ID：12699306
> 
> 赞同：0
> 
> 时间：2012-10-02T22:25:14.457
> 
> 标签：drupal-7

尝试通过`drupal_add_js(…)`in`pixture_reloaded_process_html`函数添加文件无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:33:14.673

只需在`pixture_reloaded.info`主题文件中添加文件。

```
stylesheets[all][] = relative_path/mystyle.css
scripts[] = relative_path/myscript.js 
```

# php - SELECT: WHERE 子句的检查值

> ID：12699308
> 
> 赞同：0
> 
> 时间：2012-10-02T22:25:15.660
> 
> 标签：php, mysql, checkbox

我正在尝试在选定的汽车之间创建一个比较选项。

```
<?php
if(isset($_POST['compares'])) {
$id_nums = array($_POST['cBox']);
//$id_nums = array(1,6,12,18,24);
$id_nums1 = implode(", ", $id_nums);

$query = "SELECT * FROM wp_cars WHERE id in ($id_nums1)";
$cCars = mysql_query($query) or mysql_error();

while($car = mysql_fetch_array($cCars)) {
    echo $car['cartitle']."<br/>";
    echo $car['saleprice']."<br/>";
}
} else {
$query1 = "SELECT * FROM wp_cars";
$allcars = mysql_query($query1) or die(mysql_error());  `

while($car1 = mysql_fetch_array($allcars)) {
    echo "<input type='checkbox' value=".$car1['id']." name='cBox[]' />";
    echo $car1['cartitle']."<br/>";
    echo $car1['saleprice']."<br/>";
}

}
?> 
```

如何根据复选框选择传递复选框名称（cBox[]）数组。

```
<form action="compares.php" method="post">
<button name="compares">Select Cars to Compare</button>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:02:20.740

**从您的 HTML 部分，以这种方式发送输入：**

```
<form action="compares.php" method="post">
<?php foreach (mysql_fetch_array($allcars) as $car: ?>
    <input type="checkbox" value="<?php echo $car['id']; ?>" name="cBox[]" />
    <?php echo $car['cartitle']; ?><br />
    <?php echo $car['saleprice']; ?><br />
<?php endforeach; ?>
</form> 
```

**在您的 PHP 部分，以这种方式接收输入：**

```
$id_nums = implode(",", $_POST['cBox']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:32:06.263

```
$id_nums = array($_POST['cBox']); 
```

`$_POST['cBox']`已经是一个数组，您正在制作一个二维数组。正在做

```
$id_nums1 = implode(", ", $_POST['cBox']); 
```

会做你想做的。尽管它对 SQL 注入很开放。

# c - C中的格式化矩阵

> ID：12699309
> 
> 赞同：0
> 
> 时间：2012-10-02T22:25:16.000
> 
> 标签：c, matrix, formatting

我正在编写一个使用均值滤波器来平滑图像的程序。现在我没有使用实际的图像，只是整数，我的问题是我可以获得左角数字的平均值，左侧数字的平均值以及中间数字的平均值，但是当它输出结果时，它不会输出回矩阵。

前任。要求用户输入行和列的数字：输入为 5 和 5，输出 5x5 矩阵

但是然后我以从上到下的方式获得平均值的这些结果

```
 50
  50
  71
  65
  61
  48  64  57
  59  26  61
  43  63  20 
```

我想要实现的输出是

```
 50
  71  48  64  57
  65  59  26  61
  61  43  63  20 
```

显然这不是一个成品，因为我还没有为矩阵的其余部分编程平均值，但是这个格式问题让我发疯了。

继承人的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>  
#include <time.h>
// function that randomly generates numbers 
void fillArray(int a[10][20], int m, int n)
{

  int random;
  int i,j;  
  for (i=0;i<m;i++)
  {
      for (j=0;j<n;j++)
      {
          random=rand()%100;
          a[i][j]=random;
      }
  }
}

// function that prints the first matrix of random numbers
void printarray (int a[10][20], int m, int n)
{
 int i,j;
 for (i=0;i<m;i++) 
 {
     for (j=0;j<n;j++)
     {
         printf("%4d", a[i][j]);
     }
     printf("\n");
 }
}

// function that finds the mean for any number and its 4 nieghbors 
void corner1 (int a[10][20], int n, int m)
{
 int c[10][20];
 int i,j;
 for (i=0;i<m;i++) 
 {
    for (j=0;j<n;j++)
    {
        if (i<=0 && j<=0)
        {
           c[i][j]=(a[i+1][j]+a[i][j+1])/2;
           printf("%4d",c[i][j]);
        }
    }
  }
  printf("\n");
}

void middle(int a[10][20], int n, int m)
{
 int c[10][20];
 int i,j;
 for (i=1;i<m-1;i++) 
 {
    for (j=1;j<n-1;j++)
    {
        c[i][j]=(a[i-1][j]+a[i][j-1]+a[i+1][j]+a[i][j+1])/4;
        printf("%4d",c[i][j]);
    }
    printf("\n");
 }
}

void side1 (int a[10][20], int n, int m)
{
 int c[10][20];
 int i,j;
 for (i=1;i<m;i++) 
 {
    for (j=0;j<n-1;j++)
    {
      if (i<=1&&j>=0)
      {
         c[i][j]=(0+0+a[i-1][j]+a[i+1][j]+a[i][j+1])/3; 
         printf("%4d",c[i][j]);
         printf("\n");
      }  
    }     
  }
}

int main()
{
 int a[10][20];

 int m,n;
 srand(time(NULL));

 //User input
 printf("please enter number of rows and columns\n");
 scanf("%d %d", &m,&n);
 fillArray(a,m,n);
 printarray (a,m,n);
 printf("The smoothed image is\n");
 side1(a,m,n);
 corner1(a,m,n);
 middle (a,m,n);
 getch();
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:23:38.163

我可以想到两种解决方案：

1.  将corner1、side1 和middle 存储在一个数组中。完成后将数组打印出来（而不是在corner1、side1 和中间）。

2.  遍历每一行。在行上调用 side1，不打印换行符，在行上调用中间。由于大量调用（对于更大的图像），这会降低效率，并且不会重用您的 printarray 代码，因此我建议您使用选项 1。

# if-statement - 批量多个 If

> ID：12699314
> 
> 赞同：3
> 
> 时间：2012-10-02T22:25:38.303
> 
> 标签：if-statement, batch-file

我已经多次尝试让这批工作，但它不会，它让我发疯。在我屈服于提出问题之前，我还梳理了这个网站并尝试了许多不同的东西。

我有一批将根据您选择的选项进行**关机、重新启动或注销。**当我运行它并希望通过检查答案以查看它是否为零来从几小时到几分钟到几秒时，问题就出现了。它给出了错误“有一个意外的（”并立即关闭。如果我把它拆开并单独运行它，它就可以工作。

这是包含 If 语句的主要函数。如果你想看整批我可以给你。我已经注释掉了 shutdown 的实际使用，只是为了帮助弄清楚这一点。解决此问题后，将删除 REM'd out 关闭行之前的 2 行。

```
:SR_MAIN
cls
echo+
echo+  
set /p SR_hrs=....Please enter the number of hours before %SR_NAME%:  

IF "%SR_hrs%" == 0 (
     echo+
     echo    You don't want hours, huh?
     timeout /t 2 > nul
     cls
     echo+
     echo+
     set /p ptm=....Please enter the number of minutes before %SR_NAME%:  
     IF %ptm% == 0 (
          echo+
          echo    You don't want minutes, huh?
          timeout /t 2 > nul
          cls
          echo+
          echo+
          set /p pts=....Please enter the number of seconds before %SR_NAME%:  
          IF %pts% == 0 (
               echo+
               echo    Exiting to Shutdown menu...
               timeout /t 2 > nul
               goto SHUTREMENU
          ) ELSE (
               cls
               echo+
               echo+
               echo    This will %SR_NAME% the computer in the seconds you provided.
               set /a tm=pts
               echo+
               echo    Waiting %tm% seconds before continuing...
               echo+
               timeout /t %tm%
                  echo Now would come the %SR_NAME%!
                  pause
REM               shutdown /f /%SR_N% /t 0
               exit
          )
     ) ELSE (
          cls
          echo+
          echo+
          echo    This will %SR_NAME% the computer in the minutes you provided.
          set /a tm=ptm*60
          echo+
          echo    Waiting %ptm% minutes (%tm% seconds) before continuing...
          echo+
          timeout /t %tm%
             echo Now would come the %SR_NAME%!
             pause
REM          shutdown /f /%SR_N% /t 0
          exit
     )
) ELSE (
     cls
     echo+
     echo+
     echo    This will %SR_NAME% the computer in the hours you provided.
     set /a tm=SR_hrs*60*60
     echo+
     echo    Waiting %SR_hrs% hours (%tm% seconds) before continuing...
     echo+
     timeout /t %tm%
        echo Now would come the %SR_NAME%!
        pause
REM     shutdown /f /%SR_N% /t 0
     exit
)

:MAIN_MENU
ECHO Exiting to Main Menu...
PAUSE 
```

谢谢你提供的所有帮助。这对我来说是一个真正的难题。

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:18:35.110

少了一个百分号。

```
IF "%SR_hrs%" == 0 (

           ↑ there 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:35:05.027

塞巴斯蒂安指出了失踪的地方`%`。

您的另一个问题是变量的扩展在设置变量的同一代码块中不起作用。在执行任何操作之前解析整个代码块，并且`%ptm%`在解析时扩展类似代码。因此，您将获得`ptm`设置之前的值！

解决方案是使用延迟扩展。

放在`setlocal enableDelayedExpansion`脚本顶部附近。

然后在你的代码块中使用`!var!`而不是。`%var%`

有关延迟扩展的更多信息，`help set`请从命令行键入，然后从*“最后，支持延迟的环境变量扩展...”处读取。*

# core-data - CoreData：Mogenerator 与类别

> ID：12699316
> 
> 赞同：3
> 
> 时间：2012-10-02T22:25:46.967
> 
> 标签：core-data, mogenerator

我最近从外部开发人员那里继承了一个 CoreData 项目。在我希望找到所有自动生成的 NSManagedObject 子类的地方，我却拥有（一些谷歌搜索显示的）由 Mogenerator 生成的类，这是一个我没有经验的工具。

我了解使用此工具的目的是使您可以将自定义代码添加到与 CoreData 实体对应的类中，而不必担心在模型更改和重新生成类时它会丢失...但是我可以无论如何，通过使用类别。

我目前没有看到使用 Mogenerator 超过类别的真正优势。

使用 Mogenerator 与类别的优点/缺点是什么？Mogenerator 是否有其他用途？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T17:13:28.747

使用类与类别的一个优点是您可以通过子类化和覆盖来扩展功能。

例如，如果您的模型具有子实体，则它们可以从通用主类继承功能。子类可以通过覆盖所需的方法来定义特定的行为。另一方面，可以覆盖类别中定义的方法，但不建议这样做。这意味着实现为类别的逻辑必须在每个子类中重复。

托管对象中的很多代码都是样板文件，所以让 mogenerator 自动执行它真的很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:25:40.197

**从他们的“网站” [http://rentzsch.github.com/mogenerator/](http://rentzsch.github.com/mogenerator/)：**

> mogenerator 为您的 Core Data 自定义类生成 Objective-C 代码
> 
> 与 Xcode 不同，mogenerator 为每个实体管理两个类：一个用于机器，一个用于人类
> 
> 机器类总是可以被覆盖以匹配数据模型，而人类的工作可以毫不费力地保留下来

所以基本上它与类别无关。Mogenerator（模型对象生成器）生成代码，这些代码您已经在您移交的项目中看到了结果。

# intellij-idea - 使用IntelliJ编译Java 7，配置麻烦

> ID：12699321
> 
> 赞同：2
> 
> 时间：2012-10-02T22:26:12.353
> 
> 标签：intellij-idea, java-7

我正在使用 IntelliJ 并试图让它与 Java 7 一起使用。

我的 JDK 设置为指向最新的 JDK

![在此处输入图像描述](../Images/80d9fa444c425539a6f9893b60e410c4.png)

此外，项目也将使用它

![在此处输入图像描述](../Images/35b46123239733658b0cfa1e424eb138.png)

然而，当尝试编写 Java7 代码时，它的语法并没有被识别。

![在此处输入图像描述](../Images/e7400ce18dfb00d462b2870bd60b58a4.png)

请问我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:35:56.637

将**项目语言级别**设置为**7.0**。询问时重新加载项目：

![语言水平](../Images/b8fa58e72ad8adfa2516f0b325eeda56.png)

# php - 如何找到自 mySQL 时间戳以来经过的秒数？

> ID：12699322
> 
> 赞同：0
> 
> 时间：2012-10-02T22:26:17.670
> 
> 标签：php, mysql, timestamp

就像主题一样：我在变量中获得了一个自动 mySQL 时间戳，我想知道自它以来已经过去了多少秒？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:32:11.693

```
$delta = time() - strtotime($mySqlTime) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:31:36.550

如果您想要 MYSQL 函数，请查看[TIMEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)

```
TIMEDIFF(NOW(),`timestamp`) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:27:45.527

call php's time() function and subtract that result from the mysql timestamp.

To convert the mysql timestamp to the correct format, use [strtotime()](http://php.net/manual/en/function.strtotime.php)

# node.js - Contextify@0.1.3 install: `node-gyp rebuild` failed with 1

> ID：12699330
> 
> 赞同：10
> 
> 时间：2012-10-02T22:26:58.167
> 
> 标签：node.js, npm, node-gyp

I tried to `npm install jquery` and it failed when trying to install one of it's dependencies, Contextify. So I tried to `npm install contextify` and got this error. I haven't been able to find a solution after about an hour or so of looking online. I keep getting close but not close enough. My node.js is running on Ubuntu 12.04, and as you can see in my code, node.js is version 0.8.11\. Here is the error when trying to `npm install jquery`:

```
gyp http GET http://nodejs.org/dist/v0.8.11/node-v0.8.11.tar.gz
gyp WARN install got an error, rolling back install
gyp ERR! configure error
gyp ERR! stack Error: socket hang up
gyp ERR! stack     at createHangUpError (http.js:1263:15)
gyp ERR! stack     at Socket.socketOnEnd (http.js:1351:23)
gyp ERR! stack     at TCP.onread (net.js:418:26)
gyp ERR! System Linux 3.2.0-23-generic
gyp ERR! command "node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /opt/www/novacruisers/node_modules/jquery/node_modules/jsdom/node_modules/contextify
gyp ERR! node -v v0.8.11
gyp ERR! node-gyp -v v0.6.11
gyp ERR! not ok
npm WARN optional dep failed, continuing contextify@0.1.3 
```

And the error for `npm install contextify`:

```
npm ERR! contextify@0.1.3 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1 
```

Any help is greatly appreciated. :)

**UPDATE**

I've read that problems come if python is not installed or if a gcc compiler is not installed. I have both of those installed. I followed [these instructions for the gcc compiler](http://wiki.answers.com/Q/How_do_you_install_gcc_compiler_in_Ubuntu), and python 2.7 comes with Ubuntu 12.04\. So I'm still researching. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:22:39.703

你试过`npm install --verbose contextify 2>&1 | grep gyp`吗？它应该为您提供有关失败的详细输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T21:15:42.587

我知道你提到安装了 python，但是这个[python_path 呢？](https://stackoverflow.com/questions/15175675/node-gyp-configure-error-at-execvp)

如果这没有帮助：首先，您能否详细说明您在这台机器上安装 node.js 的方式？其次，为什么不用这么新版本的node.js呢？

# c# - Changing textbox text causes parent windows to resize incorrecly

> ID：12699331
> 
> 赞同：-1
> 
> 时间：2012-10-02T22:27:14.813
> 
> 标签：c#, winforms, textbox, resize, horizontal-scrolling

I've tried looking many places for an answer to an issue I'm having and so far I've found nothing.

What I currently have is a c# windows form with user controls inside it. Some user controls have other controls inside them. What happens when I change the text in a textbox, is its parent windows will no longer resize like they should when changing the window size. i.e. A horizontal scrollbar will appear even though horizontal scrollbars are disabled in that specific window. Its almost as if changing the text changes the parent window's styling.

In case this is too vague, I have a textbox inside a panel with a docking property set to fill. The panel has a padding of 10 in order to allow the textbox to have some white space for aesthetic purposes. This control resides within a parent control (we'll call it parent 1), which in turn resides within another control as well (we'll call it parent 2). So when I change the textbox's text (at all, even adding a space), will then make parent 2 have a horizontal scrollbar flicker and sometimes even remain when resizing the form window manually.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:49:58.993

我发现了我的问题！当使用 autoScrollBars 和双缓冲时，它会导致水平滚动条在调整窗口大小时显示它不应该显示的时间（至少在我的情况下）。答案很简单，忘记autoScrollBars，实现我自己的垂直滚动条！

实际上，我正在将一些代码张贴在这里供大家查看，但是在查看它时，我决定忘记自动滚动，并且瞧瞧它起作用了！

我其实很好奇为什么会这样。我的朋友听说 .net 的 autoScroll 存在一些问题，但我认为不会到这种程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:34:20.477

您应该确保不仅`TextBox`in`UserControl`停靠以填充，而且用户控件本身及其父级（及其父级）都正确停靠或设置了锚点，以便它们与表单一起调整大小。

当用户输入字符时，您是否执行任何特殊代码？（`KeyPressed`事件等）。如果是，您应该尝试暂时禁用这些事件，看看它们是否会导致问题。

如果您发布代码示例，它会更容易提供帮助。没有这个，我们只能猜测，就像我试过的那样......

# c++ - C++: How to branch a template function?

> ID：12699340
> 
> 赞同：1
> 
> 时间：2012-10-02T22:27:45.580
> 
> 标签：c++, templates

I want to do something like this...

```
class A;
class B;
class C;

void a(A);
void b(B);
void c(C);

template<typename T> void f(T t)
{
  if (some condition)
    a(t)
  else if (some other condition)
    b(t)
  else
    c(t);
}

int main()
{
    A myA;
    B myB;
    C myC;

    f(myA);  // some condition ensures f(myA) only calls a(myA)
    f(myB);  // some condition ensures f(myB) only calls b(myB)
    f(myC);  // some condition ensures f(myC) only calls c(myC)

    return 0;
} 
```

But this doesn't compile because a(B), a(C), b(A), b(C), c(A), c(B) are not defined.

Is there a way to resolve this? I tried to see if std::function() or std::bind() could be used to construct a call to a(), b(), or c() dynamically, but no luck.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T22:30:02.933

不要使用模板。使用重载：

```
void f(A x) { if (some_condition)    a(x); }
void f(B x) { if (another_condition) b(x); }
void f(C x) { if (third_condition)   c(x); } 
```

如果条件已在调用点确定，则将其从中删除，`f`并将对象保留在本地：

```
int main()
{
    if (some_condition)
    {
        A myA;
        f(myA);
    }
    else { /* ... */ }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T22:30:37.823

您在寻找模板专业化吗？

```
template<typename T> void f(T t)
{
    // Generic implementation
}

// Specialization for A
template<> void f(A a)
{
    // A-specific behavior
}
// Repeat for B and C etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:32:58.433

是的，重载函数（如上所述是要走的路）

但是，如果您必须进行分支并控制 a、b、c 的实现，则可以将 a()、b() 和 c() 声明为模板函数

```
template<class X>
void a(X aVar){ // impl of a(A); }
template<class X>
void b(X bVar){ // impl of b(B); }
template<class X>
void c(X cVar){ // impl of c(C); } 
```

# c - linux system c quoting

> ID：12699350
> 
> 赞同：1
> 
> 时间：2012-10-02T22:28:48.690
> 
> 标签：c, linux, redirect, system, call

On an embedded system with Linux as OS I want to call a 3rd party binary to retrieve data from a database and to append this data to an existing file. The command string which is handed over to the system() function looks like:

```
"export_from_db >> /tmp/myFile" 
```

Unfortunately, this doesn't work. `/tmp/myFile` never gets created! If I omit the redirection, then the database export is printed to stdout.

I wonder if system() and the redirection via ">>" go together well? On the prompt I successfully tested this command `"export_fom_db >> /tmp/myFile"`! Does anybody know how to achieve it using system()? Is there some kind of quoting necessary?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:35:59.433

嗯..实际上，对我来说似乎没问题..这正是 system() 的用途 - 在当前 shell 下执行一行。嵌入式 linux 的 shell 是否支持 >> 运算符？您是否在终端中手动尝试过？

另一个想法是您的应用程序可能在其他用户帐户下运行，并且该帐户*可能*具有一些奇怪的配置，例如使用一些 csh 或 ksh 而不是 bash（反之亦然，取决于您喜欢什么）。检查实际拥有该进程的用户并检查 /etc/passwd 的 shell 设置。

此外，运行应用程序的用户帐户根本没有写入 /tmp 的权限的可能性很小 :) 一定要检查一下

另外...在您的“嵌入式Linux”上，仅以简单的方式实现 system() 的可能性很小，它只是使用给定的参数调用应用程序并跳过所有其他shell-wise 运算符。这样做是为了节省资源，因为 system() 可能很少使用，或者只是被你的 linux 设计者“太重”了..这取决于发行版..如果你告诉我们哪一个是的，那么有更多知识的人可能会说是否是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:19:17.110

在嵌入式系统上，您最好`system()`自己实现。考虑以下代码（**未经测试！**）：

```
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <errno.h>

/* Helper function: Open the specified file at the desired descriptor.
*/
static int openfd(const int descriptor,
                  const char *const filename,
                  const int flags, const mode_t mode)
{
    int  fd, result;

    if (!filename || descriptor == -1)
        return errno = EINVAL;

    /* Close existing descriptor. Ignore errors. Hopefully it is reused. */
    do {
        result = close(descriptor);
    } while (result == -1 && errno == EINTR);

    /* Open the desired file. */
    do {
        fd = open(filename, flags, mode);
    } while (fd == -1 && errno == EINTR);
    if (fd == -1)
        return errno;

    /* Did we get lucky, and get the correct descriptor already? */
    if (fd == descriptor)
        return 0;

    /* Move the descriptor. */
    do {
        result = dup2(fd, descriptor);
    } while (result == -1 && errno == EINTR);
    if (result == -1) {
        const int  saved_errno = errno;
        do {
            result = close(fd);
        } while (result == -1 && errno == EINTR);
        return errno = saved_errno;
    }

    /* Close the temporary descriptor. */
    do {
        result = close(fd);
    } while (result == -1 && errno == EINTR);
    if (result == -1) {
        const int  saved_errno = errno;
        do {
            result = close(descriptor);
        } while (result == -1 && errno == EINTR);
        return errno = saved_errno;
    }

    return 0;
}

/* Start command on the background.
 * Note: args[1] is the first argument, args[0] is the command name.
 * NULL input/output/error redirects from/to /dev/null.
 * Empty string for input/output/error does no redirections;
 *   the command the uses the same input/output/error.
 * For non-empty output or error, specify the 'man 2 open' O_ flags too.
 *
 * Returns (pid_t)0 with errno set if an error occurs,
 * otherwise the PID of the child process started.
*/
pid_t run(const char *file,
          char *const args[],
          const char *const input,
          const char *const output, const int output_flags,
          const char *const error, const int error_flags)
{
    pid_t  child;
    int    result, flags;

    if (!cmd || !arg || !arg[0]) {
        errno = EINVAL;
        return (pid_t)0;
    }

    child = fork();
    if (child == (pid_t)-1)
        return (pid_t)0;

    if (child)
        return child;

    /* This is the child process. */
    if (input && *input)
        result = openfd(STDIN_FILENO, input, O_RDONLY | O_NOCTTY, 0);
    else
    if (!input)
        result = openfd(STDIN_FILENO, "/dev/null", O_RDONLY | O_NOCTTY, 0);
    else
        result = 0;
    if (result)
        exit(127);

    if (output && *output)
        result = openfd(STDOUT_FILENO, output, output_flags, 0666);
    else
    if (!output)
        result = openfd(STDOUT_FILENO, "/dev/null", O_WRONLY | O_NOCTTY, 0);
    else
        result = 0;
    if (result)
        exit(127);

    if (error && *error)
        result = openfd(STDERR_FILENO, error, error_flags, 0666);
    else
    if (!error)
        result = openfd(STDERR_FILENO, "/dev/null", O_WRONLY | O_NOCTTY, 0);
    else
        result = 0;
    if (result)
        exit(127);

    execvp(file, args);

    exit(127);
} 
```

唯一启动命令，`run()`您需要等待它完成。请注意，您的主程序可以同时进行有意义的工作，除非它需要立即退出状态（或命令应该创建的文件）。示例使用：

```
/* Command to run. NULL terminates the list. */
char *const cmd[] = { "ls", "-l", NULL };

pid_t  child, p;
int    status;

child = run(cmd[0], cmd,
            NULL /* < /dev/null */,
            "/tmp/some-log-file", O_WRONLY | O_CREAT | O_APPEND,
            "", 0 /* No redirection for standard error */);
if (!child) {
    fprintf(stderr, "Cannot run '%s': %s.\n", cmd[0], strerror(errno));
    exit(1);
}

do {
    status = 0;
    p = waitpid(child, &status, 0);
} while (p == (pid_t)-1 && errno == EINTR);
if (p == (pid_t)-1) {
    fprintf(stderr, "Lost '%s': %s.\n", cmd[0], strerror(errno));
    exit(1);
}

if (WIFEXITED(status)) {
    if (!WEXITSTATUS(status))
        printf("Command executed successfully.\n");
    else
        printf("Command failed with exit status %d.\n", WEXITSTATUS(status));
} else
if (WSIGNALED(status))
    printf("Command died from signal %s.\n", strsignal(WTERMSIG(status)));
else
    printf("Command died unexpectedly.\n"); 
```

尽管最后一部分通常缩写为

```
if (WIFEXITED(status) && !WEXITSTATUS(status))
    printf("'%s': Successful.\n", cmd[0]);
else
    printf("'%s': Failed.\n", cmd[0]); 
```

请注意，如果您仍然处理输出，您可能应该使用管道（或者`popen()`上述函数的扩展版本）。

希望您觉得这个有帮助。

# html - Control appcache download

> ID：12699351
> 
> 赞同：2
> 
> 时间：2012-10-02T22:28:48.837
> 
> 标签：html, ios6, html5-appcache

I've developed an iPad web app that uses the appcache. It's not intended to be a fully offline app but I use the appcache to store large image files so that they're not sent over 3G. Problem is when the manifest is updated the appcache updates whether the iPad is on wifi or 3G, which could be expensive.

Is it possible to have the user decide if the appcache can be updated or not? From what I've seen, this isn't possible, it all happens automatically, you just get events. But perhaps there's some trickery like writing the manifest on the fly or similar.

Using PHP on the server side if that helps. Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T19:59:37.497

**连接类型：理论与未来**

W3C上[的网络信息 API 规范草案](http://www.w3.org/TR/netinfo-api/)提供了连接类型的信息（以太网 wifi 2g 3g 4g 等），但它尚未在任何浏览器上实现，除了：

*   Android 2.2+ 上的普通 Android 浏览器（不是 Google Chrome 浏览器）

    `navigator.connection.type`// 基于 W3C 草案，（在现有的 Android 浏览器上实现）

*   和不完全是浏览器的[PhoneGap](http://docs.phonegap.com/en/1.0.0/phonegap_connection_connection.md.html)

    `navigator.network.connection.type`//在PhoneGap上

将来有了这些信息，您可以检测用户是否有蜂窝数据，然后暂时删除图像的 src 并通过确认对话框询问用户。

您可能还必须使用以下方法取消应用程序缓存更新 `window.applicationCache.abort()`：（[文档](http://www.whatwg.org/specs/web-apps/current-work/#dom-appcache-abort)）

*现实*

不幸的是，Net Info API 目前不可用（至少没有普及），但肯定会在未来有所帮助。

**远射**

有[一个包含网络速度的数据库](http://www.ip2location.com/ip-country-region-city-latitude-longitude-zipcode-timezone-isp-domain-netspeed-areacode-weather-mobile.aspx)（DIAL = 拨号，DSL = 宽带/电缆，COMP = 公司/T1），但我没有使用它，我怀疑它会有所帮助。

**动态应用缓存**

在检查这一点时，我尝试动态生成 html 标记以及清单声明，以便将其与 Network Info API 结合起来，但 AppCache 清单在 javascript 执行之前加载，之后不受影响。因此，无法通过 Javascript 即时更改清单文件，并且数据 URI 也不是一种选择。

**替代解决方案**

HTML5 应用程序缓存目前是一头未驯服的野兽，并且正在[讨论改进它](http://www.stevesouders.com/blog/2011/10/03/improving-app-cache/)。在它改变以支持更复杂的配置（带宽级别标志会很棒）之前，您可以改变对解决方案的看法，尽管 App Cache 可能是您目前拥有的最好的。

根据您的图像有多大，您可以依赖普通的浏览器缓存。您可以结合[localStorage](http://diveintohtml5.info/storage.html)和远期[到期 HTTP 标头](http://developer.yahoo.com/blogs/ydn/posts/2007/05/high_performanc_2/)。LocalStorage 以跟踪加载/缓存的图像。

*   首先在您的图像 HTTP 标头上添加一个远在未来的到期日期
*   在页面加载时，从 imgs 中删除所有 src
*   循环图像并检查 localStorage 是否在过去加载了每个图像
*   如果有过去未加载的图像，则显示一个对话框，确认下载这些图像
*   如果图像是过去加载的，则将src放回img上
*   对于下载的每个图像，将其 URL 保存在 localStorage

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:36:38.500

我不知道 iPad 上 indexedDB 的状态如何，但这可能是一种替代解决方案。

简而言之：Indexeddb 是一个客户端数据库。数据存储在作为键/值对的对象存储中。最大存储容量理论上是您的磁盘空间的最大值。有关 indexeddb 的更多信息：

*   [规格](http://www.w3.org/TR/IndexedDB/)
*   [我的博客](http://www.kristofdegrave.be)

你可以用 indexeddb 做什么：

当有人导航到某个页面时：

*   检查每个图像标签是否存在于 indexeddb 中
*   如果在场
    *   从 indexeddb 中获取图片并放入图片标签中
*   如果不存在
    *   下载它
    *   将其存储在 indexeddb 中
    *   将图像放在图像标签中。

作为额外的（将来），您可以按照 Sev 的说明进行操作：检查连接类型，并且仅在使用快速 Internet 连接时才下载图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T05:12:13.243

我已经“发明”了一个在 iPad (iOS 6.0.x) 上开发 web 应用程序的可行解决方案，可以回答您的问题。

这个想法是首先检查是否设置/定义了 localstorage 变量（我使用页面的标题，因此使用 webapp 名称。）

如果此 localstorage 变量存在，则假设（在 webapp 沙箱上下文中）它是第一次运行应用程序。在这一点上，我填充了一个 UUID，`$PHP_SESSION($uuid)`以避免服务器端 PHP 领域中的“跨应用程序污染”。除此之外，我还有一个动态 manifest.appcache.php，它在 CACHE 部分中包含要添加到清单的文件列表。因此;

```
<?
echo $manifest_file_list[0]."\n";
?> 
```

使用 JS appcache 清单事件侦听器，然后我将进度监控到类似`$('#manifestappcache').html(result);`

# ios - iOS animationImages：我喜欢在播放时移动它

> ID：12699356
> 
> 赞同：1
> 
> 时间：2012-10-02T22:29:04.860
> 
> 标签：ios, animation, uiview

我已经成功创建了一个 UIView，它可以播放来自 NSArray 图像的图像动画。我试图让这个图像在动画播放的同时移动。使用 UIView 的 .center 属性不起作用，而且我一定有某种语法错误，我终生无法弄清楚。

原帖：

我正在玩brandontreb的教程。我可以成功地让动画精灵在原地跳舞，但我希望它真正滑过屏幕。亲爱的灵魂可以：

1.  请帮我解决我做错了什么以使 UIimage 的中心实际上在屏幕上移动？
2.  或者更好的是，将其更新为“动画块”最佳实践？

我一定会花几个小时研究你的修复。

```
- (IBAction)startWalking:(UIButton *)sender {
NSArray * imageArray  = [[NSArray alloc] initWithObjects:
                         [UIImage imageNamed:@"1.png"],
                         [UIImage imageNamed:@"2.png"],
                         [UIImage imageNamed:@"3.png"],
                         [UIImage imageNamed:@"4.png"],
                         [UIImage imageNamed:@"5.png"],
                         [UIImage imageNamed:@"6.png"],
                         [UIImage imageNamed:@"7.png"],
                         [UIImage imageNamed:@"8.png"],
                         [UIImage imageNamed:@"9.png"],
                         [UIImage imageNamed:@"10.png"],
                         [UIImage imageNamed:@"11.png"],
                         [UIImage imageNamed:@"12.png"],
                         nil];
UIImageView * ryuJump = [[UIImageView alloc] initWithFrame:
                         CGRectMake(100, 125, 150, 130)];
ryuJump.animationImages = imageArray;
ryuJump.animationDuration = 1.1;
ryuJump.animationRepeatCount=5;
CGPoint p = ryuJump.center;
p.x += 100;
ryuJump.center = p;

[UIView animateWithDuration:20
                      delay:0
                    options: UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     ryuJump.center = CGPointMake(p.x, p.y);
                 }
                 completion:^(BOOL finished){
                 }];
ryuJump.contentMode = UIViewContentModeBottomLeft;
[self.view addSubview:ryuJump];
[ryuJump startAnimating];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:48:17.023

消除：

```
ryuJump.center = p; 
```

你基本上是在告诉 uiview 动画到你刚刚设置的完全相同的位置（所以什么都不会发生）。

# javascript - 我应该在 eval() 中过滤哪些关键字？

> ID：12699359
> 
> 赞同：0
> 
> 时间：2012-10-02T22:29:18.140
> 
> 标签：javascript, security, eval, code-injection, jsfiddle

我需要将 eval() 用于我正在构建的基于 JavaScript 的 Web 应用程序。

这样做的原因是我想让人们编写自己的函数，这些函数存储为文本，并且可以在需要下次使用时在站点上重复使用。按照 jsFiddle 的思路思考。

该代码将被运行和评估，或者将作为脚本标签插入。无论哪种方式，它都会使网站对恶意用户的 JavaScript 注入开放。因此，我打算过滤提交的代码，或者当用户加载另一个用户的脚本时，会收到一条警告消息，提示用户在继续之前应该先阅读/检查脚本。

到目前为止，我正在寻找过滤/警告以下关键字：

```
eval
execScript

script

window.*
setInterval
setTimeout
alert
confirm
prompt

document.*
write
innerHTML
insertAdjacentHTML
createElement
appendChild
setAttribute

form.*
submit

XMLHttpRequest

jQuery.*
ajax

base64encode
base64decode 
```

我还没有开始测试，所以这些只是我最初的想法。

有人对此有经验或意见吗？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T22:34:51.533

没有办法保证这个安全——这些字符`[]()+!{}`可以用来构造任意的 Javascript 代码。

[http://patriciopalladino.com/blog/2012/08/09/non-alphanumeric-javascript.html](http://patriciopalladino.com/blog/2012/08/09/non-alphanumeric-javascript.html)

据我所知，jsFiddle 通过在另一个域的 iframe 中运行用户生成的代码来工作。它不使用输入过滤。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T22:37:19.147

几乎任何过滤都可以通过[这样做](http://patriciopalladino.com/blog/2012/08/09/non-alphanumeric-javascript.html)来解决。您将不得不对 Javascript 进行沙箱处理。可能的方法包括：

*   [AD安全](http://www.adsafe.org/)
*   [谷歌卡哈](http://code.google.com/p/google-caja/)

# c#-4.0 - 实现 System.Web.Http.WebHost.WebHostBufferPolicySelector.IHostBufferPolicySelector

> ID：12699364
> 
> 赞同：4
> 
> 时间：2012-10-02T22:29:58.323
> 
> 标签：c#-4.0, asp.net-web-api

我正在尝试关注[这个](http://www.strathweb.com/2012/09/dealing-with-large-files-in-asp-net-web-api/)网络博客，通过 Asp.Net Web 表单使用 Web Api 类上传大文件。如果您浏览该帖子，您会注意到为了避免因缓冲大文件而导致内存不足，他们建议覆盖 IHostBufferPolicySelector 接口。我在哪里实现接口？我是在 Web Api 类、Global.asax 中执行此操作，还是我完全偏离轨道并需要在其他地方执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:42:58.903

你不需要实现这个接口，我只是把它作为参考列出——该代码已经是 Web API 源代码的一部分（在 下`System.Web.Http/Hosting/IHostBufferPolicySelector.cs`）

您需要做的是覆盖基类`System.Web.Http.WebHost.WebHostBufferPolicySelector`

这就够了：

```
public class NoBufferPolicySelector : WebHostBufferPolicySelector
{
   public override bool UseBufferedInputStream(object hostContext)
   {
      var context = hostContext as HttpContextBase;

      if (context != null)
      {
         if (string.Equals(context.Request.RequestContext.RouteData.Values["controller"].ToString(), "uploading", StringComparison.InvariantCultureIgnoreCase))
            return false;
      }

      return true;
   }

   public override bool UseBufferedOutputStream(HttpResponseMessage response)
   {
      return base.UseBufferedOutputStream(response);
   }
} 
```

然后在其中一个`Global.asax`或`WebApiConfig.cs`（无论您喜欢哪个）中注册您的新课程：

```
GlobalConfiguration.Configuration.Services.Replace(typeof(IHostBufferPolicySelector), new NoBufferPolicySelector()); 
```

# mysql - 当 MySQL 工作时 Navicat Premium 报告语法错误？

> ID：12699368
> 
> 赞同：2
> 
> 时间：2012-10-02T22:30:04.423
> 
> 标签：mysql, sql, mysql-workbench, navicat

嗨，当我为我的数据库使用 Navicat Premium 时，它报告了此 sql 文件的语法错误：

```
SET FOREIGN_KEY_CHECKS=0;
-- ----------------------------
-- Table structure for `mounts_id`
-- ----------------------------
DROP TABLE IF EXISTS `mounts_id`;
CREATE TABLE `mounts_id` (
  `id` tinyint(4) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL DEFAULT 'Sans nom',
  `scrollID` int(11) NOT NULL,
  `stats` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- ----------------------------
-- Records of mounts_id
-- ----------------------------
INSERT INTO `mounts_id` VALUES ('2', 'Amande Sauvage', '7807', '125=1');
INSERT INTO `mounts_id` VALUES ('3', 'Ebene', '7808', '125=2|119=1.25');
INSERT INTO `mounts_id` VALUES ('4', 'Rousse Sauvage', '7809', '125=1');
INSERT INTO `mounts_id` VALUES ('9', 'Ebene Ivoire', '7810', '125=1|119=2.50|138=2.5');
INSERT INTO `mounts_id` VALUES ('10', 'Rousse', '7811', '125=1');
INSERT INTO `mounts_id` VALUES ('11', 'Ivoire Rousse', '7812', '125=0.5|138=2.5');
INSERT INTO `mounts_id` VALUES ('12', 'Ebene Rousse', '7813', '125=0.6|119=1.65'); 
```

虽然它在 MySQL 工作台中完美运行。这是来自navicat的错误：

```
[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '
SET FOREIGN_KEY_CHECKS=0;
-- ----------------------------
-- Table struct' at line 1
[Err] 
SET FOREIGN_KEY_CHECKS=0;
-- ----------------------------
-- Table structure for `mounts_id`
-- ----------------------------
DROP TABLE IF EXISTS `mounts_id`;
CREATE TABLE `mounts_id` (
  `id` tinyint(4) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL DEFAULT 'Sans nom',
  `scrollID` int(11) NOT NULL,
  `stats` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

-- ----------------------------
-- Records of mounts_id
-- ----------------------------
INSERT INTO `mounts_id` VALUES ('2', 'Amande Sauvage', '7807', '125=1');
INSERT INTO `mounts_id` VALUES ('3', 'Ebene', '7808', '125=2|119=1.25');
INSERT INTO `mounts_id` VALUES ('4', 'Rousse Sauvage', '7809', '125=1');
INSERT INTO `mounts_id` VALUES ('9', 'Ebene Ivoire', '7810', '125=1|119=2.50|138=2.5');
INSERT INTO `mounts_id` VALUES ('10', 'Rousse', '7811', '125=1');
INSERT INTO `mounts_id` VALUES ('11', 'Ivoire Rousse', '7812', '125=0.5|138=2.5');
INSERT INTO `mounts_id` VALUES ('12', 'Ebene Rousse', '7813', '125=0.6|119=1.65');
INSERT INTO `mounts_id` VALUES ('15', 'Turquoise', '7814', '125=2|176=1.25');
INSERT INTO `mounts_id` VALUES ('16', 'Ivoire', '7815', '125=2|138=2');
INSERT INTO `mounts_id` VALUES ('17', 'Indigo', '7816', '123=1.25|125=2');
INSERT INTO `mounts_id` VALUES ('18', 'Dorée', '7817', '125=2|124=2.50');
INSERT INTO `mounts_id` VALUES ('19', 'Poupre', '7818', '119=1.25|125=2');
INSERT INTO `mounts_id` VALUES ('20', 'Amande', '7819', '174=0.1');
INSERT INTO `mounts_id` VALUES ('21', 'Emeraude', '7820', '125=0.5|128=100');
INSERT INTO `mounts_id` VALUES ('22', 'Orchidée', '7821', '126=1.25|125=2');
INSERT INTO `mounts_id` VALUES ('23', 'Prune', '7822', '125=0.5|117=50');
INSERT INTO `mounts_id` VALUES ('33', 'Amande Dorée', '7823', '174=0.2|124=4|125=2|182=100');
INSERT INTO `mounts_id` VALUES ('34', 'Amande Ebene', '7824', '125=1');
INSERT INTO `mounts_id` VALUES ('35', 'Amande Emeraude', '7825', '125=1|128=100|182=100|174=0.2');
INSERT INTO `mounts_id` VALUES ('36', 'Amande Indigo', '7826', '174=0.2|125=2|123=1.65|182=100');
INSERT INTO `mounts_id` VALUES ('37', 'Amande Ivoire', '7827', '174=0.2|125=2|119=1.65|182=100');
INSERT INTO `mounts_id` VALUES ('38', 'Amande Rousse', '7828', '174=0.2|125=1|182=50');
INSERT INTO `mounts_id` VALUES ('39', 'Amande Turquoise', '7829', '174=0.2|125=2|176=2.50|182=100');
INSERT INTO `mounts_id` VALUES ('40', 'Amande Orchidée', '7830', '174=0.2|125=2|126=1.65|182=100');
INSERT INTO `mounts_id` VALUES ('41', 'Amande Pourpre', '7831', '174=0.2|125=2|118=1.65|182=100');
INSERT INTO `mounts_id` VALUES ('42', 'Dorée Ebène', '7832', '125=1|123=4|119=1.65'); 
```

所以介意有人解释为什么？

# javascript - 是否可以在单个图层上有多个 KineticJS 动画？

> ID：12699369
> 
> 赞同：0
> 
> 时间：2012-10-02T22:30:18.070
> 
> 标签：javascript, animation, html5-canvas, layer, kineticjs

我在让 KineticJS 动画停止 () 时遇到问题。

我在同一层上有三个 KineticJS 图像对象，并且我为每个 KineticJS 图像对象添加了一个 KineticJS 动画。然而，只有一个图像对象显示任何动画。它也不会停止响应 anim.stop() 的动画，除非我 stop() 所有三个对象的动画（包括那些实际上没有视觉动画的对象）。

我的问题是：是否甚至可以在单独的对象/图像/形状上添加多个独立动画到单个图层，并且仍然能够单独启动（）/停止（）每个动画？还是我需要为每个 KineticJS 图像对象创建一个单独的层？

简而言之（破解版），我的代码如下：

```
stage = new Kinetic.Stage({container: "container", width: windowWidth, height: windowHeight});

layer = new Kinetic.Layer();

var kinObjArr = [];

for (var i=0; i < 3; i++) {
    kinObjArr[i] = new Kinetic.Image({image: myHTMLImage});

    kinObjArr[i].anim = new Kinetic.Animation({
        func: function(frame) {
            kinObjArr[i].setX(30 * Math.sin(frame.time * 2 * Math.PI / 500) + 100);
        },
        node: layer
    });

    kinObjArr[i].anim.start();

    kinObjArr[i].on('touchstart', function(){
        this.anim.stop();    // <----- Doesn't stop
        layer.draw();
    });

} // for

stage.add(layer); 
```

基本上只有列表中的最后一个 KineticJS 图像会被动画化，并且只有在所有 3 个图像都被触摸/单击时才能停止。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T02:14:58.217

经典的闭包问题。您需要使用匿名函数来诱导作用域，或者将所有逻辑分解为自己的函数。这是一篇关于 Javascript 闭包的文章：

[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

KineticJS 支持无限数量的动画（当然，直到内存不足）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:43:39.230

感谢您的回复埃里克。我读了那篇文章，它让我的头变形了，但我想我最终明白了。我选择你的第二个选项，它就像一个魅力：

（同样，这是我实际代码的黑客版本，尚未测试此代码段）

```
stage = new Kinetic.Stage({container: "container", width: windowWidth, height: windowHeight});

layer = new Kinetic.Layer();

var kinObjArr = [];

function myFunc(i) {
    kinObjArr[i] = new Kinetic.Image({image: myHTMLImage});

    kinObjArr[i].anim = new Kinetic.Animation({
        func: function(frame) {
            kinObjArr[i].setX(30 * Math.sin(frame.time * 2 * Math.PI / 500) + 100);
        },
        node: layer
    });

    kinObjArr[i].anim.start();

    kinObjArr[i].on('touchstart', function(){
        this.anim.stop();    // <----- Stops now
        layer.draw();
    });
} // function myFunc

for (var i=0; i < 3; i++) {
    myFunc(i);
} // for

stage.add(layer); 
```

# java - 在 LWJGL 中按住一个键

> ID：12699373
> 
> 赞同：0
> 
> 时间：2012-10-02T22:30:41.483
> 
> 标签：java, keyboard, key, lwjgl, tapandhold

我正在使用 LWJGL，当我按住一个键（比如在 word 中按住一个字母键）时，我想快速发生一个事件。

这是我的尝试：

```
while(Keyboard.next())
{
    if (Keyboard.getEventKeyState())
    {
        if (Keyboard.isKeyDown(Keyboard.KEY_UP)) 
        {
            i += 5.0f;
        }
        if (Keyboard.isKeyDown(Keyboard.KEY_RIGHT)) 
        {
            i -= 1.0f;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:20:03.820

`if (Keyboard.getEventKeyState())`仅在按下键时运行。

对于按住，使用布尔值/整数来记录你的游戏循环应该增加还是减少`i`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:54:05.650

我在按下时使用机器人和线程回答了我自己的问题：

```
 if (Keyboard.isKeyDown(Keyboard.KEY_DOWN))
        {
            Robot robot = new Robot();
            robot.keyPress(KeyEvent.VK_DOWN);
            zpos -= 0.1f;
            Thread.sleep(100);
            robot.keyRelease(KeyEvent.VK_DOWN);
        } 
```

# python - 普通算法可以在 PyOpenGL 上运行吗？

> ID：12699376
> 
> 赞同：1
> 
> 时间：2012-10-02T22:30:53.330
> 
> 标签：python, opengl

我想编写一个算法，该算法将受益于 GPU 优于 CPU 的散列能力。

PyOpenGL 是答案吗？我不想使用绘图工具，而只是运行移植到 GPU 的“香草”python 脚本。

如果这意味着什么，我有一个 ATI/AMD GPU。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:37:50.197

> PyOpenGL 是答案吗？

不，至少不是你期望的那样。如果您的 GPU 确实支持 OpenGL-4.3，您可以在 OpenGL 中使用计算着色器，但这些不是用 Python 编写的

> 但只需运行移植到 GPU 的“香草”python 脚本。

这不是 GPU 计算的工作方式。你必须用一种特殊的语言编写计算内核的着色器。OpenCL 或 OpenGL 计算着色器，或者特定于 NVIDIA 的 CUDA。

然后，Python 将只提供让 GPU 计算运行的框架。

# c# - C# Silverlight - 首先加载什么？背后代码中的 XAML 绑定或事件处理程序？

> ID：12699377
> 
> 赞同：0
> 
> 时间：2012-10-02T22:30:54.027
> 
> 标签：c#, winforms, silverlight, event-handling

在 C# 中，首先加载什么？窗口面板 .xaml 文件中的 XAML 绑定或 .xaml.cs 文件后面的代码中的事件处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:37:43.177

.cs 确实如此。它调用`InitializeComponent()`which 创建和绑定您的控件。

***证明***

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            MessageBox.Show(string.Empty);
            InitializeComponent();
        }
    } 
```

# asp.net - 在 Asp.Net Web 控件中打开和关闭参数时，括号后跟感叹号是什么意思

> ID：12699378
> 
> 赞同：1
> 
> 时间：2012-10-02T22:30:54.270
> 
> 标签：asp.net, aspdotnetstorefront

参考`ImageUrl`以下代码中的参数：

```
 <asp:ImageMap ID="CheckoutMap" runat="server" ImageUrl="(!~/App_Themes/skin_(!SKINID!)/images/step_2.gif!)">
            <asp:RectangleHotSpot Bottom="54" HotSpotMode="Navigate" NavigateUrl="~/shoppingcart.aspx?resetlinkback=1&amp;checkout=true"
                Right="87" />
        </asp:ImageMap> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:42:15.633

它们是特定于 ASP Dot Net Storefront 的皮肤令牌。这是手册的链接 - [http://manual.aspdotnetstorefront.com/p-489-skin-tokens.aspx](http://manual.aspdotnetstorefront.com/p-489-skin-tokens.aspx)

# python - Python 算法 3.2 - 请帮我解决错误。？

> ID：12699382
> 
> 赞同：0
> 
> 时间：2012-10-02T22:31:26.933
> 
> 标签：python, algorithm, python-3.x

这是我的编码：

```
def main():
    actualValued()
    assessed_value()
    printResult()

def actualValued():
    global assessed_value
    global property_tax
    assessed_value = 0.6 * actualValue
    property_tax = assessed_value/100*0.64

def printResult():
    print( "For a property valued at"), actualValued
    print( "The assessed value is"), asessed_value
    print( "The property tax is"), property_tax

actualValue = None
assessed_value = None
property_tax = None

main() 
```

错误：

```
Traceback (most recent call last):
File "C:/Documents and Settings/Desktop/property tax.py", line 21, in <module>
main()

File "C:/Documents and Settings/Desktop/property tax.py", line 2, in main
actualValued()

File "C:/Documents and Settings/Desktop/property tax.py", line 9, in actualValued
assessed_value = 0.6 * actualValue

TypeError: unsupported operand type(s) for *: 'float' and 'NoneType'
>>> 
```

我正在尝试做的事情：

输入评估价值 10000.0 对于价值 10,000.00 美元的房产，评估价值为 6,000.00 美元，税款为 38.40 美元

财产税：县对财产的评估价值征收财产税，为财产实际价值的 60%。例如，如果一英亩土地的价值为 10,000 美元，则其评估价值为 6,000 美元。每 100 美元评估值的财产税为 64 美分。评估为 6,000 美元的英亩税为 38.40 美元。

我需要房产的实际价值以及评估价值和房产税的显示。

我需要使用的功能：

*   一种从用户那里获取输入
*   一个计算所有值
*   一个输出结果
*   和一个调用其他三个函数的主函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:35:18.530

您设置 actualValue=None ，然后尝试在函数中使用它，但是 a）您永远不会分配它，并且 b）在函数中分配它之前，您必须像处理其他变量一样调用 global actualValue 。如果您只是阅读@cdhowie 所指出的，则不需要使用 global

由于 actualValue 是 Nonetype 你不能将它乘以另一个数字。那是你的错误。

你可以做 3 件事中的 1 件事。

1) 如果你有 actualValue=None 将其更改为 actualValue=10000。

2）在main中设置actualValue如下：

```
def main():
    global actualValue
    actualValue = 10000
    ... 
```

3）按照另一个答案的建议参数化您的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:50:04.727

您可能想要重写您的代码，以便它使用参数和返回值而不是全局变量。

```
def actualValued(actualValue):
    assessed_value = 0.6 * actualValue
    property_tax = assessed_value/100*0.64
    return assessed_value, property_tax

# get your actual value from user input e.g.
value = raw_input('Give actual value: ')
value = float(value)
assessed, tax = actualValued(value)

print( "For a property valued at"), valued
print( "The assessed value is"), asessed
print( "The property tax is"), tax 
```

# java - Java HashMap 键事件

> ID：12699388
> 
> 赞同：-2
> 
> 时间：2012-10-02T22:32:21.493
> 
> 标签：java, hashmap, key-bindings

我正在尝试进行一些自定义键绑定。如果按下整数，则使用哈希图发送命令。我遇到的问题是

1.  它在执行命令`[]`
2.  它多次发送命令。

编码：

```
for (String key : CustomKeys.keySet()) {
    Integer value = CustomKeys.get(key);
    if (keyIsPressed(value)) {
        print(CustomKeys.keySet().toString());
        break; //Tried to break it so it didnt send it mutiple times. didnt work
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:45:54.027

显然，您的哈希图中有重复的值，无论这一切是关于什么的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:38:37.290

如果我正确理解了您的问题，您想在按下值（地图中的值）时打印键（地图中的字符串）。如果您使用中断，它会在遇到时退出循环。如果您想检查地图中的重复值，请执行以下操作。

```
public static HashMap<String, Integer> CustomKeys = new HashMap<String, Integer>();
public HashSet<Integer> hs = new HashSet<>();
for (String key : CustomKeys.keySet()) {
        Integer value = CustomKeys.get(key);

         if(keyIsPressed(value)) {
           if(!hs.contains(value)) {
           hs.add(value);
            print(CustomKeys.keySet().toString());
}
 else {
sysout("duplicate");
}
        }
    } 
```

# web-services - AngularJS 作为 SOAP 客户端

> ID：12699389
> 
> 赞同：10
> 
> 时间：2012-10-02T22:32:29.900
> 
> 标签：web-services, soap, angularjs

有没有办法将 angularJS 用作 SOAP 客户端或开发 ng SOAP 客户端服务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T15:29:47.820

当然。您所需要的只是在 JavaScript 上实现 SOAP 调用。例如[使用 Javascript 的最简单的 SOAP 示例](https://stackoverflow.com/questions/124269/simplest-soap-example-using-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-01T14:58:41.193

除了主要答案中的那篇 SO 文章之外，您还可以使用[$http 服务](https://docs.angularjs.org/api/ng/service/$http)而不是使用[XmlHttpRequest Web API](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)。我改用 $http 的原因是它为您提供了开箱即用的承诺和更轻松的 HTTP 方法处理。

[否则，这个 SO 上发布的](https://stackoverflow.com/questions/17490483/angularjs-soap-service-integration-with-angularjs-model)自定义 Angular $soap 服务可能会给你你想要的东西，它也在[Github](https://github.com/andrewmcgivery/angular-soap)上。

# ios - 如何从其中的库和地址列表中进行符号化？

> ID：12699390
> 
> 赞同：0
> 
> 时间：2012-10-02T22:32:46.200
> 
> 标签：ios, dlopen

我试图在我的设备上表示崩溃日志。我有堆栈帧、每个帧的指令指针地址、IP 所在的模块以及该模块的偏移量。我的计划是用来`dladdr()`获取每个堆栈帧地址的函数或方法。

我正在尝试在新的应用程序启动时执行此操作，因此我不知道当前已加载库或加载了它们的地址。我可以使用它`dlopen()`来确保库是打开的，但我不确定要将我之前计算的偏移量添加到哪个基地址。

有没有办法确定库的加载位置或从返回的句柄的意义`dlopen()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:03:58.693

在设备的下一次启动时进行符号化的问题是，您需要确保应用程序版本没有改变（如果您也想对它们进行符号化，那么您不应该这样做，因为您不会获得行号) 并且需要确保iOS版本也相同。因此，尝试打开它们可能会给您带来比您想要的更多的麻烦不成功的结果。

最安全、最可靠的方法是在您的 Mac 或服务器上进行符号化，您可以在其中收集所有符号，还可以获取您自己的应用程序代码的行号。

为什么不使用 PLCrashReporter 来收集崩溃日志？这以一种非常安全和可靠的方式完成了您所需要的一切，包括捕获异常、信号处理程序等。本文详细介绍了处理崩溃时遇到的一些问题：http: [//landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting .20110912.html](http://landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html)

请参阅[https://code.google.com/p/plcrashreporter/](https://code.google.com/p/plcrashreporter/)和我们的分叉，在崩溃发生时添加了一些 Mac 支持和安全（！！）系统库符号，请参阅[https://github.com/bitstadium /PLCrashReporter](https://github.com/bitstadium/PLCrashReporter)和[https://github.com/bitstadium/HockeySDK-iOS](https://github.com/bitstadium/HockeySDK-iOS)使用该分支。

一个重要的注意事项我忘了提及：自从 iOS 6 以来，很多符号在设备上进行符号化时都会导致“编辑”。您可能想要避免这种情况的另一个原因。

# jquery - 网站在后台加载，z-index 上下波动

> ID：12699391
> 
> 赞同：0
> 
> 时间：2012-10-02T22:32:51.667
> 
> 标签：jquery, z-index

我想这样做，以便我的网站按应有的方式加载，但同时背景图像（遍布整个页面）将执行 z-index=9999 并且 2 秒后将变为 z-index=-1;

关键是访问者将看到背景图像 2 秒钟，然后背景图像将回到应有的背景......

最重要的是，当这种情况发生时，我不想让脚本在没有从服务器加载网站的情况下运行并执行后台操作……我希望这种情况以某种方式发生，而不会陶醉内容（就在 2背景返回时的秒数）

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:40:37.870

首先，背景图像没有 z-index。它们的宿主对象可以具有整个对象的 z-index，而不仅仅是背景图像。

其次，您可以创建一个图像，将其放在一个 div 中，然后将该 div 放在具有 z-index 和绝对位置的所有其他内容的顶部。然后，当其他所有内容都加载完毕后，您可以更改该图像的 z-index。

或者，或者，您可以将所有内容放在一个主 div 中，将该 div 标记为`display: none`直到所有内容都加载完毕，然后将其更改为`display: block`.

# grails - Grails 数据绑定 - 无法修改不可变实体

> ID：12699393
> 
> 赞同：1
> 
> 时间：2012-10-02T22:32:59.120
> 
> 标签：grails, groovy, grails-orm

在 Grails 2.1.0 上，我正在尝试动态更新域类上的字段。该对象被绑定并且看起来很好，直到调用了 save 方法，这会引发以下异常：

## java.lang.IllegalStateException：无法使不可变实体可修改。

```
 try {
        def bindParams = [:]
        bindParams."$paramsFieldName" = "$paramsValue"
        def domainClass = grailsApplication.domainClasses.find { it.clazz.simpleName == paramsDomain }.clazz
        def objectInstance = domainClass.findById(paramsId)
        objectInstance."$paramsFieldName" = "$paramsValue"
        bindData(objectInstance, bindParams)
        objectInstance.save(flush:true ,failOnError:false)
        return objectInstance
    }
    catch (Exception ex) {
        log.error ex
        return null
    } 
```

我尝试使用直接分配绑定该字段并且效果很好。

```
objectInstance."$paramsFieldName" = convertToType( fieldType.name,paramsValue) 
```

但随后我需要处理每种情况的类型转换（我假设）。我需要的是 BindDynamicMethod 为我处理绑定。使用不可变的 BindDynamicMethod 绑定对象时会发生什么情况？或者我做错了什么导致它？

==================================================== =======

# 部分解决

事实证明，这发生在一些域上，但一些在其映射上使用缓存的域抛出了这个异常。

```
class UploadSettings {
    String profile = "default"
    String displayName
    String name 
    String value 
    String defaultValue 

    static mapping = {
        //cache usage:'read-only'

    }
} 
```

所以我想现在我的问题是如果一个域正在使用缓存，为什么我们不能更新它的值？或者我们该怎么做？如果域是不可变的，有没有办法捕获？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:47:01.050

是的，通过将其设置为只读，您正在使对象不可变，正如错误所说，恕我直言，这是一种误导，因为我们处于缓存的上下文中，但这背后有一些基本原理。

如果您需要在域级别进行缓存，那么将其设置为读写应该可以解决问题

查看[缓存使用情况](http://grails.org/doc/latest/guide/GORM.html#caching)

# ruby - nil:NilClass (NoMethodError) 的未定义方法 `email='

> ID：12699397
> 
> 赞同：-1
> 
> 时间：2012-10-02T22:33:47.003
> 
> 标签：ruby

我正在尝试让[facebook 清洁器](https://github.com/netcrawler/Facebook-Cleaner)工作，但是它失败并显示以下消息：

```
./lib/facebook.rb:140:in `get_home': undefined method `email=' for nil:NilClass (NoMethodError)
    from (eval):23:in `form_with'
    from ./lib/facebook.rb:139:in `get_home'
    from /var/lib/gems/1.8/gems/mechanize-2.5.1/lib/mechanize.rb:409:in `get'
    from ./lib/facebook.rb:137:in `get_home'
    from ./lib/facebook.rb:38:in `setup'
    from fb_cleaner.rb:34 
```

这是第 136 行到第 145 行的代码；

```
def get_home
  @a.get(MOBILE_URL) do |page|
    sleep(SLEEP_TIME)
    @home = page.form_with(:action => "https://login.facebook.com/login.php?m=m") do |f|
      f.email = @email
      f.pass = @password
    end.submit
  end
  @home
end # get_home 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:43:27.580

这个库中的最后一次提交是 2 年前。与此同时，Facebook 界面可能会发生变化。

其他用户也遇到同样的问题，有一张2 年前的[未结票。](https://github.com/netcrawler/Facebook-Cleaner/issues/1)

我认为可以合理地说图书馆不再工作，而且似乎没有维护。

# parallel-processing - 在不同架构上使用并行计算的最有效方法

> ID：12699399
> 
> 赞同：2
> 
> 时间：2012-10-02T22:33:47.103
> 
> 标签：parallel-processing, opencl, mpi, grand-central-dispatch

我打算写一些东西来利用我家里的许多设备。

基本上我的目标是使用笔记本电脑来执行计算，并使用我的主台式电脑来增加更多的力量（并更快地完成任务）。我从事细胞模拟和化学相互作用的工作，所以对我来说，利用我在家中可用的所有东西会很棒。

我主要使用 OSX，所以我需要一些可以与该操作系统一起使用的东西。我可以用 Objective-C、C 和 C++ 编写代码。

我知道 GCD、OpenCL 和 MPI，但我不确定该走哪条路。

我计划不使用我的桌面的全部功能，而只使用一些可用的内核（这样我就可以继续在桌面上工作，做其他资源不那么密集的任务）。我特别喜欢使用显卡的能力（它是 ATI 卡，所以没有 CUDA），因为我所做的主要是电子表格、文字和 Xcode 编码，而显卡资源在那种情况下基本上没有使用。

在前面提到的 3 个中，是否有一组特定的库或 API 可以让我有选择地路由任务，并在另一台机器上使用资源，而不会将控制权完全交给编译器？我听说 GCD 很棒，但它对块的执行位置的控制非常有限，而 MPI 则处于光谱的另一端……OpenCL 似乎处于中间位置。

在深入研究其中一种技术之前，我想知道哪一种最适合我的需求；我确信其他一些研究人员已经成功地使用并行计算来实现我想要实现的目标。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:43:15.917

MPI 更适用于科学计算 大规模 许多处理器 许多节点 不用于周末项目，对于您所描述的，我建议使用 OpenCl 或任何一个更分布式的 AMQP 协议系列框架，例如[zeromq](http://www.zeromq.org)或 rabbitMQ，或两者的组合OpenCl 和 AMQP，或者更简单的考虑多线程，我建议使用 OpenMP。我不确定您是否正在寻找直接求解器或并行函数，但您可以在网上找到许多用于 gpu 和 cpu 的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:37:47.930

抱歉，但这个问题根本无法像提出的那样**有意义地**回答。可以肯定的是，我可以抛出一组描述各种技术的流行语，比如 GCD、OpenMPI、OpenCL、CUDA 和任何数量的其他技术，这些技术允许一个人在多个内核上运行单个程序，在不同的协作计算机上运行多个程序，或者一个分布在 CPU 和 GPU 上的单个程序，听起来你已经知道其中的一些，所以我什至不会在列出流行语时增加太多价值。

然而，在不知道你要解决的问题的全部细节的情况下简单地抛弃这些术语，有点像说你一定会英语、法语和一点德语，所以无论如何 - 将它们混合在一起一个段落，而对目标受众一无所知！类似地，您可以跨任意数量的不同处理元素以任意数量的方式并行化给定的计算，但是这种并行化是否真的是一个**胜利**与否将完全取决于算法的性质、它的数据依赖性、每个合理的“工作块”需要多少计算，以及它是否可以在具有足够数值精度的 GPU 上执行，以及许多其他因素. 您选择的技术越复杂，这些因素就越重要，生成的代码实际上比其单线程、单机对应物**慢的可能性就越大。**IPC 开销和数据复制可以而且经常会淹没人们从尝试天真地并行化某些东西可能会实现的所有收益，然后在此之上增加额外的开销，从而导致净损失。这就是为什么对能够有意义且出色地完成此类工作的工程师的需求如此之高的原因。:)

在不了解您的计算的情况下，我会步步为营。首先尝试一个简单的多处理器框架，比如 GCD（它已经内置在 OS X 中，不需要使用额外的依赖项），并弄清楚如何分解代码，以便它可以有效地使用单台机器上的所有可用内核. 一旦你知道了胜利在哪里（如果有的话——如果多线程没有帮助，多机并行化几乎肯定也不会），尝试在几台机器上设置几个计算实例一个简单的 IPC 模型，允许分发工作。已经为多个线程考虑了您的算法，

# openerp - ReportLab 的 RML 的 OpenERP 版本是否支持框架？

> ID：12699400
> 
> 赞同：2
> 
> 时间：2012-10-02T22:33:51.730
> 
> 标签：openerp, reportlab, page-layout

我想在 OpenERP 中的一些报告中添加侧边栏或标题。ReportLab[用户手册 (PDF)](http://www.reportlab.com/docs/rml2pdf-userguide.pdf)描述了`<frame>`和`<nextFrame>`标签。OpenERP 是否完全支持它们？我已经完成了一些工作，但一帧只是流入下一帧，因此占用一页以上的报告最终会出现重叠的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:33:51.730

经过大量的代码挖掘，我有框架在 OpenERP 5.0 中工作。我必须找到的关键特征是`last="true"`框架定义的属性。这意味着框架应该假定它是页面上的最后一个框架。任何溢出的文本都将流到新页面的第一帧，而不是当前页面的下一帧。我最终在我的所有框架上都设置了它。要查看带有框架的示例，请参阅我们的[资产负债表报告](http://bazaar.launchpad.net/~zaber/openobject-addons/main/view/3033/account_reporting/report/account_report_bs.rml)中的一些片段。

```
<template 
    pageSize="(8.5in,11in)" 
    title="Test" 
    author="Zaber Technologies Inc." 
    allowSplitting="20">
  <pageTemplate id="first">
    <frame 
        id="first" 
        x1="1.3cm" 
        y1="0.2cm" 
        height="27.5cm" 
        width="14.0cm" 
        last="true"/>
    <frame 
        id="upper_right" 
        x1="14.1cm" 
        y1="21.53cm" 
        height="5.2cm" 
        width="5.0cm" 
        last="true"/>
  </pageTemplate>
</template> 
```

此部分指定您的页面布局。默认情况下，文本将从列表的第一帧开始。*是到页面底部*`y1`的距离。您可以在两个位置指定页面模板：在报表本身内，或在公司配置中定义的标题内。如果使用页眉，则报表的第一页模板将替换为页眉的页面模板，因此报表模板可以只是一个标签，其中包含一个空标签。公司表头只能使用一个页面模板，但每个报表可以定义多个页面模板。*`pageTemplate``frame`*

 *当您想在其他框架之一中放置某些东西时，请使用`setNextFrame`and `nextFrame`。

```
<setNextFrame name="upper_right"/>
<nextFrame/> 
```

您不必按顺序使用框架。您可以切换到列表中较早的帧，它不会开始新页面。

有关更改标头的更多详细信息，请参阅[文档](http://doc.openerp.com/v6.1/developer/05_reports.html#parser)或有关[用户定义标头](https://stackoverflow.com/a/12698913/4794)的问题。*

# git - 在 SVN -> Git 迁移期间要保留的 SVN 属性的版本等效项

> ID：12699405
> 
> 赞同：0
> 
> 时间：2012-10-02T22:34:14.953
> 
> 标签：git, svn, migration, cvs

为了对发布给我们客户的所有 jar 文件的内容进行版本控制，在过去几年中，我们一直在这些 jar 中发布一个文本文件，该文件将保存`File <-> CVS Version`该 jar 中包含的每个 java 文件的映射。CVS 存储库被用作我们的 VCS。

不怀疑当时是否没有更好的解决方案，几个月前，我们决定迁移到 SVN，我们的解决方案是为一个可能随时从客户生产环境中检索到的长期被遗忘的 jar 保留历史，是`svn property`为每个迁移的 java 文件添加自定义。

* * *

例如：

`My/Foo/Bar.java`在 CVS 版本迁移`1.2.33.5`到 SVN，因为`svn-rev.5678`将收到以下属性：`svn:cvs = 1.2.33.5`.

`My/Foo/Bar.java`对（CVS 版本）的最后更改`1.2.33.4`被映射到`svn-rev.5145`为我们的文件设置了 svn 属性的`svn:cvs = 1.2.33.4`.

可以轻松浏览该文件的 SVN 状态/日志，因此可以同时浏览对该文件所做的更改和`svn:cvs`属性值的历史记录。

现在，当一个新的 svn 签入到那个文件时，比如说 as `svn-rev.5700`，所有需要做的就是清除该属性。

任务完成——我们本可以完全放弃 CVS。

* * *

转移到 Git。

我们路径上的下一步是将一些遗留的 TFS 存储库与我们现在拥有的 SVN 存储库合并，并且不详细介绍，我们希望遵循的方法是将这两者直接迁移到 Git。

我们关心的一个主要问题是如何不丢失在我们第一次迁移期间引入的 svn:cvs 属性。意识到[gitattributes](http://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)似乎是正确的方法，但没有更好的选择吗？真的有必要`.gitattributes`在源代码周围存储文件吗？（全局文件可能不实用）。此外，从 svn 属性生成这些文件及其历史记录听起来不像是一个简单的脚本。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:43:37.310

你应该看一下[git-notes](http://www.kernel.org/pub/software/scm/git/docs/git-notes.html)看看它是否是你想要使用的东西。通常注释附加到提交，但它们可以附加到任何对象，包括文件对象。

将注释附加到文件对象的问题在于，每当该文件更改时，对象也会更改，并且不会复制其注释。但是，您也可以使用一个[挂钩](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)，在文件更改时自动更新这些注释。

# apache - 使用和不使用查询字符串的 URL 重写 mod_rewrite

> ID：12699408
> 
> 赞同：0
> 
> 时间：2012-10-02T22:34:21.783
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, friendly-url

我正在尝试使用以下代码从 domain.com/page/soft-15/android-26/ 重写为 page.php?cat=15&os=26：

```
RewriteRule ^page/([0-9]+)\-([a-zA-Z0-9-]*)/([0-9]+)\-([a-zA-Z0-9-]*)$ page.php?cat=$1&os=$2 
```

我认为它工作正常，但是，我怎样才能将 domain.com/page/ 和 domain.com/page （没有最后一个正斜杠）重写为 domain.com/page.php 以保持这两个规则的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:41:39.650

好吧，我想我把 Jimp 和 Jon 代码混合在一起了

```
RewriteRule ^page/?$ page.php [L]
RewriteRule ^page/(?:[a-zA-Z0-9-]*-)?([0-9]+)/(?:[a-zA-Z0-9-]*-)?([0-9]+)/?$ page.php?cat=$1&os=$2 [L]
RewriteRule ^page/(?:[a-zA-Z0-9-]*-)?([0-9]+)/?$ page.php?cat=$1 [L] 
```

这个数学与

```
domain.com/page
domain.com/page/
domain.com/page/soft-15
domain.com/page/soft-15/
domain.com/page/15
domain.com/page/15/
domain.com/page/soft-15/android-26
domain.com/page/soft-15/android-26/
domain.com/page/soft-15/26
domain.com/page/15/26
and so on... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:36:11.757

`/?`在您的模式中添加尾随（在`$`锚点之前）。使可选`?`。`/`

此外，您的模式似乎落后，匹配字符前的数字。试试这个：

```
RewriteRule ^page/(?:([a-zA-Z\d-]*)-)?(\d+)/(?:([a-zA-Z\d-]*)-)?(\d+)/?$ page.php?cat=$1&os=$2 
```

这应该与这些变化相匹配，如下所示：

```
domain.com/page/soft-15/android-26
domain.com/page/soft-15/android-26/
domain.com/page/15/android-26
domain.com/page/15/android-26/
domain.com/page/soft-15/26
domain.com/page/soft-15/26/
domain.com/page/15/26
domain.com/page/15/26/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:53:26.757

您的反向引用似乎与您使用的示例不符：

*   `/page/soft-15/android-26/`
*   到`page.php?cat=15&os=26`

您的正则表达式看起来很匹配：

*   `/page/15-soft/26-android/`

并重写为：

*   `page.php?cat=15&os=soft`

如果你按照你的例子，你会想要这样的东西：

```
RewriteRule ^page/[a-zA-Z0-9-]*?-([0-9]+)/[a-zA-Z0-9-]*?-([0-9]+)/?$ page.php?cat=$1&os=$2
RewriteRule ^page/[a-zA-Z0-9-]*?-([0-9]+)/?$ page.php?cat=$1
RewriteRule ^page/?$ page.php 
```

# php - 打印值在 JSON 响应的 Array 内形成 std Object

> ID：12699418
> 
> 赞同：0
> 
> 时间：2012-10-02T22:35:51.790
> 
> 标签：php, json, object, echo, valuestack

我对 php 和 JSON 有点陌生，在四处寻找回应后我找不到一个，我希望你能帮助我……</p>

我正在处理带有 JSON 响应的报告 JSON 响应看起来有点像这样：

```
stdClass Object
(
[FlightInformation] => stdClass Object
    (
   [@size] => 10
     [Itinerary] => Array
       (
         [0] => stdClass Object
           (
            [bookingID] => 123456789
            [creationDate] => 10/04/2012
            [Customer] => stdClass Object
               (
                [email] => someone@aol.com
               )
               [FlightConfirmation] => stdClass Object
                  (
                    [supplierId] => AA
                    [arrivalDate] => 10/04/2012
                    [departureDate] => 10/05/2012
                    [confirmationNumber] => 0987654321
                    [RateInformation] => stdClass Object
                  (
                    [@size] => 1
                    [RateDescription] => stdClass Object
                        (
                         [@promo] => false
                         [ChargeableInfo] => stdClass Object
                             (
                              [@total] => 57.94 
```

我建立一个像这样的报告..

```
foreach( $response->FlightInformation->Itinerary as $output) {

    echo $output-> bookingID;
    echo $output-> creationDate;
    echo $output-> arrivalDate;         <<<< won't Print
    echo $output->departureDate;    <<<< won't Print
    echo $output->total;            <<<< won't Print 
```

以及更多元素……但是在行程数组内的对象下的任何内容都不会显示……我无法打印指示的这些值，请帮助……</p>

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:41:03.203

那是因为到达、离开和总计本身就是对象。您必须执行以下操作：

```
 $output->Customer->FlightConfirmation->arrivalDate;
 $output->Customer->FlightConfirmation->departureDate
 $output->Customer->FlightConfirmation->RateInformation->RateDescription->ChargeableInfo->total; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:41:16.883

您缺少嵌套这些元素的级别在里面`FlightConfirmation`：

# c# - “路线。小写Urls =真；” 不工作？

> ID：12699426
> 
> 赞同：18
> 
> 时间：2012-10-02T22:36:45.033
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, .net-4.5

默认情况下，我无法将路由设置为小写。由于某种原因，它不起作用。我知道我可以设置`authorize`和`home`小写自己，但`Admin`部分（区域）仍将大写..

`@Html.ActionLink("Hello World", "Authorize", "Home")`
输出到
`<a href="/Admin/Home/Authorize">Hello World</a>`

区域路线

```
public override void RegisterArea(AreaRegistrationContext context)
        {
            context.Routes.LowercaseUrls = true;
            context.MapRoute(
                "Admin_default",
                "Admin/{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                new string[] { "OR.Areas.Admin.Controllers" }
            );
            context.Routes.LowercaseUrls = true;
        } 
```

默认路由

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.LowercaseUrls = true;
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
            routes.LowercaseUrls = true;
            routes.MapRoute(
                name: "Localization",
                url: "{lang}/{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                namespaces: new string[] { "OR.Controllers" }
            );
            routes.LowercaseUrls = true;
            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                namespaces: new string[] { "OR.Controllers" }
            );

            routes.LowercaseUrls = true;
        } 
```

## 我尝试过的管理区域配置

```
// admin/Home/Authorize
public override void RegisterArea(AreaRegistrationContext context)
{
    context.Routes.LowercaseUrls = true;
    context.MapRoute(
        "Admin_default",
        "{area}/{controller}/{action}/{id}",
        new { area = "admin", controller = "home", action = "Index", id = UrlParameter.Optional },
        new string[] { "ORMebeles.Areas.Admin.Controllers" }
    );
    context.Routes.LowercaseUrls = true;
}

// admin/Home/Authorize
public override void RegisterArea(AreaRegistrationContext context)
{
    context.Routes.LowercaseUrls = true;
    context.MapRoute(
        "Admin_default",
        "admin/{controller}/{action}/{id}",
        new { controller = "home", action = "Index", id = UrlParameter.Optional },
        new string[] { "ORMebeles.Areas.Admin.Controllers" }
    );
    context.Routes.LowercaseUrls = true;
} 
```

## 编辑

这似乎是 MVC4 的错误 - 当您设置`context.Routes.LowercaseUrls = true;`并且您拥有区域/区域`context.Routes.LowercaseUrls = true;`时不会产生任何影响，我们应该在哪里报告它或者我们如何修复它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-16T12:53:00.317

这是与 MVC4 相关的错误，将在 MVC5 版本中修复。`Routes.LowercaseUrls`不影响区域。更多信息[在这里](http://aspnetwebstack.codeplex.com/workitem/685)。

同时，如果您需要 WebApi 支持，您可以使用[LowercaseRoutesMVC](https://www.nuget.org/packages/LowercaseRoutesMVC/1.0.3)或 [LowercaseRoutesMVC4 。](https://www.nuget.org/packages/LowercaseRoutesMVC/1.0.3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:18:17.443

更新：***在 MVC4 应用程序中***

创建一个新的空白 MVC4 应用程序并添加一个名为 Test 的区域，其中包含一个 Test.cshtml 视图和一个 TestController.cs 控制器。

所以我想出了一些东西......虽然我不确定这是否是一个合理的解决方案。在玩过路线注册例程之后，在项目中拥有区域并不会破坏小写功能。

```
namespace MvcApplication1.Areas.Test
{
public class TestAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Test";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        //This line breaks the functionality in the area registration.
        context.MapRoute(
            "Test_default", // Route name
            "Test/{controller}/{action}/{id}", // URL with parameters
            new { controller = "Test", action = "Index", id = "" }, // Parameter defaults
            new string[] { "MvcApplication1.Areas.Test.Controllers" } //namespace
            );
    }
}
} 
```

一种解决方法：

注释掉这些行

```
 //context.Routes.LowercaseUrls = true;
        //context.MapRoute(
        //    "Test_default", // Route name
        //    "Test/{controller}/{action}/{id}", // URL with parameters
        //    new { controller = "Test", action = "Index", id = "" }, // Parameter defaults
        //    new string[] { "MvcApplication1.Areas.Test.Controllers" } //namespace
        //    ); 
```

在 RouteConfig.cs 中

```
namespace MvcApplication1
{
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.LowercaseUrls = true;

        routes.MapRoute(
            "Default", 
            "{controller}/{action}/{id}", 
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            "Test_default", // Route name
            "Test/{controller}/{action}/{id}", // URL with parameters
            new { controller = "Test", action = "Index", id = "" }, // Parameter defaults
            new string[] { "MvcApplication1.Areas.Test.Controllers" } //namespace
            );
    }
}
} 
```

在区域控制器动作方法

```
 public ActionResult Index()
    {
        // Key if statement to make sure the area maps correctly
        if (!this.ControllerContext.RouteData.DataTokens.ContainsKey("area"))
        {
            this.ControllerContext.RouteData.DataTokens.Add("area", "Test");
        }
        return View("Test");
    } 
```

项目主页中链接的结果 HTML

```
 <ul id="menu">
   <li><a href="/">Home</a></li>
   <li><a href="/home/about">About</a></li>
   <li><a href="/home/contact">Contact</a></li>
   <li><a href="/test?area=Test">Test</a></li>
 </ul> 
```

但是请注意，查询字符串变量不是小写的，它不是对 seo 友好的 url。但是它确实找到了视图。这与我能够使用该标志并使网址变为小写字母一样接近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:55:43.933

我尝试***了几次***尝试让这个特定的布尔标志与 MVC3 项目一起工作，但没有成功。我可以让它工作 的***唯一方法是创建一个 MVC4 应用程序项目并在应用程序启动的 RouteConfig.cs 文件中设置标志。*****真正糟糕的部分**是它自动为我将整个网站的网址小写，直到我添加了一个区域，然后它到处都坏了。一旦我从项目中排除了新添加的区域并重新运行，网址就会再次小写。

使用该标志有些奇怪。我建议下载用于小写 url 的 nuget 包。似乎他们还没有完全解决新框架这一部分的问题。

抱歉，我无法提供更多帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-23T07:27:08.530

据我所知，`LowercaseUrls = true`仅在 .NET4.5 中可用，也许您可​​以为小写 url 编写一些扩展。您可以参考[使 URL 小写。任何简单或内置](https://stackoverflow.com/questions/6168270/making-url-lowercase-any-easy-or-builtin-way)的详细信息方式。

# python - GAE Python - PyCrypto - 没有名为 winrandom 的模块

> ID：12699428
> 
> 赞同：4
> 
> 时间：2012-10-02T22:36:52.693
> 
> 标签：python, windows, google-app-engine, pycrypto

我正在尝试在我的 App Engine (Python) 开发服务器上启动并运行 PyCrypto。我使用[Voidspace](http://www.voidspace.org.uk/python/modules.shtml#pycrypto "虚空")二进制文件（pycrypto-2.0.1.win-amd64-py2.6.exe）安装了 PyCrypto。

我正在运行 Windows 7 64 位。从我发现这个来自 Voidspace 的二进制文件没有正确安装 winrandom，因为 winrandom 没有 64 位二进制文​​件。我曾尝试使用 VS 2008 编译 64 位版本，但这超出了我的知识范围，我不知道我是否做得对。我遵循 PyCrypto 的[以下](http://blog.victorjabur.com/2011/06/05/compiling-python-2-7-modules-on-windows-32-and-64-using-msvc-2008-express/ "下列的")说明，但尝试编译 winrandom 源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:56:59.413

由于 pycrypto 是[Google App Engine 第三方库的](https://developers.google.com/appengine/docs/python/tools/libraries27)一部分，因此无需手动安装 pycrypto 即可在您的项目中使用它。相反，您需要将库添加到您的 app.yaml：

```
libraries:
- name: pycrypto
  version: "2.6" 
```

# html - Facebook 从页面中获取图像

> ID：12699434
> 
> 赞同：1
> 
> 时间：2012-10-02T22:37:48.280
> 
> 标签：html, facebook, image

> **可能重复：**
> [Facebook Sharer 如何选择图片？](https://stackoverflow.com/questions/1138460/how-does-facebook-sharer-select-images)

我很好奇为什么当页面上有大量图片时，Facebook 并不总是为发布的链接选择图片？我有几张图片，但我似乎无法让它为它的链接注册一张。

[http://www.rubytuesdaycreative.co.uk](http://www.rubytuesdaycreative.co.uk)

有什么我可以做的吗？是否可以在我的网站中创建隐藏但 Facebook 会选择的特定图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:40:31.957

使用[OpenGraph 元标签](http://davidwalsh.name/facebook-meta-tags)。具体来说，我认为你想要这样的 og:image ：

```
<meta property="og:image" content="http://davidwalsh.name/wp-content/themes/klass/img/facebooklogo.png"/> 
```

# c# - IoC Windows 服务架构

> ID：12699441
> 
> 赞同：7
> 
> 时间：2012-10-02T22:38:36.593
> 
> 标签：c#, architecture, inversion-of-control, autofac

我传统上是一个 SQL 人。我有很多 C# 经验，但这些都倾向于工具或定制项目。

我现在的任务是编写一个执行以下操作的应用程序......

*   作为 Windows 服务运行
*   监视文件，当它们到达时，将它们加载到数据库
*   监视数据库中新加载的文件
*   对这些文件执行一些复杂的解析（涉及聚合数据库记录）
*   需要额外的接口（用于查询解析数据等的网站）
*   必须支持多种文件类型，必须支持多种解析器。

所以，这是我第一次涉足 IoC，我正在尽我所能正确地做事。我正在使用 Autofac 并且对这些概念非常满意。我的问题是理解组合根，当可以通过容器时，我应该用什么来代替我传统的“工厂”概念。我的应用程序由 L2S 模型和通用存储库接口构成。我使用 Autofac 模块来注册具体类型。我有一个记录器并使用一个模块来注册具体类型。在我的测试控制台应用程序（将被 Windows 服务主机替换）中，我创建了一个容器并注册了记录器和 dal 模块等。然后我可以使用构造函数注入来解析我的文件监视类以注入记录器和存储库。我还注入了一个队列对象（在我的例子中是一个内存支持的队列，但可能是一个数据库队列），新文件排队（生产者）。在队列的另一端，我需要一个消费者。因此，根据出列文件的类型，我需要使用不同的加载器类。我会在历史上使用工厂模式来返回适当的具体类。由于加载器类需要有一个记录器和适当的存储库注入其中，我看不到如何创建适当的加载器类的实例来处理从队列中出来的项目，而不给我的工厂类提供对 IoC 容器的引用。我知道我可以将各种项目处理程序注入到我的消费者类中，但是说我有 50 种文件类型，或者说 100 种，这是不切实际的。我需要使用不同的加载器类。我会在历史上使用工厂模式来返回适当的具体类。由于加载器类需要有一个记录器和适当的存储库注入其中，我看不到如何创建适当的加载器类的实例来处理从队列中出来的项目，而不给我的工厂类提供对 IoC 容器的引用。我知道我可以将各种项目处理程序注入到我的消费者类中，但是说我有 50 种文件类型，或者说 100 种，这是不切实际的。我需要使用不同的加载器类。我会在历史上使用工厂模式来返回适当的具体类。由于加载器类需要有一个记录器和适当的存储库注入其中，我看不到如何创建适当的加载器类的实例来处理从队列中出来的项目，而不给我的工厂类提供对 IoC 容器的引用。我知道我可以将各种项目处理程序注入到我的消费者类中，但是说我有 50 种文件类型，或者说 100 种，这是不切实际的。如果不给我的工厂类提供对 IoC 容器的引用，我看不到如何创建适当的加载器类的实例来处理从队列中出来的项目。我知道我可以将各种项目处理程序注入到我的消费者类中，但是说我有 50 种文件类型，或者说 100 种，这是不切实际的。如果不给我的工厂类提供对 IoC 容器的引用，我看不到如何创建适当的加载器类的实例来处理从队列中出来的项目。我知道我可以将各种项目处理程序注入到我的消费者类中，但是说我有 50 种文件类型，或者说 100 种，这是不切实际的。

在我了解如何执行此操作后，我需要执行类似的操作来监视新的解析作业（数据库表中的条目）并处理这些作业，但我假设它会遵循与上述类似的模式。

大家有什么建议吗？我距离合并我的 C# 和去 SSIS 进行文件加载，然后在 SSIS 中破解一些讨厌的解析器代码还有这么远（小距离）。请帮助 C# 学习者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:23:59.420

听起来您正在尝试在应用程序中构建每个实体的容器 - 谨慎使用 DI，并且仅在您需要可替代行为的地方使用，在适当的情况下使用普通的旧“新”没有任何问题。

另一个建议可能是使用接口标记自定义文件加载器，比如 IFileLoader，运行所有加载的程序集并（使用反射）检测实现的加载器。然后，将所有加载器组装在一个责任链中，这样如果一个加载器无法处理相关文件类型，它就会将责任传递给下一个。这样，添加新的加载器将很容易，并且文件监视部分与加载部分明显分开。COR 模式不是必须的，当然可以通过简单的循环来提供功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:47:51.133

Here's my take on how you as a newbie should start.

Start writing your classes. All dependencies on other classes are taken in the constructor.

Since you never new up a class to get an instance at any other point than when you are constructing your objects, it will make your program look similar to this:

```
static void Main(..) {
  var s1 = ...;
  var s2 = ...;
  var sn = ... SN(s1, s2, ..);
  sn.Wait();
} 
```

Now you can replace all ... with registrations in your container. You don't use factory classes at all; an IoC container IS your factory. And then you replace the very root initialisation:

```
var sn = container.Resolve<SN>(); 
```

Now you are using IoC. Don't use a dictionary.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T07:05:22.277

我已经意识到我可以新建一堆加载器类并将它们放入字典中并将其传递给构造函数。这使我可以按名称询问装载机。

# iphone - 是否兼容使用 iOS SDK 6.0 为 iOS 5.1 开发应用程序

> ID：12699444
> 
> 赞同：4
> 
> 时间：2012-10-02T22:38:46.837
> 
> 标签：iphone, ios, xcode, ios5, ios6

我刚刚将我的 XCode 升级到 4.5 并安装了 SDK 6.0。我发现 SDK 5.0 消失了，但我仍然可以下载回 Iphone 5.0 模拟器。

我只是想知道天气我可以使用 SDK 6.0 为 iOS 5.1 开发应用程序。我做了如下图所示的配置。

![在此处输入图像描述](../Images/1a66485683384d4dbd06b83ba94cac91.png) ![在此处输入图像描述](../Images/19169fb50fb733bbf1145215ab709541.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T22:48:09.623

是的，任何 iOS SDK 都允许您为以前版本的操作系统进行开发。例如，即使使用 iOS6 SDK，您也可以针对 iOS5 进行开发。

您只需将“部署目标”设置为 5.1。

然后您可以：

*   要么只使用 iOS5.1 中可用的方法，不要使用任何 iOS6-only 方法来确保您的应用程序仍将在 iOS5.1 中运行
*   或者每次您想调用仅在 iOS6 中可用的方法时在运行时执行检查，并且仅在该方法可用时才调用此方法（如果用户的 iPhone 具有支持此方法的最新版本的 iOS）。

有关配置和示例案例的更多信息和详细说明，我强烈建议阅读**Apple 文档中****的[SDK 兼容性指南](http://developer.apple.com/library/ios/#Documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html)**。

* * *

例如，如果你想提供一个在社交网络上分享内容的按钮，你可能想使用 Social.framework，但这个只在 iOS6 上可用。因此，您可以为 iOS6 用户建议此功能，并提醒 iOS5 用户他们需要将 iPhone 更新到 iOS6 才能使用此特定功能：

```
// Always test the availability of a class/method/... to use
// instead of comparing the system version or whatever other method, see doc
if ([SLComposeViewController class])
{
    // Only true if the class exists, so the framework is available we can use the class
    SLComposeViewController* composer = [composeViewControllerForServiceType:SLServiceTypeFacebook];
    // ... then present the composer, etc and handle everything to manage this   
} else {
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Sharing unavailable"
                message:@"You need to upgrade to iOS6 to be able to use this feature!"
                delegate:nil
                cancelButtonTitle:nil
                otherButtonTitles:@"OK, will do!"];
    [alert show];
    [alert release];
} 
```

然后只需弱链接 Social.framework（将框架添加到链接器构建阶段时将“必需”更改为“可选”），如文档中详细说明的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:40:30.567

是的，您仍然可以使用 iOS 6 SDK 创建与 iOS 5 兼容的应用程序。您必须相应地设置部署目标（正如您所做的那样）并且不使用任何 iOS 6 功能。

# .net - 分发 F# 应用程序（启动时崩溃）

> ID：12699449
> 
> 赞同：2
> 
> 时间：2012-10-02T22:39:09.037
> 
> 标签：.net, f#, dll

我有一个 F# 3.0 应用程序，它在构建它的计算机上运行良好。我已经复制了应用程序、FSharp.Core.dll 和其他似乎与安装了 .net v4.0 的 Windows Server 2003 机器相关的 dll。

应用程序正确启动，但很快就崩溃了。消息是“app.exe 中发生未处理的 Microsoft .NET Framework 异常 [每次都不同的一些数字]。即时调试此异常失败并出现以下错误：没有安装的调试器具有即时调试启用 (....)"

如果我删除 FSharp.Core.dll，消息是相同的。在这种情况下，应用程序甚至没有得到它的初始消息。这让我认为原因可能是缺少其他一些 dll。

我已经尝试过 Dependency Walker，但它似乎甚至没有提到 Fsharp.Core。它确实抱怨缺少一些谷歌建议无关紧要的 dll（例如名称中带有 shim/设备管理器的东西）。我也尝试启动 Fuslogvw.exe，但它只是坐在那里而没有记录任何输出。我无法在目标计算机上安装 MSVC。

对于尝试什么的任何建议，我将不胜感激。非常感谢。

编辑：.net 反射器也没有报告任何明显错误的东西....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:41:55.430

尝试在入口点的最开始附加到[AppDomain.UnhandledException事件。](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)即，`AppDomain.CurrentDomain.UnhandledException.Add(fun e -> ... log error ...)`尝试在您的应用程序卸载之前捕获错误是什么。

如果您的应用程序是 Windows 应用程序，您还可以将处理程序附加到[Application.UnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.unhandledexception%28v=vs.95%29.aspx)以尝试相同的操作。

[另一种选择是将远程调试](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)可再发行组件复制到目标计算机，然后从源所在的位置连接到它。这将允许您进入实际发生崩溃的代码点。

如果您的应用程序是多域主机，那么远程调试器可能是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:39:56.360

如果依赖项有问题，可以尝试使用 --standalone

作为编译器参数。如果您只想分发一个简单的应用程序，这可能会有所帮助。

如果您仍然有问题，您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来识别您的应用程序尝试读取/加载但失败的文件和注册表项。请记住在监视器中设置一个过滤器，*只*针对您的应用程序，否则您的系统将开始爬行，试图记录所有内容。

# ios - 视频开始播放时暂停歌曲（反之亦然）

> ID：12699450
> 
> 赞同：4
> 
> 时间：2012-10-02T22:39:13.280
> 
> 标签：ios, interrupt, avplayer

我有一个使用 AVPlayer 播放歌曲和一个 UIWebView 播放 YouTube 视频的应用程序。当我针对 iOS 5 构建它时，音频和视频拒绝一起播放，这是我喜欢的。按下一个播放会自动暂停另一个，并有一个不错的半秒淡出。

现在我正在针对 iOS 6 进行构建，这种行为已经消失了——歌曲和视频相互播放。如何恢复 iOS 5 的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:36:36.990

在您的 App 委托中添加共享类别：

```
NSError *setCategoryErr = nil;
NSError *activationErr  = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
[[AVAudioSession sharedInstance] setActive:YES error:&activationErr]; 
```

这将仅限于一个活动的音频会话

# c++ - 具有侵入式链表的 C++ 循环依赖

> ID：12699452
> 
> 赞同：0
> 
> 时间：2012-10-02T22:39:20.070
> 
> 标签：c++, templates, linked-list, circular-dependency, intrusive-containers

我已经实现了这个侵入式链表：

```
template <class Entry>
struct LinkedListNode {
    Entry *next;
    Entry *prev;
};

template <class Entry, LinkedListNode<Entry> Entry::*NodeMember>
class LinkedList {
public:
    void init ();
    bool isEmpty () const;
    Entry * first () const;
    Entry * last () const;
    Entry * next (Entry *e) const;
    Entry * prev (Entry *e) const;
    void prepend (Entry *e);
    void append (Entry *e);
    void insertBefore (Entry *e, Entry *target);
    void insertAfter (Entry *e, Entry *target);
    void remove (Entry *e);

public:
    Entry *m_first;
    Entry *m_last;
};

...
template <class Entry, LinkedListNode<Entry> Entry::*NodeMember>
inline Entry * LinkedList<Entry, NodeMember>::next (Entry *e) const
{
    return (e->*NodeMember).next;
}
... 
```

它可以这样使用：

```
struct MyEntry {
    int value;
    LinkedListNode<MyEntry> list_node;
};

LinkedList<MyEntry, &MyEntry::list_node> list;
list.init();
MyEntry entry1, entry2;
entry1.value = 3;
list.append(&entry1);
entry2.value = 5;
list.prepend(&entry2); 
```

它可以正常工作，直到您需要两个包含彼此列表的对象：

```
struct MyEntry2;

struct MyEntry1 {
    int value;
    LinkedListNode<MyEntry1> node;
    LinkedList<MyEntry2, &MyEntry2::node> list;
};

struct MyEntry2 {
    int value;
    LinkedListNode<MyEntry2> node;
    LinkedList<MyEntry1, &MyEntry1::node> list;
}; 
```

每个MyEntry1 都持有一个MyEntry2 的列表，每个MyEntry2 只能出现在一个MyEntry1 的列表中；反之亦然。但是，这不会编译，因为成员指针 &MyEntry2::node 是在定义 MyEntry2 之前获取的：

```
prog.cpp:33:27: error: incomplete type 'MyEntry2' used in nested name specifier
prog.cpp:33:41: error: template argument 2 is invalid 
```

这种有问题的布局实际上没有任何实际语义，这只是我发现的一个理论问题，它可能会限制通用链表的可用性。

有什么方法可以解决这个问题，这不会使列表变得更加不切实际吗？

**编辑**：这里所有数据结构的布局都是完全定义的。这是因为 LinkedList 的数据成员不依赖有问题的 NodeMember 模板参数；只有函数可以。问题似乎是该语言要求知道 &MyEntry2::node ，即使它当时并不真正需要知道。

**编辑**：必须可以使用此通用列表将结构添加到两个或多个列表中；这是 NodeMember 模板参数的用途 - 它指定要使用条目中的哪个 LinkedListNode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:20:04.777

这是一个使用继承的实现，它不会受到您的问题的影响。

```
template <typename Entry>
struct LinkedListNode {
    Entry *next;
    Entry *prev;
};

template <class Entry>
class LinkedList {
public:
    void init ();
    bool isEmpty () const;
    Entry * first () const;
    Entry * last () const;
    Entry* next (Entry* e) const {
        return e->next;  
    }
    Entry * prev (Entry *e) const;
    void prepend (Entry *e);
    void append (Entry *e);
    void insertBefore (Entry *e, Entry *target);
    void insertAfter (Entry *e, Entry *target);
    void remove (Entry *e);
public:
    LinkedListNode<Entry> *m_first;
    LinkedListNode<Entry> *m_last;
};

struct MyEntry2;

struct MyEntry1 : public LinkedListNode<MyEntry1> {
    int value;
    LinkedList<MyEntry2> list;
};

struct MyEntry2 : public LinkedListNode<MyEntry2> {
    int value;
    LinkedList<MyEntry1> list;
}; 
```

这是一个解决方案，其中 LinkedList 有一个函子作为第二个模板参数。我们使用带有模板的访问器函子 `operator()`来删除代码重复并延迟名称的查找。**注意：**访问器实际上应该是一个成员，并使用空基优化处理。

```
template <class Entry>
struct LinkedListNode {
    Entry *next;
    Entry *prev;
};

template <class Entry, typename Func>
class LinkedList {
public:
    void init ();
    bool isEmpty () const;
    Entry * first () const;
    Entry * last () const;
    Entry * next (Entry *e) const {
      Func f;
      return f(e).next();
    }
    Entry * prev (Entry *e) const;
    void prepend (Entry *e);
    void append (Entry *e);
    void insertBefore (Entry *e, Entry *target);
    void insertAfter (Entry *e, Entry *target);
    void remove (Entry *e);

public:
    Entry *m_first;
    Entry *m_last;
};

struct MyEntry2;

struct node_m_access {
  template <typename T>
  LinkedListNode<T> operator()(T* t) const {
    return t->node;
  }
};

struct MyEntry1 {
    int value;
    LinkedListNode<MyEntry1> node;
    LinkedList<MyEntry2, node_m_access> list;
};

struct MyEntry2 {
    int value;
    LinkedListNode<MyEntry2> node;
    LinkedList<MyEntry1, node_m_access> list;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:49:58.080

这个问题相当于尝试这样做：

```
struct MyEntry2;

struct MyEntry1 {
    MyEntry2 a;
};

struct MyEntry2 {
    MyEntry1 b;
}; 
```

在上述情况下，编译器在生成 MyEntry1 时需要知道 MyEntry2 结构的大小。在您的情况下，编译器在生成 MyEntry1 时需要知道 MyEntry2 中节点的偏移量。

我在 template-foo 方面没有经验，但我猜想不是让 Entry 成为一个类，而是使用一个指向类的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:38:27.240

这是 pmr 的访问器解决方案的一个小修改，以减少样板的数量。诀窍是首先提供访问器的不完整“结构”声明，用这些实例化 LinkedList，然后通过从模板访问器类继承来完成访问器。

```
template <class Entry>
struct LinkedListNode {
    Entry *next;
    Entry *prev;
};

template <class Entry, class Accessor>
class LinkedList {
public:
    void init ();
    bool isEmpty () const;
    Entry * first () const;
    Entry * last () const;
    Entry * next (Entry *e) const {
        return Accessor::access(e).next;
    }
    Entry * prev (Entry *e) const;
    void prepend (Entry *e);
    void append (Entry *e);
    void insertBefore (Entry *e, Entry *target);
    void insertAfter (Entry *e, Entry *target);
    void remove (Entry *e);

public:
    Entry *m_first;
    Entry *m_last;
};

template <class Entry, LinkedListNode<Entry> Entry::*NodeMember>
struct LinkedListAccessor {
    static LinkedListNode<Entry> & access (Entry *e)
    {
        return e->*NodeMember;
    }
};

struct MyEntry2;
struct Accessor1;
struct Accessor2;

struct MyEntry1 {
    int value;
    LinkedListNode<MyEntry1> node;
    LinkedList<MyEntry2, Accessor2> list;
};

struct MyEntry2 {
    int value;
    LinkedListNode<MyEntry2> node;
    LinkedList<MyEntry1, Accessor1> list;
};

struct Accessor1 : LinkedListAccessor<MyEntry1, &MyEntry1::node> {};
struct Accessor2 : LinkedListAccessor<MyEntry2, &MyEntry2::node> {}; 
```

这样，当循环依赖没有问题时，甚至可以创建一个便利类：

```
template <class Entry, LinkedListNode<Entry> Entry::*NodeMember>
class SimpleLinkedList
: public LinkedList<Entry, LinkedListAccessor<Entry, NodeMember> >
{}; 
```

# java - “Else if”语句不做任何事情（进行 android 测试）

> ID：12699453
> 
> 赞同：0
> 
> 时间：2012-10-02T22:39:28.730
> 
> 标签：java, android, eclipse, if-statement, statements

我正在制作我的第一个 android 应用程序，我想制作一个测试应用程序，我正在使用变量和“If”/“Else if”语句来更改问题的文本（TextView）和答案（RadioButtons ）。问题是，当用户第一次按下按钮时，答案和问题会改变，但是当用户第二次按下按钮时，问题和答案不会改变，我不知道为什么......

这是我的活动：

```
package com.example.test;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;

public class Test extends Activity {

TextView titulo;
RadioGroup buttons;
RadioButton opcn1;
RadioButton opcn2;
RadioButton opcn3;
RadioButton opcn4;

int pregunta = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.memetest);

    titulo = (TextView) findViewById(R.id.textView1);

    buttons = (RadioGroup) findViewById(R.id.radioGroup1);

    opcn1 = (RadioButton) findViewById(R.id.radio0);
    opcn2 = (RadioButton) findViewById(R.id.radio1);
    opcn3 = (RadioButton) findViewById(R.id.radio2);
    opcn4 = (RadioButton) findViewById(R.id.radio3);

    Button siguiente = (Button) findViewById(R.id.siguiente);
    siguiente.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            pregunta = + 1;

            if (pregunta == 1){ 

                titulo.setText(getString(R.string.Q2));
                opcn1.setText(getString(R.string.Q2O1));
                opcn2.setText(getString(R.string.Q2O2));
                opcn3.setText(getString(R.string.Q2O3));
                opcn4.setText(getString(R.string.Q2O4));

            }
            else if (pregunta == 2){

                titulo.setText(getString(R.string.Q3));
                opcn1.setText(getString(R.string.Q3O1));
                opcn2.setText(getString(R.string.Q3O2));
                opcn3.setText(getString(R.string.Q3O3));
                opcn4.setText(getString(R.string.Q3O4));

            }
        };

    });
}
} 
```

我尝试使用“break”，但问题仍然存在。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:41:47.650

要在每个点击事件上添加`1`到您的变量中，请尝试使用它：

```
pregunta++; 
```

（理解这与`pregunta += 1;`or相同`pregunta = pregunta + 1;`）

* * *

你写的`pregunta = + 1;`意思`pregunta = +1;`无非就是

```
pregunta = 1; 
```

# c - 将字符串的单词放入字符串数组 - c 编程

> ID：12699454
> 
> 赞同：0
> 
> 时间：2012-10-02T22:39:32.193
> 
> 标签：c, arrays, string, string.h

我正在尝试获取一个函数来拆分包含多个单词的字符串，这些单词由 1 个或多个空格分隔，并将每个单词不带任何空格放入字符串数组的索引中。

我已经在谷歌上搜索了一段时间，似乎我需要 strtok 但我有点无能为力，有人能说明一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:46:57.363

```
/* strtok example */
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] ="- This, a sample string.";
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, " ");
  }
  return 0;
} 
```

# cuda - 我可以通过#define 在编译时获得 CUDA 计算能力（版本）吗？

> ID：12699455
> 
> 赞同：5
> 
> 时间：2012-10-02T22:39:36.977
> 
> 标签：cuda, gpgpu, nvcc

如何通过#define 在编译时获得 CUDA 计算能力（版本）？例如，如果我使用 __ballot 并编译

```
nvcc -c -gencode arch=compute_20,code=sm_20  \
        -gencode arch=compute_13,code=sm_13
        source.cu 
```

我可以通过#define 在我的代码中获得计算能力的版本，以便选择带有 __ballot 和不带 __ballot 的代码分支吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T23:53:07.507

是的。首先，最好了解使用`-gencode`. NVCC 将多次编译您的输入设备代码，每个设备目标架构一次。因此，在您的示例中，NVCC 将为compute_20 运行编译阶段1，为compute_13 运行一次。

当 nvcc 编译一个 .cu 文件时，它定义了两个预处理器宏，`__CUDACC__`和`__CUDA_ARCH__`. `__CUDACC__`没有值，如果 cudacc 是编译器，则仅定义它，如果不是，则不定义。

`__CUDA_ARCH__`定义为一个整数值，表示正在编译的 SM 版本。

*   100 = 计算_10
*   110 = 计算_11
*   200 = 计算_20

等引用 CUDA 工具包中包含的 NVCC 文档：

> 在`__CUDA_ARCH__`为. `xy0`_ `compute_xy`该宏可用于 GPU 函数的实现，以确定当前正在为其编译的虚拟架构。主机代码（非 GPU 代码）不能依赖它。

所以，在你想使用的情况下`__ballot()`，你可以这样做：

```
....
#if __CUDA_ARCH__ >= 200
    int b = __ballot();
    int p = popc(b & lanemask);
#else
    // do something else for earlier architectures
#endif 
```

# c# - 如何解释何时使用字符串以及何时使用字符串

> ID：12699456
> 
> 赞同：1
> 
> 时间：2012-10-02T22:39:39.373
> 
> 标签：c#, .net

> **可能重复：**
> [字符串和字符串有什么区别](https://stackoverflow.com/questions/7074/what-is-the-difference-between-string-and-string)

我正在使用`string`一个变量，像这样

```
string myString = "test"; 
```

`String`如果我想使用类字符串的某些方法（？），我正在使用

```
String.Format... 
```

我认为这看起来更好。购买一些人正在做的事情，比如

```
String myString;
string.Format... 
```

它的工作。但我不喜欢这个。我怎么能告诉他们停下来？像这样的东西有“C#规则”吗？同样的事情`int`，`Int`; `char`, `Char`; ...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T22:41:03.157

`string`是`System.String`.

如果编写 C#，您应该使用别名 so`string.Format`和`string myString`.

两者最终都编译为相同的 IL 并表示相同的意思，但 C# 有其习惯用法，使用类型别名是其中的一部分 - 与您使用`int`而不是`System.Int32`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:57:09.793

如果您正在处理更大的项目并确保您可以轻松阅读团队中任何开发人员编写的代码，那么编码指南非常重要。

不幸的是，没有关于如何格式化 C# 代码的任何官方指南。微软自己在开发 .NET 框架时遇到了这个问题，并开发了一套内部样式指南，这些指南发展成为一个名为 StyleCop 的成熟程序，它有一个带有合理设置的默认规则集。

根据这些规则，您应该**始终**使用`string`而不是`String`：

```
string xyz;
string.Format(); 
```

规则如下：

> SA1121 - UseBuiltInTypeAlias - 可读性规则
> 
> 该代码使用一种基本的 C# 类型，但不使用该类型的内置别名。
> 
> 不应使用类型名称或完全限定类型名称，而应始终使用这些类型的内置别名：bool、byte、char、decimal、double、short、int、long、object、sbyte、float、string , ushort, uint, ulong。

推荐阅读的是 StyleCop 的历史，您可以在此处找到：

[http://stylecop.codeplex.com/wikipage?title=A%20Brief%20History%20of%20CSharp%20Style&referringTitle=Documentation](http://stylecop.codeplex.com/wikipage?title=A%20Brief%20History%20of%20CSharp%20Style&referringTitle=Documentation)

它解释了您在使用相同代码库的不同背景的不同人员时遇到的一些问题，以及他们如何开发规则集。

我们最近在自己的项目中实现了 StyleCop，虽然要真正遵守所有规则需要做很多工作，但生成的代码更具可读性。它还具有相当好的 ReSharper 集成，如果您使用 ReSharper，它允许您自动进行许多修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:58:13.403

我通常将其表达为“如果语言中存在相同的原始类型，则更喜欢它”。在您的特定情况下，使用哪种样式是一种偏好，而不是对功能有重大影响的东西。重要的是，**无论选择哪种风格，团队中的每个人都始终如一地应用**。

# c++ - 从向量创建 EPS，C++

> ID：12699458
> 
> 赞同：2
> 
> 时间：2012-10-02T22:39:54.823
> 
> 标签：c++, plot, eps

我有一些 C++ 代码创建两个双 x,y 向量作为我的模拟结果。

目前我将 x 和 y 保存到 .txt 文件中，并将这些值导入 Matlab 以绘制图形并将其保存为 eps。

如何直接从 C++ 生成和保存我的图？

我不想为此连接 Matlab 和 C++，而是使用 C++ 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:07:22.350

您可以使用 GNUplot 来绘制数据。这里有一个方便的库：http: [//www.suiri.tsukuba.ac.jp/~asanuma/gnuplot++/](http://www.suiri.tsukuba.ac.jp/~asanuma/gnuplot++/)它可以为您提供可以从您的程序中调用的 API，以使用 GNUplot 绘制数据。

# opacity - 不透明度效果从 1.0 到 0，但不是从 0 到 1.0

> ID：12699459
> 
> 赞同：-1
> 
> 时间：2012-10-02T22:40:00.553
> 
> 标签：opacity, parseint, parsefloat

我想通过单击按钮将 div 的不透明度从 0 增加到 1.0。我可以将不透明度从 1.0 降低到 0.0，但它不能从 0.0 降低到 1.0。我也尝试过使用`parseInt(element.style.opacity)`and `parseFloat(element.style.opacity)`，但这些都不起作用。这是错误的 JavaScript：

```
function myF(){
var x = document.getElementById("test").style; 
x.opacity = parseFloat(x.opacity) + 0.1;
setTimeout(myF(),10);
} 
```

这是错误的 HTML：

```
<button onclick="myF()">Click to change opacity</button>
<div style="height:200px; width:200px; background-color:#656b67; opacity:0;" id="test">     </div> 
```

（以下是用于降低不透明度的 javascript 和 HTML）

```
<body>
<script>
function myF(){
    var x = document.getElementById("test").style;
    x.opacity = x.opacity - 0.1;
    setTimeout(function(){myF();},10);
}
</script>
<button onclick="myF()">Click to resize</button>
<div style="height:200px; width:200px; background-color:#656b67; opacity:1.0;"     id="test"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:55:18.497

改变

```
setTimeout(myF(),10); 
```

至

```
setTimeout(myF, 10); 
```

您不想立即调用该函数，而是想将其传递给`setTimeout`.

此外，您还有一个永无止境的循环。该函数被递归调用，并且没有结束条件。立即调用它时，这将导致您的浏览器冻结。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:36:39.647

```
function myF(){
  var transparent_div = document.getElementById("test");

  var opacity = parseFloat(transparent_div.style.opacity);

  if (isNaN(opacity)) opacity = 0.1;
  else opacity += 0.1;

  transparent_div.style.opacity = opacity;

  if (opacity < 1.0) setTimeout(function(){myF();},100);
} 
```

如果不透明度设置为 "" 一个空字符串，您将不会解析数字，因此 Javascript 会将其作为 NaN 对象返回，您可以使用 isNaN() 对其进行测试。我认为这是您的主要问题之一；parseFloat() 是正确的使用方法，您只需要相应地检查您的返回值。

# android - AVD 和 fiddler 的持续问题

> ID：12699461
> 
> 赞同：0
> 
> 时间：2012-10-02T22:40:07.047
> 
> 标签：android, fiddler

下面的代码有两行建议用于解决提琴手在 AVD 模拟器中看不到帖子的问题。没有这两行，帖子就成功了，但提琴手看不到它。对于这两行，帖子在大约 10 分钟后返回，但出现 I/O 异常。

```
 public HttpResponse postData() 
{ 
    // Create a new HttpClient and Post Header 

    HttpClient httpclient = new DefaultHttpClient(); 
    HttpPost httppost = new HttpPost("http://www.yoursite.com/api/GETTrafficDirector"); 
    HttpResponse response = null; 

    //do these two lines so fiddler can see post when debugging
    HttpHost proxy = new HttpHost("192.168.2.8", 8888); 
    httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 

    try { 
            // Add your data 
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(); 
            nameValuePairs.add(new BasicNameValuePair("id", "12345")); 
            nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!")); 
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 

            // Execute HTTP Post Request 
            response = httpclient.execute(httppost); 

        } 
    catch (ClientProtocolException e) 
    { 
        // TODO Auto-generated catch block 
    } 
    catch (IOException e) 
    { 
        // TODO Auto-generated catch block 
    } 
    return response; 
```

# java - 使用 saveAs 时让 ImageJ 自动覆盖

> ID：12699463
> 
> 赞同：1
> 
> 时间：2012-10-02T22:40:08.267
> 
> 标签：java, imagej

我目前在 Java 应用程序中使用 ij.jar 并使用 ImageJ 将一些处理后的图像保存到磁盘。但是，如果我尝试将图像保存到已经存在的文件中，则保存会静默失败。原始文件保持不变，ImageJ 不会抛出错误。

这是一段示例代码：

```
IJ.saveAs(image, filename); 
```

如果已经存在同名文件，有没有办法让 saveAs 自动覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:20:30.053

我认为你最好使用`FileSaver`类 ( [`ij.io.FileSaver`](http://rsbweb.nih.gov/ij/developer/source/ij/io/FileSaver.java.html)) 而不是泛型`saveAs`方法。例如，如果您的`ImagePlus`is `image`，那么您可以将其保存为 TIFF 堆栈：

```
new FileSaver(image).saveAsTiffStack(path); 
```

如果您需要其他格式，请查看[文档](http://rsb.info.nih.gov/ij/developer/api/ij/io/FileSaver.html)，您会发现其他格式也有类似的方法。

# c - 释放一个强制转换指针

> ID：12699482
> 
> 赞同：4
> 
> 时间：2012-10-02T22:41:41.487
> 
> 标签：c

我想知道释放（）指针是否可以转换为另一种类型。例如，如果我这样做：

```
char *p = malloc (sizeof (int));
int *q = (int *)p;
free (q); 
```

我没有收到关于 gcc (-Wall) 的警告。

在 linux 上，关于 free 的手册页说，在 malloc()、calloc() 或 realloc() 未返回的指针上调用 free 是非法的。但是如果指针被转换为介于两者之间的另一种类型会发生什么？

我问这个是因为我读到 C 标准不需要不同的指针类型（例如 int* 和 char*）具有相同的大小，但我不明白这是怎么可能的，因为它们都需要转换为 void*为了调用 malloc/free 函数。

上面的代码合法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T22:47:42.250

它*可能是*安全的，但不能绝对*保证*它是安全的。

在大多数现代系统上，所有指针（至少所有对象指针）都具有相同的表示，并且从一种指针类型转换为另一种只是重新解释构成表示的位。但是 C 标准并不能保证这一点。

```
char *p = malloc (sizeof (int)); 
```

这为您提供了`char*`指向`sizeof (int)`数据字节的指针（假设`malloc()`成功。）

```
int *q = (int *)p; 
```

这会将`char*`指针转换为`int*`指针。由于`int`大于`char`，因此`int*`指针*可能*需要较少的信息来指示它指向的内容。例如，在面向字的机器上，an`int*`可能只指向一个字，而 a`char*`必须包含一个字指针和一个偏移量，指示它指向字内的哪个字节。（我实际上曾在 Cray T90 这样的系统上工作过。）因此，从`char*`to的转换`int*`实际上会丢失信息。

```
free (q); 
```

由于`free()`接受类型`void*`为 的参数，因此该参数`q`被隐式转换`int*`为`void*`。语言标准不能保证将`char*`指针转换为`int*`，然后将结果转换为，与将 a直接`void*`转换为 a 的结果相同。`char*``void*`

另一方面，由于`malloc()`总是返回一个正确对齐以指向任何类型的指针，即使在具有不同表示的系统上`int*`，`char*`在这种特殊情况下也不太可能导致问题。

因此，您的代码几乎可以肯定地在您可能使用的任何系统上正常工作，并且即使在您可能从未见过的外来系统上也很有可能正常工作。

尽管如此，我还是建议编写可以*轻松*证明是正确的代码，方法是保存原始指针值（类型`char*`）并将其传递给`free()`. 如果需要几段文字来证明您的代码*几乎*可以肯定是安全的，那么从长远来看，简化您的假设可能会节省您的精力。如果您的程序中出现其他问题（相信我，一定会出现问题），最好少担心一个可能的错误来源。

您的代码的一个更大的潜在问题是您不检查是否`malloc()`成功。如果没有，您不会做任何会失败的事情（转换和`free()`调用都可以使用空指针），但是如果您引用分配的内存，您可能会遇到麻烦。

**更新：**

您询问您的代码是否合法；你没有问这是否是做你正在做的事情的最佳方式。

`malloc()`返回一个`void*`结果，可以通过赋值隐式转换为任何指向对象的指针类型。`free()`接受一个`void*`论点；您传递给它的任何指向对象类型的参数都将被隐式转换为`void*`. 这种往返转换 ( to `void*`)是安全的。除非你正在做某种类型的双关语（将相同的数据块解释为两种不同的类型），否则不需要任何强制转换。`something_else*``void*`

而不是：

```
char *p = malloc (sizeof (int));
int *q = (int *)p;
free (q); 
```

你可以写：

```
int *p = malloc(sizeof *p);
...
free(p); 
```

请注意`sizeof *p`在参数 to 中的使用`malloc()`。这为您提供了任何`p`指向的大小，而无需显式引用其类型。它避免了意外使用错误类型的问题：

```
double *oops = malloc(sizeof (int)); 
```

编译器可能不会警告您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T22:43:49.767

是的，指针没有改变，转换只是编译器解释一堆位的方式。

编辑： malloc 调用返回内存中的地址，即 32（或 64）位数字。转换只告诉编译器如何解释存储在该地址的值，它是浮点数、整数、字符串等，以及当你对地址进行算术运算时，它应该插入多大的单元。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T22:46:08.393

是的，这是合法的。`free()`需要一个 void 指针 ( `void*`)，所以类型无关紧要。只要传递给的指针被`malloc/realloc/calloc`它返回是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:44:14.440

该代码是合法的，但不是必需的。由于指针仅指向存储数据的地址，因此无需分配空间或随后释放空间。

# extjs - 如何在选择时将 ComboBox 项“id”设置为网格中的另一列？

> ID：12699486
> 
> 赞同：1
> 
> 时间：2012-10-02T22:41:53.377
> 
> 标签：extjs, extjs4

我们在模型中存储了这样的字段：

```
fields: ["name_id", "name"] 
```

我们有这样的列网格：

```
me.columns = [
    {
       header:"Name", 
       dataIndex:"name_id", 
       hide: true
    },
    {
       header:"Name", 
       dataIndex:"name", 
       xtype: 'combocolumn',
       editor: {
          xtype:'NameCombo',
          dataIndex:"name_id"
       },
       filter: true
    },
] 
```

其中 xtype NameCombo 定义为：

```
Ext.define("NameCombo",{
    extend: "Ext.form.ComboBox",

    triggerAction: 'all',
    displayField: 'name', 
    valueField: 'id',
    lazyRender: true,
    editable: false,
    store: "Store",
    alias: ['widget.NameCombo'],
}); 
```

谁能告诉我，如何将 ComboBox 项 'id' 设置为我在配置中通过 NameCombo 中的 'dataIndex:"name_id"' 设置的另一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:52:41.137

我有一个解决方案。

如果我们更改 NameCombo 小部件，如下所示，我们可以将 'id' 设置为记录的另一个字段。

```
Ext.define("NameCombo",{
    extend: "Ext.form.ComboBox",

    displayField: 'name', 
    valueField: 'name',
    keyField: 'id',

    triggerAction: 'all',
    lazyRender: true,
    editable: false,
    store: "Store",
    alias: ['widget.NameCombo'],

    initComponent: function(){
        var me = this;

        me.listeners = {
            select: me.itemChanged
        };

        this.callParent();
    },

    itemChanged: function(combo, records, eOpts)
    {
        var me = this;

        Ext.Array.each(records, function(record) {
            if (me.dataIndex) {
                var grid = me.scope;
                var sm = grid.getSelectionModel();
                var lastRow = sm.getLastSelected();                 
                var columns = me.scope.columns,
                    i, columnsLength, column;           
                var id = record.data[me.keyField];

                lastRow.set(me.dataIndex,id);

                //TODO: Is there any simple way to update the value in the column of the grid?
                for (i = 0, columnsLength = columns.length; i < columnsLength; i++) {
                    column = columns[i];
                    if (column.dataIndex === me.dataIndex) {
                        column.getEditor().setValue(id);
                    }
                }
            }
        })

}); 
```

有没有更好的解决方案？

# javascript - 没有插件的jquery自定义验证脚本？

> ID：12699490
> 
> 赞同：0
> 
> 时间：2012-10-02T22:42:22.773
> 
> 标签：javascript, jquery, jquery-selectors

我曾经使用 jquery 验证插件，但由于缺少带有所见即所得插件的插件，我编写了一个简单的脚本来验证我的表单

我试着这样做

```
function validateArticle(formData, jqForm, options) { 
  $('#errors').empty();
  if ($('#editor').val() == 0) { 
    $('#errors').show();
    $('#errors').append('<li>please enter your article body</li>');
    return false; 
  } 
  if ($('#ArticleTitle').val() == 0) { 
    $('#errors').show();
    $('#errors').append('<li>please enter your article title</li>');
    return false; 
  }
  $('#errors').hide();
  return true ;
} 
```

我在验证表单时发现了 1 个问题，它正在逐字段验证它，因此错误消息不会立即出现

我试图做类似的事情

```
var errors = [];
function validateArticle(formData, jqForm, options) { 
  $('#errors').empty();
  if ($('#editor').val() == 0) { 
    errors.push('<li>please enter your article body</li>');
    var invalid = 1 ;
    return false; 
  } 
  if ($('#ArticleTitle').val() == 0) { 
    errors.push('<li>please enter your article title</li>');
    var invalid = 1 ;
    return false; 
  }
  if(invalid == 1){
    $.each(errors , function(i, val) { 
      $('#errors').append(errors [i]); 
    });
  }

  $('#errors').hide();
  return true ;
} 
```

我试图将错误推送为数组元素并在无效的情况下循环遍历它们是真的但是这个根本不起作用？

有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:00:37.243

```
if ($('#editor').val() == 0)   // This is checking if value is 0 
```

这没有意义..试试

```
if ($('#editor').val() == '') //Instead check for empty string 
```

**编辑** 另外，您似乎最终隐藏了错误的 div。

```
 $('#errors').hide(); 
```

试试这个代码

```
$('#validate').on('click', function() {
    var errors = [];
    var html = '<ul>' ;
    valid = true;
    $('#errors').empty();
    if ($('#editor').val() == '') {
        errors.push('<li>please enter your article body</li>');
        valid = false;
    }
    if ($('#ArticleTitle').val() == '') {
        errors.push('<li>please enter your article title</li>');
         valid = false;
    }
    if (!valid) {
        html += errors.join('') + '</ul>' 
            $('#errors').append(html);

    }
    else{
        $('#errors').hide();
    }
    return valid;
});​ 
```

[演示](http://jsfiddle.net/sushanth009/WF2J9/1/)

# jquery - 在keyup上乘以2个输入字段？

> ID：12699491
> 
> 赞同：-3
> 
> 时间：2012-10-02T22:42:25.893
> 
> 标签：jquery, html

我有 2 个字段

```
<input id="E_Item1" name="E_Item1">
<input id="E_CCNM" name="E_CCNM"> 
```

在 JQuery 中，我将如何在 keyup 上将这些字段的值相乘到一个 div 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:48:30.983

```
<input id="E_Item1" name="E_Item1" type="text" class="multiplier">
<input id="E_CCNM" name="E_CCNM" type="text" class="multiplier">
<div id="results"></div> 
```

然后，假设预期结果是整数的倍数，在 js 中，您在准备好的侦听器中执行类似的操作...

```
$('.multiplier').on('keyup', function(){
    $('#results').html("&pound;" + parseInt($('#E_Item1').val()) * parseInt($('#E_CCNM').val()));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:51:45.987

jQuery 为您提供了舒适的[事件监听器](http://api.jquery.com/on/)。

要访问输入的值，您可以使用[val](http://api.jquery.com/val/) : `$('#elementID').val()`。

因此，您的整个代码将是这样的：

```
$('#getResult').on('click', function(e){
    var val1 = $('#E_Item1').val();
    var val2 = $('#E_CCNM').val();
    alert(parseFloat(val1)*parseFloat(val2));
});​ 
```

( [JSFiddle](http://jsfiddle.net/GymEa/) )

* * *

请查看以下链接。**如果您使用谷歌**并且能够自己解决问题，您会找到它们：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

[http://api.jquery.com/val/](http://api.jquery.com/val/)

# php - yii 不保存模型

> ID：12699496
> 
> 赞同：4
> 
> 时间：2012-10-02T22:43:18.300
> 
> 标签：php, yii

```
 $model=new Event('create');
  $model->attributes=$_POST['Event'];
  if($model->save()){
    $pkg = new Package(); 
    $pkg->attributes=$_POST['Package'];
    $pkg->event_id = $model->id;
    $pkg->save();
  } 
```

Event 模型与 Event 的所有 POST 变量一起正确保存，而 Package 仅设置了 event_id，但没有设置任何属性（它们都是 NULL）。我究竟做错了什么？

注意：Event 对象是我的前任编写的，Package 对象是我新增的。

编辑：整个包类

```
 class Package extends CActiveRecord
  { 
  public static function model($className=__CLASS__)
  {
    return parent::model($className);
  }
public function tableName()
  {
    return 'tbl_package';
  }
 public function rules()
  {
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
      // The following rule is used by search().
      // Please remove those attributes that should not be searched.
      array('', 'safe', 'on'=>'search'),
      array('', 'numerical'),
    );
  }public function relations()
  {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
      'event' => array(self::BELONGS_TO, 'Event', 'id')
    );
  }public function attributeLabels()
  {
    return array(
      'event_id'      => 'Event ID',
      'package_name'  => 'Package name',
      'event_banner'  => 'Event Banner',
      'ad_placement'  => 'Ad Placement in Event Program',
      'logo_on_step'  => 'Logo on Step & Repeat',
      'use_evt_pics'  => 'Usage of Event Pictures',
      'exhibition'    => 'Exhibition Booth/Space',
      'inc_press'     => 'Inclusion in Press',
      'print_ads'     => 'Insertion in Print Ads',
      'online_ads'    => 'Insertion in Online Ads',
      'attendee_bags' => 'Attendee Bags',
      'charging_st'   => 'Charging Stations',
      'cups'          => 'Coffee/Water Cups',
      'distr_items'   => 'Distributable Items',
      'lanyards'      => 'Lanyards',
      'napkins'       => 'Napkins',
      'notebooks'     => 'Notebooks',
      'pens'          => 'Pens',
      'seat_covers'   => 'Seat Covers',
      'snack_pack'    => 'Snack Packaging',
      'water_bottles' => 'Water Bottles'
    );
  } public function search()
  {
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;
    $criteria->compare('event_banner',$this->event_banner);
    $criteria->compare('package_name',$this->package_name);
    $criteria->compare('ad_placement',$this->ad_placement);
    $criteria->compare('logo_on_step',$this->logo_on_step);
    $criteria->compare('use_evt_pics',$this->use_evt_pics);
    $criteria->compare('exhibition',$this->exhibition);
    $criteria->compare('inc_press',$this->inc_press);
    $criteria->compare('print_ads',$this->print_ads);
    $criteria->compare('online_ads',$this->online_ads);
    $criteria->compare('attendee_bags',$this->attendee_bags);
    $criteria->compare('charging_st',$this->charging_st);
    $criteria->compare('cups',$this->cups);
    $criteria->compare('distr_items',$this->distr_items);
    $criteria->compare('lanyards',$this->lanyards);
    $criteria->compare('napkins',$this->napkins);
    $criteria->compare('notebooks',$this->notebooks);
    $criteria->compare('pens',$this->pens);
    $criteria->compare('seat_covers',$this->seat_covers);
    $criteria->compare('snack_pack',$this->snack_pack);
    $criteria->compare('water_bottles',$this->water_bottles);

    return new CActiveDataProvider('SponsorshipPackage', array(
      'criteria'=>$criteria,
    ));
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T23:19:01.613

如果要通过以下方式设置属性：

```
$pkg->attributes=$_POST['Package']; 
```

那么您必须为可以以这种方式设置的任何属性设置规则。

你需要这样的东西：

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('package_name', 'required'),
        array('package_name', 'length', 'max' => 255),
        // or
        array('package_name', 'length', 'max' => 255, 'on' => 'insert'),
        // at least (when no validation is required):
        array('package_name', 'safe'),
        // ...
        // and so on.. 
    );
} 
```

您需要以这种方式设置的任何属性的规则。

如果没有为属性设置规则，您只能通过`$pkg->attribute_name = $value;`

规则喜欢`array('', 'safe', 'on'=>'search'),`或`array('', 'numerical'),`什么都不做（导致属性列表为空）。

[在此处](http://www.yiiframework.com/wiki/56/)阅读有关验证的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:13:02.860

```
 class Package extends CActiveRecord
      { 
      public static function model($className=__CLASS__)
      {
        return parent::model($className);
      }
    public function tableName()
      {
        return 'tbl_package';
      }
     public function rules()
      {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
          // The following rule is used by search().
          // Please remove those attributes that should not be searched.
          array('ad_placement, logo_on_step, ...', 'safe', 'on'=>'search'), //note put here all attrs name that you feel those attrs needs to be assigned from POST like: `$pkg->attributes=$_POST['Package'];`
array('event_id', 'numerical'),

        );
      }public function relations()
      {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
          'event' => array(self::BELONGS_TO, 'Event', 'id')
        );
      }public function attributeLabels()
      {
        return array(
          'event_id'      => 'Event ID',
          'package_name'  => 'Package name',
          'event_banner'  => 'Event Banner',
          'ad_placement'  => 'Ad Placement in Event Program',
          'logo_on_step'  => 'Logo on Step & Repeat',
          'use_evt_pics'  => 'Usage of Event Pictures',
          'exhibition'    => 'Exhibition Booth/Space',
          'inc_press'     => 'Inclusion in Press',
          'print_ads'     => 'Insertion in Print Ads',
          'online_ads'    => 'Insertion in Online Ads',
          'attendee_bags' => 'Attendee Bags',
          'charging_st'   => 'Charging Stations',
          'cups'          => 'Coffee/Water Cups',
          'distr_items'   => 'Distributable Items',
          'lanyards'      => 'Lanyards',
          'napkins'       => 'Napkins',
          'notebooks'     => 'Notebooks',
          'pens'          => 'Pens',
          'seat_covers'   => 'Seat Covers',
          'snack_pack'    => 'Snack Packaging',
          'water_bottles' => 'Water Bottles'
        );
      } 
      ....
    } 
```

如果它不起作用，那么您可以尝试，htere is `validate()`method before `save()`：

```
 $model=new Event('create');
  $model->attributes=$_POST['Event'];
  if($model->validate()){
    $model->save();
  }
  else{
      echo CHtml::errorSummary($model);
  } 
```

这将说明什么是错误。

永远不要直接保存，保存前验证它。

# .net - SSIS脚本组件找不到存储过程

> ID：12699498
> 
> 赞同：-1
> 
> 时间：2012-10-02T22:43:17.577
> 
> 标签：.net, ssis

我有一个调用存储过程的脚本组件，当我运行应用程序时，它说它找不到该过程。

我需要做什么才能让脚本组件查看并运行我的程序？谢谢

这是我用来调用 eprocedure 的方法。

```
System.Data.SqlClient.
SqlConnection Conn = (System.Data.SqlClient.SqlConnection)Connections.ASMADO.AcquireConnection(null);

System.Data.SqlClient.
SqlCommand cmd = new System.Data.SqlClient.SqlCommand("exec InsertArptServices" , Conn);

cmd.CommandType = CommandType.StoredProcedure;

cmd.Parameters.Add(new SqlParameter("@fkObjectID", Row.fkObjectID));
cmd.Parameters.Add(new SqlParameter("@services", Row.OtherServices));

cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:46:33.330

带命令文本不`CommandType.StoredProcedure`应该是. 所以在你的情况下尝试： `ProcedureName``exec ProcedureName`

```
SqlCommand cmd = new System.Data.SqlClient.SqlCommand("InsertArptServices" , Conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:04:44.233

如果您在正确的数据库中，我能想到的唯一另一件事就是在模式名称前面加上前缀，即

> 执行 dbo.InsertArptServices

# css - div顶部的CSS Chrome-only空间

> ID：12699507
> 
> 赞同：0
> 
> 时间：2012-10-02T22:44:15.540
> 
> 标签：css, google-chrome, drupal, margin, space

我整天都在寻找解决方案，但还没有找到。Safari 和 firefox 完美地显示了这一点，但 Chrome 在 #content div 的顶部有一个 ~100px 的空间。

[http://co.ably.ca/](http://co.ably.ca/)

在 chrome 中查看网站，然后在 ff 和 safari 中查看。我已将有问题的 div 着色为绿色。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:53:21.727

如果我从 中删除`overflow: auto;`，`h1.title`顶部的绿色条会在我的屏幕中消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:53:29.373

元素 h1 具有以下属性：

```
-webkit-margin-before: 0.67em;
-webkit-margin-after: 0.67em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px; 
```

我认为这是你的问题。

# vim - Vim 中的 Widcard .* 使用

> ID：12699513
> 
> 赞同：2
> 
> 时间：2012-10-02T22:45:50.483
> 
> 标签：vim

我有以下数据点（经度）：

```
+40 46'N +014 15'E
+21 17'N -157 52'W 
```

在 Linux 中使用 Vim。我想使用该`%s/..`函数**一次**来摆脱所有尾随方向指示符 ( `N`, `W`, `E`, `S`) 及其数据点，从而为我提供以下信息：

```
+ ' + '
+ ' - ' 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:56:08.410

这对你有用吗？

```
:%s/[^+\-']//g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:10:53.763

这应该工作

```
:%s,[^+\-\' ],,g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:57:44.143

你应该试试这个：

```
:%!perl -pe 's@(\d+ \d+|N|W|E|S)@@g' 
```

*   任何外部命令都可以修改 vim 中的当前文件`:%!`
*   在`Perl`命令中，替换分隔符是`@`

# list - 使用单线迭代和更新 BindingList 项

> ID：12699518
> 
> 赞同：0
> 
> 时间：2012-10-02T22:46:04.200
> 
> 标签：list, foreach, compact-framework, bindinglist, compact-framework2.0

我有一个**BindingList**我想更新某些项目，但为了使用仅适用于**List<>的****Foreach** ，我必须使用**BindingList**项目初始化一个新**列表。**像这样：

 ******```
new List<ScanData>(ScanDataList)
.FindAll(i => i.Badge == badge)
.ForEach(x =>x.EmpName = empname); 
```

这是我发现的最简单的方法，但我不想从**New**关键字开始，有没有其他更简单的方法来迭代**BindingList**项目并使用像上面这样的单线更新它们？（为了便于阅读，我把它分成三行）。我只想删除**New**关键字，但这不起作用，如果一个新函数有帮助，那也是可以接受的，如果它对任何**BindingList**的泛型都是完美的。

*   注意：我使用的是紧凑框架 2.0
*   我不想初始化一个我不会使用的变量。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:19:30.230

这个问题有点傻。没有理由你必须在一行代码中完成它并避免声明一个变量。如果你使用 new 操作符，你就是在初始化一个对象的实例，不管你是否为它声明一个变量。

话虽如此，我不知道您的 ScanDataList 是什么...有一个与 FindAll 等效的 linq 表达式，称为 Where 可能比 FindAll 更有效（因为它不必创建新列表，它只是懒惰地迭代）。如果你的 ScanDataList 已经是 IEnumerable 那么你可能可以做这样的事情......

ScanDataList.Where(i => i.Badge == badge).ToList().ForEach(x=>x.EmpName = empname);

即使您的 ScanDataList 不可枚举，您也可以实现自己的扩展方法来帮助您完成此任务，但对于可以轻松实现而无需任意不必要的约束（没有新的、没有变量等）的事情似乎需要做很多工作）。

所以为了澄清，我可能会使用 .Where LINQ 表达式，因为它可能更有效，因为它不需要创建新列表。但是，使用相同的逻辑，我可能会避免 ToList() 并将您的代码分成两行类似的东西。

```
foreach(Employee emp in ScanDataList.Where(i => i.badge == badge))
  emp.EmpName = empname; 
```

这样，就不会创建额外的列表。******

# java - 创建一个随机生成的三角形并将其绘制到 Jpanel

> ID：12699528
> 
> 赞同：2
> 
> 时间：2012-10-02T22:46:57.443
> 
> 标签：java, swing, random, geometry, awt

我在让 java 的 swing 和 awt 库（第一次使用它们）为我正常工作时遇到了一些大麻烦。基本上，我想制作一个随机生成的三角形，然后将其显示在 JPanel 上。我已经研究了一段时间，但我似乎无法让三角形出现。

我有一个像这样的 RandomTriangle 类：

```
import java.util.*;
import java.math.*;

public class RandomTriangle {

  private Random rand = new Random();

  private int x1, y1,     // Coordinates
              x2, y2,
              x3, y3;
  private double a, b, c; // Sides

  public RandomTriangle(int limit) {
    do { // make sure that no points are on the same line
      x1 = rand.nextInt(limit);
      y1 = rand.nextInt(limit);

      x2 = rand.nextInt(limit);
      y2 = rand.nextInt(limit);

      x3 = rand.nextInt(limit);
      y3 = rand.nextInt(limit);
    } while (!((x2 - x1) * (y3 - y1) == (y2 - y1) * (x3 - x1)));

    a = Math.sqrt(Math.pow((x2 - x1), 2) + Math.pow((y2 - y1), 2));
    b = Math.sqrt(Math.pow((x3 - x2), 2) + Math.pow((y3 - y2), 2));
    c = Math.sqrt(Math.pow((x1 - x3), 2) + Math.pow((y1 - y3), 2));
  }

  public int[] getXCoordinates() {
    int[] coordinates = {this.x1, this.x2, this.x3};
    return coordinates;
  }

  public int[] getYCoordinates() {
    int[] coordinates = {this.y1, this.y2, this.y3};
    return coordinates;
  }
} 
```

然后我有一个扩展 JPanel 的 SimpleTriangles 类：

```
import javax.swing.*;
import java.awt.*;

public class SimpleTriangles extends JPanel {

  public SimpleTriangles() {
    JFrame frame = new JFrame("Draw triangle in JPanel");  
    frame.add(this);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
    frame.setSize(400,400);  
    frame.setLocationRelativeTo(null);  
    frame.setVisible(true);  
  }

  public void paint(Graphics g) {
    super.paint( g );
    RandomTriangle myTriangle = new RandomTriangle(150);
    int[] x = myTriangle.getXCoordinates();
    int[] y = myTriangle.getYCoordinates();

    g.setColor(new Color(255,192,0));
    g.fillPolygon(x, y, 3);
  }

  public static void main(String[] args) {
    RandomTriangle myTriangle = new RandomTriangle(300);
    for (int x : myTriangle.getXCoordinates())
      System.out.println(x);
    for (int y : myTriangle.getYCoordinates())
      System.out.println(y);

    SimpleTriangles st = new SimpleTriangles(); 
  }
} 
```

我做错了什么吗？就像我说的，这是我第一次在 Java 中使用 GUI，所以我可能会过得很好。当我运行它时，我得到一个灰色的空白 JPanel。但是，如果我明确指定坐标，例如`int[]x={0,150,300};`等，我会得到一个三角形。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T23:17:23.190

您确保没有点在同一条线上的公式并不能确保 2 个点在同一条线上。通常至少有 2 个共线点。您可以使用以下方法避免这种情况：

```
 ...
   } while (((x2 - x1) * (y3 - y1) == (y2 - y1) * (x3 - x1))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T04:54:44.487

> *您能否简要说明它为什么起作用？*

谓词`p = ((x2 - x1) * (y3 - y1) == (y2 - y1) * (x3 - x1))`是`true`当三个点[共线](http://mathworld.wolfram.com/Collinear.html)时。

仅当找到三个共线点时，您的[`while`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)语句才会`while (!p)`退出循环。`do`

相反，@Reimeus 的语句仅在找到有效三角形时才`while (p)`退出循环。`do`

# linux - 从 Pen 运行 Mono (linux)

> ID：12699531
> 
> 赞同：0
> 
> 时间：2012-10-02T22:47:18.440
> 
> 标签：linux, mono, usb

是否可以通过 USB 笔为 linux 运行单声道，而在目标机器上绝对没有安装？

编辑：我问这个的原因是因为我一直在开发一个针对 Windows 的 WPF 和 WCF 应用程序，但是上周有一个新客户来了，有一个带有 linux 系统的 POS，如果这还不够它有一个只有（大约）200mb 的闪存盘......而且 .NET 库将占用几乎所有这些，不包括我的应用程序。所以我需要一个 USB/MONO 解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:50:35.850

是的，假设您自己编译 Mono，并指定一个前缀（如`/opt/mono`）。然后，您必须确保以`/opt/mono`引用闪存驱动器上包含此前缀的目录的方式安装闪存驱动器。

如果您在目标计算机上没有 root 访问权限，但无论如何都能够挂载该卷，那么在您的编译环境中，您将必须使用包含在您对目标计算机具有写访问权限的目录中包含的前缀进行配置。例如，如果您是目标机器上的用户“foo”，那么您可以使用前缀`/home/foo/opt/mono`。然后，在挂载闪存驱动器后，符号链接`/home/foo/opt/mono`到闪存驱动器上的相应目录。

# r - 格式打印语句

> ID：12699533
> 
> 赞同：3
> 
> 时间：2012-10-02T22:47:28.203
> 
> 标签：r

我想格式化打印语句的输出，以便打印语句中的元素由一个小的统一间隙分隔，间隙为 1、3 或 5 个空格。那可能吗？

在下面的示例中，我认为 print 语句中的所有元素都被假定为与 print 语句中的第一个元素一样长（这里是 long as`aa1`或`aa2`）。

该`print.gap`语句不会产生所需的格式。它只是在每个元素之间添加了一个额外的恒定数量的空格。

```
aa1 <- 'abcdefghijklmnopqrstuvwxyz'
aa2 <- 'abc'

bb  <- 10
cc  <- 222

print(c(aa1,bb,cc))

# [1] "abcdefghijklmnopqrstuvwxyz" "10"                         "222" 

print(c(aa2,bb,cc))

# [1] "abc" "10"  "222"

# desired output:

# [1] "abcdefghijklmnopqrstuvwxyz"   "10"   "222" 
#
# or
#
# [1] "abcdefghijklmnopqrstuvwxyz"   10   222 
```

谢谢你的任何建议。也许我必须使用`cat`语句而`sprintf`不是`print`语句。也许这有一些变化：[如何在字符串中间打印 R 变量](https://stackoverflow.com/questions/3516008/how-to-print-r-variables-in-middle-of-string)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T23:03:52.047

这将使您成功：

```
x <- c(aa1,bb,cc)

options(useFancyQuotes = FALSE)
cat(paste(dQuote(x), collapse="   "), "\n")
# "abcdefghijklmnopqrstuvwxyz"   "10"   "222" 
```

我说“中途”是因为上面的代码不考虑换行：如果你给它一个很长的字符串向量，它们都会被集中到一个很长的非换行行...

* * *

**编辑显示一种换行的方法：**

您可以通过使用`strwrap()`（感谢@mnel）和`gsub()`, 的组合来获得换行：

```
xs <- c(x,x,x,x)

cat(gsub("\" \"", "\"   \"", 
    strwrap(paste(dQuote(xs), collapse=" "), 70)), sep="\n")
# "abcdefghijklmnopqrstuvwxyz"   "10"   "222"   "abcdefghijklmnopqrstuvwxyz"
# "10"   "222"   "abcdefghijklmnopqrstuvwxyz"   "10"   "222"
# "abcdefghijklmnopqrstuvwxyz"   "10"   "222" 
```

`gsub()`（如果向量元素之间需要多个空格，则需要调用 to ，因为`strwrap()`会破坏输入中的空格。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T00:17:07.447

我会发表我的评论作为答案

您可以创建自己的`print.character`方法并用于`strwrap`包装到合理的行长。

不幸的是`strwrap`，它破坏了所有空格并用一个空格替换它

```
print.character <- function(x, width = getOption('width'), .sep = '  '){
  cat(paste(strwrap(paste(dQuote(x), collapse = .sep, sep =.sep), width),  
  collapse = '\n'), '\n')
}
x <- c(aa1,bb,cc)
print(x)
## "abcdefghijklmnopqrstuvwxyz" "10" "222"
print(rep(x,10))
## "abcdefghijklmnopqrstuvwxyz" "10" "222" "abcdefghijklmnopqrstuvwxyz" "10" "222"
## "abcdefghijklmnopqrstuvwxyz" "10" "222" "abcdefghijklmnopqrstuvwxyz" "10" "222"
## "abcdefghijklmnopqrstuvwxyz" "10" "222" "abcdefghijklmnopqrstuvwxyz" "10" "222"
## "abcdefghijklmnopqrstuvwxyz" "10" "222" "abcdefghijklmnopqrstuvwxyz" "10" "222"
## "abcdefghijklmnopqrstuvwxyz" "10" "222" "abcdefghijklmnopqrstuvwxyz" "10" "222" 
```

对于字符变量中的空格，它将无法按预期工作

```
print('Does not work  with strings with  variable spaces that you \n might \t \t \t want to keep')
"Does not quite work with strings with variable spaces that you might want to keep" 
```

# windows - 在 Win 8 上启动 Eclipse 时出现 Java 错误

> ID：12699537
> 
> 赞同：0
> 
> 时间：2012-10-02T22:47:43.137
> 
> 标签：windows, eclipse, java

启动 Eclipse 时出现以下错误：

![错误](../Images/5037094a43381d78f87c5123a5eda9b2.png)

显然它正在尝试使用 system32-folder 中的 javaw.exe，我猜它不应该。我已将 environment-vars 设置为以下内容：

**JAVA_HOME**：“C:\Program Files\Java\jdk1.7.0_07;C:\Program Files (x86)\Java\jdk1.7.0_07”

**路径**：“...;C:\Program Files (x86)\Java\jdk1.7.0_07\bin;C:\Program Files\Java\jdk1.7.0_07\bin”

我将*-vm C:\Program Files\Java\jdk1.7...\bin\javaw.exe*添加到 eclipse.ini

已安装 Java 和 JDK。x86 版本和 x64 版本。有谁知道，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:30:25.423

解决方案如下：

*   我从 eclipse.ini中删除了*-vm C:\Program ... 条目*
*   我删除了**JAVA_HOME**变量
*   我按如下方式编辑了**路径**：我将 javaw.exe 的路径移到了**Path**变量的开头，因为它使用的是它找到的第一个 javaw.exe 并且在 system32-folder 中有一个。

# gpu - 在多个 GPU 的情况下，哪一个对所有显示器进行实际渲染？

> ID：12699544
> 
> 赞同：3
> 
> 时间：2012-10-02T22:48:36.147
> 
> 标签：gpu, multi-gpu

任何人都可以解释或指出多 GPU/多显示器设置中的渲染如何工作的解释（或至少一些线索）吗？

例如，我安装了 5 个 NVIDIA Quadro 4000 显卡，并连接了 9 个显示器。显示器没有任何分组。刚刚在Windows 7中安排总分辨率为4098x2304。这些卡也没有与 SLI 连接。

我有一个 Flash 应用程序，它将 4096x2304 窗口视为单个 Stage3d 上下文（使用 dx9），并且可以使用这种非常不寻常的设置，就好像它只是一个只有一个视频卡的巨大显示器。

渲染在内部是如何工作的？显卡实际上在做什么？他们共享资源吗？谁渲染所有的东西？为什么我在应用程序中几乎什么都没做却得到 29.9 fps？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:50:16.270

我不知道 DX，但对于 OpenGL，我在这里收集了这些信息：http: [//www.equalizergraphics.com/documentation/parallelOpenGLFAQ.html](http://www.equalizergraphics.com/documentation/parallelOpenGLFAQ.html)

简而言之，在带有新 nVidia 驱动程序的 Windows 上，一个 GPU（通常是第一个）渲染所有内容，而其他 GPU 则获得内容。如果您启用 SLI Mosaic 模式，则 GL 命令将发送到所有 GPU，从而为您提供填充率的可扩展性。

# java - 在 LinkedList 中检测与精灵的碰撞

> ID：12699550
> 
> 赞同：1
> 
> 时间：2012-10-02T22:48:49.500
> 
> 标签：java, android, andengine

嘿，伙计们，这是我的困境。

我有一个动画精灵，我正在使用它并使用动画侦听器来了解动画何时完成或其最后一帧。

当动画在最后一帧时，我想删除它碰撞的任何对象。

所以这是我现在遇到的问题：

我正在使用 TimeHandler 来检测碰撞，但问题是我将随机数量的可移动对象添加到游戏中，并且我将它们添加到 LinkedList，因为它们在加载期间添加到场景中。

然后在我的 TimeHandler 中，我尝试像这样检测碰撞；

```
 mEngine.registerUpdateHandler(new TimerHandler(.005f, true,
        new ITimerCallback() {
          @Override
          public void onTimePassed(final TimerHandler pTimerHandler) {

            if (frames == 1) {

              if (woodSprites.hasNext()) {

                Sprite sprite = woodSprites.next();
                if (bombSprite.collidesWith(sprite)) {
                  Log.e("Frame", "Collision");
                  removeFace(sprite);

                }
              }
            }

          }

        })); 
```

这种方法的问题在于，如果炸弹精灵与迭代器中不是下一个的可移动精灵发生碰撞，那么它不会检测到碰撞并且不会发生任何事情。我需要能够在发生碰撞时移除特定的可移动精灵

有谁知道或有任何建议让这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:39:17.720

我看不出使用 TimerHandler 的理由，因为它可能会一直丢失正确的帧，因此它的性能可能非常糟糕。你这样做是为了提高性能吗？试试这个代码：

```
mEngine.registerUpdateHandler(new IUpdateHandler() {

    @Override
    public void reset() {}

    @Override
    public void onUpdate(float pSecondsElapsed) {
        if (frames == 1) {
            for (Sprite s : woodSprites) {
                if (bombSprite.collidesWith(s)) {
                    removeFace(s);
                }
            }
    }
}); 
```

我认为对性能的影响应该可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:33:56.153

如果我正确理解了这个问题，那么您就不会浏览列表，这就是您尝试检测仅与一个元素发生冲突的原因。尝试：

```
while (woodSprites.hasNext()) {
    if (bombSprite.collidesWith(woodSprites)) {
        Log.e("Frame", "Collision");
        removeFace(woodSprites);
    }
} 
```

# ruby-on-rails-3.1 - 为什么有些变量以两点开头

> ID：12699551
> 
> 赞同：1
> 
> 时间：2012-10-02T22:49:10.947
> 
> 标签：ruby-on-rails-3.1

我正在学习 ruby​​ on rails

但是不明白为什么有些变量有两个前端，请给我解释一下，例如一段代码：

类 ApplicationController < ActionController::Base
session :session_key => "ruby_cookies"
end

我不明白，为什么 :session_key => "ruby_cookies" 以两点开头，
而且似乎是带有那个箭头的哈希 =>

我学了Ruby的基础知识，这些都没有，只知道有类变量@,:,

另一个例子：

<%@Posts.each 做 | 发表 |%>

<% = link_to 'Destroy', post, :confirm => '你确定吗？'
:method => :delete%> </td>
</tr>
other[:variable] <%end%>

为什么 :confirm => 'Are you sure'，而 other[:variable] 以两点开头？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:49:04.503

它们是命名符号，它们是不同的变量

# javascript - 带有css的范围的属性名称

> ID：12699555
> 
> 赞同：0
> 
> 时间：2012-10-02T22:49:39.383
> 
> 标签：javascript, css, rangy

如何使用 cssApplier 将跨度的属性名称放在 Ragy 中。一个例子：

```
<span name="##" id ="##" class="note"> 
```

我尝试：

```
highlighter.addCssClassApplier(rangy.createCssClassApplier("note", {
            ignoreWhiteSpace: true,
            elementTagName: ["span"],
            elementProperties: {
                name:"##",
                id:"##",
                onmousedown: function (){
                    if (event.button==2){
                    var highlight = highlighter.getHighlightForElement(this);
                    if (window.confirm("Delete this new note ?")) {
                        highlighter.removeHighlights( [highlight] );
                    }
                    return false;
                }
                }
            }
        } 
```

但它不起作用。结果是：

```
<span  id ="##" class="note"> 
```

它是范围内的错误吗？

# c++ - 如何在 Linux 下的 C++ 中获取缓冲/缓存的内存大小？

> ID：12699557
> 
> 赞同：2
> 
> 时间：2012-10-02T22:49:47.177
> 
> 标签：c++, linux

我想在可用内存不足时警告用户。目前我正在使用`sysconf(_SC_PHYS_PAGES)`获取可用物理页面的数量。

但是，也有操作系统用作缓冲区和缓存的内存。如何以编程方式获取它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:58:34.193

procps 中的 free 命令执行此操作的方式是读取`/proc/meminfo`文件。[你可以在这里](http://procps.cvs.sourceforge.net/viewvc/procps/procps/proc/sysinfo.c?revision=1.41&view=markup)看到他们的来源。meminfo 函数更新全局变量，特别是 kb_main_buffers 和 kb_main_cached。您可能可以重用他们的代码来做您想做的事。（假设您的许可证兼容）

# c# - ArcGIS 插件：在后台工作程序中创建 shapefile，无法在同一 ArcMap 会话中显示结果

> ID：12699567
> 
> 赞同：0
> 
> 时间：2012-10-02T22:51:01.153
> 
> 标签：c#, backgroundworker, add-in, arcgis, esri

加载项最初是在没有使用 backgroundworker 的情况下编写的，并且运行良好。我能够创建一个 shapefile，它可以在同一个 ArcMap 会话中执行后立即添加和查看。

然后我尝试在 UI 中添加一个进度条，在执行完成之前它没有显示任何更改。那时我添加了一个 backgroundworker 类并将耗时的 shapefile 创建代码（没有任何更改）移动到 backgroundworker 的 dowork 事件处理程序中。

虽然这使 UI 响应更快，但如果我将结果 shapefile 添加到同一个 ArcMap 会话中，屏幕上不会显示任何内容。ArcMap 还报告绘图错误，说“无法获取锁 [表 xxx 正在由另一个进程写入]。

我确信到那时写作已经完成。如果我关闭当前 ArcMap 会话并启动一个新会话，我可以毫无问题地查看结果。

有太多代码要发布，我有一种强烈的感觉，这个问题是由将代码原样移动到 backgroundworker 类引起的。我希望你们在后台工作人员/ArcGIS 插件方面更有经验的人可以给我一些指示，这可能是罪魁祸首。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:41:17.157

我解决了这个问题，但是，不太清楚为什么会这样。

backgroundworkder_DoWork() 按以下方式调用使用 FeatureCursor 的函数：

IFeatureCursor featureCursor = FeatureClass.Update(null,true);

浏览使用光标进行更新的功能

如果（某些条件）{ featureCursor=FeatureClass.Update(null,true); 再次通过功能做一些额外的更新}

我发现即使最后在 featureCursor 上运行 Marshal.ReleaseComObject() 方法，对 shapefile 的写锁（“.wr.lock”）仍然存在。但是，如果我在“if”子句中定义并使用新游标而不是重新使用 featureCursor，则 Marshal.ReleaseCombObject() 方法可以删除写锁定。但是话又说回来，如果定义并使用了新的游标，我就不需要使用 release 方法。尽管“.wr.lock”文件在执行后仍然存在，但我可以将输出 shapefile 添加到同一个 ArcMap 会话中并毫无问题地查看它。

如果有人可以深入了解为什么将上述代码放在 UI 线程中时没有引起任何问题，但是当被 backgroundworker_DoWork() 调用时会遇到锁定问题，我们将不胜感激。

而且像我在上面的代码中那样重复使用 FeatureCcursor 是不是一个坏习惯？

# microsoft-metro - 如何在单击按钮时暂停 Metro 应用程序？

> ID：12699568
> 
> 赞同：0
> 
> 时间：2012-10-02T22:51:01.287
> 
> 标签：microsoft-metro

我刚刚了解到不建议在代码中终止应用程序，但是如何在按钮的单击事件中暂停应用程序？单击时，我的应用程序中有一个关闭按钮，应该暂停该应用程序。我不希望用户按 ALT+f4 或任何东西。当用户再次从开始图标单击应用程序图标时，它应该恢复应用程序。我该怎么做？

我正在寻找类似的东西 -

```
 private void btnSuspend_Click(object sender, RoutedEventArgs e)
  {
      //Suspend App.
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:57:45.317

应用程序不能自行挂起。Windows 自动管理[Windows 应用商店应用的生命周期](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)。当应用程序不再可见或机器进入低功耗状态时，应用程序将在大约十秒的超时后暂停。当用户再次重新激活应用程序（通过开始、Alt-Tab 等）时，Windows 将恢复应用程序。

# java - HandlerInterceptorAdapter 不起作用

> ID：12699569
> 
> 赞同：2
> 
> 时间：2012-10-02T22:51:07.110
> 
> 标签：java, spring, spring-mvc, interceptor

请帮助 Spring MVC 新手。我很难`HandlerInterceptorAdapter`工作。这是代码和配置文件。mvc-调度程序-servlet.xml：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/mvc
      http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<mvc:annotation-driven />

<context:component-scan base-package="com.myproject" />

<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" >
    <property name="interceptors">
        <list>
            <ref bean="loginInterceptor" />
        </list>
    </property>
</bean>

<bean id="loginInterceptor" class="com.myproject.util.login.LoginInterceptor" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

登录拦截器.java：

```
 package com.myproject.util.login;
    import org.apache.log4j.Logger;
    import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    public class LoginInterceptor extends HandlerInterceptorAdapter {
    private static final Logger LOG = Logger.getLogger(LoginInterceptor.class);

  @Override
  public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
    LOG.debug("intercepted");
    return super.preHandle(request, response, handler);
  }
} 
```

我试图让这个拦截器为任何控制器运行。也许，`ControllerClassNameHandlerMapping`， 不是为此目的的最佳选择。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:29:04.733

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/somepath/**" />
        <bean class="com.mydomain.myapp.SomeInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

我发现“mvc:interceptors”代替了 XML bean - 请参阅：[Spring MVC：为什么这个 <mvc:interceptors> 声明有效，而不是传统的 XML？](https://stackoverflow.com/questions/5825672/spring-mvc-why-does-this-mvcinterceptors-declaration-work-but-not-the-tradi)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T08:01:33.337

尝试使用：

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"> 
```

代替：

```
<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"> 
```

# richfaces - 如何在 RichFacesPleaseWaitBox 上阻止键“esc”？

> ID：12699570
> 
> 赞同：0
> 
> 时间：2012-10-02T22:51:08.340
> 
> 标签：richfaces, status, keyevent, richfaces-modal

我在我的应用程序中有一个“RichFacesPleaseWaitBox”的实现，但是有一个问题。

当用户启动任何操作时，状态开始，显示模式“等待”。当动作完成执行时，状态结束，隐藏模式“等待”。到这里还好。

但是，如果用户开始操作，按下“ESC”，已经出现的模态“等待”消失了，允许用户再次点击操作，进行新的提交。

如何阻止“ESC”以解决此问题？

我已经在我的 modalPanel 中尝试过，但没有用。

```
<rich:hotKey id="hotKeyModalPanelSTATUS" 
handler="alert('false');"
key="esc" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:03:29.167

如果我的观点正确：

导入[mousetrap.js](http://craig.is/killing/mice)文件，遵循[jquery 文档](http://api.jquery.com/event.preventDefault/)，最后执行如下代码（当然是在模态显示事件上）：

```
Mousetrap.bind('esc', function(event){
  event.preventDefault();
  return false;
}); 
```

您可能还想在 modal 的 hide 事件中取消绑定该事件，因此，您可以对 hide 事件执行以下操作：

```
Mousetrap.unbind('esc'); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:17:47.773

好吧，现在：
使用 onkeydown 并阻止我的应用程序中的任何 esc 。
在第一次加载 js 时：

```
document.onkeydown 
```

简单的：

```
if(event.keyCode == 27)
 return false; 
```

但是，如果我想在某些功能或窗口中说“你好，你按下 Esc”.. 我不能 .. 是一个核心解决方案。

如果有人有更好的解决方案，请仅阻止请求的 ESC 效应 .. plz .. 贡献

# graphics - 如何使用 Graphics 类和 fill.rect 创建条形图/图形？

> ID：12699571
> 
> 赞同：1
> 
> 时间：2012-10-02T22:51:16.833
> 
> 标签：graphics, graph

```
 /* Written by Brandon Colchin */
import javax.swing.*;
import java.awt.*; 
import java.util.*;

public class Bar extends JApplet
{
   public void paint (Graphics x)
   {
      super.paint( x);

        //declare variables
        int Mon, Tues, Wed, Thurs, Fri;

        //create scanner
        System.out.println("Please enter the unrealistic amount of math problems you do each day");
        Scanner bar = new Scanner(System.in);
        Mon = bar.nextInt();
        Tues = bar.nextInt();
        Wed = bar.nextInt();
        Thurs = bar.nextInt();
        Fri = bar.nextInt();

        //create edges
        x.drawLine(50, 50, 50, 300);
        x.drawLine(50, 300, 350, 300);

        //label edges
        x.drawString("100", 25, 60);
        x.drawString("90", 30, 85);
        x.drawString("80", 30, 110);
        x.drawString("70", 30, 135);
        x.drawString("60", 30, 160);
        x.drawString("50", 30, 185);
        x.drawString("40", 30, 210);
        x.drawString("30", 30, 235);
        x.drawString("20", 30, 260);
        x.drawString("10", 30, 290);
        x.drawString("Mon", 65, 315);
        x.drawString("Tues", 130, 315);
        x.drawString("Wed", 195, 315);
        x.drawString("Thurs", 260, 315);
        x.drawString("Fri", 325, 315);

        //draw bars
        x.setColor(Color.BLUE);
        x.fillRect( 60, (Mon), 40, Mon );
        x.setColor(Color.RED);
        x.fillRect( 125, (Tues), 40, Tues );
        x.setColor(Color.CYAN);
        x.fillRect( 190, (Wed), 40, Wed );
        x.setColor(Color.YELLOW);
        x.fillRect( 255, (Thurs), 40, Thurs );
        x.setColor(Color.WHITE);
        x.fillRect( 320, (Fri), 40, Fri );` 
```

输出是一个图形，左边是 100-10，底部是 Mon-Fri，还有 5 个矩形。

这是一个编程课，要求是：轴必须在图形的左侧和底部，5 个条的 5 个数字必须是用户输入的。

我不知道将 y 点和高度相乘以使图形从图形左侧的相应数字开始（例如，如果用户输入 60，图形高度将与左侧的 60 匹配）图形和底部将停在 x 轴边缘）

此外，当我在运行程序后被提示输入 5 个数字时，它让我输入 10 个数字，即使我只有 5 次 nextInt。奇怪的是，输入的前 5 个数字什么都不做，只有最后 5 个数字用于周一至周五。

需要任何帮助

# linux - 在 Git 别名中转义 $num

> ID：12699575
> 
> 赞同：2
> 
> 时间：2012-10-02T22:51:36.847
> 
> 标签：linux, git, git-config, git-alias

我试图给一个更简单的存储起别名，这样我就可以做到`git load <stashname>`这一点：

```
load = !git stash list | grep ' $1$' | awk '{ print $1 }' | sed '$ s/:$//'; echo 
```

不幸的是，awk`$1`也被存储名称所取代。我怎样才能逃脱那个 $ 符号？试过了`\$`，但 git 说：

```
fatal: bad config file line 33 in /home/alvaro/.gitconfig 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T17:23:45.903

$1 的出现都没有被替换。它们被单引号包围。行`; echo`尾的只是一个注释。所以它并没有真正做任何事情。如果您希望它成为别名的一部分，则需要用双引号将整个内容括起来。

被`<stashname>`添加到行尾（我假设这就是它的`echo`用途？）您提出的命令似乎想要回显类似`stash@{n}`给定存储名称的内容。下面的别名将做到这一点。（虽然它不是很有用）

```
[alias]
load = "!git stash list | grep \" $1$\" | awk '{ print $1 }' | sed '$ s/:$//' #" 
```

第一次出现的 $1 被参数替换，因为它只被双引号括起来；我们需要逃避。awk 的 $1 不会被替换为`<stashname>`. 除了 git 已经允许你申请，pop 按名称隐藏。

```
$ git stash list # produces no output
$ echo "something" > else.txt
$ git stash something
Saved working directory and index state On master: something
HEAD is now at 6d3fcf0 merged
$ git load something
stash@{0} 
```

也许这样看更容易

```
[alias]
test = "! echo $1 '$2' \"$3\" end; # " 
```

结果是

```
$ git test first second third
first $2 third end 
```

# ruby-on-rails - YAML 配置文件：为什么是 'example' 而不是 :example？

> ID：12699579
> 
> 赞同：3
> 
> 时间：2012-10-02T22:51:56.190
> 
> 标签：ruby-on-rails, yaml

我为环境特定变量（如用户名和密码）设置了一个环境 YAML 文件。要在我的应用程序中使用这些变量，我需要使用`APP_CONFIG['username']`而不是`APP_CONFIG[:username]`. 为什么是这样？我将如何启用后者？不是主要问题，但不知道差异的原因让我很困扰。

**配置/初始化程序/load_app_config.rb**

```
APP_CONFIG = YAML.load_file("#{Rails.root}/config/app_config.yml")[Rails.env] 
```

**配置/app_config.yml**

```
development:
  username: development_name
  password: secret

production:
  username: production_name
  password: super_secret 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T00:13:30.930

默认情况下，YAML 键呈现为字符串。

```
development:
  username: development_name
  password: secret 
```

可通过

```
APP_CONFIG = YAML.load_file("#{Rails.root}/config/app_config.yml")[Rails.env]
APP_CONFIG['development']['username']
# => "development_name" 
```

如果你想让一个特定的键成为一个符号，你应该在 YAML 文件中使用 : 作为前缀。

```
development:
  :username: development_name
  :password: secret

APP_CONFIG = YAML.load_file("#{Rails.root}/config/app_config.yml")[Rails.env]
APP_CONFIG['development'][:username]
# => "development_name"
APP_CONFIG['development']['username']
# => nil 
```

通常不会这样做，因为这是特定的 Ruby 行为。其他语言可能对领先的 :. 不满意。

如果您特别想将密钥作为符号访问，您可以使用`symbolize_keys!`

```
APP_CONFIG = YAML.load_file("#{Rails.root}/config/app_config.yml")[Rails.env].simbolize_keys! 
```

但大多数时候，努力是不值得的。在内部，90% 的库在比较期间将符号转换为字符串，尤其是当您处理具有无关访问的哈希时。因此，在故事的最后，您可能希望在这种情况下保留字符串。

最后一个选项是创建一个[HashWithIndifferentAccess](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html)

```
APP_CONFIG = HashWithIndifferentAccess.new(YAML.load_file("#{Rails.root}/config/app_config.yml")[Rails.env]) 
```

这将允许您访问

```
APP_CONFIG[:development][:username]
APP_CONFIG['development'][:username]
APP_CONFIG['development']['username'] 
```

冷漠。它通过在内部将哈希键存储为字符串并将请求转换`[]`为字符串来工作，因此它始终有效。这是几个 Rails 组件使用的类，包括`params[]`控制器中著名的哈希。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T22:57:54.660

`symbolize_keys`在 YAML.load_file 返回的哈希上使用

# python - Pygame 按钮和文本

> ID：12699580
> 
> 赞同：0
> 
> 时间：2012-10-02T22:52:06.627
> 
> 标签：python, pygame

有谁知道如何使用 pygame 创建按钮？我是这种事情的新手，并且还在创建游戏，但是如何在 pygame 的主窗口（总共 1 个窗口）中制作按钮？另外，如何显示文本？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:05:07.833

# 演示

请参阅此答案：[https](https://stackoverflow.com/a/10892583/341744) ://stackoverflow.com/a/10892583/341744它创建菜单按钮，在悬停时更改文本颜色。

> 看看这个示例菜单： [https](https://stackoverflow.com/a/10747990/341744) ://stackoverflow.com/a/10747990/341744 特别是他的代码： [https ://gist.github.com/2802185](https://gist.github.com/2802185)
> 
> 它创建了一个类`Option`，当你鼠标悬停时它会改变颜色。您可以扩展它，因此单击时，按钮会调用一个函数。（即： `new_game()`等`show_options()`）

# pygame 项目：标签

并通过标签查看项目示例： [menu](http://www.pygame.org/tags/menu)、 [button](http://www.pygame.org/tags/button)、 [text](http://www.pygame.org/tags/text)。

# php - 你如何通过子类调用构造函数？

> ID：12699584
> 
> 赞同：0
> 
> 时间：2012-10-02T22:52:43.377
> 
> 标签：php, oop, class, object, constructor

我需要调用以下类 Foto 的构造函数

```
class Foto extends Galerie
{
    function __construct($a,$b)
    { }
} 
```

通过它的子类。就像是：

```
class Album extends Foto
{
    function __construct($a,$b)
    { return $this->Foto[__construct] }
} 
```

有任何想法吗？希望你能明白我的意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T23:02:36.587

```
parent::__construct($a,$b) 
```

是你要找的。您还可以使用相同的关键字调用父类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:05:08.993

您可以通过执行以下操作调用父构造函数：

```
parent::__construct($a, $b); 
```

现在我们解决了这个问题：

请给你的变量命名。`$a`什么也不`$b`说。另外我真的想知道你是否应该真正扩展这些类。阅读有关[Liskov 替代原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)的信息。

# php - 从远程服务器下载和调整图像大小的脚本

> ID：12699586
> 
> 赞同：1
> 
> 时间：2012-10-02T22:52:57.690
> 
> 标签：php, image-processing, webserver, remote-server

我正在寻找一种方法来制作 Web 服务器缓存并从另一台远程服务器提供调整大小的图像。

假设站点 A 位于非洲某处。在站点 A 上是每五分钟刷新一次的 JPEG 图像（它们是网络摄像头）。如果您从美国访问站点 A，由于服务器位于非洲，因此加载图像需要相当长的时间。

我有站点 B。我希望站点 B 显示站点 A 的四个图像，但我希望它们从美国的服务器提供（这也是站点 B 的托管位置）。这样，它们当然会加载得更快。

我不熟悉脚本创建。我尝试了一些来自 CodeCanyon 的 PHP 脚本，并且这个概念有效，但似乎总是有一些小错误导致整个系统失败。

它们通过在本地站点 URL 之后提供远程图像 URL 来工作（即[http://www.SiteB.com/image_cacher.php?=http://www.SiteA.com/image1.jpg](http://www.SiteB.com/image_cacher.php?=http://www.SiteA.com/image1.jpg)）。这正是我想做的。

我希望将缓存的图像存储在站点 B 服务器上一个名为“缓存”的文件夹中。这样，我可以使用 cron 作业每五分钟自动删除一次缓存的图像；网络摄像头图像的更新频率相同。

不过，我已经解决了 cron 作业问题，所以我现在唯一的困境是创建某种类型的脚本（最好是 PHP）来实现这一点。

这里有很多类似的问题，但它们都略有不同，不幸的是我找不到任何可以执行此任务的东西。

谢谢！

# hibernate - 执行持久化时，在此 ResultSet 中未找到列名“列”

> ID：12699587
> 
> 赞同：1
> 
> 时间：2012-10-02T22:52:59.123
> 
> 标签：hibernate, postgresql, jakarta-ee, jpa

我正在使用 JPA 和 Hibernate 连接到 Postgres 数据库，但我无法将实体持久保存到数据库中。

我在数据库中有以下内容：

```
CREATE SEQUENCE "MODEL_C_MODEL_seq"
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 93
  CACHE 1;
ALTER TABLE "MODEL_C_MODEL_seq"

CREATE TABLE "MODEL"
(
  "C_USER" character varying(10) NOT NULL,
  "C_MODEL" serial NOT NULL,
  "TP_MODEL" character(5) NOT NULL,
  "NM_MODEL" character varying(20) NOT NULL,
  CONSTRAINT "MODEL_PK" PRIMARY KEY ("C_MODEL" ),
  CONSTRAINT "MODEL_CUSER_FK" FOREIGN KEY ("C_USER")
      REFERENCES "USER" ("C_USER") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT "MODEL_TPMODEL_FK" FOREIGN KEY ("TP_MODEL")
      REFERENCES "ADM_TYPES" ("C_TYPE") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT "MODEL_CUSER_NMNAME_UNIQUE" UNIQUE ("C_USER" , "NM_MODEL" )
)
WITH (
  OIDS=FALSE
); 
```

我的实体是：

```
public class Model implements Serializable {
    private static final long serialVersionUID = 1L;

    **@Id
    @SequenceGenerator(name="modelPKgen", sequenceName="MODEL_C_MODEL_seq")
    @GeneratedValue(generator="modelPKgen", strategy= GenerationType.IDENTITY)
    @Column(name = "\"C_MODEL\"", unique=true, insertable=false)    
    private int cModel;**

    @OneToMany(cascade = CascadeType.ALL,  fetch= FetchType.EAGER)//, mappedBy = "model", fetch= FetchType.EAGER)
    @JoinColumn(name= "`C_MODEL`")
    private Collection<State> stateCollection;

    @JoinColumn(name = "`C_USER`", referencedColumnName ="`C_USER`", updatable = false)
    @ManyToOne(optional = false)
    private User user;

    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 20)
    @Column(name = "\"NM_MODEL\"")
    private String nmModel;     

    @JoinColumn(name = "\"TP_MODEL\"")
    @ManyToOne(optional = false)
    private AdmTypes admTypes;
... 
```

检查许多帖子，我似乎对字段**cModel**有正确的注释。

我有一个执行以下操作的类：

```
Model dbModel = new Model(user.getCUser(), simModel.getName());
        AdmTypes dbAdm = new AdmTypes(simModel.getType());
        dbModel.setAdmTypes(dbAdm);

        **em.persist(dbModel);**
        em.flush(); 
```

执行时**`em.persist`**出现此错误的异常：

```
Caused by: org.hibernate.exception.SQLGrammarException: The column name "C_MODEL" was not found in this ResultSet. 
```

在 em.persist 检查 Hibernate 完成的插入语句时，我看到：

```
insert 
    into
        "MODEL"
        ("TP_MODEL", "NM_MODEL", "C_USER") 
    values
        (?, ?, ?) 
```

这是完美的，因为该句子在 postgres 中运行（插入具有新生成`C_MODEL`id 的新记录）。

有谁知道会是什么？

**更新（完整的堆栈跟踪）：**

```
javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: The column name "C_MODEL" was not found in this ResultSet.
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1367)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1301)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:866)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.persist(EntityManagerWrapper.java:269)
    at com.librethinking.simmodsys.persistence.adapters.ModelConverter.SIMModelToModel(ModelConverter.java:65)
    at com.librethinking.simmodsys.ejb.ModelBean.saveSIMModel(ModelBean.java:72)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5366)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5338)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5326)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy186.saveSIMModel(Unknown Source)
    at com.librethinking.simmodsys.ejb.__EJB31_Generated__ModelBean__Intf____Bean__.saveSIMModel(Unknown Source)
    at com.librethinking.simmodsys.web.ModelsController.saveModel(ModelsController.java:366)
    at com.librethinking.simmodsys.web.ModelsController.processRequest(ModelsController.java:104)
    at com.librethinking.simmodsys.web.ModelsController.doPost(ModelsController.java:181)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.exception.SQLGrammarException: The column name "C_MODEL" was not found in this ResultSet.
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:122)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractResultSetProxyHandler.continueInvocation(AbstractResultSetProxyHandler.java:108)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy189.getInt(Unknown Source)
    at org.hibernate.id.IdentifierGeneratorHelper.get(IdentifierGeneratorHelper.java:152)
    at org.hibernate.id.IdentifierGeneratorHelper.getGeneratedIdentity(IdentifierGeneratorHelper.java:92)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:100)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:58)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2767)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3278)
    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:78)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:78)
    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:844)
    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:819)
    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:823)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:860)
    ... 58 more
Caused by: org.postgresql.util.PSQLException: The column name "C_MODEL" was not found in this ResultSet.
    at org.postgresql.jdbc2.AbstractJdbc2ResultSet.findColumn(AbstractJdbc2ResultSet.java:2550)
    at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getInt(AbstractJdbc2ResultSet.java:2414)
    at sun.reflect.GeneratedMethodAccessor93.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractResultSetProxyHandler.continueInvocation(AbstractResultSetProxyHandler.java:104)
    ... 83 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:38:34.623

我突然想到了几件事：

1.  您正在创建一个序列生成器，然后告诉 id generation 为`GenerationType.IDENTITY`. 我会尝试`GenerationType.SEQUENCE`或`GenerationType.AUTO`。如果身份有效，我会感到惊讶，因为 Hibernate 文档说它适用于 DB2、MySQL、MS SQL Server、Sybase 和 HypersonicSQL。

2.  我会从您的标识符上的注释中删除该`insertable=false`属性。`@Column`我会假设根据您的序列生成属性，Hibernate 将选择序列值并插入它：`SELECT currval(pg_get_serial_sequence(...))`只有当 insertable 为真时才会起作用。

3.  将 sequenceName="MODEL_C_MODEL_seq" 更改为 sequenceName="\"MODEL_C_MODEL_seq\""。

# javascript - JSONP 在本地转换为数组？

> ID：12699588
> 
> 赞同：1
> 
> 时间：2012-10-02T22:53:04.070
> 
> 标签：javascript, jquery

我有从远程服务器返回的数据。但是，我遇到的问题有时是“事物”将是一系列“事物”或只是一个“事物”

"thing" 有一个 name 和 value 属性，还有其他几个。

我遇到的问题是只返回一个“东西”。现在我有看起来像这样的代码。一定有更好的方法。

```
var array = [];
if (data.results.thing.length > 1) {

var array = $.map(data.results.thing, function (item) {

    return {
        label: item.name,
        value: item.value
    }
});
}
else {

array = $.makeArray({
    label: data.results.thing.name,
    value: data.results.thing.value
});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:58:46.543

事实证明，jQuery 比这更聪明。[$.makeArray](http://api.jquery.com/jQuery.makeArray/)将按原样返回一个真正的数组，或者根据需要将对象制作成一个数组：

```
var array = $.map( $.makeArray(data.results.thing), function (item) {

    return {
        label: item.name,
        value: item.value
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:00:22.363

使用[`jQuery.isArray`](http://api.jquery.com/jQuery.isArray/)：

```
var thing = data.results.thing;
if (! $.isArray(thing))
    thing = [ thing ]; // array literal containing one item: thing
var array = $.map(thing, function (item) {
    return {
        label: item.name,
        value: item.value
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:00:43.910

使用该`isArray`方法来确定一个值是否是一个数组，如果不是，您可以将其设为一个：

```
var arr = data.results.thing;

if (!$.isArray(arr)) {
  arr = [arr];
} 
```

现在它总是一个数组，所以你可以一直以同样的方式对待它。

# apache - 我在 ubuntu 上设置了一个带有真实网站 url 的虚拟主机，现在我想访问真实的网站怎么办？

> ID：12699605
> 
> 赞同：0
> 
> 时间：2012-10-02T22:55:38.090
> 
> 标签：apache, ubuntu, virtualhost

我认为标题解释了我的问题，但这里更简单：

虚拟主机：www.something.com
真实网站：www.something.com

当我在地址栏中键入 www.something.com 时，我的浏览器总是将我发送到本地虚拟主机，如何在不删除或禁用虚拟主机的情况下访问真实网站。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:10:20.143

有几种方法可以做到这一点。您可以更改您机器上的 /etc/hosts 文件，以便[http://www.something.com](http://www.something.com)指向真正的主机，方法是在下面输入一个条目。将 192.168.111.111 替换为真实 IP。

`192.168.111.111 www.something.com something.com`

更好的方法是将本地虚拟主机的名称更改为[http://www.devel-something.com](http://www.devel-something.com)之类的名称，这样您就有两个不同的站点。

# sql-server - SSDT 部署 CLR 问题：.Net SqlClient：无法安装程序集，因为现有策略会阻止它被使用

> ID：12699606
> 
> 赞同：0
> 
> 时间：2012-10-02T22:55:44.310
> 
> 标签：sql-server, visual-studio, clr, sql-server-data-tools

我在 SQL 2008 R2 中有一个数据库，我通过导入现有数据库创建了一个 SSDT SQL 数据库项目。该数据库有一些使用 System.Drawing V2.0 的 CLR 例程。

在本地部署项目时，出现以下错误。

> SQL72014：.Net SqlClient 数据提供程序：消息 6586，级别 16，状态 1，行 1 程序集“SystemDrawing”无法安装，因为现有策略将阻止使用它。

我不确定要寻找什么政策。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:20:58.717

您的 t-sql 脚本应如下所示

```
CREATE DATABASE [test]
GO
ALTER DATABASE [test] SET TRUSTWORTHY ON WITH ROLLBACK IMMEDIATE
GO
USE [test]
GO
ALTER DATABASE [test] SET TRUSTWORTHY ON
GO
exec sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
exec sp_configure 'clr enabled', 1;
GO
RECONFIGURE;
GO
CREATE ASSEMBLY [System.Drawing]
AUTHORIZATION [dbo]
FROM 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\System.Drawing.dll'
WITH PERMISSION_SET = UNSAFE
GO 
```

但请注意，如果您安装了 .net 4，则必须使用该 .net 4，并且可能您为 sql server 使用了错误的 dll。

# javascript - 如何强制使用当前脚本？

> ID：12699608
> 
> 赞同：0
> 
> 时间：2012-10-02T22:55:53.723
> 
> 标签：javascript, visual-studio-2010, caching

我有一个我正在 Visual Studio 2010 中开发的 asp.net mvc 3 项目。在该`scripts`部分中，我有一个我编写的库。我对图书馆进行了更改。但是，我注意到当程序在浏览器中运行时，更改并没有显示出来。当我查看 Firefox 的调试器时，它显示旧版本正在加载。我尝试在页面上清理项目、重建、构建、关闭 firefox、ctrl f5。如何获取要加载的脚本的当前版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:43:26.383

有两种普遍接受的方式来做到这一点：

**选项 1**
我认为最好的选择。给脚本一个版本号。必须记住每次发布都更改版本号

```
<script src="mylib_v4.3.js"></script>. 
```

**选项 2**
另一个远没有那么好，因为它可以杀死缓存。某些浏览器会在每次调用时重新请求脚本。（我真的不知道哪些浏览器有哪些行为。）

```
<script src="mylib.js?version=4.3"></script> 
```

**选项 3**
另一个选项是将脚本保存在`version directory`.

实际上，在我的 PHP 代码中，我有

```
<script src="/js/ver##VERSION##/mylib.js"></script> 
```

并且我的 php 代码替换为`##VERSION##`发布版本。这样，我的构建脚本会创建一个目录树来正确上传和设置路径。如果您有服务器端支持，则此方法效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T22:57:17.547

在脚本参考中添加“版本参数”：

```
<script src="/scripts/myscript.js?version=0.2"></script> 
```

该方法的优点是在客户端使用您的应用程序时也可以完成这项工作，并且您希望在更新应用程序时强制他们的浏览器获取最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:56:47.757

清除浏览器缓存并将其禁用。

# mysql - 在许多行上运行计数和计数不同（数万）

> ID：12699609
> 
> 赞同：0
> 
> 时间：2012-10-02T22:55:58.473
> 
> 标签：mysql

我正在尝试运行此查询：

```
SELECT 
    COUNT(events.event_id) AS total_events,
    COUNT(matches.fight_id) AS total_matches,
    COUNT(players.fighter_id) AS total_players,
    COUNT(DISTINCT events.organization) AS total_organizations,
    COUNT(DISTINCT players.country) AS total_countries
FROM 
    events, matches, players 
```

这些是表格详细信息：事件 = 21k 玩家 = 90k 比赛 = 155k

所有这些都是唯一的，因此查询的前三件事将是这些数字。其他两个值应该是 total_organizations，其中组织列在事件中（应该返回几百），total_countries 应该使用玩家表中的国家列计算不同的国家（也是几百）。

所有这三个 ID 列都是唯一的且已编入索引。

这个查询现在需要永远。我什至没有耐心看到它完成。有没有更快的方法来做到这一点？

另外，我需要在每次页面加载时加载这些结果，所以我应该将此查询放在某个隐藏文件中，并设置一个 cron 作业以在每个午夜或某事运行并填充“总计”表或其他内容，以便我可以检索它从那张桌子上快吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:01:21.367

首先，去掉这里不必要的join；它阻止了大多数（如果不是全部）索引被使用。您需要三个不同的查询：

```
SELECT 
    COUNT(events.event_id) AS total_events,
    COUNT(DISTINCT events.organization) AS total_organizations
FROM 
    events;

SELECT 
    COUNT(matches.fight_id) AS total_matches
FROM 
    matches;

SELECT 
    COUNT(players.fighter_id) AS total_players,
    COUNT(DISTINCT players.country) AS total_countries
FROM 
    players; 
```

这应该对提高这些查询的性能大有帮助。

现在，考虑添加这些索引：

```
CREATE INDEX "events_organization" ON events (organization);
CREATE INDEX "players_country" ON events (country); 
```

比较`EXPLAIN SELECT ...`添加这些索引前后的结果。他们可能会有所帮助，也可能不会。

* * *

请注意，如果您使用 InnoDB 存储引擎，那么无论如何都会访问所有表行，以强制执行事务隔离。在这种情况下，索引将仅用于确定要访问的表行。由于您正在计算整个表，因此根本不会使用索引。

如果您使用的是不完全支持 MVCC 的 MyISAM，那么`COUNT()`查询应该能够仅使用索引基数来执行，这将产生几乎即时的结果。这是可能的，因为 MyISAM 不支持事务，这意味着隔离不再是问题。

因此，如果您使用的是 InnoDB，那么您可能最终不得不使用 cronjob 来创建此数据的缓存。

# javascript - jQuery File Uploader IE9 没有在上传时发布任何参数

> ID：12699617
> 
> 赞同：4
> 
> 时间：2012-10-02T22:56:39.010
> 
> 标签：javascript, jquery, file-upload, blueimp

我正在使用 jQuery 文件上传插件和 rails 3。插件在这里：

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

我正在使用该插件来允许用户上传个人资料照片。到目前为止，该解决方案适用于 Chrome、Safari 和 Firefox。但是在 IE 上它失败了。当您在 IE 中选择文件时，插件会发布到服务器但没有参数，这是一个空帖子。

chrome中的示例帖子：

```
Started PUT "/api/1/settings/ajax_photo_upload" for 10.0.1.3 at 2012-10-02 15:39:20 -0700
Processing by ApiV1::SettingsController#ajax_photo_upload as JS
  Parameters: {"photo"=>#<ActionDispatch::Http::UploadedFile:0x007f9e4bac2e48 @original_filename="xxxxx.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"user[photo]\"; filename=\"xxxxx.jpeg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/3x/k1yb0r4s07q1jm82kq93ch180000gn/T/RackMultipart20121002-3633-sxsbtu>>}, "update_type"=>"general"} 
```

但是在 IE9 中，它不会发送任何内容：

```
Started PUT "/api/1/settings/ajax_photo_upload" for 10.0.1.10 at 2012-10-02 15:39:31 -0700
Processing by ApiV1::SettingsController#ajax_photo_upload as JS 
```

这是我的实现：

```
$('input[type="file"]').fileupload({
    url : '/api/1/settings/ajax_photo_upload',
    formData : [{
        name : 'authenticity_token',
        value : $('meta[name="csrf-token"]').attr('content')
    }],
    type : 'PUT',
    dataType: 'json',
    add : function (e, data) {
            data.submit();
    }
}); 
```

html

```
<input name="user[photo]" type="file" accept="image/*" > 
```

任何想法为什么 IE 会这样做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:50:14.473

你用的是基础插件吗？我曾经遇到过同样的问题并与之斗争了一天才意识到我没有包含 jquery.iframe-transport.js 插件：

```
<script src="js/jquery.iframe-transport.js"></script> 
```

[请参阅此处](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)的文档。

哦！并感谢您关于将“authenticity_token”键值对包含为“formData”的片段 - 这帮助我摆脱了 rails 3 警告“警告：无法验证 CSRF 令牌真实性”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T06:57:07.630

```
 $("#txt1").fileupload({
        replaceFileInput: false,
        dataType: "json",        
        datatype:"json",
        url: "<%=Page.ResolveUrl("~/WebService/AddAttachment.ashx")%>",
        done: function (e, data) {
            $.each(data.result, function (index, value) {
         //You get the response data in here from your web service
            })
            $("#txt1").val("");
        }`enter code here`
    }); 
```

这在 IE8 和 IE9 + 以上都经过测试并且工作正常。请确保使用正确的dataType：“json”（或datatype：“json”），并确保在调试和检查时您的Web服务方法响应正确更新为data.result。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:02:39.427

基本上是关于 html 5 的数据标签的支持。IE9 有严重的问题。例如，当您上传图像时，在 chrome 中它会发送 data:blob 并在您实际上传图像之前为您提供预览。在 IE 中，你不能。在 IE9 中检查 Gmail 的邮件附件屏幕，您会发现不同之处。如果是大型项目，我建议你使用 flash 作为图片上传器。

# javascript - 在Javascript中，为什么不能随意设置原型继承？

> ID：12699620
> 
> 赞同：5
> 
> 时间：2012-10-02T22:56:49.150
> 
> 标签：javascript, prototypal-inheritance

根据 Crockford 的定义：

```
if (typeof Object.create !== 'function') {
    Object.create = function (o) {
        function F() {}
        F.prototype = o;
        return new F();
    };
} 
```

和 ECMA-262 的引入`Object.create()`，我们现在可以设置一个新对象`a`的隐藏原型属性来指向另一个对象`b`进行纯原型继承。但它仅限于一个新对象，并且 Javascript 仍然不允许类似的东西

```
a.__proto__ = b; 
```

对于 ECMA-262 Javascript 规范中的现有对象`a`。是否有理由将其限制为新对象而不是现有对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:17:09.390

根据[MDN`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)条目，ES6 将允许分配给对象的`[[Prototype]]`. 之前的文章（自 2010 年 10 月以来）说该属性已被弃用。可能还需要几年时间才能在网络上使用它，特别是因为在不支持它的浏览器中很难稳健地实现。

我希望该`__proto__`属性对于内置对象和拥有它的宿主对象是只读的。

您将不得不问 Brendan Eich 为什么该`[[Prototype]]`属性被隐藏并且只能通过构造函数进行设置，但我怀疑他希望保持 JavaScript 简单并且不允许滥用`eval`.

至于 Crockford 的`beget`，它最初是`clone`由[Lasse Reichstein Nielsen](http://groups.google.com/group/comp.lang.javascript/msg/5d06e72e55d5bf11)作为克隆对象的一种方式发布的，后来被 ES5 [Object.create](http://ecma-international.org/ecma-262/5.1/#sec-15.2.3.5)取代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:01:46.830

我能看到的一个原因是避免循环引用的可能性。

# python - 交换numpy数组的子数组

> ID：12699625
> 
> 赞同：3
> 
> 时间：2012-10-02T22:57:33.240
> 
> 标签：python, numpy, pygtk, pycairo

首先是一些上下文。

我正在尝试使用 Cairo（实际上是 pycairo）绘制 Gdk（实际上是 pygtk）pixbuf。我的原始代码如下所示：

```
import cairo as C
import gtk.gdk as GG

FMT = C.FORMAT_ARGB32
CSP = GG.COLORSPACE_RGB

st = C.ImageSurface.format_stride_for_width(FMT, zw)
surf = C.ImageSurface(FMT, zw, zh)
c = C.Context(surf)

# draw into c here ...

pixels = surf.get_data()
return GG.pixbuf_new_from_data(pixels, CSP, True, 8, zw, zh, st) 
```

有一段时间，看起来这只是工作，直到我尝试绘制颜色而不是黑色文本。事实证明，这两个库在字节顺序上存在分歧，如下所示：

```
# !!! FIXME !!! cairo ARGB surfaces and gdk pixbufs disagree on bytesex:
# cairo: LSB --> B G R A <-- MSB
# gdk:   LSB --> R G B A <-- MSB
# !!! WTF !!! 
```

结果是（从 pixbuf 传送到屏幕后）红色和蓝色通道交换的图像:-(

因此，如果我继续使用 pixbufs（如我所愿），我需要对数据进行后处理，每 1 个字节与每 3 个字节交换一次。我可以用普通的python做到这一点：

```
def changesex(data):
    i0 = 0
    i2 = 2
    l = len(data)
    while i2 < l:
        temp = data[i0]
        data[i0] = data[i2]
        data[i2] = temp
        i0 += 4
        i2 += 4 
```

但我认为如果有一个用 C 编写的内置运算符，使用 numpy 可能会更快。像这样：

```
a = np.frombuffer(data, dtype=np.uint8)
a.shape = (len(data) / 4, 4)
temp = a[:,0]
a[:,0] = a[:,2]
a[:,2] = temp 
```

我只是在做梦吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T08:04:24.340

注意`a`你的初始`(N,4)`数组`B,G,R,A`，你可以得到一个`(N,4)`表示，`R,G,B,A`而不是简单地使用一些高级索引：

```
a = np.frombuffer(data, dtype=np.uint8)
a.shape = (-1, 4)
rearranged = a[:,[2,1,0,3]] 
```

# php - 使用 PHP 从多维数组中提取报告 ID 的正则表达式

> ID：12699631
> 
> 赞同：0
> 
> 时间：2012-10-02T22:57:47.833
> 
> 标签：php, regex, multidimensional-array

这是我的问题。我们得到了一些不起作用的示例 PHP，所以我一直在尝试或多或少地“靠我的裤子”来写这个。我的正则表达式生锈了，而且我没有处理多维数组，所以这超出了我的经验范围。

我得到一个像这样的数组，但我只想要报告 ID，其中 [1] 包含单词“Export”，然后我需要将它们传递给另一个脚本，我必须或多或少地做同样的事情来获得一个结果集 ID，我可以传递给另一个我可以实际导出的脚本。

```
 [0] => Array
    (
        [0] => REPORTIDXXXXXXXXXXXXXXXXXXXXXXXXXXX
        [1] => REPORT EXPORT NAME#1
        [2] => REPORT DESCRIPTION #1
        [3] => 2012-10-02T17:31:30
    )

[1] => Array
    (
        [0] => REPORTIDYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
        [1] => REPORTOTHERNAME#2
        [2] => REPORTDESCRIPTION #2
        [3] => 2012-09-28T15:15:17
    )

[2] => Array
    (
        [0] => REPORTIDZZZZZZZZZZZZZZZZZZZZZZZZZZZZ
        [1] => REPORT EXPORT NAME#3
        [2] => REPORT DESCRIPTION #3
        [3] => 2012-09-28T14:59:17
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:05:06.310

像这样的东西应该工作：

```
function get_report_ids(array $rs) {
   $results = array();
   // loop over your data structure
   foreach($rs as $key => $data) {

      // If element 1 contains EXPORT (case insensitive)
      if(stripos($data[1], 'EXPORT') !== false) {
         // regex to capture the ID from element 0
         if(preg_match('/^EXPORTID(.*)$/i', $data[0], $matches)) {
            // add the ID to the results array
            $results[] = $matches[1];
         }
      }
   }

   // if we had results then return the array, otherwise return null
   return !empty($results) ? $results : null;
} 
```

示例返回值：

```
array(
  0 => 'XXXXXXXXXXXXXXXXXXXXXXXXXXX',
  1 => 'ZZZZZZZZZZZZZZZZZZZZZZZZZZZZ'
) 
```

# jersey - wadl 文件中的请求定义

> ID：12699633
> 
> 赞同：0
> 
> 时间：2012-10-02T22:57:57.567
> 
> 标签：jersey, wadl

wadl 有什么方法可以告诉请求类型。例如，下面的 PUT 方法需要“setBlockRequest”的 xml 数据类型，有什么方法可以将它引用到 xml 模式（xsd 文件）来定义“setBlockRequest”的内容？

这个 wadl 是由 Jersey 生成的。

```
<resource path="/appliance/{device_id}/update_multiple_values">
<param xmlns:xs="http://www.w3.org/2001/XMLSchema" name="device_id" style="template" type="xs:string"/>
<method id="setBlockValue" name="PUT">
<request>
<ns2:representation xmlns:ns2="http://wadl.dev.java.net/2009/02" xmlns="" element="setBlockRequest" mediaType="application/xml"/>
</request>
</method>
</resource>} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:51:40.837

就在这里。请参阅[http://www.w3.org/Submission/wadl/#x3-40001.3](http://www.w3.org/Submission/wadl/#x3-40001.3)（<grammars> 标签）。

Jersey 现在会自动为您生成它，但仅适用于您的类型使用 JAXB 注释进行注释的情况。（如果我没记错的话，这从 Jersey 1.13 开始有效，所以你可能想试一试）。

# visual-studio - TypeScript 重命名变量

> ID：12699643
> 
> 赞同：12
> 
> 时间：2012-10-02T22:59:16.673
> 
> 标签：visual-studio, refactoring, typescript, rename

Anders Hejlsberg 在 channel9 上显示，您可以使用 Visual Studio TypeScript 插件跨多个文件重命名变量。[cf.：Anders Hejlsberg](http://blogs.msdn.com/b/somasegar/archive/2012/10/01/typescript-javascript-development-at-application-scale.aspx)在 50:08的 TypeScript视频介绍。

但是，当我打开重构菜单时，所有项目都被停用，包括重命名。我正在使用最新版本的 VS2012 Professional。也许这与我系统上安装的 ReSharper 有关。任何人都可以确认这是一个错误还是重命名功能仍在开发中？

**编辑**，因为我可能不会将此作为答案发布：

ReSharper 会覆盖一些原始的 Visual Studio 菜单项。有一个复选框`RESHARPER -> Options -> Keyboard & Menus -> Hide overriden Visual Studio menu items`。

检查这个，原来的重构菜单再次出现。有一个`Rename`工作得很好的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:47:18.870

您可能无法在 Visual Studio 中重构名称有两个原因。

1.  如果您在调试模式下运行应用程序，许多编辑功能将不可用

2.  如果你有 Visual Studio 扩展，例如 Resharper，它可能已经覆盖了菜单中的 Visual Studio 功能或快捷键。对于重命名，Visual Studio 快捷方式是简单的`F2`，因此它不应与 Resharper 组合键发生冲突 - 但 Resharper 仍可能会覆盖上下文菜单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-14T13:41:00.043

ReSharper (7.1.1) 没有对 TypeScript 的内置重命名支持。如果您安装了 ReSharper，它可能会覆盖（并隐藏）Visual Studio 的本机重命名——这是默认功能。

要显示和启用 Visual Studio 的重命名，您需要取消选中以下选项：

> **RESHARPER -> 选项 -> 键盘和菜单 -> 隐藏覆盖的 Visual Studio 菜单项**

（根据这篇文章的评论，您可以通过以下链接投票支持将此功能添加到 ReSharper：http: [//youtrack.jetbrains.com/issue/RSRP-330454](http://youtrack.jetbrains.com/issue/RSRP-330454)）

# python - 如何在 Python 日志记录模块中抑制换行符。

> ID：12699645
> 
> 赞同：11
> 
> 时间：2012-10-02T22:59:41.353
> 
> 标签：python, logging

例如，当我这样做时，我想取消换行符 log.info(“msg”)。当我们“打印”它时

```
print msg, 
```

所以我需要像昏迷这样的东西来记录日志。

我播种了这个问题 [Suppress newline in Python logging 模块](https://stackoverflow.com/questions/7168790/suppress-newline-in-python-logging-module) ，但是任何人都可以给我参考或像“Hello world”这样的简单示例谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T05:14:08.307

这是我对[类似问题](https://stackoverflow.com/questions/7168790)的回答：

新行 ,`\n`被插入到`StreamHandler`类的`emit(...)`方法中。

如果您真的打算*修复*此行为，那么这里有一个示例，说明我如何通过[猴子修补](http://en.wikipedia.org/wiki/Monkey_patch)`emit(self, record)`logging.StreamHandler 类中的方法来解决此问题。

> 猴子补丁是一种在不改变原始源代码的情况下扩展或修改动态语言的运行时代码的方法。这个过程也被称为打鸭。

`emit()`这是省略换行符的自定义实现：

```
def customEmit(self, record):
    # Monkey patch Emit function to avoid new lines between records
    try:
        msg = self.format(record)
        if not hasattr(types, "UnicodeType"): #if no unicode support...
            self.stream.write(msg)
        else:
            try:
                if getattr(self.stream, 'encoding', None) is not None:
                    self.stream.write(msg.encode(self.stream.encoding))
                else:
                    self.stream.write(msg)
            except UnicodeError:
                self.stream.write(msg.encode("UTF-8"))
        self.flush()
    except (KeyboardInterrupt, SystemExit):
        raise
    except:
        self.handleError(record) 
```

然后，您将创建一个自定义日志记录类（在这种情况下，从 子类化`TimedRotatingFileHandler`）。

```
class SniffLogHandler(TimedRotatingFileHandler):
    def __init__(self, filename, when, interval, backupCount=0,
                 encoding=None, delay=0, utc=0):

        # Monkey patch 'emit' method
        setattr(StreamHandler, StreamHandler.emit.__name__, customEmit)

        TimedRotatingFileHandler.__init__(self, filename, when, interval,
                                          backupCount, encoding, delay, utc) 
```

有些人可能会争辩说这种类型的解决方案不是*Pythonic*或其他。可能是这样，所以要小心。

另外，请注意，这将是全局补丁`SteamHandler.emit(...)`，因此如果您使用多个日志记录类，则此补丁也会影响其他日志记录类！

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T23:14:07.913

这是不可能的（没有对日志模块的严重入侵）。如果您必须具有此功能，请分段构建日志记录字符串，并在您准备好显示带有换行符的日志消息时记录它。

# ruby-on-rails - 如何在 Rails 中编写代码？

> ID：12699646
> 
> 赞同：0
> 
> 时间：2012-10-02T22:59:46.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有三个模型及其对应的表和控制器：

*   要求
*   直接补丁
*   UTPFiberPatch

用户创建新请求并定义请求类型：直接或 UTP/光纤

一旦用户点击保存，请求将被保存，用户将被重定向到编辑屏幕以创建与该请求对应的所有补丁条目。

*   根据所选请求的类型，每个补丁条目将在 Direct 或 UTP 表中保存为单行。名为 request_id 的列将充当外键。
*   Direct 和 UTP/Fiber 的视图和形式将有所不同。
*   用户可以在单个主页上查看所有请求并单击以进行编辑。然后，用户可以在单个页面上查看该请求的所有补丁行，然后单击以编辑现有的或添加新的。

    1.  为此设置路由、控制器和视图的最佳方法是什么？
    2.  创建新补丁时如何传递请求 ID 并自动保存？

我不确定我遇到的问题的确切技术名称是什么，但如果需要，我很乐意添加更多细节并回答问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:12:54.427

您可以在请求模型上使用多态关联：

```
belongs_to :patch, :polymorphic => true 
```

将两列添加到您的请求表中：

```
patch_id : integer
patch_type : string 
```

当您创建请求并且用户选择补丁类型时，您将此补丁对象分配给您的请求，这将填充两个新列。从您请求模型中，您可以调用

```
request.patch 
```

这将根据存储在数据库中的详细信息为您返回适当类型的补丁（注意 - 您不能使用多态关联进行预加载）。

要执行视图，您可以根据补丁的类型在编辑屏幕中渲染部分。

# iphone - iOS6 和自动视图卸载

> ID：12699648
> 
> 赞同：0
> 
> 时间：2012-10-02T22:59:54.813
> 
> 标签：iphone, ios, memory-management, uiviewcontroller, ios6

**更新：**
澄清问题的背景；问题不在于如何避免该问题，而是要澄清该文档的含义，因为我的实验表明我期望根据文档卸载的视图并未卸载。我想了解这是否是一个错误，或者我是否误解了文档。为了解决这个问题，我知道在 viewWillAppear 而不是 viewDidLoad 中设置图像，并在 viewDidDisappear 中将图像设置为 nil，正在释放内存并且应用程序不会崩溃。但是，我想了解是否应该使用初始代码释放内存，因为实验是模拟将此类视图控制器用作插座，并在 Interface Builder 中设置 UI 图像（背景...），而不是设置它们在 viewWillAppear 中的代码中......

**原文：**
我正在尝试了解 iOS6 的一些新方面，如 View Controller Programming Guide 中所述：

> 在 iOS 6 及更高版本中，视图控制器在需要时卸载自己的视图视图控制器的默认行为是在第一次访问视图属性时加载其视图层次结构，然后将其保存在内存中，直到视图控制器被释放。视图在屏幕上绘制自身所使用的内存可能非常大。但是，当视图未附加到窗口时，系统会自动释放这些昂贵的资源。大多数视图使用的剩余内存足够小，以至于系统不值得自动清除和重新创建视图层次结构。

假设我正在创建一个带有 rootViewController 的简单应用程序。这个 rootViewController 有几个子视图控制器，都声明为 IBOutlets，而不是在代码中分配。

```
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController1;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController2;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController3;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController4;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController6;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController7;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController8;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController9;
@property(nonatomic,strong) IBOutlet ChildViewController *childViewController10; 
```

rootViewController 有几个按钮，按下每个按钮都会对每个 childViewController 执行简单的 presentModalViewController 操作

```
-(IBAction)showChild1Action:(id)sender{
  [self presentModalViewController:self.childViewController1 animated:true];
} 
```

每个 childViewController 都有一个关闭按钮，用于关闭子视图控制器。

```
-(IBAction)closeAction:(id)sender{
  [self dismissModalViewControllerAnimated:true];
} 
```

My expectation from the documentation was that the child view controller view objects would be released from memory, as the child view controllers are dismissed.
However I purposely tested with large view objects, and running profile on such an app, the memory usage just keeps growing as each child controller gets presented, and the app eventually crashes after I present child controller #7 or so.

What is your understanding of what has changed in iOS6 in that aspect?

RootViewController.h

```
#import <UIKit/UIKit.h>
#import "ChildViewController.h"

@interface RootViewController : UIViewController

@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController1;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController2;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController3;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController4;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController5;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController6;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController7;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController8;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController9;
@property(nonatomic,strong) IBOutlet ChildViewController *level2ViewController10;

-(IBAction)showChild1Action:(id)sender;
-(IBAction)showChild2Action:(id)sender;
-(IBAction)showChild3Action:(id)sender;
-(IBAction)showChild4Action:(id)sender;
-(IBAction)showChild5Action:(id)sender;
-(IBAction)showChild6Action:(id)sender;
-(IBAction)showChild7Action:(id)sender;
-(IBAction)showChild8Action:(id)sender;
-(IBAction)showChild9Action:(id)sender;
-(IBAction)showChild10Action:(id)sender;

@end 
```

RootViewController.m

```
#import "RootViewController.h"

@interface RootViewController ()

@end

@implementation RootViewController

@synthesize level2ViewController1;
@synthesize level2ViewController2;
@synthesize level2ViewController3;
@synthesize level2ViewController4;
@synthesize level2ViewController5;
@synthesize level2ViewController6;
@synthesize level2ViewController7;
@synthesize level2ViewController8;
@synthesize level2ViewController9;
@synthesize level2ViewController10;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(IBAction)showChild1Action:(id)sender{
    self.level2ViewController1.index=0;
    [self presentModalViewController:self.level2ViewController1 animated:true];
}
-(IBAction)showChild2Action:(id)sender{
    self.level2ViewController2.index=1;
    [self presentModalViewController:self.level2ViewController2 animated:true];
}
-(IBAction)showChild3Action:(id)sender{
    self.level2ViewController3.index=2;
    [self presentModalViewController:self.level2ViewController3 animated:true];
}
-(IBAction)showChild4Action:(id)sender{
    self.level2ViewController4.index=3;
    [self presentModalViewController:self.level2ViewController4 animated:true];
}
-(IBAction)showChild5Action:(id)sender{
    self.level2ViewController5.index=4;
    [self presentModalViewController:self.level2ViewController5 animated:true];
}
-(IBAction)showChild6Action:(id)sender{
    self.level2ViewController6.index=5;
    [self presentModalViewController:self.level2ViewController6 animated:true];
}
-(IBAction)showChild7Action:(id)sender{
    self.level2ViewController7.index=6;
    [self presentModalViewController:self.level2ViewController7 animated:true];
}
-(IBAction)showChild8Action:(id)sender{
    self.level2ViewController8.index=7;
    [self presentModalViewController:self.level2ViewController8 animated:true];
}
-(IBAction)showChild9Action:(id)sender{
    self.level2ViewController9.index=8;
    [self presentModalViewController:self.level2ViewController9 animated:true];
}
-(IBAction)showChild10Action:(id)sender{
    self.level2ViewController10.index=9;
    [self presentModalViewController:self.level2ViewController10 animated:true];
}

@end 
```

ChildViewController.h

```
#import <UIKit/UIKit.h>

@interface ChildViewController : UIViewController

@property(nonatomic,weak) IBOutlet UIImageView *image1;

@property NSInteger index;

-(IBAction)closeAction:(id)sender;

@end 
```

ChildViewController.m

```
#import "ChildViewController.h"

@interface ChildViewController ()

@end

@implementation ChildViewController

@synthesize image1;
@synthesize index;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    if(self.index==0)
        [self.image1 setImage:[UIImage imageNamed:@"IMG1.JPG"]];
    if(self.index==1)
        [self.image1 setImage:[UIImage imageNamed:@"IMG2.JPG"]];
    if(self.index==2)
        [self.image1 setImage:[UIImage imageNamed:@"IMG3.JPG"]];
    if(self.index==3)
        [self.image1 setImage:[UIImage imageNamed:@"IMG4.JPG"]];
    if(self.index==4)
        [self.image1 setImage:[UIImage imageNamed:@"IMG5.JPG"]];
    if(self.index==5)
        [self.image1 setImage:[UIImage imageNamed:@"IMG6.JPG"]];
    if(self.index==6)
        [self.image1 setImage:[UIImage imageNamed:@"IMG7.JPG"]];
    if(self.index==7)
        [self.image1 setImage:[UIImage imageNamed:@"IMG8.JPG"]];
    if(self.index==8)
        [self.image1 setImage:[UIImage imageNamed:@"IMG9.JPG"]];
    if(self.index==9)
        [self.image1 setImage:[UIImage imageNamed:@"IMG10.JPG"]];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

-(IBAction)closeAction:(id)sender{
    [self dismissModalViewControllerAnimated:true];
} 
```

When using Instruments I get these observations:

*   The memory allocation instrument is showing what I would expect to see: total allocation that goes up when child view controller is presented, goes down when child view is dismissed ![This is after showing then dismissing 3 child view controllers](../Images/d8f0624e3515311cced175a955773202.png)

*   However the activity indicator is telling a different story, with real memory increasing with every presentModalViewController, and never decreasing when dismissing them

![This is also after showing/dismissing 3 child view controllers](../Images/aeeca8f4e889ddbec048d6f6f61eb0c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:26:09.630

The answer I eventually got back from Apple:

> Your "large resources" happen to be images that you've loaded cached via +imageNamed:. Because they are loaded cached, they are exempted from the automatic cleanup. Generally only content generated via -drawRect: or by Core Animation is automatically released here. Because your views continue to exist, they continue to hold a reference to these cached images, and we can't purge them on memory warning either

Looks like cached resource isn't part of the automatic cleanup mentioned in the doc, and those resources only get deallocated when they stop being referenced.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:13:06.493

Sounds like you have a leak somewhere. Even if the system isn't releasing those views, memory use should max out after you've presented all 10 child controllers. If memory use grows without bound, your child controllers are probably giving up their views (and so creating new ones each time they're presented), but the views aren't being deallocated -- classic symptom of an over-retain situation. Try cutting the number of child controllers down to two and see if the same thing eventually happens. Or, use Instruments to look for a leak.

**Update:** `-[UIImage imageNamed]` has a reputation for never releasing the images it loads -- that may be the reason for your memory growth. Try loading the images using a different method, or not at all (since they're not really important to the experiment).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T14:50:54.003

Instead of using `imageNamed:` use `initWithContentsOfFile`.

For example:

```
__weak NSString *filePath = [[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"];
self.imageView.image = [[UIImage alloc] initWithContentsOfFile:filePath]; 
```

Because `alloc` method is being used, GC is marking this object. You can even mark the `filePath` string for GC cleanup.

# java - QTP 测试用例可以用 Java 编写吗？

> ID：12699650
> 
> 赞同：0
> 
> 时间：2012-10-02T23:00:05.970
> 
> 标签：java, qtp

为了这个问题的答案，我在网上做了很多探索，结果都干了。我已经看到使用一个库来处理这个问题，junit4QTP，但似乎没有人知道所述库的位置。

我希望完成的是能够用 Java 编写 QTP 测试用例，然后从 Java 代码或 QTP 本身进行执行调用。

请让我知道是否有人有这样做的经验。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T11:17:12.797

有趣的。

正如我从标题中了解到的那样，这只会“移植”单元测试的功能，对吗？

我也找到了[http://jqtp.blogspot.com/](http://jqtp.blogspot.com/)但你必须被邀请才能看到它......

# php - Symfony2 获取当前经过身份验证的数据库用户凭据

> ID：12699652
> 
> 赞同：0
> 
> 时间：2012-10-02T23:00:10.067
> 
> 标签：php, symfony

如何获得经过身份验证的数据库用户凭据？

在我的后端，我有一个部分，其中包含当前用户、姓名、电子邮件的凭据……我如何获得此凭据？它存储在会话中？如何获取会话用户 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:59:33.110

它在安全文档[http://symfony.com/doc/current/book/security.html#retrieving-the-user-object](http://symfony.com/doc/current/book/security.html#retrieving-the-user-object)

# android - Proguard Android 不会混淆除少数类之外的任何内容

> ID：12699653
> 
> 赞同：0
> 
> 时间：2012-10-02T23:00:17.110
> 
> 标签：android, obfuscation, proguard

我想强制 ProGuard 除了几个类之​​外不要混淆任何东西。

如何才能做到这一点？请提供实际的示例代码，因为我在网上查看并没有找到类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T17:06:07.083

对于那些关心它的人来说，这是如何完成的：

-保持类！com.mypackage.classA，！com.mypackage.classB { *; }

ETC...

# javascript - DOM 和 Javascript 比较

> ID：12699656
> 
> 赞同：0
> 
> 时间：2012-10-02T23:00:25.500
> 
> 标签：javascript

我想比较两个不同时间之间 Javascript 以及 DOM 中对象和变量的状态。基本上，我想很容易地确定设置的内容以及为什么一段代码会以特定方式做出反应，而无需花费大量时间单步执行代码。

# php - 如何删除php上的最后一个逗号？

> ID：12699663
> 
> 赞同：3
> 
> 时间：2012-10-02T23:00:52.547
> 
> 标签：php, wordpress, slideshow, supersized

我有一个编辑过的超大...我在 wp 上添加了一个关于照片的循环代码....

所以我在原版上有这个：

```
slides : [
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/shaden-2.jpg', title : 'Image Credit: Brooke Shaden', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/shaden-2.jpg', url : 'http://www.nonsensesociety.com/2011/06/brooke-shaden/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/shaden-3.jpg', title : 'Image Credit: Brooke Shaden', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/shaden-3.jpg', url : 'http://www.nonsensesociety.com/2011/06/brooke-shaden/'}
                                        ], 
```

我已经从 wp 编辑了循环库：

```
slides : [

                    <?php query_posts('cat=46'); ?> 
                    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>     
                        <?php
                            $thumb = get_post_meta($post->ID,'_thumbnail_id',false);
                            $thumb = wp_get_attachment_image_src($thumb[0], false);
                            $thumb = $thumb[0];
                        if ( has_post_thumbnail() ) { ?>
                                {image : '<?php echo $thumb; ?>'},
                    <?php } ?>
                    <?php endwhile; else: ?>
                    <?php endif; ?>
                    <?php wp_reset_query(); ?>
                    ], 
```

它适用于 Chrome、Firefox 等...

但我在 IE 8 - 7 和旧版 Firefox 上遇到此警报的问题：

> 消息：'slides[...].url' 为空或不是对象
> 
> 线路：23
> 
> 字符：3
> 
> 代码：0
> 
> URI: supersized.3.0.js

我听说真正的问题是最后一个逗号（你可以在这篇文章的第一个代码中看到，没有......而且它工作得很好。

所以我想解决删除编辑幻灯片上的最后一个逗号...因为它在一张一张的图像上重复逗号，它会导致这个问题，即...我怎样才能删除最后一个逗号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:20:19.067

为什么你不断地进出 PHP？真是太没效率了...

```
slides : [ 
    <?php
    query_posts('cat=46');
    if ( have_posts() ) {
        $post_array = Array();
        while ( have_posts() ) {
            the_post();
            $thumb = get_post_meta($post->ID,'_thumbnail_id',false); 
            $thumb = wp_get_attachment_image_src($thumb[0], false); 
            $thumb = $thumb[0]; 
            if ( has_post_thumbnail() ) {
                $post_array[] = "{image : '".$thumb."'}";
            } 
        }
        echo implode(",",$post_array);
    }
    wp_reset_query();
    ?>
], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:21:24.943

你确定问题是关于最后一次昏迷吗？如果是，您需要将所有图像保存在一个变量中，在循环结束时去掉最后一个昏迷并打印结果：

```
<?php $string = ''; ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>     
                    <?php
                        $thumb = get_post_meta($post->ID,'_thumbnail_id',false);
                        $thumb = wp_get_attachment_image_src($thumb[0], false);
                        $thumb = $thumb[0];
                    if ( has_post_thumbnail() ) { ?>
                <?php  $string.= '{image : '.$thumb.'},';
                <?php } ?>
                <?php endwhile; ?>
                <?php echo substr($string, -1); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:28:15.493

为什么不用`json`组成幻灯片数组

```
<?php 
$slide_arr = array ();

query_posts('cat=46'); 
if ( have_posts() ) : 
  while ( have_posts() ) : the_post();     
    $thumb = get_post_meta($post->ID,'_thumbnail_id',false);
    $thumb = wp_get_attachment_image_src($thumb[0], false);
    $thumb = $thumb[0];
    if ( has_post_thumbnail() ) { 
      $slideObj = new stdClass;
      $slideObj->image = $thumb; 
      $slide_arr[] = $slideObj;
    } 
  endwhile; 
else: 
endif; 
wp_reset_query(); 

$slide_json = json_encode($slide_arr);
?>

var slide_json = '<?php echo $slide_json; ?>';
var slide_arr  = eval('(' + slide_json + ')');
// js code ...

slides : slide_arr, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T23:26:01.977

3个解决方案：

一：

```
<?php if ( have_posts() ) : $i=0; while ( have_posts() ) : the_post(); ?>     
                        <?php
                            $thumb = get_post_meta($post->ID,'_thumbnail_id',false);
                            $thumb = wp_get_attachment_image_src($thumb[0], false);
                            $thumb = $thumb[0];
                        if ( has_post_thumbnail() ) { ?>
                                <?=($i>0?',':'')?>{image : '<?php echo $thumb; ?>'}
                    <?php  } $i++;?> 
```

二：

```
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>     
                            <?php
                                $thumb = get_post_meta($post->ID,'_thumbnail_id',false);
                                $thumb = wp_get_attachment_image_src($thumb[0], false);
                                $thumb = $thumb[0];
                            if ( has_post_thumbnail() ) { ?>
                                    $string[]="{image : '<?php echo $thumb; ?>'}";
                        <?php } if (!empty($string)) implode(",",$string); 
```

树：

```
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>     
                                <?php
                                    $thumb = get_post_meta($post->ID,'_thumbnail_id',false);
                                    $thumb = wp_get_attachment_image_src($thumb[0], false);
                                    $thumb = $thumb[0];
                                if ( has_post_thumbnail() ) { ?>
                                        $string.="{image : '<?php echo $thumb; ?>'}";
                            <?php } $lenght=strlen($string)-2;
echo substr($string,0,$lenght); 
```

在我看来，第二种解决方案是最干净的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-02T23:19:22.310

在 JS 对象数组中有一个尾随逗号是有效的，所以逗号不是你的问题。引发此错误是因为您尚未为幻灯片对象设置 URL 属性。这是您当前输出的 JSON 字符串：

```
{image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/shaden-2.jpg'} 
```

但是您需要像这样的幻灯片的完整对象：

```
{image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/shaden-2.jpg', title: 'YOUR TITLE HERE', thumb: 'SOME IMAGE PATH GOES HERE', url: 'SOME URL PATH GOES HERE'} 
```

更新：

人们似乎认为逗号存在某种问题。我不认为这是主要问题。它可能会导致问题（我认为不会），但除此之外，如果不抛出他在问题中提到的错误，这些人的代码将永远无法工作。我直接去了超大来源，向人们展示了问题所在。

```
var imageLink = (options.slides[options.slides.length - 1].url) ? "href='" + options.slides[options.slides.length - 1].url + "'" : ""; 
```

就在那里。在第 23 行，正如他的错误消息所说。该脚本正在尝试访问每个幻灯片对象的 URL 属性。但他没有设置 URL 属性。所以它总是会抛出用户说他得到的错误。

# opengl - 在 OpenGL 3+ 中绘制许多纹理四边形的最快方法

> ID：12699665
> 
> 赞同：15
> 
> 时间：2012-10-02T23:01:02.893
> 
> 标签：opengl

由于 GL_QUADS 已从 OpenGL 3.1 及更高版本中删除，在不使用它的情况下绘制大量四边形的最快方法是什么？我尝试了几种不同的方法（如下），并在我的机器上对它们进行了速度排名，但我想知道是否有更好的方法，因为最快的方法仍然看起来既浪费又不优雅。我应该提到，在每种方法中，我都使用具有交错顶点和纹理坐标的 VBO，因为我认为这是最佳实践（尽管我可能错了）。另外，我应该说我不能在单独的四边形之间重用任何顶点，因为它们将具有不同的纹理坐标。

1.  带有 GL_TRIANGLE_STRIP 的 glDrawElements 使用原始重新启动索引，因此索引数组看起来像 {0, 1, 2, 3, PRI, 4, 5, 6, 7, PRI, ...}。这会在我的 VBO 中获取前 4 个顶点，将它们视为三角形条以形成一个矩形，然后将接下来的 4 个顶点视为单独的条。这里的问题只是索引数组看起来很浪费空间。在早期版本的 OpenGL 中，GL_QUADS 的好处是它每 4 个顶点自动重新启动图元。不过，这是我能找到的最快的方法。

2.  几何着色器。我为每个矩形传入 1 个顶点，然后在着色器中构造适当的 4 个顶点的三角形条带。这似乎是最快和最优雅的，但我已经阅读并且现在看到，与传递冗余数据相比，几何着色器效率不高。

3.  带有 GL_TRIANGLES 的 glDrawArrays。我只是独立绘制每个三角形，不重用顶点。

4.  glMultiDrawArrays 与 GL_TRIANGLE_STRIP，“第一个”数组的所有 4 倍数的数组，以及“计数”数组的一组 4 的数组。这告诉视频卡从 0 开始绘制前 4 个，然后从 4 开始绘制前 4 个，依此类推。我认为这很慢的原因是您不能将这些索引数组放在 VBO 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T03:30:11.267

您已经介绍了所有典型的好方法，但我想建议一些不太典型的方法，我怀疑它们可能具有更高的性能。根据问题的措辞，我假设您正在尝试绘制一个 m*n 瓷砖数组，并且它们都需要不同的纹理坐标。

*   几何着色器不是添加和删除顶点的正确工具。它能够做到这一点，但它确实适用于您实际更改动态渲染的图元数量（例如阴影体积生成）的情况。如果您只想绘制一大堆具有不同纹理坐标的相邻不同图元，我怀疑绝对最快的方法是使用曲面细分着色器。只需传入一个四边形并让曲面细分器按程序计算纹理坐标。
*   一种类似且更便携的方法是查找每个四边形的纹理坐标。这很简单：假设您正在绘制 50x20 的四边形，您将拥有一个 50x20 的纹理来存储所有纹理坐标。在您的顶点程序中点击此纹理（或者在您的几何程序中可能更有效）并将结果以变化的形式发送到片段程序以进行实际渲染。

请注意，在上述两种情况下，您都可以重用顶点。在第一种方法中，中间顶点是动态生成的。在第二种情况下，顶点的纹理坐标在着色器中被替换为纹理中的缓存值。

# google-app-engine - 数据库模型是否有等效的 count_async() ？

> ID：12699686
> 
> 赞同：0
> 
> 时间：2012-10-02T23:02:39.200
> 
> 标签：google-app-engine, asynchronous

**注意：我在这里使用 db（不是 ndb）。我知道 ndb 有一个 count_async() 但我希望有一个不涉及迁移到 ndb 的解决方案。**

有时我需要准确计算与查询匹配的实体数量。使用 db 这很简单：

```
q = some Query with filters
num_entities = q.count(limit=None) 
```

每个实体花费一个小的数据库操作，但它可以让我得到我需要的信息。问题是我经常需要在同一个请求中执行其中的一些，异步执行它们会很好，但我在 db 库中看不到对它的支持。

我在想我可以使用 run(keys_only=True, batch_size=1000) 因为它异步运行查询并返回一个迭代器。我可以先在每个查询上调用 run()，然后再计算每个迭代器的结果。它的成本与 count() 相同，但 run() 已被证明在测试中速度较慢（可能是因为它实际上返回结果），事实上，无论我将它设置多高，batch_size 似乎都被限制在 300，这需要更多的 RPC比 count() 方法计算数千个实体。

我的 run() 测试代码如下所示：

```
queries = list of Queries with filters
iters = []
for q in queries:
  iters.append( q.run(keys_only=True, batch_size=1000) )
for iter in iters:
  count_entities_from(iter) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:36:46.720

不，db 中没有等价物。ndb 的全部意义在于它添加了 db 中缺少的这些功能。

# ruby - ruby 中间件添加堆栈添加中间件

> ID：12699687
> 
> 赞同：1
> 
> 时间：2012-10-02T23:02:49.893
> 
> 标签：ruby, stack, add, middleware

我正在尝试在某些请求（其中 request.path == "/hi"）上将中间件添加/附加到堆栈（在 config.ru 中）

我试图用 Rack::Builder 做到这一点

但我似乎失败了。

```
Rack::Builder.new do
  use added_middleware1
  use added_middleware2
end.call(@env) if @request.path == "/something" 
```

我不确定这是否能说明我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:13:14.543

该`@request`变量应该仅在发生实际请求时可用，但您发布的代码可能会在服务器启动时在配置时运行。[Rack::Builder 文档](http://rack.rubyforge.org/doc/classes/Rack/Builder.html)的首页上有示例代码，展示了如何执行您想要的操作：

```
app = Rack::Builder.new {
   use Rack::CommonLogger
   use Rack::ShowExceptions
   map "/lobster" do
     use Rack::Lint
     run Rack::Lobster.new
   end
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:34:41.650

堆栈应该看起来更像这样：

```
use CommonMiddleware
map '/something' do
  use SpecialMiddleware
  run TheApp.new
end
map '/' do
  run TheApp.new
end 
```

或者，您可以编写一个查看请求路径并根据需要运行其他特殊中间件的中间件——有点像它的包装器。机器看起来像这样：

```
def initialize app, special_middleware
  @app, @special_middleware = app, special_middleware
end

def call env
  if route_matches?(env)
    @special_middleware.new(@app).call(env) # assumes special_middleware initializer takes no extra parameters
  else
    @app.call(env)
  end
end

def route_matches? env
  # examine the rack environment hash, return true or false
end 
```

使用它的配置如下所示：

```
use RouteMatchingMiddleware, SpecialMiddleware
run TheApp.new 
```

# iphone - 从 NSData 获取较低质量的 UIImage？

> ID：12699692
> 
> 赞同：2
> 
> 时间：2012-10-02T23:03:50.940
> 
> 标签：iphone, objective-c, ios, uiimage, nsdata

我有一个使用 JPEG 压缩压缩成 NSData 的图像。我用它访问它`[UIImage imageWithContentsOfFile:]`。但是，对于较大的图像，这需要几秒钟。是否有更快的方法从文件系统加载图像，可能与从包中加载图像的速度相同？如果没有，有没有办法在加载完整质量版本时临时加载较低质量版本的图像，而不是保存较低质量版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T23:47:29.067

虽然您可以使用 JPEG 2000 构建类似的东西（您需要构建自己的 jpeg 库副本，如此处所述[，](https://stackoverflow.com/questions/7047984/jpeg2000-on-ios-app)然后手写阅读代码），但我认为您不会在那里获得良好的投资回报。从磁盘读取数据的成本仍然可能压倒一切。

首先，如果您正在阅读您的捆绑包，请尽可能使用 PNG。iOS 高度优化了存储在包中的 PNG（复制过程的一部分是以 iOS 特定的优化格式重写它们）。

无论您做什么，如果您想要一个占位符，您可能需要以某种方式自己提供它，或者作为单独的文件，或者作为您自己阅读和管理的自定义文件格式。这不会是一个非常难以设计的格式，但是您仍然需要事先在某个地方进行所有调整大小。

主要的关键是读取一个大的图像文件是昂贵的，你不应该在主线程上这样做。您需要在后台队列（GCD 或操作）上执行此操作，并在数据可用时更新 UI。这个事实没有真正简单的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T23:24:27.707

低质量是比其他文件更小的文件......这是检查应用程序文件夹中文件的代码。

```
NSFileManager *manager = [NSFileManager defaultManager]; 
if ([manager fileExistsAtPath:path]) { 
    NSDictionary *attributes = [manager attributesOfItemAtPath:path error:nil]; 
    unsigned long long size = [attributes fileSize]; 
    resultlbl.text = [NSString StringWithFormat:@"%d",size];
} 
```

# unicode - How can I decode unicode characters like this?

> ID：12699694
> 
> 赞同：0
> 
> 时间：2012-10-02T23:03:56.560
> 
> 标签：unicode, character-encoding

Maybe a stupid question but I like to decode these kind of unicode characters. How do I do it?

> ۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇̚̚̚̚̚̚̚̚̚̚̚̚ ۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇̚̚̚̚̚̚̚̚̚̚̚̚

I like to be able to decode them into /uXXXX syntax so I can use them for instance in a web page...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:05:22.033

If you're using windows you can try copying and pasting that into the character map application.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:37:01.580

In C++ (with an implementation that supports C++11, such as is included in Xcode):

```
#include <iostream>
#include <iomanip>
#include <string>
#include <cstdint>

int main() {
    std::u32string s = U"ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇͛̍ͪͩ́͒͆̓̉̽̍̏͂ͮ̈́ͦ̀ͤ͗̅͗̄̐̃ͬͮͣͩͮ̆̓́͛ͯͤͣͧ̔ͮ̈́ͯ̅۫ͫ̈́̊̃͛͐̎̂̓̃̇̚̚̚̚̚̚̚̚̚̚̚̚";

    std::cout.fill('0');
    std::cout << std::hex;

    for (auto c : s)
        std::cout << "\\u" << std::setw(4) << static_cast<std::uint_least32_t>(c);
} 
```

# objective-c - 在 .mm 但不在 .h 文件中调用选择器

> ID：12699696
> 
> 赞同：0
> 
> 时间：2012-10-02T23:04:22.300
> 
> 标签：objective-c, xcode, selector

我想检查一下我对这个例子中关于选择器的理解：

假设我在 Bar.m 中有一个名为 arr`NSArray`的对象。`Foo`在 Foo.m 中，我有一个`(NSComparisonResult)compareFoo:`方法，但我忘记在 Foo.h 文件中声明。然而，当我调用`[arr sortedArrayUsingSelector:@selector(compareFoo:)];`代码时运行良好。这是因为消息`compareFoo:`被发送到数组中的对象，这些对象是`Foo`对象，所以`compareFoo:`即使它没有在 Foo.h 中声明，它们也可以调用？

对此不是100％确定并且很好奇。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:12:26.827

Objective-C 具有动态类型，这意味着您可以向对象的实例发送消息，而无需在接口或 .h 文件中声明它。你这样做的方式是通过选择器。

选择器没有编译时检查。这就是为什么当您正确声明选择器时，有时您会收到有关对象上不存在的方法的运行时错误。

# java - 如何在java中创建带有反射的新实例

> ID：12699700
> 
> 赞同：0
> 
> 时间：2012-10-02T23:04:38.540
> 
> 标签：java, reflection, constructor

我有一个快速的问题。如何通过将参数传递给构造函数来创建新实例？由于 GraphicObject 可以是扩展它的任何类，我需要以某种方式知道它是哪个类，在这里我必须使用扩展它的类，所以我正在尝试反射，但到目前为止只有空异常。

```
 GraphicObject decor = null;

    try {
        decor = decorator.getClass().getDeclaredConstructor(GraphicObject.class).newInstance(mainGroup);
    } catch (Exception e) {
        System.out.println(e);
    } 
```

应该反映的类如下所示：

```
public class DecoratorLeft extends GraphicObjectDecorator {

// jei bus klaida, tai bus del to, kad neuzsaugom per konstruktoriu paduodamos reiksmes i global variable
GraphicObject decoratedGraphic = null;

public DecoratorLeft(GraphicObject decoratedGraphic) {
    super(decoratedGraphic);
    this.decoratedGraphic = decoratedGraphic;
}

@Override
public void draw(Graphics g, AlignStrategy align) {
    alignLeft();
    decoratedGraphic.draw(g, align);

    //drawAlignedLeft(g, decoratedGraphic, align);        
} 
```

}

这是错误消息：

```
java.lang.NullPointerException
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at objprog1.Whiteboard.paintComponent(Whiteboard.java:157) 
```

我再次使用 printstactrace 和 runtimeexception 修改了 try/catch 语句：

```
 java.lang.NullPointerException
    at objprog1.Whiteboard.paintComponent(Whiteboard.java:179)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JSplitPane.paintChildren(JSplitPane.java:1047)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5228)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent.paint(JComponent.java:1040)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
    at java.awt.Container.paint(Container.java:1967)
    at java.awt.Window.paint(Window.java:3867)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: java.lang.NullPointerException
    at objprog1.Whiteboard.paintComponent(Whiteboard.java:182)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JSplitPane.paintChildren(JSplitPane.java:1047)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5228)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent.paint(JComponent.java:1040)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
    at java.awt.Container.paint(Container.java:1967)
    at java.awt.Window.paint(Window.java:3867)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: java.lang.NullPointerException
    at objprog1.Whiteboard.paintComponent(Whiteboard.java:179)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:02:56.883

我认为你可以通过创建类似的东西来更简单地做到这一点：

`protected GraphicObject getNewInstance ( GraphicObject decoratedGraphic ){ ... }`

在你的`GraphicObject`类里面，所以每个继承它的类都会有这个方法，你可以直接从对象中调用它。

# c# - 在数组 SQL Server 2008 中有效地存储表

> ID：12699707
> 
> 赞同：0
> 
> 时间：2012-10-02T23:05:12.143
> 
> 标签：c#, sql, arrays, stored-procedures

我有一张像

```
a1 a2 a3 a4
-----------
1  11 21 31
2  12 22 32
3  13 23 33
4  14 24 34
5  15 25 35
6  16 26 36
7  17 27 37
8  18 28 38 
9  19 29 39
10 20 30 40 
```

当我在存储过程中以 COLUM MAJOR ORDER 从 sql server 2008 读取数据时，将其存储在交流数组中的最佳方法是什么？

```
array = 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,......40 
```

像ROW MAJOR ORDER一样存储更好吗？，哪个更有效？

```
array = 1, 11, 21, 31,2,12,22,32,3,13,23,24,....10,20,30,40 
```

我在用

```
SqlDataReader rdr = null;
// create a connection object
SqlConnection conn = new SqlConnection(
"Data Source=(local);Initial Catalog=Northwind;Integrated Security=SSPI");
// create a command object
SqlCommand cmd  = new SqlCommand("select * from a1,a2,a3,a4", conn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:52:52.043

行主要顺序将更容易编码，因为记录是逐行处理的。要按列主要顺序存储它，您必须将所有记录加载到内存中的数据结构（DataTable？）中并为每一列循环遍历它。

但是，在不知道存储在一个向量上的目的的情况下，如果值按照您显示它的顺序排列，那么它只是虚拟数据等。很难就什么更“有效”给出明确的答案。

# c - 为什么不返回修改函数参数的值

> ID：12699712
> 
> 赞同：-3
> 
> 时间：2012-10-02T23:05:22.017
> 
> 标签：c, function

> **可能重复：**
> [如何修改按值传递的原始变量的内容？](https://stackoverflow.com/questions/9938096/how-to-modify-content-of-the-original-variable-which-is-passed-by-value)

我正在构建一个非常简单的程序来计算矩形的面积。然而，很简单，您会注意到我似乎无法获得返回值。我一直看到 0。可能有一个明显的答案，或者可能有一些我不明白的东西。这是我的代码：

```
#include<stdio.h>

//prototypes
int FindArea(int , int , int);

main()
{

//Area of a Rectangle

  int rBase,rHeight,rArea = 0;

  //get base
  printf("\n\n\tThis program will calculate the Area of a rectangle.");
  printf("\n\n\tFirst, enter a value of the base of a rectangle:");
  scanf(" %d" , &rBase);

  //refresh and get height
  system("cls");
  printf("\n\n\tNow please enter the height of the same rectangle:");
  scanf(" %d" , &rHeight);

  //refresh and show output
  system("cls");
  FindArea (rArea , rBase , rHeight);
  printf("\n\n\tThe area of this rectangle is %d" , rArea);
  getch();

}//end main

int FindArea (rArea , rBase , rHeight)
{
 rArea = (rBase * rHeight);

 return (rArea);

}//end FindArea 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T23:09:56.257

你初始化`rArea`为 0。然后，你将它传递给`FindArea` **value**。这意味着函数中的任何更改都不会`rArea`被反映。您也不使用返回值。因此，`rArea`保持为 0。

选项 1 - 使用返回值：

```
int FindArea(int rBase, int rHeight) {
    return rBase * rHeight;
}

rArea = FindArea(rBase, rHeight); 
```

选项 2 - 通过引用传递：

```
void FindArea(int *rArea, int rBase, int rHeight) {
    *rArea = rBase * rHeight;
}

FindArea(&rArea, rBase, rHeight); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:09:30.207

Because you are not storing the return value. The code won't compile in its present form.

1.  Call it as:

    ```
    rArea = (rBase , rHeight); 
    ```

2.  Change the function to:

    ```
    int FindArea (int rBase ,int rHeight)  
    {  
        return (rBase * rHeight);  
    } 
    ```

3.  Change the prototype to:

    ```
    int FindArea(int , int); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T23:09:52.973

您需要分配 to 的返回`FindArea`值`rArea`。目前，`FindArea`将产品分配给*其*同名的局部变量。

或者，您可以传递`main`'s的地址`rArea`来修改它，看起来像

```
FindArea(&rArea, rBase, rHeight); 
```

在`main`与

```
void FindArea(int * rArea, int rBase, int rHeight) {
    *rArea = rBase * rHeight;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T23:10:31.390

```
FindArea (rArea , rBase , rHeight); 
```

不像你想的那样工作。在 C 中，参数是按值传递的；这意味着`area`在函数内部进行修改只会修改它的本地副本。您需要将函数的返回值分配给变量：

```
int FindArea(int w, int h) { return w * h; }

int w, h, area;

// ...
area = findArea(w, h); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T23:08:45.263

That's because you never assign another value than 0 to rArea in your main program.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T23:08:46.000

take `rArea` by pointer:

```
int FindArea(int *, int , int);

...

FindArea (&rArea , rBase , rHeight);

...

int FindArea (int *rArea , int rBase , int rHeight)
{
 *rArea = (rBase * rHeight);

 return (*rArea);

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T23:09:38.260

您的基本问题是您不了解如何从函数中获取值。将相关行更改为：

```
int FindArea(int rBase, int rHeight);  // prototype 
```

和

```
int area = FindArea(rBase, rHeight); 
```

和

```
int FindArea(int rBase, int rHeight)
{
     return rBase * rHeight;
} 
```

# php - Dynamically create PDFs and email them

> ID：12699713
> 
> 赞同：3
> 
> 时间：2012-10-02T23:05:25.173
> 
> 标签：php, pdf-generation, email-attachments

I've got a registration list, which I need to send out a PDF to each person on the list. Each email needs to contain a PDF, which has a base version on the server, but each person's needs to be personalized via name/company etc over the top. This needs to be emailed to each person, which at the moment adds up to be 2,500, but can easily be much higher in the future.

I've only just started working on this project, but the problem I've encountered continuously since last week are that the server doesn't seem to be able to handle doing this. Currently the script is using Zend, which then allows it to use Zend_Pdf and Zend_Mail to create and email the PDFs. Zend_mail connects to an smtp server from smtp.com to do the actual emailing.

Since we have quite a few sites running on the server, we can't afford it to be going down, and when I run it in batches it can start to go down. The best solution I have thus far is running curl from my local machine to the script, which then does one person. The curl script then calls it again, over and over in batches. Even this runs into problems at times, and seems to some how hog memory even after it should be complete (I'm really not sure how).

So what I'm looking for is information on doing this, from libraries, code, information on server setups, anything that can make this much less painful, and much quicker for us to run. I've run out of ideas, and this is something I've not really had to do before (especially at a bulk level).

Thank you.

Edit:

I also forgot to mention that it's using zend_barcode::factory for creating a barcode on the PDF.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:28:38.173

我建议的第一步是尽可能找出问题所在。是PDF生成吗？是发邮件吗？“服务器似乎无法处理这个问题”并没有说明“服务器宕机”的实际故障 - 您需要确定内存/磁盘空间/时间是否不足或其他原因. 这将帮助您确定是否需要对您的一代进行调整或新方法。因为您说即使是单个手动调用也可能失败，您应该能够将问题缩小到确切的失败原因。

如果您在某个资源限制附近运行（可能是多个站点运行的情况），您可能需要将此功能卸载到另一台机器上。您的选择包括：

1.  在新主机上运行相同的设置并调整您的应用程序以使用新系统
2.  在新主机上运行新设置
3.  使用外部系统（例如提到的 PDFCrowd 或[Docmosis](http://www.docmosis.com)）

从问题的细节开始。我希望这会有所帮助。请注意，我为创建 Docmosis 的公司工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:57:37.133

如果您尝试通过 HTTP 调用脚本，脚本将根据 php.ini 中指定的 max_execution_time 超时。

您需要编写一个可以从命令行运行的 php 脚本，然后通过 cron 作业对其进行调度。该脚本一次可以读取一个用户，将他的 pdf 文件放在一起，然后通过电子邮件发送给他。之后，您可能必须运行一些性能检查以查看服务器是否可以处理该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:24:30.297

**根据我的经验 - 两种选择：**

使用一个或多个 PDF 库动态生成 PDF（这可能非常慢）。

**或者**

使用[wkhtmltopdf 之](http://code.google.com/p/wkhtmltopdf/)类的东西，这是一个简单的 shell 实用程序，可以使用 webkit 渲染引擎和 qt 将 html 转换为 pdf。

基本上，您可以遍历*n 个*HTML 页面并生成 PDF，而无需产生纯动态 PDF 生成的开销！

我们每天使用它来分发数千个个性化的 PDF，因为它可以将 HTML 页面快速转换为 PDF。存在依赖关系，但它可以工作并且比单独“创建” PDF 的密集度（计算）要小。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T23:24:49.640

这里有一些想法：

1.  是否有特殊原因必须在 Web 服务器上运行？为什么不从不同的机器上运行框架，但使用相同的设置？您可能必须创建一个不同的控制器来处理请求的命令行版本，但没有根本原因它不能工作。
2.  如果以编程方式创建 PDF 让您头疼，您可以改用服务。
    过去，我使用[PDFCrowd 取得](http://pdfcrowd.com/)了不错的效果，他们提供了一个有用的 PHP 库。您可以给他们一个 HTML 的 blob，使用任何样式表和图像的完整 URL，他们会为您创建一个 PDF。

    每份文件的费用从每份文件 0.5-4.5 美分不等，具体取决于您的费率计划。

    还有其他服务做同样的事情。

3.  如果这种批处理作业对您的公司来说很重要，您可以考虑使用像[beanstalk](http://kr.github.com/beanstalkd/)这样的异步作业队列。您可以将数千个这样的请求排队，并且工作脚本可以以您认为合理的任何速度处理请求。

# android - using onCreateOptionsMenu with aChartEngine

> ID：12699718
> 
> 赞同：2
> 
> 时间：2012-10-02T23:07:00.300
> 
> 标签：android, android-activity, achartengine, android-menu

I'm trying to include a menu in my Graph view. I have the graph working perfectly, and on the main activity, I have the menu working fine. I just can't seem to get the menu to show up in my graphing activity.

Here is the code inside LineGraph.java:

```
public class LineGraph extends Activity {
        //me trying to initialize the menu
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_graph, menu);
        return true;
    }

public Intent getIntent(Context context){

    //data
    int[] x = {1,2,3,4,5,6,7,8,9,10}; //x values
    int[] y = {30,34,45,80,57,77,89,100,111,123,145};//yvalues

    TimeSeries series = new TimeSeries("Caffeine Level");
    for(int i = 0; i<x.length;i++){
        series.add(x[i], y[i]);
    }

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(series); 

    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    mRenderer.setXTitle("Title");
    mRenderer.setYTitle("ytitle");

    mRenderer.addSeriesRenderer(renderer);
    mRenderer.setBackgroundColor(Color.BLACK);

    Intent intent = ChartFactory.getLineChartIntent(context, dataset, mRenderer, "Line Graph");

    return intent;
} 
```

}

I'm sure this is a simple change, but I have tried searching, and I cannot seem to find the answer. The obvious things (at least to me) have been checked. For example, I am using the correct R, the activity_graph exists inside the /res/menu directory. What am I doing wrong? Thanks!

# python - 脚本数组

> ID：12699720
> 
> 赞同：-4
> 
> 时间：2012-10-02T23:07:22.667
> 
> 标签：python

给定两个输入文件`File1(person, project, value/time), file2(project, multFactor/efficiency)`，生成`OutputFile(person, total)`- 将 multiFactor 应用于该值，然后求和以获得每个人的总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:12:20.973

将输入读入合适的数据结构（可能是项目索引的字典），进行计算，输出结果。

# javascript - Dynamic DOM elements not accessible?

> ID：12699723
> 
> 赞同：1
> 
> 时间：2012-10-02T23:08:20.647
> 
> 标签：javascript

I can see a DOM element with an ID of Foo by using the debug inspector.

This DOM element is inserted dynamically by a script that I do not have access to.

Because of this you can not see it when you do View->Source.

When I try to access the element using

`document.getElementById('Foo')`, it returns a null b.c. it can not find it.

Verified this in the debug console as well.

Is it possible to get elements that are inserted dynamically?

I ask b.c. I would like to remove the node.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T23:12:31.800

是的你可以：

```
function addElement() {
    var foo = document.createElement('p');
    foo.id = "bar";
    document.body.appendChild(foo);
}
function getElement() {
    alert(document.getElementById('bar'));
}    

addElement();
getElement(); 
```

另请参阅[此的现场演示](http://jsfiddle.net/KvsEP/)。

为什么你的例子不起作用很难说，因为你没有提供任何细节。

猜测一下，您看到的元素位于不同的文档中，嵌入在 iframe 中，在这种情况下，您必须先[访问 iframe 中的文档，](https://stackoverflow.com/questions/1452871/how-can-i-access-iframe-elements-with-javascript)然后再调用`getElementById`它。当然，这是受[同源政策的](http://en.wikipedia.org/wiki/Same_origin_policy)约束。​</p>

# jmeter - Jmeter中的空格替换加号

> ID：12699725
> 
> 赞同：1
> 
> 时间：2012-10-02T23:08:26.153
> 
> 标签：jmeter

我有这个正则表达式：

```
name=\"javax.faces.FormSignature\" value="(.+?)" 
```

这将提取我需要传递给http请求的值。我的问题是，如果这个值恰好有一个`+`或一个`=`符号，Jmeter 将用空格替换它们。那将无法满足我的要求。有没有人见过这个？我已经尝试过使用 xpath 提取器，并且发生了同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:29:23.527

如果在使用 RegExp 提取值的下一个请求中发生这种情况，则取消选中参数表中的**编码**复选框。

请参阅[使用请求发送参数](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)：

# php - Delete mysql row where date equals expiry date

> ID：12699726
> 
> 赞同：0
> 
> 时间：2012-10-02T23:08:27.417
> 
> 标签：php, mysql, date, sql-delete

What's the best way to run a mysql query to delete a row if it equals the date in the expire column?

This is my current code:

```
$sql = "DELETE * FROM table WHERE DATE(expire) = CURDATE()";

$q   = $conn->prepare($sql) or die("failed!");
// Bind the params to the placeholders
$q->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T23:13:21.117

这行得通吗？

```
DELETE FROM TABLE WHERE expire < CURRENT_TIMESTAMP 
```

编辑：正如格雷格所说，我真的看不出你当前的代码有什么问题。我提供的代码可能更能保证您的表已正确清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:15:45.163

```
DELETE FROM TABLE WHERE expire < curDate() 
```

确保您命名了正确的表和正确的字段..

# mod-rewrite - How to use mod_rewrite in Apache2?

> ID：12699735
> 
> 赞同：0
> 
> 时间：2012-10-02T23:09:01.340
> 
> 标签：mod-rewrite, ubuntu, apache2

I´m trying to do a simple redirection with Apache2 with mod_rewrite. I've installed the module in my Apache and I´ve set a webpage in localhost/file1/file2/page.html. I´m writing this in my 000-default file:

```
RewriteEngine On
RewriteRule elegantdirectory/page.html file1/file2/page.html [L,NC] 
```

So now if I try to access to localhost/elegantdirectory/page.html, the server is supposed to show me the page.html I have in file1/file2\. Any ideas why isn't it working?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:12:23.593

尝试在您的 : 中包含边界和前导斜杠`RewriteRule`：

```
RewriteRule ^/elegantdirectory/page.html$ /file1/file2/page.html [L,NC] 
```

# java - Designing an Order object for Trading systems

> ID：12699737
> 
> 赞同：2
> 
> 时间：2012-10-02T23:09:12.437
> 
> 标签：java, oop, trading, fix-protocol

I am trying to design my first trading system and I am struggling with designing a correct Order object with all the `FIX` concepts involved in it. Wondering if any experienced folks can chime in on some ideas.

I created a simple Order class. But as a `NewOrderSingle` (FIX) is generated, I need a `ClOrdId`. Then when I cancel this order, I need a new `ClOrdId` (For every cancel and replace FIX message generated) and set the correct `OrigClOrdId`. So I need to keep track of those `OrigClOrdIds`.

Also, I think I need to keep a unique Id internal to my system to identify this order, different from `ClOrdId`, which could keep changing.

I don't see any nice object oriented way of designing this order object while keeping the concept of various Ids relevant to my FIX messages separate.

How do people design these in real world? Any suggestions? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:49:12.230

我参与了几个完全按照您所描述的系统的设计。它实际上比设计类层次结构更复杂。需要记住的一些事项：

根据交易场所和/或资产类别，订单的“唯一 ID”实际上可能是标签的组合。例如，在纽约证券交易所“经典”交易时，唯一 ID 实际上是由标签 115 (OnBehalfOfCompID) + 标签 11 组成的复合 ID。对于其他场所，它可能是标签 109 + 标签 11，或标签 76 + 标签 11。

此外，您可能需要向您的唯一 ID 添加更多数据，以说明发送到不同场所的 ID 可能相同这一事实。例如，某些场所需要一个`Integer`作为其 ClOrdID 值。在这种情况下，“唯一 ID”的内部表示应该是某种盐 + ID 数据，即`DARKCROSS-1`（虚构的）地点是“DARKCROSS”并且`1`是标签 11 值。

如果多个场所具有类似的解决订单唯一 ID 的策略，您可以将该逻辑提取到 ID 工厂中 - 组合优于继承。

因此，您的抽象可以以 a 开头`AbstractOrder`，但您可能会发现需要具有`NyseOrder`,`NasdaqOrder`等等。

（请注意，我见过的一些实现有一个`GenericFixOrder`类或一些这样的。实际上，没有这样的东西 - 每个场所都有自己的特定行为，与其他场所略有不同。）

另一个主题是 Good Til Cancel 和 Good Til Date 订单，它们通常必须具有始终唯一的 ID（即 ID 必须包含日期），并且在您的应用程序中多次重新启动后仍然有效。因此，您的 ID 工厂必须考虑到此类订单。

关于ID的关系，它实际上很简单。您有一个对象`Map`的唯一订单 ID `Order`。表示取消/替换或取消的类引用父订单（通过“父订单 ID”字段，与上述“唯一 ID”字段解析相同）。

不必直接引用原始（“根”）新订单，事实上，当取消/替换被接受时，您可能会发现将其从`Map`持有的订单中删除是有益的。当取消被接受时，您几乎可以肯定地从订单中删除它和订单`Map`- 订单已完成。

请注意，以上是一般草图 - 从内存中删除订单等可能被认为是过早的优化。如果您的交易量很小，您可能会将所有交易信息保存一整天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:30:45.360

这个类图怎么样？

![订单类图](../Images/06f26a1a853d11d1d846678568c3b7a3.png)

Cancel 方法构造 new`SubOrder`可用于发送取消请求。您可以为其他子订单类型添加更多构造方法。如果取消订单非常具体，您可以为每种订单类型创建一个类，例如，如果它们有共同点，它们可以扩展通用类`AbstractOrder`。像这样的东西：

![具有泛化的类图](../Images/75cab32f97aa94eecdfb948b4a155649.png)

# javascript - How do I use load () to load a HTML page and JavaScript file

> ID：12699738
> 
> 赞同：0
> 
> 时间：2012-10-02T23:09:18.400
> 
> 标签：javascript, jquery, html, load

At the moment I have a HTML where files can be dynamically loaded.

I am using the load() function. Within the loaded HTML file, there is an external script that I would like to execute, but it won't execute? The script will execute if I go to the HTML document directy, but not when I am using the load function.

Here is my code:

**Index Page**

```
$(".pages").load("page1.html"); 
```

**page1.html**

```
<script type="text/javascript" src="alert.js"></script>
<h1>Welcome to page one</h1> 
```

**Alert.js**

```
alert("This page has loaded"); 
```

I can confirm the rest of page1.html appears, just the javascript file won't

Help will be appreciated guys!

Thanks Peter

# file - 检查文件版本和 .exe 文件（服务器端）以及是否更新下载

> ID：12699744
> 
> 赞同：1
> 
> 时间：2012-10-02T23:09:55.530
> 
> 标签：file, delphi, version

我想指向[http://somesite.com/somefile.exe](http://somesite.com/somefile.exe)并检查 exe 服务器端的文件版本，并将版本信息与我计算机上准备好的同一个 .exe 文件进行比较。如果服务器端文件较新，那么我想下载它。

我有下载文件和检查文件版本的功能，但我想检查文件版本是否比我电脑上的版本新。

我不想将 exe 下载到我的计算机，然后检查文件版本。

这里有人能够做到这一点吗？

```
function GetVersion(sFileName:string): string;
var
 VerInfoSize: DWORD;
 VerInfo: Pointer;
  VerValueSize: DWORD;
  VerValue: PVSFixedFileInfo;
 Dummy: DWORD;
begin
VerInfoSize := GetFileVersionInfoSize(PChar(sFileName), Dummy);
GetMem(VerInfo, VerInfoSize);
GetFileVersionInfo(PChar(sFileName), 0, VerInfoSize, VerInfo);
VerQueryValue(VerInfo, '\', Pointer(VerValue), VerValueSize);
 with VerValue^ do
begin
 Result := IntToStr(dwFileVersionMS shr 16);
 Result := Result + '.' + IntToStr(dwFileVersionMS and $FFFF);
 Result := Result + '.' + IntToStr(dwFileVersionLS shr 16);
 Result := Result + '.' + IntToStr(dwFileVersionLS and $FFFF);
end;
 FreeMem(VerInfo, VerInfoSize);
end;

procedure TForm1.Button1Click(Sender: TObject);
 var
 Http: TIdHTTP;
 MS: TMemoryStream;
begin
 Http := TIdHTTP.Create(nil);
  try
   MS := TMemoryStream.Create;
  try
   Http.OnWork:= HttpWork;

  Http.Get('http://live.sysinternals.com/ADExplorer.exe', MS);
  MS.SaveToFile('C:\ADExplorer.exe');

 finally
   MS.Free;
 end;
finally
Http.Free;
 end;

end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T00:06:49.553

您无法远程访问文件版本。您需要先在本地下载文件，或者需要将文件版本存储在可以下载的单独文件中，或者您需要编写一个服务器端脚本，您的客户端可以向其发送请求并让它访问文件版本并将其返回给您的客户。

更好的选择是使用 HTTP 的内置“条件 GET”功能（如果服务器支持）。您的客户端可以在其请求中包含“If-Modified-Since”标头，然后服务器将仅在请求的时间戳之后在服务器端修改了请求的文件时才交付请求的文件。否则`304`将发回一个回复代码，指示客户端已经拥有最新文件。阅读[RFC 2616 第 14.25 节](https://www.rfc-editor.org/rfc/rfc2616#section-14.25)了解更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T23:27:04.663

如果没有`FileVersion` 实际检查文件，则无法检查文件，这意味着您必须能够拥有所有可用字节，并且文件版本 API 函数需要物理磁盘文件。（IOW，如果不先将文件下载到本地驱动器，则无法执行此操作。）

此外，无论如何，您已经使用 HTTP 将其完全下载到内存中`GET`，因此您一开始并没有节省任何带宽。

另一种方法（如果可以的话）是在服务器上保存一个文件，其中包含本地文件可以下载和读取的版本号。如果你不能这样做，你可能不走运，将不得不进行完整下载。

# php - 将键盘导航添加到 Ajax 实时搜索

> ID：12699756
> 
> 赞同：1
> 
> 时间：2012-10-02T23:11:29.470
> 
> 标签：php, javascript, ajax, keyboard-navigation, livesearch

我已经设法使用[w3schools 网站](http://www.w3schools.com/PHP/php_ajax_livesearch.asp)提供的教程向我的 PhP/MySQL Web 应用程序添加了一个有效的“实时搜索”表单。然而，这个表单没有任何键盘导航，我觉得这真的让它有点不可用。我一直试图通过搜索/阅读来添加一些导航，但完全失败了。我对 Javascript 非常陌生，所以显然这对我理解如何正确添加功能来说是一个巨大的障碍。如果有人可以请给我一个体面的例子，至少添加一种导航（向下箭头，输入键（将选定的值放入框中，完成）等），我想我可以通过它添加额外的功能。

这是迄今为止我一直在使用的代码：

```
function showResult(str)
{
    if (str.length==0)
    {
        document.getElementById("livesearch").innerHTML="";
        document.getElementById("livesearch").style.border="0px";
        return;
     }

     if (window.XMLHttpRequest)
     {
          xmlhttp=new XMLHttpRequest();
     }
     else
     {
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
     }

     xmlhttp.onreadystatechange=function()
     {
         if (xmlhttp.readyState==4 && xmlhttp.status==200)
         {
             document.getElementById("livesearch").innerHTML=xmlhttp.responseText;
             document.getElementById("livesearch").style.border="1px solid #A5ACB2";
         document.getElementById("livesearch").style.width="1000px";
         }
      }

      xmlhttp.open("GET","livesearch.php?q="+str,true);
      xmlhttp.send();
} 
```

我一直在使用的 livesearch.php 文件与 w3schools 网站上的文件非常相似。我只是稍微修改了一下，给了我需要的结果，格式化了我需要的格式。

谢谢你的帮助！

# java - 如何单独同步数据成员

> ID：12699757
> 
> 赞同：0
> 
> 时间：2012-10-02T23:11:34.467
> 
> 标签：java, multithreading, synchronization, thread-safety, synchronized

我一直在网上搜索这个，但找不到任何接近这个的文章，我对此感到非常惊讶。也许智慧隐藏在我尚未找到的某个地方。

假设我有一个包含 10 个不同类型成员的类（为了简单起见，假设它们混合了整数和字符串），并且每个成员都有自己的访问器方法。现在，我想让这个类线程安全。但是，其中一些数据成员不一定会相互交互。例如`Person`下面的类，具有`age`and`name`和其他属性。

```
public class Person {
    private volatile int age;
    private String name;
    private volatile long blabla;
    // ... and so on

    public synchronized int getAge() {
        return age;
    }

    public synchronized void setAge(int age) {
        this.age = age;
    }

    // .. and so on for each data member
} 
```

一个线程可能只需要读/写`age`，其他线程只需要修改`name`。显然，添加`synchronized`到每个访问器方法是一个坏主意，因为它锁定了对象的整个实例。一个正在调用的线程`getAge()`必须等待另一个正在调用的线程，尽管`getName()`它们是两个单独的字段。`age``name`

因此，一个明显的解决方案是为每个字段创建一个锁（或添加`volatile`到原始类型）。然而，这似乎是矫枉过正。如果我有 10 个数据成员，我还需要 10 个锁吗？我想知道是否有另一种方法可以在不过度锁定的情况下实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T23:14:02.047

首先，如果您在谈论原语（或不可变对象，例如`String`），那么您只需要标记每个字段`volatile`。如果您所做的只是获取和设置字段值，则不需要锁定。

但是，如果您的 get/set 方法执行多个操作并且`synchronized`需要块，那么每个字段都有一个`synchronized`块对我来说似乎是过早的优化。我认为`synchronized`像您这样的小对象上的`Person`方法是完成此任务的完全合适的方法。除非您有真正的原因（即分析器输出），否则我不会尝试使其更复杂。 *当然*，在几乎任何情况下，每个字段的锁定都是多余的。

如果该方法需要很长时间，那将有所不同。那么您就*不想*锁定整个对象并阻止其他访问器。然后是拥有多个锁的好时机——每个锁用于单独计算。但是，如果您的对象确实只是试图保护 get/set，那么一个`synchronized`方法就可以了。

其他几条评论：

*   如果您可以只使用`volatile`字段，那么您不需要任何`synchronized`块。
*   如果您有`synchronized`方法，那么您不需要创建您的字段`volatile`。
*   如果该`name`字段可能应该被标记为`final`好像它没有被写入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T23:16:13.360

如果您担心同步原始类型，这是 AtomicInteger 等的绝佳用例......它们非常快并确保线程安全。欲了解更多信息：

[http://docs.oracle.com/javase/tutorial/essential/concurrency/atomicvars.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomicvars.html)

# php - Gearman Worker PHP 文件具体保存在哪里？

> ID：12699759
> 
> 赞同：0
> 
> 时间：2012-10-02T23:11:53.360
> 
> 标签：php, gearman

如果你有一个 Gearman 工作服务器并且你有一个 Worker.php 文件，即

```
 <?php
      $worker = new GearmanWorker();
      $worker->addServer('...');
      $worker->addFunction("customFunction", "my_custom_function");

      while ($worker->work());

      function my_custom_function($job)
      {
         return doStuff($job->workload());
      }
     ?> 
```

这个文件去哪里了？它是在实际的工作服务器和您要处理此类工作的每个工作服务器上进行还是什么？简单的问题。我只是不知道答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:35:42.510

是的。工作机器通过运行此脚本成为工作机器。要运行此脚本，您需要将它放在机器上并执行它，可能是从命令行使用`php Worker.php`.

# c# - 如何使用我的 c# 代码使用 psexec 在远程 PC 上安装

> ID：12699766
> 
> 赞同：1
> 
> 时间：2012-10-02T23:12:44.193
> 
> 标签：c#, process, installation, psexec

我正在尝试将一些软件从我们的域服务器远程安装到办公室的所有 PC 上。我知道在本地计算机上静默安装它的代码，并尝试了在我的应用程序中按下按钮时搜索远程安装它时发现的各种东西，但我无法让它工作。这是我的本地代码，它可以工作：

```
Process SR = new Process();
SR.StartInfo.FileName = "X:\\Teklastructures\\Tekla Structures Releases\\18.0\\TeklaStructures180SR3x64Software.exe";
SR.StartInfo.Arguments = "/s /v\"/qn INSTALLDIR=C:\\TeklaStructures /lvoicewarmupx C:\\teklaSRinstall.log";
SR.Start();
SR.WaitForExit();
SR.Close(); 
```

我一直在尝试使用 psexec，因为我读过它应该做我想做的事。我相信一个问题是该软件位于映射驱动器 X 上。那么我该如何远程安装它呢？也许看看这个？"\\server\\d\\Teklastructures\\Tekla Structures Releases\\18.0\\TeklaStructures180SR3x64Software.exe"

这是我尝试将 PsExec.exe 放在服务器的 C 驱动器上的方法：

```
Process p = new Process();
p.StartInfo.FileName = "C:\\PsExec.exe";
string args = "/s /v\"/qn INSTALLDIR=C:\\TeklaStructures /lvoicewarmupx C:\\teklaSRinstall.log";
p.StartInfo.Arguments = @"\\COMP14 -accepteula -i -s X:\Teklastructures\Tekla Structures Releases\18.0\TeklaStructures180SR3x64Software.exe " + args;
p.StartInfo.CreateNoWindow = true;
p.StartInfo.UseShellExecute = false;
p.Start();
p.WaitForExit();
p.Close(); 
```

任何远程安装软件的帮助将不胜感激。也许有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:28:25.247

您必须将安装程序 exe 复制到要安装它的计算机上，然后使用 psexec 在那里运行它。您不能从您希望安装它的其他机器运行安装程序 exe。

# c++ - C++ 运算符删除重载

> ID：12699767
> 
> 赞同：1
> 
> 时间：2012-10-02T23:12:46.343
> 
> 标签：c++, operator-overloading, delete-operator

我正在使用第三方库构建我的应用程序，该库似乎定义了重载的运算符 delete。我正在调查一个转储，我注意到第三方操作符删除被调用来处理我在我的程序中分配的东西——而不是 libstdc++ 操作符删除。是否可以通过某些链接选项或命令来控制调用哪个运算符删除？

谢谢您的帮助。

编辑：我还记得：我可能应该验证我最终使用哪个新运算符，因为这可能会解释我的应用程序崩溃的原因。

# makefile - Makefile，主函数，ClassNotFound

> ID：12699768
> 
> 赞同：0
> 
> 时间：2012-10-02T23:12:48.170
> 
> 标签：makefile, classnotfound

我有一个 Java 程序，并编写了一个 makefile 来在 Linux 上编译它。

我的项目是这样组织的（Run.java 是主要条目）

```
Program - 
   Src - 
       (package)adb.Bing_WebResults
            Run.java
       (package)adb.jsonModel
            *.java
       (package)adb.models
            *.java
   bin - 

   lib - 
       gson.jar
       commons.jar

   resource -
       *.txt 
```

这是我的生成文件：

```
# My project require 3 parameters from user input.

default: Run.class
Run.class: src/adb/Bing_WebResults/Run.java
    javac -sourcepath src/ -classpath lib/*.jar -d bin/ src/adb/Bing_WebResults/*.java  src/adb/jsonModels/*.java src/adb/models/*.java

run:
    java -classpath bin/:lib/*.jar  Run  "$(ARG1)" "$(ARG2)" "$(ARG3)" 
```

当我在 Linux 中使用“make run”命令终止时，异常显示“找不到主类：运行”

我的makefile有问题吗？走错路还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:35:10.503

有很多事情可能是错误的，但最明显的问题是 makefile 中目标的不正确依赖关系。

首先，目标`run`应该依赖于`Run.class`. 如果你这样做了，`make run`那么`make`查看名为`run`. 在您的`makefile`中，此目标没有定义任何依赖项，它将执行该行`java ...`而不检查实际编译的类是否`Run.class`存在。因此，如果您`make run`在干净的情况下执行此操作，您的源代码将不会被编译，并且该`java`命令将因为缺少已编译的类而失败。

您对 on 的依赖`default`也不`Run.class`正确，因为`Run.class`它将存在于`bin`目录中，而不是工作目录中。下面的行`Run.class`也提到了目标。

有几种方法可以改进您的 makefile。请参阅下面的更正代码示例，其中添加了一些变量以避免重复表达式。不过，这种方法是风格和偏好的问题。

```
BINDIR := bin
RUNCLASS := Run
RUNBINARY := $(BINDIR)/$(RUNCLASS).class
SRCDIR := src/adb/Bing_WebResults
RUNSRC := $(SRCDIR)/$(RUNCLASS).java

# Note: the default target below is superfluous at this moment
default: $(RUNBINARY)
$(RUNBINARY): $(RUNSRC)
        javac -sourcepath src/ -classpath lib/*.jar -d $(BINDIR) $(SRCDIR)/*.java src/adb/jsonModels/*.java src/adb/models/*.java

run: $(RUNBINARY)
        java -classpath $(BINDIR):lib/*.jar  $(RUNCLASS)  "$(ARG1)" "$(ARG2)" "$(ARG3)" 
```

这在一个简化的、可比较的设置中对我有用——它也可能对你有用。查看您提供的代码段，很可能需要添加其他依赖项或更改才能`makefile`正确完成您的操作。您可能必须将包信息添加到运行命令和依赖项表达式中，但这取决于您的源代码。您的帖子没有包含足够的信息来提供完整的解决方案。

PS：如果您将此代码复制到自己的`makefile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:55:50.737

最后你需要在运行时指定包，因为默认包中似乎没有主类。

```
java -classpath bin com.example.Run arg1 arg2 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:36:42.560

原来要注意两点：（1）run是在一个包里，所以在makefile中应该是“adb.Bing_WebResults.Run.class”。

(2) 外部 jar 文件应由 : (eg lib/a.jar: lib/b.jar) 连接

# c# - 删除页面加载控件时的 ASP.NET 问题

> ID：12699770
> 
> 赞同：0
> 
> 时间：2012-10-02T23:12:49.530
> 
> 标签：c#, asp.net

我有以下 Index.aspx 网络表单：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Index.aspx.cs" Inherits="ProblematicWebApplication.Index" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <asp:Label ID="dummyLabel" runat="server" Text="This is dummy label." />
    <form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="intDropDownList" runat="server"/>
        <br />
        <asp:Button Text="Submit" OnClick="OnSubmitClicked" runat="server"/>
        <br />
        Selected value: <asp:Label ID="selectedValueLabel" runat="server" />
    </div>
    </form>
</body>
</html> 
```

Index.aspx.cs 文件后面的代码如下：

```
using System;
using System.Linq;

namespace ProblematicWebApplication
{
    public partial class Index : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!this.IsPostBack)
            {
                this.intDropDownList.DataSource = Enumerable.Range(0, 11).ToArray();
                this.intDropDownList.DataBind();
            }

            if (this.Request["remove-dummy"] != null)
                this.Controls.Remove(this.dummyLabel);
        }

        protected void OnSubmitClicked(object sender, EventArgs e)
        {
            this.selectedValueLabel.Text = this.intDropDownList.SelectedValue;
        }
    }
} 
```

当我在查询字符串中没有删除虚拟参数的情况下运行我的应用程序并从 intDropDownList 中选择一些值并单击提交按钮时，所选值相应地显示在 selectedValueLabel 中。

但是，如果我在查询字符串中使用 remove-dummy=1 参数运行我的应用程序，则会删除 dummyLabel。现在，当我从 intDropDownList 中选择一些值并单击提交按钮时，所选值未正确写入 selectedValueLabel 并且 intDropDownList 中的所有项目都被删除。

有人可以向我解释为什么会这样吗？为什么删除不相关的 dummyLabel 控件会影响 intDropDownList 控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:15:00.613

嗯，好像很奇怪。我通过将删除控件的代码移动到页面`PreInit`事件中来使其工作：

```
protected void Page_PreInit(object sender, EventArgs e)
{
    if (this.Request["remove-dummy"] != null)
    {
        this.Controls.Remove(this.dummyLabel);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:45:50.757

在上一页加载中删除 dummyLabel 后，ViewState 加载似乎在回发中失败。

细节：

首先研究以下文章：

*   [真正理解 ViewState - 无限循环](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)
*   [ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

下图显示了重要的 ASP.NET 页面事件以及 ViewState 处理之间发生的位置。

![ASP.NET 页面事件和 ViewState 处理](../Images/6e847820a276438912085ed7bc7bfed3.png)

那么当声明性 Control dummyLabel 被删除时会发生什么？这是一个过程：

1.  首次使用查询字符串参数 remove-dummy=1 请求页面。
2.  在 Page_Load 事件中，声明性控件 dummyLabel 被删除。
3.  在 SaveStateComplete 事件之前，ViewState 被保存。控件树中没有控件 dummyLabel，所以它的 ViewState 不会被保存。
4.  单击提交按钮。
5.  在 InitComplete 和 PreLoad 事件之间，ViewState 被加载。这是它中断的地方，因为控制树现在包含 dummyLabel（dummyLabel 在 Load 事件之后被删除）并且**ASP.NET 无法将 ViewState 递归加载到 Page control tree**。我的假设是 ViewState 和 Page 控制树是紧密耦合的，并且由于这种紧密耦合，递归 ViewState 加载会失败。

支持这一理论的另一种情况：如果您将 dummyLabel 放在页面的最后，问题就不会再发生了，因为页面控件树中的所有其他控件在 dummyLabel 之前已经从 ViewState（ViewState 结构和页面控制树是紧密耦合的）。如果 dummyLabel 之后有更多控件，它们的 ViewState 加载将失败。

要解决此问题，必须在 ViewState 加载发生之前删除所有应删除的声明性控件（在 ASPX 文件中定义） - 在 InitComplete 事件或之前的任何其他事件中。

# delphi - “句柄”数据类型等价物

> ID：12699776
> 
> 赞同：3
> 
> 时间：2012-10-02T23:13:14.910
> 
> 标签：delphi, delphi-xe2, handle

我正在阅读[MoPaQ](http://sfsrealm.hopto.org/inside_mopaq/chapter4.htm)的文档并尝试将函数转换为 Delphi，因为文档中提到的某些数据类型与 Delphi 中的数据类型不直接匹配。

这是我遇到麻烦的功能：

```
HANDLE WINAPI MpqOpenArchiveForUpdate(LPCSTR lpFileName, DWORD dwCreationDisposition, DWORD dwHashTableSize); 
```

在 Delphi 中，我将其转换为：

```
function MpqOpenArchiveForUpdate(lpFileName: Char, CreationDisposition, dwHashTableSize: LongWord); external 'lmpqapi.dll'; 
```

* * *

我缺少我认为的函数的返回类型`HANDLE`（根据文档）。如果是这种情况，那么`HANDLE`数据类型的 Delphi 等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T23:22:10.003

等价的东西是这样的：

```
function MpqOpenArchiveForUpdate(lpFileName: LPCSTR; 
  dwCreattionDisposition,
  dwHasTableSize: DWord): THandle; stdcall; external 'lmpqapi.dll'; 
```

~~请注意，您必须确定 MoPacQ 是否支持 Unicode；如果不是，则改为更改 to 的`lpFileName`定义`PAnsiChar`。~~

Remy 在下面的评论中指出，Delphi 在所有版本上都映射`LPCSTR`到正确的`PAnsiChar`类型，因此您应该以这种方式使用它。

# javascript - 仅使用一个图像 URL 刷新时的随机图像

> ID：12699779
> 
> 赞同：0
> 
> 时间：2012-10-02T23:13:36.830
> 
> 标签：javascript, image, url, random

尝试使用谷歌搜索现成的脚本，但无济于事。我正在尝试找到执行以下操作的脚本。我不确定它有没有名字。
先感谢您！

**功能**：带有单个 URL 的横幅旋转器（基于 PHP）

**示例**：
用户上传 5 张图片（468x60px）
系统生成一个单一的图片 URL（例如[http://demo.com/image.gif](http://demo.com/image.gif)）当用户访问生成的 URL 时， 每次刷新时
随机显示他的 5 张图片中的 1 张
URL，它随机显示他的另一张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:16:10.740

您可以让处理给定 URL 的服务器端代码每次返回一个随机图像。如果您指定您正在使用的服务器端语言（PHP、ASP.Net、JSP...），我可以举个例子。

URL 可以类似于

[http://demo.com/image/](http://demo.com/image/)

它不需要包含特定的图像名称。

关键是确保浏览器不会尝试缓存该 URL。返回图像时设置适当的缓存标头。同样，这样做的机制是特定于您的语言的。

**PHP 示例**

这个简短的教程现在向您展示如何从图像文件夹中选择随机图像

[http://www.heckdesigns.com/tutorials/tutorial-pull-in-a-random-image-from-a-folder-with-php/](http://www.heckdesigns.com/tutorials/tutorial-pull-in-a-random-image-from-a-folder-with-php/)

**网址**

您真的不应该要求您的 URL 以 .png 或其他格式结尾。如果您适当地设置 Content-Type（如上面的教程所做的那样），任何 Web 浏览器都应该正确显示它。如果这实际上是一个要求，您可以使用 Apache 重写规则来执行此操作。
看

[mod_rewrite 和图像重定向](https://stackoverflow.com/questions/6123028/mod-rewrite-and-image-redirecting)

# magento - Magento 在特定的 cms 页面中呼叫客户的名字

> ID：12699780
> 
> 赞同：2
> 
> 时间：2012-10-02T23:13:36.923
> 
> 标签：magento, variables, echo

我正在尝试在一个页面上调用客户的名字。该页面已仅限于登录会员。因此，如果您尝试访问该页面但尚未登录，您将被重定向到登录页面。

如何在一个特定的 CMS 页面上呼叫、回显或显示已登录客户的名字？

我是一个试图学习magento的菜鸟。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T05:58:23.780

Magento 客户 名字 登录 用户

```
$session = Mage::getSingleton('customer/session');

if($session->isLoggedIn())
{
    $customer = $session->getCustomer();
    echo $customer->getFirstname();
} 
```

尝试实现上述代码以显示您的 CMS 页面的客户名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T02:11:26.670

在 .phtml 文件中获取客户名称

```
 echo Mage::helper('customer')->getCustomerName(); 
```

阅读更多@ [Magento 的当前用户？](https://stackoverflow.com/questions/416553/current-user-in-magento)

要在 cms 页面中获取客户名称，我会使用 cms 页面调用 phtml 文件

```
 {{block type="core/template" template="path/to/file/customer_name.phtml"}} 
```

阅读更多@[如何在 CMS 页面 Magento 中调用 PHTML 文件](https://stackoverflow.com/questions/9602161/how-to-call-a-phtml-file-within-a-cms-page-magento)

# typescript - 如何将多个源文件传递给 TypeScript 编译器？

> ID：12699781
> 
> 赞同：46
> 
> 时间：2012-10-02T23:13:37.733
> 
> 标签：typescript, tsc

TypeScript 专为大型 JavaScripty 项目而设计，这些项目通常由多个内部生成的文件以及外部生成的库组成。TypeScript 编译器 (tsc) 如何期望您为它提供构成项目的完整文件集？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-05-08T06:00:49.700

```
dir *.ts /b /s > ts-files.txt
tsc @ts-files.txt
del ts-files.txt 
```

这将编译`*.ts`工作目录及其子目录中的所有文件。如果您不想包含子目录，只需`/s`从第一行中删除该部分即可。

请注意，您还可以向该`tsc`行添加其他参数。这是我现在用于我的一个项目的内容：

```
tsc @ts-files.txt --out ..\output\deerchao.web.js --removeComments 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-02T23:41:01.053

如果您只是按顺序给出名称，tsc 可以按顺序编译多个源：

```
tsc foo.ts bar.ts 
```

您还可以使用命令行参数从文本文件传递包含文件列表和命令行参数的文本文件`@`。

```
tsc @compile.txt 
```

并且`compile.txt`可能看起来像这样：

```
--module amd
foo.ts
bar.ts 
```

* * *

另请注意，如果文件通过 , 引用另一个文件`import`，`tsc`将自动计算出来，而无需显式列出它所依赖的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-05T01:39:59.080

如果有人在 Mac OS X 上需要这个：

```
find . -name "*.ts" -type f >ts-files.txt
/usr/local/bin/tsc @ts-files.txt --module CommonJS --out ./Deploy/ServerMain.js --removeComments
rm ts-files.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-22T05:14:20.580

使用 TypeScript 1.5（测试版，但最终版本应该很快就会出现），您可以创建一个 tsconfig.json 文件来配置 TypeScript 编译器和要编译的文件（除其他外）。请参阅我的答案：[如何查看和编译所有 TypeScript 源代码？](https://stackoverflow.com/questions/12799237/how-to-watch-and-compile-all-typescript-sources/30751369#30751369)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-06T08:40:35.767

如果有人需要在实际项目编译之前预编译多个文件，请使用带有**--project**编译器选项的**单独 tsconfig 。**

 **> 在给定有效配置文件的情况下编译项目。参数可以是有效 JSON 配置文件的文件路径，也可以是包含 tsconfig.json 文件的目录的目录路径。有关更多详细信息，请参阅 tsconfig.json 文档。

一个用例是需要生成的 JS 文件，然后在 ionic 应用程序脚本的命令行参数中使用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-14T12:47:34.490

或者简单地说：

```
find ./my/path/ -name \"*.ts\" -type f | tsc 
```**

# ruby-on-rails - 无法弄清楚如何在 Rails/RSpec 中包含某个文件

> ID：12699789
> 
> 赞同：0
> 
> 时间：2012-10-02T23:14:31.460
> 
> 标签：ruby-on-rails, ruby, rspec

我有以下代码`lib/test/company.rb`：

```
module Test
  class Company
    # irrelevant stuff
  end
end 
```

在`spec/model/request.rb`中，我尝试了以下所有方法：

```
require "company"
require "lib/test/company"
require "lib/test/company.rb"
require Rails.root + "/lib/test/company.rb" 
```

这些都不起作用，在课堂上肯定不会自动加载。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:27:03.507

在您的规范文件中：

```
require "test/company" 
```

如果您想从 lib 中自动加载所有模块/类，这是不必要的。为此，请添加到 application.rb 文件中的配置块：

```
module YourApp
  class Application < Rails::Application

    config.autoload_paths += %W( #{config.root}/lib )

  end
end 
```

添加：

然后，您可以`Test::Company`从顶级命名空间调用来访问此类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:44:50.187

试试`require "#{Rails.root}/lib/test/company`。

# c++ - 懒惰的 enable_if 在工作中睡觉？

> ID：12699790
> 
> 赞同：2
> 
> 时间：2012-10-02T23:14:46.693
> 
> 标签：c++, templates, c++11, sfinae, enable-if

使用下面显示的定义，我可以调用`qget<0>()`或`qget<1>()`使用 G++ (4.7.2)，但`qget<2>`或“更高”将失败并出现`no matching function`错误。同时，Clang++ (3.2) 中的任何一个都失败了。我使用了*惰性*enable_if 作为最后的手段；虽然我不认为我*应该*需要它。我知道代码看起来有点奇怪，但是任何人都可以看到错误的来源吗？（Boost 提供了 enable_if 类。）

```
template <typename T> struct Tid { typedef T type; };

template <unsigned I>
typename enable_if_c<(I==0),double>::type
qget()
{ return 0.0; }

template <unsigned I>
typename lazy_enable_if_c<(I!=0), Tid<decltype(qget<I-1>())>>::type
qget()
{ return qget<I-1>(); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:19:14.430

当您将函数或函数模板声明为 eg`ret foo(A, B, C);`或无关紧要地声明为`auto foo(A, B, C) -> ret;`时`foo`，引用刚刚声明的实体的 直到所谓的声明符之后才在范围内。在您的特定情况下，返回类型（无论是否为后期返回类型）始终是声明符的一部分。

这意味着在您的最后一个声明`qget`中，返回类型中的名称可能引用前一个声明（ 的情况`I==0`），但可能永远不会引用当前声明。这就是为什么`qget<0>`and`qget<1>`被发现，但`qget<2>`不是：当试图形成后者的返回类型时，`qget<1>`因为第一个声明按预期被 SFINAE 淘汰，而第二个声明是当前声明而不是在范围内，所以没有找到。该错误导致 SFINAE。

发生这种情况时我通常的解决方案（我不得不说并不经常）是使用 a `struct`（作为实现细节），因为*所有*成员函数（和成员函数模板）都是在类的定义中声明的，从左大括号开始上。

话虽如此，您仍然会遇到障碍，因为即使您在使用`lazy_enable_if_c`时，您仍然急切地计算`qget<I - 1>()`（作为 的参数`lazy_enable_if_c`）的类型，即使 is 时`I`也是如此`0`。懒惰地评估所述类型的身份不会拯救你。

不幸的是，我似乎无法获得使用 GCC 4.7.2 运行的示例，即使将条件固定为`I > 0`并使用惰性结果（尽管通常我会使用 4.8），它也坚持不终止递归，所以我不能向你保证我的解决方案可以奏效。

# python - 查找数字的单词版本

> ID：12699791
> 
> 赞同：0
> 
> 时间：2012-10-02T23:14:47.730
> 
> 标签：python

> **可能重复：**
> [Project Euler 17](https://stackoverflow.com/questions/12647254/project-euler-17)

所以对于项目euler的这个问题：

> 如果数字 1 到 5 用单词写出：一、二、三、四、五，那么总共使用了 3 + 3 + 5 + 4 + 4 = 19 个字母。
> 
> 如果用文字写出从 1 到 1000（一千）的所有数字，将使用多少个字母？
> 
> 注意：不要计算空格或连字符。例如，342（三百四十二）包含 23 个字母，而 115（一百一十五）包含 20 个字母。在写出数字时使用“and”符合英国的用法。

我试图在没有帮助的情况下自己解决这个问题......但我认为我做错了什么......

我有这个代码...

```
def convert(n):
    if n < 10:
        return placement(n,1)
    elif n == 10:
        return "ten"
    elif n > 10 and n < 20:
        return teen(n)
    elif n >= 20 and n < 100:
        if int(str(n)[1]) == 0:
            return placement(str(n)[0],2)
        else:
            return placement(str(n)[0],2)+convert(int(str(n)[1]))
    elif len(str(n)) == 3:
        x = ""
        h = placement(str(n)[0], 3)
        if int(str(n)[1]) == 0 and int(str(n)[2]) == 0:
            return h
        else:
            z = int(str(n)[1]+"0")+int(str(n)[2])
            x = h + "and" + str(convert(z))
            return x
    elif len(str(n)) == 4:
        x = ""
        t = placement(str(n)[0], 4)
        if int(str(n)[1]) == 0 and int(str(n)[2]) == 0 and int(str(n)[3]) == 0:
            return t
def teen(n):
    n = int(n)
    if n == 11:
        return "eleven"
    if n == 12:
        return "twelve"
    if n == 13:
        return "thirteen"
    if n == 14:
        return "fourteen"
    if n == 15:
        return "fifteen"
    if n == 16:
        return "sixteen"
    if n == 17:
        return "seventeen"
    if n == 18:
        return "eighteen"
    if n == 19:
        return "nineteen"
    else:
        return ""
def placement(n,p):
    n = int(n)
    if p == 1:
        if n == 1:
            return "one"
        if n == 2:
            return "two"
        if n == 3:
            return "three"
        if n == 4:
            return "four"
        if n == 5:
            return "five"
        if n == 6:
            return "six"
        if n == 7:
            return "seven"
        if n == 8:
            return "eight"
        if n == 9:
            return "nine"
        else:
            return ""
    if p == 2:
        if n == 1:
            return "ten"
        if n == 2:
            return "twenty"
        if n == 3:
            return "thirty"
        if n == 4:
            return "fourty"
        if n == 5:
            return "fifty"
        if n == 6:
            return "sixty"
        if n == 7:
            return "seventy"
        if n == 8:
            return "eighty"
        if n == 9:
            return "ninety"
        else:
            return ""
    if p == 3:
        if n != 0:
            return placement(n,1) + "hundred"
        else:
            return ""
    if p == 4:
        if n != 0:
            return placement(n,1) + "thousand"
        else:
            return ""
z = 0
for x in range(1,1001):
    z += len(convert(x))
print z 
```

这吐出了答案`21224`，但欧拉项目说错了，所以有人看到我在做什么错了吗？有没有人有更好的方法来做到这一点，如果你能请你解释一下，而不是只给我一些代码？

抱歉这么长...但是如果我打印每一行我会得到这个...

```
one
two
three
four
five
six
seven
eight
nine
ten
eleven
twelve
thirteen
fourteen
fifteen
sixteen
seventeen
eighteen
nineteen
twenty
twentyone
twentytwo
twentythree
twentyfour
twentyfive
twentysix
twentyseven
twentyeight
twentynine
thirty
thirtyone
thirtytwo
thirtythree
thirtyfour
thirtyfive
thirtysix
thirtyseven
thirtyeight
thirtynine
fourty
fourtyone
fourtytwo
fourtythree
fourtyfour
fourtyfive
fourtysix
fourtyseven
fourtyeight
fourtynine
fifty
fiftyone
fiftytwo
fiftythree
fiftyfour
fiftyfive
fiftysix
fiftyseven
fiftyeight
fiftynine
sixty
sixtyone
sixtytwo
sixtythree
sixtyfour
sixtyfive
sixtysix
sixtyseven
sixtyeight
sixtynine
seventy
seventyone
seventytwo
seventythree
seventyfour
seventyfive
seventysix
seventyseven
seventyeight
seventynine
eighty
eightyone
eightytwo
eightythree
eightyfour
eightyfive
eightysix
eightyseven
eightyeight
eightynine
ninety
ninetyone
ninetytwo
ninetythree
ninetyfour
ninetyfive
ninetysix
ninetyseven
ninetyeight
ninetynine
onehundred
onehundredandone
onehundredandtwo
onehundredandthree
onehundredandfour
onehundredandfive
onehundredandsix
onehundredandseven
onehundredandeight
onehundredandnine
onehundredandten
onehundredandeleven
onehundredandtwelve
onehundredandthirteen
onehundredandfourteen
onehundredandfifteen
onehundredandsixteen
onehundredandseventeen
onehundredandeighteen
onehundredandnineteen
onehundredandtwenty
onehundredandtwentyone
onehundredandtwentytwo
onehundredandtwentythree
onehundredandtwentyfour
onehundredandtwentyfive
onehundredandtwentysix
onehundredandtwentyseven
onehundredandtwentyeight
onehundredandtwentynine
onehundredandthirty
onehundredandthirtyone
onehundredandthirtytwo
onehundredandthirtythree
onehundredandthirtyfour
onehundredandthirtyfive
onehundredandthirtysix
onehundredandthirtyseven
onehundredandthirtyeight
onehundredandthirtynine
onehundredandfourty
onehundredandfourtyone
onehundredandfourtytwo
onehundredandfourtythree
onehundredandfourtyfour
onehundredandfourtyfive
onehundredandfourtysix
onehundredandfourtyseven
onehundredandfourtyeight
onehundredandfourtynine
onehundredandfifty
onehundredandfiftyone
onehundredandfiftytwo
onehundredandfiftythree
onehundredandfiftyfour
onehundredandfiftyfive
onehundredandfiftysix
onehundredandfiftyseven
onehundredandfiftyeight
onehundredandfiftynine
onehundredandsixty
onehundredandsixtyone
onehundredandsixtytwo
onehundredandsixtythree
onehundredandsixtyfour
onehundredandsixtyfive
onehundredandsixtysix
onehundredandsixtyseven
onehundredandsixtyeight
onehundredandsixtynine
onehundredandseventy
onehundredandseventyone
onehundredandseventytwo
onehundredandseventythree
onehundredandseventyfour
onehundredandseventyfive
onehundredandseventysix
onehundredandseventyseven
onehundredandseventyeight
onehundredandseventynine
onehundredandeighty
onehundredandeightyone
onehundredandeightytwo
onehundredandeightythree
onehundredandeightyfour
onehundredandeightyfive
onehundredandeightysix
onehundredandeightyseven
onehundredandeightyeight
onehundredandeightynine
onehundredandninety
onehundredandninetyone
onehundredandninetytwo
onehundredandninetythree
onehundredandninetyfour
onehundredandninetyfive
onehundredandninetysix
onehundredandninetyseven
onehundredandninetyeight
onehundredandninetynine
twohundred
twohundredandone
twohundredandtwo
twohundredandthree
twohundredandfour
twohundredandfive
twohundredandsix
twohundredandseven
twohundredandeight
twohundredandnine
twohundredandten
twohundredandeleven
twohundredandtwelve
twohundredandthirteen
twohundredandfourteen
twohundredandfifteen
twohundredandsixteen
twohundredandseventeen
twohundredandeighteen
twohundredandnineteen
twohundredandtwenty
twohundredandtwentyone
twohundredandtwentytwo
twohundredandtwentythree
twohundredandtwentyfour
twohundredandtwentyfive
twohundredandtwentysix
twohundredandtwentyseven
twohundredandtwentyeight
twohundredandtwentynine
twohundredandthirty
twohundredandthirtyone
twohundredandthirtytwo
twohundredandthirtythree
twohundredandthirtyfour
twohundredandthirtyfive
twohundredandthirtysix
twohundredandthirtyseven
twohundredandthirtyeight
twohundredandthirtynine
twohundredandfourty
twohundredandfourtyone
twohundredandfourtytwo
twohundredandfourtythree
twohundredandfourtyfour
twohundredandfourtyfive
twohundredandfourtysix
twohundredandfourtyseven
twohundredandfourtyeight
twohundredandfourtynine
twohundredandfifty
twohundredandfiftyone
twohundredandfiftytwo
twohundredandfiftythree
twohundredandfiftyfour
twohundredandfiftyfive
twohundredandfiftysix
twohundredandfiftyseven
twohundredandfiftyeight
twohundredandfiftynine
twohundredandsixty
twohundredandsixtyone
twohundredandsixtytwo
twohundredandsixtythree
twohundredandsixtyfour
twohundredandsixtyfive
twohundredandsixtysix
twohundredandsixtyseven
twohundredandsixtyeight
twohundredandsixtynine
twohundredandseventy
twohundredandseventyone
twohundredandseventytwo
twohundredandseventythree
twohundredandseventyfour
twohundredandseventyfive
twohundredandseventysix
twohundredandseventyseven
twohundredandseventyeight
twohundredandseventynine
twohundredandeighty
twohundredandeightyone
twohundredandeightytwo
twohundredandeightythree
twohundredandeightyfour
twohundredandeightyfive
twohundredandeightysix
twohundredandeightyseven
twohundredandeightyeight
twohundredandeightynine
twohundredandninety
twohundredandninetyone
twohundredandninetytwo
twohundredandninetythree
twohundredandninetyfour
twohundredandninetyfive
twohundredandninetysix
twohundredandninetyseven
twohundredandninetyeight
twohundredandninetynine
threehundred
threehundredandone
threehundredandtwo
threehundredandthree
threehundredandfour
threehundredandfive
threehundredandsix
threehundredandseven
threehundredandeight
threehundredandnine
threehundredandten
threehundredandeleven
threehundredandtwelve
threehundredandthirteen
threehundredandfourteen
threehundredandfifteen
threehundredandsixteen
threehundredandseventeen
threehundredandeighteen
threehundredandnineteen
threehundredandtwenty
threehundredandtwentyone
threehundredandtwentytwo
threehundredandtwentythree
threehundredandtwentyfour
threehundredandtwentyfive
threehundredandtwentysix
threehundredandtwentyseven
threehundredandtwentyeight
threehundredandtwentynine
threehundredandthirty
threehundredandthirtyone
threehundredandthirtytwo
threehundredandthirtythree
threehundredandthirtyfour
threehundredandthirtyfive
threehundredandthirtysix
threehundredandthirtyseven
threehundredandthirtyeight
threehundredandthirtynine
threehundredandfourty
threehundredandfourtyone
threehundredandfourtytwo
threehundredandfourtythree
threehundredandfourtyfour
threehundredandfourtyfive
threehundredandfourtysix
threehundredandfourtyseven
threehundredandfourtyeight
threehundredandfourtynine
threehundredandfifty
threehundredandfiftyone
threehundredandfiftytwo
threehundredandfiftythree
threehundredandfiftyfour
threehundredandfiftyfive
threehundredandfiftysix
threehundredandfiftyseven
threehundredandfiftyeight
threehundredandfiftynine
threehundredandsixty
threehundredandsixtyone
threehundredandsixtytwo
threehundredandsixtythree
threehundredandsixtyfour
threehundredandsixtyfive
threehundredandsixtysix
threehundredandsixtyseven
threehundredandsixtyeight
threehundredandsixtynine
threehundredandseventy
threehundredandseventyone
threehundredandseventytwo
threehundredandseventythree
threehundredandseventyfour
threehundredandseventyfive
threehundredandseventysix
threehundredandseventyseven
threehundredandseventyeight
threehundredandseventynine
threehundredandeighty
threehundredandeightyone
threehundredandeightytwo
threehundredandeightythree
threehundredandeightyfour
threehundredandeightyfive
threehundredandeightysix
threehundredandeightyseven
threehundredandeightyeight
threehundredandeightynine
threehundredandninety
threehundredandninetyone
threehundredandninetytwo
threehundredandninetythree
threehundredandninetyfour
threehundredandninetyfive
threehundredandninetysix
threehundredandninetyseven
threehundredandninetyeight
threehundredandninetynine
fourhundred
fourhundredandone
fourhundredandtwo
fourhundredandthree
fourhundredandfour
fourhundredandfive
fourhundredandsix
fourhundredandseven
fourhundredandeight
fourhundredandnine
fourhundredandten
fourhundredandeleven
fourhundredandtwelve
fourhundredandthirteen
fourhundredandfourteen
fourhundredandfifteen
fourhundredandsixteen
fourhundredandseventeen
fourhundredandeighteen
fourhundredandnineteen
fourhundredandtwenty
fourhundredandtwentyone
fourhundredandtwentytwo
fourhundredandtwentythree
fourhundredandtwentyfour
fourhundredandtwentyfive
fourhundredandtwentysix
fourhundredandtwentyseven
fourhundredandtwentyeight
fourhundredandtwentynine
fourhundredandthirty
fourhundredandthirtyone
fourhundredandthirtytwo
fourhundredandthirtythree
fourhundredandthirtyfour
fourhundredandthirtyfive
fourhundredandthirtysix
fourhundredandthirtyseven
fourhundredandthirtyeight
fourhundredandthirtynine
fourhundredandfourty
fourhundredandfourtyone
fourhundredandfourtytwo
fourhundredandfourtythree
fourhundredandfourtyfour
fourhundredandfourtyfive
fourhundredandfourtysix
fourhundredandfourtyseven
fourhundredandfourtyeight
fourhundredandfourtynine
fourhundredandfifty
fourhundredandfiftyone
fourhundredandfiftytwo
fourhundredandfiftythree
fourhundredandfiftyfour
fourhundredandfiftyfive
fourhundredandfiftysix
fourhundredandfiftyseven
fourhundredandfiftyeight
fourhundredandfiftynine
fourhundredandsixty
fourhundredandsixtyone
fourhundredandsixtytwo
fourhundredandsixtythree
fourhundredandsixtyfour
fourhundredandsixtyfive
fourhundredandsixtysix
fourhundredandsixtyseven
fourhundredandsixtyeight
fourhundredandsixtynine
fourhundredandseventy
fourhundredandseventyone
fourhundredandseventytwo
fourhundredandseventythree
fourhundredandseventyfour
fourhundredandseventyfive
fourhundredandseventysix
fourhundredandseventyseven
fourhundredandseventyeight
fourhundredandseventynine
fourhundredandeighty
fourhundredandeightyone
fourhundredandeightytwo
fourhundredandeightythree
fourhundredandeightyfour
fourhundredandeightyfive
fourhundredandeightysix
fourhundredandeightyseven
fourhundredandeightyeight
fourhundredandeightynine
fourhundredandninety
fourhundredandninetyone
fourhundredandninetytwo
fourhundredandninetythree
fourhundredandninetyfour
fourhundredandninetyfive
fourhundredandninetysix
fourhundredandninetyseven
fourhundredandninetyeight
fourhundredandninetynine
fivehundred
fivehundredandone
fivehundredandtwo
fivehundredandthree
fivehundredandfour
fivehundredandfive
fivehundredandsix
fivehundredandseven
fivehundredandeight
fivehundredandnine
fivehundredandten
fivehundredandeleven
fivehundredandtwelve
fivehundredandthirteen
fivehundredandfourteen
fivehundredandfifteen
fivehundredandsixteen
fivehundredandseventeen
fivehundredandeighteen
fivehundredandnineteen
fivehundredandtwenty
fivehundredandtwentyone
fivehundredandtwentytwo
fivehundredandtwentythree
fivehundredandtwentyfour
fivehundredandtwentyfive
fivehundredandtwentysix
fivehundredandtwentyseven
fivehundredandtwentyeight
fivehundredandtwentynine
fivehundredandthirty
fivehundredandthirtyone
fivehundredandthirtytwo
fivehundredandthirtythree
fivehundredandthirtyfour
fivehundredandthirtyfive
fivehundredandthirtysix
fivehundredandthirtyseven
fivehundredandthirtyeight
fivehundredandthirtynine
fivehundredandfourty
fivehundredandfourtyone
fivehundredandfourtytwo
fivehundredandfourtythree
fivehundredandfourtyfour
fivehundredandfourtyfive
fivehundredandfourtysix
fivehundredandfourtyseven
fivehundredandfourtyeight
fivehundredandfourtynine
fivehundredandfifty
fivehundredandfiftyone
fivehundredandfiftytwo
fivehundredandfiftythree
fivehundredandfiftyfour
fivehundredandfiftyfive
fivehundredandfiftysix
fivehundredandfiftyseven
fivehundredandfiftyeight
fivehundredandfiftynine
fivehundredandsixty
fivehundredandsixtyone
fivehundredandsixtytwo
fivehundredandsixtythree
fivehundredandsixtyfour
fivehundredandsixtyfive
fivehundredandsixtysix
fivehundredandsixtyseven
fivehundredandsixtyeight
fivehundredandsixtynine
fivehundredandseventy
fivehundredandseventyone
fivehundredandseventytwo
fivehundredandseventythree
fivehundredandseventyfour
fivehundredandseventyfive
fivehundredandseventysix
fivehundredandseventyseven
fivehundredandseventyeight
fivehundredandseventynine
fivehundredandeighty
fivehundredandeightyone
fivehundredandeightytwo
fivehundredandeightythree
fivehundredandeightyfour
fivehundredandeightyfive
fivehundredandeightysix
fivehundredandeightyseven
fivehundredandeightyeight
fivehundredandeightynine
fivehundredandninety
fivehundredandninetyone
fivehundredandninetytwo
fivehundredandninetythree
fivehundredandninetyfour
fivehundredandninetyfive
fivehundredandninetysix
fivehundredandninetyseven
fivehundredandninetyeight
fivehundredandninetynine
sixhundred
.....
ninehundredandninetyseven
ninehundredandninetyeight
ninehundredandninetynine
onethousand 
```

在我看来是对的...

如果我用他们的例子测试它，使用`for x in range(1, 6)`出来 19

如果我这样做`len(convert(115))`，它会说`20`字符，但如果我这样做`len(convert(342))`，它会出现`24`而不是`23`......那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:54:58.363

看起来您需要在您的 *ty 单词（二十、三十等）和一个数字（一、二等）之间添加一个破折号。例如，我相信从描述中你应该得到“二十一”而不是“二十一”（顺便说一句，这不是一个词）。

您可能还想将“四十”更改为“四十”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:25:13.347

如前所述， 40 一词是*40*，而不是*40*。

请注意，`if`检查大约 30 个单独案例的长系列语句可以替换为数组引用。这将使程序减半。

例如，将您的`teen`和`placement`功能替换为以下内容：

```
def teen(n):
    n = int(n)
    if n//10 == 1:
        return ["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"][n-10]
    else:
        return ""

def placement(n,p):
    n = int(n)
    if n < 1:
        return ""
    if p == 1:
        return ["one","two","three","four","five","six","seven","eight","nine"][n-1]
    if p == 2:
        return ["ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"][n-1]
    if p == 3:
        return placement(n,1) + "hundred"
    if p == 4:
        return placement(n,1) + "thousand" 
```

此外，将前 6 行替换为`convert`：

```
def convert(n):
    if n < 10:
        return placement(n,1)
    if n < 20:
        return teen(n)
    if n < 100: 
```

# colors - 多段线 - 需要更改颜色

> ID：12699798
> 
> 赞同：0
> 
> 时间：2012-10-02T23:15:41.163
> 
> 标签：colors, polyline

我是 Google 地图的新手 - 我正在尝试更改地图上第二条折线的颜色。

这是我目前所拥有的~

```
var direction = new GDirections(); 

direction.load("from: Oregon 99, near, Halsey, Oregon to: Oregon 34, near, Tangent, Oregon to: Interstate 5, near, Tigard, Oregon to: Oregon 217, near, Cedar Hills, Oregon to: U.S. 26, near, North Plains, Oregon to: U.S. 26, near, Tigard, Oregon to: Interstate 405, near, Portland, Oregon to: Interstate 5, near, Vancouver, Wa to: Interstate 5, near, Carrolls, Wa to: Washington 432,  near, Longview, Wa to: Washington 433, near, Rainier, Oregon to: U.S. 30, Wauna, Oregon", {getPolyline:true});

GEvent.addListener(direction, 
                   "load", 
                   function(){ map.addOverlay(direction.getPolyline()); }
); 
```

有人能帮我把这条折线改成其他颜色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:39:04.300

您可以尝试`direction.getPolyline()`在将其添加为覆盖之前放入一个变量，然后在添加它之后调用`GPolyline.setStrokeStyle(GPolyStyleOptions)`它。以下是[GPolyline.setStrokeStyle()](https://developers.google.com/maps/documentation/javascript/v2/reference#GPolyline.setStrokeStyle)和[GPolyStyleOptions的一些参考资料](https://developers.google.com/maps/documentation/javascript/v2/reference#GPolyStyleOptions)

# mysql - MySQL选择组中的最大记录

> ID：12699799
> 
> 赞同：11
> 
> 时间：2012-10-02T23:15:42.023
> 
> 标签：mysql, group-by, max

我正在尝试在具有大约 500,000 条记录和大约 50 或 60 列的表中创建查询。我需要的是将这些记录整理成组并选择每个组中的最大记录。

为了简化问题，我有一个表格如下

```
+----+-------------+----------+--------+
| id | external_id | group_id | mypath |
+----+-------------+----------+--------+
|  1 |        1003 |        1 | a      | 
|  2 |        1004 |        2 | b      | 
|  3 |        1005 |        2 | c      | 
+----+-------------+----------+--------+ 
```

简单的group by如下

```
select * from temp GROUP BY group_id 
```

返回

```
+----+-------------+----------+--------+
| id | external_id | group_id | mypath |
+----+-------------+----------+--------+
|  1 |        1003 |        1 | a      | 
|  2 |        1004 |        2 | b      | 
+----+-------------+----------+--------+ 
```

不错，但不是我想要的。我想要的是每个组中最大 enternal_id 的整个记录​​。换句话说

```
+----+-------------+----------+--------+
| id | external_id | group_id | mypath |
+----+-------------+----------+--------+
|  1 |        1003 |        1 | a      | 
|  3 |        1005 |        2 | c      | 
+----+-------------+----------+--------+ 
```

不知何故，我希望在这里放置一个 max(external_id) 语句来过滤所需的内容，但到目前为止我的所有调查都失败了。一些指导将不胜感激。重要的是，在返回 max(external_id) 时，选择整个记录作为路径列不同。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T23:23:02.010

[在http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)有很多信息

这一直是 MySQL 中一个令人讨厌的问题。有一些方法可以解决它，例如将几个字段连接在一起（从 external_id 开始），然后选择其中的 MAX()，然后将其拆分。

我建议你使用派生表。第一个表 (t1) 派生自一个简单查询，您可以在其中识别`MAX(external_id)`，然后从该表中加入以获取其余数据。

**这仅在`external_id`唯一的情况下**

```
SELECT 
   t1.group_id, some_table.id, some_table.mypath
FROM 
   (
      SELECT group_id, MAX(external_id) AS external_id
      FROM some_table
      GROUP BY group_id
   ) as t1
INNER JOIN 
   sometable ON t1.external_id = sometable.external_id
WHERE ... 
```

# css - CSS 中更智能的断词？

> ID：12699800
> 
> 赞同：68
> 
> 时间：2012-10-02T23:15:45.260
> 
> 标签：css, word-break

如果我只是穿上`word-break: break-all`一个元素，我经常会得到这样的结果：

> 大家好，我正在输入一条
> 太长的消息！

显然这会更好：

> 大家好，我输入的
> 信息太长，无法容纳！

但与此同时，如果有人写道：

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊！！！！！！

然后我希望它是：

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
> 啊啊！！！！！！

我似乎找不到真正做到这一点的方法。

请注意，元素的宽度不是固定的，可能会发生变化。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-02T23:21:02.823

尝试[`word-break: break-word;`](https://developer.mozilla.org/en-US/docs/Web/CSS/word-break)它的行为应该如你所愿。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-02-16T15:47:29.643

对于我们的很多项目，我们通常在必要时添加：

```
.text-that-needs-wrapping {
    overflow-wrap: break-word;
    word-wrap: break-word;
    -ms-word-break: break-all;
    word-break: break-word;
    -ms-hyphens: auto;
    -moz-hyphens: auto;
    -webkit-hyphens: auto;
    hyphens: auto;
} 
```

它处理不同浏览器的大多数奇怪情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-09-10T18:43:53.730

更新后的答案应该是：

`overflow-wrap:break-word;`

它会破坏一个本身无法容纳在自己的行中的单词，但保留所有其他单词（请参阅[此处](https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap)的溢出包装）。

您还可以使用：

`overflow-wrap:anywhere;`但这将允许在任何单词后换行，以减少元素的宽度。请参阅以下 MDN 中描述的差异：

> [break-word is] 与anywhere值相同，如果行中没有其他可接受的断点，则允许在任意点打破通常不可破坏的单词，但在计算时不考虑由单词break引入的软换行机会最小内容内在大小。

此外，`anywhere`Internet Explorer、Safari 和某些移动浏览器不支持，而`break-word`所有主要浏览器都支持（请参阅 [此处][2]）。

`word-break: break-word;`不应再使用它，因为它已被弃用，取而代之的是`overflow-wrap:break-word;`. 现在，该`word-break`属性旨在用于当您想打断单词时，无论它们是否适合自己的行（即 OP 的第一个示例`word-break: break-all`.

> In contrast to word-break, overflow-wrap will only create a break if an entire word cannot be placed on its own line without overflowing.

(From overflow-wrap [also linked above](https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap) )

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T05:46:15.163

对于智能分词，或首先要*正确*分词，您需要与语言相关的规则。对于英语和许多其他语言，正确的断行意味着断字，断行时在行尾添加连字符。

在 CSS 中，您可以使用[`hyphens: auto`](https://developer.mozilla.org/en-US/docs/CSS/hyphens)，尽管您仍然需要使用供应商前缀来复制它。由于这在 IE 9 上不起作用，您可以考虑使用基于 JavaScript 的连字符，例如[Hyphenate.js](http://code.google.com/p/hyphenator/)。在这两种情况下，都必须使用语言标记（`lang`属性）。

打断长的、不可连字符的字符串是一个不同的问题。最好在预处理中处理它们，但在简单的设置中`word-break: break-word`（这意味着*不正确*的断词，例如英语）可能被视为紧急情况。

# android - Android - 如何创建另一个版本的应用程序？

> ID：12699801
> 
> 赞同：1
> 
> 时间：2012-10-02T23:15:45.110
> 
> 标签：android

我想制作我的应用程序的付费版本和免费版本。

现在有一个版本是免费的。我应该如何处理现有的代码库？我应该只复制粘贴所有内容吗？或者我应该采取什么好的分步方法来轻松地将我的应用程序复制到将要修改的新应用程序中？

我真的不想一个个文件一个文件地做。有没有一种快速的方法来建立一个新项目并将现有的代码库放入其中？在那之后，我要在新项目中修改什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:22:26.263

有一个解决方法可以做到这一点，您可以使用另一个名称将项目复制到您的工作空间中，然后转到`.project`文件并更改名称标签以设置新项目的名称

```
 <name>New Project Name</name> 
```

那么您所要做的就是从 eclipse 导入这个项目，然后您可以进行必要的更改**，不要忘记也对清单文件进行更改**.. 但我应该提到这不是处理免费/付费版本的最佳实践

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:27:45.890

好吧，如果您想在另一个专门的应用程序项目中实现您已经存在的代码，我认为最好将您以前的项目用作**库**并在您的新项目中引用它。这样，`FreeApp`您可以在`PaidApp`. 它可以被认为类似于继承，其中父类可以用作派生子类中特化的基类。

**创建项目的克隆：**打开要复制的项目。使用 Cntrl-C 和 Cntrl-V 复制和粘贴。当您完成粘贴时，Eclipse 会要求您输入一个新的项目名称。Eclipse 项目名称和目录独立于应用程序名称和包。

请查看[此问题](https://stackoverflow.com/questions/5483539/android-copy-existing-project-with-a-new-name)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T23:28:14.583

我所做的是创建一个包含所有共享代码和共享资源的库项目，然后创建多个使用该库的简单应用程序项目。

复制粘贴几乎总是一个坏主意。

有关库项目的更多信息，请参阅 Android 的[管理项目](http://developer.android.com/tools/projects/index.html)文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T23:28:27.187

如果您希望这两个应用程序可以安装在同一设备上，您应该更改 AndroidManifest.xml 文件，以便包名称不同

所以对于app1

```
<manifest .... package="com.example.app1" .... /> 
```

对于app2

```
<manifest .... package="com.example.app2" .... /> 
```

显然您必须重命名 src/com/example/app1 并修复该文件夹中 java 类的名称空间

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T23:26:49.277

您可以导出免费版本，然后在 eclipse 中创建一个新项目。将免费版本导入这个新项目的现有空间，并在那里对代码进行必要的更改。不过，您将不得不使用不同的密钥/证书重新签署此付费版本。这并不是管理付费/免费模型最流行的方法，我听说过的最常见的技术是应用内购买，但我还没有尝试过这种方法。祝你好运

# java - 如何在Java中完成一个加减运算？

> ID：12699809
> 
> 赞同：-1
> 
> 时间：2012-10-02T23:16:57.153
> 
> 标签：java

Java中有加减运算吗？

如果没有，那么最有效的方法是什么？

假设你有两个变量，`a = 4`我`b = 3`想要的是能够`a ± b`返回两个值，7 和 1，因为 4 + 3 是 7，4 - 3 是 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:23:31.560

plus-minus 不是运算，它是一个符号。如果您只想将它​​包含在一个字符串中，您可以使用 Unicode \u00B1 例如：

System.out.println("sqrt(9) = \u00B1 3");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:21:27.680

如果您仔细阅读 Wiki 文章，您会注意到 plus-minus 不是操作。它是工程和数学（以及其他领域）中使用的标志，表示一个值可能是正数或负数。

例如，4 的平方根实际上不是 2，而是“加减 2”，因为 (+2)^2 和 (-2)^2 都是 4。

它还用于测量公差和误差，例如“您要放置的零件长度必须为 100 毫米正负 0.5 毫米”（零件长度必须在 99.5 毫米和 100.5 毫米之间）。

因为变量只能有一个值，所以加减标记/关键字/没有多大意义。但是，您可以使用适用于应用程序的数据结构和关联方法来跟踪这些类型的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:06:14.263

可能“区间算术”是您正在寻找的。

[维基/Interval_arithmetic](http://en.wikipedia.org/wiki/Interval_arithmetic)

[间隔.sourceforge.net](http://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://interval.sourceforge.net/interval/index.html&ei=fqprUOv5OJCQ4gSEo4CoBA&usg=AFQjCNGZlZ2neqf-0CdBt3JSe_hoad7OFQ&sig2=j3loFaV-X1CdhMm3kD9tsA)

# java - Netbeans 面临配置问题

> ID：12699816
> 
> 赞同：0
> 
> 时间：2012-10-02T23:18:03.703
> 
> 标签：java, xml, jsf, netbeans, faces-config

我的 faces-config.xml 文件有一个奇怪的问题 - 我使用的是 Netbeans。

一旦我通过选择“新建”->“JSF Faces 配置”创建了一个 faces-config 文件，整个应用程序在运行时就会失败：“模块尚未部署。” 当我删除配置文件时，应用程序运行得很好（除了缺少 faces-config 文件中的所有额外修改）。我正在使用带有 Mountain Lion 的 MacBook Pro。我每天都使用 Eclipse，并安装了所有必要的 Java 工具——就我而言。

我很感激任何帮助。这个问题已经持续了一段时间了，我在网上找不到任何匹配的案例。

帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:57:25.637

您所说的“除了缺少 faces-config 文件中的所有额外修改”到底是什么意思？您是否在此文件中放置了一些手动配置？另外，在添加新的 faces-config 文件后，您是否在运行应用程序之前尝试过清理和构建？

# php - 在php中显示Mysql数据

> ID：12699817
> 
> 赞同：-1
> 
> 时间：2012-10-02T23:18:11.393
> 
> 标签：php, mysql

我有以下查询，现在如何在`<p>`标签中显示输出

```
SELECT COUNT( question_status) AS active_questions
FROM questions_table
WHERE question_status = "Active" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:26:18.450

[http://nl3.php.net/manual/en/function.mysql-query.php](http://nl3.php.net/manual/en/function.mysql-query.php)

[http://nl3.php.net/manual/en/mysqli.query.php](http://nl3.php.net/manual/en/mysqli.query.php)

上面的链接都为您提供了足够的信息来显示输出。不要忘记用 <p> 标签包围它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:40:36.350

回到完整的基础：

```
<?php

$connection = mysql_connect($DB_hostname, $DB_username, $DB_password) or die(mysql_error());
        mysql_select_db($DB_name, $connection);
        $query = mysql_query("
            SELECT COUNT(question_status) AS active_questions
            FROM questions_table
            WHERE question_status = "Active"
        ", $connection) or die(mysql_error());
        echo '<p>';
        while ($myrow = mysql_fetch_array($query))
        {
            echo $myrow['active_questions'];
        }
        echo '</p>'; 
```

这绝不是严格要求，它不使用任何外部（或有价值的库，例如 PDO），但应该让您了解如何简单地实现和呈现结果集。

您应该及时探索/阅读 mysqli/PDO 和其他方面的更多功能/实用程序。

# php - 输入值的 JSON 响应

> ID：12699820
> 
> 赞同：0
> 
> 时间：2012-10-02T23:18:24.733
> 
> 标签：php, jquery, ajax, json

我有以下代码返回一个 JSON 数组。我在将值放入 HTML 输入时遇到问题：

```
$('#button-validate').live('click', function() {
    $.ajax({
        url: 'index.php?route=sale/customer/addressValidation&token=<?php echo $token; ?>',
        type: 'post',
        dataType: 'html',
        data: 'shipping_address_1=' + encodeURIComponent($('input[name=\'address[1][address_1]\']').val()) + '&shipping_address_2=' + encodeURIComponent($('input[name=\'address[1][address_2]\']').val()) + '&shipping_city=' + encodeURIComponent($('input[name=\'address[1][city]\']').val()) + '&shipping_region=' + encodeURIComponent($('select[name=\'address[1][zone_id]\']').val()) + '&shipping_zip=' +  encodeURIComponent($('input[name=\'address[1][postcode]\']').val()),
        beforeSend: function() {
            $('.success, .warning').remove();
            $('#button-history').attr('disabled', true);
            $('#history').prepend('<div class="attention"><img src="view/image/loading.gif" alt="" /> Validating</div>');
        },
        complete: function() {
            $('#button-history').attr('disabled', false);
            $('.attention').remove();
        },
        success: function(data) {
            if (data['error']) {
                $('div#warning').attr('display', false);
                $('div#warning').after('<div class="warning" style="display: none;">' + json['error'] + '</div>');

            }else{
            $('#shipping_address_1').val(html['shipping_address_1']);
            $('#shipping_address_2').val(html['shipping_address_2']);
            $('#shipping_city').val(html['shipping_city']);
            $('#shipping_zip').val(html['shipping_zip']);
            }
        }
    });
}); 
```

JSON 数组在 Firebug 中如下所示：

```
[{"shipping_address_1":"21497 CROZIER AVE","shipping_address_2":"","shipping_city":"BOCA RATON","shipping_region":"FL","shipping_zip":"33428"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:23:12.910

首先，它不返回 JSON 对象，正如您在此处定义的那样：

```
dataType: 'html', 
```

将其更改为：

```
dataType: 'json', 
```

其次，您正在到处混合结果对象：

```
success: function(data) { 
```

您的所有交互都应该是`data.something`并且您`json['arr']`在这里和`html['string']`那里使用。

首先纠正这些，然后看看是否清楚如何继续。如果没有，我可以更新这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:20:33.700

要访问`shipping_address_1`做：

```
data[0].shipping_address_1  OR data[0]["shipping_address_1"] ; 
```

还有，什么是`html['shipping_address_1']`？您的 JSON 对象在数据中，而不是在 HTML var 中。尝试这个：

```
$('#shipping_address_1').val(data[0]["shipping_address_1"]);
$('#shipping_address_2').val(data[0]["shipping_address_2"]);
$('#shipping_city').val(data[0]["shipping_city"]);
$('#shipping_zip').val(data[0]["shipping_zip"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:34:12.053

您可以使用点符号或括号来访问信息：

使用点符号：

```
data[0].shipping_address_1 
```

使用括号表示法：

```
data[0]['shipping_address_1'] 
```

我建议尽可能使用点表示法，但如果您要迭代固定数量的值，我建议使用第二种方法：

```
for(var i=1; i<6; i++) {
    $('#shipping_address_' + i).val(data[0]["shipping_address_"+ i ]);   
} 
```

记住：点符号写起来更快，也更容易阅读。另一方面，方括号表示法允许访问包含特殊字符的属性和使用变量选择属性，如上面的示例所示。

# ruby-on-rails - Rails 3+ 粘合（合并）实例

> ID：12699825
> 
> 赞同：0
> 
> 时间：2012-10-02T23:18:52.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

所以这里是例子

```
类Foos
 has_many :酒吧
 归属地：城市
结尾

类酒吧
 属于_to :foo
结尾

```

所以，如果我有一个名为“Foo1”的 Foo 实例，它属于编号为 1 的城市，并且有另一个名为“Foo1”的 Foo 实例也属于第 1 号城市，如果它们都对一个 Foo 实例有不同的条，我该如何粘贴它将包括所有的酒吧？

谢谢。最好的猪尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:58:07.697

```
foo1, foo2 = Foo.where(:name => "Foo1", :city_id => some_id).limit(2)
foo1.bars << foo2.bars
foo2.bars = []
foo2.delete 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:09:51.933

建立了有助于帮助的 Active Record 合并库

```
 module Merge

      # True if self is safe to merge with +object+, ie they are more or less equal.
      # Default implementation compares all attributes except id and metadata.
      # Can be overridden in specific models that have a neater way of comparison.
      def merge_equal?(object)
        object.instance_of?(self.class) and merge_attributes == object.merge_attributes
      end

      MERGE_INDIFFERENT_ATTRIBUTES = %w(id created_at updated_at).freeze
      MERGE_EXCLUDE_ASSOCIATIONS = [].freeze

      # Attribute hash used for comparison.
      def merge_attributes
        merge_attribute_names.inject({}) do |attrs, name|
          attrs[name] = self[name]
          attrs
        end
      end

      # Names of the attributes that should be merged.
      def merge_attribute_names
        attribute_names - MERGE_INDIFFERENT_ATTRIBUTES
      end

      # Names of associations excluded from the merge. 
      # Override if the model has multiple scoped associations,
      # that can all be retrieved by a single has_many association.
      def merge_exclude_associations
        MERGE_EXCLUDE_ASSOCIATIONS
      end

      # Merge this object with the given +objects+. 
      # This object will serve as the master,
      # blank attributes will be taken from the given objects, in order.
      # All associations to +objects+ will be assigned to +self+.
      def merge!(*objects)
        transaction do
          merge_attributes!(*objects)
          merge_association_reflections.each do |r|
            local = send(r.name)
            objects.each do |object|
              if r.macro == :has_one
                other = object.send(r.name)
                if local and other
                  local.merge!(other)
                elsif other
                  send("#{r.name}=", other)
                end
              else
                other = object.send(r.name) - local
                # May be better to compare without the primary key attribute instead of setting it.
                other.each {|o| o[r.foreign_key] = self.id}
                other.reject! {|o| local.any? {|l| merge_if_equal(l,o) }}
                local << other
              end
            end
          end
          objects.each {|o| o.reload and o.destroy unless o.new_record?}
        end
      end

      def merge_attributes!(*objects)
        blank_attributes = merge_attribute_names.select {|att| self[att].blank?}
        until blank_attributes.empty? or objects.empty?
          object = objects.shift
          blank_attributes.reject! do |att|
            if val = object[att] and not val.blank?
              self[att] = val
            end
          end
        end
        save!
      end

      private

      def merge_association_reflections
        self.class.reflect_on_all_associations.select do |r| 
          [:has_many, :has_one, :has_and_belongs_to_many].include?(r.macro) and 
          not r.options[:through] and 
          not merge_exclude_associations.include?(r.name.to_sym)
        end
      end

      def merge_if_equal(master, object)
        if master.merge_equal?(object)
          master.merge!(object) ; true
        end
      end

    end

    ActiveRecord::Base.class_eval { include Merge }

    # Compatibility with ActiveRecord 2.x
    class ActiveRecord::Reflection::AssociationReflection
      alias :foreign_key :primary_key_name unless method_defined? :foreign_key
    end 
```

# python - Python：块字符不会打印

> ID：12699827
> 
> 赞同：6
> 
> 时间：2012-10-02T23:19:03.670
> 
> 标签：python, character-encoding, ascii, block, non-ascii-characters

在 IDLE 中，`print(chr(219))`（219 的块字符）输出“Û”。

有没有办法让它输出块字符呢？

这实际上可能是某种计算机范围的问题，因为我似乎无法从任何地方打印块字符，将其从charmap复制到**任何**文本框中只会导致Û。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T23:24:40.133

使用正确的字符集。

```
3>> print(bytes((219,)).decode('cp437'))
█
3>> ord(bytes((219,)).decode('cp437'))
9608
3>> hex(9608)
'0x2588'
3>> print('\u2588')
█ 
```

[Unicode 字符 'FULL BLOCK' (U+2588)](http://www.fileformat.info/info/unicode/char/2588/index.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:28:40.560

您的 python shell 可能使用 ISO-8859-1 或 Unicode，而不是与字符映射相同的字符集。

chr(219) 也是 U+00DB，可能是 Unicode 字符 Û。我不知道您使用的是什么字符集，但在 Unicode 字符集中的早期没有任何符号字符。

# visual-studio-2010 - 我怎样才能解除我重新安排的项目的困惑？

> ID：12699828
> 
> 赞同：1
> 
> 时间：2012-10-02T23:19:08.620
> 
> 标签：visual-studio-2010, svn, tortoisesvn, explorer

使用以下步骤（取自“ *Subversion 实用指南*”的第 39 页）：

```
* Using Windows Explorer, right-drag the file to a different location in your working copy, and choose "SVN Move versioned item(s) here."

* Commit your changes by right-clicking the base of your working copy and choosing SVN Commit... 
```

...我将几个文件移动到我在项目中创建的新文件夹（类、数据、表单）中。

然后当我在 Visual Studio 中重新加载项目并捣碎 F6 时，我得到了其中五个错误消息：

*无法为“ChosenPlatypi.resx”创建清单资源名称。找不到文件“C:\duckBills\duckBills\ChosenPlatypi.cs”。*

所以我看到我在资源管理器中移动的所有文件都不在解决方案资源管理器的文件夹中，而是在他们以前的位置（项目正下方），但现在有一个红色的 x 和一个黄色的警告图标他们。

所以我尝试将它们拖到我创建的文件夹中（我已经在 Windows 资源管理器中完成了），但这给了我错误，“*找不到源文件 ChosenPlatypi.cs* ”

## 更新

所以我决定通过撤消更改来“重新开始”（在 Windows 资源管理器中，右键单击 base/trunk 目录，选择 Tortoise SVN | 显示日志，突出显示造成混乱的更改，然后选择“从该版本恢复更改。 "

Visual Studio 中的解决方案现在再次编译，但是我之前移动到我创建的新子文件夹中的文件被涂上了黄色加号，在这些文件下方，红色风车（或...????）图标/字形。

我创建的其中一个子文件夹（Forms）仍然存在，我复制到其中的一个文件集（*.cs、*.Designer.cs 和 *.resx）仍然存在。我不知道，如果有的话，我对文件移动做了不同的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:45:35.000

您是否移动了 Apache Subversion 存储库或文件系统（即磁盘上）中的文件？如果您要移动或重命名文件，请在存储库中执行此操作，然后更新您的本地工作副本。

如果您在文件系统上移动了它们，**“红色 X”**图标表示文件已被删除，**“黄色警告图标”**表示您应该解决的冲突。有关更多信息，请参阅[Tortoise SVN 资源管理器集成](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-wcstatus.html#tsvn-dug-wcstatus-dia-1)。

备份任何重要更改后，解决所有冲突，然后为所有受影响的文件夹提交更改。请记住，*历史记录仍然存在*于存储库中，如果需要，您可以更新到较早的版本。

如果您打算在 Visual Studio 解决方案中重命名或移动文件，请考虑使用 Visual Studio 插件（如[VisualSVN](http://www.visualsvn.com/visualsvn/)或[AnkhSVN](http://ankhsvn.open.collab.net/)）在 IDE 中简化此操作。将它们移动到解决方案资源管理器中将更加轻松且轻松。

# c++ - 删除顺序、NULL 指针或内存泄漏

> ID：12699832
> 
> 赞同：1
> 
> 时间：2012-10-02T23:19:23.313
> 
> 标签：c++, memory, memory-management

我有以下情况：

```
Foo1 foo1* = new Foo1(...);
Foo2 foo2* = new Foo2(foo1, ...); 
```

或者

```
Foo1 foo1(...);
Foo2 foo2(foo1, ...); 
```

我需要删除 Foo1 和 Foo2。如果我理解正确，我应该按照分配的相反顺序释放内存。所以我应该这样做：

```
delete(foo2);
delete(foo1); 
```

但是我不能这样做，因为 foo1 在 foo2 的析构函数中被设置为 NULL。因此，当我尝试删除 foo2 时，它会尝试删除 NULL 引用并触发断言。有没有解决的办法？这里最好的解决方案是让我仍然将内存分配给堆栈，但这绝对不是必需的。

* * *

## 编辑：

请参阅此线程：[shared_ptr 会自动释放内存吗？](https://stackoverflow.com/questions/12713004/will-a-shared-ptr-automatically-free-up-memory)

感谢您的回复。我（显然）错了问题所在。我需要在这里使用 shared_ptr 因为我无法更改 API。

```
Foo1 *foo1 = new Foo1(...);
shared_ptr<Foo2> foo2(foo1); 
```

这里的 shared_ptr 是否会处理释放 foo1 使用的内存？如果我理解正确，我不应该在 foo1 上调用 delete 对吗？

我将作为一个单独的问题提出并链接到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T23:21:50.633

首先，您只需要`delete`使用`new`. 一般来说，由`new`. 但是，可能存在构造函数/析构函数依赖关系，例如如果 foo2 在 foo2 的析构函数中调用 foo1 上的函数。在这种情况下，破坏顺序很重要。

其次，即使 foo2 中的 foo1 指针设置为 null，那也只是 foo2 中保存的指针的本地副本。它不会影响指针的其他副本。在 foo2 中将 foo1 设置为 null 并不是一个坏主意，因为它表明不应再使用该对象，但这与调用其析构函数或`free`ing 它不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T23:21:28.287

> 我应该按照分配的相反顺序释放内存。

呃，不适用于通用分配器，例如为 and 供电的`new`分配器`delete`。

> 但是我不能这样做，因为 foo1 在 foo2 的析构函数中被设置为 NULL。

这是一大堆WTF。你到底为什么会有这样的计划？甚至不要考虑`delete`你没有的对象`new`。

只需像理智的人一样使用智能指针，然后忘记所有这些。

# notepad++ - Notepad++ 中缺少 TextFX 菜单

> ID：12699833
> 
> 赞同：92
> 
> 时间：2012-10-02T10:02:49.847
> 
> 标签：notepad++

在我的 Notepad++ 安装中，菜单栏中没有 TextFX 菜单。

我该如何添加它？

里面什么都没有`Plugins -> Plugin Manager -> Show Plugin Manager -> Available tab`

* * *

我按照 Dave 在他的回答（[https://stackoverflow.com/a/12699834/362951](https://stackoverflow.com/a/12699834/362951)）中的建议重新安装，但没有任何改变。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-02T23:33:31.743

它通常应该使用[Dave 在他的回答中描述](https://stackoverflow.com/a/12699834/362951)的方法工作。（我可以确认在插件管理器的*可用*选项卡中看到“TextFX 字符” 。）

如果没有，您可以尝试[从此处](http://sourceforge.net/projects/npp-plugins/files/TextFX/TextFX%20v0.26/)下载 zip 文件并将其内容（它是一个名为 的文件`NppTextFX.dll`）放入`plugins`安装 Notepad++ 的文件夹中。我建议在 Notepad++ 本身未运行时执行此操作。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-02T10:07:04.150

**仅适用于 32 位 Notepad++**

插件 -> 插件管理器 -> 显示插件管理器 -> 可用选项卡 -> TextFX 字符 -> 安装。

它已从默认安装中删除，因为它会导致某些配置出现问题，并且没有维护者。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-10-05T19:14:09.000

对于记事本++ **64 位**：

这个插件有一个未发布的 64 位版本。[您可以从此处](https://github.com/HQJaTu/NPPTextFX/blob/VS2017-x64/bin/x64/NppTextFX.dll)下载 DLL ，将其放在*Notepad++/plugins/NppTextFX*目录下，然后重新启动 Notepad++。不过，您需要先创建*NppTextFX*目录。

根据[这个](https://github.com/HQJaTu/NPPTextFX/issues/1)GitHub 问题，可能有一些 bug 潜伏在周围。如果您遇到任何问题，请按照作者 ( [HQJaTu](https://github.com/HQJaTu) ) 的建议，随时为每个人提出 GitHub 票。根据作者的说法，这个二进制文件背后的代码可以在[这个](https://github.com/HQJaTu/NPPTextFX/tree/VS2017-x64)分支上找到。

[![在此处输入图像描述](../Images/7135c25154c5ce2e5f1dbe403d9bb840.png)](https://i.stack.imgur.com/JJf8q.jpg)

在 Notepad++ v7.5.8（64 位，构建时间：2018 年 7 月 23 日）上测试

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-09-26T16:02:02.740

许多旧的 TextFX 操作（如删除空行和排序）可在以下位置使用：

> 菜单*编辑 → 线路操作*

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-12T23:40:37.503

插件 -> 插件管理器 -> 显示插件管理器 -> 设置 -> 选中强制 HTTP 而不是 HTTPS 以下载插件列表并使用开发插件列表（可能包含未经测试、未经验证或不可安装的插件）。-> 好的。

# javascript - 使用 jQuery 垂直居中内容

> ID：12699844
> 
> 赞同：0
> 
> 时间：2012-10-02T23:20:32.677
> 
> 标签：javascript, jquery, internet-explorer, center

我正在尝试使用 jQuery 来集中我的整个内容。我已经尝试了多种已发布但没有可用的解决方案。我的主要问题是它需要与 IE6 到 IE8 一起使用。

这是链接：[http ://christopherburton.net/ie](http://christopherburton.net/ie)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:26:05.083

```
$(function() {
    var $inner = $('#container');

    $inner.css({ marginTop:  ($(window).height() / 2) - $inner.outerHeight() / 2 });
}); 
```

这将计算并设置一次正确的*margin-top*值。如果您想在有人调整浏览器窗口大小时更新它，您还需要在对象上的`resize`事件中调用该代码。`window`喜欢

```
$(function() {
    var $inner = $('#container');
    $(window).on('resize', function() {
        $inner.css({ marginTop:  ($(window).height() / 2) - $inner.outerHeight() / 2 });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:25:45.037

```
$( "elem" ).css({
    position: "absolute",
    top: "50%",
    marginTop: "-" + $( "elem" ).height() / 2 + "px"
}); 
```

应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:26:27.517

你不需要 jQuery ..

使用 CSS

将此用于 Container 类

```
#container {
position: absolute;
width: 525px;
height: 220px;
margin: 0 auto;
left: 35%;
top: 30%;
} 
```

![添加这些样式后检查此项](../Images/a833cf126b1d7f018d653c795a8aaf96.png)

# .htaccess - 使用 htaccess 重写特定文件的路径

> ID：12699847
> 
> 赞同：4
> 
> 时间：2012-10-02T23:20:49.703
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我想为具有长文件路径以及重命名文件的目录中的特定文件创建一个友好的 url。我什至不确定这是否可能。

到目前为止，我已经在 htaccess 中尝试过：

```
RewriteEngine On 
Options +FollowSymLinks
RewriteRule eventdays-2012/brochure.pdf(.+)$ sites/default/files/docs/fact_sheet-204499207.pdf 
```

...但这不起作用。

我已经进行了一些搜索，看看您可以在文件路径中屏蔽整个目录的位置，但在我的情况下，我只想在目录中创建一个文件，创建一个目录名并更改文件名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T17:44:51.433

尝试`(.+)`从您的正则表达式中删除该部分。它使*您*在`brochure.pdf`. 还要添加一些边界：

```
RewriteEngine On 
Options +FollowSymLinks
RewriteRule ^/?eventdays-2012/brochure.pdf$ /sites/default/files/docs/fact_sheet-204499207.pdf [L] 
```

# java - 运行验收测试 Play 2 - 服务器未启动

> ID：12699848
> 
> 赞同：2
> 
> 时间：2012-10-02T23:21:01.490
> 
> 标签：java, testing, playframework, playframework-2.0

我在 Play 中写了一个验收测试！2 框架，我的测试是：

```
 @Test
public void goToIndexPageAT() {
    running(testServer(3333, fakeApplication(inMemoryDatabase())), HTMLUNIT, new Callback<TestBrowser>()  {
        public void invoke(TestBrowser browser) {
            browser.goTo("http://localhost:3333/");
            assertThat(browser.url()).isEqualTo("http://localhost:3333/activities");
            assertThat(browser.$("#title").getTexts().get(0)).isEqualTo("FitTime");
        }

    });
} 
```

但是当我尝试使用命令 play test 运行这个测试时，我得到了一个错误：

```
Test acceptenceTest.ApplicationTest.goToIndexPageAT failed: Server is not started!
[error]     at scala.sys.package$.error(package.scala:27)
[error]     at play.api.test.TestServer.stop(Selenium.scala:116)
[error]     at play.test.Helpers.stop(Helpers.java:308)
[error]     at play.test.Helpers.running(Helpers.java:338)
[error]     at acceptenceTest.ApplicationTest.goToIndexPageAT(ApplicationTest.java:17) 
```

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:22:41.390

我通过将端口 3333 用于另一个应用程序然后开始测试来重现此错误消息。

也许您之前已经运行过测试，但它没有正确关闭。

您可以使用 netstat -onap |grep 3333 # 我在 Linux 中使用它来找到它的 PID

示例输出：tcp6 0 0 :::3333 :::* LISTEN 13173/java aus (0.00/0/0)

杀死进程：kill -9 13173

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:27:41.237

这里是测试：

```
@Test
public void goToIndexPageAT() {
    running(testServer(3333, fakeApplication(inMemoryDatabase())), HTMLUNIT, new Callback<TestBrowser>()  {
        public void invoke(TestBrowser browser) {
            browser.goTo("http://localhost:3333/");
            assertThat(browser.url()).isEqualTo("http://localhost:3333/activities");
            assertThat(browser.$("#title").getTexts().get(0)).isEqualTo("FitTime - Manage Your Exercises");
        }

    });
}

@Test
public void createNewActivityAT() {
     running(testServer(3333, fakeApplication(inMemoryDatabase())), HTMLUNIT, new Callback<TestBrowser>()  {
        public void invoke(TestBrowser browser) {
            browser.goTo("http://localhost:3333/");
            browser.$("#name").text("bike");
            browser.$("#time").text("10 KM");
        }

    });
} 
```

我不知道发生了什么...

# c++ - D3DXLoadSurfaceFromFile 导致程序过早关闭

> ID：12699850
> 
> 赞同：1
> 
> 时间：2012-10-02T23:21:03.947
> 
> 标签：c++, directx

我是 DirectX 和 C++ 编程的新手，但需要完成家庭作业（我已经完成了实际作业，但无法让我的代码在编译后运行）。我已经进入我的程序并发现问题出在我的`D3DXLoadSurfaceFromFile`电话上。实际代码是

```
//load m_Surface from file into newly created m_Surface
result = D3DXLoadSurfaceFromFile(
    m_Surface,
    NULL,
    NULL,
    m_BackgroundFile,
    NULL,   
    D3DX_DEFAULT,
    0,  
    NULL); 
```

“结果”在哪里：

```
 HRESULT result = m_d3ddev->CreateOffscreenPlainSurface(
    SCREENW,            //An int set to 640
    SCREENH,            //An int set to 480
    D3DFMT_X8R8G8B8,    //m_Surface's format
    D3DPOOL_DEFAULT,    //Memory pool
    &m_Surface,         //Pointer to m_Surface
    NULL);              //Reserved 
```

`m_Surface`是一个`LPDIRECT3DSURFACE9`最初设置为`NULL`。

`m_BackgroundFile`设置为“filename.bmp”（24 位位图）

并且（我认为/希望）其他一切都是不言自明的。

如果有帮助，就在我检查之前（这是导致程序关闭的检查）

```
if (!SUCCEEDED(result))
    return false; 
```

结果设置为S_OK，然后-200559767

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:41:32.103

从您的代码中，我没有看到任何错误，但是我猜您将错误的文件传递给参数 m_BackgroundFile，程序找不到该文件或该文件的格式不可接受。

# http-live-streaming - HLS - 最后一段的#EXTINF 值错误？

> ID：12699852
> 
> 赞同：0
> 
> 时间：2012-10-02T23:21:12.170
> 
> 标签：http-live-streaming

我遇到了一个问题，我的*.m38u清单文件中最后一个 TS 段的***#EXTINF**值不正确。我正在编码的视频文件最后通常有毫秒的余数（IE 1:00.245）。我的段大小是 10 秒，但是当我对文件进行编码时，它基本上是将持续时间除以 10，而 lsat 段是一个微小的毫秒段，但它的**#EXTINF**值显示 10 秒，而它应该是 0.255。这会导致问题，因为阅读此清单的玩家认为剪辑的长度是 70 秒而不是 60 秒。我的清单如下所示：

 ***```
#EXTM3U

#EXT-X-MEDIA-SEQUENCE:0

#EXT-X-TARGETDURATION:10

#EXTINF:10,

outdoor_activities_hls_layer0_2000000_0.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_1.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_2.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_3.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_4.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_5.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_6.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_7.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_8.ts

#EXTINF:10,

outdoor_activities_hls_layer0_1000000_9.ts

#EXT-X-ENDLIST 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T21:35:51.483

当通过设计使用 Rhzoet 时，无论在预设配置中设置的段长度，它都会为每个段使用该长度..即使段不是 10 秒，它也会向上取整。不过，不确定所有 HLS 编码器是否都一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:11:27.117

也许我很迟钝，但答案似乎很简单：更改您的播放列表文件以在最后一个 EXTINF 标记上具有正确的时间。***

# android - 从 Android / BouncyCastle 中的签名 X509 证书（CSR 响应）中提取证书链信息

> ID：12699853
> 
> 赞同：1
> 
> 时间：2012-10-02T23:21:15.943
> 
> 标签：android, x509certificate, bouncycastle, pkcs#12, android-keystore

**我是否能够使用 Android 或 BouncyCastle 库从 CA 签名的 X509 客户端证书中提取证书链信息？**

我有一个 Android 客户端，它从受信任的服务器接收 CA 签名的 X509 证书。我想将签名的客户端证书和我的私钥保存到 PKCS12 (.p12) 文件中。我目前通过创建一个`KeyStore`对象并添加证书和私钥来做到这一点。当我`PrivateKey`使用该`KeyStore.setKeyEntry()`方法添加客户端时，a`Certificate[] chain`是最后一个参数，目前仅包含客户端证书。**这是否会阻止我的证书可验证，因为我没有 CA 证书`Certificate[] chain`？**如果是，是否可以使用从签名中提取的信息填充证书链`X509Certificate`？

大多数示例似乎从 PEM 文件、BKS 信任库加载 CA 链，或者已经可以访问证书列表。

这是我所拥有的：

```
 X509Certificate cert;      // signed client cert
    PrivateKey pkey;           // client private key
    String password; 

    KeyStore store;
    store = KeyStore.getInstance("PKCS12", "BC");
    store.load(null, null);

    // adding the signed cert
    store.setCertificateEntry("Client certificate", cert);

    // creating the cert chain
    X509Certificate[] chain = new X509Certificate[1];
    chain[0] = cert;
    // add rest of the certs in the chain here

    // adding the private key   
    store.setKeyEntry("Client private key", pkey, password.toCharArray(), chain);

    FileOutputStream fos;
    fos = openFileOutput("clientCredentials.p12", Context.MODE_PRIVATE);
    store.store(fos, password.toCharArray());
    fos.flush();
    fos.close(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:26:58.137

CA 证书不包含在您的签名证书中。您必须从某个地方获取它们（预安装、从受信任的服务器下载等）。至于不安装完整的链，如果验证者已经可以访问必要的 CA 证书，他们总是可以验证你的最终实体证书。您打算如何使用您的密钥和证书？

顺便说一句，您要求`setCertificateEntry()`创建一个受信任的证书条目，这可能不是您想要的最终实体证书。

# java - 如何通过 EC2 SSH 隧道从本地 JAVA 程序连接到 RDS

> ID：12699854
> 
> 赞同：3
> 
> 时间：2012-10-02T23:21:16.460
> 
> 标签：java, mysql, ssh, amazon-rds, jsch

我正在尝试通过 SSH 隧道从本地 JAVA 程序连接到 RDS 数据库到 EC2 实例以进行调试。我正在尝试在 EC2 实例中建立 SSH 隧道，然后将端口转发到 RDS 数据库。这是我的代码。

```
final int localPort = 9999;
// Create BaiscDataSource.
final String databaseURL = "jdbc:mysql://localhost:" + localPort + "/database";
// SSH Tunnel.
final JSch jsch = new JSch();
jsch.addIdentity(sshKeyPath);
this.session = jsch.getSession(ec2Username, ec2Host, 22);
this.session.setTimeout(0);
this.session.setConfig("StrictHostKeyChecking", "no");
this.session.connect();
this.session.setPortForwardingL(localPort, rdsHost, 3306); 
```

请帮忙！

编辑：looply_dev 2012 年 10 月 2 日下午 4:17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-06T04:31:03.820

我使用了堡垒主机并使用了本地端口转发。

```
ssh -i ec2key.pem -N -L 3306:my-dev-db.cluster-cdnxxxxxxxxxx.ap-southeast-1.rds.amazonaws.com:3306 ec2-user@54.253.196.193 
```

***54.253.196.193***是 bastian 主机的 IP。

最后，我使用 AWS Secrets Manager 连接到 localhost:3306。但是您也应该能够使用数据库用户名和密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T18:56:08.573

我得到了你所做的工作，但没有使用 jcraft jsch 库。我能够在单独的线程上从我的 java 应用程序内部执行终端命令。这是终端命令：

```
ssh -i /path/to/pem/ -L -N localport:remotehost:remoteport remoteuser@remotetunnelserver.com 
```

然后在你的 java jdbc 适配器代码中连接`127.0.0.1`上面的本地端口：

```
jdbc.mysql://127.0.0.1:1345/databasename/user=user&password=pass 
```

我认为的问题是命令中的 -N 选项只创建了一个无法通过隧道执行远程命令的隧道，这在 jcraft 的 jsch 库中默认为 true，我无法将默认设置为 false 来执行远程命令。

# javascript - 使用 XMLHttpRequest 通过 Google 的 Shortener api 缩短 url

> ID：12699859
> 
> 赞同：0
> 
> 时间：2012-10-02T23:21:42.093
> 
> 标签：javascript, xmlhttprequest, goo.gl

我已经尝试通过 jQuery/ajax 执行此操作，但它不起作用，所以我想我会退回到正常的 XMLHttpRequest。不幸的是，它仍然无法正常工作（同样的问题）。

这是[Google 的 POST 请求](https://developers.google.com/url-shortener/v1/getting_started#shorten)的文档。这是我的代码：

```
var xmlHttp = new XMLHttpRequest();

xmlHttp.open("POST", "https://www.googleapis.com/urlshortener/v1/url", true);
xmlHttp.setRequestHeader("Content-Type", "application/json");

var url = "longUrl=" + encodeURIComponent("http://www.google.com/");
console.log(url);

xmlHttp.send(url); 
```

“url”被发送到控制台：longUrl=http%3A%2F%2Fwww.google.com%2F

回应是：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "parseError",
    "message": "Parse Error"
   }
  ],
  "code": 400,
  "message": "Parse Error"
 }
} 
```

有谁看到我做错了什么？

提前致谢！

编辑：为@Greg 添加 - 这样您就可以看到我在使用 jQuery*时*遵循 Google 的规范 - 这会导致完全相同的错误。

```
$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    data: { "longUrl": "http://www.google.com/" },
    url: "https://www.googleapis.com/urlshortener/v1/url",
    success: function(data) {
        //do something with the shortened url json data
        //console.log(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:58:29.393

这是解决方案（@Greg 的评论为我指明了正确的方向）。

```
var xmlHttp = new XMLHttpRequest();

xmlHttp.open("POST", "https://www.googleapis.com/urlshortener/v1/url", true);
xmlHttp.setRequestHeader("Content-Type", "application/json; charset=utf-8");

var req = new Object();
req.longUrl = "http://www.google.com/";

var jsonStr = JSON.stringify(req);

xmlHttp.send(jsonStr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:24:36.287

您没有遵循谷歌提供的规范。您应该像这样发送一个 JSON 对象：

```
{"longUrl": "http://www.google.com/"} 
```

# c++ - 什么文件格式适合记录/配置文件？

> ID：12699863
> 
> 赞同：3
> 
> 时间：2012-10-02T23:22:22.147
> 
> 标签：c++, logging, configuration-files

我在超级计算机上进行大型模拟。由于这些模拟运行起来很昂贵，我需要不时地将结果写入磁盘。此外，大多数超级计算机的最长运行时间为 1 或 2 天，之后您的工作将自动终止。因此，我需要能够向我的应用程序添加“恢复”功能。

对于大型数据集，我使用“原始”二进制文件，因为这是将信息转储到磁盘的最快速度。稍后，我可以将这些二进制文件转换为可以在普通桌面上进行后处理的格式。但是，我还需要在代码运行时记录一些关于模拟的参数信息，这样我就不会遇到任何问题来确定我的结果对应的参数集。

此外，我需要一个配置文件，以便可以在我开始/恢复作业时设置参数。我想要做的是将日志记录/配置文件合并到一个步骤中，以便代码可以将所有需要的信息记录到配置文件中以供下一次恢复。我还需要这个文件易于人类阅读、分层，并且在解析库方面有很好的支持。我主要关心的是我正在开发的语言，即，`C++`但也可以得到支持`python`。

到目前为止，我正在`xml`使用中这样做，`boost::property_tree`但我不确定这是最好的方法。具体来说，我的`xml`文件似乎有点太冗长了！我可以使用的文件格式有更好的选择吗？图书馆支持怎么样？我更喜欢仅包含头文件的库，以防止更改构建结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:49:29.290

*对于 Python无法*处理的标准文件类型，您将处于非常独特的境地——因此，只要您坚持标准（即 xml、json、ini、...），与 python 一起工作的要求永远不会成为一个问题。

正如其他人所说，JSON 和 XML 是您的最佳选择。行业标准永远不会出错。更好的文档，更广泛的测试，更好的代码可读性——从听起来，XML 和 JSON 都可以做你想做的事情，并且编码/解码它们是可比的。如果文件大小是一个问题，我相信未压缩的形式，JSON 更轻量级 - 如果不是，只需选择对您来说更易于阅读的文件类型。

# c - 在限制内分解数字的最佳方法

> ID：12699867
> 
> 赞同：0
> 
> 时间：2012-10-02T23:22:45.920
> 
> 标签：c, algorithm, numbers, factors

我有一段代码来计算一个数字的因数。然后使用这些因素对控制器的二维 (m * N) 进行编程。控制器每 N 个字节生成一个中断，因此在控制器限制范围内选择最大的 N 是有益的。在下面的代码片段中，我将此限制称为 MAX_DIM。

下面列出的代码是功能性的，并计算上述因素。我的问题是关于我目前没有以最佳方式处理的极端案例。

虽然不太可能，但该函数需要处理一个质数且大于 MAX_DIM 的输入值；在这种情况下，它应该返回一个错误。在下面的代码片段中，我通过检查一个因素 (m) 来处理这个问题，直到它达到一个任意选择的值，此时我确定找到一个因素不再可行。虽然这在实践中有效，但我几乎可以肯定，必须有一种数学和计算上更优雅的方法来检测这种情况。寻找一些指向算法的指针，我可以适应这种情况。

```
m = tr_size/MAX_DIM;  // sets up a minimum value for m

if (m == 0)
{
    N = tr_size;
    m = 1;
    return 0;
} 
else
{
    /* TODO: check for m <= 128 ensures a mechanism to quit if 
     * tr_size is a prime number. Is there a better way to do this?
     */

    while ((((tr_size/m) > MAX_DIM) || (tr_size % m) != 0) && (m <=128))
    {
        m++;        
    }

    if (m > 128) 
    {
        return 1;  // error: cannot compute factors

    }

    N = tr_size/m;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:31:24.660

在检查因数时，您只需检查小于或等于被因数的平方根的值。任何大于平方根的因子都会有一个小于平方根的对应因子。

# database - 基本数据库设计 - 可选参与

> ID：12699868
> 
> 赞同：1
> 
> 时间：2012-10-02T23:22:46.460
> 
> 标签：database, database-design, relational-database, visio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:06:52.467

您正在以正确的方式进行，或者至少朝着正确的方向前进，但最终结果是错误的（尽管图表顶行中的实体或多或少是正确的）

注意短语“*对于每个任务，都有一个......任务类型*”和“*对于所有类型为“包装”的任务，都有一个装箱单*”。这表明“打包任务”是一种任务，而不是一种分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:59:09.927

在您以任何有意义的方式完成这项家庭作业之前，您和您的老师需要就 ERD 是表达**数据分析**还是**数据库设计**达成一致。在之前关于 ERD 的问题中，我一直认为 ERD 是用于数据分析的，而数据库设计应该以其他一些图表方案来表达，例如关系示意图。

但是，您的老师很可能与我的看法不同。大量专业人员使用 ERD 作为关系示意图的替代方案，并在 ERD 中表达数据库设计。您的解决方案对我来说看起来像是设计，而不是分析。

如果您的老师不区分分析和设计（有些不区分），那么您需要学习一些基本知识，而您的老师将无法教给您。您需要区分问题的特征和提出的问题解决方案的特征。如果你不做出这种区分，你最终会陷入几个陷阱之一。

最常见的陷阱是对错误的问题提出正确的解决方案。我已经看到这种情况在现场一次又一次地发生。

第二个最常见的陷阱是更改问题定义以使问题更容易解决。有时这是故意这样做的，以便在资源有限的情况下满足最后期限。但是当它无意中完成时，就会出现许多问题。

第三个陷阱是所谓的“在盒子里思考”。在这个陷阱中，将是求解器添加了一个约束，该约束不在原始问题定义中，而是第一个错误解决方案的一个特征。“盒子”是提议的（错误的）解决方案的一个特征，而不是最初陈述的问题的一个特征。但是一旦它被接受为问题的一部分，问题就变得无法解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T15:51:32.997

我认为应该是这样的

![](../Images/4472b1dd4450f9226a891867d68f5eee.png)

A只有五个表 指定的，我的东西打包任务，就是任务表。

# java - 在 Eclipse 中，如何删除用于显示透视图的 Debug 键盘快捷键？

> ID：12699870
> 
> 赞同：0
> 
> 时间：2012-10-02T23:23:07.207
> 
> 标签：java, eclipse, keyboard-shortcuts

出于某种原因，调试透视图的键盘快捷键绑定到与我的“开放资源”相同的快捷键 ( `Command`++ `Shift`) `R`。我只希望它用于开放资源。当我在首选项的键盘快捷键部分搜索“调试”时，我似乎找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:30:01.070

键首选项中的命令称为“显示透视图（调试）”。如果这在您的版本中不可见，我还建议查看关键首选项中的过滤器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T23:26:16.970

在 File -> Preferences 下，General -> Keys 下的弹出窗口中是存储绑定的位置。

# php - 使用未定义的常量？

> ID：12699874
> 
> 赞同：0
> 
> 时间：2012-10-02T23:23:33.400
> 
> 标签：php, curl

我收到以下错误消息：

```
application/libraries/GoogleMapAPI.php [2515]:
Use of undefined constant ‘allow_url_fopen’ - assumed '‘allow_url_fopen’' 
```

我不是编码员，不确定这是一个简单的解决方法还是我需要一些认真的帮助。有没有人认识到这个问题，如果是，我的下一步是什么？

这个错误是在我做一些谷歌研究后添加一些代码之后出现的：

```
function fetchURL($url) {
if (ini_get(‘allow_url_fopen’)) {

return file_get_contents($url);

} elseif (function_exists(‘curl_init’)) {

$curlObj = curl_init($url);

curl_setopt($curlObj, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($curlObj, CURLOPT_HEADER, 0);

$content = curl_exec($curlObj);

curl_close($curlObj);

return $content;

} else {

die(‘Error’);

}

} 
```

非常欢迎任何帮助指针

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T23:24:49.267

# c++ - C++ 输出流浮点调用链

> ID：12699876
> 
> 赞同：2
> 
> 时间：2012-10-02T23:23:45.597
> 
> 标签：c++, iostream

在 C++ 中，当我这样做时

```
std::cout << 1.2; 
```

被调用以实际显示数字的实际函数链是什么？我意识到这是特定于编译器的，但我对 Gnu libstdc++ 实现特别感兴趣。

在 C 中，调用 printf 代表 vfprintf，它通过跳转表调用 glibc 中的 __printf_fp。我正在寻找纯 C++ 设置中的类似链。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:28:47.683

显然，它将首先调用[ostream::operator<<](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/)但除此之外它可能是特定于库的。回答这个问题的最佳方法是调试代码并在功能出现时跟踪它们。这不仅会告诉您调用了哪些函数，还会告诉您发生的边缘情况和错误处理。查看代码可能会有所帮助，但它可能很复杂。

使用此代码：

```
std::cout << 1.2f; 
```

...这是 Visual Studio 2012 中没有噪音的情况：

1.  [运算符<<(float _Val)](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/) (std::basic_ostream<_Elem, _Traits>)
    1.  [将状态](http://www.cplusplus.com/reference/iostream/ios_base/iostate/)变量初始化为[good](http://www.cplusplus.com/reference/iostream/ios/good/)。
    2.  调用[use_facet<_Facet>(const locale & _Loc)](http://www.cplusplus.com/reference/std/locale/use_facet/) (std) 以获取 num_put facet。
    3.  调用[num_put(_OutIt _Dest, ios_base& _Iosbase, _Elem _Fill, double _Val)](http://www.cplusplus.com/reference/std/locale/num_put/put/) (std) 以使用本地特定格式将浮点数写入输出流（转换为双精度）。在内部，这是：
        1.  检查[精度](http://www.cplusplus.com/reference/iostream/ios_base/precision/)，例如[固定](http://www.cplusplus.com/reference/iostream/manipulators/fixed/)，以查看默认格式是否已被修改。
        2.  格式化数字并将其作为字符写入流使用的当前迭代器的输出。
    4.  如果操作失败，则将状态变量设置为[bad 。](http://www.cplusplus.com/reference/iostream/ios/bad/)
    5.  调用[setstate](http://www.cplusplus.com/reference/iostream/ios/setstate/)到状态。

所以大部分工作实际上是在 num_put 方面完成的，它写入输出流的迭代器。

# arrays - find('all') 仅检索 'id' 字段

> ID：12699878
> 
> 赞同：0
> 
> 时间：2012-10-02T23:24:20.513
> 
> 标签：arrays, find, cakephp-1.3

我在桌子上敲我的头。我只有两个数据字段，但我正在使用的这个旧版本的蛋糕（1.3）只将“id”字段拉入数组，而忽略另一个字段（“link_txt”）。我的模型有效，因为这适用于其他控制器。我正在尝试填充 xml 站点地图，但它..只是...不起作用。（当我在浏览器中查看它时，我的站点地图也没有显示文档树，如果我查看它的源，它会显示它....！！！！如果有人认为这两者相关，我[早些时候在这里发布了一个关于它](https://stackoverflow.com/questions/12684795/unable-to-write-xml-sitemap-in-cakephp)的问题）我不知道我做错了什么！

```
<?php 
class SitemapsController extends AppController{ 

var $name = 'Sitemaps'; 
var $uses = array('Category', 'Listing', 'Article', 'Location'); 
var $helpers = array('Time', 'xml'); 
var $components = array('RequestHandler'); 

function index (){  
    Configure::write ('debug', 2);
    $this->RequestHandler->respondAs('xml'); 
    $this->viewPath = 'xml';
    $this->layoutPath = 'xml';
    $a=$this->Article->find('all');
    $this->set('static', $a);

}
} 
?> 
```

如果我`print_r($static)`在我的 index.ctp 文件中，我会得到我的 'id' 数据，而不是我的 'link_txt' 字段数据。

```
Array ( [0] => Array ( [Article] => Array ( [id] => 3 ) ) [1] => Array ( [Article] => Array ( [id] => 4 ) ) ) 
```

如果它是我刚刚在讨论的东西，我会很高兴的。有人看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T03:26:17.547

$this->Article->find('all', **Null** );

# c++ - 右值和左值引用的重载函数

> ID：12699879
> 
> 赞同：2
> 
> 时间：2012-10-02T23:24:22.497
> 
> 标签：c++, c++11, rvalue-reference

假设我有一些模板类

```
template <typename T>
struct Dummy {
    // ...
}; 
```

而且我想重载一个函数'foo'，以便它接受它的左值或右值引用。我可以使用以下一些`IsDummy`特征来做到这一点：

```
template <typename A>
std::enable_if<IsDummy<A>::value, void>
foo(A &&dummy)
{
    // ....
} 
```

IIRC 在一些 C++11 草案中是合法的

```
template <typename A>
foo(Dummy<A> &&dummy)
{
    // ....
} 
```

将同时接受左值和值引用。

现在我的问题：

*   a) 在某些草案中允许这样做是否正确？

*   b) 为什么要删除此功能/错误？我想我在某处读到这是由于与“概念”的冲突。

但是，我再也找不到合适的参考资料了。有人有更好的记忆或书签吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:45:06.407

> a) 在某些草案中允许这样做是否正确？

是的，它在所谓的“右值引用 1.0”中是允许的（参见[N2118](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2118.html)）。

> b) 为什么要删除此功能/错误？我想我在某处读到这是由于与“概念”的冲突。

它被删除是因为将右值引用绑定到左值可能会导致在存在概念时违反“类型安全重载原则”：

> 每个函数都必须是独立的类型安全的，而不考虑它是如何被重载的。

例如，如果我们定义以下重载：

```
template< CopyConstructible T > void f( T const & t ); // #1
template< MoveConstructible T > void f( T && t );      // #2 
```

`f`然后使用可复制的左值调用将选择 #1。但是，如果 T 是不可复制的类型（例如`std::unique_ptr`），则 #1 不是可行的重载，因此编译器必须选择 #2，可能会在没有警告的情况下从左值窃取资源。

有关更多详细信息，请参阅“右值引用 2.0”（[N2844](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2844.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:33:14.430

从 Andrew 的回答中获得信息，我还找到了一些关于该主题的非常[易读的文章](http://blogs.msdn.com/b/vcblog/archive/2009/02/03/rvalue-references-c-0x-features-in-vc10-part-2.aspx)（rvalue-/lvalue-references），其中还提供了有关事情在这方面如何演变的参考。

# r - 在 R 中使用 TVM（货币时间价值）计算统一流的 FV（未来价值）

> ID：12699891
> 
> 赞同：0
> 
> 时间：2012-10-02T23:25:24.460
> 
> 标签：r, finance

我很困惑。我正在处理的问题（在 R 中使用金融包）是，

问题：Carol 必须从现在开始 1 年以每年 5.5% 的利率每年存入多少钱才能在 7 年后积累 $6000？

我的正确解决方案是：

```
> 6000/usfv(5.5,7)
[1] 725.7865 
```

我认为这也应该有效......但没有：

```
> tvm(i=5.5,n=7,fv=-6000,pmt=NA,pyr=1)

Time Value of Money model

   I% #N PV    FV    PMT Days #Adv P/YR C/YR
1 5.5  7  0 -6000 687.95  360    0    1    1 
```

我得到了不同的 PMT 金额。有谁知道为什么我会有所作为

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:25:57.157

尝试手动检查数字并使用索引帮助我了解发生了什么：

```
p1 <- 6000 / usfv(5.5,7) 
```

符合预期

```
sum(p1*(1 + 5.5/100)^(0:6))
# [1] 6000 
```

为了

```
p2 <- tvm(i=5.5,n=7,fv=-6000,pmt=NA,pyr=1)[1,"PMT"] 
```

你必须改变现金流的时间才能得到

```
sum(p2*(1 + 5.5/100)^(1:7))
# [1] 6000 
```

换句话说，`usfv`假设现金流在时间 1 到 7，而`tvm`假设现金流在时间 0 到 6（并且两个函数都假设未来值在时间 7。）

PS：在测试我的直觉时，我还发现这两个函数都不能在零利率下工作（一个返回 NaN，另一个错误输出。）这些在无用的文档之上：我不推荐那个包......

# entity-framework - 多对多关系检测变化

> ID：12699892
> 
> 赞同：5
> 
> 时间：2012-10-02T23:25:25.437
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我试图理解为什么 DbContext 没有检测到多对多关系的变化。这是我在模型配置中设置的：

```
this.Configuration.ValidateOnSaveEnabled = false;
this.Configuration.ProxyCreationEnabled = false;
this.Configuration.LazyLoadingEnabled = false; 
```

这是测试代码：

```
var book = Context.Set<Book>().Where(b => b.Id == 1).Single();
var author = Context.Set<Author>().Where(a => a.Id == 2).Single();

book.Authors.Add(author); 
```

如果我检查更改，它不会报告任何：

```
// returns false
_context.ChangeTracker.Entries().Any(e => e.State == EntityState.Added || e.State == EntityState.Modified || e.State == EntityState.Deleted); 
```

如果我保存更改，更改将正确更新到数据库。

```
// 1 record added to BookAuthors table
_context.SaveChanges(); 
```

为什么 DbContext 不跟踪多对多的更改？不涉及WCF，这是直接连接Sql server。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T08:54:15.280

`DbContext`不跟踪更改，因为`ChangeTracker`不包含所有信息。它只能为您提供实体状态，但不能提供独立关联的状态（即多对多和一些一对多关系的状态）。如果您想获得多对多关系的状态，您必须按照@Mark Oreta 提供的链接中的说明获取`ObjectContext`和询问。`ObjectStateManager`

# c - GCC 发现错误的包括

> ID：12699896
> 
> 赞同：0
> 
> 时间：2012-10-02T23:25:46.127
> 
> 标签：c, gcc, include-path

我正在尝试构建一个依赖于 Apache httpd 的项目。不幸的是，我已经并且需要将 httpd 源放在 /usr/includes 中，而该项目在`$(project)/common/includes`. 我希望 gcc 从项目目录而不是 /usr/includes 中获取头文件，但恐怕即使我成功了，我也可能会错过 /usr/includes 中的其他重要头文件。

关于如何做到这一点的任何想法？

编辑：Make 文件的相关部分如下所示：

```
CFLAGS = -Wall -O3 -fPIC -fomit-frame-pointer -I vm -D_GNU_SOURCE -I libs/common -D_64BITS
EXTFLAGS = -pthread
MAKESO = $(CC) -shared #-WBsymbolic

# later ...

all: createbin libneko neko std compiler libs

neko: bin/neko

# later ...

bin/neko: $(VM_OBJECTS)
    ${CC} ${CFLAGS} ${EXTFLAGS} -o $@ ${VM_OBJECTS} ${NEKOVM_FLAGS}
    strip bin/neko 
```

在执行这个“食谱”时的某个地方，我得到：

```
In file included from /usr/include/httpd/httpd.h:43:0,
                 from mod_neko.h:20,
                 from mod_neko.c:17:
/usr/include/httpd/ap_config.h:25:17: fatal error: apr.h: No such file or directory 
```

但它不应该使用 /usr/include/httpd/httpd.h 因为有`<project> /libs/include/apache2/httpd.h`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:24:24.843

这里关于[gcc 的信息包括搜索路径](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)

> GCC 在几个不同的地方寻找标题。在一个普通的 Unix 系统上，如果你没有另外指示它，它会寻找用 #include 请求的头文件：

```
 /usr/local/include
 libdir/gcc/target/version/include
 /usr/target/include
 /usr/include 
```

您可以使用 -Idir 命令行选项添加到此列表。**在默认目录之前，按从左到右的顺序搜索所有由 -I 命名的目录**。

# c++ - C++：运行算法一段时间（没有计时）

> ID：12699905
> 
> 赞同：0
> 
> 时间：2012-10-02T23:26:38.873
> 
> 标签：c++, timing

我在想类似的东西：

```
// Runs algorithm() n times during an amount of seconds.
void run(int seconds) {
  clock_t start = clock();
  clock_t current = start;
  while(double (current - start) / CLOCKS_PER_SEC <= seconds) {
    algorithm();
    current = clock();
  }   
} 
```

我选择`clock()`了`time()`在进程休眠时避免计费时间。我想知道是否有更好的方法来实现这一点，而不使用*chrono*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:35:51.620

STLSoft 有一个在 UNIX 和 windows 平台上工作的[performance_counter 。](http://www.stlsoft.org/doc-1.9/classplatformstl_1_1performance__counter.html)该库只是标题，只需要一个简单的包含：

```
#include <platformstl/performance/performance_counter.hpp>

void run(int seconds) {
  platformstl::performance_counter pc;
  platformstl::performance_counter::interval_type current = 0;
  pc.start();
  while ((current / 1000) <= seconds){
    algorithm();
    current += pc.stop_get_milliseconds_and_restart();
  }
} 
```

您还可以查看有关制作自己的提示的来源。

# android - Android 许可的 IllegalArgumentException 错误

> ID：12699908
> 
> 赞同：2
> 
> 时间：2012-10-02T23:26:46.797
> 
> 标签：android, android-lvl

我正在尝试一个示例应用程序来在 Android 中配置 Google License Service LVL

按照[此处找到的说明进行操作](http://developer.android.com/guide/google/play/licensing/adding-licensing.html)

我刚刚尝试使用包含的代码配置基本应用程序

```
public class MainActivity extends Activity {
    private static final String BASE64_PUBLIC_KEY = "mykeywithoutspaces";

    // Generate your own 20 random bytes, and put them here.
    private static final byte[] SALT = new byte[] {
        -00, 65, 30, -128, -58, -57, 00, -64, 51, 32, -95, -45, 77, -117, -36, -15, -11, 32, -64,
        89
    };

    private TextView mStatusText;
    private Button mCheckLicenseButton;

    private LicenseCheckerCallback mLicenseCheckerCallback;
    private LicenseChecker mChecker;
    // A handler on the UI thread.
    private Handler mHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.main);

        mStatusText = (TextView) findViewById(R.id.status_text);
        mCheckLicenseButton = (Button) findViewById(R.id.check_license_button);
        mCheckLicenseButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                doCheck();
            }
        });

        mHandler = new Handler();

        // Try to use more data here. ANDROID_ID is a single point of attack.
        String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

        // Library calls this when it's done.
        mLicenseCheckerCallback = new MyLicenseCheckerCallback();
        // Construct the LicenseChecker with a policy.
        mChecker = new LicenseChecker(
            this, new ServerManagedPolicy(this,
                new AESObfuscator(SALT, getPackageName(), deviceId)),
            BASE64_PUBLIC_KEY);
        doCheck();
    }

    protected Dialog onCreateDialog(int id) {
        final boolean bRetry = id == 1;
        return new AlertDialog.Builder(this)
            .setTitle(R.string.unlicensed_dialog_title)
            .setMessage(bRetry ? R.string.unlicensed_dialog_retry_body : R.string.unlicensed_dialog_body)
            .setPositiveButton(bRetry ? R.string.retry_button : R.string.buy_button, new DialogInterface.OnClickListener() {
                boolean mRetry = bRetry;
                public void onClick(DialogInterface dialog, int which) {
                    if ( mRetry ) {
                        doCheck();
                    } else {
                        Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                                "http://market.android.com/details?id=" + getPackageName()));
                            startActivity(marketIntent);                        
                    }
                }
            })
            .setNegativeButton(R.string.quit_button, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    finish();
                }
            }).create();
    }

    private void doCheck() {
        mCheckLicenseButton.setEnabled(false);
        setProgressBarIndeterminateVisibility(true);
        mStatusText.setText(R.string.checking_license);
        mChecker.checkAccess(mLicenseCheckerCallback);
    }

    private void displayResult(final String result) {
        mHandler.post(new Runnable() {
            public void run() {
                mStatusText.setText(result);
                setProgressBarIndeterminateVisibility(false);
                mCheckLicenseButton.setEnabled(true);
            }
        });
    }

    private void displayDialog(final boolean showRetry) {
        mHandler.post(new Runnable() {
            public void run() {
                setProgressBarIndeterminateVisibility(false);
                showDialog(showRetry ? 1 : 0);
                mCheckLicenseButton.setEnabled(true);
            }
        });
    }    

    private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
        public void allow(int policyReason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // Should allow user access.
            displayResult(getString(R.string.allow));
        }

        public void dontAllow(int policyReason) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            displayResult(getString(R.string.dont_allow));
            // Should not allow access. In most cases, the app should assume
            // the user has access unless it encounters this. If it does,
            // the app should inform the user of their unlicensed ways
            // and then either shut down the app or limit the user to a
            // restricted set of features.
            // In this example, we show a dialog that takes the user to Market.
            // If the reason for the lack of license is that the service is
            // unavailable or there is another problem, we display a
            // retry button on the dialog and a different message.
            displayDialog(policyReason == Policy.RETRY);
        }

        public void applicationError(int errorCode) {
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            String result = String.format(getString(R.string.application_error), errorCode);
            displayResult(result);
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mChecker.onDestroy();
    }

} 
```

但不幸的是，应用程序在开始时崩溃并出现错误

```
10-03 01:10:20.309: E/AndroidRuntime(2145): FATAL EXCEPTION: main
10-03 01:10:20.309: E/AndroidRuntime(2145): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.market.licensing/com.example.android.market.licensing.MainActivity}: java.lang.IllegalArgumentException: java.security.spec.InvalidKeySpecException: java.io.IOException: corrupted stream - out of bounds length found
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.os.Looper.loop(Looper.java:130)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at java.lang.reflect.Method.invokeNative(Native Method)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at java.lang.reflect.Method.invoke(Method.java:507)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at dalvik.system.NativeStart.main(Native Method)
10-03 01:10:20.309: E/AndroidRuntime(2145): Caused by: java.lang.IllegalArgumentException: java.security.spec.InvalidKeySpecException: java.io.IOException: corrupted stream - out of bounds length found
10-03 01:10:20.309: E/AndroidRuntime(2145):     at com.google.android.vending.licensing.LicenseChecker.generatePublicKey(LicenseChecker.java:121)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at com.google.android.vending.licensing.LicenseChecker.<init>(LicenseChecker.java:92)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at com.example.android.market.licensing.MainActivity.onCreate(MainActivity.java:100)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-03 01:10:20.309: E/AndroidRuntime(2145):     ... 11 more
10-03 01:10:20.309: E/AndroidRuntime(2145): Caused by: java.security.spec.InvalidKeySpecException: java.io.IOException: corrupted stream - out of bounds length found
10-03 01:10:20.309: E/AndroidRuntime(2145):     at org.bouncycastle.jce.provider.JDKKeyFactory.engineGeneratePublic(JDKKeyFactory.java:92)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at org.bouncycastle.jce.provider.JDKKeyFactory$RSA.engineGeneratePublic(JDKKeyFactory.java:396)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at java.security.KeyFactory.generatePublic(KeyFactory.java:177)
10-03 01:10:20.309: E/AndroidRuntime(2145):     at com.google.android.vending.licensing.LicenseChecker.generatePublicKey(LicenseChecker.java:112) 
```

怎么了？

在行

```
private static final String BASE64_PUBLIC_KEY = "mykeywithoutspaces"; 
```

我已经设置了我的真实公钥

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T01:01:41.610

我在 Google 帐户上编辑了一些个人资料信息后，Google Developers 控制台上的密钥发生了变化。

我已经更新了密钥，现在一切正常。

# apache - .htaccess 没有正确路由

> ID：12699912
> 
> 赞同：0
> 
> 时间：2012-10-02T23:27:13.770
> 
> 标签：apache, .htaccess, rewrite

我的问题简单地说...

这有效： `RewriteRule ^foo http://google.com`

但这不会： `RewriteRule ^routing/? routing.php [L]`

没有名称为路由的目录或文件名。有关详细信息，请参阅此问题： [.htaccess url routing subdirectory](https://stackoverflow.com/questions/12698882/htaccess-url-routing-subdirectory)

自从提出这个问题后，我对 .htaccess 系统的理解有了显着增长。我现在明白了，从我看到的一切看起来都很好。当使用 foo 并且仅呈现 404 错误时，更改该行将重定向到 google 使用路由。我也确信 routing.php 在那里并且正在工作。

关于为什么这不起作用的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:35:00.337

你试过没有问号吗？查看文档，我认为您根本不应该使用问号： [http](http://httpd.apache.org/docs/current/mod/mod_rewrite.html) ://httpd.apache.org/docs/current/mod/mod_rewrite.html 尝试使用 $ 代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:57:39.927

你知道吗，我敢打赌这是因为你已经`Multiviews`打开了。尝试：

```
Options -Multiviews 
```

在您的 htaccess 文件的最顶部。

# actionscript-3 - 在 iOS 版 Adob e Air 中保存和加载游戏

> ID：12699913
> 
> 赞同：1
> 
> 时间：2012-10-02T23:27:13.880
> 
> 标签：actionscript-3, air, adobe

我有一个关于iOS adobe air的询问。好的，所以我正在开发一个有点像愤怒的小鸟的游戏，每次你完成一个级别就进入下一个级别。但是，当你完成一个级别时，它不是手动保存，它会自动保存它。当我离开应用程序时，我现在所在的级别是解锁级别，而不是之前的级别，或者整个游戏重新开始时，我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:38:50.147

如果要在应用程序退出时保存，可以订阅 Event.EXITING 事件。

例子：

```
NativeApplication.nativeApplication.addEventListener(Event.EXITING, onExit);

private function onExit(e:Event):void
{
     trace("Save here.");
} 
```

然后，您可以像这样使用 SharedObjects：

```
var so:SharedObject = SharedObject.getLocal("myGame");
so.data['score'] = int(yourCurrentScore);
so.flush(); 
```

或者你可以只保存一个本地文件。

查看本教程了解更多详情： http: [//www.adobe.com/devnet/flash/articles/saving_state_air_apps.html](http://www.adobe.com/devnet/flash/articles/saving_state_air_apps.html)

# asp.net - 阻止 URL 路由在某些目录及其包含的任何内容（包括子目录）上发生

> ID：12699923
> 
> 赞同：1
> 
> 时间：2012-10-02T23:28:37.547
> 
> 标签：asp.net, webforms, url-routing, .net-4.5

我正在为我的应用程序使用 URL 路由，并希望防止 URL 路由发生在以人员/开头的任何事情上，但使用以下代码它不起作用，我怎样才能让 ASP.Net 防止 URL 路由接触人员目录它是子目录？

```
 private static void RegisterRoutes(RouteCollection Routes)
{
    //URLs to ignore routeing on
    RouteTable.Routes.Ignore("staff/");

    //Good routes
    Routes.MapPageRoute("Reviews", "{Category}/{RouteName}/Reviews.aspx", "~/RouteFiles/Reviews.aspx");
    Routes.MapPageRoute("Races", "{Category}/{RouteName}/Races.aspx", "~/RouteFiles/Races.aspx");
    Routes.MapPageRoute("SectionHomePage", "{Category}/{RouteName}", "~/RouteFiles/SectionHomePage.aspx");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:44:11.577

如果您使用的是 WebForms 而不是我假设的 MVC，请尝试使用[StopRoutingHandler](http://msdn.microsoft.com/en-us/library/system.web.routing.stoproutinghandler.aspx)：

```
routes.Add(new Route("staff/", new StopRoutingHandler())); 
```

Using`Routes.Ignore`可能在 MVC 中工作（不确定），但它在 WebForms 应用程序中不起作用。

通过将 StopRoutingHandler 指定为此路径的默认处理程序，您基本上告诉应用程序所有请求都应由此处理程序处理，这会阻止所有后续在此目录中路由的尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T22:26:32.033

解决方案是进行`RouteTable.Routes.Ignore()`条目。

# scala - 如何在给定 A 或 Promise[A] 的情况下返回单个 Promise[A]？

> ID：12699929
> 
> 赞同：2
> 
> 时间：2012-10-02T23:29:18.497
> 
> 标签：scala, playframework-2.0, promise

我有两个按预期工作的功能

1.  `def getSomething: Promise[JsValue]`
2.  `def getSomethingElse: Promise[JsValue]`

现在我想定义第三个函数 ( `def getAll: Promise[JsValue]`)，它调用`getSomething`然后基于响应返回响应或`getSomethingElse`将其响应附加到原始响应。

我目前`getAll`定义如下：

```
def getAll: Promise[JsValue] = {
  getSomething flatMap { response:JsValue =>
    (response \ "someAttribute").asOpt[String] match {
      case None =>
        val resultPromise = Promise[JsValue]
        resultPromise.redeem(response)
        resultPromise
      case Some(someAttribute) => getSomethingElse map { moreResponse:JsValue =>
        response ++ moreResponse
      }
    }
  }
} 
```

这可行，但想知道是否有更短的方法来完成更规范的 scala 相同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:43:28.537

[在 Play Frameworks Google Group](https://groups.google.com/forum/#!msg/play-framework/F3Pnifjcnz8/FZakFeoPgKsJ)的交叉帖子中得到了 Derek Williams 的回复。

> 我在那里看到的唯一不理想的是 Option 上的模式匹配，而不是使用 map/getOrElse 为您提供了更多自由来更好地编写。此外，如果您不打算使用某些值，最好不要给它命名，而是使用 _

```
def getAll: Promise[JsValue] = {
  getSomething flatMap { response =>
    (response \ "someAttribute").asOpt[String] map { _ =>
      getSomethingElse map (response ++ _)
    } getOrElse {
      Promise pure response
    }
  }
} 
```

# mysql - 如何在 MySQL 中只返回没有 COUNT 或 GROUP 的唯一值

> ID：12699932
> 
> 赞同：1
> 
> 时间：2012-10-02T23:29:41.853
> 
> 标签：mysql

我的数据库类让我难倒了这个问题。如果有人可以帮助我，那就太好了

我有一个有 2 列的表。第 1 列是汽水类型（可口可乐、百事可乐、胡椒博士等），第 2 列是人名。人们可以喝多种苏打水。

有些条目可能是

1.  可乐杰里米
2.  健怡可乐山姆
3.  胡椒博士杰里米

我必须编写一个查询来返回只喝一种苏打水的人。所以杰里米不会回来，但山姆会。问题是我不能使用 COUNT 或 GROUP（或任何聚合函数）！没有这些我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:38:48.357

你可以尝试这样的事情：

```
select a.soda, a.person 
  from table a
 where not exists(select 1 
                   from table b 
                  where b.person = a.person 
                    and b.soda <> a.soda) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:35:02.533

如果子查询没问题，这样的事情会起作用：

```
select distinct * from sodas as s1 where s1.name not in (select s2.name from sodas as s2 where s2.name=s1.name and s2.soda <> s1.soda) 
```

# c# - “得到”是什么意思？

> ID：12699933
> 
> 赞同：1
> 
> 时间：2012-10-02T23:29:44.223
> 
> 标签：c#, properties

> **可能重复：**
> [在 C# 中，这段带有“get”的代码是什么意思？](https://stackoverflow.com/questions/6945855/in-c-sharp-what-does-this-code-with-get-mean)

我正在使用开源项目。在这个项目中有功能。

```
public virtual ICollection<Customer> AffiliatedCustomers 
{
    get
    {
         return _affiliatedCustomers ?? (_affiliatedCustomers = new List<Customer>()); 
    }
    protected set { _affiliatedCustomers = value; }
 } 
```

我不明白“得到”是什么意思。你能解释一下这个功能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T23:31:19.637

`AffiliatedCustomers`是一个*属性*。

定义了属性getter，这是一种在`get`内部使用的方法，用于通过属性返回值。它允许您在给定类的实例的情况下使用它，如下所示：

```
var customers = theClass.AffiliatedCustomers; // Looks like a field, but is a property 
```

属性也可以有一个`set`部分，就像这个 ( `protected set { _affiliatedCustomers = value; }`) 一样，它使您可以控制通过属性设置值时发生的情况。

有关详细信息，请参阅[C# 中的属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:35:10.007

这不是一个功能。它是一种财产。属性基本上是一些变量的精美包装。例如，声明以下属性：

```
public string SomeProperty { get; set; } 
```

实际上会编译成这样的：

```
private string backing_SomeProperty;

public void set_SomeProperty(string value)
{
    backing_SomeProperty = value;
}

public int get_SomeProperty()
{
    return backing_SomeProperty;
} 
```

这是一个*自动*属性的例子。当然，你也可以像这样自己定义 getter 和 setter 方法：

```
public string SomeProperty
{
    get
    {
        // some logic code here
        // then return some value
    }

    set
    {
        // some logic code here
        // then set some value
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:32:24.563

这是一个属性，由 msdn 引用：

> 属性是提供灵活机制来读取、写入或计算私有字段值的成员。属性可以像公共数据成员一样使用，但它们实际上是称为访问器的特殊方法。这使得数据可以轻松访问，同时仍然提供方法的安全性和灵活性。

请参阅此链接了解更多信息：http: [//msdn.microsoft.com/en-us/library/x9fsa0sw (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/x9fsa0sw(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T23:32:33.127

属性有一个 getter 和一个 setter——它们的目的很明显（获取和设置属性的值）。

当您使用自动属性时，仍然存在 a`get`和 a `set`，但是会自动为您实现支持变量。在您给出的示例中，代码的作者选择了拥有自己的实现`get`- 在这种情况下，在第一次访问属性时自动初始化成员变量。

# css - 固定宽度 div 和隐藏/可见 div 之间的可变宽度 div

> ID：12699934
> 
> 赞同：1
> 
> 时间：2012-10-02T23:29:55.830
> 
> 标签：css, html

```
<div id="d1">
  <div id="d2">label</div>
  <div id="d3"><input name="t1" id="t1" type="text" /></div>
  <div id="d4">Message</div>
</div> 
```

*   `#d1`并且`#d2`有固定的宽度。
*   `#d4`可以显示或隐藏（`visibility: visible;`或`visibility: hidden;`）。当它可见时，它具有固定的宽度。

我希望它`#d3`具有可变宽度，因此它可以填充`#d1`何时`#d4`隐藏的剩余右侧空间，但何时`#d4`可见，填充 和 之间的`#d2`空间`#d4`。

如何使用 CSS 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:46:01.347

我相信以下 CSS 将实现您的目标：

```
#d1 {
    display: table; 
}

#d2, 
#d3, 
#d4 {
    display: table-cell; 
}

#d2, 
#d4 {
    width: (the width you want); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:02:23.530

我想出了一些稍微改变你的 HTML 结构的东西：

```
<div id="d1">
    <div id="d2">label</div>
    <div id="d4">Message</div>
    <div id="d3"><input name="t1" id="t1" type="text" /></div>
</div> 
```

​CSS：

```
input { width: 100%; }
#d2 { 
    float: left; 
    display: inline-block; }
#d4 { 
    float: right;
    display: inline-block; }
#d3 { 
    padding: 0 10px; 
    overflow: hidden; }
​ 
```

预览：http: [//jsfiddle.net/Wexcode/HLME4/](http://jsfiddle.net/Wexcode/HLME4/)

# android - 如何从通知中联系服务的方法？

> ID：12699937
> 
> 赞同：0
> 
> 时间：2012-10-02T23:30:32.070
> 
> 标签：android, service, notifications, broadcast

我正在实现一个音乐播放器。通知允许用户暂停或跳过歌曲。我用

```
Intent i = new Intent("com.package.app");
mExpandedView.setOnClickPendingIntent(R.id.next_song, PendingIntent.getBroadcast(this, 0, i, 0)); 
```

为了将此点击传输到托管 MediaPlayer 和所有相关方法的 MusicService。我想直接调用该服务的一个方法部分（例如 playNextSong()），但`getService()`似乎只允许我启动一个新服务，而不是调用服务中的方法，或者获取一些数据。我什至不需要启动服务，因为音乐正在播放，它已经在运行。

那么有没有一种我不知道的方法来做到这一点？或者是：
通知广播到广播接收器，然后广播接收器广播到服务推荐的方式来完成这个动作？它看起来像是一种复杂的方式来做一些简单的事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:42:10.063

为通知创建 PendingIntent 作为广播消息，自定义消息（使用您自己的字符串，如 com.my.custom.broadcast.message.action）。在 AndroidManifest 中创建并注册将由此自定义操作触发的新广播接收器。广播接收器的 OnReceive 方法，根据传递给 onReceive 方法的服务类和上下文参数，使用自定义参数/动作或其他方式启动您的服务。

可能您可以尝试通过为此创建 PendingIntent 来直接启动服务，但我认为最好通过中间步骤来完成：BroadcastReceiver

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:47:11.103

从通知中，您可以启动一个活动。该活动将执行“bindService”并调用服务中的适当方法，然后完成（）。该活动不需要有 UI，因此用户不会看到它。但这比广播接收器还要多。

# typescript - 如何使用 TypeScript 导入外部文件？

> ID：12699940
> 
> 赞同：7
> 
> 时间：2012-10-02T23:30:41.630
> 
> 标签：typescript

我有一个带有`require`s 字符串的节点应用程序，如下所示：

```
var express = require('express'),
    router = require('./router'),
    data = require('./data'); 
```

此代码无需更改即可运行，但如何充分利用 TypeScript 模块？只是使用

```
import data = module("./data") 
```

会告诉我

> 当前范围内不存在名称“./data”

如何使用 TypeScript 导入外部文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T01:14:14.913

这个例子，

> [http://www.typescriptlang.org/Samples/#ImageBoard](http://www.typescriptlang.org/Samples/#ImageBoard)

包含一个名为的文件，该文件`node.d.ts`显示如何声明现有 node.js 模块的类型。

TypeScript 需要声明模块以供您使用`import`语法。这通常在一个`.d.ts`文件中提供，但可以包含在同一个文件中。这可能看起来像一个例子，

```
declare module "./data" {
    function getData(): number;
}

import data = module("./data");

var myData = data.getData(); 
```

在`.d.ts`文件中，`declare`关键字是隐含的，可以省略。

# android - 使用 layout_weight 时如何在按钮内放置文本？

> ID：12699946
> 
> 赞同：1
> 
> 时间：2012-10-02T23:31:32.753
> 
> 标签：android

我正在使用线性布局，方向 = 垂直，我在这个线性布局中有 3 个具有不同权重的按钮（因此其中 3 个按钮水平填充页面）。因为我想让按钮看起来更短，所以我将高度设置为 42 dip。它在大屏幕设备上看起来不错，但是当我在一个非常小的屏幕设备上测试它时，由于尺寸问题，中间按钮中的一半文字消失了。我该如何解决这个问题？

```
<LinearLayout
    android:id="@+id/StatisticsButtons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dip"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/viewAllBtn"
        android:layout_width="0dp"
        android:layout_height="42dip"
        android:layout_weight="1"
        android:background="@drawable/button_for_statistic"
        android:text="View All"
        android:textColor="@drawable/button_text_color_statistic"
        android:textSize="17dip" />

    <Button
        android:id="@+id/viewPartialBtn"
        android:layout_width="0dp"
        android:layout_height="42dip"
        android:layout_marginLeft="10dip"
        android:layout_weight="1.3"
        android:background="@drawable/button_for_statistic"
        android:text="View partial record"                        //"View partial" displayed , I guess the screen is too "narrow" to display the "record"
        android:textColor="@drawable/button_text_color_statistic"
        android:textSize="17dip" />

    <Button
        android:id="@+id/viewLeaveBtn"
        android:layout_width="0dp"
        android:layout_height="42dip"
        android:layout_marginLeft="10dip"
        android:layout_weight="1"
        android:background="@drawable/button_for_statistic"
        android:text="Leave"
        android:textColor="@drawable/button_text_color_statistic"
        android:textSize="17dip" />
</LinearLayout> 
```

```
<item android:state_pressed="true"><shape>
        <solid android:color="#0033d434" />

        <stroke android:width="2dp" android:color="#aaa22f" />

        <corners android:radius="2dp" />

        <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    </shape></item>
<item><shape>
        <solid android:color="#aaa22f" />

        <corners android:radius="2dp" />

        <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    </shape></item> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:32:03.217

您可以将整个布局包装在[`ScrollView`](http://developer.android.com/reference/android/widget/ScrollView.html). 此外，请考虑您正在测试/定位的屏幕尺寸。一些默认的模拟器尺寸非常小，以至于很少有手机实际上具有这些尺寸：[Android Dashboard: Screen Sizes and Densities](http://developer.android.com/about/dashboards/index.html#Screens)。

编辑：

还可以考虑为不同的屏幕尺寸提供替代资源。您可以根据屏幕宽度（或其他内容）调整文本大小。请参阅[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)API 指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:34:14.110

这是因为您为按钮的大小使用了固定的密度值（即 42 dp）。您确实应该尽可能坚持使用 wrap_content 或 match_parent ，以确保您的资产/小部件将在所有设备上相应地扩展和适应。如果您将按钮的高度和宽度设置为 wrap_content，您会发现它可以在多个设备上完美地换行文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:10:40.327

当您使用 layout_weight 时，控件的宽度是按比例确定的。在您的情况下，您为按钮指定了 1、1.3、1 的权重。但是您的第二个按钮 viewPartialBtn 需要更多宽度。你必须增加它的宽度。您可以尝试将 layout_weight 设置为 2, 5, 1，以便它采用文本查看全部、查看部分记录和离开所需的宽度。

换句话说，您告诉线性布局以适应控件的宽度为 2:5:1。

# drupal-7 - 在 Drupal 7 中的视图创建的页面上搜索信息

> ID：12699952
> 
> 赞同：0
> 
> 时间：2012-10-02T23:32:22.913
> 
> 标签：drupal-7, drupal-views, drupal-commerce, drupal-search

我正在使用 Drupal Commerce 并通过视图创建包含这些产品的页面。

我希望能够搜索任何产品及其任何描述，并将搜索结果链接到这些视图页面。

我目前正在探索按页面搜索，它有点工作，但它只搜索页面标题而不搜索子字符串。我正在下载并尝试一切！也许我只需要正确的组合。

有没有人处理过这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:31:36.633

您可以使用过滤器设置中的“搜索：搜索词”选项。对于此选项，您必须启用核心搜索模块。

它从标题、描述中搜索，我们也可以设置“包含”标准来搜索任何匹配的数据。

干杯！！！

# android - 在opengl（android）中绘制纹理的一部分

> ID：12699955
> 
> 赞同：0
> 
> 时间：2012-10-02T23:32:39.773
> 
> 标签：android, opengl-es, textures

我试图找到一种在opengl中绘制纹理的一部分的方法（例如，在精灵中我需要绘制图像的不同部分）但我找不到它。在我一直在研究的问题中，人们谈论 glDrawTexfOES 但据我所知，它是一种绘制矩形纹理的捷径。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:35:47.480

是的，那些纹理坐标就是那些。你可以在运行时更改它们，但我需要一些关于你的管道的信息，你如何以及在哪里将顶点和纹理坐标推送到 GL。如果你在每一帧都使用“glTexCoordPointer”之类的东西，你只需要你的缓冲区不是恒定的，而是随时更改值。如果您使用一些 GPU 缓冲区，您将需要检索缓冲区指针并更改值。在这两种情况下，明智的做法是在与“draw”方法相同的线程上执行此操作。

# zend-framework - Zend Google Calendar API - 添加事件是一小时

> ID：12699957
> 
> 赞同：1
> 
> 时间：2012-10-02T23:32:59.353
> 
> 标签：zend-framework, timezone, google-calendar-api

当我使用 Zend API 添加事件时，夏季夏令时月份的时间是一小时。

我用于添加日期的字符串是“2012-10-02T06:00:00-05:00”。我在东部时区，我的 Google 日历也设置为东部时区，但时间显示为早上 7 点。我也试过“2012-10-02T06:00:00.000-05:00”。

我也尝试过使用 date_default_timezone_set("America/Detroit")。

有任何想法吗？我一直在研究并试图解决这个问题一段时间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:34:43.313

我确实将时区标识符应用于我的条目。我使用 -05:00 --> "2012-10-02T06:00:00-05:00"

我认为 setTimezone 只适用于 Zend_Date

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:19:12.023

`Zend_Gdata_Calendar_EventEntry`允许您调用`getTimezone()`，`setTimezone()`并且您应该能够将时区标识符应用于您的条目或 UTC 偏移量。

```
"end": {
  "dateTime": "2012-07-12T10:30:00.0z" //z is identifier for UTC
 },
 "start": {
  "dateTime": "2012-07-12T09:30:00.0z"
 }

"start": {
  "dateTime": "2012-07-11T03:30:00-06:00" //-06:00 would be UTC offset
},
"end": {
  "dateTime": "2012-07-11T04:30:00-06:00"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T22:46:46.747

如果您查看[google calendar API](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)，您会注意到 event`dateTime`必须以 RFC 3339 格式传递（根据您在问题中给出的示例，您已经知道）。

[RFC 3339 格式](https://www.rfc-editor.org/rfc/rfc3339)的规范规定：

> 由于当地时区的夏令时规则非常复杂，并且可能在不可预测的时间根据当地法律发生变化，因此使用协调世界时 (UTC) 可以最好地实现真正的互操作性。本规范不符合当地时区规则。

这基本上意味着该规范不考虑 DST。基本上，在将日期传递给 Google Calendar API 之前，您负责调整 DST。

# c# - 如何使用 Javascript 插入 dropDownListFor

> ID：12699958
> 
> 赞同：0
> 
> 时间：2012-10-02T23:32:59.073
> 
> 标签：c#, javascript, asp.net-mvc, visual-studio-2010

在我看来，我有一个 dropDownListFor，如下所示：

```
`@Html.DropDownListFor(x => x.idResponsaveis, Model.responsaveis)
 <input type='button' value='Adicionar' onclick='adicionarResponsavel()' class='btn' />` 
```

我需要在用户单击 adicionarResponsavel() 时添加多个 dropDownList。

我的 JavaScript 代码是：

```
function adicionarResponsavel(){

        var div = document.getElementById('listaResponsaveis');
        var node = document.createElement('div');
        node.setAttribute('id', 'div' + quantity);
        node.appendChild('@Html.DropDownListFor(x => x.idResponsaveis, Model.responsaveis)');

        div.appendChild(node);

    } 
```

有错误的具体行是：

```
node.appendChild('@Html.DropDownListFor(x => x.idResponsaveis, Model.responsaveis)'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:05:07.143

尝试使用 jQuery

```
function adicionarResponsavel(){

    var div = document.getElementById('listaResponsaveis');
    var node = document.createElement('div');
    node.setAttribute('id', 'div' + quantity);

   var existingDropDownClone=$('#id-of-existing-select-box').clone();

   existingDropDownClone.appendTo($(node));
} 
```

# php - 两个数组上的phpsimilar_text函数

> ID：12699960
> 
> 赞同：3
> 
> 时间：2012-10-02T23:33:10.727
> 
> 标签：php, arrays, if-statement, foreach

我有两大类刮掉的产品名称和价格，类似于以下内容：

```
$one=array('grape'=>'0.40','apple'=>'1.20','banana'=>'1.80','lemon'=>'10.43');
$two=array('grappe'=>'1.20','kiwi'=>'7.54','banaana'=>'3.20','aubergine'=>'2.32'); 
```

我正在尝试使用similar_text 函数迭代数组以返回彼此紧密匹配的键。例如，我想从上面的例子中提取`'grappe'=>'1.20'`和提取值。`'banaana'=>'3.20'`

我不确定如何引用数组并将它们传递给similar_text 函数，因为该函数只接受字符串数据。我认为我需要使用`foreach`循环正确引用数组，并结合函数使用*if*`similar_text`语句来指定两个匹配项之间所需的相似性百分比。

例如（在 foreach 循环中）：

```
if ($result[] = (similar_text( $one, $two)) > 80) {
    var_dump($result[]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:41:39.010

`similar_text( $one, $two)`返回两个字符串中匹配字符的数量，因此要获得百分比，您应该运行`similar_text($one, $two, $percent);`insted

例子

```
$one = array('grape' => '0.40','apple' => '1.20','banana' => '1.80','lemon' => '10.43');
$two = array('grappe' => '1.20','kiwi' => '7.54','banaana' => '3.20','aubergine' => '2.32');

$result = array();
foreach ( $one as $key => $value ) {
    foreach ( $two as $twoKey => $twoValue ) {
        similar_text($key, $twoKey, $percent);
        if ($percent > 80) {
            $result[$key] = array($value,$twoValue);
        }
    }
}

var_dump($result); 
```

输出

```
array
  'grape' => 
    array
      0 => string '0.40' (length=4)
      1 => string '1.20' (length=4)
  'banana' => 
    array
      0 => string '1.80' (length=4)
      1 => string '3.20' (length=4) 
```

# ruby-on-rails - Rails中3-4个字符的自然排序

> ID：12699965
> 
> 赞同：0
> 
> 时间：2012-10-02T23:33:44.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sorting

我有一个未排序的地区邮政编码列表，如下所示：

```
["E1", "E1C", "E1D", "E10", "E11", "E12", "E2", "E3", "E4", "EC1", "EC1A", "EC1M", "EC1N",
"EC1R", "EC1V", "EC1Y", "EC2", "EC2A", "EC2M", "EC2N", "N1", "N10", "N11", "N12",
"N13", "N2", "NW1", "NW10", "NW2" etc] 
```

我想对它们进行如下排序：

```
["E1", "E1C", "E1D", "E2", "E3", "E4", "E10", "E11", "E12", "EC1", "EC1A", "EC1M", "EC1N",
"EC1R", "EC1V", "EC1Y", "EC2", "EC2A", "EC2M", "EC2N", "N1", "N2", "N10", "N11", "N12",
"N13", "NW1", "NW2, "NW10" etc] 
```

因此，总结以 E 开头的邮政编码格式的顺序为：

*   E1
*   E1C
*   E11
*   EC1
*   EC1V

以 N 等开头的邮政编码的顺序相同。

对此类字符串进行排序的推荐方法是什么？在这种情况下，字符串的格式始终是已知的，即它始终是 2-4 个字母数字字符，第一个始终是字母。

我应该先按长度排序字符串，然后在每个长度组中排序，还是有更优雅的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:49:28.240

我会用

```
array.sort_by do |str|
  /\A(\w)(\d+)\Z/ === str
  [$1, $2.to_i]
end 
```

或者，如果您有任意交替的字母和数字序列，

```
array.sort_by do |str|
  /\A(\D*)(\d*)(\D*)(\d*)\Z/.match(str)[1..-1].reject(&:blank?).collect do |item|
    /\d/ === item ? item.to_i : item
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:23:58.467

这样做的一种奇怪的方式，但我认为这应该工作：

```
array.sort do |a, b|
  a = a.dup
  b = b.dup

  regex = /(\d+)/
  a.match(regex)
  a_num = $1.to_i
  b.match(regex)
  b_num = $1.to_i

  if a_num > b_num
    a.gsub!(regex, "1")
    b.gsub!(regex, "0")
  elsif a_num < b_num
    a.gsub!(regex, "0")
    b.gsub!(regex, "1")
  end

  a <=> b
end 
```

# c - 分叉 3 个进程，使用共享内存

> ID：12699966
> 
> 赞同：2
> 
> 时间：2012-10-02T23:34:06.860
> 
> 标签：c, unix, process, fork

我有一个任务，我把头撞在墙上。它在 C 中。我感觉我接近解决方案，但是我无法让程序执行所需的操作。我正在更改数字和一些小细节，因为大多数班级都和我一样难过。

要求：创建3个进程，第一个将共享内存变量“total->value”从1增加到10000，第二个从10000增加到12000，第三个从12000增加到14000

流程函数被标记为（process1（），process2（），process3（）），这些函数的内部如下

```
process1()
{
   int k = 0;
   while (k < 10000)
   {
      k++;
      total->value = total->value + 1;
   }
   printf("From process 1 = %d/n", total->value);
} 
```

第二个是 k < 2000 （因为它只需要增加共享值 2000 更多）等等。

该计划的主要部分是：

```
main()
{
   int shmid;
   int pid1;
   int pid2;
   int pid3;
   int ID;
   int status;
   char *shmadd = (char *)0;

   /* Create and connect to a shared memory segmentt */
   if ((shmid = shmget(SHMKEY, sizeof (int), IPC_CREAT | 0666)) < 0)
   {
      perror("shmget");
      exit(1);
   }

   if ((total = (shared_mem *)shmat(shmid, shmadd, 0)) == (shared_mem *)-1)
   {
      perror("shmat");
      exit(0);
   }

   total->value = 0;

   if ((pid1 = fork()) == 0)
      process1();

   if ((pid1 != 0) && (pid2 = fork()) == 0)
      process2();

   if ((pid1 != 0) && (pid2 != 0) && (pid3 = fork()) == 0)
      process3();

   if ((pid1 != 0) && (pid2 != 0) && (pid3 != 0))
   {
      if ((shmctl(shmid, IPC_RMID, (struct shmid_ds *)0)) == -1)
      {
         perror("shmctl");
         exit(-1);
      }
      printf("\t\t  End of Program.\n");
   }
} 
```

我需要的是在第二个开始之前完成第一个过程。我尝试在 process1() （或 2 个或 3 个）调用之后插入一个 wait(&status) 并且不知所措。任何指针？（没有双关语）=）还有更多要实现的，但我相信一旦我有了这部分，我就可以自己处理剩下的部分。我在某些方面故意含糊其辞，但我想完成这个项目，更重要的是理解它，还有其他人想要免费午餐。我将在所需的代码中提供任何其他内容。预先感谢您的帮助

输出应该出现

```
From process 1 = 10000  
From process 2 = 12000  
From process 3 = 14000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:08:42.917

我相信 Celada 对要求的评论/猜测是正确的。但是，除此之外，并且冒着做太多工作的风险，以下代码满足您的规范。`__sync_fetch_and_add()`可能不需要使用内置的 gcc 。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/types.h>
#include <sys/wait.h>

static struct {
   int value;
} *total;

static void process1(void) { 
   int k = 0;  
   while (k < 10000) {  
      k++;  
      __sync_fetch_and_add(&total->value, 1);  
    }  
    printf("From process 1 = %d\n", total->value); //<-- not quite right: could be >10000
}

static void process2(void) { 
   int k = 0;
   while (__sync_fetch_and_add(&total->value, 0) != 10000)
      ;
   while (k < 2000) {  
      k++;  
      __sync_fetch_and_add(&total->value, 1);  
   }  
   printf("From process 2 = %d\n", total->value);
}

static void process3(void) { 
   int k = 0;  
   while (__sync_fetch_and_add(&total->value, 0) != 12000)
      ;
   while (k < 2000) {  
      k++;  
      __sync_fetch_and_add(&total->value, 1);  
    }  
    printf("From process 3 = %d\n", total->value);
}

int main(void) {
   int   shmid;
   int   pid1;
   int   pid2;
   int   pid3;
   int   status;

   /* Create and connect to a shared memory segment */
   if ((shmid = shmget(1234, sizeof *total, IPC_CREAT|0666)) < 0) {
      perror ("shmget");
      exit (1);
   }
   if ((total = shmat(shmid, 0, 0)) == (void *)-1) {
      perror("shmat");
      exit (0);
   }
   total->value = 0; // not necessary in Linux if IPC_CREAT invoked

   if (!(pid1 = fork()))
      process1();
   else if (!(pid2 = fork()))
      process2();
   else if (!(pid3 = fork()))
      process3();
   else {
      wait(&status);
      wait(&status);
      wait(&status);
      if ((shmctl(shmid, IPC_RMID, (struct shmid_ds *) 0)) == -1) {
         perror("shmctl");
         exit (-1);
      }
      printf("\t\t  End of Program.\n");
   }
   return 0;
} 
```

# magento - Magento V1.7 网格视图 - 将制造商属性添加到视图

> ID：12699980
> 
> 赞同：0
> 
> 时间：2012-10-02T23:36:06.000
> 
> 标签：magento

在[此页面上](http://www.foxtrotgear.com/index.php/tactical-gear-equipment.html?mode=grid)，我想直接在项目名称下方添加制造商名称，但似乎无法使其正常工作。尝试了许多建议，但似乎没有一个有效。

请具体说明要编辑的文件和行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-07T10:57:11.483

```
$manufacturer_items = Mage::getModel('eav/entity_attribute_option')->getCollection()->setStoreFilter()
    ->join('attribute','attribute.attribute_id=main_table.attribute_id', 'attribute_code');

    foreach ($manufacturer_items as $manufacturer_item) :
        if ($manufacturer_item->getAttributeCode() == 'manufacturer')
        $manufacturer_options[$manufacturer_item->getOptionId()] = $manufacturer_item->getValue();
    endforeach;

    $this->addColumn('manufacturer',
        array(
        'header'=> Mage::helper('catalog')->__('Manufacturer'),
        'width' => '100px',
        'type'  => 'options',
        'index' => 'manufacturer',
        'options' => $manufacturer_options,
        )); 
```

将此代码放在 Gird.php 文件中，并将此代码放在同一文件中的最高行号 58 到 63 中 ->addAttributeToSelect('manufacturer')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:49:14.737

试试这个，假设您使用属性集在 Admin -> Catalog -> Manage Attributes 中创建一个“制造商”字段。

编写扩展目录产品块网格 /app/code/core/Mage/Adminhtml/Block/Catalog/Product/Grid.php 的自定义模块

创建块文件：app/code/local/MageIgniter/ManufacturerGrid/Block/AdminhtmlCatalog/Product/Grid.php

```
class MageIgniter_ManufacturerGrid_Block_Adminhtml_Catalog_Product_Grid extends Mage_Adminhtml_Block_Catalog_Product_Grid
 { 
```

将方法 _prepareCollection() 复制到您的自定义块并更新（第 58 行）

```
 $collection = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('sku')
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('manufacturer')   // added this line
        ->addAttributeToSelect('attribute_set_id')
        ->addAttributeToSelect('type_id'); 
```

将方法 _prepareColumns() 复制到您的自定义块并添加

```
 $this->addColumn('manufacturer',
        array(
            'header'=> Mage::helper('catalog')->__('Manufacturer'),
            'width' => '60px',
            'index' => 'manufacturer',
            'type'  => 'options';
            'options' => Mage::helper('manufacturergrid')->getManufacturerOption(),
    )); 
```

创建帮助文件：app/code/local/MageIgniter/ManufacturerGrid/Helper/Data.php

```
 class MageIgniter_ManufacturerGrid_Helper_Data extends Mage_Core_Helper_Abstract
 {

    public function getManufacturerOption(){
       $_opt = array();
       foreach (Mage::getModel('eav/config')->getAttribute('catalog_product','manufacturer')->getSource()->getAllOptions(false,true) as $option){
           $_opt[$option['value']] = $option['label'];
       }

    return $_opt;
   }  

 } 
```

创建：app/code/local/MageIgniter/ManufacturerGrid/etc/config.xml

```
<config>
  <modules>
    <MageIgniter_ManufacturerGrid>
        <version>1.0.0</version>
    </MageIgniter_ManufacturerGrid>    
  </modules>

  <global>
      <blocks>
        <adminhtml>
            <rewrite>
            <catalog_product_grid>MageIgniter_ManufacturerGrid_Block_Adminhtml_Catalog_Product_Grid</catalog_product_grid>
            </rewrite>
        </adminhtml>
      </blocks>
    <helpers>
        <localship>
            <class>MageIgniter_ManufacturerGrid_Helper</class>
        </localship>
    </helpers>
  </global>
 </config> 
```

创建：app/etc/modules/MageIgniter_ManufacturerGrid.xml

```
 <?xml version="1.0"?>
    <config>
           <modules>
                  <MageIgniter_ManufacturerGrid>
                          <active>true</active>
                          <codePool>local</codePool>
                  </MageIgniter_ManufacturerGrid>
           </modules>
    </config> 
```

# sencha-touch-2 - 控制 VS 监听器

> ID：12699983
> 
> 赞同：1
> 
> 时间：2012-10-02T23:36:34.537
> 
> 标签：sencha-touch-2

该类`Controller`提供了两种处理事件的方法：the`listeners`和`control`configs。`control`如果类已经实现，我们为什么需要`Observable`？有理由偏爱其中一个吗？

# vba - 为什么选择前必须激活 Excel 工作表？

> ID：12699987
> 
> 赞同：6
> 
> 时间：2012-10-02T23:36:47.810
> 
> 标签：vba, excel, datamodel

这段代码

```
Sheets(1).Activate
Sheets(2).Range("A1").Select 
```

在 VBA 中将失败，因为您只能`Select`在`Active`. 我明白是这种情况。

Excel 数据模型的哪个元素导致出现这种情况？我认为用户/编码人员`Activate`在使用之前对任何对象都有隐含意图`Select`- 我不明白为什么 VBA 不会做出这个假设，而且，我假设存在这种区别是有原因的。

*   Excel 数据模型的哪一部分在未激活的情况下阻止选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:12:58.343

正如 brettdj 指出的那样，您不必激活工作表即可选择范围。这是一个参考，其中包含大量[用于选择单元格/范围的示例](http://support.microsoft.com/kb/291308)。

现在至于为什么我必须先激活工作表？我不认为这是数据模型的错误，而只是 Ranges 的 select 方法的限制。

从实验来看，在 Excel 中选择范围似乎有两个要求。

1.  Excel 必须能够更新 UI 以指示选择的内容。
2.  范围父级（即工作表）必须处于活动状态。

为了支持这一说法，您也不能从隐藏的工作表中选择一个单元格。

```
Sheets(1).Visible = False
Sheets(1).Activate
'The next line fails because the Range cannot be selected.
Sheets(1).Range("A1").Select 
```

简而言之，当涉及到 Ranges 时，您无法选择看不到的一个。

我会声称这是一起选择的限制，除了您实际上可以在隐藏的工作表中选择一个对象。愚蠢的Excel。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T16:11:22.030

我知道这对派对来说有点晚了，但我发现了一个黑客来做到这一点......

试试这个代码：

```
Sheets(1).Activate
Sheets(2).Range("A1").Copy
Sheets(2).Range("A1").PasteSpecial xlPasteFormulas
Application.CutCopyMode = False 
```

请注意，这是一个 hack，但它可以解决问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T01:06:13.687

@Daniel Cook：感谢您的回复，但不幸的是，Excel 本身并没有遵守对 Excel 宏施加的相同规则......

为了说明，我将简要介绍我当前的问题......

我正在尝试将表的内容重新设置为常见状态。此方法将应用于跨不同工作表的多个表：

```
Public Sub restoreTable()
    Dim myTableSheet As Worksheet: Set myTableSheet = Range("Table1").Parent
    Dim myTable As ListObject: Set myTable = myTableSheet.ListObjects("Table1")

    ' --- Clear Table's Filter(s)
    If myTable.ShowAutoFilter Then ' table has auto-filters enabled
        Call myTable.Range.AutoFilter ' disables autofilter
    End If
    myTable.Range.AutoFilter ' re-apply autofilter

    ' --- Sort by Sequence number
    Call myTable.Sort.SortFields.Clear ' if not cleared, sorting will not take effect

    myTable.Sort. _
        SortFields.Add Key:=Range("Table1[[#Headers],[#Data],[Column1]]"), _
        SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal

    myTable.Sort.Header = xlYes
    myTable.Sort.Orientation = xlTopToBottom
    myTable.Sort.SortMethod = xlPinYin
    Call myTable.Sort.Apply

    myTable.Sort.SortFields.Clear
End Sub 
```

对于以下每个用例，`Table1`可在`Sheet1`

**用例 1：**

*   激活`Sheet1`，选择范围`A1`
*   跑`restoreTable`
*   观察：范围`Sheet1` `A1`保持选中

**用例 2：**

*   激活`Sheet1`，选择范围`A1`
*   启用`Sheet2`
*   跑`restoreTable`
*   观察：**没有**选择范围，而是选择`Sheet1` `A1`了范围**`Table1[#Data]`**

 ****解决方案**

这绝对是可怕的，但这是我能找到的最佳解决方案

```
Public Sub resotreTable_preserveSelection()
    Dim curSheet As Worksheet: Set curSheet = ActiveSheet
    Dim tableSheet As Worksheet: Set tableSheet = Range("Table1").Parent

    ' Change Sheet
    tableSheet.Activate

    ' Remember Selection / Active Ranges
    Dim originalSelection As Range:  Set originalSelection = Selection
    Dim originalActiveCell As Range: Set originalActiveCell = ActiveCell

    ' Restore Table
    Call restoreTable

    ' Restore Old Selection
    originalSelection.Select
    originalActiveCell.Activate

    ' Change Back to old sheet
    curSheet.Activate
End Sub 
```

注意：在这种情况下，`original`* 范围不是必需的，但你明白了：你可以缓冲原始选择并在完成后恢复它

我真的不喜欢excel

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-12T08:36:14.263

当然，您不必选择或激活工作表来选择/激活单元格。我的方法是使用“On Error Resume Next”和“On Error GoTo 0”。下面的代码选择工作簿的每个工作表中的第一个单元格而不选择它。在这个阶段，工作表甚至非常隐藏。

```
On Error Resume Next
For i_wks = 1 To wb_macro.Worksheets.Count
    wb_macro.Worksheets(i_wks).Cells(1).Select
Next i_wks
On Error GoTo 0 
```**

# actionscript-3 - 如果 ActionScript 基于 ECMAScript，为什么它有类并且看起来几乎与 Java 相同？

> ID：12699992
> 
> 赞同：8
> 
> 时间：2012-10-02T23:37:01.830
> 
> 标签：actionscript-3, actionscript

在[这篇文章中](http://en.wikipedia.org/wiki/ActionScript)，它说 ActionScript 3.0 符合 ECMA 第 4 版。但是，ActionScript 3.0 代码看起来不像 JavaScript 并且没有类或扩展，而是看起来像 Java，并且有`class`语句，甚至有`extend`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T23:52:40.287

Actionscript 3 是在 ECMA 4 规范仍在开发中时设计的。这是不同的；它符合 ECMA 4，但超出了它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T13:29:28.217

因为有ActionScript 3基于的ECMAScript 4th Edition草案`class`等等`extends`。

[http://en.wikipedia.org/wiki/ECMAScript#ECMAScript.2C_4th_Edition](http://en.wikipedia.org/wiki/ECMAScript#ECMAScript.2C_4th_Edition)

[http://www.ecma-international.org/activities/Languages/Language%20overview.pdf](http://www.ecma-international.org/activities/Languages/Language%20overview.pdf)

后来，第 4 版草稿被 ECMAScript Harmony 取代：

[http://en.wikipedia.org/wiki/ECMAScript#History_2](http://en.wikipedia.org/wiki/ECMAScript#History_2)

有人会说这是[商业政治](http://whydoeseverythingsuck.com/2008/08/ru-roh-adobe-screwed-by-ecmascript.html)的原因，但你必须对此形成自己的知情意见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T04:00:02.937

Actionscript 从一开始就符合 ECMA。

您可以将 javascript 和 actionscript 想象为单一标准（即 ECMA）的一个分支，其中 Javascript 倾向于为浏览器增加功能，而 Actionscript 则面向 Flash 开发。

似乎很公平，因为每家公司都曾试图创建自己的版本。例如，考虑[Microsoft 的](http://en.wikipedia.org/wiki/JScript)ECMA 版本。

您还可以从您共享的链接中考虑：

> 为了响应用户对更适合更大和更复杂应用程序的语言的需求，ActionScript 2.0 提供了编译时类型检查和基于类的语法，例如关键字 class 和 extends。

因此，您可以看到大多数更改实际上是用户驱动的，而不是偶然的相似性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:35:58.713

一般来说，符合标准并不意味着只有标准定义的功能必须可用。您可以实施标准以使其符合要求，但您也可以实施其他功能。

您可以将 ECMA 脚本视为一种定义基本语言结构、语法和语义的子集。那么ECMA 只是ActionScript 的一个子集。该语言为该子集添加了广泛的功能。

另一个例子可能是 MySQL。它实现了 SQL 标准，但提供了与标准类似的更多功能。

# objective-c - 使用其他方法同时播放声音

> ID：12699996
> 
> 赞同：0
> 
> 时间：2012-10-02T23:37:43.517
> 
> 标签：objective-c, methods, avaudioplayer, argument-passing

我正在尝试同时播放 2 种不同的声音，当将所有代码放在 2 个单独的方法中时，这非常有效。相反，我想创建一个包含声音播放器代码的方法，并使用歌曲名称作为参数从另一个调用该方法。这是一个作品......几乎。

按下按钮 1 -> 播放声音。好的！！！按下按钮 2 -> sound1 停止，sound2 开始。不好！！！

如何发出声音二以使他/她的手指远离声音一。

这是代码。这可能是一个简单的，但我现在被困了一段时间。

```
.
.
.
-(IBAction) playSound1
{
    NSString *nameOfSong = @"song1";
   [self nowPlay:nameOfSong];
}

-(IBAction) playSound2
{
    NSString *nameOfSong = @"song2";
    [self nowPlay:nameOfSong];
}

-(void) nowReallyPlay:(NSString*) whatsTheName
{ 
    NSURL *playSong = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:whatsTheName ofType:@"mp3"]];  
    self.soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:playSong error:nil];
    soundPlayer.delegate = self;
    soundPlayer.volume= 0.5;
    soundPlayer.numberOfLoops = 0;
    [soundPlayer play];
}
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:12:51.027

我通过定义 2 个不同的 AudioPlayers 并使用 if 语句选择要播放的一个来解决它。

它有效，但在我的诚实看来仍然不是很性感。对于我的程序（我的小女孩的应用程序）它会做得很好，但是如果一个人想要 25 个声音播放呢？您是否必须创建 25 个 AVPlayer？

有没有另一种（更性感）的方式来克服这个障碍？

```
.
.
-(IBAction) playSound1
{
NSString *nameOfSong = @"song1";
NSString *playThis = @"first_song";
[self nowPlay:nameOfSong:playThis];
}

-(IBAction) playSound2
{
NSString *nameOfSong = @"song2";
NSString *playThis = @"second_song";
[self nowPlay:nameOfSong:playThis];
}

-(void) nowReallyPlay:(NSString*) whatsTheName : (NSString*) playWhat
{ 
if (playWhat == @"first_song")
{
    NSURL *playSong = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:whatsTheName ofType:@"mp3"]];  
    self.soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:playSong error:nil];
    sound1Player.delegate = self;
    sound1Player.volume= 0.5;
    sound1Player.numberOfLoops = 0;
    [sound1Player play];

} else if (playWhat == @"second_song"") {

    NSURL *playSong = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:whatsTheName ofType:@"mp3"]];  
    self.sound2Player = [[AVAudioPlayer alloc] initWithContentsOfURL:playSong error:nil];

    sound2Player.delegate = self;
    sound2Player.volume= 0.5;
    sound2Player.numberOfLoops = 0;
    [sound2Player play];
    }
}
.
. 
```