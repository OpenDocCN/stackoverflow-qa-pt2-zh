# StackOverflow 问答 14192000-14192999

# ios - 在没有 TWTweetComposeViewController 的情况下发送推文

> ID：14192003
> 
> 赞同：2
> 
> 时间：2013-01-07T08:02:36.510
> 
> 标签：ios, xcode, ios5, twitter

我想直接从我的 iPhone 应用程序发送推文而不显示`TWTweetComposeViewController`弹出窗口

我也想得到所有的追随者有没有办法从 ios5 上的 twitter 框架中做到这一点，或者我应该使用另一个 api！

如果我必须使用另一个 api，你可以为我指定一个很棒的 api 吗？因为我在互联网上找到的所有 api 都太旧了。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:19:54.420

如果您使用的是 iOS 5.0 及更高版本，您可以使用`TWRequest`我的应用程序以编程方式发布推文。发布推文非常简单，不需要外部框架或任何东西。

你需要`#import <Twitter/Twitter.h>`. 您从 iPhone 帐户商店检索 twitter 帐户（您可以检查是否有多个帐户），然后使用该帐户发布请求。

这是使用图像发布推文的方法示例。

```
- (void)shareTwitterImage:(UIImage *)image
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error)
     {
         if(granted)
         {
             NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

             if ([accountsArray count] > 0)
             {
                 ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                 TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"https://upload.twitter.com/1/statuses/update_with_media.json"] parameters:[NSDictionary dictionaryWithObject:self.textViewOutlet.text forKey:@"status"] requestMethod:TWRequestMethodPOST];

                 [postRequest addMultiPartData:UIImagePNGRepresentation(image) withName:@"media" type:@"multipart/png"];
                 [postRequest setAccount:twitterAccount];

                 [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
                  {
                      //show status after done
                      NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                      NSLog(@"Twiter post status : %@", output);
                  }];
             }
         }
     }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:11:58.340

有很多选择：

好吧，在 iOS 6 上，有 Apple`Social`框架，您可以使用它`SLComposeViewController`来发布到 Twitter 以及 Facebook 和新浪微博，这里是[文档](http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html)。`TWTweetComposeViewController`已弃用，运行 iOS 6 的设备将不得不向后兼容——所以要避免这种情况。

还有[ShareKit](http://getsharekit.com)，但我一般不推荐它，它凌乱而臃肿。最后是[iOS 中的 Oauth 库](http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/)……创建消费者密钥和密钥。[您还可以使用 TWRequest 调用 Twitter API](http://mobiledevelopertips.com/core-services/ios-5-twitter-framework-part-2.html)。

我能想到的就这些了。

罗汉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T10:00:50.600

如果您计划通过 Twitter 集成 TwitterKit 以通过您的自定义 Twitter 应用程序执行推文，那么这可能会对您有所帮助。

[https://stackoverflow.com/a/28602749/1740354](https://stackoverflow.com/a/28602749/1740354)

使用相同的方法，您可以使用以下 API [https://dev.twitter.com/rest/reference/get/followers/list获取关注者列表](https://dev.twitter.com/rest/reference/get/followers/list)

希望能帮助到你。

# ruby-on-rails - 如何使用引导程序的模式显示“删除确认对话框”？不像浏览器的默认设置

> ID：14192009
> 
> 赞同：6
> 
> 时间：2013-01-07T08:03:50.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我在看这个页面（[http://lesseverything.com/blog/archives/2012/07/18/customizing-confirmation-dialog-in-rails/](http://lesseverything.com/blog/archives/2012/07/18/customizing-confirmation-dialog-in-rails/)）它在那里显示了一些代码，但我不明白我是如何可以将它实现到我的应用程序中。

我使用 Rails3.2、Bootstrap.css 和 JQuery。
有人可以告诉我究竟要做什么才能使用引导程序的模态显示“删除确认对话框”吗？

更新：

**资产/javascripts/application.js**

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery-ui
//= require twitter/bootstrap
//= require_tree .
//= require jquery.ui.datepicker
//= require autocomplete-rails 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T09:27:42.163

[博客条目](http://lesseverything.com/blog/archives/2012/07/18/customizing-confirmation-dialog-in-rails/)使用咖啡脚本。假设您正在使用`:confirm`rails 表单中的选项，那么您需要覆盖 Rails 中的默认操作，方法是将以下代码放入`<controller>.js.coffee`您的资产管道 ( `app/assets/javascript`) 中的文件中：

```
$.rails.allowAction = (link) ->
  return true unless link.attr('data-confirm')
  $.rails.showConfirmDialog(link) # look bellow for implementations
  false # always stops the action since code runs asynchronously

$.rails.confirmed = (link) ->
  link.removeAttr('data-confirm')
  link.trigger('click.rails')

$.rails.showConfirmDialog = (link) ->
  message = link.attr 'data-confirm'
  html = """
         <div class="modal" id="confirmationDialog">
           <div class="modal-header">
             <a class="close" data-dismiss="modal">×</a>
             <h3>#{message}</h3>
           </div>
           <div class="modal-body">
             <p>Are you sure you want to delete?</p>
           </div>
           <div class="modal-footer">
             <a data-dismiss="modal" class="btn">Cancel</a>
             <a data-dismiss="modal" class="btn btn-primary confirm">OK</a>
           </div>
         </div>
         """
  $(html).modal()
  $('#confirmationDialog .confirm').on 'click', -> $.rails.confirmed(link) 
```

然后，您可以在视图中使用这样的链接，它们应该显示 Bootstrap 模式而不是标准浏览器弹出窗口：

```
<%= link_to 'Delete', item, :method => :delete, :confirm=>'Are you sure?' %> 
```

**更新**

这也适用于我使用该`:remote => true`选项。

因此，如果我的 index.html.erb 视图中有以下内容：

```
<table>
  <tr>
    <th>Name</th>
    <th>Title</th>
    <th>Content</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @posts.each do |post| %>
  <tr id="<%= post.id %>">
    <td><%= post.name %></td>
    <td><%= post.title %></td>
    <td><%= post.content %></td>
    <td><%= link_to 'Show', post %></td>
    <td><%= link_to 'Edit', edit_post_path(post) %></td>
    <td><%= link_to 'Destroy', post, method: :delete, :remote => true, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table> 
```

控制器中的销毁动作在`format.js`respond_to中：

```
 # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.js
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end 
```

这在 destroy.js.erb 中：

```
$("tr#<%= @post.id %>").fadeOut(); 
```

然后一切正常。点击`Destroy`链接时，会弹出Bootstrap确认对话框，点击OK时，该行会淡出，已经在服务器上销毁。

# javascript - 在 Windows XP 或 2003 上检索 IE 8 上的对象数据时出现问题

> ID：14192013
> 
> 赞同：2
> 
> 时间：2013-01-07T08:04:07.340
> 
> 标签：javascript

这是我在 Windows XP 和 Windows 2003 上使用 JavaScript 和 IE8 时遇到的一个有趣问题。我在页面上创建了一个对象，然后检索有关该对象的信息（例如，它的版本）。尝试获取版本时，我正在运行以下代码：

```
var myObject = document.getElementById(objectId);
console.log(myObject.version); 
```

有趣的是，除了 Windows XP 和 2003 上的 IE8 之外，此代码适用于所有单个浏览器。我已经进行了一些调试，这就是事情变得有趣的地方。

myObject*不*为空，但 myObject.version 未定义。所以我所做的是我在两者之间添加了一个警报，所以现在的代码如下：

```
var myObject = document.getElementById(objectId);
alert(myObject.version);
console.log(myObject.version); 
```

警报导致“未定义”，但是，console.log 现在生成实际版本。如果我在此警报之前添加警报（假设警报（“某事”）），那么第二个警报现在具有实际版本。我假设这是一个时间问题（由于某种原因，对象需要某个时间才能提供存储在其中的数据？）但我不确定这是什么类型的时间问题或如何解决它。

抱歉，描述太长了，但感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:16:19.640

document.getElementById 不返回对象。它返回一个 DOM 元素。因此，您希望在 DOM 元素中看到 .version 属性，而官方 W3C 规范缺少该属性（或者至少我不知道这一点）。

我不确定您希望在 .version 中看到什么，但如果它是自定义的，那么您应该创建一个这样的自定义对象：

```
var o = { version: "..." }
console.log(o); 
```

你说这可能是一个时间问题。如果这是真的，那么我建议在 DOM 完全加载后尝试访问 .version 属性。您可以为此目的使用 jQuery：

```
$(document).ready(function() {
   var myObject = document.getElementById(objectId);
   alert(myObject.version);
   console.log(myObject.version);
}); 
```

您可以在函数中添加 setTimeout 直到 .version 属性存在。

```
var f = function(callback) {

   var check = function() {
       var myObject = document.getElementById(objectId);
       alert(myObject.version);
       console.log(myObject.version);
       if(typeof myObject.version !== "undefined") {
           callback(myObject.version);
       } else {
           setTimeout(check, 1000);
       }
   }

   setTimeout(check, 1000);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:16:05.823

如果将`<script>...</script>`带有js代码的标签放在html文件的末尾会发生什么？在我看来，代码是在 DOM 未准备好时执行的。如果你把它放在最后，那么它将在加载后执行。

# android - Eclipse 快捷键运行不再适用于 XML 文件

> ID：14192015
> 
> 赞同：5
> 
> 时间：2013-01-07T08:04:27.853
> 
> 标签：android, eclipse-adt

由于我更新到 adt 21.0.1，当当前选项卡是一个 android 布局 XML 文件时，我不再可以简单地按“CTRL+F11”来启动当前项目。

使用 Eclipse 4.2 移动版

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T06:55:34.633

Try Preferences->Run/Debug->Launching->Launch Operation = 总是启动之前启动的操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:37:39.633

这是 ADT 21.0.1 中的一个错误。当恢复到 ADT 21.0.0 时，它又可以正常工作了。

附言。我在哪里可以提交这个错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:10:37.297

尝试从右上角改变视角。您的默认透视图可能已更改为不支持/识别 XML/Java EE 的特定于 android 的透视图。

安装 ADT 后，当前选择的透视图可能是 JAVA。
如果存在，请尝试将其更改为 JAVA EE。
我想它应该可以解决你的问题。

# haskell - 管道 3.0：非线性拓扑

> ID：14192018
> 
> 赞同：13
> 
> 时间：2013-01-07T08:04:45.767
> 
> 标签：haskell, haskell-pipes

我正在查看用于流处理的管道 3.0 包。[这个教程](http://hackage.haskell.org/packages/archive/pipes/3.0.0/doc/html/Control-Proxy-Tutorial.html)做得很好而且很清楚，除了我不能把头绕在“压缩和合并”部分。

我的目标是像 ArrowChoice 允许的那样组合管道：

*   我有一个独特的 Either aa 制作人
*   我想将第一个管道应用于左值，另一个应用于右值
*   然后我想合并结果，并继续管道

```
 +----------+                   +------+ - filterLeft ->  pipe1 -> +------------+ 
| producer | - (Either a a) -> | fork |                           | mergeD (?) |
+----------+                   +------+ - filterRight -> pipe2 -> +------------+ 
```

我`fork`在教程中定义如下：

```
fork () = 
    runIdentityP . hoist (runIdentityP . hoist runIdentityP) $ forever $ do
        a <- request ()
        lift $ respond a
        lift $ lift $ respond a

oddOrEven x = if odd x then Left x else Right x
producer = fromListS [1..0] >-> mapD oddOrEven
isLeft (Left _) = True
isLeft (Right _) = False
isRight = not . isLeft
filterLeft = filterD isLeft
filterRight = filterD isRight
pipe1 = mapD (\x -> ("seen on left", x))
pipe2 = mapD (\x -> ("seen on right", x))

p1 = producer >-> fork 
```

问题是我无法使类型正确。本教程似乎只展示了如何将内部（提升）管道链作为自包含会话运行，但我希望能够将其值重新注入管道，而不仅仅是对它们应用效果。我当然尝试过遵循这些类型，但它们很快就会变得有点毛茸茸。

有人可以帮助我吗？提前致谢。

（PS：这种拓扑结构的示例将是对教程的一个很好的补充，或者甚至是关于如何`Control.Arrow`使用管道模拟这些东西的更好的部分）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T18:45:01.867

该`pipe`抽象不支持菱形拓扑或任何形式的类似`Arrow`行为。这不是 API 问题，而是这种场景没有正确或明确定义的行为。

为了解释原因，请允许我将您的图表简化为以下图表：

```
 +----+
          | pL |
+----+ => +----+ => +----+
| p1 |              | p2 |
+----+ => +----+ => +----+
          | pR |
          +----+ 
```

想象一下，我们在`p1`管道上，我们`respond`到`pL`。如果您还记得教程，代理法要求每个`respond`阻塞直到上游。这意味着`p1`直到再次 s 才能重新获得控制权`pL` `request`。所以此时我们有：

*   `p1`阻塞等待`request`来自`pL`

但是，假设它还`pL`没有`request`，而是`respond`s 具有自己的值 to `p2`。所以现在我们有：

*   `p1`阻塞等待`request`来自`pL`
*   `pL`阻塞等待`request`来自`p2`

现在假设`p2`s`request`来自`pR`。代理法规定，`p2`直到`pR` `respond`s 再次获得控制权。现在我们有：

*   `p1`阻塞等待`request`来自`pL`
*   `pL`阻塞等待`request`来自`p2`
*   `p2`阻塞等待`respond`来自`pR`

现在当`pR` `request`sa 值来自时会发生什么`p1`？如果我们查看我们的块列表，`p1`仍然被阻塞等待`request`from `pL`，因此它无法接收`request`from `pR`。`pL`可以说，即使和`pR`共享相同的`request`签名，也没有正确的方法来“打结” 。

更一般地，代理法则确保以下两个不变量：

*   活动管道“上游”的每个管道都将被阻塞`respond`
*   活动管道“下游”的每个管道都将被阻塞`request`

循环或菱形打破了这些不变量。这就是为什么教程非常简短地指出循环拓扑没有“意义”。

你可以在我刚刚给你的例子中看到为什么钻石会破坏这个不变量。当`p1`有控制权时，它位于 的上游`pR`，这意味着`pR`被阻止在`request`. 但是，当`p2`获得控制权时，它位于 的下游`pR`，这意味着`pR`在`respond`. 这导致了一个矛盾，因为`pR`自从控制流过`pL`并且没有`pR`到达`p2`.

## 机器

因此，您的问题有两种解决方案。一种解决方案是将您想要的拆分行为内联到单个管道中。您定义一个将和`pE`的行为组合到单个管道中的管道。`pL``pR`

这个问题的更优雅的解决方案是 Edward 的`machines`. 您定义了一个比支持的代理更受限制的抽象，`ArrowChoice`您在该抽象的域内执行您的箭头操作，然后在完成后将其升级为代理。

如果你眯着眼睛，你可以假装在 Haskell 中有一类当前可用的协程抽象是偏序的。`C1`协程抽象是对象，从协程抽象到协程抽象的箭头`C2`意味着您可以将类型的协程嵌入到类型`C1`的协程中`C2`（即`C1`是 的不正确子集`C2`）。

在这个偏序中，代理可能是终端对象，这意味着您可以将代理视为**协程的汇编语言**。按照汇编语言的类比，代理提供的保证较少，但您可以在代理中嵌入更多限制性的协程抽象（即高级语言）。这些高级语言提供了更大的限制，可以实现更强大的抽象（即`Arrow`实例）。

如果您想要一个简单的示例，请考虑最简单的协程抽象之一：Kleisli 箭头：

```
newtype Kleisli m a b = Kleisli { runKleisli :: a -> m b }

instance Category (Kleisli m) where
    id = Kleisli return
    (Kleisli f) . (Kleisli g) = Kleisli (f <=< g) 
```

Kleisli 箭头肯定比代理更具限制性，但由于这种限制，它们支持`Arrow`实例。因此，当您需要一个`Arrow`实例时，您可以使用 Kleisli 箭头编写代码，并使用`Arrow`符号组合它，然后当您完成后，您可以使用以下命令将更高级别的 Kleisli 代码“编译”为代理汇编代码`mapMD`：

```
kleisliToProxy :: (Proxy p) => Kleisli m a b -> () -> Pipe p a b m r
kleisliToProxy (Kleisli f) = mapMD f 
```

此编译遵循函子定律：

```
kleisliToProxy id = idT

kleisliToProxy (f . g) = kleisliToProxy f <-< kleisliToProxy g 
```

因此，如果您的分支代码可以用箭头编写，那么在该代码部分`Kleisli`使用`Kleisli`箭头，然后在完成后将其编译为代理。使用这个技巧，您可以将多个协程抽象编译为代理抽象来混合它们。

# java - Android sqlite rawquery选择args问题

> ID：14192019
> 
> 赞同：1
> 
> 时间：2013-01-07T08:04:48.393
> 
> 标签：java, android, sqlite

我正在尝试运行使用 rawquery 来运行带有主键别名的查询以使其成为_id，以便我可以使用 SimpleCursorAdapter，这就是我所拥有的：

```
String sel = DatabaseListDB.COLUMN_DATABASE_NAME;
Cursor results = db.rawQuery("SELECT ? as _id FROM DatabaseList", 
    new String[] {sel}); 
```

在我的 SqlLiteHelperClass

```
public static final String COLUMN_DATABASE_NAME = "databaseName"; 
```

是我想要的列名和我的主键。问题是当我运行此查询时，结果将“数据库名称”作为表中的值而不是实际值。我可以运行查询

```
Cursor results = db.rawQuery("SELECT databaseName as _id FROM DatabaseList", 
    null); 
```

它工作正常，我不知道为什么我不能正确使用 selectionargs。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:20:56.327

`?`应该用于**WHERE**参数。在您的情况下，您应该简单地将查询更改为：

```
Cursor results = db.rawQuery(String.format("SELECT %s as _id FROM DatabaseList", sel)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:18:39.033

从`developer.android.com`，你只能放“？” 在 where 子句上，而不是要查询的列：

*   selectionArgs：您可以在查询的 where 子句中包含 ?s，它将被 selectionArgs 中的值替换。这些值将绑定为字符串。

# python - 如何在python中调试Web请求

> ID：14192021
> 
> 赞同：0
> 
> 时间：2013-01-07T08:04:54.083
> 
> 标签：python, debugging

在开发 python cli 应用程序时，我一直在使用 pdb 通过终端进行调试。

我很难找到可以向我展示如何在 Web 请求的上下文中使用 pdb 的示例（使用 apache 或其他一些 Web 服务器）。在 PHP 中，将 XDEBUG_SESSION_START 作为请求的一部分传递会使我进入调试会话。我想知道如何用 pdb 完成同样的事情。

# mysql - 如何在不删除 MySQL 中的数据的情况下删除分区？

> ID：14192028
> 
> 赞同：28
> 
> 时间：2013-01-07T08:05:30.727
> 
> 标签：mysql, sql, database, database-partitioning, database-administration

我有一张像这样的桌子：

```
create table registrations( 
id int not null auto_increment primary key,
name varchar(50),
mobile_number varchar(13)) 
engine=innodb 
partition by range(id) (
partition p0 values less than (10000),
partition p0 values less than (20000),
partition p0 values less than max value); 
```

不完全像上面，但类似......

现在假设我的表有 200000 行，现在我想删除表上的分区并根据没有 MAX VALUE 的要求重新组织它们。

任何人都可以帮助我重新排列分区而不删除数据或删除表并重新创建它吗？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-08-01T18:41:04.343

```
ALTER TABLE tbl REMOVE PARTITIONING; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T08:59:48.433

`p0`您可以使用`ALTER TABLE .. REORGANIZE PARTITION`命令重新组织分区。

[http://dev.mysql.com/doc/refman/5.5/en/partitioning-management-range-list.html](http://dev.mysql.com/doc/refman/5.5/en/partitioning-management-range-list.html)

> 如果您打算在不丢失数据的情况下更改表的分区，请使用 ALTER TABLE ... REORGANIZE PARTITION

```
ALTER TABLE registrations 
REORGANIZE PARTITION p0 INTO (
    PARTITION p0 VALUES LESS THAN (10000),
    PARTITION p0 VALUES LESS THAN (20000)
); 
```

请注意，在您实际创建多个分区之前，这将没有意义，例如

```
ALTER TABLE registrations 
REORGANIZE PARTITION p0 INTO (
    PARTITION p0 VALUES LESS THAN (10000),
    PARTITION p1 VALUES LESS THAN (20000),
    PARTITION p2 VALUES LESS THAN MAXVALUE
); 
```

看看[MySQL 中的 RANGE 分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning-range.html)

如果你的分区`p2`变得太大，你可以用同样的方法分割它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T02:57:35.163

重新排列分区不需要删除所有现有分区。您可以直接在语法中指定新的分区`ALTER TABLE`，不会丢失任何数据。

```
ALTER TABLE registrations
PARTITION by RANGE(id) (
PARTITION p1 VALUES LESS THAN (10000),
PARTITION p2 VALUES LESS THAN (20000),
PARTITION p3 VALUES LESS THAN (30000),
PARTITION p4 VALUES LESS THAN (40000),
PARTITION p5 VALUES LESS THAN (MAXVALUE); 
```

*PS 用 MySQL 5.7.11 测试*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T08:21:33.420

如果要在保留分区的同时重新排列数据，
可以查看 ALTER TABLE
命令的 REORGANIZE PARTITION 和 COALESCE PARTITION 子句。
[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

# windows - 想要在 Windows 上移植现有的 rsync

> ID：14192029
> 
> 赞同：2
> 
> 时间：2013-01-07T08:05:42.583
> 
> 标签：windows, rsync, msys, mingw-w64

我知道目前有用于 Windows 的 rsync 作为 G-Rsync。就是这样：- [http://sourceforge.net/projects/grsync-win/](http://sourceforge.net/projects/grsync-win/)

但是，我想做的只是让现有的 rsync 代码从这里可用：- [https://rsync.samba.org/download.html](https://rsync.samba.org/download.html) 在 Windows 上运行。

我已经检查过：- [https://stackoverflow.com/questions/528298/rsync-for-windows](https://stackoverflow.com/questions/528298/rsync-for-windows) 但是，这不是我想要的。另外，我发现[https://github.com/MatthewSteeples/rsync.net](https://github.com/MatthewSteeples/rsync.net) rsync 端口到 .net。

此外，Windows 使用 WinSock 而不是套接字系统调用（因此，我无法从头开始为 Windows 编写整个 rsync）。所以，我在这里检查了 MingW-w64：- [http://mingw-w64.sourceforge.net](http://mingw-w64.sourceforge.net)

我想一定有一些方法可以将现有的 rsync 代码移植到 Windows。此外，以下链接对我没有帮助：- [Win32 rsync 端口的技术障碍](https://stackoverflow.com/questions/34463/technical-hurdles-for-win32-rsync-port)

我不太确定这个 MingW-w64 是否对我有帮助。我可以使用这个工具在 Windows 上移植现有的 rsync。我也想知道，MingW-w64是干什么用的？另外，如果我在这里遗漏任何东西，请通知我。

**[编辑]** 我找到了这些项目

1.  [https://github.com/meeuw/rsync-mingw32](https://github.com/meeuw/rsync-mingw32) （找不到该项目的文档，readme.txt 与 rsync 相同）。

2.  [http://sourceforge.net/projects/mingw/files/MSYS/Extension/rsync/rsync-3.0.8-1/](http://sourceforge.net/projects/mingw/files/MSYS/Extension/rsync/rsync-3.0.8-1/) （这需要MSYS控制台来配置MSYS-build-rsync）。

但是，无法弄清楚这些选项是否符合我的目的？

谁能评论一下上面提到的这两个项目是关于什么的？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-26T23:17:43.870

rsync 是为 Unix-y（POSIX 兼容）系统设计和构建的。Windows 不是 POSIX 兼容的 Unix 系统。这就是为什么您不能直接在 Windows 上构建源代码的原因。

这取决于您的应用程序要实现的目标，但我认为您已经找到了适用于 Windows 的两个主要 POSIX 层（Cygwin 和 MinGW）。这两个 POSIX 层在标准 Windows 之上增加了一定程度的 POSIX 合规性。这使得 rsync 等应用程序可以轻松移植到 Windows 上运行。

因此，要回答您最初的问题：如果您想将 rsync 移植到 Windows，那么您将需要重写大部分 rsync 或使用 POSIX 合规层，例如 Cygwin 或 MinGW。

# java - 设置 Java Deflater（和 Inflater）输出字节缓冲区的大小

> ID：14192030
> 
> 赞同：5
> 
> 时间：2013-01-07T08:06:01.350
> 
> 标签：java, zlib, deflate

我需要缩小一个或多个字节数组，然后将它们膨胀回正常大小。我查看了[api docs](http://docs.oracle.com/javase/6/docs/api/java/util/zip/Deflater.html)中给出的示例，并找到了其他一些示例。

在查看了这些示例之后，我有两个可能不相关的问题，但是当我试图理解这一点时，它们似乎是相互关联的。

1.  在 API 文档示例中，Inflater 和 Deflater 的输出缓冲区都设置为 1024 字节。示例数据只是一个简短的句子，因此是合理的。但是我怎么知道输出缓冲区有多大呢？还是 Deflater（和 Inflater）会根据需要调整输出缓冲区的大小？

2.  我可以使用 ByteArrayOutputStream 并在其周围包装 DeflatorOutputStream ，而不是猜测缓冲区的大小吗？由于 ByteArrayOutputStream 改变了字节数组的大小，因此没有必要知道输出的大小或猜测它，就像在 API 示例中似乎必须做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:05:09.897

> 1.在 API 文档示例中，Inflater 和 Deflater 的输出缓冲区都设置为 1024 字节。示例数据只是一个简短的句子，因此是合理的。但是我怎么知道输出缓冲区有多大呢？还是 Deflater（和 Inflater）会根据需要调整输出缓冲区的大小？

在流中，缓冲区只是传递到另一个流之前的临时空间。更改缓冲区大小可以改变性能，但与处理的数据量几乎没有关系。

> 2.与其猜测缓冲区的大小，我可以使用 ByteArrayOutputStream 并在其周围包装 DeflatorOutputStream 吗？由于 ByteArrayOutputStream 改变了字节数组的大小，所以没有必要知道输出的大小或猜测它，就像在 API 示例中似乎必须做的那样。

您可以这样做，也可以将其直接发送到您希望数据发送到的流中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T20:42:09.320

下面是一个使用字节数组进行压缩和解压的例子：

```
import java.util.zip.Deflater;
import java.util.zip.InflaterInputStream;
...

byte[] sourceData; // bytes to compress (reuse byte[] for compressed data)
String filename; // where to write
{
    // compress the data
    Deflater deflater = new Deflater(Deflater.DEFAULT_COMPRESSION);
    deflater.setInput(sourceData);
    deflater.finish();
    int compressedSize = deflater.deflate(data, 0, sourceData.length, Deflater.FULL_FLUSH);

    // write the data   
    OutputStream stream = new FileOutputStream(filename);
    stream.write(data, 0, compressedSize);
    stream.close();
}

{
    byte[] uncompressedData = new byte[1024]; // where to store the data
    // read the data
    InputStream stream = new InflaterInputStream(new FileInputStream(filename)); 
    // read data - note: may not read fully (or evenly), read from stream until len==0
    int len, offset = 0;
    while ((len = stream.read(uncompressedData , offset, uncompressedData .length-offset))>0) {
        offset += len;
    }           
    stream.close();
} 
```

# apache - 没有 .php 扩展名的 htaccess 重定向

> ID：14192032
> 
> 赞同：0
> 
> 时间：2013-01-07T08:06:29.983
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, apache2

我最近更改了一个目录`/old_dir/`以`/new_dir/`使用它：

`RedirectMatch 301 /old_dir/(.*) /new_dir/$1`

这似乎非常适合网址：

`http://www.mysite.com/old_dir/test.php?var=xxxx`

去

`http://www.mysite.com/new_dir/test.php?var=xxxx`

文件名在哪里`test.php`。但在很多地方我使用：

`http://www.mysite.com/old_dir/test?var=xxxx`

这提出了：

`The requested URL /old_dir/test was not found on this server.`

不使用 .php 扩展名利用了某种 apache 插件，该插件知道它是一个 php 处理程序，这似乎会扰乱重定向，因为它说它现在不存在。

我不知道如何解决这个问题。

编辑：所有解决方案都针对这种特殊情况，但请注意，我有大约 1000 个其他文件可能不是 php，或者名称相同。

现在，我只是在 old_dir 中创建了一个名为“test”的符号链接，以指向 new_dir 的 test.php。但我仍在寻找包含我的场景的非特定解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:33:55.377

你试过使用 mod_rewrite 吗？

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^([^/]+)/([^/]+)$ $1/$2.php [QSA] 
RewriteRule ^old_dir/([^/]+)/$ new_dir/$1.php [QSA] 
```

# performance - 具有海量数据的 ArcGIS Map 应用程序 web flex 与桌面

> ID：14192042
> 
> 赞同：1
> 
> 时间：2013-01-07T08:07:03.867
> 
> 标签：performance, apache-flex, web-applications, desktop-application, arcgis-server

我们正在开发 ArcGIS Server 上的地图应用程序，该应用程序需要处理从服务器检索到的大量记录 100K+。

使用 Flex 或独立应用程序将此类应用程序构建为 Web 哪个更好？该应用程序使用空间分析空间查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:52:38.107

Flex 不会成功 ) 在客户端 PC 上加载所有大量数据时，它会在 1k 时死掉:) 使用 Flex 实现它的唯一方法是：

1.  在您的服务器上使用地理数据库（忘记 shapefile）
2.  为该 100k 要素数据集创建一些 MapService（如果您希望它在您的应用程序中可见）
3.  为您的分析创建地理处理工具（模型、脚本）。并将其作为服务发布在您的 AGS 上。
4.  使用 AGS API for Flex 调用这些服务。
5.  让您的服务器完成工作，您的 Flex 应用程序只会得到结果

*您永远不应该在客户端 PC 上加载那么多数据*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:42:00.767

我会建议桌面。然后你可以把数据放到AIR的sql数据库中，这样可以节省以后的冗余下载，并且可以非常快速地处理数据。

# symfony - 如何从 Symfony2 上的另一个实体加载实体

> ID：14192047
> 
> 赞同：0
> 
> 时间：2013-01-07T08:07:36.313
> 
> 标签：symfony

我有 2 个实体

1 `Surgery/PatientBundle/Entity/Patients`

2 `Surgery\LoginBundle\Entity\User`

想要在患者中获取用户的实体方法 getIdUser 并使用到患者中。我试过用

```
use Surgery\LoginBundle\Entity\User; 
```

在患者实体中，但它不起作用。我仍然收到错误“调用未定义的函数”

# html - Flowplayer 5.2 动态网址

> ID：14192049
> 
> 赞同：1
> 
> 时间：2013-01-07T08:07:44.087
> 
> 标签：html, flash, url, dynamic, flowplayer

有一个问题/问题，我可以在以下方面使用您的帮助：

我调整了 flowplayer 3.2.15 的示例以引入动态 URL，并在每次调用该函数时为该视频创建一个新的 flowplayer。效果很好，代码如下：

```
<!doctype html>
<html>
<head>
<title>Flowplayer playlist API : Flowplayer</title>
<link rel="shortcut icon" href="http://flash.flowplayer.org/favicon.ico">
<style>
    body{
        width:982px;
        margin:50px auto;
        font-family:sans-serif;
    }
    a:active {
        outline:none;
    }
    :focus { -moz-outline-style:none; }

    .palert {
        padding: 12px;
        color: black;
        background-color: #ededed;
        box-shadow: none;
    }
    #player {
    width:425px;
    height:330px;
    float:left;
    margin:0 0 40px 20px;
}
</style>

<script src="http://releases.flowplayer.org/js/flowplayer-3.2.11.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js" type="text/javascript" charset="utf-8"></script>
<script src="http://releases.flowplayer.org/js/flowplayer.playlist-3.2.10.min.js" type="text/javascript" charset="utf-8"></script>

<script>

function showVideoPreview(videoUrl)
{
    $(function() 
    {           
        flowplayer("player", "flowplayer-3.2.15.swf", {clip: { url: videoUrl, scaling: 'fit' }});
    });
}

showVideoPreview('http://www.tools4movies.com/trailers/1012/A%20Good%20Day%20To%20Die%20Hard.mp4');

</script>

<link rel="stylesheet" type="text/css" href="playlist.css"/>
</head>

<body>
<button onClick="showVideoPreview('http://www.tools4movies.com/trailers/1012/Alex%20Cross.mp4');">Recreate</button>
<div id="player"></div>
<br clear="all"/>
</body>
</html> 
```

但是，因为它是 3.2.15，它不适用于 HTML5。所以我想升级此代码以使用 5.2。我尝试采用 5.2 示例并应用相同的逻辑，但视频从未出现过，也没有显示任何 javascript 错误。谁能提供一些指导或帮助？这是我尝试过的：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="skin/minimalist.css" />
<style>
body { font: 12px "Myriad Pro", "Lucida Grande", sans-serif; text-align: center; padding-top: 5%; }
#player {
    width:425px;
    height:330px;
    float:left;
    margin:0 0 40px 20px;
}
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://releases.flowplayer.org/5.2.1/flowplayer.min.js"></script>
<script>
function showVideoPreview(videoUrl)
{
    $(function() 
    {           
        flowplayer("player", "http://releases.flowplayer.org/5.2.1/flowplayer.swf", {clip: { url: videoUrl, scaling: 'fit' }});
    });
}

showVideoPreview('http://stream.flowplayer.org/bauhaus/624x260.mp4');
</script>
</head>
<body>
<div class="flowplayer" id="player" data-swf="http://releases.flowplayer.org/5.2.1/flowplayer.swf"></div>
</body>
</html> 
```

非常感谢你们，我很感激。

# c - 在向量中间插入一个数字

> ID：14192051
> 
> 赞同：0
> 
> 时间：2013-01-07T08:07:57.987
> 
> 标签：c, vector

我在下面制作了这段代码：

```
#include <stdio.h>
#include <stdlib.h>

main()
{
    int n, i, v[1000];
    printf("Type the size of the vector: ");
    scanf("%d", &n);
    for (i = 0; i < n; i++) {
        printf("Type a number: ");
        scanf("%d", &v[i]);
    }
    for(i=0;i<n;i++){
        printf ("%d ", v[i]);
    }
    system ("pause");
    return 0;
} 
```

它正在工作，但我现在需要做的是将另一个数字放在这个向量的中间。因此，如果您在其上放置 4 个数字，例如 1、2、3 和 4，我需要在中间放置另一个数字，**例如**1、2、9、3 和 4。有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:23:51.820

```
int k;

k = n / 2;

for (i = n; i > k; --i)
   v[i] = v[i - 1];
v[k] = insertionValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:21:54.610

你必须重新分配你的向量，将中间 1 之后的所有值向右移动，然后将你想要的值分配给中间。

# android - 如何批量读取TXT文件？

> ID：14192052
> 
> 赞同：0
> 
> 时间：2013-01-07T08:07:59.707
> 
> 标签：android

现在我正在开发一个阅读器。如果txt文件太大，读取时间会很长，没有反应。所以我想设置一个方法，就像它可以在洗澡时读取 txt 文件一样。

我写了下面的代码。它可以翻页。但它不能连续翻页。我应该怎么做？

```
 Vector string; 
 int begin = 0;

 public void readTxtByPage(String fileName) {
        string.clear();
        FileReader fr  = null;
        BufferedReader br = null;
        try {
            fr = new FileReader(filePath + fileName);
            br = new BufferedReader(fr);
            br.skip(begin);
            String content = "";
            char ch;
            int line = 0;
            int w;
            int len;
            int start;
            FontMetrics fm = paint.getFontMetrics();
            fontHeight = (int) Math.ceil(fm.descent - fm.top) + 2;
            pageLineNum = textHeight / fontHeight;
            float[] widths = new float[1];
            while ((content = br.readLine()) != null) {
                len = content.length();
                w = 0;
                start = 0;
                for (int i = 0; i < len; i++) {
                    ch = content.charAt(i);
                    paint.getTextWidths(String.valueOf(ch), widths);
                    w += Math.ceil(widths[0]);
                    if (w > textWidth) {
                        string.addElement(content.substring(start, i));
                        begin += (i - start);
                        start = i;
                        w = 0;
                        line++;
                        if (line >= pageLineNum) {
                            System.out.println("begin===>"+begin);
                            return;
                        }
                    }
                }
                string.addElement(content.substring(start));
                begin += (len + 2 - start);
                line++;
                if (line >= pageLineNum) {
                    return;
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }finally{
            try {
                br.close();
                fr.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return;
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:30:51.007

听起来最好是在后台线程中完成这项工作，然后您可以告诉读者睡觉，然后在您希望线程再次开始阅读时通知它。这样它就不会冻结您的 UI，并且可以批量读取这些位。也许在 onTouchEvent 期间通知线程。

# ckeditor - 如何使用Jquery按类选择CKEditor中的元素

> ID：14192054
> 
> 赞同：5
> 
> 时间：2013-01-07T08:08:05.347
> 
> 标签：ckeditor

我无法找到如何使用 jQuery 选择器按类在 CKEditor 中选择元素，因此不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T11:09:27.757

`CKEDITOR.instances.editor1.window.getFrame().$`检索编辑器可编辑区域的本机 DOM 元素。所以：

```
$( CKEDITOR.instances.editor1.window.getFrame().$ ).contents().find( anything ); 
```

应该能解决你的问题。

* * *

另请注意，CKEditor 提供了一个用于 DOM 操作的 API：

```
CKEDITOR.instances.editor1.document.getById( 'someId' );
CKEDITOR.instances.editor1.document.getElementsByTag( 'div' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T15:46:34.237

这个对我有用：

```
$(youreditor.document.find('anything')) 
```

你的编辑在哪里

```
youreditor = CKEDITOR.replace( '' ... etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-25T06:05:48.437

如果您使用**jQuery Adapter**（在 4.4.3 版本上测试）

```
$( $('.your_selector').ckeditor().editor.window.getFrame().$).contents().find('a.super_link') 
```

# android - 如何仅将图像添加到 listFragment 第一项？

> ID：14192056
> 
> 赞同：2
> 
> 时间：2013-01-07T08:08:37.347
> 
> 标签：android, android-layout, android-fragments, android-listfragment, android-fragmentactivity

我已经在 android 4.0 中实现了片段。我只想为第一项添加图像到列表片段中。

我已经实现了列表片段如下：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
     dummyContent = (new listFragmentAdapter<DummyContent.DummyItem>(getActivity(),DummyContent.ITEMS));
setListAdapter(dummyContent);   
    } 
```

如下`listFragmentAdapter`：

```
 public listFragmentAdapter(Context context, T[] items) {

            super(context,R.layout.list_fragment_text, items);
            this.ctx = context;

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View view = super.getView(position, convertView, parent);
            TextView textView = (TextView) view.findViewById(R.id.cust_view);
            Typeface tf = Typeface.createFromAsset(ctx.getAssets(), "fonts/segoeuil.ttf");
            textView.setTypeface(tf);

            return view;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:36:17.720

`ImageView`你需要在你的布局中至少有一个。然后，在方法中添加/删除您的图像（可绘制/位图）`getView()`，如下所示：

```
LayoutInflater mInflater = LayoutInflater.from(context);
itemView = mInflater.inflate(R.id.cust_view, null); 

// if first item
if (position == 0) {
    imageView = (ImageView) itemView.findViewById(R.id.imageViewFirstRow);
    imageView.setImageResource(R.drawable.yourImage);
    imageView.setVisibility(Visible.VISIBLE);
}
else {
    // hide/remove image
    imageView.setVisibility(Visible.INVISIBLE); // or GONE, as you wish
} 
```

希望这可以帮助。

# oauth - 推特 oauth php

> ID：14192057
> 
> 赞同：0
> 
> 时间：2013-01-07T08:08:40.077
> 
> 标签：oauth, oauth-2.0, twitter-oauth

我正在为我的应用程序实现一个基于 twitter oAuth 的登录系统，我想获取技术用户的电子邮件地址和其他基本信息，是否可以获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:10:05.037

是的，可以获得用户的基本信息，这是您可以使用 twitter Rest API 执行的所有操作的列表。

[https://dev.twitter.com/docs/api/1.1](https://dev.twitter.com/docs/api/1.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:20:49.840

[获取帐户/设置](https://dev.twitter.com/docs/api/1.1/get/account/settings)

返回验证用户的设置（包括当前趋势、地理位置和睡眠时间信息）。

我找不到登录用户的电子邮件，但您可以看到其他信息。

例子：

```
{

    "always_use_https": true, 

    "discoverable_by_email": true, 

    "geo_enabled": true, 

    "language": "en", 

    "protected": false, 

    "screen_name": "theSeanCook", 

    "show_all_inline_media": false, 

    "sleep_time": {

        "enabled": false, 

        "end_time": null, 

        "start_time": null

    }, 

    "time_zone": {

        "name": "Pacific Time (US & Canada)", 

        "tzinfo_name": "America/Los_Angeles", 

        "utc_offset": -28800

    }, 

    "trend_location": [

        {

            "country": "United States", 

            "countryCode": "US", 

            "name": "Atlanta", 

            "parentid": 23424977, 

            "placeType": {

                "code": 7, 

                "name": "Town"

            }, 

            "url": "http://where.yahooapis.com/v1/place/2357024", 

            "woeid": 2357024

        }

    ], 

    "use_cookie_personalization": true

} 
```

# objective-c - 使用核心图在可可上绘制条形图

> ID：14192058
> 
> 赞同：0
> 
> 时间：2013-01-07T08:08:51.403
> 
> 标签：objective-c, core-plot

我是 Mac 应用程序开发的新手。我正在使用核心图框工作绘制条形图。实际上我想要的是，当我选择一个月时，我想绘制过去 6 个月的图表。当我选择“12/2012”时，我能够正确绘制过去 6 个月的图表。但是当我选择“02/2013”​​时，图表只显示一月和二月，而不是前几个月。

```
- (int)maxVal:(NSMutableArray *)arr {
    NSDictionary *dict  = [arr objectAtIndex:0];
    NSString* dictValue = [dict objectForKey:@"X_VAL"];
    int mxm = [dictValue intValue];
    for (int i=0; i<[arr count]; i++) {
        if ([[[arr objectAtIndex:i] objectForKey:@"X_VAL"] intValue] > mxm) {
            mxm = [[[arr objectAtIndex:i] objectForKey:@"X_VAL"] intValue];
        }
    }
    return mxm;

}

- (int)minVal:(NSMutableArray *)arr {

    int mn = [[[arr objectAtIndex:0] objectForKey:@"X_VAL"] intValue];
    for (int i=0; i<[arr count]; i++) {
        if ([[[arr objectAtIndex:i] objectForKey:@"X_VAL"] intValue] < mn) {
            mn = [[[arr objectAtIndex:i] objectForKey:@"X_VAL"] intValue];
        }
    }
    return mn;
}

- (void)drawGraph {
    if ([graphMutableArray count] > 0) {
        NSRect viewRect = [aGraphView bounds];
        double xAxisStart = 0, yAxisStart = 0, xAxisLength = [graphMutableArray count], yAxisLength = [[graphMutableArray valueForKeyPath:@"@max.Y_VAL"] doubleValue], tenthPartOfYAxis = (yAxisLength + (yAxisLength / 10));
        NSLog(@"Y Axis Length = %f", yAxisLength);
        for (int k = 0; k < xAxisLength; k++) {
            NSDictionary *dict1 = [graphMutableArray objectAtIndex:k];
            NSDictionary *dict2 = [dict1 objectForKey:@"X_VAL"];
            NSDictionary *dict3 = [dict1 valueForKey:@"Y_VAL"];
            NSLog(@"dict 2 = %@ and dict 3 = %@", dict2, dict3);
        }

        graph = [[CPTXYGraph alloc] initWithFrame:viewRect];
        [graph applyTheme:[CPTTheme themeNamed:kCPTSlateTheme]];//kCPTDarkGradientTheme]];//kCPTStocksTheme]];
        aGraphView.hostedGraph = graph;
        graph.plotAreaFrame.masksToBorder = NO;
        graph.paddingLeft = 90.0;
        graph.paddingTop = 20.0;
        graph.paddingRight = 20.0;
        graph.paddingBottom = 70.0;

        // Add plot space for horizontal bar charts
        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
        plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(xAxisStart)
                                                        length:CPTDecimalFromDouble(xAxisLength + 1)];
        plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(yAxisStart)
                                                        length:CPTDecimalFromDouble(tenthPartOfYAxis)]; 

        CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
        CPTXYAxis *x = axisSet.xAxis;
        NSString *cptDecimalstr = [NSString stringWithFormat:@"%f", xAxisLength /[x.axisLabels count]];
        x.majorIntervalLength = CPTDecimalFromString(cptDecimalstr);
        x.minorTicksPerInterval = 1;
        x.majorTickLineStyle = nil;
        x.minorTickLineStyle = nil;
        x.axisLineStyle = nil;
        x.titleLocation = CPTDecimalFromFloat(1.0f);
        x.titleOffset = 55.0f;

       // Define some custom labels for the data elements
        x.labelRotation = M_PI/4;
        x.labelingPolicy = CPTAxisLabelingPolicyNone;   

        NSLog(@"Max = %d and Min = %d", [self maxVal:graphMutableArray], [self minVal:graphMutableArray]);

        NSMutableArray *tempCustomTickLocations = [NSMutableArray arrayWithObjects:[NSNumber numberWithFloat:0.5],[NSNumber numberWithFloat:1.7],[NSNumber numberWithFloat:3.0],[NSNumber numberWithFloat:4.1],[NSNumber numberWithFloat:5.3],[NSNumber numberWithFloat:6.5],[NSNumber numberWithFloat:6.9],[NSNumber numberWithFloat:7.1],[NSNumber numberWithFloat:7.5],[NSNumber numberWithFloat:8.1],[NSNumber numberWithFloat:8.5],[NSNumber numberWithFloat:8.9],nil];

        NSMutableArray *tempMonthsArr = [NSMutableArray arrayWithObjects:@"",@"January", @"February", @"March", @"April", @"May", @"June", @"July", @"August", @"September", @"October", @"November", @"December", nil];

        NSMutableArray *tempMonthsMutArr 
        = [[[NSMutableArray alloc] initWithCapacity:[graphMutableArray count]] autorelease], *tempMutCustomTickLocations 
        = [[[NSMutableArray alloc] initWithCapacity:[graphMutableArray count]] autorelease];

        int k = 0;

        for (int l = [self minVal:graphMutableArray]; l <=[self maxVal:graphMutableArray]; l++) {
            NSString *tempMonth = [tempMonthsArr objectAtIndex:l];
            [tempMonthsMutArr addObject:tempMonth];
            [tempMutCustomTickLocations addObject:[tempCustomTickLocations objectAtIndex:k]];
            k = k + 1;
            NSLog(@"tempMutCustomTickLocations= %@",tempMutCustomTickLocations);
        }

        if ([self minVal:graphMutableArray] == [self maxVal:graphMutableArray]) {
            NSString *tempMonth = [tempMonthsArr objectAtIndex:[self minVal:graphMutableArray]];
            [tempMonthsMutArr addObject:tempMonth];
            [tempMutCustomTickLocations addObject:[tempCustomTickLocations objectAtIndex:0]];
        }

        NSMutableArray *customTickLocations = [NSMutableArray arrayWithArray:tempMutCustomTickLocations];

        NSArray *xAxisLabels = [NSArray arrayWithArray:tempMonthsMutArr];
        NSUInteger labelLocation = 0;
        NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[graphMutableArray count]];

        for (NSNumber *tickLocation in customTickLocations) {
            //NSLog(@"tickLocation==%d",tickLocation.intValue);
            CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText: [xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
            newLabel.tickLocation = [tickLocation decimalValue];//[tickLocation decimalValue];
            newLabel.offset = x.labelOffset + x.majorTickLength;
           // NSLog(@"[tickLocation floatValue] = %f", [tickLocation floatValue]);
            newLabel.offset = x.labelOffset + x.majorTickLength;
            //NSLog(@"x.labelOffset = %f, x.majorTickLength = %f and newLabel.offset = %f", x.labelOffset, x.majorTickLength, newLabel.offset);
            newLabel.rotation = M_PI/4;
            //NSLog(@"-=-=-=--=-=-=- %f",x.labelOffset);
            //NSLog(@"%f", x.majorTickLength );

            [customLabels addObject:newLabel];
            //NSLog(@"%@",customLabels);

            [newLabel release];
        }

        x.axisLabels =  [NSSet setWithArray:customLabels];
        NSLog(@"%@",x.axisLabels);

        CPTXYAxis *y = axisSet.yAxis;
        y.axisLineStyle = nil;
        y.majorTickLineStyle = nil;
        y.minorTickLineStyle = nil;
        NSString *cptDecimalStr = [NSString stringWithFormat:@"%f", yAxisLength / 10];
        y.majorIntervalLength = CPTDecimalFromString(cptDecimalStr);
        //y.constantCoordinateValue = CPTDecimalFromString(@"0");
        // y.title = @"Y Axis";
        y.titleOffset = 45.0f;
        y.titleLocation = CPTDecimalFromFloat(150.0f);
        //CPTPieChart 

        CPTBarPlot *plot = [[CPTBarPlot alloc] initWithFrame:CGRectZero];
        plot.plotRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0)
                                                      length:CPTDecimalFromDouble(xAxisLength)];
        plot.barOffset = [[NSDecimalNumber decimalNumberWithString:@"0.50"]
                          decimalValue]; //CPTDecimalFromDouble(0.50f);

        plot.fill = [CPTFill fillWithColor:[CPTColor lightGrayColor]];
        plot.dataSource = self;

        [graph addPlot:plot ];//toPlotSpace:plotSpace];
    }
    else {

        aGraphView.hostedGraph = nil;
        [[NSAlert alertWithMessageText:@"No Data Found" defaultButton:@"Ok" alternateButton:nil otherButton:nil informativeTextWithFormat:@""] runModal];

    }
} 
```

谁能帮我解决问题！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:49:07.933

您需要更新`xRange`绘图空间的。这会将轴标签移动到正确的位置并在新范围内绘制数据点。您还需要将新数据点添加到绘图中。

# asp.net-mvc-3 - 如何正确地将 ISession 注入存储库？

> ID：14192061
> 
> 赞同：1
> 
> 时间：2013-01-07T08:09:17.657
> 
> 标签：asp.net-mvc-3, nhibernate, dependency-injection

请在以下情况下纠正我。（问题在最后）

（我问了一个类似的问题，没有组织，投票结束。所以我把这里的问题总结成一个可以用准确答案回答的范围。）

我正在使用 nhibernate 作为 ORM 开发具有多个层的 Web 应用程序。我的层结构如下

1.  模型层
2.  存储层
3.  服务层
4.  界面层

有了上面的层，类和接口放置如下。

**ProductController.cs（用户界面层）**

```
public class ProductController : Controller
{
    ProductServices _ProductServices;
    NHibernate.ISession _Session;

    public ProductController()
    {
        _Session = SessionManager.GetCurrentSession();

        _ProductServices = new ProductServices(
            new ProductRepository(), _Session);
    }
    // Cont..
 } 
```

**ProductServices.cs（服务层）**

```
public class ProductServices : IProductServices
{
    protected IProductRepository _ProductRepository;
    protected NHibernate.ISession _Session;

    public ProductServices(IProductRepository productRepository,
        NHibernate.ISession session)
    {
        _ProductRepository = productRepository;
        _Session = session;
        _ProductRepository.SetSession(_Session);
    }

    // cont...
} 
```

**ProductRepository.cs（存储库层）**

```
public class ProductRepository : IProductRepository
{
    NHibernate.ISession _Session;

    public void SetSession(NHibernate.ISession session)
    {
        _Session = session;
    }

    public IEnumerable<Product> FindAll()
    {
        return _Session.CreateCriteria<Product>().List<Product>();
    }

    //cont..
} 
```

在 UI 层，我将会话创建为每个会话的请求，并在类构造函数的帮助下注入服务层。然后借助方法设置存储库的会话。

恐怕如果我将 _Session 作为构造函数直接传递给存储库，我将无法在服务层下控制它。还有一个使用**web**服务层的未来扩展计划。

** 有没有办法确保在`_Session`已经设置的 ProductRepository 类的每个方法中，无需在每个方法中编写代码`if(_Session==null)`，因为它重复相同的代码。

**如果上述模式是错误的，请告诉我实现这一目标的正确方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:24:43.800

你的所作所为让我有点吃惊。您在中应用构造函数注入模式`ProductService`，这绝对是要走的路。另一方面，您并没有将依赖项注入到 中`ProductController`，而是该类通过静态类（这是服务定位器反模式）请求其中一个依赖项并`ProductServices`自己创建一个类。`ProductServices`这使得该类难以测试，并且使您的应用程序的灵活性和可维护性降低，因为当它在多个地方使用时，您无法轻松更改、装饰或拦截该类的使用。

尽管您（正确地）对 中的依赖项使用构造函数注入，但`ProductServices`您将这些依赖项传递到产品存储库，而不是在 中应用构造函数注入模式`ProductResopistory`。

> 请告诉我实现这一目标的正确方法。

正确的方法是在任何地方都应用构造函数注入模式。执行此操作时，您的代码将开始如下所示：

```
public class ProductController : Controller
{
    private ProductServices _ProductServices;

    public ProductController(ProductServices services)
    {
        _ProductServices = services;
    }
    // Cont..
 }

public class ProductServices : IProductServices
{
    private IProductRepository _ProductRepository;

    public ProductServices(
        IProductRepository productRepository)
    {
        _ProductRepository = productRepository;
    }
    // cont...
}

public class ProductRepository : IProductRepository
{
    private ISession _Session;

    public ProductRepository (ISession session)
    {
        _Session = session;
    }

    public IEnumerable<Product> FindAll()
    {
        return _Session
            .CreateCriteria<Product>().List<Product>();
    }
    //cont..
} 
```

看看每个类如何只接受它自己使用的依赖项。所以`ProductController`and`ProductServices`不依赖于（我做了只需要`ISession`的假设）。看看 - 从一个班级的角度来看 - 现在一切都变得简单多了？`ProductRepoistory``ISession`

我们真的在这里解决了一个问题吗？似乎我们只是将所有类连接在一起的问题移到了依赖图上。是的，我们确实解决了问题。这是一件好事。现在每个类都可以单独测试，更容易遵循，整个应用程序更易于维护。

然而，在应用程序的某个地方，`ProductController`必须创建一个。这可能看起来像这样：

```
new ProductController(
    new ProductServices(
        new ProductRepository(
            SessionManager.GetCurrentSession()))); 
```

在其正常配置中，ASP.NET MVC 将为您创建控制器类，并且它需要一个默认构造函数来执行此操作。如果你想使用构造函数注入来连接控制器（你绝对应该这样做），你需要做一些“特殊”的事情来让它工作。

ASP.NET MVC 允许您覆盖默认`ControllerFactory`类。这使您可以决定如何创建控制器实例。但是，当您的应用程序开始增长时，当您手动创建依赖关系图时，它会很快变得非常尴尬（正如我的最后一个示例所示）。在这种情况下，使用依赖注入框架会更好。它们中的大多数包含一个功能/包，允许您将其与 ASP.NET MVC 集成并自动允许在您的 MVC 控制器上使用构造函数注入。

我们完成了吗？嗯......我们曾经吗？你的设计中有一件事在我的脑海中触发了一个标志。您的系统包含一个名为`ProductServices`. 虽然是一个疯狂的猜测，但这个名称`Services`似乎将所有与产品相关的业务操作都包含在该类中。根据系统的大小、团队中的人数以及需要进行的更改量，这可能会出现问题。例如，您如何有效地应用横切关注点（例如日志记录、验证、分析、事务管理、容错改进）以使系统保持可维护性？

So instead of wrapping all operations in a single `ProductServices` class, try giving each business transaction / use case its own class and apply the same (generic) interface to all those classes. This description might be a bit vague, but it is a great way to improve the maintainability of small and big systems. You can read more about that [here](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:16:56.050

您可以使用诸如 Autofac 之类的依赖注入容器来实例化您的会话并管理它的生命周期。将会话实例化的责任留给 Autofac，只需将 ISession 接口注入到任何需要依赖项的类中。看看这篇文章：[使用 Autofac 管理 NHibernate ISession](https://stackoverflow.com/questions/2794626/managing-nhibernate-isession-with-autofac)

您还会发现此 wiki 页面对使用 MVC3 配置 Autofac 很有用：[http ://code.google.com/p/autofac/wiki/MvcIntegration3](http://code.google.com/p/autofac/wiki/MvcIntegration3)

# java - 动态调用 Spring Integration 转换器

> ID：14192063
> 
> 赞同：1
> 
> 时间：2013-01-07T08:09:19.217
> 
> 标签：java, spring, spring-mvc, dependency-injection, spring-integration

我是 Spring 集成的新手，正在从事一个 SI 项目。我正在做一个简单的工作，从通道（fromAdapter）获取消息，调用转换器并将输出发送到另一个通道（toQueue）。SI配置文件中使用了以下代码----

```
<int:channel id="fromAdapter"></int:channel>
<int:channel id="toQueue">  
</int:channel>  
<bean id="trans" class="src.MyTransformer"></bean>  
<int:transformer input-channel="fromAdapter" output-channel="toQueue" ref="trans"></int:transformer> 
```

但是，现在我有一个稍微复杂的要求。基于消息的某些值，我不想总是将消息发送到一个转换器，而是将消息发送到 6 个转换器中的任何一个。如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:15:10.063

您可以将这 6 个转换器声明为单个*点对点*通道的订阅者，默认情况下它将使用循环调度策略（它只会为每条消息调用一个转换器，但它总是会选择列表然后循环）。

在您的情况下，您应该简单地声明所有这些转换器使用完全相同的输入和输出通道，以上将自动发生。

* * *

要根据消息的某些属性选择转换器，您可以使用 a并为列表中的每个`recipient-list-router`定义 a以匹配特定类型的消息。此外，对于每个收件人，您应该使用不同的频道名称。然后这些通道中的每一个都将用作所需变压器的输入：`selector-expression``recipient`

```
<recipient-list-router input-channel="fromAdapter" default-output-channel="toQueue">
    <recipient channel="t1" selector-expression="payload.someFlag"/>
    <recipient channel="t2" selector-expression="headers.someOtherFlag"/>
</recipient-list-router>

<transformer input-channel="t1" ref="transformer1" method="transform"/>
<transformer input-channel="t2" ref="transformer2" method="transform"/> 
```

请记住，使用这种方法，一条消息可以匹配多个选择器表达式，因此您可以提供互斥的表达式。

或者，如果您愿意编写一些基础设施代码，您可以编写自己的实现`LoadBalancingStrategy`并将其提供给您的点对点通道。然后，您的策略将负责为每条消息选择正确的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:37:08.903

收件人列表路由器可以工作，如果您想将消息发送到多个转换器，这可能是合适的，但如果不是，您必须小心使选择器表达式互斥。也许更简单的路由器之一可能更合适。例如...

```
<header-value-router input-channel="routingChannel" header-name="foo">
    <mapping value="1" channel="channel1" />
    <mapping value="2" channel="channel2" />
</header-value-router> 
```

或者

```
<router id="spelRouter" input-channel="expressionRouter"
                    expression="payload.someProperty"
        default-output-channel="defaultChannelForExpression"
        resolution-required="false">
    <mapping value="foo" channel="fooChannelForExpression"/>
    <mapping value="bar" channel="barChannelForExpression"/>
</router> 
```

# vim - 如何在 GVim 中从 07 增加到 08？

> ID：14192064
> 
> 赞同：2
> 
> 时间：2013-01-07T08:09:39.077
> 
> 标签：vim

看起来`Ctrl-A`在 GVim 中使用不会从 07 增加到 08，因为默认情况下前缀 0 被解释为[八进制数](https://stackoverflow.com/questions/13273741/why-does-incrementing-with-ctrl-a-in-vim-take-me-from-07-to-10)。

如何使 Gvim 从 07 递增到 08？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T08:17:13.057

命令`:set nrformats-=octal`可以解决问题。你可以随时使用`:set nrformats+=octal`来恢复`nrformats`。或者，如果您也不喜欢十六进制格式，您可以输入`:set nrformats=alpha`. 或者，如果您愿意，可以将此设置保存在 .vimrc 文件中。

# haskell - Haskell 中的内存图像数据使用什么类型？

> ID：14192068
> 
> 赞同：8
> 
> 时间：2013-01-07T08:10:26.000
> 
> 标签：haskell, types

我正在尝试建模 a`data Photo`并想知道要使用什么类型的图像数据：

```
data Photo =
  Photo
  { photoUploaderId :: AccountId
  , photoWidth :: Int
  , photoHeight :: Int
  , photoData :: ByteString
  } 
```

我在`Data.ByteString`这里使用。有没有更好的选择？

背景：我要将图像数据存储在数据库中，然后通过网络连接检索和发送。第一次将照片插入数据库时​​，我可能需要对其进行一些操作，例如缩放等。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T08:26:43.913

如果您要访问照片的任意像素，请使用未[装箱数组](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-Unboxed.html)。它将为您提供 O(1) 索引和最小的空间开销。`UArray (Int, Int) Word32`应该是你要找的。请记住，未装箱的数组是严格的。如果您正在寻找非严格性，请使用[`Array`](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array.html#t:Array)，但请记住，像素值将被装箱，这会降低性能。

另一类类似的能力和值得考虑的是[向量](http://hackage.haskell.org/package/vector-0.5)。

另一方面，如果您*不*打算操作像素并且将图像视为一团，`ByteString`这是一个不错的选择。这就是它的设计目的：二进制数据块。

总而言之：使用`Array`or进行操作`Vector`，存储和传输为`ByteString`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T08:33:50.530

一般来说，UArray 是一个不错的选择。这取决于照片格式、您将如何阅读图像以及您对其进行何种处理。我发现 Codec.Image.DevIL 库对照片处理很方便。这是一个将 JPEG 图像转换为 PNG 的示例。

```
import Codec.Image.DevIL

main = do
  ilInit
  img <- readImage "test.jpeg"
  writeImage "test.png" img 
```

readImage 函数具有此签名。

```
readImage :: FilePath -> IO (UArray (Int, Int, Int) Word8) 
```

它返回一个 RGBA 数组。索引是（行、列、颜色通道）。`IO (UArray (Int, Int, Int) Word8)`如果您要使用该库，那将是一个不错的选择。

# ruby - 如果超时则等待一个元素而不抛出异常

> ID：14192073
> 
> 赞同：3
> 
> 时间：2013-01-07T08:10:40.047
> 
> 标签：ruby, watir, watir-webdriver

我知道这个方法`Element#wait_until_present(t)`，但是如果这个方法超时，它会抛出一个 timeOut 异常。

是否有一种方法只等待`t`几秒钟，然后在元素出现时返回 true，否则返回 false？

我知道它可以用一个简单的`begin..rescue..end`语句来完成，但我正在寻找不使用异常的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T16:33:17.007

你可以这样写一个速记`rescue`子句：

```
element_present = browser.element.wait_until_present rescue false
puts "element not present" unless element_present 
```

然而，这确实会导致`false`任何值`Exception`，而不仅仅是 with `TimeoutError`。我仍然更喜欢使用它，因为如果有的`Exception`话，那么假设该元素不存在会更安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:20:42.147

看起来没有其他方法可以做我正在寻找的东西，

所以这是实现这一目标的最简单方法：

```
#check method for Element#wait_until_present(t) 
def check_if_present(element,t)
    raise ArgumentError, 't must be a number ' unless t.is_a? Numeric
    begin
        element.wait_until_present(t)
        true
    rescue Watir::Wait::TimeoutError
        false
    rescue
        raise "Something wrong with the element"
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:20:30.107

如果您不想要异常，下面的代码会很方便：

sleep 'your time here' 例如： sleep 20 - 这将等待 20 秒。

然后现在检查您的元素：

'你的元素'.exists？- 这将返回真/假

这样你不会得到例外。

另一种最佳方法是根据您的需要编写 wait_for_load 方法。

# c# - 正则表达式组的位置

> ID：14192077
> 
> 赞同：1
> 
> 时间：2013-01-07T08:11:14.053
> 
> 标签：c#, regex

我有一个看起来像这样的令牌`#foo bar#`

我想做的是使用正则表达式做两件事，

1.  识别整个令牌，即`#foo bar#
2.  `bar`仅从令牌中获取

到目前为止，我正在使用它来获取整个令牌作为一个组`(?<group1>#foo [^#]+#)`

我很困惑如何`bar`成为第二组？

我正在尝试这种变化，但还没有完全实现，我们将不胜感激。

`(?<group1>#foo (?<group2[^#]+)#)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:17:58.297

我对你的正则表达式做了一个小改动，并想出了这个：

```
(?<group1>#foo (?<group2>[^#]+)#) 
```

示例可以在这里找到：[http ://regexr.com?33api](http://regexr.com?33api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:18:14.073

你实际上非常接近。我让它与这个正则表达式一起工作：

```
(?<group1>#foo (?<group2>[^#]+)#) 
```

（您在第 2 组之后错过了结束`>`）。

该程序输出`bar`：

```
var input = "#foo bar#";

var m = Regex.Match(input, "(?<group1>#foo (?<group2>[^#]+)#)");

Console.WriteLine(m.Groups["group2"].Value); 
```

# java - Hibernate SQLQuery（没有足够的主机变量值）

> ID：14192089
> 
> 赞同：0
> 
> 时间：2013-01-07T08:12:32.260
> 
> 标签：java, hibernate, sqlanywhere

我们将 Hibernate 与 Sybase Anywhere 12 一起使用，并在使用`SQLQuery`.

```
SQLQuery query = session.createSQLQuery(" SELECT * FROM myview WHERE x = :x AND y IN (:y) ");
query.setParameter("x", "z1234");
query.setParameterList("y", Arrays.asList(1, 2, 3, 4));
query.setReadOnly(true);
query.addEntity(ClassX.class);
List result = query.list(); 
```

重启数据库后查询失败，*只有*一次。如果我们使用相同的参数第二次执行相同的查询，它就会顺利运行。

该视图基于一个表，另一个视图基于两个表。这些表确实有触发器。以防万一这可能是我们问题的根源，但这对我来说没有意义，因为我确实调试到发生的`Connection#prepareStatement(...)`地方`SQLException`。

```
Caused by: java.sql.SQLException: [Sybase][JDBC Driver][SQL Anywhere]Not enough values for host variables
        at sybase.jdbc4.sqlanywhere.IConnection.nativePrepareStatement(Native Method) ~[sajdbc4.jar:na]
        at sybase.jdbc4.sqlanywhere.IConnection.prepareStatement(IConnection.java:599) ~[sajdbc4.jar:na]
        at sun.reflect.GeneratedMethodAccessor53.invoke(Unknown Source) ~[na:na]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.7.0_09]
        at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.7.0_09]
        at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:125) ~[com.springsource.org.apache.tomcat.jdbc-1.1.0.1.jar:na]
        at $Proxy104.prepareStatement(Unknown Source) ~[na:na]
        at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534) ~[hibernate-core-3.6.9.Final.jar:3.6.9.Final] 
```

有任何想法吗？

* * *

```
10:16:33.851 WARN  [http-9443-2] org.hibernate.util.JDBCExceptionReporter.logExceptions[233] - SQL Error: -188, SQLState: 07002
10:16:33.851 ERROR [http-9443-2] org.hibernate.util.JDBCExceptionReporter.logExceptions[234] - [Sybase][JDBC Driver][SQL Anywhere]Nicht genügend Werte für Hostvariablen 
```

* * *

参考资料：[Sybase Docs](http://dcx.sybase.com/1101/en/saerrors_en11/errm188.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:40:10.807

我想我找到了问题的根源。`myview`Sybase Central 中确实有一个警告符号。`myview`基于另一个视图，该视图被删除并再次创建。因此，`myview`需要重新编译。

**但是**，抛出的 SQL 代码`SQLException`是错误的，并导致错误的方向找到问题的根源。`Connection#prepareStatement(sqlQuery)`不传递任何参数。

# java - 为什么数字值在编程语言中受到限制？

> ID：14192090
> 
> 赞同：-1
> 
> 时间：2013-01-07T08:12:32.220
> 
> 标签：java

```
long  –9,223,372,036,854,775,808 to  9 ,223,372,036,854,775,807
int   –2,147,483,648 to 2,147,483,647
short – 32,768 to 32,767
byte  – 128 to 127 
```

为什么数值是有限的？如果我们有唯一标识符来识别我的 Web 应用程序的用户，会发生什么。例如：脸书、谷歌+。他们拥有数十亿用户。他们使用什么数据类型来存储唯一标识符。如果他们使用`string`数据类型，他们如何使用`>`和`<`操作符。有什么理由限制数值吗？

谢谢，卡南

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:16:16.943

范围受到限制的原因是每种数字类型都占用一定数量的字节。这决定了类型的范围。

例如，对于两个字节，它只能表示从 -32,768 到 32,767 的值（或者如果使用无符号类型，则从 0 到 65,535）。

> 他们拥有数十亿用户。

在您的示例中，`long`显然足够宽以代表数十亿个值（甚至可以代表数十亿个值`int`）。

> 如果他们使用字符串数据类型，他们如何使用 > 和 < 运算符。

首先，您*可以使用*[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)比较字符串。其次，甚至不清楚*为什么*需要以这种方式比较用户 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T08:16:27.437

这一切都源于内存管理。计算机程序需要知道变量在其生命周期内将使用多少内存，因此是有限的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:19:34.473

这都是关于计算机二进制数中的数字表示。看看[这里](http://en.wikipedia.org/wiki/Computer_number_format)和[这里](http://en.wikipedia.org/wiki/Signed_number_representations)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T08:24:16.583

这与[数字在计算机中的表示](http://en.wikipedia.org/wiki/Computer_number_format)方式有关，我们使用二进制位来表示（在硬件级别）数字。因此，如果您使用一个二进制位，则可以表示两个数字。0 和 1（当然，根据您的解释，它们可以是任意两个数字）。现在，如果您使用 2 个二进制位，您可以表示 4 个数字 00、01、10 和 11。下一位为您提供 8 个数字，依此类推。看到模式了吗？它始终是可用位数的 2 次方。

现在当我们说字节时，我们（通常）是指 8 位。这意味着 2^8 个可能的数字。但是我们通常为符号保留一位（正或负）。所以我们得到 2^7 个数字，它们平均分布在零附近。或 – 128 到 127，如您所说。（这有点简化，因为[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)会使事情更加复杂）。

tl;dr：我们“限制”数字范围的原因是硬件限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T08:20:17.773

它必须受到限制。想想一个数字可以有多大，需要多少字节来表示它们？CPU 和 RAM 也有各种限制，例如一次处理的位数。

此外，请查看 Java 弃用 Date 类并推荐 Calendar 类的原因。Calendar 类提供了更好的表示时间的方法，而不是从纪元以来的毫秒数，这是一个非常大的数字；也许比 Facebook 用户的数量大得多。

也就是说，Java 提供`java.math.BigInteger`并`java.math.BigDecimal`用于处理非常大的数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T08:21:32.863

整数类型由于它们在内存中的存储方式而受到限制。它归结为二进制（所有计算的基础上的 1 和 0）。

一个字节是 8 位（二进制数字），8 位可以存储的最多数据是 2^8，即 256，当分成两半以允许负数时，这给出了您引用的 -128 到 127 范围，或者 0 到 255，如果您使用无符号类型。（注意这不是 256，因为 0 也是需要表示的值）

所有其他范围也是如此，但位数更大。因此，使用有限数字的原因是为了节省内存。

需要更高数字的系统可以使用更多内存来存储数据，除了系统内存之外没有固有限制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T08:21:35.167

我敢打赌 Google+、Facebook 等不会使用数字作为用户标识符。还有其他类型可以用于此。例如 GUID，表示全局唯一标识符。它看起来像一个字符串，有时包含数字字母和破折号，并且数据库保证它是唯一的。

而且我怀疑他们是否需要准确比较用户的身份。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-07T09:02:18.040

> 为什么数值是有限的？

类型不是无限的原因是因为您机器的资源不是无限的。

相反，减少内存和 CPU 消耗以使用易于在硬件中实现的数据类型是很自然的。这意味着数据类型是字节的倍数（标准化为 8 位）和 2 字节的幂。这决定了每种数据类型可以具有的唯一值的数量。Java 进一步限制了这一点，在 AFAIK 的基础上只有一个无符号类型，签名类型更自然地处理。

这就是为什么这些类型是有限的

```
byte - signed 8 bits => -2^7 to 2^7-1
char - unsigned 16-bits => 0 to 2^16-1
short - signed 16-bits => -2^15 to 2^15-1
int - signed 32-bits => -2^31 to 2^31-1
long - signed 64-bit => -2^63 to 2^63-1 
```

> 如果我们有唯一标识符来识别我的 Web 应用程序的用户，会发生什么。

唯一标识符通常受到限制，并以 36 或更高为基数进行编码。

> 例如：脸书、谷歌+。他们拥有数十亿用户。

A`long`有十亿，十亿，所以相比之下，这是一个很小的数字。;)

> 他们使用什么数据类型来存储唯一标识符。

64 位值就足够了。

> 如果他们使用字符串数据类型，他们如何使用 > 和 < 运算符。

对于 id，他们不需要使用这样的运算符，只有 == 和 !=。

> 有什么理由限制数值吗？

因为您的机器不是无限的，并且您希望充分利用您拥有的硬件。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-07T08:25:26.440

您可以根据需要创建变量。

```
public class MyVariable{
    public byte variable;
    MyVariable(int a){
        variable = new byte[a];
    }
} 
```

# android - 为什么记事本不能在字符串中显示换行符？

> ID：14192091
> 
> 赞同：0
> 
> 时间：2013-01-07T08:12:32.877
> 
> 标签：android

我在写字板（文本后的新行）中得到了完美的结果，但我无法使用下面的代码在记事本中获得新行。并希望获得与我在 word pad 中获得的相同结果。

```
 private void getIntentDetails() {

        intent = getIntent();

        if (intent.hasExtra("testName")) {
            testName = (String) intent.getExtras().get("testName");
            Log.e("testName ", "testName " + testName);
            appendLog("TestName : ");
            appendLog(testName);
            appendLog(",  ");
            //appendLog("\n");
        }

        if (intent.hasExtra("testDate")) {
            testDate = (String) intent.getExtras().get("testDate");
            Log.e("testDate ", "testDate " + testDate);
            appendLog("TestDate : ");
            appendLog(testDate);
            appendLog(",  ");
        }

        if (intent.hasExtra("testTime")) {
            testTime = (String) intent.getExtras().get("testTime");
            Log.e("testTime ", "testTime " + testTime);
            appendLog("TestTime : ");
            appendLog(testTime);
            appendLog(",  ");
        }

        if (intent.hasExtra("savedName")) {
            savedName = (String) intent.getExtras().get("savedName");
            Log.e("savedName ", "savedName " + savedName);
            appendLog("SavedName : ");
            appendLog(savedName);
            appendLog(",  ");
        }

        if (intent.hasExtra("sensitivity")) {
            sensitivity = (String) intent.getExtras().get("sensitivity");
            Log.e("sensitivity ", "sensitivity " + sensitivity);
            appendLog("Accelerometer Sensitivity : ");
            appendLog(sensitivity);
            appendLog(" ,  ");
        }

        if (intent.hasExtra("xvalues")) {
            xValues = (ArrayList<Float>) intent.getExtras().get("xvalues");
            Log.e("xValues ", "xValues " + xValues.size());
            for (int indexx = 0; indexx < xValues.size(); indexx++) {
                xvalue = xValues.get(indexx).toString();
                if (indexx == 0) {
                    appendLog("X-Values : ");
                }
                appendLog(xvalue);
                appendLog(", ");

            }

        }
        Log.d("X-Values : ", ""+ xValues.size());

        if (intent.hasExtra("yvalues")) {
            yValues = (ArrayList<Float>) intent.getExtras().get("yvalues");
            Log.e("yValues ", "yValues " + yValues.size());
            for (int indexy = 0; indexy < yValues.size(); indexy++) {
                yvalue = yValues.get(indexy).toString();
                if (indexy == 0) {
                    appendLog("Z-Values : ");
                }
                appendLog(yvalue);
                appendLog(", ");

            }

        }
        Log.e("Z-Values : ", ""+ yValues.size());

        if(intent.hasExtra("xpos")){
            xPos = (String[]) intent.getExtras().get("xpos");

        }
//      for(int m = 0; m< xPos.length;m++){
//          Log.d("xPos", "  "+ xPos[m]);
//      }
        if(intent.hasExtra("xneg")){
        xNeg = (String[]) intent.getExtras().get("xneg");
        Log.e("xNeg ", "xNeg " + xNeg.length);

        }
//      for(int m = 0; m< xNeg.length;m++){
//          Log.d("xNeg", "  "+ xNeg[m]);
//      }
        if(intent.hasExtra("ypos")){
            yPos = (String[]) intent.getExtras().get("ypos");
            Log.e("yPos ", "yPos " + yPos.length);

        }
//      for(int m = 0; m< yPos.length;m++){
//          Log.d("yPos", "  "+ yPos[m]);
//      }
        if(intent.hasExtra("yneg")){
            yNeg = (String[]) intent.getExtras().get("yneg");
            Log.e("yNeg ", "yNeg " + yNeg.length);

        }
//      for(int m = 0; m< yNeg.length;m++){
//          Log.d("yNeg", "  "+ yNeg[m]);
//      }

    } 
```

* * *

```
 private void appendLog(String text) {

        File logFile = new File(fileLocation);
        if (!logFile.exists()) {
            try {
                Log.e("file was not created", "file  created");
                logFile.createNewFile();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        try {
            // BufferedWriter for performance, true to set append to file flag
            BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true)/*,8192*/);
            //buf.newLine();
        //  System.getProperty("line.separator");
            buf.write(text);
            //System.getProperty("line.separator");
            //buf.append("\n");
            //buf.write("/\n");
            buf.newLine();

            buf.close();
        } catch (IOException e) {

            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:24:12.123

那是因为记事本不是富文本阅读器，它只理解字符而不是 \n

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:14:52.507

我使用 FileOutputStream 做到了。

这是对我有用的代码...

```
try{
FileOutputStream fop = new FileOutputStream(logFile,true);
// get the content in bytes
byte[] contentInBytes = text.getBytes();

fop.write(contentInBytes);
//writing new line using bytes
String br = "\r\n";
fop.write (br.getBytes ());
fop.flush();
fop.close();
}catch (Exception e) {
e.printStackTrace();
} 
```

# git - Meteor：从 Github 克隆 repo 时出错

> ID：14192098
> 
> 赞同：2
> 
> 时间：2013-01-07T08:12:56.623
> 
> 标签：git, github, meteor

我在安装[Meteorite](https://github.com/oortcloud/meteorite/)时遇到问题。

我目前将开始在[此处](https://github.com/SachaG/Telescope)托管的[望远镜项目](http://demo.telesc.pe/)上工作。

我已将 Telescope 下载到中，并在命令提示符下 `D:\Meteor\Telescope`使用安装 Meteorite 。`npm install -g meteorite`

但是当我使用命令朗姆陨石时，`mrt`我得到以下错误：

```
Stand back while Meteorite does its thing

Installing Meteor

  branch: https://github.com/meteor/meteor.git#master

Installing smart packages

C:\Users\Snowflax\AppData\Roaming\npm\node_modules\meteorite\lib\sources\git.js:108
        throw "There was a problem cloning repo: " + self.url;
                                                   ^
There was a problem cloning repo: https://github.com/meteor/meteor.git 
```

这里出了什么问题？我`Meteor Preview 0.4.2`已经安装在我的 Windows 7 系统上。是否存在跨平台问题？任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:36:57.157

异常消息来自[陨石`lib/sources/git.js`](https://github.com/oortcloud/meteorite/blob/master/lib/sources/git.js#L103-L114)：

```
GitSource.prototype._clone = function(fn) {
  var self = this;
  if (!fs.existsSync(this.sourcePath)) {
    exec('git clone ' + self.url + ' ' + this.sourcePath, function(err, stdout, stderr) {
      if (err)
        throw "There was a problem cloning repo: " + self.url;
      fn();
    });
  } else {
    fn();
  }
}; 
```

您需要将值添加到异常消息中`this.sourcePath`，然后从那里`git clone`手动重复该命令（在您自己的`git-cmd`DOS 会话中）以查看它失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T13:38:39.603

我终于可以通过卸载 Meteor 和 meteorite 并安装 npm 来解决这个问题，这是诀窍：

首先移除流星

*   $ sudo rm -rf /usr/local/bin/meteor（路径取决于发行版）
*   $ sudo rm -rf ~/.meteor ~/.meteorite ~/.meteorsession
*   $ sudo mrt 卸载
*   $ sudo mrt 卸载 --system

确保拥有正确的权限：

*   $ sudo chown -R 'whoami' ~/.npm

然后再次安装：
从这里下载并安装节点：http://nodejs.org/download/

*   $ curl [https://install.meteor.com](https://install.meteor.com) | 嘘*   $ sudo -H npm install -g 陨石

在最后一个资源中，有一个解决方法，在我解决这个问题之前，我被迫从 Github 手动克隆，这不是最好的方法，但我会工作

1) $ mrt add 'package-you-want-to-install'

2）然后复制git存储库的链接即：（[https://github.com/EventedMind/iron-router.git](https://github.com/EventedMind/iron-router.git)）

3) 导航到包目录 $ cd packages

4）然后手动克隆包 $ git clone [https://github.com/EventedMind/iron-router.git](https://github.com/EventedMind/iron-router.git)

# objective-c - 使用 UIButton 在用户手指的位置创建 UIImage

> ID：14192106
> 
> 赞同：1
> 
> 时间：2013-01-07T08:13:52.537
> 
> 标签：objective-c, xcode, uiimageview, uibutton, uiimage

我正在使用此代码`IBAction`来创建一个`UIImageView`带有**触摸拖动的内部** `UIButton`：

```
-(IBAction) addNewPhoto:(id)sender{

switch ([sender tag]) {
    case 0:{

        imageMove = [UIImage imageNamed:@"knet.jpg"];

         holderView = [[UIView alloc] initWithFrame:CGRectMake(0,0, imageMove.size.width, imageMove.size.height)];
        UIImageView *imageview = [[UIImageView alloc] initWithFrame:[holderView frame]];
        [imageview setImage:imageMove];
        [holderView addSubview:imageview];

        UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
        [pinchRecognizer setDelegate:self];
        [holderView addGestureRecognizer:pinchRecognizer];

        UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];
        [rotationRecognizer setDelegate:self];
        [holderView addGestureRecognizer:rotationRecognizer];

        UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
        [panRecognizer setMinimumNumberOfTouches:1];
        [panRecognizer setMaximumNumberOfTouches:1];
        [panRecognizer setDelegate:self];
        [holderView addGestureRecognizer:panRecognizer];

        UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
        [tapRecognizer setNumberOfTapsRequired:1];
        [tapRecognizer setDelegate:self];
        [holderView addGestureRecognizer:tapRecognizer];

        [self.view addSubview:holderView];

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:.5];
        [superView setFrame:CGRectMake(0, 0, 320, 550)];
        //[holderView setFrame:CGRectMake(0, 0, 320, 550)];
        //holderView.alpha = 1;
        [UIView commitAnimations];

    }
        break;
    case 1:
    {
        imageMove = [UIImage imageNamed:@"test.jpg"];

        //..........similar to case 0 but another picture
         }
        break;

    default:
        break;
} 
```

按钮在 a 内`scrollView`，我正在寻找的是，应该在用户将他/她的手指从按钮上拖下来并且仍然能够在不移开他/她的手指的情况下移动它的地方创建图像。

我使用源代码来移动、缩放、旋转这个[博客](http://www.icodeblog.com/2010/10/14/working-with-uigesturerecognizers/)中的图像，并修改了使用按钮而不是 UIImagePickerController 创建图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:18:35.647

你可以使用 a `UILongPressGestureRecognizer`。如果添加`UILongPressGestureRecognizer`到主视图（holderView的超级视图）中，可以检测被`UILongPressGestureRecognizer`调用选择器中的状态来决定做什么。如果您在识别手势后移动手指，则具有`UILongPressGestureRecognizer`以下状态：`UIGestureRecognizerStateChanged`

```
- (void)createNewImage:(UILongPressGestureRecognizer *)gestureRecognizer
{
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
        // create a new image, add to the view, and position at the location of the touch
        // store a reference to it in an ivar
    } else if (([gestureRecognizer state] == UIGestureRecognizerStateChanged)) {
        // move the image stored in the ivar
    } else {
        // set the ivar to nil
        // add the standard gesture recognisers to the new image
    }
} 
```

为了进一步解释，向视图控制器添加一个新变量：

```
@interface ViewController
{
    UIView *_newView;
}
@end 
```

然后将其添加到您的视图控制器的`viewDidLoad`方法中：

```
UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(createNewImage:)];
[self.view addGestureRecognizer:longPressGesture]; 
```

然后将方法添加`createNewImage`到视图控制器：

```
- (void)createNewImage:(UILongPressGestureRecognizer *)gestureRecognizer
{
    CGPoint translation = [gestureRecognizer locationInView:self.view];

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan) { //press has begun    
        UIImage *image = [UIImage imageNamed:@"knet.jpg"];
        UIView *holderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
        UIImageView *imageview = [[UIImageView alloc] initWithFrame:[holderView frame]];
        [imageview setImage:image];
        [holderView addSubview:imageview];

        [holderView setCenter:CGPointMake(translation.x, translation.y)];
        _newView = holderView;

        [self.view addSubview:holderView];
    } else if (([gestureRecognizer state] == UIGestureRecognizerStateChanged)) { //finger is moving

        [_newView setCenter:CGPointMake(translation.x, translation.y)];

    } else { //finger lifted off to end the long press

        // here, you'll have to add all the other gesture recognisers to 
        // _newView in case if the new image is moved
        _newView = nil;
    }
} 
```

附带一点：我保留了您的`holderView`视图层次结构，但它似乎是多余的，您可以`UIImageView`在没有持有人视图的情况下拖动一个周围。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:16:59.033

我建议使用 Ray Wenderlich 的这篇[文章](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)。它提供了您想要的一切，**拖动**，这显然是您要寻找的，它提供了一种用手指拖动图像的解决方案，甚至为其添加了很酷的速度效果！捏缩放，触摸，旋转。您可以从那里下载示例代码，这有助于我掌握手势识别器。

罗汉

# asp.net - 当我运行我的网络应用程序时。我得到了无效的 URI：Uri 字符串太长

> ID：14192110
> 
> 赞同：0
> 
> 时间：2013-01-07T08:14:00.750
> 
> 标签：asp.net, web-services

```
XmlDocument xmlDoc = new XmlDocument();xmlDoc.Load(responsedata); 
```

它给出异常：System.UriFormatException：无效的 URI：Uri 字符串太长。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:16:49.460

**xmlDoc.Load**需要一个 URL 而不是文件本身。这就是它这么说的原因。它需要一个普通的 URI，但你给它一个大文件......

[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.load.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.load.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-17T16:22:52.770

我相信有一个假设，即 responsedata 持有一个指向要读入的 xml 文件的值，即“c:\temp\sometest.xml”。

但是，从您的情况来看，响应数据似乎是您从 Web 服务请求收到的流。如果是这种情况，请尝试以下操作：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(responsedata); 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:38:30.607

更新您的代码以使用较新的 XDocument 类，并调用[XDocument.Parse](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse%28v=vs.90%29.aspx)。

# javascript - 无法使用 iPhone 触摸 html 表单

> ID：14192111
> 
> 赞同：1
> 
> 时间：2013-01-07T08:14:08.713
> 
> 标签：javascript, jquery, iphone, html, django

我在 Django 应用程序中有一个表单（在模板文件中），如下所示：

```
<li>
  <form action="{% url 'socialauth_begin' 'facebook' %}?{{ redirect_querystring }}" method="get">
     <input type="hidden" name="next" value="{{ request.get_full_path }}">
     <a href="#" onclick="$(this).parent().submit();return false;"><img class="loggin" src="../img/fb-loggin.png" alt="loggin"></a>
  </form>
</li> 
```

问题是这种形式适用于大多数设备，除了 iPhone、iPad 等触摸设备......请给我一个想法。非常感谢！:)

查看我的网站了解更多详情：[http ://truyenyy.com](http://truyenyy.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:32:53.880

尝试使用`<a href="javascript:void(0);"`而不是`<a href="#"`. 也看看这个[链接](https://stackoverflow.com/questions/11450696/onclick-not-working-on-list-in-iphone-using-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:59:20.843

这句话给我！xD

```
 $('#sex').bind('touchstart click', function(){
       $(this).parent().submit();
       return false
    }); 
```

# sas - 在 sas 中计数

> ID：14192112
> 
> 赞同：4
> 
> 时间：2013-01-07T08:14:12.183
> 
> 标签：sas

也许是一个愚蠢的问题......我得到了以下数据集：

```
id count
x    1  
y    2
z    3
a    1
b    2
c    3
etc. 
```

我想要这个：

```
id count group
x    1    1
y    2    1
z    3    1
a    1    2
b    2    2
c    3    2  
etc. 
```

这是我尝试的：

```
data macro_1; set vix.macro_spy; where macro=1;
count+1;
if count>3 then do;
    count=1;
end;
    group=0;
    if count=1 then group+1;
    run; 
```

但它不起作用。如果我曾经得到一个'count = 1'，如何将所有'组'加一个？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:17:27.910

更简单

```
data want;
set vix.macro_spy;
group+(count=1);
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:58:18.887

我不确定我是否了解您的需求。所以你有这个数据集排序，所以变量的值`count`总是去`1, 2, 3, 1, 2, 3, 1, 2, 3...` 现在，你想生成变量`group`，以便每次变量`count`超过 3 时值都会增加？

如果是这样，您可以执行以下操作：

```
data group;
  set vix.macro_spy;
  retain group;
  if _N_ = 1 then group = 0;
  if count = 1 then group + 1;
run; 
```

这是我正在使用的一般模式。 `if _N_ = 1`部分只执行一次，这是你初始化变量的地方。

`retain`语句确保变量将在 DATA 步的一次迭代到下一次迭代中保持其值。

# php - 关于 php 和范围的说明

> ID：14192113
> 
> 赞同：0
> 
> 时间：2013-01-07T08:14:15.073
> 
> 标签：php, scope

主控制器.php：

```
final class MainController extends Controller   {

    public function is_locked() {
        $lock = new View('lock');
        Res::render($lock);
    }
} 
```

view.class.php：

```
final class View {

    private $data;

    public function get_title() {
        return isset($this->title) ? $this->title : DEFAULT_TITLE;
    }
    public function get_layout() {
        return isset($this->layout) ? $this->layout : 'base';
    }
    public function get_layout_path() {
        return SITE_PATH .'app/views/layouts/'. $this->get_layout() .'.layout.php';
    }
    public function get_path() {
        return SITE_PATH .'app/views/' .$this->name .'.view.php';
    }

    public function print_title() {
        echo $this->get_title;
    }

    public function __construct($name) {
        $this->data = array();
        $this->data['name'] = $name;
    }
    public function __set($name, $value) {
        $this->data[$name] = $value;
    }
    public function __get($name) {
        if (array_key_exists($name, $this->data)) {
            return $this->data[$name];
        }

        $trace = debug_backtrace();
        trigger_error('Undefined property via __get(): '. $name .' in '. $trace[0]['file'] .' on line' . $trace[0]['line'], E_USER_NOTICE);
        return null;
    }
    public function __isset($name) {
        return isset($this->data[$name]);
    }
    public function __unset($name) {
        unset($this->data[$name]);
    }
} 
```

这是我的响应类的渲染方法：

```
public static function render($view) {
  include_once SITE_PATH .'app/views/layouts/root.layout.php');
} 
```

从我的一个控制器调用...参数 $view 是一个简单的 View 对象...

这是我的 root.layout.php：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title><?php $view->print_title(); ?></title>
</head>

<body>
 root layout
</body>
</html> 
```

似乎我无法从包含的布局文件中访问 $view 对象，这可能是一个愚蠢的问题，但现在我真的无法意识到为什么不应该工作......

有人可以解释一下 php 在这种情况下是如何工作的吗？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:43:00.533

使用`include`代替`include_once`，因为您的方法可以被多次调用，并且它只会在第一次（“一次”）时起作用。

PHP 文档说明了[include 的范围](http://php.net/manual/function.include.php)（以及 include_once）：

> 当一个文件被包含时，它包含的代码继承了**包含发生的行的变量范围**。从那时起，调用文件中该行的任何可用变量都将在被调用文件中可用。但是，包含文件中定义的所有函数和类都具有全局范围。

因此，一切都应该与您传递的`$view`变量一起使用。

还有一个[很好的示例](http://php.net/manual/language.variables.scope.php)（页面上的第一个示例），它解释了包含之前行中可用的任何变量都将在包含的文件中可用。

# c# - 反序列化元素 int

> ID：14192114
> 
> 赞同：0
> 
> 时间：2013-01-07T08:14:31.543
> 
> 标签：c#, deserialization, nullable

> **可能重复：**
> [使用 XmlSerializer 将空 xml 属性值反序列化为可为空的 int 属性](https://stackoverflow.com/questions/1295697/deserializing-empty-xml-attribute-value-into-nullable-int-property-using-xmlseri)

我想将以下 XML 反序列化为 C# 对象。它包含具有整数类型值或空值的元素：CustomerID=”1005” 或 CustomerID=””。关于如何使用可为空的 int 将元素值转换为属性的任何想法。

```
<ExportDefinition>
  <DestinationDir>C:\Test\</DestinationDir>
  <CustomerID>1005</CustomerID>
</ExportDefinition> 
```

```
public ExportDefinition GetExportDefinition(FileInfo exportDefFile)
        {
            if (!exportDefFile.Exists)
                throw new Exception(string.Format("Export definition file '{0}' does not exists.", exportDefFile.FullName));

            FileStream readFileStream = null;
            XmlSerializer serializerObj = null;
            ExportDefinition loadedObj = null;

            try
            {
                readFileStream = new FileStream(exportDefFile.FullName, FileMode.Open, FileAccess.Read, FileShare.Read);

                serializerObj = new XmlSerializer(typeof(ExportDefinition));

                loadedObj = (ExportDefinition)serializerObj.Deserialize(readFileStream);
            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally
            {
                if (readFileStream != null)
                    readFileStream.Close();
            }
            return loadedObj;
        } 
```

# html - 为什么这部电影在网络上托管时无法在 IE 中加载？

> ID：14192115
> 
> 赞同：1
> 
> 时间：2013-01-07T08:14:50.627
> 
> 标签：html, video, loading

我在 HTML 页面中创建了一个简单的视频元素。这里的代码：

```
<!DOCTYPE html>
<html lang="ar">
    <head>
    <meta charset="utf-8"/>
    <script src="js/jquery-1.8.3.min.js"></script>

        <style>
            body{
                background:gray; 
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            #vid_container {position:absolute;left:50%;top:50%;visibility:visible;text-align:center;z-index:501;}
            #vid_background {position:absolute;left:-350px;top:-270px;width:700px;height:540px;background:url(datas/vid_bg.png);z-index:501;}
            #vid_loader {position:absolute;left:-320px;top:-240px;text-align:center;z-index:502;}
            #vid_button {position:absolute;left:-346px;top:-266px;width:30px;height:30px;background:url(datas/vid_btn.png);z-index:503;cursor:pointer;}

        </style>
    </head>
    <body>

        <div id='vid_container'>

        <div id='vid_background'></div>

        <video id='vid_loader' width="640" height="480" preload controls>
            <source src="my_video.mp4" type="video/mp4">
        </video>

        <div id='vid_button'></div>

        </div>

    </body>
</html> 
```

当我在本地（我的计算机）上测试 INTERNET EXPLORER 中的代码时，它工作正常并且电影加载。但是当我在我的 FTP 中托管它并通过互联网进行测试时，它不会加载（它在所有其他浏览器上加载）

你可以测试你自己：（用其他浏览器打开这个链接，它可以正常工作，但用ie它不是）

[http://ajnadeen-me.com/eBook/vidbug/index.html](http://ajnadeen-me.com/eBook/vidbug/index.html)

影片是 MP4 压缩 H.264。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:45:16.413

Web 服务器正在使用不正确的 MIME 类型提供视频。当前的 MIME 类型是`video/mpeg`（不适用于 IE9）。MP4 视频的 MIME 内容类型在[RFC 4337](https://www.rfc-editor.org/rfc/rfc4337)中定义- 另请参阅指向[此 ISO 规则](http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=40890)的特定 H.264 编码的段落- 它是`video/mp4`. 有关视频服务内容类型的更多信息，请[点击此处](http://en.wikipedia.org/wiki/Internet_media_type#Type_video)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:53:43.090

首先，您应该确保`<video>`Internet Explorer 支持 HTML5 标记。只有 Internet Explorer 9 本身支持它，请参见[此处](http://caniuse.com/#search=video)，因此如果您希望它也可以与以前的版本一起使用，您需要将 HTML5 标记的支持添加到旧版本的 Internet Explorer 中。如果您还没有这样做，您可以使用[html5shiv](http://code.google.com/p/html5shiv/)。`head`只需在您的网页中添加此代码：

```
<!--[if lt IE 9]>
<script src="dist/html5shiv.js"></script>
<![endif]--> 
```

现在你可以使用`video`标签了。我给你一个解决方案，首先使用视频 html5 标签，如果失败，它会使用 Flash 视频播放器加载视频，而无需使用 javascript 或浏览器嗅探。然后，即使失败，也会显示图像占位符（海报），您可以允许网站的访问者下载视频。如果您对最后一部分不感兴趣，您可以将其从代码中删除。正如您在代码中看到的，我建议您不仅以`mp4`格式创建视频，而且还`ogg`以`webm`.

**格式兼容性**：

*   Internet Explorer 9+ 支持 Mp4，但不支持 WebM 和 Ogg。
*   Chrome 6+ 支持所有三种格式。
*   Firefox 3.6+ 支持 WebM 和 Ogg，但不支持 Mp4。
*   Safari 5+ 支持 Mp4 但不支持 WebM 和 Ogg。
*   Opera 10.6+ 支持 WebM 和 Ogg 但不支持 Mp4。

这就是为什么您应该包括所有三种格式。

我删除了该`preload`属性，因为 Internet Explorer 不支持它。

这里的**HTML**代码是：

```
<video controls poster="poster.jpg" width="640" height="480">
    <source src="my_video.mp4" type="video/mp4" />
    <source src="my_video.webm" type="video/webm" />
    <source src="my_video.ogv" type="video/ogg" />
    <object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="640" height="480">
        <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
        <param name="allowFullScreen" value="true" />
        <param name="wmode" value="transparent" />
        <param name="flashVars" value="config={'playlist':['poster.jpg',{'url':'my_video.mp4','autoPlay':false}]}" />
        <img alt="Video" src="poster.jpg" width="640" height="480" title="No video playback capabilities, please download the video below" />
    </object>
</video>
<p>
    <strong>Download video:</strong> <a href="my_video.mp4">MP4 format</a> | <a href="my_video.ogv">Ogg format</a> | <a href="my_video.webm">WebM format</a>
</p> 
```

**服务器支持**：

如果服务器上的 MIME 类型设置不正确，您可能无法播放视频。如果您使用 Apache 服务器，您可以添加视频文件的扩展名或`/etc/apache`通过.`AddType``httpd.conf`

**对于奥格**：

```
AddType video/ogg .ogm
AddType video/ogg .ogv
AddType video/ogg .ogg 
```

**对于 WebM**：

```
AddType video/webm .webm 
```

**对于 MP4**：

```
AddType video/mp4 .mp4 
```

* * *

我使用 Internet Explorer 9 检查了 w3schools 上的示例。如果我切换到 Internet Explorer 7 或 Internet Explorer 8，则不支持它。（因为我之前谈到的 HTML5 视频标签兼容性问题）。同样，您可以通过使用 htmlshiv 来解决这个问题。

即使您使用 Internet Explorer 9，它也有可能以[Quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)（兼容模式，即 ie7 或 ie8）显示页面。您可以通过确保不使用`<!DOCTYPE html>`任何 xml prolog 来避免这种情况。

此外，您可以通过添加以下内容将浏览器仿真强制为最新版本的 Internet Explorer：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

在`head`您的 HTML 页面中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:09:38.660

您的服务器可能没有为 MP4 视频设置正确的 MIME 类型。请参阅第 2 点：[HTML5 多媒体疑难解答](http://html5doctor.com/multimedia-troubleshooting/)。

# windows-phone-8 - Windows Phone 8 上的定位精度

> ID：14192117
> 
> 赞同：0
> 
> 时间：2013-01-07T08:15:03.247
> 
> 标签：windows-phone-8

是否有可能获得位置准确性？

我知道如何获取位置，但我想知道以米为单位的位置精度半径，例如。

提前感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:22:51.250

当您使用地理定位器类时：

```
Geolocator geolocator = new Geolocator();
var acc=geolocator.DesiredAccuracyInMeters; 
```

来自文档：

*所需精度（以米为单位）*

> 仅限 Windows 电话。获取或设置从定位服务返回的数据的所需精度（以米为单位）。

有关课程的更多信息：[链接](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.geolocation.geolocator.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T13:04:48.773

如果你有一个地理定位的位置，你可以这样做

```
Geoposition MyGeoPosition
...
double acc = MyGeoPosition.Coordinate.Accuracy; 
```

精度以米为单位返回。

# visual-studio-2010 - EPPLUS - 无法保存在不同的文件夹中

> ID：14192123
> 
> 赞同：0
> 
> 时间：2013-01-07T08:15:28.957
> 
> 标签：visual-studio-2010, c#-4.0, epplus

我正在尝试保存excel文件。如果我将文件保存在同一位置，它工作正常，但如果我想保存不同的位置，它会抛出错误。

错误：

```
System.NotSupportedException was unhandled
  Message=The given path's format is not supported.
  Source=mscorlib
  StackTrace:
       at System.Security.Util.StringExpressionSet.CanonicalizePath(String path, Boolean needFullPath)
       at System.Security.Util.StringExpressionSet.CreateListFromExpressions(String[] str, Boolean needFullPath)
       at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)
       at System.Security.Permissions.FileIOPermission..ctor(FileIOPermissionAccess access, AccessControlActions control, String[] pathList, Boolean checkForDuplicates, Boolean needFullPath)
       at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
       at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
       at System.IO.File.Create(String path)
       at Report.Form1.ExportToExcelReport(DataTable Tbl, String ExcelFilePath) in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Form1.cs:line 142
       at Report.Form1.button2_Click(Object sender, EventArgs e) in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Form1.cs:line 113
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at Report.Program.Main() in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我的代码

```
FileInfo newFile = new FileInfo("C:\\Excel\\SampleStockTakeReport.xlsx");
ExcelPackage pck = new ExcelPackage(newFile);
ExcelWorksheet ws = pck.Workbook.Worksheets[1];
var path = "C:\\Excel\\Report\\SampleStockTakeExceptionReport" + DateTime.Now + ".xlsx";
ws.View.ShowGridLines = false;
ws.Cells["G13"].Value = "Rent";
ws.Cells["G14"].Value = "Level 1";
ws.Cells["G15"].Value = "Cell 1";
ws.Cells["V14"].Value = "Level 3";
ws.Cells["V15"].Value = "Cell 3";
ws.Cells["W12"].Value = "Bukit Raja";
ws.Cells["AJ13"].Value = "Row 1";
var tracksql = new TrackingSql();
var numberoftag = tracksql.getNumberofTag();
ws.Cells["S19"].Value = DateTime.Now;
ws.Cells["Y19"].Value = numberoftag.ToString();
var numberoftagscanned = 9;
var diff = numberoftag - numberoftagscanned;
ws.Cells["Q22"].Value = numberoftagscanned;
ws.Cells["X22"].Value = numberoftag;
ws.Cells["AD22"].Value = diff;
var thispath = "testing path for report";
Stream stream = File.Create(path); // throw error here
pck.SaveAs(stream);
System.Diagnostics.Process.Start(path);
MessageBox.Show("Report Generated at " + path + ""); 
```

如果有人可以就此提供建议/帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:25:11.433

此问题与 EPPlus 无关。你得到`NotSupportedException`了

```
Stream stream = File.Create(path); 
```

此处记录：[`File.Create`方法（字符串）](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)

所以这个“路径格式无效”。因为时间部分的冒号`DateTime.Now`：

```
var path = "C:\\Excel\\Report\\SampleStockTakeExceptionReport" + DateTime.Now + ".xlsx"; 
```

所以这应该工作：

```
var dayPart = DateTime.Now.ToString("yyyy-MM-dd");
var path = "C:\\Excel\\Report\\SampleStockTakeExceptionReport" + dayPart + ".xlsx"; 
```

如果您需要时间部分，您可以创建一个自定义`DateTimeFormatInfo`：

```
var timeFormat = (DateTimeFormatInfo)CultureInfo.CurrentCulture.DateTimeFormat.Clone();
timeFormat.TimeSeparator = "_";
var dayPart = DateTime.Now.ToString(timeFormat); // replaces the colons with _ implicitely 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:19:44.210

您需要格式化`DateTime.Now`为`DateTime.Now.ToString("MMddyyyy");`

# java - 使用 Stax 解析 XML 文件时出现 Unicode(0xb) 错误

> ID：14192135
> 
> 赞同：5
> 
> 时间：2013-01-07T08:16:47.533
> 
> 标签：java, xml, parsing, unicode

解析 XML 文件时，Stax 会产生错误：

> Unicode(0xb) 错误 - 在文档的元素内容中发现无效的 XML 字符 (Unicode: 0xb)。

只需单击下面的链接，其中带有特殊字符“VI”的 xml 行。它不是字母字符：当您尝试将其复制并粘贴到记事本中时，您会得到它作为一些符号。我尝试使用 Stax 解析它。它显示了上述错误。

[![在此处输入图像描述](../Images/6422c30c9ca6a91bc0bf0e1661c7f5ea.png)](https://i.stack.imgur.com/yP0eQ.png)

请问有人可以给我一个解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T08:22:06.670

0xB（垂直制​​表符）不是 XML 中的有效字符。ASCII 32（0x20，空格）之前的唯一有效字符是 0x9（制表符）、0xA（回车）和 0xD（换行）。

简而言之，您要解析的不是 XML。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-31T10:29:21.307

每当无效的 xml 字符来自 xml 时，它就会给出这样的错误。当您在记事本++ 中打开它时，它看起来像 VT、SOH、FF，这些都是无效的 xml 字符。我正在使用 xml 版本 1.0，并且在按模式将文本数据输入数据库之前验证文本数据

```
Pattern p = Pattern.compile("[^\u0009\u000A\u000D\u0020-\uD7FF\uE000-\uFFFD\u10000-\u10FFF]+");
retunContent = p.matcher(retunContent).replaceAll(""); 
```

它将确保不会在 xml 中输入无效的特殊字符

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T08:21:13.983

根据[XML W3C 建议](http://www.w3.org/TR/REC-xml/)0xb 不允许在 XML 文件中：

> 字符范围 [2] 字符 ::= #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF] /* 任何 Unicode 字符，不包括代理块、FFFE 和 FFFF。*/

所以严格来说，您的输入文件不是 XML 文件。

# matlab - 处理函数隐含地考虑自变量

> ID：14192138
> 
> 赞同：0
> 
> 时间：2013-01-07T08:16:52.650
> 
> 标签：matlab, anonymous-function, integral

我有这个

```
clc, clear all, close all
tic
k1 =  1E-02:0.1:1E+02;
k2 =  1E-02:0.1:1E+02;
k3 =  1E-02:0.1:1E+02;
k = sqrt(k1.^2+k2.^2+k3.^2);
c = 1.476;
gamma = 3.9;
colors = {'b'};
Ek = (1.453*k.^4)./((1 + k.^2).^(17/6));
E = @(k) (1.453*k.^4)./((1 + k.^2).^(17/6));
E_int = zeros(1,numel(k));
E_int(1) = 1.5;

for i = 2:numel(k)
    if k(i) < 400
        E_int(i) = E_int(i-1) - integral(E,k(i-1),k(i));
    elseif k(i) > 400
        E_int(i) = 2.180/(k(i)^(2/3));
    end %end if
end %end i

beta = (c*gamma)./(k.*sqrt(E_int));
figure
plot(k,beta,colors{1})

count = 0;
%F_11 = zeros(1,numel(k1));
F_33 = zeros(1,numel(k1)); 
```

之后，我应该将 F_33 计算为

```
for i = 1:numel(k1)   
    count = count + 1;    
    phi_33 = @(k2,k3) (1.453./(4.*pi)).*(((k1(i)^2+k2.^2+(k3 + beta(i).*k1(i)).^2).^2)./((k1(i)^2+k2.^2+k3.^2).^2)).*((k1(i)^2+k2.^2)./((1+k1(i)^2+k2.^2+(k3+beta(i).*k1(i)).^2).^(17/6)));
    F_33(count) = 4*integral2(phi_33,0,1000,0,1000);    
end 
```

现在让我们来回答我的问题。我从一篇论文中知道：

```
k = sqrt(k1.^2+k2.^2+k3.^2);
k30 = k3 + beta.*k1;
k0 = sqrt(k1.^2+k2.^2+k30.^2);
E_k0 = 1.453.*(k0.^4./((1+k0.^2).^(17/6))); 
```

因此 phi_33 的表达式将导致

```
phi_33 = (E_k0./(4*pi.*(k.^4))).*(k1.^2+k2.^2); 
```

问题是：我怎样才能利用这个最终表达式插入我目前正在使用的长表达式（在 for 循环中）？

phi_33 的最后一个表达式更容易处理（特别是因为编写前者时的鲁莽错误），它会“通过引用传递”（k2，k3），这是自变量。

任何提示都非常受欢迎。

最好的问候， fpe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:28:02.760

如果我理解正确，您希望以与旧单行符完全相同的方式使用新表达式。`phi33`由于可读性，您只想将函数分成几部分。

您可以通过将表达式放在一个单独的函数中来执行此操作，该函数采用计算所需的所有值。完全使用您的旧表达式，这看起来像这样：

```
function phi_33 = phi_33_old(k1,k2,k3,beta,i)

phi_33 = (1.453./(4.*pi)).*(((k1(i)^2+k2.^2+(k3 + beta(i).*k1(i)).^2).^2)./((k1(i)^2+k2.^2+k3.^2).^2)).*((k1(i)^2+k2.^2)./((1+k1(i)^2+k2.^2+(k3+beta(i).*k1(i)).^2).^(17/6)));

end 
```

然后可以像这样在你的 for 循环中调用这个函数。

```
phi_33_test = @(k2,k3) phi_33_old(k1,k2,k3,beta,i); 
```

使用相同的样式，可以如下定义一个新函数。

```
function phi_33 = phi_33_new(k1,k2,k3,beta,i)

k = sqrt(k1.^2+k2.^2+k3.^2);
k30 = k3 + beta.*k1;
k0 = sqrt(k1.^2+k2.^2+k30.^2);
E_k0 = 1.453.*(k0.^4./((1+k0.^2).^(17/6)));
phi_33_allValues = (E_k0./(4*pi.*(k.^4))).*(k1.^2+k2.^2);
phi_33 = phi_33_allValues(i);

end 
```

请注意，这里`phi_33`计算了所有的值，然后`i`选择了第 th 值。以这种方式编写只是为了显示与旧案例的相似性。这个新函数现在可以在 for 循环中以与旧函数相同的方式调用。

```
phi_33 = @(k2,k3) phi_33_new(k1,k2,k3,beta,i); 
```

# iphone - 代码执行在使用线程安全的 Singleton 初始化代码时停止

> ID：14192140
> 
> 赞同：2
> 
> 时间：2013-01-07T08:17:00.937
> 
> 标签：iphone, objective-c, ios, singleton

为了利用全局变量和方法，我将 Singleton 实现为一种健康的编码实践。在实施之前，我关注[了 Apple 文档](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)，[john wordsworth 博客。](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)首先，我没有使我的单例线程安全，我实现了这个方法以及博客和 Apple 文档中提到的所有其他方法。

```
+ (SingletonClass *)sharedManager 
{
  static SingletonClass *sharedManager = nil;
  if (sharedManager == nil) {
    sharedManager = [[super allocWithZone:NULL] init];
}
  return sharedManager;
} 
```

之后，为了使单例线程安全，我对`+ (SingletonClass *)sharedManager`类进行了这样的更改，并且我的应用程序停止启动。我设置了断点并观察到`dispatch_once`被调用两次，然后代码停止进一步执行。

```
+(SingletonClass *)sharedManager
{
  static SingletonClass *sharedManager = nil;
  if (sharedManager !=nil)
  {
    return sharedManager;
  }
  static dispatch_once_t pred;       
  dispatch_once(&pred, ^{
    sharedManager = [SingletonClass alloc];
    sharedManager=[sharedManager init];
});

     return sharedManager;
} 
```

如果我删除这个线程安全的代码片段并恢复到以前的代码，它工作正常并且代码被执行。

请注意，我也在[这里查看了 bbum 的答案](https://stackoverflow.com/questions/2199106/thread-safe-instantiation-of-a-singleton)，他在提问之前提到了可能的僵局情况，但我无法弄清楚这个问题。任何解释或解决方案都会对我有所帮助。谢谢。

> 编辑1：

如果有人想查看完整的代码，我已经为此创建了[**要点**](https://gist.github.com/4473361)。请跟随那里。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T08:40:52.087

让我们考虑一下如果两个线程`sharedManager`几乎同时调用第二个版本会发生什么。

线程 1 首先调用。它检查`sharedManager !=nil`，这是错误的，所以它继续到`dispatch_once`。在`dispatch_once`块中，它执行`[SingletonClass alloc]`并将结果存储在`sharedManager`.

现在，在线程 1 继续下一行之前，线程 2 出现并调用`sharedManager`. 线程 2 检查`sharedManager !=nil`，现在是真的。所以它返回`sharedManager`，然后调用者尝试使用`sharedManager`. 但此时，`sharedManager`还没有完全初始化。那很糟。

`sharedManager`在您有一个**完全初始化**的对象来设置它之前，您无法设置。另外（正如 borrrden 指出的那样），您不需要`sharedManager !=nil`顶部的检查，因为`dispatch_once`无论如何它都非常有效。

```
+ (SingletonClass *)sharedManager {
    static dispatch_once_t pred;
    static SingletonClass *sharedManager;
    dispatch_once(&pred, ^{
        sharedManager = [[SingletonClass alloc] init];
    });
    return sharedManager;
} 
```

现在，我查看了您的要点，您的问题就在这里：

```
+ (id)allocWithZone:(NSZone*)zone {
    return [[self sharedManager] retain];
} 
```

您的方法在块中`+[SingletonClass sharedManager]`调用。由于您不覆盖,调用. 和方法调用。在第二次调用 时，您的程序挂起，因为您仍在第一次调用.`+[SingletonClass alloc]``dispatch_once``alloc``+[SingletonClass alloc]``+[SingletonClass allocWithZone:NULL]``+[SingletonClass allocWithZone:]``+[SingletonClass sharedManager]``sharedManager``dispatch_once``dispatch_once`

最简单的解决方法是删除您的`allocWithZone:`. 只需记录这`sharedManager`是获取实例`SingletonClass`并继续前进的唯一受支持的方式。

如果你想变得迟钝并`[[SingletonClass alloc] init]`返回单例，即使你重复这样做，也很复杂。不要试图覆盖`alloc`或`allocWithZone:`. 做这个：

```
static SingletonClass *sharedManager; // outside of any method

+ (SingletonClass *)sharedManager {
    return sharedManager ? sharedManager : [[SingletonClass alloc] init];
}

- (id)init {
    static dispatch_once_t once;
    dispatch_once(&once, ^{
        if (self = [super init]) {
            // initialization here...
            sharedManager = self;
        }
    });
    self = sharedManager;
    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:31:44.887

您不需要顶部的检查，摆脱`if`声明。`dispatch_once`保证块在应用程序的生命周期中只执行一次，因此第一次检查是多余的。

更多信息： [http ://cocoasamurai.blogspot.jp/2011/04/singletons-your-doing-them-wrong.html](http://cocoasamurai.blogspot.jp/2011/04/singletons-your-doing-them-wrong.html)

# c# - C#项目谷歌地图

> ID：14192144
> 
> 赞同：1
> 
> 时间：2013-01-07T08:17:42.690
> 
> 标签：c#, web-services, google-maps

对于我的学习和大学，我有一个项目需要使用 C# WPF 制作应用程序。此应用程序必须允许我选择两个地址之间的路径并在地图上显示路径，如谷歌地图。

如何实现谷歌网络服务 API？我有点迷失了，我不明白如何制作我的应用程序并适合谷歌地图本身。

有了这个，我也必须能够计算距离。

这是我对 webBrowser 所做的，但它显示了谷歌地图的整个网站：

我知道 WebBrowser 控件可以显示谷歌地图，但它实际上不起作用这实际上是我的代码

```
 private void btnCharger_Click(object sender, RoutedEventArgs e)
    {
        //Use static or WebControl we don't know yet.
        //This is the case we use webControl
        string street = "";
        string city = "";
        string zipcode = "";
        StringBuilder adresseQuery = new StringBuilder();
        adresseQuery.Append("http://maps.google.com/maps?q=");

        street = tbStreet.Text.Replace(" ", "+");
        adresseQuery.Append(street + ",+");
        city = tbCity.Text;
        adresseQuery.Append(city + ",+");
        zipcode = tbZipCode.Text;

        webBrowser1.Navigate(adresseQuery.ToString());*/

    } 
```

所以在这段代码中，我创建了地址并通过谷歌地图将其发送到网络浏览器。但是它显示了整个谷歌地图页面，左侧栏和所有内容。我只想显示地图！我怎样才能只显示地图而不显示[https://maps.google.com/上的条形图](https://maps.google.com/)

我已经检查了这个[链接](http://www.codeproject.com/Articles/238551/WPF-Map-App-WPF-meets-Google-Geocoding-Static-Maps)，目前正在处理它，但这是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-30T20:17:59.120

对于路由/获取方向的部分（以及您需要的其他一些功能），您可以使用围绕 Google Maps API 的 .NET 包装器：

1.  [谷歌API](https://github.com/vivet/GoogleApi)
2.  [谷歌地图](https://github.com/maximn/google-maps)

[gmaps-api-net](https://github.com/ericnewton76/gmaps-api-net)已过时（在此回答时） - Directions API 的最后一次更新是在 2016 年进行的。

[GoogleApi](https://github.com/vivet/GoogleApi)的使用示例：

```
using GoogleApi.Entities.Common;
using GoogleApi.Entities.Maps.Directions.Request;
using GoogleApi.Entities.Maps.Directions.Response;

public void GetRoute()
{
    DirectionsRequest request = new DirectionsRequest();    

    request.Key = "AIzaSyAJgBs8LYok3rt15rZUg4aUxYIAYyFzNcw";

    request.Origin = new Location("Brasov");
    request.Destination = new Location("Merghindeal");

    var response = GoogleApi.GoogleMaps.Directions.Query(request);

    Console.WriteLine(response.Routes.First().Legs.First().DurationInTraffic);
    Console.WriteLine(response.Routes.First().Legs.First().Distance);
    Console.WriteLine(response.Routes.First().Legs.First().Steps);
} 
```

# attributes - WFST-T 创建对象后更新属性

> ID：14192146
> 
> 赞同：2
> 
> 时间：2013-01-07T08:17:50.410
> 
> 标签：attributes, openlayers

我对 openlayers 很陌生，并尝试使用 wfs-t 让用户将几何图形添加到地图中（在后台使用 geoserver 和 postgis-db）。这很好用，但是我希望用户也可以添加/编辑几何的一些元数据。那里有或多或少容易理解的示例/教程吗？

# cron - 为python脚本设置一个cron作业

> ID：14192149
> 
> 赞同：0
> 
> 时间：2013-01-07T08:17:57.610
> 
> 标签：cron, crontab, cron-task, crontrigger

我想为 cron 作业运行以下命令

```
python test.py -sau 0 -bg 200000 -t mcs3245 > g2g.log 
```

我已经设置了一个如下所示的 cron 作业

```
5 0 * * * /local/mnt/workspace/username/scripts/python test.py -sau 0 -bg 200000 -t mcs3245 > g2g.log 
```

收到以下错误

```
/bin/sh: /local/mnt/workspace/username/scripts/python: No such file or directory 
```

任何人都可以帮助解决什么问题以及如何设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:59:56.790

除非`/local/mnt/workspace/username/scripts/`是您的 python 安装目录，否则我建议如下：

```
5 0 * * * /usr/bin/python /path/to/script/test.py -sau 0 -bg 200000 -t mcs3245 > g2g.log 
```

如果您想以用户 USERNAME 的身份执行脚本：

```
5 0 * * * USERNAME /usr/bin/python /path/to/script/test.py -sau 0 -bg 200000 -t mcs3245 > g2g.log 
```

[在 superuser.com 上](https://superuser.com/questions/170866/how-to-run-a-cron-job-as-a-specific-user)找到最后一个。

# php - 避免匹配具有不同含义的流行词的词干提取

> ID：14192152
> 
> 赞同：2
> 
> 时间：2013-01-07T08:18:00.310
> 
> 标签：php, nlp, stemming, lemmatization

我目前正在使用 PorterStemmer 来识别派生词。但是，我遇到了一个问题，这些词的含义不同但似乎有。例如：
`Market`and `Marketing`
`Wine`and `Winning`
etc..
有不同的含义，但 PorterStemmer 将它们标识为相同。

哪些开放工具能够克服这些问题？带有极端案例的字典？更高级的词干分析器？

最好是可以通过 PHP 轻松访问的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:03:37.023

这是词干分析器的一个已知问题，因为它们在没有任何语言知识的情况下以语音为基础进行操作。你需要一个词形还原器。我主要使用[基于 Java 的 Stanford CoreNLP](http://nlp.stanford.edu/software/corenlp.shtml)，但我确信 PHP 中一定有一些东西。

# twitter - Twitter API 不显示旧推文？

> ID：14192155
> 
> 赞同：12
> 
> 时间：2013-01-07T08:18:31.263
> 
> 标签：twitter

我对推特 API 有疑问。我过去发过推文（大约 400 条），但最近我没有发过任何推文。当我尝试使用 twitter api 获取推文时，没有结果。如何检索较旧的推文？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T10:05:14.610

Twitter 不会通过搜索 API 返回超过一周的推文。从以下链接查看限制部分：

[https://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-03T05:55:32.163

我和你有同样的问题，所以在看到 Twitter Web Search 工作后，我开始实现自己的解决方案，你可以在我的[GitHub 上](https://github.com/Jefferson-Henrique/GetOldTweets)看到。它是用 Java 实现的，但它会在我的博客上发表一篇文章来解释如何用其他语言来做。我已经毫无问题地下载了推文，我在上一次测试中解析了 2014 年某些特定用户的超过 60 万条推文。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-01T01:43:43.370

您可以使用 REST API 资源[GET statuses/user_timeline](https://developer.twitter.com/en/docs/tweets/timelines/api-reference/get-statuses-user_timeline.html)从任何公共时间线检索最新的 3200 条推文。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-23T16:20:00.790

这在 Twitter 网络搜索门户中是可能的，但不能通过他们的 API。无赖 [https://twitter.com/search-home](https://twitter.com/search-home)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-31T01:13:34.577

这详细说明了@bennett-mcelwee 的答案，其中可以在一系列 API 调用中完成最多 3200 条最新的用户推文。`GET statuses/user_timeline`目前，使用API 调用，用户在 1 个请求中可以获得的最大推文数为 200 。要获取用户在其时间轴上发布的所有推文，请执行以下操作：

第1步

对此端点传递参数进行 GET 调用`count=200`。

第2步

从第1步返回的数据中，得到最后一条推文的ID

进行相同的 GET 调用，但这次传入参数，`max_id=`后跟第一次调用返回的最后一条推文的 ID，或`-1`. 所以例如`max_id=9987999`

第 3 步

重复步骤 2，直到您没有获得任何新（旧）数据。

出于我的目的，我可以使用[https://github.com/sferik/twitter在 Ruby 中执行此操作](https://github.com/sferik/twitter)

一旦客户端对象被实例化，它就像这样简单：

```
tweets = client.user_timeline('foobar', count: 200)
max_id = tweets.last.id - 1
tweets << client.user_timeline('foobar', count: 200, max_id: max_id) 
```

从这里你得到了想法，编写一个循环是相当简单的，直到你获得了所有可以从 API 中获取的推文。

# java - JPA - jar文件中的persistence.xml

> ID：14192159
> 
> 赞同：0
> 
> 时间：2013-01-07T08:18:56.720
> 
> 标签：java, xml, jpa, application-resource

我可以将我`persistence.xml`的文件放在硬盘驱动器上的任何文件夹中，并且可以使用我的 Java SE 应用程序访问它吗？

我的问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:16:50.867

*persistence.xml*必须存在于正在运行的应用程序**的 CLASSPATH 中的 META-INF 下。**这是唯一的限制。您可以轻松地在 CLASSPATH 中包含一些其他位置，并将您的*persistence.xml*放在那里，只要它位于 META-INF 文件夹中即可。

一些 JPA 提供程序允许您仅将位置指定为持久性属性，从而取消了 META-INF 要求，但 JPA 规范并未涵盖这一点，因此不可移植

# xslt - 分组后使用 xslt 1.0 计算节点前 3 次出现的总和

> ID：14192160
> 
> 赞同：0
> 
> 时间：2013-01-07T08:18:59.047
> 
> 标签：xslt, xslt-1.0

如何计算以下 xml 中按 empid 和 date 分组后的小时节点值的前 3 次出现的总和，并将总数存储在变量中。

```
<Records>
    <Line>
      <EmpId>1</EmpId>
      <Date>10/01/2012</Date>
      <Hour>4</Hour>
    </Line>
    <Line>
      <EmpId>1</EmpId>
      <Date>10/01/2012</Date>
      <Hour>4</Hour>
    </Line>
    <Line>
      <EmpId>1</EmpId>
      <Date>10/02/2012</Date>
      <Hour>8</Hour>
    </Line>
     <Line>
      <EmpId>1</EmpId>
      <Date>10/03/2012</Date>
      <Hour>8</Hour>
    </Line>
     <Line>
      <EmpId>1</EmpId>
      <Date>10/04/2012</Date>
      <Hour>8</Hour>
    </Line>
  </Records> 
```

所以变量的值应该是 24。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:06:44.913

如果我正确阅读了您的要求，我认为这应该可以完成工作：

```
<xsl:key name="countHours" match="Line" use="concat(EmpId,'-',Date)" />

<xsl:template match="/">
  <xsl:value-of select="sum(
    Records/Line[
      count(
        preceding-sibling::*[
          generate-id()=generate-id(key('countHours',concat(EmpId,'-',Date))[1])
        ]
      ) &lt; 3
    ]/Hour
  )" />
</xsl:template> 
```

# javascript - 我可以使用 HTML5 和 javascript 将音频流式传输到服务器吗

> ID：14192161
> 
> 赞同：1
> 
> 时间：2013-01-07T08:18:58.577
> 
> 标签：javascript, html, streaming, core-audio

现在，我正在构建一个基于 HTML 和 javascript 的会议应用程序。我想知道，是否可以使用 javascript 将音频和视频流式传输到服务器？我必须使用任何类型的服务器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:21:03.320

是的，可以通过 WebRTC 实现。这是一个链接：[http ://updates.html5rocks.com/2012/12/WebRTC-hits-Firefox-Android-and-iOS](http://updates.html5rocks.com/2012/12/WebRTC-hits-Firefox-Android-and-iOS)

# jquery-ui - Jquery UI 滑块扩展

> ID：14192164
> 
> 赞同：0
> 
> 时间：2013-01-07T08:19:22.117
> 
> 标签：jquery-ui

我一直在谷歌搜索近一天，只是为了让这个工作没有运气。我怎样才能从这段代码中实现

```
$(function () {
  var slider2 = $("#slider2").slider({
    range: true,
    min: 0,
    max: 500,
    values: [ 75, 300 ],
    start: function( event, ui ) {
      $(this).find('.ui-slider-handle.ui-state-hover')
        .append('<span class="ui-slider-tooltip">'+ui.value+'</span>');
    },
    slide: function( event, ui ) {
      $(this).find('.ui-slider-tooltip').text(ui.value);
    },
    stop: function( event, ui ) {
        $(this).find('.ui-slider-tooltip').remove();
    }
  });
}); 
```

到这个代码

```
$(function () {
  var slider2 = $("#slider2").slider({
    range: true,
    min: 0,
    max: 500,
    showTooltip: true
  });
}); 
```

[http://jsbin.com/epekex/1](http://jsbin.com/epekex/1)

# wcf - 关于 WCF 端点地址属性

> ID：14192172
> 
> 赞同：1
> 
> 时间：2013-01-07T08:19:48.030
> 
> 标签：wcf

作为 wcf 的新手，我经常坚持在配置文件中写入端点地址。有时我只是不明白我应该在服务将运行的主机端的端点中写什么地址。这是一个示例端点条目....请看一下。

```
<endpoint address="net.tcp://localhost/ServiceModelSamples/Service1.svc" 
          binding="netTcpBinding" 
          contract="ServiceReference1.IService1">
</endpoint>

<endpoint address="net.tcp://localhost/ServiceModelSamples/service"
          binding="netTcpBinding"
          contract="ServiceReference1.IService1" /> 
```

我有几个关于端点地址的问题 1）我什么时候应该这样写端点地址

```
net.tcp://localhost/ServiceModelSamples/Service1.svc 
```

我想当我们将在 IIS 中托管我们的服务时，我们需要像上面那样编写端点地址，我们需要在其中编写我们的 svc 文件名。我对吗？

2）只需查看以下地址

```
address="net.tcp://localhost/ServiceModelSamples/Service1.svc" 
```

什么是**ServiceModelSamples**我需要提一下吗？

3) 假设我使用 wcf 服务应用程序模板开发 wcf 服务并以 win 形式应用程序托管该服务，那么我们的端点地址将如下所示

```
 address="net.tcp://localhost/ServiceModelSamples/service" 
```

我需要写**ServiceModelSamples**我们的项目名称文件夹还是我们可以从地址中删除它`address="net.tcp://localhost/service"`

知道我是否需要编写我们的项目文件夹名称，例如 **ServiceModelSamples ，这对我来说非常重要**

4) 当我们在 win 表单应用程序中托管 wcf 服务时，我是否需要指定我们的 svc 文件名和扩展名。

5）具体指导我在win表单应用程序中托管服务时需要写什么地址。

我上述所有问题可能听起来很愚蠢，但我对端点地址感到非常困惑。我没有办法在这里提出问题。所以请看看我的5点并指导我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:46:26.993

我认为您的困惑来自**IIS Hosting 和 custom hosting**之间的差异。

当您使用 IIS 托管服务时，服务的行为方式如下：

*   根据服务在 IIS 中托管的位置，会自动为服务分配一个**基地址。**它使用与**网站相同的地址映射**。
*   服务层**需要有 .svc 文件才能**通过 IIS 公开服务实例。这些服务文件只是有助于在 IIS 上公开的映射文件。

因此，要从客户端填写 IIS 中托管的服务的地址，您需要：

*   找出 IIS 分配的地址。
*   使用您要指向的 Service.svc 文件名填写该地址。

但是，当使用自定义托管（通过 ServiceHost）**时，服务地址完全由服务配置文件控制：**

*   该服务**可以通过 baseAddresses 设置为其所有端点配置一个基地址**
*   所有端点**都可以有一个完整地址或相对地址**。如果使用相对地址，则生成的端点地址**将是 baseAddress + 端点**相对地址。

自定义托管时，您可以**完全控制服务地址**，因此您没有任何必须在 IIS 上遵循的限制。

# css - 为什么div不在前一个div之后开始？

> ID：14192184
> 
> 赞同：2
> 
> 时间：2013-01-07T08:21:26.707
> 
> 标签：css, html

我正在修改 WordPress 主题的标题部分，并且试图将几个 div 嵌套在另一个 div 中。我对 HTML/CSS 不是很有经验，但我所观察到的对我来说似乎很奇怪。

我的代码如下所示：

```
<div class="extras">
    <div id="search"> 
        <form role="search" method="get" id="searchform" action="http://mentatescholars.com/" >
            <input type="search" placeholder="Search" value="" name="s" id="s" />
            <input type="submit" id="searchsubmit" value="Search" />
        </form>
    </div><!-- end #search -->
    <div class="phone-number">
        <div class="phone-number-main">1-885-MENTATE</div>
        <div class="phone-number-sub">1-885-636-8283</div>
    </div>
</div> 
```

在图片中，我`phone-number`使用 Firefox 的检查器选择了 div（选择`extras`看起来相同）。令我感到奇怪的是为什么它从 div 的顶部开始，`extras`而不是在`search`div 之后。`search`甚至设置高度为 40px。

![我的搜索框和电话号码](../Images/0fe6734ca2616459e8204668a19003ae.png)

如果我选择第三个 div，那么它会显示在前一个 div 之后开始的 div。

![选择第三个 div 的行为就像我想的那样](../Images/8c2fe3559ce6bfecaefb5ea2f4c3a7e4.png)
让我感到奇怪的是，当`phone-number-main`div 的顶部与 齐平时`extras`，文本如何在我不做任何事情的情况下完美地向下移动。

我的问题是：我怎样才能使`phone-number`div 在 div 之后立即开始`search`？

这是该网站，如果您想查看它： http: [//mentatescholars.com/](http://mentatescholars.com/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:29:26.193

`#search`是浮动的，`.phone-number`不是。如果添加`clear:both`到`.phone-number` `<div />`您将看到正确的布局。

`float`从文档流中删除元素。检查 uot 此链接以获取更多信息：[http ://www.alistapart.com/articles/css-floats-101/](http://www.alistapart.com/articles/css-floats-101/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:34:18.947

那是因为你有浮动元素。你的“搜索” div 是浮动的，没有明确的。在 phone-number 元素的 CSS 中使用`clear:both`它会正常工作

如果您希望数字`search`在高度为`search`30px 并摆脱提交按钮的边距底部后正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:26:42.697

通过降低高度使#search 块更小，假设为 30px。

# php - 如何重命名目录中的一批文件？

> ID：14192185
> 
> 赞同：0
> 
> 时间：2013-01-07T08:21:27.887
> 
> 标签：php

我想重命名的目录中有一堆文件。我有一个完整的现有文件名列表，在旧名称旁边的列中，我有一个新名称（所需的）文件名，如下所示：（列表在 excel 中，因此我可以很容易地对所有行应用一些语法)

```
OLD NAME         NEW NAME
--------         --------
aslkdjal.pdf     asdlkjkl.pdf
adkjlkjk.pdf     asdlkjdj.pdf 
```

我想将旧名称和旧文件保留在其当前目录中并且不打扰它们，而只是创建文件的副本，而不是使用新文件名。

不知道使用什么语言以及如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:26:15.563

[http://php.net/manual/en/function.rename.php](http://php.net/manual/en/function.rename.php)

```
<?php
rename("/tmp/tmp_file.txt", "/home/user/login/docs/my_file.txt");
?> 
```

编辑：在[复制](http://php.net/manual/en/function.copy.php)的情况下-

```
<?php
$file = 'example.txt';
$newfile = 'example.txt.bak';

if (!copy($file, $newfile)) {
    echo "failed to copy $file...\n";
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T08:28:27.727

像这样的东西应该工作：

```
$source = '/files/folder';
$target = '/files/newFolder';
$newnames= array(
    "oldfilename" => "newfilename",
    "oldfilename1" => "newfilename1",
);

// Copy all files to a new dir
if (!copy($source, $target)) {
    echo "failed to copy $source...\n";
}

// Iterate through this dir, rename all files.
$i = new RecursiveDirectoryIterator($target);
foreach (new RecursiveIteratorIterator($i) as $filename => $file) {
    rename($filename, $newnames[$filename]);
    // You might need to use $file as first parameter, here. Haven't tested the code.
} 
```

[RecursiveDirectoryIterator](http://php.net/manual/en/class.recursivedirectoryiterator.php)文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:35:51.207

使用 shell 脚本很容易做到这一点。从您在 中介绍的文件列表开始`files.txt`。

```
#!/bin/sh
# Set the 'line' delimiter to a newline
IFS="
"

# Go through each line of files.txt and use it to call the copy command
for line in `cat files.txt`; do 
  cp `echo $line | awk '{print $1;}'` `echo $line | awk '{print $2};'`; 
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T10:41:21.123

***只需尝试以下示例：***

```
<?php
$source = '../_documents/fees';
$target = '../_documents/aifs';

$newnames= array(
    "1276.aif.pdf" => "aif.10001.pdf",
    "64.aif.20091127.pdf" => "aif.10002.pdf",
);

function recurse_copy($src,$dst) {
    $dir = opendir($src);
    @mkdir($dst);
    while(false !== ( $file = readdir($dir)) ) {

        if (( $file != '.' ) && ( $file != '..' )) {
            if ( is_dir($src . '/' . $file) ) {
                recurse_copy($src . '/' . $file,$dst . '/' . $file);
            }
            else {
                copy($src . '/' . $file,$dst . '/' . $file);
            }
        }
    }
    closedir($dir);
}

// Copy all files to a new dir
recurse_copy($source, $target);

// Iterate through this dir, rename all files.
$i = new RecursiveDirectoryIterator($target);

foreach (new RecursiveIteratorIterator($i) as $filename => $file) {    
    @rename($filename, $target.'/'.$newnames[''.$i.'']);    
}
?> 
```

# java - IText - BarcodeQRCode 使背景颜色透明

> ID：14192191
> 
> 赞同：1
> 
> 时间：2013-01-07T08:22:03.330
> 
> 标签：java, itext

我正在尝试使用 iText 将我的 QR 码的背景颜色设置为透明背景，但它不起作用。仅显示白条和黑色背景。

到目前为止我做了什么：

我的代码片段：

```
 PdfContentByte cb = writer.getDirectContent();
    BarcodeQRCode qrcode = new BarcodeQRCode("sample message on qr", 100, 100, null);
    java.awt.Image qrImage = qrcode.createAwtImage(Color.WHITE,new Color(0, 0, 0, 0));
    Image finalImage = Image.getInstance(writer, qrImage, 1);
    finalImage.setAbsolutePosition(positionX, positionY);
    cb.addImage(finalImage); 
```

我已经生成了我的二维码并生成了一个 PDF，但是，当使用

> qrcode.createAwtImage(Color.WHITE,new Color(0, 0, 0, 0));

它不会产生 alpha 背景，而是仅显示黑色背景色。

我也试过：

> java.awt.Image qrImage = qrcode.createAwtImage(Color.WHITE,Color.OPAQUE);

但显然，我的论点是不正确的。

帮助将不胜感激，我已经为此工作了一天。

我也试过Graphics，Graphics2g，把它转换成BufferedImage。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:53:28.180

我会这样解决这个问题：

```
BarcodeQRCode qrcode = new BarcodeQRCode("sample message on qr", 100, 100, null);
Image image = qrcode.getImage();
Image mask = qrcode.getImage();
mask.makeMask();
image.setImageMask(mask);
document.add(image); 
```

也可能有 AWT 解决方案，但我更熟悉原生 PDF 解决方案，而不是使用 AWT 解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:54:41.223

将分配更改为`finalImage`以下作品：

```
Image finalImage = Image.getInstance(qrImage, null) 
```

我不知道为什么使用将第一个参数作为第一个参数的`getInstance`方法会`PdfWriter`破坏透明度，尽管......

# python - 折叠 Django 项目的最顶层文件夹后，找不到设置模块

> ID：14192195
> 
> 赞同：1
> 
> 时间：2013-01-07T08:22:15.230
> 
> 标签：python, django

当我最初创建我的 Django 项目时，我有这个文件夹结构：

```
project/
    project/
        manage.py
        settings.py
        ... 
```

在最顶层的文件夹中，我初始化了我的 git repo 以及我的虚拟环境。

我想折叠顶层文件夹（就好像我运行了`django-admin.py startproject 。'：

```
project/
    manage.py
    settings.py 
```

但是，当我尝试手动执行此操作时，它突然找不到设置模块。它仍在寻找它在`project.settings.`哪里可能是硬编码的？

当我运行时`python manage.py runserver`，我收到此错误：

```
ImportError: Could not import settings 'module.settings' (Is it on sys.path?): No module named settings 
```

当我运行时，`django-admin.py help <some subcommands>`我收到此错误：

```
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

我确定在某个地方我有设置设置的路径，但我找不到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:47:55.797

该错误是由于以下可能性：

1.  您没有从项目根目录运行命令，即`project/`不是`project/project`.

2.  没有项目根即`project/`添加到`PYTHONPATH`

3.  您`manage.py`不在项目根目录，即 ie `project/`，而是在`project/project`.

* * *

**可能的解决方案**：

1.  将项目根 ie 添加`project/`到`PYTHONPATH`- 因为`manage.py`试图做相当于 an`import project.settings`并且要发生它需要`project`在`sys.path`
2.  如果您`project/`列出了`PYTHONPATH`项目`manage.py`根目录（.`project.settings``settings``manage.py``project/``project/project`

3.  设置`DJANGO_SETTINGS_MODULE`为`project.settings`.

`project.settings`表示设置模块比一个目录低`manage.py`- 在您的情况下，您同时拥有两者`manage.py`并且`settings.py`处于同一级别，即`project/project/` 您没有使用默认的 django 项目结构。无论如何，您可以在运行“runserver”命令之前检查 /export 设置：（来自官方 Django 文档 -[设置`DJANGO_SETTINGS_MODULE`](https://docs.djangoproject.com/en/dev/topics/settings/#envvar-DJANGO_SETTINGS_MODULE)）

示例**（Unix Bash shell）**：

```
export DJANGO_SETTINGS_MODULE=mysite.settings
django-admin.py runserver 
```

示例**（Windows 外壳）：**

```
set DJANGO_SETTINGS_MODULE=mysite.settings
django-admin.py runserver 
```

* * *

**建议**：尽量遵守常规的项目结构（至少在你成为专家之前）。即保持`manage.py`一个目录级别高于其他项目文件.. `settings.py`, `urls.py`, 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:35:26.823

我过去曾使用过这些地方：

*   您可能在 .bashrc / .bash_history / 其他一些 shell 启动文件中设置了 PYTHONPATH 环境变量
*   您可能在`$virtualenv/bin/activate`脚本中的 virtualenv 中设置了所述变量
*   您可能已从内部符号链接您的项目`$virtualenv/lib/pythonx.y/site-packages`

# android - 验证仅允许在 android 中编辑文本中的数字和字符

> ID：14192199
> 
> 赞同：32
> 
> 时间：2013-01-07T08:22:35.747
> 
> 标签：android

在我的应用程序中，我必须验证`EditText`. 它应该只允许字符、数字、下划线和连字符。

这是我的代码：

```
edittext.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub                              
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // TODO Auto-generated method stub
    }

    @Override
    public void afterTextChanged(Editable s) {
        // validation codes here

        location_name=s.toString();
        Toast.makeText(getApplicationContext(),location_name, Toast.LENGTH_SHORT).show();                

        if (location_name.matches(".*[^a-z^0-9].*")) {
            location_name = location_name.replaceAll("[^a-z^0-9]", "");
            s.append(location_name);
            s.clear();
            Toast.makeText(getApplicationContext(),"Only lowercase letters and numbers are allowed!",Toast.LENGTH_SHORT).show();
        }                                   
    }

});     

location.add(location_name); 
```

当我输入输入`EditText`时，应用程序被强制关闭。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-07T08:26:06.300

Android 中有一些非常简单的方法，而不是使用您的“手动”检查方法：

```
InputFilter filter = new InputFilter() { 
    public CharSequence filter(CharSequence source, int start,
                               int end, Spanned dest, int dstart, int dend) { 

        for (int i = start;i < end;i++) { 
            if (!Character.isLetterOrDigit(source.charAt(i)) && 
                !Character.toString(source.charAt(i)).equals("_") && 
                !Character.toString(source.charAt(i)).equals("-")) 
            { 
                return ""; 
            } 
        } 
        return null; 
    } 
}; 

edittext.setFilters(new InputFilter[] { filter }); 
```

或另一种方法：在创建 EditText 的 XML 中设置允许的字符：

```
<EditText 
  android:inputType="text" 
  android:digits="0,1,2,3,4,5,6,7,8,9,*,qwertzuiopasdfghjklyxcvbnm,_,-" 
  android:hint="Only letters, digits, _ and - allowed" /> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-17T09:02:42.450

```
<EditText 
  android:inputType="text" 
  android:digits="0,1,2,3,4,5,6,7,8,9,*,qwertzuiopasdfghjklyxcvbnm,_,-" 
  android:hint="Only letters, digits, _ and - allowed"
/> 
```

上面的代码还将另外包含`,`以避免`,`使用下面的代码

```
<EditText 
  android:inputType="text" 
  android:digits="0123456789qwertzuiopasdfghjklyxcvbnm_-"
  android:hint="Only letters, digits, _ and - allowed"
/> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-09-02T19:05:31.303

这可能很有用，特别是如果您的 EditText 应该允许[变音符号](https://en.wikipedia.org/wiki/Diacritic)（在我的情况下是[葡萄牙语变音符号](https://en.wikipedia.org/wiki/Portuguese_orthography#Diacritics)）：

```
<EditText
   android:digits="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZzÁáÂâÃãÀàÇçÉéÊêÍíÓóÔôÕõÚú"
/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-17T22:57:59.307

类似于 , 的解决方案`android:digits="0123456789*"`是使用这个：

```
EditText etext = new EditText(this);
etext.setKeyListener(DigitsKeyListener.getInstance("0123456789*")); 
```

一个额外的好处是它还显示数字键盘。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-18T13:34:39.277

```
InputFilter filter = new InputFilter() {
    public CharSequence filter(CharSequence source, int start,
        int end, Spanned dest, int dstart, int dend) {

        for (int i = start; i < end; i++) {
            if (!Character.toString(source.charAt(i)).matches("[a-zA-Z0-9-_]+")) {
                return "";
                edittext.setError("Only letters, digits, _ and - allowed");
            }
        }
        return null;
    }
};
edittext.setFilters(new InputFilter[] { filter }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T08:36:36.113

试试这个：

```
public static SpannableStringBuilder getErrorMsg(String estring) {
        int ecolor = Color.BLACK; // whatever color you want
        ForegroundColorSpan fgcspan = new ForegroundColorSpan(ecolor);
        SpannableStringBuilder ssbuilder = new SpannableStringBuilder(estring);
        ssbuilder.setSpan(fgcspan, 0, estring.length(), 0);
        return ssbuilder;
    } 
```

然后`setError()`当你想显示“只允许字母和数字”时到 EditText，如下所示。

```
etPhone.setError(getErrorMsg("Only lowercase letters and numbers are allowed!")); 
```

希望这会帮助你。我在我的应用程序的 EditText 中使用相同的验证检查。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-07T08:39:50.967

请尝试添加**android:digits="abcde.....012345789"**属性？尽管 android:digits 指定它是一个数字字段，但我确实可以将其设置为接受字母和特殊字符（在 SDK-7 上测试）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-07T09:03:18.123

使用这 2 个功能

```
public static boolean isdigit(EditText input)
    {

    String data=input.getText().toString().trim();
    for(int i=0;i<data.length();i++)
    {
         if (!Character.isDigit(data.charAt(i)))
                return false;

    }
    return true;
    }

    public static boolean ischar(EditText input)
    {

    String data=input.getText().toString().trim();
    for(int i=0;i<data.length();i++)
    {
         if (!Character.isDigit(data.charAt(i)))
                return true;

    }
    return false;
    } 
```

在这些函数中传递 Edittext 变量 .. 所以你可以有布尔值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-28T09:50:52.033

您可以通过两种方式验证这一点，两者都对我有用，希望对您也有帮助。

**1> 在您的 edittext 中提及字符。**

```
android:digits="0,1,2,3,4,5,6,7,8,9,*,qwertzuiopasdfghjklyxcvbnm,_,-" 
```

2> 可以务实地验证 milos[务实地回答](https://stackoverflow.com/a/14192231/5886712)

# c# - 从代码隐藏添加的 JS 代码不运行

> ID：14192201
> 
> 赞同：0
> 
> 时间：2013-01-07T08:22:38.630
> 
> 标签：c#, javascript

我在 ASP.Net 中编写了一个应用程序，我在将动态创建的弹出窗口居中时遇到了问题。在弹出控件中，我插入了以下代码：

```
string script = "<script type='text/javascript'>";
script += "$(document).ready(setMargin();); ";
script += "function setMargin(){ ";
script += "var wid = $('MC_resultPopup_pnlResultPopup').width();";
script += "$('MC_resultPopup_pnlResultPopup').css('margin-left', wid/2 + 'px');}";
script += "</script>";

Page.ClientScript.RegisterClientScriptInclude(this.GetType(), "SetAutoWidth", script); 
```

但是这段代码不起作用。它甚至没有开始。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:24:26.317

请改用 registerclientscriptblock 方法：

[http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)

我不认为 RegisterClientScriptInclude 将脚本作为参数，只有脚本的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:28:50.617

您正在寻找的方法是`RegisterClientScriptBlock`，不是`RegisterClientScriptInclude`。正如 Tobias 所建议的，后者用于引用外部 javascript 文件。

# mysql - 计算mysql中一行中的项目数

> ID：14192205
> 
> 赞同：2
> 
> 时间：2013-01-07T08:22:51.250
> 
> 标签：mysql, select, join, group-by

我有一个学生列表，显示他们是否在特定班级中。

```
 CREATE TABLE classlist
        (`id` int, `studentid` int, `subjectid` int, `presentid` int)
    ;

    CREATE TABLE student
        (`id` int, `name` varchar(4))
    ;

    CREATE TABLE subject
        (`id` int, `name` varchar(4))
    ;

    CREATE TABLE classStatus
        (`id` int, `name` varchar(8))
    ;

    INSERT INTO classlist
        (`id`, `studentid`, `subjectid`, `presentid`)
    VALUES
        (1, 111, 1, 1),
        (2, 222, 3, 0),
        (3, 333, 2, 1),
        (4, 111, 4, 0),
        (5, 111, 1, 1),
        (6, 222, 3, 0),
        (7, 333, 2, 1),
        (8, 111, 4, 0),
        (9, 111, 4, 0),
        (10, 111, 4, 0),
        (11, 111, 1, 1),
        (12, 333, 3, 1),
        (13, 333, 2, 1),
        (14, 333, 3, 1)
    ;

    INSERT INTO student
        (`id`, `name`)
    VALUES
    (111, 'John'),
    (222, 'Kate'),
    (333, 'Matt')
    ;

    INSERT INTO subject
        (`id`, `name`)
    VALUES
    (1, 'MATH'),
    (2, 'ENG'),
    (3, 'SCI'),
    (4, 'GEO')
    ;

    INSERT INTO classStatus
        (`id`, `name`)
    VALUES
    (0, 'Absent'),
    (1, 'Present')
    ; 
```

见小提琴[http://sqlfiddle.com/#!2/a2d93/5](http://sqlfiddle.com/#!2/a2d93/5)

我可以计算出谁缺席并总体呈现如下内容。

```
 SELECT
       studentid,
       students.name AS NAME,
       SUM(presentid = 1) AS present,
       SUM(presentid = 0) AS absent

    FROM classlist
    INNER JOIN student as students ON classlist.studentid=students.id

     GROUP BY studentid, NAME 
```

但是我想知道一个学生连续上/错过了多少节课，这样老师就可以很容易地看到是否有人错过了很多时间，或者有人因出勤率高而获得奖励等。我看过一些帖子谈论条纹，但似乎没有一个与数据呈现给我的方式相匹配，所以我不确定如何实现这一点？

只是为了清楚根据我的样本数据低于条纹的输出应该是。

```
 (1, 111, 1, 1), /* John Present 1 times in a row */
        (2, 222, 3, 0), /* Kate Absent 1 times in a row */
        (3, 333, 2, 1), /* Matt Present 1 times in a row */
        (4, 111, 4, 0), /* John Absent 1 times in a row */
        (5, 111, 1, 1), /* John Present 1 times in a row */
        (6, 222, 3, 0), /* Kate Absent 2 times in a row */
        (7, 333, 2, 1), /* Matt Present 2 times in a row */
        (8, 111, 4, 0), /* John Absent 1 times in a row */
        (9, 111, 4, 0), /* John Absent 2 times in a row */
        (10, 111, 4, 0), /* John Absent 2 times in a row */
        (11, 111, 1, 1), /* John Present 1 times in a row */
        (12, 333, 3, 1), /* Matt Present 3 times in a row */
        (13, 333, 2, 1), /* Matt Present 4 times in a row */
        (14, 333, 3, 1) /* Matt Present 5 times in a row */
        /*Showing the latest status for each user*/
        /* John Present 1 times in a row */
        /* Kate Absent 2 times in a row */
        /* Matt Present 5 times in a row */ 
```

约翰礼物 1。

凯特缺席 2。

马特礼物 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T01:01:00.160

这应该给出与最后一行具有相同值的连续行的计数：

```
select
  classlist.studentid,
  student.name,
  classStatus.name status,
  count(*) presentcnt
from
  classlist inner join student
  on classlist.studentid=student.id
  inner join classstatus
  on classlist.presentid=classstatus.id
  inner join (
    select
      studentid,
      max(case when presentid=0 then id end)  max_0,
      max(case when presentid=1 then id end)  max_1
    from classlist
    group by studentid
  ) s
  on coalesce(classlist.id>least(max_0,max_1) and
       classlist.id<=greatest(max_0,max_1),1)
  and s.studentid=classlist.studentid
group by classlist.studentid 
```

在子查询中，我提取了 presentid = 0 的最大 id 和 presentid = 1 的最大 id。

在外部查询中，我提取并计算 id 大于 max_0 和 max_1 中的最小值且 <= 大于这两者中的最大值的所有行。不管最后一个值是什么，这些都是与最后一个具有相同值的行。

如果其中一个`max_0`或`max_1`为空，则意味着所有行只有一个值，1 或 0，我们必须获取所有行。如果 max_0 或 max_1 之一为空，则整个条件也将为空。使用`Coalesce( condition, 1`) 在这种情况下，我将返回所有行。

请注意，我正在分组`classlist.studentid`并显示一些非聚合列，但这是允许的情况，因为所有非聚合列都具有相同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:42:12.127

你想要这个吗？：

```
SELECT
   studentid,
   name,
   SUM(present = 1) AS present,
   SUM(present = 0) AS absent,
   count(subject) as classTimes,
   subject
   FROM your_table GROUP BY studentid, name,subject 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:47:06.483

试试这个：

```
SELECT A.studentid, s.name, IF(presentid = 1,  'present', 'absent') STATUS, 
       ABS(SUM(IF(presentid = 1, 1, -1))) AS presentcnt
FROM classlist A 
INNER JOIN student s ON A.studentid = s.id 
LEFT JOIN (SELECT MAX(id) id, studentid 
           FROM classlist GROUP BY studentid
          ) B ON A.studentid = B.studentid AND A.id = B.id 
GROUP BY A.studentid 
```

检查这个[**SQL FIDDLE 演示**](http://sqlfiddle.com/#!2/f5445/5)

**输出**

```
| STUDENTID | NAME |  STATUS | PRESENTCNT |
-------------------------------------------
|       111 | John | present |          1 |
|       222 | Kate |  absent |          2 |
|       333 | Matt | present |          5 | 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T22:31:17.413

如果`id`from`classlist`可用于订购，那么您将获得预期的结果

```
SELECT 
  s.name,
  CASE t1.presentid
    WHEN 0 THEN 'absent'
    WHEN 1 THEN 'present'
  END state,
  t1.pc  
FROM (
  SELECT
    c.id,
    c.studentid,
    c.presentid,
    @pcount := IF( @pid = presentid AND @sid = studentid, @pcount + 1, 1 ) as pc,
    @pid := presentid,
    @sid := studentid
  FROM
    classlist c
  ORDER BY
    studentid, id ) t1
  JOIN student s 
    ON t1.studentid = s.id
WHERE
  ( t1.studentid, t1.id ) IN ( SELECT 
                                 studentid, 
                                 MAX( id ) 
                               FROM classlist 
                               GROUP BY studentid ); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/a2d93/26)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T10:04:29.840

我不确定你的问题有什么意义。如果你想要这个

> 约翰礼物 1。
> 
> 凯特缺席 2。
> 
> 马特礼物 5。

你可以试试这个：

```
SELECT
   studentid,
   students.name AS NAME,
   SUM(presentid = 1) AS present,
   SUM(presentid = 0) AS absent,
   IF( SUM(presentid = 1)-SUM(presentid = 0)>=0,SUM(presentid = 1)-SUM(presentid = 0),SUM(presentid = 0)-SUM(presentid = 1)) AS aliase
FROM classlist
  INNER JOIN student as students ON classlist.studentid=students.id
GROUP BY studentid, NAME 
```

# jquery - Jquery 在 FF 和 IE 中不起作用“$.blockUI 不是函数”

> ID：14192207
> 
> 赞同：0
> 
> 时间：2013-01-07T08:23:13.380
> 
> 标签：jquery, asp.net, jquery-plugins, jquery-autocomplete, jquery-blockui

我正在处理该项目中的一个项目，我们使用了很多 jquery，如 AutoComplete、blockUI、DatePicker 等。除了 IE 和 FF 之外，所有的都运行良好。

实际上每个人的机器除了一个系统之外，这些浏览器都没有问题。在该系统中，我们收到一条错误消息`$.blockUI is not a function`。我们已经从该系统中清除了缓存，但仍然找不到任何路由原因。如果有人对这个问题有任何想法，请告诉我。我在这个问题上浪费了 2 天，但无法找到原因是系统问题还是代码错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:36:01.800

可能没有加载blockUI。尝试`ready()`在您的代码周围添加一个：

```
$(document).ready(function() {
    // your code
    $.blockUI;
}) 
```

**更新，其他解决方案：**

1.  将其用作 jQuery 插件时使用它创建`$.fn.blockUI`并调用它`$(this).blockUI()`
2.  将其称为`$(element).block()`，请参阅[docs](http://www.malsup.com/jquery/block/#element)。

# php - 将文档根目录定义为 ROOT_PATH

> ID：14192210
> 
> 赞同：0
> 
> 时间：2013-01-07T08:23:43.277
> 
> 标签：php, constants, document-root

我使用一些常量来定义我正在构建的网站上特定目录的路径，如下所示：

```
define("ROOT_PATH", "http://website.com/");
define("IMAGES_DIR", ROOT_PATH . "images/"); 
```

我通常这样使用它们：

```
echo "<img src='" . IMAGES_DIR . "some_image.jpg' />"; 
```

现在我想知道两者之间是否有任何区别

```
define("ROOT_PATH", "http://website.com/"); 
```

和

```
define("ROOT_PATH", "/home/username/public_html/"); 
```

我应该使用哪一个？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:29:36.900

您不能真正使用以下内容：

```
define("ROOT_PATH", "/home/username/public_html/"); 
```

因为它会尝试加载

```
http://website.com/home/username/public_html/image.png 
```

你真的不想要的。

使用

```
define("ROOT_PATH", "http://website.com/"); 
```

将尝试获取

```
http://website.com/image.png 
```

这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:53:51.780

不同之处在于 html 不会识别图像或 src 属性的完整路径......但你可以使用它

```
define ('ROOT', dirname(dirname(__FILE__)));
define ('ROOT_PATH', "http://website.com/");
define ('INCLUDES',ROOT .'path/to/php/includes/'); //for php includes 
```

或者您可以使用 php 函数根据 getenv("SCRIPT_NAME") 转换 "ROOT_PATH"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:35:17.477

你应该使用

```
define("ROOT_PATH", "http://website.com/"); 
```

如果您使用：

```
define("ROOT_PATH", "http://website.com/"); 
```

在客户端，图像源：

```
http://website.com/some_image.jpg 
```

如果您使用：（仅适用于本地文件系统）

```
define("ROOT_PATH", "/home/username/public_html/"); 
```

图片来源：

```
http://website.com/home/username/public_html/some_image.jpg 
```

# map - Clojure reducers 库 - 最大折叠

> ID：14192211
> 
> 赞同：7
> 
> 时间：2013-01-07T08:23:43.450
> 
> 标签：map, clojure, reduce, reducers

我正在尝试将以下示例转换为新的 Clojure 1.5 reducers 库：

```
(reduce max (map inc (range 10))) 
;=> 10 
```

当我更改它时 - 我收到以下错误：

```
(r/fold max  (r/map inc (range 10)))
;ArityException Wrong number of args (0) passed to: core$max  clojure.lang.AFn.throwArity (AFn.java:437) 
```

有人可以给我一个正确的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T09:28:53.523

请注意，当您替换为 时，它会`max`起作用`+`。

```
(r/fold + (r/map inc (range 10)))
; => 55 
```

不同之处在于，[like`+`](http://www.clodoc.org/doc/clojure.core/%2B) `max` [没有不](http://www.clodoc.org/doc/clojure.core/max)带参数的调用的情况。`r/fold`需要组合函数——即`max`——在不带参数调用时提供一个标识值。因为`*`它`1`，因为`+`它`0`。

一个潜在的解决方案是定义一个`max'`作为`max`但当不带参数调用时它返回负无穷大-<a href="https://en.wikipedia.org/wiki/Identity_element" rel="noreferrer">一个身份函数的元素`max`。

```
(defn max'
  ([] Double/NEGATIVE_INFINITY)
  ([& args] (apply max args)))
(r/fold max'  (r/map inc (range 10)))
; => 10 
```

[`r/monoid`](https://github.com/clojure/clojure/blob/3e89a16b/src/clj/clojure/core/reducers.clj#L315)使用该函数可以实现相同的结果。

```
(r/fold (r/monoid max #(Double/NEGATIVE_INFINITY)) (r/map inc (range 10))) 
```

有关进一步的讨论，请参阅[*Reducers - A Library and Model for Collection Processing*](http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html)，*Simplicity is Opportunity*部分。

# .net - 数据表过滤：linq vs filter？

> ID：14192215
> 
> 赞同：6
> 
> 时间：2013-01-07T08:24:12.217
> 
> 标签：.net, linq, datatable

过滤内存对象（数据表）：

这样做之间是否有很大不同：

```
 var t = dt.Select("id=2"); 
```

对比

```
 var g = dt.AsEnumerable().Where(f => f["id"].ToString() == "2"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T08:30:16.887

我假设它`DataTable.Select`需要更多的内存，`Enumerable.Where`因为后者只是一个循环，`DataRowCollection`而`DataTable`旧的`DataTable.Select`创建新的对象，比如`Select`or `DataExpression`，它甚至`DataRow[]`从查询中返回新的对象（）。`Enumerable.Where`只需在循环中使用谓词来确定要返回的内容。它也是惰性执行的，所以你可以从结果中取 10 行。

```
var rows = dt.AsEnumerable()
             .Where(row => row.Field<int>("id") == 2)
             .Take(10); // not possible with DataTable.Select 
```

两者都是内存查询，所以差别不大。

我会选择更易读、更强大、更易于维护以及强类型（[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)扩展）`Linq-To-DataTable`：.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T08:32:46.550

我建议你通过 ASP.net 论坛线程 - [DataTable.Select Vs DataTable.AsEnumerable().FirstOrDefault](http://forums.asp.net/t/1614046.aspx/1)

来自：[使用哪一个；Datatable.Select() 还是 LINQ？](https://stackoverflow.com/questions/3385563/which-one-to-use-datatable-select-or-linq)

> 在我看来，LINQ 通常比几乎任何其他形式的数据过滤更容易阅读，并且比使用 DataTable.Select 具有优势，至少部分是强类型的，因此更难出错。

对于大量行，LINQ 比 SELECT 快，当行数不断增加时，您应该会看到相当大的差异。

# jquery - 单击后退按钮但不离开页面时防止自动滚动？

> ID：14192216
> 
> 赞同：3
> 
> 时间：2013-01-07T08:24:12.600
> 
> 标签：jquery, css, scroll

看到这个页面：http: [//goo.gl/X3tjr](http://goo.gl/X3tjr)

当您单击帖子时，该帖子会以动画形式出现，并且 URL 哈希值会发生变化。问题是当返回时，我想要一个平滑的动画回到用户单击帖子时的相同位置。眼下，只是跳回原位，简直不好看。

我读了这个问题：[Prevent browser from snapping to previous scroll position when push back button](https://stackoverflow.com/questions/11512140/prevent-browser-from-snapping-to-previous-scroll-position-when-pushing-back-butt)

但我的情况有点不同，因为页面实际上并没有重新加载（哈希只是消失了）。

是否有可能摆脱自动滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:08:18.353

我推荐你 History.js： [https ://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

无需重新加载即可轻松更改 url 和管理页面历史记录。

不幸的是，您无法捕获“返回”事件，因为它不存在，但您可以捕获*statechange*

```
// Bind to StateChange Event
History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
    var State = History.getState(); // Note: We are using History.getState() instead of event.state
    History.log(State.data, State.title, State.url);
}); 
```

我通常做的是捕捉用户的点击，如果没有点击就触发了状态更改，我假设用户返回。

# c++ - APR 线程和信号处理

> ID：14192219
> 
> 赞同：4
> 
> 时间：2013-01-07T08:24:38.500
> 
> 标签：c++, multithreading, signal-handling, apr

我目前正在尝试使用 Apache Portable Runtime 实现线程。一切正常，但由于缺乏文档或示例，我不确定我是否按照预期的方式进行操作。

我需要两个线程和信号处理来捕获控制台上的 CTRL-C 来清理我的服务器和可能的线程。这是我目前的做法：

```
// Define APR thread pool
apr_pool_t *pool;

// Define server
MyServer *server;

// Define threads
apr_thread_t *a_thread, *b_thread;
apr_status_t status;

static void * APR_THREAD_FUNC func_a(apr_thread_t * thread,
        void *data) {
        // do func_a stuff here
}

static void * APR_THREAD_FUNC func_b(apr_thread_t * thread,
        void *data) {
        // do func_b stuff here
}

// Cleanup before exit
void cleanup(int s) {
    printf("Caught signal %d\n", s);

    // Destroy thread pool
    apr_pool_destroy(pool);

    //apr_thread_exit(a_thread, APR_SUCCESS);
    //apr_thread_exit(b_thread, APR_SUCCESS);

    //apr_terminate();

    // Stop server and cleanup
    server->stopServer();
    delete server;

    exit(EXIT_SUCCESS);
}

int main(void) {
    // Signal handling
    signal(SIGINT, cleanup);

    // Create server
server = MyServerFactory::getServerImpl();

bool success = server->startServer();

// Initialize APR
if (apr_initialize() != APR_SUCCESS) {
    printf("Could not initialize\n");
    return EXIT_FAILURE;
}

// Create thread pool
if (apr_pool_create(&pool, NULL) != APR_SUCCESS) {
    printf("Could not allocate pool\n");
    return EXIT_FAILURE;
}

// Create a_thread thread
if (apr_thread_create(&a_thread, NULL, func_a, NULL,
        pool) != APR_SUCCESS) {
    printf("Could not create a_thread\n");
    return EXIT_FAILURE;
}

//Create b_thread thread
if (apr_thread_create(&b_thread, NULL, func_b, NULL,
        pool) != APR_SUCCESS) {
    printf("Could not create b_thread\n");
    return EXIT_FAILURE;
}

    // Join APR threads
    apr_thread_join(&status, a_thread);
    apr_thread_join(&status, b_thread);

    return EXIT_SUCCESS;
} 
```

这或多或少符合预期。我唯一不确定的是清理工作是否正常。

1.  清理功能似乎被调用不止一次（字符串“Caught signal..”在终端上出现不止一次）。有没有办法防止这种情况？这有问题吗？

2.  我发现了不止一个使用后清理 APR 线程的示例。我的方式是否足够或者我需要一些评论的东西？还是我完全错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-10T17:29:23.383

APR 线程清理在[APR 教程的](http://dev.ariel-networks.com/apr/apr-tutorial/html/apr-tutorial.html)[线程部分](http://dev.ariel-networks.com/apr/apr-tutorial/html/apr-tutorial-16.html)中有详细的解释。按顺序，清理步骤如下所示：

1.  调用`apr_thread_exit()` *线程本身*。虽然 Unix 线程会自动终止，但 Windows 线程不会。调用此函数以实现可移植性（并在必要时返回状态）。
2.  调用`apr_thread_join()`主线程等待所有线程终止。
3.  调用`apr_pool_destroy()`以释放主内存池。（子内存池用 释放`apr_thread_exit()`。）
4.  调用`apr_terminate()`以释放其他资源（套接字等）。请注意，`exit()`在没有这些最后步骤的情况下简单地调用另一个线程[可能会导致崩溃](https://github.com/GrahamDumpleton/mod_wsgi/issues/8)。

他们还有一个[简短的示例程序](http://dev.ariel-networks.com/apr/apr-tutorial/sample/thread-sample.c)来演示其中的一些内容。

至于为什么您的信号处理程序会触发两次，我认为这与 APR 无关。SIGINT 被发送到父进程和子进程，所以我怀疑`MyServer`正在分叉一个新进程并且两者都在调用处理程序。

# c# - 实体框架中相同数据库列的映射 2 属性

> ID：14192220
> 
> 赞同：0
> 
> 时间：2013-01-07T08:24:51.960
> 
> 标签：c#, .net, asp.net-mvc-2, ef-code-first, entity-framework-4.1

我正在使用**MVC 和 c#进行****EF 4.1 代码优先**开发。

 ****这是我的要求：**

1.  有什么方法可以将我的模型类的 2 个属性映射到同一个数据库列？

B'cos 我遇到如下**数据检索问题**。

db 列的当前映射属性具有一些复杂的计算。

因此，当我从我的 UI 作为 ajax 调用调用它时，它会将计算值检索为 0.0，计算延迟的 b'cos（当我进行调试然后减慢它会正确生成值的东西时）。

如果我设置另一个没有任何计算的字段，它会正确显示。

如何克服上述问题？

**我的部分模型代码如下。**

```
public class Invoice
    {
        public Invoice() { Id = Guid.NewGuid(); Created = DateTime.Now; }
        public Guid Id { get; set; }

        public decimal LatestTotal { get; set; }

        [NotMapped]
        public decimal Total
        {
            get
            {
                return (LatestTotal = this.CalculateTotal());
            }
        }
 } 
```

有问题的财产是`LatestTotal`

**操作方法**如下所示

```
public ActionResult GetServiceAndRetailSalesDetails(Guid invoiceOrSaleId, string providerKey, DateTime checkoutDate, double checkoutTime)
        {
            var items = new List<CheckOutServiceAndRetailItem>();
            TimeSpan timeResult = TimeSpan.FromHours(checkoutTime);
            var checkOut = checkoutDate + timeResult;

             var serviceDetails = Repository.GetAllPayableItems(checkOut, invoiceOrSaleId).ToList();

                foreach (var s in serviceDetails)
                {
                    var item = new CheckOutServiceAndRetailItem
                    {
                        AllocationOrInvoiceOrSaleId = s.Allocation.AllocationId, 
                        Name = s.Allocation.Service.Name,
                        Price = s.LatestTotal,
                        //Price = s.Total,
                        Class = s.Allocation.Service.IsAnExtra ? "RetailOrExtraService" : "",
                    };
                    items.Add(item);
                }
     return Json(items, JsonRequestBehavior.AllowGet);
} 
```

**来自 UI 的Ajax 调用**如下所示。

```
$.ajax({
     type: "GET",
     url: "/Portal/GetServiceAndRetailSalesDetails",
     dataType: 'json',
     contentType: "application/json; charset=UTF-8",
     data: { invoiceOrSaleId: invoiceOrSaleId, providerKey: providerKey, checkoutDate: checkoutDate, checkoutTime: checkoutTime },
     success: function (response) {
              make = "<table id='tblPayment'>";
              var totalToBepaid = 0.0;
              toBePaidItems = [];
              $.each(response, function (index, sr) {
              if (unPaid) {
              make += "<tr id=" + sr.AllocationOrInvoiceOrSaleId + " class=" + sr.Class + ">" + "<td style='padding-right:100px'>" + sr.Name + "</td><td class='colTotal' style='padding-right:45px'>" + '$ ' + sr.Price.toFixed(2) + "</td><td></tr>";
               } else {
                   make += "<tr id=" + sr.AllocationOrInvoiceOrSaleId + " class=" + sr.Class + ">" + "<td style='padding-right:100px'>" + sr.Name + "</td><td class='colTotal' style='padding-right:45px'>" + '$ ' + sr.Price.toFixed(2) + "</td></tr>";
                   }
                   totalToBepaid += sr.Price;
               //insert into array
               toBePaidItems.push(sr.AllocationOrInvoiceOrSaleId);
       });
       var lateFee = parseFloat($("#hdnLateFee").val());
       if (lateFee > 0) {
               totalToBepaid += lateFee;
               make += "<tr class='Fees'><td style='padding-right:100px'>Late Pickup Fee</td><td class='colTotal' style='padding-right:45px'>" + '$ ' + lateFee + "</td></tr>";
                 }
              make += "</table>";
              $("#serviceAndRetailDetails").html(make);
         }
         }); 
```

**UI 图像如下**（当我放一个刹车点并运行然后显示正确的值）

![在此处输入图像描述](../Images/dfc148f78104e01459ec23a66e9b72ba.png)**

# css - Autofit and vertically center text

> ID：14192221
> 
> 赞同：1
> 
> 时间：2013-01-07T08:25:01.883
> 
> 标签：css

I think this is a different question from other "autofit"-related questions.

I have single-line text label that I'd like to auto-fit to always be half the screen width (dynamically during and after resize, etc.) as well as centered on the page vertically and horizontally. I've tried the [jQuery FitText plugin](http://fittextjs.com/), but it does not seem to work well with vertical centering (shifts up or down depending on the font size, sometimes below the viewport)

It may be due to my use of absolute positioning, but I can't find any alternate way to accomplish this.

My CSS:

```
h1 {
  position: absolute;
  top: 25%;
  right: 25%;
  left: 25%;
  bottom: 25%;
  display: table-cell;
  vertical-align: middle;
} 
```

This JSFiddle shows the block I would like to fill: [http://jsfiddle.net/KFySS/6/](http://jsfiddle.net/KFySS/6/)

**Edit**: I've added a fake background image text to the fiddle above, which behaves very closely to what I'd like the real size behave to be.

I want the short text to fill the block outlined with dashed line. It should also be centered vertically and/or horizontally. This bounding box is just for illustration, but it was my starting point when using the Fittext plugin.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:57:25.513

I found a solution that uses the new [CSS3 vw, vh, and vmin font sizing units](http://css-tricks.com/viewport-sized-typography/), which sizes fonts relative to the current viewport.

```
<div>
  <h1>Hi!</h1>
</div>

div {
  text-align: center;
}
h1 {
  font-size: 50vmin;
  position: absolute;
  top: 50%;
  margin-top: -25vmin;
  width: 100%;
} 
```

Here is an example for newer webkit browsers:

[http://jsfiddle.net/uTykf/](http://jsfiddle.net/uTykf/)

The vertical centering approach I used seems a bit ugly, but best I could do. Happy to hear if there's a better approach.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:31:46.837

I think this is what you want.

```
h1 {
  padding: 10%;
  text-align: center;
  border: 4px dashed red;
  margin: 25%;
} 
```

Check out the link below:

[http://jsfiddle.net/GLEcd/2/](http://jsfiddle.net/GLEcd/2/)

# algorithm - 产品 p 有多少个 n 位数字

> ID：14192224
> 
> 赞同：4
> 
> 时间：2013-01-07T08:25:18.687
> 
> 标签：algorithm, combinatorics

我们应该使用什么算法来获得 n 位数字的计数，使得其数字的乘积为 p；这里的特殊条件是没有一个数字应该是 1；

到目前为止我的想法是对 p 进行素数分解。假设 n=3 和 p=24。

我们首先对 24 进行素数分解，得到：2*2*2*3。

现在我在确定这些组合时遇到问题

4*2*3 , 2*4*3, .... 等即使可以这样做...我将如何缩放 n 远小于素数。

我不太确定这是否是正确的方向......欢迎任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T11:08:54.193

首先，你真的不需要完整的素数分解，只需要分解成小于你的基数的素数（我猜你的意思是 10，但这个问题可以推广到任何基数）。所以我们只需要分解成前 4 个素数：2、3、5 和 7。如果其余（素数或非素数）因子大于 1，则问题有 0 个解。

现在，让我们假设这个数字`p`被分解为：

```
p = 2^d1 * 3^d2 * 5^d3 * 7^d4 
```

并且也由`n`数字组成：

`p =`d [(n-1)] d [(n-2)] ...d [2] d [1] d [0]

然后，重新排列数字，也将是：

```
p = 2^q2 * 3^q3 * 4^q4 * 5^q3 * ... * 9^q9 
```

在哪里`qi >= 0`和`q2 + q3 + ... q9 = n`

还有（由于分解）：

```
for prime=2:  d1 = q2      + 2*q4      + q6      + 3*q8
for prime=3:  d2 =      q3             + q6             + 2*q9
for prime=5:  d3 =                  q5
for prime=7:  d4 =                            q7 
```

所以`q5`and`q7`是固定的，我们必须找到方程的所有非负整数解：（
其中未知数是其余的`qi`：）`q2, q3, q4, q6, q8 and q9`

```
 d1 = q2      + 2*q4 + q6 + 3*q8
         d2 =      q3        + q6        + 2*q9
n - d3 - d4 = q2 + q3 +   q4 + q6 +   q8 +   q9 
```

对于上述每一种解决方案，都有数位重排，可以通过以下公式求出：

```
X = n! / ( q2! * q3! * ... q9! ) 
```

必须总结一下。

可能有一个封闭的公式，使用生成函数，您可以将其发布在 Math.SE

* * *

`p=24`,的示例`n=3`：

```
p = 2^3 * 3^1 * 5^0 * 7^0 
```

我们有：

```
d1=3, d2=1, d3=0, d4=0 
```

整数解：

```
3 = q2      + 2*q4 + q6 + 3*q8
1 =      q3        + q6        + 2*q9
3 = q2 + q3 +   q4 + q6 +   q8 +   q9 
```

是`(q2, q3, q4, q6, q8, q9) =`：

```
(2, 0, 0, 1, 0, 0) 
(1, 1, 1, 0, 0, 0) 
```

这给了：

```
3! / ( 2! * 1! )      = 3
3! / ( 1! * 1! * 1! ) = 6 
```

和 `3+6 = 9`整体解决方案。

* * *

`p=3628800`,的示例`n=10`：

```
p = 2^8 * 3^4 * 5^1 * 7^1 
```

我们有：

```
d1=8, d2=4, d3=1, d4=1 
```

整数解：

```
8 = q2      + 2*q4 + q6 + 3*q8
4 =      q3        + q6        + 2*q9
8 = q2 + q3 +   q4 + q6 +   q8 +   q9 
```

是`(q2, q3, q4, q6, q8, q9)`（连同相应的数字和每个解决方案的重新排列）：

```
(5, 0, 0, 0, 1, 2)    22222899 57    10! / (5! 2!)       =  15120
(4, 0, 2, 0, 0, 2)    22224499 57    10! / (4! 2! 2!)    =  37800
(4, 1, 0, 1, 1, 1)    22223689 57    10! / (4!)          = 151200
(3, 2, 1, 0, 1, 1)    22233489 57    10! / (3! 2!)       = 302400
(4, 0, 1, 2, 0, 1)    22224669 57    10! / (4! 2!)       =  75600
(3, 1, 2, 1, 0, 1)    22234469 57    10! / (3! 2!)       = 302400
(2, 2, 3, 0, 0, 1)    22334449 57    10! / (3! 2! 2!)    = 151200
(2, 4, 0, 0, 2, 0)    22333388 57    10! / (4! 2! 2!)    =  37800
(3, 2, 0, 2, 1, 0)    22233668 57    10! / (3! 2! 2!)    = 151200
(2, 3, 1, 1, 1, 0)    22333468 57    10! / (3! 2!)       = 302400
(1, 4, 2, 0, 1, 0)    23333448 57    10! / (4! 2!)       =  75600
(4, 0, 0, 4, 0, 0)    22226666 57    10! / (4! 4!)       =   6300
(3, 1, 1, 3, 0, 0)    22234666 57    10! / (3! 3!)       = 100800
(2, 2, 2, 2, 0, 0)    22334466 57    10! / (2! 2! 2! 2!) = 226800
(1, 3, 3, 1, 0, 0)    23334446 57    10! / (3! 3!)       = 100800
(0, 4, 4, 0, 0, 0)    33334444 57    10! / (4! 4!)       =   6300 
```

这是`2043720`完整的解决方案，如果我没有犯任何错误的话..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:57:35.160

我不认为我会从解决已知的“困难”问题开始，即计算素数分解。*我不认为*我的意思是*我的直觉，而不是对复杂性的任何严格计算，告诉*我。

由于您最终只对`p`I 的个位数除数感兴趣，因此首先除以`p`，`2`然后除以`3`，然后`4`一直到`9`。当然，其中一些除法不会产生整数结果，在这种情况下，您可以放弃该数字，不再考虑。

对于你的例子，`p = 24`你会得到`{{2},12}, {{3},8}, {{4},6}, {{6},4}, {{8},3}`（即除数和余数的元组）。现在再次应用该方法，尽管这次您正在寻找其数字乘以余数的 2 位数字。也就是说，因为`{{2},12}`你会得到`{{2,2},6},{{2,3},4},{{2,4},3},{{2,6},2}`. 碰巧所有这些结果都提供了 3 位数字，其数字乘以`24`，但一般来说，一些余数可能仍然有 2 位或更多位，您需要在这些点修剪搜索树。现在回去`{{3},8}`继续。

请注意，这种方法避免了必须单独计算需要考虑的一组数字的多少排列，因为它枚举了所有排列。它还避免了必须考虑`2*2`和`4`作为单独的候选者。

我希望您也可以通过一些记忆来加快速度。

现在我期待有更多组合学知识的人告诉我们这个问题的封闭式解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T10:24:15.327

您可以使用基于以下公式的**动态编程方法：**

```
f[ n ][ p ] = 9 * ( 10^(n-1) - 9^(n-1) ),  if p = 0
              0,  if n = 1 and p >= 10
              1,  if n = 1 and p < 10
              sum{ f[ n - 1 ][ p / k ] for 0 < k < 10, p mod k = 0 }, if n > 1 
```

第一种情况是 p = 0 的单独情况。这种情况在 O(1) 中计算，此外有助于从第 4 种情况中排除 k = 0 值。
第二种和**第三种****情况**是动态基础。
第**4**种情况**k**依次取最后一位的所有可能值，我们通过减少到相同的规模较小的问题，将数字的数量与最后一位**k的乘积****p相加。**

 **如果您使用记忆实现 dp，这将有**O( n * p )**运行时间。

PS：我的回答是针对比 OP 描述的更普遍的问题。如果必须满足没有数字必须等于 1 的条件，则可以将公式调整如下：

```
f[ n ][ p ] = 8 * ( 9^(n-1) - 8^(n-1) ),  if p = 0
              0,  if n = 1 and p >= 10 or p = 1
              1,  if n = 1 and 1 < p < 10
              sum{ f[ n - 1 ][ p / k ] for 1 < k < 10, p mod k = 0 }, if n > 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T10:05:01.523

对于N个数字，其数字的乘积是p；

例如，如果 n = 3 且 p =24

安排如下（排列）

```
= (p!)/(p-n)!
= (24!) /(24 -3)!
= (24 * 23 * 22 * 21 )! / 21 !
= (24 * 23 * 22 )
= 12144 
```

所以可以进行12144安排

对于组合如下

```
= (p!)/(n!) * (p-n)!
= (24!) /(3!) * (24 -3)!
= (24 * 23 * 22 * 21 )! / (3!) * 21 !
= (24 * 23 * 22 ) / 6
= 2024 
```

愿这对你有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T10:25:46.320

这些问题似乎是人为的，但无论如何你所看到的都有上限。例如 p 不能有大于 7 的素数除数，因为它必须是单个数字（“使得其数字的乘积”）。

因此假设 p = 1 * 2^a * 3^b * 5^c * 7^d。

2^a 可以来自 ceil(a/3) 到 'a' 数字。3^b 可以来自 ceil(b/2) 到 'b' 位。5^c 和 7^d 可以分别来自 'c' 和 'd' 数字。其余数字可以用 1 填充。

因此 n 的范围可以从 ceil(a/3)+ceil(b/2)+c+d 到无穷大，而 p 具有一组固定值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T11:04:00.970

素数分解感觉是正确的方向，尽管您不需要任何大于 7 的素数，因此您可以重复除以 2、3、5、7。（如果我们没有得到一个素数，或者得到一个> 7，则没有解决方案）。

一旦我们有了主要因素，`p % x`并且`p / x`可以实现为恒定时间操作（您实际上不需要`p`，您可以只保留主要因素）。

我的想法是，用下面的算法计算组合，从那里得到的排列很容易。

```
getCombinations(map<int, int> primeCounts, int numSoFar, string str)
  if (numSoFar == n)
    if (primeCounts == allZeroes)
      addCombination(str);
    else
      ;// do nothing, too many digits
  else if (primeCounts[7] >= 1) // p % 7
    getCombinations(primeCounts - [7]->1, numSoFar-1, str + "7")
  else if (primeCounts[5] >= 1) // p % 5
    getCombinations(primeCounts - [5]->1, numSoFar-1, str + "5")
  else if (primeCounts[3] >= 2) // p % 9
    getCombinations(primeCounts - [3]->2, numSoFar-1, str + "9")
    getCombinations(primeCounts - [3]->2, numSoFar-2, str + "33")
  else if (primeCounts[2] >= 3) // p % 8
    getCombinations(primeCounts - [2]->3, numSoFar-1, str + "8")
    getCombinations(primeCounts - [2]->3, numSoFar-2, str + "24")
    getCombinations(primeCounts - [2]->3, numSoFar-3, str + "222")
  else if (primeCounts[3] >= 1 && primeCounts[2] >= 1) // p % 6
    getCombinations(primeCounts - {[2]->1,[3]->1}, numSoFar-1, str + "6")
    getCombinations(primeCounts - {[2]->1,[3]->1}, numSoFar-2, str + "23")
  else if (primeCounts[2] >= 2) // p % 4
    getCombinations(primeCounts - [2]->2, numSoFar-1, str + "4")
    getCombinations(primeCounts - [2]->2, numSoFar-2, str + "22")
  else if (primeCounts[3] >= 1) // p % 3
    getCombinations(primeCounts - [3]->1, numSoFar-1, str + "3")
  else if (primeCounts[2] >= 1) // p % 2
    getCombinations(primeCounts - [2]->1, numSoFar-1, str + "2")
  else ;// do nothing, too few digits 
```

考虑到事情的完成顺序，我认为不会有重复。

**改进：**

`p%7`一旦你看过，你就不需要再看一遍（在堆栈的更深处） `p%5`，因为我们知道它不能再被 7 整除，所以很多这些检查都可以优化掉。

`primeCounts`不必是map，可以是长度为4的数组，也不必复制，可以适当增减数值即可。也可以做类似的事情`str`（字符数组）。

如果 的数字太多，则检查或`getCombinations(..., str + "8")`没有意义。这个和类似的检查不应该太难实现（只要让函数返回一个布尔值）。`"24"``"222"`**

# java - 在 web 收获 xml 中使用正则表达式

> ID：14192225
> 
> 赞同：0
> 
> 时间：2013-01-07T08:25:22.977
> 
> 标签：java, xml, regex, webharvest

我正在使用网络收获来废弃一些电子商务网站。我正在遍历搜索页面并在输出 xml 中获取每个产品详细信息。但现在我想在抓取时在锚（a）标签中使用正则表达式并获得特定字符串.ie,

```
let $linktoprod :=data($item//a[@class="fk-anchor-link"]/@href) 
```

上面的行返回每个产品的锚标签 href 值，即，对于第一个产品，返回的值是，

```
/casio-sheen-analog-watch-women/p/itmdaqmvzyy23hz5?pid=WATDAQMVVNQEM9CX&amp;ref=6df83d8f-f61f-4648-b846-403938ae92fa 
```

现在我想使用像 /([^/\?]+)\? 这样的正则表达式 并获取最后一个 / 和 ? 之间的字符串 IE，

```
itmdaqmvzyy23hz5 
```

在输出 xml 中。请任何对此有任何想法的人帮助我。谢谢你。

更新 -

```
 <?xml version="1.0" encoding="UTF-8"?>

<config charset="ISO-8859-1">

<function name="download-multipage-list">
        <return>
            <while condition="${pageUrl.toString().length() != 0}" maxloops="${maxloops}" index="i">
                <empty>
                    <var-def name="content">
                        <html-to-xml>
                            <http url="${pageUrl}"/>
                        </html-to-xml>
                    </var-def>

                    <var-def name="nextLinkUrl">
                        <xpath expression="${nextXPath}">
                            <var name="content"/>
                        </xpath>
                    </var-def>

                    <var-def name="pageUrl">
                        <template>${sys.fullUrl(pageUrl.toString(), nextLinkUrl.toString())}</template>
                    </var-def>
                </empty>

                <xpath expression="${itemXPath}">
                 <var name="content"/>  
                </xpath>
            </while>
        </return>
    </function>

    <var-def name="products">          
        <call name="download-multipage-list">
                 <call-param name="pageUrl">http://www.flipkart.com/watches/pr?sid=reh%2Cr18</call-param>  
                 <call-param name="nextXPath">//a[starts-with(., 'Next')]/@href</call-param>
         <call-param name="itemXPath">//div[@class="product browse-product "]</call-param>
         <call-param name="pids"></call-param>
            <call-param name="maxloops">5</call-param>
         </call>

    </var-def>
   <var-def name="scrappedContent"> 
    <!-- iterates over all collected products and extract desired data -->

    <![CDATA[ <catalog> ]]> 

        <loop item="item" index="i">
            <list><var name="products"/></list>
            <body>
            <xquery>
                    <xq-param name="item" type="node()"><var name="item"/></xq-param>
                    <xq-expression><![CDATA[
                            declare variable $item as node() external;

                    let $linktoprod :=data($item//a[@class="fk-anchor-link"]/@href)
                  let $name := data($item//div[@class="title"])

                      return
                      <product>
                      <link>{$linktoprod}</link>
                    <title>{normalize-space($name)}</title>

                     </product>
                    ]]></xq-expression>
                </xquery>

            </body>
        </loop>
        <![CDATA[ </catalog> ]]>

 </var-def>  
</config> 
```

我的配置 xml 如上所示。在我的 xml 中何处使用正则表达式代码块？而且我希望将正则表达式应用于linktoprod，并最终将链接标记中的正则表达式输出作为输出xml。请任何人指导我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:37:28.357

我不知道网络收获，但如果它支持非贪婪量词，你可以使用这个模式

```
/([^/]+?)\? 
```

根据[Web Harvest 用户手册 - 正则表达式](http://web-harvest.sourceforge.net/manual.php#regexp)，您必须插入类似这样的内容

```
<regexp>
    <regexp-pattern>/([^/]+?)\?</regexp-pattern>
    <regexp-source>
        /casio-sheen-analog-watch-women/p/itmdaqmvzyy23hz5?pid=WATDAQMVVNQEM9CX&amp;ref=6df83d8f-f61f-4648-b846-403938ae92fa
    </regexp-source>
    <regexp-result>
        <template>Last URL part is "${_1}"</template>
    </regexp-result>
</regexp> 
```

在该`<regexp-source>`部分中，您必须插入要搜索的 URL 或变量。从手册和您的配置 xml 猜测它*可能*类似于

```
<regexp-source>
    <var>scrappedContent</var>
</regexp-source> 
```

或者

```
<regexp-source>
    ${linktoprod}
</regexp-source> 
```

我认为你必须尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:39:11.000

试试这个正则表达式：

```
/([^/]+)\? 
```

您可能需要去除前导`/`和尾随`?`.

为了说明正则表达式的工作原理，这是它在 JavaScript 中的结果：

```
var s = "/casio-sheen-analog-watch-women/p/itmdaqmvzyy23hz5?pid=WATDAQMVVNQEM9CX&amp;ref=6df83d8f-f61f-4648-b846-403938ae92fa"
console.log(s.match(/\/([^/]+)\?/g)); //  /itmdaqmvzyy23hz5? 
```

# c++ - 等待输入一段时间

> ID：14192230
> 
> 赞同：5
> 
> 时间：2013-01-07T08:25:49.093
> 
> 标签：c++, c, windows

是否有任何功能可以等待输入直到达到特定时间？我正在制作一种 Snake 游戏。

我的平台是Windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:00:49.153

对于基于终端的游戏，您应该看看[ncurses](http://hughm.cs.ukzn.ac.za/~murrellh/os/notes/ncurses.html#input)。

```
 int ch;
 nodelay(stdscr, TRUE);
 for (;;) {
      if ((ch = getch()) == ERR) {
          /* user hasn't responded
           ...
          */
      }
      else {
          /* user has pressed a key ch
           ...
          */
      }
 } 
```

**编辑：**

另请参阅[ncurses 是否可用于 Windows？](https://stackoverflow.com/questions/138153/is-ncurses-available-for-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:37:45.333

我找到了一个使用 conio.h 的 kbhit() 函数的解决方案，如下所示：-

```
 int waitSecond =10; /// number of second to wait for user input.
    while(1)
    {

     if(kbhit()) 
      {
       char c=getch();
       break;
      }

     sleep(1000); sleep for 1 sec ;
     --waitSecond;

     if(waitSecond==0)   // wait complete.
     break;  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:48:43.007

试试看`bioskey()`，[这](http://www.softwareandfinance.com/Turbo_C/bioskey.html)是一个例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <bios.h>
#include <ctype.h>

#define F1_Key 0x3b00
#define F2_Key 0x3c00

int handle_keyevents(){
   int key = bioskey(0);
   if (isalnum(key & 0xFF)){
      printf("'%c' key pressed\n", key);
      return 0;
   }

   switch(key){
      case F1_Key:
         printf("F1 Key Pressed");
         break;
      case F2_Key:
         printf("F2 Key Pressed");
         break;
      default:
         printf("%#02x\n", key);
         break;
   }
   printf("\n");
   return 0;
}

void main(){
   int key;
   printf("Press F10 key to Quit\n");

   while(1){
      key = bioskey(1);
      if(key > 0){
         if(handle_keyevents() < 0)
            break;
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-15T12:45:12.650

基于[**@birubisht**的回答](https://stackoverflow.com/a/14197122/1835470)，我制作了一个更简洁的函数，并使用了非弃用版本的`kbhit()`and `getch()`- ISO C++ 的`_kbhit()`and `_getch()`。
**函数花费：**等待用户输入的秒数
**函数返回：** `_`当用户没有放置任何字符时，否则返回输入的字符。

```
/**
  * Gets: number of seconds to wait for user input
  * Returns: '_' if there was no input, otherwise returns the char inputed
**/
char waitForCharInput( int seconds ){
    char c = '_'; //default return
    while( seconds != 0 ) {
        if( _kbhit() ) { //if there is a key in keyboard buffer
            c = _getch(); //get the char
            break; //we got char! No need to wait anymore...
        }

        Sleep(1000); //one second sleep
        --seconds; //countdown a second
    }
    return c;
} 
```

# css - CSS 过渡：向右移动

> ID：14192234
> 
> 赞同：0
> 
> 时间：2013-01-07T08:26:13.960
> 
> 标签：css, html, animation, responsive-design, transition

我必须制作一个响应式网站，并且当我将浏览器缩小到指定大小时，我希望左侧的徽标向右移动，使其位于中心。

这是我想要实现的[过渡](http://www.the-art-of-web.com/css/css-animation/#.UOqD4ImLIoB)的示例。它位于“2.Animating your transitions”框1下

我知道过渡是在悬停时开始的，但是在调整浏览器大小时是否可以激活它？或任何替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:38:10.213

您可以通过混合使用 CSS3 过渡和 @media 查询来做到这一点。

```
div
{
  height: 100px;
  width: 200px;
  position: relative;
  background-color: #eee;
  -webkit-transition: all 1s ease-in-out;
  -moz-transition: all 1s ease-in-out;
  -o-transition: all 1s ease-in-out;
  -ms-transition: all 1s ease-in-out;
  transition: all 1s ease-in-out;
}

@media all and (min-width: 400px) {
  div
  {
    background-color: #fc3;
    left: 100px;
  }
} 
```

这样做是在元素上设置具有相对位置的过渡，但显然不会触发它们（因为没有 :hover 或其他选择器），并`left: 100px;`在浏览器宽度超过 400 像素时声明位置（ ）的变化。用于`max-width`“超过”值。

显然，您需要将值更改为您需要的值，但应该这样做。

[http://jsfiddle.net/AvhvD/](http://jsfiddle.net/AvhvD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:31:37.713

这是我会怎么做：

```
1: .logo { display block, width: xxx; margin 0 auto; transition: margin ... }
2: @media (...) { 
  .logo {
    margin-left: 0;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:02:39.547

我在想你可以在 JavaScript 和 Jquery 中做一个条件语句来测试以下是否为真：如果浏览器窗口被调整大小并且浏览器窗口的大小在一个范围之间，添加一个 css 类。如果不删除 css 类。

创建了这个新类后，也许您可​​以使用 CSS3 制作动画。如果这可行，我不太熟悉，但你总是可以恢复到 JQuery。

此外，我不知道是否可以在媒体查询中应用过渡。如果是这样，我是一个大支持者，强烈建议使用它们。

希望我能帮上忙。

# java - Java Play Framework 2.0 在测试框架中使用 Hibernate

> ID：14192239
> 
> 赞同：0
> 
> 时间：2013-01-07T08:26:31.937
> 
> 标签：java, hibernate, playframework-2.0

我想知道是否有人使用 Hibernate 作为持久性引擎使用 Play 2.0 进行自动化测试？

我正在尝试以下测试，但出现此错误：

```
[error] Test tests.TestApp.findById failed: No EntityManager bound to this threa
d. Try to annotate your action method with @play.db.jpa.Transactional
[error]     at play.db.jpa.JPA.em(JPA.java:45)
[error]     at models.User.findById(User.java:72)
[error]     at tests.TestApp$1.run(TestApp.java:55)
[error]     at play.test.Helpers.running(Helpers.java:277)
[error]     at tests.TestApp.findById(TestApp.java:51) 
```

测试代码为：

```
@Test
public void findById() 
{
    running(fakeApplication(), new Runnable() 
    {
       public void run() 
       {
           User user = User.findById(21l);
           assertThat(user.getName()).isEqualTo("Dave");
       }
    });
} 
```

我尝试将 @Transactional 注释添加到测试方法中，但这没有效果。

然后我尝试添加绑定到当前 JPA 线程的 setup 和 teardown 方法，但也没有运气。虽然我不确定我是否做得正确。

```
private EntityManager em;

@Transactional
@Before
public void setUp() 
{
    em = JPA.em("org.hibernate.ejb.HibernatePersistence");
    JPA.bindForCurrentThread(em);
}

@After
public void tearDown() 
{
    JPA.bindForCurrentThread(null);
    em.close();
} 
```

这给出了以下错误：

```
[error] Test tests.TestApp.findById failed: There is no started application
[error]     at scala.sys.package$.error(package.scala:27)
[error]     at play.api.Play$$anonfun$current$1.apply(Play.scala:44)
[error]     at play.api.Play$$anonfun$current$1.apply(Play.scala:44)
[error]     at scala.Option.getOrElse(Option.scala:108)
[error]     at play.api.Play$.current(Play.scala:44)
[error]     at play.api.Play.current(Play.scala)
[error]     at play.Play.application(Play.java:12)
[error]     at play.db.jpa.JPA.em(JPA.java:21)
[error]     at tests.TestApp.setUp(TestApp.java:26)
[error]     ... 
```

如果有人可以提供任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:01:59.417

试试这个模式：

```
running(fakeApplication(), new Runnable()
{
  public void run()
  {
    JPA.withTransaction(new play.libs.F.Callback0()
    {
      public void invoke() throws DataAccessException
      {
        ...
      }
    });
  }
}); 
```

[这](https://groups.google.com/forum/#!topic/play-framework/kVL9G-CkT1M)是另一个示例，它显示了您在抽象基类中尝试使用 bindForCurrentThread 时设置和拆卸方法中的逻辑。

# iphone - 如何读取从 iPhone 中的 sysctlbyname() 检索到的缓冲区数据？

> ID：14192241
> 
> 赞同：0
> 
> 时间：2013-01-07T08:26:41.137
> 
> 标签：iphone, ios, sysctl

我正在尝试使用 sysctlbyname() 在 iphone 中获取 TCP 开放端口列表。

```
 sysctlbyname(const char *name, void *oldp, size_t *oldlenp, void *newp,
     size_t newlen); 
```

.

```
 #include <sys/sysctl.h>

 size_t len = 0;
 if (sysctlbyname("net.inet.tcp.pcblist", 0, &len, 0, 0) < 0) {
      perror("sysctlbyname");
 } else {
      char *buf = malloc(len);
      //printf("%d",sizeof(buf));
      sysctlbyname("net.inet.tcp.pcblist", buf, &len, 0, 0);
      NSData *data = [NSData dataWithBytesNoCopy:buf length:len];
      NSLog(@"data = %@", data);

      //printf("%d",sizeof(buf));
      //printf("%s",buf);
 } 
```

信息被复制到由 oldp 指定的缓冲区中。

输出：：

```
data = <18000000 34000000 d8160000 00000000 7d760000 00000000 0c020000 00000000 00000000 00000000 00000000 0050c598 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 c2160000 00000000 40008000 00000000 01400000 
```

缓冲区在这里填充了数据。但我无法以可读格式打印数据。将此数据转换为 NSString 无济于事，因为内部缓冲区有自己的结构。

任何人都知道如何从该数据中获取 TCP 开放端口列表作为输出？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:01:00.483

从 BSD 源代码复制[netstat 代码。](http://opensource.apple.com/source/network_cmds/network_cmds-396.6/netstat.tproj/)

参见 main.c 中的 printproto() 函数

这将探索与此缓冲区相关的所有内容以及如何获取 TCP 端口列表。

谢谢。

# .net - .Net 3.5 SP1 的离线安装程序不起作用

> ID：14192244
> 
> 赞同：5
> 
> 时间：2013-01-07T08:27:00.877
> 
> 标签：.net, .net-3.5, windows-server-2012

我下载了[.Net 3.5 SP1 的大文件](http://download.microsoft.com/download/2/0/e/20e90413-712f-438c-988e-fdaa79a8ac3d/dotnetfx35.exe)。

现在，当我尝试在 Windows Server 2012 上安装它时，我得到以下屏幕截图：

![在此处输入图像描述](../Images/917224a6a24a2d7e52c2a4c54267afbe.png)

现在这是一个循环。当我尝试从服务器管理器安装时，我无法完成安装。它需要安装盘。

这是否意味着如果没有安装盘，我根本无法安装？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T08:49:07.733

您的 WSUS 服务器可能会妨碍您，或者您无法访问 Microsoft 更新站点。

[遵循这些指示。](http://support.microsoft.com/kb/2734782/en-us) “为可选组件安装和组件修复指定设置”对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-06T08:49:36.080

当您没有 Windows Server 安装盘时，这是替代解决方案

1.  1.在本地计算机（不是服务器）上，进入windows安装目录（C:\Windows），然后找到“WinSxS”目录。
2.  将此文件夹复制到服务器
3.  打开添加角色和功能向导，转到功能选项卡并检查 .Net Framework SP1。
4.  然后在此窗口下方单击“指定备用源路径”并在新窗口中指定您在服务器上早期处理的文件夹路径。

就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T10:48:14.510

你可以很容易地做到这一点。如果我们将来需要它，我们会为自己制作。

脚步：

*   创建一个bat文件

*   将此文本复制到 bat 文件中并保存：

    ```
    @echo To install .NET 3.5 SP1 you need to find the Windows 8.1 DVD Installer or the ISO file.
    @echo Please follow the steps below:
    @echo 1\. Insert the DVD Installer or mount the ISO file."
    @echo 2\. Open MyComputer and find out the drive letter of the DVD ROM that you just inserted DVD Disk or mounted ISO file."
    @echo off
    set /p DriveLetter="Please enter the letter of your DVD ROM: "

    Dism.exe /online /enable-feature /featurename:NetFX3 /All /Source:%DriveLetter%:\sources\sxs /LimitAccess

    @echo off
    set /p DriveLetter="Press Enter to close" 
    ```

*   通过右键单击以管理员身份运行 bat 文件，然后单击以管理员身份运行，其余的应该是不言自明的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T05:45:44.583

虽然为时已晚，但我想分享我的经验。希望这会有所帮助-

我的 Windows 更新正常，我无法从添加角色和功能向导安装 .Net Framework 3.5。以下两个命令实际上让我很开心 -

```
Dism.exe /online /enable-feature /featurename:NetFX3ServiceFeatures /Source:%DriveLetter%:\sources\sxs

Dism.exe /online /enable-feature /featurename:NetFX3 /Source:%DriveLetter%:\sources\sxs 
```

# c# - 将 HttpClientHandler 传递给 HttpClient 时调用哪个 SendAsync 方法

> ID：14192245
> 
> 赞同：9
> 
> 时间：2013-01-07T08:27:05.410
> 
> 标签：c#, httpclient, .net-4.5

自定义请求的大部分属性都定义在 中`HttpClientHandler`，该类是 的子类`HttpMessageHandler`，类定义如下：

```
public abstract class HttpMessageHandler : IDisposable
{
  protected internal abstract Task<HttpResponseMessage> SendAsync
    (HttpRequestMessage request, CancellationToken cancellationToken);
  public void Dispose();
  protected virtual void Dispose (bool disposing);
} 
```

书`<C#5.0 in a nutshell>`上说，当我们调用's方法时，就会调用`SendAsync`in中的方法。但是类也定义了一个方法，当我们在一个实例上调用这个方法时，调用的是哪个？`HttpMessageHandler``HttpClient``SendAsync``HttpClient``SendAsync``HttpClient``SendAsync`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T08:53:13.683

这就是本质上正在发生的事情：

*HttpMessageInvoker & HttpClient*

```
class HttpMessageInvoker
{
    private HttpMessageHandler handler;

    public HttpMessageInvoker(HttpMessageHandler handler)
    {
        this.handler = handler;
    }

    public virtual void SendAsync()
    {
        Console.WriteLine("HttpMessageInvoker.SendAsync");
        this.handler.SendAsync();
    }
}

class HttpClient : HttpMessageInvoker
{
    public HttpClient(HttpMessageHandler handler)
        : base(handler)
    {
    }

    public override void SendAsync()
    {
        Console.WriteLine("HttpClient.SendAsync");
        base.SendAsync();
    }
} 
```

*HttpMessageHandler 和 HttpClientHandler*

```
abstract class HttpMessageHandler
{
    protected internal abstract void SendAync();
}

class HttpClientHandler : HttpMessageHandler
{
    protected internal override void SendAync()
    {
        Console.WriteLine("HttpClientHandler.SendAsync");
    }
} 
```

因此，如果您调用`SendAsync`实例`HttpClient`，则会执行该方法。该方法`SendAsync`从 调用该方法`HttpMessageInvoker`。该方法调用实例的`SendAsync`方法。是抽象的；通过覆盖抽象方法来提供具体的实现。`HttpMessageHandler``HttpMessageHandler``HttpClientHandler``SendAync`

*例子：*

```
var handler = new HttpClientHandler();
var client = new HttpClient(handler);
client.SendAsync(); 
```

*输出：*

```
HttpClient.SendAsync
HttpMessageInvoker.SendAsync
HttpClientHandler.SendAsync

```

# objective-c - 为什么 %@ 在 predicateWithFormat 和 stringWithFormat 之间表现不同？

> ID：14192247
> 
> 赞同：4
> 
> 时间：2013-01-07T08:27:17.313
> 
> 标签：objective-c, predicate, stringwithformat

使用 predicateWithFormat，%@ 被 "" 包围。我们需要使用 %K 作为键。

例如`[NSPredicate predicateWithFormat @"%@ == %@" ,@"someKey",@"someValue"]`变成

```
"someKey" == "someValue" 
```

在 stringWithFormat 时，%@ 没有被 "" 包围

```
[NSString stringWithFormat @"%@ == %@" ,@"someKey",@"someValue"] 
```

变成`someKey == someValue`

为什么有区别？

我错过了什么吗？

为什么在 predicateWithFormat 中使用 %@ 表示“Value”，因为这不是 %@ 在 stringWithFormat 中的意思。为什么不创建一个新的表示法，比如 %V 来获取“Value”，而 %@ 保持 Value 就像在 stringWithFormat 对应项中一样。

为什么 Apple 决定相同的符号，即 %@ 应该具有不同的含义。

他们真的不一样吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T09:02:54.773

字符串变量在谓词中用引号括起来，而动态属性（以及因此的键路径）不被引用。考虑这个例子：

假设我们有一群人：

```
NSArray *people = @[
    @{ @"name": @"George", @"age": @10 }, 
    @{ @"name": @"Tom", @"age": @15 }
    ]; 
```

现在，如果我们想过滤我们的数组以便按姓名查找所有人，我们会期望一个谓词可以扩展为如下内容：

```
name like[c] "George" 
```

这样我们就说它`name`是一个动态键并且`George`是一个常量字符串。`@"%@ like[c] %@"`因此，如果我们使用扩展谓词之类的格式，则为：

```
"name" like[c] "George" 
```

这显然不是我们想要的（这里`name`和`George`都是常量字符串）

所以建立我们的谓词的正确方法是：

```
NSPredicate *p = [NSPredicate predicateWithFormat:@"%K like[c] %@", @"name", @"George"]; 
```

我希望这是有道理的。[您可以在此处的 Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793-CJBDBHCB)中找到有关谓词的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:47:44.683

嗯，NSPredicate 是一个评估某个字符串的函数，[看这个例子](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795) ，NSString stringWithFormat 只复制给相应位置的值——%@。用法完全不同，你可以用 NSPredicate 做很多复杂的操作。

# php - 如何在 PHP 中添加自定义 CSS 类名？

> ID：14192249
> 
> 赞同：1
> 
> 时间：2013-01-07T08:27:37.427
> 
> 标签：php, css, wordpress

我目前正在处理下面的代码，我想添加一个自定义类名。我不熟悉PHP。

如何添加自定义 CSS 类名？

```
<?php next_posts_link('Older Posts'); ?>
<?php previous_posts_link('Newer Posts'); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:39:21.713

```
add_filter('next_posts_link_attributes', 'posts_link_attributes');
add_filter('previous_posts_link_attributes', 'posts_link_attributes');

function posts_link_attributes() {
    return 'class="styled-button"';
} 
```

在你的主题的functions.php中添加这个。它将向这些链接添加类“样式按钮”。如果您想区分它们，请使用：

```
add_filter('next_posts_link_attributes', 'next_posts_link_attributes');
add_filter('previous_posts_link_attributes', 'prev_posts_link_attributes');

function next_posts_link_attributes() {
    return 'class="next-styled-button"';
}

function prev_posts_link_attributes() {
    return 'class="prev-styled-button"';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:34:55.287

我不熟悉 Wordpress，但根据 Codex，没有办法在这些函数调用中指定类属性：

*   [https://codex.wordpress.org/Function_Reference/next_posts_link](https://codex.wordpress.org/Function_Reference/next_posts_link)或
*   [https://codex.wordpress.org/Function_Reference/previous_posts_link](https://codex.wordpress.org/Function_Reference/previous_posts_link)

你可以做的是[`str_replace`](http://php.net/str_replace)这些函数返回的html，例如

```
echo str_replace('<a ', '<a class="" ', next_posts_link('Older Posts')); 
```

如果这些函数已经返回带有类属性的链接，请使用[正则表达式](http://php.net/preg_replace)或[DOM](http://php.net/DOMDocument)。

# c# - 在不使用 LINQ 的情况下对 C# 列表进行分页的最佳方法是什么？

> ID：14192250
> 
> 赞同：1
> 
> 时间：2013-01-07T08:27:41.373
> 
> 标签：c#, .net, pagination

我需要在`List<>`不使用 LINQ 的情况下对 C# 进行分页，因为我使用的是 .NET 框架 3.0。做这个的最好方式是什么？

我需要做的是从文件夹中读取文件列表并将它们显示在带有分页的网格视图中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:33:50.577

您可以尝试使用 GetRange 操作，我想如果这是必需的。尝试类似：

```
List<Foo> foos = new List<Foo>();
var items = foos.GetRange(0, 5); 
```

所以这将得到前 5 个元素，你显然想要获取尽可能多的元素。下次从 (count + element) 开始。

# java - 为java线程设置名称时安全吗

> ID：14192251
> 
> 赞同：0
> 
> 时间：2013-01-07T08:27:48.307
> 
> 标签：java, multithreading, web-services

我有一个 java web 服务应用程序。Web 方法有一个参数是来自客户端的 requestId。我的 Web 服务应用程序必须同时处理多个请求，因此它必须有某种方式来跟踪日志，因为请求的日志是混合的。我计划将线程名称重命名为 requestId 并打印出线程名称以便于跟踪日志。我的问题是：如果我重命名线程名称会安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:30:35.930

如果您正在使用`log4j`，请查看他们的嵌套诊断上下文 (NDC) 和映射诊断上下文 (MDC) 概念，它们允许您将类似的非结构化数据放入所有日志输出中。

其他库可能有类似的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:29:12.063

是的。您可以随时重命名线程名称。

# javascript - 为什么这个正则表达式不符合预期的方式？

> ID：14192258
> 
> 赞同：1
> 
> 时间：2013-01-07T08:28:22.293
> 
> 标签：javascript, regex

我试图摆脱斜杠字符，以防它存在于我的字符串末尾。我使用了以下表达式，旨在匹配*行尾不是斜线的任何字符*。

```
var str = "http://hazaa.com/blopp/";
str.match("[^/$]+", "g"); 
```

出于某种原因（当然是合乎逻辑且可解释的，但我自己无法理解），我将其拆分为三个字符串，如下所示。

> [“http:”、“hazaa.com”、“blopp”]

1.  我在错误地假设什么？
2.  如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:36:14.863

在`str.match("[^/$]+", "g");`中，为什么要在括号内放置美元符号？它应该在外面，即`str.match("[^/]+$", "g");`。

要删除所有尾部斜杠，您可以使用`str.replace(/\/+$/, "")`. （如果您只想删除最后一个斜杠，请删除`+`的`replace`正则表达式）

更新：

另一种不使用的方法`replace`：

```
function stripEndingSlashes(str) {
    var matched = str.match("(.*[^/]+)/*$");
    return matched ? matched[1] : "";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T08:39:58.540

正则表达式正在选择“除斜线之外的所有内容”。这就是为什么`match()`返回斜杠之间的字符串部分。

您可以使用以下功能解决它`replace()`：

```
var str = "http://hazaa.com/blopp/";
//replace the last slash with an empty string to remove it
str = str.replace(/\/$/,''); 
```

正则表达式文字应始终被`/`字符包围。所以这里的正则表达式是：

*   `\/`: 这意味着一个单斜杠字符。为了防止 Javascript 将您的斜杠解释为正则表达式的结尾，它需要用反斜杠“转义”。

*   `$`：这意味着字符串的结尾

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:31:32.303

您当前的正则表达式将*匹配*字符串的部分，直到遇到第一个`/`or 。`$`第二个参数被忽略；没有第二个参数[`String.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)。

要删除尾部斜杠，请使用以下[`String.replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)函数：

```
var str = "http://hazaa.com/blopp/";
str = str.replace(/\/$/, "");
console.log(str);
// "http://hazaa.com/blopp" 
```

如果您需要检查字符串是否以斜杠结尾，请使用如下`String.match`方法：

```
var str = "http://hazaa.com/blopp/";
var match = str.match(/\/$/);
console.log(match);
// null if string does not end with /
// ["/"] if string ends with a / 
```

如果您需要获取除最后一个字符之外的所有内容`/`，请使用以下命令：

```
var r = /(.+?)\/*$/;
console.log("http://hazaa.com/blopp//".match(r)); // ["http://hazaa.com/blopp//", "http://hazaa.com/blopp"]
console.log("http://hazaa.com/blopp/".match(r)); // ["http://hazaa.com/blopp/", "http://hazaa.com/blopp"]
console.log("http://hazaa.com/bloppA".match(r)); // ["http://hazaa.com/bloppA", "http://hazaa.com/bloppA"] 
```

返回数组中的第二个索引包含 URL 的所需部分。正则表达式的工作方式如下：

*   `(.+?)`非贪婪匹配（并捕获）任何角色
*   `\/*$`匹配可选的尾部斜杠

第一部分正则表达式被故意更改为非贪婪。如果它是贪婪的，它会尝试找到最大的匹配，只要整个正则表达式匹配（消耗`/`过程中的尾随）。当不贪婪时，只要整个正则表达式匹配，它就会找到最小的匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T08:37:43.697

为什么使用正则表达式？只需检查字符串的最后一个符号是否为斜线，然后切片。像这样：

```
if (str.slice(-1) === '/') {
  str = str.slice(0, -1);
} 
```

# sql - 从表中找到最大值

> ID：14192259
> 
> 赞同：2
> 
> 时间：2013-01-07T08:28:24.700
> 
> 标签：sql, max, multiple-columns

我有一个名为 TestValue 的表，如下所示

```
value1  value2  value3
10      19      17
78      8       91 
```

我想获得最大值。我在 SQL 中试过这个查询：

```
select (select MAX(v) from (values (Value1),(Value2),(Value3)) as value(v)) 
      as Maxvalue 
      from TestValue 
```

结果就像

```
Maxvalue
19
91 
```

但我希望结果是 only `91`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:41:56.107

解决方案`greatest`很好，但它取决于特定于数据库的解决方案（例如，据我所知，在 SQL Server 上您没有类似的解决方案`greatest`），因此您可以使用通用解决方案：

```
SELECT MAX(v) FROM
(
  SELECT value1 v FROM tab
  UNION ALL
  SELECT value2 v FROM tab
  UNION ALL
  SELECT value3 v FROM tab
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:42:44.903

MS SQL Server 没有`GREATEST`函数，但是你可以用一个`CASE`语句来模拟它：

```
SELECT MAX(
    CASE
        WHEN value1 > value2 And value1 > value3 THEN value1
        WHEN value2 > value3 THEN value2
        ELSE value3
    END) AS Maxvalue FROM TestValue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:33:40.460

这有效（[SQLFiddle](http://www.sqlfiddle.com/#!2/43030/1)）：

```
SELECT max(greatest(value1, value2, value3))
FROM testvalue 
```

**编辑：** `greatest()`在所有流行的服务器（MySQL、PostgreSQL、Oracle）上都支持，但在 MSSQL 上不支持。对于 MSSQL 来说，创建存储过程来[模拟这个功能](http://www.sqlservercentral.com/Forums/Topic371131-9-1.aspx)是很常见的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T08:45:01.347

[SQL小提琴](http://sqlfiddle.com/#!6/f1d49/5)

**MS SQL Server 2012 架构设置**：

```
create table TestValue
(
  value1 int,
  value2 int,
  value3 int
);

insert into TestValue values(10,      19,      17);
insert into TestValue values(78,      8 ,      91); 
```

**查询 1**：

```
select max(MaxValue) as MaxValue
from
(
  select (select MAX(v) from (values (Value1),(Value2),(Value3)) as value(v)) 
        as Maxvalue 
        from TestValue
) as T 
```

**[结果](http://sqlfiddle.com/#!6/f1d49/5/0)**：

```
| MAXVALUE |
------------
|       91 | 
```

**查询 2**：

```
select max(Value) as MaxValue
from TestValue 
unpivot (Value for Col in (Value1, Value2, Value3)) as U 
```

**[结果](http://sqlfiddle.com/#!6/f1d49/5/1)**：

```
| MAXVALUE |
------------
|       91 | 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T09:02:33.570

```
select max(max(Value1),max(Value2),max(Value3)) from Persons 
```

[在这里](http://ideone.com/aUzeFk)测试

# python - 如何在 wxpython 中使用 Matplotlib.animation？

> ID：14192265
> 
> 赞同：2
> 
> 时间：2013-01-07T08:28:45.940
> 
> 标签：python, animation, matplotlib, wxpython

我想使用 matplotlib.animation 在 wxpython 中绘制动态图像，但我不知道该怎么做。有没有人可以给我一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:52:08.187

除了上面发布的教程 Dan 之外，您还可以考虑尝试对 3D 绘图和动画有可靠支持的 Mayavi。 [http://docs.enthought.com/mayavi/mayavi/mlab.html#animating-the-data](http://docs.enthought.com/mayavi/mayavi/mlab.html#animating-the-data)

# jquery - 关闭浏览器后 jQuery 1.8.3 xsrf 错误

> ID：14192280
> 
> 赞同：2
> 
> 时间：2013-01-07T08:30:08.507
> 
> 标签：jquery, tornado

我刚刚发现一个奇怪的问题，我使用 tornado 来运行我的网站，并且在 tornado POST 中需要 _xsrf 参数，以下代码在我使用 jQuery 版本 1.7.2 时运行良好，但是当我重新打开浏览器时出现 POST 403 错误（保留 cookie活着) 在我将 jQuery 更改为 1.8.3 版本之后...但是 1.7.2 和之前的版本可以正常工作...

龙卷风中的 403 表示 _xsrf 不正确。关键是当我重新打开浏览器时发生 403 错误，我仍然登录但无法 POST。

有人知道问题吗？以下是代码

```
 function getCookie(name) {
                var r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
                return r ? r[1] : undefined;
        }

        jQuery.postJSON = function(url, args, callback) {
                    args._xsrf = getCookie("_xsrf");
                    $.ajax({
                                url: url, data: $.param(args), dataType: "text", type: "POST", async: true,
                                success: function(response) {
                                    if (callback) callback(eval("(" + response + ")"));
                                }, 
                                error: function(response) {
                                    try{
                                        args._xsrf = getCookie("_xsrf");
                                        $.ajax({url: url, data: $.param(args), dataType: "text", type: "POST", async: true,
                                            success: function(response) {
                                                if (callback) callback(eval("(" + response + ")"));
                                            }
                                        });
                                    }
                                    catch(e){

                                    }
                                }
                    });
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T18:04:39.623

我有同样的问题。出于某种原因，浏览器重新启动后，'_xsrf' 值会从 cookie 中删除。问题是，为什么龙卷风不再设置这个cookie？查看龙卷风代码（web.py）：

```
 token = (self.get_argument("_xsrf", None) or
             self.request.headers.get("X-Xsrftoken") or
             self.request.headers.get("X-Csrftoken"))
    if not token:
        raise HTTPError(403, "'_xsrf' argument missing from POST")
    if self.xsrf_token != token:
        raise HTTPError(403, "XSRF cookie does not match POST argument") 
```

我们可以看到，如果在请求的任何地方都没有找到 _xsrf，那么请求会立即被拒绝。新的 cookie 值将在行设置

```
 if self.xsrf_token != token: 
```

没有达到（self.xsrf_token 是一个函数，用@property 包装）。

因此，最简单的解决方法是：

1.  更改函数 getCookie 以在 cookie 中找不到 _xsrf 的情况下返回一些字符串。例如'not_found'：

    ```
    function getCookie(name) {
        var r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
        if (!r && name == "_xsrf"){
            return 'not_found'
        }
        return r ? r[1] : undefined;
    } 
    ```

2.  现在，在第一个错误请求之后，tornado 将设置 _xsrf cookie。第二个请求将通过

另一种解决方案：

每次在龙卷风中呈现页面时，`self.xsrf_token`请点击请求处理程序中的属性。所以你可以确定，'_xsrf' cookie 已设置。

# machine-learning - 随机森林 - 概率估计（+ scikit-learn 特定）

> ID：14192284
> 
> 赞同：7
> 
> 时间：2013-01-07T08:30:27.570
> 
> 标签：machine-learning, scikit-learn

我有兴趣了解随机森林如何计算概率估计，一般来说，特别是在 Python 的 scikit-learn 库中（概率估计由 predict_proba 函数返回）。

谢了，兄弟们

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T10:00:01.930

森林返回的概率是集合中的树返回的平均概率（[文档](http://scikit-learn.org/dev/modules/generated/sklearn.ensemble.RandomForestClassifier.html#sklearn.ensemble.RandomForestClassifier.predict_proba)）。一棵树返回的概率是样本所在叶子的归一化类直方图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:59:15.823

除了[Andreas](https://stackoverflow.com/users/676634/andreas-mueller) / [Dougal](https://stackoverflow.com/users/344821/dougal)所说的，当你训练 RF 时，[打开 compute_importances=True](http://scikit-learn.org/dev/modules/generated/sklearn.ensemble.RandomForestRegressor.html#sklearn.ensemble.RandomForestRegressor)。然后检查`classifier.feature_importances_`以查看 RF 树中出现了哪些特征。

# cmake - 如何通过 cmake 中的 set_source_files_properties 使多个属性对一个文件有效？

> ID：14192288
> 
> 赞同：4
> 
> 时间：2013-01-07T08:30:44.677
> 
> 标签：cmake

我正在为一个项目编写 CMakeLists.txt，遇到了 set_source_files_properties 的问题。

原来的工作表达式是：

```
set_source_files_properties (a.cpp PROPERTIES COMPILE_DEFINITIONS
    DIR1="/home/xxx/b.i") 
```

然后我尝试添加更多的 COMPILE_DEFINITIONS，但失败了。

尝试1：

```
set_source_files_properties (a.cpp PROPERTIES COMPILE_DEFINITIONS
    DIR1="/home/xxx/b.i" DIR2="/home/xxx/c.i" DIR3="/home/xxx/d.i") 
```

尝试2：

```
set_source_files_properties (a.cpp PROPERTIES COMPILE_DEFINITIONS
    DIR1="/home/xxx/b.i")
set_source_files_properties (a.cpp PROPERTIES COMPILE_DEFINITIONS
    DIR2="/home/xxx/c.i")
set_source_files_properties (a.cpp PROPERTIES COMPILE_DEFINITIONS
    DIR3="/home/xxx/d.i") 
```

结果：make编译时a.cpp中只能识别最后一个定义的DIR3，前两个在make阶段报告未定义。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T09:07:40.737

这些`set_*_properties()`函数是基本用法的简写。对于“高级”情况，最好使用 的全部功能`set_property()`：

```
set_property(
  SOURCE a.cpp
  APPEND
  PROPERTY COMPILE_DEFINITIONS
  DIR1="/home/xxx/b.i" DIR2="/home/xxx/c.i" DIR3="/home/xxx/d.i"
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-05T16:17:58.437

我设法使用以下命令提供了几个`COMPILE_DEFINITIONS`使用：`set_source_files_properties`

```
set_source_files_properties (a.cpp PROPERTIES COMPILE_DEFINITIONS
    "DIR1=\"/home/xxx/b.i\";DIR2=\"/home/xxx/c.i\";DIR3=\"/home/xxx/d.i\")" 
```

来源：[https ://cmake.org/cmake/help/v3.5/prop_sf/COMPILE_DEFINITIONS.html](https://cmake.org/cmake/help/v3.5/prop_sf/COMPILE_DEFINITIONS.html)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-08T02:44:54.830

该问题已通过以下方式解决：

```
add_definitions (-DDIR1="/home/xxx/b.i") 
add_definitions (-DDIR2="/home/xxx/C.i") 
add_definitions (-DDIR3="/home/xxx/D.i") 
```

# backbone.js - WordPress 3.5 媒体管理器：是否有一种“好”的方法可以在“创建图库”选项卡中添加额外的选择选项？

> ID：14192292
> 
> 赞同：4
> 
> 时间：2013-01-07T08:31:14.837
> 
> 标签：backbone.js, wordpress, photo-gallery, attachment, wordpress-3.5

好的，我的意思是使用钩子/过滤器。

基本上，默认情况下，这两个选项是`Images`和`Uploaded to this page`。我想在其中添加一个附加选项。我知道如何向媒体管理器添加一个新选项卡（[请参阅此处](http://sumtips.com/2012/12/add-remove-tab-wordpress-3-5-media-upload-page.html)），但这并不能满足我的需要。

我一直在查看 3.5 的有限文档并找到了[`media_view_strings/settings`](http://codex.wordpress.org/Version_3.5#Filters)过滤器，但是，据我所知，在这种情况下两者都不能使用。我还对核心源进行了相当多的挖掘，但与媒体上传器相关的文件数量至少可以说是令人生畏的。

我考虑过在页面加载后运行 JS 来修改 DOM 并在其中添加额外的选择选项，但这似乎很不合时宜，如果有更好、更强大的解决方案，我想避免它。

任何有关解决此问题的最佳方法的想法将**不胜**感激！

*注意：我没有将其发布到[WordPress SE 站点](https://wordpress.stackexchange.com/)，因为它获得的流量要少得多，而且问题往往与编程相关的要少得多。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:54:50.730

大多数选择下拉菜单来自 wp-includes/media-template.php，其中有很多下划线模板（`<script type="text/html"`标签），但很少有 php 代码的操作挂钩。使用 Javascript，您可以为 wp.media 事件绑定 Backbone.js 挂钩，例如 wp.media 的打开/关闭事件。从此类事件中，您可以使用 获取该图像/上传到页面的选择框`jQuery('.media-modal-content:visible .attachment-filters')`，根据需要添加项目和侦听器。不过，我很确定应该有更好的 Backbone.js 风格的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T22:48:26.747

这是 Shiba Shake 关于这个主题的教程......

[如何扩展 WordPress 媒体管理器界面](https://www.google.com/url?q=http://shibashake.com/wordpress-theme/how-to-expand-the-wordpress-media-manager-interface&sa=U&ei=FO7aUp6_J9SJqQGC6YGoCw&ved=0CA0QFjAH&client=internal-uds-cse&usg=AFQjCNEYyBp9WbanyMS-iqK1dp1vuei0IQ)

希望这对您有帮助！

# bash - 如何模拟打字键盘键和 来自 BASH 脚本？

> ID：14192303
> 
> 赞同：0
> 
> 时间：2013-01-07T08:32:09.077
> 
> 标签：bash, macos, automation

我必须在工作场所网站的表格中输入大量数据。我已经在电子表格中有数据，但基本上必须手动输入数据。我想创建一个 BASH 脚本，将数据输入到 Web 浏览器中以节省时间。

`[tab]`是否可以让 BASH 脚本在专注于我的浏览器窗口时执行诸如键盘上的键入键之类的操作，例如数字和？有了这个，我可以很容易地创建一个 BASH 脚本，它会自动输入我需要的数据。

[Is there a way to trigger a Hot Key/Keyboard Shortcut via a Shell Script、AppleScript 或 Automator Workflow](https://stackoverflow.com/questions/7810703/is-there-a-way-to-trigger-a-hot-key-keyboard-shortcut-via-a-shell-script-a-applseems)中的答案？有用，但仅适用于 OS X，而我使用 Debian。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:00:08.963

您可以在 java / python ... 代码中导入“Selenium”。您对方法 sendKeys 感兴趣。

这是一个例子：

```
WebElement.sendKeys(Keys.RETURN); 
```

您可以将 Selenium 的调用封装在从 shell 脚本调用的小型 Java 代码中，从而将逻辑保留在脚本中。

# java - 如何在我的 rcp 应用程序中显示中文字符？

> ID：14192305
> 
> 赞同：1
> 
> 时间：2013-01-07T08:32:20.737
> 
> 标签：java, eclipse-rcp, rcp

我正在尝试使用 RCP i18n 机制使我的 RCP 应用程序国际化，但我遇到了一个问题：

当我用阿拉伯语翻译字符串“Hello”时，我得到“\u0645\u0631\u062D\u0628\u0627”。我把这个 UTF-8 字符串放在我的`.properties`文件中，一切顺利。

但是当我用中文翻译字符串“Hello”时，我得到“\u4F60\u597D”，当我把这个 UTF-8 字符串放在我的`.properties`文件中时，我的 RCP 应用程序不会用中文呈现字符串，而是使用烦人的传统方块.. .

我究竟做错了什么 ？

PS：我准确地说我的 i18n 类是使用**Modern Eclipse Message**类样式编码的。

# sql - 如何完成循环并导入文本文件

> ID：14192313
> 
> 赞同：0
> 
> 时间：2013-01-07T08:33:14.303
> 
> 标签：sql, text-files

这是我需要在路径中定义文件路径的代码。在“字符串路径”中，我有类似的东西。

(C:\文件夹\text.txt)

```
string path = @"C:\path.txt";
StreamReader str = new StreamReader(path);
string datasample;

while ((datasample = str.ReadLine()) != null)
      {
      } 
```

我需要做的是将 txt 文件导入 SQL 表。这是我的导入代码，它工作正常。

```
StreamReader sr = new StreamReader(Global_Variables.filename.ToString());
             DataTable dt = new DataTable();
                DataRow row;
                dt.Columns.Add(new DataColumn("Reports"));

                while (!sr.EndOfStream)
                {
                    string value = sr.ReadLine();
                    if ((value.Length != 0) && (value != ""))
                    {
                        row = dt.NewRow();
                        row[0] = value;
                        dt.Rows.Add(row);
                    }
                }
                SqlBulkCopy bc = new SqlBulkCopy(Global_Variables.con.ConnectionString, SqlBulkCopyOptions.TableLock);
                bc.DestinationTableName = "tbl_WinApps_ApprovedExpReports";
                bc.BatchSize = dt.Rows.Count;
                Global_Variables.con.Open();
                bc.WriteToServer(dt);
                bc.BulkCopyTimeout = 120;
                bc.Close();
                Global_Variables.con.Close(); 
```

我似乎无法将这两个代码连接在一起。请帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:36:36.543

似乎您已经使用 StreamReader 遍历文件，因此您可以执行以下操作：

```
string path = File.ReadAllText(@"C:\path.txt");
string line = "";
StreamReader sr = new StreamReader(path);
DataTable dt = new DataTable();
DataRow row;
dt.Columns.Add(new DataColumn("Reports"));

while ((line = sr.readLine()) != null)
{
    if ((line.Length != 0) && (line != ""))
    {
        row = dt.NewRow();
        row[0] = line;
        dt.Rows.Add(row);
    }
}

SqlBulkCopy bc = new SqlBulkCopy(Global_Variables.con.ConnectionString, SqlBulkCopyOptions.TableLock);
bc.DestinationTableName = "tbl_WinApps_ApprovedExpReports";
bc.BatchSize = dt.Rows.Count;
Global_Variables.con.Open();
bc.WriteToServer(dt);
bc.BulkCopyTimeout = 120;
bc.Close();
Global_Variables.con.Close(); 
```

# java - 测试挥杆应用

> ID：14192314
> 
> 赞同：4
> 
> 时间：2013-01-07T08:33:28.103
> 
> 标签：java, swing, testing

您如何测试 Swing 应用程序？对于代码，我已经编写了单元测试用例，因此我确信它会很好地工作（如果没有，那么我的测试用例就不够用了）。但是你如何测试带有 UI 的应用程序。它可能看起来不太好，或者功能模糊等等。

在我构建的最后一个应用程序中，我测试了 UI，它运行良好；直到后来我才调整了一些代码，因此扰乱了模态和 UI，这些都被客户端忽视并炸毁了。我知道它有点含糊，但很确定人们会有不同的技术来测试 UI 应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:41:06.333

[UISpec4J](http://www.uispec4j.org/)是基于 Swing 的 Java 应用程序的开源功能和/或单元测试库，构建在 JUnit 和 TestNG 之上。

但是你应该知道 UI(Swing) 上的单元测试很困难。

# ms-access - 访问 vba：分配 onMouseMove 的奇怪行为

> ID：14192316
> 
> 赞同：0
> 
> 时间：2013-01-07T08:33:33.860
> 
> 标签：ms-access, vba

我在动态分配 OnMouseMove 事件时遇到问题。

在一份报告中，我有数百个按钮，我为其分配了一个 OnClick 事件。此事件通过在调用中使用条件 WHERE 打开另一个报表。我通过提取 Button 的名称（包括其编号）、提取该编号并将其作为函数的参数提供给它来做到这一点。
这运作良好，正确的报告打开。我认为，没有检查，这个论点是正确的。

它的工作原理如下：

在报告的初始化函数中，我有

```
 For Each ctl In Me.Controls
If ctl.ControlType = acCommandButton Then
nSekNr = ParseNumber(ctl.Name, 6)
  ctl.OnClick = "=MapButtonClick('" & sBtnName & "', '" & nSekNr & "')"
[...] 
```

ParseNumber 函数只包括

```
ParseNumber = Right(ctlName, (Len(ctlName) - z)) 
```

然后，我的点击功能如下

```
Public Function MapButtonClick(ByVal sBtnName As String, ByVal nSekNr As Byte)
DoCmd.Minimize
DoCmd.Close acReport, "repSektion"
DoCmd.OpenReport "repSektion", acViewPreview, , "[SekID] = " & nSekNr
End Function 
```

当我单击每个按钮时，这可以工作并打开正确的报告。（是的，我知道不需要一个参数，这只是我尝试的其他东西的结转）

现在：我想使用标签和 OnMouseMove 在报告中显示按钮的编号，以便用户在单击按钮之前可以看到部分 ID。

麻烦的是，当我复制我的函数时，Access 似乎没有将 nSekNr 变量作为参数发送。我通过使用新功能来做到这一点

```
Public Function MapButtonShowID(sBtnName As String, nSekNr As Integer)
Me.sekshow.Visible = True
Me.sekshow.Caption = "Sektion: " & sSekNr
End Function 
```

其中 sekshow 是一个空标签。我像这样在点击事件的初始化下方调用它

```
 For Each ctl In Me.Controls
If ctl.ControlType = acCommandButton Then
nSekNr = ParseNumber(ctl.Name, 6)
  ctl.OnClick = "=MapButtonClick('" & sBtnName & "', '" & nSekNr & "')"
 ctl.OnMouseMove = "=MapButtonShowId('" & sBtnName & "', '" & nSekNr & "')"
[...] 
```

这给了我一个空的“Sektion：”，没有报告上的数字。

现在开始奇怪的事情：我通过添加一个 MsbBox 来检查 nSekNr 是否正确地赋予了任一函数。我的意思是，如果点击事件有效，那是因为给出了正确的 nSekNr。结果这两个函数都没有接收到变量——它是空的！

但是为什么我的点击事件会起作用呢？有问题的报告实际上没有任何内部过滤，它只是显示一些数据的基本报告。

我搞不清楚了。

手动分配事件几乎不是一种选择，因为有很多。

也许有一种方法可以正确地做到这一点，并弄清楚为什么即使参数为空，点击事件仍然有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:51:26.793

谜底解开了，是笔误。很抱歉浪费您的时间，但如果有人希望为报表中特定类型的每个控件动态分配事件过程，该功能将按预期工作。不过，这可能需要 Access 2010

# .net - 有没有办法在测试类之间共享断言而不在 NUnit 中继承？

> ID：14192321
> 
> 赞同：10
> 
> 时间：2013-01-07T08:33:54.873
> 
> 标签：.net, unit-testing, nunit, mspec

在 MSpec 中有一个简洁的功能允许您在多个测试之间共享断言。它们被称为[“行为”](http://lostechies.com/jamesgregory/2010/01/18/behaviours-in-mspec/)

> 行为定义了封装一组特定行为的可重用规范，你猜对了，行为；然后，您可以在任何表现出特定行为的上下文中包含这些规范。

您将它们定义为带有断言（`It`字段）的类

```
public class VehicleThatHasBeenStartedBehaviors
{
    protected static IVehicle vehicle;
    It should_have_a_running_engine = () => vehicle.IsEngineRunning.ShouldBeTrue();
    It should_be_idling = () => vehicle.RevCount.ShouldBeBetween(0, 1000);
} 
```

并将它们包含在您的测试类中，例如

```
public class when_starting_a_car
{
    Behaves_like<VehicleThatHasBeenStartedBehaviors> a_started_vehicle;
} 
```

我怎样才能用 NUnit 完成同样的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:12:40.777

您可以使用扩展方法来“打包”特定类型的断言：

```
public static class VehicleAssertions {
    public static void ShouldBeStarted(this IVehicle vehicle) {
        // TODO: change these to NUnit assertions
        vehicle.IsEngineRunning.ShouldBeTrue();
        vehicle.RevCount.ShouldBeBetween(0, 1000);
    }
} 
```

在测试方法上使用它：

```
testVehicle.ShouldBeStarted(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T12:45:32.037

> 有没有办法在测试类之间共享断言而不在 NUnit 中继承？

考虑到您只想共享断言并且正在测试接口上的行为，您可以创建一些简单的东西：

```
public interface IBehavior
{
    void Check();
}

public class VehicleThatHasBeenStartedBehaviors : IBehavior
{
    protected IVehicle vehicle;

    public VehicleThatHasBeenStartedBehaviors(IVehicle vehicle)
    {
        this.vehicle = vehicle;
    }

    public void Check()
    {
        Assert.That(vehicle.IsEngineRunning, Is.True);
        Assert.That(vehicle.RevCount, Is.LessThanOrEqualTo(1000));
        Assert.That(vehicle.RevCount, Is.GreaterThanOrEqualTo(0));
    }
}

[TestFixture]
public class when_starting_a_car
{
    protected Car car;

    [SetUp]
    public void SetUp()
    {
        car = new Car();
    }

    [Test]
    public void behaves_like_a_started_vehicle()
    {
        new VehicleThatHasBeenStartedBehaviors(car).Check();
    }
} 
```

但是，如果您想专门使用 MSpec 语法，我认为您可能必须实现它或找到一些为您完成它的框架。

**编辑**

阅读您对这个问题的评论，我意识到您可能想要重用测试方法，而不仅仅是断言。如果是这种情况，您可以[为 NUnit 编写自定义插件](http://www.nunit.org/index.php?p=nunitAddins&r=2.6.1)。这听起来可能有点矫枉过正，但由您决定。

我的**出发点**是编写一个定制的[SuiteBuilder](http://www.nunit.org/index.php?p=suiteBuilders&r=2.6.1)对象：

> **目的**
> 
> SuiteBuilder 是用于从类型构建测试夹具的插件。NUnit 本身使用 SuiteBuilder 来识别和构建 TestFixtures。

使用您自己的套件构建器，您可以阅读一些行为类并组成您的固定装置。

```
[NUnitAddin]
public class TestCompositionAddinProvider : IAddin
{
    #region IAddin Members

    public bool Install(IExtensionHost host)
    {
        IExtensionPoint builders = host.GetExtensionPoint("SuiteBuilders");
        if (builders == null)
            return false;
        builders.Install(new TestCompositionSuiteBuilder());
        return true;
    }

    #endregion
}
public class TestCompositionSuiteBuilder : ISuiteBuilder
{
    #region ISuiteBuilder Members

    public bool CanBuildFrom(Type type)
    {
                    //TODO: Create validation logic
        return true;
    }

    public NUnit.Core.Test BuildFrom(Type type)
    {
        if (CanBuildFrom(type))
            return new ComposedSuiteExtension(type);
        return null;
    }

    #endregion
}

public class ComposedSuiteExtension : TestSuite
{
    public ComposedSuiteExtension(Type fixtureType)
        : base(fixtureType)
    {
        //TODO: Create logic to add test methods from various behaviors.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T13:15:05.597

另一个简单的解决方案是在每个适用测试中调用的 Helper 类中创建静态 Assertion 方法。比如像这样：

```
public static class VehicleAssert 
{
    public void AssertCorrectlyStarted(IVehicle car) 
    {
         vehicle.IsEngineRunning.ShouldBeTrue();
         vehicle.RevCount.ShouldBeBetween(0, 1000); 
    }
 } 
```

然后在每个测试夹具中像这样使用它：

```
[TestFixture]
public class CarTest 
{
     [Test]
     public void TestCarStartsCorrectly() 
     {
         var car = new Car();
         car.Start();
         VehicleAssert.AssertCorrectlyStarted(car);
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T12:53:51.453

你可能想看看[Mixin](http://en.wikipedia.org/wiki/Mixin)的概念。

这是一个 SO[答案](https://stackoverflow.com/questions/6644668/mixins-with-c-sharp-4-0)，描述了如何使用 C# 4.0 完成此任务

# java - Java反射，获取参数类型

> ID：14192323
> 
> 赞同：2
> 
> 时间：2013-01-07T08:34:00.177
> 
> 标签：java, reflection, parameters

我有一个带有参数的方法 callMethod：methodName (String) 和 parameters(Object[])。现在，一开始对我来说一切似乎都很好，但我偶然发现了一个问题。您必须知道对象的类型才能使用反射。到目前为止，我是这样确定的：

```
Class[] getParameterTypes(Object[] parameters) {
    Class[] parameterTypes = new Class[parameters.length];
    for (int i = 0; i < parameters.length; i++) {
        parameterTypes[i] = parameters[i].getClass();
    }
    return parameterTypes;
} 
```

callMethod 用于从外部源调用方法。当这些方法具有原始参数作为类型或接口（列表等）时，它似乎失败了，我知道为什么。

我的问题是：有什么办法可以保持这种/类似的方式，或者唯一的解决方案是将类型信息（用于基元的 fe Integer.TYPE 等）传递给上述方法：

```
callMethod(String methodName, Object[] parameters, Class[] parameterTypes); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:47:31.447

如果调用者期望基于其变量类型的重载解决方案，您的代码*也会失败。*例如：

```
void foo(String x) {}
void foo(Object x) {}

Object x = "text";
foo(x); 
```

... 将调用`foo(Object)`而不是`foo(String)`，但您的反射代码将调用`foo(String)`.

现在，我们对您的用例知之甚少，无法说出这是否是一个问题。如果调用者*确实*知道他们想要调用哪个方法，使用哪些参数类型，那么最好传递它们。

如果上述情况不会在您的上下文中发生，您可能希望在反射代码中执行某种基本的重载解决方案：

*   查找具有正确名称和正确*数量*参数的所有方法。
*   检查每个方法以查看是否所有参数值都可分配给相应的参数类型（请参阅[`Class.isAssignableFrom`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)- 您可能需要单独处理原语）。
*   如果有多个匹配方法，应用一些规则来确定调用哪个。这些规则不必与 Java 相同，但您需要确保它们是明确的。

# android - libgdx：SpriteBatch，Samsung Android 设备上的片段着色器工作不正确

> ID：14192330
> 
> 赞同：5
> 
> 时间：2013-01-07T08:34:17.827
> 
> 标签：android, opengl-es, libgdx, samsung-mobile, fragment-shader

我正在使用 libgdx 及其 SpriteBatch 类为 Andoid 开发 2D 动态壁纸。这是一块手表，所以我只需要从 libgdx 绘制多个纹理，将它们旋转到特定角度。

我已经使用 SpriteBatch 类解决了这个问题，一切都很好。

但现在我需要在我的场景中添加放大镜效果。任务是以特定比例放大特定区域以模拟真实镜头。

我已经通过渲染到 FrameBuffer、从 FrameBuffer 获取纹理区域并最后使用 SpriteBatch 使用自定义着色器绘制该区域来解决这个问题。

问题：在三星设备上（我在 Galaxy Note N7000 和 Galaxy Tab 10.1 上试过）在放大区域的中心有一个小矩形，大约 16x16px，放大率略有增加。抱歉，我现在无法发布屏幕截图，因为我没有三星设备。在其他设备上一切正常，在 HTC Vivid、Acer A500、Google Nexus One 上试过。

我认为，如果在三星设备上的 Mali GPU 中出现问题，但不知道如何解决。

我已将此问题中的片段着色器代码改编为 SpriteBatch[使用 OpenGL ES 在运行时向图像添加鱼眼效果](https://stackoverflow.com/questions/6030814/add-fisheye-effect-to-images-at-runtime-using-opengl-es) 这是它：

```
#ifdef GL_ES
#define LOWP lowp
precision mediump float;
#else
#define LOWP
#endif

varying LOWP vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main() {
vec2 m = vec2(0.622 , 0.4985); // lens center point, note that in live wallpaper center of texture is (0.5,0.5)
float lensSize = 0.045; //diameter of lens
float lensCut = 0.0342; //length of cut lines

vec2 d = v_texCoords - m;
float r = sqrt(dot(d, d)); // distance of pixel from mouse
float cuttop = m.y + lensCut;
float cutbottom = m.y - lensCut; 

vec2 uv;
if (r >= lensSize) {
    uv = v_texCoords;
} else  if ( v_texCoords.y >= cuttop) {
    uv = v_texCoords;
}  else  if (v_texCoords.y <= cutbottom) {
    uv = v_texCoords;
} else {
    uv = m + normalize(d) * asin(r) / (3.14159 * 0.37);
}

gl_FragColor = texture2D(u_texture, uv);
} 
```

顶点着色器是 SpriteBatch 源的默认设置：

```
attribute vec4 a_position;
attribute vec4 a_color;
attribute vec2 a_texCoord0;

uniform mat4 u_projTrans;

varying vec4 v_color;
varying vec2 v_texCoords;

void main() {
    v_color = a_color;
    v_texCoords = a_texCoord0;
    gl_Position = u_projTrans * a_position;
} 
```

这是我的`render()`方法：

```
 GL20 gl = Gdx.graphics.getGL20();
    gl.glEnable(GL20.GL_TEXTURE_2D);
    gl.glActiveTexture(GL20.GL_TEXTURE0);

    gl.glClearColor(WallpaperService.bg_red, WallpaperService.bg_green, WallpaperService.bg_blue, 1f);
    gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    // Creating framebuffer, if it has gone
    if (mFrameBuffer == null) {
        mFrameBuffer = new FrameBuffer(Format.RGBA4444, BG_WIDTH, BG_HEIGHT, true);

        mFrameBufferRegion = new TextureRegion(mFrameBuffer.getColorBufferTexture());
        mFrameBufferRegion.flip(false, true);

    }

    //Camera setting according to background texture
    camera = new OrthographicCamera(BG_WIDTH, BG_HEIGHT);
    camera.position.set(BG_WIDTH / 2, BG_WIDTH / 2, 0);
    camera.update();
    batch.setProjectionMatrix(camera.combined);

    //Rendering scene to framebuffer
    mFrameBuffer.begin();
    batch.begin();
    //main Drawing goes here
    batch.end();

    //Drawing frame to screen with applying shaders for needed effects
    if (mFrameBuffer != null) {
        mFrameBuffer.end();

        camera = new OrthographicCamera(width, height);
        camera.position.set(width / 2, height / 2, 0);
        camera.update();
        batch.setProjectionMatrix(camera.combined);

        batch.begin();
        batch.setShader(null);

        batch.setShader(shader);

        batch.draw(mFrameBufferRegion, width / 2 - (BG_WIDTH / 2) + (MARGIN_BG_LEFT * ratio), height / 2
                - (BG_HEIGHT / 2) + (MARGIN_BG_TOP * ratio), (float) BG_WIDTH / 2, (float) BG_HEIGHT / 2,
                (float) BG_WIDTH, (float) BG_HEIGHT, (float) ratio, (float) ratio, 0f);

        batch.setShader(null);
        batch.end();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:34:39.337

我已经设法解决了这个问题。问题出在 Mali gpu 上。Mali 不支持片段着色器中的高精度浮点计算。当从中心到点的距离接近零时 - r 变量变为零。

所以我在我的计算中添加了常数系数，这就成功了。

这是工作片段着色器：

```
precision mediump float;

varying lowp vec4 v_color;
varying vec2 v_texCoords;

uniform sampler2D u_texture;

const float PI = 3.14159;
const float koef = 10.0;
void main() {
     vec2 uv;     
    vec2 m = vec2(0.622 , 0.4985); // lens center point, note that in live wallpaper center of texture is (0.5,0.5)
    float lensSize = 0.045; //radius of lens
    float lensCut = 0.0342; //height of cut

    float cuttop = m.y + lensCut;
    float cutbottom = m.y - lensCut;
    float cutleft = m.x-lensSize;
    float cutright = m.x+lensSize;

//don't transform pixels, that aren't in lens area
     if ( v_texCoords.y >= cuttop) {
        uv = v_texCoords;
    }  else  if (v_texCoords.y <= cutbottom) {
        uv = v_texCoords; 
           }  else  if (v_texCoords.x <= cutleft) {
        uv = v_texCoords; 
           }  else  if (v_texCoords.x >= cutright) {
        uv = v_texCoords; 
        } else {
    vec2 p = v_texCoords*koef; //current point 
    vec2 d = p - m*koef; //vector differnce between current point and center point
    float r = distance(m*koef,p); // distance of pixel from center

    if (r/koef >= lensSize) {
        uv = v_texCoords;
      } else {
    uv =m + normalize(d) * asin(r) / (PI*0.37*koef);
    }  
    }

   gl_FragColor = texture2D(u_texture, uv);
} 
```

# python - 如何设置 ndb keyProperty

> ID：14192331
> 
> 赞同：3
> 
> 时间：2013-01-07T08:34:24.377
> 
> 标签：python, django, google-app-engine, app-engine-ndb

我在理解实体和键在 Google App Engine NDB 中的工作方式时遇到了一些麻烦。

我有一个`post`实体和一个`user`实体。如何设置`user_key`为？`post``user`

在交互式控制台中，到目前为止我有这个：

```
from google.appengine.ext import ndb
from app.lib.posts import Post
from app.lib.users import User
from random import shuffle

users = User.query()
posts = Post.query().fetch()

for post in posts:
  post.user_key = shuffle(users)[0]
  post.put() 
```

我只是想为开发设置一些种子数据。我知道这可能不是设置事物的理想方式，但我的第一个问题是：

1.  如何从实体获取密钥（文档中描述了相反的内容）
2.  如何在 ndb 中设置关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:38:46.753

尝试：

```
post.user_key = shuffle(users)[0].key 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:18:10.397

也许这有助于理解 NDB。我和你有同样的问题。

```
class Person(ndb.Expando):
    pass

class Favourite(ndb.Expando):       
    pass

class Picture(ndb.Expando):
    pass

person  = Person()
person.put()
picture = Picture()
picture.put()
fav = Favourite(parent=person.key,
        person=person.key,
        picture=picture.key
        )
fav.put() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:35:13.200

1.  验证 shuffle 在这种情况下是否有效，因为 User.query() 返回的是一个迭代器，而不是一个列表。（您可以使用 shuffle（[ x for x in users ] ）将其转换为列表。请注意，此列表可能很长。
2.  NDB 有时会有一些非常有线的行为，所以我建议你不要存储 NDB-Key，但它的序列化字符串也与 ext.db 兼容：post.user_key = shuffle( [ x for x in users ] ).key。网址安全（）
3.  您可以使用 KeyProperty 进行关联。如果您需要对关系进行更精细的控制，则必须自己实现它们。请参阅[https://developers.google.com/appengine/docs/python/ndb/properties#structured](https://developers.google.com/appengine/docs/python/ndb/properties#structured)

# jboss - jbpm 5.4 与 mysql

> ID：14192332
> 
> 赞同：0
> 
> 时间：2013-01-07T08:34:28.347
> 
> 标签：jboss, jbpm, business-process-management

我将 jBPM 5.4 与内置数据库 H2 一起使用。

它工作正常。

我需要从 H2 迁移到 MySql/MS-SQL。

因此我关注了这个有用的链接，[https://community.jboss.org/wiki/SetUpJBPM54FinalInstallerToUseMSSQLServer2008UsingJTDS](https://community.jboss.org/wiki/SetUpJBPM54FinalInstallerToUseMSSQLServer2008UsingJTDS)

但正如指定的，我没有`ant install.demo.db`

任何人都可以帮我移植到 MySQL/MS-SQL 吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:37:47.093

在用户指南中已更改为`ant install.db.files` 但未通知。

# c# - 将 RSA 加密参数从 CRT（中国剩余定理）映射到 .NET 格式

> ID：14192335
> 
> 赞同：6
> 
> 时间：2013-01-07T08:34:35.737
> 
> 标签：c#, .net, c, rsa, chinese-remainder-theorem

我需要使用 C# 实现 RSA 加密/解密

我有一个带有以下参数的私钥：

`mod n`, `exponent`, `p`, `q`, `dP`, `dQ`, 和`(p`^(`-1`)`mod q)`

以上参数在[中文余数算法中有解释](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Using_the_Chinese_remainder_algorithm)

然而，RSA 的 C#.NET 实现具有不同的参数集，如下所示：

`Modulus`, `Exponent`, `P`, `Q`, `DP`, `DQ`, `D`,`InverseQ`

当我尝试将数据从 映射`CRT`到 时`DOTNET`，出现错误`Bad Data`

对于 `p`, `q`,`dP`和`dQ`映射是显而易见的，但关于其余参数我不确定。

如果我能获得映射这些参数的帮助，那就太好了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T12:10:37.827

`mod n`映射到`Modulus`，映射到，加密指数映射到，解密指数映射到。`p`^(`-1`)`mod q``InverseQ``Exponent``D`

加密指数`e`和解密指数`d`通过 e*d = 1 mod (p-1)(q-1) 相关。因此，如果您有一个，您可以使用 System.Numerics.BigInteger 类中的一些方法轻松派生另一个。

```
var Pminus1 = BigInteger.Subtract(P, BigInteger.One);
var Qminus1 = BigInteger.Subtract(Q, BigInteger.One);
var Phi = BigInteger.Multiply(Pminus1, Qminus1);
var PhiMinus1 = BigInteger.Subtract(Phi, BigInteger.One);
// var D = BigInteger.ModPow(E, PhiMinus1, Phi); 
```

请注意，在构造 .NET BigInteger 时必须小心，特别是如果您习惯于 Java 的 BigInteger 类。有关更多信息，请参阅[此问题](https://stackoverflow.com/a/14073787/1041046)。

编辑 ：

正如 CodeInChaos 指出的最后一行是错误的！

错误的！错误的！错误的！

我很尴尬。在向邪恶力量低头时，BigInteger 类没有模块化的逆方法，也没有扩展的欧几里得算法方法。不过，您可以在谷歌上搜索“c#扩展欧几里得算法”，您可以找到许多实现。扩展欧几里得算法将为您提供整数 x 和 y，使得 1 = e*x + phi * y。x 是 e mod phi 的倒数，因此需要设置 D = x mod phi。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-05T08:33:20.050

扩展欧几里得算法可用于计算模逆，在这种情况下将计算 D，使用此链接：[http](http://www.di-mgt.com.au/euclidean.html#extendedeuclidean) ://www.di-mgt.com.au/euclidean.html#extendedeuclidean获取详细信息，我测试了C#中的源代码如下，结果是匹配的，

```
public static BigInteger modinv(BigInteger u, BigInteger v)
{
   BigInteger inv, u1, u3, v1, v3, t1, t3, q;
   BigInteger iter;
   /* Step X1\. Initialise */
   u1 = 1;
   u3 = u;
   v1 = 0;
   v3 = v;
   /* Remember odd/even iterations */
   iter = 1;
   /* Step X2\. Loop while v3 != 0 */
   while (v3 != 0)
   {
       /* Step X3\. Divide and "Subtract" */
       q = u3 / v3;
       t3 = u3 % v3;
       t1 = u1 + q * v1;
       /* Swap */
       u1 = v1; v1 = t1; u3 = v3; v3 = t3;
       iter = -iter;
   }
   /* Make sure u3 = gcd(u,v) == 1 */
   if (u3 != 1)
       return 0;   /* Error: No inverse exists */
       /* Ensure a positive result */
       if (iter < 0)
           inv = v - u1;
       else
           inv = u1;
       return inv;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-31T10:58:05.810

D可以这样计算：

```
 var qq = BigInteger.Multiply(phi, n);
    var qw = BigInteger.Multiply(phi, qq);
    BigInteger D = BigInteger.ModPow(e, (qw - 1), phi); 
```

# c++ - c++：线程变量声明和做作

> ID：14192337
> 
> 赞同：-2
> 
> 时间：2013-01-07T08:34:46.997
> 
> 标签：c++, multithreading, variable-assignment

我在 VS 2008 中有这种 c++ 代码：

```
int x function(int a, int b){
    int var1;
    int var2;
    var1*=a;
    var2*=b;
    return a+b;
} 
```

我怎样才能做到这一点：

```
int x function(int a, int b){
    thread1 {
        int var1;
        var1*=a;
    }

    thread2{
        int var2;
        var2*=b;
    }

    thread1.join();
    thread2.join();
    return a+b;
} 
```

不创建 2 个其他功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:44:49.617

也许`std::future`是你所追求的？但我不确定它是否适用于 VS2008，但它适用于 VS2012 顺便说一句：

```
int Function(int a, int b)
{
  std::future<int> a1 = std::async( [a](){ return a*2; } ); 
  std::future<int> b1 = std::async( [b](){ return b*3; } );

  return a1.get() + b1.get();
} 
```

未来的结帐参考：[this](http://en.cppreference.com/w/cpp/thread/future)

# qt - Opengl 在调试模式下工作，但在运行时不工作

> ID：14192338
> 
> 赞同：0
> 
> 时间：2013-01-07T08:34:48.637
> 
> 标签：qt, opengl

我正在使用 Qt 创建一个国际象棋游戏，并使用 OpenGl 创建我的 GUI。我的问题是，当我在调试模式下运行我的程序时它运行良好，但是当我想正常运行它时，它不会绘制任何东西。是dll的问题吗？（顺便说一句，我没有使用 glut）这是我在项目中添加的唯一库：

`LIBS += -Opengl32.lib`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:54:21.310

利用：

```
LIBS += -L<path to .lib file> \
        -lOpengl32 
```

你的`.pro`语法是错误的。

# maven - 如何轻松交换 Maven 设置配置文件？

> ID：14192345
> 
> 赞同：2
> 
> 时间：2013-01-07T08:35:50.180
> 
> 标签：maven, m2eclipse, nexus

在我的公司，我们使用 Nexus 服务器来获取工件。这很好。但有时我也想在家里使用 Maven，因为我无法访问公司 Nexus。有没有一种简单的方法来交换 Maven 设置配置文件？它是否可以轻松交换`m2eclipse`？

目前我正在使用以下 settings.xml：

```
<settings
    xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
      <servers>  
          <server>  
              <id>central</id>  
              <username>company-user</username>  
              <password>company-user</password>  
          </server>  
          <server>  
              <id>mirror</id>  
              <username>company-user</username>  
              <password>company-user</password>  
          </server>  
      </servers>  
      <mirrors>  
        <mirror>  
            <id>mirror</id>  
            <url>https://url.to.company.nexus</url>  
            <mirrorOf>*</mirrorOf>  
        </mirror>  
      </mirrors>  
      <profiles>  
          <profile>  
              <id>defaultprofile</id>  
              <repositories>  
                  <repository>  
                      <id>central</id>  
                    <name>Repository for Company artifacts</name>  
                      <url>https://url.to.company.nexus</url>  
                      <releases>  
                          <enabled>true</enabled>  
                    </releases>  
                      <snapshots>  
                          <enabled>true</enabled>  
                    </snapshots>  
                  </repository>  
              </repositories>  
              <pluginRepositories>  
                  <pluginRepository>  
                      <id>central</id>  
                    <name>Repository for Company artifacts</name>  
                      <url>https://url.to.company.nexus</url>  
                      <releases>  
                          <enabled>true</enabled>  
                    </releases>  
                      <snapshots>  
                          <enabled>true</enabled>  
                    </snapshots>  
                  </pluginRepository>  
              </pluginRepositories>  
              <properties>  
                  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>  
              </properties>  
              <activation>  
                  <activeByDefault>true</activeByDefault>  
              </activation>  
          </profile>  
      </profiles>  
      <activeProfiles>  
          <activeProfile>defaultprofile</activeProfile>  
      </activeProfiles>  
</settings> 
```

我知道我可能必须向 中添加新配置文件`http://repo1.maven.org/`，但如何确保现有配置文件`mirrors`不会因超时而抱怨？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T05:44:08.593

根据我的经验，最好有多个设置文件并根据需要交换它们。通过从不同名称的文件复制现有 settings.xml 的顶部，或使用 mvn 命令的 -s 选项来指定设置文件。如果这太麻烦而无法一直键入，您还可以使用不同的设置文件为您的 mvn 命令创建别名。但是，这会破坏 Maven 的 bash 完成，这就是为什么我坚持只使用脚本复制设置文件。

同样的事情实际上适用于交换上下文，例如 Git 更改 .gitconfig 文件，因此您可以将所有这些文件更改打包到脚本或 git 中的不同分支或其他..

此外，它可以帮助在本地运行 Nexus 并连接到它，然后让它代理所有外部存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T08:52:47.310

我能建议的最好的方法是使用 Git/SVN/ 并签入 settings.xml 文件并使用不同的分支来分隔公司和家庭。使用任一

```
svn switch URL/branches/company
svn switch URL/branches/home 
```

或者

```
git checkout company
git checkout home 
```

配置文件将不起作用，因为 mirrorOf 部分无法放入配置文件区域。可以通过配置对话框更改 m2e。但这可能会导致与命令行不一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:12:46.923

不幸的是，无法在配置文件中配置镜像。在 Maven 中有一个开放的[请求](http://jira.codehaus.org/browse/MNG-3525)。正如 JIRA 中所建议的，您可以使用脚本在不同的 settings.xml 之间轻松切换

至于回答标题中的问题：为了在m2e中轻松切换配置文件，我建议您从这个更新站点安装[JBoss Tools Maven Profile Manager ：http:](http://docs.jboss.org/tools/whatsnew/maven/maven-news-3.3.0.M3.html#itemname1) [//download.jboss.org/jbosstools/updates/stable/juno/](http://download.jboss.org/jbosstools/updates/stable/juno/)

要在所有项目上启用相同的全局配置文件：

*   在项目资源管理器视图中：选择所有*maven*项目 (Ctrl+A)
*   点击 Ctrl+Alt+P 打开 Profile Mgmt 向导并选择要激活的配置文件。

这相当于在每个项目属性页面中手动设置活动的 maven 配置文件，这更加繁琐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:07:59.300

如果您已经在本地存储库中下载了工件，那么您可以使用`mvn -o clean compile ...`. 这将避免远程存储库查找。

# android - 图片从 SD 卡到图库

> ID：14192357
> 
> 赞同：-1
> 
> 时间：2013-01-07T08:36:45.647
> 
> 标签：android

我想从 sd 卡中获取图像并将其放置在图库视图中。为此，我已将该图像转换为位图，但它显示了某些错误..

图像转换代码..我附上了显示空指针异常的完整代码

```
 private Gallery gallery;
private ImageView imgView;
int position;
private byte[] data = { };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridview);

    System.out.println("Enter the activity");

    try{
        String filepath = "/sdcard/";
        File imagefile = new File(filepath + "abcdoutput.jpg");
        FileInputStream fis = new FileInputStream(imagefile);
        Bitmap bi = BitmapFactory.decodeStream(fis);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();
        System.out.println("cnvrtn");

    }
    catch(Exception e) {
         e.printStackTrace();

    }

    Bitmap bitmapimage = BitmapFactory.decodeByteArray(data, 0, data.length);
    position = 0;
    imgView = (ImageView) findViewById(R.id.ImageView01);
    imgView.setImageBitmap(bitmapimage);

    gallery = (Gallery) findViewById(R.id.examplegallery);
    gallery.setAdapter(new AddImgAdp(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position,
                long id) {
            imgView.setImageResource(data[position]);
            DisplayImage.this.position = position;
        }
    });
    System.out.println("Enter the activity//////////");

    imgView.setOnLongClickListener(new View.OnLongClickListener() {
        @SuppressWarnings("deprecation")
        public boolean onLongClick(View v) {

            AlertDialog alertDialog = new AlertDialog.Builder(
                    DisplayImage.this).create();
            alertDialog.setTitle("Confirmation");
            alertDialog
                    .setMessage("Do you want to set this image as wallaper?");
            alertDialog.setButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {

                            Bitmap bitmap = BitmapFactory.decodeResource(
                                    getResources(), data[position]);
                            try {
                                DisplayImage.this.setWallpaper(bitmap);
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                            Log.d("Gallery Example", "Image setted.");

                        }
                    });

            alertDialog.show();
            return true;
        }
    });

}

public class AddImgAdp extends BaseAdapter {
    int GalItemBg;
    private Context cont;

    public AddImgAdp(Context c) {
        cont = c;
        TypedArray typArray = null;
        GalItemBg = typArray.getResourceId(
                0, 0);
        typArray.recycle();
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imgView = new ImageView(cont);

        imgView.setImageResource(data[position]);
        imgView.setLayoutParams(new Gallery.LayoutParams(100, 100));
        imgView.setScaleType(ImageView.ScaleType.FIT_XY);
        imgView.setBackgroundResource(GalItemBg);

        return imgView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:46:17.787

使用它从数组中取回图像并设置它：

```
Bitmap bitmap = BitmapFactory.decodeByteArray(data,0,data.length);  

imgView.setImageBitmap(bitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:47:05.617

用一行代码尝试简单

```
String imagePath=Environment.getExternalStorageDirectory().toString()+"/abcdoutput.jpg";
imgView.setImageDrawable(Drawable.createFromPath("imagePath")); 
```

# php - AuthComponent 在开发模式下工作得很好，但在生产中不行？

> ID：14192361
> 
> 赞同：3
> 
> 时间：2013-01-07T08:37:13.140
> 
> 标签：php, cakephp

使用 CakePHP 的 AuthComponent 时出现一个奇怪的错误。据我所知，代码本身没有任何问题。它在我的开发机器和生产服务器上运行良好。但是，如果我在生产服务器上将 app/Core/config.php 中的“调试”级别从 2（开发）更改为 0（生产），则应用程序将失败，但错误日志中只有以下内容：

> PHP 致命错误：在第 3 行的 /path/to/my/app/View/Elements/auth_status.ctp 中找不到类 'AuthComponent'

我已检查该文件是否存在于`lib/Cake/Controller/Component/AuthComponent.php`. 我还实验性地添加/删除`App::uses('AuthComponent', 'Controller/Component')`了 AppController 和我的个人控制器，但无济于事。这让我很困惑，我无法在我的开发机器上重现该错误。这似乎表明存在服务器问题，但我找不到解释，并且文档不清楚运行 AuthComponent 所需的先决条件。有什么想法可以解决吗？谢谢！

作为参考，这是我的 AppController：

```
class AppController extends Controller {
  public $helpers = array('Recaptcha.Recaptcha');
  public $components = array(
    'Session',
    'Auth' => array(
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login'
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
  );

  public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow();
  }
} 
```

auth_status.ctp 的代码：

```
 <div class="pull-right">
        <?php if (AuthComponent::user('id')): ?>
            <?php echo $this->Html->link("Welcome!", '/users/view/'.AuthComponent::user('id'));?>
             | 
            <?php echo $this->Html->link('Logout', '/users/logout');?>
        <?php else: ?>
            <?php echo $this->Html->link('Login', '/users/login');?>
             | 
            <?php echo $this->Html->link('Register', '/users/register');?>
        <?php endif; ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T23:45:41.300

我终于明白了这一点。在 core.php 中，缓存引擎使用了一个名为 $prefix 的变量。如果该引擎是 Memcache 或 APC，则必须对其进行更改以避免与服务器上运行的任何其他 Cake 应用程序发生命名冲突。我的开发笔记本电脑使用的是文件缓存引擎，而生产服务器使用的是 APC（以及后来的 Memcached）。同一 Cake 应用程序的旧版本正在该服务器上运行，并且*未*使用 AuthComponent。只要有人对该应用程序发出请求，另一个应用程序就会使用错误的缓存并抛出 HTTP500 错误，直到我清除缓存为止。

将 $prefix 变量更改为您的应用程序独有的变量，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:00:31.707

您可能`php.ini`对[`include_path`](http://php.net/manual/ini.core.php#ini.include-path).

检查开发和生产服务器：

```
echo ini_get('include_path'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T00:16:33.270

我想这可能与[这个问题](http://cakephp.lighthouseapp.com/projects/42648/tickets/2682-misleading-errors-when-some-exceptions-are-rendered-repeated-errors)有关。我的代码中的错误与 AuthComponent（或 Cake）完全无关。

不幸的是，我不知道你的错误是什么——在我指出我的错误之前，我必须进行一些真正的调试。

如果有人想知道；我的错误是我将函数作为数组访问，而我的生产服务器运行的 PHP 版本 < 5.4。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T21:55:28.400

我也遇到了这个问题，事实证明我的问题是，我试图在 bootstrap.php 中加载一个插件，但没有安装它

# c# - 如何在控件名称中使用变量？（C＃）

> ID：14192363
> 
> 赞同：0
> 
> 时间：2013-01-07T08:37:13.687
> 
> 标签：c#, variables, loops, if-statement, for-loop

我想把这段代码压缩成更简单的东西，这基本上是我写的代码，除了我把它缩短了很多。

```
if (chk1.Checked != true) lab1.Text = rng.Next(1, 7).ToString();
if (chk2.Checked != true) lab2.Text = rng.Next(1, 7).ToString(); 
```

我想要几行一次性完成，而不是许多非常相似的行。我尝试了一个“for”循环，但我不知道如何在控件名称中使用该变量。

```
for (int x = 1; x == 7; x++)
{
    if (chk{x}.Checked != true) lab{x}.Text = rng.Next(1, 7).ToString();
} 
```

显然 {x} 不起作用，但有什么我可以用来完成这项工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:49:15.113

出于某种原因，我觉得这是一个 WinForms 应用程序，我可能错了，但你以后需要更清楚。

每个控件都有一个父控件。例如，您的所有控件可能属于同一个`Panel`控件。我假设这个例子就是这种情况。A`Control`有一个`Controls`属性，它是子控件的集合，可以使用控件的名称访问这些子控件。因此，假设您的控件与上面的变量命名相同（使用设计器或`Name`属性命名），那么您可以执行以下操作...

```
for(int i = 1; i <= 7; i++)
{
   Checkbox checkbox = MyParentPanel.Controls["chk" + i] as Checkbox;
   Label label = MyParentPanel.Controls["lab" + i] as Label;
   if(checkbox != null && label != null && !checkbox.Checked)
   {
      label.Text = rng.Next(1, 7).ToString();
   }
} 
```

让我知道如果你不明白这些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:49:25.973

最好创建 2 个大小相等的数组 - 一个用于保存复选框，一个用于保存标签。然后你的 for 循环将如下所示：

```
for (int i = 0; i < 7; i++)
{
    if (checkBoxes[i].Checked == false)
    {
        labels[i].Text = rng.Next(1, 7).ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:01:23.997

a非常适合 a被“绑定”到 a`Dictionary`的 1:1 场景。在这里， CheckBox 充当并且充当 的值，可以对其进行强类型化以确保您在编译时处理正确类型的数据。`CheckBox``Label``Key``Label``Dictionary`

```
// Declare this at class level
private Dictionary<CheckBox, Label> myControls = new Dictionary<CheckBox, Label>();
// ...

// Dictionary initialization goes in the ctor 
// unless you generate the controls at run-time. 
// If you generate controls, place it after the generation itself
myControls.Add(chk1, lab1);
myControls.Add(chk2, lab2);
// and so on...

// ...    

// When you want to cycle, do this:
foreach(var controlsPair in myControls) {
    // controlsPair is KeyValuePair<CheckBox, Label>
    if(controlsPair.Key.Checked) continue; // SEE (*) BELOW

    controlsPair.Value.Text = rng.Next(1, 7).ToString();
} 
```

(*)：我总是建议检查条件的正确性，因为我在阅读代码时发现逻辑更容易理解，但最终的行为完全一样。

注意：此代码应该适用于任何地方（WinForms、WPF、Silverlight 等）

# php - 如何获取 joomla 2.5 的用户列表？

> ID：14192368
> 
> 赞同：1
> 
> 时间：2013-01-07T08:37:35.213
> 
> 标签：php, list, joomla2.5

如何通过 id 和用户名获取用户列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T12:40:43.863

我从 [Print All Users - Joomla 2.5中找到了这个结果](https://stackoverflow.com/questions/12799933/print-all-users-joomla-2-5/12800557#12800557)

```
$db =& JFactory::getDBO();
$query = "SELECT * FROM #__users" ;
$db->setQuery($query);

$rows = $db->loadObjectList();
foreach ($rows as $row) {
  echo $row->id.'|'.$row->username.'|'.$row->email;
} 
```

# java - 具有多个位置的 Spring 属性占位符配置器中的属性解析顺序是什么？

> ID：14192373
> 
> 赞同：14
> 
> 时间：2013-01-07T08:37:48.157
> 
> 标签：java, spring, properties

假设我有一个配置：

```
 <bean id="batchJobProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>first.properties</value>
            <value>second.properties</value>
        </list>
    </property>
</bean> 
```

first.properties 具有属性“my.url=first.url” second.properties 具有属性“my.url=second.url”

那么哪个值将被注入“myUrl”bean？是否有任何已定义的属性解析顺序？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-07T08:49:47.107

[PropertiesLoaderSupport.setLocation](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/core/io/support/PropertiesLoaderSupport.html#setLocations%28org.springframework.core.io.Resource%5B%5D%29)的 javadoc状态

> 设置要加载的属性文件的位置。
> 
> 可以指向经典属性文件或遵循 JDK 1.5 的属性 XML 格式的 XML 文件。
> 
> 注意：如果键重叠，以后文件中定义的属性将覆盖先前文件中定义的属性。因此，请确保最具体的文件是给定位置列表中的最后一个文件。

所以 second.properties 中 my.url 的值会覆盖 first.properties 中 my.url 的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T09:19:10.277

最后一个获胜。

假设我们有 props1.properties 作为

```
prop1=val1 
```

和 props2.properties

```
prop1=val2 
```

和 context.xml

```
<context:annotation-config />
<bean id="batchJobProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>/props1.properties</value>
            <value>/props2.properties</value>
        </list>
    </property>
</bean>
<bean class="test.Test1" /> 
```

然后

```
public class Test1 {
    @Value("${prop1}")
    String prop1;

    public static void main(String[] args) throws Exception {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("/test1.xml");
        System.out.println(ctx.getBean(Test1.class).prop1);
    }

} 
```

印刷

val2

如果我们将上下文更改为

```
 <list>
            <value>/props2.properties</value>
            <value>/props1.properties</value>
        </list> 
```

相同的测试打印

```
val1 
```

# android - 在 Android 上生成的条形码数据矩阵

> ID：14192375
> 
> 赞同：0
> 
> 时间：2013-01-07T08:38:02.290
> 
> 标签：android

我必须制作一个应用程序来接受字符串并以 Datamatrix 格式制作条形码。我找到了 Barcode4j。看起来像一个适合我需要的库，但我不能在 Android 上使用它。有人可以告诉我如何使用它或告诉我在 Android 上运行的免费库（请使用 Datamatrix 格式）？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:43:18.473

试试这个：[https](https://code.google.com/p/zxing/) ://code.google.com/p/zxing/它在 android 上运行，是某种条形码标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:44:07.633

[zxing](http://code.google.com/p/zxing/)项目支持 datamatrix 格式等。

# javascript - Jquery/javascript 检查 div 是否完成加载？

> ID：14192379
> 
> 赞同：5
> 
> 时间：2013-01-07T08:38:36.877
> 
> 标签：javascript, jquery

我的网站上有一个类似 facebook 的按钮，如下所示：

```
<div class="fb-like" data-href="https://www.facebook.com/xxx"
             data-send="false" data-width="300" 
             data-show-faces="true">
</div> 
```

我想使用 jQuery 或 java 脚本来检查这个 div 是否 100% 完成加载到页面上，然后做其他事情。

我用`$(document).ready`and`.load`来检查，但没有一个工作（他们甚至在 div 完成加载之前就完成了这个功能）。这个问题是否与这个 div 包含来自另一个网站的 iframe 的事实有关？我在这里做错了什么？

**更新**我刚试过这个，它根本不起作用：

```
$(document).ready(function() {
    $(".fb-like").load(function (){
         alert("Loaded :)");
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T08:40:28.447

我认为问题是您需要测试是否加载了 iframe 而不是 div。我建议更改您的选择器以包含子 iframe 并检查其上的加载事件。

```
$('.fb-like iframe').load(function() {
  console.log('iframe loaded');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:35:02.990

```
$('.fb-like iframe').on(function() {
  console.log('iframe loaded');
 }); 
```

# maven - 使用 maven 构建时从工件中获取构建号/日期

> ID：14192380
> 
> 赞同：0
> 
> 时间：2013-01-07T08:38:40.420
> 
> 标签：maven, artifactory

我使用 maven 构建一些项目，这些项目安装到本地 .m2 和远程工件存储库中。

我有另一个项目将其中一些工件下载（maven-dependency-plugin:copy）到其本地目标文件夹，然后将它们上传到文件共享。当我将工件上传到文件共享时，我需要给它一个 buildNumber，如果我重新运行项目，它不应该改变。如何在例如获取工件的内部版本号。神器？

当我浏览工件中的工件时，它们都有唯一的 buildId。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:22:06.057

最好的解决方案可能是使用[buildnumber-maven-plugin](http://mojo.codehaus.org/buildnumber-maven-plugin/)从 VCS 等获取信息并将此信息放入 manifest.mf 文件中。您可以继续使用 maven-dependency-plugin:copy 目标将工件复制到相应的文件夹中。只有在您有 SNAPSHOT 的情况下，您才可以稍后查看罐子本身。

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>buildnumber-maven-plugin</artifactId>
        <version>1.1</version>
        <executions>
          <execution>
            <phase>validate</phase>
            <goals>
              <goal>create</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <doCheck>true</doCheck>
          <doUpdate>true</doUpdate>
        </configuration>
      </plugin>
    </plugins>
  </build> 
```

您可以定义应该放入[MANIFEST.MF](http://maven.apache.org/shared/maven-archiver/index.html)文件的内容，如下所示：

```
<build>
    ...
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.1</version>
        <configuration>
          <archive>
            <manifest>
              <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
            </manifest>
            <manifestEntries>
              <Implementation-Build>${buildNumber}</Implementation-Build>
            </manifestEntries>
          </archive>
        </configuration>
      </plugin>
    </plugins>
  </build> 
```

# shell - 使用 cshell 提取子字符串

> ID：14192382
> 
> 赞同：0
> 
> 时间：2013-01-07T08:38:46.473
> 
> 标签：shell, csh

在使用 csh 提取字符串时，我几乎不需要任何帮助。我有一个包含以_abc 结尾的长字符串的变量。我需要使用 csh 提取除 _abc 之外的整个字符串。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:42:42.840

你应该有`basename`可用的命令，在这种情况下你想要

```
echo `basename mystring_abc _abc`
>> mystring 
```

# javascript - 错误：未捕获的类型错误：对象函数

> ID：14192384
> 
> 赞同：-2
> 
> 时间：2013-01-07T08:38:56.330
> 
> 标签：javascript, methods

当我写`book.main.method();`我得到错误**：Uncaught TypeError: Object function () {**

```
window.book = window.book|| {};

    book.control = function() {
        var check_is_ready = 'check_is_ready';
        if(check_is_ready == 'check_is_ready') {
            this.startbook = function() {
                var bookMain = new book.main();
                    bookMain.method();
            return;
            };
        };
    };

$(function() {
    var control = new book.control();
    control.startbook();
});

(function () {
    book.main = function() {     
    var index =0;
        this.method = function() {
            index++;
            if (index <= 500){
                book.main.method();//  <-- this wrong
                // the error which I get :Uncaught TypeError: Object function () { 
                alert (index);
                }
         };
    };
})(); 
```

我应该写什么`book.main.method();`来调用它而不出错？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:49:34.020

您混淆了构造函数 ( `book.main`) 和实例。

`this.method = function() {`向您获得的实例添加一个函数`new book.main()`，而不是`book.main`.

我不确定您的确切最终目标，但您应该替换

```
book.main.method();//  <-- this wrong 
```

和

```
this.method();//  <-- this works 
```

另请注意，如果您想查看警报的增量值，您必须切换两行：

```
(function () {
    book.main = function() {     
    var index =0;
    this.method = function() {
        index++;
        if (index <= 2){
            console.log(index); // less painful with console.log than with alert
            this.method();
        }
     };
    };
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:59:59.303

如果我理解正确，主要有问题的代码是：

```
(function () {
    book.main = function() {     
    var index =0;
        this.method = function() {
            index++;
            if (index <= 500){
                book.main.method();//  <-- this wrong
                // the error which I get :Uncaught TypeError: Object function () { 
                alert (index);
            }
         };
    };
})(); 
```

您正在尝试`method()`递归调用。进行递归调用的另一种方法是为函数表达式 ( `methodFn`) 命名。请记住，此名称仅在该函数的主体内有效：

```
(function () {
    book.main = function() {     
    var index =0;
        this.method = function methodFn() {
            index++;
            if (index <= 500){
                methodFn();
                alert (index);
            }
         };
    };
})(); 
```

# ios - iPad：如何更改弹出窗口中导航栏项目的色调？

> ID：14192393
> 
> 赞同：1
> 
> 时间：2013-01-07T08:39:11.310
> 
> 标签：ios, ipad, popover, navbar, tint

我正在使用自定义 popoverBackgroundViewClass 将弹出框着色为深灰色。

[https://github.com/Scianski/KSCustomUIPopover](https://github.com/Scianski/KSCustomUIPopover)

```
popover.popoverBackgroundViewClass = [KSCustomPopoverBackgroundView class]; 
```

效果很好，但是如何更改弹出框的导航项的色调？弹出框导航栏中的“返回”按钮仍然是标准的蓝色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:20:57.617

您指定的 contentViewController 显然是 UINavigationController 对吧？其中有一个 rootViewController。因此，来自 rootViewController 的内容类似于以下内容：

```
self.navigationController.navigationBar.tintColor = [UIColor redColor]; 
```

……应该这样做。

# html - 如果存在其他 div，则 div 的 CSS 宽度

> ID：14192398
> 
> 赞同：2
> 
> 时间：2013-01-07T08:40:03.303
> 
> 标签：html, css

在下面的 HTML 中，我只想指定 div 的宽度`.left`，`.right`否则`.wrapper`它应该取全宽。例如，如果有`.right`div，那么它的宽度`.left`应该是300px，否则应该是500px。

我认为这可以使用 css`+`选择器来完成，但如果我不确定如何在`.left`.

```
<div class="wrapper">
    <div class="left"></div>
    <div class="right"></div>
</div>

.wrapper{
    width: 500px;
}

.left{
    width: 300px;
}

.right{
    width: 200px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T08:57:25.190

您可以使用 :only-child 选择器

```
.left:only-child
{
  width: 100%;
} 
```

[例子](http://jsfiddle.net/axrwkr/Vd4Pz/)

如果您不想使用 :only-child 选择器，可以尝试以下操作

```
.wrapper
{
  width: 500px;
  min-height: 50px;
}

.left {
    overflow: hidden;
    min-height: 50px;
    border: 1px dashed #f00;
}

.right {
    float: right;
    width: 200px;
    min-height: 50px;
    border: 1px dashed #00f;
} 
```

[例子](http://jsfiddle.net/SpSjL/674/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T08:48:17.517

与其使用 CSS，为什么不使用 HTML 文件呢？

从您的问题来看，您似乎有不同的 HMTL 文件/输出。如果您在 HTML 文件中添加不同的类，您可以直接在 CSS 中定位它们：

```
<div class="wrapper">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

和

```
<div class="wrapper">
    <div class="full"></div>
</div> 
```

您的 CSS 将包含如下内容：

```
.wrapper {
    width: 500px;
}

.left {
    width: 300px;
}

.right {
    width: 200px;
}

.full {
    /* Whatever is required for full width */
} 
```

这样方便多了！（假设您可以更改 HTML 文件/输出）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:52:03.890

如果您控制 HTML 输出，我也会选择 Veger 的解决方案。如果不是，则`+`选择器仅适用于后一个元素，因此*如果*左 div 存在，`.left + .right`您可以更改右 div 。反过来也行不通。

 *如果您知道，您将*始终*有一个左 div，您可以将右 div 放入左 div 并让它以 200px 的宽度向右浮动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T08:54:14.380

CSS无法检测元素是否存在，它只是用于元素的呈现。

但是，您可以使用 javascript 来执行此操作。我将向您展示它的 jQuery 版本：

你有一个元素：

```
<div id="one">
  My diiiv.
</div> 
```

如果这个元素存在，你想做点什么：

```
$.fn.exists = function(callback) {
  var args = [].slice.call(arguments, 1);

  if (this.length) {
    callback.call(this, args);
  }
  return this;
}; 
```

这是一个函数，它将在调用元素时确定元素是否存在。

您现在可以做的是测试是否存在任何元素：

```
$('div#one').exists(function() {
  this.append('<p>I exist!</p>');
}); 
```

因此，如果是这样，您可以以任何您想要的方式扩充 DOM。CSS 无法做到这一点，这就是 javascript 及其库的用途:)

[http://jsfiddle.net/5Q2Gm/](http://jsfiddle.net/5Q2Gm/)*

# wpf - 为什么所有位置/尺寸都是双格式的？

> ID：14192399
> 
> 赞同：6
> 
> 时间：2013-01-07T08:40:03.463
> 
> 标签：wpf, silverlight, xaml, canvas

基本上，我会说坐标是“基于像素的”。很容易理解 (10,10) 处的像素或 100 像素的宽度。

但是因为位置和大小是双格式的，所以你可以有一个 100.6 的大小和一个在 (10.1,50.9) 的位置。十进制值对位置/大小有影响吗？

事实上，我通过计算点来生成自定义路径。有些点几乎相等，例如 1.9999999 和 2.000000。起初，我想对所有点进行四舍五入，但我确信 xaml 中的影响（1.99 和 2.00，是同一点吗？）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T08:45:07.273

不，WPF 位置和大小不是基于像素的，而是基于“单位”的。

事实上，当您的屏幕设置为 96 dpi 时，1 个单位等于 1 个像素。但是，例如，如果您将屏幕设置为 120 dpi，则 1 个单位将等于 1.25 像素。

直接的好处是，您的应用程序将比 Windows 窗体应用程序更容易适应更高比例的分辨率。

引用[FrameworkElement.Height 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.height.aspx)：

> 该值被解释为与设备无关的单位（1/96 英寸）测量值。

最后，我建议您对值进行四舍五入。不是出于技术原因，而是为了使 XAML 标记更具可读性和“自然”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T08:47:57.860

WPF 使用矢量图形。有关详细信息，请参阅[视觉渲染行为中的](http://msdn.microsoft.com/en-us/library/ms748373.aspx#visual_rendering_behavior)*矢量图形*部分。矢量图形的一大优势是绘图（例如您的路径）可以轻松缩放而不会像素化。

如果计算的点值直接放入路径几何图形中，则对路径的点进行四舍五入没有多大意义。坐标相对于 Path 对象的原点，并且 Path（或其祖先之一，例如 Canvas）本身可能位于分数像素位置。

如果将点值写入 XAML，我同意 Steve 的观点，即舍入会使 XAML 更好，并且您不会意识到 1.99 和 2 之间有任何区别。

# mysql - SQL查询索引范围之间的拉取值

> ID：14192401
> 
> 赞同：-1
> 
> 时间：2013-01-07T08:40:06.263
> 
> 标签：mysql, sql

我有一张表，我需要第二张表中的服务类型字段。

```
KmReading   ServiceType
40203   
30143   
30143   
30143 
```

在表 2 中，我有 KMReading 的索引范围，例如

```
StartKM EndKM   ServiceType
0   2000    Service1
2001    7000    Service2
7001    12000   Service3
12001   17000   Service4
17001   22000   Service5
22001   27000   Service6
27001   32000   Service7
32001   37000   Service8
37001   42000   Service9 
```

因此，如果 table1 中的 StartKM 和 EndKM 之间有任何值，那么它可以将 ServiceType 的值从 table2 拉到 table1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:02:32.037

试试这个，它可能适用于 MS Access。

```
UPDATE T1
SET T1.ServiceType = T2.ServiceType
FROM table1 T1
 JOIN table2 T2
   ON T1.KmReading BETWEEN T2.StartKM AND T2.EndKM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:03:12.723

编辑：对于 MySQL，这应该这样做：

```
UPDATE table1 AS t1, table2 AS t2
SET t1.ServiceType = t2.ServiceType
WHERE t1.KmReading >= t2.StartKm AND t1.KmReading <= t2.EndKm 
```

# h.264 - 从 I 帧/P 帧片段创建 MDAT

> ID：14192402
> 
> 赞同：1
> 
> 时间：2013-01-07T08:40:17.770
> 
> 标签：h.264, mpeg-4

我正在从 H.264 流创建一个 MPEG-4 文件。H.264 流采用 NAL 格式（例如：0,0,0,1,67,...,0,0,1,68,...）。每个视频帧作为多个 I 帧/P 帧片段传输。例如：帧 1 包含大约 80 个 I 帧片段，帧 2 包含大约 10 个 P 帧片段。

我知道 MPEG-4 文件的 MDAT 原子应该包含 NAL 格式的 H.264 流。

我想知道如何将这些片段转换为单个 I 帧，然后才能将其放入 MPEG-4 的 MDAT 原子。

我不想使用任何库。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T21:43:02.673

您要将 H.264 Annex B NAL 流转换为 MP4 文件数据包。为此，您需要：

*   将原始文件拆分为 NAL 单元（00 00 00 01 yy xx xx ...）；
*   定位帧边界：每个 H.264 帧通常包含多个切片和可选的其中之一：SPS、PPS、SEI。您需要解析上面的“yy”八位字节以确定您正在查看的 NAL 单元类型。现在，为了知道帧的边界，您需要解析每个切片的第一部分，称为“SliceHeader”，并比较后续切片的“frame_number”。
*   一旦您知道帧边界，您就可以形成 MP4 数据包。每个数据包将包含以下格式的一帧和 NAL 单元：

    l1 l1 l1 l1 yy xx xx ...
    l2 l2 l2 l2 yy xx xx ...

所以基本上你用保持这个NAL单元长度的整数替换每个分隔符'00 00 00 01'。

*   然后，为了获得正确的 MP4 标头，您需要使用 MP4 复用器并在视频轨道的示例条目中填充正确的“AvcC”原子。

这是一个相当乏味的过程，但如果你想了解细节，你可以研究 JCodec 的源代码（[http://jcodec.org](http://jcodec.org)）：org.jcodec.samples.transcode.TranscodeMain、org.jcodec.containers.mp4。 MP4复用器

# vbscript - 为什么我们总是需要在 ADO vbscript 中的 AddNew 旁边立即更新？

> ID：14192403
> 
> 赞同：0
> 
> 时间：2013-01-07T08:40:19.717
> 
> 标签：vbscript, ado

我正在寻找关于`rs.AddNew,rs.Update`. 为什么我们在 ADO vbscript 中总是需要`Update`立即旁边？`AddNew`

```
Dim cn As New adodb.Connection
Dim rs As New adodb.Recordset
Dim cmd As New adodb.Command

cn.ConnectionString = "Provider=SQLOLEDB;Data Source=alexverb2;uid=sa;pwd=foo$bar00;"

cn.Open
rs.Open "select * from xxx..aa1", cn, adOpenKeyset, adLockOptimistic

Dim fieldsArray(1) As Variant
fieldsArray(0) = "intf"
fieldsArray(1) = "charf"
Dim values(1) As Variant
values(0) = 4
values(1) = "as"
rs.AddNew fieldsArray, values
rs.Update 
```

方法是如何`ADO GetString()`加快进程的，我们处理的是什么概念呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:03:45.240

您不需要在修改数据后立即更新/提交更改。初始化一组连贯的更改并推迟“真正的写入”直到系统确保所有修改都可以成功完成，这是数据库管理系统的一个重要特征。有关一些背景知识，请参阅[UpdateBatch以及有关代码和讨论的](http://msdn.microsoft.com/en-us/library/ee266587%28v=bts.10%29.aspx)[答案](https://stackoverflow.com/a/6576078/603855)。

**添加：**

虽然我不想鼓励多个问题：(`GetString()`和`GetRows()`) 是两种通过“幕后”循环来使**信息检索**更容易的方法。见[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676975%28v=vs.85%29.aspx)和[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675120%28v=vs.85%29.aspx)。

# php - 从 CActiveDataProvider 中获取属性值

> ID：14192404
> 
> 赞同：1
> 
> 时间：2013-01-07T08:40:25.623
> 
> 标签：php, yii

我想将项目的 id 存储在 html 数据属性内的 CActiveDataProvider 对象中。

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'feeds-in-group-grid',
        'dataProvider'=>$data,
        'filter'=>$filter,
        'emptyText'=>"Er zijn geen resultaten gevonden.",
        'columns'=>array(
            array(
                'name'=>'name',
                'htmlOptions'=>array(
                    'data-feed-id'=>1 HERE I NEED THE CURRENT FEED ID
                    )
                ),
            array(
                'class'=>'CButtonColumn',
                'template'=>'{update}',
            ),
        ),
        // 'buttons'=>array(
        //      'url'=>Yii::app()->createUrl('..&id=' . $data->id)
        //  ),
        'loadingCssClass'=>'feeds-group',
        'itemsCssClass'=>'feeds-item',
        'summaryText'=>'Deze groep bevat {count} feed(s)',
        'enablePagination'=>false,
    )
); 
```

有谁知道如何在 Yii 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:12:21.727

也许...

```
'htmlOptions'=>array(
                'data-feed-id'=>'$data->id'
                ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:07:41.427

您可以通过稍微修改 CDataColumn 类来做到这一点，这是一个 wiki 指南：

[CGridView：在列的 htmlOptions 中使用特殊变量 $data（即评估 htmlOptions 属性）](http://www.yiiframework.com/wiki/314/cgridview-use-special-variable-data-in-the-htmloptions-of-a-column-i-e-evaluate-htmloptions-attribute/)

# vba - 使用 VBA 的离线人员的 Lync 通知

> ID：14192417
> 
> 赞同：4
> 
> 时间：2013-01-07T08:41:24.353
> 
> 标签：vba, lync

我有一个 VBA，添加到我的 Outlook 中，它通过 Lync 发送消息。脚本如下所示。

* * *

```
Sub sendIM(toUsers As Variant, message As String)

    Dim msgr As CommunicatorAPI.IMessengerConversationWndAdvanced

   'Open messenger window and send message!!!!!
    Set msgr = messenger.InstantMessage(toUsers)
    msgr.SendText (message)
    Set msgr = Nothing 
```

* * *

它工作正常。如果有 10 个用户，在 toUsers 变量中，它会将消息作为“组”发送给所有人。

我想要的是，如果有一个用户*离线*，我想收到一些通知，说明这个人不在线。Messenger 显示“错误”，提示“无法邀请“n”个人加入会议”。

我可以获得一些状态，它会返回所有未发送消息的用户的详细信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-06T17:34:59.013

您这样做是错误的……与其创建您的分发列表然后查找例外情况，不如查看谁在线并将消息仅发送给这些人。

以下两个函数将返回所有 Lync 联系人及其当前状态的数组。使用数组来定位哪些人会包含在您的消息中。

```
Function LyncContactsStatus() As Variant

Dim appLync As CommunicatorAPI.Messenger

Dim LyncDirectory As CommunicatorAPI.IMessengerContacts

Dim LyncContact As CommunicatorAPI.IMessengerContact

Dim arrContacts() As Variant

Dim lngLoopCount As Long

    Set appLync = CreateObject("Communicator.UIAutomation")
        appLync.AutoSignin
    Set LyncDirectory = appLync.MyContacts

    ReDim arrContacts(LyncDirectory.Count - 1, 1)

    For lngLoopCount = 0 To LyncDirectory.Count - 1
        Set LyncContact = LyncDirectory.Item(lngLoopCount)
        arrContacts(lngLoopCount, 0) = LyncContact.FriendlyName
        arrContacts(lngLoopCount, 1) = LyncStatus(LyncContact.Status)

    Next lngLoopCount

    LyncContactsStatus = arrContacts

    Set appLync = Nothing

End Function

Function LyncStatus(IntStatus As Integer) As String

    Select Case IntStatus
        Case 1      'MISTATUS_OFFLINE
            LyncStatus = "Offline"
        Case 2      'MISTATUS_ONLINE
            LyncStatus = "Online"
        Case 6      'MISTATUS_INVISIBLE
            LyncStatus = "Invisible"
        Case 10     'MISTATUS_BUSY
            LyncStatus = "Busy"
        Case 14     'MISTATUS_BE_RIGHT_BACK
            LyncStatus = "Be Right Back"
        Case 18     'MISTATUS_IDLE
            LyncStatus = "Idle"
        Case 34     'MISTATUS_AWAY
            LyncStatus = "Away"
        Case 50     'MISTATUS_ON_THE_PHONE
            LyncStatus = "On the Phone"
        Case 66     'MISTATUS_OUT_TO_LUNCH
            LyncStatus = "Out to Lunch"
        Case 82     'MISTATUS_IN_A_MEETING
            LyncStatus = "In a meeting"
        Case 98     'MISTATUS_OUT_OF_OFFICE
            LyncStatus = "Out of office"
        Case 114    'MISTATUS_OUT_OF_OFFICE
            LyncStatus = "Do not disturb"
        Case 130    'MISTATUS_IN_A_CONFERENCE
            LyncStatus = "In a conference"
        Case Else
            LyncStatus = "Unknown"
    End Select
End Function 
```

# jquery - 如何在 jquery datepicker 中获取此格式 29-Jun-12 12:00:00 AM

> ID：14192418
> 
> 赞同：0
> 
> 时间：2013-01-07T08:41:26.723
> 
> 标签：jquery, datepicker

我正在使用以下日期选择器控制

```
$(function() {
        $("#datepicker").datepicker({
            dateFormat : "dd/mm/yy",
            onSelect : function(date, picker) {
                getCasePackCalendar(date); // call you function here
            }
        });
    }); 
```

我希望日期格式是这样的：`29-Jun-12 12:00:00 AM`
如何在 jQuery 中得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:49:37.253

```
$(function() {
        $("#datepicker").datepicker({
            dateFormat : "d-M-y",// Change the format
            onSelect : function(date, picker) {
                getCasePackCalendar(date);
            }
        });
    }); 
```

[你可以在这里](http://jqueryui.com/resources/demos/datepicker/date-formats.html)找到 datepicker 的不同日期格式

至于时间，jquery datepicker 不支持时间，或许你可以试试其他[类似这样的插件](http://www.ama3.com/anytime/)

[演示日期](http://jsfiddle.net/kGjdL/98/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:33:03.810

试试这个：

```
 $( "#datepicker" ).datepicker({
      dateFormat: "dd-M-yy",
      onSelect:function(date, picker)
        {               
            var currentdate = new Date();
            var hh = currentdate.getHours();
            var mm = currentdate.getMinutes();
            var ss = currentdate.getSeconds();
            var tt = "";

            if(hh >= 12)
            {
                tt = "P.M.";
                hh = hh-12;
            }
            else
            {
                tt = "A.M.";
            }       
            $(this).val(date+" "+hh+":"+mm+":"+ss+" "+tt);
        }
  }); 
```

检查这个小提琴：http: [//jsfiddle.net/WC38m/7/](http://jsfiddle.net/WC38m/7/)

# iphone - 在 Documents 文件夹中写入文件列表并保存在内存中

> ID：14192419
> 
> 赞同：0
> 
> 时间：2013-01-07T08:41:30.550
> 
> 标签：iphone, ios, nsarray, save

我有几个文件要保存在 Documents 文件夹中，这个文件列表放在一个可变数组中。文件必须保留在 iPhone 应用程序的内存中也关闭。第一个文件已保存，但是当我更改视图控制器然后返回时，可变数组变为空。如何将数据保存在 Documents 文件夹中的内存中？

在 DetailExpViewController.h

```
 //....
  @property (nonatomic, strong)NSMutableArray *arrayFavorites;
  @property (nonatomic, assign)BOOL existsArray;
  //....
  @end 
```

在 DetailExpViewController.m

```
- (void)viewDidLoad
 {
      //.....
      if (!self.existsArray){
          /*when I load the view controller this array is always nil even 
            has already  been created*/

           self.arrayFavorites =[[NSMutableArray alloc]init];
     }else{
          NSLog(@"The array exists");
      }
      //....
 }

 -(void) addFavorites:(id)sender{

     //.....
   NSArray *paths = NSSearchPathForDirectoriesInDomains
  (NSDocumentDirectory, NSUserDomainMask, YES);
   NSString *documentsDirectory = [paths objectAtIndex:0];

   NSString * text= [NSString stringWithFormat:@"%@.txt",self.name];
   NSString * documentsPath = [documentsDirectory stringByAppendingPathComponent: text];

   [self.arrayFavorites addObject:text];
   [self.arrayFavorites writeToFile:documentsPath atomically:YES];
   self.existsArray=YES;

   for (id obj in self.arrayFavorites) {

    NSLog(@"%@", self.arrayFavorites);
    //only writes the file at the time, then it is deleted

  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:53:26.040

[你](http://mobiledevelopertips.com/data-file-management/read-and-write-array-dictionary-and-other-collections-to-files.html)可以这样。`save NSArray`_`Document Directory`

**注**：`saving`还有`retrieving` `filename`遗体`same`。

它也`easy retrieve` `saved` `array`来自`doc dir`。

**编辑**：如果更好`data`用。`complex and large``SQLITE`

* * *

**编辑**：在`view Controller's`添加到`favourite`按钮中单击`event`：

```
 //check favourite saved in doc dir
 if(!saved) //not saved
   //NSMutableArray has not data first time
   //[NSMutableArray addObject:newFavourite];
   //save new data in doc dir
 else // saved
   //firstly retrieve data from doc dir as NSMutableArray
   //[NSMutableArray addObject:newFavourite];
   //Now save again NSMutableArray in doc dir. 
```

通过`following`这些`instruction`文件保留`permanently`在`Documents folder`.

# javascript - 如何获取不同javascript文件中变量的值？

> ID：14192421
> 
> 赞同：2
> 
> 时间：2013-01-07T08:41:42.897
> 
> 标签：javascript, jquery, scope

**测试.html**

```
 <script src="jsv/test1.js"></script>
 <script src="jsv3/test2.js"></script> 
```

**test1.js：**

```
(function ($) {
  var settings = {
    taphold_threshold: 750,
    hold_timer: null,
    tap_timer: null
  };)
}; 
```

**test2.js：**

```
var Navigation = {
  init: function () {
    self = this;
    $('#button').live(tapMode, function () {
      alert(settings[taphold_threshold]);
    });
  }
} 
```

我想获得设置的值：taphold_threshold，但似乎我无法通过简单地提醒它来获得该值。test2.js 是调用者，test1.js 是被调用者。这应该是一些范围问题。如何获得价值（750）？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:45:59.060

问题确实是范围 -`settings`将在闭包之外不可用的匿名范围内。

您可以将**test1**更改为具有某种“命名空间” - 说类似`global`（尽管我个人会使用比全局更具描述性的名称）。

```
var global = {};
global.settings = {
    taphold_threshold: 750,
    hold_timer: null,
    tap_timer: null
  }; 
```

您可以使用来自**test2的：**

```
alert(global.settings.taphold_threshold); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:11:46.030

您的代码暗示了命名空间模式，但略显不足。

你可能想考虑这样的事情

```
var TAP = (function($) {//functional namespace
  var settings = {
    hold_threshold: 750,
    hold_timer: null,
    timer: null
  };
  var setSettings = function(s) {
    settings = $.extend(settings, s);
  };
  var getSettings = function() {
    return settings;
  };
  return {
    set: setSettings,
    get: getSettings
  };
})(jQuery); 
```

因此，`TAP`具有私有成员`settings`和公共成员`set()`，并且`get()`. 您将看到可以轻松添加更多私有和公共成员。

现在，您有一种机制可以从 TAP 范围内的任何位置设置和获取 TAP 设置：

```
TAP.set({hold_threshold: 500});

var Navigation = {
  init: function () {
    self = this;
    $('#button').live(tapMode, function () {
      alert(settings[TAP.get().hold_threshold]);
    });
  }
} 
```

作为`TAP`全局命名空间中的成员，它的公共方法在所有范围内都可用。

更典型的是，您将使用 MODULE 模式，它只将**一个**PROJECT 成员放入全局命名空间，包含任意数量的 MODULE，每个 MODULE 包含任意数量的功能性命名空间，例如：

```
var MYPROJECT = {};//global
MYPROJECT.MODULE1 = {};
MYPROJECT.MODULE1.TAP= (function($) {
  var settings = {
    hold_threshold: 750,
    hold_timer: null,
    timer: null
  };
  var setSettings = function(s) {
    settings = $.extend(settings, s);
  };
  var getSettings = function() {
    return settings;
  };
  return {
    set: setSettings,
    get: getSettings
  };
})(jQuery); 
```

按照惯例，MYPROJECT、它的 MODULES 和它的功能性命名空间都是大写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:48:40.370

由于在闭包内的**test1.js**`var settings`中定义，因此存在问题。

 **您可能希望将设置变量定义为

```
window.settings = ... 
```

或者

```
window['settings'] = ... 
```

所以现在`settings`将被定义为一个全局变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T08:56:25.730

`settings`嵌套在闭包中，无法从外部访问。一种解决方案是删除闭包，使其成为全局对象。另一种解决方案是将其分配给窗口对象，与使变量全局变量相同，但这在闭包内部起作用。这是一个例子：

```
(function ($) {
    window.my_namespace = window.my_namespace || {};
    window.my_namespace.settings = {
        taphold_threshold: 750,
        hold_timer: null,
        tap_timer: null
    };
});

var Navigation = {
    init: function () {
        self = this;
        $('#button').live(tapMode, function () {
            alert(my_namespace.settings[taphold_threshold]);
        });
    }
}; 
```**

# java - 更改JTree中某个节点的图标？

> ID：14192424
> 
> 赞同：1
> 
> 时间：2013-01-07T08:42:32.953
> 
> 标签：java, swing, icons, jtree, treecellrenderer

我有一个 JTree，它的节点是从 DefaultMutableTreeNode 驱动的。每个节点都可以验证或不验证。起初所有节点的图标都是相同的，但是，当我选择它们并按下验证按钮时，我将更改验证节点的**图标** 。**我希望能够在每个节点上单击和写入，因此我不能使用 JLabel 来显示图标**。我编写了以下代码，但它返回 NULLException。

```
class CustomIconRenderer extends DefaultTreeCellRenderer {
        ImageIcon defaultIcon;
        ImageIcon specialIcon;
        ImageIcon closeIcon;
        static DefaultTreeModel model;
        static myDefaultMutableTreeNode root;

        public CustomIconRenderer() 
        {
            openIcon = new ImageIcon(CustomIconRenderer.class.getResource("icons/question.png"));
            closeIcon = new ImageIcon(CustomIconRenderer.class.getResource("icons/Target-New-Logo.jpg"));
            setLeafIcon(closeIcon);
        }

        @Override
        public Component getTreeCellRendererComponent(JTree tree,Object value,boolean sel,boolean expanded,boolean leaf,int row,boolean hasFocus)
        {
               super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
               Object nodeObj = ((DefaultMutableTreeNode)value).getUserObject();

          Check_each_nodes_are_verified_change_the_icon();
          return this;
        }
    }

    public class myDefaultMutableTreeNode extends DefaultMutableTreeNode{

        private static int id=0;
        private int nodeid;
        private int verify;
        private int depth;

    } 
```

百万谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:54:43.170

[DefaultTreeCellRenderer](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html#openIcon)有设置器，允许设置打开图标、关闭图标和叶子图标。在被覆盖的 getTreeCellRendererComponent 中，在派生的渲染器类中根据需要设置这些图标，然后返回由 super.getTreeCellRendererComponent 返回的图标。当您在渲染之前为每个节点设置时，您可以轻松地为特定节点设置一些不同的图标。

# android - 如何显示段落 某段 在 TextView 内不显示 ?

> ID：14192435
> 
> 赞同：0
> 
> 时间：2013-01-07T08:43:18.950
> 
> 标签：android, android-layout

只是想知道我需要如何格式化 android.widget.TextView 文本，以便

```
 <p> does not show </p>  // the <p> symbol should not be shown. 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:45:12.157

来自 Html 类。您可以使用，

```
Html.FromHtml(<Html String>); 
```

还支持标签类型，请看这个..

[http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

**例子：**

```
String htmlString = "<p> does not show </p>";
textView.setText(Html.FromHtml(htmlString)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T08:45:15.627

用这个

```
textview.setText(Html.fromHtml("YOUR STRING")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:46:16.890

将字符串定义为：

```
<resource>
    <string name="your_string">This is an <p>paragraph</p> text demo for TextView.</string>
</resources> 
```

# tapestry - 单击挂毯文本字段时如何显示数字键盘

> ID：14192439
> 
> 赞同：1
> 
> 时间：2013-01-07T08:43:21.423
> 
> 标签：tapestry

在智能手机中为电话号码字段显示数字键盘的方法是什么。

在这里我搜索并发现

type="tel" & type="number" 会解决的

但在挂毯中它显示错误：

无法将“tel”解析为组件类名称 无法将“数字”解析为组件类名称

任何人都可以告诉我当用户来到并点击电话号码字段时，数字键盘需要显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:29:31.393

您使用的是哪个版本的 Tapestry？

```
 <t:textfield value="value" placeholder="Number field"
    label="Number field" type="number" /> 
```

在 5.3.6 中对我来说工作正常，并在 iPad 上打开数字键盘。

根据[此](https://issues.apache.org/jira/browse/TAP5-1787)错误报告，这仅适用于 5.3.2 及更高版本，因此您可能需要升级 Tapestry 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:54:22.147

您的错误表明挂毯试图插入`type="number"`不存在的名为“数字”的挂毯组件。

在 Tapestry 命名空间`type`中是一个保留属性，用于指示应该将 type="coponentName" 的标记的呈现委托给哪个组件。

所以我假设你的 tml 片段看起来像：

```
<t:textfield type="number" value="yourValuePropery" .../> 
```

这意味着该类型将被读取为 t:type 并因此导致您的异常。

您可以改用以下方法来解决此问题：

你的 *.tml

```
<input t:id="myNumberField" type="number"/> 
```

你的 *.java

```
@Component(id="myNumberField", parameters={"value=yourValuePropery"})
private TextField myNumberField; 
```

# windows - 什么设备类别是电视或投影仪？

> ID：14192443
> 
> 赞同：0
> 
> 时间：2013-01-07T08:43:38.820
> 
> 标签：windows, winapi, device, guid

我想弄清楚电视或投影仪在 Windows 操作系统中属于什么类和 GUID？

其中有 20 多个，我不确定电视或投影仪属于哪一个。这是完整[列表](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553426)

我怀疑它是以下 HIDClass、Monitor、Media 等之一。

不要关闭这个：我需要知道这一点，因为知道电视是什么类别会告诉我我需要为函数 SetupDiGetClassDevs() 使用什么 GUID。这是一个相关的编程问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T18:59:45.930

以下是 HID 和 USB 设备 API 之间的区别：

```
API 命名空间访问类型

USB Windows.Devices.Usb 独占读取和独占写入
HID Windows.Devices.HumanInterfaceDevice 共享读取和独占写入

```

以下是设备特定工具栏的一些 CLSID：

```
CLSID 设备
{29c93b94-45ef-44b3-8ad5-5ec104e0f9c6} NEC LCD 投影仪工具栏

{b686afa8-7ca2-4c19-b9a8-ed364f126907} AOL 电视工具栏

```

**参考**

*   [适用于内部设备的 Windows 应用商店设备应用](https://msdn.microsoft.com/en-us/library/windows/hardware/dn265152)

*   [Windows Media SDK，如何确定设备是媒体中心设备？](http://www.mofeel.net/160-microsoft-public-windowsmedia-sdk/1079.aspx)

*   [Microsoft Windows CE 3.0 上的多媒体流](https://msdn.microsoft.com/en-us/library/ms834433.aspx)

*   [CLSID 列表：电视](http://www.systemlookup.com/lists.php?list=1&type=name&search=television&s=)

# internet-explorer - Internet Explorer 10“损坏的图像”

> ID：14192445
> 
> 赞同：1
> 
> 时间：2013-01-07T08:44:00.630
> 
> 标签：internet-explorer, internet-explorer-10

由于随机原因，图像拒绝在 IE10 中加载（仅在某些请求中）。当我查看来自开发工具的图像报告时，它显示“图像损坏”。这些图像只是普通的 img 标签，似乎在其他任何地方都可以正常工作。有没有人见过类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T21:23:40.900

我遇到了同样的问题，结果发现我交付的资产之一应该是 .jpg 并具有 .jpg 文件扩展名，实际上是 .png！我更改了文件扩展名（当然，我的标记中图像路径中的文件扩展名也更改了）并且效果很好。然后我打开它并将其导出为 jpg，因为它本来应该是这样的。现在完美运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:06:48.867

如果没有具体的例子，我真的不能提供太多建议，但我可以告诉你，我使用 IE10 已经有一段时间了，只有当我的电脑因为我滥用它进行大量计算而崩溃时，我才会遇到这个问题。

通常，获取图像源并尝试将其加载到新选项卡中可能会有所帮助。这可能允许浏览器显示详细说明问题的正确错误页面。例如，可能标头设置错误。

另一件有帮助的事情是使用开发人员工具的网络选项卡的详细视图查看发送和接收的标头。如果您发现任何异常情况，这可能是导致问题的原因。

对于它的价值，我从来没有听说过开发工具只是像你描述的那样说“损坏的图像”，所以如果你能提供问题的截图真的会有所帮助。然而，总而言之，它听起来更像是浏览器错误而不是代码问题，因此它可能更适合 Microsoft 的错误报告网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:39:40.200

这不是一个很好的答案，但我一直遇到同样的问题。重现该问题的一种不确定的方法是访问 imgur.com 并在单独的选项卡中打开图像。如果您打开大约 10 张图片，可以肯定至少有一张不会加载。如果加载了所有图像，只需继续打开更多，就会弹出这个问题。此外，此问题本身也表现为动画 .gif 中的丢弃图像。

# postgresql - 基于时间和日期在 PostgreSQL 时态数据库中创建子集

> ID：14192446
> 
> 赞同：1
> 
> 时间：2013-01-07T08:44:04.433
> 
> 标签：postgresql, date, time, subset

我有一个时态数据库，我想根据特定的时间和日期创建一个子集。例如，我想要一个从 2007-09-29 00:05 到 2007-09-29 01:30 的子集。

示例表 s_2：

```
 temp    DateeTIMEE
1     -1.64 2007-09-29 00:01:09
2     -1.76 2007-09-29 00:03:09
3     -1.83 2007-09-29 00:05:09
4     -1.86 2007-09-29 00:07:09
5     -1.94 2007-09-29 00:09:09
6     -1.87 2007-09-29 00:11:09
7     -1.87 2007-09-29 00:13:09
8     -1.80 2007-09-29 00:15:09
9     -1.64 2007-09-29 00:17:09
10    -1.60 2007-09-29 00:19:09
11    -1.90 2007-09-29 00:21:09
12    -2.08 2007-09-29 00:23:09
13    -1.94 2007-09-29 00:25:09
14    -2.12 2007-09-29 00:27:09
15    -1.87 2007-09-29 00:29:09
16    -2.18 2007-09-29 00:31:09
17    -1.98 2007-09-29 00:33:09
18    -1.73 2007-09-29 00:35:09
19    -1.84 2007-09-29 00:37:09
20    -2.04 2007-09-29 00:39:09
21    -1.86 2007-09-29 00:41:09
22    -1.94 2007-09-29 00:43:09
23    -1.77 2007-09-29 00:45:09
24    -1.78 2007-09-29 00:47:09
25    -1.50 2007-09-29 00:49:09
26    -1.46 2007-09-29 00:51:09
27    -1.72 2007-09-29 00:53:09
28    -1.67 2007-09-29 00:55:09
29    -1.56 2007-09-29 00:57:09
30    -1.69 2007-09-29 00:59:09
31    -1.97 2007-09-29 01:01:09
32    -1.79 2007-09-29 01:03:09
33    -1.79 2007-09-29 01:05:09
34    -1.84 2007-09-29 01:07:09
35    -1.91 2007-09-29 01:09:09
36    -1.87 2007-09-29 01:11:09
37    -1.98 2007-09-29 01:13:09
38    -1.83 2007-09-29 01:15:09
39    -1.88 2007-09-29 01:17:09
40    -1.88 2007-09-29 01:19:09
41    -1.78 2007-09-29 01:21:09
42    -1.78 2007-09-29 01:23:09
43    -1.66 2007-09-29 01:25:09
44    -1.70 2007-09-29 01:27:09
45    -1.46 2007-09-29 01:29:09
46    -1.36 2007-09-29 01:31:09
47    -1.40 2007-09-29 01:33:09
48    -1.34 2007-09-29 01:35:09
49    -1.34 2007-09-29 01:37:09
50    -1.30 2007-09-29 01:39:09
51    -1.36 2007-09-29 01:41:09
52    -1.40 2007-09-29 01:43:09
53    -1.43 2007-09-29 01:45:09
54    -1.38 2007-09-29 01:47:09
55    -1.40 2007-09-29 01:49:09
56    -1.42 2007-09-29 01:51:09
57    -1.47 2007-09-29 01:53:09
58    -1.66 2007-09-29 01:55:09
59    -1.84 2007-09-29 01:57:09
60    -1.92 2007-09-29 01:59:09
61    -1.88 2007-09-29 02:01:09
62    -2.11 2007-09-29 02:03:09
63    -1.91 2007-09-29 02:05:09
64    -2.04 2007-09-29 02:07:09
65    -1.94 2007-09-29 02:09:09
66    -1.92 2007-09-29 02:11:09
67    -1.80 2007-09-29 02:13:09
68    -1.74 2007-09-29 02:15:09
69    -1.74 2007-09-29 02:17:09
70    -1.76 2007-09-29 02:19:09
71    -1.74 2007-09-29 02:21:09
72    -1.80 2007-09-29 02:23:09
73    -1.80 2007-09-29 02:25:09
74    -1.80 2007-09-29 02:27:09
75    -1.82 2007-09-29 02:29:09
76    -1.90 2007-09-29 02:31:09
77    -1.93 2007-09-29 02:33:09
78    -2.06 2007-09-29 02:35:09
79    -2.08 2007-09-29 02:37:09
80    -1.95 2007-09-29 02:39:09
81    -1.98 2007-09-29 02:41:09
82    -2.32 2007-09-29 02:43:09
83    -1.86 2007-09-29 02:45:09
84    -1.97 2007-09-29 02:47:09
85    -1.64 2007-09-29 02:49:09
86    -2.00 2007-09-29 02:51:09
87    -1.48 2007-09-29 02:53:09
88    -1.74 2007-09-29 02:55:09
89    -1.85 2007-09-29 02:57:09
90    -1.82 2007-09-29 02:59:09
91    -1.82 2007-09-29 03:01:09
92    -1.92 2007-09-29 03:03:09
93    -1.80 2007-09-29 03:05:09
94    -1.54 2007-09-29 03:07:09
95    -1.36 2007-09-29 03:09:09
96    -1.50 2007-09-29 03:11:09
97    -1.59 2007-09-29 03:13:09
98    -1.60 2007-09-29 03:15:09
99    -1.58 2007-09-29 03:17:09
100   -1.81 2007-09-29 03:19:09
101   -2.16 2007-09-29 03:21:09
102   -1.97 2007-09-29 03:23:09
103   -1.94 2007-09-29 03:25:09
104   -2.29 2007-09-29 03:27:09
105   -2.46 2007-09-29 03:29:09
106   -2.42 2007-09-29 03:31:09
107   -2.34 2007-09-29 03:33:09
108   -2.38 2007-09-29 03:35:09
109   -2.44 2007-09-29 03:37:09
110   -2.28 2007-09-29 03:39:09
111   -2.24 2007-09-29 03:41:09
112   -2.26 2007-09-29 03:43:09 
```

预期结果，新子集：

```
 3     -1.83 2007-09-29 00:05:09
    4     -1.86 2007-09-29 00:07:09
    5     -1.94 2007-09-29 00:09:09
    6     -1.87 2007-09-29 00:11:09
    7     -1.87 2007-09-29 00:13:09
    8     -1.80 2007-09-29 00:15:09
    9     -1.64 2007-09-29 00:17:09
    10    -1.60 2007-09-29 00:19:09
    11    -1.90 2007-09-29 00:21:09
    12    -2.08 2007-09-29 00:23:09
    13    -1.94 2007-09-29 00:25:09
    14    -2.12 2007-09-29 00:27:09
    15    -1.87 2007-09-29 00:29:09
    16    -2.18 2007-09-29 00:31:09
    17    -1.98 2007-09-29 00:33:09
    18    -1.73 2007-09-29 00:35:09
    19    -1.84 2007-09-29 00:37:09
    20    -2.04 2007-09-29 00:39:09
    21    -1.86 2007-09-29 00:41:09
    22    -1.94 2007-09-29 00:43:09
    23    -1.77 2007-09-29 00:45:09
    24    -1.78 2007-09-29 00:47:09
    25    -1.50 2007-09-29 00:49:09
    26    -1.46 2007-09-29 00:51:09
    27    -1.72 2007-09-29 00:53:09
    28    -1.67 2007-09-29 00:55:09
    29    -1.56 2007-09-29 00:57:09
    30    -1.69 2007-09-29 00:59:09
    31    -1.97 2007-09-29 01:01:09
    32    -1.79 2007-09-29 01:03:09
    33    -1.79 2007-09-29 01:05:09
    34    -1.84 2007-09-29 01:07:09
    35    -1.91 2007-09-29 01:09:09
    36    -1.87 2007-09-29 01:11:09
    37    -1.98 2007-09-29 01:13:09
    38    -1.83 2007-09-29 01:15:09
    39    -1.88 2007-09-29 01:17:09
    40    -1.88 2007-09-29 01:19:09
    41    -1.78 2007-09-29 01:21:09
    42    -1.78 2007-09-29 01:23:09
    43    -1.66 2007-09-29 01:25:09
    44    -1.70 2007-09-29 01:27:09
    45    -1.46 2007-09-29 01:29:09 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:51:42.943

这是非常基本的 SQL；我强烈建议您查看 PostgreSQL 手册，特别是[日期/时间函数和运算符](http://www.postgresql.org/docs/current/static/functions-datetime.html)部分以及[PostgreSQL 教程](http://www.postgresql.org/docs/current/static/tutorial.html)。

您想要的基本用法是：

```
SELECT * FROM my_table
WHERE "DateeTIMEE" BETWEEN '2007-09-29 00:05:09' AND '2007-09-29 01:29:09'; 
```

或者，只需使用：

```
SELECT * FROM my_table
WHERE "DateeTIMEE" >= '2007-09-29 00:05:09' AND "DateTIMEE" <= '2007-09-29 01:29:09'; 
```

请注意，我已经双引号`"DateTIMEE"`。这是因为 PostgreSQL 会将标识符小写，除非它们被引用，而且您似乎已经用混合大小写来定义它。如果 Pg 抱怨该列不存在，也许您在没有双引号的情况下定义了它并且它被小写了。如果您有问题，请尝试不使用双引号。

# c# - 交易中的僵尸检查 - 如何重现它？

> ID：14192447
> 
> 赞同：0
> 
> 时间：2013-01-07T08:44:04.473
> 
> 标签：c#, .net, sql

我在生产中遇到 SqlTransaction.Zombie 异常（在 .NET Windows 应用程序中，而不是 ASP.NET 应用程序中）。我在下面的文章中得到了如何以及何时抛出异常的答案。在生产中，一个服务器应用程序可用，它执行数据库操作，并且可能有多个客户端应用程序与服务器交互。

[http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/08/24/zombie-check-on-transaction-error-this-sqltransaction-has-completed-it-is-no-longer-usable。 aspx](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/08/24/zombie-check-on-transaction-error-this-sqltransaction-has-completed-it-is-no-longer-usable.aspx)

在文章中，给出了显式关闭的连接。我的问题是在现实世界的应用程序中关闭连接的可能性是什么（在少数情况下只发生在生产中）？我想听听重现它的可能场景。

由于异常，其中一台服务器正在停止。请帮忙。

SP是否有可能意外关闭连接？如果是这样，请做描述。提前致谢。

# wcf - wsDualHttpBinding ClientBaseAddress 和防火墙

> ID：14192453
> 
> 赞同：2
> 
> 时间：2013-01-07T08:44:15.760
> 
> 标签：wcf

我计划将 wsDualHttpBinding 用于带有回调的 WCF 服务。客户端将是通过 Internet 与服务通信的 Windows 窗体应用程序。显然我无法控制客户端的防火墙，所以我想知道在客户端设置 ClientBaseAddress 的正确方法是什么？

现在在我的初始测试中，我在同一台电脑上运行服务和客户端，我正在设置绑定如下

```
Dim binding As System.ServiceModel.WSDualHttpBinding = Struct.Endpoint.Binding
binding.ClientBaseAddress = New Uri("http://localhost:6667") 
```

但是我感觉这在通过 Internet 部署时不起作用，因为“localhost”不会转换为机器地址（更不用担心 NAT 转换）并且该端口可能被客户端防火墙阻止。

处理远程客户端回调的基地址的正确方法是什么？

有人告诉我，如果我没有指定 ClientBaseAddress，那么 WCF 基础设施会在端口 80 处创建一个默认客户端基址，用于来自服务的传入连接。由于端口 80 通常对防火墙开放，因此应该可以正常工作。

所以只要告诉我win form wcf客户端应用程序何时运行然后我如何打开我的自定义端口，如“6667”，并指导我应该使用什么库或什么方法，结果响应应该来自客户端路由器到电脑和防火墙不会阻止任何东西。请与现实生活场景讨论这个问题人们如何在现实生活中处理这种情况。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:54:28.857

正确的方法是使用 TCP 传输而不是 HTTP 传输。HTTP 上的双工通信需要两个 HTTP 连接——一个从客户端打开到服务器（没关系），第二个从服务器打开到客户端。这仅适用于您可以完全控制两端的情况。仅仅通过猜测要使用的地址就无法避免太多的复杂情况，例如：

*   必须配置本地 Windows 或第三方防火墙
*   应用程序运行权限 - 默认情况下不允许监听 HTTP，除非 UAC 已关闭或应用程序以管理员身份运行。您必须允许通过 netsh 或 httpcfg（Windows XP 和 2003）监听端口——这又需要管理员权限。
*   端口可能已被另一个应用程序使用。在 80 的情况下，任何本地 Web 服务器都可以使用它 - 例如 IIS。
*   专用网络和网络设备 - 如果您的客户端计算机位于 NAT 之后，则必须配置端口转发，但是如果您有两台计算机在同一个专用网络上运行您的应用程序怎么办？您不能从同一个传入端口转发到两台机器。

只有当您可以控制整个基础架构时，才能避免所有这些问题。这就是为什么 HTTP 双工通信主要用于 Intranet 方案的原因，以及为什么例如 Silverlight 提供另一种实现，其中不创建第二个连接，Silverlight 客户端而是连续轮询服务器以检查是否有任何可用的回调。

TCP 传输只需要从客户端到服务器的单个连接，因为 TCP 协议本身是双工的，因此服务器可以通过相同的连接回调客户端。当您部署公共服务时，您通常可以控制服务器端的基础架构，以便您可以对配置进行必要的更改以使其正常工作。

我想这也回答了你[之前的问题](https://stackoverflow.com/questions/14175022/wsdualhttpbinding-and-clientbaseaddress-with-duplex-connecton)。

# jquery - 如何删除anythingslider URL中的主题标签，它适用于FF，Chrome，但不适用于IE浏览器？

> ID：14192454
> 
> 赞同：1
> 
> 时间：2013-01-07T08:44:15.760
> 
> 标签：jquery, internet-explorer, safari, hashtag, anythingslider

使用任何滑块时，如何删除 URL 中的主题标签，例如 #&panel1-1？我已经设置了

```
hashTags: false 
```

然而，它仍然出现在 IE 和 safari 浏览器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:03:07.013

问题解决了，，，，它使主题标签仍然存在于URL中的memcache ..我清除了memcache，一切正常

# android - 使用 Android 搜索配置执行搜索期间出现 java.lang.illegalStateException

> ID：14192455
> 
> 赞同：0
> 
> 时间：2013-01-07T08:44:17.913
> 
> 标签：android, search, illegalstateexception

我正在尝试在我的 android 应用程序中实现搜索。我已按照教程建议的步骤使搜索成为可能。我已经使用按钮实现了搜索。当我按下按钮时，并非总是如此，但有时我的 Logcat 会显示此错误并且应用程序会停止。这并不总是发生，但有时，我不知道为什么会发生这种情况，就好像这是一个问题而不是当我单击搜索按钮时，应该始终显示错误。

```
01-07 13:32:54.759: E/AndroidRuntime(11826): FATAL EXCEPTION: main
01-07 13:32:54.759: E/AndroidRuntime(11826): java.lang.IllegalStateException: Could not execute method of the activity
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.view.View$1.onClick(View.java:3050)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.view.View.performClick(View.java:3517)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.view.View$PerformClick.run(View.java:14155)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.os.Handler.handleCallback(Handler.java:605)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.os.Looper.loop(Looper.java:137)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.ActivityThread.main(ActivityThread.java:4508)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at java.lang.reflect.Method.invokeNative(Native Method)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at java.lang.reflect.Method.invoke(Method.java:511)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at dalvik.system.NativeStart.main(Native Method)
01-07 13:32:54.759: E/AndroidRuntime(11826): Caused by: java.lang.reflect.InvocationTargetException
01-07 13:32:54.759: E/AndroidRuntime(11826):    at java.lang.reflect.Method.invokeNative(Native Method)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at java.lang.reflect.Method.invoke(Method.java:511)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.view.View$1.onClick(View.java:3045)
01-07 13:32:54.759: E/AndroidRuntime(11826):    ... 11 more
01-07 13:32:54.759: E/AndroidRuntime(11826): Caused by: java.lang.OutOfMemoryError
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.Bitmap.nativeCreate(Native Method)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:543)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:518)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:370)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.content.res.Resources.loadDrawable(Resources.java:1935)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.content.res.Resources.getDrawable(Resources.java:664)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.ApplicationPackageManager.getDrawable(ApplicationPackageManager.java:580)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.content.pm.PackageItemInfo.loadIcon(PackageItemInfo.java:140)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.ApplicationPackageManager.getApplicationIcon(ApplicationPackageManager.java:637)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.SearchDialog.updateSearchAppIcon(SearchDialog.java:438)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.SearchDialog.updateUI(SearchDialog.java:391)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.SearchDialog.show(SearchDialog.java:278)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.SearchDialog.doShow(SearchDialog.java:230)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.SearchDialog.show(SearchDialog.java:212)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.SearchManager.startSearch(SearchManager.java:526)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at  android.app.SearchManager.startSearch(SearchManager.java:503)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.Activity.startSearch(Activity.java:3055)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at android.app.Activity.onSearchRequested(Activity.java:3018)
01-07 13:32:54.759: E/AndroidRuntime(11826):    at com.vahzay.android.smstrove.ListMessages.onsearchClick(ListMessages.java:150)
01-07 13:32:54.759: E/AndroidRuntime(11826):    ... 14 more 
```

这是导致此错误的代码段

```
 public void onsearchClick(View v) {

    if (v.getId() == R.id.searcher) {
        Log.i("search has been clicked", "show");

        // this method is used to call the search activity from the
        // listmessages activity no intent is used as its need a special
        // functionality
        onSearchRequested(); // line no 150
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:48:14.777

发生此崩溃的原因`Out of Memory Exception`是您的日志中给出了。搜索图标未正确加载。要有效地使用位图，请查看[此](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

# xml - 致命错误：未捕获的 SoapFault 异常：[HTTP] 获取 http 标头时出错

> ID：14192459
> 
> 赞同：1
> 
> 时间：2013-01-07T08:44:38.287
> 
> 标签：xml, fatal-error, php, soapfault

我正在尝试使用 XML 输出“Hello World”，但在我的 php 页面中出现以下异常：

> 致命错误：未捕获的 SoapFault 异常：[HTTP] Error Fetching http headers in C:\wamp\www\Web_Service\SampleXML\index.php:4 堆栈跟踪：
> #0 [内部函数]：SoapClient->_ *doRequest('<? xml version="...', 'http://localhos...', 'urn:localhost-s...', 1, 0)
> #1 [内部函数]: SoapClient->* _call('getHelloWorld' , Array)
> #2 C:\wamp\www\Web_Service\SampleXML\index.php(4): SoapClient->getHelloWorld()
> #3 {main} 在 C:\wamp\www\Web_Service\SampleXML\index.php 中抛出在第 4 行

索引.php

```
<?php
    $client = new SoapClient('service.wsdl');
    $response = $client->getHelloWorld(); 
    echo $response;
?> 
```

服务.wsld

```
<?xml version = '1.0' encoding = 'UTF-8' ?>

<definitions name = "Web Service"
    targetNamespace = 'http://example.org/service'
    xmlns:tns = 'http://example.org/service'
    xmlns:soap = 'http://schemas.xmlsoap.org/wsdl/soap/'
    xmlns:xsd = 'http://www.w3.org/2001/XMLSchema'
    xmlns:soapenc = 'http://schemas.xmlsoap.org/soap/encoding/'
    xmlns:wsdl = 'http://schemas.xmlsoap.org/wsdl/'
    xmlns = 'http://schemas.xmlsoap.org/wsdl/' >

    <!-- Message -->
    <message name='getHelloWorld'>
        <part name='response' type='xsd:string' />
    </message>

    <!-- Operations offered -->
    <portType name = 'PortType'>
        <operation name = 'getHelloWorld'>
                <!-- Target Name Space -->
                <output message = 'tns:getHelloWorld' />
        </operation>
    </portType>

    <!-- Binding Element -->
    <binding name = 'Binding' type = 'tns:PortType'>
        <soap:binding style='rpc' transport='http://schemas.xmlsoap.org/soap/http' />
        <operation name='getHelloWorld'>
            <soap:operation soapAction = 'urn:localhost-service#getHelloWorld' />

        <!-- Output -->
        <output>
            <soap:body use='encoded' namespace='urn:locahost-service' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/' />
        </output>
        </operation>
    </binding>

    <!-- Define the service -->
    <service name='Service'>
        <port name='Port' binding='Binding' >
            <!-- Location -->
            <soap:address location='http://localhost/Web_Service/SampleXML/soap-server.php' />
        </port>
    </service>

</definitions> 
```

肥皂-server.php

```
<?php

    function getHelloWorld() {
        return "Hello World";
    }

    ini_set("soap.wsdl_cache_enabled", "0");

    $server = new SoapServer('service.wsdl');
    $server->addFunction("getHelloWorld");    
    $server->handle();

?> 
```

我错过了代码中的某些内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T13:59:24.190

尝试设置这条线，

```
ini_set("default_socket_timeout", 200); 
```

或者把它放在 php.ini

```
 default_socket_timeout = 200 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T16:53:10.587

我想为时已晚，但我有同样的问题。我尝试了套接字超时，但它不起作用。我的问题是客户端和服务器在同一个物理服务器中。当客户端代码在同一个物理服务器中工作时，我得到了这个错误，但是，将相同的客户端代码移动到我的本地主机，请求服务器，（客户端和服务器在两个不同的机器中执行）一切正常。

也许这可以帮助别人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T09:11:33.590

我在密集的 SOAP 调用中遇到了这个问题，解决方案在 apache 的 httpd.conf 中关闭 KeepAlive。

将 KeepAlive Off 添加到 httpd.conf 并重新启动 apache。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-24T10:52:05.220

我只想报告当您尝试连接到服务器并且该服务器回复无效数据或根本不回复时触发此错误。

增加超时可能会有所帮助，但仅在服务器响应时间过长的情况下，如前所述，您可以增加 php.ini 中的值

`default_socket_timeout = 200`

# http-headers - RestKit 0.20.0pre5：每个请求的 HTTP 标头

> ID：14192462
> 
> 赞同：4
> 
> 时间：2013-01-07T08:44:47.727
> 
> 标签：http-headers, restkit

我想发送一个`If-Modified-Since`带有 GET 请求的 http 标头，由`[RKObjectManager getObjectsAtPath:...]`.

[迁移指南](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)告诉我只能为实例设置“全局”默认请求标 头`RKObjectManager`：

```
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURLString:url];
[objectManager.HTTPClient setDefaultHeader:@"If-Modified-Since" value:@"Sat, 29 Dec 2012 19:43:31 GMT"]; 
```

因为我想保留一个集中式`RKObjetManager`实例（通过`[RKObjectManager sharedManaged]`），所以这不是一个好的选择。

是在每个请求之前创建一个特定的`RKObjectManager`并将我的 http 标头设置为“默认”唯一的解决方案还是有更好的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-08T16:17:50.003

这里有几个选项：

1.  使用获取`NSURLRequest`对象`requestWithObject:method:path:parameters:`，适当配置`NSURLRequest`，然后调用`objectRequestOperationWithRequest:success:failure:`或`managedObjectRequestOperationWithRequest:managedObjectContext:success:failure:`。这将允许您一次性配置请求。
2.  配置`RKHTTPRequestOperation`via `setHTTPOperationClass:`on的自定义子类`RKObjectManager`。这将让您挂钩子类，可以在对象管理器发出请求时配置每个 NSURLRequest，让您集中配置。
3.  在最新的开发分支上，您还可以`RKObjectRequestOperation`向管理器注册一个子类，该子类将用于您选择的请求，使您能够在对象请求操作级别集中定制。

选项 1 或 2 可能最适合您概述的 HTTP 级别问题，但我提到作为在对象映射级别进行相同类型自定义的替代方法。

# c# - 在 MVC3/4 中调试共享嵌入式 (?) 视图

> ID：14192470
> 
> 赞同：1
> 
> 时间：2013-01-07T08:45:11.033
> 
> 标签：c#, asp.net-mvc

我对此进行了一些研究，但没有找到任何解决方案。

这是一个两方面的问题：

1.  在多个项目之间共享视图。这很容易通过将它们嵌入到一个公共项目中并由虚拟路径提供者提供来完成。问题是它们不能被 VS 调试器单步执行，因为它无法将物理 cshtml 文件与这些 JITted 相关联。

2.  调试通用视图。这是我坚持的部分。我不知道该怎么做。

我所做的：我在每个项目中创建了一个具有通用视图（具有“内容”类型，而不是嵌入）和一个符号链接的项目，该链接指向相应的文件夹。我还在 application_start 中将此路径添加到 RazorViewEngine。这很好用，当视图中抛出异常时，我什至会得到一个行号，除了 VS 调试器仍然无法进入该视图：/

为了调试视图，必须将它们放在项目中，但实际上无法做到——我们显然使用 TFS，因此它们会在 tfs.

简而言之：**在 VS2010 中调试时，有没有办法进入共享视图？**

这对我们来说是一个相当大的问题，任何想法都值得赞赏

# php - 复制一个类

> ID：14192472
> 
> 赞同：-2
> 
> 时间：2013-01-07T08:45:12.170
> 
> 标签：php, class, function

我目前正在使用一个使用名为“分页”的类的分页脚本。我想在另一个文件中复制这个类以再次使用它。我的框架将其识别为“重复”时遇到问题。我知道更改它应该像更改类名一样简单，但是类中有几个函数使我无法弄清楚它太复杂了。

所以我的问题是，根据下面的代码，我需要在我的类中更改哪些变量、函数、值等才能创建它的相同副本？

```
class pagination {
/*
   Script Name: *Digg Style Paginator Class
   Script URI: http://www.mis-algoritmos.com/2007/05/27/digg-style-pagination-class/
   Description: Class in PHP that allows to use a pagination like a digg or sabrosus style.
   Script Version: 0.4
   Author: Victor De la Rocha
   Author URI: http://www.mis-algoritmos.com
*/
/*Default values*/
var $total_pages    = - 1; //items
var $limit          = null;
var $target         = "";
var $page           = 1;
var $adjacents      = 2;
var $showCounter    = false;
var $className      = "pagination";
var $parameterName  = "pg";
var $urlF           = false; //urlFriendly
/*Buttons next and previous*/
var $nextT          = "Next";
var $nextI          = "&#187;"; //&#9658;
var $prevT          = "Previous";
var $prevI          = "&#171;"; //&#9668;

var $calculate      = false;
// Total items
function items($value) {
    $this->total_pages  = (int) $value;
}
// how many items to show per page
function limit($value) {
    $this->limit        = (int) $value;
}
// Page to sent the page value
function target($value) {
    $this->target       = $value;
}
// Current page
function currentPage($value) {
    $this->page         = (int) $value;
}
// How many adjacent pages should be shown on each side of the current page?
function adjacents($value) {
    $this->adjacents    = (int) $value;
}
// show counter?
function showCounter($value = "") {
    $this->showCounter  = ($value === true)?true:false;
}
// to change the class name of the pagination div
function changeClass($value = "") {
    $this->className    = $value;
}

function nextLabel($value) {
    $this->nextT        = $value;
}
function nextIcon($value) {
    $this->nextI        = $value;
}
function prevLabel($value) {
    $this->prevT        = $value;
}
function prevIcon($value) {
    $this->prevI        = $value;
}
// to change the class name of the pagination div
function parameterName($value = "") {
    $this->parameterName = $value;
}
// to change urlFriendly
function urlFriendly($value = "%") {
    if (eregi('^ *$', $value)) {
        $this->urlF = false;
        return false;
    }
    $this->urlF = $value;
}

var $pagination;
function pagination() {
}
function show() {
    if (!$this->calculate) {
        if ($this->calculate()) {
            echo "<div class=\"$this->className\">$this->pagination</div>\n";
        }
    }
}
function getOutput() {
    if (!$this->calculate) {
        if ($this->calculate()) {
            return "<div class=\"$this->className\">$this->pagination</div>\n";
        }
    }
}
function get_pagenum_link($id) {
    if (strpos($this->target, '?') === false)
        if ($this->urlF)
            return str_replace($this->urlF, $id, $this->target);
        else
            return "$this->target?$this->parameterName=$id";
    else
        return "$this->target&$this->parameterName=$id";
}

function calculate() {
    $this->pagination = "";
    $this->calculate == true;
    $error = false;
    if ($this->urlF and $this->urlF != '%' and strpos($this->target, $this->urlF) === false) {
        // Es necesario especificar el comodin para sustituir
        echo "Especificaste un wildcard para sustituir, pero no existe en el target<br />";
        $error = true;
    } elseif ($this->urlF and $this->urlF == '%' and strpos($this->target, $this->urlF) === false) {
        echo "Es necesario especificar en el target el comodin % para sustituir el n?mero de p?gina<br />";
        $error = true;
    }

    if ($this->total_pages <0) {
        echo "It is necessary to specify the <strong>number of pages</strong> (\$class->items(1000))<br />";
        $error = true;
    }
    if ($this->limit == null) {
        echo "It is necessary to specify the <strong>limit of items</strong> to show per page (\$class->limit(10))<br />";
        $error = true;
    }
    if ($error)return false;

    $n = trim($this->nextT . ' ' . $this->nextI);
    $p = trim($this->prevI . ' ' . $this->prevT);

    /* Setup vars for query. */
    if ($this->page)
        $start = ($this->page - 1) * $this->limit; //first item to display on this page
    else
        $start = 0; //if no page var is given, set start to 0
    /* Setup page vars for display. */
    $prev = $this->page - 1; //previous page is page - 1
    $next = $this->page + 1; //next page is page + 1
    $lastpage = ceil($this->total_pages / $this->limit); //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1; //last page minus 1
    /*
       Now we apply our rules and draw the pagination object.
       We're actually saving the code to a variable in case we want to draw it more than once.
    */

    if ($lastpage > 1) {
        if ($this->page) {
            // anterior button
            if ($this->page > 1)
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link($prev) . "\" class=\"prev\">$p</a>";
            else
                $this->pagination .= "<span class=\"disabled\">$p</span>";
        }
        // pages
        if ($lastpage <7 + ($this->adjacents * 2)) { // not enough pages to bother breaking it up
            for ($counter = 1; $counter <= $lastpage; $counter++) {
                if ($counter == $this->page)
                    $this->pagination .= "<span class=\"current\">$counter</span>";
                else
                    $this->pagination .= "<a href=\"" . $this->get_pagenum_link($counter) . "\">$counter</a>";
            }
        } elseif ($lastpage > 5 + ($this->adjacents * 2)) { // enough pages to hide some
            // close to beginning; only hide later pages
            if ($this->page <1 + ($this->adjacents * 2)) {
                for ($counter = 1; $counter <4 + ($this->adjacents * 2); $counter++) {
                    if ($counter == $this->page)
                        $this->pagination .= "<span class=\"current\">$counter</span>";
                    else
                        $this->pagination .= "<a href=\"" . $this->get_pagenum_link($counter) . "\">$counter</a>";
                }
                $this->pagination .= "...";
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link($lpm1) . "\">$lpm1</a>";
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link($lastpage) . "\">$lastpage</a>";
            }
            // in middle; hide some front and some back
            elseif ($lastpage - ($this->adjacents * 2) > $this->page && $this->page > ($this->adjacents * 2)) {
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link(1) . "\">1</a>";
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link(2) . "\">2</a>";
                $this->pagination .= "...";
                for ($counter = $this->page - $this->adjacents; $counter <= $this->page + $this->adjacents; $counter++)
                    if ($counter == $this->page)
                        $this->pagination .= "<span class=\"current\">$counter</span>";
                    else
                        $this->pagination .= "<a href=\"" . $this->get_pagenum_link($counter) . "\">$counter</a>";
                $this->pagination .= "...";
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link($lpm1) . "\">$lpm1</a>";
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link($lastpage) . "\">$lastpage</a>";
            }
            // close to end; only hide early pages
            else {
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link(1) . "\">1</a>";
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link(2) . "\">2</a>";
                $this->pagination .= "...";
                for ($counter = $lastpage - (2 + ($this->adjacents * 2)); $counter <= $lastpage; $counter++)
                    if ($counter == $this->page)
                        $this->pagination .= "<span class=\"current\">$counter</span>";
                    else
                        $this->pagination .= "<a href=\"" . $this->get_pagenum_link($counter) . "\">$counter</a>";
            }
        }
        if ($this->page) {
            // siguiente button
            if ($this->page <$counter - 1)
                $this->pagination .= "<a href=\"" . $this->get_pagenum_link($next) . "\" class=\"next\">$n</a>";
            else
                $this->pagination .= "<span class=\"disabled\">$n</span>";
            if ($this->showCounter)$this->pagination .= "<div class=\"pagination_data\">($this->total_pages Pages)</div>";
        }
    }

    return true;
}
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:51:10.537

尝试只**包含****一次**包含分页类的文件！

使用`incldue_once`or`require_once`代替`include`and `require`。

# objective-c - 从 AFNetworking 切换到 RestKit

> ID：14192486
> 
> 赞同：1
> 
> 时间：2013-01-07T08:46:17.637
> 
> 标签：objective-c, ios, web-services, restkit, afnetworking

我开始使用 AFNetworking 开发我的应用程序。一切都很顺利，直到我想使用核心数据。我知道还有一个额外的类（AFIncrementalStore）。但是因为我是 IOS 开发的新手，并且没有太多关于这方面的信息。我决定改用 RestKit，因为这里有更多信息。现在，我学习了关于 AFNetworking 的教程。在这里，我创建了一个 API 类，其中包含此方法。

```
+(API *)sharedInstance
{
    static API *sharedInstance = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^ {
        sharedInstance = [[self alloc]initWithBaseURL:[NSURL URLWithString:kAPIHost]];
    });
    return sharedInstance;
}

#pragma mark - init
//intialize the API class with the destination host name

-(API *)init
{
    //call super init
    self = [super init];

    if (self != nil){
        //initialize the object
        user = nil;

        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];

        // Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
        [self setDefaultHeader:@"Accept" value:@"application/json"];
    }
    return self;
}

-(void)loginCommand:(NSMutableDictionary *)params onCompletion:(JSONResponseBlock)completionBlock{
    NSLog(@"%@%@",kAPIHost,kAPILogin);
    NSMutableURLRequest *apiRequest = [self multipartFormRequestWithMethod:@"POST" path:kAPILogin parameters:params constructingBodyWithBlock:^(id <AFMultipartFormData>formData){
        //TODO: attach file if needed

    }];
    AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:apiRequest];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
        //success!
        NSLog(@"SUCCESSSS!");
        completionBlock(responseObject);
    }failure:^(AFHTTPRequestOperation *operation, NSError *error){
        //Failure
        NSLog(@"FAILUREE!");
        completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
    }];
    [operation start];

} 
```

这处理了我的 web 服务和应用程序之间的通信。在 viewControler 本身中，我这样称呼这个方法。

```
 /*  [[API sharedInstance] loginCommand:[NSMutableDictionary dictionaryWithObjectsAndKeys:_txtLogin.text,@"email",_txtPass.text,@"pwd", nil] onCompletion:^(NSDictionary *json){
     //completion
         if(![json objectForKey:@"error"]){
             NSLog(@"status %@",[json valueForKeyPath:@"data.status"]);
             if([[json valueForKeyPath:@"data.status"]intValue] == 200){
                  // Everything is oké, and login is succesfull
             }else{
                 //show validation
             }
         }else {
             NSLog(@"Cannot connect to the server");
         }
     }];*/ 
```

这就是我在 AFnetworking 中的做法。但是当我在 RestKit 中这样做时有什么区别。我搜索了教程。但是在从 RestKit 1.0 更新到 2.0 之后，很多这些教程都已经过时了。所以我希望任何人都可以帮助我解决这个问题！

亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T20:06:13.140

我使用本教程来使用 RestKit。它向您展示了如何使用它，您可以了解其他详细信息。[http://www.youtube.com/watch?v=dFi9t8NW0oY](http://www.youtube.com/watch?v=dFi9t8NW0oY)

# security - Salesforce：应用程序管理

> ID：14192490
> 
> 赞同：-1
> 
> 时间：2013-01-07T08:46:36.237
> 
> 标签：security, salesforce, force.com

任何人都可以解释这个问题吗？

* * *

如果在创建应用程序之前未确定将使用应用程序的参与者，会发生以下哪种情况？选择任意两个选项。一个。我们将无法创建报告和仪表板 b. 未经授权的用户可以访问敏感数据 c. 将没有空间将应用程序扩展到大用户

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:53:05.373

我不认为这个问题是[StackOverflows 的规则](https://stackoverflow.com/faq#dontask)之一。您是否从某些认证考试中复制了它？;) 这与编程问题并不完全相关。

我会将它标记为 mods，但也会尝试攻击它：P

在 SF 世界中，应用程序并不多。一组（默认）选项卡，就是这样。如果用户无权访问提及选项卡 XYZ 的应用程序，这并不意味着他无法从“所有选项卡”菜单访问该选项卡。更重要的是对象上的安全设置：

*   选项卡隐藏 - 意味着具有此配置文件的用户甚至不知道数据库中存在此类对象，即使他已勾选“读取”权限

    *   默认关闭 - 在“所有选项卡”菜单中访问
    *   默认开启 - 如果选择了该应用，则默认在给定应用中可见

    一个。我们将无法创建报告和仪表板

不会。即使没有任何应用程序包含此选项卡，系统管理员也可以查看所有数据（并因此创建报告）。他们在这个答案中谈论的内容由对象的“允许报告”复选框控制（如果没有勾选，即使是系统管理员也无法帮助您）。普通用户将无法在给定对象上生成报告/运行现有报告，除非他们的配置文件中的对象至少具有“默认关闭”+“读取”权限。

```
b. Unauthorized users can access sensitive data 
```

是的？我可以想象会发生这种情况——你不知道哪些配置文件应该访问给定的对象，你给所有用户读取访问权限，有趣的事情发生了。但是然后 - 默认情况下，除了具有“查看全部/修改全部”的人（如 SysAdmins）之外，没有人可以看到数据，所以这有点奇怪。您必须明确转到每个配置文件并启用访问权限...

```
c. There will be no room for scaling the application to large users 
```

我不明白这个答案，所以我会选择“不，胡说八道”：D 如果需要，您始终可以根据个人资料甚至权限集授予对给定应用程序（或对象）的访问权限，我看不到这怎么会成为一个问题......

```
d. 
```

我还缺少 1 个答案，您确定您复制了完整的问题吗？我从未见过少于 4 个答案的 SF 考试题...

免责声明：我从未在考试或任何练习考试中看到过类似的问题。我通过了 201、401 和 501 测试。

# java - 带有连接和临时表的 Hibernate StoredProcedure

> ID：14192494
> 
> 赞同：0
> 
> 时间：2013-01-07T08:46:49.543
> 
> 标签：java, spring, hibernate

对于给定的两个日期范围，我有一个 MySQL StoredProcedure(EmployeeAbsentReport Procedure)。在 MySql 命令提示符上成功运行。如何使用 Hibernate 运行此存储过程，我找到了一个有关如何调用存储过程[示例](http://www.mkyong.com/hibernate/how-to-call-store-procedure-in-hibernate)的示例，但在示例程序中，他使用了一个表。

程序：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `AbsentReportproc`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `AbsentReportproc`(IN _fromdate DATETIME, IN _todate DATETIME)
BEGIN 
    CREATE TEMPORARY TABLE daterange25 (dte DATE); 

    SET @counter := 0;
    WHILE (@counter < DATEDIFF(DATE(_todate), DATE(_fromdate))) DO 
        INSERT INTO daterange25 VALUES (DATE_ADD(_fromdate, INTERVAL @counter:=@counter + 1 DAY));
    END WHILE;

SELECT tp.EMPCODE,tp.NAME,tp.DEPARTMENT, Group_Concat(d.dte order by d.dte SEPARATOR '\n')AbsentDate, COUNT(tp.EMPCODE) Totalnoofabsentdates
FROM Master tp
JOIN daterange25 d
LEFT JOIN Transactions tpt ON (tp.EMPCODE = tpt.empcode) AND DATE(S_DateTime) = d.dte
WHERE tpt.empcode IS NULL
GROUP BY tp.EMPCODE;   

    DROP TABLE daterange25;
END$$

DELIMITER ; 
```

如何使用带有连接（包括临时表）的 Hibernate 调用存储过程并在 XML 映射文件中编写 sql-query？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:53:36.677

遵循我在一个项目中使用的通用框架方法来调用 MySQL 数据库的存储过程：

```
@Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public <T> List<T> executeSP(final String spName,
            final String[] parameterNames, final String[] parameterValues,
            final String[] resultColumnNames, final int offset, final int size,
            final Class<T> returnType) {
        validateParams(parameterNames, parameterValues);
        return (List<T>) hibernateTemplate
                .execute(new HibernateCallback<List<T>>() {
                    @SuppressWarnings("unchecked")
                    public List<T> doInHibernate(final Session session) {
                        SQLQuery query = session.createSQLQuery("call "
                                + spName);
                        if (returnType != null) {
                            query.addEntity(returnType);
                        }
                        setQueryParams(parameterNames, parameterValues, query);
                        setResultColumnNames(resultColumnNames, query);
                        if (offset >= 0) {
                            query.setFirstResult(offset);
                        }
                        if (size > 0) {
                            query.setMaxResults(size);
                        }
                        return query.list();
                    }
                });
    } 
```

接下来，我建议请仅将临时表加入存储过程，而不是将其加入 SP，如果在 SP 中执行，那么从性能角度来看也更好。

# android - SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度

> ID：14192500
> 
> 赞同：8
> 
> 时间：2013-01-07T08:47:16.130
> 
> 标签：android

有人可以解释这个错误吗？

`"SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length"`.

我认为它与`editText`. 有解决办法吗？

这是我的日志。

```
1-07 14:29:47.654: D/OpenGLRenderer(24479): Enabling debug mode 0

01-07 14:30:36.954: E/SensorManager(24479): thread start

01-07 14:30:36.959: D/SensorManager(24479): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= 
android.view.OrientationEventListener$SensorEventListenerImpl@43000e98

01-07 14:30:37.139: E/SpannableStringBuilder(24479): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length

01-07 14:30:37.139: E/SpannableStringBuilder(24479): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length

01-07 14:30:37.419: I/Process(24479): Sending signal. PID: 24479 SIG: 9
01-07 14:30:37.654: E/Trace(25014): error opening trace file: No such file or directory (2)

01-07 14:30:37.754: D/dalvikvm(25014): GC_FOR_ALLOC freed 108K, 6% free 12258K/12931K, paused 15ms, total 16ms

01-07 14:30:37.754: I/dalvikvm-heap(25014): Grow heap (frag case) to 14.860MB for 2457616-byte allocation

01-07 14:30:37.779: D/dalvikvm(25014): GC_CONCURRENT freed 6K, 5% free 14651K/15367K, paused 12ms+2ms, total 23ms

01-07 14:30:37.809: D/dalvikvm(25014): GC_FOR_ALLOC freed 0K, 5% free 14651K/15367K, paused 11ms, total 11ms

01-07 14:30:37.819: I/dalvikvm-heap(25014): Grow heap (frag case) to 19.018MB for 4367376-byte allocation

01-07 14:30:37.834: D/dalvikvm(25014): GC_CONCURRENT freed 0K, 4% free 18917K/19655K, paused 2ms+2ms, total 16ms

01-07 14:30:37.834: D/dalvikvm(25014): WAIT_FOR_CONCURRENT_GC blocked 3ms

01-07 14:30:37.894: D/dalvikvm(25014): GC_FOR_ALLOC freed 2660K, 17% free 17674K/21063K, paused 13ms, total 13ms

01-07 14:30:37.909: D/dalvikvm(25014): GC_FOR_ALLOC freed 688K, 14% free 18212K/21063K, paused 10ms, total 10ms

01-07 14:30:37.944: D/dalvikvm(25014): GC_FOR_ALLOC freed <1K, 11% free 18890K/21063K, paused 12ms, total 12ms

01-07 14:30:37.949: I/dalvikvm-heap(25014): Grow heap (frag case) to 20.170MB for 1235556-byte allocation

01-07 14:30:37.964: D/dalvikvm(25014): GC_FOR_ALLOC freed 0K, 10% free 20097K/22279K, paused 11ms, total 11ms

01-07 14:30:38.019: D/libEGL(25014): loaded /system/lib/egl/libEGL_mali.so

01-07 14:30:38.024: D/libEGL(25014): loaded /system/lib/egl/libGLESv1_CM_mali.so

01-07 14:30:38.024: D/libEGL(25014): loaded /system/lib/egl/libGLESv2_mali.so

01-07 14:30:38.029: D/(25014): Device driver API match

01-07 14:30:38.029: D/(25014): Device driver API version: 10

01-07 14:30:38.029: D/(25014): User space API version: 10

01-07 14:30:38.029: D/(25014): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Fri Sep 28 

10:42:56 KST 2012 

01-07 14:30:38.064: D/OpenGLRenderer(25014): Enabling debug mode 0 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-04T04:05:06.040

只需将此属性添加到您的编辑文本中，您的问题肯定会得到解决

```
android:inputType="textNoSuggestions" 
```

将上述属性添加到应用程序中使用的每个编辑文本中，或者仅添加到该编辑文本中出现错误的位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-17T05:24:40.383

这可能是因为您使用的是**3rd 方键盘**而不是本机手机键盘。这经常发生在[SwiftKey](https://support.swiftkey.com/hc/en-us)上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T06:01:31.833

只是忽略他们。这是因为你的操作系统可能有一些新的键盘，比如 Swype，或者其他一些定制的键盘，这些东西就会出现。所以你不必担心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-10T20:24:00.120

检查在与遇到的屏幕相对应的活动 xml 文件中是否有任何元素，例如按钮或文本视图重复（复制两次）。我没有注意到这一点，不得不面对同样的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-18T12:17:33.607

在editText中添加`android:textIsSelectable="false"`例如

```
 <EditText
                    android:id="@+id/edit_IONumber"
                    android:layout_width="0dp"
                    android:layout_weight="3"
                    android:layout_marginTop="10dp"
                    android:layout_marginRight="10dp"
                    android:textIsSelectable="false"
                    android:layout_height="wrap_content"
                    android:background="@drawable/edit_text_shape"
                    android:padding="5dip" /> 
```

# facebook - 单击通过提要对话框发布的链接获取用户名？

> ID：14192502
> 
> 赞同：-1
> 
> 时间：2013-01-07T08:47:32.230
> 
> 标签：facebook, hyperlink, feed

我想获取 Facebook 用户的用户名/ID，该用户单击了通过他的墙/朋友墙上的提要对话框发布的链接。

有没有办法做到这一点？

目前，我们将静态链接传递给 post feed 对话框 api。是否有任何机制可以使此链接特定于 fb-user？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:02:12.107

不，未经授权用户，您无法获取任何个人数据（包括 id）。这是出于隐私/安全原因。

也不可能使用对每个点击它的用户都是动态的动态链接。

# jquery - 用户单击链接后如何突出显示列表项

> ID：14192506
> 
> 赞同：0
> 
> 时间：2013-01-07T08:47:52.490
> 
> 标签：jquery, html, css, listview, highlighting

我目前正在设置一个 IRC 记录器，当用户单击聊天日志中行的日期链接时，我在尝试突出显示聊天日志的行时遇到了一些困难。整个代码在 php/html/css/jquery 并连接到一个 mysql 数据库。

但是，我的问题是，当 jquery 代码将所选行移至页面顶部时，我不太确定如何突出显示在页面上单击的链接行。

所以下面的代码在这里运行：http: [//openkore.info/irc-log/#msg2862](http://openkore.info/irc-log/#msg2862)

请注意，当您转到锚定列表时，它会突出显示消息行，而不是当用户在 jquery 移动消息时单击同一页面上的其他链接时。

```
// content *******************************************
echo '<div id="container-wrap">';
echo '<div id="container">';
echo '<div id="content">';
echo '<ol id="log">';
if($sql) while($row = mysql_fetch_array($res, MYSQL_ASSOC)){
    echo '<li id="msg'.$row['id'].'" class="'.$row['type'].'">';
    echo '<div class="anchor" id="msg'.$row['id'].'"><a href="#msg'.$row['id'].'" class="time" title="'.$row['d'].'">';
    // give screenreaders a hint early enough which line includes a real message
    if($row['type'] == 'public') echo '<span class="a11y">message at </span>';
    echo '<time datetime="'.$row['d'].'T'.$row['t'].'">'.$row['t'].'</time>';
    echo '</a></div>';
    echo '<dl>';
    if($row['type'] == 'public'){
        echo '<dt style="color:#'.substr(md5($row['user']),0,6).'" class="user">'.htmlspecialchars($row['user']).'</dt>';
    }else{
        echo '<dt class="server">'.$row['type'].'</dt>';
    }
    $msg = htmlspecialchars(  $row['msg']);
    $msg = preg_replace_callback('/((https?|ftp):\/\/[\w-?&;#~=\.\/\@%:]+[\w\/])/ui',
                                 'format_link',$msg);

    echo '<dd>';
    if(substr($msg,0,3) == '/me'){
        $msg = '<strong>'.htmlspecialchars($row['user']).substr($msg,3).'</strong>';
    }
    echo $msg;
    echo '</dd>';
    echo '</dl>';
    echo '</li>';

}
echo '</ol>';

echo '</div>';

<!-- JQuery Plugin -->
<script type="text/javascript" src="js/jquery.min.js"></script>

<!-- JQuery Scrolling to Selected Line Plugin -->
<script>
$(document).ready(function() {

    // Click event for any anchor tag that's href starts with #
    $('a[href^="#"]').click(function(event) {

        // The id of the section we want to go to.
        var id = $(this).attr("href");

        // An offset to push the content down from the top.
        var offset = 75;

        // Our scroll target : the top position of the
        // section that has the id referenced by our href.
        var target = $(id).offset().top - offset;

        // The magic...smooth scrollin' goodness.
        $('html, body').animate({scrollTop:target}, 500);

        //prevent the page from jumping down to our section.
        event.preventDefault();
    });
});
</script> 
```

这是随之而来的 CSS：

```
@media screen {

/* basic styles
********************************************************************/

html {
    overflow-x: auto;
    overflow-y: scroll;
    margin: 0;
}
html,
body {
    background: url(bg.png) repeat;
    color: #333;
    padding: 0;
}
body {
    margin: 1em 2em;
    font: normal 100%/1.4 Frutiger, Calibri, "Myriad Pro", Myriad, "Nimbus Sans L", Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif; /* §fsize §font */
    -webkit-text-size-adjust: 100%;
}

#header-wrap {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    border-style:solid;
    border-width:1px;
    z-index:333;
}

#header-container {
    height: 70px;
    background-color:#282828;
    opacity: 1.0;
}

#header {
    width: 940px;
    margin: 0 auto;
    position: relative;
}

#container-wrap {
    left: -20;
    width: 100%;
    z-index: 1;
}

#container {
    width: 940px;
    margin: 0 auto;
    overflow: auto;
    padding: 70px 0 40px;
}

#content {
    float: left;
    width: 625px;
}

#sidebar {
    position: fixed;
    width: 275px;
    float: right; 
    margin-left: 650px;
}

#footer-wrap {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;    
    border-style:solid;
    border-width:1px;
    z-index: 1;
}

#footer-container {
    height: 20px;
    background-color:#282828;
    opacity: 1.0;
}

#footer-content {
    color: #FFAC1C;
    width: 940px;
    margin: 0 auto;
    position: relative;
    top:-10px;
}

a.footer {
    background-color:282828;
}
a.footer:link,
a.footer:visited {
    text-decoration: none;
}
a.footer:link {
    color: #FFAC1C;
}
a.footer:visited {
    color: #FFAC1C;
}
a.footer:link:hover,
a.footer:visited:hover,
a.footer:link:focus,
a.footer:visited:focus,
a.footer:link:active,
a.footer:visited:active {
    background-color:#282828;
    text-decoration: underline;
    outline: none;
}
a.footer:link:active,
a.footer:visited:active {
    color: #FFAC1C;
}

a.nav:hover,
a.nav:visited:active,
a.nav:link:hover{
    text-decoration: underline;
    outline: none;
    background-color:#B2FF99;
}

a.nav:link:active{
    background-color:red;
}

/*
.anchor{
  display: block;
  height: 70px; <!--same height as header-->
  margin-top: -70px; <!--same height as header-->
  visibility: hidden;
}
*/

/*____________ headings ____________*/

h1,
h2,
h3 {
    font: helvetica;
    font-weight: bold;
    line-height: 1.2;
    color: #E4E4E4;
    background-color: inherit;
    padding: 0;
    clear: both;
}

h1 {
    font-size: 2.25em;
    margin: 0;
}
h2 {
    font-size: 1.5em;
    margin: 0 0 0.666em;
    color: #000;
}
h2.subtitle {
    font-size: 1.1em;
    margin: 0 0 0.666em;
    color: #FFAC1C;
}
h3 {
    font-size: 1.125em;
    margin: 0 0 0.888em;
    color: #000;
}

/*____________ basic margins and paddings ____________*/

p,
ul,
ol {
    margin: 0 0 1.4em 0; /* bottom margin = line-height */
    padding: 0;
}

div,
dl {
    margin: 0;
    padding: 0;
}

/*____________ lists ____________*/

li,
dd,
dt {
    padding: 0;
    margin: 0;
    list-style: none;
}
dt {
    font-weight: bold;
}

li li {
    font-size: 100%;
}

/*____________ links ____________*/

a {
    background-color: inherit;
}
a:link,
a:visited {
    text-decoration: none;
}
a:link {
    color: #000;
}
a:visited {
    color: #333;
}
a:link:hover,
a:visited:hover,
a:link:focus,
a:visited:focus,
a:link:active,
a:visited:active {
    text-decoration: underline;
    outline: none;
}
a:link:active,
a:visited:active {
    color: #000;
}

/*____________ forms ____________*/

form {
    display: inline;
    margin: 0;
    padding: 0;
}
label {
    vertical-align: middle;
    cursor: pointer;
}
input {
    font: inherit;
    color: inherit;
    line-height: normal;
    margin: 0;
    vertical-align: middle;
    padding: .1em;
}
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/*____________ misc ____________*/

abbr {
    cursor: help;
    border-bottom: 1px dotted;
    font-style: normal;
}

/* hide something in an accessible way */
.a11y {
    position: absolute;
    left: -99999px;
    top: -99999px;
    font-size: 0;
    overflow: hidden;
    display: inline;
}

/* irclogger-specific styles
********************************************************************/

a.skip {
    position: absolute;
    top: 0;
    right: 2em;
}

footer {
#    border-top: 1px solid #ccc;
    text-align: right;
    padding: .7em 2em .1em;
    margin: 0 -2em;
    display: block;
}

/*____________ navigation below ____________*/

ul {
    overflow: hidden;
}
ul li {
    float: left;
}

ul.archive {
    margin-bottom: .9em;
}

ul.archive li a {
    display: inline-block;
    padding: .3em .5em;
    border: 1px solid #ccc;
    margin: 0 .4em .7em 0;
    border-radius: 3px;
}

ul.archive li.today {
    clear: left;
}

p.hint {
    margin: -.7em 0 .7em;
}

ul.filters li {
    margin-right: 1.5em;
}

ul.filters label,
ul.filters input,
ul.filters small {
    display: block;
}

/*____________ the log ____________*/

#log {
    margin: 0 -2em 1.4em;
#    border: solid #ccc;
    border-width: 1px 0;
    padding: 1em 2em;
}

#log li {
    opacity: .5;
}
#log li.public {
    opacity: 1;
}
#log a.time {
    color: #333;
}

} /* /@media */

/*____________ for screen and print ____________*/

#log li {
    clear: left;
    padding-left: 11em;
}

#log a.time {
    float: left;
    margin-left: -11em;
}

#log dt {
    font-weight: normal;
    margin-left: -6em;
    float: left;
    width: 6em;
    overflow: hidden;
    text-overflow: ellipsis;
}

#log dd {
    padding-left: .2em;
}

#log .public dt {
    font-weight: bold;
}

/* highlight targeted line */
li:target {
    background-color: #ff9;
}

/*____________ for smaller screens ____________*/

@media only screen and (max-width: 50em) {

body {
    margin: 1em .5em .2em;
}

a.skip {
    right: .5em;
}

#log {
    margin-left: -.5em;
    margin-right: -.5em;
    border: solid #ccc;
    border-width: 1px 0;
    padding-left: .5em;
    padding-right: .5em;
}

#log li {
    padding-left: 0;
}
#log a.time {
    min-width: 4.5em;
    margin-left: 0;
}
#log dt {
    margin-left: 0;
    width: auto;
    float: none;
}
#log dd {
    margin: -.2em 0 .2em 4.5em;
    padding-left: 0;
}

footer {
    margin-left: -.5em;
    margin-right: -.5em;
    padding-left: .5em;
    padding-right: .5em;
}

h1 {
    font-size: 1.5em;
}
h2 {
    font-size: 1.125em;
    margin: 0 0 0.888em;
}
h3 {
    font-size: 1em;
    margin: 0 0 1.0em;
}

} /* /@media */

/*____________ print ____________*/

@media print {

a.skip,
.a11y,
#nav {
    display: none;
}

footer {
#    border-top: 1px solid;
}

#log {
    list-style: none;
    margin-left: 0;
    padding-left: 0;
}

#log li {
    display: none;
    margin-left: 0;
}
#log li.public {
    display: block;
}

#log a.time {
    color: inherit;
    text-decoration: none;
}

} /* /@media */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:34:21.713

考虑给每条评论一个唯一的 id 和 like`<div id="message1001">...</div>`

然后，使用哈希标签使您的链接指向正确的 id`<a href="#message1001">...</a>`

然后，您可以设置一个简单的 css 规则来设置使用伪选择器链接到的任何内容：target。

```
a:target {
    //style code
} 
```

将 div 移到页面上的哪个位置无关紧要。

希望有帮助。

# android - 为 actionbarsherlock 调用 onCreateOptionsMenu()

> ID：14192511
> 
> 赞同：1
> 
> 时间：2013-01-07T08:48:15.937
> 
> 标签：android, menu, actionbarsherlock

我已经`login`在操作项上设置了，如下图所示。每当用户点击登录时，`login screen`都会显示。每当用户输入凭据并登录时，我都会完成 loginActivity 并将其重定向到其他屏幕，此外，我还将使用`name of the user`操作栏上的登录替换。

1.  每当用户单击返回按钮时，它会返回再次显示的主页`login`，但不会`username`在操作栏上显示。那么，我该如何改变这一点。

2.  每当用户单击他的用户名时，都会显示一个**下拉列表**，其中存在**注销**选项。每当用户单击注销选项时，我想使用**登录**选项更新操作栏，但它仍然显示用户名。

有人可以帮我解决这两个问题吗？代码片段表示赞赏。

```
public abstract class HomeActivity extends SherlockActivity {
    protected static boolean mIsLoginButton = false;
    protected static String user_name = "";
    protected static boolean mIsUserLoggedIn = false;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

         if(mIsLoginButton)
         {
            menu.add("Login")
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
         }

         else if(mIsUserLoggedIn)
         {

                SubMenu subMenu1 = menu.addSubMenu(user_name);

                subMenu1.add(0, 3 , 0, "Log out");

                MenuItem subMenu1Item = subMenu1.getItem();

                subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

                getSupportActionBar().setDisplayShowTitleEnabled(false);

         }

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch(item.getItemId())
        {

        case 0:
            if(mIsLoginButton)
            {
            Intent intent = new Intent(HomeActivity.this,LoginActivity.class);
            startActivity(intent);
            }

            return true;

        case 3:
            Toast.makeText(getApplicationContext(), "clicked on logout", Toast.LENGTH_SHORT).show();  // Case 3 which is logout condition. So what should I do here to update the current activity.

            LogManager.logoutUser();

            return true;
        }
        return false;
    } 
```

![在此处输入图像描述](../Images/cc2cdb663e824ff077330cb1d8963c1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:12:08.510

如果您`invalidateOptionsMenu()`想“刷新”您的电话`optionsMenu`，那应该可以解决问题。invalidateOptionsMenu() 开始调用`onCreateOptionsMenu`层次结构中正在播放的每个菜单。

# php - PHP在文件扩展名中跳过大小写敏感

> ID：14192515
> 
> 赞同：0
> 
> 时间：2013-01-07T08:48:33.897
> 
> 标签：php, file-exists

我的数据库表上有一些行在目录上没有同步。

前任。在我的桌子上我有

```
image.png 
```

但在我的目录上我有

```
image.PNG 
```

现在，我有问题要检查是否

```
file_exist 
```

因为区分大小写。我无法选择手动同步目录中的数据库和文件的选项，因为它太多了。

我可以知道如何使用忽略文件类型敏感性的 file_exist 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:54:07.223

有关更通用的解决方案，请参阅 php 文档中的注释：

[通用解决方案](http://php.net/manual/en/function.file-exists.php#90256)

它提供了这个版本的功能：

```
/**
 * Alternative to file_exists() that will also return true if a file exists
 * with the same name in a different case.
 * eg. say there exists a file /path/product.class.php
 *  file_exists('/path/Product.class.php')
 *   => false
 *  similar_file_exists('/path/Product.class.php')
 *   => true
 */
function similar_file_exists($filename) {
  if (file_exists($filename)) {
    return true;
  }
  $dir = dirname($filename);
  $files = glob($dir . '/*');
  $lcaseFilename = strtolower($filename);
  foreach($files as $file) {
    if (strtolower($file) == $lcaseFilename) {
      return true;
    }
  }
  return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T08:52:02.453

创建一个检查两个扩展的函数并直接使用它而不是 file_exist。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:54:57.073

我认为，您的根本原因是由于以下原因 -
如果您的数据库有“image.png”并且在目录“image.PNG”中，则意味着您的插入查询存在问题。
这两个地方必须相同。最好建议以小写形式存储文件名，因为 Linux 系统区分大小写。

# sql - 嵌套 JSON 记录的数据库模式设计

> ID：14192518
> 
> 赞同：1
> 
> 时间：2013-01-07T08:48:50.153
> 
> 标签：sql, database, json, database-design, nosql

我有一个`profile`记录列表，每个记录如下所示：

```
{
  "name": "Peter Pan",
  "contacts": [
    {
      "key": "mobile",
      "value": "1234-5678"
    }
  ],
  "addresses": [
    {
      "key": "postal",
      "value": "2356 W. Manchester Ave.\nSomewhere District\nA Country"
    },
    {
      "key": "po",
      "value": "PO Box 1234"
    }
  ],
  "emails": [
    {
      "key": "work",
      "value": "abc@work.com"
    },
    {
      "key": "personal",
      "value": "abc@personal.com"
    }
  ],
  "url": "http://www.example.com/"
} 
```

我会考虑具有以下架构结构：

1.  `profile`带有`id`和`name`字段的表。
2.  `profile_contact`带有`id`, `profile_id`, `key`,`value`字段的表。
3.  `profile_address`带有`id`, `profile_id`, `key`,`value`字段的表。
4.  `profile_email`带有`id`, `profile_id`, `key`,`value`字段的表。

但是，我认为我为这样一个简单的 JSON 创建了太多表！

1.  当我在表中搜索时是否会出现性能问题，因为执行了许多 JOINS 来检索一条记录？
2.  将上述 JSON 记录建模到数据库中的更好方法是什么？在 SQL 中，还是在 NoSQL 中更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:28:59.180

这有点取决于。如果您计划每个用户拥有“无限”数量的联系人/地址/电子邮件，那么您的想法是一个不错的选择。

您还可以考虑（类似）以下内容：

**PROFILE**表，包含：

*   `PROFILE_ID`
*   `NAME`
*   `EMAIL_ADDRESS_WORK`
*   `EMAIL_ADDRESS_PERSONAL`
*   `PHONE_NUMBER`
*   `MOBILE_NUMBER`

**ADDRESS**表，包含：

*   `ADDRESS_ID`
*   `PROFILE_ID`
*   `STREET`
*   `CITY`
*   ..ETC

这意味着您可以为每个用户设置 2 种电子邮件和 2 种电话号码，并将它们与配置文件本身一起存储。

或者，您可以选择有一个单独的**CONTACT**表，其中包含电话号码和电子邮件地址（可能还有其他类型）：

*   `CONTACT_TYPE`（电话、手机、email_work、email_personal）
*   `CONTACT_VALUE`
*   `PROFILE_ID`

这三个（我的和你的）都可以完美地工作。为了更好地决定什么对你有用，你应该写下所有存在（并且可能存在）的可能性。也许您希望能够为每个个人资料添加 10 个电子邮件地址（然后将它们与个人资料一起存储会很愚蠢），也许您在不同的联系人类型中会有很大的变化，例如 IM、facebook、ICQ、twitter（然后CONTACTS 表非常适合）。

因此，请尝试找出/列出您将拥有的数据类型，并查看它们如何适合特定模型，然后选择最合适的一个 :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-10T03:04:56.113

这是数据库设计中最常见的情况...您应该停止将其作为新事物线程化，因为您包含了 json :-)

只需创建

用户：身份证，姓名

联系人：user-id、id、key、value

电子邮件和地址以及其他类似联系人的信息。

现在你只需要从 user 中选择并内部加入 user.id=id 上的其他表

# jquery - 使用 jquery 使用复选框名称获取复选框值

> ID：14192522
> 
> 赞同：49
> 
> 时间：2013-01-07T08:49:11.917
> 
> 标签：jquery, html

我有几个输入复选框，（它们的名称与服务器上的发送数组相同）。

所以，我需要得到这个复选框的每个值，我想用作选择器复选框的名称，这不起作用，请帮忙。

```
<form>
  <input type="checkbox" name="bla[]" value="1" />
  <input type="checkbox" name="bla[]" value="2" />
</form> 
```

js：

```
$(document).ready( function () {    

   $("input[name=bla]").each( function () {
       alert( $(this).val() );
   });

}); 
```

[演示](http://jsfiddle.net/sZGjr/)

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-07T08:51:23.647

您正在选择具有 name 属性的`"bla"`输入，但您的输入具有`"bla[]"`name 属性。

```
$("input[name='bla[]']").each(function (index, obj) {
        // loop all checked items
    }); 
```

[http://jsfiddle.net/26axX/](http://jsfiddle.net/26axX/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-07T08:54:55.107

您还应该包括括号。. .

```
<input type="checkbox" name="bla[]" value="1" /> 
```

因此引用它应该是`name='bla[]'`

```
$(document).ready( function () { 

   $("input[name='bla[]']").each( function () {
       alert( $(this).val() );
   });

}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-09-07T11:31:14.300

如果您想获取选中复选框的所有值的列表（例如，在一次 AJAX 调用中将它们作为列表发送到服务器），您可以通过以下方式获取该列表：

```
var list = $("input[name='bla[]']:checked").map(function () {
    return this.value;
}).get(); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-12-01T12:44:53.623

```
$('[name="CheckboxName"]:checked').each(function () {
    // do stuff
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-02-23T21:31:02.070

我想补充一点，如果您尝试获取已选择的具有该名称的所有复选框，您将需要使用以下语法：

```
$("[name='bla[]']:checked").each(function () {
    // do stuff
}); 
```

`]`确保关闭和关闭之间没有空格`:checked`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-07T08:51:33.877

```
$("input[name='bla[]']").each( function () {
    alert($(this).val());
}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-02-04T07:10:56.167

// 使用复选框名称获取复选框值

```
<head>
        <script>
        function getCheckBoxValues(){
            $('[name="checkname"]').each( function (){
                alert($(this).val());
            });
        }
        </script>
    </head>
    <body>
        <input type="checkbox" name="checkname" value='1'/>
        <input type="checkbox" name="checkname" value='2'/>
        <input type="checkbox" name="checkname" value='3'/>
        <input type="button" value="CheckBoxValues" onclick="getCheckBoxValues()"/>
    </body> 
```

// 只获取被检查的值

```
function getCheckBoxValues(){
        $('[name="checkname"]').each( function (){
            if($(this).prop('checked') == true){
                alert($(this).val());
            }
        });
    } 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-01-07T08:53:40.190

就像已经说过几次一样，您需要将选择器更改为

```
$("input[name='bla[]']") 
```

但我想补充一点，在选择器中使用 [] 时**必须**使用单引号或双引号。

# java - 我们可以有一个集合的数组吗？

> ID：14192524
> 
> 赞同：8
> 
> 时间：2013-01-07T08:49:20.913
> 
> 标签：java, arrays, collections

我正在尝试按如下方式创建一个集合数组。

```
ArrayList<Integer> ar[]=new ArrayList<Integer>[50]; 
```

但它给了我一个错误->**通用数组创建** 任何人都可以解释我为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T08:51:55.163

您不能创建泛型类型的数组。改为使用集合集合：

```
ArrayList<ArrayList<Integer>> = new ArrayList<ArrayList<Integer>>(); 
```

为什么我们不能创建一个泛型类型的数组？数组在内部存储它们的确切类型，但由于运行时的类型擦除，将没有泛型类型。所以，为了防止你被这个愚弄（见下面的例子）你不能创建一个泛型类型的数组：

```
//THIS CODE WILL NOT COMPILE
ArrayList<Integer>[] arr = new ArrayList<Integer>[5];
Object[] obj = arr;
obj[0] = new ArrayList<Long>(); //no one is safe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:57:19.130

`ArrayList`在内部是一维数组本身。你需要什么二维数组，这样你就可以创建

```
ArrayList<Integer[]> ar=new ArrayList<Integer[]>(); 
```

或者

```
ArrayList<ArrayList<Integer>> = new ArrayList<ArrayList<Integer>>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:54:37.793

实际上你可以有一个集合数组，只是不允许集合有一个特定的类型。
你可以做类似的事情

```
 ArrayList<?>[] ar = new ArrayList<?>[50];  
    // or ArrayList[] ar = new ArrayList[50];
    ar[0] = new ArrayList<Integer>(); 
```

但是您不会获得泛型的好处 - 集合的内容没有类型信息，您需要在从中读取时进行转换

```
 Integer i = (Integer) ar[0].get(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T08:55:38.647

你可以做这样的事情

```
 ArrayList<Integer> ar[]= new ArrayList[50];

     ArrayList<Integer> intArr  = new ArrayList<Integer>();
     ArrayList<Long> longArr = new ArrayList<Long>();

     ar[0]=intArr;
     ar[1]= longArr; //  compile error Type mismatch: cannot convert from ArrayList<Long> to ArrayList<Integer> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T09:23:57.200

您可以“技术上”拥有一个 ArrayList 类型的数组，但它有点挑剔。将其创建为 an`ArrayList<ArrayList<Integer>> list = ArrayList<ArrayList<Integer>();`并使用`toArray(ArrayList<Integer>[list.size()]);`.

例子：

```
 ArrayList<ArrayList<Integer>> list = new ArrayList<ArrayList<Integer>>();

    list.add(new ArrayList<Integer>());
    list.add(new ArrayList<Integer>());
    list.add(new ArrayList<Integer>());

    int count = 1;

    for(ArrayList<Integer> AList: list) {
        for(int i = 0; i < 4; i++)
            AList.add(count++);
    }

    ArrayList<Integer>[] check = list.toArray(new ArrayList[list.size()]);

    for(ArrayList<Integer> AL : check) {
        for(Integer i:AL) {
            System.out.print(i + " ");
        }
        System.out.println();
    } 
```

输出：

```
 1 2 3 4 
 5 6 7 8 
 9 10 11 12 
```

有效并且是一个 ArrayList 数组

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T09:26:48.390

您的问题的答案可以在 Java 语言规范中找到。您正在尝试使用[Array Creation Expression](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)创建一个数组。它说以下内容：“如果 ClassOrInterfaceType 不表示可具体化的类型，则这是一个编译时错误”。因为 Java 中的数组是在运行时创建的，所以它们的类型信息应该在运行时完全可用。换句话说，数组元素类型应该是可[具体化的类型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.7)。Java 中的泛型是使用类型擦除来实现的（即，只有泛型编译时类型信息的子集在运行时可用）因此它们不能通过定义来具体化，因此您不能创建泛型类型的数组。

# c# - 为什么 System.Drawing Rectangle、Point、Size 等是可变结构而不是类？

> ID：14192527
> 
> 赞同：15
> 
> 时间：2013-01-07T08:49:30.340
> 
> 标签：c#, .net, design-decisions

微软决定制作这些结构是有原因的吗？

这三个都是可变的。如果它们是不可变的，或者它们是引用类型，我会发现它们更容易处理。

如果有理由它们必须是结构，为什么它们是可变的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T08:55:18.677

## 为什么它们是结构

**值语义**
这些值的两个相同实例之间没有本质区别。任何`Point`具有坐标的点，`[2,3]`都等于具有相同坐标的任何其他点，就像任何`int`具有相似值的两个 s 相等一样。这符合设计指南：

> 它在逻辑上表示单个值，类似于原始类型（整数、双精度等）。

**表现**

> 值类型的分配和解除分配成本更低。

通常需要创建这些值的许多实例。struct 的创建成本更低，如果是本地值，它们将在堆栈上创建，从而减轻 GC 的压力。

**大小**
让我们考虑这些值的大小：
`Point`: 8 字节
`Size`: 8 字节
`Rectangle`: 16 字节

对于`Point`和`Size`，它们的大小与在 64 位系统中对类实例的引用相同。

引用自微软指南：[在类和结构之间选择](http://msdn.microsoft.com/en-us/library/vstudio/ms229017%28v=vs.100%29.aspx)

## 为什么它们是可变的

这些结构是完全可变的。这样做（违反指南）是为了提高性能，因为它避免了为修改操作创建新值的需要。

关于评论中OP的代码示例：

```
Point[] points = new Point[] { new Point(0,0), new Point(1,1), new Point(2,2) };

foreach (Point p in points)
{
    p.X += 1; 
} 
```

`foreach`失败的唯一原因是因为~~`p`被**装箱**以`object`提供迭代，而您`Cannot modify the result of an unboxing conversion`（~~感谢 Rajeev）迭代器按值返回数据，您只会更改值的*副本*。

这工作正常：

```
for (int i = 0; i < points.Length; i++)
{
    points[i].X += 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:01:12.483

## Microsoft 不需要将这些结构定义为一个类。

这些基本上是小型结构。

*   [`Rectangle Structure`](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.aspx)存储一组四个整数。
*   [`Point Structure`](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)表示整数 x 和 y 坐标的有序对.
*   [`Size Structure`](http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx)存储一个有序的整数对。

如果将这些定义为`class`, for`Point`结构，则相同的坐标可以引用内存中的不同对象。定义为`struct`，我们知道具有相同坐标的不同点之间没有区别。这意味着它们是值类型。值类型的分配几乎总是更便宜。看看它们的大小；

```
Point : 8 bytes
Size: 8 bytes
Rectangle: 16 bytes 
```

谁想在每次创建时分配一个新的内存部分`Point(1,2)`？

# jsf - Icefaces：如何使用 OnLoad

> ID：14192530
> 
> 赞同：2
> 
> 时间：2013-01-07T08:49:39.980
> 
> 标签：jsf, icefaces

我是[Icefaces](http://www.icesoft.org/java/projects/ICEfaces/)的新手。我想知道如何使用onload方法，或者我想在页面加载时调用一些方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:59:21.827

在您的 JSF 页面中：

```
<f:event type="preRenderView"
        listener="#{yourManagedBean.yourMethod()}" /> 
```

在 YourManagedBean.java 中：

```
public void yourMethod() {
   ...
} 
```

# java - 如何防止将重复对象添加到 ArrayList

> ID：14192532
> 
> 赞同：17
> 
> 时间：2013-01-07T08:49:47.793
> 
> 标签：java, oop, data-structures

> **可能重复：**
> [防止数组列表中的重复条目](https://stackoverflow.com/questions/9962082/prevent-duplicate-entries-in-arraylist)

我有一个特定 C 类的数组列表。

```
List<C> myList = new ArrayList<C>(); 
```

C类有两个属性，即。

```
String str1;
String str2; 
```

现在，当我将 C 类型的对象添加到 ArrayList myList 时，我想检查列表中是否已经存在一个对象，其 str1 和 str2 的值与对象的参数（str1 和 str2）的值匹配我正要补充。

有没有任何有效的方法可以做到这一点，而不必每次都遍历完整列表并检查参数之间的匹配？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-07T08:50:42.320

当您需要检查重复项或确保唯一值时，请考虑使用类似[Set](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)的数据结构，而不是 List。

您可以选择以下之一 -

*   [**哈希集**](http://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html)

    *   更快的访问 - 粗略地说 O(1) 访问。
    *   未排序
    *   哈希表用作基本存储。
*   [**树集**](http://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html)

    *   访问速度较慢（相对于 HashSet） - O(log(n))
    *   值自动排序。
    *   红黑树用作基础存储。

自动设置只允许唯一值。尝试添加以前存在的值将失败。

请注意，要使其正常工作，您需要覆盖`equals`并`hashcode`告诉`Set`如何比较您的对象。在 Java 中覆盖 equals 和 hashCode时[应该考虑哪些问题？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-07T08:51:48.127

您需要覆盖`equals`C 类中的方法。

例如

```
public boolean equals(Object c) {
    if(c !instanceof C) {
        return false;
    }

    C that = (C)c;
    return this.str1.equals(that.getStr1()) && this.str2.equals(that.getStr2());
} 
```

然后你可以调用 myList.contains(viz) 来查看列表是否已经包含一个相等的对象。

这是未经测试的，您可能需要一些额外的错误处理。

如果你确实像这样覆盖了 equals 方法，你还应该确保你覆盖了 hashcode() 方法。见：[http ://www.technofundo.com/tech/java/equalhash.html](http://www.technofundo.com/tech/java/equalhash.html)

**编辑**：正如评论中所指出的，set 实现将更加高效，尽管您仍然需要覆盖 equals / hashcode 方法，因此上述示例可能最好与上面的 Karthik 答案结合使用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-07T08:51:30.633

```
if (yourList.contains(Object object))
{
    // do not add
} 
```

# node.js - node.js的控制台如何显示一些汉字

> ID：14192534
> 
> 赞同：0
> 
> 时间：2013-01-07T08:50:11.227
> 
> 标签：node.js

[为什么我在nodejs HTTP响应中不能写汉字？](https://stackoverflow.com/questions/10470426/why-cant-i-write-chinese-characters-in-nodejs-http-response)

在上面的链接中，他们能够发送响应并将其显示在 Web 浏览器中。如何在我的 node.js 控制台中显示相同的响应文本？

# android - NETWORK_PROVIDER 没有回调 onLocationChanged()

> ID：14192536
> 
> 赞同：0
> 
> 时间：2013-01-07T08:50:17.860
> 
> 标签：android, networking, provider

我正在开发一个应用程序，在该应用程序中，我使用 NETWORK_PROVIDER 获取用户位置，它在几乎所有设备上都可以正常工作，但在 KARBONN A15 上，当我们使用 NETWORK_PROVIDER 时永远不会调用 onLocationChanged() 但是如果我们在设置中启用或禁用网络提供程序 onProviderEnabled() 和onProviderDisabled() 被调用，这排除了如果我使用 GPS_PROVIDER 而不是 NETWORK_PROVIDER 而不是完美调用 onLocationChanged 时，位置监听器可能没有正确连接的可能性。

下面是代码片段：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10*1000, 0, this);
}
public void onLocationChanged(Location location) {
    Log.i("LocationDemo", "onLocationChanged() called with " + location.toString());

}

public void onProviderDisabled(String provider) {
    Log.i("LocationDemo", "onProviderDisabled() called with " + provider);

}

public void onProviderEnabled(String provider) {
    Log.i("LocationDemo", "onProviderEnabled() called with " + provider);

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    Log.i("LocationDemo", "onStatusChanged() called with " + provider);

} 
```

感谢您的支持，我已经就此与 Karbonn 取得联系。我可以做些什么来检查设备出了什么问题，如果我能够识别问题，这将很有帮助。

我用谷歌搜索了这个问题，发现有一个 NetworkLocationService 可能正在为网络提供商进行位置查找，但我不知道如何检查它是否点击了正确的谷歌位置服务器的 URL 或者来自的响应是什么服务器以防万一。

我试图检查日志，我认为有些东西可能是问题的根源。

以下是日志：

> ```
>  01-02 19:17:06.790: I/ONCRPC(109): oncrpc_proxy_handle_cmd_rpc_call: Dispatching xid: 6b6
>    01-02 19:17:06.790: I/ONCRPC(109): oncrpc_xdr_reply_msg_start: Prog: 00000000, Ver: 00000000, Proc: 00000000 Xid: 000006b6
>    01-02 19:17:06.790: I/ONCRPC(109): oncrpc_msg_reply: Prog: 00000000, Ver: 00000000, Proc: 00000000 Xid: 000006b6
>    01-02 19:17:06.790: I/ONCRPC(109): oncrpc_proxy_handle_cmd_rpc_call: Dispatch returned for xid: 6b6 
> ```

# c++ - C++ 的 std::regex 中有最大组限制吗？

> ID：14192538
> 
> 赞同：11
> 
> 时间：2013-01-07T08:50:24.847
> 
> 标签：c++, regex, c++11

这是代码：

当有 31 个组时找到：

```
try
{
    regex re("(0)(1)(2)(3)(4)(5)(6)(7)(8)(9)(a)(b)(c)(d)(e)(f)(g)(h)(i)(j)(k)(l)(m)(n)(o)(p)(q)(r)(s)(t)(u)", tr1::regex::icase);
}
catch (regex_error e)
{
    std::cout << e.what();
} 
```

但是，我尝试再添加一个组（总共 32 个组），哎呀：

```
try
{
    regex re("(0)(1)(2)(3)(4)(5)(6)(7)(8)(9)(a)(b)(c)(d)(e)(f)(g)(h)(i)(j)(k)(l)(m)(n)(o)(p)(q)(r)(s)(t)(u)(v)", tr1::regex::icase);
}
catch (regex_error e)
{
    std::cout << e.what();
} 
```

捕获并打印 regex_error 异常

> 正则表达式错误

我在 Windows 7 上使用 VisualStudio 2010

似乎有组的最大限制。我怎样才能打破限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:39:23.903

我不确定 windows 版本，但 gcc 版本只有部分支持

[http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)

它的第 28 节你在看。其他语言似乎能够匹配更多组

也许尝试不同的引擎？

[http://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines](http://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines)

# php - 按天对查询的数据进行分组并布局到网格中

> ID：14192543
> 
> 赞同：1
> 
> 时间：2013-01-07T08:50:49.510
> 
> 标签：php, mysql, codeigniter, grid

我有一个有点社交网络的日志项目，它让用户输入他们一整天所做的任何活动。

在我的数据库上，我有一个“日志”表，其中包含以下字段：

```
| log_id | log_content | log_date | log_author | 
```

我的问题是，我怎样才能做一个查询来获取前 n 天，然后在网格视图中显示它的结果，如下所示：

```
| Monday, December 7, 2013
| log_content, log_author, 6 AM | log_content, log_author, 8:30 AM | ...|

| Tuesday, December 8, 2013
| log_content, log_author, 7:10 AM | log_content, log_author, 12:00 NN | log...|

| Wednesday, December 9, 2013
| log_content, log_author, 6:30 PM |

| Thursday, December 10, 2013
| log_content, log_author, 9:53 AM | log_content, log_author, 4:02 PM | ...|

| Friday, December 11, 2013
| log_content, log_author, 1:34 PM | 
```

我知道我不能对整个“日志”表进行查询，因为当日志增长时它会导致瓶颈。我正在考虑按位进行查询，当用户向下滚动时，将运行另一个后台查询以显示下一组数据（*使用限制和偏移量*）。

我目前的查询如下所示：

```
function fetch_logs($group_id, $limit, $offset){
        $this->db->select('l.log_id, l.log_date, l.log_content, u.username');
        $this->db->from('logs AS l');
        $this->db->join('log_group_ref AS r', 'l.log_id = r.log_id');
        $this->db->join('users AS u', 'l.log_author = u.user_id');
        $this->db->where('r.group_id', $group_id);
        $this->db->limit($limit, $offset);
        return $this->db->get()->result_array();
    } 
```

但我不知道如何按天对查询的数据进行分组并将它们放入网格中。

我正在使用带有网格的 Twitter 引导程序，因此我可以将每个日志很好地放入网格中，然后如果有更多日志，只需添加滚动条。

更新：

所以我根据 raheel shan 的第二种方法更新了我的代码，但我似乎无法获得我想要的数据，直到我添加：

```
$this->db->group_by(l.log_date); 
```

基于 Exander 的代码，它获取正确的数据集，尽管格式与 raheel shan 的不同。

所以在这两个中，这是我更新的查询：

```
$select =   array(
                            "DATE_FORMAT(l.log_date,'%a , %b %d , %Y') AS LogDate",
                            "GROUP_CONCAT(l.log_id) AS LogIDs",
                            "GROUP_CONCAT(l.log_content) AS LogContents",
                            "GROUP_CONCAT(u.username) AS LogAuthors",
                            "GROUP_CONCAT(DATE_FORMAT(l.log_date,'%h:%i %p')) AS LogTimes"
                        );
            $this->db->select($select);
            $this->db->from('logs AS l');
            $this->db->join('log_group_ref AS r', 'l.log_id = r.log_id');
            $this->db->join('users AS u', 'l.log_author = u.user_id');
            $this->db->where('r.group_id', $group_id);
            $this->db->group_by('l.log_date');
            $this->db->limit($limit, $offset);
            return $this->db->get()->result_array(); 
```

现在，我将不得不处理爆炸每个 LogContents、LogAuthors、LogTimes 并将它们组合回数组中。我需要再次研究 raheel shan 的代码。

更新：我终于得到了实现这一目标所需的所有东西。我将 raheel shan 标记为已接受，因为我只能接受一个。虽然 Exander 的代码也是正确的，但代码较少，这使它变得很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:13:52.503

我不完全确定，但这个查询似乎能够在没有任何子查询的情况下获得您需要的结果：

```
SELECT
    DATE_FORMAT(l.log_date,'%W , %M %d , %Y') AS day,
    GROUP_CONCAT(l.log_content, ', ', u.username, ', ', DATE_FORMAT(l.log_date, '%l:%i %p') ORDER BY l.log_date SEPARATOR ' | ') AS activity
FROM logs as l
INNER JOIN users u ON u.user_id = l.log_author
INNER JOIN log_group_ref r ON r.log_id = l.log_id
WHERE r.group_id = **<YOUR_GROUP_ID>**
GROUP BY DATE(l.log_date) ASC; 
```

您可能会在[此处](http://sqlfiddle.com/#!2/ea57e/1)看到示例（部分复制并粘贴自 raheel shan 的示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:48:35.853

这是你如何做到的。查看演示

### [这里](http://sqlfiddle.com/#!2/675e8/9)

```
SELECT
    DATE_FORMAT(l.log_date,'%a , %b %d , %Y') as LogDate,
    DATE(l.log_date) as LDate,
    GROUP_CONCAT(r.data) as LogData
FROM logs as l
INNER JOIN  (
            SELECT 
                    logs.log_date,
                    GROUP_CONCAT(other) as data     
            FROM logs
            LEFT JOIN (
                        SELECT 
                            log_date,
                            CONCAT(log_content, ' | ', log_author , ' | ' , DATE_FORMAT(log_date,'%h:%i %p')) as other 
                        FROM logs
                        GROUP BY log_date
            ) as t ON t.log_date = logs.log_date
            GROUP BY log_date
) as r ON r.log_date = l.log_date
GROUP BY LDate 
```

在 Codeigniter 中

```
$query  ="  SELECT
                DATE_FORMAT(l.log_date,'%a , %b %d , %Y') as LogDate,
                DATE(l.log_date) as LDate,
                GROUP_CONCAT(r.data) as LogData
            FROM logs as l
            INNER JOIN  (
                        SELECT 
                                logs.log_date,
                                GROUP_CONCAT(other) as data     
                        FROM logs
                        LEFT JOIN (
                                    SELECT 
                                        log_date,
                                        CONCAT(log_content, ' | ', log_author , ' | ' , DATE_FORMAT(log_date,'%h:%i %p')) as other 
                                    FROM logs
                                    GROUP BY log_date
                        ) as t ON t.log_date = logs.log_date
                        GROUP BY log_date
            ) as r ON r.log_date = l.log_date
            GROUP BY LDate";

$result =   $this->db->query($query);
return $result->result(); 
```

学习点

左加入
Group_Concat
Concat
DATE_FORMAT

编辑：第二种
方法

如果你想用 php 做它很容易。这是你如何做到的。第一个模型函数

```
function fetch_logs($group_id, $limit, $offset)
{
        $select =   array(
                        "DATE_FORMAT(l.log_date,'%a , %b %d , %Y') as LogDate",
                        "GROUP_CONCAT(l.log_id) as LogIDs",
                        "GROUP_CONCAT(l.log_content) as LogContents",
                        "GROUP_CONCAT(l.log_author) as LogAuthors",
                        "GROUP_CONCAT(DATE_FORMAT(l.log_date,'%h:%i %p')) LogTimes"
                    );
        $this->db->select($select);
        $this->db->from('logs AS l');
        $this->db->join('log_group_ref AS r', 'l.log_id = r.log_id');
        $this->db->join('users AS u', 'l.log_author = u.user_id');
        $this->db->where('r.group_id', $group_id);
        $this->db->group_by(l.log_date);
        $this->db->limit($limit, $offset);
        return $this->db->get()->result_array();
} 
```

现在在控制器功能中

```
function getLogs()
{
    $result =   $this->yourmodel->fetch_logs();
    $data   =   array();
    $i  =   0;

    foreach($result as $row)
    {
        $logids     =   explode(',',$row['LogIDs']);
        $logcontents    =   explode(',',$row['LogContents']);
        $logauthors =   explode(',',$row['LogAuthors']);
        $logtimes       =   explode(',',$row['LogTimes']);

        $counter    =   count($logids);
        $test   =   array();

            for($j=0;$j<$counter;$j++)
            {
                $test[] =   $logcontents[$j] .','. $logauthors[$j] .','.$logtimes[$j];
            }
        $data[$i]['logdata']    =   implode('|',$test);
        $data[$i]['logdate']    =   $row['LogDate'];
        unset($test);
        $i++;
    }

    $viewdata['data']   =   $data;
    $this->load->view('my_view',$viewdata);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:03:17.370

你可以试试这个——

```
$this->db->select("l.log_id, date_format(l.log_date,'%W %M, %d %Y') D, l.log_content, u.username");
        $this->db->from('logs AS l');
        $this->db->join('log_group_ref AS r', 'l.log_id = r.log_id');
        $this->db->join('users AS u', 'l.log_author = u.user_id');
        $this->db->where('r.group_id', $group_id);
        $this->db->order_by('l.log_date','desc');
        $this->db->limit($limit);

        return $this->db->get()->result_array(); 
```

我刚刚格式化了日期（l.log_date）并添加了 order_by 子句，以便它获取前 N 天的活动。

# android - Android - Spinner 不旋转。微调器冻结

> ID：14192544
> 
> 赞同：1
> 
> 时间：2013-01-07T08:50:59.230
> 
> 标签：android, android-spinner, android-dialog

我有一个进度对话框。progressDialog 中的微调器必须旋转，它不应该允许用户做任何事情。但是微调器无法正常工作。它被冻结并进入下一个活动。你能帮我解决这个问题吗？

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){
    case R.id.bNewTicket:    
        // custom dialog 
        LayoutInflater li = LayoutInflater.from(context);
        final View promptsView = li.inflate(R.layout.homepagedialognewticket, null);
        alertDialogBuilder = new AlertDialog.Builder(context); 
        alertDialogBuilder.setView(promptsView);   

        // set dialog message
        alertDialogBuilder.setPositiveButton("Go", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) { 
                    EditText etTableNumber,etGuestCount;  
                    etTableNumber = (EditText) promptsView.findViewById(R.id.etTableNumber);
                    etGuestCount  = (EditText) promptsView.findViewById(R.id.etGuestCount);
                    tableNumber = etTableNumber.getText().toString();
                    guestCount  = etGuestCount.getText().toString();  
                    if ( tableNumber.isEmpty() || guestCount.isEmpty() ) {
                        Dialog d = new Dialog(context);
                        d.setTitle("Alert  ");
                        TextView tv = new TextView(context);
                        tv.setText("Table # and Guest # are mandatory ");
                        d.setContentView(tv);
                        d.show();
                    } else{ 
                        dialog.cancel(); 
                        runDialog();
                        }
                }
              })
              .setNegativeButton("Back",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) { 
                dialog.cancel();
                }
              });

        AlertDialog alertDialog = alertDialogBuilder.create(); 
        alertDialog.show();  
        break;   
    }       
} 

private void createNewTicket() {
        try {  

            Terminal terminal;
            terminal = PosClient.getTerminal(85);
            Ticket ticket = PosClient.createTicket(Integer.valueOf(tableNumber), Integer.valueOf(guestCount), terminal, ((User) basket.getSerializable("user")));
            Intent i = new Intent(HomePage.this,NewTicket.class);   
            basket.putSerializable("ticket", ticket);
            i.putExtras(basket);
            startActivity(i);   
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    } 

private void runDialog()
    { 
        progressDialog = ProgressDialog.show(this, "Please wait...." , "Menu is loading");

        progressDialog.setCancelable(true);
                new Thread(new Runnable(){
            public void run(){ 

            createNewTicket(); 
                progressDialog.dismiss(); 
            }
        }).start();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:36:57.327

将 createNewTicket 函数更改为异步任务。

在您的代码中，所有任务都在主线程上运行。只有在主线程停止执行时，布局更改才会生效。

# c++ - 使用 C++，如何在终止前检测进程

> ID：14192549
> 
> 赞同：0
> 
> 时间：2013-01-07T08:51:16.823
> 
> 标签：c++, windows, process

我正在使用 Visual C++ 我正在尝试监视另一个进程。有没有办法检测进程何时终止？我的意思是在它终止之前，程序可以引发一个事件。在该事件之后，该过程将被终止。我希望我的代码在进程终止之前运行。

我之所以要这样做是因为我使用 WMI 来检测启动的进程。但是有些进程结束得太快了，我的代码还没有运行，但是进程已经结束了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:39:34.183

您将使用该`DebugActiveProcess`函数，然后使用以`WaitForDebugEvent`- 开头的循环，当进程退出时，您会得到一个`EXIT_PROCESS_DEBUG_EVENT`.

您可能会收到一堆其他调试事件[这取决于您何时附加到进程以及该进程在该点之后执行的操作]。对于那些，您只需调用`ContinueDebugEvent`- 如果是异常，`DBG_EXCEPTION_NOT_HANDLED`则应使用，否则，`DBG_CONTINUE`.

一旦你看到你的`EXIT_PROCESS_DEBUG_EVENT`，你做你的事，然后发布`DBG_CONTINUE`。您还需要`LOAD_DLL_DEBUG_EVENT`通过关闭给定的句柄来处理，否则您将泄漏句柄。

我没有`DebugActiveProcess`以这种方式使用过，但我相信这会奏效。

有关更多详细信息，请参阅这些函数： [Windows 调试函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679303%28v=vs.85%29.aspx)

# jquery - 堆栈与 jquery - 手风琴

> ID：14192562
> 
> 赞同：1
> 
> 时间：2013-01-07T08:51:55.433
> 
> 标签：jquery

我[这里有代码示例](http://jsfiddle.net/tq5Y8/)

我想要的是当手风琴关闭时颜色变回黄色。

“在示例中，当我单击红色关闭选项卡时，颜色将变为黄色”

```
$("#accordion > li").click(function(){
  $('.active').removeClass('active');

  $(this).addClass('active');
    if(false == $(this).next().is(':visible')) {
        $('#accordion > ul').slideUp(300);
    }
    $(this).next().slideToggle(300);
});

var animationIsOff = $.fx.off;
$.fx.off = true;
$('#accordion > li:eq(0)').click()
$.fx.off = animationIsOff; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:55:53.277

切换类而不是无条件地添加它。这是一个[演示](http://jsfiddle.net/9vfwt/)：

```
$("#accordion > li").click(function () {
    $('.active').not(this).removeClass('active');

    $(this).toggleClass('active');

    if (false == $(this).next().is(':visible')) {
        $('#accordion > ul').slideUp(300);
    }

    $(this).next().slideToggle(300);
}); 
```

# android - 自定义布局上的 Android 翻译Y

> ID：14192566
> 
> 赞同：0
> 
> 时间：2013-01-07T08:52:08.170
> 
> 标签：android, animation, layout, translation

我的应用程序中有一个自定义布局。我希望键盘弹出时布局向上移动。
我通过使用 ObjectAnimator 沿 Y 轴平移我的布局来做到这一点。问题是我的布局在底部延伸。.ie**我想在我的布局下方看到一个黑条，但是布局只是在底部拉伸**。
关于如何停止拉伸的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:58:29.887

除了自己管理之外，您只需尝试`<activity android:name=".TodoEdit" android:windowSoftInputMode="adjustResize">`在清单文件中添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:18:24.460

发现问题...如果将以下项目添加到活动样式中，则动画会出现问题：

```
 <item name="android:windowBackground">@null</item> 
```

# css - 使用 STATIC_URL 标签加载 CSS 样式表

> ID：14192569
> 
> 赞同：1
> 
> 时间：2013-01-07T08:52:45.813
> 
> 标签：css, django, url, static, stylesheet

在我的网站中，我集成了一个样式表和一个 javascript 文件。我加载它如下：

```
<head>
<link rel="stylesheet" href="{{ STATIC_URL }}css/style.css" type="text/css" media="all">
<script src="{{ STATIC_URL }}js/filterlist.js" type="text/javascript"></script> 
```

javascript 有效，但样式表无效。我也试过这样：

```
<link rel="stylesheet" href="P:/Daten/Projects/Vorbild/templates/static/css/style.css" type="text/css" media="all"> 
```

当我这样做时，样式表会加载，但是当我从没有连接到这个 P: 的计算机上运行页面时，css 文件不会加载。（加载图像时也会出现同样的问题）

起初，我认为这是我的设置文件中的问题，但如果是这种情况，为什么 js 文件可以工作/加载？以下是我的设置文件中的片段：

```
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = ("P:/Daten/Projects/Vorbild/templates/static/",
INSTALLED_APPS = (
'django.contrib.staticfiles',
'klasse',
-->not all are postet now
TEMPLATE_DIRS = ('P:/Daten/Projects/Vorbild/templates/html',) 
```

现在完整的网址：

```
from django.conf.urls import patterns
from klasse.views import portal, kundendaten, portal2, error

urlpatterns = patterns('',
    (r'^portal/$', portal),
    (r'^kundendaten/$', kundendaten),
    (r'^portal2/$', portal2),
    (r'^error/$', error),
) 
```

我的文件夹如下所示：

P:\Datan\Projects\Vorbild\templates\html\allhtml

P:\Datan\Projects\Vorbild\templates\static\css\style.css

P:\Datan\Projects\Vorbild\templates\static\js\filterlist.js

我应该改变什么，以便我可以在我的服务器上使用 css 样式表运行这个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:20:17.727

为什么不将 html、css、图像...等分组。将 HTML 放在`static`文件夹中。将 CSS 文件放在`css`文件夹中。只需使用该路径作为`HEAD`HTML 中的源代码：

```
<link rel="stylesheet" href="css/style.css" type="text/css" media="all" /> 
```

如果我理解你是正确的，我认为就是这样。

# java - Swing 中的组件究竟是什么时候实现的

> ID：14192572
> 
> 赞同：1
> 
> 时间：2013-01-07T08:52:54.527
> 
> 标签：java, multithreading, swing, user-interface

我正在开发一个应用程序，其中所有 UI 组件都是通过 XML 文件定义的。我阅读了 xml 并根据它组成了 UI。在用户进行一些更改后，会提供一个新的 XML 并相应地刷新 UI。现在我遇到了一些非常烦人的渲染问题，尤其是在几个滚动区域中，UI 的任何部分都被剪切（并且只有在我调整窗口大小时才可见）或者滚动条已经滚动到某个点，但它应该只是显示内容的顶部。

我认为这是一个事件调度线程问题，并在这里找到了一些非常有用的信息：[http ://www.javapractices.com/topic/TopicAction.do?Id=153](http://www.javapractices.com/topic/TopicAction.do?Id=153)

您可以在此处阅读：“该线程（EDT）在组件实现后变为活动状态：pack、show 或 setVisible(true) 已被调用”

解析 XML 不在 EDT 中完成，并且还实例化组件并将它们添加到它们的父面板。只有在创建了所有组件之后，它们才会最终通过 EDT 添加到 MainPane。然而，在某些情况下，创建组件并将它们添加到面板中似乎已经启动了 EDT。所以事情变得一团糟。

是否有人详细了解哪些方法调用 pack、show 或 setVisible(true) 并因此启动 EDT？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:47:56.863

我对滚动窗格有同样的问题，请尝试在它们上设置以下属性：

```
scrollpane.getViewport().setScrollMode(JViewport.SIMPLE_SCROLL_MODE); 
```

正如评论中所说，所有 Swing 组件都必须在 EDT 上创建，否则您会遇到奇怪的事情。

# iphone - ipad和iphone之间主要的不同UI控件是什么

> ID：14192585
> 
> 赞同：0
> 
> 时间：2013-01-07T08:53:49.347
> 
> 标签：iphone, ipad

我是 iPhone 和 iPad 开发的新手。我想使用 iPad。所以我想知道 iPad 和 iPhone 的主要区别`UIControls`。
有谁能够帮助我？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:01:51.490

理想情况下 iPhone 和 iPad 的 UIControls 没有区别

对于 iPad 有额外的控制命名`UIPopoverController`和`UISplitViewController`

此外，对于 iPad，键盘始终有关闭按钮，位于右下角。

希望这些信息对你有帮助

编辑 ：-

这是[UIPopOverController的实现和演示](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:03:40.607

请检查[**MobileHIG**](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html) 的控件。

主要区别在于 iPad 有两个控件，而这些控件不适用于 iPhone。

1.  **UIPopoverController**
2.  **UISplitViewController**

# xaml - “列表是实现 IList 接口或其通用对应物的任何集合”是什么意思？

> ID：14192588
> 
> 赞同：0
> 
> 时间：2013-01-07T08:53:51.933
> 
> 标签：xaml, generic-list

我正在读一本关于 XAML 的书。而且我无法弄清楚“其通用对应物”在以下上下文中的含义。在学习计算机语言时，“通用”一词总是让我感到困惑。

* * *

列表是实现 IList 接口或其通用对应物的任何集合。例如，以下 XAML 将两个项目添加到 ListBox 控件，其 Items 属性是实现 IList 的 ItemCollection：

```
<ListBox xmlns=”http://schemas.microsoft.com/winfx/2006/xaml/presentation”&gt;
<ListBox.Items>
    <ListBoxItem Content=”Item 1”/>
    <ListBoxItem Content=”Item 2”/>
</ListBox.Items>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:42:27.580

它只是意味着集合类实现了这两个接口中的一个或两个：

*   [System.Collections.IList](http://msdn.microsoft.com/en-us/library/30ft6hw7.aspx)
*   [System.Collections.Generic.IList<T>](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)

另请参阅[泛型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx) 。

# jquery - primefaces 单选按钮的圆角

> ID：14192591
> 
> 赞同：0
> 
> 时间：2013-01-07T08:54:02.793
> 
> 标签：jquery, jsf-2, primefaces

使用单选按钮时，在 IE 8 中避免角落问题的正确用法是什么？例如

我的`<p:column id="rad" selectionMode="single" />`数据表中有

在 IE 8 中，单选按钮呈现为复选框，位于一个方框中。所以为了解决这个问题，我使用了

```
<h:outputScript library="primefaces" name="jquery/jquery.js">
$(document).ready(function() {
          $('rad').corner();      
    });
</h:outputScript> 
```

然而这并没有解决问题。

那么为单选按钮设置圆角的正确方法是什么？

谢谢

编辑 1

```
<h:head>

<style type="text/css">
   <![CDATA[

      .radio input 
{
    position: absolute;
    left: -9999px;
}

.label_radio 
{
    background: url("/radio_labels.jpg") no-repeat scroll 0 0 transparent;
    height: 1em;
    width: 1em;
}

.label_radio.r_on 
{
    background-position: 0 -18px;
}

.radio label 
{
    display: inline;
    padding-bottom: 0.1em;
    padding-right: 1.9em;
}

   ]]>
</style>
</h:head>

<h:outputScript>
    $(document).ready(function() {
    alert("1");
    $('.rad label').addClass('label_radio');
if ($('.rad input').length) {
    $('.rad input').each(function () {
        $(this).next('label').removeClass('r_on');
    });
    $('.rad input:checked').each(function () {
        $(this).next('label').addClass('r_on');
    });
};

    });
</h:outputScript> 
```

和数据表中的单选按钮。

```
<p:column  id="rad" selectionMode="single"  /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:24:37.193

这就是我的做法：

**CSS：**

```
.radio input 
{
    position: absolute;
    left: -9999px;
}

.label_radio 
{
    background: url("images/buttons/radio_labels.jpg") no-repeat scroll 0 0 transparent;
    height: 1em;
    width: 1em;
}

.label_radio.r_on 
{
    background-position: 0 -18px;
}

.radio label 
{
    display: inline;
    padding-bottom: 0.1em;
    padding-right: 1.9em;
} 
```

**jQuery：**

```
$('.address_type label').addClass('label_radio');
if ($('.address_type input').length) {
    $('.address_type input').each(function () {
        $(this).next('label').removeClass('r_on');
    });
    $('.address_type input:checked').each(function () {
        $(this).next('label').addClass('r_on');
    });
}; 
```

**HTML：**

```
<div class="address_type clear width">
<span class="radio twelvepx">
<input id="rbDelAddr" type="radio" value="0" name="AddrType">
<label class="label_radio" for="rbDelAddr">Delivery Address</label>
</span>
<span class="radio twelvepx">
<input id="rbInvAddr" type="radio" value="-1" name="AddrType">
<label class="label_radio" for="rbInvAddr">Billing Address</label>
</span>
</div> 
```

# mysql - 重新排列一个mysql表

> ID：14192598
> 
> 赞同：0
> 
> 时间：2013-01-07T08:54:30.110
> 
> 标签：mysql, sql, database, database-administration

我有一张有 62 列的表

就像是

```
CREATE TABLE history_employees (
     id INT NOT NULL,
     first_name VARCHAR(20),
     last_name VARCHAR(20),
     hire_date DATE NOT NULL,
     job_code INT NOT NULL,
     dept_id INT NOT NULL,
     .
     .
     .
     .

); 
```

现在我想更改列的顺序以正确排列数据并改进使用 select 的检索（如果列的排列顺序和选择列表中的顺序匹配，那么查询执行会有一些改进）

我不想使用alter table ....修改

任何人都可以用单个或几个语句帮助我完成上述工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:57:33.843

如果您希望加快引用少量列的查询，您应该使用覆盖索引：[http ://dom.as/2007/01/26/mysql-covering-index-performance/](http://dom.as/2007/01/26/mysql-covering-index-performance/)

更改列顺序不会提高性能，因为数据库一次检索一整行的结果（如[ICP 优化](http://dev.mysql.com/doc/refman/5.6/en/index-condition-pushdown-optimization.html)中所述）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:03:01.620

如果你正在使用`EMS SQL Manager`，你可以试试这个。[重新排序列](http://www.sqlmanager.net/en/products/mysql/manager/documentation/hs5433)

# class - 在 300px 容器中创建一个 100% 宽度的 div

> ID：14192600
> 
> 赞同：0
> 
> 时间：2013-01-07T08:54:31.763
> 
> 标签：class, html, width

我想在一个 300px 的容器中制作一个 100% 宽度的 div，这怎么可能？尝试 postiton relative 和 absoulte 没有成功。

```
.container { margin:0 auto; text-align:center; background-color:black; width: 300px;}
.normalOne { background-color:grey; height: 50px;}
.hundredProcent { background-color:blue; height: 50px; width:100%;}
.normalTwo { background-color:red; height: 50px;}

<div class="container">
  <div class="normalOne"></div> 
  <div class="hundredProcent"></div> 
  <div class="normalTwo"></div> 
</div> 
```

这是一个小提琴[http://jsfiddle.net/lamberta/2U893/](http://jsfiddle.net/lamberta/2U893/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:59:55.097

我在其中添加了一个`div.hundredProcent`具有以下样式的附加 div：

```
style='position:absolute; background-color:yellow; height: 50px; width:100%;left:0px;' 
```

检查这个更新的[小提琴](http://jsfiddle.net/2U893/3/)。你不应该设置`position:relative`为`.container`或 `.hundredProcent`div 的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:21:51.510

您不能仅通过 CSS 来做到这一点。使用Javascript；像这样的东西

```
document.getElementsByClassName('hundredProcent')[0].style.width = 
    document.body.clientWidth+'px'; 
```

例如在`onload`处理程序中。

确保它适用于您需要它运行的所有浏览器。我什至不确定是否`getElementsByClassName`在所有现代浏览器中都实现了，所以你可能需要给 div 一个`id`来肯定地识别它。

# html - 我可以让我的图像扩展以适应 HTML 部分的边界吗？

> ID：14192601
> 
> 赞同：0
> 
> 时间：2013-01-07T08:54:37.700
> 
> 标签：html, css

我有以下 HTML：

```
<section id="infopic" class="grid_5 prefix_1" style="height: 500px;">
   <div id="login-image"></div>
</section> 
```

这个CSS：

```
#infopic {
   background-image: url("/Images/login.png");
} 
```

我有几种不同的方法可以使我的图像拉伸以适应#infopic 的边界，但仍然无法使其正常工作。现在它在图像上方的代码中重复（小于 500px 正方形）只是重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:59:59.373

尝试添加`background-size`属性。

一些例子：[http ://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:00:53.077

你可以试试 background-size 声明：

```
background-size: 100% 100%; 
```

这适用于 IE9+、Firefox 4+、Opera、Chrome 和 Safari 5+。我认为它不能在旧浏览器中完成。也许：

```
#infopic {
    background-image: url("/Images/login.png") 50% 50% no-repeat;
    background-size: 100% 100%;
} 
```

为了向后兼容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:02:04.627

您可以使用 CSS3 属性`background-size: 100%;`在整个元素上拉伸图像：

```
#infopic {
  height: 500px;
  width: 1000px;
  background-image: url("http://placehold.it/250x250");
  background-repeat: no-repeat;
  background-size: 100%;
} 
```

这是一个 CSS3 属性，因此旧浏览器不支持它（我什至不确定 IE 是否支持），但它对现代浏览器很有用。

作为附加说明，混合外部和内联 CSS 是一个糟糕的想法，这就是我将高度声明移至外部 CSS 的原因。

:)

[http://jsfiddle.net/x4w7V/](http://jsfiddle.net/x4w7V/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:19:54.690

**像这样使用：**

```
img {
  background-size: 100%;
  max-width: 100%;
} 
```

**参考：**

[流体图像](http://www.alistapart.com/articles/fluid-images/)

# regex - 仅包含带有正则表达式的“字符串”

> ID：14192602
> 
> 赞同：-2
> 
> 时间：2013-01-07T08:54:40.343
> 
> 标签：regex

```
lolhellolol
hellohello
hello
hello+1 
```

我正在寻找完全匹配的所有字符串，仅此`hello`而已。我不想要包含`hello`. 我将如何使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:01:51.680

正则表达式将是

```
^hello$ 
```

但我会简单地使用您的应用程序代码来测试字符串是否等于“hello”，不需要正则表达式。

```
java: if (s.equals("hello"))
shell: if [ $s -eq "hello" ];
JavaScript: if ( s == "hello" ) 
```

等等我可以继续。也许其他人想添加其他语言的版本。实际上，我很想看看我们可以用多少种语言编写测试代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:00:43.817

如果您*只想* 匹配`hello`：

```
^hello$ 
```

但是，使用您的语言的语法来执行以下操作很可能是一个更好的主意：

```
if(myString == "hello"){}          // JavaScript // Ruby
if($myString == "hello"){}         // php
if(myString.equals("hello"))       // Java / C#
IF %myString == "hello"            // Batch
if(strcmp(myString, "hello") == 0) // C++
if myString == "hello":
    //Do something                 // Python
// You get the idea. 
```

# vba - VBA - 从其他工作簿获取单元格值而不打开

> ID：14192610
> 
> 赞同：2
> 
> 时间：2013-01-07T08:55:05.057
> 
> 标签：vba, cell, excel

我正在努力获取其他工作簿的单元格值而不打开它。

这是我的一些代码：

`Range("F3")= "='C:\inetpub\vhosts\hotdogko.com\httpdocs\private\excel\[Launch Pad.xls]Sheet1'!$B$12 "`

当要提取的单元格值的数据类型是 Date、Integer 或 Any not String 数据类型时，此代码运行良好。但它不能正确处理字符串数据类型，它只是返回#N/A。

感谢有人可以给我这个问题的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-01T07:34:35.030

您可以尝试以下答案

```
Sub ReadDataFromAnotherWorkBook()

    ' Open Workbook A with specific location
    Dim src As Workbook
    Set src = Workbooks.Open("C:\Users\chan.yoonghon\Desktop\Excel\BookA.xlsx", True, True)

    Dim valueBookA As Integer
    Dim valueBookB As Integer

    valueBookA = src.Worksheets("sheet1").Cells(1, 1)
    Cells(1, 1).Value = valueBookA

    ' Close Workbooks A
    src.Close False
    Set src = Nothing

     ' Dialog Answer
    MsgBox valueBookA
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-20T15:03:52.827

如果你在 equal 之后添加 text 函数，它应该像这样工作：

```
Range("F3")= "=text("'C:\inetpub\vhosts\hotdogko.com\httpdocs\private\excel\[Launch Pad.xls]Sheet1'!$B$12 " ;"") " 
```

也许您应该检查是否`"`正确，因为有时您必须添加 double `""`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-26T11:12:36.697

尝试不使用引号 (" ")。它应该有帮助。

# c# - 如何将 var 转换为 DataTable？

> ID：14192611
> 
> 赞同：1
> 
> 时间：2013-01-07T08:55:17.223
> 
> 标签：c#, asp.net, linq, entity-framework

我有以下功能 -

```
public static DataTable getDetails(PersonContext context)
{
DataTable dt = new DataTable();
IQueryable<Person> query = from p in context.Persons.Include("Employee")
                                                    .Include("Manager")
                                                    .Include("Activity")
                           where p.Activity.IsActive
                           select p;
var sorted = query.ToArray().OrderByDescending(p=>p.Activity.DateCreated);
dt = (DataTable)sorted;
return dt;
} 
```

我无法测试它。我的问题是 - 这个功能会起作用吗？如果没有，我应该对其进行哪些更改？

**更新**

```
public static DataTable getDetails(PersonContext context)
{
DataTable dt = new DataTable("Details");
dt.Columns.Add("Name");
dt.Columns.Add("Department");
dt.Columns.Add("IsManager");
IQueryable<Person> query = from p in context.Persons.Include("Employee")
                                                    .Include("Manager")
                                                    .Include("Activity")
                           where p.Activity.IsActive
                           select p;
var sorted = query.ToArray().OrderByDescending(p=>p.Activity.DateCreated);
foreach(Person p in sorted)
{
    dt.Rows.Add(p.Name, p.Employee.Department,p.Manager.IsManager);
}
    return dt;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:02:29.777

OrderByDescending() 返回 IEnumerable 而不是 DataTable

这个链接回答了似乎是同一个问题。 [LINQ to DataTable 轻松快速](https://stackoverflow.com/questions/11491594/linq-to-datatable-easy-and-fast)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:06:20.193

```
dt = (DataTable)sorted; 
```

是无效的演员表。正确的方法是使用 . 将返回的数组添加到 dt 中
`dt.Rows.Add(query.ToArray().OrderByDescending(p=>p.Activity.DateCreated).toArray());`。[您可以在将数据添加到数据表](http://msdn.microsoft.com/en-us/library/z16c79x4.aspx)
中找到更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:02:26.403

如果返回类型`OrderByDescending` **是，**`DataTable`则不需要强制转换。编译器在编译时就知道方法返回类型的类型。

但是`OrderByDescending`不返回`DataTable`您需要构造它。

# jquery - 我正在使用modernizr并且检查有类......但是我错误地从'firefox'borwser得到警报

> ID：14192621
> 
> 赞同：0
> 
> 时间：2013-01-07T08:56:14.183
> 
> 标签：jquery, modernizr

我正在制作一个适用于 ie8 或更低版本的条件函数，但即使在 Firefox 中我也会收到警报。

我的代码有什么问题？

```
var makeCurves = function(element){
    alert(element); //i am getting this alert even in firefox
    //ie throw the error as object expected
}
(function($){
    if(!Modernizr.borderradius && ($('div').hasClass('comCommunity'))){
        makeCurves($('div.comCommunity'));
    }

}(jQuery)); 
```

如果我使用这样的代码，它可以正常工作：

```
$(document).ready(function(){
    if(!Modernizr.borderradius && ($('div').hasClass('comCommunity'))){
        makeCurves($('div.comCommunity'));
    }    
}) 
```

我的自调用功能有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:59:30.817

我不确定，但也许 Modernizr 会检查“border-radius”并且您的 Firefox 版本不支持 CSS3 功能？Firefox 绝对支持“moz-border-radius”。

# python - Python Twitter API - 设置显示图片和描述

> ID：14192626
> 
> 赞同：0
> 
> 时间：2013-01-07T08:56:31.863
> 
> 标签：python, api, twitter

我正在尝试设置 Twitter API 以更改 Twitter 帐户显示图片和描述。在设置 API 密钥并告诉它这样做很神奇之后，我可以顺利通过，除非检查了 Twitter 帐户并发现我的更改没有应用。我尝试了各种不同的方法，通过 API 发送最简单的描述和图片，但仍然一无所获。我做错了什么？任何帮助表示赞赏！

```
import twitter
twitterAPI = twitter.Api(consumer_key=twitterConsumerKey,
                        consumer_secret=twitterConsumerSecret,
                        access_token_key=twitterAccessToken,
                        access_token_secret=twitterAccessTokenSecret,
                            )

twitter.User().SetProfileImageUrl("http://website.com/image.jpg")
twitter.User().SetDescription("Hello there") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:45:13.327

试试这个：

```
twitterAPI.User().SetProfileImageUrl("http://website.com/image.jpg")
twitterAPI.User().SetDescription("Hello there") 
```

您正在调用模块而不是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:28:46.830

切换到使用 Tweepy，因为 python-twitter 实际上没有更改描述或个人资料图像的能力。

# r - R：给定坐标的快速滑动窗口

> ID：14192630
> 
> 赞同：9
> 
> 时间：2013-01-07T08:56:57.053
> 
> 标签：r, coordinates, sliding-window

我有一个数据表，其中 nrow 约为一两百万，ncol 约为 200。

一行中的每个条目都有一个与之关联的坐标。

数据的一小部分：

```
[1,] -2.80331471  -0.8874522 -2.34401863   -3.811584   -2.1292443
[2,]  0.03177716   0.2588624  0.82877467    1.955099    0.6321881
[3,] -1.32954665  -0.5433407 -2.19211837   -2.342554   -2.2142461
[4,] -0.60771429  -0.9758734  0.01558774    1.651459   -0.8137684 
```

前 4 行的坐标：

```
9928202 9928251 9928288 9928319 
```

我想要的是一个给定数据和窗口大小的函数，它将返回一个大小相同的数据表，并在每列上应用一个平均滑动窗口。或者换句话说 - 对于每个行条目*i*它会找到坐标在 coords[i]-windsize 和 coords[i]+windsize 之间的条目，并将初始值替换为该区间内的值的平均值（分别针对每一列） .

速度是这里的主要问题。

这是我第一次使用这种功能。

```
doSlidingWindow <- function(intensities, coords, windsize) {
windHalfSize <- ceiling(windsize/2)
### whole range inds
RANGE <- integer(max(coords)+windsize)
RANGE[coords] <- c(1:length(coords)[1])

### get indeces of rows falling in each window
COORDS <- as.list(coords)
WINDOWINDS <- sapply(COORDS, function(crds){ unique(RANGE[(crds-windHalfSize):
    (crds+windHalfSize)]) })

### do windowing

wind_ints <- intensities
wind_ints[] <- 0
for(i in 1:length(coords)) {
    wind_ints[i,] <- apply(as.matrix(intensities[WINDOWINDS[[i]],]), 2, mean)
}
return(wind_ints)
} 
```

最后一个 for 循环之前的代码非常快，它为我提供了每个条目需要使用的索引列表。然而，一切都崩溃了，因为我需要将 for 循环研磨一百万次，获取我的数据表的子集，并确保我有不止一行能够同时处理所有列。

我的第二种方法是将实际值粘贴在 RANGE 列表中，用零填充空白并从 zoo 包中进行 rollmean，对每一列重复。但这是多余的，因为 rollmean 将通过所有间隙，我最终只会使用原始坐标的值。

非常感谢您在不使用 C 的情况下使其更快的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T02:51:53.197

数据生成：

```
N <- 1e5 # rows
M <- 200 # columns
W <- 10  # window size

set.seed(1)
intensities <- matrix(rnorm(N*M), nrow=N, ncol=M)
coords <- 8000000 + sort(sample(1:(5*N), N)) 
```

我用于基准测试的原始函数稍作修改：

```
doSlidingWindow <- function(intensities, coords, windsize) {
  windHalfSize <- ceiling(windsize/2)
  ### whole range inds
  RANGE <- integer(max(coords)+windsize)
  RANGE[coords] <- c(1:length(coords)[1])

  ### get indices of rows falling in each window
  ### NOTE: Each elements of WINDOWINDS holds zero. Not a big problem though.
  WINDOWINDS <- sapply(coords, function(crds) ret <- unique(RANGE[(crds-windHalfSize):(crds+windHalfSize)]))

  ### do windowing
  wind_ints <- intensities
  wind_ints[] <- 0
  for(i in 1:length(coords)) {
    # CORRECTION: When it's only one row in window there was a trouble
    wind_ints[i,] <- apply(matrix(intensities[WINDOWINDS[[i]],], ncol=ncol(intensities)), 2, mean)
  }
  return(wind_ints)
} 
```

* * *

**可能的解决方案：**

* * *

**1) 数据表**

`data.table`众所周知，子集化速度很快，但[这个页面](https://stackoverflow.com/a/12157723/403310)（以及其他与滑动窗口相关的页面）表明，情况并非如此。确实，`data.table`代码很优雅，但不幸的是很慢：

```
require(data.table)
require(plyr)
dt <- data.table(coords, intensities)
setkey(dt, coords)
aaply(1:N, 1, function(i) dt[WINDOWINDS[[i]], sapply(.SD,mean), .SDcols=2:(M+1)]) 
```

* * *

**2) foreach+doSNOW**

基本例程易于并行运行，因此，我们可以从中受益：

```
require(doSNOW)
doSlidingWindow2 <- function(intensities, coords, windsize) {
  NC <- 2 # number of nodes in cluster
  cl <- makeCluster(rep("localhost", NC), type="SOCK")
  registerDoSNOW(cl)

  N <- ncol(intensities) # total number of columns
  chunk <- ceiling(N/NC) # number of columns send to the single node

  result <- foreach(i=1:NC, .combine=cbind, .export=c("doSlidingWindow")) %dopar% {
    start <- (i-1)*chunk+1
    end   <- ifelse(i!=NC, i*chunk, N)
    doSlidingWindow(intensities[,start:end], coords, windsize)    
  }

  stopCluster(cl)
  return (result)
} 
```

基准测试显示我的双核处理器显着加速：

```
system.time(res <- doSlidingWindow(intensities, coords, W))
#    user  system elapsed 
# 306.259   0.204 307.770
system.time(res2 <- doSlidingWindow2(intensities, coords, W))
#  user  system elapsed 
# 1.377   1.364 177.223
all.equal(res, res2, check.attributes=FALSE)
# [1] TRUE 
```

* * *

**3) RCPP**

是的，我知道你问“*不去 C* ”。但是，请看一下。这段代码是内联的，相当简单：

```
require(Rcpp)
require(inline)
doSlidingWindow3 <- cxxfunction(signature(intens="matrix", crds="numeric", wsize="numeric"), plugin="Rcpp", body='
  #include <vector>
  Rcpp::NumericMatrix intensities(intens);
  const int N = intensities.nrow();
  const int M = intensities.ncol();
  Rcpp::NumericMatrix wind_ints(N, M);

  std::vector<int> coords = as< std::vector<int> >(crds);
  int windsize = ceil(as<double>(wsize)/2);  

  for(int i=0; i<N; i++){
    // Simple search for window range (begin:end in coords)
    // Assumed that coords are non-decreasing
    int begin = (i-windsize)<0?0:(i-windsize);
    while(coords[begin]<(coords[i]-windsize)) ++begin;
    int end = (i+windsize)>(N-1)?(N-1):(i+windsize);
    while(coords[end]>(coords[i]+windsize)) --end;

    for(int j=0; j<M; j++){
      double result = 0.0;
      for(int k=begin; k<=end; k++){
        result += intensities(k,j);
      }
      wind_ints(i,j) = result/(end-begin+1);
    }
  }

  return wind_ints;
') 
```

基准：

```
system.time(res <- doSlidingWindow(intensities, coords, W))
#    user  system elapsed 
# 306.259   0.204 307.770
system.time(res3 <- doSlidingWindow3(intensities, coords, W))
#  user  system elapsed 
# 0.328   0.020   0.351
all.equal(res, res3, check.attributes=FALSE)
# [1] TRUE 
```

我希望结果是相当鼓舞人心的。虽然数据适合内存`Rcpp`版本非常快。说，`N <- 1e6`我`M <-100`得到了：

```
 user  system elapsed 
  2.873   0.076   2.951 
```

自然，在 R 开始使用 swap 之后，一切都会变慢。对于不适合内存的非常大的数据，您应该考虑`sqldf`,`ff`或`bigmemory`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-06T09:20:07.947

Rollapply 适用于小型数据集。但是，如果您正在处理几百万行（基因组学），则速度非常慢。

以下功能超级快：

```
data <- c(runif(100000, min=0, max=.1),runif(100000, min=.05, max=.1),runif(10000, min=.05, max=1), runif(100000, min=0, max=.2))
slideFunct <- function(data, window, step){
  total <- length(data)
  spots <- seq(from=1, to=(total-window), by=step)
  result <- vector(length = length(spots))
  for(i in 1:length(spots)){
    result[i] <- mean(data[spots[i]:(spots[i]+window)])
  }
  return(result)
} 
```

[详情在这里](http://coleoguy.blogspot.com/2014/04/sliding-window-analysis.html)。

# javascript - 选中复选框时使锚标记可点击

> ID：14192631
> 
> 赞同：0
> 
> 时间：2013-01-07T08:57:03.037
> 
> 标签：javascript, html

如果选中了一个复选框，是否有使锚标签可点击的方法，反之亦然（如果未选中复选框，锚标签不可点击）？

我之所以要求这样做是因为我正在开发一个定制的护齿器网站，而我的客户希望访问者在能够将护齿器添加到购物车并继续结帐之前单击一个复选框（这意味着他们同意这些条款）。

现在我在图像标签周围有一个锚标签（由于签署了保密协议，我无法显示任何代码，但我会显示设置）：

```
<input type="checkbox" name ="" id="" />

<a href="" target="" class="" onClick=""><img src="" border="" alt="" /></a> 
```

请让我知道如何实现我的目标。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:03:50.600

在`onclick`锚点中，如果未选中复选框，则可以返回 false，如果选中复选框，则返回 true。这意味着当复选框被选中时，链接将被跟踪。

```
<input type="checkbox" name ="" id="terms" />
<a href="http://google.com" target="" class="" onClick="return checkTerms();"><img src="" border="" alt="" /></a>

<script>
function checkTerms()
{
    var ticked = document.getElementById("terms").checked;

    if(!ticked) alert("Please accept the terms");

    return ticked;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:00:35.050

您必须将其添加到代码中：

```
<a href="" target="" class="" onClick="checkInput(); return false;"><img src="" border="" alt="" /></a> 
```

然后在里面`checkInput`，只检查复选框的状态。

如果选中，则使用

```
document.location = "Add to Cart Location"; 
```

或者：你可以使用这个：

```
document.getElementById("myCheckBox").addEventListener ("change", function() {
    if(this.checked) {
        document.getElementById("myLink").href = "Proper HREF";
    } else {
        document.getElementById("myLink").href = "#";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:02:29.733

假设你把它包裹在一个 div 中，你可以这样：

```
<div class="login">
 <span>I have read and agree to the terms and conditions. <input type="checkbox" name ="" id="" /></span>
 <a href="" target="" class="" onClick=""><img src="" border="" alt="" /></a>
</div> 
```

然后在你的 JavaScript 中。

```
$('.login a').click(function(ev) {
   var $checkbox = $('.login input');

   if ( $checkbox.is(':checked') ) {
     console.log('GO AHEAD');
   } else {
     alert('You need to accept the terms and conditions before proceeding');
     $checkbox.addClass('error');
     ev.preventDefault();
   } 
}); 
```

# javascript - 如何从 Javascript 在 Safari 中发送键盘事件（例如 Backspace、Delete）

> ID：14192641
> 
> 赞同：3
> 
> 时间：2013-01-07T08:57:31.290
> 
> 标签：javascript, safari, dom-events, keyboard-events

我正在为 Javascript 应用程序实现屏幕键盘。文本应出现在 textarea-Element 中。我创建文本事件没有问题，但感觉无法创建非文本事件，例如退格键。这是一些示例代码：

```
    <html>
    <头部>
    <title>测试文本区域事件</title>
    <script type="text/javascript">
    功能日志（文本）{
        var elem = document.getElementById("log");
        如果（元素）{
            elem.innerHTML += "<br/>" + 文本；
        }
    }
    功能日志事件（e）{
        log("类型：" + e.type + "，其中：" + e.which + "，keyCode：" + e.keyCode + "，charCode：" + e.charCode + "，keyIdentifier：" + e.keyIdentifier + ", 数据: " + e.data);
    }
    功能日志清除（）{
        var elem = document.getElementById("log");
        如果（元素）{
            elem.innerHTML = "";
        }
    }
    函数 sendBackEvent() {
        var textarea = document.getElementById("textarea");
        如果（！文本区域）{
            返回;
        }
        var ke1 = document.createEvent("KeyboardEvent");
        ke1.initKeyboardEvent("keydown", true, true, window, "U+0008", 0, ""); // U+0008 --> 退格
        // 如何设置“keyCode”和“which”？
        // 1\. ke1.keyCode = 8; 由于“可写：假”而被忽略
        // 2\. 删除 ke1.keyCode 也会被忽略
        // 和 Object.defineProperty(KeyboardEvent.prototype, "keyCode", ... 不管...);
        // 由于 "configurable: false" 将导致异常
        // 3\. 生成更通用的事件（例如“var e = document.createEvent("Events");"）
        // 并设置所有必要的道具（例如 "e.initEvent("keydown", true, true);e.keyCode=8;e.which=8;"）
        // 会起作用，但 textarea 会忽略事件
        textarea.dispatchEvent(ke1);

        var ke2 = document.createEvent("KeyboardEvent");
        ke2.initKeyboardEvent("keyup", true, true, window, "U+0008", 0, ""); // U+0008 --> 退格
        // 和上面一样的问题
        textarea.dispatchEvent(ke2);
    }
    函数初始化（）{
        var textarea = document.getElementById("textarea");
        如果（！文本区域）{
            返回;
        }
        textarea.addEventListener("keydown", logEvent, false);
        textarea.addEventListener("keypress", logEvent, false);
        textarea.addEventListener("keyup", logEvent, false);
        textarea.addEventListener("textInput", logEvent, false);
    }
    </脚本>
    </head>
    <body onload="init()">
    <textarea id="textarea" name="text" cols="100" rows="20"></textarea><br/><br/>
    <button onclick="sendBackEvent()">发送返回事件</button>
    <button onclick="logClear()">清除日志</button><br/>
    <div id="log"></div>
    </正文>
    </html>

```

这里有趣的功能是`sendBackEvent()`. 我努力获得完全相同的事件，例如按下物理键盘上的退格键，但没有成功。

我知道有一个[Webkit-Bug](https://bugs.webkit.org/show_bug.cgi?id=16735)，但希望有其他方法可以让它工作。有没有人有同样的问题？能解决吗？如何？[此处](https://stackoverflow.com/questions/961532/firing-a-keyboard-event-in-javascript)建议的解决方案（调用 new `KeyboardEvent(...)`）不起作用，因为直接调用 KeyboardEvent 构造函数会导致以下异常：

> 异常：TypeError：'[object KeyboardEventConstructor]' 不是构造函数（评估'new KeyboardEvent(...)'）

我没有更多的想法了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:49:03.350

由于似乎没有出路，我发现自己不得不安装自己的退格事件处理程序。工作代码（现在没有记录）在这里：

```
    <html>
    <头部>
    <title>测试文本区域事件</title>
    <script type="text/javascript">
    函数 sendBackEvent() {
        var textarea = document.getElementById("textarea");
        如果（！文本区域）{
            返回;
        }
        var ke1 = document.createEvent("事件");
        ke1.initEvent("keydown", true, true);
        ke1.keyCode = ke1.which = 8; //退格
        textarea.dispatchEvent(ke1);

        var ke2 = document.createEvent("事件");
        ke2.initEvent("keyup", true, true);
        ke2.keyCode = ke2.which = 8; //退格
        textarea.dispatchEvent(ke2);
    }
    函数handleBackEvent（e）{
        if(e.keyCode != 8) {
            返回;
        }
        if (textarea.value.length == 0) {
            返回;
        }
        var text = textarea.value;
        var selectionStart = textarea.selectionStart;
        var selectionEnd = textarea.selectionEnd;
        if (selectionStart < selectionEnd) {
            var text1 = (selectionStart > 0 ? text.slice(0, selectionStart) : "");
            var text2 = (selectionEnd < text.length ? text.slice(selectionEnd) : "");
            textarea.value = text1 + text2;
        }
        否则如果（选择开始> 0）{
            var text1 = (selectionStart - 1 > 0 ? text.slice(0, selectionStart - 1) : "");
            var text2 = (selectionStart < text.length ? text.slice(selectionStart) : "");
            textarea.value = text1 + text2;
            选择开始--;
        }
        textarea.selectionStart = textarea.selectionEnd = selectionStart;
        e.preventDefault();
        e.stopPropagation();
        返回假；
    };
    var 文本区域；
    函数初始化（）{
        textarea = document.getElementById("textarea");
        如果（！文本区域）{
            返回;
        }
        textarea.addEventListener("keydown", handleBackEvent, false);
    }
    </脚本>
    </head>
    <body onload="init()">
    <textarea id="textarea" name="text" cols="100" rows="20"></textarea><br/><br/>
    <button onclick="sendBackEvent()">发送返回事件</button>
    </正文>
    </html>

```

以防万一其他人遇到同样的麻烦。

# windows - .dbf 文件 + Oracle 中的访问表

> ID：14192645
> 
> 赞同：0
> 
> 时间：2013-01-07T08:57:54.727
> 
> 标签：windows, oracle11g, dbf

我正在尝试访问本地驱动器中 .dbf 中存在的表。

这是我最近的尝试，从另一个网站得到的

```
select at.owner || '.' || at.table_name table_name,
       ddf.file_name
    from   all_tables at,
            dba_extents de,
            dba_data_files ddf
    where  at.owner = de.owner
    and    at.table_name = de.segment_name
    and at.table_name = "Table1"    and    de.file_id = ddf.file_id
    order  by table_name 
```

我在 Windows 2003 中使用 Oracle 11.2。

我检查并确认 .dbf 处于“READ WRITE”模式。

如何访问 .dbf 文件中的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:03:47.387

[http://www.orafaq.com/forum/t/167820/0/](http://www.orafaq.com/forum/t/167820/0/)

请参阅此 URL，您的问题的解决方案已在此论坛中讨论过。

# c# - 对象引用未设置为将数据插入数据库的对象实例

> ID：14192646
> 
> 赞同：-1
> 
> 时间：2013-01-07T08:57:54.760
> 
> 标签：c#, sql-server-2008

我创建了与 Microsoft sql 数据库的连接，并尝试添加基本信息作为练习的一部分，但出现以下错误。

`Object reference not set to an instance of an object`

这就是我连接到数据库的方式

```
SqlConnection sqlConn; 
protected void butConnect_Click(object sender, EventArgs e)
{
    try
    {
        string connectionString = "Data Source=.\\SQLEXPRESS;Initial Catalog=lrmg;Integrated Security=True;";
        sqlConn = new SqlConnection(connectionString);
        sqlConn.Open();
        labMessage.Text = "a connection to your database was established";
    }
    catch (SqlException sqlE)
    {
        labMessage.Text = sqlE.Message;
    }
    catch (Exception exe)
    {
        labMessage.Text = exe.Message;
    } 
```

这是我得到错误的地方

```
 protected void butSubmit_Click(object sender, EventArgs e)
 {
   try
    {
        string name = txtName.Text;
        string date = txtDate.Text;

        **SqlCommand cmd = sqlConn.CreateCommand();**

        cmd.CommandText = "INSERT INTO Canditate(Name, Doj) VALUES('" + name + "'," + date + ")";
        cmd.ExecuteNonQuery();
        labMessage.Text = "The value was inserted into your database";
    }
    catch (SqlException sqlE)
    {
        labMessage.Text = sqlE.Message;
    }
    catch (Exception exe)
    {
        labMessage.Text = exe.Message;
    }
} 
```

我的印象是sql连接已打开，为什么会出现异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:05:04.437

您收到错误是因为参考变量`sqlConn`为空 - 这可能是因为

*   从您的代码片段中，连接正在创建并在连接按钮单击中打开。所以你需要在提交之前点击连接
*   假设这个 ASP.NET 代码最可能的原因可能不同——在这种情况下，每个请求都由不同的页面类实例提供服务——所以如果你在一个请求上打开连接（连接点击），它（那个变量）不会在下一个请求中可用（提交单击）。补救措施很简单——在您需要时创建并打开连接，即在提交点击中。另一方面，您可能需要了解有关 Web 编程模型的模式以避免此类错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:06:50.833

您使用两个不同的事件来处理数据库。为什么？你听说过连接池吗？
可能在第一个事件（打开连接）和第二个事件（db insert）之间发生了一些事情并将你的全局变量 SqlConn 更改为 null 并且你得到了错误。（当然我假设您在尝试插入任何内容之前按下该按钮以打开连接）

有了[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=VS.80%29.aspx)，就不再需要这种编程模式了，相反，当您需要更新/插入/删除/选择某些内容时，您打开连接，完成您的工作并立即关闭连接，而无需保持连接打开并消耗服务器上的资源和客户端。

```
try
{
    string connectionString = "Data Source=.\\SQLEXPRESS;" + 
                              "Initial Catalog=lrmg;Integrated Security=True;";
    using(SqlConnection sqlConn = new SqlConnection(connstring))
    {
        SqlCommand cmd = sqlConn.CreateCommand();**
        cmd.CommandText = "INSERT INTO Canditate(Name, Doj) VALUES(@name, @dt)";
        cmd.Parameters.AddWithValue("@name", txtName.Text);
        cmd.Parameters.AddWithValue("@dt", Convert.ToDateTime(txtDate.Text));
        cmd.ExecuteNonQuery();
        labMessage.Text = "The value was inserted into your database";
    }
}
catch (SqlException sqlE)
{
    labMessage.Text = sqlE.Message;

}
catch (Exception exe)
{
    labMessage.Text = exe.Message;
} 
```

另请注意，您的代码会受到[Sql Injection](http://www.unixwiz.net/techtips/sql-injection.html)攻击，因为您使用字符串连接来构建您的 sql 文本。这是一种不好的做法，应该不惜一切代价避免

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:04:08.027

您应该有一个专用的方法来打开连接，每次使用连接时都会调用该方法。使用您当前的设置，butConnect_click 必须在同一请求中的 butSumbit_Click 之前调用。所以在butSubmit 中添加对butConnect 的调用。

# android - Android - 将字符串与数组进行比较

> ID：14192647
> 
> 赞同：0
> 
> 时间：2013-01-07T08:57:56.233
> 
> 标签：android, arrays, string, porter-stemmer

是否可以将字符串与android中的数组进行比较？这是使用我正在为我的论文开发的 Porter Stemmer 的字典应用程序。

例如，输入单词是 PROCESSES（放置在 char 数组中），我想扫描输入是否包含“s”、“es”或“sses”，然后删除它们。

我想逐个字母比较，但我相信这将是一个乏味的编码。有没有更简单的方法来比较输入单词，如下所示：

```
If ( inputWord has string "es" )
 {
   delete "es
 }

example input: PROCESSES
example output: PROCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:05:23.347

您可以使用 String.contains 和 String.replaceAll 功能：

```
//if (inputWord.contains("es")) {
    inputWord.replaceAll("es", "");
//} 
```

不需要if语句，也可以直接替换。如果没有找到该字符串，它不会做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:41:19.563

```
if(inputWord.contains(checkWord))
{
    int i = inputWord.indexOf(checkWord);
    StringBuilder sb = new StringBuilder(inputWord);
    sb = sb.delete(i, i+(checkWord.length()));
    inputWord = sb.toString();
} 
```

将您的值存储在字符串中。它会更容易。希望这段代码对您有所帮助。如果您必须检查多个单词，请将所有单词存储在一个数组中，并将此代码段放入 for 循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:07:51.663

也许我不明白你的问题，但你可以在[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)和`char[]`using之间转换

```
char[] data = {'a', 'b', 'c'};
String str = new String(data); 
```

和

```
String str = "abc";
char[] data = toCharArray(); 
```

[您可以使用indexOf(String)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)或[contains(String)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)检查是否包含子字符串。

# ipad - 设置 cookie Safari ipad

> ID：14192648
> 
> 赞同：1
> 
> 时间：2013-01-07T08:57:57.280
> 
> 标签：ipad, gwt, safari

我无法让 ipad 上的 Safari 识别我发送的 cookie。

它适用于*OSX Safari*和*iPad Chrome*，但不适用于*iPad Safari*。

我在 Safari 的 iPad 设置中将**接受 Cookie**设置为**“始终”**，但无济于事。

我正在使用 GWT，可以看到 Web Inspector 的响应标头像往常一样包含 Set-Cookie，其值是我期望的 (1)。但它并没有被 Safari 设置。

如果这是 iFrame 问题，是否将**接受 Cookie**设置为**“始终”**处理？我能做些什么来解决这个问题？

(1)`nick_name=me;Path=/;Expires=Mon, 11-Feb-13 02:32:22 GMT, xzy=25002, promoid=7b54c1ae-e76a-4f65-aebd-c8496132672a;Path=/;Expires=Mon, 11-Feb-13 02:32:22 GMT, rememberMe=25002:58322d58-b1b8-4f15-be68-11b610cf8c86;Path=/;Expires=Mon, 11-Feb-13 02:32:22 GMT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:43:35.983

解决方案是通过设置简单地删除所有 cookie --> Safari --> 清除 cookie 和数据

下次访问时，cookies 就会出现。

# caching - 需求分页：计算有效内存访问时间

> ID：14192649
> 
> 赞同：5
> 
> 时间：2013-01-07T08:58:04.643
> 
> 标签：caching, memory-management, paging, tlb

我无法理解这个问题的答案：

考虑使用带有 TLB 寄存器的一级分页的操作系统。如果缺页率为 10%，需要时重新加载脏页，计算有效访问时间：

*   TLB 查找 = 20 ns
*   TLB 命中率 = 80%
*   内存访问时间 = 75 ns
*   交换页面时间 = 500,000 ns
*   50% 的页面是脏的。

**回答：**

T = 0.8(TLB+MEM) + 0.2 **(** 0.9[TLB+MEM+MEM] + 0.1[TLB+MEM + 0.5(磁盘) + 0.5(2磁盘+MEM)] **)** = 15,110 ns

你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T09:35:34.530

在这种情况下，“有效”时间是指“预期”或“平均”时间。因此，您需要花时间访问各个案例中的页面，并将每个案例乘以它的概率。通过拆分为多个级别的案例，表达式有些复杂。案例有：

*   80% 的时间物理地址在 TLB 缓存中。这给了我们 80% 的时间访问 TLB 寄存器以及访问页面本身：`0.8(TLB + MEM)`
*   剩余 20% 的时间它不在 TLB 缓存中。这会分成更多的情况，所以它给了我们`0.2(loooong expression)`（这个表达式实际上没有那个括号，但我会把它当作一个错字，因为没有它，系数加起来不会等于 1，如果它们没有意义不）。案例有：
    *   90%（在这 20% 中）页面仍然被映射，但是地址从缓存中掉了出来，所以我们必须从页面映射中读取额外的内存。所以 90% 次访问 TLB 寄存器加上访问页表加上访问页本身：`0.9(TLB + MEM + MEM)`. 提到了一级分页，所以这里只是额外的 1 次内存访问，但实际的实现通常有两级分页，因此会有 2 次额外的内存访问。
    *   需要从磁盘加载页面的 10%（在这 20% 中；表达式暗示了这一点，但问题并不清楚，而是建议总体而言是 10%）。这使得对 TLB 寄存器的（失败）访问和对页表的（失败）访问是加载页面所需的 10% 倍。要加载它，它必须为它腾出空间，所以它必须放下另一个页面。这分为两个选项：
        *   50% 被丢弃的页面是干净的，所以系统只需要读取新的内容：`0.5(Disk)`.
        *   50% 要丢弃的页面是脏的，因此系统需要将其写入磁盘`(MEM+Disk)`并读取新内容`(Disk)`，给出`0.5(2Disk + MEM)`

我认为最后两个（交换）情况应该包括一些额外的内存访问，因为需要两次访问来标记前一页不可用和页表中的新页可用。

这也是非常不现实的，因为在实际系统中，当页面中需要一个阅读空间时，系统总是选择一个干净的页面来替换。为了确保它有干净的页面，有一个后台进程会检查脏页并将它们写出。它需要一些计算资源，因此它实际上应该计入内存访问，但要少得多，因为页面错误不需要等待写入完成。

表述实际上是错误的。它应该是

> T = 0.8(TLB + MEM) + 0.2 **(** (0.9(TLB + MEM + MEM)) + 0.1(TLB + MEM + 0.5(磁盘) + 0.5(2Disk + MEM) **)**

如果页面错误占 TLB 未命中的 10% 或

> T = 0.8（TLB + MEM）+ **0.1**（TLB + MEM + MEM）+ 0.1（TLB + MEM + 0.5（磁盘）+ 0.5（2磁盘+ MEM））

如果页面错误占所有访问的 10%。您对此并不明确，但如果公式不包含 0.2*0.9，我会假设后者，这表明前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T09:35:35.070

阅读我正在考虑基于例如两级寻呼系统的更现实场景的问题。

在这种情况下，据我所知，可能存在页表 (PT) 本身不驻留在内存中的情况（PT 本身可能已从 RAM 分页到交换区域（例如 Linux）或页面文件（例如 Windows ））。

关于页面目录（分页层次结构的第一级），我认为它必须***始终***驻留在 RAM 中（否则，在上下文切换时，x86 CR3 寄存器内容将完全无用......）

因此，它存在一定百分比的事件，我们必须至少包括：

*   读取和引入内存（从交换区域或页面文件）PT 本身所需的磁盘访问时间
*   现在在内存中访问 PT 所需的 MEM 时间

是否有意义 ？

# ruby-on-rails - ORM 中的 Laravel 或 Rails MYSQL 查询是否使用 JOIN 语句

> ID：14192651
> 
> 赞同：1
> 
> 时间：2013-01-07T08:58:17.670
> 
> 标签：ruby-on-rails, orm, laravel, eloquent

简单的问题，但我似乎找不到答案......鉴于以下陈述：

```
$phone = User::find(1)->phone()->first(); 
```

根据 Laravel 的说法，这似乎会生成两个 SQL 语句，而不是使用 JOIN。在所有 PHP 框架中都是这样吗？铁轨呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:05:42.407

Laravel 确实使用额外的 SELECT 语句来获取相关模型，如果你打开 Profiler，你可以看到这些。我看到评论说它被认为比 JOIN 更有效，但我相信有更聪明的人可以解释为什么/为什么不。

我知道，如果您要获取大量相关数据（即在循环中），您应该考虑使用 Laravel 的 Eager Loading 功能来最小化查询。

# mvvm - 在本地化 ApplicationBar 的代码中绑定 EventToCommand

> ID：14192656
> 
> 赞同：1
> 
> 时间：2013-01-07T08:58:36.927
> 
> 标签：mvvm, mvvm-light, windows-phone, windows-phone-8

如何以编程方式将 EventToCommand 绑定到 Windows Phone 8 中的 ApplicationBar Button 或 MenuItem？我目前正在使用 MVVM light，它适用于我可以在 XAML 中添加的所有元素。

通常，我会从 Xaml 定义 ApplicationBar，并可以从那里绑定到 Expression Blend 中的 EventToCommand。但是从 WP8 开始，微软决定更喜欢一个[本地化的 ApplicationBar，它将以编程方式创建](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637520%28v=vs.105%29.aspx#BKMK_LocalizinganApplicationBar)，因为它不能轻易地绑定到不同的语言。

重现与按下按钮执行 EventToCommand 相同的行为需要什么？关于 MVVM 模式，这是否可能或鼓励？我的替代方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T01:23:52.697

您可以在 WP8 中使用相同的旧 WP7 AppBar。LocalizableAppBar 只是关于如何本地化 AppBar 的建议。

无论哪种方式，您都可能没有在 AppBar 上使用 EventToCommand，因为它不支持 DataBinding。为此，您需要使用 Bindable AppBar。要么自己编写一个，要么为此使用众多 OSS 解决方案中的一种，例如：[AppBarUtils](http://nuget.org/packages/AppBarUtils)、 [BindableApplicationBar](http://nuget.org/packages/BindableApplicationBar)、[Cimbalino](http://code.msdn.microsoft.com/wpapps/cimbalino-windows-phone-4de77988)或其他。

将上述 ApBar 之一本地化会简单得多，因为您可以将文本数据绑定到 ViewModel 并使用您想要的任何文本。

# avr - AVR 示例代码解释请

> ID：14192657
> 
> 赞同：0
> 
> 时间：2013-01-07T08:58:36.920
> 
> 标签：avr, atmel

从

[http://www.electronicsplanet.ch/mikrocontroller/source-code/ATMega16/ATmega16-ADC-Interrupt.htm](http://www.electronicsplanet.ch/mikrocontroller/source-code/ATMega16/ATmega16-ADC-Interrupt.htm)

我尝试初始化mega16的AD。它有效，但线路

```
ADCSRA |= (1<<ADEN)|(1<<ADPS2)    // Enable ADC, set prescaler to 16
         |(1<<ADIE);              // Fadc=Fcpu/prescaler=1000000/16=62.5kHz
                                  // Fadc should be between 50kHz and 200kHz
                                  // Enable ADC conversion complete interrupt 
```

我不清楚。1000000 是从哪里来的，又是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:52:25.373

预分频器是指如何对主时钟进行分频，为 ADC 提供时钟。ADC 的时钟由主时钟提供，带有一个可选的预分频器。在示例中，1000000 表示微控制器的主时钟频率为 1 MHz。如果预分频器设置为 16，则 ADC 的频率将为 1000000/16 = 62.5kHz。

当然，如果你的主时钟不同，你必须为ADC计算你自己的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-01T04:54:22.377

1000000 Hz 是运行设备的时钟频率。

默认情况下，mega 将在内部 8 MHz RC 振荡器上运行，并设置 clk/8 熔丝，使默认频率为 8MHz/8 = 1MHz

因此，您将 FCPU 视为 1000000。

# installation - 我想用我自己的 nuget 包安装 nodejs 和 testacular。我怎样才能做到这一点？

> ID：14192661
> 
> 赞同：0
> 
> 时间：2013-01-07T08:58:50.800
> 
> 标签：installation, nuget, karma-runner

我必须创建一个在客户端机器上安装 Testacular 的 nuget 包。Testacular 需要安装 node.js。所以需要已经安装。

我怎样才能将它们包含在我的 nuspec 文件中。

感谢您阅读...如果可以，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:31:09.363

查看 www.chocolatey.org 及其生态系统。这也是一样的（我相信那里甚至还有一个 NodeJS 包）

# licensing - 升级 ReSharper 许可证

> ID：14192662
> 
> 赞同：0
> 
> 时间：2013-01-07T08:58:58.960
> 
> 标签：licensing, resharper, upgrade

今天我有一个 ReSharper 5.0 许可证，并且正在寻求更新它。但我的问题是，我什么时候可以购买新许可证以确保在 ReSharper 8.0 到货时升级到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:13:23.850

缺乏来自 JetBrains 的内部知识，无法得知。`n-1`免费升级窗口（在版本发布之前购买版本的任何人`n`都会自动升级）似乎没有在版本发布之前宣布`n`。

例如，看到[这篇宣布发布版本的博客文章`7.0`](http://blogs.jetbrains.com/dotnet/2012/07/resharper-70-is-released/)，并注意评论中的哀嚎和咬牙切齿。

# maven - maven 执行配置文件独立于阶段

> ID：14192664
> 
> 赞同：1
> 
> 时间：2013-01-07T08:59:02.340
> 
> 标签：maven, maven-plugin

我有一个配置文件，我想在所有模块的安装阶段完成后执行该配置文件。说我有

```
<modules>
    <a>
    <b>
    <c>
</modules> 
```

然后我定义了一个 id 为的配置文件`generate-reports`。

```
<profile>
    <id>generate-reports</id>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                  <execution>
                    <id>run-cmd</id>
                    <!--DO NOT BIND WITH PHASE-->
                    <phase>install</phase>
                    <goals>
                      <goal>exec</goal>
                    </goals>
                   </execution>
                </executions>
                <configuration>
                  <executable>executable-name</executable>
                  <arguments>
                    <argument>-o</argument>
                    <argument>output.txt</argument>
                  </arguments>
                </configuration>
            </plugin>
        </plugins>
    </build>
</profile> 
```

此配置文件是一个报告生成配置文件，它将进入每个模块并在那里生成报告。但问题是，如果我想在每个报告的测试用例运行后生成报告。安装时不应为每个模块调用此配置文件。只有在完成安装后才应该调用它。换句话说，我正在寻找类似 `mvn install generate-reports` 甚至“mvn generate-reports”的东西（假设我已经`mvn install`单独运行）。总之，我不想将配置文件与阶段绑定，并且希望独立于阶段运行配置文件。

有没有插件可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:45:27.093

您可以通过调用目标名称来启动任何目标，例如：

```
mvn help:effective-pom 
```

在你的情况下，这应该是：

```
mvn exec:exec 
```

正如[>here<](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Build_Lifecycle_Basics)中所述，您也可以这样做：

```
mvn clean install exec:exec 
```

这应该在调用您的报告插件之前完成完整的“安装”。

# wordpress - 在 wordpress 颠覆时更改我的插件文件夹名称（使用 TortoiseSVN）

> ID：14192667
> 
> 赞同：0
> 
> 时间：2013-01-07T08:59:35.317
> 
> 标签：wordpress, svn, plugins, tortoisesvn, rename

我为 wordpress 编写了一个插件，并使用 TotrtoiseSVN（来自 Windows）将我的插件文件和文件夹移动到 wordpress.org subversion。虽然插件的名称是 wp_myPlugin 并且包含文件的文件夹应该是 wp_myPlugin，但不知何故，“_”已更改为“-”？？？

所以现在当有人下载​​我的插件时，他会得到'wp-myPlugin.zip'，这将不起作用。

有没有办法用 TortoiseSVN 来纠正这个问题（不擅长终端和命令）？

如果没有办法改变它，您是否建议制作一个新版本，这将允许插件与 'wp-myPlugin' 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:43:39.677

好吧，我最终添加了一个新版本的插件，它使用“wp-myPlugin”作为根文件夹。

# php - 原则 2 - 在用户未登录的情况下更新用户密码

> ID：14192670
> 
> 赞同：3
> 
> 时间：2013-01-07T08:59:47.097
> 
> 标签：php, zend-framework, doctrine-orm

我在 Zend 框架中使用 Doctrine 2。我想要的是在没有用户登录的情况下更新用户密码。这是在实体类中执行此操作的正确方法吗？

```
public function updatePassword($userId, $new_pass, $em){
    $em->getConnection()->getConfiguration()->setSQLLogger( new \Doctrine\DBAL\Logging\EchoSQLLogger()); 
    $qb = $em->createQueryBuilder();
    $q  = $qb->update('\Application\User\Entity\User', 'u')
            ->set('u.password', $qb->expr()->literal($new_pass))
            ->where('u.userId = ?1')
            ->setParameter(1, "$userId")
            ->getQuery();
    $p = $q->execute();
    return $p;     

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:35:09.463

实体类永远不应该使用实体管理器。实体类只是一个数据存储。

用户实体类：

```
namespace Entity;

class User {
    // ...

    public function setPassword($password)
    {
        $this->password = some_hash_algorythm($password);
        return $this;
    }

    // ...
} 
```

您的控制器或任何您想更新用户密码的地方：

```
$repo = $em->getRepository('Entity\User');
$user = $repo->find($userId);
$user->setPassword($newPassword);
$em->persist($user);
$em->flush(); 
```

这将数据存储与实际的持久层分开。

如果您不喜欢将代码放在适当的位置并希望将其放在中心位置，请查看自定义存储库类的学说文档（他们知道实体管理器和“表格操作”）

# c# - Asp.Net Webparts

> ID：14192675
> 
> 赞同：4
> 
> 时间：2013-01-07T09:00:04.677
> 
> 标签：c#, asp.net, web-parts

我一直在搜索这些论坛，还有整个网络。您能否告诉我用于 Webform 应用程序的 WebParts 是否已过时？或者，您能告诉我它们是否仅设计用于专门与 IE 一起使用？我真的很想集成 webparts functoinality，但它需要跨浏览器工作。（这不是共享点网络部件）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:16:35.610

据我所知，它们并没有过时，因为它们在 .Net 4.0 框架中得到支持，但你是对的，因为它依赖于 IE。就个人而言，如果您需要跨浏览器支持，我不会考虑此功能。如果您需要拖放功能、日期选择器等，我会考虑使用 jQuery UI 和用于丰富的、基于提要的组件的单独库，例如 Twitterizer。

或者，有付费解决方案可用，例如 Telerik 的[Kendo UI](http://demos.kendoui.com/)，它执行许多类似和附加的功能，并且可能要好得多。

# objective-c - 用于 ios 单例实现的新 facebook sdk

> ID：14192676
> 
> 赞同：0
> 
> 时间：2013-01-07T09:00:05.060
> 
> 标签：objective-c, ios, facebook, ios4

我已经更新了新的 FaceBook SDK (3.1) 并尝试集成到我以前使用旧的单例类中。我的代码：

```
-(void)postFacebook {
    if ([FBSession.activeSession isOpen]) {
        [[AAFacebook sharedInstance] postToWallWithScreenshot];
    } else {
        [[AAFacebook sharedInstance] openSessionWithAllowLoginUI:YES];
    }
} 
```

和开放会话方法：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                             [self sessionStateChanged:session state:state error:error];
                                         }];
}

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState)state
                      error:(NSError *)error
{
    NSLog(@"Is FBSession opened? A: %i", FBSession.activeSession.isOpen);

    switch (state) {

        case FBSessionStateOpen: {

            NSLog(@"Login succesfully & post to FaceBook!");

        }
            break;
        case FBSessionStateClosed: {
            [FBSession.activeSession closeAndClearTokenInformation];
        }
            break;
        case FBSessionStateClosedLoginFailed: {
            NSLog(@"FaceBook login failed.");
        }
            break;

        default:
            break;
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:kAAFacebookNoficationChanged
                                                        object:session];

} 
```

**现在，如果我第二次尝试分享，我会收到以下错误：**

```
2013-01-07 10:28:26.894[2098:907] Error: HTTP status code: 400
2013-01-07 10:28:26.904[2098:907] Photo uploaded failed :( {
    "com.facebook.sdk:HTTPStatusCode" = 400;
    "com.facebook.sdk:ParsedJSONResponseKey" =     {
        body =         {
            error =             {
                code = 2500;
                message = "An active access token must be used to query information about the current user.";
                type = OAuthException;
            };
        };
        code = 400;
    };
} 
```

知道如何处理访问令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:30:22.460

我最终得到了它。似乎 FB SDK 为我处理会话令牌。

# android - 如何为整个应用程序自定义主题

> ID：14192679
> 
> 赞同：1
> 
> 时间：2013-01-07T09:00:11.730
> 
> 标签：android, actionbarsherlock

我用于`Theme.Sherlock.Light.DarkActionBar`我的整个应用程序。现在操作栏背景颜色默认为黑色。如何改变这种颜色。基本上如何为整个应用程序自定义主题？

```
<activity
            android:name="com.mypath.myapp.FirstActivity"
            android:label="@string/app_name"
            android:theme="@style/Theme.Sherlock.Light.DarkActionBar"
            > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:08:56.547

您可以`android:theme=theme_style`在`<application>`标签中使用。现在，如果您希望您的操作栏与主题给出的不同，那么您可以通过`<style></style`专门为您的操作栏定义样式来覆盖它。

这是概念。去`res > values > styles.xml`。您可以按如下方式**扩展或自定义主题：**

```
 <style name="AppBaseTheme" parent="android:Theme.Light">
          <item name="android:background">@color/background_dark</item>
      </style> 
```

**更新：** 或者，如果您想为所有应用程序进行通用（不是特定于主题）更改，那么您可以编辑`sdk/platforms/android-target/data/res/values/styles.xml`

或者，如果您想覆盖所有应用程序的默认主题，那么您可以编辑`sdk/platforms/android-target/data/res/values/themes.xml`

**更新 - 发现这个：**

[ActionBar 开发者文档](http://developer.android.com/guide/topics/ui/actionbar.html)。此链接显示“您可以使用 Android 3.0（API 级别 11）中添加的 ActionBar API 控制操作栏的行为和可见性。” 所以我假设你的目标至少是 API 11。

如果您的目标是 API 11 及更高版本，您可以执行高级自定义样式，如下所示：

```
 <resources>
            <style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
                <item name="android:actionBarStyle">@style/MyActionBar</item>
            </style>

            <style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar">
                <item name="android:background">@drawable/ab_background</item>
                <item name="android:backgroundStacked">@drawable/ab_background</item>
              <item name="android:backgroundSplit">@drawable/ab_split_background</item>
            </style>
    </resources> 
```

给你，[造型动作栏背景](http://developer.android.com/guide/topics/ui/actionbar.html#AdvancedStyles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:06:10.073

您可以在应用程序标签的清单文件中为整个应用程序定义主题，如下所示：

> ```
>  <application
>     android:name="com.test"
>     android:icon="@drawable/appicon"
>     android:label="@string/app_name"
>     android:theme="@android:style/Theme.NoTitleBar" > <---Define your own style here. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:08:04.033

看看[http://actionbarsherlock.com/theming.html](http://actionbarsherlock.com/theming.html)。您必须创建自己的主题样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:11:54.147

用于修改默认 android sdk 主题您可以在以下位置找到 android Sdk Themes.xml 文件：

```
\android-sdk\platforms\...\data\res\values\themes.Xml 
```

这样您就可以更改整个应用程序主题。

# c# - c# .net Windows 8 App TcpClient 代码端口到 StreamSocket

> ID：14192682
> 
> 赞同：3
> 
> 时间：2013-01-07T09:00:19.987
> 
> 标签：c#, windows, microsoft-metro, .net-4.5, stream-socket-client

我在 .net 4.5 之前有这个代码

```
_Connection = new TcpClient(hostname, port);
_Stream = _Connection.GetStream(); 
```

对于 Windows 8 应用程序，我更改为：

```
_Connection = new StreamSocket();
await _Connection.ConnectAsync(new HostName(hostname), port.ToString());
_DataReader = _Connection.InputStream.AsStreamForRead();
_DataWriter = _Connection.OutputStream.AsStreamForWrite(); 
```

我认为这是最简单的解决方案，因为我不必在其他任何地方更改任何底层代码，因为我仍在使用`Stream`它来读取/写入数据。

虽然这段代码没有按预期工作，但我设法在流上成功地写了东西，但是当需要读取流时，我不断得到`'\n'`- 这与我的预期响应相去甚远。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T07:16:25.897

找到了解决方案。希望有人觉得它有用。

我需要做的就是刷新流`_DataWriter`（每次向流中写入内容时都需要这样做），然后`_DataReader`流开始按预期工作。

# excel - 动态求和函数

> ID：14192685
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:00:33.953
> 
> 标签：excel, function, dynamic, sum

我正在处理一个电子表格，我希望能够自动汇总一定数量的单元格。例如，我在参考单元格中输入 120 或 100，然后 Excel 会给出收入列中前 120 或 100 个单元格的总和。有没有办法做到这一点？我曾考虑过简单地命名单元格范围，如“top120revenue”和“top100revenue”等，但除了静态之外，使用 27 张纸也很复杂。如果存在公式，则只需更改工作表引用而不是重新标记单元格范围会更容易。也许答案在于 VBA，但我绝不是那里的专家

希望有人能帮忙！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:11:13.323

您是指位置上的前 n 个单元格**还是**n 个最高值？如果是前者，我会使用比 INDIRECT 更强大的 INDEX，即

`=SUM(A1:INDEX(A:A,B1))`

如果您的意思是 n 个最大值，请尝试

`=SUMPRODUCT(LARGE(A:A,ROW(INDIRECT("1:"&B1))))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:14:52.643

[我想我在这里](http://www.excelforum.com/excel-new-users-basics/765372-use-cell-value-in-a-cell-reference.html)找到了你问题的答案。它使用函数`INDIRECT()`。

例如：如果 column`A`包含您的数据并且`B1`是包含 value 的参考单元格`100`，则下面的公式给出 column 的前 100 个值的总和`A`。

```
=SUM(A1:INDIRECT("A"&B1)) 
```

这被解释为：

```
=SUM(A1:A100) 
```

# c# - Math.Net 数值中的多重回归

> ID：14192688
> 
> 赞同：2
> 
> 时间：2013-01-07T09:00:43.263
> 
> 标签：c#, linear-regression, math.net, mathnet-numerics

我使用这样的 math.net 回归方法实现了简单的单回归：

```
var xdata = new double[] { 10, 20, 30, 40, 50 };
var ydata = new double[] { 15, 20, 25, 55, 95 }; 

var X = DenseMatrix.CreateFromColumns(new[] { new DenseVector(xdata.Length, 1), new DenseVector(xdata) });
var y = new DenseVector(ydata);

var p = X.QR().Solve(y);
var a = p[0];
var b = p[1];

MessageBox.Show(a.ToString(), "Test");
MessageBox.Show(b.ToString(), "Test"); 
```

问题是：我可以用这种方法应用多重回归？所以，我也有`zdata`数组，我想用它来进行多元回归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T05:54:44.590

@christoph-ruegg 感谢您关于线性回归的帖子，它帮助我开始使用 Math.NET。
@team16sah @g-pickardou 如果您可以访问 Math.NET 库，我建议您使用[Fit.Polynomial()](http://numerics.mathdotnet.com/api/MathNet.Numerics/Fit.htm)方法。我发现它比仅使用线性回归更可靠和灵活。
在上述情况下，代码如下所示：

```
 var xdata = new double[] { 10, 20, 30, 40, 50 };
        var ydata = new double[] { 15, 20, 25, 55, 95 };

        double[] p = Fit.Polynomial(xdata, ydata, 1);
        var a = p[0];
        var b = p[1];

        MessageBox.Show(a.ToString(), "Test");
        MessageBox.Show(b.ToString(), "Test"); 
```

然后您可以更改多项式阶数（多项式函数的第三个参数）以获得更高的精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:29:08.747

[正如在使用 Math.NET Numerics 进行线性回归](http://christoph.ruegg.name/blog/2012/9/9/linear-regression-mathnet-numerics.html)中介绍的那样，这种形式在技术上已经是多元线性回归。

假设您有数据点`((uj,vj),yj)`而不是，您可以在构建 X 矩阵时相应`(xj,yj)`地映射`x`到元组。`u,v`因此，单元格`X[i,j]`将不会`fi(xj)`被评估为`fi(uj,vj)`。

例如，对于由 给出的空间线的线性回归`y=a+b*u+c*v`，您最终会得到：

*   `p1 = a`,`f1 : u,v -> 1`
*   `p2 = b`,`f2 : u,v -> u`
*   `p3 = c`,`f3 : u,v -> v`

因此完整的系统：

```
|y1|   |1  u1  v1|   |a|
|y2| = |1  u2  v2| * |b|
|..|   |.. ..  ..|   |c|
|yM|   |1  uM  vM| 
```

如果不清楚这将如何在实际代码中工作，或者不是您要查找的内容，请发表评论。

# javascript - 使用jsPlumb实现垂直线

> ID：14192691
> 
> 赞同：0
> 
> 时间：2013-01-07T09:01:00.183
> 
> 标签：javascript, jquery, web, jsplumb

几个月以来，我一直在成功使用[jsPlumb](http://www.jsplumb.org/)。我用直线连接一些 div 没有问题。现在我想用垂直或水平线连接放置在任何地方的任意 div。为了实现这个目标，我使用锚点放置线，每次测试每个端点的正确 X、Y 值。

我的目标是动态放置垂直或水平线，而不必每次都静态重新计算 X、Y 锚值。有没有可能？jsPlumb 是否有更好的替代方案来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:23:50.753

jsPlumb 具有特殊的“流程图”连接器，可在水平或垂直方向上运行。

演示： http: [//www.jsplumb.org/jquery/flowchartConnectorsDemo.html](http://www.jsplumb.org/jquery/flowchartConnectorsDemo.html)

文档： http: [//www.jsplumb.org/doc/content.html#connectors](http://www.jsplumb.org/doc/content.html#connectors)

# grails - Grails 编辑 Flash 删除消息

> ID：14192692
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:01:03.670
> 
> 标签：grails

嗨，我是 Grails 的新手，我已经实现了删除收件箱中的消息的删除操作，但现在我想更改 flash 消息以显示“2 条消息已删除”而不是“消息 4 已删除，消息 5 已删除”，如果删除多条消息。请协助，以下是我的删除操作

定义删除（）{

```
 def messageInstance = Message.get(params.id)

    // render error if no message found
    if (!messageInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'message.label', default: 'Message'), params.id])
        redirect(action: "phone")
    } else {
        // get the device that we are deleting from
        //specify phoneNumber so as to delete the device by phoneNumber
        def device = MessagingDevice.findByPhoneNumber(params.phoneNumber)

        // invoke deleteFromDevice on domain object, which returns true if successful
        if (messageInstance.deleteFromDevice(device)) {
            flash.message = message(code: 'default.deleted.message', args: [message(code: 'message.label', default: 'Message'), params.id])
            redirect(action: "phone", params:[phoneNumber:params.phoneNumber])
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:00:32.720

如果你查看你的`default.deleted.message`钥匙，`messages.properties`你会看到它看起来像

```
default.deleted.message={0} {1} deleted 
```

只需添加一个包含所需键和值的新行。

```
inbox.deleted.message={0} messages deleted 
```

并在您的控制器中使用它

```
flash.message = message(code: 'inbox.deleted.message', args: [deletedMessageCount]) 
```

当然，您需要`deletedMessageCount`在使用它之前定义一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:10:49.157

在代码中：

```
int count = 5 //number of deleted messages

flash.message = message(code: 'default.deleted.messages', args: [message(code: 'messages.label', default: 'Messages'), count]) 
```

在messages.properties中：

```
messages.label=Messages
default.deleted.messages={1} {0} deleted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:05:04.540

你可以这样做：

```
 def device = MessagingDevice.findByPhoneNumber(params.phoneNumber)

    // invoke deleteFromDevice on domain object, which returns number of objects deleted
    def count = messageInstance.deleteFromDevice(device)
    if (count) {
        flash.message = message(code: 'default.deleted.message', args: [message(code: 'message.deleted.label', default: '{0} Messages deleted'), count])
        redirect(action: "phone", params:[phoneNumber:params.phoneNumber])
    } 
```

在你的messages.properties

```
message.deleted.label={0} deleted 
```

# ruby-on-rails-3.2 - 在 wkhtmltoimage / imgkit 中使用 typekit

> ID：14192694
> 
> 赞同：0
> 
> 时间：2013-01-07T09:01:17.180
> 
> 标签：ruby-on-rails-3.2, wkhtmltopdf, wkhtmltoimage, imgkit

我在 Rails 3.2.9 上。我可以使用 typekit（或 goggle 字体）来渲染图像吗？我使用了以下代码，但图像没有呈现正确的字体。我怀疑页面没有加载。

```
html = "<head>"
html << '<script type="text/javascript" src="//use.typekit.net/dtf1xzc.js"></script>'
html << '<script type="text/javascript">try{Typekit.load();}catch(e){}</script>'
html << "</head>"
html << html2berendered

kit = IMGKit.new(html)
kit.stylesheets << Rails.root.join('app', 'assets','stylesheets' ,'cards.css').to_s

kit.to_png 
```

或者，我可以尝试通过安装自定义字体来使用它们，但由于某些奇怪的原因它们没有加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:39:49.197

无论如何，我意识到这是不可能的。所以我使用我在这里找到的一个非常智能的解决方案在我的 heroku 机器中安装了自定义字体：www.mobalean.com/blog/2011/08/02/pdf-generation-and-heroku

代码如下。希望这对需要在 heroku/wkthtmltoimage 中自定义字体的人有用

```
if Rails.env.production? || Rails.env.staging?
  font_dir = File.join(Dir.home, ".fonts")
  Dir.mkdir(font_dir) unless Dir.exists?(font_dir)

  Dir.glob(Rails.root.join("vendor", "fonts", "*")).each do |font|
    target = File.join(font_dir, File.basename(font))
    File.symlink(font, target) unless File.exists?(target)
  end
end 
```

# gwt - GWT 和带有 javascript 的 web 模板

> ID：14192698
> 
> 赞同：0
> 
> 时间：2013-01-07T09:01:53.110
> 
> 标签：gwt

我有由 html+css+javascript 文件组成的 GWT Web 应用程序和 Web 模板。UiBinder 在 HTMLPanel 中保存 html 模板。问题是这个模板基于许多 javascript 文件，我知道 GWT 有问题。所以我的页面是在没有一些 javascript 功能的情况下呈现的。我能用这个做什么？GWT 和外部 Web 模板的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:42:54.987

这个问题不是 GWT 特定的：你不能注入`<script>`s using `innerHTML`（`HTMLPanel`最终使用）。

如果您需要在应用程序中动态注入脚本，请使用`ScriptInjector`.

# c# - 如何读取我自己的应用程序的标准输出

> ID：14192699
> 
> 赞同：2
> 
> 时间：2013-01-07T09:01:52.513
> 
> 标签：c#, standards, output

我有一个应用程序必须读取它自己的输出，该输出是通过

```
Console.WriteLine("blah blah"); 
```

我正在努力

```
Process p = Process.GetCurrentProcess();
StreamReader input = p.StandardOutput;
input.ReadLine(); 
```

但由于第二行的“InvalidOperationException”，它不起作用。它说类似“StandardOutput 没有被重定向，或者进程还没有开始”（翻译）

我如何阅读自己的输出？还有另一种方法吗？并且要完整如何编写我自己的输入？

具有输出的应用程序已经在运行。

我想**在同一个应用程序中实时**读取它的输出。没有第二个应用程序。只有一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T09:10:57.763

我只是猜测你的意图可能是什么，但如果你想从你启动的应用程序中读取输出，你可以重定向输出。

```
 // Start the child process.
 Process p = new Process();
 // Redirect the output stream of the child process.
 p.StartInfo.UseShellExecute = false;
 p.StartInfo.RedirectStandardOutput = true;
 p.StartInfo.FileName = "Write500Lines.exe";
 p.Start();
 // Do not wait for the child process to exit before
 // reading to the end of its redirected stream.
 // p.WaitForExit();
 // Read the output stream first and then wait.
 string output = p.StandardOutput.ReadToEnd();
 p.WaitForExit(); 
```

来自[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx的示例](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)

编辑：

如果您想按照您的编辑指定重定向当前控制台应用程序的输出，您可以使用。

```
private static void Main(string[] args)
{
    StringWriter writer = new StringWriter();
    Console.SetOut(writer);
    Console.WriteLine("hello world");

    StringReader reader = new StringReader(writer.ToString());
    string str = reader.ReadToEnd();
} 
```

# javascript - 附加到 window.resize 事件的循环中的分辨率顺序

> ID：14192700
> 
> 赞同：2
> 
> 时间：2013-01-07T09:01:54.223
> 
> 标签：javascript, jquery

我有这个代码：

```
var res = [1024, 1280, 1600],
    vals = [1, 2, 3]; 
```

我想根据数组`window.resize`中匹配的分辨率为变量赋值。`res`所以我想出了这个：

```
function update() {
  res.forEach(function( res, i ) {
    someVariable = $(window).width() < res ? vals[ i ] : 4;
  });
}

$(window).resize( update ); 
```

问题是它仅适用于 1600，但不适用于所有其他分辨率。但是，如果我执行以下操作（硬编码），它就可以正常工作：

```
function update() {
  someVariable = $(window).width() < 1024 ? 1
   : $(window).width() < 1280 ? 2
   : $(window).width() < 1600 ? 3
   : 4;
} 
```

关于如何使这项工作动态工作的任何想法？

**编辑：**我想我必须在某个时候打破循环，但无法弄清楚要测试的条件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:08:18.380

`break`当第一次条件变为真并且值被分配给`someVariable`宽度小于 1024 也小于 1280 和 1600时，您需要循环，最后您将得到最后一个，即 1600。

```
function update() {
  res.forEach(function( res, i ) {
    if(winWidth < res)
     {
       someVariable = vals[ i ];
       return; //break the loop here
     }        
  });
} 
```

**根据 AlexStack 评论进行**编辑，以打破本文中讨论**[的](https://stackoverflow.com/questions/2641347/how-to-short-circuit-array-foreach-like-calling-break)forEach 循环，您可以使用以下技术。**

 **```
function update() {
  var exp = {}; 
  try
  {
    res.forEach(function( res, i ) {
       if(winWidth < res)
       {
          someVariable = vals[ i ];
          throw exp;
       }        
    });
  }catch(ex){
      if (e!==exp) throw e;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:13:13.317

问题是`forEach`一旦找到令人满意的结果就不会终止。你可以像这样解决它：

```
function update() {
  res.sort();//to make sure any future additions to the array doesn't break the order
  for( var i = 0; i < res.length; i++ ) {
    if ( winWidth < res[i] ) {
      someVariable = i + 1;//javascript arrays are 0-based. Add 1 to make it 1-based
      return;//terminate the loop when the result is found
    }
  }
  //if no result is found, this will be executed after the for loop
  someVariable = res.length;
  return;
} 
```

PS。此解决方案不需要`vals`数组。**

# batch-file - #Del fileName （但文件不可用，那么它会进一步处理还是停止）？

> ID：14192701
> 
> 赞同：0
> 
> 时间：2013-01-07T09:01:59.027
> 
> 标签：batch-file, batch-processing

需要删除一个文件，然后进一步处理。

```
del file.html

echo  ^<center^>^<a href="abc.html"^>ABC^</a^>^</center^> >> file.html
......
echo  ^<center^>^<a href="xyz.com"^>XYZ^</a^>^</center^> >> file.html 
```

第一次我收到此消息`Could Not Find C:\Users\file.html`，但进一步处理以写入文件。我想知道，如果找不到要删除的文件，它是否可以在任何阶段停止进一步处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:14:53.720

您可以先检查文件是否存在，然后仅在存在时才继续执行其他命令。

```
if exist file.html (
del file.html
echo  ^<center^>^<a href="abc.html"^>ABC^</a^>^</center^> >> file.html
echo  ^<center^>^<a href="xyz.com"^>XYZ^</a^>^</center^> >> file.html
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:17:39.103

根据这个问题 -[我可以在 DOS 批处理文件中有一个 IF 块吗？](https://stackoverflow.com/questions/4983508/can-i-have-an-if-block-in-dos-batch-file)- 如果通过分支，DOS 可以做到

```
if <statement> (
    do something
) else (
    do something else
) 
```

然后从[这篇 MS 支持文章中](http://support.microsoft.com/kb/65994)，您可以使用`EXIST`和`NOT EXIST`处理文件。所以我的猜测是：

```
if EXIST file.html del file.html 
```

顺便说一句，如果你想在 bash 中执行此操作（通过 Windows 上的 Cygwin），它会更容易，因为 bash 比 DOS 对这些东西有更多的支持：

```
f="file.html";
if [ -e "$f" ] ; then 
    rm "$f";
fi 
```

您似乎正在逐行将内容附加到文件中。如果这些行中没有进行任何处理，您可以[使用 copy 将它们连接起来](http://support.microsoft.com/kb/69575)：

```
copy chunkA.html+chunkB.html+chunkD.html file.html 
```

这提供了显着的好处，您可以将包含数据的文件与将它们拼接在一起的脚本分开。

# macos - 使用热键时防止菜单闪烁的方法

> ID：14192702
> 
> 赞同：1
> 
> 时间：2013-01-07T09:01:58.587
> 
> 标签：macos, cocoa

我是可可的新手，我想实现标题所暗示的内容：

有没有办法（简单或强硬）防止链接到菜单项的热键在触发时闪烁相应的菜单（你知道蓝色闪烁）？

为了更清楚地说明这一点，我已经了解了 acceptFirstResponder 技术，它有助于实现这种静音行为，而无需实际连接到菜单项（这是我想知道的是否可以实现）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:23:22.567

如果你有一个 NSResponder 在响应者链中，你可以这样做：

```
#define keyModifierMask (NSShiftKeyMask|NSControlKeyMask|NSAlternateKeyMask|NSCommandKeyMask)

- (BOOL)performKeyEquivalent:(NSEvent *)theEvent {
    if ([@"q" isEqualToString: [theEvent charactersIgnoringModifiers]]
        && ([theEvent modifierFlags]&keyModifierMask) == NSCommandKeyMask) {
        NSLog(@"Command-Q!");
        return YES;
    }
    return NO;
} 
```

`performKeyEquivalent`让您有机会“拦截”任何关键事件，包括那些与菜单键等效的事件。

在这种情况下，Command-Q 现在将不再闪烁应用程序的菜单。（显然，您可能希望它做一些除 . 之外的事情`NSLog()`。）

# c# - 是否可以创建一个扩展名为 `(.wav)` 格式的虚拟文件？

> ID：14192703
> 
> 赞同：1
> 
> 时间：2013-01-07T09:02:01.770
> 
> 标签：c#, file, silverlight-5.0, wav

我正在做 Silverlight 应用程序。我需要将数据保存到服务器中。

是否可以将录制的流保存在一个虚拟文件中。

```
 Stream stream = saveFileDialog.OpenFile();

 WavManager.SavePcmToWav(_sink.BackingStream, stream, _sink.CurrentFormat);

 stream.Close(); 
```

`SaveFileDialog`我不想`Dummy`在运行时使用文件来选择用户。

如果可能的话，有人会告诉我，我将不胜感激。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:24:58.503

您可以使用[IsolatedStorageFile](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile%28v=vs.95%29.aspx)创建临时/虚拟文件，而无需要求用户选择文件。

隔离存储是您的 silverlight 应用程序存储文件和数据的受限区域。

```
 IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication (); 
 IsolatedStorageFileStream stream = store.CreateFile("dummy.wav");

 WavManager.SavePcmToWav(_sink.BackingStream, stream, _sink.CurrentFormat);

 stream.Close(); 
```

另一种解决方案是将 .wav 文件的数据存储在内存流中。这可以通过使用[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream%28v=VS.95%29.aspx)来完成。

# javascript - 删除列表中的记录 - Android

> ID：14192706
> 
> 赞同：0
> 
> 时间：2013-01-07T09:02:10.093
> 
> 标签：javascript, android, html, cordova, local-storage

当单击列表中每条记录的按钮时，我有一个列表，我将其删除。

我通过PhoneGap包装器在Anroaid上使用这个HTML5，在计算机上记录被删除，在Android上没有！可能是什么原因？

这是我的代码：

我的列表：

```
<ul id="MyList" data-role="listview" data-divider-theme="b" data-inset="true">
</ul> 
```

我用这个函数填充列表：

```
function FillBookMarkListByStation() {
    var ul = $("#MyList");
    for (var i = 0; i < Local.length; i++) {
        var newLI = document.createElement("LI");
        ul.appendChild(newLI);
        newLI.innerHTML = '<a href="xxx.html" onclick="x();" > <p>...</p>' +
       '<a id="btnClear' + i + '" data-role="button" data-icon="delete" data-theme="b"></a> 
        </a>';
    $("#btnClear" + i).click(function () { Clear(ul, newLI); });

   }
  $('ul').listview('refresh');
} 
```

功能明确：

```
function Clear(List, Delete) {
    //Remove from the list
    List.removeChild(Delete);
            //Remove from the local storage
            for (var i = 0; i < Local.length; i++) {
              //Checking is variable for check the data in the item
                if (Local[i].Checking == Delete.dataset.checking) {
                    if (Local.length == 1)
                        Local= [];
                    else {
                        for (var j = i; j < Local.length - 1; j++) {
                            Local[i] = Local[i] + 1;
                        }
                        Local.length--;
                    }
                    Local["loc"] = JSON.stringify(Local);    
                }
           }
     } 
```

**在电脑上工作正常，**

在 Android 上是从屏幕上删除，而不是从 loacl 存储中删除，

在列表的演示文稿中仍然显示已删除的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:05:04.833

问题解决了，android 将不知道数据集，因此被卡住了..

# c# - 是否可以使用 C# Markdown 库在 Markdown 中嵌入 Youtube/Vimeo 视频

> ID：14192709
> 
> 赞同：65
> 
> 时间：2013-01-07T09:02:15.183
> 
> 标签：c#, asp.net-mvc-4, youtube, markdown

我正在用 .NET MVC4 编写一个 Web 应用程序，并且想使用 Markdown。我知道有一些开源 C# Markdown 库，但我还没有找到一个明显支持在 Markdown 文本中嵌入 youtube 或 Vimeo 视频的库。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2015-04-25T08:06:48.307

# 使用*标准 Markdown*的解决方案（*不是 iFrame！*）

使用 iframe***不是***“*明显*”的解决方案……*特别是*如果您使用的 Markdown 解析器（或发布平台）不支持来自不同网站的内联内容……相反，您可以通过包含***有效链接来“伪造” -image***在您的 Markdown 文件中，使用以下格式：

`[![IMAGE ALT TEXT](http://img.youtube.com/vi/YOUTUBE_VIDEO_ID_HERE/0.jpg)](http://www.youtube.com/watch?v=YOUTUBE_VIDEO_ID_HERE "Video Title")`

## 降价的解释

如果这个 markdown 片段看起来很复杂，请将其分为两部分：

`![image alt text](http//example.io/link-to-image)`
包含在链接中的图像
`[link text](http//example.io/my-link "link title")`

# 使用有效 Markdown 和 YouTube 缩略图的示例：

[![一切都很棒](../Images/11cc2893bed490ab5f07c49c1ae888b5.png)](https://www.youtube.com/watch?v=StTqXEQ2l-Y "一切都很棒")

我们*直接从 YouTube 获取****缩略图***图像并链接到实际视频，因此当人们单击图像/缩略图时，他们将被带到视频中。

 *## 代码：

`[![Everything Is AWESOME](https://img.youtube.com/vi/StTqXEQ2l-Y/0.jpg)](https://www.youtube.com/watch?v=StTqXEQ2l-Y "Everything Is AWESOME")`

***或者***，如果您想给读者一个***视觉提示***，即图像/缩略图实际上是一个*可播放*的视频，请在 YouTube 中拍摄您自己的视频屏幕截图并将其用作缩略图。

# 使用带有视频控件的屏幕截图作为视觉提示的示例：

[![一切都很棒](../Images/1fec2a79e50385de7966884cab7201ef.png)](https://youtu.be/StTqXEQ2l-Y?t=35s "一切都很棒")

## 代码：

`[![Everything Is AWESOME](http://i.imgur.com/Ot5DWAW.png)](https://youtu.be/StTqXEQ2l-Y?t=35s "Everything Is AWESOME")`

##  ***明显*优势**

虽然这需要几个额外的步骤（**a**）*拍摄*视频的屏幕截图和（**b**）*上传它*以便您可以将图像用作缩略图，但它确实具有**3 个*明显*的优势**：

1.  阅读您的降价（或生成的 html 页面）的人有一个**视觉提示**，告诉他们他们可以观看视频（*视频控件鼓励点击*）
2.  您可以选择视频中的**特定帧**用作缩略图（从而使您的内容**更具吸引力**）
3.  您可以**链接到视频中的特定时间**，单击链接图像时将从该时间开始播放。（在我们的例子中，从 35 秒开始）

截屏需要几秒钟的时间，每个操作系统都有键盘快捷键，可以将截屏复制到剪贴板，这意味着您可以*粘贴*它以便更快地上传。

# 不仅*_* `C#`

由于这是**100% 标准**降价，它**适用于*任何地方***（*不仅仅是`C#`解析器！*）......在 GitHub、Redit 或 Ghost 上试试吧！

# 维密欧

这种方法也适用于 Vimeo 视频

## 例子

[![小红帽](../Images/27f796b65067f0398c77c84d05ec7464.png)](https://vimeo.com/3514904 "小红帽 - 点击观看！")

## 代码

```
[![Little red ridning hood](http://i.imgur.com/7YTMFQp.png)](https://vimeo.com/3514904 "Little red riding hood - Click to Watch!") 
```

# 笔记：

*   *如何***截屏**：[http](http://www.take-a-screenshot.org/) : //www.take-a-screenshot.org/ （***所有平台***！）
*   **上传缩略图**：截取屏幕截图后，您可以将其**拖放**到[**imgur.com**](https://imgur.com/Ot5DWAW)进行**上传**并立即用作缩略图；*再简单不过了*！
*   YouTube 缩略图信息：[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-do-i-get-a-youtube-video-thumbnail-from-the-youtube-api)
*   借用/修改/扩展的 Markdown 格式：[嵌入 YouTube 视频](https://stackoverflow.com/questions/11804820/embed-a-you-tube-video)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-11T11:06:07.353

您可以使用[内联 HTML](http://daringfireball.net/projects/markdown/syntax#html)嵌入视频。

```
# this is a *markdown* document

<iframe  title="YouTube video player" width="480" height="390" src="http://www.youtube.com/watch?v=TheVideoID?autoplay=1" frameborder="0" allowfullscreen></iframe>

with a **youtube** video embedded 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-01T21:26:38.117

```
<iframe width="560" height="315" src="https://www.youtube.com/embed/-mUJnKI3ipI" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T14:41:43.010

Markdown 不会让你嵌入视频，基本上这里发布的答案是解释有一个图片链接，这显然不是嵌入的意思。因此，您是否可以嵌入视频的答案是“不，您不能”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-14T11:13:20.333

您应该能够使用 HTML5`<video>`元素。有人告诉我这是否行不通。

（刚刚发现这一点，晚了很多年:-)，因为我想将视频支持添加到我的 md2pptx Markdown 到 PowerPoint 开源工具中。）

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2014-02-03T09:15:53.993

嵌入图像的语法如何应用于其他媒体？

```
![MyImage](https://example.com/image.png) 
```

Oembed 让嵌入变得更容易很有趣：用户只需粘贴 URL 而不是 iframe 代码。对于视频，它可能是

```
![MyVideo](http://www.youtube.com/watch?v=TheVideoID) 
```*

# google-app-engine - 如何获取异常消息？

> ID：14192711
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:02:20.853
> 
> 标签：google-app-engine, exception

我目前使用以下代码：

```
from google.appengine.api.urlfetch import Error
try:
    # some code here
except Error, message:
    logging.error('exception - %s' % message) 
```

但它只会捕获 urlfetch 错误。如果我将其替换为：

```
try:
    # some code here
except:
    logging.error('exception') 
```

然后它捕获所有错误。但是在这种情况下我怎样才能得到错误信息呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:13:25.500

捕获通用 Python 异常：

```
try:
    i = 6/0
except Exception as e:
    print( e ) 
```

# grails - Cloudfoundry：当应用程序在cloudfoundy上运行时，存储在数据库中的图像不显示

> ID：14192717
> 
> 赞同：0
> 
> 时间：2013-01-07T09:02:43.510
> 
> 标签：grails, cloud-foundry

我有一个简单的 Grails 应用程序，在部署到本地 Tomcat 服务器时运行良好。但是，当我部署到 Cloudfoundry 时，保存到数据库的图像没有显示。谷歌搜索解决方案只发现在 Cloudfoundry 上您不能（或不应该）使用本地文件系统来存储图像文件，但我正在使用数据库并写入控制器中的主存储器（输出流）。任何人都可以帮助。

以下是部分代码：

//图片域类

```
class Picture {
    byte[] image
    String mimeType
    String name
    static belongsTo = ...

    static constraints = {
        name(maxSize:20, )
        image(maxSize:3145728)
        ....
    }
    String toString(){
        ...
    }
}

//Picture controller
def image = {

    def picture = Picture.get(params.id)

    if(!picture || !picture.image){
        ...
    }
    else{
        response.setContentType(picture.mimeType)
        response.setContentLength(picture.image.size())
        OutputStream out = response.getOutputStream();
        out.write(picture.image);
        out.flush();
        out.close();
    }
} 
```

//在我的gsp中 <img width="128" height="96" class="image" src="${createLink(controller:'picture', action:'image', id:pictureInstance.ident())} " />

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:41:16.203

您的查询似乎有问题。你为什么不把你的数据库从 postgreSql 更改为 MySQL，看看问题是否仍然存在。我不相信这里的问题在于 RDBMS 服务。

# flex4 - 找不到变量：StageWebViewBridge

> ID：14192719
> 
> 赞同：1
> 
> 时间：2013-01-07T09:02:50.380
> 
> 标签：flex4, stagewebviewbridge

我使用的开发工具：Adobe Flash Builder 4.6；

当我将“ExampleCallBackFuncions?.html”移动到在线服务器并尝试使用以下方法加载它时：

webView.loadURL("http://192.168.1.101/MapTest/ExampleBasic.html");

出现 html 页面，但是当我按下 callAS3Function 按钮时，出现以下错误：

ReferenceError？：找不到变量：StageWebViewBridge？[http://www.myserver.com/ExampleCallBackFuncions.html](http://www.myserver.com/ExampleCallBackFuncions.html)上的 callAs3Funciton ：14 onclick 上[http://www.myserver.com/ExampleCallBackFuncions.html：27](http://www.myserver.com/ExampleCallBackFuncions.html)

Create flex mobile project 是怎么交互的，我总是不能交互？

谢谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:35:03.543

您需要包含项目：

[http://code.google.com/p/stagewebviewbridge/](http://code.google.com/p/stagewebviewbridge/)

文件似乎`StageWebViewBridge.js`丢失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T05:41:03.100

当我们使用stagewebviewbridge时，我们应该在我们的.html文件中包含StageWebViewBridge.js文件，因为通过.js文件我们可以在as3和js之间进行通信。因此，您可以在 .html 文件中包含 .js 文件位置。

您最好将 .js 文件作为 [ MapTest ] 目录的一部分，或从[http://code.google.com/p/stagewebviewbridge/引用 .js](http://code.google.com/p/stagewebviewbridge/)

# vb.net - 让异常抛出或检查 VB.NET（性能虎钳）

> ID：14192720
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:02:52.213
> 
> 标签：vb.net

假设我们有一个

```
Dictionary(Of Date, List(Of SomeClass)) 
```

我们在数据库中有大约一百万行，所以我很好奇哪一个在性能方面更好，检查我的字典是否有键，或者直接在 try catch 子句中添加而不检查它？

```
While Reader.Read
    Try
        MyDictionary.Add(Reader("SaleDate"), New SomeClass(Reader("SaleData")))
    Catch ex As Exception
        ' Silence here
    End Try
End While

While Reader.Read
    Try
        If Not MyDictionary.ContainsKey(Reader("SaleDate")) Then
            MyDictionary.Add(Reader("SaleDate"), New SomeClass(Reader("SaleData")))
        End If
    Catch ex As Exception
        MsgBox("ERROR")
    End Try
End While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:17:09.223

1.  在遇到性能问题之前，您不应该担心性能。
2.  如果您没有预料到异常并且有恢复计划并且没有其他方法可以检查并查看是否会出现异常，那么您永远不应该捕获异常。
3.  例外是好事。那里可以保护您和您的应用程序用户。所以不要滥用它们或到处抓它们。

# javascript - Google 地球 API - 转换 ED50 / WGS84

> ID：14192723
> 
> 赞同：2
> 
> 时间：2013-01-07T09:03:03.080
> 
> 标签：javascript, google-earth-plugin, wgs84

我正在开发一个 Web 应用程序，用 JS 编码，包括 Google Earth API。我正在寻找一种**将点从使用过的 WGS84 转换为 ED50 的方法，反之亦然**。如果 google 本身没有给出这个选项，那么在 JS 中还有另一种方法吗？不幸的是，proj4js 帮不了我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:15:37.040

嗯，我想没有真正简单的方法。

您需要将 ED50 纬度、经度和椭球高度/高度转换为相应的地心、地心固定地心系统中的笛卡尔坐标（X、Y、Z）。然后，您可以将笛卡尔坐标转换为 WGS84 纬度、经度和椭圆体高度/高度。

参考：

*   [https://groups.google.com/forum/?hl=de&fromgroups=#!topic/comp.soft-sys.matlab/0Rt9A3qKsqo](https://groups.google.com/forum/?hl=de&fromgroups=#!topic/comp.soft-sys.matlab/0Rt9A3qKsqo)
*   [http://mind.cog.jhu.edu/courses/680/octave/Installers/Octave/Octave.OSX10.6/Applications/MATLAB_R2009b.app/toolbox/shared/mapgeodesy/geodetic2ecef.m](http://mind.cog.jhu.edu/courses/680/octave/Installers/Octave/Octave.OSX10.6/Applications/MATLAB_R2009b.app/toolbox/shared/mapgeodesy/geodetic2ecef.m)

# javascript - knockout.js 引用父对象

> ID：14192724
> 
> 赞同：3
> 
> 时间：2013-01-07T09:03:08.790
> 
> 标签：javascript, knockout.js

我有一个复杂的 knockout.js 对象，它实际上是一个带有另一个 observableArray 的 observableArray。我有一个删除函数，它从第二个数组中异步删除选定的元素。一个项目正在数据库中存档，而它在客户端的可观察属性之一被设置为 false 使其从屏幕上消失。

使用 $root 关键字创建删除按钮事件：

```
<a href="#" data-bind="click: $root.RemoveActivity">Remove</a> 
```

是什么让我可以使用“this”关键字访问所选元素的详细信息。我的问题是，在从第二个数组中删除项目时，我想将某些内容更改为第一个数组中的父项。正如我提到的“this”关键字是指子项，有什么方法可以同时访问父项吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T10:04:32.727

mhu 的答案是一种反模式，因为它在 ViewModel 和 View 的结构之间创建了依赖关系。

而是做

```
<a href="#" data-bind="click: $parent.removeActivity.bind($parent)">Remove</a> 
```

父视图模型

```
removeActivity: function(activity) {
    this.activities.remove(activity);
} 
```

# android - AnimationSet 中的 TranslateAnimation 不是从 0 位置开始，为什么？

> ID：14192728
> 
> 赞同：2
> 
> 时间：2013-01-07T09:03:17.877
> 
> 标签：android, animation

我希望按钮向下移动 200 像素（从 0,0 到 0, 200），并在 1 秒后再次向上移动到原始位置。

但以下代码的行为就像从 (0,200) 开始到 (0,400)，而不是从 (0,0) 开始

如果我将一个动画放入 AnimationSet，它就可以正常工作。但是如果我在 AnimationSet 中放置两个以上的动画，它会很奇怪。

有什么问题？

```
public class MainActivity extends Activity {
    private static final int DISTANCE = 200;
    private static final long DURATION = 1000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button btn = (Button) findViewById(R.id.button1);

        TranslateAnimation aniMove = new TranslateAnimation(0, 0, 0, DISTANCE);
        aniMove.setDuration(DURATION);

        TranslateAnimation aniMoveBack = new TranslateAnimation(0, 0, DISTANCE, 0); 
        aniMoveBack.setDuration(DURATION);
        aniMoveBack.setStartOffset(DURATION + 1000);

        AnimationSet aniSet = new AnimationSet(true);
        aniSet.addAnimation(aniMove);
        aniSet.addAnimation(aniMoveBack);
        btn.startAnimation(aniSet);
    }
} 
```

这是 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="0dp" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:35:31.833

我找到了解决方案。TranslateAnimation() 参数中的坐标不是绝对坐标。因为我调用了 setStartOffset(N)，所以 aniMoveBack 动画将从 aniMove 坐标的末尾开始。是相对位置。

所以，代码应该像这样固定..

```
TranslateAnimation aniMoveBack = new TranslateAnimation(0, 0, 0, -DISTANCE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:53:19.787

> AnimationSet 代表一组应该一起播放的动画。每个单独动画的变换组合在一起成为一个变换。

AnimationSet 不能这样使用，它可以结合多动画的特性。使用 AnimationSet，您可以同时执行 alpha 和旋转动画。

如果要按顺序播放 2 个动画，则应在第一个动画的 onAnimationEnd() 中启动第二个动画。

# java - 如何将字符串编码为字节 []

> ID：14192729
> 
> 赞同：-4
> 
> 时间：2013-01-07T09:03:32.970
> 
> 标签：java, string, hex, decode

我有一个包含十六进制数字的字符串但我想将它们解码为文本并将它们转换为字符串

如果我的字符串是“FF505000010000000A00015634”它们是十六进制的，我如何使它们成为 \xFF \x50... 等等

请在这里帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:28:59.227

尝试

```
 String s = "FF505000010000000A00015634";
    s = s.replaceAll(" +", "");
    byte[] bytes =  new BigInteger(s, 16).toByteArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:31:50.297

将文本作为十六进制字符串转换为文本的一种简单方法是使用 BigInteger。

```
String s = "Hello world!";
String hex = new BigInteger(s.getBytes(StandardCharsets.US_ASCII)).toString(16);

hex = hex.replaceAll("\\s+", ""); // remove any whitespaces.
String s2 = new String(new BigInteger(hex, 16).toByteArray(), StandardCharsets.US_ASCII);
System.out.printf("\"%s\" as hex is %s, converted back is \"%s\"%n", s, hex, s2); 
```

印刷

“你好世界！” 因为十六进制是 48656c6c6f20776f726c6421，转换回来是“Hello world！”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:23:57.480

这应该有效。你基本上得到每两个字符，并将其解析为一个`int`，也可以解释为一个`char`。由此，您构建另一个解码`String`的 .

```
String s = "FF505000010000000A00015634";
if (s.length() % 2 != 0) {
    //odd amount, so wrong string. Throw exception.
}
String decoded = "";
int j = 0;
while (j < s.length()) {
    String sub = s.substring(j, j + 2);
    int i = Integer.parseInt(sub, 16);
    decoded += (char)i;
    j += 2;
}
System.out.println(decoded); 
```

我的输出非常随机，但我认为您的测试字符串并不是那么好。

对于`Hello world!`，使用这个：

```
String s = "48 65 6C 6C 6F 20 57 6F 72 6C 64 21";
s = s.replaceAll(" ", ""); 
```

那么实际发生了什么：

1.  每两个字符应解释为一个字符。
2.  因此，将`String`两个字符分成几部分。
3.  将每两个十六进制字符转换为实际`int`值，从而可以进行实际转换。
4.  将每个从十六进制到 ASCII 解码的字符附加到您的新解码的`String`.
5.  重复，直到所有字符都包含在 hex 中`String`。

# svn - 水晶报表+SVN合并分支

> ID：14192735
> 
> 赞同：6
> 
> 时间：2013-01-07T09:03:49.967
> 
> 标签：svn, crystal-reports

我正在开发一个使用 Crystal Reports 生成 pdf、excel 和 word 报告文件的大型 C# 项目。项目位于 SVN 存储库下，我们有主干和一个单独的分支。每周我们都会将主干合并到分支中，但 .rpt 文件由于其二进制内容而难以合并。

是否有工具或最佳方法来管理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:07:52.987

对于我过去的一个项目，我曾经要求 CR 开发人员将报告描述添加到 SVN 存储库。您可以从“导出为 > 报表定义”菜单或类似的东西在 Crystal Report 中生成它。它们是代表报告结构的文本文件。

然后通过一些预提交钩子脚本，您可以要求每个`rpt`文件都存在这样的定义，无论是添加还是修改。

您还应该能够使用[RptToXml](https://github.com/ajryan/RptToXml)之类的工具或[ReportMiner 提供的差异工具](http://www.reportminer.com/Products/RptDiff.shtml)来自动生成此类元数据。

这至少解决了报告文件的*差异问题。*对于*合并*部分，也许您可​​以找到一种方法来导入报告定义，但至少您应该能够知道潜在冲突的来源。

# javascript - 仅在第一次单击时从多个文本区域中删除文本

> ID：14192739
> 
> 赞同：0
> 
> 时间：2013-01-07T09:03:50.930
> 
> 标签：javascript, textarea

我有这个代码，**它只在第一次点击时**从 textarea 中删除文本。只有在我编写了第二个 textarea 标签之前它才能正常工作：

```
<textarea id="textarea2" onfocus="checkOnFocus(this);" onblur="resetInitialText(this);">Your second message</textarea> 
```

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <script type="text/javascript">
      var flag = false;

      function setInitialText() {
        var textarea = document.getElementById('textarea');
        if (textarea.value == "") {
          textarea.value = text;
        }
      }

      function checkOnFocus(textarea) {
        if (!flag) textarea.value = "";
        flag = true;
      }

      function resetInitialText(textarea) {
        if (textarea.value == "") {
          textarea.value = text;
          flag = false;
        }
      }
    </script>
    </head>
    <body onload="setInitialText();">
      <textarea id="textarea" onfocus="checkOnFocus(this);" onblur="resetInitialText(this);">Your first message</textarea>
      <textarea id="textarea2" onfocus="checkOnFocus(this);" onblur="resetInitialText(this);">Your second message</textarea>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:10:43.580

从您的回答来看，您对 jquery 没问题，您可以尝试以下作为非常基本的*占位符*解决方案：

```
$('[data-placeholder]').each(function () {
  var placeholder = $(this).data('placeholder');

  $(this).val(placeholder).on({
    focus: function () {
      $(this).val(function (_, value) {
        return value === placeholder ? '' : value;
      });
    },

    blur: function () {
      $(this).val(function (_, value) {
        return value === '' ? placeholder : value;
      });
    }
  });
}); 
```

和：

```
<textarea data-placeholder="Your first message"></textarea>
<textarea data-placeholder="Your second message"></textarea> 
```

[http://jsbin.com/iyobiy/1/](http://jsbin.com/iyobiy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:54:39.143

我终于找到了如何做我问的事情：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title></title>  
<script type='text/javascript' src='http://code.jquery.com/jquery-1.4.2.js'></script>
<script type='text/javascript'>//<![CDATA[ 

$(function() {
    $("textarea").focus(function(event) {

          // Erase text from inside textarea
        $(this).text("");

          // Disable text erase
        $(this).unbind(event);
    });
});
//]]>  

</script>

</head>
<body>
  <textarea rows="5" cols="30">Enter text here.</textarea>
  <textarea rows="5" cols="30">Enter text here.</textarea>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:16:08.517

您只有一个（全局）标志和两个文本区域，因此在第二次调用时，该标志已设置为 true。考虑使用数组或字典类型结构来创建通用实现。一种选择是在全局范围内使用数组：

```
var textareasAlreadyHit = new Array(); 
```

然后每次你：

```
function checkOnFocus(textarea) 
```

不是检查标志，而是检查数组是否包含 textarea 的 id。如果是这样，什么也不做。如果没有，则从 textarea 中删除文本并将 textarea 的 id 添加到数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:20:04.967

```
function checkOnFocus(textarea){
if(!flag)
textarea.value="";
flag=false;
}

function resetInitialText(textarea){
if(textarea.value==""){
textarea.value='text';
flag=false;
} 
```

这里有两个变化

1>checkOnFocus() 方法

```
flag=false; 
```

2>resetInitialText() 方法

```
textarea.value='text';// make your own string to replace 
```

# android - Android如何加密/解密数据库

> ID：14192740
> 
> 赞同：2
> 
> 时间：2013-01-07T09:03:53.163
> 
> 标签：android, database, encryption

我想加密/解密 android 数据库，为此我研究了 SQLCipher，如果仅使用 SQLCipher 创建数据库，它就可以工作。但就我而言，我使用 Oracle Mobile Server 创建了数据库，那么加密/解密已创建数据库的解决方案是什么。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:07:42.910

只有使用 Oracle Mobile Server 和您的密钥（或任何它使用的密钥），否则您的加密不会那么好。

# python - 了解熊猫数据框索引

> ID：14192741
> 
> 赞同：14
> 
> 时间：2013-01-07T09:03:57.777
> 
> 标签：python, pandas, dataframe

摘要：这不起作用：

```
df[df.key==1]['D'] = 1 
```

但这确实：

```
df.D[df.key==1] = 1 
```

为什么？

再生产：

```
In [1]: import pandas as pd

In [2]: from numpy.random import randn

In [4]: df = pd.DataFrame(randn(6,3),columns=list('ABC'))

In [5]: df
Out[5]: 
          A         B         C
0  1.438161 -0.210454 -1.983704
1 -0.283780 -0.371773  0.017580
2  0.552564 -0.610548  0.257276
3  1.931332  0.649179 -1.349062
4  1.656010 -1.373263  1.333079
5  0.944862 -0.657849  1.526811

In [6]: df['D']=0.0

In [7]: df['key']=3*[1]+3*[2]

In [8]: df
Out[8]: 
          A         B         C  D  key
0  1.438161 -0.210454 -1.983704  0    1
1 -0.283780 -0.371773  0.017580  0    1
2  0.552564 -0.610548  0.257276  0    1
3  1.931332  0.649179 -1.349062  0    2
4  1.656010 -1.373263  1.333079  0    2
5  0.944862 -0.657849  1.526811  0    2 
```

这不起作用：

```
In [9]: df[df.key==1]['D'] = 1

In [10]: df
Out[10]: 
          A         B         C  D  key
0  1.438161 -0.210454 -1.983704  0    1
1 -0.283780 -0.371773  0.017580  0    1
2  0.552564 -0.610548  0.257276  0    1
3  1.931332  0.649179 -1.349062  0    2
4  1.656010 -1.373263  1.333079  0    2
5  0.944862 -0.657849  1.526811  0    2 
```

但这确实：

```
In [11]: df.D[df.key==1] = 3.4

In [12]: df
Out[12]: 
          A         B         C    D  key
0  1.438161 -0.210454 -1.983704  3.4    1
1 -0.283780 -0.371773  0.017580  3.4    1
2  0.552564 -0.610548  0.257276  3.4    1
3  1.931332  0.649179 -1.349062  0.0    2
4  1.656010 -1.373263  1.333079  0.0    2
5  0.944862 -0.657849  1.526811  0.0    2 
```

[链接到笔记本](http://nbviewer.ipython.org/4473426/)

我的问题是：

> 为什么只有第二种方式有效？我似乎看不出选择/索引逻辑有什么不同。

版本是 0.10.0

> 编辑：这不应该再这样做了。从 0.11 版开始，有`.loc`. 见这里： http: [//pandas.pydata.org/pandas-docs/stable/indexing.html](http://pandas.pydata.org/pandas-docs/stable/indexing.html)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T09:32:27.723

熊猫文档说：

> 返回视图与副本
> 
> 关于何时返回数据视图的规则完全取决于 NumPy。每当索引操作涉及标签数组或布尔向量时，结果将是一个副本。使用单个标签/标量索引和切片，例如 df.ix[3:6] 或 df.ix[:, 'A']，将返回一个视图。

在`df[df.key==1]['D']`您首先进行布尔切片（导致**Dataframe**的副本），然后选择一列 ['D']。

在`df.D[df.key==1] = 3.4`中，您首先选择一列，然后对结果**Series**进行布尔切片。

这似乎有所作为，尽管我必须承认这有点违反直觉。

***编辑***：Dougal 发现了差异，请参阅他的评论：在版本 1 中，复制是在`__getitem__`调用布尔切片的方法时制作的。对于版本 2，仅`__setitem__`访问方法 - 因此不返回副本，而只是分配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T09:27:17.380

我很确定您的第一种方法是返回副本，而不是视图，因此分配给它不会更改原始数据。我不确定为什么会这样。

它似乎与您选择行和列的顺序有关，而不是与获取列的语法有关。这些都有效：

```
df.D[df.key == 1] = 1
df['D'][df.key == 1] = 1 
```

这些都不起作用：

```
df[df.key == 1]['D'] = 1
df[df.key == 1].D = 1 
```

从这个证据来看，我会假设切片`df[df.key == 1]`正在返回一个副本。但这种情况并非如此！`df[df.key == 1] = 0`实际上会改变原始数据，就好像它是一个视图一样。

所以，我不确定。我的感觉是这种行为随着熊猫的版本而改变。我似乎记得 df.D 用于返回副本而 df['D'] 用于返回视图，但这似乎不再是真的（熊猫 0.10.0）。

如果您想要更完整的答案，您应该在 pystatsmodels 论坛发帖： [https ://groups.google.com/forum/?fromgroups#!forum/pystatsmodels](https://groups.google.com/forum/?fromgroups#!forum/pystatsmodels)

# algorithm - 具有“破坏轮廓”的动态编程？

> ID：14192742
> 
> 赞同：2
> 
> 时间：2013-01-07T09:04:01.007
> 
> 标签：algorithm, dynamic-programming

以下链接提到了某些类型的动态编程： http: [//www.mii.lt/olympiads_in_informatics/pdf/INFOL056.pdf](http://www.mii.lt/olympiads_in_informatics/pdf/INFOL056.pdf) 其中之一是“破碎的个人资料”。

我很确定这是一个有效的术语，因为我在 TopCoder 和 CodeForces 等其他编程竞赛网站上看到过对它的引用。

但我似乎在这个话题上找不到任何东西。该术语主要由俄罗斯来源使用。

有没有人意味着什么，或者它解决了动态编程中的什么样的问题？或者更好的教程？

# image - 如何在 c# 中为 windows phone 8 在图像上写文本？

> ID：14192744
> 
> 赞同：1
> 
> 时间：2013-01-07T09:04:08.613
> 
> 标签：image, text, merge, windows-phone-8, text-formatting

> **可能重复：**
> [在 WP7 中的图像上写入文本](https://stackoverflow.com/questions/9674649/write-text-on-image-in-wp7)

我想以编程方式从 Windows phone 8 中的相机或媒体库中拍照，并在这张照片上写一些文字，文字可以调整大小，旋转等，然后将这张照片和文字合并为单层，请帮助我谢谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:02:09.417

只需将 TextBlock 控件放在 Image 控件上即可。

```
 <Grid>
   <Image source="source"/>
   <TextBlock Text="text"/>
  </Grid> 
```

到 TextBlock 您可以设置边距，它将位于图像控件上。您可以在 TextBlock 上调整大小、更改字体、更改旋转和制作动画。

# objective-c - xcode 4.0.2 中的页面控制

> ID：14192745
> 
> 赞同：0
> 
> 时间：2013-01-07T09:04:20.860
> 
> 标签：objective-c, ios4, uipagecontrol

我有`PageControl`一个观点，我实施了它，它的工作很好，但没有显示，`view`没有`PageControl`。`view`我可以在页面之间滑动，但它不会出现在用户面前。

可能是什么原因？

```
//  scrollView.frame.size.height
    scrollView.pagingEnabled = YES;
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * [self.viewControllers count],280 );  scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.scrollsToTop = NO;
    scrollView.delegate = self;
    pageControl.numberOfPages = [self.viewControllers count];
    pageControl.currentPage = 0;

[self loadScrollViewWithPage:0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:25:38.597

您应该在滚动视图滚动后执行以下操作来更新 pageControl：

```
- (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    pageControl.currentPage = scrollview.contentOffset.x / scrollview.frame.size.width;
} 
```

更新：头文件应该是：

```
@property (nonatomic, weak) IBOutlet UIPageControl *pageControl; 
```

# webview - Android webview 错误：不幸的是 Myapp 已停止

> ID：14192746
> 
> 赞同：1
> 
> 时间：2013-01-07T09:04:25.797
> 
> 标签：webview, emulation

我尝试了很多解决方案，但模拟器仍然说，不幸的是，当我尝试打开 webview 时，应用程序已停止。

这是我的 Webviewactivity.java 代码：

```
 package com.example.jpg;

import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class Webviewactivity extends Activity {
     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          //setContentView(R.layout.main);

          // Let's display the progress in the activity title bar, like the
          // browser app does.
          getWindow().requestFeature(Window.FEATURE_PROGRESS);

          WebView webview = new WebView(this);
          setContentView(webview);

          webview.getSettings().setJavaScriptEnabled(true);

          final Activity activity = this;
          webview.setWebChromeClient(new WebChromeClient() {
          public void onProgressChanged(WebView view, int progress) {
               // Activities and WebViews measure progress with different scales.
               // The progress meter will automatically disappear when we reach 100%
               activity.setProgress(progress * 1000);
          }
        });

webview.setWebViewClient(new WebViewClient() {

public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
          //Users will be notified in case there's an error (i.e. no internet connection)
          Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_SHORT).show();
}
 });
       //This will load the webpage that we want to see
        webview.loadUrl("http://www.google.com");

     }
} 
```

这是我的日志：

```
01-07 10:54:54.829: E/AndroidRuntime(940): FATAL EXCEPTION: main
01-07 10:54:54.829: E/AndroidRuntime(940): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.jpg/com.example.jpg.Webviewactivity}; have you declared this activity in your AndroidManifest.xml?
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1541)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivityForResult(Activity.java:3351)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivityForResult(Activity.java:3312)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivity(Activity.java:3522)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivity(Activity.java:3490)
01-07 10:54:54.829: E/AndroidRuntime(940):  at com.example.jpg.MainActivity$1.onClick(MainActivity.java:32)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.view.View.performClick(View.java:4084)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.view.View$PerformClick.run(View.java:16966)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.os.Handler.handleCallback(Handler.java:615)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.os.Looper.loop(Looper.java:137)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-07 10:54:54.829: E/AndroidRuntime(940):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 10:54:54.829: E/AndroidRuntime(940):  at java.lang.reflect.Method.invoke(Method.java:511)
01-07 10:54:54.829: E/AndroidRuntime(940):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-07 10:54:54.829: E/AndroidRuntime(940):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-07 10:54:54.829: E/AndroidRuntime(940):  at dalvik.system.NativeStart.main(Native Method)
01-07 10:54:57.249: I/Process(940): Sending signal. PID: 940 SIG: 9
01-07 10:54:54.829: E/AndroidRuntime(940): FATAL EXCEPTION: main
01-07 10:54:54.829: E/AndroidRuntime(940): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.jpg/com.example.jpg.Webviewactivity}; have you declared this activity in your AndroidManifest.xml?
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1541)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivityForResult(Activity.java:3351)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivityForResult(Activity.java:3312)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivity(Activity.java:3522)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.Activity.startActivity(Activity.java:3490)
01-07 10:54:54.829: E/AndroidRuntime(940):  at com.example.jpg.MainActivity$1.onClick(MainActivity.java:32)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.view.View.performClick(View.java:4084)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.view.View$PerformClick.run(View.java:16966)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.os.Handler.handleCallback(Handler.java:615)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.os.Looper.loop(Looper.java:137)
01-07 10:54:54.829: E/AndroidRuntime(940):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-07 10:54:54.829: E/AndroidRuntime(940):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 10:54:54.829: E/AndroidRuntime(940):  at java.lang.reflect.Method.invoke(Method.java:511)
01-07 10:54:54.829: E/AndroidRuntime(940):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-07 10:54:54.829: E/AndroidRuntime(940):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-07 10:54:54.829: E/AndroidRuntime(940):  at dalvik.system.NativeStart.main(Native Method)
01-07 10:54:57.249: I/Process(940): Sending signal. PID: 940 SIG: 9 
```

请帮忙。我对此非常着急。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-16T03:45:34.660

在 LogCat 中，它会告诉您在添加内容之前必须调用 requestFeature()。

这是您可以解决的方法：

```
 @Override
       public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       // Let's display the progress in the activity title bar, like the
       // browser app does.
       super.getWindow().requestFeature(Window.FEATURE_PROGRESS);
       setContentView(R.layout.main);
       WebView webview = new WebView(this);
       setContentView(webview); 
```

# ext.net - 单击 Tab extjs 后如何在 TabPanel 中加载面板？

> ID：14192747
> 
> 赞同：0
> 
> 时间：2013-01-07T09:04:29.557
> 
> 标签：ext.net

页面加载时，TabPanel 中的所有 Panel 都会自动加载。我不想要它。单击此选项卡后如何加载面板？

```
 <ext:Panel runat="server" ID="pnlQLDB" Border="false" Layout="fit">
                <Items>
                    <ext:TabPanel ID="TabDB" Border="false" runat="server">
                        <Items>

                            <ext:Panel ID="panTest" Border="false" runat="server">
                                <Content>
                                    <uc:NHQH ID="NHQH" runat="server" />
                                </Content>
                            </ext:Panel>
                            <ext:Panel ID="panTest1" Border="false" runat="server">
                                <Content>
                                    <uc:NSQHCLY ID="NSQHCLY" runat="server" />
                                </Content>
                            </ext:Panel>
                            <ext:Panel ID="panTest2" Border="false" runat="server">
                                <Content>
                                    <uc:NSQTLS ID="NSQTLS" runat="server" />
                                </Content>
                            </ext:Panel>
                        </Items>
                    </ext:TabPanel>
                </Items>
            </ext:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:12:31.467

为此，您可以在或的事件上编写`load`功能。`activate``Ext.tab.Panel``Ext.tab.Tab`

# ruby-on-rails - Jquery 使用 Ajax 调用重定向到另一个页面 Rails

> ID：14192748
> 
> 赞同：1
> 
> 时间：2013-01-07T09:04:34.660
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我正在尝试实现两个页面。第一页是我想在第二页上显示的项目的选择。

在我的第一页上，我选择了要渲染的项目。

单击按钮时，1\. 这些项目的 id 将被放置在一个数组中，2\. 用户将通过以下方式重定向到新页面：

```
window.location.replace("/schedule"); 
```

现在，我想实现以下目标：

通过 rails 进行 ajax 调用以获取每个数组项。即对myclass/[id] 的url 进行ajax 调用。属于数组中项目的 id。

我不确定如何将我的数组项从当前页面获取到下一页，或者是否有更好的方法来实现这一点。任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:02:06.020

添加`:remote => true`到您的表单中。然后，应用程序将呈现您的`action_name.js.erb`视图而不是`action_name.html.erb`. 在 js 文件中你可以放代码，这将在没有重定向的情况下替换 div，fe

```
$('#div_id').html('<%= escape_javascript render(your_partial_name) %>'); 
```

您不需要在部分和控制器动作中做任何特别的事情，都是一样的。

# php - 在 Laravel 4 中出现“找不到类 HTML”错误

> ID：14192750
> 
> 赞同：8
> 
> 时间：2013-01-07T09:04:40.273
> 
> 标签：php, laravel

在 Laravel 4（又名 Illuminate）中处理一个新项目我正在尝试在我的`master.blade.php`模板中创建指向样式表的链接，如下所示：

```
 {{ HTML::style('css\style.css') }} 
```

但这会引发一个错误，说明找不到类 HTML。它是否已在 Laravel 4 中被删除或重命名，还是我忘记了其他任何内容？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T09:09:38.977

出于最佳实践原因，HTML:: 和 Form:: 等生成器类型类已从 L4 中删除。使用 path() 方法链接属性会更好地呈现为标记：

```
<link href="{{ path('to/my/style.css') }}" /> 
```

稍后可能会添加它们以实现向后兼容性，我们将看到。请记住，L4 目前处于 alpha 状态。

谢谢！戴尔里斯。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-05T14:49:29.153

他们只是在 2013 年 4 月 2 日把它带回来，但`Html`改用`HTML`

例如。`{{ Html::style('css\style.css') }}`（现在他们再次更改它，这不再起作用了）

参考：[添加缺少的 HTML::script 和 HTML::style](https://github.com/laravel/framework/commit/acc07bdfb35fa0be942c79615719a313de4c51cc)

# 更新：它的“HTML”又来了！！！（感谢@milad-rey）

现在请使用这个`{{ HTML::style('css\style.css') }}`

参考：[外观](https://github.com/laravel/laravel/commit/a982efb49bbf2d107e4a9d7ebc11448d557ee744)[重命名的更新。`HTML`](https://github.com/laravel/laravel/commit/a982efb49bbf2d107e4a9d7ebc11448d557ee744)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T09:47:31.087

HTML 和 Form 类已被删除。您可以在此处使用 composer 安装 HTML 端口：[https ://github.com/meido/html](https://github.com/meido/html)

或者您可以使用它（**在 Laravel 4 Beta 5 上**）：

`<link rel="stylesheet" type="text/css" href="{{ URL::to('to/my/style.css') }}" />`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-31T23:31:06.620

使用 URL::asset('pathToAsset') ...我不太确定，如果这将被弃用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-07T09:07:53.813

在 Laravel 4 中，由于现在可以通过 composer 找到现有的第三方包，HTML 和 Form 类都被删除了。你可以搜索一个你喜欢的，或者 meido 已经移植了现有的[HTML](https://github.com/meido/html)和[Form](https://github.com/meido/form)类。有关安装说明，请参阅他们的页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-03T18:12:31.400

```
<?php /* outputs string: http://yoursite.com/pathToAsset */ ?>
{{ URL::asset('/css/style.css') }} 
```

* * *

```
<?php /* outputs html tag: `<a href="http://yoursite.com/home">Home</a>` */ ?>
{{ Html::link('home', 'Home') }} 
```

检查`/vendor/laravel/frameworj/src/Illuminate//Html/HtmlBuilder.php`方法。不知道 *ell`/vendor`文件夹在哪里？您一直缺少[Composer](http://four.laravel.com/#install-composer)。

## 作曲家.json

最好的部分（没有更多的'照明/基础'，'直到现在）：

```
{
  ...
  "require": {
    ...
    "laravel/framework": "4.0.*"
  },
  ...
} 
```

## 证明直到 2013-05-03 12:50

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T16:10:34.943

它已被删除。但是，您可以做几件事 试试看：[http](http://laravelbook.github.io/laravel4-powerpack/) ://laravelbook.github.io/laravel4-powerpack/ powerpack 声明它将把它带回来。

或者使用另一篇文章中提到的 HTML：

```
<link rel="stylesheet" type="text/css" href="{{ URL::to('pathto/styleheet.css') }}" /> 
```

对于命名路线的超链接，以防其他人也在寻找它们：

```
echo "<a href=\"" . URL::route('routeNameHere') . "\">Control Page</a>";
or $url = URL::route('routeNameHere'); 
```

见[http://four.laravel.com/docs/routing](http://four.laravel.com/docs/routing)

# mysql - mysql更新最后插入的id

> ID：14192756
> 
> 赞同：2
> 
> 时间：2013-01-07T09:05:20.097
> 
> 标签：mysql

我想通过获取最后插入的 id 来更新表，但它没有给出任何结果。这是查询：

```
 $quer = mysql_query("UPDATE date 
                      SET d_startdate = '$start', d_enddate = '$end' 
                      WHERE d_id = LAST_INSERT_ID() AND d_sid = $id"); 
```

d_id 是主键，d_sid 是另一个表的外键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:23:07.170

我在同一张表上使用了 INSERT 和 UPDATE 操作，并且工作正常。您可以根据需要更改此查询。

```
<?php
$con = mysql_connect("localhost","root","") or die("Could not connect");
mysql_selectdb("test", $con);
$query = 'INSERT INTO item (`name`) VALUES ("DELTaaaA")';
$res = mysql_query($query, $con) or die(mysql_error());
echo "<pre>";
print_r($res);
$query = 'UPDATE item set name="DELTaaaA1" WHERE id = LAST_INSERT_ID()';
$res = mysql_query($query, $con) or die(mysql_error());
print_r($res);
?> 
```

它应该返回 1 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:10:08.197

在此之前使用这样的代码 `SELECT LAST_INSERT_ID()`并将其分配给一个变量，然后在您的代码中使用该变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:16:15.790

我不知道正常的语法，但是 PDO 语法很简单，你可以通过函数将最后插入的 id`PDO::lastInsertId()`用作`$myPDOobject->lastInsertId()`. 更多信息在这里： http: [//php.net/manual/en/pdo.lastinsertid.php](http://php.net/manual/en/pdo.lastinsertid.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:31:37.893

`LAST_INSERT_ID`给你*最近* `insert`的 id 。

假设您添加了一行，其中包含`d_id=10`( `d_id`set by `auto increment`)，`d_sid=20`然后添加了另一行，包含`d_id=11`(again, `auto increment`) 和`d_sid=30`。

然后，您想要查找最近的插入 with `d_sid=20`，但这样做`LAST_INSERT_ID`是不可能的，因为`LAST_INSERT_ID`has value `11`，并且没有与`d_id`and匹配的行`d_sid=20`。您必须自己跟踪`d_id`每个类别的最新信息，最有可能在您插入新行时。

*   做`INSERT`
*   `SELECT``LAST_INSERT_ID`（给它命名`L_ID`）
*   将元组存储在`<d_sid, L_ID>`某个地方，这样你就知道对于`d_sid`你最近`INSERT`的有价值`L_ID`
*   `UPDATE`你的表`d_sid`是你想要的，`d_id`取自元组

作为旁注，`mysql_*`已弃用，因此您应该切换到其他内容，例如`mysqli`or `PDO`。

# extjs - ExtJS typeof 元素

> ID：14192757
> 
> 赞同：0
> 
> 时间：2013-01-07T09:05:21.440
> 
> 标签：extjs, extjs3, typeof

我想在一个循环中迭代很多元素，例如我想从那个循环中获取所有网格。如何检测元素是否为网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:06:01.117

在这种情况下，[getXType()](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Component-method-getXType)和[isXType()](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Component-method-isXType) 方法`Ext.Component`很有用。

# javascript - 浏览器挂起/挂起检测

> ID：14192758
> 
> 赞同：4
> 
> 时间：2013-01-07T09:05:22.317
> 
> 标签：javascript, jquery, html

有什么方法可以检测到浏览器被挂起/冻结/挂起（例如：通过操作系统锁定屏幕）？

我对 ajax 计时器机制有疑问。单击按钮向启动时钟的控制器发送 ajax 请求。在浏览器打开的同时，另一个脚本（通过“setInterval”）使时钟运行。再次单击该按钮时，ajax 请求将停止计时器并终止 setInterval。

但是，我需要检测到浏览器被冻结（javascript 停止），如果是这样，请发出 ajax 请求来更新计时器。

我想知道javascript和现代浏览器是否真的可以做到。是吗？

编辑：我认为我第一次没有很好地解释它。无限循环是必须的。这些元素是计时器（秒表）。而且我不想检测脚本是否由于 js 错误或浏览器过载而冻结。

我想检测浏览器（js）是否由于操作系统锁定屏幕、操作系统睡眠或其他原因而停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:41:42.493

不保证跨浏览器兼容性或任何类型的标准合规性；这有点hackish并且取决于情况，真的。

```
(function() {
    // milliseconds
    var lastTime = (new Date).getTime()
    ,   acceptableDelta = 500
    ,   tick = 1000
    ,   hung = false;

    function hangman() {
        var now = (new Date).getTime();
        if(now - lastTime > (tick + acceptableDelta)) {
            hung = true;
        } else if(hung) {
            hung = false;
            console.warn('Possible browser hangup detected.');
        }
        lastTime = now;
    }

    setInterval(hangman, tick);
}()); 
```

这背后的概念是，如果浏览器能够为用户停止失控的脚本，但以某种方式保持页面的其余部分完好无损，则计时器将检测到这种差异并在控制台中警告用户。

在[这里 jsFiddle](http://jsfiddle.net/Cbxzv/)上的演示，公平警告，除非您确实想要开始无限​​循环，否则**请**不要单击按钮。

* * *

最后，您可能想重新考虑为什么要首先这样做，并在设计级别与任何可能导致浏览器挂断的来源作斗争。避免没有暂停、无限循环、处理器密集型操作等的繁重和连续工作负载。使用异步回调来分隔您的任务，并在您的代码中放置策略性延迟，以让浏览器和用户的计算机有一些喘息的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:25:22.513

不可能。唯一接近的就是监听窗口关闭并在代码中执行最后一点代码。

```
window.onbeforeunload = function(event) {
    //do something, ask if the user really wants to exit the page, cancel ajax or whatever it is you need to achieve.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:24:56.070

Ajax 请求是使用 javascript 代码完成的。如果任何 javascript 导致浏览器挂起/冻结，则意味着可能存在不允许移动到该特定 javascript 代码的错误。一旦冻结浏览器，浏览器就会尝试检测错误（不是脚本，因为脚本本身被冻结）。它在软件中（浏览器软件是 IE/FF/chrome）。

最好的方法是将您的javascript代码包装在

```
try
{
}
catch
{
} 
```

捕获错误。

# android - 如何在具有 Android>4.0 和硬件按钮的设备上设置操作溢出菜单中的文本样式？

> ID：14192761
> 
> 赞同：29
> 
> 时间：2013-01-07T09:05:39.333
> 
> 标签：android, drop-down-menu, menu, android-actionbar

我想为我的溢出菜单自定义背景和文本颜色。它适用于没有硬件菜单按钮的设备，但我无法为带有硬件菜单按钮的设备设置样式。看截图：

![Galaxy Nexus 截图](../Images/365d5363123e2bfa1e9fa8ca7ad5a5c1.png) ![来自 Galaxy S3 的屏幕截图](../Images/2c34af405179a36713a2b642fbc14b36.png)

我正在使用这些样式：

```
<style name="Theme.settleup" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="android:popupMenuStyle">@style/settleup_PopupMenu</item> 
    <item name="android:actionMenuTextColor">@android:color/white</item>
</style>
<style name="settleup_PopupMenu" parent="@style/Widget.Sherlock.ListPopupWindow">
    <item name="android:popupBackground">@drawable/menu_dropdown_panel_settleup</item>
</style> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-23T03:13:06.660

我已经调查了这个问题。并且似乎无法`textColor`使用 HW 菜单键更改 Android >= 4.0 设备的选项菜单。甚至更改主要、次要或三次颜色都不会影响文本颜色。
我现在想到的唯一“解决方案”是对 java 反射 API 的一些非常讨厌的使用。

但是，您可以将 Android >= 4.0 硬件密钥设备的底部选项菜单的背景与非硬件密钥下拉菜单的背景分开设置。

您已经有了非硬件键下拉菜单的样式。非硬件键下拉菜单由`android:popupMenuStyle`(and `popupMenuStyle`) 定义：

```
<style name="Theme.settleup" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="android:popupMenuStyle">@style/settleup_PopupMenu</item> 
</style> 
```

但是 Android >= 4.0 HW 键底部选项菜单的背景是用`android:panelBackground`主题中的项目定义的：

```
<style name="Theme.settleup" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="android:panelBackground">@drawable/mybackground</item>
</style> 
```

由于在 Android >= 4.0 HW 关键设备上更改底部选项菜单的文本颜色似乎是一个问题，我建议将此部分保留为默认样式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-08T16:29:47.860

一直在挖掘 AppCompat 主题，但无论我尝试什么 textColor 仍然是白色的。我现在所做的只是手动弹出工具栏菜单，如下所示：

```
@Override
public boolean onKeyUp(int keycode, KeyEvent e) {
   switch (keycode) {
       case KeyEvent.KEYCODE_MENU:
           if ( getSupportActionBar() != null ) {
               getSupportActionBar().openOptionsMenu();

               return true;
           }
   }

   return super.onKeyUp(keycode, e);
} 
```

在菜单打开时按下菜单按钮会神奇地关闭它。

谁需要丑陋的黑底对齐菜单呢？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-06T10:38:12.667

您可以按以下方式在溢出菜单项中应用样式和主题。OverFlow Menu 是 ListView 所以，我们可以根据 listview 应用主题。

在styles.xml中应用以下代码

```
<style name="AppTheme" parent="@android:style/Theme.Holo.Light">
    <item name="android:dropDownListViewStyle">@style/PopupMenuListView</item>
            <item name="android:actionBarWidgetTheme">@style/PopupMenuTextView</item>
            <item name="android:popupMenuStyle">@style/PopupMenu</item>
            <item name="android:listPreferredItemHeightSmall">40dp</item>
    </style>

    <!-- Change Overflow Menu ListView Divider Property -->
        <style name="PopupMenuListView" parent="@android:style/Widget.Holo.ListView.DropDown">
            <item name="android:divider">@color/app_navigation_divider</item>
            <item name="android:dividerHeight">1sp</item>
            <item name="android:listSelector">@drawable/list_selector</item>
        </style>

        <!-- Change Overflow Menu ListView Text Size and Text Size -->
        <style name="PopupMenuTextView" parent="@android:style/Widget.Holo.Light.TextView">
            <item name="android:textColor">@color/app_white</item>
            <item name="android:textStyle">normal</item>
            <item name="android:textSize">18sp</item>
            <item name="android:drawablePadding">25dp</item>
            <item name="android:drawableRight">@drawable/navigation_arrow_selector</item>
        </style>

        <!-- Change Overflow Menu Background -->
        <style name="PopupMenu" parent="android:Widget.Holo.Light.ListPopupWindow">
            <item name="android:popupBackground">@drawable/menu_overflow_bg</item>
        </style> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-31T15:37:59.593

对于**AppCompat**主题：

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="actionBarPopupTheme">@style/HardwareOptionMenu</item>
</style>

<style name="HardwareOptionMenu" parent="ThemeOverlay.AppCompat.Dark">
    <item name="android:textColorSecondary">@color/white</item>
    <item name="android:colorBackground">@color/black</item>
</style> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T12:09:21.067

如果您真的必须从右图更改菜单的文本颜色，您可以做的可能是以下“hack”：

```
SpannableStringBuilder text = new SpannableStringBuilder();
        text.append("MenuItem1");
        text.setSpan(new ForegroundColorSpan(Color.WHITE), 0, text.length(),
                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        menu.add(Menu.NONE, MENU_ITEM_1, Menu.NONE, null).setTitle(text); 
```

我同意这不是最干净的方式（我会说这很丑陋，因为您必须在每个拥有此类菜单的活动中注意，并且需要使用此逻辑更改每个菜单项的标题），但它可以显示预期结果。让我知道它是否对您有帮助。

干杯!

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T09:26:39.640

也尝试添加没有**android**前缀的项目

```
<style name="Theme.settleup" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="android:popupMenuStyle">@style/settleup_PopupMenu</item>
    <item name="popupMenuStyle">@style/settleup_PopupMenu</item> 
    <item name="android:actionMenuTextColor">@android:color/white</item>
    <item name="actionMenuTextColor">@android:color/white</item>
</style>
<style name="settleup_PopupMenu" parent="@style/Widget.Sherlock.ListPopupWindow">
    <item name="android:popupBackground">@drawable/menu_dropdown_panel_settleup</item>
    <item name="popupBackground">@drawable/menu_dropdown_panel_settleup</item>
</style> 
```

# charts - Vaadin Invient 图表插件未加载

> ID：14192764
> 
> 赞同：0
> 
> 时间：2013-01-07T09:05:50.803
> 
> 标签：charts, vaadin

我喜欢 Vaadin 中 Invient Charts Addon 的工作方式，我按照描述配置了所有内容。但我有一个问题。一个奇怪的！当我加载图表时，标签和工具提示可见，但图表系列不可见。但是当我打开萤火虫并关闭它时，图表加载正常。此外，如果我按“alt 按钮”，图表加载正常。如果我再次刷新它就消失了。任何想法任何人？请帮我

**已解决以前使用' page.append** '导入js文件。使用“page.write”解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:57:42.457

以前使用'page.append'来导入js文件。使用'page.write'解决了这个问题

# extjs - 在 extjs 中如何获取选定的单选按钮的实际值？

> ID：14192765
> 
> 赞同：0
> 
> 时间：2013-01-07T09:06:00.397
> 
> 标签：extjs, radio-button

我在 extjs 工作。我正在显示 10 个问题及其相关选项。单击提交按钮时，我想检索选定的单选按钮值。我的视图形式为= QbqnsView.js

```
 Ext.define('Balaee.view.qb.qbqns.QbqnsView',
           {
        extend:'Ext.view.View',
        id:'qbqnsViewId',
        alias:'widget.QbqnsView',
        //store:'kp.PollStore',
        store:'qb.QbqnsStore',
        config:
        {
            tpl:'<tpl for=".">'+
                '<div id="main">'+
                '</br>'+
            //  '<b>Question :-</b> {pollQuestion}</br>'+
                '<b>Question :-</b> {question}</br>'+

                '<tpl for="options">'+     // interrogate the kids property within the data
                //'<p>&nbsp&nbsp<input type="radio" name="{optionId}">&nbsp{option}</p>'+
                 '<p>&nbsp&nbsp<input type="radio" name="{parent.questionId}">&nbsp{option}</p>'+
                //'<p>&nbsp&nbsp<input type="radio" name="{questionId}">&nbsp{option}</p>'+
                '</tpl></p>'+
                '<p>---------------------------------------------------------</p>'+
                '</div>'+
                '</tpl>',
            itemSelector:'div.main',    
        } 
```

Qbqns.js=

```
 Ext.define('Balaee.view.qb.qbqns.Qbqns',   
        {
    extend:'Ext.form.Panel',
    requires:[
              'Balaee.view.qb.qbqns.QbqnsView'
              ],
              id:'qbqnsId',
              alias:'widget.Qbqns',
              title:'Qbqns',
              //height:400,
              items:[
                     {
                         xtype:'QbqnsView',
                                             },
                     ],//end of items square
                     buttons:[
                              {
                                  xtype:'button',
                                  fieldLabel:'Vote',
                                  name:'vote',
                                  formBind:true,
                                  text:'submit',
                                  // action:'voteAction',
                                  listeners: { 
                                      click: function(btn,e,eOpts) {
                                     var answers =               

    Ext.core.DomQuery.select("input[type='radio']:checked");
   console.log(answers);                                         

            }
                                  }

                              }
                              ] 
```

所以点击提交按钮时，它给我的值是'输入，输入，......'。它没有给我实际的期权价值。那么如何检索所选选项的实际价值？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:19:42.257

尝试以下代码以获取选定的单选按钮 -

```
//put value of {parent.questionId} in getElementsByName()
var inputs = document.getElementsByName(""); 
var radio = "";  
for (var i = 0; i < inputs.length; i++) {
  if (inputs[i].checked) {
    radio  = inputs[i].name;
  }
} 
```

# sql-server - 左外连接在两个不同的 SQL Server 版本中有不同的结果

> ID：14192768
> 
> 赞同：0
> 
> 时间：2013-01-07T09:06:09.257
> 
> 标签：sql-server, sql-server-2000, outer-join

我有一个`Table1`用两个整数字段命名的表：

```
ID1  ID2
1    NULL
2    NULL
3    1 
```

我有一个名为的表的视图`ViewOfTable1`：

```
SELECT ID1, ID2, 'Ok' AS Flag
FROM Table1
WHERE ID2 IS NOT NULL 
```

我运行以下查询：

```
SELECT Table1.ID, ViewOfTable1.Flag
FROM Table1
LEFT OUTER JOIN ViewOfTable1 ON Table1.ID = ViewOfTable1.ID2 
```

我希望结果是：

```
ID    Flag
1     Ok
2     NULL
3     NULL 
```

这就是我在安装了 SQL Server Desktop Edition 的机器上得到的结果，但是当我在另一台装有 SQL Server 2000 Enterprise Edition SP4 的机器上运行此查询时，我得到：

```
ID    Flag
1     Ok
2     OK
3     OK 
```

可能是什么问题呢？

# javascript - OnClick 操作不会立即起作用，而仅适用于第一次加载。包括现场示例。

> ID：14192772
> 
> 赞同：1
> 
> 时间：2013-01-07T09:06:38.370
> 
> 标签：javascript

我为我的网站标题制作了一个隐藏/显示按钮，但我有这个“问题”。如果用户第一次加载我的网站，或者刷新后，这个按钮需要点击两次才能工作。但只是第一次。然后就可以正常使用了！知道为什么会这样吗？

下面评论中的实时示例。先感谢您！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:16:20.710

js代码是：

```
function display_news(){
var sheader_1 = document.getElementById("sheader_a");
var sheader_2 = document.getElementById("sheader_b");
if (sheader_1.style.display == 'block')
     sheader_1.style.display  = 'none', 
     sheader_2.style.display  = 'block';
else  sheader_1.style.display  = 'block', 
     sheader_2.style.display  = 'none';
     ;} 
```

如果您在第一次加载页面时提醒 sheader_1 的值，结果是一个空字符串，因此您的代码不会做任何事情（它将跳转到 else 语句）。

使其工作的一种方法是：

```
function display_news(){
var sheader_1 = document.getElementById("sheader_a");
var sheader_2 = document.getElementById("sheader_b");
//here we also check if display property is empty
if (sheader_1.style.display == 'block' || sheader_1.style.display == '') 
     sheader_1.style.display  = 'none', 
     sheader_2.style.display  = 'block';
else  sheader_1.style.display  = 'block', 
     sheader_2.style.display  = 'none';
     ;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:21:41.053

```
 function display_header(){
 var sheader_1 = document.getElementById("sheader_a");
 var sheader_2 = document.getElementById("sheader_b");

   if (sheader_1.style.display == 'block' || sheader_1.style.display=='')
      {
         sheader_1.style.display  = 'none';
           sheader_2.style.display  = 'block';
      }
   else  {
     sheader_1.style.display  = 'block'; 
     sheader_2.style.display  = 'none';
        }
     } 
```

[工作小提琴演示](http://jsfiddle.net/zbdN5/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:16:02.457

```
window.getComputedStyle(sheader_1).display 
```

您需要获取元素的计算样式。否则此条件`if (sheader_1.style.display == 'block')`将不起作用，因为显示将为空。

在 Internet Explorer 中，计算样式的方法是：`element.currentStyle`.

我建议在这种情况下使用 jQuery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T09:17:48.160

当页面加载时，sheader_1 的显示不是块，而是一个空字符串。

因此，您可以将您的条件更改为：

```
if (sheader_1.style.display != 'none') 
```

# android - 关于 cocos2d-x applicationWillEnterForeground

> ID：14192776
> 
> 赞同：0
> 
> 时间：2013-01-07T09:06:52.333
> 
> 标签：android, cocos2d-iphone, cocos2d-x

关于 cocos2d-x 的游戏。当我按下home键退出游戏时。下一次，我怎么才能让游戏必须重新开始，但没有跟上最后一个退出场景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:19:38.620

理想情况下，`applicationWillEnterForeground`您应该简单地用它的新实例替换场景以重新开始，例如，如果您正在运行的场景类被调用`GameLevelScene`，您应该简单地告诉`CCDirector`用它的类中的新实例替换正在运行的场景。例如：

```
CCDirector::sharedDirector()->replaceScene(GameLevelScene::create()); 
```

但是，当我在做类似的事情来暂停我的游戏从后台恢复时，我注意到它并没有很好地工作（它应该有，也许这是 cocos2d-x 的一些问题）。因此，作为一种变通方法，我在开始时创建了一个延迟时间为零的序列，然后调用了我的游戏的暂停函数。我猜游戏从后台恢复后需要花一个时间来处理这个问题。对您来说，如果上述方法不起作用，请尝试以下操作：

```
someNode->runAction(
    CCSequence::create(CCDelayTime::create(0.0f),
        CCCallFuncO::create(CCDirector::sharedDirector(),
                            callfuncO_selector(CCDirector::replaceScene),
                            GameLevelScene::create()),
        NULL)); 
```

`someNode`可以是游戏中任何存在于游戏中的节点，**即**它尚未被破坏；它必须是一个活着的对象。您可以拥有一个在游戏期间始终处于活动状态的游戏管理器节点。游戏管理器节点可以负责此类游戏管理问题。

# java - 如何实现异步处理

> ID：14192777
> 
> 赞同：1
> 
> 时间：2013-01-07T09:06:51.457
> 
> 标签：java, multithreading, asynchronous, parallel-processing, polling

我想在我的 Java 程序中传递一条异步消息，所以第一步它应该持续监控数据库中某些表的变化。当有新的传入消息时，它应该显示它。只要应用程序正在运行，这应该是重复的过程。

我可以知道如何为以下代码进行此操作，其中包含轮询方法，该方法必须每 6 秒无限地调用自身，并且还应该在数据库中找到新的传入消息。

这是代码片段：

```
public class PollingSynchronizer implements Runnable {

private Collection<KPIMessage> incomingMessages;
private Connection dbConnection;

/**
 * Constructor. Requires to provide a reference to the KA message queue
 * 
 * @param incomingMessages reference to message queue
 * 
 */
   public PollingSynchronizer(Collection<KpiMessage> incomingMessages, Connection dbConnection) {
    super();
    this.incomingMessages = incomingMessages;
    this.dbConnection = dbConnection;
}

private int sequenceId;

public int getSequenceId() {
    return sequenceId;
}

public void setSequenceId(int sequenceId) {
    this.sequenceId = sequenceId;
}

@Override
/**
 * The method which runs Polling action and record the time at which it is done
 * 
 */
public void run() {
    try {

           incomingMessages.addAll(fullPoll());
            System.out.println("waiting 6 seconds");

            //perform this operation in a loop
            Thread.sleep(6000);

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    Date currentDate = new Date();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSS");
//  System.out.println(sdf.format(currentDate) + " " + msg);
}

/**
 * Method which defines polling of the database and also count the number of Queries
 * @return 
 * @throws Exception
 */
public List<KpiMessage> fullPoll() throws Exception {

//  int sequenceID = 0;
    Statement st = dbConnection.createStatement();

    ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION = 804 order by SEQ DESC");
        List<KpiMessage> pojoCol = new ArrayList<KpiMessage>();
        while (rs.next()) {
            KpiMessage filedClass = convertRecordsetToPojo(rs);
            pojoCol.add(filedClass);
        }

        return pojoCol;
        }

/**
 * Converts a provided record-set to a {@link KpiMessage}.
 * 
 * The following attributes are copied from record-set to pojo:
 * 
 * <ul>
 * <li>SEQ</li>
 * <li>TABLENAME</li>
 * <li>ENTRYTIME</li>
 * <li>STATUS</li>
 * </ul>
 * 
 * @param rs
 *            the recordset to convert
 * @return the converted pojo class object
 * @throws SQLException
 *             if an sql error occurrs during processing of recordset
 */
private KpiMessage convertRecordsetToPojo(ResultSet rs) throws SQLException {

    KpiMessage msg = new KpiMessage();
    int sequence = rs.getInt("SEQ");
    msg.setSequence(sequence);
    int action = rs.getInt("ACTION");
    msg.setAction(action);
    String tablename = rs.getString("TABLENAME");
    msg.setTableName(tablename);
    Timestamp entrytime = rs.getTimestamp("ENTRYTIME");
    Date entryTime = new Date(entrytime.getTime());
    msg.setEntryTime(entryTime);
    Timestamp processingtime = rs.getTimestamp("PROCESSINGTIME");
    if (processingtime != null) {
        Date processingTime = new Date(processingtime.getTime());
        msg.setProcessingTime(processingTime);
    }
    String keyInfo1 = rs.getString("KEYINFO1");
    msg.setKeyInfo1(keyInfo1);
    String keyInfo2 = rs.getString("KEYINFO2");
    msg.setKeyInfo2(keyInfo2);
    return msg;
}
} 
```

这里的序列 id 是表中的唯一 id，它随着新的传入消息的到达而不断增加。

*PS：“恳请：请给出给出负分的理由（大拇指向下）。这样我就可以清楚地解释我的问题”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:35:25.070

简单地把它放在一个 while(true) 循环中。

```
public void run() {
    while(true){
        try {

               incomingMessages.addAll(fullPoll());
                System.out.println("waiting 6 seconds");

                //perform this operation in a loop
                Thread.sleep(6000);

        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        Date currentDate = new Date();
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSS");
    //  System.out.println(sdf.format(currentDate) + " " + msg);
   }
} 
```

希望您已经将 Runnable 作为新线程启动。

对于新的和更新的消息，您需要一个字段，例如数据库中的“last_update”。每当您检查新消息时，您都需要更改 SQL 语句以获取新消息，例如：“ `where last_update > $lastCheckedDate`”，设置位置。`lastCheckedDate`

也许您还想阅读有关 Java 并发的内容：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:44:15.473

放入while循环是一种方法，但我认为最好避免采用这种方法（有很多事情要搞砸，比如事务等）。

如果你真的需要做这种重复的事情，可以考虑使用调度器。Spring 3.x 确实内置了调度程序，或者您也可以使用 Quartz。

更好的方法是避免这样的轮询。是否可以在数据更新时将消息放入 JMS 队列中，以便一旦 JMS 队列中有此类消息时将调用您的逻辑（通过消息驱动 bean）？（只是一种可能的方法，有很多类似的方法可以做）

# sencha-touch-2 - Sencha Touch 2 中的切换域

> ID：14192779
> 
> 赞同：0
> 
> 时间：2013-01-07T09:07:24.623
> 
> 标签：sencha-touch-2

我在 sencha 中有一个切换字段，如下所示

```
{
    xtype: 'togglefield',
    name: 'pushnotifications',
    id: 'pushnotifications',                                   
    label: 'Enable Push Notifications?',
    labelWidth: '40%',
    height: '100%',
    listeners: {                           
        change: function(field, thumb, enabled) {
            alert('sss');
        } 
    }                          
} 
```

问题是事件“更改”仅在拖动切换按钮时有效，而在单击更改时无效。即使单击，我如何才能让侦听器工作？还有其他我错过的事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:02:18.917

这可能与该`id`领域有关。如果视图没有正确销毁，并且最终在 DOM 中有多个相同 ID，那么事件连接可能会变得不稳定。

如果您`id`在控制器中使用了 ref ，请尝试使用 the `xtype`。

# c# - DB2 连接字符串错误

> ID：14192780
> 
> 赞同：0
> 
> 时间：2013-01-07T09:07:30.520
> 
> 标签：c#, asp.net, db2, database-connection, db2-connect

aspx 页面上的一个按钮检查与 DB2 数据库服务器的连接是否已建立。我的连接字符串是：

```
Server=xx.xx.xx.xx:446; Database=dd_unit; UID=db2admin; PWD=Secure*888; CurrentSchema=ptdd; 
```

它向我抛出了一条**SQL30081N 错误消息：**

> *   $exception {"ERROR [08001] [IBM] SQL30081N 检测到通信错误。正在使用的通信协议：\"TCP/IP\"。正在使用的通信 API：\"SOCKETS\"。检测到错误的位置： \"xx.xx.xx.xx\"。检测错误的通信函数：\"connect\"。协议特定的错误代码：\"10060\"、\" *\"、\"* \"。SQLSTATE= 08001\r\n"} System.Exception {IBM.Data.DB2.DB2Exception}

我查找了 SQL30081N 错误，这是由于*tcp-ip 层的网络终止了连接。*现在，**问题出在连接字符串上还是其他问题？请帮我解决这个问题。**

代码：（打开连接后抛出错误）

```
protected void Button3_Click(object sender, EventArgs e)
    {
        DB2Connection con = new DB2Connection("Server=xx.xx.xx.xx:446; Database=MyDb; UID=MyUser; PWD=MyPass; CurrentSchema=ptdd;");
        try
        {
            con.Open();
            Label1.Visible = true;
            Label1.Text = "Conection done";
            con.Close();
        }
        catch (Exception)
        {
            Label1.Text = "connection failed";
        } 
```

*PS我正在使用它来测试我的应用程序*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:50:26.693

指定的端口不正确。它必须是**50000**，因为它是一个 tcp/ip 连接

# google-app-engine - 在 App Engine 1.7.4 和 GWT 2.5.0 项目和 Eclipse Juno 4.2 中创建 UiBinder 时，Eclipse 上的设计选项卡无法呈现面板

> ID：14192781
> 
> 赞同：1
> 
> 时间：2013-01-07T09:07:39.443
> 
> 标签：google-app-engine, gwt, gwt-designer, google-eclipse-plugin

我在 Eclipse Juno 4.2 中为针对 App Engine 1.7.4 和 GWT 2.5.0 创建的项目创建了一个简单的 UiBinder，代码如下所示 -

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
  xmlns:g='urn:import:com.google.gwt.user.client.ui'>

  <ui:image field='logo' src='Resources/logo_small.png' />

  <ui:style>
  @sprite .logo_small {
    margin: 15px 0 0 10px;
    gwt-image: 'logo';
    position: absolute;
  }
    .headerContainer {
      padding: 0 11px;
    }
    .welcomeDiv {
      float: right;
      margin-top: 5px;
    }
    .tagLine {
      margin-left: 180px;
      padding-top: 22px;
      font-size: 1.8em;
      font-weight: bold;
    }
  </ui:style>

  <g:HTMLPanel>
    <div class='{style.headerContainer}'>
      <div class='{style.logo_small}' />
      <div>
        <div class="{style.welcomeDiv}">
          <b>Welcome back, foo@bar.com</b>
          -
          <g:Anchor href='javascript:;' ui:field='signOutLink'>Log Out</g:Anchor>
        </div>
        <div class='{style.tagLine}'>Your feeds are belong to us</div>
      </div>
    </div>
  </g:HTMLPanel>
</ui:UiBinder> 
```

但是 Eclipse 上的设计选项卡无法呈现面板并失败并显示以下错误消息 -

```
was not able to show the GUI. 

Internal Error 

This could be caused by a bug or by a misconfiguration issue, conflict, partial update, etc.

java.lang.NoClassDefFoundError: org/eclipse/wb/internal/core/utils/reflect/ProjectClassLoader 
```

# html - 氮气中音视频标签的使用

> ID：14192786
> 
> 赞同：0
> 
> 时间：2013-01-07T09:07:50.877
> 
> 标签：html, erlang, html5-audio, nitrogen

仍在我的个人网络服务器上工作，我试图在 Nitrogen 中使用 html5 音频和视频标签。

由于没有#audio和#video记录，我决定直接在氮气生成的页面中插入html文本，结果如​​下：

```
<audio controls preload="metadata"><source src="../../My Music/subdir/song.ogg" type="audio/ogg"  /source>audio tags not supported</audio> 
```

据我了解，这应该有效，因为音频标签应该由客户端浏览器直接解释，并且代码中没有任何氮 ID 或事件观察者。

但是当我从 Firefox 浏览这段代码时，我会短暂地看到控件打开，然后音频元素就消失了。

如果我复制粘贴由氮气生成的整个代码（显示html源页面，复制并粘贴到位于氮气项目来源的文件中）并使用浏览器打开它，它工作正常。相对路径是正确的，假设氮项目中的搜索统计。我也尝试过绝对路径，但没有成功。

我不知道

*   如果它构建了一个格式为“.._.._My music_subdir_song.ogg”的文件名，就像氮为 url 分析所做的那样，
*   或者如果它使用另一个目录来启动路径，
*   或者如果它根本不像我想的那样工作。
*   ...

**编辑：一些补充信息：**

我做了以下更改：

在 site/static 目录中创建一个包含一些 ogg 文件的目录 + 在 site/static 中移动一个静态 test.html 文件。如果我直接打开 test.html -> ok。如果我从我的网站重定向-> 不行。

使用 Nitrogen 应用程序根目录的副本进行相同的测试，并从我的网站访问 -> 不行

由于网页上的信息不明确，我修改了 test.html 以访问我的 PC 上不存在的文件 -> 相同的行为。

我想我将使用调试器来了解如何管理请求，待续......

**编辑2：**

使用调试器，我可以验证 wf_core:run_catched() 是否被多次调用。第一次调用是在它处理我的页面中重定向到静态文件的事件时。

第二次处理静态html文件本身。

第三次处理路径等于 my_music/song.ogg 的 finish_static_request()，然后我在处理答案时迷失了方向。另一个 wf_core:run_catched() 被并行调用了，但我没有遵循它......

我已经能够验证该文件是否可以访问：我在 html 文件中添加了几个音频标签，并且我能够使用 DownloadHelper Firefox 插件“下载”现有文件。

我现在的理解是路径是正确的（至少当我将文件放在 site/static 的子目录中时），服务器能够检索文件并发送它们，浏览器识别音频和视频标签，但链接嵌入式音频/视频阅读器和文件之间的文件丢失了，尽管我在音频标签内添加了一个类型定义。

有继续的想法吗？

**编辑3：**

最后我得到了它。正如 Chops 建议的那样，我必须进入 inets 服务器配置，而不是定义路径，而是定义类型关联。我在 etc/inets_httpd.erlenv 中添加了以下定义，它可以工作。

```
{mime_types, [
    {"css", "text/css"}, 
    ...
    {"ogg","audio/ogg"},
    {"webm","video/webm"}
]} 
```

:o)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:23:31.633

根据`url`属性的内容（“../../My Music/subdir/song.ogg”），当它从 Nitrogen 提供时，问题是请求（假设您使用默认的 127.0.0.1： 8000) 的音频将发送到 URL “http://127.0.0.1:8000/My Music/subdir/song.ogg”

如果您使用标准的 Nitrogen 安装，您想要做的是将您想要的歌曲文件放入`site/static`目录中，也许在“songs”子目录中。

然后将`url`属性更改为“/songs/mysong.ogg”（或`site/static`您使用的任何路径）。

**注意：**根据您的服务器选择（例如 Webmachine），您可能需要修改服务器的特定配置文件以告诉它处理静态路径的新目录，如需帮助，请查看Nitrogen 站点上的[配置文档。](http://nitrogenproject.com/doc/config.html)

除此之外，在 Nitrogen 中输出原始 HTML 并没有什么特别之处。据我了解，这里的问题实际上仅与发送到服务器的请求的路径有关。

# java - 在 Java EE 中限制对特定方法的多次访问的过程

> ID：14192792
> 
> 赞同：1
> 
> 时间：2013-01-07T09:08:11.380
> 
> 标签：java, multithreading, jakarta-ee, synchronization, resultset

我想知道在 JAVA 中限制对特定方法的多次访问的过程。如果许多机器并行调用相同的方法（这将返回一个结果集），我希望第二个方法调用等到第一个方法调用完全完成其过程。java中是否有任何功能可以实现此功能。

我正在开发一个 Java EE 应用程序，它将从 DB 打开一个 excel 文件，它使用用户值处理其中的变量，它会更新 DB 中的 tat 报告并将更新的副本下载给用户。

这里当多人同时打开文件和进程处理数据时会导致错误。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:29:18.533

如果您想限制不同 JVM 中的调用者，则using`synchronized`将不起作用，因为没有它们都可以使用的单一锁。每个调用者都在使用它自己的应用程序实例的本地锁。所以Java没有办法为你做这件事。

每个人都共享的是数据库中的行，这就是您应该锁定的内容。假设您的 Excel 文件位于数据库中的一个 blob 中，并且假设您对 excel 文件所做的一切都可以在一个事务中完成，那么您可以使用数据库事务和排他锁定来限制对数据的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:12:30.400

[有关同步方法](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)的说明，请参见此处。这将阻止除一个之外的所有呼叫者，并让他们按顺序进入。

# git - 为什么 git 不上传最后一次提交？

> ID：14192795
> 
> 赞同：2
> 
> 时间：2013-01-07T09:08:19.627
> 
> 标签：git

我是 git 新手，不知何故破坏了一些东西。这一切都始于冲突，然后我解决了它，再次添加文件并推送。据我了解，这应该没问题。后来，当我制作新的克隆时，我很长一段时间都在下载该项目的损坏版本。当我试图拉取存储库时，我收到一条消息说`Already up-to-date.`。所以经过一番思考，我做了一个小改动，再次承诺并推动。为了测试这一点，我再次在另一个目录中做了一个新的克隆，然后突然得到了工作版本，没有最后的小改动。就像推送是最后一次提交之后的一个版本。我检查了`HEAD`文件：`$ cat .git/HEAD`输出`ref: refs/heads/master`对我来说似乎没问题。我真的不知道去哪里看。

有朋友问我有没有推过`--force`，我没有。（而且我不知道那会做什么）。

我也尝试将新的克隆下载到新目录中，然后简单地在那里继续我的工作，但仍然存在相同的效果，推送是一个提交。

当我在 bitbucket 中查看提交时，我得到了类似的东西（M-me，F-friend 如何与我一起在项目上工作）

```
 F--F--F---
       /          \
 ...--M---------M--M--M 
```

* * *

# 编辑

以下是请求的输出：

```
$ git pull
Password: 
Already up-to-date.
$ git branch -a -v
* master                9247247 [ahead 1] Martin test commit 1\. (with -a flag)
  remotes/origin/HEAD   -> origin/master
  remotes/origin/master ddb4cbf Another try
$ git log --graph --format=%h
* 9247247
* ddb4cbf
* 9ec3835
* 2c5fd4c
*   e5dd998
|\  
| * 20bc5e1    (* This is the conflict I mentioned *)
| * 04a45a5
| * 7c57c81
* | 1d91307
|/  
* 223948e
* f43648d
*   a5ec578
|\  
| * 4e77b8b    (* This is a test conflict we made, to see how it works *)
* | 20fa9af
|/  
* ffe048d
* 90ea6fc
* 0e529f9
* 1622945
* 2207b8a 
```

这导致我运行`git log`并且`git show`都显示最后一次提交是`Martin test commit 1.`但是我稍后在我写的地方做了一个提交`Martin test commit 2.`

* * *

# 编辑 2

另一件连线的事情：有一个修改过的文件，但是`no changes added to commit`. 什么？为什么？（`git ls-files`显示 index.html 文件 - 这意味着它是上演的吗？）

```
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   index.html
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

可能的原因：`remotes/origin/HEAD -> origin/master`但是`remotes/origin/master ddb4cbf Another try`。我怎样才能让他们指向同一个提交？

* * *

# 编辑 3

```
$ git push origin master
Password: 
Everything up-to-date
$ git remote -v
origin  https://martin@bitbucket.org/O....s.git (fetch)
origin  https://martin@bitbucket.org/O....s.git (push) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:14:50.783

您的输出显示您尚未推送最新的提交，`Martin test commit 1`. 尝试一个`git push`.

`Martin test commit 2`从未提交，或提交给您的回购的其他副本但从未推送。该变更集也可能仍在您的本地目录中，请尝试`git status`查看尚未提交的内容。

## 编辑：

On `no changes added to commit`：您的本地更改需要在提交之前暂存，您需要在做`git add index.html`之前做`git commit`。您也可以使用提交所有未暂存的更改`git commit -a`

On `git ls-files`：这显示索引中的文件和工作树中的文件。要查看提交提交的内容和未提交的内容，请使用`git status`.

On remotes:`remotes/origin/HEAD/`只是指向最新提交的指针`remotes/origin/master`，因此它们已经指向同一个提交。

关于`Everything up-to-date`on `git push`，不是。请添加 的输出`git remote -v`。可能是你的遥控器不可靠。也试试`git push origin master`。

# java - 获取能够打开文件的编辑器列表

> ID：14192798
> 
> 赞同：2
> 
> 时间：2013-01-07T09:08:43.997
> 
> 标签：java

我遇到以下问题：

我写了一个应用程序，用户可以在其中打开一些特定的文件。用户应该能够选择编辑器，他想用它打开文件。

目前我正在使用这段代码：

```
public void open(String path) {
    try {
        if(new File(path).exists())
            Runtime.getRuntime().exec("notepad.exe " + path);

    } catch (IOException e) {

    }
} 
```

例如，如果我将编辑器更改`ultraedit.exe`为，运行时将无法打开它。

所以现在我的问题是，有什么方法可以实现类似于`open with`windows 正在使用的功能，并为特定类型的文件返回所有可能的编辑器？文件的扩展名将始终为`.ini`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:16:00.803

据我所知，`Runtime.exec()`无法打开，因为您的环境指向的`ultraedit.exe`位置可能找不到 ultraedit.exe 。`PATH`

您需要检测 ultraedit.exe 所在的位置，然后使用完全限定的路径打开它。这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:19:11.530

一种方法（假设：不是跨平台的，仅适用于 Windows）是使用`assoc`和`ftype`命令`cmd.exe`来列出与特定文件类型关联的应用程序，另请参阅[在 Java 应用程序中使用文件关联](https://stackoverflow.com/questions/2043029/utilising-a-file-association-in-a-java-application)。

It is a two step process: first, get the file type (`inifile`) from the extension (`.ini`) through `assoc`, then lookup the executables associated to the file type through `ftype`:

```
C:> cmd.exe /c assoc .ini
.ini=inifile

C:> cmd.exe /c ftype inifile
inifile=%SystemRoot%\system32\NOTEPAD.EXE %1 
```

You can launch these commands through `Runtime.getRuntime().exec()` and catch the output stream to get the associated program.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:18:49.847

至少在 XP 上（我目前无法检查 Win 7）安装应用程序的路径可以在注册表中找到，在

```
\\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\<program name> 
```

对于更简单（且可移植）的解决方案，我将添加一个配置文件，列出编辑器和可执行文件的完整路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:33:19.070

If available, you could try [Desktop#open](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)

> Launches the associated application to open the file. If the specified file is a directory, the file manager of the current platform is launched to open it.

# android - imageview DrawingCache 返回 null

> ID：14192799
> 
> 赞同：1
> 
> 时间：2013-01-07T09:08:45.500
> 
> 标签：android, android-imageview, android-view

我正在使用 DrawingCache 但它给了我 NullPointerException

我的代码如下：

```
 myImageView.setDrawingCacheEnabled(true);

    myImageView.buildDrawingCache();
    resized = myImageView.getDrawingCache();        
    btnSave.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            String save_location = Environment
                    .getExternalStorageDirectory().getAbsolutePath()
                    + "/EditedImage";
            File dir = new File(save_location);
            if (!dir.exists())
                dir.mkdirs();
            File f = new File(dir, TEMP_PHOTO_FILE);
            FileOutputStream out;
            try {
                out = new FileOutputStream(f);
                resized.compress(Bitmap.CompressFormat.PNG, 90, out);

                out.flush();
                out.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }); 
```

错误出现在 onClick 上。

我的 logcat 是 ![在此处输入图像描述](../Images/bc7dfb20d02770797ed8486ea93e3dca.png) 什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:20:39.837

**试试这个例子：**

```
myImageView.setDrawingCacheEnabled(true);

myImageView.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
myImageView.layout(0, 0, v.getMeasuredWidth(), myImageView.getMeasuredHeight()); 

myImageView.buildDrawingCache(true);

Bitmap b = Bitmap.createBitmap(myImageView.getDrawingCache());
myImageView.setDrawingCacheEnabled(false); // clear drawing cache 
```

更新：

另一种方式，您可以为位图创建一个画布，然后调用 view.draw(canvas) ，如：

```
 public static Bitmap loadBitmapFromView(View v) {
         Bitmap b = Bitmap.createBitmap( v.getLayoutParams().width, v.getLayoutParams().height,              Bitmap.Config.ARGB_8888);                

         Canvas c = new Canvas(b);
         v.layout(0, 0, v.getLayoutParams().width, v.getLayoutParams().height);
         v.draw(c);
         return b;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:43:06.683

每个视图在绘制到屏幕上之前都会经过一些过程，例如测量和布局。因此，当您在 Activity.onCreate() 中调用 getDrawingCache() 时，尚未绘制视图。

将以下两行放入您的 onclick 方法中。

```
myImageView.buildDrawingCache();
resized = myImageView.getDrawingCache(); 
```

# ftp - 修改 AWS EC2 Windows 防火墙设置

> ID：14192800
> 
> 赞同：0
> 
> 时间：2013-01-07T09:08:48.137
> 
> 标签：ftp, amazon-web-services, amazon-ec2, ftp-client, windows-firewall

我正在尝试在 Windows AWS EC2 实例上执行 FTP 脚本以下载文件，但由于防火墙设置，入站连接被阻止。任何人都可以建议什么应该是允许入站连接的适当防火墙配置。

我害怕玩弄这些设置，因为我曾经单击重置防火墙设置并且我失去了该实例的远程登录访问权限，我不得不终止它并创建一个新的。

谢谢你。

```
@echo off
echo user  username > ftpcmd.dat
echo password >> ftpcmd.dat
echo binary >>ftpcmd.dat
echo cd /Outbound/Archive >>ftpcmd.dat
echo prompt n >>ftpcmd.dat
echo get DATA_FEED.xml C:\Users\user\Desktop\Test.xml >> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat ftp.server.com
del ftpcmd.dat 
```

![下面是 Ec2 防火墙设置的屏幕截图](../Images/2e6dafa5750dfcdd2021ab920772ef36.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:44:46.857

AWS 文档有 -

文件传输协议 (FTP) 有一个 PORT 命令，客户端通过该命令将其地址发送回服务器。然后服务器连接到该地址的客户端以发送文件数据。如果客户端查找自己的内部地址并将其发送到服务器，则连接将失败。在这种特定情况下，该问题有两种解决方案。首先，配置客户端发送其公共 IP 地址。其次，客户端可以使用“被动 FTP”，它只连接到服务器，而不是从服务器到客户端。通常，在发送到外部服务器的数据中编码本地地址和端口号的应用程序可能会遇到 NAT 问题。必须始终注意发送公共地址，而不是内部地址。我们建议使用被动模式，除非 FTP 服务器不支持。

我没有尝试公开我的 AWS 实例的公共 IP，我们知道 FTP.EXE 不支持被动模式，所以我使用了 NcFTP 并且能够下载文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:26:58.930

**简单的解决方案：**

尝试添加

```
echo quote pasv >> ftpcmd.dat 
```

就在发送之前`binary`。

**解释：**

`PASV`将连接设置为[被动模式](https://www.rfc-editor.org/rfc/rfc2428)，不需要来自服务器的任何传入连接。这就像一个简单的客户端-服务器连接。

在主动模式下，客户端连接到服务器（在您的情况下，登录成功），然后告诉服务器它自己的 IP 地址和一个随机端口，通常高于 1023。然后服务器连接到您的客户端以传输数据。这失败了，因为您位于防火墙后面。

# asp.net - 有没有办法判断一个站点是基于 C# 还是 VB？

> ID：14192803
> 
> 赞同：1
> 
> 时间：2013-01-07T09:09:01.600
> 
> 标签：asp.net

我正在为一个客户准备一个完整的信息，并且像往常一样，他们对他们的网站一无所知 - 他正在等待他（以前的）网络开发人员的详细信息。

同时，我无权访问网站代码。

有什么方法可以判断 .NET 站点是基于 VB 还是 C#，并且只能通过浏览器访问（实时）网站？

# caching - Nginx 默认服务器仅针对站点主页显示不正确

> ID：14192811
> 
> 赞同：1
> 
> 时间：2013-01-07T09:09:35.290
> 
> 标签：caching, proxy, nginx, centos, reverse-proxy

我有一个相当奇怪的问题，似乎是最近几天才开始的（最近几天没有进行任何更改）。我会尽力描述它，但如果我需要发布特定的配置等，请告诉我。

我在 CentOS 6.3 上运行的 2 个后端 nginx Web 服务器前面设置了一个 nginx 负载平衡器。到目前为止，该站点一直运行良好，但是最近在访问主页时，它一直向我显示我在网络服务器上创建为默认站点的页面（这是一个离散的通知，表明主机标头在网络服务器上未被识别）。当您访问子页面时，例如 domain.com/about-us 很好，但访问 domain.com 会显示默认站点。似乎可以通过禁用此特定站点的负载平衡器上的缓存来解决此问题。只要不使用缓存，主页就会正确显示。

负载平衡器上的缓存保存在映射到 /cache 的 RAM 驱动器中，总可用大小为 256Mb。缓存配置如下

```
proxy_cache_path /cache levels=1:2 keys_zone=app-cache:30m max_size=126m inactive=10m;
proxy_temp_path /cache/tmp;
proxy_buffer_size 8192;
proxy_max_temp_file_size 1m; 
```

昨晚我减少了缓存的总大小，因为我感觉它导致了我最近看到的另一个问题，即我们处于极端负载下，缓存填充到最大允许大小 256Mb，但是在挂载点上没有空间从上游缓冲文件并开始向客户端提供空文件的临时路径。

我查看了特定站点的错误日志，发现了许多实例

```
2013/01/03 05:47:24 [crit] 22889#0: *352983 pwrite() "/cache/tmp/0000028264" failed (28: No space left on device) while reading upstream, client: 121.58.173.7, server: www.domain.com, request: "GET /images/slider-plus.gif HTTP/1.1", upstream: "http://10.0.100.193:80/images/slider-plus.gif", host: "www.domain.com", referrer: "http://www.domain.com/example-page" 
```

df -h 显示 /cache 挂载目前仅使用 1% 的可用空间，所以我不确定为什么我仍然会收到此错误。

负载均衡器上的 nginx 版本是 1.0.11（从源代码构建） Web 服务器上的 nginx 版本是 1.0.15（从 epel 包安装）

我意识到nginx需要更新，我昨天才意识到这一点。如果这是问题所在，那么我可以提出更新它的计划，但是确认这个问题可能是什么以及如何解决它会很有用。

请随时请求帮助诊断这种情况所需的任何额外信息。

非常感谢

埃里克

编辑：我想我应该补充一点，当服务器负载很小时，网站不显示主页的问题确实会出现，负载均衡器大部分时间都是空闲的，流量不多。只有当服务器的负载比平时高得多时，才会显示空文件问题。

# php - php memory_get_peak_usage() 包括 mysql 内存使用情况？

> ID：14192814
> 
> 赞同：2
> 
> 时间：2013-01-07T09:09:42.740
> 
> 标签：php, mysql, memory-management

在 PHP 中有一个函数**memory_get_peak_usage**，它返回当前 php 进程使用的峰值内存。

我想知道它是否还包括由 php 进程触发的 mysql 查询消耗的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:15:04.197

> 我想知道它是否还包括由 php 进程触发的 mysql 查询消耗的内存？

如果您从这些查询中获取结果，并且 PHP 需要作为该获取的结果分配内存，那么是的，来自数据库查询的结果**将**包含在该内存使用图中。它*不*包括 MySQL 本身使用的内存，也不包括未获取的查询结果使用的内存。

*和*也是如此。[`memory_get_peak_usage`](http://php.net/memory_get_peak_usage) *[`memory_get_usage`](http://php.net/memory_get_usage)*

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T09:14:03.333

文档说没有。

[http://php.net/manual/en/function.memory-get-peak-usage.php](http://php.net/manual/en/function.memory-get-peak-usage.php)

此外，此函数包含该内存也没有意义。因为这个函数显示了脚本的峰值。另请查看对 imo 很有帮助的用户评论。

[http://php.net/manual/en/function.memory-get-peak-usage.php#98734](http://php.net/manual/en/function.memory-get-peak-usage.php#98734)*

# iphone - 创建自定义动画属性

> ID：14192816
> 
> 赞同：27
> 
> 时间：2013-01-07T09:09:51.263
> 
> 标签：iphone, ios, uiview, core-animation

`UIView`你可以改变背景颜色动画。在 a 上，`UISlideView`您可以更改动画值。

您可以将自定义属性添加到您自己的`UIView`子类中以使其可以动画化吗？

如果我有一个`CGPath`，`UIView`那么我可以通过更改路径绘制的百分比来动画它的绘制。

我可以将该动画封装到子类中吗？

即我有一个`UIView`创建`CGPath`一个圆圈的。

如果圆圈不存在，则表示 0%。如果圆圈已满，则表示 100%。我可以通过更改路径绘制的百分比来绘制任何值。我还可以通过动画百分比`CGPath`和重绘路径来动画变化（在 UIView 子类中）。

我可以设置一些属性（即百分比），`UIView`以便我可以将更改粘贴到一个`UIView animateWithDuration`块中并动画化路径百分比的更改吗？

我希望我已经解释了我想做的事情。

本质上，我想做的只是......

```
[UIView animateWithDuration:1.0
 animations:^{
     myCircleView.percentage = 0.7;
 }
 completion:nil]; 
```

并且圆形路径动画到给定的百分比。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-07T09:59:01.743

如果您扩展 CALayer 并实现您的自定义

```
- (void) drawInContext:(CGContextRef) context 
```

`needsDisplayForKey`您可以通过覆盖（在您的自定义 CALayer 类中）来制作动画属性，如下所示：

```
+ (BOOL) needsDisplayForKey:(NSString *) key {
    if ([key isEqualToString:@"percentage"]) {
        return YES;
    }
    return [super needsDisplayForKey:key];
} 
```

当然，您还需要有一个`@property`被调用的`percentage`. 从现在开始，您可以使用核心动画为百分比属性设置动画。我没有检查它是否也可以使用`[UIView animateWithDuration...]`调用。它可能会起作用。但这对我有用：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"percentage"];
animation.duration = 1.0;
animation.fromValue = [NSNumber numberWithDouble:0];
animation.toValue = [NSNumber numberWithDouble:100];

[myCustomLayer addAnimation:animation forKey:@"animatePercentage"]; 
```

哦，要使用`yourCustomLayer`with `myCircleView`，请执行以下操作：

```
[myCircleView.layer addSublayer:myCustomLayer]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-07-07T02:04:47.193

**完整的 Swift 3 示例：**

[![完成品](../Images/7450a794f99f215cf310b7d895e01b7b.png)](https://i.stack.imgur.com/rkmNb.gif)

```
public class CircularProgressView: UIView {

    public dynamic var progress: CGFloat = 0 {
        didSet {
            progressLayer.progress = progress
        }
    }

    fileprivate var progressLayer: CircularProgressLayer {
        return layer as! CircularProgressLayer
    }

    override public class var layerClass: AnyClass {
        return CircularProgressLayer.self
    }

    override public func action(for layer: CALayer, forKey event: String) -> CAAction? {
        if event == #keyPath(CircularProgressLayer.progress),
            let action = action(for: layer, forKey: #keyPath(backgroundColor)) as? CAAnimation, 
            let animation: CABasicAnimation = (action.copy() as? CABasicAnimation) {
            animation.keyPath = #keyPath(CircularProgressLayer.progress)
            animation.fromValue = progressLayer.progress
            animation.toValue = progress
            self.layer.add(animation, forKey: #keyPath(CircularProgressLayer.progress))
            return animation
        }
        return super.action(for: layer, forKey: event)
    }

}

/*
* Concepts taken from:
* https://stackoverflow.com/a/37470079
*/
fileprivate class CircularProgressLayer: CALayer {
    @NSManaged var progress: CGFloat
    let startAngle: CGFloat = 1.5 * .pi
    let twoPi: CGFloat = 2 * .pi
    let halfPi: CGFloat = .pi / 2

    override class func needsDisplay(forKey key: String) -> Bool {
        if key == #keyPath(progress) {
            return true
        }
        return super.needsDisplay(forKey: key)
    }

    override func draw(in ctx: CGContext) {
        super.draw(in: ctx)

        UIGraphicsPushContext(ctx)

        //Light Grey
        UIColor.lightGray.setStroke()

        let center = CGPoint(x: bounds.midX, y: bounds.midY)
        let strokeWidth: CGFloat = 4
        let radius = (bounds.size.width / 2) - strokeWidth
        let path = UIBezierPath(arcCenter: center, radius: radius, startAngle: 0, endAngle: twoPi, clockwise: true)
        path.lineWidth = strokeWidth
        path.stroke()

        //Red
        UIColor.red.setStroke()

        let endAngle = (twoPi * progress) - halfPi
        let pathProgress = UIBezierPath(arcCenter: center, radius: radius, startAngle: startAngle, endAngle: endAngle , clockwise: true)
        pathProgress.lineWidth = strokeWidth
        pathProgress.lineCapStyle = .round
        pathProgress.stroke()

        UIGraphicsPopContext()
    }
}

let circularProgress = CircularProgressView(frame: CGRect(x: 0, y: 0, width: 80, height: 80))
UIView.animate(withDuration: 2, delay: 0, options: .curveEaseInOut, animations: {
    circularProgress.progress = 0.76
}, completion: nil) 
```

[这里](https://gist.github.com/nicklockwood/d374033b27c62662ac8d "这里")有一篇很棒的 objc 文章，详细介绍了它的工作原理

[以及在这里](https://github.com/darrarski/DRCircularProgress-iOS "这里")使用相同概念的 objc 项目：

本质上，当从动画块中为对象设置动画时，将调用 action(for layer:)，我们可以使用相同的属性（从 backgroundColor 属性中窃取）开始我们自己的动画并为更改设置动画。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-27T20:08:01.470

对于那些像我一样需要更多详细信息的人：

[Apple](https://developer.apple.com/library/ios/samplecode/sc2284/Introduction/Intro.html#//apple_ref/doc/uid/DTS40014302-Intro-DontLinkElementID_2)提供了一个很酷的例子来解决这个问题。

例如，多亏了它，我发现您实际上不需要将自定义层添加为子层（正如*@Tom van Zummeren*所建议的那样）。相反，将类方法添加到您的 View 类就足够了：

```
+ (Class)layerClass
{
    return [CustomLayer class];
} 
```

希望它可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:50:56.833

您必须自己实施百分比部分。您可以覆盖图层绘图代码以根据设置的百分比值绘制您的 cgpath。查看[核心动画编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/CoreAnimationArchitecture.html#//apple_ref/doc/uid/TP40006655-SW1)和[动画类型和时间指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Animation_Types_Timing/Articles/PropertyAnimations.html#//apple_ref/doc/uid/TP40006672-SW13)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-01T14:41:22.897

@David Rees的[回答](https://stackoverflow.com/a/44961463/10105400)让我走上了正确的道路，但有一个问题。在我的情况下，动画的完成总是在动画开始后返回 false。

```
UIView.animate(withDuration: 2, delay: 0, options: .curveEaseInOut, animations: {
    circularProgress.progress = 0.76
}, completion: { finished in
   // finished - always false
}) 
```

这就是它为我工作的方式——动画的动作是在 CALayer 内部处理的。

我还包括了一个小例子，如何制作具有“颜色”等附加属性的图层。在这种情况下，如果没有复制值的初始化程序，更改颜色只会影响非动画视图。在动画期间，它会在“默认设置”下可见。

```
public class CircularProgressView: UIView {

    @objc public dynamic var progress: CGFloat {
        get {
            return progressLayer.progress
        }
        set {
            progressLayer.progress = newValue
        }
    }

    fileprivate var progressLayer: CircularProgressLayer {
        return layer as! CircularProgressLayer
    }

    override public class var layerClass: AnyClass {
        return CircularProgressLayer.self
    }
}

/*
* Concepts taken from:
* https://stackoverflow.com/a/37470079
*/
fileprivate class CircularProgressLayer: CALayer {
    @NSManaged var progress: CGFloat
    let startAngle: CGFloat = 1.5 * .pi
    let twoPi: CGFloat = 2 * .pi
    let halfPi: CGFloat = .pi / 2

    var color: UIColor = .red
    // preserve layer properties
    // without this specyfic init, if color was changed to sth else
    // animation would still use .red
    override init(layer: Any) {
        super.init(layer: layer)
        if let layer = layer as? CircularProgressLayer {
            self.color = layer.color
            self.progress = layer.progress
        }
    }

    override init() {
        super.init()
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
    }

    override class func needsDisplay(forKey key: String) -> Bool {
        if key == #keyPath(progress) {
            return true
        }
        return super.needsDisplay(forKey: key)
    }

    override func action(forKey event: String) -> CAAction? {
        if event == #keyPath(CircularProgressLayer.progress) {
            guard let animation = action(forKey: #keyPath(backgroundColor)) as? CABasicAnimation else {
                setNeedsDisplay()
                return nil
            }

            if let presentation = presentation() {
                animation.keyPath = event
                animation.fromValue = presentation.value(forKeyPath: event)
                animation.toValue = nil
            } else {
                return nil
            }

            return animation
        }

        return super.action(forKey: event)
    }

    override func draw(in ctx: CGContext) {
        super.draw(in: ctx)

        UIGraphicsPushContext(ctx)

        //Light Gray
        UIColor.lightGray.setStroke()

        let center = CGPoint(x: bounds.midX, y: bounds.midY)
        let strokeWidth: CGFloat = 4
        let radius = (bounds.size.width / 2) - strokeWidth
        let path = UIBezierPath(arcCenter: center, radius: radius, startAngle: 0, endAngle: twoPi, clockwise: true)
        path.lineWidth = strokeWidth
        path.stroke()

        // Red - default
        self.color.setStroke()

        let endAngle = (twoPi * progress) - halfPi
        let pathProgress = UIBezierPath(arcCenter: center, radius: radius, startAngle: startAngle, endAngle: endAngle , clockwise: true)
        pathProgress.lineWidth = strokeWidth
        pathProgress.lineCapStyle = .round
        pathProgress.stroke()

        UIGraphicsPopContext()
    }
} 
```

我在这篇文章中找到了以不同方式处理动画和复制图层属性的方法： [https ://medium.com/better-programming/make-apis-like-apple-animatable-view-properties-in-swift-4349b2244cea](https://medium.com/better-programming/make-apis-like-apple-animatable-view-properties-in-swift-4349b2244cea)

# c# - 绘制到 3d 视觉模型时闪烁

> ID：14192817
> 
> 赞同：0
> 
> 时间：2013-01-07T09:09:59.573
> 
> 标签：c#, wpf

我有一个使用画笔在视觉模型上绘制视频的程序。起初，它工作得很好，没有闪烁，但经过几次编译和使用后，开始出现闪烁。这背后可能存在的问题是什么？如果我迁移到一个全新的 wpf 窗口项目，该程序将再次正常工作并重复循环。

# javascript - javascript 中的表单验证（单选框和组合框）

> ID：14192818
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:10:02.493
> 
> 标签：javascript, combobox, radio-button, validation

我正在尝试验证 javascript 中的单选按钮和选项框。这是代码，但它不起作用... OprionBox 和 Radio 的 Javascript 代码：

```
function checkCountry()
        {
        if(document.form.country.selectedIndex=="")
        {
        alert("Please select country from the list");
        return false;  
        }
        return true
        }
function checkGender()
        {
        if(!document.getElementsByName("sex")[0].checked && !document.getElementsByName("sex")[1].checked)
        {
        alert("Select Male/Female");
        return false;
        }
        return true;
        }
function validate()
      {
            checkCountry();
            checkGender();
      } 
```

HTML 代码：

```
<form name="form" method="post" onSubmit="return validate()">                
    <select name="country">
    <option value="select">(Please select a country)</option>
    <option value="pk">Pakistan</option>
    <option value="chn">China</option>
    <option value="uk">United Kingdom</option>
    <option value="usa">United States of America</option>
    <option value="ir">Iran</option>
    <option value="ma">Malaysia</option>
    </select><br>
    <input type="radio" name="sex" value="male">Male<br>
    <input type="radio" name="sex" value="female">Female<br></form> 
```

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:30:33.297

这是整个代码，它工作正常

```
<html>
<head>
<script type="text/javascript">
function checkGender()
        {
        if(!document.getElementsByName("sex")[0].checked && !document.getElementsByName("sex")[1].checked)
        {
        alert("Select Male/Female");
        return false;
        }
        return true;
        }
function checkCountry()
        {

      if(document.getElementsByName("country")[0].selectedIndex==0)
        {
        alert("Please select country from the list");
        return false;  
        }
        return true
        }
function validate()
      {
            checkCountry();
           checkGender();
      }
</script>
</head>
<body>

<form onSubmit="return validate()" >
  <select name="country">
    <option value="select">(Please select a country)</option>
    <option value="pk">Pakistan</option>
    <option value="chn">China</option>
    <option value="uk">United Kingdom</option>
    <option value="usa">United States of America</option>
    <option value="ir">Iran</option>
    <option value="ma">Malaysia</option>
    </select><br>
    <input type="radio" name="sex" value="male">Male<br>
    <input type="radio" name="sex" value="female">Female<br>
  <input type="submit" value="Submit" >
</form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:31:31.530

您必须将检查所选索引的行更改为：

`if(document.form.country.selectedIndex === 0)`那是因为您的“请选择一个国家”条目，您将始终拥有一个选定的索引。

如果我然后`<input type="submit" value="test"/>`在您的表单中添加以测试提交，我将收到您的错误消息。

请参阅[http://jsbin.com/oviped/2/edit](http://jsbin.com/oviped/2/edit)它正在工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:56:38.323

更改`if(document.form.country.selectedIndex=="")`为`if(document.getElementsByName("country").selectedIndex=="0")`

# c++ - 指针和方法的奇怪用法

> ID：14192821
> 
> 赞同：1
> 
> 时间：2013-01-07T09:10:08.190
> 
> 标签：c++, pointers, methods

```
if (mySharedState -> liveIPs -> find(flowStats -> destinationIP) != mySharedState -> liveIPs -> end() ){
     //do something
} 
```

`unordered_map <uint32_t, std::string> *liveIPs;`

我从未见过这样的用法（**find(...)**和**end()**的用法）。有人可以帮我了解它返回的内容吗？（顺便说一下，这是c++代码）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:11:26.047

您使用此技术来检查容器是否包含该值。

`find()`返回与该值对应的迭代器，`end()`返回容器末尾的迭代器 1，用于表示“未找到值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:24:19.743

函数 find(value) 和 end() 是称为“容器”的类的成员函数，用于存储各种类型的元素（列表、集合、向量、映射......）。[这里](http://www.cplusplus.com/reference/stl/)有更多关于容器的信息。

两个成员函数都返回一个指向容器元素的迭代器（一种指针）。[您可以在此处](http://www.cplusplus.com/reference/iterator/)阅读有关迭代器的信息。

抽象地说，find(value) 将为您提供元素在容器中等于该值的位置。end() 将返回一个指向容器末尾的迭代器（最后一个元素后面的位置）。

所以在你的情况下：

```
// from mSharedState get liveIPs (a container storing IPs)
// and find the element with value destinationIP
mSharedState->liveIPs->find(flowStats->destinationIP) 

// check if the iterator returned by find(flowStats->destinationIP) is different
// then the end of the liveIPs contatiner
!= liveIPs->end() 
```

因此，如果容器 liveIPs 持有值为destinationIP 的元素，“//do something”将被执行。

由于 find(value) 和 end() 通常是容器的成员函数，我认为您显示的代码片段是 STL 符合容器的成员函数定义的一部分（可能是一些用户定义的容器符合STL 容器接口，提供 find(value) 和 end() 作为成员函数）。

# javascript - 如果高度大于 /w Bootstrap 折叠导航

> ID：14192825
> 
> 赞同：1
> 
> 时间：2013-01-07T09:10:32.870
> 
> 标签：javascript, jquery, if-statement, twitter-bootstrap

调整页面大小并按下按钮进行导航后，我在设置 div 的高度时遇到了一些问题。

从下面的代码我相信应该可以工作。当导航栏重新调整大小并单击按钮时，它甚至不会显示警报。

```
if ($('.nav-collapse').height() > 2) {
    alert("hello");
    $(".navBarJquery").css({
        "top": pos.top,
        "height": hei
    });
} 
```

[链接到现场演示](http://isca01.bigwavemedia.info/~watfordy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:20:57.257

向 .navbar-inner 添加了背景颜色，而不是尝试使用 jquery 跟踪它并在其中添加背景。

# asp.net - 如果用户通过身份验证，则使用重定向缓存匿名页面

> ID：14192826
> 
> 赞同：0
> 
> 时间：2013-01-07T09:10:38.053
> 
> 标签：asp.net, asp.net-mvc, http-caching

我想为我们的 asp.net mvc 站点的登录页面使用页面缓存。此页面仅供匿名用户访问。但是，如果用户已登录，我希望此页面重定向到经过身份验证的用户主页。

问题是，如果我缓存登录页面，登录用户仍然可以访问此页面，因为它已缓存在他们的浏览器上。

显然，如果用户经过身份验证，元刷新标头也将不起作用，因为页面将首先缓存而没有标头。

是否有任何方法可以缓存登录页面，但如果用户登录，也可以重定向，而不使用查询参数，或者条件 GET 是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:55:05.843

您可以使用带有 VaryByCustom 参数的[OutputCacheAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute.varybycustom%28v=vs.100%29.aspx)。

如果将其设置为“IsAuthenticated”之类的内容，然后在 Global.asax 文件中定义[GetVaryByCustomString](http://msdn.microsoft.com/en-us/library/5ecf4420%28v=VS.90%29.aspx)方法，并根据用户是否经过身份验证返回字符串“True”或“False”。

事实上，以下博客文章回答了您的确切问题：[阅读本文](http://visitmix.com/writings/using-varybycustom-with-outputcache-in-asp-net-mvc-to-support-caching-for-logged-in-users)

# java - 如何找出谁在显式调用垃圾收集器？

> ID：14192828
> 
> 赞同：1
> 
> 时间：2013-01-07T09:10:41.923
> 
> 标签：java, android, garbage-collection, galaxy

在 ActivityManager.getMemoryClass() 返回健康的 64 (MB) 允许堆空间的三星 Galaxy S3 上运行时，我收到了大量这样的 LogCat 消息。

> WAIT_FOR_CONCURRENT_GC 阻塞 0ms
> GC_EXPLICIT 释放 267K，35% 释放 15885/24327K，暂停 3ms+6ms，共 52ms

应用程序加载在内存中缓存了大约 100 个联系人缩略图，并且这些 GC 调用在联系人/位图加载期间发生。GC 调用的结果是滚动列表视图时的卡顿性能。

我从不打电话`System.gc()`。

我的问题是这个。我认为`GC_EXPLICIT`只有在显式调用 GC 时才会显示日志消息（即 Android 内存管理器没有运行 GC，一些应用程序级代码正在这样做）。

如何找出谁在显式调用 GC，以便更好地处理如何修复我的代码？*注意：我知道 Android 内存管理器可以并且将会调用 GC。我的理解是导致`GC_CONCURRENT`调用，而不是`GC_EXPLICIT`调用。*

**更新：这是加载联系人缩略图的代码。它在后台线程上运行。**

```
public static Bitmap loadBitmapFromContentUri(
    ContentResolver resolver,
    Uri uri
)
{
    InputStream is = null;
    Bitmap result = null;
    try
    {
        is = resolver.openInputStream(uri);
        result = BitmapFactory.decodeStream(is);
    }
    catch (FileNotFoundException e)
    {
        Log.e(
            TAG,
            "Failed to load photo for Uri " + uri + ": " + e.getMessage() 
        );
    }
    finally
    {
        if (null != is)
        {
            try
            {
                is.close();
            }
            catch (IOException e)
            { }
        }
    }
    return result;
} 
```

# junit - 使用 Eclipse 进行 EclEmma 覆盖检查

> ID：14192836
> 
> 赞同：1
> 
> 时间：2013-01-07T09:11:26.893
> 
> 标签：junit, code-coverage, eclemma

我想使用 EclEmma 检查 GWT 代码的测试覆盖率，当我运行覆盖率时，它总是在报告中显示零覆盖率。任何人都可以帮助我.. 下面是覆盖率报告的图像，它表明我没有覆盖任何说明， ![在此处输入图像描述](../Images/c1803db8cbcbdab2580087e8edecc6b6.png)

不管怎么说，还是要谢谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-30T13:59:34.083

你在使用 PowerMock 吗？

看到[这个](https://github.com/jayway/powermock/issues/422)问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T10:39:20.787

确保 EclEmma 全局过滤器是正确的。

在`Preferences`,上`Java`，`Code Coverage`它应该显示 Includes: * 并且在 Excludes: 中没有任何内容：

# php - SSL 对等证书或 SSH 远程密钥不正确

> ID：14192837
> 
> 赞同：29
> 
> 时间：2013-01-07T09:11:33.930
> 
> 标签：php, apache, ssl, curl

我正在测试一个使用`curl_exec`php 函数和 CA 证书的 API，但是出了点问题，我有点迷茫。

我已经在我的 apache VirtualHost 上配置了 SSL，看起来还不错（打开`https:://[myVHost]`... 工作）。

但是 API curl 调用给了我这个消息：

*   `SSL peer certificate or SSH remote key was not OK`

我对 SSL 不是很有经验，所以我对它的原因知之甚少。

**更新：**

这是我在 cURL 请求中使用的代码，我已经注释了 2 行并更改了它们的值（查看 'TODO' 行）并且以这种方式工作，但这只是一个工作...

```
$opts[CURLOPT_URL] = $url;
    $opts[CURLOPT_RETURNTRANSFER] = true;
    $opts[CURLOPT_CONNECTTIMEOUT] = 50;
    $opts[CURLOPT_TIMEOUT] = 100;
    $headers = array(
        'Accept: application/json',
        "User-Agent: APIXXX-PHP-Client");
    $opts[CURLOPT_HTTPHEADER] = $headers;
    $opts[CURLOPT_USERPWD] = $env->getApiKey() . ':';
    if (certificatePresent()) {

        //  $opts[CURLOPT_SSL_VERIFYPEER] = true;
        //  $opts[CURLOPT_SSL_VERIFYHOST] = 2;

        // TODO: SET IT BACK
        $opts[CURLOPT_SSL_VERIFYPEER] = 0;
        $opts[CURLOPT_SSL_VERIFYHOST] = 0;

        $opts[CURLOPT_CAINFO] = $path

      }

    curl_setopt_array($curl, $opts);

    $response = curl_exec($curl); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-29T13:18:45.753

您可能正在使用自签名 SSL 证书，当设置 CURLOPT_SSL_VERIFYPEER 选项时，该证书不会通过。

有两种解决方案：

1.  购买有效的 SSL 证书。
2.  在 Curl 中禁用 SSL 验证。（[添加 --insecure 选项](https://serverfault.com/questions/469824/curl-disable-certificate-verification)）

如果您禁用验证，您将无法确定您是否真的在与您的主机通信。因此，这取决于您需要的安全级别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-21T09:50:13.420

除此之外`CURLOPT_SSL_VERIFYPEER`，还有两个其他设置可能会更改为`false`/ `0`：

```
CURLOPT_SSL_VERIFYHOST
CURLOPT_SSL_VERIFYSTATUS 
```

请注意，您应该修复您的 SSL 证书和设置，而不是禁用安全性！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-08T13:45:19.167

虽然我是在回复旧帖，但我认为它会帮助新观众-

您可以通过添加来检查问题

```
$opts[CURLOPT_VERBOSE] = 1 
```

对于自签名证书，您的客户端可以使用 IP 地址与服务器连接，因为主机名在 DNS 缓存中不可用。在这种情况下，您的服务器证书的 COMMON NAME(CN) 需要与服务器 IP 匹配（在生成服务器证书时将 IP 地址作为通用名称）。正确执行后，您会看到以下消息：

> 通用名：192.168.0.1（匹配）

这里 192.168.0.1 是一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-19T04:10:16.397

`SSL_VERIFYPEER`如果您担心中间人攻击，您希望启用它是正确的。

您的`$path`设置是否指向 API 所有者提供的证书（或证书包）？Web 服务器用户是否可以读取该证书？如果是这样，您是否验证了证书与您在浏览器中手动访问 https 地址并检查证书时的证书相同？

如果你不能让它工作，并且你连接的 API 有一个 SSL 证书，可以在你的普通浏览器中工作而没有警告，你应该能够`$path`在你的服务器上设置你的 CA 根包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T13:04:22.217

您可以构建一个有效的 SSL 证书并确保它存储在受信任的文件夹中。

可以通过在`VS2012`. （这可以通过在开始时输入 developer 来获得）

以下命令创建一个自签名证书，可用于测试在 URL 为 的 Web 服务器上使用安全套接字层 (SSL) 的 Web 应用程序`www.example.com`。该`-eku`选项定义的 OID 将该证书标识为`SSL server certificate`. 证书存储在我的商店中，并且在机器（而不是用户）级别可用。证书的私钥是可导出的，并且证书从`May 10, 2010 through December 22, 2011`.

Makecert -r -pe -n CN="www.example.com" -b 05/10/2010 -e 12/22/2011 -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -sp“Microsoft RSA SChannel 加密提供程序”-sy 12

有关如何创建[SSL 证书的更多信息](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=vs.110%29.aspx)

现在确保这个证书是可信的，这可以通过输入`CERTMGR`cmd 来完成。

现在创建的证书位于 PERSONAL 文件夹中.. 将其复制并粘贴到受信任的人文件夹中。

这应该可以解决问题。如果这不起作用，请告诉我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-06T01:45:27.287

我遇到过同样的问题。我按照这里的说明进行操作：http: [//siteber.com/download-failed-ssl-peer-certificate-or-ssh-remote-key-was-not-ok/](http://siteber.com/download-failed-ssl-peer-certificate-or-ssh-remote-key-was-not-ok/)它修复了我的问题。

基本上我去了 /etc/resolv.conf

并替换任何

OpenDNS 服务器：

208.67.222.222

208.67.220.220

和

Google 的公共 DNS 服务器：

名称服务器 8.8.8.8 名称服务器 8.8.4.4

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-22T13:26:18.320

如果您在具有自签名证书的 linux 服务器上更新软件包，也会发生此错误。

解决方案：停止现有的 Apache/nginx 服务器。运行 certbot（如果您使用让加密）

重新启动 Apache/nginx 服务器。

注意：如果您使用的是 Springboot，请添加 System.setProperty("https.protocols", "TLSv1,TLSv1.1,TLSv1.2,TLSv1.3"); 到您的 application.properties 文件

瞧！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-18T11:19:46.583

这个错误我花了几乎一整天的时间，问题出在使用 ipv6 上，并且调用的 api server 不支持 ipv6。解决方案： **curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_VERSION_IPV4);**

# sql-server - 为什么 SQL Server 列总是小写？

> ID：14192839
> 
> 赞同：0
> 
> 时间：2013-01-07T09:11:48.807
> 
> 标签：sql-server, performance, lowercase

我已经使用 SQL Server 工作了一段时间，我注意到 Microsoft 总是对所有标准列使用小写字母（例如在主数据库中）。在我自己的模型中遵循这一点是否有充分的理由？也许是性能原因？

![在此处输入图像描述](../Images/10a617c3990794def191e71e1c7a1c4f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:14:44.203

原因是约定和一致性。这里没有性能优势。他们认为这是我们的编码约定并坚持下去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:24:01.663

当服务器配置了区分大小写的排序规则时会有所帮助。如果是这样的话，那么混合大小写名称肯定会引起很多麻烦。

我怎么知道？我在多服务器场景中被 sp_MSforeachdb 卡住了，并且一台服务器有区分大小写的排序规则。我花了比其他时间更长的时间来弄清楚 MS 是大写字母，即使有下划线也是如此。

拉吉

# node.js - NodeJS 上的 KnockoutJs

> ID：14192840
> 
> 赞同：3
> 
> 时间：2013-01-07T09:11:49.560
> 
> 标签：node.js, knockout.js

我正在尝试在 Node.js 上使用 KnockoutJS。

在这里找到了一个相同的实现：[https ://github.com/mtscout6/knockout-node](https://github.com/mtscout6/knockout-node)

有没有人以其他方式实现过这个？

基本上我希望能够在服务器上使用 Computed Observable。

是否可以使用任何其他库在 javascript 中具有此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:01:52.477

我几乎不建议您不要使用此架构，因为它的文档较少，并且您不会在网络上找到太多关于此的支持。此外，KO 旨在用作客户端框架。如果它不是机密的，传递值并计算客户端？

在客户端它看起来像

```
this.fullName = ko.computed(function() {
    return this.firstName() + " " + this.lastName();
}, this); 
```

在您的视图模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T05:48:14.787

从 knockoutJS 邮件列表中找到了解决方案。

有一个节点模块提供与计算的 observables 和订阅完全相同的功能。

[https://npmjs.org/package/obs](https://npmjs.org/package/obs)

“Obs”提供了极简的可观察属性。

太棒了..

# php - 在第 3 个字母后运行自动建议，过滤 36k 个条目的数据

> ID：14192842
> 
> 赞同：0
> 
> 时间：2013-01-07T09:12:04.567
> 
> 标签：php, filter, autosuggest

我在大学网站上遇到问题，其中包含 38.000 种期刊的列表。

此列表显示在列表中。

列标题#1 有一个文本框来过滤下面的行，
列标题#2 有一个下拉过滤器来限制对特定数据库的搜索。

到目前为止，它运行得很好，但它是一个将近 6MBytes 的 HTML 文件。

我正在考虑创建一个包含所有条目的基于 SQL 的表。那应该很容易。

但是我怎样才能制作带有自动提示的文本框，它会在输入 3 个字母后开始提示，并自动将结果列在下面？

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:27:31.870

如果输入字符串 >=3，则调用自动建议函数

```
if(inputString.length == 0) {
     $('#suggestions').fadeOut();
} else { 
```

进入

```
if(inputString.length == 0) {
         $('#suggestions').fadeOut();
} else if(inputString.length >= 3) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:04:51.007

作为替代方案，您可以尝试使用 DevBridge jQuery Autocomplete 并指定 minChars 选项。看看：[https ://github.com/devbridge/jQuery-Autocomplete](https://github.com/devbridge/jQuery-Autocomplete)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-07T09:46:26.280

网上有一百万个教程可以做到这一点。这是一个：[http ://www.htmlblog.us/jquery-autocomplete](http://www.htmlblog.us/jquery-autocomplete)

更多内容：[http ://www.google.com.au/search?q=jquery%20mysql%20autocomplete%20tutorial](http://www.google.com.au/search?q=jquery%20mysql%20autocomplete%20tutorial)

# javascript - 1 个表单，带有 1 个输入字段和 2 个按钮；需要根据使用的按钮更改输入名称

> ID：14192848
> 
> 赞同：1
> 
> 时间：2013-01-07T09:12:25.937
> 
> 标签：javascript, forms, button, field

我需要一个带有单个输入字段和两个按钮的表单。

棘手的部分是我需要根据按下的按钮更改输入字段**名称。**

```
<FORM name="Form1" id="num_colis" method="post">
<INPUT TYPE="text" name="abc OR xyz" value="">
<INPUT type="button" value="Colissimo" onclick="return OnButton1();">
<INPUT type="button" value="CSUIVI" onclick="return OnButton2();">
</FORM>
<script language="Javascript">
<!--
function OnButton1()
{
    document.Form1.action = "http://www.site1.fr/suivi"    
    document.Form1.submit();             // Submit the page
    return true;
}

function OnButton2()
{
    document.Form1.action = "http://www.site2.fr/suivi"
    document.Form1.submit();             // Submit the page
    return true;
}
-->
</script> 
```

为此，我需要：按下 button1 时使用“INPUT TYPE="text" name="abc"，按下 button2 时使用类似的“INPUT TYPE="text" name="xyz" .

我到处寻找无济于事的解决方案，是否有javascript解决方案或技巧来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:20:12.507

使用纯**JavaScript**

将**id** 属性设置为输入

```
<INPUT TYPE="text" id="textField" value="">

function OnButton1()
{
    document.getElementById('textField').name = 'abc';
    document.Form1.action = "http://www.site1.fr/suivi"
    document.Form1.submit(); // Submit the page

}
function OnButton2()
{
    document.getElementById('textField').name = 'xyz';
    document.Form1.action = "http://www.site2.fr/suivi"
    document.Form1.submit(); // Submit the page

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:22:07.560

您只需要为文本字段分配一个 id 并在函数运行时更改 id 的名称。在这里，我为输入分配了一个 ID，即“myInput”，当您单击按钮时，该函数正在更改字段 ID 为“myInput”的字段名称。

```
<FORM name="Form1" id="num_colis" method="post">
<INPUT TYPE="text" id="myInput" name="abc OR xyz" value="">
<INPUT type="button" value="Colissimo" onclick="return OnButton1();">
<INPUT type="button" value="CSUIVI" onclick="return OnButton2();">
</FORM>
<script language="Javascript">
<!--
function OnButton1()
{
    document.getElementById('myInput').name='abc';
    document.Form1.action = "http://www.site1.fr/suivi"    
    document.Form1.submit();             // Submit the page
    return true;
}

function OnButton2()
{
    document.getElementById('myInput').name='xyz';
    document.Form1.action = "http://www.site2.fr/suivi"
    document.Form1.submit();             // Submit the page
    return true;
}
-->
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:26:22.307

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Swap</title>
<script type="text/javascript">
function abc(){
document.getElementById("name").setAttribute("name", "abc");
}
function xyv(){
document.getElementById("name").setAttribute("name", "xyv");
}
</script>
</head>

<body>
<form name="Form1" id="num_colis" method="post">
    <INPUT TYPE="text" id="name" name="abc OR xyz" value="">
    <INPUT type="button" id="button1" value="Colissimo" onclick="abc()">
    <INPUT type="button" id="button2" value="CSUIVI" onclick="xyv()">
</form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T09:16:07.757

使用 jQuery

```
<FORM name="Form1" id="num_colis" method="post">
<INPUT TYPE="text" id="name" name="abc OR xyz" value="">
<INPUT type="button" id="button1" value="Colissimo">
<INPUT type="button" id="button2" value="CSUIVI">
</FORM>
<script language="Javascript">
$('#button1').click(function() {
  $('#name').attr('name', 'abc');
});
$('#button2').click(function() {
  $('#name').attr('name', 'xyz');
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T09:20:11.303

为什么不使用隐藏的输入字段？

```
<INPUT TYPE="hidden" name="abc_or_xyz" value="">
<INPUT TYPE="text" name="text" value=""> 
```

...

```
function OnButton1()
{
    document.Form1.action = "http://www.site1.fr/suivi";    
    document.Form1.abc_or_xyz.value = "abc";
    document.Form1.submit();             // Submit the page
    return true;
}

function OnButton2()
{
    document.Form1.action = "http://www.site2.fr/suivi";
    document.Form1.abc_or_xyz.value = "xyz";
    document.Form1.submit();             // Submit the page
    return true;
} 
```

服务器端检查请求属性`abc_or_xyz`，这使得可以`text`不同地解释请求属性。

# android - 我的服务在后退按钮后停止

> ID：14192853
> 
> 赞同：1
> 
> 时间：2013-01-07T09:12:50.167
> 
> 标签：android, service, android-activity

我有一个可以交流的服务和一个活动。当我单击按钮（我有 Galaxy s3 只有一个按钮）时，我的活动当然会消失，我的服务会继续运行，但是如果我单击后退（触摸）按钮，那么我的服务就会被破坏。我该如何改变它？我希望服务继续运行，直到活动破坏它。

**编辑**

这是代码：

服务： public class MyService extends Service { private static final String TAG = "BroadcastService"; 公共静态最终字符串 BROADCAST_ACTION = "com.websmithing.broadcasttest.displayevent"; 私有最终处理程序处理程序=新处理程序（）；私人意图；整数计数器 = 0;

```
 @Override
    public void onCreate() 
    {
        super.onCreate();
        intent = new Intent(BROADCAST_ACTION);  
    }

    @Override
    public void onStart(Intent intent, int startId) 
    {
       // handler.removeCallbacks(sendUpdatesToUI);
        handler.postDelayed(sendUpdatesToUI, 1000); // 1 second

    }

    private Runnable sendUpdatesToUI = new Runnable() {
        public void run() {
            DisplayLoggingInfo();           
            handler.postDelayed(this, 1000); // 10 seconds
        }
    };    

    private void DisplayLoggingInfo() {
        intent.putExtra("counter", String.valueOf(++counter));
        sendBroadcast(intent);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {       
        handler.removeCallbacks(sendUpdatesToUI);       
        super.onDestroy();
    }       
} 
```

活动：

```
public class MainActivity extends Activity {
    private static final String TAG = "BroadcastTest";
    private Intent intent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        intent = new Intent(this, MyService.class);

        startService(intent);
        registerReceiver(broadcastReceiver, new IntentFilter(MyService.BROADCAST_ACTION));
    }

    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            updateUI(intent);       
        }
    };    

    @Override
    public void onDestroy() {
        super.onPause();
        unregisterReceiver(broadcastReceiver);
        stopService(intent);        
    }   

    private void updateUI(Intent intent) 
    {
        String counter = intent.getStringExtra("counter"); 
        Log.d(TAG, counter);

        TextView txtCounter = (TextView) findViewById(R.id.textView1);
        txtCounter.setText(counter);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:26:11.037

当然，当您按下后退按钮时，您的服务将停止。后退按钮大多数调用`finish()`活动，它被销毁。当您按下另一个按钮（主页按钮）时，它只会最小化您的应用程序，并且只会在以后操作系统想要释放空间时被销毁。

如果您想保持服务运行，请将其设为前台服务，并且不要在活动破坏时停止它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-18T14:15:43.887

你可以把你的应用程序放在后台而不是完成它。

```
 @Override
    public void onBackPressed() {
     moveTaskToBack(true);
    // super.onBackPressed();
    } 
```

# android - 列表视图不换行

> ID：14192857
> 
> 赞同：0
> 
> 时间：2013-01-07T09:13:06.797
> 
> 标签：android, listview

我有这样的线性布局：

```
<LinearLayout
                android:id="@+id/quizViewTwo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">
                <LinearLayout
                    android:id="@+id/answer_layoutTwo"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:orientation="vertical"/>
            </LinearLayout> 
```

`answer_layoutTwo`现在，由于一些限制，我正在以编程方式将列表视图添加到

```
ListView ansList = new ListView(Test.this);
ansList.setAdapter(adapter);
ansCellLayout.addView(ansList);// here ansCellLayout is answer_layoutTwo 
```

现在列表视图没有包装它只显示第一项并且它们具有滚动视图。

我尝试添加布局参数也尝试增加重量并且它不起作用。

**编辑**

我尝试添加`ansList.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 600));`

它工作正常，但如果我给 FillParent 它不会工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:18:23.560

您的第一个`LinearLayout`指定`android:layout_height="wrap_content"`可能是原因。另外为什么要嵌套两个垂直线性布局？

# css - “webkit-appearance：复选框”在 iOS 中无法正常工作

> ID：14192859
> 
> 赞同：0
> 
> 时间：2013-01-07T09:13:18.307
> 
> 标签：css, checkbox, radio-button

我使用属性来设置单选按钮的样式，使其看起来像复选框。它在 chrome、firefox、window 上的 safari 上成功运行。但是在iOS上的Safari中打开网页时存在问题。问题是它仍然显示为复选框，但它们的**形状像 radiobutton 一样是圆形的**。这意味着当您单击它时，它仍会显示一个刻度，但包含刻度的是一个圆圈，而不是一个正方形。

那么如何解决这个问题呢？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T17:10:34.813

下面`-webkit-appearance: checkbox;`，放 `-webkit-border-radius: 5px;`（或您想要的任何其他尺寸的角）。

# visual-studio-2010 - 发布模式下无法为 COM 组件创建 ActiveX 组件（VS2010 特定）

> ID：14192862
> 
> 赞同：0
> 
> 时间：2013-01-07T09:13:25.863
> 
> 标签：visual-studio-2010, com, activex, atl

我在 VS2008 中有一个 ATL COM 组件（.exe）（VC++）。通过 VB6 客户端，我使用 CreateObject 并获取对象。

但是一旦组件更新到 VS2010 SP1，VB6 客户端就不能再创建 COM 对象了。

如果我在调试模式下编译 VS2010 COM 组件并获取 .exe，VB6 客户端工作正常。在发布模式下，.exe 生成没有任何错误，VB6 客户端失败，提示无法创建 ActiveX 组件。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:12:47.070

找出 COM 拒绝创建某个 CoClass 的实例的原因实际上是一个 PITA。你得到的只是一些通用的错误代码，对你没有多大帮助。如果您通过 Dlls 使用运行时库，您应该检查是否可以在调试器之外找到这些库。我使用 COM/OLE 查看器检查是否可以创建 CoClass 的对象，以便排除问题与 VB 有关。

祝你好运。

斯图尔特

# php - PHP：CSRF预防，检查远程地址

> ID：14192863
> 
> 赞同：1
> 
> 时间：2013-01-07T09:13:28.183
> 
> 标签：php, csrf

我正在编写一个用于 CSRF 预防的 PHP 类。

该类可以生成 CSRF 令牌，然后检查它们，但我还要验证 - 作为额外的 - 如果请求来自相同的浏览器 ( `$_SERVER['HTTP_USER_AGENT']`) 和相同的 IP ( `$_SERVER['REMOTE_ADDR']`)。我知道有些用户可能有动态 IP 地址，而这些地址是可以改变的。所以我的问题是：用户的 IP 地址有可能在 2 个请求之间发生变化吗？我还应该检查`$_SERVER['REMOTE_ADDR']`还是只检查用户代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:30:05.633

> 所以我的问题是：用户的 IP 地址有可能在 2 个请求之间发生变化吗？

是的

> 我还应该检查 $_SERVER['REMOTE_ADDR'] 还是只检查用户代理？

没有必要——你只是在为自己做更多的工作。查看[CSRF 上的 OWASP 指南以](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)获取更多信息。您可以[在此处查看防止 CSRF 攻击的最佳方法。](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)注意 - OWASP 建议*仅在*您不使用 CSRF 令牌时查看 CSRF 的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:29:19.763

IP 地址对于反 CSRF 来说是不可靠的，因为它可能会频繁更改，这将使您的 Web 应用程序对这些用户无法使用。AOL 是已知在请求之间切换 IP 的 ISP 的一个示例。

用户代理再次不是很可靠。这也可以更改，因为它通常包含软件版本详细信息，有时还包含已安装软件或插件的名称。还要考虑到用户代理是在与会话 ID cookie 相同的位置发送的（在 HTTP 请求中），因此如果攻击者能够获得会话 ID，那么他们很可能已经拥有或可以获得相关的用户代理.

最好的形式是 CSRF 保护是在执行操作时生成要检查的令牌。理想情况下，令牌应该在整个会话期间发生变化，而不是保持静态。

# android - 布局中的android溢出视图

> ID：14192865
> 
> 赞同：0
> 
> 时间：2013-01-07T09:13:29.340
> 
> 标签：android, android-layout

不确定我是否正确地表达了这个问题，但是..

我如何让按钮在新行中开始目标是一行中只有 3 个按钮而不将它们拆分为不同的线性布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:20:39.133

您可以使用[GridView](http://developer.android.com/reference/android/widget/GridView.html)并将列宽指定为 3

# android - 如何在检查连接时欺骗 Android？

> ID：14192869
> 
> 赞同：2
> 
> 时间：2013-01-07T09:13:46.683
> 
> 标签：android, network-programming, tun

我正在做一个使用 tun 作为 Android 上的虚拟网络设备的网络应用程序。我关闭了其他可用接口，例如 eth0（用于 WLAN）和 rmnet0（用于 3G/GPRS），但保持 tun0 设备处于活动状态并在路由表中添加规则

`ip route add default dev tun0`

所以我可以将所有互联网传输重定向到 tun 设备（我在这里所做的与 OpenVPN 相同）。然后我在ping其他IP时看到了数据传输。浏览器和其他一些应用程序工作正常。

但是一些安卓应用在访问网络之前会通过 ConnectivityManager 来检查 Connectivity。由于我关闭了 WIFI 和 3G/GPRS，ConnectivityManager 认为没有连接，这些应用程序将不再访问网络。

所以我的问题是：

如何**欺骗**android ConnectiviyManager，让它相信仍然有可用的连接（对于任何类型）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T21:14:53.600

I don't think you can do this, and you wouldn't want to, it's a system-wide service. Imagine if your app relied on internet connectivity, but some malicious app was able to tell you there was and make your app unable to complete it's actions. It could cause a serious problem.

If your app needs to believe there is a connection in some states, I suggest you interface the connectivity / network classes, you can read the true state but then return whichever value you deem fit to your app

# linux - Linux bash - 输入格式

> ID：14192876
> 
> 赞同：2
> 
> 时间：2013-01-07T09:14:23.213
> 
> 标签：linux, bash, input, format

我有这个标准输入：

```
read -p "Server-Number: " servernumber 
```

服务器编号从 01 - 99 重要的是，该数字为零（01、02、03、...、10、11、...、99）如果数字为只有 1 而不是 01 ？

对不起我的英语不好；）我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:17:00.053

```
servernumber=`printf %02d $servernumber` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:29:53.713

只有 Bash，没有其他进程：

```
servernumber=0$servernumber         # add leading 0
servernumber=${servernumber: -2}    # take last 2 characters 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:20:28.693

写一个 if 条件来检查

```
echo $servernumber | nawk '/0/{print NR}' == 1 
```

# php - 如何选择特定区域/范围内的邮政编码？

> ID：14192877
> 
> 赞同：1
> 
> 时间：2013-01-07T09:14:35.723
> 
> 标签：php, range, distance, area, zipcode

我有一个客户要求用户可以添加他/她的邮政编码，然后管理员可以选择特定区域范围内的用户

例如：

```
user - zip code
1    - 24533
2    - 56924
3    - 35993
4    - 13435 
```

管理员的邮政编码是 39824

他需要按邮政编码选择 5 公里范围内的人。使用 php 或任何其他解决方案怎么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T11:36:15.627

非常简单您只需要邮政编码的纬度和经度就可以获取邮政编码。如果您没有经度和纬度，请从谷歌获取它是免费的。您可以通过邮政编码轻松获取纬度和经度。

例如，您想获取 'H8t' 周围 100 英里的邮政编码

我有一张包含纬度和经度信息的邮政编码表。

首先，我向我的表写一个查询以获取纬度和经度

```
SELECT * FROM Tbl_Master_ZIPCodes WHERE ZIPcode ='H8T' 
```

获得纬度和经度后，我在下面写了一个查询，以获取 'H8T' 100 英里范围内的所有邮政编码

```
SELECT distinct zipcode, 
3963 * (ACOS((SIN(45.456700/57.2958) * SIN(latitude/57.2958)) + (COS(45.456700/57.2958) * COS(latitude/57.2958) * COS(longitude/57.2958 - -73.712000/57.2958)))) AS distance 
FROM Tbl_Master_ZIPCodes 
WHERE 3963 * (ACOS((SIN(45.456700/57.2958) * SIN(latitude/57.2958)) + (COS(45.456700/57.2958) * COS(latitude/57.2958) * COS(longitude/57.2958 - -73.712000/57.2958)))) <= 100 Order by Distance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:26:25.763

[php/mysql 邮政编码邻近搜索](https://stackoverflow.com/questions/2410529/php-mysql-zip-code-proximity-search)

但是，就个人而言，我喜欢您的邮政编码范围和距离计算解决方案。如果你有 lat 和 long 我会建议另一个，但这似乎与你需要的相似。

[http://www.micahcarrick.com/php-zip-code-range-and-distance-calculation.html](http://www.micahcarrick.com/php-zip-code-range-and-distance-calculation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:28:35.960

如果您收到带有邮政编码的地址，那么您可以查询[Google 地理编码 Api](https://developers.google.com/maps/documentation/geocoding/)以获取这些地址的地理编码。

获得这些地理编码后，可以使用[此站点的代码示例来计算距离](http://www.corecoding.com/php-geocode-calculator_c25.html)

# php - 在 PHP 中查找 json 的深度

> ID：14192879
> 
> 赞同：3
> 
> 时间：2013-01-07T09:14:48.650
> 
> 标签：php, json

在 html 页面中，我可以获得下面提到的任何一个 json，现在为了知道收到了哪个 json，我需要检查这些 json 对象的深度。有人可以建议一种在 PHP 中获取 json 对象深度的方法。

下面提到了json的两种格式：

```
{
  "Category": {
    "name" : "Camera",
    "productDetails" : {
      "imageUrl" : "/assets/images/product1.png",
      "productName" : "GH700 Digital Camera",
      "originalPrice" : 20000,
      "discountPrice" : 16000,
      "discount" : 20
     }
} 
```

和

```
{
  "city" : {
    "cityname": "ABC",
    "Category": {
      "name" : "Camera",
      "productDetails" : {
        "imageUrl" : "/assets/images/product1.png",
        "productName" : "GH700 Digital Camera",
        "originalPrice" : 20000,
        "discountPrice" : 16000,
        "discount" : 20
       }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:12:35.630

**介绍**

想想象你的 json 看起来像这样

```
$jsonA = '{
  "Category": {
    "name" : "Camera",
    "productDetails" : {
      "imageUrl" : "/assets/images/product1.png",
      "productName" : "GH700 Digital Camera",
      "originalPrice" : 20000,
      "discountPrice" : 16000,
      "discount" : 20
     }
}';

$jsonB = '{
  "city" : {
    "cityname": "ABC",
    "Category": {
      "name" : "Camera",
      "productDetails" : {
        "imageUrl" : "/assets/images/product1.png",
        "productName" : "GH700 Digital Camera",
        "originalPrice" : 20000,
        "discountPrice" : 16000,
        "discount" : 20
       }
  }
'; 
```

**问题 1**

`now in order to know which json is recieved I need to check the depths of these json objects.`

**答案 1**

您不需要深度就知道`json`您需要做的就是使用第一个键，例如`city`或`category`

例子

```
$json = json_decode($unknown);
if (isset($json->city)) {
    // this is $jsonB
} else if (isset($json->Category)) {
    // this is $jsonA
} 
```

**问题2** `can somebody suggest a way to get the depth of json object in PHP`

```
echo getDepth(json_decode($jsonA, true)), PHP_EOL; // returns 2
echo getDepth(json_decode($jsonB, true)), PHP_EOL; // returns 3 
```

使用的功能

```
function getDepth(array $arr) {
    $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($arr));
    $depth = 0;
    foreach ( $it as $v ) {
        $it->getDepth() > $depth and $depth = $it->getDepth();
    }
    return $depth;
} 
```

# android - 不幸的是应用程序已停止

> ID：14192886
> 
> 赞同：2
> 
> 时间：2013-01-07T09:15:22.927
> 
> 标签：android

我正在导入一个应用程序来捕获塔（移动网络信号名称）。当我运行我的应用程序时，我收到错误，因为不幸的是 Towercapture 已停止。我的java文件

```
package com.tower;

import android.app.Activity;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import java.util.List;
import java.util.Locale;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.telephony.gsm.GsmCellLocation;
import android.widget.TextView;
import android.widget.Toast;

public class Towercap2Activity extends Activity {

double myLatitude, myLongitude;
String rs;
double currentLatitude;
double currentLongitude;
StringBuilder result = new StringBuilder();
Address address ;
String adress;
InputStream is=null;
JSONObject jobj;

JSONArray map_address = null;
String json;
/** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  TextView textGsmCellLocation = (TextView)findViewById(R.id.gsmcelllocation);
  TextView textCID = (TextView)findViewById(R.id.cid);
  TextView textLAC = (TextView)findViewById(R.id.lac);
  TextView textGeo = (TextView)findViewById(R.id.geo);

  TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
  GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();

  int cid = cellLocation.getCid();
  int lac = cellLocation.getLac();
  textCID.setText("gsm cell id: " + String.valueOf(cid));
  textLAC.setText("gsm location area_code"+String.valueOf(lac));

  if(RqsLocation(cid, lac)){
          currentLatitude = myLatitude/1000000;
          currentLatitude+=00.002170;
          currentLongitude =myLongitude/1000000;
          currentLongitude+=00.013348;
          String url ="http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address="+currentLatitude+"+"+currentLongitude;

          try
        {
             HttpClient httpclient = new DefaultHttpClient();
               HttpPost httppost = new HttpPost(url);
               HttpResponse response = httpclient.execute(httppost);
               HttpEntity entity = response.getEntity();
                is = entity.getContent();
        } catch (UnsupportedEncodingException e) {
             e.printStackTrace();
        } catch (ClientProtocolException e) {
             e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) 
            {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();

        } catch (Exception e) {
        Toast.makeText(getBaseContext(), "Buffer Error"+"Error converting result"+e.toString(), Toast.LENGTH_LONG).show();
        }

        try {
            jobj = new JSONObject(json);
            map_address = jobj.getJSONArray("results");
            for(int i = 0; i < map_address.length(); i++)
                {
                   JSONObject c = map_address.getJSONObject(i);
                    adress = c.getString("formatted_address");
                }

        } catch (JSONException e)
            {
            Toast.makeText(getBaseContext(), "JSON Parser"+"Error parsing data"+e.toString(), Toast.LENGTH_LONG).show();
            }
           textGeo.setText(adress);

  }else{
   textGeo.setText("Can't find Location!");
  }

  }

  private Boolean RqsLocation(int cid, int lac){

   Boolean result = false;

   String urlmmap = "http://www.google.com/glm/mmap";

  try {
      URL url = new URL(urlmmap);
      URLConnection conn = url.openConnection();
      HttpURLConnection httpConn = (HttpURLConnection) conn;      
      httpConn.setRequestMethod("POST");
      httpConn.setDoOutput(true);
      httpConn.setDoInput(true);
      httpConn.connect();

     OutputStream outputStream = httpConn.getOutputStream();
     WriteData(outputStream, cid, lac);

     InputStream inputStream = httpConn.getInputStream();
     DataInputStream dataInputStream = new DataInputStream(inputStream);

    dataInputStream.readShort();
    dataInputStream.readByte();
    int code = dataInputStream.readInt();
    if (code == 0) {
     myLatitude = dataInputStream.readInt();
     myLongitude = dataInputStream.readInt();

        result = true;

    }
 } catch (IOException e) {

  e.printStackTrace();
 }

 return result;

  }

  private void WriteData(OutputStream out, int cid, int lac)
throws IOException
  {    
  DataOutputStream dataOutputStream = new DataOutputStream(out);
  dataOutputStream.writeShort(21);
  dataOutputStream.writeLong(0);
  dataOutputStream.writeUTF("en");
  dataOutputStream.writeUTF("Android");
  dataOutputStream.writeUTF("1.0");
  dataOutputStream.writeUTF("Web");
  dataOutputStream.writeByte(27);
  dataOutputStream.writeInt(0);
  dataOutputStream.writeInt(0);
  dataOutputStream.writeInt(3);
  dataOutputStream.writeUTF("");

  dataOutputStream.writeInt(cid);
  dataOutputStream.writeInt(lac);   

  dataOutputStream.writeInt(0);
  dataOutputStream.writeInt(0);
  dataOutputStream.writeInt(0);
  dataOutputStream.writeInt(0);
  dataOutputStream.flush();    
}

} 
```

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/hello"
/>
<TextView
android:id="@+id/gsmcelllocation"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
 />
<TextView
android:id="@+id/cid"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
 />
<TextView
android:id="@+id/lac"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
<TextView
android:id="@+id/geo"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
</LinearLayout> 
```

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
   <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.tower"
     android:versionCode="1"
  android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
 <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Towercap2Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

logcat 显示错误如下：

```
01-07 08:59:32.056: W/Trace(801): Unexpected value from nativeGetEnabledTags: 0
01-07 08:59:32.056: W/Trace(801): Unexpected value from nativeGetEnabledTags: 0
01-07 08:59:32.056: W/Trace(801): Unexpected value from nativeGetEnabledTags: 0
01-07 08:59:32.356: W/Trace(801): Unexpected value from nativeGetEnabledTags: 0
01-07 08:59:32.377: W/Trace(801): Unexpected value from nativeGetEnabledTags: 0
01-07 08:59:32.886: D/AndroidRuntime(801): Shutting down VM
01-07 08:59:32.896: W/dalvikvm(801): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-07 08:59:32.976: E/AndroidRuntime(801): FATAL EXCEPTION: main
01-07 08:59:32.976: E/AndroidRuntime(801): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tower/com.tower.Towercap2Activity}: java.lang.NullPointerException
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.os.Looper.loop(Looper.java:137)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-07 08:59:32.976: E/AndroidRuntime(801):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 08:59:32.976: E/AndroidRuntime(801):  at java.lang.reflect.Method.invoke(Method.java:511)
01-07 08:59:32.976: E/AndroidRuntime(801):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-07 08:59:32.976: E/AndroidRuntime(801):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-07 08:59:32.976: E/AndroidRuntime(801):  at dalvik.system.NativeStart.main(Native Method)
01-07 08:59:32.976: E/AndroidRuntime(801): Caused by: java.lang.NullPointerException
01-07 08:59:32.976: E/AndroidRuntime(801):  at com.tower.Towercap2Activity.onCreate(Towercap2Activity.java:68)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.Activity.performCreate(Activity.java:5104)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-07 08:59:32.976: E/AndroidRuntime(801):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-07 08:59:32.976: E/AndroidRuntime(801):  ... 11 more 
```

请告诉问题是什么以及如何避免这种情况。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:18:37.570

`cellLocation`一片空白！

[`getCellLocation()`](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getCellLocation%28%29)如果当前位置不可用，则返回 null。

你必须考虑到这种情况。

* * *

解释：

以这种方式考虑：您不能保证从中获得位置`getCellLocation()`（由于多种可能的原因，其中之一可能是连接不良）。因此，此函数可能会返回 null 而不是真正的`CellLocation`. 当它返回 null 并且您尝试`getCid()`在此 null 值上使用时，`NullPointerException`会抛出 a 并且您的应用程序崩溃。

* * *

解决方案：

```
int cid = 0;
int lac = 0;
if(cellLocation !=null) {

    cid = cellLocation.getCid();
    lac = cellLocation.getLac();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:24:15.093

只需检查这样的空值`GsmCellLocation`：

> ```
> if(cellLocation !=null) <---Add this null check.
>  {
>    int cid = cellLocation.getCid();
>    int lac = cellLocation.getLac();
>    textCID.setText("gsm cell id: " + String.valueOf(cid));
>    textLAC.setText("gsm location area_code"+String.valueOf(lac));
>               .....................................
>       ...................................
>  } 
> ```

# c++ - 来自 NtCreateFile 的 STATUS_INVALID_PARAMETER

> ID：14192887
> 
> 赞同：1
> 
> 时间：2013-01-07T09:15:29.427
> 
> 标签：c++, windows, winapi

这是我正在使用的代码：

```
std::wstring GetPathFromFileReference (DWORDLONG frn)
{
    if (frn != 0)
    {
        HANDLE handle = NULL;

        wchar_t file_buffer[2048] = { NULL };
        wchar_t unicode_buffer[8] = { NULL };
        UNICODE_STRING unicodeString;

        unicodeString.Length = 8;
        unicodeString.MaximumLength = 8;
        unicodeString.Buffer = unicode_buffer;

        OBJECT_ATTRIBUTES objAttributes = { NULL };
        InitializeObjectAttributes(&objAttributes, &unicodeString, OBJ_CASE_INSENSITIVE, _root, NULL); 

        IO_STATUS_BLOCK ioStatusBlock = { NULL };

        LARGE_INTEGER allocSize = { NULL };
        int _result = NtCreateFile(&handle, GENERIC_ALL /*FILE_TRAVERSE*/ /* FILE_READ_DATA */, &objAttributes, &ioStatusBlock, /*&allocSize*/  NULL , NULL, FILE_SHARE_READ | FILE_SHARE_WRITE, FILE_OPEN, FILE_OPEN_BY_FILE_ID | FILE_NON_DIRECTORY_FILE /*FILE_OPEN_FOR_BACKUP_INTENT*/, NULL, NULL);
        if (_result == S_OK)
        {
            typedef NTSTATUS (NTAPI *LPFN_NtQueryInformationFile) (HANDLE, PIO_STATUS_BLOCK, PVOID, ULONG, int);
            LPFN_NtQueryInformationFile pfnNtQueryInformationFile = (LPFN_NtQueryInformationFile)GetProcAddress(GetModuleHandle(L"ntdll.dll"), "NtQueryInformationFile");

            _result = pfnNtQueryInformationFile(handle, &ioStatusBlock, file_buffer, 4096, 9);
            if (_result == S_OK)
            {
                return std::wstring(file_buffer + 2);
            }
        }
    }
    return L"";
} 
```

调用`NtCreateFile`失败，出现`STATUS_INVALID_PARAMETER`. 该调用中注释掉的代码显示了我尝试过的其他事情。

RootDirectory 句柄肯定在 objAttributes 中设置（到 0x30）。我在代码的其他地方使用了相同的句柄，它运行良好。而且frn看起来也不错。

我不知道还有什么可以尝试或如何进一步缩小原因:(任何帮助将不胜感激。

编辑：我忘了提到我在这里想要实现的目标。对不起！frn 来自 USN Change Journal。我已经使用我的根句柄成功阅读了更改日志（因此我相信它是正确的），并且对于每个条目，我都有一个 frn 和 parent_frn。我想获取文件的完整路径，下面的代码是我尝试将 frn 转换为路径的方式。frn 和 parent_frn 都给出相同的`STATUS_INVALID_PARAMETER`返回码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:49:59.623

对[NtCreateFile](http://msdn.microsoft.com/en-us/library/bb432380%28v=vs.85%29.aspx)文档的评论说：

> 如果使用 FILE_OPEN_BY_FILE_ID，ObjectAttributes.RootDirectory 句柄必须填写卷的句柄，否则您将获得 STATUS_INVALID_PARAMETER。

要打开卷的句柄，您可以使用X 是驱动器`CreateFile`号的路径。`\\.\X:`请注意，没有尾随反斜杠。[CreateFile](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363858%28v=vs.85%29.aspx)文档有关于它的信息（查找字符串“Opens the C: volume.” ）

# wiki - 在 OpenERP v7 中删除的 wiki 模块是否有替代方案？

> ID：14192888
> 
> 赞同：2
> 
> 时间：2013-01-07T09:15:40.817
> 
> 标签：wiki, openerp

您可能已经注意到，该`wiki`模块已在 OpenERP v7 中删除。

问题是：有什么替代品呢？是否有任何可用的或正在开发的社区模块，提供 wiki（甚至降价）文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:25:05.537

对于它的价值，这里有一些关于我在评论中所说的话的更多信息。

在 OpenERP 7.0 中，wiki 模块已被重命名/修改为`document_page`模块。您可能会在 OpenERP 7.0[发行说明的最后一节（](http://v6.openerp.com/node/1269) [8.3 重命名模块](http://v6.openerp.com/node/1269#h.k5rq39nvqtb4)）中发现这一点。它现在使用一个简单的 WYSIWYG/HTML 编辑器并将页面存储为 HTML，而不是以前基于 wiki/markdown 的语法。因此，您可能会也可能不会将其视为真正的“wiki 替代品”。目标是让它更容易和更灵活地使用，有效地在 OpenERP 中提供一个极简的 CMS 系统：你可以使用它在你的常规 OpenERP 菜单（或你的 OpenERP 门户）中添加静态页面，在部分/类别中组织它们等.，使用可自由编辑的 HTML（如果需要，您可以编辑 HTML 源代码），同时保留它们的

请注意，最初 7.0 版本中的几个问题可能会暂时使文档页面的用户友好性低于应有的水平：所见即所得编辑器并非在所有情况下都在编辑模式下启用（现已修复），并且编辑器有时太窄（应该修复很快）。

在一个相关主题上，知道 OpenERP 7.0 通过新`pad`模块提供协作写作解决方案可能也很有趣，允许您在文档中嵌入[etherpad-lite pads。](http://etherpad.org/)它与`project`和`note`模块集成在一起，您也可以轻松地将其用于您自己的自定义模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:06:08.053

[OpenERP 知识插件](https://launchpad.net/knowledge-addons)具有一个[支持 MediaWiki 语法](http://bazaar.launchpad.net/~therp-nl/knowledge-addons/6.1/view/head:/wiki_wikimedia/__openerp__.py)的模块（目前仅适用于/已验证 v6.1）。

# wordpress - 当我尝试运行以下代码时，Wordpress 自定义菜单变为“待处理”

> ID：14192905
> 
> 赞同：1
> 
> 时间：2013-01-07T09:16:34.377
> 
> 标签：wordpress

在这里，我正在使用以下代码将已发布帖子的状态更改为**草稿**，其中帖子内容较少

```
function draftpost(){
    global $wpdb;
    $prefix = $wpdb->prefix;
    $wpdb->query("UPDATE ".$prefix."posts SET post_status='draft' WHERE LENGTH( post_content ) <500");
}
add_action('publish_post', 'draftpost'); 
```

此代码适用于将已发布项目更改为草稿。

问题是此代码删除了我的自定义菜单并使菜单中的所有项目都处于待处理状态。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:50:25.580

您需要扩展您的查询。

```
$wpdb->query("UPDATE ".$prefix."posts SET post_status='draft' WHERE LENGTH( post_content ) < 500 AND post_type = 'post'"); 
```

您的查询会覆盖所有 post_types，包括 nav_menu_item。

# triggers - 在 X 和 Y 小时之间每 N 周执行一次作业

> ID：14192906
> 
> 赞同：0
> 
> 时间：2013-01-07T09:16:35.273
> 
> 标签：triggers, cron, quartz-scheduler, quartz.net

我正在使用 Quartz.NET 库，我需要每两天执行一次作业，并在下午 22 点到早上 6 点之间每两小时重复一次。我不知道如何实现这一点。我尝试了所有将它们与日历相结合的触发器以排除其他时间，但没有按我的意愿工作。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:00:25.877

这就是答案。

```
 protected void Application_Start()
        { 
            //....
            EveryTwoWeek();
            //....
        }

        private void MainJob()
        {
            int hourNumber = 2;
            var schedFact = new Quartz.Impl.StdSchedulerFactory();

            var sched = schedFact.GetScheduler();

            sched.Start();

            var twoHourlyTriggerFrom22To6 = Quartz.TriggerUtils.MakeHourlyTrigger(hourNumber);
            twoHourlyTriggerFrom22To6.StartTimeUtc = System.DateTime.Now.Date.AddHours(22);
            twoHourlyTriggerFrom22To6.EndTimeUtc = System.DateTime.Now.Date.AddHours(22 + 8);

            var jobDetail = new Quartz.JobDetail("Method", methodType);
            sched.ScheduleJob(jobDetail, twoHourlyTriggerFrom22To6);
        }

        private void EveryTwoDays()
        {
            int dayNumber = 2;
            var schedFact = new Quartz.Impl.StdSchedulerFactory();

             var sched = schedFact.GetScheduler();

             sched.Start();

             var everyTwoDaysTrigger = Quartz.TriggerUtils.MakeImmediateTrigger(int.MaxValue, new System.TimeSpan(0, dayNumber * 24, 0, 0));

             everyTwoDaysTrigger.StartTimeUtc = System.DateTime.Now.Date;

             var jobDetail = new Quartz.JobDetail("MainJob", mainJobType);

             sched.ScheduleJob(jobDetail, everyTwoDaysTrigger);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:48:59.060

那么**0 0 0,2,4,6,22 1/2 * 呢？***

严格来说，这不是每两天一次，而是在每个月的第一天、第三天、第五天等。

# objective-c - 如何在核心数据中获得所有一对多关系

> ID：14192912
> 
> 赞同：0
> 
> 时间：2013-01-07T09:16:49.677
> 
> 标签：objective-c, xcode, core-data

```
NSArray * relationships = [entity.relationshipsByName allKeys]; 
```

将返回所有关系。

如果我只想要一对多的关系呢？那是支持选择器计数的关系。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:30:02.020

如果遍历`NSDictionary`返回的 by `entity.relationshipsByName`，则每个值都是`NSRelationshipDescription`具有属性的实例`isToMany`。您只能提取该属性为真的关系吗？

# java - 有没有办法验证数据在发送到 Web 服务（使用 HTTP 连接）期间是否未更改？

> ID：14192914
> 
> 赞同：4
> 
> 时间：2013-01-07T09:16:51.203
> 
> 标签：java, android, web-services, hash

我正在开发一个将数据发送到我的 Web 服务并将它们存储在我的数据库中的 Android 项目。我正在使用 HTTP 协议连接到我的网络服务。使用 JSON 作为数据格式。

我将数据和这些数据的 HASH (SHA256) 发送到 Web 服务。

> 在将数据存储到数据库之前，我使用 HASH 验证我发送的（数据）是否等于 Webservice 接收的。如果没有，我会发送一条错误消息。

有时 HASH 的值不同会导致错误消息，并且没有数据存储在数据库中

> 所以我的问题是：是否有另一种方法来验证数据在发送操作期间是否未更改？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T09:26:04.797

哈希似乎适用于您的场景，因为您可以很好地检测到数据修改。

但是哈希可以与数据一起更改，因此这不是针对恶意攻击者的安全措施。如果您关心安全性，您可能会对[WS-Security](http://en.wikipedia.org/wiki/WS-Security)感兴趣。

本质上，您必须使用加密通道 (HTTPS) 或签署您的消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T08:39:10.507

如果您不信任该频道 - 您应该使用 HTTPS。就这样。尝试建立自己的完整性验证机制就是尝试设计自己的安全协议，这是您最不想做的事情。

在任何情况下，您使用的未加密哈希（如 SHA256）是不够的。能够修改消息的对手也能够重新计算修改后的文本的哈希值并将其与消息一起发送。您需要一个更强大的原语：MAC（消息验证码）[http://en.wikipedia.org/wiki/Message_authentication_code](http://en.wikipedia.org/wiki/Message_authentication_code)

HTTPS 为您提供这些以及更多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T09:53:18.673

`Hashing techniques`将是这里的最佳选择。

您可以使用任何散列算法，如`HmacSHA1`or`MD5`等​​。

当您使用`Post`or将数据传递到服务器`Get`时，首先，使用任何散列算法从数据中创建一个令牌。（请参阅下面将数据转换为 HMAC SHA1 的函数）

当您传递此数据时，将令牌也传递给服务器。现在服务器也将使用与客户端相同的散列算法，服务器将根据请求传递的数据创建令牌。

之后，服务器将生成的令牌与随请求传递的令牌相匹配。

如果两个令牌都匹配，则与请求一起传递的数据不会被篡改，否则数据会被篡改。

您可以使用以下方法为您的数据创建令牌：

```
 /**
     * Encrypts the data passed to it using Hmac-SHA1.
     * 
     * @param dataToEncrypt
     *            data that is to be encrypted.
     * @return The token that is generated after encrypting data.
     */
    public static String convertDataToHmacSHA1(final String dataToEncrypt) {
        String returnString;
        try {
            // Get an hmac_sha1 key from the raw key bytes
            final byte[] keyBytes = HMAC_SHA1_KEY.getBytes();
            final SecretKeySpec signingKey = new SecretKeySpec(keyBytes,
                    "HmacSHA1");

            // Get an hmac_sha1 Mac instance and initialize with the signing key
            final Mac mac = Mac.getInstance("HmacSHA1");
            mac.init(signingKey);

            // Compute the hmac on input data bytes
            final byte[] rawHmac = mac.doFinal(dataToEncrypt.getBytes());

            final StringBuffer stringBuffer = new StringBuffer();
            for (byte b : rawHmac) {
                stringBuffer.append(String.format("%02x", b));
            }
            returnString = stringBuffer.toString();
            Log.e("Token", returnString);
            return returnString;
        } catch (Exception e) {
            Log.e(TAG, "" + e);
        }
        return returnString;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T09:30:18.373

目前您使用哈希来验证数据的完整性 - 假设您在两端使用完全相同的哈希，这意味着您正在获取损坏的数据。

而不是仅仅检测数据损坏，您可以将数据编码为[纠错码](http://en.wikipedia.org/wiki/Forward_error_correction)，以便您可以在接收端重建原始数据，即使它在途中被损坏

您可以在这个问题的答案中找到这样的库 - [Java: ECC (error correction code) library?](https://stackoverflow.com/questions/2921599/java-ecc-error-correcting-code-library)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T09:44:21.797

我觉得你的方法很好。

您有一个重要的解决方案，分 3 步：第 1 步：将数据发送到 android 第 2 步：android 接收数据并通知 Web 服务器他得到了什么第 3 步：服务器检查每个字段并通知 android，如果 orverall 正确与否.

但我认为这个解决方案对于大多数情况来说太重了，如果有其他解决方案，它是为了回答你的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T16:16:28.270

您是否需要读回数据，如果不只是散列一次并比较散列。

根据散列错误的频率，您是否可以在错误消息之前给应用程序五次尝试使其正确。

你试过其他算法，比如 md5、成熟或 crc 吗？也许他们更有效率。

根据我对小字符串的经验，我使用 crc，但对于登录详细信息，我使用 sha256 或 sha512，我只是散列密码并比较散列。那么你的数据库中就没有密码了。

希望这可以帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T08:21:12.517

如果我错了，请纠正我，但是您正在散列以尝试检测两件事之一。

1.  检测“中间人攻击”。(MITM)[请参阅此处了解更多信息](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)。
2.  检测不可靠的网络。

[@Samuel Edwin Ward](https://stackoverflow.com/users/894885/samuel-edwin-ward)和[@radai](https://stackoverflow.com/users/262022/radai)正在谈论[上面](https://stackoverflow.com/a/14193129/828858)的这两个。

这两个问题都有相当好的现有解决方案，不涉及您明确地散列您的数据。

首先，为了降低 MITM 攻击的可能性，请使用[HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure)。客户端可以放心地确定服务器的身份，并且在防止窃听方面也做得相当好。

其次，要解决您对不可靠网络的担忧，请使用[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol) ...

> TCP 提供从一台计算机上的程序到另一台计算机上的另一个程序的可靠、有序的八位字节流传递。[维基百科](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)

我猜你没有做任何特别的事情（比如使用 UDP 网络或其他东西），并且你的 Web 服务已经使用了 TCP。

您在哈希比较中看到的问题可能是由于您的应用程序逻辑中的假设不正确。我建议您比较错误事物的哈希值。

作为想到的众多示例之一，一些 Web 服务器会在处理 HTTP 请求时添加内容。例如，这就是代理的工作方式。在比较设备发送的 HTTP 请求的哈希值和 Web 服务器最终接收的 HTTP 请求的哈希值时，这会给您不同的结果。

我建议您阅读我提供的内联链接，以确保您对损坏数据的担忧已在很大程度上通过现有解决方案得到解决。如果不是，至少你会更好地理解为什么你觉得你需要散列你的数据。:)

# android - Galaxy s3 上的媒体播放器 1004 错误

> ID：14192918
> 
> 赞同：7
> 
> 时间：2013-01-07T09:17:01.393
> 
> 标签：android, android-mediaplayer

我有一个显示来自网络的内容的视频视图。当我在带有 Android 4.2 的 nexus 7 上播放时，它运行良好，但是当我在 GS3 上播放时，我返回错误 1004 IO 错误。有谁知道为什么会这样？

如果您需要代码，我将在此处发布。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T12:36:55.967

我遇到过同样的问题。我试图流式传输音频并在我的应用程序中播放它，但我只在三星设备上遇到了同样的错误。我认为他们已经修改了 Android 媒体播放器核心，这导致了一些问题。

我为解决方案所做的是，我正在检查设备的制造商是否是三星并弹出一个对话框窗口，说明您的设备不支持流媒体。我下载音频，然后播放下载的音频。

我需要一个紧急的解决方案，但找不到更好的解决方案。希望能帮助到你。

# clojure - Clojure koans: (if false []) vs (if false [:a :b :c])

> ID：14192921
> 
> 赞同：1
> 
> 时间：2013-01-07T09:17:09.283
> 
> 标签：clojure

这周我开始学习 Clojure。我正在研究条件公文，但不理解以下断言：

```
 "Some of them leave you no alternative"
  (= [] (if (> 4 3)
      []))

  "And in such a situation you may have nothing"
  (= nil (if (nil? 0)
      [:a :b :c])) 
```

第二个做了我所期望的——条件评估为假——[编辑：实际上，这是真的，我只是还不习惯“操作员优先”的推理！]，`if`试图返回第二个选择，发现无，所以返回`nil`。那么，为什么第一个不返回`nil`？是因为空结构“足够接近”零吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:20:38.010

因为第一个`if`计算结果为真（因为 4 确实大于 3），所以 else 子句是不相关的。它返回定义并等于 的 then 子句`[]`。

# android - 如何让两个EditTexts同步滚动

> ID：14192923
> 
> 赞同：0
> 
> 时间：2013-01-07T09:17:29.703
> 
> 标签：android, android-edittext, synchronous

我想将两个 EditText 控件放在一个 LinerLayout 中。并把它们一左一右。

现在想实现这样一个功能：当右边的EditText上下文上下滚动时，左边的edittext内容也同步滚动。

这该怎么做？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:30:56.333

两个想法：

1.  将 this`LinearLayout`与两个`EditText`s 放在 a`ScrollView`中。
2.  `EditText`继承 after `View`，它有方法`scrollTo()`和`onScrollChanged()`。覆盖`onScrollChanged()`第一个`EditText`，您将在其中调用`scrollTo()`第二个`EditText`。

# ruby-on-rails - Ruby on Rails 错误：无效的连接“适配器”

> ID：14192931
> 
> 赞同：0
> 
> 时间：2013-01-07T09:17:57.833
> 
> 标签：ruby-on-rails, ruby

我正在使用 Ruby on Rails（rails 版本 2.3.4），并在 Windows 上使用 pg gem（版本 0.12.2）。我的 database.yml 文件有以下内容：

```
production:
  adapter: postgresql
  encoding: utf8
  host: localhost
  database: canvas4
  username: canvas
  password: canvas
  port: 5433
  timeout: 5000
  pool: 5
  queue:
    adapter: postgresql
    encoding: utf8
    database: canvas4_queue
    host: localhost
    port: 5433
    username: canvas
    password: canvas
    timeout: 5000
    pool: 5 
```

但是当我运行 command:`bundle exec rake db:initial_setup RAILS_ENV=production`时，会发生错误：

`Invalid connection "adapter"`

我也尝试过，`gem "activerecord-postgresql-adapter"`但出现与上述相同的错误。

我可以使用 sqlite3 驱动程序成功设置。

你知道如何让 postgresql 适配器与 rails 2.3 一起工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:01:21.847

确保您在 database.yml 中的 db-adapter 设置为“postgresql”。如果您仍然有同样的问题，请尝试使用纯红宝石适配器：

宝石安装 postgres-pr

（确保在...之前卸载 pg gem 以避免冲突）

如果它有效，那么这是 postgres gem 的问题。无论如何，出于开发目的，使用纯红宝石宝石通常是可以的。

# c++ - 模板非类型参数

> ID：14192936
> 
> 赞同：11
> 
> 时间：2013-01-07T09:18:34.763
> 
> 标签：c++, templates, c++11, arguments, linkage

> > $14.3.2 - “...非类型、非模板模板参数的模板参数应为以下之一：
> 
> ...一个常量表达式 (5.19) 指定具有静态存储持续时间和**外部或内部**链接的对象的地址或具有外部或内部链接的函数..."

在下面显示的代码中，我无法理解为什么不允许将“name2”和“name3”作为非类型模板参数。我在 Windows 上使用 gcc 4.7.2。

'name2' 和 'name3' 都是数组的名称，因此是常量表达式。此外，“name2”具有内部链接，“name3”具有静态链接和内部链接。

```
template<char const *p> void f()
{

}

char name1[] = "Hi";
static char name2[]= "Hi";
const static char name3[]= "Hi";
char *name4 = "Hi";

int main()
{
    f<name1>();
    f<name2>();
    f<name3>();
    f<name4>();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:07:02.537

正如@Nawaz 正确猜测的那样，这是一个实现错误，而不是标准的深奥角落。

具体来说，gcc 似乎遇到了麻烦。除了最后一个`name4`违反标准的之外，其余的都可以用[clang编译](http://liveworkspace.org/code/JDZqy%2450)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T10:12:39.687

我认为问题在于您使用的表达式实际上不是指针而是数组，并且指针衰减仅适用于`name1`. 这很可能是编译器错误，正如@KonradRudolph 在评论中指出的那样，C++11 标准的第 14.3.2 节允许它，并且`name1`,`name2`和`name3`.

作为一种解决方法，以下将使用 GCC 4.7.2 编译`-std=c++11`：

```
template<char const *p> void f()
{
}

char name1[] = "Hi";
static char name2[]= "Hi";
const static char name3[]= "Hi";

int main()
{
    f<(char const*)&name1>();
    f<(char const*)&name2>();
    f<(char const*)&name3>();
} 
```

在 C++98 模式下它不会编译，因为强制转换的结果永远不是常量表达式，而在 C++11 中它可能是。

# c# - Getting IObservable object as response to POST request, how can I get the string itself?

> ID：14192943
> 
> 赞同：2
> 
> 时间：2013-01-07T09:19:12.193
> 
> 标签：c#, windows-phone, windows-phone-8

I'm using this code snippet to send POST request:

```
public IObservable<string> BeginPost(Uri uri, string postData)
{
    var request = HttpWebRequest.CreateHttp(uri);
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";

    var fetchRequestStream = Observable.FromAsyncPattern<Stream>(request.BeginGetRequestStream, request.EndGetRequestStream);
    var fetchResponse = Observable.FromAsyncPattern<WebResponse>(request.BeginGetResponse, request.EndGetResponse);
    return fetchRequestStream().SelectMany(stream =>
    {
        using (var writer = new StreamWriter(stream)) writer.Write(postData);
        return fetchResponse();
    }).Select(result =>
    {
        var response = (HttpWebResponse)result;
        string s = "";
        if (response.StatusCode == HttpStatusCode.OK)
        {
            using (var reader = new StreamReader(response.GetResponseStream())) 
                s = reader.ReadToEnd();
        }
        return s;
    });
} 
```

I'm new to C# and I don't really understand why do I have to use this `IObservable` interface. I was trying to find any information about it on the internet, but I couldn't.

What I really need is to get reponse from webservice as a `string` and in the example I gave, what I get is `IObservable<string>`. So basically, how can I get my `string` from it?

I know this is a bit silly question, but I would also appreciate any links to sites where I could read more about this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:17:02.717

You do not have to use an IObservable. I suppose you got this code from someone working with [Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx). The idea behind this is, that you subscribe to this "event" and each time the request is made a string is send to you. For more info on Reactive Extensions, see the answers to this question [Reactive Extension (Rx) tutorial that is up to date](https://stackoverflow.com/questions/10011369/reactive-extension-rx-tutorial-that-is-up-to-date)

If you do not want to use the Reactive Extensions, I recommend using [RestSharp](http://restsharp.org/). It is a nice library that also works with Windows Phone and you can find many samples on how to use it.

# html - 对齐 inline-block 元素

> ID：14192944
> 
> 赞同：0
> 
> 时间：2013-01-07T09:19:14.373
> 
> 标签：html, alignment, css

看到这个小提琴：[JSfiddle](http://jsfiddle.net/ghpwD/4/)

最后一个`div`是`id="3"`留在底部。我想做的是把它`<div id="3">`带到底部`<div id="2">`，右边`<div id="1">`

我怎样才能正确对齐？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:26:02.940

没什么可做的。只需`<div id="1"..>`设置`float:left`并删除显示属性即可。

```
<div style="float:left;border:1px solid gray;width:48%;word-wrap:break-word;" id="1"> 
```

[**演示**](http://jsfiddle.net/ghpwD/5/)

建议：`ID's`不应该以数字开头。请将您的 id 名称更改为单词。

# java - Apache POI 是否可以向 Microsoft Word 添加/删除水印

> ID：14192947
> 
> 赞同：1
> 
> 时间：2013-01-07T09:19:18.993
> 
> 标签：java, ms-word, apache-poi

是否可以通过 Apache POI 在 Microsoft Word 2010 中添加/删除图像水印？我应该将其视为普通图像还是任何特殊处理？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:33:21.077

我认为您可以创建水印。请参阅[XWPFHeaderFooterPolicy 的 api 文档](http://poi.apache.org/apidocs/org/apache/poi/xwpf/model/XWPFHeaderFooterPolicy.html)。那里有一种方法叫做`createWatermark`. 然而，这仅适用于文本水印。

# jquery - sloeddown效果中div显示的一半高度？

> ID：14192948
> 
> 赞同：1
> 
> 时间：2013-01-07T09:19:19.033
> 
> 标签：jquery, animation, slidedown

我有一个高度为 100 像素的 div，它隐藏在页面加载中。当我单击另一个链接时，我想通过仅使用 show() 突然显示其高度的一半（50px），其余 50px 应该以向下滑动的效果显示。怎么可能，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:21:21.833

不知何故，可能是这样的：

```
$("#linkClick").click(function() {
    $("#yourDiv").css("height", "50px");
    $("#yourDiv").show();
    $("#yourDiv").slideDown();
}); 
```

希望能帮助到你。

# facebook-graph-api - 如何获取所需的访问令牌？

> ID：14192951
> 
> 赞同：0
> 
> 时间：2013-01-07T09:19:26.950
> 
> 标签：facebook-graph-api, access-token

直到几天前，我用来为我自己的 Facebook 新闻提要生成 RSS 提要的 Python 脚本运行良好。我使用的脚本首先使用我的登录信息登录到 Facebook，然后调用此页面并将其解析为访问令牌：

[http://developers.facebook.com/docs/reference/api](http://developers.facebook.com/docs/reference/api)

我不确定这是否正是 Facebook 希望人们获取访问令牌的方式，但通读 Graph API 上的所有信息，我似乎找不到任何内容，“这是获取访问令牌所需的方法你自己的东西。” 这一切似乎都是针对那些试图做更精彩的事情的人。

如何获取访问令牌，以便此处引用的页面返回我需要的 JSON 格式数据？

res = browser.open('https://graph.facebook.com/me/home?access_token=%s' % acct)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:48:34.787

1.  首先阅读有关[访问令牌](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)的信息，因为有不同的类型。
2.  然后，要阅读用户新闻提要（[家庭连接](https://developers.facebook.com/docs/reference/api/user/#home)），您需要一个*用户`access_token`*
3.  要使用服务器端方法检索一个，您需要遵循此[文档](https://developers.facebook.com/docs/howtos/login/server-side-login/)
4.  要了解服务器端方法的流程，您可以参考此图（来源：[登录架构文档](https://developers.facebook.com/docs/concepts/login/login-architecture/)）：
    ![在此处输入图像描述](../Images/cc93601f7b1f0cccfbc01f4043352539.png)

# ruby - 在两个平台之间开发时的 Gemfile

> ID：14192952
> 
> 赞同：2
> 
> 时间：2013-01-07T09:19:42.090
> 
> 标签：ruby, ruby-on-rails-3, windows-7, if-statement, gemfile

我正在 Windows 机器和 linux 机器之间开发 Ruby on Rails 应用程序。不理想，但 Windows 上的 Ruby 改进了很多。无论如何，我读到你可以实现一个 IF 语句，例如我已经实现了这个

```
 source 'https://rubygems.org'

 if RUBY_PLATFORM =~ /win32/

 gem 'rails', '3.2.3'
 gem 'sqlite3'

 group :assets do
 gem 'sass-rails',   '~> 3.2.3'
 gem 'coffee-rails', '~> 3.2.1'
 gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
 gem 'uglifier', '>= 1.0.3'
 end

 gem 'jquery-rails'
 gem 'nokogiri'
 gem 'httparty'
 gem 'devise'

 else

gem 'rails', '3.2.3'
gem 'sqlite3', '1.3.6'

group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
gem 'less-rails'
gem 'uglifier', '>= 1.0.3'
gem 'execjs'
gem 'therubyracer', '0.10.2'
end

gem 'jquery-rails'
gem 'nokogiri'
gem 'httparty'
gem 'devise'

end 
```

所以今天早上我将我的 linux 分支合并到 master 分支（windows）中，现在我收到了消息

```
Could not find the less-rails in any of the sources 
```

因此，当我在我的 linux 分支中使用它时，似乎 IF 语句不起作用或者资产中的 bootstrap.css.less 文件存在问题

我怎样才能让它工作，所以要么在两个平台上少工作，要么让 Windows 忽略更少的宝石

有没有人解决过这个问题

更新

好的，所以我发现如果我指定

```
:platform => :ruby 
```

由于 js 运行时冲突，在 less-rails gem 之后它忽略了它（尽管我不得不添加到 execjs 和 ruby​​racer 中）。所以关于我的 IF/ELSE 语句有什么问题的问题仍然存在

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:48:07.767

您是否重建了捆绑锁定文件？

在你的 Windows 机器上试试这个：

```
bundle install
bundle update 
```

要了解 bundle、Gemfile、Gemfile.lock 以及为什么在切换平台时需要重建锁：http: [//gembundler.com/rationale.html](http://gembundler.com/rationale.html)

# mysql - 如何拆分字符串并将第二部分插入另一列

> ID：14192955
> 
> 赞同：0
> 
> 时间：2013-01-07T09:20:00.973
> 
> 标签：mysql

我有一列包含以下格式的字符串：`strin1/string2`. 我需要`string2`参与并将其插入另一列，`string3`. 我知道`substr( )`函数，但这个函数需要我知道字符的索引 & 在我的情况下，这是不知道的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:22:02.597

```
substr(col, instr(col, '/')+1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:32:20.080

```
SELECT SUBSTRING_INDEX('string1/string2','/',-1); 
```

像那样？？？？

# jquery - 单击子图像链接转到父背景图像链接

> ID：14192957
> 
> 赞同：0
> 
> 时间：2013-01-07T09:20:10.410
> 
> 标签：jquery, css

我有这个页面： [http ://test.actful.com/demo/actfulhome-hovertile2.html](http://test.actful.com/demo/actfulhome-hovertile2.html)

我们在此页面上平铺了图像，并且在悬停时，每个平铺上都会显示一些图标。背景有一个链接，每个图标都有自己的链接（目前只有“#”），背景链接打开一个模式并显示一个页面。目前，当我单击图标时，背景链接有效并且模式打开。我不希望背景链接在点击图标上的链接时生效。我该如何做到这一点。我尝试为背景设置较低的 z-index 属性，为图标设置较高的 z-index 属性，但这并没有解决问题。我该如何解决这个问题？

您可以查看 html 页面的源代码，但让我更具体一点

以下是每个图块的代码：

```
 <div class="contenthover actfulModalButton">
                  <div>
                    <div class="four columns icon-align-center align-left"><a class="tile-icon-link" href="#"><img class="tile-icon-images" src="images/ActfulIcons_ActfulFBIcon.svg" alt="Face Book"/></a></div>
                    <div class="four columns icon-align-center align-center"><a class="tile-icon-link" href="#"><img class="tile-icon-images" src="images/ActfulIcons_ActfulKangarooIcon.svg" alt="Actit"/></a></div>
                    <div class="four columns icon-align-center align-right"><a class="tile-icon-link" href="#"><img class="tile-icon-images" src="images/ActfulIcons_actfulCommentsIcon.svg" alt="Comments"/></a></div>
                  </div>
                  <div class="button-bottom">
                    <button data-act-itemid="100" class="small button actfulModalButton">View Details</button> 
                  </div>
                </div> 
```

底部的 jquery 代码后面的 jquery 在页面加载时为“actfulModalButton”（父背景 div）创建了一个链接：

```
 $(".actfulModalButton").click(function() {      
     var itemid = $(this).attr('data-act-itemid');
     $("#actItemFrame").attr('src', 'actful-item-details.html?actitemid='+itemid);
     $("#actItemModal").reveal();   
   }); 
```

我希望这有帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:57:20.317

```
$(".actfulModalButton").click(function(event) {
  event.stopPropagation(); // this code will prevents the event from bubbling up the DOM tree, preventing any parent handlers from being notified of the event.
  var itemid = $(this).attr('data-act-itemid');
  $("#actItemFrame").attr('src', 'actful-item-details.html?actitemid='+itemid);
  $("#actItemModal").reveal();   
}); 
```

**[更新]**

我现在明白你想要什么了。

您只需要添加以下内容，并保持您的代码不变：

```
$(".actfulModalButton a.tile-icon-link").click(function(event) {
  event.stopPropagation(); // this code will prevents the event from bubbling up the DOM tree, preventing any parent handlers from being notified of the event. 
}); 
```

# logging - 为什么在应用程序启动时会记录空的 org.eclipse.persistence 消息？

> ID：14192962
> 
> 赞同：0
> 
> 时间：2013-01-07T09:20:12.767
> 
> 标签：logging, eclipselink, jboss7.x

## 使用

*   EclipseLink 2.4.1
*   JBoss AS 7.1.1

## 问题

我开发了一个使用 EclipseLink 进行持久性的 servlet。

当应用程序启动时，我在服务器日志中重复多次收到以下消息：

```
12:17:45,586 WARN  [org.eclipse.persistence.metadata] (MSC service thread 1-1) Reverting the lazy setting on the OneToOne or ManyToOne attribute [CategoryCode] for the entity class [class se.magos.domain.Site] since weaving was not enabled or did not occur.
12:17:45,825 INFO  [org.eclipse.persistence.connection] (MSC service thread 1-1) vfs:/C:/Dev/Applications/JBoss/jboss-as-7.1.1.Final/standalone/deployments/Ear.ear/Persistence-1.0-SNAPSHOT.jar/_foo login successful
12:17:45,891 WARN  [org.eclipse.persistence] (MSC service thread 1-1)
12:17:45,894 WARN  [org.eclipse.persistence] (MSC service thread 1-1) 
12:17:45,896 WARN  [org.eclipse.persistence] (MSC service thread 1-1) 
12:17:45,898 WARN  [org.eclipse.persistence] (MSC service thread 1-1) 
12:17:45,900 WARN  [org.eclipse.persistence] (MSC service thread 1-1) 
...and it goes on and on...
12:17:46,091 WARN  [org.eclipse.persistence] (MSC service thread 1-1) 
12:17:46,093 WARN  [org.eclipse.persistence] (MSC service thread 1-1) 
12:17:46,097 WARN  [org.eclipse.persistence] (MSC service thread 1-1) 
12:17:46,236 INFO  [org.jboss.as] (MSC service thread 1-3) JBAS015951: Admin console listening on http://127.0.0.1:9990 
```

它接近域和服务对象的计数并且组合但不准确。

此日志消息的原因可能是什么，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:36:17.030

JBoss AS 7 不使用 EclipseLink 作为它的 JPA 实现。它默认使用休眠。然而，有[一篇文章](https://community.jboss.org/wiki/HowToUseEclipseLinkWithAS7)解释了如何将 EclipseLink 与 JBoss AS 7 一起使用。

但是，我鼓励您使用 JPA，因为它比使用供应商特定的 JPA 实现更便携。

# spring-mvc - 在春天打开一个弹窗

> ID：14192966
> 
> 赞同：6
> 
> 时间：2013-01-07T09:20:18.373
> 
> 标签：spring-mvc

我有控制器通过它导航到`home.jsp`主页.jsp 现在有两个按钮`FindEmployeeByid` `FindEmployeeByName`，因为我点击 FindEmployeeByid 新弹出窗口已打开，但在弹出窗口中我收到此消息`The requested resource (/EmployeeWebSpring/search/Search.jsp) is not available.`，因为在 Search.jsp 中我使用了 spring 的表单标签所以它无法获取模型对象，所以请告诉我如何执行此操作以打开一个输入字段处于活动状态的弹出窗口，以便我可以提交数据并对该数据执行一些操作

这是我的控制器

```
 package com.nousinfo.tutorial.controllers;

import java.util.List;

import org.springframework.stereotype.Controller;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.nousinfo.tutorial.model.EmployeeForm;
import com.nousinfo.tutorial.service.impl.EmployeeServiceImpl;
import com.nousinfo.tutorial.service.model.EmployeeBO;

@Controller
@RequestMapping("/search")
public class SearchEmployeeController {

    private EmployeeServiceImpl employeeServiceImpl;

    public void setEmployeeServiceImpl(EmployeeServiceImpl employeeServiceImpl) {
        this.employeeServiceImpl = employeeServiceImpl;
    }

    @RequestMapping(value = "/searchspring", method = RequestMethod.GET)
    public String view(@Validated EmployeeForm employeeForm)
            throws Exception {
    return "home";
    }

    @RequestMapping(value = "/employeeNo", method = RequestMethod.POST)
    public ModelAndView searchByEmpNo(
            @ModelAttribute("employeeForm") EmployeeForm employeeForm)
            throws Exception {
        ModelAndView model = new ModelAndView();
        model.addObject("employeeForm", employeeForm);
        Long i = Long.parseLong(employeeForm.getEmployeeNumber());

        EmployeeBO employeeBO = employeeServiceImpl.getEmployee(i);
        System.out.println(employeeBO);
        model.addObject("employeeBO", employeeBO);

        model.setViewName("EmployeeDetail");
        return model;
    }

    @RequestMapping(value = "/empByName", method = RequestMethod.POST)
    public ModelAndView searchByEmployeeName(
            @ModelAttribute("employeeForm") EmployeeForm employeeForm) {
        ModelAndView model = new ModelAndView();
        model.addObject("employeeForm", employeeForm);
        List<EmployeeBO> employeeBOs = employeeServiceImpl
                .findEmployees(employeeForm.getFirstName());
        model.addObject("listEmployeeBO", employeeBOs);
        model.setViewName("EmployeeList");
        return model;

    }

    @RequestMapping(value = "/empByDeptId", method = RequestMethod.POST)
    public ModelAndView searchByDeptId(
            @ModelAttribute("employeeForm") EmployeeForm employeeForm) {
        ModelAndView model = new ModelAndView();
        model.addObject("employeeForm", employeeForm);
        List<EmployeeBO> employeeBOs = employeeServiceImpl
                .getAllEmployeeByDeptid(employeeForm.getDepartmentId());
        model.addObject("listEmployeeBO", employeeBOs);
        model.setViewName("EmployeeList");

        return model;

    }

} 
```

这是我的家.jsp

```
 <%@page import="java.util.List"%>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" href="css/style.css" type="text/css"></link>
<link rel="stylesheet" href="css/styles.css" type="text/css"></link>
<title>Home</title>
<script type="text/javascript">
    function LoadByName(windowHeight, windowWidth) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        newWindow = window.open('Search.jsp', 'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight);
        newWindow.divHiding(1);
        newWindow.focus();
    }
    function LoadById(windowHeight, windowWidth) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        newWindow = window.open('Search.jsp', 'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight);
        newWindow.divHiding(2);
        newWindow.focus();
        return newWindow.name;
    }

    function loadName(name) {
        this.firstName = name;
        window.location = 'http://localhost:8080/EmployeeWebApp/GetEmployeeServlet?key1='
                + encodeURIComponent(firstName);
    }
    function loadId(id) {
        this.id = id;
        window.location = 'http://localhost:8080/EmployeeWebApp/GetEmployeeServlet?key2='
                + encodeURIComponent(id);
    }
</script>
</head>
<table width="951" height="116" border="0" align="center">
    <tr>
        <td width="961" height="112" align="center" bgcolor="#99CCFF"><h2>NOUS
                INFOSYSTEMS</h2></td>
        <td width="266" height="112" align="center" bgcolor="#FFFFFF"><img
            src="image/emps.jpg" alt="1" width="266" height="84" /></td>
    </tr>
</table>

<p>&nbsp;</p>
<table width="949" height="183" border="0" align="center">
    <tr>
        <td width="943" height="43"><input id="findid" name="button"
            type="submit" value="Find Employee By Number or ID"
            onClick="LoadById(250,500)" /></td>
    </tr>
    <tr>
        <td height="43"><input id="findname" name="submit2" type="button"
            value="Find Employee By Name" onClick="LoadByName(250,500)" /></td>
    </tr>
    <tr>
        <td><form id="form2" action="get.spring" method="get">
                <input type="submit" name="submit3" value="Get All Employees" />
            </form></td>
    </tr>
    <tr>
        <td><form id="form3" action="CreateEmployee.jsp">
                <input type="submit" name="submit3" value="Create An Employee" />
            </form></td>
    </tr>
</table>
<p>&nbsp;</p>
<br>
<br>
<body>
    <form>
        <table width="725" border="1" align="center" cellpadding="5"
            cellspacing="5">
            <tr>
                <th width="118">EmployeeNumber</th>
                <th width="118">First Name</th>
                <th width="118">Last Name</th>
                <th width="118">Title</th>
                <th width="118">Address1</th>
                <th width="118">Address2</th>
                <th width="118">City</th>
                <th width="118">Details</th>
            </tr>
            <c:forEach var="employeeBO" items="${model.listEmployeeBO}">
                <tr>

                    <td>${employeeBO.employeeNumber}</td>

                    <td>${employeeBO.firstName}</td>

                    <td>${employeeBO.lastName}</td>

                    <td>${employeeBO.title}</td>

                    <td>${employeeBO.address1}</td>

                    <td>${employeeBO.address2}</td>

                    <td>${employeeBO.city}</td>

                </tr>
            </c:forEach>

        </table>
        <table>
            <tr>

                <td></td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

这是我的 search.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>

<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<fmt:setBundle basename="ApplicationResources" />
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Employee Search Page</title>

</head>
<body>
    <form:form action="/EmployeeWebSpring/search/empByName"  commandName="employeeForm" method="post">
        <table border="0">

            <tr>
                <td>Employee_ID</td>
                <td><form:input path="employeeNumber"  /></td>
                <td><input type="submit" name="method" value="FindById" /></td>
            </tr>
            <tr>
                <td>Employee_Name</td>
                <td><form:input path="firstName" /></td>
                <td><input type="submit" name="method" value="FindByName" /></td>
            </tr>

            <tr>
                <td>Employee_Name</td>
                <td><form:input path="departmentId" /></td>
                <td><input type="submit" name="method" value="FindByDeptNO" /></td>
            </tr>
            <tr>
                <td colspan="2" align="center"><font size=3>For
                        Searching the employees by<b>Employee Name</b><br />you can use %
                        match all the records with the given pattern
                </font><br /> <font size="2"> <i>e.g <b> for search by</b>EmployeeName<br />
                            matches alL the employees whose name starts with character <b>S</b></i></font></td>
            </tr>
        </table>
    </form:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:00:05.610

您可以在java脚本中执行以下操作并运行您的java脚本函数，因为您的函数运行它控制控制器，您可以提供jsp视图或任何视图

```
<script>
    function popup() {
        window.open("../popup/searchspring", 'window', 'width=200,height=100');
    }
</script> 
```

在控制器中你必须做这样的事情，这会将你的请求导航到所需的页面，因为在 spring 控制器中决定视图页面的导航

```
 @RequestMapping(value = "/searchspring", method = RequestMethod.GET)
    public String view(Model model) throws Exception {
        EmployeeBO employeeBO = new EmployeeBO();
        model.addAttribute("employeeBO", employeeBO);
        return "EmployeeForm";
    } 
```

# php - openssl_pkcs7_sign 在签署 Passbook 的通行证文件时不返回任何内容

> ID：14192973
> 
> 赞同：1
> 
> 时间：2013-01-07T09:20:40.973
> 
> 标签：php, openssl, passbook

```
openssl_pkcs7_sign('manifest.json', 'signature', $certdata, $privkey, array(), PKCS7_BINARY | PKCS7_DETACHED, 'AppleWWDRCA.pem'); 
```

它会生成一个空的签名文件并且没有错误消息。

但我可以使用 OpenSSL 命令行进行正确签名（使用 WWDR、p12、pkpass 文件的相同副本）：

`openssl smime -binary -sign -certfile AppleWWDRCA.pem -signer passcertificate.pem -inkey passkey.pem -in manifest.json -out signature -outform DER -passin pass:123123`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:03:46.243

检查您的 $certdata 和 $privkey 的值，如果它们是文件名，则以 'file://' 为前缀。

正如@Charles 所说，您的错误日志是寻找失败原因的最佳线索。

我们曾经使用以下命令，但在进行基准测试后，我们发现 exec 的性能更好。

```
openssl_pkcs7_sign( 
    "manifest.json",
    "signature",
    "file://" . $certdata,
    array("file://" . $privkey, $keyPassword),
    array(),
    PKCS7_BINARY|PKCS7_NOATTR|PKCS7_DETACHED,
    "/path/to/AppleWWDRACA.pem"); 
```

# c# - 如何对 FileOpenPickerUI 中取消选择的项目做出反应？

> ID：14192977
> 
> 赞同：0
> 
> 时间：2013-01-07T09:20:56.353
> 
> 标签：c#, xaml, windows-8, event-handling, filepicker

我的 FileOpenPicker 应用程序有问题。如果我在 GridView 中选择一个项目，该项目将被添加到 FileOpenPickerUI，它工作正常。但是如果我**在 FileOpenPickerUI 中**取消选择一个项目，它不会在我的 GridView 中取消选择。

所以我添加了事件：

```
_fileOpenPickerUI.FileRemoved += FilePickerUI_FileRemoved; 
```

这是方法：

```
private async void FilePickerUI_FileRemoved(FileOpenPickerUI sender, FileRemovedEventArgs args)
{
   //DO SOMETHIG
} 
```

这是文档：http: [//msdn.microsoft.com/de-de/library/windows/apps/windows.storage.pickers.provider.fileopenpickerui.f​​ileremoved](http://msdn.microsoft.com/de-de/library/windows/apps/windows.storage.pickers.provider.fileopenpickerui.fileremoved)

我如何对取消选择的项目做出反应？如何在我的 GridView 中取消选择它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:58:48.253

`FileOpenPickerUI`项目选择/取消选择和项目选择/取消选择之间没有双向绑定`GridView`。如果您可以在`FilePickerUI_FileRemoved`处理程序中访问 GridView 的选定项，则可以将该属性显式设置`SelectedIndex`为 -1。

# android - Android如何追踪内存泄漏？

> ID：14192984
> 
> 赞同：0
> 
> 时间：2013-01-07T09:21:30.867
> 
> 标签：android, memory, allocation, mat

我有一个应用程序，就像 Pulse 一样，它处于测试阶段 [https://play.google.com/store/apps/details?id=com.braindigit.nepal.khabar](https://play.google.com/store/apps/details?id=com.braindigit.nepal.khabar)

我有一个包含`LinearLayout`命名的主布局，`NewsCategoryHolder`在这个布局上我动态添加和删除另一个布局名称`CategoryView`。这`CategoryView`包含`HorizontalListView`和其他`views`。对于导航，我已经实现`ActionbarSherlock Tab`了，每次单击选项卡`NewsCategoryHolder`都会删除其所有视图，然后添加`CategoryView`. 每个`CategoryView`都有自己的`AsyncTask`从服务器或数据库加载数据。并且在每次添加和删除时，`CategoryView`我都删除了它的所有视图，将它的适配器分配给 null，甚至将`Context`它保留为 null。但是当我从`Tab`到`Tab`，应用程序的内存增加。我觉得这是我的应用程序发生一些内存泄漏的情况。我已经浏览了所有关于`MAT`和其他分析器的教程、链接和视频，但我无法确定应用程序消耗内存的确切部分或`GC`无法收集对象引用的点。

我只是想找到内存消耗高的位置，但无法做到这一点。我已附加 *.hprof [http://news.braindigit.com/saved/android3201806337409456011.hprof](http://news.braindigit.com/saved/android3201806337409456011.hprof)文件，只是想要一些帮助对其分析，我的应用程序包名称是`com.braindigit.nepal.khabar`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:41:26.397

我找到了内存消耗高的主要原因。而不是`MAT`从布局和各种语句中删除各种视图后，我发现我使用的是`asset`文件夹中的字体，这是罪魁祸首。

```
headingText.setTypeface(Typeface.createFromAsset(context.getAssets(), DataHolder.FONT_PATH)); 
```

因此，这样做可能`Context`正在被引用或被`TypeFace`引用并且从未被引用`garbage collected`。但是删除这行代码修复了我的应用程序上的所有内存泄漏问题。

此外，可以使用此处描述的技术解决此问题 [字体内存泄漏](http://code.google.com/p/android/issues/detail?id=9904)

# html - 从地址栏打开一个弹出窗口

> ID：14192986
> 
> 赞同：-1
> 
> 时间：2013-01-07T09:21:37.980
> 
> 标签：html, popup

当用户将地址写入地址栏并按 Enter 时，我试图在弹出窗口中打开一个页面。

我想要做的是在我的页面中，当用户单击新闻的详细链接时，内容会在弹出窗口中打开

```
 <a id="shownews" name="shownews" rel="width:1000;height:760"  href="shownewsinpopup.php?newsid=<?php echo $newsid;?>" class="popup" style="text-decoration:none;"> 
```

我想给用户一个特定新闻的链接。每当用户尝试通过写入地址栏并按下回车按钮来打开链接时，我希望新闻在弹出页面中打开，其类与我在上面的代码中使用的类相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:29:50.157

这应该有助于：

```
<a href="http://www.somewebsite.com/" target="_blank">Link Name</a> 
```

编辑：

`<a href="www.somewebsite.com" onclick="window.open('#','_blank');window.open(this.href,'_self');">`

我相信这会将您当前的网页加载到浏览器将关注的新选项卡中，然后将用户输入的 URL 加载到当前选项卡的地址栏中。

# sql - 为 SQL 结果添加前缀

> ID：14192987
> 
> 赞同：0
> 
> 时间：2013-01-07T09:21:38.693
> 
> 标签：sql, sql-server, sql-server-2008

有人可以解释一下我将如何在我的场景中为“名称”列添加前缀。

我想在两个相同的表之间创建 UNION。两者都包含一个字段“名称”。在列名中，我想添加前缀“TABLE-A-”或“TABLE-B-”。

我知道我可以`N'PREFIX' + Name`在选择中做到这一点，但问题是有些记录已经有前缀，而有些则没有。因此，通过使用这将为这些记录创建一个双前缀......

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:24:36.273

您可以使用`CASE`表达式有条件地添加前缀：

```
CASE WHEN Name like 'A1-%' THEN Name ELSE N'A1-' + Name END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:24:50.640

```
case left(Name, 3) when N'A1-' then N'' else N'A1-' end + Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:25:41.710

您可以使用 CASE 表达式：

```
CASE WHEN col1 LIKE 'TABLE-A-%' THEN col1 ELSE 'TABLE-A-' || col1 END 
```

或者，您可以使用 4 个选择的 UNION：

```
select col1 FROM tab1 WHERE col1 LIKE 'TABLE-A-%'
UNION
select 'TABLE-A-' || col1 FROM tab1 WHERE col1 NOT LIKE 'TABLE-A-%'
UNION
<same stuff for table B> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T09:32:41.057

```
SELECT 'TABLE-A'+REPLACE(Name,'TABLE-A','') 
FROM [TABLE-A]
UNION ALL
SELECT 'TABLE-B'+REPLACE(Name,'TABLE-B','') 
FROM [TABLE-B] 
```

拉吉

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-11T15:11:34.653

在国家代码前添加一个“+”符号

```
UPDATE [masters].[country] SET Countrycode = '+' +Countrycode

output:
=========== 
countrycode 
+91,
+355,
.... 
```

# c# - 如何使用 HttpWebRequest/Response 从 Web 服务器下载二进制 (.exe) 文件？

> ID：14192993
> 
> 赞同：14
> 
> 时间：2013-01-07T09:22:06.580
> 
> 标签：c#, stream, httpwebrequest, streamreader, httpwebresponse

我正在编写一个需要`.exe`从网站下载文件然后将其保存到硬盘驱动器的程序。存储在我的`.exe`网站上，它的 url 如下（它不是真正的 uri，只是我为了这个问题而编造的一个）：

```
http://www.mysite.com/calc.exe 
```

经过多次网络搜索和摸索这里的示例是我到目前为止提出的代码：

```
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(http://www.mysite.com/calc.exe);
HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();
Stream responseStream = webResponse.GetResponseStream();               
StreamReader streamReader = new StreamReader(responseStream);
string s = streamReader.ReadToEnd(); 
```

如您所见，我正在使用`StreamReader`该类来读取数据。调用后*`ReadToEnd`*流阅读器是否包含我的 .exe 的（二进制）内容？我可以将 .exe 的内容写入`StreamReader`一个文件（名为 calc.exe），然后就可以成功下载 .exe 了吗？

我想知道为什么`StreamReader` *`ReadToEnd`*返回一个字符串。在我的情况下，这个字符串会是 calc.exe 的二进制内容吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-29T06:45:52.773

WebClient 是下载文件的最佳方法。但是您可以使用以下方法从 Web 服务器异步下载文件。

```
private static void DownloadCurrent()
{
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("[url to download]");
    webRequest.Method = "GET";
    webRequest.Timeout = 3000;
    webRequest.BeginGetResponse(new AsyncCallback(PlayResponeAsync), webRequest);
}

private static void PlayResponeAsync(IAsyncResult asyncResult)
{
    long total = 0;
    long received = 0;
    HttpWebRequest webRequest = (HttpWebRequest)asyncResult.AsyncState;

    try
    {                    
        using (HttpWebResponse webResponse = (HttpWebResponse)webRequest.EndGetResponse(asyncResult))
        {
            byte[] buffer = new byte[1024];

            FileStream fileStream = File.OpenWrite("[file name to write]");
            using (Stream input = webResponse.GetResponseStream())
            {        
                total = input.Length;

                int size = input.Read(buffer, 0, buffer.Length);
                while (size > 0)
                {
                    fileStream.Write(buffer, 0, size);
                    received += size;

                    size = input.Read(buffer, 0, buffer.Length);
                }
            }

            fileStream.Flush();
            fileStream.Close();
        }                 
    }
    catch (Exception ex)
    {
    }
} 
```

这里有一个类似的线程 -[如何使用 httpwebrequest 下载文件](https://stackoverflow.com/questions/4699938/how-to-download-the-file-using-httpwebrequest-and-httpwebresponse-classcookies)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-07T09:26:35.013

[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)是一个文本阅读器实现，即它应该用于读取文本数据而不是二进制数据。在您的情况下，您应该直接使用底层响应流。

对于下载文件，最简单的方法是使用[WebClient.DownloadFile](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfile%28v=vs.110%29.aspx)方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-05T12:36:39.140

这应该直接将文件保存在硬盘上。

```
using System.Net;
using (WebClient webClient = new WebClient ())
{
    webClient.DownloadFile("http://www.mysite.com/calc.exe", "calc.exe");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T09:29:58.517

而不是 using `StreamReader`，您应该真正调用对象`Read()`的方法`Stream`。`StreamWriter`这将要求您使用读取数据填充 byte[] 缓冲区，然后您可以使用or将其写入磁盘`FileStream`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-25T18:44:32.023

我可能有点晚了，但我遇到了同样的问题，如果不在调试模式下运行，文件总是 0kb 大。这可能是一个相对简单的答案，但在属性下禁用“调试常量”为我解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-24T07:01:09.800

我创建了一个包含事件的类，因此您可以跟踪下载进度：

```
using System;
using System.IO;
using System.Net;
using System.Net.Mime;

//event examples: https://www.tutorialsteacher.com/csharp/csharp-event

public class HttpWebRequestDownload
{
    private long _totalBytesLength = 0;
    private long _transferredBytes = 0;
    private int _transferredPercents => (int)((100 * _transferredBytes) / _totalBytesLength);
    private string _defaultDirectory = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
    public string downloadedFilePath = String.Empty;

    public HttpWebRequestDownload(){
        //Windows 7 fix
        ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls | SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12;
    }

    public void DownloadFile(string url, string destinationDirectory = default)
    {
        string filename = "";
        if (destinationDirectory == default)
            destinationDirectory = _defaultDirectory;

        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Headers.Add("Cache-Control", "no-cache");
            request.Headers.Add("Cache-Control", "no-store");
            request.Headers.Add("Cache-Control", "max-age=1");
            request.Headers.Add("Cache-Control", "s-maxage=1");
            request.Headers.Add("Pragma", "no-cache");
            request.Headers.Add("Expires", "-1");

            if (!Directory.Exists(destinationDirectory))
            {
                Directory.CreateDirectory(destinationDirectory);
            }

            using (HttpWebResponse response = (HttpWebResponse)request.GetResponseAsync().Result)
            {
                _totalBytesLength = response.ContentLength;

                string path = response.Headers["Content-Disposition"];
                if (string.IsNullOrWhiteSpace(path))
                {
                    var uri = new Uri(url);
                    filename = Path.GetFileName(uri.LocalPath);
                }
                else
                {
                    ContentDisposition contentDisposition = new ContentDisposition(path);
                    filename = contentDisposition.FileName;
                }

                using (Stream responseStream = response.GetResponseStream())
                using (FileStream fileStream = File.Create(System.IO.Path.Combine(destinationDirectory, filename)))
                {
                    byte[] buffer = new byte[1024*1024]; // 1MB buffer
                    ProgressEventArgs eventArgs = new ProgressEventArgs(_totalBytesLength);

                    int size = responseStream.Read(buffer, 0, buffer.Length);
                    while (size > 0)
                    {
                        fileStream.Write(buffer, 0, size);
                        _transferredBytes += size;

                        size = responseStream.Read(buffer, 0, buffer.Length);

                        eventArgs.UpdateData(_transferredBytes, _transferredPercents);
                        OnDownloadProgressChanged(eventArgs);
                    }
                }
            }

            downloadedFilePath = Path.Combine(destinationDirectory, filename);
            OnDownloadFileCompleted(EventArgs.Empty);
        }
        catch (Exception e)
        {
            OnError($"{e.Message} => {e?.InnerException?.Message}");
        }
    }

    //events
    public event EventHandler<ProgressEventArgs> DownloadProgressChanged;
    public event EventHandler DownloadFileCompleted;
    public event EventHandler<string> Error;

    public class ProgressEventArgs : EventArgs
    {
        public long TransferredBytes { get; set; }
        public int TransferredPercents { get; set; }
        public long TotalBytesLength { get; set; }

        public ProgressEventArgs(long transferredBytes, int transferredPercents, long totalBytesLength)
        {
            TransferredBytes = transferredBytes;
            TransferredPercents = transferredPercents;
            TotalBytesLength = totalBytesLength;
        }

        public ProgressEventArgs(long totalBytesLength)
        {
            this.TotalBytesLength = totalBytesLength;
        }

        public void UpdateData(long transferredBytes, int transferredPercents)
        {
            TransferredBytes = transferredBytes;
            TransferredPercents = transferredPercents;
        }
    }

    protected virtual void OnDownloadProgressChanged(ProgressEventArgs e)
    {
        DownloadProgressChanged?.Invoke(this, e);
    }
    protected virtual void OnDownloadFileCompleted(EventArgs e)
    {
        DownloadFileCompleted?.Invoke(this, e);
    }
    protected virtual void OnError(string errorMessage)
    {
        Error?.Invoke(this, errorMessage);
    } 
```

}

这是测试示例：

```
static void Main(string[] args)
{
    HttpWebRequestDownload hDownload = new HttpWebRequestDownload();

    string downloadUrl = "http://speedtest.tele2.net/10MB.zip";
    hDownload.DownloadProgressChanged += HDownloadOnDownloadProgressChanged;
    hDownload.DownloadFileCompleted += delegate(object o, EventArgs args)
    {
        Debug.WriteLine("Download finished and saved to: "+hDownload.downloadedFilePath); 
    };
    hDownload.Error += delegate(object o, string errMessage) { Debug.WriteLine("Error has occured !! => "+errMessage); };
    hDownload.DownloadFile(downloadUrl);
}

private void HDownloadOnDownloadProgressChanged(object sender, HttpWebRequestDownload.ProgressEventArgs e)
{
    Debug.WriteLine("progress: "+e.TransferredBytes+" => "+e.TransferredPercents);
} 
```

# javascript - 提交后刷新并避免消息

> ID：14192994
> 
> 赞同：0
> 
> 时间：2013-01-07T09:22:12.943
> 
> 标签：javascript, jquery

单击提交按钮或使用提供的快捷键提交后，我需要刷新页面。我还需要避免从浏览器获得的消息。我正在提交一些文本，所以我收到一条消息，输入的数据可能会丢失。然而事实并非如此。下面是我提交的代码。

```
<input accesskey="s" class="button" id="issue-comment-add-submit" name="Add" title="Press Alt+Shift+s to submit this form" value="Add" type="submit"> 
```

请有人可以使用javascript或Jquery提供解决方案

提前致谢 ：）

# android - 在 windows server 2008 64 位中无法检测到 adb 驱动程序

> ID：14192996
> 
> 赞同：0
> 
> 时间：2013-01-07T09:22:16.323
> 
> 标签：android, adb

以前，我使用 Windows 7 操作系统在设备上运行该应用程序并且它可以工作。但是当我尝试使用 Windows Server 2008 64 位时。adb 无法在我的电脑中检测到，并且我的项目无法在我的设备中运行。

```
D:\adt-bundle-windows-x86_64\adt-bundle-windows-x86_64\sdk\platform-tools>adb de
vices
List of devices attached

D:\adt-bundle-windows-x86_64\adt-bundle-windows-x86_64\sdk\platform-tools> 
```

adb 设备如何在 Windows Server 64 位下正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:25:45.750

Android Debug Bridge (adb) 可让您与仿真器实例或连接的 Android 设备进行通信只需通过此链接，您就会找到解决方案：

[http://developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)

# ember.js - Ember.js - 做对了（结构、包含、一般问题）

> ID：14192997
> 
> 赞同：5
> 
> 时间：2013-01-07T09:22:18.140
> 
> 标签：ember.js, requirejs, handlebars.js

我在玩 ember.js 并且不知怎么地发现如何以正确的方式构建结构。我可以遵循[所有示例](http://emberjs.com/guides/)，但是将它们放在一起时会遇到一些问题。

我正在使用 require.js 和车把。

我的目录结构如下所示：

```
- app
- - controllers
- - css
- - helpers
- - lib
- - models
- - routes
- - templates
- - - partials
- - views 
```

我的 application.js 看起来像这样：

```
require.config({
    paths:{
        jquery:'lib/jquery-1.7.2',
        handlebars:'lib/handlebars',
        ember:'lib/ember',
        ember_data:'lib/ember-data',
        text:'lib/requireJS/text',
        md5:'lib/md5',
        spin:'lib/spin'
    },

    shim:{
        'ember':{
            deps:[ 'jquery', 'handlebars'],
            exports:'Ember'
        },
        'ember_data':{
            deps:[ 'ember'],
            exports:'DS'
        }
    },

    waitSeconds:15        
});

define('application'
        ,[
            // Routes
            'routes/app_router'

            // Controller
            ,'controllers/application_controller'

            // Views
            ,'views/application_view'
            ,'views/category/category_list_view'

            // Libraries
            ,'jquery'
            ,'handlebars'
            ,'ember'
            ,'ember_data'
            ,'spin'

        ]
        , function (

             // Router
             Router

             // Controller
            ,ApplicationController

             // Views
            ,ApplicationView
            ,CategoryListView

             // Models
            ,Category
            ,Product
        )
    {
        return  Ember.Application.create({

             VERSION: '1.0.0'

            ,rootElement:'#main'

            // Load Router
            ,Router:Router

            // Load Controllers
            ,ApplicationController:ApplicationController

            // Load associated Views
            ,ApplicationView:ApplicationView
            ,CategoryListView:CategoryListView

            // Load Models
            ,Category:Category
            ,Product:Product

            //Persistence Layer,using default RESTAdapter in ember-data.js.
            ,store:DS.Store.create({
                revision:10
                ,adapter:DS.RESTAdapter.create({
                     bulkCommit:false
                    ,serializer:DS.Serializer.create({
                        primaryKey:function (type) {
                            return type.pk;
                        }
                    })
                    ,mappings:{
                        //categories:Category
                    }
                    ,namespace:'api'
                    ,url: "https://example.org"
                })
            })

            ,ready:function () {

            }
        });
    }
); 
```

然后我的应用程序控制器

```
define(
    'controllers/application_controller'
    ,['ember' ],
    function () {
        return Ember.Controller.extend({
            init: function() {
            }
        });
    }
); 
```

应用视图：

```
define('views/application_view', [
        'text!templates/application.html',
        'ember'
    ],
    function(Application_markup) {
        return Ember.View.extend({
            template: Ember.Handlebars.compile( Application_markup ),
            elementId: 'container',
            didInsertElement: function() {
                this.$().hide().show("slow");
            }
        });
    }
); 
```

最后，application.html 模板

```
<div id="container">

    <div id="header">
        FOO BAR
    </div>

    <div id="navigation">
        {{outlet mainNavigation}}
    </div>

    <div id="content">

    </div>

    <div id="footer">

    </div>

</div> 
```

我现在要做的是在主应用程序模板（category_list）中包含另一个模板。我想我要么必须在 HTML 模板本身中执行此操作，要么在应用程序视图中执行此操作 - 但在后一种情况下，我不知道如何配置/解析/绑定多个模板。

构建单独的、独立的、模块化的模板并将它们放在一起的最佳实践是什么？这究竟应该发生在哪里？或者这甚至是使用 ember.js 的错误方法？

也许你们中的一个人可以让我更清楚一些事情。谢谢。

编辑#1

app_router.js

```
define('routes/app_router',
    ['ember' ],
    function () {
        return  Em.Router.extend({
            enableLogging:true, //useful for development
            /*  location property:  'hash': Uses URL fragment identifiers (like #/blog/1) for routing.
             'history': Uses the browser's history.pushstate API for routing. Only works in modern browsers with pushstate support.
             'none': Does not read or set the browser URL, but still allows for routing to happen. Useful for testing.*/
            location:'hash',
            /*   location: 'history',
             rootURL:'/app',*/
            root:Ember.Route.extend({
                index:Ember.Route.extend({
                    route:'/'

                    /*,connectOutlets:function (router) {
                        //Render application View ,sign in.
                        v = router.get('applicationController').get('view');
                        if (v) v.remove();
                        App.router.get('applicationController').set('loggedin', false);

                        router.get('applicationController').connectOutlet({name:'login', outletName:'loginform'});
                        router.get('loginController').enterLogin();

                    }*/
                })
                /*,contacts:Em.Route.extend({
                    route:'/contacts',

                    showContact:function (router, event) {
                        router.transitionTo('contacts.contact.index', event.context);
                    },

                    showNewContact:function (router) {
                        router.transitionTo('contacts.newContact', {});
                    },
                    logout:function (router) {

                        jQuery.ajax({
                            url:'/site/logout',
                            type:'POST',
                            success:function (response) {
                                if (!response.authenticated) {
                                    router.get('applicationController').set('loggedin', false).get('view').remove();
                                    router.transitionTo('root.index', {});
                                }
                            }
                        })
                    },

                    index:Em.Route.extend({
                        route:'/',
                        connectOutlets:function (router) {
                            if (router.get('applicationController').get('loggedin'))
                                router.get('applicationController').connectOutlet('contacts', App.store.findAll(App.Contact));
                            else   router.transitionTo('root.index');
                        }
                    }),

                    contact:Em.Route.extend({
                        route:'/contact',
                        index:Em.Route.extend({
                            route:'/:contact_id',
                            deserialize:function (router, urlParams) {
                                return App.store.find(App.Contact, urlParams.contact_id);
                                debugger;
                            },

                            showEdit:function (router) {
                                router.transitionTo('contacts.contact.edit');
                            },

                            connectOutlets:function (router, context) {
                                if (router.get('applicationController').get('loggedin'))
                                    router.get('contactsController').connectOutlet('contact', context);
                                else   router.transitionTo('root.index');
                            }
                        }),

                        edit:Em.Route.extend({
                            route:'edit',

                            cancelEdit:function (router) {
                                router.transitionTo('contacts.contact.index');
                            },

                            connectOutlets:function (router) {
                                if (router.get('applicationController').get('loggedin')) {
                                    var contactsController = router.get('contactsController');
                                    contactsController.connectOutlet('editContact', router.get('contactController').get('content'));
                                    router.get('editContactController').enterEditing();
                                } else     router.transitionTo('root.index');
                            },

                            exit:function (router) {
                                router.get('editContactController').exitEditing();
                            }
                        })
                    }),
                    newContact:Em.Route.extend({
                        route:'/contacts/new',

                        cancelEdit:function (router) {
                            router.transitionTo('contacts.index');
                        },

                        connectOutlets:function (router) {
                            if (router.get('applicationController').get('loggedin')) {
                                router.get('contactsController').connectOutlet('editContact', {});
                                router.get('editContactController').enterEditing();
                            } else     router.transitionTo('root.index');
                        },

                        exit:function (router) {
                            router.get('editContactController').exitEditing();
                        }
                    })
                })*/
            })
        });
    }
); 
```

编辑#2

我现在按如下方式更改了路由器，但它没有做任何事情。

```
define('routes/apps_router', ['ember'],
    function () {
        return Em.Router.extend({
            enableLogging:true
            ,location:'hash'

         ,map: function (match) {
            match("/").to("CategoryList", function (match) {
                match("/").to("mainNavigation");
            });
        }

        ,root:Ember.Route.extend({
            index:Ember.Route.extend({
                route:'/'

                ,renderTemplates: function() {
                    this.render('mainNavigation', {
                        into: 'CategoryList'
                    });
                }
           // ....
        });
    }
); 
```

亲切的问候，克里斯托弗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:04:55.410

如果您将最新版本的 ember 与 v2 路由器一起使用，您可以执行以下操作：

```
App.Router.map(function (match) {
    match("/").to("categoryList", function (match) {
        match("/").to("foo");
    });
}); 
```

在您的 CatergoryList 模板中，放置一个 {{outlet}}（您可以选择命名它）

然后，您要插入到categoryList 的模板的路径将如下所示：

```
App.fooRouter = Ember.Router.extend({
renderTemplates:function () {
        this.render('foo', {
            into:'catergoryList'
        });
    }
}) 
```

在实践中可以找到一个很好的例子： [https ://github.com/sh4n3d4v15/ember-todos](https://github.com/sh4n3d4v15/ember-todos)

# php - 如何在 zend 导航中更改子菜单活动类？

> ID：14192998
> 
> 赞同：1
> 
> 时间：2013-01-07T09:22:30.630
> 
> 标签：php, zend-framework, zend-navigation

我正在使用 zend 导航来创建菜单。我想将默认类“活动”更改为“已选择”，并且我还想将该类添加到活动链接的锚标记。这是我在引导程序中放入的示例代码

```
protected function _initNavigation()
{

    $pages = array(
                        array(
                            'module' => 'admin',
                            'label' => 'Services',
                            'resource' => 'admin',
                            'controller' => 'services',
                            'pages' => array(
                                array(
                                    'module'        => 'admin',
                                    'label'         => 'Add Services',
                                    'controller'    => 'services',
                                    'action'        => 'manage',
                                    'route'         => 'default',

                                    ),
                                array(
                                    'module'        => 'admin',
                                    'label'         => 'View Services',
                                    'controller'    => 'services',
                                    'action'        => 'view',
                                    'route'         => 'default',
                                    ),
                                ),
                            )
                        );

            $this->bootstrap('layout');
            $layout = $this->getResource('layout');
            $view = $layout->getView();

    $config = new Zend_Config($pages);
            $navigation = new Zend_Navigation($config);
            $view->navigation($navigation);
} 
```

在我的布局视图脚本中，我把它放在下面的代码中

```
echo $this->navigation()->menu()
                        ->setUlId('menu'); 
```

电流输出

```
<ul class="navigation" id="menu">
<li class="active">
    <a href="/test/public/admin/services">Services</a>
    <ul>
        <li>
            <a href="/test/public/admin/services/manage">Add Services</a>
        </li>
        <li class="active">
            <a href="/test/public/admin/services/view">View Services</a>
        </li>
    </ul>
</li> 
```

预期产出

```
<ul class="navigation" id="menu">
<li>
    <a href="/test/public/admin/services">Services</a>
    <ul style='display:block;'>
        <li>
            <a href="/test/public/admin/services/manage">Add Services</a>
        </li>
        <li>
            <a class='selected' href="/test/public/admin/services/view">View Services</a>
        </li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:58:10.863

您只需在引导程序中的“_initNavigation()”方法的末尾设置对象“视图”的注册表。

```
Zend_Registry::set("view", $view); 
```

创建插件“TestNavigation”，在其中添加以下代码

```
 public function routeShutdown(Zend_Controller_Request_Abstract $request)
{

    foreach (Zend_Registry::get('view')->navigation()->getPages() as $page) {

            foreach ($page->getPages() as $subpage){                    
                $uri = $subpage->getHref();
                if ($uri === $request->getRequestUri()) {
                    $subpage->setClass('selected');
                }
            }
    }
} 
```

就是这样，你已经完成了。