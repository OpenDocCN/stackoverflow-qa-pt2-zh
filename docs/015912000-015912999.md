# StackOverflow 问答 15912000-15912999

# c# - 如何制作一个保持其纵横比的可调整大小的 WPF 窗口？

> ID：15912004
> 
> 赞同：2
> 
> 时间：2013-04-09T20:36:29.423
> 
> 标签：c#, wpf, window, resolution, aspect-ratio

是的，我有一个我想调整大小的窗口，但我也希望它保持纵横比。我已经阅读了一些问题（例如[this](https://stackoverflow.com/questions/2471867/resize-a-wpf-window-but-maintain-proportions)和[this](https://stackoverflow.com/questions/288954/how-do-i-keep-aspect-ratio-on-scalable-scrollable-content-in-wpf)），但是，解决方案要么不起作用，要么真的很紧张并且经常失败。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:44:11.230

唔。我会使用带有统一拉伸的 Viewbox 作为窗口的顶部内容容器。

# visual-studio-2010 - Visual Studio 加载项管理器 - 无法在启动时禁用加载项，因为灰显

> ID：15912005
> 
> 赞同：1
> 
> 时间：2013-04-09T20:36:33.863
> 
> 标签：visual-studio-2010, visual-studio

我在 Visual Studio Shell 2010 中运行 ApexSQL 工具，但自动完成使 Visual Studio 崩溃。我想禁用加载项，这样它就不会在启动时运行。但是当我转到加载项管理器时，启动复选框是灰色的。

如何禁用此加载项以使其在启动时不运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T14:45:53.660

禁用加载项会修改[UAC](https://en.wikipedia.org/wiki/User_Account_Control "UAC")下的文件。以管理员身份运行 Visual Studio，复选框将可用。

这在 VS2012 中对我有用，希望在 VS2010 中也适用。

资料来源：[丹尼斯·巴萨里奇](http://devcomponents.com/blog/?p=653 "来源")

# javascript - 从 Windows 应用商店应用打开 Windows 资源管理器

> ID：15912008
> 
> 赞同：0
> 
> 时间：2013-04-09T20:36:46.647
> 
> 标签：javascript, windows-8, windows-store-apps

这实际上是一个简单的问题，我有一个本地网络已保存位置的索引，例如`\\server\file01`. 我向用户展示了一个包含这些条目的网格，并且我想在用户单击项目（路径）时打开 Windows 资源管理器。

根据[launchUriAsync](http://msdn.microsoft.com/en-us/library/windows/apps/Hh701480.aspx)的文档，可以这样做，因为它们声明：`You must specify the privateNetworkClientServer capability in the manifest in order to launch intranet URIs, for example a file:/// URI pointing to a network location.`

由于某些未知原因，我无法让它工作，来自 launchUriAsync 的回调返回`false`. 我在[msdn 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/c8c821fb-46dc-4283-8b26-7ed9144a87bd)上开了一个帖子，运气不好，我想在付费支持之前在这里发帖。

有什么我想念的吗？

**编辑：**如果我将相同的 uri 写入带有 a 标签的 html 页面中的文件夹，Windows 资源管理器将使用特定文件夹打开。我认为 Windows Explorer 是该`file:///`协议的默认应用程序处理程序

# java - JDBC/Postgres 身份验证示例中的故障排除

> ID：15912013
> 
> 赞同：0
> 
> 时间：2013-04-09T20:36:55.380
> 
> 标签：java, postgresql, jdbc

我正在尝试自学 Java Servlet 和 JSP，但在使用 Tomcat 7 和 Postgres 9.1 进行身份验证时遇到了问题。

它似乎没有错误（Tomcat 没有在其日志文件中抛出任何 JAVA 错误）并且可以正常工作，但是它缺少一些东西，因为它永远不会让我进行身份验证。几乎就像用户名和密码与我在 postgres 中的表空间中的内容不匹配一样。

有没有办法在我的代码中引入额外的日志记录，以便我可以看到正在查询的内容和返回的内容以及不匹配的原因。这肯定有助于我的故障排除工作。

为了您的信息，我附上了我的 context.xml (META_INF)、web.xml (WEB_INF) 和我的登录 html)

我感谢您的帮助

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5">

    <!-- Define two security roles -->
    <security-role>
        <description>customer service testers</description>
        <role-name>testing</role-name>
    </security-role>
    <security-role>
        <description>system developers</description>
        <role-name>developer</role-name>
    </security-role>

    <!-- Restrict access to all files in the /admin folder -->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Protected Area</web-resource-name>
            <url-pattern>/admin/*</url-pattern>
        </web-resource-collection>
        <!-- Authorize the programmer and service roles -->
        <auth-constraint>
            <role-name>developer</role-name>
            <role-name>testing</role-name>
        </auth-constraint>
    </security-constraint>

    <!-- Use form-based authentication -->
    <!--<login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/admin/login.html</form-login-page>
            <form-error-page>/admin/login_error.html</form-error-page>
        </form-login-config>
    </login-config>
    --> 

    <!-- Use basic authentication -->

    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>Admin Login</realm-name>
    </login-config>

     <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app>

<?xml version="1.0" encoding="UTF-8"?>
<Context path="/AUTHExample">
    <Realm className="org.apache.catalina.realm.JDBCRealm" debug="99"
          driverName="org.postgresql.Driver"
          connectionURL="jdbc:postgresql://localhost:5432/mydb"
          connectionName="postgres" connectionPassword="postgres"
          userTable="userpass" userNameCol="user" userCredCol="passwd"
          userRoleTable="userrole" roleNameCol="rolename" 
          />

</Context>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <title>Learning to Authenticate</title>
</head>

<body>
<h1>Admin Login Form</h1>
<p>Please enter your username and password to continue.</p>
<table cellspacing="5" border="0">
  <form action="j_security_check" method="get">
    <tr>
        <td align="right">Username</td>
        <td><input type="text" name="j_username"></td>
    </tr>
    <tr>
        <td align="right">Password</td>
        <td><input type="password" name="j_password"></td>
    </tr>
    <tr>
      <td><input type="submit" value="Login"></td>
    </tr>
  </form>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:17:34.843

好的，所以我解决了我的问题并考虑到这似乎出现的频率，我想我会为将来偶然发现它的人回答它。

我上面遇到的问题是由于用户/密码表和角色名表中用户名的列名不同。SQL 已将其分配给“用户”而不是用户。

需要注意的是，如果在 web.xml 中没有正确定义角色，当用户名和密码正确时会显示 403 错误。

希望这是一个帮助

谢谢

# java - 如何将 MySQL 查询存储到 Java 数组中？

> ID：15912015
> 
> 赞同：3
> 
> 时间：2013-04-09T20:37:05.143
> 
> 标签：java, mysql, arrays

我在网上找到了将查询到的数据存储到 ArrayList 中然后将 ArrayList 转换为 Array 的建议。以下是我拥有的代码，看来我没有正确执行此操作。SQL 语法是正确的（我在我的 MySQL 中测试过）。任何有关如何更正我的代码的建议都会有所帮助，谢谢！

```
public static void dxNameExerciseID(){
    //String dxName = name;
    //String result = null;

    try{
        con = DriverManager.getConnection(url, user, password);  
        pst = con.prepareStatement("SELECT * FROM exercise,condition_exercise,diagnosis WHERE exercise.exercise_id = condition_exercise.exercise_id_fk AND condition_exercise.diagnosis_id_fk = diagnosis.diagnosis_id AND diagnosis.diagnosis_name = 'Adductor Strain';");
        rs = pst.executeQuery();  

        ArrayList<String> list= new ArrayList<String>();
        while (rs.next()) {
            list.add(rs.getString("exercise_id"));

            String[] result = new String[list.size()];
            result = list.toArray(result);

            for(int i =0; i<result.length; i++){
                System.out.println(result[i]);
            }   
        }   

    }catch(SQLException ex){
    }finally {
        try {
            if (rs != null){
                rs.close();
            }
            if (pst != null){
                pst.close();
            }
            if (con != null){
                con.close();
            }
        }catch(SQLException ex){
        }
    }

//return result; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:42:23.120

这应该会更好。了解如何通过迭代 ResultSet 来首次创建字符串数组列表，一旦列表完成，您就可以创建字符串数组。

```
ArrayList<String> list= new ArrayList<String>();
while (rs.next()) {
    list.add(rs.getString("exercise_id"));   
} 

String[] result = new String[list.size()];
result = list.toArray(result);

for(int i =0; i<result.length; i++){
    System.out.println(result[i]);
} 
```

顺便说一句：你的 finally 块是不安全的。如果 rs.close() 失败，您将不会关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:42:42.443

各方面的代码都很糟糕。捕获块永远不应为空。您错误地关闭了资源。如果出了问题，你怎么知道？传递连接，不要让方法负责获取它。使用 PreparedStatement。应该丢弃此代码，以便您可以重新开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:43:29.080

这应该有效-您正在创建`Array`每个`iteration`问题的原因

```
while (rs.next()) {
       list.add(rs.getString("exercise_id")); 
}   

String[] result = new String[list.size()];
result = list.toArray(result);
for(int i =0; i<result.length; i++){
      System.out.println(result[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:43:36.247

你的一些代码应该被重构

```
 ArrayList<String> list= new ArrayList<String>();
    while (rs.next()) {
        list.add(rs.getString("exercise_id"));

    }  
     String[] result = new String[list.size()];
        result = list.toArray(result);

        for(int i =0; i<result.length; i++){
            System.out.println(result[i]);
        } 
```

# vb.net - 用分号终止字符串并添加空格 VB.Net

> ID：15912018
> 
> 赞同：0
> 
> 时间：2013-04-09T20:37:12.663
> 
> 标签：vb.net, textbox, ascii, vb.net-2010

我有一个 RichTextBox，我用它来收集一组数字，但这些数字必须以分号结尾。我想在输入分号后立即自动创建一个空格并继续输入其他数字。我试过这段代码，但它没有创建空格，而是将光标放在字符串的开头：

```
Private Sub RichTextBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles RichTextBox1.KeyPress
    If (Microsoft.VisualBasic.Asc(e.KeyChar) < 48) _
          Or (Microsoft.VisualBasic.Asc(e.KeyChar) > 57) Then
        e.Handled = True
    End If
    If (Microsoft.VisualBasic.Asc(e.KeyChar) = 8) Then
        e.Handled = False
    End If
    If (Microsoft.VisualBasic.Asc(e.KeyChar) = 59) Then
        e.Handled = False
    End If
    If (Microsoft.VisualBasic.Asc(e.KeyChar) = 45) Then
        e.Handled = False
    End If
    If (Microsoft.VisualBasic.Asc(e.KeyChar) = 59) Then
        RichTextBox1.Text += " "
        RichTextBox1.SelectionStart = RichTextBox1.TextLength
        RichTextBox1.SelectionLength = 0
    End If
End Sub 
```

求助 我被卡住了，已经尝试在互联网上搜索但没有结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:42:07.940

查看 SelectionStart 和 SelectionLength 属性：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionstart.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionstart.aspx)

```
If (Microsoft.VisualBasic.Asc(e.KeyChar) = 59) Then
    RichTextBox1.Text += " "
    RichTextBox1.SelectionStart = SelectionStart.TextLength
    RichTextBox1.SelectionLength = 0
End If 
```

# iphone - 重新启动应用程序时localStorage无法正常工作-phonegap IOS

> ID：15912029
> 
> 赞同：2
> 
> 时间：2013-04-09T20:37:36.070
> 
> 标签：iphone, ios, cordova

我正在尝试在本地存储上缓存 jason 数据以在没有互联网连接时加载它，但当我重新启动应用程序时，我认为本地存储已清除

这是我的代码

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {

    document.addEventListener("offline", function() {
    alert("No internet connection");

    $.each(JSON.parse(localStorage.getItem('foo')), function(key, val) {
    if(!(val.php)){val.php=0;}
$('ul.get-mertchant').append('<li> <a href="azkadenya.html?id=' + val.nid + '&nop='+ val.php +'" class="li-link"><div class="circle-img"><img src="'+ val.logo + '" /></div><div class="merchant-info"><h1>'+ val.node_title +'</h1><p>You Have '+ val.php +' Binggz</p></div><div class="more-icon"></div></a> </li>');
}); 

}, false);
    $.getJSON('mywebsite/views/services_merchant_mobile', function(data) {
        localStorage.setItem('foo', JSON.stringify(data));

var items = [];
$.each(JSON.parse(localStorage.getItem('foo')), function(key, val) {
    if(!(val.php)){val.php=0;}
$('ul.get-mertchant').append('<li> <a href="azkadenya.html?id=' + val.nid + '&nop='+ val.php +'" class="li-link"><div class="circle-img"><img src="'+ val.logo + '" /></div><div class="merchant-info"><h1>'+ val.node_title +'</h1><p>You Have '+ val.php +' Binggz</p></div><div class="more-icon"></div></a> </li>');
});

})
} 
```

怎么了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:26:26.133

您字符串化的 json 数据的大小是多少？Localstorage 对值的大小有限制，因此这可能是一个问题。

您在 xcode 控制台中有任何日志吗？

我看到您每次设备准备就绪时都会调用 getJSON。如果您想在每次应用程序启动时刷新此数据，也许更好的办法是将 json 调用的结果缓存在全局 javascript 对象中，而不是多次字符串化和解析 json。

给你一个小提示。尽量不要以这种方式使用 $.append() 函数。它非常昂贵，尤其是在手机上。您可以连接列表项，然后只调用一次 append() 函数，或者您可以使用一些模板引擎，如 jquery 模板或把手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T22:08:53.303

从 IOS 5.1 开始，Apple 决定将本地存储设为临时区域。[在这里阅读更多](https://stackoverflow.com/questions/15923296/localstorage-cleared-after-restarting-the-application-on-phonegap-ios#answer-16045158)。

# javascript - 如何使用 javascript 读取文件并在页面上显示数据

> ID：15912035
> 
> 赞同：1
> 
> 时间：2013-04-09T20:37:49.590
> 
> 标签：javascript, ajax, html

我正在研究在谷歌地图上显示某个点并从一个点到其他点的代码。如代码所示，我应该输入用户位置，然后将用户与 Web 服务位置的其他点连接起来。

我的问题是如何为任何用户读取具有经度和纬度的文本文件并将它们显示在地图上，而不是手动输入它们。

```
For example the file has data like this:

    longitude                latitude       webS1   webS2   webS3

    40.44390000000001   -79.9562         45      12       78

    37.79499999999999   -122.2193        78      69       45 

    36.0                    138.0            42      89       75 

    52.19999999999999   0.1167869        38      74       65 
```

我需要的是这样的：

```
Enter user index:----- 
```

插入用户索引后，我们可以使用该用户的经度和纬度在地图上显示位置。同时显示 webS 的值。

例子

```
Enter user index:1 
```

结果应该在地图上显示位置并在页面上显示 web 的值，如下所示

```
webS1=45
webS2=12
webs3=78 
```

* * *

我是 java 脚本和 HTML 编码的新手。谁能给我任何关于做这种风格的建议。

这是我正在处理的代码： ----------------------------------- <%-- 文档： index 创建于 : Apr 5, 2013, 8:59:13 PM 作者 : Bobaker --%>

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html >
<head>
<title>Show Google Map with Latitude and Longitude </title>

<script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6v5-2uaq_wusHDktM9ILcqIrlPtnZgEk&sensor=false">
</script>
<script type="text/javascript">
    function initialize() {
        var lat = document.getElementById('txtlat').value;
        var lon = document.getElementById('txtlon').value;

        var myLatlng = new google.maps.LatLng(lat, lon) // This is used to center the map to show our markers
        var mapOptions = {
            center: myLatlng,
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            marker: true
        };
        var map = new google.maps.Map(document.getElementById("mapcanvas"), mapOptions);
        <!--  --!>
        var userPosition=new google.maps.LatLng(lat,lon);
        var WebServicePosition1=new google.maps.LatLng(43,-98);
        var WebServicePosition2=new google.maps.LatLng(58,93);
        var WebServicePosition3=new google.maps.LatLng(-16,26);

        var myTrip1=[userPosition,WebServicePosition1];
        var myTrip2=[userPosition,WebServicePosition2];
        var myTrip3=[userPosition,WebServicePosition3];

        var flightPath1=new google.maps.Polyline({
            path:myTrip1,
            strokeColor:"#00000F",
            strokeOpacity:0.9,
            strokeWeight:3
        });
        var flightPath2=new google.maps.Polyline({
            path:myTrip2,
            strokeColor:"#ff0000",
            strokeOpacity:0.9,
            strokeWeight:3
        }); 

        var flightPath3=new google.maps.Polyline({
            path:myTrip3,
            strokeColor:"#0000FF",
            strokeOpacity:0.9,
            strokeWeight:3
        });

        flightPath1.setMap(map);
        flightPath2.setMap(map);
        flightPath3.setMap(map);

        var marker = new google.maps.Marker({
            position: myLatlng
        });
        marker.setMap(map);
    }
</script>
</head>
<body >

    <form id="form1" runat="server">
        <table >
            <tr>
                <td>Enter Latitude:</td>
                <td><input type="text" id="txtlat" value="40.44390000000001" /> </td>
            </tr>
            <tr>
                <td>Enter Longitude:</td>
                <td><input type="text" id="txtlon" value="-79.9562" /> </td>
            </tr>
            <tr>
                <td></td>
                <td><input type="button" value="Submit" onclick="javascript:initialize()" /> </td>
            </tr>
        </table>
        <div id="mapcanvas" style="width: 500px; height: 400px">

        </div>

    </form>

</body>
</html> 
```

* * *

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:53:18.073

一般来说，如果您不是被迫这样做，您不希望以纯文本形式存储数据。您应该使用 json 格式，因为它适用于 javascript 并且是结构化的。

加载外部资源是通过客户端 javascript 中的[AJAX完成的。](http://en.wikipedia.org/wiki/Ajax_%28programming%29)AJAX 只是在后台发送一个 HTTP 请求，而不需要重新加载页面。

[此处](https://stackoverflow.com/questions/5907781/javascript-ajax-request-without-framework)有关堆栈溢出的线程演示了使用原始 javascript 的 AJAX 请求。互联网上有无数关于 AJAX 的教程，简单的谷歌搜索`javascript AJAX request`就会给你大量的结果。

对于你的文件的结构，我推荐这样的东西

```
{
    "users" : [{
        "id" : 1,
        "positions" : [{
            "longitude" :  40.44390000000001,
            "latitude"  : -79.9562,
            "webS1"     : 45,
            "webS2"     : 12,
            "webS3"     : 78 
        }]
    }]
} 
```

然后，您可以使用 JSON.parse 将此文件解析为普通的 javascript 对象。

[这个](http://en.wikipedia.org/wiki/JSON)关于 JSON 的维基百科条目解释了语法。

编辑：因此，如果您的服务器上某处有资源，我们假设它与您的页面位于同一文件夹中，名为`data.json`. 给定一个`performAjaxRequest()`向资源发送 GET 消息的方法。您可以执行以下操作。

```
performAjaxRequest("data.json", function(result) {
   var data = JSON.parse(result);
   //Now data will contain the .json file 
   //parsed as a javascript object
   data.users[0];//The first user
   //The first position for the first user
   data.users[0].positions[0]; 
```

});

`performAjaxRequest`您必须通过阅读我链接的有关 AJAX 的信息或通过查找诸如 jQuery 之类的库来实现您自己的实现，该库可以让您执行 AJAX 请求。`performAjaxRequest`有两个参数 the`url`和 a`callback function`在获取结果时被调用。了解 AJAX 是最常见的[异步](http://en.wikipedia.org/wiki/Asynchronous_I/O)操作很重要。AJAX 中的 A 实际上代表异步。

# css - 输入额外宽度

> ID：15912038
> 
> 赞同：2
> 
> 时间：2013-04-09T20:38:01.873
> 
> 标签：css, input

我在一个 div 中创建了 3 个输入框，输入框的样式设置为 269px 宽度，但是当我在浏览器中查看它时显示额外的 2px 如何阻止它这样做。我在右边设置了 5px 的边距，但在第三个设置为 0。

```
input {
    text-indent: 5px;
    height: 45px;
    color: #ffffff;
    width: 269px;
    margin-right: 5px;
    background-color: #0A4E6E;
    border: none;
    font-family: Helvetica Neue;
    font-size: 22px;
    display: block;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:40:58.363

这很可能是导致问题的边界。尝试使用 box-sizing:border-box; 使它们在浏览器中更加一致。

```
input[type=text]{ 
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

# java - 二元和线性搜索

> ID：15912041
> 
> 赞同：1
> 
> 时间：2013-04-09T20:38:30.277
> 
> 标签：java, binary-search, linear-search

该程序假设检测是否找到整数以及查找所需的时间。第一个是线性搜索，第二个是二分搜索。我遇到的问题是这样的。线性搜索有效，但我不断收到“线性搜索成功”的消息。老实说，我不确定为什么二进制搜索没有输出任何内容。任何帮助表示赞赏

```
public class search {

/**
 * @param args
 */
public static void main(String[] args) {
    Scanner scanner1 = new Scanner(System.in);
    System.out.println("Please enter in an integer:");
    int searchValue = scanner1.nextInt();

    int[] numbers = new int[1000];
    try {
        Scanner scanner = new Scanner(new File("numbers.txt"));
        for (int i = 0; i < 1000; i++) {
            numbers[i] = scanner.nextInt();
        }
    } catch (FileNotFoundException e) {
        System.out
                .println("A problem occurred reading the file numbers.txt");
        System.exit(0);
    }
    long time = System.nanoTime();
    int linear = linearSearch(numbers, searchValue);
    long end = System.nanoTime();
    System.out.println(end - time);
}

public static int linearSearch(int[] numbers, int searchValue) {
    for (int i = 0; i < numbers.length; i++) {
        if (numbers[i] > searchValue)
            return -1;
        else if (numbers[i] == searchValue)
            return i;
        System.out.println("Linear search successful");

    }

    return -1;
}

public int binarySearch(int searchValue, int[] numbers) {
    long time = System.nanoTime();
    int low = 0;
    int high = numbers.length - 1;
    while (low <= high) {
        int middle = low + (high - low) / 2;
        if (numbers[middle] == searchValue) {
            System.out.println("Binary found");
            long end = System.nanoTime();
            System.out.println(end - time);
        }
        if (searchValue < numbers[middle])
            high = middle - 1;
        else if (searchValue > numbers[middle])
            low = middle + 1;
        else
            return middle;

    }
    return -1;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:43:47.397

这是因为您从不调用该`binarySearch()`函数。你只打电话`linearSearch()`。

```
/* Call to linearSearch is here */
int linear = linearSearch(numbers, searchValue);

/* No call to binarySearch to put here */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-01T13:48:36.147

`System.out.println("Linear search successful")` 将它放在 for 循环之外，并且要进行二进制搜索，您至少需要调用该函数。

# objective-c - 滚动时分组的 UITableView 单元格混乱

> ID：15912045
> 
> 赞同：2
> 
> 时间：2013-04-09T20:38:39.957
> 
> 标签：objective-c, uitableview

我在堆栈中阅读了很多关于“dequeueReusableCellWithIdentifier”问题的内容，我尝试了几个答案，但似乎无法修复它。如果有人能在我的代码中找到问题所在，我将不胜感激

部分代码：

```
- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 2;
}
- (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView   
{
return 10;
}

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)

{

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

}

if (indexPath.section == 0)   {

    if (indexPath.row == 0) {

        cell.textLabel.text = [arrayOfQuestion objectAtIndex:indexPath.section];

    }

    else if (indexPath.row == 1) {

        question1 = [[UITextField alloc] initWithFrame: CGRectMake(20, 3, 280, 38) ];

        question1.adjustsFontSizeToFitWidth = YES;

        question1.textColor = [UIColor blackColor];

        question1.font = [UIFont systemFontOfSize:17.0];

        question1.backgroundColor = [UIColor blueColor];

        question1.autocorrectionType = UITextAutocorrectionTypeNo;        // no auto correction support

        question1.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support

        question1.textAlignment = UITextAlignmentRight;

        question1.keyboardType = UIKeyboardTypeDefault; // use the default type input method (entire keyboard)

        question1.returnKeyType = UIReturnKeyDone;

        question1.tag = 0;

//            question1.delegate = self;

        question1.clearButtonMode = UITextFieldViewModeUnlessEditing; // no clear 'x' button to the right

        [question1 setEnabled: YES ];

        [cell addSubview: question1 ];

    }

}

else if (indexPath.section == 1) {

    if (indexPath.row == 0) {

        cell.textLabel.text = [arrayOfQuestion objectAtIndex:indexPath.section];

    }

    else if (indexPath.row == 1) {

        question2 = [ [ UITextField alloc ] initWithFrame: CGRectMake(20, 3, 280, 38) ];

        question2.adjustsFontSizeToFitWidth = YES;

        question2.textColor = [UIColor blackColor];

        question2.font = [UIFont systemFontOfSize:17.0];

        question2.backgroundColor = [UIColor blueColor];

        question2.autocorrectionType = UITextAutocorrectionTypeNo;        // no auto correction support

        question2.autocapitalizationType = UITextAutocapitalizationTypeNone; // no auto capitalization support

        question2.textAlignment = UITextAlignmentRight;

        question2.keyboardType = UIKeyboardTypeDefault; // use the default type input method (entire keyboard)

        question2.returnKeyType = UIReturnKeyDone;

        question2.tag = 1;

        //            listTitleTextField.delegate = self;

        question2.clearButtonMode = UITextFieldViewModeUnlessEditing; // no clear 'x' button to the right

        [question2 setEnabled: YES ];

        [cell addSubview: question2 ];

    }

}

................

return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:02:01.903

请记住`dequeueReusableCellWithIdentifier`一遍又一遍地重复使用相同的对象来绘制您的单元格。它比在表格视图中为未知数量的行创建新单元格更有效。这意味着当您在下次需要该单元格时添加 UITextFields`[cell addSubview: ... ];`时，它已经将该子视图添加到它的视图中。

你最好创建一个已经添加并作为属性访问的子`UITableViewCell`类`UITextField`。然后你可以有两个单元格标识符：一个是指基本问题，`UITableViewCell`一个是指答案，这是你的新子类。

最重要的是，我会考虑通过重构您构建表格单元格的方式来使您的代码更加灵活。因为它的可扩展性不是很好，我敢打赌，试图获得答案是一场噩梦。

# r - 在 R 中的 for 循环中执行变量算术运算

> ID：15912050
> 
> 赞同：0
> 
> 时间：2013-04-09T20:38:51.033
> 
> 标签：r, for-loop

我有以下示例数据

```
 BR WT   SW   PO
1  4.0  7  2.0  1.0
2 12.0  5  4.0  2.0
3  8.0  7  5.0  8.6
4  9.0  3  5.6  9.0
5  1.0 10  6.0  5.0
6  6.0  2  7.5 12.0
7  7.0  3 10.0 15.0
8  4.5 10 12.0  6.0 
```

我要做的是首先浏览每一列数据，并在每一列中：

(a) 相对于整列对每个值进行排名，以及

(b) 计算列中的观察总数。

然后，对于每一列，我尝试做一个数学表达式，即“rank/(count+1)”，并将该结果分配给一个变量。到目前为止，这是此示例数据框（“df”）的代码。

```
 for (i in 1:ncol(df)) {
      assign(paste("x",i,sep=""),rank(-df[,i],ties.method="first"))
      assign(paste("y",i,sep=""),length(df[,i]))
      assign(paste("z",i,sep=""),(x[i]/(y[i]+1)))
    } 
```

当我对每个“分配”行进行故障排除时，“x”和“y”变量工作正常：

```
> x1
[1] 7 1 3 2 8 5 4 6

> x2
[1] 3 5 4 6 1 8 7 2

> x3
[1] 8 7 6 5 4 3 2 1

> x4
[1] 8 7 4 3 6 2 1 5 
```

y1:4（在这种情况下）工作正常，结果都是 8。但是，x[i]/(y[i]+1) 的运算会导致以下错误：

```
Error in assign(paste("z", i, sep = ""), (x[i]/(y[i] + 1))) : 
  object 'y' not found 
```

有人有想法么？一旦我计算出这个新的“z[i]”值，我如何使用这些 z 值创建一个新的数据框，以便我可以继续使用 ggplot？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:46:43.627

是否有理由必须将其作为一个循环来完成*？*无论如何，使用您的数据

```
dat <- read.table(text = "    BR WT   SW   PO
1  4.0  7  2.0  1.0
2 12.0  5  4.0  2.0
3  8.0  7  5.0  8.6
4  9.0  3  5.6  9.0
5  1.0 10  6.0  5.0
6  6.0  2  7.5 12.0
7  7.0  3 10.0 15.0
8  4.5 10 12.0  6.0", header = TRUE) 
```

这将返回排名

```
r <- sapply(dat, function(x) rank(-x, ties.method = "first"))

> r
     BR WT SW PO
[1,]  7  3  8  8
[2,]  1  5  7  7
[3,]  3  4  6  4
[4,]  2  6  5  3
[5,]  8  1  4  6
[6,]  5  8  3  2
[7,]  4  7  2  1
[8,]  6  2  1  5 
```

与`length(dat[, i])`所有 相同`i`，并且由 给出`nrow(dat)`，您可以忽略 的分配`y`并直接转到最后一个操作：

```
> r / (nrow(dat) + 1)
            BR        WT        SW        PO
[1,] 0.7777778 0.3333333 0.8888889 0.8888889
[2,] 0.1111111 0.5555556 0.7777778 0.7777778
[3,] 0.3333333 0.4444444 0.6666667 0.4444444
[4,] 0.2222222 0.6666667 0.5555556 0.3333333
[5,] 0.8888889 0.1111111 0.4444444 0.6666667
[6,] 0.5555556 0.8888889 0.3333333 0.2222222
[7,] 0.4444444 0.7777778 0.2222222 0.1111111
[8,] 0.6666667 0.2222222 0.1111111 0.5555556 
```

假设我理解你当然想做什么......

# c# - Nextpagetoken 无法按预期工作

> ID：15912051
> 
> 赞同：1
> 
> 时间：2013-04-09T20:38:56.263
> 
> 标签：c#, youtube-api, google-api-dotnet-client

频道里有很多视频。其中“nextPageToken”仅在我的代码上迭代了大约 570 个。

也许不是 lib 问题，因为[https://developers.google.com/youtube/v3/docs/search/list](https://developers.google.com/youtube/v3/docs/search/list)上也会发生同样的情况。大约只有 10 页后，nextPageToken 消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:21:09.247

您应该使用 channel+playlistItems API 来获取**所有**频道视频，而不是搜索 API。

[请在https://developers.google.com/youtube/v3/docs/channels/list#try-it](https://developers.google.com/youtube/v3/docs/channels/list#try-it)上查看。

例如，我将频道 ID UCi-Lb1gFer4U7tkqFA1adiQ 和部分参数设置为 contentDetails。

响应的示例是：

```
 "items": [
  {
   "id": "UCi-Lb1gFer4U7tkqFA1adiQ",
   "kind": "youtube#channel",
   "etag": "\"NT-fDeVOLsFPouddIzcaWbd0fJw/sQKRHjGLTreNbWWrW3gIojOKiEk\"",
   "contentDetails": {
    "relatedPlaylists": {
     "uploads": "UUi-Lb1gFer4U7tkqFA1adiQ"
    }
   }
  }
 ] 
```

那么你现在知道**上传**播放列表的 ID，UUi-Lb1gFer4U7tkqFA1adiQ，所以你访问

[https://developers.google.com/youtube/v3/docs/playlistItems/list](https://developers.google.com/youtube/v3/docs/playlistItems/list)

将 UUi-Lb1gFer4U7tkqFA1adiQ 设置为 playlistId，然后您就可以通过分页获取所有视频。

p/s：如果您仍然遇到问题，请提供您的频道 ID

# ld - 链接描述文件中的段加载地址和执行地址

> ID：15912057
> 
> 赞同：4
> 
> 时间：2013-04-09T20:39:17.987
> 
> 标签：ld, linker-scripts, bare-metal

我正在为裸机 ARM 应用程序编写自定义链接器脚本。该应用程序存储在闪存中，目前我有一个启动代码将整个应用程序复制到 SDRAM 中，并继续在 SDRAM 中执行以提高速度。我想修改此脚本以直接从 Flash 运行整个代码，但我无法理解某些元素。

在下面的链接描述文件中，该`.ram_data`段有一个执行地址`RAM`和一个加载地址`ROM`（这两个段都在 SDRAM 中）。据我了解，链接器使用执行地址来对所有与 PC 无关的元素进行符号解析，但是加载地址呢？在裸机 ARM 的上下文中，没有程序加载器之类的东西，链接器也无法影响我在闪存中编写程序的位置，那么它实际上是用来做什么的呢？

同样，链接器如何对运行时的 (rx) 或 (rw) SDRAM 产生任何影响？当我修改内存区域中的这些选项时，它实际上会改变什么吗？

```
MEMORY
{
  RAM(rw) : ORIGIN = 0x00001000, LENGTH = 12M-4K
  ROM(rx) : ORIGIN = 0x007f1000, LENGTH = 60K
}              

SECTIONS                                                                
{    
   .startup : 
   { ... } > VECTOR                

   .rom_text :   
   { ... } > ROM 

   .ram_data : 
   {   
      _data_start = .;                                                                 
      *(.data*)        
      _data_end = .;       
   } > RAM AT>ROM 

   .ram_bss :
   { ... } > RAM
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:58:19.863

> 据我了解，链接器使用执行地址来对所有与PC无关的元素进行符号解析，但是加载地址呢？在裸机 ARM 的上下文中，没有程序加载器之类的东西，链接器也无法影响我在闪存中编写程序的位置，那么它实际上是用来做什么的呢？

该信息存储在 ELF 可执行文件中，并由诸如`objcopy`确定二进制文件（例如，`.bin`或`.hex`）如何布局的工具使用。最终，它会告诉你的程序员将程序放在哪里。

> 同样，链接器如何对运行时的 (rx) 或 (rw) SDRAM 产生任何影响？当我修改内存区域中的这些选项时，它实际上会改变什么吗？

在这个特定的用例中，我相信这些标志仅供参考。它们主要用于动态加载程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:22:34.487

鉴于您的示例链接器脚本，这两个问题是相关的。

> 据我了解，链接器使用执行地址来对所有与PC无关的元素进行符号解析，但是加载地址呢？
> 
> 同样，链接器如何对运行时的 (rx) 或 (rw) SDRAM 产生任何影响？当我修改内存区域中的这些选项时，它实际上会改变什么吗？

该`LOAD`地址很有用，因为必须将所有内容都编程为**FLASH**。这就是为什么`.ram_data`应该有`AT>ROM`。它告诉链接器数据将`LOAD`来自 ROM/Flash。在这种情况下，您必须编写一些汇编程序引导代码，将其从**闪存**复制到**SDRAM**。

第二个问题可以通过放置部分来`>ROM`回答`.ram_data`。如果你这样做，链接器会抱怨一个可*写部分*被放置在*只读*内存中。最好`MEMORY`用读/写信息标记这些部分，因为它可以帮助确保您将这些*部分*放在正确的位置。即，它是对您提供给链接器的信息的交叉检查。

一个错误 where `>RAM AT>ROM`is 相反只会`>ROM`使概念/问题相似。

# web - “更改密码”对话框的正确 javascript 预检查方法

> ID：15912058
> 
> 赞同：2
> 
> 时间：2013-04-09T20:39:45.753
> 
> 标签：web, dialog, verification

这个问题不是关于安全性或“如何正确实施”相关问题，而是关于预检查输入值的概念。

作为第一种方法，我尝试实现以下过程（请注意，在每个`check if`语句中，如果为 false，该方法返回一个标识符值，否则算法继续）

```
Save entered values in oldPW, newPW1, newPW2
check if oldPW is correct (Ajax request)
    check if newPW1 == newPW2
        check if length of newPW1 is >=6
            check if newPW1 contains legal characters
                check if newPW1 contains required characters (like at least one uppercase char etc.) 
```

这种方法引起了问题，我认为它与异步 ajax 请求有关。我返回一个特定的标识符整数，并调用类似的方法

```
switch(checkPasswords(oldPW, newPW1, newPW2){
    case 0:
        // alert something suitable
        break;
    case 1:
        // alert something suitable
        break;

    //(...)

    case n-1:
        // alert something suitable
        break;
    case n:
        // everything is ok, change password
        break;
} 
```

最后检查旧密码是否更干净？或者甚至直接在尝试更改密码时（假设新的所需密码满足要求）并因此只有一个 ajax 请求？共同的概念是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:05:35.873

我个人建议通过在用户离开旧密码输入 (onblur) 并拥有自己的处理程序/成功函数和第二个函数来处理密码的实际更改时检查旧密码来分离 Ajax 请求。

给定这个标记：

```
<input type="text" id="oldPassword" value="" />
<input type="text" id="newPassword" name="newPassword" value="" />
<input type="text" id="confirmNewPassword" name="confirmNewPassword" value="" />
<input type="button" id="submitButton" value="Reset Password" /> 
```

而这个（伪代码）JS：

```
<script type="text/javascript">
//some doc ready-ish function
$('#oldPassword').blur(function(){
//ajax request to validate the pw
//trigger some success / failure message
//if failure, disable your #submitButton by unbinding the click event or something to that effect 

//if its successful, make sure you're submit button event is bound again
}); 

$('#submitButton').click(function(){
//perform new pw validation 
//submit your reset password request 
});

</script> 
```

# java - 使用 jSoup，我如何提取没有被任何类型的标签包围的文本？

> ID：15912059
> 
> 赞同：0
> 
> 时间：2013-04-09T20:39:46.157
> 
> 标签：java, android, jsoup

我在这里有这个 HTML 代码：

```
<hr />
<h3>Academic Recovery and Probation Conference Journal</h3>The Recovery Progress Journal is used to
record and guide conference discussions and to monitor students’ academic, behavioral and social
progress. 
<br /> 
```

如您所见，“h3”标题下的文本周围没有任何标签？我正在使用 jSoup 将此信息放入 Android 应用程序中。如果它没有定义它的标签，我将如何提取那段文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:52:59.770

我认为在没有任何其他解析的情况下单独使用 Jsoup 是不可能的。Jsoup 在 DOM 中定位元素，然后允许您访问元素的数据。

您将必须找到包含所需段落的最小元素，在其上运行 .text()，然后自己解析 .text() 的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T18:06:14.400

在这里回答（谢天谢地）：

> [Jsoup - 提取文本](https://stackoverflow.com/questions/10177867/jsoup-extracting-text)

懒人的释义版本：

```
// You need to get Nodes, not Elements
Document doc = Jsoup.parse(str);
Element div = doc.select("div").first();

for (Node node : div.childNodes()) {
    System.out.println(
        String.format(
            "%s %s",
            node.getClass().getSimpleName(),
            node.toString()
        )
    );
} 
```

# python - 如何在 Windows 7 中运行 python 2 和 3？

> ID：15912063
> 
> 赞同：44
> 
> 时间：2013-04-09T20:40:03.957
> 
> 标签：python, python-2.7, python-3.x

有没有办法在不破坏任何东西的情况下安装 python 3 而不是安装 python 2？主要问题是我有由“python xxxxx.py abc123”运行的代码。有没有办法将 python 3 更改为“python3 xxxx.py abc123”？相同的命令`python`是冲突

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-06-21T23:06:12.880

有一种更好的方法可以在 Windows 上共存/启动 Python 2 和 Python 3。Python 3.3 引入了*适用于 Windows 的 Python 启动器*（参见[http://www.python.org/dev/peps/pep-0397/](http://www.python.org/dev/peps/pep-0397/)）。

安装 Python 3.3 后，`py.exe`和`pyw.exe`被复制到您的`c:\Windows`目录，并为`.py`扩展设置关联，以便它使用启动器。默认情况下，Python 2 为`py script.py`. `py -3 script.py`启动 Python 3。（这也意味着不必将 Python 的路径添加到环境中——已经`C:\Windows`在`PATH`.）

最棒的是，`#!python2`在脚本中通过 Python 2`#!python3`启动脚本，通过 Python 3 启动脚本。这样，您可以为两个版本的 Python 使用脚本，并且可以以统一的方式启动它们——`py script.py`或者只是单击脚本图标。

还有更多细节，但这基本上是您所需要的。

**更新：**在 Windows 上使用 Python 启动器时，您还可以通过键入（即没有在脚本名称前面显式键入 --Python 启动器的名称）甚至键入不带名称的名称来从`cmd`窗口启动 Python 脚本扩展名（即只是）。`> script.py``py``.py``> script`

这样，事情开始类似于 Unix 命名脚本的方式（不需要扩展）；但是，您仍然必须`.py`在创​​建脚本文件时添加扩展名。

（是的，它比 Unix 的方法有点混乱。这就是*“先思考！”*和*“先销售！”*操作系统开发方法之间的区别。无论如何，我对 Python 开发团队的挤压表示感谢Windows 中最好的——通过发布适用于 Windows 的 Python 启动器。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T20:45:57.713

不确定它是否能满足您的需求，但您应该看看 virtualenv： http: [//www.virtualenv.org/en/latest/](http://www.virtualenv.org/en/latest/)

这将允许您为 Python 2 和 3 创建单独的环境（使用 -p 标志）。如果您的用例对此不起作用，请使用更多细节更新问题，我相信您会得到其他建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T20:55:52.343

假设您将 python3 安装在单独的目录中，您还可以将 python 3 可执行文件重命名为 python3.exe。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T01:47:12.877

您需要编辑环境变量以包含 Python 3 或 Python 2 路径。

# c - SSE rms 计算

> ID：15912072
> 
> 赞同：4
> 
> 时间：2013-04-09T20:40:37.127
> 
> 标签：c, x86, nan, sse, simd

我想用英特尔 sse 内在函数计算 rms。像这样：

```
float rms( float *a, float *b , int l)
{
    int n=0;
    float r=0.0;
    for(int i=0;i<l;i++)
    {
        if(finitef(a[i]) && finitef(b[i]))
        {
            n++;
            tmp = a[i] - b[i];
            r += tmp*tmp;
        }
    }
    r /= n;
    return r;
} 
```

但是如何检查哪些元素是 NaN？以及如何计算n？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:22:38.733

您可以通过将值与自身进行比较来测试 NaN 的值。`x == x`如果 x 是 NaN，将返回 false。因此，对于 4 x 浮点值的 SSE 向量，vx：

```
 vmask = _mm_cmpeq_ps(vx, vx); 
```

将为您提供一个掩码向量，其中 vx 中的 NaN 元素全为 0，非 NaN 元素全为 1。您可以使用掩码将 NaN 归零。您还可以使用掩码通过将其视为 32 位整数的向量并累加来计算有效数据点的数量。

这是一个经过测试的工作示例 - 请注意，它假设 n 是 4 的倍数，a、b 不是 16 字节对齐的，还请注意它需要 SSE4。

```
float rms(const float *a, const float *b , int n)
{
    int count;
    float sum;
    __m128i vcount = _mm_set1_epi32(0);
    __m128 vsum = _mm_set1_ps(0.0f);
    assert((n & 3) == 0);
    for (int i = 0; i < n; i += 4)
    {
        __m128 va = _mm_loadu_ps(&a[i]);
        __m128 vb = _mm_loadu_ps(&b[i]);
        __m128 vmaska = _mm_cmpeq_ps(va, va);
        __m128 vmaskb = _mm_cmpeq_ps(vb, vb);
        __m128 vmask = _mm_and_ps(vmaska, vmaskb);
        __m128 vtmp = _mm_sub_ps(va, vb);
        vtmp = _mm_and_ps(vtmp, vmask);
        vtmp = _mm_mul_ps(vtmp, vtmp);
        vsum = _mm_add_ps(vsum, vtmp);
        vcount = _mm_sub_epi32(vcount, (__m128i)vmask);
    }
    vsum = _mm_hadd_ps(vsum, vsum);
    vsum = _mm_hadd_ps(vsum, vsum);
    _mm_store_ss(&sum, vsum);
    vcount = _mm_hadd_epi32(vcount, vcount);
    vcount = _mm_hadd_epi32(vcount, vcount);
    count = _mm_extract_epi32(vcount, 0);
    return count > 0 ? sum / (float)count : 0.0f;
} 
```

# python - 导入 ctypes 和 tempfile 会导致执行时“中止”？

> ID：15912074
> 
> 赞同：0
> 
> 时间：2013-04-09T20:40:42.610
> 
> 标签：python, ctypes

我在我的一个模块中偶然发现了以下内容，并试图了解正在发生的事情。在最基本的层面上，我有一个这样的文件：

```
# myfile.py
#
import ctypes
import tempfile

if __name__ == '__main__':
    pass 
```

执行

```
$ python myfile.py 
```

给

```
Aborted 
```

作为输出，但如果我只是切换导入的顺序，首先导入 tempfile，它会在没有任何输出的情况下执行。

“流产”从何而来？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:21:01.537

您是否尝试过 Python interpeter？：

```
>>>import ctypes 
```

和

```
>>>import tempfile 
```

我认为您应该首先隔离错误以便对其进行跟踪。

# c# - 模型演化架构设计查询

> ID：15912075
> 
> 赞同：1
> 
> 时间：2013-04-09T20:40:42.823
> 
> 标签：c#, .net, oop, mvvm, model

ViewModel、Model、MVVM 架构问题。

曾几何时，我曾经这样定义一个模型类：

```
public class Person
{
  public string FirstName;
  public string LastName;
} 
```

几年后，我明白最好如下定义模型类：

```
public class Person
{
  private string firstName;
  private string lastName;

  public string FirstName {get{ return firstName;} set{ return firstName; } }
  public string LastName  {get{ return lastName; } set{ return lastName;  } }
} 
```

为什么..因为通常它允许更多的多功能性，例如：

```
public class Person
{
  private string firstName;
  private string lastName;

  public string FirstName {get{ return firstName;} private set{ return firstName; } }
  public string LastName  {get{ return lastName; } private set{ return lastName;  } }

  public Person(string firstName, string lastName)
  {
      this.firstName = firstName;
      this.lastName = lastName;
  }
} 
```

几个月后，引入了自动属性，事情再次变得容易：

```
public class Person
{
  public string FirstName {get; set;}
  public string LastName  {get; set;}
} 
```

多功能性仍然存在：

```
public class Person
{
  public string FirstName {get; private set;}
  public string LastName  {get; private set;}

  public Person(string firstName, string lastName)
  {
      FirstName = firstName;
      LastName = lastName;
  }
} 
```

如果我们在没有私人二传手的情况下上课，甚至是另一个好东西：

```
var myInstance = new Person{FirstName = "Che", LastName="Guara"} 
```

到目前为止 - 非常好。

但是现在我们有了另一个 MVVM 真正希望我们使用的演变......（在模型中！）

```
public class Person : INotifyPropertyChanged
{
  public event PropertyChangedEventHandler PropertyChanged;

  private string firstName;
  private string lastName;

  public string FirstName
  {
    get{ return firstName; }
    set
    { 
       firstName = value;
       if(PropertyChanged!=null)
        PropertyChanged(this,new PropertyChangedEventArgs("FirstName");
    } 
  }

  public string LastName
  {
    get{ return lastName; }
    set
    { 
       lastName = value;
       if(PropertyChanged!=null)
        PropertyChanged(this,new PropertyChangedEventArgs("LastName");
    } 
  }
} 
```

所以..好的..它不像以前那么短，但它是可以接受的。

但是，如果模型的演变是某种东西，那么自然..

并且一致认为“不要重复自己”是一个很好的原则。

在许多情况下，我不需要特定的 View-Model 类 - 但并非在所有情况下都需要。

没关系。

为什么改变对以对象为中心的范式的整个态度是错误的？

例如：

```
publie interface IPersistable
{ 
   Guid Id {get;set;}
   DataAccessLayer Dal {get;set}
   void Persist();
   void Populate();
}

public class Person : INotifyPropertyChanged, IPersistable
{
  public DataAccessLayer Dal;

  private Guid Id;

  public Guid Id
  {
     get {return id;}
     set
     {
    id=value; 
    if(PropertyChanged!=null)
        PropertyChanged(this,new PropertyChangedEventArgs("Id");
     }
  }

  public event PropertyChangedEventHandler PropertyChanged;

  private string firstName;
  private string lastName;

  public string FirstName
  {
    get{ return firstName; }
    set
    { 
       firstName = value;
       if(PropertyChanged!=null)
        PropertyChanged(this,new PropertyChangedEventArgs("FirstName");
    } 
  }

  public string LastName
  {
    get{ return lastName; }
    set
    { 
       lastName = value;
       if(PropertyChanged!=null)
        PropertyChanged(this,new PropertyChangedEventArgs("LastName");
    } 
  }

  public void Persist() //assume this is part of IPersistable.
  {
    Dal.Persist(this);
  }

  public void Populate() //assume this is part of IPersistable.
  {
    var t=Populate(Id);
    FirstName = t.Firstname;
    LastName = t.LastName;
  }

} 
```

所以我可以在模块中的某个地方做，例如：

```
myObj.Persist(); 
```

这是一个错误的想法还是一个好主意？好架构还是坏架构？

其中仍然存在关注点分离 - 只是写法不同。

真的让我头疼，将不胜感激您对此的投入。

谢谢。

GY

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:35:15.243

关于`INotifyPropertyChanged`：MVVM 要求您在 ViewModels 上使用它，因为 WPF 使用此接口在 View 与其`DataContext`是 MVVM 中的 ViewModel 之间进行数据绑定。除此之外，`INPC`它只是一个用于通知属性更改的接口，可以在您喜欢的任何地方使用。人们通常认为它不应该在模型中实现，这是错误的，但您也不必这样做。你只需要`INPC`在你的模型上实现，如果你想在某个地方使用它，可能最常用于处理 ViewModel 中的这些更改。如果您的模型仅因 ViewModel 的操作而发生变化，则无需实施`INPC`例如。

换句话说：该模型不知道它在 MVVM 模式中使用的事实。

因此，在设计模型时不要过多考虑整个系统：它提供了更改通知：很好，它提供了持久化功能：很好，它是一个完美的 OOP 类。这足以使该模型成为 MVVM 的良好模型。

**编辑：**

问题不是特定于 MVVM 的 imo。有必要问一下，是否代表一个实体（在这种情况下是一个人）、通知属性更改（同样，INPC 不是 MVVM 特定的）和保持持久性对于一个类来说是太多的关注点。通知和持久化是一种服务功能，您仍然在 Dal 中分离实际逻辑。所以，当然为什么不呢，如果在你的应用程序中单独保存和加载实体是有意义的，你为什么会介意呢？为什么你不应该这样做，你真正关心的是什么？当然，具有两个属性的类会更好，但它总是一个权衡......

简而言之：我认为持有数据、维护数据的持久性和通知更改听起来像是一个很好的工作包，可以放入一个类中。

让我知道这是否令人满意地回答了您的问题。

# mysql - MySQL 在尝试更改用户密码后使用 `>

> ID：15912079
> 
> 赞同：0
> 
> 时间：2013-04-09T20:40:56.253
> 
> 标签：mysql

直接使用 MySQL (DOS-> MySQL) 并使用以下内容更改用户密码时...

```
SET PASSWORD FOR ‘annoyinghippie’@'localhost’ = PASSWORD(’1eetpa$$w0rd&’); 
```

...MySQL“挂起”并且只显示给我...

> ```
> `> 
> ```

...做任何事情都会导致同一行重复。执行 Ctrl+Break 会将 MySQL 退出到 DOS。

该命令的语法是否错误？我直接从我的笔记中粘贴这个，我只有过去有效的工作代码。用户名/密码显然是从真实的客户信息中改变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:43:03.077

# internet-explorer-8 - VideoJS 无法在 IE8 中播放，但在 FireFox、Chrome 和 Safari 中播放

> ID：15912082
> 
> 赞同：0
> 
> 时间：2013-04-09T20:41:03.240
> 
> 标签：internet-explorer-8

我一直试图让 VideoJS 播放演示视频 2 天，但在 IE8 中没有运气。我可以让它在 Firefox、Chrome 和 Safari 中播放。我得到的只是一个黑匣子，视频应该在哪里。页面很简单。任何人都可以为我解释一下吗？

谢谢...

来源是：

```
<!doctype html>
<!--[if lt IE 7]><html class="no-js ie6 oldie" lang=en><![endif]-->
<!--[if IE 7]><html class="no-js ie7 oldie" lang=en><![endif]-->
<!--[if IE 8]><html class="no-js ie8 oldie" lang=en><![endif]-->

<!--[if gt IE 8]><!--> <html class=no-js lang=en> <!--<![endif]-->
<head>
  <meta charset=utf-8>
  <title>Test VideoJSPlayback</title>
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />

  <link rel=stylesheet href="http://vjs.zencdn.net/3.2/video-js.css" type="text/css">
  <script type="text/javascript" src="http://vjs.zencdn.net/3.2/video.js"></script>
  <script src="http://www1.videojs.com/js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body>

  <div id=player_box>

    <video id=home_video class="video-js vjs-default-skin" controls preload=none width=640 height=264
        poster="http://video-js.zencoder.com/oceans-clip.jpg">
      <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4'/>
      <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm'/>
      <track kind=captions src="/video-js/captions.vtt" srclang=en label=English />
    </video>

    <script>var homePlayer=_V_("home_video");</script>

  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:21:07.183

您可能知道 IE 8 不支持 HTML5 视频播放，因此 video-js 所做的是利用 video-js.swf 对 mp4 文件进行编码并提供“Flash 版本”，而无需其他文件。

在您的视频标签中添加引用。

> ```
> <video id="home_video" class="video-js vjs-default-skin" controls preload="none" width="640" height="264">
> ...
> </video> 
> ```

此外，在您的 video-js JavaScript 文件中搜索“video-js.swf”找到该文件被引用的位置，如果您使用的是本地版本，请确保路径正确，如果不正确，请确保您没有收到任何由于跨域文件解释或 MIME 错误导致 IE 中的 JavaScript 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T19:50:04.010

确保您有海报图像集。由于某些原因，如果您不设置海报图像，IE8 使用的 Flash 播放器将无法正常工作。

我遇到了同样的问题，一旦我为海报设置了图像，它就开始在 IE8 中工作。

# node.js - ExpressJS 在静态目录中查找视图，忽略视图目录

> ID：15912085
> 
> 赞同：0
> 
> 时间：2013-04-09T20:41:14.840
> 
> 标签：node.js, express, cloud9-ide

根据 ExpressJS[应用程序设置文档](http://expressjs.com/api.html#app-settings)，您应该可以设置`views`为视图引擎的目录。我正在经历我认为可能是错误的事情；`views`express不是在目录中查找，而是在目录中查找`static`。显然它失败了，因为它不存在。我已经通过将视图移动到静态目录来确认这一点，并且错误消失了。

您可以通过克隆[此 Cloud9 项目](https://c9.io/tyrsius/express-bug)来查看此错误。我无法在 Cloud9 之外确认这个错误，（我没有可用的 linux 机器）。

目录结构简单

**项目**

```
|-client
  |-assets
  |-views
    |-index.html
|-server.js 
```

这是**服务器配置**

```
var viewDir = __dirname + '/client/views/';
var assetDir = __dirname + '/client/assets/';

//Configure
app.configure(function() {
    app.set('views', viewDir);
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express['static'](assetDir));
    app.use(app.router);
});

app.get('/', function(req, res){        
    res.render('index');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:52:05.403

您需要通过设置引擎告诉它如何渲染。

比如回声：

```
app.engine('.html', function (file, options, next) {
  fs.readFile(file, function (err, data) {
    if (err) {
      next(err);
    } else {
      next(null, data.toString());
    }
  });
}); 
```

如果你想让它担任主席，你还需要把它放在`app.get('/' . . .`前面。`app.use(express.static`

你可以在这里试试：[http ://runnable.com/UWTRSNJq0z5OAADk](http://runnable.com/UWTRSNJq0z5OAADk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:18:54.910

Html 文件是静态文件，而视图中的文件必须由您的模板引擎（如 Jade 或 ejs）呈现。如果您想呈现 html 文件，请检查这些问题。

1.  [渲染基本的 HTML 视图？](https://stackoverflow.com/questions/4529586/render-basic-html-view-in-node-js-express)
2.  [在没有模板引擎的情况下使用 express](https://stackoverflow.com/questions/7318343/using-express-without-a-template-engine)

模板引擎动态呈现视图。如果您只有静态页面，那么您将不需要它。但是，如果您有动态内容，则必须使用模板。

# haskell - Attoparsec /= stringCI 的版本

> ID：15912086
> 
> 赞同：1
> 
> 时间：2013-04-09T20:41:15.353
> 
> 标签：haskell, attoparsec

我正在解析 robots.txt 文件，并且我已经编写了解析器以成功解析“格式正确”的 robots.txt 文件。我已经能够调整解析器以跳过以符号开头的行（例如 # 或 / 用于注释），但仅使用`inClass "#/"`.

我无法解决的一个问题是如果一行不包含我想要匹配的字符串，则跳过它。

```
User-agent: *
Disallow: /includes/
Disallow: /misc/
Disallow: /modules/
Doesn't belong here
Disallow: /profiles/
Disallow: /scripts/
Disallow: /themes/ 
```

我首先尝试使用匹配：

`satisfy (notInClass "DdUu") *> skipWhile (not . isEndOfLine)`

并且认为这样做会否定我对特定注释行解析器的需求，因为哈希或斜杠不属于字符类。问题是这行不通。

我也意识到它无论如何都不会起作用，因为它不会解决诸如“不允许”与“不允许”之类的匹配问题。

这是解析代码（没有注释跳过代码，这仅适用于格式良好的 robots.txt）：

```
{-# LANGUAGE OverloadedStrings, RankNTypes #-}

import           Prelude hiding (takeWhile)
import           Control.Applicative hiding (many)
import           Data.Char
import           Data.Text as T hiding (toLower)
import           Data.Text.Encoding as E
import           Control.Monad
import           Data.Attoparsec.ByteString
import qualified Data.Attoparsec.Char8 as AC
import           Data.Array.Unboxed
import           Data.ByteString as B hiding (takeWhile)
import qualified Data.ByteString.Internal as BI
import           Data.Word (Word8)

type RuleMap = [(ByteString, ByteString)]

-- newtype for indexable ua
newtype UserAgent = UserAgent { unUA :: ByteString }
    deriving (Eq, Ord, Show)

data RuleSet = RuleSet
    { userAgent :: UserAgent,
      rules     :: RuleMap }
     deriving (Eq, Ord, Show)

main = do
    r <- B.readFile "/Users/ixmatus/Desktop/robots.txt"
    print $ parse (many1 parseUABlock) r

stripper = E.encodeUtf8 . T.strip . E.decodeUtf8

isNotEnd = not . AC.isEndOfLine

-- | Catch all character matching, basically
matchALL :: Word8 -> Bool
matchALL = inClass ":/?#[]@!$&'()*%+,;=.~a-zA-Z0-9 _-"

-- | @doParse@ Run the parser, complete the partial if the end of the stream has
-- a newline with an empty string
doParse :: ByteString -> [RuleSet]
doParse cont =
    case parse (many1 parseUABlock) cont of
        Done _ set -> set
        Partial f -> handlePartial (f B.empty)
        Fail {} -> []

-- | @handlePartial@ Handle a partial with empty string by simply
-- returning the last completion
handlePartial :: forall t a. IResult t [a] -> [a]
handlePartial (Done _ r) = r
handlePartial (Fail {})  = []

-- | @parseUABlock@ Parse a user-agent and rules block
parseUABlock = do
    ua    <- parseUACol *> uA
    rulez <- many1 parseRules

    return RuleSet { userAgent = UserAgent ua,
                     rules = rulez }

-- | @matchUACol@ Parse the UA column and value taking into account
-- possible whitespace craziness
parseUACol = AC.skipSpace
          *> AC.stringCI "User-Agent"
          <* AC.skipSpace
          *> AC.char8 ':'
          *> AC.skipSpace

uA = do
    u <- takeWhile1 isNotEnd
    return (stripper u)

-- | @parseRules@ Parse the directives row
parseRules = (,) <$> parseTransLower
             <*> directiveRule

directiveRule = do
    rule <- takeWhile1 matchALL <* many1 AC.endOfLine

    return (stripper rule)

parseTransLower = do
    res <- parseDirectives <* AC.skipSpace
    return (lowercase res)

ctypeLower = listArray (0,255) (Prelude.map (BI.c2w . toLower) ['\0'..'\255']) :: UArray Word8 Word8
lowercase = B.map (\x -> ctypeLower!x)

directives = AC.stringCI "Disallow" <|> AC.stringCI "Allow"

-- | @parseDirectives@ Parse the directive column and any possibly
-- funny whitespace
parseDirectives = AC.skipSpace
                  *> directives -- <|> AC.stringCI "Crawl-delay" <|> AC.stringCI "Sitemap")
                  <* AC.skipSpace
                  <* AC.char8 ':' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:08:53.063

考虑这种方法。

定义：

```
data RobotsDirective = RobotsDirective String String 
```

这表示 robots.txt 文件中的已解析指令。第一个字符串是指令（即`UserAgent`, `Allow`,`Disallow`等），第二个字符串是冒号后面的内容。

现在为 a 编写一个解析器`RobotsDirective`：

```
parseRD :: Parser RobotsDirective 
```

`parseRD`将查找指令名称（应仅包含字母、数字和破折号，可能还有下划线），后跟一个冒号，后跟零个或多个非换行符。适当地忽略空白。如果`parseRD`找到这样的模式，它将创建并返回一个`RobotsDirective`. 否则它将跳过一行字符并重试。

现在您有了 a 的解析器，您可以以标准方式`RobotsDirective`创建解析器。`[RobotsDirective]`

这个解析器只是跳过任何看起来不像指令的行，这将包括空行、注释行和以 . 开头的行`Don't allow...`。但是，它可以返回一个`RobotsDirective`在 robots.txt 文件中无效的行，即：

```
foo: blah 
```

将返回`RobotsDirective "foo" "blah"`。解析 robots.txt 文件并获得`RobotsDirective`值列表后，只需浏览该列表并忽略您不感兴趣的值。

# ios - iPhone应用地图动画

> ID：15912088
> 
> 赞同：1
> 
> 时间：2013-04-09T20:41:24.887
> 
> 标签：ios, cocoa-touch, maps

我是 Xcode 和 cocoa touch 的新手，但我打算创建一个具有以下要求的应用程序：

我的应用程序将包含一张地图，仅包含当地区域（我居住的地方——这个应用程序是针对我们当地社区的）。

我已经有了我要定位的区域的相当详细的地图——与你在谷歌地图上看到的非常相似。它还有一些其他与当地相关的地标和信息。我想模拟谷歌地图应用程序，涉及以下功能：

1.  就像谷歌地图一样，当用户最初打开应用程序时，他应该看到的地方很少（仅主要地标）。
2.  双击放大，他应该能够看到更多的东西。
3.  如果他四处移动，它应该添加更多位置，具体取决于他移动的方向。

如果有人能在以下方面为我指明正确的方向，我将不胜感激：

*   苹果的基本框架
*   教程
*   图书
*   开源应用程序或与我需要做的事情相关的任何其他信息

*我想重申，直接在我的应用程序中使用 Apple Maps 或 Google Maps 不是一种选择，我需要使用我拥有的地图。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:59:15.623

## **对于这个项目，您需要：**

*   了解 Objective-C 语言
    *   [使用 Objective-C 编程](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html)

*   熟悉Cocoa Touch
    *   [Cocoa Touch - iOS 技术概述](https://developer.apple.com/ios/)（[存档](https://web.archive.org/web/20150322044205/https://developer.apple.com/technologies/ios/cocoa-touch.html)）
    *   [iOS 技术概览 - Cocoa Touch 层](https://web.archive.org/web/20160826234655/https://developer.apple.com/library/ios/documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/iPhoneOSTechnologies/iPhoneOSTechnologies.html)

*   查看
    *   [立即开始开发 iOS 应用程序](https://developer.apple.com/library/archive/referencelibrary/GettingStarted/DevelopiOSAppsSwift/index.html)

## **在视图上绘制地图**

要显示您的地图，您需要具备以下知识：

*   [视图](https://developer.apple.com/documentation/uikit/uiview)（请参阅[iOS 的视图编程指南](https://developer.apple.com/library/archive/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html)，尤其是 [视图和窗口架构](https://developer.apple.com/library/archive/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html)）
*   [查看 iOS 控制器编程指南](https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/)
*   [绘图图像](https://developer.apple.com/library/archive/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/HandlingImages/Images.html)

## **处理事件以与用户交互**

*   `double tap to zoom`如果您要响应和其他相关事件，您需要知道如何处理事件。请参阅：[iOS 事件处理指南](https://web.archive.org/web/20160427193652/http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Introduction/Introduction.html)

您可以查看一些示例项目：

Apple 声明的[简单手势识别器：](https://developer.apple.com/library/archive/samplecode/SimpleGestureRecognizers/Introduction/Intro.html)

> 是理解手势识别的完美起点。这个应用程序演示了如何识别点击、滑动和旋转手势。该应用程序通过在触摸位置显示和动画图像来响应每个手势。

和[MoveMe](https://developer.apple.com/library/archive/samplecode/MoveMe/)样本`shows how to animate a view in response to touch events. Examine this sample project to further your understanding of custom touch-event handling.`

## **对用户当前位置做出反应**

*   [位置感知编程指南](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html)
    *   [获取用户位置](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

如果这是您的第一个 iOS 或 OSX 项目，那么，这很重要。不是最容易开始的，特别是如果您不熟悉 cocoa-touch 事件处理和窗口/视图架构。但是，Apple 文档写得非常好，而且非常简单明了。Ans，您总会找到可以帮助您解决问题的人。祝你好运，坚持下去。

# sql - 如何优化此 SQL Server 系统表查询

> ID：15912091
> 
> 赞同：0
> 
> 时间：2013-04-09T20:41:31.897
> 
> 标签：sql, sql-server

给定一个具有以下定义的表：

```
create table consTest(c1 integer null constraint consTest1 check(c1 < 100),
                      c2 integer not null constraint consTestU1 unique,
                      c3 integer not null,
                      c4 integer null,
                      constraint consTest2 check(c2 > c1),
                      constraint consTestU2 unique(c3)) 
```

我的应用程序对系统表执行以下查询，以描述表中列的约束关系：

```
SELECT object_schema_name(t17.referencing_id), object_name(t17.referencing_id),
       coalesce(col_name(t17.referenced_id, t17.referenced_minor_id), NULL),
       t16.definition, t16.type
FROM   { oj sys.check_constraints t16 INNER JOIN  sys.sql_expression_dependencies t17 ON ( t17.referencing_id = t16.object_id )  }  
WHERE t17.referenced_id = object_id('consTest') AND
      t16.type = 'C' AND
      object_name(t17.referencing_id) = 'consTest2'
ORDER BY 1 ASC, 2 ASC, 3 ASC 
```

执行此查询时，我看到 SQL Server 偶尔出现间歇性崩溃。我的问题不是关于崩溃，而是看看是否有人可以推荐我可以对我的查询进行的任何优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:50:17.787

在我的机器上，原始查询的估计子树成本为 .0100221 与 .0213887：

```
SELECT object_schema_name(t17.referencing_id)
    , object_name(t17.referencing_id)
    , coalesce(col_name(t17.referenced_id, t17.referenced_minor_id), NULL)
    , t16.[definition]
    , t16.[type]
FROM sys.sql_expression_dependencies t17
JOIN sys.check_constraints t16
    ON t17.referencing_id = t16.object_id
    AND t16.[type] = 'C'
    AND object_name(t17.referencing_id) = 'consTest2'
    AND t17.referenced_id = object_id('consTest');
GO 
```

# java - java-3d中的碰撞检测？

> ID：15912093
> 
> 赞同：0
> 
> 时间：2013-04-09T20:41:38.890
> 
> 标签：java, geometry, collision-detection, collision, java-3d

当另一个球体与它发生碰撞时，我正在制作的程序需要将其中的一个球体移除，但我不知道该怎么做。我试图使用`Bounds`该类来获取不同领域的界限并做一个`if(bounds.intersects(bounds2))`声明，但这没有用。我也尝试过使用 WakeupOnCollisionEntry 类，但我无法使其正常工作。任何帮助将不胜感激！

如果您需要查看我的代码以提供帮助，请查看以下代码：

```
package Game;

import com.sun.j3d.utils.geometry.*;
import com.sun.j3d.utils.universe.*;
import java.awt.*;
import java.awt.event.*;
import javax.media.j3d.*;
import javax.swing.JFrame;
import javax.swing.Timer;
import javax.vecmath.*;

public class JumpGame extends JFrame implements ActionListener,KeyListener{
    private TransformGroup objTrans,objTrans2;
    private Transform3D trans = new Transform3D();
    Transform3D transform = new Transform3D();
    private Sphere sphere, sphere2;
    private float x, dx, height = 0.0f, sign = 1.0f, xloc = 0.0f;
    private Timer timer;

    public BranchGroup createSceneGraph(){
        BranchGroup objRoot = new BranchGroup();
        for(float x = -1.0f; x <= -1.0f; x = x + 0.1f){     
            objTrans = new TransformGroup();
            objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
            objRoot.addChild(objTrans);
            sphere = new Sphere(0.25f);
            objTrans = new TransformGroup();
            objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
            Transform3D pos1 = new Transform3D();
            pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
            objTrans.setTransform(pos1);
            objTrans.addChild(sphere);
            objRoot.addChild(objTrans);
            BoundingSphere bounds = new BoundingSphere
                    (new Point3d(0.0,0.0,0.0),100.0);
            Color3f light1Color = new Color3f(1.0f,0.0f,0.2f);
            Vector3f light1Direction = new Vector3f(+4.0f,-7.0f,-12.0f);
            DirectionalLight light1 = new DirectionalLight
                    (light1Color,light1Direction);
            light1.setInfluencingBounds(bounds);
            objRoot.addChild(light1);
            Color3f ambientColor = new Color3f(1.0f,1.0f,1.0f);
            AmbientLight ambientLightNode = new AmbientLight(ambientColor);
            ambientLightNode.setInfluencingBounds(bounds);
            objRoot.addChild(ambientLightNode); 
        }
        for(float x = -1.0f; x <= -1.0f; x = x + 0.1f){     
            objTrans2 = new TransformGroup();
            objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
            objRoot.addChild(objTrans2);
            sphere2 = new Sphere(0.25f);
            objTrans2 = new TransformGroup();
            objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
            Transform3D pos1 = new Transform3D();
            pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
            objTrans2.setTransform(pos1);
            objTrans2.addChild(sphere2);
            objRoot.addChild(objTrans2);
            BoundingSphere bounds = new BoundingSphere
                    (new Point3d(0.0,0.0,0.0),100.0);
            Color3f light1Color = new Color3f(1.0f,0.0f,0.2f);
            Vector3f light1Direction = new Vector3f(+4.0f,-7.0f,-12.0f);
            DirectionalLight light1 = new DirectionalLight
                    (light1Color,light1Direction);
            light1.setInfluencingBounds(bounds);
            objRoot.addChild(light1);
            Color3f ambientColor = new Color3f(1.0f,1.0f,1.0f);
            AmbientLight ambientLightNode = new AmbientLight(ambientColor);
            ambientLightNode.setInfluencingBounds(bounds);
            objRoot.addChild(ambientLightNode); 
        }
        return objRoot;
    }

    public JumpGame(){
        setLayout(new BorderLayout());
        setTitle("PAPI");
        setVisible(true);
        setSize(505,525);
        setResizable(false);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        Canvas3D c = new Canvas3D(config);
        add("Center",c);
        c.addKeyListener(this);
        c.setSize(500,500);
        timer = new Timer(100,this);
        timer.start();
        BranchGroup scene = createSceneGraph();
        SimpleUniverse u = new SimpleUniverse(c);
        u.getViewingPlatform().setNominalViewingTransform();
        u.addBranchGraph(scene);
        for(float i = 0; i < .10f; i++){
            x = 1.5f;
            dx = -.05f;
        }
    }

    public void keyPressed(KeyEvent e){
        if(e.getKeyChar() == 'd'){
            xloc = xloc + .1f;
        }

        if(e.getKeyChar() == 'a'){
            xloc = xloc - .1f;
        }
    }

    public void keyReleased(KeyEvent e){

    }

    public void keyTyped(KeyEvent e){

    }

    public void actionPerformed(ActionEvent e){
        height += .1f * sign;
        if(Math.abs(height * 2) >= 1)
            sign = -1.0f * sign;
        if(height < -.4f){
          trans.setScale(new Vector3d(1.0,.8,1.0));
        }else{
          trans.setScale(new Vector3d(1.0,1.0,1.0));
        }
        trans.setTranslation(new Vector3f(xloc,height - .15f,0.0f));
        objTrans.setTransform(trans);
        transform.setTranslation(new Vector3f(x += dx,-.7f,0.0f));
        objTrans2.setTransform(transform);
    }

    public static void main(String[] args){
        System.out.println("Program Started");
        JumpGame jg = new JumpGame();
        jg.addKeyListener(jg);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:26:14.223

一个更简单的方法是使用它们自身作为 var 进行碰撞的球体，并使用 xyz 监视器来监测它们之间的距离

IE

```
 spere1.get.position(x)
   int g
   g.setvalue(sphere1.getposition(x))
    ex...

    if(g +[shperes1 diam].equals(e + sphere2 diam)){} 
```

# java - Spring Security：处理用户直接访问 authentication-failure-url

> ID：15912097
> 
> 赞同：0
> 
> 时间：2013-04-09T20:41:50.523
> 
> 标签：java, spring, spring-mvc, spring-security

我想知道当用户直接访问 authentication-failure-url 时我们如何处理身份验证？

```
<security:form-login login-page="/login" 
                         username-parameter="username"
                         password-parameter="password"
                         default-target-url="/member/"
                         authentication-failure-url="/invalidlogin" 
                         /> 
```

我在我的`security-context.xml`和 /invalidlogin 中有这个，是一个用于处理身份验证失败的控制器，所以我想知道如何处理直接访问？基本上2个案例场景

1.  经过身份验证的用户尝试访问 invalidlogin
2.  未经身份验证的用户尝试访问 invalidlogin

我应该将逻辑放入控制器中以进行处理，还是应该阻止用户直接访问它？

# iphone - 使用 MPMoviePlayerController 从 URL 播放视频时视频在几秒钟后停止，控制台中出现错误

> ID：15912102
> 
> 赞同：3
> 
> 时间：2013-04-09T20:42:06.907
> 
> 标签：iphone, ios, mpmovieplayercontroller

我正在使用 MPMoviePlayerController 为 givin URL 播放视频，在播放视频几秒钟后有时会停止并将此消息发送到控制台

**将后台任务断言 (6) 用于播放停止。**

可能是什么错误

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-23T15:43:35.903

实际上媒体播放器在完成下载后正在下载您的视频并没有错误，它将显示此消息

**播放停止的结束后台任务断言（6）**

然后视频将自动播放

# sql - 阻止 SELECT 检索事务开始后提交的行

> ID：15912104
> 
> 赞同：3
> 
> 时间：2013-04-09T20:42:11.417
> 
> 标签：sql, postgresql, concurrency, transactions, isolation-level

鉴于这种情况：

```
TIME  TRANSACTION 1             TRANSACTION 2
1sec  BEGIN
2sec  INSERT RECORDS INTO T1   
3sec  (doing other things)      BEGIN
4sec  (doing other things)      (doing other things)   
5sec  COMMIT                    (doing other things)   
6sec                            SELECT * FROM T1    <<- GETS ROWS INSERTED BY T1 
```

根据 postgres 文档：

> 还要注意两个连续的 SELECT 命令可以看到不同的数据，即使它们在单个事务中，如果其他事务在第一个 SELECT 执行期间提交更改

问题是：如何避免`SELECT`在事务开始和查询开始之间提交行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:45:10.933

您描述的情况称为“幻读”，并且当您使用阻止这种情况的隔离级别时是不可能的`REPEATABLE READ`或`SERIALIZABLE`。

[http://www.postgresql.org/docs/current/static/transaction-iso.html](http://www.postgresql.org/docs/current/static/transaction-iso.html)

`SET TRANSACTION`您可以使用以下命令更改隔离级别：

[http://www.postgresql.org/docs/current/static/sql-set-transaction.html](http://www.postgresql.org/docs/current/static/sql-set-transaction.html)

根据您用于连接数据库的接口，您可能还可以使用相应的 API 调用（例如`Connection.setTransactionIsolation()`在 Java/JDBC 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:44:52.310

将事务隔离级别设置为可序列化。

[http://www.postgresql.org/docs/9.1/static/transaction-iso.html](http://www.postgresql.org/docs/9.1/static/transaction-iso.html)

# - 压扁

> ID：15912106
> 
> 赞同：0
> 
> 时间：2013-04-09T20:42:13.027
> 
> 标签：

Squish 是一个跨平台/跨技术的 GUI 测试自动化工具，用于功能性 GUI 回归测试。

# c# - 使用 DecodeParm EncodedByteAlign=true 从 PDF 中提取 CCITTTFaxDecode 图像

> ID：15912108
> 
> 赞同：2
> 
> 时间：2013-04-09T20:42:17.137
> 
> 标签：c#, pdf, itextsharp

我有一个 PDF，我试图将图像从中提取到 C# Bitmap 对象（不是文件）中。我正在使用 iTextSharp 5.4.0。我注意到任何使用 EncodeByteAlign=true 作为解码参数的图像都会被解码为全白光栅。

这就是 PDF 对象的样子。

```
17 0 obj 
<<
/DecodeParms 
<<
/Rows 234
/Columns 417
/EndOfLine false
/BlackIs1 false
/EncodedByteAlign true
/K -1
>>
/ImageMask true
/Width 417
/BitsPerComponent 1
/Height 234
/Subtype /Image
/Filter /CCITTFaxDecode
/Length 1925
/Type /XObject
>> 
```

我猜 DecodeT6() 方法中的 TIFFFaxDecoder.cs 文件中存在错误，但我不确定如何修复它。

我的问题是，有没有人看到这个问题并使用 iTextSharp（而不是其他外部库）成功解决了这个问题？

如果有人有兴趣看到它，我可以发送文件。

谢谢，达伦

# jsf-2 - 使用 Primefaces LineChart 没有显示任何内容

> ID：15912113
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:42:29.727
> 
> 标签：jsf-2, primefaces

谁能给我一个有关如何使用 Primefaces 的详细示例？

我使用了以下给出的简单示例：http: [//www.primefaces.org/showcase/ui/lineChart.jsf](http://www.primefaces.org/showcase/ui/lineChart.jsf)

但是我的浏览器中什么也没有出现。这是我的代码：

lineChart.xhtml:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:t="http://myfaces.apache.org/tomahawk"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primeface.org/ui">
<h:head>
</h:head>
<h:body>
<p:lineChart id="linear" value="#{ChartBean.linearModel}" legendPosition="e"  
 title="Linear Chart" minY="0" maxY="10" style="height:300px"/>  

<p:lineChart id="category" value="#{ChartBean.categoryModel}" legendPosition="e"  
 title="Category Chart" minY="0" maxY="200" style="height:300px;margin-top:20px"/>  
</h:body>
</html> 
```

ChartBean.java

```
public class ChartBean implements Serializable {  

/**
 * 
 */
private static final long serialVersionUID = 1L;

private CartesianChartModel categoryModel;  

private CartesianChartModel linearModel;  

public ChartBean() {  
    createCategoryModel();  
    createLinearModel();  
}  

public CartesianChartModel getCategoryModel() {  
    return categoryModel;  
}  

public CartesianChartModel getLinearModel() {  
    return linearModel;  
}  

private void createCategoryModel() {  
    categoryModel = new CartesianChartModel();  

    ChartSeries boys = new ChartSeries();  
    boys.setLabel("Boys");  

    boys.set("2004", 120);  
    boys.set("2005", 100);  
    boys.set("2006", 44);  
    boys.set("2007", 150);  
    boys.set("2008", 25);  

    ChartSeries girls = new ChartSeries();  
    girls.setLabel("Girls");  

    girls.set("2004", 52);  
    girls.set("2005", 60);  
    girls.set("2006", 110);  
    girls.set("2007", 135);  
    girls.set("2008", 120);  

    categoryModel.addSeries(boys);  
    categoryModel.addSeries(girls);  
}  

private void createLinearModel() {  
    linearModel = new CartesianChartModel();  

    LineChartSeries series1 = new LineChartSeries();  
    series1.setLabel("Series 1");  

    series1.set(1, 2);  
    series1.set(2, 1);  
    series1.set(3, 3);  
    series1.set(4, 6);  
    series1.set(5, 8);  

    LineChartSeries series2 = new LineChartSeries();  
    series2.setLabel("Series 2");  
    series2.setMarkerStyle("diamond");  

    series2.set(1, 6);  
    series2.set(2, 3);  
    series2.set(3, 2);  
    series2.set(4, 7);  
    series2.set(5, 9);  

    linearModel.addSeries(series1);  
    linearModel.addSeries(series2);  
}  
} 
```

我想念什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:48:56.727

您必须使用 xmlns:p="primefaces.org/ui";，而不是 xmlns:p="primeface.org/ui";

# android - Android：禁用 DialogFragment OK/Cancel 按钮

> ID：15912124
> 
> 赞同：13
> 
> 时间：2013-04-09T20:43:24.590
> 
> 标签：android, button, android-alertdialog, dialogfragment

当使用 AlertDialog 创建 DialogFragment 时，如何禁用它的 OK/Cancel 按钮？我尝试调用 myAlertDialogFragment.getDialog() 但即使显示片段，它也总是返回 null

```
public static class MyAlertDialogFragment extends DialogFragment {

    public static MyAlertDialogFragment newInstance(int title) {
        MyAlertDialogFragment frag = new MyAlertDialogFragment();
        Bundle args = new Bundle();
        args.putInt("title", title);
        frag.setArguments(args);
        return frag;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        int title = getArguments().getInt("title");

        return new AlertDialog.Builder(getActivity())
                .setIcon(R.drawable.alert_dialog_icon)
                .setTitle(title)
                .setPositiveButton(R.string.alert_dialog_ok,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            ((FragmentAlertDialog)getActivity()).doPositiveClick();
                        }
                    }
                )
                .setNegativeButton(R.string.alert_dialog_cancel,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            ((FragmentAlertDialog)getActivity()).doNegativeClick();
                        }
                    }
                )
                .create();
    }
} 
```

我知道我可以通过膨胀包含取消和确定按钮的布局来实现它，但如果可能的话，我宁愿使用 AlertDialog 解决方案

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-05-05T20:43:07.390

您需要覆盖 DialogFragment 中的 onStart() 并保留对按钮的引用。然后，您可以稍后使用该引用重新启用该按钮：

```
Button positiveButton;

@Override
public void onStart() {
    super.onStart();
    AlertDialog d = (AlertDialog) getDialog();
    if (d != null) {
        positiveButton = d.getButton(Dialog.BUTTON_POSITIVE);
        positiveButton.setEnabled(false);
    }

} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-09T20:50:35.053

将您的 AlertDialog 附加到变量：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
(initialization of your dialog)
AlertDialog alert = builder.create();
alert.show(); 
```

然后从您的 AlertDialog 中获取按钮并将其设置为禁用/启用：

```
Button buttonNo = alert.getButton(AlertDialog.BUTTON_NEGATIVE);
buttonNo.setEnabled(false); 
```

它使您有机会在运行时更改按钮属性。

然后返回您的警报变量。

必须在获取其视图之前显示 AlertDialog。

# c++ - 在 mingw 中执行时禁用线程

> ID：15912126
> 
> 赞同：0
> 
> 时间：2013-04-09T20:43:27.007
> 
> 标签：c++, multithreading, mingw

我在win7下使用mingw编译启动代码。没有我自己做的线程，程序写的很简单。

但是有一个错误，我只能与线程相关 - 错误出现在循环的同一个地方，但在不同的运行中不同的循环计数；如果我在问题位置之前放置一个简单的输出程序，错误就会消失！

如果是线程问题，我怎样才能让它在一个线程中运行（重新设计一个线程证明程序并不是一个真正的选择）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:56:02.853

这种行为的可能原因：

*   未初始化的变量
*   内存损坏
*   错误的汇编代码
*   一些特定于时间的信息有助于结果 ( `time()`, `rand()`)
*   未定义的行为

# ios - EKCalendar 中的“完整日历同步”究竟是什么？

> ID：15912137
> 
> 赞同：20
> 
> 时间：2013-04-09T20:43:58.397
> 
> 标签：ios, objective-c, calendar, eventkit

`EKCalendar`该类的文档为该`calendarIdentifier`属性说明了这一点：

> 与日历完全同步将丢失此标识符。你应该有一个计划来处理一个日历，它的标识符不再可以通过缓存它的其他属性来获取。

究竟什么时候会发生“完全同步”，除了`calendarIdentifier`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-25T21:38:33.930

**究竟什么时候会发生“完全同步”？**
[Calendar and Reminders Programming Guide](https://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004759-SW1)以这种方式解释了这个问题：

> 如果从您的应用程序外部发生对日历数据库的更改，Event Kit 能够通过通知检测更改，以便您的应用程序可以适当地采取行动。使用 Event Kit 对日历项目所做的更改会 **自动同步**到关联的日历（CalDAV、Exchange 等）。

我在您的应用打开时看到“完全同步”事件的此类场景：
**1.**用户将您的应用发送到后台并打开日历应用。他更改日历名称，添加/编辑/删除事件，甚至删除一些日历。
**2.**用户对 Mac 上的 iCloud 日历应用了一些更改。iOS 设备收到 iCloud 日历已更改的通知，因此必须进行同步。
**3.**第三方应用收到静默通知，iOS在后台启动，应用根据通知创建一些日历事件。

一般来说，这意味着“完全同步”事件可以随时发生。

**如何检测和处理“完全同步”事件？**
[观察日历数据库的外部变化以](https://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/EventKitProgGuide/ObservingChanges/ObservingChanges.html#//apple_ref/doc/uid/TP40009765-CH4-SW1)这种方式解释了这个问题：

> 在您的应用程序运行时，其他进程或应用程序可能会修改日历数据库。如果您的应用程序获取日历事件或提醒，**您应该注册以收到有关** 日历数据库更改的通知。通过这样做，您可以确保向用户显示的日历和提醒信息是最新的。

以下是注册此类通知的代码示例：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(storeChanged:)
                                             name:EKEventStoreChangedNotification
                                           object:eventStore]; 
```

我认为重新创建类的实例并在需要 时重新`EKCalendar`缓存是有意义的。`calendarIdentifier`

**除了 calendarIdentifier 之外，哪些属性可能会发生变化？**
我找不到有关此问题的任何文档。但是由于日历在某些时候甚至可能不存在（例如用户在日历应用程序中手动删除它），因此`EKCalendar`在“完全同步”事件发生后对象的任何属性都可能无效。

此外，阅读上面的链接以获取更多信息和详细信息也很有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-25T22:28:59.767

添加日历时会发生完全同步。所有添加的日历都缓存在系统（iOS 或 MacOS）上并接收一个唯一 ID。这可以在 MacOS 上轻松检查 - 如果您转到目录`~/Library/Calendars/`，您将看到一个包含以下目录的列表：

```
3CC21C9A-0B3C-4A76-B2B0-8D3643CF2992.exchange/

45EF644F-672A-453A-ACC9-A565F017F766.calendar/ 
```

这是可以检查的唯一 ID `calendarIdentifier`。

为了测试`calendarIdentifier`iOS 上的变化，您可以在 iCloud 中创建一个带有名称的日历，`testcal`并使用以下代码获取标识符：

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
NSArray *cal = [eventStore calendarsForEntityType:EKEntityTypeEvent];
for (EKCalendar *i in cal) {
    if([i.title isEqualToString:@"testcal"]) {
        NSLog(@"%@", i.calendarIdentifier);
    }
} 
```

之后，禁用日历（设置 -> iCloud -> 日历，选择“从我的 iPhone 删除”）并启用它。当您再次执行代码时，您将看到不同的标识符，尽管日历是相同的。

**我看到将执行完全同步的另一种情况是本地缓存已损坏。**在这种情况下，日历应该尝试重建它。

因此，通过标识符查找日历并不是一个好主意，您可以使用标题、类型、颜色等来唯一标识它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T22:45:10.287

基于 iTunes 论坛，未指定何时完全同步并取决于它们：

[http://www.openradar.appspot.com/15671424](http://www.openradar.appspot.com/15671424)

[https://idmsa.apple.com/IDMSWebAuth/login?appIdKey=4a75046cda87eab6386a9eae8caabb9824e328b9abc988119b39296495ec184c&path=/login.jspa#926856](https://idmsa.apple.com/IDMSWebAuth/login?appIdKey=4a75046cda87eab6386a9eae8caabb9824e328b9abc988119b39296495ec184c&path=/login.jspa#926856)。

与可能更改的属性相关的是所有可以被其他线程访问的属性，（与 相同`calendarIdentifier`）因此是非原子的并且可以更改的属性，这里是我能找到的那些：

```
allowsContentModifications, CGColor, immutable,title,type,allowedEntityTypes,source,subscribed,supportedEventAvailabilities 
```

# php - 带有 PHP 和 XSD 错误的 XML 验证

> ID：15912143
> 
> 赞同：0
> 
> 时间：2013-04-09T20:44:32.543
> 
> 标签：php, xml, xsd, libxml2

我不会说英语，所以请原谅我。我正在尝试使用 PHP 使用您的 xsd 验证 xml 文件，但不起作用！

首先我呼吁`libxml_use_internal_errors(true);`得到错误。

然后我称之为`$xmlDomDocument->schemaValidate($pathFileXSD)`返回`false`。所以我得到了`libxml_get_errors()`函数的错误。

消息错误说：

```
Element '{http://www.w3.org/2001/XMLSchema}element', attribute 'type': References from this schema to components in the namespace 'http://www.betha.com.br/e-nota-contribuinte-ws/shema/nfse_v01.xsd' are not allowed, since not indicated by an import statement. in file:///C:/v_59/httpdocs/arquivos_imobiliaria/betha/nfse_v01.xsd on line 273 
```

我不明白消息错误，是 XSD 文件上的错误吗？但这是不可能的，因为 XSD 是 Web 服务的一部分。我很感激任何帮助。对不起英语。

我使用 PHP 5.3.1 和 libxml2.7.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:10:33.957

> XSD 文件有错误吗？

是和否。代码`$xmlDomDocument->schemaValidate($pathFileXSD);`在实际加载该文件时存在问题。就这些。一定不是说xsd文件一般有错误，只是PHP库不能无错误加载。

> 但这是不可能的，因为 XSD 是 Web 服务的一部分。

如您所见，该 Web 服务的 XSD 文件与 PHP 中的 DOMDocument 库不兼容。获取错误消息并联系 Web 服务的技术支持并与他们讨论问题。

# iup - IUP 矩阵刷新

> ID：15912146
> 
> 赞同：0
> 
> 时间：2013-04-09T20:44:36.840
> 
> 标签：iup

我正在尝试使用 C 中的 IUP 矩阵，就像我使用 VB 中的 DataGrid 一样。
直到现在我来到这个：

```
int refreshl(Ihandle *mat, int from)  
{  
struct lotstruct lot;   

FILE *fol;
fol = fopen("C:/myfolder/myfile", "rb+");

int b;
int temp = 1;
for (b=from; b<(from+31); b++)
{
    int rec = sizeof(lot) * (b - 1);
    fseek(fol, rec, SEEK_SET);

    int fr;
    fr = fread(&lot, sizeof(lot), 1, fol);
    //------------------------------------
    char k1[36] = {0};
    strncpy(k1, lot.str1, 35);
    char* tp = ibm852_to_cp1250(k1);

    char row[6] = {0};
    sprintf(row, "%d", temp);
    char* ro = ibm852_to_cp1250(row);

    char cel1[10] = {0};
    sprintf(cel1, "%d%s", temp, ":0");
    IupSetAttribute(mat, cel1, ro);

    char cel2[10] = {0};
    sprintf(cel2, "%d%s", temp, ":1");
    IupSetAttribute(mat, cel2, tp);
    temp += 1;
}
fclose(fol);
IupSetAttribute(mat, "REDRAW", "ALL");

return 0;
} 
```

有了这个我从二进制文件中读取数据，我可以在控制台上看到数据。但是 mytrix 不会通过更改数据来刷新。数据由 k_any + case K_DOWN 函数通过增加“from”整数来改变。
所以我称“REDRAW”为“ALL”，但也没有结果，起始数据保留在矩阵中。

由于我是初学者，请回答几个问题。

1）像普通的windows Grid这样使用IUP矩阵是个好主意吗？
2）如何调用刷新矩阵来更改其中的数据而不会失去速度？
3) IUP 可以像 gtk 一样在 Windows 上使用 UTF-8 字符串吗？（我尝试但没有结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:15:47.780

1）像普通的windows Grid这样使用IUP矩阵是个好主意吗？

是的。IupMatrix 正是为此而生。

2）如何调用刷新矩阵来更改其中的数据而不会失去速度？

你的代码是正确的。也许您正在更新 IupMatrix 中的错误单元格。L=0 或 C=0 是标题单元格，如果某些条件为真，则存在。也许你想要的是设置 L=1 或 C=1。

一个建议，而不是这个：

```
char row[6] = {0};
sprintf(row, "%d", temp);
char* ro = ibm852_to_cp1250(row);
char cel1[10] = {0};
sprintf(cel1, "%d%s", temp, ":0");
IupSetAttribute(mat, cel1, ro); 
```

试试这个：

```
IupMatSetfAttribute(mat, "", temp, 0, "%d", temp); 
```

和 IupMatStoreAttribute(mat, "", temp, 1, tp);

您只需要第二部分的字符串转换。

另外，您是否检查过 temp 变量是否具有有效索引？

3) IUP 可以像 gtk 一样在 Windows 上使用 UTF-8 字符串吗？（我尝试但没有结果）。

还没有。它将在（近期）将来的版本中。

# c# - C# ASP.NET Reg Replace...用另一个字符串替换字符串

> ID：15912147
> 
> 赞同：1
> 
> 时间：2013-04-09T20:44:40.403
> 
> 标签：c#, asp.net

我这里有这个字符串

```
string Thing1 = "12340-TTT";

string Thing2 = "&reg;" 
```

我正在寻找使用 reg replace 替换`TTT`with `&reg`。

我被告知使用 reg replace 它的大小写无关紧要。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:55:56.507

```
string input = "12340-TTT";
string output = Regex.Replace(input, "TTT", "&reg");

// Write the output.
Console.WriteLine(input);
Console.WriteLine(output);
Console.ReadLine(); 
```

这应该可以解决问题。您在字符串中找到“TTT”并将其替换为“®”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:56:06.137

试试这个：

```
 string one = "1234-TTT";

    string pattern = "TTT";
    Regex reg = new Regex(pattern);
    string two = "&reg";
    string result = reg.Replace(one, two);
    Console.WriteLine(result); 
```

应该给你想要的结果。如果您需要一些更复杂的正则表达式，只是为了好好阅读：http: [//msdn.microsoft.com/en-us/library/vstudio/xwewhkd1.aspx](http://msdn.microsoft.com/en-us/library/vstudio/xwewhkd1.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T20:52:23.403

如果我错了，请纠正我，但我认为这与在这样的变量上替换字符串相同：string Thing1 = "12340-TTT";

```
string Thing2 = Regex.Replace(Thing1 , "&reg;", "anyString"); 
```

从这里得到它：

[http://www.dotnetperls.com/regex-replace](http://www.dotnetperls.com/regex-replace)

干杯：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:05:08.223

为此，您可以使用 Regex.Replace 方法（[此处](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)的文档）

有几个重载版本，但最直接的版本是 Regex.Replace(String input, String regexPattern, String replacementString) 版本：

```
string Thing1 = "12340-TTT";
string Thing2 = "&reg;";

string newString =  System.Text.RegularExpressions.Regex.Replace(Thing1, "[Tt]{3}", Thing2); 
```

如果您不熟悉正则表达式，则`[Tt]`定义特定字符组（与指定字符之一匹配的任何字符）并`{3}`仅表示它必须出现 3 次。因此，这将对 3 个 T 的字符串（例如，TTT、ttt、TtT、tTt 等）进行不区分大小写的搜索。

有关基本正则表达式语法的更多信息，您可以在这里查看：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T21:05:43.353

此外，在您可以传递给正则表达式的[RegexOptions](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)之间有 IgnoreCase 以使其不区分大小写：

```
string Thing1 = "12340-TTT";
string Thing2 = "&reg;"
var regex = new Regex("TTT", RegexOptions.IgnoreCase );
var newSentence = regex.Replace( Thing1 , Thing2  ); 
```

# php - FPDF：格式化数组中的一个元素

> ID：15912149
> 
> 赞同：1
> 
> 时间：2013-04-09T20:44:41.693
> 
> 标签：php, fpdf

我正在使用 FPDF 的标签代码。我从对数据库的 sql 调用生成的数组中获取标签的内容。这对我来说可以。我想将其中一行的格式设置为与其他行不同，无论是更大的字体还是粗体。这是我正在使用的代码：

```
require('PDF_Label.php');

// Standard format
$pdf = new PDF_Label('5160');

$pdf->AddPage();

require('includes/mysqli_connect.php');
$sql = "SELECT FullLegalName, CivicAddress1, CivicCity, CivicPostal FROM coops";
$result = @mysqli_query($dbc, $sql);

if($result){

while($row = mysqli_fetch_array($result, MYSQLI_ASSOC)){
    $name = $row['FullLegalName'];
    $address = $row['CivicAddress1'];
    $pcode = $row['CivicPostal'];

    //each s relates to the inserts.  Watch for double quotes around variables
    $text = sprintf("%s\n%s\n%s %s\n%s", "$name", "$address", 'Toronto', 'ON', "$pcode");
    $pdf->Add_Label($text);

}

$pdf->Output(); 
```

如果可能的话，我想将 $name 设为粗体或更大的字体。

谢谢你看这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-29T08:16:41.657

通过在类中添加 2 个函数可以实现不同的打印格式`PDF_Label.php`：

```
// Return XY co-ordinates for additional text (different $pdf->SetFont)
function LabelX() {
    $_PosX = $this->_Margin_Left + $this->_COUNTX*($this->_Width+$this->_X_Space) + $this->_Padding;
    return ($_PosX);
}
function LabelY() {
    $_PosY = $this->_Margin_Top + $this->_COUNTY*($this->_Height+$this->_Y_Space) + $this->_Padding;
    return ($_PosY);
} 
```

这建立了当前标签的坐标。

示例脚本（循环的一部分）：

```
$pdf->SetFont(Arial,B,12);  // Bold (font size as defined for label type).
$addresstext = sprintf("%s %s %s\n%s\n%s\n%s\n%s\n%s\n%s\n", "$title", "$initials", "$surname", "$address1", "$address2", "$town", "$county", "$postcode", "$country");
$pdf->Add_Label($addresstext);
// Add secondary text in normal smaller font.
$LabelX = $pdf->LabelX();
$LabelY = $pdf->LabelY();
$pdf->SetXY($LabelX,$LabelY);
$pdf->SetFont(Arial,'',9);
$secondtext = sprintf("\n\n\n\n\n\n\n%s  %s  %s", "$reminder", "$memberno", "$postalarea");
$pdf->MultiCell(95,7, $secondtext,0,'R');  // Prints bottom right of label. 
```

可能没有它可能的那么整洁，但它确实有效！

# windows-phone - 用于网络浏览器/视图的 Windows Phone 中的后退按钮覆盖

> ID：15912150
> 
> 赞同：0
> 
> 时间：2013-04-09T20:44:42.727
> 
> 标签：windows-phone, back-button-control

我正在实现一个只有一个 url 的简单 webview 应用程序。我已经覆盖了用于 webview 导航的后退按钮功能（工作正常）。现在我的应用程序只有一个带有 webview 的屏幕，用户访问主 url 内的链接并使用后退按钮导航。我想知道，什么是 Microsoft 认证政策，因为我的应用程序只有一个屏幕，所以当用户随时按下返回按钮时它应该关闭吗？或者 Microsoft 允许使用过度的后退按钮功能实现 webview。

如果问题仍然不清楚，请告诉我。我会解释更多，但我需要知道这个问题的答案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:05:27.317

关于应用程序的 WebBrowser 控制和内容，请考虑以下要求：“您的应用程序和元数据必须具有独特、实质性和合法的内容和目的。您的应用程序必须提供启动网页以外的功能。” 因此，应用程序的唯一功能不能只是启动一个网站。

这与后退按钮无关，而是需要考虑的非常重要的事情！

最良好的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:39:39.103

你应该没问题，我已经提交了申请，就像我自己通过认证一样工作。

只要应用程序在 webbrowser 控件没有更多“历史记录”时按下后退按钮退出，这应该不是问题，因为用户在使用过程中仍然可以获得“向后”移动的体验，最终可以退出应用程序。

# php - 通过 PHP 从网页中获取文本

> ID：15912153
> 
> 赞同：1
> 
> 时间：2013-04-09T20:44:44.810
> 
> 标签：php

我正在尝试从某个 URL 获取文本，该文本位于两个文本之间。例如 ：

```
<td >Item number:</td><td >**GX12033111**</td></tr> 
```

我需要得到**GX12033111**零件，

我试过这个：

```
<?php
$file_string = file_get_contents('LINK GOES HERE');
preg_match('/<td >Item number:</td><td >(.*)<\/td><\/tr>/i', $file_string, $title);
$title_out = $title[1];
echo $title_out ;
?> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:49:38.737

你会想要使用 PHP 的 DOM 文档[http://php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

有了这个你可以

```
DOM::loadHTML(file_get_contents("URL")); 
```

然后你可以

```
DOM::getElementsByTagName("td"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:48:10.100

尝试使用：

```
preg_match('@<td >Item number:</td><td >([^<]+)</td></tr>@i', $file_string, $title); 
```

# java - LinkedList remove(int from, int to) 方法

> ID：15912155
> 
> 赞同：0
> 
> 时间：2013-04-09T20:44:51.357
> 
> 标签：java, doubly-linked-list

由于节点主要由其链接（下一个和上一个）定义，因此删除一组节点与仅删除一个节点大致相同。你有一个链 -1-2-3-4-5- 并且你删除了一些链接：-1 2-3-4 5-。

```
public LinkedList<Elem<E>> remove(int from, int to) 
{
    Elem<E> left = head;      
    for (int i=0; i < from; i++) 
    {
        left = left.next;

    }
    Elem<E> right = left;
    for(int i = 0; i< to - from; i++){
      right = right.next;
    }
    // removing the elements from the list;
    left.next = right;
    right.previous = left;
    size -= to - from;

    //left to right are still linked, so just shove them into
    //a new linkedlist and return.
    LinkedList<Elem<E>> ret = new LinkedList<Elem<E>>();
    ret.head = left;
    ret.tail = right;
    return ret;
} 
```

测试类：

```
import junit.framework.Assert;
import junit.framework.TestCase;
import junit.framework.TestSuite;

public class TestAll extends TestCase {

    public static void testRemoveStart() {

 List<Integer> l1, l2;

 l1 = new LinkedList<Integer>();

 for (int i=0; i<10; i++) {
     l1.add(i);
 }

 l2 = l1.remove(0, 4);

 Assert.assertEquals(5, l2.size());

 for (int i=0; i<5; i++) {
     Assert.assertEquals(new Integer(i), l2.get(i));
 }

 Assert.assertEquals(5, l1.size());

 for (int i=0; i<5; i++) {
     Assert.assertEquals(new Integer(i+5), l1.get(i));
 }

    }

    public static void testRemoveMiddle() {

 List<Integer> l1, l2;

 l1 = new LinkedList<Integer>();

 for (int i=0; i<10; i++) {
     l1.add(i);
 }

 l2 = l1.remove(3, 7);

 Assert.assertEquals(5, l2.size());

 for (int i=0; i<5; i++) {
     Assert.assertEquals(new Integer(i+3), l2.get(i));
 }

 Assert.assertEquals(5, l1.size());

 for (int i=0; i<3; i++) {
     Assert.assertEquals(new Integer(i), l1.get(i));
 }

 for (int i=3; i<5; i++) {
     Assert.assertEquals(new Integer(i+5), l1.get(i));
 }

    }

    public static void testRemoveLast() {

 List<Integer> l1, l2;

 l1 = new LinkedList<Integer>();

 for (int i=0; i<10; i++) {
     l1.add(i);
 }

 l2 = l1.remove(5, 9);

 Assert.assertEquals(5, l2.size());

 for (int i=0; i<5; i++) {
     Assert.assertEquals(new Integer(i+5), l2.get(i));
 }

 Assert.assertEquals(5, l1.size());

 for (int i=0; i<5; i++) {
     Assert.assertEquals(new Integer(i), l1.get(i));
 }

    }

    public static void testRemoveOne() {

 List<Integer> l1, l2;

 l1 = new LinkedList<Integer>();

 for (int i=0; i<10; i++) {
     l1.add(i);
 }

 l2 = l1.remove(5, 5);

 Assert.assertEquals(1, l2.size());

 Assert.assertEquals(new Integer(5), l2.get(0));

 Assert.assertEquals(9, l1.size());

 for (int i=0; i<5; i++) {
     Assert.assertEquals(new Integer(i), l1.get(i));
 }

 for (int i=5; i<9; i++) {
     Assert.assertEquals(new Integer(i+1), l1.get(i));
 }

    }

    public static void testExceptions() {

 List<Integer> l;

 l = new LinkedList<Integer>();

 for (int i=0; i<10; i++) {
     l.add(i);
 }

 boolean flag = false;
 try {
     l.remove(-5, -1);
 } catch (IllegalArgumentException e) {
     flag = true;
 } catch (Exception e) {
     ;
 }
 Assert.assertTrue(flag);

 for (int i=0; i<10; i++) {
     Assert.assertEquals(new Integer(i), l.get(i));
 }

 flag = false;
 try {
     l.remove(-1, 5);
 } catch (IllegalArgumentException e) {
     flag = true;
 } catch (Exception e) {
     ;
 }
 Assert.assertTrue(flag);

 for (int i=0; i<10; i++) {
     Assert.assertEquals(new Integer(i), l.get(i));
 }

 flag = false;
 try {
     l.remove(0, 10);
 } catch (IllegalArgumentException e) {
     flag = true;
 } catch (Exception e) {
     ;
 }
 Assert.assertTrue(flag);

 for (int i=0; i<10; i++) {
     Assert.assertEquals(new Integer(i), l.get(i));
 }

 flag = false;
 try {
     l.remove(5, 4);
 } catch (IllegalArgumentException e) {
     flag = true;
 } catch (Exception e) {
     ;
 }
 Assert.assertTrue(flag);

 for (int i=0; i<10; i++) {
     Assert.assertEquals(new Integer(i), l.get(i));
 }

    }

    /**
     * Runs the test suite using the textual runner.
     */

    public static void main( String[] args ) {
 TestSuite suite = new TestSuite();
 suite.addTestSuite( TestAll.class );
 junit.textui.TestRunner.run( suite );
    }

} 
```

以下是我得到的错误：

5 个测试失败：TestAll testRemoveStart testRemoveMiddle testRemoveLast testRemoveOne testExceptions 文件：C:\Users\Mikros0ft\Google Drive\Semester 2\ITI1121\Assignment 4\3\TestAll.java [行：30] 失败：junit.framework.AssertionFailedError：预期： <5> 但是是：<4> 文件：C:\Users\Mikros0ft\Google Drive\Semester 2\ITI1121\Assignment 4\3\TestAll.java [行：56] 失败：junit.framework.AssertionFailedError：预期：< 5> 但是是：<10> 文件：C:\Users\Mikros0ft\Google Drive\Semester 2\ITI1121\Assignment 4\3\TestAll.java [行：86] 失败：junit.framework.AssertionFailedError：预期：<5 > 但是是：<14> 文件：C:\Users\Mikros0ft\Google Drive\Semester 2\ITI1121\Assignment 4\3\TestAll.java [行：112] 失败：junit.framework.AssertionFailedError：预期：<1>但是是：<10> 文件：C：\Users\Mikros0ft\Google Drive\Semester 2\ITI1121\Assignment 4\3\TestAll.java [行：146] 失败：junit.framework.AssertionFailedError: null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:50:41.373

假设，`from`并且`to`都包含，替换这个

```
Elem<E> right = left.next.next; 
```

经过

```
Elem<E> right = left.next;
for (int i = 0; i <= to - from; i++)
    right = right.next 
```

`size`也发生变化。

```
size -= to - from + 1 
```

其他一切都保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:53:31.737

由于节点主要由其链接（下一个和上一个）定义，因此删除一组节点与仅删除一个节点大致相同。你有一个链 -1-2-3-4-5- 并且你删除了一些链接：-1 2-3-4 5-。

```
public LinkedList<Elem<E>> remove(int from, int to) 
{
    Elem<E> left = head;      
    for (int i=0; i < from; i++) 
    {
        left = left.next;

    }
    Elem<E> right = left;
    for(int i = 0; i< to - from; i++){
      right = right.next;
    }
    // removing the elements from the list;
    left.next = right;
    right.previous = left;
    size -= ((to - from)+1);

    //left to right are still linked, so just shove them into
    //a new linkedlist and return.
    LinkedList<E> ret = new LinkedList<E>();
    ret.head = left;
    ret.tail = right;
    return ret;
} 
```

# android - 重要的Android错误ReasonComponent.getShortClassName(); ?

> ID：15912157
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:45:09.023
> 
> 标签：android

我有：字符串列表[]；

```
ActivityManager m = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
List<ActivityManager.RunningAppProcessInfo> process = m.getRunningAppProcesses();

list = new String[process.size()];
    for(int i=0;i<process.size();i++)
    {

        list[i]=process.get(i).importanceReasonComponent.getShortClassName();    

    } 
```

如果我尝试运行它强制关闭的应用程序，请告诉我有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:54:04.810

如果不查看 logcat，我们无法告诉您出了什么问题。也就是说，查看文档，只为服务和内容提供者设置了重要性。

`process.get(i).importanceReasonCode != RunningAppProcessInfo.REASON_UNKNOWN`您应该在尝试获取组件之前检查这一点（这可能`null`是原因`REASON_UNKNOWN`）。

# c# - 泛型方法调用转换错误的原因？

> ID：15912159
> 
> 赞同：0
> 
> 时间：2013-04-09T20:45:12.273
> 
> 标签：c#, generics

泛型方法调用 - 没有从“IValue”到“IValueFox”的隐式引用转换。这段代码是怎么回事？

```
public interface IValueFox : IValue
{
    ...
}

private Mock<I> GenerateMockValue<I, T>(State state, T type)
where I : class, IValueFox
{
    ...
}

private void TestFoxValues()
{
    var newFox = this.GenerateMockValue<IValue, object>(State.Red, null);
    ...
} 
```

当我在方法“TestFoxValues”中调用“GenerateMockValue”时出现以下错误：

> “IValue”不能用作泛型类型或方法“GenerateMockValue”中的类型参数“I”。没有从“IValue”到“IValueFox”的隐式引用转换。

但我不太明白的是，为什么需要任何转换，因为 IValueFox 实现了 IValue。任何人都可以为我澄清这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:50:20.673

因为您需要一个 IValueFox，这就像IValue*的超集*。（每个 IValueFox 都是一个 IValue，但不是每个 IValue 都是一个 IValueFox）

因此，IValue 无法转换为 IValueFox。

where 子句说“我需要一个 IValueFox”，但在 TestFoxValues() 方法中你说“我只是要提供一个 IValue”。

这是一个更简单的例子：你的班级需要一辆车。汽车是轮式机动车辆。然后再往下说“这里，我为你提供了一辆轮式机动车辆，但我没有告诉你它到底是什么。可能是摩托车”然后你的班级说“我明确要求有一辆车！” <== 这是您遇到的错误。

# angularjs - AngularJS - 表单的服务器端验证

> ID：15912160
> 
> 赞同：2
> 
> 时间：2013-04-09T20:45:13.113
> 
> 标签：angularjs

我有兴趣在服务器端验证表单（所有字段），然后将错误列表发送回客户端以进行显示。因此必须在表单级别进行验证，但必须为每个字段设置有效性设置。我不确定如何实现它，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:57:16.930

AngularJS 提供了丰富的自定义验证框架。它在控制器范围内公开表单对象，并且该对象具有不同的属性，如,`$error`等，可用于创建自定义验证解决方案。基本上，您所要做的就是从服务器获取验证错误并相应地设置这些属性。`$dirty``$pristine`

在您的模板中，您将拥有

```
<form id="myForm" name="myForm" novalidate ng-controller="myController"> 
```

在您的控制器中，您将拥有

```
scope.myForm.$errors //and so on. 
```

[http://docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)

还可以使用此 Chrome 扩展程序在运行时检查表单对象 [https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?hl=en](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?hl=en)

# ios - 使用 AVAudioRecorder 在后台录制时看不到红色状态栏

> ID：15912168
> 
> 赞同：3
> 
> 时间：2013-04-09T20:45:38.043
> 
> 标签：ios, avaudiorecorder, audiounit, avaudiosession

我正在尝试在后台录制。当我使用 audiounit 技术时，我在背景中看到一个红色条。但是，当我使用 AV Foundation 框架 (AVAudioRecorder) 时，我看不到红条。我在所需的背景模式下有“应用程序播放音频”。这是 AudioSession 的代码片段

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryRecord error:&error];
[[AVAudioSession sharedInstance] setActive:YES error:&error]; 
```

AVAudioRecorder对应的代码

```
// ... url, recordSettings initialized properly
recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSettings error:&error];
if([recorder record] == YES)
    NSLog(@"Started recording"); 
```

Audio Unit对应的代码

```
// Describe audio component
AudioComponentDescription desc;
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_RemoteIO;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;

// Get component
AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);

// Get audio units
oserr = AudioComponentInstanceNew(inputComponent, &m_audioUnit);
checkStatus(oserr);

// Enable IO for recording
UInt32 flag = 1;
oserr = AudioUnitSetProperty(m_audioUnit,
                             kAudioOutputUnitProperty_EnableIO,
                             kAudioUnitScope_Input,
                             1,
                             &flag,
                             sizeof(flag));
checkStatus(oserr);

UInt32 enableOutput        = 0;    // to disable output
AudioUnitElement outputBus = 0;

// Disable output
oserr = AudioUnitSetProperty (
                              m_audioUnit,
                              kAudioOutputUnitProperty_EnableIO,
                              kAudioUnitScope_Output,
                              outputBus,
                              &enableOutput,
                              sizeof (enableOutput)
                              );
checkStatus(oserr);

oserr = AudioUnitInitialize(m_audioUnit);

oserr = AudioOutputUnitStart(m_audioUnit); 
```

我在 iOS 6、iPhone 5 上运行它。我不清楚为什么使用 AVAudioRecorder 时看不到录制状态栏。关于如何获得它的任何建议？

# spring - 何时分解 Spring MVC 控制器

> ID：15912177
> 
> 赞同：0
> 
> 时间：2013-04-09T20:46:14.613
> 
> 标签：spring, spring-mvc

我有一个 Spring MVC 控制器，它处理大约 6 或 7 个 URL，每个 URL 都有一个 POST 和 GET。大多数是相关功能（发出退款、更改价格等）。

是否有按 URL 或功能分解控制器的指南或最佳实践？

我的一部分希望为每个 GET/POST 对有一个单独的控制器。如果有任何重复的代码，我会创建一个实用程序类。

我很想知道其他人如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:17:23.930

我通常用 URL 来分解它。但我通常有一个 GET，然后是多个 POST 请求 (1)。但是，如果某些功能中只有 GET/POST 对，我将它们放在“父”控制器 (2) 中。

(1) 例如，对于“促销”功能（处理不同类型的促销），我会将 PromotionController 作为该功能的主要控制器，而不是为每种促销制作控制器。

(2) 例如，对于“注册”功能，它有几个步骤并且在每一步中只有 GET/POST 对，我会将其全部放在一个控制器中。

# java - Play Framework 间歇性地尊重 JAVA_HOME？

> ID：15912184
> 
> 赞同：0
> 
> 时间：2013-04-09T20:46:52.277
> 
> 标签：java, ubuntu, playframework-2.0

java6 是我们 ubuntu 机器上的默认 java，我在另一个目录中有 java7，其中 JAVA_HOME 指向 java7。

使用 sudo -E 在非 Play 项目文件夹中维护 JAVA_HOME 环境变量：

```
$ sudo -E /usr/share/play/play
       _            _
 _ __ | | __ _ _  _| |
| '_ \| |/ _' | || |_|
|  __/|_|\____|\__ (_)
|_|            |__/

play! 2.1.1 (using Java 1.7.0_17 and Scala 2.10.0), http://www.playframework.org

This is not a play application! 
```

好的太好了，play 使用的是 java 7！但是，如果您切换到实际 Play 应用程序的目录并运行相同的命令...

```
$ sudo -E /usr/share/play/play
[info] Loading project definition from /var/playtest/project

[info] Set current project to playtest (in build file:/var/playtest/)
       _            _
 _ __ | | __ _ _  _| |
| '_ \| |/ _' | || |_|
|  __/|_|\____|\__ (_)
|_|            |__/

play! 2.1.1 (using Java 1.6.0_26 and Scala 2.10.0), http://www.playframework.org

> Type "help play" or "license" for more information. 
```

现在play正在用java6启动。什么给出了，是开始更多的shell或其他东西而不是维护适当的JAVA_HOME？您将如何配置使用非默认 jdk 安装和 sudo for Play？

编辑：我在 /usr/share/play/play 脚本中添加了一个“echo $JAVA_HOME”，它在应用程序和非应用程序文件夹中都吐出了正确的 JDK 路径：“/usr/share/jdk7/bin/java” ，但是对于实际的 Play 项目，java6 仍然启动而不是 java7。

也许这是我应该开票的实际错误？Play 在执行开始时就知道正确的路径，但忘记了它并在某个时候开始使用默认值......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:45:00.350

这有一张[票](http://play.lighthouseapp.com/projects/82401/tickets/231-play20-does-not-honour-java_home)，虽然它似乎在 2012 年 3 月得到解决，今年 Play 2.1.1 已经发布。根据您的描述，它看起来不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T04:09:27.323

这个问题刚刚在 GitHub 上被标记为已修复，woot

[https://github.com/playframework/playframework/issues/985](https://github.com/playframework/playframework/issues/985)

# javascript - 对象找不到方法

> ID：15912187
> 
> 赞同：0
> 
> 时间：2013-04-09T20:46:59.383
> 
> 标签：javascript, html, state-machine, easeljs

我正在尝试制作一个状态机，但它没有成功。到目前为止，我已经得到了这段代码：

```
function makeStateMachine() {
    this.stateConstructors = new Object();
    this.currState = {
        update : function(e) {
            // Nothing to do here
        },
        exit : function() {
            // Nothing to declare
        }
    };
    this.nextState = null;

    var that = this;

    this.update = new function(e) {
        that.currState.update(e);

        that.changeState();
    };

    this.setNextState = new function(targetState) {
        that.nextState = targetState;
    };

    this.addState = new function(constructor, stateName) {
        that.stateConstructors[stateName] = constructor;
    };

    this.changeState = new function() {
        if (that.nextState != null) {
            that.currState.exit();
            that.currState = new that.stateConstructors[that.nextState]();

            that.nextState = null;
        }
    };
} 
```

当我尝试运行它时，firebug 会在更新函数的行中显示此错误：“TypeError: that.changeState is not a function”。当我取消注释 changeState() 行时，它开始抱怨 EaselJS 库不正确（我知道这是正确的，因为它适用于我的其他项目）。有人可以帮我吗？它可能非常简单（就像往常一样），但我无法发现错误。如果你们愿意，我可以发布其余的代码，但我认为这无关紧要。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:53:22.433

您应该将这些功能放在原型中。您也不应该使用`= new function(...`; 只需使用`= function(...`. 最后，您不需要`that`. 试试这个代码：

```
function makeStateMachine() {
    this.stateConstructors = {};
    this.currState = {
        update : function(e) {
            // Nothing to do here
        },
        exit : function() {
            // Nothing to declare
        }
    };
    this.nextState = null;
}

makeStateMachine.prototype.update = function(e) {
    this.currState.update(e);
    this.changeState();
};

makeStateMachine.prototype.setNextState = function(targetState) {
    this.nextState = targetState;
};

makeStateMachine.prototype.addState = function(constructor, stateName) {
    this.stateConstructors[stateName] = constructor;
};

makeStateMachine.prototype.changeState = function() {
    if (this.nextState != null) {
        this.currState.exit();
        this.currState = new this.stateConstructors[this.nextState]();
        this.nextState = null;
    }
}; 
```

# url-rewriting - 如何用 Nginx 替换下划线以破折号

> ID：15912191
> 
> 赞同：1
> 
> 时间：2013-04-09T20:47:33.387
> 
> 标签：url-rewriting, nginx

我是第一次使用 Nginx，但对它基本上一无所知。

我需要将 100+ URL 中的“_”替换为“-”。我想一定有一种简单的方法可以用 Nginx 做到这一点，但在谷歌上找不到任何东西。

谢谢！

编辑 ：

我的网址例如：[http ://www.mywebsite.com/this_category/page1.php](http://www.mywebsite.com/this_category/page1.php)

我需要这个变成：[http ://www.mywebsite.com/this-category/page1.php](http://www.mywebsite.com/this-category/page1.php)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T19:03:11.357

不，没有一个*简单*的方法可以做到这一点，但重写引擎仍然可以强制执行它，假设您可以对需要在单个 url 中转换的破折号数量设置合理的上限（或者即使您不这样做） t，见答案末尾。）

这是我的做法（经过测试的代码）：

```
rewrite ^([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4-$5-$6-$7-$8-$9;
rewrite ^([^_]*)_([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4-$5;
rewrite ^([^_]*)_([^_]*)_(.*)$ $1-$2-$3;
rewrite ^([^_]*)_(.*)$ $1-$2; 
```

四个重写分别将 url 中的前 8、4、2 和 1 个下划线转换为破折号。每条规则中的下划线数量是故意 2 的递减幂。此块是最有效的规则集，可以将单个 url 中出现的 0 到 15 次下划线转换为使用匹配或不匹配每个单独规则的所有 16 种组合。

您还会注意到，我`[^_]*`在每条规则中都使用了除最后一个之外的每个组。这避免了正则表达式引擎在不匹配的情况下执行不需要的回溯。基本上，在正则表达式中有九个通用星会在“最坏情况”中`.*`导致 O(n ⁹ ) 复杂性（这非常糟糕），这是不匹配的，这实际上是您最常见的情况。（我可以向那些希望真正了解底层库如何实际执行正则表达式的人推荐[这本书。）](http://regex.info/book.html)

出于这个原因，如果你可以将破折​​号的数量限制在 15 以内，我建议取消第一条规则，或者前两条。仅最后三个规则就可以翻译多达 7 个下划线；最后两个将翻译为 3。

最后，您没有提到将用户重定向到新网址。（与仅在带下划线的 url 和正确的 url 处提供内容相反，这通常会被搜索引擎坚果所反对。仅供参考。）如果这是您需要的，您将不得不将这些重写放入一个特殊的在 url 中存在下划线时触发的位置，并在四个重写结束时将用户重定向到新 url：

```
location ~ _ {
  rewrite ^([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4-$5-$6-$7-$8-$9;
  rewrite ^([^_]*)_([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4-$5;
  rewrite ^([^_]*)_([^_]*)_(.*)$ $1-$2-$3;
  rewrite ^([^_]*)_(.*)$ $1-$2;
  rewrite ^ $uri permanent;
} 
```

这还增加了在单个 url 中转换无限数量的下划线的好处，但代价是重定向到用户浏览器的次数更多。

高温;-P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-13T07:55:17.693

从 2013 年 4 月到 2015 年，对这个问题的现有答案都相当不理想和丑陋——一个依赖于过多的复制粘贴并且错误处理/报告不明确，另一个涉及让`301 Moved`客户处理未定义数量的不必要交互.

有一个更好的方法，[隐藏在](//stackoverflow.com/questions/14878635/nginx-rewrite-rule-to-remove-and)2013 年 2 月的一对 QA 对中——就在 2013 年 4 月的这个问题之前的几个月！它涉及依赖[http://nginx.org/r/rewrite](http://nginx.org/r/rewrite)`last`指令的参数，这将导致 nginx 停止处理重写指令，如果其中一个导致匹配，并返回寻找适当的“新”根据修改，在 nginx 中导致内部重定向循环最多 10 次（例如，10 个内部重定向，根据[http://nginx.org/r/internal](http://nginx.org/r/internal) ），如果超过 10 个循环的限制，则记录 a 。`last``location``$uri``500 Internal Server Error`

从某种意义上说，这个答案与原来的答案相似，只是你免费获得了 10 倍的额外因子，从而减少了复制粘贴的要求。

```
# Replace maximum of 3 or 1 underscores per internal redirect,
# produce 500 Internal Server Error after 10 internal redirects, 
# supporting at least 28 underscores (9*3 + 1*1) and at most 30 (10*3).
location ~ _ {
    rewrite "^([^_]*)_([^_]*)_([^_]*)_(.*)$" $1-$2-$3-$4 last;
    rewrite "^([^_]*)_(.+)$" $1-$2 last;
    return 301 $uri;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-26T18:00:17.723

这已经过时了，但我必须指出上面的答案需要更正，因为使用***n***不同数量的重写，其中***n***是 URL 中存在的下划线数量是完全不必要的。这个问题可以使用 3 种不同的位置指令和重写规则来解决，同时在其常规表达式中考虑以下场景：

1.  url 末尾有一个或多个下划线。
2.  url开头有一个或多个下划线
3.  url 的中间有一个或多个下划线

    ```
     location ~*^/(?<t1>\_+)(?<t2>[a-zA-Z0-9\-]*)$ { 
            return 301 $scheme://$host/-$t2; 
            }

            location ~*^/(?<t2>[a-zA-Z\_0-9\-]*)(?<t1>\_+)$ { 
            return 301 $scheme://$host/$t2-; 
            }

            location ~*^/(?<t2>[a-zA-Z0-9\-]*)(?<t1>\_+)(?<t3>[a-zA-Z0-9\-]*)$ { 
            return 301 $scheme://$host/$t2-$t3; 
            } 
    ```

这三个指令将递归地用'-'替换所有下划线，直到没有留下

-愿意

# jquery - 悬停似乎不起作用

> ID：15912192
> 
> 赞同：0
> 
> 时间：2013-04-09T20:47:38.540
> 
> 标签：jquery

这有效：

```
$('form').on('click','input:submit[name="Delete"]',function() {
    debugger;
}); 
```

但这不会：

```
$('form').on('hover','input:submit[name="Delete"]',function() {
    debugger;
}); 
```

版本：2.0.0b2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:49:52.147

您可以改用它：

```
$(".selector").on(
{
    mouseenter: function() 
    {
        //stuff to do on mouseover
    },
    mouseleave: function()
    {
        //stuff to do on mouseleave
    }
}); 
```

或者这样：

```
$(document).on('mouseover', 'input:submit[name="Delete"]', function() {
    //do something
});
$(document).on('mouseout', 'input:submit[name="Delete"]', function() {
    //do something
}); 
```

[http://jquery.com/upgrade-guide/1.9/#hover-pseudo-event](http://jquery.com/upgrade-guide/1.9/#hover-pseudo-event)

> 从 1.9 开始，不再支持事件名称字符串“hover”作为“mouseenter mouseleave”的同义词。这允许应用程序附加和触发自定义“悬停”事件。更改现有代码是一个简单的查找/替换，jQuery Migrate 插件中还支持“悬停”伪事件以简化迁移

# ruby-on-rails - Rails App - Sales Reporting by date best approaches

> ID：15912196
> 
> 赞同：0
> 
> 时间：2013-04-09T20:47:49.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, highcharts

I have a products model and an iTunes sales model. At the moment i'm fairly successfully reporting sales through scopes and ordered hashes. One flaw in the approach i've taken is that if there's no sales for a particular date I don't get a zero entry, just a gap for that date, which proves to be an issue when using something like Highcharts to plot the results.

I'm also soon to add new models for sales data from other sources, which will mean a rewrite to pull these figures into the product view and with my current approach I can see this being a complete headache when one report contains sales for a date but another doesn't.

I'm thinking I should instead for any given product be producing a range of dates (last 30 days for example) and then for those dates bring in the associated sales from my iTunes and other sales models. I'm just not sure how to approach this or if this is even the best approach to take.

Does anyone have experience of building something similar that can offer some guidance here please?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:31:02.333

这可能不是“正确的方式”，但您始终可以通过数据库中的日期查找表并在其上留下连接。这样，您可以确保查询结果中存在问题期间的所有日期，无论它们是否有数据。

# android - GSON 怎么理解 1、on、yes as booleans true？

> ID：15912197
> 
> 赞同：0
> 
> 时间：2013-04-09T20:47:50.160
> 
> 标签：android, gson

是否可以使用 GSON 解析字符串并将 '1'、'on'、'yes' 等值转换为布尔值 true？

所以，我有课：

```
public class OItem {
    public int id;
    public String name;
    public Boolean is_online;
 } 
```

然后我需要使用 GSON 将其转换为 OItem 对象

```
String string_json = "{id:200, name: Ivan Ivan, is_online : yes}";
Gson gson = new Gson();
OInfo = gson.fromJson(string_json, OInfo.class); 
```

如何使某些值被视为真，而其他值被视为假？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:03:26.280

那不是有效的 JSON。`{id:200, name: "Ivan Ivan", is_online : "yes"}`是有效的，但`name`和`is_online`值是字符串。

JSON 是类型化的 - 所有值都是字符串、数字、布尔值、对象或列表，因此这是任何（反）序列化程序所期望的。其他任何东西都不是 JSON，因此您将无法使用 JSON 解析器来解析它。

您想要做的是让 getter`OItem`对照“真”值列表检查字符串值，然后返回一个普通的布尔值。

# c# - RSA encrypt a string in C# using pre-existing keys generated by Java library

> ID：15912203
> 
> 赞同：2
> 
> 时间：2013-04-09T20:48:15.210
> 
> 标签：c#, java, rsa, rsacryptoserviceprovider

I need to port to C# a portion of an existing and working Java system which handles encrypting/decrypting a string. My C# solution will encrypt a string, and the existing Java system will need to be able to decrypt that string.

Both systems will need to use the existing private and public keys. The keys were generated from the Java system (".key" extension). Assume both systems will have safe and reliable access to the same key files.

The closest I've found is this thread ([RSA .NET encryption Java decryption](https://stackoverflow.com/questions/6572897/rsa-net-encryption-java-decryption?rq=1)) but it uses RSACryptoServiceProvider.FromXmlString(). Most other examples deal with generating your own keys using RSACryptoServiceProvider, and encrypting/decrypting all in the same solution. In short, I can't find any way to accomplish this.

For reference, here is the relevant Java code currently handling the encrypting (obvious cut/paste job so please ignore minor syntax errors; again, this is working fine currently)

```
import java.io.IOException;
import java.security.KeyFactory;
import java.security.NoSuchAlgorithmException;
import java.security.PublicKey;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.X509EncodedKeySpec;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.crypto.Cipher;
import org.apache.commons.codec.binary.Base64;

public class Encryptor{

    private static final String XFROM = "RSA";
    private static PublicKey iPubKey;

    public String encryptString() {
        // init
        byte[] pkeyByte = Util.grabKey("keys/private.key");
        X509EncodedKeySpec pubKeySpec = new X509EncodedKeySpec(pkeyByte);

        KeyFactory keyFactory = KeyFactory.getInstance("RSA");
        iPubKey = keyFactory.generatePublic(pubKeySpec);

        // encrypt          
        String uid = "string_to_encrypt";
        byte[] dataBytes = uid.getBytes();
        byte[] encBytes = encrypt(dataBytes, iPubKey, XFROM);

        String result = Base64.encodeBase64String(encBytes);

        Return result;
    }

    private static byte[] encrypt(byte[] inpBytes, PublicKey key, String xform) throws Exception {
        Cipher cipher = Cipher.getInstance(xform);
        cipher.init(Cipher.ENCRYPT_MODE, key);
        return cipher.doFinal(inpBytes);
    } 

} 
```

Questions:

Is this possible?

Any samples or documentation that can set me in the right direction?

# java - When copying a file to HDFS, how to control what nodes that file will reside on?

> ID：15912204
> 
> 赞同：2
> 
> 时间：2013-04-09T20:48:23.670
> 
> 标签：java, linux, hadoop, mapreduce, hdfs

I'm dealing with kind of a bizarre use case where I need to make sure that File A is local to Machine A, File B is local to Machine B, etc. When copying a file to HDFS, is there a way to control which machines that file will reside on? I know that any given file will be replicated across three machines, but I need to be able to say "File A will DEFINITELY exist on Machine A". I don't really care about the other two machines -- they could be any machines on my cluster.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:27:32.243

我不这么认为，因为通常当文件大于 64MB（块大小）时，文件块的主副本将驻留在多个服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:41:42.673

HDFS 是一个分布式文件系统，而 HDFS 是特定于集群（一台机器或多台机器）的，一旦文件位于 HDFS，您就会失去下面的机器或机器概念。正是这种抽象使它成为最佳用例。如果文件大小大于复制块大小，则文件将被切割成块大小并根据复制因子，这些块将被复制到集群中的其他机器。这些块移动基于

在您的情况下，如果您有 3 个节点集群（+1 个主名称节点），您的源文件大小为 1 MB，您的复制大小为 64MB，复制因子为 3，那么您将在所有 3 个节点中拥有 3 个块副本，包括您的 1MB 文件，但是从 HDFS 的角度来看，您仍然只有 1 个文件。一旦文件复制到 HDFS，你真的不考虑机器因素，因为在机器级别没有文件，它是文件块。

如果您真的想确保出于某种原因，您可以将复制因子设置为 1 并拥有 1 个节点集群，这将保证您的奇怪要求。

最后，您始终可以在 Hadoop 集群中使用 FSimage 查看器工具来查看文件块的位置。更多详细信息位于[此处](http://cloudcelebrity.wordpress.com/2013/03/20/understanding-hdfs-cluster-fsimage-image-and-looking-its-contents/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:18:45.693

我最近发现这可能会解决您想要做的事情：[控制 HDFS 块放置](http://hadoopblog.blogspot.in/2009/09/hdfs-block-replica-placement-in-your.html)

# xml - 将博客从 WordPress 移植到 BlogEngine.NET

> ID：15912205
> 
> 赞同：0
> 
> 时间：2013-04-09T20:48:25.097
> 
> 标签：xml, blogengine.net

我正在将博客从 WordPress 移植到 BlogEngine.NET。我用 C# 编写了一个小型 WinForm 应用程序，它从 WordPress 站点读取所有网页（即帖子）并为每个帖子输出一个 XML 文件（默认情况下，BlogEngine.NET 使用 XML 来存储它的帖子，并且可以很好地满足我的目的）。然后，我将它们通过 FTP 上传到 BlogEngine.NET 站点，并将它们放在 App_Data/posts 下。

那时，我导航到博客的“帖子”页面，我希望在其中看到所有帖子的列表。不幸的是，只显示了 BlogEngine.NET 中包含的单个示例帖子。实际上，我窃取了 BlogEngine.NET 用于创建 XML 文件的代码，以便从 WordPress 移植帖子并创建 XML 文件，因此我很确定我的文件格式正确。

为什么我的帖子不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:42:16.740

1.  您是否重新启动了您网站的 app_pool？

每当您通过 ftp 或文件管理器直接上传到站点时，您都​​需要重新启动 app_pool，以便它可以使用您的新帖子/页面刷新系统内存。

1.  您可以在此处发布已导入的 xml 文件帖子之一的精确副本吗？

对我来说，由于您没有收到错误，因此更可能是 app_pool 重启问题。

您可以通过重新上传 web.config 文件或转到

如果您想在 BE 管理面板中使用，则可以启用和禁用扩展。

您也可以尝试在本地计算机上使用它。下载整个站点并尝试从本地计算机运行。

如果它在本地而不是服务器上工作，那么它是一个服务器问题。

# angularjs - Angular 数据绑定作为函数参数不起作用

> ID：15912207
> 
> 赞同：0
> 
> 时间：2013-04-09T20:48:27.787
> 
> 标签：angularjs

```
<input type="text" value="{{codes[0].code}}" ng-click="newNumber(0)" />
<input type="text" value="{{codes[1].code}}" ng-click="newNumber({{codes[1].id}})" /> 
```

第一个 ng-click 事件在我的控制器中触发很好，但第二个事件什么也不做。

我也尝试过 concat'ing ......还有其他方法我应该这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:33:33.713

# ng-点击

的值`ng-click`已经被评估为角度表达式。因此，您不需要`{{ }}`. 阅读[http://docs.angularjs.org/guide/expression](http://docs.angularjs.org/guide/expression)了解更多信息。看看第二个例子，它将有助于澄清这一点。

# ng模型

此外，`ng-model`应该用于数据绑定。例如，看看这个 jsfiddle：http: [//jsfiddle.net/bCpW9/8/](http://jsfiddle.net/bCpW9/8/)和下面的注释。

`<li ng-repeat="code in codes">`

这将遍历`codes`控制器中定义的集合。`<li>`它为集合中的每个元素创建一个`codes`。

`<input ng-model="codes[$index].code" />`

在 each`<li>`中，`<input>`为当前代码创建一个。每个`input`都通过设置绑定到`codes`数组中的相应元素`ng-model`。例如，在第一个`input`字段中键入一个新代码。`code`如您在右侧所见，它会自动使用您键入的内容更新相应的模型。

我希望这会有所帮助。

# vb.net - 自动登录程序（隐藏表单）vb.NET Windows 窗体

> ID：15912209
> 
> 赞同：1
> 
> 时间：2013-04-09T20:48:36.190
> 
> 标签：vb.net, winforms, visual-studio, visible, autologin

好吧，我这里有点麻烦。我正在为应用程序创建登录窗口，但我试图让应用程序在启动时自动登录（即执行用户登录时发生的功能），而不显示登录屏幕，如果设置已经有一个存储的电子邮件和密码。我有一个通知系统托盘图标，显示应用程序何时运行，当表单不可见时，会弹出一个气球通知，让用户知道它仍在运行，然后单击图标打开登录屏幕。

看看下面的代码。我知道这个 If Not 事件正在被调用并且工作正常，因为它执行语句中的所有内容，**除了** *隐藏表单。*为什么它不变成隐形？我也试过 Me.Hide，同样的问题。弹出气球通知，文本框填充以前存储的数据......但表单保持可见......

```
Private Sub RadFrmLogin_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    'Checks settings to see if email and password have already been stored and enters them into text fields, proceeds to automatically update access list
    If Not String.IsNullOrEmpty(My.Settings.Email) And Not String.IsNullOrEmpty(My.Settings.Password) Then
        TxtEmail.Text = My.Settings.Email
        TxtPassword.Text = My.Settings.Password

        Me.Visible = False

        'Displays Balloon Tip
        ntfySystemTrayIcon.ShowBalloonTip(800)
    End If

End Sub 
```

作为补充说明，我添加了一个测试按钮来隐藏表单，并且效果很好：

```
Private Sub BtnHide_Click(sender As Object, e As EventArgs) Handles BtnHide.Click
    'Hides form(for testing notification tray icon and balloon tip
    Me.Visible = False
    ntfySystemTrayIcon.ShowBalloonTip(1000)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:38:36.943

（删除了我愚蠢的默认调试指令，因为它们根本没有帮助）

**更新**

好吧，之前也有类似的问题，看这里：[C#/.NET - WinForms - Instantiate a Form without show it](https://stackoverflow.com/questions/807005/c-net-winforms-instantiate-a-form-without-showing-it)

简短说明：通常使用 form1.show 之类的东西，因此在 form_load 完成后总是将其更改为 visible = true 。

使用指示的事件 form_shown 并添加 visible=false

或其他用户建议将启动属性更改为最小化并激活以隐藏任务栏中的程序。这有助于防止烦人的闪烁。我想在那之后您可以更改选项。

**更新 2** 以下似乎运作良好：

```
Private _IsVisible As Boolean
Public Property IsVisible() As Boolean
    Get
        Return _IsVisible
    End Get
    Set(ByVal value As Boolean)
        _IsVisible = value
        If _IsVisible Then
            Me.WindowState = FormWindowState.Normal
            Me.ShowInTaskbar = True
            Me.Visible = True
            Me.Activate()
        Else
            Me.WindowState = FormWindowState.Minimized
            Me.ShowInTaskbar = False
            Me.Visible = False
        End If
    End Set
End Property 
```

如果你想摆脱小任务栏闪烁，然后更改表单属性 showInTaskbar。在 form_load 期间更改它时，任务栏似乎有一个短暂的移动。

并使其完美，在 form.Shown 添加以下代码：

```
Private Sub Form1_Shown(sender As Object, e As EventArgs) Handles Me.Shown
    Me.Visible = IsVisible
End Sub 
```

现在已经足够使用了

```
IsVisible = False 
```

在 form_Load 中，或者如果你想显示它

```
IsVisible = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:35:59.687

只是一些想法：

如果您的所有任务都在 _Load 事件中完成，请尝试调用 End。当然，这也会删除您的托盘图标。

另一种可能性是在 _Shown 事件中调用 Me.Visible。这可能会导致屏幕闪烁。如果是这样，也许您可​​以在 _Load 中将表单放置在屏幕之外。

# r - 在 R 中用另一个值替换一个值列表

> ID：15912210
> 
> 赞同：20
> 
> 时间：2013-04-09T20:48:39.150
> 
> 标签：r

我有一个包含任何这些值的数据框。

```
from=c("A","C","G","T","R","Y","M","K","W", "S","N") 
```

我想相应地替换为

```
to=c("AA","CC","GG","TT","AG","CT","AC","GT","AT", "CG","NN") 
```

最好的方法是什么，循环所有要替换的值？或循环矩阵位置。或任何其他解决方案？

```
dd<-matrix(sample(from, 100, replace=TRUE), 10) 

dd
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,] "K"  "S"  "G"  "T"  "R"  "N"  "A"  "C"  "W"  "M"  
 [2,] "Y"  "K"  "S"  "G"  "T"  "R"  "N"  "A"  "C"  "W"  
 [3,] "M"  "Y"  "K"  "S"  "G"  "T"  "R"  "N"  "A"  "C"  
 [4,] "W"  "M"  "Y"  "K"  "S"  "G"  "T"  "R"  "N"  "A"  
 [5,] "C"  "W"  "M"  "Y"  "K"  "S"  "G"  "T"  "R"  "N"  
 [6,] "A"  "C"  "W"  "M"  "Y"  "K"  "S"  "G"  "T"  "R"  
 [7,] "N"  "A"  "C"  "W"  "M"  "Y"  "K"  "S"  "G"  "T"  
 [8,] "R"  "N"  "A"  "C"  "W"  "M"  "Y"  "K"  "S"  "G"  
 [9,] "T"  "R"  "N"  "A"  "C"  "W"  "M"  "Y"  "K"  "S"  
[10,] "G"  "T"  "R"  "N"  "A"  "C"  "W"  "M"  "Y"  "K" 
```

我使用了从到到的循环。

```
myfunc<-function(xx){

  from=c("A","C","G","T","R","Y","M","K","W", "S","N");
  to=c("AA","CC","GG","TT","AG","CT","AC","GT","AT", "CG","NN");
  for (i in 1:11){
      xx[xx==from[i]]<-to[i];
  }
  return(xx);
} 
```

它适用于小矩阵，但对于大矩阵需要很长时间。有什么有效的解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-09T20:54:00.190

创建地图

```
map = setNames(to, from) 
```

然后从 A 到 B

```
dd[] = map[dd] 
```

该地图用作查找，将“来自”名称与“到”值相关联。分配保留矩阵尺寸和暗名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T20:56:58.117

```
matrix(to[match(dd,from)], nrow=nrow(dd)) 
```

`match`返回一个没有维度的向量，因此您需要重新创建矩阵。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T21:10:29.897

我使用了与 OP 类似的 for 循环，并对解决方案进行计时。Theodore 的速度稍快，但 Martin 的可读性很强。

```
dd<-matrix(sample(from, 100, replace = TRUE),10,10)
ddr <- dd
ddm <- dd
ddt <- dd

benchmark(roman = {
  for (i in 1:length(from)) {
    ddr[ddr == from[i]] <- to[i]
  }},
  martin = {
    map = setNames(to, from)
    ddm[] = map[dd]
  },
theodore = {ddt <- matrix(to[match(dd,from)], nrow=nrow(dd))},
          replications = 100000
)
      test replications elapsed relative user.self sys.self user.child sys.child
2   martin       100000    1.93    1.191      1.91        0         NA        NA
1    roman       100000    8.23    5.080      8.11        0         NA        NA
3 theodore       100000    1.62    1.000      1.61        0         NA        NA 
```

# javascript - 如何判断一个 HTML 元素是否在 JavaScript 中有一个特定的类？

> ID：15912211
> 
> 赞同：1
> 
> 时间：2013-04-09T20:48:40.553
> 
> 标签：javascript, html, class, css

有没有一种简单的方法来判断一个 HTML 元素是否有一个特定的类？例如：

```
var element = document.getElementById('something');
if (element.class == 'car') 
```

当然，一个元素可以有多个类，所以该`if`语句可能必须采用以下形式？

```
if (element.class.includes('car')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:52:09.920

```
var element = document.getElementById("myid");
if (element.classList.contains("myclass")) { /* do stuff */ } 
```

在此处阅读有关 element#classList 的更多信息：[https ://developer.mozilla.org/en-US/docs/DOM/element.classList](https://developer.mozilla.org/en-US/docs/DOM/element.classList)

此链接还包含旧浏览器的 polyfill。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:50:01.850

如果使用 jQuery 是一个选项，您可以使用`hasClass()`查看[http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

如果没有，您可以查看纯 JS 实现 -[测试元素是否包含类？](https://stackoverflow.com/questions/5898656/test-if-an-element-contains-a-class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:50:38.527

出于奇怪的原因，包含类的成员的名称是`className`，而不是`class`。多个类名用空格分隔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:52:12.290

你需要使用：

```
 class = document.getElementById("{id_of_element").getAttribute("class"); 
```

然后

```
 String[] vals = class.split(" ");
 var match = false;
 for (i = 0; i < vals.length;i++) {
   if (vals[i].equalsIgnoreCase('car') {
     match = true;
     break;
   }
 }

 if (match) {
  //do something
 } 
```

HTH。

# ruby - 启动刀配置命令时出错

> ID：15912212
> 
> 赞同：3
> 
> 时间：2013-04-09T20:48:50.003
> 
> 标签：ruby, chef-infra, knife

我尝试开始使用 chef，所以我在笔记本电脑（操作系统：OSX 10.8）上使用 ruby​​ 2.0.0-p0 安装了 chef gem，但是当我尝试“knife configure”时，我得到了这个消息：

```
/Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:106:in `require': cannot load such file -- rubygems/format (LoadError)
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:106:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/provider/package/rubygems.rb:34:in `<top (required)>'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:58:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:58:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/providers.rb:60:in `<top (required)>'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:58:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:58:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef.rb:25:in `<top (required)>'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:58:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:58:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chefspec-0.9.0/lib/chefspec.rb:1:in `<top (required)>'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:110:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:110:in `rescue in require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:35:in `require'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chefspec-0.9.0/lib/chef/knife/cookbook_create_specs.rb:1:in `<top (required)>'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/knife/core/subcommand_loader.rb:37:in `load'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/knife/core/subcommand_loader.rb:37:in `block in load_commands'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/knife/core/subcommand_loader.rb:37:in `each'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/knife/core/subcommand_loader.rb:37:in `load_commands'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/knife.rb:119:in `load_commands'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/knife.rb:167:in `run'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/lib/chef/application/knife.rb:123:in `run'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/chef-11.4.0/bin/knife:25:in `<top (required)>'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/bin/knife:23:in `load'
from /Users/maximeheckel/.rbenv/versions/2.0.0-p0/bin/knife:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-03T05:18:36.557

接受的答案并不完全正确。问题不是 ruby​​ 2.0，而是 ruby​​gems 2.x。如果您运行`gem update --system 1.8.25`降级到 2.x 之前的 ruby​​gems，一切都会像冠军一样工作。

**注意：**我不必在本地执行此操作，但这就是我`knife bootstrap`对远程服务器工作的方式。我在本地机器上运行 ruby​​ 2.0，使用最新的 ruby​​gems 和 chef 11.4.4，其他一切似乎都正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-23T21:07:22.710

根据[opscode 的这个问题，](http://tickets.opscode.com/browse/CHEF-3933)这是一个错误。它已在 Chef 11.6.0 中修复。

问题是截至今天 (2013-06-23) 只有 Chef 11.4.4 在 ruby​​gems 上

所以，现在使用 1.9.x 或 ruby​​gems 1.8.25 都可以，直到下一个版本的 chef 出来。可以从[https://github.com/opscode/chef.git构建它](https://github.com/opscode/chef.git)

我最终用这个文件修补了我的厨师 11.4.4 lib/chef/provider/package/rubygems.rb：[https://github.com/opscode/chef/blob/d6748efde62502ab6f5d97052f46ca00352497ef/lib/chef/provider/package/rubygems。 rb](https://github.com/opscode/chef/blob/d6748efde62502ab6f5d97052f46ca00352497ef/lib/chef/provider/package/rubygems.rb)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:41:26.883

我在尝试将 Chef（10.24 和 11.4）与 Ruby 2.0 一起使用时遇到了类似的错误 - 所以我认为 Chef 还不兼容 Ruby 2.0 :(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-27T05:35:17.613

如果您使用的是系统 ruby​​（例如 /usr/bin/ruby），则接受的答案很好，但它对我不起作用，因为我使用的是 RVM。如果您使用 RVM，我找到[了一个等效的解决方案：](http://www.linuxguy.in/solved-cannot-load-such-file-rubygemsformat-loaderror/)

`rvm rubygems 1.8.25`将为您的 RVM ruby​​ 安装 ruby​​gems 版本 1.8.25。

# javascript - 使用 Rafael.js 绘制带有虚线的矩形

> ID：15912213
> 
> 赞同：8
> 
> 时间：2013-04-09T20:48:52.727
> 
> 标签：javascript, svg, firebug

我正在使用 Rafael.js 在图像上绘制矩形。我设置描边颜色的问题是背景可能是深色或浅色或任何颜色。我认为处理这个问题的最好方法是使用虚线。然而这个电话

```
circle = Canvas.paper.rect(left, topCoord, width, height).attr({stroke-dasharray:"---"}); 
```

不起作用。Firebug（在 FireFox 20.0 上）返回一条错误消息，指出我的 .js 文件中的现有函数不存在。看来 stroke-dasharray 对矩形无效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T20:56:49.607

基本 JavaScript 错误：

```
{stroke-dasharray:"---"} 
```

应该：

```
{"stroke-dasharray":"---"} 
```

另外：`"---"`不是`stroke-dasharray`;支持的值 它应该是：

```
{"stroke-dasharray":"--"} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T21:36:54.497

没有“---”，可能的笔划破折号：`[“”, “-”, “.”, “-.”, “-..”, “. ”, “- ”, “--”, “- .”, “--.”, “--..”]`

为笔画着色的一种方法是使用 HSV 或 HSL 空间，然后选择相反（或附近）的光谱。尝试以下答案：[给定一个 RGB 值，我如何创建色调（或阴影）？](https://stackoverflow.com/questions/6615002/given-an-rgb-value-how-do-i-create-a-tint-or-shade?lq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-30T16:24:08.520

“stroke-dasharray”值是：

```
"-"     [shortdash]
"."     [shortdot]
"-."    [shortdashdot]
"-.."   [shortdashdotdot]
". "    [dot]
"- "    [dash]
"--"    [longdash]
"- ."   [dashdot]
"--."   [longdashdot]
"--.."  [longdashdotdot] 
```

# c# - WPF MVVM 可编辑组合框新值为空

> ID：15912218
> 
> 赞同：0
> 
> 时间：2013-04-09T20:49:08.537
> 
> 标签：c#, wpf, mvvm, combobox

在这里尝试了所有类似问题的解决方案，仍然不行。我有一个`ComboBox`应该适用于选择现有项目和/或添加新项目。只有选定的项目部分有效。类别只是一个带有`Name`和的对象`Id`。

提前致谢！

`XAML`

```
<ComboBox Name="CbCategory" ItemsSource="{Binding Categories}"
    SelectedItem="{Binding SelectedCategory.Name, UpdateSourceTrigger=PropertyChanged}"
    Text="{Binding NewCategory.Name}" DisplayMemberPath="Name" 
    IsEditable="True"/> 
```

`Code behind`

```
private Category _selectedCategory;

public Category SelectedCategory
{
    get { return _selectedCategory; }

    set
    {
        if (Equals(_selectedCategory, value)) return;
        _selectedCategory = value;
        SendPropertyChanged("SelectedCategory");
    }
}

private Category _newCategory;

public Category NewCategory
{
    get { return _newCategory; }

    set
    {
         if (Equals(_newCategory, value)) return;
         _newCategory = value;
          SendPropertyChanged("NewCategory");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:50:52.283

您的`Text`Binding 不起作用，因为您正在绑定一个`null` `Category`属性。而是实例化它。

```
public Category NewCategory
{
    get { return _newCategory ?? (_newCategory = new Category()); }
    set
        {
          if (Equals(_newCategory, value)) return;
          _newCategory = value;
           SendPropertyChanged("NewCategory");
         }
} 
```

**编辑：**根据您的评论详细说明：

您的`ComboBox.Text`绑定设置为`"{Binding NewCategory.Name}"`，因此无论 的值`SelectedCategory`是什么，该`Text`属性都将始终反映 的名称`NewCategory`。

当`NewCategory`为 null 时，该`Text`属性没有可绑定的内容，因此无法执行 2-way 绑定（即`Text`无法将属性的值传回给`NewCategory.Name`，因为那样会导致一个`NullReferenceException`（因为`NewCategory`为 null）。

这不会影响 的情况`SelectedItem`，因为它直接绑定到`SelectedCategory`属性，而不是它的子属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T09:04:29.567

创建新变量以保留组合框的文本。如果 selectedItem 具有 null 值，则将组合框的文本作为新项目，

代码 ：

```
<ComboBox Name="CbCategory" ItemsSource="{Binding Categories}"
    SelectedItem="{Binding SelectedCategory.Name, UpdateSourceTrigger=PropertyChanged}"
    Text="{Binding Name}" DisplayMemberPath="Name" 
    IsEditable="True"/>

private String _name;
public Category Name
{
    get { return _name; }

    set
    {        
         _name = value
         SendPropertyChanged("Name");
    }
}

public ICommand ItemChange
{
 get
 {
   `return new RelayCommand(() =>`{
                    try{string item = this.SelectedCategory.Code;}
catch(Exception ex){string item = this.Name;}
                }, () => { return true; });
            }
        } 
```

# .net - Can I add non UTF-8 content to a .net resx file?

> ID：15912219
> 
> 赞同：0
> 
> 时间：2013-04-09T20:49:11.050
> 
> 标签：.net, utf-8, resources, resx

I'm using resx files to store localized content for some web apps. I've been asked to write a test mechanism to know if those resource files have non UTF-8 content on the values.

The resx files are XML files that on their header specify that they are UTF-8 encoded. So my question (maybe obvious or silly) is, can somebody add non UTF-8 strings into the resource file values?

I've already searched how to get the encoding for some string, but there is not bullet proof method, so I'm not sure if that test that I've been asked to create is either needed or possible...

EDIT Just for clarification, the test should be performed within the localized app, and if the string is not a valid UTF-8 then display a default (localized) value

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:00:20.993

在某种程度上，是的。您可以毫无困难地存储纯 ASCII 文本。

在那之外？你最好的办法是为它写一个测试。在代码中定义一些非 UTF8 字符串，将它们存储在 .resx 文件中（`ResxRescourceWriter`为简单起见），然后将它们拉回。将它们打印到屏幕上，看看它们是否匹配。

当然也可以更改 resx 文件的编码。如果这样做，则可以存储以该格式编码的字符串。

你最好的选择是尝试看看会发生什么。

编辑：基于评论中的澄清。

如果您需要验证现有值，最好的办法是遍历 resx 文件，将所有文本转储到 .txt 文件中。

如果您随后在 Notepad++ 中打开该文件，则可以指定 UTF-8 编码。任何无法以可读方式显示的内容都不是 UTF-8 文本，并且在从 resx 中拉出时将无法正确显示。

# javascript - 如何在不触发 PATCH 而不是 POST 的情况下将主干模型属性的子集保存到服务器

> ID：15912222
> 
> 赞同：3
> 
> 时间：2013-04-09T20:49:18.700
> 
> 标签：javascript, backbone.js

如果我将任何“额外”属性发送回服务器，我遇到的 API 就会爆炸。现在，我确定我已经打破了一些 MVC 规则或通过在我的客户端 Backbone 模型上拥有服务器端不存在的属性，但是，我需要做的是发起一个 CREATE 请求，但只通过*一些*我从我的模型中发起 CREATE 请求的属性。

我可以很容易地在主干中做到这一点：

```
Model.save({key: val}, {patch: true}); 
```

然后修改主干同步方法映射默认补丁路由为 POST 而不是 PATCH，这让我得到了我正在寻找的东西，*除了*稍后我希望在适当的时候真正能够 PATCH（而不是 POST）。我*只*需要它来发布，就好像它只是为创建操作进行修补（而不是更新操作！）。

所以，简而言之，我需要采取这样的措施：

```
new Backbone.Model({'foo': 'bar', 'baz': 'beh'}); 
```

并告诉它自己同步到服务器，但只发送'foo'而不发送'baz'，但它必须作为POST发送（它*不能*是PATCH）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T00:50:05.087

下面是一个保存覆盖，可以放置在基础 Backbone 模型或任何适当的单个模型中。它可能无法涵盖所有​​用例，但似乎适合这个用例。

JS 小提琴：http: [//jsfiddle.net/hEN88/1/](http://jsfiddle.net/hEN88/1/)

此覆盖允许您在任何模型上设置“serverAttrs”数组以过滤哪些属性被发送到服务器。

```
save: function (attrs, options) { 
    attrs = attrs || this.toJSON();
    options = options || {};

    // If model defines serverAttrs, replace attrs with trimmed version
    if (this.serverAttrs) attrs = _.pick(attrs, this.serverAttrs);

    // Move attrs to options
    options.attrs = attrs;

    // Call super with attrs moved to options
    Backbone.Model.prototype.save.call(this, attrs, options);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:01:01.533

这个问题听起来可能是[同步时排除模型属性（Backbone.js）](https://stackoverflow.com/questions/13051966/exclude-model-properties-when-syncing-backbone-js)和模型[.save（）的Backbone.js/express.js参数的欺骗](https://stackoverflow.com/questions/11522286/backbone-js-express-js-parameters-for-model-save/11522791#11522791)

这两种情况的答案都归结为覆盖该`save()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T09:25:38.927

您可以覆盖`toJSON`方法

```
// set viewOnlyAttrs for attributes no need to save
viewOnlyAttrs: ['url'],

toJSON: function(options) {
  var obj = this;

  // if is calling from model's save method
  if(_.has(options || {}, 'emulateHTTP') && obj.viewOnlyAttrs)
    return _.omit(obj.attributes, obj.viewOnlyAttrs);

  return Backbone.Model.prototype.toJSON.call(this, options);
} 
```

# java - 如何组织辅助函数

> ID：15912224
> 
> 赞同：1
> 
> 时间：2013-04-09T20:49:24.627
> 
> 标签：java, android, string, helpermethods

我需要创建很多帮助程序来转换字符串。

就像是 ：

```
String Function1(String s) {} 
```

我想从任何地方给他们打电话`Activity`。

做这个的最好方式是什么 ？我是否需要创建一个类？我想只拥有一个包含所有这些功能的单独文件。这是一个包裹的候选人吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T20:56:27.730

使用公共静态方法创建一个类，然后您可以在任何地方使用 ClassName.methodName(parameters) 调用它们：

```
public class Util {
  public static String methodOne(String param) {
      //do something
      return param;
  }

  public static String methodTwo(String param) {
      //do something
      return param;
  }

  //...
} 
```

在其他类中：

```
String someString = Util.methodOne("Some String");
// ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T20:51:33.850

```
Package: util
Class: StringUtils
Methods: all static 
```

这就是我会做的（实际上总是这样做）。

您可以而且应该在类型之间有所不同。`DateUtils`通常，您将诸如, `StringUtils`,`AndroidUtils`等之类的东西分组`MathUtils`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T20:55:43.430

我会选择一个实用程序类，我总是把我的实用程序类放在一个 com.xxx.xxx.util 包中。

# css - 使用百分比表示高度时，这些额外的像素从何而来？

> ID：15912225
> 
> 赞同：0
> 
> 时间：2013-04-09T20:49:24.963
> 
> 标签：css, responsive-design, sticky-footer

我目前正在尝试使用我之前在我建立的各种网站上成功使用过多次的粘性页脚。这是链接：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

这次的问题是，我试图让它更具响应性，因此我不想为高度使用特定的像素量，所以我尝试切换到百分比：

```
html, body {
    height: 100%; margin: 0px; padding: 0px;
}

#wrapper{
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin-bottom: -25%;
    background: lime
}

#spacer{
    background: blue;
    height: 25%;             /* This should be exactly the same as #footer height. */
}

#footer{
    background: magenta;
    height: 25%;
} 
```

这是HTML：

```
<!DOCTYPE html">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>

        <link href="https://localhost/wordpress/wp-content/themes/TesterTheme/style.css" rel="stylesheet" type="text/css" />

    </head>

    <body>
        <div id="wrapper">

Content goes here.

</div><!-- End Wrapper -->

<div id="spacer"></div>

<div id="footer">
</div>

</body>
</html> 
```

正如我之前所说，当我使用特定的像素数量（例如 200 像素）作为高度（并将包装器边距底部更改为 -400 像素）时，它可以正常工作。我已经读过，当您使用百分比作为高度时，它使用的是父元素高度的百分比，并且我需要确保定义了所有祖先元素的高度。我想我会这样做......因为 body 和 html 是页脚的唯一祖先。这实际上就是它的作用。我用像素尺测量了它，页脚和分隔符测量到我视口的 25%。然而，天知道为什么，我的浏览器旁边出现了一个滚动条（是的......它是全屏的），好像身体有一些神奇地延长了自己额外的五十个像素左右。请帮忙，到目前为止我已经花了九个小时，到处搜索并尝试许多不同的策略，但我总是得到相同的结果。为什么百分比没有产生预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:08:37.667

有很多选项可以解决此问题。以你的方式使用百分比不是一个好主意..它类似于如何`this`在 javascript 中进行更改。

就个人而言，我会走这条路来响应。

```
<div class="wrap">
  <div class="stuff"></div>
  <div class="stuff"></div>
  <div class="stuff"></div>
</div>
<div id="footer"></div> 
```

这样，页脚总是设置在其余内容的下方。无需在多个位置指定页脚高度。在此设置中随意使用百分比。

如果您对它不是 100% 满意，请使用 jQuery/javascript 来拉伸内容。甚至，CSS 媒体查询。

# python - 使用 Paramiko 时如何关闭本地回声？

> ID：15912226
> 
> 赞同：2
> 
> 时间：2013-04-09T20:49:35.873
> 
> 标签：python, ssh, paramiko

我正在使用 Paramiko 连接到远程 Cisco 路由器和交换机。连接到这些设备时，我希望能够在进入“配置”模式时关闭回声。这样，我可以向远程系统发出命令并避免看到它们返回（从而只专注于查找错误消息）。

我正在执行以下命令来获取 Cisco 设备的 shell：

```
 self.chan = self.transport.open_session()
    self.chan.get_pty()
    self.chan.invoke_shell() 
```

现在，我希望能够为 pty 获取 paramiko 的文件描述符并发出如下内容：

```
 fd = self.chan.fileno()
    old = termios.tcgetattr(fd)
    old[3] = old[3] | termios.ECHO
    termios.tcsetattr(fd, termios.TCSADRAIN, old) 
```

但是，*termios*阻塞了 chan.fileno() 返回的文件描述符。

我见过的大多数关闭回声的[建议都需要在远程机器上发出 bash 命令，例如“stty -echo”，但 Cisco 路由器没有运行 bash。](https://stackoverflow.com/questions/5633472/how-do-i-turn-off-echo-in-a-terminal)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:01:23.973

在花了很多时间之后，我最终回到了[pxssh](http://pexpect.sourceforge.net/pxssh.html)库。这个库明确有一种关闭回声的方法：

```
 connection.setecho(False) 
```

...这正是我所需要的。它还（通过父模块[pexpect](http://pexpect.sourceforge.net/pexpect.html)）有一种方法可以使用完全相同的库基础设施来处理 telnet（不幸的是，这在 Cisco 世界中仍然经常需要），因此您可以拥有一个使用 telnet 或 ssh 的连接对象以完全相同的方式工作。

虽然 Paramiko 看起来像一个更干净、维护得更好的库，但 Paramiko 社区的共识似乎是，如果你想停止回显，你需要告诉远程系统不要回显。但是当远程系统不是 linux/bash 进程时，这变得困难或不可能。Pxssh 是您对 ssh 会话进行更细粒度控制所需的库。

# html - 均匀空间水平导航ul

> ID：15912233
> 
> 赞同：0
> 
> 时间：2013-04-09T20:49:59.410
> 
> 标签：html, css, html-lists, margin

有人可以帮我弄清楚如何将我的 ul 均匀地分布在我的导航中吗？我基本上想要左右 5px 的填充，然后我希望文本在剩余空间中均匀分布。

```
body {
        background: #ffffff;
        text-align: center;
        font-family: helvetica, arial, sans-serif;
        line-height: 25px;
        margin-top: 0px;
    }

h1 {
    font-size: 34px;
    line-height: 24px;
    color: #007a3d;
    }

a:link {
    color: #007a3d;
    text-decoration: none;
    }

a:hover {
    text-decoration: underline;
    }

a:visited {
    color: #007a3d;
    }
#container {
    width: 960px;
    margin: auto;
    text-align: center;
    }

#container #godbar {
    width: 960px;
    height: 32px;
    margin: auto;
    position: relative;
    background: url(images/godbar_bg.jpg) repeat-x;
    border-left: 1px solid #dbc25e;
    border-bottom: 1px solid #dbc25e;
    border-right: 1px solid #dbc25e;
    }

#container #godbar #godbarIcons {
    width: 100%;
    height: 32px;
    float: right;
    text-align: right;
    margin-top: 5px;
    margin-right: 5px;

    }

#container #godbar #godbarIcons ul {
    display: inline;
    }
#container #godbar #godbarIcons li {
    display: inline;
    padding-right:13px;
}

<!--END GODBAR-->

#container #header {
    width: 960px;
    height: 150px;
}
#container #header #logo h1{
    width: 233px;
    height: 94px;
    clear: both;
    display: block;
    background: red;
    margin: 0 0 0 15px;
    background: url(images/logo.jpg) no-repeat;
    text-indent: -9999px;
    }

#container #header #logo h1 a {
    display: block;
    width: 233px;
    height: 94px;
    }

#container ul#nav {
    height: 44px;
    text-align: center;
    margin: 5px 0px 0px 0px;
    background: url(images/navigation_bg.jpg) repeat-x;
    list-style: none;
    display: block;
    }

#container ul#nav a:hover {
    text-decoration: none;
    }

#container ul#nav li {
    margin-top: 5px;
    display: inline;
    float: left;
    padding: 5px;
    text-transform: uppercase;
    }

#container ul#nav a {
    color: #FFF;
    display: inline-block;

    }
    <body>
<div id="container">
    <!--GODBAR-->
    <div id="godbar">
        <div id="godbarIcons">
        <ul>

            <li id="godbarFacebook"><a href="http://www.facebook.com/hilounge" target="_blank"><img src="images/godbar_fb.png" alt="hilounge on Facebook" /></a>

            </li>

            <li id="godbarTwitter"><a href="http://www.twitter.com/hilounge" target="_blank"><img src="images/godbar_twitter.png" alt="hilounge on Twitter"/></a>

            </li> 

            <li id="godbarInstagram"><a href="http://www.instagram.com/hilounge" target="_blank"><img src="images/godbar_instagram.png" alt="hilounge on Instagram" /></a>

            </li>
            <li id="godbarPinterest"><a href="http://www.pinterest.com/hilounge" target="_blank"><img src="images/godbar_pinterest.png" alt="hilounge on Pinterest" /></a>

            </li>
            <li id="godbarGplus"><a href="https://plus.google.com/b/108830451064104477365/108830451064104477365/posts" target="_blank"><img src="images/godbar_gplus.png" alt="hilounge on Goolge plus" /></a>

            </li>
            <li id="godbarRss"><a href="http://feeds.feedburner.com/hilounge" target="_blank"><img src="images/godbar_rss.png" alt="hilounge RSS feed" /></a>

            </li>
            <li id="godbarEmail"><a href="http://feedburner.google.com/fb/a/mailverify?uri=hilounge&amp;loc=en_US" target="_blank"><img src="images/godbar_email.png" alt="hilounge email" /></a>

            </li>
        </ul>
        </div>
        <!--END GODBARICONS-->
    </div>
     <!--END GODBAR-->

     <!--BEGIN HEADER-->
     <div id="header">

        <!--BEGIN LOGO-->
        <div id="logo">
            <h1><a href="index.html">hiLounge</a></h1>
        </div>
        <!--END LOGO-->
        <!--BEGIN NAVIGATION-->
        <ul id="nav">
            <h2 class="nav"><li><a href="#"> News </a></li>
            <li><a href="#"> Entertainment </a></li>
            <li><a href="#"> Fashion </a></li>
            <li><a href="#"> Munchies </a></li>
            <li><a href="#"> Design </a></li>
            <li><a href="#"> Reviews </a></li>
            <li><a href="#"> Contests </a></li>
            </h2>

        </ul>
        <!--END NAVIGATION-->
     </div>
     <!--END HEADER-->

     <!--BEGIN CAROUSEL-->
     <div id="carousel">
        <ul>
            <a href="#">Previous</a>
            <li><a href="#">Slide 1</a></li>
            <li><a href="#">Slide 2</a></li>
            <li><a href="#">Slide 3</a></li>
            <li><a href="#">Slide 4</a></li>
            <li><a href="#">Slide 5</a></li>
            <a href="#">Next</a>
        </ul>
     </div>     
     <!--END CAROUSEL-->

     <!--BEGIN MAIN-->
  <div id="primaryContent">
    <h1><a href="#"> 10 Best Bongs You Wish You Made</a></h1>
     <a href="#"><img src="images/featured-post-featured-image.png" alt="Post Title" /></a>

     <!--BEGIN POSTMETADATA-->
     <div id="postMetaData">
        <ul>
            <li><img src="images/date-icon.jpg" /> March 26, 2013</li>
            <li><a href="#"><img src="images/category-icon.jpg"  /> Entertainment</a></li>
            <li><a href="#"><img src="images/author-icon.jpg"  /> James Scaggs</a></li>
        </ul>
     </div>
     <!--END POSTMETADATA-->
     <p>
     In Half Baked, the MacGyver smoker stereotype really taught us that pot smokers can engineer some of the best bongs around when there’s nothing to smoke out of. There’s an art to taking shit from the kitchen, garage, and office and...
     <a href="#"> Read More</a>
     </p>
     <!--BEGIN POSTSHARINGBUTTONS-->
     <div id="postSharingButtons">
        <ul>
            <li>Like</li>
            <li>Tweet</li>
            <li>G+</li>
            <li>Pin it</li>
       </ul>
     </div>
     <!--END POSTSHARINGBUTTONS-->

     <a href="#"><img src="images/read-more.jpg" /> Read More </a>

    <!-- BEGIN RECENTPOSTS-->

     <h2>Recent Posts</h2>

    <div id="recentPosts">

     <h1><a href="#">5 MUST FOLLOW MARIJUANA FACEBOOK PAGES</a></h1>
     <img src="images/featured-image-1.png" alt="post-title" />

     <!--BEGIN RECENTPOSTMETADATA-->
     <div id="recentPostMetaData">
        <ul>
            <li><img src="images/date-icon.jpg" /> March 26, 2013</li>
            <li><a href="#"><img src="images/category-icon.jpg"  /> Entertainment</a></li>
            <li><a href="#"><img src="images/author-icon.jpg"  /> James Scaggs</a></li>
        </ul>
     </div>
     <!--END RECENTPOSTMETADATA-->
        <p>
     In Half Baked, the MacGyver smoker stereotype really taught us that pot smokers can engineer some of the best bongs around when there’s nothing to smoke out of. There’s an art to taking shit from the kitchen, garage, and office and...
     <a href="#"> Read More</a>
        </p>

        <!--BEGIN POST SHARING BUTTONS-->

        <div id="postSharingButtons">
            <ul>
                <li>Like</li>
                <li>Tweet</li>
                <li>G+</li>
                <li>Pin it</li>
            </ul>
        </div>

        <!--END POST SHARING BUTTONS-->

        <h1><a href="#">7 MARIJUANA INFOGRAPHICS YOU DON'T WANT TO MISS</a></h1>
     <img src="images/featured-image-1.png" alt="post-title" />

     <!--BEGIN RECENTPOSTMETADATA-->
     <div id="recentPostMetaData">
        <ul>
            <li><img src="images/date-icon.jpg" /> March 26, 2013</li>
            <li><a href="#"><img src="images/category-icon.jpg"  /> Entertainment</a></li>
            <li><a href="#"><img src="images/author-icon.jpg"  /> James Scaggs</a></li>
        </ul>
     </div>
     <!--END RECENTPOSTMETADATA-->
        <p>
     In Half Baked, the MacGyver smoker stereotype really taught us that pot smokers can engineer some of the best bongs around when there’s nothing to smoke out of. There’s an art to taking shit from the kitchen, garage, and office and...
     <a href="#"> Read More</a>
        </p>

        <!--BEGIN POST SHARING BUTTONS-->

        <div id="postSharingButtons">
            <ul>
                <li>Like</li>
                <li>Tweet</li>
                <li>G+</li>
                <li>Pin it</li>
            </ul>
        </div>

        <!--END POSTSHARINGBUTTONS-->

    </div>
    <!--END RECENTPOSTS-->

  </div>
     <!--END MAIN-->

</div>
<!--END CONTAINER-->

<div id="footerWrap">

  <div id="footer">

    <div id="footerLogo">
        <a href="index.html"><img src="images/footer-logo.jpg" alt="hiLounge" /></a>
      </div> <!--end footerLogo-->

    <p>
    <a href="#">About Us</a>
    <a href="#">Contact Us</a>
    <a href="#">Legal</a>
    <a href="#">Advertising</a>
    </p>

    <p id="footerInfo">copyright (c) 2013  <a href="http://www.hilounge.com">hiLounge</a>
    </p>

    </div>
    <!--END FOOTER-->

</div>
<!--END FOOTERWRAP-->

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:41:53.653

不幸的是，如果没有图像，我不确定导航按钮的确切大小需要是多少，因此我无法测试您发布的代码以获得所需的填充/间距。

```
#container #godbar #godbarIcons ul {
    margin: 0 auto;
    padding: 0;
}
#container #godbar #godbarIcons li {
    float: left;
    padding-right: 0;
    list-style: none;
} 
```

尝试在你的css中改变它并调整列表项的左右填充和边距，直到你达到你想要的

# json - Converting Json file to a human readable format?

> ID：15912241
> 
> 赞同：2
> 
> 时间：2013-04-09T20:50:14.123
> 
> 标签：json

I have a js file which is in json format and i want to convert this file to a human readable format.Is there any external software which does that or i have to code it??Am new to this stuff.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:01:00.683

Json 是一种看起来像纯文本的格式。我想你知道你在问什么。如果您需要将包含 Json 文本的文件转换为可读格式，则需要将其转换为 Object 并实现 toString() 方法（假设转换为 Java 对象）以非常易读的格式打印或写入另一个文件。您可以为此使用任何 Json API，例如 Jackson JSON API。

```
ObjectMapper obj = new ObjectMapper();
T t=obj.readValue(File src, Class<T> valueType) 

t.toString();  //this must have been implemented 
```

# javascript - 在没有 jQuery 的情况下访问“数据-”属性

> ID：15912246
> 
> 赞同：81
> 
> 时间：2013-04-09T20:50:25.397
> 
> 标签：javascript

我可以在没有 jQuery 的情况下访问数据属性吗？

使用 jQuery 很容易，但是如果没有 jQuery，我在任何地方都看不到如何做到这一点。

如果我在 Google 上搜索“没有 jQuery”，我得到的只是 jQuery 示例。

甚至可能吗？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-04-09T20:52:50.657

在[这里](http://html5doctor.com/html5-custom-data-attributes/)我找到了这个例子：

```
<div id='strawberry-plant' data-fruit='12'></div>
<script>
    // 'Getting' data-attributes using getAttribute
    var plant = document.getElementById('strawberry-plant');
    var fruitCount = plant.getAttribute('data-fruit'); // fruitCount = '12'
    // 'Setting' data-attributes using setAttribute
    plant.setAttribute('data-fruit', '7'); // Pesky birds
</script> 
```

所以它看起来非常可行。

更新：由于微软现在（2020 年）逐步淘汰旧的 Internet Explorer 引擎以支持基于 Chromium 的 Edge，因此该`dataset`属性很可能在任何地方都可以使用。在一段时间内，仍然强制使用 IE 的组织和企业网络将是一个例外。但在撰写本文时 - [jsPerf](https://jsperf.com/html5-dataset-vs-native-setattribute)仍然显示 get/setAttribute 方法比使用数据集更快，至少在 Chrome 81 上是这样。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-04-09T20:55:27.413

您可以使用**数据集**属性。如：

```
element = document.getElementById("el");
alert(element.dataset.name); // element.dataset.name == data-name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T20:53:35.240

它只是一个属性......`getAttribute`与任何其他属性一样使用：[https ://developer.mozilla.org/en/docs/DOM/element.getAttribute](https://developer.mozilla.org/en/docs/DOM/element.getAttribute)

或者我错过了你的问题的重点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-22T11:00:56.020

您还可以使用：

`getAttribute('data-property');`

这更干净，更容易阅读。

这将获得数据属性的值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T21:02:06.350

我想你可以试试这个：

```
var ele = document.getElementById("myelement");
if (ele.hasOwnProperty("data")) {
  alert(ele.data);
} 
```

或使用

```
alert(ele['data-property']); 
```

# c# - 带有 TemplateFields 的 Ddynamic GridView - LifeCycle 中的混淆

> ID：15912247
> 
> 赞同：1
> 
> 时间：2013-04-09T20:50:29.293
> 
> 标签：c#, vb.net, gridview, page-lifecycle, templatefield

我有一个动态创建的数据绑定网格视图。数据源根据几个 DropDownLists 返回一个对象（对象类型不同）。根据对象的类型，GridView 必须显示特定于对象的某些字段。此外，还有一个 DropDownList，其 SelectedValue 决定对象的哪些列将从 GridView 中添加/排除。

这是创建 GridView 的方法（我用 VB.NET 编写，但也非常欢迎使用 C#）：

```
Private Sub CreateGridView()
    Dim gv As New GridView
    With gv
        .AllowSorting = True
        .AutoGenerateColumns = False
        .CssClass = "gv"
        .EmptyDataText = "The list is empty"
        .ID = "gv"
        .ShowFooter = True

        .AlternatingRowStyle.Wrap = False
        .EditRowStyle.Wrap = False
        .FooterStyle.Wrap = False
        .HeaderStyle.Wrap = False

        .SortedAscendingCellStyle.CssClass = "sortAscCell"
        .SortedAscendingHeaderStyle.CssClass = "sortAscHeader"
        .SortedDescendingCellStyle.CssClass = "sortDescCell"
        .SortedDescendingHeaderStyle.CssClass = "sortDescHeader"

        AddHandler .RowDataBound, AddressOf gv_RowDataBound
        AddHandler .DataBound, AddressOf gv_DataBound
        AddHandler .RowUpdating, AddressOf gv_RowUpdating

        .DataSource = odsEquipment.Select
        .DataKeyNames = {"equipmentID"}
    End With

    For Each item As Dictionary In odsDictionary.Select
        If ddlStages.SelectedValue <> "" Then
            If ddlStages.SelectedValue >= item.stage_id Then
                Dim tf As New TemplateField()
                tf.SortExpression = item.col
                tf.HeaderTemplate = New GridViewTemplate(item.title, item.col)
                tf.ItemTemplate = New GridViewTemplate(DataControlRowType.DataRow, item.col, item.ctrlType, item.length)
                tf.FooterTemplate = New GridViewTemplate(DataControlRowType.Footer, item.col, item.ctrlType, item.length)

                gv.Columns.Add(tf)
            End If
        End If
    Next

    gv.DataBind()

    divGV.Controls.Add(gv)
End Sub 
```

GridView 始终处于编辑模式，这意味着它的 ItemTemplate 是 TexBox/DropDownList/CheckBox。这是一个 ITemplate 类：

```
Imports System.Data

Public Class GridViewTemplate
    Implements ITemplate

    Private templateType As DataControlRowType
    Private title As String
    Private columnBinding As String
    Private ctrlType As String
    Private length As Integer

    Public Sub New(ByVal vTitle As String, vColumnBinding As String)
        templateType = DataControlRowType.Header
        title = vTitle
        columnBinding = vColumnBinding
    End Sub

    Public Sub New(ByVal type As DataControlRowType, ByVal vColumnBinding As String, ByVal vCtrlType As String, vLength As Integer)
        templateType = type
        columnBinding = vColumnBinding
        ctrlType = vCtrlType
        length = vLength
    End Sub

    Private Sub InstantiateIn(container As Control) Implements ITemplate.InstantiateIn
        Select Case templateType
            Case DataControlRowType.Header
                Dim lb As New LinkButton()
                lb.ID = "lb" + columnBinding
                lb.CommandName = "Sort"
                lb.CommandArgument = columnBinding
                lb.Text = title
                container.Controls.Add(lb)
                Exit Select

            Case DataControlRowType.DataRow
                If ctrlType = "Label" Then
                    Dim lbl = New Label()
                    lbl.ID = "lbl" + columnBinding
                    AddControl(lbl, container)
                ElseIf ctrlType = "TextBox" Then
                    Dim tb As New TextBox
                    tb.ID = "tb" + columnBinding
                    tb.MaxLength = length
                    AddControl(tb, container)
                ElseIf ctrlType = "CheckBox" Then
                    Dim cb = New CheckBox()
                    cb.ID = "cb" + columnBinding
                    AddControl(cb, container)
                ElseIf ctrlType = "DropDownList" Then
                    Dim ddl = New DropDownList()
                    ddl.ID = "ddl" + columnBinding
                    AddControl(ddl, container)
                End If
                Exit Select

            Case DataControlRowType.Footer
                If ctrlType = "Label" Then
                    Dim tbFrom As New TextBox()
                    tbFrom.ID = "tb" + columnBinding + "From"
                    container.Controls.Add(tbFrom)
                    Dim tbTo As New TextBox()
                    tbTo.ID = "tb" + columnBinding + "From"
                    container.Controls.Add(tbTo)
                ElseIf ctrlType = "TextBox" Then
                    Dim tb As New TextBox
                    tb.ID = "tb" + columnBinding
                    tb.MaxLength = length
                    container.Controls.Add(tb)
                ElseIf ctrlType = "CheckBox" Then
                    Dim cb = New CheckBox()
                    cb.ID = "cb" + columnBinding
                    container.Controls.Add(cb)
                ElseIf ctrlType = "DropDownList" Then
                    Dim ddl = New DropDownList()
                    ddl.ID = "ddl" + columnBinding
                    AddControl(ddl, container)
                End If
                Exit Select

            Case Else
                Exit Select
        End Select
    End Sub

    Private Sub AddControl(ctrl As Control, container As Control)
        AddHandler ctrl.DataBinding, AddressOf OnDataBinding
        container.Controls.Add(ctrl)
    End Sub

    Private Sub OnDataBinding(ByVal sender As Object, ByVal e As EventArgs)
        If sender.GetType = GetType(Label) Then
            Dim lb As Label = DirectCast(sender, Label)
            Dim container As GridViewRow = DirectCast(lb.NamingContainer, GridViewRow)
            lb.Text = DataBinder.Eval(container.DataItem, columnBinding).ToString

        ElseIf sender.GetType = GetType(TextBox) Then
            Dim tb As TextBox = DirectCast(sender, TextBox)
            Dim container As GridViewRow = DirectCast(tb.NamingContainer, GridViewRow)
            tb.Text = DataBinder.Eval(container.DataItem, columnBinding).ToString

        ElseIf sender.GetType = GetType(CheckBox) Then
            Dim cb As CheckBox = DirectCast(sender, CheckBox)
            Dim container As GridViewRow = DirectCast(cb.NamingContainer, GridViewRow)
            cb.Checked = DataBinder.Eval(container.DataItem, columnBinding).ToString

        ElseIf sender.GetType = GetType(DropDownList) Then
            Dim ddl As DropDownList = DirectCast(sender, DropDownList)
            Dim container As GridViewRow = DirectCast(ddl.NamingContainer, GridViewRow)
            If columnBinding = "criticalityRating" Then
                ddl.Items.Add("")
                For i = 1 To 4
                    ddl.Items.Add(i)
                Next
            ElseIf columnBinding = "property_id" Then
                For Each p As PropertyMP In PropertyMPDB.GetProperties
                    ddl.Items.Add(New ListItem(p.propertyMP, p.property_id))
                Next
            End If
            If templateType = DataControlRowType.DataRow Then
                ddl.SelectedValue = DataBinder.Eval(container.DataItem, columnBinding).ToString
            End If
        End If
    End Sub
End Class 
```

DropDownList 绑定到它们自己的 ObjectDataSource 并在标记中创建。

据我了解，必须在 Page.Init 中的每次回发时实例化 GridView。Page.Load 创建网格视图为时已晚，因为它不会维护 ViewState 并且无法更新。但是，当我在 Init 上创建它时，还没有创建 DropDownLists 或 DataBound，因此没有选定的值。我尝试在它们的 Inits 上填充 DropDownLists，而不是将它们绑定到 DataSource，但是当我更改 SelectedValue 时它会引发 ViewState 错误。

当我在加载时创建 GridView 时，一切正常，除了最重要的部分，更新......

谁能帮我弄清楚在哪里初始化/绑定 GridView/DropDownLists？我已经为此苦苦挣扎了三天，在这里变得绝望:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:05:00.167

没有找到解决方案，但找到了解决方法。

GridView 在 OnInit 上创建，在 GridView Init 上添加字段。在所有的 DropDownLists 都是 DataBound 之后，ObjectDataSource 从 DropDownLists 接收它的参数。

有一个 DropDownList，负责返回 Object 的类型。更改 SelectedValue 后，DropDownList 重新启动，ObjectDataSource 仍然具有旧值并返回错误的对象。这就是错误所在 - 将 GridView 与具有错误字段的对象绑定。取而代之的是，我使用了 QueryString 并进行了回发。在下一次加载时，ObjectDataSource 返回与 GridView 的字段匹配的正确对象。从那里一切都很顺利。

# java - 使用 HtmlUnit 抓取一个 aspx 站点，如何单击 Javascript 按钮？

> ID：15912249
> 
> 赞同：1
> 
> 时间：2013-04-09T20:50:34.500
> 
> 标签：java, htmlunit

我正在尝试抓取一个`.aspx`站点，该站点基本上只是一个大的分页表，与此处找到的行类似：http: [//data.fingal.ie/ViewDataSets/](http://data.fingal.ie/ViewDataSets/)（注意，我正在抓取的实际站点是在付费墙后面，因此无法发布实际链接）。

但是，问题在于，不是表格的每个页面都有唯一的 url，而是表格通过发布到自身来更改页面，然后更新表格内部的内容。

该`next page`按钮如下所示：

```
</td>
<td class="dxpButton" onclick="aspxGVPagerOnClick('ctl00_cphProduct_gvList','PBN');" style="cursor:pointer;">
<img class="dxWeb_pNext" src="/DXR.axd?r=1_5-BUdv6" alt="Next" /></td><td style="width:4px;"><div style="height:1px;width:4px;overflow:hidden;"> 
```

我将如何使用 模拟单击​​此按钮`HtmlUnit`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T01:35:32.427

你会想要找到`<div class="dxpButton">`. 最简单的方法是使用 xPath：

```
final WebClient webClient = new WebClient();
HtmlPage page = webClient.getPage("http://<<YOUR URL HERE>>");

final HtmlDivision div = page.getFirstByXPath("//div[@class='dpxButton']");
page = div.click(); 
// This returns the page shown after the click 
```

这将执行单击。我假设它是通过 AJAX 加载的，在这种情况下您可能想要使用：

```
while(some new element doesn't exist; or some 'completed' condition) {
    // Wait for javascript to catch up.
    webClient. waitForBackgroundJavaScript(1000);
} 
```

# java - 列表一次又一次地添加覆盖

> ID：15912256
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:50:56.000
> 
> 标签：java, arraylist

下面是我的JAVA方法

```
public static List<Match<String, String>> Decider
    (List<Preference<String, String>> hospitalPrefs,List<Preference<String, String>> studentPrefs)
{
    Match<String, String> matching = new Match<String, String>(null, null);
    List<Match<String, String>> matcher = new ArrayList<Match<String, String>>();

    /** Matching the preference of the hospital with the student */

    for(int hospitalLoop = 0;hospitalLoop < hospitalPrefs.size(); hospitalLoop++)
    {
        String hospitalPreferrer = hospitalPrefs.get(hospitalLoop).getPreferrer();
        String hospitalPreferred = hospitalPrefs.get(hospitalLoop).getPreferred();
        int hospitalValue = hospitalPrefs.get(hospitalLoop).getValue();

        for(int studentLoop = 0;studentLoop < studentPrefs.size();studentLoop++)
        {
            String studentPreferrer = studentPrefs.get(studentLoop).getPreferrer();
            String studentPreferred = studentPrefs.get(studentLoop).getPreferred();
            int studentValue = studentPrefs.get(studentLoop).getValue();

            if(hospitalPreferred.equals(studentPreferrer)
                    && hospitalPreferrer.equals(studentPreferred)
                    && hospitalValue == studentValue)
            {
                System.out.println(hospitalPreferred + "," + studentPreferred);
                matching.setItem1(hospitalPreferred);
                matching.setItem2(studentPreferred);
                matcher.add(matching);
                break;
            }
        }
    }
    return matcher;
} 
```

matcher 变量覆盖列表。我对此感到困惑。

就像我添加
a,b,c 一样。

在 matcher 变量中添加 c,c,c

我很困惑我哪里出错了。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:57:40.437

您初始化匹配一次，然后更改其值。你需要

```
matching = new Match<String,String>(); 
```

在你的循环中的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:57:48.220

您正在创建`matching`before 循环的实例，然后将相同的实例添加到您的集合中。您可能想在循环内创建匹配：

```
 ................
    System.out.println(hospitalPreferred + "," + studentPreferred);
    Match<String, String> matching = new Match<String, String>(null, null);
    matching.setItem1(hospitalPreferred);
    matching.setItem2(studentPreferred);
    matcher.add(matching);
    break;        
    ................ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:57:51.637

您只是`matching`一遍又一遍地添加相同的内容。

如果我是你，我会搬家

```
Match<String, String> matching = new Match<String, String>(null, null); 
```

到之前

```
matching.setItem1(hospitalPreferred);
matching.setItem2(studentPreferred);
matcher.add(matching); 
```

# python - 500 error with urllib.request.urlopen

> ID：15912257
> 
> 赞同：12
> 
> 时间：2013-04-09T20:51:00.657
> 
> 标签：python, python-3.x

The following code:

```
 req = urllib.request.Request(url=r"http://borel.slu.edu/cgi-bin/cc.cgi?foirm_ionchur=im&foirm=Seol&hits=1&format=xml",headers={'User-Agent':' Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0'})
   handler = urllib.request.urlopen(req) 
```

is giving me the following exception:

```
Traceback (most recent call last):
  File "C:/Users/Foo/lang/old/test.py", line 46, in <module>
    rip()
  File "C:/Users/Foo/lang/old/test.py", line 36, in rip
    handler = urllib.request.urlopen(req)
  File "C:\Python32\lib\urllib\request.py", line 138, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python32\lib\urllib\request.py", line 375, in open
    response = meth(req, response)
  File "C:\Python32\lib\urllib\request.py", line 487, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Python32\lib\urllib\request.py", line 413, in error
    return self._call_chain(*args)
  File "C:\Python32\lib\urllib\request.py", line 347, in _call_chain
    result = func(*args)
  File "C:\Python32\lib\urllib\request.py", line 495, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 500: Internal Server Error 
```

but it works fine in my browser, whats the issue?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T21:00:38.490

服务器相当b0rken。*它也会在浏览器*中响应 500 错误。

您可以捕获异常并仍然读取响应：

```
import urllib.request
from urllib.error import HTTPError

req = urllib.request.Request(url=r"http://borel.slu.edu/cgi-bin/cc.cgi?foirm_ionchur=im&foirm=Seol&hits=1&format=xml",headers={'User-Agent':' Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0'})
try:
    handler = urllib.request.urlopen(req)
except HTTPError as e:
    content = e.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-11T21:36:06.397

当它发生在我身上时，我减少了 plt.figure 大小参数并且它起作用了。您的代码中可能有一些无法读取的奇怪参数。

# jakarta-ee - 使用 Glassfish 时在哪里可以找到 server.log 文件？

> ID：15912259
> 
> 赞同：2
> 
> 时间：2013-04-09T20:51:02.123
> 
> 标签：jakarta-ee, logging, deployment, glassfish, java-ee-6

我收到以下错误：

```
deploy?DEFAULT=C:\Users\Bart\Documents\SE Fontys\S61\2013groep081\PTS-ESD\rekeningadministratie\build\web&name=RekeningAdministratie&contextroot=/rekeningadministratie&force=true failed on GlassFish Server 3.1.2 
 Error occurred during deployment: Exception while loading the app : WELD-001408 Unsatisfied dependencies for type [AutoDAOJPA] with qualifiers [@Default] at injection point [[field] @Inject factuur.Prijsbepaling.autoDAO]. Please see server.log for more details. 
```

这表示我可以查看 server.log 以了解更多详细信息。我试过 glassfish/[mydomain]/logs 但它不存在

注意：错误本身已解决，它与在注入之前使用 Injected 类有关。未来的问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T01:29:13.330

glassfish日志位于

```
glassfish\domains\<yourdomain>\logs 
```

在 glassfish 安装文件夹下。

（你写的 - glassfish[mydomain]\logs，这不太一样。）

# opengl - 在作为 glVertex 工作的顶点着色器（glVertexAttrib3f）中更新属性变量

> ID：15912260
> 
> 赞同：0
> 
> 时间：2013-04-09T20:51:10.723
> 
> 标签：opengl, shader, fragment-shader, vertex-shader, geometry-shader

我在使用属性变量将值输入顶点着色器时遇到问题。我想为几何着色器提供前一个图元（线）中的一个点以进行一些计算。我在顶点着色器中使用vec3属性变量（Ppoint）提供这一点，然后使用顶点着色器中的输出变量和几何着色器中的输入变量（pointPass）提供几何着色器。

问题是当我在绘制线条时更新 glBegin()/glEnd() 块中的属性变量时，glVertexAttrib3f 中的值被视为顶点，并且线条也被渲染到这些点。这会导致显示一些额外的线条，并且所有几何着色器功能都会受到干扰。

这是我所有着色器的代码和用于绘制线条的 opengl 程序。

顶点着色器

```
#version 330 compatibility
out vec3 pointPass;
attribute vec3 Ppoint;
void main()
{ 
    pointPass = Ppoint;
    gl_Position = gl_Vertex;
} 
```

几何着色器

```
#version 330 compatibility
in vec3 pointPass[]; 
out vec4 colorFrag; 
layout(lines) in;
// 100 vertices are not actually required specified more for trial
layout(triangle_strip, max_vertices=100) out;

vec3 getA(vec3 axis){ 
    vec3 a; 
    a.x = 1.0;
    a.y = 1.0; 
    a.z = -(axis.x + axis.y)/axis.z; 
    a = normalize(a); 
    return a;
}
vec3 getB(vec3 axis, vec3 a){ 
    vec3 b;
    b.x = (a.y*axis.z - a.z*axis.y);
    b.y = (a.z*axis.x - a.x*axis.z);
    b.z = (a.x*axis.y - a.y*axis.x );
    b = normalize(b);
    return b;
}

void main()
{ 
    vec3 axis0, axis1, v0, v1, v2; 
    float radius = 0.5;
    float rotation = 0.0f;
    float pi = 3.1416; 
    int numPoints = 15;
    vec3 p1, p2, p3, p4;
    int count = 0, i;
    float increment = 2*pi/numPoints;
    v0 = pointPass[0];
    v1 = gl_in[0].gl_Position.xyz;
    v2 = gl_in[1].gl_Position.xyz;

    axis1 = v1 - v2;
    axis1 = normalize(axis1);
    vec3 a1 = getA(axis1);
    vec3 b1 = getB(axis1, a1);

    axis0 = v0-v2;
    axis0 = normalize(axis0);
    vec3 a0 = getA(axis0);
    vec3 b0 = getB(axis0, a0);

    // Rotation with theta
    for(rotation = 0; rotation<=2*pi; rotation+=increment){

    p1 = v1 + radius*cos(rotation)*a0 + radius*sin(rotation)*b0; 
    p2 = v1 + radius*cos(rotation + increment)*a0 + radius*sin (rotation + increment)*b0;
    p3 = v2 + radius*cos(rotation)*a1 + radius*sin(rotation)*b1; 
    p4 = v2 + radius*cos(rotation + increment)*a1 + radius*sin(rotation + increment)*b1;
    // FIRST Triangle 
    // FIRST vertex 
    gl_Position = (gl_ModelViewProjectionMatrix*vec4(p3,1.0) );
    EmitVertex(); 
    // SECOND vertex
    gl_Position = (gl_ModelViewProjectionMatrix*vec4(p1, 1.0) ); 
    EmitVertex();
    // THIRD vertex
    gl_Position = (gl_ModelViewProjectionMatrix*vec4(p4, 1.0) );
    EmitVertex();
    // SECOND Triangle
    // FIRST vertex 
    gl_Position = (gl_ModelViewProjectionMatrix*vec4(p2, 1.0) ); 
    EmitVertex();

    }
    EndPrimitive(); 
} 
```

片段着色器

```
#version 330 compatibility
in vec4 colorFrag;
void main()
{ 
    gl_FragColor = colorFrag;
} 
```

用于绘制线条的 OpenGL 程序

```
// vPoints is a std::vector of 3d vector class created by me.
void drawLines(){
     float angle =0.0f;
     int numLines = 30;
     int count = 0;
     float disp = 0.30f;
     float radius_x = 5.0;
     float radius_y = 5.0;
     vPoints.resize(numLines+2);
    // Loop around in a circle and specify even points along the spiral
    float increment = (float)(2*GL_PI/numLines);
    for(angle = 0.0f; angle < (2.0f*GL_PI); angle += increment)
    {   
        // Calculate x and y position of the next vertex
        float x1 = radius_x*sin(angle);
        float y1 = radius_y*cos(angle);
        float z1 = count*disp;
        vPoints[count].SetVector(x1, y1, z1);
        count ++;
    }

    // Drawing only first two line segments for testing
    glBegin(GL_LINES);
        int pointPassLocation = glGetAttribLocation(programID, "Ppoint");
      // This is also considered as a vertex and a line is drawn from this point to  vPoints[1]
        glVertexAttrib3f(pointPassLocation, vPoints[0].GetX(), vPoints[0].GetY(), vPoints[0].GetZ());

        glVertex3d(vPoints[1].GetX(), vPoints[1].GetY(), vPoints[1].GetZ());
        glVertex3d(vPoints[2].GetX(), vPoints[2].GetY(), vPoints[2].GetZ());
        // Again this is also considered as a point and a line is drawn from vPoints[2] to this point.
        glVertexAttrib3f(pointPassLocation, vPoints[1].GetX(), vPoints[1].GetY(), vPoints[1].GetZ());

        glVertex3d(vPoints[2].GetX(), vPoints[2].GetY(), vPoints[2].GetZ());
        glVertex3d(vPoints[3].GetX(), vPoints[3].GetY(), vPoints[3].GetZ());
    glEnd();
} 
```

因此，不是我想从 vPoints[1] 到 vPoints[2] 和 vPoints[2] 到 vPoints[3] 绘制的 2 条线，而是考虑到两个 glVertexAttrib3f 语句作为顶点，我得到 3 条带有 6 个顶点的线。

我这样做是正确的，还是有更好的方法或另一种方法来做到这一点。

# powershell - protocolSettings 上的 PowerShell 获取邮箱过滤器

> ID：15912261
> 
> 赞同：0
> 
> 时间：2013-04-09T20:51:26.097
> 
> 标签：powershell, active-directory, exchange-server-2010

get-mailbox 的 protocolSettings 属性可以根据启用或禁用的内容返回多个值。默认情况下，创建新用户时，在启用或禁用之前，所有属性都不存在。

我想使用 -filter 从 Get-Mailbox 返回所有协议设置，以通过不管道到 Where 或 Select 来优化命令。这应该会减少在我使用管道之前返回的记录数量。

管道选择会给我输出，但同样，我想避免管道并使用 -filter：

```
Get-Mailbox  | select ProtocolSettings

{MAPI§1§§§§1§§§, HTTP§0§1§§§§§§, OWA§0, RemotePowerShell§1} 
```

有没有办法使用 -filter 来返回我在 Select 管道中得到的内容？

我试过了：

```
Get-Mailbox  -Filter {(ProtocolSettings)}
Cannot bind parameter 'Filter' to the target. Exception setting "Filter":
 "Invalid filter syntax 
```

有人知道从 -filter 参数返回所有 ProtocolSettings 的方法吗？

我正在使用的完整命令如下：

```
get-mailbox -OrganizatinalUnit 'OU=test,DC=Domain,DC=com' `
-filter {(CustomAttribute14 -eq 'Test') -and (ProtocolSettings)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:24:19.537

并非所有属性都是可过滤的。

下面是 Exchange 2010 的可筛选属性：

[-Filter 参数的可过滤属性](http://technet.microsoft.com/en-us/library/bb738155%28v=exchg.141%29.aspx)

话虽如此，您可以使用文本比较（例如，匹配等）从 get-mailbox 对该属性进行后期过滤。各个协议公开为具有来自 Get-CASMailbox 的布尔启用设置的单独属性。

# java - 是什么导致了循环依赖？

> ID：15912266
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:51:48.100
> 
> 标签：java, android, android-relativelayout

我已经找了几个小时，但我在这段代码中找不到循环引用。我希望有人可以帮助我找到错误所在。

有问题的 XML 文件在这里；

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout android:id="@+id/politics_panel"
        android:layout_height="0dp"
        android:layout_width="0dp"
        android:orientation="vertical"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/leadership_panel"
        android:background="#66FF99" >

        <Spinner android:id="@+id/politics_spinner"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" />

        <Button 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/ok"
            android:onClick="addCardToTray" /> 
    </LinearLayout>

    <LinearLayout android:id="@id/leadership_panel"
        android:layout_height="0dp"
        android:layout_width="0dp"
        android:orientation="vertical"
        android:layout_toLeftOf="@+id/tactics_panel"
        android:layout_toRightOf="@id/politics_panel"
        android:background="#3333CC">

        <Spinner android:id="@+id/leadership_spinner"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" />

        <Button 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/ok"
            android:onClick="addCardToTray" />  
    </LinearLayout>

    <LinearLayout android:id="@id/tactics_panel"
        android:layout_height="0dp"
        android:layout_width="0dp"
        android:orientation="vertical"
        android:layout_toLeftOf="@+id/piloting_panel"
        android:layout_toRightOf="@id/leadership_panel"
        android:background="#CC3399" >

        <Spinner android:id="@+id/tactics_spinner"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" />

        <Button
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/ok"
            android:onClick="addCardToTray" />
    </LinearLayout>

    <LinearLayout android:id="@id/piloting_panel"
        android:layout_height="0dp"
        android:layout_width="0dp"
        android:orientation="vertical"
        android:layout_toLeftOf="@+id/engineering_panel"
        android:layout_toRightOf="@id/tactics_panel"
        android:background="#FFFF00" >

        <Spinner android:id="@+id/piloting_spinner"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" />

        <Button
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/ok"
            android:onClick="addCardToTray" />
    </LinearLayout>

    <LinearLayout android:id="@id/engineering_panel"
        android:layout_height="0dp"
        android:layout_width="0dp"
        android:orientation="vertical"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@id/piloting_panel"
        android:background="#990033" >

        <Spinner android:id="@+id/engineering_spinner"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" />

        <Button
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/ok"
            android:onClick="addCardToTray" />
    </LinearLayout>
</RelativeLayout> 
```

我运行代码时给出的 LogCat 打印输出是这样的；

```
04-09 21:49:32.834: E/AndroidRuntime(17888): FATAL EXCEPTION: main
04-09 21:49:32.834: E/AndroidRuntime(17888): java.lang.IllegalStateException: Circular dependencies cannot exist in RelativeLayout
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.RelativeLayout$DependencyGraph.getSortedViews(RelativeLayout.java:1321)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.RelativeLayout.sortChildren(RelativeLayout.java:317)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:337)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.View.measure(View.java:15530)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.View.measure(View.java:15530)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5109)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.View.measure(View.java:15530)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.View.measure(View.java:15530)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5109)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2397)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.View.measure(View.java:15530)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1986)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1227)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1400)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1120)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4604)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.Choreographer.doFrame(Choreographer.java:525)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.os.Handler.handleCallback(Handler.java:615)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.os.Looper.loop(Looper.java:137)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at android.app.ActivityThread.main(ActivityThread.java:4921)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
04-09 21:49:32.834: E/AndroidRuntime(17888):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:53:50.827

`leadership_panel`指`politics_panel`，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:57:18.353

`leadership_panel`为或选择一个位置`politics_panel`，而不是将每个位置相对于彼此放置而没有实际锚定。

# wordpress - 是否有可能，如果可以，如何将 wordpress 作为辅助站点安装在 1 个域上

> ID：15912267
> 
> 赞同：1
> 
> 时间：2013-04-09T20:51:49.850
> 
> 标签：wordpress

基本上我有一个网站，我用 html 构建并且不想触摸，但如果可能的话，我想做的是将 Wordpress 安装在同一网站上的子目录中，有点像展示 wordpress 网站的展示区我正在努力！我尝试简单地向域中添加一个新目录并复制 wordpress 文件夹，但这没有用，所以我只是想知道是否有人知道如何做我正在寻找的东西，请他们帮助我！

任何帮助深表感谢！

编辑：原始网站不是 wordpress 网站，它只是一个普通的 HTML 网站，它不是博客或任何东西，我已经在子目录中有其他 HTML 网站，我只是希望有一个使用 wordpress 的子目录。

例如：

主站点 = www.mywebsite.com（内置 html）

第一个子站点 = www.mywebsite.com/siteb（内置 html）

第二个子网站 = www.mywebsite.com/sitec（使用 wordpress）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:12:14.950

WordPress 可以安装在子目录中 - 默认情况下，下载将解压缩到一个名为的文件夹`wordpress`中，您可以根据需要重命名该文件夹。如果您从子目录运行安装，它应该设置正确的`WP_HOME`和`WP_SITEURL`值，但如果没有，或者如果您当前在根目录中安装了 WordPress 并希望将其移动到子目录，您可以按照本指南为[WordPress 提供自己的目录](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)。

# c# - 访问文件属性，然后将文件复制到文件夹（C#）

> ID：15912272
> 
> 赞同：0
> 
> 时间：2013-04-09T20:52:05.640
> 
> 标签：c#

我是编程新手，想用 C# 编写一个简单的程序。我将使用 VS Express 来编译我的代码。

目标：

我想编写一个程序，该程序将在目录中搜索由特定作者创建的所有文件。（通过右键单击文件，打开属性，选择详细信息选项卡找到作者，然后有一个名为作者的字段，旁边有一个名称）。如果作者是我正在搜索的指定作者，那么我希望它将文件复制到新文件夹中。

最终目标是这个特定作者创建的所有文件都将放在一个文件夹中。

有没有一种简单的方法可以在 VS express 中使用 Windows 窗体应用程序来创建这个程序？我在想您单击一个按钮，出现一个消息框，您选择所需的目录，然后出现另一个消息框并询问您要搜索的作者。然后出现第三个消息框，询问您要将新文件夹保存到哪里。然后程序执行其他所有操作。

任何帮助指出我编写这样的程序的正确方向，或提供代码将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:02:16.437

看看这个：

[http://wiki.terrasynq.net/tutorials/c-add-and-edit-ntfs-custom-properties/](http://wiki.terrasynq.net/tutorials/c-add-and-edit-ntfs-custom-properties/)

它展示了如何使用 OleDocumentProperties 来读取和编辑属性。

# c# - 如何使用 OleDb 在 Visual Studio C# 中将 MS-Access 中的值插入文本框？

> ID：15912277
> 
> 赞同：0
> 
> 时间：2013-04-09T20:52:19.617
> 
> 标签：c#, visual-studio, ms-access

我正在尝试从访问中获取一个值并将其放入字符串变量或文本框中，我使用的是 MS-Visual Studio 2012 和 Access 2007

```
string sql = "SELECT [Time Checked-In] FROM HotelCustomers WHERE [Room Number] =" + textBox1.Text + ";";
        string my_Connection = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source= c:\\Users\\Acer\\Documents\\HotelCustomersOld.mdb";
        OleDbConnection myCon = new OleDbConnection(my_Connection);
        myCon.Open();
        DataTable dataTable = new DataTable();
        OleDbDataAdapter adapter = new OleDbDataAdapter(sql, my_Connection);
        adapter.Fill(dataTable);
        string aString = dataTable.Rows[0]["Time Checked-In"].ToString();
        textBox1.Text = aString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:37:30.140

您的问题可能是因为您的 HotelCustomers 表中使用的名称。OleDb 很可能正在将其更改为可以合法使用的东西。

您可以重新编写 SQL 以使用更适合 OleDb 的东西：

```
 string sql = "SELECT [Time Checked-In] AS CheckIN FROM HotelCustomers WHERE [Room Number] =" + textBox1.Text + ";"; 
```

也就是说，对于这个简单的查询，您不需要`OleDbDataAdapter`or的开销。`DataTable`

```
private const string CONN_STR = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source= c:\\Users\\Acer\\Documents\\HotelCustomersOld.mdb";

private string GetCheckInTime(string roomNumber) {
  string sql = "SELECT [Time Checked-In] AS CheckIN FROM HotelCustomers WHERE [Room Number] =" + roomNumber + ";";
  object obj = null;
  using (var cmd = new OleDbCommand(sql, new OleDbConnection(CONN_STR))) {
    cmd.Connection.Open();
    obj = cmd.ExecuteScalar();
    cmd.Connection.Close();
  }
  if ((obj != null) && (obj != DBNull.Value)) {
    return obj.ToString();
  }
  return null;
} 
```

连接字符串永远不会改变，所以我将其设为常量。

# google-analytics - 如何在 Google Analytics 中分析页面类型的性能

> ID：15912279
> 
> 赞同：1
> 
> 时间：2013-04-09T20:52:21.553
> 
> 标签：google-analytics, e-commerce

在我们的电子商务网站上，类别页面的工作是将客户转移到产品页面。然后产品页面的工作是让用户将产品添加到他们的购物篮中。

我已经设置了一个 Add To Basket 事件，该事件运行良好，但我不知道如何分析类别页面。

我们有数百种产品，所以所有的 URL 都是不同的。

理想情况下，我希望能够制作这样的表格。

```
|______CATEGORY_PAGE_______|__PROCEEDED_TO_PRODUCT_PAGE_|
|    /womens/dresses       |            34%             |
|    /womens/jewellery     |            39%             |
|    /mens/jackets         |            28%             |
_________________________________________________________ 
```

我正在跟踪对类别页面类型和产品页面类型的访问作为自定义变量，但我只是不知道如何报告它。

# data-warehouse - 您如何解决“Pre-Etl”源到目标映射问题？

> ID：15912281
> 
> 赞同：0
> 
> 时间：2013-04-09T20:52:27.623
> 
> 标签：data-warehouse, etl, business-intelligence, data-integration, data-mapping

使用电子表格绝对是非权威的：源映射会随着您设计和测试 ETL 作业而改变。随着 ETL 设计过程的发展，曾经充当所有源映射的单一或权威目录的电子表格可能不会更新——或者（很可能）可能会更新不正确或不完整的信息。您如何解决数据映射问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:51:56.257

只允许1人改字典；但允许所有人查看。在其中一张纸上跟踪所有更改请求（是手动）：人名、日期时间、他们想要更新的字段。

听起来更像是版本控制问题而不是 ETL 问题。

# c++ - 如何避免这句话在模板 SFINAE 中是错误的？

> ID：15912283
> 
> 赞同：27
> 
> 时间：2013-04-09T20:52:43.650
> 
> 标签：c++, templates, c++11, operator-overloading, sfinae

所以我想写一个自动的`!=`：

```
template<typename U, typename T>
bool operator!=(U&& u, T&& t) {
  return !( std::forward<U>(u) == std::forward<T>(t) );
} 
```

但这是不礼貌的¹。所以我写

```
// T() == U() is valid?
template<typename T, typename U, typename=void>
struct can_equal:std::false_type {};

template<typename T, typename U>
struct can_equal<
   T,
   U,
   typename std::enable_if<
      std::is_convertible<
         decltype( std::declval<T>() == std::declval<U>() ),
         bool
      >::value
   >::type
>: std::true_type {}; 
```

这是一个类型特征类，它说“是`t == u`返回可转换为的类型的有效代码`bool`”。

所以我改进了我的`!=`：

```
template<typename U, typename T,
  typename=typename std::enable_if<can_equal<T,U>::value>::type
>
bool operator!=(U&& u, T&& t) {
  return !( std::forward<U>(u) == std::forward<T>(t) );
} 
```

现在它只是一个有效的覆盖（如果`==`存在）。可悲的是，它有点贪婪：

```
struct test {
};
bool operator==(const test&, const test&);
bool operator!=(const test&, const test&); 
```

因为它会捕获几乎所有`test() != test()`而不是上面`!=`的调用。我认为这是不希望的——我宁愿调用显式而`!=`不是自动转发`==`和否定。

所以，我写了这个特质类：

```
template<typename T, typename U,typename=void>
struct can_not_equal // ... basically the same as can_equal, omitted 
```

哪个测试是否`T != U`有效。

然后我们增加`!=`如下：

```
template<typename U, typename T,
  typename=typename std::enable_if<
    can_equal<T,U>::value
    && !can_not_equal<T,U>::value
  >::type
>
bool operator!=(U&& u, T&& t) {
  return !( std::forward<U>(u) == std::forward<T>(t) );
} 
```

如果你解析它，它会说“这句话是假的”——`operator!=`存在于 and 之间`T`，`U`当且仅当`operator!=`且不存在于`T`and之间`U`。

毫不奇怪，我测试过的每个编译器都会在输入这个时出现段错误。（clang 3.2，gcc 4.8 4.7.2 英特尔 13.0.1）。 ~~我怀疑我正在做的事情是非法的，但我很想看到标准参考。~~（编辑：我所做的是非法的，因为它会导致无限递归模板扩展，因为确定我的`!=`应用是否需要我们检查我的`!=`应用。评论中链接的版本带有`#if 1`，给出了一个合理的错误）。

但我的问题是：有没有一种方法可以说服我基于 SFINAE 的覆盖在决定它是否应该失败时忽略“自身”，或者以某种方式摆脱自我引用问题？或者降低我的优先级`operator!=`足够低以便任何显式`!=`获胜，即使它不是那么好的匹配？

不检查“`!=`不存在”的那个工作得相当好，但还不足以让我像将其注入全局命名空间那样不礼貌。

目标是，一旦我的“魔法”被引入，任何可以在没有我的“魔法”的情况下编译的代码都会`!=`做同样的事情。`!=`当且仅当`!=`否则无效*并且* `bool r = !(a==b)`格式正确时，我的“魔术”才`!=`起作用。

* * *

脚注¹：如果你创建一个`template<typename U, typename T> bool operator!=(U&& u, T&& t)`，SFINAE 会认为每一对类型`!=`在它们之间都有一个有效的。然后，当您尝试实际调用时`!=`，它会被实例化，并且无法编译。最重要的是，你踩着`bool operator!=( const foo&, const foo& )`函数，因为你更适合`foo() != foo()`and `foo a, b; a != b;`。我认为这两种做法都是不礼貌的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T23:18:20.150

您的方法的问题似乎是后备全局定义`operator !=`太有吸引力，您需要 SFINAE 检查以排除它。但是，SFINAE 检查取决于函数本身是否适合重载决议，因此在类型推导期间会导致（尝试的）无限递归。

在我看来，任何基于 SFINAE 的类似尝试都会撞到同一堵墙，所以我认为最理智的方法是首先让你`operator !=`对重载解决方案的吸引力降低一点，并让其他合理编写的方法（这个稍后会清楚）重载`operator !=`优先。

鉴于`can_equal`您提供的类型特征：

```
#include <type_traits>
#include <functional>

template<typename T, typename U, typename=void>
struct can_equal : std::false_type {};

template<typename T, typename U>
struct can_equal<
   T,
   U,
   typename std::enable_if<
      std::is_convertible<
         decltype( std::declval<T>() == std::declval<U>() ),
         bool
      >::value
   >::type
>: std::true_type {}; 
```

我会这样定义后备`operator !=`：

```
template<typename T, typename U>
bool is_not_equal(T&& t, U&& u)
{
    return !(std::forward<T>(t) == std::forward<U>(u));
}

template<
    typename T,
    typename... Ts,
    typename std::enable_if<can_equal<T, Ts...>::value>::type* = nullptr
    >
bool operator != (T const& t, Ts const&... args)
{
    return is_not_equal(t, args...);
} 
```

据我所知，任何重载`operator !=`都将精确定义两个函数参数（因此没有参数包）将更适合重载解析。`operator !=`因此，只有在不存在更好的重载时才会选择上述的后备版本。此外，仅当`can_equal<>`类型特征返回时才会选择它`true`。

我已经针对您准备的 SSCCE 对此进行了测试，其中`struct`定义了四个 s 以及一些重载的`operator ==`and `operator !=`：

```
struct test { };

bool operator==(const test&, const test&) { std::cout << "(==)"; return true; }
bool operator!=(const test&, const test&) { std::cout << "(!==)"; return true; }

struct test2 { };

struct test3 { };
bool operator == (const test3&, const test3&) 
{ std::cout << "(==)"; return true; }

struct test4 { };

template<typename T, 
         EnableIf< std::is_convertible< T, test4 const& >::value >... >
bool operator == ( T&&, T&& ) { std::cout << "(==)"; return true; }

template<typename T, 
         EnableIf< std::is_convertible< T, test4 const& >::value >... >
bool operator != ( T&&, T&& ) { std::cout << "(!=)"; return true; } 
```

为了验证是否生成了所需的输出并反映您在原始版本的回退中所做的事情`operator !=`，我添加了一个打印输出到`is_not_equal()`：

```
template<typename T, typename U>
bool is_not_equal(T&& t, U&& u)
{
    std::cout << "!"; // <== FOR TESTING PURPOSES
    return !(std::forward<T>(t) == std::forward<U>(u));
} 
```

以下是您示例中的三个测试：

```
std::cout << (a != b) << "\n"; // #1
std::cout << (test3() != test3()) << "\n"; // #2
std::cout << (test4() != test4()) << "\n"; // #3 
```

关于第一个测试，`operator !=`是为 type 定义的`test`，所以`#1`应该打印：

```
(!==)1 
```

关于第二个测试，*没有*`operator !=`为定义，也不能转换为，所以我们的全局应该发挥作用并否定需要两个的重载的结果。因此，行应该打印：*`test3``test3``test4``operator !=``operator ==``const test3&``#2`*

 *```
!(==)0 // operator == returns true, and is_not_equal() negates it 
```

最后，第三个测试涉及两个类型为 的右值对象`test4`，为其`operator !=`定义（因为参数可转换为`test4 const&`）。因此，行`#3`应该打印：

```
(!=)1 
```

这是一个[现场示例](http://liveworkspace.org/code/3kW04t%2437)，显示产生的输出是预期的。*

# c# - C# 以编程方式更改系统位置，然后重新启动

> ID：15912287
> 
> 赞同：0
> 
> 时间：2013-04-09T20:52:51.373
> 
> 标签：c#

我需要完全更改系统位置并将其应用于所有帐户。

我现在如何更改线程，但在这种情况下，我需要实际更改所有用户帐户的系统位置。

它将是一个运行 Windows 的设备，将有一个 Windows 服务，当它启动时，它将向一个中央托管系统进行 Web 服务回调，该系统将告诉它它的配置，包括它的位置。然后它需要更改它的位置（适用于所有用户帐户），然后重新启动自身。

我知道如何从控制面板执行此操作，但我需要在 C# 中务实地执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:06:27.143

所有设置都包含在注册表中。[HKEY_USERS.DEFAULT\Control Panel\International] 位置。因此，您可以在 C# 中更改它们并重新启动系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:20:37.517

[您可以通过调用SetUserGeoID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374049%28v=vs.85%29.aspx)来设置当前用户的地理语言。[您可以通过调用SetLocaleInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374049%28v=vs.85%29.aspx)来设置用户的语言环境。但是，这仅适用于运行当前程序的用户帐户。

您需要使用 P/Invoke 来调用这些方法。[pinvoke.net](http://pinvoke.net/)上可能有原型和示例。

对于复制给其他用户，我不确定。听起来像是您使用 WMI（Windows 管理规范）所做的事情。

# php - 在开头截断字符串

> ID：15912291
> 
> 赞同：2
> 
> 时间：2013-04-09T20:53:00.087
> 
> 标签：php, jquery, html, css

我正在`text-overflow: ellipsis`div 中截断一些极长的文本值。基本上是为了避免因增加 div 的宽度而溢出，因为 URL 中没有空格。我需要做的是显示以下内容：

```
http://www.somewebsite.org/over-the-counter/drugs/medone.html
http://www.somewebsite.org/over-the-counter/drugs/medtwo.html
http://www.somewebsite.org/over-the-counter/drugs/medthree.html 
```

作为：

```
...he-counter/drugs/medone.html
...he-counter/drugs/medtwo.html
...-counter/drugs/medthree.html 
```

这在 HTML/CSS 中完全可行吗？还是 jQuery/PHP 是我唯一的解决方案？

顺便说一句，鼠标悬停时，完整的字符串显示为工具提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:55:57.860

`$short = '...'.substr($url, -20);`

在工具提示中只显示`$url`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:11:11.573

您可以在容器上使用纯 CSS 和`direction`属性设置为（从右到左）来完成此操作。`rtl`

# c++ - 将二进制文件读入结构太多次c ++

> ID：15912299
> 
> 赞同：1
> 
> 时间：2013-04-09T20:53:31.173
> 
> 标签：c++, file-io, struct, binary

我正在编写一个从二进制文件读取和写入的程序，我的问题是虽然文件（例如）中有 3 个结构，但它读取最后一个结构两次。这是我的代码：

结构：

```
struct PARTICEPENTS
{
    char id1[10];
    char name1[11];
    char id2[10];
    char name2[11];
    int points;
}; 
```

写作：

```
void EnterParticipants()
{
    ofstream  PartFile;
    int i=1;
    PARTICEPENTS part;
    string temp="";

    PartFile.open("part.bin",ios::out|ios::binary);

    if(!PartFile){return;}

    cout<<endl<<endl <<"Enter 3 Participants:"<<endl;
    cout<<endl;

    while(i<=3)
    {               
        cout<<"the "<<i<<" couple"<<endl;

        cout << "\tInsert the first id: " ;
        getline(cin, temp);
        strcpy(part.id1,stToChar(temp));
        cout << "\tInsert the first name: ";
        getline(cin, temp);
        strcpy(part.name1,stToChar(temp));
        cout << "\tInsert the second id:";
        getline(cin, temp);
        strcpy(part.id2,stToChar(temp));
        cout << "\tInsert the second name:" ;
        getline(cin, temp);
        strcpy(part.name2,stToChar(temp));      
        part.points=0;

        PartFile.write((char*)(&part), sizeof(part));

        i++;
    }

    PartFile.close();
} 
```

阅读：

```
void DisplayFile()
{

    ifstream PartFile;
    PartFile.open("part.bin",ios::in|ios::binary);
    PARTICEPENTS filePart;

    if(!PartFile){return;}

    while(!PartFile.eof())
    {
        PartFile.read((char*)(&filePart), sizeof(filePart));
        cout<<left<<setw(12)<<filePart.id1<<left<<setw(12)<< filePart.name1 
                <<left<<setw(12)<<filePart.id2<<left<<setw(12)<<filePart.name2<<
                left<<setw(7)<< filePart.points <<endl;
    }
} 
```

当我输入：

```
111111111 Kim 111111111 Lori 
222222222 Roy 222222222 Tom 
333333333 Guy 333333333 Don 
```

屏幕的输出是：

```
111111111 Kim 111111111 Lori 0
222222222 Roy 222222222 Tom 0
333333333 Guy 333333333 Don 0
333333333 Guy 333333333 Don 0 
```

我不知道为什么在最后一个结构之后阅读不会停止。谢谢你的帮助。（对不起，我的英语不好...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:18:55.607

```
while(!PartFile.eof())
{
    PartFile.read((char*)(&filePart), sizeof(filePart));
    cout<<left<<setw(12)<<filePart.id1<<left<<setw(12)<< filePart.name1 
            <<left<<setw(12)<<filePart.id2<<left<<setw(12)<<filePart.name2<<
            left<<setw(7)<< filePart.points <<endl;
} 
```

这里的问题是您正在阅读三个条目，**但您还没有到达文件末尾（当您阅读第三个时它是下一个）**。当您第四次进入循环时到达文件末尾。

那么自从

```
PartFile.read((char*)(&filePart), sizeof(filePart)); 
```

尝试读取 eof`filePart`并失败，因此没有任何内容被读取。这意味着它仍将包含来自第三个循环的数据。那将再次显示。

`PartFile.read`您可以通过在显示数据之前确保已成功来修复它。

```
while(PartFile.read((char*)(&filePart), sizeof(filePart)))
{
    // PartFile.read((char*)(&filePart), sizeof(filePart));
    cout<<left<<setw(12)<<filePart.id1<<left<<setw(12)<< filePart.name1 
```

# iphone - 将图像分配给 UIImageView 对象后如何刷新视图？

> ID：15912304
> 
> 赞同：3
> 
> 时间：2013-04-09T20:53:48.287
> 
> 标签：iphone, ios, uiimageview, uiimage

当有人单击按钮时，我有一个 UIImageView 插座，具体取决于他们单击的按钮。这是我的代码：

```
UIImage *img = [[UIImage alloc] initWithData:image];
self.imgToDisplay = [[UIImageView alloc]initWithImage:img];
// I try to use this to see the image:
[self.imgToDisplay setNeedsDisplay]; 
```

但没有用。有谁知道如何在我的 UIImageView 上显示图像？

我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:00:10.140

我猜`imgToDisplay`是`UIImageView`您在 Interface Builder 中创建并通过插座连接的？在这种情况下，您应该设置它的`image`属性而不是指向图像视图本身的指针。按照您的方式，指针现在指向未添加到视图层次结构中的图像视图的新实例，因此不会显示。您只需要将图像设置为已显示的现有图像视图。

```
self.imgToDisplay.image = [[UIImage alloc] initWithData:image]; 
```

如果您有意在代码中创建此图像视图，则需要将其添加到视图层次结构中。

```
[self.view addSubview:self.imageToDisplay]; 
```

（如果不使用 ARC，请不要忘记释放图像和/或图像视图）。

# android - AuthException 未解析为一个类型和多个 dex 文件 - 构建路径

> ID：15912307
> 
> 赞同：1
> 
> 时间：2013-04-09T20:53:57.553
> 
> 标签：android, eclipse, api, build, path

我已经下载了一个 google android 示例项目，可以在以下位置找到：[http ://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html)

我已经添加了谷歌日历api并注册了项目等。我首先遇到了九个错误：

1.  GoogleAuthException 无法解析为类型
2.  GoogleAuthException 无法解析为类型
3.  GoogleAuthException 无法解析为类型
4.  GooglePlayServicesUtil 无法解析
5.  GooglePlayServicesUtil 无法解析
6.  GooglePlayServicesUtil 无法解析
7.  不兼容的条件操作数类型 throwable 和 GoogleAuthException
8.  导入 com.android.google.gms 无法解析
9.  导入 com.android.google.gms 无法解析

我查找互联网以修复第一个错误，然后将 google-play-services.jar 添加到位于程序/开发/SDK/extras/google/google-play-services/libproject/google-play 中的 buld 路径-services_lib/库

这摆脱了所有无错误。当我尝试运行程序时，我在控制台中收到消息：

```
[2013-04-09 18:58:46 - AndroidCalendar] WARNING: unable to write jarlist cache file    C:\Users\Calendar\bin\jarlist.cache
[2013-04-09 18:58:48 - AndroidCalendar] WARNING: unable to write jarlist cache file C:\Users\Calendar\bin\jarlist.cache
[2013-04-09 19:00:39 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/google/api/client/googleapis/GoogleUtils;
[2013-04-09 19:00:39 - calendar-android-sample] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/google/api/client/googleapis/GoogleUtils;
[2013-04-09 21:17:13 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/google/api/client/googleapis/GoogleUtils;
[2013-04-09 21:17:13 - calendar-android-sample] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/google/api/client/googleapis/GoogleUtils;
[2013-04-09 21:30:49 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/google/api/client/googleapis/GoogleUtils;
[2013-04-09 21:30:49 - calendar-android-sample] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/google/api/client/googleapis/GoogleUtils; 
```

我也在问题选项卡中收到此错误：转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件定义 Lcom/google/api/client/googleapis/GoogleUtils

我尝试过的： 1.清理项目并重建 2.重新启动 eclipse

*   将以下 jar 文件添加到类路径（没有更改多个 dex 文件错误）：
*   google-api-client-1.14.1-beta.jar
*   google-api-client-android-1.14.1-beta.jar
*   google-oauth-client-1.14.1-beta.jar
*   google-http-client-1.14.1-beta.jar
*   google-http-client-android-1.14.1-beta.jar gson-2.1.jar
*   jackson-core-asl-1.9.4.jar jsr305-1.3.9.jar protobuf-java-2.2.0.jar

唯一要包含的其他推荐 jar 文件是 guava-11.0.1.jar，因为我在任何文件中都找不到它。上面的6个jar文件在路径：users/android./googleapi/libs

我是否通过包含 google-play-services.jar 文件修复了前九个错误，或者我的构建路径现在是否存在另一个问题？

**编辑** 在文件 --> eclipse 上的引用库/bin/dexed 库中，我可以看到有一些重复的 jar 文件。我删除了重复的文件并清理了项目以再次运行，但错误仍然存​​在，我注意到我在该文件夹中删除的文件已返回。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T01:33:04.360

我已将 google 项目添加到我的类路径中，以及本地参考。我必须手动编辑`.classpath`文件（假设您使用的是 eclipse）来做到这一点。然后我不得不重新启动 eclispe，并清理/重建几次。

我还发现一篇文章建议您将 google play 服务库复制到您的工作区并从那里引用它，这似乎对我的项目有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T11:34:41.590

在 Build path 中，您选择了 Tasks Api + private dependencies ，取消选中 private dependencies 并运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T01:57:28.887

右键单击您的项目。选择构建路径 -> 配置构建路径。在 Order and export 选项卡下，确保只选择了 jar 文件，或者只选择了一个框。

# facebook - 尝试通过 Graph API 将 Facebook 帖子安排到用户的提要时出现权限错误

> ID：15912315
> 
> 赞同：1
> 
> 时间：2013-04-09T20:54:22.167
> 
> 标签：facebook, facebook-graph-api, permissions

我想找到一种方法，允许我网站上的用户通过 Graph API 在他们的个人提要（“/me/feed”）上安排 Facebook 帖子。每当我尝试这样做时，我都会收到以下错误消息：

> (OAuthException - #200) (#200) 您没有创建预定帖子的权限

发布一个非计划的帖子工作正常（我只是省略了已发布和 schedule_publish_time 参数），而且我还能够通过提供 publish_stream 成功地将帖子安排到用户的个人页面提要（“/pageID/feed”） 、publish_actions 和 manage_pages 权限。我是否需要建立不同的权限才能在用户的供稿上创建预定的帖子？这是我为预定帖子提出的请求示例：

> [https://graph.facebook.com/me/feed?method=post&type=photo&access_token=AAAAAAAAAAAAAAAAAAAAA&message=Test1&picture=https%3a%2f%2fsome.jpg&published=false&scheduled_publish_time=1367301600](https://graph.facebook.com/me/feed?method=post&type=photo&access_token=AAAAAAAAAAAAAAAAAAAAA&message=Test1&picture=https%3a%2f%2fsome.jpg&published=false&scheduled_publish_time=1367301600)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T05:20:22.713

无法将“预定帖子”发布到用户的时间线 - 这是适用于 Facebook 页面的功能，不适用于用户个人资料。

# graph - 如何在图中找到关节顶点？

> ID：15912317
> 
> 赞同：1
> 
> 时间：2013-04-09T20:54:24.753
> 
> 标签：graph

由于我是图形新手，我没有得到可以清楚地解释如何在图形中找到关节点的算法。请任何人解释一下？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:01:50.880

一个简单的算法：

对于每个节点 N 所以： 1\. 把它拿走 2\. 计算连接组件的数量。通过dfs或bfs。如果这仍然是一个，继续循环。如果是两个，你已经找到了一个关节点。标记并继续循环。

这将在二次时间中运行。不确定是否有更好的算法。

* * *

[编辑：我在这个网站上](http://algs4.cs.princeton.edu/41undirected/)找到了一些 java 源代码：http : [//algs4.cs.princeton.edu/41undirected/Biconnected.java.html](http://algs4.cs.princeton.edu/41undirected/Biconnected.java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T14:13:14.407

参考这个解释。我希望你会发现它很有用。

[http://www.geeksforgeeks.org/articulation-points-or-cut-vertices-in-a-graph/](http://www.geeksforgeeks.org/articulation-points-or-cut-vertices-in-a-graph/)

# css - ie 8 添加了不必要的顶部和底部填充

> ID：15912318
> 
> 赞同：0
> 
> 时间：2013-04-09T20:54:27.693
> 
> 标签：css

即 8 正在向 div 添加不必要的填充。我在这里看不到任何不寻常的样式。有人可以帮忙吗？

![在此处输入图像描述](https://i.stack.imgur.com/jRkyo.png)

**html**

以蓝色突出显示的 div 是上下文中的那个。

![在此处输入图像描述](https://i.stack.imgur.com/F277o.png)

```
.block {
    clear: both;
}

.inline {
    float: left;
    clear: none;
    padding: 0;
}

div.content {
    padding: 0 18px 0 0;
} 
```

这是将重现此问题的 html 代码。对不起，长度。但是如果你把它复制到一个 html 文件并在 ie8 中打开它，你将能够重现它。

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>

<style>
    .block {
        clear: both;
    }

    div.block .inline:last-child {
        float: none;
        overflow: hidden;
    }

    div.content-root {
        padding: 0 0 0 18px;
    }

    .inline {
        float: left;
        clear: none;
        padding: 0;
    }

    div.content.input-container {
        padding-right: 0;
    }

    div.content {
        padding: 0 18px 0 0;
    }
</style>

</head>
<body>
  <div id="contentPane" style="background-color: transparent; display: block;">

    <form>
      <div class="block content-root">
        <div class="block">
          <div class="block">
            <div class="block">
              <div class="inline">
                <label>
                  <div class="block">
                    <div class="inline content input-container">
                      <input type="checkbox" />
                    </div>
                    <div class="inline">
                      <div class="block">
                        <div class="block">
                          <div class="inline" style="float: left;">
                            <div class="block content">
                              <p>
                                <span style="font-family: arial; font-size: 11pt;">C. </span>
                              </p>
                            </div>                                                 
                          </div>
                          <div class="inline">
                            <div class="inline">
                              <p><span>Correct</span></p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>

  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:26:55.717

默认情况下，段落标签有自己的边距。

如果你写

```
 <p style="margin:0px;"> 
```

“正确”一词上方和下方的“填充”。

# php - javascript：如何将数据插入mysql

> ID：15912320
> 
> 赞同：-2
> 
> 时间：2013-04-09T20:54:37.120
> 
> 标签：php, javascript, html, mysql

我有一个问题，如何使用 javascript 将数据插入 MySql DB？

我有以下JS代码：

```
function saveData()
{
    var table = document.getElementById('tblResult');
    var rowCount = table.rows.length;
    i = rowCount;
    var template = "<tr> <td>"+i+"</td> <td>"+document.getElementById('ctrl_ball_size_val').value+"</td> <td style='text-align: center; background-color: lime;'>± 0.1</td> <td>"+document.getElementById('ctrl_cilindr_height_val').value+"</td> <td style='text-align: center; background-color: lime;'>± 0.1</td> <td>"+document.getElementById('stopwatch').value+"</td> <td style='text-align: center; background-color: lime;'>± 0.1</td> <td>11300</td> <td style='text-align: center; background-color: lime;'>± 0.1</td> <td>1260</td> <td style='text-align: center; background-color: lime;'>± 0.1</td> </tr>";
    $('tbody').append(template);
} 
```

使用此代码，我正在构建一个包含从 html 页面上的输入中获得的动态数据的表。这是表格的 HTML 代码：

```
<table id="tblResult" class="zebra-striped">
    <thead>
    <tr>
        <th id="ID">Nr.p.k</th>
        <th>d ± △d, mm</th>
        <th style="background-color: lime;">△d, mm</th>
        <th>l ± △l, cm</th>
        <th style="background-color: lime;">△l, cm</th>
        <th>t ± △t, s</th>
        <th style="background-color: lime;">△t, s</th>
        <th>p ± △p, kg/m<sup>3</sup></th>
        <th style="background-color: lime;">△p, kg/m<sup>3</sup></th>
        <th>p<sub>1</sub> ± △p<sub>1</sub>, kg/m<sup>3</sup></th>
        <th style="background-color: lime;">△p<sub>1</sub>, kg/m<sup>3</sup></th>
    </tr>
    </thead>
    <tbody></tbody>
</table> 
```

我在其中插入了这个动态数据。所以我需要将所有 HTML 表插入/保存到 MySQL DB 中，该表将显示在第二页上，但是如何组织这些数据插入然后显示我不知道......有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:19:13.327

你不能通过 JavaScript 单独完成这一切。您需要了解客户端和服务器端之间的区别。查看您的所有 JS 代码将在用户的浏览器上运行因此您无法像 mySql 那样在客户端提供永久存储。您有一些 HTML5 存储 API，例如 webstorage、localstorage，但这些 API 在大小和其他方面都有限制。我不打算深入研究这些。所以我们在服务器端有我们的数据库。当我们需要一些数据时，我们发送一个获取请求并获取它。同样，我们想保存一些数据，我们用这些数据发出一个 post 请求。我们在后端运行了一些服务，它响应这些 GET 和 POST 请求，并对发送的数据采取适当的措施。如果您想查看与数据库交互的示例 php 代码。看看下面的 PHP 代码与数据库交互。

```
<?php
/****** 5 Step Story ***********
1\. Create a connection
2\. Select the database
3\. Fire the query
4\. Use query result
5\. Close the connection
*******************************/

// Step1\. Create a connection
$con = mysql_connect("localhost", "root", "root");
if (!$con) {
    die("Database connection could not be established" . mysql_error());
}

// Step2\. Select the database
$db_select = mysql_select_db("widget_corp", $con);
if (!$db_select) {
    die("Database could not be selected" . mysql_error());
}
?>
<html>
  <head>
    <title> Database Interaction (MySQL + PHP)  </title>
  </head>
  <body>
    <h1><center><u>Database Interation (MySQL + PHP) </u></center></h1>
    <?php
    // Step3: Querying from Database
      $result = mysql_query("SELECT * from subjects", $con);
      if (!$result) {
        die("Error in firing query on database" . mysql_error());
      }
   // Step4: Using query result
   /* $row is an associative array as well So both types of indexes work on it
      Numeric indexes as well as Keys both work */
      while ($row = mysql_fetch_array($result)) {
        echo $row["id"] . " " .
        $row["menu_name"] . " " .
        $row[2] . " " .
        $row[3] . "<hr>";
      }
   ?>
  </body>
</html>
<?php
   mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:10:18.640

您将需要某种类型的服务器端软件来连接到您的数据库。仅 Javascript 和 HTML 不会让您到达那里。您可以发出 AJAX 请求（或标准 POST），但后端必须有一些东西才能响应请求。

您是否在服务器上运行以下任何一种：ColdFusion、PHP、Python、Ruby、C++、Java、ASP、Perl？

编辑：

就像@showdev 建议的那样，您可以使用 AJAX 将您的请求发布到 PHP 页面，该页面将对您的数据库运行 INSERT 语句（请参阅@blunderBoy 的答案）。听起来您在屏幕上有一个用于输入数据的表单，如果您使用 jQuery，您的 AJAX 请求可能如下所示：

```
$.post("test.php", $("#testform").serialize() ); 
```

`test.php`您要发布到的 url 是哪里，并且`testform`是您的输入所在的表单的 id。

将该行放入您将行附加到表的 saveData() 函数中。

# c++ - 条件变量死锁

> ID：15912322
> 
> 赞同：8
> 
> 时间：2013-04-09T20:54:46.090
> 
> 标签：c++, multithreading, synchronization

我的代码中存在与使用条件变量相关的死锁问题。这更像是一个设计问题，而不是纯代码问题。一旦我理解了正确的设计，我实际上编写代码就没有问题了。我有以下情况：

1.  线程 A 等待一个条件变量。
2.  线程 B 调用 notify_all，线程 A 被唤醒。

这当然是我想要发生的事情，也是当一切按预期工作时会发生的事情。但有时，我会得到以下情况：

1.  线程 A 在开始等待条件变量之前执行代码。
2.  线程 B 调用 notify_all，认为线程 A 正在等待。
3.  线程 A 开始等待条件变量，没有意识到线程 B 已经告诉它停止等待。僵局。

解决此问题的最佳方法是什么？我想不出一种可靠的方法来检查线程 A 是否真的在等待，以便知道我什么时候应该在线程 B 中调用 notify_all。我必须求助于 timed_lock 吗？我不愿意。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T21:05:41.043

在线程 A 等待条件变量之前的期间，它必须持有一个互斥锁。最简单的解决方案是确保线程 B 在调用 notify_all 时持有相同的互斥锁。所以是这样的：

```
std::mutex m;
std::condition_variable cv;
int the_condition = 0;

Thread A: {
  std::unique_lock<std::mutex> lock(m);
  do something
  while (the_condition == 0) {
    cv.wait(lock);
  }
  now the_condition != 0 and thread A has the mutex
  do something else
} // releases the mutex;

Thread B: {
  std::unique_lock<std::mutex> lock(m);
  do something that makes the_condition != 0
  cv.notify_all();
} // releases the mutex 
```

这保证了线程 B 仅在线程 A 获取互斥体之前或在线程 A 等待条件变量时执行 notify_all()。

不过，这里的另一个关键是等待 the_condition 变为 true 的 while 循环。一旦 A 拥有了互斥锁，任何其他线程都不应该更改 the_condition，直到 A 测试了 the_condition，发现它为假，并开始等待（从而释放互斥锁）。

关键是：您真正在等待的是 the_condition 的值变为非零， std::condition_variable::notify_all 只是告诉您线程 B 认为线程 A 应该唤醒并重新测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-04T21:50:18.457

条件变量必须始终与互斥锁相关联，以避免由一个准备等待的线程和另一个线程创建的竞争条件，该线程可能在第一个线程实际等待它之前发出条件信号，从而导致死锁。线程将永远等待一个永远不会发送的信号。可以使用任何互斥锁，互斥锁和条件变量之间没有显式链接。

# java - 使用 Spring 的精确请求映射

> ID：15912329
> 
> 赞同：8
> 
> 时间：2013-04-09T20:55:31.763
> 
> 标签：java, spring

我在春天有以下

```
@RequestMapping("/hello") 
```

然而 Spring 会自动为 /hello/ 和 /hello.* 添加映射。如何进行精确的 URL 匹配？

只有 /hello 应该可以工作，其他的应该 404

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T08:39:13.380

关闭后缀匹配 ( `useSuffixPatternMatch`)`RequestMappingHandlerMapping`将解决您的问题，但如果您`<mvc:annotation-driven/>`在配置中使用（而不是手动连接所有必要的基础设施 bean），这样做实际上并不容易。在这种情况下，定义一个额外的 bean 类型`RequestMappingHandlerMapping`不会有任何效果。

你有两个选择：

1.  删除`<mvc:annotation-driven/>`将其扩展为一组等效的 bean 定义，您可以在其中应用该`useSuffixPatternMatch`设置。

2.  保持`<mvc:annotation-driven/>`原样，并使用此处描述的更简单的解决方法：[https](https://jira.springsource.org/browse/SPR-9371) ://jira.springsource.org/browse/SPR-9371 。这基本上添加了一个`BeanPostProcessor`检索`RequestMappingHandlerMapping`由 mvc 命名空间创建的 bean，并设置上述标志。

还有[另一张票](https://jira.springsource.org/browse/SPR-10163)`RequestMappingHandlerMapping`要求自定义由 mvc 命名空间创建的命名空间应该更容易，而无需像上面那样应用黑客攻击。您可以考虑对这张票进行投票。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-16T06:00:20.173

如果您使用的是 3.1/3.2 版本，那么您可以在不评论或删除的情况下尝试此操作

## 写一个后处理器

```
public class MvcConfigurationPostProcessor implements BeanPostProcessor, PriorityOrdered {

   @Override
   public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
      if (bean instanceof RequestMappingHandlerMapping) {
         ((RequestMappingHandlerMapping) bean).setUseSuffixPatternMatch(false);
      }
      return bean;
   }

   @Override
   public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
      return bean;
   }

   @Override
   public int getOrder() {
      return PriorityOrdered.HIGHEST_PRECEDENCE;
   }

} 
```

* * *

在 xml 配置中使用上述后处理器。

```
<bean class="com.beanprocbug.melia.MvcConfigurationPostProcessor" />
<mvc:annotation-driven /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T08:19:00.373

您可以像这样关闭后缀匹配：

```
<bean name="handlerMapping" class="...annotation.RequestMappingHandlerMapping">
    <property name="useSuffixPatternMatch" value="false"></property>
</bean> 
```

有关详细信息，请参阅[RequestMappingHandlerMapping](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerMapping.html)。

# wpf - DrawingSurface 和 DrawingSurfaceBackgroundGrid 之间是否存在性能差异？

> ID：15912332
> 
> 赞同：1
> 
> 时间：2013-04-09T20:55:32.733
> 
> 标签：wpf, drawing, windows-phone-8, windows-phone

在 Windows Phone 8 的 Xaml/Direct3d 应用程序中，使用 DrawingSurface 和 DrawingSurfaceBackgroundGrid 之间是否存在性能差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:38:17.933

是，有一点不同。

我设法找到有用的信息：

来自[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662943(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662943(v=vs.105).aspx)，在“带有 XAML 项目模板的 Direct3D”下

“如果您想创建一个仅使用托管应用程序作为本质上本机游戏的薄包装器的游戏，以利用仅托管应用程序可用的某些功能（例如动态磁贴），建议您使用此模板。此模板使用 DrawingSurfaceBackgroundGrid 控件在屏幕上显示 Direct3D 图形。与 DrawingSurface 控件不同，此控件必须放置在 XAML 树的根部，并且始终覆盖整个屏幕。与其他模板一样，用于渲染图形的 Direct3D 代码是“ **_** _

并来自[http://tiptoptool.com/tag/sdk/](http://tiptoptool.com/tag/sdk/)，在“DrawingSurfaceBackgroundGrid”下

“DrawingSurfaceBackgroundGrid 是一个非常特殊的元素，它必须始终是页面的根元素，并允许开发人员使用 C++ 从 Direct3D 直接渲染到背景。DrawingSurfaceBackgroundGrid，顾名思义，继承自 Grid，因此您可以使用 Grid 布局定位子元素. 子元素由平台在 Direct3D 渲染背景之上自动组合 **。DrawingSurfaceBackgroundGrid 允许开发人员直接渲染，而不是像 DrawingSurface 需要的副本（通过 Direct3D 交换链），从而提高性能。** 引入 DrawingSurfaceBackgroundGrid 是为了支持需要“金属”图形性能的游戏或其他应用程序，但也希望将现有 XAML 元素用于 UI，并可以访问本机应用程序模型中不可用的某些功能，例如动态磁贴或通知”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:12:52.933

主要区别在于`DrawingSurface`应该仅用于在屏幕的一部分上绘制，例如在控件中。

另一方面，`DrawingSurfaceBackgroundGrid`用于全屏使用，因为该元素充当网格，即您可以*在*其中添加 XAML 元素并像使用顶级网格布局一样排列它们。

至于性能，我会说对于全屏使用，后一种形式的性能更高，尽管我不能说这是事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T10:28:45.757

另一个主要区别是`DrawingSurfaceBackgroundGrid`不支持方向。它总是使用肖像。

# php - 关于标头附加参数的 php 邮件功能

> ID：15912342
> 
> 赞同：0
> 
> 时间：2013-04-09T20:56:08.620
> 
> 标签：php

我正在使用 dreamhost 进行邮件发送。我遇到了 php 邮件功能附加标头参数的问题。此代码有效，并发送电子邮件：

```
$to = 'myemail@gmail.com';
$name = $_POST['name'];
$email = $_POST['email'];
$subject = $_POST['subject'];
$message = $_POST['message'];
$headers = "From: $name <**webmaster@example.com**>\r\n" .
    "Reply-To: $name <**webmaster@example.com**>\r\n" .
    'X-Mailer: PHP/' . phpversion();
mail($to, $subject, $message, $headers); 
```

但是当我将 webmaster@example.com 替换为变量 $email

```
$headers = "From: $name <**$email**>\r\n" .
    "Reply-To: $name <**$email**>\r\n" .
    'X-Mailer: PHP/' . phpversion(); 
```

电子邮件未发送。我确实做了一个 print_r($_POST)，元素就在那里。我还做了另一个测试，我在表单中输入了电子邮件：webmaster@example.com，看看它是否会发送，它确实发送了。所以我的问题是，我该如何解决这个问题，如果用户将他们的电子邮件地址输入到带有另一个邮件扩展名的表单中，该邮件将不会被发送，但如果扩展名是 @example.com，那么邮件将被发送.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:44:38.000

$name 变量应该是完整的电子邮件地址：

"$name = " 'a name' email@whatever.com> "
$headers = "From: $from \r\n";

在我的服务器上工作。将前导 < 添加到电子邮件地址。如果我包含它，这个系统根本不会显示字符串。如果您的表单对响应者 nam 和电子邮件地址有不同的变量，您必须将它们连接起来才能以正确的格式获得 $name。

# bash - 删除标记之间的换行符

> ID：15912345
> 
> 赞同：2
> 
> 时间：2013-04-09T20:56:12.250
> 
> 标签：bash, sed, grep

我有一个文件，其中包含一些跨越多行的信息。为了某些其他 bash 脚本我必须使用属性，我需要这些信息都在一行上。但是，我显然不想删除文件中的所有换行符。

我想要做的是替换换行符，但只在所有对 STARTINGTOKEN 和 ENDINGTOKEN 之间，这两个令牌总是在不同的行上（但永远不会混淆在一起，例如在一个 ENDINGTOKEN 之前不可能有两个 STARTINGTOKEN 连续）。

我发现我可以用 tr "\n" " " 删除换行符，我还发现我可以用 sed -e '/STARTINGTOKEN/,/ENDINGTOKEN/!d' 匹配多行的模式

但是，我无法弄清楚如何组合这些操作，同时保持文件的其余部分保持不变。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:06:29.770

你在找这个吗？

```
 awk '/STARTINGTOKEN/{f=1} /ENDINGTOKEN/{f=0} {if(f)printf "%s",$0;else print}' file 
```

例子：

```
kent$  cat file
foo
bar
STARTINGTOKEN xx
1
2
ENDINGTOKEN yy
3
4
STARTINGTOKEN mmm
5
6
7
nnn ENDINGTOKEN
8
9

kent$  awk '/STARTINGTOKEN/{f=1} /ENDINGTOKEN/{f=0} {if(f)printf "%s",$0;else print}' file
foo
bar
STARTINGTOKEN xx12ENDINGTOKEN yy
3
4
STARTINGTOKEN mmm567nnn ENDINGTOKEN
8
9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:14:04.203

使用 awk：

```
awk '$0 ~ /STARTINGTOKEN/ || l {l=sprintf("%s%s", l, $0)} 
     /ENDINGTOKEN/{print l; l=""}' input.file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:10:37.530

这似乎有效：

```
 sed -ne '/STARTINGTOKEN/{ :next ; /ENDINGTOKEN/!{N;b next;}; s/\n//g;p;}' "yourfile" 
```

一旦找到起始标记，它就会循环，拾取行，直到找到结束标记，然后删除所有嵌入的换行符并打印它。然后重复。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T08:00:46.360

这可能对您有用（GNU sed）：

```
sed '/STARTINGTOKEN/!b;:a;$bb;N;/ENDINGTOKEN/!ba;:b;s/\n//g' file 
```

或者：

```
sed -r '/(START|END)TOKEN/,//{/STARTINGTOKEN/{h;d};H;/ENDINGTOKEN/{x;s/\n//gp};d}' file 
```

# markdown - 转义 Markdown 以与 C 预处理器一起使用

> ID：15912347
> 
> 赞同：2
> 
> 时间：2013-04-09T20:56:13.980
> 
> 标签：markdown, c-preprocessor

我想在同一个文件中结合 Markdown 和 C 预处理器指令。问题是`#`这在两种语言中都有含义。假设 C 预处理器首先运行，我如何`#`对 Markdown 标题中使用的任何内容进行换位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:12:22.497

尝试用值“#”定义一个 C 预处理器宏。一个例子：

```
#define HASHMARK #

Some text before.

HASHMARK 47 != 42
HASHMARK 48 != 42
HASHMARK 49 != 42

Some text after. 
```

示例输出（在 Cygwin 上使用 gcc 4.5.3 预处理）：

```
Some text before.

 # 47 != 42
 # 48 != 42
 # 49 != 42

Some text after. 
```

您可能需要对此进行调整，以便间距适合您的应用程序。

# android - 如何使用调试找出一个android项目的流程

> ID：15912349
> 
> 赞同：0
> 
> 时间：2013-04-09T20:56:18.213
> 
> 标签：android, debugging

我是android开发的新手。我下载了一个玩具项目，想弄清楚这个项目的流程。我可以使用调试来找出它以及如何解决吗？

让我更详细地解释一下。每个 android 项目都从一个“主要”活动开始。我想我找到了项目的“主要”活动，并在`onCreate`这个“主要”活动的方法上设置了一个断点。我希望从那个断点一步一步地运行这个项目来弄清楚流程。但是它不起作用，因为完成该`onCreate`方法后调试停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:03:11.917

android 应用程序的“流程”更像是一个异步模型，而不是顺序的动作流程。有一个主应用程序循环处理外部事件（例如单击按钮）和与活动生命周期相关的回调（例如您的 onCreate 方法）以及许多其他内容。

每个事件都被放入队列并异步处理，因此不容易跟踪。最好考虑行动和反应。无论如何，您都可以深入研究 android 源代码并查看幕后运行的内容。可以在[此处](http://android-developers.blogspot.it/2009/05/painless-threading.html)找到有关 android 应用程序模型的一些提示，但任何 google 搜索“android ui thread queue”都会导致相关信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:09:08.210

从 AndroidManifest.xml 文件开始。打开它并查找带有 LAUNCHER 类别的 Activity。然后打开该 Activity 并转到 onCreate(...) 方法。这是您的应用程序开始的地方。在该方法内部，调用了 setContentView(R.layout.some_layout)。res/layout 文件夹中的 some_layout.xml 是此 Activity 的 UI。

您在 Android 应用中看到的每个窗口都是一个 Activity，每个 Activity 都有一个布局文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:01:20.860

如果您想了解典型的 android 应用程序的流程，我建议您下载示例（如果您还没有的话）并添加您自己的日志语句。您也可以使用调试器。然后开始在这里和那里进行小的更改以强制不同的控制“流”，因为您猜测应该发生什么并观察您的日志记录语句和应用程序行为以查看发生了什么。

示例项目可以从 eclipse 中的 adt 插件下载，并作为现成的项目提供。它们也是一种很好的学习方式，因为它们通常是“最佳实践”的做事方式。

希望有帮助！祝你好运 ：）

# c# - 应该在哪里使用 Rx？

> ID：15912350
> 
> 赞同：8
> 
> 时间：2013-04-09T20:56:21.183
> 
> 标签：c#, system.reactive, actor

我正在考虑将 Rx 引入我的工作场所，但我对它了解得越多，我认为它并没有真正给你带来优势。

我们有很多服务器应用程序，它们在一端接收输入数据并在另一端输出。这对于演员模型和“无限”线程可扩展性来说是完美的，直到现在我已经使用 ConcurrentQueues 来实现消息传递，我认为 Rx 可能是一个更好的功能性替代方案，它可以使并发更加隐式，帮助我移动一些从命令式代码到可观察对象声明的数据流决策。

但是阅读它并尝试它，我认为与使用常规旧线程和 ConcurrentQueues 进行消息传递相比没有太大优势。Rx 给我带来了哪些优势？人们总是说，尽管 .NET 4.5 使很多 Rx 过时（尽管是异步和 Dataflow），但它仍然可以很好地处理事件流。哪些情况会出现事件流，我如何识别它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:25:12.023

如果您需要并行化某些任务，请使用 TPL。

如果您需要执行异步操作，请使用`Task`& `async/await`。

如果您需要接收、过滤和组合事件流，请使用 Rx。请注意，Rx**不一定是异步**的——它只是一个处理事件流的模型，就像 LINQ 是一个处理集合的模型一样。

您的用例听起来像是第一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:37:19.173

SO上有很多类似的问题......

Rx 是关于异步操作的基于数学的组合。TPL 和“常规旧线程”是非组合的。您必须先查看重要的示例，然后才能看到该组合真正使您受益的地方。

看看这个介绍 Rx 的页面（以及它的其余部分），我相信你会开始了解 Rx 的原因：http: [//introtorx.com/Content/v1.0.10621.0/01_WhyRx .html#WhyRx](http://introtorx.com/Content/v1.0.10621.0/01_WhyRx.html#WhyRx)

# c++ - 如何处理不正确的输入文件

> ID：15912355
> 
> 赞同：0
> 
> 时间：2013-04-09T20:56:33.857
> 
> 标签：c++, exception

我正在开始一个项目，我想知道在文件输入处理期间处理错误的最佳实践。我目前对该项目的计划涉及以下过程`main`：

```
unique_ptr<Configuration> config(initConfig(argc,argv));
unique_ptr<InterfaceA> a(initA(config));

// Do real work here 
```

配置类和所有其他类的初始化数据将包含在其输入文件的标头中，例如：

```
#ObjectA-1 
```

`ObjectA`告诉我我有一个文件打算变成一个满足的对象，`InterfaceA`并且`1`告诉我要使用该接口的哪个具体实现。

`initConfig`我的问题是对和等函数的错误处理`initA`。在这些函数中，我将解析它们各自文件的第一行，并解码上述信息。比方说，如果`initA`我碰巧得到一个没有适当标题的文件，无论是它`#ObjectB-3`，还是根本没有标题。我看到了两种处理错误的方法：

*   抛出将在 main 中捕获的异常。这将允许我打印错误，然后通过错误标志绕过其他初始化函数，并进行任何我需要的高级清理。不好的部分`main`是它们主要由异常处理组成，这使得代码更难阅读。

*   从 init 函数内部打印一个错误，然后调用`exit(EXIT_FAILURE)`并依靠我的操作系统来清理以前分配的内存。这可能会导致更简洁的代码和更多的本地错误处理。

如果不是为了使用该`exit`功能，我个人更喜欢第二种。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:51:51.780

我使用以下规则来执行错误处理：

1.  如果可以的话，调用代码是否应该处理异常事件？如果是，则抛出异常。有时“异常”很难定义，所以更像是“这应该发生吗？” 我认为在这种情况下，您应该抛出异常，并且`main`应该在有意义的*情况下处理它们。*

    该标准定义了两组例外情况。首先是那些继承自`std::logic_error`. 当调用代码违反了你的函数契约时，通常会抛出这些。然后是那些继承自 的`std::runtime_error`，用于只能在运行时检测到的错误。这听起来和你的一模一样。它只有在读取文件时才知道文件有问题。

    当然，如果你愿意，你可以抛出你自己的异常类型。

2.  它是被认为是正常的并且可能被调用代码忽略的错误吗？这可能是错误代码的适当使用。

3.  这是您的代码内部的逻辑错误吗？这更有意义`assert`。您应该使用`assert`s 来验证您正在做的事情是否真的有意义。一个愚蠢的例子是`int y = 5; y++; assert(y == 6);`。将其视为防止愚蠢错误的保险。

正如我所说，您的问题听起来像是使用异常的好地方。如果正确使用 RAII，内存分配绝对没有问题。也就是说，所有的内存释放都应该在对象的销毁中完成。即使抛出异常，仍会调用析构函数。

# html - 使用 :not 删除格式

> ID：15912362
> 
> 赞同：0
> 
> 时间：2013-04-09T20:57:00.327
> 
> 标签：html, css

我有一个班级`rightband`，在班级里面`message`。有时，父母`<div class="message">`有一个 id `subnote`，有时 - 没有。代码如下：

```
<div class="message">
    <div class="rightband">
        <img id="img-up" src="arrow-up.png")" />
        <img id="img-down" src="arrow-down.png")" />
    </div>
</div>
<div id="subnode" class="message">
    <div class="rightband">
        <img id="img-up" src="arrow-up.png")" />
        <img id="img-down" src="arrow-down.png")" />
    </div>
</div> 
```

在我的 CSS 中，出于特殊原因，我需要将子类`rightband`格式化为在悬停时更改，而不是父类。

```
#img-up, #img-down {
    display: none;
}
#subnode .rightband:hover #img-up {
    display: block;
}
:not(#subnode) .rightband:hover #img-down {
    display: block;
} 
```

我`.rightband:hover`需要在父级中`#img-up`有 id=" `subnode`" 时显示，并`#img-down`在父级没有`subnode`.

这可以在 CSS 中完成吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:14:53.183

尝试类似：

```
#img-up, #img-down {
    display: none; 
}
.rightband:hover #img-down {
    display: block;
}
.rightband:hover #img-up {
    display: none;
}

#subnode .rightband:hover #img-up {
    display: block;
}    
#subnode .rightband:hover #img-down {
    display: none;
} 
```

# c# - 如何更改选项卡的背景颜色？

> ID：15912365
> 
> 赞同：1
> 
> 时间：2013-04-09T20:57:05.530
> 
> 标签：c#, winforms

我有两个窗体。第一个是名为 main 的 mdiParent 形式。第二个是演示表单，它是主表单的子表单。演示表单具有选项卡式布局。演示表单有一个首选项按钮。当我单击首选项按钮时，会打开一个新表单（“首选项”），要求单击设置颜色按钮。单击该按钮会打开一个对话框结果以更改颜色。当我选择一种颜色时，首选项背景色会发生变化。但 dows 不会更改选项卡式布局（'presentation form'）背景色。我在 n 层架构中构建这个应用程序。所以帮助我如何更改选项卡的背景色。如果您不理解我的问题，我将上传代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:26:18.973

TabControl 没有公开 BackColor 属性，因为它们通常基于当前窗口系统主题进行绘制。

这通常不值得努力，但 TabControl 确实有一个 DrawMode 属性，您可以在 DrawItem 事件中自己绘制选项卡。

每个单独的 TabPage 控件都有一个可用的 BackColor 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:44:02.263

这是我的自定义事件处理程序，我必须创建一个围绕文本的彩色框。选定的选项卡是一种颜色，未选择的是另一种颜色...

```
private void ChangeTabColor(Object sender, DrawItemEventArgs e)
{
    Font TabFont;
    Brush BackBrush;// = new SolidBrush(Color.Green); //Set background color
    Brush ForeBrush = new SolidBrush(Color.Black);//Set foreground color
    Brush borderBrush = new SolidBrush(Color.Black);//Set foreground color

    if (e.Index == this.tabMain.SelectedIndex)
    {
        TabFont = new Font(e.Font, FontStyle.Bold);
        BackBrush = new SolidBrush(Color.MediumSeaGreen); //Set background color
        //ForeBrush = new SolidBrush(Color.Black);//Set foreground color
    }
    else
    {
        TabFont = e.Font;
        BackBrush = new SolidBrush(Color.LightSteelBlue); //Set background color
        //ForeBrush = new SolidBrush(Color.Yellow);//Set foreground color
    }

    string TabName = this.tabMain.TabPages[e.Index].Text;
    StringFormat sf = new StringFormat();
    sf.Alignment = StringAlignment.Center;

    Rectangle r = e.Bounds;

    r = new Rectangle(r.X, r.Y + 5, r.Width, r.Height - 3);

    if (e.Index == this.tabMain.SelectedIndex)
    {
        Pen rectPen = new Pen(borderBrush, 1.0f);
        r.Y -= 2;
        r.X += 3;
        r.Height -= 9;
        r.Width -= 8;
        e.Graphics.FillRectangle(BackBrush, r);
        e.Graphics.DrawString(TabName, TabFont, ForeBrush, r, sf);
        e.Graphics.DrawRectangle(rectPen, r);
    }
    else
    {
        Pen rectPen = new Pen(borderBrush, 1.0f);
        r.Y -= 2;
        r.Height -= 4;
        r.Width -= 2;
        e.Graphics.FillRectangle(BackBrush, r);
        e.Graphics.DrawString(TabName, TabFont, ForeBrush, r, sf);
        e.Graphics.DrawRectangle(rectPen, r);
    }
    //Dispose objects
    sf.Dispose();

    if (e.Index == this.tabMain.SelectedIndex)
    {
        TabFont.Dispose();
        BackBrush.Dispose();
    }
    else
    {
        BackBrush.Dispose();
        ForeBrush.Dispose();
    }
} 
```

当然“tabMain”是指选项卡控件名称。我希望这对你想要做的事情有所帮助......可能有点花哨，但代码并不难，而且我认为它看起来更干净......加上为了做到这一点，我确保设置字体和项目大小的适当属性：

字体 = Arial，9pt，样式 = 粗体

ItemSize = 95, 25 ...高度是重要的部分，只要你设置SizeMode = Normal

# jquery - jQuery 表单提交在 Firefox 中不起作用

> ID：15912368
> 
> 赞同：0
> 
> 时间：2013-04-09T20:57:14.923
> 
> 标签：jquery, firefox, submit

我已经查看了关于此的所有问题，但找不到解决方案。我有一个通过 AJAX 调用附加到 DOM 的表单，成功完成后，我将表单提交连接到 javascript 方法。在 Chrome 中运行良好。不在 Firefox 20 或 21 中调用我的 javascript 方法。

```
 $("#dateList").load("/chargeback/cb_timeentry/te_list/" + empId, function() {
        $("#addEntryDate").submit(function() {
            addEntryDate();
            return false;   
        });
    }); 
```

由 Django 呈现的表单看起来像这样（在 FF 和 Chrome 中）：

```
<div id="addOrDelete">
    <input id="addEntryDateButton" type="submit" value="+">
    <input id="deleteEntryDateButton" type="submit" disabled="true" value="-">
    <table>
        <tbody>
            <tr>
                <form id="addEntryDate" class="uiText" method="get" action="."></form>
                <form id="deleteEntryDateForm" class="uiText" method="get" action="."></form>
            </tr>
        </tbody>
     </table>
 </div> 
```

在 Django 模板中编写的表单是这样的：

```
<div id="addOrDelete">
<table>
    <tr>
        <form id="addEntryDate"  class="uiText" action="." method="get">
            <input id="addEntryDateButton" type="submit" value="+" disabled="true" />
        </form>
        <form id="deleteEntryDateForm" class="uiText" action="." method="get">
            <input id="deleteEntryDateButton" type="submit" value="-" disabled="true"/>
        </form>
        </tr>
</table>
</div> 
```

加载调用在 Firefox 中运行良好，正确的 HTML 在 addEntryDate 表单中显示了我的按钮 type=submit。负载到达提交行，addEntryDate 在 DOM 中，但是当我单击它时，它不会调用 addEntryDate() javascript 方法。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:16:25.313

我的猜测：您的页面上已经有一个带有 ID 的元素，`addEntryDate`而 Firefox 不会将新元素识别为拥有该 ID，但 Chrome 已选择优先考虑它。

不要编写导致两个元素具有相同 ID 的代码 - 并注意导致它的动态 DOM 操作，使用`.load()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:07:49.763

我不了解 Django，但乍一看呈现的代码，我认为它永远不会起作用。

`input submit`应该在`form`元素内，以便提供默认（浏览器支持）表单提交。但如果它仍然有效，那么 Django 可能会添加一些 javascript 代码，将 mouseclick javascript 事件链接到正确的表单 subbmition。

这很有可能，因为 Django 模板呈现的表单有效，而您（通过 AJAX）创建的表单无法正常工作。

如果有一些 jQuery/plain Javascript/等，请在重新渲染的页面中搜索。可能对您的表单提交负责的代码，并尝试在基于 AJAX 的表单中复制该代码。

如果它不存在，那么第一个表单甚至不应该首先提交，我不知道为什么它会在 Chrome 中工作。

但至少你可以编写简单的 jQuery 来做到这一点：

```
 $("#dateList").load("/chargeback/cb_timeentry/te_list/" + empId, function() {
        $(document).on("click", "#addEntryDateButton", function(e) {
            e.preventDefault();
            e.stopPropagation();
            $("#addEntryDate").submit();
        });

        $("#addEntryDate").submit(function() {
            addEntryDate();
            return false;   
        });
    }); 
```

# linux - 如何删除 CLOSE_WAIT 套接字连接

> ID：15912370
> 
> 赞同：103
> 
> 时间：2013-04-09T13:31:29.730
> 
> 标签：linux, sockets

我编写了一个与特定端口上的服务器交互的小程序。该程序运行良好，但是：

一旦程序意外终止，并且从此套接字连接显示为`CLOSE_WAIT`状态。如果我尝试运行一个程序，它会挂起，我必须强制它关闭，这会累积*更多的* `CLOSE_WAIT`套接字连接。

有没有办法刷新这些连接？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-09T17:30:04.117

`CLOSE_WAIT`意味着您的程序仍在运行，并且尚未关闭套接字（内核正在等待它这样做）。添加`-p`以`netstat`获取 pid，然后更有力地杀死它（`SIGKILL`如果需要）。那应该摆脱你的`CLOSE_WAIT`套接字。您也可以使用`ps`来查找 pid。

`SO_REUSEADDR`用于服务器和`TIME_WAIT`套接字，因此不适用于此处。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-07-25T11:11:20.603

正如[克里斯特克拉克](http://unix.derkeiler.com/Mailing-Lists/SunManagers/2006-01/msg00367.html)所描述的那样。

> CLOSE_WAIT 表示连接的本端已经收到另一端的 FIN，但是 OS 正在等待本端的程序真正关闭它的连接。
> 
> 问题是您在本地机器上运行的程序没有关闭套接字。这不是 TCP 调整问题。当程序保持连接打开时，连接可以（并且非常正确地）永远保持在 CLOSE_WAIT 中。
> 
> 一旦本地程序关闭套接字，操作系统可以将 FIN 发送到远程端，在您等待 FIN 的 ACK 时将您转换到 LAST_ACK。一旦收到，连接就完成并从连接表中删除（如果您的终端处于 CLOSE_WAIT状态，那么您最终*不会*处于 TIME_WAIT 状态）。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-04-10T11:22:23.490

`ss`您可以使用命令强制关闭套接字；该`ss`命令是一个用于转储套接字统计信息的工具，并以与 netstat 类似的方式（尽管更简单和更快）显示信息。

要杀死任何处于 CLOSE_WAIT 状态的套接字，请运行此命令（以 root 身份）

```
$ ss --tcp state CLOSE-WAIT --kill 
```

您还可以过滤您的操作

```
$ ss --tcp state CLOSE-WAIT '( dport = 22 or dst 1.1.1.1 )' --kill 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-11-14T10:58:21.560

即使过多的 CLOSE_WAIT 连接意味着您的代码一开始就有问题，并且这是公认的不好的做法。

您可能想查看：[https ://github.com/rghose/kill-close-wait-connections](https://github.com/rghose/kill-close-wait-connections)

该脚本所做的是发送连接等待的 ACK。

这对我有用。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-07-17T10:46:57.957

我对最新的 Tomcat 服务器（7.0.40）也有同样的问题。几天没反应一次。

要查看打开的连接，您可以使用：

```
sudo netstat -tonp | grep jsvc | grep --regexp="127.0.0.1:443" --regexp="127.0.0.1:80" | grep CLOSE_WAIT 
```

如[本文](https://unix.stackexchange.com/questions/10106/orphaned-connections-in-close-wait-state)所述，您可以使用`/proc/sys/net/ipv4/tcp_keepalive_time`来查看值。该值似乎以秒为单位，默认为 7200（即 2 小时）。

要更改它们，您需要编辑`/etc/sysctl.conf`.

```
Open/create `/etc/sysctl.conf`
Add `net.ipv4.tcp_keepalive_time = 120` and save the file
Invoke `sysctl -p /etc/sysctl.conf`
Verify using `cat /proc/sys/net/ipv4/tcp_keepalive_time` 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-02-16T09:04:06.360

需要说明的是`Socket`，客户端和服务端的实例都需要显式调用`close()`。如果也只有一个端点调用`close()`，则套接字将保持在 CLOSE_WAIT 状态。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-02T13:46:04.403

还值得注意的是，如果您的程序产生一个新进程，该进程可能会继承您打开的所有句柄。即使在您自己的程序关闭之后，那些继承的句柄仍然可以通过孤立的子进程保持活动状态。而且它们在 netstat 中的显示不一定完全相同。但无论如何，当这个子进程还活着时，套接字将在 CLOSE_WAIT 中徘徊。

我有一个运行亚行的案例。如果 ADB 尚未运行，它本身会生成一个服务器进程。这最初继承了我所有的句柄，但在我调查时并没有显示为拥有它们中的任何一个（macOS 和 Windows 也是如此 - 不确定 Linux）。

# c - 使用 mongo-c-driver 不能使用包含正斜杠 (/) 的正则表达式

> ID：15912374
> 
> 赞同：2
> 
> 时间：2013-04-09T20:57:21.117
> 
> 标签：c, regex, mongodb, bson

我正在尝试将 C-API 用于 MongoDB。我想查找名称与包含斜杠 (/) 的正则表达式匹配的记录。如果我运行 mongo 命令行，我会得到 40 个查询结果：

```
 db.test_006.find({'name':/^\/TEST::TOP:NEWSTAT\/_data_[0-9]*/}) 
```

哪个是对的。当我尝试在 CI 中对此进行编码时，无法使其匹配。

使用：

```
bson_append_regex( &query, "name","/TEST::TOP:NEWSTAT/" , "" ) 
```

我找到了所有的记录等等。

所有的组合`\\/` 甚至`[/]` 没有`[\\/]` 找到任何记录。我也试过了`\\x2F`。

这是刚刚坏了吗？我错过了什么吗？有很多关于编译正则表达式以与其他语言（python、java 等）一起使用的信息

谢谢，-乔什

# backbone.js - 如何使用backbone.js 定期检查远程数据源并更新表？

> ID：15912380
> 
> 赞同：1
> 
> 时间：2013-04-09T20:57:33.040
> 
> 标签：backbone.js

具体来说，我有一个标准`<table>`，我希望随着新数据的输入或输出而更新行。我的数据以 JSON 对象的形式出现，如果有新项目，我想在相应位置的表中添加一行（这意味着顺序很重要）。如果某个项目不存在，我想删除`<tr>`.

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:16:14.397

[http://jsfiddle.net/CoryDanielson/phw4t/](http://jsfiddle.net/CoryDanielson/phw4t/)

给你，希望代码足够简单，可以遵循...... Backbone.js 时钟。

基本上这个想法是你把一个集合放在一个视图中。然后，您使用 a 使集合定期获取数据`setInterval`并调用 .fetch({ 'reset': true }) ，以便`reset`在集合具有一组新数据时触发事件。让视图监听集合的`reset`事件，然后渲染表格。

重新渲染数据比试图弄清楚哪些数据发生了变化、哪些数据被删除以及哪些数据被添加要容易得多。如果你用硬方法做，或者只是重新渲染整个表格，你最终会得到相同的结果。只要您优化了 DOM 插入（仅写入 DOM 一次...渲染屏幕外），就不会影响性能。

```
var PollingCollection = Backbone.Collection.extend({
    url: "path/to/data/source",
    model: new Backbone.Model(),
    initialize: function (model, options) {
        this.options = options;
        setInterval(function () {
            this.fetch({
                "reset": true
            });
        }.bind(this), options.pollRate);
    },
    /**
     * Overriding fetch for the example. If the URL was valid, delete the fetch
     * function below.
     */
    fetch: function () {
        this.reset([
        new Backbone.Model({
            "name": "current",
            "time": Date().toString()
        }),
        new Backbone.Model({
            "name": "next fetch",
            "time": "in " + this.options.pollRate / 1000 + " second(s)"
        })]);
    }
});

var TableView = Backbone.View.extend({
    initialize: function (options) {
        this.pollingCollection = new PollingCollection(null, options);
        this.listenTo(this.pollingCollection, 'reset', this.render);
        /**
         * appending to body from within a view is 'bad'. normally another
         * view would place this in the HTML. Just keepin' it simple for
         * example
         */
        $('body').append(this.$el);
    },
    render: function () {
        // Render html into table then append. 1 DOM insert.
        var table = $("<table></table>"),
            html = this.renderTable();
        table.append(html);
        this.$el.html(table);
    },
    renderTable: function () {
        var tableRows = "";
        this.pollingCollection.each(function (model) {
            tableRows += this.renderRow(model);
        }, this);
        return tableRows;
    },
    renderRow: function (model) {
        return "<tr><td>" + model.get('name') + ":</td><td>" + model.get('time') + "</td></tr>";
    }
});

var tableView = new TableView({ "pollRate": 1000 }); // fetch data every 1000 ms 
```

# ef-code-first - 实体框架多重关系

> ID：15912384
> 
> 赞同：1
> 
> 时间：2013-04-09T20:57:46.540
> 
> 标签：ef-code-first

我是实体框架的新手，我可能有一个简单的问题。

我最大程度地简化了结构以使其清晰（我希望如此）。

想象一下，我只需要创建一个简单的“企业”类，只有一个名称。然后另一个名为“Worker”的类也只有一个工人的名字。一个工人应该属于一个企业。企业必须有经理（工人）。

所以这就是我想象这些简单类的方式：

```
public class Worker
{
    public int WorkerId { get; set; }
    public String Name { get; set; }

    public int EnterpriseId { get; set; } // ForeignKey for Enterprise
    public Enterprise Enterprise { get; set; }
}

public class Enterprise
{
    public int EnterpriseId { get; set; }
    public String Name { get; set; }

    public Worker Manager { get; set; }
    public List<Worker> Workers { get; set; }
} 
```

我希望这些类产生以下数据库结构：

```
Table Worker
    WorkerId (PK, int, not null)
    Name (varchar(128), not null)
    EnterpriseId (FK, int)

Table Enterprise
    EnterpriseId (PK, int, not null)
    Name (varchar(128), not null)
    Manager (FK, int) 
```

我用modelBuilder尝试了很多东西，但我从来没有得到我想要的东西。是否有使用 Fluent API 的解决方案来做我想做的事情？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:36:17.723

我不知道您打算如何获得管理器对象，但我猜您需要使用它`Inheritance`来使您的设计达到最佳状态。试试这个：

```
public abstract class Employee
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int EmployeeId{ get; set; }

    public String Name { get; set; }

    [ForeignKey("Enterprise"), DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int EnterpriseId { get; set; } // ForeignKey for Enterprise

    public Enterprise Enterprise { get; set; }
}

[Table("Workers")] // Table per Type (TPT), This will be your Table name in your database
public class Worker : Employee
{
   //Add properties only related to workers
}

[Table("Managers")] // Table per Type (TPT). This will be your Table name in your database
public class Manager : Employee
{
   //Add properties only related to Managers
}

public class Enterprise
{
   [Key]
   [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
   public int EnterpriseId { get; set; }
   public String Name { get; set; }

   public virtual ICollection<Employee> Employees{ get; set; }
} 
```

**注意**：抱歉，这是使用`Property Mapping`

**链接**：[这是一个简单的流利映射示例的链接](http://agilenet.wordpress.com/2011/04/18/entity-framework-code-first-specify-foreign-key-name-in-one-to-many-relationship-with-fluent-api/)

**链接**：[在此处阅读有关每种类型的表 (TPT) 继承的信息](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:56:56.873

这不会让你得到你想要的（在 Db 中） -**但这是我推荐的**......

```
public ICollection<Worker> Workers { get; set; } // instead of List<>
// ...
modelBuilder.Entity<Worker>()
    .HasRequired(x => x.Enterprise)
    .WithMany(x => x.Workers)
    .HasForeignKey(x => x.EnterpriseId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Enterprise>()
    .HasOptional(x => x.Manager)
    .WithOptionalPrincipal() // x => x.DefaultForEntity)
    .WillCascadeOnDelete(false); 
```

你可以像这样使用它：

```
var enterprise = new Enterprise { Manager = new Worker { Name = "Manager", }, };
enterprise.Workers = new[]
{
    enterprise.Manager,
    new Worker{ Name = "Worker1", },
    new Worker{ Name = "Worker2", },
    new Worker{ Name = "Worker3", },
    new Worker{ Name = "Worker4", },
    new Worker{ Name = "Worker5", },
};
db.Enterprises.Add(enterprise);
db.SaveChanges();
var enterprises = db.Enterprises.ToList(); 
```

**这正是你想要的**......

```
modelBuilder.Entity<Worker>()
    .HasRequired(x => x.Enterprise)
    .WithMany(x => x.Workers)
    .HasForeignKey(x => x.EnterpriseId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Enterprise>()
    .HasKey(x => x.EnterpriseId);

modelBuilder.Entity<Enterprise>()
    .HasOptional(x => x.Manager)
    .WithOptionalDependent() // x => x.DefaultForEntity)
    .WillCascadeOnDelete(false); 
```

...**但将不起作用**- 由于周期性引用（EF 错误）。

这是一个类似/相同解决方案的非常详细的示例...

[实体框架一对多与默认](https://stackoverflow.com/questions/15751798/entity-framework-one-to-many-with-default/15754234#15754234)

# scala - 某些使用 Dynamic 的代码无法在块内工作

> ID：15912389
> 
> 赞同：3
> 
> 时间：2013-04-09T20:57:58.040
> 
> 标签：scala, dynamic

这是一些使用`Dynamic`. 如您所见，下面的部分按预期工作。

```
scala> import language.dynamics
import language.dynamics                                                     

scala> class ExpandoObject extends Dynamic {
     |   private val dict = collection.mutable.Map.empty[String, Any]
     |   def selectDynamic(name: String): Any = dict(name)
     |   def updateDynamic(name: String)(arg: Any) = dict(name) = arg
     | }
defined class ExpandoObject

scala> val e = new ExpandoObject
e: ExpandoObject = ExpandoObject@14e03fec

scala> e.name = "rahul"
e.name: Any = rahul

scala> e.name
res62: Any = rahul 
```

但是，当您在某个块中使用它时，它无法工作。

```
scala> {
     |   val e = new ExpandoObject
     |   e.name = "rahul"
     | }
<console>:20: error: reassignment to val
                e.name = "rahul"
                       ^

scala> 
```

同样，如果您`updateDynamic`明确调用，它会起作用。

```
scala> {
     |   val e = new ExpandoObject
     |   e.updateDynamic("name")("rahul")
     |   e
     | }
res66: ExpandoObject = ExpandoObject@3f755bd2

scala> res66.name
res67: Any = rahul 
```

这是一个错误吗？或者我只是想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:24:29.390

这是之前版本的[回归](https://issues.scala-lang.org/browse/SI-5733)。我能够在 中重现该问题，然后使用 运行相同的代码，并且它可以正常工作。`2.10`[`2.10.1-RC1`](https://github.com/scala/scala/pull/1681)`2.10.0``2.10.1`

# java - Android上的OpenCV转换为灰度不起作用

> ID：15912392
> 
> 赞同：5
> 
> 时间：2013-04-09T20:58:14.660
> 
> 标签：java, android, opencv

我正在尝试将一些 OpenCV Mat 转换为灰度用于轮廓检测算法。由于某种原因，转换后的图像全黑。我的代码（b是Android位图）：

```
Mat tmp = new Mat (b.getWidth(), b.getHeight(), CvType.CV_8UC1);
Utils.bitmapToMat(b, tmp);
Imgproc.cvtColor(tmp, tmp, Imgproc.COLOR_BGR2GRAY);
//there could be some processing
Imgproc.cvtColor(tmp, tmp, Imgproc.COLOR_GRAY2BGRA, 4);
Utils.matToBitmap(tmp, b); 
```

现在我正在绘制这个位图，它全是黑色的。当我对这个位图应用轮廓检测​​（代替注释）时，没有匹配，所以我认为问题出在转换上。删除转换后（只需调用 bitmapToMat 和 matToBitmap），位图并非全黑，因此转换为 Mat 也可以。位图在 ARGB_8888 中并且没有错误，只是输出位图全黑。

编辑：只是为了确保我尝试使用 ocv imwrite 保存位图 - 它仍然是全黑的，所以问题是 100% 在 cvtColor ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T02:16:52.600

如果位图 b 来自 android 设备，请尝试使用`COLOR_RGB2GRAY`而不是`COLOR_BGR2GRAY`因为`BGR`是 OpenCV 图像的默认像素格式，而不是所有图像。

试试这个代码：

```
Mat tmp = new Mat (b.getWidth(), b.getHeight(), CvType.CV_8UC1);
Utils.bitmapToMat(b, tmp);
Imgproc.cvtColor(tmp, tmp, Imgproc.COLOR_RGB2GRAY);
//there could be some processing
Imgproc.cvtColor(tmp, tmp, Imgproc.COLOR_GRAY2RGB, 4);
Utils.matToBitmap(tmp, b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T23:51:56.363

这个方法我试过了，效果很好，先转成灰度，再转Canny，最后转Bitmap。

这个函数返回一个黑白图像。

```
public static Bitmap edgesim(Mat img1) {

Bitmap image1;

//mat gray img1 holder
Mat imageGray1 = new Mat();

//mat canny image
Mat imageCny1 = new Mat();

//mat canny image
Mat imageCny2 = new Mat();

/////////////////////////////////////////////////////////////////

//Convert img1 into gray image
Imgproc.cvtColor(img1, imageGray1, Imgproc.COLOR_BGR2GRAY);

//Canny Edge Detection
Imgproc.Canny(imageGray1, imageCny1, 10, 100, 3, true);

///////////////////////////////////////////////////////////////////

//////////////////Transform Canny to Bitmap/////////////////////////////////////////
image1= Bitmap.createBitmap(imageCny1.cols(), imageCny1.rows(), Bitmap.Config.ARGB_8888);
Utils.matToBitmap(imageCny1, image1);

return image1; 
```

}

# php - 无法从表单获取数据到电子邮件

> ID：15912397
> 
> 赞同：0
> 
> 时间：2013-04-09T20:58:24.983
> 
> 标签：php, forms, email

我有一个简单的表格，我已经尝试了一切，从更改 POST 到 GET 到 REQUEST。单引号，双引号。EOD...没有任何效果。我收到确认页面，我在电子邮件中收到主题和文本，但没有数据。请帮忙！！

**注册.html**

```
<form action="/signupprocess.php" method="post" enctype="text/plain" name="signup"
 target="_blank" id="signup">
<input name="email" type="text" id="email" size="35" maxlength="90">
<input name="name" type="text" id="name" size="35" maxlength="80">
<input name="address" type="text" id="address" size="35" maxlength="90"> 
```

**注册过程.php**

```
$email = $_POST['email'];
$name = $_POST['name'];
$address = $_POST['address'];
$phone = $_POST['phone'];
$account = $_POST['account'];
$authorize = $_POST['authorize'];

$body = <<<EOD
Name: $name <br>
Address: $address <br>
Phone Number: $phone <br>
Account: $account <br>
Authorize: $authorize <br>
EOD;

$headers = "From: $to\r\n";
$headers .= "Content-type: text/html\r\n";

mail($to, $subject, $body, $headers);
echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$url.'">'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:04:38.367

去掉里面的`enctype`属性`<form>`

# php - 用静态页面替换 clistview 中的第一个结果页面

> ID：15912402
> 
> 赞同：2
> 
> 时间：2013-04-09T20:58:29.647
> 
> 标签：php, sql, yii

我的应用程序数据库刚刚超过 100 Gbs，很快就会崩溃。

如果我可以用静态页面替换 CListView 的第一个结果页面，我可以保存它。

服务器更容易打印静态页面。而且我可以根据需要每天轻松地重新生成静态页面。

没有代码，因为如果可能的话，我不知道如何修改 ClistView 以达到我的目标；

使用内存分配时找到答案；

对于那些知道如何使用内存的人来说，有术语 SENTINEL

将新数据添加到队列时，您已找到数据的正确位置，然后将其插入

通过使用哨兵，您将始终在队列中至少有 2 个元素

这就是我需要实现的

我需要在 clistview 的第一个元素之前放置一个哨兵

我需要操作 clistview；我只想用我的静态页面设置 clistview 的第一页

也许分页将设置为 40 个元素，而我的静态页面每页将有 1000 个

但是当用户点击页面 2 或 3 或 4 ... clistview 应该列出下一个 40

实际上，对于第 2 页，clistview 将列出第一个实际结果；一切都被推到右边

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:05:52.723

您可以使用因页面索引而异的[页面缓存。](http://www.yiiframework.com/doc/guide/1.1/en/caching.page)`CListView`当然，这不如返回静态页面快，但可以显着提高性能。

**更新**

为了替换第一页的链接，`CListView`您可以覆盖[CLinkPager的](http://www.yiiframework.com/doc/api/1.1/CBasePager#createPageUrl-detail)[createPageUrl](http://www.yiiframework.com/doc/api/1.1/CBasePager#createPageUrl-detail)方法：

```
<?php
class StaticLinkPager extends CLinkPager
{
    public $firstPageUrl;

    protected function createPageUrl($page)
    {
        if ($page == 1)
            return $this->firstPageUrl;
        return parent::createPageUrl($page);
    }
} 
```

并将其与`CListView`pager[属性](http://www.yiiframework.com/doc/api/1.1/CBaseListView#pager-detail)一起使用：

```
array(
    'class' => 'StaticLinkPager',
    'firstPageUrl' => '/list-view-first-static-page.html'
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T08:47:52.220

从你的评论我猜你可能想要这样的东西：

```
<?php if($dataProvider->pagination->currentPage==0): ?>
    <?php /* 
       Render your static content + a custom CLinkPager here.
       Feed $dataProvider->pagination as 'pages' into the link pager.
     */ ?>
<?php else: ?>
     <?php /* Render your listview here */ ?>
<?php endif; ?> 
```

正如我在上面的评论中所说，您仍然会看到 1 个查询来获取项目计数。只要您也为“静态”内容呈现分页，就无法避免这种情况。

# ruby - Sinatra 应用程序不会重定向到 haml 文件

> ID：15912403
> 
> 赞同：0
> 
> 时间：2013-04-09T20:58:30.533
> 
> 标签：ruby, twitter, sinatra

这是我编写的 Sinatra 代码。所有 gem 都存在，ruby 文件可以完美编译，但是当我转到 localhost:4567/ 时，sinatra 应用程序没有运行。它把我带到“Sinatra 不知道这个小曲子”页面。我在这里犯了什么错误？是语法问题吗？我已经在这里发布了主要的 ruby​​ 文件的代码，其他的只是 haml 文件，仅此而已。

```
require 'bundler'
Bundler.setup(:default)

require 'sinatra'
require 'haml'
require 'twitter'
require 'oauth'

class MyTweetWeek < Sinatra::Base
  set :haml, :format => :html5, :attr_wrapper => '"'
 enable :sessions, :static, :raise_errors
 set :public_dir, File.join(File.dirname(__FILE__), 'public')

 get '/' do
   haml :index
 end

 get '/login' do
request_token = consumer.get_request_token(:oauth_callback => ENV['OAUTH_CALLBACK'])

session[:request_token] = request_token.token
session[:request_token_secret] = request_token.secret

redirect request_token.authorize_url
 end

  get '/oauth_callback' do
request_token = OAuth::RequestToken.new(
  consumer,
  session[:request_token],
  session[:request_token_secret]
)

session[:request_token] = session[:request_token_secret] = nil

access_token = request_token.get_access_token(:oauth_verifier => params[:oauth_verifier])

session[:access_token] = access_token.token
session[:access_secret] = access_token.secret

redirect '/resume'
 end

  get '/resume' do
redirect '/'  unless authenticated?
today = Date.today #get today's date
monday = today - today.cwday + 1 #calculate Monday
search = Twitter::Search.new

@screen_name = client.verify_credentials.screen_name
@number_of_tweets = 0
@number_of_mentions = 0

results = search.from(@screen_name)
                .since_date(monday)
                .no_retweets
                .per_page(100)
                .fetch

@number_of_tweets += results.size

while search.next_page?
  results = search.fetch_next_page
  @number_of_tweets += results.size
end

search.clear

results = search.q("@#{@screen_name.gsub('@', '')}")
                .since_date(monday)
                .no_retweets
                .per_page(100)
                .fetch

@number_of_mentions += results.size

while search.next_page?
  results = search.fetch_next_page
  @number_of_mentions += results.size
end

haml :resume
 end

 error Twitter::Error::Unauthorized do
    redirect '/'
    end

 not_found do
  haml :not_found
  end

 private

 def consumer
   @consumer ||= OAuth::Consumer.new(
    ENV['CONSUMER_KEY'],
    ENV['CONSUMER_SECRET'],
    :site => "https://api.twitter.com"
    )
 end

  def client
   Twitter.configure do |config|
    config.consumer_key = ENV['CONSUMER_KEY']
    config.consumer_secret = ENV['CONSUMER_SECRET']
    config.oauth_token =  session[:access_token]
    config.oauth_token_secret = session[:access_secret]
    end

@client ||= Twitter::Client.new
end

 def authenticated?
  !session[:access_token].nil? && !session[:access_secret].nil?
    end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:57:24.740

由于您有一个模块化应用程序，您是否需要“sinatra/base”而不是“sinatra”？看[这里](http://www.sinatrarb.com/intro.html#Sinatra%3a%3aBase%20-%20Middleware,%20Libraries,%20and%20Modular%20Apps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:10:44.400

请参阅[Serving a Modular App](http://www.sinatrarb.com/intro.html#Serving%20a%20Modular%20Application)`run! if app_file == $0`并在课程末尾添加该行。另请参阅 DavB 的答案。

# c# - 为什么 ItemsControl 容器上的 Visual Tree 是空的？

> ID：15912404
> 
> 赞同：0
> 
> 时间：2013-04-09T20:58:31.100
> 
> 标签：c#, wpf, itemscontrol, visualtreehelper

我有一个要求可以访问任何给定视图中的特定视觉元素。这对于 xaml 中静态声明的项目很容易，因为它们随时可用。但是，数据模板化的 ItemsControls 在运行时生成它们的可视化树。例如，`TabControl`绑定到子 ViewModel 的 Collection。

一旦视图由`ItemContainerGenerator`. 我尝试连接到 上的`StatusChanged`事件`ItemContainerGenerator`并且它成功触发，并且我可以成功获取（在 a 的情况下`TabControl`）`TabItem`容器。但是，当我使用它`VisualTreeHelper`来获取它的孩子时，它是空的。

有什么原因导致的视觉树`TabItem`是空的？是否有另一个事件我应该挂钩来实现这一目标？

# android - 谷歌云消息沙盒

> ID：15912405
> 
> 赞同：3
> 
> 时间：2013-04-09T20:58:31.550
> 
> 标签：android, push-notification, google-cloud-messaging

我按照[教程](http://developer.android.com/google/gcm/gs.html)在我的 Android 应用程序（谷歌云消息）上实现推送通知。我设法成功地实现了这些消息，但现在我担心开发/生产环境。只有一个 API 密钥（与拥有沙盒密钥和生产密钥的 Apple 相反）。你们是怎么处理的？我不希望我的 gcm 测试向用户发送真实消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:19:55.200

您可以使用该`dry_run`字段：

> 干运行
> 
> 如果包含，则允许开发人员在不实际发送消息的情况下测试他们的请求。选修的。默认值为 false，并且必须是 JSON 布尔值。

如果它不起作用，您可以尝试`restricted_package_name`使用无效包名称的字段。我还没有尝试过，但它可能会按照你想要的方式运行。

> 受限包裹名称
> 
> 包含应用程序包名称的字符串。设置后，消息将仅发送到与包名称匹配的注册 ID。选修的。

引用来自[GCM 架构概述](http://developer.android.com/google/gcm/gcm.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T01:20:43.660

您可以通过创建一个新的 API 项目来做到这一点。

*   从 Google Developer Console 创建一个新的沙盒 API 项目
*   为服务器应用程序创建新的公共 API 访问密钥
*   服务器沙盒环境使用来自沙盒 API 项目的服务器应用程序的公共 API 访问密钥推送
*   Android 调试版本使用沙盒 API 项目中的项目 ID

# javascript - 列表中的 javascript 字符串返回 false

> ID：15912407
> 
> 赞同：3
> 
> 时间：2013-04-09T20:58:37.880
> 
> 标签：javascript

我的网站刚刚开始为以下 javascript 检查返回 false。我试图理解为什么。

```
_test = ["0e52a313167fecc07c9507fcf7257f79"]
"0e52a313167fecc07c9507fcf7257f79" in _test
>>> false
_test[0] === "0e52a313167fecc07c9507fcf7257f79"
>>> true 
```

有人可以帮我理解为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:01:12.383

运算符`in`测试属性是否在对象中。例如

```
var test = {
    a: 1,
    b: 2 
};

"a" in test == true;
"c" in test == false; 
```

您想测试数组是否包含特定对象。您应该使用 Array#indexOf 方法。

```
test.indexOf("0e52...") != -1 // -1 means "not found", anything else simply indicates the index of the object in the array. 
```

MDN 上的 Array#indexOf：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:00:20.797

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)：

> 如果指定的属性在指定的对象中，则 in 运算符返回 true。

它检查键，而不是值。

在那里，属性键将是`0`，而不是`"0e52a313167fecc07c9507fcf7257f79"`。

你可以测试一下`0 in _test`。`true`

如果要检查值是否在数组中，请使用[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
_test.indexOf("0e52a313167fecc07c9507fcf7257f79")!==-1 
```

（IE8 需要 MDN 提供的 shim）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:03:09.380

“in”运算符在对象键中搜索，而不是值。您将不得不使用 indexOf 并注意它在以前的 IE 版本中的非实现。因此，您可能会在第一个 google 结果中找到 Array.prototype.indexOf 方法的跨浏览器实现。

# mysql - 无法创建 SQL 表 - 定义了错误 1005

> ID：15912408
> 
> 赞同：0
> 
> 时间：2013-04-09T20:58:38.880
> 
> 标签：mysql, sql

我不允许创建下表。是因为复合主键吗？我还添加了用户和标题表的信息，以防那里的代码出现问题。

```
CREATE TABLE store
(
    short_name  VARCHAR(5)                      NOT NULL,
    name        VARCHAR(30)                     NOT NULL,
    address1    VARCHAR(50)                     NOT NULL,
    address2    VARCHAR(20),
    city        VARCHAR(30)                     NOT NULL,
    state       VARCHAR(30)                     NOT NULL,
    zip         VARCHAR(10)                     NOT NULL,
    phone       VARCHAR(15)                     NOT NULL,
    CONSTRAINT store_pk PRIMARY KEY (short_name)
);

CREATE TABLE publishers
(
    name        VARCHAR(50)                         NOT NULL,
    status      TINYINT         DEFAULT 1           NOT NULL,
    CONSTRAINT publishers_pk PRIMARY KEY (name)
);
CREATE TABLE users
(
    id          INT                     NOT NULL    AUTO_INCREMENT,
    name        VARCHAR(70)                     NOT NULL,
    password    VARCHAR(60),        
    address1    VARCHAR(50)                     NOT NULL,
    address2    VARCHAR(20),
    city        VARCHAR(30)                     NOT NULL,
    state       VARCHAR(30)                     NOT NULL,
    zip         VARCHAR(10)                     NOT NULL,
    phone       VARCHAR(15),
    email       VARCHAR(90),
    store       VARCHAR(5),
    admin       TINYINT             DEFAULT 0   NOT NULL,
    mail_list   TINYINT             DEFAULT 0   NOT NULL,
    active      TINYINT             DEFAULT 0   NOT NULL,
    CONSTRAINT users_pk PRIMARY KEY (id),
    CONSTRAINT users_fk FOREIGN KEY (store)
        REFERENCES store (short_name)
        ON DELETE   SET NULL
        ON UPDATE   CASCADE
);

CREATE TABLE titles
(
    id          INT                 NOT NULL    AUTO_INCREMENT,
    publisher   VARCHAR(50),
    title       VARCHAR(50)         NOT NULL,
    status      ENUM('active', 'announced', 'inactive'),
    discount    TINYINT             NOT NULL,
    CONSTRAINT title_pk PRIMARY KEY (id),
    CONSTRAINT title_fk FOREIGN KEY (publisher)
        REFERENCES publishers (name)
        ON DELETE   SET NULL
        ON UPDATE   CASCADE
);

CREATE TABLE subscriptions
(
    user        INT,
    title       INT,
    quantity    TINYINT             DEFAULT 1           NOT NULL,
    CONSTRAINT subscription_pk PRIMARY KEY (user, title),
    CONSTRAINT subscription_user_fk FOREIGN KEY (user)
        REFERENCES users (id)
        ON DELETE   SET NULL
        ON UPDATE   CASCADE,
    CONSTRAINT subscription_title_fk FOREIGN KEY (title)
        REFERENCES titles (id)
        ON DELETE   SET NULL
        ON UPDATE   CASCADE
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:22:00.740

使用表定义，只有`subscriptions`表出现问题，这是因为该`ON DELETE SET NULL`子句。`user`表中的和`title`列都`subscriptions`定义为`NOT NULL`!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:02:34.380

主键定义错误。`constraint title_pk primary key (id)`而那些类似的都是错误的。他们应该像`primary key(id)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:03:58.997

它可能在外键约束上失败了。

运行这个：

```
SHOW ENGINE INNODB STATUS\G 
```

并查看“最新外键错误”部分。那应该告诉你问题所在。

如果用户和/或标题表还不存在，您应该在创建表之前运行它：

```
set foreign_key_checks = 0; 
```

如果这些表确实存在，则父列（即 user.id）和子列（即 user）之间的数据类型可能不匹配。

# c# - 这是访问枚举的安全方法吗？

> ID：15912410
> 
> 赞同：2
> 
> 时间：2013-04-09T20:58:42.137
> 
> 标签：c#, class, static, enums, instantiation

我的遗留代码有这个：

```
if (chgList != ABCHeader.ChangeListTypes.Always) 
```

这是 ABCHeader - 它是一个类（不是变量），并且是一个非静态类：

```
public class ABCHeader
{
    . . .

     public enum ChangeListTypes
     {
    ...
     } 
```

chgList 是这样定义的：

```
private ABCHeader.ChangeListTypes chgList = ABCHeader.ChangeListTypes.Always; 
```

这显然可以编译，但对我来说，以这种方式引用这个非静态类（ABCHeader）似乎不正确。因为我在这段代码的某处有一个奇怪的空引用异常，所以我翻阅了我偶然发现的代码。这是一个潜在的问题，还是我肯定找错了树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:00:35.047

这并没有错。您可以通过类名访问类内部的嵌套枚举。

现在，也就是说，我更喜欢将我的枚举放在顶层，而不是嵌套在类中，但如果你想这样做，那是它的适当语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:00:44.617

以这种方式引用枚举是非常好的——你不能从中获得空引用异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T21:10:43.660

这只是*嵌套类型*。A `class`（静态和非静态）或`struct`, 可以在其中包含另一种类型。期间`.`是“静态成员”访问。这很像您调用静态方法的时期，例如`ABCHeader.SomeMethod();`.

这种周期永远不会导致`NullReferenceException`实例成员访问周期的方式。

请注意，.NET Framework 使用加号`+`而不是句点`.`来表示嵌套类型。例如：

```
string typeString = typeof(ABCHeader.ChangeListTypes).ToString();
    // will contain a name including "ABCHeader+ChangeListTypes" 
```

# ruby-on-rails - 在单表继承机制中使用动态创建的类

> ID：15912418
> 
> 赞同：1
> 
> 时间：2013-04-09T20:59:33.433
> 
> 标签：ruby-on-rails, ruby, class, dynamic, single-table-inheritance

我有一个名为“DynObject”的 ActiveRecord 类，可用于继承..

在初始化时，我动态创建了一些继承自它的类：

```
classes_config = { foo: 'foo', bar: 'bar' }

classes_config.each do |name,options|

  klass = Class.new( DynObject ) do

  end

  self.klasses[name] = const_set( "#{name.camelize}DynObject", klass )

end 
```

这一切都很好，这些类创建得很好。但是当 ActiveRecord 尝试加载创建的记录时，STI 机制失败了。`(ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'FooObject'....))`

我认为这很奇怪，因为当我检查类作为它们在`type`列中的命名方式时，它们存在..

当我检查`ancestors`这些类时，它们也继承得很好..

我想要完成的事情有可能吗？

还有什么需要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T10:51:23.583

您的错误消息表明无法找到“FooObject”类。

在您的代码中，动态生成的类名应该是“FooDynObject”。

只需在加载 DynObject 之前检查您的数据库中没有旧的测试记录。

@edit：另一件事是还要知道您在哪个类上影响动态类名。

```
class DynObject < ActiveRecord::Base
  const_set 'FooDynObject', Class.new(DynObject)
end 
```

将导致 DynObject::FooDynObject，当 ActiveRecord 看到 'FooDynObject' 类型时将无法加载它。

就个人而言，我会做类似的事情

```
class DynObject < ActiveRecord::Base
  Object.const_set 'FooDynObject', Class.new(DynObject)
end 
```

# cryptography - ECKS-PS算法：在加密数据中搜索；双线性映射

> ID：15912419
> 
> 赞同：0
> 
> 时间：2013-04-09T20:59:37.923
> 
> 标签：cryptography

我发现了一种名为 ECKS-PS 的加密算法（发表在一篇名为“加密数据存储系统上的高效连接关键字搜索”的论文中，由 Jin Wook Byun、Dong Hoon Lee 和 Jong In Lim 撰写）允许用户搜索加密数据。该算法在此处进行了描述：img210.imageshack.us/img210/4644/eckps.png（我在此处将步骤写得更清楚一点：img801.imageshack.us/img801/3373/stepsecksps.jpg）

我曾多次尝试使用该算法来搜索加密的单词，但我从未在等式的左侧部分和等式的右侧部分之间得到匹配。（见计算： http: [//img4.imageshack.us/img4/474/firstpagecalculations.jpg](http://img4.imageshack.us/img4/474/firstpagecalculations.jpg)和[http://img805.imageshack.us/img805/8712/secondpagecalculations.jpg](http://img805.imageshack.us/img805/8712/secondpagecalculations.jpg)）

谁能告诉我我做错了什么和/或为我提供一个匹配的示例（基于 ECKS-PS 算法）。我知道可能有其他算法可以搜索加密数据，但我想知道如何使用该算法进行搜索。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:56:54.913

你可能会误解配对的计算。假设 e(g, g)= 53，并且 H(w) 是 g^2 或 g^3，那么您可以将双线性应用于这些公式。

有关详细信息，请参阅[米勒算法](http://crypto.stanford.edu/miller/)。虽然有点困难。

或者你可以试试[PBC Libaray](http://crypto.stanford.edu/pbc/)，它很好地包装了配对计算。您可以使用它来验证算法。

# javascript - Highstocks：强制平移以捕捉价值

> ID：15912420
> 
> 赞同：0
> 
> 时间：2013-04-09T20:59:47.003
> 
> 标签：javascript, html, highcharts

我正在使用 Highcharts.com 的 Highstocks 库来创建十年来多个产品价值的样条图。值仅在当月的第一天（数据发布时）绘制。使用比较技术，我可以在 xAxis 上滑动图表，并根据最小 xAxis 数据值（即与 2011 年 7 月 1 日相比的价格）绘制线条作为百分比比较。问题是 xAxis 的最小值可能是 6 月 12 日。因此，即使生成的图表与 7 月 1 日的数据值（显示的最小 xAxis 数据值）进行比较，xAxis 的最小值也是 6 月 12 日。见图片：

![图形](https://i.imgur.com/uq8l5JH.png)

平移时有什么方法可以强制图表捕捉到本月的 1 日？

非常感谢！！-标记

# ruby-on-rails - 如何使我的 TemplateHandler 中的 ActionView::Template 的缓存过期？

> ID：15912422
> 
> 赞同：0
> 
> 时间：2013-04-09T20:59:50.670
> 
> 标签：ruby-on-rails, templates, caching

我有一个自定义模板处理程序，它的渲染方法没有被我的模板可预测地调用。Rails 将编译后的模板缓存到一个方法中，并且仅在底层文件更改时才重新渲染模板。

我想让它更复杂，并添加我自己的检测陈旧模板的方法。

问题是，如何从我的处理程序手动过期模板的缓存呢？

**编辑：**

看来[这就是魔法所在](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/template.rb#L142)。当我的模板第一次被渲染时`@compiled`设置为 true。在某些情况下，我需要将其更改为 false 以便重新编译我的模板。我怎样才能从模板处理程序中做到这一点？

# ios - UITextField nextResponder 只工作一次

> ID：15912425
> 
> 赞同：0
> 
> 时间：2013-04-09T21:00:01.017
> 
> 标签：ios, uitextfield, next, first-responder, uiresponder

我有多个 UITextField 并试图单击下一步以在它们之间切换。我已经为每个标签设置了 1-4。当我运行我的代码时，它会移动到第二个，但不会移动到第三个。如果我跳 textField.tag + 2; 它会跳到第三个字段，但不会从那里继续前进。这是我的代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
theScrollView.frame = CGRectMake(theScrollView.frame.origin.x, theScrollView.frame.origin.y,
                                 theScrollView.frame.size.width, theScrollView.frame.size.height + 265 - 50); //resize

NSInteger nextTag = textField.tag + 1;
// Try to find next responder
UIResponder* nextResponder = [textField.superview viewWithTag:nextTag];
if (nextResponder) {
    // Found next responder, so set it.
    [nextResponder becomeFirstResponder];
} else {
    // Not found, so remove keyboard.
    [textField resignFirstResponder];
}
return NO; // We do not want UITextField to insert line-breaks.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:21:50.187

我将审查以下项目：

1.  检查所有`UITextField`对象是否都有其委托集
2.  启动调试器并检查每个`textfield`标签的值
3.  确保视图层次结构中没有重复的标签
4.  测试`UIView`返回的对象`viewWithTag:`实际上是一个`UITextField`对象。

# objective-c - 我需要澄清这些术语异常和指令@Try、@finally、@throw

> ID：15912426
> 
> 赞同：0
> 
> 时间：2013-04-09T21:00:03.557
> 
> 标签：objective-c

1.  发生异常的一般原因是什么？当出现异常时，程序是立即终止还是继续运行？

2.  我猜@try 是我正在测试的程序消息。是对的吗？

3.  在@catch 记录错误消息、清理等之后，@finally 块做什么？我正在阅读的书说@finally 确定@try 中的语句是否引发异常。但这不是一个不必要的步骤，因为无论有没有它，我们都可以根据程序突然终止来判断是否存在异常？

4.  什么是 throw 指令？书籍说它使您能够抛出自己的异常。但我觉得这真的很混乱。这是否意味着我可以以某种方式创建一个异常并对其进行测试？

如果您能为我回答至少一个问题，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:23:55.150

异常提供了一种机制来处理正常执行流程之外的错误和其他异常事件。它们允许程序员通过消除不断检查和处理错误的需要来编写更清晰的代码。相反，当错误发生时，代码可以“抛出”一个异常对象，并且执行将在该点停止并在第一个可以处理异常的“catch”块处恢复。我可以进一步解释，但我相信您会通过阅读相关的 Wikipedia 页面获得对一般例外情况的更好解释。

因此，考虑到这一点，您提到的指令允许 Objective-C 中的异常：

*   **@try：** try 块中的代码可能会引发异常。Try 块之后通常是 catch 块，它可以捕获 try 块中的代码可能引发的任何异常，但也可能需要在更高级别处理给定的异常。在这种情况下，相关的 catch 块可能位于更高的位置，例如在使用 try 块调用方法的方法中，或者在上面的那个。（这些方法也会有调用当前方法的 try 块。）

*   **@catch：** Catch 块包含用于处理给定异常并希望从异常情况中恢复的代码。

*   **@finally：** finally 块包含对 try 块执行任何所需清理的代码。例如，如果 try 块分配了一些资源，finally 块可以在允许异常向上移动到下一个 catch 处理程序之前释放这些资源。

*   **@throw：**这是一个用于“抛出”异常的指令。try 块的执行在抛出异常的地方停止，异常将由 catch 块处理（或不处理）。（未处理的异常通常会导致程序终止。）

现在，尽管如此，您通常应该**避免在 Objective-C 中出现异常**。我知道将这个强大的功能内置到语言中然后无法使用它似乎很奇怪，但是 Objective-C 程序几乎总是使用 Cocoa 或 Cocoa Touch 框架编写的，并且这些框架不希望有例外跨框架调用抛出。

> 发生异常的一般原因是什么？当出现异常时，程序是立即终止还是继续运行？

当发生阻止您的代码继续运行的意外情况时，您会抛出异常。例如，尝试访问只有 n 项的数组中的第 n+1 个元素会引发异常。在 Cocoa 或 Cocoa Touch 程序中，异常是终端的。但是，在其他语言和框架中，可以处理异常以允许程序继续运行。

> 在@catch 记录错误消息、清理等之后，@finally 块做什么？

无论是否抛出异常，finally 块都会运行，因此您不需要在 try 块和 catch 块中都有清理代码。此外，catch 块通常会捕获在较低级别引发的异常，因此它们可能无法清理。

> 什么是 throw 指令？书籍说它使您能够抛出自己的异常。

`@throw;`（不带参数）在 catch 块中重新抛出与 catch 块正在处理的相同的异常，以便可以在更高级别处理它。

听起来您可能正在阅读Steven Kochan*的 Objective-C 编程。*如果我没记错的话，Kochan 试图教你脱离 Cocoa 和 Cocoa Touch 的 Objective-C。这在某种程度上可能是有道理的，但在这种情况下，它可能会使您感到困惑，尤其是当您尝试学习该语言以便可以使用其中一个或两个框架时。鉴于[Apple 反对在代码中使用异常的建议](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Exceptions/Exceptions.html)，停止阅读并继续下一章可能是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:20:11.090

了解您有一段代码——在`{}`字符之间——可能会产生运行时错误消息。在许多系统中，运行时错误消息要么被发送到某个日志并被忽略，要么导致应用程序突然终止。

对于异常，检测错误的代码会创建一个异常对象并用`throw`语句或方法“抛出”它。

如果未处理异常，它将“冒泡”到该`main`级别并导致应用程序终止（通常在默认处理程序打印消息等之后）。

但是，您可以使您的代码块成为一个`try`子句（通过在 之前放置`try`or`@try`或其他任何方式`{`），在该子句之后加上一个`catch`子句，然后，当发生异常时，控制将转移到`catch`子句的开头。

该`catch`子句可以查看异常对象并决定如何处理它。实现方式略有不同，但通常如果`catch`子句不执行任何操作，异常将被忽略，并在`try/catch`子句之后继续执行。另一方面，如果`catch`子句*不能*以某种方式“处理”异常（因此不应*忽略*异常），则`catch`子句将执行 a`throw`以重新抛出原始异常或新创建的异常。

当给定范围未处理异常时`try/catch`，它会“冒泡”到该`try/catch`方法或其调用者中的下一个外部。最终到达一个未处理的异常`main`并且默认处理程序获得控制。

`finally`是大多数异常处理模型的特性，不是关键功能，但非常方便。如果`try/catch`执行范围时未产生异常，`finally`则执行该子句，然后在该`finally`子句之后继续执行。另一方面，如果在`try/catch`范围内引发异常并且未处理，`finally`则执行该子句，然后将异常“冒泡”，而不执行以下代码。

`finally`例如，可以使用它来关闭打开的文件或释放一些分配的临时资源。

# php - 带有特殊字符的 Javascript var 和 AJAX 到 php 中的 $_GET

> ID：15912427
> 
> 赞同：0
> 
> 时间：2013-04-09T21:00:05.657
> 
> 标签：php, javascript, ajax, get, special-characters

我有一个带有 CKEditor 的文本表单：

```
<textarea id="descrizione_it"></textarea>
<textarea id="descrizione_fr"></textarea>
... many others inputs ...    
<button onclick="addDataProd()"> 
```

JS函数：

```
function addDataProd(){
    var descrizione_it = CKEDITOR.instances.descrizione_it.getData()
    var descrizione_fr = CKEDITOR.instances.descrizione_fr.getData()

    if (window.XMLHttpRequest) {
      xmlhttp=new XMLHttpRequest();     
    } else {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        alert(xmlhttp.responseText);
      }
    }

xmlhttp.open("GET","prodotti_ajax.php?descrizione_it_new="+descrizione_it + "&descrizione_fr_new="+descrizione_fr,true);
xmlhttp.send();
} 
```

PHP 获取数据并更新数据库。

现在，如果我在 CKEditor textarea 上写了一些特殊的字符，这些字符总是立即转换为 tu htmlentities (è)。

如果我写在 JS

```
alert(descrizione_fr) 
```

我得到了用 CKEditor 编写的字符串，例如

èèèà

但是当我在 php 中回显字符串时，字符串在特殊字符之前停止。

例如 JS：

```
alert(descrizione_fr) 
```

结果是：

```
test_test_&egrave;test 
```

PHP：

```
echo $_GET['descrizione_fr_new']; 
```

结果是：

```
test_test_ 
```

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:13:53.270

您可以尝试使用浏览器解析器执行此功能。 [**演示**](http://jsfiddle.net/fernandosavio/wfuTy/1/)

```
function html_decode(text){
    var div = document.createElement("div");
    div.innerHTML = text;
    return ("textContent" in div) ? div.textContent : div.innerText ;
} 
```

我不知道这是否是最好的方法。但我[在 jQuery 中找到了这个解决方案，](https://stackoverflow.com/questions/10715801/javascript-decoding-html-entities)并把它变成了纯 JavaScript。希望有帮助

**编辑**：使用 textContent(IE9+) 作为默认值和 innerText 作为后备兼容性

# sharing - “www.omgwtflol.us”怎么能以我的名义发帖？！

> ID：15912428
> 
> 赞同：-6
> 
> 时间：2013-04-09T21:00:06.040
> 
> 标签：sharing, facebook-sharer

在关注（仅一次且仅单击一次）从朋友发布的链接后，来自 www.omgwtflol.com 的帖子，如“Ionut Bigu 通过 Pranker 或 Mega LOL 分享了链接”或“Ionut Bigu 投票支持”出现在我的时间轴上并我所有的朋友。他们能以我的名义这样做吗？特别是在将它们报告为垃圾邮件之后？！如何从我的 Facebook 页面永久删除这个 As h...s？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:01:57.747

首先，您需要从[http://www.facebook.com/settings?tab=applications](http://www.facebook.com/settings?tab=applications)中删除该应用，最后将其屏蔽。

# java - shiro.ini 应该放在 Web 应用程序的什么位置？

> ID：15912429
> 
> 赞同：1
> 
> 时间：2013-04-09T21:00:06.577
> 
> 标签：java, web-applications, shiro

有人知道 shiro.ini 应该放在 Java Web 应用程序中的什么位置吗？它是 WEB-INF 还是 META-INF 目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:05:31.937

从[配置文档](http://shiro.apache.org/configuration.html)

> 当分别以 file:、classpath: 或 url: 为前缀时，可以从文件系统、类路径或 URL 获取资源。

以下是如何从类路径创建 SecurityManager 的示例：

```
Factory<SecurityManager> factory = 
             new IniSecurityManagerFactory("classpath:shiro.ini");
SecurityManager securityManager = factory.getInstance(); 
```

对于典型用法`shiro.ini`，放在类路径上。在这种情况下，您可以使用`WEB-INF/classes`.

# python - 使用“<”和“>”时出现意外的语法错误

> ID：15912430
> 
> 赞同：0
> 
> 时间：2013-04-09T21:00:07.017
> 
> 标签：python

我被设置了一个简单的任务：

为一个游戏编写一个程序，其中计算机生成一个介于 20 到 30 之间的随机起始数字。玩家和计算机可以轮流从数字中删除 1,2 或 3。像这样... 起始编号：25 您要删除多少？3 22 left 计算机删除 2 20 left 必须删除最后一个值以将数字降至 0 的玩家是失败者。剩下 1 计算机删除 1 你赢了！

我正在尝试创建它，以便玩家只能输入数字 1、2 或 3 来删除。

我在 if 语句所在的位置收到无效语法的语法错误：

```
import random
import time

start=random.randint(20,30)

print('Starting number is',start)

personremove=int(input('How many do you want to remove? '))

if personremove=<3 or >1:
    print('Enter a number between 1 and 3')
    personremove=int(input('How many do you want to remove? '))

current=start-personremove

print(current,'left')

compremove=random.randint(1,3)

current=start-personremove-compremove

print('Computer removes',compremove)

print(current,'left') 
```

任何帮助将不胜感激，正如您可能知道的那样，我只是 python 的初学者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T21:01:39.917

`if personremove=<3 or >1:`应该

```
if personremove <= 3 or personremove > 1: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:01:41.677

您需要重新排序这些语句：

```
if 1 < personremove <= 3: 
```

python 的`or`运算符需要左右两边都有一个对象或表达式。正如你所写的那样，右边有另一个*运算符，这是非法的。*另外，`=<`不是 python 运算符。它是`<=`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T21:01:41.167

`personremove=<3 or >1` 不是合法的表达方式。利用：

```
if not (1 <= personremove <= 3): 
```

这利用了[链式比较运算符](http://docs.python.org/3/reference/expressions.html#not-in)；它的含义大致相同：

```
if personremove < 1 or personremove > 3: 
```

但是`personremove`只计算一次，我们更清楚地表明该数字超出了 1 - 3 的范围。

您可能想改用`while`循环来继续要求正确的数字：

```
personremove = 0
while not (1 <= personremove <= 3):
    print('Enter a number between 1 and 3')
    try:
        personremove = int(input('How many do you want to remove? '))
    except ValueError:
        pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:02:21.900

你的`if`陈述只需要稍微调整一下。尝试：

```
if 1 <= personremove <= 3:
    ... 
```

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T21:15:34.907

有几个错误：

1.  你的指示不一致。*唯一介于*1 和 3 之间的整数是 2。但这肯定不是您的意思。您的意思是输入 1、2 或 3。
2.  您具有大于向后的语法。应该`personremove > 3`读为 personremove 大于 3。
3.  您不能只在`>1`之后添加`or`，您必须再次说明应该与什么变量相关`1`。这将起作用`personremove < 1`

    如果 personremove < 1 或 personremove > 3：

一般来说，还有更好的方法来编码。例如，将此部分放入一个循环中。

# vb.net - 使用实体框架返回包含计算值的实体列表的良好做法/模式是什么

> ID：15912431
> 
> 赞同：1
> 
> 时间：2013-04-09T21:00:08.540
> 
> 标签：vb.net, linq, entity-framework-4

我想知道实体框架返回包含计算值的实体列表的良好做法/模式是什么？

详细地说，在我的 DAL 中，我有一个返回实体列表的函数：

```
Return (From msg In context.Messages
         Where (msg.UserCreation.Equals(From, StringComparison.OrdinalIgnoreCase))).ToList() 
```

这工作正常，这会返回一个列表（消息）。Message 是一个实体，对应于 Sql Server 中的一个表。现在我必须修改这个查询，以便我可以包含每个“消息”的计数。我想知道每封邮件的收件人数量。

```
Return (From msg In context.Messages
         Let countRecipient as integer = context.MessageRecipientJeu.Count(Function(x) x.Message.UserCreation.Equals(From, StringComparison.OrdinalIgnoreCase))
         Where (msg.UserCreation.Equals(From, StringComparison.OrdinalIgnoreCase))).ToList() 
```

这返回一个匿名类型，所以我得到一个错误。

我有什么最好的解决方案？

我是否必须在我的实体模型中（在 edmx 文件中）定义用户自定义类型？我是否应该定义自己的包含计数且仅用于此功能的实体消息？还要别的吗？

希望它足够清楚。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:15:28.503

我推荐 MSDN 101 LINQ 示例页面： http: [//msdn.microsoft.com/en-us/bb688088.aspx](http://msdn.microsoft.com/en-us/bb688088.aspx) 它不是完美的结构（由操作名称构成，而不是你打算做的目的），但因为有有这么多的例子，只需点击一些应该会给你一些很好的例子。

例如，这里是**Where**的页面：http : [//msdn.microsoft.com/en-us/bb737944](http://msdn.microsoft.com/en-us/bb737944)

这里有一些**IF** ：http : [//msdn.microsoft.com/en-us/bb737907](http://msdn.microsoft.com/en-us/bb737907)

**更新**

遵循默认结构（几乎在每个示例中都使用它）：

1.  定义查询（将 LINQ 分配给该变量，不定义类型或使用**As System.Collections.IEnumerable**）
2.  使用 For-Each 循环来处理每个结果。在这里，您可以转换和填充所需的变量类型。

使用 For Each 很常见，因此我认为这是最佳实践。

我还希望找到可以自动为计数添加整数的东西（我假设在 linq 中有类似的东西）。这将是最好的解决方案，但现在无法在示例中找到它。

# php - MySQL 记录之间的平均时间

> ID：15912435
> 
> 赞同：0
> 
> 时间：2013-04-09T21:00:18.787
> 
> 标签：php, mysql, datetime

我有一个包含文章记录的表。现在我想计算来自某个来源的文章之间的平均时间，这样我就可以自动增加或减少我的爬虫间隔。如果我从两个日期之间的一个来源中选择记录，那么 MySQL 查询是否可行？

表布局：

```
id | title    | description    | create_date          | source_id  
-----------------------------------------------------------------
1  | Title 1  | A description  | 2013-04-09 21:38:00  | 5
2  | Title 2  | A description  | 2013-04-09 22:16:00  | 5
3  | Title 3  | A description  | 2013-04-09 23:54:00  | 5 
```

结果应该是：

```
diff between 1 and 3 = 136 min
-----------------------------
Average is 45,33 minutes (crawler interval: 2720 seconds) 
```

如果更好的话，我也可以在 PHP 中执行此操作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:13:20.177

是的。

```
SELECT
  UNIX_TIMESTAMP(MAX(create_time)) - UNIX_TIMESTAMP(MIN(create_time)) / COUNT(*) AS 'avg'
FROM table
WHERE source_id = 5
  AND create_time BETWEEN '2013-04-01 00:00:00' AND NOW() 
```

# php - 使用 jQuery 访问更新的 php $_SESSION 变量

> ID：15912445
> 
> 赞同：0
> 
> 时间：2013-04-09T21:00:55.613
> 
> 标签：php, jquery, session-variables

我有一个下拉菜单，它使用 onChange 事件触发 mysqli 查询。该查询使用返回的结果填充一个数组，然后将其分配给 $_SESSION 变量。

每当下拉菜单中的值发生更改时，我都会尝试使用存储在 $_SESSION 变量中的数组来填充选择框。

**这是相关的 JavaScript 代码：**

```
xmlhttp.open("POST", "getStudentList.php?q="+yearGroup, true); 
xmlhttp.send();

var newStudentList =<?php echo json_encode($_SESSION['studentList']) ?>; 

    // clear select box 
    $('#studentList').empty();          

    // populate select box with JS array items
    $.each(newStudentList, function(key, value) {   
         $('#studentList')
              .append($('<option>', { value : key })
              .text(value));
    });                     

    $('#studentList').selectmenu("refresh",true); 
```

$_SESSION['studentList'] 正在“getStudentList.php”中正确更新，但在重新加载页面之前，更新不会反映在 Javascript 中的调用中......我怎样才能使更新自动发生？

我检查了过去的帖子，但没有发现任何真正有帮助或我理解的东西！如果有任何帮助，我将不胜感激 - 我是使用 Javascript / Jquery 的完全新手，并且从这里和那里拼凑了一些 php，所以请放轻松。（是的，我正在使用 session_start()！）

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:09:32.037

你可以做这样的事情，

```
$("#studentList").on('change',function() {
    $.ajax({
        url: "getStudentList.php",
        dataType: "json",
        success: function(newStudentList) {

           // clear select box 
           $('#studentList').empty();          

           // populate select box with JS array items
           $.each(newStudentList, function(key, value) {   
               $('#studentList').append($('<option>', { value : key }).text(value));
           });

           $('#studentList').selectmenu("refresh",true);

        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:13:15.860

PHP 代码仅在生成 HTML 页面的源代码时运行。一旦浏览器运行了 JS 代码，PHP 就已经运行了，并且您`echo`已经生成了一个字符串，就像您手动键入一样。

为了运行更多 PHP 代码，您需要从服务器获取一个新文件。这是 AJAX 背后的基本概念：您编写一个 JS 函数，它向服务器请求一个新页面，通常包含 XML 或 JSON，但其他方面就像任何网页一样。但是，JS 回调函数不会显示新页面，而是读取它并执行您想要的操作。

# php - 具有唯一和最大选择的mysql select语句？

> ID：15912452
> 
> 赞同：0
> 
> 时间：2013-04-09T21:01:11.880
> 
> 标签：php, mysql

我有许多记录要插入到 MYSQL 表“table1”中。其中一些是重复的。

我有一个由“FIELD A”和“DUP_NUMBER”组成的复合唯一约束

因此一组记录的示意图如下所示：

```
ID     FIELD A     DUP_NUMBER 
1       text1        0
2       text2        0
3       text2        1
4       text2        2
5       text3        0 
```

再一次将其实际插入表中。如果可以的话，这可能吗？我该怎么做？

我正在寻找一个 mysql select 语句，它只选择 FIELD a 中的唯一条目，但附加条件是您获得最高的 DUP_NUMBER 。

结果集应如下所示：

```
ID     FIELD A     DUP_NUMBER 
1       text1        0
4       text2        2
5       text3        0 
```

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:08:38.927

您可以使用此查询：

```
SELECT `FIELD A`, MAX(`DUP_NUMBER`) AS `DUP_NUMBER`
FROM `table1`
GROUP BY `FIELD A` 
```

您真的需要按原样结构化数据吗？看起来可以通过删除`DUP_NUMBER`列来简化它，假设重复的数字与`ID`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:08:39.163

试试这个

```
 select id , `field a` ,MAX(`DUP_NUMBER`) as dup_number  
   from table1 group by `FIELD A` 
```

[**在这里演示**](http://sqlfiddle.com/#!2/841335/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:14:44.087

你可以这样做：

```
SELECT field_a, max(dup_number) as dup
FROM table1
GROUP BY field_a 
```

聚合功能为您提供重复数量的`max`最大值，同时保证仅显示唯一项目的分组。

如果您还需要知道 id，您可以执行以下操作

```
SELECT t.*
FROM table1 t INNER JOIN (
    SELECT field_a, max(dup_number) as dup
    FROM table1
    GROUP_BY dup_number
) g ON t.field_a = g.field_a AND t.dup_number = g.dup 
```

# asp.net - ASP.Net 一起呈现两个页面

> ID：15912456
> 
> 赞同：0
> 
> 时间：2013-04-09T21:01:24.253
> 
> 标签：asp.net, jquery-mobile, asp.net-mvc-4

这对我来说毫无意义，希望我能正确解释这一点。

我有一个使用 Asp.Net MVC 4 的基本 jQuery Mobile 应用程序。登录到应用程序后，如果我单击左上角的帐户按钮，页面会加载，但缺少主题。如果我然后单击刷新，一切看起来都很好。

我在 Chrome 的 F12 窗口中比较了生成的 HTML。第二页当然是正确的。第一个页面包含所有相同的 HTML，但是，在正文的开头放置了一个*额外的 div。*此 div 向我的应用程序显示主应用程序页面。它具有“页面”的数据角色，并且从视图中隐藏。我只能假设 jQuery Mobile 仅将主题应用于它找到的第一个数据角色“页面”，因此跳过了正确的页面。

为什么我在单击帐户时与单击帐户时单击刷新时会得到不同的页面？

[编辑] - 两个人要求提供代码。我对 Asp 和 jQuery Mobile 非常陌生，并认为这可能是一个简单的 pebkac 错误，有人会指出。代码如下：

这是 Index.cshtml

```
@model TimeCard.Models.LoginModel

@{
   ViewBag.Title = "Your Account";
}

@section Header {
   @Html.ActionLink("Back", "Index", "Home", null, new { data_icon = "arrow-l", data_rel = "back", data_iconpos = "left" })
   <h1>@ViewBag.Title</h1>
}

<ul data-role="listview" data-inset="true">
   <li>@Html.ActionLink("Log off", "LogOff")</li>
</ul> 
```

这是共享布局：

```
<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8" />
   <title>@ViewBag.Title</title>
   <meta name="viewport" content="width=device-width" />
   <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
   @Styles.Render("~/Content/mobileCss", "~/Content/css")
   @Scripts.Render("~/bundles/modernizr")
</head>
<body>
   <div data-role="page" data-theme="b">
      <div data-role="header">
         @if (IsSectionDefined("Header")) {
            @RenderSection("Header")
         }
         else {
            <h1>@ViewBag.Title</h1>
            @Html.Partial("_LoginPartial")
         }
      </div>
      <div data-role="content">
         @RenderBody()
      </div>
   </div>
   @Scripts.Render("~/bundles/jquery", "~/bundles/jquerymobile")
   @RenderSection("scripts", required: false)
</body>
</html> 
```

最后，[这是](http://www.yadawebservices.com/prgtest/issue.png)一张显示正确和错误输出以及呈现的 HTML 的图像。“返回”按钮在两个代码片段中都突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:29:26.053

所以解决方法是添加**data_ajax = "false"**在登录屏幕中调用的 HTML.BeginForm() 方法，以及帐户页面的操作链接。尽管这是“答案”，但它让我比以往任何时候都更加困惑。谁能解释为什么这可以解决我的问题？我是否需要将此添加到所有操作链接？我很乐意接受可以告诉我为什么会这样的人的回答。

# ipad - 如何使两个 UIView 之间的边界看起来更容易（以编程方式）？

> ID：15912464
> 
> 赞同：1
> 
> 时间：2013-04-09T21:01:41.860
> 
> 标签：ipad, uiview, ios6, border, quartz-core

我对**iOS 开发人员如何以编程方式使两个 UIView 之间的边缘/边界/边界看起来更好很感兴趣。**当我将视图放到故事板上时，它们之间产生的联系非常清晰。例如，考虑下面的屏幕截图：

![我的应用](https://i.stack.imgur.com/T1fkv.png)

灰色标题和下面的渐变之间的线非常清晰，**我正在想办法让两个视图之间的过渡更容易让人眼前一亮。**我花了很多工作和实验在左侧面板周围添加圆角阴影，但按钮仍然不能完美融合。

这是iOS6应用商店的截图。我在两个视图之间的边界应用附加效果的地方添加了红点：

![应用商店](https://i.stack.imgur.com/cG2nx.png)

*   细节按钮周围的边界有某种内部阴影
*   顶部和底部面板之间的水平线似乎有某种阴影效果
*   屏幕截图周围有一个非常细的边框/阴影

    **如何以编程方式实现这种外观和感觉？**我尝试使用 CALayer 的 shadowPaths 和边框属性，但工作量很大，必须非常迭代地完成。**是否有一些开源 UIView 子类**查看它的超级视图并决定在自身周围应用哪些效果以**更自然地**与超级视图融合？

这是另一个示例：iPad 版 Adob​​e Ideas。我真的很喜欢他们的按钮和面板周围有微妙的边框，这使得过渡在带有视网膜显示屏的 iPad 上看起来非常好。

![在此处输入图像描述](https://i.stack.imgur.com/qM5BY.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:11:44.650

我找到了一种让图像更自然融合的方法——**在视图周围分配一个半透明的边框**。为了融入白色背景，在下面的颜色中添加更多的白色，为了融入深色，添加更少的白色。结果是 1 像素宽的半透明边框使两种强烈对比的颜色之间的边界不那么强烈。

这种方法的优点是您不再使用特定的颜色边框进行编码。边框的透明度将视图的边框像素转换为较浅/较深的颜色阴影。

```
#import <QuartzCore/QuartzCore.h>

view.layer.borderColor =[UIColor colorWithWhite:0.7 alpha:0.7].CGColor;
view.layer.borderWidth = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:53:03.043

所有这些技能都被称为 Quartz 2D，Apple 有免费的在线手册。视图和动画是您想要阅读的另外 2 个。我有，预计至少有 6 小时的阅读时间。之后你不会花时间在教程上，节省时间。

# jquery - KendoUI 在工具提示中隐藏 div 如果 标签为空

> ID：15912469
> 
> 赞同：0
> 
> 时间：2013-04-09T21:01:48.040
> 
> 标签：jquery, kendo-ui, kendo-dataviz

使用 KendoUI dataViz 库，在我的折线图中显示的工具提示包含一个带有子 p 标签的 div。这个 p 标签的内容是动态的，当 p 标签为空并且数据点悬停在我运行一个函数来检查段落标签中内容的长度时，如果它是空的，则隐藏整个包含 div。有一个问题，即 div 似乎只隐藏了一秒钟，然后在鼠标停留在数据点上时再次显示它自己。[这是一个例子](http://jsbin.com/oyohal/2/edit)。

编辑：下面是我现在使用 OnaBai 的方法实现工具提示的方式。它仍然无法正常工作。如果 p 标签中没有字符，则 if 条件应该运行第一个块。

```
 tooltip: {
    visible: true,
    border: {
        width: 1
    },
    font: "10px MS Trebuchet, Arial, sans-serif",
    template: function (a) {
        if (!$(".tooltip-alert p").text().trim().length) {
            return mTypeName + "&nbsp;" + a.value + unitName + " <br/>" +
                   a.dataItem.measurementtime + " " + a.dataItem.measurementdate + "<br/>" +
                   "<div class='tooltip-alert'>" +
                   "<p></p>" +
                   "</div>";
        } else {
            return mTypeName + "&nbsp;" + a.value + unitName + " <br/>" +
                   a.dataItem.measurementtime + " " + a.dataItem.measurementdate + "<br/>" +
                "<div class='tooltip-alert'>" +
                    "<div class='statType-icon alertIcon-" + a.dataItem.alertid + "'></div>" +
                    "<p>" + a.dataItem.alertname + "</p>" +
                "</div>";
        }
    }
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:31:36.430

不要试图隐藏它，而是将 定义`tooltip`为应用逻辑的函数。例子：

```
tooltip: {
    visible: true,
    font: "10px MS Trebuchet, Arial, sans-serif",
    template: function(a) {
        if (!a.dataItem.alertname) {
            return "Unit name &nbsp; " + a.value + " some variable<br/>" +
                    a.dataItem.measurementtime + " " + a.dataItem.measurementdate + "<br/>" +
                    "<div class='tooltip-alert'>" +
                    "</div>";
        } else {
            return "Unit name &nbsp; " + a.value + " some variable<br/>" +
                    a.dataItem.measurementtime + " " + a.dataItem.measurementdate + "<br/>" +
                    "<div class='tooltip-alert'>" +
                    "<div class='statType-icon alertIcon-" + a.dataItem.alertid +"'>BG img</div>" +
                    "<p>" + a.dataItem.alertname + "</p>" +
                    "</div>";
        }
    }
}, 
```

将 HTML 的内容用作逻辑条件`p`。

# python - 将数字键绑定到计算器的按钮

> ID：15912470
> 
> 赞同：0
> 
> 时间：2013-04-09T21:01:50.497
> 
> 标签：python, tkinter, key-bindings

我该如何继续这样做？我不喜欢必须按每个单独按钮的想法。我真的很想了解这一切。我得到了绑定的概念，我只是不知道该怎么做。

```
from tkinter import *

class Calc():
    def __init__(self):
        self.total = 0
        self.current = ""
        self.new_num = True
        self.op_pending = False
        self.op = ""
        self.eq_flag = False

    def num_press(self, num):
        temp = text_box.get()
        self.eq_flag = False
        temp2 = str(num)      
        if self.new_num == True:
            self.current = temp2
            self.new_num = False
        else:
            if temp2 == '.':
                if temp2 in temp:
                    return
            self.current = temp + temp2
        text_box.delete(0, END)
        text_box.insert(0, self.current)

    def calc_total(self):
        if self.op_pending == True:
            self.do_sum()
            self.op_pending = False

    def do_sum(self):
        self.current = float(self.current)
        if self.op == "add":
            self.total += self.current
        if self.op == "minus":
            self.total -= self.current
        if self.op == "times":
            self.total *= self.current
        if self.op == "divide":
            self.total /= self.current
        text_box.delete(0, END)
        text_box.insert(0, self.total)
        self.new_num = True

    def operation(self, op):
        if self.op_pending == True:
            self.do_sum()
            self.op = op
        else:
            self.op_pending = True
            if self.eq_flag == False:
                self.total = float(text_box.get())
            else:
                self.total = self.current
            self.new_num = True
            self.op = op
            self.eq_flag = False

    def cancel(self):
        text_box.delete(0, END)
        text_box.insert(0, "0")
        self.new_num = True

    def all_cancel(self):
        self.cancel()
        self.total = 0

    def sign(self):
        self.current = -(float(text_box.get()))
        text_box.delete(0, END)
        text_box.insert(0, self.current)

class My_Btn(Button):
    def btn_cmd(self, num):
        self["command"] = lambda: sum1.num_press(num)

sum1 = Calc()
root = Tk()
calc = Frame(root)
calc.grid()

root.title("Calculator")
text_box = Entry(calc, justify=RIGHT)
text_box.grid(row = 0, column = 0, columnspan = 4, pady = 5, padx=5)
text_box.insert(0, "0")

#Buttons
numbers = "789456123"
i = 0
bttn = []
for j in range(2,5):
    for k in range(3):
        bttn.append(My_Btn(calc, text = numbers[i]))
        bttn[i].grid(row = j, column = k, pady = 5, padx=5)
        bttn[i].btn_cmd(numbers[i])
        i += 1
clear = Button(calc, text = "C", width =1, height =1)
clear["command"] = sum1.cancel
clear.grid(row = 1, column = 0, pady = 5, padx=5)

all_clear = Button(calc, text = "AC", width =1, height =1)
all_clear["command"] = sum1.all_cancel
all_clear.grid(row = 1, column = 1, pady = 5, padx=5)

bttn_div = Button(calc, text = chr(247))
bttn_div["command"] = lambda: sum1.operation("divide")
bttn_div.grid(row = 1, column = 2, pady = 5, padx=5)

bttn_mult = Button(calc, text = "x", width =1, height =1)
bttn_mult["command"] = lambda: sum1.operation("times")
bttn_mult.grid(row = 1, column = 3, pady = 5, padx=5)

minus = Button(calc, text = "-", width =1, height =1)
minus["command"] = lambda: sum1.operation("minus")
minus.grid(row = 2, column = 3, pady = 5, padx=5)

add = Button(calc, text = "+", width =1, height =1)
add["command"] = lambda: sum1.operation("add")
add.grid(row = 3, column = 3, pady = 5, padx=5)

neg= Button(calc, text = "+/-", width =1, height =1)
neg["command"] = sum1.sign
neg.grid(row = 4, column = 3, pady = 5, padx=5)

equals = Button(calc, text = "=", width =1, height =1)
equals["command"] = sum1.calc_total
equals.grid(row = 5, column = 3, pady = 5, padx=5)

point = Button(calc, text = ".", width =1, height =1)
point["command"] = lambda: sum1.num_press(".")
point.grid(row = 5, column = 2, pady = 5, padx=5)

bttn_0 = Button(calc, text = "0", width =7, height =1)
bttn_0["command"] = lambda: sum1.num_press(0)
bttn_0.grid(row=5, column = 0, columnspan = 2, pady = 5, padx=5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:15:52.330

我不会绑定每个键，而是使用 Entry 小部件。人们会犯错误。他们会想按退格键，或使用箭头键或鼠标将光标放在某个地方并编辑他们输入的内容。你不想重新发明这一切。如果您给他们一个 Entry 小部件，您就可以免费获得所有编辑功能，并且可以在他们按 Enter 时解析结果。

```
entry.bind('<Enter>', parse) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:25:34.950

我认为*正确*的做法是 unutbu 建议的方式，带有一个条目。（如果你想让它看起来不像一个普通的条目，你可以使用 ttk 主题，并且即使用户没有点击它，你也可以使用焦点技巧使其工作。）

但是，如果您*想*按照自己的方式做事，则可以。您的`key`函数可以分派给执行实际工作的函数（`append_digit`对于数字，`backspace`对于退格/删除）。然后，如果你想要按钮做同样的事情，你可以添加它们，并带有调度到相同函数的回调。例如：

```
from functools import partial
from Tkinter import *

root = Tk()

def key(event):
    print "pressed", repr(event.char)
    if event.char.isdigit():
        append_digit(event.char)
    elif event.char in ('\x08', '\x7f'):
        backspace()

def callback(event):
    frame.focus_set()
    print "clicked at", event.x, event.y

frame = Frame(root, width=100, height=100)
frame.bind("<Key>", key)
frame.bind("<Button-1>", callback)
frame.pack()

current = IntVar(0)
label = Label(frame, textvariable=current)
label.pack()

def button_callback(i):
    print "clicked button {}".format(i)
    append_digit(i)

def append_digit(digit):
    current.set(current.get() * 10 + int(digit))

def backspace():
    current.set(current.get() // 10)

for i in '1234567890':
    Button(frame, text=i, command=partial(button_callback, i)).pack()
Button(frame, text='C', command=backspace).pack()

frame.focus_set()
root.mainloop() 
```

显然，您可以添加更多击键和/或按钮——例如，“+”键和标有“+”的按钮都触发添加功能，或者标有“AC”的按钮触发`current.set(0)`功能，或任何您想要的。而且大概你可以设计一个比一长列按钮更好的用户界面。这只是向您展示这个想法。

# javascript - Firefox 在第一次/页面加载时不会触发“播放”或“播放”事件

> ID：15912476
> 
> 赞同：0
> 
> 时间：2013-04-09T21:02:02.700
> 
> 标签：javascript, html, firefox, dom-events, html5-audio

当音频播放器在页面加载时播放音频文件时，我似乎无法让 Firefox v20.0 第一次触发“播放”或“播放”事件。

如果我单击暂停，然后单击播放，“播放”和“播放”事件都会触发，但不会在初始页面加载时触发。

我尝试使用下面的 vanilla JS 绑定到“play”/“playing”事件，甚至尝试使用 jQuery 的`bind()`方法，但无济于事。

似乎在 Chrome v26.0.1410.64 和 IE 10 中运行良好。这是 Firefox 中的错误吗？

```
// HTML
// ---------------------------------------------------
<audio controls="" preload="auto" autobuffer autoplay>
    <source src="bc.ogg" type='audio/ogg'>
</audio>

// JS
// --------------------------------------------
// Assume player is <audio>

player.addEventListener('playing', function() {
    console.log('PLAY');
}); 
```

我的最终目标是在播放音频时用暂停按钮替换自定义播放按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:25:13.997

音频元素可能在听者被绑定之前开始播放。由于 DOM 构建和处理方式的内部差异，这可能会在某些浏览器中发生，而在其他浏览器中则不会。最好的解决方案是在页面完全加载后绑定监听器并播放音频元素，而不是依赖浏览器在需要时启动它。

# android - DDMS 和虚拟创建者在 Eclipse 中不起作用

> ID：15912483
> 
> 赞同：0
> 
> 时间：2013-04-09T21:02:30.753
> 
> 标签：android, linux, eclipse, ddms

我遇到了 eclipse 的一些问题：我在 Linux`(I use ubuntu 11.04)`和 ADT 插件上下载了 android SDK。我使用终端启动 eclipse，在 eclipse 开始在终端中工作后出现：“错误加载 DDMS 首选项”为什么会出现错误？如何解决？其次，当我尝试设置 Android 虚拟设备（我填写 AVD 名称、设备、目标等字段）并在“创建新的 android 虚拟设备（AVD）”窗口中单击确定按钮时，没有任何反应，appart 弹出错误：

`"SDK Manager] Error: null"`

在 Eclipse 控制台中（前一个窗口不会消失）如何使这个创建者正常工作？我不确定这两个问题是否有共同点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:17:19.393

我发现了一个有趣的设置文件`workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/com.android.ide.eclipse.ddms.prefs`

我试图删除它，但它没有帮助。不过，有帮助的是拔下所有安卓设备，然后启动 Eclipse。

# ruby-on-rails - 如何保护 Rails 关联（防止覆盖）

> ID：15912485
> 
> 赞同：0
> 
> 时间：2013-04-09T21:02:43.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个具有 has_one 关系的对象。更具体地说，这是关系：

```
class Product < ActiveRecord::Base
  has_one :domain
end

class Domain < ActiveRecord::Base
  belongs_to :product
end 
```

这是一个非常基本的关联。但是，我想弄清楚的是某种防止关联被覆盖的方法。

*假设我有一个域为“google.com”的产品，然后是一个尝试另存为“google.com”的新产品。我希望第二个失败。*

关于如何提供此关联验证的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:05:33.427

你正在寻找`validates <field>, uniqueness: true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:29:00.860

因此，要执行我正在寻找的验证，我必须将以下内容添加到域模型中：

```
before_update :update_test

def update_test
   product_id_was.nil? || product_id.nil?
end 
```

# java - 如何删除相同的单词？

> ID：15912494
> 
> 赞同：0
> 
> 时间：2013-04-09T21:03:36.743
> 
> 标签：java, arrays, string, equals

如何从字符串数组中删除相同的单词？这是我想使用的代码示例，但它不起作用

```
String[] wordList = outString.toString().split(", ");
for (int i = 0; i < wordList.length; i++) {
    for (int j = 0; j < wordList.length; j++) {
        if ((wordList[i].equals(wordList[j]))&&(j!=i)) {
            wordList.remove(wordList[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:06:18.660

Sets 的规则是其中只能有唯一的项目。因此，以下代码就足够了：

`Set<String> mySet = new HashSet<String>(Arrays.asList(someArray));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:06:33.157

您可以使用

```
Set<String> uniqueWords = new HashSet<>(Arrays.asList(outString.split(", ")));
System.out.println(uniqueWords); 
```

# c# - 如何在 C# 中读取 Word Doc，使其显示为好像在记事本中打开一样

> ID：15912495
> 
> 赞同：0
> 
> 时间：2013-04-09T21:03:43.533
> 
> 标签：c#, ms-word, streamreader, doc, notepad

我正在尝试阅读 C# 中的 Word Doc，然后在文本框中显示结果。但我不想只阅读文本，而是阅读整个文件，包括特殊字符。我需要它与我在记事本中打开相同文件时显示的结果完全匹配。

通过使用 StreamReader，我获得了最接近的结果。请注意，您必须[遵循此链接](https://stackoverflow.com/questions/14416957/how-can-i-read-any-file-into-a-string/14417140#14417140)中的说明才能显示任何结果。但是，结果仍然不是 100% 正确 - 某些字符的解释 (?) 与我直接在记事本中打开文档不同。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:19:40.420

可能取决于文本的编码：msdn.microsoft.com/en-us/library/system.text.encoding.aspx 例如：Encoding.ASCII.GetString(text); 使用链接中的示例。

只是发布这个，因为它最终似乎有所帮助:)

# php - 使用 cakephp 选择 jquery 脚本 - 尝试从数据中保存数组

> ID：15912500
> 
> 赞同：0
> 
> 时间：2013-04-09T21:04:04.213
> 
> 标签：php, cakephp, jquery-chosen

我试图在我的“Requestc”控制器上保存一个数组，其中包含来自多选所选脚本的数据。

我的观点：

```
<select data-placeholder="Selecione as certidões" name="certidoes[Requestc][][caminho]" multiple="multiple"  style="width:400px;" class="chzn-select">
    <?php foreach ($certidao as $certidoes): ?>
    <option value="<?php echo $certidoes['Certificate']['id']; ?>"><?php echo $certidoes['Certificate']['nome']; ?></option>
    <?php endforeach ?>
</select> 
```

我的控制器：

```
if(!empty($solicitacao)) {
        $this->request->data['Requestc']['request_id'] = $this->Request->id;
        $data = $this->request->data['certidoes'];
        $this->Request->Requestc->saveAll($data['Requestc']);
    } 
```

当我保存我的“request_id”时，它仍然是空白的。

![在此处输入图像描述](https://i.stack.imgur.com/22oR9.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:49:45.450

不是答案，而是说明如何使用 FormHelper 创建此输入；

```
// Aparently, this variable is not formatted correctly to be used
// directly for options. If possible, use Model::find('list')
// to get it in the right format
$options = array();

foreach ($certidao as $row) {
    $options[$row['Certificate']['id']] = $row['Certificate']['nome'];
}

echo $this->Form->input('Requestc.caminho', array(
    'type' => 'select',
    'multiple' => 'multiple',
    'data-placeholder' => 'Something here',
    'style' => 'width:400px',
    'class' => 'chzn-select',
    'options' => $options,
 ); 
```

不在我电脑后面测试，但觉得应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:08:33.413

我认为您需要使用不同的语法来修改数据。[检查食谱](http://book.cakephp.org/2.0/en/controllers/request-response.html#CakeRequest%3a%3adata)

```
// Modify some request data, so you can prepopulate some form fields.
$this->request->data('Post.title', 'New post')
    ->data('Comment.1.author', 'Mark'); 
```

# java - 使用 Pelops 客户端连接到 Cassandra 数据库的有效方法

> ID：15912501
> 
> 赞同：2
> 
> 时间：2013-04-09T21:04:06.650
> 
> 标签：java, singleton, cassandra, pelops

我正在做一个我需要使用的项目`Cassandra Database`。我有一个示例程序，可以将数据填充到`Cassandra database`. 我正在使用`Pelops client`它。

所以现在我正在考虑创建一个`Singleton class`for`Cassandra database`来建立连接`Cassandra database`，然后我将使用该实例从`Singelton class`我`CassandraDAO`的实例插入到 Cassandra 数据库并从 Cassandra 数据库中检索数据。

下面是我迄今为止构建的 Singleton 类，它将连接到 Cassandra 数据库-

```
public class CassandraConnection {

    private static CassandraConnection _instance;
    private String keyspace;
    private String[] seeds;
    private int port;
    private String poolName;

    public static synchronized CassandraConnection getInstance() {
        if (_instance == null) {
            _instance = new CassandraConnection();
        }
        return _instance;
    }

    private CassandraConnection() {
        setKeyspace(ICassandraDo.KEYSPACE_NAME);
        setSeeds(ICassandraDo.NODES).split(",");
        setPort(ICassandraDo.CASSANDRA_PORT);
        setPoolName(ICassandraDo.THRIFT_CONNECTION_POOL);

        createPool();
    }

    //This is the right way to `addPool` in pelops?
    private void createPool() {
        Pelops.addPool(getPoolName(), getSeeds(), getPort(),
                false, getKeyspace(), new Policy());

    }

    private String setSeeds(String nodes) {

    // I am not sure what I am supposed to do here? 
    // Any guidance will be of great help

    }

    private void setPoolName(String thriftConnectionPool) {
        this.poolName = thriftConnectionPool;
    }

    private void setPort(int cassandraPort) {
        this.port = cassandraPort;
    }

    private void setKeyspace(String keyspaceName) {
        this.keyspace = keyspaceName;

    }

    public void setSeeds(String[] seeds) {
        this.seeds = seeds;
    }

    public String[] getSeeds() {
        return seeds;
    }

    public int getPort() {
        return port;
    }

    public String getKeyspace() {
        return keyspace;
    }

    public String getPoolName() {
        return poolName;
    }
} 
```

**问题陈述：-**

我对上面的代码几乎没有疑问。

1.  首先，我应该`setSeeds`在上面的课程中使用方法做什么？任何指示或示例都会有很大帮助。
2.  其次，我不确定在创建单例类时这是否是正确的方法？我想知道管理与 pelops 客户端的集群连接的最佳方法是什么。
3.  而且，`addPool`在我上面的代码中使用方法的最佳方式是什么？我想，我也搞砸了那里的东西？当我不断看到不同`addPool`的方法`Pelops class`？所以我应该记住哪种方法，因为我将在生产环境中运行它。

在上面的 Singleton 类准备好之后，我打算在我的`DAO`代码中使用上面的类，就像这样-

`Mutator mutator = Pelops.createMutator(CassandraConnection.getInstance().getPoolName());` `mutator.writeColumns(other data inside)`;

然后也执行选择器以检索数据。

仅供参考，我正在与`Cassandra 1.2.3`and合作`Scale 7 pelops client`。

任何帮助将不胜感激。提前致谢。

**更新代码：-**

下面是我更新的代码。

```
public class CassandraConnection {

    private static CassandraConnection _instance;
    private String keyspace;
    private String[] nodes;
    private int port;
    private String poolName;

    public static synchronized CassandraConnection getInstance() {
        if (_instance == null) {
            _instance = new CassandraConnection();
        }
        return _instance;
    }

    private CassandraConnection() {
        setKeyspace(ICassandraDo.KEYSPACE_NAME);
        setNodes(ICassandraDo.NODES);
        setPort(ICassandraDo.CASSANDRA_PORT);
        setPoolName(ICassandraDo.THRIFT_CONNECTION_POOL);

        createPool();
    }

    private void createPool() {
        Pelops.addPool(getPoolName(), getCluster(), getKeyspace());

    }

    private Cluster getCluster() {

        Config casconf = new Config(ICassandraDo.CASSANDRA_PORT, true, 0); 

        Cluster cluster= new Cluster(nodes, casconf, ICassandraDo.NODE_DISCOVERY);

        return cluster; 
    }

    private void setPoolName(String thriftConnectionPool) {
        this.poolName = thriftConnectionPool;
    }

    private void setPort(int cassandraPort) {
        this.port = cassandraPort;
    }

    private void setKeyspace(String keyspaceName) {
        this.keyspace = keyspaceName;

    }

    private void setNodes(String nodes) {
        this.nodes = nodes.split(",");
    }

    public int getPort() {
        return port;
    }

    public String getKeyspace() {
        return keyspace;
    }

    public String getPoolName() {
        return poolName;
    }
} 
```

**仅供参考，就我而言，我将有两个集群，每个集群有 12 个节点。**

任何人都可以看看，让我知道我得到了正确的一切吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:49:44.440

种子节点是集群的两个（或更多，但 2 是 Cassandra 文档中建议的数量）节点。在每个 cassandra-node 配置文件 (cassandra.yaml) 中都有集群种子节点的地址。想象一下你有 5 个节点的集群

192.168.1.100 192.168.1.101 192.168.1.102 192.168.1.103 192.168.1.104

例如，在每个配置文件中都会有

种子 192.168.1.101 192.168.1.103

对于这个集群，这两个地址是种子节点。集群的每个节点在启动时都会联系这 2 个节点并获取必要的信息。在您的示例中，您可以传递在配置中找到的地址，或者只传递集群的几个地址节点

```
String[] nodes = new String[2];
nodes[1] = "192.168.1.101";
nodes[2] = "192.168.1.103"; 
```

2) Singleton 是绝对没有必要的，因为 Pelops 类仅由静态元素构成。如果您的应用程序中有 Init/Startup，只需在此处声明与 Cassandra 的连接，它将在您的所有代码中可用

3）没有正确答案，连接集群的正确方式取决于集群。您可能需要设置自定义参数或由 Pelops 保留。在我的生产环境（5 个节点，RF=3）中，我使用默认参数没有问题。

再见

# javascript - Javascript while循环无限循环

> ID：15912504
> 
> 赞同：0
> 
> 时间：2013-04-09T21:04:09.457
> 
> 标签：javascript, loops

我对代码的经验并不多，我被困在下面代码块底部的 while 循环中

我的代码应该获取日期，检查今天是否是我们不发货的日子（星期六、星期日、节假日），如果是，则添加 1 天，直到找到我们营业的第二天并将其写入文档。

```
var target = new Date();
var targetDay = target.getDay();
var targetDate = target.getDate();
var targetMonth = target.getMonth();

function checkIfClosedOnTarget(targetDay,targetDate,targetMonth){
    var areOpenOnTarget = true;
    if(
         targetDay == 0 || 
         targetDay == 6  ||
         (targetDate == 1 && targetMonth == 0) || // New Year's Day
         (targetMonth == 4 && targetDate >= 25 &&  targetDay == 1) || // Memorial Day
         (targetMonth == 6 && targetDate == 4) || //Independence Day
         (targetMonth == 8 && targetDate <= 7 && targetDay == 1)|| //Labor Day
         (targetMonth == 10 && targetDate <= 28 && targetDate >= 22 && targetDay == 4)|| // Thanksgiving Day
         (targetMonth == 11 && targetDate == 25)
     ){
         areOpenOnTarget = false;
     }

    if(areOpenOnTarget){
        return true;
    }else{
       return false;
    }
};

function addDaysUntilNextOpenDay() {
     while(checkIfClosedOnTarget(targetDay,targetDate,targetMonth) == false){
     target.setDate(target.getDate() + 1);
     }
 };
addDaysUntilNextOpenDay();

document.write("<p>Next shipment will ship out on " + target.getMonth() + " " +   target.getDate + ", " + target.getYear) + " at 4:00pm Pacific Standard Time "; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:10:11.117

问题在于`target.setDate(target.getDate() + 1);`您更新了这一行，`target`但您从未更新`targetDay`, `targetDate`,`targetMonth`变量...因此该`checkIfClosedOnTarget()`函数不断传递相同的值，从而导致*无限循环*。

因此，您可能希望在设置第二天后更新它们：

```
while(checkIfClosedOnTarget(targetDay,targetDate,targetMonth) === false){
     target.setDate(target.getDate() + 1);

     // update parameters
     targetDay = target.getDay();
     targetDate = target.getDate();
     targetMonth = target.getMonth();
} 
```

# python - scipy interp2d 因无法分配内存而崩溃，还有其他选择吗？

> ID：15912505
> 
> 赞同：0
> 
> 时间：2013-04-09T21:04:12.807
> 
> 标签：python, numpy, scipy

我试图在某个用户定义的、连续的 2D x,y 位置插入在常规笛卡尔网格 (i,j) 上定义的 2D 函数的值。

我尝试过的是使用 scipy.interpolate 中的函数 interp2d 来获得一个函数，该函数将通过使用适当的模型进行插值，在 (x,y) 处返回 f 值。

请参阅文档：

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp2d.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp2d.html)

以下代码重现了我遇到的错误。似乎 interp2d 崩溃是因为它无法分配那么多内存。

知道如何否则可以做到吗？

```
 import scipy.interpolate as interp
   import numpy as np

   def main():
       x = np.arange(4098)/4097.
       z = np.arange(1602)/1601.

       xx,zz = np.meshgrid(x,z)
       f = np.sin(xx**2 + zz**2)

       ff = interp.interp2d(x,z,f, kind='linear')

   if __name__ == '__main__':
       main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:27:56.330

问题是样条拟合例程对节点选择中需要多少空间进行了极其悲观的估计（此算法：[http](http://netlib.org/dierckx/surfit.f) : //netlib.org/dierckx/surfit.f，请参阅 lwrk2 的描述并在悲观的方式 --- 它提供约 200 GB）。

请注意，这是一个*非结构化数据*插值例程 --- interp2d 也可以传递不在常规网格上的输入数据。4098*1602=6564996 是相当多的数据点，用于分散数据插值，即使数据按规则排列在网格上也很容易管理，如本例。

它的工作方式在 Scipy 0.12.0[中发生](https://github.com/scipy/scipy/commit/7adfbbda57ede6)了变化，其中 interp2d 在这种情况下推断数据位于矩形网格上，并在这种特殊情况下使用更有效的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:23:53.980

你真的需要这么精细的网格吗？您可以通过减少网格的粒度来节省内存。

这使得`x`范围从 0 到 1 具有 100 个等距点：

```
 x = np.linspace(0, 1, 100) 
```

* * *

```
import scipy.interpolate as interp
import numpy as np

def main():
   x = np.linspace(0, 1, 100)
   z = np.linspace(0, 1, 100)

   xx,zz = np.meshgrid(x,z)
   f = np.sin(xx**2 + zz**2)

   ff = interp.interp2d(x,z,f, kind='linear')

if __name__ == '__main__':
    main() 
```

# php - 无法在新的 Intranet 站点上打开文件

> ID：15912510
> 
> 赞同：0
> 
> 时间：2013-04-09T21:04:25.713
> 
> 标签：php, apache, iis-7, permissions

我最近将一个基于 PHP 的 Intranet 站点从 Apache 服务器切换到运行 IIS7 的服务器。我已经将 PHP 安装到服务器上，并且一切（据我所知）都正常工作，但有一个例外。

该站点上有许多指向位于另一台服务器上的 .pdf 和 .doc 文件的链接。在我的 Apache 服务器上，用户一切正常（左键单击并打开文件）。在新的 IIS7 服务器上，当用户左键单击时没有任何反应；但是，可以通过右键单击并“将目标另存为...”来下载该文件。

我是 IIS7 的新手，因此将不胜感激。（这也是我的第一个问题。该网站的忠实粉丝。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:20:52.660

这很可能是一个 mime 类型的问题。

在 IIS 中转到 MIME 类型并添加适当的扩展名。

或者您可以在 webconfig 中执行此操作：

```
<system.webServer>

<staticContent>

<mimeMap fileExtension=".pdf" mimeType="application/pdf"/>

<mimeMap fileExtension=".mp4" mimeType="video/mp4"/>

<mimeMap fileExtension=".webm" mimeType="video/webm"/>

<mimeMap fileExtension=".m4v" mimeType="video/m4v"/>
...
</staticContent> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:13:14.040

此问题已通过调整要访问文件的工作站上的“受信任的站点”来解决。

故事的寓意：从最简单的解决方案开始，然后逐步向上。

感谢所有评论的人。

# iphone - Facebook iOS 应用内浏览器中的音频标签

> ID：15912511
> 
> 赞同：3
> 
> 时间：2013-04-09T21:04:33.450
> 
> 标签：iphone, facebook, html5-audio, facebook-ios-sdk

我有一个带有音频标签的网页。它在 Mobile Safari 中运行良好。

但是，当我从 iOS 上的 Facebook 应用打开链接时，它会在应用内浏览器中打开。在这里，音频拒绝播放。如果控件正在显示但没有音频，它将显示它正在播放。视频似乎可以正常工作，但音频标签不起作用。

有没有办法让它工作，甚至强制链接在 Mobile Safari 中打开？

要试用它，请在您的 Facebook 墙上分享[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_soundmidiembed并尝试通过 iOS 应用程序打开它。](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_soundmidiembed)

# android - 使用带有光标的加载器

> ID：15912512
> 
> 赞同：1
> 
> 时间：2013-04-09T21:04:34.227
> 
> 标签：android, loader

我想用来`CursorLoaders`从数据库中加载日期，但问题是我不想处理 CursorAdapter 或者它倒出我想要保持`Cursor`原样。

这就是我所做的

```
class MyClass implements LoaderCallbacks<Cursor> { 

Cursor mCursor;
...
...
...

@Override
    public Loader<Cursor> onCreateLoader(int id, Bundle bundle) {
        if (type == V_TYPE_PART) {
            // load all parts
            return new CursorLoader(getActivity(),
                    PartTableMetaData.CONTENT_URI,
                    PartTableMetaData.TABLE_COLUMNS, null, null,
                    PartTableMetaData._ID + " ASC");
        } 
        return null;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {

        counterPartCursor = arg1;
                //update the UI

    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {

        mCursor= null;

    }
} 
```

现在这项工作正常。我的问题是我做对了吗？还是我应该做一些其他的事情，比如在`onLoaderReset`??中关闭光标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T05:56:27.320

不需要关闭游标。设置 null 将使事情正常工作，因为 CursorLoader 将负责关闭它。但是我可以看到您当前代码中的泄漏为

```
@Override
public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {

    counterPartCursor = arg1;
            //update the UI

}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {

    mCursor= null;

} 
```

您在 counterPartCursor 中持有引用并使 mCursor 为空！

# c++ - 试图在 C++ 中输出一个数组对象

> ID：15912513
> 
> 赞同：2
> 
> 时间：2013-04-09T21:04:35.480
> 
> 标签：c++, class, output

我正在编写一个程序来表示一个包含大量元素的数组，其中大多数元素为零且不超过 20 个非零。理论上，该数组可以有一万亿个元素，但两个单独的数组将表示两个非零元素的数组索引和值。我现在遇到的问题是我无法输出值数组以进行调试。当我尝试输出值数组时，我得到的只是零，但是当我输出总数时，我得到 820。此外，这是一个家庭作业，我不能更改任何公共类声明，除了当我自己编写调试时的输出功能。谢谢您的帮助。

```
class SparseArray{
public:
    SparseArray();  //  construct an SparseArray with no nonzero elements
    unsigned get( unsigned long long index );   //  return an element from the      array
    SparseArray & set( unsigned long long index, unsigned value );  //  set array     element to value
    SparseArray & output ();
private:
    unsigned long long indexArray[21];
    unsigned valueArray[21];
    unsigned nonzero;

};  //  SparseArray

int main(int argc, const char * argv[])
{

    SparseArray a;
    unsigned long long index = 1;
    for(  unsigned i = 0;  i <= 20;  i++, index *= 4  )
        a.set( index, i );
        a.output();

    unsigned total = 0;
    index = 1;
    for(  unsigned i = 0;  i <= 40;  i++, index *= 2 ){
        total += a.get(index);
        a.output();
    }
    cout <<total;

    return 0;
}

SparseArray::SparseArray():
indexArray(),valueArray()
{
    for (int i = 0; i < 20; i++) {
        indexArray[i] = 0;
        valueArray[i] = 0;
    }

}
unsigned SparseArray::get( unsigned long long index ){

    unsigned object;

    for (unsigned i = 0; i < 20; i++) {
        if (indexArray[i] == index) {
            object = valueArray[i];
        }
    }

    return object;
}
SparseArray & SparseArray::set( unsigned long long index, unsigned value ){

   for (int i = 0; i < 20; i++) {
        if (indexArray[i] == 0 && valueArray == 0) {
            indexArray[i] = index;
            valueArray[i] = value;
           break;
         }
    }

    return *this;

    }

SparseArray & SparseArray::output (){
    for (int k = 0; k < 21; k++) {
        cout << valueArray[k] << "," << endl;
    }

    return *this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:13:42.770

此循环迭代**21**次。

```
for (int k = 0; k < 21; k++) 
```

这就是您的输出返回 820 的原因。

```
unsigned object; // This can be returned uninitialized data!  Set it to 0!

for (unsigned i = 0; i < 20; i++) {
    if (indexArray[i] == index) {
        object = valueArray[i];
    }
}

return object; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:15:50.043

还要更改此行以初始化数组， valueArray 需要一个下标。

```
if (indexArray[i] == 0 && valueArray == 0) { 
```

到

```
if (indexArray[i] == 0 && valueArray[i] == 0) { 
```

# android - 从类中将 ImageView 添加到父 Activity

> ID：15912517
> 
> 赞同：0
> 
> 时间：2013-04-09T21:04:47.347
> 
> 标签：android, position, imageview, parent

我想创建一个灵活的类，我可以将其放入我创建的任何项目中。此类将生成一个图像（最终是来自服务器的图像）并将其放置在调用 Activity 的视图中。

想法是：一个 Activity 创建这个类的一个实例，当我想显示图像时，我调用该类的“show”方法，传递 x 和 y 坐标，以及宽度和高度，以及要使用的默认图像名称如果它不能从服务器加载一个。

我很难让我创建的 ImageView 在父 Activity 中正确定位。我尝试了许多不同的方法，但到目前为止，这是我为这门课所做的：

```
public class ImageProducer 
{   
        //parent activity
        Activity parentActivity;

    public void show(int x, int y, int imageWidth, int imageHeight, String defaultImage)
    {
        Resources r = parentActivity.getResources();
        String packageName = parentActivity.getPackageName();
        String imagePath = packageName + ":drawable/" + defaultImage;
        int rID = r.getIdentifier(imagePath,null,null);
        ImageView v = new ImageView(parentActivity.getBaseContext());
        v.setImageResource(rID);
        v.setScaleType(ScaleType.FIT_CENTER);
        AbsoluteLayout.LayoutParams lp = new AbsoluteLayout.LayoutParams(imageWidth, imageHeight, x, y);
        v.setLayoutParams(lp);
        parentActivity.addContentView(v, lp);
    }

    public ImageProducer(Activity a)
    {
        parentActivity = a;

    }
} 
```

图像出现在父 Activity 中，但始终位于左上角。

关于如何在我的班级中定位它的任何想法？棘手的部分是父 Activity 没有设置布局。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:57:36.497

我可以想到一两种方法来做到这一点。

您可以确保所有活动布局的根布局是 a `RelativeLayout`，然后使用必要的参数将视图添加到该视图中，以使其在视图中居中。这意味着布局是第一个孩子，`RelativeLayout`并且您的图像被添加为第二个孩子，因此将出现在第一个孩子的顶部。

或者

您可以通过扩展来创建自己的布局管理器`ViewGroup`。您可能需要对其进行一些调整，但本质上`ViewGroup`应该是这样的。

```
public class Article2 extends ViewGroup {

    private View layout;
    private ImageView theImage;
    private Context ctx;

public Article2(Context context,View layout) {
    super(context);
    ctx = context;
    this.layout = layout;
    this.addView(layout);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
    int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSpecSize =  MeasureSpec.getSize(widthMeasureSpec);

    int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSpecSize =  MeasureSpec.getSize(heightMeasureSpec);

    for(int i = 0;i<this.getChildCount();i++){
        final View child = this.getChildAt(i);
        measureChild(child, widthMeasureSpec, heightMeasureSpec);   
    }
    setMeasuredDimension(widthSpecSize, heightSpecSize);
}

@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    layout.layout(left, top, right, bottom);

    if(theImage!= null){
        theImage.layout(right/2 - theImage.getMeasuredHeight()/2, bottom/2 -theImage.getMeasuredHeight()/2, right/2 + theImage.getMeasuredHeight()/2, bottom/2 + theImage.getMeasuredHeight()/2);
    }

}

public void startImage(String url){
    theImage = new ImageView(ctx);
    new GetImage(url).execute();
}

private class GetImage extends AsyncTask<Void,Void,Boolean>{
String url=null;
public GetImage(String url){
    this.url = url;
}
@Override
protected Boolean doInBackground(Void... arg0) {
    if(url!=null&&url.length()>0){

        try {
            theImage.setImageBitmap(BitmapFactory.decodeStream((InputStream)new URL(url).getContent()));
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return false;
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }

        return true;

    }else{
        return false;
    }
}
@Override
protected void onPostExecute(Boolean addView){
    if(addView){
            addView(theImage);
    }
}
}
} 
```

**编辑**

忘记添加如何使用上面的类。

而`onCreate()`不是像这样将内容视图设置为布局文件

```
setContentView(R.layout.MyLayout); 
```

而是这样做

```
Article2 article2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.MyLayout, null);
    article2 = new Article2(this,v);
    setContentView(article2);
} 
```

通过这种方式，您只需将上面的 5 行放入每个活动中即可使其正常工作

要显示图像，只需调用`parentActivity.article2.startImage(url)`它，它就会将图像放置在您在屏幕中心提供的视图顶部

请注意，我没有在其中放置任何东西来删除图像，一旦图像被放置，您可能只需要使用`article2.removeViewAt(1)`，但我还没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:35:03.777

仅供参考，这是我最终为使事情正常工作所做的：我将 ImageView 添加到 parentActivity，之后我抓取了一个指向布局参数的指针。LayoutParams 是 FrameLayout，所以我必须设置重力，然后指定 x 和 y 值。这是我的代码的样子：

```
 Resources r = parentActivity.getResources();
        String packageName = parentActivity.getPackageName();
        packageName+=":drawable/" + defaultImage;
        int rID = r.getIdentifier(packageName,null,null);
        ImageView v = new ImageView(parentActivity.getBaseContext());
        v.setImageResource(rID);

        parentActivity.addContentView(v, new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
        FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) v.getLayoutParams();
        lp.width=w;
        lp.height=h;
        lp.gravity=Gravity.LEFT | Gravity.TOP;
        lp.leftMargin=x;
        lp.topMargin=y;
        v.setLayoutParams(lp);
        v.requestLayout(); 
```

再次感谢所有建议！

# android - 可以使用 MQTT 来实现请求/响应行为吗

> ID：15912520
> 
> 赞同：10
> 
> 时间：2013-04-09T21:05:10.030
> 
> 标签：android, http, mqtt

我们计划使用 MQTT 将消息从我们的服务器传递到我们决定使用开源服务器 mosquitto 的 android 设备。

在大多数情况下，这已经足够了。（发布/订阅）但我们有客户端需要发送参数并从服务器获取响应的情况。我知道直接的方法是使用 Http（例如 Servlet）。但是我们可以使用 MQTT 来实现这一点，因为这意味着用户的带宽消耗会降低吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T07:55:09.123

是的，它只需要仔细设计您的主题结构。作为一个非常简单的示例，您可以发布`control/<client id>/request`和订阅`control/<client id>/response`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-13T11:10:59.647

从 MQTT 版本 5 开始，这是可能的。该规范具有指定的请求/响应模式。

看看这个：[https ://stackoverflow.com/a/59916330/1137669](https://stackoverflow.com/a/59916330/1137669)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T13:45:37.290

我建议你看看[RabbitMQ 如何处理 RPC](http://www.rabbitmq.com/tutorials/tutorial-six-java.html)。尽管 AMQP 与 MQTT 不同，但仍有相当多的高级继承。

归结为您需要能够使用消息头创建具有相关 id 的临时“回复”队列。或者正如@ralight 所说，为每个客户打开两个队列。为每个客户端打开两个队列的问题当然是排序，因此您必须在内部使用关联 ID 和缓冲区和路由（如果您的应用程序是同步的，则删除直到找到关联 ID）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-27T01:45:40.577

你也可以用 xargs 完成同样的事情。

这是一个shell脚本作为示例：

```
mqtt_eg_link.sh

d=$(date +%Y-%m-%d)
mosquitto_pub -h <your host> -p 1880 -t status/ghost/log -m "$d >> eg listener running"
mosquitto_sub -h <your host> -p 1880 -t ghost | xargs -t -I {} cmd.exe /c eg.bat {} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-12T13:37:36.277

您应该使用等待/通知将发布/订阅转移到 Dubbo 框架 DefaultFuture 中使用的请求/响应，

# knockout.js - 更改父 div 上的复选框值单击

> ID：15912525
> 
> 赞同：2
> 
> 时间：2013-04-09T21:05:30.577
> 
> 标签：knockout.js

当我单击父 div 时，我正在使用敲除并尝试更改复选框的值。这很好用，但现在我无法在实际单击复选框时更改复选框值......复选框后的跨度用于调试目的，以查看变量设置为什么。我尝试使用 clickBubble: false 但这似乎也没有帮助。

我有以下映射：

```
var mapping = {
        'teams': {
            create: function(options) {
                options.data.active=ko.observable(false);
                options.data.flipActive= function(team, event){
                    if(!$(event.target).hasClass('team_checkbox'))
                        team.active(!team.active());
                }
                return options.data;
            }
        }
    } 
```

以及以下 HTML：

```
 <div id="selectTeamsArea" data-bind="foreach: teams">
                <div class="teams_result_data" data-bind="click: flipActive, clickBubble: false">
                    <img class="floatLeft" height="40" width="40" data-bind="attr: {src: searchImgLink}" >
                    <div>
                        <p data-bind="text: searchBoldName"></p>
                        <p data-bind="text: searchThirdLine"></p>
                    </div>
                    <input class="right team_checkbox" type="checkbox" name="teams" data-bind="value: idString, checked: active, clickBubble: false" />
                    <span data-bind="text: active"></span>
                </div>
                <div class="clear"></div>
            </div> 
```

任何帮助是极大的赞赏。

**更新，包括 JSFIDDLE：http: [//jsfiddle.net/YYUed/](http://jsfiddle.net/YYUed/)**

^即使您注释掉“flipActive”的内部，复选框也不能正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:58:11.927

我认为最好的方法是用 , 替换你`<div>`的[`<label>`](http://www.w3.org/TR/html-markup/label.html)（`<input>`仍然）作为`<label>`. 这种方法不仅更具语义性和可访问性，而且它的优点是单击`<label>`与单击复选框本身实际上是相同的。

# symfony - Doctrine2 不保存 utf-8

> ID：15912529
> 
> 赞同：4
> 
> 时间：2013-04-09T21:05:36.923
> 
> 标签：symfony, utf-8, doctrine-orm

在我的 Symfony 2 应用程序中，我的 Doctrine 字符集设置为`UTF8`.

我有这个以 `Using mb_detect_encoding 开头的字符串，它是 UTF-8。`

 `但是将其保存到 Doctrine 实体的文本字段中会给我以下错误：

```
SQLSTATE[HY000]: General error: 1366 Incorrect string value: '\\xF0\\x9F\\x8C\\xB9 h...' for column 'text' at row 1", 
```

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T10:56:41.443

错误消息告诉您发生了什么。数据库引擎无法将字符串值 \xF0\x9F\x8C\xB9 存储在数据库中。

这似乎是字符[U+1F339 ROSE](http://codepoints.net/U+1F339)，它位于补充多语言平面中，需要 4 个字节来存储。

MySQL UTF8 实际上并不支持所有的 UTF8，而且对于 4 字节字符基本上根本不起作用。[请参阅此答案](https://stackoverflow.com/questions/8709892/mysql-throws-incorrect-string-value-error/8767381#8767381)以获取有关如何修复它的建议，但基本上，如果您想存储这些字符，则需要在任何地方使用排序规则“utf8mb4_unicode_ci”切换为使用“utf8mb4”字符集。`

# angularjs - 在子目录中运行时如何在AngularJS中使用相对链接？

> ID：15912535
> 
> 赞同：1
> 
> 时间：2013-04-09T21:06:07.213
> 
> 标签：angularjs

我在使用 AngularJS 中的相对链接时遇到了一些麻烦。在这种情况下，我没有使用 ng-href，因为它似乎没有必要。

我知道，当我使用 时`$location.path()`，我应该始终在链接前加上正斜杠 - 所以如果我想转到 howTo 页面，我会使用`$location.path("/howTo")`

我想添加一个锚标记以访问菜单中的操作指南页面。我不确定如何做到这一点 -`<a href="/howTo">How To</a>`不起作用，因为它会在 Web 服务器的根目录中查找 howTo（我在子目录中运行我的应用程序）。

我应该在我的链接前面加上前缀`#/`吗？虽然它似乎有效，但我认为可能有更好的方法。在 中`$routeProvider`，我可以说类似`.when('/howTo',...`，并且我希望尽可能找到某种程度的一致性。

# javascript - 从两个数组中获取唯一值并将它们放入另一个数组中

> ID：15912538
> 
> 赞同：41
> 
> 时间：2013-04-09T21:06:21.467
> 
> 标签：javascript, arrays

我在javascript中有两个数组-：

```
var array1 = ['12','1','10','19','100'];
var array2 = ['12','10','19']; 
```

我需要一种方法来从两个数组中获取唯一性并将它们放在 array3 中 `Array3`应该是-：

```
var array3 = ['1','100']; 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-09T21:10:51.130

```
var array3 = array1.filter(function(obj) { return array2.indexOf(obj) == -1; }); 
```

Array#filter 上的 MDN：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

包括适用于旧浏览器的 polyfill。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-01-18T16:41:52.650

借助一点 ES6 的魔力，它可以相当简洁。请注意，我们需要检查两种方式，以防任一数组中存在唯一项。

```
const arr1 = [1, 2, 3, 4, 5];
const arr2 = [1, 3, 8];

let unique1 = arr1.filter((o) => arr2.indexOf(o) === -1);
let unique2 = arr2.filter((o) => arr1.indexOf(o) === -1);

const unique = unique1.concat(unique2);

console.log(unique);
// >> [2, 4, 5, 8] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-09T21:21:26.847

```
var unique = [];
for(var i = 0; i < array1.length; i++){
    var found = false;

    for(var j = 0; j < array2.length; j++){ // j < is missed;
     if(array1[i] == array2[j]){
      found = true;
      break; 
    }
   }
   if(found == false){
   unique.push(array1[i]);
  }
} 
```

**更新** 原始帖子工作但不是很快，这个实现要快得多，这个例子只使用一个数组，但在函数中你可以很容易地传递任何额外的数组来组合。

仅进行了简单的错误检查，并且应该进行更多检查，自行决定使用，仅作为工作示例。

```
function Unique(array) {
var tmp = [];
var result = [];

if (array !== undefined /* any additional error checking */ ) {
  for (var i = 0; i < array.length; i++) {
    var val = array[i];

    if (tmp[val] === undefined) {
       tmp[val] = true;
       result.push(val);
     }

    }
  }

  return result;
}

var unique = Unique([1, 2, 2, 6, 8, 5, 6, 8]); 
```

此外，这可以实现为 Array 对象的原型，将签名更改为

```
Array.prototype.Unique = function() {
    var array = this;
    ...
} 
```

并且可以这样调用：

```
var unique = [1, 2, 2, 6, 8, 5, 6, 8].Unique(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T21:11:50.170

像这样的东西

```
var array1 = ['12','1','10','19','100'];
var array2 = ['12','10','19'];
var o = {};
for(var i in array1) {
    o[i] = 1;
}
for(var i in array2) {
    o[i] = 0;
}
var array3 = [];
for(var i in o) {
    if(o[i] == 1) {
        array3.push(i);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-21T12:54:28.343

```
var array1 = ['12','1','10','19','100'];
var array2 = ['12','10','19'];

var newArr,temp,temp1;

    temp=array1.filter(function(el) 
              {
                return arr2.indexOf(el) == -1; 

              });

    temp1=array2.filter(function(el) 
              {
                return arr1.indexOf(el) == -1; 

              });

  newArr=temp.concat(temp1);

  return newArr;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T21:19:37.070

与上面类似，但可以使用两个以上的数组

```
var array1 = ['12','1','10','19','100'];
var array2 = ['12','10','19'];
var i = 0;
var hist = {};
var array3 = [];

buildhist(array1);
buildhist(array2);

for (i in hist) {
    if (hist[i] === 1) {
        array3.push(i);
    }
}

console.log(array3);

function buildhist(arr) {
    var i;
    for (i = arr.length - 1; i >= 0; i--) {
        if (hist[arr[i]] === undefined) {
            hist[arr[i]] = 0;
        }
        hist[arr[i]]++;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-04T16:28:17.567

```
var array3 = array1.concat(array2);

array3 = array3.sort(function(a, b) { return a > b; });
array3 = array3.filter(function(num, index) { return num !== array3[index + 1]; }); 
```

`array3`将只有唯一的值

这也可以在两个非常便宜的循环中完成工作，应该注意 sort() 和 filter() 是 ECMA5 函数，在旧浏览器中不受支持，而且我通常使用像下划线这样的库，所以我没有重写我从事的每个项目的这些功能，下划线都有一个 .unique() 方法，显然代码更少，更清楚地说明了操作的意图

# php - 字符串编码/解码 (PHP-Android)

> ID：15912541
> 
> 赞同：1
> 
> 时间：2013-04-09T21:06:30.280
> 
> 标签：php, android, encoding, decoding

在我的 Android 应用程序中，我使用这种方法：

```
URLDecoder.decode(this.name,"UTF-8") 
```

它解码从我的服务器端发送的名称，在 PHP 中，我使用：

```
urlencode($name); 
```

显然，这是行不通的。我希望名字以民族字符显示。你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:08:46.573

在服务器端尝试：

```
urlencode(utf8_encode($name)); 
```

# assembly - 在汇编中写入 .long

> ID：15912549
> 
> 赞同：1
> 
> 时间：2013-04-09T21:07:05.407
> 
> 标签：assembly, x86, att, mov

我在写入分配的内存时遇到问题。这是代码。

```
total: .long 1       # my memory

movl total, %eax     # I believe I'm copying address of total into eax
movl $53, %esi       # set some value in esi
movl (%esi), %eax    # and put this value into total 
```

为什么它不起作用？它给出：“Naruszenie ochrony pamięci”（核心转储）这是波兰语，意思是内存访问违规。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:09:34.067

首先，在 AT&T 语法中，将标签的地址存储到寄存器中，而不是

```
movl total, %eax 
```

在 Intel 语法中反汇编为：

```
8b042500000000   mov eax, [0x0] 
```

你需要使用：

```
movl $total, %eax 
```

它像这样反汇编：

```
b800000000       mov eax, 0x0 
```

从这个意义上说，当使用 AT&T 语法时，必须非常小心以避免错误。

然后，如果你修复了上述问题，你仍然需要修复最后一条指令的括号，正如 Seva 和 harold 所提到的。它应该是这样的：

```
movl %esi, (%eax) 
```

该代码会导致分段错误，因为它访问您无权访问的内存区域。在受保护模式下，您无法访问所需的任何内存地址，您需要对该内存区域具有读/写/执行权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:09:36.947

用。。。来代替

```
movl %esi, (%eax) 
```

# jquery - 选中复选框时提交第二个表单

> ID：15912552
> 
> 赞同：0
> 
> 时间：2013-04-09T21:07:13.517
> 
> 标签：jquery, forms, checkbox

我正在设置一个潜在客户生成表单，该表单要求发送电子邮件，然后将其与一系列隐藏字段一起提交，以使该人订阅时事通讯。我想要做的是添加第二个表单，它将为不同的时事通讯提交一组不同的隐藏字段，但没有单独的提交按钮。

这个想法是，当用户提供他们的电子邮件时，只要他们不取消选中此复选框，他们的信息就会提交到两个表单。我怎么能这样做呢？示例 HTML：

```
 <form action="http://process.signupapp.com/" method="post" name="SimpleSignUp1">

         <input type="text" id="email" name="emailAddress"/>
         <input type="submit" name="submit" value="submit" id="signup">

                <input name="sourceId" type="hidden" value="code123" />
                <input name="listCode" type="hidden" value="GGGG" />              
                <input name="email_page" type="hidden" value="lettername" />
                <input name="email_subject" type="hidden" value="Welcome Message" />

        </form>

        <form action="http://process.signupapp.com/" method="post" name="SimpleSignUp">

                <input name="agree" type="checkbox" value="agree_terms" checked/>
                <label for="agree">Yes, I would also like to receive the FREE cool      newsletter</label>

<input type="submit" value="submit" />

<input name="sourceId" type="hidden" value="code2345" />
<input name="listCode" type="hidden" value="DDDD" />
<input name="email_page" type="hidden" value="anothername" />
<input name="email_subject" type="hidden" value="Welcome again" />

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:20:48.677

您可以在第一个表单的提交过程中调用第二个表单的提交事件。（猜测html结构）

```
$('#form1').submit(function() {
    if(! $(this).find('#checkbox').is(':checked')) {
        $('#form2').submit(); //Will want to make this an ajax call
    }
}

$('#form2').submit(function() {
    $.ajax({
        data: $('#form2').serialize(), //Or specify yourself
        url: $('#form2').attr('action'),
        type: 'POST',
    });
    return false; //Don't want to redirect in the middle of both submissions
} 
```

# java - RMI 多个客户端 - 每个客户端都有一个服务器对象

> ID：15912558
> 
> 赞同：2
> 
> 时间：2013-04-09T21:07:44.323
> 
> 标签：java, rmi

我正在使用 RMI 编写密码系统的原型。

我有一个问题，因为当我启动两个客户端时，它们从 OneTimePad 类的服务器中的一个对象得到响应。

所以客户端 A 接收到为客户端 b 保留的密钥，由于特定的算法，这种情况不可能发生。

服务器仅向客户端发送 E 和 N 变量（如在 RSA 中），因此我无法序列化 OneTimePad 对象并通过网络发送它（因为其中包含所有密钥）。

如何为每个客户制作一个 OneTimePad 类的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:55:23.710

我在 2001 年的书中将其称为远程会话模式。Registry 中的远程对象是一种只导出一个`login()`方法的登录服务器。该`login()`方法如果成功，则每次调用都会返回一个新的远程对象，该对象基本上是每个客户端的远程会话对象。这个会话对象可以导出一个`logout()`方法，该方法自己取消导出，并且它还可以实现`Unreferenced,`该`unreferenced()`方法也取消导出自己（或者您可以依赖 DGC 无论如何都可以：使用`Unreferenced`给您一个记录它的机会）。这个远程会话对象导出登录的客户端应该有权访问的所有远程方法，并且因为它是每个客户端的，所以它可以保存客户端状态，因此它是一个会话。

```
public interface RemoteLogin extends Remote
{
    RemoteSession login() throws RemoteException;
}

public interface RemoteSession extends Remote
{
    void logout() throws RemoteException;
    void myMethod(...) throws RemoteException; // whatever you need
}

public class RemoteLoginImpl extends UnicastRemoteObject implements RemoteLogin
{
  // ...
  public RemoteSession login()
  {
    // ...
    return new RemoteSessionImpl(); // whatever arguments you need
  }
}

public class RemoteSessionImpl extends UnicastRemoteObject implements RemoteSession, Unreferenced
{
  // ...
} 
```

# extjs - 为什么 getUpdatedRecords() 不返回 Ext JS 属性网格中已修改记录的列表？

> ID：15912559
> 
> 赞同：1
> 
> 时间：2013-04-09T21:07:52.207
> 
> 标签：extjs, extjs4

请试试[这个例子](http://jsfiddle.net/pL5Df/)。

打开控制台，运行 jsFiddle，更改属性值，然后单击“将状态写入控制台”。

为什么商店仍然报告零更新记录？它知道该属性的新值。

这是 JsFiddle 中的 Ext JS 4.2 代码：

```
Ext.onReady(function() {    

Ext.define('KitchenSink.view.grid.PropertyGrid', {
    extend: 'Ext.container.Container',

    requires: [
        'Ext.button.Button',
        'Ext.grid.property.*',
        'Ext.layout.container.VBox',
        'Ext.layout.container.HBox'
    ],
    xtype: 'property-grid',

    height: 275,
    width: 300,
    layout: {
        type: 'vbox',
        align: 'stretch'
    },

    initComponent: function(){
        Ext.apply(this, {
            items: [{
                xtype: 'container',
                layout: 'hbox',
                margin: '0 0 10 0',
                defaultType: 'button',
                items: [{
                    text: 'Write state to console',
                    margin: '0 0 0 10',
                    scope: this,
                    handler: this.onWriteStateClick
                }]
            }, {
                xtype: 'propertygrid',
                source: {
                    weight: 0.01,
                    distance: 1
                }
            }]
        });
        this.callParent();
    },

    onWriteStateClick: function(){
        var grid = this.down('propertygrid');

        var store = grid.getStore();
        console.log("Number of new records: " + store.getNewRecords().length);
        console.log("Number of updated records: " + store.getUpdatedRecords().length);
        console.log("Number of deleted records: " + store.getRemovedRecords().length);

        store.each(function (rec) {
            console.log("store says --> key: " + rec.get("name") + ", value: " + rec.get("value"));
        });

        //var source = grid.getSource();
        //Object.keys(source).forEach(function(key) {
        //    console.log("source says --> key: " + key + ", value: " + source[key]);
        //});
    },

});

Ext.create('KitchenSink.view.grid.PropertyGrid', { renderTo: Ext.getBody() });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:54:43.870

简短的回答是`property-grid`使用内存代理，它不跟踪修改的记录。

长答案是新的/删除的/更新的跟踪仅针对服务器代理实现，或者更具体地说，针对持久化到服务器的字段。客户端代理，如内存代理，不需要这个，因为它从不同步到服务器。

对此的更深入的解释是在这段代码中，来自[模型的`set`方法](http://docs.sencha.com/ext-js/4-1/source/Model.html#Ext-data-Model-method-set)：

```
if (field && field.persist) {
    if (modified.hasOwnProperty(name)) {
        if (me.isEqual(modified[name], value)) {
            // The original value in me.modified equals the new value, so
            // the field is no longer modified:
            delete modified[name];

            // We might have removed the last modified field, so check to
            // see if there are any modified fields remaining and correct
            // me.dirty:
            me.dirty = false;
            for (key in modified) {
                if (modified.hasOwnProperty(key)){
                    me.dirty = true;
                    break;
                }
            }
        }
    } else {
        me.dirty = true;
        modified[name] = currentValue;
    }
} 
```

您可以看到，如果该字段没有被持久化（就像它永远不会使用客户端代理），它不会获得`dirty`标志，并且没有它，存储将不会收集到记录已更改。

即使您为模型字段定义持久化，同步机制也需要一个 id 字段。

总而言之 - 您无法通过客户端代理获得这一点，例如您的示例中在幕后使用的代理。

# ruby-on-rails - 让 catcomplete 在 Rails 中工作

> ID：15912560
> 
> 赞同：0
> 
> 时间：2013-04-09T21:07:58.877
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试在 jquery 中实现自动完成的类别版本。

这是我需要重新创建并传递给我的视图的数组类型：

```
var data = [
  { label: "anders", category: "" },
  { label: "andreas", category: "" },
  { label: "antal", category: "" },
  { label: "annhhx10", category: "Products" },
  { label: "annk K12", category: "Products" },
  { label: "annttop C13", category: "Products" },
  { label: "anders andersson", category: "People" },
  { label: "andreas andersson", category: "People" },
  { label: "andreas johnson", category: "People" }
]; 
```

目前，我的控制器从数据库中获取所有食物并创建了一个新数组，该数组仅包含原始数组中对象的一个​​属性。

我需要在这个新创建的数组中获取多个属性...

这是我的控制器中的样子：

```
 @foods = Food.order(:name).where("name like ?", "%#{params[:term]}%")
  render json: @foods.map(&:name) 
```

该代码仅发送每个食物对象的名称属性。我需要它来发送名称和类型，以使 jquerys catcomplete 工作。

我怎样才能做到这一点？

我尝试在 irb 中使用以下一些内容来查看结果（没有@ obv）：

```
@foods.map(&:name) is the same as @foods.map do {|t| t.name}

@foods.map do |t|
    t.name
    t.type
end

@foods.collect do |t|

@foods.each_slice(2).map {|name, type| Array.new(name, type)}

@foods.each_slice(2).map {|n, t| n.name, t.type }

@foods.map do |t|
   @foods.map do |i|
     i.name
   end
   @foods.map do |p|
     p.name
   end
end 
```

可能还有十几个其他变体......

这是我传递数组的方式：

看法：

```
 <%= text_field_tag 'search_food_text_field', nil, data: { catcomplete_source: search_foods_path } %> 
```

Foods_Controller

```
def search
  @foods = Food.order(:name).where("name like ?", "%#{params[:term]}%")
  render json: @foods.map do |food|
    {name: food.name, type: food.type }
  end
end 
```

食品.js

```
$(function() {

  $( "#search_food_text_field" ).catcomplete({
    source: $("#search_food_text_field").data('catcomplete-source')
  });

}); 
```

我很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:42:30.783

我认为

```
@foods.map do |food|
  { name: food.name, type: food.type }
end 
```

是你想要的。这会将数组的每个值映射到一个散列，因此您最终会得到一个散列数组，每个散列都包含名称和类型。

```
def search
  @foods = Food.order(:name).where("name like ?", "%#{params[:term]}%").all
  @foods_catcomplete = @foods.map do |food|
    { name: food.name, type: food.type }
  end
  render json: @foods_catcomplete
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:26:15.370

如果您渲染为 json，它将只需要一个 json 对象，而不是数组。采用：

```
render text: @foods.map{|t| {name: t.name, type: t.type}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:24:42.387

感谢 Logan Serman 和 Eru 的帮助，我能够解决这个问题。

Jquery 正在寻找“标签”和“类型”，而我提供了“名称”和“类型”，这就是文本字段仅显示类型的原因。

这让它发挥作用。

```
 def search
   @foods = Food.order(:name).where("name like ?", "%#{params[:term]}%")
   render json: @foods.map{|t| {type: t.type, label: t.name}}
 end 
```

如果有人想知道......这就是 json 输出的样子：

[{"type":"MealFood","label":"样品食品"}]

# c - 如何通过套接字发送/接收二进制数据？

> ID：15912563
> 
> 赞同：0
> 
> 时间：2013-04-09T21:08:13.747
> 
> 标签：c, linux, ftp, encode, ftp-server

我必须编写一个 FTP 服务器，但我对如何传输数据有疑问。

我在 linux 上使用**ftp**命令来测试它，我目前正在处理`LIST`，它发送工作目录中的文件/目录列表。一切正常（ftp 可以很好地打印文件列表），除了**ftp**打印以下警告：

```
WARNING! 5 bare linefeeds received in ASCII mode
File may not have transferred correctly. 
```

我想删除该警告，我认为**ftp**需要二进制数据，但我不知道如何通过套接字发送这样的数据，我目前正在做最基本的发送`ls`结果的方法：

```
dup2(dst_channel, 1);
execlp("ls", "ls", "-l", NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:33:52.293

FTP 协议规定该`LIST`命令应以 NETASCII 格式发送其结果，这意味着换行符表示为 CRLF。但是标准的 Linux 程序只输出换行符的 LF。

您需要运行`ls`命令并将其输出连接到管道。您的服务器从管道中读取数据，将任何`\n`字符替换为 `\r\n'，然后将其写入套接字。

在传输实际文件时，您需要做类似的事情，除非客户端请求二进制模式。

# php - 从magento中的控制器加载块，缓存问题？

> ID：15912564
> 
> 赞同：0
> 
> 时间：2013-04-09T21:08:20.327
> 
> 标签：php, magento, controller, block

我的控制器中有两种方法，我调用它来获取各种 ajax 更新的 html。

```
 protected function _getDemoShippingMethodsHtml()
    {
        $layout = $this->getLayout();
        $update = $layout->getUpdate();
        $update->load('checkout_onepage_demoshippingmethod');
        $layout->generateXml();
        $layout->generateBlocks();
        $output = $layout->getOutput();

        return $output;
    }

    protected function _getSelectedDealerHtml()
    {
        $layout = $this->getLayout();
        $update = $layout->getUpdate();
        $update->load('checkout_onepage_selecteddealer');
        $layout->generateXml();
        $layout->generateBlocks();
        $output = $layout->getOutput();

        return $output;
    } 
```

在向我的控制器发出一个请求期间，如果我只调用其中一种方法，它会按预期加载块。问题出现在我尝试在一个请求期间调用这两个函数的地方。调用哪个方法首先输出预期的 html，然后第二个方法调用输出与第一个完全相同的 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:31:51.030

在您使用的块类中创建一个空的伪构造函数受保护的函数 _construct() {}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T01:35:27.247

尝试以编程方式使用干净缓存 Mage::app()->cleanCache();

[清除 Magento 缓存](https://stackoverflow.com/questions/8701456/clear-magento-cache)

# php - 在 PHP 中验证 XML 并生成“人类可读”的错误消息？

> ID：15912566
> 
> 赞同：0
> 
> 时间：2013-04-09T21:08:24.020
> 
> 标签：php, xml, validation, xsd

我正在尝试构建一个工具来验证特定的 XML 并输出人类可读的结果。我现有的 PHP 代码使用 DOMDocument::schemaValidate 针对 .xsd 文件验证 XML，但错误消息不是很友好。

例如，假设我的 XML 看起来像下面的示例，并且纬度应该是小数：

```
<Person>
  <FirstName>Bret</FirstName>
  <Location>
    <Address>123 Test Ave.</Address>
    <Latitude></Latitude>
    <Longitude>30.139338</Longitude>
  </Location>
</Person> 
```

我目前收到的错误消息是：

> Document::schemaValidate(): Element 'Latitude': '' 不是原子类型 'xs:decimal' 的有效值。

我想让它说：

> XML 第 5 行中的错误：“Bret”人的地址中的纬度为空。您必须提供有效的纬度，我们才能处理此 XML。

之前也有人问过类似的问题：

*   [XSD 验证失败时的自定义错误消息](https://stackoverflow.com/questions/12981444/custom-error-messages-when-xsd-validation-fails)
*   [XSD 验证错误人类可读](https://stackoverflow.com/questions/2768471/xsd-validation-error-human-readable)

但是，如果 DOMDocument::schemaValidate 不是适合这项工作的工具，我愿意使用 PHP 或 Perl 编写我自己的蛮力验证代码。请注意，我的错误消息需要引用存储在父元素中的信息，例如我的示例中的“FirstName”字段。

我的问题是：创建此验证工具的好方法是什么？是否有任何现有的代码库或教程可以为我指明正确的方向？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:04:36.247

正如您可以想象的那样，这是特定于每个 XML 文件和格式的。

我将开始处理的第一个问题是确定与验证错误相关的确切元素。例如，您的错误是

```
/Person/Location/Latitude 
```

这将是在错误消息中告知特定人员（元素）有问题的先决条件。

第二个问题是记录结构的主要组成部分。

例如，众所周知*Latitude*是*Location*的一部分，它是*Person*的一部分。您需要在某个地方管理这些知识以提供更好的错误消息。

我也将两者都做，例如输出更友好的错误消息以及更技术性的错误消息。还要注意你不能总是解决你的问题。例如，如果在输入中为*Person*提供了错误的标记名，例如*person*，您永远无法将其解决为对人类友好的错误消息，因为这超出了您可以添加的知识范围。

# c++ - 使用“常规”变量来同步线程

> ID：15912568
> 
> 赞同：1
> 
> 时间：2013-04-09T21:08:33.923
> 
> 标签：c++, multithreading, synchronization

如果我只有两个线程，并且我希望其中一个等待另一个达到某个点，那么执行以下操作是否安全：

```
bool wait = true;

//Thread 1:
while(wait) ;
wait = true; //re-arm the signal

//Thread 2:
/* Preform here the code that needs to complete before Thread 1 continues */
wait = false; 
```

基本上，如果一个线程只写，另一个只读，会不会有问题？我假设单个的读取或写入`bool`是原子的，即使不是，我也看不出它在这里有何不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:21:22.150

不，它不能工作。如果您`std::atomic<bool>`改用它，它将起作用。

C++ 中的原子解决了三个问题。第一，在存储或读取需要多个总线周期的值的过程中发生线程切换的可能性；这被称为“撕裂”。其次，两个线程可能会在两个具有两个独立缓存的独立处理器上运行，并且一个线程不会看到另一个线程所做的更改。这称为“缓存一致性”。第三，编译器可能会移动代码，因为顺序似乎无关紧要。

即使一个`bool`值可能只需要一个总线周期来读取或写入，它也不能解决其他两个问题。

没有可靠的捷径。使用适当的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:47:41.063

虽然您可以使用 a 获得保证`std::atomic<bool>`，但我认为您可以使用简单的 使其工作`volatile`，因为：

*   编译器无法对`volatile`值的指令重新排序
*   其中一个线程总是写入变量，因此指令实际上是原子的
*   另一个线程不需要原子地进行读写

所以不会有任何形式的撕裂。但是，缓存一致性问题仍然存在，这取决于硬件或操作系统。

# c# - IComparable 魔术 - 为什么它是一个有效的陈述？

> ID：15912569
> 
> 赞同：12
> 
> 时间：2013-04-09T21:08:34.467
> 
> 标签：c#, .net

我不明白为什么它的工作...

```
class Program
{
    static void Main(string[] args)
    {
        IComparable.Equals(12, 3);
    }
} 
```

IL代码：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       21 (0x15)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldc.i4.s   12
  IL_0003:  box        [mscorlib]System.Int32
  IL_0008:  ldc.i4.3
  IL_0009:  box        [mscorlib]System.Int32
  IL_000e:  call       bool [mscorlib]System.Object::Equals(object,
                                                        object)
  IL_0013:  pop
  IL_0014:  ret
} // end of method Program::Main 
```

它编译为 bool Object.Equals(Object,Object)，但为什么呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T21:25:09.903

> 它编译为`bool Object.Equals(Object,Object)`，但为什么呢？

“为什么？” 问题不精确且难以回答，所以我会回答“什么？” 问题。

> C# 规范的哪一部分证明了这种奇怪行为的合法性？

C# 规范的第 7.4 节说，当您对表单进行成员查找时`T.N`

> ...该集合由 T 中名为 N 的所有可访问成员组成，包括继承的成员**和对象中名为 N 的可访问成员**... [强调添加]

`object.Equals`是一个名为`Equals`in的可访问成员`object`，因此它是一个候选者。

# backbone.js - 主干js嵌套模型和集合的最佳实践

> ID：15912575
> 
> 赞同：1
> 
> 时间：2013-04-09T21:08:45.410
> 
> 标签：backbone.js

我是骨干新手，对使用模型和集合的正确方法感到困惑。

我有两个嵌套模型`Parent`并且`child`是一对多的关系。正如backbonejs所建议的，我有以下代码：

```
var Child = Backbone.Model.extend({});
Child.Collection = Backbone.Collection.extend({});

var Parent = Backbone.Model.extend({
  initialize: function() {
    this.children = new Child.Collection;
  }
});

var ParentView = Backbone.View.extend({
  var parent = this.model
  this.children = parent.children;
}); 
```

这工作正常，直到我开始需要通过“服务器 ID”编辑单个孩子。所以我最终得到了三种解决方案，但它们都不适合我：

1、通过向服务器请求新实例来获取现有实例：

```
var child = getFromServerById(id);
var parent = parentCollection.get(child.get('parentId'));
child = parent.children.get(child.id); 
```

2，必须循环遍历所有父级（当他们的祖先不止一个时，这变得非常糟糕）：

```
var child;
var parent = parentCollection.find(function(parent){ 
  child = parent.children.get(childId);
  return child;
}); 
```

3、为每个模型创建一个全局缓存。（这是我目前正在使用的，但每次添加/删除对象时都需要保持 globalCache）

```
var child = globalCache['child'].get(id); 
```

所以我想知道是否有一些标准模式可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:49:48.183

管理嵌套模型的关系。

[https://github.com/PaulUithol/Backbone-relational](https://github.com/PaulUithol/Backbone-relational)

# android - 每 15 分钟调用一次方法

> ID：15912580
> 
> 赞同：-10
> 
> 时间：2013-04-09T21:08:57.143
> 
> 标签：android

我将使用以下代码获取 android 设备的纬度和经度，但我希望每 15 分钟更新一次纬度和经度。我怎样才能得到这个？

```
 package com.position.position;

    import java.io.BufferedReader;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Timer;
    import java.util.TimerTask;

    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.NameValuePair;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.entity.UrlEncodedFormEntity;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.message.BasicNameValuePair;

    import android.app.Activity;
    import android.content.Context;
    import android.location.Location;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.os.Handler;
    import android.os.Looper;
    import android.os.Message;
    import android.util.Log;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Toast;

    public class Main extends Activity {
        StringBuilder stringBuilderlatitude = new StringBuilder();
         StringBuilder stringBuilderlongitude = new StringBuilder();
         public EditText NombreSeconde;
         public EditText NombreMetre;
         public float ValueNM;
         public int i=0;
        LocationManager locationManager;
        private String locationProvider = LocationManager.GPS_PROVIDER;
        float numberMetre;
        @Override
        protected void onCreate(Bundle savedInstanceState) {        
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            Button BtnValider = (Button)findViewById(R.id.BtnValider);

            BtnValider.setOnClickListener(new OnClickListener() {

                @Override

                public void onClick(View v) {

                     NombreSeconde = (EditText) findViewById(R.id.ValeurSeconde);
                     EditText NombreMetreEditText = (EditText) findViewById(R.id.ValeurMetre);
                    numberMetre = Float.valueOf(NombreMetreEditText.getText().toString());
Toast.makeText(getApplicationContext(), "Paramètres enregistrés", Toast.LENGTH_SHORT).show();

                }

                });

            /////////////////////////////////////
            String locationContext = Context.LOCATION_SERVICE;
            locationManager = (LocationManager) getSystemService(locationContext);
            //majCoordonnes(); 
```

**locationManager.requestLocationUpdates(locationProvider,100,100, new MajListener());**

```
 }
        ///////////////////////////

        //////////////////////////
        class MajListener implements android.location.LocationListener { 
            public void onLocationChanged(Location location) { 
                stringBuilderlatitude= new StringBuilder();
                stringBuilderlongitude=new StringBuilder();

              majCoordonnes();

            }
            public void onProviderDisabled(String provider){
            }
            public void onProviderEnabled(String provider){
            }
            public void onStatusChanged(String provider, int status, Bundle extras){
            }

         };

        public void majCoordonnes() {
            Toast.makeText(getApplicationContext(), "Mise à jour des coordonnées",200000).show();

            StringBuilder stringBuilder = new StringBuilder();
            stringBuilder.append("Fournisseurs :");
            List<String> providers = locationManager.getProviders(true); 
            // Pour chaque fournisseur ...
            for (String provider : providers) {
               stringBuilder.append("\n");
               stringBuilder.append(provider);
               stringBuilder.append(" : ");
               // ... on affiche la position.
               Location location = locationManager.getLastKnownLocation(provider);
               String locationContext = Context.LOCATION_SERVICE;
               locationManager = (LocationManager) getSystemService(locationContext);
               if (location != null) { 
                  double latitude = location.getLatitude();
                  double longitude = location.getLongitude();
                  stringBuilder.append(latitude);
                  stringBuilder.append(", ");
                  stringBuilder.append(longitude);
               } else {
                  stringBuilder.append("Non déterminée");
               }
            }

           // Log.i("MaPosition", stringBuilder.toString()); 
            TextView t=new TextView(this); 
            t=(TextView)findViewById(R.id.TextResultat); 
            t.setText(stringBuilder.toString());

            ///////////////////////////////////// partie ajoute//////////////////////////
            LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
            Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            double longitude = location.getLongitude();
            double latitude = location.getLatitude();

            stringBuilderlatitude.append(latitude);
            stringBuilderlongitude.append(longitude);

            String xlatitude=stringBuilderlatitude.toString();
            String xLongitude=stringBuilderlongitude.toString();

            Log.i("MaPosition","x1="+xlatitude +"x2="+ xLongitude);

            //Log.i("MaPosition", " apres append"+stringBuilderlatitude.toString()); 
            String y=stringBuilderlongitude.toString();
            stringBuilderlongitude.append(longitude);
             String result = "";
             ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            //nameValuePairs.add(new BasicNameValuePair("year","1980"));        
            try{
                Log.i("MaPosition", "Envoi les coordonnes au serveur"); 
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://www.kbma.site.com/insertGPS.php?latitude="+xlatitude.toString()+"&longitude="+xLongitude);
                   Toast.makeText(getApplicationContext(), "Coordonnes envoyées au serveur kbma.site.com",200000).show();
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    InputStream is = entity.getContent();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                    }
                    is.close();

                    result=sb.toString();

            }
            catch(Exception e){
                    Log.i("log_tag", "Error in http connection "+e.toString());
            }

         }
        /////////////////////////

        /////////////////

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:17:17.220

您已经从系统请求位置更新，只需将频率时间从 100 毫秒增加到 15 分钟。更改此行：

```
locationManager.requestLocationUpdates(locationProvider,100,100, new MajListener()); 
```

对此：

```
locationManager.requestLocationUpdates(locationProvider,(15 * 60 * 1000),100, new MajListener()); 
```

另请注意，由于您在 Activity 内部，因此当用户导航离开 Activity 时，您将停止获取回调。

如果您希望它在后台运行（因此当用户离开时不会关闭），您需要将其放入 Service 而不是 Activity

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:15:35.070

此代码每 5 秒（15 * 60 * 1000 毫秒）或 500 米更新一次位置：

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, (15 * 60 * 1000), 500, locationListener);
LocationListener locationListener = new MyLocationListener();

// ...

public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        currentLocation = new GeoPoint(location);
        // ...
    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

# excel - 运行时错误 1004“范围类方法失败”

> ID：15912598
> 
> 赞同：2
> 
> 时间：2013-04-09T21:10:20.503
> 
> 标签：excel, vba, paste

我一直遇到一个错误（发生这种错误时没有模式或可感知的原因）。当我尝试执行 pastespecial（公式或值）时会发生错误。鉴于数组中的行数是可变的（1到~100），我很好奇是否有另一种方法可以在VBA中粘贴值或公式。我附上了下面的代码片段。

'长度和选择区域都定义为字符串

```
Range("P1").Select 
```

'长度是单元格中计算表格长度的公式

```
length = ActiveCell.Value
selectionarea = "B3:CM" + length
Range("B2:CM2").Select
Selection.Copy
Range(selectionarea).Select
Selection.PasteSpecial Paste:=xlPasteFormulas, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False
selectionarea = "C2:O" + length
Range(selectionarea).Select
Selection.Copy
Range("BL3").Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:36:16.293

尝试这样的事情

```
Dim rng As Range, Length

Length = Range("P1").Value

'EDIT use this for formulas
Range("B2:E" & Length).Formula = Range("B2:E2").Formula
'or this should also work
'Range("B2:E" & Length).FillDown

Set rng = Range("C2:O" & Length)
Range("BL3").Resize(rng.Rows.Count, rng.Columns.Count).Value = rng.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T06:24:54.510

错误：对象“_Worksheet”的“粘贴”方法失败 - 1004
解决方案：在将形状从一张纸复制到另一张纸之前，需要记住 Excel 中的问题。

1.  激活工作表（从您复制的位置）。
2.  从工作表中选择形状。
3.  从工作表中复制形状。
4.  粘贴到目标表的形状

示例：以前我的代码如下：

```
 Sheet1.Shapes(0).Copy
           Targetsheet.Paste 
```

我已经修改了以下内容：

```
 Sheet1.Activite
           Sheet1.Shapes(0).Select
           Sheet1.Shapes(0).Copy
           Targetsheet.Paste 
```

现在它工作正常。

# jquery - JavaScript：选择数据值在 X 和 Y 范围内的元素

> ID：15912599
> 
> 赞同：2
> 
> 时间：2013-04-09T21:10:21.967
> 
> 标签：jquery, jquery-selectors, calendar, jquery-data

我正在创建一个日历，并且需要能够通过确定是否存储有任何 unix 时间戳日期来选择（显示/隐藏）`div.event`谁`data-dates`（可能是字符串或数组，具体取决于事件出现的天数）它们位于代表当前所选月份的开始和结束的 unix 时间戳之间。例如：

现在是 2013 年 4 月，所以我希望只看到发生在 4 月的事件（`1364774400`[4 月 1 日，午夜] 和`1367366399`[4 月 30 日，23:59:59]）。

我有很多`event`div。它们看起来像这样：

```
<div class="event" data-dates="[1367539200, 1367625600]">...</div>
<div class="event" data-dates="[1364947200]">...</div> 
```

假设其中一个或多个时间戳落在 2013 年 4 月的某个时间。如何选择它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:24:21.127

尝试使用`filter`：

```
var rangeStart = 1364774400,
    rangeEnd   = 1367366399;

$('.event').filter(function() {
    return $(this).data('dates').some(function(date) {
        return date >= rangeStart && date < rangeEnd;
    });
})
.addClass('active'); 
```

[http://jsfiddle.net/HJ9Xj/1/](http://jsfiddle.net/HJ9Xj/1/)

*笔记。[某些](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/some)方法在 IE<9 中不可用，因此您可以填充它或使用简单的`for`循环来检查数据数组是否包含介于`start`和之间的任何值`end`。[演示 2](http://jsfiddle.net/HJ9Xj/2/)。*

# xcode - Xcode iOS 6 模态视图 shouldAutorotate 和supportedInterfaceOrientations 不起作用

> ID：15912605
> 
> 赞同：3
> 
> 时间：2013-04-09T21:10:38.540
> 
> 标签：xcode, view, ios6, orientation, modalviewcontroller

我在 appDelegate 类中编写了这部分代码来控制我的应用程序的方向。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    NSUInteger orientations = UIInterfaceOrientationMaskAll;

    if (self.window.rootViewController) {
        UIViewController* presented = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
        orientations = [presented supportedInterfaceOrientations];
    }
    return orientations;
} 
```

我使用此代码将我的方向锁定为纵向。

```
- (BOOL)shouldAutorotate
{
    return NO;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

这适用于由 NavigationViewController 推送的所有 ViewController，但不适用于模态呈现的 ViewController（我的模态视图似乎不会覆盖此代码）。

当 ViewController 由模态呈现时，代码示例不起作用。我的 ViewController（模态视图）仍然是纵向的。

```
- (BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

# google-chrome-app - 是否有 postMessage 与沙盒页面一起工作的简单示例？

> ID：15912614
> 
> 赞同：1
> 
> 时间：2013-04-09T21:11:39.353
> 
> 标签：google-chrome-app

查看此文档中的 postMessage 示例：http: [//developer.chrome.com/trunk/apps/app_external.html#postMessage](http://developer.chrome.com/trunk/apps/app_external.html#postMessage)

似乎表明沙盒页面将同步注册事件处理程序，否则它应该如何获得 postMessage 事件？

我想这与这里的错误有关：[https](https://code.google.com/p/chromium/issues/detail?id=154662) ://code.google.com/p/chromium/issues/detail?id= 154662 但是，您似乎不能使用窗口回调将 postMessage 发送到沙盒 iframe提到了一种解决方法，您可以在沙盒页面中使用包含 iframe 的页面。这里唯一的问题是仍然不清楚事件如何/何时触发以及它在哪里可见......

这个沙盒的东西似乎非常复杂，并且它周围的文档具有误导性和/或过时。这个例子有意义吗？是否可以在不先收到消息并记录 event.source 的情况下向后台页面发送消息？

如何在后台页面注册事件监听器以响应沙盒页面发回的消息？这里有很多问题，而我所拥有的只是一个破碎的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:46:15.653

github 上的 chrome-app-samples 上的示例更符合您的要求。这是添加事件侦听器以响应事件的沙盒页面：[https ://github.com/GoogleChrome/chrome-app-samples/blob/master/sandbox/sandbox.html](https://github.com/GoogleChrome/chrome-app-samples/blob/master/sandbox/sandbox.html)

这是使用的背景页面`postMessage`：[https ://github.com/GoogleChrome/chrome-app-samples/blob/master/sandbox/mainpage.js](https://github.com/GoogleChrome/chrome-app-samples/blob/master/sandbox/mainpage.js)

github 示例比文档中的示例丰富得多。[https://github.com/GoogleChrome/chrome-app-samples](https://github.com/GoogleChrome/chrome-app-samples)提供了您可能需要做的所有事情的示例。

# configuration - 如何加载 Pervasive 数据文件？

> ID：15912619
> 
> 赞同：1
> 
> 时间：2013-04-09T21:11:55.777
> 
> 标签：configuration, data-extraction, pervasive-sql

我需要将 Pervasive-SQL 7 的数据库文件中的数据提取为 CSV 格式。

我得到了一个 Zip 存档，其中包含一个应用程序可执行文件（可能是 VB6 开发的）和一个包含数据文件的文件夹，并且只告诉我该应用程序使用 Pervasive-SQL 7。

在不确定如何开始之前，我从未使用过 Pervasive-SQL。我已经下载了版本 7 客户端/服务器数据库引擎的副本并将其安装在 Windows XP 工作站上。但是我不确定如何从那里开始？如何浏览数据？

我需要从数据文件中提取数据吗？我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:30:20.713

首先，我真的建议下载更新版本的 PSQL。PSQL v11 可在[http://pervasivedb.com/psqlv11/Pages/Default.aspx](http://pervasivedb.com/psqlv11/Pages/Default.aspx)获得。PSQL v7 于 1998 年发布。PSQL v11 提供了多种用于导出数据的工具和方法。

其次，如果您有 DDF，您应该能够创建指向 DDF 和数据文件的 ODBC DSN。拥有 ODBC DSN 后，您几乎可以使用任何 ODBC 工具来导出数据。如果您使用 PSQL v11，您甚至可以从 Pervasive Control Center 导出为 CSV（尽管它可能被称为 SDF），方法是右键单击表，选择导出数据并按照向导进行操作。如果您想自动导出表或一次导出多个表，则需要另一种工具。那里有几个。

DDF 文件是一组描述数据文件的特殊文件。所需的最少文件是 FILE.DDF、FIELD.DDF 和 INDEX.DDF。如果您没有这些文件，则需要知道每个表/文件的记录布局。您可以使用 PSQL v11 中包含的 DDF Builder 为您的表构建 DDF。

# c - 优化后续调用整数除法和取模（余数）

> ID：15912621
> 
> 赞同：6
> 
> 时间：2013-04-09T21:12:12.620
> 
> 标签：c, optimization, compiler-construction, compiler-optimization

整数除法`/`和模`%`运算经常在编程中一起使用，有时甚至在相同的操作数和后续行中。例如，下面的 C 函数是一个简单的函数，它将`/`2 个数字的结果与它们的结果相加`%`，它就是这样做的：

```
int sum2digits(int x, int base) {
    int n, m;
    n = x / base;
    m = x % base;
    return n + m;
} 
```

据我所知，两者`/`和`%`都由相同的机器指令（在x86中）执行。比如说，如果您执行机器指令对两个数字和进行整数除法 (`div`或) ，然后 的值将存储在寄存器 EAX 中，余数存储在 EDX 中。 我想知道编译器是否利用了这种质量并查看了汇编代码。事实证明，使用 gcc 进行正常编译并不会对此进行优化： `idiv``a``b``a / b``a % b`

```
push   %rbp
mov    %rsp,%rbp
mov    %edi,-0x14(%rbp)
mov    %esi,-0x18(%rbp)
mov    -0x14(%rbp),%eax
mov    %eax,%edx
sar    $0x1f,%edx
idivl  -0x18(%rbp)
mov    %eax,-0x8(%rbp)
mov    -0x14(%rbp),%eax
mov    %eax,%edx
sar    $0x1f,%edx
idivl  -0x18(%rbp)
mov    %edx,-0x4(%rbp)
mov    -0x4(%rbp),%eax
mov    -0x8(%rbp),%edx
add    %edx,%eax
pop    %rbp
retq 
```

此汇编代码对 idivl 执行 2 次后续调用，但每次都从另一个寄存器读取结果（EAX 表示商，EDX 表示余数）。但是，编译时会`-O`改变图片：

```
mov    %edi,%eax
mov    %edi,%edx
sar    $0x1f,%edx
idiv   %esi
add    %edx,%eax
retq 
```

此代码`idiv`仅调用一次，并将其值用于两次计算。
为什么这种优化不是默认的？`div`连续调用两次有什么用？这种优化能以任何方式改变程序的行为吗？
**此外，也许更重要的**是，作为程序员，有没有办法手动提取这 2 个值（商和余数），以保证 CPU 只执行 1 个整数除法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T03:14:43.627

> 为什么这种优化不是默认的？

如果编译器和优化器是完美的并且调试器可以对代码进行逆向工程，那么优化将是一个普遍的默认设置。但是编译器并不总是生成正确的代码，优化器并不总是保留语义，调试器也不能总是弄清楚任何给定指令与优化程序的哪些部分相关。看起来您的编译器安装了默认选项，以确保绝对安全和调试简单。

> 有没有办法手动提取这两个值（商和余数）以保证 CPU 只执行 1 个整数除法？

如今，最好的方法正是您所做的：向编译器询问优化的代码。该`div`例程是从除法运算符的结果被定义为负数的实现和优化编译非常缓慢以至于识别这样的事情最好手动完成的日子的保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:55:12.207

为什么不直接使用 div？

[http://www.cplusplus.com/reference/cstdlib/div/](http://www.cplusplus.com/reference/cstdlib/div/)

我会说这是优化便携式解决方案的最佳机会？

致删除我答案的人：请不要删除此答案！如果必须投反对票，或者评论为什么它如此错误以至于您认为需要删除它。

OP 想了解使用 C 对整数除法和模（余数）的后续调用进行优化。

所以，如果你想在你的代码中达到最优，为什么不使用标准库调用，将优化的责任交给标准库实现者，他们可能对编译器的内部工作和本机机器的可用操作有更好的信息（即在 x86 上使用 div 汇编指令）。尤其是当函数完全符合 OP 试图做的事情时。

如果我在实际代码中看到一个除法后跟一个 mod，我的直接问题将是“你为什么不使用标准库？”，而不是“嗯，我想知道编译器如何优化我的高级代码？ ”。

它还回答了问题的一部分：此外，也许更重要的是，作为程序员，有没有办法手动提取这 2 个值（商和余数），以保证 CPU 只执行 1 个整数除法？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T21:39:59.683

你总是可以实现自己的部门：

```
#include <stdlib.h>
#include <stdio.h>

void mydiv(int dividend, int divisor, int* quotient, int* remainder)
{
  *quotient = dividend / divisor;
  *remainder = dividend - *quotient * divisor;
}

int testData[][2] =
{
  { +5, +3 },
  { +5, -3 },
  { -5, +3 },
  { -5, -3 },
};

int main(void)
{
  unsigned i;
  for (i = 0; i < sizeof(testData)/sizeof(testData[0]); i++)
  {
    div_t res1, res2;
    res1 = div(testData[i][0], testData[i][1]);
    mydiv(testData[i][0], testData[i][1], &res2.quot, &res2.rem);
    printf("%+d/%+d = %+d:%+d %c= %+d:%+d\n",
           testData[i][0], testData[i][1],
           res1.quot, res1.rem,
           "!="[res1.quot == res2.quot && res1.rem == res2.rem],
           res2.quot, res2.rem);
  }
  return 0;
} 
```

输出（[ideone](http://ideone.com/GsnMq8)）：

```
+5/+3 = +1:+2 == +1:+2
+5/-3 = -1:+2 == -1:+2
-5/+3 = -1:-2 == -1:-2
-5/-3 = +1:-2 == +1:-2 
```

这确实有一个部门。但是，看起来 gcc 不够聪明，无法消除乘法，因此您各有一个。

# php - php数字格式

> ID：15912623
> 
> 赞同：0
> 
> 时间：2013-04-09T21:12:23.480
> 
> 标签：php, rounding, number-formatting

我有`$mynumber`一个回显 1 到 100 之间的数字的变量，在输出上，我需要将此数字除以 2，将其四舍五入，并在数字之间放置一个点，如下所示：

```
<?php echo $mynumber ?>

//output e.g. 55 
```

我需要输出 2.7 ( 55/2 -> 27.5 -> 27 -> 2.7 )

我无法正确格式化它，你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:17:36.857

我想这就是你要找的吗？这将向下舍入所有值。

`$mynumber = (floor($mynumber/2) /10);`

如果要根据值本身向上或向下舍入值，请使用以下命令：

`$mynumber = (round($mynumber/2) /10);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:16:23.923

如果`$mynumber`在 1-100 之间，这应该有效：

```
<?php echo floor($mynumber/2)/10; ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T21:21:15.590

```
<?php
$mynumber = 55;
echo (intval($mynumber/2))/10 . "\n";
?> 
```

我假设您并不是真的想要四舍五入而是截断，因为您写道 27.5 变为 27，而不是 28。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T21:50:47.687

```
<?php
    $number = 55;

    $mynumber = floor($number/2);
    $chars = strlen($mynumber);
    $pos = substr($mynumber, $chars-1);
    $pos2 = substr($mynumber, $pos)+1;  
    $newNumber = (float)(str_replace($pos, '.', $mynumber).substr($mynumber, $pos2));
    echo $newNumber;
?> 
```

# servicestack - 使用 ServiceStack 自定义服务挂钩

> ID：15912626
> 
> 赞同：2
> 
> 时间：2013-04-09T21:12:30.437
> 
> 标签：servicestack

我正在尝试实现自定义服务挂钩，这就是我到目前为止所做的......

全球.asax

```
public override IServiceRunner<TRequest> CreateServiceRunner<TRequest>(ActionContext actionContext)
{           
    return new MyServiceRunner<TRequest>(this, actionContext);
} 
```

MyServiceRunner.cs

```
public class MyServiceRunner<T> : ServiceRunner<T> {
    public override void OnBeforeExecute(IRequestContext requestContext, TRequest request) {
      // Called just before any Action is executed
    }

    public override object OnAfterExecute(IRequestContext requestContext, object response) {
      // Called just after any Action is executed, you can modify the response returned here as well
    }

    public override object HandleException(IRequestContext requestContext, TRequest request, Exception ex) {
      // Called whenever an exception is thrown in your Services Action
    }
} 
```

在 global.asax 中，返回语句显示错误“构造函数 MyServiceRunner 有 0 个参数，但使用 2 个参数调用”。

有人可以帮助我吗...如果可以的话，我绝对需要使用 actionContext。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:18:45.957

你需要一个构造函数，它应该是：

```
public class MyServiceRunner<T> : ServiceRunner<T> 
{
  public MyServiceRunner(IAppHost appHost, ActionContext actionContext) 
      : base(appHost, actionContext) {}

  public override void OnBeforeExecute(IRequestContext requestContext, 
     TRequest request) {
    // Called just before any Action is executed
  }

  public override object OnAfterExecute(IRequestContext requestContext, 
     object response) {
      // Called just after any Action is executed, you can modify the response
  }

  public override object HandleException(IRequestContext requestContext, 
      TRequest request, Exception ex) {
    // Called whenever an exception is thrown in your Services Action
  }
} 
```

# c# - 将超类型数组拆分为子类型数组

> ID：15912632
> 
> 赞同：2
> 
> 时间：2013-04-09T21:12:54.083
> 
> 标签：c#, types

我有以下定义：

```
class X {
    private ICollection<A> listOfObjects;
}

class A

class B : A 

class C : A 
```

现在我想拆分这个对象列表并为每种类型创建单独的列表。我认为我想出的解决方案就足够了，但我的列表永远不会被填充。我忽略了什么吗？

```
foreach (var obj in listOfObjects) {
    if (obj.getType() == typeof(B)) {
         SomeList.Add((B) obj);
    } else if (obj.GetType() == typeof(C)) {
         AnotherList.Add((C) obj);
    }
} 
```

这是正确的方法吗？我在程序的其他地方找不到错误。调试器向我展示了实际通过的评估，但列表保持为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:17:29.540

使用`.GetType()`和/或进行类型比较`typeof()`通常是一种不好的做法。相反，您应该尝试：

```
foreach (var obj in listOfObjects) {
    if (obj is B) {
         SomeList.Add((B) obj);
    } else if (obj is C) {
         AnotherList.Add((C) obj);
    }
} 
```

但您也可以跳过`foreach`循环并执行以下操作：

```
SomeList.AddRange(listOfObjects.OfType<B>());
AnotherList.AddRange(listOfObjects.OfType<C>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:18:39.290

尝试这个：

```
 class X {
      private ICollection<A> listOfObjects;

    public List<B> GetBs() {
      return  listOfObjects.OfType<B>().ToList();
    }
    public List<C> GetCs() {
      return listOfObjects.OfType<C>().ToList();
    }
  }

  class A {}

  class B : A {}

  class C : A {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:19:57.973

您可以使用 LINQ：

```
var ofB = listOfObjects.OfType<B>().ToList();
var ofC = listOfObjects.OfType<C>().ToList();
var ofA = listOfObjects.Except(ofB).Except(ofC).ToList(); 
```

# mysql - 为什么Django在使用外键时添加约束而不是在Create语句中定义它？

> ID：15912633
> 
> 赞同：4
> 
> 时间：2013-04-09T21:12:57.363
> 
> 标签：mysql, sql, django

我正在阅读 Django 教程并定义投票和选择模型。当我运行`manage.py sql polls`查看 sql 语句时，我得到：

```
CREATE TABLE `polls_poll` (
    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
    `question` varchar(200) NOT NULL,
    `pub_date` datetime NOT NULL
);

CREATE TABLE `polls_choice` (
    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
    `poll_id` integer NOT NULL,
    `choice_text` varchar(200) NOT NULL,
    `votes` integer NOT NULL
);

ALTER TABLE `polls_choice` ADD CONSTRAINT `poll_id_refs_id_3aa09835`
    FOREIGN KEY (`poll_id`) REFERENCES `polls_poll` (`id`); 
```

为什么Django`ALTER`在应用外键时使用语句而不是在`Create table`语句中执行？类似以下的内容似乎更简洁：

```
`poll_id integer NOT NULL REFERENCES polls_choice(id)` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:19:01.623

避免依赖问题和循环引用。例如，假设有两个表：

```
CREATE TABLE parent ( id, first_child_id );
CREATE TABLE child ( id, parent_id ); 
```

必须在定义表之后添加`parent`和之间的至少一个引用。`child`

现在，因为 MySQL 对引用完整性不是特别小心，所以这不是问题：

```
mysql> CREATE TABLE parent ( id INTEGER PRIMARY KEY, first_child_id INTEGER NOT NULL REFERENCES child(id) );
Query OK, 0 rows affected (0.00 sec) 
```

但是更迂腐的数据库引擎会抱怨：

```
test=# BEGIN;
BEGIN
test=# SET CONSTRAINTS ALL DEFERRED;
SET CONSTRAINTS
test=# CREATE TABLE parent (id INTEGER PRIMARY KEY, first_child_id INTEGER NOT NULL REFERENCES child(id));
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "parent_pkey" for table "parent"
ERROR:  relation "child" does not exist 
```

# angularjs - 在指令中重新布线指令

> ID：15912640
> 
> 赞同：0
> 
> 时间：2013-04-09T21:13:20.207
> 
> 标签：angularjs, angularjs-directive

所以在这个例子中 ng-hide 不会隐藏元素。为什么以及如何解决这个问题？

```
<div ng-app='myApp'>
    <input type='text' foo/>
</div>

angular.module('myApp',[])
  .directive('foo',function(){
    return{
        link:function(scope,element,attrs){
            element.after('<div style="width:200px; height:200px;'
                    +' background-color:red" ng-hide="true"></div>')
        }
    }
}); 
```

[http://jsfiddle.net/BL8h5/](http://jsfiddle.net/BL8h5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:24:18.890

请参阅此更新示例：

[http://jsfiddle.net/JxMTW/1/](http://jsfiddle.net/JxMTW/1/)

```
angular.module('myApp',[])
.directive('foo',function($compile){
    return{
        link:function(scope,element,attrs){
            element.after($compile('<div style="width:200px; height:200px; background-color:red" ng-hide="true"></div>')(scope))
        }
    }
}); 
```

原因是这不是“角度”做事的方式——你应该避免“弄乱 DOM”，而是使用模板并让角度处理它。

在您的特定情况下，您需要做的是通过 运行新元素`$compile`，它解析内容并获取任何角度逻辑。

有关更多信息，请参阅此问题和答案： [AngularJS 和生成的元素](https://stackoverflow.com/questions/10857110/angularjs-and-generated-elements)

# java - Jsoup 解析 iso-8859-1 文件

> ID：15912642
> 
> 赞同：0
> 
> 时间：2013-04-09T21:13:22.597
> 
> 标签：java, encoding, jsoup, iso-8859-1

我一直在网上寻找并试图理解。我正在解析一些以 iso-8859-1 编码的 html 文件。解析后，我希望所有输出都采用标准 java 编码（utf-something）

这是我如何做到的：

```
currentDocument = Jsoup.parse(new File("thing.htm", "ISO-8859-1");
Element elt = currentDocument.getElementById("bim");
String title = elt.select("h1,h2,h3,h4,h5,h6").first().text();
System.out.println(title); 
```

文件中的字符串是：

```
G18&nbsp;Legemiddeløkonomi &#x2013; pasientens venn eller fiende 
```

输出是：

```
G18?Legemiddel?konomi ? pasientens venn eller fiende 
```

我想我在某处做错了什么，因为我知道 Jsoup 可以做到这一点，我只是不知道它是什么。顺便说一句，我在 MacOSX 上。有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:36:43.587

好的，经过进一步调查并感谢@Esailija，我发现我的控制台没有以 UTF-8 输出，这已通过以下方式解决：

```
PrintStream stdout = new PrintStream(System.out, true, "UTF-8"); 
System.setOut(stdout); 
```

我也用过：`currentDocument.outputSettings().charset("UTF-8");`但我不确定这是否有用。

# c++ - c ++“类”没有命名类型

> ID：15912645
> 
> 赞同：0
> 
> 时间：2013-04-09T21:13:36.100
> 
> 标签：c++

我有一点问题，但不确定是什么。

标头.h：

```
#ifndef CONTINENT_H_INCLUDED
#define CONTINENT_H_INCLUDED

#include <string>
#include <vector>

class Territory;
class Player;

namespace Sep
{

  //----------------------------------------------------------------------------
  // Continent class
  // class consist of many territories 
  //
  class Continent
  {
    private: 

    public:

      //--------------------------------------------------------------------------
      // Constructor
      //
      Continent();

      //--------------------------------------------------------------------------
      // Copy Constructor
      // Makes a copy of another Continent Object.
      // @param original Original to copy.
      //
      Continent(const Continent& original);

      //--------------------------------------------------------------------------
      // Assignment Operator
      // Used to assign one Continent to another
      // @param original Original with values to copy.
      //
      Continent& operator= (Continent const& original);

      //--------------------------------------------------------------------------
      // Destructor
      //
 INCLUDED

 virtual ~Continent();

  //--------------------------------------------------------------------------
  // Constructor to forward attributes
  //
  Continent(std::string name, std::vector<Territory*> territories);

  };
}

#endif  // CONTINENT_H_INCLUDED 
```

.cpp：

```
#include "Continent.h"

//------------------------------------------------------------------------------
Continent::Continent()
{

}

//------------------------------------------------------------------------------
Continent::Continent(std::string name, std::vector<Territory*> territories) : 
                name_(name), territories_(territories)
{

}
//------------------------------------------------------------------------------
Continent::~Continent()
{

} 
```

很抱歉输入了整个代码，但我不想冒任何风险。错误：g++ -Wall -g -c -o Continent.o Continent.cpp -MMD -MF ./Continent.od Continent.cpp:13:1：错误：“大陆”没有命名类型

从那我知道这是标题定义和.cpp之间的问题，但是我看不到那里的问题。

谢谢任何帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:18:07.657

您在标头`Continent`的命名空间`Sep`中声明，但在 .cpp 中，您`Continent`在未定义的全局范围内使用。

您应该在 .cpp 中的`using namespace Sep;`之后添加，将所有定义包装在 a 中，或者放在每次使用.`#include``namespace Sep { ... }``Sep::``Continent`

# android - 使用通用图像加载器从资源中缓慢传输图像

> ID：15912648
> 
> 赞同：1
> 
> 时间：2013-04-09T21:13:42.987
> 
> 标签：android, gridview, universal-image-loader

到目前为止，我正在创建一个包含两个活动的应用程序。每个活动只不过是一个在drawables文件夹中充满图片的gridview。但是，这些图像的加载速度非常慢。在平板电脑上，我一次可以在屏幕上显示 24 张图片。这些图片为 256*144，平均约为 60KB。如果我滑动到需要重置所有视图的距离，加载页面大约需要 8 秒。这似乎不对。

两个活动中的所有图片总空间约为 8MB。

我目前正在使用通用图像加载器，但如果有更好的方法，我不反对另一种方法。

这是我的数组适配器代码。

```
 import com.nostra13.universalimageloader.core.DisplayImageOptions;
import com.nostra13.universalimageloader.core.ImageLoader;
import com.nostra13.universalimageloader.core.ImageLoaderConfiguration;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class ImageAdapter extends BaseAdapter{
    private Context context;
    private int columnSize;
    private int rowSize;
    private boolean flag;
    private DisplayImageOptions options;
    private ImageLoaderConfiguration config;
    private ImageLoader imageLoader;

public ImageAdapter(Context c, int cS, int rS, boolean f, ImageLoader img){
    context = c;
    columnSize = cS;
    rowSize = rS;
    flag = f;
    options = new DisplayImageOptions.Builder().cacheInMemory().build();
    config = new ImageLoaderConfiguration.Builder(context).build();
    imageLoader = img;
} 
```

（其他方法没什么特别的）

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    ImageView icon;

    if(convertView==null){
        icon = new ImageView(context);
        icon.setLayoutParams(new GridView.LayoutParams(columnSize, rowSize));
        icon.setScaleType(ImageView.ScaleType.CENTER_CROP);
        icon.setPadding(2, 2, 2, 2);
    } else {
        icon = (ImageView)convertView;
    }

    String filename = null;

    if(flag){
        filename = "h" + Integer.toString(position);
    } else if(!flag){
        filename = "i" + Integer.toString(position);
    }

    int id = context.getResources().getIdentifier(filename, "drawable", context.getPackageName());
    String uri = "drawable://" + Integer.toString(id);
    ImageLoader.getInstance().displayImage(uri, icon, options);
    //icon.setImageResource(id);

    return icon;
} 
```

}

编辑：忘记了一些代码。这是从片段的`onCreateView`方法传递到我的适配器代码的图像适配器

```
ImageLoader img = ImageLoader.getInstance();
        img.init(ImageLoaderConfiguration.createDefault(fragView.getContext()));
        grid.setAdapter(new ImageAdapter(fragView.getContext(),columnSize, rowSize, true, img)); 
```

# javascript - jquery 组合框通过代码更新索引不会更新组合框

> ID：15912649
> 
> 赞同：0
> 
> 时间：2013-04-09T21:13:45.847
> 
> 标签：javascript, jquery, jquery-ui

大家好，我一直在使用 jquery 自动完成组合框，一切正常，直到我必须以编程方式更改下拉列表的索引。

看来我必须修改这个

```
select: function (event, ui) {
                ui.item.option.selected = true;
                self._trigger("selected", event, {
                    item: ui.item.option
                }); 
```

允许我通过代码更新索引，但我不确定如何做到这一点，有人可以帮助我如何完成它。非常感激任何的帮助。组合框代码显示在这里。[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox) 提前感谢你们可以提供的任何帮助。

我尝试了几种不同的方法，只有当我回到非 jquery 解决方案时它才有效。

```
 $("#StartLocations").val( $("#EndLocations option:selected").val());
        $("#EndLocations").prop("selectedIndex", 1);
        $("#EndLocations").val(1); 
```

**：更新**

```
 function RunDirBtn_onclick(r){
        if (r == 'Y') {
            index = EndLocations.selectedIndex;
            StartNode = MystartingLocation[index].locNode;

            index = StartLocations.selectedIndex;
            EndNode = MystartingLocation[index].locNode;

          //  $("#StartLocations").val( $("#EndLocations option:selected").val());
           // $("#EndLocations").prop("selectedIndex", 1);
           // $("#EndLocations").val(1);
            var startint = $("#StartLocations").attr("selectedIndex");
            var endint = $("#EndLocations").attr("selectedIndex");

            $("#EndLocations").attr("selectedIndex", startint);
            $("#StartLocations").attr("selectedIndex", endint);

        } else {
            index = EndLocations.selectedIndex;
            EndNode = MystartingLocation[index].locNode;

            index = StartLocations.selectedIndex;
            StartNode = MystartingLocation[index].locNode;
        } 
```

我可以更改每个 dropdpown 的索引我唯一的问题是我不能将它与自动完成组合框一起使用。组合框代码

```
$.widget("ui.combobox", {
    _create: function () {
        var self = this,
            select = this.element.hide(),
            selected = select.children(":selected"),
            value = selected.val() ? selected.text() : "Select One...";
        var input = this.input = $("<input>")
            .insertAfter(select)
            .val(value)
            .autocomplete({
                delay: 0,
                minLength: 0,
                source: function (request, response) {
                    var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                    response(select.children("option").map(function () {
                        var text = $(this).text();
                        if (this.value && (!request.term || matcher.test(text)))
                            return {
                                label: text.replace(
                                    new RegExp(
                                        "(?![^&;]+;)(?!<[^<>]*)(" +
                                        $.ui.autocomplete.escapeRegex(request.term) +
                                        ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                    ), "<strong>$1</strong>"),
                                value: text,
                                option: this
                            };
                    }));
                },
                select: function (event, ui) {
                    ui.item.option.selected = true;
                    self._trigger("selected", event, {
                        item: ui.item.option
                    });
                },
                change: function (event, ui) {
                    if (!ui.item) {
                        var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                            valid = false;
                        select.children("option").each(function () {
                            if ($(this).text().match(matcher)) {
                                this.selected = valid = true;
                                return false;
                            }
                        });
                        if (!valid) {
                            $(this).val("");
                            select.val("");
                            input.data("autocomplete").term = "";
                            return false;
                        }
                    }
                }
            })
            .addClass("ui-widget ui-widget-content ui-corner-left");

        input.data("autocomplete")._renderItem = function (ul, item) {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a>" + item.label + "</a>")
                .appendTo(ul);
        };

        this.button = $("<button type='button'>&nbsp;</button>")
            .attr("tabIndex", -1)
            .attr("title", "Show All Items")
            .insertAfter(input)
            .button({
                icons: {
                    primary: "ui-icon-triangle-1-s"
                },
                text: false
            })
            .removeClass("ui-corner-all")
            .addClass("ui-corner-right ui-button-icon")
            .click(function () {
                if (input.autocomplete("widget").is(":visible")) {
                    input.autocomplete("close");
                    return;
                }

                $(this).blur();
                input.autocomplete("search", "");
                input.focus();
            });
    },

    destroy: function () {
        this.input.remove();
        this.button.remove();
        this.element.show();
        $.Widget.prototype.destroy.call(this);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:09:03.757

好的，一遍又一遍地查看后，我从这里得到了答案 [How to define selected value for jQuery UI combobox?](https://stackoverflow.com/questions/8127040/how-to-define-selected-value-for-jquery-ui-combobox) 虽然我不能直接更改自动完成的值，但我可以简单地更新输入框的值，并且在幕后我可以引用选择组件。感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:34:51.460

我认为问题是自动完成组合框没有“selectedIndex”的任何属性。

如果您想实现这一点，您可能需要将该属性添加到自动完成功能中：

```
var startint = $("#StartLocations").attr("selectedIndex");
var endint = $("#EndLocations").attr("selectedIndex");

$("#EndLocations").attr("selectedIndex", startint);
$("#StartLocations").attr("selectedIndex", endint); 
```

# java - 事先不知道输出的测试代码

> ID：15912650
> 
> 赞同：0
> 
> 时间：2013-04-09T21:13:51.960
> 
> 标签：java, unit-testing, junit

我目前的项目比较复杂，做了大量的数学运算，我事先不知道结果。我正在尝试编写单元测试（在 JUint 中）；我目前有一些我已经写过的测试，然后我手动查看结果，看看它们是否“看起来”正确，但由于我的程序是我确定复杂数学结果的方式，所以我不是真的很确定我如何验证准确性。

我有其他单元测试来测试非常小的代码片段，但我不确定如何为更大的代码块编写测试。有人有什么想法和指导吗？

更多信息，它不是一个数字。它更像是：“输入：100,000 行 csv 数据”输出“100,000 csv 分析”。但是这些行相互依赖，在 10 行 csv 数据上运行代码不足以进行有意义的数学运算。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:24:23.157

做数学需要你成为一名数学家，即使你是一个非常糟糕的人。没有办法解决它。考虑到这一点，以下是数学家用来检查答案的一些方法：

*   **从答案中得出输入**，迫使您向后思考。
*   **使用不同的方法**得到相同的答案。
*   **将问题分解**为更小、更容易验证的步骤。
*   **尝试**在现实世界中使用结果，并观察是否发生了不好的事情。

如果您大致知道您的程序应该输出什么答案，那么您可以检查您的程序是否给出了接近正确的答案，然后希望它是正确的并将其用于您的单元测试。但根据我的经验（游戏开发），真正的核心数学是检验自己的最可靠方法。此外，您还拥有触手可及的世界上最先进的计算器之一。:)

PS 不要忘记在单元测试中留下一些差异。特别是在进行更高级的数学运算时，由于浮点运算，有多种正确的方法可以给出略有不同的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:18:12.930

您应该能够选择特定的输入并获得这些输入的预期结果。如果你不能手工做几个测试用例结果，你应该把你正在测试的部分分解成多个可测试的部分。您还可以在测试中使用与被测项目不同的技术来解决数学问题。这样做的问题是，如果它们不同，那么哪个是错误的..但至少您知道要寻找什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:18:25.917

这在很大程度上取决于您正在做的数学类型。例如，如果您正在求解微分方程，那么您将验证您是否以一半的步长得到了相同的答案，或者您会将您的结果与已知的准确（但速度较慢）的方法（如逆欧拉方法）进行比较。

在不知道你在做什么类型的数学的情况下，我假设你正在使用双精度算术。尝试将您的结果与 BigDecimal 等任意精度库进行比较，以验证您没有遇到大量舍入和截断错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:32:37.783

以下建议可能有点微不足道：

*   尝试提供可以预期输出的输入（所有零数据，除一个值外的所有零数据等）
*   如果可能，尝试为您手动执行的部分检查编写代码并在大/多输入上运行
*   使用不同的算法（或由不同的开发人员）再次实现代码并交叉检查两个实现
*   对于小规模，手动检查运行请参阅代码覆盖率（例如 Jacoco [http://www.eclemma.org/jacoco/](http://www.eclemma.org/jacoco/)）并尝试修改输入/创建新输入以增加代码覆盖率

# objective-c - Mac OS X：在 Objective-C 或 C 中，如何卸载（停止）由启动管理的 LaunchDaemon

> ID：15912655
> 
> 赞同：1
> 
> 时间：2013-04-09T21:14:18.693
> 
> 标签：objective-c, macos, launchd

我想知道如何编写 Objective-C 或 C 代码来卸载（停止）一个 LaunchDaemon。我要卸载的 LaunchDaemon 以 root 用户身份运行。

我的问题与这个问题基本相同：[How to Load LaunchDaemon plist from my Mac Application](https://stackoverflow.com/questions/15478614/how-to-load-launchdaemon-plist-from-my-mac-application)。唯一的区别是他/她正在尝试加载，但我想卸载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T06:44:00.627

你可以使用苹果脚本

```
do shell script "launchctl unload /Library/LaunchDaemons/com.yourcompany.app.plist" with administrator privileges 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T06:53:56.933

在 C 中，您可以使用该`SMJobRemove`功能。如果作业在系统启动上下文中（即它在 /Library/LaunchDaemons 中并且在系统启动时加载（如果未启动），那么您需要使用授权服务来获取`kSMRightModifySystemDaemons`权限，并将授权引用传递给此功能。

```
 AuthorizationItem authItem = { .name = kSMRightModifySystemDaemons,
        .valueLength = 0,
        .value = NULL,
        .flags = kAuthorizationFlagDefaults };
    AuthorizationRights authRights  = { .count = 1,
        .items = &authItem };

    AuthorizationRef authorization = NULL;
    OSStatus authResult = AuthorizationCreate(&authRights,
                                          kAuthorizationEmptyEnvironment,
                                          kAuthorizationFlagDefaults | kAuthorizationFlagInteractionAllowed | kAuthorizationFlagPreAuthorize | kAuthorizationFlagExtendRights,
                                          &authorization);
    if (authResult != errAuthorizationSuccess) {
        NSLog(@"couldn't create AuthorizationRef: error %i", authResult);
    } else {
        CFErrorRef error = NULL;
        BOOL removeResult = SMJobRemove(kSMDomainSystemLaunchd, jobLabel, authorization, waitOrNot, &error);
        AuthorizationFree(authorization, kAuthorizationFlagDefaults);
        // handle either success or failure
    } 
```

如果您想在作业卸载之前阻塞，则应将该`waitOrNot`标志设置为`YES`- 这可能需要很长时间。

# opencl - 理想的全球/本地工作组规模 (OpenCL)

> ID：15912668
> 
> 赞同：2
> 
> 时间：2013-04-09T21:15:10.523
> 
> 标签：opencl, gpgpu, matrix-multiplication

我正在尝试为 NVIDIA GeForce 9800 GT 显卡优化 OpenCL 矩阵乘法程序。我将两个 512x512 矩阵相乘，但我不确定我应该使用什么样的全局和本地工作组大小。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:52:13.813

作为二`512`的**幂**，您可以尝试以下尺寸：

```
size_t global_work_size[2] = {512, 512};
size_t  local_work_size[2] = {2^p, 2^n}; 
```

在哪里 ：

*   `(2^m + 2^n) % 32 = 0`:`32`必须是**线程数的****除数**，因为包裹将包含线程**`32`**

***   需要 2的**幂，**因为**本地工作大小**必须是全局**工作大小的****除数**。

    ***   大小为`512`，当然不会有问题，但您必须考虑`CL_DEVICE_MAX_WORK_GROUP_SIZE`（由 给出`clGetDeviceInfo()`）参数。对于更大的矩阵，您将不得不使用更多的`2`维度。

    *   维数本身受`CL_DEVICE_MAX_WORK_ITEM_DIMENSIONS`...限制**** 

 ****实际上，最佳选择取决于算法，并且取决于您打算执行的矩阵乘法类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-05T13:38:14.713

如果您需要最佳性能，请使用各种本地工作组规模对其进行基准测试，然后使用最好的一个。您可能会惊讶地发现，最快的并不总是与实现提供者提供的指导相匹配！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-13T21:27:51.363

同意 Dithermaster，我想补充一点，峰值性能高度依赖于平台，如果 GPU 不是同一型号/代，即使来自同一供应商的 GPU 也可能具有不同的最佳工作组大小。

要获得最佳性能，您确实需要在目标平台上进行实验（执行前训练）并找到最佳配置。请记住，不仅工作组的规模，而且工作组的形状都会显着影响绩效。话虽如此，您确实需要尝试以下所有组合。假设内核的最大工作组大小为 1024，这意味着对于二维工作组，您可以有以下组合：(1, 1024), (2, 512), (4, 256), (8, 128), (16, 64), (32, 32), (64, 16), (128, 8), (256, 4), (512, 2) 和 (1024, 1)。

注意 (1, 1024) 和 (1024, 1) 可能会导致完全不同的性能，这是由于内存架构、缓存架构和波形调度方式等原因。

是的，当然，您还需要考虑 wave/warp 大小以及合并的内存访问。在这里，我只是在谈论一般的 OpenCL 工作负载，尤其是当工作负载不显示任何结构模式时，最好尝试尽可能多的组合以确保您不会遗漏任何内容。****

# jquery - Lib.Web.Mvc：它真的需要一个 buildSelect 函数吗？

> ID：15912669
> 
> 赞同：0
> 
> 时间：2013-04-09T21:15:14.263
> 
> 标签：jquery, razor, asp.net-mvc-4, jqgrid, lib.web.mvc

我最近一直在测试这个库，并注意到当使用 JqGridColumnEditable 映射模型属性时，我们可以指定 dataUrl 参数，以便库可以获取选择输入的数据（EditType = JqGridColumnEditTypes.Select）。

我的问题很简单：我真的必须实现一个 buildSelect js 函数来实际创建选项吗？我的意思是，我到处搜索要返回的 json 模式，以便它可以自动构建它，因为我不敢相信它没有实现。

有谁知道它是否会在从 dataUrl 接收到 json 时自动填充选择输入？预期的格式是什么？如果（还）不可能，您对从 buildSelect 函数访问选择输入以手动填充它有什么建议？我试过'this'，没有引号，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:09:05.707

不幸的是，这个限制在 jqGrid 本身内部。[您可以在此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#select)查看文档- 它清楚地表明，如果您正在使用`dataUrl`服务器，则必须返回准备好使用的`select`元素，或者您需要使用`buildSelect`函数。

当您使用该`buildSelect`函数时，您不访问该`select`元素，您返回一个。它可能看起来像这样（此示例假设您的数据是具有 Key 和 Name 属性的对象的集合）：

```
var buildSelectFunction = function(data) {
    var selectItems = JSON.parse(data.responseText);
    var selectMarkup = '<select>';

    if (selectItems && selectItems.length) {
        for (var i = 0; i < selectItems.length; i++) {
            var selectItem = selectItems[i];
            selectMarkup += '<option value="' + selectItem.Key + '">' + selectItem.Name + '</option>';
        }
    }

    return selectMarkup + '</select>';
}; 
```

# mysql - 对索引键与主键的 sql 查询性能

> ID：15912671
> 
> 赞同：1
> 
> 时间：2013-04-09T21:15:18.887
> 
> 标签：mysql, sql

我有一个 mysql innodb 表 -

```
create table data (
    `sha256` CHAR(64) NOT NULL,
    'created` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    <some other fields>
    PRIMARY KEY (`sha256`),
) 
```

mysqld_slow_query 中最慢的查询之一是

```
select * from data where created between "2013-02-01" and "2013-03-01"; 
```

为了改进这个查询的执行，我有两个选择：

选项 1：在创建时添加索引

选项 2：将 ('created', 'sha256') 设为主键，并在 sha256 上添加索引。

这里的想法是，当我们选择大量行时，比如一个月收集的数据，我想减少访问的 B-tree 块的数量。如果我们通过索引（选项 1）访问这些记录，我们仍然可能最终访问每个记录的不同块。相反，如果我们将按时间戳排序的记录存储为主/聚集键（选项 2），我们将在同一个 B 树块中找到大量记录，这将减少磁盘读取。

但出于某种原因，虽然选项 1 提高了性能，但选项 2 并没有提高多少。任何想法为什么？还有其他建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:36:56.133

InnoDB 对大主键特别敏感，因为它使用聚集的主索引并且 a`CHAR(64)`会产生非常大的主键。我建议您添加一个`AUTOINCREMENT`id 列作为主键并提供`sha256`唯一索引。带有索引的那些`created`应该有助于全方位的表现。查找`sha256`会稍微慢一些，但其他一切都会更快。插入也会更快，因为数据永远不需要被`sha256`.

我不完全确定为什么单个索引会快得多，但它可能与复合索引如此大有关，即使它是一个聚集索引。

# html - CSS3 / 当前实现全屏布局的方式

> ID：15912676
> 
> 赞同：-3
> 
> 时间：2013-04-09T21:15:35.043
> 
> 标签：html, css, layout, fullscreen

我正在寻找实现一个全屏布局，它可以在没有 JavaScript 的移动设备和桌面上运行。

```
|---|------------|
|   | <--->      |
|---|------------|
|   | <--->      |
| ^ | ^          |
|   |            |
|---| scroll     |
|   |            |
|---|------------| 
```

左边是固定宽度，右边是水平缩放。整个设计垂直缩放。页眉和页脚高度是固定的。大区域是可滚动的，而其余部分是固定的。

我知道如何使用绝对/固定定位等来实现这一点。CSS3 的新技术是否有更好的方法来支持这种布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:46:46.993

简短回答：百分比、浮动元素和媒体查询。
长答案不适合这个空间。

你可以学习[这个模板制作器](http://www.initializr.com/)（或者另一个我认为这是最好的模板制作器之一），它将为你学习响应式网页设计的动态提供一个良好的开端。

# c++ - CDT Juno Ubuntu“g++ 不在 PATH 中”

> ID：15912682
> 
> 赞同：0
> 
> 时间：2013-04-09T21:15:55.580
> 
> 标签：c++, eclipse, eclipse-cdt

当然 g++ 已安装并在 PATH 中，但无论我在 Ubuntu 上做什么 eclipse Juno 都找不到它。有没有人能够解决这个问题？

哪个 g++ 给 /usr/bin/g++

g++ 安装在我的 Ubuntu 上

# c# - 用于访问数据库的 Rhino 模拟

> ID：15912685
> 
> 赞同：0
> 
> 时间：2013-04-09T21:16:10.997
> 
> 标签：c#, unit-testing, nunit, rhino-mocks

如果以前有人问过这个问题，请原谅。我处于搜索例如返回太多结果的阶段，这让我感到困惑。

我是 Rhino 模拟的新手，我知道有很多示例，但界面 - 虚拟推荐让我感到困惑。

如果我的课程运行良好（但我必须对每一行代码进行单元测试），我是否必须调整我的代码以满足单元测试的要求？还是应该反过来？

说到重点，我有以下课程，我想模拟它。

```
public class DatabaseOperation
{
    public IList<T> GetRecords<T>(string connectionString, string storedProcedureName)
    {
        using (var connection = new SqlConnection(connectionString))
        {
            connection.Open();
            using (var command = connection.CreateCommand())
            {
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = storedProcedureName;
                var reader = command.ExecuteReader();
                var fillSelection = new FillSelection<T>();
                return fillSelection.GetSelection(reader);
            }
        }
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:40:44.320

总是有某些部分无法使用 rhino 之类的框架进行真正的单元测试，您可以使用 TypeMock Isolator 之类的框架对其进行测试，但这不是免费的。

如果您愿意，您可以测试此代码，但这将是一个集成测试，而不是一个单一的测试，这意味着您需要一个包含假数据的真实数据库才能通过此测试。这将为您提供 100% 的代码覆盖率，但您必须意识到它不仅可能被这部分代码破坏，而且还可能与集成相关的问题。

我有几个软件项目同时进行了单一和集成自动测试，并且我在运行所有这些项目时都取得了巨大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:43:44.893

如果要测试方法本身，则应在其中添加依赖项。这意味着使用 IDbConnection 代替 SqlConnection 并将其用作参数而不是连接字符串。然后你可以模拟输入参数和测试方法的行为。例如，如果调用了 IDbConnction.Open 方法，或者是否以正确的顺序调用了所有方法。

您的方法应具有以下签名：

```
public IList<T> GetRecords<T>(IDbConnection connection, string storedProcedureName) 
```

在您的测试中，您可以使用以下语句：

```
IDbConnection connectionMock = MockRepository.GenerateMock<IDateTimeProvider>(IDbConnection);

// initialize mock object and your class here

yourClassInstance.GetRecords(connectionMock, yourProcedureName);

dateTimeProviderMock.AssertWasCalled(connection => connection.Open()); 
```

# ruby-on-rails - 在面向服务的环境中播种 Rails 数据库

> ID：15912686
> 
> 赞同：0
> 
> 时间：2013-04-09T21:16:15.060
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, database-design, soa

关于跨多个服务播种 Rails 应用程序数据库的思考练习。

# 设置

例如，考虑一个由 4 个服务（rails 应用程序）组成的超级简化示例，它们通过客户端 gem 进行通信，每个服务都公开一个基本 API。

```
AuthService - (user_id, password)

PropertyService (user_id, property_id, address)

UserService (user_id, user_info)

MortgageService - (property_id, mortgage_id, current_cost_of_mortgage) 
```

基本上，一个用户拥有许多房产，每个房产都有抵押贷款。很简单。

每个服务还有一个客户端，其访问权限受到严格限制，它可以访问哪些字段。因此，它作为一种填充其服务的机制并不是很可行（除非您不同意？）。

# 问题

当将其作为一个整体播种时，您显然希望您在属性服务中引用的任何用户也存在于身份验证服务中，并且对于其他服务关系也是如此。

用样本数据播种这些服务以使它们都匹配的最佳方法是什么？

# 考虑的潜在方法

1.  为每项服务创建硬固定装置
2.  为每个服务创建一个数据库转储并直接导入它
3.  使用 Factory Girl 并以某种方式弄清楚如何同步 id

工厂女孩会是最好的，因为它可以让我更改相当容易播种的数据并添加更多/更少的数据而不会出现问题。我就是想不通该怎么做...

任何问题都可以直接提出，真的很想知道是否有人在做这样的事情或已经尝试过，以及他们是如何管理它的！

# wordpress - 向 Wordpress 用户注册添加额外字段

> ID：15912687
> 
> 赞同：0
> 
> 时间：2013-04-09T21:16:16.127
> 
> 标签：wordpress

第一个函数采用在 Wordpress 上注册并使用“registration_errors”过滤器将他插入外部数据库的用户。我还需要将 Salesforce 系统返回的 ID 插入到 Wordpress 用户元表中。最初，我尝试使用 $user_id 作为主 wp_insert_user 函数的全局变量来执行 update_user_meta( $user_id, 'SF_User_ID', $SFUserID ); 但是， $user_id 变量没有返回任何内容。现在，我试图在一个单独的函数中执行 update_user_meta，但它需要使用从第一个函数传递的值。当前代码返回此错误：当前代码不起作用，因为没有返回 $error。

我不知道如何获取 Wordpress 用户 ID 并使用 Salesforce 在 $SFUserID 变量中返回的 ID 更新 usermeta 表。

```
 function add_user_to_SF($errors, $sanitized_user_login, $user_email ) {

    if ( $errors->get_error_code() ) return $errors;

    try {
        $sObject = new stdclass();
        $sObject->FirstName = $_POST['user_login'];
        $sObject->LastName = $_POST['user_login'];
        $sObject->Email = $_POST['user_email'];

        $createResponse = $mySforceConnection->create(array($sObject), 'Contact');

        $ids = array();
            foreach ($createResponse as $createResult) {
                array_push($ids, $createResult->id);
                $SFUserID = $createResult->id;

                                    add_action('user_register', 'addSFUserID', 10, 1);
            }

            } catch (Exception $e) {

              $errors->add( 'demo_error', __('<strong>ERROR</strong>: There is a Salesforce problem.','mydomain') );
              return $errors;
        }

              return $errors;
 }

 add_filter( 'registration_errors', 'add_user_to_SF', 10, 3 );

 function addSFUserID($user_id) {   

    update_user_meta( $user_id, 'SF_User_ID', $SFUserID );
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:23:24.000

解决此错误：在非对象上调用成员函数 get_error_code()

当前您正在检查 $errors->get_error_code()，如果 $errors 不是 wp_error，则 get_error_code() 方法不存在并且会失败。

要检查它是否有错误，请尝试使用：

```
is_wp_error( $errors ); 
```

[http://codex.wordpress.org/Function_Reference/is_wp_error](http://codex.wordpress.org/Function_Reference/is_wp_error)

所以你的 if 语句看起来像这样：

```
if ( is_wp_error( $errors ) ) return $errors; 
```

这样，如果注册没有错误，它将继续您的逻辑。我没有阅读您的其余逻辑，但这是我注意到该功能的第一件事。让我知道它是否有效。

**重新回答问题的第二部分：**

这可能需要进行大量调整，但为了回答您问题的第二部分，我认为最好的方法是使用全局变量。我还没有测试过这段代码，但它应该看起来像这样：

```
$SFUserID = '';

function add_user_to_SF($errors, $sanitized_user_login, $user_email ) {

    global $SFUserID;

    if ( is_wp_error( $errors ) ) return $errors;

    try {

        $sObject = new stdclass();
        $sObject->FirstName = $_POST['user_login'];
        $sObject->LastName = $_POST['user_login'];
        $sObject->Email = $_POST['user_email'];

        $createResponse = $mySforceConnection->create(array($sObject), 'Contact');

        $ids = array();
        foreach ($createResponse as $createResult) {
            array_push($ids, $createResult->id);
            $SFUserID = $createResult->id;
        }

    } catch (Exception $e) {

          $errors->add( 'demo_error', __('<strong>ERROR</strong>: There is a Salesforce problem.','mydomain') );
          return $errors;
    }

          return $errors;

}

function addSFUserID( $user_id ) {

    global $SFUserID;
    if( !empty( $SFUserID ) )
        update_user_meta( $user_id, 'SF_User_ID', $SFUserID );

}

add_filter( 'registration_errors', 'add_user_to_SF', 10, 3 );
add_action('user_register', 'addSFUserID', 10, 1); 
```

# html - CSS IE 显示双列表样式图标

> ID：15912688
> 
> 赞同：0
> 
> 时间：2013-04-09T21:16:23.137
> 
> 标签：html, css, internet-explorer, html-lists

我在使用 Internet Explorer（所有版本）在 UL 中显示 2 种类型的列表样式图标时遇到问题。这仅在 Firefox、Chrome 和 Safari 的 IE 中发生，它仅显示指定的列表样式，无论它是普通的文本字符串还是超链接。这是 html 和 CSS 的样子：

![这是屏幕截图](https://img.photobucket.com/albums/v55/iztel/ihateie_zpse388d1d7.jpg)

```
#altslider dd {
    margin-top: 16px;
    margin-left: 0;
    display: list-item;
    list-style:url(../images/altbullet.png);
    font-size: 17px;
    color: #333;
}

#altslider dd a {
    margin-top: 16px;
    display: list-item;
    list-style:url(../images/altlinkbullet.png);
    color: #000068;
    text-decoration: none;
} 
```

这是HTML：

```
<dl>
    <dd><a href="javascript:submitComment()" class="mynext">创建提供思科产品、服务和解决方案的品牌网络商店&lt;/a></dd>
    <dd><a href="javascript:submitComment()" class="bullet2">搜索并投标待完成 IT 项目</a></dd>
    <dd><a href="javascript:submitComment()" class="bullet3">管理账户并追踪交易&lt;/a></dd>
</dl>

<dl>
    <dd>建立一个思科产品、服务和解决方案的产品组合&lt;/dd>
    <dd>为产品、服务和解决方案定价</dd>
    <dd>管理公司简档和产品营销细节</dd>
</dl> 
```

# php - MySQL右查询左连接图像表中最新上传的图像，分页

> ID：15912691
> 
> 赞同：2
> 
> 时间：2013-04-09T21:16:26.957
> 
> 标签：php, mysql

我正在尝试从第一个表中选择少量数据，并且仅从图像表中选择最后上传的图像。我的表如下所示：

名为 data_property 的表具有字段（列）：

property_id、timestamp、label_town、label_sub、property_name、price_night、description（以及在这种情况下我不需要的其他内容）。

以及带有字段（列）的表格图像：

image_id、property_id 和分机。图片名称是 image_id，ext 是图片的扩展名。

每个属性（property_id 行）在图像表中有 12 个图像。我只需要加入每个属性最后上传的图像，并`$recordsize = 10`每页显示 10 个属性 ( )。我不知道如何组织我的查询

像这样的东西：

```
SELECT 
    property_id, timestamp, label_town, label_sub, 
    property_name, price_night, description 
FROM 
    data_property 
    LEFT JOIN or INNER JOIN (image_id, property_id, ext 
ORDER BY image_id DESC LIMIT 1) 
    FROM images ORDER BY timestamp DESC LIMIT $recordstart, $recordsize 
```

因此，我需要从 data_property 中选择几个字段，加入属于该属性的最新上传的图像，按创建属性广告的时间排序，从 desc 排序并显示每页 10 个属性。

要在这个网站上获得类似的东西：[http ://www.freehouseagent.com/property-for-sale/ireland/](http://www.freehouseagent.com/property-for-sale/ireland/)

对不起，我的英语不好。我希望你能理解我。谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:29:07.597

试试这个：

```
SELECT 
    p.property_id, p.timestamp, p.label_town, p.label_sub,  p.property_name,
    p.price_night, p.description, i.image_id, i.property_id, i.ext 
FROM 
    data_property as p
LEFT JOIN images as i
ON p.property_id = i.property_id
GROUP BY p.property_id
ORDER BY p.timestamp DESC
LIMIT 10 
```

* * *

你也可以试试这个以获得更高的准确性：

```
SELECT 
    p.property_id, p.timestamp, p.label_town, p.label_sub,  p.property_name,
    p.price_night, p.description, i.image_id, i.property_id, i.ext 
FROM 
    data_property as p
LEFT JOIN (
            SELECT MAX(image_id) as max, property_id
            FROM
                images
            GROUP BY
                property_id
           ) as n
ON p.property_id = n.property_id
LEFT JOIN
  images as i
ON i.image_id = n.max AND i.property_id = n.property_id
ORDER BY p.property_id DESC
LIMIT 10 
```

# callback - store.sync() 回调

> ID：15912694
> 
> 赞同：0
> 
> 时间：2013-04-09T21:16:59.830
> 
> 标签：callback, sencha-touch-2, store, sync

store.sync() 有回调吗？

我正在尝试做：

```
store.sync(function(){
   alert('1');
}); 
```

但它不起作用。这家商店是本地商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:33:28.957

sync() 没有“回调”。为了实现这个行为，你需要监听 store 的 write 事件。检查[此解决方案](https://stackoverflow.com/a/14322956/1053958)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:54:22.393

你可以试试：

```
store.sync({
    callback: function (records, operation) {
        alert('1');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-14T20:39:13.953

有办法监听成功事件

```
store.on('write', function(){
    alert('ready');
});
store.sync(); 
```

`write`每当通过配置的代理成功写入时触发

# css - 仅从一个链接中删除链接 CSS 样式

> ID：15912695
> 
> 赞同：0
> 
> 时间：2013-04-09T21:17:01.147
> 
> 标签：css

我为我的一个客户购买了一个模板。此模板显然具有页面上所有链接的父 CSS 样式。（这就是评论在这个特定样式上面的 .css 上所说的）

现在，我在底部创建了一个部分，靠近页脚，它的背景颜色与网站的其余部分不同，所以我想以某种方式覆盖 CSS 并给它我自己的参数，而不需要对其余部分进行太多修改该网站因为灰色和白色鼠标悬停看起来不太好，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:20:19.860

给该部分一个 ID 属性，并在定义样式时使用它。所以像...

HTML

```
<div id="my-section">
  your section is here
</div> 
```

CSS

```
/* your section's styling is here */
#my-section {
  ...
}

#my-section .sub-parts {
  ...
}

#my-section a {
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:35:50.740

只需创建一个新类并 !important 给您要覆盖的属性，如下所示：

```
body a {font-size:10px;}/* template general style */

a.mydiv{font-size: 16px !important;}/* your style  */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:21:02.380

**CSS**

```
/* Provided in your template */
a {
  color: gray;
}

/* Added for footer */
#footer a {
  color: blue; /* Or what color you want. */
} 
```

**HTML**

```
<!-- Some HTML provided in your template -->
<div id="footer">
   <!-- Your footer content -->
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:26:07.857

您只需要创建一个更具体的样式来覆盖更一般的样式。您可以在此处了解有关**CSS 特定性的更多信息：** [CSS 特定性：您应该知道的事情](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T21:30:28.257

您可以通过以下方式执行此操作：

1.  为每个锚分配 ID
2.  创建要在每个锚点上使用的类
3.  通过搜索在模板中分配颜色的位置来更改默认颜色
4.  按父元素着色并使用说明符。

选项 3 是最直接的，但会将您置于颜色不再相同的位置。而且，通常情况下，您不希望干扰模板。如果您选择非侵入式路由，那么选项 1、2 和 4 是最好的。

但是，*对于大型文档和扩展，选项 1 可能会变得非常乏味，选项 2 也是如此*- 因为它们必须逐个输入。如果您需要覆盖通常几个元素的颜色，通常会使用此技术。

但是，如果您使用大量锚点并且需要将这种颜色应用于它们，那么**选项 4 是作为颜色分配的最佳选择，并且可以通过类规范或父元素的 id 来完成**- 这*大大*简化了你的生命。

例子：

如果这是您的 HTML 的样子：

```
<a href="http://www.google.com/">Google</a>
<a href="http://www.facebook.com/">Facebook</a>
<a class="mylink" href="http://www.stackoverflow.com/">StackOverflow</a>
<a id="link1" href="http://www.wikipedia.org/">Wikipedia</a>

<div id="colorize_by_id">
    <a href="http://www.reddit.com/">Reddit</a>
</div>

<div class="colorize">
    <a href="http://www.youtube.com/">YouTube</a>
</div> 
```

CSS 是这样定义的：

```
/*This is an example of what the template does to each anchor tag*/
a {
    color: green;
}

/*However, by adding a class to the anchor, you can override the "default" color.*/
a.mylink {
    color: blue;
}

/*And, if you wished to use on a case by case basis, you can do it by applying it per id*/
a#link1 {
    color: red;
}

/*Change the color of the anchors on an id by id basis*/
div#colorize_by_id a {
    color: magenta;
}

/*Change the color of the anchors on a class basis*/
div.colorize a {
    color: yellow;
} 
```

如您所见，实际操作：http: [//jsfiddle.net/4TMpy/](http://jsfiddle.net/4TMpy/)

# ruby - 需要使用 rails 3 捆绑 gem 失败

> ID：15912699
> 
> 赞同：1
> 
> 时间：2013-04-09T21:17:22.853
> 
> 标签：ruby, ruby-on-rails-3, gem, bundler

我目前正在尝试在我的 Rails 项目中包含一个用于模糊字符串匹配的 gem，并且在我实际尝试使用它时遇到错误，并且希望有任何关于在哪里寻找丢失链接的建议。

在我的 GemFile 中：

```
gem 'fuzzy-string-match' 
```

在进行捆绑安装后，它会出现在我的 GemFile.lock 中：

```
fuzzy-string-match (0.9.5) 
```

但是每当我尝试在我的项目中使用它时，我都会收到一个错误：

```
NameError: uninitialized constant FuzzyStringMatch 
```

如果我在我的模型中手动需要它，我已经让它工作了：

```
require 'fuzzystringmatch' 
```

但我的理解是，bundler 应该在幕后处理这个问题。有没有一种很好的方法来调试并查看捆绑程序实际上在做什么来理解为什么会丢失？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:41:24.853

只有当 gem ( ) 的名称与 gem 项目的 lib 目录[(](https://github.com/kiyoka/fuzzy-string-match/blob/master/lib/fuzzystringmatch.rb) [)](https://github.com/kiyoka/fuzzy-string-match/blob/master/lib/fuzzystringmatch.rb)的根目录中的文件名匹配时，允许您跳过该`require`语句的约定才有效。这称为 gem 的主文件（[source](http://gembundler.com/v1.3/gemfile.html)）。在这种情况下，它不匹配。`fuzzy-string-match`[`fuzzystringmatch.rb`](https://github.com/kiyoka/fuzzy-string-match/blob/master/lib/fuzzystringmatch.rb)

为避免`require`语句重复，您可以执行以下操作：

```
gem 'fuzzy-string-match', :require => "fuzzystringmatch" 
```

# php - 知道请求链接是否从电子邮件帐户访问

> ID：15912703
> 
> 赞同：-4
> 
> 时间：2013-04-09T21:17:32.090
> 
> 标签：php, jakarta-ee, web, hyperlink

这可能是不可能的，但是，请让我问一下！

有没有办法知道是否从电子邮件帐户请求了一个 url？

问题是：一个页面只能通过提供随机验证码来访问。但我想让同一页面可以从电子邮件帐户访问。

所以我的问题是，是否有可能知道请求的网址是否来自电子邮件帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:27:31.110

你的意思是如果它来自电子邮件？
在这种情况下，你可以做这样的事情

```
<a href="http://example.com/page?o=email">Click here to go to our website</a> 
```

起源也可以保存在表格中，所以不清楚它是什么。例如来源#1 可以是电子邮件。

```
<a href="http://example.com/page?o=1">Click here to go to our website</a> 
```

然后得到原点

```
<?php
switch($_GET['o']) {
  case 'email':
     // Origin is email
  break;

  case '1': // this would probably interfere with true, hence the quotes
     // Origin is email
  break;

  default:
    // No origin; Captcha
  break;
}
?> 
```

对于更安全的解决方案，它可以是在发送电子邮件时生成的授权密钥，然后与链接中的密钥进行比较。

```
<?php // The page sending the mail
$key = md5(time()); // Or something else, maybe shorten it to fit better in the url

  // Save the key in a table

mail(); // Mail with unique link with ?o=$key in the end
?>

<?php // The page
if(isset($_GET['o'])) {
  // Check if the key exists in the table and delete it because it is used.
}
?> 
```

# node.js - heroku上的socket io

> ID：15912704
> 
> 赞同：1
> 
> 时间：2013-04-09T21:17:32.377
> 
> 标签：node.js, heroku, socket.io

我在 heroku 上有一个简单的节点程序，它会定期向所有客户端发送消息。但我不断收到以下警告，导致重新连接。这是我应该担心的事情吗？我大约每 2-3 次发射就得到这个。

需要注意的是，我在 localhost 上没有收到任何警告或重新连接。我正在为本地和 heroku 实例使用长轮询配置。此外，我在 heroku 上的 PS 规模越高，我得到的这些警告就越多。

错误

```
warn: client not handshaken client should reconnect 
```

应用程序.js

```
io.configure(function () { 
  io.set("transports", ["xhr-polling"]); 
  io.set("polling duration", 10); 
});

io.sockets.on('connection', function (socket) {
  socket.emit('news', 'reconnect');
});

setInterval(function(){
  io.sockets.emit('news', {time: new Date()} )
},3000); 
```

客户端.js

```
var socket = io.connect('/');
socket.on('news', function (data) {
  console.log(data);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T03:58:22.203

> 此外，我在 heroku 上的 PS 规模越高，我得到的这些警告就越多。

是关键。

Socket.io 设计为在单个进程中运行。它将会话存储在内存中。您需要您的代理具有粘性，始终将同一个用户发送到同一个进程，或者您需要共享会话（从那时起您共享房间会更好）；

信息是@

[https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

简而言之，您需要使用 redis

```
var RedisStore = require('socket.io/lib/stores/redis')
  , redis  = require('socket.io/node_modules/redis')
  , pub    = redis.createClient()
  , sub    = redis.createClient()
  , client = redis.createClient();

io.set('store', new RedisStore({
  redisPub : pub
, redisSub : sub
, redisClient : client
})); 
```

幸运的是 heroku 有五个不同的 redis 插件，其中三个有免费层。

# c# - 拆分字符串 C#

> ID：15912719
> 
> 赞同：-7
> 
> 时间：2013-04-09T21:18:46.147
> 
> 标签：c#, .net, string

如何在C#中将字符串“ `test1&test2`”拆分为不带分隔符“ ”的`test1`“”“ ”`test2``&`

```
function("test1&test2","&") == "test1"

function("test1&test2","&") == "test2" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:21:02.297

[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.80%29.aspx)返回 a `string[]`，第一个元素是“test1”，第二个是“test2”：

```
string[] split = "test1&test2".Split('&');
string test1 = split[0];
string test2 = split[1]; 
```

[**演示**](http://ideone.com/oFVKOX)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:21:10.380

[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法是您正在寻找的：

```
string input = "test1&test2";
string[] parts = input.Split(new[] { '&' }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:20:41.930

```
string[] parts = "test1&test2".Split(new char[]{'&'}); 
```

就那么简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T21:20:50.490

你试过什么？

名义上只使用`String.Split`：

```
var s = "test1&test2";
var results = s.Split(new char[] {'&'}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T21:21:16.723

这是一个简单的`string.Split`

```
string example = "test1&test2";
string[] parts = example.Split('&');
Console.WriteLine(parts[0]);    
Console.WriteLine(parts[1]); 
```

[String.Split 上的文档](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

请注意，String.Split 需要 a `params char[]`，因此也可以传递一个简单的 char 作品....

# c# - 验证 Windows Phone 应用内购买收据

> ID：15912720
> 
> 赞同：3
> 
> 时间：2013-04-09T21:18:48.507
> 
> 标签：c#, xml

我正在开发一个 Windows Phone 8 应用程序。我的应用将包括应用内购买。我试图理解收据的概念。据我了解，有人在我的应用程序内购买产品后，会生成收据。

```
<?xml version="1.0"?>
<Receipt Version="1.0" CertificateId="{Identifier1}" xmlns="http://schemas.microsoft.com/windows/2012/store/receipt">
  <ProductReceipt PurchasePrice="${PurchaseAmount}" PurchaseDate="{DateTime}" Id="{Guid1}" AppId="{Guid2}" ProductId="{ProductName}" ProductType="Consumable" PublisherUserId="{Identifier2}" PublisherDeviceId="{Identifier3}" MicrosoftProductId="{Guid3}" />
  <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
      <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315" />
      <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
      <Reference URI="">
        <Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" /></Transforms>
    <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
    <DigestValue>{Identifier4}</DigestValue>
      </Reference>
    </SignedInfo>

    <SignatureValue>{HashedValue}</SignatureValue>
  </Signature>
</Receipt> 
```

伟大的！不过，我不确定如何判断这张收据是否来自微软的服务器。有人可以向我解释如何验证吗？我看到了这个：[http](http://code.msdn.microsoft.com/wpapps/In-app-purchase-receipt-c3e0bce4) ://code.msdn.microsoft.com/wpapps/In-app-purchase-receipt-c3e0bce4但是，这对我来说没有意义。我不明白示例中的证书。“IapReceiptProduction.cer”是固定的吗？或者只是为了这个样本？

如果这是一个愚蠢的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T14:10:46.967

'Receipt' XML 元素中的 'CertificateId' 属性确定用于签署 Windows 应用商店收据的证书。获得 CertificateID（示例中的“{Identifier1}”）后，您可以从以下代码示例中指定的 URL 下载所需的证书，即“certificateUrl”。这是您以编程方式下载证书的方式：

```
public static X509Certificate2 RetrieveCertificate(string certificateId)
{
    const int MaxCertificateSize = 10000;

    // We are attempting to retrieve the following url. The getAppReceiptAsync website at 
    // http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentapp.getappreceiptasync.aspx
    // lists the following format for the certificate url.
    String certificateUrl = String.Format("https://go.microsoft.com/fwlink/?LinkId=246509&cid={0}", certificateId);

    // Make an HTTP GET request for the certificate
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(certificateUrl);
    request.Method = "GET";

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    // Retrieve the certificate out of the response stream
    byte[] responseBuffer = new byte[MaxCertificateSize];
    Stream resStream = response.GetResponseStream();
    int bytesRead = ReadResponseBytes(responseBuffer, resStream);

    if (bytesRead < 1)
    {
        //TODO: Handle error here
    }

    return new X509Certificate2(responseBuffer);
} 
```

[您可以在此处](http://msdn.microsoft.com/en-ie/library/windows/apps/jj649137.aspx "这里")查看更多此代码示例。该示例中包含“IapReceiptProduction.cer”只是为了显示收据验证的工作原理，而无需通过代码下载证书。获得证书后，您可以使用[System.Security.Cryptography.Xml.SignedXml](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.signedxml(v=vs.71).aspx) API 来验证收据，如您链接的代码示例中所示。

# powershell - PowerShell 逻辑

> ID：15912721
> 
> 赞同：8
> 
> 时间：2013-04-09T21:18:53.193
> 
> 标签：powershell, compare, logic, equals

看着[关于 PowerShell 的_Comparison_Operators 的帮助部分，](http://technet.microsoft.com/en-us/library/hh847759.aspx)我明白了这一点：

```
PS C:\> $false,$false -eq $true
PS C:\> 
```

左侧没有任何内容与右侧匹配，因此没有返回任何内容，甚至没有`$null`.

我不明白这一点：

```
PS C:\> $true -eq $false,$false
True
PS C:\> 
```

是不是因为它首先执行`$true -eq $false`返回**False**，然后采取该**False**并执行`$false -eq $false`返回**True**？

**更多信息**

下面返回 false 的原因是因为它将字符串与数组进行比较，对吗？字符串不等于数组。

```
PS C:\> "abc" -eq "abc","def"
False 
```

**回答？**

更多的挖掘表明它`$true`等于一个物体。

```
PS C:\> $true -eq [array]
True
PS C:\> $true -eq [string]
True
PS C:\> $true -eq [int]
True
PS C:\> $true -eq [bool]
True 
```

重要的是这些对象的值。

```
PS C:\> $true -eq [int]0
False 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T22:14:28.530

我喜欢这样的关于语言的行为和特性的基本问题……给我一个阅读 PowerShell 语言规范的借口。

您可以下载上述规范：[2.0](http://www.microsoft.com/en-us/download/details.aspx?id=9706)和[3.0](http://www.microsoft.com/en-us/download/details.aspx?id=36389)。请参阅第 7.8.1 节 - 相等和关系运算符。

对于问题的第一部分，实际上返回了一些东西 - 一个空数组，如下所示：`($false,$false -eq $true).psbase`

```
Length         : 0
LongLength     : 0
Rank           : 1
SyncRoot       : {}
IsReadOnly     : False
IsFixedSize    : True
IsSynchronized : False
Count          : 0 
```

从规格 -

> 如果左操作数指定的值不是集合，则结果为 bool 类型。否则，结果是一个可能为空的无约束一维数组，其中包含与右操作数指定的值进行比较时测试为 True 的集合元素。

对于第二部分，因为左操作数本身就是一个布尔值，我认为它总是结果。仅当右操作数是一个集合时。

一些例子：

```
$true -eq 1,2,3,4
$true -eq '','','',''
$true -eq '',1,$true,$false
$true -eq $null,$false,1,'' 
```

所有这些回报`$true`。相反，所有这些都返回`$false`

```
$false -eq 1,2,3,4
$false -eq '','','',''
$false -eq '',1,$true,$false
$false -eq $null,$false,1,''
$false -eq $true,$true,$true 
```

左操作数的类型非常重要。这将返回`$true`:`$false -eq 0`因为右操作数可以转换为左操作数的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T22:09:46.303

最佳的揣测：

它评估为 True 因为它是一个包含多个成员的数组。数组没有 ToBoolean() 方法。

只要它是一个标量，或者一个只有一个成员的数组，Powershell 就可以将它强制转换为一个标量并获取该成员的 ToBoolean() 方法。只要它达到 2 或更多，它总是返回 True，不管元素是什么。如果没有 ToBoolean()，并且它回退到默认的 ToString() 方法，那么它总是会评估为 True。

或者可能不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T21:52:55.057

也许`-eq`运营商正在评估他们的存在（也就是 not `$null`）而不是他们的价值。

也许类似于 IF 语句？

```
PS> if("anyval"){$true}else{$false}
True 
```

[@Joey 提供的这个](https://stackoverflow.com/questions/785877/why-null-is-false-but-null-null-is-true)答案也可能很有用。

# ios - 用于从 Web 服务器数据更新 NSManagedObjects 的设计模式

> ID：15912723
> 
> 赞同：1
> 
> 时间：2013-04-09T21:19:00.637
> 
> 标签：ios, core-data

我试图有效地做到这一点，我想知道标准设计模式是什么，基本上将对象从 MYSQL 同步到核心数据。

我在想： 1\. 将 MYSQL 中的对象作为 JSON 发送 2\. 当我遍历每个 JSON 对象时，从核心数据中提取相应的对象，然后删除，然后插入具有更新属性的新对象。

我担心的是，这将需要在每个循环中访问数据库（我想放慢速度）。

所以我想我可以遍历 JSON 结果并提取我想从 CD 中提取的所有名称。然后使用该名称数组进行大量 CD 查询。然后我会删除这些，然后插入新的。但我认为大规模查询需要一段时间。

你们怎么看，最好的方法或不同的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:27:39.517

例如，您可以使用第一种方法，然后每 100 条记录提交一次数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:52:47.723

我认为类似于 “核心数据编程指南”中[有效地实现查找或创建中描述的方法应该在这里工作：](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW4)

*   按同样存储在数据库中的某个唯一 ID 对 JSON 对象进行排序（或使服务器按排序顺序返回对象）。
*   对数据库中的所有项目执行 fetch 请求，按相同的 id 排序。也许为获取请求设置批量大小。
*   并行遍历两个列表（JSON 对象和获取的项目）。这允许在所有条目的单个循环中检测新的、更新的和删除的对象。

如果条目的数量非常大，则可能需要在中间保存上下文，或者使用显式自动释放池来限制内存存储。

# javascript - 在 Rails 中，如何获取具有动态创建的 id 的元素？

> ID：15912729
> 
> 赞同：2
> 
> 时间：2013-04-09T21:19:33.030
> 
> 标签：javascript, jquery, ruby-on-rails

所以我有一个包含多个 div 列表的索引页面。每个 div 都有一个动态创建的 id，在本例中为 edit_<%= address.id%>。我正在尝试编写一些 jquery，以便当我将鼠标悬停在单个 div 上时，会显示一些隐藏的链接，或者当我单击此单个列表的编辑链接时，会弹出一个表单。我可以像这样内联：

```
onclick="$('#edit_<%= address.id %>').dialog();" 
```

但是一旦在我的 application.js 文件中是这样的：

```
$(document).ready(function() {
$('#edit_<%= @address.id%>').dialog();
}); 
```

它不起作用。现在我假设这是因为我在视图/控制器之外使用它，这个变量实际上是有意义的。有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:23:17.213

您试图在 JavaScript 文件中获取 rails 变量，但它不是这样工作的。我认为对您来说最简单的解决方案就是使用[gon](https://github.com/gazay/gon) gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:27:16.453

为所有目标 DIV 使用特定的类名。即使它们将具有动态 ID，如果您使用预定义的类名，您也可以使用简单的 jQuery 找到它们。然后，您可以在应用程序 JS 文件中编写代码并仅针对那些特定的类名。

更新：这是一个示例，可以为您提供所需的内容。这是直接的 HTML/Javascript，但容器 DIV 使用唯一 ID 但通用类名。您可以轻松地将其移动到您的 Rails 应用程序中：

```
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <style>
      .hidden-div {
        border: 1px solid silver;
        margin-bottom: 10px;
      }
      .hidden-div DIV {
        display: none;
      }
    </style>
    <script>
      $(function() { 
        $(".hidden-div").hover(function() {
          // we are hovering over a hidden-div class
          $(this).children("div").show();
        }, function() {
          // we are moving out of a hidden-div class
          $(this).children("div").hide();
        });
      });
    </script>
  </head>
  <body>

    <div id="random-id-1434" class="hidden-div">
      Hover over me to reveal my hidden fields
      <div>A hidden field</div>
      <div>A hidden field</div>
      <div>A hidden field</div>
      <div>A hidden field</div>
    </div>

    <div id="random-id-342" class="hidden-div">
      Hover over me to reveal my hidden fields
      <div>A hidden field</div>
      <div>A hidden field</div>
      <div>A hidden field</div>
      <div>A hidden field</div>
    </div>

    <div id="random-id-887" class="hidden-div">
      Hover over me to reveal my hidden fields
      <div>A hidden field</div>
      <div>A hidden field</div>
      <div>A hidden field</div>
      <div>A hidden field</div>
    </div>

  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:40:35.710

确保您的所有 css 元素都具有相同的起始 id 或类，然后您可以使用与此类似的一些 jquery 来选择它们，它会选择在其 id 开头带有编辑的所有 div`$('div[id^="#edit_"]').hover.dialog();`

以下是有关如何使用此选择器的一些文档

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

# android - 如何在 Android 上的文本文件中写入新行（回车）？

> ID：15912730
> 
> 赞同：0
> 
> 时间：2013-04-09T21:19:35.373
> 
> 标签：android, text, newline

我正在尝试在 Android 的文本文件中添加一个新行（我们在 PC 上使用 Enter 键）。

这是我的代码：

```
try {
    File tarjeta = Environment.getExternalStorageDirectory();
    File archivo = new File(tarjeta.getAbsolutePath()+"/.Info/", "values.txt");
    OutputStreamWriter escritor = new OutputStreamWriter(new FileOutputStream(archivo), "UTF-8");
    escritor.write("Pencil" + "\n" + "Book");
    escritor.flush();
    escritor.close();
    Toast.makeText(this, "Guardado satisfactoriamente!", Toast.LENGTH_SHORT).show();
} catch(IOException ioe) {

} 
```

所以一切都很好，但是当我将这个“.txt”文件带到 Windows 操作系统并打开它时，我得到了这个结果：

```
PencilBook 
```

虽然我想要这个结果：

```
Pencil
Book 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T21:21:39.613

Windows 使用`\r\n`它作为它的行分隔符，不像 UNIX 只使用`\n`. 这就是它在 Windows 的记事本中显示不正确的原因。

# javascript - 如果语句无法正确比较，则 JQuery 选择值

> ID：15912731
> 
> 赞同：0
> 
> 时间：2013-04-09T21:19:36.487
> 
> 标签：javascript, jquery, html

我正在测试通过将所选值与字符串进行比较来查看 if 语句的工作情况，然后显示弹出警报。但是，无论我具体选择什么，警报结果总是显示“关闭”。似乎 if 语句比较不正确。这是我的代码，

```
$("#options").change(function(){
                                var selected = $("option:selected", this).val();

                                if(selected == 'line 2')
                                {
                                    alert("line 2");
                                }
                                else if(selected == 'line 3')
                                {
                                    alert("line 3");
                                }
                                else if(selected == 'line 4')
                                {
                                    alert("line 4");
                                }
                                else if(selected == 'line 8')
                                {
                                    alert("line 8");
                                }
                                else
                                {
                                    alert("off");
                                }

                    }); 
```

HTML下拉代码，

```
<select id="options">
                <optgroup label="Caption">
                    <option value="off1">Off</option>
                    <option selected value="2 line">2 Lines</option>
                    <option value="3 line">3 lines</option>
                </optgroup>
                <optgroup label="Transcript">
                    <option value="off2">Off</option>
                    <option value="4 line">4 Lines</option>
                    <option value="8 line">8 lines</option>
                </optgroup>
            </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:22:32.850

值是`2 line`并且您正在比较`line 2`（*例如*）

尝试这个;

```
var selected = $("option:selected", this).val();
    if(selected == '2 line')
       {
         alert("line 2");
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:23:01.510

您所有选项的价值都与您的测试相反。

```
$("#options").change(function(){
                            var selected = $("option:selected", this).val();
                            alert(selected); 
                            if(selected == 'line 2')
                            {
                                alert("line 2");
                            }
                            else if(selected == 'line 3')
                            {
                                alert("line 3");
                            }
                            else if(selected == 'line 4')
                            {
                                alert("line 4");
                            }
                            else if(selected == 'line 8')
                            {
                                alert("line 8");
                            }
                            else
                            {
                                alert("off");
                            }

                }); 
```

添加该警报将帮助您针对正确的值进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:22:25.610

您要比较的值与 html 中的值不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:31:46.050

您在测试中恢复了行文本，并且您最好使用数组来实现这一点。

```
(function() {
    var selectionValues = [
        '2 line',
        '3 line',
        '4 line',
        '8 line'
    ];

    $("#options").change(function() {
        var selected = $("option:selected", this).val();

        var index = selectionValues.indexOf(selected);
        var result;

        if (index !== -1) {
            result = selectionValues[index];
        }
        else {
            result = "Off";
        }

        alert(result);
    });
})(); 
```

# html - 为什么当我更改图像格式时它会弄乱我的网站

> ID：15912739
> 
> 赞同：0
> 
> 时间：2013-04-09T21:20:01.657
> 
> 标签：html, css, media-queries, formats

好的，这是一个奇怪的。我已经修复了它，但我想了解它为什么不起作用。您必须缩小屏幕，因为我通过在 li 标签上放置 255px 的最大高度来修复它，如果您希望在全屏时将其关闭，并且会显示相同的问题，您可以将其关闭。

所以这是第一个链接。

[http://madaxedesign.co.uk/dev/portfolio.html](http://madaxedesign.co.uk/dev/portfolio.html)

如果你看它更小或取消它的最大高度，它会破裂，并且不会让任何低于它的东西漂浮在那里。请注意，第一个 li img 标签有一个 jpg 作为背景。

现在进行这个奇怪的修复：S

我将 JPG 更改为 PNG，这就是我所做的一切......它工作了 [http://madaxedesign.co.uk/dev/myWork.html](http://madaxedesign.co.uk/dev/myWork.html)

我不知道为什么会这样做..并且希望有人解释为什么更改格式会对我做这样的事情，这无关紧要。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:39:10.267

由于数学上的微小差异，您遇到了一个有趣的问题。

如果您在 Firefox 中查看您的网站并检查`<li class="corners hide">`元素，则在投资组合页面中，高度计算为 214.933 像素，而在 myWork 页面中，该值计算为 210.663 像素。所有其他`<li class="corners">`元素在两个页面上的计算高度均为 210.633。结果，由于浮动的工作方式，稍高的第一个浮动会强制下一个浮动从其右边缘开始，而不是从父容器的边缘开始。

**但为什么？**

如果你看一下你的 jpg，尺寸是 250x261，而对于 png，250x260，高 1px，这可能是数学的起源。您所有的其他背景图像都是 250x260。数学上的差异源于使用`auto`缩放图像，有点棘手。

**如何解决？**

尝试删除多余的像素。

# javascript - 褪色幻灯片 Javascript

> ID：15912740
> 
> 赞同：0
> 
> 时间：2013-04-09T21:20:08.833
> 
> 标签：javascript, jquery

有大量褪色的幻灯片要复制和粘贴。但我想了解它是如何工作的......所以我在 JavaScript 中有这个工作幻灯片。如何为其添加淡入淡出效果？可以通过添加jquery fadeOut() 方法来完成吗？提前致谢！

```
var counter = 0;

function slideShow() {
var pics = [6];

pics[0] = "bilder/1.jpg";
pics[1] = "bilder/2.jpg";
pics[2] = "bilder/3.jpg";
pics[3] = "bilder/4.jpg";
pics[4] = "bilder/5.jpg";
pics[5] = "bilder/6.jpg";

document.getElementById('bildspelsrc').src = pics[counter];

counter++;
if (counter % 6 == 0) counter = 0;
}

setInterval(slideShow,1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:34:16.950

不幸的是，这不适用于您当前的方法。$.fadeOut() 淡化元素，在你的幻灯片中你实际上是在改变一个属性。您不能将一张图片淡入另一张图片。正确的方法是让所有幻灯片成为自己的 DOM 元素并在它们之间淡入淡出。互联网上有很多这样的例子。但是，如果你确实想坚持你正在做的方式，你可以淡出元素，更改 src，然后淡入元素。

```
 $('#bildspelsrc').fadeOut(250, function () { $(this)[0].src = pics[counter]; }).fadeIn(250); 
```

这是概念证明的链接：http: [//jsfiddle.net/dhQk/Y6Epm/](http://jsfiddle.net/dhQk/Y6Epm/)

**编辑** 为您创建了一个新版本，作为大多数其他滑块如何开始的开始。这是它获取每张幻灯片并将其存储在内存中的位置。然后一次一个地淡化它们。代码被大量注释以帮助您。

[http://jsfiddle.net/dhQk/Y6Epm/4/](http://jsfiddle.net/dhQk/Y6Epm/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:31:04.227

```
var pics[] = {...//images in here}
var idx = 0;

function slide(){
 idx++;
 if(idx == pics.length)
   idx =0;

 $("#bildspelsrc").fadeOut(1000, function(){
    $("#bildspelsrc").attr("src", pics[idx]).fadeIn(1000);
 });
} 
```

**更新**
您将需要一个触发器，尝试在页面加载时调用它

```
 $(document).ready(function(){
      setInterval(slide,1000);
}); 
```

这将遍历您的图像数组并首先将它们淡出，然后淡入新图像

**UPDATE 2**
for animate 只需将淡入淡出部分替换为

```
$('#bildspelsrc').animate({opacity: 0}, 'slow', function() {
        $(this).attr({'src': pics[idx]}).animate({opacity: 1});
    }); 
```

# java - 需要的建议：有效的 Java 到 C 源代码转换器

> ID：15912745
> 
> 赞同：5
> 
> 时间：2013-04-09T21:20:24.107
> 
> 标签：java, c, reverse-engineering, cross-compiling

我用谷歌搜索了一下，但找不到任何好的 Java 到 C 源代码转换器。

我的问题是：

1.  这可能吗 ？

2.  是否有任何可靠的 Java 到 C src 转换器你能想到我可以看看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:32:55.543

这是可能的，但非常困难 - 对于初学者，您需要将垃圾收集器与您的 C 源代码集成。有几个项目尝试这样做，例如[Toba](http://www.cs.arizona.edu/projects/sumatra/toba/)，但它们不可靠且不再维护。通常你会发现有人在他们的硕士论文中尝试这样的事情，之后很快就被放弃了。

如果你这样做是为了加速你的程序，那么不要这样做——Java 与本机编译的代码相比已经相当快了（尽管它往往会使用更多的内存），而且你翻译的 C 代码不会运行能够充分利用C语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T14:38:38.353

用途`Java2C`：从 Java 到 C 语言的翻译器，特别适用于嵌入式和快速实时应用程序，包括 C 中的类 java 运行时系统。

[http://sourceforge.net/projects/java2c/](http://sourceforge.net/projects/java2c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T00:17:26.213

您也可以尝试 XMLVM，它不会将 java*源代码*转换为 C，而是 Java 字节码（我相信它更有用）。

你可以[看看这里](http://www.xmlvm.org/overview/)

# c# - 为什么 iTextSharp PdfWriter.CompressionLevel 设置器不更改值？

> ID：15912747
> 
> 赞同：0
> 
> 时间：2013-04-09T21:20:27.297
> 
> 标签：c#, pdf, itextsharp

我正在使用 iTextSharp (LGPL / MPL) 4.1.6 从现有 PDF 流中获取页面范围，对其进行压缩并将其保存到新文件中：

```
private static void CreateFile(Stream stream, string filename, int first, int last)
{
    RandomAccessFileOrArray raf = new RandomAccessFileOrArray(stream);
    PdfReader reader = new PdfReader(raf, null);
    reader.SelectPages(string.Format("{0}-{1}", first, last));
    char version = reader.PdfVersion; // == '4'
    using (FileStream fs = new FileStream(filename, FileMode.Create))
    {
        PdfStamper stamper = new PdfStamper(reader, fs, PdfWriter.VERSION_1_5);
        PdfWriter writer = stamper.Writer;
        writer.SetPdfVersion(PdfWriter.PDF_VERSION_1_5);
        writer.CompressionLevel = PdfStream.BEST_COMPRESSION;
        // this will always be true - why?
        if (PdfStream.DEFAULT_COMPRESSION == writer.CompressionLevel)
        {
            var help = "what am I doing wrong?";
        }
        for (int i = 1; i <= reader.NumberOfPages; i++)
        {
            reader.SetPageContent(i, reader.GetPageContent(i));
        }
        stamper.SetFullCompression();
        stamper.Close();
    }
    reader.Close();
    raf.Close();
} 
```

压缩线是新的。但我注意到添加压缩代码之前和之后的文件大小几乎没有差异。在调试模式下单步执行时，我看到 CompressionLevel 始终为 -1（默认），即使我明确将其设置为 9（最佳）。

如何将压缩级别设置为最佳并使其坚持下去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:29:12.987

如果您将[4.1.6 代码](https://github.com/itextsharper/iTextSharp-4.1.6/blob/master/iTextSharp/text/pdf/PdfWriter.cs#L2094)与[当前代码](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/src/core/iTextSharp/text/pdf/PdfWriter.cs#l2217)进行比较，您会发现它们正在对内部`compressionLevel`变量而不是属性的`value`.

**4.1.6**

```
public int CompressionLevel {
    set {
        if (compressionLevel < PdfStream.NO_COMPRESSION || compressionLevel > PdfStream.BEST_COMPRESSION)
            compressionLevel = PdfStream.DEFAULT_COMPRESSION;
        else
            compressionLevel = value;
    }
    get {
        return compressionLevel;
    }
} 
```

**5.4.0**

```
public int CompressionLevel {
    set {
        if (value < PdfStream.NO_COMPRESSION || value > PdfStream.BEST_COMPRESSION)
            compressionLevel = PdfStream.DEFAULT_COMPRESSION;
        else
            compressionLevel = value;
    }
    get {
        return compressionLevel;
    }
} 
```

4.x 系列不再受支持，但您可以自行[下载源代码](https://github.com/itextsharper/iTextSharp-4.1.6)并进行更改。

# mysql - COUNT 比提取记录和在代码中计数更快吗？

> ID：15912749
> 
> 赞同：22
> 
> 时间：2013-04-09T21:20:34.300
> 
> 标签：mysql, sql

情况如下：

1.  我首先需要运行查询以了解存在多少条记录。

    例如：`SELECT COUNT(DISTINCT userid) from users;`

2.  通常这就是所有需要的。但是，有时（比如 30% 的时间）在第一次查询之后，用户会想要运行第二次查询，详细说明记录。

    例如：`SELECT * FROM users;`

是否有任何理由`SELECT COUNT`最初运行而不是仅仅运行`SELECT`运行？也就是说，让 SQL 中的记录计数比实际拉回记录要快吗？还是它在本质上做同样的工作，所以我应该避免做两个查询？

换句话说，总是在第一个查询中提取记录（而不是 use `COUNT`）是否更好，然后在代码中计算记录（Java）。如果用户想要运行第二个查询，那太好了，我已经有了数据。如果没有，那就扔掉它。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-09T21:26:49.727

如果您知道需要数据，请继续将其提取并在代码中计数。但是，如果您只需要计数，从数据库中提取计数比实际检索行要快得多。此外，仅提取您需要的内容也是标准做法。

例如，如果要计算表中的所有行，大多数数据库实现不需要查看任何行。表知道它们有多少行。如果查询在`where`子句中有过滤器并且可以使用索引，则它再次不需要查看实际行的数据，只需计算索引中的行数。

所有这一切都没有计算传输的数据量减少。

关于数据库速度的经验法则是继续尝试自己。一般规则并不总是一个好的指标。例如，如果表是 10 行并且只有几列，我可能会在需要它的情况下将整个东西拉出来，因为 2 次往返数据库会超过查询的成本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T21:34:35.610

应该考虑两件事

# 查询 #1

```
SELECT COUNT(DISTINCT userid) from users; 
```

使用索引，这个查询会快很多`userid`；如果您没有索引，`userid`并且您已经拥有的索引都没有以 开头`userid`，则运行以下命令：

```
ALTER TABLE user ADD INDEX (userid); 
```

这将使查询优化器选择查看索引而不是触摸表。

# 查询 #2

```
SELECT * from users; 
```

为什么要费心获取每一行中的每一列只是为了计算行数？

您可以将其替换为

```
SELECT COUNT(id) FROM users; 
```

其中 id 是主键或

```
SELECT COUNT(1) FROM users; 
```

您必须对哪个查询更快进行基准测试，`SELECT COUNT(id)`或者`SELECT COUNT(1)`

# 结语

除非您在计数时确实需要数据，否则让计数在服务器中进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T21:25:12.290

它更快，因为：

*   数据库的设计和编写方式是为了使这样的事情尽可能快。
*   您不必将整个表格发送到您的应用程序中。只是一个整数。

**您永远不应该发送整个表格并计算应用程序方面！**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:25:21.797

只是个人意见：

如果在 100% 的情况下不需要您的“详细”查询，那么使用`count()`MySQL 的功能是有意义的。它更快更便宜：MySQL 执行“繁重”的计数任务并发送一小块数据，而不是发送大量数据并让您的应用程序执行遍历记录集和计算行数的“繁重”任务。

也就是说，通常的提示：确保您的表已正确索引，以便您的查询以最佳方式运行。

# explorer - 处理 VS/TFS 2012 UI

> ID：15912752
> 
> 赞同：1
> 
> 时间：2013-04-09T21:20:41.873
> 
> 标签：explorer

好的 - 所以 2012 年已经过去了一段时间，我们公司需要升级。但我不能说我从早期的 beta 和 RC 版本开始就喜欢新的 UI 变化。

我认为它从 2010 年开始变得愚蠢，UI 元素的旧布局和放置只是一种更有效的 UI/UX 设计 IMO。

具体来说，我对新的 Team Explorer 感到恼火。

2012年有没有办法获得TFS2010风格的团队资源管理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:29:56.393

不，没有，除非有人发布了一个不起眼的插件来替换它。

作为从最早的一些公开测试版开始就一直在使用它的人，我可以说你很快就会习惯它——我个人希望每个工作项目、构建等都有一个标签。熟悉你按钮，如果您需要更多空间，请考虑将其放在第二台显示器上。

# java - 变量比较

> ID：15912754
> 
> 赞同：-2
> 
> 时间：2013-04-09T21:20:45.093
> 
> 标签：java, android

我正在使用登录创建 android 应用程序。它将应用程序中输入的用户名和密码发送到远程服务器上的 php 脚本，php 脚本检查用户名和密码是否正确，如果是则打印 1，如果错误则打印 2。没有返回 html 标签，只有数字 1 或2.

这是我正在使用的代码

```
 response = SimpleHttpClient.executeHttpPost("http://......myscript.php", postParameters);
   String res = response.toString();

   if (res.equals("1")) {

       error.setText("ok");

   }
   else if (res.equals("2")) {

       error.setText("fail");
   }
   else {

       error.setText(res);
   } 
```

在我得到响应变量 error.setText(res) 后，它会根据正确或不正确的用户名/密码显示 1 或 2。但是，当我尝试“控制”答案（如果和 else if 部分代码）时，什么也没有发生，并且“else”部分被执行。我试图通过 (Integer.parseInt()) 将 res 转换为 int 但同样的事情，尝试不使用 response.toString，直接比较响应，以及我能想到的一切。我在哪里弄错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:34:10.727

尝试使用扫描仪来确定 int：

```
int responseInt = new Scanner(res).nextInt();
//do comparisons with responseInt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:36:48.730

我修复了它，使用 res = res.trim() ，然后使用 Integer.parseInt(res); 将其转换为 int；

谢谢 ：）

# c++ - 如何为我的自定义编译器制作解决方案资源管理器或项目界面

> ID：15912760
> 
> 赞同：2
> 
> 时间：2013-04-09T21:20:50.197
> 
> 标签：c++, compiler-construction, interface

我正在使用 Visual Studio 2012、C++ 和野牛工具开发“Go”编程语言编译器。我想通过制作一个界面来增加趣味，在这种情况下，我可以开始一个新的 Go 项目，编写我的包和 Go 代码并将其组织在解决方案资源管理器中，就好像这是我的编译器的可视化环境一样。我需要知道我应该如何开始，可以在visual studio上完成还是我需要像QT这样的东西。请给我有关这方面的信息。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:47:54.103

可以[创建自己的项目类型](http://msdn.microsoft.com/en-us/library/vstudio/cc512961.aspx)并支持外部编译器；然而，这并不简单。（我自己没有做过；我只知道这是可能的，因为 SDK 经常将自己的项目类型添加到 Visual Studio。）显然，还有一个[托管包框架](http://msdn.microsoft.com/en-us/library/bb166157.aspx)可以稍微简化流程。

# html - 显示不同的悬停图标列表

> ID：15912768
> 
> 赞同：0
> 
> 时间：2013-04-09T21:21:03.693
> 
> 标签：html, css

在[http://www.elitedeafpoker.com/dev/](http://www.elitedeafpoker.com/dev/)上，我试图在“手力”下显示列表的 9 个有序图标（1、2、3、4、...）。现在我将它们设置为仅显示 #1 图标，但我不确定当链接悬停在 CSS（可能是 CSS3？）时，每个列表显示 9 个图标的最佳方式是什么。

HTML

```
<div class="div-list">
<h2 style="width:250px;">HAND STRENGTH</h2>
      <ul class="list">
        <li><a href="#">ROYAL FLUSH</a></li>
        <li><a href="#">STRAIGHT FLUSH</a></li>
        <li><a href="#">FOUR OF A KIND</a></li>
        <li><a href="#">FLUSH</a></li>
        <li><a href="#">STRAIGHT</a></li>
        <li><a href="#">THREE OF A KIND</a></li>
        <li><a href="#">TWO-PAIR</a></li>
        <li><a href="#">ONE-PAIR</a></li>
        <li><a href="#">HIGH-CARD</a></li>
     </ul>
</div> 
```

CSS

```
.list {      
    list-style:none
    overflow: hidden;
    width:250px;
    margin: 0px 0px 50px 0px;
}
.list a {
    display: block;
    margin-left:20px;   
}
.list li:hover {
    background:url(../img/handstreng.icon1.png) 0px -14px no-repeat;
}
.list li {
    list-style:none;
    background:url(../img/handstreng.icon1.png) 0px 4px no-repeat;
    display: block;
    overflow: hidden;
    font-size: 14px;
    line-height: 20px;
    text-transform: uppercase;
}
.list li a {
    color: #ffffff;
}
.list li a:hover {
    color: #ff670d;
} 
```

其他图标文件有 handstreng.icon2.png、handstreng.icon3.png 等...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:04:31.720

可以使用[计数器](http://www.w3.org/TR/CSS21/generate.html#counters)(CSS 2.1) 和[`::before`伪元素](http://www.w3.org/TR/css3-selectors/#gen-content)(CSS 3) 处理 CSS（并且没有图像）

`[jsfiddle demo](http://jsfiddle.net/4qeaR/2/)`

因为这是一个有序列表，所以使用它是有意义的`<ol>`

```
<ol class="hand-strength">
    <li><a href="#">ROYAL FLUSH</a></li>
    <li><a href="#">STRAIGHT FLUSH</a></li>
    ...
</ol> 
```

CSS

```
.hand-strength {
    color:white;
    list-style:none;
    margin:0;
    padding:0;
}
.hand-strength a {
    color:white;
    font-size:1rem;
    text-decoration:none;
}
.hand-strength li {
    counter-increment:hs; 
}
.hand-strength a::before, .hand-strength a:before {
    content: counter(hs);
    display:inline-block;
    width:14px;
    height:14px;
    line-height:14px;
    font-size:9px;
    text-align:center;
    border-radius:7px;
    background:#474747;
    margin-right:4px;
    position:relative;
    top:-3px
}
.hand-strength a:hover {
    color:#ff670d;
}
.hand-strength a:hover::before, .hand-strength a:hover:before {
    background:#F1AD03;
    color:#fff;
} 
```

`::before`受现代浏览器和 IE9+ 支持

`:before`受现代浏览器和 IE8+ 支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:27:48.433

一种方法是：

**HTML**

```
<div class="div-list">

<h2 style="width:250px;">HAND STRENGTH</h2>
      <ul class="list">
        <li class="item1"><a href="#">ROYAL FLUSH</a></li>
        <li class="item2"><a href="#">STRAIGHT FLUSH</a></li>
        <li class="item3"><a href="#">FOUR OF A KIND</a></li>
        <li class="item4"><a href="#">FLUSH</a></li>
        <li class="item5"><a href="#">STRAIGHT</a></li>
        <li class="item6"><a href="#">THREE OF A KIND</a></li>
        <li class="item7"><a href="#">TWO-PAIR</a></li>
        <li class="item8"><a href="#">ONE-PAIR</a></li>
        <li class="item9"><a href="#">HIGH-CARD</a></li>
     </ul>
</div> 
```

**CSS**

```
.list {      
    list-style:none
    overflow: hidden;
    width:250px;
    margin: 0px 0px 50px 0px;
}
.list a {
    display: block;
    margin-left:20px;   
}

.list li {
    list-style:none;
    display: block;
    overflow: hidden;
    font-size: 14px;
    line-height: 20px;
    text-transform: uppercase;
}
.list li a {
    color: #ffffff;
}
.list li a:hover {
    color: #ff670d;
}

list li.item1 {
    background:url(../img/handstreng.icon1.png) 0px 4px no-repeat;
}

list li.item2 {
    background-image:url(../img/handstreng.icon2.png) 0px 4px no-repeat;
}

etc.

.list li.item1:hover {
    background:url(../img/handstreng.icon1.png) 0px -14px no-repeat;
}

.list li.item2:hover {
    background:url(../img/handstreng.icon2.png) 0px -14px no-repeat;
}

etc. 
```

**另一种方法是 JavaScript，使用 jQuery**

```
$('ul.list li').each(function(i) {
  $(this).css('background','url(../img/handstreng.icon' + (i + 1) + '.png) 0px 4px no-repeat');
});

$('ul.list li').hover(function() {
  $(this).css('background','url(../img/handstreng.icon' + ($(this).index() + 1) + '.png) 0px 4px no-repeat');
}, function() {
  $(this).css('background','url(../img/handstreng.icon' + ($(this).index() + 1) + '.png) 0px -14px no-repeat');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:28:54.123

您可以使用`:nth-child`它，但它确实需要某种迭代。

简单的 JQuery 解决方案：

```
$('.list li').each(function(i) {
  $(this).css('background','url(../img/handstreng.icon'+(i+1)+'.png) 0px 4px no-repeat');
}); 
```

# macos - OS X .dictionary 格式信息

> ID：15912781
> 
> 赞同：7
> 
> 时间：2013-04-09T21:21:26.830
> 
> 标签：macos, format

谁知道我在哪里可以找到有关`.dictionary`格式的信息以及如何手动读取它？

我知道 .dictionary 是一个目录，但我不知道如何处理它的内容。

我想手动阅读。

# php - 发送 PHP 邮件标头的正确方法是什么？

> ID：15912788
> 
> 赞同：1
> 
> 时间：2013-04-09T21:22:06.520
> 
> 标签：php, gmail

我遇到了一个奇怪的问题。一些客户希望能够在通过其网站的 Web 表单提交的电子邮件中使用 gmail 预设回复。直到罐头回应，一切都很好。只需单击来自网络表单提交的电子邮件上的“回复”就可以像魅力一样回复发件人。然而，谷歌实验室的 CannedResponses 被证明是一个问题。预设回复是自动回复`myUsername@myWebserver.com`（显然是出于隐私原因更改）而不是发件人的电子邮件地址。我对标题做错了什么，还是有另一种解决方法？下面的代码：

```
function send_mail($to, $subject, $from, $messageData=array()) {

    // Build the message here

    $mailheaders = "From: $from";
    $mailheaders .= "\r\n";
    $mailheaders .= "Reply-To: $from";

    return mail($to, $subject, $message, $mailheaders);
} 
```

**编辑澄清：** 我的意思是发送自动回复`myUsername@myWebserver.com`是我的用户名`at`我的 Dreamhost Web 服务器 - ps0000.dreamhostps.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:06:28.003

虽然我强烈建议您切换到邮件程序库，例如 phpmailer 或 swiftmailer，但短期内您可以通过在 mail() 函数中使用 -f 参数来修复它

# android - 完成后如何关闭 IME 数字小键盘？

> ID：15912800
> 
> 赞同：3
> 
> 时间：2013-04-09T21:22:49.613
> 
> 标签：android, android-widget

我的应用程序有两个 EditText 小部件。他们的输入类型设置为数字。当我输入完数字键盘的数字后，我希望它们消失，但我在键盘上有一个 NEXT 按钮，而不是 DONE 按钮。我曾认为将其包含在 XML 中会修复它，但它没有用

```
android.imeOptions="actionDone" 
```

我也尝试将其放入 Java 代码中，但它无法编译（找不到符号）：

```
EditTextPrices.setImeOptions(actionDone); 
```

为什么编译不出来？而且，我怎样才能在我的数字键盘上获得 DONE 按钮而不是 NEXT 按钮？

这是 EditText 小部件的全文：

```
 <EditText
            android:id="@+id/EditTextPrices"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:inputType="number|numberDecimal"
            android:singleLine="true"
            android.imeOptions="actionDone"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:24:52.740

> 我曾认为将其包含在 XML 中会修复它，但它没有用

XML 中的命名空间由冒号描述。试试`android:imeOptions="actionDone"`。

> 为什么编译不出来？

因为没有什么命名`actionDone`的。使用`EditorInfo.IME_ACTION_DONE`而不是`actionDone`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T03:21:01.800

将此行添加到您的编辑文本中。

```
android:imeActionLabel="Next" 
```

普拉萨德 EBIZ

# php - php查找mysql所需参数

> ID：15912803
> 
> 赞同：1
> 
> 时间：2013-04-09T21:22:54.457
> 
> 标签：php, mysql

我以前在 c# 和 mssql 中做过这个，想知道是否有人知道我将如何用 mysql 和 php 来做。

我有一个存储过程。我需要从存储过程中找到所需的所有参数。从这里我可以将我的对象与参数匹配并将它们传递给存储过程。

如果有人知道可以完成的方法而不是每次插入都重复自己，这将节省我很多时间。

基本上想找出存储过程与 php 的 mysql 数据库的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:36:34.743

您可以使用 MySQL 的内置`information_schema`数据库来实现它。MySQL 本身使用该数据库来存储有关模式、表、列、... **和**过程的元信息 :)

使用以下查询获取有关属于过程的所有参数的信息：

```
SELECT * FROM `information_schema`.`PARAMETERS` 
WHERE `SPECIFIC_NAME` = 'YOUR_PROCEDURE_NAME' 
  AND `SPECIFIC_SCHEMA` = 'YOUR_DATABASE_NAME' 
```

当然，您可以细化查询。

# python - easy_install 或 pip 作为受限用户？

> ID：15912804
> 
> 赞同：7
> 
> 时间：2013-04-09T21:22:55.387
> 
> 标签：python, pip, easy-install

标准的 python [distutils 提供了一个 '--user' 选项](http://docs.python.org/2/install/index.html#alternate-installation-the-user-scheme)，它允许我以受限用户的身份安装一个包，如下所示：

```
python setup.py install --user 
```

是否有**easy_install**和**pip**的等价物？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T21:29:34.573

对于`pip`，请参阅[用户安装](http://www.pip-installer.org/en/latest/cookbook.html#user-installs)了解详细信息，但基本上，这正是您所期望的：

```
pip install --user Foo 
```

这有点棘手`easy_install`。正如 Ned Deily 指出的那样，如果您可以依赖`distribute`而不是`setuptools`，并且 0.6.11 或更高版本，您可以使用`--user`与 相同的`pip`。但是，如果您需要使用`setuptools`, 或更早版本`distribute`……请参阅[自定义安装位置](http://peak.telecommunity.com/DevCenter/EasyInstall#custom-installation-locations)了解详细信息（并注意它解释了如何创建和设置用户站点包，而不仅仅是如何安装在那里，因为它需要能够使用 Python 2.5 及更早版本，默认情况下不这样做）。但希望您只使用`easy_install`少数无法使用的软件包`pip`，所以这没什么大不了的。

但是，至少值得考虑是否[`virtualenv`](http://www.virtualenv.org)比用户站点目录更适合您要完成的任务。[正如文档所](http://www.pip-installer.org/en/latest/installing.html#using-virtualenv)解释的那样，`pip`并且`virtualenv`可以很好地协同工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:25:14.343

来自 easy_install 文档

[http://peak.telecommunity.com/DevCenter/EasyInstall#downloading-and-installing-a-package](http://peak.telecommunity.com/DevCenter/EasyInstall#downloading-and-installing-a-package)

> --install-dir=DIR, -d DIR 设置安装目录。您可以确保此目录在运行时位于 sys.path 上，并使用 pkg_resources.require() 来启用您需要的已安装包。
> 
> （0.4a2 中的新增功能）如果未在命令行或 distutils 配置文件中直接指定此选项，则使用 distutils 默认安装位置。通常，这将是 site-packages 目录，但如果您使用 distutils 配置文件，设置诸如 prefix 或 install_lib 之类的东西，那么在计算默认安装目录时会考虑这些设置，就像 --prefix 选项一样。
> 
> --prefix=DIR（0.6a10 中新增）使用指定目录作为计算默认安装和脚本目录的基础。在 Windows 上，生成的默认目录将是 prefix\Lib\site-packages 和 prefix\Scripts，而在其他平台上，默认目录将是 prefix/lib/python2.X/site-packages（替换了适当的版本）用于库和脚本的前缀/bin。
> 
> 请注意， --prefix 选项仅设置默认安装和脚本目录，不会覆盖在命令行或配置文件中设置的目录。

您还可以使用 ~/.pydistutils.cfg 文件指定它们

[http://peak.telecommunity.com/DevCenter/EasyInstall#mac-os-x-user-installation](http://peak.telecommunity.com/DevCenter/EasyInstall#mac-os-x-user-installation)

在安装 EasyInstall/setuptools 之前，只需创建一个具有以下内容的 ~/.pydistutils.cfg 文件（或将其添加到现有内容中）：

> [install] install_lib = ~/Library/Python/$py_version_short/site-packages install_scripts = ~/bin 这将告诉 distutils 和 EasyInstall 始终将软件包安装在您的个人站点软件包目录中，并将脚本安装到 ~/bin。（注意：不要在配置文件中将 $py_version_short 替换为实际的 Python 版本！distutils 将在运行时替换正确的值，因此无论您现在或将来使用什么 Python 版本，上述配置文件都应该正常工作.)
> 
> 完成此操作后，您可以按照正常安装说明使用 easy_install，无需任何其他特殊选项或步骤。
> 
> （但是请注意，~/bin 不在默认 PATH 中，因此您可能必须通过脚本的完整位置来引用脚本。您可能需要修改 shell 启动脚本（可能是 .bashrc 或 .profile）或您的 ~/ .MacOSX/environment.plist 将 ~/bin 包含在您的 PATH 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T17:50:50.897

我需要对我的 docker 执行相同的操作并部署到 AWS Elastic Beanstalk。

问题是**pip**和**easy_install**（由 python setup.py 调用）以`--user`不同的方式解释参数。

*   `pip install --user PackageName`将 PackageName 安装到`$PYTHONUSERBASE`环境变量。
*   `python setup.py develop --user`将忽略`$PYTHONUSERBASE`变量并始终安装到`~/.local/lib/python<python version>/site-packages`文件夹

我发现这两个文件夹一起工作的唯一方法是删除`~/.local/lib/python<python version>/site-packages`并链接到您的`$PYTHONUSERBASE`

PS：小心下面，您可能需要重新安装所有本地 python 依赖项。我建议仅在 docker 或任何其他虚拟环境中使用它

```
# !!! Be sure you have configured $PYTHONUSERBASE environment variable
rm -r ~/.local/lib/python2.7/site-packages
ln -s $PYTHONUSERBASE/lib/python2.7/site-packages ~/.local/lib/python2.7/site-packages 
```

现在 pip 和 python setup.py devel --user 都将安装到同一个文件夹

# android - 杀死后重新打开应用程序，打开以前的活动

> ID：15912807
> 
> 赞同：3
> 
> 时间：2013-04-09T21:23:07.980
> 
> 标签：android, android-lifecycle

我的应用历史记录正常；当我启动意图时，我没有使用任何花哨的标志或任何东西。仅按顺序、单任务启动的活动。如果我回家，然后使用任务杀手杀死我的应用程序，下次我打开应用程序时，它会在我杀死之前的最后一个活动而不是声明的 Main 活动处启动。此外，如果我然后点击返回退出应用程序并再次重新打开它，我会得到任何在我之前在杀死之前打开的 Activity 之前打开的 Activity。

像这样的东西：

**A** = 主要活动； **B** = 其他一些活动； **C** = 其他一些活动

*   打开应用程序 - **A**
*   打开 B - **B**
*   打开 C - **C**
*   使用任务杀手杀死应用程序
*   打开应用程序**-C**
*   后退按钮 - 设备主页
*   打开应用程序**-B**
*   后退按钮 - 设备主页
*   打开应用程序 - **A**

我希望在任务终止后不会记住后台堆栈。我希望应用程序始终从声明的 Main 活动开始，除非它已经在后台运行。（这里不是这种情况，因为正在使用杀戮）然而，这两件事似乎都没有发生，我不知道为什么。

**我尝试在A**的 onCreate 上的Application 类中放入一些代码来设置“初始化”布尔值，然后在**B**和**C**的 onCreate 中检查它。想法是使用 NEW_TASK 和 CLEAR_TOP 标志启动**A**的意图，以尝试检测和纠正场景，但它仍然表现出相同的行为，除了它还将**A**放在剩余的任何东西之上。因此，它不会将应用程序启动到**B**中，而是将应用程序启动到**BA**中。

根据我所读到的有关活动生命周期和操作系统杀死应用程序的所有内容，这是不可能的，但它肯定会发生在我所有的测试设备上。有没有人对可能导致这种奇怪行为的原因有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2021-04-24T20:06:05.783

您的应用运行正常。这是默认行为。如果一个应用程序在后台并且另一个应用程序需要资源，Android 将终止它。当用户返回到原来的应用程序时，他会期望以与离开时相同的状态返回到它，因此 Android 会记住该状态并恢复它。这是标准的、默认的、用户期望的行为。

如果你不想要这种行为，你应该添加

```
android:clearTaskOnLaunch="true" 
```

到清单中`<activity>`的根声明`Activity`（具有 ACTION=MAIN 和 CATEGORY=LAUNCHER 的声明）。当用户从主屏幕返回到它时，这将导致 Android 从头开始​​启动您的应用程序。

如果您也不希望用户在从“最近的任务”屏幕启动时返回到您的应用程序的先前状态，您需要添加

```
android:excludeFromRecents="true" 
```

也`<activity>`为您的根声明`Activity`。这将阻止 Android 将您的应用添加到最近任务列表中，因此用户无法从“最近任务”屏幕返回到您的应用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T00:14:15.557

我认为您的应用程序没有任何问题。大多数任务杀手只是在选定的应用程序上调用restartPackage()，最终调用saveInstanceState()，所以你的应用程序保存它的状态。这使得它更有可能从内存启动，但前提是 Android 需要内存。基本上，“任务杀手”应用程序不会杀死任何东西。

从 ActivityManager 文档中，restartPackage() 与 killBackgroundProcesses() 相同，后者执行“这与内核杀死这些进程以回收内存相同；系统将在未来根据需要重新启动这些进程。”

# graphics - Darcs 依赖树视图

> ID：15912809
> 
> 赞同：2
> 
> 时间：2013-04-09T21:23:16.120
> 
> 标签：graphics, dependencies, darcs

是否有工具可以显示表示 darcs 中补丁依赖关系的树视图？我找到[了 DarcsDeps](http://darcs.net/RelatedSoftware/DarcsDeps)，但它似乎已经死了，我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T00:45:53.010

除了你找到的工具，没有。您最好的选择可能是继续尝试让它发挥作用。

# android - Android：使用删除按钮设置 ListView

> ID：15912812
> 
> 赞同：0
> 
> 时间：2013-04-09T21:23:24.343
> 
> 标签：android, layout, android-activity, android-listview, android-linearlayout

那里有类似的问题，但我还没有看到一个回答这个非常直接的问题：您如何设置具有混合布局的自定义列表视图？

我正在尝试设置一个列表视图，其中每一行都有以下内容：

一个主文本行、一个辅助（子）文本行和一个删除按钮。另一种方法是在可见空间的页眉或页脚处使用删除按钮来选择每一行（但显然在可滚动空间之外）。老实说，在这一点上哪个更容易是可取的。

我剩下的是设置一个辅助布局 xml 来定义每个行元素，但在里面我正在寻找另一个布局来将按钮与文本布局的垂直方向分开。

这是我当前的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >
  <ListView android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:choiceMode="multipleChoice"
    android:id="@+id/android:list"/>  
</LinearLayout> 
```

每行的布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical">
  <TextView android:id="@+id/line_a"
    android:textSize="14dp"
    android:textColor="#FFFFFF"
    android:textStyle="italic"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
  <TextView android:id="@+id/line_b"
    android:textSize="12dp"
    android:textColor="#BFFF00"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

这为 ListView 中的每一行设置了一个漂亮的多色两级文本。

下一个是什么？要在右侧添加一个按钮，我需要在右侧使用按钮设置另一个布局（网格可能？2 列 1 行？）？另一种选择是将现有的垂直线性布局包装在另一个具有水平方向的线性布局中，是吗？

这对其他人来说似乎不尴尬和痛苦吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:33:26.293

创建一个listView一个ArrayAdapter：

```
listView = (ListView) findViewById(R.id.listView);
listViewArrayAdapter listViewArrayAdapter = new listViewArrayAdapter(this, values);
listView.setAdapter(listViewArrayAdapter); 
```

然后创建一个内部类：

```
public class ListViewArrayAdapter extends ArrayAdapter<Value> {

    Context context;
    Value[] values;

    public ListViewArrayAdapter(Context context, Value[] values) {
        super(context, R.layout.layout_with_list, values);
        this.values = values;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.list_item, parent, false);

        TextView titleTextView = (TextView) convertView.findViewById(R.id.titleTextView);
        titleTextView.setText(values[position].getName());
            // If you have buttons in your list_item.xml, you can inflate them an then create a listener for them

        return convertView;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:34:02.607

你为什么不使用相对布局，我已经在 3 小时前做了这个。这是我的 ItemRow 代码。我认为更棘手的是在哪里处理这个按钮的 onClick 方法。在我的代码中，第二个图像是删除按钮，图像带有 onClick 方法。我扩展了 ArrayAdapter，因为我希望此图像仅在编辑模式下可见，例如删除 Iphone 中的联系人项目

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/layout_item"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<ImageView android:id="@+id/image_list_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:contentDescription="@string/image_view"
    android:src="@drawable/clock_white" />
<TextView android:id="@+id/text_list_label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:layout_toRightOf="@id/image_list_icon"
    android:paddingLeft="5dp"
    android:text="@string/hello_world" />
<ImageView android:id="@+id/image_list_remove"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:contentDescription="@string/image_view"
    android:src="@drawable/remove" />  
<TextView android:id="@+id/text_list_time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:layout_toLeftOf="@id/image_list_remove"
    android:paddingRight="10dp"
    android:text="@string/text_x" /> 
```

# javascript - phonegap 最后一个位置提供程序被禁用

> ID：15912815
> 
> 赞同：2
> 
> 时间：2013-04-09T21:23:30.700
> 
> 标签：javascript, html, cordova, geolocation

我有这个代码

```
// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {   
    $(window).ready(function(){
            navigator.geolocation.getCurrentPosition(onSuccess, onError, {enableHighAccuracy:true, timeout: 5000});
    });
} 
```

尝试在 Android 4.1（模拟器）上测试这个废话，但总是得到错误“最后一个位置提供程序被禁用”/

1.  enableHighAccuracy:true - 你在代码中看到
2.  “启用位置” - 在浏览器设置中选中
3.  manifest.xml 中的所有使用权限
4.  检查系统设置中的所有地理位置设置

在真正的 android 4.1 设备上尝试，它也给出错误。

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T08:36:32.287

我想通了：我需要进入移动浏览器的设置并选中“启用位置”

菜单--->设置---->位置和安全

然后检查

使用无线网络。

# ios - Titanium 到 Xamarin DB 导出

> ID：15912816
> 
> 赞同：3
> 
> 时间：2013-04-09T21:23:35.963
> 
> 标签：ios, xamarin.ios, titanium

我重写了一个曾经在 Titanium 中的应用程序，需要从旧应用程序访问数据库。它们具有相同的应用标识符和所有内容。

在 Titanium 中，应用程序数据库的存储方式如下：

```
Ti.Database.install('/db/dbName.db', 'dbName'); 
```

在 Xamarin 我这样存储它：

```
string documents = Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
string db = Path.Combine (documents, "mydb.db");
SqlConnection.CreateFile (db); 
```

我需要能够从 Titanium 位置访问数据。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:36:22.590

你能在模拟器中运行你的 Titanium 应用程序并检查它在哪里创建 db 文件吗？那应该给你一些指导。

我建议尝试 Environment.SpecialFolder.MyDocuments + "/db/dbName.db"，但您可能需要进行一些试验和错误。

[Titanium 文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Database-method-install)描述了他们为各种版本的框架存储 db 文件的位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:15:58.820

您可以使用 Xcode 的 Organizer 查看设备上的所有应用程序。

然后，您可以选择您的应用程序并查看其所有文件，您甚至可以通过这种方式下载所有应用程序数据。

有关此 Xcode 管理器功能，请参阅 Apple[文档](http://developer.apple.com/library/mac/#recipes/xcode_help-devices_organizer/articles/copy_app_data_from_sandbox.html#//apple_ref/doc/uid/TP40010392-CH14-SW1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:44:56.593

我不得不查看 Titanium 文档（[http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Database-method-install](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Database-method-install)），它让我可以在浏览 iOS Simulator 应用程序包的同时找到它正如@poupou 指出的那样。

Xamarin 的这篇文章允许我找到该`Library`文件夹​​，然后导航到其中的`Private Documents`文件夹（由 Titanium 创建）。[http://docs.xamarin.com/guides/ios/application_fundamentals/working_with_the_file_system](http://docs.xamarin.com/guides/ios/application_fundamentals/working_with_the_file_system)

请记住，所有内容都区分大小写。

基本上我是这样做的：

```
var documents = Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
var library = Path.Combine (documents, "..", "Library");
var legacyData = Path.Combine (library, "Private Documents", "legacyDB.sql"); // Titanium adds the .sql to the end of file names 
```

# r - Computing the circularity of a binary image

> ID：15912817
> 
> 赞同：6
> 
> 时间：2013-04-09T21:23:41.020
> 
> 标签：r, image-processing, binary, shape, geometry

I am trying to compute the circularity of a given binary image. After some research its clear to me that the formula for circularity is

```
4π*area/perimeter^2 
```

Which should range from 0 to 1, 1 being most circular.

Given the binary matrix `im`

Computing the area is trivial

area = sum(im)

I am computing the perimeter following this rule: `A pixel is part of the perimeter if it is nonzero and it is connected to at least one zero-valued pixel`

```
per = matrix(0, nrow(im), ncol(im))
for(i in 2:(nrow(im)-1)){
  for(j in 2:(ncol(im)-1)){
    if(im[i,j] != 0){
      x=c(im[i-1,j],im[i+1,j],im[i,j-1], im[i,j+1])
      if(0 %in% x) per[i,j] = 1
    }
  }
}
perimeter = sum(per) 
```

Then i compute circularity like this:

```
circ = (4*pi*area)/(perimiter^2) 
```

However, I get values larger than 1 sometimes and things dont add up. For example:

this image gives me `circ=1.155119`

![enter image description here](https://i.stack.imgur.com/ks6MV.jpg)

and this image gives me `circ=1.148728`

![enter image description here](https://i.stack.imgur.com/7OUs0.jpg)

Any idea whats going on? Shouldn't the values be more like `0.95` and `0.7`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T22:32:42.853

Your definition for the "binary perimeter" is not a good approximation of the smooth perimeter.

```
# Sample data
n <- 100
im <- matrix(0, 3*n, 3*n+1)
x <- ( col(im) - 1.5*n ) / n
y <- ( row(im) - 1.5*n ) / n
im[ x^2 + y^2 <= 1 ] <- 1
image(im)

# Shift the image in one direction
s1 <- function(z) cbind(rep(0,nrow(z)), z[,-ncol(z)] )
s2 <- function(z) cbind(z[,-1], rep(0,nrow(z)) )
s3 <- function(z) rbind(rep(0,ncol(z)), z[-nrow(z),] )
s4 <- function(z) rbind(z[-1,], rep(0,ncol(z)) )

# Area, perimeter and circularity
area <- function(z) sum(z)
perimeter <- function(z) sum( z != 0 & s1(z)*s2(z)*s3(z)*s4(z) == 0)
circularity <- function(z) 4*pi*area(z) / perimeter(z)^2

circularity(im)
# [1] 1.241127

area(im)
# [1] 31417
n^2*pi
# [1] 31415.93

perimeter(im)
# [1] 564
2*pi*n
# [1] 628.3185 
```

One worrying feature is that this perimeter is not rotation-invariant: when you rotate a square of side 1 (with sides parallel to the axes) by 45 degrees, its area remains the same, but its perimeter is divided by sqrt(2)...

```
square1 <- -1 <= x & x <= 1 & -1 <= y & y <= 1
c( perimeter(square1), area(square1) )
# [1]   800 40401

square2 <- abs(x) + abs(y) <= sqrt(2)
c( perimeter(square2), area(square2) )
# [1]   564 40045 
```

Here is a slightly better approximation of the perimeter. For each point on the perimeter, look at which points in its 8-neighbourhood are also in the perimeter; if they form a vertical or horizontal segment, the contribution of the pair to the perimeter is 1, if they are in diagonal, the contribution is sqrt(2).

```
edge <- function(z) z & !(s1(z)&s2(z)&s3(z)&s4(z))
perimeter <- function(z) {
  e <- edge(z)
  ( 
    # horizontal and vertical segments
    sum( e & s1(e) ) + sum( e & s2(e) ) + sum( e & s3(e) ) + sum( e & s4(e) ) + 
    # diagonal segments
    sqrt(2)*( sum(e & s1(s3(e))) + sum(e & s1(s4(e))) + sum(e & s2(s3(e))) + sum(e & s2(s4(e))) )
  ) / 2  # Each segment was counted twice, once for each end
}

perimeter(im)
# [1] 661.7544
c( perimeter(square1), area(square1) )
# [1]   805.6569 40401.0000
c( perimeter(square2), area(square2) )
# [1]   797.6164 40045.0000

circularity(im)
# [1] 0.9015315
circularity(square1)
# [1] 0.7821711
circularity(square2)
# [1] 0.7909881 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T02:42:10.847

Let me suggest a different algorithm.

You should be able to get the area of the blob with a high degree of accuracy, just by counting the pixels. You can also find the center by taking an average of the coordinates of each inside pixel. Now you can find the radius with `sqrt(area/pi)`. With the radius and the center you can draw a perfect circle that has nearly the same area - count the number of pixels that are part of both the blob and the perfect circle, and divide by the area calculated earlier.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:46:00.833

If I am right, a perfect circle encloses maximum area for a given perimeter. So if the ratio is `1.0` for a circle, then according to your formula, it will be greater than `1.0` for any other shape.

# lvm - 只显示 LV 尺寸？

> ID：15912819
> 
> 赞同：0
> 
> 时间：2013-04-09T21:23:50.127
> 
> 标签：lvm

有没有办法只显示 volgroup 上所有 LV 的大小？我有大约 100 个，要查看哪些是最大的是一个挑战。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:31:58.900

该`lvs`工具将列出您的 LV 的大小以及其他一些信息。如果您真的只想要 LV 的名称和大小而没有任何其他信息，您可以运行`lvs -o lv_name,lv_size`

# linux - 为什么 linux 有 man 和 info 页面

> ID：15912820
> 
> 赞同：-3
> 
> 时间：2013-04-09T21:23:50.357
> 
> 标签：linux

这是否有历史原因。我怎么知道要检查哪一个？如果我没有找到一个，我通常会检查其他。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:32:45.970

GNU 项目偏爱信息页面。许多最初的 GNU 黑客来自 ITS 和 Emacs，它们使用了 Info 之类的系统。Manpages起源于Unix，曾经受到传统Unix黑客的青睐。

如今，首选的文档形式似乎是互联网上随机博客上的帖子，这些帖子可能会或可能不会通过搜索引擎找到，但肯定迟早会过时。

（对不起，今天有点愤世嫉俗。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:25:11.650

人来自Unix。信息是 GNU 的东西。

# android - 如何按名称从 res/raw 读取文件

> ID：15912825
> 
> 赞同：94
> 
> 时间：2013-04-09T21:24:18.270
> 
> 标签：android, file-io, resources

我想从文件夹**res/raw/**打开一个文件。我绝对确定该文件存在。打开我尝试过的文件

```
File ddd = new File("res/raw/example.png"); 
```

命令

```
ddd.exists(); 
```

产生**FALSE**。所以这个方法行不通。

试

```
MyContext.getAssets().open("example.png"); 
```

**以 getMessage() "null" 结束。**

只需使用

```
R.raw.example 
```

不可能，因为文件名仅在运行时作为字符串已知。

为什么访问文件夹 /res/raw/ 中的文件如此困难？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-04-10T19:18:42.460

在给定链接的帮助下，我能够自己解决问题。正确的方法是获取资源ID

```
getResources().getIdentifier("FILENAME_WITHOUT_EXTENSION",
                             "raw", getPackageName()); 
```

将其作为 InputStream

```
InputStream ins = getResources().openRawResource(
            getResources().getIdentifier("FILENAME_WITHOUT_EXTENSION",
            "raw", getPackageName())); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-04-09T21:27:49.797

这是从原始文件夹中获取 XML 文件的示例：

```
 InputStream XmlFileInputStream = getResources().openRawResource(R.raw.taskslists5items); // getting XML 
```

那么你就可以：

```
 String sxml = readTextFile(XmlFileInputStream); 
```

什么时候：

```
 public String readTextFile(InputStream inputStream) {
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();

        byte buf[] = new byte[1024];
        int len;
        try {
            while ((len = inputStream.read(buf)) != -1) {
                outputStream.write(buf, 0, len);
            }
            outputStream.close();
            inputStream.close();
        } catch (IOException e) {

        }
        return outputStream.toString();
    } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-11T22:35:24.450

您可以使用`getResources().openRawResource(R.raw.myfilename)`.

但是有一个 IDE 限制，您使用的文件名只能包含小写字母数字字符和点。所以文件名像`XYZ.txt`or`my_data.bin`不会在 R 中列出。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-01T07:26:29.520

以下是您可以使用 Kotlin 读取原始资源的两种方法。

您可以通过获取资源 id 来获取它。或者，您可以使用字符串标识符，您可以在其中以编程方式随增量更改文件名。

队友的欢呼声

```
// R.raw.data_post

this.context.resources.openRawResource(R.raw.data_post)
this.context.resources.getIdentifier("data_post", "raw", this.context.packageName) 
```

# nhibernate - NHibernate - 有很多 - 有一个 - ICriteria

> ID：15912827
> 
> 赞同：0
> 
> 时间：2013-04-09T21:24:19.017
> 
> 标签：nhibernate, fluent-nhibernate-mapping

我有以下表格：

**表格材料**
ID
**表格区域**
ID
**表格材料**
区域 ID
材料_Id 区域
_Id
价格

* * *

**编辑**
我需要的是在 Material 对象中有 MaterialZone（当前区域），我不知道我是否可以通过映射或查询来解决它，因为关系“Id”在 MaterialZone 表中。

地图

```
MapMaterialZone()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        ///Properties
        References(x => x.Material).Column("material_id");
        References(x => x.Zone).Column("zone_id");
    }

MapZona()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        ///Properties
    }
MapMaterial()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        ///Properties
        //HasMany(x => x.ListMaterialZone);
        //HasOne(x => x.IndividualMaterialZone).PropertyRef(MaterialZona => MaterialZona.Material);
    } 
```

我首先尝试添加和映射 IList<"MaterialZone">，MaterialZone 属性在列表中搜索并返回具有当前区域的那个，但是查询和控件变得太慢了。（我正在使用 Access an ComponentOne）

我试图通过映射和查询来解决这个问题，但我运气不佳。我在 NHibernate 和 Mapping 方面有中等经验，而在 QueryOver 和 ICriteria 方面经验很少

我对所有解决方案持开放态度（但不幸的是，Access 必须保留）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:30:26.990

我找到了解决方案，我的映射

```
MaterialMap
HasOne(x => x.MaterialZona).PropertyRef(materialZona => materialZona.Material); 
```

和最后的 QueryOver

```
ISession session = GetSession();
Zona zonaPredeterminada = GetDefaultZone();
Material materialAlias = null;
MaterialZona materialZonaAlias = null;

return session.QueryOver<Material>(() => materialAlias)
    .JoinQueryOver(mat => mat.MaterialZona, () => materialZonaAlias)
    .Where(mZ => mZ.Zona.Id == zonaPredeterminada.Id)
    .And(mZ => mZ.Material.Id == materialAlias.Id)
    .List(); 
```

# javascript - 如何从调用 javascript/jQuery 中的另一个函数的函数中获取返回值？

> ID：15912829
> 
> 赞同：0
> 
> 时间：2013-04-09T21:24:19.567
> 
> 标签：javascript, jquery, return

因此，您可以分配一个值，`var doub`如下所示：

```
function getDouble(number) {
    var doubl = number + number;
    return doubl;
}

var num = 4;
var doub = getDouble(num); 
```

我想知道我是否可以通过调用下面的第二个函数来获取返回类型。那么第二个方法的返回值可以赋值给`doub`吗？

```
function getDouble(number) {
    var doubl = number + number;
    return quadruple(doubl);
}

function quadruple(doubl) {
    quad = doubl + doubl
    return quad;
}

var num = 4;
var doub = getDouble(num); 
```

出于某种原因，它对我不起作用。

这是我的问题代码..我正在做与上述类似的事情，但不起作用：

在我准备好的文档中，我有这段代码..我希望将结果存储在**newjsn**

```
 $(document).ready(function() 
    {
     var newjsn= DatabaseCategoriesToSelectList(num, 200, 100); 
```

我的 DatabaseCategoriesToSelectList 函数是：

```
function DatabaseCategoriesToSelectList(jsn, max, min){

    var ddl="<option selected='selected' value='"+min+"'>Select...</option>";

    //load categories from database, and put them into the select drop down.
    $.getJSON(GLOBALURL+'content/plugins/subcategories/getSubcategories.php',             
        function(data, ddl) {

            var datas=  jQuery.grep(data, function(element, index){
                return element.category_id < max && element.category_id>min; // retain appropriate elements
            });
            for (x=0; x<datas.length; x++){
                ddl= ddl+"<option value='"+datas[x].category_id+"'data-subcategory='"+datas[x].category_subselect+"'>"+datas[x].category_safe_name+"</option>";
            }   
            alert (ddl); return runafter(ddl, jsn); 
        });

}

function runafter(ddl, jsn){
    jsn=ddl;
    alert(jsn);

    return 500;

} 
```

出于某种原因，警报有效，但我无法让它返回字符串。我什至尝试返回一个随机值 500，但它没有..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:42:22.447

问题是您永远不会退出您的`DatabaseCategoriesToSelectList`功能。您的函数如下所示：

```
function DatabaseCategoriesToSelectList(jsn, max, min) {
    ...
    $.getJSON(GLOBALURL+'content/plugins/subcategories/getSubcategories.php',             
        function(data, ddl) {
             ...
             return runafter(ddl, jsn); 
        }
    );
} 
```

内部`return`不是从`DatabaseCategoriesToSelectList`内部函数返回，而是从内部函数返回。但是，无论您做什么，都无法使其返回您想要的值，因为这`$.getJSON`是一个异步调用。你必须把类似的东西

```
function(data, dll) {
    ...
    var newjsn = runafter(ddl, jsn);
    // put the rest of your stuff that uses newjsn here
} 
```

在您的代码中，然后将之后的任何内容也放入该函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:45:43.937

您将无法访问 getJson 处理程序的返回。框架调用该处理程序。您正在给它一个函数，并且 .getJson 在收到响应时调用该函数。如果你需要访问 runAfter 的返回，你需要对它做任何你打算做的事情。

代替：

```
$.getJSON(GLOBALURL+'content/plugins/subcategories/getSubcategories.php',
  function(data, ddl) {

          ...
           return runafter(ddl, jsn); 
  });
} 
```

您需要决定要对该值做什么，例如，我将其填充到某个隐藏字段的值中：

```
$.getJSON(GLOBALURL+'content/plugins/subcategories/getSubcategories.php',
  function(data, ddl) {

          ...
          $('#someField').val( runafter(ddl, jsn) ); 
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:29:20.463

[**小提琴**](http://jsfiddle.net/4keHn/) （*输出为：16*）

你正在做的*事情应该很好*

```
 function getDouble (number){
    var doubl = number+number;
    return quadruple(doubl);
    }

function quadruple(doubl){
var quad=doubl+doubl
return quad;
}

var num = 4;
var doub = getDouble(num); 
```

# javascript - 从 iframe 跳转到父级顶部 - 跨域

> ID：15912831
> 
> 赞同：1
> 
> 时间：2013-04-09T21:24:22.560
> 
> 标签：javascript, iframe

我有一个有点长的 iframe，一旦按下提交按钮，我想跳到页面顶部（我正在使用 ASP.NET，并且一旦提交表单，就会在 iframe 中显示一个新面板）。问题是我的 iframe 与我的父页面位于不同的域中。这是我到目前为止所拥有的：

在 iframe 中：

```
<script>
function scrollWindow(){
        window.top.scrollTo(0,0);
}
</script>
<input type="submit" onclick="scrollWindow();" value="Submit Request"> 
```

如果父级和 iframe 在同一个域上，但不是跨域，则此方法有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:28:16.617

如果在您按下提交时 iframe 中的页面发生变化，您应该能够使用 iframe 的“onload”事件来触发滚动。

这是一个黑客，你应该为此感到难过。它应该可以工作。

# jqxgrid - 尝试使用 jqxgrid 创建自定义过滤器对话框

> ID：15912849
> 
> 赞同：0
> 
> 时间：2013-04-09T21:25:23.867
> 
> 标签：jqxgrid

我正在尝试使用 jqxgrid 为单个列创建自定义过滤器。该示例允许添加字段，但我想构建自己的一组字段。有人做过吗？

然后，我在列标题上放置了一个额外的 div，并打算创建自己的弹出窗口，但似乎找不到事件来阻止排序冒泡。我可以在列头中创建一些东西，但是我必须禁用排序。

我想打开过滤器行，但我只想过滤一列。

我希望我说得通。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:39:34.137

如果要禁用其他列的过滤，请将它们的“filterable”属性设置为 false。

要在过滤器行中自定义过滤器，您可能会看到：[jqxGrid Filter Row](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/filterrowwithcustomitems.htm?classic)。

# java - 使用 ArrayList 调用构造函数

> ID：15912859
> 
> 赞同：1
> 
> 时间：2013-04-09T21:26:15.817
> 
> 标签：java, arraylist

因此，我正在尝试创建一个程序，该程序接受用户输入学生姓名和 GPA 并将信息输入到单个数组列表中。几乎，我正在尝试创建一个`ArrayList`存储浮点和字符串变量并存储用户输入的存储。我正在尝试使用构造函数来完成此任务，但我无法让我的代码正常工作。这是我到目前为止所拥有的：

```
public class BestStudent {
    static Scanner scanner = new Scanner(System.in); 
    static String name;
    static float gpa;

    private class Student {
    public Student (String n, float g){
        name = n;
        gpa = g;
    }
    }

    public static void findValidictorian(){
        ArrayList<Student> validictorian = new ArrayList<Student>();
            while (true){
                System.out.println("Please enter student name: ");
                name.add(scanner.next());
                System.out.println("Please enter your student's cumulative GPA: ");
                gpa.add(scanner.nextFloat());

                System.out.println("do you want to add another student yes/no?");
                String answer = scanner.next();

                if (answer.toLowerCase().equals("no")){
                    break;
                }

            }

    }

    public static void main(String[] args) {
        findValidictorian();
    }

} 
```

我的 ArrayList 的两个 add 方法都出现错误，我终其一生都无法弄清楚原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:28:08.387

`validictorian`是一个`ArrayList`，但你试图添加到`gpa`和`name`，这*不是* `ArrayList`s，你永远不会添加到`validictorian`。我觉得你想要的更像

```
name = scanner.next();
...
gpa = scanner.nextFloat();
validictorian.add(new Student(name, gpa)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:28:48.673

`name`并且`gpa`不是数组列表，您不能`add`为它们添加元素。唯一能`ArrayList`看到的是`validictorian`（原文如此），无论如何，您不能将不同类型的元素添加到一个`ArrayList`（好吧，如果参数化为使用 type ，您*可以*添加它们，但这是一个不好的做法。）`ArrayList``Object`

请注意，`validictorian`它应该包含类型的对象`Student`。你一直想做的是：

```
System.out.println("Please enter student name: ");
String aName = scanner.next();
System.out.println("Please enter your student's cumulative GPA: ");
float aGpa = scanner.nextFloat();
validictorian.add(new Student(aName, aGpa)); 
```

# php - PSR Autoloader 功能失败

> ID：15912861
> 
> 赞同：1
> 
> 时间：2013-04-09T21:26:29.887
> 
> 标签：php, oop, psr-0

我想我可能在这里遗漏了一些简单的东西，需要第二双眼睛。这失败了，找不到致命的错误类。自动加载功能取自 PSR-0 github 页面。

```
<?php

function my_autoload($className)
{
    $className = ltrim($className, '\\');
    $fileName  = '';
    $namespace = '';
    if ($lastNsPos = strrpos($className, '\\')) {
        $namespace = substr($className, 0, $lastNsPos);
        $className = substr($className, $lastNsPos + 1);
        $fileName  = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
    }
    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

    return $fileName;
}

spl_autoload_register('my_autoload');

new Vendor\Package\Example(); 
```

这是我的 index.php，类位于 Vendor/Package/Example.php，这是内容。

```
<?php

namespace Vendor\Package;

class Example {

    public function __construct() {
        echo __CLASS__ . ' Created with Namespace ' . __NAMESPACE__;
    }

} 
```

当我这样做时它有效`require_once my_autoload('Vendor\Package\Example');`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:30:03.993

> 自动加载功能取自 PSR-0 github 页面。

不，[在页面](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)上没有`return $fileName;`但是`require $fileName;`

# encryption - gpgme 在 64 位 debian 上加密失败

> ID：15912863
> 
> 赞同：1
> 
> 时间：2013-04-09T21:26:37.890
> 
> 标签：encryption, 64-bit, gpgme

我遇到了一个问题，这给我用 gpgme 追踪带来了一些麻烦。我用一个简单的测试程序（从我找到的另一个简单示例开始）复制了它，我将其粘贴在下面。这适用于 32 位基于 debian 的系统，但在 64 位系统上失败。特别是在 64 位情况下，我可以成功读取和解密（示例中未显示），但在加密中出现了一个相当神秘的错误：

```
$ ./test2 C37DBF71 Ciao!
version=1.2.0
Protocol name: OpenPGP
file=/usr/bin/gpg, home=(null)
Error in encrypting data. Error 1: General error (Unspecified source) 
```

libgpgme 的版本也如上所示。

这是 的输出`uname`，只是为了向您展示我在 64 位系统上运行：

```
$ uname -a
Linux spagan-laptop 3.2.0-39-generic #62-Ubuntu SMP Thu Feb 28 00:28:53 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

是的，我做的第一件事就是广泛尝试确保我正在定义`_FILE_OFFSET_BITS=64`；我还检查了`off_t`它的有效大小为 8。这就是我编译它的方式：

```
gcc -m64 -D_FILE_OFFSET_BITS=64 -g test2.c -lgpgme -L/usr/lib/x86_64-linux-gnu -lgpg-error -o test2 
```

最后是测试程序：

```
#include <gpgme.h>   /* gpgme             */
#include <stdio.h>   /* printf            */
#include <unistd.h>  /* write             */
#include <errno.h>   /* errno             */
#include <locale.h>  /* locale support    */
#include <string.h>  /* string support    */
#include <stdlib.h>  /* memory management */

#define SIZE 1024

int main(int argc, char **argv)
{
  if (argc < 2) {
    printf("ERROR. Usage: %s key message\n", argv[0]);
    return -1;
  }

  char *m_key = argv[1];
  char *pSource = argv[2];
  char *pDest = malloc(65536);

  char *p;
  char buf[SIZE];
  size_t read_bytes;
  int tmp;
  gpgme_ctx_t ceofcontext;
  gpgme_error_t err;
  gpgme_data_t data;

  gpgme_engine_info_t enginfo;

  /* The function `gpgme_check_version' must be called before any other
   * function in the library, because it initializes the thread support
   * subsystem in GPGME. (from the info page) */
  setlocale (LC_ALL, "");
  p = (char *) gpgme_check_version(NULL);
  printf("version=%s\n",p);
  /* set locale, because tests do also */
  gpgme_set_locale(NULL, LC_CTYPE, setlocale (LC_CTYPE, NULL));

  /* check for OpenPGP support */
  err = gpgme_engine_check_version(GPGME_PROTOCOL_OpenPGP);
  if(err != GPG_ERR_NO_ERROR) return 1;

  p = (char *) gpgme_get_protocol_name(GPGME_PROTOCOL_OpenPGP);
  printf("Protocol name: %s\n",p);

  /* get engine information */
  err = gpgme_get_engine_info(&enginfo);
  if(err != GPG_ERR_NO_ERROR) return 2;
  printf("file=%s, home=%s\n",enginfo->file_name,enginfo->home_dir);

  /* create our own context */
  err = gpgme_new(&ceofcontext);
  if(err != GPG_ERR_NO_ERROR) return 3;

  /* set protocol to use in our context */
  err = gpgme_set_protocol(ceofcontext,GPGME_PROTOCOL_OpenPGP);
  if(err != GPG_ERR_NO_ERROR) return 4;

  /* set engine info in our context; I changed it for ceof like this:

   err = gpgme_ctx_set_engine_info (ceofcontext, GPGME_PROTOCOL_OpenPGP,
               "/usr/bin/gpg","/home/user/nico/.ceof/gpg/");

           but I'll use standard values for this example: */

  err = gpgme_ctx_set_engine_info (ceofcontext, GPGME_PROTOCOL_OpenPGP,
                               enginfo->file_name,enginfo->home_dir);
  if(err != GPG_ERR_NO_ERROR) return 5;

  /* do ascii armor data, so output is readable in console */
  gpgme_set_armor(ceofcontext, 1);

  gpgme_data_t source;
  gpgme_data_t dest;

  //get key to encrypt, get the first key
  gpgme_key_t key[2];
  err = gpgme_op_keylist_start(ceofcontext, m_key, 0);
  err = gpgme_op_keylist_next (ceofcontext, key);
  if (err) {
    printf("Key not found in current key-ring: %s\n", m_key);
    return 1;
  }
  key[1] = 0; //set to NULL the second entry

  //point to source buffer
  err = gpgme_data_new_from_mem(&source, pSource, strlen(pSource), 0);  
  if (err != GPG_ERR_NO_ERROR) {
    printf("Error in reading data to encrypt. Error %d: %s (%s)\n",
       gpgme_err_code(err), gpgme_strerror(err), gpgme_strsource(err));
    return 2;
  }

  //create dest buffer
  err = gpgme_data_new(&dest);
  if (err != GPG_ERR_NO_ERROR) {
    printf("Error in creating output data buffer to encrypt. Error %d: %s (%s)\n",
       gpgme_err_code(err), gpgme_strerror(err), gpgme_strsource(err));
    return 3;
  }

  //encrypt text
  gpgme_encrypt_flags_t flags;
  flags = GPGME_ENCRYPT_NO_ENCRYPT_TO; //only specified recipient, no defaults please
  err = gpgme_op_encrypt(ceofcontext, key, flags, source, dest);
  if (err != GPG_ERR_NO_ERROR) {
    printf("Error in encrypting data. Error %d: %s (%s)\n",
       gpgme_err_code(err), gpgme_strerror(err), gpgme_strsource(err));
    return 4;    
  }

  //retrieve result
  printf("Result: \n%s\n", pDest);

  //release key and buffers
  gpgme_key_release(key[0]);  
  gpgme_data_release(dest);
  gpgme_data_release(source);
  free(pDest);

  /* free context */
  gpgme_release(ceofcontext);

  return 0;
} 
```

非常感谢您能给我的任何帮助！我还没有发现任何有用的东西来帮助我调试这个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T01:44:18.763

在提供的示例中，`pDest`从未实际设置过 的值。

为了获得`gpgme_data_t`对象的值`dest`，使用`gpgme_data_release_and_get_mem`.

例子：

```
#include <gpgme.h>   /* gpgme             */
#include <stdio.h>   /* printf            */
#include <unistd.h>  /* write             */
#include <errno.h>   /* errno             */
#include <locale.h>  /* locale support    */
#include <string.h>  /* string support    */
#include <stdlib.h>  /* memory management */

#define SIZE 1024

int main(int argc, char **argv)
{
  if (argc < 2) {
    printf("ERROR. Usage: %s key message\n", argv[0]);
    return -1;
  }

  char *m_key = argv[1];
  char *pSource = argv[2];

  char *p;
  size_t read_bytes;
  gpgme_ctx_t ceofcontext;
  gpgme_error_t err;

  gpgme_engine_info_t enginfo;

  /* The function `gpgme_check_version' must be called before any other
   * function in the library, because it initializes the thread support
   * subsystem in GPGME. (from the info page) */
  setlocale (LC_ALL, "");
  p = (char *) gpgme_check_version(NULL);
  printf("version=%s\n",p);
  /* set locale, because tests do also */
  gpgme_set_locale(NULL, LC_CTYPE, setlocale (LC_CTYPE, NULL));

  /* check for OpenPGP support */
  err = gpgme_engine_check_version(GPGME_PROTOCOL_OpenPGP);
  if(err != GPG_ERR_NO_ERROR) return 1;

  p = (char *) gpgme_get_protocol_name(GPGME_PROTOCOL_OpenPGP);
  printf("Protocol name: %s\n",p);

  /* get engine information */
  err = gpgme_get_engine_info(&enginfo);
  if(err != GPG_ERR_NO_ERROR) return 2;
  printf("file=%s, home=%s\n",enginfo->file_name,enginfo->home_dir);

  /* create our own context */
  err = gpgme_new(&ceofcontext);
  if(err != GPG_ERR_NO_ERROR) return 3;

  /* set protocol to use in our context */
  err = gpgme_set_protocol(ceofcontext,GPGME_PROTOCOL_OpenPGP);
  if(err != GPG_ERR_NO_ERROR) return 4;

  /* set engine info in our context; I changed it for ceof like this:

   err = gpgme_ctx_set_engine_info (ceofcontext, GPGME_PROTOCOL_OpenPGP,
               "/usr/bin/gpg","/home/user/nico/.ceof/gpg/");

           but I'll use standard values for this example: */

  err = gpgme_ctx_set_engine_info (ceofcontext, GPGME_PROTOCOL_OpenPGP,
                               enginfo->file_name,enginfo->home_dir);
  if(err != GPG_ERR_NO_ERROR) return 5;

  /* do ascii armor data, so output is readable in console */
  gpgme_set_armor(ceofcontext, 1);

  gpgme_data_t source;
  gpgme_data_t dest;

  //get key to encrypt, get the first key
  gpgme_key_t key[2];
  err = gpgme_op_keylist_start(ceofcontext, m_key, 0);
  err = gpgme_op_keylist_next (ceofcontext, key);
  if (err) {
    printf("Key not found in current key-ring: %s\n", m_key);
    return 1;
  }
  key[1] = 0; //set to NULL the second entry

  //point to source buffer
  err = gpgme_data_new_from_mem(&source, pSource, strlen(pSource), 0);  
  if (err != GPG_ERR_NO_ERROR) {
    printf("Error in reading data to encrypt. Error %d: %s (%s)\n",
       gpgme_err_code(err), gpgme_strerror(err), gpgme_strsource(err));
    return 2;
  }

  //create dest buffer
  err = gpgme_data_new(&dest);
  if (err != GPG_ERR_NO_ERROR) {
    printf("Error in creating output data buffer to encrypt. Error %d: %s (%s)\n",
       gpgme_err_code(err), gpgme_strerror(err), gpgme_strsource(err));
    return 3;
  }

  //encrypt text
  gpgme_encrypt_flags_t flags;
  flags = GPGME_ENCRYPT_NO_ENCRYPT_TO; //only specified recipient, no defaults please
  err = gpgme_op_encrypt(ceofcontext, key, flags, source, dest);
  if (err != GPG_ERR_NO_ERROR) {
    printf("Error in encrypting data. Error %d: %s (%s)\n",
       gpgme_err_code(err), gpgme_strerror(err), gpgme_strsource(err));
    return 4;    
  }

  p = gpgme_data_release_and_get_mem(dest, &read_bytes);

  p[read_bytes] = 0;

  //retrieve result
  printf("Result: \n%s\n", p);

  //release key and buffers
  gpgme_key_release(key[0]);
  gpgme_data_release(source);

  /* free context */
  gpgme_release(ceofcontext);

  return 0;
} 
```

编译`gcc -Wall -m64 -D_FILE_OFFSET_BITS=64 -g test2.c -lgpgme -lgpg-error -o test2`

结果是：

```
version=1.4.2
Protocol name: OpenPGP
file=/usr/bin/gpg, home=(null)
Result: 
-----BEGIN PGP MESSAGE-----
Version: GnuPG v1

hQIMA33UcjHVsYaXARAAh1txbI4bSsterGLf2d1AhrjQaugDfqaqSX32itxPKv1K
<SNIP>
EHlJTb0rVRvnTGjp5yLMy/hlw4hEtTh7HA==
=LRyw
-----END PGP MESSAGE----- 
```

# vi - 如何在vi中删除多行？

> ID：15912868
> 
> 赞同：144
> 
> 时间：2013-04-09T21:26:57.790
> 
> 标签：vi

我试图遵循以下内容：

[如何在 VI 编辑器中删除选定的文本](https://stackoverflow.com/questions/3114936/how-to-delete-selected-text-in-vi-editor)

但

```
5dd 
```

给

> E492：不是编辑器命令：5dd

然后我尝试了：

```
5d 
```

仅删除一行。如何删除多行？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-10-01T19:41:31.023

我觉得这更容易

1.  进入视觉模式`Shift`+`v`
2.  选择行
3.  `d`删除

[https://superuser.com/questions/170795/how-can-i-select-and-delete-lines-of-text-in-vi](https://superuser.com/questions/170795/how-can-i-select-and-delete-lines-of-text-in-vi)

* * *

## 回答 #2

> 赞同：156
> 
> 时间：2014-02-10T22:47:57.443

如果您知道行号，则可以删除多个（范围）行：

```
:[start_line_no],[end_line_no]d 
```

**注：** d代表删除

其中，
start_line_no 是您要删除的起始行号，end_line_no 是您要删除的结束行号。start 和 end 之间的线，包括 start 和 end 将被删除。

例如：

```
:45,101d 
```

45 和 101 之间的行，包括 45 和 101 将被删除。

* * *

## 回答 #3

> 赞同：141
> 
> 时间：2013-04-10T07:40:21.780

听起来您正在以命令模式（又名“Ex 模式”）输入命令。在这种情况下，`:5d`将删除第 5 行，仅此而已。为了`5dd`按预期工作 - 即删除从光标开始的五个后续行 - 在正常模式下输入它并且不要在命令前加上`:`.

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-10-27T11:25:16.370

列出的在正常模式下使用的命令（带有`:`for 命令模式的前缀）。
在 Vim 中测试。

按行金额：

*   *num*`d``d` - 将从当前光标位置开始删除*num*行 DOWN 开始计数（例如`5``d``d`，将删除当前行及其下的 4 行 =>**删除当前行及其下的 ( *num-1* ) 行**）
*   *num*`d``k` - 将从当前行和当前行本身删除*num*行 UP（例如`3``d``k`，将删除当前行和它上面的 3 行 =>**删除当前行和它上面的*num*行**）

按行号：

*   `d`*num*`G` -**将从当前行（含）删除行 UP 到第*num*行（含）**（例如，如果光标当前位于第 5 行，`d``2``G`将删除第 2-5 行（含）
*   `d`*num*`g``g` -**将从当前行（包括）删除行 DOWN 到行号*num*（包括）**（例如，如果光标当前位于第 2 行，`d``6``g``g`将删除第 2-6 行（包括）
*   （**仅限命令模式**）`:`*num1* `,`*num2*`d` - 将删除**行号*num1*（含）DOWN 到行号*num2*（含）**。注意：如果*num1*大于*num2* — vim 将与`Backwards range given, OK to swap (y/n)?`

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-09-16T09:47:09.200

如果您更喜欢非可视模式方法并确认行号，我想建议您另一种直接的方法。

例子

> 我想删除第 45 行到第 101 行的文本。

我的方法建议您在命令模式下键入以下命令：

```
45Gd101G 
```

上面写着：

> 转到第 45 行 ( )，然后从当前行`45G`删除文本 ( ) 到第 101 行 ( )。`d``101G`

请注意，`vim`您可能会使用on`gg`而不是`G`.

与@Bonnie Varghese 的答案比较，即：

```
:45,101d[enter] 
```

他回答的上述命令需要输入 9 次`enter`，其中我的回答需要输入 8-10 次。因此，我的方法的速度是可比的。

就个人而言，我自己更喜欢`45Gd101G`，`:45,101d`因为我喜欢坚持 vi 命令的语法，在这种情况下是：

```
+---------+----------+--------------------+
| syntax  | <motion> | <operator><motion> |
+---------+----------+--------------------+
| command |   45G    |        d101G       |
+---------+----------+--------------------+ 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-11-01T16:09:40.923

d5d“删减”五行

我通常只是把数字放在中间，比如：

d7l = 删除 7 个字母

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-04-09T21:32:48.037

按`Esc`键以确保您未处于编辑模式。将光标放在要删除的第一行。输入`:5dd`。当前行和接下来的四行应该被删除。

或者，如果您打开了行号...

按`Esc`键以确保您未处于编辑模式。输入`:#,#d`其中“#”代表要删除的开始和结束行号。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-05-05T03:51:46.727

1.  `Esc` *退出插入模式*
2.  `:``1``enter` *转到第 1 行（将“1”替换为您感兴趣的行）*
3.  `5``d``d` *删除 5 行（从当前行开始）*

*类型* *（用于编号的行）。***`:set number`**

 ** * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-01-24T08:20:01.967

如果您想在特定行触发器之后删除范围，您可以使用类似这样的东西

```
:g/^TMPDIR/ :.,+11d 
```

每次遇到`^TMPDIR`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-22T23:04:36.307

是 dxd，不是 ddx

如果要删除5行，光标到第一行的开头删除d5d

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-09T02:41:48.557

要删除所有行使用 - ESC gg dG 要删除几行让我们说 5 然后使用 ESC 5dd*

# javascript - 布尔反转的Javascript方法

> ID：15912869
> 
> 赞同：4
> 
> 时间：2013-04-09T21:26:59.687
> 
> 标签：javascript, boolean-operations

以下适用于任何布尔变量，但我在 javascript 中编写了一个小函数，它反转给定复选框中的检查，变得无聊，想知道我能压缩多少。

开始于：

```
checkbox = document.getElementById('checkbox');
checkbox.checked = (checkbox.checked ? false : true); 
```

然后搬到

```
checkbox = document.getElementById('checkbox');
checkbox.checked = !(checkbox.checked); 
```

接着

```
document.getElementById('checkbox').checked ^= 1; 
```

我想不出一个合乎逻辑的一元方法，比如

```
!(document.getElementById('checkbox').checked); 
```

但我发现 -- 有效，虽然 ++ 没有（绝对值？）

```
document.getElementById('checkbox').checked--; 
```

我也不确定 js（或任何语言，就此而言）是否支持对等式左侧变量的一些隐式引用，如：

```
document.getElementById('checkbox').checked = !(left.side); 
```

通常有 1000 种方法可以做同样的事情。还有其他巧妙的方法吗？出于任何原因（或从语言到语言最兼容）是否有“最佳”方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:31:52.203

我总是使用类似的东西`this.checked = !this.checked`，因为它是我所知道的最合乎逻辑和可读性的解决方案。此外，它适用于我使用的任何语言。

# c# - 抽象类的构造函数错误

> ID：15912871
> 
> 赞同：2
> 
> 时间：2013-04-09T21:27:09.750
> 
> 标签：c#

我正在开发一个带有抽象类的应用程序。

我的抽象类 = Werknemer 子类 = Ober 和 Kok

现在，当我在表单中添加此行时出现错误

`Kok a = new Kok();`

“不包含取 0 的构造函数”

我有什么问题吗？

我的抽象类：

```
abstract class Werknemer
{

    public string Naam { get; private set; }
    public double FTE { get; private set; }
    public int WerknemersCode { get; private set; }
    public DateTime DatumIndienst { get; private set; }
    public string WerktBijRestaurant { get; private set; }
    public decimal FooiUitkering { get; private set; }

    public  Werknemer(string Naam, Adres Adres, double FTE, int WerknemersCode, DateTime DatumIndienst, string Res)
    {
        this.Naam = Naam;
        this.FTE = FTE;
        this.WerknemersCode = WerknemersCode;
        this.DatumIndienst = DatumIndienst;
        this.WerktBijRestaurant = Res;
    }
    public String AlsString()
    {
        return Naam;
    }

     public abstract String MaakSchoon();

} 
```

我的其他子类：

```
class Ober : Werknemer
{
    public bool AllRounder { get; private set; }
    public bool Bediening { get; private set; }
    public decimal Fooi { get; private set; }

    public Ober(string Naam, Adres Adres, double FTE, int WerknemersCode, DateTime DatumIndienst, string res): base(Naam, Adres, FTE, WerknemersCode, DatumIndienst, res)

    {
    //   this.AllRounder = AllRounder;
  //     this.Bediening = Bediening;
      //  this.FooienPot = FooienPot;
    }
    public String ToString()
    {
        return null;
    }
    public override String MaakSchoon()
    {
        return "Ober";
    } 
```

其他子类

```
class Kok : Werknemer
{
    public bool Leadkok { get; private set; }
    public string Specialiteit { get; private set; }

    public Kok(string Naam, Adres Adres, double FTE, int WerknemersCode, DateTime DatumIndienst, string res) : base (
        Naam, Adres, FTE, WerknemersCode, DatumIndienst, res)
    {

    //    this.Leadkok = Leadkok;
     //   this.Specialiteit = Specialiteit;
    }
    public String ToString()
    {
        return null;
    }
   public override String MaakSchoon()
    {
        return "kok";            
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T21:28:45.550

当您使用参数定义构造函数时 - 您会自动“隐藏”默认构造函数。

即您需要明确定义它。

只需添加...

```
public Kok(){} 
```

你应该没事。

**您的基类需要一些“合理的”参数作为输入**- 所以您需要看看您手头的情况是什么。（由@Mudu 改进）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:29:52.013

您的`Kok`类型没有无参数构造函数，因此您需要在实例化它时传递它期望的参数，或者添加一个无参数构造函数。

# c++ - 如何在 C++ 中将值从向量转换为地图？

> ID：15912877
> 
> 赞同：11
> 
> 时间：2013-04-09T21:27:30.703
> 
> 标签：c++, map, vector, stl

我想做这样的事情。是否有一个 stl 算法可以轻松做到这一点？

```
 for each(auto aValue in aVector)
                {
                aMap[aValue] = 1;
                } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T21:44:05.753

如果您有一个对向量，其中对中的第一项将是映射的键，第二项将是与该键关联的值，您可以使用插入迭代器将数据复制到映射：

```
std::vector<std::pair<std::string, int> > values {   
    {"Jerry", 1},
    { "Jim", 2},
    { "Bill", 3} };

std::map<std::string, int> mapped_values;

std::copy(values.begin(), values.end(), 
          std::inserter(mapped_values, mapped_values.begin())); 
```

或者，您可以从向量初始化地图：

```
std::map<std::string, int> m2((values.begin()), values.end()); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-09T21:36:42.473

也许是这样的：

```
std::vector<T> v;   // populate this

std::map<T, int> m;

for (auto const & x : v) { m[x] = 1; } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-02-28T20:26:15.390

你可能会[`std::transform`](https://en.cppreference.com/w/cpp/algorithm/transform)变成[`std::vector`](https://en.cppreference.com/w/cpp/container/vector)一个[`std::map`](https://en.cppreference.com/w/cpp/container/map)

```
std::vector<std::string> v{"I", "want", "to", "do", "something", "like", "this"};
std::map<std::string, int> m;
std::transform(v.begin(), v.end(), std::inserter(m, m.end()),
               [](const std::string &s) { return std::make_pair(s, 1); }); 
```

这会从向量的元素创建[`std::pair`s](https://en.cppreference.com/w/cpp/utility/pair/make_pair)，然后将其插入到地图中。

* * *

或者，正如@BenFulton 所建议的，将两个向量压缩到一张地图中

```
std::vector<std::string> k{"I", "want", "to", "do", "something", "like", "this"};
std::vector<int> v{1, 2, 3, 4, 5, 6, 7};
std::map<std::string, int> m;

auto zip = [](const std::string &s, int i) { return std::make_pair(s, i); };
std::transform(k.begin(), k.end(), v.begin(), std::inserter(m, m.end()), zip); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T21:30:24.593

尝试这个：

```
for (auto it = vector.begin(); it != vector.end(); it++) {
  aMap[aLabel] = it;
  //Change aLabel here if you need to
  //Or you could aMap[it] = 1 depending on what you really want.
} 
```

我认为这就是你想要做的。

编辑：如果要更新 的值`aLabel`，可以在循环中更改它。另外，我回头看最初的问题，不清楚他想要什么，所以我添加了另一个版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-02T16:55:50.677

假设向量中的项目按顺序相关，也许这个例子可以帮助：

```
#include <map>
#include <vector>
#include <string>
#include <iostream>

std::map<std::string, std::string> convert_to_map(const std::vector<std::string>& vec)
{
    std::map<std::string, std::string> mp;
    std::pair<std::string, std::string> par;

    for(unsigned int i=0; i<vec.size(); i++)
    {
        if(i == 0 || i%2 == 0)
        {
            par.first = vec.at(i);
            par.second = std::string();
            if(i == (vec.size()-1))
            {
                mp.insert(par);
            }
        }
        else
        {
            par.second = vec.at(i);
            mp.insert(par);
        }
    }

    return mp;
}

int main(int argc, char** argv)
{
    std::vector<std::string> vec;
    vec.push_back("customer_id");
    vec.push_back("1");
    vec.push_back("shop_id");
    vec.push_back("2");
    vec.push_back("state_id");
    vec.push_back("3");
    vec.push_back("city_id");

    // convert vector to map
    std::map<std::string, std::string> mp = convert_to_map(vec);

    // print content:
    for (auto it = mp.cbegin(); it != mp.cend(); ++it)
        std::cout << " [" << (*it).first << ':' << (*it).second << ']';

    std::cout << std::endl;

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-11T12:06:31.860

一个非常通用的方法，因为你没有指定任何类型，可以按如下方式完成：

```
template<class Iterator, class KeySelectorFunc,
         class Value = std::decay_t<decltype(*std::declval<Iterator>())>,
         class Key = std::decay_t<decltype(std::declval<KeySelectorFunc>()(std::declval<Value>()))>>
std::map<Key, Value> toMap(Iterator begin, Iterator end, KeySelectorFunc selector) {
    std::map<Key, Value> map;
    std::transform(begin, end, std::inserter(map, map.end()), [selector](const Value& value) mutable {
        return std::make_pair(selector(value), value);
    });
    return map;
} 
```

用法：

```
struct TestStruct {
    int id;
    std::string s;
};

std::vector<TestStruct> testStruct = {
    TestStruct{1, "Hello"},
    TestStruct{2, "Hello"},
    TestStruct{3, "Hello"}
};

std::map<int, TestStruct> map = toMap(testStruct.begin(), testStruct.end(), 
    [](const TestStruct& t) {
        return t.id;
    }
);

for (const auto& pair : map) {
    std::cout << pair.first << ' ' << pair.second.id << ' ' << pair.second.s << '\n';
}

// yields:
// 1 1 Hello
// 2 2 Hello
// 3 3 Hello 
```

参数`selector`函数用于选择`std::map`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-04-17T18:24:14.370

为了将数组或向量的值直接转换为映射，我们可以这样做。

```
map<int, int> mp; 
for (int i = 0; i < m; i++) 
    mp[a[i]]++; 
```

其中 a[i] 是我们拥有的数组。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-02-28T21:08:13.193

还有一种方式：

```
#include <map>
#include <vector>
#include <boost/iterator/transform_iterator.hpp>

int main() {
    using T = double;
    std::vector<T> v;
    auto f = [](T value) { return std::make_pair(value, 1); };
    std::map<T, int> m(boost::make_transform_iterator(v.begin(), f),
                       boost::make_transform_iterator(v.end(), f));
} 
```

但我不认为它在可读性和执行速度方面胜过 range-for 循环。

# java - 什么是通用的。以及如何在运行时获得泛型类型

> ID：15912884
> 
> 赞同：1
> 
> 时间：2013-04-09T21:27:53.653
> 
> 标签：java, generics

如何确定泛型在运行时使用的对象类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:29:27.133

由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，您无法确定通用对象实例的实际类型参数。您可以做的最好的事情是进行设置，以便您可以将类对象传递给需要知道实际类型的代码。例如，这是[`java.util.EnumMap`](http://docs.oracle.com/javase/7/docs/api/java/util/EnumMap.html)在其构造函数之一中所做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:29:34.653

如果你的意思是`T`in `List<T>`（例如），你不能，因为 Java 使用[类型 erasure](http://download.oracle.com/javase/tutorial/java/generics/erasure.html)。在*运行时*，a`List<T>`看起来像`List`. 这是真的，除非在匿名类的边缘情况下，如果你[跳过箍](http://www.jquantlib.org/index.php/Using_TypeTokens_to_retrieve_generic_parameters)来找到参数类型，这是可能的。但在一般情况下，你不能。您通常必须单独传达该信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:33:50.970

在运行时无法获取“泛型”的对象类型。如果我们使用 object.getclass()，那么我们可以获取任何具有类名的类的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T22:10:55.277

首先我们解释**什么是泛型**

**Java中的泛型是Java 5**中添加的重要功能之一，

来自[Oracle 的文档](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)：

> 泛型被引入 Java 语言以在编译时提供更严格的类型检查并支持泛型编程。为了实现泛型，Java 编译器将类型擦除应用于：
> 
> *   如果类型参数是无界的，则将泛型类型中的所有类型参数替换为其边界或 Object。因此，生成的字节码只包含普通的类、接口和方法。
>     
>     
> *   必要时插入类型转换以保持类型安全。
>     
>     
> *   生成桥方法以保留扩展泛型类型中的多态性。
> 
> 类型擦除确保不会为参数化类型创建新类；因此，泛型不会产生运行时开销。

现在如何借助此链接在运行时获取泛型类型

阅读：[http ://www.west-wind.com/weblog/posts/2011/Nov/11/Dynamically-creating-a-Generic-Type-at-Runtime](http://www.west-wind.com/weblog/posts/2011/Nov/11/Dynamically-creating-a-Generic-Type-at-Runtime)

# java - Java 赋值：Forloop 不会退回到我的 while 循环中并给出空指针错误

> ID：15912898
> 
> 赞同：-1
> 
> 时间：2013-04-09T21:28:42.067
> 
> 标签：java, loops, for-loop, while-loop, null-pointer

在我的作业的这个片段中，我有两个成员和帐户类型的数组。它们通过在成员和成员帐户创建时提供的 ssn 联系在一起。我的问题是，在搜索完数组后，我收到一个错误，例如：我创建了一个 ssn 1111 名称的成员：John Doe state:UT Account:123 balance:1000

```
 AccountNumber: 123Exception in thread "main" java.lang.NullPointerException
    at Banker.main(Banker.java:116) 
```

我需要它做的是打印下面的信息并在循环等待输入时退回到我的菜单中。

```
//make a deposit
else if(iMenu==2)
{
    myScan.nextLine();
    System.out.println("Enter Account Number:");
    accountnumber=myScan.nextInt();
    System.out.println("Enter SSN:");
    ssn=myScan.nextInt();

    for(int x=0;x<memberAcc.length;x++)
    {
        if(memberAcc[x].getAccountNumber()==accountnumber && memberAcc[x].getSSN()==ssn  )
        {
            System.out.println("Enter Deposit Ammount: ");
            deposit=myScan.nextDouble();
            memberAcc[x].MakeDeposit(deposit);
            System.out.print("\nYour Balance is: " + memberAcc[x].getAccountBalance() + "\nAccountNumber: " + memberAcc[x].getAccountNumber());
        }
    }
    for(int y=0;y<newMember.length;y++)
    {
        if( ssn==newMember[y].getSSN())
        {
            System.out.print("\nFirstName:"+newMember[y].getFirstName()+"\nLast Name: "+newMember[y].getLastName());
        }
        else
        {
            System.out.println("Error no Match!");// help
        }
    }//end for loop
}// end deposit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:19:48.540

好吧，这就是有效的方法，数组中的空字符引起了问题，并返回了数组中的最后一个空字符，所以我通过放置 x = memberAcc.length +1; 来强制数组在每个 if/else 语句之后中断。和 y = newMember.length +1；去做这个。导致整个数组被检查，然后被强制破坏，让我可以返回到我的菜单 while 循环。

# sass - Meteor.js & SCSS/指南针

> ID：15912907
> 
> 赞同：3
> 
> 时间：2013-04-09T21:29:04.327
> 
> 标签：sass, meteor

任何使用流星和 SCSS 进行开发的人。你是如何开始的，我找不到可以将 .scss 文件编译到特定文件夹中的陨石包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T21:58:33.337

您是否尝试过在开发过程中将 sass/scss 编译为本地 css？如果您将 config.rb 与 sass 文件夹和已编译的 css 文件夹一起放在客户端文件夹中，Meteor 不应该抱怨。它应该只是按照规范自动读取 css。`$ compass watch`在 config.rb 所在的客户端文件夹中运行是自动化此 css 编译的简单方法 。[Telescope](https://github.com/SachaG/Telescope)是一个很棒的 Meteor 示例应用程序，它以这种方式使用 sass。

——亚历克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T20:49:02.117

只是为了把这个作为答案发布（作为评论发布）；bookcasey 也发布了这个示例项目：[https](https://github.com/gdumitrescu/scoreboard) ://github.com/gdumitrescu/scoreboard ，它提供了一些关于如何使用 sass/scss 的指导。希望能帮助到你。

# asp.net-mvc-3 - 带有 SPA 的 MVC WebAPI

> ID：15912908
> 
> 赞同：-1
> 
> 时间：2013-04-09T21:29:09.693
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, breeze, single-page-application

我是 WebAPI 的新手。我有 4 个实体：

1.  地点
2.  服务
3.  物品
4.  应用

我已经阅读了几个 WebAPI 教程。它们似乎在每个处理单个实体的 API 控制器中都有 CRUD 方法。我需要的一项功能是模拟位置确定服务范围的级联下拉列表和级联更新。每个服务确定服务项目列表。每个项目都可以在应用程序列表中使用。问题是

1.  我是否使用 CRUD 方法创建 4 个 API 控制器？
2.  我需要一个表单上的所有 4 个对象作为允许多选的列表框。
3.  除了 4 个列表框，如何显示保存到数据库表中的选定值组合列表？
4.  哪个 javascript 库或框架最适合 SPA（单页应用程序）？我目前倾向于 Backbone.js 和 HotTowel.js。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:46:32.280

您可以将您的服务公开为[OData 服务](http://www.odata.org/)。如果您希望支持过滤，那么您应该使用单独的[OData NuGet 包](http://www.nuget.org/packages/microsoft.aspnet.webapi.odata)，并[开发您的控制器](http://blogs.msdn.com/b/webdev/archive/2013/01/29/getting-started-with-asp-net-webapi-odata-in-3-simple-steps.aspx)。在这种情况下，四个控制器将适合。

然后，您可以使用客户端丰富的数据库（例如[轻风.js）](http://www.breezejs.com/)来直接构建对 OData 服务的请求。然后，您将使用[MV* 客户端框架](http://todomvc.com/)在客户端视图模型和 UI 元素之间提供两种方式的绑定。

Hot Towel 不是一个 JavaScript 库，它是一个 Visual Studio 扩展，它允许您创建一个新项目作为您的 SPA 的起点。该模板需要 Visual Studio 2012 和 ASP.NET Web 工具 2012.2 更新。

它使用breeze.js、[Knockout.js](http://knockoutjs.com/)进行绑定，使用[Durandal.js](http://durandaljs.com/)进行导航、生命周期和视图组合。

# php - 添加回声的 GA 跟踪。 我已成功实施此解决方案来显示公共页面提要。 问问题

> ID：15912909
> 
> 赞同：0
> 
> 时间：2013-04-09T21:29:19.627
> 
> 标签：php, google-analytics

 我已成功实施此解决方案来显示公共页面提要。 

[http://johndoesdesign.com/blog/2013/php/adding-a-more-advanced-facebook-news-feed-to-a-website/](http://johndoesdesign.com/blog/2013/php/adding-a-more-advanced-facebook-news-feed-to-a-website/)

所有实现我通常会在 HREF 上跟踪 onClick 事件的尝试都会破坏我的 PHP。我意识到 javascript 和 PHP 可能不能很好地协同工作，所以我尝试将双引号更改为单引号，但无济于事，并且没有多少搜索尝试相同事物的其他人已经出现了其他尝试。

什么不起作用

```
echo '<a href="'.$news->link.'" target="_blank" onClick='trackOutboundLink(this, 'Outbound Links', 'facebook'); return false;'> 
```

也不是这个

```
echo '<a href="' . $news->link . '"  onClick=\"_gaq.push(['_trackEvent','Outbound', '3CDC', 'viewFB']);\" target="_blank"> 
```

我也试过这个

```
echo '<a href="'.$news->link.'" onClick="_gaq.push([\'_trackEvent\']" target="_blank"> 
```

在偶然发现这篇关于使用 GA 和回声的博客文章之后

[http://themeid.com/help/discussion/256/event-tracking-on-call-to-action-button/p1](http://themeid.com/help/discussion/256/event-tracking-on-call-to-action-button/p1)

提前感谢您的任何建议，我几乎是一个反复试验的脚本编写者，所以如果它真的很愚蠢，我会错过我不会感到惊讶。我认为打破 php 几乎可以保证我引入了某种类型的语法错误。

# coldfusion - 在 ColdFusion 中使用 JavaScript 设置会话变量

> ID：15912915
> 
> 赞同：0
> 
> 时间：2013-04-09T21:29:30.153
> 
> 标签：coldfusion, coldfusion-9, cfwheels

我有一个包含多个标签的网站。每个选项卡基于一组从会话变量中获取值的过滤器运行单独的报告。

**现在情况如何：**

当用户在报告选项卡中时，他们可以打开一个过滤器菜单来选择他们需要运行他们的报告的选项（医生姓名、位置、日期等），然后他们可以点击运行按钮来获取他们的报告。当用户单击“运行”时，表单将变量保存在会话中，它们可用于运行其他报告，而无需单击“运行”或一次又一次地定义它们。

**我正在尝试做的事情：**

我需要一个“应用”按钮来设置表单中的会话变量而不运行当前报告，而不是在表单中只有一个“运行”按钮。这样，用户可以预先定义他们的变量，而不必被迫运行他们不需要的报告。

我尝试使用 ajax 来调用我的应用程序外部的函数，该函数根据用户的选择设置变量。

我的挑战是以某种格式从函数中取回这些变量，我可以在其中使用它们来更新当前会话变量。

**这是我的代码示例：**

应用按钮：

```
<a href="#" id="okbutton" class="savebuttons close-reveal-modal" onclick="setSession();">Apply</a> 
```

我的 Ajax 功能：

```
function setSession(){
    var formData = $('form').serialize();

    $.ajax({
        url:'/mod_example/components/exampleCFCs/xUtility.cfc?method=setSessionVariables',
        data: formData
    }); 
}; 
```

我的部分功能：

```
<cfcomponent output="no">
    <cffunction name="setSessionVariables" access="remote" returntype="any">
        <cfargument name="docid" type="string" required="no">

        <cfif isDefined('docid')>
            <cfset session.doctorids = docid>
        </cfif>

        <cfif isDefined('docid')> 
            <cfreturn session.doctorids>
        <cfelse>
            <cfreturn 0>
        </cfif> 
    </cffunction>
</cfcomponent> 
```

我需要的是获得`session.doctorids`能够用新值更新我的会话变量的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:43:15.307

听起来您在共享目录中有此实用程序 cfc 并且您正在直接调用它。正如您所注意到的，问题在于您最终会获得多个会话。您可以通过在应用程序中设置 Facade cfc 并对该 cfc 进行 ajax 调用来解决此问题。

如果您只想公开，`setSessionVariables`则可以使用此 cfc：

```
<cfcomponent output="no">
    <cffunction name="setSessionVariables" access="remote" returntype="any">
        <cfset var xUtility = createObject('component','mod_example.components.exampleCFCs.xUtility')>
        <cfreturn xUtility.setSessionVariables(argumentCollection=ARGUMENTS)>   
    </cffunction>
</cfcomponent> 
```

如果要公开实用程序 cfc 的所有方法，则可以对其进行扩展：

```
<cfcomponent output="no" extends="mod_example.components.exampleCFCs.xUtility">
</cfcomponent> 
```

这将允许您调用实用程序 cfc 上的方法，同时保持单个会话范围（当然是每个用户）。

编辑：自从我从事轮子工作以来已经有一段时间了……但我记得我不喜欢轮子框架中的 AJAX。如果您创建一个新的子文件夹并将其称为“远程处理”并将外观放入其中，然后将 application.cfc 放入其中，如下所示：

```
<cfcomponent >
    <cfset this.name = 'whatever_your_wheels_app_name_is'>
    <cfset this.SessionManagement=true> 
</cfcomponent> 
```

您应该能够使用该外观，并且此 application.cfc 将搭载在具有相同名称的现有应用程序上。这种方法的问题是，如果应用程序超时，并且远程调用是对应用程序的第一个请求，那么 Wheels 应用程序范围可能无法正确设置。

如果您可以扩展根 application.cfc 并仅覆盖该`onRequestStart`方法，这样框架将忽略该请求，那将是最好的。为此，您需要在 cfadmin 中映射到项目的根目录，并将其用于您的 remoting/application.cfc

```
<cfcomponent extends="mappingName.Application">
    <cffunction name="onRequestStart"> 
        <cfargument name="requestname" required="true" />

        <cfset structDelete(this,'onRequest')>
        <cfset structDelete(this,'onRequestEnd')>
        <cfset structDelete(VARIABLES,'onRequest')>
        <cfset structDelete(VARIABLES,'onRequestEnd')>

        <cfreturn true>
    </cffunction>
</cfcomponent> 
```

轮子到处使用“cfinclude”的方式，你可能需要看看这篇关于扩展应用程序的帖子：http: [//techblog.troyweb.com/index.php/2011/09/cfwheels-workarounds-numero- uno-应用程序代理/](http://techblog.troyweb.com/index.php/2011/09/cfwheels-workarounds-numero-uno-application-proxy/)

有一些轮子插件（[http://cfwheels.org/docs/1-1/chapter/wheels-ajax-and-you](http://cfwheels.org/docs/1-1/chapter/wheels-ajax-and-you)）允许您通过 ajax 使用控制器操作/视图/路由，因此您可以查看这些还。

# c# - 字符串包含方法 C# WPF

> ID：15912916
> 
> 赞同：0
> 
> 时间：2013-04-09T21:29:31.160
> 
> 标签：c#, wpf

我有一个过滤列表框结果的文本框，如果我输入它全部大写，它不会返回任何内容，但都会降低。我想看看我是否错过了什么。这是我正在使用的。

谢谢

```
private void Filter(object sender, FilterEventArgs e)
{

    var src = e.Item as Users;
    if (src == null)
        e.Accepted = false;
    //else if (src.Name!= null && !src.Name.Contains(Search))
    else if (src.Name!= null && !src.Name.ToLower().Contains(Search))
        e.Accepted = false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:32:01.180

也将您的搜索更改为小写

```
 else if (src.Name!= null && !src.Name.ToLower().Contains(Search.ToLower()))
            e.Accepted = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:40:48.400

内部[string.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)是使用[IndexOf](http://msdn.microsoft.com/en-us/library/ms224425.aspx)和[OrdinalCompare](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)枚举实现的。
因此，您的代码可以更改为使用简单的代码，而不会产生返回原始字符串新副本的方法`IndexOf`所需的惩罚。`ToLower`

```
if (src == null || string.IsNullOrEmpty(src.Name))
    e.Accepted = false;
else if (src.Name.IndexOf(Search, StringComparison.CurrentCultureIgnoreCase) < 0)
    e.Accepted = false; 
```

[字符串是不可变的](http://msdn.microsoft.com/en-US/library/vstudio/362314fe.aspx)，这意味着一旦创建就不能更改字符串。
像这样的方法`ToLower`实际上创建了一个新的字符串对象来保存新的小写字符序列，并返回该新对象。

# android - 在 Android 单元测试期间无法链接外部库

> ID：15912919
> 
> 赞同：0
> 
> 时间：2013-04-09T21:29:41.403
> 
> 标签：android, unit-testing, linker, flurry, buildpath

在为我的 Android 项目加载单元测试时，我看到了一些有趣的警告。正常运行应用程序时，我没有看到这些错误。它们并没有阻止我的单元测试运行，但它们令人担忧。

下面错误日志中提到的 Flurry 库位于正在测试项目的库项目的 libs 目录中。

目录结构如下所示：

*   应用项目
*   图书馆项目
    *   库
        *   FlurryAgent.jar
*   单元测试项目

错误如下所示：

```
04-09 14:03:12.337: I/dalvikvm(28914): Failed resolving Lcom/flurry/android/bg; interface 2179 'Lcom/google/ads/AdListener;'
04-09 14:03:12.337: W/dalvikvm(28914): Link of class 'Lcom/flurry/android/bg;' failed
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914): Cannot load class. Make sure it is in your apk. Class name: 'com.flurry.android.bg'. Message: com.flurry.android.bg
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914): java.lang.ClassNotFoundException: com.flurry.android.bg
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at java.lang.Class.classForName(Native Method)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at java.lang.Class.forName(Class.java:217)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfoSource.createPackageInfo(ClassPathPackageInfoSource.java:88)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfoSource.access$000(ClassPathPackageInfoSource.java:39)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfoSource$1.load(ClassPathPackageInfoSource.java:50)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfoSource$1.load(ClassPathPackageInfoSource.java:47)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.SimpleCache.get(SimpleCache.java:31)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfoSource.getPackageInfo(ClassPathPackageInfoSource.java:72)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfo.getSubpackages(ClassPathPackageInfo.java:48)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfo.addTopLevelClassesTo(ClassPathPackageInfo.java:61)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.ClassPathPackageInfo.getTopLevelClassesRecursive(ClassPathPackageInfo.java:55)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.suitebuilder.TestGrouping.testCaseClassesInPackage(TestGrouping.java:156)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.suitebuilder.TestGrouping.addPackagesRecursive(TestGrouping.java:117)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.suitebuilder.TestSuiteBuilder.includePackages(TestSuiteBuilder.java:102)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:366)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4239)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.app.ActivityThread.access$1400(ActivityThread.java:139)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1284)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.os.Looper.loop(Looper.java:137)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at android.app.ActivityThread.main(ActivityThread.java:4918)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at dalvik.system.NativeStart.main(Native Method)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914): Caused by: java.lang.NoClassDefFoundError: com/flurry/android/bg
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    ... 26 more
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914): Caused by: java.lang.ClassNotFoundException: com.flurry.android.bg
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-09 14:03:12.347: W/ClassPathPackageInfoSource(28914):    ... 26 more 
```

我尝试确保在 Properties->Java Build Path->Order and Export 中检查了我的应用程序项目，但这似乎没有什么不同。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:15:03.173

如果您正在测试一个库项目，您应该按照这篇文章中描述的步骤（带有屏幕截图）：[http ://dtmilano.blogspot.ca/2012/04/android-testing-library-projects.html](http://dtmilano.blogspot.ca/2012/04/android-testing-library-projects.html)

# javascript - 在静态图像上绘制图像图标

> ID：15912920
> 
> 赞同：0
> 
> 时间：2013-04-09T21:29:43.887
> 
> 标签：javascript, html, canvas

为了更好地理解我的问题，请参考下图。 [http://i.imgur.com/yL0nD4h.jpg](http://i.imgur.com/yL0nD4h.jpg)

我有两张图片。地图图像和蓝色圆圈图像。请注意，地图图像只是一个图像，我没有使用 Google Maps API 来显示它。因为它将始终是相同的视图。我想要完成的是试图沿着黑线移动蓝色圆圈，我希望它能够使用简单的增量 int 数动态移动圆圈

所以如果我的 int push = 5

地图上的圆圈会向上移动一定距离，int push = -5 会将其拉回来。

目前，我有一个带有地图图像的简单 html 背景，并在顶部放置了带有图像标签的蓝色圆圈，如下所示

```
<div style="background-image:url('http://i.imgur.com/ZZHnuaf.png'); width:517px;height:374px;">
    <img width="30px" height="30px"src="http://i.imgur.com/MUlVIyg.png" />
</div> 
```

[http://jsfiddle.net/rayshinn/9VqQ7/](http://jsfiddle.net/rayshinn/9VqQ7/)

任何有关我如何开始的帮助将不胜感激！也非常感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:13:55.057

所以主要思想是有一个函数`f(v)`，它返回一个带有 ax 和 y 坐标的对象。然后将标记图像相对地定位在地图内并更改左侧和顶部样式属性以移动它。

这是一个例子[http://jsfiddle.net/9VqQ7/2/](http://jsfiddle.net/9VqQ7/2/)

# javascript - worklight 适配器加载另一个 java 脚本

> ID：15912923
> 
> 赞同：0
> 
> 时间：2013-04-09T21:29:56.643
> 
> 标签：javascript, jquery, adapter, ibm-mobilefirst

在 HTTP 适配器内部，我从 REST 服务获取 JSON 对象。在将回复返回给客户端之前，我需要对回复进行一些解析。

我想我可以有另一个 JavaScript 文件来进行解析，所以不要`adapter.js`太吵。

我不知道如何使第二个 java 脚本文件在我的适配器 JS 中可用。

在客户端，我会使用类似`$.getScript("some.js");` JAVA 类的东西可以简单地访问`classpath.className`，但我找不到任何关于如何加载另一个 Java Script 文件的参考资料！

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:17:28.920

您不能从适配器的 JS 中引用其他 JavaScript 文件。

# post - 如何使用 cURL 将文件内容作为正文实体发送

> ID：15912924
> 
> 赞同：275
> 
> 时间：2013-04-09T21:29:58.983
> 
> 标签：post, curl

我正在使用 cURL 命令行实用程序将 HTTP POST 发送到 Web 服务。我想包含一个文件的内容作为 POST 的主体实体。我已经尝试使用`-d </path/to/filename>`以及其他带有类型信息的变体，比如`--data </path/to/filename> --data-urlencode </path/to/filename>`等等......文件总是附加的。我需要它作为身体实体。

* * *

## 回答 #1

> 赞同：449
> 
> 时间：2013-04-09T21:41:42.830

我相信您正在寻找`@filename`语法，例如：

剥离新线

```
curl --data "@/path/to/filename" http://... 
```

保持新线

```
curl --data-binary "@/path/to/filename" http://... 
```

* * *

curl 将从文件中删除所有换行符。如果要发送带有完整换行符的文件，请使用`--data-binary`代替 --data

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-06-08T18:36:33.123

我知道问题已得到解答，但就我而言，我试图将文本文件的内容发送到*Slack Webhook* api，但由于某种原因，上述答案不起作用。无论如何，这就是最终对我有用的东西：

```
curl -X POST -H --silent --data-urlencode "payload={\"text\": \"$(cat file.txt | sed "s/\"/'/g")\"}" https://hooks.slack.com/services/XXX 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-07-01T06:26:22.657

在我的情况下，`@`导致某种编码问题，我仍然喜欢我的旧方式：

```
curl -d "$(cat /path/to/file)" https://example.com 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2021-10-22T16:39:33.920

curl [https://upload.box.com/api/2.0/files/3300/content](https://upload.box.com/api/2.0/files/3300/content) -H "授权: Bearer $access_token" -F file=@"C:\Crystal Reports\Crystal Reports\mysales.pdf"

# javascript - 异常处理程序不捕获异常

> ID：15912934
> 
> 赞同：0
> 
> 时间：2013-04-09T21:30:38.800
> 
> 标签：javascript, spring, exception-handling, spring-webflow-2

我在 webflow 级别有一个异常处理程序

```
<exception-handler bean="webflowExceptionHandlerBean"/> 
```

我也有两个不同的流程，流程 A 和流程 B。流程 B 是流程 A 的子流程。

**流程 A**

```
<flow>
  <on-start>
    <!-- SOME SET -->
  </on-start>
  <view-state id="viewStateA">
    <transition id="goToFlowB" to="flowB"/>
  </view-state>
  <subflow-state id="flowB" subflow="flowB">
  </subflow-state>
</flow> 
```

**流程 B**

```
<flow>
  <on-start>
    <!-- SOME SET -->
  </on-start>
  <view-state id="flowB">
    <on-entry>
    <!-- HERE THE EXCEPTION IS THROWN -->
    </on-entry>
    <transition id="goToT1" to="t1"/>
  </view-state>
</flow> 
```

因此，当在流 B**的入口中引发了****webflowExceptionHandlerBean**未捕获的异常时

 ****webflowExceptionHandlerBean**的配置实现**FlowExecutionExceptionHandler**

我试过使用**它有效，但我想在每个流上只使用一个全局异常处理程序。**

 **你知道发生了什么吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T11:03:07.327

有一个像下面这样的抽象流定义

```
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow
                            http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd" abstract="true">
<exception-handler bean="webflowExceptionHandlerBean"/>
</flow> 
```

然后，将抽象流程继承到您的流程 A 和流程 B 中，如下所示

```
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow
                            http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd" parent="abstract-flow"> 
```

您应该能够使用自定义异常处理程序全局处理您的异常****

# c# - 你能 SWIG 一个 boost::optional<> 吗？

> ID：15912937
> 
> 赞同：9
> 
> 时间：2013-04-09T21:30:45.340
> 
> 标签：c#, c++, boost, swig

我一直在成功地使用 SWIG 构建一个包装器接口，以使我的 C++ 库在 C# 中可用。最近我暴露了一些`boost::optional<>`对象，SWIG 遇到了问题。有没有标准的方法来处理这个？以前一定有人遇到过这种情况...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T15:41:11.563

由于 SWIG 不理解 boost 类型，因此必须编写类型映射。这是一对用于`boost::optional<int>`.

从 Python 中，`None`或者可以将整数传递给函数：

```
%typemap(in) boost::optional<int> %{
    if($input == Py_None)
        $1 = boost::optional<int>();
    else
        $1 = boost::optional<int>(PyLong_AsLong($input));
%} 
```

返回的 A`boost::optional<int>`将被转换为 None 或 Python 整数：

```
%typemap(out) boost::optional<int> %{
    if($1)
        $result = PyLong_FromLong(*$1);
    else
    {
        $result = Py_None;
        Py_INCREF(Py_None);
    }
%} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-13T10:15:30.727

使用 std::vector 的可能 C# 解决方案

```
#if SWIGCSHARP

// C++
%typemap(ctype) boost::optional<int32_t> "void *"
%typemap(out) boost::optional<int32_t> %{

    std::vector<int32_t> result_vec;
    if (!!$1)
    {
        result_vec = std::vector<int32_t>(1, $1.get());
    }
    else
    {
        result_vec = std::vector<int32_t>();
    }

    $result = new std::vector< uint32_t >((const std::vector< uint32_t > &)result_vec); 
%}

// C#
%typemap(imtype) boost::optional<int32_t> "global::System.IntPtr"
%typemap(cstype) boost::optional<int32_t> "int?"
%typemap(csout, excode=SWIGEXCODE) boost::optional<int32_t> {
    SWIG_IntVector ret =  new SWIG_IntVector($imcall, true);$excode

    if (ret.Count > 1) {
        throw new System.Exception("Return vector contains more then one element");
    }
    else if (ret.Count == 1) { 
        return ret[0]; 
    }
    else { 
        return null; 
    }
}

#endif //SWIGCSHARP 
```

# python - Python DB API 2.0 模块和大型 BLOB 对象

> ID：15912938
> 
> 赞同：0
> 
> 时间：2013-04-09T21:30:49.030
> 
> 标签：python, mysql, memory-management, python-db-api

我正在编写一个 python 脚本来将数据从任何 RDBMS 迁移到 MySQL。唯一的要求是源 RDBMS 必须具有[Python DB API 2.0 模块](http://www.python.org/dev/peps/pep-0249/)，并且必须支持 SQL-89 标准中定义的基本 SELECT 语句。到目前为止，我唯一关心的是如何处理大型对象，例如大型 BLOBS。我知道处理它们的机制，如 [使用 Python 将 blob 从 SQLite 写入文件中](https://stackoverflow.com/q/3379166/94484)所述。

按照这种方式，你必须在内存中有这些大对象。当它们在百兆甚至千兆字节范围内时呢？有没有办法分块转移它们？源数据库中没有大对象不是可接受的约束（即我**必须**处理它们）。

预先感谢您对该主题的建议。

# php - 从数据库中提取值以填充下拉列表

> ID：15912944
> 
> 赞同：0
> 
> 时间：2013-04-09T21:31:22.057
> 
> 标签：php, mysqli, html-select

我有一个数据库，正在尝试将值提取到列表中

这是我正在尝试运行的代码（我必须从其他地方对其进行调整），它应该返回一个数组，我想从中选择 AllianceName 属性

```
<?php
//database connection file setting.inc will need to be modified for production
include ("settings.inc");

$con = mysqli_connect("$dbhost", "$dbuser", "$dbpass");
if (!$con) {
  exit('Connect Error (' . mysqli_connect_errno() . ') '
           . mysqli_connect_error());
} 
//set the default client character set 
mysqli_set_charset($con, 'utf-8');
mysqli_select_db($dbname, $con);

$options = array();
$options[] = "<option value=''>--?--</option>";
$query = "
SELECT *
FROM `City`
GROUP BY `AllianceName`
";

$db = mysqli_query($query);
foreach ( $db as $d ) {
  $options[] = "<option value='{".$d['AllianceName']."}'></option>";
}
?>
<select class="" id="articles" size="1" name="articles">
<?php echo implode("\n", $options); ?>
</select>*/ 
```

现在这只返回我在选项数组中定义的 --?-- 。它不解析查询中的任何值。我知道查询本身是正确的，因为我已经在 SQL 服务器中完全按照这种语法运行它并且它可以工作。

我很确定这是一个语法错误... var_dump($db) 给了我一个 bool(false) 输出。

这是我正在使用的最新代码：

```
<?php
//database connection file setting.inc will need to be modified for production
include ("settings.inc");  

$db = new mysqli($dbhost, $dbuser, $dbpass, $dbname);

if($db->connect_errno > 0){
    die('Unable to connect to database [' . $db->connect_error . ']');
} 
?>
<select class="Select" id="articles" size="1" name="articles">
<?php
$sql = <<<SQL
    SELECT DISTINCT `AllianceName`
    FROM `City`
SQL;
if(!$result = $db->query($sql)){
    die('There was an error running the query [' . $db->error . ']');
}
while($row = $result->fetch_assoc()){
     echo "<option value="'.{$row['AllianceName']}.'"></option>";
}
?>
</select> 
```

当我只是回显结果时，查询本身运行良好。每次尝试将其放入下拉列表中都会失败。没有值被填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:12:55.737

这里有几个问题。首先，您不需要`GROUP BY 'AllianceName'`在查询中，您没有对数据执行任何功能，这可能导致您不返回任何结果。

其次，通常您使用 while 循环遍历查询结果。您不必这样做，但这是常见的做法，因此您的代码应如下所示。

```
<?php
//database connection file setting.inc will need to be modified for production
include ("settings.inc");  

$con = mysqli_connect("$dbhost", "$dbuser", "$dbpass", "$dbname");
if (!$con) {
  exit('Connect Error (' . mysqli_connect_errno() . ') '
       . mysqli_connect_error());
} 
//there is no need to make an array first, just have it spit out the options if you aren't making a class or function
?>
<select class="" id="articles" size="1" name="articles">
<?php
$query = "SELECT * FROM `City` ";
$db = mysqli_query($query);
while ( $d=mysqli_fetch_assoc($db)) {
  echo "<option value='{".$d['AllianceName']."}'></option>";
}
?>
</select> 
```

试试看，看看它是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:17:46.210

从[`mysqli_query()`](http://php.net/manual/en/mysqli.query.php)文档：

> 失败时返回 FALSE。对于成功的 SELECT、SHOW、DESCRIBE 或 EXPLAIN 查询，mysqli_query() 将返回一个 mysqli_result 对象。对于其他成功的查询，mysqli_query() 将返回 TRUE。

所以查询成功后你拥有的是一个 mysqli_result 对象。现在您必须逐行将结果提取到（关联）数组或对象中。

```
if($query === false) die('Query failed to execute');

while($row = $result->fetch_assoc()) {
    echo $row['AllianceName'] . PHP_EOL;
} 
```

所有这些都在网络上的数百个教程中进行了描述，因此请阅读其中之一。我推荐这些在当前十年写的，例如[http://codular.com/php-mysqli](http://codular.com/php-mysqli)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T02:16:18.010

这是最终起作用的代码。@Syndrose 和 @Zombiehunter 都为此提供了线索。

@Syndrose - 您可能需要考虑此处使用的语法，因为这是您的代码库失败的原因......尤其是 echo 标记行的语法。

```
<?php
//database connection file setting.inc will need to be modified for production
include ("settings.inc");  

$db = new mysqli($dbhost, $dbuser, $dbpass, $dbname);

if($db->connect_errno > 0){
    die('Unable to connect to database [' . $db->connect_error . ']');
} 
$sql = <<<SQL
    SELECT DISTINCT `AllianceName`
    FROM `City`
SQL;
if(!$result = $db->query($sql)){
    die('There was an error running the query [' . $db->error . ']');
    }
?>
<select  style="width:300px" class="" id="AllianceName" size="1" name="Alliance Name">
<?php
while($row = $result->fetch_assoc()){
     echo '<option value='.$row['AllianceName'].'>'.$row['AllianceName'].'</option>';
}
?>
</select> 
```

# php - 与 PHP 的 Oracle 数据库连接

> ID：15912945
> 
> 赞同：0
> 
> 时间：2013-04-09T21:31:28.180
> 
> 标签：php, oracle

我想将 PHP 与 oracle DB 连接起来。我写了以下代码

```
<?php
$db_user='system';
$db_pass='19941992';
$db_name="webproj";

        $connection = oci_connect($db_name,$db_pass,'localhost/ORCL');
        if (!$connection) { 
    echo "Couldn't make a connection!"; 
    exit; 
    } 

?> 
```

但它显示一个错误致命错误：调用未定义的函数oci_connect（）

注意。我已经安装了 php_oci8.dll 。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:39:26.960

为了使用 oci8 模块，除了启用 php_oci8.dll 之外，您还需要安装一个 Oracle 客户端。
你可以试试 Oracle 10gR2 Instant Client 或 Oracle 11gR2 Instant Client

从这里下载：[http](http://www.oracle.com/technetwork/topics/winsoft-085727.html)
://www.oracle.com/technetwork/topics/winsoft-085727.html 我建议版本 10.2.0.5，Instant Client Package - Basic Lite

# javascript - javascript正则表达式问题

> ID：15912946
> 
> 赞同：-2
> 
> 时间：2013-04-09T21:31:30.570
> 
> 标签：javascript, regex

我有一个简单的正则表达式问题。

我想要模式匹配

```
01:20 
```

前 2 个字符和后 2 个字符必须是数字，并且`:`是必需的。其他任何内容都将无效。

我有

`value.match(/\d\d:\d\d/)`但是当我输入时它不匹配`20:15`。

我做错什么了吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:40:32.387

您的正则表达式匹配“01:20”就好了。唯一的问题是它会匹配像“garbage01:20etc”这样的东西，我猜你不想要。你需要使用这个：

```
/^\d\d:\d\d$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:36:24.680

试试这个：

```
\b([0-1][0-9]|2[0-4]):[0-5][0-9]\b 
```

# java - JMock 期望中的第二组括号

> ID：15912950
> 
> 赞同：2
> 
> 时间：2013-04-09T21:31:44.983
> 
> 标签：java, class, syntax, junit, jmock

在 JUNIT 测试中，我使用的是 JMOCK。在一些示例中，我看到了类似于以下代码段的代码：

```
 mock.checking(new Expectations(){
            {
                allowing(tmp).assign(
                        with(any(String.class)),
                        with(any(String.class)),
                        with(any(Integer.class)),
                        with(any(Boolean.class)));
                will(returnValue("BLAH"));
            }
        }); 
```

我知道这`tmp`是 JMOCK 模拟的一个类，它将`"BLAH"`从分配返回。

但是，为什么会有两组大括号呢？为什么新的 Expectations(){}？它们是嵌套的，没有外部定义。

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:36:29.477

这称为一种称为[双括号初始化](http://c2.com/cgi/wiki?DoubleBraceInitialization)的技术。第一组创建一个匿名内部类，第二组执行实例初始化（相对于静态初始化）。在这种情况下，这允许您创建一个 Expectations 对象并在线进行一些设置工作。

# regex - 正则表达式（搜索/替换/添加）VIM

> ID：15912955
> 
> 赞同：0
> 
> 时间：2013-04-09T21:32:00.633
> 
> 标签：regex, search, vim

我正在尝试在我的文件中搜索和替换。

例子：

```
[{"pk": 1, "model": "blog.post", "fields": {"text": "asdadasdasd", "genre": 8, 
"image": "image/test.jpg", "created_at": "2013-04-09T19:22:45Z", 
"updated_at": "2013-04-09T19:22:45Z", "help": 12, "reference": 12, 
"title": "Test1", "slug": "test-1"}}] 
```

我需要搜索：“流派”：8 并替换或添加：“流派”：[8]

```
Use:
:g/"genre": \d/s//[&]/g 
```

但问题：[“流派”：8]有人知道如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:35:16.863

尝试以下操作：

```
:%s/\("genre": \)\(\d\d*\)/\1[\2]/g 
```

这使用捕获组，`\1`替换中的 指的是组`\("genre": \)`，`\2`替换中的指的是`\(\d\d*\)`. 请注意，我将其从 just 更改`\d`为`\d\d*`以便它也可以匹配多个数字，否则类似的东西`"genre": 80`会被替换为`"genre": [8]0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:38:16.563

此行应该可以解决您的问题：

```
:%s/"genre": \zs\d\+\ze/[&]/g 
```

`\zs and \ze`使替换只匹配后面的数字`"genre":(one space)`。这样就可以简单地使用`&`.

```
:h \zs
:h \ze 
```

详情

# javascript - D3 JSON数据转换

> ID：15912966
> 
> 赞同：9
> 
> 时间：2013-04-09T21:32:53.253
> 
> 标签：javascript, json, d3.js

我有这个 JSON 数据结构：

```
[
    { "dep": "d1", "name": "name1", "size": "size1" },
    { "dep": "d1", "name": "name2", "size": "size2" },
    { "dep": "d2", "name": "name1", "size": "size3" },
    { "dep": "d2", "name": "name1", "size": "size4" }
] 
```

我想把它转换成这样的嵌套结构：

```
{
    "name": "root",
    "children": [
        { "name": "d1",
            "children": [
                { "dep": "d1", "name": "name1", "size": "size1" },
                { "dep": "d1", "name": "name2", "size": "size2" }
            ]
        },
        { "name": "d2",
            "children": [
                { "dep": "d2", "name": "name1", "size": "size3" },
                { "dep": "d2", "name": "name2", "size": "size4" }
            ]
        }
    ]
} 
```

...并进一步使用它来制作[Reingold-Tilford 树](http://bl.ocks.org/mbostock/4063550)。谁能指出我正确的方向，我对 D3 很陌生！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T00:08:15.583

策略是根据你想要的创建一个新的空数据结构，然后通过遍历整个原始数据集来填充它。这是代码：

```
var data = [
    { "dep": "d1", "name": "name1", "size": "size1" },
    { "dep": "d1", "name": "name2", "size": "size2" },
    { "dep": "d2", "name": "name1", "size": "size3" },
    { "dep": "d2", "name": "name2", "size": "size4" }
]

var newData = {"name": "root", "children": {}}

data.forEach(function (d) {
    if (typeof newData.children[d.dep] !== 'undefined') {
        newData.children[d.dep].children.push(d)
    } else {
        newData.children[d.dep] = {"name": d.dep, "children": [d]}
    }
})
newData.children = Object.keys(newData.children).map(function (key) {
    return newData.children[key];
}); 
```

最后的赋值是将对象转换为数组。

这给出了所需的结果`newData`：

```
{
    "name": "root",
    "children": [
        { "name": "d1",
            "children": [
                { "dep": "d1", "name": "name1", "size": "size1" },
                { "dep": "d1", "name": "name2", "size": "size2" }
            ]
        },
        { "name": "d2",
            "children": [
                { "dep": "d2", "name": "name1", "size": "size3" },
                { "dep": "d2", "name": "name2", "size": "size4" }
            ]
        }
    ]
} 
```

**jsFiddle：http:** [//jsfiddle.net/chrisJamesC/eB4jF/](http://jsfiddle.net/chrisJamesC/eB4jF/)

**注意：**此方法不适用于嵌套结构。对嵌套结构执行此操作会更加困难，但您始终可以使用递归函数。

* * *

**编辑：**正如@imarane 在他的回答中所建议的，您可以使用[d3.nest()](https://github.com/mbostock/d3/wiki/Arrays#-nest)这比我手工制作的解决方案要好得多。你可能会因此接受他的回答。通过玩它，甚至可以很容易地拥有多层嵌套：

```
var data = [
    { "dep": "d1", "name": "name1", "size": "size1" },
    { "dep": "d1", "name": "name2", "size": "size2" },
    { "dep": "d2", "name": "name1"},
    { "dep": "d2"}
]

var newData = {
    "key":"root", 
    "children": 
        d3.nest()
            .key(function(d){return d.dep})
            .key(function(d){return d.name})
            .key(function(d){return d.size})
            .entries(data)
} 
```

其中给出：

```
{"key":"root","children":[
    {"key":"d1","values":[
        {"key":"name2","values":[
            {"dep":"d1","name":"name2","size":"size1"},
            {"dep":"d1","name":"name2","size":"size2"}
        ]}
    ]},
    {"key":"d2","values":[
        {"key":"name1","values":[
            {"dep":"d2","name":"name1"}
        ]},
        {"key":"undefined","values":[
            {"dep":"d2"}
        ]}
    ]}
]} 
```

其中以下数据结构（我希望能更好地理解整点）：

```
var data = [
    { "dep": "d1", "name": "name2", "size": "size1" },
    { "dep": "d1", "name": "name2", "size": "size2" },
    { "dep": "d2", "name": "name1"},
    { "dep": "d2"}
] 
```

**JsFiddle：http:** [//jsfiddle.net/chrisJamesC/eB4jF/2/](http://jsfiddle.net/chrisJamesC/eB4jF/2/)

**更多关于 Nest：** [http ://bl.ocks.org/phoebebright/raw/3176159/](http://bl.ocks.org/phoebebright/raw/3176159/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T03:46:15.043

另一种选择是使用 D3 内置的嵌套方法....

```
var nested = d3.nest()
.key(function(d,i){ return d.dep; })
.entries(data); 
```

输出：

```
 [
  {
    "key": "d1",
    "values": [
      {
        "dep": "d1",
        "name": "name1",
        "size": "size1"
      },
      {
        "dep": "d1",
        "name": "name2",
        "size": "size2"
      }
    ]
  },
  {
    "key": "d2",
    "values": [
      {
        "dep": "d2",
        "name": "name1",
        "size": "size3"
      },
      {
        "dep": "d2",
        "name": "name2",
        "size": "size4"
      }
    ]
  }
] 
```

JsFiddle：http: [//jsfiddle.net/imrane/bSGrG/1/](http://jsfiddle.net/imrane/bSGrG/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-16T16:03:12.020

由于[`d3-collection`](https://github.com/d3/d3-collection)已被弃用[`d3.array`](https://github.com/d3/d3-array)，我们可以使用[`d3.groups`](https://github.com/d3/d3-array/blob/master/README.md#groups)来实现以前使用的功能`d3.nest`：

```
var output = {
  "name": "root",
  "children": d3.groups(input, d => d.dep).map(([k, vs]) => ({ "name": k, "children": vs }))
}; 
```

例如：

```
var input = [
  { "dep": "d1", "name": "name1", "size": "size1" },
  { "dep": "d1", "name": "name2", "size": "size2" },
  { "dep": "d2", "name": "name1", "size": "size3" },
  { "dep": "d2", "name": "name1", "size": "size4" }
];

var output = {
  "name": "root",
  "children": d3.groups(input, d => d.dep).map(([k, vs]) => ({ "name": k, "children": vs }))
};

console.log(output);
```

```
<script src="https://d3js.org/d3-array.v2.min.js"></script>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-22T14:39:17.173

嘿伙计们，我想我找到了一个相当简单的解决方案。我以非常流线型的方式为分层条形图完成了一个非常好的大型数据集（400,000 行）嵌套。它利用了 Underscore 库和一个附加功能`_.nest`。只需下载并包含必要的两个库

```
src="underscore-min.js"
src="underscore.nest.js" 
```

然后使用该`_.nest`函数创建您的结构。这是我的台词：

```
var newdata = _.nest(data, ["Material", "StudyName"]); 
```

`"Material"`并且`"StudyName"`是我想要将我的结构分组到的列。

如果您需要完成更多事情，还有其他选项可以使用此功能，但我会这样保留

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-29T18:31:27.777

用这个。如果需要，您可以在浏览器的控制台中检查输出。

```
function reSortRoot(root, value_key) {
                //console.log("Calling");
                for ( var key in root) {
                    if (key == "key") {
                        root.name = root.key;
                        delete root.key;
                    }
                    if (key == "values") {
                        root.children = [];
                        for (item in root.values) {
                            root.children.push(reSortRoot(root.values[item],
                                    value_key));
                        }
                        delete root.values;
                    }
                    if (key == value_key) {
                        root.value = parseFloat("1");
                        delete root[value_key];
                    }
                }
                return root;
            } 

            var testdata=[
                          { "dep": "d1", "name": "name1", "size": "size1" },
                          { "dep": "d1", "name": "name2", "size": "size2" },
                          { "dep": "d2", "name": "name1", "size": "size3" },
                          { "dep": "d2", "name": "name1", "size": "size4" }
                      ];

            var testJson = d3.nest()
            .key(function(d)  { return d.dep; })
            .entries(testdata); 
             console.log(testJson);

            var testRoot={};
            testRoot.key = "Information";
            testRoot.values = testJson;
            testRoot = reSortRoot(testRoot, "name");

             console.log(testRoot); 
```

# asp.net-mvc - 覆盖 DateTime 的默认验证

> ID：15912970
> 
> 赞同：2
> 
> 时间：2013-04-09T21:33:19.257
> 
> 标签：asp.net-mvc

**我为继承自RequiredAttribute**的 DateTime 创建了一个自定义验证属性。由于某种原因，MVC 中某种类型的内置 DateTime 验证覆盖了我的自定义验证，因为当我输入 dd 作为日期值时，我不断收到错误消息“值 'dd' 对日期无效”。如何使用我的自定义验证器获取它，以便显示我自己的错误消息？

查看模型

```
public class MyViewModel
{
    [Required(ErrorMessage = "Name is required")]
    [Display(Name = "Name")]
    public string Name { get; set; }

    [DateValidation(ErrorMessage = "A valid date is required")]
    [Display(Name = "Date")]
    public DateTime Date { get; set; }
} 
```

验证器

```
public class DateValidationAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        DateTime dt;

        return DateTime.TryParse(value.ToString(), out dt);
    }
} 
```

回应 Lars 的回答：如何让它使用在我的模型的验证属性中创建的错误消息，以便我可以为使用相同验证属性的不同模型属性创建不同的错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:44:47.583

在里面`IsValid`你可以改变`ErrorMessage`：

```
public override bool IsValid(object value)
{
    ErrorMessage = "Date is invalid."; 
```

# image - 从图像中提取图案

> ID：15912971
> 
> 赞同：2
> 
> 时间：2013-04-09T21:33:23.370
> 
> 标签：image, background, pattern-matching, photoshop

有没有办法从图像中找出模式？我需要它，以便我可以从中创建一个较小的图像来重复，这样我就可以有一个背景图案。

ps：不要介意两种不同的颜色，我只需要弄清楚几乎透明的线条图案。

![带图案的图像](https://i.stack.imgur.com/g3mXp.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:28:50.033

这是该图案的白色和黑色重复版本。

![在此处输入图像描述](https://i.stack.imgur.com/1Ve5V.png) ![在此处输入图像描述](https://i.stack.imgur.com/jfNqH.png)

我做了什么？

1.  复制了图像的顶部部分
2.  将其粘贴到纯白色图层上的蒙版中
3.  在图层下添加了一张照片来模拟完成的结果
4.  反转面具
5.  调整蒙版上的级别，直到我得到与您的示例类似的效果
6.  将图像裁剪为一种图案，以便可重复
7.  点击`CMD` `CNTRL` `SHIFT` `S`保存为网络并将其保存为 24 位 PNG
8.  然后将白色层反转为黑色并再次保存为网络。

这似乎是你要找的东西吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:34:44.373

我会使用级别让它几乎是黑白的。

1.  使用滑块尽可能地获得最浅的灰色
2.  使用关卡调色板中的高光/阴影吸管使其更接近
3.  使用阈值来完成剩下的工作。

看看下面的图片，看看我所描述的是否是您想要的。

![使用级别/阈值的模式](https://i.stack.imgur.com/7oFGx.png)

# asp.net - 如何在我的 apphost 中使用 IDbConnection

> ID：15912972
> 
> 赞同：1
> 
> 时间：2013-04-09T21:33:26.107
> 
> 标签：asp.net, servicestack

我想知道如何从我的全局过滤器中访问 IDbConnection，到目前为止我所拥有的就是这个。

现在我想得越多，我的 apphost 中就没有 IDb 东西，那么我该如何检索包装了 ormlite 'stuff' 和缓存的存储库？

谢谢你，斯蒂芬

**全球.asax**

```
public override void Configure(Container container)
{

    var dbConnectionFactory =
        new OrmLiteConnectionFactory(ConfigUtils.GetConnectionString("test"), true, SqlServerOrmLiteDialectProvider.Instance);

    container.Register<IDbConnectionFactory>(dbConnectionFactory); 

    RequestFilters.Add((httpReq, httpResp, requestDto) =>
        {

            // Do something here with either my repo or ormLite

        });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:20:59.527

如果您可以访问容器，则可以执行以下操作：

```
RequestFilters.Add((httpReq, httpResp, requestDto) => {
    using (var db = container.Resolve<IDbConnectionFactory>().Open()) 
    {
        // Do something here with either my repo or ormLite
    }
}); 
```

否则，您可以通过`AppHostBase.Resolve<T>`单例访问它：

```
RequestFilters.Add((httpReq, httpResp, requestDto) => {
    using (var db = AppHostBase.Resolve<IDbConnectionFactory>().Open()) 
    {
        // Do something here with either my repo or ormLite
    }
}); 
```

# ant - 如何在不使用 Ant-contrib 的情况下在 Ant 中模拟 if-elseif-else？

> ID：15912976
> 
> 赞同：2
> 
> 时间：2013-04-09T21:33:33.217
> 
> 标签：ant, ant-contrib

我需要 Ant 中的 if-elseif-else 条件语句。

我不想使用 Ant-contrib。

[我在这里](http://jaysonlorenzen.wordpress.com/2010/03/10/apache-ant-if-else-condition-without-ant-contrib/)尝试了解决方案

```
 <target name="condition.check">
    <input message="Please enter something: " addproperty="somethingProp"/>
    <condition property="allIsWellBool">
        <not>
            <equals arg1="${somethingProp}" arg2="" trim="true"/>
        </not>
    </condition>
</target>
<target name="if" depends="condition.check, else" if="allIsWellBool">
    <echo message="if condition executes here"/>
</target>
<target name="else" depends="condition.check" unless="allIsWellBool">
    <echo message="else condition executes here"/>
</target> 
```

但是我必须在 if 和 else 目标中设置属性，这些属性在调用目标中不可见。

使用条件还有其他出路吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:56:17.217

将依赖项移出`if`和`else`移入依赖于所有其他目标的新目标：

```
<project name="ant-if-else" default="newTarget">
    <target name="newTarget" depends="condition.check, if, else"/>

    <target name="condition.check">
        <input message="Please enter something: " addproperty="somethingProp"/>
        <condition property="allIsWellBool">
            <not>
                <equals arg1="${somethingProp}" arg2="" trim="true"/>
            </not>
        </condition>
    </target>

    <target name="if" if="allIsWellBool">
        <echo message="if condition executes here"/>
    </target>
    <target name="else" unless="allIsWellBool">
        <echo message="else condition executes here"/>
    </target>
</project> 
```

# google-maps-api-3 - 自定义图标未加载 - 只有默认的红色引脚

> ID：15912981
> 
> 赞同：-1
> 
> 时间：2013-04-09T21:33:54.350
> 
> 标签：google-maps-api-3

我已经尝试了多种方法来加载我的 customIcons，但目前我只得到红色的引脚......我不确定我是否正确设置了 customIcons 的开关/数组。我正在从 v2 传输代码。

[卡萨德拉贡内斯](http://dev.casadragones.com/where-to-buy/)

这是该页面的链接。代码从第 510 行的 View Source 开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:04:21.920

目前你使用了错误的标签`customIcons.`

改变它们：

```
1 to establishment
2 to store
3 to distributor 
```

# vbscript - 如何获取提供的 VBScript 来为我的文件夹复制文件？

> ID：15912983
> 
> 赞同：1
> 
> 时间：2013-04-09T21:34:06.950
> 
> 标签：vbscript

我想使用 vbsscript 找到最新的文件夹并将文件复制到目标文件夹。

这是[在 SO 上](https://stackoverflow.com/questions/15577945/vb-script-find-most-recent-folder-copy-files-to-destination-folder?rq=1)完成的，但提供的解决方案对我不起作用。

Ansgar Wiechers 提供了此代码。

```
rootFolder = "C:\root"
dstFolder  = "C:\dst"

Set fso = CreateObject("Scripting.FileSystemObject")

Set mostRecent = FindMostRecent(fso.GetFolder(rootFolder))
For Each f In mostRecent
  f.Copy fso.BuildPath(dstFolder, f.Name)
Next

Function FindMostRecent(fldr)
  Set mrf = fldr
  For Each sf In fldr.SubFolders
    Set mrsf = FindMostRecent(sf)
    If mrsf.DateLastModified > mrf.DateLastModified Then Set mrf = mrsf
  Next
  Set FindMostRecent = mrf
End Function 
```

将第一行更改为`rootFolder = "D:\"`并将第二行更改为 时 `dstFolder = "C:\"`，出现以下错误：

```
Script: C:\Users\xxx\Desktop\new 456 82.vbs
Line:   14
Char:   5
Error:  Object required: 'FindMostRecent(...)'
Code:   800A01A8
Source:     Microsoft VBScript runtime error 
```

更改根到`D:\Files`和目标`C:\test`给出：

```
Script: C:\Users\Bradley\Desktop\new 456 8.vbs
Line:   7
Char:   1
Error:  Object doesn't support this property or method
Code:   800A01B6
Source:     Microsoft VBScript runtime error 
```

我还没有合并`copy`在同一个线程中找到的命令：

```
cls set knownpath=C:\a for /f "delims=" %%a in ('dir /ad /od /b "%knownpath%"') do ( set name=%%a )         copy "%knownpath%\%name%" "C:\b" 
```

我不知道应该在脚本中的哪个位置放置命令。我`Set FindMostRecent = mrf`在换行后立即尝试，但出现另一个错误。也尝试过`End`功能，并得到另一个错误。

我需要把它分解给我，就好像我是一个五岁的孩子一样。

编辑：好的，现在主要代码正在运行，我正在尝试插入复制命令。这是我到目前为止所尝试的，它给了我错误。

```
 rootFolder = "D:\test"
    dstFolder  = "D:\test2"

    Set fso = CreateObject("Scripting.FileSystemObject")

    Set mostRecent = FindMostRecent(fso.GetFolder(rootFolder))
    For Each f In mostRecent.Files
      f.Copy fso.BuildPath(dstFolder, f.Name)
    Next

    Function FindMostRecent(fldr)
      Set mrf = fldr
      For Each sf In fldr.SubFolders
        Set mrsf = FindMostRecent(sf)
        If mrsf.DateLastModified > mrf.DateLastModified Then Set mrf = mrsf
      Next
      Set FindMostRecent = mrf
    End Function
    cls set knownpath="D:\test" for /f "delims=" %%a in ('dir /ad /od /b "%knownpath%"') do ( set name=%%a ) copy "%knownpath%\%name%" "D:\test2" 
```

编辑2：

```
rootFolder = "D:\Files"
dstFolder  = "D:\test"

Set fso = CreateObject("Scripting.FileSystemObject")

Set mostRecent = FindMostRecent(fso.GetFolder(rootFolder))
mostRecent.Copy dstFolder

Function FindMostRecent(fldr)
  Set mrf = fldr
  For Each sf In fldr.SubFolders
    Set mrsf = FindMostRecent(sf)
    If mrsf.DateLastModified > mrf.DateLastModified Then Set mrf = mrsf
  Next
  Set FindMostRecent = mrf
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:04:29.883

代码的作用：

`FindMostRecent()`是一个递归（即自引用）函数，它返回给定根文件夹下文件夹树中最近修改的文件夹。

如果给定文件夹不包含子文件夹，则当前文件夹是最近的文件夹，因此该函数通过设置默认为当前文件夹`mrf = fldr`。

如果文件夹包含子文件夹，则每个子文件夹树中的最新文件夹由递归调用 ( `FindMostRecent(sf)`) 确定。该文件夹`mrsf`中的“最后修改”日期 ( ) 与当前最新文件夹 ( `mrf`) 的“最后修改”日期进行比较。如果`mrsf`比 更新`mrf`，则将后者替换为前者。

检查每个现有子文件夹后（如果有），`mrf`包含来自 下文件夹树的最新文件夹`fldr`，然后将其返回给调用者。

* * *

至于错误，请尝试在函数中添加一些调试代码：

```
Function FindMostRecent(fldr)
  Set mrf = fldr
  ***WScript.Echo "TypeName(mrf) = " & TypeName(mrf)
  WScript.Echo "mrf = " & mrf.Name
  WScript.Echo mrf.Path***
  For Each sf In fldr.SubFolders
    Set mrsf = FindMostRecent(sf)
    ***On Error Resume Next***
    If mrsf.DateLastModified > mrf.DateLastModified Then Set mrf = mrsf
    ***If Err Then
      WScript.Echo "TypeName(mrsf) = " & TypeName(mrsf)
      WScript.Echo "mrsf = " & mrsf.Name
    End If
    On Error Goto 0***
  Next
  Set FindMostRecent = mrf
End Function
```

这应该可以帮助您追踪错误发生的时间点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:26:28.163

以下将从树中复制最近修改的文件夹`rootFolder`（可能是`rootFolder`它自己！）到`dstFolder`：

```
rootFolder = "D:\Files"
dstFolder  = "D:\test"

Set fso = CreateObject("Scripting.FileSystemObject")

Set mostRecent = FindMostRecent(fso.GetFolder(rootFolder))
mostRecent.Copy dstFolder

Function FindMostRecent(fldr)
  Set mrf = fldr
  For Each sf In fldr.SubFolders
    Set mrsf = FindMostRecent(sf)
    If mrsf.DateLastModified > mrf.DateLastModified Then Set mrf = mrsf
  Next
  Set FindMostRecent = mrf
End Function 
```

请注意，使用`dstFolder = "D:\test"`该指令`mostRecent.Copy dstFolder`会将 的*内容*复制到`mostRecent`目标文件夹：

```
Before:

  D:\
  +-Files\
  | +-foo.txt
  | `-bar\
  `-test\

After:

  D:\
  +-Files\
  | +-foo.txt
  | `-bar\
  `-test\
    **+-foo.txt
    `-bar\**
```

如果要复制整个`mostRecent`文件夹：

```
Before:

  D:\
  +-Files\
  | +-foo.txt
  | `-bar\
  `-test\

After:

  D:\
  +-Files\
  | +-foo.txt
  | `-bar\
  `-test\
    **`-Files\
      +-foo.txt
      `-bar\**
```

目的地必须有一个尾随反斜杠：

```
mostRecent.Copy dstFolder & "\" 
```

# mysql - 库存表应该使用什么sql

> ID：15912986
> 
> 赞同：0
> 
> 时间：2013-04-09T21:34:23.703
> 
> 标签：mysql, sql

我有一个这样设置的 MySQL 数据库，

user_table 表

*   user_ID PK
*   用户名
*   密码
*   电子邮件
*   等级
*   地点

game_items 表

*   game_item_is PK
*   项目名

user_inventory 表

*   user_inventory_id PK
*   user_id 外键
*   game_item_id FK
*   数量

这是我正在构建的游戏的数据库，我正在尝试编写一个 sql 查询以从数据库中获取以下数据：

*   等级
*   地点
*   用户与其 user_id 关联的游戏项目列表

我已经拥有的数据是 user_id 和用户名。
那么我将如何创建这个 sql 语句呢？我会使用联接吗？如果是在哪里？

我想获取用户与他们的帐户相关联的每个游戏项目，所以这会在任何地方包括 * 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:00:27.743

好的，在 phpmyadmin 上玩了一会儿 sql 后，我得到了我想要的结果，如果有人想知道这里是代码：

```
SELECT ut.username, ut.level, ut.location, ui.quantity, ui.game_item_id
FROM user_table ut, user_inventory ui
WHERE ut.user_id = ui.user_id
AND ut.user_id =1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:55:51.003

如果我正确理解您的问题，只需在一个查询中选择级别和位置，在另一个查询中选择库存项目

```
SELECT level, location FROM user_table WHERE id = ..

SELECT * FROM user_inventory WHERE id = .. 
```

# ios - (iOS 6) 从 UIActivityViewController 外部使用 UIActivity 的自定义子类

> ID：15912989
> 
> 赞同：0
> 
> 时间：2013-04-09T21:34:36.100
> 
> 标签：ios, uiactivityviewcontroller, uiactivity

我已通过 iOS 6 将共享添加到我的应用程序中`UIActivityViewController`。除了通常的嫌疑人（Twitter、Facebook 等）之外，我还使用`UIActivity`我创建的一个子类来启用与另一个服务（App.net）的共享。一切正常。

现在我想添加一个选项，用户可以选择默认共享服务，这样当他点击我的应用程序的共享按钮时，而不是`UIActivityViewController`出现，而是用户选择的默认服务的界面出现。现在，我可以使用`SLComposeViewController`. 但是，我看不到任何`SLComposeViewController`用于调出我的 custom`UIActivity`用户界面的方法。

有什么方法可以调用我的自定义`UIActivity`子类并直接调出它的 UI（即不在 a 内`UIActivityViewController`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T10:18:18.353

我不明白你为什么要这样做。由于您显然有一些创建自己的共享视图控制器的方法，您可以再次使用它 - 无需使用 UIActivity 路由（顺便说一下，这是一个糟糕的 API）。

# java - MySQL数据库连接在检查是否关闭后立即关闭

> ID：15912992
> 
> 赞同：1
> 
> 时间：2013-04-09T21:34:47.520
> 
> 标签：java, jdbc

我一直在为我的 java 应用程序做大量工作以提高数据库连接稳定性等。有一个问题仍然困扰着用户，这似乎很常见，是我的代码而不是他们的数据库服务器的问题。

我们正在使用 jdbc-pool。

错误：

```
Database connection error: Connection has already been closed.
 java.sql.SQLException: Connection has already been closed.
 at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:118)
 at $Proxy12.commit(Unknown Source)
 at me.botsko.prism.actionlibs.ActionRecorder.insertActionsIntoDatabase(ActionRecorder.java:201)
 at me.botsko.prism.actionlibs.ActionRecorder.save(ActionRecorder.java:81)
 at me.botsko.prism.actionlibs.ActionRecorder.run(ActionRecorder.java:230)
 at org.bukkit.craftbukkit.v1_5_R2.scheduler.CraftTask.run(CraftTask.java:53)
 at org.bukkit.craftbukkit.v1_5_R2.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 at java.lang.Thread.run(Unknown Source) 
```

它涉及的代码：

```
public void insertActionsIntoDatabase() {

    PreparedStatement s = null;
    Connection conn = null;

    try {

        if( !queue.isEmpty() ){

            conn = Prism.dbc();
            if(conn == null || conn.isClosed()){
                // try to re-open conn
                return;
            }
            conn.setAutoCommit(false);
            s = conn.prepareStatement("QUERY HERE");
            while (!queue.isEmpty()){
                s.executeBatch(); // Execute every x items.
            }

            s.executeBatch();
            conn.commit();

        }
    } catch (SQLException e){
        plugin.handleDatabaseException( e );
    } finally {
        if(s != null) try { s.close(); } catch (SQLException e) {}
        if(conn != null) try { conn.close(); } catch (SQLException e) {}
    }
} 
```

我长期以来一直检查连接是否关闭，但不知何故有些东西跳过了。此代码每次运行时都会抓取一个新的池连接，因此它不使用应用程序其他部分使用的连接。

# java - 如何检查字符串是否是纯字母？

> ID：15912994
> 
> 赞同：2
> 
> 时间：2013-04-09T21:34:52.497
> 
> 标签：java, swing, validation, jtextfield

我想对 JTextField 运行验证检查以确保它只包含字母。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:36:41.103

您可以使用[`matches`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)：

```
str.matches("\\p{Alpha}+") 
```

请注意，`\p{Alpha}`匹配任何字母（`a-z`或`A-Z`），因此`\p{Alpha}+`匹配任何连续的字母串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:38:37.403

尝试这个：

```
public boolean containsOnlyLetters(String s)
{
    for(char c : s.toCharArray())
    {
        if(!Character.isLetter(c))
            return false;
    }
    return true;
} 
```

# html - iOS HTML解析问题

> ID：15912995
> 
> 赞同：0
> 
> 时间：2013-04-09T21:34:57.540
> 
> 标签：html, ios, parsing, tags, html-parsing

我已经在我的项目中实现了 HTMLParser。我正在连接到我的手机运营商的计费网站，我需要解析不同的变量。

来自[HTML](http://en.wikipedia.org/wiki/HTML)内容

如果用户名和密码不正确，我需要一个标签来指示我并向用户显示警报。

```
NSArray *spanNodes = [bodyNode findChildTags:@"div"];

for (HTMLNode *spanNode in spanNodes) {
    if ([[spanNode getAttributeNamed:@"class"] isEqualToString:@"notification-item notification-item-error"]) {
        //Above my tag
        [self alertMessageLogin];
        NSLog(@"%@", [spanNode rawContents]); //Answer to second question
    }
    else {
        NSlog(@"You are not logged in");
    }
} 
```

但是如果我在这段代码中添加了 else ，那么我需要检查 else 没有标签“notification-item notification-item-error”，所以给我看另一个视图。

在我的情况下，之后`if`，我的代码将出于`else`某种原因，所以我的代码认为`if`条件为假并进入`else`条件。但没有`else`一切工作正常。这是我的日志`else`。我不知道，为什么会打印几个“您已登录”？

我该如何解决这个问题？

```
2013-04-09 23:48:50.828 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.830 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.830 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.830 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.830 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.831 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.831 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.831 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.832 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.832 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.832 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.833 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.833 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.833 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.833 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.834 GolanTelecom[90143:c07] You are logged in
2013-04-09 23:48:50.834 GolanTelecom[90143:c07] <div
class="notification-item notification-item-error"><div
class="notification-item-inner"><span
class="notification-content">???? ???? ?? ?????
??????</span></div></div> 2013-04-09 23:48:50.834
GolanTelecom[90143:c07] You are logged in 2013-04-09 23:48:50.835
GolanTelecom[90143:c07] You are logged in 2013-04-09 23:48:50.835
GolanTelecom[90143:c07] You are logged in 2013-04-09 23:48:50.835
GolanTelecom[90143:c07] You are logged in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:00:35.737

**这是工作代码：**

```
 NSError *error = nil;
    NSString *html = str;
    HTMLParser *parser = [[HTMLParser alloc] initWithString:html error:&error];

    if (error) {
        NSLog(@"Error: %@", error);
        return;
    }

    HTMLNode *bodyNode = [parser body];
    NSArray *spanNodes = [bodyNode findChildTags:@"div"];
    BOOL found = NO;

    for (HTMLNode *spanNode in spanNodes) {
        if ([[spanNode getAttributeNamed:@"class"] isEqualToString:@"notification-item notification-item-error"]) {
            [self alertMessageLogin];
            found = YES;
            NSLog(@"%@", [spanNode rawContents]);
            break;
        }
    }

    if ( NO == found) {
        //NSLog(@"Hey, I'm here!");
        [self HideLoginScreenWhenLogged];
    }
} 
```

# java - 查找并打印从 1 到 N 的所有素数

> ID：15912996
> 
> 赞同：0
> 
> 时间：2013-04-09T21:34:57.893
> 
> 标签：java

这是我到目前为止所拥有的，我通常很擅长跟踪程序，但我就是不知道我卡在哪里了。它应该得到“N”并通过D对其进行Mod，等于N-1，而D大于1。一旦完成，它就会比原来的数字少一个数字，并在同时做同样的事情N 大于 2。至于“计数”，我只是添加了它，以便检查数字是否为素数。例如：如果计数 = N-2，基本上是从 2 到 N-1 的每个数字，则该数字是素数。

```
public class Challenge14 {
  public void inti() {
    int count = 0;
    int N = 7;
    int D = N - 1;
    int A = 0;

    while (N > 2) {
      D = N - 1;

      while (D > 1) {
        A = N % D;
        D--;

        if (A == 0) {
          break;
        }

        else {
          count++;
        }
      }

      if (count == N - 2) {
        System.out.println(N);
      }
      N--;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:40:38.217

使用 for 循环。

```
for (int i = 1; i<N; i++) {
System.out.println(i);
} 
```

# php - PHP 电子邮件 - 内联图像和 2 个附件

> ID：15912997
> 
> 赞同：0
> 
> 时间：2013-04-09T21:35:13.410
> 
> 标签：php

我已经为这个脚本苦苦挣扎了 5 天，但我无法让它工作。我想使用 php 邮件功能发送邮件。它需要有一个内联图像和 2 个附件。我所拥有的就是这样，它在 Thunderbird 中显示正确，但在 Gmail 客户端中，它将图像显示为附件，而不是在邮件正文中。这是我的代码：

```
<?php

$filename = "sharewood-lija-cjenik.xlsx";
$filename2 = "sharewood-lija-ponuda.pdf";
$inline = chunk_split(base64_encode(file_get_contents('../img/sharewoodlija.png')));
$sep = sha1(date('r', time()));

$uid = md5(uniqid(time()));

$subject = "Sharewood Lija";
$mailto = "mymail@gmail.com";

$message = '<img src="cid:image_identifier" alt="SWLBanner" /><br><br>';
$message .="<div>html message</div>";

$header = "From: asdf <asdf@asdf.hr>\r\n";
$header .= "Reply-To: asdf@asdf.hr\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/related; boundary=\"".$uid."\"\r\n\r\n";

$header .= "This is a multi-part message in MIME format.\r\n";  

$header .= "--".$uid."\r\n";    
$header .= "Content-Type: text/html; charset=uft-8\r\n";
//$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $message."\r\n\r\n";

//image
$header .= "--".$uid."\r\n";
$header .= "Content-Type: image/png;\r\n";
$header .= "name=\"sharewoodlija.png\"\r\n";
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-ID: <image_identifier>\r\n";
$header .= "Content-Disposition: inline;\r\n";
$header .= "filename=\"sharewoodlija.png\"\r\n\r\n";

$header .= $inline."\r\n";

//cjenik
$file = "../cjenik/sharewood-lija-cjenik.xlsx";
$file_size = filesize($file);
$handle = fopen($file, "r");
$content = fread($handle, $file_size);
fclose($handle);
$content = chunk_split(base64_encode($content));  
$name = basename($file);

$header .= "--".$uid."\r\n";
$header .= "Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet; name=\"".$filename."\"\r\n"; // use different content types here
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
$header .= $content."\r\n\r\n";

//ponuda
$file2 = "../cjenik/sharewood-lija-ponuda.pdf";
$file_size2 = filesize($file2);
$handle2 = fopen($file2, "r");
$content2 = fread($handle2, $file_size2);
fclose($handle2);
$content2 = chunk_split(base64_encode($content2));
$name2 = basename($file2);

$header .= "--".$uid."\r\n";
$header .= "Content-Type: application/pdf; name=\"".$filename2."\"\r\n"; // use different content types here
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"".$filename2."\"\r\n\r\n";
$header .= $content2."\r\n\r\n";
$header .= "--".$uid."--";

if (mail($mailto, $subject, "", $header)) {
    echo "mail send ... OK"; // or use booleans here
} else {
    echo "mail send ... ERROR!";
}
?> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:24:38.663

问题不是你的程序。Google 邮件不允许使用图片。我看过 3 份邮件客户端调查，大多数都不会处理雷鸟之类的图像。有些甚至不会表明有图像或显示替代标题或任何内容。

# android - 在自定义数组适配器中回收视图：它是如何处理的？

> ID：15912999
> 
> 赞同：9
> 
> 时间：2013-04-09T21:35:24.013
> 
> 标签：android, android-arrayadapter, recycle

我有一个关于在自定义数组适配器的 getView 方法中回收视图的不清楚的问题。

我知道元素被重用了，但是我怎么知道在 if 语句的第一部分中要实现什么，以及在第二部分中实现什么？

现在我有以下代码。我之所以提出这个问题，是因为在语句的第二部分中删除了代码，这导致了前 9 个元素的列表，这些元素被重复多次而不是所有元素。我真的不知道究竟是什么原因造成的......

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            title = getItem(position).getTitle();
            size = calculateFileSize(position);

            txtTitle = (TextView) row.findViewById(R.id.txtTitle);
            tvFileSize = (TextView) row.findViewById(R.id.tvFileSize);

            txtTitle.setText(title);
            tvFileSize.setText(size);

        } else {

            title = getItem(position).getTitle();
            size = calculateFileSize(position);

            txtTitle = (TextView) row.findViewById(R.id.txtTitle);
            tvFileSize = (TextView) row.findViewById(R.id.tvFileSize);

            txtTitle.setText(title);
            tvFileSize.setText(size);
        }

        return row;
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T21:41:20.103

这很简单。第一次没有创建行，所以你必须给它们充气。之后，Android 操作系统可能会决定回收您已经膨胀且不再可见的视图。这些已经膨胀并传递到 convertView 参数中，因此您所要做的就是安排它以显示新的当前项目，例如将正确的值放入各种文本字段中。

![在此处输入图像描述](https://i.stack.imgur.com/B8mjy.png)

简而言之，在第一部分中，您应该执行膨胀并填充值，在第二部分中，如果（`if convertView != null`）您应该只覆盖该字段，因为鉴于视图已被回收，文本视图包含旧项目的值。

[这篇文章](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)和[这](http://www.rogcg.com/blog/2013/03/12/recycling-views-listview)是很好的起点

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-09T21:43:07.287

> 我知道元素被重用了，但是我怎么知道在 if 语句的第一部分中要实现什么，以及在第二部分中实现什么？

一旦你掌握了它的窍门，这个组织就非常简单：

```
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        /* This is where you initialize new rows, by:
         *  - Inflating the layout,
         *  - Instantiating the ViewHolder,
         *  - And defining any characteristics that are consistent for every row */
    } else {
        /* Fetch data already in the row layout, 
         *    primarily you only use this to get a copy of the ViewHolder */
    }

    /* Set the data that changes in each row, like `title` and `size`
     *    This is where you give rows there unique values. */

    return convertView;
} 
```

有关 ListView 的 RecycleBin 的工作原理以及 ViewHolders 为何如此重要的详细说明，请观看[Turbo Charge your UI](https://dl.google.com/io/2009/pres/Th_0230_TurboChargeYourUI-HowtomakeyourAndroidUIfastandefficient.pdf)，由 Android 的主要 ListView 程序员提供的 Google I/O 演示。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T21:47:07.690

你想`ViewHolder`在你的`MainActivity`. 就像是

```
 static class ViewHolder
    {
        TextView tv1;
        TextView tv2;
    } 
```

然后在你的`getView`，你第一次`Views`从你的 xml 中获取你的`if`并在之后重用它们`else`

```
View rowView = convertView;
        if (rowView == null)
        {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            rowView = inflater.inflate(R.layout.layout_name_to_inflate, parent, false);
            holder = new ViewHolder();
            holder.tv1= (TextView) rowView.findViewById(R.id.textView1);
            holder.tv2 = (RadioGroup) rowView.findViewById(R.id.textView2);             
            rowView.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) rowView.getTag();
        } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-09T21:43:22.130

我建议您使用 View holder 和 convertview 模式来创建您的 listView，因为它会更有效。[这](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)是一个很好的解释它如何与重用策略一起工作。这将回答您关于回收如何工作的问题。如果您想参考代码示例，我在[GitHub 上](https://github.com/asabbarwal/EffecientListViewDesign)有。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T21:46:28.343

如果没有效果图，我真的无法理解问题的最后一部分，但对于第一部分“在 if 语句的第一部分中实现什么，以及在第二部分中实现什么”我想我已经找到了这个实现非常普遍。

您将首先找到视图引用并将它们存储到静态类`ViewHolder`，然后将其附加到新膨胀视图的标签上。当 listview 回收视图并`convertView`传递a 时，`getView`您可以从`convertView`'s 标记中获取 ViewHolder，因此您不必再次查找引用（这大大提高了性能）并使用给定位置的对象更新视图数据.

从技术上讲，您并不关心视图的位置，因为您关心的只是对需要更新的视图的引用，这些视图保存在它的 ViewHolder 中。

```
@Override
public View getView(int position, View convertView, ViewGroup container) {
    ViewHolder holder;
    Store store = getItem(position);
    if (convertView == null) {
        convertView = mLayoutInflater.inflate(R.layout.item_store, null);

        // create a holder to store references
        holder = new ViewHolder();

        // find references and store in holder
        ViewGroup logoPhoneLayout = (ViewGroup) convertView
                .findViewById(R.id.logophonelayout);
        ViewGroup addressLayout = (ViewGroup) convertView
                .findViewById(R.id.addresslayout);

        holder.image = (ImageView) logoPhoneLayout
                .findViewById(R.id.image1);
        holder.phone = (TextView) logoPhoneLayout
                .findViewById(R.id.textview1);
        holder.address = (TextView) addressLayout
                .findViewById(R.id.textview1);

        // store holder in views tag
        convertView.setTag(holder);
    } else {

        // Retrieve holder from view
        holder = (ViewHolder) convertView.getTag();
    }

    // fill in view with our store (at this position)
    holder.phone.setText(store.phone);
    holder.address.setText(store.getFullAddress());

    UrlImageViewHelper.setUrlDrawable(holder.image, store.storeLogoURL,
            R.drawable.no_image);

    return convertView;
}

private static class ViewHolder {
    ImageView image;
    TextView phone;
    TextView address;
} 
```