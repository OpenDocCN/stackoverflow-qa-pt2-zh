# StackOverflow 问答 13750000-13750999

# glassfish - Arquillian：添加 beans.xml 会导致“未找到 ArquillianServletRunner”

> ID：13750005
> 
> 赞同：7
> 
> 时间：2012-12-06T18:20:22.393
> 
> 标签：glassfish, integration-testing, jboss-arquillian

我正在使用 Arquillian[1] 在 Eclipse[2]-IDE 内的嵌入式 glassfish 环境中测试我的 J2EE-App。

```
package test.java;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ArchivePaths;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.jboss.shrinkwrap.api.spec.WebArchive;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(Arquillian.class)
public class ArquillianTest {

    @Deployment
    public static WebArchive createDeployment() {
        return ShrinkWrap.create(WebArchive.class).addAsWebInfResource(EmptyAsset.INSTANCE,
            ArchivePaths.create("beans.xml"));
    }

    @Test
    public void test() {
        Assert.assertNull(null);
    }
} 
```

测试执行良好，直到我添加显示的指令“.addAsWebInfResource(...)”。执行此操作时，将引发以下异常：

```
java.lang.IllegalArgumentException: ArquillianServletRunner not found. Could not determine ContextRoot from ProtocolMetadata, please contact DeployableContainer developer.
at org.jboss.arquillian.protocol.servlet.ServletUtil.determineBaseURI(ServletUtil.java:64)
at org.jboss.arquillian.protocol.servlet.ServletURIHandler.locateTestServlet(ServletURIHandler.java:60)
at org.jboss.arquillian.protocol.servlet.ServletMethodExecutor.invoke(ServletMethodExecutor.java:77)
at org.jboss.arquillian.container.test.impl.execution.RemoteTestExecuter.execute(RemoteTestExecuter.java:120)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
at org.jboss.arquillian.container.test.impl.execution.ClientTestExecuter.execute(ClientTestExecuter.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142)
at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createTestContext(ContainerEventController.java:129)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.test(EventTestRunnerAdaptor.java:111)
at org.jboss.arquillian.junit.Arquillian$6.evaluate(Arquillian.java:263)
at org.jboss.arquillian.junit.Arquillian$4.evaluate(Arquillian.java:226)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$5.evaluate(Arquillian.java:240)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:185)
at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:199)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:147)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

如果没有 beans.xml，CDI 就无法正常工作。

我怎样才能避免这个异常？

我已将我的 pom.xml 上传到[http://pastxt.com/P/7IT1VYWBUW](http://pastxt.com/P/7IT1VYWBUW)

环境：jdk1.7.0_02 / Win7 / Eclipse Juno SR1

[1] [https://www.jboss.org/arquillian.html](https://www.jboss.org/arquillian.html)

[2] [http://www.eclipse.org/](http://www.eclipse.org/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T08:38:54.117

我看过你的 POM 和你的测试。该问题似乎与[GLASSFISH-16964](http://java.net/jira/browse/GLASSFISH-16964)相关，通过以下日志条目进行：

```
SLF4J: The requested version 1.5.10 by your slf4j binding is not compatible with [1.6]
SLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details.
Dec 07, 2012 2:09:59 PM org.glassfish.api.ActionReport failure
SEVERE: Exception while loading the app
Dec 07, 2012 2:09:59 PM org.glassfish.deployment.admin.DeployCommand execute
SEVERE: Exception while loading the app : org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;Ljava/lang/Throwable;)V 
```

您的项目中有一些依赖项会引入 v1.6.1 的`slf4j-api`. 这似乎与嵌入式 GlassFish 的要求相冲突——我相信它是`1.5.10`通过嵌入式 GlassFish 的日志进行的。

要解决此特定问题，请降级到让 GlassFish 满意的版本。我将较低版本添加为托管依赖项。

```
<dependencyManagement>
    <dependencies>
      ....
      <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-api</artifactId>
          <version>1.5.10</version>
          <scope>test</scope>
      </dependency>
    </dependencies>
</dependencies> 
```

当然，这可能会对依赖于较新版本 slf4-api 的其他库产生影响，因此您必须注意其他问题。

解决此问题的最佳方法是使用远程或托管 GlassFish Arquillian 适配器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-07T01:00:26.880

`ArquillianServletRunner not found. Could not determine ContextRoot from ProtocolMetadata, please contact DeployableContainer developer.`似乎表明在部署过程中发生了错误。该消息 - 你可以思考和表达你想要什么 - 与那个错误无关（来源：[https](https://developer.jboss.org/thread/173340) ://developer.jboss.org/thread/173340 ）！您需要访问日志以找出问题是在控制台上还是在系统属性中指定的文件中配置的位置`java.util.logging.config.file`，例如添加

```
handlers=java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter
java.util.logging.SimpleFormatter.format=%4$s: %5$s%n
java.util.logging.ConsoleHandler.level=FINEST 
```

就我而言，它丢失了`com.google.guava:guava:23.0:test`，并且该问题与添加`beans.xml`Shrinkwrap无关`Asset.EMPTY`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-12T13:53:04.187

将以下内容添加到 web.xml 对我有用：

```
<servlet>
    <servlet-name>ArquillianServletRunner</servlet-name>
    <servlet-class>org.jboss.arquillian.protocol.servlet.runner.ServletTestRunner</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ArquillianServletRunner</servlet-name>
    <url-pattern>/ArquillianServletRunner</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T15:40:20.700

Glassfish 嵌入式 3.1.2 也有同样的问题。但它似乎已在 3.1.2.2 中修复。

```
<dependency>
    <groupId>org.glassfish.main.extras</groupId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1.2.2</version>
    <scope>provided</scope>
</dependency> 
```

# sharepoint - SSRS 订阅 sharepoint 的所有权问题

> ID：13750006
> 
> 赞同：0
> 
> 时间：2012-12-06T18:20:26.107
> 
> 标签：sharepoint, reporting-services, sharepoint-2007

## 使用的程序

*   SSRS 2008 R2
*   共享点 2007

所以这是我和我的同事面临的问题。我们订阅了一份前往 Sharepoint 库的报告。我们目前使用“Windows 文件共享”作为交付方式，因为我们没有其他可用选项。

我们发现该文件已成功推送，但并未“签入”，因此库中的所有人都可以查看它。

除非按照此处的建议进行操作：[Sharepoint 集成模式中](http://blog.cloudshare.com/2012/06/01/how-to-setup-ssrs-in-sharepoint-integrated-mode/) 的SSRS 突然出现的一个想法是将订阅订阅到 SSRS 服务器上的共享，然后通过批处理文件推送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:54:34.607

假设您有权自定义 SharePoint 系统，最简单的方法可能是在文档库[的 ItemAdded 事件上添加一个事件接收器。](http://karinebosch.wordpress.com/walkthroughs/event-receivers-walkthrough2/)每当将文档添加到库中时，都会触发。在事件接收器中检查项目是否由您的 Reporting Services 系统使用的帐户添加并签入（因为您不想在添加每个人的文档时自动签入，只签入报告）。

或者，您可以使用[工作流](http://office.microsoft.com/en-us/sharepoint-server-help/introduction-to-workflows-HA010154424.aspx)来做同样的事情。

# asp.net - 按钮单击事件触发 DropDownList_SelectedIndexChanged 事件，但我不想要它

> ID：13750007
> 
> 赞同：0
> 
> 时间：2012-12-06T18:20:29.077
> 
> 标签：asp.net

我有两个下拉列表（`ddl1`和`ddl2`）和一个按钮。我选择一个`ddl1`触发`ddl1_selectedIndexChanged`事件的值。发生这种情况时，选择的值`ddl1`会在 SELECT 语句中进入数据库，其中 WHERE 子句用于获取所需数据的行。现在填充这个新的数据表`ddl2`。从 中选择一个值后`dd12`，我按下一个按钮。当按下按钮时，我想`ddl2_selected_value`在`button_click`事件中使用。问题是当我按下按钮时，`ddl1_selectedIndexChanged`事件意外触发并`ddl2`再次绑定，丢失`ddl2_selectedValue`.

```
ddl1 - EnableViewState True, PostBack = True

ddl2 - EnableViewState True, PostBack = False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:28:34.590

Do you have anything on Page Load that is populating the ddl1.

In that case you need to check for PostBack in the page load.

```
if(!Page.IsPostBack)
{
//Call method to populate ddl1.
//ddl1 will load only once.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:46:31.210

我通过网上浏览了更多博客解决了这个问题。我所做的是我在 asp Panel 中编写了这些整套控件。此面板的 viewState 属性设置为 False。一旦我将其更改为 true，不需要的 selectedindexchanged 事件就会被抑制。

这让我通过了。:)

但是，这是一种预感。我还没有得到发生这种情况的原因？

解释是最受欢迎的。

@Arun：感谢您的关注。

# python - 从配置文件中读取布尔条件？

> ID：13750008
> 
> 赞同：3
> 
> 时间：2012-12-06T18:20:31.087
> 
> 标签：python, json, parsing, configuration, config

`ConfigParser`使用and从 Python 中的配置文件中读取条件的最佳方法是什么`json`？我想阅读类似的内容：

```
[mysettings]
x >= 10
y < 5 
```

然后将其应用于定义变量的代码，`x`条件`y`将应用于`x, y`代码中的值。就像是：

```
l = get_lambda(settings["mysettings"][0])
if l(x):
  # do something
  pass
l2 = get_lambda(settings["mysettings"][1])
if l2(y):
  # do something
  pass 
```

理想情况下，我也想指定条件`x + y >= 6`。

必须有更好的方法，但想法是使用配置文件中的简单布尔表达式来约束变量的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T18:48:06.753

这是一个使用 Python 本身作为描述配置文件的语言的示例：

**配置文件**

```
mysettings = [
    lambda x: x >= 10,
    lambda y: y < 5,
] 
```

**主文件**

```
from config import mysettings

a = 42
b = 300

for i, condition in enumerate(mysettings):
    for value in (a, b):
        result = condition(value)
        print "condition %s for value %s is: %s" % (i, value, result) 
```

**输出：**

```
condition 0 for value 42 is: True
condition 0 for value 300 is: True
condition 1 for value 42 is: False
condition 1 for value 300 is: False 
```

这当然假设配置文件被认为是**受信任**的输入，因为这样做`condition(value)`您将执行配置文件中定义的任何功能。

但无论您使用什么语言，我都没有看到任何解决方法：条件是[表达式](http://docs.python.org/2/reference/expressions.html)，因此是*可执行代码*。如果您想最终得到一个可以在代码中使用的 Python 表达式，那么迟早您必须评估该表达式。

**编辑：**

如果由于某种原因你真的不能使用 Python，那么你可以使用 JSON 中的配置文件来做到这一点：

**配置文件**

```
{
  "mysettings": {
    "color": "Blue",
    "expressions": [
      "x >= 10",
      "y < 5"
    ]
  },
  "other_settings": {
    "color": "red"
  }
} 
```

**主文件**

```
import json

x = 42
y = 300

def eval_expr(expr, values):
    result = eval(expr, values.copy())
    print "The expression '%s' evaluates to '%s' for the values %r" % (
                                                    expr, result, values)
    return result

f = open('config.json')
data = json.loads(f.read())
settings = data["mysettings"]

for expr in settings['expressions']:
    values = dict(x=x, y=y)
    eval_expr(expr, values) 
```

结果：

```
The expression 'x >= 10' evaluates to 'True' for the values {'y': 300, 'x': 42}
The expression 'y < 5' evaluates to 'False' for the values {'y': 300, 'x': 42} 
```

或者，更接近您的示例：

```
x = 1
y = 2
values = dict(x=x, y=y)

e1 = settings['expressions'][0]
if eval_expr(e1, values):
    # do something
    pass

e2 = settings['expressions'][1]
if eval_expr(e2, values):
    # do something else
    pass 
```

结果：

```
The expression 'x >= 10' evaluates to 'False' for the values {'y': 2, 'x': 1}
The expression 'y < 5' evaluates to 'True' for the values {'y': 2, 'x': 1} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T20:10:18.050

我认为您不想或不需要同时使用`configparser` *and* `json`，因为两者本身就足够了。以下是如何处理每一个：

假设您有一个来自*受信任*来源的配置文件，其中包含以下内容：

**`myconfig.ini`**

```
[mysettings]
other=stuff
conds=
    x >= 10
    y < 5
    x + y >= 6 
```

它可以像这样解析和使用：

```
from __future__ import print_function
try:
    import configparser
except ImportError:  # Python 2
    import ConfigParser as configparser

get_lambda = lambda expr: lambda **kwargs: bool(eval(expr, kwargs))

cp = configparser.ConfigParser()
cp.read('myconfig.ini')

exprs = cp.get('mysettings', 'conds').strip()
conds = [expr for expr in exprs.split('\n')]

l = get_lambda(conds[0])
l2 = get_lambda(conds[1])
l3 = get_lambda(conds[2])

def formatted(l, c, **d):
    return '{:^14} : {:>10} -> {}'.format(
        ', '.join('{} = {}'.format(var, val) for var, val in sorted(d.items())), c, l(**d))

l = get_lambda(conds[0])
print('l(x=42): {}'.format(l(x=42)))
print()
print(formatted(l, conds[0], x=42))
print(formatted(l2, conds[1], y=6))
print(formatted(l3, conds[2], x=3, y=4)) 
```

这将导致以下输出：

```
l(x=42): True

    x = 42     :    x >= 10 -> True
    y = 6      :      y < 5 -> False
 x = 3, y = 4  : x + y >= 6 -> True 
```

如果信息改为保存在类似于以下内容的 JSON 格式文件中：

**`myconfig.json`**

```
{
    "mysettings": {
        "other": "stuff",
        "conds": [
          "x >= 10",
          "y < 5",
          "x + y >= 6"
        ]
    }
} 
```

它可以很容易地用`json`模块解析并以类似的方式使用：

```
import json

with open('myconfig.json') as file:
    settings = json.loads(file.read())

conds = settings['mysettings']['conds'] 
```

...其余的将是相同的并产生相同的结果。IE：

```
l = get_lambda(conds[0])
print('l(x=42): {}'.format(l(x=42)))
print()
print(formatted(l, conds[0], x=42))
print(formatted(l2, conds[1], y=6))
print(formatted(l3, conds[2], x=3, y=4)) 
```

# ruby-on-rails - ActiveRecord 模型的保留名称

> ID：13750009
> 
> 赞同：59
> 
> 时间：2012-12-06T18:20:39.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, active-record-query

我非常重视命名，所以我非常努力地为我的 ActiveRecord 模型命名。但是，我经常想出一个名称，它与数据库或 Ruby 或 Rails 中的保留名称有一些冲突。模型或字段名称，如`set`or `group`。有时问题也不会立即显现出来。是否有一个我们不能在模型名称中使用的名称列表和一个字段名称列表？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-06T19:29:56.197

**保留字表**

```
ADDITIONAL_LOAD_PATHS
ARGF
ARGV
ActionController
ActionView
ActiveRecord
ArgumentError
Array
BasicSocket
Benchmark
Bignum
Binding
CGI
CGIMethods
CROSS_COMPILING
Class
ClassInheritableAttributes
Comparable
ConditionVariable
Config
Continuation
DRb
DRbIdConv
DRbObject
DRbUndumped
Data
Date
DateTime
Delegater
Delegator
Digest
Dir
ENV
EOFError
ERB
Enumerable
Errno
Exception
FALSE
FalseClass
Fcntl
File
FileList
FileTask
FileTest
FileUtils
Fixnum
Float
FloatDomainError
GC
Gem
GetoptLong
Hash
IO
IOError
IPSocket
IPsocket
IndexError
Inflector
Integer
Interrupt
Kernel
LN_SUPPORTED
LoadError
LocalJumpError
Logger
Marshal
MatchData
MatchingData
Math
Method
Module
Mutex
Mysql
MysqlError
MysqlField
MysqlRes
NIL
NameError
NilClass
NoMemoryError
NoMethodError
NoWrite
NotImplementedError
Numeric
OPT_TABLE
Object
ObjectSpace
Observable
Observer
PGError
PGconn
PGlarge
PGresult
PLATFORM
PStore
ParseDate
Precision
Proc
Process
Queue
RAKEVERSION
RELEASE_DATE
RUBY
RUBY_PLATFORM
RUBY_RELEASE_DATE
RUBY_VERSION
Rack
Rake
RakeApp
RakeFileUtils
Range
RangeError
Rational
Regexp
RegexpError
Request
RuntimeError
STDERR
STDIN
STDOUT
ScanError
ScriptError
SecurityError
Signal
SignalException
SimpleDelegater
SimpleDelegator
Singleton
SizedQueue
Socket
SocketError
StandardError
String
StringScanner
Struct
Symbol
SyntaxError
SystemCallError
SystemExit
SystemStackError
TCPServer
TCPSocket
TCPserver
TCPsocket
TOPLEVEL_BINDING
TRUE
Task
Text
Thread
ThreadError
ThreadGroup
Time
Transaction
TrueClass
TypeError
UDPSocket
UDPsocket
UNIXServer
UNIXSocket
UNIXserver
UNIXsocket
UnboundMethod
Url
VERSION
Verbose
YAML
ZeroDivisionError
@base_path
accept
Acces
Axi
action
attributes
application2
callback
category
connection
database
dispatcher
display1
drive
errors
format
host
key
layout
load
link
new
notify
open
public
quote
render
request
records
responses
save
scope
send
session
system
template
test
timeout
to_s
type
URI
visits
Observer 
```

**数据库字段名称**

```
created_at
created_on
updated_at
updated_on
deleted_at
(paranoia
gem)
lock_version
type
id
#{table_name}_count
position
parent_id
lft
rgt
quote_value 
```

**红宝石保留字**

```
alias
and
BEGIN
begin
break
case
class
def
defined?
do
else
elsif
END
end
ensure
false
for
if
module
next
nil
not
or
redo
rescue
retry
return
self
super
then
true
undef
unless
until
when
while
yield
_ FILE _
_ LINE _ 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-24T13:55:27.370

列名`type`也是保留的，不会显示在`MyModel.methods`!

`The single-table inheritance mechanism failed to locate the subclass: 'f'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Project.inheritance_column to use another column for that information.`

有没有人使用过类似`category`, `class`, `transaction`,`group`等名称的经验？当我在我的数据库中对数据进行分类时，所有这些都会浮现在脑海中......

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-04-10T16:11:48.840

以下是*Rails 5.1.5*的列表：

```
!
!=
!~
<=>
==
===
=~
[]
[]=
__binding__
__callbacks
__callbacks?
__id__
__send__
_before_commit_callbacks
_before_commit_without_transaction_enrollment_callbacks
_commit_callbacks
_commit_without_transaction_enrollment_callbacks
_create_callbacks
_destroy
_destroy_callbacks
_find_callbacks
_initialize_callbacks
_read_attribute
_reflections
_reflections?
_rollback_callbacks
_rollback_without_transaction_enrollment_callbacks
_run_before_commit_callbacks
_run_before_commit_without_transaction_enrollment_callbacks
_run_commit_callbacks
_run_commit_without_transaction_enrollment_callbacks
_run_create_callbacks
_run_destroy_callbacks
_run_find_callbacks
_run_initialize_callbacks
_run_rollback_callbacks
_run_rollback_without_transaction_enrollment_callbacks
_run_save_callbacks
_run_touch_callbacks
_run_update_callbacks
_run_validate_callbacks
_run_validation_callbacks
_save_callbacks
_touch_callbacks
_update_callbacks
_validate_callbacks
_validation_callbacks
_validators
_validators?
`
accessed_fields
acts_like?
add_to_transaction
aggregate_reflections
aggregate_reflections?
as_json
assign_attributes
association
association_cached?
attribute_aliases
attribute_aliases?
attribute_before_last_save
attribute_change
attribute_change_to_be_saved
attribute_changed?
attribute_changed_in_place?
attribute_for_inspect
attribute_in_database
attribute_method_matchers
attribute_method_matchers?
attribute_missing
attribute_names
attribute_present?
attribute_previously_changed?
attribute_was
attributes
attributes=
attributes_before_type_cast
attributes_changed_by_setter
attributes_in_database
becomes
becomes!
before_committed!
blank?
byebug
cache_key
cache_timestamp_format
cache_timestamp_format?
changed
changed?
changed_attribute_names_to_save
changed_attributes
changed_for_autosave?
changes
changes_applied
changes_internally_applied
changes_to_save
class
class_eval
clear_attribute_changes
clear_changes_information
clone
column_for_attribute
committed!
connection_handler
debugger
decrement
decrement!
deep_dup
default_connection_handler
default_connection_handler?
default_scope_override
default_scopes
default_timezone
define_singleton_method
defined_enums
defined_enums?
delete
destroy
destroy!
destroyed?
destroyed_by_association
destroyed_by_association=
display
dump_schema_after_migration
dump_schemas
dup
duplicable?
encode_with
enum_for
eql?
equal?
error_on_ignored_order
error_on_ignored_order_or_limit
errors
extend
freeze
from_json
frozen?
gem
has_attribute?
has_changes_to_save?
hash
html_safe?
id
id=
id?
id_before_type_cast
id_in_database
id_was
in?
include_root_in_json
include_root_in_json?
increment
increment!
index_nested_attribute_errors
init_with
initialize_internals_callback
inspect
instance_eval
instance_exec
instance_of?
instance_values
instance_variable_defined?
instance_variable_get
instance_variable_names
instance_variable_set
instance_variables
invalid?
is_a?
itself
kind_of?
load_dependency
lock!
lock_optimistically
lock_optimistically?
locking_enabled?
logger
mark_for_destruction
marked_for_destruction?
method
method_missing
methods
model_name
nested_attributes_options
nested_attributes_options?
new_record?
nil?
no_touching?
object_id
partial_writes
partial_writes?
persisted?
pluralize_table_names
pluralize_table_names?
populate_with_current_scope_attributes
presence
presence_in
present?
pretty_inspect
pretty_print
pretty_print_cycle
pretty_print_inspect
pretty_print_instance_variables
previous_changes
primary_key_prefix_type
private_methods
protected_methods
pry
public_method
public_methods
public_send
query_attribute
quoted_id
raw_write_attribute
read_attribute
read_attribute_before_type_cast
read_attribute_for_serialization
read_attribute_for_validation
readonly!
readonly?
record_timestamps
record_timestamps=
record_timestamps?
reload
remote_byebug
remove_instance_variable
require_dependency
require_or_load
respond_to?
respond_to_without_attributes?
restore_attributes
rollback_active_record_state!
rolledback!
run_callbacks
save
save!
saved_change_to_attribute
saved_change_to_attribute?
saved_changes
saved_changes?
schema_format
send
serializable_hash
singleton_class
singleton_method
singleton_methods
skip_time_zone_conversion_for_attributes
skip_time_zone_conversion_for_attributes?
slice
store_full_sti_class
store_full_sti_class?
suppress_warnings
table_name_prefix
table_name_prefix?
table_name_suffix
table_name_suffix?
taint
tainted?
tap
time_zone_aware_attributes
time_zone_aware_types
time_zone_aware_types?
timestamped_migrations
to_enum
to_gid
to_gid_param
to_global_id
to_json
to_key
to_model
to_param
to_partial_path
to_query
to_s
to_sgid
to_sgid_param
to_signed_global_id
to_yaml
toggle
toggle!
touch
touch_later
transaction
trust
try
try!
type_for_attribute
unloadable
untaint
untrust
untrusted?
update
update!
update_attribute
update_attributes
update_attributes!
update_column
update_columns
valid?
validate
validate!
validates_absence_of
validates_acceptance_of
validates_confirmation_of
validates_exclusion_of
validates_format_of
validates_inclusion_of
validates_length_of
validates_numericality_of
validates_presence_of
validates_size_of
validates_with
validation_context
warn_on_records_fetched_greater_than
will_save_change_to_attribute?
with_lock
with_options
with_transaction_returning_status
write_attribute
yield_self 
```

你可以得到它

```
ActiveRecord::Base.instance_methods.sort 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-09T11:54:01.063

**打开一个 Rails 控制台**和一个**MyModel.methods类型**

列出的所有方法都是保留字。

# java - 泽西岛客户端：如何添加列表作为查询参数

> ID：13750010
> 
> 赞同：93
> 
> 时间：2012-12-06T18:20:39.103
> 
> 标签：java, rest, jersey

我正在为具有 List 作为查询参数的 GET 服务创建 Jersey 客户端。根据[文档](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e247)，可以将 List 作为查询参数（此信息也在[@QueryParam](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/QueryParam.html) javadoc 中），请查看：

> 通常，方法参数的 Java 类型可能：
> 
> 1.  是原始类型；
> 2.  有一个接受单个 String 参数的构造函数；
> 3.  有一个名为 valueOf 或 fromString 的静态方法，它接受单个 String 参数（例如，参见 Integer.valueOf(String) 和 java.util.UUID.fromString(String)）；或者
> 4.  是 List、Set 或 SortedSet，其中 T 满足上述 2 或 3。生成的集合是只读的。
> 
> 有时参数可能包含多个相同名称的值。如果是这种情况，则可以使用 4) 中的类型来获取所有值。

但是，我不知道如何使用 Jersey 客户端添加 List 查询参数。

我了解替代解决方案是：

1.  使用 POST 而不是 GET；
2.  将 List 转换为 JSON 字符串并将其传递给服务。

第一个不好，因为服务的正确 HTTP 动词是 GET。这是一个数据检索操作。

如果你不能帮助我，第二个将是我的选择。:)

我也在开发服务，所以我可以根据需要进行更改。

谢谢！

**更新**

客户端代码（使用 json）

```
Client client = Client.create();

WebResource webResource = client.resource(uri.toString());

SearchWrapper sw = new SearchWrapper(termo, pagina, ordenacao, hits, SEARCH_VIEW, navegadores);

MultivaluedMap<String, String> params = new MultivaluedMapImpl();
params.add("user", user.toUpperCase()); 
params.add("searchWrapperAsJSON", (new Gson()).toJson(sw));

ClientResponse clientResponse = webResource .path("/listar")
                                            .queryParams(params)
                                            .header(HttpHeaders.AUTHORIZATION, AuthenticationHelper.getBasicAuthHeader())
                                            .get(ClientResponse.class);

SearchResultWrapper busca = clientResponse.getEntity(new GenericType<SearchResultWrapper>() {}); 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-08-15T01:17:01.710

`@GET`确实支持字符串列表

**设置**：
Java：1.7
泽西版本：1.9

**资源**

```
@Path("/v1/test") 
```

**子资源**：

```
// receive List of Strings
@GET
@Path("/receiveListOfStrings")
public Response receiveListOfStrings(@QueryParam("list") final List<String> list){
    log.info("receieved list of size="+list.size());
    return Response.ok().build();
} 
```

**泽西岛测试用例**

```
@Test
public void testReceiveListOfStrings() throws Exception {
    WebResource webResource = resource();
    ClientResponse responseMsg = webResource.path("/v1/test/receiveListOfStrings")
            .queryParam("list", "one")
            .queryParam("list", "two")
            .queryParam("list", "three")
            .get(ClientResponse.class);
    Assert.assertEquals(200, responseMsg.getStatus());
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-06T18:28:20.260

如果您发送的不是简单字符串，我建议您使用带有适当请求正文的 POST，或者将整个列表作为适当编码的 JSON 字符串传递。但是，对于简单的字符串，您只需将每个值适当地附加到请求 URL，Jersey 就会为您反序列化它。因此，给定以下示例端点：

```
@Path("/service/echo") public class MyServiceImpl {
    public MyServiceImpl() {
        super();
    }

    @GET
    @Path("/withlist")
    @Produces(MediaType.TEXT_PLAIN)
    public Response echoInputList(@QueryParam("list") final List<String> inputList) {
        return Response.ok(inputList).build();
    }
} 
```

您的客户将发送对应于以下内容的请求：

> 获取[http://example.com/services/echo?list=Hello&list=Stay&list=Goodbye](http://example.com/services/echo?list=Hello&list=Stay&list=Goodbye)

这将导致`inputList`被反序列化以包含值“Hello”、“Stay”和“Goodbye”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-08T05:05:20.653

我同意你上面提到的替代解决方案

```
1\. Use POST instead of GET;
2\. Transform the List into a JSON string and pass it to the service. 
```

`List`并且由于`MultiValuedMap`其 impl 类`MultivaluedMapImpl`具有接受字符串键和字符串值的能力，因此您无法添加它。如下图所示

![在此处输入图像描述](../Images/813042dea078383782a32d3f27618c27.png)

您仍然想做这些事情而不是尝试以下代码。

**控制器类**

```
package net.yogesh.test;

import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;

import com.google.gson.Gson;

@Path("test")
public class TestController {
       @Path("testMethod")
       @GET
       @Produces("application/text")
       public String save(
               @QueryParam("list") List<String> list) {

           return  new Gson().toJson(list) ;
       }
} 
```

**客户端类**

```
package net.yogesh.test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.ws.rs.core.MultivaluedMap;

import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;
import com.sun.jersey.core.util.MultivaluedMapImpl;

public class Client {
    public static void main(String[] args) {
        String op = doGet("http://localhost:8080/JerseyTest/rest/test/testMethod");
        System.out.println(op);
    }

    private static String doGet(String url){
        List<String> list = new ArrayList<String>();
        list = Arrays.asList(new String[]{"string1,string2,string3"});

        MultivaluedMap<String, String> params = new MultivaluedMapImpl();
        String lst = (list.toString()).substring(1, list.toString().length()-1);
        params.add("list", lst);

        ClientConfig config = new DefaultClientConfig();
        com.sun.jersey.api.client.Client client = com.sun.jersey.api.client.Client.create(config);
        WebResource resource = client.resource(url);

        ClientResponse response = resource.queryParams(params).type("application/x-www-form-urlencoded").get(ClientResponse.class);
        String en = response.getEntity(String.class);
        return en;
    }
} 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-24T12:26:12.363

使用 JSON 查询参数获取请求

```
package com.rest.jersey.jerseyclient;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;

public class JerseyClientGET {

    public static void main(String[] args) {
        try {               

            String BASE_URI="http://vaquarkhan.net:8080/khanWeb";               
            Client client = Client.create();    
            WebResource webResource = client.resource(BASE_URI);

            ClientResponse response = webResource.accept("application/json").get(ClientResponse.class);

            /*if (response.getStatus() != 200) {
               throw new RuntimeException("Failed : HTTP error code : "
                + response.getStatus());
            }
*/
            String output = webResource.path("/msg/sms").queryParam("search","{\"name\":\"vaquar\",\"surname\":\"khan\",\"ext\":\"2020\",\"age\":\"34\""}").get(String.class);
            //String output = response.getEntity(String.class);

            System.out.println("Output from Server .... \n");
            System.out.println(output);                         

        } catch (Exception e) {

            e.printStackTrace();    
        }    
    }    
} 
```

发布请求：

```
package com.rest.jersey.jerseyclient;

import com.rest.jersey.dto.KhanDTOInput;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;
import com.sun.jersey.api.json.JSONConfiguration;

public class JerseyClientPOST {

    public static void main(String[] args) {
        try {

            KhanDTOInput khanDTOInput = new KhanDTOInput("vaquar", "khan", "20", "E", null, "2222", "8308511500");                      

            ClientConfig clientConfig = new DefaultClientConfig();

            clientConfig.getFeatures().put( JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);

            Client client = Client.create(clientConfig);

               // final HTTPBasicAuthFilter authFilter = new HTTPBasicAuthFilter(username, password);
               // client.addFilter(authFilter);
               // client.addFilter(new LoggingFilter());

            //
            WebResource webResource = client
                    .resource("http://vaquarkhan.net:12221/khanWeb/messages/sms/api/v1/userapi");

              ClientResponse response = webResource.accept("application/json")
                .type("application/json").put(ClientResponse.class, khanDTOInput);

            if (response.getStatus() != 200) {
                throw new RuntimeException("Failed : HTTP error code :" + response.getStatus());
            }

            String output = response.getEntity(String.class);

            System.out.println("Server response .... \n");
            System.out.println(output);

        } catch (Exception e) {

            e.printStackTrace();

        }    
    }    
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-18T21:18:32.757

可以使用 queryParam 方法，将参数名称和一组值传递给它：

```
 public WebTarget queryParam(String name, Object... values); 
```

示例（泽西客户端 2.23.2）：

```
 WebTarget target = ClientBuilder.newClient().target(URI.create("http://localhost"));
    target.path("path")
            .queryParam("param_name", Arrays.asList("paramVal1", "paramVal2").toArray())
            .request().get(); 
```

这将向以下 URL 发出请求：

```
 http://localhost/path?param_name=paramVal1&param_name=paramVal2 
```

# javascript - jQuery ajax jsonp 调用总是得到意外的令牌错误

> ID：13750012
> 
> 赞同：2
> 
> 时间：2012-12-06T18:20:46.983
> 
> 标签：javascript, jquery, html, ajax, jsonp

我一直在为我认为如此简单的事情浪费大量时间，但是没有很好的例子来说明 ajax 调用是如何以及做什么的。

这是我的 JavaScript 代码：

```
$.ajax({
type: 'GET',
url: 'https://maps.googleapis.com/maps/api/timezone/json',
dataType: 'jsonp',
data: {
    location: myLoc,
    timestamp: myTime,
    sensor: true
},
success: function(){alert('OK');},
error: function(){alert('FAIL');}
})
} 
```

变量“myLoc”和“myTime”不是问题。事实上，如果我将 URI 剪切并粘贴到浏览器中，它就可以正常工作并显示数据：[https ://maps.googleapis.com/maps/api/timezone/json?callback=jQuery18307430207263678312_1354817349576&location=36.7468422%2C-119.7725868×tamp= 1354817353&传感器=真&_=1354817353398](https://maps.googleapis.com/maps/api/timezone/json?callback=jQuery18307430207263678312_1354817349576&location=36.7468422%2C-119.7725868&timestamp=1354817353&sensor=true&_=1354817353398)

从我一直在阅读的内容来看，“回调”参数是自动生成的，并且代码应该足够聪明，可以调用成功函数或错误函数。

chrome返回的错误是“未捕获的语法错误意外令牌'：'”无论我尝试什么，javascript代码总是调用错误函数。我添加了一个 jsonpCallback 参数（不起作用），json 参数（不起作用），将 dataType 更改为“json”（由于跨域错误而不起作用）。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:48:13.273

```
$.ajax({
    type: 'GET',
    url: 'https://maps.googleapis.com/maps/api/timezone/json',
    dataType: 'jsonp',
    contentType: 'application/json; charset=utf-8',
    data: JSON.Stringify({
        location: myLoc,
        timestamp: myTime,
        sensor: true
    }),
    success: function(){alert('OK');},
    error: function(){alert('FAIL');}
}); 
```

# objective-c - iOS - 双击 uibutton

> ID：13750014
> 
> 赞同：18
> 
> 时间：2012-12-06T18:20:57.347
> 
> 标签：objective-c, ios, xcode, button, gesture

我有一个按钮，我正在测试它的点击，点击一下它会改变背景颜色，点击两下另一种颜色，再点击三下另一种颜色。代码是：

```
- (IBAction) button 
{
    UITapGestureRecognizer *tapOnce = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapOnce:)];
    UITapGestureRecognizer *tapTwice = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapTwice:)];
    UITapGestureRecognizer *tapTrice = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapTrice:)];

    tapOnce.numberOfTapsRequired  = 1;
    tapTwice.numberOfTapsRequired = 2;
    tapTrice.numberOfTapsRequired = 3;

    //stops tapOnce from overriding tapTwice
    [tapOnce requireGestureRecognizerToFail:tapTwice];
    [tapTwice requireGestureRecognizerToFail:tapTrice];

    //then need to add the gesture recogniser to a view - this will be the view that recognises the gesture
    [self.view addGestureRecognizer:tapOnce];
    [self.view addGestureRecognizer:tapTwice];
    [self.view addGestureRecognizer:tapTrice];
}

- (void)tapOnce:(UIGestureRecognizer *)gesture
{ 
    self.view.backgroundColor = [UIColor redColor]; 
}

- (void)tapTwice:(UIGestureRecognizer *)gesture
{
    self.view.backgroundColor = [UIColor blackColor];
}

- (void)tapTrice:(UIGestureRecognizer *)gesture
{
    self.view.backgroundColor = [UIColor yellowColor]; 
} 
```

问题是第一个水龙头不起作用，另一个是。如果我在没有按钮的情况下使用此代码，它会完美运行。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-06T18:27:33.363

如果您希望在点击按钮时改变颜色，您应该在`viewDidLoad`方法中的按钮上添加这些手势，而不是在相同的按钮操作上。上面的代码将重复添加点击按钮的手势到`self.view`而不是`button`。

```
- (void)viewDidLoad {
      [super viewDidLoad];
      UITapGestureRecognizer *tapOnce = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapOnce:)];
      UITapGestureRecognizer *tapTwice = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapTwice:)];
      UITapGestureRecognizer *tapTrice = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapTrice:)];

      tapOnce.numberOfTapsRequired = 1;
      tapTwice.numberOfTapsRequired = 2;
      tapTrice.numberOfTapsRequired = 3;
      //stops tapOnce from overriding tapTwice
      [tapOnce requireGestureRecognizerToFail:tapTwice];
      [tapTwice requireGestureRecognizerToFail:tapTrice];

      //then need to add the gesture recogniser to a view - this will be the view that recognises the gesture
      [self.button addGestureRecognizer:tapOnce]; //remove the other button action which calls method `button`
      [self.button addGestureRecognizer:tapTwice];
      [self.button addGestureRecognizer:tapTrice];
} 
```

# vb.net - 如何上传 Log.txt 文件

> ID：13750016
> 
> 赞同：0
> 
> 时间：2012-12-06T18:21:30.543
> 
> 标签：vb.net, file-upload, upload, ftp

我正在搜索一项免费服务，该服务允许用户以编程方式在该帐户中上传文件。实际上，我想上传一个 log.txt 文件，其中包含在客户端计算机上运行的应用程序中出现的错误字符串。我知道我们可以使用电子邮件服务发送日志或字符串，但我不想使用电子邮件，我正在搜索 FTP 或 HTTP 上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:43:55.627

Microsoft [Windows 错误报告](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487440.aspx)

[http://msdn.microsoft.com/en-us/library/windows/hardware/gg487440.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487440.aspx)

# binding - UserControl Dependencyproperty 未通过绑定更新

> ID：13750017
> 
> 赞同：0
> 
> 时间：2012-12-06T18:21:37.170
> 
> 标签：binding, user-controls, windows-8, mvvm-light, dependency-properties

我正在创建一个 Windows 8 应用程序，过去几天我一直在努力使用自定义用户控件。我真的不知道出了什么问题。

奇怪的是，当我在代码中更改 Source 时，dependencyproperty 调用 propertychanged 事件，但绑定没有更新。

所以这是我的代码：

游戏页面.xaml.cs

```
public sealed partial class GamePage
    {
        GamePageViewModel viewModel;

        public GamePage()
        {
            this.InitializeComponent();
            viewModel = new GamePageViewModel();
        }
    } 
```

游戏页面.xaml

```
<common:LayoutAwarePage x:Class="WordSearcher.GamePage"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                        xmlns:common="using:WordSearcher.Common"
                        xmlns:controls="using:WordSearcher.Controls"
                        xmlns:ignore="http://www.ignore.com"
                        mc:Ignorable="d ignore"
                        d:DesignHeight="768"
                        d:DesignWidth="1366"
                        DataContext="{Binding GamePageViewModel, Source={StaticResource Locator}}">
<StackPanel Orientation="Horizontal">
        <StackPanel.Background>
            <ImageBrush ImageSource="Assets/Wood.jpg" Stretch="UniformToFill"/>
        </StackPanel.Background>
<controls:PuzzleControl Source="{Binding Path=PuzzleData}"/>

    </StackPanel>
</common:LayoutAwarePage> 
```

游戏页面视图模型.cs

```
public class GamePageViewModel : ViewModelBase
    {
        private List<string> _puzzleData;

        public List<string> PuzzleData
        {
            get
            {
                return _puzzleData;
            }
            set
            {
                this._puzzleData = value;
                RaisePropertyChanged("PuzzleData");
            }
        }

        public GamePageViewModel()
        {
            SetNewData();
        }

        private async void SetNewData()
        {
            await SomeManager.Prepare();
            PuzzleData = SomeManager.Create(20);
        }
    } 
```

PuzzleControl.xaml.cs

```
<UserControl
    x:Class="WordSearcher.Controls.PuzzleControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WordSearcher.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="500"
    d:DesignWidth="500">

    <Grid x:Name="puzzleGrid" 
          Width="500" 
          Height="500"
          >

    </Grid>
</UserControl> 
```

PuzzleControl.xaml.cs

```
public sealed partial class PuzzleControl : UserControl
    {

        public static readonly DependencyProperty SourceProperty =
            DependencyProperty.Register("Source", typeof(ObservableCollection<string>), typeof(PuzzleControl), new PropertyMetadata(null, PropertyChanged));

        private static void PropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            //
            // not called from binding
            //
            ((PuzzleControl)d).OnItemsSourcePropertyChanged(e);
        }

        private void OnItemsSourcePropertyChanged(DependencyPropertyChangedEventArgs e)
        {
            Source = (ObservableCollection<string>)e.NewValue;
            SetGridData();
        }

        public ObservableCollection<string> Source
        {
            get
            {
                return (ObservableCollection<string>)GetValue(SourceProperty);
            }
            set
            {
                SetValue(SourceProperty, value);
            }
        }

        public PuzzleControl()
        {
            this.InitializeComponent();
            CreateRowsAndColumns();
        }

        private void CreateRowsAndColumns()
        {
            //create rows and columns in puzzleGrid
            //works fine
        }

        private void SetGridData()
        {
            //fill puzzleGrid with data
            //works fine
        }
    } 
```

有谁知道我的代码有问题？因为当我把 Source = new ObservableCollection(); 在 PuzzleData 的构造函数中，PropertyChanged 事件将引发。与 DataContext 有什么关系吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:21:48.173

我不确定，

但你设置`<controls:PuzzleControl Source="{Binding Path=PuzzleData}"/>`

```
PuzzleData = List<string> 
```

和

```
Source = ObservableCollection<string> 
```

如果绑定甚至第一次工作（它显然是做什么的），那么可能是源`<string>`以某种方式设置为 List 而不是`ObservableCollection<string>`. 这可能就是您的依赖属性方法 ( `PropertyChanged`) 没有被调用的原因，因为它已注册到`ObservableCollection<string>`.

但这都是纯粹的猜测，没有测试过。

* * *

在我得到他的代码并对其进行审查后，我发现 PuzzleData 从未真正设置过，而这就是错误...... 误报......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:44:36.993

你确定绑定上下文吗？又如何绑定对象？如果您像在 gridview 中一样使用用户控件，则 DataContext 会更改，并且根页面的 Datacontext 会有所不同。

```
<controls:PuzzleControl Source="{Binding Path=DataContext.PuzzleData}"/> 
```

如果您使用子控件，则为您的用户控件；像这样绑定 ElementName 属性：

```
<controls:PuzzleControl Source="{Binding Path=DataContext.PuzzleData, ElementName=pageRoot}"/> 
```

如果您不确定，请通过断点在调试时跟踪 DataContext 绑定值。

# vb.net - 将相关表的值分配到 VS LightSwitch 中的新表中

> ID：13750022
> 
> 赞同：1
> 
> 时间：2012-12-06T18:21:51.480
> 
> 标签：vb.net, nullreferenceexception, visual-studio-lightswitch

我在**VB.Net**中使用 LightSwitch (Learning..)，这是我的问题：我有一些名为`tOrder`and的表`tProduct`。
我在 tOrder 中创建了一个具有 UNITPRICE 和 TOTALPRICE 的计算属性。总价格很容易制作：

```
Private Sub totalPrice_Compute(ByRef result As Decimal)
    result = quantity * unitPrice
End Sub 
```

问题在于`unitPrice`。我找不到根据用户选择自动分配`Price`in值的方法。`tProduct`可以说`tProduct`有3种产品。产品 A 的价格为 5，产品 B 的价格为 10，产品 C 的价格为 20。我需要在“新订单”屏幕中，根据用户的选择（如果用户想要产品 A/产品B/产品 C) `UnitPrice`in`tOrder`自动更改，以便用户查看`Price`in的实际价格`tProduct`。

我试过：

```
Private Sub unitPrice_Compute(ByRef result As Decimal)
            result = Me.tProduct.price
End Sub 
```

但是出现一个错误说：`NullReferenceException was unhandled by user code`

我也试过：

```
Private Sub unitPrice_Compute(ByRef result As Decimal)
  If Me.tProduct.nameProduct <> Nothing Then
     result = tProduct.price
  Else
     result = 0
  End If
End Sub 
```

但是同样的错误..

我不知道如何解决它，也不知道在哪里、何时、如何解决它。我是 LightSwitch 的新手，如果你能帮助我，我将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:36:26.627

*您的代码在tProduct*实际具有值之前被调用，因此试图引用其*Price*属性会导致错误。

您与第二段代码非常接近。它只需要：

```
Private Sub unitPrice_Compute(ByRef result As Decimal)
  If (Me.tProduct IsNot Nothing) Then
     result = Me.tProduct.price
  Else
     result = 0
  End If
End Sub 
```

在使用实体的任何属性之前，您应该**始终**检查*null*（或VB 中的*Nothing*），即实体具有值。此外，您不能使用*<>*与*Nothing*进行比较，您必须使用*Is*或*IsNot*。

一个更简单的替代方法是编写这样的代码（尽管上面的版本也很好）：

```
Private Sub unitPrice_Compute(ByRef result As Decimal)
  result = If(Me.tProduct Is Nothing, 0, Me.tProduct.price)
End Sub 
```

# javascript - 快速 AJAX 刷新

> ID：13750024
> 
> 赞同：-3
> 
> 时间：2012-12-06T18:21:59.710
> 
> 标签：javascript, jquery, ajax

刷新 Ajax 请求的最佳方法是什么？

我现在有以下内容：

```
setInterval(function() {
$.post('upload.php', function(finish)
{})},30); 
```

不幸的是，它对我来说太慢了，因为我最多需要它在 0.030 秒内刷新。

如何提高性能以满足我的需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:34:10.737

根据您关于想要请求多人游戏信息的评论，

通常客户会在需要某种网络更新的每个领域做一些死角。这就是正常游戏中的“滞后”。玩家的客户在获得真实情况的更新之前认为其他人正在做什么之间的差异。

30 毫秒是通过网络服务器执行此操作的非常快的时间范围，应该使用 WebSockets 完成（正如其他人在评论中指出的那样）。

# php - 覆盖默认 FOSUserBundle 表单：InvalidArgumentException

> ID：13750026
> 
> 赞同：3
> 
> 时间：2012-12-06T18:22:02.217
> 
> 标签：php, symfony, symfony-2.1

我正在使用[symfony 2.1 的官方文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.x/Resources/doc/overriding_forms.md)来覆盖默认的 FOSUserBundle 表单。但是当我试图覆盖表单处理程序时，我遇到了这个错误：

> InvalidArgumentException：服务定义“test_user.form.handler.registration”不存在。

文件列表：

```
<?php

// src/Test/UserBundle/Form/Handler/RegistrationFormHandler.php

namespace Test\UserBundle\Form\Handler;

use FOS\UserBundle\Form\Handler\RegistrationFormHandler as BaseHandler;
use FOS\UserBundle\Model\UserInterface;

class RegistrationFormHandler extends BaseHandler
{
    protected function onSuccess(UserInterface $user, $confirmation)
    {
        // logic here...
        parent::onSuccess($user, $confirmation);
    }
} 
```

=-=-=-=-=

```
# src/Test/UserBundle/Resources/config/services.yml
services:
    test_user.form.handler.registration:
        class: Test\UserBundle\Form\Handler\RegistrationFormHandler
        arguments: ["@fos_user.registration.form", "@request", "@fos_user.user_manager", "@fos_user.mailer", "@fos_user.util.token_generator"]
        scope: request
        public: false 
```

=-=-=-=-=

```
# app/config/config.yml
fos_user:
    db_driver: orm
    firewall_name: dev
    user_class: Test\UserBundle\Entity\User
    registration:
        form:
            handler: test_user.form.handler.registration 
```

PS 是的，我读过类似的问题，但我遇到的问题不一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:37:12.810

仔细查看`services.yml`. 它说`public: false`，也就是说，无法从代码访问此服务（请参阅[高级容器配置](http://symfony.com/doc/2.0/components/dependency_injection/advanced.html "高级容器配置")）。您可以执行以下两项操作之一：更改`public`to的值`true`或删除该行，因为默认值为`true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:41:05.110

问题很简单。我手动创建了我的，因此尚未创建`UnserBundle`名为的文件夹。`DependencyInjection`此文件夹包含加载服务配置的 php 文件。

# javascript - javascript history.back 丢失搜索结果

> ID：13750029
> 
> 赞同：3
> 
> 时间：2012-12-06T18:22:11.613
> 
> 标签：javascript, ajax, html, browser-history

页面 A：

```
$(document).ready(function () {
    bindData();
});

function bindData() {
    $('#searchbtn').bind('click', function () { SearchResult(); });
}
function SearchResult() {
 ajax call...
} 
```

页面 A HTML：

```
<input type="button" id="searchbtn" /> 
```

页面 B 详细信息---> 从页面 A 搜索列表中选择特定搜索结果后出现此页面

```
 <a href="javascript:history.back();">Back</a><br /> 
```

现在，当我返回页面时，AI 可以看到我的搜索条件被选中，但结果 Div 消失了。我想要做的是我希望在页面返回时保留搜索列表。我认为我可以在这里做的是如何在页面返回时再次调用 searchbtn click 事件，以便列表再次出现。谁能告诉我如何仅在页面从页面 B 返回时触发 searchbtn 点击事件。或者指出我这样做的正确方式.. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:42:51.710

浏览器后退按钮长期以来一直是 AJAX 的问题。那里有脚本、解决方法和技术（取决于您要使用的框架）。

由于您似乎正在使用 jQuery（基于您发布的 JavaScript 语法），这里是另一个[Stackoverflow 帖子的链接，该帖子关于后退按钮 jQuery 插件](https://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:43:17.997

`history.back()`将返回到最后访问的 URL，这意味着在用户访问期间进行的任何 ajax 调用都不会自动重复。您的浏览器可能会自动恢复您的表单选择，但该`SearchResults()`功能仅由`click`事件调用，**而不是**选择事件。

您可以使用[sammy.js 之](http://www.sammyjs.org/)类的框架将 URL 绑定到 ajax 状态。这样，`history.back()`会将您带到与`SearchResults()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:47:48.640

```
 function bindData() {
    var chkinput1 = $("input:checkbox[name=x]:checked").length;
    var chkinput2 = $("input:checkbox[name=y]:checked").length;

    if (chkinput1 > 0 && chkinput2 > 0) {
       SearchResult();
     }
    $('#searchbtn').bind('click', function () { SearchResult(); });
    } 
```

我知道这是实现此结果的最糟糕的方法，但我认为与其使用任何其他插件来增加复杂性，我们现在将采用此方法。如果其他人正在寻找相同的问题，让我再次告诉您，这不是最佳实践，因为在返回历史记录时，我们将再次调用搜索结果，具体取决于复选框的缓存输入选择并再次生成整个 ajax 调用显示列表。在第一个请求中，我正在缓存列表并设置滑动到期，因此它不需要任何时间来恢复，所以每个人都过得愉快。

# flash - 空气调试启动器 - 无法调整窗口大小

> ID：13750032
> 
> 赞同：0
> 
> 时间：2012-12-06T18:22:26.950
> 
> 标签：flash, air, adobe

我正在尝试在我的 1280x800 屏幕上调试 flash cs6 中的 AIR 应用程序。AIR 应用程序适用于 iOS，高 960 像素，因此不适合屏幕。

有没有办法滚动或调整它的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:54:58.363

如果可以，请提高屏幕的分辨率。如果没有，我会尝试在 3GS 模拟器中运行您的应用程序，它只有一半大小，但应该显示大致相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T19:20:43.577

我遇到了同样的问题，这真的很烦人。到目前为止，我的解决方案如下：

*   减小输出窗口大小，使 ADL 窗口适合我的屏幕

*   所有影片剪辑的尺寸和位置都需要以相对值重写 (mc.x = 270; -> mc.x = stage.width * 0.325; )

如果有更好的解决方案，我会全神贯注:)

# jquery - 我的 jQuery 在加载内容之前获取元素的宽度和高度

> ID：13750036
> 
> 赞同：0
> 
> 时间：2012-12-06T18:22:36.633
> 
> 标签：jquery, css

我已经在浏览器窗口的中心制作了以 div 为中心的脚本，我的问题在这里：

该脚本在加载内容之前采用了 overlay_window 的宽度和高度，因此它将 div 居中，就像 1px x 1px 元素一样，在此之后它加载内容，我不知道如何防止这种情况发生。

有人能帮我吗？

这里的代码：

```
$(document).ready( function(){      
    $('.cod').click(function() {
        var div_name = $(this).attr('id');      
        $('.overlay_window').load('/templates/' + div_name + '_template.php');
        var div_width = $('#'+div_name+'-overlay').width();
        var div_height = $('#'+div_name+'-overlay').height();
        $('.overlay_window').css("width", ""+div_width+"px")
        $('.overlay_window').css("height", ""+div_height+"px")
        var div2_width = $('.overlay_window').width();
        var div2_height = $('.overlay_window').height();
        var window_width = $(window).width();
        var window_height = $(window).height();         
        var widthoffset = (window_width - div2_width) / 2;  
        var heightoffset = (window_height - div2_height) / 2;   
        $('.overlay_window').css("left", "" + (widthoffset-div_width) + "px");
        $('.overlay_window').css("top", "" + (heightoffset-div_height) + "px");
        $('.overlay_background').fadeIn();
        $('.overlay_window').fadeIn();  
    });
}); 
```

和 CSS：

```
div.overlay_window{
    background:#ffffff;
    width:auto;
    height:auto;
    position:absolute;
    z-index:200;
    top:0;
    left:0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:31:12.037

[从.load(url, completed)](http://api.jquery.com/load/)函数加载数据时更改样式。您简单地要求加载页面，并且在加载时，您会更改样式。

```
$(document).ready( function(){    
    $('.cod').click(function() {
       var div_name = $(this).attr('id');
       $('.overlay_window').load('/templates/' + div_name + '_template.php'**, function(){
          var div_width = $('#'+div_name+'-overlay').width();
          var div_height = $('#'+div_name+'-overlay').height();
          $('.overlay_window').css("width", ""+div_width+"px")
          $('.overlay_window').css("height", ""+div_height+"px")
          var div2_width = $('.overlay_window').width();
          var div2_height = $('.overlay_window').height();
          var window_width = $(window).width();
          var window_height = $(window).height();
          var widthoffset = (window_width - div2_width) / 2;  
          var heightoffset = (window_height - div2_height) / 2;   
          $('.overlay_window').css("left", "" + (widthoffset-div_width) + "px");
          $('.overlay_window').css("top", "" + (heightoffset-div_height) + "px");
          $('.overlay_background, .overlay_window').fadeIn();
       });
    });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:35:03.567

尝试在 $(document).ready 之外编写 Click 函数。如果它仍然不起作用，请在其中附上点击功能

```
$(#someID).is(:visible){
//your code here
} 
```

在您的 div 中添加 id="someID"

希望一切顺利:)

# javascript - 水平菜单样式“溢出”子菜单

> ID：13750045
> 
> 赞同：0
> 
> 时间：2012-12-06T18:23:13.517
> 
> 标签：javascript, css, html, menu, styles

我有一个水平菜单和另一个水平子菜单。我遇到的问题是样式。我正在努力做到这一点，以便当激活主菜单元素并显示相应的子菜单时，主菜单元素的颜色会流血以覆盖两个菜单之间的空白，如下图所示：

![](../Images/a4e17cf7974a43678f5ec51fecd61d6d.png)

只是为了澄清上面的图片是我正在搜索的粗略图像操纵近似值。

我在 CMS Made Simple 中这样做，所以这只是代码的近似值：

```
 <nav id="mainmenu">
       <ul>
           <li>Main Menu 1</li>
      </ul>
 </nav>

<nav id="submenu">
      <ul>
           <li>Submenu 1</li>
      </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:13:53.757

由于您没有提供任何代码，因此我创建了一个模糊的想法：http: [//jsfiddle.net/FLnke/](http://jsfiddle.net/FLnke/)

```
<nav id="mainmenu">
   <ul>
       <li onmouseover="javascript:opensub()" onmouseout="javascript:closesub()" >Main Menu 1 |
           <div id="submenu"></br>
  <ul>
       <li>Submenu 1</li>
       <li>Submenu 2</li>
  </ul>
</div>
       </li>
       <li>Main Menu 2</li>
  </ul> 
```

# google-chrome-frame - Chrome Frame 在 IE7 中的其他网站上工作，但不是我的

> ID：13750052
> 
> 赞同：1
> 
> 时间：2012-12-06T18:23:30.737
> 
> 标签：google-chrome-frame

在我的脑海中：

```
<meta http-equiv="X-UA-Compatible" content="chrome=IE7">
<!--[if IE 7]>
<script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">       </script>
<script type="text/javascript">
window.attachEvent("onload", function(){ CFInstall.check({ mode: "overlay", destination: "http://www.websitename.com" }); });
</script>
<![endif]--> 
```

当网站加载时，如果您没有安装 Chrome Frame，它会提示您安装它。然后您可以安装 Chrome Frame，但安装完成后，该站点仍然不显示。我可以看到其他使用 Chrome Frame 的网站在我安装它之前和之后的不同之处，所以我知道 Chrome Frame 实际上正在安装和工作。我确实收到一条消息说

> 此对话框中出现错误
> 
> 错误：153
> 
> 未指定的错误

任何想法都会非常有帮助和感激

# php - 替换特殊字符php

> ID：13750053
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:23:46.903
> 
> 标签：php, string

我现在有个问题。当有人订购包含字符“æ”的东西时，它会变成“à¦”，这会破坏mysql查询，并在那里结束句子。例如，我得到了这个：

```
#55*2*195*1 - 1,%%%%38\. Burger dobbelt %%%%Kommentar%%%%Burgeren skal và¦re med friske agurker i stedet for syltede%%%%og uden ost. Pà¥ forhà¥nd tak %%%%%%%%100\. Lasagne %%%%Dressing%%%%Ingen dressing,*;;124.20;;Niklas Smietana;;;;7;;*# 
```

但是当它插入数据库时​​，它最终是这样的：

```
#55*2*195*1 - 1,%%%%38\. Burger dobbelt %%%%Kommentar%%%%Burgeren skal v 
```

它只是在那里结束。所以我想要做的是我想替换“字符串”中的每个特殊字符，如“æ”，“ø”，“å”，“ü”，“ö”等，所以它变成“ae "、"oe"、"aa"、"u"、"o"。我已经尝试使用 str_replace 但它不会这样做。

我的代码：

```
$product_name = $row['product_names'];
$product_name = str_replace("Ã¸", "oe", $product_name);
$product_name = str_replace("Ã‰", "É", $product_name);
$product_name = str_replace("Ã", "à", $product_name);
$product_name = str_replace("¿", 'oe', $product_name);
$product_name = str_replace("¾", 'ae', $product_name);
$product_name = str_replace("æ", 'ae', $product_name);
$product_name = str_replace("Œ", 'aa', $product_name);
$product_name = str_replace("å", 'ae', $product_name);
$product_name = str_replace("š", 'oe', $product_name);
$product_name = str_replace("Ÿ", 'u', $product_name); 
```

这里有人对此有解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:29:28.040

您应该使用[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)or[`mysqli_real_escape_string()`](http://ca1.php.net/manual/en/mysqli.real-escape-string.php)来防止 mysql 注入并转义特殊字符。

# javascript - 三个按钮和左下角（.link div）被隐藏，直到我“检查元素”（在 Chrome 中），然后它们立即出现。为什么？

> ID：13750057
> 
> 赞同：0
> 
> 时间：2012-12-06T18:24:10.130
> 
> 标签：javascript, html, css, google-chrome

这是代码。它在我的 macbook pro 上工作，但在我的 iMac 上运行时不起作用。同样，问题是#photoshop-link、#illustrator-link 和#indesign-link 在（某些）计算机上的谷歌浏览器中不可见，直到我“检查元素”然后它们立即出现。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Kyle's Gallery</title> 
```

的JavaScript：

```
function closeWindow() {

$("#intro").fadeOut(500);
$("#screen").fadeOut(500);
}

</script> 
```

的CSS：

```
<style type="text/css">
body,td,th {
font-family: Verdana, Geneva, sans-serif;
font-size: 18px;
}
body {
color: white;
}

#container {
height: 650px;
width: 900px;   
background-image: url(images/IrisMask.png);
background-size:cover;
padding: 50px;
}

#title {
font-size: 40pt;
margin-right: -400px;
text-align:center;
}

#logo {
float: left;
margin-left: 20px;
}

#content {
margin-top: 50px;   
}

#center {
border-radius: 10px;
position: absolute;
width: 820px;
height: 355px;
background-color: black;
opacity: 0.7;
z-index: 5;
left: 500px;
margin-left: -400px;
}

#center-content {
border-radius: 10px;
border-color: white;
border-width: 2px;
border-style:solid;
position: absolute;
opacity: 1;
z-index: 10;
width: 800px;
height: 300px;
left: 500px;
margin-left: -400px;
padding: 25px;
text-align:center;
}

#screen {
position: absolute;
height: 750px;
width: 1000px;  
z-index: 3;
background-color: black;
opacity: 0.7;
}

#screen:hover {
position: absolute;
height: 750px;
width: 1000px;  
z-index: 3;
background-color: black;
opacity: 0.7;
cursor: pointer;
}

.preview:hover {
cursor: pointer;
}

.clearfix:after {
content: ".";
display: block;
clear: both;
visibility: hidden;
line-height: 0;
height: 0;
}

.clearfix {
display: inline-block;
}

html[xmlns] .clearfix {
display: block;
}

* html .clearfix {
height: 1%;
}

#headshot {
float: left;
border-radius: 14px;
border-color: white;
border-width: 2px;
border-style:solid;
margin-top: -10px;
margin-left: 15px;
}

#intro-text {
float: left;
width: 540px;   
font-size: 12pt;
}

#links {
position: absolute;
bottom: 80px;
left:70px;
z-index: 3;
}

#photoshop-link {
}

#illustrator-link {
margin-left: 75px;
}

#indesign-link {
margin-left: 150px;
}

.link {
width:200px;
border-radius: 10px;
border-color: white;
border-width: 2px;
border-style:solid; 
font-size: 14pt;
font-weight: bold;
padding: 10px;
margin: 10px;
text-align:center;
}

.link:hover {
width:200px;
border-radius: 10px;
border-color: white;
border-width: 2px;
border-style:solid; 
font-size: 14pt;
font-weight: bold;
padding: 10px;
margin: 10px;
text-align:center;
cursor: pointer;
}

</style> 
```

的HTML：

```
</head>

<body>
<div id="screen" onclick="javascript:closeWindow()">
</div>
<div id="container">
<div id="logo">
    <img src="images/logo.png" >
</div>
<div id="title">
    Kyle Sundman
</div>
<div class="clearfix"></div>
<div id="content">
    <div id="intro">
        <div id="center">
        </div>
        <div id="center-content">
            <div id="intro-text">
                Greetings world.<br /><br />

I would like to thank you for taking the time to view my gallery.<br /><br />

All content on this site (and the site itself) has been created by me, personally, for the culmination of an intermediary design course at Pepperdine University.<br /><br />

Click the links to view information about the topic, and click the edge of the screen to close the displayed windows (like this one).<br /><br />

Enjoy!<br /><br />

~ Kyle Sundman
            </div>
            <div id="headshot">
                <img src="images/headshot.png" >
            </div>
        </div>
    </div>
    <div id="links">
        <div id="photoshop-link" class="link">
            Photoshop
        </div>
        <div id="illustrator-link" class="link">
            Illustrator
        </div>
        <div id="indesign-link" class="link">
            InDesign
        </div>
    </div> 
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:38:49.017

它们只是漂浮在较大窗户上黑盒子的底部边缘。

由于css“底部”属性。

我觉得很笨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:24:28.953

尝试将 float: 添加到您的 css 文件中的 .link 以使您的链接成为块元素。

# url - 如何将代码从 jsfiddle 移动到本地系统进行测试

> ID：13750058
> 
> 赞同：0
> 
> 时间：2012-12-06T18:24:21.083
> 
> 标签：url, data-binding, knockout.js

这类似于问题[https://stackoverflow.com/questions/13693170/changed-version-of-knockout-js](https://stackoverflow.com/questions/13693170/changed-version-of-knockout-js)

我想将代码从 jsfiddle 移动到本地系统进行测试。该代码适用于添加、检查、删除。但是，它不做的是从 model.js 中加载假数据。我已经改变了/echo/json。到本地网址。我还需要做什么？使用最新的火狐。

模型.js >>>>

```
$(document).ready(function() {

var fakeData = [{
    "title": "Wire the money to Panama",
    "isDone": true},
{
    "title": "Get hair dye, beard trimmer, dark glasses and passport",
    "isDone": false},
{
    "title": "Book taxi to airport",
    "isDone": false},
{
    "title": "Arrange for someone to look after the cat",
    "isDone": false}];

function Task(data) {
    this.title = ko.observable(data.title);
    this.isDone = ko.observable(data.isDone);
}

function TaskListViewModel() {
    // Data
    var self = this;
    self.tasks = ko.observableArray([]);
    self.newTaskText = ko.observable();
    self.incompleteTasks = ko.computed(function() {
        return ko.utils.arrayFilter(self.tasks(), function(task) { return !task.isDone() && !task._destroy });
    });

    // Operations
    self.addTask = function() {
        self.tasks.push(new Task({ title: this.newTaskText() }));
        self.newTaskText("");
    };
    self.removeTask = function(task) { self.tasks.destroy(task) };
    self.save = function() {
        $.ajax("/ds", {
            data: {
                json: ko.toJSON({
                    tasks: this.tasks
                })
            },
            type: "POST",
            dataType: 'json',
            success: function(result) {
                alert(ko.toJSON(result))
            }
        });
    };

     //Load initial state from server, convert it to Task instances, then populate self.tasks
    $.ajax("/ds", {
        data: {
            json: ko.toJSON(fakeData)
        },
        type: "POST",
        dataType: 'json',
        success: function(data) {
            var mappedTasks = $.map(data, function(item) {
                return new Task(item);
            });

            self.tasks(mappedTasks);
        }
    });                               
}

ko.applyBindings(new TaskListViewModel());

}); 
```

ds.html

```
<script type="text/javascript" src="static/js/jquery-1.6.3.min.js"></script>
<script type="text/javascript" src="static/js/knockout-2.0.0.js"></script>

<p>
<div class="codeRunner">

    <h3>Tasks</h3>

    <form data-bind="submit: addTask">
        Add task: <input data-bind="value: newTaskText" placeholder="What needs to be done?" />
        <button type="submit">Add</button>
    </form>

    <ul data-bind="foreach: tasks, visible: tasks().length > 0">
        <li>
            <input type="checkbox" data-bind="checked: isDone" />
            <input data-bind="value: title, disable: isDone" />
            <a href="#" data-bind="click: $parent.removeTask">Delete</a>
        </li>
    </ul>

    You have <b data-bind="text: incompleteTasks().length">&nbsp;</b> incomplete task(s)
    <span data-bind="visible: incompleteTasks().length == 0"> - it's beer time!</span>

    <button data-bind="click: save">Save</button>

</div>

</p>

<script type="text/javascript" src="static/js/model.js" ></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:50:41.423

小提琴中的 ajax 请求只是模拟真实场景的模拟请求，它们并不是真正必要的。您可以在没有任何 ajax 请求的情况下使用该假数据。例如更改这些部分：

```
self.save = function() {
    alert(ko.toJSON({tasks: this.tasks}));    
};

//Load initial state from server, convert it to Task instances, then populate self.tasks
var mappedTasks = $.map(fakeData, function(item) {
    return new Task(item);
});

self.tasks(mappedTasks); 
```

如果您想使用 ajax 请求来获取真实数据，您需要以您自己的服务器 API 所需的格式发布数据（即，不使用 jsfiddle 的 json-echo 服务中使用的数据中的那个 'json' 字段API)

# php - 通过 phpmyAdmin 在 mysql 中恢复大型数据库

> ID：13750061
> 
> 赞同：1
> 
> 时间：2012-12-06T18:24:33.813
> 
> 标签：php, mysql

我已经为 phpmyadmin 中的所有数据库保存了大约**4.5 MB**和**gzip**格式的备份。

但现在我想通过导入选项卡在**phpmyAdmin中恢复它。**但我们知道上传文件的最大允许大小为 2,048KiB，当尝试上传时显示此消息错误：

> 未收到要导入的数据。没有提交文件名，或者文件大小超过了 PHP 配置允许的最大大小

我使用 [MySQLDumper](http://www.mysqldumper.net)脚本来恢复，但在这个脚本中，我们只能选择一个数据库来恢复，而我想恢复我拥有的所有数据库。

我怎样才能做到这一点。我在 Windows 8 上使用 wamp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:29:32.983

您可以使用终端绕过必须使用 phpmyadmin。

您应该先解压缩 mysqldump。

通过在开始->搜索程序和文件下键入“cmd”来获取 DOS 命令提示符。

导航到 mysqldump 所在的目录，然后键入（对于单个数据库）：

mysql -u `username`-p `password` `name of database`<`filename of the mysqldump`

如果你想恢复所有数据库（看起来你使用 --all-databases 转储了）：

mysql -u `username`-p `password`--数据库`name of database` `name of another database` `name of yet another database`<`filename of the mysqldump`

另请注意，-u 和用户名之间没有空格，-p 和密码之间没有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:33:59.523

您可以使用 mysqldumper [http://www.mysqldumper.net](http://www.mysqldumper.net)恢复大型数据库。如果要在域服务器上恢复它，首先使用 ftp 上传 sql 文件，然后使用 mysqldumper 恢复

# javascript - jQuery ajax 异步调用

> ID：13750063
> 
> 赞同：1
> 
> 时间：2012-12-06T18:24:43.920
> 
> 标签：javascript, ajax, jquery, knockout.js

我正在尝试在使用 jquery 完成 ajax 调用后执行一些操作。

我已经看到，如果我使用这样的函数：

```
 function DownloadData() {
        $.ajax({
            url: "/api/AlbumsRest",
            accepts: "application/json",
            cache: false,
            success: function () {
                /*binding stuff*/
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Error' + textStatus);
            }
        });
    } 
```

它在异步模式下完成的 ajax 请求。我不想更改它，因为我不想冻结页面。但是我想在这个 ajax 完成后做一些动作（动画、效果等）。

所以，我的问题是，如果不使用成功事件，我怎么知道我是否在这个请求的末尾

如果我这样调用 DownloadData 函数：

```
 function DownloadNextData() {
        DownloadData();
        SlideOutAnimation();
        SlideInAnimation();
    } 
```

发出异步请求后，我需要制作幻灯片。

一些想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:27:17.320

使用 jQuery [Deferred Objects](http://api.jquery.com/category/deferred-object/)你应该`return`是`$.ajax()`from`DownloadData`

```
function DownloadData() {
    return $.ajax({...});
} 
```

然后您可以在 AJAX 处理程序之外注册一个函数，该函数只有在 AJAX 调用完成后才会被调用：

```
function DownloadNextData() {
    DownloadData().done(function() {
        SlideOutAnimation();
        SlideInAnimation();
    });
} 
```

看哪 - 您的动画处理与您的 AJAX 功能完全分离:)

为简化起见，`.done`实际上还可以取一个函数引用列表：

```
function DownloadNextData() {
    DownloadData().done(SlideOutAnimation, SlideInAnimation);
} 
```

请注意，在这种情况下，您不能提供自己的函数参数——它们实际上会传递 AJAX 数据的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:28:00.070

```
function DownloadData() {
    return $.ajax({
        url: "/api/AlbumsRest",
        accepts: "application/json"
    });
}

function DownloadNextData() {
    SlideOutAnimation();
    SlideInAnimation();
}

DownloadData().done(DownloadNextData); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T18:29:35.827

试试 $.ajaxcomplete。这是它的文档[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

# java - 将本地机器名放入 mySQL 表

> ID：13750065
> 
> 赞同：1
> 
> 时间：2012-12-06T18:24:56.903
> 
> 标签：java, mysql, jdbc, log4j

我的数据库中有一个日志表，用于跟踪登录、注销、超时以及用户在登录时所做的事情。我的 Java 设置为每次执行 LOGGER.info(message) 时，消息都会进入我的表的 MESSAGE 列。

这是 log4j.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration PUBLIC "-//APACHE//DTD LOG4J 1.2//EN" "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<!-- Appenders -->
<appender name="console" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%-5p: %c - %m%n" />
    </layout>
</appender>
<appender name="db" class="org.apache.log4j.jdbcplus.JDBCAppender">
    <param name="connector" value="com.blahblahblah.jdbcplus.MySqlConnectionHandler" />
    <param name="sql"
    value="INSERT INTO LOG(LEVEL, MESSAGE, TIMESTAMP, HOST) VALUES ('@PRIO@', '@MSG@', '@TIMESTAMP@', 'Test')" />
    <layout class="org.apache.log4j.PatternLayout"></layout>
</appender>

<!-- Application Loggers -->
<logger name="com.blahblahblah.service.ZebraService">
    <level value="info" />
    <appender-ref ref="db" />
</logger>
<logger name="com.blahblahblah.service.ZplTemplateService">
    <level value="info" />
    <appender-ref ref="db" />
</logger>
<logger name="com.blahblahblah.service.MyService">
    <level value="info" />
    <appender-ref ref="db" />
</logger>
<logger name="com.blahblahblah.web.controller.ViewController">
    <level value="info" />
    <appender-ref ref="db" />
</logger>
<logger name="com.blahblahblah.security">
    <level value="info" />
    <appender-ref ref="db" />
</logger>

<!-- 3rdparty Loggers -->
<logger name="org.springframework.core">
    <level value="error" />
</logger>
<logger name="org.springframework.beans">
    <level value="error" />
</logger>
<logger name="org.springframework.context">
    <level value="error" />
</logger>
<logger name="org.springframework.web">
    <level value="error" />
</logger>
<logger name="org.springframework.web.servlet.DispatcherServlet">
    <level value="error" />
</logger>
<logger name="org.springframework.security">
    <level value="error" />
</logger>
<logger name="org.springframework.aop">
    <level value="error" />
</logger>
<logger name="org.springframework.ui">
    <level value="error" />
</logger>
<!-- Root Logger -->
<root >
    <priority value="error" />
    <appender-ref ref="console" />
</root> 
```

这会在 LEVEL 列中打印“INFO”，在 MESSAGE 列中打印有关登录/注销的信息，在 TIMESTAMP 列中打印时间戳，在 HOST 列中打印“Test”。

我想让 HOST 列成为本地机器名称。例如，我的计算机名称是 PC-1050，所以每次我在那台计算机上做某事时，我希望 HOST 说“PC-1050”。

我不知道如何执行@MSG@、@TIMESTAMP@ 等。我只是按照我被告知要做的事情去做。任何人都可以提供一些帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:40:11.243

我对主机名的 log4j 配置进行了一些研究`JDBCAppender`，不幸的是没有看到任何简单的方法来完成它（即没有任何简单的`log4j.xml`文件更改）。

我没有找到主机名的任何内容

*   优先@PRIO@
*   留言@MSG@
*   时间戳@TIMESTAMP@

对于你的 SQL

```
INSERT INTO LOG(LEVEL, MESSAGE, TIMESTAMP, HOST) VALUES  
('@PRIO@', '@MSG@', '@TIMESTAMP@', 'Test') 
```

[此外，我在log4j 文档](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)中没有看到有关 Hostname 的 PatternLayout 的任何内容。我想如果在 log4j JDBCAppender 中有一个宏，它将对应于 PatternLayout 中的转换字符。

您可以查看将主机名放入 MDC。这是其他人[使用 log4j JDBCAppender 并将用户放入 MDC](https://stackoverflow.com/questions/9923463/saving-extra-values-in-log4j-jdbcappender)的示例。

祝你好运，希望这会有帮助！

# java - “&”或“,”：A有什么区别 和一个

> ID：13750068
> 
> 赞同：8
> 
> 时间：2012-12-06T18:25:37.797
> 
> 标签：java, generics, inheritance, multiple-inheritance, separator

**多个通用接口分隔符：“，”或“&”**

我一直在使用`A<T extends I1, I2>`，但今天，我看到了`A<T extends I1 & I2>`。这两种符号有什么区别？

它有不同的含义吗？目的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T18:28:48.733

```
A<T extends I1, I2> 
```

是一个`A`有两个参数的类型

1.  `T`它必须是`I1`
2.  `I2`

您可以将其读作“A <preposition> type T which extends I1 <preposition> type I2”，`SortedMap<Key extends comparable, Value>`“从可比较类型键到类型值的映射”也是如此

* * *

```
A<T extends I1 & I2> 
```

是`A`具有单个参数的类型

1.  `T`必须是的子类型`I1`和子类型`I2`

您可以将其读作“扩展 I1 和 I2 的 <preposition> 类型 T”，因此`SortedSerializableSet<T extends Serializable & Comparable>`可以将 a 读作“可序列化和可比较的 T 类型的已排序元素集”

# algorithm - 分布式算法视频讲座

> ID：13750069
> 
> 赞同：3
> 
> 时间：2012-12-06T18:25:39.820
> 
> 标签：algorithm, distributed

我正在寻找有关分布式算法的视频讲座。如果有人知道一个好的资源，将不胜感激。

问候， 阿卜杜勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:47:36.260

也可能你会幸运地搜索并行算法而不是分布式算法 - 我认为这两个术语所涵盖的材料之间存在相当多的重叠。

它可能没有视频，但您可以在[此处](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-852j-distributed-algorithms-fall-2009/index.htm)尝试 MIT 的分布式算法 OpenCourseWare 。

Cousera 有一个[关于异构并行算法的模块](https://www.coursera.org/course/hetero)。

[这里](http://www.catonmat.net/blog/mit-introduction-to-algorithms-part-thirteen/)有一些关于并行算法的视频讲座。

# python - Python：如何重复错误的 while 循环？

> ID：13750071
> 
> 赞同：0
> 
> 时间：2012-12-06T18:25:54.350
> 
> 标签：python, loops, while-loop, repeat

我无法让它真正重复while循环。我试过让它注册一个真值，或者让它继续或跳出循环。但没有任何效果。

```
xvalue = int(input("Enter a test value to test if it works: "))

while xvalue >= Limit:
    print("\a\a\a")
else:
    continue
    xvalue = int(input("Updating Value: ")) 
```

有人可以提出一些建议吗？

我也写了它，所以它说：

```
else:
     return True 
```

但这不起作用。（我得到一个错误）我只需要它不断重复while循环，直到它在第一个条件下变为真。然后响起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:27:56.233

我并不完全遵循您的代码的意图。我认为您想要以下内容：

```
while True:
   xvalue = int(input("Enter a value: "))
   if xvalue < Limit:
      break
   print("\a\a\a") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:39:00.453

您的代码存在很多问题，但这里有一些大问题。

首先，`else`in`while...else`并不意味着你认为它做了什么。这不像在`if...else`. 在中，[如果您的](https://stackoverflow.com/questions/3295938/else-clause-on-python-while-statement)[语句变为](https://stackoverflow.com/questions/3295938/else-clause-on-python-while-statement)-- 请注意，*如果*您退出循环或出现错误，则执行`while...else`该`else`块。在您的代码中，该块将在何时执行，因为这与您的布尔表达式相反。[`while``False`](https://stackoverflow.com/questions/3295938/else-clause-on-python-while-statement)*`break``else``xvalue < Limit``while`*

 *其次，因为`else`块是在循环*之后*`continue`执行的，所以放在那里没有任何意义，因为不再有任何循环可以迭代。不仅如此，即使有*一个*`continue`循环继续，你之前卡住的事实`xvalue = int(input...`意味着**循环将在用户有机会输入更新的值之前重新启动。** 您需要在重新分配`continue` *之后*放置，到那时，根本没有必要放置`continue`。

所以基本上，你要找的是：

```
xvalue = int(input("Enter a test value to see if it works: "))

while xvalue >= Limit:
    print ("\a\a\a")
    xvalue = int(input("Please try another value: ")) 
```

### OP评论后更新：

```
xvalue = int(input("Enter a test value to see if it works: "))

while xvalue < Limit:                                     # Repeats until user gives a value above limit
    xvalue = int(input("Please try another value: "))
else:
    while True:                                           # Causes bell to ring infinitely
        print ("\a\a\a") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:34:06.417

> 有人可以建议我写的东西，让它说： else: return True 但这不起作用。我只需要它不断重复while循环，直到它在第一个条件下变为真。然后响起。

您可以执行以下操作：

```
Value = False

while Value == False:
    #code to do while looping

#code to do after looping 
```

或者：

```
Value = False

While 1:
   #code for inside the loop
   if Value == True
       break 
```

此外，您的问题描述得不够充分，所以如果我不明白，请不要怪我*

# windows-8 - 如何在 WinJS 转换器中包含 html

> ID：13750073
> 
> 赞同：0
> 
> 时间：2012-12-06T18:25:57.223
> 
> 标签：windows-8, windows-runtime, winjs

我正在尝试创建一个转换器来连接 2 个属性。我想将其中一个样式设置为斜体。

```
fooConverter: WinJS.Binding.converter(function (model) {
     return model.foo + ' ' + '<i>' + model.foo2 + '</i>';
} 
```

我的标记是

```
<h2 data-win-bind="innerText: model.name"></h2> 
```

然而，这个的输出是

```
Foo <i>Foo2</i> 
```

而不是使 Foo2 斜体。可以用转换器做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:15:30.270

改为使用`<h2 data-win-bind="innerHTML: model.name"></h2>`。

# asp.net - 如何在 asp.net 中使用 css 进行 Web 服务器控制？

> ID：13750075
> 
> 赞同：0
> 
> 时间：2012-12-06T18:25:59.800
> 
> 标签：asp.net, css, visual-studio-2010

在 asp.net 中使用 Web 服务器控件，但在 Visual Studio 中，为什么下面的代码没有样式属性

```
 <asp:Label ID = "UserLabel" runat = "server" CssClass = "LabelClass" AssociatedControlID = "UsernameTextBox" >Username</asp:Label> 
```

通过智能感知，它应该是正确的，但样式属性根本没有出现。我正在使用 Visual Studio 2010，使用 C# 的 asp.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:38:51.843

使用 asp 服务器控件时，该`Style`属性从不显示在智能感知上。键入后，智能感知将显示属性`Style="`

服务器控件继承 System.Web.UI.Control，它没有`style`作为属性。

但是，它将被呈现为 HTML。

# java - Spring Java 中许多 DAO 的策略

> ID：13750079
> 
> 赞同：6
> 
> 时间：2012-12-06T18:26:13.580
> 
> 标签：java, spring, dao

我们在现有项目中有许多 DAO（目前没有接口，但可以改变）。我们不是为每个 DAO 类连接一个 Spring 管理的 bean 并将它们注入服务层，而是有一个类似于这样的 DAO“工厂”：

```
public class DAOFactory {
private static DAOFactory daoFac;

static{
    daoFac = new DAOFactory();
}

private DAOFactory(){}

public static DAOFactory getInstance(){
    return daoFac;
}

public MyDAO1 getMyDAO1(){
    return new MyDAO1();
}

    public MyDAO2 getMyDAO2(){
    return new MyDAO2();
}
    ... 
```

（注意 MyDAO1 和 MyDAO2 是具体的类）

这使我们可以轻松地在服务层中添加/调用 DAO 方法，而无需 1.) 将 DAO 接口作为属性添加到服务类 2.) 通过配置将 DAO 实现连接到服务方法中。（而且我们有时在一个服务类中使用多个 DAO）。

```
DAOFactory.getInstance().getMyDAO1().doSomething(); 
```

到目前为止，这种策略对我们很有效（我们不需要切换实现），但我想知道如果我们能够开始新的，是否有更好的方法？我将 DAO 视为 bean 的自动装配，但我仍然需要在每个服务类中创建属性来表示正在使用的那些 DAO。在一个大型项目中，无论如何我都不愿意开始自动装配 bean——我们需要为所有开发人员提供可见性。

感觉就像我在 a.) 与实现紧密耦合，但代码/配置开销较少和 b.) 与接口松散耦合，但需要大量代码/配置开销之间来回切换。

我有没有更好的方法？中间有什么？欢迎发表意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T18:33:07.620

我将把所有的 DAO 作为 Spring 管理的组件，并将它们注入到服务中以实现松散耦合。为什么你认为自动装配 bean 在大项目中不好。？

只需使用 @Component 注释每个 DAO 类并替换`MyDao mydao = factory.getmyDao()`为

`@Autowired MyDao myDao;`

我没有看到太多的编码/配置开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:51:53.567

到目前为止，我对我的项目采取了几种不同的方法，但还没有真正确定什么是“最好的”。可能没有“最佳”，但可能有“最适合您的需求”。

首先，我选择了一个基础服务类。

```
public abstract BaseService {
    @Autowired FooDAO fooDao;
    @Autowired BarDAO barDao;
    . . .
    . . .
    protected getFooDAO() {
        return this.fooDao;
    }
} 
```

然后在我的服务类中，我可以简单地写

```
Foo foo = getFooDAO().uniqueById(id); 
```

这很有效，它使我的服务从 dao 实例变量的所有自动装配和访问器类中保持整洁。问题是，我现在在我的每个服务中都有这个基类的副本，坦率地说，嗯，没什么大不了的。但它也有点产生代码味道，因为它没有使用组合而不是继承，从本质上讲，DI 的一个原因是鼓励组合。

一位同事推荐了一个像你这样的工厂，并称之为 ServiceProvider。我们将其自动连接到我们的服务中。

```
@Component
public class ServiceProvider {
    @Autowired FooDAO fooDao;
    public FooDAO getFooDAO() {
        return this.fooDao;
    }
    . . .
    // yadda yadda
} 
```

然后我们有你所拥有的东西：

```
Foo foo = getServiceProvider().getFooDAO().uniqueById(id); 
```

这非常丑陋，而且确实不适合清晰。因此，我们只使用了提供者的实例，并将其命名为类似 sp 的简短而甜美的名称。然后我们得到

```
Foo foo = this.sp.getFooDAO().uniqueById(id); 
```

再一次，它有效。这可能是一个更好的设计。而且我们只在一个地方自动连接 DAO，而不是到每个服务中，尽管这两种方式都不是什么大问题。但这让我感觉更好，即使*我感觉更好*不是项目要求（但你不认为它应该是吗？）

我一直在想我们会把两者结合起来。我们将更改 BaseService 以自动装配 ServiceProvider，然后包装丑陋的调用。

```
public abstract BaseService {
    @Autowired ServiceProvider serviceProvider;

    protected getFooDAO() {
        return this.serviceProvider.getFooDAO();
    }

    protected getBarDAO() {
        return this.serviceProvider.getBarDAO();
    }
} 
```

在我的服务中提供更好的速记，不需要我将每个 DAO 自动连接到每个服务中，在我看来，这会变得很笨重，但也没有每个服务中所有这些引用的副本，你知道，是一个完全荒谬的担忧。

我留下的问题是在调试器中单步执行代码。进入和退出每个 getWhateverDAO() 调用是乏味的，通过 getServiceProvider() 添加一个可能的步骤也无济于事。

但这就是我处理这个问题的地方。坦率地说，我认为我花了很多时间思考这个问题，因为这是避免我们的应用程序带来的所有真正难题的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:37:46.993

好问题。

我觉得你开始使用是很可惜的`DAOFactory`。Spring 是一个超级灵活的工厂，所以我真的不明白你为什么需要另一个。Spring 中的自动装配有很多优点，并且不需要接口，因此您可以轻松切换到使用 Spring 访问 DAO。恕我直言，它不会减少但会提高其他开发人员的可见性。

此外，如果您正在考虑重构 DAO 层，请查看 Google 代码中的 GenericDAO：[http ://code.google.com/p/hibernate-generic-dao/](http://code.google.com/p/hibernate-generic-dao/)

我对这个图书馆有很好的体验。它可以节省您的时间。你实际上并不需要很多 DAO。你只需要一个 DAO。您显然可以从 google 代码包装通用 DAO 并添加您的应用程序特定的术语和功能。但不要在那里添加实体特定的代码。实体特定代码应该在服务层。如果您使用 Hibernate 标准 API，则不再有脆弱的 HQL，也不会与 hibernate 耦合。这个库同时支持 Hibernate 和 JPA，它的 API 非常简单和强大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:35:53.940

如果您在 1 项服务中使用太多 DAO，您应该考虑将 1 项服务拆分为更低级别（细粒度）的服务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-17T10:59:48.867

如果您不想注释 DAO 类或有配置注释（例如`@Value`污染它们），我看到两个选项：

**`@Configuration`1.用DAO创建`@Bean`一个**

```
@Configuration
public class DaoConfiguration {

    @Value("${db.name}")
    private String dbName;

    @Value("${foo.table}")
    private String fooTable;

    @Value("${bar.table}")
    private String barTable;

    @Bean
    private FooDao fooDao() {
        return new FooDao(dbName, fooTable);
    }

    @Bean
    private BarDao barDao() {
        return new BarDao(dbName, barTable);
    }
} 
```

`@Autowired`然后为您需要的 DAO创建一个字段：

```
@Autowired
private FooDao fooDao; 
```

**2.创建DAO工厂`@Component`**

如果您需要在 DAO 被销毁时进行一些清理，这很有用。

```
@Component
public class DaoFactory {

    @Value("${db.name}")
    private String dbName;

    @Value("${foo.table}")
    private String fooTable;

    @Value("${bar.table}")
    private String barTable;

    private FooDao fooDao;
    private BarDao barDao;

    @PostConstruct
    public void init() {
        fooDao = new FooDao(dbName, fooTable);
        barDao = new BarDao(dbName, barTable);
    }

    @PreDestroy
    public void destroy() {
        try {
            fooDao.close();
        } catch (Exception e) {
            log.error("Failed to clean up FooDao", e);
        }
        try {
            barDao.close();
        } catch (Exception e) {
            log.error("Failed to clean up BarDao", e);
        }
    }

    public FooDao fooDao() {
        return fooDao;
    }

    public BarDao barDao() {
        return barDao;
    }
} 
```

`@Autowired`然后在需要 DAO 的类中为工厂创建一个字段：

```
@Autowired
private DaoFactory daoFactory; 
```

并将其用作：

```
daoFactory.barDao().findAll(); 
```

# actionscript-3 - 在 Flash Builder 中为 ant 任务启用控制台输出

> ID：13750080
> 
> 赞同：1
> 
> 时间：2012-12-06T18:26:15.140
> 
> 标签：actionscript-3, ant, flash-builder

我正在使用 Flash Builder 4.6，我正在尝试设置 Ant 任务来构建和运行我的 Flash 应用程序。我可以让 Ant 任务同时构建和运行我的应用程序，但它不会跟踪到控制台并且断点不起作用。

我遵循了[这个 Stack Overflow 帖子](https://stackoverflow.com/questions/2897141/enabling-console-output-for-exec-ant-task)的建议，但我不断收到错误消息：

> [exec] 另一个 Flash 调试器可能正在运行；请关闭它。详细信息：“无法识别的 Windows 套接字错误：0：JVM_Bind”。

我还按照[这篇文章的建议](http://www.rozengain.com/blog/2008/04/24/flex-builder-ant-build-debug-console-output/)在 Flash Builder 中正确配置了我的 Ant 脚本，但似乎没有什么不同。

我的 AS 文件：

```
package
{
    import flash.display.Sprite;
    import flash.text.TextField;

    public class HelloAnt extends Sprite
    {
        public function HelloAnt()
        {
            var label : TextField = new TextField();
            label.text = "Hello World!";
            addChild(label);
            trace ("Hello World!");
        }
    }
} 
```

我的 ANT 脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="HelloAnt" basedir=".">
    <property name="FLEX_HOME" value="C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0"/>
    <property name="src" value="${basedir}\src"/>
    <property name="bin" value="${basedir}\bin"/>
    <property name="application" value="${bin}\swf\HelloAnt.swf" />

    <taskdef resource="flexTasks.tasks" classpath="${FLEX_HOME}/ant/lib/flexTasks.jar" />   

    <target name="run">
        <echo file="${basedir}/build/.fdbinit">
            run ${application} 
        </echo>
        <exec executable="${FLEX_HOME}/bin/fdb.exe" spawn="false" dir="build">
            <arg line="-unit"/>
        </exec>
    </target>

    <target name="build">
        <mxmlc output="${application}"
                       file="${src}/HelloAnt.as"
                       actionscript-file-encoding="UTF-8"
                       keep-generated-actionscript="false"
                       optimize="true"
                       fork="true"
                       debug="true"
                       maxmemory="1024m"
                       static-link-runtime-shared-libraries="true">
            <source-path path-element="${FLEX_HOME}/frameworks" />
            <source-path path-element="${src}" />
        </mxmlc>
    </target>

    <target name="build-run">
         <sequential>
             <antcall target="build" />
             <antcall target="run" />
         </sequential>
    </target>
</project> 
```

我没主意了。有没有人有任何见识？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:13:00.923

如果您使用 FDB 调试您的应用程序，则输出将发送到正在运行 FDB 的终端窗口。您可以在终端（在 Mac 上）中打开 FDB，然后键入“run /path/to/your/application”进行连接。使用 ANT 以您现在的方式调用 FDB，我认为它会运行命令然后立即断开连接。您需要保持 FDB 处于打开状态或通过 Flash Builder 进行调试（以使用它的控制台）。

我仍在检查是否有办法将输出连接到 Eclipse 的控制台。

如果您在终端中双击 fdb 并输入帮助，您可以看到可用的命令列表。

![在此处输入图像描述](../Images/a8efa6bcd47bd5d59225cf2282c81e11.png)

更多关于 FDB 的信息在这里[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ffb.html#WS2db454920e96a9e51e63e3d11c0bf62063-7ff3](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ffb.html#WS2db454920e96a9e51e63e3d11c0bf62063-7ff3)

# php - 在 PHP 中从 MS SQL 添加表列名称

> ID：13750081
> 
> 赞同：2
> 
> 时间：2012-12-06T18:26:15.030
> 
> 标签：php

我正在尝试使用 DNS - Less Connection 从 MS SQL 添加列名；我已经使用 dns-less 代码成功连接，但我还需要打印列名。

```
echo "<table>";
while (!$rs->EOF)  //carry on looping through while there are records
{
echo "<tr>";
for ($i=0; $i < $num_columns; $i++) {
echo "<td>" . $fld[$i]->value . "</td>";
}
echo "</tr>";
 $rs->MoveNext(); //move on to the next record
  }

echo "</table>"; //close the connection and recordset objects freeing up resources 
```

我知道如何修改表格，但如何添加表格名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-07T23:35:47.797

通过您的代码，很难知道您是如何填充变量的`$fld`。

我建议您在[此处查看](http://php.net/manual/en/book.mssql.php)获取 MS SQL 值的不同方法。

如果可以使用`mssql_fetch_assoc`数组的键就是字段（列）名。

# c++ - 如何强制使用的模板参数在 C++ 中实现某些接口？

> ID：13750085
> 
> 赞同：4
> 
> 时间：2012-12-06T18:26:20.387
> 
> 标签：c++, templates, interface

我认为这在 C++ 中是不可能的，我必须有哪些选项来模拟这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T18:29:33.733

用作`std::is_base_of`：

```
template<typename T>
class A
{
    static_assert(std::is_base_of<IMyInterface, T>::value, 
                  "T must derive from IMyInterface");
}; 
```

您也可以在功能模板中进行相同的操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T18:29:55.007

您可以使用`std::is_base_of<YourInterface, YourParameter>`，如果结果为 ，则会出错`false`。请记住这是 C++11。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T18:30:51.327

一些多态接口还是一些静态接口？后者可以通过[Boost Concepts](http://www.boost.org/libs/concept_check/)检查。

# php - PHP 包含在 jQuery 中

> ID：13750086
> 
> 赞同：-4
> 
> 时间：2012-12-06T18:26:30.387
> 
> 标签：php, jquery

我还没有找到任何东西，所以希望我能在这里得到答案？

在我的 php 页面上加载内容时，我看到以下错误：

> TypeError: $(...).load 不是一个函数 [Break On This Error]
> 
> $(文档).load(函数() {

所以我查看了我当前的 jQuery 设置，包括 Firebug 中的源代码，并确认了以下内容：

*   jQuery 1.8.0 正确加载
*   我在加载调用之前添加了条件语句以检查是否填充了 jQuery。
*   我正在使用的库已加载
*   在文档加载触发之前发出警报

这是我的代码 - PHP 包含文件和 jQuery 有什么不允许的吗？：

```
<html>
<head> ...... </head>
<body>
    <div id='header'></div>

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript" src="/js/jquery.nivo.slider.js"></script>
    <script type="text/javascript">

        $(window).load(function() {
            $('#slider').nivoSlider({
                animSpeed: 500,
                pauseTime: 5000,
                slices:40
            });
        });

    </script>

    <!-- Included file -->
    <div id='container'>
        <div style="height:245px;" id="wrapper">
                <div style="height:245px;" class="slider-wrapper theme-default">
                    <div style="height:245px;" class="nivoSlider" id="slider">
                        <img data-transition="sliceUpDownLeft" alt="" data-thumb="images/toystory.jpg" src="images/toystory.jpg">
                        <img title="This is an example of a caption" data-transition="sliceUpDownLeft" alt="" data-thumb="images/up.jpg" src="images/up.jpg">
                        <img data-transition="sliceUpDownLeft" alt="" data-thumb="images/walle.jpg" src="images/walle.jpg">
                        <img title="#htmlcaption" data-transition="sliceUpDownLeft" alt="" data-thumb="images/nemo.jpg" src="images/nemo.jpg">
                    </div>
                    <div class="nivo-html-caption" id="htmlcaption">
                        <strong>This</strong> is an example of a <em>HTML</em> caption with <a href="#">a link</a>. 
                    </div>
                </div>

        </div>
    </div>
    <!-- End included file -->

    <div id='footer'></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:43:27.073

PHP 不关心客户端发生了什么——在浏览器 (JavaScript) 和您的服务器 (PHP) 上运行的代码根本不交互，*即使 PHP 生成包含 JavaScript 的页面也是如此。*

它们相交的**唯一**一次是间接相交，当您使用 PHP 预填充 JavaScript 常量（通常是一个坏主意）或 JavaScript 使用 GET/POST 将数据发送回脚本的新实例时（标准做法）。

因此，打折后，让我们在 JSFiddle 中查看您的页面：

[http://jsfiddle.net/Rfh9A/](http://jsfiddle.net/Rfh9A/)

它在那里工作得很好，尽管我不得不在 GitHub 上指向 NivoSlider 链接。所以现在我们只有几个选择：

1.  您的实际代码与您发布的不同
2.  您正在通过 AJAX 加载此页面，并且 jQuery 已经是父文档的一部分。这在过去给我带来了问题，特别是当您加载两个不同版本的库时。如果您更改`$`为`jQuery`，它可能会起作用，以防库禁用了兼容性的简写。
3.  未粘贴的页面部分中的 JavaScript 错误（请参阅答案 1）正在阻止 jQuery 实例化。
4.  （远射）您的本地计算机上出现了 DNS 问题或其他问题，阻止了 jQuery 库在您的浏览器上加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:43:10.273

采用：

```
$(document).ready(function() {
}); 
```

[window.onload 与 $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)

编辑：

无视我说的话。

如果您在本地 html 文件中使用它，则带有 // 路径的 jquery 包含将被视为本地文件，例如`file:///ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js`，它不存在。

采用：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T18:29:01.723

尝试在标签中包含您的 javascript 文件，`<head></head>`以确保在您的内联脚本运行之前已全部加载。

# ipad - UISearchBar 不在 TableViewController 的表视图标题中？

> ID：13750088
> 
> 赞同：1
> 
> 时间：2012-12-06T18:26:32.800
> 
> 标签：ipad, ios6, uitableview, uisearchbar, xcode4.5

我想了解如何将 UISearchBar 添加到 TableViewController - 但不是添加到表视图标题。

在某些情况下滚动后，我的现有搜索栏消失了。我找到了使搜索栏“浮动”的方法，但在一些极端情况下，搜索栏在滚动后仍然消失。

谷歌搜索此问题后，我发现有些人已将搜索栏从表格视图标题中取出来处理此问题。如果您的表视图被添加到 UIViewController，这相对容易。但是如何将新视图（在本例中为搜索栏）添加到 TableViewController - 这不是 TableViewController 自动提供的表视图的子视图？

iPad 应用程序 iOS 6

-谢谢迈克 C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:37:03.323

首先，使用故事板。将 UIView 对象添加到表头。然后，将您的 UISearchBar 放在 UIView 中。此外，您需要将表格视图控制器设置为搜索栏的代表。不要使用 scrollViewDidScroll 方法（或类似方法），而是将浮动代码放入 viewDidLayoutSubviews。这适用于所有情况。我还调用了bringToFront，因为我使用了自定义部分标题并且需要确保表格标题视图始终保持在顶部。最上面的 UIEdgeInset 是 tableHeaderView 的高度。

```
viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    CGRect frame=self.tableView.tableHeaderView.frame;
    frame.origin.y=self.tableView.contentOffset.y;
    if (frame.origin.y <= 0) {
        frame.origin.y=0;
        [self.tableView setContentInset:UIEdgeInsetsMake(0.0, 0.0, 0.0, 0.0)];
    } else {
        [self.tableView setContentInset:UIEdgeInsetsMake(48.0, 0.0, 0.0, 0.0)];
    }
    [self.tableView.tableHeaderView setFrame:frame];
    [self.tableView bringSubviewToFront:self.tableView.tableHeaderView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:05:48.233

由于 Stackoverflow 或 Apple 开发者论坛都没有人回应，我从 Cocoaheads 爱达荷州分公司的 Ron Adams 那里得到了帮助。基本上，我最终将我的 UITableViewController 更改为 UIViewController 并手动添加 tableview 和搜索栏。有点额外的工作，但效果很好！

# c - Unix 使用 . 或者

> ID：13750089
> 
> 赞同：1
> 
> 时间：2012-12-06T18:26:42.920
> 
> 标签：c, unix, filesystems

我的任务是在 C 中使用 inode 实现 Unix 命令`pwd`。我已经弄清楚如何递归返回，直到 '..' 的 inode 与 '.' 的 inode 相同。我现在遇到的问题是我不知道如何获取'..'的目录名称。使用 stat 结构，我可以获取有关文件的所有信息，例如大小、inode 等，但我需要获取文件，以便使其输出如下内容：

```
/home/GONZAGA/tcosentino/documents/OS 
```

如何获取这些目录名称？

我有 stat 结构，所以到目前为止它可以打印出来：

```
[tcosentino@ada2 OS]$ ./a.out .
filename: .
 device: 64768
 inode: 55804237
 protection: 40755
 number of hard links: 5
 user ID of owner: 81963576
 group ID of owner: 501
 device type (if inode device): 0
 total size, in bytes: 4096
 blocksize for filesystem I/O: 4096
 number of blocks allocated: 8
 time of last access: 1354817261 : Thu Dec  6 10:07:41 2012
 time of last modification: 1354817249 : Thu Dec  6 10:07:29 2012
 time of last change: 1354817249 : Thu Dec  6 10:07:29 2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-28T22:59:21.663

简单粗暴的查找当前目录名称的方法是，您必须找到父目录的名称，然后扫描父目录中列出的名称以找到具有相同 inode 编号的名称，然后设备号作为当前目录。如何找到父目录的名称？嗯，......你递归目录树，当你到达系统的根目录时停止，这是 inode 号和设备号`..`与 for 相同的位置`.`。

请注意，这是一种头脑简单的方法。如果当前目录是 NFS 挂载的并且有很多主目录需要自动挂载，那么它可能会产生极其糟糕的性能。因此，必须有另一种方法可以在不触发自动挂载等的情况下做到这一点，但我还没有调查过那是什么。

我确实有具有毁灭性性能的代码，1987 年的 1.1 版，2008 年的 2.5 版（它在 Mac OS X 10.10.1 上编译，虽然我认为它失败了，但仔细检查表明它运行正确，但我误解了打印输出; 2.6 版将有更清晰的打印，所以我不会再混淆）。

# inno-setup - InnoSetup (Pascal): FileExists() 没有找到每个文件

> ID：13750090
> 
> 赞同：4
> 
> 时间：2012-12-06T18:26:43.267
> 
> 标签：inno-setup

似乎，我想用 FileExists() 检查的一些文件即使在那里也永远找不到，而其他文件每次都能找到。

如果我将文件“driver.sys”放入“C:\Windows\System32\drivers\”目录中，将永远找不到（每次调用该函数时 FileExists 都是错误的）。如果我将文件移动到 Windows 根目录“C:\Windows\”中，就会找到它。

这不起作用（虽然文件肯定在文件夹'C:\Windows\System32\drivers\'中）：

```
function isNotDriverInstalled(): Boolean;
begin
  if (FileExists('C:\Windows\System32\drivers\driver.sys')) then begin
    Log('File exists');
    Result := False;
  end else begin
    Log('File doesn''t exist');
    Result := True;
  end;
end; 
```

这有效（当文件位于文件夹 'C:\Windows\' 中时）：

```
function isNotDriverInstalled(): Boolean;
begin
  if (FileExists('C:\Windows\driver.sys')) then begin
    Log('File exists');
    Result := False;
  end else begin
    Log('File doesn''t exist');
    Result := True;
  end;
end; 
```

顺便说一句：我使用的是 Windows 7、64 位。

有没有人经历过这样的案例？有什么建议么？

提前谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T20:34:45.040

由于 ，您的`System32`目录被映射到`SysNative`路径[`File System Redirector`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)，因此如您所见，对此类目录路径进行硬编码并不容易。更好地使用下面列出的内置常量之一：

***1\. {sys} 常量：***

您可以使用该[`{sys}`](http://jrsoftware.org/ishelp/topic_consts.htm#sys)常量，但请确保您允许安装程序在 64 位模式下运行。有关如何执行此操作的更多信息，请参阅[`ArchitecturesInstallIn64BitMode`](http://jrsoftware.org/ishelp/topic_setup_architecturesinstallin64bitmode.htm)指令参考并确保阅读该[`64-bit Installation Limitations`](http://jrsoftware.org/ishelp/topic_64bitlimitations.htm)主题。

从[`{sys}`](http://jrsoftware.org/ishelp/topic_consts.htm#sys)不断的参考：

> 系统的 System32 目录。例如：如果您在某个条目上使用了 {sys}\CTL3D32.DLL，并且系统的 Windows 系统目录为“C:\WINDOWS\SYSTEM”，则安装程序或卸载程序会将其转换为“C:\WINDOWS\SYSTEM\CTL3D32.DLL ”。
> 
> 在 64 位 Windows 上，默认情况下，此常量返回的 System32 路径映射到包含 32 位系统文件的目录，就像在 32 位 Windows 上一样。（这可以通过启用 64 位模式来覆盖。）

以下是如何使用它：

```
if FileExists(ExpandConstant('{sys}\drivers\driver.sys')) then
  Log('File exists'); 
```

***2\. {syswow64} 常量：***

从[`{syswow64}`](http://jrsoftware.org/ishelp/topic_consts.htm#syswow64)不断的参考：

> 在 64 位 Windows 上，系统的 SysWOW64 目录，通常为“C:\WINDOWS\SysWOW64”。这是 32 位系统文件所在的实际目录。在 32 位 Windows 上，32 位系统文件位于“System32”或“System”中，而不是位于单独的 SysWOW64 目录中，因此如果在那里使用此常量将解析为与 {sys} 相同的目录。
> 
> 不要使用此常量，除非您有特定需要获取 32 位系统文件所在的实际目录的名称。在 {sys} 足够的地方无偿使用 {syswow64} 可能会导致问题。（例如，请参阅 [Files] 部分的 sharedfile 标志的文档。）

以下是如何使用它：

```
if FileExists(ExpandConstant('{syswow64}\drivers\driver.sys')) then
  Log('File exists'); 
```

# sql - 列出所有员工正在从事某些项目的部门名称

> ID：13750091
> 
> 赞同：0
> 
> 时间：2012-12-06T18:26:49.153
> 
> 标签：sql, oracle11g

列出所有员工正在从事某些项目的部门名称。Namly，不存在一个这样做的员工是完整的问题。我很难得到这个问题的实际答案，我的教授也没有帮助告诉我我做错了什么。我的代码是

```
select dname
from division d, employee e, workon w
where e.did = d.did
and w.empid = e.empid
and not exists
(select empid
from workon
group by empid
having count (empid) >= all(select e.empid
from employee ee
where e.did = ee.did
group by ee.empid))
group by dname 
```

我的桌子是

员工

```
| EMPID |  NAME | SALARY | DID |
--------------------------------
|     1 | kevin |  32000 |   2 |
|     2 |  joan |  46200 |   1 |
|     3 | brian |  37000 |   3 |
|     4 | larry |  82000 |   5 |
|     5 | harry |  92000 |   4 |
|     6 | peter |  45000 |   2 |
|     7 | peter |  68000 |   3 |
|     8 | smith |  39000 |   4 |
|     9 |  chen |  71000 |   1 |
|    10 |   kim |  46000 |   5 | 
```

分配

```
| DID |                    DNAME | MANAGERID |
----------------------------------------------
|   1 |              engineering |         2 |
|   2 |                marketing |         1 |
|   3 |           human resource |         3 |
|   4 | Research and development |         5 |
|   5 |               accounting |         4 | 
```

从事于

```
| PID | EMPID | HOURS |
-----------------------
|   3 |     1 |    30 |
|   2 |     3 |    40 |
|   5 |     4 |    30 |
|   6 |     6 |    60 |
|   4 |     3 |    70 |
|   2 |     4 |    45 |
|   5 |     3 |    90 |
|   3 |     3 |   100 |
|   6 |     8 |    30 |
|   4 |     4 |    30 |
|   5 |     8 |    30 |
|   6 |     7 |    30 |
|   6 |     9 |    40 |
|   5 |     9 |    50 |
|   4 |     6 |    45 |
|   2 |     7 |    30 |
|   2 |     8 |    30 |
|   2 |     9 |    30 |
|   1 |     9 |    30 |
|   1 |     8 |    30 |
|   1 |     7 |    30 |
|   1 |     5 |    30 |
|   1 |     6 |    30 |
|   2 |     6 |    30 | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:09:59.673

你很亲密。您正在尝试做的事情称为“相关子查询”。您将正在查询的表中的键与查询中的键相关联，该键对候选集没有贡献，但在 where 子句中充当过滤器。

演示这一点的代码中的关键行是 NOT EXISTS 子句中的行：

```
e.did = ee.did 
```

与其尝试通过比较聚合的 COUNT(...) 结果来执行此操作，不如在 Employee 和 Workon 表之间进行外部连接以找出是否有任何员工没有做任何事情，然后根据这些员工找到您的部门给定部门不存在。

这是使用 Oracle 标准 HR 示例教程表的示例查询，表示与此处相同的连接条件。无论您在何处运行查询，您都可能可以访问这些表，这里任何可能对答案感兴趣的人也应该如此，这样他们就可以运行查询，而无需构建您的表来处理答案。将查询转换为您的表是一件相对简单的事情，所以我将把这个练习留给您！:)

下面我的查询中最后大写的行是使该查询成为相关子查询的连接条件，就像您尝试在您的查询中所做的那样。

```
select
    *
from
    hr.departments d
where
    not exists
    (
        select
             ee.employee_id
            ,ee.first_name
            ,ee.last_name
            ,dd.department_id
            ,dd.department_name
            ,jj.job_id
        from
             hr.employees   ee
            ,hr.departments dd
            ,hr.job_history jj
        where
                ee.department_id = dd.department_id
            and ee.employee_id   = jj.employee_id   (+)
            and jj.job_id is null

            AND D.DEPARTMENT_ID = DD.DEPARTMENT_ID
    ) 
```

# wireshark - 如何使我的解剖器与其他版本相关

> ID：13750103
> 
> 赞同：0
> 
> 时间：2012-12-06T18:27:41.147
> 
> 标签：wireshark, wireshark-dissector

我为我的 WireShark 版本构建了一个解剖器（在完成安装 cygwin 等所有步骤以构建 WireShark 之后）。现在，我的解剖器仅适用于我构建的 WireShark（版本 1.9 ...），而不适用于我可以从 www.wireshark.org 下载的最新 WireShark 版本 1.8.4。

我看到可以创建我的版本的安装程序，我可以传播它，然后我的解剖器也可以为其他人工作......

但我想问是否有可能通过在某个地方更改版本来使我的解剖器与其他/旧版本的 WireShark 相关，这些版本是官方版本。

提前谢谢。

编辑：我尝试下载 1.8 源代码，构建它，然后构建我的解剖器......但官方 1.8 版本无法识别它：

“无法加载模块 C:\Program Files\Wireshark\plugins\1.8.3\mydissector.dll: `C:\Program Files\Wireshark\plugins\1.8.3\mydissector.dll': %1 无效Win32 应用程序。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:07:21.433

唔。我能说的最好的方法是获取代码的 SVN 修订版 45260（关于如何，请参阅 Stack Overflow 问题*[Checkout a specific revision from subversion from the command line](https://stackoverflow.com/questions/1429034/checkout-a-specific-revision-from-subversion-from-command-line)*），然后再次编译你的插件（如果你想检查 SVN 修订版图选择一个不同的版本。您可以通过右键单击文件夹并查看 TortoiseSVN 选项来执行此操作）。我只是下载了 1.8 的源，它似乎太短（291 MB），它给了我同样的问题，我不太确定使用它是否是正确的。

还要确保您使用[Visual C++](http://en.wikipedia.org/wiki/Visual_C%2B%2B#32-bit_versions) 2010 进行编译。

我注意到您在 ask.wireshark 论坛中提出了同样的问题。那里可能会提供更好的解决方案。

# java - 鼠标悬停时如何保持可见的工具提示？

> ID：13750104
> 
> 赞同：0
> 
> 时间：2012-12-06T18:27:44.393
> 
> 标签：java, user-interface, tooltip, visibility, jtooltip

`JToolTip`当鼠标悬停在拥有它的组件或工具提示本身上时，有什么方法可以保持可见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:33:24.310

你有没有尝试使用 setToolTipText() 方法。这里的 btnNext 是 JButton。

```
btnNext.setToolTipText("Next");
ToolTipManager.sharedInstance().setDismissDelay(Integer.MAX_VALUE); 
```

# algorithm - 如何将可变长度字符串转换为 16 个字符的字符串？

> ID：13750109
> 
> 赞同：0
> 
> 时间：2012-12-06T18:28:02.520
> 
> 标签：algorithm, hash

我需要将长度为 60 - 100 个字符的可变长度字符串转换为 16 个字符的唯一字符串。请注意，输入也将是唯一的。我可以使用一些现有的哈希算法吗？或者还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:32:59.337

可变长度 60 字符串唯一可以比 16 长度字符串多得多。

所以一个通用的、好的算法是不可能的。就像从每个唯一的字母（az）生成一个数字（0-9）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:39:44.503

根据鸽巢原理，哈希函数没有唯一的输出。如果您实际上有少于 < 2^16 个不同的输入，这是*可能的*，但这不是我所知道的任何散列函数的设计目标，您必须在了解*所有*输入的情况下创建散列函数。所以你必须模仿它。合理有效的最简单方案似乎是：

*   保持从输入字符串到整数的关联数组
*   散列字符串时，在关联数组中查找
    *   如果在关联数组中，则返回关联值
    *   否则，让`map[input] = map.entry_count()`并返回

这会为每个输入分配一个唯一的整数，并在 O(1) 预期时间或 O(log n) 时间内进行散列，但这需要一些空间。然后，如果必须，您可以将此整数转换为字符串，例如使用 base64 编码、十六进制表示法，或者通过将其解释为某种字符编码中的字符串（尽管您必须注意以有效字符串结尾）。这些中的每一个都为您提供了超过 10^16 个结果，并且使字符串不太可能与数字混淆。

# git - Git 推送 - Heroku 和 BitBucket

> ID：13750112
> 
> 赞同：3
> 
> 时间：2012-12-06T18:28:07.683
> 
> 标签：git

我推送更改，它说它提交它们。我使用 heroku run python ，它仍然使用旧代码。

我如何让它提交给 Heroku？

我已经检查过了`git remote -v`，它说 - 这是正确的 - 有两个遥控器 - 一个给 BitBucket，一个给 Heroku - 但是为什么 Heroku 不更新更改。

我可以更新更改的唯一方法是使用`git push heroku master`这需要很多时间。有没有更快的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T00:22:41.850

创建包含两个位置的第三个遥控器。

```
git remote add all ssh://git@bitbucket.org/bitbucketusername/bitbucketreponame.git
git remote set-url --add all git@heroku.com:yourherokuappname.git
git push all master 
```

# vb.net - 如何从新线程 vb.NET 网站更新 UI

> ID：13750115
> 
> 赞同：1
> 
> 时间：2012-12-06T18:28:16.047
> 
> 标签：vb.net, multithreading, web-applications

我的应用程序是这样工作的：

*   上传 Excel 文件 + 转换为`DataTable`
*   开始新线程
*   开始循环`DataTable`
    *   **更新 UI ( `Label`) 以显示“正在处理 [n] 的 [i] 行”**
    *   下一个
*   结束循环

粗体是我做不到的。我在网上四处寻找从工作线程更新 UI 元素，但我能找到的所有结果似乎都是针对 Windows 窗体，而不是 Web 项目。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:10:24.190

是的，你可以做到，实际上并不难。您可以使用 ajax 工具箱轻松完成。只需使用更新面板，并更新进度。

检查[http://ajaxcontroltoolkit.codeplex.com/](http://ajaxcontroltoolkit.codeplex.com/)

一个例子：[http ://www.asp.net/ajax/documentation/live/overview/updateprogressoverview.aspx](http://www.asp.net/ajax/documentation/live/overview/updateprogressoverview.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:13:48.790

我找到了使用 jQuery AJAX 和 asp.NET`WebMethod`以及会话变量的解决方法。

我使用了我之前的一个[问题](https://stackoverflow.com/questions/9540957/jquery-ajax-loop-to-refresh-jqueryui-progressbar)中的一种方法，方法是`WebMethod`检查由工作线程更新的 Session 变量。

工作线程：

```
Session["progress"] = "{\"current\":" + (i + 1) + ", \"total\":" + dt.Rows.Count + "}" 
```

网络方法：

```
[WebMethod]
public static string GetProgress()
    if (HttpContext.Current.Session["progress"] == null) {
        return "{\"current\":1,\"total\":1}";
    } else {
        return HttpContext.Current.Session["progress"];
    }
} 
```

我的 jQuery 基本上每秒循环调用该 AJAX WebMethod。它将在页面加载时开始，如果`current = total`然后它将显示“已完成”并清除循环，否则将显示“正在处理 [total] 的 [current] 行”。我什至添加了一个[jQuery UI 进度条](http://jqueryui.com/progressbar/)

这是一种手动解决方案，但它解决了我的问题，而且开销很小。一个意想不到但不错的部分是，由于它使用 Session 变量，并且 WebMethod 检查页面加载，如果工作线程处于活动状态，那么即使您离开并返回页面，进度条也会显示。

# cocoa - 如何使 NSWindow 中的按钮在工作表上时可点击

> ID：13750117
> 
> 赞同：5
> 
> 时间：2012-12-06T18:28:23.943
> 
> 标签：cocoa, themes, nsview, nswindow, appkit

我创建了一个自定义（主题）NSWindow，方法是创建一个无边框窗口，然后在内容视图内重新创建窗口边框/背景的所有元素。我使用 -standardWindowButton:forStyleMask: 在我自己的假标题栏顶部创建了窗口小部件（关闭框、缩放框、最小化框）。

麻烦的是，当在我的自定义窗口顶部显示工作表时（例如“保存更改...”，这些按钮不会收到点击。

有人知道我如何告诉 NSWindow 不要拦截最小化框中的点击吗？它适用于标准的 NSWindow。当一张表打开时，我仍然可以将它们都发送到扩展坞，或者缩小窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:33:56.607

我认为内容视图中可能有特殊代码会在工作表启动时忽略子视图中的点击。但似乎 -hitTest:在内容视图上调用并返回最小化小部件，但小部件的操作从未被触发*。*

我想我可以替换内容视图并在内容视图的 hitTest 中执行操作，如果它是最小化小部件......但这看起来有点难看。

# r - 如何使用 summary() 强制数字变量在 r 中读取为分类？

> ID：13750120
> 
> 赞同：3
> 
> 时间：2012-12-06T16:14:29.710
> 
> 标签：r, modeling

我有 x = 1,2,3,4 这是我的分类变量，但是当我使用 summary() 时，它会自动认为这是离散的：所以我会得到这样的东西

最小 : 1st Qu.: 中位数 :

* * *

但我想要的是在 summary() 中只给我这个变量的频率

1：2：3：4：

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T16:23:58.187

```
> x <- seq(1:10)

> summary(as.factor(x))
 1  2  3  4  5  6  7  8  9 10 
 1  1  1  1  1  1  1  1  1  1 
```

或者，如果您想将 x 永久分配为名为 mydata 的数据框中的分类变量，请在`summary()`调用之前执行以下操作：

```
mydata$x <- factor(mydata$x) 
```

（花一两个小时阅读 R[的许多书籍或在线介绍](https://stats.stackexchange.com/tags/r/info)中的任何一本，然后输入示例是一项明智的投资，可以节省大量时间。）

# google-maps - 在 Google Maps API v3 中计算折线（路线）和标记之间的距离

> ID：13750122
> 
> 赞同：4
> 
> 时间：2012-12-06T18:28:35.250
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

是否有任何方便的方法来计算折线（由谷歌方向生成的路线）和不在该折线上的标记之间的直接（最短）距离？

我发现的唯一方法是`Polyline.getPath()`手动循环遍历顶点以计算最短距离，但这似乎有点苛刻：

```
var path = routes[0].overview_path;

for (var i = 0; i < data.points.length; i++) {
    var latLngA = new LatLng(data.points[i].lat, data.points[i].lng);
    var shortest_distance = null;

    for (var j = 0; j < path.length; j++) {
        var distance = google.maps.geometry.spherical.computeDistanceBetween(latLngA, path[i]);

        if (shortest_distance == null || distance < shortest_distance) {
            shortest_distance = distance;
        }
    }

    console.log(data.points[i].point_title, shortest_distance);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:12:54.777

据我所知，Google Maps API 并没有为您提供轻松做到这一点的方法。不幸的是，您使用的算法不会给出准确的答案，因为它给出了从标记到路径上最近顶点的距离，而不是折线本身上的最近点，这通常不是点之一。

如果您真的需要准确的计算，我所知道的最佳选择是使用 Javascript Topology Suite ( [JSTS](https://github.com/bjornharrtell/jsts) )。JSTS 有大量的地理公式来计算这类事情。这意味着将从路线 API 返回的折线转换为 JSTS 对象并调用正确的实用程序函数。不是微不足道的，但也不是太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-17T14:30:08.843

使用 turf - 模块化地理空间分析引擎。 [https://turfjs.org/docs/](https://turfjs.org/docs/)

# php - Flash AS3 监控 PHP 脚本加载失败？

> ID：13750124
> 
> 赞同：1
> 
> 时间：2012-12-06T18:28:34.953
> 
> 标签：php, actionscript-3, flash, status

我正在制作一个 Flash+ActionScript3 程序，在某个时刻，它将通过调用 PHP 脚本将一些文本保存到我服务器上的文本文件中。我想确保我的程序说明了这个过程可能出现的失败。

我已经为 PHP 脚本实现了一种将状态消息发送回 Flash 的方法，关于 fwrite 操作是否成功（[请参见此处](https://stackoverflow.com/questions/13734969/flash-receiving-status-of-file-write-from-php "看这里")）。

但是如果 PHP 脚本一开始就无法加载怎么办？或者如果它挂起？（例如，假设用户的 Internet 连接暂时丢失。）我可以在 AS3 中采用什么方法来检查和处理这种情况？任何正确方向的建议或指示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:36:17.037

是的，就像伦敦所说的 IO_ERROR。我仍然将您的项目保存在我的桌面上。您可以执行以下操作：

```
varLoader.addEventListener(IOErrorEvent.IO_ERROR, onError);
function onError(evt:IOErrorEvent):void
{
    trace(evt);
} 
```

您可以通过禁用互联网连接来测试它

# mysql - 需要正确的数据库结构来减小大小

> ID：13750128
> 
> 赞同：3
> 
> 时间：2012-12-06T18:28:48.727
> 
> 标签：mysql, sql, database-design, entity-relationship

我想正确设计我的数据库。也许有人可以帮助我。

我有一个设备，它每 3 秒将大约 100 个键/值写入一个表。有人建议这样存储：

> ^ 时间戳 ^ key1 ^ key2 ^ [...] ^ key150 ^
> 
> | 2012 年 12 月 6 日 | 空 | 2243466 | [...] | 空^

但我认为那是完全错误的，不是动态的。因为我可以有很多空值。所以我尽力做到最好，并按照我在学校的学习方式设计它：http: //ondras.zarovi.cz/sql/demo/?keyword= [tempidi](http://ondras.zarovi.cz/sql/demo/?keyword=tempidi)

这是我为每个值编写时间戳的问题，这意味着在 100 个值内它将始终相同并产生大量数据。

有人可以给我提示如何减小数据库大小吗？我的 ERM 基本上是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:51:28.980

我不会太担心数据库的大小。您更大的问题是维护和灵活性。

这就是我要做的。首先，使用您的设备可以编写的可能键定义并填充此表：

```
tblDataKey
(
    ID int primary key (auto-increment - not sure how mysql does this)
    Name varchar(32)
) 
```

接下来定义一个“数据事件”表：

```
tblEvent
(
    ID int primary key (auto-inc)
    TimeStamp
    ...anything else you need - device ID's? ...
) 
```

然后将事件与键及其值匹配：

```
tblEventData
{
    EventID INT FK-to-tblEvent
    KeyID INT FK-to-tblDataKey
    DataValue varchar(???)
) 
```

现在，无论多少秒，您的数据都会在 tblEvent 中创建一个条目，并在 tblEventData 中创建多个条目，并根据需要使用键值。并非每个事件都需要每个键，将来您可以扩展键的数量。

这真的很闪耀，因为空间没有被浪费，您可以轻松地使用特定的数据键和值对 evnet 进行查询。当您需要生成事件和数据项的“交叉表式”表时，这种结构就会失败。你必须决定这是否有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:20:52.023

如果你*必须*在 MySQL 中实现一个键值对存储，让它比这更复杂是没有任何意义的。

```
create table key_value_store (
  run_time datetime not null,
  key_name varchar(15) not null,
  key_value varchar(15) not null,
  primary key (run_time, key_name)
); 
```

如果您的键和值的平均长度都是 10 字节，那么您每月查看大约 8600 万行和 2.5GB，并且您不需要任何连接。如果所有值（列 key_value）都是整数或浮点数，则可以更改数据类型并进一步减少空间。

在 SQL 中实现键值存储的主要问题之一是，除非所有值都是相同的数据类型，否则您必须对所有值使用类似 varchar(n) 的东西。你失去了类型安全和声明性约束。（您无法检查 key3 的值是否在 1 和 15 之间，而 key7 的值在 0 和 3 之间。）

* * *

**这可行吗？**

这种结构（称为“EAV”--Google 认为）是一种众所周知的表格设计反模式。部分问题在于您实际上是将列存储为行。（您将列名存储在 key_value_store.key_name 中。）如果您*必须*以普通表的格式写出数据，您会发现三件事。

1.  很难编写查询以输出正确的格式。
2.  它需要永远运行。如果您必须编写数百列，它可能永远无法完成。
3.  你会希望你有更快的硬件。快得多*的*硬件。

**我在寻找什么**

*   将键分组到逻辑表中的机会。这与第一个设计有关，它可能不适用于您。听起来您的应用程序基本上是在存储一个日志文件，并且您不知道每次运行时哪些键将具有值。
*   减少行数的机会。我会问，“我们能不能少写点？” 因此，我会考虑每 5 或 6 秒而不是每 3 秒写入一次数据库，假设这意味着我正在写入更少的行。（真正的目标是更少的行，而不是更少的写入。）
*   合适的平台。PostgreSQL 9.2 可能是一个更好的选择。9.2 版具有仅索引扫描，并且具有实现键值存储的 hstore 模块。

**在你决定之前测试**

如果我站在你的立场上，我会在 MySQL 和 PostgreSQL 中构建这个表。我会用大约一百万行随机数据加载每个。然后我会尝试一些查询和报告。（报告很重要。）衡量绩效。将负载增加到 1000 万行，重新调整服务器和 dbms，然后再次运行相同的查询和报告。再次测量。

重复 1 亿行。当你有信心时退出。预计这一切需要几天时间。

# printing - IE 10 打印表格元素时缺少边框段

> ID：13750134
> 
> 赞同：4
> 
> 时间：2012-12-06T18:29:29.530
> 
> 标签：printing, border, internet-explorer-10

因此，我一直在处理仅在 IE 10 中打印表格元素的问题，其中部分边框将丢失/截断。奇怪的是，它看起来只是 tbody 的第一行，并且只有该行的第一个和最后一个单元格受到影响。

到目前为止，我发现了一些东西：

1.  屏幕上的表格看起来还不错，但只有在打印时才会缺少边框。
2.  我在标准和怪癖模式下得到相同的行为。
3.  看起来它是使用边框折叠、单元格和表格元素上的边框以及使用 thead/tbody 的组合。如果我删除任何这些部分，边框将重新出现，一切看起来都应该如此。

这是我编写的显示问题的测试页面：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
    <style type="text/css">

        table {
                border-collapse: collapse; 
                 border: 2px solid black;
        }

        td {
                border: 1px solid black;
        }

        th {
                border: 1px solid black;
        }

    </style>
  </head>
  <body>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Date</th>
          <th>Type</th>
          <th>Champion</th>
          <th>Note</th>
        </tr>
      </thead>
              <tbody>
      <tr>
        <td>UI Team Meeting</td>
        <td>3/5/2013 1:00 PM</td>
        <td>User Interface</td>
        <td>John Doe</td>
        <td></td>
      </tr>
      <tr>
        <td>PM Meeting</td>
        <td>3/4/2013 10:00 AM</td>
        <td>PMs</td>
        <td>Jane Doe</td>
        <td></td>
      </tr>
              </tbody>
    </table>
  </body>
</html> 
```

那么有没有其他人以前见过这个并找到了解决方案？我什至找不到其他人谈论这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T01:45:27.577

我在 IE 9 中遇到了类似的问题。页面上第一个表格的第一行边框的上半部分不会出现在页面的纸质版本上。当我加载您的代码时，我看到了相同的症状。

`table`我通过将、`th`和的边界规则组合`td`成一个规则来解决我们的问题。这个技巧似乎也适用于您的，但这意味着外边框将与内边框大小相同：

```
 table {
            border-collapse: collapse; 
    }

    table, th, td {
            border: 1px solid black;
    } 
```

# c# - 正确设置属性但稍后出现错误的 foreach 循环

> ID：13750140
> 
> 赞同：1
> 
> 时间：2012-12-06T18:29:45.153
> 
> 标签：c#, asp.net-mvc, foreach

我对返回结果的数据库进行了查询，并且我有一个 IEnumerable 包含另一个 IEnumerable 并且在 Model Populator 中我做了类似的事情

```
List<Parent> parents = Result1;
List<Children> children = Result2; 
```

进而

```
foreach (parent p in parents)
{
 p.MyChildren = children.Where(x => x.ParentId == p.Id);
} 
```

到目前为止，我已经进行了调试，并且当我在循环期间以及在包含模型的最终模型中返回模型时，数据都是正确的。

然而，在控制器上，我得到了一个父母列表，他们都有相同的孩子集合，即使他们之前是正确的。这意味着每个父母在“MyChildren”中都有相同的随机集合，而不是属于他们的集合。

我的视图模型在任何地方都没有静态变量，也没有从模型到控制器的其他对象操作。

参考资料真的很奇怪，我不知道如何解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:08:33.303

在设置子项时尝试添加`ToList()`到右侧：

```
foreach (parent p in parents)
{
    var id = p.Id;
    parent.MyChildren = children.Where(x => x.ParentId == id).ToArray();
} 
```

的结果`Where`是`IEnumerable`，并且项目的实际检索被延迟。这意味着如果以后发生变化，`parent.MyChildren`就会发生变化。添加`ToArray()`强制枚举立即发生。

**根据Servy的评论更新**

您还必须创建（在上面更新）的本地（在`foreach`块内）副本。`p.Id`这个问题被称为“访问修改的闭包”更多信息：[例如。](https://stackoverflow.com/q/235455/1001985) 另请参阅[此处](https://stackoverflow.com/q/8898925/1001985)了解更多背景信息，包括 Eric Lippert 的回答，他将修改后的闭包描述为*C# 中最糟糕的“陷阱”之一*。

# c++ - 在此函数中传递参数并参考

> ID：13750141
> 
> 赞同：1
> 
> 时间：2012-12-06T18:29:46.123
> 
> 标签：c++

这是 .h 文件中的一项功能

```
LinkedListElement<char> * findLastNthElementRecursive(int n, int &current); 
```

尝试两者

```
findLastNthElementRecursive(3,0); 
```

和

```
int a = 0;
findLastNthElementRecursive(3,&a); 
```

错误是没有匹配的功能

我知道`findLastNthElementRecursive(3,a);`应该这样

但是如果我不想创建像 a 这样的新变量，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:30:48.053

临时不能绑定到非`const`引用。在您的第一种情况下，您尝试将临时文件作为参数传递，但它失败了。

第二个不起作用，因为`&a`它的地址`a`实际上是一个`int*`，因此与函数的签名不匹配。

正确的方法是

```
int a = 0;
findLastNthElementRecursive(3,a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:30:36.403

尝试：

```
int a = 0;
findLastNthElementRecursive(3, a); 
```

另请注意，您忽略了`findLastNthElementRecursive()`.

# c++ - C++ 图像处理 - 将图像文件读入二维数组

> ID：13750142
> 
> 赞同：11
> 
> 时间：2012-12-06T18:29:46.240
> 
> 标签：c++, image-processing, bmp

我是 C++ 的绝对菜鸟，因为我只熟悉 Java 编程。我想要做的是将图像文件（.bmp）读入一个矩阵，我可以在矩阵上执行一个 3x3 矩阵（过滤器）的卷积，以生成一个带有卷积图像的新图像文件。

我环顾了谷歌并设法提出了以下实现：

图片.h 文件：

```
//  Image.h

#include <fstream> // for file I/O

using namespace std;
typedef unsigned char unchar; // Easier to understand & code.

class MImage {

public:
    MImage(const char* fileName); //Constructor
    ~MImage(); //Deconstructor
    void write(const char* fileName);
    void smoothFilter(); //smoothing filer.
private:
    ifstream* pInFile; 
    ofstream* pOutFile;
    unchar imageHeaderData[1078]; //.bmp header data with offset 1078.
    unchar** imageData;
    unchar m_smoothFilter[3][3]; // Smoothing Filter.
    unchar**  filteredData;
}; 
```

图像.cpp 文件：

```
//  Image.cpp
//

#ifndef _Image_h
#define _Image_h
#define WIDTH 128
#define HEIGHT 128

#include "Image.h"
#include <cmath>

#endif

using namespace std;
typedef unsigned char unchar;

//Constructor

MImage::MImage(const char* fileName){

    imageData = new unchar* [HEIGHT]; // create new array size: height of image.
    filteredData = new unchar* [HEIGHT];// create new array size: height of image.

    for (int i = 0; i < HEIGHT; i++) {

        imageData[i] = new unchar [WIDTH]; //create matrix.
        filteredData[i] = new unchar [WIDTH]; //create matrix.
    }

    //image I/O
    pInFile = new ifstream;
    pInFile->open(fileName, ios::in | ios::binary); // open fileName and read as binary.
    pInFile->seekg(0, ios::beg); //pos filter at beginning of image file.
    pInFile->read(reinterpret_cast<char*>(imageHeaderData),1078); //read bmp header data into array.

    for(int i=0; i<HEIGHT; i++) {
        pInFile->read(reinterpret_cast<char*>(imageData[i]),WIDTH);//read row into each array entry.
    }

    pInFile->close(); //close stream.

    char m_smoothFilter[3][3] = {
                                 {1,1,1},
                                 {1,2,1},
                                 {1,1,1}
                                };

}

MImage::~MImage(){

    delete pInFile;
    delete pOutFile;

    for(int i=0; i<HEIGHT; i++){
        delete[] imageData[i];
        delete[] filteredData[i];
    }

    delete[] imageData;
    delete[] filteredData;
}

void MImage::write(const char* fileName) {

    smoothFilter();
    pOutFile = new ofstream;
    pOutFile->open(fileName, ios::out | ios::trunc | ios::binary);
    pOutFile->write(reinterpret_cast<char*>(imageHeaderData), 1078); //write header data onto output

    for(int i = 0; i < HEIGHT; i++){

        pOutFile->write(reinterpret_cast<char*>(filteredData[i]),WIDTH); // write new image data.

    }

    pOutFile->close(); //close stream
}

void MImage::smoothFilter(){

    //copy input image into new image
    for(int i = 0; i < HEIGHT; i++) {
        strcpy(reinterpret_cast<char*>(filteredData[i]), reinterpret_cast<char*>(imageData[i]));
    }

    int sumOfPixels = 0;

    for(int i = 1; i < HEIGHT -1; i++) {

        for(int j = 1; j < WIDTH -1; j++) {

            sumOfPixels = m_smoothFilter[0][0] * imageData[i+1][j-1] + // top left corner
                          m_smoothFilter[0][1] * imageData[i+1][j]   + // top center
                          m_smoothFilter[0][2] * imageData[i+1][j+1] + // top right corner
                          m_smoothFilter[1][0] * imageData[i][j-1]   + // center left
                          m_smoothFilter[1][1] * imageData[i][j]     + // center center
                          m_smoothFilter[1][2] * imageData[i][j+1]   + // center right
                          m_smoothFilter[2][0] * imageData[i-1][j-1] + // bottom left corner
                          m_smoothFilter[2][1] * imageData[i-1][j]   + // bottom center
                          m_smoothFilter[2][2] * imageData[i-1][j+1];  // bottom right corner

            filteredData[i][j] = (sumOfPixels / ( m_smoothFilter[0][0] + m_smoothFilter[0][1] +
                                                  m_smoothFilter[0][2] + m_smoothFilter[1][0] +
                                                  m_smoothFilter[1][1] + m_smoothFilter[1][2] +
                                                  m_smoothFilter[2][0] + m_smoothFilter[2][1] +
                                                 m_smoothFilter[2][2]));
        }
    }

} 
```

Main.cpp 文件：

```
//
//  Main.cpp
//

#include <iostream>
#include "Image.cpp"
#include <fstream>

using namespace std;

int main() {

    MImage img("test.bmp");
    img.write("output.bmp");
    return 0;

} 
```

当我尝试使用以下文件运行以下文件时：

```
g++ Main.cpp -o main

./main 
```

我得到一个分段：11 错误，但不确定是什么导致了这个错误！

**注意：我必须使用纯 C++ 实现，所以不能使用其他库。**

帮助！

编辑：我认为给我分段错误的代码是：

```
for(int i = 0; i < HEIGHT; i++) {
        strcpy(reinterpret_cast<char*>(filteredData[i]), reinterpret_cast<char*>(imageData[i]));
} 
```

但不知道为什么！

编辑#3：将上面的代码替换为：

```
for(int i= 0; i<HEIGHT; i++) {
        strncpy (reinterpret_cast<char*>(filteredData[i]), 
                 reinterpret_cast<char*>(imageData[i]), 
                 sizeof(reinterpret_cast<char*>(filteredData[i])));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:58:24.320

取而代之`strcpy()`的`strncpy()`是显然更安全并且消除了分段错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-21T22:21:37.360

在主函数中包含“Image.cpp”并且应该有“Image.h”，否则编译器会识别头文件中已经定义的函数的另一个定义

# java - 根据文本更改 TextView 颜色

> ID：13750146
> 
> 赞同：0
> 
> 时间：2012-12-06T18:30:07.707
> 
> 标签：java, android, textview, ondraw

使用 onDraw，我想创建一个自定义文本视图，根据其文本值更改颜色。例如，如果文本值为“hello”，我希望它是红色的，如果它说“bye”，我希望它是绿色的。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:50:38.330

我不一定确定你为什么要在`onDraw()`. 除非您有充分的理由设置自定义`TextView`/ `EditText`，否则没有必要。

**为了简化您的情况**，您可以实现 a`TextWatcher`来执行此操作，并且在 中`onTextChanged()`，您可以通过使用 比较字符串值来设置颜色`.equals()`。

这是您的理论情况的示例：

```
final EditText yourEditText = /* findViewById maybe? */;
yourEditText.addTextChangedListener(new TextWatcher() {
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if (s.equalsIgnoreCase("hello"))
            yourEditText.setTextColor(Color.RED);
        else if (s.equalsIgnoreCase("bye"))
            yourEditText.setTextColor(Color.GREEN);
        else // if it says neither "hello" nor "bye"
            yourEditText.setTextColor(Color.BLACK);
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // Nothing needs to happen here
    }

    public void afterTextChanged(Editable s) {
        // Nothing needs to happen here
    }
}); 
```

**如果您觉得有必要在 中维护它`onDraw()`**，只需从 中提取代码`onTextChanged()`并更改`yourEditText`为`this`，或者将其放在构造函数中：

```
public class YourTextView extends TextView { // Or extends EditText, doesn't matter
    public YourTextView(Context context) {
        this(context, null, 0);
    }

    public YourTextView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public YourTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        addTextChangedListener(new TextWatcher() {
            // Copy the TextWatcher code from the example above, replacing "yourEditText" with "YourTextView.this"
        });
    }

    // ... Rest of your class
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:40:18.450

我想出了如何使用 onDraw 以更有创意的方式做到这一点。

```
public class MagnitudeTextView extends TextView {

public MagnitudeTextView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public MagnitudeTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public MagnitudeTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
}

/*
 * (non-Javadoc)
 * 
 * @see android.widget.TextView#onDraw(android.graphics.Canvas)
 */
@Override
protected void onDraw(Canvas canvas) {

    int height = getMeasuredHeight();
    int width = getMeasuredWidth();

    int px = width / 2;
    int py = height / 2;

    Paint Red = new Paint(Paint.ANTI_ALIAS_FLAG);
    Red.setColor(Color.RED);

    Paint White = new Paint(Paint.ANTI_ALIAS_FLAG);
    White.setColor(Color.DKGRAY);

    Paint Yellow = new Paint(Paint.ANTI_ALIAS_FLAG);
    Yellow.setARGB(210, 105, 30, 0);

    Paint Blue = new Paint(Paint.ANTI_ALIAS_FLAG);
    Blue.setColor(Color.BLUE);

    float textWidth = Red.measureText(String.valueOf(getText()));

    String g = String.valueOf(getText());
    if (g.startsWith("3") || g.startsWith("4")) {
        canvas.drawText(String.valueOf(getText()), px - textWidth / 2, py,
                White);
    }

    if (g.startsWith("6") || g.startsWith("5") || g.startsWith("7")
            || g.startsWith("8")) {
        canvas.drawText(String.valueOf(getText()), px - textWidth / 2, py,
                Yellow);
    }

    if (g.startsWith("9") || g.startsWith("10")) {
        canvas.drawText(String.valueOf(getText()), px - textWidth / 2, py,
                Red);
    }
    // super.onDraw(canvas);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:37:28.117

您可以覆盖 setText() 并使用 setTextColor() 设置颜色。

您也可以在 onDraw 中执行此操作，但这不值得，因为它可能会在 onDraw 中多次传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:38:11.203

使用它来获取文本：

```
TextView text = (TextView)findViewById(R.id.textid);
String value = text.getText().toString(); 
```

然后检查文本是什么并更改颜色：

```
if (value.equals("hello")) {

    text.setBackgroundColor(yourcolor);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T18:40:33.387

您可以实现 TextWatcher 并使用`onTextChanged()`

在[Android Docs中了解更多信息](http://developer.android.com/reference/android/text/TextWatcher.html)

# php - 搜索数据库时出现 PHP/MySQL 错误

> ID：13750149
> 
> 赞同：1
> 
> 时间：2012-12-06T18:30:32.270
> 
> 标签：php, mysql

我有一个 MySQL 错误，我无法弄清楚......它正在工作，现在它不再工作了（我没有对数据库做任何事情）。

这是查询：

`$querySearch = "SELECT * FROM cars WHERE (price >= {$startPrice} AND price <= $endPrice) AND condition = '{$condition}'";`

这是表格：

```
<h3>Condition:</h3>
<span class="searchRange">
<select name="condition" class="condition">
    <option value="any">Any Condition</option>
    <option value="Brand New">Brand New</option>
    <option value="Near New">Near New</option>
    <option value="Good">Good</option>
    <option value="Ok">Ok</option>
    <option value="Poor">Poor</option>
</select>
</span> 
```

下面是 PHP 接收数据的方式：

`$condition = mysql_prep($_POST['condition']);`

`mysql_prep()`是一个用户制作的函数，它只处理魔术引用的东西。

任何人都看到哪里可能发生错误？

> 错误：数据库查询失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'condition = 'Near New'' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T18:33:28.870

条件是[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

用反引号括起来。

```
AND `condition` = 
```

# mysql - 使用关键字与 ON 子句 - MYSQL

> ID：13750152
> 
> 赞同：54
> 
> 时间：2012-12-06T18:30:44.983
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL ON vs USING？](https://stackoverflow.com/questions/11366006/mysql-on-vs-using)

查询一：

```
SELECT *
FROM users
JOIN orders ON (orders.user_id = users.user_id)
WHERE users.user_id = 1; 
```

查询 2：

```
SELECT *
FROM users
JOIN orders USING (user_id)
WHERE user_id = 1; 
```

我想加入订单和用户表以获取某些数据。它工作正常。我的问题是因为两个查询都输出相同的结果集，是一样的吗？使用哪一种效率更高？哪一个对性能好？哪一个是最佳实践？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-06T18:47:05.560

当我们从多个表中检索数据时，该`USING`子句是我们不需要在条件中提及的内容。`JOIN`当我们使用`USING`子句时，该特定列名应该出现在两个表中，并且`SELECT`查询将使用`USING`子句中给定的列名自动连接这些表。

例如，如果表中有两个公共列名，则在`USING`子句中提及所需的公共列名。

`USING`在执行动态 SQL 时也会使用，如下所示：

```
EXECUTE IMMEDIATE 'DELETE FROM dept WHERE deptno = :num'
  USING dept_id; 
```

*   子句：这`USING`允许您按名称指定连接键。

*   子句：此语法允许您为两个表中的`ON`连接键指定列名。

**USING 子句**

> `USING`如果多个列共享相同的名称但您不想使用所有这些公共列连接，则使用该子句。USING 子句中列出的列在语句中不能有任何限定符，包括 WHERE 子句。

**ON 子句**

> 该`ON`子句用于连接两个表中列名不匹配的表。连接条件从 WHERE 子句中的过滤条件中删除。

# c# - .NET 4.0 互操作字符串

> ID：13750153
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:30:45.640
> 
> 标签：c#, .net, interop

我正在使用 DLLImport 将一些函数从我的非托管 DLL 加载到 C# 中，并`CharSet = CharSet.Ansi`用于字符串。

当我使用 .NET 3.5 编译项目时，字符串看起来很好。但是，当我使用 .NET 4.0 进行编译时，我的字符串似乎具有错误的字符集。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:38:34.293

但是，我不确定您看到的问题是什么 - 请记住，C# 和 Visual Basic 的默认值已经是，而`CharSet.Ansi`C++ 的默认值是`CharSet.None`，相当于`CharSet.Ansi`. 所以你的声明是不必要的。

也许在不明确定义 CharSet 的情况下尝试一下，看看会发生什么。

你也可以试试`CharSet.Auto`，它会尝试自动选择正确的字符集

# freemarker - Freemarker - 用 & 替换 &

> ID：13750160
> 
> 赞同：2
> 
> 时间：2012-12-06T18:31:19.563
> 
> 标签：freemarker

如果我`&`在某个字段中有符号（来自 db，无法更改），并且我想通过 freemarker 显示它...但是读取显示（来自 freemarker）`&amp;`，这样做的方法是什么？

重申一下，我不能事先更改值（或者至少，我不想），我希望 freemarker “取消标记”＆。

重复一遍，这是一个与*许多*其他 xml 一起放置的值。值本身是独立显示的，被标签包围......所以像

```
<someTag>${wheeeMyValueWithAnAmpersand}<someTag> 
```

结果，我不希望*所有*的 & 符号都被转义，否则 xml 会看起来很有趣......只是插值中的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:04:15.773

我的天啊。

我看到了问题：代码是这样写的：

```
<#escape x as x?xml>
<#import "small.ftl" as my>
<@my.macro1/>
</#escape> 
```

并且我假设 excape 将 excape 中的所有调用 - 这当然是文档所暗示的

[http://freemarker.org/docs/ref_directive_escape.html](http://freemarker.org/docs/ref_directive_escape.html)

```
<#assign x = "<test>"> m1>
  m1: ${x}
</#macro>
<#escape x as x?html>
  <#macro m2>m2: ${x}</#macro>
  ${x}
  <@m1/>
</#escape>
${x}
<@m2/> 
```

> 输出将是：

```
&lt;test&gt;
m1: <test>
<test>
m2: &lt;test&gt; 
```

*但是，当您导入*文件时，情况似乎并非如此，并且转义...转义！

解决方案： [http ://watchitlater.com/blog/2011/10/default-html-escape-using-freemarker/](http://watchitlater.com/blog/2011/10/default-html-escape-using-freemarker/)

上面的链接详细说明了如何解决问题。实际上，它归结为加载不同的 FreemakerLoader，它使用转义标记包装所有模板。

```
class SomeCoolClass implements TemplateLoader {
    //other functions here
    @Override  
    public Reader getReader(Object templateSource, String encoding) throws IOException {  
        Reader reader = delegate.getReader(templateSource, encoding);  
        try {  
            String templateText = IOUtils.toString(reader);  
            return new StringReader(ESCAPE_PREFIX + templateText + ESCAPE_SUFFIX);  
        } finally {  
            IOUtils.closeQuietly(reader);  
        }  
    } 
```

这是上面链接的一个片段。您使用现有的 templateLoader 创建类，并将所有必需的方法推迟到该类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-23T17:48:51.933

从 FreeMarker 2.3.24 开始，`TemplateLoader`不再需要“hack”。有一个名为 的设置`output_format`，它指定是否需要转义以及需要转义的内容。这可以在全局和/或使用该`template_configurations`设置的每个模板名称模式下进行配置。这样做的推荐方法更简单（来自手册）：

> [...] 如果 `recognize_standard_file_extensions`设置为`true`（默认`incompatible_improvements`设置为 2.3.24 或更高版本），源名称以“.ftlh”结尾的模板将获得“HTML”输出格式，而那些以“.ftlx”结尾的模板获取“XML”输出格式

# ejb-3.0 - Glassfish 3.1.2 - 了解 EJB (MDB) 线程池

> ID：13750164
> 
> 赞同：2
> 
> 时间：2012-12-06T18:31:35.593
> 
> 标签：ejb-3.0, threadpool, glassfish-3

我有一个接收消息以处理批处理（BatchProcessor）的 MDB。BatchProcessor 不会一次处理批处理中的一个项目，而是创建一个 BatchItemProcessor 并使用 Semaphore 将允许一次同时处理最大数量的项目。BatchItemProcessors 是无状态会话 bean，由 Glassfish 容器注入。

每当我们完成处理带有状态的批处理项目时，我们都需要向另一个服务发送 SOAP 消息。BatchItemProcessor 创建/发送消息到 JMS 主题。我们有另一个 MDB，StatusSender，它侦听此消息并创建/发送 SOAP 消息到其他服务。

问题在于，只有在 BatchProcessor 调度了所有批处理项之后，才会发送 SOAP 消息。

查看日志，BatchItemProcessors 是在 EJB 线程池中创建的（例如，来自日志的名称：），`__ejb-thread-pool10`而 BatchProccessor 和 StatusSender 是在 Glassfish MDB 线程池中创建的（例如，来自日志的名称：）`p: thread-pool-1; w: 39`。

我假设（因为我找不到确认/拒绝`p: thread-pool-1;`的文档）识别池和`w: 39`实际线程。如果这是真的，那么 BatchProcessor 使用与 StatusSender 完全不同的线程，因为线程标识符不同（一个用于 BatchProcess，多个用于 StatusSender）。

这意味着我真的很困惑为什么 BatchProcessor onMessage 必须在 StatusSender onMessage 调用可以执行之前完成。

查看我的 Glassfish EJB 容器/MDB 设置配置（默认配置和服务器配置），我有以下内容（我认为这是默认设置）：

*   初始和最小池大小 = 0
*   最大池大小 = 32
*   池调整数量 = 8
*   空闲超时 = 600

如果有人打电话帮助我解决这个问题，将不胜感激。此外，对于好的资源（书籍、网站等）的任何建议也将不胜感激。

**更新**

我的问题与一些导致 StatusSender onMessage 执行延迟的代码逻辑有关。但是，我仍然希望有任何关于 Glassfish 和线程/池的良好参考的建议。

# android - 按钮进入 PopupView。

> ID：13750166
> 
> 赞同：0
> 
> 时间：2012-12-06T18:31:48.973
> 
> 标签：android, android-animation, android-button

我的 PopupView 中有一个 LinearLayout，这个 LinearLayout 中有一个按钮。此按钮的事件侦听器工作正常，但按下（突出显示）的动画未启动。我做错了什么？求求你了！

```
 public class PopupView extends View 
{
    private PopupWindow popUp;
    private Button buttonOk;
    private OnClickListener onClick;
    private LayoutParams params;
    private int popUpWidth = 0;
    private int popUpHeight = 0;
    private int popUpX, popUpY;

    public PopupView(Context context, View parent)
    {
        super(context);
        popUp = new PopupWindow(context);
        popUpLayout = new LinearLayout(context);
        buttonOk = new Button(context);
        buttonOk.setText("OK");
        buttonOk.setId(1);

        params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        popUpLayout.setOrientation(LinearLayout.VERTICAL);
        popUp.setContentView(popUpLayout);

        onClick = new OnClickListener()
        {
            public void onClick (View v)
            {
                switch (v.getId())
                {
                case 1:
                    System.out.println("OK pressed!");
                    break;

                case 2:

                    break;
                }
            }
        };

       buttonOk.setOnClickListener(onClick);

        popUpLayout.removeAllViews();
        popUpLayout.addView(buttonOk, params);

        popUpWidth = 200;
        popUpHeight = 400;

        popUpX = 300;
        popUpY = 300;

        popUp.showAtLocation(parent, Gravity.NO_GRAVITY, popUpX, popUpY);
        popUp.update(popUpX, popUpY, popUpWidth, popUpHeight);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:54:22.647

默认情况下 PopupView 是不可聚焦的。需要调用方法popup.setFocusable(true)。谢谢大家！

# anythingslider - 带有自定义 FX 的任何滑块，要从左侧插入的 FX 对象，但将幻灯片保留在右侧

> ID：13750169
> 
> 赞同：1
> 
> 时间：2012-12-06T18:32:00.710
> 
> 标签：anythingslider

我将任何东西与 customFX 一起使用。当我从左侧插入一个对象时，它会向同一个方向消失。如果我想从左边出现但从右边消失怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:30:23.843

FX 扩展是为了做一些相当基本的动画而编写的，所以它还没有*允许*从一个方向进入和从另一个方向退出的选项。

话虽如此，您可以使用内置的回调函数根据需要为元素设置动画 - 查看[此演示](http://jsfiddle.net/Mottie/ycUB6/3259/)：

```
var fxtime = 1000,
    dist = 300,
    element = 'h3';

$('#slider').anythingSlider({

    // custom FX animation
    onInitialized: function(e, slider) {
        // this could be in the css; but added here for emphasis
        slider.$el.find(element).css('position', 'relative');
        // move title to starting position, if not in view
        slider.$currentPage.siblings().find(element).css({
            top: '-' + dist + 'px'
        });
    },

    onSlideInit: function(e, slider) {
        var $elnext = slider.$targetPage.find(element),
            $ellast = slider.$lastPage.find(element);
        if ($elnext.length) {
            $elnext
                .css({ top: '-' + dist + 'px' })
                // animate element into it's final position
                .animate({ top: 0 }, fxtime);
        }
        if ($ellast.length) {
            // animate element out of view (down, then reset it to the
            // top when finished)
            $ellast.animate({ top: dist + 'px' }, fxtime, function() {
                $ellast.css({ top: '-' + dist + 'px' });
            });
        }
    }
});​ 
```

# c# - 如何从 wpf 的文本框中聚焦光标？

> ID：13750170
> 
> 赞同：2
> 
> 时间：2012-12-06T18:32:18.850
> 
> 标签：c#, .net, wpf, textbox, setfocus

```
<Grid x:Name="LayoutRoot">
    <TextBox x:Name="TxtFocusOut" Height="74" Margin="186,149,225,0" TextWrapping="Wrap" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="26.667" TextChanged="TextBox_TextChanged"/>
</Grid>

private void TextBox_TextChanged(object sender, System.Windows.Controls.TextChangedEventArgs e)
    {
        if(TxtFocusOut.Text.Length>=4)
        {
            MessageBox.Show("Four you typed four values");
        }
    } 
```

在我点击 Ok Button On 消息框后，光标应该从 texbox 中聚焦出来。但现在它在 textbox 中闪烁。我应该怎么做才能从 testbox 中聚焦出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:41:49.570

```
FocusManager.SetFocusedElement(AnotherElementID); 
```

通过这样做，this 将失去它的 foucs 并且 foucs 可以用于另一个元素。
或
Keyboard.ClearFocus();
[http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.clearfocus.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.clearfocus.aspx)
试试这些

# html - 使用浏览器转换 XML 文档

> ID：13750171
> 
> 赞同：0
> 
> 时间：2012-12-06T18:32:26.837
> 
> 标签：html, xml, xslt, simplexml

我有 XML 数据，正在尝试使用 XSL 来格式化数据。我正在关注一些教程。在 Internet Explorer 中预览 XML 时，数据位于一行；使用 Firefox 预览时，我收到错误消息：

> 加载样式表时出错：解析 XSLT 样式表失败。

这里是 XML：

```
 <?xml version= "1.0"?>
<?xml-stylesheet type="text/xsl" href="style.xsl"?>
    <countries>
        <country> 
            <countryname>United States</countryname>
        </country>

        <country>
            <countryname>United Kingdom</countryname>
        </country>

        <country>
            <countryname>Deutschland</countryname>
        </country>

        <country>
            <countryname>Osterreich</countryname>
        </country>

        <country>
            <countryname>Espana</countryname>
        </country>

        <country>
            <countryname>France</countryname>
        </country>

        <country>
            <countryname>Italia</countryname>
        </country>

        <country>
            <countryname>China</countryname>
        </country>

        <country>
            <countryname>Hong Kong</countryname>
        </country>

        <country>
            <countryname>Japan</countryname>
        </country>

        <country>
            <countryname>Singapore</countryname>
        </country>

        <country>
            <countryname>Taiwan</countryname>
        </country>

        <country>
            <countryname>Malaysia</countryname>
        </country>
    </countries> 
```

这是 XSL：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/countries">
<html>
<body>

    <xsl:for-each select="country"

    <xsl:value-of select="countryname"/><br/>

    </xsl:for-each>

</body>
</html>

</xsl:template>

</xsl:stylsheet> 
```

为什么浏览器不显示 XSL 模板所描述的 XML 文档？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:37:58.397

# 缺少括号

`<xsl:for-each select="country"`必须是`<xsl:for-each select="country">`。

注意关闭`>`。

# 额外空间

此外，您可能希望删除文档第一行的前导空格（如果存在）：

```
 <?xml version="1.0" encoding="ISO-8859-1"?> 
```

对比

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
```

# 错字

`</xsl:stylsheet>`一定是`</xsl:stylesheet>`

进行这些更改后，将显示国家/地区列表。

# 调试

考虑使用文本编辑器编辑 XML 和 XSL，该编辑器具有语法突出显示功能，并且会在视觉上提醒您此类错误。

![语法高亮示例](../Images/369f0e1d452610a7a200e445039cdffb.png)

# iphone - 如何从 jquery 移动 web 应用程序获取链接打开 iphone 的本机地图应用程序

> ID：13750175
> 
> 赞同：2
> 
> 时间：2012-12-06T18:32:33.503
> 
> 标签：iphone, maps

我在一个链接到地址的 jquery 移动网络应用程序中有一个链接。我试过使用苹果的地图 url 方案，但没有运气在 iPhone 的地图应用程序中打开链接。

目前，我尝试了以下方法：

```
<a href="http://maps.apple.com/maps?q=dallas">Map: 2001 Flora Street, Dallas</a>
<a href="http://maps.apple.com/maps?q=2001+Flora+Street,+Dallas,+TX">Map: 2001 Flora Street, Dallas</a> 
```

两个链接都无法打开 iphone 地图应用程序，而是在谷歌地图网络应用程序窗口中打开该位置。

有什么方法可以在 iphone 原生地图应用程序中打开地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:56:55.463

看起来将代码更改为以下作品：

```
<a href="maps:q=2001+Flora+Street,+Dallas,+TX">Map: 2001 Flora Street, Dallas</a> 
```

# objectify - 对象化 NotFoundException

> ID：13750177
> 
> 赞同：0
> 
> 时间：2012-12-06T18:32:46.790
> 
> 标签：objectify

为什么这 2 次提取会导致 NotFoundException？

```
ofy().load().type(MyClass.class).id(myClassInstance.getId()).safeGet(); 
ofy().load().key(myClassInstance.getKey()).safeGet(); 
```

但是这个查询返回一个实体：

```
ofy().load().type(MyClass.class).filter("fieldName",myClassInstance.getUserId()).first().get(); 
```

附加信息：MyClass 包含 @Parent 和 @Id 字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:09:53.953

按键加载时没有指定父键。

```
ofy().load().type(MyClass.class).id(myClassInstance.getId()).safeGet();
// should be:
ofy().load().type(MyClass.class).parent(myClassInstance.getParent()).id(myClassInstance.getId()).safeGet(); 
```

对于第二行，我怀疑您的 getKey() 实现存在缺陷并且缺少父键。该查询有效，因为该查询不是键查找；它只返回属性索引中的任何内容。

请记住，id 仅对特定父级是唯一的。实体的唯一标识符是 {parent, id}。仔细阅读[https://code.google.com/p/objectify-appengine/wiki/Concepts 。](https://code.google.com/p/objectify-appengine/wiki/Concepts)

# wordpress - 在页面中显示自定义帖子类型帖子

> ID：13750179
> 
> 赞同：0
> 
> 时间：2012-12-06T18:32:53.960
> 
> 标签：wordpress, custom-post-type

我有一个名为“音频”的自定义帖子类型。为了在一个页面中显示所有帖子，我编写了下面的代码，但它不起作用。

```
 <?php
    $post_type = "audioes";//post type names
    echo "djnbfj";
     $post_type->the_post();
    // The Query
    $the_query = new WP_Query( array(
     'post_type' => $post_type,
     'orderby' => 'post_date',
     'order' => 'DESC',
     'showposts' => 1,
    ));

    // The Loop
    ?>

    <?php
    while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
    <div class="issue-content">
          <?php get_template_part('includes/breadcrumbs', 'page'); ?>
          <?php if ( has_post_thumbnail() ) { the_post_thumbnail();}
           get_template_part('loop-audio', 'page');
          ?>
     </div><!--issue-content-->
    <?php endwhile; ?>

</div> <!-- end #left_area --> 
```

我怎样才能得到我想要上面写的自定义的帖子类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:37:49.570

帖子类型是“音频”还是“音频”？您的 $post_type 变量设置为“audioes”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:47:56.847

我不确定这些`get_template_part`行或`echo`行在做什么，但下面的代码应该显示您的帖子类型。您的代码中的帖子类型名称也为“audio”，但您声明名称为“audio”。试试下面的代码，但如果帖子类型被命名为“音频”，那么你需要在下面的代码中更改它。您可以包装额外的 div、span 或其他 HTML 标记，`<?php the_post_thumbnail(); ?>`并`<?php the_content(); ?>`根据需要为它们提供 CSS 样式。

```
<?php query_posts(array('post_type' => 'audio', 'posts_per_page' => 1, 'orderby' => 'post_date', 'order' => 'DESC')); ?>
<?php while (have_posts()) : the_post(); ?>

<div class="issue-content">

    <?php the_post_thumbnail(); ?>

    <?php the_content(); ?>

</div> 

<?php endwhile;  wp_reset_query(); ?> 
```

# git - Git：如何直接从远程存储库存档？

> ID：13750182
> 
> 赞同：32
> 
> 时间：2012-12-06T18:33:05.340
> 
> 标签：git

我通常在我的内部使用以下命令`project.git`来获取指定目的地的存档：

```
git archive master | tar -x -C /home/kave/site/ 
```

我想知道是否可以直接从远程存储库存档而不是目标目录？

我尝试了这样的事情，没有任何喜悦：

```
git archive master https://kave@dndigital.git.cloudforge.com/myoproject.git | tar -x -C /home/kave/site/ 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-06T19:33:42.663

来自[`git help archive`](https://git-scm.com/docs/git-archive)：

```
 --remote=<repo>
       Instead of making a tar archive from the local repository, retrieve a tar archive from a remote repository. 
```

命令最终应该像：

```
$ git archive --remote=https://kave@dndigital.git.cloudforge.com/myoproject.git master 
```

但是，如果您只是提取 repo，您​​可以使用以下`--depth`参数进行浅克隆`git clone`：

```
 --depth <depth>
       Create a shallow clone with a history truncated to the specified number of revisions. A shallow repository has a number of limitations (you cannot clone or fetch from it, nor push from nor into it), but is adequate if you are only interested in the recent history of a large project with a long history, and would want to send in fixes as patches. 
```

所以你有这样的事情：

```
$ git clone --depth=1 https://kave@dndigital.git.cloudforge.com/myoproject.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-10T01:57:42.463

另一个选项，专门针对 GitHub，是[`github-backup`](https://pypi.org/project/github-backup/). 它具有捕获 GitHub 特定功能（如问题、wiki 等）的选项。这是我最近用来制作其他人存储库的存档的示例命令行：

```
github-backup --all --pull-details --prefer-ssh --repository REPO REPO-OWNER -u mhucka 
```

在上面的命令中，*REPO-OWNER*代表目标存储库的所有者，*REPO*是存储库名称。

# makefile - 压缩 Makefile 中间体（创建相同目标的两种方法）

> ID：13750185
> 
> 赞同：1
> 
> 时间：2012-12-06T18:33:15.690
> 
> 标签：makefile, compression, gzip

我有一个 Makefile 我目前用于编译以外的目的。我不想删除中间文件，而是保留它们，但 gzip 它们，然后让 Makefile 检测到中间文件存在，而不是重新计算它，只需解压缩它。

假设我的目标**target.txt**依赖于名为**intermediate.txt**的中间文件，该文件本身依赖于**prereq.txt**。所以像：

```
target.txt: intermediate.txt
intermediate.txt: prereq.txt 
```

现在默认情况下 Make 会删除中间文件，但我们可以禁用它。但是假设计算*middle.txt*都需要很长时间，所以我将禁用自动删除它。但是如果文件*intermediate.txt*也很大怎么办，所以我想将它（gzip）压缩到**intermediate.txt.gz**。我不想重新计算文件，而是希望 Make 解压缩现有的压缩文件，所以*gunzip intermediate.txt.gz*。

我想我要问的更大的问题是我有两种方法来制作目标，基于两种不同的依赖关系。我希望 Make 执行具有存在先决条件的规则，并忽略其他规则，但可能会删除压缩版本并仅在中间体的先决条件具有较新时间戳时才重新计算它。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:15:33.917

如果您使用的是 GNU Make，则可以使用模式规则来执行此操作（tac 用于表示您正在执行的任何处理）：

```
%.txt: %.i.txt
    tac $^ > $@               #make .txt file the normal way
    gzip $^                   #gzip the intermediate file

%.txt: %.i.txt.gz
    gunzip < $^ | tac > $@    #make .txt by streaming in the gzipped intermediate

%.i.txt: %.p.txt
    tac $^ > $@               #make the intermediate file from the prereq 
```

这适用于模式规则，因为如果`.i.txt`找不到该文件，Make 将进入下一个模式并查找`.i.txt.gz`版本。这不适用于显式规则，因为后面的规则只是替换了前面的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:20:35.357

如果 prereq.txt 比 gzip 压缩文件更新，我猜你不想只解压缩 .gz 版本。在这种情况下，我倾向于只使用 shell 测试来存储和恢复 gzip 压缩文件，而不是直接参与 make：

```
target.txt: intermediate.txt
        ...same as it ever was ....

intermediate.txt: prereq.txt
        if [ $@.gz -nt $< ]; then      \
            gunzip <$@.gz >$@;         \
        else                           \
            whatever >$@ <$<;          \
            gzip <$@ >$@.gz;           \
        fi 
```

其中 'whatever' 是从 prereq.txt 创建 middle.txt 的命令

# ruby-on-rails - Rails 命名空间路由和对资源的自定义操作

> ID：13750188
> 
> 赞同：1
> 
> 时间：2012-12-06T18:33:26.203
> 
> 标签：ruby-on-rails, namespaces, routes

我目前设置了这些路线：

```
namespace :api do
  namespace :v1 do
    resources :users do
      match 'api/v1/users/all'
    end
    resources :sessions
  end
end 
```

我正在尝试在我的用户控制器中设置一个名为“all”的自定义操作。

我如何获得匹配的路线？我已经尝试了这些，并且没有收到任何路线错误：

```
resources :users do
  match 'api/v1/users/all' => "users#all" (also "api/v1/users#all" and "api_v1_users#all"
end 
```

使我能够连接到我的自定义操作的路线是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:46:42.627

您需要添加一个`collection`

```
namespace :api do
  namespace :v1 do
    resources :users do
      collection do
        get 'all'
      end
    end
    resources :sessions
  end
end 
```

`namespace`and`resources`方法调用创建层次结构；与块嵌套的路线`resource :users`将采用其祖先的路径。在`collection`资源集合上创建嵌套路由，而不是资源的单个实例。

```
/api/v1/users/all 
```

推荐阅读： http: [//guides.rubyonrails.org/routing.html#adding-collection-routes](http://guides.rubyonrails.org/routing.html#adding-collection-routes)

# c++ - 为什么 memcpy 会更改字符串数组？

> ID：13750192
> 
> 赞同：0
> 
> 时间：2012-12-06T18:33:32.110
> 
> 标签：c++

我有这样的代码。你能告诉我为什么它的行为不像我预期的那样吗？

```
/*
 * test.cpp
 *
 *  Created on: Dec 6, 2012
 *      Author: sandeep
 */

#include<iostream>
#include<string.h>
using namespace std;

int main()
{
    int i=0;
    string s="hello A B:bye A B";
    char *input;
    input=new char(s.size());
    for(i=0;i<=s.size();i++)
        input[i]=s[i];
    char *tokenized1[2],*tokenized2[3];
    tokenized1[0]=strtok(input,":");
    tokenized1[1]=strtok(NULL,":");
    i=0;
    char *lstring;
    while(i<2)
    {
        lstring=new char(strlen(tokenized1[i]));
        memcpy(lstring,tokenized1[i],strlen(tokenized1[i])+1);
        cout<<tokenized1[0]<<"  "<<tokenized1[1]<<endl;
        tokenized2[0]=strtok(lstring," ");
        tokenized2[1]=strtok(NULL," ");
        tokenized2[2]=strtok(NULL," ");
        char c=tokenized2[0][0];
        cout<<c<<endl;
        cout<<tokenized2[0]<<"  "<<tokenized2[1]<<"  "<<tokenized2[2]<<endl;
        i++;
    }

} 
```

输出就是这个。

```
hello A B  by
h
hello  A  B
hello A B  by
b
by 
```

在输出的第 1 行、第 4 行和第 6 行末尾有一些垃圾值。为什么在我`tokenized1[1]`做 memcopy of 时被改变了`tokenized1[0]`？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T18:35:40.447

以下`new`调用中有几个错误。您需要使用方括号；此外，论点是一个。

```
lstring=new char[strlen(tokenized1[i]) + 1]; 
```

如果没有方括号，您将为*一个*字符分配空间。结果，`memcpy()`写入超出了分配的内存。

**编辑：**我刚刚注意到另一个`new`，它也需要修复：

```
input=new char[s.size() + 1]; 
```

最后，`s[i]`读取字符串末尾的内容：

```
for(i=0;i<=s.size();i++)
    input[i]=s[i]; 
```

很可能还有其他错误，更不用说内存泄漏......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:36:16.593

您似乎不是零终止“输入”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:47:42.483

除了 NPE 所说的，还有一些其他的小事：

```
char *input;
input=new char(s.size()); 
```

这可能与它有关 - 您正在分配一个*字符*。然后，您写入该字符，并覆盖用于“谁知道”的其他内存。试试这个：

```
char *input = new char[s.size() + 1]; 
```

另一个问题是您的循环，紧随其后：

```
for(i=0;i<=s.size();i++)
        input[i]=s[i]; 
```

至少在*我的*系统上，使用偏移量等于 s.size() 的 std::string::operator[] 失败；我不知道您的特定实现，但我很高兴它也失败了。安全而不是抱歉，并因此重新编码您的循环：

```
for(i = 0; i < s.size(); i++)
    input[i] = s[i];

input[i] = 0; 
```

我希望这有帮助。

# java - Spring：如何管理动态工厂？

> ID：13750193
> 
> 赞同：1
> 
> 时间：2012-12-06T18:33:33.143
> 
> 标签：java, spring, factory-pattern

我想创建一个工厂，但是使用 Spring 并不简单，我又迷失在了空间中：p

这就是我想做的。

我有一个实现多个接口的抽象类（可运行和一些个人接口）

```
public abstract class AbstractDocMan implements Runnable, DocMan {

    protected AbstractDocUnit docUnit;

    // some attributes

    // some getter & setter
} 
```

我有一些从这个抽象类扩展而来的类，我将它们称为：W、S 和 E :p 抽象属性（docUnit）的一些类称为：WD 代表 W，SD 代表 S，ED 代表 E :)

现在考虑一个参数，我想在我的主控制器中实例化好类。我想要一个通用代码，但考虑到良好的流程，使用特定的类。

类似的东西。

```
@Component("mainVm")
@Scope("prototype")
public class MainVm {

   @Autowired
   private DocManFactory docManFactory;

   // ???
   private AbstractDocMan docMan;

   ...

   public void setProcess(String myProcess) {
       docMan = docManFactory.getDocMan(myProcess);
   } 
} 
```

目前，我有一个奇怪定义的工厂。它正在工作，但我认为这不是一个好习惯：

```
public class DocManFactory {

    @Autowired
    private S s;
    @Autowired
    private W w;
    @Autowired
    private E e;

    @Autowired
    private SD sd;
    @Autowired
    private WD wd;
    @Autowired
    private ED ed;

    public AbstractDocMan getDocMan(String myProcess) {
        AbstractDocMan adm = null;
        if ("S".equals(myProcess)) {
            s.setDocUnit(sd);
            adm = s;
        } else if ("W".equals(myProcess)) {
            w.setDocUnit(wd);
            adm = w;
        } else if ("E".equals(myProcess)) {
            e.setDocUnit(ed);
            adm = e;
        }
        return adm;
    }
} 
```

所以我的问题： - 如何在工厂动态注入好的 docUnit？因为这里所有的对象都是实例化的 (s,e,w,sd,ed,wd) zzz - 有没有办法在主控制器中注释属性？

那么......如何用Spring（v3.1.1）做一个好的工厂。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:41:29.800

我认为泛型和 Map 是这里的解决方案。

你的直觉是正确的：这个实现太脆弱了。从这个开始：

```
public DocManFactory {

    // You can inject or hard wire these
    private static final Map<String, AbstractDocMan> INSTANCES; 

    public static AbstractDocMan getDocMan(String processName, Process process) {
        AbstractDocMan docMan = INSTANCES.get(processName);
        process.setDocUnit(docMan);
        return docMan;
    }
} 
```

`Process`如果我假设的类不同，泛型可以提供帮助。

# facebook - Facebook JavaScript SDK 和 PHP SDK 自平台更新以来没有像以前那样集成

> ID：13750199
> 
> 赞同：0
> 
> 时间：2012-12-06T18:34:04.110
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk, facebook-login

由于 Facebook昨天更新了其[开发人员路线图更改，因此我的网站存在重大问题，因为它具有 Facebook 登录依赖项。](https://developers.facebook.com/blog/post/2012/12/05/platform-updates--operation-developer-love/)

我相信问题出在下面提供的我的 Facebook JS SDK：

```
 <script type="text/javascript">
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=ID";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        var button;
        var userInfo;

        window.fbAsyncInit = function() {
            FB.init({ 
                appId: 'ID', //change the appId to your appId
                channelUrl : '//www.DOMAIN.com/channel.html', // Channel File
                status: true, 
                cookie: true,
                xfbml: true,
                oauth: true});

           showLoader(false);

           function updateButton(response) {
                button       =   document.getElementById('fb-auth');
                userInfo     =   document.getElementById('user-info');

                if (response.authResponse) {
                    //user is already logged in and connected
                    FB.api('/me', function(info) {
                        login(response, info);
                    });

                    button.onclick = function() {
                        FB.logout(function(response) {
                            logout(response);
                        });
                        $.post('scripts/logout.php',{ facebook_id:response.authResponse.userID } ,  function(data) {
                            //kill sessions
                        }); 
                  };
                } else {
                    //user is not connected to your app or logged out
                    button.innerHTML = '';
                    button.onclick = function() {
                        showLoader(false);
                        FB.login(function(response) {
                            if (response.authResponse) {
                                FB.api('/me', function(info) {
                                    login(response, info);
                              });   
                            } else {
                                //user cancelled login or did not grant authorization
                                showLoader(false);
                            }
                            window.location.href='/user/index.php';                             
                        }, {scope:'email,user_birthday,status_update,publish_stream,user_about_me'});   
                    }
                    FB.Event.subscribe('auth.authResponseChange', function(response) {
                      if (response.status === 'connected') {
                        window.top.location = '../user/index.php';
                      }
                    });
                }
            }

            // run once with current status and whenever the status changes
            FB.getLoginStatus(updateButton);
            //FB.Event.subscribe('auth.statusChange', updateButton);    
            // FB login insert/update               

            // Additional init code here
            FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {
                    // connected
                    FB.api('/me', function(info) {
                            getLoginStatus(response, info);
                        });
                    if (response.authResponse.userID) {
                        $.post('scripts_profile/init.php',{ facebook_id:response.authResponse.userID } ,  function(data) {
                            //Good
                        });  
                    } else {
                        //Nothing   
                    }
                } else if (response.status === 'not_authorized') {
                    // not_authorized
                    login();
                } else {
                    // not_logged_in
                    login();
                }
            });             
        };
        // Load the SDK Asynchronously
        (function(d){
           var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
           if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           ref.parentNode.insertBefore(js, ref);
        }(document));

    </script> 
```

我的网站还有与 Facebook JS SDK 集成的 Facebook PHP SDK。

由于 Facebook 更新，JS SDK 没有像以前那样与 PHP 集成，导致不一致。

例如，在我的网站上，如果用户登录，他们的标题与访问者不同。所以根据 FB PHP SDK：

```
if (!my_profile) {
    //user header
} else {
    //visitor header
} 
```

由于更新，一旦登录，登录用户需要刷新页面以查看它应该......而不是简单地访问它。一旦我尝试直接访问该页面（通过单击链接或输入网址），它就会显示我已注销！

我花了最后 10 个小时来解决它，我真的迷路了。您的帮助将不胜感激！

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:38:45.203

我遇到了和你一样的问题，其他人也是。似乎这是最新政策更改的错误。

见这里：http: [//developers.facebook.com/bugs/238039849657148](http://developers.facebook.com/bugs/238039849657148)

# php - 带有strpos的php array_udiff函数

> ID：13750202
> 
> 赞同：0
> 
> 时间：2012-12-06T18:34:15.700
> 
> 标签：php

我正在使用这段代码来比较两个数组。

```
<?php
function myfunction($v1,$v2){
    if ($v1===$v2){
        return 0;
    }
    return 1;
}

$a1 = array("a"=>"Cat", "b"=>"Dog", "c"=>"Horse");
$a2 = array(1=>"Cat", 2=>"Dog", 3=>"Fish");

print_r(array_udiff($a1,$a2,"myfunction"));
?> 
```

该函数适用于这些数组。但我想使用 php strpos 函数而不是`===`运算符来比较两个值，即`if(strpos($v1,$v2) === true)`。我试过这个但没有工作。任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:45:50.397

您可以尝试（注意我使用`stripos`的是在字符串中查找不区分大小写的子字符串）

```
function myfunction($v1, $v2) {
    if (stripos($v1, $v2) !== false) {
        return 0;
    }
    return 1;
}

$a1 = array("a" => "Cat","b" => "Dog","c" => "Horse");
$a2 = array(1 => "Cat",2 => "Dog",3 => "Fish");

print_r(array_udiff($a1, $a2, "myfunction")); 
```

输出

```
 Array ( [c] => Horse ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:48:40.617

由于您使用的是蛋糕 1.3。您可以使用 diff ( [http://book.cakephp.org/1.3/en/The-Manual/Core-Utility-Libraries/Set.html#diff](http://book.cakephp.org/1.3/en/The-Manual/Core-Utility-Libraries/Set.html#diff) ) 这是一个核心实用程序，非常方便。该手册页上还有其他数组函数。

```
$result = Set::diff($a1, $a2);
print_r($result); 
```

# graph - 在高图表中显示雇主名称而不是时间

> ID：13750205
> 
> 赞同：0
> 
> 时间：2012-12-06T18:34:23.520
> 
> 标签：graph, highcharts

如何在高图中显示每列的“名称”而不是时间/月份？看一看：

[http://jsfiddle.net/B7rGw/](http://jsfiddle.net/B7rGw/)

在每列的底部都显示月份，但我要显示名称。例如：乔、汉娜、比利、乔恩……

```
$(function() {
    $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-v.json&callback=?', function(data) {
        // create the chart
        chart = new Highcharts.StockChart({
            chart: {
                renderTo: 'container',
                alignTicks: false
            },
            rangeSelector: {
                selected: 1
            },
            title: {
                text: 'AAPL Stock Volume'
            },
            series: [{
                type: 'column',
                name: 'AAPL Stock Volume',
                data: data,
                dataGrouping: {
                    enabled: false
                }
            }]
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:56:10.920

对于 HighStock（即您要链接到的图表），它暗示始终是基于时间的 xAxis。

如果你想在你的 xAxis 上有名字，你需要一个基于类别的[图表](http://www.highcharts.com/demo/column-basic)。

# mysql - 如何使用 dbExpress 处理多结果集查询

> ID：13750209
> 
> 赞同：2
> 
> 时间：2012-12-06T18:34:31.463
> 
> 标签：mysql, delphi, delphi-2007, dbexpress

我有这样一条sql语句：

```
UPDATE tbworker SET iState=2 WHERE iState=1;
UPDATE tbworker SEt iState=3 WHERE iState=0; 
```

我想在对 MySQL 的一个请求中执行这个语句。

简单的 sql 请求是这样执行的：

```
SQLQuery.SQL.Text := SomeSQLText;
AffectedRows := SQLQuery.ExecSQL(true); 
```

但是现在我需要NextResultSet这样的方法，例如：

```
SQLQuery.SQL.Text := MultyResultSetSQLText;
ResultSetCounter := 1;
AffectedRows.Add(ResultSetCounter, SQLQuery.ExecSQL(true));
while SQLQuery.HasNextResultSets do
begin
  Inc(ResultSetCounter);
  AffectedRows.Add(ResultSetCounter, SQLQuery.GetNextResultSet);
end; 
```

dbExpress 如何处理多个结果集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T20:22:18.030

AFAIK [`TSQLDataSet`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SqlExpr_TSQLDataSet.html)and[`TSQLQuery`](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.SqlExpr.TSQLQuery)组件无法处理多个数据集的返回，唯一支持[此功能](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devwin32/5datasetfetchingmultipleresultsets_xml.html)的 dbexpress 组件是 [TSQLStoredProc](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.SqlExpr.TSQLStoredProc)对象。

# javascript - 在 JavaScript 中分析函数

> ID：13750212
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:34:41.173
> 
> 标签：javascript, function

试图分析这段代码，但不确定它的作用？这如何演示函数在 JS 中的工作方式？对不起，新手的问题。使困惑？谢谢。

```
function merge(root) {
    for (var i = 1; i < arguments.length; i++) {
        for (var key in arguments[i]) {
            root[key] = arguments[i][key];
        }
    }
}

var merged = merge(
    {name: "Batou"},
    {city: "Niihama"},
    (activity: "Weights", min: 0, max: 35, points: 2500, scale: "sum"});

assert(merged.name === "Batou",
    "The original name is intact.");
assert(merged.max === 35,
    "The maximum number of sets is 35."); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:42:53.817

首先，修复三个（语法）错误：

*   第2行：`I`小写`i`
*   第 6 行：你想`return root;`从函数中使它工作，否则`undefined`将被分配给`merged`
*   第 12 行：`(`到`{`.

除此之外，代码非常简单。该[函数](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions) `merge`采用任意数量的参数。它从索引 1[迭代](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)[`arguments`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)（即不包括`root`参数），并为每个项目[枚举其属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)，将它们的值[复制](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)到`root`对象。[括号语法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)用于通过名称访问属性值。

因此，将所有传递的[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)`merge` *合并*到第一个对象中，覆盖已经存在的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:40:26.613

这会将两个或多个对象合并为一个。

`{name: "Batou"}`

是一个快捷方式：

```
var obj = new Object();
obj.name = "Batou"; 
```

函数内部`arguments`是调用时传递的参数数组，您可以像在数组中一样更改对象的属性，但使用字符串：

```
obj["name"] = "Batou"; 
```

该`assert`关键字将检查条件是否为真，它用于调试建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:42:55.453

Javascript 有一个 Object 被调用`arguments`，它包含所有参数，一个函数被调用。

这个

```
function merge(root) {
    for (var i = 1; I < arguments.length; i++) {
        for (var key in arguments[i]) {
            root[key] = arguments[i][key];
        }
    }
} 
```

基本上接受多个参数并将其他参数的所有属性（从第二个参数开始）放入传递给函数的第一个对象

请讲 ：

这是传递给函数的第一个参数： `{name: "Batou"}`

然后它遍历其他 2 个对象的属性

```
{city: "Niihama"},
(activity: "Weights", min: 0, max: 35, points: 2500, scale: "sum"}); 
```

并将它们的属性添加到第一个属性中，结果是

```
{name: "Batou",
city: "Niihama",
activity: "Weights", min: 0, max: 35, points: 2500, scale: "sum"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:41:59.383

首先，我在您的代码中看到 3 个错误：大写`I`应该是`i`; `(activity:`应该是`{activity:`；功能应该`return root`。

如果你解决了这个问题，该函数应该将传递给它的所有对象合并为一个对象。您正在传递 3 个对象：

*   `{name: "Batou"}`
*   `{city: "Niihama"}`
*   `{activity: "Weights", min: 0, max: 35, points: 2500, scale: "sum"}`

给定这 3 个对象作为输入，该函数返回一个合并对象：

```
{
    name: "Batou",
    city: "Niihama",
    activity: "Weights", 
    min: 0,
    max: 35, 
    points: 2500, 
    scale: "sum"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T18:48:08.577

为了使代码按所写的那样工作，需要对其进行修改：

```
function merge(root) {
    for (var i = 1; i < arguments.length; i++) {
        for (var key in arguments[i]) {
            root[key] = arguments[i][key];
        }
    }
    return root; // without this line, "merged" below will always be undefined. 
}

var merged = merge(
    {name: "Batou"},
    {city: "Niihama"},
    {activity: "Weights", min: 0, max: 35, points: 2500, scale: "sum"});

assert(merged.name === "Batou",
    "The original name is intact.");
assert(merged.max === 35,
    "The maximum number of sets is 35."); 
```

或者，它需要以不同的方式使用：

```
function merge(root) {
    for (var i = 1; i < arguments.length; i++) {
        for (var key in arguments[i]) {
            root[key] = arguments[i][key];
        }
    }
}

var merged = {name: "Batou"};
merge(
    merged,
    {city: "Niihama"},
    {activity: "Weights", min: 0, max: 35, points: 2500, scale: "sum"});

assert(merged.name === "Batou",
    "The original name is intact.");
assert(merged.max === 35,
    "The maximum number of sets is 35."); 
```

# vba - 找不到运行时错误 1004

> ID：13750213
> 
> 赞同：0
> 
> 时间：2012-12-06T18:34:41.767
> 
> 标签：vba, excel

我认为这是一个非常简单的代码，旨在为工作表中的所有活动单元格设置边框（数据将始终驻留在单元格（1,1）中）。但是我遇到了臭名昭著的“运行时错误 1004”，我很困惑。

任何帮助，将不胜感激。

```
Sub test()
Dim myrange As Range
Dim x, y As Integer
x = ActiveSheet.Cells.Find(What:="*", _
SearchDirection:=xlPrevious, _
SearchOrder:=xlByRows).Row
MsgBox x
'------------------------------'
y = ActiveSheet.Cells.Find(What:="*", _
SearchDirection:=xlPrevious, _
SearchOrder:=xlByColumns).Column
MsgBox y
Set myrange = ActiveSheet.Range(Cells(1, 1), Cells(x, y))
   With ActiveSheet '<-- erroring here'
    .Range(myrange).Select
        With Selection.Borders
            .LineStyle = xlContinuous
            .Weight = xlThin
            .ColorIndex = xlAutomatic
        End With
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T18:54:16.700

对我来说，它实际上在下一行出错`.Range(myrange).Select`。您已经定义了 myrange，您不需要，事实上也不能，限定它。

此外，`Dim x, y As Integer`, 仅声明`y`为`Integer`. `x`被声明为`Variant`. 当您使用它时，您应该将它们声明为`Longs`，这是本机 VBA 类型。

`Select`此外，除非必要，否则避免使用。综上所述，这就是我的编码方式：

```
Sub test()
Dim myrange As Range
Dim x As Long, y As Long
x = ActiveSheet.Cells.Find(What:="*", _
                           SearchDirection:=xlPrevious, _
                           SearchOrder:=xlByRows).Row
y = ActiveSheet.Cells.Find(What:="*", _
                           SearchDirection:=xlPrevious, _
                           SearchOrder:=xlByColumns).Column
Set myrange = ActiveSheet.Range(Cells(1, 1), Cells(x, y))
With myrange.Borders
    .LineStyle = xlContinuous
    .Weight = xlThin
    .ColorIndex = xlAutomatic
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:50:55.567

这有点像在黑暗中拍摄，但我认为您可能想尝试定义一个精确的工作表以在您的 With 语句中使用。

```
Dim mySheet as WorkSheet
Set mySheet = ActiveWorkbook.Sheets(<name of your sheet>)
[etc etc] 
```

有时 VBA 很难弄清楚活动工作表是什么。我倾向于使用这个解决方案，因为它是硬编码而不是使用相对变量。我认为你可以简单地放置像 Sheets().Activate 和使用你的代码这样的东西......但我不是一个大粉丝。

# visual-studio-2010 - 用于方法定义的 Visual Studio 2012 智能感知

> ID：13750220
> 
> 赞同：3
> 
> 时间：2012-12-06T18:35:28.667
> 
> 标签：visual-studio-2010, visual-c++, visual-studio-2012, intellisense

我一直在使用 VS2005，现在我正在切换到 VS2012。

2005年，我写了方法声明后：

```
class A
{
   void foo(int p1, double p2);
} 
```

然后当我开始编写方法定义时：

```
void A:: 
```

智能感知会为我提供方法名称 (foo) 及其完整签名 (foo(int p1, double p2))，我觉得这很方便。

出于某种原因 VS2012（以及 VS2010）不这样做 - 它只提供名称。

是否有一些配置由于某种原因默认关闭，或者该功能已被弃用？

VS2012 是否建议任何其他方便的方法在文件中写入方法定义，而不是带有类定义的标头？

# hibernate - Hibernate：如何连接三个表（使用映射）

> ID：13750225
> 
> 赞同：1
> 
> 时间：2012-12-06T18:35:44.753
> 
> 标签：hibernate, mapping, many-to-many

我只是开始学习 Hibernate 并面临这样的任务。我有 3 个表：students(id,name), courses(id,name), mark(id_student,id_course,mark)。

```
Courses.java
public class Courses implements Serializable {
    private Integer id;
    private String  courseTitle;
    private Set<Marks> mark = new HashSet<Marks>
getters and setters...

Students.java
public class Students implements Serializable {
    private Integer id;
    private String  name;
    private Set<Marks> students = new HashSet<Marks>;
getters and setters...

Marks.java
public class Marks implements Serializable {
    private Integer courseId;
    private Integer studentId;
    private Integer mark;
    private Set<Students> marks = new HashSet<Students>;
getters and setters...

Students.hbm.xml
<class name="Students" table="students">
        <id name="id" column="ID">
            <generator class="native"/>
        </id>
        <property name="name" column="NAME"/>
        <set name="students" inverse="true" table="marks">
            <key column="NUM" />
            <many-to-many column="STUDENT_ID" class="Marks" />
        </set>
    </class>

Courses.hbm.xml
 <class name="Courses" table="courses">
        <id name="id" column="ID" type="integer">
            <generator class="native"/>
        </id>
        <property name="courseTitle" column="COURSE_TITLE"/>
        <set name="mark" inverse="true" table="marks">
            <key column="NUMBER" />
            <many-to-many column="COURSE_ID" class="Marks" />
        </set>
    </class>

Marks.hbm.xm
 <class name="Marks" table="marks">
        <id name="studentId" column="STUDENT_ID">
            <generator class="native"/>
        </id>
        <property name="courseId" column="COURSE_ID"/>
        <property name="mark" column="MARK" lazy="true"/>
    </class> 
```

连接是多对多的 除了不创建4个表之外，如何将这3个表连接在一起？我在想我在创建多对多连接时犯了什么错误。请帮我。

# iphone - 在朋友的 iPhone 上测试 Phonegap Build 应用程序

> ID：13750228
> 
> 赞同：14
> 
> 时间：2012-12-06T18:36:01.367
> 
> 标签：iphone, testing, cordova

我使用**Phonegap Build**创建了一个移动应用程序（不仅仅是 Phonegap...而是[Build](http://build.phonegap.com)）。我有一台 Windows PC，不使用 eclipse 或 xcode。我只是编写 Javascript 并让 Build 为我完成所有复杂的工作。

我可以在我的应用程序编译后通过扫描构建页面上显示的二维码轻松地在 Android 设备上测试我的应用程序....但是**如何在 iPhone 或 iPad 上进行测试？**我可以说服家人借给我一天，但我没有 Mac（我可能会去拜访另一位朋友，简单地说一下）。

在这一点上花费 99 美元购买开发者证书是不合适的，即使这个应用程序最终可能会提交到商店。如果 99 美元是唯一的选择，我将感谢任何明确说明这一点的人！

或者也许我只需要了解[TestFlight](https://testflightapp.com/)或[Lesspainful](https://www.lesspainful.com/)？目前这些描述让我感到困惑，但如果我听到一些专家告诉我这是正确的方法，我会更加努力！

在真正的Apple设备上进行测试会很好，因为我没有太多运气让模拟器运行......但也许我的困境的唯一答案是告诉我坚持使用模拟器。**（在这种情况下：对于一个完整的初学者在Windows**中安装 iPhone 模拟器是否有一个很好的分步教程？）。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T19:02:33.217

如果您想在设备上进行测试，您的应用需要使用您的证书进行签名。您还需要一个开发配置文件，其中包含您要测试的任何设备的设备 ID。为了获得这些东西，你需要加入 Apple 的 iOS 开发者计划。即使您使用 PhoneGap Build 服务也是如此；为了构建设备，您需要将您的证书和配置文件上传到 PhoneGap Build。查看 PhoneGap Build 的[iOS 版](http://build.phonegap.com/docs/ios-builds)构建页面以获取完整信息。**这意味着您需要支付 99 美元的费用才能加入 iOS 开发者计划。**

另一种方法是越狱您的设备（或者，在这种情况下，您朋友的设备）。如果您愿意，可以在网上找到相关说明。但是，我认为在这种情况下您将无法通过 PhoneGap Build 构建应用程序——您需要使用 Xcode 或其他一些工具自己构建您的应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-30T20:43:04.510

就像其他任何人在这里结束的更新一样。您现在可以使用[Adob​​e PhoneGap 开发者应用程序](http://app.phonegap.com/)，它允许您在没有 ID、许可证等的设备上运行应用程序。[这里是入门指南](http://phonegap.com/blog/2014/04/23/phonegap-developer-app/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:24:00.110

您需要加入 Apple Developer Program 才能签署构建并创建 .IPA 以使用 TestFlight 或其他方法将构建安装到设备上。

不过，您可以选择在没有此功能的设备上进行测试 - 请参阅[App.io](https://app.io/)了解浏览器内模拟器。

无论您选择使用它还是使用 TestFlight，我都在博客上写过[让您的客户构建移动应用程序，](http://trigger.io/cross-platform-application-development-blog/2013/04/02/getting-mobile-app-builds-to-your-customers/)其中包括选项的优缺点以及您需要完成的步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:50:33.943

在您的 Windows PC 上安装 iTune。将 IPA 文件复制到 iTune 的应用程序目录。连接设备（iPhone、iPad 或 iPod）时，同步应用程序。然后你就可以在真机上测试了。

# ipad - 为什么我的 iPad 上 safari 视口的宽度只有 768 像素而不是 1028 像素？

> ID：13750229
> 
> 赞同：3
> 
> 时间：2012-12-06T18:36:03.857
> 
> 标签：ipad, mobile-safari, device-width

在我阅读的所有地方，Ipad 1 的屏幕宽度都是 1024 x 768。

我使用引导程序构建了一个站点，当在 iPad 上以横向模式查看站点时，会出现可折叠的导航按钮。它不应该。它应该只出现在宽度小于 1024 像素的视口中。

然后我嗅出宽度，因为 jQuery 使用 $(window).width(); 看到它。它只报告 768px x 467px；

我有以下元标记：

元名称=“视口”内容=“宽度=设备宽度”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T18:44:26.387

在横向模式下，iPad 会放大内容，以便有效视口与纵向模式下相同。

试试这个 - ISTR 它应该强制所有窗口进行 1:1 缩放，并防止用户缩放。

```
<meta name="viewport" content="user-scalable=1.0,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0"> 
```

# c# - 如何在 MVC4 和实体代码优先的 Fluent 中编写多对多关系

> ID：13750231
> 
> 赞同：0
> 
> 时间：2012-12-06T18:36:05.390
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4.1

我正在尝试在 ASP.NET MVC4 中覆盖我的上下文的 onModelCreating 方法中编写多对多关系。我认为我的课程错了，因为我在 Intellisense 中遇到了我不理解的错误。这是我的覆盖：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
     base.OnModelCreating(modelBuilder);

      modelBuilder.Entity<Software>().
          HasMany(i => i.LocationId).
          WithMany(c => c.SoftwareId).
          Map(mc =>
          {
               mc.MapLeftKey("SoftwareId");
               mc.MapRightKey("LocationId");
               mc.ToTable("SoftwareLocations");
          });

 } 
```

这是我的软件课：

```
public class Software
    {
        public int Id { get; set; }
        public virtual List<SoftwareType> SoftwareTypes { get; set; }
        public virtual List<Location> Locations { get; set; }
        public virtual List<SoftwarePublisher> Publishers { get; set; }
        [Required]
        [StringLength(128)]
        public string Title { get; set; }
        [Required]
        [StringLength(10)]
        public string Version { get; set; }
        [Required]
        [StringLength(128)]
        public string SerialNumber { get; set; }
        [Required]
        [StringLength(3)]
        public string Platform { get; set; }
        [StringLength(1000)]
        public string Notes { get; set; }
        [Required]
        [StringLength(15)]
        public string PurchaseDate { get; set; }
        public bool Suite { get; set; }
        public string SubscriptionEndDate { get; set; }
        //[Required]
        //[StringLength(3)]
        public int SeatCount { get; set; }
        public virtual Location LocationId { get; set; }
    } 
```

这是我的位置类：

```
public class Location
    {
        public int Id { get; set; }
        [Required]
        [StringLength(20)]
        public string LocationName { get; set; }
        public virtual Software SoftwareId { get; set; }
    } 
```

如何编写 Fluent 覆盖以便正确映射它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:07:15.077

多对多意味着在两个实体中都是集合。所以你应该设置 HasMany(software=>software.Locations) 并设置 WithMany(location=>location.Softwares) ，例如：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
     base.OnModelCreating(modelBuilder);

      modelBuilder.Entity<Software>().
          HasMany(i => i.Locations).
          WithMany(c => c.Softwares).
          Map(mc =>
          {
               mc.MapLeftKey("SoftwareId");
               mc.MapRightKey("LocationId");
               mc.ToTable("SoftwareLocations");
          });

 } 
```

这是我的软件课：

```
public class Software
{
    public int Id { get; set; }
    public virtual List<SoftwareType> SoftwareTypes { get; set; }
    public virtual ICollection <Location> Locations { get; set; }
    public virtual List<SoftwarePublisher> Publishers { get; set; }
    [Required]
    [StringLength(128)]
    public string Title { get; set; }
    [Required]
    [StringLength(10)]
    public string Version { get; set; }
    [Required]
    [StringLength(128)]
    public string SerialNumber { get; set; }
    [Required]
    [StringLength(3)]
    public string Platform { get; set; }
    [StringLength(1000)]
    public string Notes { get; set; }
    [Required]
    [StringLength(15)]
    public string PurchaseDate { get; set; }
    public bool Suite { get; set; }
    public string SubscriptionEndDate { get; set; }
    //[Required]
    //[StringLength(3)]
    public int SeatCount { get; set; }
} 
```

这是我的位置类：

```
 public class Location
        {
            public int Id { get; set; }
            [Required]
            [StringLength(20)]
            public string LocationName { get; set; }
            public virtual ICollection<Software> Softwares { get; set; }
        } 
```

# cocoa - 对 NSImageView 缩放感到困惑

> ID：13750234
> 
> 赞同：9
> 
> 时间：2012-12-06T18:36:32.787
> 
> 标签：cocoa, nsimageview

我试图显示一个简单的**NSImageView**，它的图像居中而不像这样缩放它：

![就像 iOS 在设置 UIView 的 contentMode = **UIViewContentModeCenter** 时所做的那样](../Images/aa48edabc8e1c3f66a6b411c7066915a.png)

*就像 iOS 在设置 UIView 的 contentMode = **UIViewContentModeCenter时所做的那样***

所以我尝试了所有**NSImageScaling**值，这就是我选择**NSScaleNone时得到的**

![我真的不明白发生了什么：-/](../Images/d6b50e0a9c2e9b6475a82dad542ddbfd.png)

*我真的不明白发生了什么：-/*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-05T17:16:36.000

您可以手动生成正确大小和内容的图像，并将其设置为 NSImageView 的图像，以便 NSImageView 不需要做任何事情。

```
NSImage *newImg = [self resizeImage:sourceImage size:newSize];
[aNSImageView setImage:newImg]; 
```

以下函数调整图像大小以适应新大小，同时保持纵横比不变。如果图像小于新尺寸，则将其放大并用新框架填充。如果图像大于新尺寸，则缩小尺寸，并用新框架填充

```
- (NSImage*) resizeImage:(NSImage*)sourceImage size:(NSSize)size{

NSRect targetFrame = NSMakeRect(0, 0, size.width, size.height);
NSImage*  targetImage = [[NSImage alloc] initWithSize:size];

NSSize sourceSize = [sourceImage size];

float ratioH = size.height/ sourceSize.height;
float ratioW = size.width / sourceSize.width;

NSRect cropRect = NSZeroRect;
if (ratioH >= ratioW) {
    cropRect.size.width = floor (size.width / ratioH);
    cropRect.size.height = sourceSize.height;
} else {
    cropRect.size.width = sourceSize.width;
    cropRect.size.height = floor(size.height / ratioW);
}

cropRect.origin.x = floor( (sourceSize.width - cropRect.size.width)/2 );
cropRect.origin.y = floor( (sourceSize.height - cropRect.size.height)/2 );

[targetImage lockFocus];

[sourceImage drawInRect:targetFrame
               fromRect:cropRect       //portion of source image to draw
              operation:NSCompositeCopy  //compositing operation
               fraction:1.0              //alpha (transparency) value
         respectFlipped:YES              //coordinate system
                  hints:@{NSImageHintInterpolation:
 [NSNumber numberWithInt:NSImageInterpolationLow]}];

[targetImage unlockFocus];

return targetImage;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-22T13:28:03.850

这是 NSImage 的一个很棒的类别：[NSImage+ContentMode](https://github.com/stevestreza/VillainousStyle/blob/master/Source/NSImage%2BContentMode.h)

它允许像 iOS 中那样的内容模式，效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-13T07:32:17.393

将图像缩放属性设置为 NSImageScaleAxesIndependently，它将缩放图像以填充矩形。这不会保留纵横比。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-25T06:14:31.207

@Shagru 答案的 Swift 版本（没有提示）

```
func resizeImage(_ sourceImage:NSImage, size:CGSize) -> NSImage
    {
        let targetFrame = CGRect(origin: CGPoint.zero, size: size);
        let targetImage = NSImage.init(size: size)
        let sourceSize = sourceImage.size
        let ratioH = size.height / sourceSize.height;
        let ratioW = size.width / sourceSize.width;

        var cropRect = CGRect.zero;
        if (ratioH >= ratioW) {
            cropRect.size.width = floor (size.width / ratioH);
            cropRect.size.height = sourceSize.height;
        } else {
            cropRect.size.width = sourceSize.width;
            cropRect.size.height = floor(size.height / ratioW);
        }

        cropRect.origin.x = floor( (sourceSize.width - cropRect.size.width)/2 );
        cropRect.origin.y = floor( (sourceSize.height - cropRect.size.height)/2 );
        targetImage.lockFocus()
        sourceImage.draw(in: targetFrame, from: cropRect, operation: .copy, fraction: 1.0, respectFlipped: true, hints: nil )

        targetImage.unlockFocus()
        return targetImage;
    } 
```

# node.js - Mongo DB 初始连接池保持打开状态？

> ID：13750235
> 
> 赞同：2
> 
> 时间：2012-12-06T18:36:41.603
> 
> 标签：node.js, mongodb

目前使用 node.js (Native MongoDB) 驱动程序使用 Mongodb，我知道可以设置池连接计数，但无论观察到相同的行为。

有问题的代码：

```
(function init(){
    db.connect("mongodb://localhost/test",function(err, database){

    });
})(); 
```

这是来自服务器的日志：

```
Thu Dec 06 20:19:32 [initandlisten] connection accepted from 127.0.0.1:58663 #6
(1 connection now open)
Thu Dec 06 20:19:32 [initandlisten] connection accepted from 127.0.0.1:58664 #7
(2 connections now open)
Thu Dec 06 20:19:32 [initandlisten] connection accepted from 127.0.0.1:58665 #8
(3 connections now open)
Thu Dec 06 20:19:32 [initandlisten] connection accepted from 127.0.0.1:58666 #9
(4 connections now open)
Thu Dec 06 20:19:32 [initandlisten] connection accepted from 127.0.0.1:58667 #10
 (5 connections now open)
Thu Dec 06 20:19:36 [conn9] end connection 127.0.0.1:58666 (4 connections now op
en)
Thu Dec 06 20:19:36 [conn10] end connection 127.0.0.1:58667 (4 connections now o
pen)
Thu Dec 06 20:19:36 [conn8] end connection 127.0.0.1:58665 (4 connections now op
en)
Thu Dec 06 20:19:36 [conn6] end connection 127.0.0.1:58663 (4 connections now op
en)
Thu Dec 06 20:19:36 [conn7] end connection 127.0.0.1:58664 (4 connections now op
en) 
```

连接显然正在关闭，但即使连接正确增加，当前打开的连接计数也不会减少。预期行为？

PS。请不要使用 mongodb 的 nodejs 包装器来回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T09:06:49.833

这是 MongoDB 计数器的问题。数据库在关闭所有连接（多个关闭信号）时异步工作，并且它发生得如此之快以至于它无法跟上更新计数器的速度。浏览 MongoDB 源代码后，您可以看到消息输出远不及计数器更新。

低于类似的输出，但精度高达 1ms，这更好地说明了 IMO 的问题。

```
Mon Dec  2 17:42:09.059 [conn675] end connection 127.0.0.1:65198 (9 connections now open)
Mon Dec  2 17:42:09.059 [conn676] end connection 127.0.0.1:65199 (8 connections now open)
Mon Dec  2 17:42:09.059 [conn677] end connection 127.0.0.1:65200 (8 connections now open)
Mon Dec  2 17:42:09.059 [conn678] end connection 127.0.0.1:65201 (7 connections now open)
Mon Dec  2 17:42:09.059 [conn679] end connection 127.0.0.1:65202 (6 connections now open)
Mon Dec  2 17:42:09.059 [conn680] end connection 127.0.0.1:65203 (5 connections now open)
Mon Dec  2 17:42:09.059 [conn681] end connection 127.0.0.1:65204 (4 connections now open)
Mon Dec  2 17:42:09.059 [conn682] end connection 127.0.0.1:65205 (3 connections now open)
Mon Dec  2 17:42:09.059 [conn683] end connection 127.0.0.1:65206 (2 connections now open)
Mon Dec  2 17:42:09.059 [conn684] end connection 127.0.0.1:65207 (2 connections now open) 
```

# bit-manipulation - 具有挑战性的位操作程序

> ID：13750243
> 
> 赞同：1
> 
> 时间：2012-12-06T18:37:12.037
> 
> 标签：bit-manipulation, bitwise-operators

这个问题出现在我老师的一次旧期末考试中。人们如何从逻辑上思考得出答案？

我熟悉位操作运算符以及十六进制和二进制之间的转换。

```
int whatisthis(int x) {
  x = (0x55555555 & x) + (0x55555555 & (x >>> 1)); 
  x = (0x33333333 & x) + (0x33333333 & (x >>> 2));
  x = (0x0f0f0f0f & x) + (0x0f0f0f0f & (x >>> 4));
  x = (0x00ff00ff & x) + (0x00ff00ff & (x >>> 8));
  x = (0x0000ffff & x) + (0x0000ffff & (x >>> 16));
return x;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:13:53.997

你没有忘记一些左移吗？

```
x = ((0x55555555 & x) <<< 1) + (0x55555555 & (x >>> 1));
x = ((0x33333333 & x) <<< 2) + (0x33333333 & (x >>> 2));
snip... 
```

这将是位从左到右的反转。
您可以看到位是一起移动而不是一个一个地移动，这导致了 O(log2(nbit)) 的成本
（您在 5 个语句中反转 2^5=32 位）

它可能会帮助您重写二进制常量，以更好地理解它是如何工作的。

如果没有左移，那我帮不了你，因为加法会产生进位，我看不出任何明显的含义......

**编辑**：好的，有趣，所以这是用于计算设置为 1 的位数（也称为人口计数或 popcount）......这是一个 16 位的吱吱声 Smalltalk 快速测试

```
| f |
f := [:x |
    | y |
    y := (x bitAnd: 16r5555) + (x >> 1 bitAnd: 16r5555).
    y := (y bitAnd: 16r3333) + (y >> 2 bitAnd: 16r3333).
    y := (y bitAnd: 16r0F0F) + (y >> 4 bitAnd: 16r0F0F).
    y := (y bitAnd: 16r00FF) + (y >> 8 bitAnd: 16r00FF).
    y].
^(0 to: 16rFFFF) detect: [:i | i bitCount ~= (f value: i)] ifNone: [nil] 
```

第一条语句处理每个位对。如果对中没有设置任何位，则生成 00，如果设置了单个位，则生成 01，如果设置了两个位，则生成 10。

```
00 -> 0+0 -> 00 = 0, no bit set
01 -> 1+0 -> 01 = 1, 1 bit set
10 -> 0+1 -> 01 = 1, 1 bit set
11 -> 1+1 -> 10 = 2, 2 bits set 
```

所以它计算每对中的位数。

第二条语句处理 4 个相邻位的组：

```
0000 -> 00+00 -> 0000 0+0=0 bits set
0001 -> 01+00 -> 0001 1+0=1 bits set
0010 -> 10+00 -> 0010 2+0=2 bits set
0100 -> 00+01 -> 0001 0+1=1 bits set
0101 -> 01+01 -> 0010 1+1=2 bits set
0110 -> 10+01 -> 0011 2+1=3 bits set
1000 -> 00+10 -> 0010 0+2=2 bits set
1001 -> 01+10 -> 0011 1+2=3 bits set
1010 -> 10+10 -> 0100 2+2=4 bits set 
```

所以，虽然第一步确实用这对中设置的位数替换了每对位，但第二步确实在每对中添加了这个计数......

接下来将处理每组 8 个相邻位，并将两组 4 中的位数相加...

# mediaelement.js - 如何使用 mediaelement.js 触发全屏？

> ID：13750245
> 
> 赞同：5
> 
> 时间：2012-12-06T18:37:14.160
> 
> 标签：mediaelement.js

我想在播放 MediaElement 视频时触发全屏。

```
$('video').on("play", function () {
     //fullscreen mode
}); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:47:36.030

确保您有 jquery 1.7 或更高版本才能使用 on 功能。那么这应该工作：

```
player = new MediaElementPlayer('video');
$('video').on("play", function() {
    player.enterFullScreen();
}); 
```

# eclipse - 在 Eclipse 中拖放 - java 项目

> ID：13750246
> 
> 赞同：0
> 
> 时间：2012-12-06T18:37:17.337
> 
> 标签：eclipse, drag-and-drop

我无法将文件从我的 finder（在 mac OSX 上）拖放到任何 eclipse 项目文件夹中。更令人惊讶的是，当我直接在 finder 中将文件添加到 eclipse 工作区时，我没有发现它已添加到 eclipse 工作区的视图中。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T14:58:55.300

我注意到 Mac 上的 Eclipse 有时需要很长时间才能刷新文件，这让我认为 darg&drop 不起作用。重新启动 Eclipse 没有帮助，重新启动 Mac 有帮助。无论如何，FileSync 插件似乎为我解决了这个问题。

不过还是有问题。从 finder 拖放到 Eclipse 总是在 Eclipse 中创建一个副本。此外，当删除文件修改时间戳更改标记 CVS 文件脏。删除后我必须执行 cvs update。烦人和困惑。

# c - C、传递二维数组

> ID：13750247
> 
> 赞同：1
> 
> 时间：2012-12-06T18:37:19.320
> 
> 标签：c

几年来我没有使用过纯 C，但我似乎无法让这个真正基本的用例工作。这是简单 C 中的简单用例，实际情况包装在 HDF 库中，但我需要先从这个开始。

```
#include <stdio.h>

void print_data(float **data, int I, int J)
{
    for(int i=0;i<I;i++)
    {
        for(int j=0;j<J;j++)
            printf("%02.2f\t", data[i][j]);
        printf("\n");
    }
}
void initialize_data(float **data, int I, int J)
{
    for(int i=0;i<I;i++)
        for(int j=0;j<J;j++)
            data[i][j] = i * 6 + j + 1;
}
int main(int argc, char *argv[])
{
    float data[4][6];
    int I=4;
    int J=6;
    initialize_data((float **)data, 4,6);
    print_data((float **)data, 4, 6);
    return 0;
} 
```

上述程序将导致失败并引发 EXC_BAD_ACCESS 信号。GDB 输出：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x00007fff5fc0131a
0x0000000100000de6 in initialize_data (data=0x7fff5fbff348, I=4, J=6) at simple.c:16
16              data[i][j] = i * 6 + j + 1; 
```

我知道这真的很愚蠢，但我正在竭尽全力试图弄清楚这个简单的事情。有人可以为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T18:42:09.107

```
void print_data(float **data, int I, int J) 
```

需要一个指向 (数组的第一个元素) 的指针数组`float`。

但是当你通过

```
float data[4][6]; 
```

你传递一个指向`float[6]`.

所以在 中`print_data`，访问

```
data[i] 
```

在地址保存后的字节`sizeof(float*)`偏移处读取字节，并将这些字节解释为然后在.`i * sizeof(float*)``data``float*``data[i][j]`

所以当你传递你的二维数组时，一些`float`值被解释为指针然后跟随。这通常会导致分段错误。

您可以声明

```
void print_data(float (*data)[6], int I, int J) 
```

并传递你的二维数组，或者你需要传递一个指针数组，

```
float *rows[4];
for(i = 0; i < 4; ++i) {
    rows[i] = &data[i][0];
} 
```

并通过`rows`。或者，第三种可能性是传递并期望一个平面数组

```
void initialize_data(float* data, int I, int J) {
    for(i = 0; i < I; ++i) {
        for(j = 0; j < J; ++j) {
            data[i*J + j] = whatever;
        }
    }
} 
```

并`&data[0][0]`从`main`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:41:36.813

二维数组不会被评估为指向指针的指针，因此您需要在原型中使用指向数组的指针数组：

```
void print_data(float data[4][6]);
void print_data(float (*data)[6]); 
```

# javascript - 查找从 jQuery datepicker 选择的两个日期之间的差异

> ID：13750250
> 
> 赞同：0
> 
> 时间：2012-12-06T18:37:22.757
> 
> 标签：javascript, jquery, asp.net, datepicker

我有两个通过 jQuery datepickers 选择日期的文本框。我想在 JavaScript 中访问它们并找出它们之间的天数差异。

我通过文本框的 clientID 访问日期并简单地获取差异，但这对我不起作用。是否有一些特定的方法可以从通过 datepicker 填充的文本框中访问日期值以及任何特殊的方法来查找天数的差异？

我的日期字段：

```
<td style="width: 15%">
    <asp:TextBox ID="txtStartDt" runat="server" Enabled="true" Width="80%" ValidationGroup="Save"></asp:TextBox>
    <img alt="Select Date" src="../Images/show-calendar.gif" border="0" style="width: 17px; height: 16px;"  onclick="javascript:calendarPicker('ContentPlaceHolder1_txtStartDt')" id="IMG1" />
</td>
<td style="width: 9%">
    <asp:Label ID="Label3" runat="server" CssClass="label">End Date:</asp:Label>
</td>
<td style="width: 248px">
    <asp:TextBox ID="txtEndDt" runat="server" Enabled="true" Width="126px"></asp:TextBox>
    <img alt="Select Date" src="../Images/show-calendar.gif" border="0" style="width: 17px; height: 16px;" onclick="javascript:calendarPicker('ContentPlaceHolder1_txtEndDt')" id="IMG2" />
</td> 
```

我的 JavaScript：

```
function CheckDuration() {
    var toDate1 = document.getElementById('<% =txtStartDt.ClientID%>');
    var toDate2 = new Date(toDate1.value.replace('-', ' '));

    var toDate = toDate2.setDate(toDate2.getDate());

    var toDate4 = document.getElementById('<% =txtEndDt.ClientID%>');
    var toDate5 = new Date(toDate1.value.replace('-', ' '));

    var toDate6 = toDate2.setDate(toDate2.getDate());

    if ((toDate6 - toDate) > 30)
        confirm("Selected time period is of more than 1 month duration");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:42:41.010

有内置方法可以从具有日期选择器的输入中获取日期，并且该日期将是一个 javascript 日期对象，您可以在其上使用诸如`getTime()`从纪元获取毫秒数之类的函数，然后从另一个中减去一个：

```
var from_date = $("#from_input").datepicker('getDate'),
    to_date   = $("#to_input").datepicker('getDate');

var diff_in_milliseconds = to_date.getTime() - from_date.getTime(); 
```

现在你必须弄清楚一天有多少毫秒？

**编辑：**

我将为此添加一个示例

[**小提琴**](http://jsfiddle.net/VhBA8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:55:30.603

```
function CheckDuration() {
                //                alert("");

                var toDate1 = document.getElementById('<% =txtStartDt.ClientID%>');
                var toDate2 = new Date(toDate1.value.replace('-', ' '));

                var toDate = toDate2.setDate(toDate2.getDate());

                var toDate4 = document.getElementById('<% =txtEndDt.ClientID%>');
                var toDate5 = new Date(toDate4.value.replace('-', ' '));

                var toDate6 = toDate5.setDate(toDate5.getDate());

                if (toDate && toDate6) {
                       diff = ((toDate6 - toDate) / 86400000);

      //                        alert(diff);
                        if(diff>30)
                        return confirm("Selected time period is of more than 1 month duration");
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:56:51.400

使用以下 Java 脚本，您会发现 date. 假设有两个名称为 dtpEventDate = '06/12/2012' 和 dtpEndDate = '08/12/2012' 的盒子

```
var fa = dtpEventDate.split('/')
var ta = dtpEndDate.split('/')

//  var a = new Date(fa[1]-1,fa[0],fa[2]);          
//  var d = new Date(ta[1]-1,ta[0],ta[2]); for MM-dd-yyyy

    var a = new Date(fa[2],fa[1]-1,fa[0]);
    var d = new Date(ta[2],ta[1]-1,ta[0]); // for dd-MM-yyyy 
```

使用 var a 和 d 我们可以找到日期之间的差异

# python - 如何获取字符串中的第一个单词

> ID：13750265
> 
> 赞同：79
> 
> 时间：2012-12-06T18:38:11.570
> 
> 标签：python, regex

文字是：

```
WYATT    - Ranked # 855 with    0.006   %
XAVIER   - Ranked # 587 with    0.013   %
YONG     - Ranked # 921 with    0.006   %
YOUNG    - Ranked # 807 with    0.007   % 
```

我只想得到

```
WYATT
XAVIER
YONG
YOUNG 
```

我试过 ：

```
(.*)?[ ] 
```

但它给了我：

```
WYATT    - Ranked 
```

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-12-06T18:41:03.647

正则表达式对此是不必要的。只需使用`some_string.split(' ', 1)[0]`or `some_string.partition(' ')[0]`。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-10-18T12:58:18.867

如果你想感觉特别狡猾，你可以这样写：

```
(firstWord, rest) = yourLine.split(maxsplit=1) 
```

这应该带来两全其美：

*   `maxsplit`与任何空白分割时的最优性调整
*   [正如该技术的作者所说，](http://blog.ram.rachum.com/post/1198230058/python-idiom-for-taking-the-single-item-from-a)提高了可靠性和可读性。

我有点爱上了这个解决方案，它具有一般的拆包能力，所以我不得不分享它。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-01-12T13:52:04.690

你应该这样做：

```
print line.split()[0] 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-06T18:39:17.400

使用这个正则表达式

```
^\w+ 
```

* * *

`\w+`匹配 1 到多个字符。

`\w`类似于`[a-zA-Z0-9_]`

`^`描述字符串的开头

* * *

**关于您的正则表达式**

你的正则表达式`(.*)?[ ]`应该是`^(.*?)[ ]`或者`^(.*?)(?=[ ])`如果你不想要空间

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-06T18:47:02.237

不需要`regex`. `string[: string.find(' ')]`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-06T18:42:38.607

您不需要正则表达式在空格上拆分字符串：

```
In [1]: text = '''WYATT    - Ranked # 855 with    0.006   %
   ...: XAVIER   - Ranked # 587 with    0.013   %
   ...: YONG     - Ranked # 921 with    0.006   %
   ...: YOUNG    - Ranked # 807 with    0.007   %'''

In [2]: print '\n'.join(line.split()[0] for line in text.split('\n'))
WYATT
XAVIER
YONG
YOUNG 
```

# android - 使用 sharedpreferences 作为密码 - android

> ID：13750267
> 
> 赞同：0
> 
> 时间：2012-12-06T18:38:17.997
> 
> 标签：android, sharedpreferences

先生，如何在其他类中访问我的 sharedpreferences 文件？我希望应用程序的默认密码为 1234，然后如果用户想要更改它。我已经使用了这个代码，它是第一次工作，但是当我重新启动应用程序时，它会恢复到旧密码。提前感谢您的帮助

```
public class ChangePassword extends Activity {
/** Called when the activity is first created. */
EditText enterPassword, newPassword;
public final String filename = "PasswordFile";
String myPassword;
SharedPreferences myFolder;
public static String dataReturned = "";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.changepassword);
    Button save = (Button)findViewById(R.id.btnSavePassword);
    enterPassword = (EditText)findViewById(R.id.etCurrentPassword);
    newPassword = (EditText)findViewById(R.id.etNewPassword);
    myFolder = getSharedPreferences(filename, 0);//a folder
    dataReturned = myFolder.getString("passwordKey", "");
    if(dataReturned.equals(""))
    {
        SharedPreferences.Editor editor = myFolder.edit();
        editor.putString("passwordKey", "1234"); //newData is new pass, passwordKey is key
        editor.commit();
    }

    save.setOnClickListener(new OnClickListener()
    {
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            String stringData = enterPassword.getText().toString().trim();
            dataReturned = myFolder.getString("passwordKey", ""); //key/def message
            //if stored password is equal to entered password
            if(dataReturned.equals(stringData))
            {
                String newData = newPassword.getText().toString().trim();
                SharedPreferences.Editor editor = myFolder.edit();
                editor.putString("passwordKey", newData); //newData is new pass, passwordKey is key
                editor.commit();
                dataReturned  = myFolder.getString("passwordKey", "couldn't load data"); //get file from sharedpref
                Toast.makeText(getApplicationContext(),
                        "Password successfully changed",
                        Toast.LENGTH_LONG).show();
                enterPassword.setText("");
                newPassword.setText("");
            }
            else 
            {
                Toast.makeText(getApplicationContext(),
                        "Wrong password!",
                        Toast.LENGTH_LONG).show();
                enterPassword.setText("");
                newPassword.setText("");
            }
        }
    });
}//oncreate()

} 
```

这是我想在我的其他班级中使用保存在 sharedpreferences 中的数据的地方

```
public void dispatch_button_action(View view){
    final EditText password_input = new EditText(this); // create an text input field
    password_input.setHint("Enter Password"); // put a hint in it
    password_input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD); // change it to password type

    AlertDialog.Builder alertDialog = new Builder(this); // create an alert box
    alertDialog.setTitle("Enter Password"); // set the title
    alertDialog.setView(password_input);  // insert the password text field in the alert box
    alertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() { // define the 'OK' button
        public void onClick(DialogInterface dialog, int which) {
             String entered_password = password_input.getText().toString();
             String password = ChangePassword.myFolder.getString("passwordKey", "");
             if(!password.trim().equals(""))
             {
                 testPassAndSendSms(password.trim(), entered_password);
             }
             else
             {
                 testPassAndSendSms(my_password, entered_password);
             }

        } 
    });
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() { // define the 'Cancel' button
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        } 
    });
    alertDialog.show(); // show the alert box
}//end dispatch_button 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:48:01.460

目前您没有保存用户在 Alertbox 中输入的最新密码，因此在另一个活动中将 SharedPreferences 中的最新密码保存为：

```
 alertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() { 
  public void onClick(DialogInterface dialog, int which) {
   String entered_password = password_input.getText().toString();
   SharedPreferences myFolder = You_Current_Activitu.this.getSharedPreferences(filename, 0);
        String  dataReturned = myFolder.getString("passwordKey", "");
        if(dataReturned.equals(""))
        {
            SharedPreferences.Editor editor = myFolder.edit();
            editor.putString("passwordKey", entered_password); 
            editor.commit();
        } 
```

# javascript - 获取下拉列表的选定值

> ID：13750268
> 
> 赞同：0
> 
> 时间：2012-12-06T18:38:28.723
> 
> 标签：javascript, asp.net

我已经使用 jQuery 脚本在客户端填写了我的下拉列表。

但是，在回发时，下拉列表的选定值不会得到维护。

如何将所选值设置为服务器端的下拉列表或者是否可以在客户端...

我正在动态创建我的下拉列表，我的下拉列表是一个服务器端控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:40:46.530

在客户端：

设置值`$("#the_select").val(the_value);`

获得价值`$("#the_select").val();`

# ruby - 将 jQuery 翻译成 Watir

> ID：13750270
> 
> 赞同：1
> 
> 时间：2012-12-06T18:38:45.740
> 
> 标签：ruby, watir

我完全有可能遗漏了一些基本的东西，但这对我来说是一个新领域，我可以使用一些指针。我开始使用 Ruby 和 Watir 来驱动/测试一个完全由 AJAX 构建的 Web 应用程序。许多项目没有明确的类/ID，开发团队当然使用 jQuery 来获取它们。我正在寻找一种将他们的 jQuery 转换为 Watir 以使用/修改/检查相同对象的值的方法。

例如，他们使用它来查看数据网格的第五列中是否有值：

```
$("div.dataTable table tbody tr").has("td:eq(4):not(:empty)").length > 0 
```

我将如何去做类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:05:56.250

您可以使用以下方法在 Watir 中进行相同的检查：

```
#Get the rows of the table (assuming there is just one dataTable)
table_trs = browser.div(:class, 'dataTable').table.tbody.trs

#Find how many rows have data in the 5th cell
#  Note that both jQuery and Watir are 0-based index (ie 4 means 5th cell)
rows_with_data = table_trs.count{ |tr| tr.td(:index, 4).text != '' }

#Do your comparison
rows_with_data > 0 
```

您可以将其全部写成一行，但为了便于阅读，我在这里将其拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T20:59:09.903

您也可以使用[Pincers](http://github.com/platanus/pincers)。它是一个小的 ruby​​ gem，就像 Watir 一样，但在 Webdriver 之上提供了一个类似于 jQuery 的 API。

例子：

```
require('selenium-webdriver')
require('pincers')
driver = Selenium::WebDriver.for :firefox
pincers = Pincers.for_webdriver driver
pincers.goto 'www.somesite.com'
pincers.css('a#link-id').click 
```

（披露：我在 Platanus 工作。）

# r - 什么时候值得使用`data.table`？我什么时候可以期待最大的性能提升？

> ID：13750284
> 
> 赞同：13
> 
> 时间：2012-12-06T18:39:27.093
> 
> 标签：r, data.table

我刚刚花了一些时间研究`data.table`R 并且想知道在什么条件下我可以期望获得最大的性能提升。也许简单的答案是当我有一个大的 data.frame 并且经常在这个 data.frame 的子集上操作时。当我只是加载数据文件和估计模型时，我不能期待太多，但许多`[`操作会有所作为。这是真的，唯一的答案还是我应该考虑什么？什么时候开始重要？10x5、1,000x5、1,000,000x5？

编辑：一些评论表明这`data.table`通常更快，同样重要的是，几乎从不慢。所以知道什么时候不使用也很好`data.table`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T19:21:52.927

至少有几种情况会`data.table`大放异彩：

*   使用新结果更新现有数据集。因为`data.table`是按引用的，所以[速度要快得多](https://stackoverflow.com/questions/11486369/growing-a-data-frame-in-a-memory-efficient-manner/11486400#11486400)。
*   Split-apply-combine 类型策略与大量组进行拆分（正如@PaulHiemstra 的回答所指出的那样）。
*   对真正的大型数据集执行几乎任何操作。

以下是一些基准： [基准 data.frame (base)、data.frame(package dataframe) 和 data.table](https://stackoverflow.com/questions/10721615/benchmarking-data-frame-base-data-framepackage-dataframe-and-data-table/10721803#10721803)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T19:01:50.977

一个`data.table`非常快速的例子是成名的拆分应用组合类型的工作`plyr`。假设您有`data.frame`以下数据：

```
precipitation     time   station_id
23.3              1      A01
24.1              2      A01
26.1              1      A02
etc etc 
```

当您需要对每个站点 id 进行平均时，您可以使用许多 R 函数，例如`ave`、`ddply`或`data.table`。如果独特元素的数量`station_id`增加，则可以`data.table`很好地扩展，而例如`ddply`get 的速度非常慢。[可以在我的博客上](http://www.numbertheory.nl/2011/10/28/comparison-of-ave-ddply-and-data-table/)的这篇文章中找到更多详细信息，包括示例。该测试表明速度增加超过 150 倍是可能的。这种差异可能会更大......

# jquery - 放大/缩小容器中心的可拖动图像

> ID：13750286
> 
> 赞同：1
> 
> 时间：2012-12-06T18:39:40.540
> 
> 标签：jquery, jquery-ui

使用脚本制作照片查看器，用户可以在其中拖动图像并缩放它以保持中心固定。我正在使用 jquery 滑块来放大和缩小图像。基本上它应该在容器的中心缩放图像。但是当我在拖动后尝试缩放它时，它一直在跳跃。在这里您可以查看我的一些代码-

```
function resize_img(val)
{
    var maxZoom =50; //50% zoom

    var width=globalElement_width; //original image width
    var height=globalElement_height; //original image height
    var zoom = maxZoom / 100;
    var zoom_percen_w = width * zoom;
    var zoom_percen_h = height * zoom;
    var ASPECT_W = zoom_percen_w / maxZoom;
    var ASPECT_H = zoom_percen_h / maxZoom;
    var zoom_value = val * zoom;
    var setWidth = width + ASPECT_W * zoom_value;
    var setHeight = height + ASPECT_H * zoom_value;

    $img = $('.canvas img');

    var setLeft = 0 -(ASPECT_W * zoom_value/2);
    var setTop = 0 - (ASPECT_H * zoom_value/2);

    $img.css('width',setWidth+'px');
    $img.css('height',setHeight+'px');
    $img.css('left',setLeft+'px');
    $img.css('top',setTop+'px');
    .................... 
```

完整的演示链接 - [http://jsfiddle.net/hirenbg89/Qv35B/13/](http://jsfiddle.net/hirenbg89/Qv35B/13/)

帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:58:49.970

您需要抓住当前的左/上位置并据此更改定位。据我所知，你总是从 0 开始：

```
var setLeft = 0 -(ASPECT_W * zoom_value/2);
var setTop = 0 - (ASPECT_H * zoom_value/2); 
```

# java - 如何使用 Java 解码 html 代码？

> ID：13750290
> 
> 赞同：8
> 
> 时间：2012-12-06T18:39:58.050
> 
> 标签：java, html, regex, decode

> **可能重复：**
> [Java：如何在 Java 中解码 HTML 字符实体，如 HttpUtility.HtmlDecode？](https://stackoverflow.com/questions/994331/java-how-to-decode-html-character-entities-in-java-like-httputility-htmldecode)

我需要`title`从文件中提取段落（如在 StackOverflow 中）`html`。

我可以使用 Java 中的正则表达式来提取我需要的字段，但我必须得到`decode`这些字段。

**例子**

提取的字段：

```
Paging Lucene&#39s search results (with **;** among **&#39** and **s**) 
```

解码后的字段：

```
Paging Lucene's search results 
```

java中是否有任何类可以让我转换这些html代码？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-06T18:41:15.360

[Apache Commons Lang](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)提供的使用方法

```
import org.apache.commons.lang.StringEscapeUtils;
// ...
String afterDecoding = StringEscapeUtils.unescapeHtml(beforeDecoding); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:12:07.117

# c++ - C++ DLL 返回指向 std::list 的指针

> ID：13750293
> 
> 赞同：2
> 
> 时间：2012-12-06T18:40:02.230
> 
> 标签：c++, pointers, dll, windows-xp, windows-vista

我得到了一个具有以下原型的 dll：

```
DLL_EXPORT std::list<std::wstring>* c_ExplodeWStringToList(std::wstring in_delimiter, std::wstring in_string, int in_limit); 
```

该应用程序这样使用：

```
std::list<std::wstring>* exploded = mydllclass->c_ExplodeWStringToList(L" ", in_command.c_str(), 0); 
```

这在 XP 32 下工作得很好，但是当我在家里用我的 Vista 64 尝试这个时，我的程序就会自行关闭。没有错误也没有警告？

几天前，DLL 直接返回列表 - 没有指针。但是我切换到 VC++ 2010 Express，如果没有这个修改，我就无法编译我的 DLL。

有什么我在这里没有看到的吗？

谢谢 ：）

更新：

```
DLL_EXPORT std::list<std::wstring>* c_ExplodeWStringToList(std::wstring in_delimiter, std::wstring in_string, int in_limit)
{
 std::list<std::wstring>* returnlist = new std::list<std::wstring>();
 std::list<std::wstring>* stringlist = new std::list<std::wstring>();
 UINT pos = 0;

 while(true)
 {
      pos = in_string.find(in_delimiter, 0);

      if(pos == std::string::npos)
      {

           stringlist->push_back(in_string.substr(0, pos));
           break;
      }
      else
      {

           stringlist->push_back(in_string.substr(0, pos));
           in_string = in_string.substr(pos + in_delimiter.length());
      }
 }

 // ****
// Here is missing some code I've commented out while searching for the error.
 // ****
returnlist = stringlist;

return returnlist;
} 
```

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:54:21.817

我没有深入研究代码，但我得出的关于使用 DLL 的结论是，除了从 DLL 函数返回原始类型之外，不返回任何内容。这是因为由于不同的编译器或不同的开关或项目设置，结构和类没有对齐，在 DLL 和调用 DLL 的代码中的大小相同。

因此，从 DLL 返回列表可能被认为在调用者应用程序中格式错误。

从 DLL 中抛出异常也是一样——抛出的类可能会被捕获代码误解。

因此，最好只导出返回原始类型（以表示错误代码）的 C 函数。

# jquery - jQuery FormData POST - 用于文件上传

> ID：13750294
> 
> 赞同：5
> 
> 时间：2012-12-06T18:40:15.333
> 
> 标签：jquery, html, file-upload, asyncfileupload

我正在尝试使用 jQuery 提交用于服务器端处理的完整表单。该表单包含各种字段，包括文件上传选项。我正在尝试使用 FormData 来执行此操作，因为我不关心目前不支持它的浏览器。

我有以下（简化的）jQuery 代码：

```
$("#create_event_form").submit(function(event) {
    event.preventDefault();

    var formData = new FormData($(this));

    $.post(
        "create_entity.php",
        { formData: formData },
        function(data) {
            var response = jQuery.parseJSON(data);
            if(response.code == "success") {
                alert("Success!");
            } else if(response.code == "failure") {
                alert(response.err);
            }
        }
    );
}); 
```

我的服务器端如下所示：

```
<?php
require_once('includes/database.php');

$dbh = db_connect();

$response = array();
if($_SERVER['REQUEST_METHOD'] == "POST") {
    // do some other stuff...       

    // upload entity picture and update database
    $url = $_FILES['entity_pic']['name'];
    if($url != "") {
        if($type == "user") {
            $pic_loc = "images/profiles/";
        } else if($type == "chapter") {
            $pic_loc = "images/chapters/";
        } else if($type == "group") {
            $pic_loc = "images/groups/";
        } else if($type == "event") {
            $pic_loc = "images/events/";
        }
        // upload the picture if it's not already uploaded
        if(!file_exists($pic_loc . $_FILES['entity_pic']['name'])) {
            move_uploaded_file($_FILES['entity_pic']['tmp_name'], $pic_loc . $url);
        }
        $image_query = "INSERT INTO image (entity_id, url, type) VALUES (:entity_id, :url, :type);";
        $image_query_stmt = $dbh->prepare($image_query);
        $image_query_stmt->bindParam(":entity_id", $entity_id);
        $image_query_stmt->bindParam(":url", $url);
        $image_query_stmt->bindValue(":type", $type);
        if(!$image_query_stmt->execute()) {
            die(print_r($image_query_stmt->errorInfo()));
        }
    }

    echo json_encode($response);

} 
```

?>

以及一些相关的 HTML：

```
<form id="create_event_form" action="create_entity.php" method="POST" enctype='multipart/form-data'>
    <input type="file" name="entity_pic" value="Insert Photo" />
    <!-- other inputs -->
</form> 
```

现在我收到一个非法调用错误，大概是在我初始化我的 FormData 对象时。我一直在寻找有关如何使用 jQuery 执行此操作的示例，但结果是空的。另外，我想澄清一下我的服务器端代码可以工作。当我将 formData 作为“formData”传递给我的 PHP 脚本时，如何访问其中的字段？会是 "$_POST['formData']['field_name']" 还是只是 $_POST['field_name'] 或者完全是别的什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T18:47:33.200

`FormData`在其构造函数中采用表单元素而不是 jQuery 对象 -`var formData = new FormData(this);`

您已经为 jQuery ajax 设置了一些选项来处理 formdata 对象，因此您应该使用 $.ajax 而不是 $.post，并将 formdata 本身作为数据传递。

```
$.ajax({
  url: "create_entity.php",
  data: formData,
  processData: false,
  contentType: false,
  type: 'POST',
  success: function(data) {
        var response = jQuery.parseJSON(data);
        if(response.code == "success") {
            alert("Success!");
        } else if(response.code == "failure") {
            alert(response.err);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:51:20.213

要回答你的最后一个问题，我相信它会是 $_POST['field_name']。查看这篇文章以获取有关您正在寻找的实现的一些信息： [Sending multipart/formdata with jQuery.ajax](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)

希望这可以帮助 ：）

# c++ - 在 OSX 10.8.2 中覆盖“new”和“delete”时崩溃

> ID：13750295
> 
> 赞同：0
> 
> 时间：2012-12-06T18:40:24.510
> 
> 标签：c++, macos

我最近开始在我的代码中出现崩溃，我不得不覆盖默认值`new`，`delete`我不完全确定，但它可能是在最近的软件更新之后。

我正在运行 Osx 10.8.2 build 12C54 和以下 gcc ：

i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1

这是我崩溃的堆栈跟踪。

```
(gdb) bt
#0  0x00007fff8f2a4212 in __pthread_kill ()
#1  0x00007fff8fdecaf4 in pthread_kill ()
#2  0x00007fff8fe30dce in abort ()
#3  0x00007fff8fe04959 in free ()
#4  0x00000001009cd947 in foundation::aligned_free ()
#5  0x00000001009e5322 in (anonymous namespace)::delete_impl ()
#6  0x00000001009e53e8 in operator delete[] ()
#7  0x00007fff87316ecc in TPropertyStream::SetLength ()
#8  0x00007fff87286099 in TPropertyStream::WriteData ()
#9  0x00007fff87286037 in TPropertyStream::Write ()
#10 0x00007fff87285ce7 in IAStoreStream::MaybeFlushBuffer ()
#11 0x00007fff87285641 in BuddyStorage::Commit ()
#12 0x00007fff87316c4c in TPropertyInfo::FlushChanges ()
#13 0x00007fff873169af in TPropertyInfo::FlushChanges ()
#14 0x00007fff8729ac47 in THFSPlusPropertyStore::FlushChanges ()
#15 0x00007fff872dc5e4 in TFSVolumeInfo::FlushVolumes ()
#16 0x00007fff872b087a in TNode::HandleFlushVolumes ()
#17 0x00007fff872684d3 in TNode::HandleNodeRequest ()
#18 0x00007fff872db4e7 in __block_global_1 ()
#19 0x00007fff87268040 in ExceptionSafeBlock ()
#20 0x00007fff87267fe1 in __PostNodeTaskRequest_block_invoke_0 ()
#21 0x00007fff8e074f01 in _dispatch_call_block_and_release ()
#22 0x00007fff8e0710b6 in _dispatch_client_callout ()
#23 0x00007fff8e07247f in _dispatch_queue_drain ()
#24 0x00007fff8e0722f1 in _dispatch_queue_invoke ()
#25 0x00007fff8e0721c3 in _dispatch_worker_thread2 ()
#26 0x00007fff8fdedcab in _pthread_wqthread ()
#27 0x00007fff8fdd8171 in start_wqthread () 
```

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:25:16.493

Jon 很乐意将我们的问题发布在 SO 上。我是相关代码的作者。多年来，我们一直在 Mac OS X 上发布代码，没有出现任何问题。我们还提供 Windows（32 位和 64 位）和多种 Linux 版本。Mac OS X 最近才开始出现问题。

基本上，我们的应用程序是由使用几个共享库（Mac OS X 上的 .dylib）的几个二进制文件组成的。`new`和的所有变体`delete`都在这些共享库之一中重载。它们不应该被其他共享库和二进制文件导出和使用，实际上它们不在 Windows 上。作为参考，重载的运算符在[这里](https://github.com/jupiter-jazz/appleseed/blob/master/src/appleseed/main/allocator.cpp#L472)。

我不确定到底发生了什么，但是**上面的调用堆栈似乎表明某些 Mac OS X 代码正在使用我们自己的`delete`运算符释放内存，而且我不完全确定内存是通过我们的过载分配的`new`，或者如果它完全被分配了另一个内存子系统。**

无论如何，它真的不应该使用我们的运算符。理想情况下，重载`new`并将`delete`像 Windows 上的情况一样隐藏在外部（因为共享库符号在该平台上默认隐藏）。

该代码是使用 gcc 4.2.1 (686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (基于 Apple Inc. build 5658) (LLVM build 2336.11.00) 在 Mac OS X 10.8.2 上构建的）。除其他外，我们正在使用 Qt 4.8.2（撰写本文时的最新稳定版本）的预构建二进制文件。我们最近在 Mac OS X 上切换到更新版本的 Qt，这可能与问题有关吗？会不会是预建的 Qt 二进制文件与我们的代码有些不兼容？（我们正在动态链接 Qt，所以这应该不是问题。）

希望有足够的细节来开始对话。

弗朗茨

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:49:02.487

> 无论如何，它真的不应该使用我们的运算符。理想情况下，重载的 new 和 delete 将像 Windows 上的情况一样隐藏在外部（因为共享库符号在该平台上默认隐藏）。

通常，Unix 上共享库中的可见性对应于 C++ 中的外部链接。也就是说，如果一个项目在 C++ 语言中具有外部链接，那么它在共享库中是外部可见的。GCC 的可见性属性甚至被记录为修改链接。（或者它曾经是，我现在看不到......）

此外，加载时链接可以被认为是 C++ 翻译阶段中第 9 阶段的一部分，因此在 unix 平台上共享对象和 dylib 的加载时链接通常表现得像静态链接而不是动态链接。也就是说，如果您`operator new`在加载时链接的翻译单元中进行替换，则加载时链接器将为所有静态和加载时链接的翻译单元解决此问题，就像您`operator new`在其中一个静态链接的翻译单元中进行了替换一样。

在 C++ 中删除分配在另一个翻译单元中的一个翻译单元中分配的内存是完全合法且明确定义的。由于默认情况下加载时链接在这方面与静态链接相同，因此即使在加载时链接的翻译单元之间也有大量代码可以做到这一点。同样，只要正确理解加载时间链接是第 9 阶段的一部分并因此受 C++ 规范的约束，这是合法且定义明确的。

当然，这不适用于使用例程的完全动态链接，例如`dlopen()`在阶段 9 结束并且程序开始运行之后发生的情况。此类程序的行为是实现定义的（或在 C++03 中未定义），因此不受在一个 TU 中分配的资源可以在另一个 TU 中释放的要求的约束。

* * *

问题是 Windows 的行为方式并非如此。Windows 的加载时间链接似乎更像动态链接，并且是否导出符号或类型与 C++ 外部可见性无关。事实上，据我所知，甚至不可能`::operator new`在 Windows dll 中导出。

我不相信 Windows 的加载时间链接真的符合要求，但是很多代码必须处理它。对于只需要在一个或另一个环境中运行的代码来说，这没有问题，但对于应该在 Windows 和其他实现上运行的代码来说，它就比较棘手了。最常见的方法是简单地不超载`operator new`或`operator delete`. 您可以使用其他名称编写分配和解除分配函数，可能是 C++ Allocator 类。如果您只需要处理自己的用户定义类型，另一种选择是定义成员`operator new/delete`来处理这些类型。

# c++ - 枚举的 std::less

> ID：13750296
> 
> 赞同：6
> 
> 时间：2012-12-06T18:40:25.947
> 
> 标签：c++, enums, language-lawyer

标准是否保证`std::less<MyEnumType>`会`MyEnumType`像将值`MyEnumType`转换为适当大小的整数类型一样进行排序？

```
enum MyEnumType { E1 = 0, E2 = 6, E3 = 3 }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T18:53:30.867

是的，`std::less::operator()`定义为（§20.8.5/5）：

> `operator()`返回`x < y`

对于在枚举类型上使用关系运算符，说明如下（第 5.9/2 节）：

> 通常的算术转换是在算术或枚举类型的操作数上执行的。

对于无作用域的枚举类型，*通常的算术转换*被定义为进行整数提升。无范围枚举类型的整体提升定义为（§5/9）：

> 基础类型不固定（7.2）的无作用域枚举类型的纯右值可以转换为以下第一种类型的纯右值，该类型可以表示枚举的所有值（即范围 b [min]到 b中的值） 7.2 中描述的[最大值]`int`): , `unsigned int`, `long int`, `unsigned long int`, `long long int`, 或`unsigned long long int`.

如果可用且需要，将使用扩展整数类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T18:53:01.853

枚举的类型被定义为某种整数类型，它大到足以容纳枚举的所有值。允许编译器决定具体类型是什么（尽管现在有一种[方法可以控制它](https://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations)）。但是该类型绝对是某种整数类型，这意味着对相同枚举类型的两个值的比较运算符的行为将与您预期的一样。

# php - 获取多个文本字段的值将其存储到 var 并将其发送到 CodeIgniter

> ID：13750304
> 
> 赞同：1
> 
> 时间：2012-12-06T18:40:51.053
> 
> 标签：php, javascript, jquery, codeigniter

我有多个输入类型=文本，我想将它的所有值获取到这些字段并将其存储到 var 以通过邮寄方式将其发送到 codeigniter 控制器

示例代码：html

```
<input type=text value='value1' name='in1'>
<input type=text value='value2' name='in2'>
<input type=text value='value3' name='in3'> 
```

js

```
$('#check').click(function() { 
    var postData = $('[type=text]').value();///THIS IS LINE I NEED TO FIGURE OUT
    };
    $.ajax({
        type: 'POST',
        url: '<?=base_url()?>patients/check',
        data: postData,
        success: function(html{$('#results').show();$('#results').html(html);}})}); 
```

所以我希望codeigniter控制器患者功能检查能够看到名称=$in1 $in2等的发布数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:46:07.550

如果该表单中的唯一输入是上面列出的输入，则可以使用 .serialize() 。[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

```
var postData = $('form').serialize(); 
```

这会将数据打包为字符串：

```
'in1=value1&in2=value2&in3=value3' 
```

# c++ - const 函数继承

> ID：13750305
> 
> 赞同：0
> 
> 时间：2012-12-06T18:40:57.720
> 
> 标签：c++, function, constants

假设我有一个基类 foo

```
class foo {
    virtual int get() const = 0;
} 
```

也许还有 20 个子类 foo_1, foo_2 ... 从 foo 继承，形式如下：

```
class foo_1 : public foo {
    int get() const { return 1; }
}
...
class foo_20 : public foo {
    int get() const { return 20; }
} 
```

突然觉得生活没那么容易了！我有一个类 foo_21，它必须这样做：

```
class foo_21 : public foo {
    int get() { member_ = false; return 0; }
    bool member_;
} 
```

问题是 get 在基类中被声明为 const，我必须在子类 foo_21 中更改一些内容。我怎么能找到绕过它的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:42:28.887

您的基本功能 is not `virtual`，这使得所有这些都具有高度投机性。您的代码应该已经在您发布它时工作（尽管可能不像您期望的那样）。

您可以使用`mutable`成员：

```
class foo_21 : public foo
{
    int get() const { member_ = false; return 0; }
    mutable bool member_;
}; 
```

重要的是，可变变量不会影响类的*逻辑*常量。如果是这样，您应该重新设计您的设计。

# asp.net - 通过 http 为每个人播放相同的音频/视频

> ID：13750307
> 
> 赞同：0
> 
> 时间：2012-12-06T18:40:59.837
> 
> 标签：asp.net, .net, web, video-streaming

我想向登陆页面的每个人播放相同的音频/视频。因此，我将集中播放视频 X，任何加入该网站的人都将从视频所在的任何播放时间继续观看视频，而不是从一开始。这样，当视频完成播放时，新视频将为碰巧在页面上的每个人开始播放。

任何 .Net 解决方案都会更可取我也对不同的技术持开放态度。音频/视频格式不相关，因为我可以在不同类型之间进行转换。

提前感谢您的任何回答。

# java - 认证如何实现安全的 Web 服务？

> ID：13750309
> 
> 赞同：2
> 
> 时间：2012-12-06T18:41:01.580
> 
> 标签：java, php, certificate

我需要访问一个基于 Java 的 Web 服务，该服务仅适用于经过认证的连接。在我这边，技术是 PHP。

因此，我必须将我的证书签名请求发送给证书颁发机构。有人告诉我，我必须使用这些说明：

```
curl_setopt($ch, CURLOPT_SSLCERT, "file1"); 
curl_setopt($ch, CURLOPT_SSLKEY, "file2"); 
```

我的问题是：“file1”和“file2”是什么？证书颁发机构对我的证书请求究竟会做什么（unix 命令）？

问候，

拍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:47:14.980

file1 和 file2 是证书文件 (file1) 和密钥文件 (file2) 的文件目录

有关`curl_setopt()`查看本手册的更多信息：[单击](http://php.net/manual/en/function.curl-setopt.php)

# php - PHP试图将选择下拉列表的值回显到屏幕

> ID：13750313
> 
> 赞同：0
> 
> 时间：2012-12-06T18:41:17.797
> 
> 标签：php, select, echo

我有这个简单的代码块，可以将表格打印到屏幕上。该表包含三列和 id 、car（包含三个选项的下拉列表 ford、toyota 和 gmc）和名称。我想要做的是将特定行下拉列表选择的值打印到屏幕上。我的方法不行....

```
<?php    
//////connecting to our sql server
$db_connect=mysql_connect("XXXXXXXXXXXX", "XXXXXXXXX", "XXXXXXXXXXXXX")    
 or die("not logged in");
//////now selecting our database
$db_select=mysql_select_db("XXXXXXXXXXX") or die(mysql_error());
////query
$query = mysql_query("SELECT * FROM car "); 

echo '<form action="drop_down_car_test.php?" method="GET">';
echo '<table border = \"1\">';
echo '<tr><td>id</td><td>car</td><td>name</td>';

while($row=mysql_fetch_array($query)){
echo "<tr><td>";

////in the database 'id' is the primary auto incremented id
echo $row['id'];
echo "</td><td>";

echo "<select name='carDropDown".$row['id']."' >;
<option value=\"1\">ford</option>;
<option value=\"2\">toyota</option>;
<option value=\"3\">gmc</option>;
</select>";

echo $_GET['carDropDown'.$row['id']];

echo "</td><td>";
echo $row['name'];
echo "</td><td>";
}////end while
echo"<table>";

echo '<td bgcolor=#7FFF00><input type="submit" value="Update"></td>';
echo "</form>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:11:26.410

这是错误的：

```
echo "<select name='carDropDown' id='carDropDown'".$row['id']." >;
<option value=\"1\">ford</option>;
<option value=\"2\">toyota</option>;
<option value=\"3\">gmc</option>;
</select>";

echo $_GET['carDropDown'.$row['id']]; 
```

你想用这个 html 回显的值只是：

```
$_GET['carDropDown'] 
```

请记住，将值分配给超全局变量的是“名称”参数。这些变量中不使用 id。

但是由于您在循环中使用它，我敢打赌您想要这样的东西：

```
echo "<select name='carDropDown".$row['id']."'>;
<option value=\"1\">ford</option>;
<option value=\"2\">toyota</option>;
<option value=\"3\">gmc</option>;
</select>";

echo $_GET['carDropDown'.$row['id']]; 
```

但这里还有另一个问题......如果你打算在处理中以某种方式使用它，你需要知道所有这些 id 来获取你的值。那为什么不使用数组呢？

```
<select name='carDropDown[]'> 
```

然后你可以像这样循环遍历：

```
<?php foreach($_GET['carDropDown'] AS $car): ?>

    <?php echo $car; ?><br>

<?php endforeach; ?> 
```

不管怎样，这里的东西看起来很可疑。您是否打算让汽车表中的每一行都有一个带有福特、丰田或 gmc 选项的选择框？或者您是否尝试在其中包含所有汽车制造商的选择框 - 当更改时 - 使用该制造商的汽车填充您的查询和结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:15:19.087

您似乎没有检查是否已单击提交按钮。就像是：

```
if (isset($_GET['submit'])) {
echo value;
} 
```

# ios - symbolicatecrash 找不到任何符号

> ID：13750314
> 
> 赞同：6
> 
> 时间：2012-12-06T18:41:18.483
> 
> 标签：ios, xcode, symbolicatecrash

我正在运行 XCode 4.5.2，但在使 symbolicatecrash 正常工作时遇到问题。

请注意，这是针对不是在我的系统上生成且不在存档中的应用程序和 dsym。

到目前为止，我已经：

1.  导出 DEVELOPER_DIR=/Applications/Xcode.app sudo xcode-select
2.  sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer
3.  cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources
4.  ./symbolicatecrash -v -o test.txt ~/Downloads/OnDeckCrash/OnDeck_2012-11-26-152754_Andys-phone.crash ~/Downloads/OnDeckCrash/OnDeck.app.dSYM

这没有创建“test.txt”。它似乎根本找不到任何符号。它为每个模块报告类似的内容：

```
...........fetching symbol file for CoreFoundation--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of e30fc309df7b3c9f8ac57f0f6047d65f
Running mdfind "com_apple_xcode_dsym_uuids == E30FC309-DF7B-3C9F-8AC5-7F0F6047D65F"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 
```

请注意，应用程序包与 mSYM 包位于同一目录中。我还尝试将 symbolicatecrash 添加到我的路径中，并从 .dSYM 和 .app 所在的目录执行。那没什么区别。

关于如何让它工作的任何建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T09:51:58.973

我今天遇到了同样的问题。在我的情况下，mdfind 无法搜索 Archives (/Users/xxx/Library/Developer/Xcode/Archives/) 文件夹。所以我所做的是转到系统偏好设置-> 聚光灯-> 隐私，添加然后删除档案文件夹。重启 Xcode 或重新符号化

mdfind 用于 symbolicatecrash 以在您的情况下使用 uuid 查找相对于崩溃文件的 dsym

```
mdfind "com_apple_xcode_dsym_uuids == E30FC309-DF7B-3C9F-8AC5-7F0F6047D65F" 
```

你也可以运行

```
mdfind "com_apple_xcode_dsym_uuids == *" 
```

列出 mdfind 知道的所有 dsym 位置。这会让你知道你的 dsym 是否在列表中

还为您的 dsym 运行此程序以获取您的应用程序的 uuid

```
dwarfdump --uuid xxx.app.dSYM/| tr '[:upper:]' '[:lower:]' | tr -d '-' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T10:00:25.930

如果您从未将崩溃的设备连接到您的计算机，则您没有此设备的符号文件。这就是 symbolicatecrash 找不到系统库的 dsym 文件的原因。

只需将您的设备连接到计算机并等待 xcode 下载符号文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-25T06:47:48.137

此问题与[如何告诉 Spotlight 为我的 .dSYM 捆绑包编制索引有关？](https://stackoverflow.com/questions/20715303/how-can-i-tell-spotlight-to-index-my-dsym-bundles)

我试图在我的 ~/Library 中强制导入 dSYM，但没有成功，所以答案是：

```
FINAL SOLUTION

Configure Xcode so that the archive folder is located outside of ~/Library. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:50:27.783

On line 4 the last argument should be the directory that contains the .app and the .dSYM. At least that is what I do when I run the `symbolicatecrash` script from the command line.

# vba - Microsoft Access 子窗体不会填充

> ID：13750316
> 
> 赞同：1
> 
> 时间：2012-12-06T18:41:33.583
> 
> 标签：vba, ms-access, subform

我有一些代码可以用记录集填充主窗体上的单个子窗体。问题是记录没有显示在子表单上。如果我将子表单作为自己的表单打开，那么使用几乎相同的代码它可以完美地工作：

```
Forms!frmCorrespondanceHolidays.RecordSource = strsql ' WORKS FINE
Me.frmCorrespondanceHolidays.Form.RecordSource = strsql 'SHOWS NO RECORDS 
```

我已经测试过，如果我只是将 strSQL 的值粘贴到查询中，则会返回正确的记录。我开始认为这是 Access 中的一个错误。我尝试通过创建一个新数据库并导入所有对象来重新创建数据库。我也有紧凑和修复。不知道还有什么可以尝试的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:47:58.143

子表单的名称与子报表的源名称不同。您需要在此处查找要在 VBA 中引用的名称。当父窗体在设计视图中并查看属性时，您选择子窗体一次。

![VBA 的子窗体名称](../Images/c48e94fd8b708f9514181b1bf39d3541.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:43:55.417

经过进一步调查，我发现它与 sql 而不是子表单有关。如果 sql 包含不引用父表单记录的查询，则会显示。如果 sql 包含引用表单的查询，则不显示任何记录。我想我将不得不解决这个限制。感谢您的指点。

# sql - SQL Server 替换功能 #2

> ID：13750318
> 
> 赞同：1
> 
> 时间：2012-12-06T18:41:38.070
> 
> 标签：sql, sql-server

我有大约 1000 行用于生成这样的数据库：

```
INSERT INTO cfg_locale VALUES(1,8,1,0,0,'Unknown Switch Type','Enum_CfgSwitchType')
INSERT INTO cfg_locale VALUES(1,8,1,1,0,'Nortel Meridian 1','Enum_CfgSwitchType')
INSERT INTO cfg_locale VALUES(1,8,1,2,0,'Rockwell Spectrum','Enum_CfgSwitchType')
INSERT INTO cfg_locale VALUES(1,8,1,3,0,'Rockwell Galaxy','Enum_CfgSwitchType')
INSERT INTO cfg_locale VALUES(1,8,1,4,0,'Nortel Communication Server 2000/2100','Enum_CfgSwitchType')
INSERT INTO cfg_locale VALUES(1,8,1,5,0,'Avaya Communication Manager','Enum_CfgSwitchType') 
```

请注意，我需要将此数据库翻译成法语（娱乐不是一种选择）

以下是法语配置文件的示例：

```
INSERT INTO cfg_locale VALUES(1,8,29,0,0,'Type de HA inconnu','CFGHTNoHAType')
INSERT INTO cfg_locale VALUES(1,8,29,1,0,'Non spécifié','CFGHTColdStanby')
INSERT INTO cfg_locale VALUES(1,8,29,2,0,'Reprise intermédiaire','CFGHTWarmStanby')
INSERT INTO cfg_locale VALUES(1,8,29,3,0,'Reprise immédiate','CFGHTHotStanby') 
```

我刚在想 ：

```
REPLACE((cfg_locale VALUES(1,8,1,0,0,'Unknown Switch Type','Enum_CfgSwitchType')),INSERT INTO cfg_locale VALUES(1,8,29,0,0,'Type de HA inconnu','CFGHTNoHAType')) 
```

这显然不起作用（SQL NOOB）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:50:54.193

If you want to update existing data you would have to do something like

```
Update cfg_locale set Field='Type de HA inconnu',Field2='CFGHTNoHAType'
Where Keyfield=xxxx 
```

where could could be perhaps

```
 Where Field='Unknown Switch Type' and Field2='Enum_CfgSwitchType' 
```

# haskell - haskell 将 Int 列表转换为字符串

> ID：13750322
> 
> 赞同：-2
> 
> 时间：2012-12-06T18:41:58.823
> 
> 标签：haskell

我正在使用由 0 和 1 表示的位 我有这个位列表 [[1...16],[17...32],[33...48]] 我想对应每个 8位一个 char 并在最后用函数 chr 或其他做同样事情的函数加入，并假设我有一个转换 [Bit]->Int 的函数。例如

```
 [[1...16],[17...32],[33...48]]
  [1...8] = char one
  [9...16] = char two
  [17...24] = char three
  [25...32] = char four

  Then I want to make a String = char one ++ char two ++ char three ++ char four. 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:55:50.753

假设您有一个函数`fromBits :: [Bit] -> Int`，首先将输入列表拆分为 8 个块，例如使用[`chunksOf`](http://hackage.haskell.org/packages/archive/split/latest/doc/html/Data-List-Split.html#v%3achunksOf)split[包](http://hackage.haskell.org/package/split)，然后，对于每个块，应用`fromBits`并使用[`chr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Char.html#v%3achr)将结果转换`Int`为`Char`.

```
map (chr . fromBits) $ chunksOf 8 input 
```

# xpath - xpath：选择父级和过滤的子级

> ID：13750323
> 
> 赞同：3
> 
> 时间：2012-12-06T18:42:03.660
> 
> 标签：xpath

给定一个 xml 块：

```
<parent>
    <child id="1" />
    <child id="2" />
</parent> 
```

我如何使用 xpath 返回

```
<parent>
    <child id="1" />
</parent> 
```

基于`id="1"`（不是第一个孩子）的过滤器。

我不是在寻找 xslt 或 xquery 解决方案。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:21:51.443

仅使用 XPath，您不能。

XPath 允许您从 XML 文档树中查询（选择）节点，但它不能修改树或创建新节点。因此，如果您选择原始`<parent>`节点，它将有两个`<child>`子节点，您无法更改。为了获得`<parent>`只有一个孩子的 a，您必须修改原始文件`<parent>`以删除其另一个孩子，或者创建一个新的`<parent>`.

正如您所提到的，您可以使用 XSLT 做到这一点；或许多其他 XML 树构建技术。如果您告诉我们您正在构建什么样的平台，我们可以推荐与您的平台最相关的平台。

# java - 查看 Eclipse 的源代码——我们将如何批评算法？

> ID：13750324
> 
> 赞同：0
> 
> 时间：2012-12-06T18:42:05.707
> 
> 标签：java, eclipse

对于一个学校项目，我们将使用 Eclipse 并批评它的算法。我知道 Eclipse 是开源的，但我们究竟如何浏览混乱的文件夹并实际看到一些可以被批评的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:48:24.253

下面的技术有助于发现设计不佳的代码。
如果你真的指的是算法，而不是设计，那么eclipse对你没有多大帮助，它只是一个文本查看器，项目浏览器。
你只剩下你的“自然”智力了。

**如何发现不良设计的提示**
在 Eclipse 中，打开要审查的项目：
安装*FindBugs*、*PMD*和*Checkstyle*

严重：
findBugs Prio1 和 2
PMD 1 - 3？

进一步安装“ *Metrics* ”：（我忘记了确切的名称）

查看高“圈复杂度”，以发现关键代码。在 Checkstyle 中，您也可以找到该度量

# c++ - 交叉编译时的文件大小差异

> ID：13750326
> 
> 赞同：3
> 
> 时间：2012-12-06T18:42:09.573
> 
> 标签：c++, linux, gcc

我正在用 c++ 编写一个在我的主机（linux x86）和目标机器（arm）上运行的小应用程序。
我遇到的问题是，在主机上我的二进制文件大小约为 700kb，但在目标机器上约为 7mb。
我对两个平台都使用相同的编译开关。我的第一个想法是 arget 机器上的一个库是静态链接的，但我检查了两个二进制文件，`objdump`并且都使用相同的动态链接库。那么谁能给我提示我如何弄清楚为什么大小差异如此之大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:22:00.403

*虽然理论上*不同的计算机体系结构对于同一个程序可能需要完全不同数量的可执行代码，但在现代体系结构中并不真正期望 10 倍。ARM 和 x86 可能不同，但它们仍然设计在同一个世界中，内存和带宽不会被浪费，这导致 CPU 设计人员试图使可执行代码尽可能紧凑。

因此，我将按概率顺序查看以下可能性：

*   符号剥离：如果两个二进制文件中的一个已从其符号中剥离，那么它会明显更小，尤其是在使用调试信息编译的情况下。您可能想尝试剥离两个二进制文件，看看会发生什么。

*   静态链接：我偶尔会遇到更喜欢静态链接而不是使用共享库的嵌入式目标的构建系统。检查每个二进制文件的库依赖关系可能会检测到这一点。

*   附加启用代码：较大的二进制文件可能启用附加代码，因为例如构建系统找到了附加的可选库，或者因为目标平台需要特定的句柄。

    尽管如此，10 倍可能还是太大了，除非较小的二进制文件缺少很多功能，或者较大的二进制文件已静态链接到某些可选库中。

*   不同的编译器配置：您不仅应该查看*您*提供的编译器选项，还应该查看编译器为每个目标使用的默认值。例如，如果编译器在一种架构中具有显着更高的内联或循环展开限制，则生成的可执行文件可能会显着膨胀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:45:26.560

首先，没有理由期望为不同架构编译的相同代码在大小上相互有任何关系。您可以轻松地让 A 大于 B，然后更改一行代码，然后 B 大于 A。

其次，您所说的“二进制文件”是我猜的精灵，它有点二进制，有些开销很大。架构和其他类似事物之间的开销可能会有所不同。

最重要的是，如果您正在为两个架构/平台编译相同的代码，或者使用不同的编译器或编译选项为相同的架构编译，则没有理由期望文件大小彼此之间有任何关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:31:37.947

不同的架构可以有完全不同的方式来处理同样的事情。例如，在 CISC（例如 x86）架构上加载立即数通常是一条指令，而在 RISC（例如 ppc、arm）上通常是多条指令，所需的实际数量取决于值。例如，如果指令集只允许 16 位立即数，您可能需要最多 7 条指令来加载 64 位值（按 16 位加载并在加载之间移动）。因此，代码本质上是不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:44:10.770

到目前为止未提及但与 ARM/x86 比较相关的一个原因是浮点仿真。今天所有的 x86 芯片都支持原生 FP（x86-64 甚至通过 SSE 支持 SIMD FP），但 ARM CPU 通常缺少 FP 单元。这反过来意味着即使是简单的 FP 加法也必须转换为对指数和尾数的一长串整数运算。

# elasticsearch - 如果 min_gram 设置为 1，ngram 过滤器上的 Elasticsearch 突出显示很奇怪

> ID：13750330
> 
> 赞同：7
> 
> 时间：2012-12-06T18:42:30.060
> 
> 标签：elasticsearch

所以我有这个索引

```
{
  "settings":{
    "index":{
      "number_of_replicas":0,
      "analysis":{
        "analyzer":{
          "default":{
            "type":"custom",
            "tokenizer":"keyword",
            "filter":[
              "lowercase",
              "my_ngram"
            ]
          }
        },
        "filter":{
          "my_ngram":{
            "type":"nGram",
            "min_gram":2,
            "max_gram":20
          }
        }
      }
    }
  }
} 
```

我正在通过轮胎宝石进行搜索

```
{
   "query":{
      "query_string":{
         "query":"xyz",
         "default_operator":"AND"
      }
   },
   "sort":[
      {
         "count":"desc"
      }
   ],
   "filter":{
      "term":{
         "active":true,
         "_type":null
      }
   },
   "highlight":{
      "fields":{
         "name":{

         }
      },
      "pre_tags":[
         "<strong>"
      ],
      "post_tags":[
         "</strong>"
      ]
   }
} 
```

我有两个应该匹配名为“xyz 帖子”和“xyz 问题”的帖子当我执行此搜索时，我会正确恢复突出显示的字段

```
<strong>xyz</strong> question
<strong>xyz</strong> post 
```

现在事情就是这样......只要我在索引和重新索引中将 min_gram 更改为 1。突出显示的字段开始返回，因为

```
<strong>x</strong><strong>y</strong><strong>z</strong> pos<strong>xyz</strong>t
<strong>x</strong><strong>y</strong><strong>z</strong> questio<strong>xyz</strong>n 
```

我简直无法理解为什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T14:56:05.700

## 简答

您需要检查您的**映射**，看看您是否使用`fast-vector-highlighter`. 但是您仍然需要非常小心您的查询。

## 详细解答

`0.20.4`假设在 上使用新的 ES 实例`localhost`。

在您的示例之上，让我们添加显式映射。注意我为该`code`字段设置了两种不同的分析。唯一的区别是`"term_vector":"with_positions_offsets"`。

```
curl -X PUT localhost:9200/myindex -d '
{
  "settings" : {
    "index":{
      "number_of_replicas":0,
      "number_of_shards":1,
      "analysis":{
        "analyzer":{
          "default":{
            "type":"custom",
            "tokenizer":"keyword",
            "filter":[
              "lowercase",
              "my_ngram"
            ]
          }
        },
        "filter":{
          "my_ngram":{
            "type":"nGram",
            "min_gram":1,
            "max_gram":20
          }
        }
      }
    }
  },
  "mappings" : {
    "product" : {
      "properties" : {
        "code" : {
          "type" : "multi_field",
          "fields" : {
            "code" : {
              "type" : "string",
              "analyzer" : "default",
              "store" : "yes"
            },
            "code.ngram" : {
              "type" : "string",
              "analyzer" : "default",
              "store" : "yes",
              "term_vector":"with_positions_offsets"
            }
          }
        }
      }
    }
  }
}' 
```

索引一些数据。

```
curl -X POST 'localhost:9200/myindex/product' -d '{
  "code" : "Samsung Galaxy i7500"
}'

curl -X POST 'localhost:9200/myindex/product' -d '{
  "code" : "Samsung Galaxy 5 Europa"
}'

curl -X POST 'localhost:9200/myindex/product' -d '{
  "code" : "Samsung Galaxy Mini"
}' 
```

现在我们可以运行查询了。

### 1) 搜索 'i' 以查看一个字符搜索与突出显示一起使用

```
curl -X GET 'localhost:9200/myindex/product/_search?pretty' -d '{
  "fields" : [ "code" ],
  "query" : {
    "term" : {
      "code" : "i"
    }
  },
  "highlight" : {
    "number_of_fragments" : 0,
    "fields" : {
      "code":{},
      "code.ngram":{}
    }
  }
}' 
```

这会产生两个搜索结果：

```
# 1
...
"fields" : {
  "code" : "Samsung Galaxy Mini"
},
"highlight" : {
  "code.ngram" : [ "Samsung Galaxy M<em>i</em>n<em>i</em>" ],
  "code" : [ "Samsung Galaxy M<em>i</em>n<em>i</em>" ]
}
# 2
...
"fields" : {
  "code" : "Samsung Galaxy i7500"
},
"highlight" : {
  "code.ngram" : [ "Samsung Galaxy <em>i</em>7500" ],
  "code" : [ "Samsung Galaxy <em>i</em>7500" ]
} 
```

这次`code`和`code.ngem`字段都正确突出显示。但是当使用更长的查询时，情况会迅速改变：

### 2) 搜索“y m”

```
curl -X GET 'localhost:9200/myindex/product/_search?pretty' -d '{
  "fields" : [ "code" ],
  "query" : {
    "term" : {
      "code" : "y m"
    }
  },
  "highlight" : {
    "number_of_fragments" : 0,
    "fields" : {
      "code":{},
      "code.ngram":{}
    }
  }
}' 
```

这产生：

```
"fields" : {
  "code" : "Samsung Galaxy Mini"
},
"highlight" : {
  "code.ngram" : [ "Samsung Galax<em>y M</em>ini" ],
  "code" : [ "Samsung Galaxy Min<em>y M</em>i" ]
} 
```

这些`code`字段未正确突出显示（类似于您的情况）。

一件重要的事情是使用**术语查询**而不是**query_string**。

# python - 变更表单中的 ModelChoiceField 初始值

> ID：13750335
> 
> 赞同：2
> 
> 时间：2012-12-06T18:42:49.743
> 
> 标签：python, django, django-forms, django-admin

首先是代码：

```
class CommentForm(forms.ModelForm):
    categories = forms.ModelChoiceField(queryset = Category.objects.all(), required = False)

class CommentAdmin(admin.ModelAdmin):
    form    = CommentForm 
```

当我编辑我的评论时，我希望它的类别字段具有我上次保存时选择的初始值。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:12:04.497

```
def get_form(self, *args, **kwargs):
        f = super(CommentAdmin, self).get_form(*args, **kwargs)
        f.base_fields['categories'].initial = 1

        return f 
```

放置在 CommentAdmin 中的这段代码起到了作用......

编辑：

```
def __init__(self, *args, **kwargs):
        super(CommentForm, self).__init__(*args, **kwargs)

        self.fields['categories'].initial = self.instance.object_id 
```

或者这段代码放在 CommentForm 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:50:11.177

You want to have the current model value selected by default in the generated form? If that's the case I think what you are looking for in your view is

```
form = CommentForm(instance = commentinstance) 
```

Where `commentinstance` is the instance that you are editing.

(This would be `form = CommentForm(request.POST, instance = commentinstance)` in case of a POST request)

**EDIT**:

If you want to do this in the form, you can just provide the `instance` argument from `__init__`, like so:

```
def __init__(self, *args, **kwargs):
    instance = kwargs.pop('instance', YOUR_DEFAULT_INSTANCE)
    super(CommentForm, self).__init__(instance = instance, *args, **kwargs) 
```

That even leaves the default `instance` if you do provide one from your view.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:23:03.427

我想有几种方法可以解决这个问题。

这是我之前的做法：

```
class MyForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        if 'ref' in kwargs:
            ref = kwargs['ref']
            item = MyModel.objects.get(pk=ref)
            kwargs['instance'] = item

        super(MyForm, self).__init__(*args, **kwargs)

     class Meta:
         model = MyModel 
```

重要的部分是将填充的模型对象放入关键字变量实例中。

# php - 将 ASP 函数转换为 PHP 以生成密码

> ID：13750339
> 
> 赞同：2
> 
> 时间：2012-12-06T18:42:54.220
> 
> 标签：php, asp.net, md5

我正在将 ASP 网站转换为 PHP。该站点使用第 3 方 API。第 3 方 API 需要存储在数据库中的用户 ID 和每个用户的密码。ASP 站点没有将密码保存在数据库中，而是使用以下函数每次根据 UserID 派生密码：

```
public static string GetLmsUserPassword(int userId)
{
    var hash = userId.ToString().MD5();
    return hash.Substring(15, 4) + hash.Substring(4, 4);
} 
```

在 PHP 中，我写了以下内容：

```
function lms_password($user_id) {
    $hash = md5((int)$user_id);
    $password = substr($hash,15,4).substr($hash,4,4);
    return $password;
} 
```

但是，PHP 中生成的密码似乎与 ASP 中的密码不匹配。我想知道 ASP 是否以不同的方式执行 md5？

一个示例 UserID 实际上是一个字符串，而不仅仅是一个数字：22E21F5D-7979-467E-928D-4EFCC323BDCB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:05:43.720

.NET 和 PHP 版本之间的结果差异可能是由于每个将字符串转换为 int 的方式。尝试在两者中转换您的示例 ID，然后进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:19:03.273

ASP：`var hash = userId.ToString().MD5();`

看到那`ToString()`部分了吗？这意味着 ID 可能被解释为字符串。

你的PHP：`$hash = md5((int)$user_id);`

将其显式转换为 int，它将散列为完全不同的值。

> 一个示例 UserID 实际上是一个字符串，而不仅仅是一个数字：22E21F5D-7979-467E-928D-4EFCC323BDCB

那么...为什么将其转换为int？：我

**编辑：**我也喜欢密码似乎是从用户 ID 的哈希静态生成的。非常安全。

# ruby-on-rails - YAML::load 引发未定义的类/模块错误

> ID：13750342
> 
> 赞同：10
> 
> 时间：2012-12-06T18:43:01.927
> 
> 标签：ruby-on-rails, ruby, yaml, psych

我正在我的 Rails 应用程序中实现类似纸迹的功能。为了做到这一点，我在 YAML 中序列化对象。我有`item_at_version`方法，基本上可以`YAML::load(cached_object)`- 这很好用，但是，我不知道为什么，有时它会返回`undefined class/module _class name_`. 它适用于 Event、Conversation、Note 等模型，但没有任何原因，它似乎会为 Dataset、Comment、Student 等模型抛出该错误（我试图为此找到任何模式，但没有任何运气） .

我正在使用 rails 3.2.8、ruby 1.9.3p327、psych 作为 YAML 引擎（Psych::Version 返回 1.3.4）。

附言。当我在该文件顶部添加 require 'model_name' 时，它就像一个魅力。

有什么想法我应该更改/添加什么才能使其正常工作？

编辑：我可以分享的代码不多：

```
def item_at_version
  YAML::load(cached_object)
end 
```

但也许回溯会很有趣：

```
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:312:in `path2class'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:312:in `resolve_class'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:219:in `visit_Psych_Nodes_Mapping'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:20:in `accept'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:238:in `visit_Psych_Nodes_Document'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:20:in `accept'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/nodes/node.rb:35:in `to_ruby'
~/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:128:in `load'
app/models/history_version.rb:7:in `item_at_version'
app/controllers/history_controller.rb:8:in `show'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.8) lib/active_support/callbacks.rb:502:in `_run__1697733322876708236__process_action__1122943786273335015__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__2589517259026276185__call__1369641113040304056__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
bugsnag (1.2.5) lib/bugsnag/rack.rb:35:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
railties (3.2.8) lib/rails/railtie/configurable.rb:30:in `method_missing'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:147:in `handle'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:99:in `rescue in block (2 levels) in start'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:96:in `block (2 levels) in start'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:86:in `each'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:86:in `block in start'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:66:in `loop'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:66:in `start'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:13:in `run'
~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/bin/nack_worker:4:in `<main>' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T19:08:53.807

在`YAML.dump`Ruby 中用于序列化对象时，类名用作 Yaml 标记的一部分，以便在加载对象时可以使用正确的类。例如：

```
require 'yaml'

class Foo; end

puts YAML.dump Foo.new 
```

生产

```
--- !ruby/object:Foo {} 
```

当您`YAML.load`在该字符串上使用时，Psych 知道要为反序列化对象实例化哪个类。

如果您尝试调用`YAML.load`指定尚未定义的类的 Yaml 字符串，则会收到错误消息：

```
require 'yaml'

# No Bar class has been defined
YAML.load '--- !ruby/object:Bar {}' 
```

产生：

```
/Users/matt/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:312:in `path2class': undefined class/module Bar (ArgumentError)
    from /Users/matt/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:312:in `resolve_class'
... 
```

这是因为 Psych 需要创建 class 的实例`Bar`，但没有可用的类的定义。这解释了为什么`require 'whatever'`在加载 Yaml 之前添加有效 - 现在 Ruby 已经加载了类的定义，因此可以创建它的实例（请注意，在 Ruby 中类名和文件名之间没有明确的联系，这只是约定）。

因此，解决方案是确保当您从 Yaml 加载任何 Ruby 对象时，您已经需要任何可能包含该 Yaml 中任何类的定义的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-02T07:23:01.113

[马特的回答](https://stackoverflow.com/a/13750743/2945616)提供了必要的细节。

但是当我对代码进行更改然后执行一些任务时，它会反序列化一些数据，而无需页面加载（在 AJAX 中），然后它会失败并出现相同的错误。

使用[require_dependency](http://apidock.com/rails/ActiveSupport/Dependencies/Loadable/require_dependency)比`require`自动加载更改要好。

如果是模块（未使用 测试`class`）并使用 YAML 进行反序列化，您还可以在反序列化之前实例化您的模块`require`以解决问题。[看这里。](https://github.com/ManageIQ/manageiq/blob/bda98099e7decdf2d7287435549e84877c724b22/config/initializers/yaml_autoloader.rb#L6)

资料来源： Github 中的[SO answer](https://stackoverflow.com/a/4774601/2945616)和[Psych 问题报告](https://github.com/tenderlove/psych/issues/252)

PS：这个问题只存在于开发中，因为`config.cache_classes`在生产中启用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-22T18:42:33.747

修改[马特的回答](https://stackoverflow.com/a/13750743/3849157)。代替基于纯哈希的解决方案（Psych 团队似乎对此没有兴趣），修改标题字符串以去除对象分类。我只是用下面的代码做到了这一点。

```
yamltext = File.read("somefile","r")
yamltext.sub!(/^--- \!.*$/,'---')
hash = YAML.load(yamltext) 
```

如果输入流由具有不同对象分类器的多个文档组成（我不知道这是否有效），这可能会失败（我不知道）。

# c# - .Net：SignedXml - 使用转换算法 exc-c14n 签署 xml

> ID：13750343
> 
> 赞同：5
> 
> 时间：2012-12-06T18:43:09.213
> 
> 标签：c#, signedxml

我正在尝试使用[SignedXml 类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.signedxml.aspx)在 C# 中签名 Xml（实际上是 SOAP xml） ，签名阶段成功通过，但是当我尝试验证签名时它告诉我它无效。我对 MSDN 中的示例所做的唯一更改是使用[XmlDsigExcC14NTransform](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.xmldsigexcc14ntransform.aspx)而不是转换 XmlDsigEnvelopedSignatureTransform。如果我使用 XmlDsigEnvelopedSignatureTransform 我会得到一个有效的签名。

这是我的签名代码：

```
 private static XmlDocument SignXml(XmlDocument doc)
             {
                 SignedXml signedXml = new SignedXml(doc);
                 signedXml.SigningKey = Certificate.PrivateKey;

                 Reference reference = new Reference();
                 reference.Uri = "";

                 XmlDsigEnvelopedSignatureTransform env = new XmlDsigEnvelopedSignatureTransform();
                 //XmlDsigExcC14NTransform env = new XmlDsigExcC14NTransform();

                 reference.AddTransform(env);

                 signedXml.AddReference(reference);
                 signedXml.ComputeSignature();

                 XmlElement signature = signedXml.GetXml();
                 doc.DocumentElement.AppendChild(signature);
                 doc.Save(SignedXmlPath);
                 return doc;
             } 
```

上面的代码会给我一个有效的签名，但如果我使用

```
XmlDsigExcC14NTransform env = new XmlDsigExcC14NTransform(); 
```

代替

```
XmlDsigEnvelopedSignatureTransform env = new XmlDsigEnvelopedSignatureTransform(); 
```

我会得到一个无效的签名。

这是我的验证码：

```
private static bool Verify(XmlDocument doc)
        {
            SignedXml signedDoc = new SignedXml(doc);
            XmlNodeList nodeList = doc.GetElementsByTagName(Constants.SignatureElement);

            signedDoc.LoadXml((XmlElement)nodeList[0]);
            return signedDoc.CheckSignature((RSA)Certificate.PublicKey.Key);
        } 
```

谁能告诉我如何用变换算法签名`http://www.w3.org/2001/10/xml-exc-c14n#`

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T20:43:49.617

您将需要`XmlDsigEnvelopedSignatureTransform`在您的情况下，因为您要在要签名的元素内添加签名。

`XmlDsigEnvelopedSignatureTransform`将告诉`SignedXml`类在测试其有效性之前从签名节点本身中删除签名。这是必需的，因为您在计算签名后添加了该元素。

您可以通过再次调用来添加多个转换，`AddTransform`如下所示：

```
XmlDsigEnvelopedSignatureTransform env = new XmlDsigEnvelopedSignatureTransform();
XmlDsigExcC14NTransform c14n = new XmlDsigExcC14NTransform();

reference.AddTransform(env);
reference.AddTransform(c14n); 
```

但是我认为你真正想要做的而不是我上面的例子是设置`CanonicalizationMethod`为 c14n：

```
signedXml.SignedInfo.CanonicalizationMethod = "http://www.w3.org/2001/10/xml-exc-c14n#";
 - or - 
signedXml.SignedInfo.CanonicalizationMethod = SignedXml.XmlDsigExcC14NTransformUrl; 
```

# python - 使用 Google API 将 Google mbox 文件导入 Google

> ID：13750348
> 
> 赞同：0
> 
> 时间：2012-12-06T18:43:24.750
> 
> 标签：python, email, google-apps

我正在编写使用 Python Google Apps API 从域 X 迁移到域 Y 的脚本。

对于我域上的每个帐户，我需要从域 X 导出邮件并将其导入域 Y。

我看到我可以使用[createMailboxExportRequest](http://gdata-python-client.googlecode.com/hg/pydocs/gdata.apps.audit.service.html)方法为每个用户帐户创建一个 mbox 文件。然后，我可以在准备好 mbox 文件时下载它。

现在如何才能将 mbox 文件恢复到域 Y 上的 Google 帐户中？我需要一个 Python 解决方案。

有一些使用[电子邮件迁移 API](https://developers.google.com/google-apps/email-migration/#migrating_email_messages)进行迁移的方法。这需要 RFC822 格式的电子邮件。我不相信那是 mbox 格式。

我希望其中一个 API 中有一种方法可以简单地导入 Google 导出的 mbox 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:22:25.170

您引用的用于导出的审核 API 不适合在此处使用。从[服务条款](https://developers.google.com/google-apps/admin-api-terms)第 4 节：

> 电子邮件审核 API 电子邮件审核 API 并非设计用于一般备份、存档或日记目的。Google 保留阻止客户以可能对电子邮件审核 API 的性能或可用性产生不利影响的方式使用电子邮件审核 API 的权利。

此外，在使用审核 API 时，您不会获得消息状态（已读/未读、已加星标、标签等）。

您应该将 Gmail IMAP 视为连接和导出邮件的方法。IMAP 与[Google 的 IMAP 扩展](https://developers.google.com/google-apps/gmail/imap_extensions)一起让您可以访问所有邮件元数据（已读/未读、已加星标、已标记等）。您可以通过[OAuth 2.0 对 Gmail IMAP 服务器](https://developers.google.com/google-apps/gmail/xoauth2_protocol)进行身份验证。

通过 IMAP 提取的消息应采用 RFC822 格式，并准备好提交给迁移 API（连同它们的元数据）。

[Got Your Back (GYB)](https://code.google.com/p/got-your-back)是一个开源 Python 脚本，它使用 OAuth（1.0，因为我编写它时还没有发布 2.0）和特定于 Gmail 的 IMAP 命令来备份和恢复帐户。我将 IMAP 用于恢复部分，以便它与不支持迁移 API 的消费者 Gmail 帐户兼容。但是，它可能对您来说是一个很好的参考点。

# drupal-7 - Drupal 跳转菜单下拉到外部链接

> ID：13750353
> 
> 赞同：0
> 
> 时间：2012-12-06T18:43:42.567
> 
> 标签：drupal-7, drupal-modules

我正在尝试创建指向外部网站的链接的跳转菜单，并且我希望能够根据当前尝试访问它的用户的有机组来以不同的方式对该菜单中的链接进行排序。到目前为止，我已经尝试使用带有 nodequeue 的视图来完成此任务，并且已经有些接近了，但它开始感觉像是一个死胡同。是否有任何模块（或模块组合存在）可以让我在没有的情况下完成此任务写我自己的？理想情况下，每个人都能够根据他们的个人喜好重新排序链接并覆盖链接的默认排序。但这在这一点上并不重要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:54:16.320

我知道这是一个基于角色的解决方案，但它可能是正确的方向。

[每个角色的菜单](http://drupal.org/project/menu_per_role)

它不适用于根据 OG 权限从视图中构建菜单吗？您可以创建多个显示，这会很痛苦，但您可以使用[菜单视图](http://drupal.org/project/menu_views)并查看它是否有效。

希望有些帮助。

# android - android：下载一个pdf文件并在之后打开

> ID：13750355
> 
> 赞同：3
> 
> 时间：2012-12-06T18:43:47.307
> 
> 标签：android, pdf, android-download-manager

我正在尝试从 Internet 下载 pdf 文档，然后，当下载结束时，通过包自动打开它。

我找到了一些通过 DownloadManager 下载的解决方案，但之后没有打开它的答案。我测试过的代码之一是：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                long downloadId = intent.getLongExtra(
                        DownloadManager.EXTRA_DOWNLOAD_ID, 0);
                Query query = new Query();
                query.setFilterById(enqueue);
                Cursor c = dm.query(query);
                if (c.moveToFirst()) {
                    int columnIndex = c
                            .getColumnIndex(DownloadManager.COLUMN_STATUS);
                    if (DownloadManager.STATUS_SUCCESSFUL == c
                            .getInt(columnIndex)) {

                        String uriString = c
                                .getString(c
                                        .getColumnIndex(DownloadManager.COLUMN_LOCAL_URI));
                        Uri uri = Uri.parse(uriString);

                        intent = new Intent();
                        intent.setAction(Intent.ACTION_VIEW);

                        intent.setDataAndType(uri, "application/pdf");
                        startActivity(intent);

                    }
                }
            }
        }
    };

    registerReceiver(receiver, new IntentFilter(
            DownloadManager.ACTION_DOWNLOAD_COMPLETE));
}

public void onClick(View view) {
    dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
    Request request = new Request(
            Uri.parse("http://www.xxxxxxx.org/directory/abc.pdf"));
    enqueue = dm.enqueue(request);

} 
```

但是当下载成功结束时，包找不到文件。

我需要你的帮助。我花了两周时间通过谷歌和安卓书籍寻找解决方案，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-04T10:29:19.270

创建此方法并在您的代码中调用它

```
public void showPdf() {
    try {
        File file = new File(Environment.getExternalStorageDirectory()
                + "/Download/" + name + "CV.pdf");//name here is the name of any string you want to pass to the method
        if (!file.isDirectory())
            file.mkdir();
        Intent testIntent = new Intent("com.adobe.reader");
        testIntent.setType("application/pdf");
        testIntent.setAction(Intent.ACTION_VIEW);
        Uri uri = Uri.fromFile(file);
        testIntent.setDataAndType(uri, "application/pdf");
        startActivity(testIntent);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

或者你可以在这里参考我的答案。

[如何在片段中使用异步任务进行下载进度对话框？](https://stackoverflow.com/questions/40260810/how-to-use-asynchronous-task-for-download-progress-dialog-in-fragment/40394318#40394318)

它用于下载文件和显示进度对话框。这里我使用了异步任务。在异步任务的 onpost() 方法中调用上述方法。希望对你也有帮助

# awesome-wm - 如何使用很棒的 wm 检索用户输入？

> ID：13750356
> 
> 赞同：0
> 
> 时间：2012-12-06T18:44:07.030
> 
> 标签：awesome-wm

我想使用真棒从用户那里检索一个字符串。我将使用这个字符串来动态创建一个新标签。我只需要一些我可以调用的函数，它将从键盘输入并返回输入的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:33:32.417

这样的事情应该可以帮助您入门：

```
awful.prompt.run({ prompt = "Magic: " },
    mypromptbox[mouse.screen].widget, function(text)
        naughty.notify({ text = "you entered: " .. text })
    end)) 
```

# ios - AIR iOS 加载外部 swf ABC - 几乎成功

> ID：13750358
> 
> 赞同：2
> 
> 时间：2012-12-06T18:44:09.293
> 
> 标签：ios, actionscript-3, mobile, air, flash

我有一整天的搜索和测试在我身后，我官方认为这是不可能的。然而，剩下的就是分享我所取得的成就并寻求任何建议。

所以我正在开发 Flash Builder 4.7、AIR SDK 3.5 和 iPad 3 iOS 6.0.1。我想要的是有一个临时应用程序来加载包含 actionscript 的 swf 文件并将其添加到舞台。我首先在通过 USB 连接的设备上以调试模式测试应用程序。一切正常。然后我编译了一个临时发布版本，但效果并不好。图形被添加到舞台，但动作脚本没有运行。我开始在网上搜索，发现可以加载 ipa 中的 swf 可以运行 actionscript，但它没有了，虽然在“我在哪里可以找到该 SDK 版本[的下载页面的链接](http://blogs.adobe.com/airodynamics/2012/11/09/packaging-and-loading-multiple-swfs-in-air-apps-on-ios/)”得到构建？”

它没有用。我在导出包内容中包含了第二个 swf。我做错了吗？无论如何，即使它有效，我真正需要的是能够从服务器下载 swf，将其保存在存储目录中，然后将其加载到主应用程序中。

有没有办法告诉iOS它正在运行的应用程序是一个调试版本（这实际上是工作），但它不应该显示有关连接到调试器的信息的弹出窗口，它实际上应该像合法的发布版本一样快速运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:35:19.167

不幸的是，您无法从任何服务器加载任何代码来执行它。苹果禁止它。唯一可以从外部加载并在 iOS 上执行的代码是内置 WebKit 浏览器中的 JavaScript（使用 UIWebView 或在 Air - StageWebView 的情况下）。

[从 air 3.6 开始](http://labsdownload.adobe.com/pub/labs/flashruntimes/shared/air3-6_flashplayer11-6_releasenotes.pdf)（仍处于测试阶段），您可以将其他 swf 与您的应用程序一起打包，以便稍后使用 Loader 类加载，但与正常的 web swf 加载相比，此功能仍然受到严重限制 - 您只能将代码加载到相同的您的应用程序使用的 ApplicationDomain 并且您不能卸载任何内容，因此使用 swc 库将所有​​代码静态链接到一个 swf 会更容易，而无需费心加载任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:18:08.077

我们发现使用 Flash Builder 4.7 和 AIR 3.6 SDK 可以在 iOS 中加载带有 ABC 代码的 SWF，而不会出现任何问题。目前 Adob​​e Flash Builder 4.7 附带 AIR 3.5 SDK，因此您可以从[此处](http://labs.adobe.com/technologies/flashruntimes/air/)下载最新的 SDK 版本并将其安装到您的 Adob​​e Flash Builder **sdks**文件夹中。

# c# - 使用 x:Uid 作为按钮

> ID：13750359
> 
> 赞同：1
> 
> 时间：2012-12-06T18:44:11.213
> 
> 标签：c#, microsoft-metro, windows-runtime

我试图本地化我的应用程序。我学会了如何使用资源文件 resw，并且使用 textblocks 一切都很顺利。但是对于我不能使用 x:Uid 的按钮，我得到异常说

> WinRT 信息：处理 Uid“继续”的属性时无法解析属性“文本”。[行：43 位置：82]

但我可以对文本块使用相同的 x:Uid（读作“继续”）。有人能告诉我我错过了什么吗？截至目前，我没有使用按钮样式，但我会使用。

xml:

```
 <Button Style="{StaticResource DarkButton}" x:Uid="Continue"  
 Content="Default value" HorizontalAlignment="Right" 
 VerticalAlignment="Bottom" Margin="0,0,14,14" Height="48" Width="140" 
 Name="button2" Click="button2_Click_1" IsEnabled="False" /> 
```

> xml

```
 <data name="Continue.Content" xml:space="preserve">
    <value>Continue</value>
  </data> 
```

我在 resw 中添加了 Continue.Text\Continue.Content 以及 Continue.Width

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:48:29.500

Jim 和 vcsjones 是正确的。Continue.Content 将是您的 RESW 文件中的键。如果那里有 Continue.Text 值，它将失败并显示您看到的错误。

如果解析器中的本地化合并无法分配给属性，那么它就会失败，这就是您所看到的。

# drupal - Drupal 7 - 表单 API 自定义模块

> ID：13750361
> 
> 赞同：0
> 
> 时间：2012-12-06T18:44:14.033
> 
> 标签：drupal, drupal-7, drupal-modules, form-api

我有一个计算两个值的表单，表单工作得很好，但是我在弄清楚如何计算这两个值并将答案作为呈现的 HTML 返回时遇到了一些问题，所以我可以将它的样式设置得漂亮漂亮，让用户看到.

所有帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:44:31.700

在 Drupal 表单中，创建表单通常需要三种类型的回调：

*   表单构建器是使用表单 API 理解的数组构建表单的函数
*   表单验证处理程序是验证用户提交的值的函数
*   表单提交处理程序是作用于用户提交的值的函数

在这些函数中，输出对用户提交的值进行的计算结果的函数是最后一个。通常，表单提交处理程序将数据保存在数据库中，并通过[drupal_set_message()](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_set_message/7)向用户显示一条消息，但它也可以简单地显示对输入数据进行的操作的结果。

从 Drupal 7 开始，表单提交处理程序的输出以及菜单回调产生的输出可以是渲染数组，而不是字符串。[渲染数组的优点是可以通过hook_page_build()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_page_build/7)或[hook_page_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_page_alter/7)从第三方模块轻松更改。

[node_view()](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_view/7)是一个返回渲染数组而不是字符串的菜单回调示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:11:33.640

如果这只是您想要的消息，那么您应该查看[drupal_set_message](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_set_message/7)。它允许您设置这样的消息：

```
drupal_set_message(t('Hello, world.'),'myClass'); 
```

像这样输出HTML：

```
<div class="messages myClass">Hello, world</div> 
```

这将是一种非常简单的方法，可以在提交表单后设置一条消息供用户查看。如果您需要更高级的东西，请在此处查看我的答案[和](http://drupal.org/node/1351674#comment-5288046)[此处](https://stackoverflow.com/questions/8392049/theming-module-output/8392368#8392368)的Drupal 答案。

# sql - 在 DB2 for i 上，搜索列，以列表形式返回表名

> ID：13750369
> 
> 赞同：5
> 
> 时间：2012-12-06T18:44:46.563
> 
> 标签：sql, db2, ibm-midrange, squirrel-sql

我还是个菜鸟，如果这个问题有点明显，请原谅。我确实搜索了答案，但要么无法理解我找到的答案是如何应用的，要么根本找不到答案。

我在 DB2 for i 服务器上有一个庞大的数据库，我通过 SQLExplorer（基于 Squirrel SQL）使用 SQL 访问它。这些表格的文档记录很差，首要任务是弄清楚如何找到我的出路。

我想写一个简单的查询来做到这一点：

**1)**允许我搜索整个数据库以查找包含名为“备注”的列（其中包含字段描述）的表。

**2）**然后我希望它在该列中搜索关键字。

**3)**我想要一个返回的表，其中包含包含该关键字的表的*名称*（只是名称，我可以稍后按字母顺序查找表，如果需要，可以查看内部。）

我需要这个搜索是超轻量级的，我希望我描述的概念能够实现这一点。任何消耗大量资源的东西都可能会激怒服务器的系统管理员。

只是为了表明我已经尝试过（而且我是一个完整的菜鸟），这就是我到目前为止所得到的。

```
SELECT *
FROM <dbname>
WHERE Remarks LIKE '<keyword>' 
```

随意嘲笑，我告诉过你我是个白痴:-)。

有什么帮助吗？也许至少是朝着正确的方向推进？

PS - 我似乎无法在 SQLExplorer 中找到搜索功能，如果有人知道我是否可以使用简单的搜索或过滤器来实现同样的目标......那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T19:11:34.323

您可以查询系统目录以识别表：

```
SELECT TABLE_SCHEMA, TABLE_NAME, COLUMN_NAME 
FROM QSYS2.SYSCOLUMNS WHERE UPPER(DBILFL) = 'REMARKS' 
```

然后分别查询每个表：

```
SELECT * FROM TABLE_SCHEMA.TABLE_NAME WHERE Remarks LIKE '%<keyword>%' 
```

有关模式表达式的详细信息，请参阅[LIKE 谓词](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/db2/rbafzch2like.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T02:00:39.017

通常我使用这样的东西

```
SELECT TABLE_SCHEMA, TABLE_NAME
       ,COLUMN_NAME,SYSTEM_COLUMN_NAME,COLUMN_HEADING          
       ,DATA_TYPE, "LENGTH",NUMERIC_SCALE
FROM QSYS2.SYSCOLUMNS
WHERE UPPER(COLUMN_NAME) LIKE '%REMARK%' 
```

@JamesA，我在 V6R1，默认情况下，普通用户无权在 QSYS 中反对 QADBIFLD

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T05:47:03.397

通常，许多（如果不是大多数）IBM i 商店（尤其是那些使用 RPG 的商店）坚持使用 10 个（或更少）字符的模式名称和表名，并且为“系统”列名使用 10 个（或更少）字符的名称，即使更长还提供了列名。列文本通常描述每个字段。

```
SELECT SYSTEM_TABLE_SCHEMA, SYSTEM_TABLE_NAME
      ,SYSTEM_COLUMN_NAME,         
      ,DATA_TYPE, "LENGTH",NUMERIC_SCALE
      ,CHAR(COLUMN_TEXT) 
FROM QSYS2.SYSCOLUMNS
WHERE UPPER(COLUMN_NAME) LIKE '%REMARK%' 
```

# ios - 通过 BOOL 选择的按钮集

> ID：13750370
> 
> 赞同：1
> 
> 时间：2012-12-06T18:44:49.240
> 
> 标签：ios, uibutton, boolean

有人可以告诉我为什么以下方法不起作用吗？该按钮永远不会被设置为选中。

```
[self.boldButton setSelected:isBold]; 
```

如果我用 if else 语句替换上面的内容，它就可以正常工作。我还可以将 setSelected 值更改为 1 或 0，而不是 YES 或 NO，它仍然可以正常工作。

```
if (isBold)
{
    [self.boldButton setSelected:YES];
}
else
{
    [self.boldButton setSelected:NO];
} 
```

所以我有一个工作项目，但我不明白为什么这两个实现不能提供相同的结果。谢谢。

FWIW - 我用另一种方法测试粗体。虽然如果测试有缺陷，我看不出第二种方法如何工作，而第一种方法仍然没有。

```
- (BOOL)isBold
{
    CTFontRef fontRef = (CTFontRef)CFBridgingRetain(self);
    CTFontSymbolicTraits symbolicTraits = CTFontGetSymbolicTraits(fontRef);
    return (symbolicTraits & kCTFontTraitBold);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T19:14:48.117

`BOOL`定义如下`<objc/objc.h>`：

```
typedef signed char     BOOL; 
```

这意味着 a`BOOL`实际上可以保存 -128 到 127（含）范围内的任何值。

`-[UIControl setSelected:]`大致是这样工作的：

```
#define kSelectedBitPosition 10
#define kSelectedBit (1 << kSelectedBitPosition)

- (void)setSelected:(BOOL)selected {
    if (((self->_controlFlags >> kSelectedBitPosition) & 1) == selected) {
        return;
    } else {
        self->_controlFlags = (self->_controlFlags & ~kSelectedBit)
            | ((selected & 1) << kSelectedBitPosition);
        [self setNeedsDisplay];
    }
} 
```

（我`UIKit`用[Hopper](http://www.hopperapp.com/)反汇编了模拟器版本来解决这个问题。）

所以，注意两点：

*   `if`语句条件只有在或`selected == 0`时才能为真`selected == 1`。`selected`如果有任何其他价值，它永远不会是真的。

*   赋值语句（更新`_controlFlags`）仅使用 的位 0（1 的位）`selected`。因此，例如，如果`selected == -2`在 C 中逻辑为真，并且*除了*位 0 之外的所有位都设置了，则赋值语句仍然不会打开 中的位`_controlFlags`。

这意味着**您必须将 0 或 1 传递**给`-[UIControl setSelected:]`. 没有其他值可以可靠地工作。

在 C 中将所有非零值转换为 1 的最短方法是应用`!`运算符两次：

```
[self.boldButton setSelected:!!isBold]; 
```

但是，最好将您的`-isBold`方法修复为返回“安全” `BOOL`：

```
- (BOOL)isBold {
    CTFontRef fontRef = (CTFontRef)CFBridgingRetain(self);
    CTFontSymbolicTraits symbolicTraits = CTFontGetSymbolicTraits(fontRef);
    return !!(symbolicTraits & kCTFontTraitBold);
} 
```

# c# - 如何将 ResourceDictionary 字符串分配为 switch case 常量表达式？

> ID：13750371
> 
> 赞同：1
> 
> 时间：2012-12-06T18:44:50.400
> 
> 标签：c#, wpf, resourcedictionary

```
switch ("Case2")
        {
            case (string)Application.Current.FindResource("Case1");
                //Do Some logic
                break;
            case (string)Application.Current.FindResource("Case2");
                //Do Some logic
                break;
            case (string)Application.Current.FindResource("Case3");
                //Do Some logic
                break;
            default:
                break;
        } 
```

我做了这段代码，但它不起作用。现在我想将从资源字典中获取的字符串值（**(string)Application.Current.FindResource("Case1")**）分配给常量表达式。这怎么可能，否则有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:53:28.837

这不可能。根据定义，[常量表达式](http://msdn.microsoft.com/en-us/library/aa691319%28v=vs.71%29.aspx)是*编译*时常量。资源字典查找必须在*运行*时进行。通常的解决方案是使用一串`if`语句：

```
if ("Case2" == (string)Application.Current.FindResource("Case1"))
{
    //Do some logic
}
else if ("Case2" == (string)Application.Current.FindResource("Case2"))
{
    //Do some logic
}
else if ("Case2" == (string)Application.Current.FindResource("Case3"))
{
    //Do some logic
} 
```

# jsf - jsf actionlistener 调用了两次

> ID：13750373
> 
> 赞同：3
> 
> 时间：2012-12-06T18:44:59.780
> 
> 标签：jsf

当我在复合表中定义 2 个 actionListener 时，第一个 actionListener 将在我单击它时被调用两次，但第二个监听器工作正常而没有问题。即使我切换了 2 个听众，第一个总是叫了两次，第二个很好。

这是xhtml：

```
 <!DOCTYPE html>

    <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:asias="http://java.sun.com/jsf/composite/components/asias"
      xmlns:test="http://java.sun.com/jsf/composite/test">

    <h:head />
    <h:body>
      <h:form id="communityMembersForm">
        <test:outertable list="#{memberController.members}"
          title="Nested Table Test">
          <f:actionListener for="sortAction"
            binding="#{memberController.sortActionListener}" />
          <f:actionListener for="actions"
            binding="#{memberController.actionsActionListener}" />
        </test:outertable> 
      </h:form>
    </h:body>
    </html> 
```

MemberController 是一个 viewScoped 托管 bean。外部表定义为：

```
 <!DOCTYPE html>

    <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:test="http://java.sun.com/jsf/composite/test"
      xmlns:asias="http://java.sun.com/jsf/composite/components/asias">

    <composite:interface>
      <composite:attribute name="list" required="true" />
      <composite:attribute name="title" required="true" />
      <composite:actionSource name="sortAction" targets="communityMembersPage" />
      <composite:actionSource name="actions" targets="communityMembersPage" />
    </composite:interface>

    <composite:implementation>
      <div>
        <h3>#{cc.attrs.title}</h3>
        <asias:memberTable id="communityMembersPage" memberList="#{cc.attrs.list}"
          showPhone="true" showRoles="true" showAffiliation="true"
          showLastLoginDate="true" showActions="true" allowSortLastName="true"
          allowSortFirstName="true" allowSortEmail="true" />
      </div>
    </composite:implementation>
    </html> 
```

memberTable 定义为：

```
 <!DOCTYPE html>

    <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite">

    <composite:interface name="memberTable"
      displayName="A table for members of a community">
      <composite:attribute name="memberList" required="true" />
      <composite:attribute name="showPhone" type="java.lang.Boolean" default="false" />
      <composite:attribute name="showRoles" type="java.lang.Boolean" default="false" />
      <composite:attribute name="showAffiliation" type="java.lang.Boolean"
        default="false" />
      <composite:attribute name="showLastLoginDate" type="java.lang.Boolean"
        default="false" />
      <composite:attribute name="showActions" type="java.lang.Boolean"
        default="false" />
      <composite:attribute name="allowSortLastName" type="java.lang.Boolean"
        default="false" />
      <composite:attribute name="allowSortFirstName" type="java.lang.Boolean"
        default="false" />
      <composite:attribute name="allowSortEmail" type="java.lang.Boolean"
        default="false" />
      <composite:actionSource name="sortAction"
        targets="dataTable:sortLastName dataTable:sortFirstName dataTable:sortEmail" />
      <composite:actionSource name="actions" targets="dataTable:actions" />
    </composite:interface>

    <composite:implementation>
      <div id="#{cc.clientId}" class="member-table">
        <h:dataTable id="dataTable" value="#{cc.attrs.memberList}" var="member"
          rowClasses="odd,even"
          columnClasses="column1,column2,column3,column4,column5,column6,column7">
          <h:column>
            <f:facet name="header">
              <h:commandLink id="sortLastName"
                rendered="#{cc.attrs.allowSortLastName}">
                <f:attribute name="sortBy" value="lastName" />
                <span>#{i18n['last-name']}</span>
              </h:commandLink>
              <h:outputText rendered="#{not cc.attrs.allowSortLastName}"
                value="#{i18n['last-name']}" />
            </f:facet>
            <span class='#{member.invalid ? "warning" : "" }'>#{member.lastName}</span>
          </h:column>
          <h:column>
            <f:facet name="header">
              <h:commandLink id="sortFirstName"
                rendered="#{cc.attrs.allowSortFirstName}">
                <f:attribute name="sortBy" value="firstName" />
                <span>#{i18n['first-name']}</span>
              </h:commandLink>
              <h:outputText rendered="#{not cc.attrs.allowSortFirstName}"
                value="#{i18n['first-name']}" />
            </f:facet>
            <span class='#{member.invalid ? "warning" : "" }'>#{member.firstName}</span>
          </h:column>
          <h:column>
            <f:facet name="header">
                      <h:commandLink id="sortEmail"
                rendered="#{cc.attrs.allowSortEmail}">
                <f:attribute name="sortBy" value="email" />
                <span>#{i18n['email-address']}</span>
              </h:commandLink>
              <h:outputText rendered="#{not cc.attrs.allowSortEmail}"
                value="#{i18n['email-address']}" />
            </f:facet>
            <span class='#{member.invalid ? "warning" : "" }'>#{member.email}</span>
          </h:column>
          <h:column
            rendered="#{cc.attrs.showPhone and loginUser.allowedToViewPhone}">
            <f:facet name="header">#{i18n['phone-number']}</f:facet>
            <span class='#{member.invalid ? "warning" : "" }'>#{member.phoneNumber}</span>
          </h:column>
          <h:column
            rendered="#{cc.attrs.showRoles and loginUser.allowedToViewRoles}">
            <f:facet name="header">#{i18n['roles']}</f:facet>
            <span class='#{member.invalid ? "warning" : "" }'> <ui:repeat
                value="#{member.roles}" var="role" varStatus="roleStatus">
                <h:outputText rendered="#{roleStatus.index > 0}" value=", " />
              #{role}
            </ui:repeat>
            </span>
          </h:column>
          <h:column
            rendered="#{cc.attrs.showAffiliation and loginUser.allowedToViewAffiliation}">
            <f:facet name="header">#{i18n['user-affiliation']}</f:facet>
            <span class='#{member.invalid ? "warning" : "" }'>#{member.userAffiliation}</span>
          </h:column>
          <h:column
            rendered="#{cc.attrs.showLastLoginDate and loginUser.allowedToViewLastLoginDate}">
            <f:facet name="header">#{i18n['last-login-date']}</f:facet>
            <h:outputText styleClass='#{member.invalid ? "warning" : "" }'
              value="#{member.lastLoginDate}" converter="#{dateToWeeksOldConverter}" />
          </h:column>
          <h:column
            rendered="#{cc.attrs.showActions and loginUser.allowedToViewActions}">
            <f:facet name="header">#{i18n['actions']}</f:facet>
            <h:commandLink id="actions">
              <span>#{i18n['actions']}</span>
              <f:attribute name="communityMember" value="#{member}" />
            </h:commandLink>
          </h:column>
        </h:dataTable> 
        <h:outputText styleClass="warning" rendered="#{empty cc.attrs.memberList}"
          value="#{i18n['no-records-found']}." />
      </div>
    </composite:implementation>
    </html> 
```

这是输出：

```
Dec 6, 2012 11:11:08 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3328 ms
11:23:01,616  INFO MemberController:43 - constructing MemberController
11:23:07,446 DEBUG MemberController:139 - getSortActionListener called
11:23:07,456 DEBUG MemberController:180 - constructing comparator map
11:23:07,466 DEBUG MemberController:213 - constructing SortActionListener
11:23:07,476 DEBUG MemberController:227 - Sorting by lastName Ascending (MemberController$SortActionListener@779d9c0d)
11:23:07,476 DEBUG MemberController:139 - getSortActionListener called
11:23:07,476 DEBUG MemberController:227 - Sorting by lastName Descending (MemberController$SortActionListener@779d9c0d)
11:23:12,116 DEBUG MemberController:127 - getActionsActionListener called
11:23:12,126 DEBUG MemberController:132 - action for homer@simpsons.tv 
```

从输出来看，第一个 actionListener 调用了两次，但第二个按预期只调用了一次。

这是使用 jsf 2.1.13 在 tomecat 6.0.36 下运行的。如果我使用 myfaces 而不是 jsf，就没有这个问题。

# powershell - PowerShell 搜索 .csv 文件字段以获取字符串格式并删除异常

> ID：13750377
> 
> 赞同：0
> 
> 时间：2012-12-06T18:45:37.943
> 
> 标签：powershell

我有一个问题，我在 .csv 文件中有一列数据（代码）（如果需要，可以将格式更改为 .xlsx 或其他任何内容），这并不完全正确。例如，一个单元格包含以下内容：

“E86 F03 R64 03 R 64 86 FU”

而且我只想保留格式为 <1 character><2-3 digit integer> 的条目并删除其他内容。使用上面的示例，我想将单元格更新为如下所示：

“E86 F03 R64”

我的主要问题是我似乎无法弄清楚如何在文件中搜索通用格式，例如 <1 个字符><2-3 位整数>。我也愿意接受 PowerShell 之外的建议，例如使用 Excel 公式。有人可以帮助我解决这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:16:42.690

```
("E86 F03 R64 03 R 64 86 F U ".split() -match '^[a-z]\d{2,3}$') -join ' ' 
```

# c++ - 在 C++ 中使用 c_str() 将字符串转换为双精度

> ID：13750378
> 
> 赞同：1
> 
> 时间：2012-12-06T18:45:40.113
> 
> 标签：c++, string, double

是否不建议以这种方式转换字符串：

```
string input = "81.312";
double val = atof(input.c_str()); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T18:46:53.933

不要`std::atof`在 C++ 中使用。这不检查输入错误。

使用[`std::stod`](http://en.cppreference.com/w/cpp/string/basic_string/stof). 这也会检查错误并相应地引发异常。

此外，它`std::string const &`作为论据。所以你不必通过`input.c_str()`。只需这样做：

```
double value = std::stod(input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:47:38.037

这没有错，但更正确的是使用 boost::lexical_cast。

您还应该检查这些工具是否正确处理 NAN 和 INF。

# jquery - Window.load 函数使用预加载器 gif 冻结我的页面

> ID：13750389
> 
> 赞同：0
> 
> 时间：2012-12-06T18:46:36.593
> 
> 标签：jquery, preloading

我正在使用 window.load jquery 函数来预加载带有 gif 图像的主页。

现在的问题是，页面在一段时间后冻结/超时，因为所有内容都没有加载，只显示 gif 动画。但是，当再次重新加载页面时，页面会加载并隐藏预加载器，但我不希望用户每次都重新加载页面。

我专门使用 window.load 函数，因为对预加载器的全部需求是预加载在加载时看起来很糟糕的大图像（图像在滑块中）......

功能：在我的结束标签上方添加：

```
<script type="text/javascript">
$(window).load(function()
{
    $("#content").css('display', 'block');
    $("#loading").hide(); //the loader is hidden once content is loaded//
});
</script> 
```

如何在不再次刷新的情况下解决此加载“超时”问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:52:31.120

我认为您应该为此尝试使用 document.ready ：

```
$(document).ready(function() {
    $("#content").css('display', 'block');
    $("#loading").hide(); //
}); 
```

**编辑：**

您可以尝试等待您的内容加载：

```
$('#content').load( function(){
}); 
```

或者将 altenrtivly 绑定`load`到滑块中的最后一张图像。

# c# - 无垃圾客户端坐标

> ID：13750394
> 
> 赞同：2
> 
> 时间：2012-12-06T18:46:52.047
> 
> 标签：c#, winforms

我正在尝试在我的 winform 中获取鼠标的坐标。

```
 myMousePosition = myForm.PointToClient(Control.MousePosition) 
```

这可行，但会产生垃圾（堆分配）。因为我经常调用这个方法，所以这是一个问题。

```
 myMousePosition.X = Control.MousePosition.X - myForm.Location.X;
  myMousePosition.Y = Control.MousePosition.Y - myForm.Location.Y; 
```

这不起作用，因为还需要考虑标题栏。有什么建议么？

编辑：更多信息。VS2010 分析向导说，当我使用 PointToClient 方法时，会生成数千个绘图类型的实例。问题是，我没有在我的 Update 方法中创建一个新变量，那么这些实例来自哪里？

```
public sealed class InputManager
{
  private System.Drawing.Point  mPos;

  public InputManager() 
  {
    mPos = new System.Drawing.Point(0, 0);
  }
  //////////////////////////////////////////////////////////////////////////

  public void Update()
  {
    mPos = myForm.PointToClient(Control.MousePosition);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:52:48.627

它不会产生垃圾，因为您使用`struct`的是值类型。没有收集压力，即使这是一个问题？看起来不像是游戏的瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:22:50.450

这是[代码](http://referencesource.microsoft.com/netframework.aspx)`PointToClient()`

```
public Point PointToClient(Point p) { 
    return PointToClientInternal(p);
} 

internal Point PointToClientInternal(Point p) { 
    NativeMethods.POINT point = new NativeMethods.POINT(p.X, p.Y); 
    UnsafeNativeMethods.MapWindowPoints(NativeMethods.NullHandleRef, new HandleRef(this, Handle), point, 1);
    return new Point(point.x, point.y); 
} 
```

`PointToClient()`调用`PointToClientInternal()`，它创建一个新的`NativeMethods.POINT`.

这是`NativeMethods.POINT`：

```
[StructLayout(LayoutKind.Sequential)] 
public class POINT {
    public int x; 
    public int y; 

    public POINT() { 
    }

    public POINT(int x, int y) {
        this.x = x; 
        this.y = y;
    } 
} 
```

所以我认为这就是你的堆分配的来源。调用`PointToClient()`会导致实例化一个新`NativeMethods.POINT`对象（注意这是一个类，而不是一个结构）。

如果这是您的应用程序中的问题，我建议仅`PointToClient()`在您实际需要该值时调用。您也可能会考虑[`MapWindowPoints()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145046%28v=vs.85%29.aspx)直接使用，但这可能是可取的，也可能不是可取的。

# java - Hibernate 和 FlexJSON 的延迟初始化错误

> ID：13750402
> 
> 赞同：1
> 
> 时间：2012-12-06T18:47:22.570
> 
> 标签：java, hibernate, jpa, lazy-loading, flexjson

尝试使用 FlexJSON 序列化 JPA/Hibernate 实体时遇到一个非常奇怪的错误。对象本身并不花哨；只是其他对象之间的字段和关系。

```
Caused by: flexjson.JSONException: Error trying to deepSerialize
    at flexjson.transformer.ObjectTransformer.transform(ObjectTransformer.java:61)
    at flexjson.transformer.TransformerWrapper.transform(TransformerWrapper.java:22)
    at flexjson.transformer.ObjectTransformer.transform(ObjectTransformer.java:49)
    at flexjson.transformer.TransformerWrapper.transform(TransformerWrapper.java:22)
    at flexjson.transformer.ObjectTransformer.transform(ObjectTransformer.java:49)
    at flexjson.transformer.TransformerWrapper.transform(TransformerWrapper.java:22)
    at flexjson.transformer.ObjectTransformer.transform(ObjectTransformer.java:49)
    at flexjson.transformer.TransformerWrapper.transform(TransformerWrapper.java:22)
    at flexjson.JSONContext.transform(JSONContext.java:73)
    at flexjson.JSONSerializer.serialize(JSONSerializer.java:377)
    at flexjson.JSONSerializer.serialize(JSONSerializer.java:235)

Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at flexjson.BeanProperty.getValue(BeanProperty.java:102)
    at flexjson.transformer.ObjectTransformer.transform(ObjectTransformer.java:37)
    ... 89 more
Caused by: java.lang.IllegalStateException: Cannot call isReadOnlyBeforeAttachedToSession when isReadOnlySettingAvailable == true
at org.hibernate.proxy.AbstractLazyInitializer.isReadOnlyBeforeAttachedToSession(AbstractLazyInitializer.java:308 
```

通过阅读其他（稀疏）帖子并查看代码，这似乎是延迟初始化的问题。这种情况在极少数情况下会重复发生，但这些情况是可重复的。我的猜测是因为它似乎是有状态的，它与数据有关，但我真的不知道为什么数据会导致这种异常，特别是因为它是如此罕见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:12:10.580

可能您的实体对象具有“延迟加载”属性，这些属性仅在访问时才填充数据库中的值。如果休眠会话在灭菌时已经关闭（访问该属性），您将获得延迟初始化异常。

要消除此异常，您可能必须执行以下操作之一：

*   确保在访问延迟加载的属性（序列化）时未关闭休眠会话
*   在会话关闭之前初始化延迟加载的属性，这样即使会话关闭也不需要数据库访问
*   使它们不会“懒加载”
*   根本不序列化延迟加载的属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T15:05:49.303

我经历过的最好的解决方法是，在进行深度序列化之前，您需要将 bean、列表、映射或任何要序列化的数据等数据放入 HashMap，然后尝试深度序列化该 HashMap。你会看到诀窍是 100% 有效。

赛沙扎德

# php - 提交表单而不刷新 - jQuery、ajax - IE 不工作

> ID：13750403
> 
> 赞同：0
> 
> 时间：2012-12-06T18:47:25.613
> 
> 标签：php, jquery, ajax, internet-explorer, validation

我正在尝试让联系表格正常工作。[页面](http://pagina.chalupakoseckerovne.sk/)末尾的 http://pagina.chalupakoseckerovne.sk/ 是联系表格。使用 jquary.validate 插件进行验证有效，但现在我不知道如何在提交后不刷新就留在页面上，并在提交按钮旁边显示短消息，如“谢谢”。这是我的验证脚本

```
$("#contact-form").validate({
        rules: {
            name: {minlength: 4,required: true},
            email: {required: true,email: true},
            phone: {number: true,required: true},
            pocet: {range: [1, 10],required: true},
            odkedy: {required: true},
            dokedy: {required: true}
        },   
    });
    $('#contact-form').ajaxForm(function() { 
        $("#done").show("slow");
        $('#contact-form').resetForm();
    }); 
    return false; 
```

这是我的php：

```
<?php 
$ToEmail = 'sample@email.com'; 
$EmailSubject = 'Chalupa-rezervacia'; 
$mailheader = "Content-type: text/html; charset=windows-1250"; 
$MESSAGE_BODY = 'Meno: '.$_REQUEST["name"].'<br />
                Email: '.$_REQUEST["email"].'<br />
                Tel. cislo: '.$_REQUEST["phone"].'<br />
                Pocet: '.$_REQUEST["pocet"].'<br />
                Prichod: '.$_REQUEST["odkedy"].'<br />
                Odchod: '.$_REQUEST["dokedy"].'<br />
                Poznamka: '.$_REQUEST["comments"].'<br />'; 
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader);
?> 
```

形式

```
<form name="contact-form" id="contact-form" action="rezervacia.php" method="post"> 
```

*编辑：*现在在 Chrome、FF 和 Opera 中可以正常工作，但在 IE 中不行。在 IE 中只是重定向到 php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:04:46.650

您需要为您的验证功能添加一个带有 ajax 发布功能的提交处理程序。这样的事情应该这样做：

```
$('#contact-form').validate({
   rules: {
      name: {minlength: 4,required: true},
      email: {required: true,email: true},
      phone: {number: true,required: true},
      pocet: {range: [1, 10],required: true},
      odkedy: {required: true},
      dokedy: {required: true}
   },
   submitHandler: function(form) {
      // some other code
      // maybe disabling submit button
      // post the form data with ajax

      $.ajax({
          url: 'process.php',
          type: 'POST',
          data: form.serialize(),         
          success: function(data) {
              // Show any returned message
              alert('Load was performed: ' + data);
          }
      });

      // Prevent form submission
      return false;
   }
}); 
```

请参阅此处的 jquery.validate 插件文档：http://docs.jquery.com/Plugins/Validation[以及](http://docs.jquery.com/Plugins/Validation)此处 的 jQuery ajax 文档： http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

**- - 编辑 - -**

根据下面的 Ryleys 评论，我添加`return false;`了`submitHandler`这将阻止表单提交。这是一个速记函数的示例`$.post`，您可以将其用作该`$.ajax`函数的替代方法：

```
$.post('process.php', form.serialize(), function(data) {
    // Show any returned message
    alert('Load was performed: ' + data);
}); 
```

在此处查看 jQuery $.post 文档：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# jquery - 拖动和克隆一切问题

> ID：13750409
> 
> 赞同：2
> 
> 时间：2012-12-06T18:47:49.253
> 
> 标签：jquery, drag-and-drop, clone

我有一个可拖动的模块，它附加了一个编辑/删除功能，效果很好。但是当我拖动它并且它被克隆并且我将它放在可放置区域时，克隆失去了它的编辑/删除功能。按钮仍然存在，但它们不起作用。

必须有一种更简单、更简单的方法来做到这一点。

我真的需要知道我在这里做错了什么。

这是我的代码...

```
var xLabsConnect = {

jQuery : $,

settings : {
    columns : '.column',
    columnsNav : '.columnNav',
    widgetSelector: '.widget',
    handleSelector: '.widget-head',
    contentSelector: '.widget-content',
    widgetDefault : {
        movable: true,
        removable: true,
        collapsible: true,
        editable: true,
    },
    widgetIndividual : {
        intro : {
            movable: false,
            removable: false,
            collapsible: false,
            editable: false
        }
    }
},

init : function () {
    this.attachStylesheet('../css/dragstyles.css');
    this.addWidgetControls();
    this.makeSortable();
},

getWidgetSettings : function (id) {
    var $ = this.jQuery,
        settings = this.settings;
    return (id&&settings.widgetIndividual[id]) ? $.extend({},settings.widgetDefault,settings.widgetIndividual[id]) : settings.widgetDefault;
},

addWidgetControls : function () {
    var xLabsConnect = this,
        $ = this.jQuery,
        settings = this.settings;

    $(settings.widgetSelector, $(settings.columns)).each(function () {
        var thisWidgetSettings = xLabsConnect.getWidgetSettings(this.id);
        if (thisWidgetSettings.removable) {
            $('<a href="#" class="remove">CLOSE</a>').mousedown(function (e) {
                e.stopPropagation();   
            }).click(function () {
                if(confirm('This widget will be removed, ok?')) {
                    $(this).parents(settings.widgetSelector).animate({
                        opacity: 0   
                    },function () {
                        $(this).wrap('<div/>').parent().slideUp(function () {
                            $(this).remove();
                        });
                    });
                }
                return false;
            }).appendTo($(settings.handleSelector, this));
        }

        if (thisWidgetSettings.editable) {
            $('<a href="#" class="edit">EDIT</a>').mousedown(function (e) {
                e.stopPropagation();   
            }).toggle(function () {
                $(this).css({backgroundPosition: '-66px 0', width: '55px'})
                    .parents(settings.widgetSelector)
                        .find('.edit-box').show().find('input').focus();
                return false;
            },function () {
                $(this).css({backgroundPosition: '', width: ''})
                    .parents(settings.widgetSelector)
                        .find('.edit-box').hide();
                return false;
            }).appendTo($(settings.handleSelector,this));
            $('<div class="edit-box" style="display:none;"/>')
                .append('<ul><li class="item"><label>Change the title?</label><input value="' + $('h4',this).text() + '"/></li>')
                .insertAfter($(settings.handleSelector,this));
        }           

    });

    $('.edit-box').each(function () {
        $('input',this).keyup(function () {
            $(this).parents(settings.widgetSelector).find('h4').text( $(this).val().length>20 ? $(this).val().substr(0,20)+'...' : $(this).val() );
        });
        $('ul.colors li',this).click(function () {

            var colorStylePattern = /\bcolor-[\w]{1,}\b/,
                thisWidgetColorClass = $(this).parents(settings.widgetSelector).attr('class').match(colorStylePattern)
            if (thisWidgetColorClass) {
                $(this).parents(settings.widgetSelector)
                    .removeClass(thisWidgetColorClass[0])
                    .addClass($(this).attr('class').match(colorStylePattern)[0]);
            }
            return false;

        });
    });

    var activelist = $(".activemodules").sortable({
        revert: false,
        placeholder: 'widget-placeholder',
        forcePlaceholderSize: true,
        opacity: 0.7,
    });

    $(".allmodules li").draggable({
        connectToSortable: ".activemodules",
        helper: "clone",
        opacity: 0.7,
        revert: 300,
        delay: 100,
    });
},

attachStylesheet : function (href) {
    var $ = this.jQuery;
    return $('<link href="' + href + '" rel="stylesheet" type="text/css" />').appendTo('head');
},

};

xLabsConnect.init(); 
```

提前谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:37:18.943

克隆时，您可以传递布尔参数，指示何时复制附加到克隆元素的数据和事件。请参阅[此处](http://api.jquery.com/clone/)的参考。

作为替代方案，也许您应该尝试[live](http://api.jquery.com/live/)或[delegate](http://api.jquery.com/delegate/)。这些功能允许事件监听动态添加的元素（如克隆）。

例如，而不是

```
$('<a href="#" class="edit">EDIT</a>').mousedown(function (e) {
  [...] 
```

做这个

```
$('<a href="#" class="edit">EDIT</a>').live('mousedown', function (e) {
  [...] 
```

删除功能也是如此。

# python - 与 python 2.7/flask/mongoDB/git 持续集成

> ID：13750417
> 
> 赞同：4
> 
> 时间：2012-12-06T18:48:16.550
> 
> 标签：python, git, continuous-integration, flask, gunicorn

我应该如何在我的新应用程序上实现持续集成？目前，这就是我们推动生产的方式 - 请耐心等待，我知道这远非理智：

1.  从本地，git push origin 生产（生产代码库保存在生产分支上，修改要么直接写在那里并提交，要么文件从另一个分支单独签出。源是远程生产服务器）

2.  在远程盒子上， sudo stop gunicorn （应用程序作为进程运行）

3.  cp ~/flaskgit/application.py ~/flask/applicaion.py（来自本地的 git push 源推送到带有更新后挂钩的 init -bare repo，该钩子填充 ~/flaskgit 中的文件。~/flask 是gunicorn 服务在 virtualenv 下运行应用程序）

4.  sudo start gunicorn

我们使用在不同端口上运行的 ~/flaskgit 代码进行测试。一旦看起来不错，我们就做CP

我希望有更流畅的东西。我过去使用过 jenkins，并且喜欢这种体验 - 但没有设置它。

为了做好这件事，我应该查找哪些资源/实用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:26:22.500

buildbot, jenkins/hudson，但这些都为您提供持续集成，因为您可以通过提交挂钩对每个代码库更改运行“make”等效项。你也可以看看 vagrant，如果有什么东西可以让你创建可重复的 vm 的 wrt 到 config/setup。可以用一个提交钩子来绑定它。

# java - 对于循环错误，我该如何解决？

> ID：13750418
> 
> 赞同：0
> 
> 时间：2012-12-06T18:48:15.597
> 
> 标签：java, string, loops, for-loop, char

```
for(int x = 0;x<14;x++){
    day[x]= theSheet.changeLetters(day[x]);
}

public String changeLetters(String entering){
    if(entering.equalsIgnoreCase("a")){
        entering = "10";
    } else {
        if(entering.equalsIgnoreCase("b")){
            entering = "11";
        } else {
            if(entering.equalsIgnoreCase("c")){
                entering = "12";
            } else {
                if(entering.equalsIgnoreCase("d")){
                    entering = "13";
                } else {
                    if(entering.equalsIgnoreCase("e")){
                        entering = "14";
                    } else {
                        if(entering.equalsIgnoreCase("f")){
                            entering = "15";
                        } else {
                            if(entering.equalsIgnoreCase("g")){
                                entering = "16";
                            } else {
                                if(entering.equalsIgnoreCase("h")){
                                    entering = "17";
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return entering;
} 
```

说错误在这里`if(entering.equalsIgnoreCase("a"))`和我用来运行该方法的 for 循环中。我正在尝试将放入字符串中的字母更改为数字。

谁能向我解释错误可能在哪里？我很难发现问题。它让我可以很好地输入字母，但是一旦进入此 for 循环并运行此方法，它就会出现异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:51:49.413

why don't you use

```
if (condition) {
    // ...
} else if (condition2) {
   // ...
} else if (condition3) {
   // ...
}
// and so on 
```

to make your code more readable. Your nested conditions are a mess. If you fix them, you might as well fix the error (if it's in the part of code you showed us).

Also add

```
System.out.println("Entering = '" + entering "'"); 
```

at the beginnig of your method to see if really receives what you are expecting it to receive.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T18:56:28.393

好的，根据

> 是的，代码在 for 循环中初始化，然后使用 for(int x =1;x<8;x++){ day[x-1] = JOptionPane.showInputDialog("Enter hours pairs for day "+x +" .\n 输入第一个数字："); day[x] = JOptionPane.showInputDialog("请输入第二个数字："); 然后使用前面发布的 for 循环将放入数组中的字母更改为数字。

你有一个逻辑错误。您正在覆盖以前的条目，而不是将数组填充到最多 14 个项目。所以之后的项目`8`被留下`null`，因此`NullPointerException`.

尝试这个：

```
String[] day = new String[14];

for( int i = 0; i < 14; i+=2 ) {
    day[i] = JOptionPane.showInputDialog("Enter hour pairs for day "+(i/2+1) +".\n Enter the first digit: ");
    day[i+1] = JOptionPane.showInputDialog("Enter the second digit: ");
} 
```

* * *

作为奖励，您可以使用以下方法简化 if-else 代码：

```
public String changeLetters( String entering ) {
    return String.valueOf(entering.toUpperCase().charAt(0) - 55);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:14:10.473

正如@jlordo 已经说过的那样，避免嵌套如此深度的 if 语句。

作为替代方案，您可以将 switch 语句与`enum`类似的语句结合使用 - 尽管以下方法包含更多代码，但它更通用且更适合扩展（例如，使用字母表中的所有字母及其他字母），它会使对于您想要表达的内容，代码更具可读性和更合适。

```
Letter letter;

if (letter.equals("a")) letter = Letter.a;
if (letter.equals("A")) letter = Letter.A;
// and so on ...

switch (letter) {
    case a : { 
        // do some code here ...
        break;
    }
    case A : { 
        // do some code here ...
        break;
    }
    // and so on ...
}

public enum Letter {
    a (1),
    A (2),
    b (3),
    B (4),
    c (5),
    C (6);
    // and so on

    private final int index;

    Letter(int i) {

        index = i;
    }

    public int getIndex () {

        return index;
    }
} 
```

请注意，如果您使用的是 Java 7，`switch`即使没有枚举也可以使用该语句，因为它也接受字符串，如下所示：

```
switch (entering) {

    case "a" : {

        // ...
    }

    // ...
} 
```

# regex - 反图片盗链（自定义正则表达式）

> ID：13750419
> 
> 赞同：3
> 
> 时间：2012-12-06T18:48:23.120
> 
> 标签：regex, .htaccess, hotlinking

我想设置一个正则表达式，禁止对不以以下模式结尾的图像进行热链接：-200.jpg

“200”实际上可以是“150”或“250”或100-999之间的任何数字（即3个字符）。.jpg 可以是.jpeg 或.png，.gif 允许盗链。

我从这样的事情开始：

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(.+\.)?mywebsite\.com/ [NC]
RewriteRule [^0-9]{3}\.(jpe?g|png)$ /img/hotlink.gif [NC,R,L] 
```

例如： 这应该被允许： `h*ttp://mywebsite.tld/dir/dir/hello_sdfk456er_142.jpg-200.jpg`而这应该被拒绝：`h*ttp://mywebsite.tld/dir/dir/hello_sdfk456er_142.jpg`

但这不起作用。

另外，请考虑以下事项：

我正在使用 url_rewriting 以便显示图像的 html 页面就像`h*ttp://mywebsite.tld/username/1337.jpg` 1337 代表数据库中图像的 id 一样。我之所以强调这种微妙之处，是因为有这样一条规则：

```
RewriteRule ![0-9]{3}\.(jpe?g|png)$ /img/hotlink.gif [NC,R,L] 
```

行不通。

编辑：

我刚刚解决了它添加了一些例外：

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(.+\.)?mywebsite\.com/ [NC]
RewriteCond %{REQUEST_URI}  !-[0-9]{3}\.(jpe?g|gif|png)$ [NC]
RewriteCond %{REQUEST_URI}  !/[0-9]+\.(jpe?g|gif|png)$ [NC]
RewriteRule \.(jpe?g|png)$  /img/hotlink.gif [NC,R,L] 
```

如果您知道“更性感”的方式，请告诉我。无论如何都要感谢那个尝试过的人（删除了他的消息？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:02:27.527

您的解决方案有两个缺陷：

1.  第 4 行`/[0-9]+`也将允许热链接图像被命名为 just `200.jpg`（无连字符）。
2.  缺少 RewriteRule 条件，因此不允许盗链`.gif`图像。

这是一个更新的版本：

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^https?://(.+\.)?mywebsite\.com/ [NC]
RewriteCond %{REQUEST_URI}  !-[0-9]{3}\.(jpe?g|gif|png)$ [NC]
RewriteRule .* http://mywebsite.com/img/hotlink.gif [NC,R,L] 
```

您可以按如下方式阅读：

1.  如果referrer不为空
2.  推荐人不是我的网站
3.  并且请求的图像不以允许的模式结尾（例如 -123.gif）
4.  然后显示一个hotlink.gif

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:45:17.583

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(.+\.)?mywebsite\.com/ [NC]
RewriteCond %{REQUEST_URI}  !-[0-9]{3}\.(jpe?g|gif|png)$ [NC]
RewriteCond %{REQUEST_URI}  !/[0-9]+\.(jpe?g|gif|png)$ [NC]
RewriteRule \.(jpe?g|png)$  /img/hotlink.gif [NC,R,L] 
```

# java - 使用 Java Spring RestTemplate 上传大型二进制文件

> ID：13750421
> 
> 赞同：7
> 
> 时间：2012-12-06T18:48:25.707
> 
> 标签：java, spring, upload, binary, resttemplate

我有一个能够接收二进制数据 [文件] 的 servlet。

我想使用 Spring 的 RestTemplate() 将一个大的二进制文件上传到 servlet。但是，不可能将二进制文件完全加载到内存中。

到目前为止，我的尝试导致 OutOfMemory 错误，表明这些方法一直在尝试将整个文件加载到内存中。

如何将此二进制数据流式传输到 servlet？在 Spring 或 Java 中更可取。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T06:45:05.717

找到了答案：

[https://jira.springsource.org/browse/SPR-7909](https://jira.springsource.org/browse/SPR-7909)

```
 SimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();
requestFactory.setBufferRequestBody(false);
RestTemplate rest = new RestTemplate(requestFactory); 
```

这可以防止将整个请求加载到内存中。

# java - Java 上的 Checkbox 始终处于领先地位

> ID：13750424
> 
> 赞同：1
> 
> 时间：2012-12-06T18:48:35.833
> 
> 标签：java, checkbox, always-on-top

大家好，我正在尝试制作一个新软件，它可以为我提供任何数字的模数。我想要的是我在我的 gui 上放了一个 JCheckBox，当它被检查时，窗口应该是

```
setAlwaysOnTop(true); 
```

以及取消选择时

```
setAlwaysOnTop(false); 
```

我的一些代码是

```
boolean top = false;

    Check = new JCheckBox("Always on top");
    Check.setLocation(140, 105);
    Check.setSize(150, 20);
    Check.setSelected(top);
    Check.addItemListener(new CheckBoxListener());

    add(Check);
    setAlwaysOnTop(top);

    private class CheckBoxListener implements ItemListener{
        public void itemStateChanged(ItemEvent e){
            if(e.getSource()==Check){ 
                if(Check.isSelected()){
                    top = true;
                }else{
                    top = false;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:52:18.433

`setAlwaysOnTop`不会观察到您的进一步状态更改`boolean top.`它在传递时采用 top 的**值**。

在你的听众中，写下：

```
if(e.getSource() == Check) {
  setAlwaysOnTop(Check.isSelected());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:57:27.060

改变：

```
public void itemStateChanged(ItemEvent e){
    if(e.getSource()==Check){ 
        if(Check.isSelected()){
            top = true;
        }else{
            top = false;
        }
    }
} 
```

到

```
public void itemStateChanged(ItemEvent e){
    if(e.getSource()==Check){ 
        setAlwaysOnTop(Check.isSelected());
        }
    }
} 
```

（另外，查看`LayoutManager`Java 中的各种 s；不要制作具有固定定位的 GUI。）

# sql - 在 Visual Studio 2010 的 1 个输入文本字段中输入多个单独的值，并作为 where 子句的一部分发送到 SQL

> ID：13750426
> 
> 赞同：1
> 
> 时间：2012-12-06T18:48:38.947
> 
> 标签：sql, sql-server, visual-studio-2010

使用来自 1 个文本字段（7171、7496、7134、7108、7105、7353）的输入值，如何为我的 SQL 语句的 WHERE 子句创建一个 IN 列表。输入文本框可以有 1 个或多个需要包含在 WHERE-IN 子句中的数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:46:24.817

```
declare @query as nvarchar(max)
declare @text varchar(200)

set @text='80000, 8600'
set @query='select * from Employee where [emp_salary] in ('+@text+')'
--[emp_salary] is integer field 
exec sp_executesql @query 
```

# objective-c - 设置数据后调整 UICollectionView 单元格的大小

> ID：13750428
> 
> 赞同：49
> 
> 时间：2012-12-06T18:48:47.530
> 
> 标签：objective-c, uicollectionview, uicollectionviewcell

我的 UICollectionView 单元格包含带有多行文本的 UILabel。在标签上设置文本之前，我不知道单元格的高度。

```
-(CGSize)collectionView:(UICollectionView *)collectionView
                 layout:(UICollectionViewLayout*)collectionViewLayout
 sizeForItemAtIndexPath:(NSIndexPath *)indexPath; 
```

这是我研究单元格大小的初始方法。但是，这在从情节提要中创建单元之前调用。

有没有办法在渲染后布局集合和调整单元格的大小，并且我知道单元格的实际大小？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-09T11:05:47.460

我认为您正在寻找可以在UICollectionView`invalidateLayout`的属性上调用的方法。`.collectionViewLayout`此方法会重新生成您的布局，在您的情况下也意味着调用`-collectionView: layout: sizeForItemAtIndexPath:`，这是反映您所需项目大小的正确位置。Jirune 指出了如何计算它们的正确方向。

`invalidateLayout`可以在[此处](https://stackoverflow.com/questions/13780153/uicollectionview-animate-cell-size-change-on-selection)找到使用的示例。另请参阅有关该方法的 UICollectionViewLayout 文档：

> 使当前布局无效并触发布局更新。
> 
> **讨论：**
> 
> 您可以随时调用此方法来更新布局信息。此方法使集合视图本身的布局无效并立即返回。因此，您可以从同一个代码块中多次调用此方法，而不会触发多次布局更新。实际的布局更新发生在下一个视图布局更新周期。

**编辑：**

对于包含自动布局约束的故事板集合视图，您需要覆盖该`viewDidLayoutSubviews`方法`UIViewController`并在该方法中调用`invalidateLayout`集合视图布局。

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    [yourCollectionView.collectionViewLayout invalidateLayout];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-03T09:52:52.460

子类 UICollectionViewCell 并`layoutSubviews`像这样覆盖

因此，您将**单元格前缘和后缘锚定到 collectionView**

```
override func layoutSubviews() {
        super.layoutSubviews()

        self.frame = CGRectMake(0, self.frame.origin.y, self.superview!.frame.size.width, self.frame.size.height)
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T18:18:21.727

嘿，在上述`delegate`方法本身中，您可以`UILabel`使用以下棘手的方法计算大小并`UICollectionViewCell` `size`根据该计算返回。

```
 // Calculate the expected size based on the font and 
    // linebreak mode of your label
    CGSize maximumLabelSize = CGSizeMake(9999,9999);

    CGSize expectedLabelSize = 
     [[self.dataSource objectAtIndex:indexPath.item] 
             sizeWithFont:[UIFont fontWithName:@"Arial" size:18.0f] 
        constrainedToSize:maximumLabelSize 
            lineBreakMode:NSLineBreakByWordWrapping]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-10T06:14:19.387

```
- (void)viewDidLoad {
    self.collectionView.prefetchingEnabled = NO;
} 
```

在 iOS 10 中，`prefetchingEnabled`是`YES`默认设置。When `YES`，集合视图在显示单元格之前请求单元格。它导致 iOS 10 崩溃

# ios - Phonegap + jQuery mobile：使用 jQuery Mobile 从 iOS 应用程序的 Documents 文件夹中注入 html 文件

> ID：13750432
> 
> 赞同：1
> 
> 时间：2012-12-06T18:48:56.767
> 
> 标签：ios, ajax, cordova, jquery-mobile

我正在开发一个同时使用 Phonegap 和 JQuery Mobile 的应用程序。该应用程序连接到外部服务器以检查新的内容/内容更新（html 和 pdf 文件）。如果需要，在 iOS 中，这些文件会成功下载到 app /Documents 文件夹中。然后，该应用程序检索每个内容文件的绝对路径 ( *file://localhost/var/mobile/Applications/APPID/Documents/subfolder* ) 并创建链接到每个文件的绝对路径的列表视图。

我遇到的问题如下：***点击列表视图会打开链接页面，但不是作为 ajax 调用。页面加载，但页面中没有引用 javascript（cordova.js、jquery.js app.js 等），因此我无法导航回主菜单。当我在 /Documents 文件夹中打开 html 文件时，jQueryMobile ajax 导航似乎停止工作。这只发生在 /Documents 文件夹中的下载内容（因此在 Phonegap 的 www 文件夹之外）。***

从远程调试器中，如果我尝试调用该`$.mobile.changePage('previousPage.html')*`函数，控制台会返回 $ 未定义，就好像页面无法引用 jQuery 一样。但是在 /www 文件夹中的所有页面中，我都不需要重新引用 js 文件。

该应用程序使用多页布局，每个页面在容器之后都有自己的 javascript `<div data-role="page" id="pageid">`。/Documents 文件夹中的每个 .html 都构造为一个 jQueryMobile 页面（具有数据角色属性）。

这是创建列表视图的代码：

```
<script type="text/javascript">
    $('#content').live('pagebeforeshow', function(e) {
                            var curCat = parseInt(window.localStorage.getItem('currentCat'));

                            console.log('PAGE BEFORE SHOW: CONTENT');
                            db.db.transaction(function(tx) {
                                tx.executeSql('SELECT * FROM `content` WHERE `content`.`catID` = ?', [curCat],
                                    function(tx, result) {
                                        var path = window.localStorage.getItem('contentPath') + '/';
                                        if (result.rows && result.rows.length) {
                                            var html = '<ul data-role="listview" id="linkUl">';
                                            for (var i = 0; i < result.rows.length; i++) {
                                                var filename = result.rows.item(i).index_file.substr(result.rows.item(i).index_file.lastIndexOf('/'));
                                                console.log(result.rows.item(i).id);
                                                html += '<li id="' + result.rows.item(i).id + '">';
                                                html += '<a href="' + path + filename +'">';
                                                html += result.rows.item(i).title;
                                                html += '</a></li>';
                                            }
                                            html += '</ul>';
                                            console.log(html);
                                            $('#contCnt').html(html);
                                            $('ul#linkUl').listview();
                                        }

                                    },
                                    function(tx, error) {
                                        console.log(error.code);
                                        var html = '<div id="errorDB">';
                                            html += 'ERROR RETRIEVING FILES';
                                            html += '</div>';
                                        $('#contCnt').html(html);
                                    }
                                );
                            });
                        });
                        $('div#content').live('pageshow', function(e) {
                            $('ul#linkUl').listview('refresh');
                        });

</script> 
```

其中 ContentPath 变量存储为 fileSystem 对象的 directory.toUrl();

我担心 jQueryMobile 无法从外部目录（iOS 中的 /Documents 文件夹）中 ajax-pull html，或者我缺少一些属性或设置以便这样做。也许是因为我使用的是绝对网址？如果是这样，我怎样才能从 Phonegap 的 /www 文件夹中获取相对 url？我是否必须在 cordova.plist 文件中声明某些内容？

此外，下载的内容不必包含任何 js，它们应该只是纯 html，但我需要在所有页面中保留 jQuery Mobile 页眉/页脚和导航系统。

我正在使用 Cordova 2.2.0 以及 jQuery 和 jQuery mobile 的最新版本。

提前感谢，如果格式出现问题，我很抱歉，我是 SO 新手（以防我尽快编辑）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:51:08.183

您可以从文档文件夹（或应用程序具有读取权限的任何其他文件夹）打开文件。

链接可能无法作为 ajax 页面加载的原因有两个

1.  jQuery Mobile 认为它不是应用程序的一部分
2.  加载页面时出现 javascript 错误，这会导致运行默认链接单击操作而不是 ajax 加载程序。

您可以尝试使用对 $.mobile.changePage 的调用，而不仅仅是设置链接 - 这让您对正在发生的事情有更多的了解。

我认为不同文件夹中的文件 url 不应该被 jQuery Mobile 视为不同的域，但是为了消除这种可能性，构建文档文件夹的相对 url 应该相当容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T17:29:04.263

解决了，感谢汤姆带领我走向正确的方向。

我猜问题是 jQueryMobile 将绝对路径解释为外部链接，因此 WebView 将 html 文件作为新文件打开，将其与应用程序的其余部分分离。

我所做的是替换绝对路径`file://localhost/var/mobile/Applications/APPID/Documents/subfolder`

有一个亲戚，在我的情况下是`'./../../Documents/subfolder/filename.html`

现在它就像一个魅力。

# powershell - Power shell Multiple WMI commands within if statement

> ID：13750433
> 
> 赞同：2
> 
> 时间：2012-12-06T18:49:02.010
> 
> 标签：powershell, wmi

I am just starting out with powershell and I have the following script:

```
Get-ADComputer -Filter * | 

ForEach-Object {

  if(Test-Connection -CN $_.dnshostname -Count 1 -BufferSize 16 -Quiet)

    {   
   write-host $_.dnshostname
   Get-WmiObject Win32_Process -cn $_.dnshostname | Select     ProcessID,ProcessName,ThreadCount
   Get-WmiObject Win32_DiskDrive -cn $_.dnshostname;
   }

  ELSE { write-host $_.dnshostname unavlible }

} 
```

Basically what I am trying to achieve is pull from my DC a list of every computer, test if they are up and then poll them with multiple WMI queries. The problem I am having is that when I am doing my select on the first Wmi object is that I then dont a result of the second wmi object as I am assuming the select is being applied to the second object causing no data to be returned.

Any idea how I can do this. Also right now I am using a ping to test a machine avalibility but this is not the best as ICMP is blocked on some systems but WMI is still possible. The same goes for ICMP being available but wmi blocked. Is there a better way to perform the test of getting a list of systems that the WMI query will work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:51:36.007

我从 powershell v1 到 v3 发现的一个简单的解决方法是：

```
Get-ADComputer -Filter * |     
ForEach-Object {    
  if(Test-Connection -CN $_.dnshostname -Count 1 -BufferSize 16 -Quiet)    
   {   
     write-host $_.dnshostname
     Get-WmiObject Win32_Process -cn $_.dnshostname | 
     Select ProcessID,ProcessName,ThreadCount
     out-string -inputobject "" #this line does the trick or just out-default
     Get-WmiObject Win32_DiskDrive -cn $_.dnshostname;
   }
  else { write-host "$($_.dnshostname) unavailable }    
} 
```

为了测试可用性服务器，我使用[此功能](http://gallery.technet.microsoft.com/scriptcenter/Powershell-Test-Server-e0cdea9a) ，它使用 ping 和其他协议来查看服务器是否已启动，您只需要`true`知道服务器是否还活着。（作为系统管理员建议在域（而不是 DMZ 域）中启用`icmp`协议作为第一个诊断工具）

# perl - Perl Net::Jabber::Bot new line

> ID：13750434
> 
> 赞同：6
> 
> 时间：2012-12-06T18:49:02.387
> 
> 标签：perl, xmpp, newline

I'm using `Net::Jabber::Bot` module in my Perl script and it works properly but one problem is that when I want to send a message all new lines get removed! Two questions :

1.  How we can have new lines in our messages? Should we disable a`chomp` somewhere?
2.  What happens with new lines in Jabber/XMPP?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:20:41.090

这是一个已知问题，有人已经为此提交了补丁：[http ://code.google.com/p/perl-net-jabber-bot/issues/detail?id=24](http://code.google.com/p/perl-net-jabber-bot/issues/detail?id=24)

您无法直接发送 \n 但如果该代码不包含不可打印的字符，您也许可以发送 xmpp/jabber 编码的换行符。

在这个子中：

```
sub _send_individual_message {
...
# Strip out anything that's not a printable character
# Now with unicode support?
$message_chunk =~ s/[^[:print:]]+/./xmsg; 
```

# ruby-on-rails - Rails：仅当另一个字段存在时才验证一个字段是否存在

> ID：13750436
> 
> 赞同：17
> 
> 时间：2012-12-06T18:49:05.220
> 
> 标签：ruby-on-rails, ruby, validation, activerecord

我有一个模型，其中有两个字段在技术上可以为空。字段名称是`:is_activated`和`:activated_at`。仅当设置`:activated_at`为 时才需要。如果is 则不需要存在。在 Rails 中将此验证直接设置到 ActiveRecord 中的适当方法是什么？`:is_activated``true``:is_activated``false`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-06T18:52:41.260

您可以在验证器上使用[Proc 。](http://www.ruby-doc.org/core-1.9.3/Proc.html)`:activated_at`

```
validates :activated_at, :presence, if: Proc.new { |a| a.is_activated? } 
```

* * *

推荐阅读：

*   [http://guides.rubyonrails.org/active_record_validations.html#using-a-proc-with-if-and-unless](http://guides.rubyonrails.org/active_record_validations.html#using-a-proc-with-if-and-unless)
*   [http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html)

* * *

*最后，您应该考虑重命名`:is_activated`为 simple `:activated`。这在 Rails 中被认为是更好的做法。前缀在`is_`其他语言中用于布尔属性，因为它们的方法名称不支持`?`字符。Ruby 可以，Rails 会`___?`在布尔属性上生成方法。因此，最好只调用属性`:activated`并使用`activated?`.*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-28T15:37:15.317

### 非布尔属性。

如果您不使用`Boolean`属性，例如`is_activated`，并希望确保一个属性在另一个非布尔属性存在时存在，您可以简化它：

```
validates :activated_at, presence: true, if: :activated_by? 
```

`activated_by?``false`何时返回`null`，`true`否则返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:53:02.677

你可以这样做：

```
validates :activated_at, presence: true, if: :is_activated?

def is_activated?
  self.is_activated
end 
```

这只会验证`:activated_at`方法是否`is_activated?`返回`true`。

# jquery - Jquery Ajax returns NULL

> ID：13750437
> 
> 赞同：0
> 
> 时间：2012-12-06T18:49:12.100
> 
> 标签：jquery, ajax, json

I have a little script to request json data from my database. Here is the Code

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
    $(document).ready(function() {
        var keyword = "1";
         var baseurl1 = "json_data2.php?l=" + keyword;
        // Product Count 
        var json = (function() {
            var json = null;
            $.ajax({
                'async': false,
                'global': false,
                'url': baseurl1,
                'dataType': "json",
                'success': function(data) {
                    json = data;
                }
            });
            return json;
        })();
        console.log(json);

    });
});
</script> 
```

When my Feed looks like this

```
{"limit": [{"rows":"127"}]} 
```

I get "Object {limit: Array[1]}" in the console. So it seems to word. I can also alert json.limit[0].rows and get 127 shown. So far so good.

When I try to get another feed of data which looks like this

```
{"posts": [{"productname":"Das kleine Ich bin ich","link":"if3OHlvncaIY7A7VGze7VSIeAAZAIZV83cvaG%2B5w3U48cuooMp9qZZJkdQzwyGEXgk8LCR9kD7nY6Y%2FSR0RnjRJo44jHguoaesLAa4mLhuKpuLsfty85ZaePH%2FHReJTc","imgurl":"img\/products\/mytoys\/das-kleine-ich-bin-ich.jpg","price":"13.90","oldprice":"","sale":""},]} 
```

the console log shows up with "null". What could be the issue? I mean I change nothing on the code, just the Url. The datafeed is JSON and I also visited the datafeed in my browser, it's showing up correctly. Any pointers?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:53:46.723

console.log 记录 null 因为当执行该行时，ajax 执行尚未完成，您的控制台日志以及您想要对 ajax 调用返回的数据执行的任何操作都必须在成功回调中

# facebook - Facebook Counter for Blog - Not Changing

> ID：13750439
> 
> 赞同：2
> 
> 时间：2012-12-06T18:49:31.433
> 
> 标签：facebook, facebook-like, counter

My website url: [http://nagaratharkavadi.com/index.php/en/home](http://nagaratharkavadi.com/index.php/en/home)

I have included Facebook Like for my blog. I have integrated the code manually (which was available as a module in Joomla) but problem is that the count is showing as "270K" and for each blog entry the count is showing the same. How can I resolve this?

# c++ - 如何获取结构中元素的值，这也是结构内的向量

> ID：13750440
> 
> 赞同：0
> 
> 时间：2012-12-06T18:49:37.080
> 
> 标签：c++, pointers, vector, structure

如果我在另一个结构中有一个向量，我如何启动或获取 struct1 中的元素的值

```
typedef struct_1 { 
      unsigned v1;
      unsigned v2;
      int v3;
    }struct1;

typedef struct_2{
      int v4;
      unsigned v5;
      vector <struct1> s1;
   } struct2; 
```

假设要获得 v4、v5 我可以这样做：

```
struct2 *p = new struct2(); 
p->v4;
p->v5; 
```

如何访问 v1 和 v2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:51:36.500

您可以通过以下方式访问会员：

```
p->s1.at(index).v1;
p->s1.at(index).v2;
p->s1.at(index).v3; 
```

由于最初这是空的，`at`因此将引发异常。或者，您可以使用`operator[]`，但如果索引无效，您会遇到未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:52:50.113

您首先需要将一些元素“添加”到 s1 向量中，因为通过`struct2`指向 的对象`p`，`s1`向量被初始化为空。

# windows-8 - 在 WinRT 中如何创建始终可见的应用程序？

> ID：13750441
> 
> 赞同：1
> 
> 时间：2012-12-06T18:49:40.243
> 
> 标签：windows-8, windows-runtime, taskbar, always-on-top

使用 Windows 8，是否可以创建始终可见的应用程序？例如，在以前的 Windows 版本中，有带有快速启动图标的任务栏。我可以创建类似于始终在屏幕上的快速启动图标的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:44:14.853

如果您指的是 Windows 8 应用商店应用程序，那么答案是否定的。您可以拥有一个实时磁贴和 toast 通知，为用户提供更新，这可能会导致用户启动您的应用程序。

阅读一篇好文章，了解您的 Windows 应用商店应用程序将如何在 Windows 8 上运行，请转到[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)了解应用程序生命周期（Windows 应用商店应用程序）。这将解释 App 执行状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:23:43.677

在 RT 版本中是不可能的，但在桌面版本中是可能的。如果您有桌面应用程序，则可以将其固定到任务栏。但是任何 Window 商店应用程序都不能固定到任务栏。您可以做的是将应用程序移至主屏幕的开头，因此无论何时单击 Windows 按钮，您的应用程序都将显示在前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:01:19.050

您的意思是在星形菜单屏幕中始终可见吗？如果是这样，您可以将磁贴更新功能添加到您的应用程序。只要用户将应用程序固定到“开始”菜单，他就会看到更新。检查下面的链接以获取介绍性教程。 [http://blogs.msdn.com/b/windowsappdev/archive/2012/04/16/creating-a-great-tile-experience-part-1.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/04/16/creating-a-great-tile-experience-part-1.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:52:57.027

“快速启动”具有非常具体的含义，您可能会或可能不会在您的问题中提及。

下面是 Windows 8 中的快速启动栏 - 本质上是一个指向您`%AppData%`目录中某个位置的工具栏。在 Windows 7 之前，它默认可用，但现在将项目直接固定到任务栏的能力取代了它。 如果你真的想要，[这里是你如何恢复快速启动:)](http://support.microsoft.com/kb/975784)

![在 Windows 8 中快速启动](../Images/61fe1725ac679f2870ed9b7c1bfd5d1b.png)

当然，它仅在桌面模式下可用，而在现代 UI 上不可用，在现代 UI 中，固定磁贴是您所希望的最好的，这完全取决于用户固定它并确定它在他们的开始时显示的位置屏幕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T05:50:54.050

另一个值得一提的选项（虽然更像系统托盘而不是快速启动）是[锁屏存在](http://msdn.microsoft.com/en-us/library/windows/apps/hh779720.aspx)。如果用户选择这样做并且您的应用程序支持，他可以将其添加到他的锁定屏幕：

*   作为 aa 徽章（最多 7 个应用程序）
*   或作为磁贴通知（仅限单个应用程序）

这不是一种让用户快速启动您的应用程序的方式（其他答案已经涵盖了这些选项），而是一种保持可见性并让您的用户了解情况的方式。

# android-layout - Audio starts on list item click how to stop?

> ID：13750442
> 
> 赞同：0
> 
> 时间：2012-12-06T18:49:41.350
> 
> 标签：android-layout, android-listview, android-audiomanager

Audio is played when the user selects an item from the list, i have three buttons one is to stop the playing audio and the other two are one to play the next item on the list and one to play the previous

How would i achieve this? i have made the buttons to be clickable and then i try writing the code eg. mp.stop(); to stop the music but this is not working? and also how would i get the other buttons to play next and previous items on the list?

Below is my .java file

```
public class Nasheeds extends ListActivity {
//ArrayList holds the data (as HashMaps) to load into the ListView
ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
//SimpleAdapter does the work to load the data in to the ListView
private SimpleAdapter sa;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nasheeds2);

    //HashMap links each line of data to the correct TextView
    HashMap<String,String> item;
    for(int i=0;i<Nasheed.length;i++){
      item = new HashMap<String,String>();
      item.put( "line1", Nasheed[i][0]);
      item.put( "line2", Nasheed[i][1]);

      list.add( item );
    }

    sa = new SimpleAdapter(this, list,
            R.layout.nasheeds1,
            new String[] { "line1","line2" },
            new int[] {R.id.displayname, R.id.title});

    setListAdapter(sa);

  getListView().setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        switch (arg2)
        {
        case 0:
            System.out.println("User selected option 1");
             MediaPlayer mp = MediaPlayer.create(Nasheeds.this,         R.raw.mok);  
              mp.start(); 

            TextView tv=(TextView) findViewById(R.id.selectedfile);
            tv.setText("Playing "+ "Mountains of Mekkah, Zain Bikha");
            break;
        case 1:
            System.out.println("User selected option 2");

        case 2:

            break;                  
        }

    }

  });

}

private String[][] Nasheed =
    {{"Mountains of Mekkah","Zain Bikha"},
    {"Hadith 2","....add hadith...."},
    {"Hadith 3",".....add hadith"},};

} 
```

and this is my one of the nasheed2.xml file:

```
 <ListView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@android:id/list"
        android:layout_weight="1.0"
        />

    <LinearLayout
            android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:drawable/screen_background_light"
    android:padding="10dip">

    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/selectedfile"
            android:text="Not file selected"
            android:textColor="@android:color/black"
            android:gravity="center_horizontal"
            android:singleLine="true"
            android:ellipsize="middle"/>

    <SeekBar
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/seekbar"
            android:max="100"
            android:paddingBottom="10dip"/>

    <LinearLayout
                    android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:background="@android:drawable/screen_background_light">

        <TextView
            android:id="@+id/songCurrentDurationLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

            <ImageButton
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/prev"
                    android:src="@android:drawable/ic_media_previous"
                    android:onClick="doClick"/>

            <ImageButton
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/play"
                    android:src="@android:drawable/ic_media_play"
                    android:onClick="doClick"/>

            <ImageButton
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/next"
                    android:src="@android:drawable/ic_media_next"
                    android:onClick="doClick"/>

            <TextView
                android:id="@+id/songTotalDurationLabel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

    </LinearLayout> 
    </LinearLayout> 
```

this is the other nasheed1.xml file:

```
 <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/displayname"
            android:textSize="18dip"
            android:textStyle="bold"
            android:singleLine="true"
            android:ellipsize="end"/>

    <LinearLayout
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

            <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:id="@+id/title"
                    android:textSize="15dip"
                    android:singleLine="true"
                    android:ellipsize="end"
                    android:layout_weight="1.0"/>

            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/duration"
                    android:gravity="right"
                    android:textSize="15dip"
                    android:singleLine="true"
                    android:ellipsize="end"/>
    </LinearLayout>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:51:46.450

`play button`在点击事件上尝试以下代码。

```
public boolean istrue = true;

btnplay.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (istrue) {
                    mp.pause();
                    istrue = false;
                } else {
                    mp.start();
                    istrue = true;
                }
            }
        }); 
```

或为停止音频创建另一个按钮。

点击那个停止按钮使用这个

```
mp.stop(); 
```

# python - PIL merge of two images with alpha channels - not working as expected

> ID：13750447
> 
> 赞同：5
> 
> 时间：2012-12-06T18:50:09.683
> 
> 标签：python, python-imaging-library

There's a bunch of questions here on SO which provide answers to the present question, however the output is not the expected.

The goal is to merge two RGBA images. The information on the alpha channel of each image is not the same.

The current (simplified) code is:

```
from PIL import Image

image = '1.png'
watermark = '2.png'

wmark = Image.open(watermark)
img = Image.open(image)

img.paste(wmark, (0, 0), wmark)
img.save("result.png", "PNG") 
```

The two images are:

Background

![Background](../Images/0c9b7eb4d5090162f2b66413d1525057.png)

Foreground

![Foreground](../Images/fa8c5b8cb4cb03f84c1dfae91ab4dc72.png)

Expected output

![Expected output](../Images/9d97523719f5c059f756019c0b4606ba.png)

Actual result

![Actual result](../Images/38a9500c406c91dcfe3fc63cc4b9b024.png)

In case you don't see the difference, here are the alpha channels (inverted for better visualization) of the final versions.

Expected result - alpha channel

![Expected result - alpha channel](../Images/8a88efd660c3e3e8e9a5cb85e3203c21.png)

Actual result - alpha channel

![Actual result - alpha channel](../Images/b84b12f4499f66c1170845cf1e8687b8.png)

So with that said, is there any way of doing this or am I doing something wrong?

EDIT - clarification following @zenpoy comment:

If the foreground image has a certain amount of opacity, I want that to be taken into account when superimposing both images, but I don't want the alpha channel of the second image to be added to the first. Much like putting a piece of glass (the foreground image) in front of a paper image (background).

In other words, if the background image was RGB instead of RGBA, the final image should have no alpha information.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:42:23.637

从您最初的描述来看，以下想法似乎是等效的。设 X, Y 为两个 RGBA 图像。考虑 X 中的 RGB 波段和 Y 中的 RGBA 波段，合并 X 和 Y，生成图像 Z。将 Z 中的波段 A 设置为 X 中的波段 A。这与您的最终陈述相矛盾，但它似乎给出了预期在这种情况下输出。

所以，这是代码：

```
image = '1.png'
watermark = '2.png'

wmark = Image.open(watermark)
img = Image.open(image)

ia, wa = None, None
if len(img.getbands()) == 4:
    ir, ig, ib, ia = img.split()
    img = Image.merge('RGB', (ir, ig, ib))
if len(wmark.getbands()) == 4:
    wa = wmark.split()[-1]

img.paste(wmark, (0, 0), wmark)
if ia:
    if wa:
        # XXX This seems to solve the contradiction, discard if unwanted.
        ia = max_alpha(wa, ia)
    img.putalpha(ia)

img.save('result.png') 
```

函数`max_alpha`是：

```
def max_alpha(a, b):
    # Assumption: 'a' and 'b' are of same size
    im_a = a.load()
    im_b = b.load()
    width, height = a.size

    alpha = Image.new('L', (width, height))
    im = alpha.load()
    for x in xrange(width):
        for y in xrange(height):
            im[x, y] = max(im_a[x, y], im_b[x, y])
    return alpha 
```

这个新功能似乎考虑到了上面提到的矛盾。

# matlab - How to select and remove cells from a 2d matrix of cells in matlab

> ID：13750449
> 
> 赞同：0
> 
> 时间：2012-12-06T18:50:19.277
> 
> 标签：matlab, select, random, cells

I have a 35x2 matrix (randomwords); and I have randomly selected 8 rows (rndm). What I need to do is remove the 8 selected rows from the randomwords matrix and save this new 27x2 matrix under a new variable heading, but I am finding this extremely difficult. I have provided my code Any help would be greatly appreciated.

```
target = words ([30 1 46 14 44 55 8 3 57 65 69 70 57 39 21 60 22 20 16 10 9 17 62 19 25 41 49 53 36 6 42 58 40 56 63]);
synonym = words([43 15 32 28 72 27 48 51 13 67 59 33 35 47 52 61 71 7 23 12 2 66 11 37 4 45 64 38 34 31 29 18 50 68 26]);
% assigns these elements of words into targets and synonyms.  They are
% ordered so that words and synonyms are corresponding elements of
% synonyms and targets

% TO SELECT 8 RANDOM WORDS FOR THE ENCODING PHASE

randomwords = [target; synonym]';   % should be a 35x2 matrix
rndm = datasample(randomwords, 8, 1);    % should select 8 random couples from the rows and none of them will be repeats 
unpaired = rndm(:,2);     % should select only the synonyms to form the unpaired stimuli; will be different for each run 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:21:44.763

将已删除行的索引存储在一个变量中，假设`removedrows`然后执行以下操作：

```
result = randomwords;

result(removedrows,:) = []; 
```

# xcode - Running keychaindump.c from GitHub but there are deprecated variables

> ID：13750451
> 
> 赞同：1
> 
> 时间：2012-12-06T18:50:23.167
> 
> 标签：xcode, xcode4, github, deprecated

I am running the Keychaindump script from GutHub on my computer using xcode4 and im getting some errors upon building and running the script.

DES_set_key is deprecated

How can I get rid of this error?

Thanks

The script can be found here

[https://github.com/juuso/keychaindump/blob/master/keychaindump.c](https://github.com/juuso/keychaindump/blob/master/keychaindump.c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-16T09:26:21.043

@Aleister Cooper：您必须附加 2 个库：libcrypto.dylib 和 libssl.dylib。试试看。

# php - Using PHP AMQPConnection inside a thread

> ID：13750455
> 
> 赞同：1
> 
> 时间：2012-12-06T18:50:30.603
> 
> 标签：php, multithreading, rabbitmq, amqp

I have a PHP program where I connect to a Rabbit MQ server and retrieve messages. I have put this functionality inside a function:

```
function get_messages()
{
    $connection = new AMQPConnection();
    $connection->setLogin($rabbit_username);
    $connection->setPassword($rabbit_passwd);
    $connection->setHost($rabbit_host);

    while (!$connection->connect())
    {
            echo "## Trying to connect to Rabbit MQ...\n";
            sleep(1);
    }

    $amqpchn = new AMQPChannel($connection);
    $mq = new AMQPQueue($amqpchn);
    $mq->setName("myqueue");
    $mq->setFlags(AMQP_DURABLE|AMQP_PASSIVE);
    $mq->declare();   // must declare then bind
    $mq->bind("my.exchange","my.routing");

    // do stuff
} 
```

This works fine. However when I try to run the function get_messages() from inside a thread (just one thread), the code gets stuck at $connection->connect(). It cannot connect to the Rabbit server.

Any ideas why this happens?

Thanks in advance

# matlab - how can I integrate two plots on Matlab

> ID：13750462
> 
> 赞同：1
> 
> 时间：2012-12-06T18:50:43.787
> 
> 标签：matlab, plot

I have these datas for each algorithm.

I need the graph of each algorithm according to it's datas.

And in addition, in each of 3 graphs, they should also be combined with graphs of x^2 , log x^x in base 2, x in order.

table file: [http://dl.dropbox.com/u/33787465/hw1%20tablo.xlsx](http://dl.dropbox.com/u/33787465/hw1%20tablo.xlsx)

How can it be done?

![alg](../Images/3c9dea511e1bdd8a08fa8d580a894b77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:59:25.540

如果您在 Matlab 中有数据，请执行以下操作

```
plot(alg1size, [alg1time, alg1time .^ 2, log2(alg1time .^ 2)]); 
```

如果不`xlsread`按照评论中的建议使用

# c# - 尝试阻止被调用两次

> ID：13750464
> 
> 赞同：1
> 
> 时间：2012-12-06T18:50:50.353
> 
> 标签：c#, visual-studio-2010, try-catch

所以我有一个从数据库中检索数据并输出的函数。它被封装在一个 try 块中，以便处理从用完行到处理的错误。

这是加载时调用的函数（生成*初始输出*），稍后调用以更新日志框。

问题是，每当我再次调用该函数时，它都会输出两次数据。由于只有数据在 try 块中，而不是 headers，这表明 try / catch 是问题所在。

为凌乱/骇人的代码道歉：

```
 private void NavigateRecords()
    {
        da.Fill(ds1, "LogOutput");
        textlog4.Text = "Date \t\t Time \t\t Floor\r\n";
        try
        {
            for (int i = 0; i <= 20; i++)
            {
                DataRow dRow = ds1.Tables["LogOutput"].Rows[i];
                for (int i2 = 1; i2 <= 3; i2++)
                {
                    textlog4.Text += dRow.ItemArray.GetValue(i2).ToString() + "\t\t";
                }
                textlog4.Text += "\r\n";

            }
        }
        catch { textlog4.Text += "----------------------"; }  
    } 
```

这是执行部分连接的代码，可能有用：

```
 string sql = "SELECT * From tblLog";
        da = new System.Data.SqlClient.SqlDataAdapter(sql, con);
        NavigateRecords(); 
```

初始输出：

```
Date         Time        Floor
6/12        18:18:22        1       
---------------------- 
```

下次调用时输出：

```
Date         Time        Floor
6/12        18:18:22        1       
6/12        18:46:19        2       
6/12        18:18:22        1       
6/12        18:46:19        2       
---------------------- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:54:29.957

它不是您的 try catch 的问题，而是您的变量的问题。在向变量添加新数据之前清除变量。我没有看到您在方法范围内声明的变量，因此它保留了您最初放入其中的数据。

# applescript - Applescript 为文件夹中的文件重复完整的脚本

> ID：13750469
> 
> 赞同：0
> 
> 时间：2012-12-06T18:51:06.640
> 
> 标签：applescript, repeat

我现在已经设法将所有这些代码放在一起，只需要最后一步即可。任何帮助将不胜感激。

我已设置此脚本以打开文件夹中的 .xlsx 文件，更改日期，然后将其保存为 PDF 到另一个文件夹。然后它通过查找客户端代码（在 excel 文件中找到）来创建邮件，随后在 Database.xlsx 文件中查找此代码并返回客户端的电子邮件地址并将其添加到中的“收件人”字段中邮件。然后它将新创建的 PDF 附加到这封邮件中，我只需单击并发送即可。

该脚本在打开第一个 .xlsx 文件后停止，这样我就可以在 PDF 和创建邮件之前检查详细信息是否正确。

我的问题是：如何让这个过程为初始文件夹中的每个文件重复？我尝试了重复功能，但无济于事。

任何帮助将不胜感激。

谢谢你。

```
--Complete script for updating invoice, saving (as PDF too in seperate folder) and e-mailing invoices

--Select the first file in a folder and then repeat for the next

set theFolder to POSIX path of (choose folder with prompt "Choose Folder containing .xlsx invoices")
set theFolderList to list folder theFolder without invisibles

repeat with x from 1 to count of theFolderList
    set theFile to theFolder & item x of theFolderList
    set theNewFile to theFolder & theFile
    tell application "Microsoft Excel"
        activate
        open theFile
        set ActiveClientCode to value of range ("B1")
    end tell

--Change date of one cell to date of next month

tell application "Microsoft Excel"
    activate
    open "/Users/pienaar0/Documents/AdminAssist/" & ActiveClientCode & ".xlsx"
    set d to value of cell ("A1")
    set d to my MonthAdd(d)
    set value of cell ("A1") to d
end tell

on MonthAdd(d)
    set m to ((month of d as integer) + 1)
    set ddd to day of d
    if m > 12 then
        set m to m - 12
        set year of d to (year of d) + 1
    end if
    if {m} is in {4, 6, 9, 11} and ddd = 31 then --AppleScript treats "Apr 31" as May 1,
        set day of d to 30
    end if
    set month of d to m
    if m = 2 and month of d as integer = 3 then --AppleScript treats "Feb 31" as Mar 3,
        set day of d to 1 -- Mar 1
        set d to d - (1 * days) -- last day of Feb
    end if
    return d
end MonthAdd

property dialog_timeout : 36000
display dialog "Make sure the invoice is correct before clicking OK" buttons {"OK"} giving up after dialog_timeout
set the user_choice to the button returned of the result

--Save document and PDF
tell application "Microsoft Excel"
    save active workbook
    save active workbook in "Macintosh HD:Users:pienaar0:Documents:AdminAssistPDF:" & ActiveClientCode & ".pdf" as PDF file format

end tell

--Find e-mail address, and Name in Database (Check filepath and ranges)

tell application "Microsoft Excel"
    open "Users/pienaar0/Documents/Database.xlsx"
    set searchRange to range ("D2:D5")
    set foundRange to find searchRange what ActiveClientCode with match case
    set fRow to first row index of foundRange
    set ClientEmail to value of range ("C" & fRow as text)
    set ClientFirstname to value of range ("A" & fRow as text)
    (* do something with the foundRange *)
end tell

--Create e-mail

tell application "Mail"
    set theMessage to make new outgoing message with properties {visible:true, subject:"Your monthly invoice", content:"Dear " & ClientFirstname & ",

I trust this mail finds you well?

Please find attached your monthly invoice for your immediate consideration.

Regards,

AdminAssist

"}
    set message signature of theMessage to signature "Replies & Forwards"
    delay 1
    tell content of theMessage
        make new attachment with properties {file name:"/Users/pienaar0/Documents/AdminAssist/PDF/" & ActiveClientCode & " Sheet1.pdf"}
        tell theMessage
            make new to recipient at end of to recipients with properties {address:ClientEmail}
        end tell
    end tell
end tell
end repeat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:22:36.730

您需要将处理程序移到重复块之外：

```
property dialog_timeout : 36000
--Complete script for updating invoice, saving (as PDF too in seperate folder) and e-mailing invoices
--Select the first file in a folder and then repeat for the next

set theFolder to POSIX path of (choose folder with prompt "Choose Folder containing .xlsx invoices")
tell application "System Events" to set theFolderList to name of every file of folder theFolder whose visible is true

repeat with x from 1 to count of theFolderList
    set theFile to theFolder & item x of theFolderList
    set theNewFile to theFolder & theFile
    tell application "Microsoft Excel"
        activate
        open theFile
        set ActiveClientCode to value of range ("B1")
    end tell

    --Change date of one cell to date of next month
    tell application "Microsoft Excel"
        activate
        open "/Users/pienaar0/Documents/AdminAssist/" & ActiveClientCode & ".xlsx"
        set d to value of cell ("A1")
        set d to my MonthAdd(d)
        set value of cell ("A1") to d
    end tell

    display dialog "Make sure the invoice is correct before clicking OK" buttons {"OK"} giving up after dialog_timeout
    set the user_choice to the button returned of the result

    --Save document and PDF
    tell application "Microsoft Excel"
        save active workbook
        save active workbook in "Macintosh HD:Users:pienaar0:Documents:AdminAssistPDF:" & ActiveClientCode & ".pdf" as PDF file format
    end tell

    --Find e-mail address, and Name in Database (Check filepath and ranges)

    tell application "Microsoft Excel"
        open "Users/pienaar0/Documents/Database.xlsx"
        set searchRange to range ("D2:D5")
        set foundRange to find searchRange what ActiveClientCode with match case
        set fRow to first row index of foundRange
        set ClientEmail to value of range ("C" & fRow as text)
        set ClientFirstname to value of range ("A" & fRow as text)
        (* do something with the foundRange *)
    end tell

    --Create e-mail

    tell application "Mail"
        set theMessage to make new outgoing message with properties {visible:true, subject:"Your monthly invoice", content:"Dear " & ClientFirstname & ",

I trust this mail finds you well?

Please find attached your monthly invoice for your immediate consideration.

Regards,

AdminAssist

"}
        set message signature of theMessage to signature "Replies & Forwards"
        delay 1
        tell content of theMessage
            make new attachment with properties {file name:"/Users/pienaar0/Documents/AdminAssist/PDF/" & ActiveClientCode & " Sheet1.pdf"}
            tell theMessage
                make new to recipient at end of to recipients with properties {address:ClientEmail}
            end tell
        end tell
    end tell
end repeat

on MonthAdd(d)
    set m to ((month of d as integer) + 1)
    set ddd to day of d
    if m > 12 then
        set m to m - 12
        set year of d to (year of d) + 1
    end if
    if {m} is in {4, 6, 9, 11} and ddd = 31 then --AppleScript treats "Apr 31" as May 1,
        set day of d to 30
    end if
    set month of d to m
    if m = 2 and month of d as integer = 3 then --AppleScript treats "Feb 31" as Mar 3,
        set day of d to 1 -- Mar 1
        set d to d - (1 * days) -- last day of Feb
    end if
    return d
end MonthAdd 
```

# mysql - SQL 性能 UNION 与 OR

> ID：13750475
> 
> 赞同：75
> 
> 时间：2012-12-06T18:51:39.683
> 
> 标签：mysql, sql, performance, union

我刚刚阅读了一篇优化文章的一部分，并*在*以下语句中出现了段错误：

> 使用`OR`with a使用 SQL 替换语句时`UNION`：
> 
> ```
> select username from users where company = ‘bbc’ or company = ‘itv’; 
> ```
> 
> 到：
> 
> ```
> select username from users where company = ‘bbc’ union
> select username from users where company = ‘itv’; 
> ```

从快速`EXPLAIN`：

使用`OR`：

![在此处输入图像描述](../Images/2d430094a7896ddb19f1c9d2de910179.png)

使用`UNION`：

![在此处输入图像描述](../Images/8a16ab0688ac2a55339b9d5350c0a602.png)

`UNION`这不是意味着*加倍工作*吗？

虽然我很欣赏`UNION`某些 RDBMS 和某些表模式的性能可能更高，但这并不像作者建议的那样*绝对正确。*

### 问题

我错了吗？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-12-13T18:35:40.000

您阅读的文章使用了一个不好的例子，或者您误解了他们的观点。

```
select username from users where company = 'bbc' or company = 'itv'; 
```

这相当于：

```
select username from users where company IN ('bbc', 'itv'); 
```

MySQL 可以对此查询使用索引`company`。没有必要做任何 UNION。

更棘手的情况是您的`OR`条件涉及两个*不同*的列。

```
select username from users where company = 'bbc' or city = 'London'; 
```

假设有一个索引 on`company`和一个单独的索引 on `city`。鉴于 MySQL 通常在给定查询中每个表只使用一个索引，它应该使用哪个索引？如果它使用 上的索引`company`，它仍然需要进行表扫描以查找`city`伦敦所在的行。如果它使用 上的索引`city`，则必须对`company`bbc 所在的行进行表扫描。

`UNION`解决方案是针对这种情况的。

```
select username from users where company = 'bbc' 
union
select username from users where city = 'London'; 
```

现在每个子查询都可以使用索引进行搜索，子查询的结果由`UNION`.

* * *

一位匿名用户提议对我上面的答案进行编辑，但版主拒绝了该编辑。它应该是评论，而不是编辑。提议的编辑声称 UNION 必须对结果集进行排序以消除重复行。这使查询运行速度变慢，因此索引优化是一种清洗。

我的回答是索引有助于在 UNION 发生之前将结果集减少到少数行。UNION 实际上确实消除了重复，但要做到这一点，它只需要对小的结果集进行排序。可能存在 WHERE 子句匹配表的重要部分的情况，并且在 UNION 期间进行排序与​​简单地进行表扫描一样昂贵。但更常见的是通过索引搜索减少结果集，因此排序比表扫描成本低得多。

差异取决于表中的数据以及正在搜索的术语。确定给定查询的最佳解决方案的唯一方法是在[MySQL 查询分析器](http://dev.mysql.com/doc/refman/5.5/en/show-profile.html)中尝试这两种方法并比较它们的性能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T19:07:19.260

这些不是同一个查询。

我对 MySQL 没有太多经验，所以我不确定查询优化器做什么或不做什么，但这是我的一般背景（主要是 ms sql server）的想法。

通常，查询分析器可以采用上述两个查询并从中制定完全相同的计划（如果它们相同），因此没关系。我怀疑这些查询之间没有性能差异（它们是等效的）

```
select distinct username from users where company = ‘bbc’ or company = ‘itv’; 
```

和

```
select username from users where company = ‘bbc’ 
union
select username from users where company = ‘itv’; 
```

现在，问题是，以下查询之间是否存在差异，我实际上不知道，但我怀疑优化器会使它更像第一个查询

```
select username from users where company = ‘bbc’ or company = ‘itv’; 
```

和

```
select username from users where company = ‘bbc’ 
union all
select username from users where company = ‘itv’; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:07:25.140

这取决于优化器根据数据大小、索引、软件版本等最终会做什么。

我猜想使用 OR 会给优化器一个更好的机会来找到一些效率，因为一切都在一个单一的逻辑语句中。

此外，UNION 有一些开销，因为它创建了一个重置*​​集*（没有重复）。*如果公司*被索引，则 UNION 中的每个语句都应该很快执行......不确定它是否真的会做*双倍*的工作。

### 底线

除非您真的迫切需要从查询中挤出所有速度，否则最好使用最能传达您意图的表单...... OR

### 更新

我还想说 IN。我相信以下查询将提供比 OR 更好的性能（这也是我更喜欢的形式）：

`select username from users where company in ('bbc', 'itv');`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T21:38:52.313

在几乎所有情况下，`union`or`union all`版本都会对 users 表进行两次全表扫描。

该`or`版本在实践中要好得多，因为它只会扫描表一次。如果可用，它还将只使用一次索引。

对于几乎任何数据库和任何情况，原始陈述似乎都是错误的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-26T15:29:55.610

比尔·卡尔文的回答非常正确。当 OR 语句的两个部分都有自己的索引时，最好进行联合，因为一旦您有一小部分结果，就更容易对它们进行排序并消除重复项。总成本几乎低于只使用一个索引（对于其中一列）和对另一列进行表扫描（因为 mysql 只对一列使用一个索引）。

这通常取决于表的结构和需求，但在大型表中，联合给了我更好的结果。

# .htaccess - 修改一些重写规则

> ID：13750486
> 
> 赞同：0
> 
> 时间：2012-12-06T18:52:27.330
> 
> 标签：.htaccess, mod-rewrite

我有以下重写规则：

```
RewriteRule ^section/(.*)/(.*)_(.*).html$ index.php?section_permalink=$1&content_permalink=$2&content_id=$3 [QSA,L]
RewriteRule ^section/(.*)/page_(.*)/$ index.php?section_permalink=$1&page=$2 [QSA,L]
RewriteRule ^section/(.*)/$ index.php?section_permalink=$1 [QSA,L] 
```

我想修改它们以摆脱 /section/.

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:39:12.540

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

RewriteRule ^(.*)/(.*)_(.*).html$ index.php?section_permalink=$1&content_permalink=$2&content_id=$3 [QSA,L]
RewriteRule ^(.*)/page_(.*)/$ index.php?section_permalink=$1&page=$2 [QSA,L]
RewriteRule ^(.*)/$ index.php?section_permalink=$1 [QSA,L] 
```

# asp-classic - 通过 URL 进行跨站点脚本

> ID：13750489
> 
> 赞同：2
> 
> 时间：2012-12-06T18:52:39.407
> 
> 标签：asp-classic, xss, javascript-injection

我被告知要在我的一些银行旧 .asp 页面中找到跨站点脚本 (XSS) 的修复程序。

我对这个主题做了一些研究，但我没有找到我的问题的答案。这是我第一次听说 XSS，也是我第一次看到 ASP（虽然页面只有 HTML），而且我已经有 2 年没有从事网页设计了，所以我非常生疏。

例如，我有这个表格

```
<form method="POST" id="CH" name="CH" action="http://some_url/some.asp">
<input type="hidden" name="srv" value="1" ID="srv"/>
<TABLE border="0" cellpadding="0" cellspacing="0" width="100%" align="center">
    <TR valign="top">
            <TR>
                <TD align="center">Input something here
                <input name="input_something" type="text" class="field-no-fit" maxlength="12" value="">
                </TD>
            </TR>
    </TR>
</TABLE>
</form> 
```

如果我手动输入 URL（包含此表单）为

```
http://this_url/this.asp?1=%22%3E%3Cscript%3Ealert%28HelloWorld%29%3C/script%3E%3Cimg%20alt=%22%22%20src=%22 
```

该页面将加载，然后它会引发 javascript 警报并显示错误图像。

我的目标是在打开页面时阻止脚本运行。我阅读了有关 Server.HTMLEncode 的信息，但找不到使用它来阻止脚本在页面加载时运行的方法。

提前致谢！

**编辑**：如果我将输入的值替换为：“<%= Server.HTMLEncode(Request("input_something"))%>”，我是否能够至少部分解决它

我无法测试它，因为目前我无法访问 IE6，并且所有其他浏览器（包括 IE>6 版本）都避免了该错误（已在“安全”选项卡中禁用 XSS 过滤器，但它不起作用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:55:16.610

我认为这与浏览器无关？

你显然直接在你的页面上写了一个查询字符串参数的内容，如下所示：

```
<%=Request.QueryString("1")%> 
```

那很不好。

正如你已经发现你应该使用

```
server.htmlencode( Request.QueryString("1") ) 
```

页面上您直接在页面上编写用户输入的任何地方。

这应该够了吧

[也看看这里](https://stackoverflow.com/questions/725875/anti-xss-and-classic-asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:57:59.410

（我对 ASP 了解不多）您可以通过启用 ASP 请求验证来轻松解决问题。与任何行为更改一样，其他页面上可能会出现许多问题（尽管这会令人惊讶），因此请先测试更改。[请参阅http://msdn.microsoft.com/en-us/library/bb355989.aspx](http://msdn.microsoft.com/en-us/library/bb355989.aspx)中的步骤 1

您的服务器正在从 URL 参数填充页面上的所有标签，包括隐藏的“srv”输入，没有过滤 HTML 标签，然后将其粘贴到页面中。您可以将此表单限制为仅响应 POST，而不是 GET 方法，那么您的示例攻击将不起作用。这可能是最简单和最无害的修复方法。

最后，看看您是否可以为用于跟踪 HTTPOnly 会话的任何 cookie 设置 cookie 属性。

在[http://msdn.microsoft.com/en-us/library/ms998274.aspx上对您可以使用的所有可能措施进行了很长时间的阅读](http://msdn.microsoft.com/en-us/library/ms998274.aspx)

# regex - 匹配特定模式的正则表达式

> ID：13750497
> 
> 赞同：1
> 
> 时间：2012-12-06T18:53:02.953
> 
> 标签：regex, perl

我想在 Perl 中找到一个匹配如下模式的正则表达式：

```
my $sumthing = "people say
for -->"; 
```

在这里之后`say`有一个换行符。所以我需要找到一个正则表达式，它可以匹配这样一个在模式中包含换行符的模式。请帮我找到这个，因为我是 Perl 和正则表达式的新手。

我尝试过的可能方法是：

```
if (($sumthing !~ (/\n+$/)) && ($sumthing !~ (/^\n+/m))) 
```

他们很乐意帮助我找到一个匹配这种模式的表达式，但没有得到想要的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:04:01.683

不清楚你想要什么。你想完全匹配那个字符串吗？如果是这样，你可以使用

```
$sumthing =~ /^people say\nfor -->\z/ 
```

或者

```
$sumthing eq "people say\nfor -->" 
```

或者，也许您需要知道的是在使用`.`时匹配任何字符，包括换行符`/s`？

```
/people .* -->/s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:01:49.713

查看[`/s`](http://perldoc.perl.org/perlre.html)导致`.`匹配任何内容的修饰符，包括换行符。

```
my $str = "people say for\nsomething...";
$str =~ m{say(.*)}s and print "'$1'\n"; 
```

这将打印：

```
' for
something...' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:09:19.110

以下将检查任何内容，然后是新行，然后是任何内容。不确定我是否完全理解你的问题。

```
if($sumthing =~ m/.*\n.*/) 
```

# android - DownloadManager 无法下载大小超过 2 GB 的文件

> ID：13750507
> 
> 赞同：1
> 
> 时间：2012-12-06T18:54:00.780
> 
> 标签：android

我需要通过 DownloadManager 服务下载大于 2gb 的文件。看起来它使用整数类型来处理文件大小并且不显示下载进度。任何人都可以帮助解决这个问题。请协助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:57:50.007

编写您的自定义 DownloadManager 服务，作为替代

# c - 如何改进 sin/cos lut 函数？

> ID：13750516
> 
> 赞同：2
> 
> 时间：2012-12-06T18:54:28.457
> 
> 标签：c, trigonometry

我正在尝试为我的 MCU 优化 sin/cos 以计算地理距离。这部分公式特别是使用三角函数：

```
double e = (MyTan( lat2 / 2 + quarter_pi ) / MyTan( lat1 / 2 + quarter_pi )); 
```

因此，我尝试为 to 构建自己的`sin/cos`查找表，`-PI`如下`PI`所示：

```
#define PARTPERDEGREE 10
double mysinlut[PARTPERDEGREE * 90 + 1];
double mycoslut[PARTPERDEGREE * 90 + 1];
void MySinCosCreate()
{
    int i;
    double angle, angleinc;

    // Each degree also divided into 10 parts
    angleinc = (M_PI / 180) / PARTPERDEGREE;
    for (i = 0, angle = 0.0; i <= (PARTPERDEGREE * 90 + 1); ++i, angle += angleinc)
    {
        mysinlut[i] = sin(angle);
    }

    angleinc = (M_PI / 180) / PARTPERDEGREE;
    for (i = 0, angle = 0.0; i <= (PARTPERDEGREE * 90 + 1); ++i, angle += angleinc)
    {
        mycoslut[i] = cos(angle);
    }
}

double MySin(double rad)
{
   int ix;
   int sign = 1;

   if(rad > (M_PI / 2))
        rad = M_PI / 2 - (rad - M_PI / 2);

   if(rad < -(M_PI / 2))
       rad = -M_PI / 2 - (rad + M_PI / 2);

   if(rad < 0)
   {
        sign = -1;
        rad *= -1;
   }

   ix = (rad * 180) / M_PI * PARTPERDEGREE;

   return sign * mysinlut[ix];
}

double MyCos(double rad)
{
   int ix;
   int sign = 1;

    if(rad > M_PI / 2)
    {
        rad = M_PI / 2 - (rad - M_PI / 2);
        sign = -1;
    }
    else if(rad < -(M_PI / 2))
    {
        rad = M_PI / 2 + (rad + M_PI / 2);
        sign = -1;
    }
    else if(rad > -M_PI / 2 && rad < M_PI / 2)
    {   
        rad = abs(rad);
        sign = 1;
    }

    ix = (rad * 180) / M_PI * PARTPERDEGREE;

    return sign * mycoslut[ix];
}

double MyTan(double rad)
{
    return MySin(rad) / MyCos(rad);
} 
```

您可以看到表格的分辨率是每度 10 份。我可以稍微增加它，但它没有多大帮助，看起来我需要一些插值。任何人都可以建议对我的功能进行一些实际的改进以获得更好的结果吗？下面是 234 个不同结果的图表`e`。蓝色系列具有理想的 sin/cos，红色系列来自 LUT。

![在此处输入图像描述](../Images/51a30612fb0ac0c49579c44208f3c14a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:19:42.710

看来您的查找表太粗糙了。如果你不能让你的表格更精细，使用导数近似值应该会给你一个更好的结果。我们有

```
sin (x+h) ≈ sin x + h*cos x
cos (x+h) ≈ cos x - h*sin x 
```

对于小`h`。（您可以使用更高的导数或通过使用（计算的）角度所在的表中的两个值来获得更好的近似值，但这需要更长的时间，而且我认为速度是首先使用 LUT 的原因。）

所以在你标准化角度之后，

```
ix = (rad * 180) / M_PI * PARTPERDEGREE; 
```

采用

```
double h = rad - ix*angleinc;
return sign*(mysinlut[ix] + h*mycoslut[ix]); 
```

分别

```
return sign*(mycoslut[ix] - h*mysinlut[ix]); 
```

这不应该太慢，并且应该在 LUT 点之间提供更好的近似值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:59:21.850

[此处](http://steve.hollasch.net/cgindex/math/inccos.html)描述的 sin/cos 插值的旧但良好的递归关系。

# c++ - 带字符的全局变量

> ID：13750522
> 
> 赞同：0
> 
> 时间：2012-12-06T18:54:53.703
> 
> 标签：c++, visual-c++

我有全局变量。我想使用 char 数据类型，以便可以在其中插入用户名。到目前为止，它不起作用。

在 main.cpp

```
#include "Functions.h"

using namespace std;

    char username[50];

int main()
{   
    cout << username;
} 
```

在 Functions.h 中

```
char username[50]; 
```

在 login.cpp

```
#include "Functions.h"

                if(std::strcmp(emp_username, "admin") == 1) {
                    username = "admin";

                }

                else
                {
                    username = emp_username;

                } 
```

我想要做的是获取员工用户名并将其显示在每个功能中。它适用于 int 数据类型。只有我不知道如何将它与 char 一起使用。请帮我解决一下这个。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:58:49.137

在你的头文件中，你需要声明变量“extern”；IE，`extern char username[50];`

这意味着“这是变量的类型和名称，但它是在其他地方定义的”。

如果你在没有“extern”的情况下声明它，那么每个包含头文件的文件都会以一个名为“username”的全局变量结束，如果你幸运的话，那么你的链接器会抱怨重复变量。

除了在头文件中声明它为“extern”外，您还需要在*一个*源文件中声明它（而不是 extern）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:00:21.173

不要使用纯字符数组来存储字符串，使用`std::string`类：

```
std::string username;
std::string emp_username;

// Note that this is rather pointless, since it's equivalent to 
//    username = emp_username;
// but I'll leave it as it is to demonstrate how "string" works.
if (emp_username == "admin") {
    username = "admin";
} else {
    username = emp_username;
} 
```

如果您有一些奇怪的要求迫使您使用普通数组，请使用以下方法进行比较：

```
if (std::strcmp(emp_username, "admin") == 0)  // NOT 1 
```

并且无法使用`=`;分配内容 你需要库函数：

```
username[sizeof username - 1] = 0;
std::strncpy(username, emp_username, sizeof username);
if (username[sizeof username - 1] != 0) {
    // Whoops! The buffer was too small. Handle the error somehow.
} 
```

最后，如果你必须有一个全局变量（这几乎总是一个非常糟糕的主意），那么你需要`extern`在头文件中声明它：

```
extern std::string username; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:01:13.293

该`main`函数是您的程序开始的地方。程序开始时您要做的第一件事是：

```
cout << username; 
```

这将立即输出 的内容，`username`此时您尚未填写用户名。确保在开始输出用户名之前进行用户输入。这（如果我的通灵能力是正确的）将需要调用您在 login.cpp 中定义的函数。所以无论调用那个函数，调用它：例如：

```
int main()
{
  login();
  cout << username << endl;
} 
```

在您的 login.cpp 文件中，您有这个没有任何封闭函数的 if-else 语句。我不确定这是否只是因为您只复制了文件的一部分，但这些语句需要在函数中。如果您想在其他文件中使用它，您可能需要在头文件中声明该函数。

要在不同翻译单元之间共享`username`全局变量，您需要在头文件中声明它，`extern char username[50]`然后在您的一个实现文件中将其定义为`char username[50]`.

但是，我不建议对此使用全局变量，并建议您使用`std::string`而不是`char`数组。您可以简单地`return`将用户名从`login`函数中取出并执行以下操作：

```
int main()
{
  std::string username = login();
  std::cout << username << std::endl;
} 
```

* * *

参考这篇文章的评论：

```
std::string login()
{
  // Here we get the user's username and return it back to main
  std::string username;
  std::cin >> username;
  return username;
}

void menu(std::string username)
{
  std::cout << "Welcome " << username << std::endl;
}

int main()
{
  std::string username = login(); // We receive the username from login()
  menu(username); // We pass the username we received to menu()
} 
```

# c++ - 在子类中重用工厂类型构造函数

> ID：13750524
> 
> 赞同：0
> 
> 时间：2012-12-06T18:54:59.127
> 
> 标签：c++, factory, copy-constructor

抱歉，我对 C++ 很陌生，这种事情可能吗？

我有一个超类，它有一个巨大的构造函数，所以我创建了一个静态工厂类型构造函数，它会做一些工作，然后返回 new ParametricShape(blah blah blah...);

```
class ParametricShape: public ModelView{

public:
    //actually has 15 arguments didn't want to type them all up
    ParametricShape(func x, funcy, funcz, float lu, float hu, float lv, float hv, int sv, int su);

     static ParametricShape* makeDonutShape(float);
 } 
```

后来我想在扩展类中使用这个静态方法。

```
class Donut : public ParametricShape{
    Donut();
}

Donut::Donut(){
  this = ParametricShape::makeDonut(1.0f);
} 
```

这就是我正在尝试做的事情，我一直在摸索各种复制构造函数，什么不是，并且得到了各种不同的错误。目前它只是说：左值需要作为赋值的左操作数。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:08:15.003

您不能分配给“this”。它是一个常量类型。

> [类类型 X 的成员函数的 this 指针的类型是 X* const。](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr035.htm)

在工厂设计模式中，您通常有一个单独的类来负责创建新实例。这种对象创建与类的分离是这个设计模式的重点。[请参阅有关如何在 C++ 中实现这一点的讨论](https://stackoverflow.com/questions/5120768/how-to-implement-the-factory-pattern-in-c-correctly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:08:39.017

这是典型的“工厂”模式：

```
#include <memory>

struct Shape
{
    enum Type { Donut, Sphere, Teapot };

    static std::unqiue_ptr<Shape> make(Type type);

    virtual ~Shape() = default;

    // ...
};

struct Donut : Shape
{
    // ...
};

std::unique_ptr<Shape> Shape::make(Shape::Type type)
{
    switch(type)
    {
        case Donut: return { new Donut; }
        default:    return { };
    }
} 
```

用法：

```
auto p = Shape::make(Shape::Donut); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:10:06.740

是的，有可能... ：）

```
#include <new>
Donut::Donut() {
    this->~Donut();
    new (this) ( *((Donut*) ParametricShape::makeDonut(1.0f)) );
} 
```

确保定义了复制构造函数， `this->~Donut();`确保删除通过默认构造函数分配的所有内容，并且第二行`new (this) ( (Donut*) ParametricShape::makeDonut(1.0f) );`首先创建一个甜甜圈对象，将其重新解释为甜甜圈[注意，这里没有问题，因为甜甜圈没有定义任何变量比它的父] 并调用一个复制构造函数......

new (this) 不会从内存中分配任何新的存储空间，它只是调用构造函数:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:17:47.840

虽然我同意大多数其他答案，但在您的情况下，您不需要经典的工厂模式。如我所见，您希望有一个类来描述具有几何参数函数的形状。您希望提供方便的方法来为某些特殊情况创建这些形状，例如“甜甜圈”。只要您不想使用任何其他继承功能，例如为特殊形状类型重载某些方法，您可以简单地删除其他类`Donut`，只需在客户端代码中使用“制造商”功能。

一个使代码看起来更面向对象的选项（并保留子类并在客户端代码中使用它们的构造函数），您可以将 maker 函数重写为初始化函数，就像我想调用它们一样。请注意，我还引入了我们在专用类中需要的默认构造函数：

```
class ParametricShape {
    func x, y, z;
    ...

public:
    ParametricShape();
    ParametricShape(func x, func y, func z, ...);

protected:
    void initDonutShape(float);
};

class Donut : public ParametricShape {

public:
    Donut(float radius) :
        ParametricShape()         // call default constructor of ParametricShape
    {
        initDonutShape(radius);   // initialize functions for "Donut"
    }
}; 
```

现在，实现这样的`initDonutShape`方法：

```
void ParametricShape::initDonutShape(float radius) {
    // set the parametric functions
    x = ...
    y = ...
    z = ...
} 
```

而不是返回`ParametricShape`.

# objective-c - 从 Storyboard 添加控制器视图会取消在我的视图中分配给 UIImageViews 的 TapGesture

> ID：13750525
> 
> 赞同：0
> 
> 时间：2012-12-06T18:54:59.523
> 
> 标签：objective-c, ios, uiimageview, ios6, uistoryboard

所以在一个视图中，比如说“A”，我有多个 UIImage 视图和 UITextViews。现在，这一切都是以编程方式完成的。在同样的观点中，我这样做：

```
if(!_productionLinesCollectionViewController)
{
    _productionLinesCollectionViewController = [[self storyboard]instantiateViewControllerWithIdentifier:@"ProductionLinesCollection"];
    _productionLinesCollectionViewController.productionLines = [_plant.productionLines allObjects];
    _productionLinesCollectionViewController.initX = 0;
    _productionLinesCollectionViewController.initY = _totalHeight;
    _productionLinesCollectionViewController.width = 668;
}

[self.scrollView addSubview:_productionLinesCollectionViewController.view]; 
```

现在由于某种原因，这是“取消”我之前分配的所有 UITapGestures（在同一视图中）（此外，此代码在其他一些视图中 100% 工作）。每当我删除这段代码时，我的手势就会再次起作用。任何想法为什么？

谢谢！

```
UIImageView *playMovieImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"press_to_play.png"]];
playMovieImage.frame = CGRectMake(30, _totalHeight, 608, 456);
UITapGestureRecognizer *tapRecognizer;
tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(playMovie:)];
[playMovieImage addGestureRecognizer:tapRecognizer];
playMovieImage.userInteractionEnabled = YES;
[self.scrollView addSubview:playMovieImage]; 
```

# android - 了解 SQLite 光标行为

> ID：13750528
> 
> 赞同：1
> 
> 时间：2012-12-06T18:55:17.710
> 
> 标签：android, sqlite

我正在编写一种方法来更新表中的默认设置。该表非常简单：两列，第一列包含指示设置类型的标签，第二列存储设置的值。

在执行的这一点上，表是空的。我只是设置初始值。所以，我希望这个光标会空着回来。但相反，我收到了一个错误（如下所示）。我正在使用的设置称为“lastPlayer”，应该存储在“SETTINGS_TABLE”的“SETTING_COLUMN”中。这是代码：

```
public static void updateSetting(String setting, String newVal) {
    String table = "SETTINGS_TABLE";
    String[] resultColumn = new String[] {VALUE_COLUMN};
    String where = SETTING_COLUMN + "=" + setting;
    System.err.println(where);

    SQLiteDatabase db = godSimDBOpenHelper.getWritableDatabase(); 
    Cursor cursor = db.query(table, resultColumn, where, null, null, null, null);
    System.err.println("cursor returned"); //I never see this ouput

        \\more
} 
```

> sqlite 返回：错误代码 = 1，msg = 没有这样的列：lastPlayer

为什么说lastPlayer没有这个*栏目？*我以为我是在告诉查询查看“SETTING_COLUMN”列并返回该列具有值“lastPlayer”的记录。我很困惑。有人可以纠正我吗？我一直在寻找这个一个小时，我只是不明白我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:04:48.460

您没有正确构建/转义您的查询。由于该值`lastPlayer`不在引号中，因此您的语句正在检查两列是否相等，这就是该错误消息的含义。

要正确构建查询，最好不要使用字符串连接手动执行此操作。相反， SQLiteDatabase.query() 的参数`selectionArgs`旨在[执行](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)此操作。

查询中的参数应定义为`?`，然后根据`selectionArgs`. 从文档：

> 您可以在选择中包含 ?s，它将被 selectionArgs 中的值替换，以便它们出现在选择中。这些值将绑定为字符串。

因此，您的代码将如下所示：

```
String where = SETTING_COLUMN + " = ?";
Cursor cursor = db.query(table, resultColumn, where, new String[] { setting }, null, null, null); 
```

# svn - 在 Jenkins 安装中更改“Subversion 工作区版本”选项是否安全？

> ID：13750531
> 
> 赞同：4
> 
> 时间：2012-12-06T18:55:39.740
> 
> 标签：svn, jenkins

我们有一个大型 Jenkins 安装，目前正在构建 70 多个工作岗位。目前我们遇到了一些问题，所以我们想将当前的 Subversion Workspace 版本 (1.4) 升级到 1.6，我们注意到在 Manage Jenkins 部分有一个选项可以做到这一点。我的问题是，这样做是否安全，因为 jenkins 会自动升级工作区，或者如果所有作业都将开始失败，并且应该在更改该属性后手动更新工作区版本。谢谢！

# android - 可拖动对话框

> ID：13750534
> 
> 赞同：0
> 
> 时间：2012-12-06T18:55:41.763
> 
> 标签：android

我需要制作一个可拖动的对话框，但我没有办法做到这一点，所以我玩弄了 PopupWindow，让它成为可拖动的。

是否有人知道实现可拖动对话框的标准 android 方法，或者比我更好的方法（在 PopupWindow 中实现对话框行为），或者我应该继续使用 popupwindow 吗？

最好的祝福！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T19:18:32.357

不，`PopupWindow`这几乎是框架中实现此行为的最简单方法。

# ios - 使用 Transport WebHttpSecurityMode 对 Windows 进行 iOS http 身份验证

> ID：13750535
> 
> 赞同：1
> 
> 时间：2012-12-06T18:55:47.790
> 
> 标签：ios, authentication

我正在尝试让 iPad 应用程序对使用 WebHttpSecurityMode.Transport 模式的基于 Windows 的应用程序进行身份验证。我假设我需要正确填写 http 标头中的特定字段才能做到这一点。

我正在使用 NSURLConnections，然后使用 sendSynchronousRequest 发送请求。我正在通过连接发送休息请求并收到未经授权的（401）。使用 Windows 客户端，我可以使用相同的凭据并获得访问权限。

我在 http 标头 Accept、Accept-Charset、Accept-Encoding、Content-Type、Connection、Date、Basic、Authization 中设置了以下字段。

任何建议将不胜感激。

# c# - 如何将 Width 属性设置为 TableColumn 样式？

> ID：13750538
> 
> 赞同：0
> 
> 时间：2012-12-06T18:55:49.863
> 
> 标签：c#, styles, setter, tablecolumn

我想改变这个：

```
 <Style x:Key="ReportLabelColumn" TargetType="TableColumn">
      <Setter Property="Width" Value="120px" />
 </Style> 
```

对此：

```
 private Style ReportLabelColumn = new Style(typeof(TableColumn));
 ReportLabelColumn.Setters.Add(new Setter(TableColumn.WidthProperty, 120)); 
```

但是当我尝试运行时，我收到一条错误消息：

```
 {"'120' is not a valid value for the 'System.Windows.Documents.TableColumn.Width' property on a Setter."} 
```

我要更改什么`120`，以便它将接受该值作为`120px`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:00:59.860

[`TableColumn.Width`](http://msdn.microsoft.com/en-us/library/system.windows.documents.tablecolumn.width.aspx)是一个[`GridLength`](http://msdn.microsoft.com/en-us/library/system.windows.gridlength.aspx)类型属性。您需要构造一个`GridLength`对象来设置属性。

```
ReportLabelColumn.Setters.Add(new Setter(TableColumn.WidthProperty, new GridLength(120))); 
```

# sql - 没有环境变量的配置文件

> ID：13750539
> 
> 赞同：0
> 
> 时间：2012-12-06T18:55:52.173
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我没有创建环境变量的权限，我想使用变量传递我的配置文件路径和名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:54:29.433

您可以使用其他配置方法之一（SQL Server 或 XML）吗？由于您具有文件访问权限，因此使用 XML 似乎是合适的。

请参阅“配置类型”部分：

[http://msdn.microsoft.com/en-us/library/cc895212.aspx](http://msdn.microsoft.com/en-us/library/cc895212.aspx)

# javascript - 在谷歌地图 api v3 的信息窗口中修改内容

> ID：13750540
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:56:05.013
> 
> 标签：javascript, google-maps-api-3

我在地图上显示了 4 个标记，所有标记的信息窗口都包含一组唯一字符串和字符串旁边的图像。

我的问题是我每分钟都在尝试更改图像，并且仅当我打开信息窗口时它们才会更改，然后只有该信息窗口会更改关闭的不会更新。

这是我用来更新它的方法：

```
setInterval(update, 1000 * 60);

function update(){
  for(var i = 0; i < data.length; i++){
    for(var j = 0; j < data[i].test.length; j++){
        var test = data[i].test[j];
        test = test.replace(/ /g, '');
        test = test.replace(/[-]/g,'');
        test = test.replace(/[()]/g, '');
        $('.'+test).html("<img src='Images/red.gif' />");
        //class of the span image is being placed into
    }
  }
} 
```

我只是在寻找一些关于我是否可以在关闭的信息窗口中修改数据的建议。

我只想提一下，我不是在寻找代码，而只是在寻找一些建议。

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:15:30.037

如果您有权访问，您可以更改“关闭的”信息窗口中的内容。一种选择是将 HTML（或创建 HTML 所需的信息）存储在标记的成员变量中。单击时打开信息窗口时，使用该信息填充信息窗口。您可以随时更改该信息；对于当前打开的信息窗口中的信息，您必须通过修改 DOM 来实现。

请参阅[此类似问题的答案](https://stackoverflow.com/questions/13504529/changing-the-google-maps-marker-html-after-a-function-is-ran)。

# jquery - jquery .submit();

> ID：13750541
> 
> 赞同：0
> 
> 时间：2012-12-06T18:56:09.553
> 
> 标签：jquery, geolocation, submit

由于 Instamapper 正在关闭，而我正在做这个项目，我试图去月球计算我走了多少公里，我试图制作我的网络应用程序，我可以使用它来代替。除了我想每 5 秒自动提交一次带有数据的表单外，我一切正常。我尝试使用 .submit() 但它不起作用。

**编辑：** submit() 函数不起作用，这是来自控制台的错误：

> 未捕获的类型错误：对象# 的属性“提交”不是函数

这是代码：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"     type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    setTimeout(function(){
        $('form#target').submit();
    }, 5000);
    });
    </script>
<?php
if(isset($_POST['submit'])) {
    echo 'works';
}
$device = 'vPhone';
$date = new DateTime();
$timest = $date->getTimestamp();
?>
</head>

<body>
<form action="" method="post" id="target">
<input type="text" value="<?=$timest?>" name="timestamp" />
<input type="text" value="<?=$device?>" name="device" />
<input type="submit" name="submit" id="submit" />
</form>
<script>
var x=document.getElementById("target");
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    } else {x.innerHTML="Geolocation is not supported by this browser.";}
  function showPosition(position)
    {
      x.innerHTML += "<input type='text' name='lat' value='" + position.coords.latitude + 
  "' disable><br> <input type='text' name='lat' value='" + position.coords.longitude + "'     disable> "; }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:12:12.573

正是`name="submit" id="submit"`这导致了这里的问题。把它改成别的东西——我用过的任何东西`name="notsubmit" id="notsubmit"`——你的表格就会自动提交。

来源：[http ://api.jquery.com/submit/#comment-106178333](http://api.jquery.com/submit/#comment-106178333)

显然，这些属性以某种方式覆盖了 jQuery 提交函数，使其不再可访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:05:56.097

尝试向您的表单添加操作

# c# - 使用 Watin 进行测试：无法将类型为“mshtml.HTMLDocumentClass”的 COM 对象转换为接口类型“mshtml.DispHTMLDocument”

> ID：13750542
> 
> 赞同：2
> 
> 时间：2012-12-06T18:56:10.333
> 
> 标签：c#, nunit, watin

我正在尝试在包含在父框架中的 IFrame 中的表单上填写表单元素。它被设置为一个对话框（点击一个按钮，IFRAMe 弹出）。在我尝试获取 IFrame 之前，我的代码都很好（没有错误和预期的结果）

```
DialogIFrame = MainFrame.Frame(Find.ById("dialogFrame")); 
```

当我点击它时，它会引发以下错误

> System.InvalidCastException：无法将类型为“mshtml.HTMLDocumentClass”的 COM 对象转换为接口类型“mshtml.DispHTMLDocument”。此操作失败，因为 IID 为“{3050F55F-98B5-11CF-BB82-00AA00BDCE0B}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)） .

我不确定这是否重要，但这是由 Nunit 驱动的测试程序集。

我很难找到与 Watin 相关的这个错误的任何信息。我发现没有任何东西似乎适用（或者我看不到它是如何适用的）。

你们中是否有人遇到过这种情况，如果是这样，您是如何（如果遇到的话）克服的？

谢谢！！它快把我逼疯了！

# c#-4.0 - SignedXml.CheckSignature(key) 总是抛出错误

> ID：13750547
> 
> 赞同：2
> 
> 时间：2012-12-06T18:56:36.943
> 
> 标签：c#-4.0, signedxml

我是 C#.NET 编程的新手。在在线参考的帮助下，我编写了以下代码来验证 SAML 断言的签名（由服务器 API 生成）。

我的环境：
VS 2010 Ver4.0 Win XP SP3

**SAML 断言令牌看起来像这样：***

```
<saml:Assertion xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" Version="2.0" ID="idGYEv...USb8GfnqF" IssueInstant="2012-12-05T14:13:39.00Z">
<saml:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://noszti...xyz.com</saml:Issuer>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<Reference URI="">
<Transforms>
<Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<DigestValue>uDeAjOE/iCa6Pfz5oOjaOMtAQe4=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>IGjZX...LaEMzA=</SignatureValue>
<KeyInfo>
<X509Data>

<X509Certificate>MIIE...cg6A==</X509Certificate>
<X509SubjectName>emailAddress=xmlsec@aleksey.com,CN=Aleksey Sanin,OU=Test Root Certificate,O=XML Security Library (http://www.aleksey.com/xmlsec),ST=California,C=US</X509SubjectName>
</X509Data>
</KeyInfo>
</Signature>
<saml:Subject>
<saml:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified">admin</saml:NameID>
<saml:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
<saml:SubjectConfirmationData NotOnOrAfter="2012-12-05T14:19:39.00Z" Recipient=""/>
</saml:SubjectConfirmation>
</saml:Subject>
<saml:Conditions NotBefore="2012-12-05T14:13:39.00Z" NotOnOrAfter="2012-12-05T14:19:39.00Z">
<saml:AudienceRestriction>
<saml:Audience/>
</saml:AudienceRestriction>
</saml:Conditions>
<saml:AuthnStatement AuthnInstant="2012-12-05T14:13:39.00Z">
<saml:AuthnContext>
<saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</saml:AuthnContextClassRef>
</saml:AuthnContext>
</saml:AuthnStatement>
</saml:Assertion> 
```

* * *

***我验证签名的代码片段：***

```
//Load the SAMLAssertionToken in XML Document
XmlDocument xDoc = new XmlDocument();
xDoc.PreserveWhitespace = false;
xDoc.LoadXml(SAMLAssertionToken); //SAMLAssertionToken above
//Retrieve the public key from certificate available to end user
X509Certificate2 X509Cert = new X509Certificate2("D:/Schemas/X509Certificate.cer");
RSACryptoServiceProvider rsaKey = (RSACryptoServiceProvider)X509Cert.PublicKey.Key;
//Signature Verification Starts. Find the Signature element
XmlNamespaceManager xMan = new XmlNamespaceManager(xDoc.NameTable);
xMan.AddNamespace("ns", "urn:oasis:names:tc:SAML:2.0:assertion");
xMan.AddNamespace("ns1", "http://www.w3.org/2000/09/xmldsig#");
XmlElement SigElm = (XmlElement)xDoc.SelectSingleNode("//ns:Assertion//ns1:Signature", xMan);
//Create SignedXml object and load signature for verification
SignedXml sig = new SignedXml(xDoc);                
sig.LoadXml(SigElm);
bool verified = sig.CheckSignature(rsaKey);
if (verified)
    {                    
        Console.WriteLine("Signature verified successfully");
    }
else
    {
        Console.WriteLine("Signature not valid");
    } 
```

* * *

在运行代码时，它会引发错误“无法为提供的签名算法创建签名描述”。在线：bool 验证 = sig.CheckSignature(rsaKey);

在调试时，签名被正确分配给 SigElm。注意：从“X509Certificate.cer”检索到的证书与签名元素中显示的证书完全相同（在 SAML 断言中）。所以它看起来像一个有效且匹配的证书。SAML 断言令牌中的证书使用私钥签名；所以我使用“X509Certificate.cer”（最终用户可用的证书）中的公钥来验证签名（在 SAML 断言中）。

我还尝试使用以下方法验证签名： bool verify = sig.CheckSignature(X509Cert, true); 但它会引发同样的错误。

我尝试了几种方法（针对此错误使用在线参考），但无法找出问题所在。

请给个建议...

# sql-server - SQL Server - 已声明变量但仍显示“必须声明标量变量”

> ID：13750548
> 
> 赞同：13
> 
> 时间：2012-12-06T18:56:40.233
> 
> 标签：sql-server

我正在尝试在 Microsoft SQL Server 上运行这组 SQL 命令，但出现此错误：

> *Msg 137, Level 15, State 1, Line 1
> 必须声明标量变量“@dbstatus”。*

我以为我确实声明了变量，所以我不确定为什么它仍然抛出错误？

```
DECLARE @dbname nvarchar(100) 
DECLARE @dbstatus varchar(500) 
DECLARE @sqlCommand NVARCHAR(1000) 
create table #temptable (dbname nvarchar(100), status varchar(500))

DECLARE c1 CURSOR READ_ONLY 
FOR 
   SELECT '[' + name + ']'   FROM sys.databases WHERE name = 'EDDS1084543'

OPEN c1  
FETCH NEXT FROM c1 INTO @dbname 

WHILE @@FETCH_STATUS = 0 
BEGIN            
      SET @sqlCommand = 'SET @dbstatus = (SELECT Status FROM ' + @dbname + '.[EDDSDBO].[dtSearchIndex])'   

      EXECUTE sp_executesql @sqlCommand

      INSERT INTO #tempTable(dbname, [status])VALUES (@dbname, @dbstatus)

      FETCH NEXT FROM c1 INTO @dbname   
END   

CLOSE c1 
DEALLOCATE c1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T19:06:21.997

EXEC/sp_executesql 创建到 SQL Server 的新连接 (SPID)，这不是您当前的会话，因此它看不到变量。检查[文档](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。

基本上，您必须声明要传递给调用的参数，并给它一个值。在这种情况下，两者都必须包含 OUTPUT 说明符。

```
 EXECUTE sp_executesql @sqlCommand, '@dbstatus varchar(500) output', @dbstatus output 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T19:06:33.627

问题在这里：

```
 SET @sqlCommand = 'SET @dbstatus = (SELECT Status FROM ' + @dbname + '.[EDDSDBO].[dtSearchIndex])'   
  EXECUTE sp_executesql @sqlCommand 
```

这会导致服务器将 的值`@sqlCommand`作为独立语句执行。在此语句中，`@dbstatus`未将其声明为变量，因此出现错误。这是要执行的：

```
SET @dbstatus = (SELECT Status FROM [value in @dbname].[EDDSDBO].[dtSearchIndex]) 
```

试试这个：

```
WHILE @@FETCH_STATUS = 0 
BEGIN            
      SET @sqlCommand = 'SET @dbstatus = (SELECT Status FROM ' + @dbname + '.[EDDSDBO].[dtSearchIndex])'   
      EXECUTE sp_executesql @sqlCommand, '@dbstatus varchar(500) output', @dbstatus output
      INSERT INTO #tempTable(dbname, [status])VALUES (@dbname, @dbstatus)
      FETCH NEXT FROM c1
      INTO @dbname   
END 
```

# android - 媒体播放器和对话框

> ID：13750553
> 
> 赞同：1
> 
> 时间：2012-12-06T18:56:55.840
> 
> 标签：android, android-mediaplayer

我有一个“信息”对话框，我想添加背景音乐。我在 res/raw 中添加了我的音乐，只需打开对话框即可通过 sharedpreferences 进行检查（用于检查音频是否已经开始的布尔值）和 2 个方法：musicStart() 和 musicStop()

所以，在 onCreate 之前我添加了：

```
MediaPlayer mp = MediaPlayer.create(this, R.raw.sob); 
```

但应用程序崩溃：

12-06 18:54:14.425：E/AndroidRuntime(414)：原因：java.lang.NullPointerException

我不明白为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:16:27.120

您需要将该行放在 onCreate() 中，而不是在它之前。所以应该是这样的：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MediaPlayer mp = MediaPlayer.create(this, R.raw.sob);
    //...everything else you need to do
} 
```

# asp.net-mvc - 使用 html.actionlink 将模型从视图传递到控制器

> ID：13750556
> 
> 赞同：7
> 
> 时间：2012-12-06T18:57:17.730
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我正在尝试将模型数据从强类型视图获取到控制器。使用提交按钮没问题，我可以获取数据。现在我想用 html.actionlink 达到同样的效果。这就是我所拥有的： **查看：**

```
@model WordAutomation.Models.Document    
    @{
        ViewBag.Title = "Document";
    }
      <script type="text/javascript">
          $(function () {
              $("#dialog").dialog();
          });
        </script>

    <h2>Document</h2>

    @using (Html.BeginForm()) {
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>Document</legend>

            <div class="editor-label">
                @Html.LabelFor(model => model.ClientTitle)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.ClientTitle)
                @Html.ValidationMessageFor(model => model.ClientTitle)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.ClientFullName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.ClientFullName)
                @Html.ValidationMessageFor(model => model.ClientFullName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.ClientCustomSSN)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.ClientCustomSSN)
                @Html.ValidationMessageFor(model => model.ClientCustomSSN)
            </div>

            <p>
                <input type="submit" value="Create" />            
            </p>
        </fieldset>
    }

    <div>
        @Html.ActionLink("Preview", "PreviewWordDocument", "Home", null, new { id = "previewLink" })    

    </div>

    <div id="dialogcontainer">
        <div id="dialogcontent"><input type="submit" value="Create" />        </div>
    </div>

    @section Scripts {

        <script type="text/javascript">

                $(document).ready(function() {

                    $("#dialogcontainer").dialog({
                        width: 400,
                        autoOpen:false,
                        resizable: false,
                        title: 'Test dialog',
                        open: function (event, ui) {
                            $("#dialogcontent").load("@Url.Action("PreviewWordDocument", "Home")");
                        },
                        buttons: {
                            "Close": function () {
                                $(this).dialog("close");
                            }
                        }
                    });

                    $("#previewLink").click(function(e) {
                        e.preventDefault();
                        $("#dialogcontainer").dialog('open');
                    });

                });

            </script>
    } 
```

**控制器：**

```
public ActionResult Document()
        {      
            return View();
        }

        [HttpPost]
        public ActionResult Document(WordAutomation.Models.Document model)
        {
            Models.Utility.EditWord word = new Models.Utility.EditWord();
            word.EditWordDoc(model);
            return View("Display", model);
        }

        public ActionResult PreviewWordDocument()
        {           
            var image = Url.Content("~/Content/preview.jpeg");

            return PartialView((object)image);
        } 
```

文档操作结果可以获取模型，但我想知道如何从将触发 PreviewWordDocument 操作的操作链接中获取值。

提前致谢， Laziale

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:32:09.130

在 HTML 页面中，当您单击提交按钮时，提交按钮所在的表单内的所有输入元素都将发布到服务器，但是当您单击锚点（`<a>`标记）时。您只使用 Get 方法发送请求，而不发布任何值。但是如果您想使用这种方法将特定值发送到服务器，您可以通过查询字符串来完成。您使用以下方法发出请求：

```
 @Html.ActionLink("Preview", "PreviewWordDocument", "Home", null, 
     new { id = "previewLink" }) 
```

这将产生：

```
<a id="previewLink" href="/Home/PreviewWordDocument"> Preview </a> 
```

`ActionLink`这是不正确的。使用这样的第四个参数将任何值传递给服务器：

```
 @Html.ActionLink("Preview", "PreviewWordDocument", "Home",
     new { id = "previewLink" }, null) 
```

这段代码的结果是：

```
 <a href="/Home/PreviewWordDocument?id=previewLink"> Preview </a> 
```

干杯！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T20:43:15.877

只能使用提交按钮将表单发布到其 action 属性给出的 URL。

但是，您可以使用 jQuery post 方法将表单数据发送到不同的 URL，在发送之前手动验证表单。这样，您可以将表单数据发送到 PreviewWordDocument 控制器方法并处理响应，以便在所需的 div 中显示预览。（如果你给表单一个 id 会很有帮助，所以你可以很容易地使用 jQuery 找到它）

因此，预览链接的单击事件处理程序将如下所示：

```
$("#previewLink").click(function(e) {
    e.preventDefault();
    if($("#YourFormId").valid()){
        $("#dialogcontainer").dialog('open');
    }
}); 
```

在对话框的打开函数中，您将使用 jQuery ajax 函数将表单（已经验证）发布到预览控制器方法。响应将被加载到 dialogContent div 中：

```
 $.ajax({
        type: "POST",
        url: $("#previewLink").attr("href"), //the preview controller method
        data: $("#YourFormId").serialize(), 
        success: function (data) {
            //load ajax response into the dialogContent div
            $("#dialogcontent").html(data);
        },
        error: function(xhr, error) {
            $("#YourFormId").prepend('<div id="ajaxErrors"></div>')
                            .html(xhr.responseText);
        }
    }); 
```

现在您将能够在 PreviewWordDocument 操作中接收整个文档：

```
public ActionResult PreviewWordDocument(WordAutomation.Models.Document model)
{           
    var image = Url.Content("~/Content/preview.jpeg");

    return PartialView((object)image);
} 
```

# jquery - 水平导航弹出悬停问题

> ID：13750557
> 
> 赞同：0
> 
> 时间：2012-12-06T18:57:17.930
> 
> 标签：jquery, navigation

我有一个基本的导航菜单，可以在以下位置查看：http: [//jsfiddle.net/UXuvL/](http://jsfiddle.net/UXuvL/)

的HTML：

```
<nav>
    <ul>
        <li>ABOUT
            <ul class="sub-menu">
                <li>PEOPLE</li>
                <li>APPROACH</li>
            </ul>
        </li>
        <li>PROJECTS</li>
        <li>CONTACT</li>
    </ul>
</nav>​ 
```

CSS：

```
nav li { display: inline-block }
.sub-menu { display: inline-block; white-space: nowrap }​ 
```

jQuery：

```
(function($) {
    $('.sub-menu').hide();

    $('nav li').on('hover', function(){        
        $('nav .sub-menu').animate({width: 'toggle'});
    });
})(jQuery);​ 
```

从功能上讲，这就是我希望它的工作方式。您将鼠标悬停在“关于”上，“人物”/“方法”滑出右侧。

我现在最大的问题是，如果我将鼠标悬停在弹出的新链接之一上，菜单就会隐藏。我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:10:07.583

给你，伙计！您想使用 mouseenter 和 mouseleave。

更新了你的[**小提琴**](http://jsfiddle.net/videsignz/wxKUe/)

html

```
<nav>
<ul>
    <li class='menu-header' >About
        <ul class="sub-menu">
            <li>People</li>
            <li>Approach</li>
        </ul>
    </li>

    <li class='menu-header' >Contact
        <ul class="sub-menu">
            <li>Email</li>
            <li>Phone</li>
        </ul>
    </li>

</ul>
</nav> 
```

jQuery

```
(function($) {

    $('.sub-menu').hide();

    $('.menu-header').on({

        mouseenter: function() {
            $(this).find('ul.sub-menu').stop().animate({width: 'toggle'});
        },

        mouseleave: function(){
            $(this).find('ul.sub-menu').stop().animate({width: 'toggle'});
        }

     });

})(jQuery); 
```

# mysql - 左连接Mysql查询

> ID：13750558
> 
> 赞同：0
> 
> 时间：2012-12-06T18:57:25.170
> 
> 标签：mysql

我们有两个表，其中表 A 和表 B 需要连接。表 A 和 B 之间的关系是一对多的。我们现在可以在 tableA.aID=tableB.aID 上使用这个 LEFT JOIN tableB 加入。我们希望确保只有一条记录连接到表 B 上，并且仅是最新记录。我们现在获得了不止一个记录。

```
SELECT student.*

FROM   student
       LEFT JOIN (SELECT B1.*
                  FROM medicalRecord AS B1
                         LEFT JOIN medicalRecord AS B2
                                ON B1.studentID = B2.studentID
                                   AND B1.checkUpDate< B2.checkUpDate
                  WHERE  B2.studentID IS NULL) AS b
              ON ( student.studentID = medicalRecord.studentID)

Where student.studentID=45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:07:17.347

让我们假设您只想从子表中获取`val`列中具有最高值的记录。你可以使用：

```
SELECT a.*,
       b.*
FROM   a
       LEFT JOIN (SELECT B1.*
                  FROM   b AS B1
                         LEFT JOIN b AS B2
                                ON B1.aID = B2.aID
                                   AND B1.val < B2.val
                  WHERE  B2.aID IS NULL) AS b
              ON ( a.aID = b.aID ) 
```

这个想法是使用子查询来过滤表中列中具有最大值的记录`val`，然后加入*该*列。

# python - 从 Python 属性文件中读取 Celery 配置

> ID：13750569
> 
> 赞同：7
> 
> 时间：2012-12-06T18:58:02.153
> 
> 标签：python, celery

我有一个需要初始化 Celery 和其他东西（例如数据库）的应用程序。我想要一个包含应用程序配置的 .ini 文件。这应该在运行时传递给应用程序。

开发.init：

```
[celery]
broker=amqp://localhost/
backend=amqp://localhost/
task.result.expires=3600

[database]
# database config
# ... 
```

芹菜配置.py：

```
from celery import Celery
import ConfigParser

config = ConfigParser.RawConfigParser()
config.read(...) # Pass this from the command line somehow

celery = Celery('myproject.celery',
                broker=config.get('celery', 'broker'),
                backend=config.get('celery', 'backend'),
                include=['myproject.tasks'])

# Optional configuration, see the application user guide.
celery.conf.update(
    CELERY_TASK_RESULT_EXPIRES=config.getint('celery', 'task.result.expires')
)

# Initialize database, etc.

if __name__ == '__main__':
    celery.start() 
```

要启动 Celery，我调用：

```
celery worker --app=myproject.celeryconfig -l info 
```

无论如何都可以传入配置文件而不做一些丑陋的事情，比如设置环境变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:37:33.670

好吧，我接受了 Jordan 的建议并使用了 env 变量。这就是我在 celeryconfig.py 中得到的：

```
celery import Celery
import os
import sys
import ConfigParser

CELERY_CONFIG = 'CELERY_CONFIG'

if not CELERY_CONFIG in os.environ:
    sys.stderr.write('Missing env variable "%s"\n\n' % CELERY_CONFIG)
    sys.exit(2)

configfile = os.environ['CELERY_CONFIG']

if not os.path.isfile(configfile):
    sys.stderr.write('Can\'t read file: "%s"\n\n' % configfile)
    sys.exit(2)

config = ConfigParser.RawConfigParser()
config.read(configfile)

celery = Celery('myproject.celery',
                broker=config.get('celery', 'broker'),
                backend=config.get('celery', 'backend'),
                include=['myproject.tasks'])

# Optional configuration, see the application user guide.
celery.conf.update(
    CELERY_TASK_RESULT_EXPIRES=config.getint('celery', 'task.result.expires'),
)

if __name__ == '__main__':
    celery.start() 
```

开始芹菜：

```
$ export CELERY_CONFIG=development.ini
$ celery worker --app=myproject.celeryconfig -l info 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:01:16.257

设置环境变量如何丑陋？您可以使用应用程序的当前版本设置环境变量，也可以根据主机名派生它，或者您可以让构建/部署过程覆盖文件，并在开发时让 development.ini 复制到 settings.ini在一般位置，在生产中，您让 production.ini 复制到 settings.ini。

这些选项中的任何一个都很常见。使用 Chef 或 Puppet 等配置管理工具来放置文件是一个不错的选择。

# apache - 被 Apache RewriteEngine 困惑

> ID：13750570
> 
> 赞同：0
> 
> 时间：2012-12-06T18:58:11.097
> 
> 标签：apache, drupal, drupal-7, rewrite

我的网络根目录是`example.com`. 我在 webroot 下有两个子目录，分别命名`sub1`为`sub2`. 在里面`sub1`我放了以下内容`.htaccess`：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} test\.me$ [NC]
#RewriteRule ^(.*)$ http://example.com/sub2/foo.html [L]
RewriteRule ^(.*)$ /sub2/foo.html [L] 
```

当有人试图访问`http://example.com/sub1/test.me`时，我希望他们得到服务`http://example.com/sub2/foo.html`。

以上`.htaccess`不起作用。如果我用完整路径取消注释 RewriteRule，并用相对于 webroot 的路径注释掉 RewriteRule，它几乎可以按预期工作（显示了正确的页面，但显示的 URL 也从更改 `http://example.com/sub1/test.me`为`http://example.com/sub2/foo.html`，这不是通缉）。

我无法理解为什么完整路径几乎可以工作，而相对于 siteroot 的路径却不行。

如果有人能解释为什么我的方法不起作用，以及进行这种重定向的“最佳实践”是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T05:53:56.977

我已经解决了。

不幸的是，我在撰写问题时过度简化了设置。事实上，在“原始”环境中，原版的`.htaccess`工作方式完全符合我的预期。

但是，我使用的设置`.htaccess`是 Drupal 7 的，这会有所不同，因为 Drupal 7 使用“干净的 URL”。

我发现重写为“干净”的 url 不起作用。因此，以下规则在`.htaccess`重定向到 Drupal 节点 #1 时不起作用：

```
RewriteRule ^(.*)$ /sub2/node/1 
```

但是，以下内容会：

```
RewriteRule ^(.*)$ /sub2/?q=node/1 
```

很抱歉没有将所有与破解它相关的内容都放在问题中。
我希望这个答案可以帮助那些在同一件事上挣扎的人。

# php - 使用 RegEx 从列表中排除名称

> ID：13750571
> 
> 赞同：2
> 
> 时间：2012-12-06T18:58:12.077
> 
> 标签：php, regex

如何使用正则表达式从列表中排除名称？

数据：

```
$subject=
"Damon Carson Stovall,
Bret Roman Mikulak,
Jack Filiberto Quirke,
Elroy Forrest Jarnagin,
Ulysses Wiley Cregger,
Brent Greg Jonah,
Bret Armand Daylong,
Ned Numbers Vandell,
Bret Alden Cutlip,
Bret Chung Markie,"; 
```

正则表达式：

```
// Select anyone with the first name of Bret
$pattern = "/Bret /"; 
```

我目前的解决方案：

```
// Loop through & Skip any line that matches Bret.
$subject_array = explode(",",$subject);

foreach($subject_array as $line)
  if(!preg_match($pattern, $line))
    echo "$line<br>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:00:56.833

是的，您可以选择没有`Bret`名称的行

```
/^(?!Bret\b).*$/im 
```

* * *

`i`是忽略大小写选项

`m`是一个多行选项

`^`描述字符串的开头

`\b`描绘了一个非词`boundary`

`(?!Bret\b)`是一个`negative lookahead`

所以只有当前瞻为真时`^(?!Bret\b).*$`才会选择`.*`一个字符串......即如果字符串不以`Bret`!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:52:55.797

由于您的模式非常简单，因此根据[preg_match() 手册页](http://php.net/manual/en/function.preg-match.php)上的“注释”框，您应该使用它们`strpos()`或者`stripos()`因为它们更快：

```
<?

$subject = '
    Damon Carson Stovall,
    Bret Roman Mikulak,
    Jack Filiberto Quirke,
    Elroy Forrest Jarnagin,
    Ulysses Wiley Cregger,
    Brent Greg Jonah,
    Bret Armand Daylong,
    Ned Numbers Vandell,
    Bret Alden Cutlip,
    Bret Chung Markie,';

$pattern = 'Bret ';

$subject_array = explode(',', $subject);

foreach($subject_array as $line)
    if (strpos(trim($line), $pattern) !== 0)
        echo $line . '<br />'; 
```

# javascript - Javascript - 对象文字 - 迭代

> ID：13750573
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:58:19.150
> 
> 标签：javascript

我正在尝试创建一个包含字母：数字对的对象。我计划创建函数来检索给定数字的字母和给定字母的数字。在我能走到那一步之前，我在这个对象上失败了。

```
var letterList =  {
  A : 1,
  B : 2,
  C : 3,
  D : 4,
  E : 5,
  F : 6,
  G : 7,
  H : 8,
  I : 9,
  J : 10,
  K : 11,
  L : 12,
  M : 13,
  N : 14,
  O : 15,
  P : 16,
  Q : 17,
  R : 18,
  S : 19,
  T : 20,
  U : 21,
  V : 22,
  W : 23,
  X : 24,
  Y : 25,
  Z : 26
 };

for (x in letterList) {
  if (letterList.hasOwnProperty(x)) {
  document.write("letters = " + x + " numbers = " + letterList[x]);
  } 
```

输出什么都没有。
我的对象创建不正确吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:05:22.740

代码应该可以工作，只是它后面需要另一个右大括号 ( `}`)。检查您的错误控制台。顺便说一句，你真的应该能够省略`hasOwnProperty`检查，因为你的普通对象不会从`Object.prototype`.

除此之外，您可以编写更短的代码：

```
for (var charCode = 65; charCode < 91; charCode++)
    document.write("letters = " + String.fromCharCode(charCode) +
                   " numbers = " + (charCode-64) ); 
```

另请注意，枚举中的 for-in 不保证键的任何顺序。

# objective-c - iOS：如何干净地删除 UIButton 插座？

> ID：13750574
> 
> 赞同：1
> 
> 时间：2012-12-06T18:58:22.933
> 
> 标签：objective-c, ios, uibutton, iboutlet

> **可能重复：**
> [添加到应用程序时 UIAlertView 崩溃](https://stackoverflow.com/questions/13665396/uialertview-crashes-when-added-to-app)

我最近尝试删除一个名为 的 UIButton 插座`myButton`，但我想我一定错过了一些东西，因为我现在收到以下错误：

> 此类与键 myButton 的键值编码不兼容

如果我对整个项目进行 grep，则**没有对 myButton 的剩余引用**，因此我不确定如何解决该问题。

如何摆脱这个异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:18:30.930

您收到此错误消息，因为您从控制器中删除了 IBOutlet，但 Interface Builder 中的链接仍然存在。

要解决此问题，请转到 Interface Builder 下的指定 xib，右键单击“文件的所有者”并删除带有警告图标的链接。

![文件所有者右键单击](../Images/f0f10e6870918ac698820075d9474449.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:59:59.847

您可能仍然将它连接到 .xib 中的任何内容

确保从标题中删除您的变量/属性，并在界面构建器中确保在您的连接选项卡下，您没有与不再存在的项目的连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:00:01.087

将 xib 文件编辑为 xml 文件（测试编辑器）并从那里删除它，或删除 xib 文件并重新创建组件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T19:01:42.183

尝试右键单击情节提要上的按钮，然后单击旧插座一角的 x。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T19:00:11.710

如果您使用的是 XIB 或 Storyboard，我建议您查看其中的视图，并尝试找到试图将插座附加到`myButton`. 从 Interface Builder 中删除连接，您应该一切顺利。

# c# - 我的哈希表值是否应该包含密钥

> ID：13750578
> 
> 赞同：0
> 
> 时间：2012-12-06T18:58:44.907
> 
> 标签：c#, hashtable

我正在为此争论不休。我想要一个哈希表（或字典......两者似乎都为此目的一样好）

我有一个具有 ItemNumber、Description 和 Quantity 的类 Item。我有一个要使用哈希表或字典的类 ItemCollection（当前使用 Item 数组）。在我的 Item 类中，我使用 ItemNumber 来比较 item a == item b。

所以我应该将 ItemNumber 移动到 ItemCollection 作为我的哈希表的键，还是应该离开它。我的一部分想要离开它，因为我生成了一个基于 Item 的表。但我的另一部分认为这是多余和愚蠢的。

我的最终目标是通过执行类似的操作来查看作为运送物品的 ItemCollection 是否等于另一个 ItemCollection（订单）。

```
foreach(var package in shipments)
    foreach(var item in package)
       shipOrder += item;

return mainOrder==shipOrder; 
```

我希望这是有道理的。由于生病，我的头仍然有点模糊，所以我需要进一步澄清一些，请告诉我。

***编辑***

好的，所以我考虑了每个人所说的话，并尝试了它，大多数测试都通过了，除了一个，我不知道为什么。所以我会发布我所拥有的，看看你们是否能弄清楚我的愚蠢错误。

```
public class Item
{
    public Item(object[] array)
    {
        ItemNumber = array[0].ToString();
        Description = array[1].ToString();
        Quantity = (int)array[2];
    }
    public Item(string item, string desc, int qty)
    {
        ItemNumber = item;
        Description = desc;
        Quantity = qty;
    }
    /// <summary>
    /// </summary>
    public string ItemNumber;
    public string Description;
    public int Quantity;

    public override bool Equals(object obj)
    {
        //return compareTwoItems(this, (Item)obj);
        return this.GetHashCode() == obj.GetHashCode();
    }
    public static bool operator ==(Item ic1, Item ic2)
    {
        return compareTwoItems(ic1, ic2);
    }
    public static bool operator !=(Item ic1, Item ic2)
    {
        return !compareTwoItems(ic1, ic2);
    }
    private static bool compareTwoItems(Item ic1, Item ic2)
    {
        return (ic1.ItemNumber == ic2.ItemNumber)
            && (ic1.Quantity == ic2.Quantity);
    }
    public override int GetHashCode()
    {
        return ItemNumber.GetHashCode() ^ Quantity;
    }
}
public class ItemCollection : System.Collections.Generic.SortedDictionary<string, Item>
{
    public ItemCollection()
    {
    }
    public void AddItem(Item i)
    {
        this.Add(i.ItemNumber, i);
    }

    public string TrackNumber = "";
    /// <summary>
    /// Check to see if the Two ItemCollections have the same Quantity of items. If not it may be that the order was not completed
    /// </summary>
    /// <param name="obj">the sales order items</param>
    /// <returns>True if the quantity of the two collections are the same.</returns>
    /// <exception cref="ArgumentException">If the collections have different counts, or if ItemNumbers differ in one of the elements</exception>
    public override bool Equals(object obj)
    {
        return this.GetHashCode() == ((ItemCollection)obj).GetHashCode();
    }
    public override int GetHashCode()
    {
        int hash = 0;
        foreach (var item in this.Values)
            hash ^= item.GetHashCode();

        return hash;
    }
    /// <summary>
    /// Check to see if the Two ItemCollections have the same Quantity of items. If not it may be that the order was not completed
    /// </summary>
    /// <param name="ic1">the sales order items</param>
    /// <param name="ic2">the shipping ticket items</param>
    /// <returns>True if the quantity of the two collections are the same.</returns>
    /// <exception cref="ArgumentException">If the collections have different counts, or if ItemNumbers differ in one of the elements</exception>
    public static bool operator ==(ItemCollection ic1, ItemCollection ic2)
    {
        return ic1.Equals(ic2);
    }
    public static bool operator !=(ItemCollection ic1, ItemCollection ic2)
    {
        return !ic1.Equals(ic2);
    }
} 
```

**单元测试**

```
 [TestMethod, TestCategory("ItemColl")]
    public void ItemCollectionPassTest()
    {
        MSSqlDatabase db = new MSSqlDatabase();
        ItemCollection salesOrder = db.GetItemsCollectionFromSalesOrder(4231);
        ItemCollection items = db.GetItemsCollectionFromSalesOrder(4231);

        Assert.AreEqual(salesOrder, items); //passes
        Assert.IsTrue(salesOrder == items); //passes
    }
    [TestMethod, TestCategory("ItemColl")]
    public void ItemCollectionDifferentQuantity()
    {
        MSSqlDatabase db = new MSSqlDatabase();
        ItemCollection salesOrder1 = db.GetItemsCollectionFromSalesOrder(4231);
        ItemCollection salesOrder2 = db.GetItemsCollectionFromSalesOrder(4232);
        Assert.AreNotEqual(salesOrder1, salesOrder2); //passes
        Assert.IsTrue(salesOrder1 != salesOrder2); //passes

        ItemCollection[] items = db.GetItemsCollectionFromShipping(4231);
        ItemCollection test = items[0];
        Assert.AreNotEqual(salesOrder1, test); //Fails
        CollectionAssert.AreNotEqual(salesOrder1, items[0]); // passes
    } 
```

....现在由于某种原因它起作用了...我在项目中的 GetHash 方法中更改了我的代码中的一件事（忘记使用 ItemNumber 中的散列对数量进行异或），现在它们通过了...奇怪。但无论如何我都会发布我的代码，因为它可能会对某人有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:06:00.443

我同意 Scarle88，我认为你`ItemCollection`应该扩展`Dictionary`or `Hashtable`。字典将需要每个项目的唯一键，您可以为此使用项目编号（如果您的要求是每个项目都是唯一的）。

像这样：

```
public class Item {
    public string ItemNumber { get; set; }
    public string Description { get; set; }
    public string Quantity { get; set; }

    public override bool Equals(Object o) {
        // Implement your Equals here
    }
    public override int GetHashCode() {
        // Implement your hash code method here
    }
}

public class ItemCollection : Dictionary<string, Item> {
    public override bool Equals(Object o) {
        // Implement your collection's Equals method here
    }
} 
```

我不确定您对比较收藏有什么要求。但是，如果您只想看到两个集合具有相同的项目，则可以这样实现`ItemCollection.Equals`：

```
public override bool Equals(Object o) {
    if (o == null)
        return false;
    if (!(o is ItemCollection))
        return false;
    var other = o as ItemCollection;

    // check the 'this' collection
    foreach (var item in this.Keys) {
        if (item != null && !other.ContainsKey(item.ItemNumber))
            return false;

    // check the 'other' collection
    foreach (var item in other.Keys) {
        if (item != null && !this.ContainsKey(item.ItemNumber))
            return false;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:09:02.247

您可以使用 a`HashTable<T>`作为您的集合，并在您的 Item 类中覆盖基础对象`Equals()`和`GetHashCode()`方法。

[为什么在重写 Equals 方法时重写 GetHashCode 很重要？](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overridden)

# c# - 比较数据网格视图的行并删除重复的行

> ID：13750579
> 
> 赞同：3
> 
> 时间：2012-12-06T18:58:45.540
> 
> 标签：c#, winforms, datagridview

我正在尝试比较 Datagridview 的行并删除重复的行。我认为我做错了什么。这是代码：

```
 public void Compare(DataGridView grv)
    { 
     grv.Sort(grv.Columns[0],ListSortDirection.Ascending);
     for ( int row = 0; row < grv.Rows.Count; row++)
     {
     for ( int col = 0; col < grv.Columns.Count; col++)
     {
         int rowx=1;
         if (grv.Rows[row].Cells[col].Value != null && grv.Rows[row].Cells[col].Value.Equals(grv.Rows[rowx].Cells[col].Value))
         {
             if (col == grv.Columns.Count - 1)
             {
                 grv.Rows.RemoveAt(row);
                 grv.Sort(grv.Columns[0], ListSortDirection.Descending);
             }
         }
         else
         {
             grv.FirstDisplayedScrollingRowIndex = grv.RowCount - 1;
             grv.Rows[grv.RowCount - 1].Selected = true;
         }
        }
     }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T02:23:15.540

这更清洁并且涉及更少的比较。

```
 public void RemoveDuplicate(DataGridView grv)
    {
        for (int currentRow = 0; currentRow < grv.Rows.Count - 1; currentRow++)
        {
            DataGridViewRow rowToCompare = grv.Rows[currentRow]; 

            for (int otherRow = currentRow + 1; otherRow < grv.Rows.Count; otherRow++)
            {
                DataGridViewRow row = grv.Rows[otherRow];

                bool duplicateRow = true;

                for (int cellIndex = 0; cellIndex < row.Cells.Count; cellIndex++)
                {
                    if (!rowToCompare.Cells[cellIndex].Value.Equals(row.Cells[cellIndex].Value))
                    {
                        duplicateRow = false;
                        break;
                    }
                }

                if (duplicateRow)
                {
                    grv.Rows.Remove(row);
                    otherRow--;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:54:38.303

```
for (int currentRow = 0; currentRow < grv.Rows.Count; currentRow++)
{
   var rowToCompare = grv.Rows[currentRow]; // Get row to compare against other rows

   // Iterate through all rows 
   //
   foreach (var row in grv.Rows)
   {  
       if (rowToCompare.equals(row) continue; // If row is the same row being compared, skip.

       bool duplicateRow = true;

       // Compare the value of all cells
       //
       for (int cellIndex; cellIndex < row.Cells.Count; cellIndex++)
       {
           if ((null != rowToCompare.Cells[cellIndex].Value) && 
               (!rowToCompare.Cells[cellIndex].Value.equals(row.Cells[cellIndex].Value)))
          {
             duplicateRow = false;
             break;
          }
       }

       if (duplicateRow)
       {
           grv.Rows.Remove(row);
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-02T08:52:11.707

```
try

        {
            if (dgv_Language.Rows.Count > 2)
            {

                for (int currentRow = 0; currentRow < dgv_Language.Rows.Count; currentRow++)
                {
                    var rowToCompare = dgv_Language.Rows[currentRow]; // Get row to compare against other rows

                    // Iterate through all rows 
                    //
                    foreach (DataGridViewRow row in dgv_Language.Rows)
                    {
                        if (rowToCompare.Equals(row))
                        {
                            continue;
                        }
                        // If row is the same row being compared, skip.

                        bool duplicateRow = true;

                        // Compare the value of all cells
                        //

                        if (rowToCompare.Cells[0].Value != null && rowToCompare.Cells[0].Value.ToString() != row.Cells[0].Value.ToString())
                        {
                            duplicateRow = false;

                        }

                        if (duplicateRow)
                        {
                            dgv_Language.Rows.RemoveAt(row.Index);
                            break;
                        }
                    }
                }
            }
        }
        catch
        {
        } 
```

# c# - 如何检查 svn 服务器中是否存在分支或在 C# 中不使用 SharpSVN API

> ID：13750580
> 
> 赞同：0
> 
> 时间：2012-12-06T18:58:46.850
> 
> 标签：c#, asp.net, sharpsvn

我试图使用 c#.net 中的 SharpSVN API 来检查 Svn 服务器中是否存在分支名称或不存在于 svn 服务器中。我可以做吗？或者除了命令提示符之外还有其他方法可以在 C# 中执行此操作。我已经尝试过 thr cmd，但它在本地 PC 上工作，但在 IIS 服务器中发布后却没有。请建议我任何 sln。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:03:25.280

我们可以使用下面的代码来检查 svn 服务器中的分支是否存在，如下所示

```
try
{
        SvnClient clientN = new SvnClient();

        clientN.Authentication.Clear();//clear a previous authentication
        clientN.Authentication.DefaultCredentials = new System.Net.NetworkCredential("pkumar", "pkumar");
        Collection<SvnListEventArgs> list;

        if (clientN.GetList("svn://india01/Repo/branches/xyz", out list))//this will chk the branch exist or not. if not it will move to catch block
        {
            lblMsg.text = "branch exist";
             //do what you want here
        }
}
catch(SvnFileSystemException sfse)
{
    lblMsg.text = "branch does not exist";
} 
```

# mysql - 如何将结果列拆分为多列

> ID：13750584
> 
> 赞同：1
> 
> 时间：2012-12-06T18:58:51.180
> 
> 标签：mysql

我有一张像这样的桌子：

```
id  ip
--  -----------
1   192.168.2.1 
```

并且需要得到如下结果：

```
id  ip           A    B    C    D
--  -----------  ---  ---  ---  ---
1   192.168.2.1  192  168  2    1 
```

可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:00:47.490

```
SELECT `id`, `ip`,
    SUBSTRING_INDEX( `ip` , '.', 1 ) AS a,
    SUBSTRING_INDEX(SUBSTRING_INDEX( `ip` , '.', 2 ),'.',-1) AS b,
    SUBSTRING_INDEX(SUBSTRING_INDEX( `ip` , '.', -2 ),'.',1) AS c,
    SUBSTRING_INDEX( `ip` , '.', -1 ) AS d
FROM unicorns 
```

[资源](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

**例子**

```
SET @ip = '192.168.1.1';

SELECT @ip,
    SUBSTRING_INDEX( @ip , '.', 1 ) AS a,
    SUBSTRING_INDEX(SUBSTRING_INDEX( @ip , '.', 2 ),'.',-1) AS b,
    SUBSTRING_INDEX(SUBSTRING_INDEX( @ip , '.', -2 ),'.',1) AS c,
    SUBSTRING_INDEX( @ip , '.', -1 ) AS d 
```

**结果**

```
| @IP | 一个 | 乙| C | D |
----------------------------------
| 192.168.1.1 | 192 | 168 | 1 | 1 |
```

# iphone - subfolders in iPhone localization folders

> ID：13750595
> 
> 赞同：2
> 
> 时间：2012-12-06T18:59:35.860
> 
> 标签：iphone, ios, xcode, localization

I would like to localize some images in my iPhone project. So I created files:

```
en.lproj/Images/iPad/btn-check-pressed~ipad.png
en.lproj/Images/iPadRetina/btn-check-pressed@2x~ipad.png
ru.lproj/Images/iPad/btn-check-pressed~ipad.png
ru.lproj/Images/iPadRetina/btn-check-pressed@2x~ipad.png 
```

and so on and added them to my project. But Xcode shows "English 0 files localized", "Russian 0 files localized" in Localizations list.

It also shows a warning

`Warning: Multiple build commands for output file /Users/User/Library/Developer/Xcode/DerivedData/TestLocalizationDefaultPNG-ckplzmcjurofxrccjuvyzjaqketc/Build/Products/Debug-iphonesimulator/TestLocalizationDefaultPNG.app/btn-check-pressed~ipad.png`

for each of my files when I try to build the project. So, as far as I understand, it copies all files in one folder, and since my files have the same names - only one of them can survive. But, if I remove my subfolders:

```
en.lproj/btn-check-pressed~ipad.png
en.lproj/btn-check-pressed@2x~ipad.png
ru.lproj/btn-check-pressed~ipad.png
ru.lproj/btn-check-pressed@2x~ipad.png 
```

everything works fine.

Is there is a way to keep subfolders? Here [http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html) in Listing 2-4 subfolder used for the audio files, so it should be.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:21:03.857

It looks like the only way localization works in iOS is different. You base folders hierarchy should be by inverted: first goes actual folders structure and in each and every folder you want to localize, you put corresponding `.lproj` sub-folder with localized resources. So in your example it should be something like:

```
/Images
 /iPad
  /en.lproj
    btn-check-pressed~ipad.png
  /ru.lproj
    btn-check-pressed~ipad.png
 /iPadRetina
  /en.lproj
    btn-check-pressed@2x~ipad.png
  /ru.lproj
    btn-check-pressed@2x~ipad.png 
```

This might be sub-optimal if you intended to have big hierarchy but this is the only way it works out of the box.

Of course you can always say that you don't need Xcode support and use some custom build rules to re-arrange files in you project in the way you like and then copy them into proper structure during build but I doubt it worths troubles.

**Update**: it looks like XCode (*4.5*) build script is the main villain.

According to my experiments build script should flattens resources structure at least for images. So the only way localized app can be inside is:

```
/YourApp
 YouApp
 info.plist
 ....
 /en.lproj
   btn-check-pressed~ipad.png
   btn-check-pressed@2x~ipad.png
 /ru.lproj
   btn-check-pressed~ipad.png
   btn-check-pressed@2x~ipad.png 
```

The trick is that by default XCode (as of version 4.5) can flatten your project structure only if it is as described above and I don't see a standard way to change this behavior.

Of course, original comment about custom build scripts is still true.

# html - 将两个 div 放在另一个下方

> ID：13750598
> 
> 赞同：12
> 
> 时间：2012-12-06T18:59:47.757
> 
> 标签：html, css

我在将两个 div 放在另一个下方时遇到了一些问题。

我尝试了一些在 Stackoverflow 中找到的解决方案，如下所示。
但似乎没有任何工作。

代码：

```
#wrapper {
  position: absolute;
}

#up {
  position: absolute;
  float: left;
}

#down {
  position: absolute;
  float: left;
  clear: left;
}
```

```
<div id="wrapper">
  <div id="up"></div>
  <div id="down"></div>
</div>
```

这是我的尝试，

[小提琴](http://jsfiddle.net/Pagqx/198/)

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T19:04:38.730

删除 CSS。DIV 标签是块元素，自然会顺着页面向下流动。您正在浮动它们，这将导致它们并排显示。

特别是删除“浮动”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:05:41.630

这就是 DIV 默认的工作方式，只需删除您的 css。在这里查看一个工作示例：[jsfiddle](http://jsfiddle.net/YMh3C/1/)

```
<div id="wrapper">
<div id="up"></div>
<div id="down"></div>
</div>​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T19:11:50.873

我不确定您是否希望外部 div 大于页面的高度，但这就是这样做的：

```
#DivSlider
{
    width:100%;
    position:absolute; 
    height:170%;
    background-color:green;
}

#DivHome
{
    height:26%;
    background-color:orange;
    border:1px solid black; /* You were missing the 'px' here */
}

#DivSkills
{
    height:25%;
    background-color:white;
    border:1px solid black;
}​ 
```

# arduino - Arduino WiFi屏蔽无法通信

> ID：13750599
> 
> 赞同：2
> 
> 时间：2012-12-06T18:59:49.033
> 
> 标签：arduino

我在 Uno R3 上使用官方 Wifi 防护罩。

一开始一切都很好。

但是现在，Uno 无法与 WiFi shield 进行通信，无论是插入 USB 还是使用 9V 电池。我仍然可以控制 Wifi shield 上的 L9 LED，但 WiFi 功能不再起作用。当我执行 WiFi.begin(ssid, pass); 时，我返回了 WL_Connected = False。

我确实注意到，即使它正在工作，当我从笔记本电脑电源切换 9V 电池时，它并不总是立即通电。

我什至如何开始解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T07:45:16.533

交换板/盾牌。它可能是一些简单的东西，比如一个坏别针。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T12:07:17.937

WiFi shield 基于 ZeroG 制造的收发器。现在这家公司是从 Microchip 收购的，当然他们不再支持 Atmel 处理器了。

我也遇到了同样的问题，于是我转而使用另一个令人惊叹的产品：Flyport Wi-Fi，它有一个板载处理器 (PIC24) 和这个收发器。它也是开源的，请查看 www.openpicus.com

# php - CodeIgniter 、过滤器、修剪、Stripslashes、Strip_tags 以及清理和替换 1 个函数中的坏字符？

> ID：13750601
> 
> 赞同：3
> 
> 时间：2012-12-06T18:59:52.663
> 
> 标签：php, codeigniter, strip

我刚开始使用 codeigniter，我想使用 1 个函数执行输入格式化。

我想在我的输入上实现的代码：

```
function sanitize ($string)
{
    $string = filter_var($string, FILTER_SANITIZE_STRING);
    $string = trim($string);
    $string = stripslashes($string);
    $string = strip_tags($string);

    return $string;
} 
```

**我的问题是：**

当我使用输入类时，codeigniter 是否默认执行这些操作？或者我是否需要创建一个自定义函数来过滤我的输入。

**我的目标是：**

清洁和保护表单上的用户输入并修剪其中的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:32:09.913

我建议您阅读手册[上的安全章节](http://ellislab.com/codeigniter/user-guide/libraries/security.html)，您会看到一些功能（主要是 XSS 过滤器）可以（或多或少）完成您所追求的某些功能 - 我认为没有与您的功能相近的功能， 尽管。您始终可以围绕（或代替）它编写自己的实现，将函数放在帮助程序中，并在需要时随时使用它。

通常默认情况下不应用它，因为它非常消耗资源；但是，您可以设置为始终在您的配置文件中使用它，或者通过将*TRUE*作为`$this->input-post()`

如果您想深入了解实现的细节，只需打开位于 中的 Security.php 文件`system/core/`，即可查看该`xss_clean()`函数对提供的输入执行的所有操作（大约在第 264 行）。

至于修剪，我不确定它是否完成（我还没有彻底检查过），但你手写的时间很短，而且它是[表单验证](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#rulereference)库中可用的过滤器之一，以防你要去在表单提交后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T10:55:05.753

你的问题的答案是**否定**的。Codeigniter 默认不执行这些操作。

通过配置输入表单验证规则，您可以实现在表单上清洁和安全的用户输入并修剪其中的空间的目标。

> CodeIgniter 允许您为给定字段设置任意数量的验证规则，按顺序级联它们，它甚至允许您同时准备和预处理字段数据。要设置验证规则，您将使用 set_rules() 函数”。

您想要实现的示例：

```
$this->form_validation->set_rules('input_field', 'Input Field', 'trim|required|valid_email|xss_clean'); 
```

**Codeigniter 文档**

[*验证规则*] [http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#validationrules](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#validationrules)

[*安全类*] [http://ellislab.com/codeigniter/user-guide/libraries/security.html](http://ellislab.com/codeigniter/user-guide/libraries/security.html)

# git - git 不会忽略文件

> ID：13750606
> 
> 赞同：6
> 
> 时间：2012-12-06T19:00:10.673
> 
> 标签：git, github

我不小心跟踪了`.idea/workspace.xml`ruby​​mine 创建的文件，现在我似乎无法从跟踪中删除该文件。

因此，它已被多次检查，但我真的希望它停止被跟踪，因为它会导致合并冲突。

这是我一直尝试删除文件的方法。

1.  `git rm --cached .idea/workspace.xml`

    ```
    $ git status
    On branch master
    Changes to be committed:
    (use "git reset HEAD <file>..." to unstage)

    deleted:    .idea/workspace.xml 
    ```

2.  `git commit -m 'remove workspace file from tracking'`

3.  将此条目添加到我的 .gitignore 文件中`.idea/*`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:31:14.320

你所展示的应该可以正常工作。我看到文件可能会被重复重新引入的两种潜在方式：

*   如果其他人仍然遇到合并错误并通过添加他们的更改并忽略您的删除来解决它们，文件将不断返回

*   如果您没有将您的内容包含`.gitignore`在您的存储库中或没有将您添加`.ideas/*`到 .gitignore 中，其他人可能会通过类似的方式重新添加该文件

    ```
    git add -a 
    ```

    或者

    ```
    git add . 
    ```

    您应该将您的更改提交到您的 .gitignore 以防止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T11:27:58.017

对我来说，问题是由使用 GitHub Windows GUI 工具引起的。

即使我手动删除了 .gitignore 中的 .idea/ 文件夹并执行了`git rm -r --cached .idea`，它仍会在“未同步的更改”中不断出现。

在删除缓存文件夹并添加到 .gitignore 后，我可以**通过命令行手动提交**来解决这个问题。不知道为什么，但它有效。

`git commit -m "Manual commit"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-17T21:30:00.260

提交文件后，有两种方法可以告诉 git 忽略它：

1.  提交删除文件，然后将其添加到`.gitignore`

    git rm --cached git commit -m "删除..."

2.  设置`assume-unchanged`标志

## ***`--[no-]assume-unchanged`***

> 指定此标志时，不会更新为路径记录的对象名称。
> 相反，此选项设置/取消设置路径的“假定不变”位。
> 
> 当“假设不变”位打开时，用户承诺不更改文件并允许 Git 假设工作树文件与索引中记录的内容匹配。如果要更改工作树文件，则需要取消设置以告知 Git。这在处理具有非常慢的 lstat(2) 系统调用（例如 cifs）的文件系统上的大型项目时有时会很有帮助。
> 
> 如果 Git 需要修改索引中的这个文件，例如在提交合并时，Git 将失败（优雅地）；因此，如果假定的未跟踪文件在上游发生更改，您将需要手动处理这种情况。

# c# - 为什么更改连接字符串会引发只读错误？

> ID：13750610
> 
> 赞同：3
> 
> 时间：2012-12-06T19:00:19.780
> 
> 标签：c#, asp.net, web-config

我正在尝试在 C# 代码中的 web.config 中动态设置连接字符串：

```
ConfigurationManager.ConnectionStrings["ServerConnection"].ConnectionString = "blah"; 
```

但它不允许我这样做并抛出以下错误：

```
The configuration is read only. 
```

注意：如果可能，我不想实际保存到 web.config。只需在内存中动态设置它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:07:44.653

```
var configuration = WebConfigurationManager.OpenWebConfiguration("~");
var section = (ConnectionStringsSection)configuration.GetSection("connectionStrings");
section.ConnectionStrings["ServerConnection"].ConnectionString = "Data Source=...";
configuration.Save(); 
```

如果您不想更改实际的 web.config，那么您可以使用；

```
using(OleDbConnection conn = new OleDbConnection("Type here your connection string"))
{
     // Execute my code
} 
```

或者，如果您想保留一些数据，则可以将连接字符串的值复制到另一个字符串，然后进行更改。

```
string myNewConnectionString = ConfigurationManager.ConnectionStrings["ServerConnection"].ConnectionString;
myNewConnectionString.Replace("Data Source=Development", "Data Source=Production"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:01:52.757

如果我错了，请纠正我，但我很确定 ConfigurationManager 配置是只读的。您可以通过更改`web.config`for来更改设置`app.config`。

它并不意味着动态设置。

# c++ - 访问组合类的受保护成员

> ID：13750613
> 
> 赞同：0
> 
> 时间：2012-12-06T19:00:23.823
> 
> 标签：c++, composition, protected

我有下面的类，它有两个自定义对象作为成员变量。我收到粗体部分的错误。访问组合类的受保护成员的正确方法是什么？我在 f、gleft 和 gright 函数以及尝试调整 u 大小时出现“在此上下文中”错误。

```
class C
{
protected:
    A x;
    B y;
    double a;
    double b;
    Eigen::MatrixXd u;

public:
    double f(double x)
    {
        return x;
    }
    double gleft(double tau)
    {
        return tau
    }
    double gright(double tau)
    {
        return 0;
    }
    FD_Euro_Put(): x(), y(), a(0), b(0){}
    FD_Euro_Put(char y1, double y2, double y3, double y4, double x2,
            double x3, double x4, double x5, double x6, double x7):
            x(x1, x2, x3, x4, x5, x6, x7)
    {
        double Xleft = x1*x2;
        double Xright = x1*x3;
        double Tauf = x1*x1;
        double NN = floor((x1/x2);
        a = x1*x2 - 0.5;
        b = x1*x2 + 0.5;

        pde = HeatPDE(y1, NN, Xleft, Xright, Tauf, Alpha); //begin problem area
        u.resize(pde.N+1, pde.M+1); 
        if(fdtype == 'f')
            u = pde.Forward_Euler(&f, &gleft, &gright);
        else if(fdtype == 'b')
            u = pde.Backward_Euler(&f, &gleft, &gright);
        else if(fdtype == 'c')
            u = pde.Crank_Nicolson(&f, &gleft, &gright); //end problem area
        else
            cout << "Incorrect choice for finite difference type!" << endl;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:01:46.707

`protected`除非它明确将您列为 a`friend`或您从该类继承，否则您无法访问该类的成员。

一个技巧是将该类包装在您自己的类中，从而为这些成员提供吸气剂。

但是从逻辑的角度来看，如果这些成员不是`public`，那么您可能无论如何都不需要访问它们。

# wordpress - 如果不是 wp-admin 或 wp-login.php，则 Nginx 重定向

> ID：13750614
> 
> 赞同：0
> 
> 时间：2012-12-06T19:00:28.220
> 
> 标签：wordpress, nginx

我希望我的 nginx 将所有不指向 wp-admin 文件夹或 wp-login.php 的内容从 https:// 重定向到 http:// （如果是 https）。我的虚拟主机配置只是说

```
 server{
         listen 80;
         listen 443 ssl; 
```

然后是关于服务器名称、证书信息和错误页面的一些信息。谁能告诉我如何强制对每个不是 wp-admin 的文件夹和每个不是 wp-login.php 的文件使用 http 而不是 https ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-03T19:14:45.840

我目前对此的解决方案是根本不重写 nginx 中的 url，而是让 Wordpress 自己完成这项工作。

我的 nginx 配置为允许 http 和 https，就像你的一样，所以人们可以选择他们想要的，因为我使用不受每个人信任的 CAcert 证书。然后我让 Wordpress 强制登录和管理会话重定向到 https，方法是将其添加到`wp-config.php`：

```
define('FORCE_SSL_ADMIN', true); 
```

但是，这不会将 https 重定向到非管理页面上的 http。但这并没有真正的意义，因为它不能避免证书警告：重定向只会在警告之后发生。另一方面，有些人（例如管理员）实际上已经导入了证书，并且可能也希望将站点的其余部分与 https 一起使用。

更多细节可以在[http://codex.wordpress.org/Administration_Over_SSL](http://codex.wordpress.org/Administration_Over_SSL)找到。我通过[http://www.surlyjake.com/blog/2011/12/20/wordpress-https-secure-login-with-nginx/](http://www.surlyjake.com/blog/2011/12/20/wordpress-https-secure-login-with-nginx/)偶然发现了这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:14:13.277

在您的服务器块中，使用位置规则来匹配*/wp-admin/*和*/wp-login.php*请求并重写这些请求以使用*https*，并且对于其他所有内容 - 如果这是您想要的 - 重写以使用*http*。例如：

```
server {
    listen 80;
    listen 443;
    server_name your.domain.name;

    # your ssl configurations here...
    # example:
    ssl_session_timeout 10m;
    ssl_protocols SSLv2 SSLv3 TLSv1;
    ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
    ssl_prefer_server_ciphers on;

    location / {
        rewrite ^ http://$server_name$request_uri? last;
    }

    location /wp-admin/ {
        rewrite ^ https://$server_name$request_uri? last;
    }

    location = /wp-login.php {
        rewrite ^ https://$server_name$request_uri? last;
    }

    # your other rules here...

} 
```

# javascript - javascript 对象赋值引发异常

> ID：13750617
> 
> 赞同：0
> 
> 时间：2012-12-06T19:00:33.727
> 
> 标签：javascript, javascript-objects

我正在尝试将 javascript 矩阵构建为对象。

我绑：

```
var variations={}; 
variations["p1088"]["red"]["gen"]=1107;
variations["p1090"]["red"]["l"]=1288; 
```

和

```
var variations={}; 
variations.p1088.red.gen=1107;
variations.p1090.red.gen=1288; 
```

但两者都抛出异常

```
TypeError: variations.p1090 is undefined 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:03:28.250

每个子对象都需要声明。所以要获得第一组它会是

```
var variations = {};
variations.p1088 = {};
variations.p1088.red = {};
variations.p1088.red.gen = 1107; 
```

但是，如果我了解您要做什么，我会制作一组对象。

```
var variations = [];
variations[0] = {name: 'p1088',color:'red',gen:1007} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T19:03:21.423

正如错误所说，`variations.p1090`未定义。你从来没有给它一个价值。

```
var variations={}; 
variations.p1088={};
variations.p1088.red={};
variations.p1088.red.gen=1107; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:07:08.513

因为你不能假设 p1088、red 和 gen 是对象。这有效：

```
// short version
var variations = { p1088: { red: { gen: 1107 } } };

// long version
var varations = {};
varations.p1088 = {};
varations.p1088.red = {};
varations.p1088.red.gen = 1077; 
```

# android - 专辑缩略图名称是如何制作的？

> ID：13750618
> 
> 赞同：1
> 
> 时间：2012-12-06T19:00:33.667
> 
> 标签：android, android-music-player

我正在制作一个程序，在我的设备上显示歌曲的专辑插图。为此，我得到了包含这些专辑缩略图 ( `/storage/emulated/0/Android/data/com.android.providers.media/albumthumbs`) 的文件夹，但该文件夹中包含的缩略图的名称对我来说毫无意义。例如，所有专辑缩略图的名称都有这种格式：`1354042503656`. 文件名没有扩展名，由 13 个数字组成，全部以 1354 开头。

有人知道这意味着什么吗？我想将专辑缩略图的名称与我的应用程序中的相应专辑相关联。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:54:18.857

在查看了android的源代码后，我找到了设置这些缩略图名称的方法。[第 3575 行的源代码](http://omapzoom.org/?p=platform/packages/providers/MediaProvider.git;a=blob;f=src/com/android/providers/media/MediaProvider.java;h=c73871d54353f8cfcba5af8b28ae174e25aee9af;hb=master)。缩略图名称是这样制作的`String name = String.valueOf(System.currentTimeMillis());`

所以不可能匹配我的应用程序中的专辑和文件夹中的名称:(。

希望能帮助到你！

# wordpress - 如果不是类别 Wordpress - 具有多个类别

> ID：13750619
> 
> 赞同：0
> 
> 时间：2012-12-06T19:00:36.890
> 
> 标签：wordpress, categories

我的页面上有以下代码：

```
<p class="postmetadata">Category: <?php foreach((get_the_category()) as $cat) {
if (!($cat->cat_ID=='12')) echo '<a href="' . get_bloginfo('url') . '/category/' . $cat->category_nicename . '/">'. $cat->cat_name . '</a>' . ', ';
} ?></p> 
```

显然只要猫不是 12 岁，它就会将类别名称显示为链接。

如果我想包括多个类别，即

```
if (!($cat->cat_ID=='12 or 13 or 14')) 
```

我该怎么做？

谢谢dvent

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:04:09.027

尝试

```
if (!is_category(array('12','13','14'))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:05:33.053

“||” 意思是“或”，所以这样的事情应该有效：

```
if ( !($cat->cat_ID=='12') || !($cat->cat_ID=='13') || !($cat->cat_ID=='14') ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:06:10.620

```
// Place the list of categories to test inside an array
$categories_list=array(12, 24, 32);
// Then test to see if your category is in this list
if (in_array($cat, $categories_list)) {
  // do something 
}
else 
{
  // do something else
} 
```

# vba - 运行复制+粘贴宏时VBA绝对公式范围发生变化

> ID：13750621
> 
> 赞同：0
> 
> 时间：2012-12-06T19:00:41.610
> 
> 标签：vba, excel, excel-2007

我正在运行一个复制粘贴宏，但是当我运行它时，它会不断将我的公式范围更改为行的最后一行。

例如，我原来的 VLOOKUP 公式看起来从`$D$2:$G$5000`，但是当我运行我的宏时，它会将其更改为`$D$2:$G$1254`1254 是数据所在的最后一行。

这是复制+粘贴功能：

```
Sub START1()

Dim shCurrentWeek As Worksheet
Dim shPriorWeek As Worksheet
Dim lr As Long

Set shCurrentWeek = ActiveWorkbook.Sheets("Current Week")
Set shPriorWeek = ActiveWorkbook.Sheets("Prior Week")
lr = shCurrentWeek.Range("A" & Rows.Count).End(xlUp).Row

'Copies Current Week into Prior Week and deletes Rows in Prior week

shCurrentWeek.Range("A4:X" & lr).Copy
shPriorWeek.Range("A2").PasteSpecial xlPasteValues
shPriorWeek.Range("A" & lr - 2 & ":A10000").EntireRow.Delete

End Sub 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:10:12.903

您可以使用[INDIRECT()](http://www.cpearson.com/excel/indirect.htm)函数，因此公式将始终引用您希望的行。这是一个简单的示例（请参阅[此链接](http://www.cpearson.com/excel/indirect.htm)以获取更多详细信息）：

```
=SUM(INDIRECT("A1:A6")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:10:27.567

首先，您使用的是 pastevalues，因此您不会在第二页上获得任何公式，但您的错误在于代码的最后一行

```
shPriorWeek.Range("A" & lr - 2 & ":A10000").EntireRow.Delete 
```

因为您的公式与您要删除的范围重叠，所以 Excel 会自动调整 vlookup 公式。

我建议在粘贴值之前删除您的数据。

*如果公式已经在页面上，则在阅读评论后进行编辑，则此解决方案将不起作用，我将根据 tim 的建议使用 clearcontents。

# php - 通过 PHP 脚本防止 MySql 中的重复

> ID：13750622
> 
> 赞同：0
> 
> 时间：2012-12-06T19:00:41.577
> 
> 标签：php, mysql, mysqli

我是 PHP 新手。我正在尝试通过 php 脚本防止重复。我使用 wamp 服务器。这是代码，

```
$query1="select COUNT(email) from customer_info where email=$eml";
$res1=mysqli_query($db_Con,$query1);
$row=mysqli_fetch_assoc($res1); 
```

我想知道这里的 $row 是否有计数值。即如果 xyz@abc.com 在“customer_info”中已经存在（一次出现），$row 的值是否为“1”？

究竟应该传递给 mysqli_fetch_assoc() 什么？我收到警告说它需要 "mysqli_result" ，而不是布尔值。

PS：我不想将表格中的电子邮件列设为唯一。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:07:11.477

试试这个解决方案

```
$query = "SELECT COUNT(email) AS res FROM customer_info WHERE email = $eml"; // res is a alias... can be any unreserved word
$st = mysqli_query($db_con, $query);
$row = mysqli_fetch_object($st); //mysqli_fetch_object bind the resultset as object into the variable as described here http://php.net/mysqli_fetch_object

// $row->res is a object with property "res" from your query
if($row->res > 0)
{
  //has an e-mail
}
else
{
  ///
} 
```

# bdd - 使用 Behave BDD 测试 Pylons 服务器 - 如何启动和使用服务器？

> ID：13750642
> 
> 赞同：3
> 
> 时间：2012-12-06T19:01:43.433
> 
> 标签：bdd, pylons

我整个星期都在环顾四周，无法理解如何让我们的 pylons 服务器实例开始与 Behave BDD 一起使用。你们中的任何人都可以给我举一个例子或提供一个你自己的例子吗？这是我正在使用的：

从 Behave 文档网站的[教程](https://behave.readthedocs.org/en/latest/tutorial.html)页面，启动一个简单的服务器并使用 selenium，这是 Behave 的 features/environment.py 的示例代码：

```
import threading
from wsgiref import simple_server
from selenium import webdriver
from my_application import model
from my_application import web_app

def before_all(context):
    context.server = simple_server.WSGIServer(('', 8000))
    context.server.set_app(web_app.main(environment='test'))
    context.thread = threading.Thread(target=context.server.serve_forever)
    context.thread.start()
    context.browser = webdriver.Chrome()

def after_all(context):
    context.server.shutdown()
    context.thread.join()
    context.browser.quit()

def before_feature(context, feature):
    model.init(environment='test') 
```

这是一个开始，但我不知道如何将其与我们的“pylowiki”风格的 pylons 的启动方式结合起来。我发现还有另一个例子可以提供更好的线索，就是[这里](https://gist.github.com/517237/c8671a1001b9b1c2ff1d7d91c1c12e19417e1d57)。在这个例子中，我假设我会用“context”替换“world”，但除此之外，这个例子中服务器的启动方式与我们自己的 environment.py 启动方式不同。我认为可能方便的最后一件事是包含我们当前环境设置中的代码：

pylowiki/config/environment.py

```
# -*- coding: utf-8 -*-
"""Pylons environment configuration"""
import os

from mako.lookup import TemplateLookup
from pylons import config
from pylons.error import handle_mako_error
from sqlalchemy import engine_from_config

import pylowiki.lib.app_globals as app_globals
import pylowiki.lib.helpers
from pylowiki.config.routing import make_map
from pylowiki.model import init_model

def load_environment(global_conf, app_conf):
    """Configure the Pylons environment via the ``pylons.config``
    object
    """
    # Pylons paths
    root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    paths = dict(root=root,
                 controllers=os.path.join(root, 'controllers'),
                 static_files=os.path.join(root, 'public'),
                 templates=[os.path.join(root, 'templates')])

    # Initialize config with the basic options
    config.init_app(global_conf, app_conf, package='pylowiki', paths=paths)

    config['routes.map'] = make_map()
    config['pylons.app_globals'] = app_globals.Globals()
    config['pylons.h'] = pylowiki.lib.helpers

    # Create the Mako TemplateLookup, with the default auto-escaping
    config['pylons.app_globals'].mako_lookup = TemplateLookup(
        directories=paths['templates'],
        error_handler=handle_mako_error,
        module_directory=os.path.join(app_conf['cache_dir'], 'templates'),
        input_encoding='utf-8', output_encoding='utf-8', default_filters=['escape'],
        imports=['from webhelpers.html import escape'])

    # Setup the SQLAlchemy database engine
    engine = engine_from_config(config, 'sqlalchemy.')
    init_model(engine)

    # CONFIGURATION OPTIONS HERE (note: all config options will override
    # any Pylons config options) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-19T13:42:54.840

行为文档说您至少需要功能文件夹中的 environment.py 和相应的步骤文件夹

[https://behave.readthedocs.io/en/latest/gherkin.html#controlling-your-test-run-with-tags](https://behave.readthedocs.io/en/latest/gherkin.html#controlling-your-test-run-with-tags)

# delphi - 如何从桌面应用程序关闭浏览器的当前选项卡？

> ID：13750651
> 
> 赞同：1
> 
> 时间：2012-12-06T19:02:03.337
> 
> 标签：delphi, winapi, exit, tabbed-browsing

我正在开发一个包含在桌面（Windows）中运行的程序的系统。

每分钟检测活动程序是否是浏览器，在这种情况下检查活动选项卡的 url 是否在“黑名单”中

在这种情况下，我想关闭浏览器的当前选项卡。我现在正在做的是杀死浏览器进程，这意味着带有不在黑名单中的 url 的选项卡也被关闭了。

为了检测活动选项卡的 url，我正在使用[How to get the url from Chrome using delphi中的解决方案](https://stackoverflow.com/questions/5222301/how-to-get-the-url-from-chrome-using-delphi)

我正在使用 Delphi 7，但任何语言的解决方案都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-30T11:03:59.857

我正在使用这种方法来关闭浏览器选项卡。如您所知，Chrome 和 Iexplorer 对每个选项卡使用不同的进程。我找到进程名称并杀死它们。在下面的代码中，为 chrome 或 iexplore 或任何你想要的东西杀死内存中的所有进程。不要忘记在您的使用行中添加 winapi.tlhelp32 单元。

```
function KillTask(ExeFileName: string): Integer;
const
  PROCESS_TERMINATE = $0001;
var
  ContinueLoop: BOOL;
  FSnapshotHandle: THandle;
  FProcessEntry32: TProcessEntry32;
begin
  Result := 0;
  FSnapshotHandle := CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
  FProcessEntry32.dwSize := SizeOf(FProcessEntry32);
  ContinueLoop := Process32First(FSnapshotHandle, FProcessEntry32);
  // find all process and kill them all one by one    
  while Integer(ContinueLoop) <> 0 do
  begin
    if ((UpperCase(ExtractFileName(FProcessEntry32.szExeFile)) =
      UpperCase(ExeFileName)) or (UpperCase(FProcessEntry32.szExeFile) =
      UpperCase(ExeFileName))) then
      Result := Integer(TerminateProcess(
                        OpenProcess(PROCESS_TERMINATE,
                                    BOOL(0),
                                    FProcessEntry32.th32ProcessID),
                                    0));
     ContinueLoop := Process32Next(FSnapshotHandle, FProcessEntry32);
  end;
  CloseHandle(FSnapshotHandle);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T20:31:42.893

使用以下过程：

*   开始录制宏
*   打开浏览器
*   按键盘快捷键关闭选项卡
*   停止录制宏
*   创建宏的快捷方式

# c++ - 如何解释“const int i=2; { int i[i]; }”的“声明点”——来自 C++ 标准的一个例子？

> ID：13750653
> 
> 赞同：5
> 
> 时间：2012-12-06T19:02:20.860
> 
> 标签：c++, c++11, language-lawyer

我正在研究 C++ 标准以了解操作、表达式、语句和副作用的顺序。

一个相关的问题是名称的“声明点”。在 C++11 标准的第 3.3.2.1 节中，标准规定：

> 名称的声明点紧跟在它的完整声明符（第 8 条）之后和它的初始化器（如果有的话）之前......

以下段落添加了一个带有示例的注释：

> 注意：来自外部范围的名称在隐藏它的名称的声明点之前保持可见。

... 举个例子

```
const int i = 2;
{ int i[i]; } 
```

并且注释指出此代码示例“声明了一个由两个整数组成的块范围数组”。

我希望能够查看示例代码，并通过应用“声明点”的定义以及有关名称从外部范围的可见性的注释，能够查看该代码并得出合乎逻辑的我自己的结论是，它是格式良好的代码，它可以完成它看起来要做的事情。

但是，基于这些定义和规则，我无法理解如何查看此代码并得出此结论。

从左到右阅读，`i[]`数组的声明似乎出现在使用外部作用域之前，因此“*在声明点之前*`i`保持可见”的含义不能表示从左到右阅读感觉。

 *“*直到声明点*”必须意味着类似于“操作顺序”的意思。

C++ 标准中的什么定义或规则规定在数组声明中，数组名称的“声明点”出现在方括号内的表达式“之后”？在这种情况下，“之后”到底是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T19:05:36.563

"complete declarator" --> Declarator 包括`[]`和它们的内容。也就是说，上面的完整声明器是`i[i]`，所以它只有在那之后才被声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:07:00.933

声明点*紧跟在*完整*声明*符之后。因此，外部`i`还没有隐藏在声明器本身内部。*

# php - 具有反序列化功能的 PHP 不起作用

> ID：13750654
> 
> 赞同：1
> 
> 时间：2012-12-06T19:02:24.243
> 
> 标签：php, function, serialization, echo

我的功能有问题`unserialize()`。我认为的问题在于这一行：

```
$rslt = unserialize($data); 
```

并且不回显此命令：

```
echo $rslt[0]["product_id"]; 
```

问题是什么？

```
<?php
// *****************zima user id********************
$user =& JFactory::getUser();
$usr_id = $user->get('id');

// *****************zima product id i pravi session********************

mysql_connect("localhost", "user", "pass") or die(mysql_error());
mysql_select_db("shopping_katalog") or die(mysql_error());
mysql_query("SET CHARACTER SET utf8");
mysql_query("SET NAMES utf8");

$result = mysql_query("SELECT * FROM x9qg6_jshopping_cart_temp WHERE id_cookie ='".$_COOKIE["jshopping_temp_cart"]."'");    
$data=null;
while ($row = mysql_fetch_array($result)) 
{
    $data = $row['cart'];
}
$rslt = unserialize($data);
echo $data;

$session = JFactory::getSession();
$session->set('kor', $usr_id);
$session->set('kupid', $rslt[0]["product_id"]);
echo $rslt[0]["product_id"];
$mymessage = $session->get('mymessage');
echo $mymessage;

if (!$result) {
echo 'Проблем со купувањето _php.' . mysql_error();
exit;
}else{
} 
```

我试图用这个`unserialize()`函数阅读的文本是这样的：

```
a:1:{i:4;a:17:{s:8:"quantity";i:1;s:10:"product_id";i:5196;s:11:"category_id";s:3:"209";s:5:"price";d:1;s:3:"tax";s:5:"18.00";s:6:"tax_id";s:1:"1";s:11:"description";s:0:"";s:12:"product_name";s:4:"test";s:11:"thumb_image";s:0:"";s:3:"ean";s:0:"";s:10:"attributes";s:6:"a:0:{}";s:16:"attributes_value";a:0:{}s:6:"weight";s:6:"0.0000";s:9:"vendor_id";s:1:"0";s:5:"files";s:6:"a:0:{}";s:14:"freeattributes";s:6:"a:0:{}";s:25:"dependent_attr_serrialize";s:6:"a:0:{}";}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:36:03.480

在对已序列化并保存到数据库的数据进行反序列化之前，我遇到了麻烦。我发现对其进行排序的最简单方法是序列化时的 base64_encode 和反序列化时的解码。

`$seralized_data = base64_encode(serialize($data));`

`$unserialized_data = unserialize(base64_decode($data));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:29:42.563

那是因为你的`'product_id'`值有一个`[4]`索引键`'a:1:{i:4;...'` 试试：

```
echo $rslt[4]['product_id']; 
```

# java - 在 Java 中，如何在当前运行时从 actionPerformed 线程重新绘制面板？

> ID：13750659
> 
> 赞同：4
> 
> 时间：2012-12-06T19:02:59.193
> 
> 标签：java, swing, concurrency, actionlistener, event-dispatching

我有一个类（称为 Class_GUI），它有一个面板，上面有很多按钮。Class_GUI 有一些方法可以改变按钮的文本和颜色。

我也有一个带有 actionPerformed 方法的程序。当它被调用时，它会创建一个 Class_GUI 实例并重复调用 Class_GUI 方法、更改按钮等。

我遇到的问题是，按钮仅在 actionPerformed 方法完全完成后才能正确显示，而我希望在调用每个 Class_GUI 方法后更改它。

到目前为止，我的尝试是在每个 Class_GUI 方法中，我在方法结束时执行此操作：

```
SwingUtilities.invokeLater(Refresh_GUI); 
```

定义 Refresh_GUI 的地方：

```
Runnable Refresh_GUI = new Runnable(){
    public void run(){
        frame.revalidate();
        frame.repaint();
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:16:18.437

假设您的`actionPerformed`方法是在事件调度线程的上下文中调用的，在方法完成之前不会发生 UI 更新`actionPerformed`，即使 using`SwingUtilities#invokeLater`也不会改变这一点，因为在`actionPerformed`方法退出之前，EDT 将无法继续处理（除其他外）重绘请求。

您能做的最好的事情是启动第二个线程并从该线程内更新您的 UI 组件……但是，您将被迫使用该区域，`SwingUtilities#invokeLater`因为您永远不应该更新 EDT 之外的任何 UI 组件。

不过，优点是线程不需要为了让 EDT 开始处理重绘请求而竞争

**更新示例**

```
public class SwingThreadUpdate {

    public static void main(String[] args) {
        new SwingThreadUpdate();
    }

    public SwingThreadUpdate() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BlinkPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class BlinkPane extends JPanel {

        private JLabel label;
        private JButton button;

        public BlinkPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridy = 0;

            label = new JLabel("Blinky");
            label.setBackground(Color.RED);
            button = new JButton("Click me");

            add(label, gbc);
            gbc.gridy++;
            add(button, gbc);

            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    button.setEnabled(false);
                    new Thread(new BlinkTask(BlinkPane.this)).start();
                }
            });

        }

        private void setBlink(boolean blink) {
            label.setOpaque(blink);
        }

        private void reset() {
            button.setEnabled(true);
            label.setOpaque(false);
        }
    }

    public class BlinkTask implements Runnable {

        private BlinkPane blinkPane;

        protected BlinkTask(BlinkPane blinkPane) {
            this.blinkPane = blinkPane;
        }

        @Override
        public void run() {
            Blink blinkOn = new Blink(blinkPane, true);
            Blink blinkOff = new Blink(blinkPane, false);

            for (int index = 0; index < 10; index++) {
                if (index % 2 == 0) {
                    SwingUtilities.invokeLater(blinkOn);
                } else {
                    SwingUtilities.invokeLater(blinkOff);
                }
                try {
                    Thread.sleep(125);
                } catch (InterruptedException ex) {
                }
            }

            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    blinkPane.reset();
                }
            });

        }
    }

    public class Blink implements Runnable {

        private BlinkPane blinkPane;
        private boolean blink;

        public Blink(BlinkPane blinkPane, boolean blink) {
            this.blinkPane = blinkPane;
            this.blink = blink;
        }

        @Override
        public void run() {
            blinkPane.setBlink(blink);
            blinkPane.repaint();
        }
    }
} 
```

您可能想阅读[AWT 和 Swing 中的绘画以](http://www.oracle.com/technetwork/java/painting-140037.html)获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:07:30.743

如果您的 actionPerform 方法调用代码以更新 for 循环中的按钮，您还可以在 invokeLater 中添加更新代码，这样更新和绘制代码将一一运行。Invoke later 将仅在当前方法完成执行后执行，因此确保绘制更快发生的唯一方法是将您的任务分解为更小的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:07:05.843

首先，确保您仅从 Event Dispatch 线程访问任何 GUI 组件（通过 invokeLater 或作为处理 GUI 事件的一部分）。

其次，如果您更改了 GUI 组件的任何属性，它应该会自动发布一个事件以重新绘制自己。如果没有，您可以尝试调用`component.repaint()`. 但至关重要的是，组件属性的更改发生在 EDT 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T00:22:46.477

一个简单的解决方案是在事件队列的末尾执行整个 ActionPerformed 无事件任务来清理屏幕。因此，首先它执行 cleanScreen() 函数，因为事件的其余部分等待所有事件完成。

```
 AnyButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            cleanScreen();        //Modify components before action performer event
            EventQueue.invokeLater( new Runnable() {
                @Override public void run() {
                    anytask();    //Action performer event
                }
            });                     
        }
    }); 
```

# mercurial - 使用带有 bitbucket 和 ToritoiseHg 的子存储库

> ID：13750664
> 
> 赞同：5
> 
> 时间：2012-12-06T19:03:21.573
> 
> 标签：mercurial, tortoisehg, bitbucket, subrepos, mercurial-subrepos

我在 TortoiseHg 中有如下子存储库结构：

```
/MainFolder/
/MainFolder/SubFolder1
/MainFolder/SubFolder2 
```

MainFolder 是 bitbucket 上的私有存储库 SubFolder1 是 bitbucket 上的私有存储库 SubFolder2 是 bitbucket 上的私有存储库

MainFolder 中的 .hgsub 文件如下所示：

```
SubFolder1 = SubFolder1
SubFolder2 = SubFolder2 
```

MainFolder 中的 .hgsubstat 文件也具有有效的 guid 和子存储库名称。

问题是每当我尝试为 MainFolder 推送到 bitbucket 时，首先它推送 MainFolder，然后是 SubFolder1，但是当它到达 SubFolder2 时，TortoiseHg 抛出错误“中止：存储库不相关”。

当我在 bitbucket 上检查我的 MainFolder 存储库时，它实际上具有 SubFolder1 的内容（它应该在那里列为子存储库）。

如何解决此问题，以便将 MainFolder 正确上传为父存储库，并将 SubFolder1 和 SubFolder2 列为其在 bitbucket 上的子存储库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T23:21:29.477

bitbucket 文档中显示的[示例](https://bitbucket.org/kiilerix/subrepodemo/)需要重命名存储库，以便将所有存储库命名为*MainRepository-SubRepository*。我不想重命名我的所有存储库，因此修改了正则表达式，如下例所示，它现在可以正常工作。此版本不需要仓库名称中的破折号分隔符，主仓库和子仓库可以独立命名。.hgsub 示例如下所示：

```
SubFolder1 = SubFolder1
SubFolder2 = SubFolder2
[subpaths]
(https://(?:[^@]+@)?bitbucket\.org/[^/]+)(/[^/]+)/(.*) = \1/\3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-12T03:24:46.237

Bitbucket 不会在原地进行子存储库。因此，Mercurial 试图将您的每个存储库推送到同一位置，并在您尝试将存储库 SubFolder2 推送到 SubFolder1 存储库的远程副本时抱怨。

子存储库表面上是在多个项目之间共享的库，因此不存在于任何一个主存储库下，而是存在于它们自己的空间中。因此，您必须创建单独的远程存储库来容纳每个子存储库（库）并在 .hgsub 文件中引用该单独的远程路径。

例如，您的示例项目可能有三个 bitbucket 托管的存储库

```
https://bitbucket.org/bitbucketname/main_project
https://bitbucket.org/bitbucketname/library1
https://bitbucket.org/bitbucketname/library2 
```

您希望本地克隆的文件空间如下所示：

```
/MainFolder/
/MainFolder/SubFolder1
/MainFolder/SubFolder2 
```

在 main_project (MainFolder) 的本地克隆中，将父存储库的默认路径设置为`https://bitbucket.org/bitbucketname/main_project`

即，`/MainFolder/.hg/hgrc`包含

```
[paths]
default = https://bitbucket.org/bitbucketname/main_project 
```

现在，在 .hgsub 文件中指明子存储库/库的远程路径。.hgsub 条目的一般格式为：

```
local/path/to/subrepo = remote/path/to/matching/library 
```

因此，您的 .hgsub 可能包含相对的本地和远程路径（相对于本地或远程主仓库的位置，视情况而定）：

```
SubFolder1 = ../library1
SubFolder2 = ../library2 
```

或具有到每个库的远程仓库的绝对路径的相对本地路径：

```
SubFolder1 = https://bitbucket.org/bitbucketname/library1
SubFolder2 = https://bitbucket.org/bitbucketname/library2 
```

或一切的绝对路径：

```
/MainFolder/SubFolder1 = https://bitbucket.org/bitbucketname/library1
/MainFolder/SubFolder2 = https://bitbucket.org/bitbucketname/library2 
```

现在，当您从本地主项目推送时，Mercurial 确切地知道在哪里可以找到所有子存储库（本地）以及在哪里推送对每个库所做的更改（远程）。

此外，假设您想将其他人的库添加到您的项目中。然后你的 .hgsub 可能看起来像这样：

```
SubFolder1 = ../library1
SubFolder2 = ../library2
another_library = https://bitbucket.org/honkaboy/honkaboys_excellent_library 
```

# sql - 没有聚合的简单（？）PIVOT

> ID：13750667
> 
> 赞同：1
> 
> 时间：2012-12-06T19:03:40.573
> 
> 标签：sql, sql-server, tsql, pivot

枢轴，伙计……我只是想念它。也许是因为我没有做聚合。哎呀，也许枢轴不是做到这一点的方法。感觉它应该很简单，但它让我难住了。

假设我有这个：

```
SELECT col1
FROM tbl1

col1
====
414
589 
```

我怎样才能得到这两条记录：

```
fauxfield1  fauxfield2
==========  ==========
414         589 
```

出于这个问题的目的，有几个注意事项

*   我**永远不会**拿回超过两条记录
*   我总是要取回整数，但*我不知道它们会是什么*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:10:30.343

如果你*只有*两个值，你可以这样做

```
select
    (select top(1) col1 from tbl1 order by col1) fauxfield1,
    (select top(1) col1 from tbl1 order by col1 desc) fauxfield2; 
```

但是我不明白为什么需要避免聚合？您是否找到了一些残缺的 SQL Server 版本？正常的查询是

```
select min(col1) fauxfield1, max(col1) fauxfield2
  from tbl1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:11:38.923

如果你知道你只得到两个，为什么不这样：

```
SELECT 
    MIN(col1) ff1
    , CASE MAX(col1) 
        WHEN MIN(col1) THEN NULL
        ELSE MAX(col1)
      END ff2
FROM 
    tbl1; 
```

如果有两个值，这只会显示第二个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:13:50.367

您可以实现`PIVOT`运算符：

```
select [1] as field1,
  [2] as field2
from
(
  select col1, row_number() Over(order by col1) rn
  from yourtable
) src
pivot
(
  max(col1)
  for rn in ([1], [2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/72c42/2)

# python - 带有属性装饰器的python dictmixin对象

> ID：13750670
> 
> 赞同：1
> 
> 时间：2012-12-06T19:04:02.633
> 
> 标签：python, properties, dictmixin

我被指示使用更多的 Python 方式的 setter 和 getter @property。所以我们有这样的事情：

```
from UserDict import DictMixin

class A(dict):
    def __init__(self, a, b):
        self.a = a
        self.b = b

    @property
    def a(self):
        return self._a

    @a.setter
    def a(self, value):
        self._a = value

    def __getitem__(self, key):
        return getattr(self, key)

    def __setitem__(self, key, value):
        setattr(self, key, value)

    def keys(self):
        return [k for k in self.__dict__.keys() if not k.startswith('_')]

    def do_whatever(self):
        pass

a = A(1,2)
print a.keys() 
```

输出是 ['b'] 起初我没想到，但它实际上是有道理的。

问题是如何获取所有属性名称而不是方法名称。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T00:12:33.483

属性作为[描述符](http://docs.python.org/2/reference/datamodel.html#descriptors)实现，因此属于*类*，而不是*实例*：

```
>>> class Question(object):
...     @property
...     def answer(self):
...         return 7 * 6
... 
>>> q = Question()
>>> q.answer
42
>>> q.__dict__
{}
>>> for key, value in Question.__dict__.iteritems():
...     if isinstance(value, property):
...         print key
...
answer 
```

# sql - SQL 从逗号分隔列表中选择值

> ID：13750672
> 
> 赞同：0
> 
> 时间：2012-12-06T19:04:08.650
> 
> 标签：sql, sql-server

我的数据库中有一个名为“Notes”的字段。它包含一个逗号分隔的值列表。

我想执行一个只返回“注释”字段中的第一个值的 SELECT 查询。

此查询还将返回数据库中的其他字段。

例如

```
SELECT Name, Phone, Notes (only the first value)
FROM Table1 
```

这可能吗，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:07:21.847

您可以`CHARINDEX`使用`SUBSTRING`：

```
SELECT Name, Phone, SUBSTRING(Notes, 1, CHARINDEX(',', Notes)) AS first_value
FROM Table1 
```

**演示**

```
DECLARE @csv varchar(50)
SET @csv = 'comma after this, and another,'

SELECT SUBSTRING(@csv, 1, CHARINDEX(',', @csv)) AS first_value 
```

**结果**

```
| 第一个值 |
--------------------
| 后面的逗号 |
```

如评论中所述，您应该规范化您的结构，并且在单个属性中存储的值不超过一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:14:04.997

```
SELECT Name, Phone, Left(Notes, CharIndex(',', Notes + ',')) FirstNote
  FROM Table1 
```

您需要`Notes + ','`CharIndex 中的位才能正常工作 - 请参阅此示例（我已包含 njk 的答案）

```
with Table1(Name, Phone, Notes) as (
    select 'abc', '123', 'Some,notes,here' union all
    select 'abd', '124', 'Single-note' union all
    select 'abe', '125', '' union all
    select 'syz', '126', null
)
---
SELECT Name, Phone, Left(Notes, CharIndex(',', Notes + ',')-1) FirstNote
       ,SUBSTRING(Notes, 0, CHARINDEX(',', Notes)) AS njk
  FROM Table1 
```

结果

```
Name Phone FirstNote       njk
---- ----- --------------- ---------------
abc  123   Some            Some
abd  124   Single-note     
abe  125                   
syz  126   NULL            NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-05T04:25:33.637

```
SELECT name,
   phones, 
   split_part(notes, ',', 1) as first_notes  
FROM Table1 
```

从逗号分隔列表中选择值的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-18T19:11:33.393

我正在寻找一个更一般的答案（不仅仅是第一个字段，而是一个任意指定的），所以我修改了 Kermit 的答案并将其放入一个函数中。这是以防万一它有助于节省其他人的时间

```
CREATE FUNCTION [dbo].[fnGetFieldXFromDelimitedList] (@SearchIn nvarchar(max)
    , @Delimiter char(1), @FieldNum int ) RETURNS nvarchar(max) as BEGIN
/*
fnGetFieldXFromDelimitedList(@SearchIn, @Delimiter, @FieldNum)
Returns the Nth value (specified by @FieldNum, first is 1 not 0)
    from @SearchIn assuming @SearchIn is a list of multiple values
    delimited by @Delimiter

DECLARE @SearchIn nvarchar(max) = 'F1, Field 2, F3,, F5, F6, F7'
DECLARE @Delimiter char(1) = ','
DECLARE @FieldNum int = 7
--*/
--SELECT dbo.fnGetFieldXFromDelimitedList ('F1, Field 2, F3,, F5, F6, F7', ',', 5)
DECLARE @PosStart int = 1 --SUBSTRING(SearchIn, StartPos, StrLen) considers 1 the first character
DECLARE @PosEnd INT = LEN(@SearchIn)
DECLARE @TempString nvarchar(max) = CONCAT(@SearchIn, @Delimiter)
DECLARE @TempNum INT = 1
DECLARE @RetVal nvarchar(max) = ''

--SElECT SUBSTRING(@SearchIn, 1, 1) 
SET @PosEnd = CHARINDEX(@Delimiter, @TempString, @PosStart + LEN(@Delimiter))
WHILE @TempNum < @FieldNum AND @PosStart > 0 AND @PosStart < LEN(@TempString) BEGIN
    SET @PosStart = CHARINDEX(@Delimiter, @TempString, @PosStart) + LEN(@Delimiter)
    SET @PosEnd = CHARINDEX(@Delimiter, @TempString, @PosStart)
    SET @TempNum = @TempNum + 1
    --SELECT @PosStart, @PosEnd , @TempNum 
END --WHILE

IF @TempNum = @FieldNum AND @PosEnd > 0 BEGIN
    SET @RetVal = SUBSTRING(@TempString, @PosStart, @PosEnd - @PosStart)
END ELSE BEGIN
    SET @RetVal = NULL
END

--SELECT @RetVal
RETURN @RetVal
END 
```

# tsql - 如何将一个数据库中的记录插入到另一台服务器上的另一个数据库中？

> ID：13750679
> 
> 赞同：0
> 
> 时间：2012-12-06T19:04:45.173
> 
> 标签：tsql, sybase

我想从 SOURCE 数据库中的表中获取记录，并将这些记录插入到具有不同登录凭据的不同服务器上的 DESTINATION 数据库中的表中。

有人可以提供有关如何使用 Sybase TSQL 完成此操作的要点吗？或者这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:04:06.287

您可以使用如下代理表：

```
exec sp_addserver 'SvrName', null, '[ip or hostname]:port'
exec sp_addexternlogin 'SvrName', LocalUserName, ExternalUserName, ExternalPassword

create proxy_table proxy_src_tab at 'SvrName.ExternalDb.db_owner.src_table'

insert into dest_tab
select column1,..., columnN from proxy_src_tab 
```

# c# - 如何将匿名类型分配给模型？

> ID：13750681
> 
> 赞同：-2
> 
> 时间：2012-12-06T19:04:48.877
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, anonymous-types

如何将匿名类型分配给模型？使用 ViewBag 我可以很容易地像这样分配：

```
ViewBag.certType = comboType.ToList(); 
```

我正在从我的系统中删除所有 ViewBags，现在我正在尝试这样：

```
model.storeLocations = comboType.ToList(); 
```

我收到以下错误：

```
 Cannot implicitly convert type 'System.Collections.Generic.List<AnonymousType#1>' 
to 'int'    S:\Projects\tgpwebged\tgpwebged\Controllers\AdminController.cs  
376 40  tgpwebged 
```

**模型：**

```
public class TipoDocumentoModel
    {
        public sistema_DocType Type { get; set; }
        public IEnumerable<string> Indices { get; set; }
        public IEnumerable<string> NonAssoIndices { get; set; }
        public int storeLocations { get; set; }
    } 
```

**控制器：**

```
public ActionResult AdminSettingAddTipo()
    {
        SettingsModels.TipoDocumentoModel model = new SettingsModels.TipoDocumentoModel();

        //Pega os indices e locais de armazenamentos cadastrados no sistema
        using (tgpwebgedEntities context = new tgpwebgedEntities())
        {
            var obj = from u in context.sistema_Indexes select u.idName;
            model.Indices = obj.ToList();

            var comboType = from c in context.sistema_Armazenamento
                            select new
                            {
                                id = c.id,
                                local = c.caminhoRepositorio
                            };

            model.storeLocations = comboType.ToList();
        }

        return PartialView(model);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:18:15.187

第一个问题是您试图将一个`List<>`项目分配给一个`int`属性。

从匿名投影中提取命名类的简单方法。

```
//model
public List<MyClass> storeLocations { get; set; }

//snip
var comboType = from c in context.sistema_Armazenamento
                select new MyClass
                        {
                            id = c.id,
                            local = c.caminhoRepositorio
                        };

storeLocations = comboType.ToList(); 
```

其他选项

1.  如果您仍然想要动态行为，您可以将您的属性更改为`dynamic`
2.  投影到一个`Tuple<int, string>()`（猜测第二种）
3.  如果最终结果是一个下拉列表，您可以投影到`SelectList()`

# javascript - Facebook 中奇怪的 JSONP 响应

> ID：13750682
> 
> 赞同：3
> 
> 时间：2012-12-06T19:04:59.447
> 
> 标签：javascript, ajax, jsonp

我想知道使用以下 JSONP 响应语法的原因是什么：

在 URL 下：[https ://ect.channel.facebook.com/probe?mode=stream&format=json](https://ect.channel.facebook.com/probe?mode=stream&format=json)

有：

```
for (;;); {"t":"heartbeat"}
{"t":"heartbeat"}
{"t":"continue","seq":0} 
```

`for(;;);`我的问题是，这个 JSONP 响应到底做了什么。它是如何解析的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:09:11.887

这不是 JSONP；它是 JSON，如果用作 JSONP，它会被故意修改为失败。

如果您在标签中包含该 URL `<script>`，它会将浏览器冻结在无限`for`循环中。

这可以防止攻击者将其包含在外部站点中并调用`Object.defineProperty`以创建 setter 函数并绕过 SOP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:07:19.293

这是出于安全原因。JSONP*实际上*不是JSON，它是一个执行的 JavaScript 文件。

它就`for(;;);`在那里，因此如果人们（Facebook 以外的人）试图访问该文件，他们就无法访问。

注意：这不是 JSONP，但您的浏览器不知道。它会尝试运行它，然后陷入无限循环。

# r - 将函数应用于指定范围；变化率

> ID：13750683
> 
> 赞同：1
> 
> 时间：2012-12-06T19:05:01.047
> 
> 标签：r, apply

> **可能重复：**
> [在 R 中计算移动平均线](https://stackoverflow.com/questions/743812/calculating-moving-average-in-r)

我在 R 中编写了一个变化率函数，定义为：

```
rateChange <- function(x) ((last(x)-first(x))/first(x))*100 
```

它适用于各种日期范围，例如 5 天、10 天、200 天等的变化率。但是，我现在需要在每天之间应用此功能。例如，要确定 5 天的变化率，需要过去 6 次数据观察。

这是 Excel 中的一个示例，为清楚起见，我试图重现“变化率”列：

![数据](../Images/e3023b2de66c0a9fb99772f4c3170770.png)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:42:20.030

我建议使用`TTR::ROC`：

```
library(TTR)
roc <- c(18.89, 18.93, 18.55, 18.77, 18.87, 18.91)
ROC(roc, type="discrete")*100
# [1]         NA  0.2117522 -2.0073957  1.1859838  0.5327651  0.2119767 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T19:23:39.077

```
x <- rnorm(5)
x
#[1] -0.48504744 -1.71843913  0.03890147 -2.11410329 -1.59765182
100*(tail(x, -1) - head(x, -1))/head(x, -1)
#[1]   254.28269  -102.26377 -5534.50754  -24.42887 
```

如果您需要它与输入向量的长度相同，您可以像这样在末尾添加一个 NA

```
c(100*(tail(x, -1) - head(x, -1))/head(x, -1), NA) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:18:14.577

这很接近，但数学（结果）并不完全相同：

```
 roc <- c(18.89, 18.93, 18.55, 18.77, 18.87, 18.91)
 sapply(seq_along(roc)[-1], function(i) 100*(roc[i] - roc[i-1])/roc[i-1]) 
```

# vb.net - 如何通过列名开头的字符串搜索 SQL Server 数据库中的列？

> ID：13750684
> 
> 赞同：0
> 
> 时间：2012-12-06T19:05:00.453
> 
> 标签：vb.net, sql-server-2008, datagridview

我有一个填充数据表的 SQL Server 数据库，该数据表是 datagridview 控件的数据源。我想隐藏 datagridview 控件中以字符串开头的所有列：

```
strColumnName = "Checkpoint " & intCheckpointNumber 
```

我怎样才能做到这一点？我正在使用 VB2010。

我结束的地方，显然不起作用的是以下内容：

```
Do While intCheckpoint < intTotalCheckPoints
    If Me.datagridview.Columns ' I cannot figure out how to insert something along the lines of Name.StartsWith(strColumnName)' Then 
        'Hide this column with something along the lines of 'Me.datagridview.Columns(strColumnName).Visible = False
    End If
    intCheckPoint += 1
Loop 
```

我不知道如何根据它们的名称开头隐藏列。

谢谢

好的，我已经修改了我的代码，结果如下：

```
Try
    Do    
        If m_DataTable.Columns.Contains("Checkpoint " & intCheckPointNumber & " Time") Then    

            Dim tabNewCheckpoint As New TabPage
            Dim dgvNewCheckpoint As New DataGridView

            tabNewCheckpoint.Name = "tabCheckpoint" & intCheckPointNumber
            tabNewCheckpoint.Text = "Checkpoint " & intCheckPointNumber
            tabctrlTimingTable.TabPages.Add(tabNewCheckpoint)

            dgvNewCheckpoint.Name = "dgvCheckpoint" & intCheckPointNumber
            dgvNewCheckpoint.DataSource = m_DataTable
            dgvNewCheckpoint.Size = dgvTimingP2P.Size
            tabNewCheckpoint.Controls.Add(dgvNewCheckpoint)

            strColumnName = "Checkpoint " & intCheckPointNumber
            For Each col As DataGridViewColumn In dgvNewCheckpoint.Columns
                MessageBox.Show(col.Name)
                If col.Name.StartsWith("Checkpoint") Then
                    If Not col.Name.StartsWith(strColumnName) Then
                        col.Visible = False
                    End If
                End If
            Next
        Else
            Exit Do
        End If
        intCheckPointNumber += 1
    Loop
Catch ex As Exception
    'MessageBox.Show(ErrorToString)
End Try 
```

我现在遇到的问题是这些列仍然没有隐藏。如果我在程序中插入停止，我可以看到代码甚至没有处理 For...Next 循环。什么会导致这个？

谢谢

好的，现在我已经改变了：

```
For Each col As DataGridViewColumn In dgvNewCheckpoint.Columns
    MessageBox.Show(col.Name)
    If col.Name.StartsWith("Checkpoint") Then
        If Not col.Name.StartsWith(strColumnName) Then
            col.Visible = False
        End If
    End If
Next 
```

至：

```
For Each col As DataColumn In m_DataTable.Columns
    MessageBox.Show(col.ColumnName)
    If col.ColumnName.StartsWith("Checkpoint") Then
        If Not col.ColumnName.StartsWith(strColumnName) Then
            dgvNewCheckpoint.Columns(col.ColumnName).Visible = False
        End If
    End If
Next 
```

它给了我一个错误：“对象引用未设置为对象的实例”，但 datagridview 列与数据表列具有相同的名称，所以我看不出这是怎么可能的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:32:12.817

移动线路：

```
tabNewCheckpoint.Controls.Add(dgvNewCheckpoint) 
```

紧随其后：

```
tabctrlTimingTable.TabPages.Add(tabNewCheckpoint) 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:11:46.697

假设您知道如何隐藏 DataGridView 中的列，我会使用[StartsWith()](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)。

# python - 二维板的 Python 检查列表

> ID：13750685
> 
> 赞同：2
> 
> 时间：2012-12-06T19:05:00.843
> 
> 标签：python, list

假设我有一个这样的列表：

```
board = 
[[0, 0, 0, 0, 0,], 
[0, 0, 0, 0, 0,], 
[0, 0, 0, 0, 0,], 
[0, 0, 0, 0, 0,], 
[0, 0, 0, 0, 0,] 
```

表示二维板上的空间。
如果玩家一去，它将变为 1。
如果玩家二去，它将变为 2。

获胜条件是：如果一行或一列被完全填满，或者对角线。

以下是我对水平或垂直赢家的功能：

```
def horizontal_winner(board, boxes):
    '''
    function will find if the horizontal win conditions apply
    given 2 inputs. the board, a list and the number of boxes
    - board - the 2D board of the game
    - boxes - number of boxes per side
    ''' 
    for i in range(boxes):
        player_1 = 0
        player_2 = 0
        for j in range(boxes):
            if board[i][j] == 1:# first iteration - [1, 0, 0, 0, 0]
                player_1 += 1
                print("p1: " + str(player_1))
            elif board[i][j] == 2:# first iteration - [2, 0, 0, 0, 0]
                player_2 += 1
                print("p2: " + str(player_2))
        if player_1 == boxes:
            return True
        elif player_2 == boxes:
            return False

def vertical_winner(board, boxes):
    '''
    function will find if the vertical win conditions apply
    given 2 inputs. the board, a list and the number of boxes per side
    - board - the 2D board of the game
    - boxes - number of boxes per side
    '''
    for i in range(boxes):
        player_1 = 0
        player_2 = 0 
        for j in range(boxes):
            if board[j][i] == 1:# first iteration - [1, 0, 0, 0, 0]
                player_1 += 1
            elif board[j][i] == 2:# first iteration - [2, 0, 0, 0, 0]
                player_2 += 1
        if player_1 == boxes:
            return True
        elif player_2 == boxes:
            return False 
```

我将如何检查对角线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:09:10.997

首先，认识到只有两条对角线。对于范围（boxes）中的某些 i，它们上每个框的坐标是（i，i）或（boxes-i-1，i）。那应该可以帮助您弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:08:41.760

尝试这样的事情，使用`all()`：

从`i=0`to开始`i=len(board)-1`，可以使用以下方法获取对角线元素`board[i][i]`：

```
In [116]: board=[[1, 0, 0, 0, 0,], 
[0, 1, 0, 0, 0,], 
[0, 0, 1, 0, 0,], 
[0, 0, 0, 1, 0,], 
[0, 0, 0, 0, 1,]]

In [117]: all(board[i][i]==board[0][0] for  i in range(len(board)))
Out[117]: True

In [119]: [board[i][i] for  i in range(len(board))]  #value of diagonal elements
Out[119]: [1, 1, 1, 1, 1]

# another example:

In [120]: board=[[0, 0, 0, 0, 0,], 
[0, 1, 0, 0, 0,], 
[0, 0, 1, 0, 0,], 
[0, 0, 0, 1, 0,], 
[0, 0, 0, 0, 1,]]

In [121]: [board[i][i] for  i in range(len(board))]
Out[121]: [0, 1, 1, 1, 1]

In [122]: all(board[i][i]==board[0][0] for  i in range(len(board)))
Out[122]: False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:44:40.073

您必须分别考虑四种情况。我将举例说明

单行中的连续 1

```
>>> board1 =[[0, 0, 0, 0, 0,],
[1, 1, 1, 1, 1,],
[0, 0, 0, 0, 0,],
[0, 0, 0, 0, 0,],
[0, 0, 0, 0, 0,]]
>>> any(map(all,board1))
True 
```

单列中的连续 1

```
>>> board2 =[[0, 1, 0, 0, 0,],
[0, 1, 0, 0, 0,],
[0, 1, 0, 0, 0,],
[0, 1, 0, 0, 0,],
[0, 1, 0, 0, 0,]]
>>> any(map(all,zip(*board2)))
True 
```

前对角线中的连续 1

```
>>> board3 =[[1, 0, 0, 0, 0,],
[0, 1, 0, 0, 0,],
[0, 0, 1, 0, 0,],
[0, 0, 0, 1, 0,],
[0, 0, 0, 0, 1,]]
>>> all(list(islice(chain(*board3),0,None,len(board4)+1)))
True 
```

反向对角线上的连续 1

```
>>> board4 =[[0, 0, 0, 0, 1,],
[0, 0, 0, 1, 0,],
[0, 0, 1, 0, 0,],
[0, 1, 0, 0, 0,],
[1, 0, 0, 0, 0,]]
>>> all(list(islice(chain(*reversed(board4)),0,None,len(board4)+1)))
True 
```

所以总结一下

```
from itertools import chain, isclice
any(any(map(all,board)),
    any(map(all,zip(*board))),
    all(list(islice(chain(*board),0,None,len(board4)+1))),
    all(list(islice(chain(*reversed(board)),0,None,len(board4)+1)))) 
```

# ruby-on-rails - rails assets：在 slug 期间预编译 s3 错误：设置 env 时，雾提供程序和目录不能为空

> ID：13750690
> 
> 赞同：2
> 
> 时间：2012-12-06T19:05:25.943
> 
> 标签：ruby-on-rails, heroku, amazon-s3, assets

我决定通过 S3 为 Rails 资产提供服务；heroku 有关于如何做到这一点的很棒的教程。该站点现在正在从我的亚马逊存储桶中提供资产，但我不确定为什么我必须`heroku run rake assets:precompile`在`git push heroku master`运行`rake assets:precompile`.

在运行`git push heroku master`不在我的存储桶中的资产之后，预编译内容的输出是：

```
AssetSync: using default configuration from built-in initializer
       AssetSync: using default configuration from built-in initializer
       rake aborted!
       Fog provider can't be blank, Fog directory can't be blank
       /tmp/build_3vtwfg15g8ajx/vendor/bundle/ruby/1.9.1/gems/asset_sync-0.5.0/lib/asset_sync/asset_sync.rb:29:in `sync'
       /tmp/build_3vtwfg15g8ajx/vendor/bundle/ruby/1.9.1/gems/asset_sync-0.5.0/lib/tasks/asset_sync.rake:3:in `block in <top (required)>'
       Tasks: TOP => assets:precompile:nondigest
       (See full trace by running task with --trace)
       Precompiling assets failed, enabling runtime asset compilation
       Injecting rails31_enable_runtime_asset_compilation 
```

我确实设置了雾提供程序和目录：`heroku config:add FOG_DIRECTORY=XXX FOD_PROVIDER=AWS`并调用 heroku config --app 确认了这一点......所以我没有收到这些错误。

资产没有出现在我的存储桶中，所以我跑了：`heroku run rake assets:precompile`一切正常，并发出警告：

```
AssetSync: using default configuration from built-in initializer
AssetSync: Syncing.
[WARNING] fog: the specified s3 bucket name(ss_assets) is not a valid dns name, which will negatively impact performance.  For details see: http://docs.amazonwebservices.com/AmazonS3/latest/dev/Bucket
Restrictions.html 
```

我是否总是必须在推送失败之后运行预编译任务并且可以接受？我将检查目录名称的警告是否导致推送时出现空白 FOG 错误

**再次编辑** asset_sync在heroku推送的assets:precompile任务中调用时似乎没有ENV变量。推送后运行该任务但它“烦人”。

仍然不适合我，最近的尝试是（每个[asset_sync github项目](https://github.com/rumblelabs/asset_sync/issues/41)）：

lib/tasks/asset_sync.rake。

```
Rake::Task['assets:precompile'].enhance do
  AssetSync.sync
end

Rake::Task["assets:precompile:nondigest"].enhance do
  AssetSync.sync
end 
```

我还尝试在我的 production.rb 文件中添加行，例如：

```
 config.asset_sync.aws_bucket = ENV['FOG_DIRECTORY']
  config.asset_sync.fog_provider = ENV['FOG_PROVIDER'] 
```

也没有为我工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T01:01:39.493

从[asset_sync docs Labs部分运行在下面](https://github.com/rumblelabs/asset_sync)

```
heroku labs:enable user-env-compile -a myapp 
```

尚未将其作为标准进入平台！

# javascript - 如何使用文本表单和提交按钮更改视频网址？

> ID：13750693
> 
> 赞同：0
> 
> 时间：2012-12-06T19:05:31.677
> 
> 标签：javascript, html, forms, video, replace

我正在尝试使我的网站在表单上有一个文本框和一个提交按钮。当用户在文本框中输入视频的 URL 并单击提交时，JavaScript 应该用该 URL 替换特定的文本块。

这是我的代码。我是 JavaScript 新手，提前感谢您的帮助！：

```
<!doctype html>
<html>
<head>
<meta type="utf-8">
<title> Vid_hack </title>
</head>
<style type="text/css">
a:link { color: #CC0000 ; text-decoration: bold}
a:active { color: #CC0000 ; text-decoration: none}
a:visited { color: #CC0000; text-decoration: none}
a:hover { color: #FFFFFF; text-decoration: bold; background: #336699}

body {

background-color: #222222;

}
</style>
<body>
<div align="center">
<p center="" style="background: #444444; border-radius: 15px; border: solid 3.0pt white; padding: 10px">

<object><param name="allowfullscreen" value="true"></param><p id="url"><embed src="INSERT-VIDEO-URL-HERE" type="application/x-shockwave-flash" allowfullscreen="1" width="800" height="600"></embed></p></object>

<BR>
<BR>
<form method="post">
<input type="text" name="vid" value="Insert URL here" maxlength="200" />
<br>
<button onclick="return vid()">Play</button>
</form>

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.js"></script>
<script>
function vid()
{
var txt = $("#vid").attr("value");
$("#url embed").attr("src",txt);
return false;
}
</script>
<BR>
<BR>
<BR>
<span style="color: #FFF" align="center">
<BR>
<BR>
Please view the included README file for more information.
</span>
</p>
</div>
<BR>
<BR>
<BR>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:32:11.000

这依赖于jquery

```
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.js"></script>
<script>
var flash_wrapper = 
'<object><param name="allowfullscreen" value="true"></param><p id="url"><embed  src="INSERT-VIDEO-URL-HERE" type="application/x-shockwave-flash" allowfullscreen="1" width="800" height="600"></embed></p></object>'

document.write(flash_wrapper)
</script>
<BR>
<BR>
<form method="post">
<input type="text" id="first_name" value="Insert URL here" maxlength="100" />
<br>
<button onclick="return vid()">Play</button>
</form>

<script>
function vid()
{ 
    var txt = $("#first_name").attr("value");
    $("#url embed").attr("src",txt);
    return false; 
}
</script>​ 
```

试试看 [http://jsfiddle.net/axrwkr/jDhNc/](http://jsfiddle.net/axrwkr/jDhNc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:23:16.263

请注意，在其当前形式中，您只能更改一次视频 URL，因为在第二个按钮单击时，innerHTML 将不再包含 INSERT-VIDEO-URL-HERE，而是包含第一个按钮单击的 URL。这可能需要也可能不需要。

假设这不是意外行为，那么您只需要在将其`n`替换为表单字段中的 url 后将其更改为。见下文

```
function vid()
{
    var str=document.getElementById("url").innerHTML; 
    var n=str.replace("INSERT-VIDEO-URL-HERE", document.forms[0].elements[0].value);
    document.getElementById("url").innerHTML = n;
} 
```

请注意，这只是一个快速解决方案，它在不知道周围 HTML 的情况下做出几个假设。有几件事可以整体改进代码：

1.  避免 document.write。至少，将闪存添加到包装器并执行类似的操作`document.getElementsById('#flash_wrapper').innerHTML = flash_wrapper;`
2.  避免内联 javascript 事件（例如使用 onclick 属性）。[http://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)

如果您计划在未来编写更多与页面内容交互的 javascript，我建议您在[http://jquery.com](http://jquery.com)学习 jQuery，因为它可以解决很多问题，而且学习起来非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:18:39.953

我想你想这样做：

```
<script>
var flash_wrapper = 
'<object><param name="allowfullscreen" value="true"></param><p id="url"><embed src="INSERT-VIDEO-URL-HERE" type="application/x-shockwave-flash" allowfullscreen="1" width="800" height="600"></embed></p></object>'

document.write(flash_wrapper)
</script>

</script>
<BR>
<BR>
<form method="post" name="myForm" onsubmit="return valid()">
<input type="text" name="first_name" value="Insert URL here" maxlength="100" />
<br>
<button>Play</button>
</form>

<script>
function valid(){
    var url = document.myForm.first_name.value;
    var str = document.getElementById("url").innerHTML; 
    var n = str.replace("INSERT-VIDEO-URL-HERE", url);
    document.getElementById("url").innerHTML = n;
    return false;
}
</script> 
```

更喜欢将 onsubmit 放在表单上，​​因为如果用户按下回车键而不点击按钮，他会绕过验证。我完成了您在 html 中替换 url 的代码，并在函数末尾添加 return false 以防止提交表单，否则它会重新加载页面。

# php - php文件嵌入jquery时的奇怪字符

> ID：13750706
> 
> 赞同：0
> 
> 时间：2012-12-06T19:06:32.683
> 
> 标签：php, jquery, character

我在通过 jquery 显示 php 文件的内容时遇到问题。内容是[http://pastebin.com/V8RxqPe3](http://pastebin.com/V8RxqPe3)

这是我的问题：如果该内容在 mysql 数据库中，则`content.php`文件查询以获取该内容并回显它。当我打开 localhost/content.php 时，一切都很好。但是，如果我通过 jquery（如下）显示内容，我会得到一些黑色问号（奇怪的字符）。

```
<div id="results"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
     $(function() {
         $.get('http://localhost/content.php', function(data) {
             $('#results').html(data);
         });
     });
</script> 
```

当我手动替换所有`'`内容`\'`并将整个内容放入`content.php`文件中的变量中时，然后通过上面相同的 jquery 脚本回显该变量，一切都很好。

有谁知道如何解决这个问题？，因为我的数据库中有很多这样的内容，我想通过上面的 jquery 脚本显示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:08:48.790

您的页面和 mysql 连接是否设置为 utf-8 ？

# python-3.x - 为什么 print('\n') * 100 在 Python 3.3 中不起作用？

> ID：13750707
> 
> 赞同：0
> 
> 时间：2012-12-06T19:06:33.253
> 
> 标签：python-3.x, python-2.7

我正在尝试清除 Python 中的代码行，并在[任何方式清除 Python 的 IDLE 窗口？](https://stackoverflow.com/questions/1432480/any-way-to-clear-python-shell)但是，当我在 IDLE 3.3 中运行下面的函数时，我得到了下面的错误。然而，它在 2.7.3 版本中工作。

**错误**

```
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    cls()
  File "<pyshell#6>", line 2, in cls
    print('\n') * 100
TypeError: unsupported operand type(s) for *: 'NoneType' and 'int' 
```

**代码**

```
def cls():
    print('\n') * 100 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:08:38.597

你大概是说

```
print('\n' * 100) 
```

当你将一个字符串乘以一个 int 时，它会重复：

```
>>> 'ha' * 3
'hahaha' 
```

但是你所做的是将`print('\n')`by的值相乘`100`。但`print()`不返回任何东西（阅读：返回`None`），因此错误：你不能乘以`None`and `int`。

在 Python 2 中没有区别，因为没有括号：

```
print '\n' * 100 
```

尽管如此，Python 对它的解释方式与 Python 3 中的方式相同（与您似乎解释它的方式不同）。

# mysql - 选择进入oufile不起作用

> ID：13750709
> 
> 赞同：-2
> 
> 时间：2012-12-06T19:06:43.493
> 
> 标签：mysql, select, select-into, select-into-outfile

为什么以下查询似乎运行但我永远找不到文件 outfile？

```
 select * 
      INTO OUTFILE 'outfile.csv'
      FIELDS TERMINATED by ','
      LINES TERMINATED BY '\n'
      from nGrams 
```

我有 MySQL 5.5，我正在从 MySQL Workbench 运行我的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:29:15.433

The file 'outfile.csv' will appear in the same directory as your database. On windows this is C:\ProgramData\MySQL\MySqlServerX.X\db_name

# qt - 错误：'QDialog::QDialog(const QDialog&)' 是私有的

> ID：13750711
> 
> 赞同：0
> 
> 时间：2012-12-06T19:06:53.213
> 
> 标签：qt

正如标题所示，我在此片段的内容中收到此错误：

```
class NewTaskDialog : public QDialog 
```

它之前工作得很好，但是当我添加方法时开始出现错误：

```
void MainWindow::saveButtonClicked(NewTaskDialog dialogWindow) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:06:11.390

请改用指向 QDialog 的指针。QDialog 类将复制构造函数定义为私有，以尝试阻止您按值传递 QDialog，因为您永远不应该这样做。

[c++中私有复制构造函数有什么用](https://stackoverflow.com/questions/6811037/whats-the-use-of-the-private-copy-constructor-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:53:43.070

您的语法创建了传递给它`saveButtonClicked`的副本。[您不能复制 QWidgets](https://stackoverflow.com/questions/6809596/duplicate-a-qwidget)，除非您创建一个明确提供您所寻求的确切功能的克隆函数。QWidget 的构造函数是私有的。`NewTaskDialog`

你必须传递一个指针

```
void MainWindow::saveButtonClicked(NewTaskDialog* dialogWindow) 
```

或参考。使用指针是标准的 Qt 方式。

# java - 正则表达式 \\s*,\\s* 有什么作用？

> ID：13750716
> 
> 赞同：29
> 
> 时间：2012-12-06T19:07:08.843
> 
> 标签：java, regex, string, split

我想知道这行代码对包含在名为 surl 的字符串中的 url 做了什么？

```
String[] stokens = surl.split("\\s*,\\s*"); 
```

让我们假设这是 surl = "http://myipaddress:8080/Map/MapServer.html" stokens 是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-06T19:10:19.827

该正则表达式`"\\s*,\\s*"`意味着：

*   `\s*`任意数量的空白字符
*   逗号
*   `\s*`任意数量的空白字符

它将以逗号分隔并占用两边的任何空格

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-26T17:40:51.147

*   `\s`代表“空白字符”。
*   它包括`[ \t\n\x0B\f\r]`. 即：`\s`匹配空格 ( ) 或制表符 (\t) 或换行符 (\n) 或垂直制表符 (\x0B 有时称为 \v) 或换页 (\f) 或回车符 (\ r) 。

* * *

```
\\s*,\\s* 
```

它表示零次或多次出现空白字符，后跟一个逗号，然后是零次或多次出现空白字符。

这些被称为简写表达式。

您可以在此站点中找到类似的正则表达式：[http ://www.regular-expressions.info/shorthand.html](http://www.regular-expressions.info/shorthand.html)

# c# - .net 3.5 中的协变

> ID：13750733
> 
> 赞同：2
> 
> 时间：2012-12-06T19:08:22.997
> 
> 标签：c#, generics, collections, .net-3.5, covariance

我正在更多地了解这个世界。在我的测试中，我发现这很奇怪：

```
 [TestMethod]
    public void VarianceTest()
    {
        List<string> listValues = new List<string>();
        string[] arrayValues = listValues.ToArray();
        var result = HelperCoVariant.GetTest<int>(listValues); // error to compile
        var result2 = HelperCoVariant.GetTest<int>(arrayValues); // sucess
    } 
```

任何方法：

```
public static class HelperCoVariant
{
    public static IEnumerable<T> GetTest<T>(this IEnumerable<object> t)
    {
        foreach (var item in t)
        {
            yield return (T)item;
        }
    }
} 
```

我明白了。NET 4 完美运行，因为

> `IEnumerable<out T>`

但是为什么。NET 3.5，有这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:15:38.450

倒数第二行无法编译，因为在 .NET 2/3/3.5`IEnumerable<T>`中没有关键字。`out`由于它没有`out`关键字，因此不能将其视为 T 中的协变。

最后一行编译是因为在 C# 的早期版本中存在数组协方差*。*请参阅[C# 中的协方差和逆变，第二部分：](http://blogs.msdn.com/b/ericlippert/archive/2007/10/17/covariance-and-contravariance-in-c-part-two-array-covariance.aspx) Eric Lippert 的数组协方差。

# unit-testing - 模拟具有工作单元依赖关系的 ApiController

> ID：13750737
> 
> 赞同：3
> 
> 时间：2012-12-06T19:08:35.503
> 
> 标签：unit-testing, mocking, nunit, asp.net-web-api, simple-injector

我有一个`Apicontroller`依赖于工作单元的对象。如何编写模拟测试用例`ApiController`哪个依赖于`ApiController`构造函数中实现的工作单元。

这是代码：

接口控制器：

```
public class UserController : ApiController
{
    public IUoW UoW { get; set; }
    // GET api/user
    public UserController(IUoW uow)
    {
        UoW = uow;
    }

    public IEnumerable<Users> Get()
    {
        return UoW.Users.Getall();
    }     
} 
```

测试用例：

```
[TestMethod]
public void TestApiController()
{
    var userManager = new Mock<IUoW>();
    userManager.Setup(s => s.Users);

    var controller = new UserController(userManager.Object);
    var values = controller.Get();
    Assert.IsNotNull(values);
} 
```

UoW.Users 中提到的用户类是

```
public class UoW:IUoW,IDisposable
{
    private MvcWebApiContext DbContext { get; set; }
    protected IRepositoryProvider RepositoryProvider { get; set; }

    private IRepository<T> GetStandardRepo<T>() where T : class
    {
        return RepositoryProvider.GetRepositoryForEntityType<T>();
    }

    public IRepository<Users> Users
    {
        get { return GetStandardRepo<Users>(); }
    }
} 
```

而`Users`班级本身是

```
[Table("UserProfile")]
public class Users
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }

    [DataType(DataType.PhoneNumber)]
    public long Mobile { get; set; }
} 
```

当我尝试调试测试用例时，测试用例显示对象`UoW.Users`为空`UserController`。很明显它没有初始化，`WebActivator`因为这里没有通过模拟调用 global.asax。现在如何在这种情况下编写一个成功的测试场景，以便`WebApicontroller`返回带有数据的用户对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:24:10.040

你在使用起订量吗？

因为我看不到该`UoW.Users`属性是什么类型，所以我无法演示如何正确模拟它（*更新*的 IRepository），但应该模拟它并且 GetAll 方法存根以返回用户的示例列表。

**更新**

```
 var userManager = new Mock<IUoW>();

        userManager.Setup(s => s.Users).Returns(()=> 
        { 
            var userReposisitory = new Mock<IRepository<Users>>();

            userReposisitory.Setup(ur => ur.GetAll()).Returns(()=> {
                var listOfUsers = new List<Users>();
                listOfUsers.Add(new Users { FirstName = "Example" });
                return listOfUsers.AsQueryable();
            });

            return userReposisitory.Object; 
        });

        var controller = new UserController(userManager.Object);
        var result = controller.Get();
        Assert.IsNotNull(result);
        Assert.IsTrue(result.Count() > 0); 
```

# database - MySQL InnoDB 从备份中恢复

> ID：13750741
> 
> 赞同：1
> 
> 时间：2012-12-06T19:08:43.633
> 
> 标签：database, innodb, recovery, windows-server, mysql

最近我的服务器崩溃了，但幸运的是我对服务器的驱动器进行了完整备份。我的服务器运行的是 Windows server 2008 和 Plesk 9.5。

为了恢复我的数据库，我按照说明操作：替换所有,`ib_logfile0`并添加s/ / 。`ib_logfile1``ibdata1``.frm``.MYI``.MYD`

文件已被替换，mysql 已重新启动。我有以下错误：

```
InnoDB: Error: log file .\ib_logfile0 is of different size 0 10489229 bytes
InnoDB: than specified in the .cnf file 0 10485760 bytes!
121206 19:53:26 [ERROR] Default storage engine (InnoDB) is not available
121206 19:53:26 [ERROR] Aborting
121206 19:53:26 [Note] C:\Program Files (x86)\Parallels\Plesk\Databases\MySQL\bin\mysqld-nt.exe: Shutdown complete 
```

该`my.ini`文件具有以下选项：

```
[client]
port=3306

[mysql]
default-character-set=latin1

[mysqld]
port=3306
basedir="C:/Program Files (x86)/Parallels/Plesk/Databases/MySQL/"
datadir="C:/Program Files (x86)/Parallels/Plesk/Databases/MySQL/Data/"
default-character-set=latin1
default-storage-engine=INNODB
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"
max_connections=100
query_cache_size=0
table_cache=256
tmp_table_size=35M
thread_cache_size=8
myisam_max_sort_file_size=100G
myisam_max_extra_sort_file_size=100G
myisam_sort_buffer_size=69M
key_buffer_size=55M
read_buffer_size=64K
read_rnd_buffer_size=256K
sort_buffer_size=256K
innodb_additional_mem_pool_size=3M
innodb_flush_log_at_trx_commit=1
innodb_log_buffer_size=2M
innodb_buffer_pool_size=107M
innodb_log_file_size=10489229
innodb_thread_concurrency=10 
```

请帮助我，自上周以来我一直在尝试不同的方法，并且已经投入了大约 25 小时，我们将完全欢迎您的帮助！

对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:07:30.890

InnoDB 日志文件具有不同但相似的大小（请阅读错误输出！）。InnoDB 不会以这样的差异开始。您的选择：

*   编辑`my.cnf`文件以匹配当前（报告的）大小。如果日志文件以某种方式损坏，这是一件坏事。
*   删除`iblog`文件并让 InnoDB 在 MySQL 启动时重新创建它们。如果在运行备份时拍摄快照，您可能会丢失一些数据。

# jquery - 如何按第一个字母过滤？

> ID：13750742
> 
> 赞同：0
> 
> 时间：2012-12-06T19:08:52.610
> 
> 标签：jquery, filter, filtering, jquery-isotope

我正在尝试在同位素中设置一个过滤器，该过滤器将仅按标签中文本的第一个字母进行过滤。任何帮助表示赞赏！（JavaScript 新手！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:18:48.800

可以使用正则表达式吗？

```
$('#container').isotope({ filter: '^[^\*]' }); 
```

• 第一个 ^ 表示“在字符串的开头” [ ... ] 构造是一个字符类，它匹配括号内的单个字符

•字符类开头的 ^ 表示“否定字符类”，即匹配任何不属于所列字符之一的字符

• * 表示文字 *；* 在正则表达式中具有特殊含义，所以我用反斜杠对其进行了转义。

Src= [Javascript regexp - 仅当第一个字符不是星号时](https://stackoverflow.com/questions/5293859/javascript-regexp-only-if-first-character-is-not-an-asterix)

# php - 处理请求，然后将其传递到不同的 URL 并让该页面响应

> ID：13750745
> 
> 赞同：1
> 
> 时间：2012-12-06T19:08:59.440
> 
> 标签：php, apache, .htaccess, redirect, httprequest

在通过 Google 电子钱包在我的网站上进行销售后，我可以指定 Google 向其发送请求的 URL。让我们称之为 URL A。然而，我想做的是让请求转到 URL B，让 URL B 做一些事情，然后将确切的请求发送到 URL A。然后 URL A 会响应，并且此响应需要返回给原始调用者（在本例中为 Google）。

原始请求可能包含 POST 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:11:18.043

您可以使用[curl](http://php.net/manual/en/book.curl.php)将收到的 POST 转发到另一个 URL：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($_POST)); 
```

请注意使用[http_build_query](http://php.net/manual/en/function.http-build-query.php)从 $_POST 数组创建 URL 编码的查询字符串。你可能需要做类似的事情。

A tool like [Fiddler](http://www.fiddler2.com/fiddler2/) can be a useful tool in testing/debugging the code you will write.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:18:11.077

网址一：

```
if(!isset($_SESSION['processed'])){
    $_SESSION['request'] = $_SERVER['REQUEST_URI'];
    header('location: URL-B');
    exit;
} 
```

网址乙：

```
// do stuff
$_SESSION['processed'] = 1;
header('location: '.$_SESSION['request']);
exit; 
```

无论如何，类似的东西。

# arrays - 将整数存储在数组中，其中元素表示值的 1 个字节

> ID：13750749
> 
> 赞同：0
> 
> 时间：2012-12-06T19:09:12.510
> 
> 标签：arrays, aes, nesc

我正在使用 AES 加密一些要在数据包中发送的数据。我需要将一个整数存储在一个 8 位元素的数组中。为了清楚起见，我的数组声明为：

```
uint8_t in[16] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
                  0x00,0x00,0x00,0x00}; 
```

我需要能够在这个数组中存储一个整数，然后在接收客户端轻松检索数据。有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:48:15.843

这通常通过位移来实现：

```
int i = 42;
in[0] = i & 0xff;
in[1] = (i >> 8)  & 0xff;
in[2] = (i >> 16) & 0xff;
in[3] = (i >> 24) & 0xff; 
```

请注意，您不能始终保证 int 是四个字节。但是，很容易将上面的代码变成一个循环，基于`sizeof i`.

检索整数的工作方式如下：

```
int i = in[0] | (in[1] << 8) | (in[2] << 16) | (in[3] << 24); 
```

当然，如果您要使用 AES 对其进行加密，您需要考虑一个合理的[填充算法](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)。目前，您看起来正朝着零填充前进，这远非最佳。

# java - 从类转换 到类型引用

> ID：13750754
> 
> 赞同：21
> 
> 时间：2012-12-06T19:09:34.290
> 
> 标签：java, class, generics, jackson

基本上正好与[这个问题](https://stackoverflow.com/questions/13166233/convert-from-typereferencee-to-classe-without-casting-java)相反。我想将 Class<T> 对象转换为 TypeReference<T> 对象。

我试过了：

```
foo(Class<T> valueType)
{
   TypeReference ref = new TypeReference<T>(){}; 
} 
```

但这只是返回类的超类的类型引用。我也试过：

```
foo(Class<T> valueType)
{
   TypeReference ref = new TypeReference<valueType>(){}; 
} 
```

和

```
foo(Class<T> valueType)
{
   TypeReference ref = new TypeReference<valueType.getRawClass()>(){}; 
} 
```

但后两个不编译。我该怎么做呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-06T19:14:32.327

您可以覆盖`getType()`以返回您的类型：

```
new TypeReference<T>(){
    @Override
    public Type getType() {
        return valueType;
    }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T01:58:24.643

正如其他人指出的那样，您很可能正在解决错误的问题。您可能想要统一的实际上是`JavaType`，因为这是您的两个输入都转换为的内容，这也是杰克逊内部用于所有内容的内容。然后你可以有方便的方法来获取`JavaType`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:51:26.187

> 我想将 Class 对象转换为 TypeReference 对象。

有可能做到这一点，但我想不出它解决的任何现实问题。考虑来自[TypeReference javadoc的信息](http://fasterxml.github.com/jackson-core/javadoc/2.1.0/com/fasterxml/jackson/core/type/TypeReference.html)

> 此类用于传递完整的泛型类型信息，并避免类型擦除问题（基本上从运行时 Class 对象中删除大多数可用的类型引用）。

我对此的解释是，当您需要 Class 对象可以提供的更多类型信息时，您唯一会使用 TypeReference 而不是 Class。所以即使你能弄清楚如何进行这种转换——你得到了什么？没有办法将擦除的类型信息从 Class 放回 TypeReference。

每当我遇到需要 TypeReference 而不是 Class 的情况时，我都会创建一个具体的类型引用实例并在运行时传递该对象。像这样的东西（可能无法编译，但你明白了）

```
foo(TypeReference<T> refArg)
{
   TypeReference<T> ref = refArg; 
}

// later on
object.foo(new TypeReference<List<Set<MyObject>>(){}); 
```

# .net - 使用 Elmah 手动记录错误的成本是多少？

> ID：13750757
> 
> 赞同：0
> 
> 时间：2012-12-06T19:09:51.250
> 
> 标签：.net, error-handling, elmah, error-logging

[这个 stackoverflow 问题](https://stackoverflow.com/questions/7441062/how-to-use-elmahto-manually-log-errors)的答案讨论了如何使用 Elmah 手动或以编程方式记录处理的异常，但不讨论成本。使用以下记录处理的异常之间的（理论上）成本差异是什么？

*   Elmah 的 ErrorSignal.Raise
*   Elmah 的 ErrorLog.Log
*   System.Diagnostics.TraceSource（或其他一些日志库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:56:16.123

这不是您问题的真正答案，而是一个讨论点。为什么知道使用 Elmah 的成本（我假设是执行时间？）很重要？

这可能是过早优化的情况。这里或那里的一百毫秒应该无关紧要，除非在一个紧密、长的循环中。如果您的应用程序抛出了足够多的错误，以至于 Elmah 的额外成本累积到拖累性能的地步，我认为您应该转而查看为什么会抛出这么多异常。

是为了捍卫它对你的同行的使用吗？大多数日志记录块将表现出非常相似的性能特征，其中最大的因素之一是日志目标的位置或性质。将日志写入磁盘或网络目的地等 I/O 操作将比其他日志记录代码花费更多的时间。

# ruby-on-rails-3 - 如何使用 Charles Proxy 从 Rails 应用程序捕获休息客户端请求？

> ID：13750764
> 
> 赞同：3
> 
> 时间：2012-12-06T19:10:12.450
> 
> 标签：ruby-on-rails-3, proxy, wireshark, rest-client, charles-proxy

在本地运行 Rails 应用程序，我可以配置 Charles Proxy 以显示可在 lvh.me:3000 访问的应用程序的所有请求/响应详细信息。

但是，我无法捕获 Rails 应用程序内部对外部 URL 的 http 调用。例如，当我在 Rails 应用程序中拨打外部电话说[http://www.google.com](http://www.google.com)时，使用 rest-client/httparty ，Charles 代理不会显示服务器向 google.com 发起的 http 请求。

有人可以建议我缺少什么配置吗？在录制设置 > 包含 > 我添加了[http://www.google.com](http://www.google.com)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:14:24.370

您需要配置 httpclient 以使用您的代理。如果您使用的是 rest-client，您只需将代理地址设置为 Charles 代理。例如 RestClient.proxy = "http://127.0.0.1:8881"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T15:42:43.183

或者如果是 httpclient：

http_client = HTTPClient.new（代理：“127.0.0.1:8888”）

...

# javascript - 如何通过 createElement() 的鼠标悬停来更改 window.status

> ID：13750767
> 
> 赞同：2
> 
> 时间：2012-12-06T19:10:24.337
> 
> 标签：javascript, onmouseover, createelement

我希望通过覆盖 createElement() 创建的链接来更改窗口状态，但它似乎不起作用（我正在尝试使用 Chrome）。

**谷歌似乎有可能通过他的索引中的重定向链接做到这一点。**通过将鼠标悬停在他的索引中的链接，您应该在窗口状态中看到一个不是真正点击的链接（谷歌重定向）的 href。所以，请不要告诉我浏览器出于安全原因阻止了这个，并帮助我做到这一点:-)

我试过[**以下**](http://jsfiddle.net/cxxDu/)

```
function createLink(id) 
{
  var link = document.createElement('a');
  link.onmouseover = function(){window.status='test';};
  link.href = 'http://www.google.com';
  link.id = '1';
  link.rel = 'nofollow';
  link.style.cssText ='border-bottom:2px solid;';  
  link.target = '_blank';
  link.innerHTML = 'Link';
  id.appendChild(link);
}

myElement=document.getElementById('id_text');
createLink(myElement); 
```

但是窗口状态只显示 href 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:11:18.270

现代浏览器阻止更改状态。它必须由用户在浏览器的设置中启用。

Chrome 在 about:config 中有标志寻找`dom.disable_window_status_change`

它被禁用，因为它是一个安全问题。

现在既然你说我对谷歌有误，请查看链接！

```
<a href="http://staplesadvantage.com/" class="l" onmousedown="return rwt(this,'','','','14','AFQjCNER8Nv_Zhb-txDtR-b9O09SVzuTpQ','Ab3MA_Y5pbwgWlo68Wp1kA','0CI8BEBYwDQ','','',event)">Business Solutions | <em>Staples</em> Advantage</a> 
```

`rwt`，捕获链接，取消点击，并进行重定向！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:27:44.057

谷歌做了一个非常巧妙的技巧：当鼠标主按钮被按下时（`onmousedown`），他们改变了链接。您可以很容易地检查这一点：将鼠标悬停在链接上方，然后按下鼠标主按钮。链接发生变化。

为了达到这样的结果，您必须使用

```
function createLink(id) 
{
  var link = document.createElement('a');
  ///  vvvvvvvvvvv
  link.onmousedown = function(){this.href = 'http://www.example.com';};
  ///  ^^^^^^^^^^^
  link.href = 'http://www.google.com';
  link.id = '1';
  link.rel = 'nofollow';
  link.style.cssText ='border-bottom:2px solid;';  
  link.target = '_blank';
  link.innerHTML = 'Link';
  id.appendChild(link);
}

myElement=document.getElementById('id_text');
createLink(myElement); 
```

请注意，重定向到用户预期之外的其他页面是粗鲁的，有时可能会被识别为恶意行为。

# .net - Intellisense 不显示引用 DLL 的 XMLDOC

> ID：13750771
> 
> 赞同：6
> 
> 时间：2012-12-06T19:10:40.907
> 
> 标签：.net, visual-studio-2010, intellisense, xml-documentation

我正在使用 VS-2010 Ultimate 版本 10.0.30319.1 RTMRel（来自 about 框）。

我编写了一个包含很多不错的 XMLDOC（恕我直言）的类库。由于我不想在各种解决方案中使用这个库时进入，所以项目本身不包括在内（如在右键单击解决方案中，添加现有项目..）；相反，我们只是添加对 DLL 的引用，就好像它是第三方库一样。

在包含该库的解决方案中，intellisense 正常工作，我得到了 XMLDOC 的全部好处。不幸的是，这不是我将使用它的地方！

在其他解决方案中，库只是一个引用的 DLL，我得到了智能感知，但没有 XMLDOC。虽然我的库在没有支撑轮的情况下几乎可以理解，但我想知道为什么会这样，以及我是否能做些什么。

非常可跳过的段落：我希望我脑海中出现的相当愤世嫉俗的怀疑和我认为的一样毫无根据——也就是说，M$ 可能以某种方式“锁定”了这个功能，以便将它的访问权出售给第三方库开发人员......我想人们*可以*做一些事情，比如要求 DLL 由特定密钥签名，并提供一些在线付费服务，人们可以用这个密钥签署他们的 DLL 以启用该功能，但考虑到它是多么有价值该平台拥有蓬勃发展的第三方库和组件开发人员，似乎不太可能有人打扰。

那么，有没有人有任何提示可以分享如何让这个工作？我希望 XMLDOC 在我使用该东西时以智能感知方式显示，无论如何。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T19:23:40.697

该程序集不包含实际的注释文档。您需要生成一个包含所有文档的 XML 文件。

进入您的项目设置，在构建选项卡上检查“XML 文档文件”：

![在此处输入图像描述](../Images/0d80bf4476d04e7af7c78dd0ea518157.png)

现在，当您编译项目时，将生成一个包含文档的漂亮 XML 文件。

在您的其他项目中，您需要引用 DLL 并确保 XML 与具有 XML 扩展名而不是 DLL 的程序集具有相同的名称，并且与您引用的 DLL 位于同一目录中。例如：

> 程序集：MyProject.dll
> 
> XML：MyProject.xml

[您可以在 MSDN](http://msdn.microsoft.com/en-us/library/vstudio/x4sa0ak0(v=vs.100).aspx)了解有关 XML 文档的更多信息。

# actionscript-3 - 置换贴图过滤器不适用于蒙版图像

> ID：13750773
> 
> 赞同：0
> 
> 时间：2012-12-06T19:11:03.667
> 
> 标签：actionscript-3, flash, flash-builder

这是我的问题。

我有一个尺寸为 958*580 的图像。当我对其应用置换贴图过滤器时，它可以完美运行，并且我想要的区域也会受到相应的影响。当我屏蔽此图像时，它只显示过滤器应该作用的区域，没有任何显示。图像被蒙版，但该区域不再受滤镜影响。

我不确定我是否遗漏了有关置换贴图过滤器或蒙版本身如何工作的信息，但我希望这里的某个人能给我一两个关于这里可能存在的问题的指针。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:46:50.040

如果不看代码，很难说是什么导致了过滤器渲染问题。我没有遇到过这样的行为。请尝试下面列出的代码，它应该对图像应用置换过滤器，然后用圆形对其进行遮罩：

```
import flash.display.BitmapData;
import flash.display.Bitmap;
import flash.display.Sprite;
import flash.filters.DisplacementMapFilter;
import flash.geom.Point;

// image is taken form the Library, alternatively you may use Embed metatag
var imageBitmapdata:BitmapData=new imageBd() as BitmapData; 
var bitmap:Bitmap=new Bitmap(imageBitmapdata);
bitmap.width=stage.stageWidth;
bitmap.height=stage.stageHeight;

var maskCircle:Sprite=new Sprite();
maskCircle.graphics.beginFill(0xFF00FF, 1);
maskCircle.graphics.drawCircle(300,300,300);
maskCircle.graphics.endFill();

bitmap.filters=[getBitmapFilter()];
bitmap.mask=maskCircle;

addChild(bitmap);
addChild(maskCircle);

function getBitmapFilter():BitmapFilter {
    var bitmapData:BitmapData = new BitmapData(stage.stageWidth, stage.stageHeight, true);
    bitmapData.perlinNoise(20, 20, 4, 12, true, true);
    var mapBitmap:BitmapData = bitmapData;
    return new DisplacementMapFilter(mapBitmap,new Point(0, 0),
                                 BitmapDataChannel.RED,
                                 BitmapDataChannel.RED,
                                 -20,
                                 -20,
                                 DisplacementMapFilterMode.CLAMP,
                                 0,
                                 0);
} 
```

# bittorrent - 如何从洪流跟踪器响应中获取对等列表

> ID：13750775
> 
> 赞同：5
> 
> 时间：2012-12-06T19:11:06.350
> 
> 标签：bittorrent

我正在制作一个洪流客户端。我解码种子文件并将这个请求发送到跟踪器：

```
http://tracker.mininova.org/announce?uploaded=0&downloaded=0&compact=0&event=started&peer_id=12345678987654321234&port=6881&info_hash=%18%28n%23K%ECt%B7%93S%C5%F1-%F3%1C%18k%CEX%A4&left=0 
```

这就是我收到的：

```
{'min interval': 1800, 'peers': '', 'interval': 1800, 'complete': 37, 'incomplete': 0} 
```

为什么对等列表为空？有 37 个 peers 是播种者，我不应该从他们那里得到一些 peer 信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-27T21:38:24.427

你得到一个空的对等列表的原因是因为跟踪器没有将种子发送给其他种子，并且在请求的那一刻没有注册 leechers。

跟踪器将您注册为种子，因为您发送`&left=0`了请求字符串，表明您拥有完整的种子。

相反，假设 torrent 是 200075 字节并且客户端还没有下载任何东西，
它应该添加`&left=200075`并且公告将是：

```
http://tracker.mininova.org/announce?uploaded=0&downloaded=0&compact=0&event=started&peer_id=12345678987654321234&port=6881&info_hash=%18%28n%23K%ECt%B7%93S%C5%F1-%F3%1C%18k%CEX%A4&left=200075 
```

并且不会有答案，因为跟踪器早就死了。

请参阅：[https ://wiki.theory.org/index.php/BitTorrent_Tracker_Protocol#Basic_Tracker_Announce_Request](https://wiki.theory.org/index.php/BitTorrent_Tracker_Protocol#Basic_Tracker_Announce_Request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T19:04:08.847

您查询的跟踪器可能没有为该种子存储对等点。我能够使用 DHT 找到同行。

该 URL 将是磁铁：?xt=urn:btih:18286e234bec74b79353c5f12df31c186bce58a4。

# java - 如何在不使用 JInternalFrame 的情况下在 jDesktopPane 上调用 jFrame

> ID：13750786
> 
> 赞同：2
> 
> 时间：2012-12-06T19:11:43.933
> 
> 标签：java, swing, desktop-application, netbeans-7, jinternalframe

我完成了大学分配给我的项目，但现在我正在尝试为我的项目创建 MDI。我使用了 10 个 jFrame 和一个也是 jFrame 的主窗体，之后我添加了一个菜单栏、10 个用于调用 jFrame 的 jButton 和一个用于调用 jFrame 的 jDesktopPane。以下代码用于在所有 10 个 jButton 中调用 jFrame 放置到 jDesktopPane 中：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
      try
      {
        asd t = new asd();
        dskp.add(t);
        t.setVisible(true);

      }
      catch(Exception ex)
      {
          JOptionPane.showMessageDialog(null, ex);
      }
    } 
```

但不与我合作并给出以下错误消息：

```
java.lang.illegalargumentexception: adding a window to a container 
```

如何执行此操作并解决此问题，因为我没有使用任何 jInternal Frame。我认为此时我无法使用 jInternale Frame，因为我在 jFrame 上完成了所有工作，例如带有代码的完整 GUI，并在 jInternal Frame 上重新完成所有工作，这对我来说是不可能的，因为提交我的最终项目的时间很短。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:13:24.933

如果您希望将 windows intp 放置在 JDesktopPane 中，那么您需要使用 JInternalFrames。无论它是否吸引您，这都是您的最佳解决方案。

这方面的一个教训是，您应该努力避免创建扩展 Swing 组件的类，尤其是 JFrames 等顶级组件，而应创建生成 JPanel 的类，这些组件足够灵活，可以放置在任何地方，例如 JFrames、JInternalFrames , JDialogs, JOptionPanes, 其他 JPanel 等等...

请注意，kludge 是从您的 JFrame 获取 contentPane，将其放入 JInternalFrame 并将其放入 JDesktopPane，或者将 JInternalPanes 的 contentPane 设置为来自 JFrame 的内容。IE，

```
asd t = new asd();
JInternalFrame internalFrame = new JInternalFrame();
internalFrame.setContentPane(t.getContentPane());
internalFrame.pack();

// set the internalFrame's location
// ...

internalFrame.setVisible(true);
dskp.add(internalFrame); 
```

但请再次注意，这是一个杂牌，带有潜在的陷阱。

# javascript - jQuery - 双击类显示下拉选择

> ID：13750790
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:11:51.703
> 
> 标签：javascript, jquery

我在这方面遇到了很大的麻烦。

我正在尝试在 jQuery 中编写一些东西，当双击文本时，它会隐藏该元素并显示一个选择下拉菜单......但是，当用户离开该元素时，下拉菜单应该返回到原始文本。

我尝试了很多方法，都没有奏效。我尝试将 dblclick 与悬停等一起使用。

简要回顾一下，用户单击带有文本的 div。div is hidden 显示选择。用户鼠标离开区域，下拉隐藏，div再次显示。

感谢您的帮助，我已经玩了太多小时了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:39:57.380

像这样的东西对你不起作用？

HTML：

```
​&lt;div>
    <span>TEXT TEXT TEXT</span>
    <select>
        <option>1</option>
        <option>2</option>
    </select>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
span {
    cursor: default;
}

select {
    display: none;
}​ 
```

JS：

```
$('div').dblclick(function() {
    $('span').hide();
    $('select').show();
}).mouseleave(function() {
    $('span').show();
    $('select').hide();
});​ 
```

替代JS：

```
$('div').dblclick(function() {
    $('span').hide();
    $('select').show();
});
$('select').mouseleave(function() {
    $('span').show();
    $('select').hide();
});​ 
```

当您移出 div 的边界（由隐藏的 span 文本的大小设置）时，第一个 JS 将使选择框消失。第二个将使选择框在您将鼠标移入内部然后鼠标移出后消失。如果您愿意，您可以将其从 .mouseleave() 更改为 .change() ，然后它只会在有人实际选择某些内容时隐藏选择框。

[JSFiddle](http://jsfiddle.net/qZPxS/)

# python - join() 只接受一个参数（给定 2 个）

> ID：13750797
> 
> 赞同：1
> 
> 时间：2012-12-06T19:12:24.527
> 
> 标签：python

我收到此代码错误：

```
Traceback (most recent call last):
  File "./main.py", line 172, in grab_first_name
    f_name = ''.join(n.split()[0], '\n')
TypeError: join() takes exactly one argument (2 given)

f_name = ''.join(n.split()[0], '\n')
f.write(f_name)
print f_name 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T19:14:02.883

可能你的意思是这样的：

```
'\n'.join(n.split()[0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:13:30.863

你的意思是说：

```
f_name = n.split()[0] + '\n' 
```

# c - 我无法弄清楚这两个代码块之间的区别

> ID：13750802
> 
> 赞同：1
> 
> 时间：2012-12-06T19:12:44.310
> 
> 标签：c

好吧，这是一个非常简单的问题：为什么第一个代码块可以编译，而第二个代码块不能？它们看起来应该是等价的，因为我改变的只是变量声明/引用。

第一的：

```
int memberStudents(struct studentType x, Snodeptr students, Snodeptr *s) {
    Snodeptr p = *s;

    while (p->next != NULL) {
        if (strcmp(x.sid, p->student.sid) == 0)
            return 1;

        p = p->next;
    }

    return 0;
} 
```

第二：

```
int memberStudents(struct studentType x, Snodeptr students, Snodeptr *s) {
    while (s->next != NULL) {
        if (strcmp(x.sid, s->student.sid) == 0)
            return 1;

            s = s->next;
    }

    return 0;
} 
```

我想更改 Snodeptr 以使其指向正确的位置，但是当我尝试第二个代码块时，我收到一条错误消息，指出在不是结构或联合的东西中请求成员“下一个”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:16:30.477

`Snodeptr *s`并且`Snodeptr p`是不同的类型，因此行为不同

尝试`(*s)->next`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:16:20.757

在第一个块中，`while`循环在一个`Snodeptr`实例上运行。在第二个块中，您正在对`Snodeptr*`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:16:57.433

在第二个代码中，您使用`s->next != NULL`, s 是指针。

在第一个代码中，您使用`p->next != NULL`的是 p 不是指针

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T19:22:34.850

我希望这个（您的第二个片段的略微修改版本）应该编译：

```
int memberStudents(struct studentType x, Snodeptr students, Snodeptr *s) {
    while ((*s)->next != NULL) {
        if (strcmp(x.sid, (*s)->student.sid) == 0)
            return 1;

            (*s) = (*s)->next;
    }
    return 0;
} 
```

# c# - Html Agility Pack 在 c# 中保存 html 文件时创建不相关的字符

> ID：13750804
> 
> 赞同：1
> 
> 时间：2012-12-06T19:12:47.727
> 
> 标签：c#, asp.net-mvc-3, razor, html-parsing, html-agility-pack

我正在使用 asp.net mvc3 C# 进行项目。我想更改一些 html 元素

c# 的属性，如宽度、高度等。我有一个简单的**(_Layout.cshtml)**文件

```
 <html> <head>
    <link href="@Url.Content("file.css")" rel="stylesheet" type="text/css" />
    <body>

     <a href="#" id="link1" title="@Function.ConfigElement("FacebookLink")" ></a>

     </body>
    </head> </html> 
```

所以我正在使用 html 敏捷包来加载和保存这个文件

```
HtmlDocument doc= new HtmlDocument();

doc.load("_Layout.cshtml");

doc.GetElementbyId("link1").Attributes.Add("title", "@Function.ConfigElement("NewLink")");

doc.save("_Layout.cshtml"); 
```

保存文件后输出是这样的

```
<html> <head>
        <link href="@Url.Content("file.css")"="" rel="stylesheet" type="text/css" />
        <body>

         <a href="#" id="link1" title="@Function.ConfigElement("NewLink")"="" ></a>

         </body>
        </head> </html> 
```

并保存一些额外的`(link href)`字符`(anchor title)`

我怎样才能避免这个问题.. 是否有任何其他解决方案可以在 c# 中为 asp.net mvc 解析 html。

实际上我想在这些 html 元素属性中添加一些服务器端功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:16:10.067

正如 StackOverflow 的语法高亮巧妙地暗示的那样，您的 HTML 非常无效。

```
href="@Url.Content("file.css")" 
```

这实际上是两个属性：`href="@Url.Content("`和`file.css")"`。（没有价值）

您不能使用 HTML 解析器来解析 Razor 标记。
相反，您应该使用实际的 Razor 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:18:36.027

CSCHTML**不是**HTML。它混合了 CS、特殊脚本和可选的 HTML——因此 HtmlAgilityPack 不是阅读/操作它的好工具。

为什么会特别发生：

```
<link href="@Url.Content("file.css")" 
```

表单 HTML 来看有 2 个属性和 (href 和 file.css) 加上奇怪的 ")" 意外文本。不知何故，AgilityPack 试图理解它并输出你得到的任何东西。

# javascript - 保存/加载其状态的 JavaScript 对象

> ID：13750805
> 
> 赞同：2
> 
> 时间：2012-12-06T19:12:54.187
> 
> 标签：javascript, design-patterns

我想创建一个可以保存和加载其状态（到本地存储）的 Javascript 对象。

这是我正在使用的基本模式：

```
var obj = function () {

    // private members
    //

    return {

        // public members

        load: function () {
            this.state = JSON.parse(localStorage.getItem('obj'));

            if (this.state === null) {
                this.state = {
                    name: 'foo'
                };
            }
        },

        save: function () {
            localStorage.setItem('obj', JSON.stringify(this.state));
        }
    };
}();

// load state
obj.load();
console.log(obj.state.name);

// save state
obj.state.name = 'bar';
obj.save(); 
```

但是有一点让我对这种模式感到恼火：我必须通过“状态”属性访问对象的持久属性。

我该如何重写它，以便我可以以更自然的方式使用该对象，例如：

```
// load state
obj.load();
console.log(obj.name);

// save state
obj.name = 'bar';
obj.save(); 
```

这是一个非常简单的“状态”，但该解决方案必须适用于具有嵌套对象、数组等的复杂状态对象，因此简单地向我的对象添加一个“名称”属性并不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:17:38.650

如果您不关心加载/保存哪些属性，那么您可以简单地将所有属性从状态复制到 self. 例如，在阅读之后`var state`（而不是`this.state`因为你不想`state`再成为其中的一部分`this`）：`for(x in state) this[x] = state[x];`

同样，您可以节省：`var state = {}; for(x in this) state[x] = this[x]`

但是，如果您想要一个预定义的列表，那么我建议：`var fields = ['name', 'zip', 'age'];`

然后使用`for(x in fields) this[x] = state[x]`加载和`for(x in fields) state[x] = this[x];`保存。

对不起，它有点拼凑起来，但我希望你能理解我的意思:)

编辑：为每个 OPs 请求添加了完整的示例。

使用此技术的完整解决方案示例如下：

```
var obj = function () {

    // private members
    //

    return {

        // public members

        load: function () {
            var state = JSON.parse(localStorage.getItem('obj'));

            if(state == null) state = { name: 'foo' };

            for(x in state) this[x] = state[x];
        },

        save: function ()
        {
            var state = {};

            // check if it's a function.  This version taken from underscorejs
            var isFunction = function(obj) {
                return !!(obj && obj.constructor && obj.call && obj.apply);
            };

            for(x in this)
            {
               if(isFunction(this[x])) continue; // skip functions

               state[x] = this[x];
            }

            localStorage.setItem('obj', JSON.stringify(state));
        }
    };
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:40:17.830

您还可以在属性更改时完成直接保存，通过使用 ES5 getter/setter 或使用[Watch.js](https://github.com/melanke/Watch.JS)

**Watch.js 示例：**

```
var obj = (function () {
    // private members
    //
    var self = {
        // Some properties
        name: '',
        otherName: '',            
        // Try to load state or use "foo state"
        state: JSON.parse(localStorage.getItem('obj')) || {
                    name: 'foo'
        },            
        save: function () {
            localStorage.setItem('obj', JSON.stringify(this.state));
        }
    };
    // Watch the object and save it to local storage, when a property changes
    // (Of course, you don't need to call the save method here...)
    watch(self, function(property, value) {        
        console.log('saving state!');
        self.state[property] = value;            
        self.save();
    });

    return self;
}());

// Update some properties and see that it is saved to local storage.
obj.name = "Some name";
obj.otherName = "Some other name";    
console.log(JSON.parse(localStorage.getItem('obj'))); 
```

[​ JsFiddle](http://jsfiddle.net/XEsQd/)上的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:25:04.067

您可以制作`state`内部和表面的 getter 和 setter：

```
var obj = function () {
    // private members
    var state = {};

    return {
        // public members
        load: function () {
            var loadedState = JSON.parse(localStorage.getItem('obj'));

            if (loadedState === null) {
                state = {
                    name: 'foo'
                };
            } else {
                state = loadedState;
            }
        },
        save: function () {
            localStorage.setItem('obj', JSON.stringify(state));
        },
        getState: function (key) {
            return state[key];
        },
        setState: function (key, value) {
            state[key] = value;
        }
    };
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:01:47.247

使用[jQuery 的 extend()](http://api.jquery.com/jQuery.extend/)：

```
var obj = (function () {
    return {
        load: function () {
            var stored = localStorage.getItem("obj");
            var state = stored ? JSON.parse(stored) : {
                name: 'foo'
            };
            $.extend(this, state);
        },

        save: function () {
            localStorage.setItem("obj", JSON.stringify(this));
        }
    };
})();

// load state
obj.load();
console.log(obj);

// save state
obj.name = 'bar';
obj.save(); 
```

[jsfiddle](http://jsfiddle.net/m6ug2/)

所有功劳归功于 pimvdb。

# jquery - datatable editable read the id of the image define in the cell?

> ID：13750806
> 
> 赞同：0
> 
> 时间：2012-12-06T19:12:56.207
> 
> 标签：jquery, asp.net-mvc-3

I am using jquery datable editable Basically I want to get the id of the image defined in cell 0 , how do I get that ? Below is the code

var data = new Array();

```
 $.each(oTableabc.fnGetData(), function(i, row) {

           dataArray.push({
                "RefId": row[0] ,
                "Center": row[1],
        "cust":row[2]   

            });

         }); 
```

What I am refering to row[0] contains an image and is defined as below,

```
 <thead>
        <!-- Header Row -->
        <tr >
              <th>RefId</th>
              <th>Center</th> 
              <th>cust</th>

        </tr>
        </thead> 

        @foreach (var as in mod)
     { 

        <tr>
              <td  > <img src="/Content/Images/details_open.png"    alt="expand/collapse" class="original" id= "@as.RefId.ToString()"  /> </td>
             <td>  @Html.DisplayFor(modelItem=>as.center ) </td>
             <td>  @Html.DisplayFor(modelItem => as.cust) </td>

       </tr>
     }

          </tbody> 
       </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:18:22.987

您忘记在循环`<tbody>`之前添加。`foreach`

```
var ids = $('#tbls tbody td img').map(function() {
    return this.id;
}); 
```

[演示](http://jsfiddle.net/b3GYf/2/)

# testing - Grails 集成测试失败并出现 MissingMethodException

> ID：13750820
> 
> 赞同：2
> 
> 时间：2012-12-06T19:14:02.353
> 
> 标签：testing, grails, grails-orm

我正在尝试测试用户登录的典型控制器流程。与大多数登录系统一样，存在扩展关系，而 Grails 文档完全没用。它没有一个与典型用法实际相关的示例，并且是一个功能完整的示例。

我的测试如下所示：

```
@TestFor(UserController)
class UserControllerTests extends GroovyTestCase {
    void testLogin() {
        params.login = [email: "test1@example.com", password: "123"]
        controller.login()
        assert "/user/main" == response.redirectUrl
    }
} 
```

控制器会：

```
def login() {
    if (!params.login) {
        return
    }
    println("Email " + params.login.email)
    Person p = Person.findByEmail(params?.login?.email)
    ...
} 
```

失败了：

groovy.lang.MissingMethodException：没有方法签名：immigration.Person.methodMissing() 适用于参数类型：() 值：[]

println 中显示了正确的数据，但是调用该方法失败。

测试套件不能整体使用模拟，因为有被调用的数据库触发器，其结果需要测试。

奇怪的是，如果我在测试中直接调用该方法，它可以工作，但在控制器中调用它却不行。

更新：我直接从 grails 命令重新生成了测试，并添加了 @Test 注释：

```
 @TestFor(UserController)
    class UserControllerTests extends GroovyTestCase {
        @Test
        void testLogin() {
            params.login = [email: "test1@example.com", password: "123"]
            Person.findByEmail(params.login.email)
            controller.login()
        }
    } 
```

如果我使用 grail test-app -integration UserController 运行它，这将有效

尽管结果未正确填充 - 响应为空，flash.message 为空，即使它应该有一个值，redirectedUrl 为空，内容正文为空，视图也是如此。

如果我删除 @TestFor 注释，它甚至不会工作。它没有告诉我“参数”不存在。

在另一个测试中，我有两种方法。第一个方法运行，找到 Person.findAllByEmail()，然后第二个方法运行，找不到 Person.findAllByEmail 并崩溃并出现类似的错误 - 方法丢失。

在另一个奇怪的更新中 - 看起来响应对象正在发送重定向，但发送回应用程序 baseUrl，而不是发送到用户控制器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T10:41:52.383

集成测试不应该使用`@TestFor`. 您需要在测试中创建控制器实例，并在其中设置参数：

```
class UserControllerTests extends GroovyTestCase {
  void testLogin() {
    def controller = new UserController()
    controller.params.login = [email:'test1@example.com', password:'123']
    controller.login()
    assert "/user/main" == controller.response.redirectedUrl
  }
} 
```

详细信息在[用户指南](http://grails.org/doc/latest/guide/testing.html#integrationTesting)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:24:11.477

`TestFor`注释仅用于单元测试，因为它模拟了结构。在[集成测试](http://grails.org/doc/latest/guide/testing.html#integrationTesting)中，您可以访问完整的 Grails 环境，因此不需要这个模拟。所以只需删除注释就可以了。

```
class UserControllerTests extends GroovyTestCase {
...
} 
```

# python - PYTHON：将文件读入字典，其中 n 列作为键，m 列作为值

> ID：13750824
> 
> 赞同：4
> 
> 时间：2012-12-06T19:14:04.203
> 
> 标签：python, dictionary

如果它只有两列，我知道该怎么做，但是如果文件是这样的：

```
01 asd 023 green
01 dff 343 blue
02 fdf 342 yellow
02 fff 232 brown
02 kjf 092 green
03 kja 878 blue 
```

并且说，我希望第 2 列成为我的字典的键，而第 4 列成为该键的内容？我在想，解决这个问题的一种方法是完全删除其他无用的列，以便只保留我需要的两个，然后我可以使用我也在这个网站上看到的脚本来制作字典

[Python - 文件到字典？](https://stackoverflow.com/questions/4803999/python-file-to-dictionary)

当然，这是解决问题的一种方法，非常感谢任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:16:47.107

```
d = {}
with open('data.txt') as f:
  for line in f:
    tok = line.split()
    d[tok[1]] = tok[3]
print(d) 
```

这产生

```
{'kja': 'blue', 'kjf': 'green', 'fdf': 'yellow', 'asd': 'green', 'fff': 'brown', 'dff': 'blue'} 
```

[`split()`](http://docs.python.org/2/library/stdtypes.html#str.split)（不带参数）将行拆分为字符串列表。`tok[1]`然后`tok[3]`使用[列表索引](http://docs.python.org/2/tutorial/introduction.html#lists)来处理这些列表中的第二个和第四个值，将它们分配给[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)的键和值（`d[key] = value`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:17:26.247

就像是

```
from operator import itemgetter
keyval = itemgetter(1, 3)
with open('file') as fin:
    keyvals = (keyval(line.split()) for line in fin)
    my_dict = dict(keyvals) 
```

**笔记：**

这与@NPE 的答案不同，因为它使用内置`dict`函数进行初始化，而不是在循环之外声明它。它还`itemgetter`用作键检索函数，该函数从每行中获取第二个和第四个值（当用空格分隔时），并使用生成器表达式将其应用于文件中的每一行。

还有一个轻微的优势（尽管通常不是那么重要）应该`my_dict = dict(keyvals)`失败，然后名称永远不会被绑定，而如果通过按键分配发生某些事情，那么`dict`声明之外的`with`声明可能会以“脏”告终。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:16:36.250

```
d = {}
with open("file.txt") as f:
    for line in f:
        (key1, val1, key2, val2) = line.split()
        d[int(key1)] = val
        d[int(key2)] = val2 
```

会得到你所有的。否则，您可以在 NPE 上做一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:17:14.423

```
for line in f.readlines():
    my_dic[line.split(' ')[1]] = line.split(' ')[3] 
```

# c++ - 如何删除自己的参考

> ID：13750828
> 
> 赞同：-1
> 
> 时间：2012-12-06T19:14:10.947
> 
> 标签：c++

```
void deleteElement(LinkedListElement<char> *&pending)
{
    if (pending->Next) {
        char value = pending->Next->Data;
        pending->Data = value;
        LinkedListElement<char> *temp = pending->Next;
        pending->Next = pending->Next->Next;
        delete temp;
    }else{
        pending = NULL;
        //pending =nullptr;
        delete pending;
    }
} 
```

C++中的简单删除节点我想问的是在else语句中，如果链表是end，那么我可以删除自己，我通过引用（&）传递值，但它不起作用

```
void deleteElement(LinkedListElement<char> *&pending)
{
    if (pending->Next) {
        char value = pending->Next->Data;
        pending->Data = value;
        LinkedListElement<char> *temp = pending->Next;
        pending->Next = pending->Next->Next;
        delete temp;
    }else{
        delete pending;
        //pending = NULL;
    }
} 
```

我尝试这种方式，但它总是给我错误： malloc：*** 对象 0x100103b40 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:14:59.370

它应该是

```
 delete pending;
 pending = NULL; 
```

（**你的版本是相反的**）。请注意，您首先将指针设置为`NULL`，然后将其删除，因此您实际上是在调用`delete`空指针。这是一个无操作 - 内存没有被释放。

# sql - 存储过程运行速度比查询慢得多

> ID：13750829
> 
> 赞同：2
> 
> 时间：2012-12-06T19:14:18.083
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有一个存储过程，它为优势比创建一个 2x2 表。一个基本的优势比表如下所示： ![在此处输入图像描述](../Images/cd4245048efcdf318b2874a62505eb64.png)

**编辑**- 这个查询终于完成了，它确实在两分钟和 32 次单独调用该函数后返回了正确答案。我不明白为什么这是递归运行的，有什么想法吗？

```
A - only records that satisfy both thing 1 and thing 2 go here
B - only records that satisfy thing 1 (people with thing 2 CANNOT go here)
C - only records that satisfy thing 2 (people with thing 1 CANNOT go here)
D - people with thing 1 OR thing 2 cannot go here 
```

表中的所有单元格都是代表人口的整数。

我试图学习一些新语法并决定使用`intersect`and `except`。我想制作`thing 1`and `thing 2`s 变量，所以我将以下查询放入存储过程中。

```
CREATE PROC Findoddsratio (@diag1 NVARCHAR(5), 
                           @diag2 NVARCHAR(5)) 
AS 
    IF Object_id('tempdb..#temp') IS NOT NULL 
      DROP TABLE #temp 

    CREATE TABLE #temp 
      ( 
         squarenumber CHAR(1), 
         counts       FLOAT 
      ) 

    INSERT INTO #temp 
                (squarenumber, 
                 counts) 
    SELECT * 
    FROM   ( 
           --both + 
           SELECT 'a'                                    AS squareNumber, 
                  Cast(Count(DISTINCT x.counts)AS FLOAT) AS counts 
           FROM   (SELECT DISTINCT ic.patid AS counts 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE @diag1 
                   INTERSECT 
                   SELECT DISTINCT ic.patid AS counts 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE @diag2)x 
           UNION 
           --only 1+ 
           SELECT 'b', 
                  Count(DISTINCT x.counts) 
           FROM   (SELECT DISTINCT ic.patid AS counts 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE @diag1 
                   EXCEPT 
                   SELECT DISTINCT ic.patid AS counts 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE @diag2)AS x 
           UNION 
           --only 2+ 
           SELECT 'c', 
                  Count(DISTINCT x.counts) 
           FROM   (SELECT DISTINCT ic.patid AS counts 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE @diag2 
                   EXCEPT 
                   SELECT DISTINCT ic.patid AS counts 
                   FROM   icdclm AS ic 
                   WHERE  ic.icd LIKE @diag1)AS x 
            UNION 
            --both - 
            SELECT 'd', 
                   Count(DISTINCT x.counts) 
            FROM   (SELECT DISTINCT ic.patid AS counts 
                    FROM   icdclm AS ic 
                    EXCEPT 
                    SELECT DISTINCT ic.patid AS counts 
                    FROM   icdclm AS ic 
                    WHERE  ic.icd LIKE @diag2 
                    EXCEPT 
                    SELECT DISTINCT ic.patid AS counts 
                    FROM   icdclm AS ic 
                    WHERE  ic.icd LIKE @diag1) AS x)y 

    --i used a pivot table to make the math work out easier 
    SELECT Round(Cast(( a * d ) / ( b * c ) AS FLOAT), 2) AS OddsRatio 
    FROM   (SELECT [a], 
                   [b], 
                   [c], 
                   [d] 
            FROM   (SELECT [squarenumber], 
                           [counts] 
                    FROM   #temp) p 
                   PIVOT ( Sum(counts) 
                         FOR [squarenumber] IN ([a], 
                                                [b], 
                                                [c], 
                                                [d]) ) AS pvt)t 
```

`ICDCLM`是一个结构类似的表`patid=int, icd=varchar(5)`

中有〜一百万行`ICDCLM`。当我运行此查询而不将其设为存储过程时，它会在几秒钟内运行。如果我尝试`exec FindsOddsRation 'thing1%','thing2%'`. 它运行并运行，但从不返回任何内容（> 2 分钟）。存储过程需要这么长时间有什么区别？SQL Server 2008 R2[在这里摆弄](http://sqlfiddle.com/#!3/4a883/3)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T20:05:55.353

如果您正在运行与存储过程相同的 SQL 并且时间不同，那么您的存储过程可能依赖于过时的元数据。尝试更新统计信息或重新编译存储过程。

# html - 使用 CSS 隐藏 IE7 中溢出的表格单元格内容

> ID：13750830
> 
> 赞同：1
> 
> 时间：2012-12-06T19:14:22.830
> 
> 标签：html, css, internet-explorer-7

我在表格单元格中有一个锚元素。锚点需要与后续单元格重叠，但在表格外或包含 div 时不可见。

HTML

```
<div>
  <table>
    <tbody>
      <tr>
        <th><span>Volkswagen Crafter CR30 SWB Diesel 2.5 BlueTDI 88PS Van</span> BF60GKK <br>updated 06 dec 17:49</th>
        <td>a</td>
        <td>z</td>
        <td>b</td>
        <td>c</td>
        <td>y</td>
        <td>x</td>
        <td><a style="width: 237.5%;left:37.5%" href="#"><span>John Smith, Provisional<br/>09:00 on 12 Dec<br/>18:00 on 14 Dec</span></a></td>
        <td>g</td>
      </tr>
    </tbody> 
  </table>
</div>​ 
```

CSS

```
div {overflow:hidden;display:inline-block;position:relative}
th,td {border:1px solid black; border-collapse:collapse; position:relative; width:50px; }
th {width:150px;}
td.d {background-color:#cdc;}
a {z-index:1000;position:absolute;width:300px;top:15px;left:5px;height:60px;overflow:hidden;background:#fdd;} 
```

这适用于 Chrome、IE8 和 IE9……</p>

![在 Chrome 中正确渲染](../Images/b7ee213c688a03aff42af1e2ed043f99.png)

但在 IE7 中却没有……</p>

![IE7 渲染不正确](../Images/d38a2bb34deeee9b07834f2f4d555102.png)

如何在 IE7 中完成这项工作？

请参阅此处的工作示例[http://jsfiddle.net/UrZDw/](http://jsfiddle.net/UrZDw/)

此外，IE7 还将锚点放在具有背景颜色的单元格后面。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:16:49.137

```
table { overflow: hidden; } 
```

然后你`td`的 s 将继承它，所以你需要明确设置：

```
table td { overflow: visible; } 
```

# asp.net-mvc - 远程验证不起作用

> ID：13750833
> 
> 赞同：0
> 
> 时间：2012-12-06T19:14:35.463
> 
> 标签：asp.net-mvc, remote-validation

我有视图：

```
@model MvcApplication2.Models.HomeModel

@{
    ViewBag.Title = "Home";
}

<h2>Home</h2>
<a>Witaj</a>
@Model.UserName

@using (Html.BeginForm())
{

    <a>Podaj hasło</a>
    @Html.PasswordFor(m => m.Password)
    @Html.ValidationMessageFor(x => x.Password)

    <input type="submit" />
} 
```

和控制器

```
 using System.Web.Mvc;
using System.Web.UI;
using MvcApplication2.Models;

namespace MvcApplication2.Controllers
{
    [OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            HomeModel model = new HomeModel() { UserName = "John" };
            return View(model);
        }

        public JsonResult CheckPassword(string password)
        {
            bool result = false;
            if (password.Length < 4)
            {
                result = false;
            }
            else
            {
                result = true;
            }

            return Json(result, JsonRequestBehavior.AllowGet);
        }
    }
} 
```

和型号：

```
 using System.Web.Mvc;

namespace MvcApplication2.Models
{
    public class HomeModel
    {
        public string UserName { get; set; }

        [Remote("CheckPassword", "Home", ErrorMessage = "Wpisz lepsze hasło")]
        public string Password { get; set; }
    }
} 
```

什么时候应该触发远程验证方法？当我点击输入按钮？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:22:27.410

您是否在视图/Razor 布局中缺少不显眼的 jQuery 引用？

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T18:21:17.227

在 CheckPassword 方法中，密码变量与模型密码不匹配。它应该在 TitleCase 中：- CheckPassword(string Password)

# google-analytics - 不公开可见的 Intranet 上的 Google Analytics

> ID：13750836
> 
> 赞同：3
> 
> 时间：2012-12-06T19:14:59.480
> 
> 标签：google-analytics, subdomain, intranet

我需要跟踪 Intranet 站点的流量，并且更喜欢使用 Google Analytics，因为我们已经在那里跟踪了其他几个属性。

谷歌分析需要一个公共地址来设置一个新的属性进行跟踪。如果我创建一个子域（intranet.domain.com）来满足该要求，我相信其余的应该可以正常工作。（Google 的外部 .js 文件可从我们的网络内进行出站访问，阻止入站外部访问以保护机密信息。）

1.  有没有人有这种情况的经验？你能确认提议的方法会奏效吗？
2.  无论注册的物业地址如何，新的跟踪代码都可以从任何 URL 工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:56:33.053

Google Analytics 通过跟踪像素请求的参数记录数据。您需要确保对 google-analytics.com/__utm.gif 的请求将通过您的 Intranet。（我猜这应该不是问题，因为您说 google-analytics.com/ga.js 没有被阻止。）

在与最初创建的域不同的域上使用网络媒体资源 ID ('UA-xxxxx-x') 也不是问题。

# ios - 如何在 iOS 应用程序内的 UIImageView 中更改图像？

> ID：13750837
> 
> 赞同：1
> 
> 时间：2012-12-06T19:15:08.337
> 
> 标签：ios, uiimageview, uiimage

我有一个 UIImageView 对象，我将其实例化并变成我的 iOS 应用程序中的一个属性。我在 viewDidLoad 方法中初始化了这个 UIImageView 对象的属性，但是，我需要稍后在另一个方法中更改 UIImageView 对象中包含的图像。当我这样做时，出于某种原因，我只是将新图像叠加在旧图像之上。我想做的只是调整框架的大小，然后用新的图像替换旧图像。

以下是相关代码：

在我的 viewDidLoad 方法中：

```
imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 250, 300, 200)];
imageView.image = [UIImage imageNamed:@"firstImage.png"];
[self.view addSubview:imageView]; 
```

在我希望进行更改的方法中：

```
imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 250, 200, 300)];
imageView.image = [UIImage imageNamed:@"secondImage.png"];
[self.view addSubview:imageView]; 
```

请记住，我不仅要更改图像，还要更改帧大小以适应新图像。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:16:21.053

您正在创建另一个 imageview 实例。您需要访问相同的对象并在那里更改框架和图像。

试试这个，

在类中创建`imageView`为属性，

在 .h 文件中，

```
@property(nonatomic, retain) UIImageView *imageView; 
```

然后在`viewDidLoad`,

```
self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 250, 300, 200)];
self.imageView.image = [UIImage imageNamed:@"firstImage.png"];
[self.view addSubview:imageView]; 
```

第二种方法，只需如下图改变框架和图像，

```
self.imageView.frame = CGRectMake(10, 250, 200, 300);
self.imageView.image = [UIImage imageNamed:@"secondImage.png"]; 
```

根据您的代码，您正在为 imageViews 创建单独的实例并添加为子视图，这将导致它叠加在另一个实例上。相反，您需要创建一个如上所示的实例，并在需要时修改其 frame 和 image 属性。

# c++ - 如何实现 boost::variant 派生类？

> ID：13750838
> 
> 赞同：7
> 
> 时间：2012-12-06T19:15:08.777
> 
> 标签：c++, gcc, boost, derived-class, boost-variant

我已经尝试了几个小时来编写一个派生自`boost::variant`. 但我不明白是什么问题（我不明白编译错误是什么意思）。

**实现干净的`boost::variant`派生类的规则是什么？**

```
#include <boost/variant.hpp>

class MyVariant : public boost::variant<char,bool>
{
public:    
       MyVariant ()          : boost::variant<char,bool>( ) {}

       template <typename T>
       MyVariant(      T& v) : boost::variant<char,bool>(v) {}

       template <typename T>
       MyVariant(const T& v) : boost::variant<char,bool>(v) {}
};

int main ()
{
      MyVariant a;
      MyVariant b = a;        //compilation error
  //  MyVariant c = MyVariant();
  //  MyVariant d (true);
  //  MyVariant e ('E');
} 
```

**为什么我要使用继承？**（编辑以向@zaufi 提供更多详细信息）

*   我想要一个空状态
*   我想`const char*`接受`string`
*   我想`int`接受`long`
*   我想给出`enum`类型

例如，在伪 C++ 代码中，我希望：

```
class MyVariant : public boost::variant<char,bool,long,std::string>
{
  typedef boost::variant<char,bool,long,std::string> super;

public:    

  // I know here I should specialize templeted constructors
  // but I is more clear like that, isn't it?    
  MyVariant()              : super('e')             {} //empty -> char
  MyVariant(char        c) : super(std::string(1,c)){} //char  -> string
  MyVariant(const char* s) : super(std::string(s) ) {} //char* -> string
  MyVariant(int         v) : super(long       (v) ) {} //TODO boundaries    
  /* other constructors ... */

  enum Type
  {
    NONE,  //my empty state = char type
    BOOL,
    LONG,
    STRING
  };

  Type type() const { return (Type) which(); }    
}; 
```

**基本代码段（在问题之上）已在不同平台上进行了测试**

*   提升 v1.33 + GCC 4.1 (Linux)
*   提升 v1.52 + GCC 4.7 (MinGW)
*   提升 v1.52 + Visual C++ 2010 (v10)

在我对 GCC 的两个版本的错误下方（如果它打扰某人，我可以删除两者中的一个......）

* * *

```
$ g++ --version
g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52)
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ g++ myVariant.cpp
/usr/include/boost/variant/variant.hpp: In constructor 'boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::variant(T&) [with T = MyVariant, T0_ = char, T1 = bool, T2 = boost::detail::variant::void_, T3 = boost::detail::variant::void_, T4 = boost::detail::variant::void_, T5 = boost::detail::variant::void_, T6 = boost::detail::variant::void_, T7 = boost::detail::variant::void_, T8 = boost::detail::variant::void_, T9 = boost::detail::variant::void_, T10 = boost::detail::variant::void_, T11 = boost::detail::variant::void_, T12 = boost::detail::variant::void_, T13 = boost::detail::variant::void_, T14 = boost::detail::variant::void_, T15 = boost::detail::variant::void_, T16 = boost::detail::variant::void_, T17 = boost::detail::variant::void_, T18 = boost::detail::variant::void_, T19 = boost::detail::variant::void_]':
myVariant.cpp:10:   instantiated from 'MyVariant::MyVariant(T&) [with T = MyVariant]'
myVariant.cpp:19:   instantiated from here
/usr/include/boost/variant/variant.hpp:1348: error: call of overloaded 'convert_construct(MyVariant&, long int)' is ambiguous
/usr/include/boost/variant/variant.hpp:1262: note: candidates are: void boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::convert_construct(T&, int, mpl_::false_) [with T = MyVariant, T0_ = char, T1 = bool, T2 = boost::detail::variant::void_, T3 = boost::detail::variant::void_, T4 = boost::detail::variant::void_, T5 = boost::detail::variant::void_, T6 = boost::detail::variant::void_, T7 = boost::detail::variant::void_, T8 = boost::detail::variant::void_, T9 = boost::detail::variant::void_, T10 = boost::detail::variant::void_, T11 = boost::detail::variant::void_, T12 = boost::detail::variant::void_, T13 = boost::detail::variant::void_, T14 = boost::detail::variant::void_, T15 = boost::detail::variant::void_, T16 = boost::detail::variant::void_, T17 = boost::detail::variant::void_, T18 = boost::detail::variant::void_, T19 = boost::detail::variant::void_]
/usr/include/boost/variant/variant.hpp:1321: note:                 void boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::convert_construct(boost::variant<U0, U1, U2, U3, U4, U5, U6, U7, U8, U9, U10, U11, U12, U13, U14, U15, U16, U17, U18, U19>&, long int) [with U0 = char, U1 = bool, U2 = boost::detail::variant::void_, U3 = boost::detail::variant::void_, U4 = boost::detail::variant::void_, U5 = boost::detail::variant::void_, U6 = boost::detail::variant::void_, U7 = boost::detail::variant::void_, U8 = boost::detail::variant::void_, U9 = boost::detail::variant::void_, U10 = boost::detail::variant::void_, U11 = boost::detail::variant::void_, U12 = boost::detail::variant::void_, U13 = boost::detail::variant::void_, U14 = boost::detail::variant::void_, U15 = boost::detail::variant::void_, U16 = boost::detail::variant::void_, U17 = boost::detail::variant::void_, U18 = boost::detail::variant::void_, U19 = boost::detail::variant::void_, T0_ = char, T1 = bool, T2 = boost::detail::variant::void_, T3 = boost::detail::variant::void_, T4 = boost::detail::variant::void_, T5 = boost::detail::variant::void_, T6 = boost::detail::variant::void_, T7 = boost::detail::variant::void_, T8 = boost::detail::variant::void_, T9 = boost::detail::variant::void_, T10 = boost::detail::variant::void_, T11 = boost::detail::variant::void_, T12 = boost::detail::variant::void_, T13 = boost::detail::variant::void_, T14 = boost::detail::variant::void_, T15 = boost::detail::variant::void_, T16 = boost::detail::variant::void_, T17 = boost::detail::variant::void_, T18 = boost::detail::variant::void_, T19 = boost::detail::variant::void_]
/usr/include/boost/variant/variant.hpp:1330: note:                 void boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::convert_construct(const boost::variant<U0, U1, U2, U3, U4, U5, U6, U7, U8, U9, U10, U11, U12, U13, U14, U15, U16, U17, U18, U19>&, long int) [with U0 = char, U1 = bool, U2 = boost::detail::variant::void_, U3 = boost::detail::variant::void_, U4 = boost::detail::variant::void_, U5 = boost::detail::variant::void_, U6 = boost::detail::variant::void_, U7 = boost::detail::variant::void_, U8 = boost::detail::variant::void_, U9 = boost::detail::variant::void_, U10 = boost::detail::variant::void_, U11 = boost::detail::variant::void_, U12 = boost::detail::variant::void_, U13 = boost::detail::variant::void_, U14 = boost::detail::variant::void_, U15 = boost::detail::variant::void_, U16 = boost::detail::variant::void_, U17 = boost::detail::variant::void_, U18 = boost::detail::variant::void_, U19 = boost::detail::variant::void_, T0_ = char, T1 = bool, T2 = boost::detail::variant::void_, T3 = boost::detail::variant::void_, T4 = boost::detail::variant::void_, T5 = boost::detail::variant::void_, T6 = boost::detail::variant::void_, T7 = boost::detail::variant::void_, T8 = boost::detail::variant::void_, T9 = boost::detail::variant::void_, T10 = boost::detail::variant::void_, T11 = boost::detail::variant::void_, T12 = boost::detail::variant::void_, T13 = boost::detail::variant::void_, T14 = boost::detail::variant::void_, T15 = boost::detail::variant::void_, T16 = boost::detail::variant::void_, T17 = boost::detail::variant::void_, T18 = boost::detail::variant::void_, T19 = boost::detail::variant::void_] 
```

* * *

```
$ g++ --version
g++.exe (GCC) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ g++ myVariant.cpp -I /c/.../include/
In file included from c:/.../include/boost/variant.hpp:17:0,
                 from myVariant.cpp:1:
c:/.../include/boost/variant/variant.hpp: In instantiation of 'boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::variant(T&) [with T = MyVariant; T0_ = char; T1 = bool; T2 = boost::detail::variant::void_; T3 = boost::detail::variant::void_; T4 = boost::detail::variant::void_; T5 = boost::detail::variant::void_; T6 = boost::detail::variant::void_; T7 = boost::detail::variant::void_; T8 = boost::detail::variant::void_; T9 = boost::detail::variant::void_; T10 = boost::detail::variant::void_; T11 = boost::detail::variant::void_; T12 = boost::detail::variant::void_; T13 = boost::detail::variant::void_; T14 = boost::detail::variant::void_; T15 = boost::detail::variant::void_; T16 = boost::detail::variant::void_; T17 = boost::detail::variant::void_; T18 = boost::detail::variant::void_; T19 = boost::detail::variant::void_]':
myVariant.cpp:9:66:   required from 'MyVariant::MyVariant(T&) [with T = MyVariant]'
myVariant.cpp:18:25:   required from here
c:/.../include/boost/variant/variant.hpp:1406:9: error: call of overloaded convert_construct(MyVariant&, long int)' is ambiguous
c:/.../include/boost/variant/variant.hpp:1406:9: note: candidates are:
c:/.../include/boost/variant/variant.hpp:1316:10: note: void boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::convert_construct(T&, int, mpl_::false_) [with T = MyVariant; T0_ = char; T1 = bool; T2 = boost::detail::variant::void_; T3 = boost::detail::variant::void_; T4 = boost::detail::variant::void_; T5 = boost::detail::variant::void_; T6 = boost::detail::variant::void_; T7 = boost::detail::variant::void_; T8 = boost::detail::variant::void_; T9 = boost::detail::variant::void_; T10 = boost::detail::variant::void_; T11 = boost::detail::variant::void_; T12 = boost::detail::variant::void_; T13 = boost::detail::variant::void_; T14 = boost::detail::variant::void_; T15 = boost::detail::variant::void_; T16 = boost::detail::variant::void_; T17 = boost::detail::variant::void_; T18 = boost::detail::variant::void_; T19 = boost::detail::variant::void_; mpl_::false_ = mpl_::bool_<false>]
c:/.../include/boost/variant/variant.hpp:1376:10: note: void boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::convert_construct(boost::variant<U0, U1, U2, U3, U4, U5, U6, U7, U8, U9, U10, U11, U12, U13, U14, U15, U16, U17, U18, U19>&, long int) [with U0 = char; U1 = bool; U2 = boost::detail::variant::void_; U3 = boost::detail::variant::void_; U4 = boost::detail::variant::void_; U5 = boost::detail::variant::void_; U6 = boost::detail::variant::void_; U7 = boost::detail::variant::void_; U8 = boost::detail::variant::void_; U9 = boost::detail::variant::void_; U10 = boost::detail::variant::void_; U11 = boost::detail::variant::void_; U12 = boost::detail::variant::void_; U13 = boost::detail::variant::void_; U14 = boost::detail::variant::void_; U15 = boost::detail::variant::void_; U16 = boost::detail::variant::void_; U17 = boost::detail::variant::void_; U18 = boost::detail::variant::void_; U19 = boost::detail::variant::void_; T0_ = char; T1 = bool; T2 = boost::detail::variant::void_; T3 = boost::detail::variant::void_; T4 = boost::detail::variant::void_; T5 = boost::detail::variant::void_; T6 = boost::detail::variant::void_; T7 = boost::detail::variant::void_; T8 = boost::detail::variant::void_; T9 = boost::detail::variant::void_; T10 = boost::detail::variant::void_; T11 = boost::detail::variant::void_; T12 = boost::detail::variant::void_; T13 = boost::detail::variant::void_; T14 = boost::detail::variant::void_; T15 = boost::detail::variant::void_; T16 = boost::detail::variant::void_; T17 = boost::detail::variant::void_; T18 = boost::detail::variant::void_; T19 = boost::detail::variant::void_]
c:/.../include/boost/variant/variant.hpp:1385:10: note: void boost::variant<T0, T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, T17, T18, T19>::convert_construct(const boost::variant<U0, U1, U2, U3, U4, U5, U6, U7, U8, U9, U10, U11, U12, U13, U14, U15, U16, U17, U18, U19>&, long int) [with U0 = char; U1 = bool; U2 = boost::detail::variant::void_; U3 = boost::detail::variant::void_; U4 = boost::detail::variant::void_; U5 = boost::detail::variant::void_; U6 = boost::detail::variant::void_; U7 = boost::detail::variant::void_; U8 = boost::detail::variant::void_; U9 = boost::detail::variant::void_; U10 = boost::detail::variant::void_; U11 = boost::detail::variant::void_; U12 = boost::detail::variant::void_; U13 = boost::detail::variant::void_; U14 = boost::detail::variant::void_; U15 = boost::detail::variant::void_; U16 = boost::detail::variant::void_; U17 = boost::detail::variant::void_; U18 = boost::detail::variant::void_; U19 = boost::detail::variant::void_; T0_ = char; T1 = bool; T2 = boost::detail::variant::void_; T3 = boost::detail::variant::void_; T4 = boost::detail::variant::void_; T5 = boost::detail::variant::void_; T6 = boost::detail::variant::void_; T7 = boost::detail::variant::void_; T8 = boost::detail::variant::void_; T9 = boost::detail::variant::void_; T10 = boost::detail::variant::void_; T11 = boost::detail::variant::void_; T12 = boost::detail::variant::void_; T13 = boost::detail::variant::void_; T14 = boost::detail::variant::void_; T15 = boost::detail::variant::void_; T16 = boost::detail::variant::void_; T17 = boost::detail::variant::void_; T18 = boost::detail::variant::void_; T19 = boost::detail::variant::void_] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-11-08T08:16:17.667

接受的答案和其他答案不回答问题。有充分的理由从 boost::variant 中获得。

*   您想将方法添加到变体中，使其表现得更具多态性
*   你想继续使用`boost::apply_visitor(visitor(), variant)`而不跳槽

这是一个`MyVariant`继承自`boost::variant`. 该代码需要 C++11 来继承`boost::variant`.

**编辑：**在派生类中实现的诸如相等比较之类的运算符`boost::variant`不会自动起作用。这是如何`boost::variant`实现的（意外）结果，它明确防止使用模板与“外来”类型进行比较。可以通过显式重载启用运算符，如示例中所示。

```
#include<iostream>
#include<boost/variant.hpp>

struct type_size_visitor : public boost::static_visitor<unsigned> {
  template <typename T>
  unsigned operator()(const T&) const { return sizeof(T); }
};

template <typename... Types>
class MyVariant : public boost::variant<Types...>
{
  using base_type = boost::variant<Types...>;
public:
  // inherit constructors
  using base_type::base_type;

  // add a new method
  unsigned type_size() { return boost::apply_visitor(type_size_visitor(), *this); }

  /* Inheriting operators from boost::variant does not
     work as it normally would. We have to add explicit
     overloads for the operators we want to use.
  */
  bool operator==(const MyVariant& rhs) const {
    // cast rhs to base and delegate to operator in base
    return base_type::operator==(static_cast<const base_type&>(rhs));
  }
};

int main() {
  MyVariant<std::string, char> v;
  v = 1;
  std::cout << v.type_size() << " " << sizeof(char) << std::endl;
  v = std::string("foo");
  std::cout << v.type_size() << " " << sizeof(std::string) << std::endl;

  // comparison operators need workaround shown above
  MyVariant<std::string, char> a, b;
  a = 1; b = 1;
  assert(a == b);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T20:51:10.557

> 我想要一个空状态

```
boost::variant<boost::blank, bool, long, std::string> 
```

那里。那要容易得多。不需要凌乱的继承。

> 我想给出枚举类型

```
enum Type
{
  NONE,
  BOOL,
  LONG,
  STRING
};

struct GetType : public boost::static_visitor<Type>
{
  Type operator()(boost::blank) {return NONE;}
  Type operator()(bool) {return BOOL;}
  Type operator()(long) {return LONG;}
  Type operator()(const std::string&) {return STRING;}
};

//Get the type
Type t = boost::apply_visitor(GetType(), theData); 
```

那也很容易。另外，如果您向变体添加新类型，如果您不更新`GetType`以匹配，您的代码将会中断。

其他两个条件要求您使用类，但您不需要继承。你需要遏制。

```
typedef boost::variant<boost::blank, std::string, long> VarType;

class MyVariant
{
public:
    //Default construction will initialize with boost::blank.
    MyVariant(char c) : m_var(std::string(1,c)) {}
    MyVariant(const char* s) : m_var(std::string(s)) {}
    MyVariant(int v) : m_var(long(v)) {}
    MyVariant(long v) : m_var(long(v)) {}

    VarType &operator *() {return m_var;}
    const VarType &operator *() const {return m_var;}

private:
    VarType m_var;
};

...

Type t = boost::apply_visitor(GetType(), *theData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:46:57.670

最后我的实现基于**Nicol Bolas**的回答：

**`Variant.h`**

```
class Variant 
{
  public:
  Variant()                     : v_(boost::blank()) {}
  Variant(bool     v)           : v_(v)              {}
  Variant(long     v)           : v_(v)              {}
  Variant(int      v)           : v_(long(v))        {}
  Variant(double   v)           : v_(v)              {}
  Variant(const std::string& s) : v_(s)              {}
  Variant(const char*        s) : v_(std::string(s)) {}

  typedef boost::variant <boost::blank, bool, 
                          long, double, std::string> bstvar;
  enum Type {                      
    NONE, BOOL,          // above underlying types
    LONG, DOUBLE, STRING // and enum must be consistent:
  };                     // (order must be same)

  operator          bstvar&  ()       { return v_; }
  operator    const bstvar&  () const { return v_; }
  bstvar      &     operator*()       { return v_; }
  bstvar const&     operator*() const { return v_; }
  bool              empty    () const { return  type() == NONE;          }
  bool              toBool   () const { return  boost::get<bool  > (v_); }
  long              toLong   () const { return  boost::get<long  > (v_); }
  double            toDouble () const { return  boost::get<double> (v_); }
  std::string const& toStr   () const { return  boost::get<std::string> (v_); }
  std::string      & toStr   ()       { return  boost::get<std::string> (v_); }
  inline Type        type    () const { return  (Type) v_.which();       }
  static Type        type    (const std::string&);
  static std::string type    (Type t);

  private:  bstvar v_;  // Data
}; 
```

**`Variant.cpp`**

```
#include "Variant.h"
#include <sstream>
#include <algorithm> //std::transform

Variant::Type   Variant::type   (const std::string& str)
{
  std::string lower = str;
  std::transform (lower.begin(), lower.end(), lower.begin(), ::tolower);

  if (lower == "bool")     return BOOL;
  if (lower == "long")     return LONG;
  if (lower == "double")   return DOUBLE;
  if (lower == "string")   return STRING;
  else                     return NONE;
}

std::string  Variant::type  (Type t)
{
  switch (t)
  {
    case NONE:    return "none";
    case BOOL:    return "bool";
    case LONG:    return "long";
    case DOUBLE:  return "double";
    case STRING:  return "string";

    default:
      ;//see below
  }
  std::ostringstream oss;
  oss <<"Unexpected type="<< t;
  return oss.str();
} 
```

# certificate - CertUtil 静默模式。无法静默安装证书

> ID：13750839
> 
> 赞同：6
> 
> 时间：2012-12-06T19:15:16.547
> 
> 标签：certificate, windows-server-2008, citrix

有谁知道我怎么能静默安装以下？

```
C:\> certutil -importpfx -user -f -p [Password] "O:\Certificates\test2.pfx" 
```

我尝试使用该`-silent`选项，但它说它不存在。

还有其他建议吗？

证书安装导致我们的用户出现问题，因为他们无法同意安装它。Citrix 安全框出现在证书窗口后面，需要“允许”才能安装证书。一些用户可以将安全警告从后面拖到前面，但大多数用户无法这样做。

如果有人可以提供帮助，那就太好了！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T03:28:16.823

This is by design, if you could silently install user certificates it would be a hefty security breach.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-31T21:06:52.613

您可以使用如下的 vbs 脚本在登录期间调用您的 bat 文件，这将静默安装。

VBS 脚本

```
Set oShell = CreateObject ("Wscript.Shell") Dim strArgs strArgs = "cmd /c %LOGONSERVER%\netlogon\import-certificate.bat" oShell.Run strArgs, 0, false 
```

批处理脚本

```
certutil -f -user -p "PASSWORD" -importpfx "%LOGONSERVER%\netlogon\CERTIFICATE.pfx" NoRoot 
```

# sql - 将 SQL 中的 NULL 列等同起来的最佳方法是什么？

> ID：13750842
> 
> 赞同：3
> 
> 时间：2012-12-06T19:15:22.283
> 
> 标签：sql, sql-server, tsql, null, equality

我`MERGE`在两张桌子之间执行

```
MERGE indexdecomp.Constituent targ
USING (SELECT ic.ConstituentName           
       FROM   indexdecomp.IndexConstituents ic) src
ON (((targ.Name = src.ConstituentName) OR (targ.Name IS NULL AND src.ConstituentName IS NULL)))
WHEN NOT MATCHED BY TARGET THEN 
UPDATE SET
    targ.Name = src.ConstituentName
; 
```

在我的`ON`条款中，我有以下谓词：

```
(targ.Name = src.ConstituentName) OR (targ.Name IS NULL AND src.ConstituentName IS NULL) 
```

我有这个谓词，因为如果两个名称相等或两个名称都是`null，我认为它是匹配的。

是否有更好或更传统的方法来处理两`null`列之间的相等性？什么方式会产生最快的执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:20:01.657

你可以这样做：（[SQL ref](http://msdn.microsoft.com/en-us/library/ms188048.aspx)）

```
SET ANSI_NULLS OFF;

MERGE indexdecomp.Constituent targ
USING (SELECT ic.ConstituentName           
   FROM #IndexConstituents ic) src
ON (((targ.Name = src.ConstituentName)))
WHEN NOT MATCHED BY TARGET THEN 
UPDATE SET
    targ.Name = src.ConstituentName;

SET ANSI_NULLS ON; 
```

但这似乎是一个相当大的权衡，因为它把一个谓词混为一谈，而且都不是很可读。您实际上可以使用带有两个字符串参数并返回一个布尔值的 UDF 来抽象这种混乱。

就像是：

```
create function StrNullCompare(@a varchar(max), @b varchar(max))
returns int
as
begin
    if ((@a = @b) or (@a is null and @b is null)) return 1;

    return 0;
end

-- tests
select dbo.StrNullCompare('wer', 'were');
select dbo.StrNullCompare('wer', 'wer');
select dbo.StrNullCompare('hi', null);
select dbo.StrNullCompare(null, null); 
```

你的谓词变成：

```
(dbo.StrNullCompare(targ.Name, src.ConstituentName)=1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:39:42.220

你可以试试。。

```
ISNULL (targ. Name,'a magic string value') =ISNULL (src.ConstituentName,'a magic string value') 
```

当然，根据需要添加您自己的魔术字符串，例如使用 newid () 获取 guid 并使用它。

不确定这是否比 and or “更好”，但更具人类可读性；值得对这两种方法进行基准测试和测试。

# sql - 从postgres中的路径中拆分出文件名

> ID：13750846
> 
> 赞同：9
> 
> 时间：2012-12-06T19:15:31.190
> 
> 标签：sql, postgresql

我有一个包含 Windows 文件路径的字段，如下所示：

```
\\fs1\foo\bar\snafu.txt
c:\this\is\why\i\drink\snafu.txt
\\fs2\bippity\baz.zip
\\fs3\boppity\boo\baz.zip
c:\users\chris\donut.c 
```

我需要做的是找到重复文件名的数量（无论它们在哪个目录中）。所以我想找到“snafu.txt”和“baz.zip”，而不是 donut.c。

PostgreSQL（8.4）中有没有办法找到文件路径的最后一部分？如果我能做到这一点，那么我可以使用计数/组来找到我的问题孩子。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T19:55:27.340

您可以使用如下表达式轻松地将路径剥离到最后一个目录分隔符

```
regexp_replace(path, '^.+[/\\]', '') 
```

这也将匹配某些软件产生的偶尔的正斜杠。然后你只需计算剩余的文件名，如

```
WITH files AS (
    SELECT regexp_replace(my_path, '^.+[/\\]', '') AS filename
    FROM my_table
)
SELECT filename, count(*) AS count
FROM files
GROUP BY filename
HAVING count(*) >= 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:26:27.727

```
select regexp_replace(path_field, '.+/', '') from files_table; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-05T13:39:08.483

```
CREATE OR REPLACE FUNCTION basename(text) RETURNS text
    AS $basename$
declare
    FILE_PATH alias for $1;
    ret         text;
begin
    ret := regexp_replace(FILE_PATH,'^.+[/\\]', '');
    return ret;
end;
$basename$ LANGUAGE plpgsql; 
```

# eclipse - Eclipse Rename - Refactor 热键插入注册商标符号

> ID：13750847
> 
> 赞同：24
> 
> 时间：2012-12-06T19:15:37.890
> 
> 标签：eclipse, macos, pydev

以前，在突出显示 Java 文件中的变量名后使用 ALT+COMMAND+R 组合键将进入重命名重构模式。现在，组合键将突出显示的文本替换为注册商标符号。*如何让组合键进入重命名重构模式而不是插入符号？*

当前文件编码设置为 MacRoman，这是从容器继承的默认设置。据我所知，这里没有任何改变。

我在 Mac OS X 10.7.5 上使用 Eclipse Indigo（内部版本号：20110615-0604）。已安装 Eclipse IDE for Java EE Developers 1.4.0.20110615-0550 和 FreeMarker IDE SDK 1.1.0.v201006011046R-H111-GA。我认为没有任何非标准插件。

我记得最近所做的唯一更改是几周前安装了 PyDev。安装默认的 PyDev 后，ALT+COMMAND+R 在右下角打开一个上下文菜单，其中包含 2 个选项：重命名并设置下一个符号（这是用符号替换文本的补充）。我在我的首选项中禁用了 Set Next Symbol 键绑定，重新启动了 eclipse，然后再次尝试了组合键。文本仍被符号替换，但未进入重命名重构模式未打开。我卸载了 PyDev，重新启动了 eclipse，然后再次尝试了组合键。文本仍然被符号替换。

更新（2012 年 12 月）：eclipse 论坛上的另一个用户遇到了类似的问题：[http ://www.eclipse.org/forums/index.php?t=rview&goto=990973](http://www.eclipse.org/forums/index.php?t=rview&goto=990973)

更新（2013 年 1 月）：我在 PyDev 的 Jira 中打开[了 APSTUD-7664 。](https://jira.appcelerator.org/browse/APSTUD-7664)希望开发人员能够接受它并找到解决方案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-10T18:29:52.517

同样的问题（OS X 10.7.5，Eclipse Juno for Java，构建 20120614-1722，PyDev 最近安装）。以下解决方案对我有用：

1.  Eclipse > 首选项... > 常规 > 键
2.  选择重命名 - 重构（类别：重构 - Java）
3.  单击解除绑定命令
4.  单击绑定字段并键入 Command-Option-R
5.  点击确定

关于发生了什么的可能线索（我不知道）：用户列在修复绑定之前设置为“C”，之后设置为“U”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-14T13:06:17.670

Ed 的取消绑定/重新绑定技巧对我不起作用，但是将“When”从“In Windows”更改为更具体的“Editing Java Source”似乎已经成功了。

我想这有点限制，但对于我的工作流程，Java 确实是我将进行任何重构的唯一地方。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-15T01:31:02.423

如果有人仍然遇到这个问题（当您安装 PyDev 时，最新的 Eclipse Kepler 仍然存在问题），这就是对我有用的解决方案。它与 Ed 的非常相似，但我必须专门取消绑定 PyDev 命令。

进入 Preferences > General > Keys 菜单：

![在此处输入图像描述](../Images/6948a951e2fca2f3f54fbf493f8461ac.png)

按过滤框中的“重构”一词过滤。您将看到存在冲突（用户列中的“C”）：

![在此处输入图像描述](../Images/f9317dd6769bfb3072b1c97204f8f743.png)

您需要通过突出显示重命名 - 重构命令进行排序并按绑定排序。然后取下过滤器。这将显示所有冲突（包括正在搞砸的 PyDev 冲突）

![在此处输入图像描述](../Images/c6477e9eb6d24ca0f7d8abccc5201026.png)

单击绑定到相同组合键的 PyDev 命令单击“取消绑定命令”

现在什么都不会绑定到该组合键，所以只需返回正确的命令“重命名 - 重构”并将 Command-Option-R 重新绑定到它。

![在此处输入图像描述](../Images/81691b6d7db168c0421292747787b8c1.png)

完成后，它将显示为用户定义的命令（用户列中的 U），但它会在项目菜单和代码编辑器中正常工作。唯一不起作用的是绑定到它的 PyDev 命令。如果您愿意，请随意将该命令绑定到其他组合键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T23:34:23.173

我认为..解决方案是完全重置。所以我做如下。我的环境是 Eclipse 开普勒和 Mac 山狮。

1.  终止日食。
2.  复制工作空间以确保安全。（也许它没用，但为了安全......）
3.  **从工作区中删除 .metadata**隐藏文件夹。
4.  启动 Eclipse，然后您会看到没有项目的全新工作台！
5.  现在，从您的工作区文件夹中**导入现有项目。**
6.  就这样。您的默认重命名密钥已恢复。你已经刷新了环境。

这很简单。

有一个美好的发展时间。

# linux - Linux内核模式下的进程调度

> ID：13750852
> 
> 赞同：5
> 
> 时间：2012-12-06T19:16:02.367
> 
> 标签：linux, scheduling

这是从Wiki引用的一些描述

> Linux 内核在特定条件下提供抢占式调度。在内核版本 2.4 之前，只有进程是抢占式的，即除了时间片到期之外，如果更高的动态优先级进程进入 TASK_RUNNING 状态，则当前进程在用户模式下的执行将被中断。在 Linux 2.6 中，添加了中断执行内核代码的任务的能力，尽管并非内核代码的所有部分都可以被抢占。

然后它也这么说，

> 抢占改善了延迟，提高了响应能力，并使 Linux 更适合桌面和实时应用程序。旧版本的内核有一个所谓的大内核锁，用于在整个内核之间进行同步。这最终在 2011 年被 Arnd Bergmann 删除

那么对于当前的 linux 内核，内核抢占是有条件的，上述说法是否成立？例如，如果一个进程通过进行系统调用被困在内核模式中，这个进程将不会处于抢占式调度之下？

我在哪里可以找到一些关于用户模式和内核模式下 linux 调度的最新介绍文章/书籍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:49:46.360

当然，内核抢占是有条件的。您不希望内核在持有独占锁或写入设备驱动程序中对时间敏感的硬件寄存器时切换任务。

但是，Linux 内核会尽最大努力将这些条件最小化，以便尽可能快地进行抢占。

请注意，只有在编译选项 CONFIG_PREEMPT 为 yes 时，才会将这种内核内抢占编译到内核中。还有 CONFIG_PREEMPT_VOLUNTARY 仅在内核显式检查时才进行任务切换。

内核抢占是有代价的。快速切换任务需要做大量大部分浪费的家务工作，而不是实际工作。这会减慢整个系统的速度并导致完成的工作减少。这就是存在这些编译选项的原因。为数据库或 Web 服务器构建的 Linux 内核根本不应该使用抢占。为 HPC 构建的内核有时会被修改为每秒只切换一次任务，或者更少。

对于实时任务，这一切都会发生变化。这些任务依赖于在可靠的时间范围内快速做出反应。默认的 Linux 内核在这方面做得很好，但是有一个名为“-rt 补丁”的补丁集使它非常好。补丁集做了各种各样的事情，比如优先处理中断处理程序和更改内核锁，以便稍后可以删除和重新启动锁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:53:51.853

CPU 调度决策可能发生在进程：

```
1\. Switches from running to waiting state (e.g. I/O request)
2\. Switches from running to ready state (e.g. Interrupt)
3\. Switches from waiting to ready (e.g. I/O completion)
4\. Terminates 
```

1 和 4 下的调度是非抢占式的，所有其他调度都是抢占式的，必须处理操作（系统调用）可能不完整的可能性。

是的，Linux 在某些条件下提供抢占式调度，这与某些 Unix 变体不同，其中内核在没有抢占的情况下调度直到完成。在 Linux 2.6 中，只要内核不持有锁并且可以安全地重新调度，内核就可以抢占运行任务。

```
Older versions of the kernel had a so-called big kernel lock for synchronization 
across the entire kernel. 
```

指每个用户级线程只映射到一个内核线程。

# ios - 为什么不推荐使用“组表视图背景颜色”？

> ID：13750853
> 
> 赞同：0
> 
> 时间：2012-12-06T19:16:02.050
> 
> 标签：ios, uikit

在新 iPad 上发现了一些 bug，tableView 的背景变得完全透明。问题是由“组表视图背景颜色”被弃用引起的。（虽然在 iOS6.0 的 iPhone5 上完全没问题）

我知道大多数弃用都是有充分理由的，但为什么要弃用呢？开发人员可以利用任何特殊优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:24:52.740

在 Apple 讨论板上，一位 Apple 工程师解释说，在 iOS 6 中，表格视图背景已被调整到无法再由 UIColor 表示的程度。表视图现在使用背景视图。

# javascript - 如何在 Meteor 中渲染嵌套集合？

> ID：13750854
> 
> 赞同：4
> 
> 时间：2012-12-06T19:16:07.187
> 
> 标签：javascript, html, meteor, handlebars.js

**摘要：**
嵌套在父类别中的子类别不会在 Meteor 模板中呈现。

**详细信息：**
考虑“类别”的数据模型，如下所示：

```
// Model Schema
Category {
   idCategory : 20, (id of the category itself)
   idCategoryParent : 0, (idCategory of our parent category)
   defaultLabel : "Movies" (our label)
} 
```

有父类和子类。父类别的 idCategoryParent 属性值为 0。子类别将其父类别的 idCategory 存储为其 idCategoryParent 属性。我正在尝试遍历这些类别的集合并以下列方式呈现它们：

```
<b>Movies</b> // parent category is in bold
<ul> // child categories are rendered as an unordered list
  <li>Horror</li> 
  <li>Comedy</li>
  <li>Action</li>
  <li>Drama</li>
</ul>

<b>Music</b>
<ul>
  <li>Rock</li> 
  <li>Classical</li>
  <li>Ambient</li>
</ul> 
```

但是，这是我实际得到的：

```
<b>Movies</b>
<ul> // empty...
</ul>

<b>Music</b>
<ul>
</ul> 
```

**源代码：**

```
// How we get the 'categories_parents' data
Template.content.categories_parents = function (){ 

    /*
    * Get all parent categories (categories with an idCategoryParent of 0)
    */
    var parents = Categories.find({idCategoryParent:0});
    var pCount = parents.count();

    for (var i = 0; i < pCount; i++){

            var pId = parents.db_objects[i]['idCategory'];
            /* 
            * Get all child categories of the parent (categories with
            * an idCategoryParent equal to value of parent category's idCategory).
            */
            var children = Categories.find({idCategoryParent:pId});
            var cCount = children.count();

            /*
            * Assign the child categories array as a property of the parent category
            * so that we can access it easily in the template #each expression
            */
            parents.db_objects[i]['children'] = children;
    }

    return parents;
}

// This is our template
<template name="content">
<h1>Categories</h1>
    {{#each categories_parents}}
        <b>{{defaultLabel}}</b><br />
        <ul>
            {{#each children}}
            <li>{{defaultLabel}}</li>
            {{/each}}
        </ul>
    {{/each}}
</template> 
```

**我在故障排除中尝试过的其他模板配置：**

```
{{#each children}}
<li>A Child Exists Here</li> // Even this never rendered... no children?
{{/each}} 
```

任何关于为什么会发生这种情况的线索将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T09:19:54.807

你的模型有点不确定......考虑一下

`{name:"Category name", parent:"_id of parent category"}`

好的，这要简单得多。创建一个类别。

```
var moviesId = Categories.insert({name:"Movies"});
Categories.insert({name:"Horror",parent:moviesId}); 
```

这很容易。现在，以一种有效的方式渲染`{{#each}}`：

```
Template.categories.categories = function(parent) {
  if (parent) {
    return Categories.find({parent:parent}).fetch();
  } else {
    return Categories.find({parent:{$exists:false}});
  }
} 
```

你可能会看到这是怎么回事......

```
<template name="categories">
   {{#each categories}}
   <ul>{{name}}
       {{#each categories _id}}
          <li>{{name}}</li>
       {{/each}}
   </ul>
   {{/each}}
</template> 
```

现在我不确定`{{#each}}`块助手在调用另一个助手时是否可以接受函数参数。如果没有...

```
Template.categories.categories = function() {
  return Categories.find({parent:{$exists:false}}).map(function(parentCategory) {
    return _.extend(parentCategory,
                    {children:Categories.find({parent:parentCategory._id}).fetch()});
  }); 
} 
```

这是一个真正的笨蛋。它返回具有新“子”列表属性的父类别，其中包含所有子类别。现在你可以这样做：

```
<template name="categories">
   {{#each categories}}
   <ul>{{name}}
       {{#each children}}
          <li>{{name}}</li>
       {{/each}}
   </ul>
   {{/each}}
</template> 
```

聪明，嗯？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:56:14.980

我不知道 db_objects，当我尝试访问游标上的该属性（这是`find()`返回的）时，它是`null`.

您可以改为获取与您的查询匹配的项目，然后进行迭代：

```
Template.content.categories_parents = function (){ 

    var parents = Categories.find({idCategoryParent:0}).fetch(); // Returns an array.

    for (var i = 0; i < parents.length; i++){

        var pId = parents[i]['idCategory'];

        var children = Categories.find({idCategoryParent:pId});

        // No need for array here, cursor is fine.
        parents.db_objects[i]['children'] = children; 
    }

return parents;
} 
```

我自己是新手，所以也许有一种更有效的方法，但我目前不知道。

**埃里克评论后更新。**

**js 文件如下所示：**

```
Categories = new Meteor.Collection("categories");

if (Meteor.isClient) {
    Template.categories.categories = function () {
        var parents = Categories.find({idCategoryParent:0}).fetch();

        for (var i = 0; i < parents.length; i += 1) {
            var pId = parents[i]['idCategory'];

            var children = Categories.find({idCategoryParent:pId});

            parents[i]['children'] = children;

        }
        return parents;
    };
}

if (Meteor.isServer) {
    Meteor.startup(function () {
        Categories.remove({});
        var data = [
            {idCategoryParent: 0, idCategory: 1, label: "Movies"},
            {idCategoryParent: 1, idCategory: 0, label: "Science Fiction"},
            {idCategoryParent: 1, idCategory: 0, label: "Drama"},

            {idCategoryParent: 0, idCategory: 2, label: "Music"},
            {idCategoryParent: 2, idCategory: 0, label: "Jazz"},
            {idCategoryParent: 2, idCategory: 0, label: "Piano"}
          ];

        for (var i = 0; i < data.length; i += 1) {
            Categories.insert(data[i]);
        }
  });
} 
```

**html 文件如下所示：**

```
<head>
  <title>nested_template</title>
</head>

<body>
  {{> categories}}
</body>

<template name="categories">
    <h1>Categories</h1>
    {{#each categories}}
        <b>{{label}}</b>
        <ul>
        {{#each children}}
            <li>{{label}}</li>
        {{/each}}
        </ul>
    {{/each}}
</template> 
```

它对我来说很好用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T15:18:20.767

解决了。

我的解决方案是从模板中删除 {{#each}} 逻辑并将其替换为单个把手帮助器表达式，然后一次性传回所需的 html。html 是从 Categories 集合的光标中的数据生成的。

不过，我不太确定在我的逻辑中包含所有这些 html - 这是糟糕的设计吗？如果是这样，我将遵循更好的答案。

```
// This is the new template
<template name="content">
<h1>Categories</h1>
    {{listCategories}}
</template>

// Handlebars helper 
Handlebars.registerHelper('listCategories', function() {

  var parents = Categories.find({idCategoryParent:0});
  var countParents = parents.count();
  var string = '';

  // iterate over each parent category  
  for(m = 0; m < countParents; m++){

      // Get the parents category id
    var pId = parents.db_objects[m].idCategory;
    var children = Categories.find({idCategoryParent:pId});
    var count = children.count();

      /*
      * Build the Parent Category html
      * Example: <b>Movies</b><ul>
      */
    string = string + '<b>' + parents.db_objects[m].defaultLabel + '</b><ul>';

    // iterate over each child category
    for(var i = 0; i < count; i++){

         /*
         * Build the child category html
         * Example: <li>Horror</li>
         */
       string = string + '<li>' + children.db_objects[i]['defaultLabel'] + '</li>';
    }

      // Close up the unordered list
    string = string + '</ul>';

  }

  // Return the string as raw html
  return new Handlebars.SafeString(string);

});

// Rendered out the result correctly like so:
<b>Movies</b>
<ul>
  <li>Horror</li> 
  <li>Comedy</li>
  <li>Action</li>
  <li>Drama</li>
</ul>

<b>Music</b>
<ul>
  <li>Rock</li> 
  <li>Classical</li>
  <li>Ambient</li>
</ul> 
```

# ios - NSAttributedString 颜色测试

> ID：13750860
> 
> 赞同：8
> 
> 时间：2012-12-06T19:16:20.383
> 
> 标签：ios, ios6, compare, uicolor, nsattributedstring

比较或测试 NSAttributed 字符串的特定颜色属性的正确方法是什么？

例如，我想知道文本选择是否有红色文本。正如您在下面看到的，我尝试了几种方法，但它们都没有导致匹配。我看到屏幕上的文本变成红色，并且记录属性返回： UIDeviceRGBColorSpace 1 0 0 1

```
- (BOOL)isRedWithAttributes:(NSDictionary *)attributes
{
    BOOL isRedWithAttributes = NO;
    if (attributes != nil)
    {
// if ( [attributes objectForKey:NSForegroundColorAttributeName] == [UIColor redColor] )    
// if ( [attributes objectForKey:NSForegroundColorAttributeName] == @"UIDeviceRGBColorSpace 1 0 0 1" )

       if ( [attributes objectForKey:NSForegroundColorAttributeName] == [UIColor colorWithRed:1 green:0 blue:0 alpha:1] )
       {
            isRedWithAttributes = YES;
        }
        else
        {
            isRedWithAttributes = NO;
        }
    }
    return isRedWithAttributes;
} 
```

这是我为测试传递属性的方式：

```
NSAttributedString *selectedString = [attributedString attributedSubstringFromRange:selectedRange];
        [selectedString enumerateAttributesInRange:NSMakeRange(0, [selectedString length]) 
options:NSAttributedStringEnumerationLongestEffectiveRangeNotRequired
                              usingBlock:^(NSDictionary *attributes, NSRange range, BOOL *stop)
        {
            UIFont *fontFace = [attributes objectForKey:NSFontAttributeName];       
            BOOL isRedWithAttributes = [fontFace isRedWithAttributes:attributes];
            if (isRedWithAttributes)
            {
                NSLog(@"detected red. set selected");
                [self.redButton setSelected:YES];
            }
            else
            {
                NSLog(@"detected not red. do not set selected");
                [self.redButton setSelected:NO];
            }
} 
```

我认为这并不重要，但为了完整起见，这是我将文本设置为红色的方式。

```
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithAttributedString:self.synopsisTextView.attributedText];
[attributedString addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:selectedRange];
self.synopsisTextView.attributedText = attributedString; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T02:04:01.263

Objective-C 是 C 的严格超集。Objective-C 对象存在于堆上并通过指针跟踪。这样做的最终结果是测试：

```
[attributes objectForKey:NSForegroundColorAttributeName] == 
[UIColor colorWithRed:1 green:0 blue:0 alpha:1] 
```

测试身份而不是平等。也就是说，不是测试两个对象是否具有相同的值，而是测试它们是否是相同的物理对象，位于内存中的相同地址。C 不允许运算符重载，因此`==`运算符在 Objective-C 中的含义与在 C 中的含义完全相同。您正在比较两个指针。他们碰巧指向Objective-C对象既不存在也不存在。

你可能想要：

```
[[attributes objectForKey:NSForegroundColorAttributeName] isEqual:
    [UIColor colorWithRed:1 green:0 blue:0 alpha:1]] 
```

这将允许`UIColor`对象应用它认为将建立平等的任何测试。

唯一可能的警告是，`UIColor`只有当它们相对于相同的颜色空间定义并且具有相同的系数时，才认为颜色是相等的。假设您总是在 RGBA 中定义所有不应该产生影响的颜色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T02:07:21.343

尝试在属性字典中测试`NSForegroundColorAttributeName`对象，而不是`NSFontAttributeName`像这样：

```
NSAttributedString *selectedString = [attributedString attributedSubstringFromRange:selectedRange];
[selectedString enumerateAttributesInRange:NSMakeRange(0, [selectedString length]) 
                                   options:NSAttributedStringEnumerationLongestEffectiveRangeNotRequired 
                                usingBlock:^(NSDictionary *attributes, NSRange range, BOOL *stop) {
    UIColor *fgColor = [attributes objectForKey:NSForegroundColorAttributeName];       
    if ([fgColor isEqual:[UIColor redColor]]) {
        NSLog(@"detected red. set selected");
        [self.redButton setSelected:YES];
    } else {
        NSLog(@"detected not red. do not set selected");
        [self.redButton setSelected:NO];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:21:37.773

您必须`-isEqualToColor:`为比较创建一个方法。UIColor 仅从 NSObject 继承一个`-isEqual:`，如果它们的哈希值相等，这将看到 UIColor 的两个实例相等。

这种方法相当容易构造，您只需获得独立于颜色空间的 RGB+A 值，并且如果所有这些值都相同，则颜色相等。

如果你很懒，你会使用`CGColorEqualToColor`，但如果一个是灰色（2 个组件）而另一个是 RGBA 颜色（4 个组件），则不会报告相等性。

这可能是 Apple 没有实施`-isEqualToColor:`方法的原因，因为如果组件的数量应该发挥作用，或者只是 RGB 值，意见会大相径庭。因此，我建议您找到自己的定义并相应地进行比较。

PS：您可能会发现 isEqual 在某些情况下有效，因为 UIColor 保留了一些标准颜色的缓存，例如，如果您请求红色，那么您将获得相同的实例。相同的实例意味着相同的散列，因此“相等”。但正如我之前所说的那样，依赖于实现并不是很好的风格。

# wcf - 将 WCF 服务从 WsHttpBinding 转换为 NetTcpBinding 时发生 CommunicationException

> ID：13750876
> 
> 赞同：1
> 
> 时间：2012-12-06T19:17:04.767
> 
> 标签：wcf, nettcpbinding

我有一个自托管的 .Net 4.0 WCF 服务，出于性能原因，我正在尝试将其从 WsHttpBinding 转换为 NetTcpBinding。该服务与 WsHttpBinding 一起工作得很好。

奇怪的是，该服务似乎在切换到 NetTcpBinding 后工作。（服务将消息发布到企业消息系统，并且消息被发布并且客户端没有收到错误）但是以下错误被写入服务器日志：

```
Error: Service: MessageSenderService, Details: System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused
by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue.
Local socket timeout was '10675199.02:48:05.4775807'. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
   at System.ServiceModel.Channels.SocketConnection.HandleReceiveAsyncCompleted()
   at System.ServiceModel.Channels.SocketConnection.BeginReadCore(Int32 offset,Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
   --- End of inner exception stack trace ---
   at System.ServiceModel.Channels.SocketConnection.BeginReadCore(Int32 offset,Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
   at System.ServiceModel.Channels.TracingConnection.BeginRead(Int32 offset, Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
   at System.ServiceModel.Channels.SessionConnectionReader.BeginReceive(TimeSpan timeout, WaitCallback callback, Object state)
   at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult.PerformOperation(TimeSpan timeout)
   at System.ServiceModel.Channels.SynchronizedMessageSource.SynchronizedAsyncResult`1..ctor(SynchronizedMessageSource syncSource, TimeSpan timeout, AsyncCallback callback, Object state)
   at System.ServiceModel.Channels.TransportDuplexSessionChannel.BeginReceive(TimeSpan timeout, AsyncCallback callback, Object state)
   at System.ServiceModel.Channels.TransportDuplexSessionChannel.TryReceiveAsyncResult..ctor(TransportDuplexSessionChannel channel, TimeSpan timeout, AsyncCallback callback, Object state)
   at System.ServiceModel.Channels.TransportDuplexSessionChannel.BeginTryReceive(TimeSpan timeout, AsyncCallback callback, Object state)
   at System.ServiceModel.Dispatcher.ErrorHandlingReceiver.BeginTryReceive(TimeSpan timeout, AsyncCallback callback, Object state) 
```

同样，使用 WsHttpBinding 时，服务器日志上不会出现错误。

服务器配置：

```
 <service behaviorConfiguration="debugEnabled" name="My.Service">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration="netTcpBindingConfig"
          contract="My.Service.Contract" />
        <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />
      </service>
....
    <behaviors>
      <serviceBehaviors>
        <behavior name="debugEnabled">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceThrottling maxConcurrentSessions="200" maxConcurrentCalls="500" maxConcurrentInstances="200"/>
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
....
    <bindings>
      <netTcpBinding>
        <binding name="netTcpBindingConfig" maxReceivedMessageSize="5242880" closeTimeout="00:01:00" receiveTimeout="00:01:00" sendTimeout="00:01:00" openTimeout="00:01:00">
          <readerQuotas maxArrayLength="5242880" />
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings> 
```

我们在代码中构建客户端绑定，而不是配置。看起来像这样：

```
return new NetTcpBinding(SecurityMode.None, reliableSessionEnabled)
{
    MaxBufferPoolSize = Int32.MaxValue,
    MaxReceivedMessageSize = Int32.MaxValue,
    ReaderQuotas = new XmlDictionaryReaderQuotas
    {
        MaxArrayLength = Int32.MaxValue,
        MaxDepth = Int32.MaxValue,
        MaxStringContentLength = Int32.MaxValue
    },
    ReceiveTimeout = TimeSpan.FromMinutes(1.0),
    CloseTimeout = TimeSpan.FromMinutes(1.0),
    OpenTimeout = TimeSpan.FromMinutes(1.0),
    SendTimeout = TimeSpan.FromMinutes(1.0)
}; 
```

有什么想法吗？

编辑：我想补充一点，我在每次调用服务时都会看到错误，而不仅仅是在负载下。请求和响应消息非常小，因此可能与消息大小无关。该错误几乎是立即写入的，因此它不是超时问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:39:04.663

修复。

事实证明，我没有正确关闭客户端代理。无论出于何种原因，这不会导致 WsHttpBinding 出现问题，但使用 NetTcpBinding 会导致该错误。

将客户端代理放入 using 块后，问题就消失了。

# jsf - Primefaces 数据表不更新

> ID：13750877
> 
> 赞同：0
> 
> 时间：2012-12-06T19:17:05.957
> 
> 标签：jsf, primefaces

当我从“Create.jsf”页面添加一行并转到“List.jsf”查看数据表时，我在添加行之前得到了相同的结果。我有两个解决方案： 1 - 每次我想查看新行或添加一个按钮来更新数据表时，我都必须清理浏览器缓存。或者我将控制器从 SessionScope 更改为 RequestScope（它可以工作，但这不是一个好主意，因为每次加载列表都需要很多时间）。

请问还有其他解决方案吗？

谢谢 ：）

# d3.js - 在 D3 中绘制半径

> ID：13750879
> 
> 赞同：4
> 
> 时间：2012-12-06T19:17:07.097
> 
> 标签：d3.js

抱歉，如果这非常简单，我已经尝试寻找解决方案。

在 D3 中，我可以通过定义这个来执行弧：

```
var ringBannerCcwArc = d3.svg.arc()
.innerRadius(420)
.outerRadius(470)
.startAngle(0)
.endAngle(function(t) {return t * -1 * 2 * Math.PI / 6; }); 
```

然后在此处的 DOM 中定义它：

```
labels.append("path")
.attr("id", "ring-banner"); 
```

然后在适当的时候我可以做：

```
labels.transition.select("#ring-banner").style("fill", "red")
.attrTween("d", function() { return ringBannerCcwArc }); 
```

这将产生一个红色的弧形“标签”，从 0 开始，在任何地方停止

```
t * -1 * 2 * Math.PI / 6 
```

产生一个角度（是的，60度，但我打算让它成为一个可变的结果）。

**我**想做的只是在“endAngle”的半径上创建一条从这个横幅向外延伸的线（这样我就可以构建一个动态驱动的显示）。

像这样的图像： ![img 显示我的 d3 目标](../Images/d1067be9541d87580cf59a95a0324519.png)

**我的目标**是动态地将数据附加到它，并利用 D3 的惊人功能。因此，一旦我了解了如何绘制上述解决方案，我就想知道最终线 (x2,y2) 的结果坐标。线本身可以是一个设定的长度（例如，50），但我将如何确定它的位置以便我可以将最终区域附加到它？

像这样的图像： ![在此处输入图像描述](../Images/8712e51437b2caa755db9a322c00251e.png)

再次，如果这看起来很明显，我深表歉意。谢谢你的帮助。

**编辑：** 最初的问题是关于我使用 D3 - 创建 ringBannerArc - 然后想要进入坐标系。因此，正如两位受访者所说，这是一个基本的三角问题，但这并不是真正的问题。

最后，答案是 d3 没有按照我的要求做。但它可以轻松执行解决方案。如果像我一样，您正在努力实现 d3 并理解它是非常独特（并且非常强大）的数据可视化方法，那么您可能会发现这些链接很有帮助。感谢[d3 Google Group](https://groups.google.com/forum/?fromgroups=#!forum/d3-js)的伙计们。

有用的贡献者：

**伊恩约翰逊：** 首先你想知道如何从一个点到另一个点画一条线。这就是你想要的最终结果，如果你不能为任意行做到这一点，你就不能为你想要的行做到这一点。所以让我们从那里开始： http: [//tributary.io/inlet/4229462/](http://tributary.io/inlet/4229462/) 第二部分是计算你要绘制的圆上的点。但在您这样做之前，您应该进行设置，以便您可以轻松验证该点在哪里。所以让我们画出整个圆，然后画一个我们可以使用的点：http: [//tributary.io/inlet/4229477/](http://tributary.io/inlet/4229477/) 现在让我们尝试根据输入半径将该点放置在圆上的某个点上： [http ://tributary.io/inlet/4229496/](http://tributary.io/inlet/4229496/)一旦我们可以控制那个点，我们就绕了一圈；）并移动这条线 [http://tributary.io/inlet/4229500/](http://tributary.io/inlet/4229500/)

**Chris Viau：**用一个很好的辅助函数包裹起来：http: [//jsfiddle.net/christopheviau/YPAYz/](http://jsfiddle.net/christopheviau/YPAYz/)推荐一本 Scott Murray 为初学者写的好书：http: [//ofps.oreilly.com/titles/9781449339739/index .html](http://ofps.oreilly.com/titles/9781449339739/index.html)

**Scott Murray：**对 d3 作者撰写的白皮书进行了精彩的参考 - 对于我们这些喜欢了解具体细节的人：http: [//vis.stanford.edu/files/2011-D3-InfoVis.pdf](http://vis.stanford.edu/files/2011-D3-InfoVis.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:23:02.493

这本质上是一个基本的三角学问题。

对于一个圆，如果角度从垂直开始顺时针方向，并且您的坐标是正常的屏幕坐标，

```
x = cx + sin(angle) * r
y = cy + cos(angle) * r 
```

根据这些，您可以简单地计算任何一条线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:21:11.107

首先，您想知道如何从一个点到另一个点画一条线。这就是你想要的最终结果，如果你不能为任意行做到这一点，你就不能为你想要的行做到这一点。

第二部分是计算要绘制的圆上的点。但在您这样做之前，您应该进行设置，以便您可以轻松验证该点在哪里。所以让我们画出整个圆，然后画一个我们可以使用的点：http: [//tributary.io/inlet/4229477/](http://tributary.io/inlet/4229477/)

现在让我们尝试根据使用 trig 的输入半径将该点放置在圆上的某个点上，一旦我们可以控制该点，我们就来一个完整的圆；）并移动线 [http://tributary.io/inlet/4229500/](http://tributary.io/inlet/4229500/)

# c++ - drawScanlineWithDepth - 优化

> ID：13750883
> 
> 赞同：0
> 
> 时间：2012-12-06T19:17:16.967
> 
> 标签：c++, c, performance, optimization, drawing

我有一些程序来绘制具有深度的扫描线 - 它将 xs 作为 ax start xk 作为 ax end，y 和 zs 作为 xs 处的 z-depth 和 zk 作为 zk 中的 z-depth（z 值将线性形式 xs 更改为 xk） Float ram 中的 deptht 缓冲区用于深度测试

这里是

```
 inline void drawScanlineWithDepth(int y, int xs, int xk, float zs, float zk, unsigned color)
   {
    if(y<0)         return;       //clip
    if(y>=CLIENT_Y) return;       //

    if(xs>xk)  // swap to assure xs is on left xk at right
     {
      int temp = xs; xs=xk; xk=temp;
      float tempp = zs; zs=zk; zk=tempp;
    }

    if(xs<0)     //cut left end to 0
    {

      if(xk<0) return;

      float dod_zs = (-xs)*float(zk-zs)/float(xk-xs);
      zs += dod_zs;

      xs=0;
   }

     if(xk>=CLIENT_X)  //cut right end to CLIENT_X-1
    {
      if(xs>=CLIENT_X) return;

     float sub_zk = (xk-(CLIENT_X-1))*float(zk-zs)/float(xk-xs);
     zk -= sub_zk;

     xk = CLIENT_X-1;

    }

    int len = xk-xs;
    int yc = CLIENT_Y-y-1; //reverse y coordinate becouse blitter reverses it

    int adr_        =   yc*CLIENT_X + xs;
    int adr_depth  =  ( yc<<12 ) +   xs;    // depth[] is a static table with 4096 width 

    float*     db =  ((float*) depth) + adr_depth;
    unsigned* adr = ((unsigned*)pBits) + adr_; 

   if(len<=3) //unwind short scanlines
   {

     if(len==0)
     {
      if(zs< *db) *db = zs, *adr = color;
      return;
     }
     else if(len==1)
    {
      if(zs< *db) *db = zs, *adr = color; db++; adr++;
      if(zk< *db) *db = zk, *adr = color;
      return;
     }
    else if(len==2)
    {
     float zs_1 = zs + len*0.5;

     if(zs  <*db)   *db = zs,   *adr = color;  db++; adr++;
     if(zs_1<*db)   *db = zs_1, *adr = color;  db++; adr++;
     if(zk  <*db)   *db = zk,   *adr = color;
     return;
    }

   else if(len==3)
   {
     float zs_1 = zs + (len)*(1./3.);
     float zs_2 = zs + (len)*(2./3.);

     if(zs  < *db)    *db = zs   , *adr = color;   db++; adr++;
     if(zs_1< *db)    *db = zs_1 , *adr = color;   db++; adr++;
     if(zs_2< *db)    *db = zs_2 , *adr = color;   db++; adr++;
     if(zk  < *db)    *db = zk   , *adr = color;
     return;
    }
}

 if(len==0) ERROR_("len == 0");
 if(len<0)  ERROR_("len < 0");

 float dz = float(zk-zs)/float(len);

 float z = zs;

 for(int i=0; i<=len; i++)
 {
   if(z < *db)  //depthtest
   {
     *db = z;        //set pixel
     *adr = color;
   }

 adr++;
 db++;
 z+=dz;
 }

 } 
```

对于 1、2、3、4 长度的上述短扫描线的“展开”循环使其更快，但随着更多的展开，我没有看到太大的改进可以优化更多吗？

连

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:59:32.883

优化的一件非常重要的事情是考虑最重要的工作负载是什么。是绘制了很多短（ish）跨度还是绘制了大部分非常长的跨度？优化的主要目标在每种情况下都是不同的。

此外，您使用的处理器也很重要；分支预测是否未命中（即整体分支）会减慢您的速度。

短跨度：

有一点是，将一些测试（y 裁剪等）移到此函数之外是一个好主意，以确保根本不会使用这些 Y 值调用它。

换边也一样；您也可以展开这些案例。

长跨度：

答案取决于您的编译器和 CPU；使用一些多媒体扩展作为 SSE 将是一个好主意。此外，您可以展开 for() 内的循环以在一次迭代中执行两个像素以赢得一点点（除非您可以让编译器为您执行此操作；您是否查看了程序集输出并调整了优化器设置?)

# magento - 从购物车中获取 magento 小计

> ID：13750885
> 
> 赞同：7
> 
> 时间：2012-12-06T19:17:18.197
> 
> 标签：magento, magento-1.9

我目前正在使用此代码段来显示我的 Magento 商店顶部购物车中的购物车总数。我的问题是，当产品放入购物车时，它并不总是更新，它只是显示 0 美元，尤其是可配置的产品。但是，当第二个产品放入购物车时，它又可以工作了。

我是否遗漏了什么，是否应该在这段代码之前进行某种“检查”？

```
<?php echo Mage::helper('checkout')->formatPrice($this->getSubtotal()) ?> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T05:16:25.997

您也可以尝试以下对我有用的代码

```
<?php echo Mage::helper('checkout/cart')->getQuote()->getSubtotal() ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:30:13.590

确保您的顶部购物车块扩展了相关的块类型，例如`Mage_Checkout_Block_Cart_Sidebar`. 如果这样做，您将可以访问有用的功能，从而节省您重写不必要的代码。

例如，如果您扩展`Mage_Checkout_Block_Cart_Sidebar`- 您可以调用`getSubtotal()`

另一种方法是使用以下内容：

```
Mage::getSingleton('checkout/session')->getQuote()->getSubtotal(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-04T10:00:19.743

您可以使用以下代码：

```
$subtotals= Mage::getSingleton('checkout/session')->getQuote()->getSubtotal();

echo $formattedPrice = Mage::helper('core')->currency($subtotals , true, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-24T00:05:43.707

以上均不适合我，但我能够使用以下方法获得小计：

```
$orderObj = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
$orderSubTotal = $orderObj->getSubtotal();
echo $orderSubTotal; 
```

这指的是success.phtml 页面。

# html - 对齐选择和输入

> ID：13750890
> 
> 赞同：4
> 
> 时间：2012-12-06T19:17:36.503
> 
> 标签：html, css, alignment, label, fieldset

**是否可以在不指定 WIDTH**大小、**不使用表格**和使用**相同 HTML**的情况下内联对齐 SELECT 和 INPUT ？见图片。现场示例：http: [//jsfiddle.net/N4hpQ/](http://jsfiddle.net/N4hpQ/) 谢谢。

```
<html>
<head>
<style>

fieldset {
display: inline-block;
}

fieldset input,
fieldset select{
float: right;
margin-left: 5px;   
}

fieldset p {
text-align: right;
}

</style>
</head>
<body>

<fieldset>          
<p><label>First Name: </label><input type="text" /></p>
<p><label>Second Name: </label><input type="text" /></p>
<p><label>Country: </label><select><option>Choose</option></select></p>
<p><label>Age: </label><select><option>Choose</option></select></p>
</fieldset> 

</body>
</html> 
```

![图片](../Images/72d5f0a798147161d2d5a5955c0282f6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:34:39.660

您可以使用 css`display: table;`来实现这一点。

**HTML**

```
<fieldset>
    <p>
        <label>First Name: </label>
        <input type="text" />
    </p>
    <p>
        <label>Second Name: </label>
        <input type="text" />
    </p>
    <p>
        <label>Country: </label>
        <select>
            <option>Choose</option>
        </select>
    </p>
    <p>
        <label>Age: </label>
        <select>
            <option>Choose</option>
        </select>
    </p>
</fieldset>
​ 
```

**CSS**

```
fieldset {
    display: table;
}
fieldset p {
    display: table-row;
}
fieldset input, 
fieldset select, 
fieldset label {
    display: table-cell;
    margin: 3px;
}
fieldset label {
    text-align: right;
} 
```

**[演示](http://jsfiddle.net/W3B5S/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T19:55:03.343

没有`TABLE`或`width`。

CSS：

```
FIELDSET {
    display: inline-block;
    line-height: 200%;
}
.labels {
    text-align: right;
    float: left;
    margin-right: 5px;
}
.inputs {
    float: left;
} 
```

和 HTML：

```
<fieldset>          
    <div class="labels">
        <label>First Name: </label><br />
        <label>Second Name: </label><br />
        <label>Country: </label><br />
        <label>Age: </label>
    </div>
    <div class="inputs">
        <input type="text" /><br />
        <input type="text" /><br />
        <select><option>Choose</option></select><br />
        <select><option>Choose</option></select>
    </div>
</fieldset> 
```

还有[小提琴](http://jsfiddle.net/RMwmV/2/)

* * *

**编辑**

看来您已经编辑了您的问题。如果需要相同的 HTML（如您的示例），我的回答不再有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:46:55.077

可能的？是的，这里有一个快速的技巧来做到这一点：

将您的标签向左浮动，将您的输入向右浮动，然后给输入一个边距，以将它们放置在您的标签旁边。

所以看起来像这样：

```
p label{
    float:left;
}
p input{
    float:right;
    margin-right: /*whatever value you need this to be to look good*/;
} 
```

这是[jsfiddle](http://jsfiddle.net/N4hpQ/32/)。

# c# - Petapoco 和参数

> ID：13750891
> 
> 赞同：0
> 
> 时间：2012-12-06T19:17:37.463
> 
> 标签：c#, petapoco

有没有办法为插入查询使用参数？尝试时出现以下错误。

```
 /// <summary>
    /// Set active survey
    /// </summary>
    public int SetSurveyActive(int brandId, int surveyId)
    {
        Sql sql = new Sql()
            .Append("INSERT INTO CF.ActiveSurvey(BrandId, SurveyId")
            .Append("VALUES(@0,@1)",brandId,surveyId);

        var result = database.Execute(sql);

        return Convert.ToInt32(result);
    } 
```

![在此处输入图像描述](../Images/eadf7949a84abae88f2b5b22ac9117cd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:22:03.007

您缺少一个括号：

```
.Append("INSERT INTO CF.ActiveSurvey(BrandId, SurveyId") 
```

应该

```
.Append("INSERT INTO CF.ActiveSurvey(BrandId, SurveyId)") 
```

# unit-testing - 用 Mocha 模拟单元测试

> ID：13750892
> 
> 赞同：2
> 
> 时间：2012-12-06T19:17:37.667
> 
> 标签：unit-testing, mocking, angularjs, mocha.js, karma-runner

我正在尝试设置一个简单的模拟示例，取自这个[github 问题](https://github.com/angular/angular.js/issues/1635)：

```
'use strict';

var expect = chai.expect;

var app = angular.module('plunker', [])
    .factory('car', function(engine) {
        return {
            drive : function() {
                return 'Driving: ' + engine.speed();
            }
        }
    })
    .value('engine', {
        speed : function() {
            return 'fast';
        }
    });

describe('Testing a car', function() {
    var testEngine;

    beforeEach(function(){
        testEngine = {};
        angular.module('test', ['plunker']).value('engine', testEngine);
        module('test');
    });

    it('should drive slow with a slow engine', inject(function(car) {
        testEngine.speed = function() {
            return 'slow';
        };
        expect(car.drive()).to.equal('Driving: slow');
    }));
}); 
```

但是，当我尝试使用 Testacular（使用 Mocha）运行它时，出现以下错误：

```
info (watcher): Changed file "/path/to/testMock.js".
PhantomJS 1.7 (Mac) Testing a car "before each" hook FAILED
    TypeError: 'undefined' is not an object (evaluating 'currentSpec.queue.running')
        at isSpecRunning (/path/to/angular-mocks.js:1626)
        at /path/to/angular-mocks.js:1648
        at /path/to/testMock.js:25
PhantomJS 1.7 (Mac): Executed 29 of 41 (1 FAILED) (0.215 secs / NaN secs) 
```

我究竟做错了什么？

# servicestack - ServiceStack.Razor：布局文件是否被缓存？

> ID：13750895
> 
> 赞同：2
> 
> 时间：2012-12-06T19:17:44.067
> 
> 标签：servicestack

我在**ServiceStack.Razor中的 _** *Layout.cshtml*文件遇到了一些问题。我想根据用户是否登录来显示和隐藏某些链接。

 **我`GetSession<CustomUserSession>()`在 _ *Layout.cshtml*中得到的信息与在*AnyOtherPage.cshtml*中的不同。似乎`new CustomUserSession()`在页面得到正确的同时布局正在得到`CustomUserSession`，但这会间歇性地发生。

_ *Layout.cshtml*是否已缓存，还是应该在别处查找？**

# android - 我们需要在Android中替换strings.xml文件中的逗号吗？

> ID：13750897
> 
> 赞同：1
> 
> 时间：2012-12-06T19:17:48.273
> 
> 标签：android

```
<string name="text_9">This may not happen. If this happened, reset in 2&#8211;4 mins.</string> 
```

我这样使用它：

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create();
alertDialog.setMessage(getResources().getText(R.string.text_9)); 
```

layout.xml 看起来像

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingTop="15dp" >

            <TextView
                android:id="@+id/explain_label"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#00000000" />
        </LinearLayout> 
```

显示的结果始终是“这可能不会发生。如果发生了”。逗号后的所有内容均未显示。我试图用 ' \ ， ' 和 '\u002c' 替换逗号，但都不起作用。如果我删除逗号，则会显示所有内容。

如何替换逗号以替换完整描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:01:28.723

请尝试在调用`create()`方法之前设置消息：

```
AlertDialog alertDialog = new AlertDialog.Builder(this)
.setMessage(R.string.text_9)
.create();
alertDialog.show(); 
```

或者将`getResources().getText(R.string.text_9)`方法替换为`getString(R.string.text_9)`.

# vba - 基于另一个组合框填充字段

> ID：13750900
> 
> 赞同：2
> 
> 时间：2012-12-06T19:18:03.737
> 
> 标签：vba, ms-access

我有一个包含三个组合框的表单（MS-Access 2003）。第 1（类别）、第 2（CatDetail）、第 3（NbrValue）。我从第一个更新事件后填充第二个没有问题。当我尝试为第 2 次运行类似的更新事件以更新第 3 次时，我的问题就出现了。这是我的代码。

表 1（类别）

```
CategoryID    Category Name
1             Vacation
2             DH 
```

第一个组合框（类别）SQL

```
SELECT Category.CategoryID, Category.[Category Name]
FROM Category
ORDER BY Category.[Category Name]; 
```

更新第一个组合框的 VBA 后（类别）

```
Option Compare Database
Private Sub Category_AfterUpdate()
Me.CatDetail = Null
Me.CatDetail.Requery
Me.CatDetail = Me.CatDetail.ItemData(0)
End Sub 
```

表 2 (CatDetail)

```
CatDetail ID    CatDetail         Category
1               Vac Day Used      Vacation
2               Partial Vac Day   Vacation
3               DH Gain           DH
4               DH Used           DH 
```

第二个组合框 SQL (CatDetail)

```
SELECT CatDetail.[CatDetail ID], CatDetail.[CatDetail Name], CatDetail.CategoryID
FROM CatDetail
WHERE (((CatDetail.CategoryID)=[Forms]![Combo Form]![Category])); 
```

为第二个组合框（CatDetail）更新 VBA 后

```
Private Sub CatDetail_AfterUpdate()
Me.NbrValue = Null
Me.NbrValue.Requery
Me.NbrValue = Me.NbrValue.ItemData(0)
End Sub 
```

这部分效果很好。我迷失了下一组以更新第三个组合框。

表 3（数值）

```
ValueID     Value    CatDetail Name
1           -1       Vac Day Used
2           -0.5     Partial Vac Day
3           1        DH Gain
4           -1       DH Used 
```

第三个组合框 (NbrValue) SQL

```
SELECT Value.ValueID, Value.Value, Value.[CatDetail Name]
FROM [Value]
WHERE (((Value.[CatDetail Name])=[Forms]![Combo Form]![CatDetail])); 
```

总而言之，我可以选择我的第一个组合框值。选择之后，第二个组合框会更新所有相应的值。问题在于第二个组合框上的更新后事件，因为我的第三个组合框返回空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:43:58.107

我一直这样做。在 AfterUpdate() 中设置依赖组合框的行源。

```
Sub Combo1_AfterUpdate()

 comboBox2.RowSource = "SELECT .... WHERE FIELD = " & Combo1.Value

 comboBox3.RowSource = ""  ' Reset the third combo until after the 2nd is set.

End Sub
Sub Combo2_AfterUpdate()

 comboBox3.RowSource = "SELECT .... WHERE FIELD = " & Combo2.Value

End Sub 
```

如果查询实际上正在返回某些内容，这将起作用。

# javascript - 如何通过 Wufoo 进行身份验证以从 Java Script 访问他们的 API？

> ID：13750901
> 
> 赞同：1
> 
> 时间：2012-12-06T19:18:06.310
> 
> 标签：javascript, html, wufoo

我正在尝试从表单访问数据，以便可以在自定义应用程序中使用它。

我需要能够在 HTML 中做到这一点，所以我想使用 Java Script。

如何将 API 密钥（即用户名）和密码发送到 Wufoo，以便我可以访问包含所需数据的 JSON 文件？

它使用基本 HTTP 身份验证

# android - 设备上缺少专用搜索按钮

> ID：13750903
> 
> 赞同：0
> 
> 时间：2012-12-06T19:18:11.020
> 
> 标签：android, android-intent

当用户点击设备上的专用搜索按钮时，我的应用程序会触发本地搜索窗口。最近，市场上出现的所有设备都停止提供该按钮。我知道我可以在应用程序中提供搜索选项，但这个问题与此无关。有没有办法用户仍然可以通过某些按键组合来模拟应用程序上的搜索触发？

任何建议都会有所帮助。

谢谢， SKU

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:22:35.333

按住菜单按钮通常会在新的安卓手机（例如 SGS1 或 SGS2）上调出搜索功能

# python - Python中的联赛表 - 它不会将团队插入列表

> ID：13750909
> 
> 赞同：1
> 
> 时间：2012-12-06T19:18:23.910
> 
> 标签：python

我需要为一个项目制作一个排行榜。必须有3个文件，2个文件由1个类组成，最后一个文件用于运行程序。我已经完成了所有的部分，但是当我调用一个方法来添加一个团队时，程序会添加名称，但它不会将它插入到团队列表中（应该这样做）。当我尝试在列表中显示项目时，程序会显示一条错误消息，而不是显示实际的团队。

我该如何解决？任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:28:09.767

这里有几件事：

> 当我尝试显示列表中的项目时，程序显示：team.Team object at 0x000000000332A978 insted 显示实际团队。

用户类的默认显示类似于`<team.Team object at 0x000000000332A978>`. 如果你想让它显示不同的东西，你必须告诉 Python 你想显示什么。为此有两个单独的功能：[`__repr__`和`__str__`](http://docs.python.org/3/reference/datamodel.html#object.__repr__)。这个想法是第一个是程序员的表示，第二个是用户的表示。如果您不需要两种不同的表示形式，只需定义`__repr__`它，它就会在需要时使用它`__str__`。

因此，解决此问题的一个非常简单的方法是将其添加到`Team`类中：

```
def __repr__(self):
    return 'Team("{}")'.format(self._name) 
```

现在，如果您调用`league.addTeam('Dodgers')`, then `print(l._table)`，您将`[Team("Dodgers")]`得到`[<team.Team object at 0x000000000332A978>]`.

同时，这两种方法可能不是您想要的：

```
def removeTeam(self,team):
    self._table.remove(team)
def returnPosition(self,team):
    return self._table.index(team) 
```

这些将删除或查找给定`Team`对象的团队——不是名称，甚至是`Team`根据名称创建的新对象，而是对存储在`_table`. 这并不是那么有用，而且您似乎只想用名字来称呼它们。

有两种方法可以解决此问题：您可以`Team`通过将此方法添加到类中进行更改，以便按名称而不是按对象身份进行比较：

```
def __eq__(self, other):
    return self._name == other._name 
```

这意味着如果你说`Team('Giants') == Team('Giants')`，它现在将是 true 而不是 False。即使第一支球队在不同的联赛中，并且拥有不同的 WL 记录，等等（例如，就像来自旧金山的棒球“巨人队”与来自纽约的足球“巨人队”），就 Python 而言担心，他们现在是同一个团队。当然，如果这不是您想要的，您可以编写任何其他`__eq__`看起来更合适的函数。

无论如何，如果你这样做，`index`and`remove`函数现在将能够找到任何`Team`同名的，而不是完全相同的团队，所以：

```
def removeTeam(self,team_name):
    self._table.remove(Team(team_name))
def returnPosition(self,team_name):
    return self._table.index(Team(team_name)) 
```

如果您采用这种方式，您可能需要考虑定义所有[比较方法](http://docs.python.org/3/reference/expressions.html#comparisons)，例如，您可以对团队列表进行排序，然后按名称排序。

或者您可以更改这些方法，使它们不能基于相等性工作，例如，通过像这样重新定义它们：

```
def removeTeam(self,team_name):
    self._table = [team for team in self._table if team._name != team_name]
def returnPosition(self,team_name):
    return [team._name for team in self._table].index(team_name) 
```

要了解这些是如何工作的，如果您不习惯阅读列表推导，请将每个推导转换回等效循环：

```
self._table = [team for team in self._table if team._name != team_name]

temp = []
for team in self._table:
    if team._name != team_name:
        temp.append(team)
self._table = temp 
```

如果您逐步执行此操作，`temp`最终会得到表格中每个团队的列表，除了您要删除的团队，然后您将旧的替换为`self._table`过滤后的新团队。[`filter`](http://docs.python.org/3/library/functions.html#filter)（如果你知道这个函数，另一种写相同想法的方法是用。）

创建一个新的过滤列表通常比就地修改列表更好。有时出于性能原因不这样做，有时它最终会变得非常复杂且难以理解，但推理起来通常更快更简单。此外，就地修改列表会导致以下问题：

```
for i, value in enumerate(mylist):
    if value == value_to_remove:
        del mylist[i] 
```

玩一会儿，你会发现它实际上不起作用。理解为什么有点复杂，你可能不想等到以后再学习。解决问题的常用技巧是遍历列表的副本……但是一旦你这样做了，你现在就同时遇到了最糟糕的过滤和最糟糕的就地删除。

第二个函数可能有点太聪明了，但我们看一下：

```
def returnPosition(self,team_name):
    return [team._name for team in self._table].index(team_name) 
```

首先，我正在创建一个与原始列表类似的列表，但它只是名称而不是团队对象的列表。同样，让我们​​分解列表推导：

```
temp = []
for team in self._table:
    temp.append(team._name) 
```

或者试着翻译成英文：这是表格中每支球队的球队名称列表。

现在，因为这是一个团队名称列表，我可以使用`index(team_name)`它，它会找到它。而且，因为这两个列表具有相同的形状，我知道这也是在原始`team`列表中使用的正确索引。

一个更简单的解决方案是`_tables`从 a `list`of `Team`s更改为`dict`到 s 的映射名称`Team`。这可能是最 Pythonic 的解决方案——它看起来比编写列表推导式来执行简单的操作要简单得多。（这也可能是最有效的，但除非你有一些真正巨大的联赛，否则这几乎无关紧要。）然后你甚至不需要`returnPosition`任何东西。要做到这一点：

```
def __init__(self):
    self._table={}
def addTeam(self,name):
    self._table[name]=Team(name)
def removeTeam(self,team_name):
    del self._table[team_name]
def returnPosition(self,team_name):
    return team_name
def updateLeague(self,team1_name1,team_name2,score1,score2):
    if score1>score2:
        self._table[team_name1].win()
        self._table[team_name2].loss()
    elif score1==score2:
        self._table[team_name1].draw()
        self._table[team_name2].draw()
    elif score1<score2:
        self._table[team_name1].loss()
        self._table[team_name2].win() 
```

请注意，我已定义`returnPosition`将团队名称本身作为职位返回。如果您考虑一下，`dict`键的使用方式与索引完全相同`list`，因此这意味着有人为所需的“旧”API 编写的任何代码`returnPosition`仍可与“新”API 一起使用。（我可能不会尝试将它卖给分配了需要我们使用的问题的老师`returnPosition`，但是对于我想让我的 1.3 用户更容易迁移到 2.0 的真实图书馆，我可能会。 )

这只需要一些其他的更改。在`displayList`and`saveList`中，您迭代`self._table.values()`而不是`self._table`; 中`loadList`，您更改`self._table.append(team)`为`self._table[a] = team`。说到`loadList`：您可能需要考虑将这些局部变量从`a`、`b`、`c`和重命名`d`为`name`、`wins`、`losses`和`draws`。

其他一些评论：

*   正如 kreativitea 在评论中所说，您不应创建“私有”变量，然后在 Python 中添加无操作访问器方法。它只是隐藏了真实代码的更多样板，而且还有一件你可能会因为愚蠢的错字而出错的事情，你有一天会花费数小时进行调试。只需拥有名为`name`、`wins`、`losses`等的成员，然后直接访问它们。（如果有人告诉你这是不好的风格，因为它不允许你在不改变接口的情况下替换实现，那么这只适用于 Java 和 C++，而不是 Python。如果你需要替换实现，只需继续阅读[`@property`](http://docs.python.org/3/library/functions.html#property)。）
*   你不需要`print("""""")`——而且很容易不小心误算`"`字符数。（特别是因为某些 IDE 实际上会对此感到困惑，并认为多行字符串永远不会结束。）只需`print()`.
*   `while`在循环 ( `while x!="q":`) 和内部循环中都有相同的结束条件`break`。这两个地方都不需要它。要么将其更改为`while True:`，要么摆脱`break`（只需 make `options("q")`do `print("Goodbye")`，因此您根本不需要在循环内对其进行特殊处理）。
*   每当你有一长串`elif`语句时，想想你是否可以把它变成一个`dict`短函数。我不确定在这种情况下这是一个好主意，但总是值得考虑并做出明确的决定。

最后一个想法看起来像这样：

```
def addTeam():
    name=input("Enter the name of the team:")
    l.addTeam(name)
def removeTeam():
    teamToRemove=input("Enter the name of the team you want to remove:")
    l.removeTeam(teamToRemove)
def recordGame():
    team1=input("What is the name of the team?")
    ans1=int(input("Enter the number of goals for the first team:"))
    team2=input("What is the name of the team?")
    ans2=int(input("Enter the number of goals for the second time:"))
    l.updateLeague(team1,team2,ans1,ans2)
optionsdict = {
    "a": addTeam,
    "d": l.displayList,
    "s": l.saveList,
    "l": l.loadList,
    "r": removeTeam,
    "rec": recordGame,
}
def options(x):
    func = optionsdict.get(x)
    if func:
        func() 
```

正如我所说，我不确定在这种情况下它实际上是否更清楚，但值得考虑。

# jquery - jQuery：制作具有不同大小写的字符串标题大小写

> ID：13750910
> 
> 赞同：4
> 
> 时间：2012-12-06T19:18:27.170
> 
> 标签：jquery, css, string

很简单的问题，但我似乎无法找到答案。

我有几个来自不同来源的 HTML 页面，它们的`<h2>`元素中包含带有哑大写的字符串。如：

`<h2>Are there OTHER USES for this medicine?</h2>`

我正在寻找使这些常规句子案例，即

`<h2>Are there other uses for this medicine?</h2>`

我首先使用 CSS 将它们全部设为小写：

```
h2 {
  text-transform: lowercase;
} 
```

因为我希望通过创建一个仅将第一个字母大写的函数来使用 jQuery 操作它们。

所以问题是：我将如何编写一个 jQuery 函数来仅将`h2`页面上每个元素的首字母大写？

阅读[此线程](https://stackoverflow.com/questions/1026069/capitalize-the-first-letter-of-string-in-javascript)后，尝试了以下操作：

```
function capitaliseFirstLetter(string){
  return string.charAt(0).toUpperCase() + string.slice(1);
}

$('h2').each(function(){
  capitaliseFirstLetter($(this).text());
}); 
```

但是没有用，控制台也没有给我任何错误，所以我不知道出了什么问题。

**编辑**

我在这个问题上做了一个很大的疏忽。使用

`text-transform: lowercase`

把我这个词小写了，所以

`<h2>What should I do in case of OVERDOSE?</h2>`

变成了

`<h2>What should i do in case of overdose?</h2>`

当我使用@marcelo-biffara 的解决方案时。（或`:first-letter`CSS 语法。）

现在，我是否需要使用复杂的正则表达式来将字符串“i”大写？

**编辑 2**

如果出现两次“ i ”（例如“如果我服用太多剂量该怎么办？”），我是否需要一个循环将它们替换为“ I ”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:21:22.500

`capitaliseFirstLetter($(this).text());`返回一个字符串。就是这样。你没有对那个字符串做任何事情。您需要将返回的字符串放在某处。

```
$('h2').each(function(){
    var str = capitaliseFirstLetter($(this).text());
    $(this).text(str);  // Set the text of the element
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T19:34:25.867

你可以做这个功能

```
function capitalizeMe(val){
    return val.charAt(0).toUpperCase()+val.substr(1).toLowerCase();
} 
```

哦，也许你需要删除你的 css h2 规则

你可以像这样将它应用到你的 h2

```
$('h2').each(function(){
    var str = capitalizeMe($(this).html());
    $(this).html(str);  
});

function replaceAll( text, v1, v2 ){
  while (text.toString().indexOf(v1) != -1)
      text = text.toString().replace(v1,v2);
  return text;
} 
```

如果你想大写“i”的每个实例，你可以做这样的事情

```
$('h2').each(function(){
    var str = replaceAll(capitalizeMe($(this).html())," i "," I ");
    $(this).html(str);  
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T19:27:06.817

难道你不能只使用 CSS

```
h2 {
    text-transform: lowercase;
}
h2:first-letter {
    text-transform: capitalize;
} 
```

[http://jsfiddle.net/mowglisanu/CbDHH/](http://jsfiddle.net/mowglisanu/CbDHH/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T19:21:13.610

您需要保存 h2 内容的新值：

```
$('h2').each(function(){
  $(this).text(capitaliseFirstLetter($(this).text()));
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-31T06:54:53.343

你不能做任何你只需添加以下css的事情

```
 h2{
       text-transform: lowercase;
    } 
```

```
h2 {
    text-transform: lowercase;
}
```

```
<h2>My Name is xYz</h2>
```

# android - Android tv dispatchkeyevent 到 listview

> ID：13750919
> 
> 赞同：0
> 
> 时间：2012-12-06T19:18:46.357
> 
> 标签：android, keyboard, android-listview, google-tv

我已经在我的活动中覆盖了 dispatchkeyevent 来控制一些自定义 UI，但现在我希望 android 来处理我的列表片段的关键事件。

我可以`listFragment.getListView().onKeyDown(event.getKeyCode(), event);`在标题为焦点的情况下浏览列表，但是如何在浏览每一行时单击行中的向上、向下和关闭图像视图？

这是我的列表片段布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background5"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#25000000"
        android:gravity="center"
        android:text="Edit your Playlist"
        android:textSize="22sp" />

    <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/header"
        android:cacheColorHint="#00000000"
        android:divider="#00000000"
        android:dividerHeight="1dp"
        android:drawSelectorOnTop="false" />

</RelativeLayout> 
```

和我的列表行

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#50000000" >

    <LinearLayout
        android:id="@+id/arrows"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="25dp"
        android:layout_marginRight="10dp"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/up"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_marginBottom="10dp"
            android:src="@drawable/arrow_up" />

        <ImageView
            android:id="@+id/down"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:src="@drawable/arrow_down" />
    </LinearLayout>

    <ImageView
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="20dp"
        android:layout_toRightOf="@id/arrows" />

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginTop="25dp"
        android:layout_toRightOf="@id/thumbnail"
        android:textSize="20sp" />

    <ImageView
        android:id="@+id/close"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="25dp"
        android:src="@drawable/close_button" />

</RelativeLayout>

 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#50000000" >

    <LinearLayout
        android:id="@+id/arrows"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="25dp"
        android:layout_marginRight="10dp"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/up"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_marginBottom="10dp"
            android:src="@drawable/arrow_up" />

        <ImageView
            android:id="@+id/down"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:src="@drawable/arrow_down" />
    </LinearLayout>

    <ImageView
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="20dp"
        android:layout_toRightOf="@id/arrows" />

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginTop="25dp"
        android:layout_toRightOf="@id/thumbnail"
        android:textSize="20sp" />

    <ImageView
        android:id="@+id/close"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="25dp"
        android:src="@drawable/close_button" />

</RelativeLayout> 
```

# knockout.js - 如何在 Knockout js 中创建指定数量的链接

> ID：13750922
> 
> 赞同：0
> 
> 时间：2012-12-06T19:18:58.813
> 
> 标签：knockout.js

我想根据我的视图模型中的数字创建许多链接（或任何 html 元素）。我想在淘汰赛 js Psuedo 代码中做同样的事情：

```
for(var i; i < someNo; i++){
CreateHtmlElement(); 
```

}

我之前使用过 Knockout js 的 foreach 绑定，这让我可以基于数组中的对象创建元素，但除了计数之外，我找不到任何可以做同样事情的东西。这可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:08:07.053

有几个选项可供您使用：

- 使用计算的可观察 qnd 在您的视图模型中生成一个数组`foreach`。

就像是：

```
 this.linkCount = ko.observable(10);
   this.links = ko.computed(function() {
       return ko.utils.range(0, this.linkCount());
   }, this); 
```

- 在标记中生成数组，如：

```
<ul data-bind="foreach: ko.utils.range(0, linkCount())">
    <li>something</li>
</ul> 
```

`repeat`- 在此处使用 Michael Best 创建的绑定： [https ://github.com/mbest/knockout-repeat](https://github.com/mbest/knockout-repeat)

# php - Htmlentities 但仍然匹配 bbcode

> ID：13750926
> 
> 赞同：1
> 
> 时间：2012-12-06T19:19:08.980
> 
> 标签：php, security, textarea, bbcode

我正在使用[http://jbbcode.com/](http://jbbcode.com/)，但我不知道如何使用 HTML 实体。

如果我在检查 BBCodes 之前使用它，字符 [ , ] 和 / 将被转换为`&whatever;`.

如果我在检查后使用它，jBBCode 会为我更改`[b]Bold text[/b]`为`<b>Bold text</b>`. 现在 HTML 实体和全部转换。

我只想清理这个 textarea 字段。

我使用 ...nothing 将所有 textarea 值插入到数据库中。仅准备好的语句 (PDO)。

我能做些什么？

# java - 每次启动应用程序时，如何使应用程序刷新以获取新数据？

> ID：13750927
> 
> 赞同：0
> 
> 时间：2012-12-06T19:19:14.253
> 
> 标签：java, android

我很难理解每次启动应用程序时 Android 应用程序如何获取数据或刷新数据。

我有数据，它每分钟更新一次，这意味着它会发生变化，但每次启动应用程序时我都看不到它更新，只是随机更新数据。

我累了，还是不行。

```
OnResume(); 
```

**这是我的代码。**

```
package com.zv.android;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class ZipActivity extends Activity {

    TextView textMsg, textPrompt;
    final String textSource = "https://docs.google.com/spreadsheet/pub?key=0AqSBI1OogE84dDJyN0tyNHJENkNyYUgyczVLX0RMY3c&single=true&gid=0&range=a2%3Aa26&output=txt";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        textPrompt = (TextView)findViewById(R.id.textprompt);
        textMsg = (TextView)findViewById(R.id.textmsg);

        textPrompt.setText("Wait...");

        URL CPE;
        try {
            CPE = new URL(textSource);
            BufferedReader bufferReader = new BufferedReader(new InputStreamReader(CPE.openStream()));
            String StringBuffer;
            String stringText = "";
            while ((StringBuffer = bufferReader.readLine()) != null) {
                stringText += StringBuffer + "\n"; ;
            }
            bufferReader.close();
            textMsg.setText(stringText);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            textMsg.setText(e.toString());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            textMsg.setText(e.toString());
        }
        textPrompt.setText("Finished!");        
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:33:34.823

每次启动活动时，都会执行 onCreate 方法，这意味着该方法中的所有代码都将再次执行。如果您正在获取的内容未更新，则可能是因为未从源更新。但话又说回来，刷新只会在您开始活动时发生。

您可以查看此答案，它可能会对您有所帮助： [https ://stackoverflow.com/a/11456974/1552551](https://stackoverflow.com/a/11456974/1552551)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:23:17.733

您可以在应用程序中覆盖 Application 类。在清单文件中定义它。每次你的应用程序启动时——无论它如何启动、用户点击、广播意图、服务——你的应用程序类都会得到一个 on create。

我认为您需要了解应用程序的生命周期。android 上的应用程序不会因为你关闭它们而死掉。如果您希望它在每次被置于前台时更新，您将不得不在您的活动中覆盖 onstart() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:34:29.170

Activity 是 Android 应用程序的构建块（更好的*是*，因为现在 Fragment API 代表基本组件）。它有所谓的[生命周期事件](http://developer.android.com/reference/android/app/Activity.html)，你可以挂钩。您命名：

*   `onCreate()`，在首次创建 Activity 时由框架调用。可能，这个 Activity 对象可以**永远**保留，即使其他应用程序占据前台并且两周后用户在启动器中触摸了您的应用程序图标：它可能仍然是同一个 Activity 对象。实际上，Activites 的寿命并不长，但是你明白了

*   `onResume()`, 之后`onPause()`调用，当 Activity 失去前景时调用（注意这与 Activity 的内容可见性无关）。因为`onResume()`总是在之后调用`onPause()`，所以您可以保证每次用户执行其他操作然后切换到您的活动时都会调用它，这似乎只是您的用例。

注意区别：用户安装您的应用程序，触摸启动器中的图标，这会触发一个意图，系统检测到周围没有活动并**创建**一个新实例。然后调用**onResume()**并最终将活动带到前台。接下来，您会收到一条短信通知，然后切换到 messanger，然后回到您的旧活动并`onResume()`再次被呼叫（但不是`onCreate`）。

因此，如果您想使用生命周期挂钩来刷新 Activity 的内容，`onResume()`这就是您要找的。但是请注意，一旦读取 URL 内容，内容可能会发生变化，并且如果活动仍在前台，则不会通知客户端。因此，您可能想要使用某种*服务器事件*（推送），例如[C2DM](https://developers.google.com/android/c2dm/)（或 websocket，或普通套接字，或任何您喜欢的东西）。

# c++ - 当调用来自同一个非常量版本的重载成员函数时，是否可以删除 const 限定符？

> ID：13750932
> 
> 赞同：6
> 
> 时间：2012-12-06T19:19:49.503
> 
> 标签：c++, user-interface, constants

例如：

```
struct B{};

struct A {

 const B& findB() const { /* some non trivial code */ }

 // B& findB() { /* the same non trivial code */ }

 B& findB() { 
       const A& a = *this;
       const B& b = a.findB();
       return const_cast<B&>(b);
  }
}; 
```

问题是我想避免在常量 findB 和非常量 findB 成员函数中重复相同的逻辑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T19:26:12.400

是的，您可以将对象转换为`const`，调用`const`版本，然后将结果转换为非`const`：

```
return const_cast<B&>(static_cast<const A*>(this)->findB()); 
```

`const`只有当所讨论的对象最初没有被声明时，抛弃才是安全的`const`。由于您处于非`const`成员函数中，因此您可以知道是这种情况，但这取决于实现。考虑：

```
class A {
public:

    A(int value) : value(value) {}

    // Safe: const int -> const int&
    const int& get() const {
        return value;
    }

    // Clearly unsafe: const int -> int&
    int& get() {
        return const_cast<int&>(static_cast<const A*>(this)->get());
    }

private:
    const int value;
}; 
```

一般来说，我的成员函数很短，所以重复是可以容忍的。您有时可以将实现分解为私有模板成员函数并从两个版本中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:52:53.080

我认为，在这里使用 cast 是可以的，但如果你绝对想避免它，你可以使用一些模板魔法：

```
struct B
{
    B(const B&)
    {
        std::cout << "oops I copied";
    }
    B(){}
};

struct A {
public:
    A(){}
    A(const A&){ std::cout << "a is copied:(\n";}
    const B& findB() const { return getter(*this); }    
    B& findB() { return getter(*this); }

private:
    template <typename T, typename V>
    struct same_const
    {
        typedef V& type;
    };

    template <typename T, typename V>
    struct same_const<const T, V>
    {
        typedef const V& type;
    };

    template <typename T>
    static typename same_const<T,B>::type getter(T& t) { return t.b;}

    B b;

};

int main()
{
    A a;
    const A a_const;
    const B& b1 = a.findB();
    B& b2 = a.findB();

    const B& b3 = a_const.findB();
    //B& b4 = a_const.findB();
} 
```

# sql - TSQL删除字符串后的字符

> ID：13750936
> 
> 赞同：0
> 
> 时间：2012-12-06T19:19:58.887
> 
> 标签：sql, sql-server, xml, tsql

我有一个表列，其中包含一组地址作为 XML 数据：

```
<?xml version="1.0" encoding="utf-16"?>
<AddressBook>
   <Address>
      <ID>-1</ID>
      <AddressID>PRIMARY</AddressID>
      <FirstName>JOHN L.</FirstName>
      <LastName>JOHSON/JOHN L.</LastName>
      <StreetLine1>123 NOWHERE ST</StreetLine1>
      <City>OVERHERE</City>
      <StateName>CA</StateName>
      <StateCode>5</StateCode>
      <PostalCode>12345</PostalCode>
      <CountryName>United States</CountryName>
      <CountryCode>en-US</CountryCode>
      <PhoneNumber>5551231234</PhoneNumber>
      <PhoneNumber2>5551231234</PhoneNumber2>
      <TaxScheduleID>CA</TaxScheduleID>
      <ShowAddress>1</ShowAddress>
   </Address>
   <Address>
      <ID>-1</ID>
      <AddressID>SECONDARY</AddressID>
      <FirstName>SAM</FirstName>
      <LastName>LARSON/SAM</LastName>
      <StreetLine1>456 OVERHERE</StreetLine1>
      <City>NOTTHERE</City>
      <StateName>CA</StateName>
      <StateCode>5</StateCode>
      <PostalCode>54321</PostalCode>
      <CountryName>United States</CountryName>
      <CountryCode>en-US</CountryCode>
      <PhoneNumber>5553334444</PhoneNumber>
      <PhoneNumber2>5553334444</PhoneNumber2>
      <TaxScheduleID>CA</TaxScheduleID>
      <ShowAddress>1</ShowAddress>
   </Address>
</AddressBook> 
```

我的问题是 last name 元素包含与 '/' 前面的第一个命名的不必要的重复：

```
<FirstName>JOHN L.</FirstName>
<LastName>JOHSON/JOHN L.</LastName> 
```

如何删除姓氏元素中的“/”和“/”后面的每个字符，以便创建这样的结果？

```
<FirstName>JOHN L.</FirstName>
<LastName>JOHSON</LastName> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:40:59.880

尝试使用`charindex`：

```
Select Left('JOHSON/JOHN L.', CHARINDEX('/', 'JOHSON/JOHN L.') - 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:00:25.957

具有包含 2 条记录的表变量的完整工作示例：

```
declare @t table (xmldata xml);
insert @t values ('
<AddressBook>
   <Address>
      <ID>-1</ID>
      <AddressID>PRIMARY</AddressID>
      <FirstName>JOHN L.</FirstName>
      <LastName>JOHSON/JOHN L.</LastName>
      <StreetLine1>123 NOWHERE ST</StreetLine1>
      <City>OVERHERE</City>
      <StateName>CA</StateName>
      <StateCode>5</StateCode>
      <PostalCode>12345</PostalCode>
      <CountryName>United States</CountryName>
      <CountryCode>en-US</CountryCode>
      <PhoneNumber>5551231234</PhoneNumber>
      <PhoneNumber2>5551231234</PhoneNumber2>
      <TaxScheduleID>CA</TaxScheduleID>
      <ShowAddress>1</ShowAddress>
   </Address>
   <Address>
      <ID>-1</ID>
      <AddressID>SECONDARY</AddressID>
      <FirstName>SAM</FirstName>
      <LastName>LARSON/SAM</LastName>
      <StreetLine1>456 OVERHERE</StreetLine1>
      <City>NOTTHERE</City>
      <StateName>CA</StateName>
      <StateCode>5</StateCode>
      <PostalCode>54321</PostalCode>
      <CountryName>United States</CountryName>
      <CountryCode>en-US</CountryCode>
      <PhoneNumber>5553334444</PhoneNumber>
      <PhoneNumber2>5553334444</PhoneNumber2>
      <TaxScheduleID>CA</TaxScheduleID>
      <ShowAddress>1</ShowAddress>
   </Address>
</AddressBook>');
insert @t values ('
<AddressBook>
   <Address>
      <ID>-1</ID>
      <AddressID>PRIMARY</AddressID>
      <FirstName>JANE L.</FirstName>
      <LastName>JOHSON/JANE L.</LastName>
      <StreetLine1>123 NOWHERE ST</StreetLine1>
      <City>OVERHERE</City>
      <StateName>CA</StateName>
      <StateCode>5</StateCode>
      <PostalCode>12345</PostalCode>
      <CountryName>United States</CountryName>
      <CountryCode>en-US</CountryCode>
      <PhoneNumber>5551231234</PhoneNumber>
      <PhoneNumber2>5551231234</PhoneNumber2>
      <TaxScheduleID>CA</TaxScheduleID>
      <ShowAddress>1</ShowAddress>
   </Address>
   <Address>
      <ID>-1</ID>
      <AddressID>SECONDARY</AddressID>
      <FirstName>NIGEL</FirstName>
      <LastName>NIGEL JR./NIGEL</LastName>
      <StreetLine1>456 OVERHERE</StreetLine1>
      <City>NOTTHERE</City>
      <StateName>CA</StateName>
      <StateCode>5</StateCode>
      <PostalCode>54321</PostalCode>
      <CountryName>United States</CountryName>
      <CountryCode>en-US</CountryCode>
      <PhoneNumber>5553334444</PhoneNumber>
      <PhoneNumber2>5553334444</PhoneNumber2>
      <TaxScheduleID>CA</TaxScheduleID>
      <ShowAddress>1</ShowAddress>
   </Address>
</AddressBook>');

   update t
        set xmldata =
    (select n.a.value('ID[1]','nvarchar(max)') ID,
            n.a.value('AddressID[1]','nvarchar(max)') AddressID,
            n.a.value('FirstName[1]','nvarchar(max)') FirstName,
            LEFT(n.a.value('LastName[1]','nvarchar(max)'), LEN(n.a.value('LastName[1]','nvarchar(max)'))
                                                        -1-LEN(n.a.value('FirstName[1]','nvarchar(max)'))) LastName,
            n.a.value('StreetLine1[1]','nvarchar(max)') StreetLine1,
            n.a.value('City[1]','nvarchar(max)') City,
            n.a.value('StateName[1]','nvarchar(max)') StateName,
            n.a.value('StateCode[1]','nvarchar(max)') StateCode,
            n.a.value('PostalCode[1]','nvarchar(max)') PostalCode,
            n.a.value('CountryName[1]','nvarchar(max)') CountryName,
            n.a.value('CountryCode[1]','nvarchar(max)') CountryCode,
            n.a.value('PhoneNumber[1]','nvarchar(max)') PhoneNumber,
            n.a.value('PhoneNumber2[1]','nvarchar(max)') PhoneNumber2,
            n.a.value('TaxScheduleID[1]','nvarchar(max)') TaxScheduleID,
            n.a.value('ShowAddress[1]','nvarchar(max)') ShowAddress
       from AddressBook.nodes('Address') n(a)
        for xml path('Address'), root('AddressBook'), type
      )
       from @t t
cross apply xmldata.nodes('AddressBook') ab(AddressBook);

     select *
       from @t; 
```

# objective-c - 不知道为什么我可以使用 objectAtIndex 访问这个数组值

> ID：13750937
> 
> 赞同：0
> 
> 时间：2012-12-06T19:19:59.760
> 
> 标签：objective-c, ios

不是objective-c程序员，但不确定为什么我不能访问这个值：

```
NSMutableArray *colorsArray=[[NSMutableArray alloc] init];
[colorsArray addObject:[UIColor whiteColor]];
[colorsArray addObject:[UIColor blueColor]];
[view setBackgroundColor:[UIColor [colorsArray objectAtIndex:0]]]; 
```

我得到一个`expected identifier`但语法对我来说还可以。知道我做错了什么吗？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:21:10.817

最后一行应该是：

```
[view setBackgroundColor:[colorsArray objectAtIndex:0]]; 
```

您将颜色实例放入数组中，因此您应该使用它来将它们取出。

我认为混乱来自 UIColor 类方法的调用`whiteColor`和前面几行中的“blueColor”。*在 Objective-C 中，通过识别接收器类*或*实例*，然后在括号中指定*选择器*部分来发送消息。

# json - Sammy.js 从 HTTP 加载 JSON（Sinatra 和 MongoHQ）

> ID：13750942
> 
> 赞同：0
> 
> 时间：2012-12-06T19:20:21.657
> 
> 标签：json, jsonp, mustache, sammy.js

我正在从客户端 Sinatra 测试 Sammy.js 以连接到 MongoHQ 并检索文档。但是，我对 Sammy.js 的检索有疑问。我的代码如下所示：

```
this.get('#/', function(context) {

  this.load('http://localhost:4567/test.json', { cache: false })
      .then(function(items) {
        context.items = items;
      })
      .partial('templates/index.ms');

}); 
```

XMLHttpRequest 无法加载 http://localhost:4567/test.json。Access-Control-Allow-Origin 不允许 Origin http:// localhost。

你有什么建议修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:26:17.387

由于跨域资源共享，您的 XMLHTTPRequest 被阻止。

要了解更多信息，您应该查看[关于 CORS 的维基百科文章](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

要了解如何在服务器端实现它，请查看[enable-cors.org](http://enable-cors.org)。

不幸的是，他们在 enable-cors.org 上没有 Ruby 版本（我现在正在处理一个拉取请求），同时你可以在任何基于机架的服务器上使用这样的东西：

```
class CORSController < ActionController::Base

  before_filter :cors_preflight_check
  after_filter :cors_set_access_control_headers

  def cors_set_access_control_headers
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
    headers['Access-Control-Max-Age'] = "1728000"
  end

  def cors_preflight_check
    if request.method == "OPTIONS"
      headers['Access-Control-Allow-Origin'] = '*'
      headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
      headers['Access-Control-Allow-Headers'] = 'X-Requested-With'
      headers['Access-Control-Max-Age'] = '1728000'
      render :text => '', :content_type => 'text/plain'
    end
  end

end 
```

编辑：

我应该补充一点，任何从 CORSController 继承的类都将允许 CORS 请求，如果您希望全局使用 CORS，您应该将其添加到您的 ApplicationController。

此外，将*Access-Control-Allow-Origin*设置为通配符是潜在的安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:03:46.150

我已经解决了它在 Apache 服务器中设置乘客模块，从 http://localhost/json/test.json 运行。因此，在这种情况下，保持相同的域“localhost”，不需要有跨域类型的约束......谢谢！:D

**我学会了：避免使用WEBrick**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T08:33:31.313

我不知道我为什么问这个问题，为什么仍然没有得到回答。

```
this.get('#/', function(context) {

  context.load('http://...', { dataType: 'jsonp' })
      .then(function(items) {
        context.items = items;
      })
      .partial('templates/index.ms');

}); 
```

只需将数据类型添加到 json 填充。

# google-chrome - 使用 vba 和 chrome 填写表格

> ID：13750943
> 
> 赞同：2
> 
> 时间：2012-12-06T19:20:21.820
> 
> 标签：google-chrome, vba, firefox, browser-automation

目前我可以使用 IE 完成此操作

```
Dim ie As InternetExplorer
Set ie = New InternetExplorer
ie.Navigate "www.google.com"
ie.document.getElementByID("blah").value = "blah" 
```

我很好奇是否有一种方法可以导航到网站并使用除 IE 和 VBA 以外的方式填写信息，例如使用 FireFox 或 Chrome

我知道如何使用任何浏览器（例如 Chrome，如下所示）导航到其他网站，但我想知道如何使用 Chrome 填写 www.google.com 上的搜索字段等字段

```
call Shell("C:\Program Files\Google\Chrome\Application\chrome.exe"& " " & URL) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T18:56:32.123

您可以使用这个[Selenium 包装器](https://code.google.com/p/selenium-vba/)来驱动 Chrome 或 Firefox（或 PhantomJS）。请注意，它目前处于测试阶段。安装后，添加对 Selenium 类型库的引用或使用后期绑定（下面的示例）。

在我（非常）有限的测试中，唯一明显的区别是加载驱动程序需要几秒钟。

这是上面链接中的一个简单示例（修改为使用后期绑定），它填写了 Google 中的搜索字段并单击了搜索按钮：

```
Dim selDriver As Object
Set selDriver = CreateObject("Selenium.WebDriver"）

selDriver.Start "chrome", "http://www.google.com/"
selDriver.Open "http://www.google.com"
selDriver.Type "name=q", "Eiffel Tower"
selDriver.Click "name=btnG"

selDriver.stop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-09T22:31:16.143

自 2016 年起，Selenium 包装器已移至 Github，而不是上面的 Google 地址。此外，如果您使用的是 Chrome，您需要在[此处](https://github.com/florentbr/SeleniumBasic/issues/154)更新 Google Chrome 的网络驱动程序。

[硒基础](http://florentbr.github.io/SeleniumBasic)

下载这些项目后，您需要按照上述说明从 Excel 中将库添加到 Visual Basic 编辑器中。这样做之后，您应该能够按照最初的要求使用 vba 和 chrome 填写 Web 表单。

# c# - 包含逻辑的静态工厂方法的单元测试

> ID：13750944
> 
> 赞同：2
> 
> 时间：2012-12-06T19:20:24.487
> 
> 标签：c#, unit-testing, factory

在我开始我的问题之前，我想指出我知道堆栈溢出有很多类似的问题。不幸的是，这些问题都没有帮助我在具体场景中找到一个好的解决方案。

**问题：**

我想为包含逻辑的静态工厂方法编写单元测试。我正在寻找一种对这种方法进行单元测试的方法，即使它是静态的。如果那不可能，也许有人可以为我的测试类指出更好的设计。我也考虑过使用 IoC，但看不到考虑单元测试的优势。

**编码：**

```
public class Db
{
    private XmlMapping mapping;

    public static Db<T> Create()
    {
        var mapping = XmlMapping.Create(typeOf(T).Name);
        return new Db(mapping);
    }

    private Db(XmlMapping mapping)
    {
        this.mapping = mapping;
    }
}

public class XmlMapping //class under test
{
    public static XmlMapping Create(string filename) //method under test
    {            
        try
        {
            ValidateFilename(filename);
            //deserialize xml to object of type XmlMapping
            var result = Deserialize(filename);
            if (result.IsInValid())
                throw Exception()
            return result; 
        }
        catch (Exception)
        {
            throw new DbException();
        }
    }
} 
```

我要单元测试的方法*Create在**XmlMapping*类中。此方法序列化一个 xml 文件并生成一个 XmlMapping 类型的对象。我试图为序列化部分写一个存根。但不想在构造函数（构造函数注入）中使用映射类调用我的数据库工厂。

**编辑：**

我的数据库工厂是通用的。通用类型用于确定应该响亮的 xml 文件，即：*typeOf(T) = Customer --> XmlMapping-File = Customer.xml*

**解决方案（感谢杰夫！）：**

```
public class XmlMapping : IMapping //class under test
{
    internal static Func<Type, IMapping> DeserializeHandler { get; set; }

    static XmlMapping()
    {
        DeserializeHandler = DeserializeMappingFor;
    }

    public static IMapping Create(Type type)
    {
        try
        {
            var mapping = DeserializeHandler(type);
            if (!mapping.IsValid())
                throw new InvalidMappingException();
            return mapping;
        }
        catch (Exception ex)
        {
            throw new DataException("Failed to load mapping configuration from xml file.", ex);
        }
    }

    internal XmlMapping(IMapping mapping)
    {
        this.Query = mapping.Query;
        this.Table = mapping.Table;
        this.Entity = mapping.Entity;
        this.PropertyFieldCollection = mapping.PropertyFieldCollection;
    }

    private XmlMapping() { }
}

[TestClass]
public class MappingTests //testing class
{
    [TestMethod]
    public void Create_ValidDeserialization_ReturnsObjectInstance()
    {
        XmlMapping.DeserializeHandler = MakeFakeHandlerFor(MakeMappingStub());
        var result = XmlMapping.Create(typeof(ActivityDto));
        Assert.IsInstanceOfType(result, typeof(XmlMapping));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:58:21.220

我会使用一个假动作处理程序来帮助验证反序列化调用的内容。让我们添加一个 Func 委托属性并将其默认为您的序列化方法。您的 XmlMapping 类和测试将类似于：

```
public class XmlMapping //class under test
{

    static XmlMapping()
    {
        // Default the handler to the normal call to Deserialize
        DeserializeHandler = Deserialize;
    }

    public static XmlMapping Create(string filename) //method under test
    {
        //deserialize xml to object of type XmlMapping
        //preudocode:
        var result = DeserializeHandler(string.Format("{0}.xml",filename));
        //...
        return result;
    }

    // Abstract indirection function to allow you to swap out Deserialize implementations
    internal static Func<string, XmlMapping> DeserializeHandler { get; set; }

    private static XmlMapping Deserialize(string fileName)
    {
        return new XmlMapping();
    }

}

public class CreateTests {

    public void CallingDeserializeProperly()
    {

        // Arrange
        var called = false;
        Func<string, XmlMapping> fakeHandler = (string f) =>
        {
            called = true; // do your test of the input and put your result here
            return new XmlMapping();
        };

        // Act
        XmlMapping.DeserializeHandler = fakeHandler;
        var m = XmlMapping.Create("test");

        // Assert
        Assert.IsTrue(called);

    }

} 
```

# facebook - 如何将 Facebook 应用与 Facebook 群组整合？

> ID：13750945
> 
> 赞同：2
> 
> 时间：2012-12-06T19:20:24.470
> 
> 标签：facebook, web, facebook-group

我们有一个网站（一个 wiki）和一个 Facebook 群组。我创建了一个应用程序，让人们使用他们的 Facebook ID 登录网站，效果很好。不过，我们希望该网站的活动显示在 Facebook 群组中，或者以其他方式发布到某个人的时间线（Joe 编辑了此网站页面等）。我们该怎么做呢？我们需要改变什么来获得所需的功能？我们如何才能更紧密地整合我们的 Facebook 群组和我们的网站，也许通过使用我们拥有的应用程序（或任何其他方式）？

# java - 从 JTable 获取值以设置到 JTextField

> ID：13750946
> 
> 赞同：1
> 
> 时间：2012-12-06T19:20:26.890
> 
> 标签：java, swing, jtable, jscrollpane, textfield

单击鼠标时，我尝试从中获取价值，`JTable`但`JTextField`它不起作用。例如，当用户从我的表`JTextField`中选择一行时，会动态填充所选行的信息。

我`JTable`也在一个`JScrollPane`. 我的桌子也有一个`DefaultTableModel`.

```
DefaultTableModel model = new DefaultTableModel(){
    public boolean isCellEditable(int row, int column){
        return false;
        }
    };
private JTable jTable1 = new JTable(model);
public Reservation() {
    try {
        jbInit();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private void jbInit() throws Exception {
    this.getContentPane().setLayout( null );
    this.setSize( new Dimension(400, 300) );
    this.setTitle( "Rezervasyon" );
    jLabel1.setText("Kitap No: ");
    jLabel1.setBounds(new Rectangle(0, 185, 60, 15));
    jTextField1.setBounds(new Rectangle(60, 180, 70, 20));
    jLabel2.setText("Ogrenci No: ");
    jLabel2.setBounds(new Rectangle(165, 180, 65, 20));
    jTextField2.setBounds(new Rectangle(250, 180, 75, 20));
    jButton1.setText("Gonder");
    jButton1.setBounds(new Rectangle(135, 210, 75, 21));
    jButton1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                jButton1_actionPerformed(e);
            }
        });
    jLabel3.setText("Ogrenci ID: ");
    jLabel3.setBounds(new Rectangle(5, 30, 100, 15));
    jTextField3.setBounds(new Rectangle(80, 25, 120, 20));
    jScrollPane1.setBounds(new Rectangle(5, 50, 350, 115));
    jScrollPane1.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                int row = jTable1.getSelectedRow();
                String book = model.getValueAt(row, 0).toString();
                jTextField1.setText(book);
                System.out.println(book);
                String stuID = model.getValueAt(row, 1).toString();
                jTextField2.setText(stuID);
            }
        });
    jButton2.setText("Ara");
    jButton2.setBounds(new Rectangle(285, 25, 75, 21));
    jButton2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                jButton2_actionPerformed(e);
            }
        });
    jScrollPane1.getViewport().add(jTable1, null);
    this.getContentPane().add(jButton2, null);
    this.getContentPane().add(jScrollPane1, null);
    this.getContentPane().add(jTextField3, null);
    this.getContentPane().add(jLabel3, null);
    this.getContentPane().add(jButton1, null);
    this.getContentPane().add(jTextField2, null);
    this.getContentPane().add(jLabel2, null);
    this.getContentPane().add(jTextField1, null);
    this.getContentPane().add(jLabel1, null);
    String header [] ={"Kitap No", "Ogrenci No"};
    for(int i = 0; i < header.length; i++){
        model.addColumn(header[i]);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:14:46.727

我推荐使用[TableCellListener](http://tips4java.wordpress.com/2009/06/07/table-cell-listener/)类。然后你只需去：

```
//Creating an action for the Listener to use
Action action = new AbstractAction()
{
public void actionPerformed(ActionEvent e)
{
    //The code to do when the action is performed
    TableCellListener tcl = (TableCellListener)e.getSource();
    <yourTextField>.setText(tcl.getNewValue());
}
};
//Nothing else needed! Listens automatically
TableCellListener tcl = new TableCellListener(table, action); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T04:23:49.767

如果您使用[MouseListener](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseListener.html)执行任务，那么此代码可能会有所帮助。创建一个`CustomMouseListener`类，当点击发生时，只需调用 getSelectedData(..) 方法，它将值设置为`JTextField`. 设置应仅在鼠标位于`pressed`或`clicked`时进行`entered`。

```
class TableMouseListener implements MouseListener {  

   private JTable table; 
   private JTextField textField;   

   public TableMouseListener(JTable table, JTextField textField) {
  this.table = table;
      this.textField = textField;           
   }

 public void mousePressed(MouseEvent e) { 
          getSelectedData(JTable table);
 }  

 public void mouseReleased(MouseEvent e) {}  

 public void mouseEntered(MouseEvent e) {
           getSelectedData(JTable table);
 }  

 public void mouseExited(MouseEvent e) {}  

 public void mouseClicked(MouseEvent e) {
          getSelectedData(JTable table);
 } 

/**
 *  Get the selected row using selectedRow(..) method. Append entire row to the String and set this string to the JTextFIeld.  
*/
public getSelectedData(JTable table) {
        // Get the selected row from the table.
          int selectedRow = table.getSelectedRow();
          String setToTextField = new String();
          for(int i = 0; i < table.getColumnCount(); i++) {
              setToTextField += table.getValueAt(selectedRow, i) + "  ";
          }
          // Finally set this to your JTextField.
         textField.setText(setToTextField);
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T11:27:02.837

可能最简单的方法是使用 JTable 的 MouseClicked 事件。使用以下代码：

```
private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {                                     
    DefaultTableModel dtm = (DefaultTableModel) jTable1.getModel(); //create a model
    int selectedRowIndex = jTable1.getSelectedRow(); //get selected row
    String id = (String) dtm.getValueAt(selectedRowIndex, 0); //get the primary key to fetch data.
    try {
        ResultSet rs = DBCon.getData("Select * from stock where pd_id= '"+id+"'"); //dont worry about dbcon.getdata, its my class to get data.
        while(rs.next()){    //u can use normal query
            pd_id.setText(rs.getString("pd_id"));  //these are my textfields
            pd_name.setText(rs.getString("pd_name"));
            pd_qtys.setText(rs.getString("pd_qtys"));
            pd_qtyw.setText(rs.getString("pd_qtyw"));
            pd_price.setText(rs.getString("pd_price"));
            pd_pkg.setText(rs.getString("pd_pkg"));
        }
    } catch (Exception ex) {
        Logger.getLogger(ExistingStock.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T16:51:47.900

只需您必须转换`model.getValueAt(jTable1.getSelectedRow(),0);`为`String`

```
DefaultTableModel model = (DefaultTableModel) jTable1.getModel();

String textField = (String) model.getValueAt(jTable1.getSelectedRow(),0);  
String textField1 = (String) model.getValueAt(jTable1.getSelectedRow(),1); 
```

现在只需设置`textField`and `textField1`to `jTextField1`and`jTextField2`

```
jTextField1.setText(textField);
jTextField2.setText(textField1); 
```

# selenium - Selenium - 如何切换到打开的不同（登录）窗口？

> ID：13750948
> 
> 赞同：1
> 
> 时间：2012-12-06T19:20:37.700
> 
> 标签：selenium, selenium-ide

我的应用程序有一个管理员帐户，并且测试已经在其中。

然后，此帐户具有用于登录的“常规”用户的超链接，例如：

一 `http://dmplanning-stage.herokuapp.com/p/7Fimn1FRs1WZe5xmFTUA`
二三 `http://dmplanning-stage.herokuapp.com/p/FRs1WZe7Fimn15TUAxmF`
_`http://dmplanning-stage.herokuapp.com/p/mFTUA7Fimn1FRs1WZe5x`

每次我运行测试套件时都会生成这些链接，并且 id 是不同的。

我创建了一个测试来定位并单击列出这些用户及其登录超链接的页面上的超链接。测试运行并且 selenium 使浏览器弹出新窗口，但是我如何切换到它，以便我可以登录并继续？

为了使其更具挑战性，另一个窗口的标题为空，即

我可以让程序员添加标题，但这需要时间。有没有办法识别和切换到另一个窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:15:39.127

我假设您正在使用 Selenium IDE。所以从[硒参考](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)

* * *

> **选择弹出（窗口ID）**
> 
> 简化了选择弹出窗口的过程（并且不提供超出 selectWindow() 已经提供的功能）。
> 
> *   如果未指定 windowID 或指定为“null”，则选择第一个非顶部窗口。顶部窗口是 selectWindow() 在不提供 windowID 的情况下选择的窗口。在播放多个弹出窗口时不应使用此选项。
>     
>     
> *   否则，将根据 windowID 按以下顺序查找窗口： 1) 窗口的“名称”，如 window.open() 所指定；2) 一个 javascript 变量，它是对窗口的引用；3) 窗口的标题。这与 selectWindow 执行的有序查找相同。

* * *

> **选择窗口（窗口 ID）**
> 
> 使用窗口定位器选择弹出窗口；一旦选择了弹出窗口，所有命令都会转到该窗口。要再次选择主窗口，请使用 null 作为目标。窗口定位器提供了指定窗口对象的不同方式：按标题、按内部 JavaScript“名称”或按 JavaScript 变量。
> 
> *   **title** = *My Special Window*：使用出现在标题栏中的文本查找窗口。当心; 两个窗口可以共享相同的标题。如果发生这种情况，这个定位器只会选择一个。
>     
>     
> *   **name** = *myWindow*：使用其内部 JavaScript“名称”属性查找窗口。这是传递给 JavaScript 方法 window.open(url, windowName, windowFeatures, replaceFlag) （Selenium 拦截）的第二个参数“windowName”。
>     
>     
> *   **var** = *variableName*：一些弹出窗口未命名（匿名），但与当前应用程序窗口中的 JavaScript 变量名称相关联，例如“window.foo = window.open(url);”。在这些情况下，您可以使用“var=foo”打开窗口。

**`selectWindow`**如果您可以检索打开的新窗口的名称，那将是理想的。

> 如果您在确定要操作的窗口的名称时遇到问题，请查看 Selenium 日志消息，这些消息标识了通过 window.open 创建的窗口的名称（因此被 Selenium 拦截）。在打开每个窗口时，您将看到如下消息：
> 
> > `debug: window.open call intercepted; window ID (which you can use with selectWindow()) is "myNewWindow"`
> 
> 在某些情况下，Selenium 将无法拦截对 window.open 的调用（例如，如果调用发生在“onLoad”事件期间或之前）。（这是错误 SEL-339。）在这些情况下，您可以使用 Selenium openWindow 命令强制 Selenium 注意到打开窗口的名称，使用空（空白）url，如下所示： openWindow("", "myFunnyWindow") .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:34:50.780

您可以使用窗口句柄切换到新窗口。某种东西。。

```
Webdriver driver = new FirefoxDriver();
driver.get  // Go to ur login page
driver.click //Click on link which launches new window
Set<String> s = driver.getwindowhandles() //this will return all open windows
driver.switchTo.window(s[1]);  //will switch to second window 
```

希望能帮助到你..

# git - 是否可以在 .gitconfig 中为每个通配符域配置 user.name 和 user.email？

> ID：13750953
> 
> 赞同：46
> 
> 时间：2012-12-06T19:21:05.013
> 
> 标签：git, github

我有一台工作计算机，它被全局配置为在提交时使用我的工作电子邮件和姓名。这很好。但是，我想制定一些规则，“如果 repo 来源是 github，则使用用户 X 和电子邮件 Y”

我意识到您可以为每个存储库创建一个配置条目，但我希望它更加自动化：如果克隆是 github，它应该使用 github 用户详细信息。如果我从工作中克隆，它应该使用工作详细信息。

有没有办法根据远程域全局配置这个？还是另一种方式？

编辑/更新

我接受了下面的答案，但稍微修改了脚本：

```
#!/usr/bin/env bash

# "Real" git is the second one returned by 'which'
REAL_GIT=$(which -a git | sed -n 2p)

# Does the remote "origin" point to GitHub?
if ("$REAL_GIT" remote -v 2>/dev/null | grep '^origin\b.*github.com.*(push)$' >/dev/null 2>&1); then

    # Yes.  Set username and email that you use on GitHub.
    export GIT_AUTHOR_NAME=$("$REAL_GIT" config --global user.ghname)
    export GIT_AUTHOR_EMAIL=$("$REAL_GIT" config --global user.ghemail)

fi

"$REAL_GIT" "$@" 
```

主要添加是对两个`git config`值的要求。

```
git config --global user.ghname "Your Name"
git config --global user.ghemail "you@yourmail.com" 
```

这避免了对脚本中的值进行硬编码，从而使其更具可移植性。也许？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2017-09-15T12:24:31.943

Git [2.13 添加了](https://github.com/blog/2360-git-2-13-has-been-released)对条件配置的支持。如果您将结帐组织到每个工作领域的目录中，那么您可以根据结帐的位置添加自定义设置。在您的全局 git 配置中：

```
[includeIf "gitdir:code/work/"]
    path = /Users/self/code/work/.gitconfig 
```

然后在 ~/code/work/.gitconfig 中：

```
[user]
    email = self@work.com 
```

当然，您可以为任意多个工作领域做到这一点。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-06T21:29:46.667

Git 中没有内置任何东西可以做到这一点（据我所知），但下面的 shell 脚本似乎工作得非常可靠。将其修改为在签入 GitHub 时使用您想要的用户名和电子邮件地址，然后将其另存为名为“git”的可执行文件，在“真实”git*之前的某个位置。*

```
#!/usr/bin/env bash

# "Real" git is the second one returned by 'which'
REAL_GIT=$(which -a git | sed -n 2p)

# Does the remote "origin" point to GitHub?
if ("$REAL_GIT" remote -v 2>/dev/null |
    grep '^origin\b.*github.com.*(push)$' >/dev/null 2>&1); then

    # Yes.  Set username and email that you use on GitHub.
    export GIT_AUTHOR_NAME='*** put your name here ***'
    export GIT_AUTHOR_EMAIL='*** put your email address here ***'

fi

"$REAL_GIT" "$@" 
```

我在我的机器上使用了类似的技巧`ssh`——我希望 ssh 在运行时更改我的窗口背景颜色，然后在退出时将其更改回来——并且它对我来说工作可靠。

另外，请注意，这是硬编码的，只能查看名为 的遥控器`origin`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-16T11:45:55.753

我编写了 post-checkhout 挂钩来根据存储库的原始 URL 设置存储库的本地作者详细信息。

它不使用通配符域，尽管它使用`git config --urlmatch`据称将回退到最接近的匹配 URL。

在这里查看：[https ://github.com/boywhoroared/dotfiles/blob/master/git/template/hooks/post-checkout.d/author](https://github.com/boywhoroared/dotfiles/blob/master/git/template/hooks/post-checkout.d/author)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T19:28:56.270

`user.name`并`user.email`用于“签署”您的提交。由于提交是独立于存储库的（例如，当您推送它们时，相同的提交将在许多不同的存储库中），因此这些属性不依赖于远程。

您可以做的是在通过 https 连接到不同的遥控器时设置不同的日志记录。您只需将用户名放在 url 中，在表单中`https://username@host/path/to/repo.git`，您就完成了。

但是提交作者的将是相同的`user.name`，因为提交是在本地进行的，然后只是与其他人共享。

由于提交者的身份是提交的一部分，因此如果您进行了两次相同的提交，除了提交者的姓名和电子邮件之外，这些提交将具有不同的哈希值，因此它们将是两个不同的 git 提交。那将是一团糟:)

如果您**真的**想这样做，也许您可​​以使用钩子制作一些东西，将您的提交推送到您计算机上的另一个仓库，而另一个仓库（再次通过钩子）将重新编写提交，更改作者，然后推送到另一个遥控器。

但这太讨厌了，我会否认告诉过你这件事；）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-16T08:16:50.360

与[Mike 的回答](https://stackoverflow.com/a/13752961/226958)类似，但由于`uniq`第四行的命令，即使您在 shell 中启动 shell，它也不会导致 fork 炸弹。

```
#!/usr/bin/env bash

# "Real" git is the second one returned by 'which'
REAL_GIT=$(which -a git | uniq | sed -n 2p)

# Does the remote "origin" point to GitHub?
if ("$REAL_GIT" remote -v 2>/dev/null |
    grep '^origin\b.*github.com.*(push)$' >/dev/null 2>&1); then

    # Yes.  Set username and email that you use on GitHub.
    export GIT_AUTHOR_NAME='*** put your name here ***'
    export GIT_AUTHOR_EMAIL='*** put your email address here ***'

fi

"$REAL_GIT" "$@" 
```

# jquery - MVC3 表单在 POST (jquery.form) 上未到达控制器

> ID：13750954
> 
> 赞同：0
> 
> 时间：2012-12-06T19:21:06.947
> 
> 标签：jquery, asp.net-mvc-3, jquery-forms-plugin

我有一个表格：

```
using (Html.BeginForm("SubmitWork", "ActivitySubmission", FormMethod.Post, new { @class = "activityForm", Name = "pba-activity-form-" + item.ActivityTemplateId, Id = "pba-activity-form-" + item.ActivityTemplateId })){
//Some stuff here
<input type="submit" ... />
} 
```

当它被发布时，代码永远不会真正到达控制器。该表单使用 jquery.form ( [http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/) )。的JavaScript：

```
 function setOptions(formData, jqForm, options){
        var parts = $(jqForm).prop("id").split("-");
        var activityTemplateId = parts[3];
        var resultsDivId = "#activityResults" + activityTemplateId;
        var msg = '<div style="height:40px; margin-right:20px; float:left;"><img src="/Content/loadingSpinner.gif" /></div>' +
            'Saving your work...<div style="clear:both;"></div>';
        $(resultsDivId).html(msg).slideDown();
    }

    $(".activityForm").ajaxForm({
        type: 'POST',
        beforeSubmit: setOptions,
        success: function (data) {
            if ($(this).valid) {
                var x = data.message;
                var y = data.status;
                var z = data.data;
            }
        }
    }); 
```

setOptions 函数基本上只是在表单内呈现一个“正在加载”的 div，让用户知道正在发生某些事情。

当代码运行并单击提交按钮时，一切正常运行，直到实际发布。帖子永远不会碰到控制器（即在调试模式下：它永远不会中断，代码不会被执行等）并且只是作为“成功”返回。返回时，变量“data”包含整个页面的 HTML 字符串。

我知道仅凭我所记录的内容很难诊断出这样的问题，但是任何人都可以就可能发生的事情给我一些想法吗？我没有得到任何迹象表明有 404 或幕后发生的任何事情，或者根本没有任何问题......

控制器方法如下所示：

```
[HttpPost]
public ActionResult SubmitWork(long activityTemplateId, long studentProjectId)
{
    //stuff

    return Json(someDataResults, JsonRequestBehavior.AllowGet);
} 
```

# mysql - MySQL 转换成 outfile 格式

> ID：13750970
> 
> 赞同：1
> 
> 时间：2012-12-06T19:21:54.113
> 
> 标签：mysql, select, select-into, select-into-outfile

```
select * 
  INTO OUTFILE 'outfile.txt'
  FIELDS TERMINATED by ','
  LINES TERMINATED BY '\n'
  from nGrams 
```

有什么办法可以修改此查询以在一行上返回每一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:01:17.663

似乎这正是它已经要做的事情。

但是，如果您在 Windows 上执行此操作，您可能想要使用`LINES TERMINATED BY '\r\n'`或某些糟糕的文本编辑器（例如记事本）可能不会将`\n`其本身视为换行符

# android - 视图类中的警报对话框？

> ID：13750972
> 
> 赞同：0
> 
> 时间：2012-12-06T19:22:05.413
> 
> 标签：android, view, android-alertdialog

我创建了扩展 View 的类。现在我想在用户做某事时显示 AlertDialog。我怎样才能做到这一点？

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create(); 
```

这段代码不起作用，因为“this”变量应该是一个 Activity，但我的类中的“this”是“Drawable”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:29:56.147

Get your context into your class and replace that instance with "this".

# android - 在 Nexus 7 上加载自定义内核

> ID：13750973
> 
> 赞同：-2
> 
> 时间：2012-12-06T19:22:12.673
> 
> 标签：android, kernel

我正在尝试为我的 Nexus 7 构建一个自定义内核（内核版本 3.1.10，android 4.1.2，root 和解锁），但我在加载内核时遇到了麻烦。我已经按照我在网上找到的几个方面的所有步骤进行了操作，但无法加载内核。我怀疑问题出在将内核重新打包到 boot.img 中的某个地方。以下是我正在使用的步骤：

1.  从 Google 网站下载内核源代码
2.  从设备中拉出 config.gz，gunzip，并在与内核源代码相同的目录中重命名为 .config。

出于测试目的，我没有对 menuconfig 等中的内核配置进行任何更改，因此 .config 文件与它离开设备时完全相同。我已更改 Makefile 中的外向性以匹配现有内核。

重建内核：

1.  使 ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi-

拆开boot.img

1.  unpackbootimg -i boot.img -o 解压
2.  cat ../kernel/arch/arm/boot/zImage > 解压/boot.img-zImage

重新打包 boot.img

1.  mkbootimg --kernel boot.img-zImage --ramdisk boot.img-ramdisk.gz --cmdline "no_console_suspend=1 console=null" --base `cat boot.img-base`-o newboot.img

然后，重新启动并在fastboot中一次...

1.  fastboot 启动 newboot.img

我的设备只是挂起。我在我的仅限 Wifi 的摩托罗拉 Xoom 上尝试了相同的过程，它只是启动循环。有没有我错过的步骤？ramdisk中有什么我需要改变的吗？感谢您的帮助或您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:35:34.207

我也用这个把头撞到墙上了几天。以下是一些帮助我启动并运行内核的技巧：

1.  使用 split_bootimg 解压缩您的原始 boot.img。你可以在这里得到它：[http ://www.enck.org/tools.html](http://www.enck.org/tools.html)

2.  运行 make 时，设置 SUBARCH=arm 以及 ARCH

3.  请务必使用来自 android 源的工具链。如果你没有它，你可以在这里得到它：[https ://android.googlesource.com/platform/prebuilt/](https://android.googlesource.com/platform/prebuilt/)

4.  如果您发现自己陷入循环启动动画，请确保您拥有最新的稳定版本的内核。

最后一点，我尝试了提交哈希方法（使用 git log kernel 获取预构建内核的最后一次提交）来获取内核源，但发现它在编译后总是挂起。

最后我选择使用最新的内核源代码（我选择了 mr1 分支），重新打包的 boot.img 第一次在我的 4.1.2 Android 版本中运行。

希望有些帮助！

# parsing - javacc 令牌前缀

> ID：13750975
> 
> 赞同：1
> 
> 时间：2012-12-06T19:22:20.857
> 
> 标签：parsing, grammar, javacc

我试图在我的查询语言中允许这样的字符串：

```
-some-hyphenated-term 
```

其中第一个`-`表示要排除该术语。问题是`-`最终包含在令牌文本中，而不是被解析为排除令牌。我确定我错过了一些简单的东西，但我无法弄清楚。

```
options  {
IGNORE_CASE=true;
LOOKAHEAD=2;
STATIC=false;
}
PARSER_BEGIN(SimpleQueryParser)

public class SimpleQueryParser {

   Query query = new Query();

   public Query getQuery() {
     return query;
   }
}

PARSER_END(SimpleQueryParser)

SKIP : { " " | "\t" | "\n" | "\r" }

TOKEN : {
    <REQUIRE: "+">
  | <FORBID: "-">
  | <FIND: "find"> 
  | <LPAREN: "(">
  | <RPAREN: ")">
  | <STRING : (["A"-"Z", "0"-"9", "_", "*", "^", ".", "-"])+ >
  | <QUOTED_STRING: "\"" (~["\""])+ "\"" >
}

/** Top level production. */
void request() : {} {
  (findClause())? (queryTerm())*
}

void findClause() : {
  Find find = new Find();
  Token tCategory, tProperty;
} {
  <FIND> 
  ":"
  tCategory = category() {
    find.setCategory(tCategory.image);
  }

  (":" tProperty = property() {
    find.setProperty(tProperty.image);
  } 
  )?

  {
    query.setFind(find);
  }
}

void expression() : {} {
  queryTerm()  (  queryTerm() )*
}

void queryTerm() : {
    Clause clause = new Clause();
    Token tString, tCategory, tProperty;
} {
  (<FORBID> { clause.setForbid(true); } | <REQUIRE> { clause.setRequire(true); } )? 
  (( tCategory = category() { clause.setCategory(tCategory.image); } ":" ( tProperty = property() { clause.setProperty(tProperty.image); } ":" )? ) |
  ( ":" tProperty = property() { clause.setProperty(tProperty.image); } ":" ))? 
  (tString = <STRING> { clause.setQuery(tString.image); } | tString = <QUOTED_STRING> {
   clause.setQuery(tString.image.substring(1, tString.image.length() - 1)); }) 
  { query.getClauses().add(clause); }|
  <LPAREN> expression() <RPAREN>
}

Token category() : {
  Token tCategory;
} {
  tCategory = term() { return tCategory; }
}

Token property() : {
  Token tProperty;
} {
  tProperty = term() { return tProperty; }
}

Token term() : {
  Token tTerm;
} {
  tTerm = <STRING> { return tTerm; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:10:58.827

您需要更改规则，`<STRING>`以便`"-"`仅在它不是字符串的第一个字符时才包含它。就像是

```
<STRING : ["A"-"Z", "0"-"9", "_", "*", "^", "."](["A"-"Z", "0"-"9", "_", "*", "^", ".", "-"])* > 
```

# objective-c - 在 Objective-C 中删除一个单元格行

> ID：13750980
> 
> 赞同：2
> 
> 时间：2012-12-06T19:22:34.610
> 
> 标签：objective-c, ios

当您用手指在单元格上滑动时想要删除一行。

我懂了：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Delete");
} 
```

运行删除按钮后出现，但当我按下它时没有任何反应。我需要在括号中插入什么？

还有我的.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *str = cell.textLabel.text;

    NSLog(@"U selected %@", str);
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [self.dataSourceArray removeObjectAtIndex:indexPath.row];//or something similar to this based on your data source array structure
        //remove the corresponding object from your data source array before this or else you will get a crash
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.array = @[@"test",@"test"];

    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:nil action:@selector(updateArray) forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refreshControl;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:24:21.383

试试这个，

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

  if (editingStyle == UITableViewCellEditingStyleDelete) {
     [self.array removeObjectAtIndex:indexPath.row];//or something similar to this based on your data source array structure
//remove the corresponding object from your data source array before this or else you will get a crash
     [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
  }
} 
```

# mysql - SQL - 如何选择不为 0 但可能为 NULL 的值？

> ID：13750982
> 
> 赞同：1
> 
> 时间：2012-12-06T19:22:38.243
> 
> 标签：mysql

在我的 MySQL 表中，我有一些`status`= NULL 的行和一些`status`= 0的行

在查询中选择它们时：

```
SELECT *
FROM `table`
WHERE `status` != 0 
```

这会忽略`0`和`NULL`值。

如何仅忽略`0`值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:24:33.723

您可以使用`is null`谓词：

if`status`是一个数字字段：

```
SELECT *
FROM `table`
WHERE `status` != 0
OR `status` IS NULL 
```

if`status`是一个文本字段：

```
SELECT *
FROM `table`
WHERE `status` != '0'
OR `status` IS NULL 
```

这是有效的，因为`NULL != 0`评估为`NULL`和`NULL OR TRUE`评估为`TRUE`。包含条件评估为的行`NULL`被拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:24:44.253

没试过，但也许这个？

```
SELECT *
FROM `table`
WHERE `status` IS NULL OR `status` != 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:28:44.140

从你的 sqlfiddle 来看，它似乎`status`是一种文本类型，所以这就是你想要的：

```
SELECT *
FROM mytable
WHERE status IS NULL
OR status != '0' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:36:51.250

如果您想同时排除它们：

```
SELECT *
FROM mytable
WHERE COALESCE(status,0)  <> 0
    ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T20:09:38.983

您可以使用[null 安全的等于运算符](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#operator_equal-to)...

```
SELECT status
FROM mytable
WHERE not (status <=> 0); 
```

它认为`null`只是另一个值。 `0 <=> null`是错误的，与`null`您通过正常比较得到的相反。

与此处的其他答案一样，如果您的`status`列恰好是 (var)char 类型，请引用 0。

# jquery - jQuery 滑块上的第一张图片不合适

> ID：13750984
> 
> 赞同：2
> 
> 时间：2012-12-06T19:22:43.570
> 
> 标签：jquery, css

我正在开发一个 jQuery 滑块。到目前为止有两张图片，第一张位置不正确。

这是我正在使用的网址：[http ://www.ayrturfandtrac.org/](http://www.ayrturfandtrac.org/)

它位于页面的左下方。

我想将第一张图片与第二张图片放在同一位置（在按钮之间居中）。

这是我的代码：

HTML：

```
<div id="fader">
<img src="http://www.ayrturfandtrac.org/wp-content/uploads/2012/11/usedListing.png" class="usedListingImage">
<img src="http://www.ayrturfandtrac.org/wp-content/uploads/2012/12/kubotaB2320.png" class="usedListingImage">
</div>

<div id="next">
<img id="nextListing" class="nextListing" src="http://www.ayrturfandtrac.org/wp-content/uploads/2012/12/nextListingArrow.png" onmouseover="this.src='http://www.ayrturfandtrac.org/wp-content/uploads/2012/12/nextListingHover.png'" onmouseout="this.src='http://www.ayrturfandtrac.org/wp-content/uploads/2012/12/nextListingArrow.png'">
</div> 
```

jQuery：

```
<script type="text/javascript">
jQuery (function() {
    $('#fader img:not(:first)').hide();

    $('#fader img').each(function() {
        var img = $(this);
        $('<img>').attr('src', $(this).attr('src')).load(function() {
            img.css('margin-left', -this.width / 2 + 'px');
        });
    });

    var pause = false;

    function fadeNext() {
        $('#fader img').first().fadeOut().appendTo($('#fader'));
        $('#fader img').first().fadeIn();
    }

    function fadePrev() {
        $('#fader img').first().fadeOut();
        $('#fader img').last().prependTo($('#fader')).fadeIn();
    }

    $('#fader, #next').click(function() {
        fadeNext();
    });

    $('#prev').click(function() {
        fadePrev();
    });

    $('#fader, .button').hover(function() {
        pause = true;
    },function() {
        pause = false;
    });

    function doRotate() {
        if(!pause) {
            fadeNext();
        }    
    }

    var rotate = setInterval(doRotate, 5000);

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:14:44.220

您正在根据宽度设置图像的左侧边距：

```
$('<img>').attr('src', $(this).attr('src')).load(function() {
    img.css('margin-left', -this.width / 2 + 'px');
}); 
```

然而，图像的原始宽度之一比另一个大很多。您只是在浏览器中调整图像的大小（这绝不是一个好主意），因此 javascript 正在获得原始的未调整大小的值。您可以通过将剩余边距值设置为像 -160px 这样的好值来硬编码剩余边距值：

```
img.css('margin-left', -'160px'); 
```

或确保将图像调整为相同的宽度，或者您也可以将图像设置在 div 内并获取 div 的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:07:05.410

第一张图片的元素样式设置为 margin-left: -607px; 这导致图像偏向左侧。你需要玩弄这个结构。也许将样式从 HTML 元素中取出并放入 css 文件中。我将其更改为 -160px，它看起来更居中。

# java - 为Android保存二维字符串数组的最佳方法

> ID：13750988
> 
> 赞同：1
> 
> 时间：2012-12-06T19:23:07.127
> 
> 标签：java, android, arrays, save, 2d

我已经围绕二维字符串数组构建了我的游戏关卡，但我不知道如何将该数组保存到手机内存然后再次加载它。有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:34:07.297

如果您的关卡是静态的，您可以在文本文件中创建游戏关卡，将其添加到 /assets 文件夹中的项目中，然后使用以下内容加载此文件：

```
InputStream is = yourContext.getAssets().open("level.txt"); 
```

并解析文件以加载二维字符串数组。

# php - checkdnsrr（用于电子邮件域验证）有多可靠？

> ID：13750999
> 
> 赞同：7
> 
> 时间：2012-12-06T19:23:50.557
> 
> 标签：php, dns

我想知道在使用 checkdnsrr 检查提供的电子邮件地址的域部分时是否存在误报的现实机会？我想从注册表中检查这一点，以减少客户端错误输入的数量。

```
$hostCheck = checkdnsrr("test.org", "MX"); 
```

checkdnsrr 只是“非常可靠”还是没有实际机会错过实际存在的域？因为那样我会省略这样的检查。我希望能解释一下整个过程的可靠性的原因。我研究了 DNS（一些），但我不确定服务器暂时离线或其他事情是否会在这里产生可衡量的影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:30:44.790

不，这不可靠。dns 通常不可靠。这是尽力而为。提供无效域也可能需要很长时间，因此如果有人用大量无效/离线域敲击您的脚本，您需要考虑系统的潜在 DOS。

实际上（鲜为人知），域甚至不需要有 MX 记录来传递邮件。邮件传递应该回退到使用指定主机的 A 记录。这些天这可能不会发生太多，但理论上..