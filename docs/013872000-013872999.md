# StackOverflow 问答 13872000-13872999

# ruby-on-rails-3.2 - Rails 使用 :collection 渲染部分

> ID：13872003
> 
> 赞同：14
> 
> 时间：2012-12-14T02:57:14.340
> 
> 标签：ruby-on-rails-3.2

这很简单，它不应该是一个问题，但我不明白这里发生了什么。

我有以下代码

```
class DashboardController < ApplicationController
    def bookings
      @bookings = Booking.all
    end
end 
```

/views/dashboard/bookings.html.erb

```
<%= render 'booking', :collection => @bookings %> 
```

/views/dashboard/_booking.html.erb

```
<%= booking.booking_time %> 
```

我收到以下错误

```
undefined method `booking_time' for nil:NilClass 
```

但是，如果我在 /views/dashboard/_bookings.html.erb 中执行此操作

```
<% @bookings.each do |booking| %>
   <%= render 'booking', :booking => booking %>
<% end %> 
```

我得到（正确）

```
2012-12-19 09:00:00 UTC 
2012-12-28 03:00:00 UTC 
```

这里发生了什么？我真的很想使用这里定义的 :collection [http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-13T23:04:11.820

这是一个老问题，但以防万一其他人正在努力解决这个问题

> **当使用复数集合调用 partial 时，partial 的各个实例可以通过以 partial 命名的变量**访问正在呈现的集合的成员。

来自[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

在上面来自 OP 的示例中，因为调用了 partial`booking`而不是`bookings`，Rails 无法推断要在 partial 中使用的成员名称，因此需要将其显式传递为`as: :booking`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T03:31:50.563

您对渲染的调用与指南中显示的不同。你试过`render :partial => 'booking', :collection => @bookings`吗？

我相信假设您在 Rails 3 或更高版本中，您也应该能够使用较短的替代方案：`render @bookings`.

# windows-phone-7.1 - 在哪里可以下载适用于 Windows phone 7 的摇动手势库

> ID：13872004
> 
> 赞同：1
> 
> 时间：2012-12-14T02:57:40.893
> 
> 标签：windows-phone-7.1, shake, app-hub

我最近开始为 windows phone 7 编写代码，并且花了一些时间在圈子里寻找摇晃手势库。我关注的每个链接都告诉我去 AppHub，但是当我关注它时，我会被重定向到主页，询问我是为 windows phone 还是 xbox 开发。

如果有人有下载包含 dll 和文档的 zip 的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T08:27:51.960

我知道这是一个相当古老的线程，但由于它是搜索引擎在您查找摇动手势库时的第一个结果，因此实际答案可能很有用。

[您可以从 Microsoft 网站](http://go.microsoft.com/fwlink/?LinkId=219094)下载该库。请注意，您必须在 Visual Studio 中打开此项目并进行编译。

不要相信您在 Internet 上找到的已编译 DLL - 它们可能是原始库的修改版本。在这里，您拥有 MS-PL 许可的原始 Shake Gesture 库，因此您可以将它用于您的商业项目。您还拥有该库的源代码，因此您可以看到它是如何工作的，并最终根据您的需要对其进行修改。

包含该库如何工作的教程和解释的原始博客文章在[这里](http://blogs.windows.com/windows_phone/b/wpdev/archive/2011/02/22/windows-phone-shake-gestures-library.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T08:48:23.700

如果您在前面加上“xbox”，您有时可以找到内容。一开始是一个旧的创作者俱乐部链接......但它并不适用于所有资源。

现在试试这个链接：http: [//xbox.create.msdn.com/downloads/ ?id=714](http://xbox.create.msdn.com/downloads/?id=714)

# ios - 在 iOS XCode 项目中管理大量目标预处理器宏

> ID：13872009
> 
> 赞同：1
> 
> 时间：2012-12-14T02:58:19.933
> 
> 标签：ios, xcode, xcode4

我的应用程序中有许多目标，每个目标都指定了项目使用的大量预处理器宏。它们无处不在，从开关到字符串和 URL 的定义。我开始无法通过 xcode 构建设置 UI 来管理如此大量的项目，并且想知道拥有大型多目标项目的人会建议我做什么来减轻痛苦。

一种解决方案是在每个目标中定义一个开关，然后将所有定义转储到 -Prefix.pch 文件中，基本上与我在构建设置中定义这些宏具有相同的效果。

另一种解决方案是使用模块处理配置（可能是 plist 的包装器）并将具有相同文件名的不同 plist 捆绑到每个目标中。这样我就可以有一个很好的定义良好的界面来访问不同的设置，并且可以在其中添加一些逻辑。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:15:21.443

我所有的项目都包含一个`Constants.h`处理字符串定义、各种标志、图像名称等以及预处理器宏的文件。我几乎包含`Constants.h`在我创建的每个课程中。

我在一些应用程序中也有几个目标来控制 UI 主题和 Web 服务调用等，因此我在以下内容中执行以下操作`Constants.h`：

```
#ifdef APPLE
#define IMAGE_LOGO "apple.png"
#endif

#ifdef MICROSOFT
#define IMAGE_LOGO "windows.png"
#endif

#ifdef LINUX
#define IMAGE_LOGO "penguin.png"
#endif

//etc... 
```

我不确定它是否理想，但这非常适合我的需求，您不必弄乱烦人的构建设置 UI，除非在每个目标上设置标志（例如，`APPLE=1`）。希望能帮助到你。

# php - 使用 varchar 或 Char 加密 Salt？

> ID：13872015
> 
> 赞同：2
> 
> 时间：2012-12-14T02:59:00.827
> 
> 标签：php, mysql

我一直对我的数据库的创建感到困惑。使用 md5 salt 加密的密码的正确数据类型是什么？

我一直在使用 VarChar；但我被告知要搬过去`char`但从未给出解释？

另外，我知道这不是最佳实践，但我的数据库是 Varchar(255) 来保存我的密码；拥有它的最佳长度是多少？因为我不确定 md5 是否总是返回相同长度的字符串，或者它可能会有所不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:05:07.977

你是第一个问题：

> VARCHAR
> 
> *   保留尾随空格。（仅限 MySQL 5.0.3+。）
> *   最小的存储开销。17 个字符的记录只占用 17 个字符的空间。
> *   搜索此列时选择较慢。
> 
> 字符
> 
> *   尾随空格总是被删除。
> *   每条记录占用固定数量的空间 - 在您的情况下为 19 个字符。您的 17 个字符记录将浪费两个字节的存储空间。
> *   搜索此列时选择更快。

[资源](http://dev.mysql.com/doc/refman/5.0/en/char.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T03:00:45.623

MD5 将始终返回 32 个字符，因此在存储时使用 CHAR(32) 会更有效，即使它使用盐，它仍然会散列到那么多字符。您总是希望选择最合适的字符大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:00:46.050

如果您要更改密码加盐-不要同时将加密更改为安全的东西-[例如 bcyrpt。](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)

[当 md5 受到损害时](http://en.wikipedia.org/wiki/MD5#Security)，尝试和“微调”md5 设置似乎是一种浪费

关于问题的其他部分；

```
> A CHAR(x) column can only have exactly x characters. 
> A VARCHAR(x)column can have up to x characters. 
```

因此，如果您的盐是“固定的”（即始终为 6 个字符），那么您需要“CHAR”以获得更好的性能。但如果您的盐是可变的（即 5-6 个字符），那么您必须使用 VARCHAR。

# deployment - GlassFish 3.1.2 在部署时提供 404 而没有任何错误

> ID：13872018
> 
> 赞同：5
> 
> 时间：2012-12-14T02:59:18.837
> 
> 标签：deployment, glassfish, http-status-code-404, war

我尝试将一个非常简单的 helloworld.war 部署到 ubuntu 10.04 上的 glassfish 3.1.2 服务器。在我的电脑上它工作正常，但在我的服务器上我总是得到一个 404 页面。我的服务器上没有错误。有人有想法吗？

我注意到另一个奇怪的行为。重新启动服务器后，我无法登录管理控制台。我总是得到验证失败重新输入您的用户名和密码。当我重新启动 glassfish 时，它再次工作。

这听起来很熟悉，但我不明白他的解决方案如何帮助我。 [glassfish autodeploy 通过简单的应用程序提供 404](https://stackoverflow.com/questions/3908782/glassfish-autodeploy-gives-404-with-simple-app)

```
[#|2012-12-14T02:53:30.368+0100|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=71;_ThreadName=Thread-2;|uploadFileName=HelloWorld-1.0-SNAPSHOT.war|#]

[#|2012-12-14T02:53:30.605+0100|INFO|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=135;_ThreadName=Thread-2;|Mojarra 2.1.6 (SNAPSHOT 20111206) für Kontext '/HelloWorld-1.0-SNAPSHOT' wird initialisiert.|#]

[#|2012-12-14T02:53:30.729+0100|INFO|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=135;_ThreadName=Thread-2;|WEB0671: Loading application [HelloWorld-1.0-SNAPSHOT] at [/HelloWorld-1.0-SNAPSHOT]|#]

[#|2012-12-14T02:53:30.883+0100|INFO|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=135;_ThreadName=Thread-2;|HelloWorld-1.0-SNAPSHOT was successfully deployed in 482 milliseconds.|#] 
```

索引.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        Hello from Facelets
    </h:body>
</html> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:44:22.030

我猜你在名为 faces 的目录中没有 index.xhtml ......试试这个：

```
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list> 
```

# mysql - 选择月份和年份内的所有记录

> ID：13872021
> 
> 赞同：1
> 
> 时间：2012-12-14T02:59:49.290
> 
> 标签：mysql, sql

当我尝试在搜索时选择特定月份和年份的记录时，我找到了一半的解决方案

[mysql：使用 PHP 选择特定月份的所有条目](https://stackoverflow.com/questions/5450814/mysql-select-all-entries-from-a-particular-month-using-php?answertab=oldest#tab-top%20but%20i%20want%20to%20also%20select%20%20particular%20year%20in%20racord)

```
select * 
from thetable 
where monthname(date_field) = 'February' 
```

然后我修改它如下

```
select * 
from payments 
where monthname(date) = 'February' and EXTRACT(date )='2011'; 
```

但它显示错误什么是在我的表中选择mounth和year的正确方法我将日期存储为 `2011-2-4`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:04:03.467

您的列似乎不是`Date`数据类型，因此您可以做的最好的方法是先将其转换为`DATE`使用`STR_TO_DATE`

```
SELECT  *
FROM    Payments
WHERE   MONTHNAME(STR_TO_DATE(date,'%Y-%c-%e')) = 'FEBRUARY' AND
        YEAR(STR_TO_DATE(date,'%Y-%c-%e')) = 2011 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:00:46.960

试试这个：

```
select * from payments p 
where year(p.date) = 2011 and monthname(p.date) = 'February' 
```

# hex - 在 Ada 中将整数值转换为十六进制

> ID：13872022
> 
> 赞同：5
> 
> 时间：2012-12-14T02:59:51.617
> 
> 标签：hex, ada

有某种解决方法可以利用以下内容并保存它？

```
Put_Line(MyNum, Base => 16); 
```

它将例如 255 转换为十六进制 FF 中的正确值，但仅用于显示目的。我可以做类似的事情，但要保存结果吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T08:34:24.060

您可以使用[输出到字符串的 Put 版本](http://www.ada-auth.org/standards/12rm/html/RM-A-10-8.html#p18)：

```
procedure Put(To   : out String;
              Item : in Num;
              Base : in Number_Base := Default_Base); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T03:14:42.410

*我可以做类似的事情，但要保存结果吗？*

是的，这不是“最简单”的方式，但如果您使用 Streams，它会非常通用且灵活。

wikibook 有一个示例，尽管它对于您的意图有点“罗嗦”：[http ://en.wikibooks.org/wiki/Ada_Programming/Libraries/Ada.Streams/Example](http://en.wikibooks.org/wiki/Ada_Programming/Libraries/Ada.Streams/Example)

* * *

简单的“单线”是`Ada.Integer_Text_IO.Put`.

Ada95 的 RM 在附件 A 10.8 中描述了 integer_text_IO。

# linux - Xorg（或任何 X 服务器）和 Linux 中的 /dev/tty7 之间有什么关系？

> ID：13872031
> 
> 赞同：13
> 
> 时间：2012-12-14T03:01:06.190
> 
> 标签：linux, tty, xorg

当有人说“X 服务器在 /dev/tty7 上运行”时，我有几个问题。我对它的工作原理做了一些猜测，希望有人能告诉我以下陈述是真是假。

*   /dev/tty7 通常是 Xorg 的控制终端。
*   即使 tty7 是 Xorg 的控制终端，它也不会以任何有意义的方式“控制”Xorg。
*   Xorg 通过轮询 /dev/input/... 或类似的方式直接接收键盘和鼠标输入，而不是通过从 /dev/tty7 读取。尽管如此，/dev/tty7 也接收击键，您可以（例如）通过在终端仿真器中运行“xxd -p /dev/tty7”来查看。
*   Xorg 使用某些特定于硬件的接口在屏幕上绘图，例如驱动程序创建的某些设备文件或内存的 I/O 映射区域，而不是通过写入 /dev/tty7。
*   当 Xorg 设置视频模式时，tty 驱动程序会自动停止在屏幕上绘制。这就是为什么当您按下一个键或将一个字符串回显到 /dev/tty7 时，您不会看到它出现在屏幕上。
*   即使 tty7 在后台，Xorg 也会通过 /dev/events 接收键盘和鼠标输入，但除非 tty7 在前台，否则它会忽略它。
*   Xorg 在屏幕上绘制的任何内容只有在 tty7 位于前台时才会在监视器上显示。
*   Xorg初始化视频时（设置视频模式等），是因为tty7在前台，设置在tty7上生效，没有其他终端。

谢谢！

# windows - 通过 Windows 7 上的多个图像进行面部检测和识别

> ID：13872038
> 
> 赞同：2
> 
> 时间：2012-12-14T03:01:40.400
> 
> 标签：windows, face-recognition

我正在为计算机科学课程的最后一年做一个大学项目，当学生走进教室时，它涉及面部识别。我正在尝试找到一个可以处理多个图像的 SDK（如果我设置了一个每秒可以拍摄 1 张图像的相机，它应该可以让每个学生都获得，但是确实需要进行一些测试并记录在案）

学生不会像这样排着队进入教室，因此图像上可能有不止一张脸，但如果我将相机放在正确的位置，他们应该至少在其中一张图像中都面向前方 - 然后我需要使用包含图片的数据库来查找每个人脸的身份。

这就是我迷路的地方，很多面部识别 API 只能处理一个人/图像，或者只是检测到有人在那里但没有实现“比较”，所以我不能使用数据库。

理想情况下它需要免费，因为如果我成功完成它，大学想部署它，有人知道我可以使用什么吗？

PS。类似于他们在电影/电视节目中使用的那种东西我想......他们只是在图像上运行一些东西，获取面孔然后将它们与国家数据库进行比较。不确定现实生活中是否存在类似的东西，或者我可以在较小的数据库上使用，但我希望如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:43:06.477

以下是您可以使用的 API 列表：

[天空生物测量](http://skybiometry.com/)

[惠普分析测试版](http://map.hpl.hp.com/)

两者都应该解决多人的问题。我个人喜欢 Sky Biometry，我认为 API 更好。

看看[这个](https://stackoverflow.com/questions/11373312/alternatives-to-face-com-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:05:06.080

OpenCV 将满足您的要求。它具有丰富的图像处理 API，可以帮助您一次检测多张人脸、识别它们、识别手势等。它为您提供了可以“训练”OpenCV 识别人脸、物体的程序，它也是开源的。有很多这方面的信息，只需输入 OpenCV 并搜索即可。几个链接可以帮助您：)：

[OpenCV 网站](http://opencv.org/)

[一个很好的网站，里面有关于使用 OpenCV 的教程](http://note.sonots.com/SciSoftware/haartraining.html)

# vb.net - 如何自动调整文本大小以使其适合 vb.net 中的标签？

> ID：13872043
> 
> 赞同：0
> 
> 时间：2012-12-14T03:02:24.290
> 
> 标签：vb.net, text, resize, label

我有一个标签，目前可能包含长度在 6 到 x 个字符之间的单词？但是，当单词变得太大时，我希望文本改变大小以适应相同的空间量。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:34:49.517

```
 Private Sub Form1_SizeChanged(sender As Object, e As System.EventArgs) Handles Me.SizeChanged
        Label1.Size = New Size(ClientSize.Width / 3, ClientSize.Height / 3)
        Label1.Font = New Font("Arial", ClientSize.Height / 20)
    End Sub 
```

# php - 如何在我的 html 页面中显示由 gd 使用 php 生成的 png 图像（饼图）？

> ID：13872045
> 
> 赞同：0
> 
> 时间：2012-12-14T03:02:49.257
> 
> 标签：php, image, rendering

所以我遇到的问题是我无法将在页面 Results.html 上计算的信息传递给脚本，我必须生成一个饼图，然后获取图像并将其显示在我的结果页面中。我对 PHP 非常陌生（大约 2 周）并且只有最基本的了解，所以我需要非常明确的说明。无论哪种方式，这是我正在使用的代码：

```
<?php
    $filename = "Results.txt";
    $lines = file($filename);

    $q1 = $_POST['q1']; // stores checked button value
    $q2 = $_POST['q2'];
    $q3 = $_POST['q3'];
    $q4 = $_POST['q4'];
    $q5 = $_POST['q5'];
    $q6 = $_POST['q6'];
    $q7 = $_POST['q7'];
    $q8 = $_POST['q8'];

    $qN = 1;  //question number

    $newLines = '';

    $total = array();

        foreach($lines as $line) {

            $line = trim($line);  //remove excess newlines etc.
            $lineArr = explode(',',$line);  //split line into array by commas
            $index = ${'q'.$qN}-1; //zero based
        if (isset($lineArr[$index])){
            $lineArr[$index]++;  //add to position by one vote.
            $total = array_sum($lineArr); //number of clicks 

            $newLines .= implode(',',$lineArr) . "\r\n"; //newLines contains numbers then also
        $qN++;
        }
    }
//write contents back to file.
file_put_contents($filename, $newLines);

//frequencies for each line without strings
$l[1] = explode(',',$lines[0]);
$l[2] = explode(',',$lines[1]);
$l[3] = explode(',',$lines[2]);
$l[4] = explode(',',$lines[3]);
$l[5] = explode(',',$lines[4]);
$l[6] = explode(',',$lines[5]);
$l[7] = explode(',',$lines[6]);
$l[8] = explode(',',$lines[7]);

//multiply each 
$result = array();
$values = array(1,2,3,4,5);
for($i=0;$i<count($l);$i++){
    for($j=0;$j<count($values);$j++){
    $result[$i+1][$j] = $l[$i+1][$j] * $values[$j];
    }
}
//calculate percentages

$p1 = (explode(',',$lines[0]));
$p2 = (explode(',',$lines[1]));
$p3 = (explode(',',$lines[2]));
$p4 = (explode(',',$lines[3]));
$p5 = (explode(',',$lines[4]));
$p6 = (explode(',',$lines[5]));
$p7 = (explode(',',$lines[6]));
$p8 = (explode(',',$lines[7]));

// calculate averages *****For some reason most recent frequency item updated is off by one, possibly bc not up to date yet???? figure out later!!!
$f1avg = round((array_sum($result[1])/($total-1)),2);
$f2avg = round((array_sum($result[2])/($total-1)),2);
$f3avg = round((array_sum($result[3])/($total-1)),2);
$f4avg = round((array_sum($result[4])/($total-1)),2);
$f5avg = round((array_sum($result[5])/($total-1)),2);
$f6avg = round((array_sum($result[6])/($total-1)),2);
$f7avg = round((array_sum($result[7])/($total-1)),2);
$f8avg = round((array_sum($result[8])/($total-1)),2);
//pie chart 1 information
$_SESSION['$p1f0s']= round((($p1[0]/$total)*360),2);
$_SESSION['$p1f1s']= round((($p1[1]/$total)*360),2);
$_SESSION['$p1f2s']= round((($p1[2]/$total)*360),2);
$_SESSION['$p1f3s']= round((($p1[3]/$total)*360),2);
$_SESSION['$p1f4s']= round((($p1[4]/$total)*360),2);

$p1f0 = $_SESSION['$p1f0s'];
$p1f1 = $_SESSION['$p1f1s'];
$p1f2 = $_SESSION['$p1f2s'];
$p1f3 = $_SESSION['$p1f3s'];
$p1f4 = $_SESSION['$p1f4s'];

echo $p1f2;
?> 
```

所以我尝试将会话中的信息传递给这个：

```
$p1f0 = $_SESSION['$p1f0s'];
$p1f1 = $_SESSION['$p1f1s'];
$p1f2 = $_SESSION['$p1f2s'];
$p1f3 = $_SESSION['$p1f3s'];
$p1f4 = $_SESSION['$p1f4s'];

header("Content-type: image/png");

//create pie charts
$image=imagecreatetruecolor(101,51);
//_____________________colors____________________________
$my_colorA=imagecolorallocate($image,51,51,255);
$my_colorB=imagecolorallocate($image,100,150,215);
$my_colorC=imagecolorallocate($image,20,20,151);
$my_colorX=imagecolorallocate($image,216,216,255);

$red = imagecolorallocate($image, 255, 0, 0);
$orange = imagecolorallocate($image, 191, 64, 0);
$dark_yellow = imagecolorallocate($image, 128, 128, 0);
$dark_green = imagecolorallocate($image, 64, 191, 0);
$green = imagecolorallocate($image, 0, 255, 0);
//_______________________________________________________
$ptsize=24;$x=20;$y=50;$angle=-10;
imagefill($image,0,0,$my_colorX);

//__________________ , center,  w , h , st, end, clr  ,    type______
imagefilledarc($image,50,25, 100, 50,  0,  $p1f0, $red, IMG_ARC_PIE);
imagefilledarc($image,50,25, 100, 50, $p1f0,  $p1f01, $orange, IMG_ARC_PIE);
imagefilledarc($image,50,25, 100, 50, $p1f1, $p1f2, $dark_yellow , IMG_ARC_PIE);
imagefilledarc($image,50,25, 100, 50, $p1f2,  $p1f3, $dark_green, IMG_ARC_PIE);
imagefilledarc($image,50,25, 100, 50, $p1f3,  $p1f4, $green, IMG_ARC_PIE);
//___________________________________________________________________

imagepng($image);
imagedestroy($image) 
```

但是没有成功。在搜索此内容时，我一直遇到 $base64_data ，我有点理解应该做什么，但不知道这是否偏离了基础。请帮忙！并提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:05:35.857

虽然您可以像这样直接在 HTML 文件中“导出”图像：

```
// generate image here
ob_start(function($c) {return "<img src=\"data:image/png;base64,".base64_encode($c)."\" />";});
imagepng($image);
ob_end_flush(); 
```

这有点痛苦。`<img src="myimage.php" />`在那里拥有并生成它要容易得多。你甚至可以传递`GET`变量。

# bash - Bash 脚本：#!/bin/bash 是什么意思？

> ID：13872048
> 
> 赞同：144
> 
> 时间：2012-12-14T03:03:29.317
> 
> 标签：bash

在 bash 脚本中，`#!/bin/bash`第一行是什么意思？

**更新**`#!/bin/bash`：和之间有区别`#!/bin/sh`吗？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-12-14T03:04:29.923

这称为[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)，它告诉 shell 在执行时用什么程序解释脚本。

在您的示例中，脚本将由[bash](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29) shell 解释和运行。

其他一些示例 shebangs 是：

（来自维基百科）

```
#!/bin/sh — Execute the file using sh, the Bourne shell, or a compatible shell
#!/bin/csh — Execute the file using csh, the C shell, or a compatible shell
#!/usr/bin/perl -T — Execute using Perl with the option for taint checks
#!/usr/bin/php — Execute the file using the PHP command line interpreter
#!/usr/bin/python -O — Execute using Python with optimizations to code
#!/usr/bin/ruby — Execute using Ruby 
```

还有一些我能想到的其他问题，例如：

```
#!/bin/ksh
#!/bin/awk
#!/bin/expect 
```

例如，在带有 bash shebang 的脚本中，您将使用 bash 语法编写代码；而在带有期望 shebang 的脚本中，您将使用期望语法对其进行编码，依此类推。

**对更新部分的回应：**

这取决于`/bin/sh`您系统上实际指向的内容。通常它只是一个符号链接到`/bin/bash`. 有时编写可移植脚本`#!/bin/sh`只是为了表示它是一个 shell 脚本，但它使用`/bin/sh`该特定系统上引用的任何 shell（可能指向`/bin/bash`,`/bin/ksh`或`/bin/zsh`）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-09T11:29:51.053

**在 bash 脚本中，第一行的 #!/bin/bash 是什么意思？**

在 Linux 系统中，我们有解释 UNIX 命令的 shell。现在Unix系统中有许多shell。其中，有一个叫bash的shell，在Linux中很常见，历史也很悠久。这是 Linux 中的默认 shell。

当您编写脚本（unix 命令的集合等）时，您可以选择指定可以使用哪个 shell。通常，您可以使用[Shebang](http://manpages.ubuntu.com/manpages/natty/man1/dash.1.html)指定它的外壳（是的，这就是它的名称）。

因此，如果您 #!/bin/bash 在脚本的顶部，那么您就是在告诉您的系统使用 bash 作为默认 shell。

**现在来到你的第二个问题：#!/bin/bash 和 #!/bin/sh 之间有区别吗？**

答案是肯定的。当您告诉 #!/bin/bash 时，您就是在告诉您的环境/操作系统使用 bash 作为命令解释器。这是硬编码的东西。

每个系统都有自己的 shell，系统将使用它来执行自己的系统脚本。该系统 shell 可能因操作系统而异（大多数情况下它将是 bash。Ubuntu 最近使用[dash](http://manpages.ubuntu.com/manpages/natty/man1/dash.1.html)作为默认系统 shell）。当您指定 #!/bin/sh 时，系统将使用它的内部系统 shell 来解释您的 shell 脚本。

访问此[链接](http://kaziprogrammingblog.osinweb.com/article/showarticle/How%20to%20reference%20your%20shell%20inside%20your%20script%20in%20Linux)以获取更多信息，我已在其中解释了该主题。

希望这会消除你的困惑......祝你好运。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-14T03:21:09.670

当脚本中的第一个字符是`#!`时，称为[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)。如果您的文件以 `#!/path/to/something`标准开头，则运行`something`并将文件的其余部分作为输入传递给该程序。

`#!/bin/bash`话虽如此，`#!/bin/sh`、 甚至之间的区别在于`#!/bin/zsh`bash、sh 或 zsh 程序是否用于解释文件的其余部分。 `bash`并且`sh`只是不同的程序，传统上。在某些 Linux 系统上，它们是同一程序的两个副本。在其他 Linux 系统上，`sh`是.`dash``bash``sh`

当然，该行的其余部分不必以 sh 结尾。也可以是`#!/usr/bin/python`, `#!/usr/bin/perl`, 甚至`#!/usr/local/bin/my_own_scripting_language`.

# python - 打印空行？

> ID：13872049
> 
> 赞同：31
> 
> 时间：2012-12-14T03:03:33.293
> 
> 标签：python, python-3.x, newline

我正在关注 Python 的初学者教程，有一个小练习，我必须添加一个额外的函数调用并在诗句之间打印一行，如果我在函数调用之间打印一个空行但如果我添加一个空打印，这很好用行到我的末尾`happyBirthday()`我得到一个缩进错误，没有添加的打印行虽然一切正常，但是有什么建议吗？

这是代码：

```
def happyBirthday(person):
    print("Happy Birthday to you!")
    print("Happy Birthday to you!")
    print("Happy Birthday, dear " + person + ".")
    print("Happy Birthday to you!")
    print("\n") #error line

happyBirthday('Emily')
happyBirthday('Andre')
happyBirthday('Maria') 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-09-08T08:14:17.457

你可以做

```
print() 
```

得到一个空行。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-14T03:13:33.630

如果确实存在缩进错误，您将始终只收到缩进错误。仔细检查您的最后一行是否与其他行一样缩进 - 无论是空格还是制表符。最有可能的是，一些行有空格（或制表符），而另一行有制表符（或空格）。

相信错误信息——如果它说的是特定的东西，假设它是真的并找出原因。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-05-24T20:22:36.037

**Python 2.x：** 打印换行符

```
print 
```

**Python 3.x：** 您必须调用该函数

```
print() 
```

来源：[https ://docs.python.org/3.0/whatsnew/3.0.html](https://docs.python.org/3.0/whatsnew/3.0.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-28T13:38:12.517

不要做

```
print("\n") 
```

在最后一行。它会给你2个空行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-02T07:16:36.423

Python 的`print`函数[在其 input 中添加一个换行符](https://docs.python.org/library/functions.html#print)。如果你没有输入它只会打印一个换行符

```
print() 
```

将打印一个空行。如果您想在打印的某些文本之后有一个额外的行，您可以在文本中添加一个换行符

```
my_str = "hello world"
print(my_str + "\n") 
```

如果您经常这样做，您还可以通过更改参数（[默认情况下](https://docs.python.org/library/functions.html#print)）告诉`print`添加 2 个换行符而不是仅一个换行符`end=`[`end="\n"`](https://docs.python.org/library/functions.html#print)

```
print("hello world", end="\n\n") 
```

但是你可能不需要最后一种方法，之前的两种方法更清晰。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-20T13:34:56.507

在 Python 中打印空行的两种常见方法-

1.  老派的方式：

    `print "hello\n"`

2.  单独写单词 print 可以做到这一点：

    `print "hello"`

    `print`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-22T18:36:40.087

这是在 python 中打印空行的其他方法

```
# using \n after the string creates an empty line after this string is passed to the the terminal.
print("We need to put about", average_passengers_per_car, "in each car. \n") 
print("\n") #prints 2 empty lines 
print() #prints 1 empty line 
```

# android - 在 Android 中运行 ARM 汇编代码

> ID：13872050
> 
> 赞同：0
> 
> 时间：2012-12-14T03:03:36.010
> 
> 标签：android, shell, adb

我一直按照[这里](http://peterdn.com/post/e28098Hello-World!e28099-in-ARM-assembly.aspx)发布的指南，试图让这个 Hello, World 程序在我的三星 Galaxy S3 上运行。它已经扎根了，我成功地将“hello”文件推送到了 sdcard 上。现在，当我以超级用户（# 而不是 $）的身份进入 shell 并尝试运行文件时，我得到“无法执行 - 权限被拒绝”。我使用 chmod 755 hello 看看是否可以解决它，仍然没有。

有什么我想念的吗？这是我第一次摆弄安卓，刚拿到手机，想看看能不能让它工作。对这一切都很陌生。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:59:43.497

很可能您的 SD 卡已安装`noexec`选项。将文件复制到另一个分区，`/data`然后尝试从那里运行它

# gtk - gtksourceview 撤消，撤消超出预期

> ID：13872051
> 
> 赞同：1
> 
> 时间：2012-12-14T03:03:58.527
> 
> 标签：gtk, gtksourceview

我正在编写一个文本编辑器，我似乎不了解有关 gtksourceview 和撤消的内容。我希望撤消操作在每次调用时撤消单个操作，但它似乎想做的不止于此。

这是一个例子：

我输入两行：

第一行

第二行

然后我先上去删除“r”，然后按 ctrl+z 执行撤消。这是什么结果：

第一行

第二

文档说：

动作被定义为调用 gtk_text_buffer_begin_user_action() 和 gtk_text_buffer_end_user_action() 之间的操作组，或同一行上的类似编辑（插入或删除）序列。

我看不出恢复“r”和删除“line”这个词是如何“在同一行上进行类似的编辑（插入或删除）”。

点击撤消非常令人迷惑，并且必须记住点击重做，因为撤消的操作比预期的要多。其他编辑不这样做，所以我只是执行错了吗？

这是我的撤消代码： GtkSourceBuffer *sbuffer;

```
 sbuffer = GTK_SOURCE_BUFFER(gtk_text_view_get_buffer(GTK_TEXT_VIEW(txtinput[current_tab])));

            if (gtk_source_buffer_can_undo(sbuffer))
            {
                gtk_source_buffer_undo(sbuffer);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:20:09.323

使用 GtkSourceView 撤消是“免费的”，从您的描述来看，这听起来像是两个撤消操作正在发生，因此您可能没有通知 Gtk 您处理了一个事件（通过返回 true），并且它正在继续自己的撤消为好。但无论如何，你看到的行为是不正常的。您可以尝试使用例如 gedit 来显示这一点。

# ruby - 如何“发现” Google 的 Provisioning API？

> ID：13872052
> 
> 赞同：0
> 
> 时间：2012-12-14T03:03:58.427
> 
> 标签：ruby, google-api, google-apps, google-provisioning-api, google-api-ruby-client

我正在使用（alpha）Ruby[`google-api-client`](https://code.google.com/p/google-api-ruby-client/)与我们组织的 Google Apps 实例的各种服务进行交互。

我想发现[**供应服务**](https://developers.google.com/google-apps/provisioning/)API，使用服务帐户对用户进行身份验证，并更新他们的密码。

至今...

```
require 'google/api_client'

class GoogleProvisioningConnection
  def initialize(user_email=nil)
    @client = Google::APIClient.new
    @provisioning = @client.discovered_api('???', 'v2') # what's it called? user?

    key_file_name = 'mykey-privatekey.p12'
    key = Google::APIClient::PKCS12.load_key(key_file_name, 'notasecret')

    asserter = Google::APIClient::JWTAsserter.new(
      '...@developer.gserviceaccount.com',
      '???', # which url allows me access to their user?
    key)

    @client.authorization = asserter.authorize(user_email)
  end

end 
```

哪个字符串用于`@client.discovered_api`获取配置 API？
而当使用 JWT 断言器时，应该请求哪个服务 url？
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T03:24:02.093

[Provisioning API](https://developers.google.com/google-apps/provisioning/)使用旧的 gdata 协议。它不适用于基于新发现的库。

您应该使用[GData Ruby 库](http://code.google.com/p/gdata-ruby-util/)。

# c# - 是否可以对 kinect Depth 流进行预处理（在骨架引擎之前）

> ID：13872057
> 
> 赞同：3
> 
> 时间：2012-12-14T03:04:11.430
> 
> 标签：c#, wpf, kinect

我希望能够在原始深度流数据（和/或颜色）用于生成骨架数据*之前*对其进行修改，以查看是否可以在我正在使用的环境中从骨架跟踪中获得更好的结果。从我阅读/尝试的内容来看，我认为这是不可能的，但很想被证明是错误的。

除了编写我自己的骨骼跟踪算法之外，任何人都可以提出任何其他可能成功的方法吗？是否可以从 Kinect Studio 中录制的 .xed 文件中提取数据并在重播前对其进行修改？

注意：使用 Kinect for Windows，C# SDK 1.6。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:07:40.420

不幸的是，SDK 不允许在生成骨架数据之前访问数据流。你需要研究一个不同的包来做到这一点——看看 PrimeSense NiTE 2……但如果你必须坚持使用 MS SDK，你将不得不实现你自己的骨骼跟踪或跟踪校正。

# php - 创建一个 RSS2 提要，看起来不错，但不起作用？

> ID：13872061
> 
> 赞同：0
> 
> 时间：2012-12-14T03:04:18.100
> 
> 标签：php, rss

我正在尝试创建一个 RSS 提要，它将我的论坛中的线程读出到 RSS 提要中。提要的地址是[http://romhackersonline.com/forum/external2.php](http://romhackersonline.com/forum/external2.php)我验证了它并检查了源，它看起来很好。问题是它拒绝在任何 RSS 阅读器上显示任何内容或描述。

谁能看看源代码，看看我是否遗漏了什么？如果需要，我可以提供代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:08:33.380

PHP 标头

```
<?php header("Content-type: text/xml; charset=utf-8"); ?> 
```

# java - JaxB gMonth validation error

> ID：13872065
> 
> 赞同：2
> 
> 时间：2012-12-14T03:04:55.713
> 
> 标签：java, xml, datetime, formatting, jaxb

I have the XMLGregorianCalander for storing a month

```
@XmlElement(name = "Month")
@XmlSchemaType(name = "gMonth")
protected XMLGregorianCalendar month; 
```

I get the following error when unmarshalling

```
XML validation error on response: cvc-datatype-valid.1.2.1: '--11--' is not a valid value for 'gMonth'. 
```

From what i can tell the format expected would be `'--11'`, i have found related issues [https://issues.apache.org/jira/browse/XERCESJ-1342](https://issues.apache.org/jira/browse/XERCESJ-1342) but i do not know the solution to change the format of a gMonth

the gmonth in the xsd looks like:

```
<xs:element name="Month" type="xs:gMonth"/> 
```

Has this issue been resloved or a workaround exist?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:25:14.987

You could use an `XmlAdapter` to handle this use case.

**GMonthAdapter**

```
package forum13872065;

import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.datatype.*;

public class GMonthAdapter extends XmlAdapter<String, XMLGregorianCalendar> {

    DatatypeFactory dtf;

    public GMonthAdapter() {
         try {
            dtf = DatatypeFactory.newInstance();
        } catch (DatatypeConfigurationException e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public XMLGregorianCalendar unmarshal(String v) throws Exception {
        return dtf.newXMLGregorianCalendar(v);
    }

    @Override
    public String marshal(XMLGregorianCalendar v) throws Exception {
        String string = v.toXMLFormat();
        if(string.endsWith("--")) {
            return string.substring(0,4);
        }
        return string;
    }

} 
```

**Root**

The `@XmlJavaTypeAdapter` annotation is used to reference the `XmlAdapter`.

```
package forum13872065;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import javax.xml.datatype.XMLGregorianCalendar;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElement(name = "Month")
    @XmlSchemaType(name = "gMonth")
    @XmlJavaTypeAdapter(GMonthAdapter.class)
    protected XMLGregorianCalendar month;

} 
```

**Demo**

Below is some demo code to prove that everything works.

```
package forum13872065;

import javax.xml.bind.*;
import javax.xml.datatype.DatatypeFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        DatatypeFactory dtf = DatatypeFactory.newInstance();
        root.month = dtf.newXMLGregorianCalendar("--11");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**Output**

Below is the output from running the demo code.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <Month>--11</Month>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:49:07.307

The correct format for a gMonth is indeed --mm, but there was an error in the original edition of the XSD 1.0 specification that gave it as --mm--. Unfortunately this error was repeated in many books and tutorials on XSD, and in some software products, before it was corrected. So use of this data type can still be troublesome today, even though the bug was officially fixed almost ten years ago.

# c++ - C ++不需要堆栈吗？

> ID：13872066
> 
> 赞同：11
> 
> 时间：2012-12-14T03:05:03.157
> 
> 标签：c++, stack, standards

老师第一次向我介绍 C++ 时，第一个定义是关于“基于堆栈的语言”，如 Java、C 和 C++。

[现在我在回复中](https://stackoverflow.com/a/13871812/1797612)读到了这个，老实说我很困惑。

C++ 是一种基于堆栈的语言，但不需要堆栈？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T03:11:04.923

当我听到“基于堆栈的语言”时，我通常会想到像 FORTH 这样的语言，其中*一切*都在堆栈上完成，即没有变量。我猜当你的老师说 Java 时，他们的意思是基于堆栈的 JVM。

现在，C++ 标准完全没有堆栈或堆的概念，只有自动和动态存储之类的东西。C++ 是根据更抽象的概念来指定的，这使得它理论上可以在许多不同的实现和硬件上工作。当然，事实证明这些想法直接映射到堆栈的想法，因此每个实现最终都使用一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T03:48:45.027

C++（如 C、Java 和大多数其他块结构语言）需要一个“堆栈”，即某种后进先出数据结构，用于保存函数调用的激活记录。也就是说，一个函数可以递归地调用自己到任意深度，并且当它这样做时，每次调用的参数/局部变量必须独立于先前调用的参数/局部变量。当这些函数调用返回时，必须销毁每个函数的参数/局部变量。

然而，这并不需要在直接支持硬件堆栈的 CPU 上执行。完全有可能在没有直接硬件支持的情况下执行 C++（以及上面提到的其他块结构语言）。

例如，早期的 Cray 和（甚至是当前的）IBM 大型机不支持堆栈。尽管如此，他们可以并且确实支持 C++。至少在大多数情况下，用于激活记录的 LIFO 数据结构是动态分配的，并构建成一个链表。当每个函数被调用时，它的激活记录被分配并添加到链表中。当函数返回时，该激活记录将从列表中删除并释放内存。

因此，如果您从某种抽象的角度看待事物，将堆栈视为它提供的基本操作的本质，那么是的，C++ 需要堆栈。如果您不那么抽象地看待“堆栈”，并考虑诸如带有堆栈指针寄存器（或该顺序的任何东西）的CPU之类的东西，那么不，C ++绝对*不需要*堆栈（对于C，Java也是如此， ETC。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T03:10:31.293

非“基于堆栈的语言”不仅仅是一种不需要堆栈的语言。

Java 的字节码语言是一种基于堆栈的语言，因为它的操作不是对寄存器进行操作，而是对堆栈进行操作。另一方面，英特尔微处理器的 ASM 语言使用寄存器，这可能反映在为编译到该架构而设计的语言中。

C 和 C++ 可能是也可能不是基于堆栈的。这完全取决于编译器和目标操作系统/微处理器。你不能假设它是或不是。然而，在实践中，它主要是作为基于寄存器的。

即使该语言完全使用寄存器操作，您仍然有一个堆栈用于函数调用和不适合寄存器的局部变量。该堆栈的存在不会使语言基于堆栈，而是缺少寄存器。

编辑：用户 mikera 建议的 Nitpick：Java 的字节码语言是基于堆栈的，但为了在大多数基于寄存器的体系结构中运行它，您需要在基于寄存器的体系结构中翻译基于堆栈的字节码语言. 这项工作可以由 JVM 中的解释器完成，也可以由 JIT 或非 JIT 字节码到本地编译器完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T05:17:03.820

它是语义。

想想一辆车。一辆车是用收音机、速度、电动座椅、CD 播放器、杯架数量、油漆颜色等来描述的。功能列表并没有讨论运行所有这些东西的动力来自哪里。几乎所有汽车都使用汽油进入内燃机，发动机转动车轮并运行发电机以产生电力来运行所有配件。不需要发动机，但大多数汽车都有。

语言规范谈到了数据的生命周期。它没有说明生命周期是如何实现的。事实证明，99% 的 C++ 编译器使用全局数据、堆栈和堆来满足语言规范所需的数据生命周期要求。

# android - 当我尝试从 Intent 中获取 Object Extra 时出现 RuntimeException

> ID：13872074
> 
> 赞同：2
> 
> 时间：2012-12-14T03:06:00.707
> 
> 标签：android, android-intent, parcelable

我需要将自定义 Parcelable 对象作为 Extra 传递给另一个活动

我在这段代码中添加了额外的内容

```
Car myCarObject=getCar();
ArrayList<Car> parcelableExtra = new ArrayList<Car>();
                parcelableExtra.add(myCarObject);

Intent details = new Intent(Start.this, DetailsCar.class);
                details.putExtra("Car", parcelableExtra);
                startActivity(details); 
```

我尝试在目标 Intent 中使用此代码加载额外内容

```
ArrayList<Car> parcelableExtra = new ArrayList<Car>();
        parcelableExtra = (ArrayList<Car>) getIntent().getExtras().getParcelable("Car");
        Car c=parcelableExtra.get(0); 
```

但该应用程序因此错误堆栈而崩溃：

```
12-14 03:34:24.059: E/AndroidRuntime(16872): FATAL EXCEPTION: main
12-14 03:34:24.059: E/AndroidRuntime(16872): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.app.com/my.app.com.DetailsCar}: java.lang.RuntimeException: Parcel android.os.Parcel@4051ac20: Unmarshalling unknown type code 5505097 at offset 3144
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Looper.loop(Looper.java:130)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at java.lang.reflect.Method.invokeNative(Native Method)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at java.lang.reflect.Method.invoke(Method.java:507)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at dalvik.system.NativeStart.main(Native Method)
12-14 03:34:24.059: E/AndroidRuntime(16872): Caused by: java.lang.RuntimeException: Parcel android.os.Parcel@4051ac20: Unmarshalling unknown type code 5505097 at offset 3144
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readValue(Parcel.java:1913)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readListInternal(Parcel.java:2092)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readArrayList(Parcel.java:1536)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at my.app.com.obj.Car.<init>(Car.java:361)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at my.app.com.obj.Car.<init>(Car.java:347)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at my.app.com.obj.Car$1.createFromParcel(Car.java:339)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at my.app.com.obj.Car$1.createFromParcel(Car.java:1)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readParcelable(Parcel.java:1981)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readValue(Parcel.java:1846)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readListInternal(Parcel.java:2092)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readArrayList(Parcel.java:1536)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readValue(Parcel.java:1867)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Parcel.readMapInternal(Parcel.java:2083)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Bundle.unparcel(Bundle.java:208)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.os.Bundle.getParcelable(Bundle.java:1100)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at my.app.com.DetailsCar.onCreate(DetailsCar.java:43)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-14 03:34:24.059: E/AndroidRuntime(16872):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
12-14 03:34:24.059: E/AndroidRuntime(16872):    ... 11 more 
```

我的 Parcelable Car 对象是这个

```
public class Car implements Serializable, Parcelable {
    String description;
    String speed;
    String brake;
    String pro;

    public Car(String description, String speed, String brake,
            String pro) {
        super();
        this.description = description;
        this.speed = speed;
        this.brake = brake;
        this.pro = pro;
    }

    public Car() {

    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel arg0, int arg1) {
        arg0.writeString(description);
        arg0.writeString(speed);
        arg0.writeString(brake);
        arg0.writeString(pro);
    }

    public static final Parcelable.Creator<Car> CREATOR = new Parcelable.Creator<Car>() {
        public Car createFromParcel(Parcel in) {
            return new Car(in);
        }

        public Car[] newArray(int size) {
            return new Car[size];
        }
    };

    private Car(Parcel in) {
        description = in.readString();
        speed = in.readString();
        brake = in.readString();
        pro = in.readString();
        in.readArrayList(String.class.getClassLoader());
    }

} 
```

我该如何解决这个问题？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:14:19.200

让我们看看两个关键功能：

```
@Override
public void writeToParcel(Parcel arg0, int arg1) {
    arg0.writeString(description);
    arg0.writeString(speed);
    arg0.writeString(brake);
    arg0.writeString(pro);
}

private Car(Parcel in) {
    description = in.readString();
    speed = in.readString();
    brake = in.readString();
    pro = in.readString();
    in.readArrayList(String.class.getClassLoader());
} 
```

请注意，第一个将 4 个变量写入`Parcel`，然后读取 5 个。系统崩溃是因为 Parcel 中没有 ArrayList。放一个arrayList，你应该没问题。或者，您可以删除 read 功能，因为它甚至没有被使用（但我会考虑到您的功能中可能包含的功能可能比您包含的更多）

# .net - 在屏幕上搜索矩形并与图像进行比较？图像搜索

> ID：13872079
> 
> 赞同：0
> 
> 时间：2012-12-14T03:07:25.463
> 
> 标签：.net, vb.net, visual-studio-2010, gdi+, gdi

我想知道如何在屏幕上搜索设置的矩形并将其与我指定的图像进行比较以查看它是否匹配？

假设它可以搜索 x1 y1 到 x2 y2 并与图像进行比较？并返回布尔值？

我知道 Auto-it 在这里看到了类似的功能：[http ://www.autohotkey.com/docs/commands/ImageSearch.htm](http://www.autohotkey.com/docs/commands/ImageSearch.htm)

有没有人这样做他们可以参考？我正在使用 vb.net。

编辑： Abdias，我已将您的代码放入一个类中，我这样称呼它：

```
 Dim bm As Bitmap = Bitmap.FromFile(Label1.Text)
    Dim bm2 As Bitmap = Bitmap.FromFile(Label2.Text)
    Dim pnt As Point = ImageFinder.Contains(bm, bm2)
    If pnt <> Nothing Then
        MessageBox.Show("Possible match found at " & pnt.X.ToString() & " " & pnt.Y.ToString())
    Else
        MessageBox.Show("No match.")
    End If 
```

似乎我尝试的每组图像都没有任何意义。即使它们 100% 包含彼此。我拍摄了一张图像并将其裁剪了几个像素，但仍然没有返回匹配项。我已经确定来源更大。我尝试将几个图像保存为 24 位 jpg 格式，但仍然没有。

这是两个示例图像。![在此处输入图像描述](../Images/aa203f8e7ee2ba7ca6d96e8d9aedca89.png)![在此处输入图像描述](../Images/0498e9adac9c076402689b751a6e8c8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:03:41.393

我制作了这个功能，可以查看图像是否存在于更大的图像中。它是作为扩展编写的，但可以轻松修改为正常功能以及支持区域。

要使用它：

*   将主图像加载到标准`Bitmap`中`bmp`
*   加载要查找的图像`bmpSearch`

然后调用：

```
Dim pt as Point = bmp.Contains(bmpSearch)
If pt <> Nothing Then
    '... image found at pt
End If 
```

扩展的代码（有优化空间，但写成本网站上另一个问题的 20 分钟练习）：

```
'
'-- Extension for Bitmap
'
<Extension()>
Public Function Contains(src As Bitmap, ByRef bmp As Bitmap) As Point
    '
    '-- Some logic pre-checks
    '
    If src Is Nothing OrElse bmp Is Nothing Then Return Nothing

    If src.Width = bmp.Width AndAlso src.Height = bmp.Height Then
        If src.GetPixel(0, 0) = bmp.GetPixel(0, 0) Then
            Return New Point(0, 0)
        Else
            Return Nothing
        End If
    ElseIf src.Width < bmp.Width OrElse src.Height < bmp.Height Then
        Return Nothing
    End If
    '
    '-- Prepare optimizations
    '
    Dim sr As New Rectangle(0, 0, src.Width, src.Height)
    Dim br As New Rectangle(0, 0, bmp.Width, bmp.Height)

    Dim srcLock As BitmapData = src.LockBits(sr, Imaging.ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb)
    Dim bmpLock As BitmapData = bmp.LockBits(br, Imaging.ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb)

    Dim sStride As Integer = srcLock.Stride
    Dim bStride As Integer = bmpLock.Stride

    Dim srcSz As Integer = sStride * src.Height
    Dim bmpSz As Integer = bStride * bmp.Height

    Dim srcBuff(srcSz) As Byte
    Dim bmpBuff(bmpSz) As Byte

    Marshal.Copy(srcLock.Scan0, srcBuff, 0, srcSz)
    Marshal.Copy(bmpLock.Scan0, bmpBuff, 0, bmpSz)

    ' we don't need to lock the image anymore as we have a local copy
    bmp.UnlockBits(bmpLock)
    src.UnlockBits(srcLock)

    Dim x, y, x2, y2, sx, sy, bx, by, sw, sh, bw, bh As Integer
    Dim r, g, b As Byte

    Dim p As Point = Nothing

    bw = bmp.Width
    bh = bmp.Height

    sw = src.Width - bw      ' limit scan to only what we need. the extra corner
    sh = src.Height - bh     ' point we need is taken care of in the loop itself.

    bx = 0 : by = 0
    '
    '-- Scan source for bitmap
    '
    For y = 0 To sh
        sy = y * sStride
        For x = 0 To sw

            sx = sy + x * 3
            '
            '-- Find start point/pixel
            '
            r = srcBuff(sx + 2)
            g = srcBuff(sx + 1)
            b = srcBuff(sx)

            If r = bmpBuff(2) AndAlso g = bmpBuff(1) AndAlso b = bmpBuff(0) Then
                p = New Point(x, y)
                '
                '-- We have a pixel match, check the region
                '
                For y2 = 0 To bh - 1
                    by = y2 * bStride
                    For x2 = 0 To bw - 1
                        bx = by + x2 * 3

                        sy = (y + y2) * sStride
                        sx = sy + (x + x2) * 3

                        r = srcBuff(sx + 2)
                        g = srcBuff(sx + 1)
                        b = srcBuff(sx)

                        If Not (r = bmpBuff(bx + 2) AndAlso
                                g = bmpBuff(bx + 1) AndAlso
                                b = bmpBuff(bx)) Then
                            '
                            '-- Not matching, continue checking
                            '
                            p = Nothing
                            sy = y * sStride
                            Exit For
                        End If

                    Next
                    If p = Nothing Then Exit For
                Next
            End If 'end of region check

            If p <> Nothing Then Exit For
        Next
        If p <> Nothing Then Exit For
    Next

    bmpBuff = Nothing
    srcBuff = Nothing

    Return p

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:40:21.310

我已经玩了一点，并认为使用类似 KMP 算法的东西（我猜这是一个容易实现的算法 -> wikipedia 有一个很好的伪代码）也可能会有所帮助：

```
Imports System.Drawing.Imaging
Imports System.Runtime.InteropServices

Public Class ImageFinder

Public Shared Function Contains(Parent As Bitmap, Child As Bitmap) As Point

    If Parent Is Nothing OrElse Child Is Nothing Then Throw New ArgumentException("Narf!")
    If Parent.PixelFormat <> Imaging.PixelFormat.Format32bppArgb OrElse Child.PixelFormat <> Imaging.PixelFormat.Format32bppArgb Then Throw New ArgumentException("Narf again!")

    If Parent.Width = Child.Width AndAlso Parent.Height = Child.Height AndAlso Parent.GetPixel(0, 0) <> Child.GetPixel(0, 0) Then Return Nothing
    If Child.Width > Parent.Width OrElse Child.Height > Parent.Height Then Return Nothing

    Dim bmdParent, bmdChild As BitmapData
    Try
        ' Get bitmap data into array of int
        bmdParent = Parent.LockBits(New Rectangle(0, 0, Parent.Width, Parent.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb)
        bmdChild = Child.LockBits(New Rectangle(0, 0, Child.Width, Child.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb)

        Dim ParentValuesPerLine As Integer = bmdParent.Stride \ 4
        Dim ChildValuesPerLine As Integer = bmdChild.Stride \ 4

        Dim ParentData((bmdParent.Stride \ 4) * bmdParent.Height - 1) As Integer
        Dim ChildData((bmdChild.Stride \ 4) * bmdChild.Height - 1) As Integer

        Marshal.Copy(bmdParent.Scan0, ParentData, 0, ParentData.Length)
        Marshal.Copy(bmdChild.Scan0, ChildData, 0, ChildData.Length)

        If bmdParent IsNot Nothing Then Parent.UnlockBits(bmdParent)
        bmdParent = Nothing
        If bmdChild IsNot Nothing Then Child.UnlockBits(bmdChild)
        bmdChild = Nothing

        ' Create KMP-Table:
        Dim T(Child.Height - 1)() As Integer
        For i = 0 To Child.Height - 1
            T(i) = KMP_Table(ChildData, i * ChildValuesPerLine, ChildValuesPerLine)
        Next

        Dim line_c As Integer = 0
        Dim line_p As Integer = 0
        Dim found As Boolean

        While line_p <= Parent.Height - Child.Height
            line_c = 0
            Dim childoffset As Integer = line_c * ChildValuesPerLine
            Dim parentoffset As Integer = line_p * ParentValuesPerLine

            Dim m As Integer = -1
            While True
                m = KMP_Search(ParentData, parentoffset, ParentValuesPerLine, m + 1, ChildData, 0, ChildValuesPerLine, T(0))
                If m > -1 Then
                    ' first line found
                    Debug.Print("Possible match at {0},{1}", m, line_p)
                    found = True
                    Dim p = parentoffset + ParentValuesPerLine
                    Dim c = childoffset + ChildValuesPerLine
                    For i = 1 To Child.Height - 1
                        If KMP_Search(ParentData, p, ParentValuesPerLine, m, ChildData, childoffset, ChildValuesPerLine, T(i)) <> m Then
                            ' this line doesnt match
                            found = False
                            Exit For
                        End If
                        p += ParentValuesPerLine
                        c += ChildValuesPerLine
                    Next
                    If found Then
                        Debug.Print("Found match at {0},{1}", m, line_p)
                        Return New Point(m, line_p)
                    End If
                Else
                    Exit While
                End If
            End While

            line_p += 1
        End While

        'Catch ex As Exception
        'Throw
    Finally
        If bmdParent IsNot Nothing Then Parent.UnlockBits(bmdParent)
        If bmdChild IsNot Nothing Then Child.UnlockBits(bmdChild)
    End Try

End Function

Private Shared Function KMP_Search(ByVal S As Integer(), s0 As Integer, slen As Integer, m As Integer,
                                   ByVal W As Integer(), w0 As Integer, wlen As Integer,
                                   tbl() As Integer) As Integer

    Dim i As Integer = 0

    While m + i < slen
        If W(w0 + i) = S(s0 + m + i) Then
            If i = wlen - 1 Then Return m
            i += 1
        Else
            m = m + i - tbl(i)
            If tbl(i) > -1 Then
                i = tbl(i)
            Else
                i = 0
            End If
        End If

    End While

    Return -1

End Function

Private Shared Function KMP_Table(ByRef arr() As Integer, start As Integer, count As Integer) As Integer()

    Dim table(count - 1) As Integer
    table(0) = -1
    table(1) = 0

    Dim pos As Integer = 2
    Dim cnd As Integer = 0

    While pos < count - 1
        If arr(start + pos - 1) = arr(start + cnd) Then
            cnd += 1
            table(pos) = cnd
            pos += 1
        ElseIf cnd > 0 Then
            cnd = table(cnd)
        Else
            table(pos) = 0
            pos += 1
        End If
    End While

    Return table

End Function

End Class 
```

我使用以下“基准”函数与**Abdias Software**的代码进行比较：

```
Private Sub Button1_Click_1(sender As Object, e As EventArgs) Handles Button1.Click

    Dim ofd As New OpenFileDialog
    If ofd.ShowDialog = Windows.Forms.DialogResult.OK Then
        Dim bm As Bitmap = Bitmap.FromStream(New MemoryStream(File.ReadAllBytes(ofd.FileName)))
        Dim bm2 As New Bitmap(bm.Width, bm.Height, PixelFormat.Format32bppArgb)
        Dim gr = Graphics.FromImage(bm2)
        gr.DrawImageUnscaled(bm, New Point(0, 0))
        Dim bm3 As New Bitmap(100, 100, PixelFormat.Format32bppArgb)
        gr = Graphics.FromImage(bm3)
        gr.DrawImage(bm2, New Rectangle(0, 0, 100, 100), New Rectangle(bm2.Width - 110, bm2.Height - 110, 100, 100), GraphicsUnit.Pixel)
        PictureBox1.Image = bm3
        Dim res As New List(Of Integer)
        For i = 1 To 10
            Dim stp = Stopwatch.StartNew
            Dim k = ImageFinder.Contains(bm2, bm3)
            stp.Stop()
            res.Add(stp.ElapsedMilliseconds)
        Next
        ListBox1.Items.Add(String.Format("KMP: Image = {3}x{4}, Min = {0}, Max = {1}, Avg = {2}", res.Min, res.Max, res.Average, bm2.Width, bm2.Height))
        res.Clear()
        For i = 1 To 10
            Dim stp = Stopwatch.StartNew
            Dim k = bm2.ContainsSO(bm3)
            stp.Stop()
            res.Add(stp.ElapsedMilliseconds)
        Next
        ListBox1.Items.Add(String.Format("SO: Image = {3}x{4}, Min = {0}, Max = {1}, Avg = {2}", res.Min, res.Max, res.Average, bm2.Width, bm2.Height))
    End If

End Sub 
```

我用大 (8MP) 和小 (1MP) 照片（没有图纸、图标等）进行了测试，发现 kmp 版本比其他方法快大约 2 倍。在 i7-2600 上测试的 8MP 图像的绝对数字为 40 毫秒与 75 毫秒。结果可能取决于图像的类型，因为 KMP（和其他）赢了，当他们可以跳过更大的区域时。

# c# - 为什么只有在调试线程访问 UI 控件时才会出现异常？

> ID：13872086
> 
> 赞同：6
> 
> 时间：2012-12-14T03:08:04.123
> 
> 标签：c#, multithreading, threadpool

我只是对线程和 UI 控件感到好奇。

根据我的测试代码，当我运行编译的 .exe 文件时，线程访问进程栏没有任何问题。但是当我调试代码时，会出现 InvalidOperationException。（无论是池化线程还是普通线程。）

所以我知道线程不允许访问UI控件，但是为什么我运行.exe文件就可以了。是预定的设计吗？

PS.我知道我们可以使用 backgroundworker 让事情变得优雅。

```
private void button1_Click(object sender, EventArgs e)
{
    Task.Factory.StartNew(dothing);//use the pooled thread
    //Thread t = new Thread(new ThreadStart(this.ThreadProcSafe));
    //t.Start();
}

private void dothing()
{
    for (int i = 1; i <= 100; i++)
    {
        progressBar2.Value = i;
        Thread.Sleep(100);
    }
} 
```

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-12-14T03:15:00.913

在我的记忆中，您不能在其他线程中访问 UI 元素，而只能在主线程中访问。这是因为一些多线程问题（同一内存中的多访问，异步问题......等）。如果你想做你想做的事。您可以在 C# 中使用“委托函数”。

# php - 数组删除第一个元素并在末尾添加一个新元素

> ID：13872089
> 
> 赞同：1
> 
> 时间：2012-12-14T03:08:24.450
> 
> 标签：php

如果我有以下数组：

```
Array(
    [0] => 30
    [1] => 60
    [2] => 2
    [3] => 55
    [4] => 1
    [5] => 20
    [6] => 1
    [7] => 8
    [8] => 38
    [9] => 58
    [10] => 12
) 
```

我将如何删除第一个元素，然后在末尾添加一个新元素。所以新数组看起来像这样：

```
Array(
    [0] => 60
    [1] => 2
    [2] => 55
    [3] => 1
    [4] => 20
    [5] => 1
    [6] => 8
    [7] => 38
    [8] => 58
    [9] => 12
    [9] => 10
) 
```

我可以使用 array_push 添加到末尾，但是我将如何删除第一个元素并重新定位键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:09:47.160

[`array_shift`](http://php.net/manual/en/function.array-shift.php)将删除第一个元素，并将所有键“向上”移动一个。

```
$array = ('0' => '30', '1' => '20', '2' => '5');
$array = array_shift($array, '19');
$var_dump ($array); // gives 0 => 20, 1 => 5, 2 => 19 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:16:35.280

您应该使用 array_shift 通过将当前数组分配给一个变量来删除/重新索引您的数组并执行：

`array_shift($Array);`

然后向数组添加一个新值

`$Array[] = "Toadd";`

然后，您将能够将另一个数字/字符串添加到您的数组中。

# android - 从android中的mainarraylist中删除子数组列表

> ID：13872091
> 
> 赞同：0
> 
> 时间：2012-12-14T03:08:39.927
> 
> 标签：android

我使用的是安卓 2.3.3。我有一个`mainArrayList<String>`, 和 a`subArrayList<String>`其中的内容是`mainArrayList<String>`. 我希望将其`subArrayList<String>`从`mainArrayList<String>`.

我该怎么做？

我尝试使用`alMainArrayList.remove(alSubArrayList)`. 但它不起作用。有人能帮我吗？

前任：

```
alMainArrayList<String> = [1,+,(,2,*,(,3,+,4,),),)]
alSubArrayList<String> = [(,3,+,4,)] 
```

有关更多信息，我正在开发一个计算器应用程序，其中我在`ArrayList<String> alMainArrayList`. 在执行子表达式的评估后，我希望将其从 alMainArrayList 中删除，然后将结果插入到指定索引处。代码符合。

`alMainArrayList.remove(alSubArrayList)`问题是，当我使用or时，我在 alSubArrayList 中的子表达式没有被删除`alMainArrayList.removeAll(alSubArrayList)`。

这是一个循环，因此结果被添加到指定的索引处（没有先删除 subArrayList），循环进入无限循环。

要提供代码片段，有点困难。它们到处都是碎片。所以，如果有人明白我想说的话，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:15:26.397

您提供的代码告诉 Java 从`alMainArrayList`. 如果`alMainArrayList`真的声明为`List<String>`or ，这甚至不应该编译`ArrayList<String`。显然它不会改变，`List`因为它不包含对`List`s 的引用。

话虽如此，您应该查看[removeAll()](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#removeAll%28java.util.Collection%29.)。我相信这会做你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T06:38:10.490

我为 ArrayList 找到了一个方法 subList()。

当您将其放在方法上时，这是根据帮助的信息。

subList() :::: 用于 ArrayList

将此列表的一部分连续元素作为视图返回。如果 start 等于 end，则返回的视图的长度为零。返回的子列表中发生的任何更改都将反映到原始列表中，反之亦然。该子列表也将支持原始列表支持的所有可选操作。

该方法可以作为一种方便的方法对原始列表的子范围进行一些操作，例如 list.subList(from, to).clear();

如果原始列表以其他方式而不是通过返回的 subList 进行修改，则返回的 subList 的行为将变为未定义。

返回的 subList 是 AbstractList 的子类。子类存储原始列表的偏移量、自身的大小和 modCount。如果原始列表实现了 RandomAccess 接口，则返回的子列表也实现了 RandomAccess 接口。

subList 的 set(int, Object), get(int), add(int, Object), remove(int), addAll(int, Collection) 和 removeRange(int, int) 方法首先检查边界，调整偏移量然后调用原始 AbstractList 的相应方法。返回的 subList 的 addAll(Collection c) 方法调用原来的 addAll(offset + size, c)。

subList 的 listIterator(int) 方法包装了原始列表迭代器。subList 的 iterator() 方法调用了原来的 listIterator() 方法，而 size() 方法仅仅返回了 subList 的大小。

如果原始列表的 modCount 不等于预期值，所有方法都会抛出 ConcurrentModificationException。

参数 start 子列表的起始索引（包括）。子列表的结束索引，（不包括）。

返回此列表的子列表视图，从 start（包括）开始，以 end（不包括）结束。如果 (start < 0 || end > size()) 抛出 IndexOutOfBoundsException

# php - 为什么方法声明不兼容？

> ID：13872092
> 
> 赞同：5
> 
> 时间：2012-12-14T03:08:39.300
> 
> 标签：php, oop, inheritance

为什么我会收到此错误：

```
Fatal error: Declaration of ConcreteFooMapper::load() must be compatible with that of AbstractFooMapper::load() on line 18 
```

从此代码：

```
<?php
interface Foo {
    public function foo();
}

class ConcreteFoo implements Foo {
    public function foo() {

    }
}

abstract class AbstractFooMapper {
    abstract public function load(Foo $entity, array $data);
}

class ConcreteFooMapper extends AbstractFooMapper {
    public function load(ConcreteFoo $entity, array $data) {

    }
}
?> 
```

我最初的想法是这是一个错误。PHP在评估方法声明时没有检测到*ConcreteFoo*实现了*Foo 。*我认为这是因为当您运行此代码时：

```
<?php
interface Foo {
    public function foo();
}

class ConcreteFoo implements Foo {
    public function foo() {

    }
}

$foo = new ConcreteFoo();

if ($foo instanceof Foo) 
{
    print 'w00t!';
} 
else 
{
    print 'FAIL!';
}
?> 
```

它打印*w00t！*表示*ConcreteFoo*是*Foo*的一个实例。

关于这种行为是否正确的任何见解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T03:15:58.187

根据[文档](http://php.net/manual/en/language.oop5.abstract.php)，类型提示必须完全匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T03:50:08.130

实现接口的类必须使用与接口中定义的完全相同的方法签名。不这样做会导致致命错误。以及扩展抽象类的类的相同规则。

请[在此处查看详细信息](http://php.net/manual/en/language.oop5.interfaces.php)，[也请参见此处](http://php.net/manual/en/language.oop5.abstract.php)

这是正确的行为\逻辑。

[在这里检查](http://en.wikipedia.org/wiki/Abstract_class)抽象类型很有用，因为它们可用于定义和执行协议；实现协议的所有对象都必须支持的一组操作。

如果我们假设您的代码将毫无例外地工作，那么我们有以下问题：`ConcreteFooMapper`不能使用一些实例`class ConcreteFoo2 implements Foo`作为`load`方法的参数，但应该（通过抽象类定义）

此外，如果您使用相同的签名，这真的不是问题，因为所有类\类型信息都可用。请检查以下代码

```
<?php
interface Foo {
        public function foo();
}

class ConcreteFoo implements Foo {
        public function foo() {
        }
}

abstract class AbstractFooMapper {
        abstract public function load(Foo $entity, array $data);
}

class ConcreteFooMapper extends AbstractFooMapper {
        public function load(Foo $entity, array $data) {
                var_dump($entity instanceof Foo);
                var_dump($entity instanceof ConcreteFoo);
        }

}

$someConcreteFoo = new ConcreteFoo();
$someFooMapper = new ConcreteFooMapper();

$someFooMapper->load($someConcreteFoo, array('somekey' => 'somevalue'));
// output
// bool(true) bool(true)  

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-11T07:09:19.913

有趣的是，您可以使用构造函数来加强谓词：

```
// ABuilder.php

abstract class ABuilder
{
    public function __construct(BaseApi $api = null)
    {
        $this->api = $api;
    }

    public static function fromArray(array $data, BaseApi $api = null)
    {
        $entity = new static($api);

        // ...

        return $entity;
    }
}

// ContactBuilder.php
class Contact extends ABuilder
{
    // here, you cannot change signature of ::fromArray to require ContactApi
    // (which extends/implements BaseApi), like in this example:
    public static function fromArray(array $data, ContactApi $api = null) {}

    // but you can specify ContactApi in the constructor arguments:
    public function __construct(ContactApi $api = null) {}
} 
```

因此，当您尝试`ContactBuilder`使用错误的 Api 实现（甚至通过`::fromArray()`结构）初始化您的类时，您将收到正确的 Type 错误消息，例如：

> 传递给 Builder/Contact::__construct() 的参数 1 必须是 ContactApi 的实例或 null，给定 LeadApi 的实例

# css - 页眉内容页脚的css div定位

> ID：13872095
> 
> 赞同：-2
> 
> 时间：2012-12-14T03:09:08.240
> 
> 标签：css, html, positioning

我应该如何设置我的内容 div 和页脚 div 的样式，以便：如果我的内容很长，那么内容 div 会花费更长的时间。页脚 div 将粘在 div 内容的底部。

```
<body>
<div id=master>
<div id=header>
<div id=content>
<div id=footer></div>
</div>
</div>
</div>
</body> 
```

下面显示了我的 css，但它并没有像我想要的那样工作。

```
body {
background-color: #03C;
margin: 0px;
padding: 0px;
height: 100%;
}

#master {
width: 920px;
margin-top: 0px;
margin-right: auto;
margin-bottom: 0px;
margin-left: auto;
position: relative;
left: 0px;
top: 0px;
height: auto;
}

#header {
position:absolute;
width:920px;
height:100px;
z-index:1;
top: 25px;
left: 0px;
background-color: #000099;
font-size: 16px;
text-transform: uppercase;
font-style: normal;
line-height: normal;
font-weight: bolder;
font-variant: normal;
color: #FFF;
text-align: center;
margin: auto;
}

#content {
position:absolute;
width:920px;
height:900px;
z-index:2;
left: 0px;
top: 100px;
background-color: #FFFFFF;
font-family: Verdana, Geneva, sans-serif;
font-size: 12px;
line-height: 20px;
/* [disabled]padding-left: 130px; */
padding-top: 20px;
text-align: center;
}

#footer {
position:absolute;
width:920px;
height:30px;
z-index:3;
background-color: #000099;
bottom: 0px;
color: #FFF;
left: 0px;
top: 1000px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:16:59.397

您甚至不需要 CSS 来实现您的要求，您已经描述了块元素的正常流程。

这将做你想要的：

```
<div id="header"></div>
<div id="content">
    Content here.
</div>
<div id="footer"></div> 
```

您需要查看的主要内容是我没有在其中嵌套`footer`并且`content`我没有定位任何元素`absolute`，这导致了您的问题。

您的 CSS 可以大大简化为：

```
div#header,
div#content,
div#footer
{
    width: 920px;
    margin: 0 auto;
}

div#header
{
    height: 100px;
    background: #009;
}

div#content
{
    background: #FFF;
}

div#footer
{
    height: 30px;
    background: #009;
} 
```

# c - rdmacm.so：无法打开共享对象文件。但是，文件存在于库路径中

> ID：13872096
> 
> 赞同：1
> 
> 时间：2012-12-14T03:09:15.047
> 
> 标签：c, linux, rdma

我有一个使用 infiniband rdmacm 库 rdmacm.so 的程序

在一台计算机（Ubuntu 服务器）上，我可以毫无问题地运行它。在我的开发 PC（Ubuntu 桌面版）上，我得到：

> ./test-client rdmacm.so：无法打开共享对象文件：没有这样的文件或目录

这就是我难过的地方。

ldd rdma 客户端

```
linux-vdso.so.1 =>  (0x00007fffdb62b000)
libibverbs.so.1 => /usr/lib/libibverbs.so.1 (0x00007f97ca007000)
librdmacm.so.1 => /usr/lib/librdmacm.so.1 (0x00007f97c9dfe000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f97c9a3e000)
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f97c9821000)
libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f97c961d000)
/lib64/ld-linux-x86-64.so.2 (0x00007f97ca237000) 
```

猫 /etc/ld.so.conf

```
include /etc/ld.so.conf.d/*.conf 
```

猫 /etc/ld.so.conf.d/*.conf

```
# Multiarch support
/lib/i386-linux-gnu
/usr/lib/i386-linux-gnu
/lib/i686-linux-gnu
/usr/lib/i686-linux-gnu
# libc default configuration
/usr/local/lib
# Multiarch support
/lib/x86_64-linux-gnu
/usr/lib/x86_64-linux-gnu
/usr/lib/fglrx
/usr/lib32/fglrx
# Legacy biarch compatibility support
/lib32
/usr/lib32 
```

ls -l /usr/lib/librdmacm*

```
-rw-r--r-- 1 root root 41146 Jul 19  2011 /usr/lib/librdmacm.a
lrwxrwxrwx 1 root root    18 Jul 19  2011 /usr/lib/librdmacm.so -> librdmacm.so.1.0.0
lrwxrwxrwx 1 root root    18 Jul 19  2011 /usr/lib/librdmacm.so.1 -> librdmacm.so.1.0.0
-rw-r--r-- 1 root root 35248 Jul 19  2011 /usr/lib/librdmacm.so.1.0.0 
```

一切看起来都是正确的。为什么我不能运行测试客户端。

* * *

**编辑**

我使用的代码来自 geekinthecorner 博客。Infiniband 测试应用程序。

在客户端它有几个 dlopen 调用：

IE

```
void *handle = dlopen("rdmacm.so", RTLD_LAZY);
...  
handle = dlopen("ibverbs.so", RTLD_LAZY); 
```

这适用于 ubuntu 服务器。但是在我的开发台式机上它找不到库。

如果我将库重命名为这样

```
void *handle = dlopen("librdmacm.so", RTLD_LAZY);
...  
handle = dlopen("libibverbs.so", RTLD_LAZY); 
```

他们被发现了。dlopen 不会自动添加“lib”吗？我假设是的，我的服务器上必须是这种情况，因为没有这个就找到了库。

无论如何，我不确定我是否需要这些 dlopen 调用。我可以完全删除它们并且程序可以正常工作。但是，鉴于路径和 /etc/ld.so.conf 设置包含相同的搜索路径，现在我很好奇为什么 dlopen 在两台机器上的性能不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:44:40.887

`void *dlopen(const char *filename, int flag);`

`dlopen()`加载以空终止字符串命名的动态库文件，并`filename`为动态库返回一个不透明的“句柄”。如果库依赖于其他共享库，那么动态链接器也会自动递归地加载这些库。因此，无论是哪种情况，标准`dlopen()`都不会预先设置或对`filename`字符串进行任何修改。

通过以下方式搜索指定的文件名：

*   （仅限 ELF）如果调用程序的可执行文件包含`DT_RPATH`标签，但不包含`DT_RUNPATH`标签，则搜索标签中列出的目录`DT_RPATH`。

*   如果在程序启动时，环境变量`LD_LIBRARY_PATH`被定义为包含以冒号分隔的目录列表，则搜索这些目录。（作为一种安全措施，对于 set-user-ID 和 set-group-ID 程序，此变量将被忽略。）

*   （仅限 ELF）如果调用程序的可执行文件包含`DT_RUNPATH`标签，则搜索该标签中列出的目录。

*   检查缓存文件`/etc/ld.so.cache`（由 ldconfig(8) 维护）以查看它是否包含文件名条目。

*   目录`/lib`和`/usr/lib`被搜索（按该顺序）。

因此，您注意到 dlopen() 的这种奇怪行为可能是由于库的现有符号链接/硬链接`librdmacm.so`以及上述任何库搜索路径中的`libibverbs.so`as`rdmacm.so`和。`ibverbs.so`

如果`dlopen()`由于任何原因失败，则返回 NULL。在使用返回的句柄之前检查 NULL `dlopen`。

```
handle = dlopen("libxyz.so", RTLD_LAZY);
if (!handle)
{
     fprintf(stderr, "%s\n", dlerror());
     exit(EXIT_FAILURE);
} 
```

参考：`man 3 dlopen`

# windows - 为什么 32 位操作系统的 4GB 内存不等于 64 位操作系统的 2GB？

> ID：13872097
> 
> 赞同：-2
> 
> 时间：2012-12-14T03:09:26.193
> 
> 标签：windows, x86, 32bit-64bit, cpu-architecture, memory-limit

据我了解，“32 位”等于 2 ^(32)，这意味着我可以使用 32 位操作系统定义 4GB 内存。而“64 位”是 2 ^(64)，它允许 15EB。因此，使用 64 位操作系统，我们可以在计算机中放入更多内存。

但是，我对另一点感到困惑。

我们可以看到在 32 位的情况下，我们在系统中有（比如说）4GB 的物理内存，我们将 4GB 除以 32 位整数的大小，我们可以在其中存储一些整数（称为 N）记忆。而且，在 64 位中，计算是 4GB 除以 64 位整数的大小，所以我们只能存储一半的整数。因此，对于 64 位，我们无法在相同的内存中存储尽可能多的整数。

这是否意味着微软通过在 32 位和 64 位版本的操作系统中将此内存显示为“4GB”来欺骗我们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T05:16:28.673

不，微软并没有通过在两种情况下都显示相同的内存来作弊。

“32 位”与“64 位”仅指*指针*的大小。两种类型的系统都有 8 位*字节*，因此无论您使用的是 32 位还是 64 位操作系统，相同的内存都是 4 *GB 。*

不仅仅是大小相同的字节。定义为`int`（在 C 中）的普通整数在两个系统上都是 32 位。如果是 Windows ，即使是定义为的整数`long int`在两个系统上都是 32 位（尽管 Linux 在 64 位系统上将其设为 64 位）。因此，您可以看到应用于操作系统的“32 位”或“64 位”术语与指针以外的事物的大小几乎没有关系。

而且，除此之外，存储在计算机内存中的大部分数据都不是指针，甚至不是可能改变大小或不改变大小的整数；它是图像的像素或字符串的字节或声音文件中的 16 位样本或程序中的计算机指令。这些都没有改变大小。因此，无论您使用的是 32 位还是 64 位操作系统，您通常可以在相同数量的内存中存储相同数量的“真实信息”。

（现在，内存中的某些数据当然是指针，因此当您处理主要是指针的事物时，使用 64 位操作系统可能意味着您为相同的数据使用更多内存。在非常罕见的情况下，这很重要，但它们非常罕见。即使如此，它仍然是相同数量的内存字节；你只需要更多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T02:03:34.777

x86 使用字节寻址，因此 4GB 是相同数量的数据，无论是 32 位还是 64 位操作系统。

关于内存使用，x86_64 是经过精心设计的，因此指令大小不会增加太多或保持不变。由于需要较少的寄存器溢出，代码大小在某些情况下甚至可能更短。最重要的是，并非每种数据类型的大小都会增加。大多数操作仍然使用 32 位变量。唯一真正大小翻倍的类型是指针（`long`在 *nix 中）。所以实际上 64 位程序的内存使用量并不是 32 位程序的两倍。

# logging - 用于检查日志文件 md5sum 的批处理文件

> ID：13872099
> 
> 赞同：2
> 
> 时间：2012-12-14T03:09:29.540
> 
> 标签：logging, batch-file, md5, md5sum

我需要一些帮助来制作服务应用程序批处理文件。

简而言之，应用程序检查文件夹中是否有任何新文件，如果有，它会写入日志文件 ( `Results.txt`)。

问题是，如果 24 小时内文件夹中没有“结果”，则通常有问题。（服务崩溃或网络问题。）所以我需要编写一个批处理脚本来检查`Results.txt`文件是否在过去 24 小时内被更改。

我的计划是每 24 小时运行一次批处理文件，检查 md5sum`Results.txt`是否已更改。但是，我不知道该怎么做。在伪代码中，它看起来像这样：

```
if not exist old.txt echo. > old.txt & fc "md5.txt" "old.txt"
%md5sum% Results.txt > md5.txt
set equal=no
if md5.txt==old.txt set equal=yes
if equal=no echo No results found in 24 hours >> log.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:06:50.783

简单点怎么样？没有花哨的 MD5，只是`dir`命令的输出！这是有效的，因为如果它正在检查的目录中没有任何更改，则无论何时运行 dir 命令输出都将完全相同。

有关帮助和更多选项，请参阅：

```
dir /?
fc /? 
```

例子：

```
@echo off
if not exist old_fingerprint.txt echo. > old_fingerprint.txt
:: List the directory information, recursive, last write timestamps, 4 digit date
dir /n /s /t:w /4 > new_fingerprint.txt
:: Check out fc /? for all of the comparison options.
fc new_fingerprint.txt old_fingerprint.txt
:: fc sets errorlevel to 0 when the files match and not 0 when the files do not match.
if %ErrorLevel% NEQ 0 echo.No results found in 24 hours>> log.txt 
```

如果你想隐藏批处理脚本的所有输出，只需在`> nul`后面加上一个`fc`。

**更新：** 根据提供的新信息。

因此，您只需要检查 Results.txt 文件的最后写入时间戳。只要您在没有更改并更新时间戳时不写入文件。

甚至更好的是，如果您只关心文件夹内部是否有任何活动，只需检查该文件夹的“最后写入”时间戳即可。如果时间戳早于 24 小时，您可以处理 24 小时内未找到的结果。

将`/t:w`选项与`dir`命令一起使用，您可以解析所需的时间戳。

TLDR：**亲吻**

**更新 2：**

这是一个示例脚本，展示了如何获取目录信息的纯分解。

```
@echo off
setlocal

for /f "usebackq tokens=1,2,3,4,*" %%A in (`dir /a:d /l /n /t:w /4`) do (
    echo.
    echo.Date = %%A
    for /f "usebackq tokens=1,2,3 delims=/" %%X in ('%%A') do (
        echo.Month = %%X
        echo.Day = %%Y
        echo.Year = %%Z
    )
    echo.Time = %%B
    for /f "usebackq tokens=1,2 delims=:" %%X in ('%%B') do (
        echo.Hour = %%X
        echo.Minute = %%Y
    )
    echo.Meridiem = %%C
    echo.Type Raw = %%D
    for /f "usebackq tokens=1 delims=<>" %%X in ('%%D') do (
        echo.Type = %%X
    )
    echo.Name = %%E
    echo.
)

endlocal 
```

**答：** 这是一个脚本，说明了获取和比较时间戳的简单方法。设置一个计划任务以每 24 小时运行一次此脚本，如果自上次运行以来时间戳未更改，它将在日志文件中打印一条消息。

```
setlocal enabledelayedexpansion

for /f "usebackq tokens=1,2,3,4,*" %%A in (`dir /a:d /l /n /t:w /4`) do (
    if /i "%%~E"=="Folder" (
        if exist "LastTimeStamp.txt" find /c /i "%%A %%B %%C %%E" LastTimeStamp.txt > nul
        if !ErrorLevel! EQU 0 echo.The folder time stamp has not changed since last checked. >> log.txt
        echo.%%A %%B %%C %%E > LastTimeStamp.txt
    )
)

endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:14:52.960

这会将您目录中的文件与当前日期进行比较，如果它们比当前日期旧，那么它会告诉您哪些是新的（不一定需要），如果没有新的，则会记录它。

如果您在一天结束时使用计划任务运行它，那么这应该可以正常工作。

```
cd yourdir
forfiles /d +%date% /s /c "cmd /c echo @file is new" 2>nul
if %errorlevel%==1 echo No results found in 24 hours >>log.txt 
```

# php - 如何在 PHP 中提取标签的内容？

> ID：13872103
> 
> 赞同：3
> 
> 时间：2012-12-14T03:10:06.670
> 
> 标签：php, html, regex, html-parsing

我是正则表达式的新手。我想问一下这个 html 标签的正确组合是什么：

```
 <tr class="calendar_row" data-eventid="39654">
      <td class="alt1 eventDate smallfont" align="center"/></td>
      <td class="alt1 smallfont" align="center">3:34am</td>
      <td class="alt1 smallfont" align="center">CNY</td>
   </tr> 
```

我正在使用这个：

```
 $html = website html from a url
   $match = array();

   $pattern = "/(<tr.*?\data-eventid\>.*?<\/tr>)/ims";
   preg_match_all($pattern, $html, $match); 
```

但它不起作用：| 我只想选择该 tr 元素的所有内容..

此致。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T03:11:17.720

### 使用 DOMDocument

你不应该在这样的事情上使用正则表达式；而是从您的标记中创建一个[DOMDocument](http://php.net/manual/en/class.domdocument.php)，然后从该特定元素中选择子元素。例如，以下将为我们提供标记中每个`<td>`标记的集体 html：

```
// Our HTML will eventually go here
$innerHTML = "";

// Create a new DOMDocument based on our HTML
$document = new DOMDocument;
$document->loadHTML($html);

// Get a NodeList of all <td> Elements
$cells = $document->getElementsByTagName("td");

// Cycle over each <td>, adding its HTML to $innerHTML
foreach ($cells as $cell) {
    $innerHTML .= $document->saveHTML($cell);
}

// Output our glorious HTML
echo $innerHTML; 
```

### 常用表达

如果您真的想使用 获取`tr`标签之间的`preg_match`内容，则应该使用以下方法：

```
// Our pattern for capturing all that is between <tr> and </tr>
$pattern = "/<tr[^>]*>(.*)<\/tr>/s";

// If a match is found, store the results in $match
if (preg_match($pattern, $html, $match)) {
    // Show the captured value
    echo $match[1];
} 
```

结果如下：

```
<td class="alt1 eventDate smallfont" align="center"></td>
<td class="alt1 smallfont" align="center">3:34am</td>
<td class="alt1 smallfont" align="center">CNY</td> 
```

# sql - 迁移到 fusion sql api v1

> ID：13872105
> 
> 赞同：2
> 
> 时间：2012-12-14T03:10:16.477
> 
> 标签：sql, api, google-fusion-tables

我正在将 Google Fusion SQL API 迁移到 V1。我已按照[https://developers.google.com/fusiontables/docs/v1/migration_guide的说明进行操作](https://developers.google.com/fusiontables/docs/v1/migration_guide)

我的问题是如何知道迁移是否已成功完成？

是否有 Google api 返回的代码可以帮助我识别使用的 sql api 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:37:40.810

我也在迁移。（等到最后一分钟）。不确定您使用的是什么语言。AFAIK 这两个 api 有不同的访问 url。

旧：[https ://fusiontables.googleusercontent.com/fusiontables/api/query?sql=](https://fusiontables.googleusercontent.com/fusiontables/api/query?sql=)

新：[https ://www.googleapis.com/fusiontables/v1/query?sql=](https://www.googleapis.com/fusiontables/v1/query?sql=)

# c++ - 复制命令/Powershell 窗口屏幕缓冲区

> ID：13872107
> 
> 赞同：0
> 
> 时间：2012-12-14T03:10:22.013
> 
> 标签：c++, c, powershell, command-prompt

我想使用 C/C++/Powershell 将命令/powershell 窗口的屏幕缓冲区复制到文本文件中。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:02:36.713

使用主机控制台 API：-

```
$rec = new-object System.Management.Automation.Host.Rectangle 0,0,($host.ui.rawui.BufferSize.Width  - 1),$host.ui.rawui.CursorPosition.Y
$buffer = $host.ui.rawui.GetBufferContents($rec) 
```

使用 >> 或 | 将缓冲区写入文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T04:29:10.253

使用`Start-Transcript`and怎么样`Stop-Transcript`？

[Technet：创建您在 Windows PowerShell 中执行的操作的脚本](http://technet.microsoft.com/en-us/magazine/ff687007.aspx)

# c++ - 使用 Visual Studio 2012 构建面向 Windows XP 的 Boost 1.52 库

> ID：13872111
> 
> 赞同：9
> 
> 时间：2012-12-14T03:11:12.110
> 
> 标签：c++, visual-c++, boost, visual-studio-2012

“Visual Studio 2012 Update 1”使用工具集“vc110_xp”启用了对 Windows XP 目标的支持。

如何配置 Boost 1.52 以使用 vc110_xp 工具集构建库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:24:50.227

我发现最简单的方法是在加载默认值后编辑添加`\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat`行以更改`LIB`、`INCLUDE`和变量。Boost.Build 使用此批处理文件，因此您无需进行任何其他更改。`PATH``CL`

例如这里是新的`:x86`部分

```
:x86
if not exist "%~dp0bin\vcvars32.bat" goto missing
call "%~dp0bin\vcvars32.bat"

set INCLUDE=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Include;%INCLUDE%
set PATH=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Bin;%PATH%
set LIB=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Lib;%LIB%
set CL=/D_USING_V110_SDK71_;%CL%

goto :SetVisualStudioVersion 
```

四个`set`是加法。可以为该`:amd64`部分做类似的事情，虽然我不愿发布它，因为我自己只测试了 XP 32 位，我很高兴将 Vista+ 定位为 64 位版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T12:14:18.803

更改boost文件夹中以下文件的内容（下载并解压）

文件夹：boost_1_54_0\tools\build\v2\tools

文件：

1.  msvc.jam

内容改变：

```
for 32 bit :
          toolset.flags msvc LINKFLAGS <user-interface>console : /subsystem:console,5.01 ;

for 64 bit:
          toolset.flags msvc LINKFLAGS <user-interface>console : /subsystem:console,5.02 ; 
```

1.  msvc.py

内容改变：

```
for 32 bit :
          toolset.flags('msvc', 'LINKFLAGS', ['<user-interface>console'], ['/subsystem:console,5.01'])

for 64 bit:
          toolset.flags('msvc', 'LINKFLAGS', ['<user-interface>console'], ['/subsystem:console,5.02']) 
```

文件夹：boost_1_54_0\tools\build\v2\engine

文件：

1.  构建.bat

内容改变：

```
 for 32 bit/ 64 bit :
       1\.   fix the Visual Studio Path Exactly like instead of "%ProgramFiles%- change
               to  %ProgramFiles(x86)%

       2\.   Add " /D _USING_V110_SDK71_ " to BOOST_JAM_CC =cl command before Skip_VC11 
```

打开 vs2012 开发者命令提示符，输入以下命令

** 根据您的安装更新 7.1A SDK 路径

1.  调用“%ProgramFiles(x86)%\Microsoft Visual Studio 11.0\VC\bin\vcvars32.bat”

2.  设置 INCLUDE=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Include;%INCLUDE%

3.  设置 PATH=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Bin;%PATH%

4.  设置 LIB=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Lib;%LIB%

5.  引导程序

6.  根据操作系统类型（32/64 位）选择命令

    对于 32 位：

    b2 工具集=msvc-11.0 变体=调试，发布链接=共享运行时链接=共享地址模型=32

    对于 64 位：

    b2 工具集=msvc-11.0 变体=调试，发布链接=共享运行时链接=共享地址模型=64

要为发布和调试版本编译任何示例，请执行以下操作：

打开 vs2012 开发者命令提示符，输入以下命令

1.  调用“%ProgramFiles(x86)%\Microsoft Visual Studio 11.0\VC\bin\vcvars32.bat”

2.  设置 INCLUDE=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Include;%INCLUDE%

3.  设置 PATH=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Bin;%PATH%

4.  设置 LIB=%ProgramFiles(x86)%\Microsoft SDKs\Windows\7.1A\Lib;%LIB%

5.  转到示例目录：例如：boost_1_54_0\libs\test\tools\console_test_runner

6.  键入以下命令

    ```
    <path>\boost_1_54_0\bjam.exe --v2 toolset=msvc-11.0 variant=debug,release link=shared threading=multi runtime-link=shared 
    ```

# html - DatePicker 的值为空，但仍从最新剑道版本中的最后一次选择开始

> ID：13872112
> 
> 赞同：3
> 
> 时间：2012-12-14T03:11:12.313
> 
> 标签：html, datepicker, kendo-ui

我正在使用 Kendo MVVM 绑定日期选择器值。如果我使用 datepicker 选择一个日期（不是今天），然后使用 MVVM 将 value 设置为空，然后我再次打开 datepicker，它将从您上次选择的日期开始！

这是我正在使用的代码：

HTML：

```
<input type="text" data-role="datepicker" data-bind="value: date" />
<button data-bind="click: clear">clear</button> 
```

脚本：

```
kendo.init($("*"));
var viewModel = kendo.observable({
    date: "",
    clear: function () {
        this.set("date", "");
    }
});
kendo.bind($("*"), viewModel);​ 
```

如果日期选择器的值为空，如何让日期选择器始终从今天开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:27:50.267

调用 clear() 后，为什么不将当前日期分配给视图模型的“日期”？

```
var today = new Date();
var viewModel = kendo.observable({
   date: today,
   clear: function () {
       this.set("date", today);
   }
}); 
```

# php - 在 Sybase 中使用 LIMIT 子句

> ID：13872120
> 
> 赞同：0
> 
> 时间：2012-12-14T03:12:18.040
> 
> 标签：php, sybase, sql-limit

在 MySQL 中，我可以使用 LIMIT 子句，但不能在 sybase 中使用。我在网上找到了很多问题和答案，但我找不到我想要的。我试过这个

```
 SELECT TOP 5 * FROM Employees ORDER BY Surname; 
```

但是sybase抛出错误。它在5附近说语法不正确。我也试过这个

```
SELECT BOTTOM 5 * FROM
(SELECT TOP 15 * FROM someTable
ORDER BYorderColumns DESC) 
```

也不工作。还有这个：

```
SET ROWCOUNT 60
DECLARE @name VARCHAR
SELECT @name = name
FROM user
WHERE something = $something
ORDER BY date ASC

SET ROWCOUNT 20
SELECT *
FROM user
WHERE name >= @name 
```

这不起作用，因为我在表中没有任何 ID 号，而只有具有 varchar 数据类型的名称。有什么想法吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:16:50.127

我不确定您使用的是哪个 sybase，但是这个：

```
SELECT TOP 5 * FROM Employees ORDER BY Surname 
```

将工作`ASE`。

你也可以这样尝试：

```
SELECT TOP(5) * FROM Employees ORDER BY Surname; 
```

# haskell - Haskell - 需要帮助理解这个拆分功能

> ID：13872121
> 
> 赞同：3
> 
> 时间：2012-12-14T03:12:38.717
> 
> 标签：haskell

我需要帮助理解以下 Haskell 函数，

```
split l = rr++[ll]
            where
              split = foldl
                        ( \ (c,a) e ->
                               case c of
                                [] -> ([e],a)  
                                _ -> if e*(head c) < 0
                                     then ([e],a++[c])
                                     else (c++[e],a))
                        ([],[])
              (ll,rr) = split l

> split [1,2,3,-1,-2,7,4,-3,-5,-6,2,3]
[[1,2,3],[-1,-2],[7,4],[-3,-5,-6],[2,3]] 
```

如上所示，它将具有相同符号的连续数字拆分为单独的列表。在 Scheme 中，tracer 函数对逐步评估表达式非常有帮助，但不幸的是，GHCi 没有这样的功能。请帮助我逐步完成代码。谢谢！

注意：我理解函数的 foldl 部分。真正让我困惑的是模式匹配部分（`split l = rr++[ll]`和）！`(ll,rr) = split l`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T03:47:08.603

我认为这里可能会让你感到困惑的是，实际上`split`内部实际上与顶层`where`完全不同——内部“遮蔽”了外部，就像局部变量覆盖全局变量一样。`split`下面的代码做同样的事情：

```
split l = rr++[ll]
            where
              notSplit = foldl
                        ( \ (c,a) e ->
                               case c of
                                [] -> ([e],a)  
                                _ -> if e*(head c) < 0
                                     then ([e],a++[c])
                                     else (c++[e],a))
                        ([],[])
              (ll,rr) = notSplit l 
```

所以我们调用`notSplit`输入列表，它返回一个元组`(ll,rr)`，然后我们计算`rr ++ [ll]`并返回它。

（正如我上面的评论所说，该算法在包括零的列表上是不必要的模糊、低效和不正确的。但这完全是另一个问题）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T03:49:21.673

想一想`foldl`表达式产生了什么。当它遍历列表时，它会累积一个 tuple `(c, a)`。这个元组的第一个元素 ,`c`总是一个数字列表。`a`是数字列表的列表——恰好是您想要返回的内容。

当你得到一个新数字时，如果它与 中的数字具有相同的符号，则将其`c`添加到 中`c`。如果它的符号与当前的符号*不同*`c`，则将其全部`c`放入`a`.

最后，你得到一个 和 的最后一个值的元`c`组`a`。`a`几乎正是您想要的结果，只是它不完整：您需要添加`c`它。所以表达式的最后

```
(ll, rr) = split l 
```

取`split`(which is `c`and `a`) 的结果并赋值`c`给`ll`and `a`to `rr`。`rr`最后的答案只是`ll`附加到最后。

# javascript - 无法向表格添加新行

> ID：13872123
> 
> 赞同：1
> 
> 时间：2012-12-14T03:12:55.123
> 
> 标签：javascript, html, innerhtml, appendchild

```
function load(){
    var row="<tr><td><select id=\"chooseclass\"><option value=\"math\">Math</option><option value=\"phys\">Physics</option><option value=\"lit\">Literature</option><option value=\"chem\">Chemistry</option><option value=\"bio\">Biology</option><option value=\"lang\">Language</option><option value=\"proj\">Project</option><option value=\"elec\">Elective</option></select></td><td><input id=\"choosemods\" type=\"text\" /></td><td><input id=\"choosegrade\" type=\"text\" /></td></tr>";
    var tablebody = document.getElementById("classestable");
    tablebody.innerHTML += "<tbody></tbody>";
    tablebody.getElementsByTagName("tbody").innerHTML = "";
    for(var i=0;i<15;i++){
        tablebody.getElementsByTagName("tbody").innerHTML += row;
    }
} 
```

上面的代码运行良好，除了内容`row`没有被添加到`tbody`.

`console.log`显示的内容`row`是有效的 html 并且控制台中没有错误。为什么没有添加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:26:15.033

getElementsByTagName 返回一个 NodeList 并使用节点的索引访问它的第一个节点

我会将代码更改为以下

```
var innerRow = "";

for(var i=0;i<15;i++){
    innerRow += row;
}

tablebody.getElementsByTagName("tbody")[0].innerHTML = innerRow 
```

这样你只扫描 DOM 一次而不是 15 次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:18:49.200

您不能`innerHTML`在 Internet Explorer 中的表上使用，`getElementsByTagName`返回一个`NodeList`而不是单个节点，而且表还有一个`tBodies`属性。

您修改后的代码应该是：

```
function load(){
  var tr = document.createElement('tr'), td;
  td = tr.appendChild(document.createElement('td'));
  td.innerHTML = "<select id=\"chooseclass\"><option value=\"math\">Math</option><option value=\"phys\">Physics</option><option value=\"lit\">Literature</option><option value=\"chem\">Chemistry</option><option value=\"bio\">Biology</option><option value=\"lang\">Language</option><option value=\"proj\">Project</option><option value=\"elec\">Elective</option></select>";
  td = tr.appendChild(document.createElement('td'));
  td.innerHTML = "<input id=\"choosemods\" type=\"text\" />";
  td = tr.appendChild(document.createElement('td'));
  td.innerHTML = "<input id=\"choosegrade\" type=\"text\" />";
  var tablebody = document.getElementById("classestable").tBodies[0];
  for(var i=0;i<15;i++){
      tablebody.appendChild(tr.cloneNode(true));
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:20:00.403

您可以尝试使用查询选择器而不是`getElementsByTagName`.

```
document.querySelector('#classettable tbody').innerHTML += row; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T03:19:12.677

每次循环运行时添加 dom 是没有意义的。将它添加到一个 html 变量并执行一个 dom 事务。

```
function load(){
    var html= '';
    var row="<tr><td><select id=\"chooseclass\"><option value=\"math\">Math</option><option value=\"phys\">Physics</option><option value=\"lit\">Literature</option><option value=\"chem\">Chemistry</option><option value=\"bio\">Biology</option><option value=\"lang\">Language</option><option value=\"proj\">Project</option><option value=\"elec\">Elective</option></select></td><td><input id=\"choosemods\" type=\"text\" /></td><td><input id=\"choosegrade\" type=\"text\" /></td></tr>";
    var tablebody = document.getElementById("classestable");
    tablebody.innerHTML += "<tbody></tbody>";
    tablebody.getElementsByTagName("tbody").innerHTML = "";
    for(var i=0;i<15;i++){
        html += row;
    }
    tablebody.getElementsByTagName("tbody")[0].innerHTML = html;// Select first element from array of nodes
} 
```

# php - 在opencart中获取当前商店ID

> ID：13872124
> 
> 赞同：2
> 
> 时间：2012-12-14T03:13:00.270
> 
> 标签：php, opencart

我尝试根据`store id`每个商店都有不同的标题图像在前端显示不同的标题图像。

`header`问题是如何在前端（在）中回显当前的 store_id

所以我可以继续我的代码，如下所示：

```
<?php
if($store_id == '1') {  // 1 is default store
    //echo image here   
}
else {  //if not default show different image
    //echo image here   
}
?> 
```

*Opencart 版本：1.4.9.6*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T23:53:51.180

`store_id`您的商店的当前位置在`$this->config->get('config_store_id')`。

这意味着如果您在模板中需要它，请编辑标题控制器 ( `catalog/controller/common/header.php`) -`index()`函数中的一些添加此代码（id 它尚不存在）：

```
$this->data['store_id'] = $this->config->get('config_store_id'); 
```

然后在 Your `header.tpl`of Your 模板 ( `catalog/view/theme/<YOUR_THEME>/template/common/header.tpl`) 中以这种方式使用它：

```
<?php if ($tore_id == 0) { ?>
<div>Main store</div>
<?php } else { ?>
<div>Subdomain store</div>
<?php } ?> 
```

或者这样：

```
<div class="container-<?php echo $store_id; ?>"> ... </div> 
```

它在你身上。

**编辑：**还考虑继续使用更新的 OpenCart（截至 2012 年 12 月 15^日的最新版本是 1.5.4.1 ） - 值得重新设计以及它具有的功能和小工具。

# ruby-on-rails - 旧的迁移错误阻止我进行新的数据库更改

> ID：13872128
> 
> 赞同：1
> 
> 时间：2012-12-14T03:13:51.140
> 
> 标签：ruby-on-rails, activerecord

我刚刚开始学习 Rails，在阅读了 Michael Hartl 的“通过示例学习 Rails”之后，我决定尝试创建自己的简单应用程序，并具有一些类似的功能。在进行了几次不同的迁移并成功运行它们之后，我尝试将四列索引添加到表中。当我运行“bundle exec rake db:migrate”时出现错误：

```
Index name 'temp_index_altered_events_on_user_id_and_message_id_and_date_and_address_id'      
on table 'altered_events' is too long; the limit is 64 characters 
```

我查找了该错误的原因并将我的迁移更改为使用：

```
add_index :events, ["user_id", "message_id", "date", "address_id"], :unique => true, :name => 'my_index' 
```

然后我重新运行“bundle exec rake db:migrate”并得到同样的错误。我觉得这很奇怪，所以我尝试从迁移中完全删除索引行，让迁移简单地创建新表。我又试了一次，仍然遇到同样的错误。然后我删除了迁移文件，尝试生成一个全新的迁移，但我仍然遇到同样的错误。

我真的很讨厌这种幻影迁移来阻止我继续这个项目。有谁知道我怎样才能让它忘记我过去的错误，以便我可以犯一些新的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:16:47.870

要重置您的数据库`rake db:drop`，我`rake db:create`会`rake:db:migrate`从头开始运行所有迁移。

这不是生产中的解决方案，但对于学习来说已经足够了。

# c++ - 为 Crypto++ 构建和链接测试代码

> ID：13872129
> 
> 赞同：0
> 
> 时间：2012-12-14T03:14:00.850
> 
> 标签：c++, linker, crypto++

我正在尝试为项目的 Crypto++ 库编写一些简单的测试代码。我还没有设法让我自己的代码来构建。它编译得很好，问题出在链接上。我对 Visual Studios 还是很陌生，但我使用的是 VS10。我得到的错误是：

```
1>sec_test.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall CryptoPP::DES::Base::ProcessAndXorBlock(unsigned char const *,unsigned char const *,unsigned char *)const " (?ProcessAndXorBlock@Base@DES@CryptoPP@@UBEXPBE0PAE@Z)
1>sec_test.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall CryptoPP::DES::Base::UncheckedSetKey(unsigned char const *,unsigned int,class CryptoPP::NameValuePairs const &)" (?UncheckedSetKey@Base@DES@CryptoPP@@UAEXPBEIABVNameValuePairs@3@@Z) 
```

在链接方面，我已经尝试了在文档中可以找到的所有内容。我以前从未链接过 DLL，但这些是我尝试链接时遇到的错误。如果我尝试做我认为链接静态库版本的事情，我会得到更多。

我应该注意，我目前正在尝试测试纯 DES。特别是，为了安全起见，这是我正在进行的 API 调用：

```
DES::Encryption  DES_encrypt;
DES_encrypt.SetKey(key, 64);
DES_encrypt.ProcessAndXorBlock(plaintext, NULL, ciphertext);

DES::Decryption DES_decrypt;
DES_decrypt.SetKey(key, 64);
DES_decrypt.ProcessAndXorBlock(ciphertext, NULL, decrypted); 
```

如果有人可以提供帮助或指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:18:18.717

首先要检查的是您的项目属性（右键单击项目，单击`Properties`）。

需要在`Linker->Input->Additional Dependencies`字段中指定外部库，可以通过绝对路径或与其他 VS 路径属性结合使用。

您可以查看`Linker->Command Line`并检查您想要的 .lib 文件是否实际上正在传递给链接器。

另一种方法是关闭`Suppress Startup Banner`选项中的`Linker->General`选项，然后检查构建输出以确保它具有您想要的内容。

如果您知道正在链接您想要的库，另一个有用的技巧是检查`strings`命令的输出（在 linux 或 cygwin 中）或`dumpbin /HEADERS`在 VS 命令提示符中。您可以查看这些命令的输出中是否缺少符号 VS 声明，以验证它是否确实在 .lib 文件中定义。有时较大的软件包有多个 .lib 文件，因此这有助于确保您正在链接具有所需符号的那个。

# php - 将数据库列值设置为 PHP 中的变量

> ID：13872130
> 
> 赞同：-4
> 
> 时间：2012-12-14T03:14:09.477
> 
> 标签：php, mysql, variables

我有以下 PHP 代码选择 MySQL 数据库中的所有值：

```
<?php
$query1 = mysql_query("SELECT * FROM hosts WHERE name!=''");
?> 
```

如何将查询返回的内容分配给变量，以便我可以为每一行回显结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:32:02.450

[mysql_query](http://php.net/manual/en/function.mysql-query.php)返回一个资源，您可以使用这些方法从结果中获取每一行：

*   [mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)
*   [mysql_fetch_row](http://php.net/manual/en/function.mysql-fetch-row.php)
*   [mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)
*   [mysql_fetch_object](http://php.net/manual/en/function.mysql-fetch-object.php)

最常用的函数是[mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)，它使用列名作为键名将行作为关联数组获取：

```
<?php
$result = mysql_query(...);

while ($row = mysql_fetch_assoc($result)) {
 print $row['columnName'];
}

mysql_free_result($result);
?> 
```

我建议改用[MySQLi](http://php.net/manual/en/book.mysqli.php)扩展。它支持更多的 MySQL 功能，并具有过程和面向对象的实现。PDO_MYSQL扩展[比](http://php.net/manual/en/ref.pdo-mysql.php)[MySQLi](http://php.net/manual/en/book.mysqli.php)提供了一些改进，但它只有一个面向对象的实现，因此需要更多的时间来启动和运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T03:21:35.680

要获得结果，您需要执行以下操作：

```
<?php

$query1 = mysql_query("SELECT * FROM hosts WHERE name!=''");

while($results = mysql_fetch_array($query1)){
    echo $result['column_name'];
}

?> 
```

这是一个完整的例子：[`mysql_fetch_array()`](http://php.net/manual/en/function.mysql-fetch-array.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T03:23:39.940

基础的人，来吧....

```
$result = mysql_query("SELECT id, name FROM mytable");
$data = [];
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    array_push($data, $row['id'], $row['name']);  
}
mysql_free_result($result);
print_r($data); 
```

[获取数组](http://php.net/manual/en/function.mysql-fetch-array.php)| [数组推送](http://php.net/manual/en/function.array-push.php)

# mysql - 如何在名称中查找具有特定模式的表

> ID：13872131
> 
> 赞同：2
> 
> 时间：2012-12-14T03:14:14.533
> 
> 标签：mysql

在我的数据库中，我有一组名称，例如`table<N>`where `N`is a non-negative integer。我需要在字典顺序中找到具有“最大”名称的表。那是最伟大的名字`N`。`SHOW TABLES`列出所有表，我找不到比将整个列表获取到客户端并扫描它更有效的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:28:35.637

你能用`INFORMATION_SCHEMA.TABLES`来实现这个吗？

就像是：

```
SELECT * 
FROM INFORMATION_SCHEMA.TABLES
ORDER BY table_name DESC 
LIMIT 1 
```

当然，您也可以`WHERE`为此添加一个子句：

```
SELECT * FROM INFORMATION_SCHEMA.TABLES
WHERE table_name LIKE ('numberedTable%')
ORDER BY table_name DESC 
LIMIT 1 
```

如果适用。

# java - 从 POI 中的 WorkBook 中删除工作表

> ID：13872134
> 
> 赞同：4
> 
> 时间：2012-12-14T03:14:35.547
> 
> 标签：java, apache-poi

我有一个工作簿，我正在尝试删除名称与特定字符串不匹配的工作表。

这是我的代码

```
XSSFWorkbook book = new XSSFWorkbook(new FileInputStream(excelName));                   
            for(int i=0;i<book.getNumberOfSheets();i++){
                System.out.println(book.getSheetAt(i).getSheetName());
                if(!book.getSheetAt(i).getSheetName().equals(sheetName)){
                    book.removeSheetAt(i);
                }
            } 
```

代码运行良好，但没有执行所需的任务

## 编辑

如上所述的解决方案是反转循环顺序。这是一个更干净的代码

```
private void removeOtherSheets(String sheetName, XSSFWorkbook book) {       
            for(int i=book.getNumberOfSheets()-1;i>=0;i--){
                XSSFSheet tmpSheet =book.getSheetAt(i);
                if(!tmpSheet.getSheetName().equals(sheetName)){
                    book.removeSheetAt(i);
                }
            }       
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T04:47:26.373

您应该以相反的顺序删除，而不是正向的顺序。否则，您从列表中删除工作表并更改其状态以供将来循环使用。

关于表 A、B、C 和 D 的情况。您迭代到 i=1，并获得 B。您删除 B。如果您不重新获取 1 处的行，然后继续到 i=2，你会在 D 并且会跳过 C！反向迭代避免了这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-25T08:31:34.420

使用 Apache POI 删除工作表

```
//Open file
  String filePath = "C:\\filePath\\excelFileName.xlsx";
  String sheetName = "NameOfSheetToBeDeleted";
  FileInputStream inputStream = new FileInputStream(new File(filePath));
  XSSFWorkbook workBook = new XSSFWorkbook(inputStream);

//DELETE SHEET
  workBook.removeSheetAt(resultWorkbook.getSheetIndex(sheetName));

//Save the file
  FileOutputStream outFile =new FileOutputStream(new File(filePath));
  workBook.write(filePath);
  outFile.close(); 
```

# forms - 不同的表单动作取决于按钮

> ID：13872139
> 
> 赞同：1
> 
> 时间：2012-12-14T03:15:19.243
> 
> 标签：forms, menu, onclick

我在页面上有一个滚动菜单和三个不同的按钮。如果单击一个按钮，则表单将启动一个文件，传递从菜单中选择的值。如果是第 2 个按钮，以此类推为第 3 个，则启动第 2 个或第 3 个页面。我用 Java 尝试了几种理论，但结果都是空的。

# python - 将像素值设置为其在邻域中的百分位数

> ID：13872143
> 
> 赞同：2
> 
> 时间：2012-12-14T03:15:35.477
> 
> 标签：python, filter, numpy, scipy, percentile

出于空间分析的目的，我试图设置一个过滤器，对于给定邻域中的像素，给出*该*像素在其邻域中的百分位数（由结构元素定义）。

以下是我迄今为止最好的镜头：

```
import numpy as np
import scipy.ndimage as ndimage
import scipy.stats as sp

def get_percentile(values, radius=3):
  # Retrieve central pixel and neighbours values
  cur_value = values[4]
  other_values = np.delete(values, 4)

  return sp.percentileofscore(other_values, cur_value)/100

def percentiles(image):

  # definition of the neighbourhood (structuring element)
  footprint = np.array([[1,1,1],
                  [1,1,1],
                  [1,1,1]])

  # Using generic_filter to apply sequentially a my own user-defined
  # function (`get_percentile`) in the filter
  results = ndimage.generic_filter(
    image, 
    get_percentile, 
    footprint=footprint, 
    mode='constant', 
    cval=np.nan)

  return results

# Pick dimensions for a dummy example
dims = [12,15]
# Generate dummy example
df = np.random.randn(np.product(dims)).reshape(dims[0], dims[1])

percentiles(df) 
```

它有点工作，但是： 1\. 我确信代码不是真正的最佳，并且可以运行得更快 2\. 我邻居的维度是硬编码的。我想要的是`footprint`根据这个过滤器从它的邻居中更好地识别我正在应用过滤器（）的中心像素。

# drupal-7 - SyntaxHighlighter 将 < > 符号视为 HTML 标记

> ID：13872145
> 
> 赞同：2
> 
> 时间：2012-12-14T03:15:58.983
> 
> 标签：drupal-7, syntax-highlighting

这张图片描述了我的问题，这是一个 C 代码，如下所示。

```
<pre class="brush: cpp">
#include <stdio.h>

int main() {
    printf("Hello world<imnew>");

    return 0;
}
</pre> 
```

我得到的节点输出如下。

![在此处输入图像描述](../Images/8f61edff01a9fc9a61b5b0a7a0a7bd8a.png)

为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T11:49:55.533

我有同样的问题，虽然我没有检查“纠正错误并切断 HTML”过滤器。但我找到了一个临时解决方案，首先将小于字符转义为 <

```
<pre class="brush:cpp">
 #include &lt;iostream> 

  using namespace std;
  void main()
   {
   cout << "Hello World!" << endl;   cout << "Welcome to C++ Programming" << endl; }
</pre> 
```

或者您可以生成[自定义过滤器](http://drupal.org/project/customfilter) 以将大于和小于符号转义 `&gt;`为`&lt;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:38:57.660

这是在语法荧光笔输入过滤器之后执行的“纠正错误并切断 HTML”输入过滤器的问题。从“纠正错误并切断 HTML”输入过滤器执行的代码如下。

```
return filter_dom_serialize(filter_dom_load($text)); 
```

我尝试执行以下代码。

```
$text = <<<HTML
<pre class="brush: cpp">
#include <stdio.h>

int main() {
    printf("Hello world<imnew>");

    return 0;
}
</pre>
HTML;

print filter_dom_serialize(filter_dom_load($text)); 
```

我得到的输出如下。

```
<pre class="brush: cpp">
#include <stdio.h>

int main() {
    printf("Hello world<imnew>");

    return 0;
}
</imnew></stdio.h></pre> 
```

原因正是如此`<stdio.h>`，并且`<imnew>`被解释为标签，并且它们在之前被关闭`</pre>`。语法荧光笔应该转义 any `<`，并`>`在代码中找到以避免此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T13:02:05.603

除了@guneysus 回答，将所有 < 更改为 < 也有效。

# .htaccess - htaccess RewriteRule 重定向包含 + 的 url

> ID：13872147
> 
> 赞同：0
> 
> 时间：2012-12-14T03:16:41.700
> 
> 标签：.htaccess, mod-rewrite, uri

我想重定向一个网址，例如`www.example.com/new+uploads`使用`htaccess`

我尝试过的是：

```
RewriteRule ^new%2Buploads$ /index.php?iid=5
and
RewriteRule ^new+uploads$ /index.php?iid=5 
```

这些都不起作用，如果我删除+号，重写工作正常，我在这里和谷歌搜索了多个线程，我找不到任何解释它的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:40:13.830

```
RewriteRule ^new\+uploads$ /index.php?iid=5 
```

# .net - 如何调试 app.config 文件的加载

> ID：13872151
> 
> 赞同：7
> 
> 时间：2012-12-14T03:16:59.093
> 
> 标签：.net, debugging, app-config, appsettings

有谁知道是否有办法了解加载 app.config 文件的过程？

我遇到过许多在该过程中出现问题的情况（通常是配置文件中的错误值），但需要大量猜测或排除过程才能找到问题。

例如，以下一些方面给我带来了麻烦：

*   配置跟踪系统并定义监听器
*   管理 .NET 版本（`useLegacyV2RuntimeActivationPolicy`和关联的节点）
*   设置，尤其是在尝试管理多个程序集的设置时
*   程序集清单（我知道，不是真正的 app.config，而是在同一个 XML 配置的启动选项桶中）

这可能是一厢情愿的想法，但是如果可以启用一些秘密日志，或者以某种方式强制运行时在加载配置系统时提供更多信息，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:46:54.027

app.config 与 xml 模式进行了适当的比较，因此调试可能有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:48:51.917

我不知道 ConfigurationManager 提供的任何日志记录。但是，如果应用程序由于未处理的异常而崩溃，您可以参考 Windows 事件查看器（应用程序日志）以获取堆栈跟踪和异常消息。这通常是我需要指出的正确方向。

# requirejs - 为什么使用备用 requirejs 定义：define(function(require) { ... }

> ID：13872152
> 
> 赞同：19
> 
> 时间：2012-12-14T03:17:42.010
> 
> 标签：requirejs

我已经看到人们在 require js 中使用替代定义“语法”，而不是在 require js 的文档或许多教程中描述的。

通常定义“*语法”*：

```
define(['module/first'], function (firstModule) {
   //Module code with a dependency on module/first goes here.
}); 
```

*替代定义“语法*” ：

```
<script data-main="app/config" src="assets/js/libs/require.js"></script> 
```

文件：config.js：

```
require.config({
   paths: {
      jquery:      '../assets/js/libs/jquery'
   }
});
require(['app']); 
```

文件：app.js：

```
define(function(require) {
     var FirstModule = require('modules/first');
     //Module code with a dependency on module/first goes here. 
```

使用这种替代“语法”的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-14T03:54:47.827

我认为您的解释有点误导：在这两种情况下，您都会有一个顶级`require`调用，其`data-main`属性指定一个文件，以启动需要不同模块的过程。

所以通常你会在你的 HTML 中有这个：

```
<script data-main="app/config" src="assets/js/libs/require.js"></script> 
```

然后，*在这两种情况下*，您都会有一个文件`app/config`来设置您的配置（尽管您可以直接在 HTML 中执行此操作）并且更重要的是调用`require`您的模块：

```
require.config({
  paths: {
    jquery:      '../assets/js/libs/jquery'
  }
});
require(['app']); 
```

现在，当我们开始定义具有依赖关系的模块时，这些样式会有所不同。在 amd 样式中，您将模块名称（路径）作为数组传递，以及一个接受相同数量参数的函数：

**应用程序.js**

```
define(['module/first', 'module/second', 'module/third'], function (firstModule, secondModule, thirdModule) {
  // use firstModule, secondModule, thirdModule here
}); 
```

在简化的 CommonJS 语法中，您只需传入`require`然后`define`require 内联所需的任何模块：

**应用程序.js**

```
define(function(require) {
  var firstModule = require('modules/first');
  var secondModule = require('modules/second');
  var thirdModule = require('modules/third');
  // use firstModule, secondModule, thirdModule here

} 
```

回到你最初的问题，CommonJS 风格相对于 amd 风格的优势应该很明显。

一方面，使用常规语法，如果需要许多模块，*很*容易错误地将模块分配给错误的变量名。考虑这种常见情况：

```
define(['jquery', 'underscore', 'backbone', 'modules/first', 'modules/second', 'modules/third', 'i18n', 'someOtherModule'], function ($, _, Backbone, first, second, third, I18n, someOtherModule) {
  // ...
}); 
```

马上，你可以看到当我们向这个列表中添加一个新模块时，我们必须非常小心相应的新函数参数出现在正确的位置，否则我们可以将 jQuery 分配给`Backbone`等等。在某些情况下，这可以创建很难追踪的非常微妙的错误。

现在考虑 CommonJS 语法：

```
define(function(require) {
  var $ = require('jquery');
  var _ = require('underscore');
  var Backbone = require('backbone');
  var firstModule = require('modules/first');
  var secondModule = require('modules/second');
  var thirdModule = require('modules/third');
  var I18n = require('i18n');
  var someOtherModule = require('someOtherModule');
  // ...
} 
```

注意：

1.  模块与变量名的配对非常清晰。
2.  require 语句的顺序并不重要，因为变量名称是单独配对的，而不是作为数组和函数之间的映射。
3.  不需要先分配模块。只要在实际使用模块之前，它们就可以分配到任何地方。

这些只是我想到的几个原因，我相信还有其他原因。基本上，如果您只有一个或两个依赖项，那么任何一种语法都可以。但是如果你有一个复杂的模块依赖网络，CommonJS 语法可能更可取。

请注意，在 RequireJS 文档中，他们提到[了这个小警告](http://requirejs.org/docs/whyamd.html#sugar)：

> 并非所有浏览器都会给出可用的 Function.prototype.toString() 结果。截至 2011 年 10 月，PS 3 和更早的 Opera Mobile 浏览器不支持。这些浏览器更有可能需要针对网络/设备限制的模块的优化构建，因此只需使用知道如何将这些文件转换为规范化依赖数组形式的优化器进行构建，例如 RequireJS 优化器。

但这不是主要问题：

> 由于不支持这种 toString() 扫描的浏览器数量非常少，因此对所有模块使用这种糖化形式是安全的，特别是如果您希望将依赖项名称与将保存其模块值的变量对齐。

# java - 代码正在输出数组的位置而不是数组本身

> ID：13872153
> 
> 赞同：0
> 
> 时间：2012-12-14T03:17:50.150
> 
> 标签：java, arrays, for-loop

这是代码：

```
import java.lang.System;
import java.lang.Math;

public class ArrayFunHouseTwo
 {
   public static int[] getCountValuesBiggerThanX(int[] numArray, int count, int x)
{
    int[] newNumArray = new int[0];
    //int num = 0;
    int cnt = 0;
    int z = 0;
    for(int y = 0; y < numArray.length; y++){
        if(numArray[y] > x && z < count){
            newNumArray = new int[count];
            newNumArray[z] = numArray[y];
            z++;
        }

    }

    //}
    return newNumArray;
}
} 
```

它是相关的跑步者类：

```
import java.util.Arrays;

public class Lab14b
{
public static void main( String args[] )
{
    int[] one = {1,2,3,4,5,6,7,8,9,10};
    int[] two = {1,2,3,9,11,20,30};
    //add more test cases
    int[] three = {9,8,7,6,5,4,3,2,0,-2};
    int[] four = {3,6,9,12,15,18,21,23,19,17,15,13,11,10,9,6,3,2,1,0};
            System.out.println(Arrays.toString(four));
        System.out.println("first 7 values greater than 9  " +      ArrayFunHouseTwo.getCountValuesBiggerThanX(four, 7, 9));
    System.out.println("first 5 values greater than 15  " +    ArrayFunHouseTwo.getCountValuesBiggerThanX(four, 5, 15));
}
} 
```

正如我上面所说，它正在输出位置，我认为就是这样，而不是数组本身。

即我得到：前 7 个值大于 9 [I@38f0b51d

前 5 个大于 15 的值 [I@4302a01f

而不是前 7 个值大于 9 [12, 15, 18, 21, 23, 19, 17]

前 5 个值大于 15 [18, 21, 23, 19, 17]

**更新**

好的，所以现在我得到：

> 前 7 个值大于 9 [0, 0, 0, 0, 0, 0, 17]
> 
> 前 5 个大于 15 的值 [0, 0, 0, 0, 17]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:18:49.953

您想在构建字符串时调用此方法：

```
Arrays.toString(array); 
```

当一个对象被添加到一个字符串时，它的 toString() 方法被调用。
可悲的是，对于数组，这会打印您所看到的垃圾（它实际上不是垃圾，但它几乎同样有用）

将您的代码更改为：

```
System.out.println("first 5 values greater than 15  " +    
    Arrays.toString(ArrayFunHouseTwo.getCountValuesBiggerThanX(four, 5, 15))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:20:45.787

将函数的返回值转换为字符串`Arrays.toString`

```
 System.out.println("first 7 values greater than 9  " +    Arrays.toString(ArrayFunHouseTwo.getCountValuesBiggerThanX(four, 7, 9)));
    System.out.println("first 5 values greater than 15  " +    Arrays.toString(ArrayFunHouseTwo.getCountValuesBiggerThanX(four, 5, 15))); 
```

至于你的新问题，你不想`newNumArray = new int[count];`在循环中做这么深，它每次都会被覆盖。

我的 java 生锈了，但也许你可以在第一行设置`newNumArray`为`null`，如果它是，则只在循环内重新创建它`null`。或者只是将其直接更新为最终大小..取决于您要输出的内容。

# xcode - 如何深度清理 Xcode？

> ID：13872157
> 
> 赞同：2
> 
> 时间：2012-12-14T03:18:24.457
> 
> 标签：xcode, xcode4

我试图更新我的 cocos2d 模板，现在我得到了：

```
cocos2d: CCFileUtils: Warning HD file not found: bgs-jungle-hd.png
cocos2d: CCTexture2D. Cant create Texture. UIImage is nil 
cocos2d: Couldnt add image:bgs-jungle.png in CCTextureCache 
```

我尝试了产品 -> 清理，产品 -> 清理构建文件夹，从设备中删除应用程序，重新启动 Xcode，但同样的问题。

然后我打开了一个在旧的 cocos2d 上运行良好的备份，由于同样的问题它崩溃了。该文件在所有地方都拼写正确。我的代码没有任何问题。

我如何超级清理所有数据和历史的 Xcode？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:09:00.507

当您的应用程序无法打开资源时，请始终首先检查两件事：第一，您没有拼错文件名或使用了错误的大小写（设备文件名区分大小写），第二，该文件没有丢失“复制资源”构建阶段。

要检查您的资源是否已添加到“复制资源”构建阶段：

在项目导航器中单击最上面的项目（您的项目名称）。这将带您进入项目设置。选择你的目标，点击“Build Phases”，打开“Copy Bundle Resources”阶段。它将列出将复制到您的应用程序包中的所有资源文件。您可以使用列表底部的“+”按钮添加丢失的文件。

或者，如果您在项目导航器中选择一个文件，在右侧边栏中的文件检查器中，您可以设置该文件的目标成员资格。通常检查资源文件的目标会将其添加到该目标的“复制资源”阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:31:46.760

我也遇到过这个问题。添加资源文件夹时，选择方式

> “为任何添加的文件夹创建文件夹引用”

不要选择

> “为任何添加的文件夹创建组”

希望它会有所帮助:)

# junit - PaxExam 异常运行测试

> ID：13872159
> 
> 赞同：2
> 
> 时间：2012-12-14T03:18:37.240
> 
> 标签：junit, osgi, pax-runner, pax-exam

我是 Pax Exam 的新手，并试图通过调用我的 OSGI 服务来运行测试。在 Eclipse 中运行 paxexam 测试时出现以下异常。

```
java.lang.ClassNotFoundException: org.ops4j.pax.swissbox.framework.ServiceLookupException (no     security manager: RMI class loader disabled)
at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:373)
at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:163)
at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:620)
at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:247)
at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:197)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1574)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1870)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:225)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:178)
at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:132)
at $Proxy9.remoteCall(Unknown Source)
at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl$1.invoke(RemoteBundleContextClientImpl.java:112)
at $Proxy10.call(Unknown Source)
at org.ops4j.pax.exam.rbc.client.intern.RemoteBundleContextClientImpl.call(RemoteBundleContextClientImpl.java:287)
at org.ops4j.pax.exam.container.remote.RBCRemoteTarget.call(RBCRemoteTarget.java:70)
at org.ops4j.pax.exam.container.def.internal.PaxRunnerTestContainer.call(PaxRunnerTestContainer.java:187)
at org.ops4j.pax.exam.spi.reactors.AllConfinedStagedReactor.invoke(AllConfinedStagedReactor.java:74)
at org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:284)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
at org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:93)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

任何想法为什么会发生这种情况？当我在以下代码中启用 @Inject DataGenerator 行时会发生这种情况。

```
@RunWith(JUnit4TestRunner.class)
@ExamReactorStrategy(AllConfinedStagedReactorFactory.class)
public class SampleTest{

    @Inject
    private DataGenerator dataService;

    @Inject
    private BundleContext bundleContext; 
```

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:32:45.473

根据[PAXEXAM-493](https://ops4j1.jira.com/browse/PAXEXAM-493)，异常的根本原因是`DataGenerator`容器找不到您的服务。但是，通常 Pax Exam 会“很好地”报告此服务故障查找。在这种情况下，当 Pax Exam 尝试加载类`ServiceLookupException`以执行此操作时，`ServiceLookupException`自身的类查找失败（出于某种原因，Pax 开发人员尚未确定）。

# php - ajax调用后div没有删除

> ID：13872162
> 
> 赞同：0
> 
> 时间：2012-12-14T03:18:48.643
> 
> 标签：php, jquery, ajax

我知道关于这个主题有很多问题，但我找不到适合我的问题。我在博客文章中列出了评论，我希望能够在不刷新页面的情况下删除评论。

```
 $(document).ready(function(){    

    $('button.cm$cm_id').click(function(){

        $.post(\"/admin-location/delete.php?cid=\"+$cm_id, {
        }, function(response){
            $('#comment_$cm_id').remove();

        });
    }); 
}); 
```

我有这个作为我的评论框（作为上面的参考）

```
<div class='commentbox' id='comment_$cm_id'>comment here...<div class='deletecomm'><button class='cm$cm_id deletecm'><img src='/images/pixel-vfl73.gif' alt='' /></button></div></div> 
```

使用我的 send-post.php 页面从数据库中删除评论，但 div 没有删除。如果我重新加载页面，它就消失了。有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:41:13.107

尝试这个：

```
$('button.cm$cm_id').click(function(){
   var self = this;
    $.post(\"/admin-location/delete.php?cid=\"+$cm_id, {
    }, function(response){
        $(self).remove();

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:23:36.613

您必须使用两个反斜杠转义特殊字符。

```
$('button.cm\\$cm_id').click(...
$('#comment_\\$cm_id').remove(); 
```

[参考](http://api.jquery.com/category/selectors/)

# d3.js - d3.js - 当列代表月份时，柱状图上的布局不规则

> ID：13872172
> 
> 赞同：2
> 
> 时间：2012-12-14T03:20:57.593
> 
> 标签：d3.js

看看我放在一起的这个快速而肮脏的例子：http: [//zoopoetics.com/d3/irregular_layout.html](http://zoopoetics.com/d3/irregular_layout.html)

d3 的工作非常出色，因为月份的持续时间不规则，所以以不规则的间隔布置列。众所周知，一个月可以持续28到31天。

问题是，不规则的布局令人不安。我希望这些列沿水平轴以规则的像素间隔布置。

在谷歌上到处寻找答案，发现关于这个问题的信息很少，这表明我可能遗漏了一些明显的东西。

有没有其他人来过这里并克服了这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:31:53.657

我的第一种方法是使用时间 x 轴，但将条形图呈现在不同的比例上，比如 365/12 间隔。我认为 x 刻度应该在每个月的中间有月份名称标签，并且在中间有一个刻度：

[这是我的文件版本](https://dl.dropboxusercontent.com/u/8561342/d3/t1.html)

这里

# python - 基于特定列的平均数据 - python

> ID：13872174
> 
> 赞同：1
> 
> 时间：2012-12-14T03:21:07.273
> 
> 标签：python

我有一个包含多行和 8 列的数据文件 - 我想平均在第 1、2、5 列上具有相同数据的行的第 8 列 - 例如，我的文件可能如下所示：

```
564645  7371810 0   21642   1530    1   2   30.8007
564645  7371810 0   21642   8250    1   2   0.0103
564645  7371810 0   21643   1530    1   2   19.3619 
```

我想平均第一行和第三行的最后一列，因为第 1-2-5 列是相同的；

我希望输出看起来像这样：

```
564645  7371810 0   21642   1530    1   2   25.0813
564645  7371810 0   21642   8250    1   2   0.0103 
```

我的文件（文本文件）非常大（~10000 行）并且冗余数据（基于上述规则）不是定期间隔 - 所以我希望代码找到冗余数据，并对它们进行平均......

回应 larsks 的评论 - 这是我的 4 行代码......

```
import os
import numpy as np
datadirectory = input('path to the data directory, ')
os.chdir( datadirectory)

##READ DATA FILE AND CREATE AN ARRAY
dataset = open(input('dataset_to_be_used, ')).readlines()
data = np.loadtxt(dataset)
##Sort the data based on common X, Y and frequency
datasort = np.lexsort((data[:,0],data[:,1],data[:,4]))
datasorted = data[datasort] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:49:36.800

您可以使用 pandas 快速执行此操作：

```
import pandas as pd
from StringIO import StringIO
data = StringIO("""564645  7371810 0   21642   1530    1   2   30.8007
564645  7371810 0   21642   8250    1   2   0.0103
564645  7371810 0   21643   1530    1   2   19.3619
""")
df = pd.read_csv(data, sep="\\s+", header=None)
df.groupby(["X.1","X.2","X.5"])["X.8"].mean() 
```

输出是：

```
X.1     X.2      X.5 
564645  7371810  1530    25.0813
                 8250     0.0103
Name: X.8 
```

如果不需要索引，可以调用：

```
df.groupby(["X.1","X.2","X.5"])["X.8"].mean().reset_index() 
```

这将给出结果：

```
 X.1      X.2   X.5      X.8
0  564645  7371810  1530  25.0813
1  564645  7371810  8250   0.0103 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:06:15.997

好的，根据 Hury 的输入，我更新了代码 -

```
import os #needed system utils
import numpy as np# for array data processing
import pandas as pd #import the pandas module
datadirectory = input('path to the data directory, ')
working = os.environ.get("WORKING_DIRECTORY", datadirectory) 
os.chdir( working)

 ##READ DATA FILE AND and convert it to string
dataset = open(input('dataset_to_be_used, ')).readlines()
data = ''.join(dataset) 

df = pd.read_csv(data, sep="\\s+", header=None)
sorted_data = df.groupby(["X.1","X.2","X.5"])["X.8"].mean().reset_index()
tuple_data = [tuple(x) for x in sorted_data.values]
datas = np.asarray(tuple_data) 
```

这适用于 hury 发布的测试数据 - 但是当我在 df = ... 之后使用我的文件时似乎不起作用（我得到如下输出：

Traceback（最近一次调用最后）：文件“/media/DATA/arxeia/Programming/MyPys/data_refine_average.py”，第 31 行，在 df = pd.read_csv(data, sep="\s+", header=None) 文件中“/usr/lib64/python2.7/site-packages/pandas/io/parsers.py”，第 187 行，在 read_csv 返回 _read(TextParser, filepath_or_buffer, kwds) 文件“/usr/lib64/python2.7/site- packages/pandas/io/parsers.py”，第 141 行，在 _read f = com._get_handle(filepath_or_buffer, 'r', encoding=encoding) 文件“/usr/lib64/python2.7/site-packages/pandas/core /common.py"，第 673 行，在 _get_handle f = open(path, mode) IOError: [Errno 36] File name too long: '564645\t7371810\t0\t21642\t1530\t1\t2\t30.8007\r \n564645\t7371810\t0\t21642\t8250\t1\t2\t0.0103\r\n564645\t7371810\t0\t21642\t20370\t1\t2\t0。0042\r\n564645\t7371810\t0\t21642\t33030\t1\t2\t0.0026\r\n564645\t7371810\t0\t21642\t47970\t1\t2\t0.0018\r\n564645\t7371810\t t21642\t63090\t1\t2\t0.0013\r\n564645\t7371810\t0\t21642\t93090\t1\t2\t0.0009\r\n564645\t7371810\t0\t216......... .

有任何想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:50:29.803

这不是最优雅的答案，我不知道它有多快/多高效，但我相信它可以根据您提供的信息完成工作：

```
import numpy

data_file = "full_location_of_data_file"
data_dict = {}
for line in open(data_file):
    line = line.rstrip()
    columns = line.split()
    entry = [columns[0], columns[1], columns[4]]
    entry = "-".join(entry)
    try: #valid if have already seen combination of 1,2,5
        x = data_dict[entry].append(float(columns[7]))
    except (KeyError): #KeyError the first time you see a combination of columns 1,2,5
        data_dict[entry] = [float(columns[7])]

for entry in data_dict:
    value = numpy.mean(data_dict[entry])   
    output = entry.split("-")
    output.append(str(value))
    output = "\t".join(output)
    print output 
```

我不清楚您是否想要/需要第 3、6 或 7 列，所以我省略了它们。特别是，您没有明确说明要如何处理其中可能存在的不同值。如果您可以详细说明您想要什么行为（即默认为某个值或第一次出现），我建议您填写默认值或将第一个实例存储在字典字典而不是列表字典中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T21:03:44.683

```
import os #needed system utils
import numpy as np# for array data processing

datadirectory = '/media/DATA/arxeia/Dimitris/Testing/12_11'
working = os.environ.get("WORKING_DIRECTORY", datadirectory)
os.chdir( working) 
```

##这里我试图读取文件，然后在下一行中使用字符串的名称 - 这导致了下面描述的相同错误（错误＃42（我认为） - 名称太大）

```
data_dict = {} #Create empty dictionary
for line in open('/media/DATA/arxeia/Dimitris/Testing/12_11/1a.dat'): ##above error resolved when used this
    line = line.rstrip()
    columns = line.split()
    entry = [columns[0], columns[1], columns[4]]
    entry = "-".join(entry)
    try: #valid if have already seen combination of 1,2,5
        x = data_dict[entry].append(float(columns[7])) 
    except (KeyError): #KeyError the first time you see a combination of columns 1,2,5
        data_dict[entry] = [float(columns[7])]

for entry in data_dict:
    value = np.mean(data_dict[entry])   
    output = entry.split("-")
    output.append(str(value))
    output = "\t".join(output)
   print output 
```

## 我现在的另一个问题是以字符串格式（或任何格式）输出 - 然后我相信我知道我可以保存部分并操纵最终格式

```
np.savetxt('sorted_data.dat', sorted, fmt='%s', delimiter='\t') #Save the data 
```

## 我仍然必须弄清楚如何添加其他列 - 我也在努力

# objective-c - NSUserDefaults 和钥匙串

> ID：13872181
> 
> 赞同：0
> 
> 时间：2012-12-14T03:21:57.130
> 
> 标签：objective-c, security, nsuserdefaults, keychain

我是相对较新的 iphone 开发人员。我需要对我的应用程序进行身份验证，并且需要安全地存储密码和用户名。我在这个论坛上阅读了一些与此相关的主题。

似乎钥匙串是安全存储数据的更好方法，我遇到了关于推荐这个库的帖子。

**PDKeychainBindingsController**

我试过这个库，它和 NSUserDefault 一样容易使用。但让我感到困惑的是，NSUserDefaults 一开始并没有用于存储凭据，因为它们的内容很容易被黑客入侵，正如一些帖子中提到的那样。

然后我的问题是，使用上述库的安全性如何，因为它仍然使用 NSUserDefault 来访问钥匙串，如果 NSUserDefault 被黑客入侵，我在 NSUserDefault 中的密钥仍然可见。

我在这方面有点困惑，如果可能的话，我想对这个话题进行任何澄清。我想我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:32:21.553

当您使用 PDKeychainBindingsController 时，您应该调用 [PDKeychainBindings sharedKeychainBindings] 然后设置/获取所有字符串到/从钥匙串。PDKeychainBindingsController 将为您调用钥匙串 API（这是 C 语言，难以使用）。这意味着实际上所有 [[PDKeychainBindings sharedKeychainBindings] setObject:... forKey...] 都将保存在钥匙串中。不用担心使用它！

# wpf - 如何使用 Expression Blend 直观地划分网格？

> ID：13872182
> 
> 赞同：1
> 
> 时间：2012-12-14T03:22:02.477
> 
> 标签：wpf, expression-blend

当 Expression Blend 存在时，我讨厌自己为网格划分等进行编码。如何在视觉上做到这一点？我在属性和任何菜单上都看不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:13:22.367

检查下面的链接，有很好的教程可以做到这一点。

[http://msdn.microsoft.com/en-us/library/cc294491.aspx](http://msdn.microsoft.com/en-us/library/cc294491.aspx)

# amazon-web-services - Amazon SimpleDB 网页应用程序

> ID：13872183
> 
> 赞同：0
> 
> 时间：2012-12-14T03:22:25.457
> 
> 标签：amazon-web-services, amazon-simpledb

我是 AWS 云的新开发人员。我正在编写一个与 SimpleDB 交互的 Android 应用程序。我找到了许多参考资料，并使用 AWS 开发工具包和匿名 TVM 成功地将我的应用程序与 SimpleDB 连接起来——效果很好。

问题是我需要一个网站来通过 AWS SimpleDB 连接到相同的数据。该网站还需要与谷歌地图交互。在第一阶段，该站点可以是完全私有的，但在以后的道路上，我希望能够使用一组安全凭证使该站点对公众可用。

在阅读了一些文档之后 - 我对如何做到这一点感到非常困惑。我需要在 AWS 上托管网站吗？我使用哪个 API 可以与我的网站代码（主要是 JQUERY 和 JavaScript）进行交互？我看到有一个 PHP API？（对 PHP 不太熟悉）我看到了一些通过 AJAX 使用 REST 调用的示例。如果有人有任何反馈或简单的例子，或者解释，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:41:44.460

如果您有一个主要是 js 和 HTML 的静态站点，则可以使用 amazon s3 来托管您的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:11:05.987

是的，您应该在 EC2 实例上托管您的网站（尽管您可以在任何其他服务器或托管服务上托管它）。

您的站点还应该与 AWS 服务集成，例如 SimpleDB 或 DynamoDB。

开始使用 Node.js 会更容易，它会在本地运行 JQuery 和其他 JavaScript 代码。查看[适用于 Node.js 的新 SDK](http://docs.amazonwebservices.com/nodejs/latest/dg/nodejs-dg-aws-sdk-for-node.js.html)。

# maven - 带有 wro4j 和 Google Closure 编译器的 ECMASCRIPT 5

> ID：13872186
> 
> 赞同：4
> 
> 时间：2012-12-14T03:22:56.503
> 
> 标签：maven, google-closure-compiler, ecmascript-5, wro4j

我们使用 wro4j 和 Google Closure 和 Maven 来缩小我们的 JS。默认情况下，它不支持 JS 中的严格模式（“使用严格”；）.. 它只是将其剥离。有什么我可以在`pom.xml`或其他地方做的配置让它`use strict`留在那里吗？

这是谷歌关闭编译器的配置：

```
--language_in=ECMASCRIPT5_STRICT 
```

不知道如何将其插入 Wro4j。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:28:18.263

创建添加[ECMAScript5](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/ant/CompileTask.java)的管理器工厂的自定义实现：

```
public class MyCustomWroManagerFactory
extends DefaultStandaloneContextAwareManagerFactory
  {
  @Override 
    protected ProcessorsFactory newProcessorsFactory() 
      {
      final SimpleProcessorsFactory factory = new SimpleProcessorsFactory(); 

      factory.addPreProcessor(
           new GoogleClosureCompressorProcessor(
             CompilerOptions.LanguageMode.ECMASCRIPT5_STRICT
                                               )
                        ); 

      return factory;
      }
  } 
```

在 pom.xml 中引用它作为[wroManagerFactory](http://code.google.com/p/wro4j/wiki/MavenPluginCustomization)节点的值：

```
<configuration>
  <wroManagerFactory>com.mycompany.MyCustomWroManagerFactory</wroManagerFactory>
</configuration> 
```

> 根据 Closure Compiler 项目的 John Lenz 的说法，如果您直接使用 Compiler API，您应该指定一个 CodingConvention。

**参考**

*   [GoogleClosureCompressorProcessor.java - 方法 setCompilerOptions](https://github.com/google-code-export/wro4j/blob/master/wro4j-extensions/src/main/java/ro/isdc/wro/extensions/processor/js/GoogleClosureCompressorProcessor.java#L145)

*   [GoogleClosureCompressorProcessor.java - optionsPool 方法](https://github.com/wro4j/wro4j/blob/master/wro4j-extensions/src/main/java/ro/isdc/wro/extensions/processor/js/GoogleClosureCompressorProcessor.java#L89)

*   [Closure Compiler Service API 参考 - 语言 | 闭包编译器 | 谷歌开发者](https://developers.google.com/closure/compiler/docs/api-ref#language)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-25T12:02:15.603

在 1.8 中它有点复杂`wro4j-maven-plugin`，但还不错。

您需要添加两个 Java 类。像这样`newCompilerOptions`的第一个覆盖：`GoogleClosureCompressorProcessor`

```
package com.example.package.wro;

import com.google.javascript.jscomp.CheckLevel;
import com.google.javascript.jscomp.ClosureCodingConvention;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.DiagnosticGroups;
import java.nio.charset.Charset;
import org.apache.commons.lang3.CharEncoding;
import ro.isdc.wro.extensions.processor.js.GoogleClosureCompressorProcessor;

/**
 * Custom processor overriding `newCompilerOptions` to add custom compiler options.
 *
 * Original author: Alex Objelean.
 */
public class CustomGoogleClosureCompressorProcessor extends GoogleClosureCompressorProcessor {

    /**
     * Encoding to use.
     */
    public static final String ENCODING = CharEncoding.UTF_8;

    @Override
    protected CompilerOptions newCompilerOptions() {
        final CompilerOptions options = new CompilerOptions();

        // Set the language_in option on the Google Closure Compiler to prevent errors like:
        // "JSC_TRAILING_COMMA. Parse error. IE8 (and below)"
        options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT5);

        /**
         * According to John Lenz from the Closure Compiler project, if you are using the Compiler API directly, you should
         * specify a CodingConvention. {@link http://code.google.com/p/wro4j/issues/detail?id=155}
         */
        options.setCodingConvention(new ClosureCodingConvention());
        // use the wro4j encoding by default
        //options.setOutputCharset(Charset.forName(getEncoding()));
        setEncoding(ENCODING);
        options.setOutputCharset(Charset.forName(ENCODING));
        // set it to warning, otherwise compiler will fail
        options.setWarningLevel(DiagnosticGroups.CHECK_VARIABLES, CheckLevel.WARNING);
        return options;
    }
} 
```

你会注意到我已经注释掉了这一行`getEncoding`。这是因为它是私人的。我还添加`setEncoding`了以防万一。

然后我们需要自定义管理器：

```
package com.example.package.wro;

import ro.isdc.wro.manager.factory.standalone.DefaultStandaloneContextAwareManagerFactory;
import ro.isdc.wro.model.resource.processor.factory.ProcessorsFactory;
import ro.isdc.wro.model.resource.processor.factory.SimpleProcessorsFactory;

/**
 * Custom manger adding custom processor.
 */
public class CustomWroManagerFactory extends DefaultStandaloneContextAwareManagerFactory {

    @Override
    protected ProcessorsFactory newProcessorsFactory() {
        final SimpleProcessorsFactory factory = new SimpleProcessorsFactory();

        factory.addPreProcessor(
            new CustomGoogleClosureCompressorProcessor()
        );

        return factory;
    }
} 
```

然后在你的`pom.xml`in 中使用它`wroManagerFactory`。像这样：

```
 <plugin>
            <groupId>ro.isdc.wro4j</groupId>
            <artifactId>wro4j-maven-plugin</artifactId>
            <version>1.8.0</version>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
            <!-- Google Closure Compiler -->
            <!-- http://www.gzfs020.com/using-google-closure-compiler-with-wro4j-maven-plugin.html -->
            <configuration>
                <contextFolder>${basedir}/src/main</contextFolder>
                <wroFile>${basedir}/src/main/config/wro.xml</wroFile>
                <destinationFolder>${project.build.directory}/${project.build.finalName}/min</destinationFolder>
                <!--
                <wroManagerFactory>ro.isdc.wro.extensions.manager.standalone.GoogleStandaloneManagerFactory</wroManagerFactory>
                -->
                <wroManagerFactory>com.example.package.wro.CustomWroManagerFactory</wroManagerFactory>
            </configuration>
        </plugin> 
```

# websphere - 如何让 JAX-RS 应用程序在 WebSphere 8.5 上运行

> ID：13872189
> 
> 赞同：3
> 
> 时间：2012-12-14T03:23:28.580
> 
> 标签：websphere, jax-rs, war, ear

所以我想让一个 JAX-RS 应用程序在我的 WebSphere 8.5 实例上运行。我创建了以下界面...

```
@Path("service")
public class RestService {

    @GET
    @Produces("text/plain")
    public int getCount(){
        return 1;
    }
} 
```

这是我的应用程序...

```
public class RESTConfig extends Application{
    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = new Hashset<?>();
        classes.add(RestService.class);
        return classes;
    }
} 
```

然后这是我的 web.xml ......

```
<servlet>
    <servlet-name>Rest Servlet</servlet-name>
    <servlet-class>com.ibm.websphere.jaxrs.server.IBMRestServlet</servlet-class>
    <init-param>
    <param-name>jaxrs.ws.rs.Application</param-name>
        <param-value>com.company.rest.RESTConfig</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
....
<servlet-mapping>
    <servlet-name>Rest Servlet</servlet-name>
<url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

然后我有一个配置了 WAR 作为模块的 EAR。但是当我开始一切并尝试去 http://localhost:[port]/war/rest/app/service 我看到..

> [TIME] 00000115 RequestProces I org.apache.wink.server.internal.RequestProcessor logException 在调用处理程序链期间发生以下错误：WebApplicationException (404 - Not Found) with message 'null' while processing GET request sent to http: //localhost:[端口]/war/rest/service

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T15:46:59.013

WAS8.5 支持 v2.4 和 v3 servlet。删除 web.xml 内容（并使用 3.0 代码）对您有用的原因是您的 web.xml 的 param-name 标记有误。当您使用正确的参数名称时，v2.4 servlet 在 WAS8.5 中运行良好。

这是不正确的。

```
<param-name>jaxrs.ws.rs.Application</param-name> 
```

这是对的：

```
<param-name>javax.ws.rs.Application</param-name> 
```

详细信息：http: [//pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/twbs_jaxrs_configwebxml.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/twbs_jaxrs_configwebxml.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:41:51.603

该类`RestConfig`（定义为 JAX-RS 应用程序）应覆盖`getClasses`以返回资源：

```
@Path("app")
public class RESTConfig extends Application{
    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = new Hashset<?>();
        classes.add(RestService.class);

        return classes;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T17:54:33.107

该问题似乎与仅支持 v3 servlet 的 8.5 有关。这似乎解决了这个问题....

```
@Path("service")
public class RestService {

    @GET
    @Produces("text/plain")
    public String getCount(){
        //Text-Plain cannot be int apparently
        return String.valueOf(1);
    }
}

@ApplicationPath("rest")
public class RESTConfig extends Application{
   //Override no longer needed.
} 
```

现在应该可以正常部署...

这是我的来源[IBM](http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.was_v8/was/8.0/ProgramingModel/WASV8_JAXRS/player.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-02T11:53:41.493

另外，您可以尝试购买更改以下 web.xml 文件

```
<servlet>
    <servlet-name>javax.ws.rs.core.Application</servlet-name>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>javax.ws.rs.core.Application</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

此外，在项目方面 - 将 Web 模块版本更改为 3.0

如需更多参考，请访问：[如何部署 JAX-RS 应用程序？](https://stackoverflow.com/questions/2072295/how-to-deploy-a-jax-rs-application)

# c# - 在 C# 中设置执行完成后仍然存在的环境变量

> ID：13872190
> 
> 赞同：9
> 
> 时间：2012-12-14T03:23:31.963
> 
> 标签：c#

我需要从 C# 程序设置一个环境变量，以便稍后运行的批处理文件可以使用这个新创建的变量。我试过使用：

```
Environment.SetEnvironmentVariable("USRNAM", "My Name", 
                                    EnvironmentVariableTarget.Process); 
```

在这个语句之后我有一个断点设置，当它到达这个断点时，我转到一个命令提示符，发出以下命令：

```
C:\Users\Lenovo>SET USRNAM 
```

我得到：

```
Environment variable USRNAM not defined. 
```

如何设置在 C# 程序执行完成后仍然存在的环境变量？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T03:43:31.343

尝试使用`EnvironmentVariableTarget.User`或`EnvironmentVariableTarget.Machine`，这取决于您希望为当前用户还是为所有用户创建变量。

[在此处](http://msdn.microsoft.com/en-us/library/system.environmentvariabletarget.aspx)查找有关该枚举的信息。

# mysql - 在多个 NOT IN 上优化 MySQL 查询

> ID：13872192
> 
> 赞同：1
> 
> 时间：2012-12-14T03:23:38.500
> 
> 标签：mysql, sql

有什么办法可以优化这条sql语句吗？也许加入或什么？

```
SELECT id, name
FROM item
WHERE id NOT IN (
    SELECT id 
FROM itemlock
) AND id NOT IN (
SELECT id
    FROM itemlog
) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:28:33.117

采用`LEFT JOIN`

```
SELECT  a.*
FROM    item a
        LEFT JOIN itemLock b
            ON a.ID = b.ID
        LEFT JOIN itemLog c
            ON a.ID = c.ID
WHERE   b.ID IS NULL AND 
        c.ID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:52:21.523

您也可以使用 UNION，如下所示：

```
SELECT id, name FROM item 
WHERE id NOT IN (
   SELECT id  FROM itemlock UNION SELECT id FROM itemlog
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:54:12.373

试试这个：

```
SELECT id, NAME FROM item i 
LEFT JOIN (SELECT id FROM itemlock 
    UNION 
    SELECT id FROM itemlog) AS A ON i.id = A.id 
WHERE A.id IS NULL; 
```

# scala - 多行函数文字作为 Scala 中的参数

> ID：13872196
> 
> 赞同：17
> 
> 时间：2012-12-14T03:24:15.050
> 
> 标签：scala, function-literal

我一直想知道为什么有时使用函数文字我们可以忽略大括号，即使是多个语句。为了说明这一点，多行函数字面量的语法是用花括号将语句括起来。像这样，

```
val fl = (x: Int) => {
  println("Add 25 to "+x)
  x + 25
} 
```

但是，当您将其传递给单参数函数时，您可以忽略函数文字所需的大括号。

所以对于给定的函数 f，

```
def f( fl: Int => Int ) {
  println("Result is "+ fl(5))
} 
```

你可以像这样调用 f()，

```
f( x=> {
  println("Add 25 to "+x)
  x + 25
})
-------------------------
Add 25 to 5
Result: 30 
```

或者，当您在函数调用中使用大括号而不是括号时，您可以从函数文字中删除内部大括号。所以下面的代码也可以工作，

```
f{ x=>
  println("Add 25 to "+x)
  x + 25
} 
```

上面的代码更具可读性，我注意到很多示例都使用这种语法。但是，是否有任何我可能遗漏的特殊规则来解释为什么它按预期工作？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-14T06:40:29.033

只有几个简单的语法规则。该规范的附录值得细读。

函数文字或匿名函数 (6.23) 看起来像`x => Expr`或`x => Block`取决于上下文是分别是 Expr 还是 ResultExpr。

函数应用程序（6.6）看起来像`f(Expr, Expr)`or `f BlockExpr`，即`f{ Block }`。也就是说，一个 BlockExpr 只是一个内部的块语句序列`{...}`。

当您调用 时`f(g)`，g 是一个 Expr，因此作为函数文字，`x => Expr`. Expr 可以是 BlockExpr `x => { ... }`，.

当您调用时`f{ Block }`，`f { x => ... }`在 Block 的 ResultExpr 中有函数文字（这只是一系列语句，不需要大括号）。

在这里，很明显 anon 函数位于块的底部：

```
scala> def m(x: Int=>Int) = x(5)
m: (x: Int => Int)Int

scala> m {
     | val y = 7
     | x => // no brace
     | x+y+1
     | }
res0: Int = 13 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-14T04:34:31.683

这是让 Scala 对我来说很美的原因之一。

您的问题的简单答案是：

括号 ( ) 用于单行结构。例如，这有效：

```
 def f(fl: Int => Int) {
    println("Result is " + fl(5))
  }

  f(
   x =>
    x + 25)

  f(x => x + 25) // single line 
```

花括号 { } 用于多行语句。例如，这有效：

```
 f { 
   x =>
     println("Add 25 to " + x)
     x + 25
 } 
```

但这段代码不起作用：

```
f ( 
  x =>
    println("Add 25 to " + x)
    x + 25
) 
```

编译器抱怨以下消息：

> 值 x 不是单元的成员 可能原因：可能在“值 x”之前缺少分号？

如果添加分号，则会出现由不匹配的括号导致的语法错误。

如果您尝试这样做：

```
f { x => println("Add 25 to " + x) x + 25 } 
```

编译器将通过以下消息回复您：

```
value x is not a member of unit 
```

你知道他正试图找到 x 作为单位的成员。像：

```
f { println("Add 25 to " + x).x.+(25) } 
```

这显然是错误的。

如果添加内部花括号，如下所示：

```
f ( 
  x => {
    println("Add 25 to " + x)
    x + 25 
  }
) 
```

这也可以，但是您仍然有一个多行语句，它通过使用花括号来表示。所以编译器知道你想要什么是先打印然后将 25 添加到 x。

我以前被这些微妙之处咬过。从那以后，我一直在关注我使用这些代码的方式，因为当你主要使用地图、flatMaps、foreachs、fors 和 currying 时，你会编写代码并阅读很多内容。

干杯!

# javascript - 如何添加链接到 ?

> ID：13872197
> 
> 赞同：2
> 
> 时间：2012-12-14T03:24:15.973
> 
> 标签：javascript, jquery, jsf, jakarta-ee, primefaces

如何添加链接以`<p:submenu />`供使用`<p:megaMenu>`？

例如：

```
<!DOCTYPE html>
<ui:composition xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    template="/pages/template/homeTemplate.xhtml">

    <ui:define name="content">
        <p:megaMenu>
            <p:submenu label="Home" url="/" />
            <p:submenu label="Category" url="/cats">
                <p:column>
                    <p:submenu label="Category 1" url="/cats/cat1">
                        <p:menuitem value="Item 1" url="/cats/cat1/item1"/>
                        <p:menuitem value="Item 2" url="/cats/cat1/item2"/>
                        <p:menuitem value="Item 3" url="/cats/cat1/item3"/>
                    </p:submenu>
                </p:column>
            </p:submenu>
        </p:megaMenu>  
    </ui:define>

</ui:composition> 
```

`<p:submenu />`没有该属性`url`，所以它会被忽略，我能做些什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T03:46:25.310

我遇到了这个问题，我发现很多人说这是不可能的，因为 primefaces 不支持它，但是如果你不介意使用一点 javascript，有一个解决方法：

```
<ui:composition xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    template="/pages/template/homeTemplate.xhtml">

    <ui:define name="content">
        <p:megaMenu id="megaMenu">
            <p:submenu label="Home" url="/" styleClass="homeLink" />
            <p:submenu label="Category" url="/cats" styleClass="catLink">
                <p:column>
                    <p:submenu label="Category 1" styleClass="cat1Link">
                        <p:menuitem value="Item 1" url="/cats/cat1/item1"/>
                        <p:menuitem value="Item 2" url="/cats/cat1/item2"/>
                        <p:menuitem value="Item 3" url="/cats/cat1/item3"/>
                    </p:submenu>
                </p:column>
            </p:submenu>
        </p:megaMenu>
        <script type="text/javascript">
        $(function(){
            $(".homeLink a:first").attr('href', "#{request.contextPath}/");
            $(".catLink a:first").attr('href', "#{request.contextPath}/cats");
            $(".cat1Link").click(function(){
                window.location.href="#{request.contextPath}/cats/cat1";
            }).css('cursor','pointer');
        });
        </script>
    </ui:define>

</ui:composition> 
```

我在这里所做的是：

1）我`<p:submenu>`用一个专有的定义了每一个`styleClass`

2）如果在`<p:submenu>`第一行，我在 DOM 准备好后将`<a>`'`href`属性更改为我的链接：

```
$(function(){
    $(".homeLink a:first").attr('href', "#{request.contextPath}/");
    $(".catLink a:first").attr('href', "#{request.contextPath}/cats");
}); 
```

3）如果`<p:submenu>`是菜单的一部分，我创建了一个`onclick`属性并将光标自定义为指针，因为那里没有`<a>`标签。

```
$(".cat1Link").click(function(){
    window.location.href="#{request.contextPath}/cats/cat1";
}).css('cursor','pointer'); 
```

这导致了我需要的菜单，当然，如果禁用了 javascript，它将无法工作，但现在该菜单将适用于启用 javascript 的浏览器。

# performance - 如何使 Symfony2 使用 Connection: Keep-Alive 返回 HTTP 响应？

> ID：13872205
> 
> 赞同：2
> 
> 时间：2012-12-14T03:25:09.750
> 
> 标签：performance, http, rest, symfony, keep-alive

我正在使用 Symfony2 在后端为我的应用程序创建一个 REST API 服务器，并且正在考虑使用 Http Keep-Alive 为后续查询重用相同的 HTTP 连接，但是在每次查询之后，我都会`Connection: close`在响应标头中看到一个。

有没有办法告诉 Symfony2 在每次响应后不要关闭连接并等待更多请求标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:24:33.860

在您的情况下，最好的解决方案似乎是编写[kernel.response 事件侦听器](http://symfony.com/doc/current/book/internals.html#kernel-response-event)。并修改您的请求，例如`$response->headers->set('Connection', 'Keep-alive')`

# android - 如何将监听器放在android中的选项卡上

> ID：13872209
> 
> 赞同：1
> 
> 时间：2012-12-14T03:25:32.463
> 
> 标签：android, android-tabactivity

这是我的标签代码。请告诉我如何通过 switch 语句或简单的 onclick 监听器将监听器放在 tab1 上。而且这个吐司消息也不起作用

```
public class TabsActivity extends Activity implements OnClickListener  {

    TabHost th;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tabs);

    th = (TabHost)findViewById(R.id.tabhost);

    th.setup();
    TabSpec specs = th.newTabSpec("tag1");
    specs.setContent(R.id.tab1);
    specs.setIndicator("Home");
    th.addTab(specs);

    specs = th.newTabSpec("tag2");
    specs.setContent(R.id.tab2);
    specs.setIndicator("Goup");
    th.addTab(specs);

    specs = th.newTabSpec("tag3");
    specs.setContent(R.id.tab3);
    specs.setIndicator("Delete");
    th.addTab(specs);

}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch(arg0.getId()){
    case R.id.tab1:
        Toast.makeText(TabsActivity.this, "Action Item 0 selected!", Toast.LENGTH_LONG).show();
    break;
case R.id.tab2:

    TextView text= new TextView(TabsActivity.this);
    text.setText("u have created a new tab");

    break;

case R.id.tab3:
    break;

}
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.activity_tabs, menu);
return true;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:40:16.053

如果你想监听点击一个选项卡的动作，你应该使用这个：

```
th.setOnTabChangedListener(new OnTabChangeListener() {
    @Override
    public void onTabChanged(String tabId) {
        Toast.makeText(getApplicationContext(), "Click on tab: "+ tabId, Toast.LENGTH_SHORT).show();
    }
}); 
```

# jquery - jquery 悬停效果图片库 buggy 在 firefox

> ID：13872210
> 
> 赞同：0
> 
> 时间：2012-12-14T03:25:36.790
> 
> 标签：jquery

我想寻找或找到 Firefox 浏览器的解决方案，以使我的**悬停效果图片库**出现故障，但在 chrome 浏览器中除外。

请随时查看我的代码，您可以在其中查看 Firefox 浏览器中的完整问题。目前这里是我的图像淡入和淡出的短代码..

```
theBigImage.fadeOut(250, function(){
  theBigImage.attr('src', imageHref).fadeIn(250);
}); 
```

然后查看这个 [jsfiddle 悬停效果图片库](http://jsfiddle.net/imarkdesigns/MWRTD/12/)以获取完整的源代码，同时在 Firefox 和 chrome 中查看它。

# php - 第二个选择框从jquery中的第一个选择框填充

> ID：13872213
> 
> 赞同：0
> 
> 时间：2012-12-14T03:26:11.467
> 
> 标签：php, jquery, mysql

我想从第一个选择框的值中填充第二个选择框名称“ctype”。但是问题，仍然没有显示我附加的值......我不知道如何......现在我已经尝试解决了 2 周......但在第二个选择框中仍然没有显示..

现金.php

在第一个选择框

```
<?php $qryselect = mysql_query("select * from cc_merchant"); ?>      
<select id="merchant" name="merchant"  style="font:25px Arial, Helvetica, sans-serif;   font-weight:bold; color:#000000;">
     <option value=''>--Choose One--</option>
            <?php while($getrow=mysql_fetch_array($qryselect)) {?>
     <option value="<?php echo $getrow['merchant_id']; ?>" ><?php echo $getrow['bank_merchant'];  ?></option>
            <?php }  ?>
</select> 
```

第二个选择框

```
<p id="ctype">
    <select id="ctype_id" name="ctype_id" style="font:25px Arial, Helvetica, sans-serif; font-weight:bold; color:#000000;">    
        <option value="">--Choose One--</option>
     </select>
</p> 
```

jQuery

```
<script type="text/javascript">
    $("#merchant").selectbox({
    onChange:function(val,inst){
            $.ajax({
                    type:"GET",
                    data:{merchant:val},
                    url:"getctype.php",
                    success:function(data){
                          $("#ctype").html(data);
                          $("#ctype_id").selectbox();
                    }
            });
         },
    });
</script> 
```

脚本 getctype.php

```
<?php
   session_start();
   require_once("dbcon.php");
   $target = $_GET['merchant'];

   $sql = mysql_query("select card from card_support where merchant_id = '$target'");
   $getmerchant = mysql_fetch_assoc($sql);
   $card = $getmerchant['card'];

   echo $card."\n";
?> 
```

这是我遵循的示例...从第一个选择框填充到第二个选择框的值... [http://www.bulgaria-web-developers.com/projects/javascript/selectbox/index.php](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:13:03.403

首先，您**getctype.php**正在询问数据库并**只返回一张**卡片。可能您应该迭代结果以返回多个值。此外，建议返回 JSON 数据（可以通过 Javascript 轻松管理）。你可以用一段代码来完成这项工作

```
<?php

// start the session and load your libs
session_start();
require_once("dbcon.php");

// Ask DB for result and store them in an array
$sql = mysql_query("select card from card_support where merchant_id = '$target'");
$result = array();
while($getmerchant = mysql_fetch_assoc($sql))
    $result[] = $getmerchant;

// Send JSON header (no cache)
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

// Finally return the array in JSON format
echo json_encode($result); 
```

PHP 脚本返回的数据将是 JSON 响应，例如：

```
["card1","card2","card3",....] 
```

其次，当我们查看您的 AJAX 调用时，成功函数是将 HTMLElement 替换为 id **ctype**

```
$("#ctype").html(data); 
```

具有 id ctype 的 HTMLElement 是 a `<p>`，因此 的内容`<p>`完全替换为您的原始内容（卡值），而不是 a 。然后，您的第二行代码：

```
$("#ctype_id").selectbox(); 
```

不会有任何影响，因为不再存在（由 AJAX 调用返回的内容替换）。

为了让它工作，你可以在 JS 中使用这段代码：

```
// Assume the second select is already a **selectbox**    

// Make the first select a selectbox
$("#merchant").selectbox({

    onChange:function(val,inst){

        // Run the ajax call to refresh the content of the second selectbox
        $.ajax({
            type: "GET",
            data: { merchant: val },
            url:"getctype.php",
            dataType: 'json',
            success: function(data) {

                // Remove previous content of your second selectbox
                $("#ctype_id").empty();

                // Append default option
                $("#ctype_id").append($('<option value="">-- Chose one --</option>'));

                // Loop on your data (which is an array)
                for(var i = 0 ; i < data.length ; i++)
                {
                    $("#ctype_id").append($(document.createElement("option"))
                                          .val(data[i])
                                          .html(data[i]));
                }
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:00:49.313

如果您使用 jquery，我应该执行以下操作：

```
 $("#merchant").on('change', function() {

 $('#ctype_id').empty();
 $.get('getctype.php', function(data) {
 $(data).appendTo('#ctype_id');

 });
 }); 
```

您的 php 代码将是这样的：

```
echo '<option value="">--Choose One--</option>'
$sql = mysql_query("select card from card_support where merchant_id = '$target'");
$getmerchant = mysql_fetch_assoc($sql);
$card = $getmerchant['card'];

echo '<option value="'.$card.'">'.$card.'</option>'; 
```

# numbers - 来自 Oka 图书馆的 stepping_isProbablePrime(t)（质数生成）

> ID：13872215
> 
> 赞同：1
> 
> 时间：2012-12-14T03:27:02.190
> 
> 标签：numbers, primes

我真的需要你的帮助。我正在尝试调用在 Oka 的名为 stepping_isProbablePrime(t) 的库中找到的函数。它允许我异步调用这个函数。问题是我对 Javascript 太陌生了，我无法理解如何在循环中调用这个函数。

[http://ats.oka.nu/titaniumcore/js/crypto/RSA.sample1.html](http://ats.oka.nu/titaniumcore/js/crypto/RSA.sample1.html) http://ats.oka.nu/titaniumcore/js/nonstructured/nonstructured.readme.txt

这两个链接指向他完成的素数生成示例，第二个链接指向处理异步调用的结构。另请注意，如果您打开库尝试自己调用此函数，则会在 biginteger.init3.js 中找到该函数。

[http://ats.oka.nu/titaniumcore/js/crypto/readme.txt](http://ats.oka.nu/titaniumcore/js/crypto/readme.txt)

这是另一个链接，仅用于对他的图书馆进行一般概述。我真的需要你们的帮助，我已经尝试联系作者，我也尝试过 reddit。以及无数小时试图通过阅读我能找到的任何东西来掌握和实现这个功能。

# maven - Maven：添加镜像中不存在的依赖项

> ID：13872216
> 
> 赞同：0
> 
> 时间：2012-12-14T03:27:07.683
> 
> 标签：maven

我们为所有依赖项使用本地关系镜像。
我在其中一个项目中需要以下依赖项：

```
<depedency>
    <groupId>com.smartgwt</groupId>
    <artifactId>smartgwt</artifactId>
    <version>3.0</version>
</depedency> 
```

从存储库：[http ://www.smartclient.com/maven2](http://www.smartclient.com/maven2)

但是 maven 给我一个错误，说“找不到 com.smartgwt:smartgwt:jar:3.0”。
可能是什么问题，我该如何解决？

（也许这是一个非常微不足道的问题，但我对 Maven 相当陌生）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:29:09.127

我假设 Nexus 适用于托管在 Maven Central 上的所有标准依赖项。

`-X`您可以通过在构建时使用参数打开调试来确定 Maven 从哪里下载。会有很多噪音，但是如果你看上面几行，你的构建由于找不到依赖项而失败，它会告诉你：

*   它试图下载依赖项的位置
*   是否使用镜子
*   下载时是否有任何 HTTP 错误代码

* * *

如何`http://www.smartclient.com/maven2`在您的 Nexus 代理中设置？作为单独的代理存储库？Nexus 可以访问这个 repo（它是“服务中”并且没有被阻止）吗？

* * *

Nexus 中的此存储库是否已添加到“公共”组？如果你不想要这个，那么：

您必须在 settings.xml 中为此存储库配置一个单独的镜像，该镜像指向 Nexus 中的 URL。

还要检查您是否在 POM 中添加了存储库，例如

```
<project>
...
    <repositories>
        <repository>
            <id>smartclient</id>
            <name>SmartClient Maven Repository</name>
            <url>http://www.smartclient.com/maven2/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
    </repositories>
...
</project> 
```

然后在您的 settings.xml 中为此存储库配置一个代理条目：

```
<settings>
...
    <mirrors>
        <mirror>
            <id>smartclient-nexus-proxy</id>
            <mirrorOf>smartclient</mirrorOf>
            <url><url of your smartclient proxy repository in Nexus></url>
        </mirror>
    ... 
```

# c - 了解数组和循环答案

> ID：13872222
> 
> 赞同：-4
> 
> 时间：2012-12-14T03:27:53.597
> 
> 标签：c

您能否完成所有步骤，为什么答案是 9、0 和 3。

这将打印 9。如何？

```
int sum,i, j, g[3][3] = {{0,0,0},{1,1,1},{2,2,2}};
sum = 0;
for (i=0;i<=2;i++)
{
    for(j=0;j<=2;j++)
        sum=sum+g[i][j];
}
printf("The value is:%d", sum); 
```

这打印 0。如何？

```
sum = 1;
for (i=0;i<=2;i++)
{
    for(j=0;j<=1;j++)
        sum=sum*g[i][j];
}
printf("The value is:%d", sum);` 
```

这会打印 3\. 如何？

```
sum = 0;
for (i=0;i<=2;i++)
    sum=sum+g[i][1];
printf("The value is:%d", sum); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:32:15.727

要查看它是如何工作的，请尝试以下操作：

```
int sum,i, j, g[3][3] = {{0,0,0},{1,1,1},{2,2,2}};
sum = 0;
for (i=0;i<=2;i++)
{
     for(j=0;j<=2;j++)
     {
         sum=sum+g[i][j];
         printf("i=%d, j=%d, sum=%d", i, j, sum);
     }
}
printf("The value is:%d", sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:26:43.083

尝试这个...

```
int sum,i, j, g[3][3] = {{0,0,0},{1,1,1},{2,2,2}};
sum = 0;
for (i=0;i<=2;i++)
{
     for(j=0;j<=2;j++)
     {
         sum=sum+g[i][j];
         printf("i=%d, j=%d, g[%d][%d]=%d, sum=%d", i, j, i, j, g[i][j], sum);
     }
}
printf("The value is:%d", sum); 
```

# ios - UITableView (Xcode 4) 的大型数据存储

> ID：13872224
> 
> 赞同：1
> 
> 时间：2012-12-14T03:28:03.267
> 
> 标签：ios, xcode, uitableview

好吧，

我是 Xcode 的新手，所以如果我在这里遗漏了任何关键点，我深表歉意。

但是，我想在 UITableView 类型显示中有一个大列表。该列表将是一个字符串数组，其中可能包含 500 个 ish 条目和一个搜索栏，用于搜索您喜欢的任何条目。找到后，您可以点击该条目，它将加载它的详细视图。我宁愿不必在 Xcode 中输入所有数据，并且想知道存储/读取/写入它的最简洁方法是什么？

我倾向于某种数据文件......但不能完全弄清楚如何在 Xcode 中实现它。我搜索了一下，但找不到任何有意义的东西（可能是因为我对 Xcode 很陌生）。

这将是一个适用于 iOS 的应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:31:11.553

核心数据对你来说很好。但是，如果您不需要它的所有额外功能并且列表将是静态的（例如，不变并且将在运行时完整地读入代码），那么您可能可以使用 plist。Plist 数据可以直接读入数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:35:48.250

我了解您想创建一个 UITableView 显示静态数据，而您的问题是您不想将数据存储在代码中。根据数据结构的复杂程度，您可以将其保存在 sql 数据库中，将其与 coredata 一起存储，将其保存在 xml 文件中或以自定义编码保存在文件中。我现在不太清楚你的问题在哪里。您可以只加载文件/数据库，将其解析为对象结构并将其显示在表格视图中。将数据库用于文件有几个优点：

*   您可以轻松创建连接并轻松处理它们
*   您只需要在内存中加载当前真正需要的内容。

# python - python shell子进程导入调用无效语法

> ID：13872225
> 
> 赞同：0
> 
> 时间：2012-12-14T03:28:08.327
> 
> 标签：python, shell, call, subprocess

我想对目录中的每个文件执行一个 shell 命令。我不断收到错误。

这是代码：

```
import os
from subprocess import call

for dirname, dirnames, filenames in os.walk('.'):
    for filename in filenames:
        jpg = os.path.join(dirname, filename)
        call(["./curl_recognize.sh", jpg, jpg".txt", "-t txt"]) 
```

这是错误：

```
 call(["./curl_recognize.sh", jpg, jpg".txt", "-t txt"])
                                              ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:34:23.447

在“.txt”之前添加一个 +。那会解决它。

+ 运算符在 Python 中连接字符串。当两个字符串都是常量时，您可以将它们放在一起（“foo”“bar”与“foo bar”相同），但如果其中一个是变量（或任何其他类型的表达式），您必须使用 + 运算符。

代码中不相关的问题：您可能还需要将“-t txt”更改为“-t”、“txt”，因为前者会将“-t txt”作为单个参数传递给程序，并且几乎所有参数 -解析程序期望标志（“-t”）及其值（“txt”）作为单独的参数。

# scala - 如何在一个库中支持多个 Scala 版本

> ID：13872226
> 
> 赞同：40
> 
> 时间：2012-12-14T03:28:17.983
> 
> 标签：scala, maven, maven-plugin, sbt

我目前正在使用 Maven 构建一个相当普通的[Scala 项目。](https://github.com/FasterXML/jackson-module-scala/ "杰克逊斯卡拉模块")我想同时支持 Scala 2.9.x 和即将推出的 2.10，它们不兼容二进制或源代码。如有必要，我愿意接受转换为 SBT，但我遇到了一些挑战。

我对这个项目的要求是：

*   单源树（无分支）。我相信尝试为每个 Scala 版本支持多个并发的“主”分支将是错过分支之间错误修复的最快方法。

*   版本特定的源目录。由于 Scala 版本不兼容源代码，因此我需要能够为特定于版本的源代码指定辅助源目录。

*   特定于版本的源 jar。最终用户应该能够为他们的 Scala 版本下载正确的源 jar，以及正确的版本特定源，以进行 IDE 集成。

*   集成部署。我目前使用 Maven 发布插件将新版本部署到 Sonatype OSS 存储库，并希望有一个类似的简单发布工作流。

*   最终用户 Maven 支持。我的最终用户通常是 Maven 用户，因此准确反映依赖关系的功能性 POM 至关重要。

*   阴影罐支持。我需要能够生成一个包含我的依赖项子集的 JAR，*并从已发布的 POM 中删除阴影依赖项。*

我尝试过的事情：

*   Maven 配置文件。我创建了一组 Maven 配置文件来控制用于构建的 Scala 版本，使用 Maven build-helper 插件来选择版本特定的源代码树。在发布之前，这一直运行良好；

    *   使用分类器来限定版本效果不好，因为源 jar 还需要自定义分类器（'source-2.9.2' 等），并且大多数 IDE 工具不知道如何定位它们。

    *   我尝试使用 Maven 属性将 SBT 样式的 _${scala.version} 后缀添加到工件名称，但 Maven 不喜欢工件名称中的属性。

*   SBT。一旦你可以理解它，它就会很好地工作（尽管有大量文档，但这不是一项小任务）。缺点是似乎没有与 Maven 阴影插件等效的插件。我看过：

    *   前卫。该插件未针对 SBT 0.12.x 进行更新，并且不会从源代码构建，因为它依赖于另一个已更改 groupIds 的 SBT 插件，并且在旧名称下没有 0.12.x 版本。我还没有弄清楚如何指示 SBT 忽略/替换插件依赖项。

    *   一个罐子。这使用自定义类加载从嵌入式 jar 中运行 Main 类，这不是预期的结果；我希望我的项目的类文件与我的阴影依赖项中的（可能重命名的）类文件一起放在 jar 中。

    *   SBT 程序集插件。这可以在一定程度上起作用，但 POM 文件似乎包含我试图遮蔽的依赖项，这对我的最终用户没有帮助。

我接受可能没有解决方案可以满足我对 Scala 的要求，和/或我可能需要编写自己的 Maven 或 Scala 插件来实现目标。但如果可以的话，我想找到一个现有的解决方案。

# 更新

我接近接受@Jon-Ander 的出色[回答](https://stackoverflow.com/a/13880582/9700)，但对我来说仍然有一个出色的部分，那就是统一的发布过程。我的 build.sbt 的当前状态[在 GitHub 上](https://github.com/FasterXML/jackson-module-scala/blob/3c8da09fc40fb5419205295ccf3e63e3ba42e66e/build.sbt)。（我将在稍后的答案中复制它以供后代使用）。

sbt-release 插件不支持多版本构建（即，`+ release`行为不像人们所希望的那样），这是有道理的，因为发布标记的过程并不真正需要跨版本发生。但我希望这个过程的两个部分是多版本的：测试和发布。

我希望发生的事情类似于两阶段 maven-release-plugin 过程。第一阶段将执行更新 Git 和运行测试的管理工作，在这种情况下，这意味着运行`+ test`以便测试所有版本、标记、更新到快照，然后将结果推送到上游。

第二阶段将签出标记版本和`+ publish`，这将重新运行测试并将标记版本推送到 Sonatype 存储库。

我怀疑我可以编写`releaseProcess`执行这些操作的值，但我不确定我是否可以`releaseProcess`在我的`build.sbt`. 它可能可以与一些额外的范围一起使用，但是 SBT 的那部分对我来说仍然是奇怪的 majick。

我目前所做的是更改`releaseProcess`为不发布。然后我必须手动检查标记的版本并在`+ publish`事后运行，这接近我想要的但确实妥协，特别是因为测试仅在发布过程中在当前的 scala 版本上运行。我可以接受一个不像 maven 插件那样的两阶段流程，但确实实现了多版本测试和发布。

任何可以让我完成最后一英里的额外反馈将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T14:26:59.413

在单个源代码树中的 sbt 中很好地支持了大部分内容

通常不需要特定于版本的源目录。Scala 程序往往是源代码兼容的——事实上，交叉构建（[http://www.scala-sbt.org/release/docs/Detailed-Topics/Cross-Build](http://www.scala-sbt.org/release/docs/Detailed-Topics/Cross-Build)）在 sbt 中具有一流的支持。

如果您确实需要特定于版本的代码，您可以添加额外的源文件夹。把它放在你的 build.sbt 文件中，除了常规的“src/main/scala”之外，当你交叉构建时，将添加“src/main/scala-[scalaVersion]”作为每个版本的源目录。（还有一个插件可用于在版本之间生成垫片，但我没有尝试过 - [https://github.com/sbt/sbt-scalahim](https://github.com/sbt/sbt-scalashim)）

```
unmanagedSourceDirectories in Compile <+= (sourceDirectory in Compile, scalaVersion){ (s,v) => s / ("scala-"+v) } 
```

版本特定的源 jars - 参见 crossbuilding，开箱即用

集成部署 - [https://github.com/sbt/sbt-release](https://github.com/sbt/sbt-release)（也有很棒的 git 集成）

Maven 最终用户 - [http://www.scala-sbt.org/release/docs/Detailed-Topics/Publishing.html](http://www.scala-sbt.org/release/docs/Detailed-Topics/Publishing.html)

阴影 - 我已经使用了这个[https://github.com/sbt/sbt-assembly](https://github.com/sbt/sbt-assembly)，它可以很好地满足我的需求。你的组装插件问题可以通过重写生成的 pom.xml 来解决。这是一个删除 joda-time 的示例。

```
pomPostProcess := {
    import xml.transform._
    new RuleTransformer(new RewriteRule{
        override def transform(node:xml.Node) = {
            if((node \ "groupId").text == "joda-time") xml.NodeSeq.Empty else node
        }
    })
} 
```

完整的 build.sbt 供参考

```
scalaVersion := "2.9.2"

crossScalaVersions := Seq("2.9.2", "2.10.0-RC5")

unmanagedSourceDirectories in Compile <+= (sourceDirectory in Compile, scalaVersion){ (s,v) => s / ("scala-"+v) }

libraryDependencies += "joda-time" % "joda-time" % "1.6.2"

libraryDependencies += "org.mindrot" % "jbcrypt" % "0.3m"

pomPostProcess := {
    import xml.transform._
    new RuleTransformer(new RewriteRule{
        override def transform(node:xml.Node) = {
            if((node \ "groupId").text == "joda-time") xml.NodeSeq.Empty else node
        }
    })
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:55:01.757

我以 SBT 为例做了类似的事情： [https ://github.com/seanparsons/scalaz/commit/21298eb4af80f107181bfd09eaaa51c9b56bdc28](https://github.com/seanparsons/scalaz/commit/21298eb4af80f107181bfd09eaaa51c9b56bdc28)

SBT 使得所有设置都可以根据其他设置来确定，这意味着大多数其他事情应该“正常工作”。

至于 pom.xml 方面，我只能建议在 SBT 邮件列表中提出问题，但如果您不能这样做，我会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T08:43:49.177

我的博客文章[http://www.day-to-day-stuff.blogspot.nl/2013/04/fixing-code-and-binary.html](http://www.day-to-day-stuff.blogspot.nl/2013/04/fixing-code-and-binary.html)包含一个稍微更细粒度的附加不同源目录的解决方案示例；每个主要 S 一个。它还解释了如何创建非特定代码可以使用的特定于 scala 版本的代码。

**2016-11-08 更新**：Sbt 现在支持这个开箱即用：[http ://www.scala-sbt.org/0.13/docs/sbt-0.13-Tech-Previews.html#Cross-version+support+for+斯卡拉+来源](http://www.scala-sbt.org/0.13/docs/sbt-0.13-Tech-Previews.html#Cross-version+support+for+Scala+sources)

# iphone - Cocos2d - 角色似乎结结巴巴

> ID：13872229
> 
> 赞同：1
> 
> 时间：2012-12-14T03:28:41.583
> 
> 标签：iphone, ios, cocos2d-iphone

我正在制作一个基于瓷砖的自上而下的游戏（想想 GameBoy 上的旧口袋妖怪和塞尔达游戏）。我在角色移动顺畅时遇到问题。我认为问题在于完成一个动作和开始一个新动作之间的延迟。

代码如下所示：

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{ CGPoint touchCoor = [self coordinateForTouch:touch];

```
// If the character was touched, open their dialogue
if (CGPointEqualToPoint(touchCoor, ebplayer.coordinate)) {
    [[CCDirector sharedDirector] replaceScene:
     [CCTransitionMoveInR transitionWithDuration:1.0 scene:[HelloWorldLayer scene]]];
}
else // otherwise, move the character
{
    activeTouch = [self directionForPoint:[touch locationInView:[touch view]]];
    [self movePlayer:nil inDirection:activeTouch];
}

return YES; 
```

}

// 以屏幕尺寸给出的点 // 是所有运动的基本运动函数 - (void)movePlayer:(NSString*)pid toPosition:(CGPoint)position{ CGPoint playerCoordinate = [self coordinateForPositionPoint:position];

```
// if we're not already moving, and we can move, then move
if(!isAnimating && [self coordinateIsOnMap:playerCoordinate] && [self isPassable:playerCoordinate]){
    id doneAction = [CCCallFuncN actionWithTarget:self selector:@selector(finishedAnimating)];
    id moveAction = [CCMoveTo actionWithDuration:WALK_DURATION position:position];
    id animAction = [CCAnimate actionWithAnimation: [ebplayer animateDirection:activeTouch withDuration:WALK_DURATION]];
    id walkAndMove = [CCSpawn actionOne:moveAction two:animAction];
    id action = [CCSequence actions: walkAndMove, doneAction, nil];
    isAnimating = YES;
    [player runAction:action];

    ebplayer.coordinate = playerCoordinate;
    [self setViewpointCenter:position Animated:YES];
}

// if it's not passable, just run the animation
if(!isAnimating){
    id doneAction = [CCCallFuncN actionWithTarget:self selector:@selector(finishedAnimating)];
    id animAction = [CCAnimate actionWithAnimation: [ebplayer animateDirection:activeTouch withDuration:WALK_DURATION]];
    id action = [CCSequence actions: animAction, doneAction, nil];
    isAnimating = YES;
    [player runAction: action];
} 
```

}

然后，当该操作完成后，尝试再次启动它：

*   (void)finishedAnimating{ isAnimating = NO; [self movePlayer:nil inDirection:activeTouch]; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:44:45.830

在对多个 CCMove* 操作进行排序时，您总是会出现 1 帧延迟。

会发生以下情况：

*   帧 0-100：移动动作运行，精灵正在移动
*   第 101 帧：移动动作结束，CCCallFunc 运行
*   第 102 帧：新的移动动作开始

这种一帧延迟是移动动作排序的主要问题之一，也是我不建议将移动动作用于游戏目的的原因。

另一种方法是通过修改对象的位置以计划的更新方法手动移动对象。您可以使用 CCMove* 操作代码作为基础。

# python - 为什么我的 scoreList 是空的，即使我已经向它附加了值？代码尝试最大化列表时的运行时

> ID：13872230
> 
> 赞同：0
> 
> 时间：2012-12-14T03:28:43.640
> 
> 标签：python, list, append, runtime-error, max

我正在制作一个程序，让您可以针对我的程序播放 connect 4。这是外壳中发生的一切：

```
b = board(7,6) 
aiPlayer = player("X", 3)
b.playGameWith(aiPlayer)

| | | | | | | |
| | | | | | | |
| | | | | | | |
| | | | | | | |
| | | | | | | |
| | | | | | | |
---------------
 0 1 2 3 4 5 6  

O's choice: 3

Traceback (most recent call last):
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 1, in <module>
    # Used internally for debug sandbox under external interpreter
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 184, in playGameWith
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 225, in nextMove
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 214, in scoresFor
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 214, in scoresFor
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 220, in scoresFor
ValueError: max() arg is an empty sequence 
```

`b`是我在 board 类的 shell 中制作的对象。`aiPlayer`是玩家对象。

以下是相关代码：

```
class board: # i have other methods too but didn't want to clutter
    def __init__(self, width, height):
        self.width = width
        self.height = height
        self.data = []

        for row in range(self.height):
            boardRow = []
            for col in range (self.width):
                boardRow += [' ']
            self.data += [boardRow]

    def __repr__(self):     
        s = ''
        for row in range( self.height ):
            s += '|'
            for col in range ( self.width ):
                s += self.data[row][col] + '|'
            s += '\n' 

        i = -1
        for col in range( (self.width * 2) + 1 ):
            s += "-"
        s+= '\n'
        s+= " "
        for col in range( self.width ):
            i += 1
            s += str(i) + " "       
        return s

     def playGameWith(self, aiPlayer):
        winner = False
        if aiPlayer.ox == "X" or aiPlayer.ox == "x":
            firstMove = "O"
        else:
            firstMove = "X"
        while(winner == False):
            print "\n", self, "\n"

            if firstMove == "X":
                humanMove = int(raw_input("X's choice: "))  # get user input for column choice
                while(self.allowsMove(humanMove) == False): # ensure the user is selecting a valid column
                    humanMove = int(raw_input("\n" + "Invalid 'X' move, please try again: "))
                self.addMove(humanMove, "X")
                if (self.winsFor("X") == True):
                    message = "X wins -- Congratulations!"
                    break

                elif (self.isFull() == True):
                    message = "Looks like we got ourselves a tie."
                    break                   

            else:
                humanMove = int(raw_input("O's choice: "))
                while(self.allowsMove(humanMove) == False): # ensure the user is selecting a valid column
                    humanMove = int(raw_input("\n" + "Invalid 'O' move, please try again: "))
                self.addMove(humanMove, "O")  
                if (self.winsFor("O") == True):
                    message = "O wins -- Congratulations!"
                    break 

                elif (self.isFull() == True):
                    message = "Looks like we got ourselves a tie."
                    break     

            AI_Move = aiPlayer.nextMove(b) # here's where problems start. line 184
            self.addMove(AI_Move, aiPlayer.ox)

class player:
    def __init__(self, ox, ply):
        self.ox = ox
        self.ply = ply

    def scoresFor(self, b, ox, ply):
        scoreList = []
        opScoreList = []
        for col in range(b.width):
            if b.allowsMove(col):
                b.addMove(col, ox)

                if b.winsFor(ox) == True:
                    scoreList.append(100)

                elif ply == 1:
                    scoreList.append(50)

                else:
                    if ox == "X" or ox == "x":
                        ox = "O"
                    else:
                        ox = "X"
                    opScoreList = self.scoresFor(b, ox, ply-1) # line 214

                b.delMove(col)
            else:
                scoreList.append(-1) 
        scoreList.append(100 - max(opScoreList)) # line 220
        return scoreList

    def nextMove(self, board):
        moveList = self.scoresFor(b, self.ox, self.ply) # line 225
        bestMove = moveList.index((max(moveList)))
        return bestMove 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:37:43.337

```
self.scoresFor(b, ox, ply-1) 
```

或者

```
self.scoresFor(b, self.ox, self.ply) 
```

返回一个**空列表**。尝试在您的代码中添加一些跟踪输出并找出原因。没有更多的上下文是不可能说的。

# java - java - for 循环执行的次数超过了它应该执行的次数 - 节拍器程序

> ID：13872232
> 
> 赞同：1
> 
> 时间：2012-12-14T03:29:05.690
> 
> 标签：java, javasound

我正在创建一个节拍器程序，for 循环的执行次数比它应该执行的多 1 次。

```
public class Tempo {

String file;
int bpm;

public Tempo(int bpm, String file){
    this.bpm=bpm;
    this.file=file;
}

public void tempoPlay () throws InterruptedException{
    new Play(file).start();
    Thread.sleep(60000/bpm); 

}

public static void main(String[] args) throws InterruptedException {
    Tempo t = new Tempo(120, "C:\\Users\\Korisnik\\Desktop\\dome3.wav");

    for(int i=0;i<20;i++){
        t.tempoPlay();
    }
}
} 
```

第一个节拍紧随其后的是第二个节拍，但后来它听起来很顺从。我数过它播放 21 个节拍，但它应该播放 20 个节拍。这是 Play 类：

```
import java.io.File;
import java.io.IOException;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.FloatControl;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;
import javax.sound.sampled.UnsupportedAudioFileException;

class Play extends Thread {

private String filename;
private Position curPosition;
private final int EXTERNAL_BUFFER_SIZE = 524288; // 128Kb 

enum Position {

    LEFT, RIGHT, NORMAL
};

public Play(String wavfile) {
    filename = wavfile;
    curPosition = Position.NORMAL;
}

public Play(String wavfile, Position p) {
    filename = wavfile;
    curPosition = p;
}

@Override
public void run() {

    File soundFile = new File(filename);
    if (!soundFile.exists()) {
        System.err.println("Wave file not found: " + filename);
        return;
    }

    AudioInputStream audioInputStream = null;
    try {
        audioInputStream = AudioSystem.getAudioInputStream(soundFile);
    } catch (UnsupportedAudioFileException e1) {
        e1.printStackTrace();
        return;
    } catch (IOException e1) {
        e1.printStackTrace();
        return;
    }

    AudioFormat format = audioInputStream.getFormat();
    SourceDataLine auline = null;
    DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);

    try {
        auline = (SourceDataLine) AudioSystem.getLine(info);
        auline.open(format);
    } catch (LineUnavailableException e) {
        e.printStackTrace();
        return;
    } catch (Exception e) {
        e.printStackTrace();
        return;
    }

    if (auline.isControlSupported(FloatControl.Type.PAN)) {
        FloatControl pan = (FloatControl) auline
                .getControl(FloatControl.Type.PAN);
        if (curPosition == Position.RIGHT) {
            pan.setValue(1.0f);
        } else if (curPosition == Position.LEFT) {
            pan.setValue(-1.0f);
        }
    }

    auline.start();
    int nBytesRead = 0;
    byte[] abData = new byte[EXTERNAL_BUFFER_SIZE];

    try {
        while (nBytesRead != -1) {
            nBytesRead = audioInputStream.read(abData, 0, abData.length);
            if (nBytesRead >= 0) {
                auline.write(abData, 0, nBytesRead);
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
        return;
    } finally {
        auline.drain();
        auline.close();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:56:16.030

在黑暗中射击：出于测试目的，将文件完全读入内存可能是值得的。关于可能发生的事情的猜测是读取文件的 I/O 干扰了播放的时间。

你也许可以逃脱这个测试。

```
Tempo t = new Tempo(120, "C:\\Users\\Korisnik\\Desktop\\dome3.wav");

t.tempoPlay() // ignore this
Thread.sleep(10);

for(int i=0;i<20;i++){
    t.tempoPlay();
} 
```

或者更好的是，在播放声音之前让 Tempo 缓存读取的内容。

# ios - 如何为 CATextLayer 的字符串属性设置动画

> ID：13872233
> 
> 赞同：3
> 
> 时间：2012-12-14T03:29:10.213
> 
> 标签：ios, core-animation, cabasicanimation, catextlayer

是否可以为 CATextLayer 的字符串属性设置动画，以便图层显示“foo”，然后在间隔后显示“bar”？

编辑：我需要使用核心动画，因为我试图在`AVMutableVideoComposition`. 我可以将文本字符串覆盖在视频上，但我想让它每隔一段时间进行更改。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:52:51.623

你可以试试这样的

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target:self 
                               selector:@selector(changeText) userInfo:nil repeats:YES];

- (void)changeText {
     if (!isFoo) {
       [textLayer setString:@"foo"];
       isFoo = YES;
     } else {
       [textLayer setString:@"bar"];
       isFoo = NO;
     }
} 
```

# javascript - 使用 post 方法的 AJAX 调用

> ID：13872237
> 
> 赞同：0
> 
> 时间：2012-12-14T03:29:44.717
> 
> 标签：javascript, jquery, web-services

我对 ajax 和 Web 服务有点陌生。我正在尝试对 post 方法进行 ajax 调用。但是我遇到了以下错误。

> 客户端发送的请求在语法上是错误的 ()。`</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/7.0.25</h3></body></html>`

但是 GET 方法运行良好。这是我尝试过的代码。

```
 $.ajax({
                type: "POST", //GET or POST or PUT or DELETE verb
                url: "http://88.80.223.163:8080/lumiin-service/lumiin/control/eventmap/add", // Location of the service
                data: "{"id":50,"isDeleted":"N","ownerId":{"id":32,"fullName":"mailAss,mailAss","status":1,"isDeleted":null,"passWord":"chandra20@gmail.com","abteilung":{"id":86,"isDeleted":null,"domainId":0,"parentId":85,"code":"mailCa","description":null},"authenticatedAccess":-1,"emailId":"chandra20@gmail.com1","uuid":"5988371662040","userCode":"mailAss","localOrg":null,"industryTypeId":{"name":"INSR","id":1,"isDeleted":"N","description":"Insurance"},"memeber":false,"profileType":"CA","lastName":"mailAss","firstName":"mailAss"},"prospectId":{"id":158,"isDeleted":"N","yearofBirth":null,"annualRevenue":0,"nationalityId":{"name":"CH","id":1,"isDeleted":"N","description":"Switzerland"},"titleId":{"name":"Mr","id":1,"isDeleted":"N","description":"Mr"},"maritalstatusId":null,"residencyId":null,"languageId":null,"priorityId":{"name":"High","id":2,"isDeleted":"N","description":"High"},"genderId":null,"abteilung":{"id":86,"isDeleted":null,"domainId":0,"parentId":85,"code":"mailCa","description":null},"emailId":"skmvilla@gmail.com","ownerId":{"id":31,"fullName":"mailCa,mailCa","status":0,"isDeleted":"N","passWord":"mailCa","abteilung":{"id":86,"isDeleted":null,"domainId":0,"parentId":85,"code":"mailCa","description":null},"authenticatedAccess":-1,"emailId":"chandra20@gmail.com1","uuid":null,"userCode":"mailCa","localOrg":null,"industryTypeId":{"name":"INSR","id":1,"isDeleted":"N","description":"Insurance"},"memeber":false,"profileType":"Manager","lastName":"mailCa","firstName":"mailCa"},"company":"company","statusId":{"name":"New","id":1,"isDeleted":"N","description":"New"},"startDate":null,"endDate":null,"lastName":"Search","firstName":"Search"},"eventId":{"URL":null,"location":null,"url":null,"id":92,"type":{"name":"govinda","id":20,"isDeleted":"N","description":"desc"},"isDeleted":"N","followUp":null,"countryId":null,"budget":0,"abteilung":{"id":86,"isDeleted":null,"domainId":0,"parentId":85,"code":"mailCa","description":null},"startDate":1337731200000,"endDate":1338422400000,"prospectId":null,"person":null,"eventName":"eeee-updated","place":null,"description":null}}", //Data sent to server                         
               //contentType: "application/json", // content type sent to server
                dataType: "json", //Expected data format from server
                processdata: true, //True or False
                success: function (json) {//On Successfull service call
                    //shell.loaded();
                    alert("cross domain ajax success full.");

                    var result = json.id;
                    alert("result===" + result);
                    $("#dvAjax").html(result);
                },
                error: ServiceFailed// When Service call fails
            }); 
```

如果有人知道请告知。提前致谢。

问候卡西克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:41:29.457

您的财产周围的报价`data`是错误的。您应该只发送一个简单的 JS 对象，例如

```
data: {"id": 50, "isDeleted": "N", ... },
dataType: 'json',
etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:44:17.257

尝试对发送的数据使用 JSON.stringify

```
$.ajax({
    type: "POST", //GET or POST or PUT or DELETE verb 
    url: "http://88.80.223.163:8080/lumiin-service/lumiin/control/eventmap/add", // Location of the service 
    data: JSON.stringify({
        "id": 50,
        "isDeleted": "N",
        "ownerId": {
            "id": 32,
            "fullName": "mailAss,mailAss",
            "status": 1,
            "isDeleted": null,
            "passWord": "chandra20@gmail.com",
            "abteilung": {
                "id": 86,
                "isDeleted": null,
                "domainId": 0,
                "parentId": 85,
                "code": "mailCa",
                "description": null
            },
            "authenticatedAccess": -1,
            "emailId": "chandra20@gmail.com1",
            "uuid": "5988371662040",
            "userCode": "mailAss",
            "localOrg": null,
            "industryTypeId": {
                "name": "INSR",
                "id": 1,
                "isDeleted": "N",
                "description": "Insurance"
            },
            "memeber": false,
            "profileType": "CA",
            "lastName": "mailAss",
            "firstName": "mailAss"
        },
        "prospectId": {
            "id": 158,
            "isDeleted": "N",
            "yearofBirth": null,
            "annualRevenue": 0,
            "nationalityId": {
                "name": "CH",
                "id": 1,
                "isDeleted": "N",
                "description": "Switzerland"
            },
            "titleId": {
                "name": "Mr",
                "id": 1,
                "isDeleted": "N",
                "description": "Mr"
            },
            "maritalstatusId": null,
            "residencyId": null,
            "languageId": null,
            "priorityId": {
                "name": "High",
                "id": 2,
                "isDeleted": "N",
                "description": "High"
            },
            "genderId": null,
            "abteilung": {
                "id": 86,
                "isDeleted": null,
                "domainId": 0,
                "parentId": 85,
                "code": "mailCa",
                "description": null
            },
            "emailId": "skmvilla@gmail.com",
            "ownerId": {
                "id": 31,
                "fullName": "mailCa,mailCa",
                "status": 0,
                "isDeleted": "N",
                "passWord": "mailCa",
                "abteilung": {
                    "id": 86,
                    "isDeleted": null,
                    "domainId": 0,
                    "parentId": 85,
                    "code": "mailCa",
                    "description": null
                },
                "authenticatedAccess": -1,
                "emailId": "chandra20@gmail.com1",
                "uuid": null,
                "userCode": "mailCa",
                "localOrg": null,
                "industryTypeId": {
                    "name": "INSR",
                    "id": 1,
                    "isDeleted": "N",
                    "description": "Insurance"
                },
                "memeber": false,
                "profileType": "Manager",
                "lastName": "mailCa",
                "firstName": "mailCa"
            },
            "company": "company",
            "statusId": {
                "name": "New",
                "id": 1,
                "isDeleted": "N",
                "description": "New"
            },
            "startDate": null,
            "endDate": null,
            "lastName": "Search",
            "firstName": "Search"
        },
        "eventId": {
            "URL": null,
            "location": null,
            "url": null,
            "id": 92,
            "type": {
                "name": "govinda",
                "id": 20,
                "isDeleted": "N",
                "description": "desc"
            },
            "isDeleted": "N",
            "followUp": null,
            "countryId": null,
            "budget": 0,
            "abteilung": {
                "id": 86,
                "isDeleted": null,
                "domainId": 0,
                "parentId": 85,
                "code": "mailCa",
                "description": null
            },
            "startDate": 1337731200000,
            "endDate": 1338422400000,
            "prospectId": null,
            "person": null,
            "eventName": "eeee-updated",
            "place": null,
            "description": null
        }
    }), //Data sent to server
    contentType: "application/json", // content type sent to server 
    dataType: "json", //Expected data format from server 
    processdata: true,  //True or False 

    success: function(json) { //On Successfull service call 
        //shell.loaded(); 
        // alert("cross domain ajax success full.");

        var result = json.id;
        alert("result===" + result);
        // $("#dvAjax").html(result);
    },
    error: ServiceFailed // When Service call fails
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T03:46:39.383

正如服务器所说，JSON 没有正确“格式化”。例如，

```
 data: "{"id":50,"isDeleted":"N" 
```

... { 之前的 " 不应该在那里。（可能还有其他语法错误。）

您可以使用 JSON 验证器，例如[http://jsonlint.com/](http://jsonlint.com/)来测试您的 JSON 有效负载。这将为您提供有关特定解析错误的更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T03:57:29.107

您需要在数据中放置正确的单/双引号：

```
var yourData = {
'id': 50,
'isDeleted': 'N',
'ownerId': {
    'id': 32,
    'fullName': 'mailAss,mailAss',
    'status': 1,
    'isDeleted': null,
    'passWord': 'chandra20@gmail.com',
    'abteilung': {
        'id': 86,
        'isDeleted': null,
        'domainId': 0,
        'parentId': 85,
        'code': 'mailCa',
        'description': null
    },
    'authenticatedAccess': -1,
    'emailId': 'chandra20@gmail.com1',
    'uuid': '5988371662040',
    'userCode': 'mailAss',
    'localOrg': null,
    'industryTypeId': {
        'name': 'INSR',
        'id': 1,
        'isDeleted': 'N',
        'description': 'Insurance'
    },
    'memeber': false,
    'profileType': 'CA',
    'lastName': 'mailAss',
    'firstName': 'mailAss'
},
'prospectId': {
    'id': 158,
    'isDeleted': 'N',
    'yearofBirth': null,
    'annualRevenue': 0,
    'nationalityId': {
        'name': 'CH',
        'id': 1,
        'isDeleted': 'N',
        'description': 'Switzerland'
    },
    'titleId': {
        'name': 'Mr',
        'id': 1,
        'isDeleted': 'N',
        'description': 'Mr'
    },
    'maritalstatusId': null,
    'residencyId': null,
    'languageId': null,
    'priorityId': {
        'name': 'High',
        'id': 2,
        'isDeleted': 'N',
        'description': 'High'
    },
    'genderId': null,
    'abteilung': {
        'id': 86,
        'isDeleted': null,
        'domainId': 0,
        'parentId': 85,
        'code': 'mailCa',
        'description': null
    },
    'emailId': 'skmvilla@gmail.com',
    'ownerId': {
        'id': 31,
        'fullName': 'mailCa,mailCa',
        'status': 0,
        'isDeleted': 'N',
        'passWord': 'mailCa',
        'abteilung': {
            'id': 86,
            'isDeleted': null,
            'domainId': 0,
            'parentId': 85,
            'code': 'mailCa',
            'description': null
        },
        'authenticatedAccess': -1,
        'emailId': 'chandra20@gmail.com1',
        'uuid': null,
        'userCode': 'mailCa',
        'localOrg': null,
        'industryTypeId': {
            'name': 'INSR',
            'id': 1,
            'isDeleted': 'N',
            'description': 'Insurance'
        },
        'memeber': false,
        'profileType': 'Manager',
        'lastName': 'mailCa',
        'firstName': 'mailCa'
    },
    'company': 'company',
    'statusId': {
        'name': 'New',
        'id': 1,
        'isDeleted': 'N',
        'description': 'New'
    },
    'startDate': null,
    'endDate': null,
    'lastName': 'Search',
    'firstName': 'Search'
},
'eventId': {
    'URL': null,
    'location': null,
    'url': null,
    'id': 92,
    'type': {
        'name': 'govinda',
        'id': 20,
        'isDeleted': 'N',
        'description': 'desc'
    },
    'isDeleted': 'N',
    'followUp': null,
    'countryId': null,
    'budget': 0,
    'abteilung': {
        'id': 86,
        'isDeleted': null,
        'domainId': 0,
        'parentId': 85,
        'code': 'mailCa',
        'description': null
    },
    'startDate': 1337731200000,
    'endDate': 1338422400000,
    'prospectId': null,
    'person': null,
    'eventName': 'eeee-updated',
    'place': null,
    'description': null
}
}; 
```

然后使用：

```
...
data: yourData,
contentType: "application/json"
... 
```

# java - Struts 2 选择标签错误

> ID：13872239
> 
> 赞同：1
> 
> 时间：2012-12-14T03:29:58.913
> 
> 标签：java, jsp, struts2, jstl

我是 Struts2 的新手。我想比较一下JSTL的`c`标签和Struts2`s`标签哪个好用……我的代码如下

ListDepartmentNameAction.java

```
package actions;

import java.util.List;
import org.apache.log4j.Logger;
import org.hibernate.mapping.Array;
import com.opensymphony.xwork2.ActionSupport;
import service.ListDepNameService;

public class ListDepartmentNameAction extends ActionSupport{

private static Logger log = Logger.getLogger(ListDepartmentNameAction.class);
ListDepNameService listDepNameService;
private List<String> allDNlist ;

public String execute() {

    allDNlist = listDepNameService.ListAllDepName();
    for (String ss : allDNlist) {
        System.out.println(ss);
    }
    log.info(allDNlist);
    return "success";

}

public ListDepNameService getListDepNameService() {
    return listDepNameService;
}

public void setListDepNameService(ListDepNameService listDepNameService) {
    this.listDepNameService = listDepNameService;
}

public List<String> getAllDNlist() {
    return allDNlist;
}

public void setAllDNlist(List<String> allDNlist) {
    this.allDNlist = allDNlist;
}   
} 
```

查询.jsp

```
<%@ page language="java" import="java.util.*" contentType="text/html; charset=UTF-8"      pageEncoding="UTF-8" %>
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
    <head>
    <s:head />
      <h1 align="center" id="h1"></h1>
<body>

   <s:form action="listDepName" id="form" method="post">                
        <input name="Button" type="submit" id="listsubmit" value="List all Department Name" 
        onclick="javascirpt:abc(this)"/>                       
   </s:form>

   <select>
        <c:forEach items="${allDNlist}" var="item">
            <option value="abc" >${item}</option>
        </c:forEach>
   </select>

  <s:if test="%{allDNlist==null}">456</s:if>
  <s:else><s:select name="xxx" list="allDNlist" /></s:else> <!-- 1st -->

  <s:select name="xyz" list="allDNlist" /> <!-- 2nd -->

</body>
</html> 
```

"allDNlist" 可以从动作类中获取值，因此，JSTL c 标签可以正常工作。我不明白为什么“第一个”struts2 选择标签工作正常，但“第二个”选择`s`标签不起作用，并收到这样的消息

```
 HTTP Status 500 - tag 'select', field 'list', name 'xyz': The requested list key 'allDNlist' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location] 
```

即使我评论（）“2nd”select s标签，我仍然收到与上面相同的错误消息，只需将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T20:40:32.640

`<s:select:` 在使用标签填充下拉列表时，我遇到了类似类型的收集错误。经过研究，我发现在您的情况下“我没有初始化我的实例变量列表”`private List<String> allDNlist = new ArrayList<String>();`应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:49:20.790

编辑：

我复制了你的整个代码，它运行良好。

请注意，您没有关闭`</head>`标签，我也复制了它，它的工作原理相同......应该是

```
<head>
   <s:head/>
</head> 
```

您也应该将您的声明`ListDepNameService listDepNameService;`为私有（您已经拥有访问器），并检查返回的 List 类型。

我用

```
 allDNlist = new ArrayList<String>();
    allDNlist.add("Valore 1 ");
    allDNlist.add("Valore 2 ");
    allDNlist.add("Valore 3 "); 
```

在 execute() 方法中，这是唯一的区别。

请试试这个，而不是服务电话，让我知道...

# jquery - JQuery 已经（大部分）停止了在 Rails 上的工作——这应该归咎于资产管道吗？

> ID：13872243
> 
> 赞同：0
> 
> 时间：2012-12-14T03:30:26.513
> 
> 标签：jquery, ruby-on-rails, datatables, asset-pipeline

在[Railscast](http://railscasts.com/episodes/340-datatables)之后，我有了 DataTables，一个 JQuery 插件，在我的 Rails 3.2.9 应用程序中运行良好。

然后它突然停止工作。（也就是说，表格现在只是呈现为纯 HTML。）而且我不知道是什么更改导致了损坏，我无法弄清楚发生了什么。）你可以吗？

JQuery 似乎可以正常加载，因为我存储在 中的这个脚本`/app/assets/javascripts/nospam.js`正在执行它在 DataTables 失败的同一页面上应该执行的操作：

```
$(window).load(function() {
  $('#my-email').html(function(){
    var e = "steven";
    var a = "@";
    var d = "testivate";
    var c = ".com";
    var h = 'mailto:' + e + a + d + c;
    $(this).parent('a').attr('href', h);
    return e + a + d + c;
  });
}); 
```

当我在 Chrome 中加载页面并转到查看 > 开发人员 > JavaScript 控制台 > 控制台时，我看到`Uncaught TypeError: Object [object Object] has no method 'dataTable'`连接到`return`包含脚本中的行的错误：

```
(function() {
  jQuery(function() {
    return $('#areas').dataTable({
      bJQueryUI: true
    });
  });
}).call(this); 
```

资产管道似乎正在加载所有正确的文件，因为它生成：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Testivate</title>
    <!--[if lt IE 9]>
      <script src="/assets/html5shiv-printshiv.js?body=1" type="text/javascript"></script>
    <![endif]-->
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
    <script src="/assets/dataTables/jquery.dataTables.js?body=1" type="text/javascript"></script>
    <script src="/assets/areas.js?body=1" type="text/javascript"></script>
    <script src="/assets/assignments.js?body=1" type="text/javascript"></script>
    <script src="/assets/categories.js?body=1" type="text/javascript"></script>
    <script src="/assets/heuristics.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery.placeholder.min.js?body=1" type="text/javascript"></script>
    <script src="/assets/nospam.js?body=1" type="text/javascript"></script>
    <script src="/assets/reports.js?body=1" type="text/javascript"></script>
    <script src="/assets/application.js?body=1" type="text/javascript"></script>
    <link href="/assets/application.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/jquery.ui.core.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/jquery.ui.theme.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/dataTables/src/demo_table_jui.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/_base.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/ie.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/ie6.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/print.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/screen.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://fonts.googleapis.com/css?family=Rokkitt:400,700" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400" media="screen" rel="stylesheet" type="text/css" />
    <meta content="authenticity_token" name="csrf-param" />
    <meta content="Rss5Hf9sPcQQQRViXgEUfSxvYEshBukjV96gM5+cEYc=" name="csrf-token" />
    <meta content='jq8ezzUss-fo-h7ml8zmwSvdpmzJlbE6VjN7Dphcnp8' name='google-site-verification'>
  </head> 
```

从其他相关文件中选择的代码...

**/app/assets/javascripts/application.js**：

```
//= require jquery
//= require jquery_ujs
//= require dataTables/jquery.dataTables
//= require_tree . 
```

**/app/assets/javascripts/areas.js.coffee**：

```
jQuery ->
  $('#areas').dataTable
    bJQueryUI: true 
```

**/app/views/areas/index.html.haml**：

```
%table.display#areas
  %thead
    %tr
      %td Foo
      %td Bar
  %tbody
    %tr
      %td Foo
      %td Bar 
```

**宝石文件**：

```
gem "compass"
gem "sass"
gem "sass-rails"
gem "haml"
gem "haml-rails"
gem "susy"
gem "jquery-rails"
gem "html5shiv-rails"
gem "normalize-rails"

group :assets do
  gem "sass-rails"
  gem "coffee-rails"
  gem "compass-rails"
  gem "compass-susy-plugin"
  gem "fancy-buttons"
  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'
  gem "jquery-ui-rails"
  gem "uglifier"
end 
```

**/config/application.rb**：

```
if defined?(Bundler)
  Bundler.require *Rails.groups(:assets => %w(development test))
end

module Testivate
  class Application < Rails::Application
    config.assets.enabled = true
    config.assets.version = '1.0'
  end
end 
```

**/config/environments/development.rb**：

```
Testivate::Application.configure do
  config.assets.compress = false
  config.assets.debug = true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:34:17.613

问题确实出在资产管道上。它正在加载 JQuery 的两个副本，因为我已经预编译了资产以将它们推送到生产环境，但是预编译的版本在本地徘徊并与动态编译的版本一起提供。现在要弄清楚如何阻止这种情况的发生......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:44:50.580

在 Chrome 中使用相同的开发人员工具。单击网络并检查 /assets/dataTables/jquery.dataTables.js?body=1 是否正在加载。

# objective-c - 在 Objective-C 中的 iOS 6 上强制横向方向

> ID：13872244
> 
> 赞同：7
> 
> 时间：2012-12-14T03:30:36.493
> 
> 标签：objective-c, xcode, uinavigationcontroller, landscape

我有一个位于 UINavigationController 内的主视图控制器。在那个主视图控制器中，我有一个按钮可以推动一个内部有 UIWebView 的详细视图控制器。我希望这个细节视图控制器在加载时处于横向模式。回到主视图控制器，它又强制回到纵向模式。我正在运行 iOS 6。

我已经看到了其他类似的问题，但它对我没有用。我创建了一个 LandscapeViewController，它是 UIViewController 的子类，我在其中编写了这些方法：

```
#pragma mark - Orientation Methods
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

这是我推送详细视图控制器时的代码：

```
DetailViewController *detailVC = [[DetailViewController alloc]
                                      initWithNibName:@"DetailViewController"
                                      bundle:nil];

    [self.navigationController pushViewController:detailVC
                                         animated:YES]; 
```

我正在考虑在上面的代码中将我的 LandscapeViewController 子类化以使其工作或如何正确子类化和推送我的详细视图控制器。如果导航控制器无法将我的详细视图控制器从纵向推到横向，我也可以模态显示我的详细视图控制器。我在哪里做错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T13:56:02.527

考虑：视图 A：仅纵向 - 视图 B：仅横向

我无法在导航控制器中做到这一点。相反，我所做的是打开一个从视图 A 到视图 B 的模态视图，并强制一个新的导航控制器进入这个视图。

这在 iOS5+ 中对我有用。

您需要为导航控制器创建一个类别，如下所示：

**UINavigationController+Rotation_IOS6.h**

```
#import <UIKit/UIKit.h> 

@interface UINavigationController (Rotation_IOS6)

- (BOOL)shouldAutorotate;
- (NSUInteger)supportedInterfaceOrientations;
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation;

@end 
```

**UINavigationController+Rotation_IOS6.h**

```
#import "UINavigationController+Rotation_IOS6.h"

@implementation UINavigationController (Rotation_IOS6)

- (BOOL)shouldAutorotate
{
    return [self.topViewController shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [self.topViewController preferredInterfaceOrientationForPresentation];
}

@end 
```

在**AppDelegate.m**添加：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    return UIInterfaceOrientationMaskAll;
} 
```

然后在**视图 A**中：

```
- (BOOL)shouldAutorotate {
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

也在**视图 A 中打开视图 B**执行以下操作：

```
ViewB *vc = [[ViewB alloc] initWithNibName:@"ViewB" bundle:nil];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:vc];

[self presentViewController:navigationController animated:YES completion:nil]; 
```

最后，在**视图 B**

```
- (BOOL)shouldAutorotate {
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:37:05.307

他们在这方面有点搞砸了 iOS 6 中的狗。这是我到目前为止所知道的：

首先，Apple 在 Xcode 4.5 中添加了“支持的界面方向”按钮。这对应于 _info.plist 中的“支持的界面方向”属性。必须先将这些按钮切换到正确的选项，然后才能使用其余按钮。（如果按钮似乎拒绝切换，可能是因为 info.plist 被 CVS 或其他进程锁定。）

接下来，必须设置属性 .window.rootViewController，并且必须指向堆栈中的“底部”视图控制器。通常，这将是导航控制器或选项卡控制器。

如果希望禁用所有旋转，这可以使用按钮来完成，或者可以在“底部”视图控制器中实现“shouldAutorotate”方法并让它返回 NO。（如果省略该方法，则默认为 YES。）

尽管使用 shouldAutorotate 禁用了自动旋转，但如果显示 MPMoviePlayerViewController，它将自动旋转。只有切换受支持的界面方向按钮才会出现这种情况。

如果想要有条件地自动旋转其他视图控制器，它会变得更加混乱。基本上，您的“底部”视图控制器必须实现supportedInterfaceOrientations 方法并根据当前的topViewController 返回适当的位掩码。这可以通过查询 topViewController 的旧“shouldAutorotateToInterfaceOrientation”方法的例程来完成，但它有点难看。即使此方案不需要修改旋转视图控制器的代码，您也需要在旋转视图控制器“下方”修改 VC 以实现“supportedInterfaceOrientation”，否则该视图将在返回时旋转。（至少这是一个简单的复制/粘贴。）不过，似乎没有人想出更好、更通用的方案。

# php - mysqli 警告出现，指出我在列中有一个空值

> ID：13872247
> 
> 赞同：2
> 
> 时间：2012-12-14T03:31:07.137
> 
> 标签：php, mysqli

下面我有一个模块下拉菜单，它从数据库中获取模块列表，并且显然将它们显示在下拉菜单中。它还在`$output`变量中显示所选模块编号和模块名称，并在隐藏输入 ( `$hiddenoutput`) 中显示所选模块的模块 ID（当文本输入在更改为隐藏之前为文本时，这已成功发送文本）

```
$active = 1;

 $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("i",$active);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbModuleId, $dbModuleNo, $dbModuleName);

 $modules = array(); // easier if you don't use generic names for data 

 $output = ""; 
 $hiddenoutput = "";
 $moduleHTML = "";  
 $moduleHTML .= '<select name="module" id="modulesDrop">'.PHP_EOL;
 $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) 
 { 
     $moduleno = $dbModuleNo;
     $module = $dbModuleId;
     $modulename = $dbModuleName; 
     $moduleHTML .= "<option value='".$module."'>" . $moduleno . " - " . $modulename . "</option>".PHP_EOL;  

         if (isset($_POST['module']) && ($_POST['module'] == $module)) {
    $output .= "<p><strong>Selected Module:</strong> " . $moduleno .  " - "  . $modulename . "</p>";
    $hiddenoutput .= "<p><input type='hidden' id='hiddenoutput' name='hiddenmodule' value='". $module ."'></p>";
}
  } 

  $moduleHTML .= '</select>'; 

  $submittedModuleId = (isset($_POST['module'])) ? $_POST['module'] : '';
  $output = (isset($output)) ? $output : '';
  $hiddenoutput = (isset($hiddenoutput)) ? $hiddenoutput : ''; 
```

详细信息显示在以下表格中：

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table>
<tr>
<th>Module: <?php echo $moduleHTML; ?><input id="moduleSubmit" type="submit" value="Submit" name="submit" /></th>
</tr>
<tr>
<td><span id="errormsg"><?php echo $errormsg; ?></span><?php echo $hiddenoutput . $output; ?></td>
</tr>
</table>
</form> 
```

但我真正不明白的是，在我下面的 INSERT sql 中，它能够检索和插入除一个之外的所有值，即隐藏输入中显示的 Module Id 的值。它一直在说：

`Warning: mysqli_stmt::execute(): (23000/1048): Column 'ModuleId' cannot be null in ... on line 172`

我的问题是为什么它不能检索并在数据库中插入模块 ID 的值？下面是代码：

```
session_start();

if (isset($_POST['hiddenmodule'])) {

$_SESSION['hiddenmodule'] = $_POST['hiddenmodule'];

}

if (isset($_POST['id'])) {

$_SESSION['id'] = $_POST['id'];

}

if(isset($_POST['sessionNum'])){
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = $_POST['sessionNum'];

    }

if (!isset($_SESSION['sessionCount'])) {
    $_SESSION['sessionCount'] = 1;
}
else if ($_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    ++$_SESSION['sessionCount'];
}

$sessionMinus =  $_SESSION['sessionCount'];

if (isset($_POST['durationChosen'])) {

$_SESSION['durationChosen'] = $_POST['durationChosen'];

}

if (isset($_POST['dateChosen'])) {

$_SESSION['dateChosen'] = $_POST['dateChosen'];

}

if (isset($_POST['timeChosen'])) {

$_SESSION['timeChosen'] = $_POST['timeChosen'];

}

if (isset($_POST['textQuestion'])) {

$_SESSION['textQuestion'] = $_POST['textQuestion'];

}

if (isset($_POST['textMarks'])) {

$_SESSION['textMarks'] = $_POST['textMarks'];

}

if (isset($_POST['totalWeight'])) {

$_SESSION['totalWeight'] = $_POST['totalWeight'];

}

if (isset($_POST['buildings'])) {

$_SESSION['buildings'] = $_POST['buildings'];

}

if (isset($_POST['rooms'])) {

$_SESSION['rooms'] = $_POST['rooms'];

}

if (isset($_POST['teacherforename'])) {

$_SESSION['teacherforename'] = $_POST['teacherforename'];

}

if (isset($_POST['teachersurname'])) {

$_SESSION['teachersurname'] = $_POST['teachersurname'];

}

if (isset($_POST['teacherusername'])) {

$_SESSION['teacherusername'] = $_POST['teacherusername'];

}

var_dump($_POST);
var_dump($_SESSION);

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

$sql = "
  SELECT TeacherId
  FROM Teacher
  WHERE TeacherUsername = ?
";

if (!$stmt = $mysqli->prepare($sql)) {
  // Handle errors with prepare operation here
}

// Bind parameter for statement
$stmt->bind_param("s", $_SESSION['teacherusername']);

// Execute the statement
$stmt->execute();

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$stmt->bind_result($teacherid);

// This populates $teacherid
$stmt->fetch();

// Close the statment
$stmt->close();

if($_SERVER['REQUEST_METHOD'] == 'POST')

{

    $time = str_replace(array(' Hrs ', ' Mins ', ' Secs'), array(':', ':', ''), $_SESSION['durationChosen']);

    for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; $i++) {

            $insertsql = "
      INSERT INTO Session
        (SessionName, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room)
      VALUES
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
      // Handle errors with prepare operation here
    }

        $sessname = $_SESSION['id'] . ($n == 1 ? '' : $i);
        $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

        $insert->bind_param("sssisiiis", $sessname, $_SESSION['timeChosen'], $sessdate,
                     $_SESSION['totalWeight'], $time, $_SESSION['textMarks'],
                     $_SESSION['hiddenmodule'], $teacherid, $_SESSION['rooms']);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();

    }

} 
```

以下是`var_dump($_SESSION)`输出：

```
array(17) { 
["teacherid"]=> int(49) 
["teacherusername"]=> string(8) "u0867587" 
["teacherforename"]=> string(5) "Bruce" 
["teachersurname"]=> string(5) "Finch" 
["id"]=> string(5) "XNTLR" 
["initial_count"]=> string(1) "1" 
["sessionNum"]=> string(1) "1" 
["sessionCount"]=> int(1) 
["durationChosen"]=> string(22) "02 Hrs 00 Mins 00 Secs" 
["dateChosen"]=> string(10) "15-12-2012" 
["timeChosen"]=> string(5) "10:00" 
["textQuestion"]=> string(1) "1" 
["textMarks"]=> string(1) "5" 
["totalWeight"]=> string(1) "0" 
["buildings"]=> string(14) "Canalside East" 
["rooms"]=> string(7) "CE01/04" 
["hiddenmodule"]=> NULL } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:37:39.780

因为 hiddenmodule 没有发布。查看您的 var 转储。使用 firebug 检查表单以查看是否添加了此输入字段

# android - 在 onActivityResult 方法中获取捕获的图像

> ID：13872250
> 
> 赞同：1
> 
> 时间：2012-12-14T03:31:40.547
> 
> 标签：android, android-intent, android-activity, camera, android-camera

我对下面的代码有一点疑问

```
@Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

            startActivityForResult(i, 0);
        }

    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode==0 && resultCode==RESULT_OK ){

        Bundle extras = data.getExtras();
        //get the cropped bitmap
        Bitmap thePic = extras.getParcelable("data");

        ImageView image =(ImageView) findViewById(R.id.imageView1);
        image.setImageBitmap(thePic);

    }
} 
```

在 extras.getParcelable("data"); 此处的代码行“数据”作为可打包对象的键传递。

我的问题是，是否已经在类中定义了名称为“数据”的键？或如何接受的任何原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:39:41.963

将缩略图添加到`Intent`您收到的`onActivityResult(...)`. 它基本上使用as 键`Bitmap`为意图添加了一个值。`"data"`因此，可以尝试从返回的意图中按键获取该值。这在 Android 开发者网站上的[简单拍照教程](http://developer.android.com/training/camera/photobasics.html#TaskPhotoView)中也有演示：

```
Bundle extras = intent.getExtras();
mImageBitmap = (Bitmap) extras.get("data"); 
```

但是，根据经验，我可以说并非所有相机应用程序都尊重这种行为。我不会依赖 data 键实际存在，或者返回的意图 nog 就是`null`为此。

# asp.net - mod_rewrite 多个 ASPX url

> ID：13872259
> 
> 赞同：0
> 
> 时间：2012-12-14T03:32:18.320
> 
> 标签：asp.net, .htaccess, mod-rewrite, redirect, http-status-code-301

将电子商务商店从 windows aspx 服务器移动到 linux 上的新 cms。为了维护以前的站点地图，我需要将多个 aspx url 重定向到一个新的 aspx url。一个例子。

```
mysite.com/brand-material-style-large-blue.aspx  
mysite.com/brand-material-style-large-red.aspx  
mysite.com/brand-material-style-med-blue.aspx 
```

都需要重定向到 mysite.com/brand-material-style.aspx

我已经尝试过，但无法让重写工作。这是我现在拥有的：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} brand-material-style(.+)\.aspx [NC]
RewriteRule ^brand-material-style(.+)$ http://www.mysite.com/brand-material-style.aspx [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:51:14.933

为什么不是简单的重定向？

```
RedirectMatch (.*)/brand-material-style(.+)\.aspx$ http://www.mysite.com/brand-material-style.aspx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:57:39.100

我认为您不需要 RewriteRule ...

```
RedirectMatch (.*)/brand-material-style(.+)\.aspx$ /brand-material-style.aspx [R=301,L] 
```

您也不需要指定完整的 URL，只需指定文件的路径。并且不要忘记添加您的属性（用于 301 合规性等）

# algorithm - 如何以编程方式解决 y = (a1 * x1) + (a2 * x2) + .... + (a28 * x28) 其中 y 和 a1, a2 ....a28 是已知的？

> ID：13872264
> 
> 赞同：0
> 
> 时间：2012-12-14T03:33:18.950
> 
> 标签：algorithm, math

我试图用 28 个变量求解这个方程：

y = (a1 * x1) + (a2 * x2) + .... + (a28 * x28)

1) y 是已知的，a1、a2 一直到 a28 也是已知的。

2) x1, x2 ..... x28 是未知变量，它们在 [-4, 4] 范围内，增量为 0.1。

有人能解释一下我困惑的大脑，什么算法在这里使用最有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:44:55.587

这等效于整数线性规划，尽管由于只有一个具有 28 个简单约束（边界，而不是方程组）的方程，您可能会做得更好。一般来说，这将是 NP 难的（请参阅[https://en.wikipedia.org/wiki/Linear_programming#Integer_unknowns](https://en.wikipedia.org/wiki/Linear_programming#Integer_unknowns)），但您可能可以使用几种实现（例如，请参阅[如何选择整数线性编程求解器？](https://stackoverflow.com/questions/2791559/how-to-choose-an-integer-linear-programming-solver)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:29:28.957

您可以在 prolog 中对其进行编程（SICStus prolog 引擎，例如 Eclipse 上的 SPIDER IDE）。这个问题是状态空间搜索问题。并使用 clpfd 库（有限域上的约束逻辑编程）。然后你只做一个约束，X1 到 X28 将是域变量并给定约束 y #= a1*X1 + ... + a28*X28。优化状态空间搜索的方法也很少。

/edit：或者你可以尝试用任何命令式语言来做。还使用一些启发式方法 - 例如，选择一些执行点，您可以在其中检查当前结果（例如，您有一些 tmp.sum 并且您已经从 28 个值中计算了 15 个。如果 y 减去 temp sum 小于 MIN_VARIABLE_VALUE * i，其中 i 是索引，x_i 属于剩余变量，你可以放心地决定，你不会继续，bcs。你不能得到平等）。这个启发式首先出现在我的脑海中。在此使用也可以使用一些替换。但是应该对一些测试数据进行“研究”它的效率如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:51:12.250

首先，将所有内容乘以 10，这样您就可以继续进行整数数学运算。同样在两边加上 sum(40*a_u) 会将 x_i 的范围更改为 [0,80]

其次，答案可能呈指数级，因此您的算法必须花费指数级时间。

鉴于有 80^28（大约 2^177）个可能的答案 - 这通常是不可能的。

现在如果 x_i 的范围是 [0,1]（而不是 [0,80]）并且我们添加一个等于 y 的额外项（并将 y 更改为 0），那么问题就变成了找到集合的子集加起来为零的整数。这是一个众所周知的 NP 完全问题，它似乎比你的更容易（尽管我没有明确的减少）。

可能有动态编程解决方案，但可能太慢了：

```
set<float> X;

X.insert(0)

for i = 1 to 28
    for f = -4.0 to 4.0 step 0.1
        for x in X
            X.insert(x + a_i * f)

for x in X
    if (x == y)
        return true;

return false; 
```

您可以通过传回可行范围（[y + a_i*(-4.0), y + a_i*4.0]）并在这些范围之外修剪不可行的部分解决方案来做得更好。

# php - 如何在不将用户留在页面上的情况下从 PHP 执行 PHP 脚本？

> ID：13872265
> 
> 赞同：0
> 
> 时间：2012-12-14T03:33:28.337
> 
> 标签：php

我有一个脚本来处理发送电子邮件。可能有数千封电子邮件要发送。我想向用户显示一个页面，上面写着“正在发送您的消息。”，但我不希望该页面实际发送消息，因为我不希望用户在脚本完成之前看到一个空白页，我也不希望用户必须等待脚本完成。

我想将一个 ID 列表传递给另一个 PHP 页面（让我们称之为 run.php）并让它在没有用户实际访问的情况下执行。因此，我会将 ID 传递给开始执行的页面，然后完成加载显示消息“您的消息正在发送。”的当前页面。

```
<?php
/* SESSION DATA HERE */
executeMailSend($ids);
?>
<html>
<head>
....
</head>
<body>
Your messages are being sent.
</body>
</html> 
```

我想我可以使用 ajax 来做这样的事情，但我不希望这依赖于客户端编码。

此外，如果可能的话，我需要让脚本在后台运行，以保留启动它的会话中的会话数据，并且我希望不必将此数据作为单独的变量传递。

另外，我不想使用像 exec() 或 system() 这样的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:36:37.437

利用 AJAX 的力量获取更多信息，查看 w3schools.com 提供的本教程

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T03:46:03.863

cron 作业是一种选择。您可以通过在数据库中实现一个队列来做到这一点，您只需为要发送的邮件添加条目，cron 作业会处理这些条目。但也许在走这条路之前先读一下：[http ://www.engineyard.com/blog/2011/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-你/](http://www.engineyard.com/blog/2011/5-subtle-ways-youre-using-mysql-as-a-queue-and-why-itll-bite-you/)

如果您使用 cron 作业，您将在某处实现队列（平面文件...blech、MySQL、其他数据库等）

为什么不使用实际用于排队的东西？例如，您可以使用亚马逊 (http://aws.amazon.com/sqs/)。但是，无论您使用什么软件/提供商，这听起来最好有适当的工作排队。您希望用户转到一个页面，该页面会将一些工作项添加到您的队列中（在这种情况下是电子邮件地址，可能是消息，具体取决于您正在做什么）。然后队列软件应该有一些方法来处理这些工作（即实际发送电子邮件）。

您说您不想传递变量，但您可能必须将每个作业所需的任何数据发送到您的队列。您可能会在数据库中存储额外的数据，只需考虑锁定和性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T03:39:06.670

您可以让您的脚本将该电子邮件添加到“电子邮件查询”并安排一个 cron 作业来发送电子邮件。我认为没有其他方法可以异步调用 php 脚本。

也许这可以为您指明正确的方向：[http ://blog.markturansky.com/archives/205](http://blog.markturansky.com/archives/205)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T03:39:07.603

如果您可以使用 linux 机器；你可以使用一个叫做 Cronjobs 的东西。

您可以使用它自己的数据库表创建一个单独的脚本，以供参考。

在设定的时间间隔内，它通过 linux CLI for PHP 运行 PHP 并执行脚本，无需用户在页面上。数据库需要正确配置。

唯一的问题是 cronjobs，所有输出都通过电子邮件发送到管理电子邮件（`/etc/aliases`

Cronjob 输入示例：

```
nano /etc/crontab

* * * * *  root /usr/bin/php /var/www/cron.php 
```

在您的 cron.php 上，您将有一个特定功能的脚本设置，在这种情况下。电子邮件用户。

[http://www.thegeekstuff.com/2011/07/php-cron-job/](http://www.thegeekstuff.com/2011/07/php-cron-job/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T03:57:57.780

我想我将不得不坚持我以前使用过的脚本的当前选项。我希望找到更好的选择，但这是我要使用的代码：

```
function backgroundPost($url){
    $parts=parse_url($url);
    $fp = fsockopen($parts['host'], isset($parts['port'])?$parts['port']:80, $errno, $errstr, 30);

    if (!$fp) {
        return false;
    } else {
        $out = "POST ".$parts['path']." HTTP/1.1\r\n";
        $out.= "Host: ".$parts['host']."\r\n";
        $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
        $out.= "Content-Length: ".strlen($parts['query'])."\r\n";
        $out.= "Connection: Close\r\n\r\n";
        if (isset($parts['query'])) $out.= $parts['query'];

        fwrite($fp, $out);
        fclose($fp);
        return true;
    }
}

backgroundPost($siteURL.'/run.php?ids='.urlencode($ids).'&sessiondata='.urlencode($sessiondata)); 
```

有人看到使用这个有问题吗？安全性、错误代码等？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T05:11:52.407

你在Linux服务器上吗？您可以 fork() 脚本（在 PHP 中）然后守护子进程，将其分离，以便在初始化 HTTP 请求完成后继续运行。只要确保正确杀死子进程即可。

[http://www.re-cycledair.com/php-dark-arts-daemonizing-a-process](http://www.re-cycledair.com/php-dark-arts-daemonizing-a-process)

# python - 我如何使用scrapy提取带有一些文本匹配的链接

> ID：13872266
> 
> 赞同：1
> 
> 时间：2012-12-14T03:33:30.677
> 
> 标签：python, scrapy

我想关注文本中有 Next 的那些链接，例如

```
<div id="pagination"
<a href="#" > 1 </a>
<a href="#" > 2 </a>
<a href="#" > 3 </a>
<a href="#" > Next </a>
</div> 
```

我怎么能做到这一点，我scrapy。它也是最后的选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:41:52.553

创建一个扩展`BaseSgmlLinkExtractor`并提供`process_value`可调用的类，如[文档中所示](http://doc.scrapy.org/en/latest/topics/link-extractors.html#basesgmllinkextractor)

# android - 当我的应用程序处于后台时，Android 操作系统会破坏 Application 类或 AlarmManager 类吗？

> ID：13872270
> 
> 赞同：0
> 
> 时间：2012-12-14T03:34:41.380
> 
> 标签：android

我有一个`AlarmManager`班级，一个简单的班级，一个`Application`班级和其他一些班级。简单类被调用`AlarmManager`，然后简单类在类的帮助下尝试实现目标`Application`。我的应用程序是否在后台无关紧要；我需要确保这三个类是活着的。

现在，我的问题是：**如果我的应用程序在后台****，Android 操作系统会销毁这三个类（`AlarmManager`类、简单类、类）吗？`Application`**如果答案是肯定的，那么我应该使用`Service`吗？如果我使用`Service`，我应该如何用这三个类来实现它？

**编辑：**

我正在尝试在特定时间使用 facebook sdk 发布状态。因此，`Alarm Manager`该类将在特定时间调用简单类。然后简单类将从类中获取一些数据（如会话、消息）`Application`，然后简单类会将消息发布到用户的墙上。

会话、消息等存储在`Application`其他活动类的类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:51:37.640

为了清楚起见，我可能想显示一些代码。您可能没有，但注册了一些要通过创建 a并将其传递给*系统*`AlarmManager`来调用的组件。如果这个假设是正确的，如果你的应用程序在触发警报时没有运行（它没有实时进程），Android 将创建一个。并在此过程中加载并实例化组件中使用的所有类。如果您的应用程序在后台（进程仍然存在，“缓存”），Android 将重用该进程并调用必要的组件。`PendingIntent`*`AlarmManager`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:10:26.017

一段时间不活动后，Android 将销毁所有（让我在这里将其命名为“应用程序”）。这包括活动对象和服务。唯一存在的是定义为前台服务的服务（在较新版本的 Android 中将需要通知图像，因此无法完全隐藏它）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T04:24:34.183

一个 Activity 在后台（通过用户单击 Home 或系统调用另一个 Activity），它会出现 onPause()，并且它不会继续运行，这意味着如果您的 Activity 正在上传图像 -> 暂停上传。如果系统缺少 RAM 等资源，系统会自动销毁您的活动。因此，如果您想进行下载、上传等长时间的操作，您应该使用该服务。

或者如果你想通过Activity下载，你可以在onPause()中保存下载状态或类似的东西，并在onResume()中恢复下载。但在您恢复活动之前，下载过程不会运行。*

# android - 自定义键盘键文本阴影删除

> ID：13872271
> 
> 赞同：5
> 
> 时间：2012-12-14T03:34:48.683
> 
> 标签：android, background, keyboard, preview, android-keypad

我已经使用了 sdk 中的自定义键盘应用程序并根据我的要求对其进行了修改，但我无法修改两件事

1.  从键盘上每个键的键文本中删除阴影。因为我在 xml 布局中没有找到任何可以使用的属性

2.  我已经为 keyopreview 使用了自定义布局，这是当我们按下键盘上的任何键时显示的弹出窗口，但我不想显示某些特定键的预览，例如空格、回车、移位、后退等。所以我怎么能删除 keypriview只有那些键..

![在此处输入图像描述](../Images/e516402e6c32d06cfa1e318660291e8e.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-21T21:53:18.220

好吧，我找到了答案。

好在键盘视图xml放`android:shadowRadius="0.0"`

```
<?xml version="1.0" encoding="utf-8"?>
<android.inputmethodservice.KeyboardView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard_view"
    ...
    android:shadowRadius="0.0" /> 
```

# asp.net-mvc - 使用 ASP.NET MVC 4 在 OpenXML SDK 中流式传输 Word Doc 会导致文档损坏

> ID：13872272
> 
> 赞同：0
> 
> 时间：2012-12-14T03:34:50.293
> 
> 标签：asp.net-mvc, ms-word, openxml-sdk

我正在尝试在 ASP.NET MVC 4 上执行此操作：

```
MemoryStream mem = new MemoryStream();
        using (WordprocessingDocument wordDoc =
            WordprocessingDocument.Create(mem, DocumentFormat.OpenXml.WordprocessingDocumentType.Document, true))
        {
            // instantiate the members of the hierarchy
            Document doc = new Document();
            Body body = new Body();
            Paragraph para = new Paragraph();
            Run run = new Run();
            Text text = new Text() { Text = "The OpenXML SDK rocks!" };

            // put the hierarchy together
            run.Append(text);
            para.Append(run);
            body.Append(para);
            doc.Append(body);

            //wordDoc.Close();

            ///wordDoc.Save();
        }

return File(mem.ToArray(), "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "ABC.docx"); 
```

但是 ABC.docx 打开时已损坏，即使修复后也无法打开。

有任何想法吗？

链接问题：

[使用带有 ASP.NET 的 OpenXML SDK 在内存 Word 文档中流式传输会导致“损坏”文档](https://stackoverflow.com/questions/10667513/streaming-in-memory-word-document-using-openxml-sdk-w-asp-net-results-in-corrup?lq=1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T07:24:09.093

显然问题来自缺少这 2 行：

```
wordDoc.AddMainDocumentPart();
wordDoc.MainDocumentPart.Document = doc; 
```

将代码更新到下面，它现在可以完美运行，即使不需要任何额外的冲洗等。

```
MemoryStream mem = new MemoryStream();
        using (WordprocessingDocument wordDoc =
            WordprocessingDocument.Create(mem, DocumentFormat.OpenXml.WordprocessingDocumentType.Document, true))
        {
            wordDoc.AddMainDocumentPart();
            // instantiate the members of the hierarchy
            Document doc = new Document();
            Body body = new Body();
            Paragraph para = new Paragraph();
            Run run = new Run();
            Text text = new Text() { Text = "The OpenXML SDK rocks!" };

            // put the hierarchy together
            run.Append(text);
            para.Append(run);
            body.Append(para);
            doc.Append(body);
            wordDoc.MainDocumentPart.Document = doc;
            wordDoc.Close();
        }
return File(mem.ToArray(), "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "ABC.docx"); 
```

# rest - API 分页最佳实践

> ID：13872273
> 
> 赞同：319
> 
> 时间：2012-12-14T03:34:53.097
> 
> 标签：rest, pagination, api-design

我想要一些帮助来处理我正在构建的分页 API 的奇怪边缘情况。

像许多 API 一样，这个 API 对大型结果进行了分页。如果您查询/foos，您将获得100 个结果（即foo #1-100），以及一个指向/foos?page=2 的链接，它应该返回foo #101-200。

不幸的是，如果 foo #10 在 API 使用者进行下一次查询之前从数据集中删除，/foos?page=2 将偏移 100 并返回 foos #102-201。

对于试图拉取所有 foo 的 API 使用者来说，这是一个问题——他们不会收到 foo #101。

处理这个问题的最佳做法是什么？我们希望使其尽可能轻量级（即避免处理 API 请求的会话）。来自其他 API 的示例将不胜感激！

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-12-16T21:12:53.993

我不完全确定您的数据是如何处理的，所以这可能有效也可能无效，但是您是否考虑过使用时间戳字段进行分页？

当您查询 /foos 时，您会得到 100 个结果。然后，您的 API 应该返回类似这样的内容（假设为 JSON，但如果它需要 XML，则可以遵循相同的原则）：

```
{
    "data" : [
        {  data item 1 with all relevant fields    },
        {  data item 2   },
        ...
        {  data item 100 }
    ],
    "paging":  {
        "previous":  "http://api.example.com/foo?since=TIMESTAMP1" 
        "next":  "http://api.example.com/foo?since=TIMESTAMP2"
    }

} 
```

请注意，仅使用一个时间戳依赖于结果中的隐式“限制”。您可能想要添加显式限制或还使用`until`属性。

时间戳可以使用列表中的最后一个数据项动态确定。这似乎或多或少是 Facebook 在其[Graph API](https://graph.facebook.com/cocacola/photos)中分页的方式（向下滚动到底部以查看我上面给出的格式的分页链接）。

一个问题可能是您添加了一个数据项，但根据您的描述，听起来它们会被添加到最后（如果没有，请告诉我，我会看看是否可以改进）。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-16T21:21:52.570

如果您有分页，您还可以按某个键对数据进行排序。为什么不让 API 客户端在 URL 中包含先前返回的集合的最后一个元素的键，`WHERE`并向您的 SQL 查询（或等效的东西，如果您不使用 SQL）添加一个子句，以便它只返回那些元素关键是大于这个值？

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-12-18T21:27:29.200

你有几个问题。

首先，你有你引用的例子。

如果插入行，您也会遇到类似的问题，但在这种情况下，用户会得到重复的数据（可以说比丢失数据更容易管理，但仍然是一个问题）。

如果您没有对原始数据集进行快照，那么这只是生活中的事实。

您可以让用户制作显式快照：

```
POST /createquery
filter.firstName=Bob&filter.lastName=Eubanks 
```

结果：

```
HTTP/1.1 301 Here's your query
Location: http://www.example.org/query/12345 
```

然后你可以整天翻页，因为它现在是静态的。这可以是相当轻的重量，因为您可以只捕获实际的文档键而不是整行。

如果用例只是您的用户想要（并且需要）所有数据，那么您可以简单地将其提供给他们：

```
GET /query/12345?all=true 
```

只需发送整个套件。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-01-20T10:16:16.617

根据您的服务器端逻辑，可能有两种方法。

**方法 1：当服务器不够智能以处理对象状态时。**

您可以将所有缓存的记录唯一 ID 发送到服务器，例如 ["id1","id2","id3","id4","id5","id6","id7","id8","id9", "id10"] 和一个布尔参数，用于了解您是在请求新记录（拉动刷新）还是旧记录（加载更多）。

您的服务器应负责返回新记录（通过拉取刷新加载更多记录或新记录）以及来自 ["id1","id2","id3","id4","id5"," 的已删除记录的 ID id6","id7","id8","id9","id10"]。

**示例：-** 如果您请求负载更多，那么您的请求应如下所示：-

```
{
        "isRefresh" : false,
        "cached" : ["id1","id2","id3","id4","id5","id6","id7","id8","id9","id10"]
} 
```

现在假设您正在请求旧记录（加载更多）并假设“id2”记录已由某人更新，并且“id5”和“id8”记录已从服务器中删除，那么您的服务器响应应如下所示：-

```
{
        "records" : [
{"id" :"id2","more_key":"updated_value"},
{"id" :"id11","more_key":"more_value"},
{"id" :"id12","more_key":"more_value"},
{"id" :"id13","more_key":"more_value"},
{"id" :"id14","more_key":"more_value"},
{"id" :"id15","more_key":"more_value"},
{"id" :"id16","more_key":"more_value"},
{"id" :"id17","more_key":"more_value"},
{"id" :"id18","more_key":"more_value"},
{"id" :"id19","more_key":"more_value"},
{"id" :"id20","more_key":"more_value"}],
        "deleted" : ["id5","id8"]
} 
```

但是在这种情况下，如果您有很多本地缓存记录假设为 500，那么您的请求字符串将像这样太长：-

```
{
        "isRefresh" : false,
        "cached" : ["id1","id2","id3","id4","id5","id6","id7","id8","id9","id10",………,"id500"]//Too long request
} 
```

**方法 2：当服务器足够智能以根据日期处理对象状态时。**

您可以发送第一条记录的 id 和最后一条记录以及上一个请求纪元时间。这样，即使您有大量缓存记录，您的请求也总是很小

**示例：-** 如果您请求负载更多，那么您的请求应如下所示：-

```
{
        "isRefresh" : false,
        "firstId" : "id1",
        "lastId" : "id10",
        "last_request_time" : 1421748005
} 
```

您的服务器负责返回在 last_request_time 之后删除的已删除记录的 id 以及在 "id1" 和 "id10" 之间的 last_request_time 之后返回更新的记录。

```
{
        "records" : [
{"id" :"id2","more_key":"updated_value"},
{"id" :"id11","more_key":"more_value"},
{"id" :"id12","more_key":"more_value"},
{"id" :"id13","more_key":"more_value"},
{"id" :"id14","more_key":"more_value"},
{"id" :"id15","more_key":"more_value"},
{"id" :"id16","more_key":"more_value"},
{"id" :"id17","more_key":"more_value"},
{"id" :"id18","more_key":"more_value"},
{"id" :"id19","more_key":"more_value"},
{"id" :"id20","more_key":"more_value"}],
        "deleted" : ["id5","id8"]
} 
```

拉动刷新：-

![在此处输入图像描述](../Images/c454667cf5944de46e0096cf4140f294.png)

装载更多

![在此处输入图像描述](../Images/53c367e2fbfb6316e2abe3122a90356b.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-12-16T21:29:17.473

可能很难找到最佳实践，因为大多数具有 API 的系统不适应这种情况，因为这是一种极端的优势，或者它们通常不会删除记录（Facebook、Twitter）。Facebook 实际上表示，由于分页后进行的过滤，每个“页面”可能没有请求的结果数量。 [https://developers.facebook.com/blog/post/478/](https://developers.facebook.com/blog/post/478/)

如果你真的需要适应这种边缘情况，你需要“记住”你离开的地方。jandjorgensen 的建议几乎是正确的，但我会使用一个像主键一样保证是唯一的字段。您可能需要使用多个字段。

按照 Facebook 的流程，您可以（并且应该）缓存已经请求的页面，如果他们请求他们已经请求的页面，则只返回那些过滤了已删除行的页面。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-12-20T12:02:01.740

**选项 A：带时间戳的键集分页**

为了避免您提到的偏移分页的缺点，您可以使用基于键集的分页。通常，实体有一个时间戳，说明它们的创建或修改时间。此时间戳可用于分页：只需将最后一个元素的时间戳作为下一个请求的查询参数传递即可。反过来，服务器使用时间戳作为过滤标准（例如`WHERE modificationDate >= receivedTimestampParameter`）

```
{
    "elements": [
        {"data": "data", "modificationDate": 1512757070}
        {"data": "data", "modificationDate": 1512757071}
        {"data": "data", "modificationDate": 1512757072}
    ],
    "pagination": {
        "lastModificationDate": 1512757072,
        "nextPage": "https://domain.de/api/elements?modifiedSince=1512757072"
    }
} 
```

这样，您就不会错过任何元素。这种方法对于许多用例来说应该足够好了。但是，请记住以下几点：

*   当单个页面的所有元素都具有相同的时间戳时，您可能会遇到无限循环。
*   当具有相同时间戳的元素重叠两个页面时，您可能会多次向客户端交付许多元素。

您可以通过增加页面大小和使用毫秒精度的时间戳来减少这些缺点。

**选项 B：使用延续令牌的扩展键集分页**

要处理上述常规键集分页的缺点，您可以向时间戳添加偏移量并使用所谓的“继续令牌”或“光标”。偏移量是元素相对于具有相同时间戳的第一个元素的位置。通常，令牌的格式类似于`Timestamp_Offset`. 它在响应中传递给客户端，并且可以提交回服务器以检索下一页。

```
{
    "elements": [
        {"data": "data", "modificationDate": 1512757070}
        {"data": "data", "modificationDate": 1512757072}
        {"data": "data", "modificationDate": 1512757072}
    ],
    "pagination": {
        "continuationToken": "1512757072_2",
        "nextPage": "https://domain.de/api/elements?continuationToken=1512757072_2"
    }
} 
```

标记“1512757072_2”指向页面的最后一个元素，并声明“客户端已经获得了时间戳为 1512757072 的第二个元素”。这样，服务器就知道从哪里继续。

请注意，您必须处理元素在两个请求之间发生更改的情况。这通常通过向令牌添加校验和来完成。此校验和是根据具有此时间戳的所有元素的 ID 计算的。所以我们最终得到了这样的令牌格式：`Timestamp_Offset_Checksum`.

有关此方法的更多信息，请查看博客文章“ [Web API Pagination with Continuation Tokens](https://blog.philipphauer.de/web-api-pagination-continuation-token/) ”。这种方法的一个缺点是实现起来很棘手，因为必须考虑许多极端情况。这就是为什么像[continuation-token](https://github.com/spreadshirt/continuation-token)这样的库可以派上用场的原因（如果您使用的是 Java/JVM 语言）。免责声明：我是这篇文章的作者和图书馆的合著者。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-07-29T19:25:10.253

分页通常是“用户”操作，为了防止计算机和人脑过载，您通常会给出一个子集。然而，与其认为我们没有得到完整的清单，不如问问*这有关系吗？*

如果需要准确的实时滚动视图，本质上是请求/响应的 REST API 不太适合此目的。为此，您应该考虑使用 WebSockets 或 HTML5 服务器发送事件，让您的前端在处理更改时知道。

现在，如果*需要*获取数据的快照，我只需提供一个 API 调用，在一个请求中提供所有数据，而无需分页。请注意，如果您有一个大型数据集，您将需要一些可以在不临时将其加载到内存中的情况下对输出进行流式传输的东西。

就我而言，我隐含地指定了一些 API 调用以允许获取整个信息（主要是参考表数据）。您还可以保护这些 API，使其不会损害您的系统。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-04-02T17:35:51.080

只是为了补充 Kamilk 的答案：[https ://www.stackoverflow.com/a/13905589](https://www.stackoverflow.com/a/13905589)

> 很大程度上取决于您正在处理的数据集有多大。小型数据集在**偏移分页**上确实有效，但大型实时数据集确实需要**光标分页。**
> 
> 找到一篇精彩的文章，关于**Slack**如何随着数据集的增加而演变其 api 的分页，解释了每个阶段的正面和负面：[https ://slack.engineering/evolving-api-pagination-at-slack-1c1f644f8e12](https://slack.engineering/evolving-api-pagination-at-slack-1c1f644f8e12)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-02-05T11:16:37.673

我认为目前您的 api 实际上正在以应有的方式响应。页面上的前 100 条记录，按您要维护的对象的总体顺序。您的解释告诉您正在使用某种排序 ID 来定义对象的分页顺序。

现在，如果您希望第 2 页始终从 101 开始并以 200 结束，那么您必须将页面上的条目数设为可变，因为它们可能会被删除。

您应该执行类似以下伪代码的操作：

```
page_max = 100
def get_page_results(page_no) :

    start = (page_no - 1) * page_max + 1
    end = page_no * page_max

    return fetch_results_by_id_between(start, end) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-04-04T23:58:25.513

我对此进行了长期而艰苦的思考，最终得出了我将在下面描述的解决方案。这是复杂性上的一大步，但如果你确实做了这一步，你最终会得到你真正追求的东西，这是未来请求的确定性结果。

您删除项目的示例只是冰山一角。如果您正在过滤，`color=blue`但有人在请求之间更改了项目颜色怎么办？以分页方式可靠地获取所有项目是*不可能*的......除非......我们实施**修订历史**。

我已经实现了它，它实际上没有我预期的那么困难。这是我所做的：

*   我创建了一个`changelogs`带有自动递增 ID 列的表
*   我的实体有一个`id`字段，但这不是主键
*   实体有一个`changeId`字段，它既是主键，也是变更日志的外键。
*   每当用户创建、更新或删除记录时，系统都会在 中插入新记录`changelogs`，获取 id 并将其分配给实体的**新**版本，然后将其插入数据库
*   我的查询选择最大 changeId（按 id 分组）并自行加入以获取所有记录的最新版本。
*   过滤器应用于最近的记录
*   状态字段跟踪项目是否被删除
*   最大changeId返回给客户端，在后续请求中作为查询参数添加
*   因为只创建了新的更改，所以每一个都`changeId`代表了创建更改时底层数据的唯一快照。
*   这意味着您可以`changeId`永久缓存具有参数的请求的结果。结果永远不会过期，因为它们永远不会改变。
*   这也开启了令人兴奋的功能，例如回滚/还原、同步客户端缓存等。任何受益于更改历史的功能。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-12-30T12:41:01.190

参考[API分页设计，我们可以通过](https://solovyov.net/blog/2020/api-pagination-design/)**光标**设计分页api

 **> 他们有这个概念，称为游标——它是指向行的指针。所以你可以对数据库说“在那之后返回我 100 行”。而且数据库更容易做到这一点，因为您很有可能通过具有索引的字段来识别行。突然之间，您无需获取和跳过这些行，您将直接越过它们。一个例子：

```
 GET /api/products
  {"items": [...100 products],
   "cursor": "qWe"} 
```

> API 返回一个（不透明的）字符串，然后您可以使用它来检索下一页：

```
GET /api/products?cursor=qWe
{"items": [...100 products],
 "cursor": "qWr"} 
```

> 实施方面有很多选择。通常，您有一些订购标准，例如产品 ID。在这种情况下，您将使用一些可逆算法（比如说 ）对您的产品 ID 进行编码`hashids`。并且在接收到带有光标的请求时，您对其进行解码并生成类似`WHERE id > :cursor LIMIT 100`.

优势：

*   db的查询性能可以通过`cursor`
*   在查询时将新内容插入数据库时​​处理得当

坏处：

*   `previous page`使用无状态 API生成链接是不可能的

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-12-26T11:14:40.470

RESTFul API 中分页的另一种选择是使用[此处](https://www.rfc-editor.org/rfc/rfc5988#page-6)介绍的 Link 标头。例如 Github[使用它](https://developer.github.com/v3/#pagination)如下：

```
Link: <https://api.github.com/user/repos?page=3&per_page=100>; rel="next",
  <https://api.github.com/user/repos?page=50&per_page=100>; rel="last" 
```

的可能值为`rel`：*first、last、next、previous*。但是通过使用`Link`header，可能无法指定*total_count*（元素总数）。**

# jquery - 如何使用 jQuery 在现有 div 上浮动图标

> ID：13872284
> 
> 赞同：1
> 
> 时间：2012-12-14T03:37:18.227
> 
> 标签：jquery, css

我有一个现有的 div。我想在这个 div 上添加一些小图像图标（如问号 png 图标），但我会将它直接浮动在以下任一位置的 div 角落上方（但仍在 div 区域内）：

右上 左上 左下 右下

一个条件是它永远不会改变现有的 div（布局、边距、样式等没有变化）。图标只会浮在上面。我正在尝试对图像使用 padding-left 属性，但它破坏了现有 div 的布局。即使图标漂浮在它们上方，我也希望它们保持不变。有没有使用 jQuery 或 CSS 的简单方法？

感谢您分享提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:44:42.933

你可以试试：

***HTML***

```
<div class="target" style="position:relative;height:200px;width:200px;background: #ccc;margin: 25px">
    Target div
</div> 
```

***jQuery***

```
$('.target').append('<img src="http://www3.emersonprocess.com/rosemount/wirelessestimator/App_Themes/Basic/images/questionmark_icon.gif" style="position:absolute; top: -20px; right: -12px">');​ 
```

***[演示](http://jsfiddle.net/rAF3r/1/)***

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:48:53.827

要制作您想要的东西，您可以使用 CSS。假设您的 4 s 在 div 中，您可以通过两种方式进行操作：

*   将 CSS 样式 position: relative 放在 DIV 上，并将 position: absolute 放在每个 . 然后，对于 each ，您可以使用 CSS 位置规则，例如**top、bottom、left、right**来放置您的元素

例子：

```
<div style="position: relative; width: 100px; height: 100px">
    <img src="your_file" style="position: absolute; left: 0; top: 0; width: 10px; height: 10px;">
    ....other <img> with different position...
</div> 
```

*   使用 s 上的浮动 CSS 属性（**左、右**）将它们放在 .

# libpng - 为什么将 RGBA 图像转换为 RGB 时会留下斑点？

> ID：13872287
> 
> 赞同：2
> 
> 时间：2012-12-14T03:37:42.430
> 
> 标签：libpng

我使用 libpng 将 png (RGBA) 转换为 jpeg (RGB) 来解码 png 文件并应用 png_set_strip_alpha 来忽略 alpha 通道。但是转换后的输出图像有很多斑点。我认为原因是原始图像具有 alpha 为 0 的区域，无论其 RGB 值如何，它都会隐藏像素。当我剥离 alpha（即设置 alpha = 1）时，像素显示。所以我认为只使用 png_set_strip_alpha 不是正确的解决方案。我应该自己编写一个方法，还是已经有办法在 libpng 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T18:22:46.837

没有办法。如果您放弃 alpha 通道，libpng 将为您提供原始 RGB 通道，这将“发现”以前不可见的颜色。

您应该加载 RGBA 图像并自己将其转换为 RGB。最简单的方法是将 RGB 值乘以 alpha。

这会将 RGBA 位图就地转换为 RGB：

```
for(int i=0; i < width*height; i++) {
   int r = bitmap[i*4+0],
       g = bitmap[i*4+1], 
       b = bitmap[i*4+2], 
       a = bitmap[i*4+3];

   bitmap[i*3+0] = r * a / 255;
   bitmap[i*3+1] = g * a / 255;
   bitmap[i*3+2] = b * a / 255;
} 
```

# jquery - Jquery 脚本停止 nav 工作

> ID：13872299
> 
> 赞同：0
> 
> 时间：2012-12-14T03:39:00.240
> 
> 标签：jquery, navigation, nav

在我的单页[网站](http://mmd3e12dae42.keaweb.dk/test/index.html)上，我添加了一个脚本以在不同的 div 框之间进行平滑移动。但突然导航停止工作。这是最后一个打破它。

```
<script>
$(function(){
var sections = {},
    _height  = $(window).height(),
    i        = 0;

// Grab positions of our sections 
$('.section').each(function(){
    sections[this.name] = $(this).offset().top;
});

$(document).scroll(function(){
    var pos = $(this).scrollTop();

    // Look in the sections object and see if any section is viewable on the screen. 
    // If two are viewable, the lower one will be the active one. 
    for(i in sections){
        if(sections[i] > pos && sections[i] < pos + _height){
            $('a').removeClass('active');
            $('#nav_' + i).addClass('active');
            }  
        }
    });
});

        $(".scroll").click(function(event){
            event.preventDefault();
            var full_url = this.href;
            var parts = full_url.split("#");
            var trgt = parts[1];
            var target_offset = $("#"+trgt).offset();
            var target_top = target_offset.top;
            $('html, body').animate({scrollTop:target_top}, 500);
        }); 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:43:38.130

控制台显示错误`line 14`

```
$('#nav').localScroll(); 
```

还有`Cannot read property 'top' of undefined` 错误

**更新**

**看起来id section1**没有元素

 **应该是**nav_section1**

这条线

```
$("#"+trgt).offset(); 
```

应该是

```
$("#nav_"+trgt).offset();  OR  $('[href="#' + trgt + "]').offset() 
```

还要确保在获取值时元素**没有隐藏**`offset()`..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T03:45:18.907

一定会喜欢 Chrome 的 Inspector ......你错过了一个分号。

```
<script type="text/javascript">
$(function(){
    $('#nav').localScroll();
});
</script> 
```

* * *

你为什么用`<nav>`？该说明讨论了使用`<div>`

* * *

试试这个：

```
<div id="nav">
    <ul>
        <li><a id="nav_section1" href="#section1" class="scroll active">Section 1</a></li>
        <li><a id="nav_section2" href="#section2" class="scroll">&gt;Section 2</a></li>
        <li><a id="nav_section3" href="#section3" class="scroll">&gt;Section 3</a></li>
        <li><a id="nav_section4" href="#section4" class="scroll">&gt;Section 4</a></li>
        <li><a id="nav_section5" href="#section5" class="scroll">&gt;Section 5</a></li>
        <li><a id="nav_section6" href="#section6" class="scroll">&gt;Section 6</a></li>
        <li><a id="nav_section7" href="#section7" class="scroll">&gt;Section 7</a></li>
     </ul>
</div> 
```**

# javascript - 浏览器关闭时删除 cookie

> ID：13872305
> 
> 赞同：4
> 
> 时间：2012-12-14T03:39:27.150
> 
> 标签：javascript

我需要在浏览器关闭并且已经放在 window.onbeforeunload 上时删除 cookie，如下所示：

```
 window.onbeforeunload = function(){
        location.replace("admin.jsp?action=logout");
        deleteCookie('Times');
 } 
```

使用 setCookie 如下：

```
 function setCookie(name,value,days) {
         var expires;
         if (days) {
                  var date = new Date();
                  date.setTime(date.getTime()+(days*24*60*60*1000));
                  expires = "; expires="+date.toGMTString();
         }
         else {
                  expires = "";
              }
                  document.cookie = name+"="+value+expires+"; path=/";
     } 
```

当涉及到 deleteCookie 时，它​​包含以下内容：

```
 setCookie(name,value,-1); 
```

问题是每当我重新启动浏览器时，它总是会出现 window.onbeforeunload 以便触发 deleteCookie。每当用户登录时，我实际上都需要它来重置我的倒计时计时器，因为如果计数器没有结束并且用户有时会在它结束之前关闭窗口/选项卡，cookie 永远不会被删除。所以，我的想法是要么在用户登录时重置计数器，要么在用户注销时简单地删除 cookie。但是，我仍然无法弄清楚如何编码。谁能帮我吗？不过，代码片段将不胜感激。CMIIW

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T03:49:59.187

未在 cookie 上指定 Expires 值将导致 cookie 在浏览器会话结束时即用户关闭浏览器时被删除。像：

```
Set-Cookie: made_write_conn=1295214458; Path=/; Domain=.foo.com 
```

made_write_conn `made_write_conn`cookie 没有过期日期，因此它是一个会话 cookie。用户关闭浏览器后将被删除。尝试做：

```
setCookie('Times',value, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:44:09.427

关闭浏览器时，您无法更改页面的位置。

在服务器上，您应该使用[会话结束事件](https://stackoverflow.com/questions/3118968/sessiontimeout-web-xml-vs-session-maxinactiveinterval)来清理帐户。

# modx - ModX Revo：数据库地图

> ID：13872307
> 
> 赞同：0
> 
> 时间：2012-12-14T03:39:41.450
> 
> 标签：modx, modx-revolution

有人知道我在哪里可以找到 ModX Revo 数据库的“地图”吗？IE：表之间的关系？

我用谷歌搜索，搜索了 SO 和 Modx 的文档，但一无所获！

谢谢 - 任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:31:29.933

[https://github.com/modxcms/revolution/blob/develop/core/model/schema/modx.mysql.schema.xml](https://github.com/modxcms/revolution/blob/develop/core/model/schema/modx.mysql.schema.xml) - 这是所有表的方案。但是要理解它就得学习一些xpdo。

UPD：您可以使用[http://schemaviewer.dev.kenters.com/index.php可视化此架构](http://schemaviewer.dev.kenters.com/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:24:13.110

你可以使用 navicat 来获得数据库表的图形表示~但是关系是在 xpdo 模式中定义的，而不是在数据库本身中定义的。最好的办法是使用 Vasis 的 XML 模式链接，这实际上很容易理解。

你也可以在 modx 论坛上询问他们是否有这样的东西供自己参考……开发人员一直都在那里。

# c# - 从另一个类 VS2010 访问 Form1.picturebox1

> ID：13872309
> 
> 赞同：1
> 
> 时间：2012-12-14T03:39:40.970
> 
> 标签：c#

我是 C# 新手

我遇到了一些问题，我正在通过 Form.cs[Design] 在 Form1 中创建一些图片框

我想从 Form1 访问图片框

所以我必须在其他类上创建一个对象才能访问 Form1.picturebox1

但我能做对，有人能帮帮我吗

```
namespace RaceGame{
class Greyhound
{

    Form1 runner;

    public int StartingPosition = 13;
    public int RacetrackLength = 420;
    public PictureBox MyPictureBox = null;
    public int Location = 0;
    public Random Randomizer;

    public void Run()
    {

        runner.pictureDog1.Location = new Point(13, 100);
    }     
} 
```

这是Form1

```
namespace RaceGame{public partial class Form1 : Form
{
    Greyhound racing = new Greyhound();
    public Form1()
    {
        InitializeComponent();
    }

    private void raceButton_Click(object sender, EventArgs e)
    {
        racing.Run();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:55:24.693

根据您提供的代码，您的 Form1 或“跑步者”没有被分配。你有两个选择 - 1）让你的跑步者像这样公开

`public Form1 runner;`

这将允许您（以您的表格，而不是您的班级）将表格分配给此属性

```
public class Form1
{
        protected void Form1_Load(object sender, EventArgs e)
        {
              Greyhound gh = new Greyhound();
              gh.runner = this;//this line here
              //then you can call gh.Run()
        }
} 
```

另一种选择是使用构造函数，就像这样 -

```
class Greyhound
{

    Form1 runner;

    public int StartingPosition = 13;
    public int RacetrackLength = 420;
    public PictureBox MyPictureBox = null;
    public int Location = 0;
    public Random Randomizer;

    //here
    public Greyhound(Form1 form)
    {
        this.runner = form;
    }
    public void Run()
    {

        runner.pictureDog1.Location = new Point(13, 100);
    }     
} 
```

这会将表单传递给灰狗类供您访问，然后在您的表单代码中 -

```
public class Form1
{
        protected void Form1_Load(object sender, EventArgs e)
        {
              Greyhound gh = new Greyhound(this);//pass the form as 'this'
              //then you can call gh.Run()
        }
} 
```

编辑：根据您提供的表单代码 -

```
namespace RaceGame
{
    public partial class Form1 : Form
    {
         Greyhound racing = new Greyhound();
         public Form1()
         {
            InitializeComponent();
         }

         private void raceButton_Click(object sender, EventArgs e)
         {
              racing.runner = this;//assign property here
              racing.Run();
         }
    }
} 
```

和灰狗班

```
namespace RaceGame
{
    class Greyhound 
    {

        public Form1 runner;//make property public

        public int StartingPosition = 13;
        public int RacetrackLength = 420;
        public PictureBox MyPictureBox = null;
        public int Location = 0;
        public Random Randomizer;

        public void Run()
        {

            runner.pictureDog1.Location = new Point(13, 100);
        }      
    }
} 
```

# php - 从 Magento 中的 URL 调整图像大小

> ID：13872315
> 
> 赞同：6
> 
> 时间：2012-12-14T03:40:20.513
> 
> 标签：php, image, magento, resize

我正在为自定义类别视图中的每个图像检索一个 url：

像这样：

```
foreach ($collection as $cat){
    $cur_category = Mage::getModel('catalog/category')->load($cat->getId());
    $_img = $cur_category->getImageUrl();
    //stuff 
} 
```

这给了我原始图像，我想使用 Magento 的内置调整大小功能调整大小。但我是新手，不知道如何让该代码像产品列表页面上的代码一样工作：

```
$this->helper('catalog/image')->init($_product, 'small_image')->resize(306); 
```

如何修改/使用原始代码来调整图像大小？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T07:05:05.587

没有用于调整类别图像大小的内置功能。但是，您可以使用`Varien_Image`类。这里我写了一段你需要的代码：

```
foreach ($collection as $_category){
    $_file_name = $_category->getImage();
    $_media_dir = Mage::getBaseDir('media') . DS . 'catalog' . DS . 'category' . DS;
    $cache_dir = $_media_dir . 'cache' . DS;
    if (file_exists($cache_dir . $_file_name)) {
        echo Mage::getBaseUrl('media') . DS . 'catalog' . DS . 'category' . DS . 'cache' . DS . $_file_name;
    } elseif (file_exists($_media_dir . $_file_name)) {
        if (!is_dir($cache_dir)) {
            mkdir($cache_dir);
        }

        $_image = new Varien_Image($_media_dir . $_file_name);
        $_image->constrainOnly(true);
        $_image->keepAspectRatio(true);
        $_image->keepFrame(true);
        $_image->keepTransparency(true);
        $_image->resize(50, 50);
        $_image->save($cache_dir . $_file_name);

        echo Mage::getBaseUrl('media') . DS . 'catalog' . DS . 'category' . DS . 'cache' . DS . $_file_name;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T08:58:52.223

您不应该使用 Mage::getBaseDir('media') 直接调用图像以输出到浏览器，否则您会邀请黑客篡改您的服务器。使用 Mage::getUrl('media') 获取媒体目录的 url，如下所示：

```
foreach ($categories as $category) {
        $category = Mage::getModel('catalog/category')->load($category->getId());
        $category_name = $this->stripTags($category->getName(), null, true);
        $category_url = $category->getUrl();
        $category_img = $category->getImage();
        $media_dir = Mage::getBaseDir('media').DS.'catalog'.DS.'category'.DS;
        $cache_dir = $media_dir.'cache'.DS;
        $cache_url = Mage::getUrl('media').'catalog'.DS.'category'.DS.'cache'.DS;

        if (file_exists($cache_dir.$category_img)) {
            $category_img_url = $cache_url.$category_img;
        } elseif (file_exists($media_dir.$category_img)) {
            if (!is_dir($cache_dir)) {
                mkdir($cache_dir);
            }

            $image = new Varien_Image($media_dir.$category_img);
            $image->constrainOnly(true);
            $image->keepAspectRatio(true);
            $image->keepFrame(true);
            $image->keepTransparency(true);
            $image->resize(140, 140);
            $image->save($cache_dir.$category_img);

            $category_img_url = $cache_url.$category_img;
        }
} 
```

# c# - XmlSerializer 将 CR-LF 反序列化为 LF

> ID：13872316
> 
> 赞同：-1
> 
> 时间：2012-12-14T03:40:31.097
> 
> 标签：c#, xmlserializer, xml-deserialization

> **可能重复：**
> [XML 回车编码](https://stackoverflow.com/questions/2265966/xml-carriage-return-encoding)

我有一个类，上面有一些简单的字符串和 int 值，我正在使用 XmlSerializer 序列化到这样的文件。（这实际上是我正在使用的代码）

```
XmlSerializer xmlser = new XmlSerializer(typeof(NPC));
using (Stream st = new FileStream(fileName, FileMode.Create, FileAccess.Write, FileShare.None)) 
{
    xmlser.Serialize(st, npc);
} 
```

一切正常；我已经验证，在序列化时，正确的数据在`<Other></Other>`元素中的文件中`\r\n`，如果我在文件中输入了这样的数据，则完整。问题来自反序列化（再次；字面意思是我正在使用的代码，除了失败时的“测试”结果）

```
XmlSerializer xmlser = new XmlSerializer(typeof(NPC));
NPC npc = null;
using (Stream st = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.None)) 
{
    npc = (NPC)xmlser.Deserialize(st);
}
//Testing...
if(!npc.Other.Contains("\r\n")) 
{
    //this always occurs, even when the <Other></Other> item DOES have CR-LF
} 
```

反序列化后，`string`对象上具有`\r\n`值的属性将立即替换为`\n`单独的。即使在反序列化文件反映`\r\n`在正确的元素中之后，我也已经验证过，并且`npc`在测试`\r`删除之前我没有对对象做任何其他事情。

NPC 是一个简单的类，定义如下：

```
[Serializable]
public class NPC
{
    public int Field1{get; set;}
    public string Other {get; set;}
    public int Etc... {get; set;}
} 
```

所以; 为什么我的财产在反序列化时会`Other`丢失？`\r``\r\n`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:54:55.193

这是您可以查看的链接：
[XML 回车编码](https://stackoverflow.com/questions/2265966/xml-carriage-return-encoding)

如果你用谷歌搜索“XML 回车”，你会找到许多其他有同样问题的人的链接。

这似乎是设计使然。

> 这是因为兼容的 XML 解析器必须在解析之前将 CRLF 和任何没有跟随 LF 的 CR 转换为单个 LF。此行为在 XML 1.0 规范的 End-of-Line 处理部分中定义。

为了保留你的换行符，你必须做一些编码，或者在反序列化之后简单地改变你的`\n`所有`\r`内容

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T03:47:49.473

执行此操作的不是序列化程序，而是在 Serialize 方法内部为您创建的 XmlWriter。如果您自己创建它并为其提供 XmlWritterSettings 对象，然后将此写入器传递给 Serialize 方法而不是像现在这样的流，则您可以更好地控制此写入器的设置。谷歌 XmlWitter 设置。

# php - 使用 PHP 解析 Google 推荐位置

> ID：13872317
> 
> 赞同：0
> 
> 时间：2012-12-14T03:40:35.210
> 
> 标签：php

我正在尝试解析来自 Google 的推荐 URL，但 URL 中没有关键字。这是谷歌的新东西吗？有没有办法告诉他们搜索的内容，以便我可以记录使用的关键字？

我遇到问题的网址：

`http://www.google.com/url?sa=t&source=web&cd=13&ved=0CEMQFjAM&url=http%3A%2F%2Fwww.stubwire.com%2Fvenue%2Flightsofthesouth%2Fgrovetown%2F1527%2F&ei=QNPAUPHEDJCo8ASp1oH4Cg&usg=AFQjCNGS5KrvXDib-RmEIv2A8UDyWfkXBw&rct=j`

我可以解析的网址：

`http://www.google.com/url?sa=t&rct=j&q=fitzgerald's%20%22service%20fee%22&source=web&cd=1&ved=0CC0QFjAA&url=http%3A%2F%2Fwww.stubwire.com%2Fevent%2Felectricsixtba%2Ffitzgeralds%2Fhouston%2F4255%2F%3Freferral%3DAPI-fitzlivemusic.co&ei=IdfAUJzHJ-Od2QW_koHgBA&usg=AFQjCNHfHPCvTsskRe1KVwgrbOa-ccO0YQ`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:49:12.333

是的，这是 Google 的一项新政策。查看 SeoMoz 的这篇文章了解更多详情：[http ://www.seomoz.org/blog/google-hides-search-referral-data-with-new-ssl-implementation-emergency-whiteboard-friday](http://www.seomoz.org/blog/google-hides-search-referral-data-with-new-ssl-implementation-emergency-whiteboard-friday)

Google 建议您使用他们的[网站管理员工具](https://www.google.com/webmasters/tools/)来分析搜索查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:21:49.520

如果用户在 Google 中登录，则查询字符串中不再提供关键字。

[访问您网站的搜索查询数据](http://googlewebmastercentral.blogspot.com/2011/10/accessing-search-query-data-for-your.html)

# c - 类函数宏与宏

> ID：13872318
> 
> 赞同：2
> 
> 时间：2012-12-14T03:41:01.950
> 
> 标签：c, macros

```
gcc (GCC) 4.7.2
c89 
```

你好，

我一直在看一个测试套件，我注意到这个类似函数的宏声明如下：

```
#define MU_SUITE_START() char *msg = NULL 
```

但是，这样做是否有任何真正的区别：

```
#define MU_SUITE_START char *msg = NULL 
```

宏只是进行文本替换，所以我认为不会有任何性能问题。

使用 cpp 我得到以下结果，所以这里没什么特别的。

类函数宏

```
char *msg = __null; 
```

马可

```
char *msg = __null; 
```

只是一个旁注：是否值得声明一个不提供输入参数的类似函数的marco？在这里，我没有传递任何参数，即

```
#define PRINT_MSG() printf("This is the message\n") 
```

如果没有输入参数，为什么还要使用类似函数的宏，这不是更好吗？

```
#define PRINT_MSG printf("This is the message\n") 
```

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T03:52:36.433

类对象宏和类函数宏之间有一个区别：

```
#define OBJECT     char *msg1 = NULL
#define FUNCTION() char *msg2 = NULL

void somefunc(void)
{
    int OBJECT = 5;
    int FUNCTION = 10;
    ...
} 
```

for 的声明`OBJECT`被宏替换（因此代码不会编译），但对 FUNCTION 的引用不是宏调用，因为它后面没有开括号。

这很少是重要的。然而，当它出现时，它真的很重要。

更典型的情况可能是可以实现为宏的函数。为了讨论起见（因为它很容易理解，而不是因为它是一个很好的例子）：

```
extern int isdigit(int c);
#define isdigit(c) ((c) >= '0' && (c) <= '9') 
```

并在实现文件中：

```
int (isdigit)(int c)
{
    assert((c >= 0 && c <= UCHAR_MAX) || c == EOF);
    return isdigit(c);
} 
```

忽略这样的小细节`isdigit()`是不可能实现的，并且宏实现`isdigit()`不允许多次评估其参数，并且您不应该重新定义标准 C 库中的东西，函数定义没有宏扩展，因为名称`isdigit`后面没有`(`，但是函数内部的宏被扩展了。至少该功能是根据宏实现的，这几乎可以保证相同的行为。

# outlook-addin - 在没有 MS Exchange 帐户的情况下以编程方式在 MS Outlook 2010 中创建附加日历

> ID：13872320
> 
> 赞同：1
> 
> 时间：2012-12-14T03:41:27.520
> 
> 标签：outlook-addin, pop3, outlook-2010, outlook-calendar

如果您将 MS Outlook 与 MS Mail Exchange 帐户一起使用，您可以将您的日历共享给其他人或由其他人共享。否则，如果您将它与任何其他类型的帐户（*例如 POP3*）一起使用，这些功能将不可用。

我被分配了一项任务，即通过使用`Microsoft.Office.Interop.Outlook`库在 Visual Studio 2010 中编程来创建额外的日历。请注意，我们使用的是 POP3 邮件服务器。

请参考这张图片： ![在此处输入图像描述](../Images/eec5e40303620178f9471b0a6220fc87.png)

在不使用 MS Exchange 帐户的情况下，我可以通过使用`Microsoft.Office.Interop.Outlook`库在 VS 2010 中编程来创建额外的日历吗？

# netty - netty可以给同一个Channel分配多个IO线程吗？

> ID：13872322
> 
> 赞同：2
> 
> 时间：2012-12-14T03:41:35.200
> 
> 标签：netty

如果我要编写以下代码段：

```
class SimpleHandler extends SimpleChannelUpstreamHandler {
    ...
    public static void main( String[] args ) throws Exception {
    ServerBootstrap b = new ServerBootstrap( 
        new NioServerSocketChannelFactory( 
            Executors.newCachedThreadPool(), 
            Executors.newCachedThreadPool(), 
            10 ));
    b.setPipelineFactory( new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() throws Exception {
            return Channels.pipeline( new SimpleHandler() );
        }
    });
    b.bind( new InetSocketAddress( p ));
} 
```

并假设以下情况：

*   通道 C1 有输入
*   netty 将线程 T1 分配给通道 C1
*   在线程 T1 从通道 C1 读取所有输入后，当它仍在处理输入时，更多输入到达通道 C1

我的问题是：netty会为通道C1分配一个新线程（假设线程池中有空闲线程）？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:04:30.553

一旦将线程/选择器分配给通道，它将在其整个生命周期中使用相同的。所以它会一直由同一个服务。

# machine-learning - 输出选定的决策树叶

> ID：13872324
> 
> 赞同：0
> 
> 时间：2012-12-14T03:41:58.117
> 
> 标签：machine-learning, weka, decision-tree

我正在尝试可视化决策树如何应用于测试集，并且我正在使用 Weka 的 J48 决策树。Weka 通过评估决策树并到达叶子来将每个样本识别为一个类别。当然，多个叶子被标记为同一个类。有谁知道如何让 Weka 为每个样本说出它用来标记该样本的叶子？

```
X < 47
|  Y > 10  : Class1 (...)
|  Y <= 10 : Class2 (...)
X >= 47
|  Y > 15  : Class1 (...)
|  Y <= 15
|  |  Z > 10  : Class2 (...)
|  |  Z <= 10 : Class1 (...) 
```

我想要这样的话“样本 15 被归类为 Class1，因为 (X>=47, Y<=15, Z<=10)”或类似的东西。

或者，我想要“27 个样本被归类为 Class1，因为 (X>=47, Y<=15, Z<=10)”的内容。

或者，是否有人知道有人将这些信息可视化的实例，或者其他软件会吐出这些信息？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:43:15.170

如果有人知道，我仍然想要一个真正的答案，但我的答案是 Weka 不包含这种能力。我的解决方案是做一个我需要的东西。它在这里可用：

[GitHub：决策树DNA](https://github.com/kc0bfv/DecisionTreeDNA)

我还没有完成它。它会用数字构建一个很酷的图表，但它已经吐出了我想要的那些数字。哦 - 它吐出的数字是“27 个样本被归类为 Class1，因为 (X>=47, Y<=15, Z<=10)”品种，但很容易修改为吐出“样本 15 被分类作为 Class1 因为 (X>=47, Y<=15, Z<=10)”。

# linux - 为什么我的数值算法在两台不同的机器上表现不同？

> ID：13872325
> 
> 赞同：0
> 
> 时间：2012-12-14T03:42:02.360
> 
> 标签：linux, windows, gfortran

我正在为 Fortran 90 中的多维优化编写 BFGS 算法的一个版本。我已经编写了代码，在我的笔记本电脑（运行 Windows Vista）上用 gfortran 编译了它，它工作正常。但是当我尝试在运行 Linux 6 的服务器上使用相同的代码时，它会给出不正确的结果。它是完全相同的代码，并且编译得很好，它产生的结果是错误的。也就是说，它似乎在算法的某个早期阶段产生了一个浮点算术错误，并且在它开始产生 NaN 之前只产生一行数值结果。我只能假设它与服务器环境有关，但我怎样才能找出它是什么以及如何相应地更正我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:00:05.020

**此处描述了该问题**（CERT.org）：**[FLP00-C。了解浮点数的局限性](https://www.securecoding.cert.org/confluence/display/seccode/FLP00-C.+Understand+the+limitations+of+floating+point+numbers)**

> **这种行为的原因是 Linux 在 IA-32 机器上使用 x87 浮点单元 (FPU) 的内部扩展精度模式来提高计算过程中的精度。**当结果通过分配给 c 存储到内存中时，FPU 会自动将结果四舍五入以适合双精度数。现在从内存中读回的值与内部表示的比较不相等，后者具有扩展的精度。**Windows 不使用扩展精度模式，因此所有计算都以双精度完成，存储在内存中的值与 FPU 内部的值之间的精度没有差异。**对于 GCC，在优化级别 1 或更高级别进行编译消除了不必要的内存存储，因此所有计算都在具有扩展精度的 FPU 内进行

**此处描述了解决方案**：**[FLP02-C。当需要通过两个示例进行精确计算时避免使用浮点数](https://www.securecoding.cert.org/confluence/display/seccode/FLP02-C.+Avoid+using+floating+point+numbers+when+precise+computation+is+needed)**，一个显示问题的不正确示例和一个没有问题的更正示例：

> “可以通过将浮点数替换为内部加法的整数来修复此代码。浮点数仅在打印结果和进行除法计算平均值时使用。”

# multithreading - [Ubuntu]无法安装 Cpan Install::Thread

> ID：13872326
> 
> 赞同：0
> 
> 时间：2012-12-14T03:42:40.170
> 
> 标签：multithreading, perl, cpan

我现在面临一些问题已经有好几天了，谷歌并没有给我太多帮助。我想使用需要线程的 perl 程序，但这给我带来了困难。我目前正在使用 Perl 5.10.1，它不支持多线程，但通常我在下面粘贴的命令应该可以安装没有任何问题。我愿意为好帮手打赏。

所以我试过这个：

```
sudo su -
cpan
install shared::thread 
```

（高度损坏）输出：

```
root@noc:~# sudo su - root@noc:~# cpan Terminal does not support
AddHistory.

cpan shell -- CPAN exploration and modules installation (v1.9402)
Enter 'h' for help.

cpan[1]> install shared::thread CPAN: Storable loaded ok (v2.20) Going
to read '/root/.cpan/Metadata' Database was generated on Wed, 12 Dec
2012 01:07:04 GMT CPAN: Time::HiRes loaded ok (v1.9719) Warning: no
success downloading
'/root/.cpan/sources/authors/01mailrc.txt.gz.tmp22514'. Giving up on
it. at /usr/lib/perl5/5.10.1/CPAN/Index.pm line 225 LWP not available

Trying with "/usr/bin/curl -L -f -s -S --netrc-optional" to get
"http://www.perl.org/CPAN/authors/01mailrc.txt.gz" CPAN:
Compress::Zlib loaded ok (v2.02) CPAN: YAML loaded ok (v0.84) Going to
read '/root/.cpan/sources/authors/01mailrc.txt.gz'
..................................................
..........................DONE Warning: no success downloading
'/root/.cpan/sources/modules/02packages.details.txt.gz.tmp22514'.
Giving up on it. at /usr/lib/perl5/5.10.1/CPAN/Index.pm line 225

Trying with "/usr/bin/curl -L -f -s -S --netrc-optional" to get
"http://www.perl.org/CPAN/modules/02packages.details.txt.gz" Going to
read '/root/.cpan/sources/modules/02packages.details.txt.gz' Database
was generated on Fri, 14 Dec 2012 01:07:03 GMT HTTP:ate not available
.............. New CPAN.pm version (v1.9800) available. [Currently
running version is v1.9402] You might want to try install CPAN reload
cpan to both upgrade CPAN.pm and run the new version without leaving
the current session.

.................................................. ............DONE
Warning: no success downloading
'/root/.cpan/sources/modules/03modlist.data.gz.tmp22514'. Giving up on
it. at /usr/lib/perl5/5.10.1/CPAN/Index.pm line 225

Trying with "/usr/bin/curl -L -f -s -S --netrc-optional" to get
"http://www.perl.org/CPAN/modules/03modlist.data.gz" Going to read
'/root/.cpan/sources/modules/03modlist.data.gz'
..................................................
..........................DONE Going to write /root/.cpan/Metadata
Warning: Cannot install shared::thread, don't know what it is. Try the
command

i /shared::thread/

to find objects with matching identifiers.

cpan[2]> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:46:00.423

如果你想要[Thread::Shared](http://search.cpan.org/~dsnopek/Xmldoom-0.0.16/lib/Thread/Shared.pm)，你需要记住 cpan 是区分大小写的，使用`sudo cpan install Thread::Shared`。你不需要做`su`之后`sudo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:14:12.667

> 我目前正在使用 Perl 5.10.1，它不支持多线程

首先，让我们确定一下。如果你有一个支持线程的 Perl，你会得到这个输出：

```
$ perl -V:usethreads
usethreads='define'; 
```

如果这就是您所得到的，那么您只是拼错了“threads::shared”，您甚至不需要安装它，因为它已经随 Perl 提供了。

如果这不是您所得到的，那么您的 Perl 不支持线程，您需要创建一个支持线程的 Perl 构建（即构建一个使用 配置的 Perl `-Dusethreads`）。您不能只安装一个模块来添加线程支持，因为线程支持需要整个 Perl 内部的额外代码。

* * *

要自己构建 Perl，我建议[`perlbrew`](http://search.cpan.org/perldoc?perlbrew)安装如下：

```
curl -kL http://install.perlbrew.pl | bash 
```

（系统会指示您在登录脚本中添加一些内容，并且您应该重新登录以确保一切设置正确。）

这使得安装新的 Perl 变得容易：

```
perlbrew install -v 5.16.2 --as=5.16.2t -Dusethreads 
```

# android - 我怎样才能发送同步的命令？

> ID：13872329
> 
> 赞同：0
> 
> 时间：2012-12-14T03:42:57.877
> 
> 标签：android, synchronized

我有一个关于android的串口或蓝牙的课程。该课程有一个名为CommandSender（String CommandText）的方法；

有许多窗体或线程可以调用该方法。我该怎么做：如果调用一次的方法立即执行该方法，如果多个窗体或线程调用该方法，则只需在调用之前/之后休眠 2 秒。

请提供代码详细信息。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:59:30.930

你可以使用

```
public synchronized void CommandSender(String CommandText) { } 
```

但这不会提供您需要的 2 秒睡眠。如果你真的需要 2 秒睡眠，那么你必须自己实现。

```
public class BluetoothUtils
{
    private static boolean isLocked = false;

    public void CommandSender(String CommandText)
    {
        while(isLocked)
        {
            Thread.sleep(2000); // sleep for 2 seconds
        }
        CommandSenderInternal(CommandText);
    }

    private synchronized void CommandSenderInternal(String CommandText)
    {
        isLocked = true;
        try
        {
            // Your implementation here
        }
        catch(Exception ex)
        {

        }
        finally
        {
             isLocked = false;
        }
    }
} 
```

# python - 使用 Python 旋转具有 EXIF 中指定方向的图像，而不使用 PIL，包括缩略图

> ID：13872331
> 
> 赞同：41
> 
> 时间：2012-12-14T03:43:12.823
> 
> 标签：python, ios, image, exif

我有以下情况：

*   我正在从 iPhone 向我的 Pyhon 套接字服务器发送图像以及 EXIF 信息。
*   我需要根据拍摄图像时的实际方向正确定位图像。我知道IOS总是将图像保存为横向左并将实际方向添加为EXIF字段（EXIF.Image.Orientation）。
*   我正在阅读 EXIF 字段以查看实际方向。然后我使用 wxpython 将图像旋转到正确的方向。

我正在使用 pyexiv2 进行 EXIF 操作。

问题：使用 wxpython 旋转图像时，包括缩略图在内的 EXIF 信息丢失。

我做了什么：我在旋转图像之前阅读 EXIF。我重置了 EXIF 中的方向字段。然后我在旋转后把它放回去。

问题：

EXIF 内的缩略图不旋转。因此，图像和缩略图具有不同的方向。

问题？

除了 PIL 之外，还有其他模块可以旋转图像并保留其 EXIF 信息吗？

缩略图方向是否有单独的 EXIF 字段？

有没有办法我可以单独旋转缩略图？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2014-11-14T10:42:17.497

此解决方案适用于我： [PIL 缩略图正在旋转我的图像？](https://stackoverflow.com/questions/4228530/pil-thumbnail-is-rotating-my-image)

不需要检查它是 iPhone 还是 iPad：如果照片有方向标签 - 旋转它。

```
from PIL import Image, ExifTags

try:
    image=Image.open(filepath)

    for orientation in ExifTags.TAGS.keys():
        if ExifTags.TAGS[orientation]=='Orientation':
            break

    exif = image._getexif()

    if exif[orientation] == 3:
        image=image.rotate(180, expand=True)
    elif exif[orientation] == 6:
        image=image.rotate(270, expand=True)
    elif exif[orientation] == 8:
        image=image.rotate(90, expand=True)

    image.save(filepath)
    image.close()
except (AttributeError, KeyError, IndexError):
    # cases: image don't have getexif
    pass 
```

前：

![前](../Images/2fd183d37980df8567fd63a8f83ed8b8.png)

后： ![后](../Images/c90f3949d836fdaddb4251122783919d.png)

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2019-09-26T12:30:57.647

如果您使用的是[Pillow >= 6.0.0](https://pillow.readthedocs.io/en/stable/releasenotes/6.0.0.html)，则可以使用内置[`ImageOps.exif_transpose`](https://pillow.readthedocs.io/en/latest/reference/ImageOps.html#PIL.ImageOps.exif_transpose)函数根据其 exif 标签正确旋转图像：

```
from PIL import ImageOps

image = ImageOps.exif_transpose(image) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-03T11:40:32.310

与@scabbiaza 的答案几乎相同，但使用转置而不是旋转（出于性能目的）。

```
from PIL import Image, ExifTags

try:
    image=Image.open(filepath)
    for orientation in ExifTags.TAGS.keys():
        if ExifTags.TAGS[orientation]=='Orientation':
            break
    exif=dict(image._getexif().items())

    if exif[orientation] == 3:
        image=image.transpose(Image.ROTATE_180)
    elif exif[orientation] == 6:
        image=image.transpose(Image.ROTATE_270)
    elif exif[orientation] == 8:
        image=image.transpose(Image.ROTATE_90)
    image.save(filepath)
    image.close()

except (AttributeError, KeyError, IndexError):
    # cases: image don't have getexif
    pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-06T07:16:25.673

[https://medium.com/@giovanni_cortes/rotate-image-in-django-when-saved-in-a-model-8fd98aac8f2a](https://medium.com/@giovanni_cortes/rotate-image-in-django-when-saved-in-a-model-8fd98aac8f2a)

这篇博文解释得很清楚。只要确保您尝试保留`@receiver..`代码`forms.py`或`models.py`当我遇到`cannot import model/view`错误时。

将`rotate_image`方法保留在`models.py`& `@receiver..`代码中`models.py`。

我也得到了像没有这样的目录这样的错误。只需确保`full_path`正确设置为媒体文件夹即可。

我用了这条线

`fullpath = os.path.join(os.path.dirname(BASE_DIR)) + instance.fimage.url`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-11T21:22:21.940

由于这是“python exif rotate”的最佳答案，我想添加一个附录**，以防您只需要旋转值而不需要 PIL 旋转图像**- 在我的情况下，我使用 QPixmap 在 QGraphicsView 上旋转图像，所以我只需要 QPixmap 变换的角度。上面使用**PIL 获取 exif**
的[答案](https://stackoverflow.com/a/26928142/2441026)相当慢。在我的测试中，它花费了[piexif](https://pypi.org/project/piexif)库的 6 倍时间（6 毫秒 vs 1 毫秒），因为创建/打开 PIL.Image 需要很多时间。所以我建议在这种情况下使用。**`piexif`**

 **```
import piexif

def get_exif_rotation_angle(picture)

    exif_dict = piexif.load(picture)
    if piexif.ImageIFD.Orientation in exif_dict["0th"]:
        orientation = exif_dict["0th"][piexif.ImageIFD.Orientation]
        if orientation == 3:
            return 180
        elif orientation == 6:
            return 90
        elif orientation == 8:
            return 270
        else:
            return None
    else:
        return None 
```

`picture` [可以是](https://piexif.readthedocs.io/en/latest/functions.html#piexif.load)文件路径或字节对象。

参考：[https ://piexif.readthedocs.io/en/latest/sample.html#rotate-image-by-exif-orientation](https://piexif.readthedocs.io/en/latest/sample.html#rotate-image-by-exif-orientation)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-12T11:31:23.760

```
from PIL import Image

def reorient_img(pil_img):
    img_exif = pil_img.getexif()

    if len(img_exif):
        if img_exif[274] == 3:
            pil_img = pil_img.transpose(Image.ROTATE_180)
        elif img_exif[274] == 6:
            pil_img = pil_img.transpose(Image.ROTATE_270)
        elif img_exif[274] == 8:
            pil_img = pil_img.transpose(Image.ROTATE_90)

    return pil_img 
```**

# javascript - 服务器端的 dhtmlx 日期格式不起作用

> ID：13872336
> 
> 赞同：1
> 
> 时间：2012-12-14T03:43:38.793
> 
> 标签：javascript, dhtmlx

在js中：

```
 {
        type: "calendar",
        serverDateFormat: "%d-%m-%Y",
        dateFormat: "%d-%m-%Y",
        name: "al_date_to",
        label: "Date To",
        readonly: true,
        validate: "NotEmpty",
        value: "",
        calendarPosition: "right"
    }, 
```

在服务器端是：

```
"Fri Dec 21 09:40:00 UTC+0800 2012" 
```

我要的日期格式是dm-yyyy，不知道怎么解决这个问题。我看到了这个页面，但我不知道如何使用。[服务器端的 dhtmlx 日期格式不起作用](https://stackoverflow.com/questions/13677474/dhtmlx-date-format-in-server-side-is-not-working)。请问你能帮帮我吗。

# php - org.json.JSONArray 类型的无法转换为 JSONObject

> ID：13872337
> 
> 赞同：0
> 
> 时间：2012-12-14T03:43:50.713
> 
> 标签：php, android, json

我在 php 中显示数据库中的名称、电子邮件 ID、ph 号以列出视图。

```
enter code here

     public class MainActivity extends ListActivity
     {
// url to make request
private static String url = "http://10.0.2.2/programs/get_data.php";
private static final String TAG_CONTACTS = "contacts";
private static final String TAG_ID = "id";
private static final String TAG_NAME = "name";
private static final String TAG_phno = "phno";
    JSONArray contacts;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {

    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main);

   // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = ArrayList<HashMap<String,string();       
    // Creating JSON Parser instance

    JSONParser jParser = new JSONParser();
    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);  
    try {
    // Getting Array of Contacts
    contacts = json.getJSONArray(TAG_CONTACTS);
    // looping through All Contacts
    for(int i = 0; i < contacts.length(); i++)
    {
    JSONObject c = contacts.getJSONObject(i);
    String name = c.getString("name");
    String phno = c.getString("phno");
    String email = c.getString("id");
    System.out.println("hi");
    // creating new HashMap
    HashMap<String, String> map = new HashMap<String, String>();
    map.put(TAG_NAME, name);
    map.put(TAG_ID,email);
    map.put(TAG_phno, phno);
    // adding HashList to ArrayList
    contactList.add(map);
    }
   }catch (JSONException e) {
   e.printStackTrace();
    }
    ListAdapter adapter = new SimpleAdapter(this, contactList,
    R.layout.list_item,
    new String[] { TAG_NAME, TAG_ID, TAG_phno }, new int[] {
    R.id.name, R.id.email, R.id.phno });
    setListAdapter(adapter);

    }

    }   

public class JSONParser  extends Activity
    {

static InputStream is;
static JSONObject jObj;
static String json = "";
   // constructor
public JSONParser() 
{

}

public JSONObject getJSONFromUrl(String url)
{

// Making HTTP request
try {
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
    HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
is = httpEntity.getContent();   
} catch (UnsupportedEncodingException e) {
e.printStackTrace();
} catch (ClientProtocolException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}
try {
BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null) {
sb.append(line + "\n");
}
is.close();
json = sb.toString();
} catch (Exception e) {
Log.e("Buffer Error", "Error converting result " + e.toString());
}

// try parse the string to a JSON object
   try {
   jObj = new JSONObject(json);
   } catch (JSONException e) 
   {
Log.e("JSON Parser", "Error parsing data " + e.toString());
   } 

  // return JSON String
  return jObj;

  }
  } 
```

我收到错误

11-21 22:44:00.306: E/JSON Parser(17671): 解析数据时出错 org.json.JSONException: Value [{"id":"c.com","phno":"12","name" :"Chaitra D"},{"id":"s.com","phno":"1254","name":"Shrivatsa K"},{"id":"m.com","phno" :"1456","name":"Mahalaxmi B"},{"id":"Sh.com","phno":"1234","name":"Sharadha"},{"id":"shh .com","phno":"1564","name":"shrilatha"},{"id":"n.com","phno":"97","name":"namratha h"}, {"id":"shri.com","phno":"167","name":"Shrinivas D"},org.json.JSONArray 类型的 {"id":"p.com","phno":"987","name":"PG sunita"}] 无法转换为 JSONObject

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:02:24.290

你得到那个异常是因为你没有一个 json 对象，你有一个 json 对象的 json 数组。首先，将您的字符串解析为一个 json 数组，然后遍历该数组以获取每个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:03:38.847

我猜来自服务器的 json 是一个数组，所以你应该从那个数组中获取第一个 JSONObject。就像是：

```
public JSONArray getJSONFromUrl(String url) { 
 // get JSONArray... }

jsonArray = getJSONFromUrl(Url); JSONOBject jsonObject = jsonArray.getJSONObject(0); 
```

或者更简单的方法是使用这个库从服务器获取 JSON：http: [//loopj.com/android-async-http/](http://loopj.com/android-async-http/)

```
AsyncHttpClient client = new AsyncHttpClient();
client.get(stringURL, paramsOrNull, new JsonHttpResponseHandler() {
@Override
            public void onStart() {
                    // do somethings when start send request to server
            }

            @Override
            public void onFailure(Throwable arg0) {
                    // do somethings when fail to request or receive respone from server
            }

            @Override
            public void onSuccess(JSONObject rawJson) {
                    // do somethings when sucessful...
} 
```

# sql-server - odbc 无法连接到 OS X Lion 上的 MSSQL 数据源

> ID：13872340
> 
> 赞同：8
> 
> 时间：2012-12-14T03:44:08.997
> 
> 标签：sql-server, macos, odbc, freetds, unixodbc

odbc`isql`无法连接到数据源：

```
 $ isql SMS_GTWY username password -v 
```

返回：

```
 [S1000][unixODBC][FreeTDS][SQL Server]Unable to connect to data source
 [01000][unixODBC][FreeTDS][SQL Server]Unknown host machine name.
 [ISQL]ERROR: Could not SQLConnect 
```

虽然`tsql`可以：

```
 $ tsql -S SERVER001 -U username -P password 
```

返回：

```
 locale is "C/UTF-8/C/C/C/C"
 locale charset is "UTF-8"
 using default charset "UTF8"
 1> 
```

`$ cat ~/.freetds.conf`：

```
 [SERVER001]
   host = 192.168.8.101
   port = 1433
   tds version = 8.0
   client charset = UTF8 
```

`$ cat ~/.odbc.ini`：

```
 [SMS_GTWY]
  Description = SERVER001 Server
  Driver      = freetds
  Database    = SMS_GTWY
  ServerName  = SERVER001
  TDS_Version = 7.1 
```

`$ cat ~/.odbcinst.ini`：

```
 [freetds]
  Description = MS SQL database access with FreeTDS
  Driver      = /usr/local/lib/libtdsodbc.so
  Setup       = /usr/local/lib/libtdsodbc.so
  UsageCount  = 1 
```

`freetds`并且`unixODBC`是在家安装的`brew`。

我在 CentOS 上有类似的设置，并且 odbc isql 到 mssqlserver 工作正常。有一个明显的区别，我没有`libtdsS.so`在 OS X 上看到安装。

`# cat /etc/odbcinst.ini`在 CentOS 上：

```
 [freetds]
 Description = MS SQL database access with FreeTDS
 Driver      = /usr/lib/libtdsodbc.so
 Setup       = /usr/lib/libtdsS.so 
 UsageCount  = 1 
```

这是问题的原因吗？

ps`$ odbcinst -j`返回：

```
 unixODBC 2.3.1
 DRIVERS............: /usr/local/Cellar/unixodbc/2.3.1/etc/odbcinst.ini
 SYSTEM DATA SOURCES: /usr/local/Cellar/unixodbc/2.3.1/etc/odbc.ini
 FILE DATA SOURCES..: /usr/local/Cellar/unixodbc/2.3.1/etc/ODBCDataSources
 USER DATA SOURCES..: /Users/horace/.odbc.ini
 SQLULEN Size.......: 8
 SQLLEN Size........: 8
 SQLSETPOSIROW Size.: 8 
```

`$ odbcinst -q -d`返回：

```
 [freetds] 
```

`$ odbcinst -q -s`返回：

```
 [SMS_GTWY] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T09:24:43.040

`isql`重新安装`unixodbc`和`freetds`（`--with-unixodbc`）后工作：

```
 brew uninstall freetds
 brew uninstall unixodbc

 brew install unixodbc
 brew install freetds --with-unixodbc 
```

现在，`$ isql -v SMS_GTWY username password`返回：

```
+---------------------------------------+
| Connected!                            |
|                                       |
| sql-statement                         |
| help [tablename]                      |
| quit                                  |
|                                       |
+---------------------------------------+
SQL> 
```

学分：[https ://gist.github.com/565440](https://gist.github.com/565440)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T18:21:29.197

行。我也为此浪费了两天时间，但不想使用 Homebrew 或 MacPorts。诀窍是使用 unixODBC 开关构建 FreeTDS。这会生成 odbc 驱动程序 (xxx.so)，否则不会生成。首先，您需要 XCode 和已经安装的命令行工具。网络上有大量资源来展示如何做到这一点。

这是我采取的步骤。

1.  下载[最新的稳定版 FreeTDS](http://www.freetds.org/software.html)
2.  下载[最新稳定的 unixODBC](http://www.unixodbc.org/)
3.  拆开两个。
4.  请注意解压后的 unixODBC 目录的完整路径。
5.  从终端提示导航到 FreeTDS 目录并发出以下命令。

    ./configure **--with-unixodbc=***第 4 步中注明的路径*
    make
    sudo make install

完成后，一切都应该在 /usr/local/ 中。您的驱动程序应该在 /usr/local/lib 中。在 /usr/local/etc 中编辑您的设置文件。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-03T03:58:46.620

对于使用 MacPort 的任何人，与上面唯一不同的部分是以这种方式安装 FreeTDS：

```
sudo port install freetds +mssql +odbc +universal 
```

驱动程序库将在这里：

```
/opt/local/lib/libtdsodbc.so 
```

# codeigniter - Codeigniter add field in simplelogin library

> ID：13872342
> 
> 赞同：0
> 
> 时间：2012-12-14T03:44:13.980
> 
> 标签：codeigniter

I'm new learner in CI and follow this CI simple login library [(see here)](http://bazaar.launchpad.net/~costales/simplelogincodeigniter/trunk/view/head:/application/libraries/Simplelogin.php) in my project, everything is work pretty fine with this simple library except of if I want to add some more fields in the database table, how can I create and fetch the new added field?

This library is origin come with 'id', 'username', 'email' and 'password' fields only, how if I want to add in field such as 'address', and make it usable in create a user `$this->simplelogin->create('user', 'user@mail.com', 'password', 'address', true);` and fetch `$this->simplelogin->get_data_user('address');` in view?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:33:16.300

You can change:

*   Add property

    private $address_field = 'address'; // address in database

//Make sure that in your database must have the field `address`

Changge function create():

```
function create($user = '', $email = '', $password = '', $address = '', $auto_login = TRUE) 
{
        // Check data is set
        if ($user == '' || $password == '' || $email == '')
            return FALSE;

        // Email or User already exists | Probably will not need to check the `address`
        $this->CI->db->where($this->user_field, $user);
        $this->CI->db->or_where($this->email_field, $email);
        $query = $this->CI->db->get($this->user_table);
        if ($query->num_rows() > 0)
            return FALSE;

        // Create user into the database
        $data = array($this->user_field=>$user, $this->email_field=>$email, $this->password_field=>crypt($password, $this->salt), $this->address_field=>$address);
        if (!$this->CI->db->insert($this->user_table, $data))
            return FALSE;

        // Automatically login to created account
        if ($auto_login) {        
            $this->CI->session->sess_destroy();
            $this->CI->session->sess_create();
            $this->CI->session->set_userdata(array('username'=>$user, 'email'=>$email,'address'=>$address));
        }

        return TRUE; // Created!
    } 
```

Changge function get_data_user():

```
function get_data_user($param = 'username') { // default is get session username
        $sess = $this->CI->session->userdata($param);
        if (!$sess)
            return '';

        return $sess;
    } 
```

Change line 106 in login function:

```
$this->CI->session->set_userdata(array('username'=>$row[$this->user_field], 'email'=>$row[$this->email_field],'address'=>$row[$this->address_field])); // Set session data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:21:41.473

i am afraid there is no easy way to do it

you need to modify the library Simplelogin.php to something like that bare in mind you need to add the address field to the table

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');
/*
  SimpleLogin 0.0.3 https://launchpad.net/simplelogincodeigniter
  A CodeIgniter 2.X library for do a login system simple
  Author: costales http://launchpad.net/~costales
  Based on Anthony Graddy & Alex Dunae & Hitesh Ubharani's versions
  Licensed under LGPL3
 */

class Simplelogin {

    private $CI;
    private $user_table     = 'users';
    private $user_field     = 'username';
    private $email_field    = 'email';
    private $address_field  = 'address'; // add the name of the field in the database
    private $password_field = 'password';
    private $salt           = '$2a$07$R.gJbYU2N.FmA4hPp1y2CN$';

    public function __construct() {
        $this->CI = & get_instance();
    }

    /* Create a user account
     *
     * @access   public
     * @param    string
     * @param    string
     * @param    string
     * @param    bool
     * @return   bool
     */

    function create($user = '', $email = '', $password = '', $address = '', $auto_login = TRUE) {
        // Check data is set
        if ($user == '' || $password == '' || $email == '')
            return FALSE;

        // Email or User already exists
        $this->CI->db->where($this->user_field, $user);
        $this->CI->db->or_where($this->email_field, $email);
        $query = $this->CI->db->get($this->user_table);
        if ($query->num_rows() > 0)
            return FALSE;

        // Create user into the database
        $data = array(
            $this->user_field     => $user,
            $this->email_field    => $email,
            $this->address_field  => $address,
            $this->password_field => crypt($password, $this->salt)
        );
        if (!$this->CI->db->insert($this->user_table, $data))
            return FALSE;

        // Automatically login to created account
        if ($auto_login) {
            $this->CI->session->sess_destroy();
            $this->CI->session->sess_create();
            $this->CI->session->set_userdata(array(
                'username' => $user,
                'email'    => $email,
                'address'  => $address
            ));
        }

        return TRUE; // Created!
    }

    /* Delete user
     *
     * @access    public
     * @param integer
     * @return    bool
     */

    function delete($username = '') {
        if ($username == '')
            return FALSE;

        $data = array($this->user_field => $username);
        if ($this->CI->db->delete($this->user_table, $data))
            return TRUE; // Deleted
        else
            return FALSE; // Not deleted
    }

    /* Login user
     *
     * @access    public
     * @param     string
     * @param     string
     * @return    bool
     */

    function login($user = '', $password = '') {
        // Data was sent
        if ($user == '' OR $password == '')
            return FALSE;

        // Check if already logged in
        if ($this->CI->session->userdata('username') == $user)
            return TRUE;

        // Check user exists
        $data = array($this->user_field => $user);
        $query            = $this->CI->db->get_where($this->user_table, $data);
        if ($query->num_rows() != 1)
            return FALSE;

        // Check against password
        $row = $query->row_array();
        if (crypt($password, $this->salt) != $row[$this->password_field])
            return FALSE;

        $this->CI->session->sess_destroy(); // Destroy old session
        $this->CI->session->sess_create(); // Create a fresh, brand new session

        $this->CI->session->set_userdata(
                array(
                    'username' => $row[$this->user_field],
                    'email'    => $row[$this->email_field],
                    'address'  => $row[$this->address_field]
        )); // Set session data

        return TRUE; // Login was successful
    }

    /* Logout user
     *
     * @access    public
     * @return    void
     */

    function logout() {
        $this->CI->session->sess_destroy(); //Destroy session
    }

    /* Check if the user is logged
     * @access  public
     * @return  bool
     */

    function is_logged() {
        if ($this->CI->session->userdata('username'))
            return TRUE;
        else
            return FALSE;
    }

    /* Get current username or email
     * @access  public
     * @param   string
     * @return  string
     */

    function get_data_user($param = 'username') {
        if ($param == 'username')
            return $this->CI->session->userdata('username');
        if ($param == 'email')
            return $this->CI->session->userdata('email');
        if ($param == 'address')
            return $this->CI->session->userdata('address');
        return '';
    }

    /* Change password for a user
     * @access  public
     * @param   string
     * @param   string
     * @param   string
     * @return  bool
     */

    function change_password($user = '', $old_password = '', $new_password = '') {
        // Check data is set
        if ($user == '' || $old_password == '' || $new_password == '')
            return FALSE;

        // Check old password for this user
        $data = array($this->user_field     => $user, $this->password_field => crypt($old_password, $this->salt));
        $query                = $this->CI->db->get_where($this->user_table, $data);
        if ($query->num_rows() != 1)
            return FALSE;

        // Update password
        $data = array($this->password_field => crypt($new_password, $this->salt));
        $this->CI->db->where($this->user_field, $user);
        if (!$this->CI->db->update($this->user_table, $data))
            return FALSE;

        return TRUE;
    }

    /* Change email for a user
     * @access  public
     * @param   string
     * @param   string
     * @return  bool
     */

    function change_email($user = '', $new_email = '') {
        // Check data is set
        if ($user == '' || $new_email == '')
            return FALSE;

        // Update email
        $data = array($this->email_field => $new_email);
        $this->CI->db->where($this->user_field, $user);
        if (!$this->CI->db->update($this->user_table, $data))
            return FALSE;

        // Set new internal email
        $this->CI->session->set_userdata(array('email' => $new_email));
        return TRUE;
    }

} 
```

# css - 移动设备上的基础框架重新排序元素

> ID：13872352
> 
> 赞同：1
> 
> 时间：2012-12-14T03:45:04.557
> 
> 标签：css, grid, frontend, zurb-foundation

我正在使用基础框架 3.2。

我的内容区域占用 9 列，侧栏（右侧）占用 3 列。

当我在移动设备上查看页面时，我的内容区域首先在顶部，然后在内容区域侧栏下方。这当然是默认的网格行为并按预期工作。

相反，我想先渲染侧边栏，然后在内容区域下方。

那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:35:42.480

我为 Bootstrap 使用了[类似的技术](https://stackoverflow.com/questions/12838293/bootstrap-3-column-layout-stacking-issue/12846905#12846905)（它独立于框架）。我想你有这样的标记：

```
​&lt;div class="row">
  <div class="nine columns content">
      <h1>Content</h1>
  </div>
  <div class="three columns sidebar​​">
      <h1>Sidebar</h1>
  </div>
</div> 
```

将侧边栏放在首位：

```
<div class="row">
  <div class="three columns sidebar">
      <h1>Sidebar</h1>
  </div>
  <div class="nine columns content">
      <h1>Content</h1>
  </div>
</div> 
```

然后向右浮动：

```
.sidebar {
  float: right;
} 
```

在移动设备上重置浮动：

```
@media only screen and (max-width: 767px) {
  .sidebar {
    float: none;
  }
} 
```

看看[它是如何工作](http://jsfiddle.net/2zarD/)的。

# java - 将一个方法拆分为多个

> ID：13872353
> 
> 赞同：-2
> 
> 时间：2012-12-14T03:45:05.953
> 
> 标签：java, android

当方法单一时，它工作正常。

```
String as = System.getProperty("line.separator");

    ArrayList<String> products = new ArrayList<String>();
products.add("Banana" +as+ "Its color is yellow.");
products.add("Orange" +as+ "Orange is a sour fruit.");
products.add("Onion" +as+ "Onion usually used on Pizza"); 
```

如果它被分成多个；这没用。

```
String as = System.getProperty("line.separator");

ArrayList<String> products = new ArrayList<String>();
    addFirstThousand(products);
    addSecondThousand(products);

    private void addFirstThousand(ArrayList<String> products) {
        products.add("Banana" +as+ "Its color is yellow.");
        products.add("Orange" +as+ "Orange is a sour fruit.");
        products.add("Onion" +as+ "Onion usually used on Pizza");
        }

    private void addSecondThousand(ArrayList<String> products) {
    products.add("Apple" +as+ "Apple is a big corporation");
    products.add("Love" +as+ "Love is releted to heart");
    products.add("Pizza" +as+ "It's origineted from Italy");

    } 
```

为了更容易理解：

![在此处输入图像描述](../Images/7bf7b119f62bbaf18dd9ce62dd470390.png)

如何将其拆分为多个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:53:34.317

您正在尝试从类代码本身中调用方法。您不能这样做（静态初始化块除外，在这种情况下不起作用）。

根据您的工作地点，需要移动以下代码：

```
addFirstThousand(products);
addSecondThousand(products); 
```

*   如果您在 中工作`Activity`，则此代码应在`onCreate()`;
*   对于一个`Fragment`，使用`onViewCreated()`；
*   对于其他任何事情，请使用构造函数。

其余的应该保持原样。

像这样的东西（对于一个`Activity`）：

```
public class MyActivity extends Activity {
    String as = System.getProperty("line.separator");

    ArrayList<String> products = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addFirstThousand(products);
        addSecondThousand(products);
    }

    private void addFirstThousand(ArrayList<String> products) {
        products.add("Banana" +as+ "Its color is yellow.");
        products.add("Orange" +as+ "Orange is a sour fruit.");
        products.add("Onion" +as+ "Onion usually used on Pizza");
    }

    private void addSecondThousand(ArrayList<String> products) {
        products.add("Apple" +as+ "Apple is a big corporation");
        products.add("Love" +as+ "Love is releted to heart");
        products.add("Pizza" +as+ "It's origineted from Italy");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:11:16.883

可能有原因。。

1.  您正在从静态方法调用`addFirstThousand(products);`这些 `addSecondThousand(products);`方法。
    **解决方案**：make `addFirstThousand(products);`and `addSecondThousand(products);`to static**或**使用创建对象调用这些方法。
2.  您正在调用来自不同类的这些方法`addFirstThousand(products);`。**解决方案**：使用创建对象调用这些方法。`addSecondThousand(products);`

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T03:52:48.720

我只能猜测没有确切编译器错误的答案。我的猜测是您已经在另一个方法中声明了`addFirstThousand()`and`addSecondThousand()`方法。Java 不允许这样做。如果是这种情况，那么您可以通过将这些方法移到包含方法之外来解决问题。它们应该在一个*类*中声明，而不是在其他方法中。**

# database - 从 DB2 中的别名获取最大值

> ID：13872355
> 
> 赞同：0
> 
> 时间：2012-12-14T03:45:22.530
> 
> 标签：database, db2

我想在我的别名中搜索最大值。这是我的查询

```
SELECT DISTINCT IPK.NIM,IPK.NAMA,IPK.IPK
FROM MAHASISWA M, PENILAIAN P, MATA_KULIAH MK, KRS K,
(SELECT M.NIM,M.NAMA, ROUND(SUM(P.ANGKA*MK.SKS)/SUM(MK.SKS),2) AS IPK
FROM MAHASISWA M, PENILAIAN P,MATA_KULIAH MK,KRS K
WHERE M.NIM=K.NIM AND MK.KODE_MK=K.KODE_MK AND K.NILAI=P.NILAI GROUP BY M.NIM,M.NAMA
) AS IPK
WHERE IPK.IPK=(SELECT MAX(IPK.IPK) FROM IPK); 
```

但是当我运行它时，它说没有找到 DB2ADMIN.IPK。如何在我的查询中从我自己的别名中搜索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:47:09.100

你应该能够做这样的事情：

```
SELECT DISTINCT IPK.NIM,IPK.NAMA,IPK.IPK
    FROM MAHASISWA M, PENILAIAN P, MATA_KULIAH MK, KRS K,
    (
        SELECT M.NIM,M.NAMA, ROUND(SUM(P.ANGKA*MK.SKS)/SUM(MK.SKS),2) AS IPK
           FROM MAHASISWA M, PENILAIAN P,MATA_KULIAH MK,KRS K
           WHERE M.NIM=K.NIM AND MK.KODE_MK=K.KODE_MK AND K.NILAI=P.NILAI 
           GROUP BY M.NIM,M.NAMA
           ORDER BY IPK DESC
           FETCH FIRST ROW ONLY               
    ) AS IPK; 
```

这将导致内部查询仅返回最大行。

以下是如何获得`IPK`每个平均值：

```
SELECT IPK.NIM,IPK.NAMA, AVG(IPK.IPK)
    FROM MAHASISWA M, PENILAIAN P, MATA_KULIAH MK, KRS K
    (
        SELECT M.NIM,M.NAMA, ROUND(SUM(P.ANGKA*MK.SKS)/SUM(MK.SKS),2) AS IPK
           FROM MAHASISWA M, PENILAIAN P,MATA_KULIAH MK,KRS K
           WHERE M.NIM=K.NIM AND MK.KODE_MK=K.KODE_MK AND K.NILAI=P.NILAI 
           GROUP BY M.NIM,M.NAMA

    ) AS IPK
    GROUP BY IPK.NIM,IPK.NAMA; 
```

# objective-c - 是否可以使用 KVO 来观察 CLLocation 对象？

> ID：13872358
> 
> 赞同：1
> 
> 时间：2012-12-14T03:45:40.953
> 
> 标签：objective-c, ios, core-location, key-value-observing

我的 CLLocation 对象位于不同的对象中，并且我的一个 UI 屏幕想要从该对象更新某些统计信息，是否可以使用 KVO 来观察这些变化，例如经度和纬度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:51:05.520

基本上，我不会将 KVO 与任何没有明确记录的 Cocoa 对象或值一起使用。即使它起作用了，你也不能指望它继续这样做。

但是 CLLocationManager 有一个委托 (CLLocationManagerDelegate)，所有更改都会报告给它，那你为什么不使用它呢？或者，如果其他对象已经是委托，为什么不能安排它向您的对象发送消息，或者至少发布通知？这听起来像任何其他基本对象通信问题。

# c# - 如何使用反射转换为通用接口？

> ID：13872359
> 
> 赞同：4
> 
> 时间：2012-12-14T03:45:47.950
> 
> 标签：c#, generics, reflection

我有一本字典，我用它来促进一些基于 api 版本号的内部路由。基本上发生的事情是我在字典中查找和操作并尝试调用它的 RUN 方法。但为了做到这一点，我需要能够将对象转换为它的接口。这就是我的意思，这是字典：

```
 public Dictionary<string, Type> Routing = new Dictionary<string, Type>();

    public VersionRouter()
    {
        Routing.Add("1.0", typeof(OperationV1<RequestObjectV1, ResponseObjectV1>));
        Routing.Add("2.0", typeof(OperationV1<RequestObjectV2, ResponseObjectV1>));
        Routing.Add("3.0", typeof(OperationV1<RequestObjectV2, ResponseObjectV2>));
    } 
```

我可以像这样获取我想要实例化的正确类型：

```
var myOperation = Routing["2.0"]; 
```

然后在正常情况下，我会像这样实例化并转换它：

```
var myInstance = (MyInterface) Activator.CreateInstance(myOperation); 
```

但是，该接口是通用的，因为它需要知道 Request 和 Response 类型是什么：

```
var myInstance = (MyInterface<TRequest, TResponse>) Activator.CreateInstance(myOperation); 
```

在这个阶段，我不知道如何告诉它那些请求和响应类型是什么。我假设它可以通过反射来完成。我发现我可以通过类似 myOperation.GetGenericArguments() 的方式获取这些通用参数，但我不确定在这个阶段如何利用它来发挥我的优势。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T06:17:40.203

为了扩展 SLaks 答案：

处理您的场景没有合乎逻辑的方法。您要做的是让一段代码在运行时使用不同的类型。这只能通过构建单独的代码分支（可以完成）或回退到动态/反射来完成。为了澄清这一点：

```
class Apple { }
class Pear { }

void Handle(object what)
{
    // either
    if (what is Apple) {}
    else if (what is Pear) {}

    // or
    dynamic x = what;
    x.LetsHopeThisMethodExists();

    // or
    what.GetType().GetMethod('lorem').Invoke(what, null);
} 
```

现在，我们可以坚持 SLaks 的提议，即为 和 声明一个基类型`Apple`，`Pear`即`Fruit`。这样，`Handle`可以接受 a`Fruit`并对`Apple`s 和`Pear`s 上可用的通用功能执行逻辑。

这就引出了一个问题，如何使用泛型来做到这一点。默认情况下，泛型不支持变体，但是在 .NET 4.0 中，这当然是可能的。`out`您可以通过在类型参数上应用关键字来将接口（但仅是接口）声明为协变。这使您可以执行以下操作：

```
interface IFruit { }
interface IBasket<out TFruit> where TFruit : IFruit { }

class Apple : IFruit { }
class Pear : IFruit { }

class FruitBasket<TFruit> : IBasket<TFruit> where TFruit : IFruit { }
void Handle(IBasket<IFruit> what) { }

Handle(new FruitBasket<Apple>());
Handle(new FruitBasket<Pear>()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T03:49:17.787

这本来就是不可能的。
您无法在编译时表达此类型，因为直到运行时您才知道类型参数。
因此，您不能对其进行强制转换，也不能拥有该类型的变量。

如果可能，您应该使接口协变，并将其强制转换为使用基本类型。

或者，您可以创建一个非泛型或协变的基本接口并使用它。

# php - MySQL 查询在 Workbench 中工作正常，但在 PHP 中略有不同

> ID：13872363
> 
> 赞同：1
> 
> 时间：2012-12-14T03:46:02.880
> 
> 标签：php, mysql

我有这个 MySQL 查询在 MySQL 环境中运行良好，但是在 PHP 中运行时不会因为它在每种情况下（记录）显示 REGION、PROVINCIA、COMUNA 的相同值，而不是属于每个独立记录的正确值，因为它们可能彼此不同。

我需要找到正确的 SQL 语句以允许我获取查询中涉及的每条记录 (3) 的实际 REGION、PROVINCIA、COMUNA 的方式进行查询。

表 pos1postul、pos2pad 和 pos3mad 上的记录通过字段 REGION_ID、PROVINCIA_ID、COMUNA_ID 引用表 dir_region、dir_provincia 和 dir_comuna。

任何帮助都感激不尽。

```
SELECT * FROM db3.pos1postul 

INNER JOIN db3.dir_region AS region1 ON pos1postul.pos1_region=region1.REGION_ID
INNER JOIN db3.dir_provincia AS provincia1 ON  pos1postul.pos1_prov=provincia1.PROVINCIA_ID 
INNER JOIN db3.dir_comuna AS comuna1 ON pos1postul.pos1_comu=comuna1.COMUNA_ID, db3.pos2pad

INNER JOIN db3.dir_region AS region2 ON pos2pad.pos2_regionpad=region2.REGION_ID
INNER JOIN db3.dir_provincia AS provincia2 ON     pos2pad.pos2_provpad=provincia2.PROVINCIA_ID 
INNER JOIN db3.dir_comuna AS comuna2 ON pos2pad.pos2_comupad=comuna2.COMUNA_ID, db3.pos3mad 

INNER JOIN db3.dir_region AS region3 ON pos3mad.pos3_regionmad=region3.REGION_ID 
INNER JOIN db3.dir_provincia AS provincia3 ON  pos3mad.pos3_provmad=provincia3.PROVINCIA_ID 
INNER JOIN db3.dir_comuna AS comuna3 ON pos3mad.pos3_comumad=comuna3.COMUNA_ID 

WHERE pos1_aluID='n' 
AND pos2_padID=pos1_IDpostulpad 
AND pos3_madID=pos1_IDpostulmad 
```

PHP代码：

```
$idpostul_rsPostul = "-1";
if (isset($idpostul)) {
  $idpostul_rsPostul = $idpostul;
}
mysql_select_db($database_conndb3, $conndb3);
$query_rsPostul = sprintf("SELECT * FROM db3.pos1postul INNER JOIN db3.dir_region AS     region1 ON pos1postul.pos1_region=region1.REGION_ID INNER JOIN db3.dir_provincia AS     provincia1 ON pos1postul.pos1_prov=provincia1.PROVINCIA_ID INNER JOIN db3.dir_comuna AS     comuna1 ON  pos1postul.pos1_comu=comuna1.COMUNA_ID, db3.pos2pad INNER JOIN db3.dir_region AS region2 ON pos2pad.pos2_regionpad=region2.REGION_ID  INNER JOIN db3.dir_provincia AS provincia2 ON pos2pad.pos2_provpad=provincia2.PROVINCIA_ID INNER JOIN db3.dir_comuna AS comuna2 ON  pos2pad.pos2_comupad=comuna2.COMUNA_ID, db3.pos3mad INNER JOIN db3.dir_region AS region3 ON pos3mad.pos3_regionmad=region3.REGION_ID  INNER JOIN db3.dir_provincia AS provincia3 ON pos3mad.pos3_provmad=provincia3.PROVINCIA_ID INNER JOIN db3.dir_comuna AS comuna3 ON  pos3mad.pos3_comumad=comuna3.COMUNA_ID WHERE pos1_aluID=%s AND pos2_padID=pos1_IDpostulpad AND pos3_madID=pos1_IDpostulmad",  GetSQLValueString($idpostul_rsPostul, "int"));
$rsPostul = mysql_query($query_rsPostul, $conndb3) or die(mysql_error());
$row_rsPostul = mysql_fetch_assoc($rsPostul); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:14:23.407

*   我没有`GetSQLValueString()`在您的代码中看到定义。
    *   我猜它和[这个](https://stackoverflow.com/q/4458180/1402846)一样吗？如果是这样，您的 PHP 代码看起来还可以，但与您的原始 SQL 不同（`pos1_aluID='n'`原始 SQL 与`pos1_aluID=<some integer here>`PHP 的 SQL 中的对比）。
    *   我建议您在 PHP ( `print $query_rsPostul;`) 中打印出 SQL，将其复制并粘贴到 Workbench，然后运行它并检查它是否是您想要的。
*   我看不到您如何`mysql_fetch_assoc()`在代码中使用结果。

    *   [`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php) **只获取结果集的一行**。要获取所有行，请使用循环，例如

        ```
        while ($row_rsPostul = mysql_fetch_assoc($rsPostul)) {
            // Do something with $row_rsPostul here.
        } 
        ```

* * *

[编辑（2012-12-16）：]

*   也许您的查询结果中有同名的列？

    *   您需要使用列别名，例如

        ```
        SELECT region1.REGION_ID as region1_REGION_ID,
               region2.REGION_ID as region2_REGION_ID,
               region3.REGION_ID as region3_REGION_ID,
               .... 
        ```

        然后您可以使用 , 等来访问`$row_rsPostu["region1_REGION_ID"]`它们`$row_rsPostu["region2_REGION_ID"]`。

*   也许您没有为您的数据库连接设置字符集？

    *   如果您的连接使用的字符集与您的数据库/表/列不同，则可能会出错。在您的之后和之前尝试[`mysql_set_charset("utf8", $conndb3)`](http://php.net/manual/en/function.mysql-set-charset.php)（替换`"utf8"`为您的字符集）。[`mysql_connect()`](http://php.net/manual/en/function.mysql-connect.php)[`mysql_select_db()`](http://php.net/manual/en/function.mysql-select-db.php)
*   仔细检查您的数据库名称 ( `$database_conndb3`) 和连接参数（即您输入的那些[`mysql_connect()`](http://php.net/manual/en/function.mysql-connect.php)。确保它们与您在 Workbench 中使用的相同。

* * *

最后，请注意PHP 中**旧的*mysql*扩展自 PHP 5.5.0 起已被弃用，并将在未来被删除**。看

*   [`mysql_select_db()`](http://php.net/manual/en/function.mysql-select-db.php)
*   [`mysql_query()`](http://php.net/manual/en/function.mysql-query.php)
*   [`mysql_error()`](http://php.net/manual/en/function.mysql-error.php)
*   [`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)
*   [选择 API](http://php.net/manual/en/mysqlinfo.api.choosing.php)
*   [PHP: mysql v mysqli v pdo](https://stackoverflow.com/questions/12097245/php-mysql-v-mysqli-v-pdo)

# awk - 用 AWK 连接每两行

> ID：13872365
> 
> 赞同：0
> 
> 时间：2012-12-14T03:46:37.417
> 
> 标签：awk

以下命令不会从奇数行中选择第 2 个字符串，也不会从奇偶行中选择第 4 个字符串。 `show_statistic.sh | grep -A 1 vlan | awk '{ if ( ( NR % 2 ) == 1 ) { print $2 } else { print $4 } }'`
它打印每行的第二个和第四个字符串。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:05:03.337

看起来您的预期结果来自包含“vlan”的行和以下行。

您的代码将使用唯一的响应，但响应不止一个，您的不同结果将被分隔为仅包含“--”的行，如 grep 中所述：

```
 -A NUM
      Places  a  line  containing  a  group  separator  (--)   between
      contiguous  groups  of  matches.  With the -o or --only-matching
      option, this has no effect and a warning is given. 
```

因此，有了这一行，您将需要第 1、4、7 行的第二个参数......以及第 2、5、8 行的第四个参数......

所以你的代码可以是：

```
show_statistic.sh | grep -A 1 vlan | awk '{  if ( ( NR % 3 ) == 1 ) { print $2 } else { if ( NR % 3 == 2 ) { print $4 } } }' 
```

我写了一个小文本文件来测试：

```
1line here
2foo
vlan 2a 3a 4a 5a
1 2 3 4 5
bar

line here
vlan 2a 3a 4a 5a
1 2 3 4 5
line here
baz 
```

结果是：

```
$ grep -A 1 vlan file| awk '{  if ( ( NR % 3 ) == 1 ) { print $2 } else { if ( NR % 3 == 2 ) { print $4 } } }'
2a
4
2a
4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:22:11.750

如果您的 shell 命令的输出遵循@Pierre-LouisLaffont 创建的示例文件的布局，那么这是您应该使用的完整命令：

```
$ awk 'f{print $4;f=0} /vlan/{print $2;f=1}' file
2a
4
2a
4 
```

When if finds vlan it prints the 2nd field and sets a flag to say vlan was found. On the next line it prints the 4th field and resets the flag. Couldn't be much simpler.

# css - 为什么我不能使用 CSS 垂直对齐文本？

> ID：13872371
> 
> 赞同：5
> 
> 时间：2012-12-14T03:48:18.073
> 
> 标签：css, vertical-alignment

我的页面上有一个蓝色框，距离顶部和左侧 100 像素。然后我希望蓝色框中的文本垂直对齐。为什么我下面的代码不能垂直对齐文本？

```
<!DOCTYPE html>
<html>
        <body>
                <div style="height:200px; background:blue; display:table-cell; vertical-align:middle; color:white;position:absolute; top:100px; left:100px;">
                        this is text;
                </div>
        </body> 
</html> 
```

如何让文本垂直对齐？

**注意**- 如果我删除绝对位置，则文本垂直对齐。但这是不可接受的，因为我需要绝对定位来处理其他一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:56:15.643

将它包含在一个单独的 div 中，如下所示：

**CSS**

```
#Div0 {
    position:absolute; 
    top:100px; 
    left:100px;
}

#Div1 {
    height:200px; 
    background:blue; 
    display:table-cell; 
    vertical-align:middle; 
    color:white;
} 
```

**HTML**

```
<div id="Div0">
    <div id="Div1">
        this is text
    </div>
</div>​​​​​​​​​​​​​​​​​​​ 
```

**解决方案示例：http:** [//jsfiddle.net/rgDfg/](http://jsfiddle.net/rgDfg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:58:51.183

如果你删除它会工作`position: absolute;`

所以你的 CSS 看起来像这样，

```
div{
    height:200px;        
    background:blue; 
    display:table-cell;
    vertical-align: middle;
    color: white;
} 
```

检查[**小提琴链接**](http://jsfiddle.net/XXbzM/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-11T18:11:54.573

您可以使用以下内容垂直对齐任何内容

```
.element {
  position: relative;
  top: 50%;
  transform: translateY(-50%);
} 
```

在这里阅读更多信息：http: [//zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/](http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T03:58:40.587

使用 css 最纯粹的方法是使用如下`display`属性：

```
#foo { display: table; position: absolute; } 
#bar {
    display: table-cell;
    vertical-align: middle;
    height: 200px
} 
```

然后你的html

```
<div id="foo">
    <div id="bar">
        Your text
    </div>
</div> 
```

应该居中..并且`#foo`它的绝对位置是你不想摆脱的..

# iphone - 使用计数索引对数组进行排序

> ID：13872383
> 
> 赞同：1
> 
> 时间：2012-12-14T03:49:54.410
> 
> 标签：iphone, objective-c, ios, xcode, nsarray

我有以下问题：我有一个整数数组，我想把它们放在一个数据结构中，每个整数都有它的出现次数，然后按出现次数排序。

所以如果我有：

```
[1, 3, 4, 6, 6, 3, 1, 3] 
```

我会有：

```
[(4,1), (6,2), (1,2), (3,3)] 
```

其中 (x,y) == （整数，出现次数）。

我尝试使用 NSCountedSet 但效果不佳，我想知道最好的方法是什么。

到目前为止，我已经完成了以下工作：

```
NSCountedSet *totalSet = [[NSCountedSet alloc] initWithArray:finalArray]; 
```

其中 finalArray 是未排序的完整原始数据的最终数组。totalSet 分组为 (x,y) 但未排序（理想情况下，应按“y”排序）。

我也尝试过这样做，但没有奏效：

```
NSArray *sortedArray = [finalArray sortedArrayUsingSelector:@selector(compare:)]; 
```

然后做：

```
NSCountedSet *totalSet = [[NSCountedSet alloc] initWithArray:finalArray]; 
```

但这并没有改变“totalSet”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T04:59:05.913

首先，让我们定义一个方便的元组类型，我们可以使用它来将一个数字与其出现次数相关联：

```
@interface Pair : NSObject
@property(nonatomic, strong) id key;
@property(nonatomic, strong) id value;
- (id)initWithKey:(id)key value:(id)value;
@end

@implementation Pair
- (id)initWithKey:(id)key value:(id)value;
{
    if((self = [super init])) {
        _key = key;
        _value = value;
    }
    return self;
}
- (NSString *)description
{
    return [NSString stringWithFormat:@"(%@,%@)", self.key, self.value];
}
@end 
```

然后，为了获得所需的结果，使用计数集来计算出现次数，然后将结果填充到元组数组中并按出现次数排序。

```
- (void)testOccurrenceCounting
{
    NSArray *numbers = @[@1, @3, @4, @6, @6, @3, @1, @3];
    NSCountedSet *set = [[NSCountedSet alloc] initWithArray:numbers];
    NSMutableArray *counters = [NSMutableArray arrayWithCapacity:[set count]];
    [set enumerateObjectsUsingBlock:^(id obj, BOOL *stop) {
        [counters addObject:[[Pair alloc] initWithKey:obj value:@([set countForObject:obj])]];
    }];
    [counters sortUsingDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"value" ascending:YES]]];

    NSLog(@"%@", counters);
} 
```

`counters`现在是一个排序的`Pair`对象数组，其中`key`属性保存数字，`value`属性保存出现次数，两者都装箱为`NSNumbers`. 从那里，您可以将它们拆箱或按您认为合适的方式操作集合。

作为有效的证明，下面是`NSLog`语句的输出：

```
(
    "(4,1)",
    "(6,2)",
    "(1,2)",
    "(3,3)"
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T06:03:17.407

您可以将数字及其计数放入字典数组中，如下所示：

```
 NSArray *arr = @[@1, @3, @4, @6, @6, @3, @1, @3];
    NSCountedSet *totalSet = [NSCountedSet setWithArray:arr];
    NSMutableArray *dictArray = [NSMutableArray array];
    for (NSNumber *num in totalSet) {
        NSDictionary *dict = @{@"number":num, @"count":@([totalSet countForObject:num])};
        [dictArray addObject:dict];
    }
    NSArray *final = [dictArray sortedArrayUsingDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"number" ascending:YES ]]];
    NSLog(@"%@",final); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T05:26:11.513

这是我的答案版本。如果您不想使用自定义类并希望将两者作为单独的数组按其出现次数的顺序排序，您可以试试这个。

创建一个这样的函数，

```
NSInteger countedSort(id obj1, id obj2, void *context) {
    NSCountedSet *countedSet = (__bridge NSCountedSet *)(context);
    NSUInteger obj1Count = [countedSet countForObject:obj1];
    NSUInteger obj2Count = [countedSet countForObject:obj2];

    if (obj1Count < obj2Count) return NSOrderedAscending;
    else if (obj1Count > obj2Count) return NSOrderedDescending;
    return NSOrderedSame;
} 
```

并使用这个，

```
 NSArray *finalArray = @[@1, @3, @4, @6, @6, @3, @1, @3];    
    NSCountedSet *totalSet = [[NSCountedSet alloc] initWithArray:finalArray];
    NSArray *sortedBasedOnCountArray = [[totalSet allObjects] sortedArrayUsingFunction:countedSort context:(__bridge void *)(totalSet)];
    NSLog(@"sortedObjectsBasedOnCountArray = %@", sortedBasedOnCountArray);

    NSMutableArray *countArray = [NSMutableArray arrayWithCapacity:[sortedBasedOnCountArray count]];

    for (id object in sortedBasedOnCountArray) {
        [countArray addObject:[NSNumber numberWithInt:[totalSet countForObject:object]]];
    }
    NSLog(@"countArray = %@", countArray); 
```

**输出：**

```
sortedObjectsBasedOnCountArray = (
    4,
    6,
    1,
    3
)

countArray = (
    1,
    2,
    2,
    3
) 
```

请注意，两个数组都以相同的顺序排序，并且可以使用数组的索引来链接它们。

还要检查这个[NSBag](https://github.com/erica/NSBag)实现。

# actionscript-3 - as3 使用 flascc 进行条件编译

> ID：13872387
> 
> 赞同：1
> 
> 时间：2012-12-14T03:50:14.120
> 
> 标签：actionscript-3, mxmlc, conditional-compilation, flascc

我有 as3 项目，其中包含自定义 flex-config.xml 和 mxmlc 的条件编译指令，如下所示：

```
<define append="true">
  <name>CONFIG::DEBUG</name>
  <value>true</value>
</define>
<define append="true">
  <name>CONFIG::RELEASE</name>
  <value>false</value>
</define> 
```

我怎么能用 flascc g++ 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:28:09.120

FlasCC 的 gcc文档[说](http://www.adobe.com/devnet-docs/flascc/docs/Reference.html)

```
-fllvm-llc-opt= Pass an argument through to the final invocation of llc (LLVM-IR->ABC codegen). 
```

在运行`$FLASCC_HOME/usr/bin/llc --help`节目时

```
-ascopt=<asc options> - Extra options to pass to ASC when compiling ActionScript 
```

最后，运行`java -jar $FLASCC_HOME/sdk/usr/lib/asc2.jar`表明它需要的参数之一是

```
[-config <ns::name=value>] 
```

所以看起来我们应该能够做到这一点：

`gcc ... -fllvm-llc-opt="-ascopt=-config CONFIG::RELEASE=true"`

不幸的是，虽然该标志确实将其传递给 asc.jar (!)，但它似乎是作为*一个参数*（而不是两个）传递的，因此它会出错。所需的空间`-config`把事情搞砸了。

[解决方法](http://forums.adobe.com/thread/1117606?tstart=0)是分别传递两个arg：

`gcc ... -fllvm-llc-opt=-ascopt=-config -fllvm-llc-opt=-ascopt=CONFIG::RELEASE=true`

# shell - 如何在shell中获取字符串中的每个字符？

> ID：13872397
> 
> 赞同：-2
> 
> 时间：2012-12-14T03:51:27.847
> 
> 标签：shell

例如。

我有一个字符串：

st='abcd'

在 CI 中可以使用 st[0]、st[1]..来获取索引处的字符。但我不知道如何在shell中做到这一点。

我想获取字符串 st 中的每个字符，如何在 shell 中获取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:04:15.507

假设您正在使用 bash，并且您想要迭代字符串中的每个字符以进一步操作它，您可以执行以下操作：

```
#!/bin/bash
str="abcd 01234"; 
for i in $(seq 0 $(( ${#str} - 1 )) ); do
    echo ${str:$i:1};
done 
```

或者，如果你想要它在一行中：

```
str="abcd 01234"; for i in $(seq 0 $(( ${#str} - 1 )) ); do echo ${str:$i:1};done 
```

如果您不想操作字符，只需单独打印它们，请改用以下内容：

```
echo "1234 5678" | fold -w1 
```

# javascript - 如何在不使用 ng-transclude 的情况下为 angularjs 编写替换 dom 元素的指令？

> ID：13872402
> 
> 赞同：3
> 
> 时间：2012-12-14T03:52:35.097
> 
> 标签：javascript, angularjs

我希望编写一个基本上可以改变这一点的指令：

```
<g:text>Hello There</g:text>

to

<svg class="gx-text"><text>Hello There</text></svg> 
```

这样在dom中，`<g:text>`元素已经完全被`<svg>`元素替换了

我不想使用 ng-transclude，因为我发现它向 dom 添加了一堆其他元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T05:36:56.880

```
var app = angular.module('app', []);
app.directive('gText', function() {
    return {
        restrict: 'E',
        compile: function(tElement, attrs) {
            tElement.replaceWith('<svg class="gx-text"><text>'
                + tElement.text() + '</text></svg>');
        }
    }
}); 
```

​<a href="http://jsfiddle.net/mrajcok/jwzAV/" rel="nofollow">小提琴

# python - Python 套接字和拆分函数

> ID：13872406
> 
> 赞同：0
> 
> 时间：2012-12-14T03:53:05.903
> 
> 标签：python, sockets, split

我是 Python 新手，我需要用套接字做一个程序。我的服务器需要使用套接字向客户端发送数据。它简单地给出了一个文件的名称和他的大小。

因此，我使用 TCP Server 类以以下格式发送数据：

```
for fname, size in db.getfiles():
  temp = fname + " " + size + " "
  buffer = buffer + temp

self.request.send(buffer) 
```

所以我有一个很长的字符串要发送。

我在客户端收到它，我想使用：

```
 List = data.split(" ") 
```

但是我想像并行数组一样使用 List ，我可以在一个循环中打印名称和文件，我想要：

```
 for name, f_size in List:
      print name, f_name 
```

我怎么能做到这一点？如果我不能在同一个列表中执行此操作，我如何再次拆分列表以便以这种方式打印？

如果无法做到这一点，我如何跳转列表中的每两个索引，以便我可以同时打印这两个东西？

例如：

```
 for i in List:
     print i, i + 1
     #jump now to index 2 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:15:17.590

当前消息格式的问题在于，您在两个数据值（`fname`和`size`）之间以及单独的数据项（即不同文件的名称和大小）之间使用了相同的分隔符。虽然可以成对获取值，但它需要比我认为必要的更多的努力。相反，我建议使用两个不同的分隔符。

例如，您可以将每个文件的信息放在单独的行上，方法是在大小之后放置一个换行符 ( `"\n"`)，而不是当前放置的空间。然后在阅读结束时，您将需要两个两个`split`操作，从而产生一个列表列表：

```
raw_data = some_socket_read_function()
data = [line.split(" ") for line in raw_data.split("\n")]

for fname, size in data: # you can unpack the two values directly while iterating
    do_stuff(fname, size) 
```

如果您不想使用换行符，您可以使用各种其他字符（逗号、冒号等）来区分数据中的两种分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:25:59.120

其他两个答案是正确的，以另一种格式发送数据会更干净。但是，如果由于某种原因您无法更改所接收数据的格式，您可以这样做

```
List = data.split(" ")
List = zip(List[::2], List[1::2])

for name, size in List:
  # do something with name and size 
```

该`zip`函数创建一个对列表，从两个列表中的相应元素形成每个对。所以`zip([1,2,3], [4,5,6])`返回`[(1,4), (2,5), (3,6)]`。`List[::2]`返回 中的每个第二个元素`List`，从元素 0 开始，并`List[1::2]`返回`List`从元素 1 开始的每个第二个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:00:05.740

您应该在通过网络发送列表时对其进行序列化，并在另一端对其进行反序列化[。](https://en.wikipedia.org/wiki/Serialization)所以，在发送端是这样的：

```
import pickle

list = db.getfiles()
self.request.send(pickle.dumps(list)) 
```

在接收方：

```
import pickle
List = pickle.loads(data) 
```

序列化将您的数据结构转换为适合传输或存储的格式，反序列化将编码数据转换回原始数据结构。这样做，您从发送方的元组列表开始（假设这是您从中得到的`db.getfiles()`），最终得到接收方的元组列表。

该`pickle`模块不是唯一可用于序列化的机制。其他常见的序列化格式包括 JSON（通过`json`模块）、YAML 和 XML。

# groovy - 运行这个 Groovy 脚本时，幕后发生了什么？

> ID：13872408
> 
> 赞同：0
> 
> 时间：2012-12-14T03:53:32.113
> 
> 标签：groovy, dependencies, geb, grape

```
@Grapes([
    @Grab("org.codehaus.geb:geb-core:0.7.2"),
    @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.15.0"),
    @Grab("org.seleniumhq.selenium:selenium-support:2.15.0")
])
import geb.Browser

Browser.drive {
  // Load the page
  go "http://www.whu.edu.cn"

  // $("a") returns all hyperlinks on the page, similar to jQuery
  $("a").each { a ->
     // Display the required link properties and attributes
     println """
        The link to '${a.@href}' with text '${a.text()}' is at location (${a.x}, ${a.y}),
        with a height of ${a.height}px and a width of ${a.width}px.
     """
  }
} 
```

我刚刚在 Eclipse 中创建了我的第一个 Groovy 项目，并在项目中创建了我的第一个 Groovy 类。为课程编写的所有内容都如上。当我运行脚本时，它没有抛出任何错误，也不会及时终止。

它是否试图下载所有带注释的依赖项？如果是这样，是否每次运行时都需要下载依赖项？还是一劳永逸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:24:46.387

当你运行它时，它会检查每个带有@Grab 注释的库的正确版本是否已下载，如果没有，将尝试下载它。不仅是命名库，还有那些库的依赖项。

所以，是的，第一次运行它可能需要一些时间。随后的运行应该花费更少的时间。

请注意，这只是为了方便。您还可以下载所需的库，并在“groovy”命令的 -classpath 参数中指定它们（并删除 Grapes/Grab 结构）。

有关详细信息，请参阅[http://groovy.codehaus.org/Grape](http://groovy.codehaus.org/Grape)

# linux - 如何在 Ubuntu Unity 中获得扩展的标题栏？

> ID：13872410
> 
> 赞同：4
> 
> 时间：2012-12-14T03:53:38.767
> 
> 标签：linux, ubuntu-unity

Mozilla Firefox 和 Ubuntu Software Center 等应用程序能够将标题栏渐变向下扩展到其工具栏区域。示例如下：

![说明 Ubuntu Unity 中扩展标题栏效果的屏幕截图](../Images/222ee5621f1fe142f1c2878ce4a7fb2e.png)

如何在我的应用程序中实现相同的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:47:55.597

首先，您提到的两个应用程序是使用不同的工具包和技术构建的，因此采用不同的方法来做您愿意做的事情。虽然 Firefox 使用`XUL/GTK2`，但 USC 使用`GTK3`. 我将解释这两种方法。

1.  Ubuntu 软件中心是使用 构建`GTK3`的，因此它的工具栏渐变是在主题 css 文件中定义的。实现这一点的代码是

    ```
    /* primary-toolbar */
    .primary-toolbar,
    .primary-toolbar .toolbar,
    .primary-toolbar.toolbar {
    -GtkWidget-window-dragging: true;

    background-image: -gtk-gradient (linear, left top, left bottom,
                                     from (shade (@dark_bg_color, 0.96)),
                                     to (shade (@dark_bg_color, 1.4)));
    border-bottom-color: shade (@dark_bg_color, 1.1);
    border-top-color: shade (@dark_bg_color, 1.09);
    border-style: solid;
    border-width: 1px 0 1px 0;

    color: @dark_fg_color;
    text-shadow: 0 -1px shade (@dark_bg_color, 0.7);

    box-shadow: inset 0 1px shade (@dark_bg_color, 0.94);
    } 
    ```

    为了在您的 gtk3 应用程序中使用它，您必须将类分配`primary-toolbar`给您的工具栏。有关这方面的适当文档，请查看[此处](http://developer.gnome.org/gtk3/3.5/GtkStyleContext.html#GTK-STYLE-CLASS-TOOLBAR%3aCAPS)。

2.  Firefox 是使用 XUL 构建的，并使用 GTK2 在 GNU/Linux 发行版（如 Ubuntu）上呈现小部件。Firefox的样式`tab-bar`来自相关主题文件中`menubar`定义的外观定义。`gtkrc`在默认主题 Ambience 的情况下，它是

    ```
    style "menubar" = "dark" {
      engine "murrine" {
        textstyle = 2
        text_shade = 0.33
        gradient_shades = {1.0, 1.0, 1.0, 1.0}
        lightborder_shade = 1.0
      }
    } 
    ```

在其他工具包中可以通过不同的方法来实现效果，但是建议您在gtk3中编写您的应用程序，以便使用原生样式。

# android - 设置图像资源

> ID：13872411
> 
> 赞同：0
> 
> 时间：2012-12-14T03:53:40.147
> 
> 标签：android, image, drawable

我正在为 ImageView 设置图像资源。根据条件，ImageView 将显示特定图像。

我正在使用这段代码：

```
exerciseImage.setImageResource(R.drawable.treadmill); 
```

在前两个条件（ifs）中，这一行没有显示任何错误。在下一个 Ifs 时，会发生错误。我可以保证我的图像在我的可绘制文件夹中。因为第一个到 ifs 没有显示任何错误。当我尝试使用智能感知时，没有显示所需的图像。有些在那里，但大多数不在。我真的不知道问题出在哪里，因为所有图像都在我的可绘制文件夹中。有任何想法吗？

我得到和错误。“无法解决或不是字段”

![在此处输入图像描述](../Images/c0beb6eba9ea2a20d369b0872625760e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:06:06.320

可能是`R.java`您的项目中没有生成该文件。

检查您的任何 xml 文件中是否有错误，然后检查您的图像是否具有有效名称。

然后构建和清理项目。如果问题仍然存在，请尝试检查您是否有任何导入语句，例如`import android.R;`删除它并再次构建和清理项目

# javascript - 创建一个页面以从 Rails 中的谷歌分析中排除访问者

> ID：13872413
> 
> 赞同：0
> 
> 时间：2012-12-14T03:54:46.483
> 
> 标签：javascript, ruby-on-rails, google-analytics, yield

我将谷歌分析脚本添加到我的布局中。我需要创建一个页面，使该页面的访问者能够从谷歌分析报告中排除。

要创建一个“exclude_me”标识符，我可以添加：

> _gaq.push(['_setVar','exclue_me']);

到我的谷歌脚本。然后我创建一个自定义分析过滤器，任何拥有该 cookie 的人都将被过滤。此脚本仅在一个特定页面上可用，而不是在布局上。

从概念上讲，这很容易......但我正在努力找出部署它的最佳方式......我的解决方案对我来说是“丑陋的”。请指出我哪里出错了或者应该怎么做。

您可以嘲笑的当前配置：两个谷歌脚本，一个在上面有排除行，一个没有。我那时

在布局和：

```
 <% content_for(:google_analytics_exclude) do %>
   <%= javascript_include_tag "google_analytics_exclude" %>
   <% end %> 
```

在视图中。

这个问题是我的布局加载了非排除版本和排除版本。如何告诉我的布局为除 1 之外的所有页面加载非排除 javascript？

另外，我不喜欢的是我有两个基本相同的javascript，除了异常行！好像很浪费不是吗？

我的第二次尝试是将我认为的 content_for javascript_include_tag 替换为

> _gaq.push(['_setVar','exclue_me']);

但我很确定这不会因为范围而起作用？想法？

# opengl-es - OpenGL ES 2.0：将 EGL_DEPTH_SIZE 添加到现有 EGL 上下文中

> ID：13872417
> 
> 赞同：2
> 
> 时间：2012-12-14T03:55:22.477
> 
> 标签：opengl-es, depth, egl

我正在处理一些 OGLES2 代码，它使用由某些框架软件*（我无权访问）*设置的上下文，并且我正在尝试绘制一个简单的立方体。

最终只有一个平面正方形在屏幕上移动，我调查了当前渲染上下文的配置，结果发现它`EGL_DEPTH_SIZE`设置为`0`，所以`z`我的所有顶点的值都被忽略了。

我需要在框架的上下文中操作，因为我正在使用它们提供的一些纹理*（映射到我的立方体面上）*所以我真的需要知道，有没有办法为这个上下文重新启用深度缓冲区？如果没有任何解决方法*（即我可以渲染到 VBO 还是会忽略我的所有`z`值）*？

# c++ - gdb 交互式控制台：查找共享库的可用列表

> ID：13872419
> 
> 赞同：2
> 
> 时间：2012-12-14T03:55:52.337
> 
> 标签：c++, linux, gdb

我需要在交互式控制台上使用 gdb 调试 C++ 应用程序（使用 g++-4.5 编译）。我对它知之甚少，除了 start、list 和 bt 命令。我不是要关于它的教程，因为我在我的老朋友 google 上找到了很多。我只需要一点帮助来解决我在帮助或参考中找不到的东西。

C++ 应用程序是一个 UnitTest++ 运行器，它链接多个共享库。所有这些库都是使用适当的调试信息标志 (-ggdb -O0) 构建的，我只需要一种方法来在其中一个共享库的某个源文件中设置断点。我不确定我应该如何导航到该列表并设置断点

任何 gdb 大师仍然想伸出援手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:17:14.313

在 gdb 中设置断点使用`break`命令。您也可以使用别名`b`。

例如，如果您想在第 61 行中断`file.cpp`

`(gdb) b file.cpp:61`

或者

`(gdb) b "file.cpp":61`

如果你想在类中的某个方法处中断，在 gdb 提示符下键入类名并按 Tab，它会显示类中的所有方法，然后你可以像这样设置断点。

示例`display()`中的方法`class Foo`

`(gdb) b Foo::display()`

如果您想要更具交互性/GUI 模式，请使用[Data Display Debugger(DDD)](http://www.gnu.org/software/ddd/)或使用[Eclipse CDT](http://www.eclipse.org/cdt/)

要查看加载的共享库的状态，请使用`info shared`

# android - errorCopyingDatabase 从 Assets 文件夹到内存

> ID：13872422
> 
> 赞同：2
> 
> 时间：2012-12-14T03:56:27.620
> 
> 标签：android, sqlite, database-connection

我正在关注此链接以打开与数据库的连接。但是，当我尝试打开它时，它会抛出一个异常，说 errorCopyingDatabase。我的数据库大小约为 20MB。是因为它没有从 Assets 文件夹复制到内存的大小还是其他一些问题。我确定我的代码很好，并且我还仔细检查了所有路径（一切似乎都很好）。我得到以下异常：

```
12-14 04:44:45.471: E/AndroidRuntime(512): java.lang.Error: ErrorCopyingDataBase
12-14 04:44:45.471: E/AndroidRuntime(512):  at com.bondsms.db.DBHelper.createDataBase(DBHelper.java:42)
12-14 04:44:45.471: E/AndroidRuntime(512):  at com.bondsms.db.DBAdapter.createDatabase(DBAdapter.java:37)
12-14 04:44:45.471: E/AndroidRuntime(512):  at com.bondsms.BSGroupsActivity.loadAllGroupsFromDB(BSGroupsActivity.java:98)
12-14 04:44:45.471: E/AndroidRuntime(512):  at com.bondsms.BSGroupsActivity.onCreate(BSGroupsActivity.java:55)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.os.Looper.loop(Looper.java:123)
12-14 04:44:45.471: E/AndroidRuntime(512):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-14 04:44:45.471: E/AndroidRuntime(512):  at java.lang.reflect.Method.invokeNative(Native Method)
12-14 04:44:45.471: E/AndroidRuntime(512):  at java.lang.reflect.Method.invoke(Method.java:521)
12-14 04:44:45.471: E/AndroidRuntime(512):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-14 04:44:45.471: E/AndroidRuntime(512):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-14 04:44:45.471: E/AndroidRuntime(512):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:14:05.833

我已经尝试了很多时间从资产复制数据库，这是我要复制的类，它对我来说很好，你可以使用它，也许它有帮助（记得更改 DB_PATH = "/data/data/[your package] /databases/"。而 DB_NAME = 您在资产中的数据名称）。

```
 public class DatabaseController extends SQLiteOpenHelper {

    // The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.hanoifood/databases/";

    private static final String DB_NAME = "HanoiFood.sqlite";

    private SQLiteDatabase myDataBase;

    private final Context myContext;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
    public DatabaseController(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
        try {
            createDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }
    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     * */
    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();

        if (dbExist) {
            // do nothing - database already exist
            myDataBase = getWritableDatabase();
        } else {
            myDataBase = getWritableDatabase();
            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     * 
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {

        SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (Exception e) {

            // database does't exist yet.

        }

        if (checkDB != null) {

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created
     * empty database in the system folder, from where it can be accessed and
     * handled. This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException {

        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);

    }

    public Cursor query(String table, String[] columns, String selection,
            String[] selectionArgs, String groupBy, String having,
            String orderBy) {
        myDataBase = getWritableDatabase();
        Cursor cursor = myDataBase.query(table, columns, selection,
                selectionArgs, groupBy, having, orderBy);
        if (cursor == null) {
            return null;
        } else if (!cursor.moveToFirst()) {
            cursor.close();
            return null;
        }
        return cursor;
    }

    public long insert(String table, String nullColumnHack, ContentValues values) {
        long insertRet = myDataBase.insert(table, nullColumnHack, values);
        if (insertRet == -1) {
            Log.d("DungHV", "Insert db error");
        }
        return insertRet;
    }

    @Override
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
    }
} 
```

在您的 Activity 简单调用中：

```
DatabaseContrller mdb = new DatabaseController(getApplicationContext()); 
```

# amazon-web-services - 使用 Robocopy 从单个 AWS 机器进行 200 次并发下载

> ID：13872432
> 
> 赞同：0
> 
> 时间：2012-12-14T03:58:05.333
> 
> 标签：amazon-web-services, windows-server-2008, robocopy

Robocopy 正是我的项目所需要的。唯一的事情是我需要一台具有 500GB 数据的服务器，并让 200 台机器同时从该服务器下载该数据。这可以通过robocopy实现吗？

所有机器都是Windows 2008，它们都在aws中。我可以自由选择 AWS 中最强大的机器，但想知道这样的设置是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:40:09.047

您还可以将数据放在[S3](http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html)中作为数据存储。通过这种方式，您将获得更好的性能，并且将为您节省此中央服务器的成本。

您还可以[对 S3](http://docs.aws.amazon.com/AmazonS3/latest/dev/S3Torrent.html)文件使用 BitTorrent 协议，从而更好地利用您的发行版。或者，您可以直接从 S3 将文件下载到每台机器。

将文件放在 S3 上也更安全，因为它比单个服务器存储具有更好的冗余性。

# mysql - 筛选 Node.js、Express 和 mysql 模块

> ID：13872434
> 
> 赞同：4
> 
> 时间：2012-12-14T03:58:15.007
> 
> 标签：mysql, node.js, express, node-mysql

我正在尝试通过集成 node.js 的 express 框架和 mysql 模块[https://npmjs.org/package/mysql](https://npmjs.org/package/mysql)来工作。我有一个简单的应用程序设置（通过使用 express 命令行），并且我还声明了一个用于处理某些数据库属性的模块。

我的数据库模块是这样设置的：

```
app.js
node_modules
|___db
     |
     node_modules
           |___mysql 
```

将 mysql 模块设置为 db 模块的依赖项。

在我的 db 模块的 index.js 中，我有一些模块导出设置可供应用程序访问：

```
/*
 * Connection params for database
 */

var mysql = require('mysql');
var connection = mysql.createConnection({
  host: 'localhost',
  user: 'user',
  password: 'password',
  database: 'database',
});

var connect = connection.connect(function(err){
  if(!err){
        console.log("You are connected to the database.");
  }
  else{
        throw err;
  }
});

var end = connection.end(function(err){
  if(!err){
        console.log("Mysql connection is terminated.")
  }
  else{
        throw err;
  }
});

module.exports = {
  connect: connect,
  connection: connection,
  end: end,
} 
```

在我的 app.js 文件中，我需要我的 db 模块并指定一些路由。我还尝试在客户端路由的 app.get 方法中使用路由中间件函数（estDb）：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , clients = require('./routes/clients')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path')
  , db = require('db');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

var estDb = function(req, res, next){
  db.connect;
  db.connection.query("SELECT * FROM Table", function(err, results){
        if(!err){
          req.results = results;
        }
        else{
          throw err;
        }
  });
  db.end;
  next();
}

app.get('/', routes.index);
app.get('/clients', estDb, clients.view);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

**我遇到的问题** 是，当我在获取日志时启动应用程序时，似乎调用了我的 db 函数（我的模块导出）：

```
Express server listening on port 3000
You are connected to mysql.
Mysql connection is terminated. 
```

**不是**在请求 url 时`http://localhost/clients`（这是我定义的路由）。如您所见，它在控制台记录“Express 服务器正在侦听端口 3000”消息后立即触发 db.connect() 和 db.end() - 这让我相信它是从自定义 db 模块触发的我正在使用。随后，当我去路线时，`http://localhost/clients`我得到一个错误：

```
500 Error: Cannot enqueue Query after invoking quit. 
```

如果我从 db 模块中删除 connection.end() 函数，我可以连接到数据库并检索结果；但是，如果我重新加载页面并尝试再次加载结果，则会出现错误：

```
Cannot enqueue Handshake after already enqueuing a Handshake 
```

我不明白为什么我的模块导出在我启动应用程序时会触发？我想这就是我遇到麻烦的地方。

对此的任何建议或帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:50:39.913

> 我不明白为什么我的模块导出在我启动应用程序时会触发？我想这就是我遇到麻烦的地方。

我相信这是因为这段代码而发生的：

```
var mysql = require('mysql');
var connection = mysql.createConnection({
  host: 'localhost',
  user: 'user',
  password: 'password',
  database: 'database',
}); 
```

在这里，您实际上是*连接到数据库*，而不是*定义一个函数，而不是在调用时将连接到数据库*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T06:50:25.390

您的日志消息不是您从该代码中获得的消息（没有“您已连接到 mysql”）！？尝试以下操作：

```
db.connect; 
```

应该

```
db.connect(); 
```

因为你想执行这个功能。您还希望在执行之前等待查询完成`next()`

```
var estDb = function(req, res, next){
  db.connect();
  db.connection.query("SELECT * FROM Table", function(err, results){
        if(!err){
          req.results = results;
          next();
        }
        else{
          throw err;
        }
  });
  db.end();
} 
```

编辑：这里发生的是你的`db`模块中的代码在你需要时立即执行。你想做的是这样的：

```
var connect = function(){
  connection.connect(function(err){
    if(!err){
      console.log("You are connected to the database.");
    }
    else{
      throw err;
    }
  })
}; 
```

然后您可以`db.connect()`按照我的帖子中所示调用（对于`end()`）。如果你`db.connect`输入一行（不带括号），**什么**都不会发生。

# android - 三星 Galaxy SIII 上的 Android OpenGL 透明度

> ID：13872435
> 
> 赞同：1
> 
> 时间：2012-12-14T03:58:30.793
> 
> 标签：android, opengl-es

## 概述

我正在构建一个使用 GLSurfaceView 的 android 应用程序。我有两个设备，摩托罗拉 Xyboard 10" 和三星 Galaxy SIII。当我在 Xyboard 上运行我的应用程序时，我得到了透明度，但是当我在三星 Galaxy SIII 上运行相同的应用程序时，对象没有以透明度呈现。

## 代码

下面是我正在使用的渲染功能。要记住的一件事是，我所有的纹理都是 2s 的平方幂，并且不在 drawable-ldpi 文件夹中，而是在 res/raw 文件夹中，以防止 Android 更改大小。

```
@Override
public void draw(GL10 gl)
{
    super.draw(gl);

    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glEnable(GL10.GL_ALPHA_TEST);
    gl.glAlphaFunc(GL10.GL_GREATER, 0.0f);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glTexCoordPointer(2,GL10.GL_FLOAT,0,textureBuffer);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureID);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA,GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glEnable(GL10.GL_BLEND);

    gl.glFrontFace(GL10.GL_CCW);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glCullFace(GL10.GL_BACK);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);

    gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, indexBuffer);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDisable(GL10.GL_BLEND);
    gl.glDisable(GL10.GL_CULL_FACE);
    gl.glDisable(GL10.GL_ALPHA_TEST);
    gl.glDisable(GL10.GL_TEXTURE_2D);   
} 
```

## 其他注意事项

另一件需要注意的事情是，当我渲染 3D 对象时，透明度可以工作，但是当我为 2D 设置投影时，透明度会停止工作。这是我在以 2D 渲染之前调用的方法。

```
private void prepare2Ddrawing(GL10 gl)
{   
    gl.glDisable(GL10.GL_LIGHT0);
    gl.glDisable(GL10.GL_LIGHTING);
    gl.glDisable(GL10.GL_DEPTH_TEST);
    gl.glLoadIdentity();
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluOrtho2D(gl,0,getWidth(), getHeight(),0);
    gl.glMatrixMode(GL10.GL_MODELVIEW);     
    gl.glLoadIdentity();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:52:02.667

根据[这个](http://www.gsmarena.com/samsung_i9300_galaxy_s_iii-4238.php)网站，SIII 有一个 Mali-400MP GPU。根据[这个](http://en.wikipedia.org/wiki/Mali_%28GPU%29)维基百科页面，mali-400mp 支持 opengl 版本 1.1 和 2.0。我唯一能想到的是你正在使用的东西不受 opengl 2.0 及更低版本的支持。

# r - R中的滞后/差分变量

> ID：13872437
> 
> 赞同：0
> 
> 时间：2012-12-14T03:58:45.177
> 
> 标签：r

> **可能重复：**
> [R向量/数据帧中的基本滞后](https://stackoverflow.com/questions/3558988/basic-lag-in-r-vector-dataframe)

试图滞后 R 中的变量，但它不起作用。

```
x<-1:10
y=lag(x,1)
xy=cbind(x,y)
View(xy)

    x   y
1   1   1
2   2   2
3   3   3
4   4   4
5   5   5
6   6   6
7   7   7
8   8   8
9   9   9
10  10  10 
```

我仍然没有得到滞后。我究竟做错了什么？还有一种更快的方法可以在不使用 cbind/rbind 的情况下组合到向量/矩阵吗？例如

```
x=0:10
y=20:30
newxy=[x,y] 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:08:07.087

`lag()`期望一个时间序列。（在 R 中，“ts”类是基本时间序列类，用于表示在等间隔时间点采样的数据。有关更多信息，请参阅`?ts`。）因此，您可以将 x 转换为时间序列，如此处所示，或者使使用另一个答案中建议的方法之一。

```
x <- as.ts(1:10)
y <- lag(x,1)
xy <- cbind(x,y)
xy
#Time Series:
#Start = 0 
#End = 10 
#Frequency = 1 
#    x  y
# 0 NA  1
# 1  1  2
# 2  2  3
# 3  3  4
# 4  4  5
# 5  5  6
# 6  6  7
# 7  7  8
# 8  8  9
# 9  9 10
#10 10 NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T04:08:49.127

对于第二部分：

```
newxy=matrix(c(x,y),ncol=2)

> newxy
      [,1] [,2]
 [1,]    0   20
 [2,]    1   21
 [3,]    2   22
 [4,]    3   23
 [5,]    4   24
 [6,]    5   25
 [7,]    6   26
 [8,]    7   27
 [9,]    8   28
[10,]    9   29
[11,]   10   30 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T04:09:53.073

`embed`在这里是一个有用的功能，特别是如果您不想转换为`ts`对象。

```
x <- 1:10
embed(x,2)

     [,1] [,2]
 [1,]    2    1
 [2,]    3    2
 [3,]    4    3
 [4,]    5    4
 [5,]    6    5
 [6,]    7    6
 [7,]    8    7
 [8,]    9    8
 [9,]   10    9 
```

# python - 仅 os.walk .jpg

> ID：13872441
> 
> 赞同：1
> 
> 时间：2012-12-14T03:59:29.893
> 
> 标签：python, os.walk

我只想要以 .jpg 或 .pdf 结尾的文件名。如何限制文件名搜索？

```
import os
from subprocess import call

for dirname, dirnames, filenames in os.walk('.'):
    for filename in filenames:
        jpg = os.path.join(dirname, filename)
        call(["./curl_recognize.sh", jpg, jpg+".txt", "-f txt"]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T04:48:38.607

```
import fnmatch
import os

for file in os.listdir('.'):
    if fnmatch.fnmatch(file, '*.txt'):
        print file 
```

fnmatch 比其他方法更好，因为它假设 unix 像通配符，包括：

*= 匹配所有内容

?= 匹配任何单个字符

[seq]= 匹配 seq 中的任何字符

[!seq]= 匹配任何不在 seq 中的字符

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T04:01:57.457

怎么样：

```
for filename in filenames:
  if not filename.endswith('.jpg'):
    continue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:20:44.747

如果你想要一个所有文件的列表，你可以做这样的事情

```
filelist = []
for root, dirs, files in os.walk('.'):
    filelist = filelist + [os.path.join(x,root) for x in files if x.endswith(('.jpg','.pdf'))] 
```

# java - 获取密码使用 JDBC 发送到电子邮件

> ID：13872447
> 
> 赞同：0
> 
> 时间：2012-12-14T04:00:43.037
> 
> 标签：java, mysql, web-services, soap, sendmail

我必须从 MySQL 数据库中获取密码。该密码使用 JDBC 发送到 Java 中的用户有效电子邮件。我该如何实施？

这是我正在使用的代码：

```
public class Checkemail
{
    public String authentication( String Email ) {

        String retrievedUserName = "";
        String retrievedPassword = "";
        String status = "";

        try {
            Class.forName( "com.mysql.jdbc.Driver" );
            Connection con = DriverManager.getConnection( "jdbc:mysql://localhost:3306/xcart-432pro", "root", "" );
            PreparedStatement statement = con.prepareStatement( "SELECT * FROM xcart_customers WHERE email = '" + Email + "'" );
            ResultSet result = statement.executeQuery();

            while( result.next() ) {
                retrievedUserName = result.getString( "email" );
                retrievedPassword = result.getString("password");
            }

            if( retrievedUserName.equals( Email ) ) {
                status = "Valid Email";
            }

            else {
                status = "Invalid Email!!!";
            }
        }
        catch( Exception e ) {
            e.printStackTrace();
        }

        return status;
    }
} 
```

在这里，我已经成功检查了电子邮件是有效还是无效。

如何编写获取密码的代码并将这些密码发送到电子邮件功能？

**编辑：**

现在我更改了如下代码：

```
 if(retrievedUserName.equals(Email)){
      status = "Valid Email";
      Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
         props.put("mail.smtp.socketFactory.port", "465");
         props.put("mail.smtp.socketFactory.class",
        "javax.net.ssl.SSLSocketFactory");
            props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
                  protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("xxxxx@gmail.com","xxxx");
                        }
                    });

                    try {

                                Message message = new MimeMessage(session);
                            message.setFrom(new InternetAddress("krishnaveni.veeman@mercuryminds.com"));
                            message.setRecipients(Message.RecipientType.TO,
                                    InternetAddress.parse(Email));
                            message.setSubject("Testing Subject");
                        message.setText("Dear Friends This is your fassword," +
                                    retrievedPassword);

                    Transport.send(message);

                        System.out.println("Done");

                        } catch (MessagingException e) {
                            throw new RuntimeException(e);
                                }
                               }
                                  else{
                         status = "Invalid Email!!!";
                          }

                                }
                            catch(Exception e){
                               e.printStackTrace();
                                   }
                             return status;

                              }

                                } 
```

在这里，我在我的代码中公开提到了我的 gmail 用户名和密码。

```
 Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
                  protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("xxxxx@gmail.com","xxxx");
                        }
                    }); 
```

我已经发送了没有提及 gmail 用户名和密码的邮件。请帮助我。我该如何开发这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:50:51.670

您应该**使用有效的主机**。

这可能会帮助你..

```
 String host = "smtp.gmail.com"; // Host for Gmail
      Properties props = System.getProperties();
      props.setProperty("mail.user", from);
      props.setProperty("mail.password", retrievedPassword);
      props.put("mail.smtp.host", host); 
```

# iphone - twitpic 与 iPhone 应用程序的集成

> ID：13872450
> 
> 赞同：0
> 
> 时间：2012-12-14T04:01:13.230
> 
> 标签：iphone, objective-c, ios, integration, twitpic

我想使用 twit pic 将图像上传到 twitter。我正在使用 Oauth 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:02:48.067

为什么不尝试使用共享工具包？将图片上传到 Twitter 的简单方法。

# android - 服务启动后屏幕变黑

> ID：13872455
> 
> 赞同：0
> 
> 时间：2012-12-14T04:02:16.847
> 
> 标签：android, service

在我的活动中初始化服务后，我的应用程序立即变成黑屏。没有显示错误或警告消息。过了一会儿，应用程序已经没有响应，即使在时间限制之后，服务也没有将信息更新到服务器。我想使用该服务在每分钟后不断地将用户的位置发送到服务器。服务在我的活动中初始化。我还在 AndroidManifest.xml 中包含了该服务。

LocationService 下面的代码是我的服务结构

```
public class LocationService extends Service{

@Override

public IBinder onBind(Intent arg0){
    return null;
}

private String TAG = "LocationService";

@Override
public void onCreate(){
    super.onCreate();
            boolean isUpdateResult = true;

    try{
        while(isUpdateResult){

             new CountDownTimer (60000, 1000) {

                 public void onTick(long millisUntilFinished) {

                 }

                 public void onFinish() {
                   //Send information to server                          

                }.start();
        }
    }
    finally{

    }
}

@Override
public void onDestroy(){
    super.onDestroy();
}
} 
```

以下是我在主要活动中调用该服务的方式。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display_screen);

    startService(new Intent(Web_Slider.this,
            LocationService.class));
    } 
```

知道是什么原因导致黑屏吗？我在这里错过了什么吗？任何意见将不胜感激！先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:25:09.917

我设法解决了这个问题。显然，如果我`new CountDownTimer (60000, 1000)`在循环的开头运行，屏幕将变成黑屏。如果没有记错，是由于不断创建新的 CountDownTimer 导致它无法正常运行。正确的放置方法是**去掉 While(isUpdateResult)**。该函数将不断启动倒数计时器，因为有一个 .start(); 在 onFinish(); 之后。所以不需要while循环。

```
 new CountDownTimer (60000, 1000) {

             public void onTick(long millisUntilFinished) {

             }

             public void onFinish() {
               //Send information to server                          

            }.start(); 
```

# objective-c - UIButton 作为 MKAnnotationView 中的子视图不起作用

> ID：13872460
> 
> 赞同：3
> 
> 时间：2012-12-14T04:02:40.280
> 
> 标签：objective-c, ios, mkannotation

我在注释视图中添加了一个按钮，它显示正确。点击按钮时，我想拨打电话，但是当我点击按钮时，它没有响应（按钮甚至没有突出显示）。按钮似乎没有收到触摸事件，但我不知道为什么。

这是我在 customAnnotationView.m 中的代码

```
- (id)initWithAnnotation:(id <MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier
{
    NSLog(@"initWithAnnotation start");

    //initialze the view
    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if (self != nil)
    {
        CGRect frame = self.frame;
        frame.size = CGSizeMake(60.0, 85.0);
        self.frame = frame;
        self.backgroundColor = [UIColor clearColor];
        self.centerOffset = CGPointMake(30.0, 42.0);
    }

    //this has nothing to do with my question
    self.title=[[[NSString alloc] init] autorelease];
    self.description=[[[NSString alloc] init] autorelease];
    self.phoneNumber=[[[NSString alloc] init] autorelease];
    customAnnotation * tempCust = (customAnnotation *)annotation;       
    self.title=annotation.title;
    self.description=tempCust.description;
    self.phoneNumber=tempCust.phoneNumber;

    //here is the question button
    self.userInteractionEnabled=YES;
    self.exclusiveTouch=NO;
    UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setTitle:@"Call" forState:UIControlStateNormal];
    //decide the button's position
    CGRect rect=button.frame;
    rect.origin.x=15;
    rect.origin.y=47;
    rect.size.width=40;
    rect.size.height=20;
    button.frame=rect;
    [self addSubview:button];

    [button becomeFirstResponder];

    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];

    NSLog(@"initWithAnnotation finished");

    return self;
}

//action method
-(void)buttonClicked:(id)sender{
    NSString *callNumber=[[[NSString alloc] initWithFormat:@"tel://%@",self.phoneNumber] autorelease];
    [[UIApplication sharedApplication]openURL:[NSURL URLWithString:callNumber]];
} 
```

为什么按钮不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:28:47.067

```
self.rightCalloutAccessoryView = button; 
```

使用上面的而不是`[self addSubview:button];`

希望这对你有帮助

# ruby-on-rails-3 - Bootstrap 和 cmd 的 SUBST 函数刚刚碰撞并破坏了我的观点

> ID：13872464
> 
> 赞同：0
> 
> 时间：2012-12-14T04:03:26.140
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, windows-xp

所以，我在 Win XP 上（Mac 很贵，好吗？），我发现[这个链接](http://www.artofbi.com/index.php/2010/04/windows-command-prompt-shorten-directory-length-trick/)让我的生活变得如此轻松。我改变了我的路径：

```
C:\Documents and Settings\DevAdmin\rails_projects\arcwmi_reports> 
```

到

```
R:\arcwmi_reports> 
```

好多了！

但是，当我去创建一个新项目并添加`@import "bootstrap"`到我的 custom.css.scss 文件时，我的网站上突然出现了这个错误：

```
Showing R:/arcwmi_reports/app/views/layouts/application.html.erb where line #5 raised: 
different prefix: "C:/" and "R:/arcwmi_reports/app/assets/stylesheets"
(in R:/arcwmi_reports/app/assets/stylesheets/custom.css.scss) 
```

这是第 5 行：

```
<%= stylesheet_link_tag    "application", media: "all" %> 
```

我知道这条线是问题所在，因为如果我将其注释掉，或者`@import "bootstrap"`我的东西就可以正常工作。

这些代码行之一是尝试使用旧前缀。我不知道是哪个。

这里发生了什么？！？？！

谢谢-芯片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:17:03.550

所以问题是我在 R:\ 替代上启动了我的 rails 服务器，并且由于某种原因 stylesheet_link_tag 与服务器请求冲突。

一旦我关闭服务器并使用完整路径重新启动它，页面就会正常加载。

我不知道为什么会产生这样的冲突，但似乎服务器捕获了错误并且不会加载页面。

我猜这是一个橡皮鸭时刻。

# doctrine-orm - 在 symfony 2.1.4 中安装学说数据夹具

> ID：13872468
> 
> 赞同：1
> 
> 时间：2012-12-14T04:04:09.500
> 
> 标签：doctrine-orm, symfony-2.1

这是我所做的：\

1.  在 composer.json 中添加了以下依赖项

    ```
    "doctrine/doctrine-fixtures-bundle": "dev-master",
    "doctrine/data-fixtures": "dev-master" 
    ```

2.  在终端运行以下命令：

    php composer.phar 更新

3.  在 appKernel.php 中添加了以下行

    新的教义\捆绑\FixturesBundle\DoctrineFixturesBundle()，

当我在提示符下运行任何 symfony 命令时，出现如下错误：

```
Class not found: Doctrine\Bundle\FixturesBundle\DoctrineFixturesBundle 
```

然后我打开 vendor\composer\autoload_namespaces.php 并添加以下行：

```
 'Doctrine\\Bundle\\FixturesBundle' => $vendorDir . '/doctrine/doctrine-fixtures-bundle/' 
```

错误消失了，我可以轻松使用数据夹具。

我的问题是，当我运行 composer update 时，命名空间是否应该自动插入到 vendor\composer\autoload_namespaces.php 中，或者我必须手动将上面的行插入到 autoload_namespaces.php 中？在文档中，我没有找到任何说明手动插入命名空间的内容

# java - 被Android访问控制机制搞糊涂了。它与java不同

> ID：13872470
> 
> 赞同：1
> 
> 时间：2012-12-14T04:04:38.780
> 
> 标签：java, android, access-control

在java中，如果不在同一个包中，子类不能覆盖基类的默认或私有方法。基类代码：

```
//base class
public class TestBase {
protected void test() {
    defaultTest();
    protectedTest();
    privateTest();
}

void defaultTest() {
    System.out.println("defaultTest");
}

protected void protectedTest() {
    System.out.println("protectedTest");
}

private void privateTest() {
    System.out.println("privateTest");
}
} 
```

和子类代码：

```
public class TestImpl extends TestBase {
protected void test() {
    super.test();
    localTest();
}

private void localTest() {
    System.out.println("Impl:localTest");
}
protected void defaultTest() {
    System.out.println("Impl:defaultTest");
}

protected void protectedTest() {
    System.out.println("Impl:protectedTest");
}

public void privateTest() {
    System.out.println("Impl:privateTest");
}
public static void main(String[] args) {
    new TestImpl().test();
}
} 
```

让我们将它们放入不同的包中，输出为：

```
defaultTest
Impl:protectedTest
privateTest
Impl:localTest 
```

这反映了java中的访问控制机制。我们不能覆盖子类中的 defaultTest() 方法。但是在andorid中，我们可以！在 android.widget.AdapterView 类中，有一个默认方法：

```
void checkSelectionChanged() {
    if ((mSelectedPosition != mOldSelectedPosition) || (mSelectedRowId != mOldSelectedRowId)) {
        selectionChanged();
        mOldSelectedPosition = mSelectedPosition;
        mOldSelectedRowId = mSelectedRowId;
    }
} 
```

因此，同一包中的任何子类，例如 Spinner，都可以调用 checkSelectionChanged() 方法。然后调用 OnItemSelectedListener。我们可以添加自己的列表器来监听事件，我们会收到更改通知。但是，如果我们扩展 Spinner，比如 CustomSpinner，并在 CustomSpinner 中定义相同的方法，代码如下：

```
public class CustomSpinner  extends Spinner{

public CustomSpinner(Context context, AttributeSet attrs, int defStyle,
        int mode) {
    super(context, attrs, defStyle, mode);
}

public CustomSpinner(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public CustomSpinner(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CustomSpinner(Context context, int mode) {
    super(context, mode);
}

public CustomSpinner(Context context) {
    super(context);
}

void checkSelectionChanged() {
    Log.i("CustomSpinner", "Called!");
}
} 
```

然后奇怪的是 CustomSpinner 中的 checkSelectionChanged() 被调用并且我们的监听器永远不会被通知。这是由覆盖引起的。我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:44:41.397

访问控制在 Android 和 Java 中完全相同。

没有`onSelectionChanged()`方法[`Spinner`](http://developer.android.com/reference/android/widget/Spinner.html)——没有`public`或`protected`至少没有。如果有这样的包私有方法，您*可以*覆盖它，但前提是您的类在同一个包中，而事实并非如此。您只是声明了一个具有相同名称的不相关方法；它不是压倒一切的。

这就是为什么你应该使用`@Override`你打算覆盖方法的地方。它会产生一个编译错误，告诉你你实际上并没有覆盖。

# web-services - 将表作为参数传递给 Web 服务

> ID：13872475
> 
> 赞同：0
> 
> 时间：2012-12-14T04:05:27.457
> 
> 标签：web-services, web

我处于将表格行作为参数传递给 Web 服务的情况。任何人都可以解释我如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T22:56:15.640

当您说“表格行”时，我假设表格中有一行？如果是这种情况，将其放入数组并将其传递给 Web 服务可能是最简单的。（假设一个表本质上是一个二维数组，而您只是从中取出一个数组。）

# c# - C# 应用程序在可执行文件中不显示图标

> ID：13872476
> 
> 赞同：1
> 
> 时间：2012-12-14T04:05:58.737
> 
> 标签：c#, .net-4.0, windows-xp

我正面临这个奇怪的问题。我在 Windows 7 中构建了一个 C# 应用程序。它显示了我设置的 exe 文件的正确图标。我在其他windows 7系统上测试过，目前没有问题。

当我将 exe 文件移动到 Windows XP 系统时，它没有显示图标，而是显示默认图标（类似于软盘的图标）。

知道可能是什么原因吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:18:55.657

在 XP 上，最大图标大小有助于`HKEY_CURRENT_USER\Control Panel\Desktop\WindowMetrics`

在我的系统`Shell Icon Size`上，设置为*33*

您可以将其更改为更大的值，但随着窗口以适当大小的图标加载，延迟会稍长。
显然没有限制，但是拥有 1024x1024 的图标会有点过分（更不用说所需的加载时间）

# objective-c - 没有使用我的自定义 UIViewController 调用 ViewDidLoad

> ID：13872478
> 
> 赞同：3
> 
> 时间：2012-12-14T04:06:07.600
> 
> 标签：objective-c, ios, xamarin.ios

我创建了一个自定义 UIViewController 类，该类在运行时创建一个加载到视图中的 ScrollView。在我的自定义 UIViewController 的构造函数中查看代码。

```
 initControl(id, canEdit);

        _controllers = new NSMutableArray(0); //required to keep view controllers around

        _scrollView = new UIScrollView();
        _scrollView.BackgroundColor = UIColor.Green;
        this.View = _scrollView; 
```

ViewDidAppear 和 ViewWillAppear 被正常调用。

ViewDidLoad 没有被调用，我不知道为什么，因为视图在屏幕上显示得很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:20:48.363

访问self.view时调用**viewDidLoad**方法

例子：

1)

```
- (id) init {
      self = [super init];
      if (self)
      {
          ...
          [self.view addSubview: self.toolbar];
      }
 } 
```

2)

```
viewContrl = [[MyViewController alloc] init];
viewContrl.view = webTopView; 
```

3)

```
viewContrl = [[MyViewController alloc] init];
[viewContrl.view addSubview: webTopView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:02:17.700

在分配视图时调用 ViewDidLoad。因此，如果您只分配一次视图并且每次只使用 addSubview 添加，那么它只在第一次调用。如果你想在每次添加的时候调用它，那么你需要每次都分配它。如果视图已经分配，​​还可以通过在分配视图之前释放它来处理内存管理。另一种方法是创建一个方法，其中包含您想要执行的操作并在 addSubview 之后调用它。它可能会解决您的问题，如果您有任何疑问，请随时问我。

# oop - 设计构建或工厂模式

> ID：13872480
> 
> 赞同：1
> 
> 时间：2012-12-14T04:06:16.800
> 
> 标签：oop, design-patterns, factory, builder

我理解这两种模式（我认为），但鉴于我的特定需求，我似乎无法找到解决方案或找到示例（所有示例都非常简单）。

我的问题是我想要某种工厂（或主管/等）来创建可能具有或不具有依赖关系的对象。

假设我有这段代码：（我使用的是 C#）

```
interface MyObject{
    public void load();
    public void update();
    public void draw();
}

class ObjectA : MyObject{
    public void load(){/*load*/}
    public void update(){/*update*/}
    public void draw(){/*draw*/}
}

class ObjectB : MyObject{
    Texture texture;
    public ObjectB(Content content){
        texture = content.load("texture");
    }
    public void load(){/*load*/}
    public void update(){/*update*/}
    public void draw(){/*draw*/}
}

class ObjectC : MyObject{
    Parent parent;
    public void setParent(Parent parent){
        this.parent = parent;
    }
    public void load(){/*load*/}
    public void update(){
        if( this.status == Status.Done ){
            parent.remove(this);
        }
    }
    public void draw(){/*draw*/}
}

class Map : Parent{
    MyObject myobj;
    public void load(MapInfo map){
        //This is what I want to achieve
        myobj = MyObjectFactory.create(map.objectInfo);

        //This is my problem. I don't really know how to solve this.
        //I can't do this >
        myobj.setParent(this); //error
        //Unless I create a setParent method in interface, I don't know how to achieve this.
    }
    public void remove(MyObject obj){/*remove*/}
} 
```

**我真的不知道如何实现这一点：`myobj.setParent(this);`。它不能在构造函数中（如 ObjectB），因为 Parent 在每种情况下都不相同。**

这就是我的工厂所拥有的：

```
class MyObjectFactory{
    Content content;
    public MyObjectFactory(Content content){
        this.content = content;
    }

    public MyObject create(objectInfo){ //suppose objectInfo is xml
        //read xml
        Type type = objectInfo.type;

        //I'm totally fine with this. (Noob implementation)
        switch(type){
            case Type.A:
                return new ObjectA();
            break;
            case Type.B:
                //I'm also fine with this, unless there is a better way.
                return new ObjectB(this.content);
            break;
            case Type.C:
                return new ObjectC();
            break;
        }
    }
} 
```

到目前为止，ObjectA 和 ObjectB 都很好。对象A 很简单。ObjectB 构造函数由 Factory 设置（之前为 Factory 提供了`content`变量）。

剩下的就是 ObjectC，它需要 Parent 移除自己（它可能不是最好的例子。试图模拟不同的需求）。**我如何实现这一目标？**

我只想出了一个解决方案：向 MyObject 接口添加一个方法，ObjectA 和 ObjectB 将只有一个什么都不做的 setParent 方法。

我希望这不会令人困惑。

**编辑** 我忘记在以下位置添加父级：`class Map : Parent`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:41:29.417

我认为您**将行为与 Object creation 混合在一起**。工厂方法和生成器都是创建型设计模式。所以你可以使用任何一个来创建对象。请记住，这些模式只会解决您的对象创建问题。

其他行为方面（就像您提到的要实现特定行为）不是这些设计模式中的任何一个的一部分。因此，您可以灵活地按照自己的方式进行操作，但请记住这些设计原则，例如 OCP、SRP、DIP 等。

这个SO问题讨论了这些模式：[工厂方法（1）vs工厂（2）vs Builder（3）模式](https://stackoverflow.com/questions/9148997/factory-method-1-vs-factory2-vs-builder-3-pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T05:49:28.163

一个简单但不优雅的解决方法是将“this”传递给您的工厂，并且仅在需要时让工厂调用 setParent()，因为工厂知道实现细节。

```
 myobj = MyObjectFactory.create(map.objectInfo, this);

   case Type.C:  
     var inst = new ObjectC();  
     inst.setParent(parent); 
```

# facebook - 使用 Facebook REST API 登录，但遇到“应用程序没有能力进行此 API 调用”

> ID：13872481
> 
> 赞同：1
> 
> 时间：2012-12-14T04:06:29.357
> 
> 标签：facebook, facebook-login, facebook-rest-api

我是 facebook 开发的新手，我正在尝试在 FB 上做一些基本功能，只需将消息发布到墙上并上传一些图片。此功能将集成到游戏中。

现在的问题是我必须使用 REST API 登录，使用下面的 url 和参数：

[https://api.facebook.com/restserver.php?method=facebook.auth.login&api_key=393870187360051&v=1.0&sig=d2985e6e3ac9fe3efe814d5c9c614f57&format=JSON&email=myfacebookaccount&password=mypassword](https://api.facebook.com/restserver.php?method=facebook.auth.login&api_key=393870187360051&v=1.0&sig=d2985e6e3ac9fe3efe814d5c9c614f57&format=JSON&email=myfacebookaccount&password=mypassword)

但是我收到错误“应用程序没有能力进行此 API 调用”

我已经仔细检查了 FB app_key 和帐户是否正确，并且 APP 已经绑定到该帐户。

我不明白该错误消息的含义。调用请求时我错过了什么吗？或者这个 REST API 已经被弃用了？我对此表示怀疑，因为我现在在官方网站上找不到有关 METHOD facebook.auth.login 的参考。

PS。我以这种方式使用 REST API，因为我必须使用一些公司内部 API，它实现了上面的登录请求。如果该方法已被弃用，我需要请他升级 API。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T15:12:42.953

如果有人仍然需要使用 Facebook 旧 REST API，请注意，较新的 Facebook 应用程序不支持 REST API。

有关详细信息，请参阅[此处](https://stackoverflow.com/questions/17962108/facebook-app-with-rest-api)。

# c++ - 子大小更改后调整父窗口大小

> ID：13872484
> 
> 赞同：2
> 
> 时间：2012-12-14T04:07:09.777
> 
> 标签：c++, qt, layout

我已经把这个问题搞了几个小时，并决定是时候问了：）

我有一个旋转图像然后更新小部件大小的 Qt 程序。这是我目前用来执行此操作的代码。

```
void VideoSubWindow::showFrame(const QImage& frame)
{
    QPixmap pixmap = QPixmap::fromImage(frame);
    ui->videoFrameLabel->setPixmap(pixmap);
    resizeWidgets(pixmap.size());
}

void VideoSubWindow::resizeWidgets(const QSize &size)
{
    if(frameSize != size)
    {
        frameSize = size;
        ui->videoFrameLabel->setFixedSize(size);
        ui->scrollArea->setMinimumSize(size.width() + 2, size.height() + 2);
    }
} 
```

小部件的结构如下：

```
VideoSubWindow (QMainWindow)
 -> centralWidget (QWidget) (Vertical layout is set on this)
   -> scrollArea (QScrollArea)
     -> videoFrameLabel (QLabel)
   -> statusBar (QStatusBar)
   -> menuBar (QMenuBar) 
```

执行上面的代码时，例如将图像旋转 90 度，图像将被旋转，但窗口不会调整大小以适应新的像素图大小。我曾尝试在 and 上调用`adjustSize()`and `updateGeometry()`，`SubWindow`但`centralWidget`这些似乎效果为零。但是，如果我用鼠标手动调整窗口大小，窗口会捕捉到为 设置的最小大小`scrollArea`，因此这似乎正在生效。

这个事情谁有经验？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:57:08.597

尝试使用该`resize(...)`功能：[Qt 文档](http://qt-project.org/doc/qt-4.8/qwidget.html#size-prop)

`adjustSize()`使用`sizeHint()`函数，所以调用`adjustSize()`SubWindow 和 centralWidget 不会有任何效果

# php - 运行 fql facebook 查询时出错，无法从 url 获得评论？

> ID：13872486
> 
> 赞同：-1
> 
> 时间：2012-12-14T04:07:35.580
> 
> 标签：php, facebook, facebook-comments

我有一个示例代码：

```
require 'facebook.php';
$facebook = new Facebook(array(
    'appId'  => xxx,
    'secret' => xxx,
    'cookie' => true,
));

$my_url = 'http://didong.net/tru-than.html';
$fpl = "
SELECT post_fbid, fromid, object_id, text, time FROM comment WHERE object_id IN
    (SELECT comments_fbid FROM link_stat WHERE url ='".$my_url."')
";
$params = array(
    'method' => 'fql.query',
    'query'  => $fpl,
);

//Run Query
$result = $facebook->api($params);
print_r($result); 
```

=> 结果是：`array()`

但是当我浏览器链接`https://graph.facebook.com/comments/?ids=http://didong.net/tru-than.html`=> 结果有评论

=> 如何运行 fql facebook 查询以获取对此链接的评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:23:30.787

```
$fql = urlencode(
  "SELECT post_fbid, fromid, object_id, text, time FROM comment WHERE object_id IN   (SELECT comments_fbid    FROM link_stat    WHERE url ='http://didong.net/tru-than.html')"
);

// Run fql query                                                                                    
$fql_query_url = 'https://graph.facebook.com/'.
  '/fql?q='.$fql.
  '&'.$access_token;
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode($fql_query_result, true);

//display results of fql query                                                                      
echo '<pre>';
print_r("query results:\n\n");
print_r($fql_query_obj);
print_r('Rows: '.count($fql_query_obj['data']));
echo '</pre>'; 
```

现场演示：

[http://plooza.com/fql/fql_comments.php](http://plooza.com/fql/fql_comments.php)

# javascript - 将类设置为在表格行中处于活动状态

> ID：13872488
> 
> 赞同：0
> 
> 时间：2012-12-14T04:07:47.147
> 
> 标签：javascript, html, css

我在获得我想要的东西方面有点有限，我希望也许有一种方法可以做到这一点，无论是使用 CSS（我怀疑）还是 javascript。

我有一个如下所示的表格，drupal 将为链接分配一个“活动”类。这很棒，但我想更改活动链接所在的整行的 CSS，而我无法使用 drupal 自动执行此操作。无论如何要查看用户在哪个页面上，然后将类或 id 添加到具有当前链接的行（tr）？

```
<table class="views-table cols-0" thmr="thmr_80">
  <tbody>
    <tr class="odd views-row-first">
      <td class="views-field views-field-counter">
       <a href="#">Link 1</a>          
      </td>
    </tr>
    <tr class="even">
      <td class="views-field views-field-counter">
        <a href="#" class="active">Link 2</a>
      </td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:12:51.503

要基于活动锚向行添加一个类，您可以使用`closest()`（如果使用 jQuery），只需使用 CSS 设置您决定赋予该行的类的样式。

```
$(function() {
    $('.views-table a.active').closest('tr').addClass('active_row');
}); 
```

CSS

```
.active_row {color: green; height: 300px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:23:03.350

```
 <script src="/jquery-1.2.6.js"></script>
   <script type="text/javascript">
   $(document).ready(function(){
       $('td.views-field a.active').css("color","900");
   });
   </script>

   <table class="views-table cols-0" thmr="thmr_80">
     <tbody>
       <tr class="odd views-row-first">
         <td class="views-field views-field-counter">
          <a href="#">Link 1</a>          
         </td>
       </tr>
       <tr class="even">
         <td class="views-field views-field-counter">
           <a href="#" class="active">Link 2</a>
         </td>
       </tr>
     </tbody>
   </table> 
```

希望这可以帮助

# css-animations - Webkit 动画径向渐变？

> ID：13872490
> 
> 赞同：0
> 
> 时间：2012-12-14T04:08:30.593
> 
> 标签：css-animations, css

在[这个 Fiddle](http://jsfiddle.net/bzMvq/2/)中，我试图在我的容器元素中获得“发光”效果。

```
#box {
  width: 100px;
  height: 100px;
  margin: 10px;
  animation: glow 2s ease-in-out infinite alternate;
  -webkit-animation: glow 2s ease-in-out infinite alternate;
}
@keyframes glow {
  from {background-image:radial-gradient(circle farthest-side at center, rgba(255,0,0,0) 24px, rgba(255,0,0,1) 24px, rgba(255,0,0,0) 24px);}
  to {background-image:radial-gradient(circle farthest-side at center, rgba(255,0,0,0) 24px, rgba(255,0,0,1) 24px, rgba(255,0,0,0) 48px);}
}
@-webkit-keyframes glow {
  from {background-image:-webkit-radial-gradient(center,circle farthest-side, rgba(255,0,0,0) 24px, rgba(255,0,0,1) 24px, rgba(255,0,0,0) 24px);}
  to {background-image:-webkit-radial-gradient(center,circle farthest-side, rgba(255,0,0,0) 24px, rgba(255,0,0,1) 24px, rgba(255,0,0,0) 48px);}
} 
```

它在 IE10 中工作，但由于某种原因在 Chrome 中它只是呈现“to”状态并且根本没有动画。Webkit 中的渐变可以动画吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:37:23.453

进一步检查，它似乎`background-image`不是 Webkit 中的动画属性，即使它是渐变。

这是一种耻辱，但至少它显示出一种静态发光，所以我想这是一些东西。

# magento - 如何将我的扩展添加到 Magento Admin Menu Sidebar？

> ID：13872492
> 
> 赞同：1
> 
> 时间：2012-12-14T04:08:36.833
> 
> 标签：magento, module, block, adminhtml

我正在努力创建我的第一个社区扩展。这是一个非常简单的，并且已经在工作。我想了解如何将我的扩展添加到管理区域，以允许客户禁用或启用它。我需要在我的模块中添加什么才能做到这一点？任何帮助都会很棒！

这是我的代码：

应用程序/etc/modules/config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
<modules>
    <Module_Name>

        <!-- Whether our module is active: true or false -->
        <active>true</active>

        <!-- Which code pool to use: core, community or local -->
        <codePool>community</codePool>

    </Module_Name>
</modules>
</config> 
```

等/system.xml

```
<?xml version="1.0"?>
<config>
<sections>
    <module translate="label" module="modulename">
        <label>Your Module Name</label>
        <tab>tab_id_where_you_want_to_add_your_section</tab>
        <frontend_type>text</frontend_type>
        <sort_order>980</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>0</show_in_store>
        <groups>
            <modulename>
                <label>Your Group Title</label>
                <sort_order>10</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>0</show_in_store>
                <fields>
                    <comment translate="label comment">    
                        <label>Your Field Title</label>
                        <comment>Your Comment</comment>    
                        <frontend_type>text</frontend_type>
                        <sort_order>10</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>0</show_in_store>
                    </comment>
                </fields>
            </modulename>
        </groups>
    </your_module>
</sections>
</config> 
```

等/adminhtml.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
<menu>
    <modulename translate="title" module="shipping">
        <title>Module</title>
        <sort_order>15</sort_order>
        <children>
            <modulename translate="title" module="modulename">
                <title>Drop Down Shipping</title>
                <sort_order>1</sort_order>
                <action>adminhtml/shipping/index</action>
            </example>
        </children>
    </modulename>
</menu>

    <layout>
        <updates>
            <modulename>
                <file>shipping.xml</file>
            </modulename>
        </updates>
    </layout>
  <acl>
    <resources>
        <admin>
            <children>
                <system>
                    <children>
                        <config>
                            <children>
                                <modulename translate="title" module="shipping">
                                    <title>Your Module Name</title>
                                </modulename>
                            </children>
                        </config>
                    </children>
                </system>
            </children>
        </admin>
    </resources>
  </acl>

</config> 
```

等/config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<config> 
<modules>
    <Module_Name>

        <version>0.0.1</version>

    </Module_Name>

</modules>

<frontend>
    <layout>
        <updates>
            <modulename>
                <file>shipping.xml</file>
            </modulename>
        </updates>
    </layout>
</frontend>

<global>
    <helpers>
        <modulename>
            <class>Module_Name_Helper</class>
        </modulename>
    </helpers>
</global>

</config> 
```

我的主题布局 XML 文件：

```
<?xml version="1.0"?>

<layout version="0.1.0">

<checkout_cart_index>
<reference name="head">
    <action method="addCss"><stylesheet>css/module/shipping.css</stylesheet></action> 
</reference>
<reference name="checkout.cart.shipping">
 <action method="setTemplate"><template>module/shipping.phtml</template></action>
</reference>
</checkout_cart_index> 

</layout> 
```

助手/Data.php

```
<?php

class Module_Name_Data extends Mage_Core_Helper_Abstract
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:12:03.147

System >> Configuration >> ADVANCE >> Advance 中已经存在启用和禁用模块功能。

顺便说一句，如果您想在系统 >> 配置页面中添加菜单，本文可能会对您有所帮助[http://alanstorm.com/custom_magento_system_configuration](http://alanstorm.com/custom_magento_system_configuration)。

如果出现错误，请再次检查一切是否正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:09:47.613

如果您想将节点添加到主管理菜单（带有飞出子菜单的水平菜单）或`System\Configuration`屏幕侧边栏菜单，您的问题还不是很清楚。以下是如何将部分、组和字段添加到 Magento 配置屏幕的说明。

首先，您需要将`etc/system.xml`文件添加到模块中：

```
<?xml version="1.0"?>
<config>
    <sections>
        <your_module translate="label" module="your_module_shortcode">
            <label>Your Module Name</label>
            <tab>tab_id_where_you_want_to_add_your_section</tab>
            <frontend_type>text</frontend_type>
            <sort_order>980</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>0</show_in_store>
            <groups>
                <your_group_name>
                    <label>Your Group Title</label>
                    <sort_order>10</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>0</show_in_store>
                    <fields>
                        <your_field_name translate="label comment">    
                            <label>Your Field Title</label>
                            <comment>Your Comment</comment>    
                            <frontend_type>text</frontend_type>
                            <sort_order>10</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>0</show_in_store>
                        </your_field_name>
                    </fields>
                </your_group_name>
            </groups>
        </your_module>
    </sections>
</config> 
```

然后将以下部分添加到您的`etc/adminhtml.xml`. 它将您新创建的部分添加到 ACL，以便您能够控制可以访问它的管理员角色：

```
<config>
    <acl>
        <resources>
            <admin>
                <children>
                    <system>
                        <children>
                            <config>
                                <children>
                                    <your_module translate="title" module="your_module_shortcode">
                                        <title>Your Module Name</title>
                                    </your_module>
                                </children>
                            </config>
                        </children>
                    </system>
                </children>
            </admin>
        </resources>
    </acl>
</config> 
```

# header - 复合 c1 - 如何从页面或模板覆盖 @header-image-url

> ID：13872496
> 
> 赞同：1
> 
> 时间：2012-12-14T04:08:53.887
> 
> 标签：header, composite

我刚刚安装了启用 Razor 的 Compsite C1。现在我正在尝试找出如何轻松更改不同页面上的 Header-Image。

据我所知，它是通过这个变量“@header-image-url”完成的。但我对 Razor、CSS 和其他东西知之甚少。刚开始学习。任何人都可以帮助我如何从模板和页面为该变量设置不同的 URL。

我认为它应该放在页面或模板的 HEAD-Section 中。但我不知道正确的语法。

提前感谢您的帮助！

# java - 多个喷油器引用出现不可避免的 Guice 场景

> ID：13872500
> 
> 赞同：0
> 
> 时间：2012-12-14T04:09:37.563
> 
> 标签：java, guice

我有一个用例，似乎从多个位置引用 Guice 注入器是唯一的解决方案——尽管通常不鼓励这样做。

我的应用程序构建在 Talend（一个开源 ETL 平台）之上。我的大部分实际应用程序都在由 Talend 组件调用的 Java 类中。这些组件包括我编写的 Java 片段，这些片段反过来又实例化/调用我的类。

现在我打算在我的 Java 类中使用 Guice，但我绝对无法将依赖项注入 Talend 组件（以便它们可用于 Java 片段）。相反，我需要实际创建这些依赖项。我希望至少让 Guice 控制实例化，这意味着`new`我可以实例化我的类（具有`@Inject`构造函数的类）而不是使用`injector.getInstance`. 反过来，这意味着我需要保留注入器，大概是使用一个老式的工厂来创建它并使其作为单例可用。

我只是看不到任何其他方法来处理这个问题，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T08:08:12.087

考虑[静态注入](http://code.google.com/p/google-guice/wiki/Injections#Static_Injections)。这仍然会在你的应用程序中隐藏对注入器的持久引用，但它会让你不必在代码中添加`injector.getInstance(...)`调用。无论如何，`Injector`如果你真的需要，你可以注射。

```
class TalendDependencyModule extends AbstractModule {
  @Override public void configure() {
    requestStaticInjection(ExtractorDependencies.class);
    requestStaticInjection(ProcessorDependencies.class);
  }
}

public class ExtractorDependencies {
  @Inject private static Provider<ParserService> parserServiceProvider;
  @Inject private static Provider<SomethingElse> somethingElseProvider;

  private ExtractorDependencies() { }

  static ParserService getParserService() {
    return parserServiceProvider.get();
  }

  /* ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:41:50.320

我不知道您有多少 Talend 对象，但您可能需要考虑使用提供程序。例如，假设您有自己的类，希望 Guice 管理以下内容的创建：

```
public interface INotTalendControlled {}
public class NotTalendControlled implements INotTalendControlled {} 
```

这将被添加到无法通过 Guice 注入其依赖项的 Talend 对象中（尽管我假设有一些手动过程来执行此操作，无论是构造函数还是设置器）：

```
public class TalendControlled {
        private INotTalendControlled notTalendControlled;

        private TalendControlled(INotTalendControlled notTalendControlled) {
            this.notTalendControlled = notTalendControlled;
        }

        public INotTalendControlled getValue() {
            return notTalendControlled;
        }
    } 
```

如果您希望 Guice 管理这些生命周期和 Talend 控制对象的生命周期，您可以使用如下提供程序：

```
public static class TestModule extends AbstractModule {
            @Override
            protected void configure() {
                bind(INotTalendControlled.class).to(NotTalendControlled.class);
            }

            @Provides
            public TalendControlled provideInjectsToTalendObject(INotTalendControlled notTalendControlled) {
                return new TalendControlled(notTalendControlled);
            }
        } 
```

@Provides 方法将对所有对象隐藏 new 的使用，因为您现在可以直接注入 TalendControlled 对象 (@Inject TalenControlled talendControlled)，并且不需要显式注入器来构造它们的依赖项。

# javascript - 如何检测选项卡/窗口关闭事件，然后使用 jqueryui 显示自定义覆盖？

> ID：13872502
> 
> 赞同：1
> 
> 时间：2012-12-14T04:09:39.720
> 
> 标签：javascript, jquery, html, browser, dom-events

我想检测一个标签/窗口关闭事件（不包括`F5`刷新和链接点击事件等），然后显示一个覆盖。我在网上找到了一些答案，是这样的：

```
 endSession: function() {
        //customized overlay goes here
    },

    wireUpEvents: function() {
        var self = this;
        self.validNavigation = false;
        window.onbeforeunload = function() {
            if (!self.validNavigation) {
                    self.endSession();
                    return "bye"; // Chrome needs a returned string to fire the event
            }
        }
        $('html').bind('keypress', function(e){
            if (e.keyCode == 116) {
                self.validNavigation = true;
            }
        });
        $('a').bind("click", function(){
            self.validNavigation = true;
        });
        $('form').bind('click', function(){
            self.validNavigation = true;
        });
        $('input[type=submit]').bind('click',function(){
            self.validNavigation = true;
        });
    }
    $(document).ready(function() {
        wireUpEvents();
    }); 
```

但我刚刚发现了两件奇怪的事情：

1.  `F5`无法检测到按键事件，它只能检测到那些数字和字符按键事件。最让我吃惊的是，它的 keyCode == 116 是字符 t 而不是 F5！（好像116是小写t的ascii码）

2.  由于 Chrome 需要一个返回的字符串来触发事件，它总是在触发时显示一个带有字符串的默认弹出窗口，这意味着我无法使用 jqueryui 或其他东西创建我的自定义弹出窗口。如何解决这个问题？

# jms - 如何将消息从 JMeter 传递到 Sonic ESB？

> ID：13872505
> 
> 赞同：0
> 
> 时间：2012-12-14T04:09:50.740
> 
> 标签：jms, jmeter, message-queue, sonicmq

我正在尝试使用 JMeter 的点对点功能来测试 Sonic ESB。

我在 Sonic ESB 中开发了一项服务（一个非常简单的服务，只有一个原型步骤）。我想将来自 JMeter 的消息传递给我在 Sonic ESB 中开发的服务并得到回复。

我有一个名为 Sample.Q1 的输入队列。

我对如何链接 JMeter 和 Sonic ESB 感到非常困惑。

我按照以下链接创建 jmeter 点对点。[http://jmeter.apache.org/usermanual/build-jms-point-to-point-test-plan.html](http://jmeter.apache.org/usermanual/build-jms-point-to-point-test-plan.html)

请告诉我如何提供身份验证详细信息（即用户名和密码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:49:38.093

使用 Sonic 信息配置 JMS 点对点采样器。

您是否在输出中使用 replyTo 端点配置了原型服务？您还可以禁用身份验证或使用 JMS 属性。

# firefox-addon - Firefox - 访问网页脚本中的附加对象

> ID：13872507
> 
> 赞同：1
> 
> 时间：2012-12-14T04:10:05.260
> 
> 标签：firefox-addon

参考firefox提供的最新信息，可以安全地访问内容中的扩展对象。[https://blog.mozilla.org/addons/2012/08/20/exposing-objects-to-content-safely/](https://blog.mozilla.org/addons/2012/08/20/exposing-objects-to-content-safely/)

我正在尝试在从 Firefox 网站下载的 hello world 扩展中执行此操作。

```
var sharedObject = { foo : "Hello!" };
window.wrappedJSObject.sharedObject = sharedObject; 
```

在我的网页 JS 我有

```
alert(window.sharedObject.foo); 
```

但它说 window.sharedObject 未定义。有什么线索吗？我也想安全地做，但首先我打算让它工作。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:14:36.703

这是您要注入对象的**contentWindow**

```
var sharedObject = { foo : "Hello!" };
contentWindow.wrappedJSObject.sharedObject = sharedObject; 
```

请记住，没有该`__exposedProps__`属性，`foo`将`undefined`用于网页代码。

# xslt-2.0 - 使用 XSLT 进行 XML 转换

> ID：13872508
> 
> 赞同：0
> 
> 时间：2012-12-14T04:10:09.067
> 
> 标签：xslt-2.0

我有一个如下的 XML 文件：

```
<NOP>A focus on individual exhibitors is essential, though, in order to 
  understand how these figures influenced American (and global) culture and 
  how audiences were attracted to movies and movie theaters. Charles Musser 
  writes in his examination of Lyman Howeâ€™s career that â€œa focus on 
  exhibition lends itself to industrial history precisely because it must 
  address the economic basis of the motion picture industryâ€”the showmanâ€™s 
  ability to bring patrons through the front door.â€&lt;ENREF>1</ENREF> In order 
  to understand the artistic and managerial influences of showmen like Samuel 
  Lionel Rothafel (â€œRoxyâ€) and Sidney Patrick Grauman, one must analyze 
  their construction of stardom, their ethnic heritage and cultural background, 
  their facility with music, theater, film, and other performing arts, and the 
  ways in which they motivated patrons to enter their â€œfront door.â€
</NOP> 
```

我将以下 XSLT 与 XML 间谍一起使用，但它不适用于“ENREF”。任何帮助

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
  <xsl:template match="NOP">
  <div class="no-indent"><span><xsl:value-of select="."/></span></div>
  </xsl:template>
  <xsl:template match="ENREF">
    <small>
    <sup>
     <xsl:element name="a">
      <xsl:attribute name="id">enref-<xsl:value-of select="."/></xsl:attribute>
      <xsl:attribute name="href">#fn<xsl:value-of select="."/></xsl:attribute>
      <xsl:value-of select="."/>
     </xsl:element>
    </sup>
    </small>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:19:47.393

编写一个匹配某个元素的模板是不够的，您还需要确保该元素被处理。您没有向我们展示您想要的结果，所以我必须猜测您想要实现的目标，但首先尝试改变

```
 <xsl:template match="NOP">
  <div class="no-indent"><span><xsl:value-of select="."/></span></div>
  </xsl:template> 
```

至

```
 <xsl:template match="NOP">
  <div class="no-indent"><span><xsl:apply-templates/></span></div>
  </xsl:template> 
```

这样，`NOP`元素的子节点可以通过内置模板（确保`<xsl:apply-templates/>`为孙子和后代保持处理）或您的模板（如`ENREF`元素的模板）进行处理。

# mysql - MySQL 查询以从 Wordpress 元表中返回非空元值

> ID：13872511
> 
> 赞同：0
> 
> 时间：2012-12-14T04:10:26.190
> 
> 标签：mysql

我想查询与字符串匹配的元键的所有元值，例如genre_metalmusic、genre_popmusic、genre_grunge等。可以搭配：

```
%genre% 
```

而且我不喜欢检索重复的元值。问题是其中一些元键也没有值（空）。我只想返回不为空、不重复且与我的字符串匹配的元值。

我有这个查询几乎对我有用，除了它不会过滤空值：

```
SELECT DISTINCT meta_value  FROM wp_postmeta WHERE meta_key LIKE '%genre%' 
```

我尝试了一个附加条件来过滤 NULL，但它不起作用：

```
SELECT DISTINCT meta_value  FROM wp_postmeta WHERE meta_key LIKE '%genre%' AND meta_value IS NOT NULL 
```

你有一些关于如何有效地从 Wordpress 元表中获取非空元值的技巧吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:16:41.490

只是一种预感，但你试过吗？

```
SELECT DISTINCT meta_value  
FROM wp_postmeta 
WHERE meta_key LIKE '%genre%' 
      AND meta_value IS NOT NULL
      AND meta_value <> '' 
```

# java - Java 内存使用沙箱

> ID：13872512
> 
> 赞同：1
> 
> 时间：2012-12-14T04:11:05.773
> 
> 标签：java, memory-management, sandbox

我正在尝试为不受信任的 java 代码编写沙箱。
我使用java编写了沙箱。沙盒需要：

> 1.  限制不受信任代码的内存使用。如果不受信任的代码使用的内存超过指定的限制，沙箱应该终止程序。
>     
> 2.  如果不受信任的代码没有超过指定的限制，沙箱也应该能够确定使用的“最大内存峰值”。

顺便说一句，当我在这里说内存时，它的意思是堆+非堆内存。

我发现您可以设置内存阈值并在内存池**之一超过阈值时收到通知。**但这不是我想要的，因为我想设置 Heap + Non-Heap 内存的限制。

我目前唯一的解决方案是每小毫秒轮询一次，使用来自 MemoryMXBean 的 getHeapMemoryUsage() 和 getNonHeapMemoryUsage() 获取堆+非堆内存[，](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/MemoryMXBean.html)并检查它是否超过了限制。

但我知道这个解决方案也绝对不好（并且有缺陷）。还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T04:15:13.280

单个 JVM 在所有线程之间有一个共享堆。您不能“沙盒”内存。如果您希望管理每个应用程序的内存，则必须运行一个单独的进程。

现在，如果您想限制整体内存（堆 + 非堆），您可以通过[JNA调用系统函数](https://github.com/twall/jna)[setrlimit](http://linux.die.net/man/2/setrlimit)（如果您正在运行 Linux） ，或者您可以在运行 Java 进程之前调用[ulimit 。](http://ss64.com/bash/ulimit.html)

要了解您的进程正在使用多少内存，请从[ManagementFactory.getOperatingSystemMXBean()](http://docs.oracle.com/javase/7/docs/api/java/lang/management/OperatingSystemMXBean.html)获取 CommittedVirutalMemorySize 属性（但没有获取器）。

如果您想收到即将关闭的通知，请使用 setrlimit/ulimit 的软限制。您的进程将定期收到超出软限制的[信号。](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/signals.html)如果您设置了硬限制并且超过了该限制，则该进程将被终止。

编辑：添加了关于获取内存大小和 setrlimit 信号的段落。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T04:42:47.483

我认为如果没有深奥的魔法，这是不可能的：要么重写不受信任代码的字节码，要么修改底层 JVM 以跟踪内存使用情况。

作为一个实验，我已经实现了前者（重写字节码），以限制不受信任代码的内存分配（和指令消耗），使用`-javaagent`s 在加载时重写 java 类的字节码并插入检查在每次内存分配之前。

有了这个，我们可以调用一个函数并将该函数（以及它调用的任何东西）限制为，例如 1024 字节的内存分配和 10000 条指令，如果它超出，就会导致它抛出异常。kinda-sorta 工作代码可在

[https://github.com/lihaoyi/6858](https://github.com/lihaoyi/6858)

tl; 博士：这该死的很难。并非不可能，但如果你有截止日期，你不会尝试这样做，如果你真的能做到，你可能会发表一篇会议论文。

# c++ - 如何通过 C++ 的句柄关闭 MessageBox 窗口

> ID：13872514
> 
> 赞同：3
> 
> 时间：2012-12-14T04:11:13.660
> 
> 标签：c++, windows, winapi, messagebox

我有一个多线程应用程序，它可能会显示一个 MessageBox 以供用户交互。在用户从应用程序的系统托盘图标中选择上下文菜单命令后，消息框本身会从工作线程中显示，因此从技术上讲，用户可以在显示消息框时继续使用该应用程序。这很有效，直到用户发出“退出”命令，此时我需要找到一种方法来关闭任何打开的消息框。

我做了功课，并且能够获得消息框的主（对话框）窗口的 HWND 句柄（[使用此方法](http://www.codeproject.com/Articles/10037/How-to-change-the-MessageBox-window-Add-controls-a)。）我使用 Spy++ 检查了 HWND 是否正确，因此 HWND 本身不是问题。发生的情况是，当我`PostMessage(hMsgBoxWnd, WM_CLOSE, 0, 0);`从另一个线程到消息框时，它只是忽略此消息并且不会关闭。

知道如何通过窗口句柄关闭消息框吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:24:54.637

`MessageBox()`根本不会`WM_CLOSE`在所有位置处理：

[SendMessage/PostMessage WM_CLOSE 到 MessageBox 窗口并不总是有效](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/18be2271-d7ec-4fee-9960-e90a4cb91758)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:37:55.617

您应该使用 PostThreadMessage 发布到线程特定的消息队列

# jquery - 在多个 keydown 事件后一秒执行 AJAX 搜索

> ID：13872515
> 
> 赞同：3
> 
> 时间：2012-12-14T04:11:21.693
> 
> 标签：jquery, ajax, autocomplete

所以我正在使用**jquery进行****自动完成**。Ajax 用于从远程位置获取**沉重的 xml 文件。**如果我搜索前。“好汉好汉”**它**使用 ajax 进行了大约 16 个查询（对于除了第 3 个输入的每个字母，请查看代码）。

 ******我希望它**在用户按下最后一个键后一秒钟执行 Ajax 请求，**因此它将执行一个查询而不是 16 个查询。

因此，如果用户在上次 keydown 事件后 1 秒之前按下另一个键，则它不会执行查询。

```
<script>
    $(document).ready(function(){
        $('#tv_search').keydown(function(){
            var search = $(this).val();
            if(search.length >= 3)
            {
                $.ajax({
                  type: "GET",
                  url: "search.php",
                  data: {show : search, key : '890k4900k0ll' }
                }).done(function(msg){
                    $('#t').html(msg);
                });
            }
        });
    });
</script>

Search for series: <input type='text' name='tv_search' id='tv_search'> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T04:25:38.457

您可以只使用超时，并在每次按下键时清除它：

```
$(document).ready(function() {
    $('#tv_search').on('keyup', function() {
        clearTimeout($(this).data('timer'));
        var search = this.value;
        if (search.length >= 3) {
            $(this).data('timer', setTimeout(function() {
                $.ajax({
                    type: "GET",
                    url: "search.php",
                    data: {
                        show: search,
                        key: '890k4900k0ll'
                    }
                }).done(function(msg) {
                    $('#t').html(msg);
                });
            }, 1000));
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T04:25:42.283

为避免在每次按键时生成多个 AJAX 请求，请尝试以取消上次超时并在清除超时后调用来启动新超时的方式使用`setTimeout()`和方法。方法应该包含在四分之一秒（250 毫秒）用户按下一个键后执行的 AJAX 请求。`clearTimeout()``setTimeout()``setTimeout()`

`abort()`如果可用，我也提出请求。

```
var timeOut = null,
    myXHR = null;
$(document).ready(function(){
    $('#tv_search').keydown(function(){
        // It will clear the setTimeOut activity if valid.
        if(timeOut) clearTimeout(timeOut);

        var search = $(this).val();
        if(search.length >= 3)
        {
            timeOut = setTimeout(function(){
              // Cancel the last request if valid
              if(myXHR) myXHR.abort();

              myXHR = $.ajax({
                type: "GET",
                url: "search.php",
                data: {show : search, key : '890k4900k0ll' }
              }).done(function(msg){
                  $('#t').html(msg);
              });
            }, 250);// wait for quarter second.
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T12:40:49.907

我有一个解决方案，可以让您延迟调用的任何方法，避免重复调用，根本不会使用！

[https://stackoverflow.com/a/30503848/1834212](https://stackoverflow.com/a/30503848/1834212)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T12:26:48.783

退出简单的解决方案：

```
<script>
$(document).ready(function(){
var mytimer;
    $('#tv_search').keydown(function(){
       clearTimeout(mytimer);
        var search = $(this).val();
        if(search.length >= 3)
        {
           mytimer = setTimeout(function(){
             $.ajax({
              type: "GET",
              url: "search.php",
              data: {show : search, key : '890k4900k0ll' }
            }).done(function(msg){
                $('#t').html(msg);
            });
         }, 1000);
        }
    });
}); 
```

其中“ **mytimer** ”必须是全局变量，只需在每次事件调用时清除先前的“ **mytimer ”。**它只会以 1 秒的间隔执行最新的调用。******

# rubygems - rubygems 休息客户端错误消息

> ID：13872518
> 
> 赞同：3
> 
> 时间：2012-12-14T04:11:53.697
> 
> 标签：rubygems, rest-client

新的 Ruby 用户，我完全上瘾了，喜欢它......但是......我已经遇到了一个障碍 已经阅读了大量关于 Ruby 基础/理论/等的内容，通过“Bastards”Ruby 课程和我尝试使用“rest-client”gem 时收到错误消息

我输入：

```
require "rubygems"
require "rest-client"
res = RestClient.get("http://en.wikipedia.org/wiki")
puts res.code
#=> 200

puts res.body
#=> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
#=> "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
#=> <html lang="en" dir="ltr" class="client-nojs" xmlns="http://www.w3.org/1999/xhtml">
#=> <head> ... 
```

并得到：

```
LoadError: no such file to load — rest-client

method gem_original_require in custom_require.rb at line 36
method require  in custom_require.rb at line 36
at top level    in gem.rb at line 2
copy output
Program exited with code #1 after 0.06 seconds. 
```

我确定这是非常基本的，并且在寻求帮助时感到有些尴尬，但是我已经尝试了所有可能的地方来找到解决方法

在 Mac OS10 上

感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T10:24:57.893

你需要做三件事：

**1.**在您的代码中更改`require 'rest-client'`为`require 'rest_client'`.

**2.**确保安装了 rest-client gem：在控制台，进入你的项目目录并输入

`$gem list | grep rest-client`

如果安装了 gem，该命令应该返回类似*rest-client (1.6.7) 的*内容。如果发生这种情况，请继续执行步骤#3。如果没有返回任何内容，则键入：

`$gem install rest-client`

并等到安装gem。

**3.**安装 gem 后，留在同一命令行并从中运行您的脚本。如果您从编辑器中运行它，则从同一命令行启动您的编辑器，例如

```
$>sublime-text --project mywork.sublime-project & 
```

（当然，假设 sublime-text 在您的本地 bin 目录中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:21:16.380

回答这个必须 cd 到正确的目录

# c# - 无法将类型“HelloWorldNew.Vehicle”转换为 System.Collections.Generic.List

> ID：13872519
> 
> 赞同：-2
> 
> 时间：2012-12-14T04:11:55.950
> 
> 标签：c#, android, web-services

我想将我的 Vehicle 传递对象作为列表或数组返回。我目前拥有的代码如下。它突出显示“（列表）通过”和错误状态

```
Cannot convert type 'HelloWorldNew.Vehicle' to System.Collections.Generic.List<HelloWorldNew.Vehicle>' 
```

```
 [WebMethod]
 public List<Vehicle> GetCustomerList(Vehicle passed)
 {
    List<Vehicle> newL = (List<Vehicle>)passed;
    return newL;
 } 
```

如果可以修改上述代码示例以便我可以将车辆对象作为列表返回，那就太好了。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:37:00.233

`passed` 是车辆列表中的一项`newL`。您不能将一个项目投射到整个事物上，就像将糖果投射到糖果袋一样。所以在这里你需要将项目添加到列表中

```
List<Vehicle> newL = new List<Vehicle> { passed };

                         or

List<Vehicle> newL = new List<Vehicle>();
newL.Add(passed); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T04:18:38.203

```
List<Vehicle> newL = new List<Vehicle> { passed }; 
```

是你想要的

# c# - 类初始化错误

> ID：13872521
> 
> 赞同：3
> 
> 时间：2012-12-14T04:12:18.557
> 
> 标签：c#, xna

我正在使用 Visual Studio C# Express 和 Xna 4.0

好吧，我是一名业余程序员，我可能不是这样做的最好方法，所以如果你想向我展示一个更好的方法并解决我的问题，那就太好了。

我的问题是我在运行此代码时遇到了一个我不明白的错误。

这是我正在使用的课程，问题不在这里，但这很重要：

```
class ShipType
{
    public Vector2 Size;
    public int LogSlots;
    public int DefSlots;
    public int OffSlots;
    public int SpecSlots;

    public int HullBase;
    public int TechCapacity;
    public int EnergyCapacity;
    public int WeightBase;
    public string Class;
    public string Manufacturer;
    public string Description;

    public void Initialize(
        ref Vector2 Size,
        ref int LogSlots, ref int DefSlots, ref int OffSlots, 
        ref int SpecSlots, ref int HullBase, ref int TechCapacity, 
        ref int EnergyCapacity, ref int WeightBase,
        ref string Class, ref string Manufacturer, ref string Description)
    {

    }
} 
```

这是我遇到问题的地方，运行初始化方法时出现错误：

```
class AOSEngine
{
    public Player PlayerA = new Player();
    public List<ShipType> ShipTypeList = new List<ShipType>(10);

    public void Initialize()
    {
        //Build Ship Type List
        ShipTypeList = new List<ShipType>(10);
        ShipTypeList.Add(new ShipType());
        ShipTypeList[0].Initialize(new Vector2(0, 0), 4, 4, 4, 4, 
                                   100, 100, 100, 10, "Cruiser", 
                                   "SpeedLight", "");

    }
} 
```

运行 Initialize Line 时出现错误，如下：

> 最佳重载方法匹配`AOS.ShipType.Initialize(ref Vector2 Size, ... ref string Description)`有一些无效参数。

再一次，我可能没有做得很好，所以如果你有任何做得更好的建议，我很想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:15:56.370

由于您已将参数声明为`ref`，因此在传入变量时需要使用`ref`关键字：

```
ShipTypeList[0].Initialize(ref new Vector2(0, 0),ref 4,ref 4,ref 4,ref 4,ref 100,ref 100,ref 100,ref 10,ref "Cruiser",ref "SpeedLight",ref ""); 
```

也就是说，这里没有充分的理由使用 ref 参数 - 你最好`ref`从 Initlialize() 方法中删除关键字：

```
public void Initialize(
     Vector2 Size,
     int LogSlots,  int DefSlots,  int OffSlots,  int SpecSlots,
     int HullBase,  int TechCapacity,  int EnergyCapacity,  int WeightBase,
     string Class,  string Manufacturer,  string Description)
{
    this.LogSlots = LogSlots;
    this.DefSlots = DefSlots;
    //...etc...
} 
```

有关为什么以及如何使用 ref 的详细信息，请参阅 Jon Skeets 文章：[http ://www.yoda.arachsys.com/csharp/parameters.html](http://www.yoda.arachsys.com/csharp/parameters.html)

# android - 启动在拨号盘上按数字的活动

> ID：13872522
> 
> 赞同：3
> 
> 时间：2012-12-14T04:12:22.920
> 
> 标签：android

我想在我按下拨号盘上的某个数字（例如#123#）后立即启动我的活动。
整个场景是-
1- 用户按下拨号盘上的某些键。
2-只要数字与指定的数字匹配，我的活动就应该启动。
3- 拨号盘必须离开屏幕。

请帮忙。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T20:21:14.543

是的，您可以检查一下： [从侦听拨出电话的广播接收器启动活动](https://stackoverflow.com/questions/6402679/launching-an-activity-from-a-broadcast-receiver-that-listens-to-outgoing-call)

```
public void onReceive(Context context, final Intent intent) {   

  if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
   String phoneNumber = intent.getExtras().getString(Intent.EXTRA_PHONE_NUMBER );
   Log.i(TAG , "Received Outgoing Call");
     if(phoneNumber.equals("#*12345*#")) {

        Intent intent1 = new Intent(context , MainActivity.class);
        Log.i(TAG , "Starting ShaDoW Main Activity");
        intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK );
        context.startActivity(intent1); 
   } 
```

# algorithm - 使用haskell打印所有可能的路径

> ID：13872523
> 
> 赞同：1
> 
> 时间：2012-12-14T04:12:31.777
> 
> 标签：algorithm, haskell

我需要编写一个程序来绘制给定矩阵中的所有可能路径，这些路径可以通过仅向左、向右和向上移动来获得。一个人不应多次穿越同一地点。另请注意，在特定路径上，我们可能会或可能不会在所有可能的方向上使用运动。

路径将从矩阵的左下角开始，并到达右上角。以下符号用于表示当前位置的运动方向：

```
 +---+
 | > |  right
 +---+
 +---+
 | ^ |  up
 +---+
 +---+
 | < |  left
 +---+ 
```

该符号`*`用于最终位置以指示路径的结束。

例子：

对于 5x8 矩阵，使用左、右和上方向，下面显示了 2 条不同的路径。

路径一：

```
 +---+---+---+---+---+---+---+---+
 |   |   |   |   |   |   |   | * |
 +---+---+---+---+---+---+---+---+
 |   |   | > | > | > | > | > | ^ |
 +---+---+---+---+---+---+---+---+
 |   |   | ^ | < | < |   |   |   |
 +---+---+---+---+---+---+---+---+
 |   | > | > | > | ^ |   |   |   |
 +---+---+---+---+---+---+---+---+
 | > | ^ |   |   |   |   |   |   |
 +---+---+---+---+---+---+---+---+ 
```

路径 2

```
 +---+---+---+---+---+---+---+---+
 |   |   |   | > | > | > | > | * |
 +---+---+---+---+---+---+---+---+
 |   |   |   | ^ | < | < |   |   |
 +---+---+---+---+---+---+---+---+
 |   |   |   |   |   | ^ |   |   |
 +---+---+---+---+---+---+---+---+
 |   |   | > | > | > | ^ |   |   |
 +---+---+---+---+---+---+---+---+
 | > | > | ^ |   |   |   |   |   |
 +---+---+---+---+---+---+---+---+ 
```

谁能帮我这个？

我尝试使用列表来解决。我很快意识到我正在制造一场灾难。这是我尝试过的代码。

```
 solution x y = travel (1,1) (x,y) 
 travelRight (x,y) = zip [1..x] [1,1..] ++ [(x,y)] 
 travelUp (x,y) = zip [1,1..] [1..y] ++ [(x,y)]
 minPaths = [[(1,1),(2,1),(2,2)],[(1,1),(1,2),(2,2)]]

 travel startpos (x,y) = rt (x,y) ++ up (x,y)

 rt (x,y) | odd y = map (++[(x,y)]) (furtherRight (3,2) (x,2) minPaths)
          | otherwise = furtherRight (3,2) (x,2) minPaths
 up (x,y) | odd x = map (++[(x,y)]) (furtherUp (2,3) (2,y) minPaths)
          | otherwise = furtherUp (2,3) (2,y) minPaths

 furtherRight currpos endpos paths | currpos == endpos = (travelRight currpos) : map (++[currpos]) paths
                                   | otherwise = furtherRight (nextRight currpos) endpos ((travelRight currpos) : (map (++[currpos]) paths))
 nextRight (x,y) = (x+1,y)

 furtherUp currpos endpos paths | currpos == endpos = (travelUp currpos) : map (++[currpos]) paths
                                | otherwise = furtherUp (nextUp currpos) endpos ((travelUp currpos) : (map(++[currpos]) paths))
 nextUp (x,y) = (x,y+1)

 identify lst = map (map iden) lst
 iden (x,y) = (x,y,1)

 arrows lst = map mydir lst
 mydir (ele:[]) = "*"
 mydir ((x1,y1):(x2,y2):lst) | x1==x2 = '>' : mydir ((x2,y2):lst)
                             | otherwise = '^' : mydir ((x2,y2):lst)

 surroundBox lst = map (map createBox) lst
 bar = "+    -+"
 mid x = "| "++ [x] ++" |"
 createBox chr = bar ++ "\n" ++ mid chr ++ "\n" ++ bar ++ "\n" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:24:01.087

这个 ASCII 网格比启发性更令人困惑。让我描述一种更好的方式来表示每条可能的路径。

每个非顶行将恰好有一个带有 UP 的单元格。我声称一旦选择了每个 UP 单元格，就可以确定 LEFT、RIGHT 和 EMPTY 单元格。我声称每个非顶行中的所有可能的单元格都可以在所有组合中为 UP。

因此，每条路径都与确定 UP 单元格的范围（1..columns）中的（行-1）长度的数字列表同构。因此，允许路径的数量是 columns^(rows-1) 并且以这种格式枚举可能的路径应该很容易。

然后您可以制作一台将这种格式转换为 ASCII 艺术的打印机。这可能很烦人，具体取决于技能水平。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T05:08:30.103

看起来像一个家庭作业，所以我会尽量给出足够的提示

*   尝试首先填充从单元格到目标的路径数。

所以

```
 +---+---+---+---+---+---+---+---+
 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | * |
 +---+---+---+---+---+---+---+---+
 |   |   |   |   |   |   |   |   |
 +---+---+---+---+---+---+---+---+
 |   |   |   |   |   |   |   |   |
 +---+---+---+---+---+---+---+---+
 |   |   |   |   |   |   |   |   |
 +---+---+---+---+---+---+---+---+
 |   |   |   |   |   |   |   |   |
 +---+---+---+---+---+---+---+---+ 
```

这里要注意的是，从顶层的单元格到`*`.

*   同一行中单元格的可能路径数将相同。您可以意识到这一点，因为所有路径最终都必须向上移动，因为没有向下操作，因此在任何路径中，当前行中的任何单元格都可以到达当前行上方的单元格。

*   您可以感觉到当前单元格的所有可能路径与左、右和上方单元格的可能路径有关系。但正如我们所知，我们可以从一行中的一个单元格中找到所有可能的路径，其余单元格的可能路径将是同一行中的一些移动，然后是来自该单元格的可能路径的后缀。

也许我会给你一个例子

```
 +---+---+---+
 | 1 | 1 | * | 
 +---+---+---+
 |   |   |   |  
 +---+---+---+
 |   |   |   |   
 +---+---+---+ 
```

您知道来自第一行单元格的所有可能路径。您需要在第二行中找到相同的内容。所以一个好的策略是为最正确的细胞做这件事

```
 +---+---+---+
 | > | > | * | 
 +---+---+---+
 | ^ | < | < |  
 +---+---+---+
 |   |   |   |   
 +---+---+---+

 +---+---+---+
 |   | > | * | 
 +---+---+---+
 |   | ^ | < |  
 +---+---+---+
 |   |   |   |   
 +---+---+---+

 +---+---+---+
 |   |   | * | 
 +---+---+---+
 |   |   | ^ |  
 +---+---+---+
 |   |   |   |   
 +---+---+---+ 
```

现在，正如我之前所说，使用这些为同一行中的其余单元格找到这个是微不足道的。

最后，如果您有`m X n`矩阵，则从左下角到右上角的路径数将为`n^(m-1)`.

# 另一种方式

这种方式不是很理想，但很容易实现。考虑`m X n`网格

*   找到最长的路径。您不需要确切的路径，只需要`<`, `>`, `^`. `m`您可以根据和找到直接公式`n`。

喜欢

```
 ^ = m - 1
 < = (n-1) * floor((m-1)/2) 
 > = (n-1) * (floor((m-1)/2) + 1) 
```

*   任何有效路径都将是其排列的前缀，您可以对其进行详尽搜索。使用`permutations`from`Data.List`获取所有可能的排列。然后制作一个给定路径的函数，从中剥离有效路径。将其映射到排列列表并删除重复项。需要注意的是路径将是您从排列中获得的前缀，因此同一路径可以有多个排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:39:28.237

您可以创建该矩阵并定义“字段”吗？即使你不能（给出了一个特定的矩阵），你也可以将一个`[(Int, Int)]`矩阵（这对于这种任务听起来很合理）映射到你自己的表示中。

由于您没有指定您的技能水平，我希望您不介意我建议您首先尝试创建某种网格以便进行一些工作：

```
data Status = Free | Left | Right | Up
    deriving (Read, Show, Eq)
type Position = (Int, Int)
type Field = (Position, Status)
type Grid = [Field]

grid :: Grid
grid = [((x, y), stat) | x <- [1..10], y <- [1..10], let stat = Free] 
```

当然，还有其他方法可以实现这一点。之后你可以定义一些动作，映射`Position`到`Grid`索引和`Status`es 到可打印的字符......试着摆弄它，你可能会得到一些想法。

# objective-c - 使用 zlib 解压缩 zip 文件会在 IOS 中永久返回错误

> ID：13872528
> 
> 赞同：1
> 
> 时间：2012-12-14T04:13:02.943
> 
> 标签：objective-c, zlib

我使用 iOS，我想使用 zlib 将 .zip 文件解压缩到内存，但它总是返回错误代码`-3`。

我的代码如下：

```
NSData *sData = [[NSFileManager defaultManager] contentsAtPath:[[NSBundle mainBundle] pathForResource:@"mactxt" ofType:@"zip"]];
NSData *srcData = [[NSFileManager defaultManager] contentsAtPath:[[NSBundle mainBundle] pathForResource:@"mactxt" ofType:@"rtf"]];
unsigned int l = srcData.length;
unsigned long srcLen = sData.length;

unsigned long dstLen = l;
void * dest =malloc(dstLen);
memset(dest, 0x00, dstLen);
const void * src =[sData bytes];
int a = uncompress(dest, &dstLen, src, srcLen);
if (a==0) {
    NSData *data = [[NSData alloc] initWithBytes:dest length:dstLen];
    [data writeToFile:[self dataFilePath:@"matxt.rtf"] atomically:YES];
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:33:26.943

它失败了，因为它是错误的格式。`.zip`档案不是用 zlib 压缩的——他们使用的是 PKZIP，这是一种有点复杂的档案格式，通常包含多个文件，而不仅仅是一个数据流。

# windows - 在 wshShell.Run 上打开多个窗口的命令提示符

> ID：13872529
> 
> 赞同：2
> 
> 时间：2012-12-14T04:13:11.317
> 
> 标签：windows, vba, command, prompt

嗨我正在尝试在 VBA 中运行以下命令

设置 wshShell = CreateObject("WScript.Shell") wshShell.Run "cmd.exe runas some commands"

它正在打开多个命令提示符窗口。

如果我运行 wshShell.Run "cmd.exe" 只有这个然后它会打开一个窗口。

我在第一种情况下做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:22:06.100

在运行其余命令之前，尝试使用 /K 开关并在 cmd.exe 周围保留引号

wshShell.Run " 'cmd.exe /K' '这里的命令'"

# ruby - 如何在 Ruby 中使用 mechanize 执行 Head 请求

> ID：13872530
> 
> 赞同：4
> 
> 时间：2012-12-14T04:13:16.587
> 
> 标签：ruby, mechanize-ruby

我可以使用 Faraday (Faraday.head url) 执行`HEAD`请求，但我在当前项目中使用 Mechanize。

我想在不下载文件的情况下从标题（文件名）中获取一个值。机械化宝石是否提供这样的选项？我正在使用 v2.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T04:39:47.170

就像`get`但它`head`相反：

```
page = agent.head 'http://www.google.com/'
page.body.length
#=> 0
page.header.keys
#=> ["date", "expires", "cache-control", "content-type", "set-cookie", "p3p", "server", "x-xss-protection", "x-frame-options", "transfer-encoding"] 
```

# c# - 类和构造函数：在类外增加一个变量

> ID：13872532
> 
> 赞同：0
> 
> 时间：2012-12-14T04:13:30.867
> 
> 标签：c#

我目前正在使用类和构造函数。我在构造函数中有一个名为`current`equals的 sint 变量`0`。现在，当我单击按钮时，我试图增加属性`current`，然后调用 GetNextTree 来显示。但是`current++`从按钮单击递增时，我收到此错误：`does not exist in current context`. 那么增加的正确方法是`current`什么？

```
public class fruit_trees
    {

    } 
public class ListForTrees
        {
    public int current;

    public fruit_trees GetNextTree()
            {
                current = 0;
                fruit_trees ft = first_tree;
                int i = 0;
                while (i != current)
                {
                    ft = ft.next_tree;
                    i++;

                }

                return ft;

            }

    }

private void ShowNextItem_Click(object sender, EventArgs e)
        {
            //Show Last Item

            fruit_trees obj = mainlist.GetNextTree();

            if (obj == null)
            {
                labelSpecificTree.Text = "No more trees!";
            }
            else
            {
               //error: current does not exist?
        current++
                labelSpecificTree.Text = obj.next_tree.GetTreeType.ToString();

            }   

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:18:31.473

问题出在您尝试调用的范围（封装）中`int current`。

从您发布的代码中，`int current`定义在`class ListForTrees`. 但是，您试图在不初始化 ListForTrees 类型的对象的情况下访问它。

此外，您使用`mainlist`的也未在您发布的代码中定义。请发布您在代码中使用的项目的完整代码覆盖率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:18:33.220

您的`current`变量被封装在您的`ListForTrees`类中。由于此变量是一个实例变量，因此您需要创建一个新实例`ListForTrees`才能使用`instance.variable`语法访问此变量。

此外，我相信您的课程设计存在很大缺陷。我认为您应该重新设计您的课程，例如：

```
public class FruitTree
{
    public static int Current { get; set; }
    public FruitTree GetNextTree()
    {
        //your code here
    }
} 
```

然后你可以在你的代码中初始化一个树列表

# python - 在同一个图中绘制不同的 DataFrame

> ID：13872533
> 
> 赞同：120
> 
> 时间：2012-12-14T04:13:35.073
> 
> 标签：python, matplotlib, pandas

我有一个包含多年温度记录的温度文件，格式如下：

```
2012-04-12,16:13:09,20.6
2012-04-12,17:13:09,20.9
2012-04-12,18:13:09,20.6
2007-05-12,19:13:09,5.4
2007-05-12,20:13:09,20.6
2007-05-12,20:13:09,20.6
2005-08-11,11:13:09,20.6
2005-08-11,11:13:09,17.5
2005-08-13,07:13:09,20.6
2006-04-13,01:13:09,20.6 
```

每年都有不同的数字，记录的时间，所以熊猫的日期时间索引都是不同的。

我想在同一图中绘制不同年份的数据以进行比较。X 轴是一月到十二月，Y 轴是温度。我该怎么做呢？

* * *

## 回答 #1

> 赞同：381
> 
> 时间：2012-12-14T05:09:24.720

尝试：

```
ax = df1.plot()
df2.plot(ax=ax) 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2017-07-20T21:17:49.860

如果您正在运行 Jupyter/Ipython 笔记本并遇到使用问题；

`ax = df1.plot()`

`df2.plot(ax=ax)`

在同一个单元格内运行命令！！由于某种原因，当它们被分成连续的单元格时，它不会起作用。至少对我来说。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-12-14T10:24:59.393

尽管 Chang 的回答解释了如何在同一个图形上多次绘制，但在这种情况下，使用 a[`groupby`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby)和[`unstack`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack)ing 可能会更好：

*（假设您在数据框中有这个，并且已经有日期时间索引）*

```
In [1]: df
Out[1]:
            value  
datetime                         
2010-01-01      1  
2010-02-01      1  
2009-01-01      1  

# create additional month and year columns for convenience
df['Month'] = map(lambda x: x.month, df.index)
df['Year'] = map(lambda x: x.year, df.index)    

In [5]: df.groupby(['Month','Year']).mean().unstack()
Out[5]:
       value      
Year    2009  2010
Month             
1          1     1
2        NaN     1 
```

现在很容易绘制（每年单独一行）：

```
df.groupby(['Month','Year']).mean().unstack().plot() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-30T00:30:50.787

要对多个数据帧执行此操作，您可以对它们执行 for 循环：

```
fig = plt.figure(num=None, figsize=(10, 8))
ax = dict_of_dfs['FOO'].column.plot()
for BAR in dict_of_dfs.keys():
    if BAR == 'FOO':
        pass
    else:
        dict_of_dfs[BAR].column.plot(ax=ax) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-25T11:14:45.900

只是为了增强@adivis12 的答案，您不需要做`if`声明。把它像这样：

```
fig, ax = plt.subplots()
for BAR in dict_of_dfs.keys():
    dict_of_dfs[BAR].plot(ax=ax) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-15T15:56:57.343

您可以使用 中的`hue`参数`seaborn`。例如：

```
import seaborn as sns
df = sns.load_dataset('flights')

     year month  passengers
0    1949   Jan         112
1    1949   Feb         118
2    1949   Mar         132
3    1949   Apr         129
4    1949   May         121
..    ...   ...         ...
139  1960   Aug         606
140  1960   Sep         508
141  1960   Oct         461
142  1960   Nov         390
143  1960   Dec         432

sns.lineplot(x='month', y='passengers', hue='year', data=df) 
```

[![在此处输入图像描述](../Images/3a79d3cb1deed44d1defdb407b78216a.png)](https://i.stack.imgur.com/3ULp1.png)

# c# - 如何为对象提供 ID 以在任何方法中使用？

> ID：13872535
> 
> 赞同：1
> 
> 时间：2012-12-14T04:13:49.600
> 
> 标签：c#, .net, object, properties

我是从 JavaScript 语言进入 C# 的，但我似乎找不到一种方法来将字符串 ID 名称分配给我的表单应用程序中的对象，这些对象可以在许多方法中使用。例如，

```
string inputNameBox = textbox1.Text; 
```

我希望能够在任何方法中使用“inputNameBox”。如果我在按钮的单击事件中分配 inputNameBox，则一切正常。但我希望能够在不向 textbox1.Text 提供新字符串 ID 的情况下以另一种方法调用 inputNameBox。

我尝试使用静态字符串和常量，但它们返回错误。我也尝试将它们设置为属性，但值 = null。

如何在任何方法中为 .Text 对象使用相同的字符串 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:18:47.587

使用属性：

```
public string InputNameBox
{
    get { return textBox1.Text; }
    set { textBox1.Text = value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:19:50.473

您可以使用数据绑定来完成此操作。

# javascript - 如何将子选择器和子元素添加到变量，引用元素

> ID：13872537
> 
> 赞同：1
> 
> 时间：2012-12-14T04:13:57.607
> 
> 标签：javascript, jquery

我需要将一个子选择器和子元素添加到一个变量，引用一个元素。但我似乎无法让它工作..我试过了；

```
 var wrapper = $('#wrapper');

  if($(wrapper+' > .box').length > 0)) // unsuccessful

  if(wrapper.add(' > .box').length > 0)) // unsuccessful

  and

  if(wrapper[0]+' > .box'.length > 0)) // unsuccessful 
```

谢谢凸轮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:19:16.033

我猜 .box 是包装器的直接子代，并且您正在尝试检查它是否存在，因此您可能会这样做：

```
var wrapper = $('#wrapper');

if ( wrapper.children('.box').length ) {
    //wrapper has direct child .box
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:30:01.313

问题是您将选择与选择器混淆了。如果你做了：

```
var selector = "#wrapper";
var wrapper = $(selector); 
```

然后你可以适当地测试它：

```
if ( $(selector + " > .box").length ) 
```

请注意，这`>`是[第一个子](http://reference.sitepoint.com/css/pseudoclass-firstchild)选择器。

# javascript - chrome.storage.local.get 和设置

> ID：13872542
> 
> 赞同：55
> 
> 时间：2012-12-14T04:14:13.763
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试`chrome.storage.local`在我的扩展程序中使用它，但它似乎不起作用。我使用过`localStorage`但意识到我不能在多个页面的内容脚本中使用它。

所以，这就是我想出的：

```
function save()
{
    var channels = $("#channels").val();
    var keywords = $("#keywords").val();

    chrome.storage.local.set({'channels': channels});
    chrome.storage.local.set({'keywords': keywords});
} 
```

我确实相信我做对了`save()`，但问题出现在`load()`：

```
function load()
{
    var channels = "";
    chrome.storage.local.get('channels', function(result){
        channels = result;
        alert(result);
    });

    var keywords = "";
    chrome.storage.local.get('keywords', function(result){
        keywords = result;
        alert(result);
    });

    $("#channels").val(channels);
    $("#keywords").val(keywords);
} 
```

当警报触发时，它会打印出`[object Object]`. 这是为什么？我究竟做错了什么？我查看了文档/示例，但似乎无法确定问题所在。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-14T05:35:46.573

这段代码对我有用：

```
function load() {
    var channels = "";
    var keywords = "";
    chrome.storage.local.get('channels', function (result) {
        channels = result.channels;
        alert(result.channels);
        $("#channels").val(channels);
    });
} 
```

[Chrome.storage.local.get()](https://developer.chrome.com/extensions/storage.html#method-StorageArea-get)返回一个对象，其键值映射中有项目，因此您必须在搜索模式中使用键的索引。

### 小鬼：

感谢 Rob 指出：[Chrome.storage.local.get()](https://developer.chrome.com/extensions/storage.html#method-StorageArea-get)是[**异步**](https://developer.chrome.com/extensions/overview.html#sync)的，您应该修改代码以确保它们在 callback() 成功后工作。

如果您需要更多信息，请与我们联系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T05:28:44.710

调试或使用

```
alert(JSON.stringify(result)); 
```

有关您获得的更多详细信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-10T15:19:29.897

您正在使用的“结果”值是一个包含存储值的对象，用于获取您必须使用`result.keywords`的值，这将获取关键字的值。前任：

```
function load(){
  chrome.storage.local.get('keywords', function(result){
    var keywords = result.keywords;
    alert(keywords);
  });

  chrome.storage.local.get('channels', function(result){
    var channels = result.channels;
    alert(channels);
  });
} 
```

# jquery-ui - jQuery UI 选项卡：如何从不同页面加载特定元素？

> ID：13872543
> 
> 赞同：2
> 
> 时间：2012-12-14T04:14:31.283
> 
> 标签：jquery-ui, jquery, jquery-ui-tabs

我设置了 jQuery UI 选项卡，但是我在链接到不同页面时遇到的一个问题是它们将页面的所有内容加载到选项卡中。这包括页脚、页眉和其他我不想在选项卡中出现的导航栏。如果我只想从该页面加载一个 ID 怎么办？

我的标签是这样设置的：

```
<div id="mytabs">
<ul>
 <li><a href="derpsite.com/awesomepage">Awesome page</a></li>
 <li><a href="derpsite.com/foo">Foo</a></li>
</ul>
</div> 
```

jQuery 中没有发生什么事情...

```
$(function() {
$( "#mytabs" ).tabs();
}); 
```

假设这是“awesomepage”的 html（第一个链接的目标）：

```
<html>
<head>
<title>awesome page</title>
</head>
<body>
<div id="header">bla</div>
<div id="awesomeness">awesomeness!</div>
<div id="footer">fdsfd</div>
</body>
</html> 
```

...而且我只希望`#awesomeness`从页面加载选项卡。我该怎么做呢？我已经阅读了一些通过向 HTML 添加属性来做到这一点的指南`data-target="#youridhere"`，但我仍然对如何实现 javascript 感到困惑。这似乎是一个方便的解决方案，因为我不会在每个页面中定位相同的 ID。关于如何让javascript工作的任何线索？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:24:02.517

允许加载响应的部分代码的函数是 $.load() 函数。不幸的是，tabs() 特性没有使用这个函数，而是使用了 $.ajax。

你可以试试这个解决方案：

您可以尝试停止 beforeLoad 回调的默认处理并使用 $.load() 方法管理您的 ajax 调用。

（基于 1.9 文档，您可能应该适应）

```
$('#tabs').tabs({

// Callback run when selecting a tab
beforeLoad: function(event, ui) {

    // If the panel is already populated do nothing
    if (ui.panel.children().size() > 0)
        return false;

    // Make your own ajax load (with fragment feature)
    ui.panel.load(ui.tab.attr('href') + ' #yourFragment');

    // stop the default process (default ajax call should not be launched)
    return false;
}); 
```

注意：我不确定用 提取 URL `ui.tab.attr('href')`，在 ui.tab 之前检查什么对象，但检索 href 参数应该很容易。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:42:17.850

得到了解决方案:) 使用其中一个答案作为参考点，选项卡现在可以加载`data-target`属性中指定的单个元素。这是修改后的版本：

```
$(function() {
$('#tabs').tabs(
{
beforeLoad: function(event, ui) {
if (ui.panel.children().size() > 0)
    return false;
ui.panel.load($('a', ui.tab).attr('href') + $('a', ui.tab).attr('data-target'));
return false;
}
});
}); 
```

# c++ - GCC、字符串化和内联 GLSL？

> ID：13872544
> 
> 赞同：21
> 
> 时间：2012-12-14T04:14:53.060
> 
> 标签：c++, opengl, gcc, glsl, c-preprocessor

我想使用宏字符串化声明 GLSL 着色器字符串内联：

```
#define STRINGIFY(A)  #A
const GLchar* vert = STRINGIFY(
#version 120\n
attribute vec2 position;
void main()
{
    gl_Position = vec4( position, 0.0, 1.0 );
}
); 
```

这使用 VS2010 构建并运行良好，但无法编译`gcc`：

```
error: invalid preprocessing directive #version 
```

有没有办法以可移植的方式使用这样的字符串化？

我试图避免每行引号：

```
const GLchar* vert = 
"#version 120\n"
"attribute vec2 position;"
"void main()"
"{"
"    gl_Position = vec4( position, 0.0, 1.0 );"
"}"
; 
```

...和/或续行：

```
const GLchar* vert = "\
#version 120\n                                 \
attribute vec2 position;                       \
void main()                                    \
{                                              \
    gl_Position = vec4( position, 0.0, 1.0 );  \
}                                              \
"; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-14T04:19:28.467

你可以使用 C++11 吗？如果是这样，您可以使用[原始字符串文字](http://en.wikipedia.org/wiki/C++11#New_string_literals)：

```
const GLchar* vert = R"END(
#version 120
attribute vec2 position;
void main()
{
    gl_Position = vec4( position, 0.0, 1.0 );
}
)END"; 
```

不需要转义或明确的换行符。这些字符串以 R（或 r）开头。您需要在引号和第一个括号之间使用分隔符（我选择了 END）来转义代码片段中的括号。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-14T07:40:03.783

不幸的是，在宏的参数中包含预处理器指令是未定义的，因此您不能直接执行此操作。但只要您的着色器都不需要除 之外的预处理器指令`#version`，您就可以执行以下操作：

```
#define GLSL(version, shader)  "#version " #version "\n" #shader

const GLchar* vert = GLSL(120,
    attribute vec2 position;
    void main()
    {
        gl_Position = vec4( position, 0.0, 1.0 );
    }
); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-14T07:38:06.913

为了达到这个目的，我使用了 sed。我用 GLSL 编辑了单独的文件（使用正确的语法突出显示），同时 GLSL 在 C++ 中内联。不是很跨平台，但使用 msys 它可以在 windows 下工作。

在 C++ 代码中：

```
const GLchar* vert = 
#include "shader_processed.vert"
; 
```

在 Makefile 中：

```
shader_processed.vert: shader.vert
    sed -f shader.sed shader.vert > shader_processed.vert

programm: shader_processed.vert main.cpp
    g++ ... 
```

着色器.sed

```
s|\\|\\\\|g
s|"|\\"|g
s|$|\\n"|g
s|^|"|g 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-09T07:17:21.727

问题是由于用于 GLSL 的 gcc 预处理宏。在 GLSL 代码中使用带有新行的标准字符串化和转义预处理器指令对我有用。

```
#define STRINGIFY(A)  #A

const GLchar* vert = STRINGIFY(

\n#version 120\n
\n#define MY_MACRO 999\n

attribute vec2 position;
void main()
{
    gl_Position = vec4( position, 0.0, 1.0 );
}
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-08T08:05:13.613

另一种方法：包含一个头文件，但带有`.glsl`扩展名。

例如，我有一个名为`bar.h.glsl`. 它将我的顶点和片段着色器代码公开为原始文字：

```
#pragma once

namespace bar {

static const char vertex[] = R"(#version 410 core

// ----- vertex shader start -----
layout( location = 0 ) in vec4 vPosition;

uniform float Time;
uniform float Width;

void main()
{
    float x = vPosition.x;
    float y = vPosition.y * Width;
    float yOffset = mix(sin(Time), sin(Time * 0.75), x * 0.5 + 0.5);
    gl_Position = vec4(x, y + yOffset, vPosition.z, vPosition.w);
}
// ------ vertex shader end ------

)";
static const char fragment[] = R"(#version 410 core

// ----- fragment shader start ----
out vec4 fragColor;

void main()
{
    fragColor = vec4(1.0, 1.0, 1.0, 1.0);
}
// ------ fragment shader end -----

)";

} 
```

然后在我的源代码中，我只包含该文件：

```
#include "bar.h.glsl" 
```

并像这样访问 glsl 字符串：

```
bool success = barShader.Compile( bar::vertex, bar::fragment ); 
```

这样，虽然我需要忽略我的 glsl 文件中的一些 C 代码，但我可以充分利用 glsl 语法突出显示，而无需动态加载文件。

# objective-c - 带有自定义 NSMutableURLRequest 对象的 AFHTTPClient 子类

> ID：13872545
> 
> 赞同：0
> 
> 时间：2012-12-14T04:14:54.173
> 
> 标签：objective-c, ios, afnetworking

我的应用程序`AFNetworking`用于 twitter API 访问，我通过子类化创建了一个 twitter api 客户端`AFHTTPClient`：

```
#import "AFHTTPClient.h"

@interface TwitterAPIClient : AFHTTPClient

+ (TwitterAPIClient *)sharedClient;

@end

#import "TwitterAPIClient.h"
#import "AFJSONRequestOperation.h"

static NSString * const kAFTwitterAPIBaseURLString = @"http://api.twitter.com/1/";

@implementation TwitterAPIClient

+ (TwitterAPIClient *)sharedClient {
    static TwitterAPIClient *_sharedClient = nil;
    static dispatch_once_t TwitterAPIClientToken;
    dispatch_once(&TwitterAPIClientToken, ^{
        _sharedClient = [[TwitterAPIClient alloc] initWithBaseURL:[NSURL URLWithString:kAFTwitterAPIBaseURLString]];
    });

    return _sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];

    return self;
}

@end 
```

如果我`getPath's & postPath's`在 上使用`TwitterAPIClient`，API 客户端会正确返回 JSON 响应，因为我将 a 注册`AFJSONRequestOperation`为操作类。

但是，有时，我需要创建自定义`NSMutableURLRequest`请求而不使用这些`getPath's & postPath's AFHTTPClient`功能。

当我使用这些请求时，从客户端返回的响应是标准的`NSData`，而不是`NSDictionary`我从`AFJSONRequestOperation`.

```
 NSURL *url = [NSURL URLWithString:@"https://api.twitter.com/1.1/account/verify_credentials.json"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [self.auth authorizeRequest:request];

    AFHTTPRequestOperation* apiRequest = [[TwitterAPIClient sharedClient] HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, NSDictionary* responseObject) {
        [self createAccount];

        self.account.username = [responseObject objectForKey:@"screen_name"];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.delegate didProfileLoaded:self.account];
        });

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        if (error!=nil) {
            NSString* errorMessage = nil;
            NSString* errorData = [error.userInfo objectForKey:NSLocalizedRecoverySuggestionErrorKey];

            if (errorData!=nil) {
                NSError* error;
                NSDictionary* json = [NSJSONSerialization JSONObjectWithData:[errorData dataUsingEncoding:NSUTF8StringEncoding] options:kNilOptions error:&error];
                if (json!=nil && error==nil) {
                    NSArray* errorMeta = [json objectForKey:@"errors"];
                    if (errorMeta!=nil) {
                        errorMessage = [[errorMeta objectAtIndex:0] objectForKey:@"message"];
                    }
                } else {
                    errorMessage = errorData;
                }
            }

            dispatch_async(dispatch_get_main_queue(), ^{
                [self.delegate didUpdateFailed:errorMessage];
            });
        }

    }];

    [[TwitterAPIClient sharedClient] enqueueHTTPRequestOperation:apiRequest]; 
```

有没有办法可以强制`AFHTTPRequestOperation`将它们创建为`AFJSONRequestOperation`对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:59:25.473

只需直接创建一个 AFJSONRequestOperation ，如下所示：

```
 AFJSONRequestOperation* apiRequest = [[AFJSONRequestOperation alloc] initWithRequest:request];
[apiRequest setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

// ....

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

// ...

}]; 
```

更多示例[在这里](http://nsscreencast.com/episodes/31-posting-multi-part-forms-with-afnetworking)和[这里](https://stackoverflow.com/questions/15032116/afnetworking-umlauts)。

# sql-server - 通过制造大量独特的约束来减少 Microsoft SQL Server 2012 中的冗余是否过于极端？

> ID：13872549
> 
> 赞同：0
> 
> 时间：2012-12-14T04:15:15.530
> 
> 标签：sql-server, sql-server-2012

我最近的任务是为我们所有的产品制作一个帐户系统，就像微软产品中的 Windows 帐户一样。但是，其中一项要求是我们能够轻松地检查具有相同信息的账户，以便我们能够检测到交易账户、信息的突然和可能的欺诈性变化等。

在考虑解决这个问题的方法时，我认为我们可以在处理数据时减少数据的冗余。我认为它可能会帮助我们节省一些存储空间和处理时间，因为最终我们将只是将数据集处理成我在下面解释的内容。

关于现在如何设置的一些背景知识：

*   一个帐户表只包含一个 id 和一个用户名
*   个人资料表包含对帐户的引用和对不同个人资料数据的引用：姓名、邮寄地址、电子邮件地址
*   姓名表包含个人的 id 和名字、姓氏和中间名
*   地址表包含有关地址的数据
*   电子邮件地址表包含电子邮件地址的 id 以及邮箱和域

个人资料记录是将独特的个人资料数据（在许多帐户之间共享）与特定帐户相关联。如果有五十个人名为“John Smith”，那么在姓名表中只有一条“John Smith”记录。如果用户更改了他们的任何信息，则配置文件记录将被软删除并创建一个新记录。这是为了便于更改跟踪。

在分析之后，我注意到`UNIQUE(FirstName, MiddleName, LastName)`在记录插入方面创建类似的约束是非常痛苦的。这仅仅是我们必须付出的代价还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:15:08.160

我已经完成了我的研究，并决定如果插入性能不重要，这种方法就很好。在关键的情况下，在合理范围内增加数据冗余是可以接受的权衡。

我的问题中描述的解决方案足以满足我的性能需求。在我们的模型中，存储被认为比插入时间更昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T12:29:01.547

拥有关于 2 个名叫 John Smith 的人的记录不是多余的，而是必要的。

您建议的方法远非最佳。“配置文件记录被软删除并创建一个新记录。这是为了便于跟踪更改。” 删除并重新插入会导致其他表中的依赖记录出现问题。有更简单的方法来跟踪更改 - 搜索一些 3rd 方工具

至于创建的表，没有必要将数据拆分到这么多表中。为什么不合并 Name 和 Account 表。地址和电子邮件地址表都需要吗？

# php - 如何匹配相似的词？

> ID：13872553
> 
> 赞同：1
> 
> 时间：2012-12-14T04:15:18.413
> 
> 标签：php, javascript, jquery, database

我有这样的表格=

```
Name 1
First Name  :  <input type='text' name='firstname'>
Middle Name :  <input type='text' name='middlename'>
Last Name   :  <input type='text' name='lastname'>

Name 2
First Name  :  <input type='text' name='firstname2'>
Middle Name :  <input type='text' name='middlename2'>
Last Name   :  <input type='text' name='lastname2'> 
```

当输入“名称 1”和“名称 2”时，我想要这样的结果：

```
`example : <br>
 Name 1 = michael smith <br>
 Name 2 = michael nick smith <br>
 Percentage similar of "Name 1" and "Name 2" is = 80% ` 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:18:59.897

只使用这个[http://www.php.net/manual/en/function.similar-text.php](http://www.php.net/manual/en/function.similar-text.php)这就是你所需要的。

```
$var_1 = 'PHP IS GREAT'; 
$var_2 = 'WITH MYSQL'; 

similar_text($var_1, $var_2, $percent); 

echo $percent; 
// 27.272727272727 
```

您的代码的实时示例[http://codepad.viper-7.com/nyHukz](http://codepad.viper-7.com/nyHukz)

```
$var_1 = 'michael smith'; 
$var_2 = 'michael nick smith'; 

similar_text($var_1, $var_2, $percent); 

echo $percent; 
//83.870967741935 
```

# c# - 如何在 MVC 应用程序中处理长请求

> ID：13872554
> 
> 赞同：2
> 
> 时间：2012-12-14T04:15:40.220
> 
> 标签：c#, .net, asynchronous, asp.net-mvc-4

所以我有一个 MVC 应用程序，管理员可以在其中登录，并上传用户详细信息（名字/姓氏/地址/电话）的 CSV。然后将此 CSV 导入数据库。

这适用于小型 CSV，但不适用于有很多行的 CSV。

我认为异步执行此任务可能会很好，尽管我不想在计划任务中处理它。

此外，我希望能够使用 JavaScript 轮询该过程，以获取有关导入进展情况的消息。例如，10 秒后，“已导入 100000 个订阅者中的 3000 个”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:25:24.520

快速的解决方案是在**单独的线程**中处理它。这将确保该过程对您当前的 Web UI 线程没有任何影响。

另一个解决方案与您提到的[异步控制器有些相似。](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.100%29.aspx)

**解决方案 #2：**查看这篇非常有用的帖子，了解您所要求的确切解决方案 -[需要一个带有用户反馈的 ASP.NET MVC 长时间运行的进程](https://stackoverflow.com/q/2927284/1437962)。

# sql - 如何仅查询 DATE 列的月份和日期？

> ID：13872555
> 
> 赞同：1
> 
> 时间：2012-12-14T04:15:43.730
> 
> 标签：sql, date, casting, informix

我在一个大约 1300 万行的客户表中有一个出生日期 DATE 列。我想查询此表以查找在该月的某个月某日出生但任何年份的所有客户。

我可以通过将日期转换为 char 并对转换进行下标查询来做到这一点，还是应该创建一个附加的 char 列，将其更新为仅保存月份和日期，或者创建三个新的整数列来保存月份、日期和年份，分别？

这将是一个非常常用的查询条件...

**编辑：** ...并且该表有约 1300 万行。

您能否提供一个最佳解决方案的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:23:42.757

根据您执行此操作的频率以及它需要运行的速度，您可能会考虑将日期列拆分为日、月和年列。这将使搜索更快，但当您想要检索整个日期时会导致各种其他问题（以及验证它是否是日期的问题） - 这不是一个好主意。

假设速度不是问题，我会做类似的事情：

```
select *
FROM Table
WHERE Month(*DateOfBirthColumn*) = *SomeMonth* AND DAY(*DateOfBirthColumn*) = *SomeDay* 
```

目前我面前没有informix，但我认为语法是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T04:25:33.303

如果会经常使用，请考虑使用[“功能索引”](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.adref.doc/ids_adr_0325.htm)。在 Informix 11.70 InfoCentre 上搜索该术语会产生许多相关命中。

您可以使用：

```
WHERE MONTH(date_col) = 12 AND DAY(date_col) = 25; 
```

您还可以玩以下游戏：

```
WHERE MONTH(date_col) * 100 + DAY(date_col) = 1225; 
```

这可能更适合功能索引，但对于日常使用来说不是很清楚。您也可以轻松编写存储过程：

请注意，在没有功能索引的情况下，对标准中的列调用函数意味着不太可能使用索引。

```
CREATE FUNCTION mmdd(date_val DATE DEFAULT TODAY) RETURNING SMALLINT AS mmdd;
    RETURN MONTH(date_val) * 100 + DAY(date_val);
END FUNCTION; 
```

并将其用作：

```
WHERE mmdd(date_col) = 1225; 
```

# android - 找不到导入min3d的项目

> ID：13872559
> 
> 赞同：1
> 
> 时间：2012-12-14T04:16:02.107
> 
> 标签：android, min3d

我下载了 min3d min3dSampleProject1_020.apk

我试图将它导入到我的 Eclipse 但 Eclipse 说没有找到要导入的项目

只是为了将我创建到我的本地 C:program 文件中添加一个名为 min3d 的文件夹并放入我下载的内容..，

## 谁能帮我吗..，！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:01:13.537

您不能将 .apk 文件导入 Eclipse，您需要从以下位置下载源代码：

[http://code.google.com/p/min3d/](http://code.google.com/p/min3d/)

然后从 Eclipse 中导入这个项目。

如果您尝试解压缩 .apk 文件，您只会看到资源和 AndroidManifest.xml，但不会看到 src 文件夹。

# asp.net-mvc-3 - flexslider 2 动态添加新图像以在轮播中滑动

> ID：13872560
> 
> 赞同：2
> 
> 时间：2012-12-14T04:16:13.357
> 
> 标签：asp.net-mvc-3, carousel, flexslider

我有一张带有一些图片的幻灯片的页面。我现在需要的是在没有回发的情况下在轮播幻灯片上添加新图像。我的代码是这个

弹性滑块

```
 $(window).load(function() {
$('.flexslider').flexslider({
  animation: "slide",
  controlsContainer: ".flex-container",
  start: function(slider) {
    $('.total-slides').text(slider.count);
  },
  after: function(slider) {
    $('.current-slide').text(slider.currentSlide);
  }
}); 
```

ajax代码

```
 $.ajax({
    url: '@Url.Action("LoadCarrusel","picture",new { @id =  @Model.Propertyid })',
    type: 'GET',
    dataType: 'json',
    success: function (data) {
        var flexslider = document.getElementById("flexslider");
       // process the data coming back
        $.each(data, function (index, item) {

            var link = "../../Content/Uploaded-img/" + item;
            var imag = document.createElement("img");
            imag.setAttribute("src", link);

            var newpicture = document.createElement("li");

            var newpictureItem = document.createTextNode(imag);
            newpicture.appendChild(imag);           
            flexslider.appendChild(newpicture);              

        });
    },

    error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
    }

}); 
```

传递数据json的控制器是

```
 public ActionResult LoadCarrusel(long id)
    {
        var routes = from s in db.Picture
                     where s.IdProp == id
                     select s.Location;

        return Json(routes, JsonRequestBehavior.AllowGet);
    } 
```

# java - 将 ARRAY 传递给存储过程时出现死锁

> ID：13872561
> 
> 赞同：3
> 
> 时间：2012-12-14T04:16:35.390
> 
> 标签：java, database, oracle, stored-procedures, ojdbc

在将 ARRAY 发送到 stord proc 时，我们得到了 java 级别的死锁。我正在附加线程转储。

```
 Found one Java-level deadlock:
    =============================
    "http-bio-8080-exec-11":
      waiting to lock monitor 0x00000000406fb2d8 (object 0x00000000fea1b130, a oracle.jdbc.driver.T4CConnection),
      which is held by "http-bio-8080-exec-4"
    "http-bio-8080-exec-4":
      waiting to lock monitor 0x00000000407d6038 (object 0x00000000fe78b680, a oracle.jdbc.driver.T4CConnection),
      which is held by "http-bio-8080-exec-11"

    Java stack information for the threads listed above:
    ===================================================
    "http-bio-8080-exec-11":
        at oracle.sql.TypeDescriptor.getName(TypeDescriptor.java:682)
        - waiting to lock <0x00000000fea1b130> (a oracle.jdbc.driver.T4CConnection)
        at oracle.jdbc.oracore.OracleTypeCOLLECTION.isInHierarchyOf(OracleTypeCOLLECTION.java:149)
        at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2063)
        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3579)
        at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3685)
        - locked <0x00000000fe78b680> (a oracle.jdbc.driver.T4CConnection)
        at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4714)
        - locked <0x00000000fe78b680> (a oracle.jdbc.driver.T4CConnection)
        at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1376)
        at org.springframework.jdbc.core.JdbcTemplate$6.doInCallableStatement(JdbcTemplate.java:1066)
        at org.springframework.jdbc.core.JdbcTemplate$6.doInCallableStatement(JdbcTemplate.java:1)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1014)
        at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)
        at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144) 
```

如何避免这种死锁。

代码：类扩展`org.springframework.jdbc.object.StoredProcedure`

```
Map result;
                Map hashMap = new HashMap();
                hashMap.put(SOME_IDS_PARAM, getJdbcTemplate().execute(new ConnectionCallback() {
                    @Override
                    public Object doInConnection(Connection con)
                            throws SQLException, DataAccessException {
                        Connection connection = new SimpleNativeJdbcExtractor().getNativeConnection(con);
                        ArrayDescriptor descriptor =   ArrayDescriptor.createDescriptor(schema + ".ARRAY_OF_NUMBER" , connection);
                        return new oracle.sql.ARRAY(descriptor, connection, someIds);
                    }
                }));
                result = super.execute(hashMap); 
```

即使我尝试过这种方法：

```
OracleConnection connection = null;
    DataSource datasource = null;
    Map result;
    try {
        datasource = getJdbcTemplate().getDataSource();
        connection = (OracleConnection) DataSourceUtils.getConnection(datasource);
        synchronized (connection) {
            Map hashMap = new HashMap();
            hashMap.put(SOME_IDS_PARAM, getArrayOfNumberValue(someIds, schema, connection));
            result = super.execute(hashMap);
        }
    } finally {
        if (null != connection) {
            DataSourceUtils.releaseConnection(connection, datasource);
        }
    } 
```

大批 ：

```
public ARRAY getArrayOfNumberValue(Integer[] array, String schema, OracleConnection connection) throws DataAccessResourceFailureException {
        String arrayOfNumberTypeName = schema + ARRAY_OF_NUMBER;
        ARRAY oracleArray = null;
        ArrayDescriptor descriptor = null;
        try {

            descriptor = (ArrayDescriptor) connection.getDescriptor(arrayOfNumberTypeName);
            if (null == descriptor) {
                descriptor = new ArrayDescriptor(arrayOfNumberTypeName, connection);
                connection.putDescriptor(arrayOfNumberTypeName, descriptor);
            }
            oracleArray = new ARRAY(descriptor, connection, array);

        } catch (SQLException ex) {
            throw new DataAccessResourceFailureException("SQLException " + "encountered while attempting to retrieve Oracle ARRAY", ex);
        }

        return oracleArray;
    } 
```

我怀疑，当我从“connection = (OracleConnection) DataSourceUtils.getConnection(datasource);”检查连接时。它将为您提供逻辑连接，但它的底层将使用“T4Connection”，但它正在释放它。并再次寻找相同的连接。

```
 java.lang.Thread.State: BLOCKED (on object monitor)
    at oracle.sql.TypeDescriptor.getName(TypeDescriptor.java:682)
    - waiting to lock <0x00000000c1356fc8> (a oracle.jdbc.driver.T4CConnection)
    at oracle.jdbc.oracore.OracleTypeCOLLECTION.isInHierarchyOf(OracleTypeCOLLECTION.java:149)
    at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2063)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3579)
    at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3685)
    - locked <0x00000000c14b34f0> (a oracle.jdbc.driver.T4CConnection)
    at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4714)
    - locked <0x00000000c14b34f0> (a oracle.jdbc.driver.T4CConnection)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1376)
    at org.springframework.jdbc.core.JdbcTemplate$6.doInCallableStatement(JdbcTemplate.java:1066)
    at org.springframework.jdbc.core.JdbcTemplate$6.doInCallableStatement(JdbcTemplate.java:1)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1014)
    at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)
    at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)
    at com.intuit.platform.integration.sdx.da.procedures.subscription.serviceSubscription.LookupRealmSubscriptions.execute(LookupRealmSubscriptions.java:55)
    - locked <0x00000000fbd00bc0> (a oracle.jdbc.driver.LogicalConnection)
    at com.intuit.platform.integration.sdx.da.ServiceSubscriptionDAOImpl.getRealmServiceSubscriptions(ServiceSubscriptionDAOImpl.java:153)
    at com.intuit.platform.integration.sdx.ws.beans.ServiceSubscriptionResourceBean.filterRealmIds(ServiceSubscriptionResourceBean.java:84) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:53:20.163

ARRAY 中的连接与执行存储过程的连接不同。您可以看到这一点，因为正在等待锁定的 T4CConnection（堆栈跟踪的第 3 行）与之前锁定的 IF 不同。

使用[如何在 Spring JDBC 中获取当前连接对象中](https://stackoverflow.com/questions/8428235/how-to-get-current-connection-in-spring-jdbc)的答案来获取当前连接，然后使用[https://stackoverflow.com/a/7879073/1395668](https://stackoverflow.com/a/7879073/1395668)将其向下转换为 Oracle 连接。然后，您应该能够创建对当前连接有效的 ARRAY，并且您不应该遇到死锁。

# nsstring - 将 url 更改为 nsstring

> ID：13872564
> 
> 赞同：0
> 
> 时间：2012-12-14T04:16:44.063
> 
> 标签：nsstring, mfmessagecomposeview

我正在尝试从我的应用程序内部将一部电影放入短信的正文中。我正在使用 MFMessageComposeViewController 来调出消息视图。我可以将文本放入正文，但我想放入电影。就像 Apple 在照片库中选择电影时所做的那样。我有电影的路径和名称，我只需要将 url 转换为字符串，这样我就可以使用 body = 了。这是我的代码

```
NSString *audioName = [pictureDictionary2 objectForKey:@"photoVideokey"];
    NSArray *pathsa = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectorya = [pathsa objectAtIndex:0];
    //Get a full path to the image in the documents directory.
    NSString *fullPatha = [documentsDirectorya stringByAppendingPathComponent:audioName];
    self.sharingImage = [NSURL fileURLWithPath:fullPatha];
    NSURL *url1 = [NSURL fileURLWithPath:fullPatha];
    NSData *videoData = [[NSData alloc] initWithContentsOfURL:url1];

//I know this isn't right and I have tried several things but can't seem to solve it.
    NSString* theString = [NSURL fileURLWithPath:fullPatha];

    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = theString;

        controller.messageComposeDelegate = self;
        if (controller) [self presentViewController:controller animated:YES completion:NULL];
    } 
```

感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:47:32.160

我认为您不能这样做，因为我认为 Apple 并未授予自定义应用程序向 messagecomposer 添加数据的此类权限，但您可以使用 mailcomposer 执行此操作。

# android - 邮件发送成功后如何从 SD 卡中删除文件？

> ID：13872569
> 
> 赞同：0
> 
> 时间：2012-12-14T04:17:20.577
> 
> 标签：android, android-intent

我想在邮件成功发送到 Receiver 后从 SD 卡中删除文件。如何执行此操作？我在 SO 和 Google 上发现了很多内容。我也试过了。我的代码如下：

```
if(myFile.exists())
    myFile.delete(); 
```

使用上面的代码，我删除了存储在 SD 卡中的文件，然后将其发送到接收方。请有人帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:27:27.237

您在 收到邮件发送状态，所以从..`onActivityResult`开始意图`startActivityForResult`

这是示例代码..

**发邮件：**

```
int EMAIL = 101;

Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/html");

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{});
emailIntent.putExtra(android.content.Intent.EXTRA_BCC,new String[]{});
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, pngUri);
startActivityForResult(emailIntent,EMAIL); 
```

**发送结果：**

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        // TODO Auto-generated method stub
        if(requestCode==EMAIL)
        {
            if(requestCode==EMAIL && resultCode==Activity.RESULT_OK)    
            {
                            if(myFile.exists())
                                myFile.delete();  
                Toast.makeText(mActivity, "Mail sent.", Toast.LENGTH_SHORT).show();
            }
            else if (requestCode==EMAIL && resultCode==Activity.RESULT_CANCELED)
            {
                Toast.makeText(mActivity, "Mail canceled.", Toast.LENGTH_SHORT).show();
            }
            else 
            {
                Toast.makeText(mActivity, "Please try again.", Toast.LENGTH_SHORT).show();
            }
        }   
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T07:33:53.503

当您根据活动生命周期打开电子邮箱时，您当前的活动在 onPause() 上移动，当您返回活动时，将调用 On Resume 方法，因此在您的 on Resume 方法上编写打击代码。

受保护的无效 onResume() {

```
 File file= new File(filepath);
    if(file.exists())
    {
         file.delete();
    }
    super.onResume();
} 
```

这里的文件路径是外部存储的路径或者你保存文件的位置，你想删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:26:57.063

```
 file.deleteOnExit(); 
```

当活动关闭时，它将删除您的文件。[检查这个](https://stackoverflow.com/a/4609566/646806)

或者

使用Alarmmanager 并设置一个时间在适当的时间后删除您的文件，可以说在一小时或半小时后。

# ruby-on-rails - 为什么在 Rails 中使用状态 410 时浏览器不重定向？

> ID：13872573
> 
> 赞同：0
> 
> 时间：2012-12-14T04:18:26.627
> 
> 标签：ruby-on-rails, http

我的一些产品已从我的商店中删除。

我认为对所有这些可能仍然从搜索引擎链接获得流量的产品这样做是很自然的：

```
redirect_to :root, :status => 410 
```

奇怪的是，rails 似乎发回了 You are being redirected 正文，而不是实际的重定向。

然而

```
redirect_to :root 
```

按预期工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:21:17.827

`410`是客户端错误响应（资源消失），而不是重定向响应。

只有[`3xx`状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)是重定向。

# python - 如何将 R LDA 主题模型导入主题模型可视化引擎（TMVE）？

> ID：13872577
> 
> 赞同：0
> 
> 时间：2012-12-14T04:18:36.680
> 
> 标签：python, browser, lda, topic-modeling

在 Python 中构建主题模型和主题浏览器的好框架是什么？

```
documents --> topic model --> topic browser 
```

[主题模型可视化引擎](http://code.google.com/p/tmve/)(TMVE) 可能会将潜在狄利克雷分配的结果通过管道传输到网站中。我已经学会在 R 中使用 topicmodel 库，但我不知道如何将它导入 TMVE。

* * *

主要是，我正在寻找使用 Python 或 R 的解决方案。我可能只是尝试从 R 输出构建我自己的（非常糟糕的）主题浏览器。

看起来这是一两年前的热门研究课题。[David Blei 页面](http://www.cs.princeton.edu/~blei/topicmodeling.html)上的资源似乎已经过时了。

[TMVE](https://github.com/jseabold/tmve)好像在 gitHub 上，最后一次编辑是一年前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:38:28.503

您也可以考虑主题指南。这是一个过时的网页： [https](https://facwiki.cs.byu.edu/nlp/index.php/Topical_Guide) ://facwiki.cs.byu.edu/nlp/index.php/Topical_Guide 该项目现在托管在 GitHub 上。

# r - 在 R 上使用 cairo_pdf() 时出错

> ID：13872580
> 
> 赞同：1
> 
> 时间：2012-12-14T04:18:57.783
> 
> 标签：r, runtime-error, redhat

> **可能重复：**
> [在 ubuntu 上的 R 中使用 cairo 设备时出错](https://stackoverflow.com/questions/13793763/error-while-using-cairo-devices-in-r-on-ubuntu)

我在使用 cairo_pdf() 时收到错误消息。

> cairo_pdf("sample.pdf")

```
Warning messages:
1: In cairo_pdf("sample.pdf") :
  unable to load shared object '/usr/local/lib64/R/library/grDevices/libs//cairo.so':
  /usr/local/lib64/R/library/grDevices/libs//cairo.so: undefined symbol: png_set_longjmp_fn
2: In cairo_pdf("sample.pdf") : failed to load cairo DLL

OS : RHEL6

R : 2.15 
```

如何修复此错误？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T04:59:27.817

你是从你的发行版 repo 安装包还是从源代码构建它？在我看来，RHEL 存储库中的包编译时没有 option `--with-cairo`。尝试从[源代码](http://cran.r-project.org/src/base/R-2/R-2.15.2.tar.gz)构建包（tarball，~23 MB）。

# selenium - 如何在 Selenium + TestNG 中运行并行测试用例

> ID：13872582
> 
> 赞同：0
> 
> 时间：2012-12-14T04:19:12.937
> 
> 标签：selenium, grid, webdriver, selenium-rc, testng

我有一个测试脚本如下，我需要知道的是如何让它在不同的浏览器中同时运行，但测试数据不同，

我想要的正是我想要 Firefox 中的测试用例一和 Internet Explorer 中的其他测试用例的并行实例，但我想再次为它使用不同的数据

例如：-带有“username1”和“password1”的Firefox

-Internet Explorer 'username2' 和 'password2'

这就像在不同的浏览器中使用不同的用户名和密码登录GMAIL，但不是按顺序登录。

***测试用例 ：***

```
public class Gmail 
{
    private WebDriver driver;

    @BeforeClass
    public void setup()
    {
        driver = new FirefoxDriver();
        driver.get("http://www.gmail.com");
    }

    @Test
    public void search()
    {
        WebElement element = driver.findElement(By.name("username"));
        element.sendKeys("username");
        WebElement element2 = driver.findElement(By.name("pass"));
        element2.sendKeys("password");
        element2.submit();
    }

    @Test
    public void compose()
    {
        driver.findElement(By.name("compose")).click();
    }

    @AfterClass
    public void exit()
    {
        driver.quit();
    }
} 
```

请给出您的建议将对我的项目有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:23:38.677

执行此操作的步骤：

1.  在 testNG.xml 中将所需的值作为参数传递 - 在您的情况下，您需要浏览器名称、用户名和密码。

2.  在 testNG.xml 中使用不同的用户名和密码参数创建 2 个单独的“测试”标签

    ```
     <test name="Test on FF">
        <parameter name="browserName" value="Firefox" />
        <parameter name="userName" value="user1" />
        <parameter name="password" value="pass1" />
       <classes>
          <class>name="Gmail"</class>
         </classes>
       </test>
       <test name="Test on IE">
        <parameter name="browserName" value="IE" />
        <parameter name="userName" value="user2" />
        <parameter name="password" value="pass2" />
         <classes>
          <class>name="Gmail"</class>
         </classes>
       </test> 
    ```

3.  将“套件”标签定义为`<suite thread-count="2" name="Suite" parallel="tests">`

4.  `@Parameters ({"browserName","userName","password"})`通过和实例化相应的驱动程序访问和使用 @Test 方法中的那些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:49:45.263

如果您有大量数据，则可以将其外部化。将其移至 excel、yaml 或您喜欢的任何格式。将其用作 @DataProvider 方法的输入。在@DataProvider 中，从您选择的格式中读取所有值并返回。在您的 testmethods 中指定 dataprovider 方法。[在此处](http://testng.org/doc/documentation-main.html#parameters-dataproviders)阅读有关数据提供者的更多信息。在参数值中给出 excel 表。您可以通过将并行设置为 true 来并行运行数据提供程序。确保您的驱动程序实例是 Threadlocal 值或为每种方法实例化，否则并行运行可能会导致失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T03:22:43.650

[我在http://www.ufthelp.com/2014/12/Parallel-execution-tests-in-testNG-eclipse.html](http://www.ufthelp.com/2014/12/Parallel-execution-tests-in-testNG-eclipse.html)上找到了带有工作代码的解决方案

**XML 文件**看起来像这样

```
<suite name="Suite" parallel="tests" thread-count="2">
 <test name="Run in Firefox">
  <parameter name="browser" value="firefox"></parameter>
  <parameter name="userName" value="Test1"></parameter>
  <parameter name="Password" value="Pwd1"></parameter>
  <classes>
   <class name="srcTest.ParallelTesting"/>
  </classes>
 </test>
 <test name="Run in chrome">
  <parameter name="browser" value="chrome"></parameter>
  <parameter name="userName" value="Test2"></parameter>
  <parameter name="Password" value="Pwd2"></parameter>
  <classes>
   <class name="srcTest.ParallelTesting"/>
  </classes>
 </test>
</suite> 
```

**Java 代码：** -

```
 @Test
 @Parameters({"userName","Password"})
 public void login(String userName,String Password){

   --Your Code--
 }

 @BeforeClass<br/>
 @Parameters({"browser"})
 public void BeforeClass(String browser) throws Exception {

  --Your code--

} 
```

# c++ - 宏：如何更改 __VA_ARGS__ 中的每个值

> ID：13872586
> 
> 赞同：0
> 
> 时间：2012-12-14T04:19:52.230
> 
> 标签：c++, c, macros, c++builder-xe2

我正在使用 C++ Builder XE3。

目前我有如下宏：

```
#define LOGG(message, ...) OTHER_LIB_LOG(message,__VA_ARGS__) 
```

现在我想让所有参数都是 AnsiString。我很容易处理这个论点：消息如下：

```
#define LOGG(message, ...) OTHER_LIB_LOG(AnsiString(message),__VA_ARGS__) 
```

但是对于**VA_ARGS**，我不知道如何处理参数以确保放入的所有参数`OTHER_LIB_LOG`都是 AnsiString。

修改源代码对我来说很难 `OTHER_LIB_LOG`，所以我必须使用宏来完成。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:35:56.397

C 宏不递归。所以你将*不得不*做一些*手工*工作。
找出 LOGG 将采用和使用的最大参数数，如下所示：我的示例最多采用 6 个参数。

```
#define ENCODE0(x) AnsiString(x)
#define ENCODE1(x,...) AnsiString(x), ENCODE0(__VA_ARGS__)
#define ENCODE2(x,...) AnsiString(x), ENCODE1(__VA_ARGS__)
#define ENCODE3(x,...) AnsiString(x), ENCODE2(__VA_ARGS__)
#define ENCODE4(x,...) AnsiString(x), ENCODE3(__VA_ARGS__)
#define ENCODE5(x,...) AnsiString(x), ENCODE4(__VA_ARGS__)
#define ENCODE6(x,...) AnsiString(x), ENCODE5(__VA_ARGS__)
//Add more pairs if required. 6 is the upper limit in this case.
#define ENCODE(i,...) ENCODE##i(__VA_ARGS__) //i is the number of arguments (max 6 in this case)

#define LOGG(count,...) OTHER_LIB_LOG(ENCODE(count,__VA_ARGS__)) 
```

样品用法：`LOGG(5,"Hello","Hi","Namaste _/\_","Hola!","bonjour");`

# c# - 当客户端和主机都在 VPN 中时，如何获取实际客户端的 IP？

> ID：13872587
> 
> 赞同：1
> 
> 时间：2012-12-14T04:19:57.737
> 
> 标签：c#, asp.net, ip-address, vpn

我有一个 Intranet 网站，每个人都必须使用 VPN 才能访问该网站。因此，在记录客户端的 IP 时，我只是获取他们的 VPN IP（所有人都相同）。

我怎样才能得到他们的实际 IP 地址？就像[这个例子](http://www.whatismyip.com/)一样。

我阅读了几个问题/答案，但似乎没有针对这种特定情况的解决方案。如果请求是通过代理来的，他们有解决方案，但对于 VPN 则没有......

有没有人经历过这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:19:05.017

在我看来，您唯一可以获得的是内部 IP 地址。如果您在同一个 VPN 上，则共享相同的公共 IP（假设只有一个 VPN 服务器）

# php - 检查 PHP 中多个数组索引的值

> ID：13872588
> 
> 赞同：4
> 
> 时间：2012-12-14T04:20:18.097
> 
> 标签：php, arrays

我想检查一组图像文件名，看看有多少连续图像使用 PHP 具有相同的方向。

在下面的示例中，我想知道索引 1 到 4 具有相同的方向，或者在第一个索引处有四个具有相同方向的连续图像。

作为参考，“方向”值是垂直的“V”和水平的“H”。

例如，

```
Array
(
[0] => Array
    (
        [filename] => image0.jpg
        [orientation] => V
    )

[1] => Array
    (
        [filename] => image1.jpg
        [orientation] => H
    )

[2] => Array
    (
        [filename] => image2.jpg
        [orientation] => H
    )

[3] => Array
    (
        [filename] => image3.jpg
        [orientation] => H
    )

[4] => Array
    (
        [filename] => image4.jpg
        [orientation] => H
    )
[5] => Array
    (
        [filename] => image5.jpg
        [orientation] => V
    )
[...]
[n]
} 
```

必须有比这更好的方法

```
if ([i]['orientation'] == [i+1]['orientation'])
if ([i]['orientation'] == [i+1]['orientation'] == [i+2]['orientation'])
if ([i]['orientation'] == [i+1]['orientation'] == [i+2]['orientation']  == [i+3]['orientation'])
if ([i]['orientation'] == [i+1]['orientation'] == [i+2]['orientation'] == [i+3]['orientation'] == [i+4]['orientation']) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T09:43:46.627

如果我理解您尝试应用的逻辑，SplQueue 将提供所有功能，以彻底和整洁的 OOP 方式解决您的问题。

我写了这个，根据您提供的用例，它对我来说很好。

```
// your data array
$array = array(
    array("filename"=>"image0.jpg","orientation"=>"V"),
    array("filename"=>"image1.jpg","orientation"=>"H"),
    array("filename"=>"image2.jpg","orientation"=>"H"),
    array("filename"=>"image3.jpg","orientation"=>"H"),
    array("filename"=>"image4.jpg","orientation"=>"H"));

function queue($array) {

    // grab a new SqlQueue object -- http://php.net/manual/en/class.splqueue.php    
    $q = new SplQueue;
    foreach($array as $key=>$val) {
        // if this is the first iteration or the queue object was emptied out
        if ($q->isEmpty()) {
            $q->enqueue($val);
        } else {

            if ($val['orientation'] == $array[$key--]['orientation']) {
                $q->enqueue($val);
                if (($q->count() % 4) == 0) {
                    return $q;
                }
            } else {
                // Dequeue the whole group on interrupt
                while ($q->valid()) {
                   $q->dequeue();
                }
                // ... and start filling the queue, the mismatch as the new pattern
                $q->enqueue($val);
            }
        }
    }
}

$q = queue($array);
echo $q->count(); 
```

数据属性`enqueued()`集是私有的，因此您必须在课堂上使其可见。

如果您使用的是 PHP 5.4+，则可以将递减的数组索引调用替换为函数数组解引用，如下所示：

```
 if ($val['orientation'] == prev($array[$key])['orientation'] {
    //... 
```

其他一切都很标准。模数测试在连续获得 4 个匹配项后立即返回队列对象，因为 SplQueue 对象强制执行排序索引 FIFO，并且不能取消排序。最后，如果队列之前的匹配中断连续有 4 个匹配项，Spl 的迭代器会清空队列以重新开始 - 从不匹配开始（第一个新模式。）

那应该涵盖所有内容...

HTH :)

# javascript - 如何在 javascript 中创建 cookie 并在 mvc3 的控制器中使用

> ID：13872590
> 
> 赞同：0
> 
> 时间：2012-12-14T04:20:40.847
> 
> 标签：javascript, asp.net, asp.net-mvc, mvcextensions

其实我有这样的要求：

我需要使用Javascript获取检查记录的ID并将ID存储在cookie中并在控制器中访问该cookie并根据该ID删除记录

我的 Javascript 是：

```
<script type="text/javascript">
    //<![CDATA[

    function SelectionChanged(s, e)
    {

        s.GetSelectedFieldValues("ID", GetSelectedFieldValuesCallback);
    }
    function GetSelectedFieldValuesCallback(values)
    {
        SelectedRows.BeginUpdate();
        try
        {
            SelectedRows.ClearItems();
            var s = '';
            for (var i = 0; i < values.length; i++) {
                //SelectedRows.AddItem(values[i]);
                s=s+values[i]+',';

            }
        }
        finally
        {
            document.cookie = s;
        }
        $("#count").html(gvRowSelection.GetSelectedRowCount());

    }
    // ]]> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T04:29:36.700

我不确定您的问题具体是什么，但如果您正在寻找一种通过 Javascript 设置 cookie 的方法，请查看[jquery-cookie 插件](https://github.com/carhartl/jquery-cookie)。您可以像访问任何其他 cookie 一样在控制器中访问它：

**Javascript**

```
$.cookie('mycookie', 'myvalue'); 
```

**C＃**

```
Request.Cookies["mycookie"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:30:56.563

I think Scott was rigth except that you need to Base64 decode the data then JSON decode the data.

**JavaScript**

```
$.jCookies({name:'user',value:{name:'brian',level:'awesome'}}); 
```

**C#**

```
Convert.FromBase64String(Page.Request.Cookies["user"].Value) 
```

For more information look at the following Page: [Here](http://tympanus.net/codrops/2011/09/04/j-is-for-jcookies-http-cookie-handling-for-jquery/)

# mysql - 在mysql中自动运行查询

> ID：13872598
> 
> 赞同：10
> 
> 时间：2012-12-14T04:21:25.867
> 
> 标签：mysql, automation, mysql-event

是否可以创建一个每晚 11 点运行的存储过程，如果最近六个月修改了任何记录，请检查表，如果最近六个月修改了某些记录，我必须从表中删除它。这必须在不使用任何外部语言的情况下自动运行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T04:40:37.363

```
CREATE EVENT IF NOT EXISTS `my_old_data_cleaner_event`
ON SCHEDULE EVERY 23 DAY_HOUR
COMMENT 'Clean up Service Start at 11:00PM daily!'
DO DELETE FROM my_table WHERE created_date < (NOW() - INTERVAL 1 MONTH); 
```

或存储过程。

```
CREATE EVENT IF NOT EXISTS `my_old_data_cleaner_event`
ON SCHEDULE EVERY 23 DAY_HOUR
DO CALL my_sp_cleanup_old_data(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T04:25:33.777

你可以用mysql事件调度器来实现——

[http://dev.mysql.com/doc/refman/5.1/en/events.html](http://dev.mysql.com/doc/refman/5.1/en/events.html)

详细博客：http: [//goo.gl/6Hzjvg](http://goo.gl/6Hzjvg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:43:27.167

创建如下事件

```
CREATE EVENT e_daily
  ON SCHEDULE
    EVERY 1 DAY
 DO
   BEGIN
     DELETE FROM tableA WHERE DATE(`yourtimestamp`) <(CURDATE() - INTERVAL 6 MONTHS);
  END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T04:45:05.210

您还可以编写一个脚本来处理您在 Python、Perl、PHP 等中的数据。

之后，只需使用设置 cron 条目`crontab -e`并添加以下行：

```
0 23 * * * /path/to/my/script.pl 2>&1 >/dev/null 
```

如果您不指定`2>&1 >/dev/null`，您将收到包含执行结果的电子邮件。

# php - PHP If 语句值存在

> ID：13872600
> 
> 赞同：0
> 
> 时间：2012-12-14T04:21:40.133
> 
> 标签：php, variables, echo, if-statement

如果一个变量中有一个值并且如果它没有值，它不会回显任何东西，你将如何做出一个 if 语句来回显。我知道如果没有值，你会使用 else，我知道如何制作 if 语句，但我不知道如何使用它来确定一个值是否存在。像

```
if($additional == ' '){}
else{echo 'Additional information:', $additional;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:22:40.020

我假设您正在尝试以不会产生通知或警告的方式执行此操作？正如其他人指出的那样，空变量将导致没有输出，但是如果根本没有定义它，则会产生错误，这是您不应该做的。

```
echo $value ?: ''; 
```

应该这样做

编辑：注意这是 PHP 5.4 语法。较旧的 PHP 版本使用

```
echo isset($value) ? $value : ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:27:33.727

```
If (isset($variable)){
Echo $variable;
} 
```

请检查 PHP 文档中的 isset 和 echo

您要求一个 if 语句将触发回显，上面将执行此操作

编辑：您正在检查变量是否为空？然后这也可以使用

```
If (empty($variable)){
Echo "variable is empty";
}
Else
{
Echo "variable is not empty'";
} 
```

您可以实施的两种解决方案，都可以按您的需要工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T04:36:37.720

```
if(!empty($variable)){
      echo $varibale     // if the condition check its not empty it will output it
}
else{
     // do nothing      - while when your variable has no value it will do nothing in else
} 
```

***但是，即使您不输入 else 也不会输出任何内容，因为您的条件表明如果该变量有值，您应该回显该变量......***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T05:27:20.590

试试这个代码：

```
if(isset($additional))
       echo "Additional information: ".$additional;
else
       echo "Empty"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T04:27:00.503

回显一个空白变量和什么都不回显几乎是一回事。在这种情况下，你真的只需要：

```
echo $value; 
```

# php - 我如何在 php 中使用 '\'

> ID：13872602
> 
> 赞同：-1
> 
> 时间：2012-12-14T04:21:46.620
> 
> 标签：php, string, str-replace

任何人都知道我可以如何使用

```
$utf8string = str_replace('\',"&#92;",$utf8string); 
```

在 PHP 中？因为我不能在 \ 之后使用 ' 并且它给我一个错误
，如果我写

```
$utf8string = str_replace('\ ',"&#92;",$utf8string); 
```

它不做我想做的
事

```
$utf8string = str_replace("\","&#92;",$utf8string); 
```

也不能工作
所以我必须做什么？
我想更新 mysql 但如果我的文本结尾有 \ 它不起作用并给我一个
像这个查询这样 的错误

```
update phpfox_comment_text set text_parsed = 'nakheir\',text = '' where comment_id = 197597 
```

我想更新 400.000 个查询，但我必须将 \ 替换为 \ 因为我总是收到此错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T04:22:42.423

尝试使用`\\`而不仅仅是`\`.

A`\`在字符串中具有特殊含义，因为它用于转义。要表示文字`\`，您需要逃避它！在它前面加上 a, well `\`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:22:48.367

`\`与另一个逃脱`\`。

```
$utf8string = str_replace("\\","&#92;",$utf8string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T04:22:58.023

```
$utf8string = str_replace('\\',"&#92;",$utf8string); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T04:23:03.267

“\”是一个“元字符。

如果你愿意，你可以使用`"\\"`.

# django - 迭代访问和设置模型字段

> ID：13872604
> 
> 赞同：2
> 
> 时间：2012-12-14T04:21:51.483
> 
> 标签：django, django-models

我正在尝试通过 POST 调用迭代地设置模型中的各个字段，而无需编写一堆单独的 set 和 get 方法。不幸的是，我概念化的唯一方法看起来非常老套，我什至无法让它发挥作用。我觉得我正在做一些艰难的事情或与语言的设计作斗争，并希望有人能指出我正确的方向：

### 我的修改功能

```
def modify(request, specification_id):
    spec = get_object_or_404(Specification, pk=specification_id)
    user = request.user
    try:
        for key, value in request.POST.iteritems():
            if spec._get_FIELD_display(spec._meta.get_field_by_name(key)[0]) != value:
                #This would be where the setter would go if I could figure out how to make it work 
```

```
class Specification(models.Model):
    text = models.TextField(max_length=40000)
    last_modified = models.DateTimeField('Date Last Modified') 
```

# android - 从其他片段返回时，片段中的 Viewpager 不显示（恢复）

> ID：13872612
> 
> 赞同：13
> 
> 时间：2012-12-14T04:22:57.140
> 
> 标签：android, android-fragments, android-viewpager

我面临以下问题：在主屏幕中，我有 3 个按钮：配置、主要、设置。

*   单击每个按钮时，将显示相应的片段以在 FrameLayout 中膨胀布局。
*   当用户处于 Config 或 Setting Fragment 时，可以使用 onBackpressed 或单击 Main 按钮返回主 Fragment。当用户在主片段中时，如果用户单击返回，则会显示一个弹出窗口以确认退出。

在主片段中，我放了一个查看器。在这个 viewpager 中，我放了另外 2 个片段，每个片段都包含一个图像网格（我还使用了一个圆形指示器来查看底部的页面变化）。为简单起见，Config Fragment 和 Setting Fragment 仅在中心显示一个文本。当应用程序启动时，在正常显示主要片段，当我点击按钮设置或配置时，它正常显示相应的片段。问题是当单击后退按钮（在 Android 上）时，它会返回到主片段，但在 viewpager 中没有片段。它显示空屏幕。

![显示了 viewpager 中的主要片段 - 片段 1](../Images/223651a87451017327b86044b5badd02.png) ![主要片段 - 显示 viewpager 中的片段 2](../Images/1b525f3a3c86311c5bd236e0d8ae9400.png) ![配置片段](../Images/9817da772c26583421813fb0a8a9b52f.png) ![设置片段](../Images/739b2c71b5899855509025520f30f780.png) ![从配置/设置片段返回主片段](../Images/619dd5cbe7498959219e438fa8bbf1a7.png)

当进程从配置/设置片段返回到主片段时，也许我错了。如果主片段只是在没有 viewpager 的情况下膨胀某个布局，则不会发生此问题。从配置/设置片段返回主片段时如何恢复viewpager的状态？我附上我的代码，以便您可以给我更明确的答案。非常感谢您的任何回答。

```
package com.example.testfragmentviewpager;

import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.Button;
import android.widget.FrameLayout;

import com.example.viewpageindicator.CirclePageIndicator;
import com.example.viewpageindicator.PageIndicator;

public class MainActivity extends FragmentActivity {

    Fragment configFragment;
    Fragment settingFragment;
    Fragment mainItemsFragment;
    FrameLayout frmLayout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.main);

        if (savedInstanceState == null) {
            FragmentManager fm = getSupportFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();
            frmLayout = (FrameLayout) findViewById(R.id.frame_cotainer);
            mainItemsFragment = new MainItemsFragment();
            ft.add(R.id.frame_cotainer, mainItemsFragment, "mainItems").commit();
        }

        addListener(R.id.btnConfig);
        addListener(R.id.btnMain);
        addListener(R.id.btnSetting);

    }

    public void addListener(int buttonID) {
        final Button btn = (Button) findViewById(buttonID);
        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                showFragment(btn);
            }
        });
    }

    public void showFragment(View v) {
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        switch (v.getId()) {
            case R.id.btnConfig:
                if (configFragment == null) {
                    configFragment = new ConfigListFragment();
                }
                else if (configFragment.isVisible())
                    return;
                if (getCurrentEntriesInBackStack() == 0) {
                    ft.addToBackStack("mainItems");
                }
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                ft.replace(R.id.frame_cotainer, configFragment, "config");

                break;
            case R.id.btnMain:
                if (mainItemsFragment == null)
                    mainItemsFragment = new MainItemsFragment();
                if (getCurrentEntriesInBackStack() == 0)
                    return;
                else {
                    if (configFragment != null && configFragment.isVisible()) {
                        ft.detach(configFragment);
                        configFragment = null;
                    }
                    if (settingFragment != null && settingFragment.isVisible()) {
                        ft.detach(settingFragment);
                        settingFragment = null;
                    }
                    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                    removeFromContainer(ft);
                    callPopBackStack();
                    return;
                }
            case R.id.btnSetting:
                if (settingFragment == null)
                    settingFragment = new SettingFragment();
                else if (settingFragment.isVisible())
                    return;
                if (getCurrentEntriesInBackStack() == 0) {
                    ft.addToBackStack("mainItems");
                }
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                ft.replace(R.id.frame_cotainer, settingFragment, "setting");
                break;
            default:
                break;
        }

        ft.commit();
    }

    private int getCurrentEntriesInBackStack() {
        FragmentManager fm = getSupportFragmentManager();
        return fm.getBackStackEntryCount();
    }

    private boolean callPopBackStack() {
        FragmentManager fm = getSupportFragmentManager();

        boolean result = fm.popBackStackImmediate();
        return result;
    }

    private void removeFromContainer(FragmentTransaction ft) {
        if (configFragment != null && configFragment.isVisible()) {
            ft.detach(configFragment);
            configFragment = null;
        }
        if (settingFragment != null && settingFragment.isVisible()) {
            ft.detach(settingFragment);
            settingFragment = null;
        }
        ft.commit();
    }

    public static class ConfigListFragment extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.layout_config, container, false);
            return v;
        }
    }

    public static class SettingFragment extends Fragment {
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.layout_setting, container, false);
            return v;
        }

    }

    public static class MainItemsFragment extends Fragment {

        private MyPagerAdapter adapter;
        private ViewPager viewpager;
        private PageIndicator mIndicator;
        View rootView;

        private class setAdapterTask extends AsyncTask<Void, Void, Void> {
            protected Void doInBackground(Void... params) {
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                viewpager.setAdapter(adapter);
                mIndicator = (CirclePageIndicator) rootView.findViewById(R.id.indicator);
                mIndicator.setViewPager(viewpager);

                viewpager.setCurrentItem(0);

            }
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            rootView = inflater.inflate(R.layout.mainscreen_layout, container, false);

            adapter = new MyPagerAdapter(getFragmentManager());
            viewpager = (ViewPager) rootView.findViewById(R.id.myviewpager);
            new setAdapterTask().execute();
            return rootView;
        }

    }

    public static class MyPagerAdapter extends FragmentPagerAdapter {

        public MyPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int index) {
            if (index == 0) {
                return new MainFragment1();
            }
            else {
                return new MainFragment2();
            }
        }

        @Override
        public int getCount() {
            return 2;
        }
    }

    @Override
    public void onBackPressed() {

        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        removeFromContainer(ft);
        if (fm.popBackStackImmediate()) {
            return;
        }

        else {

            AlertDialog.Builder dlg = new AlertDialog.Builder(MainActivity.this);
            dlg.setTitle("Confirm Exit");
            dlg.setMessage("Do you want to exit?").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    MainActivity.this.finish();
                }

            }).setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

            AlertDialog alertDlg = dlg.create();
            alertDlg.show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-15T02:01:53.353

看起来您正在使用其中一种旧技巧来嵌入片段。我建议您首先升级到最新的 Android 支持库，即。发布 11 。然后看看如何使用 Child FragmentManager [http://developer.android.com/reference/android/support/v4/app/Fragment.html#getChildFragmentManager()](http://developer.android.com/reference/android/support/v4/app/Fragment.html#getChildFragmentManager())

我在 github 上有一个关于如何使用 viewpager 嵌套片段的示例。
[https://github.com/marsucsb/nested-fragments](https://github.com/marsucsb/nested-fragments)

# node.js - Socket.IO -- ReferenceError: io is not defined, used to work on another website

> ID：13872614
> 
> 赞同：0
> 
> 时间：2012-12-14T04:23:00.503
> 
> 标签：node.js, socket.io

我一直使用下面的代码来执行此操作，在另一个网站上它运行良好，但现在不是。

**服务器.js**

```
var io = require('socket.io').listen(8080);

var users = {};
console.log("Sever is now running");

io.sockets.on('connection', function (socket) { 
    console.log("connection");
    socket.emit('connected');

}); 
```

服务器似乎很好，我想。无论如何，它都会显示 console.log 消息。虽然第二个 console.log 没有出现，但我只是认为这是因为错误或其他原因。

**数据.js**

```
var socket = io.connect(window.location.origin, {port:8080});

$(document).ready(function(){
    socket.on('connected', function () {    
        alert("A");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:58:41.373

`<script src="/socket.io/socket.io.js"></script>`在设置套接字之前在客户端代码 (data.js) 上添加 。

# php - PHP - exit() 会停止设置了 ignore_user_abort(true) 的脚本吗？

> ID：13872626
> 
> 赞同：2
> 
> 时间：2012-12-14T04:24:49.177
> 
> 标签：php, jquery, ajax

我有一个以以下开头的脚本：`ignore_user_abort(true)`

它发送电子邮件。我使用的原因`ignore_user_abort(true)`是因为我正在使用 AJAX 访问页面，并且用户可能会在脚本完成之前关闭浏览器窗口并且我希望它继续运行。

我想知道如果我添加`exit()`到脚本的末尾是否足以结束脚本的运行，还是我必须使用`flush()`或输出某种类型的文本？

另外，如果我使用 AJAX（通过 jQuery）点击 PHP 页面并将其添加`ignore_user_abort(true)`到脚本的开头，它的行为是否与用户直接访问页面一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T04:29:39.873

当然会的。[`ignore_user_abort()`](http://php.net/manual/en/function.ignore-user-abort.php)仅影响浏览器终止页面加载时脚本是否停止；它对其他任何东西都没有影响。

# c++ - 如何将任何 C++ 库添加到 Mac OS X

> ID：13872627
> 
> 赞同：1
> 
> 时间：2012-12-14T04:24:49.663
> 
> 标签：c++, macos

我想添加几个 C++ 库，例如 Boost，以便在 Mac 中工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:34:39.220

如果您安装了自制软件，则可以从命令行轻松安装 boost：

```
brew install boost 
```

根据您要安装的其他库是什么，您可以对它们执行相同的操作。只要确保它是一个“公式”[检查在这里](https://github.com/mxcl/homebrew/tree/master/Library/Formula)。如果它不是“公式”，请阅读有关在 osx 上安装的库的文档。

# c# - c#中对象之间的数据传递

> ID：13872637
> 
> 赞同：5
> 
> 时间：2012-12-14T04:25:52.693
> 
> 标签：c#, data-binding, dynamic, reflection, dll

我正在开发一个类似于基于插件的系统的桌面应用程序。我有一个客户端模块，它将加载一个包含“机器”对象的 DLL。此后，“机器”对象按照定义明确的接口进行操作和使用。

棘手的部分是包含“机器”对象的 DLL 是通过使用另一个程序动态生成的。在其核心，DLL 生成应用程序接受用户输入，在 c# 代码文件（其中包含用户指定的字段，我没有任何先验知识）中生成类，并将这些类编译为 DLL（machine. dll 文件）。

客户端程序获取这个dll，动态加载它，然后在这个机器对象上运行。

我在建模解决方案以解决机器对象和客户端程序之间传递数据的问题时遇到了很多麻烦，主要是因为我不知道机器对象中包含哪些数据。

客户端程序要做以下事情。

-- 加载 dll 并实例化“机器”对象。-- 调用“机器”对象中的一系列函数，这些函数通过接口为客户端所知。-- 从“机器”对象中提取各种变量并将其显示给用户。

我无法执行最后一步。

注意：我编写了一个简单的解决方案，其中有关字段的元数据由 dll 生成程序生成并存储在 xml 文件中。客户端程序使用这些 xml 文件来获取有关存储在机器对象中的字段的信息。然后它使用机器对象上的反射来访问对象的字段。

我觉得这很麻烦而且很慢。这种东西有什么模式或方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:09:40.320

当我读到这篇文章时想到的一个解决方案是利用C#中对[属性](http://msdn.microsoft.com/en-us/library/system.attribute.aspx)的内置支持。属性是一种用一些额外的元数据标记属性、字段、方法、类等的方法，这些元数据随后被其他类使用，例如在[序列化](http://msdn.microsoft.com/en-us/library/axwwbcs6.aspx)期间。你会经常在那里看到它。

我有一个正在构建的应用程序，它需要能够获取`IEnumerable`对象集合并根据用户选择的选项将一些数据输出到文件中。我创建了一个属性类，它使我能够通过反射读取选择并按照指示行事。让我给你看一个例子：

首先是属性类：

```
[System.AttributeUsage(AttributeTargets.Property)]
class ExportOptionsAttribute : System.Attribute
{
    public string Header { get; set; }
    public string FormatString { get; set; }
    public bool Export { get; set; }
    public int Order { get; set; }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="header"></param>
    public ExportOptionsAttribute(string header) : this (header, null, true)
    {

    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="header"></param>
    /// <param name="formatString"></param>
    /// <param name="export"></param>
    public ExportOptionsAttribute(string header, string formatString, bool export)
    {
        this.Header = header;
        this.FormatString = formatString;
        this.Export = export;
        this.Order = 0;
    }
} 
```

像这样定义此类后，我可以像这样装饰我的数据类属性（实际属性已更改，以免迷失在业务术语中）：

```
public sealed class PartsOrder
{
    /// <summary>
    /// 
    /// </summary>  
    [ExportOptions("Customer Name", Order=0)]
    public string CustomerName { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [ExportOptions("Catalog Name", Order = 1)]
    public string Catalog Name { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [ExportOptions("Unit", Order = 2)]
    public string Unit { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [ExportOptions("Component", Order = 3)]
    public string Component { get; set; }

    /// <summary>
    /// 
    /// </summary>
    [ExportOptions("Delivery Point", Order = 4)]
    public string DeliveryPoint { get; set; }

    /// <summary>
    /// 
    /// </summary>  
    [ExportOptions("Order Date", Order = 5)]
    public string OrderDate { get; set; }
} 
```

因此，在我的导出例程中，我没有硬编码可变的属性名称，也没有传递一个复杂的数据结构，其中包含有关要显示或隐藏哪些字段以及顺序是什么的信息，我只是运行了以下代码，在这种情况下，使用反射循环属性并将其值输出到 CSV 文件。

```
StringBuilder outputDoc = new StringBuilder();

// loop through the headers in the attributes
// a struct which decomposes the information gleaned from the attributes
List<OrderedProperties> orderedProperties = new List<OrderedProperties>();

// get the properties for my object
PropertyInfo[] props =
    (typeof(PartsOrder)).GetProperties();

// loop the properties
foreach (PropertyInfo prop in props)
{
    // check for a custom attribute
    if (prop.GetCustomAttributesData().Count() > 0)
    {
        foreach (object o in prop.GetCustomAttributes(false))
        {
            ExportOptionsAttribute exoa = o as ExportOptionsAttribute;

            if (exoa != null)
            {
                orderedProperties.Add(new OrderedProperties() { OrderByValue = exoa.Order, PropertyName = prop.Name, Header = exoa.Header, Export = exoa.Export });
            }
        }
    }
}

orderedProperties = orderedProperties.Where(op => op.Export == true).OrderBy(op => op.OrderByValue).ThenBy(op => op.PropertyName).ToList();

foreach (var a in orderedProperties)
{
    outputDoc.AppendFormat("{0},", a.Header);
}

// remove the trailing commma and append a new line
outputDoc.Remove(outputDoc.Length - 1, 1);
outputDoc.AppendFormat("\n");

var PartsOrderType = typeof(PartsOrder);

//TODO: loop rows
foreach (PartsOrder price in this.Orders)
{
    foreach (OrderedProperties op in orderedProperties)
    {
        // invokes the property on the object without knowing the name of the property
        outputDoc.AppendFormat("{0},", PartsOrderType.InvokeMember(op.PropertyName, BindingFlags.GetProperty, null, price, null));
    }

    // remove the trailing comma and append a new line
    outputDoc.Remove(outputDoc.Length - 1, 1);
    outputDoc.AppendFormat("\n");
} 
```

OrderedProperties 结构的代码在这里：

```
struct OrderedProperties
{
    /// <summary>
    /// 
    /// </summary>
    public int OrderByValue;
    /// <summary>
    /// 
    /// </summary>
    public string PropertyName;
    /// <summary>
    /// 
    /// </summary>
    public string Header;
    /// <summary>
    /// 
    /// </summary>
    public bool Export;
} 
```

如您所见，提取属性值的逻辑完全不了解类的结构。它所做的只是找到用我创建的属性修饰的属性，并使用它来驱动处理。

我希望这一切都有意义，如果您需要更多帮助或澄清，请随时提问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T04:42:04.833

您也可以选择 ZeroMQ，这是一个轻量级的 MQ 软件，启用了应用程序之间的通信。ZeroMQ 仅包含 1 个 dll，您可以嵌入到任何应用程序中。

ZeroMQ 拥有各种客户端，包括 C、C++、.NET、Python、Java、Ruby，并且可以在 Windows/Linux/OSX 中运行。

# ios - UISwipeGestureRecognizer 和过渡动画

> ID：13872639
> 
> 赞同：0
> 
> 时间：2012-12-14T04:26:03.797
> 
> 标签：ios, xamarin.ios

我有一个 UISwipeGestureRecognizer 在我的视图控制器上工作。如果我向左滑动或向右滑动，我会负责加载另一个视图并将其显示在屏幕上。

如何添加过渡。视图正在加载在处理转换的主 ViewController 内的 ScrollView 中。

```
 MonoTouch.UIKit.UISwipeGestureRecognizer sgrLeft = new MonoTouch.UIKit.UISwipeGestureRecognizer();
        MonoTouch.UIKit.UISwipeGestureRecognizer sgrRight = new MonoTouch.UIKit.UISwipeGestureRecognizer();

        // add the target to it, we put the instance itself of the controller 
        // and the class instance selector
        sgrLeft.AddTarget(this, new Selector("HandleSwipe"));
        sgrRight.AddTarget(this, new Selector("HandleSwipe"));

        // add the swipe direction, there are 4 of them (left, right, up, down). If other than one swipe is 
        // needed then more recognizers must be defined and added to the view - each for the direction
        sgrLeft.Direction = UISwipeGestureRecognizerDirection.Left; 
        sgrRight.Direction = UISwipeGestureRecognizerDirection.Right; 
        // also assign the delegate
        sgrLeft.Delegate = new Helpers.SwipeRecognizerDelegate();
        sgrRight.Delegate = new Helpers.SwipeRecognizerDelegate();

        // and last, add the recognizer to this view to take actions
        this._scrollView.AddGestureRecognizer(sgrLeft);
        this._scrollView.AddGestureRecognizer(sgrRight); 
```

# objective-c - NSTableView 滚动不起作用

> ID：13872642
> 
> 赞同：4
> 
> 时间：2012-12-14T04:26:26.580
> 
> 标签：objective-c, macos, cocoa, nstableview, nsscrollview

我对 tableview 滚动有疑问。

我已经用框架将滚动视图拖到 xib 中。

我正在以编程方式创建一个表视图并将其添加到滚动视图中，如下所示：

```
NSRect frame = [[ScrollView contentView] bounds];
rTableView = [[MTableView alloc] initWithFrame:frame]; 
```

`MTableView`是我的自定义类继承`NSTableView`，在构造函数中，我将列添加到表视图中。

```
[ScrollView setDocumentView: resultsTableView];
[ScrollView setHasVerticalScroller:YES];
[ScrollView setHasHorizontalRuler:YES];

[rTableView setDelegate:self];
[rTableView setDataSource:self];
[ScrollView addSubview: rTableView];

[rTableView reloadData]; 
```

我已经编写了委托函数来加载数据，并且表格正在填充数据。但是滚动不起作用。我在表中有 100 行，并且能够在表视图的初始加载时看到前 21 行。滚动没有任何反应，行索引（在数据委托中）总是 19 或 20。我不确定这里出了什么问题。我在stackoverflow中看到了一些旧帖子，遵循了文档`NSTableView`但没有太大帮助。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:34:44.327

除了这一行之外，你做的一切都是正确的：

```
[ScrollView addSubview: rTableView]; 
```

标准`NSScrollView`+`NSTableView`排列的`NSTableView`集合为`documentView`的`NSScrollView`。您已经在代码中以编程方式正确设置了这种关系：

```
[ScrollView setDocumentView: resultsTableView]; 
```

当您添加该`[ScrollView addSubview: rTableView]`行时，它以一种非预期的方式添加了表格视图。基本上，这个添加只是为了防止你看到它下面的正确滚动的表格视图。

删除该`[ScrollView addSubview: rTableView]`行应该可以让您正确查看表格视图，并允许滚动机制正常工作。

An`NSScrollView`有许多组成滚动架构的子视图（请参阅[Mac 的滚动视图编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NSScrollViewGuide/Articles/Basics.html)）。检查 Interface Builder 调色板中可用的标准“ `NSTableView`inside `NSScrollView`”显示滚动视图有 4 个直接子视图：

```
"<NSClipView: 0x103507200>",
"<NSScroller: 0x101b14f80>",
"<NSScroller: 0x101b15210>",
"<NSClipView: 0x103507be0>" 
```

其中一个剪辑视图持有`NSTableView`，另一个持有`NSTableHeaderView`. 在行中使用 `NSScrollView`'s将表格视图正确设置为各自的文档视图。另一方面，将表格视图添加为 的直接子视图会导致您看到的意外结果。[`setDocumentView:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScrollView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScrollView/setDocumentView%3a)`[ScrollView setDocumentView: resultsTableView]``NSClipView``NSScrollView`

# rest - 在 Rails 中，如何将 REST 与 CRUD 的 link_to 助手一起使用？

> ID：13872645
> 
> 赞同：1
> 
> 时间：2012-12-14T04:26:54.833
> 
> 标签：rest, ruby-on-rails-3.2

CRUD是：

*   指数
*   创造
*   新的
*   编辑
*   节目
*   更新
*   破坏
*   删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T13:49:02.073

在 config/routes.rb 文件中，添加以下内容：

```
resources: comments  # its aplural version of an existing model 
```

rails 将提供一些方法来链接到控制器中的方法，您可以通过在终端中键入来找到这些方法：

```
rake routes 
```

使用第一列的输出并添加“_path”或“_url”

这些可以在 rails "link_to" 方法中使用，例如：

```
link_to "this is the text for the link", new_comment_path 
```

# c# - 自动向下滚动以查看列表中的选定项目

> ID：13872647
> 
> 赞同：0
> 
> 时间：2012-12-14T04:26:56.877
> 
> 标签：c#, wpf, mvvm

我正在使用 MVVM。我在属性 InputTemplates 中有一个 xml 节点列表。当我从视图模型中选择列表的任何项目时，我希望列表自动向下滚动。我知道我必须在我的视图模型中使用一个属性“SelectedItem”，这会有所帮助。

```
<Border BorderBrush="{StaticResource BorderBrush}" 
IsEnabled="{Binding Path=InputTemplateBorderEnabled}" 
BorderThickness="2" CornerRadius="5" Canvas.Left="1" Canvas.Top="84" Height="240" Name="border7" Width="432" >
      <HeaderedContentControl    
                Content="{Binding Path=InputTemplates,Mode=OneTime}"
                Header="{Binding Path=INTemplateLabel}"
                ContentTemplate="{StaticResource FileTabTemplate}"
                Style="{StaticResource MainHCCStyle}" Width="420" Height="237" />
</Border>
 <DataTemplate x:Key="FileTabTemplate">
        <st:ScrollableTabControl Background="#FFF0F9F8"  
          IsSynchronizedWithCurrentItem="True" 
          ItemsSource="{Binding}" 
          ItemTemplate="{StaticResource FileTabItemTemplate}"                 
          Margin="1">
        </st:ScrollableTabControl>
</DataTemplate>
<DataTemplate x:Key="FileTabItemTemplate" >       
        <DockPanel>
            <TextBlock Name="textBlock" Text="{Binding Path=Keyword}" ToolTip="{Binding Path=FileName}"  FontFamily="Microsoft Sans Serif" FontSize="10"  TextWrapping="NoWrap"/>
        </DockPanel>

        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                <Setter TargetName="textBlock" Property="Foreground" Value="Indigo"/>
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
ObservableCollection<CommonResource.ViewModel.FileTemplateViewModel> inputTemplates;

foreach (XMLTemplateViewModel xmlvm in inputTemplates)
{
   list = xmlvm.XMlRootNodes[iSearchRootNode];
   list.SelectedItem = MyList[iSelectionIndex];// MyList is a list of few items TreeViewWithIcons
} 
```

在设置 list.SelectedItem 上，自动向下滚动后，所选项目应在屏幕中可见。我必须为此使用任何事件吗？还请提供属性“SelectedItem”的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:10:23.557

当您使用 ListBox 或 ListView 时，您可以尝试以下操作：

```
public class ScrollIntoViewBehavior:Behavior<ListBox>
{
    protected override void OnAttached()
    {
        AssociatedObject.SelectionChanged += new SelectionChangedEventHandler(AssociatedObject_SelectionChanged);
    }

    void AssociatedObject_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count > 0)
        {
            (sender as ListBox).ScrollIntoView(e.AddedItems[0]);
        }
    }
} 
```

将逻辑更改为您想要的任何内容:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:41:35.160

这是 XML 项目视图中的数据格式。我想知道如何添加触发器，以便在选择 HeaderTextBlock 时，滚动条向下移动以使所选项目可见。

```
 <HierarchicalDataTemplate  DataType="{x:Type cr:TreeViewWithIcons}" ItemsSource="{Binding Path=ChildNodes,Mode=OneTime}">                       
                        <StackPanel Orientation="Horizontal" Name="stackpanel" IsEnabled="False" >
                        <Image Source="{Binding Path=Icon}"/>
                        <TextBlock Name="HeaderTextBlock" Text="{Binding Path=HeaderText}" Background="{Binding Path=BackgroundColor,Mode=TwoWay,NotifyOnSourceUpdated=True}" Foreground="{Binding Path=HeaderColor,Mode=TwoWay,NotifyOnSourceUpdated=True}" IsEnabled="False">
                        </TextBlock>
                    </StackPanel>
                    <HierarchicalDataTemplate.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource= {RelativeSource Mode=FindAncestor, AncestorType= {x:Type TreeViewItem}},Path=IsSelected}" Value="True">
                            <Setter TargetName="HeaderTextBlock" Property="Foreground" Value="Red"/>
                            <Setter TargetName="stackpanel" Property="Background" Value="LightGray"/>
                            <Setter TargetName="HeaderTextBlock" Property="Background" Value="LightGray"/>
                            <Setter Property="BitmapEffect">
                                <Setter.Value>
                                    <OuterGlowBitmapEffect GlowColor="Black" />
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                            <Setter TargetName="HeaderTextBlock" Property="Foreground" Value="Purple"/>
                            <Setter TargetName="HeaderTextBlock" Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </HierarchicalDataTemplate.Triggers>
                </HierarchicalDataTemplate>
            </ResourceDictionary>
        </cr:ExtendedTreeView.Resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:48:09.343

可能这个链接可以帮助......

[http://kiwigis.blogspot.in/2010/12/how-to-add-scrollintoview-to.html](http://kiwigis.blogspot.in/2010/12/how-to-add-scrollintoview-to.html)

基本上你需要找出你的物品容器，例如`ItemsControl`，，，`ListBoxItem`等等，`TreeViewItem`并调用它的函数。`ComboBoxItem``ListViewItem``DataGridRow``BringIntoView()`

在 MVVM 中，这可以通过附加行为来实现。

# c# - 大型可滚动数据 SL4 的虚拟化性能问题

> ID：13872649
> 
> 赞同：12
> 
> 时间：2012-12-14T04:27:04.707
> 
> 标签：c#, silverlight, xaml, uiscrollview, datatemplate

**问题：**在可滚动区域中显示大量数据会带来糟糕的性能和/或用户体验。

**尝试：**基本上在 ListBox 中设置一个 DataTemplate 以显示填充数据的网格，其中 VirtualizationMode 设置为 Recycle 并在 ListBox 本身上设置了固定高度。类似于下面的示例。

```
 <ListBox x:Name="Items"
      TabNavigation="Once"
      VirtualizingStackPanel.VirtualizationMode="Recycling"     
      Height="500">         
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <HyperlinkButton Content="Action" Margin="5"/>
                        <ContentControl  
                                cal:View.Model="{Binding}"  
                                VerticalContentAlignment="Stretch" 
                                HorizontalContentAlignment="Stretch"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

ContentControl 将从另一个视图引入一个标准，该标准`<Grid>`格式化由大约 20 个静态和 20 个数据绑定 TextBlocks 组成的填充项目的整体布局。

这工作正常，并将初始负载减半。但是，现在的问题是我需要高度不是固定大小的能力，因此它占用了其父级中的可用空间，甚至可以调整大小。感谢`@DanFox`我发现您必须以一种或另一种形式修复高度才能调用虚拟化，否则 RenderEngine 只是认为它有无限的空间。

**问题是：**有没有更好的方法来做到这一点，或者我怎样才能至少修复当前的技术以实现更好的用户体验？我可能会生成数百个这样的项目，因此我需要虚拟化的性能增强。但是，我还需要允许用户调整窗口大小并保留有效滚动的能力。

非常感谢任何见解，谢谢，节日快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:57:32.960

根据要求:-)到目前为止，我觉得我没有“回答”任何事情......

你是绝对正确的，应该有一种获得高度动态的方法。将其设置为固定高度是一种快速检查，以确保虚拟化正常工作。你有没有使用性能分析器，或者使用 SilverlightSpy？我通过重构 UI/VM 上的绑定以使其更高效，从而解决了这些问题之一。WinPhone7 SL 有一个很好的资源，有一个可能很好的解决方案，我会看看我能不能把它挖出来（理论应该转移到全脂 SL）

[根据您的VM架构，这](http://shawnoster.com/2010/08/improving-listbox-performance-in-silverlight-for-windows-phone-7-data-virtualization/)对缓存有好处

[这](http://blogs.msdn.com/b/ptorr/archive/2010/10/12/procrastination-ftw-lazylistbox-should-improve-your-scrolling-performance-and-responsiveness.aspx)可能很有用，因为它解释了更多的松弛加载

以及来自 WinPho 7 开发团队的[一些提示。](http://blogs.msdn.com/b/slmperf/archive/2010/10/06/silverlight-for-windows-phone-7-listbox-scroll-performance.aspx)

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:11:28.807

好的，这就是我最终要做的事情，不得不说这是一个巨大的进步！我们从这个特定作品的 77 秒加载时间开始。通过对我们在背面绑定的方式进行了一些重构，我们缩短了大约 20 秒，因此问题仍然存在于 UI 渲染中。下面的答案显然比我最初想象的要简单，现在我们在 15-20 秒内加载大量数据（当然是虚拟化），较小的负载基本上是瞬时的，让我们回到正轨。

这就是我所做的；

```
 <!-- This needs to be contained in a parent panel like a grid -->
 <ListBox x:Name="Items" >
                <ListBox.Template>
                    <ControlTemplate> <!-- Broke it out to allow resizing -->
                        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                            <ItemsPresenter/> <!-- This little fella does magical things -->            
                        </ScrollViewer>         
                    </ControlTemplate>      
                </ListBox.Template>
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel VirtualizingStackPanel.VirtualizationMode="Recycling"/>  <!-- Recycle was a must -->        
                    </ItemsPanelTemplate>       
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <HyperlinkButton  VerticalAlignment="Top" Margin="5" />
                                <!-- This guy I did need to set a minwidth on to retain nice and predictable scrolling 
 when datacontext was potentially changing -->
                            <ContentControl cal:View.Model="{Binding}" MinWidth="1160"
                                            VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" />
                        </StackPanel>
                    </DataTemplate>         
                </ListBox.ItemTemplate>           
            </ListBox> 
```

就是这样！瞧！所要做的就是打破 ControlTemplate 并直接应用 ItemsPresenter！它现在虚拟化了，它调整了大小，宇宙恢复了平衡，我不再想打独角兽了。之后我只是剥离了视觉状态，因为我们不需要任何类型的项目选择，仅此而已，感谢大家的见解！抱歉，这次我不能奖励赏金。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:40:18.987

如果它只是由于固定的高度，你为什么不试试这个：

```
<Grid>    
<ListBox x:Name="Items"
      TabNavigation="Once"
      VirtualizingStackPanel.VirtualizationMode="Recycling"     
      Height="{Binding Path=Height,RelativeSource={RelativeSource AncestorType=Grid}}">         
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <HyperlinkButton Content="Action" Margin="5"/>
                        <ContentControl  
                                cal:View.Model="{Binding}"  
                                VerticalContentAlignment="Stretch" 
                                HorizontalContentAlignment="Stretch"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
</Grid> 
```

重要的是，您将 ListBox 放入适合外部空间而不是像堆栈面板那样适合内部空间的容器中。

试试这个，告诉我它是否有帮助。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:26:06.713

我认为，如果您神奇地将 UI 控件引入数据模板，那么您就违背了虚拟化的目的。这些控件（网格）本身是否被重用？当 {Binding} 改变时会发生什么？在看起来像附加行为的情况下运行了多少代码？也许你所做的可以变得高效。但是，如果您只是制作一个直接的数据模板（或在其中放入一个普通的 UserControl），您就会知道其中的所有控件都将被重用，并且在切换它们的数据上下文时损失最小。

我不确定身高的问题。它应该可以工作（在 Arrange 中获得有限的高度），但这取决于它在引擎盖下做了什么（也许它试图在 Arrange 使高度可用之前弄清楚所有事情）。

您始终可以创建自己的虚拟化项目控件。派生自Panel，放入一个ScrollViewer，在Panel上实现IScrollInfo。然后你就会知道为什么事情是这样的所有原因:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T17:01:58.610

我不确定这是否是您的用例可接受的解决方案，但我创建了一个名为 ContentControl 的名称`DelayedLayoutUpdateContainer`，它包含复杂的布局并有助于提高性能。DelayedLayoutUpdateContainer 背后的想法是，它仅在给定时间跨度内未自行调整大小时调整其内容的大小。ControlTemplate 中 ContentPresenter 的大小设置为绝对值。因此，这可能与将 ListBoxes 高度设置为绝对值具有相同的效果。

# sql-server - 从 SQL Server 迁移到 SQL Server CE 4

> ID：13872650
> 
> 赞同：0
> 
> 时间：2012-12-14T04:27:06.493
> 
> 标签：sql-server, sql-server-ce, sql-server-ce-4

我有一个网站，其中有一个 SQL Server 数据库，但我想摆脱 SQL Server 并进入一个更紧凑/模块化的系统。SQL Server CE 4 适合我的需要，但我有一个问题。我已经搜索了几个小时，但找不到将我的数据库从 SQL Server 2012 移动到 SQL Server CE 4 的工具。

我尝试从 SSMS 编写我的数据库模式 + 数据并尝试将其查询到我的 SQL Server CE 文件中，但我得到了大量不同的错误。我尝试了导入/导出数据库向导，但找不到将目标设置为 SQL Server CE 数据库的方法。我找到了一些程序，但都没有工作（例如[http://www.primeworks-mobile.com/Products/DataPortWizard.html](http://www.primeworks-mobile.com/Products/DataPortWizard.html)在开始传输后出现错误）。

我看过很多关于这些的 StackOverflow 问题，但没有一个对我有帮助。我最后尝试分别移动架构和数据，但最终在插入时收到有关标识列的错误。

如何将我的 SQL Server 数据库（我的机器上的 2012，但我也可以`.BAK`从 GoDaddy 访问数据库的 2008 备份文件（））移动到 SQL Server CE 4 文件？同样，获取 SQL Server 数据很容易，但是 SQL Server CE 在尝试编写我的架构/数据时几乎抱怨所有事情。

# c# - 在 VBA 中编译一个支持声明函数的 dll

> ID：13872652
> 
> 赞同：3
> 
> 时间：2012-12-14T04:27:25.007
> 
> 标签：c#, c++, .net, vba, dll

所以这里是新手，所以请随时让我知道任何违反礼仪的行为！

我是库编译的新手，一直在研究（主要在这个论坛上）构建可以从办公室和其他支持 vba 脚本的程序引用的库。我找到了一些很好的答案。我已经成功地从这个线程执行了解决方案：

[一个简单的 C# DLL - 如何从 Excel、Access、VBA、VB6 调用它？](https://stackoverflow.com/questions/1170794/a-simple-c-sharp-dll-how-do-i-call-it-from-excel-access-vba-vb6)

这涉及在 VBA 中创建 C# 类的实例，然后调用该类的方法（dll 必须是“regasm”）。我对此线程中概述的解决方案非常感兴趣：

[以编程方式在 VBA 宏中设置 DLL 搜索路径](https://stackoverflow.com/questions/450177/programmatically-set-dll-search-path-in-vba-macro/)

其中最受好评的答案（来自 Panda-34）似乎显示了一种使用纯声明函数而不是创建对象的方法。如果我正确理解了 Panda 的回答，这种方法能够将 dll 加载到 vba 项目中，而无需在 tools->references 中设置引用（它使用 ChDir 的巧妙技巧）。

我能够让 DeclareFunction 传递 vba 编译，但是当执行到达使用该函数的行时，我收到“无法确定入口点”类型的消息。此错误的所有论坛解决方案都涉及使用 regasm 在 dll 中注册类，然后设置引用以便可以创建类的实例。我的问题是：

1) 在 Panda 的解决方案中，dll 是否还需要 regasm？

2) 使用 C# 来实现这个解决方案是不可能的，因为 C# 函数总是包装在类中吗？我开始怀疑问题是否在于您不能在 dll 的全局级别不可见的方法上声明函数，因为它可能是模棱两可的 - Test.dll 中的 Class1 和 Class2 可能都有一个 HelloWorld() 成员. 如果是这样的话，无论如何我更喜欢 C++（我的机器有 csc 而不是 cl，所以我一直在学习一些 C#）。

如果我不应该为这个问题开始一个新线程，我很抱歉。我是 SO 的新手，所以我无权评论 Panda 的答案，而且它明确表示不要用你的答案问另一个关于某人的答案的问题，所以我认为这意味着开始一个新线程......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:32:28.613

C# 不支持 MSIL 的所有功能。全局函数就是其中之一。所以 AFAIK 你不能在 C# 中拥有全局函数，它只是不是语言的一部分。例如，您需要托管 C++。至于我的经验，最好的方法是使用通过 regasm 和代码库开关注册的 COM 友好的 c# 程序集。

# javascript - 在 IE 中调用另一个脚本标记中的类方法的 Javascript 失败

> ID：13872658
> 
> 赞同：0
> 
> 时间：2012-12-14T04:28:19.997
> 
> 标签：javascript

在我的 html 代码中，我导入了一个外部 js 文件，也有我自己的内联 js 代码，在我自己的 js 代码中，我需要调用在外部 js 文件中定义的对象的方法。渲染后，源代码如下所示：

```
<script type="text/javascript">
  // content of the extenral js file
  ...
  var bar = {};
  bar.foo = {};
  ...
  bar.foo.class = {};
  bar.foo.class.method = function() {...};
  ...
</script>
<script type="text/javascript">
  // content of my own javascript code
  ...
  function load() {
    ...
    bar.foo.class.method();
    ...
  }
  ...
</script> 
```

对于我正在使用的框架，我无法将这两个部分放在一个地方（即两者都在外部 js 文件中，或者都在我自己的内联 js 代码中）。现在，此代码在 Firefox、Chrome 和 Safari 中有效，但在 IE 中无效。IE 调试器显示如下错误：“无法获取属性 'foo' 的值：对象为空或未定义”

看起来第一个标签中定义的 bar.foo.class 对第二个标签不可见，或者第二个标签在第一个标签之前执行（第一个标签是关于类定义的，没有真正的工作流）。

有谁知道如何在 IE 中解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:45:49.480

该字`class`是保留字。使用其他类似的东西`klass`或做类似的东西`foo["class"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:46:15.110

试试这个代码..可能是可见性问题......我认为它会起作用

```
 <script type="text/javascript">
      // content of the extenral js file
      ...
      var bar = {};
      bar.foo = {};
      ...
      bar.foo.class = {};
      bar.foo.class.method = function() {...};
      ...
    </script>
    <script type="text/javascript">
      // content of my own javascript code
var _bar = bar; 
      ...
      function load() {
        ...
        _bar.foo.class.method();
        ...
      }
      ...
    </script> 
```

另一种选择..避免使用 var 关键字，那么它将是全局的

```
<script type="text/javascript">
          // content of the extenral js file
          ...
          bar = {};
          bar.foo = {};
          ...
          bar.foo.class = {};
          bar.foo.class.method = function() {...};
          ...
        </script>
        <script type="text/javascript">
          // content of my own javascript code
          ...
          function load() {
            ...
            bar.foo.class.method();
            ...
          }
          ...
        </script> 
```

# sql-server - 查询每小时数据并计算总纸箱

> ID：13872660
> 
> 赞同：1
> 
> 时间：2012-12-14T04:28:40.953
> 
> 标签：sql-server, sql-server-2008, select

我是新手，我有一张像下面这样的桌子。我需要检索如下结果的数据。你能建议如何得到这个结果吗？

我想要这样的结果：

```
date count(ref_no) count(ctn_no) sum(quantity)

00:00am to 08:00 4 5 10000

08:01am to 12:00pm

12:01pm to 18:00pm
18:01 to 23:59pm 00 00 000

tbl_pack
insert_date ref_no ctn_no serial_no quantity

03/09/2012 13:12:53:837 I2280097 34 1 T3BSB 500
03/09/2012 13:12:53:867 I2280097 34 2 T3BSA 500
03/09/2012 13:12:53:893 I2280097 34 3 T3BS9 500
03/09/2012 13:12:53:923 I2280097 34 4 T1NJR 500
03/09/2012 13:13:37:453 I2280097 35 1 T29KU 2000
03/09/2012 13:13:37:483 I2280097 35 2 T29KT 2000
03/09/2012 13:13:37:51 I2280097 35 3 T29KS 2000
03/09/2012 13:25:11:907 I2280102 1 1 T491Q 400
03/09/2012 13:25:11:953 I2280102 1 2 T491S 400
03/09/2012 13:25:11:983 I2280102 1 3 T491U 400 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:08:32.317

我对表字段的重命名略有不同，因为我不完全知道如何解释提供的数据中的字段，所以我的示例查询解决方案可能与您的预期不完全一致，但应该很接近。我怀疑您还想显示实际的 RefNumber，也许还有 CartonNumber，但这只是猜测。

tbl_pack： `CalendarDateTime RefNumber CartonNumber SequenceNumber SerialNumber Quantity
3/9/2012 13:12:53:837 I2280097 34 1 T3BSB 500
3/9/2012 13:12:53:867 I2280097 34 2 T3BSA 500
3/9/2012 13:12:53:893 I2280097 34 3 T3BS9 500
3/9/2012 13:12:53:923 I2280097 34 4 T1NJR 500
3/9/2012 13:13:37:453 I2280097 35 1 T29KU 2000
3/9/2012 13:13:37:483 I2280097 35 2 T29KT 2000
3/9/2012 13:13:37:510 I2280097 35 3 T29KS 2000
3/9/2012 13:25:11:907 I2280102 1 1 T491Q 400
3/9/2012 13:25:11:953 I2280102 1 2 T491S 400
3/9/2012 13:25:11:983 I2280102 1 3 T491U 400`

然后这个查询将做你所要求的：

```
SELECT  
    CONVERT(varchar(10), CalendarDateTime, 111),  
    (  
        CASE   
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) <= 8*60 THEN '0:00am To 8:00am'  
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) between 8*60 + 1 and 12*60 THEN '8:00am To 12:00pm'  
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) between 12*60 + 1 and 18*60 THEN '12:00pm To 18:00pm'  
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) between 18*60 + 1 and 24 * 60 - 1 THEN '6:00pm To 23:59pm'  
        END  
    ) as TimePeriod,  
    COUNT(RefNumber) as CountRefNumber,  
    COUNT(CartonNumber) as CountCartonNumber,  
    SUM(Quantity) as SumQuantity 
FROM tbl_pack  
GROUP BY  
    CONVERT(varchar(10), CalendarDateTime, 111),   
    (  
        CASE   
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) <= 8*60 THEN '0:00am To 8:00am'  
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) between 8*60 + 1 and 12*60 THEN '8:00am To 12:00pm'  
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) between 12*60 + 1 and 18*60 THEN '12:00pm To 18:00pm'  
            WHEN datepart(hh,CalendarDateTime) * 60 + datepart(mi,CalendarDateTime) between 18*60 + 1 and 24 * 60 - 1 THEN '6:00pm To 23:59pm'  
        END  
    ) 
```

# ios - 释放结构时出错

> ID：13872661
> 
> 赞同：1
> 
> 时间：2012-12-14T04:28:44.943
> 
> 标签：ios, memory, struct

我是初学者开发者iOS。我在设备上运行此代码然后出错。

```
/**
 * Structure to keep one pixel in RGBA format
 */

struct pixel {
    unsigned char r, g, b, a;
};

/**
 * Process the image and return the number of pure red pixels in it.
 */

- (NSUInteger) processImage: (UIImage*) image
{
    NSUInteger numberOfRedPixels = 0;

    // Allocate a buffer big enough to hold all the pixels

    struct pixel* pixels = (struct pixel*) calloc(1, image.size.width * image.size.height * sizeof(struct pixel));
    if (pixels != nil)
    {
        // Create a new bitmap

        CGContextRef context = CGBitmapContextCreate(
            (void*) pixels,
            image.size.width,
            image.size.height,
            8,
            image.size.width * 4,
            CGImageGetColorSpace(image.CGImage),
            kCGImageAlphaPremultipliedLast
        );

        if (context != NULL)
        {
            // Draw the image in the bitmap

            CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, image.size.width, image.size.height), image.CGImage);

            // Now that we have the image drawn in our own buffer, we can loop over the pixels to
            // process it. This simple case simply counts all pixels that have a pure red component.

            // There are probably more efficient and interesting ways to do this. But the important
            // part is that the pixels buffer can be read directly.

            NSUInteger numberOfPixels = image.size.width * image.size.height;

            while (numberOfPixels > 0) {
                if (pixels->r == 255) {
                    numberOfRedPixels++;
                }
                pixels++;
                numberOfPixels--;
            }

            CGContextRelease(context);
        }

        free(pixels);
    }

    return numberOfRedPixels;
} 
```

错误是：PTP(4821,0x3ece6d98) malloc: *** 对象 0x45a9e00 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试。

请帮我解决这个错误。太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T19:48:25.100

这是一个旧线程，但我想我会在这里发布答案。

错误在像素++行中。正如@Michael 指出的那样，地址在循环内发生了变化。我的解决方案是用以下内容替换整个 while 块：

```
for (int i=0; i<numberOfPixels; i++) {
    if (pixels[i].r == 255) {
        numberOfRedPixels++;
    }
} 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:11:18.680

`pixels`确保在调用后维护指向原始值的指针`calloc`。这是您需要传递到的地址`free`。您正在循环内更改此地址。

# javascript - 带有 Javascript 的括号正则表达式

> ID：13872666
> 
> 赞同：1
> 
> 时间：2012-12-14T04:29:27.317
> 
> 标签：javascript, regex

我有一个这种类型的 JSON 数组：

```
[ 
  { text: '[Chapter1](chapter1.html)'},
  { text: '[Chapter2](chapter2.html)'},
  { text: '[Chapter3](chapter3.html)'},
  { text: '[Chapter4](chapter4.html)'}
] 
```

为了尝试遍历数组并获取括号中的文本（Chapter1、Chapter2 等），[我在 StackOverflow 找到了一个 RegExp](https://stackoverflow.com/questions/2403122/regular-expression-to-extract-text-between-square-brackets)。

```
var aResponse = JSON.parse(body).desc; // the array described above
var result = []; 
var sectionRegex = /\[(.*?)\]/;
for(var x in aResponse) {
  result.push(sectionRegex.exec(aResponse[x].text));
  //console.log(aResponse[x].text) correctly returns the text value  
}
console.log(result); 
```

那应该打印：

```
["Chapter1","Chapter2","Chapter3","Chapter4"] 
```

但是我在多个数组中得到了奇怪的长结果：

```
[ '[Chapter1]',
  'Chapter1',
  index: 0,
  input: '[Chapter1](chapter1.html)' ]
[ '[Chapter2]',
  'Chapter2',
  index: 0,
  input: '[Chapter2](chapter2.html)' ]
[ '[Chapter3]',
  'Chapter3',
  index: 0,
  input: '[Chapter3](chapter3.html)' ]
[ '[Chapter4]',
  'Chapter4',
  index: 0,
  input: '[Chapter4](chapter4.html)' ] 
```

我错过了什么？我很讨厌正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:51:59.723

[`exec`正则表达式的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)方法不仅返回匹配的文本，还返回很多其他信息，包括输入、匹配索引、匹配文本和所有捕获组的文本。您可能需要匹配组 1：

```
result.push(sectionRegex.exec(aResponse[x].text)[1]); 
```

除此之外，您不应该使用`for(...in...)`循环来遍历数组，因为如果将任何方法添加到`Array`'s中就会中断`prototype`。（例如，`forEach`垫片）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:51:28.850

不像你想象的那么奇怪，每个`regex.exec`结果实际上是一个看起来像其中一个块的对象，它包含匹配的整个文本，匹配的子组（你只有一个子组，这是你真正想要的结果），索引匹配成功的输入和给出的输入。

所有这些都是成功匹配的有效和有用的结果。

简短的回答，您是否只想将第二个数组元素推送到结果中。
喜欢`regex.exec(text)[1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:52:50.573

您使用的正则表达式将返回一个数组。第一个元素将是要测试的字符串。下一个元素将是括号之间的匹配试试这个：

```
result.push(sectionRegex.exec(aResponse[x].text)[1]); 
```

# windows-phone-7 - WP7 如何处理 Flick 和 DragDelta 事件

> ID：13872670
> 
> 赞同：0
> 
> 时间：2012-12-14T04:29:42.840
> 
> 标签：windows-phone-7, drag, gesture

我想在 Windows Phone 7 中制作一个滑动面板，就像 Android 中的状态面板一样，支持 Tap、Drag 和 Flick 手势。

我正在`GestureListener`为我的`StackPanel`. 它适用于`Tap`and`DragDelta`事件。但是，当用户轻弹时，两者`DragDelta`都会`Flick`引发事件，这对我来说很难检测到用户是否想要拖动或轻弹。

我该如何处理这两个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:33:58.053

[http://multitouch.codeplex.com/](http://multitouch.codeplex.com/)

以下链接包含工具包和使用点击、拖动功能可能需要的所有相关详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:19:16.590

在这种情况`DragCompleted`下，有`VerticalVelocity`可以作为`Flick`检测的信息。有关详细信息，请参阅[windowsphonegeek](http://www.windowsphonegeek.com/articles/WP7-GestureService-in-depth--key-concepts-and-API)

> **垂直速度**
> 
> 如果阻力是惯性的，则阻力的最终垂直 (Y) 速度。

```
public double VerticalVelocity { get; private set; } 
```

# junit4 - JUnit“找不到类：MyClass”

> ID：13872673
> 
> 赞同：1
> 
> 时间：2012-12-14T04:30:02.107
> 
> 标签：junit4

我从 Eclipse 获得了这个项目（一切正常），我将其复制到另一个文件夹并尝试运行 JUnit 测试。所有文件都在同一个文件夹中（默认包）。文件夹的原始结构是：Project src bin

我在 src 目录中有 2 个源文件和 1 个测试文件。我将 junit-4.11.jar 复制到 jre/lib/ext 中，以便默认加载。我从 src 文件夹运行 java 命令并不断收到错误消息：“找不到类：MyClass”

我什至尝试将当前文件夹添加到类路径中，但无济于事。

```
java -cp . org.junit.runner.JUnitCore MyClass 
```

我已经检查[过这里](https://stackoverflow.com/questions/2472408/junit-4-8-1-could-not-find-class)、[这里](https://stackoverflow.com/questions/7667436/could-not-find-class-java-junit)和许多其他类似的帖子。但它们似乎都不适合我。然后我尝试将代码向上移动到顶级目录但没有成功。目前，我在 Desktop/MyClassFolder/ 中有代码（在 Windows 机器上）。我删除了“src”目录。我还在 Fedora 机器上尝试了同样的东西，但没有成功，并且还使用了 JUnit 3.8。我一定错过了一些简单的东西。使我抓狂。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:59:30.703

看起来这是 junit-4.11.jar 的问题。使用 junit-4.10.jar 一切正常。

# java - 数组/链表：性能取决于遍历的*方向*？

> ID：13872674
> 
> 赞同：14
> 
> 时间：2012-12-14T04:30:05.547
> 
> 标签：java, android, arrays, linked-list, iteration

这篇文章分为两个主要部分。第一部分介绍了原始测试用例和结果，以及我对此的看法。第二部分详细介绍了修改后的测试用例及其结果。

该主题的原标题是“对数组的完全迭代明显快于链表”。由于更新的测试结果（在第二部分中介绍），标题已更改。

* * *

## **第一节：原始测试用例**

对于完整的单向顺序遍历，已知链表和数组具有相似的性能，但是由于连续数组的缓存友好性（引用局部性），它可能会（稍微）更好地执行。为了了解它在实践中是如何工作的（Android、Java），我检查了上述声明，并进行了一些测量。

首先，我的幼稚假设。让我们看一下下面的类：

```
private static class Message {
    public int value1;
    public Message next;

    public Message(java.util.Random r, Message nextmsg) {
        value1 = r.nextInt();
        next = nextmsg;
    }
} 
```

在第一个测量场景中，它的`next`字段根本不会被使用。下面的代码创建一个包含 1,000,000 个`Message`实例的数组，然后循环遍历该数组。它测量迭代需要多少时间。

```
Log.i("TEST", "Preparing...");          

final int cnt = 1000000;
int val = 0;
java.util.Random r = new java.util.Random();
Message[] messages = new Message[cnt];
for (int i = 0; i < cnt; i++) {
    messages[i] = new Message(r, null);
}           

Log.i("TEST", "Starting iterating...");
long start = SystemClock.uptimeMillis();

for (int i = 0; i < cnt; i++) {
    Message msg = messages[i];
    if (msg.value1 > 564645) {
        val++;
    }
}       
Log.w("TEST", "Time: " + (SystemClock.uptimeMillis() - start) + ", result: " + val); 
```

第二个测量构建并测量`Message`对象的链接列表：

```
Log.i("TEST", "Preparing...");          

final int cnt = 1000000;
int val = 0;
java.util.Random r = new java.util.Random();
Message current = null;
Message previous = null;
for (int i = 0; i < cnt; i++) {
    current = new Message(r, previous);
    previous = current;
}
previous = null;

Log.i("TEST", "Starting iterating...");
long start = SystemClock.uptimeMillis();
while (current != null) {
    if (current.value1 > 564645) {
        val++;
    }
    current = current.next;
}           

Log.w("TEST","Time: " + (SystemClock.uptimeMillis() - start) + ", result: " + val); 
```

第一个测试持续产生**41-44**毫秒，而第二个测试产生**80-85**毫秒。链表迭代似乎慢了 100%。

我的（可能有缺陷的）思路和问题如下。我会欢迎（事实上，鼓励）任何更正。

好的，我们经常可以读到一个数组是一个连续的内存块，因此顺序访问它的元素比链表的缓存更友好。**但是**在我们的例子中，数组的元素只是**对象引用**，而不是`Message`对象本身（在 Java 中，我们没有值类型，即 C# 中的结构，我们可以将其存储在数组中）。因此，“引用的局部性”只适用于数组元素本身，而这些只指定了对象的**地址**。因此，`Message`实例（通常）仍然可以在内存中的“任何地方”，因此“引用位置”不适用于实例本身。从这一点来看，看起来我们与链表的情况相同：**实例本身**可能驻留在内存中的“任何地方”：数组只保证它们的**引用**存储在一个连续的块中......

...这里是用例：完整的顺序遍历（迭代）。首先，让我们检查一下我们如何在每种情况下获取对实例的**引用。**在数组的情况下，它非常有效，因为它们位于一个连续的块中。**但是**在链表的情况下，我们也很好，因为一旦我们访问了一个`Message`实例（这就是我们迭代的原因！），我们立即拥有对**下一个**实例的引用。并且由于我们已经访问了一个字段，`Message`因此缓存应该支持访问另一个字段（“下一个”）（同一对象的字段也具有引用的局部性 AFAIK，它们也在一个连续的块中）。总而言之，它似乎分解为：

1.  该数组提供了对引用的缓存友好迭代。`Message`实例本身可能在内存中的“任何地方”，我们也需要访问它们。
2.  链表提供在访问当前`Message`实例时获取对下一个元素的引用。这是“免费的”，因为`Message`无论如何都必须访问每个实例（就像在数组的情况下一样）。

因此，基于上述情况，看起来数组并不比链表好。唯一的例外是当数组是原始类型时（但在这种情况下，将它与链表进行比较是没有意义的）。所以我希望它们的表现相似，但事实并非如此，因为存在巨大差异。事实上，如果我们假设数组索引在每次访问元素时都需要进行范围检查，那么链表（理论上）甚至可以更快。（数组访问的范围检查可能被 JIT 优化掉了，所以我知道这不是一个有效的点。）

我的猜测如下：

1.  造成 100% 差异的原因可能不是阵列的缓存友好性。相反，JIT 执行在链表遍历的情况下无法完成的优化。如果消除了范围检查和（VM 级别）空值检查，那么我猜“array-get”字节码指令可能比我在链表案例中的“field-get”（或其他任何名称）指令更快（？ ）。

2.  即使这些`Message`实例可能在内存中的“任何地方”，它们也可能彼此非常接近，因为它们是“同时”分配的。但是无法缓存 1,000,000 个实例，只能缓存其中的一部分。在这种情况下，顺序访问在数组和链表情况下都是缓存友好的，所以这并不能解释差异。

3.  `Message`我将访问的实例的一些智能“预测”（预取） ？`Message`即不知何故，实例本身仍然存在缓存友好性，但**仅**在数组访问的情况下。

更新：由于收到了几条评论，我想在下面对它们做出反应。

@不可靠：

> 从高地址到低地址访问链表。如果它是相反的方式，即 next 指向一个较新的对象，而不是以前的对象怎么办

非常好的地方！我没想到这个小细节布局可能会影响测试。我今天将对其进行测试，并将返回结果。*（编辑：结果在这里，我用“第 2 节”更新了这篇文章）。*

@Torben 评论：

> 我还要说，这整个练习似乎毫无用处。您说的是 100000 次迭代的 4ms 改进。似乎是过早的优化。如果您遇到这是一个瓶颈的情况，那么请描述它，我们可以调查它（因为它肯定会比这更有趣的问题）。

如果你不感兴趣，那么你可以忽略这个话题（而不是发 4 次）。关于您对“过早优化”的毫无根据的假设-恐怕您阅读了太多SO并且执行的工业级开发太少。具体情况是在与模拟相关的软件中，它可能必须每秒遍历这些列表数次。事实上，120 多毫秒的延迟可能会影响应用程序的响应能力。

> 我很欣赏你对此的想法，但我真的无法从你的帖子中找到问题。:) 编辑：数组迭代速度快 50%。快 100% 意味着零时间消耗。

我敢肯定，从我的帖子中可以很明显地看出，我想知道为什么存在非常显着的差异，而论点会暗示其他情况。感谢您的更正：确实，我想写的是链表案例慢了 100%。

* * *

## **第二部分：修改后的测试用例**

*对我来说， irreputable*有一个非常有趣的观察：

> 从高地址到低地址访问链表。如果它是相反的方式，即 next 指向一个较新的对象，而不是以前的对象怎么办

我更改了链表结构，使其`next`指针的方向等于其节点的实例化顺序：

```
Message current = null;
Message previous = new Message(r, null);
Message first = previous;
for (int i = 0; i < cnt; i++) {
    current = new Message(r, null);
    previous.next = current;
    previous = current;
}       
previous = current = null; 
```

（请注意，创建算法可能不是最紧凑的算法，我想我知道一种更好的方法。）遍历这个链表的代码：

```
while (first != null) {
    if (first.value1 > 564645) {
        val++;
    }
    first = first.next;
} 
```

现在我得到的结果一直是**37-39**毫秒（好吧，我们可以说这正是阵列的性能，但实际上，它在**每个测试用例**中都稍微快一点，不断地。）而不是“反向”的**80**毫秒链表，快一倍！

然后我也对原始数组测试用例进行了类似的测试：我将数组遍历更改为相反的方向（倒计时循环）：

```
for (int i = cnt - 1; i >= 0; i--) {
    Message msg = messages[i];
    if (msg.value1 > 564645) {
        val++;
    }
} 
```

结果一直是**85-90**毫秒！原始测试用例产生 40-41 毫秒。

现在似乎有两个新结论（和一个问题）：

1.  最初的说法似乎是正确的，即当与链表进行比较时，数组的“引用位置”（由于连续的内存块）在“引用类型”（即对象）数组的情况下**并没有提供优势**. 这是因为对象数组只保存对对象实例的*引用*，而不是对象实例本身（理论上，它可以在内存中的“任何地方”，就像链表的情况一样）。

2.  在我的测试用例中，结果似乎取决于**traversal 的方向**，即使在数组场景（！）的情况下也是如此。这怎么可能？

总结一下我的测试结果：

1.  在“正向”方向遍历中，链表稍微优于数组遍历（正如预期的那样：我们在获得实例时立即具有**下一个**`Message`引用，即即使不需要访问数组元素来获取其地址）。

2.  在“向后”方向遍历中，两者的性能都弱了大约 100%（并且链表的性能也略胜于数组）。

有任何想法吗？

**更新 1：** *dlthorpe*提出了非常有价值的意见。我会在这里复制它们，因为它们可能有助于找到这个“谜语”的答案。

> 是否有任何迹象表明硬件在内存缓存控制器中实现了先行页面预取？不是只加载内存引用所需的内存页面，还加载下一个更高的页面以预期向前渐进式读取？这将消除页面加载等待通过内存的正向进展，但不会消除页面加载等待通过内存的反向进展。
> 
> [..]
> 
> 我建议在完全不同的硬件上进行测试。大多数移动设备都运行某种形式的 ARM SoC。查看测试用例是否在英特尔硬件（如 PC 或 Mac）上显示出类似的偏差。如果你能挖出一台旧的 PowerPC Mac，那就更好了。如果这些没有显示类似的结果，那么这将指向 ARM 平台或其 Java 实现上的独特之处。
> 
> [..]
> 
> 是的，您的访问模式大多是顺序的，但方向不同。如果您下方的某些东西正在执行预取但仅在一个方向上（预取下一个更高地址块），那么这将使结果偏向于在该方向上运行的测试。

**更新 2：**我在 PC 上运行了测试（Core i7 Nehalem 架构从 2009 年 2 月开始，8 GB RAM，Windows 7）。我在 .NET 2.0 源代码项目中使用了 C#.NET（但机器上安装了 .NET 4）。我的结果，有 2500 万个`Message`实例：

*   链表：**57-60** ms
*   阵列：**60-63**毫秒

阅读的方向似乎并没有影响结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:30:36.730

谈到 PC 硬件，早期的硬件预取器（比如 2005 年左右）更擅长检测和预取前向访问，但最近的硬件应该擅长检测两个方向。如果您对移动硬件感兴趣，它完全有可能仍然实现基本的只进预取。

除了在 MMU 中实现的正确预取（实际检测访问模式）之外，当发生高速缓存未命中时，硬件获取多个高速缓存行是很常见的。当发生未命中时，这通常采用简单地获取*下一个*缓存行的形式，除了所需的缓存行。在这种情况下，通过有效地将缓存未命中率减半（假设预取无效），这种实现将给前向方向带来很大的优势。

在本地，在 Core i7 上，整个迭代的链表版本的结果稍好一些，约为 3.3 毫秒，而数组版本的结果为 3.5 毫秒 - 当使用原始程序时（它以创建的相反顺序迭代链表） . 所以我看不到你做的同样的效果。

测试的内部循环，检查 val 的值，有很大的影响。当前循环会导致很多错误预测，除非 JIT 编译器足够聪明，可以使用 CMOV 或类似的东西。似乎在我的测试中，它是 - 因为对于适合 L1 的小迭代计数，我得到了大约 1 ns/迭代。1 ns（大约 3 个周期）与完整的分支错误预测不一致。当我将其更改为执行无条件 val += msg.value1 时，数组版本得到了显着提升，即使在 1,000,000 次迭代的情况下（可能甚至不适合 L3）。

有趣的是，相同的转换 (val += msg.value1) 使链表版本稍慢。通过转换，数组版本在较小的迭代次数下要快得多（在 L2 内部，两种方法在外部是可比的）。从卡尺：

```
 length method         ns linear runtime
     100  ARRAY       63.7 =
     100 LINKED      190.1 =
    1000  ARRAY      725.7 =
    1000 LINKED     1788.5 =
 1000000  ARRAY  2904083.2 ===
 1000000 LINKED  3043820.4 ===
10000000  ARRAY 23160128.5 ==========================
10000000 LINKED 25748352.0 ============================== 
```

小迭代计数的行为更容易解释 - 必须使用指针追逐的链表在循环的每次迭代之间具有数据依赖性。也就是说，每次迭代都依赖于前一个，因为要加载的地址来自前一个元素。该数组没有这种相同的数据依赖关系——只有 i 的增量是依赖的，这非常快（i 肯定在此处的寄存器中）。因此，在数组情况下，循环可以更好地流水线化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:35:06.020

我不知道答案，但我会先查看生成的字节码的大小。由于在数组的情况下，迭代次数是已知的（`cnt`是硬编码和最终的），编译器可能已经内联了一些迭代，从而节省了跳转和比较指令。

此外，如果您了解程序如何在低层工作的基础知识，那么查看反汇编的字节码可能会给您一些提示。即使您不精通汇编语言，也不太难理解像您这样的简单程序（当我第一次看到一些反汇编的 Java 代码时，我很惊讶我能弄清楚这么多）。

希望这可以帮助。

# extjs - 从头开始设置 Sencha Touch

> ID：13872675
> 
> 赞同：1
> 
> 时间：2012-12-14T04:30:10.717
> 
> 标签：extjs, sencha-touch

我是 stackoverflow 的新手，我想问一下如何在 Mac 上设置 Sencha Touch。我遵循了本教程[http://davidtucker.net/blog/view/getting_setup_for_sencha_touch_2_development_on_your_mac](http://davidtucker.net/blog/view/getting_setup_for_sencha_touch_2_development_on_your_mac)但我认为缺少一些东西。我已经完成了我的研究，但我找不到一个像样的教程来说明如何从一开始就设置框架。对于任何反馈，我们都表示感谢。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:57:31.510

在过去的几个月里，煎茶发生了很大的变化。

来自煎茶论坛：

> Sencha Touch SDK 工具与版本 2.1 中的 Sencha Touch SDK 不兼容 Sencha CMD 工作正常。请参阅：[http ://www.sencha.com/forum/showthread.php?196001-quot-Not-a-recognized-Sencha-SDK-or-application-folder-quot-on-OSX-w-2.0.0- Beta-2-2.0.1-rc/page4](http://www.sencha.com/forum/showthread.php?196001-quot-Not-a-recognized-Sencha-SDK-or-application-folder-quot-on-OSX-w-2.0.0-Beta-2-2.0.1-rc/page4)

# java - 如果结果是单独的 Drools 规则或有更多规则？

> ID：13872677
> 
> 赞同：0
> 
> 时间：2012-12-14T04:30:22.520
> 
> 标签：java, performance, drools, rules

在编写流口水规则时，我是将检查分成更多规则还是将它们全部分组到一个规则中以在“那么”部分中有更多的ifs？不考虑任何管理问题，只考虑性能（例如执行时间、内存使用）。

假设我有多个任务，它们的条件和要做的事情 90% 相似，只剩下 10% 是特定于每个任务的。你写吗

```
rule A
when (90% conditions) and (task 1 or task 2 or task n)
then
    if (10% conditions for task 1) ...(10% stuff-to-do for task 1)
    else if (10% conditions for task 2) ...(10% stuff-to-do for task 2)
    else if (10% conditions for task n) ...(10% stuff-to-do for task n)
    (90% common stuff-to-do)
end 
```

或者

```
rule B-1
when (90% conditions) and (10% conditions for task 1)
then
    (90% common stuff-to-do) + (10% stuff-to-do for task 1)
end
rule B-2
when (90% conditions) and (10% conditions for task 2)
then
    (90% common stuff-to-do) + (10% stuff-to-do for task 2)
end
rule B-n
when (90% conditions) and (10% conditions for task n)
then
    (90% common stuff-to-do) + (10% stuff-to-do for task n)
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:28:16.860

我不是 Rete 引擎方面的专家，但一般规则是，只要决策在规则的左侧，引擎就能够优化其 Rete 树以确保可以最有效地做出决策。因此，将所有内容都保留在 LHS 上*应该*会更有效率。应该像瘟疫一样避免 LHS 中的“评估”。

当然，抛开微优化规则不谈，如果每个这样的决定都在单独的规则中声明，那么编写单元测试来评估是否在不同情况下激活了正确的规则是很简单的。如果您合并规则，那么您将不再能够测试您的规则是否在应该触发的时候触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T13:17:47.223

我更喜欢第二个。有单独的小规则是干净的。因为 Drools 的目的是把你的 IF-ELSE 变成 RULES

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T17:31:42.313

您需要将它们分成单独的规则，而不是将条件和任务组合在一起，如下例所示。执行时间并不重要，这要归功于 RETE 和内存使用主要取决于您的事实，而不是规则。

通过将条件逻辑分成单独的规则，您将获得可测试和可管理的代码库。将所有内容放入一个大规则中与在纯 java 代码中使用 if-else 语句没有太大区别，在这种情况下，Drools 只会增加项目的复杂性而没有任何好处。

```
rule 90_1
when
    //first rule for common stuff
then
    //
end

rule 90_2
when
    //second rule for common stuff
then
    //
end

rule 90_N
when
    //last rule for common stuff
then
    //
end

rule A_1
when
    //first rule for A
then
    //
end

rule A_2
when
    //second rule for a
then
    //
end

rule B
when
    //rule for B
then
    //
end 
```

# php - 将 PHP 模糊时间转换为 Javascript？

> ID：13872685
> 
> 赞同：0
> 
> 时间：2012-12-14T04:31:28.087
> 
> 标签：php, javascript, date, fuzzy

我有一个 php 函数来做模糊时间（又名时间前）。

这在从服务器端构建表格时使用，但是现在我们正在通过 JavaScript 向表格中添加新项目，并且我们能够选择日期，因此我需要在 Javascript 中复制功能但让它接受日期格式`YYYY-MM-DD`如`2012-12-14`.

我将开始研究它，但我对 Javascript 中的日期很糟糕，所以把它贴在这里，以防有人可以更快地做到这一点。

功能如下：

```
/**
 * Convert date into a 'fuzzy' format
 *   -  15 minutes ago,  3 days ago, etc.
 * Pass a unix timestamp or a string to parse to a date.
 * @param string|number
 * @return string
 */
function fuzzyTime($date_from, $invalid_date = 'a long time ago') {

    $_time_formats = array(
        array(60, 'just now'),
        array(90, '1 minute'),
        array(3600, 'minutes', 60),
        array(5400, '1 hour'),
        array(86400, 'hours', 3600),
        array(129600, '1 day'),
        array(604800, 'days', 86400),
        array(907200, '1 week'),
        array(2628000, 'weeks', 604800),
        array(3942000, '1 month'),
        array(31536000, 'months', 2628000),
        array(47304000, '1 year'),
        array(3153600000, 'years', 31536000),
    );

    $now = time(); // current unix timestamp

    // if a number is passed assume it is a unix time stamp
    // if string is passed try and parse it to unix time stamp
    if (is_numeric($date_from)) {
        $dateFrom = $date_from;
    } elseif (is_string($date_from)) {
        $dateFrom = strtotime($date_from);
    }

    $difference = $now - $dateFrom; // difference between now and the passed time.
    $val = ''; // value to return

    if ($dateFrom <= 0) {
        $val = $invalid_date;
    } else {
        //loop through each format measurement in array
        foreach ($_time_formats as $format) {
            // if the difference from now and passed time is less than first option in format measurment
            if ($difference < $format[0]) {
                //if the format array item has no calculation value
                if (count($format) == 2) {
                    $val = $format[1] . ($format[0] === 60 ? '' : ' ago');
                    break;
                } else {
                    // divide difference by format item value to get number of units
                    $val = ceil($difference / $format[2]) . ' ' . $format[1] . ' ago';
                    break;
                }
            }
        }
    }
    return $val;
} 
```

这是我到目前为止所拥有的，但它在*83 年前又回来了*

```
var date = '2012-11-14';

console.log(fuzzyTime(date));

function fuzzyTime($date_from, $invalid_date) {

    if($invalid_date === undefined){
        $invalid_date = 'a long time ago';
    }

    var $_time_formats = [
        [60, 'just now'],
        [90, '1 minute'],
        [3600, 'minutes', 60],
        [5400, '1 hour'],
        [86400, 'hours', 3600],
        [129600, '1 day'],
        [604800, 'days', 86400],
        [907200, '1 week'],
        [2628000, 'weeks', 604800],
        [3942000, '1 month'],
        [31536000, 'months', 2628000],
        [47304000, '1 year'],
        [3153600000, 'years', 31536000]
    ];

    var $now = new Date(); // current unix timestamp
    var $dateFrom = new Date($date_from);

    var $difference = Math.abs(new Date() - $dateFrom);

    var $val = ''; // value to return

    if ($dateFrom <= 0) {
        $val = $invalid_date;
    } else {
        for (var i = 0; i < $_time_formats.length; i++) {
            var $format = $_time_formats[i];

            if ($difference < $format[0]) {
                //if the format array item has no calculation value
                if ($format.length == 2) {
                    $val = $format[1] + ($format[0] === 60 ? '' : ' ago');
                    break;
                } else {
                    // divide difference by format item value to get number of units
                    $val = Math.ceil($difference / $format[2]) + ' ' + $format[1] + ' ago';
                    break;
                }
            }
        }

    }
    return $val;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:41:12.897

moment.js库已经有一些东西可以帮助你做到这一点**。**

见[http://momentjs.com/](http://momentjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:37:01.623

周围有几个图书馆可以做到这一点。这是一个，

[http://easydate.parshap.com/files/jquery.easydate-0.2.4.js](http://easydate.parshap.com/files/jquery.easydate-0.2.4.js)

它很旧，但我会把它拆开并使用你需要的部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:54:32.480

啊明白了

```
var date = '2012-12-14 17:52:00';

console.log(fuzzyTime(date));

function fuzzyTime(date_from, invalid_date) {

    if (invalid_date === undefined) {
        invalid_date = 'a long time ago';
    }

    var time_formats = [
        [60, 'just now'],
        [90, '1 minute'],
        [3600, 'minutes', 60],
        [5400, '1 hour'],
        [86400, 'hours', 3600],
        [129600, '1 day'],
        [604800, 'days', 86400],
        [907200, '1 week'],
        [2628000, 'weeks', 604800],
        [3942000, '1 month'],
        [31536000, 'months', 2628000],
        [47304000, '1 year'],
        [3153600000, 'years', 31536000]
    ];

    var now = new Date().getTime(); // current unix timestamp
    var dateFrom = new Date(date_from.replace('-','/')).getTime();

    var difference = Math.abs(now - dateFrom)/1000;

    var val = ''; // value to return

    if (dateFrom <= 0) {
        val = invalid_date;
    } else {
        for (var i = 0; i < time_formats.length; i++) {
            var format = time_formats[i];

            if (difference < format[0]) {
                //if the format array item has no calculation value
                if (format.length == 2) {
                    val = format[1] + (format[0] === 60 ? '' : ' ago');
                    break;
                } else {
                    // divide difference by format item value to get number of units
                    val = Math.ceil(difference / format[2]) + ' ' + format[1] + ' ago';
                    break;
                }
            }
        }

    }
    return val;
} 
```

# android - 广播接收器仅在活动运行时激活，否则停用

> ID：13872686
> 
> 赞同：2
> 
> 时间：2012-12-14T04:31:42.803
> 
> 标签：android, android-intent, broadcastreceiver

嗨，我正在使用广播接收器进行位置侦听，但是此广播接收器仅在活动处于前台时才起作用，否则当我不使用此应用程序时，接收器不活动这里是活动代码 onCreate 的方法，我在其中注册广播接收器

```
 PendingIntent proximityIntent = PendingIntent.getBroadcast(getApplicationContext(), i, intent, PendingIntent.FLAG_UPDATE_CURRENT);

locationManager.addProximityAlert(

           latitude, // the latitude of the central point of the alert region

           longitude, // the longitude of the central point of the alert region

           1000, // the radius of the central point of the alert region, in meters

           -1, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration

           proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected

      );

IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT+s); 

     registerReceiver(new ProximityAlertReceiver(), filter); 
```

BroadcastReceiver 的代码是

```
public class ProximityAlertReceiver extends BroadcastReceiver {

    private static final int NOTIFICATION_ID = 1000;
    public static final String PREFS_NAME = "MyPrefsFile";

    @Override

    public void onReceive(Context context, Intent intent) {

        String key = LocationManager.KEY_PROXIMITY_ENTERING;
SharedPreferences shared=context.getSharedPreferences(MainActivity.PREFS_NAME,0);

        Boolean entering = intent.getBooleanExtra(key, false);
Double longitude=intent.getDoubleExtra("longitude", 0.0);
Double latitude=intent.getDoubleExtra("latitude",0.0);

Intent in = new Intent(context,AlarmActivity.class);
in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
in.putExtra("longitude", longitude);
in.putExtra("latitude", latitude);
Log.i("cont1", shared.getInt("count", 0)+"");
in.putExtra("count",shared.getInt("count", 0));
context.startActivity(in);
}

} 
```

我读了一些分别在 onResume 和 onPause 方法中注册和取消注册它的地方，但是当我在 onPause 方法中取消注册它时，它被取消注册意味着它不会工作我希望我的广播接收器一直工作。你能建议如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T04:51:51.620

如果你想让它在后台工作，你需要在清单文件中添加广播接收器和广播接收器类。

喜欢这个教程[http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

您可以使用自己的“MyReceiver”。

在这种情况下，您不需要注册和取消注册。这将自动工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:57:33.657

如果你想让你的广播接收器一直运行，你需要从清单文件中注册它。来自文档：您可以使用 Context.registerReceiver() 动态注册此类的实例，也可以通过 AndroidManifest.xml 中的标记静态发布实现。

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:00:40.450

我认为服务类将帮助您，尝试在后台实现....无限次，当您的服务发现某些内容发生更改时，它会发送一些广播。给你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T05:10:43.957

> 首先你被定义为 mainfest 所以应用程序也没有运行它们广播接收器工作..所以你可以使用 PackageManager 处理这种类型的广播并获取包名称如果启用或禁用你可以检查并运行你的 brodcast

# python - Twython 使用 ID 获取推文

> ID：13872691
> 
> 赞同：1
> 
> 时间：2012-12-14T04:32:55.510
> 
> 标签：python, django, twitter, get, twython

使用[Twython](https://github.com/ryanmcgrath/twython)，如何仅使用推文 ID_STR 获得一条推文？

我知道我可以这样称呼它（[TwitterDocuentation](https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid)）

```
"https://api.twitter.com/1/statuses/show.json?id=112652479837110273" 
```

但是在尝试使用 request() 方法在 twython 中调用它时，我一直遇到返回代码 400 错误。我试图做类似于调用 showStatus 端点的事情

```
 tweet = twitter.request(endpoint='showStatus') 
```

但这似乎不允许我插入 ID_STR 参数（或者我只是做错了）

```
 tweet = twitter.request(endpoint='showStatus',
              params={id:'112652479837110273'}) 
```

我如何仅使用推文 ID 和[Twython](https://github.com/ryanmcgrath/twython)来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T21:26:24.033

Twython 没有 showStatus 方法，应该是 (show_status)

```
status = twitter.show_status(id="112652479837110273") 
```

参考：[https](https://github.com/ryanmcgrath/twython/blob/master/tests/test_core.py) ://github.com/ryanmcgrath/twython/blob/master/tests/test_core.py第147行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:49:19.830

这是如何做到的：

```
status = twitter.showStatus(id="112652479837110273")
print status['text'] 
```

结果：

`@twitter meets @seepicturely at #tcdisrupt cc.@boscomonkey @episod http://t.co/6J2EgYM`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-30T02:54:44.977

如果您在 2014 年仍在尝试这样做，那么现在的代码是：

```
twitter.statuses.show(id="126415614616154112") 
```

如果这不起作用，请查看：[https](https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid) ://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid Twitter 不断更新他们的 API。

# php - 计算多维数组中的特定值

> ID：13872692
> 
> 赞同：0
> 
> 时间：2012-12-14T04:33:01.353
> 
> 标签：php, arrays

我有一组奇怪的数组，我需要计算特定值在结果中显示的次数。目前我有这段代码。

```
$nested_arrays = shopp_orders( '2011-11-30 00:00:00', '2012-11-30 12:59:59', false, '', 2 );
print_r($nested_arrays); 
```

此代码从数据库中提取多个数组（序列化数据）并输出如下

```
Array ( [30] => Purchase Object (
        [purchased] => Array ( )
        [columns] => Array ( )
        [message] => Array ( )
        [data] => Array ( )
        [invoiced] => [authorized] => [captured] => [refunded] => [voided] => [balance] => 0 [downloads] => [shipable] => [shipped] => [stocked] => [_position:DatabaseObject:private] => 0 [_properties:DatabaseObject:private] => Array ( )
        [_ignores:DatabaseObject:private] => Array ( [0] => _ )
        [_map:protected] => Array ( )
        [_table] => wp_shopp_demo_shopp_purchase [_key] => id [_datatypes] => Array ( 
        [id] => int [customer] => int [shipping] => int [billing] => int [currency] => int [ip] => string [firstname] => string [lastname] => string [email] => string [phone] => string [company] => string [card] => string [cardtype] => string [cardexpires] => date [cardholder] => string [address] => string [xaddress] => string [city] => string [state] => string [country] => string [postcode] => string [shipname] => string [shipaddress] => string [shipxaddress] => string [shipcity] => string [shipstate] => string [shipcountry] => string [shippostcode] => string [geocode] => string [promos] => string [subtotal] => float [freight] => float [tax] => float [total] => float [discount] => float [fees] => float [taxing] => list [txnid] => string [txnstatus] => string [gateway] => string [paymethod] => string [shipmethod] => string [shipoption] => string [status] => int [data] => string [secured] => string [created] => date [modified] => date ) [_lists] => Array ( [taxing] => Array ( [0] => exclusive [1] => inclusive ) )
        [id] => 30 [customer] => 12 [shipping] => 23 [billing] => 23 [currency] => 0 [ip] => 24.125.58.205 [firstname] => test [lastname] => test [email] => webmaster@note2voter.com [phone] => 1234567890 [company] => [card] => 1111 [cardtype] => Visa [cardexpires] => 1420070400 [cardholder] => test [address] => 123 Any Street [xaddress] => [city] => Danville [state] => VA [country] => US [postcode] => 24541 [shipname] => [shipaddress] => 123 Any Street [shipxaddress] => [shipcity] => Danville [shipstate] => VA [shipcountry] => US [shippostcode] => 24541 [geocode] => [promos] => Array ( ) [subtotal] => 49.37 [freight] => 9.98 [tax] => 9.874 [total] => 69.22 [discount] => 0 [fees] => 0 [taxing] => exclusive [txnid] => [txnstatus] => authed [gateway] => TestMode [paymethod] => credit-card-test-mode [shipmethod] => ItemRates-0 [shipoption] => Fast Shipping [status] => 0 [secured] => [created] => 1354096946 [modified] => 1354096946
        )

    [29] => Purchase Object (
        [purchased] => Array ( )
        [columns] => Array ( )
        [message] => Array ( )
        [data] => Array ( )
        [invoiced] => [authorized] => [captured] => [refunded] => [voided] => [balance] => 0 [downloads] => [shipable] => [shipped] => [stocked] => [_position:DatabaseObject:private] => 0 [_properties:DatabaseObject:private] => Array ( )
        [_ignores:DatabaseObject:private] => Array ( [0] => _ ) [_map:protected] => Array ( ) [_table] => wp_shopp_demo_shopp_purchase [_key] => id [_datatypes] => Array ( [id] => int [customer] => int [shipping] => int [billing] => int [currency] => int [ip] => string [firstname] => string [lastname] => string [email] => string [phone] => string [company] => string [card] => string [cardtype] => string [cardexpires] => date [cardholder] => string [address] => string [xaddress] => string [city] => string [state] => string [country] => string [postcode] => string [shipname] => string [shipaddress] => string [shipxaddress] => string [shipcity] => string [shipstate] => string [shipcountry] => string [shippostcode] => string [geocode] => string [promos] => string [subtotal] => float [freight] => float [tax] => float [total] => float [discount] => float [fees] => float [taxing] => list [txnid] => string [txnstatus] => string [gateway] => string [paymethod] => string [shipmethod] => string [shipoption] => string [status] => int [data] => string [secured] => string [created] => date [modified] => date ) [_lists] => Array ( [taxing] => Array ( [0] => exclusive [1] => inclusive ) )
           [id] => 29 [customer] => 13 [shipping] => 26 [billing] => 25 [currency] => 0 [ip] => 70.176.223.40 [firstname] => Bryan [lastname] => Crawford [email] => bjcisfree@gmail.com [phone] => 4802323049 [company] => ggg [card] => 1111 [cardtype] => Visa [cardexpires] => 1356998400 [cardholder] => ggg [address] => 1300 W Warner Rd [xaddress] => [city] => Gilbert [state] => AZ [country] => US [postcode] => 85224 [shipname] => [shipaddress] => 1300 W Warner Rd [shipxaddress] => [shipcity] => Gilbert [shipstate] => AZ [shipcountry] => US [shippostcode] => 85224 [geocode] => [promos] => Array ( ) [subtotal] => 29.95 [freight] => 9.98 [tax] => 0 [total] => 39.93 [discount] => 0 [fees] => 0 [taxing] => exclusive [txnid] => [txnstatus] => authed [gateway] => TestMode [paymethod] => credit-card-test-mode [shipmethod] => ItemRates-0 [shipoption] => Fast Shipping [status] => 0 [secured] => [created] => 1353538691 [modified] => 1353538691 
        )
   ) 
```

这是仅来自两个订单的订单数据。我需要计算每个州、每个城市、shipmethod 等在数组中出现的次数。我尝试了以下方法，但它只计算了 2 个大数组。

```
function count_nested_array_keys(array &$a, array &$res=array()) {
    $i = 0;
    foreach ($a as $key=>$value) {
        if (is_array($value)) {
             $i += count_nested_array_keys($value, &$res);
        }
        else {
             if(!isset($res[$key])) $res[$key] = 0;

             $res[$key]++;
             $i++;
        }
    }
    return $i;
}

$total_item_count = count_nested_array_keys($nested_arrays, $count_per_key);

echo "count per key: ", print_r($count_per_key), "\n"; 
```

如果有人可以告诉我如何计算每个状态值出现的次数，例如，VA = 2 NC = 1，我可以从那里得到它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:01:02.577

从您显示的输出中，您正在处理一个对象数组，而不是关联数组，因此您不能像处理`foreach`数组一样使用语句访问对象属性中的值。

[`get_object_vars( object $object)`](http://php.net/manual/en/function.get-object-vars.php)但是，您可以使用PHP 函数获取对象属性的关联数组。

这是一些示例代码：

```
<?php

class Purchase {
    var $state;
    var $country;

    public function __construct($state, $country) {
        $this->state = $state;
        $this->country = $country;
    }
}

$arr = Array(
    new Purchase('VA', 'USA'), 
    new Purchase('VA', 'USA'), 
    new Purchase('NY', 'USA')
);

var_dump($arr);

$counts = array();

foreach($arr as $p) {
    foreach(get_object_vars($p) as $key => $value) {
        if(isset($counts[$value]))
            $counts[$value]++;
        else
            $counts[$value] = 1;
    }
}

var_dump($counts); 
```

**输出：**

```
array
  0 => 
    object(Purchase)[1]
      public 'state' => string 'VA' (length=2)
      public 'country' => string 'USA' (length=3)
  1 => 
    object(Purchase)[2]
      public 'state' => string 'VA' (length=2)
      public 'country' => string 'USA' (length=3)
  2 => 
    object(Purchase)[3]
      public 'state' => string 'NY' (length=2)
      public 'country' => string 'USA' (length=3)
array
  'VA' => int 2
  'USA' => int 3
  'NY' => int 1 
```

# spring - Google Apps Engine 上的 Spring + Hibernate 错误 (java.lang.NoClassDefFoundError: org/objectweb/asm/ClassWriter)

> ID：13872693
> 
> 赞同：-1
> 
> 时间：2012-12-14T04:33:01.767
> 
> 标签：spring, hibernate, google-app-engine

我有使用 spring + spring security + hibernate 使用 netbeans 开发的应用程序，并在 tomcat 中运行。我试图将此项目移至 Google App Engine，因此我决定将其移至 Eclipse，因为考虑到 Eclipse 具有 GAE 插件，我认为它更容易。

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V
    Caused by: java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V 
```

这是我的调度员 servlet

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

        <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

        <bean id="myDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >
            <property name="driverClassName" value="org.springframework.jdbc.datasource.DriverManagerDataSource"/>
            <property name="url" value="jdbc:google:rdbms://instancename/databasename"/>

        </bean>

        <bean id="mySessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
            <property name="dataSource" ref="myDataSource" />
            <property name="annotatedClasses">
                <list>
                    <value>com.pulsa.bean.User</value>
                    <value>com.pulsa.bean.Customer</value>
                    <value>com.pulsa.bean.TableID</value>
                    <value>com.pulsa.bean.Balance</value>
                    <value>com.pulsa.bean.Capital</value>
                    <value>com.pulsa.bean.Contact</value>
                    <value>com.pulsa.bean.Product</value>
                    <value>com.pulsa.bean.Provider</value>
                    <value>com.pulsa.bean.Supplier</value>
                    <value>com.pulsa.bean.Transactions</value>
                </list>
            </property> 
            <property name="hibernateProperties">
                <props>
                    <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                    <prop key="hibernate.show_sql">true</prop>
                    <prop key="hibernate.hbm2ddl.auto">create</prop>
                </props>
            </property>  
        </bean>

        <bean id="myUserDAO" class="com.dao.UserDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="myTableIDDAO" class="com.dao.TableIDDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean class="com.util.SessionHelper" >
            <property name="userDAO" ref="myUserDAO" />
        </bean>

        <bean id="myBalanceDAO" class="com.dao.BalanceDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="myCapitalDAO" class="com.dao.CapitalDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
            <property name="balanceDAO" ref="myBalanceDAO" />
        </bean>

        <bean id="myContactDAO" class="com.dao.ContactDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="myProductDAO" class="com.dao.ProductDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="myProviderDAO" class="com.dao.ProviderDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="mySupplierDAO" class="com.dao.SupplierDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="myTransactionDAO" class="com.dao.TransactionDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="myCustomerDAO" class="com.dao.CustomerDAOImpl">
            <property name="sessionFactory" ref="mySessionFactory"/>
        </bean>

        <bean id="pageMaster" class="com.pulsa.bean.Page"></bean>

        <bean id="pageTransaction" class="com.pulsa.bean.TransactionPage"></bean>

        <bean name="/user/*.htm" class="com.controller.UserController" >
            <property name="userDAO" ref="myUserDAO" />
            <property name="page">
                <ref local="pageMaster"/>
            </property>
        </bean>

        <bean name="/supplier/*.htm" class="com.controller.SupplierController" >
            <property name="supplierDAO" ref="mySupplierDAO" />
            <property name="page">
                <ref local="pageMaster"/>
            </property>
        </bean>

        <bean name="/common/*.htm" class="com.controller.LoginController" >
            <property name="userDAO" ref="myUserDAO" />
        </bean>

        <bean name="/customer/*.htm" class="com.controller.CustomerController" >
            <property name="customerDAO" ref="myCustomerDAO" />
            <property name="userDAO" ref="myUserDAO" />
            <property name="contactDAO" ref="myContactDAO" />
            <property name="providerDAO" ref="myProviderDAO" />
            <property name="page">
                <ref local="pageMaster"/>
            </property>
        </bean>

        <bean name="/transaction/*.htm" class="com.controller.TransactionController" >
            <property name="transactionDAO" ref="myTransactionDAO" />
            <property name="productDAO" ref="myProductDAO" />
            <property name="customerDAO" ref="myCustomerDAO" />
            <property name="contactDAO" ref="myContactDAO" />
            <property name="tableIDDAO" ref="myTableIDDAO" />
            <property name="balanceDAO" ref="myBalanceDAO" />
            <property name="page">
                <ref local="pageTransaction"/>
            </property>
        </bean>

        <bean name="/product/*.htm" class="com.controller.ProductController" >
            <property name="productDAO" ref="myProductDAO" />
            <property name="userDAO" ref="myUserDAO" />
            <property name="supplierDAO" ref="mySupplierDAO" />
            <property name="providerDAO" ref="myProviderDAO" />
            <property name="page">
                <ref local="pageMaster"/>
            </property>
        </bean>

        <bean name="/balance/*.htm" class="com.controller.BalanceController" >
            <property name="balanceDAO" ref="myBalanceDAO" />
            <property name="capitalDAO" ref="myCapitalDAO" />
            <property name="transactionDAO" ref="myTransactionDAO" />
            <property name="userDAO" ref="myUserDAO" />
            <property name="supplierDAO" ref="mySupplierDAO" />
            <property name="page">
                <ref local="pageMaster"/>
            </property>
        </bean>

        <bean name="/capital/*.htm" class="com.controller.CapitalController" >
            <property name="balanceDAO" ref="myBalanceDAO" />
            <property name="capitalDAO" ref="myCapitalDAO" />
            <property name="transactionDAO" ref="myTransactionDAO" />
            <property name="userDAO" ref="myUserDAO" />
            <property name="supplierDAO" ref="mySupplierDAO" />
            <property name="tableIDDAO" ref="myTableIDDAO" />
            <property name="page">
                <ref local="pageMaster"/>
            </property>
        </bean>

        <bean name="/json/*.htm" class="com.controller.JSONController" >
            <property name="customerDAO" ref="myCustomerDAO" />
            <property name="productDAO" ref="myProductDAO" />
        </bean>

    </beans> 
```

这是我的课程路径

```
 /webpulsa/war/WEB-INF/lib/aopalliance-1.0.jar
    /webpulsa/war/WEB-INF/lib/commons-logging-1.1.1.jar
    /webpulsa/war/WEB-INF/lib/spring-aop-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-asm-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-beans-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-context-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-context-support-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-core-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-expression-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-webmvc-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/antlr-2.7.6.jar
    /webpulsa/war/WEB-INF/lib/commons-collections-2.1.1.jar
    /webpulsa/war/WEB-INF/lib/dom4j-1.6.1.jar
    /webpulsa/war/WEB-INF/lib/ehcache-1.2.3.jar
    /webpulsa/war/WEB-INF/lib/hibernate-annotations.jar
    /webpulsa/war/WEB-INF/lib/hibernate-entitymanager.jar
    /webpulsa/war/WEB-INF/lib/hibernate-tools.jar
    /webpulsa/war/WEB-INF/lib/hibernate3.jar
    /webpulsa/war/WEB-INF/lib/jdbc2_0-stdext.jar
    /webpulsa/war/WEB-INF/lib/jackson-annotations-2.0.1.jar
    /webpulsa/war/WEB-INF/lib/jackson-core-2.0.1.jar
    /webpulsa/war/WEB-INF/lib/jackson-databind-2.0.1.jar
    /webpulsa/war/WEB-INF/lib/json-lib-2.2.2-jdk15.jar
    /webpulsa/war/WEB-INF/lib/spring-security-acl-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-acl-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-aspects-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-aspects-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-cas-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-cas-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-config-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-config-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-core-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-core-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-ldap-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-ldap-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-openid-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-openid-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-taglibs-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-taglibs-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-security-web-3.1.0.RC2-sources.jar
    /webpulsa/war/WEB-INF/lib/spring-security-web-3.1.0.RC2.jar
    /webpulsa/war/WEB-INF/lib/spring-orm-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-aspects-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-jdbc-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-jms-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-oxm-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-struts-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-test-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-tx-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/spring-webmvc-portlet-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/mysql-connector-java-5.1.17-bin.jar
    /webpulsa/war/WEB-INF/lib/spring-web-3.1.1.RELEASE.jar
    /webpulsa/war/WEB-INF/lib/hibernate-commons-annotations.jar
    /webpulsa/war/WEB-INF/lib/javassist.jar
    /webpulsa/war/WEB-INF/lib/cglib-2.2.jar
    /webpulsa/war/WEB-INF/lib/asm-attrs.jar
    /webpulsa/war/WEB-INF/lib/asm.jar 
```

我的项目有问题吗？我还将该库放在我的 App Engine lib/impl 中，但也无法正常工作...

ps：可能与[错误有关：java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V](https://stackoverflow.com/questions/2432471/error-java-lang-nosuchmethoderror-org-objectweb-asm-classwriter-initiv)但我仍然没有修复我的项目..请帮助..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:46:31.190

A `java.lang.NoSuchMethodError`（在您的情况下（`java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V`））表示类（`ClassWriter`）存在，但方法（在您的情况下：带有布尔参数的构造函数）不存在。

如果存在不兼容的库，则经常会出现这种错误：一个库需要lib B的x版本，但您有lib B的y版本。这两个版本不兼容。

如果您的项目使用 Netbeans 运行，但没有使用 Eclipse，那么我猜您在将项目从一个 IDE 移动到另一个 IDE 时修改了库。

在您的情况下，Class `DebuggingClassWriter`from`cgilib-2.2.jar`在其构造函数中调用其超类的构造函数（带有一个布尔参数）`ClassWriter`from `asm.jar`（不幸的是，您没有指定`asm.jar`您使用的版本）。但我可以告诉你，例如[`asm-3.1.jar`](http://mvnrepository.com/artifact/asm/asm)包含你需要的构造函数。

*顺便说一句：我[`cglib-nodep-2.2.jar`](http://mvnrepository.com/artifact/cglib/cglib-nodep)与 一起使用[`asm-3.1.jar`](http://mvnrepository.com/artifact/asm/asm)，它可以工作*

# html - CSS Column Layout 在两个浏览器中显示不同

> ID：13872695
> 
> 赞同：0
> 
> 时间：2012-12-14T04:33:04.420
> 
> 标签：html, css

我想在 chrome 和 firefox 浏览器上使用 csscolumn 布局。在 chrome 上它显示正确的布局（例如宽度 70% 左右 30%）但在 Firefox 上它显示不正确的宽度 50% 左右。可以有人帮我保持一致吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:24:16.213

我想我对这种类型的 html 结构有更好的方法，你可以试试这个，如果你有任何问题，请告诉我，或者你可以检查这个小提琴 [http://jsfiddle.net/sarfarazdesigner/FjMr3/](http://jsfiddle.net/sarfarazdesigner/FjMr3/) html 代码是：

```
<div class="wrapper">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

CSS代码是：

```
 .wrapper{
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
}
.left{
    position:absolute;
    left:0;
    width:70%;
    top:0;
    bottom:0;
    background-color:#06F;
}
.right{
    position:absolute;
    left:70%;
    right:0;
    top:0;
    bottom:0;
    background-color:#0FF;
} 
```

# iphone - 如何创建与 xml 网络服务连接的注册表单？

> ID：13872698
> 
> 赞同：0
> 
> 时间：2012-12-14T04:33:21.040
> 
> 标签：iphone, ios, xcode, httprequest

我必须在我的应用程序中创建一个注册表单。它应该连接到 Web 服务。我如何创建它？有没有关于这个的好教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:37:47.393

您只能将数据发送到网络服务...例如，如果您的表单中有文本文件，那么您可以创建一种方法，您可以在其中传递链接，在链接中您可以传递文本字段的值...例如：

```
-(void)sendData
{
 NSString *registeruser = [NSString stringWithFormat:@"http://yourlink//username=%@",yourTextfiled.text];
   NSLog(@"registeruser...%@",registeruser);
} 
```

并在您想要的地方调用此方法。如果您想在注册按钮上调用此方法，然后进行按钮操作并调用此方法.. 例如..

```
 -(IBAction)RegisterAction:(id)sender
 {
   [self sendData];
 } 
```

希望对你有帮助。。

# javascript - 从 WinJS.Binding.List 中删除项目

> ID：13872703
> 
> 赞同：1
> 
> 时间：2012-12-14T04:33:50.730
> 
> 标签：javascript, windows-8, winjs

我查看了 Controls_ListViewWorkingWithDataSources MSDN 示例，了解如何从 WinJS.Binding.List 中删除项目，这是他们的解决方案。请告诉我有一个更简单的方法。

```
if (list2.selection.count() > 0) {
    list2.selection.getItems().done(function (items) {

        //Sort the selection to ensure its in index order
        items.sort(function CompareForSort(item1, item2) {
            var first = item1.index, second = item2.index;
            if (first === second) {
                return 0;
            }
            else if (first < second) {
                return -1;
            }
            else {
                return 1;
            }
        });

        //Work backwards as the removal will affect the indices of subsequent items
        for (var j = items.length - 1; j >= 0; j--) {
            // To remove the items, call splice on the list, passing in a count and no replacements
            lettersList.splice(items[j].index, 1);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:17:09.963

在 MSDN 示例中删除项目的代码更复杂，因为它支持从列表中删除多个项目，当这些项目可能不是连续的顺序时。请注意他们在代码中使用 检索列表中所有当前选定项目的位置`list2.selection.getItems()`。例如，给定一个包含 [1,2,3,4,5,6,7,8,9,0] 的列表，MSDN 示例代码将允许用户多选和删除项目 1,2,4， 7,9 在列表中留下 [3,5,6,8,0]。

如果您只想从 WinJS.Binding.List 中删除单个项目（或多个连续项目），则可以通过一次调用 WinJS.Binding.List.splice() 来完成此操作，并跳过其中的所有额外代码MSDN 示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:27:34.960

您可以通过使用避免 getItems() 调用和 then 阻止：`iSelection.getIndices();`。[这](http://msdn.microsoft.com/en-us/library/windows/apps/hh872197.aspx)为您提供了一个包含您需要删除的索引的数组。

所以代码会更像这样。没有测试过这个。

```
// nothing in docs guarantees these are returned in sorted order, so we need to sort
var indicesList = list2.selection.getindices().sort(function(a,b){return a-b}); 
for (var j = indicesList .length - 1; j >= 0; j--) {
    // To remove the items, call splice on the list, passing in a count and no replacements
    lettersList.splice(indicesList[j], 1);
} 
```

将其封装成一个实用类，如下所示：

```
function deleteSelectedItemsFromList(selection, list) {
    var indicesList = selection.getIndices().sort(function(a,b){return a-b}); 
    for (var j = indicesList .length - 1; j >= 0; j--) {
        // To remove the items, call splice on the list, passing in a count and no replacements
        list.splice(indicesList[j], 1);
    }
} 
```

像这样调用：

```
Utils.deletedSelectedItemsFromList(listview.selection, listViewList); 
```

巴姆，你有一个班轮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T15:42:16.077

我会在数据源上使用 remove 方法，所以相同但更长:)：

```
if (list2.selection.count() > 0) {
    list2.selection.getItems().done(function (items) {

    //Sort the selection to ensure its in index order
    items.sort(function CompareForSort(item1, item2) {
        var first = item1.index, second = item2.index;
        if (first === second) {
            return 0;
        }
        else if (first < second) {
            return -1;
        }
        else {
            return 1;
        }
    });

    //Work backwards as the removal will affect the indices of subsequent items
    for (var j = items.length - 1; j >= 0; j--) {

             var _dataSource = list2.itemDataSource;
             //Start the sequence of edits
             _dataSource.beginEdits();

             //Get new Items that will be added to the existing item source
             var newItems = { "id": selection[i].data.id, "name": selection[i].data.name };
             //remove the last item
             _dataSource.remove(_dataSource.itemFromIndex(indicesList[j])._value.key);

             //YOU CAN EVEN ADD A NEW ITEM IF YOU WANT
             //_dataSource.insertAtStart(null, newItems);

             //Ends the batch of edits
             _dataSource.endEdits();

    }
});

} 
```

# iphone - 在 ios 中使用 AVAudioPlayer 和 MPMusicPlayerController 在歌曲播放列表中添加淡入淡出效果

> ID：13872707
> 
> 赞同：1
> 
> 时间：2012-12-14T04:34:22.013
> 
> 标签：iphone, ios

我需要在歌曲播放列表中添加淡入/淡出功能（播放列表歌曲从 ipod 库中检索）。当一首歌曲结束时我需要淡出效果并且下一首歌曲开始我需要淡入效果而另一首认为在淡入淡出系统或媒体音量不应改变。

我正在使用 MPMusicPlayerController 播放歌曲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:02:37.973

这是我编写的（ARC 之前）的 AVAudioPlayer 扩展，它完全符合您的要求。

标题`AVAudioPlayer+FadeControl.h`：

```
#import <Foundation/Foundation.h>
#import <AVFoundation/AVFoundation.h>

@interface AVAudioPlayer (FadeControl)

-(void)fadeOutWithDuration:(NSTimeInterval)inFadeOutTime;

@end 
```

和来源`AVAudioPlayer+FadeControl.m`：

```
#import "AVAudioPlayer+FadeControl.h"

#define     kFadeSteps  20.0

@implementation AVAudioPlayer (FadeControl)

-(void)fadeOutWithDuration:(NSTimeInterval)inFadeOutTime
{
    NSTimeInterval fireInterval = inFadeOutTime/kFadeSteps;
    float volumeDecrement = 1.0/kFadeSteps;
    float originalVolume = self.volume;

    self.volume = originalVolume - volumeDecrement;

    [self retain];
    [NSTimer scheduledTimerWithTimeInterval:fireInterval target:self selector:@selector(fadeOutTimerMethod:) userInfo:[NSNumber numberWithFloat:originalVolume] repeats:YES];

}

- (void)fadeOutTimerMethod:(NSTimer*)theTimer   
{
    float volumeDecrement = 1.0/kFadeSteps;

    if (self.volume > volumeDecrement)
    {
        self.volume = self.volume - volumeDecrement;
    }
    else if ( [theTimer isValid] )
    {
        [self stop];

        NSNumber* originalVolume = [theTimer userInfo];
        self.volume = [originalVolume floatValue];

        [theTimer invalidate];
    }
    else 
    {
        [self stop];
        [self release];
    }

}

@end 
```

广告方法应该是微不足道的`playWithFadeInDuration:`。要在 ARC 项目中使用，只需添加`-fno-objc-arc`到文件的编译标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:40:40.543

```
-(void)doFadeInVolume { 

//play
[audioPlayerMain play];

if (audioPlayerMain.volume < 1.0) {
audioPlayerMain.volume = audioPlayerMain.volume + 0.1;
[self performSelector:@selector(doVolumeFadeMainIn) withObject:nil afterDelay:0.2];
} 
} 
```

并且可以使用相反的方法来淡出音量。希望这可以帮助。

# c - 是什么导致 16 位架构上的地址错误？

> ID：13872716
> 
> 赞同：0
> 
> 时间：2012-12-14T04:35:04.667
> 
> 标签：c, memory-management, memory-alignment, 16-bit

我正在为 16 位微控制器编写一些 C 代码。当我在目标上调试应用程序时，我最终遇到了 AddressError ISR。我阅读了数据表，它说如果您尝试读取或写入与奇数内存地址对齐的 16 位值，就会发生这种情况。我想我明白这意味着什么，但它似乎并不正确。并不意味着如果我要制作这样的结构：

```
struct foo{
    uint8_t thing1;
    uint16_t thing2;
}; 
```

我永远无法在没有错误的情况下读取或写入thing2？如果不是，这是否意味着编译器将自动在事物 1 和事物 2 之间填充 8 位，以便事物 2 在偶数地址上正确对齐？如果是这种情况，那么地址错误将如何发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:15:51.120

取决于您如何实例化它：

```
struct foo{
    uint8_t thing1;
    uint16_t thing2;
}; 
```

可能在偶数地址对齐，但如果编译器不够聪明，则不会在 thing2 之间添加填充，这会导致 thing2 位于奇数地址，因此会出错。更改成员顺序或搜索编译器文档（可能是一些编译指示预处理器指令），这将允许编译器帮助您为您对齐数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:58:24.907

可能您需要更改默认结构对齐方式。您可以在代码或编译器选项中使用编译指示。在 gcc 的情况下，它是 -fpack-struct[=n]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T07:05:32.910

大多数小型处理器仅允许有限的一组内存操作，因为未对齐的内存读取必须在两个或更多周期内完成，并增加处理器的整体复杂性。

这在 c 代码中并不经常显示，因为堆栈变量和结构成员都与类型的本机宽度对齐（或 4 或 8 个字节，以最小者为准）。这可以用属性*packed*覆盖，以及将指向结构的指针重新分配给未对齐的地址。因此，人们可以很容易地熟悉地址错位异常。

虽然例如。Intel 8086 支持在非对齐地址读取 16 位，当尝试访问跨段边界的字时（偏移量 0xffff），仍然可以选择地址生成异常。

# iphone - 保存核心数据对象后，UISplitView 详细信息未更新

> ID：13872718
> 
> 赞同：0
> 
> 时间：2012-12-14T04:35:12.527
> 
> 标签：iphone, core-data, ios4, uisplitviewcontroller, ios5

我正在开发一个新的 iPad UISplitViewController 应用程序，左侧有一个 MasterView 和 Core Data 对象。当一个 CoreData 对象被选中时，它的详细信息会显示在 DetailView 中。可以在 DetailView 中编辑和更改对象的详细信息，然后通过按 DetailView 中的按钮进行保存。

按下保存按钮后，用户必须在 MasterView 中重新选择 Core Data 对象才能查看对象的更新信息。

我想在按下保存按钮时重新加载对象的数据。

我试图打电话给 MasterView

```
- (void)tableView:(UITableView *)aTableView 
        didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

但尚未成功从 detailView 更新对象详细信息。

任何建议或代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:24:00.490

您需要`NSFetchedResultsController`在主视图中使用 a 。将选定的核心数据对象传递给要编辑的详细视图。当保存发生时，您可以利用`NSFetchedResultsControllerDelegate`协议实现对表视图的自动回调。

在协议回调中，事情非常简单。这是`didChangeObject`回调的完整存根。

```
-(void)controller:(NSFetchedResultsController *)controller 
    didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath 
    forChangeType:(NSFetchedResultsChangeType)type 
    newIndexPath:(NSIndexPath *)newIndexPath {

  if (type == NSFetchedResultsChangeDelete) {}
  else if (type == NSFetchedResultsChangeInsert) {}
  else if (type == NSFetchedResultsChangeMove) {}
  else if (type == NSFetchedResultsChangeUpdate) {      
     [self.tableView reloadRowsAtIndexPaths:@[indexPath]
          withRowAnimation:UITableViewRowAnimationAutomatic];
     UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
     [cell setSelected:YES animated:YES];
  }
} 
```

通常不需要选择内容（最后两行），但有时选择会丢失 - 如果您想保留选择的视觉指示，请使用此选项。

# php - PHP：在while循环中切换数组值

> ID：13872721
> 
> 赞同：0
> 
> 时间：2012-12-14T04:36:12.883
> 
> 标签：php, arrays, loops, multidimensional-array, while-loop

如果我知道我在 while 循环中只循环了两次，那么如何在第一个循环之后切换数组值？

这是我的数组，$myarr：

```
Array ( // echo out array values from first loop
    [id1] => values_one
    [id2] => values_two
)

Array ( // echo out array values from second loop
    [id2] => values_two
    [id1] => values_one
)

$arr = array_values($myarr);
while($row = $query->fetch(PDO::FETCH_ASSOC))
{
 // ... more code
 //echo's out array values
   echo $arr[0]; //first loop should be values_one, second loop should be values_two
   echo $arr[1]; //first loop should be values_two, second loop should be values_one

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:54:00.267

有了这样一个模糊的问题，很难确定“边缘情况”。但是下面将根据您上面写的内容解决您的问题。

```
$arr = array_values($myarr);
while($row = $query->fetch(PDO::FETCH_ASSOC))
{
 // ... more code
 //echo's out array values
   echo $arr[0]; //first loop should be values_one, second loop should be values_two
   echo $arr[1]; //first loop should be values_two, second loop should be values_one
   $arr = array_reverse($arr, false);
} 
```

# css - 如何在 JSP 中使用无样式样式的查询中的按钮来设置带有会话的样式块？

> ID：13872722
> 
> 赞同：0
> 
> 时间：2012-12-14T04:36:12.247
> 
> 标签：css, jsp, button, styles

我刚开始用 JSP 编码。我只是对如何使表查询中的按钮仅对管理员会话可见感到困惑。这是我的代码：

```
 <% if(session.getAttribute("user").equals("admin")){
   %><script> $(document).ready(function(){
   document.getElementById("btn_lihat").style.display="block";});</script></code></pre>

    <% //some form submit }
                           %> 
```

这是我的查询表...

```
 <table border ="1">
 <tr bgcolor="#7a9ac3">            
                <td>No</td>
                <td>Perihal</td>
                <td>Tanggal</td>
                <td>Jenis</td>
                <td>Tujuan</td>
                <td>Gambar</td>
                <td>Ket</td>
            </tr>
 <% 
 try{
    Koneksi konek = new Koneksi();
    Connection conn = konek.bukaKoneksi();
    Statement stm = conn.createStatement();
    String sql = "select * from surat";
    ResultSet res = stm.executeQuery(sql);
           while(res.next()){
               %>
               <tr>
                <td><%=res.getString(1) %></td>
                <td><%=res.getString(2) %></td>
                <td><%=res.getString(3) %></td>
                <td><%=res.getString(4) %></td>
                <td><%=res.getString(5) %></td>
                <td><a href="<%=res.getString(6) %>"><img src="<%=res.getString(6) %>" width="60" height="80"></a></td>
                <td><a href="ServletSurat?nomor=<%=res.getString(1) %>" ><div id="btn_lihat" style="display: none"><input type="submit" name="cmd" value="lihat" id="lihat"></div></a></td>
            </tr>

     <%
           }}
   catch(Exception e){
      out.print(e);
        }
   %>
 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:08:39.867

最好在添加按钮时检查其管理员是否为管理员。改变

```
<td><a href="ServletSurat?nomor=<%=res.getString(1) %>" ><div id="btn_lihat" style="display: none"><input type="submit" name="cmd" value="lihat" id="lihat"></div></a></td> 
```

至

```
<td><a href="ServletSurat?nomor=<%=res.getString(1) %>" >
<% if(session.getAttribute("user").equals("admin")){%>
<div id="btn_lihat"><input type="submit" name="cmd" value="lihat" id="lihat"></div>
<%}%>
</a></td> 
```

`button`创建内部`a`标签不是一个好习惯。

# .net - 实体空间与 Protobuf.Net 集成的建议

> ID：13872725
> 
> 赞同：1
> 
> 时间：2012-12-14T04:36:27.673
> 
> 标签：.net, protobuf-net, entityspaces

通常当我在做基于网络的工作时，我使用 Protobuf 在网络上移动自定义对象，这些对象是为正在构建的系统建模的，用于从其他系统移动我的数据/组合对象。

我目前正在参与增强一个项目，该项目使用基于专有文本的协议，该协议主要使用文本进行数据序列化（、| 和 [] 符号），并将实体空间用作数据访问层。

我要问的问题是我应该创建另一层对象来提供 Protobuf 网络对象，这些对象是从 Entityspaces 对象的“加载”数据中填充的，还是应该将必要的 protobuf 标签添加到 Entityspaces 对象中的对象（它们是从数据库中自动生成的，目前没有）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:02:14.683

可以去任何一种方式。如果您需要将 protobuf 数据编码为文本格式：使用 base-64，方便不使用`|`/ `[`/ `]`。

如果您更喜欢对当前没有属性的对象进行 protobuf 编码，也有一些方法可以做到这一点：如果数据库中的类型是作为`partial`类生成的，那么您最简单的做法是（在另一个代码文件中）：

```
namespace The.Same.Namespace {
    [ProtoContract]
    [ProtoPartialMember(1, "Foo")]
    [ProtoPartialMember(2, "Bar")]
    ...
    partial class SomeEntity {}
} 
```

您想要序列化的成员在哪里`Foo`和是。`Bar`或者，您可以在运行时配置整个模型：

```
RuntimeTypeModel.Default.Add(typeof(SomeEntity), false).Add("Foo", "Bar"); 
```

（这是一个非常基本的配置；还有更多微妙的选项可用）

# java - 无法运行简单的渲染脚本数学函数

> ID：13872727
> 
> 赞同：0
> 
> 时间：2012-12-14T04:36:42.573
> 
> 标签：java, android, renderscript

我正在尝试获取一个简单的渲染脚本函数来获取两个数字，将它们相加并返回结果，但是我还没有找到一个示例项目来顺利完成这项工作。当我尝试加载文件时，我不断收到一个奇怪的错误：

```
ScriptC_myexamplescript myScript;
RenderScript rs = RenderScript.create(this); 
```

我得到错误：

```
Symbol not found: .rs.dtor  on the next line:
myScript = new ScriptC_myexamplescript(rs, getResources(), R.raw.myexamplescript); 
```

我的 .rs 文件很简单：

```
#pragma version(1)
#pragma rs java_package_name(com.exercise.<my pacakge name>);

void init(){

}

void root(const float *v_in, float *v_out) {

   const float *data = v_in;
   float *outData = v_out;
   *outData = *data;    

} 
```

有谁知道这意味着什么，或者如果有一个简单的项目我可以为 Android ICS 下载，然后它可以进行数学运算，而不是实际的渲染？

（我可以让渲染脚本文件工作，但这不是我想要的。我不想要任何图形）

编辑今天我试图让它运行，并得到以下问题：

```
Allocation mInAllocation = null;
Allocation mOutAllocation;

float[] A = new float[1];
for (int i = 0; i < 1; i++) {
A[i] = 2;
}

Allocation inFloatPointer = Allocation.createSized(rs, Element.F32(rs), A.length, Allocation.USAGE_SCRIPT);
Allocation outFloatPointer = Allocation.createSized(rs, Element.F32(rs), A.length, Allocation.USAGE_SCRIPT);  
inFloatPointer.copyFrom(A); // copies from an array of floats (random numbers in this test case).
mScript.forEach_root(inFloatPointer, outFloatPointer); 
```

我收到错误消息：对于类型 ScriptC_RenderScript 的 forEach_root 方法未定义 .java 文件中没有 forEach_root 函数，即使在我清理项目后它仍然不存在。

是否有一个简单的项目可以下载，只需一个数学函数即可下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:28:01.890

你确定这里确实有错误吗？我相信您只是看到了额外详细的日志记录信息。您可以发布确切的 logcat（或 Java 异常跟踪）吗？请注意，如果您真的想执行您的函数，您需要创建输入和输出分配，然后调用“myScript.forEach_root(input, output);” 为了让它在输入/输出的每个单元格上执行 root() 函数。完成后，您可以从输出分配中读取结果并从 Java 中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T13:05:56.593

添加到清单的 before `<application>`，行

```
<uses-sdk android:minSdkVersion="14" /> 
```

任何低于 14 的值都会引发您之后提到的错误`ant clean debug`

# ios - 从 ios 表面创建图像并保存

> ID：13872728
> 
> 赞同：0
> 
> 时间：2012-12-14T04:36:47.850
> 
> 标签：ios, ios5, ios4, iphone-privateapi

我正在尝试获取与 ios 设备主屏幕关联的表面，从中创建图像并保存。这与这个问题有关 -[从 iOS 应用程序截屏 - 模拟显示记录器（内部查询）](https://stackoverflow.com/questions/13833816/taking-screenshots-from-ios-app-emulating-display-recorder-query-on-the-inter)。
代码如下：

```
 IOMobileFramebufferConnection connect;
    kern_return_t result;

    io_service_t framebufferService = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("AppleH1CLCD"));
    if(!framebufferService)
        framebufferService = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("AppleM2CLCD"));
    if(!framebufferService)
        framebufferService = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("AppleCLCD"));

    result = IOMobileFramebufferOpen(framebufferService, mach_task_self(), 0, &connect);

    result = IOMobileFramebufferGetLayerDefaultSurface(connect, 0, &screenSurface);

    uint32_t aseed;
    IOSurfaceLock(screenSurface, kIOSurfaceLockReadOnly, &aseed);
    uint32_t width = IOSurfaceGetWidth(screenSurface);
    uint32_t height = IOSurfaceGetHeight(screenSurface);

    CFMutableDictionaryRef dict;
    int pitch = width*4, size = 4*width*height;
    int bPE=4;
    char pixelFormat[4] = {'A','R','G','B'};
    dict = CFDictionaryCreateMutable(kCFAllocatorDefault, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
    CFDictionarySetValue(dict, kIOSurfaceIsGlobal, kCFBooleanTrue);
    CFDictionarySetValue(dict, kIOSurfaceBytesPerRow, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &pitch));
    CFDictionarySetValue(dict, kIOSurfaceBytesPerElement, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &bPE));
    CFDictionarySetValue(dict, kIOSurfaceWidth, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &width));
    CFDictionarySetValue(dict, kIOSurfaceHeight, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &height));
    CFDictionarySetValue(dict, kIOSurfacePixelFormat, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, pixelFormat));
    CFDictionarySetValue(dict, kIOSurfaceAllocSize, CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &size));

    IOSurfaceRef destSurf = IOSurfaceCreate(dict);
    IOSurfaceAcceleratorRef outAcc;
    IOSurfaceAcceleratorCreate(NULL, 0, &outAcc);

    CFDictionaryRef ed = (__bridge CFDictionaryRef)[NSDictionary dictionaryWithObjectsAndKeys: nil];
    IOSurfaceAcceleratorTransferSurface(outAcc, screenSurface, destSurf, ed, NULL);

    IOSurfaceUnlock(screenSurface, kIOSurfaceLockReadOnly, &aseed);

    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, IOSurfaceGetBaseAddress(destSurf), (width*height*4), NULL);
    CGImageRef cgImage=CGImageCreate(width, height, 8, 8*4, IOSurfaceGetBytesPerRow(destSurf), CGColorSpaceCreateDeviceRGB(), kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little, provider, NULL, YES, kCGRenderingIntentDefault);
    UIImage *image = [UIImage imageWithCGImage: cgImage];
    CGImageRelease(cgImage);
    UIImageWriteToSavedPhotosAlbum(image, self, nil, nil); 
```

但我得到的只是保存在我的照片文件夹中的空白图像。请帮忙看看我哪里出错了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:21:28.350

我记得前段时间我看到了一些关于这个主题的东西（在后台截屏）。我无法找到我看到的确切位置和代码。我给自己留下的唯一笔记是使用 createScreenIOSurface

我用谷歌搜索了一下，发现了几个提及：

[应用程序在后台时获取屏幕截图？（允许私有 API）](https://stackoverflow.com/questions/10380553/get-a-screenshot-while-app-is-in-background-private-apis-allowed)

[https://github.com/rpetrich/FastBlurredNotificationCenter/blob/master/Tweak.x](https://github.com/rpetrich/FastBlurredNotificationCenter/blob/master/Tweak.x)

[http://pastie.org/pastes/3734430](http://pastie.org/pastes/3734430)

我记得代码比你展示的要紧凑得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:08:57.847

如果您在后台运行指定的代码，则它可以工作。它确实在 iOS 设备的显示屏上截取了最上面的表面。
面临的问题是由于在应用程序内部，它正在为应用程序创建的空白视图截屏。
但是，您必须以至少 2 秒的间隔截取屏幕截图，否则操作系统会暂停您的应用程序。任何有关如何改进的建议都会有所帮助。

# c# - 如何在 C# 中打印日志？

> ID：13872733
> 
> 赞同：1
> 
> 时间：2012-12-14T04:37:28.057
> 
> 标签：c#

我正在构建 winform 应用程序，当我调试我的应用程序时，我在 Local 和 Call Stack 窗口上看不到任何东西，我尝试使用 Debug.writeLine() 但是这两个窗口没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:41:14.123

您可以`Trace.WriteLine()`在`System.Diagnostics`命名空间中使用。 [Trace.WriteLine 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.writeline.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:45:38.340

**简而言之：**您需要遵循**Visual C# 中的跟踪和调试过程**。

这是关于如何跟踪和调试的非常好的[**介绍和演示。**](http://support.microsoft.com/kb/815788)此外，我将仅引用有关此介绍内容的文章的一小段引述。

> 本文介绍如何使用 Debug 和 Trace 类。这些类在 Microsoft .NET Framework 中可用。您可以使用这些类在应用程序开发期间或部署到生产之后提供有关应用程序性能的信息。这些类只是 .NET Framework 中可用的检测功能的一部分。

# ios - iPad：如何在主从窗口上添加覆盖视图？

> ID：13872740
> 
> 赞同：0
> 
> 时间：2012-12-14T04:38:20.197
> 
> 标签：ios, ipad, master-detail

我的应用程序是基于 iPad 的主从视图。现在我想实现一个功能，但我不知道该怎么做，请帮忙。

我想添加一个覆盖视图来显示一些文本。当屏幕为横向时，我希望文本视图覆盖在主视图上，以免覆盖细节视图的任何部分；当屏幕为纵向时，由于主视图被隐藏，我希望文本视图覆盖在详细视图的底部。

任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:54:02.933

如果您使用`UISplitViewController`，它有一个名为 的属性`viewControllers`。该属性是一个包含两个 UIViewController 的数组：第一个是主视图，第二个是详细视图。您可以在这些视图之上设置叠加层，并在旋转方法中将叠加层从一个视图交换到另一个视图。

# php - foreach 中的 php in_array()

> ID：13872744
> 
> 赞同：0
> 
> 时间：2012-12-14T04:38:48.033
> 
> 标签：php, arrays, foreach

我在 foreach 循环中使用 in_array() 时遇到问题。不确定这是否可能，或者我是否在有更好方法的地方做一些荒谬的事情。我想要做的是浏览所有项目，如果它们的项目 id 与数组中的那个匹配，则返回 true 并将项目的价格添加到运行总数中。

```
$price = 0;
$result = false;
$array = array(1533, 2343, 2333);

foreach($order['items'] as $item){
  if(in_array($item['Item'], $array)){
     $result = true;
     $price += $item['Price'];
  }
}

**UPDATED**
Here is the order array

[items] => Array
    (
        [0] => Array
            (
                [Item] => 139957
                [OrderID] => 16025
                [SizeID] => 24
                [Price] => 46.00
            )

        [1] => Array
            (
                [Item] => 2343
                [OrderID] => 16025
                [SizeID] => 12
                [Price] => 32.00
            )
    )

[data] => Array
    (
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:04:48.613

```
$price = 0;
$result = false;
$array = array(1533, 2343, 2333);

foreach($order['items'] as $item){
  if(in_array($item['Item'], $array)){
     $result = true;
     $price += $item['Price'];
  }
}

if ($result)
{
    echo 'was true';
}
else
{
    echo 'was false';
} 
```

从技术上讲，您甚至不需要 $result 变量，因为如果 $price 大于 0，那么它当然是正确的，除非项目的价格是免费的 ($0)。

# php - 提交成功但上传在组合表单中不起作用

> ID：13872746
> 
> 赞同：9
> 
> 时间：2012-12-14T04:39:15.343
> 
> 标签：php, jquery, ajax, file-upload

在尝试将提交和上传结合在一个表单中时，我在上传时遇到了问题，但对于提交表单来说没问题。

jQuery + Ajax：

```
$("#oqcsubmit").click(function() {
    if($("#oqc").valid()) {
            var params=$("#oqc").serialize();
                $.ajax({
                    type:"post",
                        url:"doinput.php",
                        data:params,
                        cache :false,
                        async :false,
                        success : function() {
                            $(".dt").val("");
                                $(".stat").val("");
                                return this;
                                },
                        error : function() {
                            alert("Data failed to input.");
                                }
                        });
                 return false;
                 }
     });

<form id="oqc" enctype="multipart/form-data" >
    <input type="text" id="mod" name="mod" class="dt"/>
    <input type="text" id="no" name="no" class="dt"/>
    <input id="filename" name="uploadedfile" type="file" />
    <input type="submit" id="oqcsubmit" value="Submit" />
    <input type="hidden" name="action" value="oqcdata" />
</form> 
```

PHP：

```
$dbc=mysql_connect(_SRV,_ACCID,_PWD) or die(_ERROR15.": ".mysql_error());
$db=mysql_select_db("QPL",$dbc) or die(_ERROR17.": ".mysql_error());

$target_path = "data/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
//print_r($_FILES);
        if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
                echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded";
                }
        else{
                echo "There was an error uploading the file, please try again!";
                }

switch(postVar('action')) {
        case 'oqcdata' :
                oqcdata(postVar('mod'),postVar('no'));
                break;
        }

function oqcdata($mod,$no) {

        $Model          = mysql_real_escape_string($mod);
        $Serial         = mysql_real_escape_string($no);

//build query
  $sql = "INSERT INTO OQC (Model, Serial) VALUES ('".$Model."','".$Serial."')";
echo $sql;
$result=mysql_query($sql) or die(_ERROR26.": ".mysql_error());
echo $result;
mysql_close($dbc); 
```

如何在此页面中正确放置上传代码？所以两者都可以工作。目录权限：`chmod 777 data`

* * *

提交（不发送）后，文件留在表单中。 ![文件滞后](../Images/ce318ed4e205e982c17f6dc3b810e819.png)

* * *

更新

在切换之前移动上传代码后，我得到了这个错误：

```
PHP Notice:  Undefined index: uploadedfile 
```

这意味着表单不发送`uploadedfile`值。检查参数后没有`uploadedfile`包含。为什么会发生？甚至这个值也包含在表单中并使用`.serialize()`.

```
form data :
mod:KD-R321ED
no:177X1000          // where is the uploaded file value?
action:oqcdata 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:46:07.833

> ```
> PHP Notice:  Undefined index: uploadedfile 
> ```
> 
> 这意味着表单不发送上传的文件值。检查参数后没有包含上传的文件。为什么会发生？

您*不能通过 vanilla 跨浏览器 ajax 上传文件*，例如 jQuery 使用的文件。句号，句号，故事的结尾。

如果您*必须*在不刷新页面的情况下进行上传，常见的技巧是创建一个`iframe`表单并将其提交给它。另一个技巧是使用作为 HTML5 的一部分公开的实验性[File API 。](http://www.w3.org/TR/FileAPI/)自己处理这些可能会很*痛苦*，但是如果您想手动完成所有操作，它应该会很好。

我*强烈建议*为此使用第三方文件上传小部件。我对[Plupload](http://www.plupload.com/)很幸运，但有些人也推荐[Uploadify](http://www.uploadify.com/)。他们都可以选择使用 Flash 或 HTML5 后端来执行上传，这也为用户提供了一个快乐的小进度表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:39:04.647

您应该使用 XHR2 通过 AJAX 上传文件。

一个例子 ：

Javascript /客户端：

```
function upload() {
    var fileInput = document.getElementById('file_input_upload'); 
    var file = fileInput.files[0];        

    xhr = new XMLHttpRequest();

    xhr.open('post', 'upload.php', true);
    xhr.setRequestHeader("Content-Type", "application/octet-stream");
    xhr.setRequestHeader("Cache-Control", "no-cache");  
    xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");  
    xhr.setRequestHeader("X-File-Name", file.name);  
    xhr.setRequestHeader("X-File-Size", file.size);  
    xhr.setRequestHeader("X-File-Type", file.type);   
    xhr.send(file);
} 
```

HTML：

```
<input type="file" id="file_input_upload"/>
<div onmousedown="upload()">Upload my file</div> 
```

PHP/服务器端（upload.php）：

```
$file_name = $_SERVER['HTTP_X_FILE_NAME'];
$file_size = $_SERVER['HTTP_X_FILE_SIZE'];
file_put_contents(
            "data/" . $file_name, 
            file_get_contents("php://input")
        ); 
```

这是一个没有任何错误检查的简单示例。所以请不要将此代码用于生产用途。如果你想上传大文件（以 GB 为单位），你应该使用[webworkers](http://www.w3schools.com/html/html5_webworkers.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T03:57:28.067

更好的是使用简单的方法，使用单独的过程：

```
$("#oqcsubmit").click(function() {
    if($("#oqc").valid()) {
            var params=$("#oqc").serialize();
                $.ajax({
                    type:"post",
                        url:"doinput.php",
                        data:params,
                        cache :false,
                        async :false,
                        success : function() {
                            $(".dt").val("");
                                $(".stat").val("");
                                return this;
                                },
                        error : function() {
                            alert("Data failed to input.");
                                }
                        });
                 return false;
                 }
     });

<form id="oqc">
    <input type="text" id="mod" name="mod" class="dt"/>
    <input type="text" id="no" name="no" class="dt"/>
    <input type="submit" id="oqcsubmit" value="Submit" />
    <input type="hidden" name="action" value="oqcdata" />
</form>

<form enctype="multipart/form-data" action="uploader.php" method="POST"> 
    Upload File: <input id="filename" name="uploadedfile" type="file" />
    <input id="upload" type="submit" value="Upload File" style="display:none;"/>
</form> 
```

两者都可以正常工作，最好的方法是不要做复杂的方法，如果可以完成简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T10:29:50.907

您可以使用[Uploadify](http://www.uploadify.com/)来处理文件上传。它提供“ [onUploadSuccess](http://www.uploadify.com/documentation/uploadify/onuploadsuccess/) ”回调函数。从那里您可以获取上传的文件信息（文件名、路径等）。您可以使用该信息并更新表单中的隐藏输入字段。然后您可以访问服务器端的信息并对其进行操作。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T10:43:52.753

仅通过 $.ajax 发送文件输入数据是不可能的。我已经成功使用了 jQuery 表单插件[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)。它将任何表单包装到 AJAX 处理中，并添加了许多有用的回调选项。它还做了一些聪明的事情来处理文件上传。对于较旧的浏览器（不支持 XHR Level 2），可能会有一些非常小的额外的服务器端修改，但除此之外它可以开箱即用。

有关使用 jQuery 表单处理文件上传的特定文档，请参阅[http://malsup.com/jquery/form/#file-upload](http://malsup.com/jquery/form/#file-upload)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-19T06:54:59.463

通过 ajax 上传文件通过这个 url [ajax 文件上传](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)

# javascript - 在 jQuery 中，我如何使用一个按钮从一个表单转到下一个表单（即，像问卷一样）

> ID：13872747
> 
> 赞同：0
> 
> 时间：2012-12-14T04:39:19.010
> 
> 标签：javascript, jquery, html, forms

这是问卷开始时我的 HTML：

```
<form id="questionnaire">
  Question 1: Do you like dogs?<br>
  <input type="radio" name="answer" value="yes">Yes<br>
  <input type-"radio" name="answer" value="no">No<br>
  <input type="submit" value="Next Question" />
</form> 
```

到目前为止，这是我的 Javascript：

```
$(document).ready(function(){

    var q2 = 
      'Question 2: Do you like cats?
       <input type="radio" name="answer" value="yes">Yes<br>
       <input type-"radio" name="answer" value="no">No<br>
       <input type="submit" value="Next Question" />'

      $('#questionnaire').submit(function(){
        $('#questionnaire').html(q2); // This puts the Question 2 HTML into the form
        return false;
      });

    var q3 = 
      'Question 3: Do you like bunnies?
       <input type="radio" name="answer" value="yes">Yes<br>
       <input type-"radio" name="answer" value="no">No<br>
       <input type="submit" value="Next Question" />'
}); 
```

我要编写什么样的函数，以便在问题 2 加载后，单击“下一个问题”按钮导致问题 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:49:06.890

这是一种方法：http: [//jsfiddle.net/zXM74/2/](http://jsfiddle.net/zXM74/2/)

```
var questions = {
    2: 'Question 2: Do you like cats?' +
       '<input type="radio" name="answer" value="yes">Yes<br>' +
       '<input type="radio" name="answer" value="no">No<br>',
    3: 'Question 3: Do you like bunnies?' +
       '<input type="radio" name="answer" value="yes">Yes<br>' +
       '<input type="radio" name="answer" value="no">No<br>'
    };

var current_question = 1;

$('#questionnaire').submit(function(){
    current_question++;
    $('#questionnaire #question').html(questions[current_question]);
    return false;
});​ 
```

您保留一个存储当前问题的变量，使用该变量索引对象或数组以获取要显示的正确问题，并在按下按钮时递增该变量。

还需要对您的 HTML 进行少量更改，以将实际问题包含在自己的 div 中，与提交按钮分开：

```
<form id="questionnaire">
  <div id="question">
      Question 1: Do you like dogs?<br>
      <input type="radio" name="answer" value="yes">Yes<br>
      <input type="radio" name="answer" value="no">No<br>
  </div>
  <input type="submit" value="Next Question" />
</form>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:50:12.170

[小提琴](http://jsfiddle.net/Schlogen/Lk8Mh/)

Javascript：

```
 var questions = ['Question 1: Do you like dogs?<br><input type="radio" name="answer" value="yes">Yes<br><input type-"radio" name="answer" value="no">No<br><input type="submit" value="Next Question" />', 'Question 2: Do you like cats?<input type="radio" name="answer" value="yes">Yes<br><input type-"radio" name="answer" value="no">No<br><input type="submit" value="Next Question" />','Question 3: Do you like bunnies?<input type="radio" name="answer" value="yes">Yes<br><input type-"radio" name="answer" value="no">No<br><input type="submit" value="Next Question" />'];

$('#questionnaire').html(questions[0]);
var currIdx = 0;

$(document).ready(function(){

      $('#questionnaire').submit(function(){
        currIdx++;
        $('#questionnaire').html(questions[currIdx]); // This puts the Question 2 HTML into the form
        return false;
      });

});​ 
```

HTML：

```
<form id="questionnaire">

</form>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:50:12.710

我会把你所有的问题放在 HTML 中，分成不同的 DIV。每个 DIV 都应该有一个唯一的 id。只有第一个问题会显示，其余的会被隐藏。

您可以将下一个问题的 id 放入上一个问题的提交输入中，就像这样......

```
<input id="2" type="submit" value="Next Question" /> 
```

创建一个委托以捕获单击提交按钮、捕获 id、隐藏问题`id-1`、显示问题`id`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-21T05:34:33.033

```
<script>
    var mark = 0;
    var currIdx = -1;
    var result = "1/";

    var quest = [
        {
            ID: 1,
            question: "Who is CEO?",
            options: [
                {
                    optionID: 1,
                    optionText: "Bill Gate"
                },
                {
                    optionID: 2,
                    optionText: "Thomas"
                },
                {
                    optionID: 3,
                    optionText: "Lexthur"
                }
            ],
            ans: 3
        },
        {
            ID: 2,
            question: "Hardest language in programming",
            options: [
                {
                    optionID: 1,
                    optionText: "C++"
                },
                {
                    optionID: 2,
                    optionText: "Java"
                },
                {
                    optionID: 3,
                    optionText: "PHP"
                },
                {
                    optionID: 4,
                    optionText: "C#"
                }
            ],
            ans: 2
        },
        {
            ID: 3,
            question: "Who is Cutest in the world",
            options: [
                {
                    optionID: 1,
                    optionText: "Davika"
                },
                {
                    optionID: 2,
                    optionText: "TTHZ"
                },
                {
                    optionID: 3,
                    optionText: "Su Su"
                },
                {
                    optionID: 4,
                    optionText: "Aye Kaung"
                }
            ],
            ans: 2
        },
        {
            ID: 4,
            question: "What is the meaining of GG",
            options: [
                {
                    optionID: 1,
                    optionText: "Good Game!"
                },
                {
                    optionID: 2,
                    optionText: "Gammer Gain"
                },
                {
                    optionID: 3,
                    optionText: "Noob Gamer"
                },
                {
                    optionID: 4,
                    optionText: "Well played"
                }
            ],
            ans: 1
        },
    ]

    // $('#questionnaire').html(quest[0]);

    $(document).ready(function () {

        $('#submit').click(function () {
            currIdx++;
            $('#questionnaire').html(quest[currIdx].question);

            var optionhtml = "";

            for (var i = 0; i < quest[currIdx].options.length; i++) {
                optionhtml += "<input type='radio' name='option'" + quest[currIdx].options[i].optionID + "'/>" + quest[currIdx].options[i].optionText + "<br/>";
                $('.form-check').html(optionhtml);

            }

            return false;
        });

    });

</script> 
```

# java - 在 JSP 中显示文件系统存储的图像

> ID：13872748
> 
> 赞同：0
> 
> 时间：2012-12-14T04:39:21.367
> 
> 标签：java, image, spring, jsp, tomcat

我正在尝试在我的 web 应用程序之外显示存储在本地文件系统中的图像。以下问题：[在 Java Web 应用程序中从应用程序服务器外部提供静态数据的最简单方法](https://stackoverflow.com/questions/1812244/simplest-way-to-serve-static-data-from-outside-the-application-server-in-a-java)

**编辑：** *我希望文件位于 webapp 之外，因为这些图像是由用户上传的，如果我将它们放在 webapp 中，我可能会在重新部署 web 应用程序时丢失它们*

但该文件未显示在网页上。当我尝试通过以下方式打开文件时：localhost:8080/images/imageName.jpg 它给了我一个资源不可用的错误。

我在 server.xml 中添加了上下文（遍历 Servers->Config->server.xml）：

```
 ........
 <Context docBase="DMSystemV1.0" path="/DMSystemV1.0" reloadable="true" source="org.eclipse.jst.jee.server:DMSystemV1.0"/>
      <Context docBase="/Projects/SpringExample/Images" path="/images"/>
      </Host> 
```

我的 web.xml 也是这样的：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
   </servlet-mapping>
   <servlet>
    <servlet-name>DMSystem</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>DMSystem</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping> 
```

我希望它显示的地方：`<img src="/images/${imagePath}" alt="Item's image">`

Mytomcat 在：F:\Software\Servers\tomcat7\tomcat7 而镜像文件夹在：F:\Projects\SpringExample\Images

图像路径是相对于 tomcat 文件夹获取的吗？

另外，现在写我正在对上传路径（在我的上传 servlet 中）和 server.xml 中的下载路径进行硬编码，有没有办法将它们作为配置或设置信息提供？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:49:27.153

最简单的解决方案是复制图像并将其提供给您的网络应用根目录。但是，如果此解决方案由于某种原因不适合您，您始终可以创建一个 servlet 来“代理”您的图像：

创建一个 servlet，将其映射到一个路径，例如：

```
<servlet-mapping>
  <servlet-name>imageProxyServlet</servlet-name>
  <url-pattern>/imagesproxy/*</url-pattern>
</servlet-mapping> 
```

然后在你的servlet类上，做一个文件IO来读取你的图片，然后把它写到响应中。不要忘记设置适当的内容类型，并使用缓冲的读/写来避免在图像很大的情况下占用你的内存。

然后您可以将您的图像作为[http://mydomain.com/myapp/imagesproxy/something.jpg](http://mydomain.com/myapp/imagesproxy/something.jpg)提供。对该 URL 的请求将被分派到图像代理 servlet

# android - 在android中限制galleryview的滚动

> ID：13872749
> 
> 赞同：0
> 
> 时间：2012-12-14T04:39:39.733
> 
> 标签：android, gallery

在我的应用程序中，我使用“galleryview”来显示一些图像。一切正常，但如果我到达最后一项意味着滚动应该停止，但它正在滚动到屏幕的最左边。

我的galleryview布局参数代码：

```
DisplayMetrics metrics = new DisplayMetrics(); 
       getWindowManager().getDefaultDisplay().getMetrics(metrics); 
       MarginLayoutParams mlp = (MarginLayoutParams) gal.getLayoutParams(); 
       mlp.setMargins(-(metrics.widthPixels/2+90),mlp.topMargin,mlp.rightMargin, mlp.bottomMargin ); 
```

请帮助我..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:17:44.900

我在实现画廊视图时没有发现任何问题。因为当滚动条滚动到最后一个拇指时，它实际上到达了屏幕的中心，而不是最左边的边缘。**证明：**[在这里](http://mobile.tutsplus.com/tutorials/android/android-sdk-displaying-images-with-an-enhanced-gallery/)如果您可以通过编辑问题来发布您的代码，则可能有机会根据您的要求编辑我的答案。甚至你也可以看看这个很好的[例子](http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/)。如果你还想根据你的要求改变滚动，你可以看看[这个](https://stackoverflow.com/questions/4687370/gallery-scroll-one-image-at-a-time)，虽然我没有用它来改变默认的滚动功能。即使是 altaf 提供的上述链接也可能对您有所帮助。

# java - JavaMailSenderImpl 与 Google 应用邮件

> ID：13872751
> 
> 赞同：0
> 
> 时间：2012-12-14T04:39:41.940
> 
> 标签：java, spring, jakarta-mail

我正在尝试使用[JavaMailSenderImpl](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/mail/javamail/JavaMailSenderImpl.html)从我的 Spring应用程序发送电子邮件，并为我的域配置了 Google App 邮件。

这是配置

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="smtp.gmail.com" />
    <property name="username" value="${app.mail.id}" />
    <property name="password" value="${app.mail.password}" />
    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
        </props>
    </property>
</bean> 
```

我的电子邮件 ID 为`myid@mydomain.com`. 没有抛出异常，我可以在已发送的项目中找到这些邮件。但是这些邮件永远不会送达。任何人都知道为什么会发生这种情况？任何帮助将不胜感激。

顺便说一句，当我使用 app.mail.id = myid@gmail.com 而不是 myid@mydomain.com 时，它工作正常。如果我直接从邮箱发送，这些邮件就会送达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:43:52.317

解决了。我认为问题在于 MX 记录中的更改没有得到反映。现在它工作正常。

# httpurlconnection - HttpUrlConnection 需要 2 分钟的超时时间

> ID：13872755
> 
> 赞同：3
> 
> 时间：2012-12-14T04:40:28.140
> 
> 标签：httpurlconnection, connection-timeout

每当 URL 尝试加载时，它所花费的时间大于连接超时中设置的时间，但将连接超时设置为 20 秒不起作用，它只会在 2 分钟后发生，无论连接时间中设置的时间如何出来，服务器连接超时需要 2 分钟。

```
URL urlConnect = new URL(url.toString());
HttpURLConnection urlc = (HttpURLConnection) urlConnect.openConnection();
urlc.setDoInput(true);
urlc.setConnectTimeout(1000 * 20); // Timeout is in MILLI seconds
urlc.connect(); 
```

或者 2 分钟是否是超时的默认值？如何将超时设置为正好 20 秒。它没有任何重定向网址或任何纯网址。为什么连接超时需要 2 分钟？

# javascript - 提交表单后，HTML/Javascript 页面正在重置

> ID：13872761
> 
> 赞同：0
> 
> 时间：2012-12-14T04:40:43.133
> 
> 标签：javascript, html, xhtml

我正在学习使用 HTML 和 Javascript 制作表单。当我去提交我的表单时，它会处理它，我可以看到结果，但是页面会快速重置，以便表单恢复到其起始状态。如何确保功能完成后页面不会重置？

这是表单的 HTML 和处理它的函数：

```
<form name="calculator" onsubmit="return calculate(this);">
            Enter the value of the house: $
            <input type="text" name="homeValue" id="homeValue" size="7" /><br>
            <select name="selMortgage" id="selMortgage">
                <option>Select a mortgage length</option>
                <option>15-year mortgage</option>
                <option>30-year mortgage</option>
            </select></br>
            <p class="form"><input type="checkbox" name="chkDiscount" value="discount"/>Good Credit Discount?</p>
            <input type="submit" value="Calculate" />
            <div id="result"></div>
</form>

function calculate(form) {
    var amountEntered = form.homeValue.value;
    var termLength;
    var interestRate;
    var calc;
    document.getElementById("result").innerHTML = "hi";
    if (!/^\d+(\.\d{1,2})?$/.test(amountEntered))
    {
        alert("You did not enter an amount of money");
        //form.homeValue.focus();
        return;
    }
    if (form.chkDiscount.checked == true)
    {
        interestRate = .05;
    }
    else
    {
        interestRate = .06;
    }
    if (form.selMortgage.selectedIndex == 0)
    {
        alert("Select a mortgage length");
    }
    else if (form.selMortgage.selectedIndex == 1)
    {
        termLength = 15;
    }
    else if (form.selMortgage.selectedIndex == 2)
    {
        termLength = 30;
    }
    calc = (Math.pow(1+interestRate,termLength) * amountEntered)/(termLength*12);
    document.getElementById("result").innerHTML = calc.toFixed(2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T04:54:09.063

看起来你缺少一个`return false.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:46:49.307

由于您正在提交表单，因此由于页面重新加载而导致值丢失。您可以尝试发布您的值，然后在您的表单元素上分配发布值，这样即使刷新后您仍然能够看到提交的 POST 数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T04:52:40.800

尝试这个：

只需`return false;`在您的 javascript 函数末尾使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T04:50:36.997

提交表单时，会调用 JS 函数calculate。由于该函数不返回任何值，因此将假定为 undefined。而在 JS 中，未定义将被假定为空，表单将被提交到服务器并再次重新加载。这就是您丢失数据的原因。从您的代码中，页面只执行一些 JS 代码。因此，我们可以阻止提交表单以保留您的数据。您可能需要在计算函数中返回 false 以防止提交。示例如下：

document.getElementById("result").innerHTML = calc.toFixed(2); 返回假；

# android - 发送短信时没有调用 ContentObserver 的 Onchange 方法

> ID：13872767
> 
> 赞同：1
> 
> 时间：2012-12-14T04:41:16.620
> 
> 标签：android, android-service, android-contentresolver

我已经用发送消息的观察者定义了以下服务。问题是发送消息时，没有调用 onChange() 方法，请告诉我为什么？

谢谢

```
public class countService extends Service {

    ContentResolver contentResolver;

    MyContentObserver Observer;

    Uri sms_content = Uri.parse("content://sms/sent");

    public Cursor cursor;

    @Override
    public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    contentResolver = getBaseContext().getContentResolver();
    Observer = new MyContentObserver();
    contentResolver.registerContentObserver(sms_content, true, Observer);
    super.onCreate();

}

private class MyContentObserver extends ContentObserver {

    public MyContentObserver() {
        super(null);
    }   

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        Log.d("BOOOOOOOOOOOOOOOOOO", "c");
        Cursor cursor = contentResolver.query(sms_content, null, null,
                null, null);
        cursor.moveToFirst();
        String type = cursor.getString(cursor.getColumnIndex("type"));
        Log.d("THEMESSAGE", type);

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:03:24.027

要注册`ContentObserver`发送/接收短信，您需要注册 ContentObserver ，`"content://sms"`而不是`"content://sms/sent"`将获取传入或传出短信的逻辑放在以下`onChange`方法中`ContentObserver`：

将您的服务更改`onCreate()`为：

```
@Override
public void onCreate() {
// TODO Auto-generated method stub
contentResolver = getBaseContext().getContentResolver();
Observer = new MyContentObserver();
contentResolver.registerContentObserver(
                  Uri.parse("content://sms"),true, Observer);
super.onCreate();

} 
```

在 MyContentObserver 中，`ContentObserver`您可以检查发送/接收的 SMS 并确保您已在 Manifast 添加 SMS 读取权限：

```
<uses-permission android:name="android.permission.READ_SMS"/> 
```

# jquery - 如何根据鼠标悬停移动 qtip 提示

> ID：13872768
> 
> 赞同：0
> 
> 时间：2012-12-14T04:41:22.400
> 
> 标签：jquery

我正在使用 qtip 作为工具提示，并根据光标移动了工具提示。我应该调用函数来动态地将箭头指针从左向右移动，然后从右向左移动。锄头我会在鼠标移动时将尖端左侧位置从 10% 更改为 95%。

```
jQuery('.fire-object a img').each(function() {
                jQuery(this).qtip({
                    // within an each() loop, $(this) refers to the trigger
                    content: jQuery(this).attr('title'),
                    style: { 
                          width: 110,
                          padding: 5,
                          background: '#FFFFFF',
                          color: 'black',
                          textAlign: 'center',
                          border: {
                             width: 7,
                             radius: 5,
                             color: '#FFFFFF'
                          },
                          tip: 'bottomLeft',
                          name: 'dark' // Inherit the rest of the attributes from the preset dark style
                     },
                    position: {
                            my: 'left top',
                            target: 'mouse',
                            viewport: $(window), // Keep it on-screen at all times if possible
                            adjust: {
                                x: 10,  y: 10
                            }
                         },
                    hide: {
                        fixed: true // Helps to prevent the tooltip from hiding ocassionally when tracking!
                    }
                });
                }); 
```

[示例](http://craigsworks.com/projects/qtip/demos/effects/multitooltip) 有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:49:43.070

qTip2 出来了。特点：[鼠标跟踪](http://craigsworks.com/projects/qtip2/demos/#mouse)

# javascript - 无法正确更新 ajax 响应的 Flot 图

> ID：13872771
> 
> 赞同：0
> 
> 时间：2012-12-14T04:41:47.573
> 
> 标签：javascript, jquery, flot, graphing

我有一个在页面加载时正确生成的图表。该代码是：

```
<body>
<div id="placeholder" style="width:800px;height:400px;"></div>

<script type="text/javascript">
$(function () {
    $.plot($("#placeholder"),
[ { data: %s } ],
{ xaxes: [ { mode: 'time' } ],
  yaxes: [  ] })
});
</script> 
```

哪个工作正常。我有一个执行 jquery 并请求获取新的 json 数据结构的按钮。我已经验证返回的 json 确实是正确的 json。我试图用以下方式绘制结果：

```
<script type="text/javascript">
$(function() {
      $("#button").click( function()
           {
             //alert('button clicked');
             $.ajax({
                url:  '/graph',
                type: 'POST', 
                dataType: 'html',
                data: {
                    start_date: $('#start_date').val(),
                    end_date  : $('#end_date').val(),
                    ticker    : $('#ticker').val()
                },
                success: function(result) {
                var placeholder = $("#placeholder");
                $.plot(placeholder,
                  [ { data: result } ], 
                    { xaxes: [ { mode: 'time' } ],
                      yaxes: [  ] });  
             }
            });
          }
      );
}); 
```

它重绘了图形，但它是空的，y 轴是默认的 -1.0 到 1.0，x 轴是 00:00:00 的单个时间条目。

我尝试使用 setData() 和 draw() 方法调用，但它们不能解决问题。

如萤火虫所示，没有抛出 javascript 错误。那么，我做错了什么？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:59:51.963

您确定回复有效吗？您的 dataType 是“html”，因此除非您使用脚本标签做某事，否则响应只是一个字符串。如果您直接返回 JSON，那么您需要使用 dataType 'json'。

# android - Android：具有不同alpha值的嵌套线性布局

> ID：13872773
> 
> 赞同：4
> 
> 时间：2012-12-14T04:41:51.297
> 
> 标签：android, layout, opacity, alpha

我有一个矩形 LinearLayout，它有一些边距、一些圆角和 0.3 的 alpha 值。在这个布局中，我有 4 种不同的布局，因为我在不同的位置显示不同的图像。

我的问题是，虽然主要布局是 0.3，但我希望我的孩子完全可见，或者不受其父 alpha 的影响，我想知道我该怎么做？我尝试在子布局上设置 alpha=1 但它不起作用。将其设置为 0 确实会使子布局消失，所以看起来我可以减少到 0.3 以下，但不能超过父级。请问这是一个错误还是我做错了？

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T04:45:29.383

我真的想通了！颜色是 AARRGGBB，所以修改 alpha 通道 (AA) 只会影响当前背景，而不影响子元素！如果有其他解决方案，我很高兴听到它。谢谢！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-19T23:09:23.263

您可以使用[此](https://stackoverflow.com/a/5153891/909497)解决方案解决您的问题。它工作完美。

```
parentView.getBackground().setAlpha(128); //your parent view's visibility is now %50 and child view's visibility remains same. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-14T21:40:46.580

为了防止子视图受到其父背景的影响...

真相：非 alpha-255 的“颜色”实际上并不是一种颜色——它只是一种色调！

因此：子视图背景的感知外观是： （a）当该颜色具有 alpha-255 时由*child.setBackgroundColor()*
指定的确切颜色或： (b) *child.setBackgroundColor()*和父背景的组合否则。

 **因此，要完全控制子背景（完全不考虑父背景），您必须构建第三种颜色，它将是您选择的色调和您选择的 alpha-255 背景的复合颜色。

你**必须**提名一个背景！（根据定义，只能在背景上渲染色调。如果没有明确指定，主题背景最终将发挥作用。）

这段代码花了几个月的时间才找到，并给出了完美的结果。

```
childView.setBackgroundColor(ColorUtils.compositeColors(yourTint, yourBackground); 
```

[在此处](https://stackoverflow.com/questions/41579456/ignore-parent-view-background)查看我对自己问题的回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-10T11:12:27.383

如果您只想将 alpha 设置为父父布局并且不希望将其转换为它的子视图。使用添加了透明度代码的十六进制颜色。

例如，假设您的 Linearlayout 的背景颜色是#FF0022，并且您想将其不透明度设置为 82%，然后将 D1 添加到您的十六进制代码并使用 #D1FF0022 十六进制代码作为您的视图组背景，其中 D1 是不透明度为 82 的参数%

透明度代码的完整列表可以在[这里找到](https://gist.github.com/lopspower/03fb1cc0ac9f32ef38f4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-28T03:59:50.753

这可能是迟到的答案

但是试试下面的代码，我希望你能得到你需要的

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/aa"    //Your own Image in root element
android:orientation="vertical" >

  <RelativeLayout
    android:id="@+id/RLMain"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#CCFFFFFF" >   //Your Alpha Value

    <ImageView
        android:id="@+id/iv1"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="86dp"
        android:src="#FF0000" />        //Your Child Image

</RelativeLayout> 
```**

# flash - Google App Engine 上的 Flash 游戏崩溃（其中一些）

> ID：13872776
> 
> 赞同：1
> 
> 时间：2012-12-14T04:42:10.677
> 
> 标签：flash, google-app-engine, crash

我的一些 Flash 游戏无法在我的 Google App Engine 应用程序上正常运行，我遇到了一些问题。其中一个每次都会崩溃，另一个则停止工作，但是，当相同版本的 Flash 游戏在具有相同 Flash 嵌入标签的普通 Web 托管服务（非 GAE）上运行时，不会发生这些问题。

我网站上的游戏在 Google App Engine 上运行并崩溃，但在标准托管服务器上运行时运行良好。 [http://www.eeriegames.com/play-game/the-breach](http://www.eeriegames.com/play-game/the-breach)

我网站上的游戏在 Google App Engine 上运行，但在标准网络托管服务器上运行时无法正常运行。 [http://www.eeriegames.com/play-game/yan-loong-legend-3-double-swallow](http://www.eeriegames.com/play-game/yan-loong-legend-3-double-swallow)

非常感谢您的帮助。我尝试添加 crossdomain.xml 策略文件并使用各种参数更改嵌入标签，但它们都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:20:13.400

我刚刚点击了你关于 The Breach 的 eeriegames 链接，但它没有运行（Windows 7 PC、IE9、Flash Player 11.5）——我得到了“内存不足”感叹号图标。所以我想知道这是否与内存设置或类似情况有关。
话虽如此，我认为无论出于何种原因，当播放器死亡时都会出现 OOM 图标......当我下载它并在外部 Flash Player 中运行它时，你的 SWF 工作正常 - 但是当我尝试在 Adob​​e 的 SWF 调查器中查看它时它给了我一些解析错误。所以我在想也许 SWF 以某种方式损坏了。你用什么编译它？看起来 Flex 3 .. 可能值得使用更新的东西？
不太清楚为什么这会在一个系统上工作而不是另一个系统，或者为什么我在使用你的网络服务器时得到 OOM 图标而对你来说这很好。您是否还检查了全局 Flash 设置以确保两个站点的可信路径、本地存储等都设置相同？
我的建议是尝试让 SWF 进行编译，这样在使用反编译器查看它时不会出现任何解析错误，然后看看是否还有问题。
希望有帮助！
安德鲁

# extjs - Extjs：有什么方法可以更改我为组件指定的属性的默认值？

> ID：13872777
> 
> 赞同：0
> 
> 时间：2012-12-14T04:42:29.957
> 
> 标签：extjs, default

我想将页面中所有字段组件的“labelAlign”更改为“right”。

现在，我必须将下面的默认配置添加到页面中的所有面板来实现它。

```
 defaults:
    {
        labelAlign: 'right',
        labelSeparator: "："
    } 
```

是否有任何一次代码方法来更改我为页面中所有 extjs 组件指定的属性的默认值？

感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:11:09.090

在视图的最高级别容器中设置默认值应该将该配置应用于尚未设置值的任何子项。如果一个或多个子项（字段组件）已经有一个 labelAlign 配置，那么您可以尝试这样做：

```
allYourFields = Ext.ComponentQuery.query('textfield');
Ext.forEach(allYourFields, function(field){
    field.labelAlign = 'right';
}); 
```

# drupal-7 - ubercart uc_cart_add_item 段故障 11

> ID：13872778
> 
> 赞同：1
> 
> 时间：2012-12-14T04:42:49.130
> 
> 标签：drupal-7, ubercart

> [http://api.drupalize.me/api/drupal/function/uc_cart_add_item/7](http://api.drupalize.me/api/drupal/function/uc_cart_add_item/7)

当我在我的模块中使用函数 uc_cart_add_item 时，我得到了 segmentfault 11，但是当我在带有 php-filter 的页面中使用这个函数时，它没有任何问题。请有任何线索..

```
$regular_count = 2;
if($regular_count > 1) {
  if($discount_exist == FALSE) {
            $data = array("module" => "uc_product");
            $nid = 304;
            $qty = 1;
            uc_cart_add_item($nid, $qty, $data , NULL, TRUE, TRUE,  TRUE);
  }
} 
```

当我在启用了 php-filter 的 create-page 中使用它时，它可以完美地工作，仅供我测试；

但是当我在自己的模块中使用它时，我得到了 segmentfault 11 那是唯一的错误。

我错过了什么吗？像 module_load_include 或 require_once？

谢谢你。

# jsf - 嵌套的 JSF 复合组件与 Primefaces 不完全兼容

> ID：13872779
> 
> 赞同：1
> 
> 时间：2012-12-14T04:43:02.023
> 
> 标签：jsf, primefaces, composite-component

我正在尝试创建一个嵌套在 Primefaces Accordion 控件中的 JSF 复合控件。但是，当将选项卡组件放置在嵌套组件中时，它们根本不会渲染。

外部组件.xhtml

```
<composite:interface/>
<composite:implementation>
    <p:accordionPanel>
        <composite:insertChildren/>
    </p:accordionPanel>
</composite:implementation> 
```

内部组件.xhtml

```
<composite:interface>
    <composite:attribute name="title" type="java.lang.String"/>
</composite:interface>
<composite:implementation>
    <p:tab id="#{cc.attrs.title}" title="#{cc.attrs.title}">
        Some content
    </p:tab>
</composite:implementation> 
```

测试页.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:w="http://java.sun.com/jsf/composite/wizard"
     xmlns:p="http://primefaces.org/ui">

   <h:head>

   </h:head>
   <h:body>

      <w:outerComponent>
         <w:innerComponent title="tab1"/>
      </w:outerComponent>

   </h:body>
</html> 
```

HTML 输出：

```
<html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" 
rel="stylesheet" href="/iip/javax.faces.resource/theme.css.xhtml?ln=primefaces-
aristo-custom" /><link type="text/css" rel="stylesheet" href="/iip/
javax.faces.resource/primefaces.css.xhtml?ln=primefaces" /><script type="text/
javascript" src="/iip/javax.faces.resource/jquery/jquery.js.xhtml?
ln=primefaces"></script><script type="text/javascript" src="/iip/
javax.faces.resource/primefaces.js.xhtml?ln=primefaces"></script></head>

<body>

<div id="j_idt7:j_idt10" class="ui-accordion ui-widget ui-helper-reset ui-hidden-
container" role="tablist"><input type="hidden" id="j_idt7:j_idt10_active" 
name="j_idt7:j_idt10_active" value="0" /></div>

<script id="j_idt7:j_idt10_s" type="text/
javascript">PrimeFaces.cw('AccordionPanel','widget_j_idt7_j_idt10',
{id:'j_idt7:j_idt10'});</script>

</body</html> 
```

当它运行时没有错误，并且在呈现 Accordion div 时，选项卡没有。但是，如果我将`<p:tab>`标签移动到`outerComponent.xhtml`文件中，那么它们会正确呈现，但这不是我所需要的。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:41:17.930

`<p:dataTable>`像, `<p:tabView>`,等这样的迭代组件`<p:accordionPanel>`不能将组合作为*直接*子代。他们应该有完全有价值的`<p:column>`或`<p:tab>`组件作为直接的孩子。在视图渲染期间进行迭代时，它们会遍历子节点并在渲染之前对它们进行`instanceof UIColumn`或`instanceof Tab`检查。如果它失败（复合是`NamingContainer`），那么它将被完全忽略。这是“设计使然”。

您最好的选择是使用标记文件而不是复合组件作为迭代组件的子组件。

请注意，这不是 PrimeFaces 特有的。标准`<h:dataTable>`有完全相同的问题。

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)
*   [如何为数据表列创建复合组件？](https://stackoverflow.com/questions/11439886/how-to-create-a-composite-component-for-a-datatable-column)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:20:03.430

您是否尝试在没有复合的情况下执行此操作 - 我的意思是将它们全部放在 testPage.xhtml 中。我没有尝试过这种特定的组合，但我在标签和手风琴与其他组件的组合方面遇到了问题。检查问题是否出在复合材料或组件组合中。

似乎有些 javascript 彼此“不兼容”。

如果您仍然有问题，您可以尝试封装选项卡。我尝试了不同的组合，似乎有些组合正在起作用，具体取决于导致问题的组件。我会先尝试使用选项卡，如果它不起作用`<div id="tabContainer">`，最终会转到。`p:panel`

# mysql - 如何在 Hibernate 中为使用外键列的 where 子句编写更新查询？

> ID：13872780
> 
> 赞同：2
> 
> 时间：2012-12-14T04:43:01.383
> 
> 标签：mysql, database, hibernate

当我在休眠中编写更新查询时。我收到这个错误。我正在使用 Hibernate 3.2 和 MySQL 5.0。在 UserDetails.java 中，Login 是外键引用 Login.java 的主键 (loginId)。

```
java.lang.NullPointerException
    at org.hibernate.hql.ast.util.SessionFactoryHelper.findSQLFunction(SessionFactoryHelper.java:342)
    at org.hibernate.hql.ast.tree.IdentNode.getDataType(IdentNode.java:266)
    at org.hibernate.hql.ast.tree.BinaryLogicOperatorNode.extractDataType(BinaryLogicOperatorNode.java:168)
    at org.hibernate.hql.ast.tree.BinaryLogicOperatorNode.initialize(BinaryLogicOperatorNode.java:34)
    at org.hibernate.hql.ast.HqlSqlWalker.prepareLogicOperator(HqlSqlWalker.java:1007)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:3992)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1762)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:776)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.updateStatement(HqlSqlBaseWalker.java:358)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:237)
    at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228)
    at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160)
    at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
    at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
    at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
    at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623) 
```

这是服务类

```
 Date birthDay = formatter1.parse(brthDay);
        session = HibernateUtil.getSession();
        transaction = session.beginTransaction();
        Login login = (Login) session.get(Login.class, loginId);
        Query query2 = session.createQuery("update UserDetails set name=:Name, secEmailId=:SecEmailId, dob=:DOB, gender=:Gender  where Login=:LoginId");
        query2.setString("Name", name);
        query2.setString("SecEmailId", secEmailId);
        query2.setDate("DOB", birthDay);
        query2.setString("Gender", gender);
        query2.setParameter("LoginId", login);
        profileUpdated = query2.executeUpdate(); 
```

这是 UserDetails.java pojo 类

```
private Long udid;
private Login login;
private String name;
private String secEmailId;
private Date dob;
private String gender;
private long createrId;
private Date createdDate;
private long updaterId;
private Date updatedDate;
settes & getters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-20T19:19:09.520

您的实体中只有登录对象。调用外键必须是（整数或整数）才能放入 HQL。而且您不能将外键称为 login.getId() 因为 hibernate 不允许在 HQL 中使用括号。使用 Integer 的目的是可以将其设置为 null。

```
private Login login; 
```

您必须引用您的实体，但不想从数据库中加载它而只是为了获取外键，请使用此方法。但是您需要在 @Column 属性中添加 "insertable"=false 和 "updatable"=false 以防止丢失对实体的正确引用。也许，这是您的 UserDetails 类。

```
@Entity
public class UserDetails {

    //Other attributes, id, phNo, address, etc..

    @Column(name = "full_name")
    private String name;

    @OneToMany(cascade = CascadeType.ALL) //Relationship is up to you.
    @JoinColumn(name = "login_id")
    private Login login; //This is object.

    @Column(name = "login_id", insertable = false, updatable = false)
    private Integer fkLoginId; //Here is your foreign key.

    //getter and setters.
} 
```

这不会在数据库中生成另一列，因为它无法插入或更新，它只是引用了一个列。之后，您将 fkLoginId 作为外键并像这样使用 HQL 更新您的 UserDetails。

```
String name = "Updated Name";
int id = 1;

session = HibernateUtil.getSession(); //Consider declared
transaction = session.beginTransaction();
Login login = (Login) session.get(Login.class, loginId);
String hql = "update UserDetails set name=:Name where fkLoginId=:Id"; //<---Ans
Query query = session.createQuery(hql);
query.setParameter("Name", name);
query.setParameter("Id", id);
int result = query.executeUpdate();
transaction.commit();
session.close(); 
```

希望能帮助到你。

# c++ - 我有一个构造函数，但我需要将输出返回给 main.cpp。我不能使用getstring函数！！任何想法如何做到这一点？

> ID：13872781
> 
> 赞同：-1
> 
> 时间：2012-12-14T04:43:05.097
> 
> 标签：c++, string

```
 CXMLString::CXMLString (string content, string tag)
               {
                    ostringstream convert;
                string result;
                result << "<" << tag << ">" << content << "</" << tag << ">";
                cout << result;
               } 
```

这是我卡住的任务！！！

通过连接先前创建的元素来创建多行元素。

```
string structure = "\n\t" + myXMLString1 + "\n\t" + myXMLString2+"\n";
CXMLString myXMLString3(structure,"structure"); 
```

Konnen sie helfen bitte!!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:16:43.330

由于这应该是一个构造函数，因此您可以使用如下调用实例化新的 CXMLString 成员：

CXMLString myCxml(内容，标签);

在不知道课程详情的情况下，我们无法回答。但通常你用传入的参数填充一些成员（私有？）数据成员。通过“将输出返回到 main.cpp”，您指的是下面的这种用例吗？

```
 int main(){
     CXMLString myCxml("MYContent", "content");

     cout << myCxml; 
```

如果这是您要查找的内容，则需要为此类重载运算符 <<。它将将从构造函数填充的内部数据成员打印到输出输入的任何流中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:53:52.797

我假设您正在尝试在 C++ 中执行此操作，即使它没有指定。

如果是 C++，您可以在构造函数中添加另一个参数 [假设您可以随意修改 CXMLString 类]

`CXMLString::CXMLString (string content, string tag, string& Result)`

然后，您可以将组合字符串分配给 Result 并在创建 CXMLString 对象时获取它的值。

# android - 如何在 Android 中恢复文件上传过程？

> ID：13872784
> 
> 赞同：6
> 
> 时间：2012-12-14T04:43:49.637
> 
> 标签：android, network-programming

我正在使用此代码在服务器上上传文件，但我想要这样的功能：如果它由于丢失网络或过程中的任何其他中断而停止，那么它不应该从第二次开始上传。服务器的响应也是可定制的。安卓有可能吗？我应该使用什么方法来做到这一点？请指导我。如果可能的话，请向我推荐任何示例代码。

谢谢！

```
public String uploadFile(InputStream is) {
    HttpURLConnection conn;
    String jsonResponse = "";
    int streamSize = 0;
    DataOutputStream dos = null;
    DataInputStream inStream = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesAvailable, bufferSize;
    byte[] buffer;

    String urlString = "*******<My URL>*******";
    try {
        // ------------------ CLIENT REQUEST
        // FileInputStream fileInputStream = new FileInputStream(new
        // File(selectedPath) );

        // open a URL connection to the Servlet

        URL url = new URL(urlString);
        // Open a HTTP connection to the URL
        conn = (HttpURLConnection) url.openConnection();
        // Allow Inputs
        conn.setDoInput(true);
        // Allow Outputs
        conn.setDoOutput(true);
        // Don't use a cached copy.
        conn.setUseCaches(false);

        conn.setChunkedStreamingMode(0);
        // Use a post method.
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);
        dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"wheeze_file\";filename="
                + fileName + lineEnd);
        dos.writeBytes(lineEnd);

        // create a buffer of maximum size
        bytesAvailable = is.available();
        streamSize = bytesAvailable;
        bufferSize = 2048;
        buffer = new byte[bufferSize];
        // read file and write it into form...
        int i = 0;
        int length = 0;
        while ((length = is.read(buffer, 0, bufferSize)) > 0) {
            if (isCancelled()) {
                Toast.makeText(getApplicationContext(), "Cancelled",
                        Toast.LENGTH_SHORT).show();
                return null;
            }
            dos.write(buffer, 0, length);
            bytesAvailable = is.available();

            // bufferSize = Math.min(bytesAvailable, maxBufferSize);

            publishProgress(streamSize, bytesAvailable);
            // Log.v("Progress",""+streamSize+" : "+bytesAvailable);
        }
        // send multipart form data necesssary after file data...
        dos.writeBytes(lineEnd);

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"data[authentication][email]\""
                + lineEnd);
        dos.writeBytes(lineEnd);
        dos.writeBytes(username);
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"data[authentication][password]\""
                + lineEnd);
        dos.writeBytes(lineEnd);
        dos.writeBytes(enc_password);
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"method\""
                + lineEnd);
        dos.writeBytes(lineEnd);
        dos.writeBytes("uploadWheezeFile");
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
        // close streams
        Log.e("Debug", "File is written");

        // Log.v("Conn status", "Disconnected");

    } catch (MalformedURLException ex) {
        ex.printStackTrace();
        Log.e("Debug", "MURLExerror: " + ex.getMessage(), ex);
    } catch (IOException ioe) {
        ioe.printStackTrace();
        Log.e("Debug", "IOEx error: " + ioe.getMessage(), ioe);
        uploadTask.cancel(true);
        return null;
    } finally {
        try {
            is.close();
            dos.flush();
            dos.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    // ------------------ read the SERVER RESPONSE
    try {
        inStream = new DataInputStream(conn.getInputStream());

        if ((jsonResponse = inStream.readLine()) != null) {
            Log.e("Debug", "Server Response " + jsonResponse);

        } else {
            jsonResponse = "";
        }

        inStream.close();
        conn.disconnect();
        //
    } catch (IOException ioex) {
        ioex.printStackTrace();
        Log.e("Debug", "error: " + ioex.getMessage(), ioex);
    }

    return jsonResponse;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T05:14:29.067

如果接收服务器支持，您可以使用 Content-Range 标头来标识恢复上传。Google-Drive API 支持它。如果你自己动手，我会遵循谷歌使用的模式：

*   开始上传并获取会话标识符。
*   上传中断时，请等待互联网可用以恢复。
*   恢复上传时，首先询问服务器收到了多少字节。(*)
*   在服务器状态之后的下一个字节继续上传。

(*) 请注意，当我之前推出自己的产品时，我在上传的最后 KB 中添加了来自服务器的编码响应，只是为了验证它在传输过程中没有损坏。但是，在生产中，我从未见过服务器收到损坏数据的情况。

# java - 基于 DateTime 和 Z Position 的 Java 排序“队列”列表（学校项目的一部分）

> ID：13872786
> 
> 赞同：0
> 
> 时间：2012-12-14T04:43:59.820
> 
> 标签：java, list, queue

对于一个学校项目，我有一个 50k 集装箱的清单，这些集装箱是在船上到达的。这些容器需要在列表中进行排序，使最早的出发日期时间在顶部，容器在它们上方。然后，此列表将用于按顺序拾取它们的起重机。

我从 2 个 Collection.sort() 方法开始：

第一个以正确的 X>Y>Z 顺序获得它们

```
Collections.sort(containers, new Comparator<ContainerData>() 
{
    @Override
    public int compare(ContainerData contData1, ContainerData contData2)
    {
        return positionSort(contData1.getLocation(),contData2.getLocation());
    }
}); 
```

然后另一个在记住位置的同时重新排序日期：

```
Collections.sort(containers, new Comparator<ContainerData>() 
{
    @Override
    public int compare(ContainerData contData1, ContainerData contData2)
    {
        int c = contData1.getLeaveDateTimeFrom().compareTo(contData2.getLeaveDateTimeFrom());

        int p = positionSort2(contData1.getLocation(), contData2.getLocation());

        if(p != 0)
            c = p;

        return c;
    }
}); 
```

但我从来没有让这种方法起作用..

我现在的工作相当快速和肮脏，需要很长时间才能处理（所有 50k 需要 50 秒）：

首先对 DateTime 进行排序：

```
Collections.sort(containers, new Comparator<ContainerData>() 
{
    @Override
    public int compare(ContainerData contData1, ContainerData contData2)
    {
        return contData1.getLeaveDateTimeFrom().compareTo(contData2.getLeaveDateTimeFrom());
    }
}); 
```

然后是一个将顶部容器向上颠簸的校正函数：

```
containers = stackCorrection(containers);

private static List<ContainerData> stackCorrection(List<ContainerData> sortedContainerList)
{
    for(int i = 0; i < sortedContainerList.size(); i++)
    {
        ContainerData current = sortedContainerList.get(i);

        // 5 = Max Stack (0 index)
        if(current.getLocation().getZ() < 5) 
        {   //Loop through possible containers above current
            for(int j = 5; j > current.getLocation().getZ(); --j) 
            {   //Search for container above
                for(int k = i + 1; k < sortedContainerList.size(); ++k)
                    if(sortedContainerList.get(k).getLocation().getX() == current.getLocation().getX())
                    {
                        if(sortedContainerList.get(k).getLocation().getY() == current.getLocation().getY())
                        {
                            if(sortedContainerList.get(k).getLocation().getZ() == j)
                            {   //Found -> move container above current
                                sortedContainerList.add(i, sortedContainerList.remove(k));
                                k = sortedContainerList.size();
                                i++;
                            }
                        }
                    }
                }
            }
        }

    return sortedContainerList;
} 
```

我想以更好/更快的方式实现这一点。因此，任何提示都值得赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:00:55.700

我想你可能想用一个`Comparator`比较所有标准的单一排序。例如：

```
compareTo(other)        
    positionComparison = this.position.compareTo(other.position)
    if positionComparison != 0
        return positionComparison 
    return this.departureTime.compareTo(other.departureTime) 
```

# sencha-touch - 如何通过调用 ref config 自动生成的函数从控制器中获取 Sencha Touch 2 中的视图？

> ID：13872789
> 
> 赞同：0
> 
> 时间：2012-12-14T04:44:34.057
> 
> 标签：sencha-touch, sencha-touch-2

我在 Sencha 中定义了一个控制器，其中包括一个引用我的视图的 refs 属性，但是每当我根据 refs 属性调用自动生成的“get”函数来获取视图时，它都会返回 undefined。这是我的例子：

我在 app/controller/Locals.js 中有以下控制器：

```
Ext.define('MobileUnion.controller.Locals', {
    extend: 'Ext.app.Controller',

    // Base class methods.
    launch: function () {
        this.callParent(arguments);
    },
    init: function () {
        this.callParent(arguments);
    },

    config: {
        refs: {
        localsEditorView: 'localseditorview',
    },
    control: {
        localsEditorView: {}
    }
    },
    slideUpTransition: { type: 'cover', direction: 'up' },
    onEditLocalsCommand: function() {
        this.activateLocalsEditor();
    },
    activateLocalsEditor: function() {
        var localsEditorView = this.getLocalsEditorView();
        console.log(localsEditorView);  // Returns "undefined" to console.
        Ext.Viewport.animateActiveItem(localsEditorView, this.slideUpTransition);
    }
}); 
```

我在 app/views/LocalsEditor.js 中有以下视图：

```
Ext.define('MobileUnion.view.LocalsEditor', {
    extend: 'Ext.Panel',
    alias: 'widget.localseditorview',

    config: {
        html: 'This is the new view which should show up on top!'
    },
}); 
```

因此，在上面的示例中，如果我`this.getLocalsEditorView()`从控制器内部调用，即使我将 refs 属性设置为`localsEditorView: 'localseditorview'`并且我定义 MobileUnion.view.LocalsEditor 以包含`widget.localseditorview`. 当我这样做时，我觉得我应该得到视图。

顺便说一句，我确实在`views`app.js 的属性中定义了视图，所以不是这样。

更多信息：在我的 webkit 控制台中没有返回实际错误。只是`console.log()`上面提到的在我的控制器中的调用返回未定义，而不是视图对象。

问题：我必须做什么才能让这个函数返回视图，而不是未定义？任何帮助，将不胜感激。我已经确定这不仅仅是一个错字。似乎不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:09:11.097

“refs”是创建对现有组件的引用。到目前为止，您所做的只是声明一个类，根据您发布的内容，您从未在任何地方实例化它。

您可能想在此处阅读有关 autoCreate 的文档：http://docs.sencha.com/touch/2-1/#! [/api/Ext.app.Controller-cfg-refs](http://docs.sencha.com/touch/2-1/#!/api/Ext.app.Controller-cfg-refs)

# javascript - JQuery选择中的多个属性

> ID：13872796
> 
> 赞同：1
> 
> 时间：2012-12-14T04:45:40.570
> 
> 标签：javascript, jquery

我偶然发现了这种形式的选择器。注意引号，它的两个属性。

```
$('#item1','#item2') 
```

它似乎只返回第一个元素，这与 $('#item1, #item2') 结果不同。我找不到任何关于这到底是做什么的文档。有人可以解释这个或链接到带有示例的文档吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T04:51:31.067

它称为上下文，它与 相同`find()`，因此：

```
$('#item1','#item2') 
```

等于：

```
$('#item2').find('#item1'); 
```

换句话说，它在内部搜索`#item2`具有 ID 的元素`#item1`

`#item1`要选择具有 ID和的两个元素`#item2`，您可以：

```
$('#item1, #item2') 
```

注意引号的不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T04:54:20.147

Jquery $(param) 中的选择器支持单个字符串参数，然后它拆分参数字符串，然后为选择元素工作..

```
$('#item1','#item2') //treat first one param

$('#item1,#item2') //treat one param and splits passed string and will select both 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T04:51:22.177

您可以指定任意数量的选择器组合成一个结果。
这种多表达式组合器是选择不同元素的有效方法。

**[多重选择器](http://api.jquery.com/multiple-selector/)**
**[multiple-selector-2](http://docs.jquery.com/Selectors/multiple)**

```
var list = $("div,p,span").map(function () {
  return this.tagName;
}).get().join(", ");
$("b").append(document.createTextNode(list)); 
```

# spring-mvc - 创建（可变）Spring Security ACL 失败一半

> ID：13872797
> 
> 赞同：1
> 
> 时间：2012-12-14T04:45:51.443
> 
> 标签：spring-mvc, transactions, spring-security, acl

我正在使用 JDBC 支持的 SpringSecurity ACL 来管理我的用户创建的对象。

我有一个@Service，它处理受 ACL 保护的对象的 CRUD，因此需要生成适当的 ACL 并存储它们。我已将整个类标记为@Transactional，在我的 spring-security.xml 中配置为

```
<bean id="oauthTXManager" 
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>

<tx:annotation-driven transaction-manager="oauthTXManager" /> 
```

这`dataSource`是有效的（承诺！），它是一个 Postgres 数据库，如果这可能很重要的话。

所以回到@Service。它看起来像这样（部分）：

```
@Autowired
@Qualifier("aclService")
private MutableAclService aclService;

...

public Store createNewProfileWithOwner(Store profile, User owner) {
    try {
        Connection con = dataSource.getConnection();
        PreparedStatement query = con.prepareStatement(PROFILE_INSERT);
        ...
        query.executeUpdate();

        Sid sid = new PrincipalSid(owner.getUsername());
        Permission p = BasePermission.ADMINISTRATION;
        ObjectIdentity oi = new ObjectIdentityImpl(profile);
        MutableAcl acl = null;
        try {
            acl = (MutableAcl) aclService.readAclById(oi);
        } catch (NotFoundException e) {
            acl = aclService.createAcl(oi);
        }
        acl.setOwner(sid);
        acl.insertAce(acl.getEntries().size(), p, sid, true);
        aclService.updateAcl(acl);
        profile.setOwner(owner.getUsername());
        ...

    } catch (SQLException e) {
        e.printStackTrace();
    }
    return profile;
} 
```

我有一个小脚本，它测试调用此方法的 API。在我运行脚本的大约*一半*的时间里，我在创建 ACL SpringSecurity 时会收到一个错误`acl = aclService.createAcl(oi)`，它试图读回它但找不到它。很像[这个论坛](http://forum.springsource.org/showthread.php?108010-mutableAclService-is-doing-nothing-on-createAcl)中描述的问题。其他 50% 的时间它工作得很好。我能把它缩小到“随机，大约一半时间”以上的最好的方法是，如果我运行脚本，但它不起作用，然后在超过 4 秒但不到 20 秒后再次运行，它会工作。

奇怪的是，当我检查数据库时，SpringSecurity 声称它在数据库中找不到的 id 肯定存在。

我假设我遇到了某种事务或缓存问题。[我阅读了事务管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)的第 10.5.6 节，但恐怕它并没有真正帮助我查明错误可能出在哪里。

欢迎任何和所有的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:14:57.400

我通过制作所有方法来“修复”它，`synchronized`并且还通过[SpringSecurity @Secured 和 @PreAuthorized 提示](https://stackoverflow.com/questions/6290477/spring-security-secured-and-preauthorize?rq=1)我强制在 @Transactional 之前评估 @PreAuthrorized。

到目前为止，它有效。

# c++ - 异步、安全地使用 C++11 lambda

> ID：13872798
> 
> 赞同：17
> 
> 时间：2012-12-14T04:45:55.483
> 
> 标签：c++, c++11, lambda, shared-ptr

我从 Objective-C 背景来到 C++11，我正在努力接受的一件事是 C++11 lambda 与 Objective-C“块”的不同捕获语义。（请参阅[此处](http://www.mikeash.com/pyblog/friday-qa-2011-06-03-objective-c-blocks-vs-c0x-lambdas-fight.html)进行比较）。

在 Objective-C 中，与 C++ 一样，如果您引用成员变量，则`self`/指针会被隐式捕获。`this`但是因为 Objective-C 中的所有对象都是有效的“共享指针”，使用 C++ 术语，你可以这样做：

```
doSomethingAsynchronously(^{
  someMember_ = 42;
}); 
```

...并且您可以保证您正在访问其成员的对象在块执行时将处于活动状态。你不必考虑它。C++ 中的等价物似乎是这样的：

```
// I'm assuming here that `this` derives from std::enable_shared_from_this and 
// is already owned by some shared_ptr.
auto strongThis = shared_from_this();

doSomethingAsynchronously([strongThis, this] {
  someMember_ = 42;   // safe, as the lambda holds a reference to this
                      // via shared_ptr.
}); 
```

在这里，除了 this 指针之外，您还需要记住捕获 shared_ptr。是否有一些不易出错的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T13:01:34.363

C++ 的基本原则之一是不用为不用的东西付费。这意味着在这种情况下，不需要使用`shared_ptr`to`this`的上下文不应该产生任何引用计数开销。这也意味着它不应该自动发生，例如作为 的一个特性`enable_shared_from_this`，因为您可能希望将一个短暂的 lambda 传递给算法（`for_each`等），在这种情况下 lambda 不会超过其范围。

我建议调整[lambda-wrapper 模式](http://jrb-programming.blogspot.co.uk/2012/11/another-alternative-to-lambda-move.html)；在这种情况下，它用于`move`捕获大对象（[How to capture std::unique_ptr "by move" for a lambda in std::for_each](https://stackoverflow.com/questions/10280937/how-to-capture-stdunique-ptr-by-move-for-a-lambda-in-stdfor-each)），但它同样可以用于共享捕获`this`：

```
template<typename T, typename F>
class shared_this_lambda {
  std::shared_ptr<T> t;  // just for lifetime
  F f;
public:
  shared_this_lambda(std::shared_ptr<T> t, F f): t(t), f(f) {}
  template<class... Args>
  auto operator()(Args &&...args)
  -> decltype(this->f(std::forward<Args>(args)...)) {
    return f(std::forward<Args>(args)...);
  }
};

template<typename T>
struct enable_shared_this_lambda {
  static_assert(std::is_base_of<std::enable_shared_from_this<T>, T>::value,
    "T must inherit enable_shared_from_this<T>");
  template<typename F>
  auto make_shared_this_lambda(F f) -> shared_this_lambda<T, F> {
    return shared_this_lambda<T, F>(
      static_cast<T *>(this)->shared_from_this(), f);
  }
  template<typename F>
  auto make_shared_this_lambda(F f) const -> shared_this_lambda<const T, F> {
    return shared_this_lambda<const T, F>(
      static_cast<const T *>(this)->shared_from_this(), f);
  }
}; 
```

`enable_shared_this_lambda`除了`enable_shared_from_this`;通过继承使用 然后，您可以显式请求任何长期存在的 lambdas 采用 shared `this`：

```
doSomethingAsynchronously(make_shared_this_lambda([this] {
  someMember_ = 42;
})); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-17T19:50:51.517

升压用途：

```
auto self(shared_from_this());
auto l = [this, self] { do(); }; 
```

这里提到：[在 lambda 函数中使用 auto self(shared_from_this()) 变量的原因是什么？](https://stackoverflow.com/questions/19368012/whats-the-reason-of-using-auto-selfshared-from-this-variable-in-lambda-func)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-05T18:19:23.343

实际上，这个问题有一个正确的答案。答案与绑定具有完全相同的效果`shared_from_this()`（就像您使用 绑定时一样`boost::asio::io_service`）。想想看；绑定有`shared_from_this()`什么作用？它简单地替换`this`. 那么是什么阻止你完全`this`替换呢？`shared_from_this()`

按照您的示例，我对其进行了更新以使差异更加清晰，而不是：

```
auto strongThis = shared_from_this();

doSomethingAsynchronously([strongThis, this] () {
  this->someMember_ = 42; //here, you're using `this`... that's wrong!
}); 
```

做这个：

```
auto strongThis = shared_from_this();

doSomethingAsynchronously([strongThis] () //notice, you're not passing `this`!
{
  strongThis->someMember_ = 42;            
}); 
```

这里唯一的代价是你必须在所有内容前加上`strongThis->`. 但这是最有意义的方式。

# dns - 如何将 register.com 域连接到 iPower Hosting

> ID：13872801
> 
> 赞同：0
> 
> 时间：2012-12-14T04:46:29.043
> 
> 标签：dns, hosting

对不起，如果这个问题非常初级。我已经在 iPOWER 上注册了我的新域，但是我不知道如何将我的主机连接到我在 register.com 上的域。

如果有人使用这两个站点的详细说明，那就太好了。否则，在我错过的任何两个托管和域服务之间可能需要采取一些步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:36:41.050

In register.com account management page:

Click your domain

In the domain management page, go to last section ADVANCED TECHNICAL SETTINGS

You can customise your CNAME records there. e.g. pointing *.yoursite.com to example.iPower.com

according to [this page](http://help.register.com/app/answers/detail/a_id/487/related/1), it may take 12-24 hours to update.

Hope that helps.

# android - 如何在android map api V2中为标记设置动画？

> ID：13872803
> 
> 赞同：31
> 
> 时间：2012-12-14T04:46:36.093
> 
> 标签：android, google-maps, android-mapview, android-maps, google-maps-android-api-2

我想实现平滑过渡来模拟汽车标记在地图上的移动。

是否可以在 android map api v2 中为标记设置动画？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-04-16T13:11:59.987

提供的版本都不适合我，所以我实现了我的自定义解决方案。它同时提供位置和旋转动画。

```
/**
 * Method to animate marker to destination location
 * @param destination destination location (must contain bearing attribute, to ensure
 *                    marker rotation will work correctly)
 * @param marker marker to be animated
 */
public static void animateMarker(Location destination, Marker marker) {
    if (marker != null) {
        LatLng startPosition = marker.getPosition();
        LatLng endPosition = new LatLng(destination.getLatitude(), destination.getLongitude());

        float startRotation = marker.getRotation();

        LatLngInterpolator latLngInterpolator = new LatLngInterpolator.LinearFixed();
        ValueAnimator valueAnimator = ValueAnimator.ofFloat(0, 1);
        valueAnimator.setDuration(1000); // duration 1 second
        valueAnimator.setInterpolator(new LinearInterpolator());
        valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
            @Override public void onAnimationUpdate(ValueAnimator animation) {
                try {
                    float v = animation.getAnimatedFraction();
                    LatLng newPosition = latLngInterpolator.interpolate(v, startPosition, endPosition);
                    marker.setPosition(newPosition);
                    marker.setRotation(computeRotation(v, startRotation, destination.getBearing()));
                } catch (Exception ex) {
                    // I don't care atm..
                }
            }
        });

        valueAnimator.start();
    }
} 
```

指定动画部分的旋转计算。标记沿从开始到结束旋转更接近的方向旋转：

```
private static float computeRotation(float fraction, float start, float end) {
    float normalizeEnd = end - start; // rotate start to 0
    float normalizedEndAbs = (normalizeEnd + 360) % 360;

    float direction = (normalizedEndAbs > 180) ? -1 : 1; // -1 = anticlockwise, 1 = clockwise
    float rotation;
    if (direction > 0) {
        rotation = normalizedEndAbs;
    } else {
        rotation = normalizedEndAbs - 360;
    }

    float result = fraction * rotation + start;
    return (result + 360) % 360;
} 
```

最后是谷歌的`LatLngInterpolator`：

```
private interface LatLngInterpolator {
    LatLng interpolate(float fraction, LatLng a, LatLng b);

    class LinearFixed implements LatLngInterpolator {
        @Override
        public LatLng interpolate(float fraction, LatLng a, LatLng b) {
            double lat = (b.latitude - a.latitude) * fraction + a.latitude;
            double lngDelta = b.longitude - a.longitude;
            // Take the shortest path across the 180th meridian.
            if (Math.abs(lngDelta) > 180) {
                lngDelta -= Math.signum(lngDelta) * 360;
            }
            double lng = lngDelta * fraction + a.longitude;
            return new LatLng(lat, lng);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-11T04:58:31.560

试试下面的代码来为 Google Map V2 上的标记设置动画。您需要使用`Interpolator`该类在 Marker 上应用动画并在动画处理程序中对其进行处理，如下所示：

> ```
>  public void animateMarker(final Marker marker, final LatLng toPosition,
>         final boolean hideMarker) {
>     final Handler handler = new Handler();
>     final long start = SystemClock.uptimeMillis();
>     Projection proj = mGoogleMapObject.getProjection();
>     Point startPoint = proj.toScreenLocation(marker.getPosition());
>     final LatLng startLatLng = proj.fromScreenLocation(startPoint);
>     final long duration = 500;
>     final Interpolator interpolator = new LinearInterpolator();
>     handler.post(new Runnable() {
>         @Override
>         public void run() {
>             long elapsed = SystemClock.uptimeMillis() - start;
>             float t = interpolator.getInterpolation((float) elapsed
>                     / duration);
>             double lng = t * toPosition.longitude + (1 - t)
>                     * startLatLng.longitude;
>             double lat = t * toPosition.latitude + (1 - t)
>                     * startLatLng.latitude;
>             marker.setPosition(new LatLng(lat, lng));
>             if (t < 1.0) {
>                 // Post again 16ms later.
>                 handler.postDelayed(this, 16);
>             } else {
>                 if (hideMarker) {
>                     marker.setVisible(false);
>                 } else {
>                     marker.setVisible(true);
>                 }
>             }
>         }
>     });
> } 
> ```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-09T11:22:01.440

刚刚实现了一个版本，试试这个

```
public class MarkerAnimation {
static GoogleMap map;
ArrayList<LatLng> _trips = new ArrayList<>() ;
Marker _marker;
LatLngInterpolator _latLngInterpolator = new LatLngInterpolator.Spherical();

public void animateLine(ArrayList<LatLng> Trips,GoogleMap map,Marker  marker,Context current){
    _trips.addAll(Trips);
    _marker = marker;

animateMarker();
}

    public void animateMarker() {
        TypeEvaluator<LatLng> typeEvaluator = new TypeEvaluator<LatLng>() {
            @Override
            public LatLng evaluate(float fraction, LatLng startValue, LatLng endValue) {
                return _latLngInterpolator.interpolate(fraction, startValue, endValue);
            }
        };
        Property<Marker, LatLng> property = Property.of(Marker.class, LatLng.class, "position");

        ObjectAnimator animator = ObjectAnimator.ofObject(_marker, property, typeEvaluator, _trips.get(0));

        //ObjectAnimator animator = ObjectAnimator.o(view, "alpha", 0.0f);
        animator.addListener(new Animator.AnimatorListener() {
            @Override
            public void onAnimationCancel(Animator animation) {
                //  animDrawable.stop();
            }

            @Override
            public void onAnimationRepeat(Animator animation) {
                //  animDrawable.stop();
            }

            @Override
            public void onAnimationStart(Animator animation) {
                //  animDrawable.stop();
            }

            @Override
            public void onAnimationEnd(Animator animation) {
                //  animDrawable.stop();
                if (_trips.size() > 1) {
                    _trips.remove(0);
                    animateMarker();
                }
            }
        });

        animator.setDuration(300);
        animator.start();
    } 
```

LatLngInterpolator 类是由 Google 人员预先编写的，您可以按如下方式使用：

```
public interface LatLngInterpolator {

public LatLng interpolate(float fraction, LatLng a, LatLng b);

public class Spherical implements LatLngInterpolator {
    @Override
    public LatLng interpolate(float fraction, LatLng from, LatLng to) {
        // http://en.wikipedia.org/wiki/Slerp
        double fromLat = toRadians(from.latitude);
        double fromLng = toRadians(from.longitude);
        double toLat = toRadians(to.latitude);
        double toLng = toRadians(to.longitude);
        double cosFromLat = cos(fromLat);
        double cosToLat = cos(toLat);

        // Computes Spherical interpolation coefficients.
        double angle = computeAngleBetween(fromLat, fromLng, toLat, toLng);
        double sinAngle = sin(angle);
        if (sinAngle < 1E-6) {
            return from;
        }
        double a = sin((1 - fraction) * angle) / sinAngle;
        double b = sin(fraction * angle) / sinAngle;

        // Converts from polar to vector and interpolate.
        double x = a * cosFromLat * cos(fromLng) + b * cosToLat * cos(toLng);
        double y = a * cosFromLat * sin(fromLng) + b * cosToLat * sin(toLng);
        double z = a * sin(fromLat) + b * sin(toLat);

        // Converts interpolated vector back to polar.
        double lat = atan2(z, sqrt(x * x + y * y));
        double lng = atan2(y, x);
        return new LatLng(toDegrees(lat), toDegrees(lng));
    }

    private double computeAngleBetween(double fromLat, double fromLng, double toLat, double toLng) {
        // Haversine's formula
        double dLat = fromLat - toLat;
        double dLng = fromLng - toLng;
        return 2 * asin(sqrt(pow(sin(dLat / 2), 2) +
                cos(fromLat) * cos(toLat) * pow(sin(dLng / 2), 2)));
    }
}
} 
```

然后实例化一个 MarkerAnimation 类的对象，调用方法如下：

```
 MarkerAnimation.animateLine(TripPoints,map,MovingMarker,context); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-05T10:59:45.220

您只需要添加此类并传递一个位置，您可以使用 Fusedlocationproviderclient 轻松获取该位置。

```
 public class LocationMoveAnim {

        public static void startAnimation(final Marker marker, final GoogleMap googleMap, final LatLng startPosition,
                                         final LatLng endPosition,final GoogleMap.CancelableCallback callback) {
          ValueAnimator valueAnimator = ValueAnimator.ofFloat(0, 1);
          int duration = 500;
          valueAnimator.setDuration(duration);
          final LatLngInterpolatorNew latLngInterpolator = new LatLngInterpolatorNew.LinearFixed();
          valueAnimator.setInterpolator(new LinearInterpolator());
          valueAnimator.addUpdateListener(valueAnimator1 -> {
            float v = valueAnimator1.getAnimatedFraction();
            LatLng newPos = latLngInterpolator.interpolate(v, startPosition, endPosition);
            marker.setPosition(newPos);
            marker.setAnchor(0.5f, 0.5f);
            marker.setRotation((float) bearingBetweenLocations(startPosition, endPosition));
            googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(newPos,20F));
            callback.onFinish();
          });
          valueAnimator.start();
       }

         private static double bearingBetweenLocations(LatLng latLng1,LatLng latLng2) {

           double PI = 3.14159;
           double lat1 = latLng1.latitude * PI / 180;
           double long1 = latLng1.longitude * PI / 180;
           double lat2 = latLng2.latitude * PI / 180;
           double long2 = latLng2.longitude * PI / 180;
           double dLon = (long2 - long1);
           double y = Math.sin(dLon) * Math.cos(lat2);
           double x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);
           double brng = Math.atan2(y, x);
           brng = Math.toDegrees(brng);
           brng = (brng + 360) % 360;

           return brng;
        }

        public interface LatLngInterpolatorNew {
           LatLng interpolate(float fraction, LatLng a, LatLng b);
           class LinearFixed implements LatLngInterpolatorNew {
            @Override
            public LatLng interpolate(float fraction, LatLng a, LatLng b) {
                double lat = (b.latitude - a.latitude) * fraction + a.latitude;
                double lngDelta = b.longitude - a.longitude;
                // Take the shortest path across the 180th meridian.
                if (Math.abs(lngDelta) > 180) {
                    lngDelta -= Math.signum(lngDelta) * 360;
                }
                double lng = lngDelta * fraction + a.longitude;
                return new LatLng(lat, lng);
            }
        }
    }
} 
```

# jboss7.x - 带有 JBOSS 7 的 Eclipse Juno 中的 EAR 不会自动发布

> ID：13872806
> 
> 赞同：0
> 
> 时间：2012-12-14T04:47:16.887
> 
> 标签：jboss7.x, ear, eclipse-juno

大家好，以前我在 JBOSS AS 7 上部署我的项目 WAR，每当资源发生变化时，eclipse Juno 都会自动重新发布 war 文件。但是由于我将战争添加到耳朵中并将该耳朵部署在 JBOSS 上，所以现在 eclipse 不会自动重新发布。我也尝试更改发布设置，但对我没有任何效果。现在我在每次更改后手动重新发布。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T14:35:56.370

我遇到了同样的问题，但是在选中“将项目部署为压缩档案”框后让它工作（打开服务器配置并转到“部署”选项卡）

# velocity - 在 VelocityContext 中找不到值时，Velocity 可以为变量设置默认值吗？

> ID：13872808
> 
> 赞同：7
> 
> 时间：2012-12-14T04:47:39.760
> 
> 标签：velocity

如果在 VelocityContext 中没有找到值，Velocity 只会打印标签名称，即我的模板文件中的 $name，但在 VelocityContext 中没有“name”的值，所以只打印了“$name”。如果变量没有值，我希望 Velocity 打印一个默认值，我只是尝试扩展 AbstractCotnext 并覆盖 internalGet() 方法，但是 internalGet() 的返回值将被强制转换为 Node 对象，我不知道如何在我的 internalGet() 方法中创建一个新的 Node 对象，而且我认为这种方法非常复杂。

有没有一种简单的方法来设置默认值（默认值只是一个字符串）？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T11:50:35.410

据我所知，对于所有变量都不容易，我只设法对一些变量进行了具体如下操作：

模板：

```
#if ( !$somevar )
#set ( $somevar = "mycontent" )
#end

Var is: $somevar 
```

结果：

```
Var is: mycontent 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-16T05:05:54.450

在您的模板中创建一个 velocimacro：

```
#macro(defaultValue $parm)  
#if (!$!parm || $!parm == "")  
i-like-will
#else  
$parm  
#end  
#end 
```

并在同一个模板中这样调用它：

```
#defaultValue($name) 
```

查看[Apache Velocity - Velocity User Guide](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#velocimacros)以获取有关 velocimacros（以及一般速度）的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-29T17:44:21.403

聚会有点晚了，但您也可以在定义变量时进行检查。我不得不将其压缩为一行以删除输出中的多余空间，但这是我的一个项目中的一个示例：

```
#set ( $qlDefault = "qlinks" )
#set ( $qlClass = "#if($sharedCtaImage.getChild('path').value != '/')$qlDefault#else$qlDefault full#end" ) 
```

定义了默认类，然后我检查是否填写了另一个特定值以确定我是保留默认类还是附加一个附加类。这也适用于交换类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T16:44:19.537

谷歌周围的 Velocity ReferenceInsertionEventHandler 以广泛地做到这一点。

针对个别情况考虑 DisplayTool 的 alt() 方法（VelocityTools 项目的一部分）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-07T06:34:08.367

对于空的默认值，`$!name`可以。否则，

`#{if}($name)${name}#{else}${default_value}#{end}`

见[http://velocity.apache.org/engine/2.0/user-guide.html#quiet-reference-notation](http://velocity.apache.org/engine/2.0/user-guide.html#quiet-reference-notation)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-14T15:03:11.383

除了破解 Velocity 内部结构之外，您还可以做几件事。看看[这个问题](https://stackoverflow.com/q/13158441/612265)。

# php - 如何在 facebook graph api 中从 JSON 解析图像

> ID：13872810
> 
> 赞同：-1
> 
> 时间：2012-12-14T04:47:49.663
> 
> 标签：php, jquery, json

贝娄 JSON 包含我的 json 格式的粉丝页面信息。我在 jquery 中尝试了 getJson，但它对我不起作用

```
{
       "about": " One who does something \n\n",
       "description": "Doers Web development\nDoers Software Development\nDoers Graphics design\nDoers Hardware & Networking\nDoers Mobile Application Development",
       "is_published": true,
       "location": {
          "street": "",
          "city": "Colombo",
          "country": "Sri Lanka",
          "zip": ""
       },
       "phone": "+94773633412",
       "talking_about_count": 686,
       "username": "DoersIncorporation",
       "website": "http://www.doers.lk",
       "were_here_count": 0,
       "category": "Computers/technology",
       "id": "397319800348866",
       "name": "Doers Inc",
       "link": "https://www.facebook.com/DoersIncorporation",
       "likes": 767,
       "cover": {
          "cover_id": 398352273578952,
          "source": "http://sphotos-f.ak.fbcdn.net/hphotos-ak-snc7/s720x720/484190_398352273578952_36222530_n.png",
          "offset_y": 0
       }
    } 
```

我想知道的是如何使用 php 和 jquery 从中解析封面图像？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:52:18.087

将 JSON 保存到变量中：

```
var x = theJSON

x.cover.source 
```

将返回网址

[小提琴](http://jsfiddle.net/Schlogen/4XxdB/)

# shell - 删除扩展名为 .bin 的文件，然后打印再见

> ID：13872820
> 
> 赞同：1
> 
> 时间：2012-12-14T04:48:50.523
> 
> 标签：shell, unix

```
filename=file.bin
extension=$(echo ${filename}|awk -F\. '{print $2}')
if [ ${extension} == "bin" ]; then
   rm *.extenstion
fi 
```

像这样的工作如何删除文件夹中具有相同扩展名的所有文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:57:26.293

您不需要自己提取扩展名，这就是 globbing 的用途。只需这样做：

```
rm *.bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:00:38.447

或递归`find ./ -name "*.bin" -exec rm -f {} \;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:05:19.810

除了 globbing 之外，这也适用于`find`.

```
find -type f -name "*.bin" -exec rm {} \; 
```

或者更有效，使用更新版本的`find`：

```
find -type f -name "*.bin" -exec rm {} + 
```

这相当于

```
find -type f -name "*.bin" | xargs rm 
```

注意：默认情况下，`find`将递归执行。

# java - Java Applet 411 内容长度

> ID：13872823
> 
> 赞同：3
> 
> 时间：2012-12-14T04:49:11.180
> 
> 标签：java, applet, japplet, content-length, http-content-length

我是 Java 新手。我编写了一个带有 gui 的小程序，将结果（int w 和 int p）发送到服务器，我收到“411 Length Required”错误。我究竟做错了什么？你如何设置内容长度？

这是与服务器通信的方法：

```
public void sendPoints1(int w, int p){

    try {
        String url = "http://somename.com:309/api/Results";
        String charset = "UTF-8";
        String query = String.format("?key=%s&value=%s",
            URLEncoder.encode(String.valueOf(w), charset),
            URLEncoder.encode(String.valueOf(p), charset));
        String length = String.valueOf((url + query).getBytes("UTF-8").length);

        HttpURLConnection connection = (HttpURLConnection) new URL(url + query).openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Length", length);
        connection.connect();
        System.out.println("Responce Code:    " + connection.getResponseCode());
        System.out.println("Responce Message: " + connection.getResponseMessage());
    } catch (Exception e) {
        System.err.println(e.getMessage());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:54:46.410

我不是 100% 确定您为什么会收到 411 错误代码，但这可能与您没有通过 POST 发送任何内容这一事实有关。content-length 标头应该是请求正文的字节长度。您正在将其设置为 url 的长度！

要么将请求更改为 GET，要么将查询放入请求正文而不是 url 本身。如果您执行后者，请将 content-length 设置为仅正文的长度。

```
public void sendPoints1(int w, int p){

    try {
        String url = "http://somename.com:309/api/Results";
        String charset = "UTF-8";
        String query = String.format("key=%s&value=%s",
            URLEncoder.encode(String.valueOf(w), charset),
            URLEncoder.encode(String.valueOf(p), charset));
        byte[] queryBytes = query.getBytes("UTF-8");
        String length = String.valueOf((url + query).getBytes("UTF-8").length);

        HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Length", length);
        OutputStream os = connection.getOutputStream();
        os.write(queryBytes);
        os.flush();
        connection.connect();
        System.out.println("Responce Code:    " + connection.getResponseCode());
        System.out.println("Responce Message: " + connection.getResponseMessage());
    } catch (Exception e) {
        System.err.println(e.getMessage());
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:59:47.857

请求 uri 包括查询，可以使用 GET 方法。

```
connection.setRequestMethod("POST"); // modify to GET
connection.setRequestProperty("Content-Length", length); //remove the line 
```

如果使用 POST 方法，包括 'content-length' 头，必须发送数据。

例如：

```
public void sendPoints1(int w, int p){

    try {
        String url = "http://somename.com:309/api/Results";
        //value type is int ,don't need URLEncoder.
        byte[] data = ("key="+w+"&value="+p).getBytes("UTF-8");

        HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Length", data.length);
 connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); //URLencode...
        OuptputStream out = connection.getOutputStream();
        out.write(data);
        out.flush();
        InputStream in = connnection.getInputStream();
        //read .....
        System.out.println("Responce Code:    " + connection.getResponseCode());
        System.out.println("Responce Message: " + connection.getResponseMessage());
    } catch (Exception e) {
        System.err.println(e.getMessage());
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T15:04:51.783

由于所有信息都作为 URL 的一部分作为查询字符串传递，因此您无需**将** *setRequestMethod*设置为**POST**。但是，如果您仍想将其设置为 POST 作为逻辑的一部分，那么**setRequestProperty("Content-Length", "0")** as Http Server 期望在调用 POST 方法时读取 Length。在您的情况下，没有任何内容被写入 POST 信息，因此最好将其设置为零，即使有时默认值为零，服务器可能会给出响应错误代码为 411，响应*消息：所需长度*

# twitter-bootstrap - 如何用多列布局引导表单？

> ID：13872824
> 
> 赞同：1
> 
> 时间：2012-12-14T04:49:10.823
> 
> 标签：twitter-bootstrap

我想要的是这样的：

**5 个元素：** 标签、文本字段、只读标签、自动填充文本字段、图标-btn

以及它们之间的一些间隔，就像 img 显示的那样。

![我想要的是](../Images/51b4fa15f2e3a25f90cd6e077092c517.png)

但我发现这真的很难处理。

谁能给我一个例子jsfiddle，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:32:05.430

很抱歉这么快就提出问题并找到答案。

我应该删除这个问题吗？

最后，我用这个：http: [//jsfiddle.net/3QGpr/3/](http://jsfiddle.net/3QGpr/3/)

```
 .container-fluid
      form.form-horizontal
        legend 请求参数
        .control-group
          label.control-label 回执编码：
          input.input-small(type='text')
          | &nbsp;&nbsp;=&nbsp;&nbsp;
          input.input-xlarge(type='text')
          | &nbsp;&nbsp;
          i.icon-trash

        .control-group
          label.control-label 回执编码：
          input.input-small(type='text')
          | &nbsp;&nbsp;=&nbsp;&nbsp;
          input.input-xlarge(type='text')
          | &nbsp;&nbsp;
          i.icon-trash 
```

# python - 模板“不是有效的标签库”，无法加载模型

> ID：13872827
> 
> 赞同：1
> 
> 时间：2012-12-14T04:49:25.530
> 
> 标签：python, django

尝试加载自定义模板标签时，出现错误

```
'myapp' is not a valid tag library: ImportError raised loading myapp.templatetags.myapp: No module named models 
```

问题在于 templatetags/myapp.py 无法加载模型->“myapp：没有名为模型的模块”。为什么以下行在 myapp/templatetags/myapp.py 中失败？

```
from myapp.models import Mymodel 
```

为了提供一些细节，我有以下几点：

```
myproject
 |
  --myapp
 |   |
 |   --templatetags
 |   |   |
 |   |    --__init__.py
 |   |    --myapp.py
 |   --__init__.py
 |   --models.py
 |   --views.py
 |
  --myapp2
 |   |
 |   --templatetags
 |   --__init__.py
 |   --models.py
 |   --views.py 
```

在 template/myapp2/showsomething.html 中，我有以下内容

```
{% load myapp %} 
```

在 myapp/templatetags/myapp.py 中，我有以下内容

```
from myapp.models import Mymodel
register = Library()

@register.inclusion_tag('myapp/myapp.html')
def myapp():
    #....somecode ...   
    return {'some': 'value} 
```

在 myapp/models.py 中，我有以下内容

```
from django.db import models
class Mymodel(models):
    ...some model code 
```

在 settings.py 中，我有

```
...some other settings code ...

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.admin',
    'myapp',
    'myapp2', 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:51:08.930

Django 可能因为同名而感到困惑。尝试将文件 myapp.py 重命名为其他名称。此外，您需要将模板标签应用程序添加到已安装的应用程序中，并确保模板标签具有该`__init__.py`文件。更多信息可以在[这里找到](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

# php - Propel 中的分组过滤器

> ID：13872829
> 
> 赞同：0
> 
> 时间：2012-12-14T04:49:28.653
> 
> 标签：php, symfony, propel

我目前有一个基于 Propel 的查询，如下所示：

```
$product = ProductQuery::create()
  ->filterByLive(1)
  ->filterByApproved(1)
  ->findOneByFilename($filename); 
```

我经常使用这个查询，而不是链接两个过滤器，我想知道是否可以创建一个封装它们的新过滤器？这意味着，如果我将来要添加一个额外的过滤器，那么我可以简单地用这个单一的方法来完成，而不必遍历整个项目来添加新的过滤器。

例如：

```
$product = ProductQuery::create()
  ->filterByIsActive()
  ->findOneByFilename($filename); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:14:33.943

您可以在您的创建所需的方法`ProductQuery`：

```
public function filterByIsActive()
{
    return $this
            ->filterByLive(1)
            ->filterByApproved(1);
} 
```

Propel 只生成一次这个文件，你可以将任何你喜欢的代码放在这个类中——它不会被覆盖。

# java - 打印字符串包含java中的土耳其字符

> ID：13872833
> 
> 赞同：1
> 
> 时间：2012-12-14T04:50:08.060
> 
> 标签：java, string

我在我的弹簧控制器中创建一个字符串，它包含土耳其字符

字符串 str1 = "iş ortaklığı";

如果我尝试像 System.setOut(new PrintStream(System.out,true,"UTF-8")); System.out.println(s);

**输出是**iÅŸ ortaklÄ±ÄŸÄ±

byte[] utf81 = str1.getBytes("UTF-8"); test3 = 新字符串（utf8）；

```
 System.out.println(test3); 
```

**输出是**iÅŸ ortaklÄ±ÄŸÄ±

byte[] utf8 = str1.getBytes("windows-1254"); test3 = new String("windows-1254");

**输出是**iÃ¾ ortaklÃ½Ã°Ã½

**但是上面的所有代码在控制台程序中都可以正常工作，它是主方法** 主方法打印输出，如
iş ortaklığı

任何建议都必须是可应用的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:57:59.963

如果你更换

```
System.setOut(new PrintStream(System.out,true,"UTF-8")); 
```

和

```
System.setOut(new PrintStream(new FileOutputStream(FileDescriptor.out),true,"UTF-8")); 
```

然后你会得到一个`System.out`UTF-8 将文本内容编码到标准输出，而不是通过默认编码重新编码。

[Java，默认编码](https://stackoverflow.com/questions/1128617/java-default-encoding)解释了 Java 的默认编码以及如何操作它。如果您可以控制程序的运行方式，您可能希望将默认编码强制为 UTF-8。

# php - php燃料42000错误

> ID：13872837
> 
> 赞同：0
> 
> 时间：2012-12-14T04:50:20.637
> 
> 标签：php, fuelphp

我不明白出了什么问题。这是我得到的完整错误：

```
Fuel\Core\Database_Exception [ 42000 ]: SQLSTATE[42000]: Syntax error or access violation:
1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL 
server version for the right syntax to use near 'to, from, message, checked) VALUES ('1', 
'freddy', 'bob', 'message', '1')' at line 1 with query: "INSERT INTO chatmes (id, to, from, 
message, checked) VALUES ('1', 'freddy', 'bob', 'message', '1')" 
```

这是我的PHP代码，据说它给了我错误：

```
<?php

define('DOCROOT', __DIR__.DIRECTORY_SEPARATOR);                 
define('APPPATH', realpath('/var/www/vhosts/grubber.co.nz/httpdocs/fuel/app/').DIRECTORY_SEPARATOR);
define('PKGPATH', realpath('/var/www/vhosts/grubber.co.nz/httpdocs/fuel/packages/').DIRECTORY_SEPARATOR);
define('COREPATH', realpath('/var/www/vhosts/grubber.co.nz/httpdocs/fuel/core/').DIRECTORY_SEPARATOR);                  
require APPPATH.'bootstrap.php';

error_reporting(-1);
ini_set('display_errors', 1);

$to = $_GET['to'];
$from = $_GET['from'];
$message = $_GET['message'];

$dquotes = '"';
$squotes = "'";

$message = str_replace($dquotes, "&quot", $message);
$message = str_replace($squotes, "&#039", $message);

DB::insert('chatmes')->set(array('id' => '1', 'to' => 'freddy', 'from' => 'bob', 'message' => 'message', 'checked' => '1'))->execute();

?> 
```

我不知道我做错了什么。我使用的连接也是**PDO**。

目前唯一给我错误的是数据库更新查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:00:10.563

尝试像这样在末尾添加一个分号，

更改您的 DB::insert 查询创建者

```
 INSERT INTO chatmes (id, to, from, 
     message, checked) VALUES ('1', 'freddy', 'bob', 'message', '1');" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:39:54.923

我已经弄清楚了，它与我的查询无关，它是fuelphp。它不喜欢数据库`from`to`sender`和`to`to `receiver`。谢谢各位帮忙。

# mysql - 如何在所有分支中获得第 n 个最高分？

> ID：13872841
> 
> 赞同：2
> 
> 时间：2012-12-14T04:50:55.357
> 
> 标签：mysql, sql

我有一个表 Student 字段：`Student_id`, `Student_Name`, `Mark`, `Branch`。

我想在单个查询中获得每个分支的第 n 个最高标记和名称。是否可以？

例如，如果数据是

```
S1   |  Amir  |  EC  |  121
S2   |  Ewe   |  EC  |  123
S3   |  Haye  |  EC  |  45
S4   |  Mark  |  EC  |  145
S5   |  Tom   |  CS  |  152
S6   |  Hudd  |  CS  |  218
S7   |  Ken   |  CS  |  48
S8   |  Ben   |  CS  |  15
S9   |  Wode  |  CS  |  123
S10  |  Kayle |  IT  |  125
S11  |  Den   |  IT  |  120
S12  |  Noy   |  IT  |  126 
```

我选择在每个分支中显示第三高的标记，输出应该是这样的

```
S1   | Amir   | EC   | 121
S9   | Wode   | CS   | 123
S11  | Den    | IT   | 120 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:16:41.610

如果 MySQL 具有像其他几个答案所示的窗口函数，这将容易得多。但他们没有，所以你可以使用类似下面的东西：

```
select student_id,
      student_name,
      branch,
      mark
from
(
  select student_id,
      student_name,
      branch,
      mark,
      @num := if(@branch = `branch`, @num + 1, 1) as group_row_number,
      @branch := `branch` as dummy,
      overall_row_num
  from
  (
    select student_id,
      student_name,
      branch,
      mark,
      @rn:=@rn+1 overall_row_num
    from student, (SELECT @rn:=0) r
    order by convert(replace(student_id, 'S', ''), signed) 
  ) src
  order by branch, mark desc
) grp
where group_row_number = 3
order by overall_row_num 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/61e56/48)

结果将是：

```
| STUDENT_ID | STUDENT_NAME | BRANCH | MARK |
---------------------------------------------
|         S1 |         Amir |     EC |  121 |
|         S9 |         Wode |     CS |  123 |
|        S11 |          Den |     IT |  120 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:56:20.590

[最大限度（）](http://www.techonthenet.com/sql/max.php)

```
select branch, MAX(mark) as 'highest mark' from Student group by branch; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:37:57.033

`MySQl`不支持`CTE`并且`rownumber`，所以你做了这样的事情： - 制作一个临时表，将数据插入其中然后选择并最后删除临时表..

```
create table #temp(branch varchar(30),mark int,row_numbers int)
Insert into #temp
SELECT a.branch, a.mark, count(*) as row_numbers FROM student a
JOIN student b ON a.branch = b.branch AND a.mark <= b.mark
GROUP BY  a.mark,a.branch
Order by  a.mark desc

select branch,mark from #temp where row_numbers=2

drop table #temp 
```

这是针对 SQL SERVER 的：-

```
;WITH CTE AS
(
SELECT  Branch,mark, ROW_NUMBER() OVER (PARTITION BY Branch ORDER BY mark DESC) AS RowNum
FROM 
student
)
SELECT Branch,mark from cte
WHERE RowNum = 2 
```

这将给出假设第二个最高分的分支，您可以相应地选择任何第 N 级。

希望能帮助到你 ：-

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T05:55:38.253

这个在甲骨文中工作

```
select Student_id,Student_Name,Mark,Branch from (
    select  Student_id,Student_Name,Mark,Branch,dense_rank() over (partition by Branch order by Mark desc) rnk
    from Student ) where rnk=nth_value; 
```

nth_value:=需要的第 n 个最高标记。请检查这个 sqlfiddle：[http ://sqlfiddle.com/#!4/7b559/3](http://sqlfiddle.com/#!4/7b559/3)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T04:54:31.763

您可以使用 Limit 获得 n 个最高市场 ( `limit 1,1 will give you 2nd highest, set as per your requirement`)

```
SELECT mark, name
FROM student ORDER BY mark 
DESC LIMIT 1,1 
```

# javascript - jQuery 可以选择这个 ID 吗？

> ID：13872849
> 
> 赞同：-1
> 
> 时间：2012-12-14T04:51:39.680
> 
> 标签：javascript, jquery, html, dom

我有一个带有内部脚本的index.html文件，该文件将在选中单个按钮时附加到DOM上的文本方面。

我有一个外部脚本，它在提交表单时获取该文本区域的值并将其作为表单参数发送。我的所有其他表单参数都正确显示在 HTTP 标头中，但是，此表单参数显示为“未定义”。

当页面加载后附加元素时，jQuery 是否不允许通过 ID 选择元素？我应该改用可见性属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:03:43.457

Jquery 也能做你似乎在尝试的事情。

```
 $("#outer").append("<textarea id=inserted>Shazam !</textarea>");
   /* ... do some stuff ... */
   alert($("#inserted").val()); // popup with "Shazam !" 
```

您应该发布一个示例以获得更好的答案。

# java - 为什么我不能在构造函数中访问枚举中的静态字段？

> ID：13872850
> 
> 赞同：1
> 
> 时间：2012-12-14T04:51:43.250
> 
> 标签：java

> **可能重复：**
> [无法访问枚举初始化程序中的静态字段](https://stackoverflow.com/questions/4278432/cannot-access-static-field-within-enum-initialiser)

我的情况：

```
enum Attribute { POSITIVE, NEGATIVE }
enum Content {
    C1(Attribute.POSITIVE),
    C2(Attribute.POSITIVE),
    ... // some other positive enum instances.
    Cm(Attribute.NEGATIVE),
    ... // some other negative enum instances.
    Cn(Attribute.NEGATIVE);

    private final Atrribute a;
    static int negativeOffset = 0;
    private Content(Atrribute a) {
        this.a = a;
        if ( a.compareTo(Attribute.POSITIVE) == 0 ) {
               negativeOffset ++;
        }
    }

    public static int getNegativeOffset() { return negativeOffset; }
} 
```

我的意图是每当我添加一个新的枚举（带有 POSITIVE 属性）时将负偏移量加一，然后我可以调用 getNegativeOffset() 来获取负枚举的起点并做任何我想做的事情。

但comlier抱怨说

`Cannot refer to the static enum field Content.negativeOffset within an initializer`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:56:34.577

你可以使用这个“技巧”：

```
private static class IntHolder {
    static int negativeOffset;
} 
```

然后像这样引用变量：

```
IntHolder.negativeOffset ++; 
```

和

```
return IntHolder.negativeOffset; 
```

这样做的原因是 JVM 保证在初始化`IntHolder`静态内部类时初始化变量，这在访问它之前不会发生。

整个类将如下所示，编译：

```
enum Attribute { POSITIVE, NEGATIVE }
enum Content {
    C1(Attribute.POSITIVE),
    C2(Attribute.POSITIVE),
    ... // some other positive enum instances.
    Cm(Attribute.NEGATIVE),
    ... // some other negative enum instances.
    Cn(Attribute.NEGATIVE);

    private final Attribute a;

    private static class IntHolder {
        static int negativeOffset;
    }

    private Content(Attribute a) {
        this.a = a;
        if ( a == Attribute.POSITIVE) {
               IntHolder.negativeOffset ++;
        }
    }

    public static int getNegativeOffset() { return IntHolder.negativeOffset; }
} 
```

请注意拼写错误的更正以及使用而不是与`Attribute`枚举值进行更简单的比较`==``compareTo()`

# javascript - 如何在 jquery 中检测 F5 刷新按键事件？

> ID：13872853
> 
> 赞同：2
> 
> 时间：2012-12-14T04:51:55.163
> 
> 标签：javascript, jquery, keypress

我注意到 jquery 有一个按键功能。但它似乎只能检测数字和字符的按键事件。它无法检测 F5 按键事件。而最让我吃惊的是网上大家都说F5的keyCode是116，但是我用jquery keypress功能的时候却显示字符t的keyCode是116（好像116是小写的ascii码t）！有人可以给我任何想法以及如何在 javascript 或 jquery 中检测 F5 事件吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T04:59:53.030

我不知道你在代码中做错了什么，但 jQuery 确实说`F5`is`116`和`t`is `84`：

[http://jsfiddle.net/Brjb2/1](http://jsfiddle.net/Brjb2/1)

一个可能的错误是`keypress`会有不同`keycode`的，这就是为什么`keydown`更优选的原因。

```
 |  T  |  A  |  F5
keydown |  86 |  65 | 116
keypress| 116 |  97 |  - 
```

也`F5`不会触发`keypress`，因为重新加载部分发生在之前`keypress`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T05:00:17.833

keypress 事件不接受功能键（F1-F12）。您可以尝试使用 keydown 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-15T08:30:38.567

这段代码对我很有用，我
在 chrome 和 firefox 中成功测试了它

```
<script>
    document.onkeydown = capturekey;
    document.onkeypress = capturekey;
    document.onkeyup = capturekey;

    function capturekey(e) {
        e = e || window.event;
        //debugger
        if (e.code == 'F5') {
            if (confirm('do u wanna to refresh??')) {
                //allow to refresh
            } 
            else {
                //avoid from refresh
                e.preventDefault()
                e.stopPropagation()
            }
        }
    }
</script> 
```

# c# - Flex HTTPService 返回多个 xml 标头

> ID：13872856
> 
> 赞同：0
> 
> 时间：2012-12-14T04:52:22.393
> 
> 标签：c#, actionscript-3, apache-flex, asp.net-web-api

我试图弄清楚为什么我的 flex 中的 HTTPService 结果返回多个 XML 标头。

C# WebAPI 服务：

```
 [HttpPost, HttpGet]
    public List<vwRecord24Category> GetClientCategories(int companyId)
    {
       var categories = Db.Fetch<vwRecord24Category>(@"SQLQUERY", companyId);

        return categories;
    } 
```

调用此 Web 服务的结果是；

```
 <ArrayOfvwRecord24Category xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/Record24Entities">
    <vwRecord24Category>
        <CategoryName>John Doe</CategoryName>
        <Name>adsf</Name>
    </vwRecord24Category>
    <vwRecord24Category>
        <CategoryName>John Doe</CategoryName>
        <Name>df</Name>
    </vwRecord24Category>
    <vwRecord24Category>
        <CategoryName>John Doe</CategoryName>
        <Name>new thing 4</Name>
    </vwRecord24Category>
    <vwRecord24Category>
        <CategoryName>John Doe</CategoryName>
        <Name>Surgery Center 1</Name>
    </vwRecord24Category>
</ArrayOfvwRecord24Category> 
```

我在 Flash Builder (ActionScript 3.0) 中的 HttpService：

```
params.companyId = clientData.data.companyId;           

httpService.method = 'POST';
httpService.url = 'http://****.domain.com/record24api/content/GetClientCategories';
httpService.contentType = "application/json";
httpService.resultFormat = "e4x";
httpService.addEventListener(ResultEvent.RESULT, onLibrariesLoaded);
httpService.addEventListener(FaultEvent.FAULT, onLibraryLoadError);

httpService.send(JSON.stringify(params)); 
```

好吧，毕竟当成功事件被触发时，我的 response.result 看起来像这样：

![回复](../Images/f4af82c076f22d45585511bdc90e3b68.png)

我已经与这个问题作了几个小时的斗争，并且我已经缩小了它不能成为我的网络服务的范围，因为当我通过 chrome 或 IE 调用它时它可以正确显示。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:44:03.570

这是按预期工作的，它对我来说看起来完全陌生。对困惑感到抱歉！请关闭这个。

# html - 应用于 tr 的渐变分别在每个 td 处渲染。如何在 tr 上创建水平渐变？

> ID：13872860
> 
> 赞同：5
> 
> 时间：2012-12-14T04:52:40.093
> 
> 标签：html, css, html-table

您可以在这里看到问题：http: [//jsfiddle.net/vadirn/5pgXS/1/](http://jsfiddle.net/vadirn/5pgXS/1/)（仅使用-webkit-gradient）。

html:

```
<table>
  <tr>
    <td>Row one, column one</td>
    <td>Row one, column two</td>
    <td>Row one, column three</td>
  </tr>
  <tr>
    <td>Row two, column one</td>
    <td>Row two, column two</td>
    <td>Row two, column three</td>
  </tr>
  <tr>
    <td>Row three, column one</td>
    <td>Row three, column two</td>
    <td>Row three, column three</td>
  </tr>
</table>​ 
```

文案：

```
$solid: 1px solid #444;
table {
    border: $solid;
}
td, th {
    border-right: $solid;
    border-bottom: $solid;
}
tr {
    background-image: -webkit-linear-gradient(left, #fff 0%, #444 50%, #ffffff 100%);
} 
```

​</p>

以某种方式应用于 tr:nth-child 和 tr 的背景图像在 tr 上不起作用，而是在 td 上起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T04:57:28.253

好的，刚刚得到你想说的，所以给`background`而`table`不是`tr`使用`background: #ffffff;`你的`odd/even tr`

[**演示**](http://jsfiddle.net/5pgXS/4/)

CSS

```
$solid: 1px solid #444;
table {
    border: $solid;
    background: #1e5799;
    background: -moz-linear-gradient(left,  #1e5799 0%, #7db9e8 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1e5799), color-stop(100%,#7db9e8));
    background: -webkit-linear-gradient(left,  #1e5799 0%,#7db9e8 100%);
    background: -o-linear-gradient(left,  #1e5799 0%,#7db9e8 100%);
    background: -ms-linear-gradient(left,  #1e5799 0%,#7db9e8 100%);
    background: linear-gradient(to right,  #1e5799 0%,#7db9e8 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=1 );
}
td, th {
    border-right: $solid;
    border-bottom: $solid;
}
tr:nth-child(odd) {
   background: #ffffff;
} 
```

# javascript - 骨干网.js路线不起作用

> ID：13872866
> 
> 赞同：1
> 
> 时间：2012-12-14T04:53:19.220
> 
> 标签：javascript, apache, backbone.js, routes

我已经定义

```
var AppRouter = Backbone.Router.extend({
    routes: {
      "photos/": "showPhotos",
      "pic/:object_id": "getPic"
      //"*actions": "defaultRoute"
    },

    showPhotos: function() {
      console.log("routing: showPhotosPage");
      App.showPhotosPage();
    }, 
```

我还确保启动并启动路由器...

```
 // Initiate the router
  var app_router = new AppRouter();

  // Start Backbone history
  Backbone.history.start(); 
```

当我将浏览器指向 localhost/~myusername 时，获取要加载的页面和脚本（通过查看 firebug）。但是，如果我将浏览器指向 localhost/~myusername/photos/photos/，则会出现以下浏览器错误。

未找到 在此服务器上未找到请求的 URL /~jayc707/moments/。

我正在使用 Apache 运行 Mountain Lion。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:21:58.083

就像问题评论中提到的@Layoric，默认情况下 Backbone.Router 理解`#`URL，所以 url 看起来像`/~jayc707/#/moments/`

但是，可以使用标准 url，例如[Backbone.Histrory 文档](http://backbonejs.org/#History)中解释的`/~jayc707/moments/`Backbone支持。`pushState`

使用 pushState 有其优点和缺点。主要的缺点是旧版浏览器不支持它，旧版浏览器将降级为基于哈希的 URL。另一个是，您必须配置您的 Web 服务器 (Apache) 以返回与它相关的任何 URL 的根页面。有关更多信息，请参阅上面的文档。

# javascript - highchart的奇怪结果

> ID：13872878
> 
> 赞同：0
> 
> 时间：2012-12-14T04:54:39.737
> 
> 标签：javascript, jquery, highcharts

我使用[http://highcharts.com](http://highcharts.com)，结果真的很奇怪。所以，我的数据看起来像：

```
Value | Date
1507   2013-02-03
734    2013-02-02
0      2013-02-01
225    2013-01-31 *Graphic miss*
672    2013-01-30 *Graphic miss*
692    2013-01-29 *Graphic miss* <--- This value gone to 1 february
910    2013-01-28
314    2013-01-27 
```

![在此处输入图像描述](../Images/f8553e794db9fbf3b4ad81c09887b6b7.png)

![在此处输入图像描述](../Images/5446e244aa8a23320081028b77935d7d.png)

我错过了三天（1 月 29 日、30 日、31 日）。

当我从数据库中获取数据时，我将其转换为：

```
var lines = [];
try {
    jQuery.each(data, function(i, line) {
        var dateArr = line.date.split('-');
        lines.push([
            Date.UTC(dateArr[0],dateArr[1],dateArr[2]),
            parseInt(line.num_chips)
        ]);
    });
} catch(e) {} 
```

可能出了什么问题？

**我在 Date.UTC 转换中的错误！**

在数据库中，我将 1 月设为“01”月。但是要在 UTC 中通过 1 月，我必须输入“0”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:28:51.827

我在 Date.UTC 中发现了我的错误。0 - 一月，但在数据库中我的一月 - 01

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:41:36.287

看着这个我认为你的问题是你的时间序列数据不是按时间升序排列的。您的第一个点需要是最早的日期，最后一个点需要是数据中的最新日期。

# perl - 从 Perl 驱动程序插入 MongoDB 服务器日期

> ID：13872884
> 
> 赞同：3
> 
> 时间：2012-12-14T04:55:29.270
> 
> 标签：perl, mongodb

从 MongoDB 控制台，我可以：

```
>  db.log.insert({ dt : new Date })
>  db.log.find().sort({ $natural : -1 }).limit(1)
{ "_id" : ObjectId("50caae2cadd0e471af0b3941"), "dt" : ISODate("2012-12-14T04:42:20.560Z") } 
```

如何从 Perl MongoDB 驱动程序中执行相同的操作？

**背景**

我正在使用带有上限集合的 MongoDB 进行日志记录。我了解 ObjectID 包含时间戳，但显示和查询它并不简单。因此，我想为每个条目添加一个基于服务器的时间戳，但一直无法弄清楚如何通过 Perl 驱动程序传递文字命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:39:53.947

Perl MongoDB 驱动程序使用 DateTime 对象来存储日期，如果您从数据库中读取日期，则将 DateTime 对象返回给您。

```
#!/usr/bin/env perl
use strict;
use warnings;
use MongoDB;
use MongoDB::OID;
use DateTime;

# database connection & collection
my $conn  = MongoDB::Connection->new;
my $db    = $conn->dates;
my $log   = $db->log;

# Delete Collection
$log->drop;

# Insert one
my $oid = $log->insert({ dt => DateTime->now });

# Show all
my $all = $log->find;
while ( my $entry = $all->next ) {
    printf "_id: %s dt: %s\n", $entry->{_id}->to_string, $entry->{dt}->format_cldr("dd.MM.yyyy HH:mm:ss");
} 
```

如果你执行它，它会打印出类似

```
_id: 50cb1b9321d30efd17000000 dt: 14.12.2012 12:29:07 
```

您还应该阅读 DateTime 文档以了解您可以使用它做什么：[http ://search.cpan.org/perldoc?DateTime](http://search.cpan.org/perldoc?DateTime)

在 Connection 启动时，您还可以设置所需的 Date 对象。

[http://search.cpan.org/perldoc?MongoDB::Connection#dt_type](http://search.cpan.org/perldoc?MongoDB::Connection#dt_type)

例如，如果将其设置为 DateTime::Tiny，它会更快。但是您应该首先了解 DateTime 和 DateTime::Tiny 之间的区别。阅读展位文档并决定哪种情况更好。

* * *

上面的示例创建了客户端时间。如果您想要来自服务器而不是客户端的时间，因为客户端/服务器不一样。你可以做两件事。

首先，创建一个返回 Date 对象的 JavaScript 函数并在服务器上评估该函数。

```
# JavaScript function that return a Date object
my $now = MongoDB::Code->new(code => qq{function(){
    return new Date
}});

# later...
my $oid = $log->insert({ 
    dt => $dt,
    st => $db->eval($now),
}); 
```

第二种可能。MongoDB 的默认“_id”对象已经包含创建对象时的时间戳。至少文档说它来自服务器，我希望它真的来自服务器并且不会由驱动程序创建。但是，如果 $entry 是您的 MongoDB 结果，您可以通过以下方式从中获取 DateTime 对象：

```
my $dt = DateTime->from_epoch(epoch => $entry->{_id}->get_time); 
```

例子：

```
#!/usr/bin/env perl
use strict;
use warnings;
use MongoDB;
use MongoDB::OID;
use MongoDB::Code;
use DateTime;

# database connection & collection
my $conn  = MongoDB::Connection->new;
my $db    = $conn->dates;
my $log = $db->log;

# Delete Collection
$log->drop;

# Client Time
my $dt = DateTime->now;

# JavaScript function that return a Date object
my $now = MongoDB::Code->new(code => qq{function(){
    return new Date
}});

# wait 2 seconds to see a difference between
# $dt and the $now function
sleep 2;

# Insert one
$log->insert({ 
    dt => $dt,
    st => $db->eval($now),
});

sleep 2;

$log->insert({ 
    dt => $dt,
    st => $db->eval($now),
});

# Show all
my $dtf = "dd.MM.yyyy HH:mm:ss";
my $all = $log->find;
while ( my $entry = $all->next ) {
    printf "dt: %s\n", $entry->{dt}->format_cldr($dtf);
    printf "st: %s\n", $entry->{st}->format_cldr($dtf);
    printf "_id time: %s\n", DateTime->from_epoch(epoch => $entry->{_id}->get_time)->format_cldr($dtf);
    print "\n";
} 
```

输出：

```
dt: 14.12.2012 16:29:28
st: 14.12.2012 16:29:30
_id time: 14.12.2012 16:29:30

dt: 14.12.2012 16:29:28
st: 14.12.2012 16:29:32
_id time: 14.12.2012 16:29:32 
```

# macros - Autohotkey，逐步执行

> ID：13872886
> 
> 赞同：1
> 
> 时间：2012-12-14T04:55:53.977
> 
> 标签：macros, autohotkey

这可能是一个非常简单的代码，但我无法找到如何去做。

我有这个发送，你好发送，你好吗发送，我很好

我想这样做嗨，你好吗....

现在使用下面的代码

KeyWait，Capslock
发送，Hi KeyWait，Capslock
发送，你好吗 KeyWait，Capslock
发送，我很好

我一按 Capslock，就会得到 HiHow Are YouI Am Fine。

我希望它等待执行下一个命令。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:52:00.093

```
KeyWait, Capslock
Send {Capslock} ; Tap it again to reset it and force it to be released
; or Send {Capslock Up} to force it to be released
; or SetCapslockState Off to disable it completley
Send, Hi KeyWait, Capslock{Enter}
Send, How Are you KeyWait, Capslock{Enter}
Send, I am Fine{Enter} 
```

如果你想在热键中使用它，你可以做这样的事情。

```
~$CapsLock::
Send {CapsLock Up}
Send, Hi {Enter}
KeyWait, Capslock, D
Send {CapsLock Up}
Send, How Are you{Enter} 
KeyWait, Capslock
Send {CapsLock Up}
Send, I am Fine{Enter}
return 
```

（它在我的计算机上出现故障，但可能是因为我在虚拟机上。）

[设置大写锁定状态](http://www.autohotkey.com/docs/commands/SetNumScrollCapsLockState.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-11T18:49:22.130

抱歉，如果为时已晚，但无论如何我都为寻找解决方案的每个人都这样做了，我假设您每次按下大写锁定时都想更改它以成为不同的文本：

```
 CapsLock::
CapsLock0:
    {
    SendRaw Hi 
    Sleep 500
    KeyWait, CapsLock, D
    {
    Goto CapsLock1
    }
    }
    Return

CapsLock1:
    {
    SendRaw How Are you 
    Sleep 500
    KeyWait, CapsLock, D
    {
    Goto CapsLock2
    }
    }
    Return

CapsLock2:
    {
    SendRaw I am Fine
    Sleep 500
    KeyWait, CapsLock, D
    {
    Goto CapsLock0
    }
    }
    Return 
```

睡眠的解释，使用它是因为如果你在没有它的情况下按下 CapsLock 则会执行 2 个命令块，特别需要它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T09:44:28.293

这个怎么样...

```
Capslock::
Send, Hi{Enter}
Sleep, 400 ; sleep briefly to allow the CapsLock key to be released
KeyWait, Capslock, D
Send, How Are you?{Enter}
Sleep, 400
KeyWait, Capslock, D
Send, I am fine Thank you.{Enter}
Return 
```

这个怎么样...

```
Capslock::
Send, Hi{Enter}
KeyWait, Capslock, U
KeyWait, Capslock, D
Send, How Are you?{Enter}
KeyWait, Capslock, U
KeyWait, Capslock, D
Send, I am fine Thank you.{Enter}
Return 
```

# vb.net - 最佳数据传输层

> ID：13872888
> 
> 赞同：-1
> 
> 时间：2012-12-14T04:56:19.903
> 
> 标签：vb.net, networking, data-transfer, transport

我在 TCP 中创建了一个点对点程序，然后合并到 UDP。我想更改它，以便您可以发送文件，但是 UDP 不支持这一点，并且 TCP 比 TCP 慢。由于这些是最常见的数据传输层，我很想了解我不知道的任何其他层。

那么还有哪些其他层可以与 VB.net 一起使用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:39:05.373

我可能会为此使用 HTTP。你想发明的东西已经在那里发明了。

这可能是您服务器端的良好起点：

[http://msdn.microsoft.com/en-us/library/system.net.httplistener(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.net.httplistener(VS.80).aspx)

和客户：

[http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)

# apache - htaccess - 拒绝来自未授权域的请求

> ID：13872892
> 
> 赞同：8
> 
> 时间：2012-12-14T04:56:49.753
> 
> 标签：apache, .htaccess

我有一个网站“www.mysite.com”，它有自己的 IP。现在几个月以来，我看到几个域指向我的 ip 服务器（它不是共享 ip）。我可以使用那些未经授权的域浏览整个网站，它们在谷歌中被我的内容和所有内容编入索引。

如何将我的 htaccess 设置为仅允许对“www.mysite.com”的请求？

**更新**

这是到目前为止我写的带有建议的.htaccess，但不知何故，第一页仍然提供，没有图像

.htaccess

```
SetEnvIfNoCase Referer "^http://(www.)?thiefdomain.com" spam_ref  
SetEnvIfNoCase Referer "^http://(www.)?thiefdomain2.com" spam_ref2

<FilesMatch "(.*)">  
    Order Allow,Deny  
    Allow from all  
    Deny from env=spam_ref  
    Deny from env=spam_ref2  
</FilesMatch>  

RewriteEngine On  
RewriteCond %{REQUEST_FILENAME} -s [OR]  
RewriteCond %{REQUEST_FILENAME} -l [OR]  
RewriteCond %{REQUEST_FILENAME} -d  
RewriteRule ^.*$ - [NC,L]  
RewriteRule ^.*$ index.php [NC,L] 
```

如何避免显示第一页？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T17:48:58.810

如果您想使用 mod_rewrite，您可以检查`SERVER_NAME`以阻止未经授权的域：

```
RewriteEngine on
RewriteCond %{SERVER_NAME} ^(www\.)?thiefdomain1\.example$ [OR]
RewriteCond %{SERVER_NAME} ^(www\.)?thiefdomain2\.example$ [OR]
RewriteCond %{SERVER_NAME} ^(www\.)?thiefdomain3\.example$
RewriteRule ^ - [F] 
```

或者

```
RewriteEngine on
RewriteCond %{SERVER_NAME} !^(www\.)?yourdomain\.example$
RewriteCond %{SERVER_NAME} !^(www\.)?yourdomain-alias\.example$
RewriteRule ^ - [F] 
```

* * *

如果你有 root 权限，你也可以使用基于名称的虚拟主机来解决问题，如下所示：

```
NameVirtualHost *:80

<VirtualHost 192.0.2.100:80>
  ServerName dummy
  <Location />
    Order deny,allow
    Deny from all
  </Location>
  ...
</VirtualHost>

<VirtualHost 192.0.2.100:80>
  ServerName www.yourdomain.example
  ServerAlias yourdomain.example
  ...
</VirtualHost> 
```

第一个`VirtualHost`定义被视为**默认**虚拟主机。如果 192.0.2.100 作为 thiefdomain1.example、thiefdomain2.example、thiefdomain3.example 或除 www.yourdomain.example 或 yourdomain.example （在第二个中定义`VirtualHost`）之外的任何其他主机名访问，Apache 引用第一个`VirtualHost`并返回 403 Forbidden 状态.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:05:29.270

~~1）你的小偷来自哪些IP？你能阻止这些IP吗？~~

2) 您是否曾向 Google 举报他们窃取内容（如果您能证明您是所有者）？

3) 您是否已将此情况报告给域名托管服务商？（例如 GoDaddy）

4）您还可以重写您的 HTML，使其成为绝对路径而不是相对路径：

例如，相对路径如下所示：

```
< a href="/page/2.html">page 2</a> 
```

绝对路径将包括您的网站地址：

```
<a href="http://www.site.com/page/2.html">page 2</a> 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-12-14T05:46:07.933

我不能特别说 htaccess。但通过编程，你可以做到这一点。比如说，您的域是 www.mydomain.com。假设浏览器正在请求您网站的 about-me 部分。您可以执行以下操作。我正在展示 PHP（因为我对 php 了解甚少）。

```
<?php
if($_SERVER['HTTP_HOST'] == "your domain")
{
//show content
}
else
{
echo "your are not authorized to view contents from here.";
} 
```

如果您更喜欢其他语言，他们可能会通过自己的方式获取主机名。

# objective-c - 表视图 setEditing 在 indexPath 处选定单元格

> ID：13872893
> 
> 赞同：1
> 
> 时间：2012-12-14T04:56:53.133
> 
> 标签：objective-c, xcode, uitableview, setediting

我想在长按事件的选定索引处启用表格视图中的单个单元格的编辑，除了它可以编辑整个表格之外，一切正常。如何仅在选定的单元格上启用编辑？

```
-(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer {

    CGPoint p = [gestureRecognizer locationInView:self.savedPropertyTableView];

    NSIndexPath *indexPath = [self.savedPropertyTableView indexPathForRowAtPoint:p];
            if (indexPath == nil) {
            [self setEditing:YES animated:YES];
            NSLog(@"long press on table view but not on a row");
        }

        else {
            [self setEditing:YES animated:YES];
            NSLog(@"long press on table view at row %d", indexPath.row);
        } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:01:20.117

而不是整个表格使该单个单元格可编辑：

```
UITableViewCell *newCell = [yourTable cellForRowAtIndexPath:indexPath];

[newCell setEditing:YES animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:02:02.660

不是一个确切的解决方案，而是相同的结果，我创建了一个滑动手势，它就像我希望的那样工作（删除单个单元格）

在表格视图单元格中：

```
UISwipeGestureRecognizer *sgdr = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSlideRight:)];
[sgdr setDirection:UISwipeGestureRecognizerDirectionRight];
[self.savedPropertyTableView addGestureRecognizer:lpgr]; 
```

然后创建方法：

```
-(void)handleSlideRight:(UISwipeGestureRecognizer *)gestureRecognizer {
    CGPoint p = [gestureRecognizer locationInView:self.savedPropertyTableView];

    NSIndexPath *indexPath = [self.savedPropertyTableView indexPathForRowAtPoint:p];
    if (indexPath == nil)
    {
        [self setEditing:YES animated:YES];
        NSLog(@"slide on table view but not on a row");
    }

    else
    {
        [self setEditing:YES animated:YES];
        NSLog(@"slide on table view at row %d", indexPath.row);
    }
} 
```

# django - 单个 Django 应用程序，多个实例

> ID：13872894
> 
> 赞同：4
> 
> 时间：2012-12-14T04:56:57.837
> 
> 标签：django, web-applications, django-models

我是 Django 新手，对 Django 应用程序设计有疑问。

我想编写一个应用程序并运行多个实例，每个实例都在不同的 URL 下。每个实例都将其数据存储在自己的表中，并且每个实例都有不同的用户集。不同的实例可以从不同的 URL 访问，但来自同一个域并在后台运行相同的应用程序代码。

例如，如果我有两个实例，则可以从以下 URL 访问它们：

*   [http://www.domain.com/instance1](http://www.domain.com/instance1)
*   [http://www.domain.com/instance2](http://www.domain.com/instance2)

我已经定义了我的模型，我可以运行一个应用程序，一个实例，多个用户就好了。但是，我不清楚如何支持多个实例。

我已经查看了站点框架，这几乎是我想要的，但我需要将所有内容都托管在同一个域下。

关于如何使用 Django 运行单个应用程序的多个实例的任何提示？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-14T09:34:42.737

您可以简单地将 django 项目复制到另一个地方并创建一个新的 apache 站点。

例如：

在 /etc/apache2/sites-available/domain.eu_first 中创建一个虚拟主机

```
<VirtualHost *:80>
ServerName domain.eu
WSGIScriptAlias /first /var/www/first/wsgi

<Directory /var/www/first>
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

和

/etc/apache2/sites-available/domain.eu_second 中的虚拟主机

```
<VirtualHost *:80>
ServerName domain.eu
WSGIScriptAlias /second /var/www/second/wsgi

<Directory /var/www/second>
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

现在将您的项目复制到第一个和第二个。`a2ensite domain.eu_first`并通过and激活您的 apache 站点`a2ensite domain.eu_second`

您必须证明您在项目中仅使用了相对链接。

答案未经证实，所以请检查一下。

# php - 使用PHP中的函数获取文本文件

> ID：13872895
> 
> 赞同：-3
> 
> 时间：2012-12-14T04:57:22.150
> 
> 标签：php, file, function

假设我有如下 PHP 函数：

**函数.php**

```
<?php
function getDataInFile($PMTA_FILE){
    $PMTA_DATE = date("Y-m-d");
    $lineFromText = explode("\n", $PMTA_FILE);
    $number_bar_charts = 13;
    $row = 0;
    $cate = "";
    $total ="";
    $fail = "";
    $mailSuc = "";
    $title = "";
       foreach($lineFromText as $line){
            if($row < $number_bar_charts){
              $words = explode(";",$line);
              $dateTime .= ','.$words[0];
                if($title == ""){
                   $title = $words[0];
                }
                $cate .= ','."'$words[5]'";
                $total .= ','.$words[6];
                $fail .= ','.$words[7];
                $mailSuc .= ','.((int)$words[6] - (int)$words[7]);                          
            $row++;
      }   
     }

}

?> 
```

这是下面的代码，我调用该函数在`getFile.php`.

```
<?php 
include("include/function.php");
$PMTA_DATE = date("Y-m-d");
getDataInFile("../stats_domain_recepteur.affinitead.net.".$PMTA_DATE.".txt");

?> 
```

实际上，它无法从文件中读取数据，我收到了错误消息`Undefined variable: dateTime in C:\wamp\www\chat\include\function.php on line 15`，`Notice: Undefined offset: 5 in C:\wamp\www\chat\include\function.php on line 19`....

我不知道如何解决这个问题，请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:02:30.073

这些只是通知。它们并不是会破坏您的代码的可怕错误，但一些代码审查员会让您修复它们。PHP 只是给你一个礼貌的推动，但无论如何都会起作用。致命错误是会阻止 PHP 走上正轨的大而糟糕的问题。

以下是 PHP 发现的问题...

1.  You're appending data to the string $dateTime on each iteration. On the first pass through the variable doesn't yet exist. PHP doesn't really care, but will issue a warning. To get rid of that problem, define $dateTime before you use it.

    `$dateTime = null;`

2.  The second problem is an array out of bounds exception. You are trying to do something with $words[5] when that array index doesn't exist. In general, you should check that array indexes, variables and other fun stuff actually exist before you try to use them.

    `$cate .= sprintf(",'%s'", isset($word[5]) ? $word[5] : '');`

If you don't want to see Notices and Warnings reported in the error log, see [PHP Error Handling](http://php.net/manual/en/book.errorfunc.php) to learn how to set which error levels you want to see in your log.

You should also read all about the [file_get_contents](http://php.net/manual/en/function.file-get-contents.php) function to actually get the file in the first place!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:03:01.500

add $dateTime = ''; before foreach($lineFromText as $line){

this will works fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:04:29.887

The error messages are 100% legit: you're trying to use a variable which hasn't been initialized before. Put this code above the loop and you'll get rid of this error:

```
$dateTime = ''; 
```

Regarding the second error - it tells that you don't have 6-th element in the array, so you'd better replace that code with a check:

```
$cate .= sprintf(",'%s'", isset($word[5]) ? $word[5] : ''); 
```

Extrapolate this check to other index accesses, as well.

# map - 使用 foldl/map 查找排列？

> ID：13872899
> 
> 赞同：1
> 
> 时间：2012-12-14T04:57:32.410
> 
> 标签：map, functional-programming, scheme, fold

教授向我们展示了一种查找列表所有排列的冗长方法，即 (abc) => ((abc) (acb) (bac) (bca) (cba) (cab))，但她说可能是使用 foldl 或 map 可以更有效地完成。

对功能性思维方式来说是全新的。我这辈子都想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:07:32.020

[http://rosettacode.org/wiki/Permutations#Scheme](http://rosettacode.org/wiki/Permutations#Scheme)上有方案版本（您提到了“foldl”，所以这个页面上也有 haskell 版本）：

```
(define (insert l n e)
  (if (= 0 n)
      (cons e l)
      (cons (car l) 
            (insert (cdr l) (- n 1) e))))

(define (seq start end)
  (if (= start end)
      (list end)
      (cons start (seq (+ start 1) end))))

(define (permute l)
  (if (null? l)
      '(())
      (apply append (map (lambda (p)
                           (map (lambda (n)
                                  (insert p n (car l)))
                            (seq 0 (length p))))
                     (permute (cdr l)))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:45:27.757

这个怎么样？

```
#lang racket    
(define l '(apple banana cheese desk))
(remove-duplicates (for/list ([i 1000000]) (shuffle l))) 
```

自然，您会希望增加长列表的常数....

（#nothelpfulsorry）

# javascript - 执行 innerHTML 后按钮上的文本不会改变

> ID：13872902
> 
> 赞同：3
> 
> 时间：2012-12-14T04:57:40.667
> 
> 标签：javascript, html, button, listbox, innerhtml

使用 JQuery 时，如果您使用 javascript 更改它们的值，某些 ui 元素（例如下拉框或按钮）将不会自动更新它们的 ui。尽管该值已正确更新，但在屏幕上看起来没有任何变化。为了解决这个问题，Jquery 需要在更改值后使用“刷新”方法。在此页面上，您可以找到信息和语法：http: [//jquerymobile.com/test/docs/forms/docs-forms.html](http://jquerymobile.com/test/docs/forms/docs-forms.html)（向下滚动到“刷新表单元素）

我遇到了一些 html 元素上的文本没有正确更新的问题，尤其是按钮和列表框（选择/选项）。它应该自动执行此操作，但有时文本只是坚持其先前的值。text 或 innerHTML 的值是正确的，只是不可见。

这是按钮的问题。我使用Javascript来获取innerHTML并对其进行更改。

HTML 标记：

```
<button id="btn" onclick"simple_function">A</button> 
```

Javascript：

```
function simple_function()
{
    var anArray = aFunctionThatReturnAnArray();
    document.getElementById("btn").innerHTML = anArray[0];
} 
```

通过使用警报消息，我可以看到更改前后的值。这些警告信息是正确的：点击后的值确实是anArray[0]的值，但是我浏览器中按钮的文本没有改变，它停留在“A”上。这个按钮令人沮丧的是，有时文本确实会发生变化，但只是在我第一次更改 html 时（这发生在第一次向用户显示按钮之前）。之后对该函数的其他调用不再更改文本。然而，innerHTML 发生了变化，正如警报消息所证实的那样。所以一切都在“工作”，但用户不会知道他们实际点击的是什么，因为按钮的文本是不可见的改变。

我通过使用 < span > 作为按钮的 innerHTML 并将 span 的 innerHTML 更改为数组中的值来解决此问题。这有效：每次更改 innerHTML 时，它都会在屏幕上可见。虽然我有一个解决方案，但这只是一种解决方法，我很好奇可能导致这种情况的原因是什么？

我对列表框有类似的问题。默认值为“每天”。（请参阅下面的完整代码）。

```
document.getElementById("interval_list").selectedIndex 
```

和

```
document.getElementById("interval_list").selectedIndex = 3; 
```

同样，在函数内部，值始终是正确的，但即使函数显示 selectedIndex 为 3（应该是“从不”），下拉菜单的文本也会每天保持不变。我无法通过在任何地方添加 < span > 来解决这个问题，所以我被卡住了。

一些备注：

*   html中没有重复的id（用find来检查）
*   页脚中的按钮没有这个问题，段落、跨度或标题也没有。
*   我尝试在 fiddle 和 wc3 的 tryit 编辑器中复制类似的代码：它在那里工作。所以它一定是简单功能之外的东西把它弄坏了？
*   检查浏览器兼容性：这不是问题（我不使用 IE）。

列表框完整代码：

```
 <div class="ui-grid-a">

            <div class="ui-block-a">

                <p style="padding-right: 1em; padding-top: 0.4em;" align="right">AUTO REMIND</p>
                <p style="padding-right: 1em; padding-top: 1em;" align="right">INTERVAL</p>

            </div>

            <div class="ui-block-b">

                <div id="auto_remind_radio_buttons" data-role="controlgroup" data-type="horizontal">

                    <input type="radio" onclick="document.getElementById('interval_list').selectedIndex = 0;" name="auto_remind_button" id="auto_remind_on" value="male"/>
                    <label for="auto_remind_on"><img src="images/correct.png" alt="NO" width="26" height="21"></label>
                    <input type="radio" onclick="document.getElementById('interval_list').selectedIndex = 3;" name="auto_remind_button" id="auto_remind_off" value="female"/>
                    <label for="auto_remind_off"><img src="images/wrong.png" alt="NO" width="26" height="21"></label>

                </div>

                <select id="interval_list" name="Single-line ListBox example">

                    <option id="1" value="1">daily</option>
                    <option id="2" value="2">weekly</option>
                    <option id="3" value="4">monthly</option>
                    <option id="4" value="5">never</option>

                </select>

            </div>

        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:48:56.033

**document.getElementById("btn").innerHTML=**

注意你的案例——HTML 应该大写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:30:05.303

评论多于回答。使用以下代码：

```
<button id="b0">b0</button>
<button id="b1" onclick="
  document.getElementById('b0').innerHTML = 'foo';
">click me</button> 
```

FF 和 IE 8 中按钮的 innerHTML 变化，您使用的是什么浏览器？

与您的选择问题相同，以下适用于 IE 8 和 FF：

```
<select id="sel0">
  <option>Sunday
  <option>Monday
  <option>Tuesday
  <option>Wednesday
</select>

<button onclick="
  document.getElementById('sel0').selectedIndex = 1;
">Select Monday</button>

<button onclick="
  document.getElementById('sel0').selectedIndex = 3;
">Select Wednesday</button> 
```

# php - Javascript警报框和确认后

> ID：13872904
> 
> 赞同：0
> 
> 时间：2012-12-14T04:57:46.247
> 
> 标签：php, javascript

我想创建一个 javascript 来检查文本框的值，所以如果文本框为空白，它将不会进入下一页。并且检查后（如果所有条件都为真），它将返回文本框的结果。

我创建了这个 javascript：

```
function cekdata(myform)
{
    var id = document.myform.clientid.value;
        var nama = document.myform.nama.value;
        var divisi = document.myform.divisi.value;
        var way = document.getElementById('twoway').value;
        var ori = document.myform.lokasi.value;
        var desti = document.myform.tujuan.value;
        var ket = document.myform.keterangan.value;
        var tpergi = document.myform.tglb.value;
        var jpergi = document.myform.jamb.value;
        var mpergi = document.myform.menitb.value;
        var pegi = tpergi+', '+jpergi+':'+mpergi;
        var tplg = document.myform.tglp.value;
        var jplg = document.myform.jamp.value;
        var mplg = document.myform.menitp.value;
        var plg = tplg+', '+jplg+':'+mplg;
  if (document.myform.clientid.value == "")
  {
    alert("Please Fill Your ID");
    myform.clientid.focus();
    return false;
  }
  else
  if (document.myform.nama.value == "")
  {
    alert("Please Fill Passenger Name");
    myform.nama.focus();
    return false;
  }
  else
  if (document.myform.lokasi.value == "")
  {
    alert("Please Fill Origin Location");
    myform.lokasi.focus();
    return false;
  }
  else
  if (document.myform.tujuan.value == "")
  {
    alert("Please Fill Your Destination");
    myform.tujuan.focus();
    return false;
  }
  else
  if (document.myform.tglb.value == "")
  {
    alert("Please Fill Departure Date");
    myform.tglb.focus();
    return false;
  }
  else
  if (document.myform.novehicle.value == "")
  {
    alert("Please Fill Vehicle Number");
    myform.novehicle.focus();
    return false;
  }
  else
  if (document.myform.driverid.value == "")
  {
    alert("Please Fill Driver ID");
    myform.driverid.focus();
    return false;
  }
  else
  if(document.getElementById('twoway').checked)
  {
      if (document.myform.tglp.value == "")
      {
        alert("Please Fill Return Date");
        myform.tglp.focus();
        return false;
      }
      else
      if (document.myform.tglb.value > document.myform.tglp.value)
      {
        alert("Return date must bigger than departure date");
        myform.tglp.focus();
        return false;
      }
  }
  else
  {
        var a = window.confirm("CONFIRMATION :\nID : " +id+"\nName : "+nama+"\nDivision : "+divisi+"\nOne Way : "+way+"\nOrigin : "+ori+"\nDestination : "+desti+"\nNotes : "+ket+"\nDeparture : "+pegi+"\nArrived :"+plg);
        if (a==true)
        {
            return true;
        }
        else
        {
            return false;
        }
  }
} 
```

我这样称呼这个函数：

```
<form name="myform" onsubmit="return cekdata(this);" method="POST" action="<?php $_SERVER["PHP_SELF"]; ?>"> 
```

但我得到的是确认框永远不会出现，它返回true（并转到下一页）。那么，如何改变这个条件，让我的确认框先出现，然后点击确定后，进入下一页，如果取消，什么都不做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:10:14.547

```
*Just make slight changes in your javascript just passevent on form submit*

<input type="submit" value="Submit" name="submit" onClick="return cekdata(this,event);" /> 
```

当您的文本框为空或为空时，请写入 event.preventDefault() 而不是 return false；

```
function cekdata(myform,evt)
{
var id = document.myform.clientid.value;
    var nama = document.myform.nama.value;
    var divisi = document.myform.divisi.value;
    var way = document.getElementById('twoway').value;
    var ori = document.myform.lokasi.value;
    var desti = document.myform.tujuan.value;
    var ket = document.myform.keterangan.value;
    var tpergi = document.myform.tglb.value;
    var jpergi = document.myform.jamb.value;
    var mpergi = document.myform.menitb.value;
    var pegi = tpergi+', '+jpergi+':'+mpergi;
    var tplg = document.myform.tglp.value;
    var jplg = document.myform.jamp.value;
    var mplg = document.myform.menitp.value;
    var plg = tplg+', '+jplg+':'+mplg;
if (document.myform.clientid.value == "")
{
alert("Please Fill Your ID");
myform.clientid.focus(); 
```

**evt.preventDefault();** }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:04:34.197

我最好建议您将**cekdata(this)**放在您的**提交标签**而不是**表单标签**中。像

```
<input type="submit" value="Submit" name="submit" onClick="return cekdata();" /> 
```

而且当你这样做了

```
var id = document.myform.clientid.value; 
```

那你为什么要再次使用相同的

```
if (document.myform.clientid.value == "") 
```

更好的使用

```
var id = document.myform.clientid;

if (id.value == "")
{
   alert("Please Fill Your ID");
   id.focus();
   return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:04:43.087

试试这个：

删除**最后一个**else 部分并粘贴到 javascript 函数末尾的行下方。

删除以下行：

```
var a = window.confirm("CONFIRMATION :\nID : " +id+"\nName : "+nama+"\nDivision : "+divisi+"\nOne Way : "+way+"\nOrigin : "+ori+"\nDestination : "+desti+"\nNotes : "+ket+"\nDeparture : "+pegi+"\nArrived :"+plg); 
```

而是使用这个，

```
var a = window.confirm("Are you sure?");

if (a==true)
{
     return true;
}
else
{
     return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T05:31:14.383

像这样更改代码：

```
function cekdata(myform)
{
    var id = document.myform.clientid.value;
    var nama = document.myform.nama.value;
    var divisi = document.myform.divisi.value;
    var way = document.getElementById('twoway').value;
    var ori = document.myform.lokasi.value;
    var desti = document.myform.tujuan.value;
    var ket = document.myform.keterangan.value;
    var tpergi = document.myform.tglb.value;
    var jpergi = document.myform.jamb.value;
    var mpergi = document.myform.menitb.value;
    var pegi = tpergi+', '+jpergi+':'+mpergi;
    var tplg = document.myform.tglp.value;
    var jplg = document.myform.jamp.value;
    var mplg = document.myform.menitp.value;
    var plg = tplg+', '+jplg+':'+mplg;
  if (id == "")
  {
    alert("Please Fill Your ID");
    myform.clientid.focus();
    return false;
  }
  else
  if (nama == "")
  {
    alert("Please Fill Passenger Name");
    myform.nama.focus();
    return false;
  }
  else
  if (ori == "")
  {
    alert("Please Fill Origin Location");
    myform.lokasi.focus();
    return false;
  }
  else
  if (desti == "")
  {
    alert("Please Fill Your Destination");
    myform.tujuan.focus();
    return false;
  }
  else
  if (tpergi == "")
  {
    alert("Please Fill Departure Date");
    myform.tglb.focus();
    return false;
  }
  else
  if(document.getElementById('twoway').checked)
  {
      if (tplg == "")
      {
        alert("Please Fill Return Date");
        myform.tglp.focus();
        return false;
      }
      else
      if (tpergi > tplg)
      {
        alert("Return date must bigger than departure date");
        myform.tglp.focus();
        return false;
      }
  }
  else
  {
        var a = window.confirm("CONFIRMATION :\nID : " +id+"\nName : "+nama+"\nDivision : "+divisi+"\nOne Way : "+way+"\nOrigin : "+ori+"\nDestination : "+desti+"\nNotes : "+ket+"\nDeparture : "+pegi+"\nArrived :"+plg);
        if (a==true)
        {
            return true;
        }
        else
        {
            return false;
        }
  }
} 
```

然后它工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T07:26:33.493

我会推荐使用 Jquery insead 的 Javascript。

这是我为您制作的简短而甜蜜的代码，请随意使用！

**查询代码**

```
$(document).ready(function() {
  $('#submit').click(function(){
     var id = $('#id').val();
     var dataString = 'id='+ id;
     if(id==''){
        alert("Please Fill Your ID");
        $('#id').focus();
        return false;  
         }
     else if(confirm("Are you sure? Your id = "+id))
        {
          $.ajax({
          type: "POST",
          url: "ajxRegistration.php",
          data: dataString,
          cache: false,
          success: function(e)
           {
          e.stopImmediatePropagation();
           }
     });
      return false;
    }
    });
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T10:21:27.067

试试这个 -

```
if(confirm('Are you sure?'))
    return true;
 else
    return false; 
```

# django - 从另一个应用程序的子路径提供第二个应用程序

> ID：13872905
> 
> 赞同：2
> 
> 时间：2012-12-14T04:57:54.037
> 
> 标签：django, apache, mod-wsgi, wsgi

我正在尝试使用 WSGI 从同一服务器为两个 django 项目提供服务，但需要一个从 example.com/（我们称之为 app1）运行，另一个从 example.com/foo/（app2）运行。我尝试使用格雷厄姆的评论中描述的单独的守护进程来设置它[，](http://mediacore.com/blog/hosting-multiple-wsgi-applications-with-apache)但是当其中一个路径是另一个路径的子目录时，这似乎不起作用。对 example.com/foo/... 的所有请求仍由 app1 处理。

有什么方法可以实现我正在寻找的东西，而无需将两个项目合并为一个（这将是一项艰巨的任务）？

这是我目前在我的站点配置中拥有的：

```
WSGIDaemonProcess app1 \
    python-path=<path for app1's virtualenv>
WSGIDaemonProcess app2 \
    python-path=<path for app2's virtualenv>
WSGIScriptAlias / <path to app1's wsgi.py>
WSGIScriptAlias /foo/ <path to app2's wsgi.py>

<Location />
WSGIProcessGroup app1
</Location>

<Location /foo/>
WSGIProcessGroup app2
</Location> 
```

更新：

我尝试使用 LocationMatch 而不是 Location 来尝试将每个请求都委托给不以 /foo 开头的路径以及委托给 app2 的路径，但由于某种原因这也不起作用。现在，对 /foo/... 的请求会导致错误日志中的这一行出现 500 错误：

```
mod_wsgi (pid=12032): Exception occurred processing WSGI script '<app1's wsgi.py>'. 
```

有任何想法吗？

上面的底部已更改为

```
<LocationMatch "^/(?!foo.*)">
WSGIProcessGroup app1
</LocationMatch>

<LocationMatch "^/foo.*">
WSGIProcessGroup app2
</LocationMatch> 
```

更新 2：

进一步查看错误日志后，看起来 /foo/... 的请求正在由 app1 的 wsgi.py 文件处理，但使用 app2 的 python 路径，这意味着正在应用正确的 WSGIProcessGroup 指令。因此，问题似乎是 ScriptAlias 冲突。是否可以让这个别名也成为正则表达式以确保 /foo... 不匹配 /？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:17:07.850

利用：

```
WSGIDaemonProcess app1 \
    python-path=<path for app1's virtualenv>
WSGIDaemonProcess app2 \
    python-path=<path for app2's virtualenv>

WSGIScriptAlias /foo <path to app2's wsgi.py>
WSGIScriptAlias / <path to app1's wsgi.py>

WSGIProcessGroup app1

<Location /foo>
WSGIProcessGroup app2
</Location> 
```

WSGIScriptAlias 指令的顺序很重要。嵌套最深的 URL 路径必须放在首位。

这个特定的订购问题记录在：

*   [http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines](http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines)
*   [http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html](http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T05:55:28.147

正则表达式被证明是解决方案。WSGIScriptAliasMatch 能够匹配路径的特定正则表达式，而不仅仅是路径的开头，这会导致冲突，因为显然两条路径都以 / 开头。

对于后代，这是最终配置：

```
WSGIDaemonProcess app1 \
    python-path=<path for app1's virtualenv>
WSGIDaemonProcess app2 \
    python-path=<path for app2's virtualenv>
WSGIScriptAliasMatch "^/(?!foo.*)" <path to app1's wsgi.py>
WSGIScriptAlias /foo <path to app2's wsgi.py>

<LocationMatch "^/(?!foo.*)">
WSGIProcessGroup app1
</LocationMatch>

<LocationMatch "^/foo.*">
WSGIProcessGroup app2
</LocationMatch> 
```

# javascript - 随机数生成器的好形式？

> ID：13872906
> 
> 赞同：0
> 
> 时间：2012-12-14T04:57:58.560
> 
> 标签：javascript, random

我想就做一个随机数生成器得到一些意见。我阅读了几种不同的方法来做到这一点，这是我在做了一点阅读后创建的方式。它是可接受的形式吗？有什么可预见的问题吗？

```
function master() {
   function generate() { 
      var pickFrom = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
      var j = pickFrom.length;
      // Generates a random number
      var i = Math.floor(Math.random() * j + 1); 
      // Picks a number based on what number was picked.
      var code = pickFrom.charAt(i); 
      document.write(code);
   }

   x = 1;
   while(x) {
      generate();
      x--;
   }
}

master(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:00:54.790

这实际上取决于应用程序以及您的目标、性能、效率或什么。

当需要一个非常可靠且性能驱动的随机发生器时，我实际上使用了这个参考。这应该有帮助:)

[http://social.msdn.microsoft.com/Forums/eu/csharpgeneral/thread/fd8664ac-aa75-47df-94b8-b64580dab93c](http://social.msdn.microsoft.com/Forums/eu/csharpgeneral/thread/fd8664ac-aa75-47df-94b8-b64580dab93c)

# asp.net - WebAPI 错误 404.0 - 未找到

> ID：13872908
> 
> 赞同：8
> 
> 时间：2012-12-14T04:57:59.913
> 
> 标签：asp.net, asp.net-mvc, iis, asp.net-web-api, asp.net-mvc-routing

我们在将 WebAPI 服务部署到生产服务器时遇到问题。尝试访问控制器时，我们收到“您要查找的资源已被删除、名称已更改或暂时不可用”。

我们从标准 WebAPI 模板创建了一个新项目，它也有同样的问题，所以绝对不是我们的代码导致了问题。我们还有另一台与同一托管公司合作的服务器，部署到该服务器后一切正常。服务器之间的所有 IIS 功能都是相同的。

在某一阶段，我们将应用程序池设置为 .Net Framework 2.0，而网站没有抱怨这一点，因此它甚至没有尝试启动服务。我们在同一个 Web 应用程序上也有一个 odata 服务，它运行良好。所以这似乎与MVC路由和WebAPI有关。

我们将我们能想到的每个 dll 都复制到了服务器上，但没有解决问题。

有没有人对导致上述错误的两台服务器之间可能有什么不同有任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T05:18:42.257

试试这篇文章

[HTTP 错误 404.0 0 在 MVC 中未找到](http://www.c-sharpcorner.com/UploadFile/abhikumarvatsa/http-error-404-0-not-found-in-mvc/)

或这个

[在 IIS 6.0 和 IIS 7.0 经典模式下运行 ASP.NET MVC：路由问题的解决方案](http://www.tugberkugurlu.com/archive/running-asp-net-mvc-under-iis-6-0-and-iis-7-0-classic-mode---solution-to-routing-problem)

或尝试将以下内容添加到 Web.config：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/> 
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-12T00:10:46.020

使用 OWIN 运行 WebApi 并且您忘记在启动类中包含以下行时，也会显示此错误消息：

```
app.UseWebApi(config); 
```

# php - Facebook ssl 认证错误

> ID：13872909
> 
> 赞同：0
> 
> 时间：2012-12-14T04:58:03.980
> 
> 标签：php, facebook, oauth

正如他们在[这里](https://stackoverflow.com/questions/5444006/facebook-php-sdk-giving-an-error?answertab=votes#tab-top)提到的，我在 base_facebook.php 中添加了一行，然后
它抛出了这个异常 **OAuthException：必须使用活动访问令牌来查询有关当前用户的信息**
，提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:33:20.157

我最近遇到了同样的问题，我所做的是更改了 base_facebook.php 中的 SSL 变量

尝试以下设置。

```
CURLOPT_SSL_VERIFYPEER => false
CURLOPT_SSL_VERIFYHOST => 2 
```

# regex - 正则表达式排除匹配字符串，但不是另一个字符串的一部分

> ID：13872910
> 
> 赞同：0
> 
> 时间：2012-12-14T04:58:18.303
> 
> 标签：regex, matlab

我对这篇文章有一个后续问题：[RegEx to exclude match if a certain word is present, but not another partial word](https://stackoverflow.com/questions/12162921/regex-to-exclude-match-if-a-certain-word-is-present-but-not-another-partial-word)。

如果给出以下字符串。

```
x*vec*grad(vec) 
```

我如何找到'vec'而不是'grad（vec）'？

我假设我需要对搜索表达式使用类似以下的内容，但这对我不起作用。

```
vec(?!(?<=grad\(vec)) 
```

我还想忽略括号内的空格，即它应该适用于以下内容。

```
x*vec*grad( vec ) 
```

我正在使用 MATLAB 的正则表达式函数。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:08:38.430

这在 c# 中有效，它应该很容易移植到 MATLAB：

```
(?<!grad\()vec 
```

它匹配`vec*grad`但不匹配`x*grad(vec)`。

诀窍是使用负后视 ( `<!`) 而不是累加来反转正后视 ( `<=`)。

# android - 是否可以在 android 浏览器中阻止站点列表？

> ID：13872912
> 
> 赞同：0
> 
> 时间：2012-12-14T04:58:21.103
> 
> 标签：android

> **可能重复：**
> [在 android webview 中阻止某些 URL 以确保安全](https://stackoverflow.com/questions/10121089/block-certain-urls-for-security-in-android-webview)

我想通过编程方式阻止浏览器中的 url 列表。有人知道吗？任何帮助将不胜感激。谢谢。

# extjs - 如何像 Ext.Msg.alert 一样模糊背面的面板

> ID：13872913
> 
> 赞同：0
> 
> 时间：2012-12-14T04:58:31.250
> 
> 标签：extjs

我已经用新的 Ext.Window 创建了新的弹出窗口我不希望用户在这个窗口之外点击。如何设置非活动或模糊后面板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:35:41.860

放`modal:true`

阅读[文档](http://docs.sencha.com/ext-js/4-1/)。

.

# java - 格式化linux命令的输出

> ID：13872915
> 
> 赞同：0
> 
> 时间：2012-12-14T04:59:00.260
> 
> 标签：java, linux, jsp, unix

我正在开发一个Web应用程序。通过使用它，我想在远程机器LINUX机器上执行一个命令。现在我的要求是我想在我的网页（JSP页面）中显示命令的输出。是否有任何 java API 来简化输出的解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:11:49.627

我对JSP不熟悉。但是，如果您正在开发 Web 应用程序，则必须使用 HTML/CSS。将 Linux 命令的输出存储在一个变量中。然后你就完成了 Linux 命令。现在转到 JAVA 进行解析。我确信有很好的模块可用于解析。然后使用 HTML、CSS 格式化输出。

# session - ASP.NET 通用提供程序：会话状态不会被删除？

> ID：13872916
> 
> 赞同：1
> 
> 时间：2012-12-14T04:59:00.750
> 
> 标签：session, asp.net-membership

我们刚刚从旧的 ASP.NET 成员（从 MVC3）迁移到新的 ASP.NET 通用提供程序，因为我们的 SQL 目标是 Azure SQL。迁移期间的 SQL 脚本非常痛苦！无论如何，我们将会话状态设置为 SQL（即`<sessionState mode="Custom"`在 web.confg 中）。

现在，如果站点意外关闭，（比如调试 => 停止）当我们恢复时，我们会收到错误： `Violation of PRIMARY KEY constraint 'PK__Sessions__C9F492908756A0EE'. Cannot insert duplicate key in object 'dbo.Sessions'. The duplicate key value is (<randomstring>). The statement has been terminated.`

正如预期的那样，我确认会话确实在`[db].[SessionId]`带有主键的表内的数据库中具有相同的条目。

**问题：**谁负责删除该数据库条目？我知道如果正确启动注销，它应该被代码清除。但是如果它已经存在，不应该有一些自动错误处理（在会员本身中）吗？如果是，为什么不触发？如果没有，我该如何添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:59:43.350

清除过期会话是 ASPState 数据库中包含的 SQL Server 代理的工作。您不必添加它。

[会话过期 - SqlSessionStateStore](http://msdn.microsoft.com/en-us/library/aa478952.aspx#session_expiration)

**更新：2012 年 12 月 19 日**

在`DefaultSessionStateProvider`中，每个请求中都会清除过期的会话。

```
public override void InitializeRequest(HttpContext context)
{
    this.PurgeIfNeeded();
}

private void PurgeExpiredSessions()
{
    bool flag;
    SessionEntities sessionEntity = ModelHelper.CreateSessionEntities(this.ConnectionString);
    try
    {
        DateTime utcNow = DateTime.UtcNow;
        IQueryable<Session> expiredSessions = QueryHelper.GetExpiredSessions(sessionEntity);
        IEnumerator<Session> enumerator = expiredSessions.GetEnumerator();
        try
        {
            while (true)
            {
                flag = enumerator.MoveNext();
                if (!flag)
                {
                    break;
                }
                Session current = enumerator.Current;
                sessionEntity.DeleteObject(current);
            }
        }
        finally
        {
            flag = enumerator == null;
            if (!flag)
            {
                enumerator.Dispose();
            }
        }
        sessionEntity.SaveChanges();
    }
    finally
    {
        flag = sessionEntity == null;
        if (!flag)
        {
            sessionEntity.Dispose();
        }
    }
}

private void PurgeIfNeeded()
{
    this.PurgeExpiredSessions();
} 
```

# c - 在 C 中初始化嵌套结构的正确方法

> ID：13872917
> 
> 赞同：0
> 
> 时间：2012-12-14T04:59:01.187
> 
> 标签：c, struct, initialization, memset

使用嵌套结构时，我倾向于执行以下操作。我想知道这是否是`structs`在这种特殊情况下初始化的正确方法，或者是否有更好的方法。

```
#include <string.h>
#include <stdlib.h>

typedef struct inner_struct { 
   char *name;
   int account;
} inner;

typedef struct outer_struct {
   int count;
   char *company; 
   inner *my_inner;
} outer;

outer *
initialize_outer (size_t max) {
   outer *out = malloc(sizeof (outer) * max);
   if (out) {
      memset(out, 0, sizeof *out * max);
      out->count = 0;
      out->company = NULL; 
   }   
   return out;
}

inner *
initialize_inner () {
   inner *in = malloc(sizeof (inner));
   if (in) {
      memset(in, 0, sizeof *in);
      in->account = 0;
      in->name = NULL; 
   }   
   return in; 
}

int main(int argc, char *argv[]){
   int i;
   size_t max_out = 20;
   outer *my_out = initialize_outer(max_out);
   for (i = 0; i<max_out;i++) {
      my_out[i].my_inner = initialize_inner();
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T05:27:43.633

为什么不使用`calloc()`：

```
outer *
initialize_outer (size_t max) {
    return calloc(max, sizeof(outer));
}

inner *
initialize_inner (size_t max) {
    return calloc(max, sizeof(inner));
} 
```

* * *

但是，为了简单起见，我可能会这样做：

```
typedef struct outer_struct {
    int count;
    char *company; 
    inner my_inner[];
} outer;

outer *
initialize (size_t max_out, size_t max_in) {
    return calloc(1, (sizeof (outer) + sizeof (inner) * max_in) * max_out);
}

int main(int argc, char *argv[]){
    size_t max_out = 20, max_in = 10; 
    outer *my_out = initialize(max_out, max_in);
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:39:45.820

除了将多余的赋值为零之外，您可能应该从 initialize_outer 调用 initialize_inner，因为如果没有“inner”，“outer”似乎无法满足任何目的。

这带来了另一个问题：您应该考虑使用适当的、面向对象的程序设计和私有封装。

内部.h

```
typedef struct inner_struct;

inner* inner_init (void);
void   inner_free (inner* in); // you need a cleanup function!

// an example of a "setter" function:
void init_set_name (inner* in, const char* name);  

// similar setter and getter functions needed here 
```

内部.c

```
#include "inner.h"

typedef struct { 
   char* name;
   int   account;
} inner;

inner* inner_init (void) 
{
   inner* in = calloc(1, sizeof (inner));
   if (in == NULL)
   {
     // error_handling
   }

   return in; 
}

void inner_free (inner* in)
{
  // if in->name was allocated dynamically, free it here

  free(in);
}

void init_set_name (inner* in, const char* name)
{
  // assign name to in->name, possibly malloc memory for it
} 
```

外部.h

```
#include "inner.h"

typedef struct outer_struct;

outer* outer_init (void);
void   outer_free (outer* out);

// setter and getter functions needed here 
```

外部.c

```
#include "outer.h"

typedef struct 
{
   int count;
   char *company; 
   inner *my_inner;
} outer;

outer* outer_init (void) 
{
   outer* out = calloc(1, sizeof(outer));
   if(out == NULL)
   {
     // error handling
   }

   out->my_inner = inner_init();

   return out;
}

void outer_free (outer* out)
{
  inner_free(out->my_inner);
  free(out);
} 
```

the_application.c

```
#include "outer.h"

#define MAX_OUT 20

int main(int argc, char *argv[]){

   outer* out_arr [MAX_OUT]

   for(int i=0; i<MAX_OUT; i++)
   {
     out_arr[i] = outer_init();
   }

   ...

   for(int i=0; i<MAX_OUT; i++)
   {
     outer_free(out_arr[i]);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T05:15:36.103

```
outer *
initialize_outer (size_t max) {
    outer *out = malloc(sizeof (outer) * max);
    if (out) {
        memset(out, 0, sizeof (outer) * max);
        out->count = 0; // no need assign 0 to 'account' and NULL to 'name' field
        out->company = NULL; // because memset already assigns 0 to it.
    }   
    return out;
}

inner *
initialize_inner (size_t max) {
    inner *in = malloc(sizeof (inner) * max);
    if (in) {
        memset(in, 0, sizeof (inner) * max);
        in->account = 0; // no need assign 0 to 'account' and NULL to 'name' field
        in->name = NULL; // because memset already assigns 0 to it.
    }   
    return in; 
} 
```

试试这个......我希望这会有所帮助......

# jquery - Internet Explorer 中表格的滚动条未显示在正确位置

> ID：13872918
> 
> 赞同：0
> 
> 时间：2012-12-14T04:59:02.217
> 
> 标签：jquery, html, css

我这里有一个嵌入的 jsfiddle（请在 IE 和另一个主要浏览器中打开）：

[http://jsfiddle.net/6rCyH/51/embedded/result/](http://jsfiddle.net/6rCyH/51/embedded/result/)

[http://jsfiddle.net/6rCyH/51/](http://jsfiddle.net/6rCyH/51/)（普通小提琴，所以你可以看到代码）

要使用小提琴，只需多次单击“添加问题”，它将在下表中追加行：

我的问题是列在 Safari、Opera、Chrome 和 Firefox 的主要浏览器中对齐正确，但在 IE 中未正确对齐。

每列的每个表格单元格都包含相同的宽度，但我可以看到的问题是 IE 中的滚动条比其他浏览器中的表格更深入。我的问题是，将滚动条放在表格旁边的最佳方式是什么，这样它就不会导致其他列的对齐问题？该表应该是一个带有固定标题的滚动表。

下面是代码：

HTML：

```
<div id="details">
    <table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
      <thead>
        <tr>
          <th width="9%" class="qid">Question No</th>
          <th width="29%" class="question">Question</th>
          <th width="62%" class="optandans">Option and Answer</th>
        </tr>
      </thead>
    </table>
    <div id="qandatbl_onthefly_container">
    <table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0" border="0" width="100%">
      <tbody>
      </tbody>
    </table>
    </div>
  </div> 
```

**更新的 CSS：**

```
#qandatbl_onthefly_container
{
    width:100%;
    overflow:scroll;
    max-height:600px;
}

#qandatbl, #qandatbl_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
}
#qandatbl
{
    width:100%;
    margin-left:0;
}
#qandatbl_onthefly
{
    width:100%;
}

.qid {
    /*width:15%;*/
    font-weight:bold;
    border:1px black solid;
    border-collapse:collapse;
}

/*.question {
    width:30%;
    border:1px black solid;
    border-collapse:collapse;
}*/

.question {
    /*min-width:14%;
    max-width:14%;*/
    max-width:0.1%;
    border:1px black solid;
    border-collapse:collapse;
      line-height: 0;
}

.noofanswers{
    min-width:15%;
    max-width:15%;
    /*padding-top:5%;
    padding-bottom:5%;*/
}

.optandans{
    /*min-width:30%;
    max-width:30%;*/
    border:1px black solid;
    border-collapse:collapse;
}

.option{
    min-width:100%;
    max-width:100%;
    /*padding-top:5%;
    padding-bottom:5%;*/
}

.answer {
    min-width:100%;
    max-width:100%;
    /*padding-top:5%;
    padding-bottom:5%;*/
} 
```

**查询：**

```
function insertQuestion(form)
{
//updated variables

var $tbody = $('#qandatbl_onthefly > tbody');
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $td = $("<td class='extratd'  width='62%'>");
    var $qid = $("<td class='qid' width='9%'></td>").text(qnum);
    var $question = $("<td class='question' width='29%'></td>");

.................
 function code here
.................

setWidth();

}

function setWidth() {
    var questionCellWidth = $("#qandatbl_onthefly tbody .question").width();
    console.log(questionCellWidth);
    var questionCellHeight = $("#qandatbl_onthefly tbody .question").height();
    $(".textAreaQuestion").css({
        "width": (questionCellWidth - 6) + "px",
        "height": (questionCellHeight) + "px"
    });
}

$(document).ready(function(){
var flag = true;
    if(flag == true)
    {
        var tbl_qanda = $("#qandatbl").width();
        $("#qandatbl").css({"width": (tbl_qanda - 16)+ "px"});
    }
    var tbl_qanda_onthefly = $("#qandatbl_onthefly").width();
    if(tbl_qanda > tbl_qanda_onthefly)
    {
         $("#qandatbl").css({"width": (tbl_qanda_onthefly - 16)+ "px"});
         $("#qandatbl_onthefly_container").css({"width": (tbl_qanda_onthefly)+ "px"});
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:54:13.270

您需要对 css 进行一些更改

一世。在`#qandatbl`添加`float:left;`

ii. 在`#qandatbl_onthefly_container`添加`clear:both`

iii. `.question textarea`并`#qandatbl_onthefly_container`添加_`overflow:auto`

第三个与您的问题无关，但没有该滚动 textarea 在 ie 上看起来不太好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:50:22.857

您必须为 ie 和 ie 版本定义附加样式，如下所示。这更正了标题对齐。

```
#qandatbl{float:left;} 
```

# java - 如果未显式声明 Transformer，hibernate 如何与 HQL 查询一起工作

> ID：13872920
> 
> 赞同：1
> 
> 时间：2012-12-14T04:59:06.903
> 
> 标签：java, hibernate, hql

不知道在哪里可以找到hibernate的实现机制。我有很多关于休眠的问题，但我们可以从这个开始：

如果有这样的 HQL：

```
from B b
where b.x =: x
and b.y =: y 
```

和这样的查询代码：

```
Query query = session.createQuery(hql.toString()); 
```

将所有字段设置为 B 的默认转换器是什么？我发现这甚至不需要 setter 或 getter 来设置值。

或者说，它和这个有什么区别：

```
Query query = session.createQuery(hql.toString()).setResultTransformer(Transformers.aliasToBean(B.class)); 
```

感谢您阅读本文，欢迎提出任何想法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T06:02:21.800

当使用默认的 Transformer 时，它期望类是休眠实体，这意味着它必须与某个表映射，在第二种情况下是

```
Query query=session.createQuery(hql.toString()).setResultTransformer(Transformers.aliasToBean(B.class)); 
```

B 不是休眠实体（未映射到其简单 POJO 的任何表，没有任何休眠特定注释）

例如，有时我们有一个类，我们想根据查询返回的数据填充数据。该类是一个简单的 POJO 而不是 Hibernate 实体，因此 Hibernate 不会识别该类。这可以通过使用 Transformers 在 Hibernate 中完成。让我们看一个简单的例子，展示如何使用 Transformer。首先，让我们看一个名为“UserActivityStat”的简单 POJO 类。这个类包含一些统计信息。我们想直接通过运行 Hibernate HQL 来填充实例的统计信息。

```
public static class UserActivityStat{
    private int totalPhotos;
    private int totalViews;
    public UserActivityStat() {   }
    public int getTotalPhotos() {
          return totalPhotos;
    }
    public void setTotalPhotos(int totalPhotos) {
         this.totalPhotos = totalPhotos;
    }
    public int getTotalViews() {
      return totalViews;
    }
    public void setTotalViews(int totalViews) {
        this.totalViews = totalViews;
    }
 } 
```

现在，让我们看一个简单的方法，它使用 hibernate HQL 和 Transformers 类来填充“UserActivityStat”实例的数据

```
public UserActivityStat getUserActivityStat(User user) {
     return (UserActivityStat) hibernateSession.createQuery(
             "select count(*) as totalPhotos, sum(p.views) as totalViews " +
             "from Photo p " + 
             "where p.user = :user " +
             "p.dateCreated  <= :now")
         .setParameter("user", user)
         .setTimestamp("now", new Date())
         .setResultTransformer(Transformers.aliasToBean(UserActivityStat.class))
         .uniqueResult();
} 
```

请注意，两列中的每一列都有一个别名。此别名必须是“UserActivityStat”类的属性名称。还要注意在“Transformers”类中使用“setResultTransformer”。

# rest - RESTful Web API 中的两因素身份验证

> ID：13872925
> 
> 赞同：3
> 
> 时间：2012-12-14T04:59:26.053
> 
> 标签：rest, asp.net-web-api, two-factor-authentication

我正在使用直接 html 5 和 web api restful 服务构建一个新的 asp.net web api 应用程序。我已经在使用表单身份验证和 [Authorize] 属性来保护我的 Web api 调用。我试图尽可能地忠于宁静的原则。

我正在模仿现有应用程序的功能，该应用程序使用两因素身份验证并使用 asp.net Web 表单。双重身份验证不用于登录，而是用于通过站点和插件远程访问另一台计算机的附加任务。

现有的 Web 应用程序使用会话状态来存储生成并通过电子邮件发送给用户的 pin。然后，当用户输入 pin 时，会根据会话状态中的 pin 进行检查。

所以看起来我的选择是......

1.  加密在服务器上生成的 pin 并在 javascript 中将其发送回客户端。此选项似乎存在安全风险。这将是一个更宁静的选择。
2.  一位同事建议使用类似于 Amazon S3 使用公钥/私钥对的方法。
3.  尽管使用了 web api，但仍使用会话状态。

那么在这些选项中，最好的选择是什么？还有其他可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:46:35.463

我不是 100% 确定我了解您的架构，但您的安全性在任何时候都不应依赖于客户端，这似乎非常相关。

假设用户在他们的浏览器中有一个 javascript 调试器（大多数人实际上没有意识到），以及一个自定义构建的插件。

因此，二级 PIN 挑战应该嵌入到服务器端的“远程处理”协议中。如果它是基于 RDP 或 VNC 的东西，应该可以将给定用户的连接密码即时更改为一次性生成的 PIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:57:59.753

我相信，你不应该过多关注 RESTful 原则（等等，我说过了吗？:)）... 你看，一方面是理论，另一方面是实践。在实践中，您经常需要为了安全而打破 RESTful 原则！让我们来看看`nonce`- 它是为每个请求生成的一个很大的随机数，如果`nonce`之前没有发送过相同的请求，那么它会在服务器上进行检查。这涉及存储状态（随机数） - 即，它不是无状态的，但它有时对安全性至关重要。另外，顺便说一下，经常使用的 OAuth 不是 RESTful。

为了加密 PIN，您不应该使用 JavaScript 客户端！但是，您可以在使用的域 JavaScript 客户端上实现某种加密端点：

1.  使用`XMLHTTPRequest`生成对端点 URL 的请求（例如，`/api/encrypt`）。
2.  服务器收到这个请求并在服务器上加密PIN，即PIN在清除状态下不会进入浏览器。
3.  服务器将加密的 PIN 返回给 JavaScript 客户端。
4.  客户端将加密的 PIN 发送给客户。

你的同事给了一个很好的建议！Amazon 是最好的 REST API 实现之一。

还要检查我的想法： [https](https://stackoverflow.com/questions/15418764/looking-for-feedback-on-my-rest-style-api-authentication-design-and-two-factor-a) ://stackoverflow.com/questions/15418764/looking-for-feedback-on-my-rest-style-api-authentication-design-and-two-factor-a 。

# php - PHP 会话和 JavaScript window.location.replace

> ID：13872931
> 
> 赞同：3
> 
> 时间：2012-12-14T05:00:09.913
> 
> 标签：php, javascript, session

我的使用：

```
window.location.replace("calendar.php"); 
```

似乎根本无法使用我的 PHP 会话变量。当我使用这个调用时，我的代码不能使用后退按钮：

```
<?php
  session_start();

  if($_SESSION['loggedin'] != TRUE) {
    header("Location: index.php");
  }
?> 
```

有谁知道为什么会这样？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:10:40.930

我想你想要`window.location.href = "calendar.php";`。这应该取决于您的会话变量，并且不会破坏后退按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T21:54:52.030

这就是为什么你有：

*   **window.location.replace("calendar.php");**

但是也

- **window.location.assign("calendar.php");**

第一个可能会清除会话，而第二个会保留它。

# python - TCP 扫描器 Python 多线程

> ID：13872936
> 
> 赞同：1
> 
> 时间：2012-12-14T05:00:32.560
> 
> 标签：python, multithreading, tcp

我正在尝试为网络掩码构建一个小型 tcp 扫描仪。

代码如下：

```
import socket,sys,re,struct
from socket import *

host = sys.argv[1]

def RunScanner(host):
    s = socket(AF_INET, SOCK_STREAM)
    s.connect((host,80))
    s.settimeout(0.1)  
    String = "GET / HTTP/1.0"
    s.send(String)
    data = s.recv(1024)
    if data:
       print "host: %s have port 80 open"%(host)

Slash = re.search("/", str(host))

if Slash :
   netR,_,Wholemask = host.partition('/')
   Wholemask = int(Wholemask)
   netR = struct.unpack("!L",inet_aton(netR))[0]
   for host in (inet_ntoa(struct.pack("!L", netR+n)) for n in range(0, 1<<32-Wholemask)):
      try:
         print "Doing host",host
         RunScanner(host)
      except:
         pass
else:
   RunScanner(host) 
```

启动：python script.py 10.50.23.0/24

我遇到的问题是，即使设置了一个荒谬的低 settimeout 值，覆盖 255 个 ip 地址也需要很长时间，因为它们中的大多数都没有分配给机器。

如果端口关闭，我怎样才能使扫描仪速度更快，不会卡住。多线程？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-31T14:47:42.743

你可以试试我过去用线程做的事情。使用您的输入更改它应该非常容易：

```
import socket
from multiprocessing import Pool
from multiprocessing.dummy import Pool as ThreadPool 

def scan(d):
    s = socket.socket()
    s.settimeout(0.1)
    port = 80  # port number is a number, not string
    try:
        address = '192.168.0.' + str(d)
        s.connect((address, port)) 
    except Exception as e: 
        print("something's wrong with %s:%d. Exception is %s" % (address, port, e))
    finally:
        s.close()

pool = ThreadPool() 

d = range(1, 255)
pool.map(scan, d)

pool.close()
pool.join() 
```

# java - 是否可以将枚举值存储在字符串中？

> ID：13872937
> 
> 赞同：0
> 
> 时间：2012-12-14T05:00:34.907
> 
> 标签：java, hibernate, enums

其实我的java程序就像......

```
public class Schedule {
    public static enum RepeatType {
        DAILY, WEEKLY, MONTHLY;
    }

    public static enum WeekdayType {
        MONDAY(Calendar.MONDAY), TUESDAY(Calendar.TUESDAY), 
        WEDNESDAY(Calendar.WEDNESDAY), THURSDAY(Calendar.THURSDAY),
        FRIDAY(Calendar.FRIDAY), SATURDAY(Calendar.SATURDAY), SUNDAY(Calendar.SUNDAY);

        private int day;

        private WeekdayType(int day) {
            this.day = day;
        }

        public static List<Date> generateSchedule(RepeatType repeatType,List<WeekdayType> repeatDays) {
            // ...
            // here some logic i wrote
        }
    }
} 
```

我正在将该方法调用到我的业务类中，如下所示......

```
@RemotingInclude
public void createEvent(TimetableVO timetableVO) {
    if ("repeatDays".equals(timetableVO.getSearchKey())) {
        List<Date> repeatDaysList = Schedule.generateSchedule(timetableVO.getRepeatType() , timetableVO.getRepeatDays());
    }
} 
```

最后`TimetableVO`是

```
@Entity
@Table(name="EC_TIMETABLE")
public class TimetableVO extends AbstractVO {
    // ...
    private RepeatType repeatType;

    // But in this case the method generateSchedule(-,-) was not calling.
    private List<WeekdayType> repeatDays;
    // ... 
} 
```

所以我的问题是以下哪一个是更好的陈述......

```
 private List<WeekdayType> repeatDays; 
```

（或者）

```
 // If we give like this `How to Convert Enum type to String` because generateSchedule() method taking enum type value....
 private String repeatDays; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:05:16.397

每个枚举类型都有内置的方法`name()`来获取枚举名称作为 a`String`并`valueOf(String)`朝另一个方向发展。这可能就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T05:19:00.483

任何枚举类型的值都可以使用 toString() 方法转换为字符串。您可能没有意识到（我一开始没有意识到）如果您声明一个`RepeatType`变量`r1`，那么`r1`可以`String`使用`toString()`方法 EG将其转换为`r1.toString()`

这个程序：

```
public class Main {

    /** Creates a new instance of Main */
    public Main() {
    }

    public static enum RepeatType {
        DAILY, WEEKLY, MONTHLY;
    }    

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        RepeatType r1;
        r1 = RepeatType.DAILY;
        System.out.printf("R1 VALUE: %s\n", r1.toString());

        r1 = RepeatType.WEEKLY;
        System.out.printf("R1 VALUE: %s\n", r1.toString());

        r1 = RepeatType.MONTHLY;
        System.out.printf("R1 VALUE: %s\n", r1.toString());

    }

} 
```

将输出实际的枚举值如下：

```
R1 VALUE: DAILY
R1 VALUE: WEEKLY
R1 VALUE: MONTHLY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:34:09.417

最后我通过使用以下得到了正确的答案..

```
 @Entity
@Table(name="EC_TIMETABLE")
public class TimetableVO extends AbstractVO {
    // ...
    private RepeatType repeatType;

    // But in this case the method generateSchedule(-,-) was not calling.
    private WeekdayType repeatDays;
    // ... 
} 
```

在我的服务方法中，我将 Enum (WeekdayType) 转换为 List，所以它很容易......

```
 List<WeekdayType> weekdayList= new ArrayList<WeekdayType>();
    weekdayList.add(timetableVO.getRepeatDays());
List<Date> repeatDaysList = Schedule.generateSchedule(timetableVO.getRepeatType() , weekdayList); 
```

# html - 如何创建像在亚马逊上显示的下拉菜单？

> ID：13872939
> 
> 赞同：-1
> 
> 时间：2012-12-14T05:00:46.357
> 
> 标签：html, css, list, drop-down-menu

我对网络开发有点陌生。我正在尝试创建一个下拉菜单。这类似于：

```
<select>
   <option value="volvo">Volvo</option>
   <option value="saab">Saab</option>
   <option value="opel">Opel</option>
   <option value="audi">Audi</option>
</select> 
```

但这并不是我想要的。我想创建一个与 Amazon.com 上的下拉列表非常相似的下拉列表（“搜索”旁边的下拉列表），如下图所示。因此，每当用户单击按钮时，列表将作为文本显示在按钮中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:06:09.550

首先，请查看[http://www.codecademy.com](http://www.codecademy.com)`HTML`以了解其对、`CSS`、`JavaScript`和（更多信息请点击此处）jQuery的简要介绍。粗略了解`jQuery`和后，您可以毫不费力地创建这种效果`CSS`。

[http://jquery.com/](http://jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:53:16.823

如果您只需要在用户单击按钮时显示下拉菜单，那么最好在 jquery 中进行。请像下面这样

```
<script type="text/javascript" >
$("#downarrow").click(function(){
$("#dropdown").show();
})
</script>

<div id="downarrow"></div>
<div id="dropdown" style="display:none;">
<select>
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="opel">Opel</option>
<option value="audi">Audi</option>
</select> 
</div> 
```

# c# - 我们如何使用 C# 在 AxAcroPDFLib.AxAcroPDF( Pdf ) 中实现搜索功能

> ID：13872946
> 
> 赞同：1
> 
> 时间：2012-12-14T05:01:38.200
> 
> 标签：c#, pdf

我正在使用 AxAcroPDFLib.AxAcroPDF 库使用以下行在 winforms 控件中显示文件，

```
AxAcroPDFLib.AxAcroPDF.src = path; 
```

它很好地加载了文件，当我们单击 CTRL+F 时，它会显示搜索框并很好地搜索搜索到的字符串。

但是我们需要使用 Dotnet 代码以编程方式实现搜索功能，以自动搜索 pdf 文件中的字符串。

为此，我没有找到任何受支持的方法来以编程方式查找字符串。

请提供在 PDF 文件中实现搜索功能的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:11:50.107

据我所知，这个 ActiveX 控件没有实现文本搜索功能。作为一种解决方法，这有点像我想要的，但足以满足我的需要：假设您已将控件声明为 AxAcroPDFLib.AxAcroPDF 对象，例如 pdfFoo，首先选择控件，然后使用 SendKeys.Send 进行文本搜索，某事像（这是 VB，但 C# 应该工作相同）：

```
pdfFoo.Select()
SendKeys.Send("^f")  'send control-f to get search box
SendKeys.Flush()
SendKeys.Send("text to search for")
SendKeys.Flush() 
```

# javascript - 巫术/水豚：无法使用 :js => true 登录

> ID：13872947
> 
> 赞同：5
> 
> 时间：2012-12-14T05:01:54.387
> 
> 标签：javascript, ruby-on-rails, capybara, sorcery

我已经使用水豚一段时间了，但我是巫术新手。我有一个非常奇怪的问题，如果我在没有 Capybara 的 :js => true 功能的情况下运行规范，我可以正常登录，但是如果我尝试在规范上指定 :js => true ，则找不到用户名/密码。

这是身份验证宏：

```
module AuthenticationMacros
  def sign_in
    user = FactoryGirl.create(:user)
    user.activate!
    visit new_sessions_path
    fill_in 'Email Address', :with => user.email
    fill_in 'Password', :with => 'foobar'
    click_button 'Sign In'
    user
  end
end 
```

在这样的规格中调用：

```
feature "project setup" do
  include AuthenticationMacros

  background do
    sign_in
  end

  scenario "creating a project" do
    "my spec here"
  end 
```

上面的代码工作正常。但是，如果我从（在这种情况下）更改场景规范

```
scenario "adding questions to a project" do 
```

到

```
scenario "adding questions to a project", :js => true do 
```

登录失败并出现“不正确的用户名/密码”组合。从字面上看，唯一的变化是 :js => true。我正在使用默认的 capybara javascript 驱动程序。（加载 Firefox）

Any ideas what could be going on here? I'm completely stumped. I'm using Capybara 2.0.1, Sorcery 0.7.13\. There is no javascript on the sign in page and save_and_open_page before clicking 'sign in' confirms that the correct details are entered into the username/password fields. Any suggestions really appreciated - I'm at a loss.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T05:39:32.663

The default capybara javascript driver is Selenium according to the capybara doc. Because Selenium executes in a separate thread, you have to disable transactional fixtures or the Selenium thread will not have access to the data you create in the database. See [https://github.com/jnicklas/capybara#using-capybara-with-testunit](https://github.com/jnicklas/capybara#using-capybara-with-testunit). That section has these notes about disabling transactional fixtures.

# android - 滚动时如何在android的自定义列表视图中保持按钮的状态

> ID：13872950
> 
> 赞同：0
> 
> 时间：2012-12-14T05:02:20.557
> 
> 标签：android, android-listview, android-button

我有`ListView`三`TextView`三`Button`和三的习惯`Chronometer`。情况是我正在`ListView`正确加载。但是在加载时，`ListView`我`ListView`通过检查一个参数来禁用某些按钮。到目前为止，`ListView`它正在正确显示它的行。

但是当我滚动`ListView`之前启用的那个时候`Button`被禁用了。我做错了什么我没有得到可以请指出我的错误或任何建议。

这是我的适配器类。

```
 public class OrderSmartKitchenAdapter extends BaseAdapter {
    private int flagDeliveryComplete = 0;
    private int flagPreparationComplete = 0;
    private int flagPreparationStarted = 0;
    private List<OrderitemdetailsBO> list = new ArrayList<OrderitemdetailsBO();
    private int orderStatus;

    public OrderSmartKitchenAdapter() {
        // TODO Auto-generated constructor stub         
    }

    public void setOrderList(List<OrderitemdetailsBO> orderList) {
        this.list = orderList;
    }       

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        Log.i("OrderItemList Size :-", Integer.toString(list.size()));
        return list.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(final int position, View convertView,ViewGroup parent) {
        // TODO Auto-generated method stub

        final ViewHolder viewHolder ; 

        if (convertView == null) 
        {
            layoutInflater = LayoutInflater.from(myContext);
            convertView = layoutInflater.inflate(R.layout.table_row_view,null);
            viewHolder = new ViewHolder();

            viewHolder.txtTableNumber = (TextView) convertView.findViewById(R.id.txtTableNumber);
            viewHolder.txtMenuItem = (TextView) convertView.findViewById(R.id.txtMenuItem);
            viewHolder.txtQuantity = (TextView) convertView.findViewById(R.id.txtQuantity);
            viewHolder.txtOrderAcceptanceTime = (TextView) convertView.findViewById(R.id.txtOrderAcceptanceTime);
            viewHolder.txtElapsedTimeOfOrderAcceptance = (Chronometer) convertView.findViewById(R.id.txtElapsedTimeOfOrderAcceptance);
            viewHolder.btnPreparationStart = (Button) convertView.findViewById(R.id.btnPreparationStart);
            viewHolder.btnPreparationStart.setTag(position);
            viewHolder.txtElapsedTimeForPreparation = (Chronometer) convertView.findViewById(R.id.txtElapsedTimeForPrepatration);
            viewHolder.btnPreparationComplete = (Button) convertView.findViewById(R.id.btnPreparationCompleted);
            viewHolder.btnPreparationComplete.setTag(position);
            viewHolder.txtElapsedTimeForDeliveryComplete = (Chronometer) convertView.findViewById(R.id.txtElapsedTimeForCompleation);
            viewHolder.btnDeliveryComplete = (Button) convertView.findViewById(R.id.btnOrderComplete);
            viewHolder.btnDeliveryComplete.setTag(position);

            convertView.setTag(viewHolder);
        }

        else{

                viewHolder = (ViewHolder)convertView.getTag();
                viewHolder.btnDeliveryComplete.setTag(position);
                viewHolder.btnPreparationComplete.setTag(position);
                viewHolder.btnPreparationStart.setTag(position);
        }

        if (list.get(position) != null) {

            OrderitemdetailsBO orderitemdetailsBO = new OrderitemdetailsBO();
            orderitemdetailsBO = list.get(position);

            viewHolder.txtTableNumber.setText(orderitemdetailsBO.getOrderitemid().toString());
            viewHolder.txtMenuItem.setText(orderitemdetailsBO.getMenuitemname().toString());
            viewHolder.txtQuantity.setText(orderitemdetailsBO.getQuantity().toString());

            Log.i("Table Number :-", Long.toString(orderitemdetailsBO.getOrderitemid()));
            Log.i("Menu Name :-", orderitemdetailsBO.getMenuitemname().toString());
            Log.i("Quantity", orderitemdetailsBO.getQuantity().toString());

            Date acceptTime = new Date();
            acceptTime = orderitemdetailsBO.getOrderdatetime();

            viewHolder.txtOrderAcceptanceTime.setText(DateUtil.getDateAsString(acceptTime,"HH:mm"));
            Log.i("Order Accept Time :-", acceptTime.getMinutes() + ":"+ acceptTime.getSeconds());

            orderStatus = orderitemdetailsBO.getOrderstatus();

            Date preparationStartTime = new Date();
            preparationStartTime = orderitemdetailsBO.getPreparationstarttime();

            if(preparationStartTime != null)

            {
                Log.i("OrderSmartKitchenActivity", "2 Order Acceptance Time :-" + 
                        "Menu Item id "+ orderitemdetailsBO.getOrderitemid() 
                        + " Preparation Start time " + orderitemdetailsBO.getPreparationstarttime()                         
                    );

                viewHolder.txtElapsedTimeOfOrderAcceptance.stop();
                Log.i("Preparation Start Time :-",preparationStartTime.getMinutes() + ":"   + preparationStartTime.getSeconds());
                viewHolder.txtElapsedTimeOfOrderAcceptance.setText(DateUtil.getDateAsString(preparationStartTime,"MM:ss"));

                viewHolder.txtElapsedTimeOfOrderAcceptance.stop();

                viewHolder.btnPreparationStart.setEnabled(false);
                viewHolder.btnPreparationStart.setClickable(false);
                viewHolder.btnPreparationStart.setBackgroundColor(Color.LTGRAY);

            }

            else 
            {
                Long n = acceptTime.getTime();
                Log.i("OrderSmartKitchenActivity", "Order Acceptance Time :-" + 
                        "Menu Item id "+ orderitemdetailsBO.getOrderitemid() 
                        + " Acceptance time" +  Long.toString(n)
                        + " Preparation Start time " + orderitemdetailsBO.getPreparationstarttime()

                    );

                // Calculate Time difference
                viewHolder.txtElapsedTimeOfOrderAcceptance.setBase(SystemClock.elapsedRealtime() - System.currentTimeMillis() + n);
                viewHolder.txtElapsedTimeOfOrderAcceptance.getBase();
                viewHolder.txtElapsedTimeOfOrderAcceptance.start();     
                viewHolder.txtElapsedTimeOfOrderAcceptance.setFormat("%s");                                     
            }

            viewHolder.btnPreparationStart.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(final View v) {
                            // TODO Auto-generated method stub

                            if (flagPreparationStarted == 0) {
                                flagPreparationStarted++;

                                v.startAnimation(playAnimation());
                                handler.postDelayed(new Runnable() {

                                    @Override
                                    public void run() {
                                        // TODO Auto-generated method stub
                                        v.clearAnimation();
                                        Date currentTime = new Date();              

                                        // Set Preparation Start Time.
                                        viewHolder.txtElapsedTimeOfOrderAcceptance.stop();
                                        Date setTime = new Date(currentTime.getTime() * 1000);

                                        OrderitemdetailsBO orderitemdetailsBO = list.get(position); 
                                        orderitemdetailsBO.setPreparationstarttime(setTime);

                                        String orderDetails = "2";
                                        String getPosition = Integer.toString(position);
                                        viewHolder.btnPreparationStart.setBackgroundColor(Color.LTGRAY);
                                        new sendOrderStatusToServer().execute(orderDetails,getPosition);

                                    }
                                }, 5000);

                            }

                            else {

                                handler.removeCallbacksAndMessages(null);
                                v.clearAnimation();
                                flagPreparationStarted = 0;
                                Log.i("Handler Removed. :-", "Here");

                            } 
                        }
                    });

            String preparationTime = orderitemdetailsBO.getOrderpreparationtime();

            if(preparationTime != null && orderStatus  == order_preparationComplete)
            {
                viewHolder.txtElapsedTimeForPreparation.setText(preparationTime);
                viewHolder.txtElapsedTimeForPreparation.stop();

                viewHolder.btnPreparationComplete.getTag(position);
                viewHolder.btnPreparationComplete.setEnabled(false);
                viewHolder.btnPreparationComplete.setClickable(false);
                viewHolder.btnPreparationComplete.setBackgroundColor(Color.LTGRAY);
            }

            else if( orderStatus == order_preparationStart || orderStatus == orderReceived || orderStatus == order_delivered){

                Long n = acceptTime.getTime();
                Log.i("Preparation Start Time :-", Long.toString(n));

                viewHolder.txtElapsedTimeForPreparation.setBase(SystemClock.elapsedRealtime() - System.currentTimeMillis() + n);
                viewHolder.txtElapsedTimeForPreparation.getBase();
                viewHolder.txtElapsedTimeForPreparation.start();
                viewHolder.txtElapsedTimeForPreparation.setFormat("%s");            
            }

            viewHolder.btnPreparationComplete.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(final View v) {
                            // TODO Auto-generated method

                            if (flagPreparationComplete == 0) {
                                flagPreparationComplete++;

                                v.startAnimation(playAnimation());
                                handler.postDelayed(new Runnable() {

                                    @Override
                                    public void run() {
                                        // TODO Auto-generated method stub

                                        v.clearAnimation();

                                        OrderitemdetailsBO orderitemdetailsBO = list.get(position); 
                                        Date date = orderitemdetailsBO.getPreparationstarttime();

                                        if(date != null)
    {
                                            viewHolder.txtElapsedTimeForPreparation.stop();
                                            Date currentTime = new Date();
                                            Calendar calendar = Calendar.getInstance();

                                            int minute = calendar.get(Calendar.MINUTE);
                                            int second = calendar.get(Calendar.SECOND);

                                            orderitemdetailsBO.setOrderpreparationtime(calendar.get(Calendar.MINUTE) +":" +calendar.get(Calendar.SECOND));
                                            String orderDetails = "3";
                                            String getPosition = Integer.toString(position);
                                            viewHolder.btnPreparationComplete.setBackgroundColor(Color.LTGRAY);
                                            new sendOrderStatusToServer().execute(orderDetails,getPosition);
                                        }

                                        else
                                        {
                                            Toast.makeText(myContext, "Please Enter Preparation Start Time.", Toast.LENGTH_LONG).show();
                                        }                       

                                    }
                                }, 5000);

                            } else {

                                handler.removeCallbacksAndMessages(null);
                                v.clearAnimation();
                                flagPreparationComplete = 0;

                            }
                        }
                    });

            String deleveredTime = orderitemdetailsBO.getOrderdeliverytime();

            if(deleveredTime != null && orderStatus == order_delivered)
            {

                Date delevered = new Date(Long.parseLong(deleveredTime));                   

                viewHolder.txtElapsedTimeForPreparation.setText(DateUtil.getDateAsString(delevered,"MM:ss"));
                Log.i("Preparation Start Time :-", delevered.getMinutes()+":"+delevered.getSeconds());
                viewHolder.txtElapsedTimeForPreparation.stop();

                viewHolder.btnDeliveryComplete.getTag(position);
                viewHolder.btnDeliveryComplete.setEnabled(false);
                viewHolder.btnDeliveryComplete.setClickable(false);
                viewHolder.btnDeliveryComplete.setBackgroundColor(Color.LTGRAY);
            }

            else if(orderStatus == 3 || orderStatus == 2 || orderStatus == 1)               
            {                                   
                Long n = acceptTime.getTime();
                Log.i("Preparation Start Time :-", Long.toString(n));

                viewHolder.txtElapsedTimeForDeliveryComplete.setTag(list.get(position));
                viewHolder.txtElapsedTimeForDeliveryComplete.setBase(SystemClock.elapsedRealtime() - System.currentTimeMillis() + n);
                viewHolder.txtElapsedTimeForDeliveryComplete.getBase();
                viewHolder.txtElapsedTimeForDeliveryComplete.start();
                viewHolder.txtElapsedTimeForDeliveryComplete.setFormat("%s");

            }

            viewHolder.btnDeliveryComplete.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(final View v) {
                            // TODO Auto-generated method stub

                            if (flagDeliveryComplete == 0) {
                                flagDeliveryComplete++;
                                v.startAnimation(playAnimation());

                                handler.postDelayed(new Runnable() {

                                    @Override
                                    public void run() {
                                        // TODO Auto-generated method stub
                                        v.clearAnimation();

                                        OrderitemdetailsBO orderitemdetailsBO = list.get(position); 
                                        Date date = orderitemdetailsBO.getPreparationstarttime();
                                        String preparationComplete = orderitemdetailsBO.getOrderpreparationtime();

                                        if(date != null && preparationComplete != null )
                                        {
                                            Date currentTime = new Date();
                                            Calendar calendar = Calendar.getInstance();

                                            viewHolder.txtElapsedTimeForDeliveryComplete.stop();
                                            orderitemdetailsBO.setOrderdeliverytime(calendar.get(Calendar.MINUTE) +":"+calendar.get(Calendar.SECOND));

                                            String orderDetails = Integer.toString(order_delivered);
                                            String getPosition = Integer.toString(position);
                                            viewHolder.btnDeliveryComplete.setBackgroundColor(Color.LTGRAY);
                                            new sendOrderStatusToServer().execute(orderDetails,getPosition);
                                        }
                                        else
                                        {
                                            Toast.makeText(myContext, "Please Enter Preparation Start Time & Preparation Complete Time.",
                                                    Toast.LENGTH_LONG).show();
                                        }
                                    }
                                }, 5000);

                            }

                            else {

                                handler.removeCallbacksAndMessages(null);
                                v.clearAnimation();
                                flagDeliveryComplete = 0;
                            }
                        }
                    });
            }           

        return convertView;
    }
}

private static class ViewHolder {

    protected TextView txtTableNumber;
    protected TextView txtMenuItem;
    protected TextView txtQuantity;
    protected TextView txtOrderAcceptanceTime;
    protected Chronometer txtElapsedTimeOfOrderAcceptance;
    protected Button btnPreparationStart;
    protected Chronometer txtElapsedTimeForPreparation;
    protected Button btnPreparationComplete;
    protected Chronometer txtElapsedTimeForDeliveryComplete;
    protected Button btnDeliveryComplete;
} 
```

# c++ - 以编程方式将 CSV 文件从中文翻译成英文

> ID：13872957
> 
> 赞同：1
> 
> 时间：2012-12-14T05:03:31.663
> 
> 标签：c++, python, translation, chinese-locale

我有很多中文文件，我正在尝试找出一种方法将它们以编程方式翻译成英文文件。这些文件可以有多达 10k 行的中文文本。任何人都对如何实现这一点有任何有见地的意见？我并没有真正绑定到一种编程语言，尽管我觉得像 python 之类的东西会是一个不错的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:32:51.017

使用 Python 的“csv”模块解析和编写 CSV 文件很简单，有据可查……请做一些研究。此外：有多种翻译服务可供免费或付费使用（例如谷歌翻译）。有关选项，请参见此线程：

[https://stackoverflow.com/questions/6151668/alternative-to-google-translate-api](https://stackoverflow.com/questions/6151668/alternative-to-google-translate-api)

# vb.net - Vb.net 中的自动更新功能

> ID：13872959
> 
> 赞同：0
> 
> 时间：2012-12-14T05:03:36.780
> 
> 标签：vb.net, auto-update, self-updating

好的，我从[http://tech.reboot.pro/showthread.php?tid=2982](http://tech.reboot.pro/showthread.php?tid=2982)从 Gemster 获得了这段代码。所以我只是寻找一些东西来插入我的系统，因为它需要尽快完成。所以我复制并粘贴。不过，我确实明白发生了什么。唯一的问题是它跳过了一段重要的代码，我不知道为什么。所以就在这里。

```
 Dim CurrentVersion As String = My.Application.Info.Version.ToString '--- Change this to Current version, needs changing on every update
    Dim ProgramName As String = My.Application.Info.AssemblyName '--- Change this to Your Program Name
    Dim SiteName As String = "http://somewebsite.com/UpdateVersion.html" '--- Change this to Your Update page
    Dim VersionCHK As String = ""
    Dim GetVer As String = ""
    Dim GetVerLink As String = ""
    Dim GetUpd As Integer

    'Web Request
    Dim WebRequest As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create(SiteName)
    Dim WebResponse As System.Net.HttpWebResponse = WebRequest.GetResponse
    Dim STR As System.IO.StreamReader = New System.IO.StreamReader(WebResponse.GetResponseStream())
    Dim ReadSource As String = Str.ReadToEnd
    Dim Regex As New System.Text.RegularExpressions.Regex(ProgramName & "=(\d+).(\d+)=(.*?).zip")
    Dim matches As MatchCollection = Regex.Matches(ReadSource) 
```

这是它为每个语句跳过“拆分字符串”的部分

```
 'Split String
    For Each match As Match In matches
        Dim RegSplit() As String = Split(Match.ToString, "=")
        GetVer = RegSplit(1)
        GetVerLink = RegSplit(2)
    Next 
```

这是它恢复的地方。

```
 'Check Verison
    If GetVer > CurrentVersion Then
        GetUpd = MsgBox(ProgramName & " is an old version." & vbCrLf & "New Update is available" & _
        vbCrLf & "Current version: " & CurrentVersion & vbCrLf & "Version Avalible: " & _
        GetVer & vbCrLf & vbCrLf & "Update Now?", vbYesNo, "Update")

        If GetUpd = vbYes Then
            Dim sfd As New SaveFileDialog
            sfd.FileName = IO.Path.GetFileName(GetVerLink)
            If sfd.ShowDialog = DialogResult.OK Then
                My.Computer.Network.DownloadFile(GetVerLink, sfd.FileName)
            End If
        End If
    Else
        MsgBox(ProgramName & " is upto date." & vbCrLf & "Current version: " & CurrentVersion, 0, "Update")
    End If
    Return vbNull 
```

任何想法为什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:51:47.570

正则表达式很可能不正确，因此匹配项为空。

我建议使用 xml 文件，而不是尝试使用正则表达式解析 html：

服务器上的 XML：

```
 <VersionHistory>
                <CurrentVersion>
                    <VersionNumber>
                        1.0.0.2
                    </VersionNumber>
                    <DownloadLink>
                        http://www.mysite.com/downloads/myapp_1.0.0.2.zip
                    </DownloadLink>
                </CurrentVersion>
                <LegacyVersions>
                    <VersionNumber>
                        1.0.0.1
                    </VersionNumber>
                    <DownloadLink>
                        http://www.mysite.com/downloads/myapp_1.0.0.1.zip
                    </DownloadLink>
                </LegacyVersions>
            </VersionHistory> 
```

编码：

```
 Dim localVersion As String = My.Application.Info.Version.ToString
    Dim wc As New Net.WebClient
    wc.Proxy = Nothing

    Dim source As String = String.Empty

    Try
        source = wc.DownloadString("http://www.mysite.com/versions.xml")
    Catch ex As Net.WebException
        'handle accordingly
    End Try

    Dim xm As New Xml.XmlDocument
    xm.LoadXml(source)

    Dim currentVersion As String = xm.SelectSingleNode("//CurrentVersion").ChildNodes(0).InnerText.Trim
    Dim currentLink As String = xm.SelectSingleNode("//CurrentVersion").ChildNodes(1).InnerText.Trim

    If localVersion = currentVersion Then
        MessageBox.Show("Up to Date")
    Else
        'run update routine, use currentLink to download latest version
    End If 
```

# visual-studio-2012 - MSTest 2012 - 运行项目中的所有测试

> ID：13872960
> 
> 赞同：4
> 
> 时间：2012-12-14T05:03:44.603
> 
> 标签：visual-studio-2012, mstest

看着[这个](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.110%29.aspx)，我可以看到我可以；

运行特定测试、运行特定类别的测试或运行 *.TestSettings 中定义的测试。

无论如何我可以在不明确设置组/列表/测试的情况下运行项目中的*所有*测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:57:43.817

运行这个：

```
MSTest.exe /testcontainer:{ProjectBinFolder}\TestProject.dll 
```

另请参阅[此](https://stackoverflow.com/questions/4679966/what-command-line-arguments-does-visual-studio-use-for-running-mstest/10751484#10751484)。我认为vs2010和vs2012之间没有区别。

# javascript - Javascript中的Chaser菜单在滚动时不显示，总是隐藏

> ID：13872961
> 
> 赞同：0
> 
> 时间：2012-12-14T05:03:49.073
> 
> 标签：javascript, joomla, web

我正在尝试制作一个追逐菜单（当窗口向下滚动时显示）。

我得到了这段代码并尝试将其复制粘贴到我的网站。

```
$(function ($) {
//////////////////////////////////////////////////////////////////////////
////// START - CODE FOR LOADING THE TOP MENU CHASING BAR
//////////////////////////////////////////////////////////////////////////

    var doc = $(document), win = $(window), chaser, forch,
        forchBottom, visible;
    function shown() {
        visible = true;
    }
    function hidden() {
        visible = false;
    }
    chaser = $('.rt-menubar.fusionmenu').clone().hide().appendTo(document.body).wrap("<div class='chaser'></div>");
    forch = $('.forchaser').first();
    forchBottom = forch.height() + forch.offset().top;
    hidden();
    win.bind('scroll', function () {
        var top = doc.scrollTop();
        if (!visible && top > forchBottom) {
            chaser.slideDown(300, shown);
        } else if (visible && top < forchBottom) {
            chaser.slideUp(200, hidden);
        }
    });
}); 
```

这是我得到的结果：

```
<div class="rt-menubar fusionmenu" style="display: none;">
//code of list menu
</div> 
```

问题是，无论我如何滚动 Windows 滚动条，它总是设置为“显示：无”而不是“显示：块”。所以它总是隐藏的。

如果我稍微消除追踪器变量代码中的 hide() 函数：

```
chaser = $('.rt-menubar.fusionmenu').clone().appendTo(document.body).wrap("<div class='chaser'></div>"); 
```

追逐者菜单出现并且工作正常。然而，这不是我想要的。我希望追逐菜单隐藏在页面顶部，并在我向下滚动窗口时显示。

如何解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:01:44.137

找到了答案！

我忘了放：

```
<div class="forchaser"></div> 
```

在主体区域的某处。这是给一个标记作为你的追逐菜单将显示的起点。

# c# - WPF中表单之间的表单导航闪烁问题

> ID：13872962
> 
> 赞同：0
> 
> 时间：2012-12-14T05:03:50.830
> 
> 标签：c#, wpf

我是 WPF 的初学者，任何人都可以帮助我在表单之间导航而不会闪烁。我正在尝试在窗口窗体之间进行基本导航。我尝试过转换和用户控制导航。我正在尝试做的基本导航似乎很乏味。

该应用程序在每种形式中都有很多图像，我认为闪烁是因为每次加载每个窗口时都会重绘图像。为了克服闪烁问题，WPF 与基本的 Windows 窗体应用程序有什么不同。我要问的是如何在 WPF 中的表单导航期间优化或完全防止闪烁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:03:50.623

你的问题没有多大意义。您谈论 Windows 窗体，然后立即参考 WPF。从您描述的问题来看，您似乎正在尝试为 Windows 窗体中的对象设置动画，这不是一个好主意，因为 Windows 窗体是如何绘制的。

为了将来参考，WPF 有 Windows，Windows Forms 有 Forms。

如果您要在 WPF 中制作相同的项目，它会很容易制作动画，并且看起来也不错（由于 GPU 加速而不会闪烁）。

我建议您看一下 WPF，如果您希望能够轻松地为控件设置动画，请尝试在 WPF 中重新设计应用程序（您不能直接从 Windows 窗体复制粘贴控件和代码）。

# generics - 根据实体类型创建存储库

> ID：13872963
> 
> 赞同：0
> 
> 时间：2012-12-14T05:03:53.357
> 
> 标签：generics, ef-code-first, entity-framework-5

我想根据实体类型创建一个存储库。任何想法如何做到这一点？

*   我们有很多实体，所以这需要是通用代码。
*   我们需要为我们拥有的每个实体提供历史记录表。
*   我们使用代码优先，`DbContext`EF 5.0，使用存储库和工作单元模式。

下面是我们必须在`SaveChanges`方法中进行更改的代码。对于每个修改和删除的实体，我们希望将旧行保存到历史表中。以下是针对单个实体的硬编码： `ServiceLocation`.

所有实体都有对应的历史实体。例如，对于`ServiceLocation`实体，有一个`ServiceLocationHistory`实体（和存储库）。

如果 modifiedEntity 是类型`ServiceLocation`，我如何创建一个`ServiceLocationHistoryRepository`？并使其适用于所有类型？

```
 public override int SaveChanges()
    {
        // Get the entities that changed
        var addedEntries = ChangeTracker.Entries().Where(e => e.State == EntityState.Added && e.Entity is IHistoryBase).Select(e => (TBaseEntity)e.Entity);
        var modifiedEntries = ChangeTracker.Entries().Where(e => e.State == EntityState.Modified && e.Entity is IHistoryBase).Select(e => (TBaseEntity)e.Entity);
        var deletedEntries = ChangeTracker.Entries().Where(e => e.State == EntityState.Deleted && e.Entity is IHistoryBase).Select(e => (TBaseEntity)e.Entity);

        // Debugging watch varibles
        int x = addedEntries.Count();
        int y = modifiedEntries.Count();
        int z = deletedEntries.Count();

        // Create the Type adapter
        TypeAdapter adapter = new TypeAdapter(new RegisterTypesMap[] { new HistoryRegisterTypesMap() });
        var serviceLocationHistoryRepository = new ServiceLocationHistoryRepository(this);

        foreach (var addedEntry in addedEntries)
        {
            addedEntry.FromDate = DateTime.Now;
            addedEntry.ToDate = DateTime.Parse("9999-12-31 00:00:00.0000000");
        }

        foreach (var modifiedEntry in modifiedEntries)
        {

            ServiceLocationHistory history = adapter.Adapt<ServiceLocation, ServiceLocationHistory>(modifiedEntry as ServiceLocation);
            serviceLocationHistoryRepository.Add(history);

            history.FromDate = modifiedEntry.FromDate;
            history.ToDate = modifiedEntry.FromDate = DateTime.Now;
            modifiedEntry.ToDate = DateTime.Parse("9999-12-31 00:00:00.0000000");
        }

        foreach (var deletedEntry in deletedEntries)
        {
            ServiceLocationHistory history = adapter.Adapt<ServiceLocation, ServiceLocationHistory>(deletedEntry as ServiceLocation);
            serviceLocationHistoryRepository.Add(history);

            history.FromDate = deletedEntry.FromDate;
            history.ToDate = DateTime.Now;
         }
        return base.SaveChanges();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:04:52.753

下面是我用来根据类型获取存储库的概念验证代码。

```
 private dynamic GetHistoryRepository(TBaseEntity entry)
    {
        // TODO - How well does the below perform?
        // TODO - Is there a way that we can only get one repository if there are multiple changed entities of the same type?
        // TODO - How can we not hard code the type name?   Put a property on each entity that gives us the entitys history repository?  Factory?

        // Get the History repository for the entity
        Type objType = Type.GetType("Data.MainBoundedContext.CALMModule.Repositories." + entry.GetType().Name.Split('_')[0] + "HistoryRepository");
        return  Activator.CreateInstance(objType, new object[] { this });
    } 
```

# c++ - Allegro 5 + MinGW：音频插件不起作用

> ID：13872966
> 
> 赞同：0
> 
> 时间：2012-12-14T05:04:06.597
> 
> 标签：c++, mingw, codeblocks, allegro, allegro5

我一直在做这个平台化的 Allegro 5 测试，稍后我将把它变成一个游戏。到目前为止，Allegro 的每个附加组件都运行良好，当时我尝试使用音频播放我在 Audacity 中制作的 .ogg 文件。我正在使用 MinGW 版本，并将所有内容与 Code::Blocks 静态链接。它只有一个文件 main.cpp：

```
#include <stdio.h>                              // Good library to always have on hand
#include <math.h>                               // C++ math library
#include <allegro5/allegro.h>                   // Allegro base library
#include <allegro5/allegro_audio.h>             // Allegro audio library
#include <allegro5/allegro_acodec.h>            // Library used to load different audio codecs
#include <allegro5/allegro_image.h>             // You MUST load the image library for anything bitmap-image related
#include <allegro5/allegro_primitives.h>        // Allegro primitives addon, for drawing shapes n' stuff
#include <allegro5/allegro_native_dialog.h>     // You load this for the native message box feature (see below)

enum MYKEYS {
   KEY_UP, KEY_DOWN, KEY_LEFT, KEY_RIGHT
};

int main() {
   ALLEGRO_DISPLAY *display = NULL;
   ALLEGRO_DISPLAY_MODE disp_info;
   ALLEGRO_SAMPLE *sound_effect = NULL;
   ALLEGRO_BITMAP *manLeft = NULL; // Maximum texture size is a minimum of 1024 * 1024
   ALLEGRO_EVENT_QUEUE *event_queue = NULL;
   ALLEGRO_TIMER *fpsTimer = NULL;

   const float FPS = 60; // This global variable "FPS" is how many times per second the screen will redraw
   const char window_title[] = "Neil's Box Game"; // This is the window's title
   int window_width = 800; // This is the display's in-window width
   int window_height = 600; // This is the display's in-window height
   int display_width = window_width;
   int display_height = window_height;

   bool redraw = true;
   bool doexit = false;
   bool manFlipped = false;
   bool prevUp = false;
   bool isFullscreen = false;

   int manWidth = 19; // The "man" sprite's pixel width
   int manHeight = 48; // The "man" sprite's pixel height
   int manX = (display_width / 2) - (manWidth / 2); // This is the man's drawn x-value
   int manY = display_height - manHeight; // Same for y

   float manXVel = 0.0; // For our "platformer", this is the player character's x-axis velocity
   float manXVelCap = 200.0 / FPS; // This "caps" the x-velocity to how much we want our character to move, 200 is how much in 1 second
   float manYVel = 0.0; // Etc. for y
   float manYVelCap = 400.0 / FPS; // Etc.

   bool key[4] = { false, false, false, false };

   if(!al_init()) { // Initialise Allegro, test it's working
      fprintf(stderr, "ERROR: Failed to initialize Allegro library!\n");
      return -1;
   }

   if(!al_install_audio()){
      fprintf(stderr, "ERROR: Failed to initialize Allegro audio add-on!\n");
      return -1;
   }

   if(!al_init_acodec_addon()){
      fprintf(stderr, "ERROR: Failed to initialize Allegro audio codecs!\n");
      return -1;
   }

   if(!al_install_keyboard()) { // Initialises the keyboard control, test if it's working
      fprintf(stderr, "ERROR: Failed to initialize the keyboard!\n");
      return -1;
   }

   if(!al_init_image_addon()) { // Initialise Allegro's image addon, make sure it works
      fprintf(stderr, "ERROR: Failed to initialize Allegro's image add-on!\n");
      return -1;
   }

   if (!al_init_primitives_addon()) { // Initialise the Allegro primitives addon
      fprintf(stderr, "ERROR: Failed to initialize Allegro's primitives add-on!\n");
      return -1;
   }

   // "al_reserve_samples" sets how many audio samples you can load

   if (!al_reserve_samples(1)){
      fprintf(stderr, "ERROR: Failed to reserve Allegro audio samples!\n");
      return -1;
   }

   fpsTimer = al_create_timer(1.0 / FPS); // Create our FPS timer, and make sure it's working
   if(!fpsTimer) {
      fprintf(stderr, "ERROR: Failed to create timer!\n");
      return -1;
   }

   sound_effect = al_load_sample("pitchshift.ogg");

   if (!sound_effect){
      fprintf(stderr, "ERROR: Audio sample \"pitchshift.ogg\" not loaded!\n" );
      return -1;
   }

   al_get_display_mode(al_get_num_display_modes() - 1, &disp_info);

   display = al_create_display(display_width, display_height);

   if(!display) {
      al_show_native_message_box(display, "Error", "Error", "Failed to create display!", NULL, ALLEGRO_MESSAGEBOX_ERROR);
      return -1;
   }

   // Set it to the efficient blender mode

   al_set_blender(ALLEGRO_ADD, ALLEGRO_ALPHA, ALLEGRO_INVERSE_ALPHA);

   // This loads the event queue, and verifies it's working

   event_queue = al_create_event_queue();
   if(!event_queue) {
      al_show_native_message_box(display, "Error", "Error", "Failed to create event queue!", NULL, ALLEGRO_MESSAGEBOX_ERROR);
      al_destroy_display(display); // If failed, always destroy EVERYTHING that has been allegro-created, like displays and timers
      al_destroy_timer(fpsTimer);
      return -1;
   }

   // Always load images AFTER the creation of the display

   manLeft = al_load_bitmap("Left.png"); // Load our man png

   if(!manLeft) { // Check to make sure if it loaded right, if not say "!@#$ THIS" and gtfo
      al_show_native_message_box(display, "Error", "Error", "Failed to load image!", NULL, ALLEGRO_MESSAGEBOX_ERROR);
      al_destroy_display(display);
      al_destroy_timer(fpsTimer);
      return 0;
   }

   al_set_window_title(display, window_title); // Sets the window's caption title

   al_register_event_source(event_queue, al_get_display_event_source(display)); // This attaches the event_queue to the "display" display iten

   al_register_event_source(event_queue, al_get_timer_event_source(fpsTimer)); // Bind the fpsTimer object to the event handler

   al_register_event_source(event_queue, al_get_keyboard_event_source()); // Bind the keyboard to the Allegro event handler

   al_clear_to_color(al_map_rgb(255,255,255)); // Setting the mood...

   al_draw_bitmap(manLeft, manX, manY, 0); // Draw the "left" sprite, (imagename, x, y, FLAGS) FLAGS is either 0 for nothing, "ALLEGRO_FLIP_HORIZONTAL" or "ALLEGRO_FLIP_VERTICAL", purdy self explanatory

   al_start_timer(fpsTimer); // After we've refreshed the display, begin the FPS timer

   while (!doexit) {
       ALLEGRO_EVENT ev;
       al_wait_for_event(event_queue, &ev);

       switch(ev.type) {
            case ALLEGRO_EVENT_DISPLAY_CLOSE:
                doexit = true;
                break;

            case ALLEGRO_EVENT_KEY_DOWN:
                switch(ev.keyboard.keycode) {
                    case ALLEGRO_KEY_UP:
                        key[KEY_UP] = true;
                        break;

                    case ALLEGRO_KEY_DOWN:
                        key[KEY_DOWN] = true;
                        break;

                    case ALLEGRO_KEY_LEFT:
                        key[KEY_LEFT] = true;
                        break;

                    case ALLEGRO_KEY_RIGHT:
                        key[KEY_RIGHT] = true;
                        break;

                    case ALLEGRO_KEY_ESCAPE:
                        doexit = true;

                    case ALLEGRO_KEY_F11:
                        if (isFullscreen) {
                            manX *= ((float)window_width / (float)disp_info.width);
                            manY *= ((float)window_height / (float)disp_info.height);
                            al_set_new_display_flags(ALLEGRO_WINDOWED);
                            al_destroy_display(display);
                            display = al_create_display(window_width, window_height);
                            al_set_window_title(display, window_title);
                            al_register_event_source(event_queue, al_get_display_event_source(display)); // After re-creating the display, we need to again bind it to the event queue
                            display_width = window_width;
                            display_height = window_height;
                            isFullscreen = false;
                        } else {
                            manX *= ((float)disp_info.width / (float)window_width);
                            manY *= ((float)disp_info.height / (float)window_height);
                            al_set_new_display_flags(ALLEGRO_FULLSCREEN);
                            al_destroy_display(display);
                            display = al_create_display(disp_info.width, disp_info.height);
                            al_set_window_title(display, window_title);
                            al_register_event_source(event_queue, al_get_display_event_source(display)); // After re-creating the display, we need to again bind it to the event queue
                            display_width = disp_info.width;
                            display_height = disp_info.height;
                            isFullscreen = true;
                        }
                }
                break;

            case ALLEGRO_EVENT_KEY_UP:
                switch(ev.keyboard.keycode) {
                case ALLEGRO_KEY_UP:
                    key[KEY_UP] = false;
                    break;

                case ALLEGRO_KEY_DOWN:
                    key[KEY_DOWN] = false;
                    break;

                case ALLEGRO_KEY_LEFT:
                    key[KEY_LEFT] = false;
                    break;

                case ALLEGRO_KEY_RIGHT:
                    key[KEY_RIGHT] = false;
                    break;

                case ALLEGRO_KEY_ESCAPE:
                    doexit = true;
                    break;
                }
                break;

                case ALLEGRO_EVENT_TIMER:
                    if(key[KEY_UP] && !prevUp) {
                        if (manY >= display_height - manHeight) {
                            manYVel = -10.0;
                            al_play_sample(sound_effect, 1.0, 0.0, 1.0, ALLEGRO_PLAYMODE_ONCE, NULL);
                        }
                    }
                    if(key[KEY_LEFT]) {
                        manXVel -= 0.5;
                        manFlipped = false; // Change the sprite
                    }
                    if(key[KEY_RIGHT]) {
                        manXVel += 0.5;
                        manFlipped = true; // Change the sprite
                    }

                    // Cap the velocity to make sure he doesn't get moving TOO fast...

                    if (manXVel > manXVelCap) {
                        manXVel = manXVelCap;
                    }
                    if (manXVel < -manXVelCap) {
                        manXVel = -manXVelCap;
                    }
                    if (manYVel > manYVelCap) {
                        manYVel = manYVelCap;
                    }
                    if (manYVel < -manYVelCap) {
                        manYVel = -manYVelCap;
                    }

                    if (manXVel * FPS > -5.0 && manXVel * FPS < 5.0) {
                        manXVel = 0;
                    }

                    // Add some horizontal ground friction

                    if ((!key[KEY_LEFT] || !key[KEY_RIGHT]) && manY >= display_height - manHeight) { // Make sure that he's "sliding" and he's touching the ground
                        manXVel *= pow(10, log (0.4) / FPS); // The 0.4 is how much x friction we want every second
                    }

                    // Adding gravity

                    manYVel += 0.15;

                    redraw = true;
                    prevUp = key[KEY_UP];
                    break;

                default:
                    break;
       }
        if(redraw && al_is_event_queue_empty(event_queue)) {
            if (manX > display_width - manWidth) {
                manX = display_width - manWidth;
            }
            if (manX < 0) {
                manX = 0;
            }
            if (manY > display_height - manHeight) {
                manY = display_height - manHeight;
            }
            if (manY < 0) {
                manY = 0;
            }

            al_clear_to_color(al_map_rgb(255,255,255)); // Clear screen
            if (manFlipped) {
                al_draw_bitmap(manLeft, (int)manX, (int)manY, ALLEGRO_FLIP_HORIZONTAL); // Draw our "man sprite"
            } else {
                al_draw_bitmap(manLeft, (int)manX, (int)manY, 0); // Draw our "man sprite"
            }
            al_flip_display(); // Refresh screen

            // Put the x and y refreshes AFTER the screen update to preserve collision checking is working

            redraw = false;

            manX += manXVel; // Assign the respective velocities to their axes
            manY += manYVel; // Same for y
        }
   }

   //   ON CLOSURE OF THE PROGRAM, YOU MUST DESTROY EVERYTHING THAT IS ALLEGRO CREATED, IN THE FOLLOWING ORDER:
   //   - Bitmaps
   //   - Timers
   //   - Displays
   //   - Event queues

   al_destroy_bitmap(manLeft);          // Destroy the bimaps
   al_destroy_timer(fpsTimer);          // Destroy the timer
   al_destroy_display(display);         // Delete the display
   al_destroy_event_queue(event_queue); // You have to destroy an event queue after you've created it

   return 0;                            // nitey nite
} 
```

当我尝试构建我的代码时，它给了我这个奇怪的错误序列，我在 Google 上没有找到任何解决方案：

```
||=== box - Allegro Visual Thingy, Default ===|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourceStop'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGenSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGenBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcef'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcePlay'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGenSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGenBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alBufferData'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcef'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alDeleteSources'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alBufferData'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourceQueueBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcePlay'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourceUnqueueBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alBufferData'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourceQueueBuffers'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetSourcei'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourcePlay'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alSourceStop'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alGetError'|
C:\Allegro\allegro-5.0.7-mingw-4.6.2\lib\liballegro_audio-5.0.7-static-mt.a(openal.o):openal.c|| undefined reference to `alcGetError'|
||More errors follow but not being shown.|
||Edit the max errors limit in compiler options...|
||=== Build finished: 50 errors, 0 warnings ===| 
```

我将发布[Code::Blocks 项目](https://docs.google.com/open?id=0B52dWqPeKKhMb2VGbWVzekFWMzQ)，以便您可以看到我正在链接的内容，但我只是不明白为什么音频库是唯一不起作用的东西！

感谢您的帮助，

-尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:06:58.210

错误消息中非常清楚，您需要 LD_LIBRAY 中的 openal libray

这是[OpenAL](http://connect.creativelabs.com/openal/)

# matlab - 在matlab中的时间间隔内产生不同的音调

> ID：13872967
> 
> 赞同：0
> 
> 时间：2012-12-14T05:04:18.787
> 
> 标签：matlab, audio, ringtone

如何在以下条件下生成连续音调，因为我只能从时间 0 到 1 创建音调。如何连续生成它？创建一个包含三个音调的 3 秒信号；Tone 220 Hz for 0 < t < 1 Tone 300 Hz for 1 < t < 2 Tone 440 Hz for 2 < t < 3 使用 s=sin(2*pi*t) 和 8192 Hz 采样频率

```
Fs = 8192;
T = 1/Fs;                                             

t = 0:T:1;
t1=1:T:2;
t2=2:T:3;
y = sin(2*pi*200*t); 
hold on;
y = sin(2*pi*300*t1);
hold on;
y = sin(2*pi*440*t2); 
hold on;                         
plot(t,y);           
xlabel('t');                              
ylabel('Amplitude'); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:10:12.557

假设`x`一个 Nx1 向量包含 1 秒的音调，您可以将其复制为 3 秒的音调：

```
x_long = repmat(x,3,1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:13:35.667

你是这个意思吗？

```
Fs = 8192;
T = 1/Fs;                                             

t1 = 0:T:1;
t2=1:T:2;
t3=2:T:3;
y1 = sin(2*pi*200*t); 
y2 = sin(2*pi*300*t1);
y3 = sin(2*pi*440*t2);                          
plot(t1,y1,t2,y2,t3,y3);           
xlabel('t');                              
ylabel('Amplitude'); 
```

如果是这样，并且您希望数据位于两个数组中，请执行下一个

```
t=horzcat(t1,t2,t3);
y=horzcat(y1,y2,y3); 
```

我不是 100% 确定这是否是您想要的，如果不是，请纠正我

# iphone - 如何在 iphone 中获取录制音频的时间？

> ID：13872973
> 
> 赞同：11
> 
> 时间：2012-12-14T05:05:06.897
> 
> 标签：iphone, objective-c, ios, avaudiorecorder

我正在使用录制音频`AVAudioRecorder`，现在我想获得录制音频的确切持续时间，我该如何获得。

我试过这个：

```
AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:avAudioRecorder.url options:nil];
CMTime time = asset.duration;
double durationInSeconds = CMTimeGetSeconds(time); 
```

但是我的`time`变量返回NULL并`durationInSeconds`返回'nan'，nan是什么意思。

**更新**

`user1903074`答案已经解决了我的问题，但只是出于好奇，没有任何方法可以做到这一点`AVAudioplayer`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T05:23:02.393

如果您使用`AVAudioPlayer`with `AVAudioRecorder`，则可以获得`audioPlayer.duration`并获得时间。

像这样。

```
 NSError *playerError;

 audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:yoururl error:&playerError];

 NSlog(@"%@",audioPlayer.duration); 
```

但仅当您使用`AVAudioPlayer`with 时`AVAudioRecorder`。

**更新**

或者你可以这样做。

```
//put this where you start recording
     myTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateTime) userInfo:nil repeats:YES];

// a method for update
- (void)updateTime {
    if([recorder isRecording])
    {

        float minutes = floor(recorder.currentTime/60);
        float seconds = recorder.currentTime - (minutes * 60);

        NSString *time = [[NSString alloc] 
                                    initWithFormat:@"%0.0f.%0.0f",
                                    minutes, seconds];
    }
} 
```

钢你可以得到一些延迟，因为它们是一些微秒值，我不知道如何剪辑它。但仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-29T10:07:43.980

我的解决方案是简单地跟踪开始日期，最后计算经过的时间。它对我有用，因为用户正在启动和停止录音机。

在录音机类

```
NSDate* startTime;
NSTimeInterval duration;

-(void) startRecording
{
   //start the recorder
   ...
   duration = 0;
   startTime = [NSDate date];

}

-(void) stopRecording
{
   //stop the recorder
   ...
   duration = [[NSDate date] timeIntervalSinceDate:startRecording];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-25T14:10:17.960

这里的几个答案使用相同的非常糟糕的时间格式，给出的结果如“0.1”持续 1 秒或“0.60”持续 1 分钟。如果你想要一些能让你看起来像 0:01 或 1:00 这样的正常时间的东西，那么使用这个：

```
let minutes = Int(audioRecorder.currentTime / 60)
let seconds = Int(audioRecorder.currentTime) - (minutes * 60)
let timeInfo = String(format: "%d:%@%d", minutes, seconds < 10 ? "0" : "", seconds) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T07:11:43.917

我知道最初的问题是在 Objective-C 中寻找答案，但对于那些希望在 Swift 中这样做的人来说，这适用于 Swift 4.0：

```
let recorder = // Your instance of an AVAudioRecorder
let player = try? AVAudioPlayer(contentsOf: recorder.url)
let duration = player?.duration ?? 0.0 
```

假设您有一个有效的记录器，那么您将获得一个持续时间值，它以`TimeInterval`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-17T10:23:03.750

更新@Dilip 对 Swift 5.3 的出色回答：

```
//put this where you start recording
myTimer = Timer.scheduledTimer(timeInterval: 1, target: self, selector: #selector(updateTime), userInfo: nil, repeats: true)

// a method for update
 @objc func updateTime(){
     if recorder.isRecording{
         let minutes = floor(recorder.currentTime/60)
         let seconds = recorder.currentTime - (minutes * 60)
         let timeInfo = String(format: "%0.0f.%0.0f", minutes, seconds)
     }
 } 
```

这应该与

```
 let audioSession = AVAudioSession.sharedInstance()
    do {
        try audioSession.setCategory(AVAudioSession.Category.playAndRecord, options: AVAudioSession.CategoryOptions.defaultToSpeaker)
        audioSession.requestRecordPermission({ (isGranted: Bool) in

        })
    } catch  {} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-02T14:08:49.037

在停止录制之前，请尝试获取 .currentTime

```
let duration = audioRecorder.currentTime
audioRecorder.stop() 
```

# iphone - 从越狱的 iphone shell 脚本中获取地理位置数据

> ID：13872977
> 
> 赞同：1
> 
> 时间：2012-12-14T05:05:31.947
> 
> 标签：iphone, ios, ios5, geolocation, jailbreak

我终于越狱了我的 iPhone 4S (iOS 5.1.1)。我非常熟悉 linux/windows 编程 (c/c++) 和 shell 脚本。我不熟悉 XCode/Objective-C，也没有 mac。

我想要一种简单的方法来跟踪我自己的地理位置并将经度/纬度（？准确度？）每隔几分钟写入我 iPhone 上的文本文件。我不需要太多的准确性。蜂窝塔方法应该可以正常工作，所以我不会杀死我的电池寿命。

如果我能得到一个只吐出 lat/long 的命令行应用程序，那么我相信我可以通过一些 bash 包装脚本弄清楚需要做什么才能将其变成“后台守护进程”类型的应用程序。

我在 Cydia 中找不到执行此类操作的应用程序。有一些会自动更新您在社交网站上的位置，但我*不想*这样做。我只想要一个本地日志，以便我可以将其 scp 到我的家庭服务器以进行个人跟踪。（我经营一家小企业，有时需要向客户证明我在他们的位置多久了）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T07:17:58.470

[CoreLocation](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocation_Framework/_index.html)文档应该回答您的任何问题。但是要获取手机的当前位置：

```
// based on http://www.icodeblog.com/tag/corelocation/
@interface CFAAppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate>

@property (strong, nonatomic) UIWindow *window;

//Add a location manager property to this app delegate
@property (strong, nonatomic) CLLocationManager *locationManager;

@end
@implementation CFAAppDelegate

@synthesize window = _window;
@synthesize locationManager=_locationManager;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    if(self.locationManager==nil){
        _locationManager=[[CLLocationManager alloc] init];
        //I'm using ARC with this project so no need to release

        _locationManager.delegate=self;
        _locationManager.purpose = @"We will try to tell you where you are if you get lost";
        _locationManager.desiredAccuracy=kCLLocationAccuracyBest; // other options exist, let's assume this one
        _locationManager.distanceFilter=500;
        self.locationManager=_locationManager;
    }

    return YES;
}
- (void)awakeFromNib {
  if([CLLocationManager locationServicesEnabled]){
        [self.locationManager startUpdatingLocation];
    }
}

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
   NSDate* eventDate = newLocation.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];
    if (abs(howRecent) &lt; 15.0)
    {
            //Location seems pretty accurate, let's use it!
            NSLog(@"latitude %+.6f, longitude %+.6f\n",
                  newLocation.coordinate.latitude,
                  newLocation.coordinate.longitude);
    } 
```

将其报告给数据存储是留给读者的练习。

# visual-studio - 选定文本的颜色

> ID：13872979
> 
> 赞同：0
> 
> 时间：2012-12-14T05:05:56.227
> 
> 标签：visual-studio, visual-studio-2008

```
environment: visual studio 2008 
```

你知道在visual studio 2008 中的编辑器吗？您可以双击一个单词，它将突出显示该单词的所有实例。好吧，亮点是我几乎看不到的非常浅的粉红色背景。有没有办法把它改成更深的颜色？

这不是我双击的词，而是我双击的其他匹配词，如果这有意义的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:16:30.983

工具->选项->环境->字体和颜色->

尝试更改“非活动选定文本”的颜色

如果不是这样，您可以向下箭头浏览项目，直到看到要更改的颜色。

# jquery - 如何从 jQuery 的下拉列表中获取选定的值？

> ID：13872988
> 
> 赞同：-4
> 
> 时间：2012-12-14T05:06:51.050
> 
> 标签：jquery

我想通过 jQuery 将下拉列表的值提取到标签中。我正在尝试使用此代码

```
$("#ddl").click(function () {

       var val = $("#ddl").val(); 
       $("#DDLValue").val(val);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:09:03.810

标签没有值属性。使用他们的 innerHTML，并将其绑定到`change`事件：

```
$("#ddl").on('change',function () {
    $("#DDLValue").html($(this).val());
}); 
```

工作演示：http: [//jsfiddle.net/VUQFB/](http://jsfiddle.net/VUQFB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T05:10:57.900

```
 $('#ddl').change(function() {
        alert($(this).val());
  }); 
```

使用[更改](http://api.jquery.com/change/)功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:09:11.863

```
$(document).ready(function(){
$('#ddl').change(function(){
     $("#DDLValue").html($(this).val());
});
}); 
```

更新..如果您想要选定的文本而不是值，请使用

```
 $(document).ready(function(){
    $('#ddl').change(function(){
         $("#DDLValue").html($(this).find('option:selected').text());
    });
    }); 
```

或者如果您的选择框是动态生成的，请使用`delegate`

```
$(document).ready(function(){
    $('body').delegate('#ddl','change',function(){
        //stuff here
    });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T05:09:19.137

尝试

```
$("#ddl").change(function () {

       var val = $(this).val(); 
       $("#DDLValue").html(val);

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T05:17:39.853

试试这个，

注意：html 元素标签没有 value 属性，因此使用`.html()`or `.text()`。

**jQuery代码**

```
$(document).ready(function() {
   $('#ddl').change(function () {
    $('#DDLValue').text($(this).val());
   });
}); 
```

**html代码**

```
<select id="ddl" name="ddl">
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
   <option value="4">4</option>
</select>​
<label id="DDLValue"></label> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T05:35:28.337

尝试代码：

```
$("#ddl").change(function(){
             $('#DDLValue').val( $("#ddl option:selected").text() );
        }); 
```

# swing - 在我的 Jar for Swing 应用程序中包含 JRE

> ID：13872993
> 
> 赞同：3
> 
> 时间：2012-12-14T05:07:24.867
> 
> 标签：swing, deployment, installation, java

> **可能重复：**
> [如何使用特定的 JRE 交付我的 Java 应用程序？](https://stackoverflow.com/questions/13045719/how-to-deliver-my-java-application-with-a-particular-jre)

我在 Swing 中开发了 Java 桌面应用程序并为此创建了 jar。在我的操作系统（Windows）中双击它可以正常工作。现在我想在没有任何 Java 相关软件的其他系统（不同的操作系统）中运行相同的 jar 文件。

如何在我的 Java 应用程序中包含 JRE 以使我的应用程序可以在任何操作系统中运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:14:21.557

> 在我的 Jar 中包含 JRE

不要那样做。它不仅古怪且困难，而且在每个应用程序 Jar 中至少需要 3 个 JRE（Windows、OS X 和 *nix 各一个）。对于只需要一个 JRE 的人来说，这是一个巨大的浪费下载。

反而：

1.  检查用户是否有合适的 JRE，使用[`deployJava.js`](http://download.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html).
2.  启动应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。

# sphinx - 检查 Sphinx 结果的计算排名？

> ID：13872995
> 
> 赞同：0
> 
> 时间：2012-12-14T05:07:45.273
> 
> 标签：sphinx, thinking-sphinx

有没有办法计算使用 ThinkingSphinx 查询时返回的文档的排名/相关性？我有加权字段，我知道可以使用`:match_mode=>:extended`，`:order=>"@relevance desc"`但是有什么方法可以显示每个文档的计算权重吗？

我使用过 Solr，它提供了这种支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:38:08.333

没用过thinkingsphinx，但在FAQ中确实找到了这个:)

[http://pat.github.com/ts/en/common_issues.html#weights](http://pat.github.com/ts/en/common_issues.html#weights)

# android - 在 Android 中使用手机的内置传感器

> ID：13872996
> 
> 赞同：0
> 
> 时间：2012-12-14T05:08:03.803
> 
> 标签：android

我正在创建一个应用程序，我将从 Android 手机传感器接收到的数据发送到使用 Wifi-Direct 的另一部 Android 手机。

我可以通过在扩展 Activity 的类中编写代码来获取传感器的值。我使用了传感器管理器类。

但现在我想在后台线程中获取传感器值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:22:17.443

`ACTION_SCREEN_OFF`您可以在一个`Async_Task`非常适合后台线程的事件中监听事件。

当事件在您的内部触发时`Async_Task`，取消注册您的传感器侦听器，然后重新注册它。屏幕将继续关闭，但监控将继续。

这是此博客上的相关文章和良好的代码[示例](http://mylifewithandroid.blogspot.com/2010/04/monitoring-sensors-in-background.html)

Google 上的[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 以表单形式从 main 访问数组

> ID：13872997
> 
> 赞同：-1
> 
> 时间：2012-12-14T05:08:03.873
> 
> 标签：c#, arrays, forms

嗨，我正在尝试在 Visual Studio 上编写 ac# 应用程序。我在 main 中创建了一个数组，我试图在表单上的单击事件中访问它，但它告诉我当前上下文中不存在数组“字符”。我尝试将数组传递给表单，但我仍然遇到同样的问题。任何帮助将不胜感激这是我的代码。

```
namespace WindowsFormsApplication10
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            bool[][] characters = new bool[27][];            // my array characters

            characters[1][0] = true; 

            Application.Run(new Form1());            
        }
    }
}

namespace WindowsFormsApplication10
{
    public partial class Form1 : Form
    {
        int cs1 = 0,cs2=0;    

        public Form1()
        {
            InitializeComponent(); 
        }

        public void pictureBox1_Click(object sender, EventArgs e)
        {
            if (characters[1][0] == true)     // trying to access member of characters 
            {                                 // array but characters does not
                                              // exist in the current context
                pictureBox28.Visible = false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:12:52.773

您的数组在 Main 函数中定义，仅在其范围内可见。

您可以做的最简单的事情是将数组移到 Main 之外：

```
public static bool[][] characters = new bool[27][]; 
static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            characters[1][0] = true; 

            Application.Run(new Form1());            

        }

public void pictureBox1_Click(object sender, EventArgs e)
        {

            if (Main.characters[1][0] == true)     // trying to access member of characters 
            {                                 // array but characters does not
                                              // exist in the current context
                pictureBox28.Visible = false;
            }            

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:10:25.383

1.  将您的数组存储为静态文件 inobject，然后您可以在任何地方访问它。
2.  作为参数传递。
3.  RPC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:15:18.660

```
bool[][] characters = new bool[27][]; 
```

被声明为`Main`方法的本地。因此它在它之外是不可见的。

如果要在内部使用`Form1`，请更改为以下内容：

```
public partial class Form1 : Form
{
    bool[][] characters = null;
    int cs1 = 0,cs2=0;

    public Form1(bool[][] characters)
    {
        this.characters = characters;
        InitializeComponent();
    }

    ...
    ...
} 
```

表格`Main`，调用如下：

```
Application.Run(new Form1(characters)); 
```

# silverlight - 绑定 EasingColorKeyFrame 颜色值

> ID：13872998
> 
> 赞同：0
> 
> 时间：2012-12-14T05:08:26.190
> 
> 标签：silverlight, binding, storyboard, windows-phone, windows-phone-8

我有以下 Windows Phone 代码，用于将 a 的颜色`Rectangle`从黑色更改为红色。

```
<Grid x:Name="LayoutRoot">
  <phone:Pivot x:Name="MyPivot" >
    <phone:PivotItem x:Name="MyPivotItem">
      <Canvas x:Name="MyCanvas">
        <Canvas.Resources>
          <Storyboard x:Name="MyStoryboard">
            <ColorAnimationUsingKeyFrames
              Storyboard.TargetProperty="(Rectangle.Fill).(SolidColorBrush.Color)"
              AutoReverse="True">
                <EasingColorKeyFrame KeyTime="00:00:0" Value="Black" />
                <EasingColorKeyFrame KeyTime="00:00:0.5" Value="Red" />
            </ColorAnimationUsingKeyFrames>
          </Storyboard>
        </Canvas.Resources>
      </Canvas>
    </phone:PivotItem>
  </phone:Pivot>
</Grid> 
```

我想做的是让它更具动态性，以便我可以`EasingColorKeyFrame`从代码隐藏页面更改 s 中使用的颜色。是否可以将我的 s 绑定到`Value`我`EasingColorKeyFrame`的代码隐藏页面中的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:16:17.970

如果您只是想从代码隐藏页面更改颜色，那么只需给您的框架一个 x:Name 并在后面的代码中设置它们的值。

```
...
<EasingColorKeyFrame KeyTime="00:00:0" x:Name="start" Value="Black" />
<EasingColorKeyFrame KeyTime="00:00:0.5" x:Name="end" Value="Red" />
... 
```

代码隐藏：

```
private void ChangeColors()
{
  start.Value = Colors.Green;
  end.Value = Colors.Blue;
} 
```