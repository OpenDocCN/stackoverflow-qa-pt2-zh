# StackOverflow 问答 13303000-13303999

# html - 如何在yii表单按钮提交中添加一个类

> ID：13303006
> 
> 赞同：12
> 
> 时间：2012-11-09T06:10:13.917
> 
> 标签：html, css, codeigniter, yii

这是表格的代码。我想为提交按钮添加一个类并为所有文本字段添加一个内联样式。我该怎么做？

例如在查看源代码看起来像这样我想像这样编辑

```
<div class="form">
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
    ),
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <div class="row">
        <?php echo $form->labelEx($model,'username'); ?>
        <?php echo $form->textField($model,'username'); ?>
        <?php echo $form->error($model,'username'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'password'); ?>
        <?php echo $form->passwordField($model,'password'); ?>
        <?php echo $form->error($model,'password'); ?>
        <p class="hint">
            Hint: You may login with <kbd>demo</kbd>/<kbd>demo</kbd> or <kbd>admin</kbd>/<kbd>admin</kbd>.
        </p>
    </div>

    <div class="row rememberMe">
        <?php echo $form->checkBox($model,'rememberMe'); ?>
        <?php echo $form->label($model,'rememberMe'); ?>
        <?php echo $form->error($model,'rememberMe'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Login'); ?>
    </div>

<?php $this->endWidget(); ?>
</div><!-- form --> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T07:18:48.783

尝试阅读手册或文档，或查看示例

```
<?php echo $form->textField($model,'username', array('class' => 'myText', 'style' => 'width: 320px; border-radius: 10px;')); ?>

<?php echo CHtml::submitButton('Login', array('class' => 'submitClass', 'style' => 'width: 120px; border-radius: 10px;')); ?> 
```

[http://www.yiiframework.com/doc/api/1.1/CHtml#submitButton-detail](http://www.yiiframework.com/doc/api/1.1/CHtml#submitButton-detail)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T13:52:19.460

非常简单，只需添加一个数组，您可以在其中放入任何 html 属性

像

```
<?php echo $form->textField($model,'username',array('class'=>'your class name','id'=>'Any Id You want to insert')); ?> 
```

# iphone - 如何将图像从 url 加载到 UITableViewCell？

> ID：13303008
> 
> 赞同：3
> 
> 时间：2012-11-09T06:10:16.053
> 
> 标签：iphone, xcode, uiimageview, storyboard

我是 iOS 开发人员的新手，使用`Storyboard`我从 URL 获取并在滚动时`Image`将图像加载到**UITableviewcell**`tableview`表格将滚动非常缓慢并按下滚动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:16:30.147

在这里检查以下链接，您应该为此使用延迟加载，

[在 UITableView 中延迟加载图像](https://stackoverflow.com/questions/1130089/lazy-load-images-in-uitableview)

[将图像从 URL 加载到 UITableViewCell 的 UIImageView](https://stackoverflow.com/questions/8390151/loading-images-from-a-url-into-a-uitableviewcells-uiimageview)

[从 URL iphone sdk 将图像加载到 tableView](https://stackoverflow.com/questions/7565123/load-image-to-a-tableview-from-url-iphone-sdk)

[在 UITableViewCell 中延迟加载图像](https://stackoverflow.com/questions/531482/lazy-load-images-in-uitableviewcell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:13:26.827

您应该在单元格中使用延迟加载图像。由于您在主线程或 UI 线程中获取图像（..即网络活动），因此发生缓慢或卡住。

您可以在网络中获得很多用于异步加载图像的教程。这是来自 Apple 的教程：[链接](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:37:06.397

看到这个问题的答案AsynchImage .. [iphone-download-asynchronous](https://stackoverflow.com/questions/8152882/iphone-download-asynchronous-work-but-load-asynchronous-dont)

还使用 AsynchImage 下载图像并在 UITableViewCell 中设置为图像

[异步加载图像在 uitableview](http://kosmaczewski.net/asynchronous-loading-of-images-in-a-uitableview/)

# ruby-on-rails-3 - Rails Actions - 处理 JSON 和 HTML 请求的正确方法是什么

> ID：13303009
> 
> 赞同：0
> 
> 时间：2012-11-09T06:10:17.207
> 
> 标签：ruby-on-rails-3

我的应用程序目前只处理 HTML 请求，我想扩展一些操作来处理 JSON 请求。许多控制器操作执行重定向，根据请求是否成功设置会话值（闪存）。

如何合并 responds_to 以根据请求格式更改操作行为，例如：

```
 def create
  @user = User.new(params[:user])      
  if @user.save
    flash[:notice] = {:success => "User Created."}
    session[:user_id] = @user.id
        session[:username] = @user.username
    redirect_to(:controller => 'lists', :action => 'index')
  else
     flash[:notice] = {:error => @user.errors}
    render('new')
  end
end 
```

如您所见，我正在检查模型是否保持不变，然后再次重定向或呈现表单。我怎样才能保持这种当前的行为，但也可以处理 JSON 中的请求？JSON 请求不需要执行重定向等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:22:27.863

我的申请中有类似的要求。我选择为 JSON API 创建一组不同的控制器，因为 HTML 和 JSON 控制器几乎没有共同点。它还使得使用特定于 API 构建和 JSON（在我的例子中为 RocketPants）的 gem 变得更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T22:27:31.297

这似乎可以解决问题：

```
def create
  @user = User.new(params[:user])      
  if @user.save
    flash[:notice] = {:success => "User Created."}
    session[:user_id] = @user.id
        session[:username] = @user.username
         respond_to do |format|
            format.json {render :json => @user}
            format.html{redirect_to(:controller => 'lists', :action => 'index')}
         end

  else
     flash[:notice] = {:error => @user.errors}
      respond_to do |format|
         format.json {render :json => @user.errors}
         format.html{render('new')}
      end
  end
end 
```

# uiview - 如何在 iPhone 的默认键盘顶部添加一个按钮？

> ID：13303011
> 
> 赞同：0
> 
> 时间：2012-11-09T06:10:19.670
> 
> 标签：uiview, uibutton, uikeyboard

我看到许多 iPhone 应用程序在默认键盘上包含一些自定义按钮来执行某些操作。看这张图。。

![在此处输入图像描述](../Images/812ffd31f21a9d744106103d86895591.png)

此处箭头按钮用于退出键盘。

**我的疑惑：**

*   我应该为此制作自定义键盘吗？我可以简单地在键盘上的固定视图上单独显示按钮。但是显示/隐藏动画呢？我想显示/隐藏关于键盘移动的按钮。如果我在键盘上使用固定视图可以吗？

*   如果我自定义默认键盘行为，Apple 会拒绝我的应用程序吗？（如果是，那么这些应用程序如何在 AppStore 中可用？？）

*   [这](http://www.cocoacontrols.com/platforms/ios/controls/uikeyboardcoview)是一个在键盘顶部添加 UIButton 的示例项目。但我不想和IB一起做。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:00:59.257

我发现，用 iOS 6 的方法制作这些按钮是如此简单`setInputAccessoryView:`。对于iOS6以下，我们必须创建一些自定义视图并将它们的框架设置在键盘框架的顶部。有关更多信息，请参阅[此](https://stackoverflow.com/questions/11231219/trouble-setting-uikeyboard-accessory-view)。

# java - JTable - 布尔值显示为复选框并且必须是可编辑的

> ID：13303012
> 
> 赞同：3
> 
> 时间：2012-11-09T06:10:27.793
> 
> 标签：java, swing, jtable, linkedhashset

好的，所以我有一个从书籍 LinkedHashSet 填充的 JTable。

```
 public static void LibToArray(){
    rowData = new Object[Book.bookList.size()][5];
    int i = 0;
    Iterator it = Book.bookList.iterator();
    while(it.hasNext()){
        Book book1 = (Book)it.next();
        rowData[i][0] = (Integer)book1.getId();
        rowData[i][1] =  book1.getTitle();
        rowData[i][2] =  book1.getAuthor();
        rowData[i][3] = (Boolean)book1.getIsRead();
        rowData[i][4] =  book1.getDateStamp();
        i++;
        }
    } 
```

我的问题是我希望第 4 个列将布尔状态显示为复选框，并且我希望它能够在将状态保存回 LinkedHashSet 并刷新表后进行更改。

对不起，我是初学者，如果您能给我一些建议，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T06:22:05.270

在表模型中，作为特定列的`getColumnClass()`回报`Boolean.class`。例如对于`AbstractTableModel`或`DefaultTableModel`扩展：

```
@Override
public Class<?> getColumnClass(int columnIndex) {
    if (columnIndex == 3)
        return Boolean.class;
    return super.getColumnClass(columnIndex);
} 
```

此外，要使单元格可编辑，请覆盖`isCellEditable()`，例如：

```
@Override
public boolean isCellEditable(int row, int col) {
    return (col == 3); 
} 
```

有关表模型的更多详细信息，请查看[如何使用表](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)教程。在同一教程中，有一个带有复选框列的表格示例。

# java - 一般对象的堆

> ID：13303017
> 
> 赞同：0
> 
> 时间：2012-11-09T06:11:18.123
> 
> 标签：java, coding-style

我正在编写一个 Heap（Max-Heap，意思是最大元素是根）类，可用于“堆化”给定的一组对象。我知道这个堆的一般结构以及各种算法。现在对于一般对象，没有定义比较。所以我需要定义两个对象之间的比较。我的问题是这个比较函数应该定义在类堆中还是类对象中？如果我在堆类中定义它，那么对于我使用的每个数据结构，我都需要重写效率不高的比较函数。这是因为如果我稍微更改对象，我最终可能会在大量位置更改比较。那么这件事情是怎么处理的呢？谢谢你。

```
 class Object{
     int value;
     Object (int a) {
         value=a;
     }

     boolean isLessThan(Object a, Object b){
         if (a.value<=b.value){
             return true;
         }
         else return false;
     }
 }

 class Heap{
     Object [] heap=new Object[1000];
     int size=0;
     Heap() {        
     }

     void HeapifyDownwards (int index){
         int left_child=2*index+1;
         int right_child=2*index+2;

         if (size>right_child){
             // both right and left child exist
             Object right= heap[right_child];
             Object left= heap[left_child];
             Object node = heap[index];

             if ((isLessThanEqualTo(right,node)) && (isLessThanEqualTo(left,node))){
                 return;
             }
         }
         else if (size==right_child){
             //only left child exists
         } 
         else {
             // no child exists
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:16:29.683

在 Java 中处理此类事情的一般方式是：

1.  限制存储在数据结构中的元素实现`Comparable`，或
2.  在堆对象中存储一个比较器（在构造时设置）。

以[Java API](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)中的 TreeSet 类为例。

请注意，因为 Java 是（大部分）静态类型语言，所以对这种数据结构使用泛型非常普遍。它们可能值得学习，尽管我可以理解让堆类为特定类型的对象工作的愿望。

此外，如果本练习的目的是了解堆的工作原理，那就太好了。如果你真的想要一个 Java 应用程序的优先级队列，Java 已经有一个`PriorityQueue`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:25:07.090

行！解决方案是使用 Comparable 而不是 Objects。然后使用 node.compareTo(right) （等）进行比较！

有关更多详细信息，请参阅此链接： [Java 中的抽象对象比较](https://stackoverflow.com/questions/13305940/abstract-object-comparison-in-java)

```
public class Heap{
    Comparable [] heap=new Comparable[1000];
    int size=0;
    Heap() {        
    }
    public void HeapifyDownwards (int index){
        int left_child=2*index+1;
        int right_child=2*index+2;

        Comparable right= heap[right_child];
        Comparable left= heap[left_child];
        Comparable node = heap[index];

        if (size>right_child){
            // both right and left child exist
            if ((node.compareTo(right)>0) && (node.compareTo(left)>0)){
                return;
            }
            else if ((right.compareTo(node)>0) && (right.compareTo(left)>0)){
                Comparable temp=right;
                heap[right_child]=node;
                heap[index]=temp;
                HeapifyDownwards(right_child);
            }
            else if ((left.compareTo(node)>0) && (left.compareTo(right)>0)){
                Comparable temp=left;
                heap[left_child]=node;
                heap[index]=temp;
                HeapifyDownwards(left_child);
            }
        }
        else if (size==right_child){
            //only left child exists
            if (left.compareTo(node)>0){
                Comparable temp=left;
                heap[left_child]=node;
                heap[index]=temp;
                HeapifyDownwards(left_child);
            }
            else {return;}
        } 
        else {
            return;
        }
    }
    public void HeapifyUpwards (int index){
        int parent_index=(index-1)/2;

        Comparable parent= heap[parent_index];
        Comparable node = heap[index];

        if (node.compareTo(parent)>0){
            Comparable temp= parent;
            heap[parent_index]=node;
            heap[index]=temp;
            HeapifyUpwards(parent_index);
        }
        else{
            return;
        }
    }
    public void Insert (Comparable in){
        heap[size]=in;
        size++;
        HeapifyUpwards(size-1);
    }
    public Comparable Remove (){
        Comparable out=heap[0];
        heap[0]=heap[size-1];
        size--;
        HeapifyDownwards(0);
        return out;
    }
}

public class TestObject implements Comparable{
    int value;
    TestObject (int a) {
        value=a;
    }

    @Override
    public int compareTo (Object b){
         if (this.getClass() == b.getClass()){
            TestObject b_test = (TestObject) b;
            if (this.value<b_test.value){
                return -1;
            }
            else if(this.value==b_test.value){
                return 0;
            }
            else return 1;
         }
         else return -1;
    }

    public void Print (){
        System.out.println(value);
    }
} 
```

# mysql - MYSQL NOT IN 子选择查询

> ID：13303026
> 
> 赞同：2
> 
> 时间：2012-11-09T06:12:17.730
> 
> 标签：mysql, notin

我正在尝试从 sql 查询中获取选择的逆。这是我的场景，我选择与查询的家庭相关的付款，并且在过去 6 个月内进行过捐赠的人被认为是活跃的。我对过去 6 个月内没有参赛作品的人感兴趣。

我可以选择在过去 6 个月内捐款的人：

```
SELECT ppl.plg_FamID
FROM pledge_plg AS ppl
WHERE  ((DATEDIFF( NOW(), ppl.plg_date ) < 180) ) 
```

当我尝试选择那些没有捐款的人时，我收到一个错误（“内部服务器错误”）。我在 NOT IN 函数内的子选择语句中使用上述代码，如下所示：

```
 SELECT pp.plg_FamID
FROM pledge_plg AS pp
WHERE pp.plg_FamID NOT IN (
        SELECT ppl.plg_FamID
        FROM pledge_plg AS ppl
        WHERE  ((DATEDIFF( NOW(), ppl.plg_date ) < 180) ) 
    )
ORDER BY pp.plg_FamID ASC, pp.plg_date DESC 
LIMIT 0, 30 
```

完整代码如下（仅供参考）。

```
SELECT DISTINCT
    ff.fam_Envelope AS ENV, 
    ff.fam_ID AS "Family ID", 
    ff.fam_Name AS Family,
    fc.c3 AS "Active?",
    pp.plg_date,
    (DATEDIFF( NOW(), pp.plg_date ))
FROM 
    family_fam AS ff 
LEFT JOIN family_custom AS fc ON ff.fam_ID = fc.fam_ID
LEFT JOIN pledge_plg AS pp ON ff.fam_ID = pp.plg_FamID
WHERE 
    fc.c3 = "true" 
    AND pp.plg_FamID NOT IN (
        SELECT ppl.plg_FamID
        FROM pledge_plg AS ppl
        WHERE  ((DATEDIFF( NOW(), ppl.plg_date ) < 180) )
    )
ORDER BY ff.fam_ID ASC, pp.plg_date DESC 
LIMIT 0, 30 
```

对此问题的任何见解表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:51:53.320

NOT IN 解决方案的问题在于，如果内部查询有一个或多个空值，则结果集为空。您可以尝试在内部查询的 where 子句中添加 IS NOT NULL 来解决此问题。

```
WHERE  ((DATEDIFF( NOW(), ppl.plg_date ) < 180) ) AND ppl.plg_date IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:20:37.603

我将把查询改写如下：

```
 SELECT ppl.plg_FamID
     FROM pledge_plg AS ppl
     HAVING MAX(pp.plg_date) < DATE_SUB( CURDATE(),INTERVAL 180 DAY); 
```

# ios - 如何使用 flex 4.6 将区域置于 iOS 软键盘上方

> ID：13303030
> 
> 赞同：0
> 
> 时间：2012-11-09T06:12:56.823
> 
> 标签：ios, apache-flex, mobile, keyboard, flex4.6

我在屏幕上有许多 UI 组件。当我在 iOS 中单击文本输入时，会显示键盘，但它会与一些 UI 组件重叠，例如另一个文本输入和按钮。我希望在显示键盘时所有这些都对用户可见。我已经在 flex 中尝试过与键盘相关的属性，例如 needSoftKeyboard、requestSoftKeyboard()，但这些似乎都不适用于 iOS。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:35:43.897

我知道这个问题很老，但也许它可以帮助将来的人。

在 application.xml 文件中，有一个软键盘行为的设置。其中之一是平移，它向上滑动显示以保持焦点对象在视图中。还有一个（我现在不记得它的名字了）会挤压视图，因此所有内容都保留在屏幕上，但看起来会被挤压。您可能必须使用平移，并稍微重做布局，以便您想要看到的对象都可以放在那个小空间中。
我记得读过一些关于将视图放入滚动条的能力，当键盘向上平移时，您将能够滚动视图以查看所有显示对象。除此之外，实际上没有办法在键盘上方显示全屏内容。

一些 flex 对象不喜欢被平移。带有 Flex 4.6 Mobile 皮肤的 TextInputs 不支持平移，文本将平移到组件之外。我也不认为滚动条内的任何东西都支持平移

# javascript - Javascript 依赖列表

> ID：13303040
> 
> 赞同：5
> 
> 时间：2012-11-09T06:14:17.153
> 
> 标签：javascript

我有一个需要找出依赖关系的元素列表。

我有：

```
[{
  "a": ["b", "d"]
}, {
  "d": ["c", "e"]
}] 
```

`a`取决于`b`和`d`，并且`d`取决于`c`和`e`。有没有办法为此巧妙地构建依赖关系？输出应该（可能）是：

```
["b", "c", "e", "d", "a"] 
```

/克里斯蒂安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T06:28:44.313

假设您想要一个元素的递归依赖项列表，包括元素本身，以任何顺序：

“对于每个依赖项，将其依赖项添加到依赖项列表中”足够聪明吗？

```
function recursiveDependencies (dependencies, element){
  var output = [element];
  for(i=0; i<output.length(); i++){
    dependencies[output[i]].forEach(function(x){
      if(output.indexOf(x)<0){ //prevent duplicates
        output.push(x)
      }
    })
  }
  return output;
} 
```

如果您希望元素本身位于末尾而不是开头，您可以使用`output.push(output.shift())`

* * *

如果您希望您的依赖项的顺序是每个元素都在依赖它的元素之前，那么您必须定义如何处理循环依赖项。一种处理方法是检测循环依赖并失败。

如果最多一个元素需要每个依赖项，那么您可以使用前面的算法：只需向后读取输出（或反转数组或使用`unshift`代替`push`（警告：性能下降））

* * *

依赖关系形成一个图，您正在寻找它的拓扑排序。一种（低效）方法是以深度优先顺序对节点进行排序，并在重新输入时重新插入它们。您可以使用 Open 堆栈来检测错误 - 如果子项从其父项重新进入，则您有一个循环依赖项。

更好的解决方案是使用标准的拓扑排序算法：虽然有未排序的节点，但选择一个没有未解决的依赖关系的节点：

```
function recursiveDependencies (dependencies, root){
  var nodes={};
  var nodeCount=0;
  var ready=[];
  var output=[];

  // build the graph
  function add(element){
     nodeCount++;
     nodes[element]={needs:[], neededBy:[], name: element};
     if(dependencies[element]){
       dependencies[element].forEach(function(dependency){
         if(!nodes[dependency]) add(dependency);
         nodes[element].needs.push(nodes[dependency]);
         nodes[dependency].neededBy.push(nodes[element]);
       });
     }
     if(!nodes[element].needs.length) ready.push(nodes[element]);
  }

  if(root){
    add(root)
  } else {
     for (element in dependencies){
       if(!nodes[element]) add(element);
    }
  }

  //sort the graph
  while(ready.length){
    var dependency = ready.pop();
    output.push(dependency.name);
    dependency.neededBy.forEach(function(element){
      element.needs = element.needs.filter(function(x){return x!=dependency})
      if(!element.needs.length) ready.push(element)
    })
  }

  //error-check
  if(output.length != nodeCount){
    throw "circular dependency detected"
  }

  return output;
} 
```

小提琴：http: [//jsfiddle.net/Xq5dz/4/](http://jsfiddle.net/Xq5dz/4/)

# jquery - wijgrid 有时在具有 display:none 的 div 内无法正确呈现

> ID：13303042
> 
> 赞同：1
> 
> 时间：2012-11-09T06:14:23.577
> 
> 标签：jquery, html-table, wijmo

我有一个 wijgrid，它不能在具有样式 display:none 的 div 内正确呈现

```
<div style="display:none">
  <div>
     <table id="table1"><table>
  </div>
<div> 
```

然后我动态构建thead 和tbody 以及设置wijgrid。

```
$("#table1").wijgrid(); 
```

代码有时可以正常工作，但有时表格会以 width="0px" 呈现，我已附加输出。![输出](../Images/c1eecd4fca4006c1647248da0148d6f5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:31:26.027

不确定您是否仍在查看此内容，但您需要在用于显示 div 的 javascript 中绘制 wijgrid。

我在处理 wijmo 中隐藏的任何内容时的经验是，即使您取消隐藏 div，也不会正确绘制所有内容。

我尝试隐藏和取消隐藏使用各种 wijmo 组件的小部件，并且在取消隐藏或排序后几乎所有内容都需要重新绘制。

# android - 如何获取存储在 MySQL 中的经纬度位置并在 Android 地图应用程序中使用

> ID：13303045
> 
> 赞同：0
> 
> 时间：2012-11-09T06:14:28.753
> 
> 标签：android, maps

我试图获取存储在 MySQL 中的纬度和经度位置。我想将这些值用于我的 Android 地图应用程序。

这是我的代码：

**桌面脚本.Java**

```
Button direction = (Button) findViewById (R.id.btnDir);
direction.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {
Intent z = getIntent();
des_lat = z.getExtras().getString("des_lat");
des_long = z.getExtras().getString("des_long");
Intent i = new Intent(android.content.Intent.ACTION_VIEW,
Uri.parse("http://maps.google.com/maps?&daddr="+des_lat+","+des_long));
//("geo:37.827500,-122.481670"));
startActivity(i);
}
}); 
```

这是内容**.Java**

```
private ListView list;
int x;

private String panjang[];

public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.kontent);
    super.initButtonSearch();
    list = (ListView) findViewById(R.id.list);
    JSONObject jo;

    try {
        jo = new JSONObject(JsonKontent);
        JSONArray ja = jo.getJSONArray("result");
        System.out.println("Panjang : " + ja.length());

        if (ja.length() == 0) {
            Toast.makeText(Content.this, "Data tidak ada!",
                    Toast.LENGTH_LONG).show();
            finish();
        }
        content_id = new String[ja.length()];
        c_title = new String[ja.length()];
        c_telephone = new String[ja.length()];
        c_short_description = new String[ja.length()];
        c_long_description = new String[ja.length()];
        c_image1 = new String[ja.length()];
        c_image2 = new String[ja.length()];
        l_address = new String[ja.length()];
        catagory_id = new String[ja.length()];
        Location myLoc = new Location("sharedPreferences");
        Location restLoc = new Location("restaurantTable");
        l_latitude = new String[ja.length()];
        l_longitude = new String[ja.length()];
        c_name = new String[ja.length()];
        panjang = new String[ja.length()];
        for (x = 0; x < ja.length(); x++) {
            JSONObject joj = ja.getJSONObject(x);
            content_id[x] = joj.getString("content_id");
            catagory_id[x] = joj.getString("catagory_id");
            c_title[x] = joj.getString("c_title");
            c_telephone[x] = joj.getString("c_telephone");
            c_short_description[x] = joj.getString("c_short_description");
            c_long_description[x] = joj.getString("c_long_description");
            c_image1[x] = HTTPConnection.urlPicture
                    + joj.getString("c_image1");
            c_image2[x] = HTTPConnection.urlPicture
                    + joj.getString("c_image2");
            l_address[x] = joj.getString("l_address");
            l_latitude[x] = joj.getString("l_latitude");
            l_longitude[x] = joj.getString("l_longitude");
            c_name[x] = joj.getString("c_name");
            myLoc.setLatitude(myLatitude);
            myLoc.setLongitude(myLongitude);
            restLoc.setLatitude(Double.parseDouble(l_latitude[x]));
            restLoc.setLongitude(Double.parseDouble(l_longitude[x]));
            float f = myLoc.distanceTo(restLoc);

            int f_int = Math.round(f / 100);
            f = Float.valueOf(f_int) / 10;
            String dist = new DecimalFormat("#,##0.0").format(f);
            System.out.println("Panjang " + dist + " km");
            panjang[x] = dist + " km";
        }
    } catch (JSONException e) {
        Toast.makeText(Content.this, "Data yang dicari tidak ada!",
                Toast.LENGTH_LONG).show();
        finish();
    }
    PFCAdapter adapter = new PFCAdapter(this, c_image1, c_title, l_address,
            panjang);
    list.setAdapter(adapter);
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            System.out.println("Content ID: "
                    + Content.content_id[Deskripsi.id]);
            Deskripsi.id = arg2;
            waitDialog = ProgressDialog.show(Content.this, "Memuat",
                    "Harap tunggu, sedang terhubung dengan server");
            waitDialog.setIcon(R.drawable.iconnya);
            waitDialog.show();
            new LihatRatingTask().execute();
        }
    });
}

class LihatRatingTask extends AsyncTask<Void, Void, Void> {

    protected Void doInBackground(Void... Arg0) {
        Deskripsi.jsonRating = HTTPConnection.openUrl(HTTPConnection.host
                + "lihat_rating.php?content_id="
                + Content.content_id[Deskripsi.id]);
        Deskripsi.jsonSubCategory = HTTPConnection
                .openUrl(HTTPConnection.host
                        + "sub_catagory_parameter.php?content_id="
                        + Content.content_id[Deskripsi.id]);
        RoutePath.place = HTTPConnection
                .LoadImageFromWeb(HTTPConnection.host
                        + "Logo/"
                        + image[Integer.valueOf(catagory_id[Deskripsi.id]) - 1]);
        Intent i = new Intent(Content.this, Deskripsi.class);

        i.putExtra("des_lat", l_latitude);
        i.putExtra("des_long", l_longitude);
        startActivity(i);
        waitDialog.dismiss();
        return null;
    }

    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        waitDialog.dismiss();
    }
}

} 
```

结果在`EditText`Android 地图应用程序的目的地中

```
"null,null" 
```

如何使其成为“destination_latitude，destination_longitude”？

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:46:29.733

字符串 des_lat = z.getExtras().getString(key);

试试这个对你有帮助

# asp.net - 在 asp.net 中生成 HTML Excel 文件

> ID：13303049
> 
> 赞同：0
> 
> 时间：2012-11-09T06:15:18.100
> 
> 标签：asp.net, html

我正在使用 StringBuilder 生成动态文件。我正在生成一个两行两列的表格。在第二行中，文本中的第一列和其他表中的第二列。我尝试创造这个设计。但是设计在 Html 页面上工作，但这种设计在 excel 文件中不起作用。

```
strHTML.Append("<table  cellpadding='3' cellspacing='0' width='100%'>")
strHTML.Append("<tr><td>text</td>")
strHTML.Append("<td>text</td></tr>")
strHTML.Append("<tr><td>text</td>")``
strHTML.Append("<td><table><td>text</td></table></tr>")
strHTML.Append("</table>") 
```

但是在 Excel 文件上工作这种类型

```
<tr><td></td><td></td></tr>
<tr><td>text<table></table></td><td></td></tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:20:45.463

```
strHTML.Append("<td><table><tr><td>text</td></tr></table></td></tr>") 
```

# php - 多变量内爆

> ID：13303055
> 
> 赞同：0
> 
> 时间：2012-11-09T06:15:48.837
> 
> 标签：php, implode

```
$inputWhiteJenisPembayaran = $verifikator['whiteJenisPembayaran'];
$dataWhiteJenisPembayaran = array();
foreach ($inputWhiteJenisPembayaran as $bacaDataWhiteJenisPembayaran) {
  if ($bacaDataWhiteJenisPembayaran != "") { //jika inputnya kosong maka tidak akan dieksekusi
    // statement untuk insert data ke database
    $dataWhiteJenisPembayaran[] = $bacaDataWhiteJenisPembayaran;
  }
}
$implodeWhiteJenisPembayaran = implode(", ", $dataWhiteJenisPembayaran);

// whitelist jenis pemasang
$inputWhiteJenisPemasang = $verifikator['whiteJenisPemasang'];
$dataWhiteJenisPemasang = array();
foreach ($inputWhiteJenisPemasang as $bacaDataWhiteJenisPemasang) {
  if ($bacaDataWhiteJenisPemasang != "") { //jika inputnya kosong maka tidak akan dieksekusi
    // statement untuk insert data ke database
    $dataWhiteJenisPemasang[] = $bacaDataWhiteJenisPemasang;
  }
}
$implodeWhiteJenisPemasang = implode(", ", $dataWhiteJenisPemasang);

// whitelist jenis iklan
$inputWhiteJenisIklan = $verifikator['whiteJenisIklan'];
$dataWhiteJenisIklan = array();
foreach ($inputWhiteJenisIklan as $bacaDataWhiteJenisIklan) {
  if ($bacaDataWhiteJenisIklan != "") { //jika inputnya kosong maka tidak akan dieksekusi
    // statement untuk insert data ke database
    $dataWhiteJenisIklan[] = $bacaDataWhiteJenisIklan;
  }
}
$implodeWhiteJenisIklan = implode(", ", $dataWhiteJenisIklan); 
```

我想内爆 内爆结果是 $implode_combination_whitelist_blacklist。我做了这样的编码，但不能。

```
$implode_combination_whitelist_blacklist = implode(", ", $implodeWhiteJenisPembayaran, $implodeWhiteJenisPemasang, $implodeWhiteJenisIklan); 
```

如何成为一个内爆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:55:20.290

这应该这样做

```
$implode_combination_whitelist_blacklist = implode(", ", array_merge($implodeWhiteJenisPembayaran, $implodeWhiteJenisPemasang, $implodeWhiteJenisIklan)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-05T01:41:08.517

我认为将过滤后的数据存储在 3 个不同的数组中（每个数组内爆）然后合并它们并再次内爆是没有意义的。只需声明一个单一/主结果数组并在循环每个子数组时将值推入其中`$verifikator`。

这似乎更直接：

```
$result = array();

foreach($verifikator['whiteJenisPembayaran'] as $v) {
  if ($v != "") {
    // statement untuk insert data ke database
    $result[] = $v;
  }
}

foreach ($verifikator['whiteJenisPemasang'] as $v) {
  if ($v != "") {
    // statement untuk insert data ke database
    $result[] = $v;
  }
}

foreach ($verifikator['whiteJenisIklan'] as $v) {
  if ($v != "") {
    // statement untuk insert data ke database
    $result[] = $v;
  }
}

$implode_combination_whitelist_blacklist = implode(", ",$result); 
```

# iphone - 自动化 iPhone 应用程序的特定状态

> ID：13303056
> 
> 赞同：0
> 
> 时间：2012-11-09T06:15:57.750
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

有什么方法可以存储 iPhone 应用程序的特定状态。我的目标是制作一个独立于应用程序的库，它可以集成到任何应用程序中，并存储应用程序的状态，包括事件和相应的时间。这可以从应用程序的特定部分重放。如何实现？希望得到健康的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:42:58.237

我认为，这不是一种通用的方法。因为苹果 IOS SDK 不允许访问其他应用程序状态信息。但是你可以尝试它的私有框架（在这种情况下，App 不会被苹果批准）。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:59:44.197

鉴于每个应用程序都旨在仅在其沙箱（即文件系统的受限区域）内存储和访问数据，我建议您寻找外部数据源来存储您的库。

具体来说，iCloud 存储能否满足您的要求？但是，有些用户可能没有活动帐户，因此替代方案可能是使用后端即服务 (BAAS) 产品（例如，Kinvey、StackMob、Parse）？您可以在后者上存储用户的个人资料和相关数据。或者您甚至可以将自己的后端作为外部数据源。

有关 iOS 中沙盒方法的信息，请在此处查看：http: [//developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html#//apple_ref/doc/uid/TP40007072 -CH9-SW2](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html#//apple_ref/doc/uid/TP40007072-CH9-SW2)。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T05:50:29.583

在对该部分进行大量挖掘之后，我在以下链接中找到了我的问题的确切解决方案。[http://www.cocoawithlove.com/2008/11/automated-user-interface-testing-on.html](http://www.cocoawithlove.com/2008/11/automated-user-interface-testing-on.html)。希望能帮助那些寻找解决方案的人。但是，使用所提供解决方案的应用程序将被应用商店拒绝。它只能用于您自己的目的。

# cocoa - 如何打印 NSBitmapImageRep

> ID：13303061
> 
> 赞同：0
> 
> 时间：2012-11-09T06:16:15.680
> 
> 标签：cocoa

我有一个 NSBitmapImageRep，我需要打印它。在打印之前我是否需要以某种方式将 ii 放入 NSView 中，或者有什么方法可以直接打印它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:28:59.203

使用 an`NSView`是快速简便的方法。另见：`-[NSBitmapImageRep CGImage]`。

另一种方法是使用 PrintCore.framework，它是 ApplicationServices.framework 的一部分。

# android - 如何使用两个文本视图创建自定义网格视图

> ID：13303064
> 
> 赞同：1
> 
> 时间：2012-11-09T06:16:19.353
> 
> 标签：android, gridview

我如何使用两个文本视图自定义网格视图的单元格，因为我想在每个单元格中显示 2 个标签。

在我的任务中，我正在寻找作为表格的网格视图，它在每个单元格中包含两个不同的值。我已经为此尝试了自定义网格视图，如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent">
<Button android:id="@+id/selectBtn"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:text="Select" android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:minWidth="200px" />
<GridView android:id="@+id/PhoneGrid"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:numColumns="auto_fit" android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp" android:columnWidth="90dp"
    android:stretchMode="columnWidth" android:gravity="center"
    android:layout_above="@id/selectBtn" />
</RelativeLayout> 
```

和自定义布局是，..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent">
<TextView android:id="@+id/Name" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_centerInParent="true" />
<TextView android:id="@+id/Number" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" />
</RelativeLayout> 
```

在此我需要在单个 Gridview 中显示姓名和电话号码..

帮我做解决方案..

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:20:27.150

您想创建一个`Adapter`扩展类`BaseAdapter`以在代码中传递到 GridView。您需要做的所有事情都已经在您需要覆盖的方法中为您准备好了。Android 有一个不错的[教程](http://developer.android.com/guide/topics/ui/layout/gridview.html)，可以帮助您入门。如果您需要帮助了解每个部分的作用，请在此处查看。有很多人经历过你现在正在经历的同样的事情，所以资源充足:)

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:32:29.367

您可以点击此链接并可以替换 imageview 的位置，您可以使用文本，您需要什么..

[自定义网格视图](http://www.mkyong.com/android/android-gridview-example/)

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T04:32:32.437

简单地说，我使用了多行处理的字符串作为“\n”..

就像您可以按如下方式替换字符串

```
String header=first_String_Variable+"\n"+second_String_Variable; 
```

并使用适配器设置网格..

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, header);
gridHeader.setAdapter(adapter); 
```

# javascript - jQuery 仅保存在事件中的最后一个值

> ID：13303068
> 
> 赞同：2
> 
> 时间：2012-11-09T06:16:33.667
> 
> 标签：javascript, jquery, javascript-events

我是 jQuery 新手，并试图了解下面的代码中发生了什么。

```
var data = {1, 2, 3, 4};
for (var key in data) {
    $("#id"+key).click(function() {
        $(".class"+key).hide();
    });
} 
```

当我运行此代码时，无论我单击哪个 id，它都会隐藏 class4。为什么会出现这种行为？

另外，如何让 id1 隐藏 class1、id2 隐藏 class2 等等？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:31:26.447

[工作演示](http://jsfiddle.net/5g7RP/)

```
var data = [1, 2, 3, 4];
for (var i = 0;i < data.length; i++) {    
    (function(key) {    
        $("#id"+key).click(function() {
            $(".class"+key).hide();
        });
    })(data[i])
}​ 
```

在您的 for each 循环中，闭包是由处理程序单击创建的，但它指向`key`哪个在全局范围内。它被改变了。在我的代码中，关键点指向由附加函数包装创建的范围，`.click`并`key`在其中指向`key`由该函数创建的范围，每次它都是新的

`var data = {1, 2, 3, 4};`- 这不是有效的对象定义。它应该是这样的： `var data = {key:"value", key2:"value",...};`上面的示例也适用于正确指定的对象。只是不要忘记您还应该`key`像这样测试变量： `if(data.hasOwnProperty(key)) {...}`为了过滤掉`.toString`等`.valueOf`（默认对象方法）

或者像一种解决方法 - 您始终可以`key`从单击的元素 ID 构建类名。

```
$("#id"+key).click(function() {
    var className = ".class" + $(this).prop("id").replace("id", "");
    $(className).hide();
}); 
```

并且不需要关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:31:08.603

尝试这个

```
var data = { 1: 1, 2: 2, 3: 3, 4: 4 };
for (var key in data) {
   $("#id" + key).click(function () {
           $(".class" + this.id.substr(this.id.toString().length - 1, 1)).hide();
     });
} 
```

其实问题是

1.  `var data = {1, 2, 3, 4};`肯定是无效的。
2.  `$(".class"+key)`在运行时对事件进行评估，`click`并且当时`key`持有`4`它是分配给它的最后一个值，所以它是错误的。`id`因此，您应该在运行时从点击器本身获取该数值。

# angularjs - AngularJS - jQueryUI 滑块值对模型的反射

> ID：13303071
> 
> 赞同：4
> 
> 时间：2012-11-09T06:16:55.357
> 
> 标签：angularjs

我有以下指令：

```
directive('yearSlider', function(Filter) {
    return {
        restrict: 'E',          // must be an element
        transclude: false,      // don't preserve content
        controller: function($scope) {
            $scope.$watch('yearMin + yearMax', function(newVal, oldVal) {
                if(newVal === oldVal) return; // skip initialization

                $("#year-slider").slider("option", "min", parseInt($scope.yearMin));
                $("#year-slider").slider("option", "max", parseInt($scope.yearMax));
                $("#year-slider").slider("value", $("#year-slider").slider("value"));
            });
        },
        link: function postLink($scope, $element) {
            $element.slider({
                range: true,
                min: 1900,
                max: new Date().getFullYear(),
                values: [ 1900, new Date().getFullYear() ],
                slide: function(event, ui) {
                    $scope.yearFrom = ui.values[0];
                    $scope.yearTo = ui.values[1];
                    $scope.$apply();
                },
                change: function(event, ui) {
                    $scope.yearFrom = ui.values[0];
                    $scope.yearTo = ui.values[1];
                    Filter.apply($scope);
                }
            });
        },
        template:
            '<div id="year-slider"></div>',
        replace: true
    }
}). 
```

该指令在视图中使用并正确呈现滑块。

我将滑块的两个值分配给两个模型`yearFrom`，并`yearTo`获得滑块指定的年份范围。在某些情况下，我需要更改滑块的最小/最大值，这就是我在`controller`上面所做的。

这里的问题是我正在关注这两个值`yearMin`，`yearMax`并且这两个模型连续变化，导致控制器和`change`执行`$element.slider`两次。

我想要实现的是执行一次，但我有两个模型的事实使得它在逻辑上是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T06:16:55.357

我在写问题时想通了，我只是将模型更改为：

```
$scope.years = { min: data.yearMin, max: data.yearMax } 
```

并将我的 $watch 更改为：

```
$scope.$watch('years', function(newVal, oldVal) {
    if(newVal === oldVal) return; // skip initialization

    $("#year-slider").slider("option", "min", parseInt($scope.years.min));
    $("#year-slider").slider("option", "max", parseInt($scope.years.max));
    $("#year-slider").slider("value", $("#year-slider").slider("value"));
}); 
```

将 JQuery 滑块放在一边，这是我使用 AngularJS 时面临的一个常见问题，特别是有许多模型向观察者触发多个事件，而我需要它们触发一次。我相信以类似的方式（如果适用）对它们进行分组可以解决这个问题。

# java - 依赖分析工具 - 更新回归测试用例

> ID：13303073
> 
> 赞同：18
> 
> 时间：2012-11-09T06:17:06.700
> 
> 标签：静态分析的常见问题解答部分，像, java, testing, dependencies, static-analysis, qa

**问题**

我想这是一个很常见的问题。添加新代码会转化为回归——现有的测试用例会过时。代码中的依赖意味着即使你知道如何修复这个特定的回归，在两个方向上的 n 多个地方也可能存在间接回归 - 传入和传出。

**要求**

我有一家运行 SVN、Maven+Nexus、Sonar、Jenkins 和 JIRA、QC、QTP 的商店。总而言之，一个良好的 CI 环境。

随着每一个新的构建，我都会有新的回归案例。我想在两个方向上找到 Java 包依赖关系并正确更新测试用例，以涵盖所有类型的回归——直接和间接。这更是一个问题，因为我的单元测试覆盖率甚至没有接近 50%，而且集成测试的自动化跟不上开发的步伐。

**我的选择**

1.  **声纳**
2.  **谷歌代码Pro**
3.  **建筑师**
4.  **Jtest**（与供应商 Parasoft 进行了讨论。他们没有用于此的工具）
5.  利用我**现有的环境**，比如说，一个**Atlassian**插件
6.  **Kalisitck**（供应商演示 - 不错的工具 - 涉及学习曲线和成本）
7.  **Coverity**（像 Kalistick - 学习曲线和复杂的安装。非常昂贵的许可证。
8.  任何其他开源/付费？

JArchitect、SONAR 和 CodePro 将为您提供一个类似[this](http://docs.codehaus.org/display/SONAR/Cycles+-+Dependency+Structure+Matrix)或[this](http://clarkware.com/software/images/figure1b.jpg)的简单矩阵。通过告诉我哪些**用户**和**使用的**类受到影响，这满足了我的一半要求。我想要的是更进一步，**让工具告诉我**哪些相应的测试用例受到影响，以及我是否需要更新和/或执行它们以覆盖我的回归风险。

Kalistick、Coverity 和其他人可能会做我想做的事 - 它们的设置和配置很繁重，随着您的系统缓慢增长，因此不能立即产生生产力，需要成本并且需要学习曲线。

**简短的问题**

考虑到安装、学习曲线、成本、可用性或任何其他参数等所有因素，在我的设置中使用哪些工具。

* * *

* * *

我已经阅读了关于[静态分析的常见问题解答部分，像](/questions/tagged/static-analysis "显示标记为“静态分析”的问题")[Java 的静态分析工具推荐这样的](https://stackoverflow.com/questions/97599/static-analysis-tool-recommendation-for-java?rq=1)线程很少？, [https://stackoverflow.com/questions/3716203/automatic-code-quality-and-architecture-quality-static-code-analysis](https://stackoverflow.com/questions/3716203/automatic-code-quality-and-architecture-quality-static-code-analysis)和 [代码度量的魅力是什么？](https://stackoverflow.com/questions/195887/what-is-the-fascination-with-code-metrics#195932) 和许多相关的，但他们没有回答我的具体问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T03:40:29.800

您可以通过跟踪它们接触的代码来确定哪些测试是相关的。您可以使用测试覆盖率工具跟踪他们接触的代码。

大多数测试覆盖工具构建了一组显式的运行测试执行的位置。这就是“覆盖”的意义所在。如果您组织测试运行以一次执行一个单元测试，然后拍摄覆盖率数据的快照，那么您就知道每个测试涵盖了哪些代码。

修改代码时，您可以确定修改后的代码的交集以及单个测试涵盖的内容。如果交叉点非空，您肯定需要再次运行该测试，并且可能需要更新它。

使这项工作存在几个实际问题。

首先，通常很难弄清楚测试覆盖工具是如何记录这些定位数据的。其次，您必须让测试机制在每个测试的基础上捕获它；这可能难以组织，和/或覆盖数据可能难以提取和存储。第三，您需要计算测试中“修改的代码”与“覆盖的代码”的交集；这在抽象上很大程度上是一个与大位向量相交的问题。最后，捕获“代码修改”有点棘手，因为有时代码*会移动*；如果测试了文件中的位置 100，并且行在文件中*移动*，您可能无法获得可比较的位置数据。这将导致误报和误报。

有一些测试覆盖率工具可以以易于捕获的形式记录覆盖率数据，并可以进行计算。确定代码更改比较棘手；您可以使用 diff，但移动的代码会使问题有些混乱。您可以找到比较代码结构的差异工具，这些工具可以识别此类移动，因此您可以获得更好的答案。

如果您[有源代码切片器](http://en.wikipedia.org/wiki/Program_slicing)，则可以计算测试的输出如何（向后切片）依赖于输入；显然，该切片中的所有代码都会影响测试。我认为这里的坏消息是这样的切片机并不容易获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:11:15.583

你能为你的问题找到的最好的工具实际上不是一个工具，而是一个实践。我强烈建议您阅读有关测试驱动开发的内容（请参阅[Lasse Koskela 的书](http://www.manning.com/koskela/)）和示例规范（请参阅[Gojko Adzic 的书](http://gojko.net/)，它们很棒）。

使用这些做法将从根本上改变两件事：

1.  您将拥有接近 100% 的测试覆盖率
2.  测试将成为一等公民，并将成为您代码的中心点

我发现这与您的问题相关的原因是您的场景暗示了测试的完全相反的作用：人们将在代码中执行更改，然后他们会想“哦，不......现在我必须弄清楚我在那些该死的测试中打破了什么”。

根据我的经验，不应忽视测试或将其视为“低级代码”。虽然我的回答指出了从长远来看只会产生明显结果的方法变化，但它可能有助于在未来完全避免这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T08:52:12.047

我本人是 Sonar 的忠实粉丝，因为您已经在运行它并在您的 CI 环境中工作，这将是我的建议。我不太确定 Sonar 的 Dependency Cycle Matrix 是如何做到你想要的，或者更确切地说是你想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T17:23:05.417

[您可以使用Classycle-Dependency Checker](http://classycle.sourceforge.net/usageDChecker.html)找到最高级别的依赖项。[指南中的“检查类依赖关系](http://classycle.sourceforge.net/ddf.html#checkDependency)”部分可能会对您的情况有所帮助。然而，通常使用静态分析工具，我们分析源代码库（例如：Project->src 目录）或测试代码库（例如：Project->test 目录），但不能同时分析两者。但在您的情况下，您似乎也想找出源代码和测试代码之间的依赖关系。因此，通过提供输入路径作为 src 和 test 的父路径（例如：项目根目录）来执行适当的依赖关系分析工具可能是您需要的（例如：使用依赖关系找出 -> 如果源 X 发生变化，什么测试中的依赖类会受到该更改的影响）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-04T13:00:11.703

如果我正确阅读了这个问题，您需要一个分析源代码并确定哪些测试不需要重新运行的工具。

首先要考虑的是**始终运行所有测试有什么问题**？这就是 CI 的*意思*。如果您无法在 15 分钟内运行所有单元测试并且无法在一夜之间运行所有集成/压力测试，请解决导致这种情况的任何问题，可能通过购买一些硬件来解决。

如果做不到这一点，唯一可以跟踪潜在测试回归的是覆盖率分析（例如[http://www.eclemma.org/](http://www.eclemma.org/)）。即使是基本的 OO 设计，更不用说依赖注入了，静态包或类依赖充其量是没有意义的，并且可能会积极误导，就哪些更改可能导致哪些测试失败而言。这忽略了问题是 A 应该调用 B 而不是的情况。但是，交叉引用更改的文件与调用的文件，如果没有交叉点，则可能不重新运行测试是安全的 - 剩余的失败将是一些代码添加一个以前没有的事件处理程序之类的事情。

我认为没有免费的工具可以做到这一点，但它应该可以从 Jenkins/Emma/Git 编写脚本。或者使用 Kalistick 等集成解决方案之一。但我怀疑它能否有效地击败基于*与开发团队沟通的人类判断，了解他们正在尝试做什么*。

在一个模糊的相关说明中，Java 世界实际需要但不存在的简单工具是 junit 的扩展，它**按依赖顺序**运行一组测试，并在第一个错误时停止。这将提供一点额外帮助，让开发人员专注于最可能的回归源。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-07T12:11:46.257

一些可能有帮助的工具。请注意，并非所有这些都与 CI 集成。

[iPlasma](http://loose.upt.ro/reengineering/research/iplasma)是一个很棒的工具

[CodePro](http://loose.upt.ro/reengineering/research/codepro?_s=Q-ZWKCpHKwLLOX0J&_k=4nY91tpp&_n&15)是一个 Eclipse 插件，它有助于检测代码和设计问题（例如重复的代码、破坏封装的类或放置在错误类中的方法）。（现在被[谷歌](https://developers.google.com/java-dev-tools/codepro/doc/)收购）

[Relief](http://www.workingfrog.org/)是一种可视化 Java 项目的以下参数的工具： 包的大小，即它包含多少类和接口 被可视化的项目的种类（包和类表示为框，接口和类型的字段表示为球体）。正在使用的项目的重量（表示为重力，即中心距离）依赖项的数量（表示为深度）。

[Stan4j](http://stan4j.com/general/download-ide.html)是一个售价几百美元的商业工具。它仅针对 Java 项目，非常接近（或比报告更好一点？不确定）Sonar。它具有良好的 Eclipse 集成。

[Intellij 依赖分析](http://www.jetbrains.com/idea/features/dependency_analysis.html)

从您的问题中我可以理解的是 - 您需要跟踪两个 OO 指标 - [Efferent Coupling (Ca)](http://staff.unak.is/andy/StaticAnalysis0809/metrics/ce.html)和Afferent Couplings [(Ce)](http://staff.unak.is/andy/StaticAnalysis0809/metrics/ca.html)。有了这个，您可以缩小到所需的包。您可以探索编写 Eclipse 插件的机会，该插件在每次构建时都可以突出显示基于 Ca、Ce 指标的所需类。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-03T09:48:16.710

使用[JDepend](http://clarkware.com/software/JDepend.html)，您可以分析包之间的依赖关系，甚至可以创建单元测试来确保依赖关系，或者将其与[Fitnesse](http://fitnesse.org/)集成以获得良好的依赖关系表测试。如果您的测试在特定的包中，这可能会有所帮助......

# c# - url WebRequest 404 错误 RESTful 服务中的百分比编码

> ID：13303077
> 
> 赞同：2
> 
> 时间：2012-11-09T06:17:36.050
> 
> 标签：c#, .net, wcf, rest

我正在尝试做WEB简单的宁静服务。我的代码基于这篇文章： http: [//www.progware.org/Blog/post/A-simple-REST-service-in-C.aspx](http://www.progware.org/Blog/post/A-simple-REST-service-in-C.aspx) 我稍微改了一下，所以我的服务可以获得几个参数。这是我的更改：

```
 public string GetClientNameById(string LS, string Owner, string info)
{
 .....
 return System.IO.File.ReadAllText(XMLFileName, Encoding.GetEncoding(1251));
}
[ServiceContract(Name = "RESTServices")]
    public interface IRESTServices
    {
        [OperationContract]
        [WebGet(UriTemplate = Routing.GetEPDRoute, BodyStyle = WebMessageBodyStyle.Bare)]
        string GetClientNameById(string Id,string LS,string tmp);
    }
public static class Routing
    {
        public const string GetEPDRoute = "/EPD/{id}+{LS}+{tmp}";
    } 
```

它适用于英文符号，但我需要使用西里尔符号。如果我在 url 中使用西里尔符号，它会返回 404 错误。我尝试使用百分比编码，但结果相同这是我的客户端代码：

```
string url = "http://localhost:4385/Service.svc/EPD/995118466+" + System.Uri.EscapeDataString("Аксенова") + "+434";
            WebRequest req = WebRequest.Create(url);
            using (HttpWebResponse resp = req.GetResponse() as HttpWebResponse)
            {
                StreamReader reader = new StreamReader(resp.GetResponseStream());
                label1.Text = reader.ReadToEnd();
            } 
```

任何想法如何解决这一问题？

**更新：**我找到了一个解决方案 - 只是用数字代码替换了非英文符号，但我想找到更优雅的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:33:05.350

```
<globalization
      requestEncoding="utf-8"
      responseEncoding="utf-8"
      responseHeaderEncoding="utf-8"
      fileEncoding="utf-8"
      resourceProviderFactoryType=""
      enableBestFitResponseEncoding="true"/> 
```

在 web.config 全球化标签中添加这些参数

然后使用这样的东西

```
//UTF-8
HttpUtility.UrlDecode(parameter, System.Text.Encoding.UTF8)
//UTF-16
HttpUtility.UrlDecode(parameter, System.Text.Encoding.Unicode)
//UTF-32
HttpUtility.UrlDecode(parameter, System.Text.Encoding.UTF32) 
```

希望能帮助到你

# php - 使用前端用户的插件在 wordpress 中添加带有表单的自定义页面

> ID：13303079
> 
> 赞同：2
> 
> 时间：2012-11-09T06:17:38.147
> 
> 标签：php, plugins, wordpress

嗨，我对 wordpress 插件开发非常陌生，我创建了一个插件，它添加了一个 Sidemenu 来显示 jquery 对话框，

现在我试图在页面中向前端用户显示一个表单，但我很困惑如何开始，

我想在前端用户的侧面菜单中显示一个链接，当用户单击它时，我想用插件打开我的自定义页面。（点击后网址应该是这样的：demo.com/my_page.php）。我用谷歌搜索了它，但没有发现任何理解一些建议模板的东西（我还不知道它们）。

请你建议我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:12:01.630

PHP 版本 5+

对于我将在下面描述的前两种方法，首先要做的是在 Wordpress 中创建页面。选择页面-> 新建以创建它，标题为“我的页面”或“我的页面”。在这两种情况下，slug 都应该是“我的页面”，除非已经存在。不要使用“my_page”。

有几种方法可以在插件中管理前端页面。

我最喜欢的一种是将页面放在插件的目录中，然后将其复制到主题的目录中，如下例所示。

像往常一样创建表单并将其保存在插件目录中。

This file will be the template for the page in the stylesheet directory. The page must be located in this directory, as far as I know, for WP to load it.

Example:

```
// Make sure you define in your plugin's main script the location of the plugin, with a code like this:

// Holds the absolute path to MyPlugin directory, without slashes.
if ( !defined( 'MyPlugin_DIR' ) ) define( 'MyPlugin_DIR', __DIR__ );

    function CopyFile() {

      $TemplateFileSourceURL = MyPlugin_DIR . '/my-page.php'; // Address to your file in the plugin directory
      $TemplateFileTargetURL = get_stylesheet_directory() . '/page-my-page.php'; // Note the "page-" prefix, it is necessary for WP to select this file instead of the general "page.php". The name after the prefix must match the slug of the page created in WP. 

      if ( !file_exists( $TemplateFileSourceURL ) ) {
        return FALSE;
      }

      $GetTemplate = file_get_contents( $TemplateFileSourceURL );
      if ( !$GetTemplate ) {
        return FALSE;
      }

      $WriteTemplate = file_put_contents( $TemplateFileTargetURL, $GetTemplate );
      if ( !$WriteTemplate ) {
        return FALSE;
      }
      return TRUE;
    } 
```

The other method involves creating the page and saving it in the theme's directory as a template file or just as a page.

To make it a template, you have to add in the first line the following comment:

```
/*
Template Name: MyPage
*/ 
```

MyPage can be any name. Then go to the page editor in WP and select the MyPage template in the right bar. It should be there when you reload the editor's page.

You don't have to make it a template if you add the prefix "page-" to the name of the file in the theme's directory. i.e. page-my-page.php.

The last method is to create the file, save it wherever you want and load WP with a code like this in the first lines:

NOTE: No need to create the page in WP if this method is used, it will do nothing, although you might have to redeclare user's variables and functions.

```
require_once ('WPBlogUrl/wp-load.php'); // Make sure WPBlogUrl points to the blog's url. 
```

Which method is the best one? Depends on your requirements, but if you don't want to have to add manually the front-end pages in the theme's directory, I think the first option is the best one.

Don't forget to delete the file in the uninstall script when the plugin is deleted.

Hope this helps.

Felipe Alameda A.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T21:41:31.903

Another simple solution that worked for me is just load the page with

`add_action('wp','my_custom_plugin_function');`

[http://blog.frontendfactory.com/how-to-create-front-end-page-from-your-wordpress-plugin/](http://blog.frontendfactory.com/how-to-create-front-end-page-from-your-wordpress-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:48:14.193

您可以创建新页面模板和新页面并将模板分配给该页面。

然后您可以在页面模板中添加您的自定义功能。这样，您将获得一个新的 url，并且您可以在 WordPress 上下文中运行您的自定义代码。

# android - 使用带有 LAME 的 NDK 的内置函数警告的不兼容隐式声明

> ID：13303083
> 
> 赞同：4
> 
> 时间：2012-11-09T06:17:43.830
> 
> 标签：android, makefile, java-native-interface, mp3, lame

我正在尝试遵循位于以下位置的教程

[http://developer.samsung.com/android/technical-docs/Porting-and-using-LAME-MP3-on-Android-with-JNI](http://developer.samsung.com/android/technical-docs/Porting-and-using-LAME-MP3-on-Android-with-JNI)

这样做的要点是它允许将 LAME MP3 编码器与 JNI 一起使用。

我按照教程中提到的每个步骤进行操作。我的项目位于

```
C:\workspace\ 
```

并称为“LAME_Test”。根据教程中标记为**使用 NDK 编译**的部分，我继续制作了一个名为“Android.mk”的 makefile，如下所示。

我在 64 位机器上运行 Windows 7。我确实安装了 Cygwin 和 NDK，并测试了我的设置是否适用于我正在处理的另一个项目。然而，当我去

```
/cygdrive/c/workspace/LAME_Test/jni 
```

在 Cygwin 上并发出以下命令

```
 /cygdrive/c/Android/android-ndk-r8b/ndk-build 
```

假设 NDK 位于

```
C:\Android\android-ndk-r8b 
```

编译吐出一堆这样的警告

```
warning: incompatible implicit declaration of built-in function 'memset' [enabled by default] 
```

我在这篇文章的底部附上了一小段警告（因为警告列表非常大，可能只会增加混乱 - 而不是增加价值）。

想知道是否有一种巧妙的方法来解决这些警告并获得良好、干净的编译。

**PS：**我会补充一点，我能够在上面的链接（LAME4Android）中构建+运行示例项目。这需要编译本机代码。*因此，尽管有所有警告*，该项目看起来确实构建得很好。我最初认为它是由于警告而损坏的。但是，如果有某种方法可以修复警告，那确实很棒。

**Android.mk 文件的内容**

```
LOCAL_PATH := $(call my-dir)

    include $(CLEAR_VARS)

    LOCAL_MODULE        := libmp3lame
    LOCAL_SRC_FILES     := \
    ./libmp3lame/bitstream.c \
    ./libmp3lame/encoder.c \
    ./libmp3lame/fft.c \
    ./libmp3lame/gain_analysis.c \
    ./libmp3lame/id3tag.c \
    ./libmp3lame/lame.c \
    ./libmp3lame/mpglib_interface.c \
    ./libmp3lame/newmdct.c \
    ./libmp3lame/presets.c \
    ./libmp3lame/psymodel.c \
    ./libmp3lame/quantize.c \
    ./libmp3lame/quantize_pvt.c \
    ./libmp3lame/reservoir.c \
    ./libmp3lame/set_get.c \
    ./libmp3lame/tables.c \
    ./libmp3lame/takehiro.c \
    ./libmp3lame/util.c \
    ./libmp3lame/vbrquantize.c \
    ./libmp3lame/VbrTag.c \
    ./libmp3lame/version.c

    LOCAL_LDLIBS := -llog

    include $(BUILD_SHARED_LIBRARY) 
```

**内置函数警告的不兼容隐式声明日志**

```
$ /cygdrive/c/Android/android-ndk-r8b/ndk-build
Cygwin         : Generating dependency file converter script
Compile thumb  : mp3lame <= bitstream.c
Compile thumb  : mp3lame <= encoder.c
C:/workspace/LAME_Test/jni/./libmp3lame/encoder.c: In function 'lame_encode_frame_init':
C:/workspace/LAME_Test/jni/./libmp3lame/encoder.c:202:9: warning: incompatible implicit declaration of built-in function 'memset' [enabled by default]                                                                                                 
C:/workspace/LAME_Test/jni/./libmp3lame/encoder.c: In function 'lame_encode_mp3_frame':
C:/workspace/LAME_Test/jni/./libmp3lame/encoder.c:471:17: warning: incompatible implicit declaration of built-in function 'bcopy' [enabled by default]                                                                                                    
Compile thumb  : mp3lame <= fft.c
Compile thumb  : mp3lame <= gain_analysis.c
and so on... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T11:46:48.803

经过大量搜索后，看起来我正在寻找的答案是在这里找到的

[为 Android 编译的 Lame MP3 编码器](https://stackoverflow.com/questions/8632835/lame-mp3-encoder-compile-for-android/8632948#8632948)

对我来说，关键是确保将以下行添加到我的 Android.mk 文件中

```
LOCAL_CFLAGS = -DSTDC_HEADERS 
```

正如詹姆斯·张所说。

我在这篇文章下面附上了我完整的makefile，所以我所说的非常清楚。

**更新的 Android.mk 文件的内容**

```
LOCAL_PATH := $(call my-dir)

    include $(CLEAR_VARS)

    LOCAL_MODULE        := libmp3lame
    LOCAL_SRC_FILES     := \
    ./libmp3lame/bitstream.c \
    ./libmp3lame/encoder.c \
    ./libmp3lame/fft.c \
    ./libmp3lame/gain_analysis.c \
    ./libmp3lame/id3tag.c \
    ./libmp3lame/lame.c \
    ./libmp3lame/mpglib_interface.c \
    ./libmp3lame/newmdct.c \
    ./libmp3lame/presets.c \
    ./libmp3lame/psymodel.c \
    ./libmp3lame/quantize.c \
    ./libmp3lame/quantize_pvt.c \
    ./libmp3lame/reservoir.c \
    ./libmp3lame/set_get.c \
    ./libmp3lame/tables.c \
    ./libmp3lame/takehiro.c \
    ./libmp3lame/util.c \
    ./libmp3lame/vbrquantize.c \
    ./libmp3lame/VbrTag.c \
    ./libmp3lame/version.c 

    LOCAL_LDLIBS := -llog
    LOCAL_CFLAGS = -DSTDC_HEADERS

    include $(BUILD_SHARED_LIBRARY) 
```

# java - 使用x路径在java中加载xml

> ID：13303087
> 
> 赞同：2
> 
> 时间：2012-11-09T06:18:31.243
> 
> 标签：java, xpath

这是我要加载 xml "test" 的程序的代码。当我构建这个时，我被加载并且“0”中没有节点。加载或x路径有问题。我正在使用日食。请帮我解决这个问题。

```
<?xml version="1.0"?>
<resourses>
    <resourse status="1">
        <name>resourse1</name>
        <type>1</type>
    </resourse>

    <resourse  status="2">
        <name>resourse2</name>
        <type>2</type>
    </resourse>

          <resourse  status="3">
        <name>resourse3</name>
        <type>3</type>
    </resourse>

</resourses>

public class xml_l 
{
public static void main(String[] args)

throws ParserConfigurationException, SAXException,
IOException, XPathExpressionException 

{
DocumentBuilderFactory domFactory =DocumentBuilderFactory.newInstance();
domFactory.setNamespaceAware(true);

DocumentBuilder builder = domFactory.newDocumentBuilder();

Document doc = builder.parse("/home/user/test/test.xml");
if (doc==null)
{

System.out.println("not loaded");   

}
else
{

    System.out.println(" loaded "); 
}

XPath xpath = XPathFactory.newInstance().newXPath();

XPathExpression expr = xpath.compile("//resourse[status =1]/name/text()"); 

Object result = expr.evaluate(doc, XPathConstants.NODESET);

NodeList nodes = (NodeList) result;
System.out.println(nodes.getLength());

for (int i = 0; i < nodes.getLength(); i++)                                        // nodes.getLength()
{
System.out.println(nodes.item(i).getNodeValue());

}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:38:28.433

您需要在属性前面有一个“@”来通知 xPath 您正在寻找一个属性。

```
XPathExpression expr = xpath.compile("//resourse[@status=1]/name/text()"); 
```

不是

```
XPathExpression expr = xpath.compile("//resourse[status=1]/name/text()"); 
```

# c - 线程期间程序停止

> ID：13303088
> 
> 赞同：1
> 
> 时间：2012-11-09T06:18:44.080
> 
> 标签：c, multithreading, unix

所以，我正在为同时运行 4 个线程的类编写一个程序。我的程序运行良好，除了它在运行时停止的事实。我不确定这是否与我设置 pthread_cond_wait 的方式有关，或者是否与其他原因有关。我已经多次手动跟踪该程序，但找不到解释。
这是我的代码：

```
#include <stdio.h>
#include <pthread.h>
#include <math.h>
#include <stdlib.h>

//#define TENP .1
//#define FIFTP .15

void *tenPercentA();
void *tenPercentB();
void *fiftPercentC();
void *fiftPercentD();

pthread_cond_t aPirate;
pthread_cond_t bPirate;
pthread_cond_t cPirate;
pthread_cond_t dPirate;
pthread_mutex_t mutex;
int pearls = 1000;

int main()
{
        pthread_t tid;

        pthread_setconcurrency(4);
        pthread_create(&tid, NULL, (void *(*)(void *))tenPercentA, NULL);
        pthread_create(&tid, NULL, (void *(*)(void *))tenPercentB, NULL);
        pthread_create(&tid, NULL, (void *(*)(void *))fiftPercentC, NULL);
        pthread_create(&tid, NULL, (void *(*)(void *))fiftPercentD, NULL);

        pthread_exit(0);
}

void *tenPercentA(){
        int totalA = 0;
        double tempA = 0;

        while(pearls > 0){
                pthread_mutex_lock(&mutex);
                if(pearls > 0){
                        tempA = pearls * .1;
                        tempA = ceil(tempA);
                        totalA = totalA + tempA;
                        pearls = pearls - tempA;
                        printf("Pirate A stole %1.1f pearls.\n", tempA);
                        printf("Pirate A's total: %d\n", totalA);
                        sleep(1);
                        pthread_cond_broadcast (&bPirate);
                        pthread_cond_broadcast (&cPirate);
                        pthread_cond_broadcast (&dPirate);
                        tempA = 0.0;
                }
                else{
                        printf("No more pearls!\n");
                        exit(0);
                }
                pthread_mutex_unlock(&mutex);
                pthread_cond_wait (&aPirate, &mutex);
        }
}

void *tenPercentB(){
        int totalB = 0;
        double tempB = 0;

        while(pearls > 0){
                pthread_mutex_lock(&mutex);
                if(pearls > 0){
                        tempB = pearls * .1;
                        tempB = ceil(tempB);
                        totalB = totalB + tempB;
                        pearls = pearls - tempB;
                        printf("Pirate B stole %1.1f pearls.\n", tempB);
                        printf("Pirate B's total: %d\n", totalB);
                        sleep(1);
                        pthread_cond_broadcast (&aPirate);
                        pthread_cond_broadcast (&cPirate);
                        pthread_cond_broadcast (&dPirate);
                        tempB = 0.0;
                }
                else{
                        printf("No more pearls!\n");
                        exit(0);
                }
                pthread_mutex_unlock(&mutex);
                pthread_cond_wait (&bPirate, &mutex);
        }
}

void *fiftPercentC(){
        int totalC = 0;
        double tempC = 0;

        while(pearls > 0){
                pthread_mutex_lock(&mutex);
                if(pearls > 0){
                        tempC = pearls * .15;
                        tempC = ceil(tempC);
                        totalC = totalC + tempC;
                        pearls = pearls - tempC;
                        printf("Pirate C stole %1.1f pearls.\n", tempC);
                        printf("Pirate C's total: %d\n", totalC);
                        sleep(1);
                        pthread_cond_broadcast (&bPirate);
                        pthread_cond_broadcast (&aPirate);
                        pthread_cond_broadcast (&dPirate);
                        tempC = 0.0;
                }
                else{
                        printf("No more pearls!\n");
                        exit(0);
                }
                pthread_mutex_unlock(&mutex);
                pthread_cond_wait (&cPirate, &mutex);
        }

}

void *fiftPercentD(){
        int totalD = 0;
        double tempD = 0;

        while(pearls > 0){
                pthread_mutex_lock(&mutex);
                if(pearls > 0){
                        tempD = pearls * .15;
                        tempD = ceil(tempD);
                        totalD = totalD + tempD;
                        pearls = pearls - tempD;
                        printf("Pirate D stole %1.1f pearls.\n", tempD);
                        printf("Pirate D's total: %d\n", totalD);
                        sleep(1);
                        pthread_cond_broadcast (&bPirate);
                        pthread_cond_broadcast (&cPirate);
                        pthread_cond_broadcast (&aPirate);
                        tempD = 0.0;
                }
                else{
                        printf("No more pearls!\n");
                        exit(0);
                }
                pthread_mutex_unlock(&mutex);
                pthread_cond_wait (&dPirate, &mutex);
        }

} 
```

这是它在运行时执行的一些示例输出：

```
Pirate A stole 100.0 pearls.
Pirate A's total: 100
Pirate B stole 90.0 pearls.
Pirate B's total: 90
Pirate C stole 122.0 pearls.
Pirate C's total: 122 
```

我唯一可以解释的想法是，当 CPU 调度程序有两个线程准备好背靠背运行时，程序卡住了。例如（在调度队列中）：A | 乙| C | C | D. 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:26:17.313

```
 while(pearls > 0){
     pthread_mutex_lock(&mutex);
     if(pearls > 0){
          <do some stuff>

     } else {
           print "all done";
     }                
     pthread_mutex_unlock(&mutex);
     pthread_cond_wait (&bPirate, &mutex);
 } 
```

因此，如果所有海盗都在 pthread_condition_wait 等待，那么当最后一个海盗偷走最后的珍珠时，您*可能会*发现珍珠 == 0 并退出循环。现在你永远不会打印你所有的完成条件。并且您将退出程序而不会打印任何内容。

这就是为什么您的程序停止并且不打印任何内容的原因。

编辑：（以上仍然正确，但不是您目前看到的问题）来自[http://linux.die.net/man/3/pthread_cond_wait](http://linux.die.net/man/3/pthread_cond_wait)：

> 它们应在调用线程锁定的互斥锁或未定义的行为结果的情况下调用
> 
> 这些函数原子地释放互斥锁
> 
> 成功返回后，互斥量应已被锁定并归调用线程所有

```
So what you want is:
pthread_mutex_lock(&mutex);
while (pearls > 0) {
    <do your thing>
    <signal other threads>
    pthread_cond_wait(&mutex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:21:01.860

你的程序有很多问题。

**1.- pthread_cond_wait 没有锁**：就像戴夫已经指出的那样，你应该用互斥锁来调用它。否则你有未定义的行为（这总是不好的）。

例子：

```
pthread_mutex_lock(&mutex);
while (!conditionMet) {
  //..
  pthread_cond_wait(&cond, &mutex);
}
pthread_mutex_unlock(&mutex); 
```

**2.- 访问不受互斥体保护的变量**：您正在访问`pearls`线程中的变量，而不用互斥体保护访问（in `while(pearls>0)`）。另一个线程可能正在写入它。尽管访问很可能是原子的，但不能保证。

**3.- 线程内的 exit(0)**。exit() 导致正常的程序终止发生。它猜测，这不是您在线程函数中想要的。只需使用`return`退出线程。

**4.- pthread_exit(0); 在主（）。** pthread_exit() 函数终止调用线程。在 main 结束时，您应该等待所有线程首先终止。为此使用（每个线程`pthread_join`都需要一个）。`pthread_t`然后正常返回退出程序。

在进一步搜索之前，您应该先解决所有这些问题。

# qml - QML-如何在 QML 中为 ListViews 使用多个数据模型

> ID：13303090
> 
> 赞同：1
> 
> 时间：2012-11-09T06:18:57.867
> 
> 标签：qml

我想在 2 个列表视图中使用 2 个模型，但第二个列表不像第一个列表那样填充。我使用的代码如下：

```
Q_DECL_EXPORT int main(int argc, char *argv[])
{
  QScopedPointer<QApplication> app(createApplication(argc, argv));
  MyModel myModel;
  myModel.addPrimaryData(ModelItem(1, "Apple"));
  myModel.addPrimaryData(ModelItem(2, "Orange"));
  myModel.addPrimaryData(ModelItem(3, "Banana"));

  MyModel myModel2;
  myModel2.addSecondaryData(ModelItem(1, "Apple2"));
  myModel2.addSecondaryData(ModelItem(2, "Orange2"));
  myModel2.addSecondaryData(ModelItem(3, "Banana2"));

  QDeclarativeView declView;
  QDeclarativeContext *declContext = declView.rootContext();
  declContext->setContextProperty("myModel", &myModel);
  declContext->setContextProperty("myModel2", &myModel2);

  declView.setSource(QUrl("qml/MyDemo/main.qml"));
  declView.show();

  return app->exec();
} 
```

如上所示，我创建了 2 个模型，即 myModel 和 myModel2，并在 QML 的 2 个 Listy 视图中使用。

ListView1 使用模型 myModel，ListView2 使用模型 myModel2。但 myModel2 数据未显示在列表中。

任何具体原因。请回复您的想法。

我使用的 QML 代码如下：

```
ListView {
   id:firstListView
   model: myModel
   delegate: Item{
   id: firstDelegate
   Text {
     text: name
     color: "white"
   }
 }
}

 ListView {
   id: secondListView
   model: myModel2
   delegate: Item{
   id: secondDelegate
   Text {
      text: name
      color: "white"
     }
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T20:49:56.507

由于您尚未向我们提供您的`MyModel`实施，因此我们可以提供的帮助很少。现在我只能建议检查以下内容：

*   确保第二个模型的角色名称实际上是“名称”。
*   确保第二个`ListView`不只是隐藏在第一个之下。
*   比较 和 之间的实现`addPrimaryData`，`addSecondaryData`以确保代码在两者中都有效。

`MyModel`如果您想要更具体的答案，您必须向我们展示您的工作方式。

# php - php：如何替换客户端-服务器通信中的无限while循环以实现相同的服务器服务

> ID：13303093
> 
> 赞同：2
> 
> 时间：2012-11-09T06:19:02.937
> 
> 标签：php, client-server, infinite-loop, server-push

我正在用 php 构建一个客户端服务器实时通信应用程序，我想在其中实现真正的服务器推送并进行优化。

我已经知道 Comet 技术下的其他技术，为此我使用 php 套接字服务器和套接字小程序客户端，到目前为止一切都很好。

问题在于服务器端无限，而用于侦听传入连接，它会降低我的应用程序的优化。

如何用其他东西替换客户端-服务器通信中的无限while循环以实现服务器推送功能？客户端 ping 服务器的那一刻，将与客户端建立连接以进行通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:21:39.937

如果您想在 PHP 上使用异步服务器，请尝试[PHPDaemon](https://github.com/kakserpom/phpdaemon)

# c# - 从另一个模型更新实体模型

> ID：13303095
> 
> 赞同：0
> 
> 时间：2012-11-09T06:19:08.760
> 
> 标签：c#, entity-framework, entity-framework-4

在我的代码中，我有几行代码，如下所示：

```
Insertions["sale"] = (modelEntities, entity) => modelEntities.AddToSale((Sale) entity); 
```

当数据库中没有这样的实体时，它工作正常。但是我想在实体已经在数据库中时更新它。它可以通过`Find`方法和字段分配来完成，但我想保留一个漂亮的代码并使用构造函数或`Insert-or-Update`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:27:24.323

我个人认为用 add/insert 方法委托构建字典是没有用的。这是很多重复的代码。上下文具有插入或更新任何实体对象的通用方法。您甚至可以创建一种方法，例如（基于`ObjectContext`）：

```
public static void Upsert<T>(this ObjectContext context, T entity, int key)
  where T : EntityObject
{
  if (entity != null)
  {
    ObjectSet<T> objectSet = context.CreateObjectSet<T>();
    if (key > 0)
    {
      if (entity.EntityState == EntityState.Detached)
      {
        objectSet.Attach(entity);
        context.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);
      }
    }
    else
    {
      objectSet.AddObject(entity);
    }
  }
} 
```

如果您愿意，您甚至可以`key`通过从 EF 模型中获取关键字段并对`entity`.

请注意，`Attached`此方法会忽略持久对象：假定它将由其已属于的上下文保存。

# python - 如何在 Python 中通过字符串访问类变量？

> ID：13303100
> 
> 赞同：25
> 
> 时间：2012-11-09T06:19:57.113
> 
> 标签：python, class, variables

代码是这样的：

```
class Test:
    a = 1
    def __init__(self):
        self.b=2 
```

当我创建一个实例时`Test`，我可以像这样访问它的实例变量`b`（使用字符串“b”）：

```
test = Test()
a_string = "b"
print test.__dict__[a_string] 
```

但它不适用于`a`不`self.__dict__`包含名为 的键`a`。`a`那么如果我只有一个字符串，我该如何访问`a`？

谢谢！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-09T06:22:13.090

要获取变量，您可以执行以下操作：

```
getattr(test, a_string) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-09T06:22:22.593

以这种方式使用[getattr](http://docs.python.org/2/library/functions.html?highlight=dir#getattr)来做你想做的事：

```
test = Test()
a_string = "b"
print getattr(test, a_string) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-09T06:31:24.870

尝试这个：

```
class Test:    
    a = 1    
    def __init__(self):  
         self.b=2   

test = Test()      
a_string = "b"   
print test.__dict__[a_string]   
print test.__class__.__dict__["a"] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-19T19:58:01.153

您可以使用：

`getattr(Test, a_string, default_value)`

使用第三个参数返回一些`default_value`以防万一在课堂`a_string`上找不到。`Test`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-29T14:47:58.903

Since the variable is a class variable one can use the below code:-

```
class Test:
    a = 1
    def __init__(self):
        self.b=2

print Test.__dict__["a"] 
```

# java - 如何创建模式以查找 *.ABS 序列？

> ID：13303102
> 
> 赞同：0
> 
> 时间：2012-11-09T06:20:15.357
> 
> 标签：java, regex

我想`Pattern`在 Java 中创建一个将为这些行返回 true 的代码：

> some_stuff.ABS
> 
> hellomynameis.ABS
> 
> any_string_or_number.ABS

我尝试`*.ABS`用作 Pattern 但它没有用..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:23:17.943

如果您只想找到以*结尾的* `ABS`每个字符串，那么请执行

```
if (line.endsWith(".ABS")) {
  // do your stuff
} 
```

或者，对于现实生活中的字符串：

```
if (line.trim().toUpperCase().endsWith(".ABS")) {
  // do your stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:22:33.867

首先，您需要匹配所有内容 until `.ABS`，因为您可以使用 a`dot(.)`出现 0 次或更多次（`*`量词）。然后要匹配`.ABS`，您将需要`\\.ABS`.

你可以使用这个： -

```
.*\\.ABS 
```

当然，如果你只想匹配以 结尾的字符串`.ABS`，那`String.endsWith`将是一个更好的选择。您在这里并不需要正则表达式。

# php - JSON 需要一个 8 字符数字的字符串，我如何用引号括起来

> ID：13303108
> 
> 赞同：0
> 
> 时间：2012-11-09T06:20:38.510
> 
> 标签：php, json

我有以下 json，由于下面的 json，它无效，我需要将其设为字符串才能在 json 上有效。关于在 php 中执行此操作的最佳方法的任何建议？

```
{
    29646191: [
        "https://www.facebook.com/RobertScoble/posts/480030845352725",
        "https://sphotos-a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg",
        "Today I tried... | Facebook",
        "Robert Scoble wrote: Today I tried something. I paid $49 and... Join Facebook to connect with Robert Scoble and others you may know.",
        null,
        [
            "//images3-focus-opensocial.googleusercontent.com/gadgets/proxy?url\u003dhttps://sphotos-a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg\u0026container\u003dfocus\u0026gadget\u003da\u0026rewriteMime\u003dimage/*\u0026refresh\u003d31536000\u0026resize_h\u003d150\u0026resize_w\u003d150\u0026no_expand\u003d1",
            150,
            150,
            null,
            null,
            null,
            null,
            null,
            [
                3,
                "https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url\u003dhttps://sphotos-a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg\u0026container\u003dfocus\u0026gadget\u003dhttps://plus.google.com\u0026rewriteMime\u003dimage/*\u0026resize_h\u003d800\u0026resize_w\u003d800\u0026no_expand\u003d1"
            ]
        ],
        "//s2.googleusercontent.com/s2/favicons?domain\u003dwww.facebook.com",
        [],
        null,
        []
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:26:34.520

让浏览器为您完成。

```
var x = {
    29646191: [
        "https://www.facebook.com/RobertScoble/posts/480030845352725",
        "https://sphotos-a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg",
        "Today I tried... | Facebook",
        "Robert Scoble wrote: Today I tried something. I paid $49 and... Join Facebook to connect with Robert Scoble and others you may know.",
        null,
        [
            "//images3-focus-opensocial.googleusercontent.com/gadgets/proxy?url\u003dhttps://sphotos-a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg\u0026container\u003dfocus\u0026gadget\u003da\u0026rewriteMime\u003dimage/*\u0026refresh\u003d31536000\u0026resize_h\u003d150\u0026resize_w\u003d150\u0026no_expand\u003d1",
            150,
            150,
            null,
            null,
            null,
            null,
            null,
            [
                3,
                "https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url\u003dhttps://sphotos-a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg\u0026container\u003dfocus\u0026gadget\u003dhttps://plus.google.com\u0026rewriteMime\u003dimage/*\u0026resize_h\u003d800\u0026resize_w\u003d800\u0026no_expand\u003d1"
            ]
        ],
        "//s2.googleusercontent.com/s2/favicons?domain\u003dwww.facebook.com",
        [],
        null,
        []
    ]
}

JSON.stringify(x); 
```

给

> "{"29646191":["https://www.facebook.com/RobertScoble/posts/480030845352725","https://sphotos-a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg" “今天我尝试了... | Facebook","Robert Scoble 写道：今天我尝试了一些东西。我支付了 49 美元，然后... 加入 Facebook，与 Robert Scoble 和您可能认识的其他人联系。",null,["//images3-focus-opensocial.googleusercontent.com/gadgets/proxy?url=https://sphotos- a.xx.fbcdn.net/hphotos-prn1/s480x480/546943_10151235934049655_1771118951_n.jpg&container=focus&gadget=a&rewriteMime=image/*&refresh=31536000&resize_h=150&resize_w=150&resize_w=150,null,150&no_expand,null=1,null,050&no_expand,null=1,null,null,150&no_expand,null ”https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url=https://sphotos-a.xx.fbcdn。

# asp.net-mvc-3 - 我们如何在 ASP.NET MVC3 Razor 中进行错误处理？

> ID：13303112
> 
> 赞同：1
> 
> 时间：2012-11-09T06:20:52.573
> 
> 标签：asp.net-mvc-3, exception-handling

我是 MVC3 的新手。我已经为一些 CRUD 操作做了一个 MCV3 应用程序。

现在我想在 MVC3 中做一些错误处理。我在[这里](http://colinmackay.co.uk/2011/05/02/custom-error-pages-and-error-handling-in-asp-net-mvc-3-2/)看到了一篇关于错误处理的文章。

1.  有人可以简要解释一下 MVC 中的各种错误处理方法吗？
2.  我们是否需要创建任何自定义类来处理错误处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:51:44.937

*PS我用我对这个**超级通用**问题的理解来回答这个问题。*

> **1 - 有人可以简要解释一下MVC中错误处理的各种方法吗？**

**对于全局错误处理**
您所要做的就是更改 web.config 页面中的 customErrors mode="On"
错误将通过 Error.cshtml 显示在共享文件夹中。

*确保 Error.cshtml Layout 不是 null*。
[它应该类似于：@{ Layout = "~/Views/Shared/_Layout.cshtml";
或删除 Layout=null 代码块] Error.cshtml
的示例标记：-

```
@{ Layout = "~/Views/Shared/_Layout.cshtml"; } 

@model System.Web.Mvc.HandleErrorInfo

<!DOCTYPE html>
<html>
<head>
    <title>Error</title>
</head>
<body>
    <h2>
        Sorry, an error occurred while processing your request.
    </h2>
    <p>Controller Name: @Model.ControllerName</p>
    <p>Action Name : @Model.ActionName</p>
    <p>Message: @Model.Exception.Message</p>
</body>
</html> 
```

**对于特定错误处理**
，将 HandleError 属性添加到控制器类中的特定操作。为该特定错误提供“视图”和“异常类型”。
NotImplemented 异常处理程序示例：

```
public class MyController: Controller
    {
        [HandleError(View = "NotImplErrorView", ExceptionType=typeof(NotImplementedException))]
        public ActionResult Index()
        {
            throw new NotImplementedException("This method is not implemented.");
            return View();
        }
} 
```

> **2 - 我们是否需要创建任何自定义类来处理错误处理？**

请参阅此[实现错误处理过滤器](http://msdn.microsoft.com/en-us/library/dd410203%28v=vs.90%29.aspx)

您还应该查看 Elmah Library 以进行错误记录。

# ruby-on-rails - nil:NilClass (NoMethodError) 的未定义方法“gsub”

> ID：13303113
> 
> 赞同：2
> 
> 时间：2012-11-09T06:20:53.767
> 
> 标签：ruby-on-rails, ruby

我有以下代码片段：

```
 line_sub = Regexp.new(/\s+|"|\[|\]/)
   tmp = Array.new
    # reading a file
   while line = file.gets
     ... 
     tmp[0],tmp[1] = line.to_s.scan(/^.*$/).to_s.split('=')
    #remove unwanted characters
     tmp.collect! do |val|
       val.gsub(line_sub, "")
     end
    ...
   end 
```

但是当我运行代码时，我得到了错误：

```
 undefined method `gsub' for nil:NilClass (NoMethodError) 
```

这里似乎有问题：

```
tmp.collect! do |val|
 val.gsub(line_sub, "")
end 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T06:31:11.310

尝试这种方式为您的解决方案

```
tmp.collect! do |val|
  if val.present?   # or unless val.nil?
    val.gsub(line_sub, "")
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:35:53.167

像这样添加一个条件

```
 tmp.collect! do |val|
        if !val.nil?
           val.gsub(line_sub, "")
        end
     end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:24:45.570

它意味着`tmp[0]`和/或是。您的`tmp[1]``nil`

```
line.to_s.scan(/^.*$/).to_s.split('=') 
```

没有按预期工作。最好检查那部分的结果。

顺便说一句，`line.to_s.scan(/^.*$/).to_s`没有意义。如果要处理文件的每一行，请执行

```
file.each_line do |l|
  ...
  l ...
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T06:28:54.780

您正在阅读的其中一行是空的，或者它不包含`'='`字符。

```
#Then, you get either
tmp[0], tmp[1] = ["only one element"]
# => tmp[1] = nil

#or
tmp[0], tmp[1] = []
# both are nil. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T06:47:48.593

如果该行中“=”的每一侧都应该始终有一个值，例如`"foo=bar"`和 not `"foo="`，请尝试以下操作：

```
line.match(/(.+)=(.+)/ do |match|
  # do whatever you need with the match
  # if there is no match this block won't be executed
  tmp = match[1..2]
  tmp.map! do |string|
    string.gsub(/[\s"\[\]/, "")
  end
end 
```

# php - 如何使用 php 表单在 google oauth 上交换令牌的授权码

> ID：13303114
> 
> 赞同：1
> 
> 时间：2012-11-09T06:21:35.013
> 
> 标签：php, curl, oauth-2.0, google-drive-api

几天后我得到了**授权代码**，但是当我尝试通过我的测试代码将其交换为访问/刷新令牌时，我总是不断收到**HTTP 400 错误。**我谷歌了几天，但仍然找不到修复它的方法。有谁能帮我解决一下，谢谢。

```
<html>
<body>

<?php
$redirect_url = "http://.../callback_google.php";
$client_id=".....";
$client_secret=".....";
$code=$_GET['code'];
$url = 'https://accounts.google.com/o/oauth2/token?';
$postField = array ('grant_type=authorization_code',
                    'client_id='.urlencode($client_id),
                    'client_secret='.urlencode($client_secret),
                    'redirect_uri='.urlencode($redirect_url),
                    'code='.urlencode($code) );
$postField = implode('&', $postField);

$options = array(CURLOPT_URL => $url,
                 CURLOPT_HEADER => 1,
                 CURLOPT_RETURNTRANSFER => 1,
                 CURLOPT_USERAGENT => '',
                 CURLOPT_FOLLOWLOCATION => 1,
                 CURLOPT_VERBOSE => 1,
                 CURLOPT_POST => true,
                 CURLOPT_POSTFIELDS => http_build_query($postField) );

$ch = curl_init();
curl_setopt_array($ch, $options);
$result = curl_exec($ch);
curl_close($ch);
print '<pre>' . print_r($result, true) . '</pre>';
?>

</body>
</html> 
```

但我收到错误消息

```
HTTP/1.1 200 Connection established
Via: 1.1 PROXY
Connection: Keep-Alive
Proxy-Connection: Keep-Alive

HTTP/1.1 400 Bad Request
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Date: Fri, 09 Nov 2012 06:04:44 GMT
Content-Type: application/json
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE
Transfer-Encoding: chunked 
```

JSON响应是

```
{
  "error" : "invalid_request"
} 
```

任何人都可以帮助我解决它，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T18:23:17.527

（评论中回答的问题。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中已解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 此问题已修复，它是由数组和`http_build_query`. 更改为： `$postField = 'grant_type=authorization_code&client_id='.urlencode($client_id). &client_secret='.urlencode($client_secret).'&redirect_uri='.urlencode($redirect_‌​url).'code='.urlencode($code);`，并删除函数调用`http_build_query`。

# c# - 在 C# 的文本框中使用占位符

> ID：13303117
> 
> 赞同：0
> 
> 时间：2012-11-09T06:21:52.000
> 
> 标签：c#, winforms

我想在文本框中显示占位符值。当用户尝试在文本框中输入时，它将自动从文本框中删除。任何人都可以解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:24:46.617

当文本框获得焦点和失去焦点时使用事件。当文本框获得焦点时，您会执行类似`MytextBox.Text = string.Emtpy`失去焦点时的操作，您检查它是否有内容，如果没有，则将其设置为默认值，例如： `string.IsNullOrWhiteSpace(MytextBox.Text) ? "Default" : MytextBox.Text`

# windows-phone-7 - PhoneGap Windows Phone 应用程序无法恢复

> ID：13303126
> 
> 赞同：0
> 
> 时间：2012-11-09T06:22:30.830
> 
> 标签：windows-phone-7, cordova

我的应用程序使用在 Windows phone 7 上运行的 phonegap 构建，它运行良好。但我发现它无法从设备睡眠模式恢复。我应该怎么做才能调试这个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:36:03.247

您应该熟悉[WP7 应用程序生命周期](http://www.scottlogic.co.uk/blog/colin/2011/10/a-windows-phone-7-1-mango-mvvm-tombstoning-example/) - PhoneGap 应用程序可以自动暂停/恢复，即您无需编写任何代码。但是，当它们被墓碑化时，您需要保存状态。有关详细信息，请参阅此博文：

[http://www.scottlogic.co.uk/blog/colin/2011/10/tombstoning-with-phonegap-for-windows-phone-7-and-knockoutjs/](http://www.scottlogic.co.uk/blog/colin/2011/10/tombstoning-with-phonegap-for-windows-phone-7-and-knockoutjs/)

# html - 如何在jsp中显示带有标签的文本

> ID：13303128
> 
> 赞同：5
> 
> 时间：2012-11-09T06:22:35.867
> 
> 标签：html, jsp, htmltextwriter

我想显示一个名为

```
"welcome<to>Jsp" 
```

在页面源代码中，我也看到了“welcomeJsp”

但在 HTML 中，它仅显示为“welcomeJsp”。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:26:00.123

你必须逃避这些字符..

```
welcome&lt;to&gt;Jsp 
```

我建议使用 Apache 的[StringEscapeUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)类（在 org.apache.commons.lang 中可用）函数`escapeHtml()`来转义 HTML。

`StringEscapeUtils.escapeHtml("welcome<to>Jsp")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:28:41.503

使用[JSTL](https://stackoverflow.com/tags/jstl/info) [`<c:out>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/out.html)标记或[`fn:escapeXml()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/escapeXml.fn.html)函数。

```
<c:out value="welcome<to>Jsp" /> 
```

或者

```
${fn:escapeXml('welcome<to>Jsp')} 
```

您甚至可以在模型值上使用它。

```
<c:out value="${bean.property}" /> 
```

或者

```
${fn:escapeXml(bean.property)} 
```

*顺便说一句，当涉及用户控制的输入时，应该始终*使用这两个，否则您将完全受到 XSS 攻击漏洞的影响。另请参阅[我们的 JSP wiki 页面](https://stackoverflow.com/tags/jsp/info)和[XSS 背后的一般概念是什么？](https://stackoverflow.com/questions/2233015/what-is-the-general-concept-behind-xss/2233110#2233110)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:25:35.117

```
"welcome&lt;to&gt;Jsp"

&gt; (greater than) - (>)
&lt; (less than)    - (<) 
```

这些字符需要以这种方式编码才能真正显示出来。

# mongodb - 消息系统的 MongoDb 模式设计

> ID：13303139
> 
> 赞同：1
> 
> 时间：2012-11-09T06:23:53.260
> 
> 标签：mongodb, database, nosql

我正在做一个项目，我打算让大量用户将他们的消息存储在我的数据库中。这些包含文本和二进制数据（想想电子邮件）的消息将与单个用户具有多对一的关系。由于 mongo db 的单个文档的文档大小限制为 16mb，我想我需要通过链接来关联它们。

这将需要两个单独的集合，这意味着更多的往返和更差的性能。有没有我没有想到的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:30:34.060

嗯，真的没有太多选择。链接或嵌入是标准选择。但是，在某些情况下，实施混合方法可能是有益的。我称之为“批次”。

该方法的本质是：您将许多消息粘贴到单个文档中，就像在嵌入中一样。当该文档即将溢出时，您开始写入第二个文档（并有第一个文档链接到它）。

这样一来，与单个链接文档相比，您可以获得更好的批量读取性能，但您也无法高效地查询它们（我想您希望从包中查询多个文档，因为这些是消息）。

评估您的查询模式并明智地选择。

# amazon-ec2 - Amazon EC2 服务器国际？（亚洲和美国）

> ID：13303144
> 
> 赞同：0
> 
> 时间：2012-11-09T06:24:37.240
> 
> 标签：amazon-ec2, webserver, amazon

我现在正在使用 AMAZON ec2 的服务器。我在美国东部地区，所以来自亚洲的用户发现我的网站非常慢。

我该如何处理？我可以在 EC2 上设置多区域服务器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:13:29.347

当然，EC2[在新加坡也有一个区域](http://aws.amazon.com/de/about-aws/whats-new/2010/04/29/announcing-asia-pacific-singapore-region/)。您还可以使用基于[Amazon Route53 延迟的路由](http://aws.typepad.com/aws/2012/03/latency-based-multi-region-routing-now-available-for-aws.html)将您的用户定向到离您最近的服务器 - 然后来自亚洲的用户将使用新加坡服务器。

但是，您的应用程序将不得不处理代码部署、保持同步、使用相同的数据库或同步不同的数据库等。由于这主要取决于您的应用程序的类型，因此没有关于如何处理此问题的一般规则。我建议在设置服务器之前先考虑一下。

# javascript - 谷歌应用脚 本功能最佳实践

> ID：13303146
> 
> 赞同：0
> 
> 时间：2012-11-09T06:24:44.930
> 
> 标签：javascript, google-apps-script

我正在尝试自学 Google Apps SCript 和 javascript，如果是一个愚蠢的问题，请原谅。我基本上对学习基本工作流程的业务自动化等感兴趣。批准流程/邮件合并等。我已经在 GA 的开发人员页面和其他 youtube 中看到了演示如何执行此类脚本的示例。我在创建包含邮件合并、文档创建的工作流方面取得了一些成功。

我很好奇的是开发这些类型的工作流和使用函数的正确或最佳实践。上面的工作流程是一个使用 doGet() 生成 HTML 页面的大型函数。

打破大型函数会更好吗，onFormSubmit，创建模板，从论坛提交的电子表格中读取数据，写入模板替换％keys％，创建文档并附加到电子邮件，删除文档并发送电子邮件，在多个较小的功能。每个动作一个，即创建一个模板或发送电子邮件等。然后让函数通过传递参数相互调用？

对于这样的工作流程，什么被认为是适当或最佳实践/方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:25:21.960

我想我通常会和你走同样的路。我开始尝试在一个大脚本中自动化所有内容，但后来发现了库[https://developers.google.com/apps-script/guide_libraries](https://developers.google.com/apps-script/guide_libraries)。所以现在我有一个 MyUtilities 库，其中包含一堆迷你函数，这些函数通常会一遍又一遍地运行，并在需要时从几个主要函数中调用它们。

我不知道这本身是否是最佳实践，但它使主要功能对我来说更精简、更容易，而且我可以在任何主要功能中使用 MyUtilities。我有一些事情，比如根据列名搜索列号，所以这些函数不依赖于特定的行号，因为你知道它们可以随着工作流程的变化而改变——我可以通过传递参数从任何主函数调用它. 为我工作。

# truthtable - 准真值片功能

> ID：13303150
> 
> 赞同：0
> 
> 时间：2012-11-09T06:25:04.730
> 
> 标签：truthtable

我试图在给定行、列和每个列变量的数字大小的情况下获取表的值。

例如：

```
getValue(row = 5, column = 1, column_variable_sizes = [3,2]) 
```

会回来

```
1 
```

这是函数“生成”以获取返回值的表。它实际上不必生成整个表（仅返回值），并且该表不是由数据结构表示的。

```
 column 
row |  0   1
---------------
0   |  0   0
1   |  0   1
2   |  1   0
3   |  1   1
4   |  2   0
5   |  2   1* 
```

为了清晰起见，返回的值旁边有一个 *。

关于如何编写 getValue 函数的任何想法？

谢谢

**编辑**：调用的另一个例子`getValue()`

```
getValue(row = 7, column = 2, column_variable_sizes = [3,2,3,2]) 
```

会回来

```
0

       column 
row |  0   1   2   3
--------------------
0   |   0   0   0   0
1   |   0   0   0   1
2   |   0   0   1   0
3   |   0   0   1   1
4   |   0   0   2   0
5   |   0   0   2   1
6   |   0   1   0   0
7   |   0   1   0*  1
8   |   0   1   1   0
9   |   0   1   1   1
10  |   0   1   2   0
11  |   0   1   2   1
... |  ... ... ... ... 
```

同样，该表本身并不存在。该函数仅生成返回的值。

`column_variable_sizes`指每个列变量的域的基数。

例如 [3,2,3,2] 表示：

*   第 0 列中的变量可以有 3 个值 (0, 1, 2)
*   第 1 列中的变量可以有 2 个值 (0 ,1)
*   第 2 列中的变量可以有 3 个值 (0, 1, 2)
*   第 3 列中的变量可以有 2 个值 (0, 1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:03:37.077

以下 Python 脚本应创建相同的“表”

```
def getCell(row, column, column_variable_sizes):
    basecap = 1;
    if column + 1 < len(column_variable_sizes):     
        for i in range(column + 1, len(column_variable_sizes)):
            basecap *= column_variable_sizes[i];

    columncap = column_variable_sizes[column];

    return (row / (basecap)) % columncap

column_sizes = [3, 2, 3, 2]

for y in range(0, 12):
    column = "";
    for x in range(0, 4):
        column += str(getCell(y, x, column_sizes)) + " "

print column 
```

# jquery - 使用 jquery 在我的浏览器中获取全屏模式

> ID：13303151
> 
> 赞同：31
> 
> 时间：2012-11-09T06:25:16.897
> 
> 标签：jquery

如何仅使用 Javascript/JQuery 代码进入全屏模式？目标是像在浏览器中按 F11 一样进入全屏模式，然后以编程方式。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-09T06:48:36.117

您可以使用没有 jQuery 的 vanilla JavaScript 激活全屏模式。

```
<!DOCTYPE html>

<html>

<head>
    <title>Full Screen Test</title>
</head>

<body id="body">
    <h1>test</h1>

    <script>
    var elem = document.getElementById("body");

    elem.onclick = function() {
        req = elem.requestFullScreen || elem.webkitRequestFullScreen || elem.mozRequestFullScreen;
        req.call(elem);
    }
    </script>
</body>

</html> 
```

需要注意的重要一点是，您只能在用户执行操作（例如单击）时请求全屏模式。^([如果没有用户操作[1]](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode#When_a_fullscreen_request_fails))（例如在页面加载时），您将无法请求全屏模式。

这是切换全屏模式的跨浏览器功能（[从 MDN 获得](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode#Toggling_fullscreen_mode)）：

```
function toggleFullScreen() {
  if (!document.fullscreenElement &&    // alternative standard method
      !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
    } else if (document.documentElement.msRequestFullscreen) {
      document.documentElement.msRequestFullscreen();
    } else if (document.documentElement.mozRequestFullScreen) {
      document.documentElement.mozRequestFullScreen();
    } else if (document.documentElement.webkitRequestFullscreen) {
      document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
    }
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    }
  }
} 
```

有关更多信息，请查看[全屏 API 上的 MDN 页面](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T06:40:46.447

这是一个使浏览器全屏的工作演示

[http://johndyer.name/lab/fullscreenapi/](http://johndyer.name/lab/fullscreenapi/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T06:33:33.613

您可以为此目的使用免费提供的 jquery 插件，查看这些 - [jquery full screen](http://jquerybyexample.blogspot.com/2012/08/5-free-jquery-fullscreen-plugins.html) , [Jquery full screen](http://www.ailis.de/~k/archives/66-jQuery-Fullscreen-Plugin.html) , [jquery full screen](http://www.buildinternet.com/project/supersized/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-01T11:18:20.610

如果您需要 JQuery 来轻松选择元素，那么您可以这样做：

```
var viewer = $("#parentid .classname .childelement")[0];
var rFS = viewer.mozRequestFullScreen || viewer.webkitRequestFullscreen || viewer.requestFullscreen;
    rFS.call(viewer); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-15T14:45:13.497

如果您需要支持 IE11 (IE8-10) 之前的 IE 版本的插件，请查看[jQuery.fullscreen](https://github.com/private-face/jquery.fullscreen)。[IE 直到IE11](http://caniuse.com/#search=fullscreen)才原生支持此功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-30T12:06:45.553

请尝试以下代码

```
var el = document.documentElement,
  rfs = el.requestFullscreen
    || el.webkitRequestFullScreen
    || el.mozRequestFullScreen
    || el.msRequestFullscreen 
;

rfs.call(el); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-14T07:17:20.773

尝试使用 window.resizeTo(x,y) 方法。

```
var  w = window.open('','', 'width=100,height=100');

w.resizeTo(w.screen.availHeight, w.screen.availWidth);

 w.focus(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-25T17:24:20.233

这是一个老问题，但也许有人可能需要这个。我正在寻找一种通过 jQuery 为浏览器获取全屏模式的解决方案，我找到了这个解决方案。我强烈推荐 Sindre Sorhus 的 screenfull.js 插件。在这里你可以得到文件。

[https://github.com/sindresorhus/screenfull.js](https://github.com/sindresorhus/screenfull.js)

页面中还提供了操作方法和演示。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-07-30T07:01:13.417

如果有按钮或其他任何东西，我们可以使用这个脚本：

```
<script language="JavaScript">
function fullScreen() {
    var el = document.documentElement
        , rfs = // for newer Webkit and Firefox
               el.requestFullScreen
            || el.webkitRequestFullScreen
            || el.mozRequestFullScreen
            || el.msRequestFullScreen
    ;
    if (typeof rfs != "undefined" && rfs) {
        rfs.call(el);
    } else if (typeof window.ActiveXObject != "undefined") {
        // for Internet Explorer
        var wscript = new ActiveXObject("WScript.Shell");
        if (wscript != null) {
            wscript.SendKeys("{F11}");
        }
    }

}
// End --> 
```

用一个按钮。一切都很简单，`<a href="javascript:void(0);" onclick="fullScreen();"><BUTTON></a>`
但是我如何在页面加载时加载该脚本。这意味着网络表单将在页面加载时全屏显示，无需点击任何内容。

# objective-c - 如何使 UINavigation Bar 中的文本垂直居中

> ID：13303159
> 
> 赞同：0
> 
> 时间：2012-11-09T06:25:49.127
> 
> 标签：objective-c, uitabbar, xcode4.5

我这样做：

```
[[UINavigationBar appearance] setTitleTextAttributes:@{UITextAttributeTextColor: navTextColor,UITextAttributeTextShadowColor: navTextColor,UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0, 0)],UITextAttributeFont: [UIFont fontWithName:@"HelveticaNeue-Bold" size:12],UITextAttributeFont: [UIFont fontWithName:@"HelveticaNeue-Bold" size:12]}]; 
```

结果是文本更小。但是，它发布得太高了。

![在此处输入图像描述](../Images/3201daf412a143f33f31c6411bc71552.png)

我可以使用

```
[[UINavigationBar appearance] setTitleVerticalPositionAdjustment:5 forBarMetrics:UIBarMetricsDefault]; 
```

但有时我想使用 UIText 而不仅仅是 titleView 上的图片，这也会被推下。

我认为这样的文字会是一个非常奇怪的设计。那么有什么问题以及如何使 UINavigationBar 中的标题文本像水平一样垂直居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:42:12.607

一种解决方案是检查[此答案](https://stackoverflow.com/a/9927708/1106035)。

其他解决方案是设置`frame`您的`label view`. 检查[这个答案](https://stackoverflow.com/a/9916668/1106035)

# http-headers - 返回 1-99（缺少 HTTP 标头）的 G-WAN servlet 非常慢

> ID：13303160
> 
> 赞同：0
> 
> 时间：2012-11-09T06:25:49.313
> 
> 标签：http-headers, browser, g-wan

我运行了**gwan_1** (v3.3.28)，然后访问了*http://.../?persistence.c*页面。它反应很快。

但是当我改变“ `return 200`;” 到`return 9;`代码中的“”，浏览器响应缓慢，大约4秒后。

文件中指出：

```
要防止 HTTP 标头自动完成，只需让您的 servlet 返回一个无效的
HTTP 状态码在 1-99 范围内（含）。
```

它工作但非常缓慢。

对此有任何想法吗？这是一个错误还是我做错了什么？
我尝试返回 1、9 和 99。它们都给出相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:01:24.410

最后我得到了它。
这不是由 gwan 引起的。
这是浏览器的行为。
我使用 xbuf_frurl() 加载 persistence.c，响应时间约为 0.35 毫秒。(CPU E2180)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:13:52.010

Internet 浏览器正在等待服务器回复。这是**客户端超时**。

由于在这种特殊情况下，服务器没有给出*回复长度*（`HTTP headers`因为**1-99 servlet 返回值**的意思是*“如果缺少 HTTP 头，则不注入”*），客户端必须等到它估计所有应该已经传输（此时它显示结果）。

当您使用 JSON 和 AJAX (Javascript) 与 Internet 浏览器交谈时，您可以发送任何*不带 HTTP 标头*的回复，因为这样会以不同的方式解释格式（JSON VS HTTP）。

G-WAN comet.c 演示使用纯文本消息传递与浏览器的交换，因为客户端的 Javascript 代码读取服务器回复的时间（使用为此特定应用程序制作的格式）。

# java - 用于检查 Java 代码中未使用的类/函数的任何工具

> ID：13303165
> 
> 赞同：0
> 
> 时间：2012-11-09T06:26:14.320
> 
> 标签：java, testing

我正在检查一些android程序，我想知道这些java文件中的任何类/函数都是无用的（例如，永远不会被调用，使用过）

有什么工具可以帮忙吗？我正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:31:58.267

让我们看看以下链接可能对您有帮助：

1.  [使用 PMD 和 Eclipse 提高代码质量](http://www.eclipsezone.com/articles/pmd/)

对于 Java 工具，请参阅[Java](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#Java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:29:09.663

您可以使用[ProGuard](http://proguard.sourceforge.net/)。它会生成一份报告，告诉你这类事情。（他们主页“ProGuard 的使用”中的第三个项目符号是：“列出死代码，以便可以从源代码中删除它。”）我的猜测是几乎所有 Java 的收缩器/优化器工具都具有类似的功能。

# c - struct typedef 中的声明规则

> ID：13303168
> 
> 赞同：6
> 
> 时间：2012-11-09T06:26:24.337
> 
> 标签：c, struct, typedef, declaration

我正在阅读“C 编程语言”，遇到了关于**struct**的 typedef 的问题。代码是这样的：

```
typedef struct tnode *Treeptr;
typedef struct tnode { /* the tree node: */
    char *word; /* points to the text */
    int count; /* number of occurrences */
    struct tnode *left; /* left child */
    struct tnode *right; /* right child */
} Treenode; 
```

到我们写的时候

```
typedef struct tnode *Treeptr; 
```

tnode 还没有声明，但是我们没有得到任何编译错误，但是当我们将上面的语句更改为：

```
typedef Treenode *Treeptr; 
```

我们得到编译错误：

```
error: parse error before '*' token
warning: data definition has no type or storage class 
```

造成差异的原因是什么？“struct tnode”和“Treenode”不一样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T06:41:47.437

在定义类型之前，您不能使用它。

使用`typedef struct tnode { ... } Treenode;`声明，在`Treenode`到达分号之前不会定义类型。

情况`typedef struct tnode *Treeptr;`不同。这告诉编译器'有一个名为 的结构类型`struct tnode`，并且该类型`Treeptr`是指向 a 的指针的别名`struct tnode`。在该声明的末尾，`struct tnode`是一个不完整的类型。您可以创建指向不完整类型的指针，但不能创建不完整类型的变量（因此您可以定义`Treeptr ptr1;`or`struct tnode *ptr2;`并且它们是相同类型，但您不能定义`struct tnode node;`）。

的主体`struct tnode`可以写成：

```
typedef struct tnode
{
    char    *word;
    int      count;
    Treeptr  left;
    Treeptr  right;
} Treenode; 
```

因为是定义结构之前`Treeptr`类型的已知别名。在到达最后一个分号（粗略地说）之前，`struct tnode *`您不能使用`Treenode *left;`因为不是已知的别名。`Treenode`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:41:08.240

当您声明时`TreePtr`，您没有实现该结构。这被称为“*前向声明*”。类似于：“我们在这里使用它，但稍后我会更好地解释它”。该实现必须稍后出现，仅出现一次，这就是您在第二个中找到的内容`typedef`。

并且`TreePtr`与结构不同，因为`TreePtr`实际上将是一种新类型，包括作为指针的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:40:46.887

一行`typedef struct tnode *Treeptr;`具有“tnode”结构的隐式前向声明。它类似于：

```
typedef struct tnode Treenode;
typedef Treenode *Treeptr;

struct tnode { /* the tree node: */
    char *word; /* points to the text */
    int count; /* number of occurrences */
    struct tnode *left; /* left child */
    struct tnode *right; /* right child */
}; 
```

# android - Android 访问 XML 响应

> ID：13303172
> 
> 赞同：-4
> 
> 时间：2012-11-09T06:26:42.793
> 
> 标签：android, xml-parsing, android-xml

我写了一个android客户端，需要访问Web服务器。然后返回 XML，android 客户端读取 XML 数据。访问网址如： http: [//xxxx.com/Mobile/MobileAjax.aspx ?pAjaxType=Login&pUserID=adminsys&pPwd=123456](http://xxxx.com/Mobile/MobileAjax.aspx?pAjaxType=Login&pUserID=adminsys&pPwd=123456)

访问 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<LoginInfo>
<Islogin>true</Islogin>
<UserID>AdminSys</UserID>
<UserName>admin</UserName>
<OrgID>100</OrgID>
<OrgName>organizer</OrgName>
</LoginInfo> 
```

如何编写获取 XML 和分析 XML 信息的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:38:06.067

[在这里](https://stackoverflow.com/questions/8366742/xml-parser-android)和[这里](https://stackoverflow.com/questions/3492034/android-xml-parsing)已经问过同样的问题

XML 有三种主要的解析类型。

1.  拉解析器
2.  萨克斯分析器
3.  DOM解析器

在这里您可以找到[Pull 解析器的示例](http://www.vogella.com/articles/AndroidXML/article.html#xmlpullparser)

在这里您可以找到[Sax 解析器的示例](http://matrix-examplecode.blogspot.in/2012/03/android-sax-parser-example.html)

在这里您可以找到[所有三个的示例](http://www.ibm.com/developerworks/opensource/library/x-android/)

# javascript - 在引导程序中生成 HTML

> ID：13303178
> 
> 赞同：0
> 
> 时间：2012-11-09T06:27:32.383
> 
> 标签：javascript, html, twitter-bootstrap, include

我已经下载了一个网站的引导模板，我正在尝试了解它是如何工作的。到目前为止看起来不错，但我下载的模板在 5 个主要页面中具有大部分相同的内容，并且它不是从一个地方生成或引用的。由于所有网页的导航栏都是相同的，我如何在没有服务器端的情况下引用所有页面以包含相同的标题（或其他 html）？这似乎是一个简单的 HTML 或 JS 解决方案，只是似乎找不到我要找的东西....

假设这是导航栏（另存为`/component/navbar.html`¿maybe？）：

```
<div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="index.html">
                    <b>Your</b>Site
                </a>
                <div class="nav-collapse fr">
                    <ul class="nav">
                        <li><a href="index.html">Home</a></li>
                        <li class="active"><a href="work.html">Our work</a></li>
                        <li><a href="about.html">About us</a></li>
                        <!-- <li><a href="plans.html">Pricing</a></li> -->
                        <li><a href="explore.html">Explore</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="alt.html">Alt</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><button class="btn btn-primary">Sign In</button></li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div><!-- end .container -->
        </div><!-- end .navbar-inner -->
    </div><!-- end .navbar --> 
```

如何将页面链接到要包含的这段 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:32:18.553

你可以用 jQuery 来做，它总是出现在 boostrap 中。

将内容移植`<div class="navbar">`到您建议的文件中`/component/navbar.html`- 所以 HTML 看起来像这样

```
<div class="navbar" id="navbar"> 
</div> 
```

在脚本中，通过 AJAX将内容加载`navbar.html`到`#navbar`

```
$(document).ready(function(){
    $.ajax({
        url : 'component/navbar.html',
        success(html) {
            $("#navbar").html(html);
        }
    });
}); 
```

**编辑**：或者只是`$("#navbar").load('component/navbar.html');` 这可能是您正在寻找的解决方案，它的行为更像是一种可以放在标题中的“包含”。

# web-services - 使用 PowerShell 代码访问 _vti_bin/lists.asmx

> ID：13303180
> 
> 赞同：1
> 
> 时间：2012-11-09T06:28:11.087
> 
> 标签：web-services, sharepoint, powershell, powershell-2.0

有没有人有任何关于如何使用 PowerShell 使用 Web 代理服务来操作 SharePoint 列表的示例代码，我看到支持以下操作。

如果有人可以为以下每个项目提供示例代码，那就太好了。

```
o   AddAttachment

o   AddDiscussionBoardItem

o   AddList

o   AddListFromFeature

o   ApplyContentTypeToList

o   CheckInFile

o   CheckOutFile

o   CreateContentType

o   DeleteAttachment

o   DeleteContentType

o   DeleteContentTypeXmlDocument

o   DeleteList

o   GetAttachmentCollection

o   GetList

o   GetListAndView

o   GetListCollection

o   GetListContentType

o   GetListContentTypes

o   GetListItemChanges

o   GetListItemChangesSinceToken

o   GetListItems

o   GetVersionCollection

o   UndoCheckOut

o   UpdateContentType

o   UpdateContentTypeXmlDocument

o   UpdateContentTypesXmlDocument

o   UpdateList

o   UpdateListItems 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:31:35.253

使用这篇文章：http: [//blogs.msdn.com/b/powershell/archive/2010/06/24/using-new-webserviceproxy-to-get-modify-and-add-items-to-a-list- in-sharepoint-2007.aspx](http://blogs.msdn.com/b/powershell/archive/2010/06/24/using-new-webserviceproxy-to-get-modify-and-add-items-to-a-list-in-sharepoint-2007.aspx)

希望能帮助到你。

# postgresql - Postgres案例查询问题

> ID：13303183
> 
> 赞同：1
> 
> 时间：2012-11-09T06:28:35.423
> 
> 标签：postgresql, case

我正在尝试编写一个带有 CASE 语句的 postgres 查询。查询如下：

```
SELECT "State" AS x, count("Age Group") AS y from test.smp_state_survey where "State" IN 
(CASE 
        WHEN 'State' = 'State' THEN 'State 1','State 2','State 3'
        WHEN 'State' = 'District' THEN 'State 1'
    END) 
  group by x ORDER BY x,y 
```

上面的查询显示语法错误`'State' = 'State'`

然而，当我执行以下查询时，我得到了适当的结果：

```
SELECT "State" AS x, count("Age Group") AS y from test.smp_state_survey where "State" IN 
(CASE 
        WHEN 'State' = 'State' THEN 'State 1'
        WHEN 'State' = 'District' THEN 'State 1'
    END) 
  group by x ORDER BY x,y 
```

请让我知道我做错了什么。

**编辑：**

THEN 子句之后的值是动态的，它可能包含 1 个或多个值（来自多选框）。我希望查询被执行为

```
SELECT "State" AS x, count("Age Group") AS y from test.smp_state_survey where "State" IN 
('State 1','State 2','State 3') 
  group by x ORDER BY x,y 
```

运行得很好，但问题是 CASE 没有返回我所需的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T06:55:59.430

您的查询应该是这样的，我希望这对您有用

```
SELECT  "State" AS x, count("Age Group") AS y from test.smp_state_survey where  
CASE  
        WHEN 'State' = 'State'  THEN  "State" IN  ('State 1' ,'State 3')
        WHEN 'State' = 'District' THEN "State" IN  ('District 1')
    END
  group by x ORDER BY x,y 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T11:03:34.577

'State' = 'State' 是重言式。您的意思是“State” = 'State'，即“State”列的值等于字符串“State”吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:56:44.023

由于您尝试使用，因此可以利用接受集合*或数组*`IN`的事实：`IN`

 *```
SELECT "State" AS x, count("Age Group") AS y
FROM test.smp_state_survey
WHERE "State" IN (CASE
  WHEN 'State' = 'State' THEN ARRAY['State 1','State 2','State 3']
  WHEN 'State' = 'District' THEN ARRAY['State 1']
END) 
GROUP BY x
ORDER BY x,y 
```

或使用@user1327246 的改写，将`IN`测试推送到`CASE`语句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:32:33.993

一个案例不能有多个值。

这就是问题

```
WHEN 'State' = 'State' THEN 'State 1','State 2','State 3' 
```*

# html - 在选择标记的值上禁用 html 按钮

> ID：13303192
> 
> 赞同：-2
> 
> 时间：2012-11-09T06:29:47.853
> 
> 标签：html, jquery

我有一个包含 4 个选项和一个按钮的选择标签。我希望如果未从选择标签中选择任何选项，则应禁用该按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:40:58.330

你需要为它使用一些 Jquery 的东西。只需遵循代码即可。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
$(function(){
$('#myDrpDown').change(function(){
if($(this).val() == "")
{
   $('#btn').attr('disabled','disabled');
}
else
$('#btn').removeAttr('disabled');
});

});
</script>
<select id="myDrpDown">
<option value = "">Select One option</option>
<option value = "1">Option1</option>
<option value = "2">Option2</option>
<option value = "3">Option3</option>
</select>
<input type="submit" id="btn" disabled="disabled"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T06:32:28.930

使用 javascript onChange 函数禁用按钮

```
<select id="select">
  <option value="1">One</option>
  <option value="2">Two</option>
  <option value="3">Three</option>
  <option value="4">Four</option>
</select>
<input type="button" id="button" value="Button" /> 
```

Javascript：

```
$(document).ready(function(){
    $('#select').change(function(){
        $('#button').attr("disabled", "disabled");
    });
}); 
```

# android - RatingBar - 切换或取消评级

> ID：13303193
> 
> 赞同：4
> 
> 时间：2012-11-09T06:29:48.587
> 
> 标签：android, android-layout, ratingbar

**背景：** 我们使用的是标准的 Android RatingBar 5 星。我们允许用户使用此 RatingBar 从 1 到 5 进行评分。我们显示的默认值为零，即未评分。

**问题：** 用户在点击评分栏一次后，目前无法取消评分或将评分设置回零。他们只能将其设为最小值，即 1。即使在代码中也无法做到这一点，因为如果您多次单击同一评级，则不会调用 onRatingChange 事件。

关于如何克服这个问题的任何想法，是否可能？在这种情况下，使用 RatingBar 创建一个新的子类会有所帮助吗？

提前致谢。

更新：该问题没有任何代码，因为它与代码问题无关。这是关于 RatingBar 的功能和限制的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T06:56:53.377

要取消对 Android`RatingBar`的评级，用户必须滑动到`RatingBar`. 只需单击最后一颗星不会取消评分。

# vb.net - 如何在 vb.net 中求平均值

> ID：13303194
> 
> 赞同：1
> 
> 时间：2012-11-09T06:29:49.150
> 
> 标签：vb.net

嗨，我正在尝试在 vb.net 中创建一个程序来查找数字的平均值，仅使用一个变量作为输入框的值，第二个用于计数的数字应该是负数，但我无法得到准确的答案，这里是代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim num, count As Integer
    num = InputBox("Please enter number") 'for first entry
    While num > 0    ' here we have to check it that the num is not negative then to start
        num = InputBox("Please enter number")
        num += num
        count += 1             'this will calculate how many times number added    
    End While
    MsgBox("Average is " & num / count)

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:44:56.650

使用此代码...我仍然需要临时变量，因为在退出循环之前，该值不应该在

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim num, count As Integer
    count = 0
    num = 0
    While num >= 0    ' here we have to check it that the num is not negative then to start
        Dim temp As Integer
        temp = InputBox("Please enter number")
        If temp < 0 Then
            Exit While
        End If
        count += 1             'this will calculate how many times number added 
        num += temp
    End While
    MsgBox("Average is " & (num / count))
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:45:20.597

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)        Handles Button1.Click
Dim num, count, avg As Integer
num = InputBox("Please enter number") 'for first entry
While num > 0    ' here we have to check it that the num is not negative then to start
    avg += num
    count += 1             'this will calculate how many times number added    
    num = InputBox("Please enter number")
End While
    MsgBox("Average is " & avg / count)
End Sub 
```

# android - 什么是 android-ndk 中的 DNS 解析库

> ID：13303198
> 
> 赞同：2
> 
> 时间：2012-11-09T06:30:57.417
> 
> 标签：android, android-ndk

Android-NDK 中是否有任何解析器库可以进行 NAPTR、SVR 和 A 或 (AAAA) 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:31:05.020

我认为 libcurl 会满足您的需求，请务必检查一下。您可以在此处找到在 ndk 中使用它的说明：http: [//www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_compile_libcurl](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_compile_libcurl)和此处：[http ://thesoftwarerogue.blogspot.in/2010/05/porting -of-libcurl-to-android-os-using.html](http://thesoftwarerogue.blogspot.in/2010/05/porting-of-libcurl-to-android-os-using.html)

# php - 将字符串的一部分移动到字符串的另一部分

> ID：13303203
> 
> 赞同：1
> 
> 时间：2012-11-09T06:31:17.990
> 
> 标签：php

我有一个非常简单的文本框给用户。

```
<textarea name="text">ENTER YOUR TEXT, DUDE!</textarea> 
```

有时，用户可以输入如下内容：

```
blablablatext blablabla $ 10 blablabla blablablatext 
```

这很好，但我想做的是采用美元符号并自动将其放在数字之后（反之亦然）：

```
blablablatext blablabla 10 $ blablabla blablablatext 
```

基本上，我想做的是：

1.  检测是否有货币符号
2.  检测数字是否出现在符号之后
3.  检测，例如，一个字母（或什么都没有）出现在数字之后
4.  取货币符号并将其放在数字和字母之间（如果之后没有任何内容，则放在数字之后）

最好的方法是什么？这样的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:11:00.320

您可能可以将所有这些总结为一个正则表达式：

```
echo preg_replace('/\$\s*(\d+)(?=\s*[^$])/', '$1\$', $text); 
```

这只是一个简单的即兴示例，匹配*一个 $ 可能后跟一些空格，然后是一个数字，可能后跟一些空格而不是另一个 $*，并将其替换为*[number] $*。

我建议你[学习一些正则表达式](http://regular-expressions.info)。

# javascript - 在 IE 浏览器中未触发鼠标按下事件

> ID：13303207
> 
> 赞同：0
> 
> 时间：2012-11-09T06:31:26.583
> 
> 标签：javascript, jquery, internet-explorer, browser

我正在尝试使用 mousedown 事件创建一个锚点。

**我的代码**

```
for (i = 0; i < userDetails.length; i++) {
                    var userProfileURL = "http://www.xyz.com/KLMS/UserProfile.aspx?userid=" + userDetails[i][1];
                    userTable += "<li><a href=\"" + userProfileURL + "\" onmousedown=\"StoreClickedURL(" + userId + ",'" + encodeURI(userInput) + "','" + encodeURI(userDetails[i][3]) + "')\" title='" + userDetails[i][2] + "'>" + userDetails[i][2] + "</a></li>";
                } 
```

通过使用 FireBug，我检查了它显示的锚点，如下所示

```
<a href="http://www.xyz.com/PublicProfile.aspx?id=1088" onmousedown="StoreClickedURL(1,'physics','http://www.xyz.com/PublicProfile.aspx?id=1088')">http://www.xyz.com/PublicProfile.aspx?id=1088</a> 
```

它适用于除 IE 之外的所有浏览器。在 IE 中，它也显示了我上面提到的相同样式的锚。

但不会转到 mousedown 事件中声明的函数。

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:56:20.783

试试这个

```
< a href="javascript:StoreClickedURL(1,'physics','xyz.com/PublicProfile.aspx?id=1088');window.location = 'xyz.com/PublicProfile.aspx?id=1088'"> 
```

# php - 当有更多时，Php/Mysql 搜索仅返回 1 个结果

> ID：13303209
> 
> 赞同：0
> 
> 时间：2012-11-09T06:31:52.247
> 
> 标签：php, mysql, search

我在脚本中进行了双重搜索。当它搜索玩家装备时，它将获取玩家 UID 并带回该玩家的姓名。唯一的问题是可能会返回超过 1 个结果，并且它只会显示最后一个带有名称的 UID。

```
$ip = "localhost";
$user = "******";
$pass = "*******";
$db = "hivemind";
$ill1 = $_POST['search'];

//Database Connection
$con = @mysql_connect("$ip:3316", "$user", "$pass")
            or die(mysql_error());

//Select Database
$dbcon = @mysql_select_db($db, $con)
            or die(mysql_error());

$sql = mysql_query("select PlayerUID, Inventory, Backpack from character_data where Inventory like '%$ill1%'");

while ($row = mysql_fetch_array($sql)) {
    $puid = $row['PlayerUID'];
    $inv = $row['Inventory'];
    $back = $row['Backpack'];
    ?>
    <html>
    <body>
    <table>
    <tr>

                    <td><?php echo "$puid"; ?></td>
                    <td><?php echo "$inv"; ?></td>
                    <td><?php echo "$back"; ?></td>

    </tr>
    </table>
    </body>
    </html>
    <?php }?>

    <?php

//Database Connection
$con = @mysql_connect("$ip:3316", "$user", "$pass")
            or die(mysql_error());

//Select Database
$dbcon = @mysql_select_db($db, $con)
            or die(mysql_error());

$sql = mysql_query("select PlayerUID, PlayerName from player_data where PlayerUID like '%$puid%'");

while ($row = mysql_fetch_array($sql)) {

    $puid2 = $row['PlayerUID'];
    $plnm = $row['PlayerName'];
    ?>
    <html>
    <body>
    <table>
    <tr>    
                    <td><?php echo "$puid"; ?></td>
                    <td><?php echo "$plnm"; ?></td>

    </tr>
    </table>
    </body>
    </html>
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:36:21.947

它正在返回所有结果。您没有正确打印它们。

将 html,body,table 标签移到`while`循环外。

将循环更改为：

```
while ($row = mysql_fetch_array($sql)) {

    $puid2 = $row['PlayerUID'];
    $plnm = $row['PlayerName'];
    echo "<tr><td>".$puid."</td>";
    echo "<td>".$plnm."</td></tr>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:34:13.680

**循环**打印下面的代码

 **```
<td><?php echo "$puid"; ?></td>
  <td><?php echo "$plnm"; ?></td> 
```

你只打印一次，所以覆盖值。**

# node.js - 使用 node.js 使用 Skype 登录并发送消息

> ID：13303212
> 
> 赞同：-1
> 
> 时间：2012-11-09T06:32:00.600
> 
> 标签：node.js, skype

我不知道如何使用 node.js 连接到 Skype。如果您有任何信息，请分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:19:38.120

无法以这种方式与 Skype 进行通信。

另一个用户请求了Skypekit
[http://devforum.skype.com/t5/Feature-Requests/SkypeKit-for-NodeJS/idi-p/8648](http://devforum.skype.com/t5/Feature-Requests/SkypeKit-for-NodeJS/idi-p/8648)

与您无法从非 iOS 设备发送 iMessage 的方式大致相同，您无法从 Skype 以外的任何设备发送 Skype 消息。

# mysql - 3 次引用同一字段的多列查询结果

> ID：13303213
> 
> 赞同：1
> 
> 时间：2012-11-09T06:32:01.503
> 
> 标签：mysql, multiple-columns

> **可能重复：**
> [sql 查询将两列与一列连接](https://stackoverflow.com/questions/13295323/sql-query-joining-two-columns-with-one)

所以我在 MySQL 中获取查询时遇到了一些麻烦。

这是我现在使用的表

```
DROP TABLE IF EXISTS `qualifications`;
CREATE TABLE `qualifications`(
    `activity` int NOT NULL,
    `group` int NOT NULL,
`tournament` int NOT NULL,
`judge_1` int NOT NULL,
`grade_1` int NOT NULL,
`judge_2` int NOT NULL,
`grade_2` int NOT NULL,
`judge_3` int NOT NULL,
`grade_3` int NOT NULL,
PRIMARY KEY(`activity`,`group`),
FOREIGN KEY(`activity`) REFERENCES `activities`(`id`),
FOREIGN KEY(`group`) REFERENCES `groups`(`id`),
FOREIGN KEY(`judge_1`) REFERENCES `judges`(`id`),
FOREIGN KEY(`judge_2`) REFERENCES `judges`(`id`),
FOREIGN KEY(`judge_3`) REFERENCES `judges`(`id`),
FOREIGN KEY(`tournament`) REFERENCES `tournaments`(`id`)
)ENGINE=InnoDB, DEFAULT CHARSET=utf8; 
```

我想要的是获得活动名称、组名、锦标赛名称以及所有 3 名评委的姓名和成绩。这是我到目前为止的查询：

```
select a.name as Game, t.name as Tornament, g.name as "Group", j.name as Judge1, j.name as Judge2, (q.grade_1+q.grade_2+q.grade_3) as Grades from activities a, groups g, judges j, tournaments t, qualifications c where
a.id = q.activity and t.id = q.tournament and g.id = q.group and g.id = 2; 
```

当然，除了法官姓名之外，这很好用……我怎样才能在一个结果中获得 3 个法官姓名？

提前谢谢大家，如果我不能很好地解释自己，很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:41:52.700

`Judges`假设名称存在，加入表以获取名称。

```
 select a.name as Game, t.name as Tornament, g.name as "Group",
          j1.name as Judge1, 
          j2.name as Judge2,
          j3.name as Judge3,
          (q.grade_1+q.grade_2+q.grade_3) as Grades 
    from activities a JOIN judges j1
         ON a.judge_1 = j1.id
         JOIN judges j2
         ON a.judge_2 = j2.id
         JOIN judges j3
         ON a.judge_3 = j3.id
         JOIN qualifications q 
         ON a.id = q.activity 
         JOIN tournaments t
         ON t.id = q.tournament 
         JOIN groups g
         ON g.id = q.group 
     WHERE g.id = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:48:47.317

作为[@Yogendra Singh 的答案](https://stackoverflow.com/a/13303327)的替代方案，并且如果您可以容忍将名称连接成分隔字符串（您可以将其用作分隔符，例如[U+001e](http://www.fileformat.info/info/unicode/char/1e/)），您可以`judges`通过将结果与列[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)的聚合`judges.name`：

```
SELECT   a.name                              AS Game,
         t.name                              AS Tournament,
         g.name                              AS Group,
         GROUP_CONCAT(j.name SEPARATOR 0x1e) AS Judges,
         q.grade_1 + q.grade_2 + q.grade_3   AS Grades 
FROM     activities     a
    JOIN judges         j ON j.id IN (a.judge_1, a.judge_2, a.judge_3)
    JOIN qualifications q ON a.id = q.activity 
    JOIN tournaments    t ON t.id = q.tournament 
    JOIN groups         g ON g.id = q.group 
WHERE    g.id = 2
GROUP BY a.id, t.id 
```

# javascript - 如何更改 datepicker jQuery UI 中显示的日期范围？

> ID：13303214
> 
> 赞同：1
> 
> 时间：2012-11-09T06:32:23.823
> 
> 标签：javascript, jquery, jquery-ui, datepicker

例如，这是一个如何显示年份和月份菜单的示例：

```
$("#datepicker").datepicker({
    changeMonth: true,
    changeYear: true
}); 
```

但这仅显示 21 个日期，10 个向上和 10 个向下（例如，2002 - 2022）。但这对我来说还不够，因为我想要人们的出生日期。那么，我是否可以将该范围扩大到（1952 - 2008），因为我不希望人们给出超过当年的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:38:54.797

如果您查看[jquery api 文档](http://api.jqueryui.com/datepicker/#option-yearRange)，它说您可以使用以下参数初始化 jquery datepicker。

```
$( ".selector" ).datepicker({ yearRange: "2002:2012" }); 
```

我希望这会有所帮助。

# jquery - jQuery 表格数据排序器插件，用于一张表格中的多行

> ID：13303218
> 
> 赞同：0
> 
> 时间：2012-11-09T06:32:49.733
> 
> 标签：jquery, tablesorter

我有一张带有两个表格标题的表格<th>。我需要使用 jquery 表排序对两个不同的集合进行排序。

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="listtable">
 <thead>
  <tr>
   <th>Heading Set1 - A</th>
   <th>Heading Set1 - B</th>
   <th>Heading Set1 - C</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
   <td>&nbsp;</td>
  </tr>
 </tbody>
  <thead>
  <tr>
   <th>Heading Set2 - A</th>
   <th>Heading Set2 - B</th>
   <th>Heading Set2 - C</th>
  </tr>
  </thead>
 <tbody>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  </tbody>
  </table> 
```

排序单个 TH 的脚本如下：

```
$(function() 
{ 

  $(".listtable").tablesorter({ 

  sortList : [[1,0]], 

  widgets: ["zebra", "columns"], 

  widgetOptions: { 
    columns: [ "primary", "secondary", "tertiary" ], 
    columns_thead : true, 
    columns_tfoot : true 
 } 

 }); 
```

我可以对一组 TH 进行排序，但我需要在现有表中添加另一组 TH 和 TBODY。我的脚本不允许对单个表中的两个集合进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:47:39.810

我找到[了这个参考，但我在](http://www.idocs.com/tags/tables/_THEAD.html)[W3C 建议](http://www.w3.org/TR/html-markup/table.html)中找不到确切的措辞。它说每张桌子只允许一张桌子`thead`和一张桌子。`tfoot`多个`tbody`'s 很好。

因此，不要使用两个`thead`，只需将其替换为 a`tbody`并添加类`tablesorter-infoOnly`，以便插件忽略内容。像这样：

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="listtable">
    <thead>
        <tr>
            <th>Heading Set1 - A</th>
            <th>Heading Set1 - B</th>
            <th>Heading Set1 - C</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
    <tbody class="tablesorter-infoOnly">
        <tr>
            <th>Heading Set2 - A</th>
            <th>Heading Set2 - B</th>
            <th>Heading Set2 - C</th>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:48:01.623

试试这个插件，

[http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html](http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html)

DataTables 允许您同时按多列排序。DataTables 还提供了一种方法来添加您自己的排序函数，以扩展那些内置到 DataTables 中的排序函数。如果您希望对数据格式（例如货币和非 JavaScript 标准日期格式）进行排序（这种自然排序算法很流行），这将非常有用。

# opengl - 减少与纹理相关的 RAM 使用量

> ID：13303219
> 
> 赞同：0
> 
> 时间：2012-11-09T06:32:57.727
> 
> 标签：opengl

目前，我的应用在加载纹理后使用了大量内存（~200Mb）

我将纹理加载到 char 缓冲区中，将其传递给 OpenGL，然后终止缓冲区。

看起来这个内存是由 OpenGL 使用的，它在内部进行自己的纹理管理。

我可以采取什么措施来减少这种情况？

是否可以阻止 OpenGL 在内部管理纹理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:38:01.610

一种典型的解决方案是在相机的给定位置或时间范围内跟踪您需要哪些纹理，并仅在需要时加载那些纹理（而不是在加载应用程序时加载每个纹理）。您将必须有一个“管理器”，它控制由 glBindTexture 分配的相应纹理编号（例如，将字符串、纹理名称与整数相关联的容器）的加载-卸载和边界）

其他选项是降低您正在使用的纹理的整体质量/大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T08:20:03.583

> OpenGL似乎使用了这个内存，

是的

> 它在内部进行自己的纹理管理。

不，不是纹理管理。它只需要将数据保存在某个地方。在现代系统中，GPU 由同时运行的多个进程共享。并非所有数据都适合快速 GPU 内存。所以OpenGL实现必须能够交换数据。GPU 快速内存不是存储，它只是另一个缓存级别。就像系统内存是系统存储的缓存一样。

此外，GPU 可能会崩溃，并且现代驱动程序会在用户没有注意到的情况下将它们原位重置。为此，他们还需要数据的完整副本。

> 是否可以阻止 OpenGL 在内部管理纹理？

不，因为这样做要么很乏味，要么会破坏事情。但是你可以做的是只加载绘制给定场景真正需要的纹理。

如果您阅读我关于 OpenGL 的文章，您会注意到多年来我一直告诉人们不要编写诸如“initGL”函数之类的愚蠢的东西。将所有内容放入您的绘图代码中。无论如何，您将经历一个绘图调度阶段（您必须对半透明对象进行远近排序、截锥体剔除等）。这使您有机会检查所需的纹理并加载它们。您甚至可以只加载较低分辨率的 mipmap 级别，以便在最初显示场景时其细节较少，并在背景中加载较高分辨率的 mipmap；这当然需要适当设置最小和最大 mip 级别，以将其设置为纹理或采样器参数。

# c++ - 静态方法上的c ++语法错误

> ID：13303230
> 
> 赞同：0
> 
> 时间：2012-11-09T06:33:41.657
> 
> 标签：c++, node.js

我有以下代码：

```
class v8NMatch : public V8Wrap<Match, v8NMatch>
{
public:
    static v8::Persistent<v8::FunctionTemplate> s_ct;
    static void Init(v8::Handle<v8::Object> target);
    static v8::Handle<v8::Value> IsSuccess(Arguments& args);

    v8NMatch(const v8::Arguments& args);

}; 
```

它告诉我标识符参数有语法错误。如果我将 const 关键字放在参数之前，我有 2 个错误：

> 缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
> 
> 语法错误：在 '&' 之前缺少 ','

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:35:25.510

IsSuccess 是在没有 v8::Arguments 的情况下定义的。

# php - 没有数据库的 PHP 登录 - 为什么这样的方法不起作用？

> ID：13303232
> 
> 赞同：2
> 
> 时间：2012-11-09T06:33:44.767
> 
> 标签：php, login

所以我正在开发一个小网站，我希望它只对我和我的朋友可见，因为我只是在开发它，而 .htaccess 不是我现在想要的。我对PHP不太好，我设法写了这个：

```
<?
$user = $_REQUEST['user'];
$pass = $_REQUEST['pass'];
if($user == "xxx1" or "xxx2" and $pass == "xxx1" or "xxx2"){
    setcookie("notrandom", "Success", time()+3600);
}
else{
    setcookie("notrandom", "Success", time()-3600);
}
header("Location:index.php"); 
```

将此放置在页面导航栏上，因此如果用户尚未登录，它将杀死页面的内容并且仅显示登录表单：

```
<?php 
if(empty($_COOKIE['notrandom'])){
    echo '
    <form class="form-inline navbar-form pull-right" method="post" action="kirjaudu.php">
  <input type="text" class="input-medium" placeholder="Käyttäjätunnus" name="user">
  <input type="password" class="input-medium" placeholder="Salasana" name="pass">

  <button type="submit" class="btn">Kirjaudu</button>
</form>
</div>
</div><!-- /navbar-inner -->
</div>
    ';
    die();
}

?> 
```

但是，我的问题是脚本将接受输入的**任何**用户名和密码，所以我在这里误用`or`了`and`吗？

我应该怎么做？我将如何使用它？

```
$user = array("User1"=>"Pass1", 
              "User2"=>"Pass2"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:36:32.440

### 你在做什么：

当你这样做时`($user == "xxx1" or "xxx2")`，你实际上在做的是与 比较`$user`，`"xxx1"`然后，`OR'ing`与`"xxx2"`，产生`TRUE`。你的条件**不正确。**

**[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)**

* * *

### 使固定：

它应该是：

```
if(($user == "xxx1" and $pass == "xxx1") or ($user == "xxx2" and $pass == "xxx2")){
...
...
} 
```

这将评估`TRUE`为

```
case1: username = xxx1, password = xxx1
case2: username = xxx2, password = xxx2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:38:46.750

试试这个代码：

```
<?
$user = $_REQUEST['user'];
$pass = $_REQUEST['pass'];

if(($user == "xxx1" && $pass == "xxx1") || ($user == "xxx2" && $pass == "xxx2")){
     setcookie("notrandom", "Success", time()+3600);
}
else{
     setcookie("notrandom", "Success", time()-3600);
}
header("Location:index.php");
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:41:17.517

这个声明并没有像你认为的那样做：

```
if($user == "xxx1" or "xxx2" and $pass == "xxx1" or "xxx2") 
```

真的很像写：

```
if ($user=="xxx1" or ("xxx2" != false and $pass == "xxx1") or "xxx2" != false) 
```

所以这个陈述总是正确的，因为“xxx2”永远不会是错误的。

你想要的是：

```
if ( ($user=="xxx1" and $pass=="xxx1") or ($user=="xxx2" and $pass=="xxx2") ) 
```

您可以使用包含任意数量的用户名/密码的数组。只需确保在尝试比较其值之前检查以确保用户密钥存在：

```
$userArray = array("User1"=>"Pass1", "User2"=>"Pass2");

if (array_key_exists($user, $userArray) && $userArray[$user] == $pass) {
    // user is logged in!
} else {
    // user is not logged in
} 
```

您的 cookie 仍有问题。为什么不只使用会话：

```
session_start();
if (array_key_exists($user, $userArray) && $userArray[$user] == $pass) {
    $_SESSION['loggedIn'] = true;
} else if (!isset($_SESSION['loggedIn']) {
    $_SESSION['loggedIn'] = false;
}

// then later whenever you want to detect if the user is logged in or not...

if ($_SESSION['loggedIn']) { 
    // ... do stuff ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:01:00.107

试试这个，执行起来可能会更快，避免不必要的比较

```
<?
$user = $_REQUEST['user'];
$pass = $_REQUEST['pass'];

if($user == "xxx1" && $pass == "xxx1") {
     setcookie("notrandom", "Success", time()+3600);
}
else if($user == "xxx2" && $pass == "xxx2){
setcookie("notrandom", "Success", time()+3600);
}
else{
     setcookie("notrandom", "Success", time()-3600);
}
header("Location:index.php");
?> 
```

# window - 无论浏览器窗口大小如何，如何在 div 内自动居中 img？

> ID：13303236
> 
> 赞同：1
> 
> 时间：2012-11-09T06:34:02.320
> 
> 标签：window, size, image, center

我有一个包含页眉、内容和页脚 div 的 html 文档。我正在尝试将标题 div 中的图像（徽标）居中显示在网页顶部的中间。我可以将它绝对定位到中间，但是当我更改浏览器大小时，img 不会随之移动。我希望它自动放置在窗口的中心。我被难住了..？

我试过了，margin-right:auto; 左边距：自动。我也尝试过让 margin-left 负一半宽度和前 50% 的技巧，但到目前为止没有任何效果。

html:

```
 <body>
<div id="container">

<div id="header">
    <img id="logo-img" src="http://f.cl.ly/items/3c0h1b0F3t1D1S1T2J0F/smallersticker.png">
</div>
/*...(body div)
...(footer div)*/
</div> /*container*/ 
```

CSS：

```
#header {

    background-color:transparent;
    height:260px;
    width:100%
}

#logo-img{
display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

另外，我什至需要一个容器吗？不确定我是否需要 javascript，或者是否可以仅使用 html/css 来完成？希望有人能帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:54:04.300

发生的事情是您已经正确地将图像居中。

你的问题是图像很大。如果您仔细观察，如果您的浏览器窗口的宽度变得小于图像，则图像不会居中。

从图像中删除白色区域，它将正确居中。

编辑：在 IE 中，您需要将规则添加`text-align:center`到`#header`

## 其他方式：

如果您不想更改图像，可以使用此 hack：

```
 <style>
    #header {
        overflow-y: hidden;
        background-color: transparent;
        height: 260px;
        width: 100%;
        margin-left: 50%;
    }

    #logo-img{
        display: block;
        position: relative;
        right: 50%;
    }
    </style>
    <body>
    <div id="container">

    <div id="header">
        <img id="logo-img" src="http://f.cl.ly/items/3c0h1b0F3t1D1S1T2J0F/smallersticker.png">
    </div>
    /*...(body div)
    ...(footer div)*/
    </div> /*container*/ 
```

[我不久前在这里](http://matthewjamestaylor.com/blog/centered-dropdown-menus)学到了这个技巧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T18:42:44.947

只需以应有的大小使用徽标[（像这里这样）](https://imgur.com/WFWVcoE)，然后您需要做的就是将 align="center" 属性添加到徽标的 div 中。

# servlets - Struts2 With Styling 外战/入耳

> ID：13303239
> 
> 赞同：1
> 
> 时间：2012-11-09T06:34:20.570
> 
> 标签：servlets, struts2, struts, freemarker, template-engine

我对 Struts2 有疑问，问题是，客户端希望 Web 应用程序的样式是动态的，例如，我可以将模板 (.html / .ftl) 放在 /apps/template/path 上所有逻辑在战争中，我能做到吗？

我一直在谷歌上搜索，这种代码风格属于 freemarker。但如果使用 freemarker，我必须使用 servlet 进行编码（我不想那样做）。

你能给我提示/解决方案，还是真的不能在 Struts2 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:43:37.177

> 如果使用 freemarker，我必须使用 servlet 进行编码

不，FreeMarker 不需要 Servlet 而不是 Actions。FreeMarker 完全集成在 Struts2 中，它只需要你的 libs 目录中的库以及 struts.xml 和 web.xml 中的一些小配置。

根据[Struts2 文档](http://struts.apache.org/2.x/docs/freemarker.html)，

> **模板加载**
> 
> 该框架在两个位置（按此顺序）查找 FreeMarker 模板：
> 
> *   Web应用程序
> *   类路径
> 
> 这种排序使其非常适合在完全构建的 jar 中提供模板，但允许在您的 Web 应用程序中定义这些模板的覆盖。事实上，这就是您可以覆盖框架中包含的默认 UI 标签和表单标签的方式。
> 
> 此外，**您可以通过 templatePath 或 TemplatePath 上下文变量（在 {{web.xml)} 中指定位置（文件系统上的目录）**。如果指定了变量，则首先搜索它指向的目录的内容。此变量当前与您的应用程序的根目录无关。

因此，如果您想使用 .FTL 文件（FreeMarker 模板）代替 JSP 文件，您可以将它们放在耳朵之外，在文件系统中。

像这样（web.xml）：

```
 <!-- FreemarkerServlet settings: -->
  <init-param>
    <param-name>TemplatePath</param-name>
    <param-value>/apps/template/path</param-value>
  </init-param> 
```

# sencha-touch - 调整字段集宽度并调整到中心

> ID：13303240
> 
> 赞同：1
> 
> 时间：2012-11-09T06:34:24.240
> 
> 标签：sencha-touch, width, center, padding, fieldset

我只是煎茶触控技术的初学者。现在我有一个简单的问题。如何调整字段集宽度并仅对齐到中心？我只得到仅设置为全屏的字段集。请指导我一个解决方案。

这是我的javascript

```
 items:[{
                xtype:'fieldset',
                title :'Please enter your password key',

                centered: true,
                width: 30,

                items:[{
                        xtype: 'passwordfield',
                        name : 'password',
                        label: 'password',
                        width : 400,

                    }]

              }], 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:04:53.133

不要在代码中使用硬编码值，这在您为多个分辨率制作应用程序时会很糟糕

请尝试下面显示的代码，它对我有用

```
layout: {
            type: 'vbox',
            pack: 'center',
            align: 'center'
        },
    items:[{
                xtype:'fieldset',
                title :'Please enter your password key',

                //centered: true,
                //width: 30,

                items:[{
                        xtype: 'passwordfield',
                        name : 'password',
                        label: 'password',
                        //width : 400,
               }]
     }] 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T04:25:06.677

尝试

样式：{ textAlign：'center'，宽度：'100px'}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T06:32:15.507

在 ST2 中，像这样将它放在容器中

```
{
  xtype: 'container',
  centered: true,
  items:{
       xtype: 'fieldset',
       items :[
         //your items here
       ]
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:07:44.680

尝试这个，

```
items:[{
              xtype:'fieldset',
              title :'Please enter your password key',

              centered: true, // using this you can align fieldset to center
              width: '80%',   // using this you can give any width to it in percentage

              items:[{
                     xtype: 'passwordfield',
                     name : 'password',
                     label: 'password',      
                     }]  
              }], 
```

或者

```
items:[{
              xtype:'fieldset',
              title :'Please enter your password key',

             // centered: true,
              margin: '10%',
              width: '80%',
              height: '20%',

              items:[{
                     xtype: 'passwordfield',
                     name : 'password',
                     label: 'password',  
                     }]

              }], 
```

希望这可以帮助你。

# java - Java程序在执行批处理时抛出异常

> ID：13303244
> 
> 赞同：0
> 
> 时间：2012-11-09T06:34:34.400
> 
> 标签：java, jdbc

我正在实现一个 JAVA 应用程序，它从不同的 URL 获取数据并将这些数据存储到数据库中。每个表都有它自己的 URL 集合，它从中接收数据。我这样做是通过为每个表实现一个preparedstatement，从URL 获取数据，将数据绑定到preparestatement 并作为批处理添加数据，直到一个表的所有URL 都完成。然后在prepare语句上执行executeBatch。我确实有一些 6-8 表，每个表有大约 200 行。我对每个表都执行相同的过程，但是在更新 3-4 个表后，我的 executeBacth 抛出了一个异常，上面写着：

```
 java.sql.SQLException: SQL Exception : [Microsoft][ODBC Driver
 Manager] Invalid string or buffer length   at
 sun.jdbc.odbc.JdbcOdbcPreparedStatement.setObject(JdbcOdbcPreparedStatement.java:1438)
    at
 sun.jdbc.odbc.JdbcOdbcPreparedStatement.setObject(JdbcOdbcPreparedStatement.java:1073)
    at
 sun.jdbc.odbc.JdbcOdbcPreparedStatement.emulateExecuteBatch(JdbcOdbcPreparedStatement.jjva:2104)
    at
 sun.jdbc.odbc.JdbcOdbcPreparedStatement.executeBatchUpdate(JdbcOdbcPreparedStatement.java:1782)
    at
 sun.jdbc.odbc.JdbcOdbcStatement.executeBatch(JdbcOdbcStatement.java:911)
    at FaoClient.CFaoTable.InsertFromPartialSource(CFaoTable.java:174) 
```

我通过更改获取表数据的顺序测试了相同的程序，但在插入数据 4-5 个表后它总是抛出异常。我觉得这就像一些内存泄漏情况，但我知道 JAVA 抓取收集器永远不会让这种情况发生。我对这个 JAVA 世界很陌生，所以我可能错了。我正在粘贴我的代码部分，它使用 java.sql.* 来插入记录。

```
 private boolean BindValueToStmt(PreparedStatement ps, int index, TableCol.ColType type, String ColVal) {
        if ((ps == null) || (ColVal == "")) {
            return false;
        }
        try {
            switch (type) {
                case INTEGERT: {
                    ps.setInt(index, Integer.parseInt(ColVal));
                    return true;
                }
                case STRINGT: {
                    ps.setString(index, ColVal);
                    return true;
                }
                case REALT: {
                    ps.setFloat(index, Float.parseFloat(ColVal));
                    return true;
                }
                case DOUBLET: {
                    ps.setDouble(index, Double.parseDouble(ColVal));
                    return true;
                }
                default:
                    ps.setNull(index, java.sql.Types.NULL);
            }
            return true;
        } catch (SQLException E) {
            System.out.println("Error in Setting the value of the col in table: " + Name + E);
            E.printStackTrace();
            return false;
        }
    }

   private String CreatePreparedInsertStatement() {
        StringBuilder insertStmt = new StringBuilder("insert into " + Name + "(");
        String val = " values (";
        for (int index = 0; index < Columns.size(); index++) {
            TableCol col = Columns.get(index);
            if (index != Columns.size() - 1) {
                String Stmt = col.GetColName() + ", ";
                insertStmt.append(Stmt);
                val += "?, ";
            } else {
                String Stmt = col.GetColName() + ")";
                insertStmt.append(Stmt);
                val += "?)";
            }
        }
        insertStmt.append(val);
        return insertStmt.toString();
    } 
```

下面是实际插入数据的代码。

```
 private boolean InsertFromPartialSource(Connection conn, SAXReader reader) {
        try {
            if (conn == null || reader == null) {
                return false;
            }
           //Some Code not realted to java.sql

            conn.setAutoCommit(false);
            String strPs= CreatePreparedInsertStatement();
            PreparedStatement ps = conn.prepareStatement(strPs);

            //Some Code not realted to java.sql

            for (int index = 0; index < Columns.size(); index++) {
                    TableCol col = Columns.get(index);
                    //Some Code not realted to java.sql
                    if (!BindValueToStmt(ps, index + 1, col.GetColType(), colVal)) {
                        ps.setNull(index + 1, TableCol.GetSqlColTypeFrmType(col.GetColType()));
                    }
                }
                rowCount++;
                System.out.println(rowCount + "rows has been extracted for table \" " + Name);
                ps.addBatch();

            }
            if (rowCount > 0) {
                int RecordsUpdated[] = ps.executeBatch();
            }
            conn.commit();
            conn.setAutoCommit(true);
            ps.close();
            return true;
} 
```

为了清楚起见，我只粘贴了与数据库更新相关的函数 InsertFromPartialSource 的一部分。有人可以指出这里出了什么问题吗？

**上述问题的解决方法是：** 将你的 MySql 连接器或驱动程序更改为 MySqlJDBC 驱动程序。它可以在以下链接中找到：http: [//dev.mysql.com/downloads/connector/j/5.1.html](http://dev.mysql.com/downloads/connector/j/5.1.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T08:12:24.550

考虑为您的数据库切换到真正的 JDBC 驱动程序（如果有的话）。JdbcOdbc 桥相当糟糕，特定的 JDBC 驱动程序通常工作得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:47:15.597

您可以尝试执行，而不是执行批处理，以避免蹩脚的批处理操作。

# c# - VS2008 WinForm项目，运行项目时出错：'无法完成操作。进程无法访问文件'

> ID：13303246
> 
> 赞同：0
> 
> 时间：2012-11-09T06:35:09.720
> 
> 标签：c#, winforms, bug-tracking

我在 VS2008 FrameWork 3.5 中有一个 winforms 应用程序。当我在调试模式下运行应用程序时，出现错误：'操作无法完成。该进程无法访问该文件，因为它正被另一个进程使用。

然后在我关闭 Visual Studio 编辑器并转到应用程序 foler/bin/debug 后，删除 abc.vshost.exe 文件然后启动项目，然后项目成功运行。

我想知道为什么会发生这个错误，以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:54:36.400

这似乎是一个相当普遍的问题，有很多可能的原因和解决方案。在程序集版本号中使用通配符时，我遇到了 VS2010 的这个问题，例如“1.0.*”。

我使用了这个来源的第一个解决方法：[http ://connect.microsoft.com/VisualStudio/feedback/details/533411/visual-studio-keeps-locking-files](http://connect.microsoft.com/VisualStudio/feedback/details/533411/visual-studio-keeps-locking-files)

删除通配符对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:41:50.907

该错误表示 vshost.exe 文件被其他进程占用。您可以使用 Process Explorer 来查找正在使用该文件的进程。详细如何使用它来查找文件句柄，请参考： http: [//windowsxp.mvps.org/processlock.htm](http://windowsxp.mvps.org/processlock.htm)

vshost.exe 文件是 VS 调试器的存根文件。Visual Studio 将在调试时启动 vshost.exe 进程而不是您的 exe 文件。当您停止调试时，可能会发生 vshost.exe 文件未正确停止的情况。您也可以使用 Process Explorer 来查找是否有任何进程被命名为 MyProg.vshost.exe。

-- 取自 MDSN 论坛

[http://go4answers.webhost4life.com/Example/csharp-fails-start-visual-studio-2008-26572.aspx](http://go4answers.webhost4life.com/Example/csharp-fails-start-visual-studio-2008-26572.aspx)

# controller - 是否可以在 AngularJS 中向 DOM 注入控制器？

> ID：13303253
> 
> 赞同：2
> 
> 时间：2012-11-09T06:35:49.160
> 
> 标签：controller, angularjs, inject

我对 angularjs 比较陌生，我想做的是创建一个类似 ngView 的组件。
所以有一个很重要的过程就是给DOM注入一个控制器。
假设我们有一个 DOM，

```
<div>
    <span>Name: {{name}}</span>
</div> 
```

和一个控制器，

```
function InjectedController($scope) {  
   $scope.name = "Leo Yuan";  
} 
```

我想做的是将控制器“InjectedController”注入到部门中，
我尝试编写像ngView一样的代码，
$("div").contents().data('$ngControllerController', InjectedController);
但是还是不行，有什么问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T16:15:01.567

您可以通过将控制器直接包含到 HTML 中来做到这一点。确保将此 HTML 存储为模板或变量，然后将其作为字符串加载。

```
<div data-ng-controller="%%controller%%">
  <span>Name: {{name}}</span>
</div> 
```

使用 JavaScript 将 %%controller%% 部分替换为您想要的任何控制器。

然后要么直接运行，要么自行编译该 HTML

```
var templateHTML = "..."; //either download it with XHR or make it an inline template
templateHTML = templateHTML.replace('%%controller%%', injectedController);

//inject the $compile service into the function body
//grab the scope if it's not already there
$scope = $scope || angular.element(document).scope();

//this should run the controller automatically
$compile(templateHTML)($scope); 
```

# go - Go 接收器方法调用语法混淆

> ID：13303254
> 
> 赞同：4
> 
> 时间：2012-11-09T06:35:52.083
> 
> 标签：go

我只是在阅读[Effective Go](http://golang.org/doc/effective_go.html)和[指针与值](http://golang.org/doc/effective_go.html#pointers_vs_values)部分，接近**结尾处**说：

> 接收者的指针与值的规则是值方法可以在指针和值上调用，但指针方法只能在指针上调用。这是因为指针方法可以修改接收者；在值的副本上调用它们会导致这些修改被丢弃。

为了测试它，我写了这个：

```
package main

import (
  "fmt"
  "reflect"
)

type age int

func (a age) String() string {
  return fmt.Sprintf("%d yeasr(s) old", int(a))
}

func (a *age) Set(newAge int) {
  if newAge >= 0 {
    *a = age(newAge)
  }
}

func main() {
  var vAge age = 5
  pAge := new(age)

  fmt.Printf("TypeOf =>\n\tvAge: %v\n\tpAge: %v\n", reflect.TypeOf(vAge),
    reflect.TypeOf(pAge))

  fmt.Printf("vAge.String(): %v\n", vAge.String())
  fmt.Printf("vAge.Set(10)\n")
  vAge.Set(10)
  fmt.Printf("vAge.String(): %v\n", vAge.String())

  fmt.Printf("pAge.String(): %v\n", pAge.String())
  fmt.Printf("pAge.Set(10)\n")
  pAge.Set(10)
  fmt.Printf("pAge.String(): %v\n", pAge.String())
} 
```

它编译，即使文档说它不应该编译，因为指针方法`Set()`不应该通过值 var 调用`vAge`。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T06:49:49.553

这是有效的，因为`vAge`是可寻址的。请参阅语言规范下的[调用](http://golang.org/ref/spec#Calls)中的最后一段：

> 如果 x 的（类型）的方法集包含 m 并且参数列表可以分配给 m 的参数列表，则方法调用 xm() 是有效的。如果 x 是可寻址的并且 &x 的方法集包含 m，则 xm() 是 (&x).m() 的简写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T00:13:57.073

`vAge`不仅仅被视为“值变量”，因为它是内存中存储类型值的已知位置`age`。只看`vAge`它的值，作为一个表达式本身`vAge.Set(10)`是*无效的，但由于是可寻址的，规范声明可以**在编译时*`vAge`将表达式视为“获取 vAge 的地址，并在其上调用 Set”的简写*-time*，当我们能够验证这`Set`是为`age`or设置的方法的一部分时`*age`。如果编译器确定它是必要且可能的，则基本上允许编译器对原始表达式进行文本扩展。

同时，编译器将允许您调用`age(23).String()`但不允许调用`age(23).Set(10)`. 在这种情况下，我们正在使用 type 的不可寻址值`age`。既然说是无效的`&age(23)`，那就不能说是有效的`(&age(23)).Set(10)`；编译器不会进行这种扩展。

查看 Effective Go 示例，您并没有直接调用`b.Write()`我们知道`b`的完整类型的范围。相反，您正在制作一个临时副本`b`并尝试将其作为 type 的值传递`interface io.Writer()`。问题是实现对`Printf`传入的对象一无所知，只是它承诺知道如何接收`Write()`，所以它不知道在调用函数之前将a`byteSlice`转换为 a 。`*ByteSlice`是否寻址的决定`b`必须在编译时发生，并且`PrintF`编译的前提是它的第一个参数将知道如何在`Write()`不被引用的情况下接收。

您可能会认为，如果系统知道如何获取`age`指针并将其转换为`age`值，那么它应该能够执行相反的操作；但是，能够做到这一点并没有什么意义。在 Effective Go 示例中，如果您要传递`b`而不是`&b`，您将修改一个在 PrintF 返回后将不再存在的切片，这几乎没有用。在我上面的示例中，获取 value并用 value 覆盖它`age`实际上是没有意义的。在第一种情况下，编译器停下来询问程序员在交接时她真正想要做什么是有意义的。在后一种情况下，编译器拒绝修改常量值当然是有意义的。`23``10``b`

此外，我认为系统不会动态扩展`age`' 方法设置为`*age`; 我的疯狂猜测是，指针类型静态地为每个基类型的方法提供了一个方法，它只是取消引用指针并调用基类型的方法。自动执行此操作是安全的，因为按值接收方法中的任何内容都无法更改指针。在另一个方向上，扩展一组要求修改数据的方法并不总是有意义，方法是将它们包装成它们修改的数据很快就会消失的方式。在某些情况下这样做是有意义的，但这需要由程序员明确决定，编译器停止并要求这样做是有意义的。

tl;dr I think that the paragraph in Effective Go could use a bit of rewording (although I'm probably too long-winded to take the job), but it's correct. A pointer of type `*X` effectively has access to all of `X`'s methods, but 'X' does not have access to `*X`'s. Therefore, when determining whether an object can fulfill a given interface, `*X` is allowed to fulfill any interface `X` can, but the converse is not true. Furthermore, even though a variable of type `X` in scope is known to be addressable at compile-time--so the compiler can convert it to a `*X`--it will refuse to do so for the purposes of interface fulfillment because doing so may not make sense.

# mysql - 调试 sql 语法，错误 #1064

> ID：13303256
> 
> 赞同：0
> 
> 时间：2012-11-09T06:35:55.810
> 
> 标签：mysql, syntax, phpmyadmin

我在共享主机中使用来自 phpmyadmin 的以下脚本：

```
USE newmakerting
CREATE TABLE `nemarketing_registration`.`users` (

`id` INT NOT NULL AUTO_INCREMENT ,
`email` VARCHAR( 256 ) ,
`firstName` VARCHAR( 256 ) ,
`lastName` VARCHAR( 256 ) ,
`profession` VARCHAR( 256 ) ,
`company` VARCHAR( 256 ) ,
`country` VARCHAR( 256 ) ,
`ticketNumber` VARCHAR( 256 ) ,
`jobArea` VARCHAR( 256 ) ,
`networkingPeople` VARCHAR( 256 ) ,
`topics_networking` VARCHAR( 256 ) ,
`topics_research` VARCHAR( 256 ) ,
`topics_tochat` VARCHAR( 256 ) ,
`last_book` VARCHAR( 256 ) ,
 PRIMARY KEY ( `id` ) 
 ) CHARACTER SET utf8; 
```

但我收到以下错误：

```
# 1064 - You have an error in your SQL syntax; check the handbook That corresponds

to your MySQL server version for the right syntax to use near 'CREATE TABLE `` 

nemarketing_registration. `Users` (`id` INT NOT NULL AUTO_INC 'at line 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:37:24.007

后加分隔符`USE newmakerting`，试试

```
USE newmakerting;         -- << this one

CREATE TABLE `nemarketing_registration`.`users` 
(
`id` INT NOT NULL AUTO_INCREMENT ,
`email` VARCHAR( 256 ) ,
`firstName` VARCHAR( 256 ) ,
`lastName` VARCHAR( 256 ) ,
`profession` VARCHAR( 256 ) ,
`company` VARCHAR( 256 ) ,
`country` VARCHAR( 256 ) ,
`ticketNumber` VARCHAR( 256 ) ,
`jobArea` VARCHAR( 256 ) ,
`networkingPeople` VARCHAR( 256 ) ,
`topics_networking` VARCHAR( 256 ) ,
`topics_research` VARCHAR( 256 ) ,
`topics_tochat` VARCHAR( 256 ) ,
`last_book` VARCHAR( 256 ) ,
 PRIMARY KEY ( `id` ) 
 ) CHARACTER SET utf8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:46:27.943

```
Please change as per below :
1) "USE newmakerting" => "USE newmakerting;"
   Here semicolon is missing.
2) "CREATE TABLE `nemarketing_registration`.`users`"  =>
    "CREATE TABLE `newmakerting`.`users`"
    Here database name is wrong .
ex:
USE newmakerting;
CREATE TABLE `newmakerting`.`users` (
`id` INT NOT NULL AUTO_INCREMENT ,
`email` VARCHAR( 256 ) ,
`firstName` VARCHAR( 256 ) ,
`lastName` VARCHAR( 256 ) ,
`profession` VARCHAR( 256 ) ,
`company` VARCHAR( 256 ) ,
`country` VARCHAR( 256 ) ,
`ticketNumber` VARCHAR( 256 ) ,
`jobArea` VARCHAR( 256 ) ,
`networkingPeople` VARCHAR( 256 ) ,
`topics_networking` VARCHAR( 256 ) ,
`topics_research` VARCHAR( 256 ) ,
`topics_tochat` VARCHAR( 256 ) ,
`last_book` VARCHAR( 256 ) ,
 PRIMARY KEY ( `id` ) 
 ) CHARACTER SET utf8; 
```

# embedded - 在微控制器上实现 Web 服务器

> ID：13303257
> 
> 赞同：2
> 
> 时间：2012-11-09T06:35:56.430
> 
> 标签：embedded, tcp-ip, atmega, atmega16

我正在尝试在微控制器上实现 Web 服务器作为自学项目。我正在考虑 Atmega16 和 Atmega88 作为主要选项。需要知道哪个是最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:11:54.907

[像这个？](http://tuxgraphics.org/electronics/200612/article06121.shtml)

有使用 Atmega88 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:17:02.700

也许显然是内存资源最多的一个。您的候选名单中的任何部分都不支持以太网，因此它们都不是特别适合网络应用程序；您将需要一个外部以太网解决方案——无论如何，其上的控制器可能比 ATMega16/88 更强大且更昂贵。

您当然可以使用 UART 和 PPP 或 SLIP，但这是相当严格的。

# android - 从我的 Android 手机应用程序从 Play Market 自动安装 Android 应用程序

> ID：13303259
> 
> 赞同：1
> 
> 时间：2012-11-09T06:36:06.647
> 
> 标签：android, download, google-play

我需要从我的 android 应用程序中执行以下操作，请给我一些想法以使其成为可能。

1.我知道要安装的软件包名称在谷歌市场上。现在，当我执行代码时，它应该启动该应用程序以在我的 android 手机中下载。

例如，Play google 也做了同样的事情。

在 google play 的网站上，如果我选择 facebook 进行安装，它将开始在我的 android 手机中下载所以我的问题是如何通过我安装的 android 应用程序直接从 Google play 下载应用程序。

最后，我发现从开发者网站安装 android 应用程序的内容如下。

[开发者分发 App Intent](http://developer.android.com/distribute/googleplay/promote/linking.html)。但是在该代码中，用户必须接受安装和期限按钮才能开始真正的下载应用程序，我不想

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:49:14.240

如果我理解您的问题，您希望您的应用程序可以替代 google play 应用程序，因为它可以直接从 google play 商店下载，而无需征求用户许可。这是不可能的。这是一项安全功能，android 必须询问手机用户是否可以下载某个应用程序。如果没有这个，就有可能在用户不知情的情况下安装恶意应用程序。

# asp.net - Asp.net：aspx 页面的 HttpApplication 上下文身份验证被无限次调用，并且页面永远不会加载

> ID：13303261
> 
> 赞同：0
> 
> 时间：2012-11-09T06:36:10.273
> 
> 标签：asp.net, httpcontext

我有一个 asp.net Web 应用程序，它在调用登录页面之前执行一些许可证检查......如果产品没有获得许可，那么它会导航到带有一些错误详细信息的 abc.aspx 页面。此许可证检查是通过 web.config 配置的 HttpModule。

我有一个用于上下文身份验证的事件处理程序。每当调用 abc.aspx 页面时，都会多次触发此事件，并且页面加载永远不会发生。

在初始化时，我使用此代码添加事件处理程序

```
context.AuthenticateRequest += new EventHandler 
```

当我使用 html 页面时，似乎不会出现此问题。即使我使用其他一些 aspx 页面，例如 xyz.aspx，问题仍然存在...

如何阻止此身份验证发生 n 次。我尝试过使用 HttpContext.Current.Response.End()，它会停止无限调用，但不会加载页面，页面显示为空白。

有人对这个问题有任何想法吗？

Global.asax 的片段。

 `````
<%@ Application Language="C#" Inherits="Microsoft.Practices.CompositeWeb.WebClientApplication" %>

<script runat="server">

    private static bool _initializedAlready = false;
    private static readonly Object s_lock = new Object();

    //fires once on asp.net worker process start
    protected override void Application_Start(object sender, EventArgs e)
    {

    }

    protected void Application_BeginRequest(object sender, EventArgs e)
    {
        if (_initializedAlready)
        {
            return;
        }

        lock (s_lock)
        {

            if (_initializedAlready)
            {
                return;
            }

            //custom initialization code
            base.Application_Start(sender, e);

            _initializedAlready = true;
        }
    }

    public override void Init()
    {
        base.Init();

       //initialize the license module here....

         licenseModule.Init(this);

    }

</script> 
````  `license模块的init()方法

```
 public void Init(HttpApplication context)
    {
        context.AuthenticateRequest += new EventHandler(context_AuthenticateRequest);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:14:15.027

我认为问题是由于您也在对 abc.aspx 进行身份验证。

当您转到一个页面并且许可证检查失败时，它会重定向到 abc.aspx。不幸的是，您没有免除 abc.aspx 的检查，它会检查自己，然后一次又一次地重定向到自己。

当页面不是“abc.aspx”时，您可以做的是仅在您的 Init() 方法中附加身份验证请求事件。就像是：

```
if(!context.Context.Request.RawUrl.Contains("abc.aspx"))
     context.AuthenticateRequest += new EventHandler(context_AuthenticateRequest); 
```

但是，如果您只想在登录页面上进行此检查，则最好将身份验证检查放在后面的登录页面代码上。``

# java - 如何在Java中将映射值转换为字符串

> ID：13303264
> 
> 赞同：1
> 
> 时间：2012-11-09T06:36:29.540
> 
> 标签：java, map

我能够以这种格式打印我的输出，`System.out.println(map.get("email"));//this is printing fine`但在将其分配给字符串变量后我无法打印相同的值。我试过：`String email=(String) map.get("email"); System.out.println("Email--"+email);//But this is not printing`
如何将地图值转换为字符串？请帮我。

我的完整代码：

```
String url = "https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token="
              + authResponse.accessToken; 
            final StringBuffer r = new StringBuffer(); 
            final URL u = new URL(url);
            final URLConnection uc = u.openConnection();
            final int end = 1000;
            InputStreamReader isr = null;
            BufferedReader br = null; 
            isr = new InputStreamReader(uc.getInputStream());
            br = new BufferedReader(isr);
            final int chk = 0; 
            String pat = "\"(.*)\": \"(.*)\",";
            Pattern pattern = Pattern.compile(pat);
            Matcher matcher = null;
            Map map = new HashMap();

            while ((url = br.readLine()) != null)
            {
                if ((chk >= 0) && ((chk < end))) {
                    matcher = pattern.matcher(url);
                    if(matcher.find()) {
                        map.put(matcher.group(1), matcher.group(2));
                    }
                    //r.append(url).append('\n');
                }
            }
              System.out.println(map.get("email")); 
              String email=(String) map.get("email"); 
              System.out.println(email); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T06:38:08.560

使用任何集合或 Map 时始终使用 Generic 类型，当然，除非您使用的 Java 版本早于`1.5`. 因此，将您的地图声明为： -

```
Map<String, String> map = new HashMap<String, String>(); 
```

然后你根本不需要类型转换。`map.get("email")`只会给你`String`类型结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:38:19.603

试试这个：

`String email=map.get("email").toString();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:38:11.760

使用`toString()`or `""`, `+`_

`String s = map.get("email").toString();`

**或者**

`String s = map.get("email")+"";`

**-**并且总是更喜欢使用`Generics`with `Collection`，因此**您将特定类型输入到集合中并从集合中获取该特定类型**。

**例如：**

```
Map<String, String> map = new HashMap<String, String>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:38:13.910

[http://java.dzone.com/articles/two-ways-convert-java-map](http://java.dzone.com/articles/two-ways-convert-java-map)。看看这个链接。还将地图值转换为字符串数组[将地图值转换为字符串数组](https://stackoverflow.com/questions/9328727/convert-map-values-into-string-array)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T06:39:49.703

如果您使用的是 java 1.5+，建议使用类型特定的 Map。您的地图减速将是`Map<String,String> map`。

```
Map<String,String> map = new HashMap<>(); // Diamond operator available in java 7 
String email= map.get("email");

Map<String,String> map = new HashMap<String,String>(); // for java 5+ 
String email= map.get("email"); 
```

# android - 异步任务在运行时在触摸屏幕时开始取消？

> ID：13303267
> 
> 赞同：-1
> 
> 时间：2012-11-09T06:36:38.487
> 
> 标签：android, android-asynctask

异步任务在运行时在触摸屏幕时开始取消。我已经在**三星 pop**中使用**android 2.3.6**测试了我的应用程序。在这个移动设备中，异步任务在运行时触摸屏幕时不会被取消。但是虽然我在**Sony u 中使用 android 4.0.1**对其进行了测试 我触摸屏幕异步任务已被取消。我试图用异步状态覆盖触摸事件。但它没有得到修复。我们该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:08:14.757

我找到了解决方案

我用

> dialog.setCanceledOnTouchOutside(false); dialog.setCancelable(false);

```
public class getcatogry extends AsyncTask<String, Void, Void> {

    private final ProgressDialog dialog = new ProgressDialog(
            MainActivity.this);

    // can use UI thread here
    protected void onPreExecute() {
        this.dialog.setMessage("Loading...");
        this.dialog.show();
        dialog.setCanceledOnTouchOutside(false);
        dialog.setCancelable(false);
    }

    // automatically done on worker thread (separate from UI thread)
    protected Void doInBackground(final String... args) {
        dialog.setCanceledOnTouchOutside(false);
        dialog.setCancelable(false);

        return null;
    }

    // can use UI thread here
    protected void onPostExecute(final Void unused) {
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();

        }
        // reset the output view by retrieving the new data
        // (note, this is a naive example, in the real world it might make
        // sense
        // to have a cache of the data and just append to what is already
        // there, or such
        // in order to cut down on expensive database operations)
        // new SelectDataTask().execute();
    }
} 
```

这样，即使在后按或触摸异步任务时，异步任务也不会被取消

# mysql - 谷歌日历更新表格

> ID：13303268
> 
> 赞同：3
> 
> 时间：2012-11-09T06:36:42.620
> 
> 标签：mysql, forms, google-calendar-api, gcal

我希望能够从以下表单自动更新 gcal：

A. 在我的表格中，我输入了我想在一年中保持联系的人的姓名和电话号码 ( *jon smith 555.555.1212* )。我希望帖子获取姓名和电话号码，并将它们插入 MySQL 表中。在那里，它们与另一个表中的数据合并，该表由 3 个独特的连续后续事件组成，这些事件根据表单提交日期相隔 28 天：

1.  jon smith 555.555.1212 + 午餐会议电话（自最初发布日期起 28 天）
2.  jon smith 555.555.1212 + 感兴趣主题的电子邮件信息（自最初发布日期起 56 天）
3.  jon smith 555.555.1212 + 致电办公室访问（自最初发布日期起 84 天）

这应该重复：

4.  jon smith 555.555.1212 + 午餐会议电话（自最初发布日期起 112 天）
5.  jon smith 555.555.1212 + 感兴趣主题的电子邮件信息（自最初发布日期起 140 天）
6.  jon smith 555.555.1212 + 致电办公室访问（自最初发布日期起 168 天）

B. 数据合并到 MySQL 表后，我想将表上创建的信息自动导出到带有提醒日期和时间的 Google 日历。

知道怎么做吗？我知道如何手动将 CSV 文件导入 gcal；是否可以通过 PHP 页面通过 MySQL 到 gcal 的形式来做到这一点，还是有更有效的方法？

如果重要的话，我使用 Godaddy 作为主机（linux）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:59:20.407

你知道有一个 API 吗？

[https://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

使用 php，您应该可以毫无问题地实现您的愿望。如果您对 PHP 有更具体的问题，请不要犹豫！

* * *

编辑：

*   [Zend 框架](http://framework.zend.com/downloads)支持 Google 数据 API
    您甚至可以加载 gdata API 的独立[文件](http://framework.zend.com/downloads/latest)（“其他下载”
    ）[教程](http://www.wikihow.com/Access-Google-Calendar-With-PHP-Using-Google-API)

*   谷歌[样本](http://code.google.com/p/google-api-php-client/wiki/Samples)页面

*   Montaia[的 Google-Calendar-API-PHP-Class](https://github.com/montania/Google-Calendar-API-PHP-Class)

# android - 视频缩略图返回 null

> ID：13303269
> 
> 赞同：7
> 
> 时间：2012-11-09T06:36:45.927
> 
> 标签：android

我正在从存储在我的 sd 卡中的视频创建缩略图，在网格视图中显示缩略图及其名称。在网格视图的 item selected 事件上弹出一个对话框并询问 x、y、right、bottom 位置，然后将其粘贴到 main 活动。我得到了视频文件，并尝试使用媒体存储创建缩略图，也将缩略图作为位图检索，但位图为空。在网格视图中显示视频名称，我可以选择相应的缩略图并且可以给出位置也可以将缩略图设置为主要活动。问题是位图为空且位图图像未显示（显示文本视频名称）。有什么问题 ？我想不通？请帮帮我？我的代码如下。提前致谢。

```
 if (f.isFile()) {
      if (fName.endsWith(".mpg")
    || fName.endsWith(".mov")
    || fName.endsWith(".wmv")
    || fName.endsWith(".rm")
    || fName.endsWith(".mp4")) {
    tv.setText(fName);
    path = f.getAbsolutePath();
    System.out.println("Video file path=>"+path);

 thumb = ThumbnailUtils.createVideoThumbnail(f.getAbsolutePath(),MediaStore.Video.Thumbnails.MICRO_KIND);

    if(thumb==null)
      {
         /**Every time it printing null**/
         System.out.println("Thumb is null");

      }
      iv.setImageBitmap(thumb); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T15:17:34.450

从`ThumbnailUtils.createVideoThumbnail`文档：`May return null if the video is corrupt or the format is not supported.`

默认情况下，几乎所有支持的格式都是 mp4 和 3gp。有关默认支持的媒体格式的完整列表，请参见此处： http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T20:34:32.650

If you are creating thumbnail from sd card video this would create `ThumbnailUtils.createVideoThumbnail` otherwise use a cursor.

[See this example](http://androidcodezs.blogspot.com/2013/10/android-thumbnail-from-video.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:01:31.150

```
Try this code. It is getting the thumbnail of videos from urls. instead of pass the path of sd card .it will help you . Dont forgot to add internet permission in manifest file.
public class VideoThumbnailActivity extends Activity {

    public static final String Downloader = null;
    static String uri1="http://daily3gp.com/vids/lucky_guy.3gp";
    static String uri2="http://daily3gp.com/vids/reporter_hit_by_plane.3gp";
    static String uri3="http://daily3gp.com/vids/motorcycle_wipesout_explodes.3gp";
    static String uri4="http://commonsware.com/misc/test2.3gp";
    public static  String uri_array[]={uri1,uri2,uri3,uri4,uri1,uri2,uri3,uri4,uri1,uri2,uri3,uri4};

    ImageView imageView;
    String url;
    Gallery ga1,ga2;

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        imageView = (ImageView)findViewById(R.id.imageView);
        ga1 = (Gallery)findViewById(R.id.gallery1);
        ga1.setAdapter(new ImageAdapter(getApplicationContext()));
        imageView.setImageBitmap(ThumbnailUtils.createVideoThumbnail(uri_array[0], MediaStore.Video.Thumbnails.FULL_SCREEN_KIND));

        //on click event on gallery
        ga1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View view, final int position,long arg3) {
             imageView.setImageBitmap(ThumbnailUtils.createVideoThumbnail(uri_array[position], MediaStore.Video.Thumbnails.FULL_SCREEN_KIND));

             //on click event on imageview to play video
             imageView.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View view) {
                                // TODO Auto-generated method stub
                                Intent intent = new Intent(getApplicationContext(),PlayActivity.class);
                                intent.putExtra("path",uri_array[position]);
                                startActivity(intent);
                            }
                        });

                        }

                });

            }

            public class ImageAdapter extends BaseAdapter {

                private Context ctx;
                int imageBackground;

                public ImageAdapter(Context c) {
                    ctx = c;
                    TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
                    imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
                    ta.recycle();
                }

                @Override
                public int getCount() {

                    return uri_array.length;

                }

                @Override
                public Object getItem(int arg0) {

                    return arg0;
                }

                @Override
                public long getItemId(int arg0) {

                    return arg0;
                }

                @Override
                public View getView(int position, View view, ViewGroup arg2) {

                    ImageView iv = new ImageView(ctx);
                    Bitmap curThumb = null;
                    curThumb = ThumbnailUtils.createVideoThumbnail(uri_array[position],MediaStore.Video.Thumbnails.FULL_SCREEN_KIND);
                    iv.setImageBitmap(curThumb);
                    iv.setScaleType(ImageView.ScaleType.FIT_XY);
                    iv.setLayoutParams(new Gallery.LayoutParams(150,120));
                    iv.setBackgroundResource(imageBackground);
                    return iv;
            }
        } 
```

让我知道您的问题是否已解决。

# php - 当文件已经存在时自动重命名文件.. PHP CODE

> ID：13303280
> 
> 赞同：0
> 
> 时间：2012-11-09T06:38:09.200
> 
> 标签：php

**上传.php**

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
Choose a file: <input name="uploadedfile" type="file" /><br />
Choose a file1: <input name="uploadedfile1" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

![上传表单的屏幕截图](../Images/c801737d8b4c8efb2ead8d7b16e33f8a.png)

^ *upload.php 的图片*^

**上传者.php**

```
<?php
mysql_select_db("test");

$target_path = "uploads/" . basename( $_FILES['uploadedfile']['name']);
$target_path1 = "upload1/" . basename( $_FILES['uploadedfile1']['name']);
$currentfile = $_FILES['uploadedfile']['name']; 
$currentfile1 = $_FILES['uploadedfile1']['name']; 

$dbfiles = mysql_query("SELECT * FROM new WHERE amount='$currentfile' || amount='$currentfile1'");
if(mysql_num_rows($dbfiles) > 0 )
{ 

}
else
{
        if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path))
        {
                echo "file1: ".$_FILES['uploadedfile']['name']."<br>";
                $file1 = basename( $_FILES['uploadedfile']['name']);
                mysql_query("insert into new (amount) values('$file1')");   
        }
        if(move_uploaded_file($_FILES['uploadedfile1']['tmp_name'], $target_path1))
        {
                echo "file2: ".basename( $_FILES['uploadedfile1']['name']);
                $file2 = basename( $_FILES['uploadedfile1']['name']);
                mysql_query("insert into new (amount) values('$file2')");   
        }
}
?> 
```

**介绍和问题**

此代码将允许用户上传 2 个文件，然后他们各自的文件名将保存到新*的（表名*），我需要将其保存在表中，以便我有历史记录谁是文件的上传者，并且可以简单地检索它或下载它。第一个按钮是文件中将保存在*uploads*文件夹中的uploadfile，然后下面的按钮是文件中将保存在*upload1*中的uploadfile1 ，当用户在这2个按钮中放置2个文件时，用户单击save，它将保存到他们准备好的文件夹（*uploads 或 upload1*），当用户仅在按钮 uploaderfile 或 uploaderfile1 中附加一个文件并单击上传文件/保存/提交时，它仍会将其文件名保存到*新表*并将文件保存在以下文件夹中（*upload1 的上传*）。

问题是当用户上传相同的文件名时，例如 abc.jpg 已经存在于*新*表和文件夹中（*upload1 的上传*），但有些用户也上传了 abc.jpg .. 问题出在文件夹中（*upload1*的上传）abc.jpg 将只有一个（一个 pcs..），因为相同的文件名..我认为解决方案是重命名，其中当前上传的 abc.jpg 将变为 abc_1.jpg，也在表*新*abc_1.jpg 将被保存..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:02:48.683

您不应该以原始名称保存文件。

更好的做法是在数据库中为文件分配一个唯一标识符，并为文件名使用相同的标识符。

然后有一个下载页面，它从数据库中检索文件路径和原始名称，并将其发送给用户`readfile`并设置相关标题：

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file_name).'"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: '.filesize($file_path));
ob_clean();
flush();
readfile($file_path);
die(); 
```

从安全的角度来看，这也更好，因为用户不再需要知道或访问服务器上的文件位置，因此如果他们上传任何恶意内容，他们将无法直接调用该文件。

**编辑：**

要应用此功能，您需要有一个用于上传文件的表格，其中包含一个自动递增的 ID 字段。

`mysql_query`然后，您可以使用（因为您已经在示例中使用它）将原始文件名和其他相关信息插入数据库。然后，您需要将查询传递给该查询，该查询`mysql_insert_id`将为您提供刚刚插入的行的唯一标识符。使用它来命名您的文件，然后在您的上传文件夹中添加“.dat”扩展名。

在下载时，有一个下载页面，它通过查询字符串或 post 参数获取一个 id，然后使用它在数据库中查找信息。您可以找出给定 ID 的文件名，因为这是您最初用来存储它的文件名。

获得文件路径和原始名称后，您可以使用上面的代码向用户展示下载内容（如果您将其称为其他名称，则在替换`$file_name`并使用您自己的参数之后）。`$file_location`

下载页面还需要处理是否允许用户下载文件的任何检查。

# ruby - Xpath 在 Nokogiri 中不返回任何内容

> ID：13303287
> 
> 赞同：8
> 
> 时间：2012-11-09T06:38:43.107
> 
> 标签：ruby, xml, nokogiri

> **可能重复：**
> [Nokogiri/Xpath 命名空间查询](https://stackoverflow.com/questions/4690737/nokogiri-xpath-namespace-query)

假设有 XML

```
<?xml version="1.0" encoding="utf-8"?> 
<SomeResponse xmlns="some_namespace"> 
  <Timestamp>......</Timestamp> 
  <Ack>Failure</Ack> 
  <Errors> 
    <ShortMessage>ShortMessage111.</ShortMessage> 
    <LongMessage>LongMessage111.</LongMessage> 
    <ErrorCode>1</ErrorCode> 
    <SeverityCode>Warning</SeverityCode> 
  </Errors> 
  <Errors> 
    <ShortMessage>ShortMessage222.</ShortMessage> 
    <LongMessage>LongMessage222.</LongMessage> 
    <ErrorCode>2</ErrorCode> 
    <SeverityCode>Warning2</SeverityCode> 
  </Errors>
  <!-- there might be many Errors nodes -->
  <Version>123</Version> 
  <Build>122345abt_3423423</Build> 
</SomeResponse> 
```

我尝试使用 Nokogiri 查找所有错误及其长短消息。

我正在做：

```
doc = Nokogiri.XML(xml)
errors = doc.xpath("//Errors")
puts errors

errors2 = doc.xpath("//Errors//ShortMessage")
puts errors 
```

它什么也没显示。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T06:51:53.550

如果您不想处理名称空间，可以使用

```
doc.remove_namespaces! 
```

它是懒惰的（= 高效），但[不推荐](http://tenderlovemaking.com/2009/04/23/namespaces-in-xml.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T06:48:25.570

您的 XML 在名称空间中，`some_namespace`但您的 XPath 没有名称空间绑定。您实际上是在查询与 XML 中不同的元素。

使用“[克拉克符号](http://www.xmlsh.org/QNameClarkNotation)”，您要尝试的元素是

```
{some_namespace}ShortMessage 
```

但您`ShortMessage`在无命名空间中查询。

仅仅因为没有前缀，即命名空间是默认命名空间，并不意味着你可以忽略它。

# android - 如何在 Android 的视频视图中播放视频？

> ID：13303289
> 
> 赞同：3
> 
> 时间：2012-11-09T06:38:49.213
> 
> 标签：android, video

我正在尝试播放以 H264 编码方案编码的视频。视频为高清（高分辨率）。当我播放低分辨率的视频时，它可以正常播放，但是当我播放高分辨率的视频时，它会显示错误，*抱歉视频无法播放*。

我想在我的视频视图中播放高分辨率视频文件，我知道这是可能的，因为在 android 中有一些视频播放器可以运行这种类型的文件，那为什么不是我的呢？

所以请告诉一个解决方案，我不想在*动作意图*中打开我的视频，它会在设备中打开已安装的视频播放器。我想在我的视频视图中运行高清视频，我使用了下面的代码，但它不起作用 -

```
videoMediaController = new MediaController(this);
Uri uri = Uri.parse(url);
videoView.setVideoPath(url);
videoMediaController.setMediaPlayer(videoView);
videoView.setMediaController(videoMediaController);
videoView.requestFocus();
videoView.start(); 
```

# ruby-on-rails - rails 2.3.14 + google adwords api = 麻烦

> ID：13303291
> 
> 赞同：0
> 
> 时间：2012-11-09T06:38:56.060
> 
> 标签：ruby-on-rails, google-ads-api

项目轨道 2.3.14

```
gem 'google-adwords-api', '0.7.2'

bundle install 
```

错误：

```
 Bundler could not find compatible versions for gem
 "rack": In Gemfile:
     google-adwords-api (= 0.7.2)  ruby depends on
     rack (~> 1.4) ruby
     rails (= 2.3.14) ruby depends on
     rack (1.1.0) 
```

是否可以在不使用更新版本的 Rails 的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:39:50.897

尝试这个..

捆绑执行捆绑安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:46:09.753

您可以在没有特定版本的情况下尝试它，以查看是否有任何兼容版本，例如 this`gem 'google-adwords-api'`而不是`gem 'google-adwords-api', '0.7.2'`.

# silverlight-5.0 - 当我从 listbox1 中选择一个国家/地区时，第二个列表框应显示所选国家/地区的州

> ID：13303293
> 
> 赞同：1
> 
> 时间：2012-11-09T06:38:59.777
> 
> 标签：silverlight-5.0

我正在使用 MVVM 模式。

当我从 listbox1 中选择一个国家时，第二个列表框将显示所选国家的状态。

国家列表框

```
 <pmControls:pmListBox  x:Name="countryListBox"  Grid.Row="1" Margin="3" ItemsSource="{Binding Countries}" SelectedItem="{Binding SelectedCountry,Mode=TwoWay}"  >
                <pmControls:pmListBox.ItemTemplate >
                    <DataTemplate >
                        <Button  Command="{Binding DataContext.GetAllStatesCommand,ElementName=countryListBox}"  Margin="3" Width="100" Height="25" Content="{Binding Title}" >                                            
                        </Button>

                    </DataTemplate>
                </pmControls:pmListBox.ItemTemplate>
            </pmControls:pmListBox> 
```

状态列表框

```
<pmControls:pmListBox x:Name="stateListBox" Grid.Row="1" Margin="3" ItemsSource="{Binding States}">

                    <pmControls:pmListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding StateTitle}" ></TextBlock>
                        </DataTemplate>
                    </pmControls:pmListBox.ItemTemplate>
                </pmControls:pmListBox> 
```

在 ModelView 这些是我的命令：

获取所有国家的命令：

```
public void getCountries()
{
    CountryServiceClient client = new CountryServiceClient();
client.GetCountryDetailsCompleted += (clientS, eventE) =>
{
    if (eventE.Error == null)
        {
        foreach (var item in eventE.Result)
        {
         countries.Add(item);
        }
    }
};
client.GetCountryDetailsAsync(); 
```

}

命令获取所选国家/地区的所有状态：

```
public void ExecutegetAllStatesCommand(EventToCommandArgs args)
{
    selectedState = new States();
    states = new ObservableCollection<States>();
            int cntry_id = this.SelectedCountry.Country_Id;

            StateServiceClient client = new StateServiceClient();
            client.GetStatesCompleted += (clientS, eventE) =>
            {
                if (eventE.Error == null)
                {
                    foreach (var item in eventE.Result)
                    {
                        states.Add(item);

                    }
                }
            };

        client.GetStatesAsync(cntry_id);
        } 
```

在这里，我在列表状态中正确获取了数据，但它没有出现在 Xaml 中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:14:13.117

您提到在视图模型中正确设置了“状态”，在这种情况下，问题可能是以下之一：

1.  我注意到您正在绑定到“States”（大写 S），并且您的代码设置为“States”（小写 S）。
2.  您是否`INotifyPropertyChanged`为 viewmodel 实现并调用 propertychanged 事件处理程序
3.  尝试处理要添加 State`CollectionChanged`的`ObservableCollection`，因为添加项目时 propertychanged 不会自动触发。

# liferay-6 - 迁移到 liferay 6.1.0 GA1 后图像和文档不可见

> ID：13303294
> 
> 赞同：0
> 
> 时间：2012-11-09T06:39:06.923
> 
> 标签：liferay-6

我从 liferay 5.2.3 升级到 6.0.6 ，成功完成，没有留下任何错误；但是当我从 6.0.6 升级到 6.1.0 GA1 时，无法看到图像和文档。我在迁移过程中所做的与图像和文档相关的步骤（仅描述了与文档相关的）。

在迁移到 6.0.6 期间，我在我的 portal-ext.prropeties 文件中写了以下几行

```
image.hook.impl=com.liferay.portal.image.FileSystemHook
image.hook.file.system.root.dir=${liferay.home}/data/images
dl.hook.impl=com.liferay.documentlibrary.util.FileSystemHook
dl.hook.file.system.root.dir=${liferay.home}/data/document_library 
```

我知道在 liferay 5.2.3 中我们已将图像和文档保存到文件系统。在此之后，我启动服务器并将旧权限迁移到 6。成功，我能够看到文档和图像。

现在轮到从 6.0.6 迁移到 6.1.0 GA1 ，因为我在这些行中写了

```
image.hook.impl=com.liferay.portal.image.FileSystemHook
image.hook.file.system.root.dir=${liferay.home}/data/images
dl.hook.impl=com.liferay.documentlibrary.util.FileSystemHook
dl.hook.file.system.root.dir=${liferay.home}/data/document_library 
```

启动tomcat，迁移权限到6，迁移成功后重启服务器，但看不到文件和图片。当试图访问内容中的文件时，在tomcat控制台中出现此错误

```
 Current URL /c/document_library/get_file?uuid=be4eecc7-8e9a-416c-aa4d-f3cbd855d759&groupId=14 generates exception: No file versions found for fileEntryId 61901
05:50:48,093 INFO  [PortalImpl:4894] com.liferay.portlet.documentlibrary.NoSuchFileVersionException: No file versions found for fileEntryId 61901
com.liferay.portlet.documentlibrary.NoSuchFileVersionException: No file versions found for fileEntryId 61901
    at com.liferay.portlet.documentlibrary.service.impl.DLFileVersionLocalServiceImpl.getLatestFileVersion(DLFileVersionLocalServiceImpl.java:67)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

有人可以建议我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:32:50.377

```
image.hook.impl=com.liferay.portal.image.FileSystemHook
image.hook.file.system.root.dir=${liferay.home}/data/images
dl.hook.impl=com.liferay.documentlibrary.util.FileSystemHook
dl.hook.file.system.root.dir=${liferay.home}/data/document_library 
```

用于告诉 liferay 6.1 从哪里迁移文档和图像

并告诉将它们迁移到您需要使用新属性的位置（这是您所缺少的）

```
dl.store.impl=com.liferay.portlet.documentlibrary.store.FileSystemStore
dl.store.file.system.root.dir=/path/to/liferay6.1/document_library 
```

升级过程会将图像和文档复制到新位置 (dl.store.file.system.root.dir)，因此请确保`dl.hook.file.system.root.dir`和`dl.store.file.system.root.dir`

编辑

以上适用于 6.1 EE。

对于 CE 版本，只有图像应保留在原始位置，并且必须手动将文档移动/复制到新位置。

# java - 检查android中的字符串数组中是否存在字符串时出现空指针异常？

> ID：13303296
> 
> 赞同：0
> 
> 时间：2012-11-09T06:39:23.627
> 
> 标签：java, android

我有一个应用程序，它需要在添加字符串之前检查字符串类型的数组中是否存在字符串以避免重复。为此，我编写了以下函数：

```
public boolean arrayHas(String[] arr, String str)
{
    for(int i=0;i<arr.length;i++)
    {
        if(arr[i].equals(str))
            return true;
    }
    return false;
} 
```

要调用此函数，我正在使用：

```
if(!arrayHas(contacts,str))
{
    contacts[i] = str;
    i++;
} 
```

contacts 和 str 声明如下

```
public static  String contacts[] = new String[]{};
String str = "";
Bundle bun = getIntent().getExtras();
str = bun.getString("key"); 
```

元素仅通过主代码添加到“联系人”，开头为空。我尝试添加一个 toast 来显示通过意图接收到的“str”的值，它工作正常。但是我在 arrayHas 函数的“if”语句中得到了 NullPointerException。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:45:07.497

两个问题：

**首先**：添加一个空检查`if`：

```
 if(arr[i] != null && arr[i].equals(str)) 
```

因为那个位置可能还没有分配一个有效的字符串，例如在 中`very beginning`，所以没有分配，`arr[0]`所以`null`比较将导致`NullPointerException`。

**第二**：我想你想`not ie. ! condition`在这个检查中检查：

```
 if(!arrayHas(contacts,str))
   {
     contacts[i] = str;
     i++;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:50:34.633

似乎您还没有用元素初始化数组。所以它们都是NULL。

在您的 arrayHas 函数中，检查您要比较的元素是否为空。

```
if(arr[i] != null && arr[i].equals(str) )
{
    // do your operation
} 
```

同样在调用 arrayHas 函数之前

```
if(arrayHas(contacts,str)) { } 
```

检查联系人是否为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:50:55.530

**-**我认为您正在尝试查找字符串是否存在于 Not 数组中。

**-**与 Array 相比，首次使用`Collections`将**更加灵活**。

**-**如果不存在，使用`Collections.contains()`方法查找**字符串。**

**例如，如果您正在使用** `List`：

```
List<String> list = new ArrayList<String>();
list.contains("string_to_be_found"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:46:20.207

改用这个：

```
String contacts[] = new String[10];
String str = "somethiung";
if(Arrays.asList(contacts).contains(str))
{
    contacts[i] = str;
    i++;
} 
```

`Arrays.asList(.).contains(.)`为您提供了一种更好的方法来测试数组中是否存在字符串。

顺便确保contacts和str被正确初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T06:46:31.657

只是对代码风格的建议。尝试防御性编程。，即。在这种情况下，您正在检查字符串`str`是否存在，`arr`请始终以相反的方式进行检查 ie., `str.equals(arr[i])`，这样就`NPE`不会引发不必要的 s 。

在这种情况下，可以在 2 点处引发 NPE，如果`arr`为 null`.length and .equals`将抛出 NPE。由此可见，要么`arr is null`，要么`arr[i] is null`。

找到`arr`填充数据的方法，有问题。

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T06:42:47.563

如果您想避免重复，请使用 a `java.util.Set<String>`，它会为您处理。`toArray()`如果您以后真的需要一个数组，您可以随时使用。

如果您关心元素的顺序，您还可以使用 a `java.util.List`，并检查元素是否存在`list.contains(str)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T06:47:47.190

您一定没有初始化您的联系人[]，但可能是这样的情况 str[0]=null 但 str[1]="something";

在那种情况下改变

```
arr[i].equals(str) to `str.equals(arr[i])` as str is less likely to be null 
```

# c# - 过滤从 sqldatasource 填充的下拉列表

> ID：13303297
> 
> 赞同：0
> 
> 时间：2012-11-09T06:39:24.703
> 
> 标签：c#, asp.net, gridview, drop-down-menu, sqldatasource

我有一个 gridview，它有 2 种列类型，它们是从 sqldatasources 填充的

TransportationMode(Disabled Dropdownlist), ContainerType(Enabled Dropdownlist),

```
Vessel  - 20DC
Vessel  - 20RF
Vessel  - 40DC
Vessel  - 40HC
Vessel  - 40RF
Air - Air pick up
Air   - Courier Courier
Truck   - Full Reefer Truck
Truck   - Full Truck
Vessel   - Partial Container
Vessel   - Partial Reefer Container
Truck   - Partial Reefer Truck
Truck   - Partial Truck
Railway - Wagon pick up 
```

问题是，例如，当我的 gridview 中一行的 TransportationMode 被选为“Air”时，那么如何过滤 ContainerType 并且只应在下拉列表中填充 Air Pick Up 和 Courier Courier。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:04:58.753

基本上你需要做的是拥有 3 个数据源

1.  一个用于网格视图
2.  一个用于主下拉列表
3.  最后一个为孩子下拉列表

一旦你`EditItemTemplate`为下拉菜单创建了字段，你就设置好了：

```
 <asp:SqlDataSource
        ID="transportAndContainerTypeDS"
        runat="server"
        ConnectionString="<%$ ConnectionStrings:transportConnection %>"
        SelectCommand="SELECT T.TransportationId, T.TransportationMode, CT.ContainerTypeId, CT.ContainerType FROM Transportation AS T INNER JOIN ContainerType AS CT ON T.TransportationId = CT.TransportationId"></asp:SqlDataSource>
    <asp:GridView ID="gvTransportation"
        runat="server"
        AutoGenerateEditButton="true"
        AutoGenerateColumns="False"
        DataSourceID="transportAndContainerTypeDS"
        DataKeyNames="TransportationId,ContainerTypeId">
        <Columns>
            <asp:BoundField DataField="TransportationId" Visible="false" />
            <asp:BoundField DataField="ContainerTypeId" Visible="false" />
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Eval("TransportationMode") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddlTransportation" runat="server"
                        DataSourceID="transportationDS"
                        AutoPostBack="true"
                        DataValueField="TransportationId"
                        DataTextField="TransportationMode"
                        SelectedValue='<%# Eval("TransportationId") %>'>
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="transportationDS" runat="server"
                        ConnectionString="<%$ ConnectionStrings:transportConnection %>"
                        SelectCommand="SELECT TransportationId,TransportationMode FROM Transportation"></asp:SqlDataSource>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Eval("ContainerType") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddlContainerType"
                        runat="server"
                        DataSourceID="containerDS"
                        DataValueField="ContainerTypeId"
                        DataTextField="ContainerType"
                        OnDataBound="ddlContainerType_DataBound" />
                    <asp:SqlDataSource ID="containerDS"
                        runat="server"
                        ConnectionString="<%$ ConnectionStrings:transportConnection %>"
                        SelectCommand="SELECT ContainerTypeId,TransportationId,ContainerType FROM ContainerType WHERE TransportationId = @TransportationId"
                        SelectCommandType="Text">
                        <SelectParameters>
                            <asp:ControlParameter
                                ControlID="ddlTransportation"
                                Name="TransportationId"
                                PropertyName="SelectedValue"
                                Type="Int32" />
                        </SelectParameters>
                    </asp:SqlDataSource>
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**后面的代码：**

```
protected void ddlContainerType_DataBound(object sender, EventArgs e)
{
    var ddlContainerType = (DropDownList)sender;
    ddlContainerType.Items.Insert(0, new ListItem("Make a Selection", String.Empty));
    ddlContainerType.SelectedIndex = 0;

    GridViewRow gvr = (GridViewRow)ddlContainerType.NamingContainer;
    if (gvr.DataItem != null)
    {
        string strModel = ((System.Data.DataRowView)gvr.DataItem)["ContainerType"].ToString();
        ddlContainerType.ClearSelection();

        var li = ddlContainerType.Items.FindByValue(strModel);
        if (li != null)
            li.Selected = true;
    }
} 
```

希望这可以帮助！

# matlab - 如何将新点投射到 PCA 新基础上？

> ID：13303300
> 
> 赞同：3
> 
> 时间：2012-11-09T06:39:32.213
> 
> 标签：matlab, pca, coordinate-transformation, bsxfun

例如，我有 9 个变量和 362 个案例。我进行了 PCA 计算，发现前 3 个 PCA 坐标对我来说已经足够了。

现在，我的 9 维结构中有新点，我想将其投影到主成分系统坐标。如何获得它的新坐标？

```
%# here is data (362x9)
load SomeData

[W, Y] = pca(data, 'VariableWeights', 'variance', 'Centered', true);

%# orthonormal coefficient matrix
W = diag(std(data))\W;

% Getting mean and weights of data (for future data)
[data, mu, sigma] = zscore(data);
sigma(sigma==0) = 1;

%# New point in original 9dim system
%# For example, it is the first point of our input data
x = data(1,:);
x = bsxfun(@minus,x, mu);
x = bsxfun(@rdivide, x, sigma);

%# New coordinates as principal components
y0 = Y(1,:); %# point we should get in result
y = (W*x')'; %# our result

%# error
sum(abs(y0 - y)) %# 142 => they are not the same point

%# plot
figure()
plot(y0,'g'); hold on;
plot(y,'r'); 
```

![在此处输入图像描述](../Images/68f7f824296a8548a9a091abe3c6f8e1.png)

如何获得投影到新主成分基础的新点的坐标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T10:37:36.360

将点转换为新基的主要谬误正在运行：

```
y = (W*x')'; 
```

维基百科说：

> 投影向量是矩阵的列
> 
> ```
> Y = W*·Z, 
> ```
> 
> 其中`Y is L×N, W is M×L, Z is M×N`,

但尺寸和尺寸的`pca()`回报`W``L×M``Y``NxL`

因此，Matlab 中的正确方程为：

```
y = x*W 
```

以下是更正后的代码：

```
[W, Y] = pca(data, 'VariableWeights', 'variance', 'Centered', true);
W = diag(std(data))\W;

%# Getting mean and weights of data (for future data)
[~, mu, we] = zscore(data);
we(we==0) = 1;

%# New point in original 9dim system
%# For example, it is the first point of our input data
x = data(1,:); 
x = bsxfun(@minus,x, mu);
x = bsxfun(@rdivide, x, we);

%# New coordinates as principal components
y = x*W;
y0 = Y(1,:);
sum(abs(y0 - y)) %# 4.1883e-14 ~= 0 
```

# jquery - 在无序列表中显示带有 html 标签的内容（可疑行为）

> ID：13303301
> 
> 赞同：-2
> 
> 时间：2012-11-09T06:39:38.263
> 
> 标签：jquery, post, html-lists

我有一个 LiveScript，它使用`jQuery.post()`函数从服务器文件 category.php 获取数据。服务器文件返回`<li><a href="#cellphones">cellphones</a></li><li><a href="#tablets">tablets</a></li><li><a href="#laptops">laptops</a></li>`，但是当我使用 jQuery LiveScript 将它添加到 html 无序列表中时。我也得到了带有内容的标签。

**脚本.js**

```
$.post("category.php", function(data) {
    $('#categories ul').text(data);
}); 
```

**索引.php**

```
<div id="categories">
    <ul>

    </ul>
</div> 
```

**铬显示..**

```
<li><a href="#cellphones">cellphones</a></li><li><a href="#tablets">tablets</a></li>   <li><a href="#laptops">laptops</a></li> 
```

**代替**

*   手机*   片剂*   笔记本电脑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:41:19.283

利用

```
$.post("category.php", function(data) {
    $('#categories ul').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:41:38.053

### 利用`.html()`

这并不奇怪。这是预期的行为。对于您的情况，请使用`.html()`：

```
$.post("category.php", function(data) {
    $('#categories ul').html(data);
}); 
```

### 来自 jQuery 的解释

**`.html()`**

> 在一个 HTML 文档中，`.html()`可以用来获取任何元素的内容。如果选择器表达式匹配多个元素，则只有第一个匹配项才会返回其 HTML 内容。

**`.text()`**

> 与`.html()`方法不同，`.text()`可以在 XML 和 HTML 文档中使用。该`.text()`方法的结果是一个字符串，其中包含所有匹配元素的组合文本。（由于不同浏览器中 HTML 解析器的差异，返回的文本在换行符和其他空白处可能会有所不同。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:42:01.467

```
$.post("category.php", function(data) {
$('#categories ul').text(data);
}); 
```

将文本更改为 html

```
$.post("category.php", function(data) {
  $('#categories ul').html(data);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T06:42:46.727

使用`$('#categories ul').html(data)`代替`$('#categories ul').text(data)`

# facebook - 如果申请被拒绝，Facebook 重命名回调参数

> ID：13303306
> 
> 赞同：0
> 
> 时间：2012-11-09T06:40:17.963
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我的网站上有一个`facebook login`按钮，其中包含数据。
所以我的`callback url`样子`http://my.domain/callback/facebook/?my_param=my_data`。

一旦用户进入应用程序权限页面并接受或拒绝我的应用程序，它总是会返回为

> `http://my.domain/callback/facebook/?code=code&my_param=my_data`＃公认

或者

> `http://my.domain/callback/facebook/?error=error_data&my_param=my_data`＃被拒绝

而且我今天刚刚注意到，当申请被拒绝时，Facebook 现在将我的重命名`my_param`为`0`。（即`http://my.domain/callback/facebook/?error=error_data&0=my_data`）

`developers.facebook.com`我在文档 中没有找到任何东西。

*   有人知道为什么会改变吗？
*   重命名参数的规则是什么？
*   是否有关于此更改的任何文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:55:43.203

Bug has been fixed by facebook.

[https://developers.facebook.com/bugs/292294647538649](https://developers.facebook.com/bugs/292294647538649)

# oracle-apex - 在 Oracle Apex IRR 部分页面刷新上调用 jQuery

> ID：13303307
> 
> 赞同：2
> 
> 时间：2012-11-09T06:40:38.677
> 
> 标签：oracle-apex

基于我问过的另一个问题：

[如何使用 Jquery 删除特定值的 <a href> 链接标记](https://stackoverflow.com/questions/13302268/how-to-remove-a-hreflink-tag-for-a-specific-value-using-jquery)

如果值为'N'，我需要删除a href 标签。

首次加载时一切正常，但由于我使用的是 Oracle ApEx 交互式报表 (IRR) 并执行部分页面刷新，我的另一个线程的解决方案不会再次触发，因此我所有值为“N”的值' 现在在它下面有一个我不想要的链接。

在 IRR 中，是否有基于列过滤触发 jQuery 代码的方法，例如在部分刷新报告时加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:18:31.887

当然是。

1.  动态动作：刷新后
    触发区域：选择您的 IR 区域

    真动作：执行javascript代码

    ```
    $('a', this.triggeringElement).filter(function(){
        return this.innerHTML === 'N';
    }).replaceWith('N'); 
    ```

2.  或者只是javascript代码

    ```
    $("#ir_region_id").bind("apexafterrefresh", function(){
       $('a', this).filter(function(){
          return this.innerHTML === 'N';
       }).replaceWith('N');
    }); 
    ```

尽管您可能希望将“a”选择器限制为实际的链接列。否则，IR 区域中的每个链接都会被选中。这是不必要的。

```
$('td[headers="my_link_column"] a') 
```

# android - 如何获取微调器控件选定的 ID

> ID：13303313
> 
> 赞同：0
> 
> 时间：2012-11-09T06:40:59.757
> 
> 标签：android

我有一个微调控件，我通过数据适配器连接它并通过它获取数据。

在课堂上，我想获取所选微调器控件的 id 。我怎样才能做到这一点 ？

我已经使用了这段代码，但是当我运行它时，它说有问题并且它关闭了。

```
Toast toast=Toast.makeText(MainActivity.this,sp.getSelectedItemId(),5000);
toast.setGravity(Gravity.CENTER,100, 0);
toast.show(); 
```

我尝试了 getSelectedItemId 和 getSelectedItemPosition 但它们都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:45:26.527

这里是你问题的答案

```
ArrayAdapter<String> adpt = new ArrayAdapter<String>this,android.R.layout.simple_spinner_item, strType);
adpt.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spnType.setAdapter(adpt);
spnType.setOnItemSelectedListener(new OnItemSelectedListener()
 {
  public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3)
  {
    int intItemType = spnType.getSelectedItemPosition();
  }
  public void onNothingSelected(AdapterView<?> arg0) 
  {

  }
}); 
```

这是获取微调器的选定位置的行

```
 int intItemType = spnType.getSelectedItemPosition(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:47:14.713

```
 Try this

            //Spinner OnItemClick Event here
            payfeeTabStudentNameSpinner.setOnItemSelectedListener(new OnItemSelectedListener(){

                @Override
                public void onItemSelected(AdapterView<?> parent, View view,
                        int position, long id) {

                String spinnerSelectedValue = parent.getItemAtPosition(position).toString();
                }
                @Override
                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub
                }
            });

Please let me know your problem is resolved or not. 
```

# c++ - 当数组动态分配内存时，为什么我们需要一个复制构造函数？

> ID：13303319
> 
> 赞同：1
> 
> 时间：2012-11-09T06:41:26.530
> 
> 标签：c++, dynamic, copy-constructor

> **可能的重复：**
> [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

```
Array(const Array &arraytoCopy)
:size(arraytoCopy.size)
{
    ptr=new int[size];
    for(i=0;i<size;i++)
        ptr[i]=arraytoCopy.ptr[i];
} 
```

如果我不提供复制构造函数会发生什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:43:31.287

将会发生的是，当您复制对象时，您将有多个实例指向同一个动态分配的数组。目前尚不清楚哪个实例应该负责在销毁时取消分配它。

如果该类应该拥有该数组，那么它将负责取消分配其资源。在这种情况下，它应该有一个复制构造函数和赋值运算符来复制数组的内容，以及一个调用`delete[]`它的析构函数。这被称为[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。在 C++11 中，它也应该有移动复制和移动赋值运算符。

如果该类不拥有该数组，则它可能一开始就不应该构造它。例如，它可以通过其构造函数接收指向外部分配数组的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:44:26.997

由于您有指向类中拥有的动态分配对象的原始指针，因此您必须正确提供复制构造函数和复制分配运算符函数。

考虑下面的类定义

```
class Array
{
public:
  Array()
  { 
     ptr = new int[10];
  }
  ~Array(){
     delete [] ptr;
  }
private:
  int *ptr;  
}; 
```

当您实例化 Array 的两个对象时：

```
Array a1, a2;
a1 = a2; 
```

现在`a1.ptr`指向与销毁 a1、a2 期间相同的内存地址`p2.ptr` ，ptr 内存将被删除两次，这是未定义的行为。

使用`std::vector<int> int_collection_;`是很好的解决方案，而不是使用原始指针。

```
class Array
    {
    public:
      Array()
      {           
      }
      ~Array(){             
      }
    private:
      std::vector<int> int_collection_;
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:50:46.103

如果您的意图是不允许复制您的类实例，您可以将您的复制构造函数定义为私有并且不提供实现，以便编译器可以捕获这些情况，例如

```
class Array
{
    ...
private:
    Array(const Array &arraytoCopy); // not implemented
}; 
```

在这种情况下，您不必担心上述指针所有权问题。

# javascript - 将 div 的 innerHTML 替换为

> ID：13303320
> 
> 赞同：1
> 
> 时间：2012-11-09T06:41:28.843
> 
> 标签：javascript, jsp

```
function loadForm() {
    alert("hai");
    document.getElementById("divid").innerHTML="<jsp:include page='publisherform.jsp'></jsp:include>";
}

<a name="publisher" href=# onclick="loadForm()" >PublisherManagement</a> 
```

在这里， jsp:include 正在页面加载本身工作....有人能说出原因吗？如何在点击时加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:46:16.353

答案是你不能，因为jsp代码在html和JS返回给客户端之前是在服务器上处理的。一旦呈现，您就不能再处理 JSP 代码。

要与服务器进行通信，您需要使用 Ajax。

或者，您可以使用 IFrame 加载另一个页面的内容。

# objective-c - 为 NSUInteger 返回 NSNotFound 是否可取？

> ID：13303323
> 
> 赞同：7
> 
> 时间：2012-11-09T06:41:49.893
> 
> 标签：objective-c, ios

我正在研究一个类别，`NSArray`我实现的其中一个函数旨在返回数组中的字符串数（或非数字）。这一切都很好，但我的问题是关于在`NSNotFound`输入数组的计数为零的情况下作为返回的使用。

苹果的文档状态：

> NSNotFound 通常由各种方法和函数使用，这些方法和函数在串行数据中搜索项目并返回索引，例如字符串对象中的字符或 NSArray 对象中的 id。

`indexOfObject:`如果我要用于不在数组中的项目，这完全有意义。但是，`NSNotFound`在下面演示的上下文中使用是否正确？当然，我可以返回零并收工，但看到`2147483647`并立即知​​道问题出在哪里会很有帮助。

```
- (NSUInteger)countOfStringsInArray {
    NSUInteger currentCount = 0;
    if ([self count] > 0) {
        for (id obj in self) {
            if (![obj integerValue]) {
                currentCount ++;
            }
        }
        return currentCount;
    }
    return NSNotFound;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:04:28.073

不，在这种情况下不是。示例中的方法返回一个*count*。*您会考虑在返回**index*的方法上使用/返回`NSNotFound`（例如），其中也是一个有效的索引，因此是一个错误的结果。*`0`*

 **所以“是的，你应该简单地返回 0 并且返回类型应该是无符号的（NSUInteger）”，因为*不*`NSNotFound`应该与计数相关联。这确实涵盖了您的案例，而不依赖于神奇的价值。

 *如果您喜欢知道问题出在哪里（我自己也经常这样做），我发现当集合为空时调用该方法是程序员错误更可取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:54:09.603

我不认为计数可以称为`NSNotFound`。计数只能是 0 或更多。在我看来，它永远不会***“找不到” 。***如果是这种情况，`[NSArray count]`应该`NSNotFound`在数组为空或数组为 nil 时返回，对吗？所以简而言之，我觉得`NSNotFound`在这种特殊情况下使用不是标准方式。至少苹果不会那样使用它。

可能您可以使用零作为默认情况，否则您可能必须定义自己的枚举来表示它。`NSNotFound`仅当您不能使用零作为默认值时才有用（对于这些情况，如果可以接受或 `NSNotFound`可以使用 -1 作为默认值，因为它表示`NSIntegerMax`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T07:22:05.123

我知道你来自哪里，特别是考虑到 NSNotFound 的建议用法。但是，对于继承此代码的后续开发人员，我认为您建议的实现并不直观。

我建议改用 NSRange 返回值。根据 Apple 的定义，NSRange 是“用于描述系列的一部分的结构——例如字符串中的字符或 NSArray 对象中的对象。” 这正是你所拥有的。

具体来说，NSRange 的 location 成员可以是您在数组中找到的第一个字符串的索引，而 length 成员可以是您找到的字符串的数量。

和其他返回 NSRange 的方法一样（例如，NSString:rangeOfString），如果没有找到字符串，您可以将位置设置为 NSNotFound。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:30:26.453

NSNotFound 用于无符号整数，因此您应该从 NSInteger 方法返回它，因为它会被缩短并且是错误的（可能）

那说：**你的方法'countOfStringsInArray'应该返回n NSUInteger（与nsarray.count相同）***

# .net - 程序集名称和它的文件名可以不同吗？

> ID：13303324
> 
> 赞同：11
> 
> 时间：2012-11-09T06:41:49.300
> 
> 标签：.net, visual-studio

我们遵循`CompanyName.ProductName.LibraryName`格式作为我们的程序集文件命名约定。但是对于 Windows 应用程序，上述格式的输出 exe 文件看起来很奇怪，看起来像这样：`Company.Product.Library.exe`. 我更喜欢这样`Library.exe`

是否可以在不更改程序集名称的情况下获得所需的可执行文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:51:38.903

试用此项目的属性并更改“程序集名称>>应用程序”选项卡

![在此处输入图像描述](../Images/12531efd6e0c5d062079e428f97b063e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-06T09:01:12.597

对于 .NET 框架，根据官方文档，答案是：这**取决于**您部署程序集的位置：

[https://docs.microsoft.com/en-us/dotnet/standard/assembly/names](https://docs.microsoft.com/en-us/dotnet/standard/assembly/names)

> 在 .NET Framework 中，如果将强名称程序集放在全局程序集缓存中，则程序集的文件名必须与程序集名称匹配，不包括文件扩展名，例如 .exe 或 .dll。例如，如果程序集的文件名为 myAssembly.dll，则程序集名称必须为 myAssembly。仅部署在根应用程序目录中的私有程序集可以具有与文件名不同的程序集名称。

# mysql - Hibernate JPA 不支持@TableGenerator 的“initialValue”元素吗？

> ID：13303338
> 
> 赞同：2
> 
> 时间：2012-11-09T06:42:54.080
> 
> 标签：mysql, hibernate, jpa-2.0

`@TableGenerator(name="Emp_Gen",table="ID_GEN", pkColumnName = "GEN_NAME",pkColumnValue = "Employee_GEN",valueColumnName = "GEN_VAL",initialValue = 1000,allocationSize = 100)`

一切正常，但`initialValue`效果不佳。下面是名为“employee”的表（注：使用MySql，Hibernate-JPA）

![一个名为的表](../Images/d1e4af5dd0ac32e7fae591ea29a0db09.png)

我认为第一行 'id' 是 1000，而不是 1，对吗？但如果是 1，第二行应该是 101.... 谁能帮帮我这个笨蛋？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T21:00:52.250

第一个值是 1 而不是 1001 是 Hibernate bug [HHH-4228](https://hibernate.atlassian.net/browse/HHH-4228)，状态为*Won't fix*。在您的情况下，正确的第一个值是 1001 而不是 1000，因为`initialValue`初始化存储返回的**最后一个**值的列（而不是要返回的下一个值）。

在 persistence.xml 中使用以下内容（如错误报告中所建议的）将解决第一个值的问题：

```
<property name="hibernate.id.new_generator_mappings" value="true"/> 
```

的含义`allocationSize`很可能在问题中被误解。这不是增加的步骤。这意味着从表中的一个数据库查询分配了多少值。这是相当优化的，以避免每次新实体需要 id 值时进行额外查询。

副产品是应用程序的重新启动通常会导致序列出现漏洞：

1.  初始值 = 1000，分配大小 = 100
2.  使用值 1001（=> valueColumn 中的值更新为 1100）。
3.  关闭并启动应用程序
4.  下一个值将是 1101，而不是 1002。

# php - Magento：从 1.3 升级到 1.7 后，toolbar.phtml 中缺少 Mage_Catalog_Block_Product_List_Toolbar 的集合

> ID：13303341
> 
> 赞同：0
> 
> 时间：2012-11-09T06:43:19.367
> 
> 标签：php, magento

升级后我收到错误：

```
Fatal error: Call to a member function getSize() on a non-object in ./app/design/frontend/base/default/template/catalog/product/list/toolbar.phtml on line 34 
```

违规线路：`<?php if($this->getCollection()->getSize()): ?>`

经过一些快速调试后，我发现 getCollection 返回 null。作为一种解决方法，我手动设置了集合：

```
$collection = Mage::getModel('catalog/product')->getCollection()
            ->addAttributeToSelect('*');
$this->setCollection($collection); 
```

我的问题，为什么不设置集合？一般会设置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:56:24.063

通常在父`catalog/product_list`块的`_beforeToHtml`方法中设置。

```
#File: app/code/core/Mage/Catalog/Block/Product/List.php
protected function _beforeToHtml()
{
    $toolbar = $this->getToolbarBlock();

    // called prepare sortable parameters
    $collection = $this->_getProductCollection();

    // use sortable parameters
    if ($orders = $this->getAvailableOrders()) {
        $toolbar->setAvailableOrders($orders);
    }
    if ($sort = $this->getSortBy()) {
        $toolbar->setDefaultOrder($sort);
    }
    if ($dir = $this->getDefaultDirection()) {
        $toolbar->setDefaultDirection($dir);
    }
    if ($modes = $this->getModes()) {
        $toolbar->setModes($modes);
    }

    // set collection to toolbar and apply sort
    $toolbar->setCollection($collection);

    $this->setChild('toolbar', $toolbar);
    Mage::dispatchEvent('catalog_block_product_list_collection', array(
        'collection' => $this->_getProductCollection()
    ));

    $this->_getProductCollection()->load();

    return parent::_beforeToHtml();
} 
```

特别是这一行。

```
$toolbar->setCollection($collection); 
```

我的猜测是您的系统已被大量修改，因此工具栏块不再`catalog/product_list`作为父级。

# java - 从给定的子节点获取父节点

> ID：13303345
> 
> 赞同：3
> 
> 时间：2012-11-09T06:44:03.077
> 
> 标签：java, swing, jtree, treenode

```
 public class TabularMibTreeModel extends DefaultTreeModel {
     public TabularMibTreeModel() {
         super(new DefaultMutableTreeNode("Tablular MIBs"));
         loadParentMibs();
     }

     @Override
     public void reload() {
         super.reload();
     }

     private void loadParentMibs() {
           try {
                 ResultSet rs=Application.getDBHandler().executeQuery(SQLQueries.SELECT_TABULARMIBS_PARENT);

               while(rs.next()){            
                    String entryOID = rs.getString("mt_oid");       
                    DefaultMutableTreeNode node=new DefaultMutableTreeNode(new MibNode(entryOID, "Parent"));
                    node.add(new DefaultMutableTreeNode(Boolean.TRUE));

                    ((DefaultMutableTreeNode) getRoot()).insert(node,((DefaultMutableTreeNode)getRoot()).getChildCount())

                     node=null;

                 }

          } catch (SQLException e) {
           e.printStackTrace();
         }
     }

 } 
```

我刚开始研究JTree。我创建了一个以 entryOID 作为父级的 jtree。实际上在后端 entryOID 有它的父级。我能得到这个参数吗？如何通过避免 entryOID 来显示它？请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:11:52.770

```
 private void loadParentMibs throws SQLException () {

   ResultSet resultSet = Application.getDBHandler()
     .executeQuery(SQLQueries.SELECT_TABULARMIBS_PARENT);

   DefaultMutableTreeNode root = (DefaultMutableTreeNode)getRoot();

   Map<String, DefaultMutableTreeNode> parentsMap
     = new HashMap<String, DefaultMutableTreeNode>();

   while( resultSet.next() ) {  
     String parentId = resultSet.getString("mt_oid");

     DefaultMutableTreeNode parent = parentsMap.get(parentId);
     if ( parent == null ) {
       parent = new DefaultMutableTreeNode( parentId );
       parentsMap.add( parentId, parent );
       root.add( parent );
     }

       // Are you sure, you want Boolean.TRUE leafs 
       //   in number of parent coincindence?
       // May be you want leafs to contains some 
       //   additional info from resultSet entity?
     DefaultMutableTreeNode leaf = new DefaultMutableTreeNode(Boolean.TRUE);
     parent.add(leaf);
   }

 } 
```

# lua - lua中的尾调用优化

> ID：13303347
> 
> 赞同：14
> 
> 时间：2012-11-09T06:44:13.563
> 
> 标签：lua, tail-recursion, tail-call-optimization

Lua声称它正确实现了尾调用，因此每次调用都不需要维护堆栈，因此允许无限递归，我尝试编写一个*求和*函数，一个不是尾调用，一个是尾调用：

**非尾随版本**

```
function sum(n)
    if n > 0 then
        return n + sum(n-1)
    end
end

print(sum(1000000)) 
```

stackoverflow 符合预期。

**尾声版**

```
function sum2(accu, n)
    if n > 0 then
        accu.value = accu.value + n
        sum2(accu, n-1)
    end
end
local accu = {value = 0}
sum2(accu, 1000000)
print(accu.value) 
```

我想在这种情况下不会有stackoverflow，因为它是一个尾调用，但由于stackoverflow它仍然失败：

```
/bin/lua/5.1.4/bin/lua: tailcall.lua:13: stack overflow
stack traceback:
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        ...
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:13: in function 'sum2'
        tailcall.lua:17: in main chunk
        [C]: ? 
```

那么是lua真的支持尾调用优化吗，还是我这里的函数其实没有尾调用呢？

我在 redhat 5 上使用 lua 5.1.4

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-09T07:53:39.280

Lua 中的尾调用**必须**具有以下形式

```
return fct(args) 
```

所以你的尾调用版本必须重写为：

```
function sum2(accu, n)
  if n > 0 then
    accu.value = accu.value + n
    return sum2(accu, n-1) --< note the return here
  end
end 
```

# asp.net - 如何在 asp.net 中创建分层 url？

> ID：13303349
> 
> 赞同：0
> 
> 时间：2012-11-09T06:44:19.800
> 
> 标签：asp.net, database, url-routing, hierarchical-data, taxonomy

我想为我的应用程序使用分层 url。如何创建？

例如我的数据库层次结构如下，

```
 My product table
     |
     |--> Electronics
             |
             |--> Television
                       |
                       |--> Led Tv
                               |
                               |--> Samsung Led Tv
                               |--> Philips Led Tv
                               |--> LG Led Tv 
```

我想创建分层网址，例如[http://mydomain.com/product/electronics/television/led_tv/samsung_led_tv](http://mydomain.com/product/electronics/television/led_tv/samsung_led_tv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:47:19.643

您正在寻找[URL-rewriting](http://en.wikipedia.org/wiki/Rewrite_engine)。

在 ASP.NET 中，您可以利用 IIS URL 重写模块来获取它：

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:49:54.583

使用 URL 重写

[http://weblogs.asp.net/owscott/archive/2012/11/07/url-rewrite-protocol-http-https-in-the-action.aspx](http://weblogs.asp.net/owscott/archive/2012/11/07/url-rewrite-protocol-http-https-in-the-action.aspx)

或者

用于 SEO（搜索引擎优化）友好 URL 的[ASP.NET MVC 。](http://www.asp.net/mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T08:56:15.797

我找到了一个关于我的问题的样本。[http://erraticdev.blogspot.com/2011/01/custom-aspnet-mvc-route-class-with.html](http://erraticdev.blogspot.com/2011/01/custom-aspnet-mvc-route-class-with.html)

# c# - 使用 C# 应用程序将数据插入 AS400 时出错

> ID：13303351
> 
> 赞同：0
> 
> 时间：2012-11-09T06:44:25.173
> 
> 标签：c#, .net, db2

我正在使用 .Net 框架 4.0。我有这样的源代码：

```
....
using (MySqlCommand cmd = new MySqlCommand())
{
   cmd.Connection = conn;
   String query = "SELECT a.process_id, a.prod_dt, a.vlt_dt, a.prod_month, a.karoseri, a.error_flag, a.created_by, date_format(a.created_dt, '%Y%m%d') as created_dt, a.updated_by, date_format(a.updated_dt, '%Y%m%d') as updated_dt FROM tb_t_vlt_web a " +
                        "WHERE a.process_id = '" + processId + "'";
                    DataTable dt = CSTDDBUtil.ExecuteQuery(query);
   if (dt.Rows.Count > 0)
   { 
      as400Con = CSTDDBUtil.GetAS400Connection();
      as400Con.Open();

      using (OdbcCommand as400Cmd = new OdbcCommand())
      {
          as400Cmd.Connection = as400Con;
          as400Cmd.CommandText = "INSERT INTO DCDLIB.TBTVLT(VLPRID, VLPRDT, VLVLDT, VLPRMO, VLKRCD, VLERFG, VLCRBY, VLCRDT, VLCHBY, VLCHDT) VALUES " +
                            "(?,?,?,?,?,?,?,?,?,?)";

          foreach (DataRow dr in dt.Rows)
          {
              as400Cmd.Parameters.Add("1", OdbcType.VarChar).Value = dr["process_id"].ToString();
              as400Cmd.Parameters.Add("2", OdbcType.Numeric).Value = dr["prod_dt"];
              as400Cmd.Parameters.Add("3", OdbcType.Numeric).Value = dr["vlt_dt"];
              as400Cmd.Parameters.Add("4", OdbcType.VarChar).Value = dr["prod_month"].ToString();
              as400Cmd.Parameters.Add("5", OdbcType.VarChar).Value = dr["karoseri"].ToString();
              as400Cmd.Parameters.Add("6", OdbcType.VarChar).Value = dr["error_flag"].ToString();
              as400Cmd.Parameters.Add("7", OdbcType.VarChar).Value = dr["created_by"].ToString();
              as400Cmd.Parameters.Add("8", OdbcType.Numeric).Value = dr["created_dt"];
              as400Cmd.Parameters.Add("9", OdbcType.VarChar).Value = dr["updated_by"].ToString();
              as400Cmd.Parameters.Add("10", OdbcType.Numeric).Value = dr["updated_dt"];

              as400Cmd.ExecuteNonQuery();
              as400Cmd.Parameters.Clear();
         }
         as400Cmd.Dispose();
     }
}
... Next Process Below ... 
```

当我执行程序时，出现了一个错误`as400Cmd.ExecuteNonQuery();`。错误是：

```
ERROR [00000] [IBM][System i Access ODBC Driver]Column 4: CWB0111 - Input data is too big to fit into field
ERROR [22001] [IBM][System i Access ODBC Driver]Column 4: Character data right truncation. 
```

然后，我检查了AS400，列大小没有问题。
我该如何解决这个错误..？

TBTVLT结构表 ![结构表 TBTVLT](../Images/81fe318bef506e28d704ca04c2e5a166.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:48:28.453

我们无法轻易说出实际问题是什么，因为您没有给我们错误消息，但*首先*要做的是停止这样做：

```
insertQuery = String.Format("INSERT INTO DCDLIB.TBTVLT(VLPRID, VLPRDT, VLVLDT, VLPRMO, VLKRCD, VLERFG, VLCRBY, VLCRDT, VLCHBY, VLCHDT) VALUES " +
    "('{0}',{1},{2},'{3}','{4}','{5}','{6}',{7},'{8}',{9})", 
```

*永远不要*通过将值插入 SQL 本身来构建 SQL 查询。相反，您将*SQL 参数化*，并将参数添加到命令中。

这将：

*   让您的 SQL 更易于阅读
*   避免 SQL 注入攻击
*   避免不必要的字符串转换

如果问题是由于日期/时间到字符串的转换，我一点也不感到惊讶。

有关示例，请参阅[“使用参数”](http://www.devart.com/dotconnect/mysql/docs/Parameters.html) MySql 文档。

# ibm-rational - IBM Rational 与 IBM Rational Rose 有什么不同？

> ID：13303354
> 
> 赞同：3
> 
> 时间：2012-11-09T06:44:27.467
> 
> 标签：ibm-rational, rational-rose

据我所知，Rational 是一个测试工具，而 Rational Rose 是一个建模工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:40:11.843

Rational 是一家为软件开发生命周期制造工具的公司。Rational Rose 就是由 Rational 构建的这样一种工具。

Rational 现在是 IBM 的一部分。请参阅 www.rational.com。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:40:28.770

Rational Software（一家大约 7 年前被 IBM 收购的公司）并且仍然是 IBM Software Group 中的一个品牌。Rational 产品组合非常广泛，专注于整体应用程序生命周期管理和系统管理解决方案。测试、质量管理、配置管理、移动开发、需求管理、变更管理、敏捷开发、大型机开发、企业现代化等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T06:44:38.510

IBM Rational Test Real Time 用于模块和单元测试，以及性能和内存分析。它主要是一个测试工具。对理性玫瑰一无所知。

# php - 从下拉菜单更改为多选打开框

> ID：13303357
> 
> 赞同：0
> 
> 时间：2012-11-09T06:44:50.657
> 
> 标签：php, loops, drop-down-menu, foreach, superglobals

我有一个下拉菜单，我想将其更改为多选框。如果您只选择 1 个选项（我之前的方式），下面的代码就可以工作，但是您选择 2 它只会显示两个选项中的 1 个，我怎样才能让它显示两个选项都被选中，这里是代码：

```
<?php $makes = array("volvo","Saab","Opel","Audi","BMW") ?>

<form method="post" name="store" action="<?php $_SERVER['PHP_SELF'] ?>" >
<select multiple="multiple" name="cars">
<?php foreach ($makes as $make){echo "<option value=\"$make\">". $make ."</option>";           $vehicles = $_POST['cars'];} ?>
    <input name="submit" type="submit">
    </select>
</form>
<?php 

if($_POST['submit']){
  echo $vehicles;
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:21:01.387

我希望我没看错，您想从 HTML 多选框中检索结果数组。

顺便说一句，您的代码片段不正确；HTML <form> 结束标记应该在结束 <select> 标记之后，我不确定为什么你的 PHP for() 循环中有以下内容：

```
$vehicles = $_POST['cars']; 
```

您需要将 HTML 标记的 name 属性设置为一个数组，如下所示（注意我没有测试此代码）：

```
<select multiple="multiple" name="cars[]">
<?php 
    foreach ($makes as $make) {
        echo "<option value=\"$make\">". $make ."</option>";
    }
?>
</select>

<?php 
    if($_POST['submit']) {
        print_r($_POST['cars']);
     }
?> 
```

[PHP.net - 如何从选择多个 HTML 标记中获取所有结果？](http://www.php.net/manual/en/faq.html.php#faq.html.select-multiple)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:22:58.627

您的问题尚不完全清楚，但我认为您的意思是以下代码仅回显一个值：

```
if($_POST['submit']){
  echo $vehicles;
} 
```

要将您选择的汽车变成一个数组，您需要`[]`在名称的末尾添加：

```
<select multiple="multiple" name="cars[]"> 
```

然后对于`echo`每个选择，您可以使用`foreach`循环：

```
foreach ($_POST['cars'] as $car)
    echo $car.'<br />'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:48:59.910

你可以试试 if($_POST['submit']){ print_r($vehicles); 如果有任何问题，请告诉我..

# joomla - 如何在 joomla 控制器中加载不同的视图？

> ID：13303358
> 
> 赞同：3
> 
> 时间：2012-11-09T06:44:53.470
> 
> 标签：joomla, joomla2.5

我有简单的线路，但它不起作用。

```
$this->getView($input->get('my_wiew', 'Sites', 'CMD'), 'HTML');
//some code
parent::display(); 
```

如果我简单地转到 url`index.php?option=com_my_component&view=sites`我得到我的视图，但默认情况下它不想加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T06:46:54.637

```
$view   = $this->getView('view_name', 'html'); //get the view
$view->assignRef('data', $data_from_model); // assign data from the model
$view->display(); // display the view 
```

[阅读更多](http://docs.joomla.org/API16%3aJController/getView)

# php - 在 PHP 中取消设置会话的最佳方法

> ID：13303361
> 
> 赞同：2
> 
> 时间：2012-11-09T06:44:57.233
> 
> 标签：php, session

清除登录会话的区别和最安全的方法是`PHP`什么？`log out`基本上会在用户单击我的应用程序时调用它。

我看到：

```
 session_destroy()
 session_unset() 
```

或者干脆做：

```
unset($_SESSION['my_key_1']);
unset($_SESSION['my_key_2']); 
```

什么是最好的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T06:50:49.247

**session_destroy**正在删除整个会话。

**session_unset**从会话中删除一个变量 - 会话仍然存在。只有数据被截断。

所以，如果你想释放内存**session_destroy**是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:51:30.023

我知道的最好的解决方案是使用`session_regenerate_id(true);`

这将删除当前会话数据并重新生成会话 ID。

分配一个新的会话 ID 是一个好主意，因为它有助于将用户视为一个全新的用户（以防您的代码中的某些内容依赖于会话 ID）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:52:10.723

该`session_unset()`函数释放当前注册的所有会话变量。意思是，它将这样做：

```
unset($_SESSION);
$_SESSION = array(); 
```

该`session_destroy()`功能将使整个会话无效！会议没有举行。

# ios - 无法确定 iPod 中的位置？

> ID：13303362
> 
> 赞同：1
> 
> 时间：2012-11-09T06:45:00.850
> 
> 标签：ios, maps, location, ipod

我有新的 iPod，在我的新 iPod 中打开地图应用程序，然后选择左上角的位置服务选项并加载几分之一秒，然后显示“无法确定位置”。然后我尝试重置网络设置并重置所有设置，但它没有帮助。也选择新的 Wi-Fi 网络，同样的事情发生了。如何解决这个问题？请帮我

提前致谢

![在此处输入图像描述](../Images/22abc3ecda6232d164781bc8f02e50c0.png)

![在此处输入图像描述](../Images/05ad9a3a68a8284b13790bf49e2dfc8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:42:13.753

[在苹果论坛](https://discussions.apple.com/thread/3986705?start=0&tstart=0)中查看这个答案。您的 iPod 可能没有 GPS 功能。这是那里提到的，

*GPS 信号与互联网和蜂窝电话网络是分开的并且完全不相关。GPS 信号直接来自 GPS 卫星。它们向 GPS 接收器提供纬度和经度信息。导航软件然后获取纬度/经度信息并将其转换为土地质量、道路、桥梁、高速公路、建筑物等。*

*大多数导航软件将地图直接存储在 iPad/iPod/iPhone 中，但缺点是地图必须定期更新（可能每两年一次）。使用该系统不需要互联网，但需要更新地图。*

*一些导航软件从 Internet 获取地图并需要 Internet 连接才能运行，但优点是地图始终是最新的。*

*WiFi+3G/4G iPad 和 iPhone 都有 GPS 接收器。只有 WiFi 的 iPad 和 iPod 没有，这些设备需要配件。*

# php - 分页不适用于自定义帖子类型

> ID：13303363
> 
> 赞同：0
> 
> 时间：2012-11-09T06:45:04.970
> 
> 标签：php, wordpress, wordpress-theming

我在我的网站中创建了自定义帖子类型“投资组合”。我能够创建类别、帖子...等。我创建了类别页面，该页面根据类别显示所有帖子，我通过使用 archive.php 中的以下代码块完成了它

```
<?php $cat = get_query_var('cat');?>
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; ?>
 <?php query_posts('showposts=3&post_type=portfolio&category_name=web-design&order=ASC&paged='.$paged); ?>    
 <div id="page" class="category_post grid_12">    
<?php while (have_posts() ) : the_post(); ?>
<div class="grid_3 single-post">
<div class="list-post">
<a class="read-more" href="<?php echo get_permalink()?>"><?php echo                   the_post_thumbnail(array(213,185));?></a>
</div>
 <p>
 <?php $content=trim(get_field("description"));
  echo $half_content=substr($content,0,88)."..." ?>
  <a class="category-link" href="<?php echo get_permalink()?>">Read more</a>
  </p>
</div>
  <?php endwhile; ?>
  <?php if(function_exists('wp_pagenavi')) { wp_pagenavi(); } ?> 
```

我也在使用 wp_pagenavi 插件进行分页。现在我的问题是，当我单击第 2 页即下一页时，它不会显示较新的帖子。请告诉我上面的代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:49:56.100

您的自定义帖子类型是否已将 has_archive 属性设置为 true？您是使用归档模板还是使用字符串来查询模板代码中的帖子？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T06:21:12.007

```
 Add custom_pagination function in your function.php file 

         `function custom_pagination($numpages = '', $pagerange = '', $paged='') {
             if (empty($pagerange)) {
                 $pagerange = 2;
             }
             global $paged;
                if (empty($paged)) {
                 $paged = 1;
             }
            if ($numpages == '') {
               global $wp_query;
                $numpages = $wp_query->max_num_pages;
                if(!$numpages) {
                 $numpages = 1;
               }
           }
           $pagination_args = array(
               'base'            => get_pagenum_link(1) . '%_%',
               'total'           => $numpages,
               'current'         => $paged,
              'show_all'             => False,
              'end_size'             => 1,
              'mid_size'             => $pagerange,
              'prev_next'        => False,
              'prev_text'        => __('&laquo;' , 'swift'),
              'next_text'        => __('&raquo;' , 'swift'),
              'type'             => 'array',
              'add_args'             => false,
              'add_fragment'     => ''
             ); 
              $paginate_links = paginate_links($pagination_args);
               echo '<div class="Pagination-Num"><ul>';
                  foreach ( $paginate_links as $paginate_link ) {
                         echo "<li> $paginate_link </li>";
                    }
                echo '</ul></div>';
        }
         `

  And In your Custom page template add the following code...

  <?php
    /**
     * Template Name: Custom Page
     * The custom page template file
     */
 ?>

    <?php get_header(); ?>

    <h2>Posts</h2>

    <?php 

      $paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;

      $custom_args = array(
          'post_type' => 'post',
          'posts_per_page' => 2,
          'paged' => $paged
        );

      $custom_query = new WP_Query( $custom_args ); ?>

      <?php if ( $custom_query->have_posts() ) : ?>

        <!-- the loop -->
        <?php while ( $custom_query->have_posts() ) : $custom_query->the_post(); ?>
          <article class="loop">
            <h3><?php the_title(); ?></h3>
            <div class="content">
              <?php the_excerpt(); ?>
            </div>
          </article>
        <?php endwhile; ?>
        <!-- end of the loop -->

        <!-- pagination here -->
        <?php
          if (function_exists(custom_pagination)) {
            custom_pagination($custom_query->max_num_pages,"",$paged);
          }
        ?>

      <?php wp_reset_postdata(); ?>

      <?php else:  ?>
        <p><?php _e( 'Sorry, no posts matched your criteria.' ); ?></p>
      <?php endif; ?>

    <?php get_footer(); ?> 
```

我相信它会起作用的。

# r - r 参考类——它们有静态字段成员/变量吗？

> ID：13303369
> 
> 赞同：2
> 
> 时间：2012-11-09T06:45:37.447
> 
> 标签：r, reference-class

我一直在玩一点 R 的 R5 类系统，看看它能做什么，不能做什么。在那个过程中，我偶然发现了看起来像静态类字段成员的东西（它似乎不在文档中 - 但我可能会错过它）

*[2014 更新]*
**警告！！！**：以下代码不适用于 R 版本 >= 3.0
这篇文章、其答案，尤其是评论提供了有关 R5 OO 系统和 R 语言的有用见解和提醒。然而，培养直接使用 R5 类实例的环境的习惯可能是一个坏主意。
*[2014年底更新]*

在下面的代码中，第一个字段是实例字段变量的经典定义。第二个定义似乎是使用访问器方法创建一个静态类字段。我想知道这种用法是否符合犹太教规（或者我的代码示例只是巧合）。第三个字段使用使用访问器方法创建一个准私有的即时字段变量。

```
assertClass <- function(x, className, R5check=FALSE) {
    # simple utility function
    stopifnot(class(x)[1] == className)
    if(R5check) stopifnot(is(x, 'envRefClass'))
}

A <- setRefClass('A',
    fields = list(
        # 1\. public, typed, instance field
        myPublicInstanceVar = 'character',

        # 2\. this assignment appears static
        #    but if the field me.static.private
        #    was declared in the field list
        #    it would be a local instance var
        myPrivateStaticVar = function(x) {
            if (!missing(x)) {
                assertClass(x, 'character')
                me.static.private <<- x
            }
            me.static.private
        },

        # 3\. quasi-private, typed, instance field
        myPrivateInstanceVar = function(x) {
            if (!missing(x)) {
                assertClass(x, 'character')
                .self$me.private <<- x
            }
            .self$me.private
        }
    ),

    methods = list(
        initialize = function (c='default') {
            myPublicInstanceVar <<- c
            myPrivateStaticVar <<- c
            myPrivateInstanceVar <<- c
        }
    )
)

# test instantiation
instance1.of.A <- A$new('first instance')
str(instance1.of.A)

instance2.of.A <- A$new('second instance')
str(instance1.of.A)
str(instance2.of.A)

instance3.of.A <- getRefClass('A')$new('third instance')
instance3.of.A$myPrivateStaticVar <- 'Third instance - changed'
print(instance1.of.A$myPrivateStaticVar)
print(instance2.of.A$myPrivateStaticVar)
print(instance3.of.A$myPrivateStaticVar)
str(instance1.of.A)
str(instance2.of.A)
str(instance3.of.A)

# but not really private ...
instance1.of.A$myPublicInstanceVar # works
instance1.of.A$me.static.private   # DOES NOT WORK - where is this variable stored 
instance1.of.A$me.private          # works

# till death do us part
instance3.of.A <- NULL
gc()
str(instance1.of.A)
str(instance2.of.A)
str(instance3.of.A) 
```

如果您运行此代码 - 您可以看到第二个字段变量似乎作为静态类成员运行。对我来说不太清楚的是参考类保留该字段的位置（因此我在上面倒数第二行中的评论）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:02:11.373

简短的回答——基于上面哈德利的评论——是否定的。R 的引用类没有静态变量。

# iphone - 如何在将每张图片保存在 iPhone 的照片库中之前为其命名

> ID：13303370
> 
> 赞同：2
> 
> 时间：2012-11-09T06:45:37.833
> 
> 标签：iphone

我是 iphone 编程新手。任何人都可以告诉我如何为照片库中的每张图片命名。我想以特定名称保存图片。

请任何人告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:49:01.417

试试这个代码..

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"yourImageName.png"];

NSError * error = nil;
[imageData writeToFile:path options:NSDataWritingAtomic error:&error];

if (error != nil) {
    NSLog(@"Error: %@", error);
    return;
} 
```

# d3.js - d3js - 如何正确设置阿尔伯斯投影？

> ID：13303371
> 
> 赞同：9
> 
> 时间：2012-11-09T06:45:42.403
> 
> 标签：d3.js

我有一些日本的 geojson 数据，我设法在墨卡托投影上正确定位，但我对如何使用阿尔伯斯投影正确定位它有点迷茫，除了反复试验。

有没有好的工具可以使用？

块示例：[http ://bl.ocks.org/4043986](http://bl.ocks.org/4043986)

长，日本的纬度（[维基百科](http://en.wikipedia.org/wiki/Japan)）：

*   纬度 24° - 46°N,
*   经度 122° - 146°E。

geojson 链接：[https ://gist.github.com/raw/4043986/f53b85ab0af1585cd0461b4865ca4acd1fb79e9f/japan.json](https://gist.github.com/raw/4043986/f53b85ab0af1585cd0461b4865ca4acd1fb79e9f/japan.json)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T16:16:48.910

截至目前，它是 D3.js 的第 3 版。可能值得查看 github 上的原始源[albers.js](https://github.com/mbostock/d3/blob/master/src/geo/albers.js)，其中包含：

```
d3.geo.albers = function() {
    return d3.geo.conicEqualArea()
      .parallels([29.5, 45.5])
      .rotate([98, 0])
      .center([0, 38])
      .scale(1000);
}; 
```

现在，d3.js 使用`projection.rotate`和的组合`projection.center`将投影中心放置在西经 98°、北纬 38°（在[堪萨斯州哈钦森](http://en.wikipedia.org/wiki/Hutchinson,_Kansas)附近）。

从[Geo Projections API](https://github.com/mbostock/d3/wiki/Geo-Projections#wiki-conicEqualArea_parallels)中，`d3.geo.conicEqualArea() .parallels([29.5, 45.5])`分别设置 Albers 投影的两个标准平行纬度 29.5°N 和 45.5°N。但是什么是两个标准平行线？

要了解平行设置是什么，需要知道阿尔伯斯投影是一种圆锥投影。

*圆锥投影将球面地球的信息投影到一个圆锥体上，该圆锥体要么在一个平行线上与地球相切，要么在两个标准平行线上相割。*

![在此处输入图像描述](../Images/50f6631df74606b0e42566d1194878fc.png)

选择最佳标准平行线设置似乎是一项微妙的任务，其目标是在曲面之间映射时最小化投影失真。无论如何，选择两个值来接近一个国家的顶部/底部边缘在直觉上是好的，因为它有助于最小化包围一个国家的[圆锥/球体]表面之间的距离。 ![在此处输入图像描述](../Images/ba5ab209170f7be9de9179a1bd5fb4d8.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T07:08:22.593

我通过存储库找到了答案——工具就在那里！

1.  [从github 存储](https://github.com/mbostock/d3)库克隆d3.js。
2.  编辑[/d3/examples/albers.html 第 53 行](https://github.com/d3/d3/blob/cdffe18d383e47f77d6388f875a377539b20dcd2/examples/albers/albers.html#L53)以指向您的 GEOJSON 文件：
3.  将原点长/纬度滑块放在您所在国家/地区的中心（对我来说，它是 134° / 25°）
4.  将平行线更改为尽可能靠近您所在国家/地区的边缘。
5.  将比例和偏移调整到一个不错的大小和位置。

其他预测也有类似的工具。

编辑：存储库已更改（并且不断更改），因此我创建了一个要点来保留示例：[https ://gist.github.com/4552802](https://gist.github.com/4552802)

这些示例不再是 github 存储库的一部分。

# css - 在引导程序中超出我的 请告诉我，我按行流体创建了一个三列，但是我在第二列中的表对我来说非常大如果我将此 DIV 设为class="container"或其他类 - 我的第三个 div 移到底部，这对我不利。 也许你给我建议，我可以做些什么来将我的第三列模板保存在一行（屏幕）中。 ps这是我的问题，例 问问题 问问题 2012-11-09T06:45:48.600 102 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 请告诉我，我按行流体创建了一个三列，但是我在第二列中的表对我来说非常大如果我将此 DIV 设为class="container"或其他类 - 我的第三个 div 移到底部，这对我不利。 也许你给我建议，我可以做些什么来将我的第三列模板保存在一行（屏幕）中。 ps这是我的问题，例如，在低分辨率表中会过大： http:// bit.ly/PIr4kr - dead link 您可以在没有特定版本的情况下尝试它，以查看是否有任何兼容版本，例如 thisgem 'google-adwords-api'而不是gem 'google-adwords-api', '0.7.2'. csstwitter-bootstrap 4 2 回答 2 This answer is useful 0 您需要转入单词“Конфекционированные”，例如“Конфекциони-рованные” 表中也有错误 Конфекционированные кабели для систем передачи сигналов 使用 colspan="9" 而不是 colspan="8" 更新：font-size在th大文本中可能会减少更多内容td 于 2012-11-09T07:25:33.853 回答 This answer is useful 0 container width就是这样，960px它就下来了。您需要设置width跨度。它们在引导程序中有默认宽度。所以你可以设置任何你想要的宽度。 如果前span7宽度是640px;意味着你可以设置 .span7 { width: 600px; } 这样，您可以将三个跨度设置在一行中。 于 2012-11-09T06:50:41.790 回答 Related 1 objective-c - 有没有办法阻止用户在应用程序之外更新 iCal？ 0 c# - RavenDB - 全文搜索的索引创建，尝试投影字段 1 oracle - 表为空时序列从 1 开始 1 asp.net - Asp.Net 导出到 Excel 错误：加载期间出现问题，缺少 .css 文件 2 javascript - 接受脚本中的图像 3 c# - 如何在 Roslyn 中为方法创建没有 ref 或 out 的命名参数？ 1 django - 这是文档中的错误吗？ 3 pdf - 在浏览器中显示 PDF 时可以隐藏 Adob e 浮动工具栏吗？ 1 android - 带有 Dojo 和 geodjango 的 Android 应用程序 2 android - AsyncTask 完成后重新启动一个完整的 Android 应用程序 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13303372
> 
> 赞同：0
> 
> 时间：
> 
> 标签：css, twitter-bootstrap

请告诉我，我按行流体创建了一个三列，但是我在第二列中的表对我来说非常大`<div class="span7">` 如果我将此 DIV 设为`class="container"`或其他类 - 我的第三个 div 移到底部，这对我不利。

也许你给我建议，我可以做些什么来将我的第三列模板保存在一行（屏幕）中。

ps这是我的问题，例如，在低分辨率表中会过大：

```
 http:// bit.ly/PIr4kr   - dead link 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:25:33.853

您需要转入单词“Конфекционированные”，例如“Конфекциони-рованные”

表中也有错误

```
<tr>
    <td colspan="9">Конфекционированные кабели для систем передачи сигналов</td>
</tr> 
```

使用 colspan="9" 而不是 colspan="8"

**更新：**`font-size`在`th`大文本中可能会减少更多内容`td`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:50:41.790

`container width`就是这样，`960px`它就下来了。您需要设置`width`跨度。它们在引导程序中有默认宽度。所以你可以设置任何你想要的宽度。

如果前`span7`宽度是`640px;`意味着你可以设置

```
.span7 {
width: 600px;
} 
```

这样，您可以将三个跨度设置在一行中。

# django-templates - Django父链接到孩子

> ID：13303384
> 
> 赞同：0
> 
> 时间：2012-11-09T06:46:47.860
> 
> 标签：django-templates

我有2个模型。

```
class Unit(models.Model):
    title = models.CharField(max_length=60)
    def __unicode__(self):
        return self.title

class UniDoc(models.Model):
    title = models.CharField(max_length=100, blank=True, null=True)
    units = models.ManyToManyField(Unit, blank=True)
    file = models.FileField(upload_to="uploads/")
    author = models.ForeignKey(User, null=True, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    def __unicode__(self):
        return self.file.name 
```

如何在模板中的链接 ti 单元上获取 unidoc 列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:54:12.803

Django 提供[反向关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)：

```
u = Unit.objects.get(pk=1)
u.unidoc_set.all() 
```

所以在你的模板中，如果你`u`从上面传入：

```
{% for i in u.unidoc_set.all %}
   {{ i.title }}
{% endfor %} 
```

# java - 如何在java中验证重复的单元格

> ID：13303388
> 
> 赞同：-4
> 
> 时间：2012-11-09T06:47:01.543
> 
> 标签：java

我在 excel 文件中的输入，如单元格 1 id、单元格 2 id。这里重复的单元格值 id 使用 java 代码在 excel 中删除。如果任何熟悉代码的人告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:50:48.443

您可以使用 Apache POI 处理 excel 文件。[http://poi.apache.org/](http://poi.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:54:14.493

如果你想做类似的事情，那么对于 java 来说，有一个**[Apache POI——Microsoft Documents 的 Java API，](http://poi.apache.org/)** 它的剂量如下：

> Apache POI 项目的任务是创建和维护 Java API，用于处理基于 Office Open XML 标准 (OOXML) 和 Microsoft 的 OLE 2 复合文档格式 (OLE2) 的各种文件格式。简而言之，您可以使用 Java 读写 MS Excel 文件。此外，您可以使用 Java 读写 MS Word 和 MS PowerPoint 文件。Apache POI 是您的 Java Excel 解决方案（适用于 Excel 97-2008）。我们有完整的 API 用于移植其他 OOXML 和 OLE2 格式，欢迎其他人参与。

# php - zend 表单自定义验证

> ID：13303389
> 
> 赞同：0
> 
> 时间：2012-11-09T06:47:06.337
> 
> 标签：php, zend-framework, zend-form

在我的控制器中，我有

```
if(isset($username) && trim($username)!=='')
{
    $exist  = $user_obj->checkUsernameExist($username);
        if($exist   ==  '1')
        {
            $form->getElement('username')->addError('This username exists.');
        }
}
if ($form->isValid($_POST) ) {
$user_obj->insertUser($_POST);
$this->_helper->flashMessenger->addMessage('User Added Successfully.');
 $this->_redirect('/users/usersadministration/');
 exit();    
}else { //echo 'failure';
     //print_r($form->getErrors());
 } 
```

但即使`$exist`值为`1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:19:56.157

尝试

```
if(isset($username) && trim($username)!=='')
{
    $exist  = $user_obj->checkUsernameExist($username);
        if($exist   ==  '1')
        {
            $form->getElement('username')->addError('This username exists.');
            $form->markAsError();
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:28:03.540

您的代码看起来正确，您需要提供更多代码行以供审核。

# python - 在 Django 中处理 subprocess.call()

> ID：13303390
> 
> 赞同：2
> 
> 时间：2012-11-09T06:47:12.173
> 
> 标签：python, django, subprocess

我正在开发的应用程序的简单想法是用户给出 Linux 命令，Linux 命令的结果将显示在网络浏览器中。这是我的views.py：

```
from django.shortcuts import render_to_response
from django.http import HttpResponseRedirect
from django.template import RequestContext
import subprocess

globalcmd = 0 
globalresult = 0
def ls(request):
    if request.method == 'POST':
        globalcmd = request.POST.get('command', False)
        globalresult = subprocess.call(['globalcmd'], shell=True)
        return HttpResponseRedirect('/thanks/')
    else:
        pass
    return render_to_response('form.html', {'cmd':'cmd'}, context_instance=RequestContext(request))

def show_template(request):
    return render_to_response('thanks.html', {'globalok':globalresult}, context_instance=RequestContext(request)) 
```

我从由视图“ls”处理的 form.html 获得输入。作为用户，我只是在使用 ls 命令进行测试。每当我按下 ls 命令时，它都会由 suprocess.call 处理并存储在 globalresult 中，稍后在thanks.html 中调用它。我的输出是 0。我做错了什么？这是Thanks.html：

```
<h1>
{{ globalresult }}
</h1> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T07:31:56.930

检查[您正在调用的函数](http://docs.python.org/2/library/subprocess.html#subprocess.call)的文档，结果是调用的返回码，而不是命令本身的输出。所以，我认为你的代码完全符合它的要求。

也许您打算调用[subprocess.check_output](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)？

附带说明一下，要非常小心这种网络终端交互；如果您在没有适当安全性的情况下将此 Web 应用程序公开到 Internet，将会发生不好的事情......但您可能知道这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:47:28.433

您没有传递`globalresult`给 show_template() 中的 Thanks.html 模板

你可能想要

```
return render_to_response('thanks.html', {'globalresult':globalresult}, context_instance=RequestContext(request)) 
```

如果懒惰你也可以

```
return render_to_response('thanks.html', locals(), context_instance=RequestContext(request)) 
```

...尽管您似乎正在尝试重定向以访问感谢页面（？）。在这种情况下，最好立即呈现感谢视图

例如替换这一行

```
return HttpResponseRedirect('/thanks/') 
```

上面的两行中的任何一个 ^ 在 ma answer

# java - 需要分配想法

> ID：13303399
> 
> 赞同：-2
> 
> 时间：2012-11-09T06:47:51.013
> 
> 标签：java, class, methods

我的作业需要帮助。我需要编写将成绩转化为成绩点的课堂程序。如果成绩有 + 像 A+，它将增加 0.3 和 - 将减少 0.3。

```
private static final double GradePoint = 0;
private static Scanner input;

public static void main(String [] args)
{
    String grade ;      
    double GradePoint = 0;

    System.out.print("Please enter your grade:  ");
    input = new Scanner(System.in);
    grade = input.nextLine();

    switch(grade)
    {
        case "A": 
        case "a": GradePoint = 4; break;
        case "B":
        case "b": GradePoint = 3; break;
        case "C":
        case "c": GradePoint = 2; break;
        case "D":
        case "d": GradePoint = 1; break;
        case "F":
        case "f": GradePoint = 0; break;
    }    

    System.out.print("Your grade is: "+GradePoint);
}

public double getGradePoint(String grade)
{
    return GradePoint;

} 
```

我不明白的是如何使用该方法进行计算。我还是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:54:10.363

```
I have to use CLASS and method*public double getGradePoint(String grade)* to
return the grade point of grade entered. 
```

您需要将整个代码从 main() 转移到 getGradePoint(String Grade);

您的 switch case`switch(grade)`也不适用于 "A+" 这样的值，因为没有与字符串 "A+" 匹配的情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:25:08.050

我很无聊，没有什么比这更好的了：）

```
public class GradeCalculator
{

    public static void main(String[] args)
    {
        System.out.print("Please enter your grade:  ");
        Scanner input = new Scanner(System.in);
        String grade = input.nextLine().trim();

        GradeCalculator calculator = new GradeCalculator();

        double gradePoint = calculator.getGradePoint(grade);
        System.out.print("Your grade is: " + gradePoint);
    }

    private double getGradePoint(String grade)
    {
        int score = getGradeScore(grade.charAt(0));

        double modifier = 0;

        if (grade.length() > 1)
        {
            modifier = getModifierValue(grade.charAt(1));
        }

        return score + modifier;
    }

    private int getGradeScore(char grade)
    {
        int score = 0;

        switch (grade)
        {
            case 'A':
            case 'a':
                score = 4;
                break;
            case 'B':
            case 'b':
                score = 3;
                break;
            case 'C':
            case 'c':
                score = 2;
                break;
            case 'D':
            case 'd':
                score = 1;
                break;
            case 'F':
            case 'f':
                score = 0;
                break;
        }

        return score;
    }

    private double getModifierValue(char modifier)
    {
        double value = 0;

        switch (modifier)
        {
            case '+':
                value = 0.3;
                break;
            case '-':
                value = -0.3;
                break;
        }

        return value;
    }
} 
```

# objective-c - Objective-C：集合枚举块中的“继续”？

> ID：13303400
> 
> 赞同：44
> 
> 时间：2012-11-09T06:47:55.207
> 
> 标签：objective-c, ios, nsarray, objective-c-blocks

如果我有一个 NSArray 并且我`enumerateUsingBlock`用来循环遍历数组中的元素，但在某些情况下我需要跳过循环体并转到下一个元素，`continue`块中是否有任何等价物，或者我可以`continue`直接使用吗？

谢谢！

更新：

只是想澄清一下，我想做的是：

```
for (int i = 0 ; i < 10 ; i++)
{
    if (i == 5)
    {
        continue;
    }
    // do something with i
} 
```

我需要的是`continue`块中的等价物。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-09T06:55:25.287

块很像匿名函数。所以你可以使用

> 返回

以返回类型 void 退出函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-14T16:25:14.733

使用快速枚举执行此操作时使用“继续”。

示例代码：

```
NSArray *myStuff = [[NSArray alloc]initWithObjects:@"A", @"B",@"Puppies", @"C", @"D", nil];

for (NSString *myThing in myStuff) {
    if ([myThing isEqualToString:@"Puppies"]) {
        continue;
    }

    NSLog(@"%@",myThing);

} 
```

和输出：

```
2015-05-14 12:19:10.422 test[6083:207] A
2015-05-14 12:19:10.423 test[6083:207] B
2015-05-14 12:19:10.423 test[6083:207] C
2015-05-14 12:19:10.424 test[6083:207] D 
```

看不到小狗。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T07:15:21.900

你不能在块中使用 continue ，你会得到 `error: continue statement not within a loop`. 使用返回；

```
[array enumerateObjectsUsingBlock: ^(id obj, NSUInteger idx, BOOL *stop) {
        /* Do something with |obj|. */
        if (idx==1) {
            return;
    }
        NSLog(@"%@",obj);
    }]; 
```

# ruby - 在 Ruby 中使用选项散列快速设置实例变量？

> ID：13303401
> 
> 赞同：21
> 
> 时间：2012-11-09T06:48:00.527
> 
> 标签：ruby

我想使用选项哈希作为 Ruby 中方法的输入，但是有没有办法快速设置所有同名变量（即具有相同名称）而不是单独设置每个变量？

因此，不要执行以下操作：

```
class Connection
  def initialize(opts={})
    @host     = opts[:host]
    @user     = opts[:user]
    @password = opts[:password]
    @project  = opts[:project]
    # ad nauseum... 
```

是否有一个单行器将散列中的每个传入选项分配给具有相同名称的变量？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-09T06:53:29.100

```
def initialize(opts={})
  opts.each { |k,v| instance_variable_set("@#{k}", v) }
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T06:55:31.143

这应该给你你正在寻找的东西：

```
def initialize(opts={})
  opts.each_pair do |key, value|
    send("#{key}=",value)
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:57:28.937

你可以这样做，

```
 @host, @user, @password, @project  = opts[:host], opts[:user], opts[:password], opts[:project] 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T07:19:20.927

除了 Casper 的解决方案，您还可以使用[instance_variables_from](https://github.com/janlelis/instance_variables_from) gem：

```
instance_variables_from(opts) 
```

# android - xmpp 条目 getType

> ID：13303403
> 
> 赞同：2
> 
> 时间：2012-11-09T06:48:06.690
> 
> 标签：android, xmpp, subscription

在我的聊天应用程序中，当一个用户在他/她的联系人列表中添加另一个人时，服务器条目显示 BOTH 订阅，但在我的应用程序中，代码根据 TO/FROM 订阅工作（就像在接受朋友请求之前一样）。但是当用户注销一次时，代码会根据 BOTH 订阅自动工作。发生了什么我无法得到？

名册提供旧值，而当我检查名册侦听器时，它在运行时给了我正确的值，但新的名册更改值在 ENTRY.GETTYPE() 中不可见，为什么yyyyy ???

请在这件事上帮助我？

请看看这个。（相同但解释更多）-[注销以在 xmpp smack 中添加朋友](https://stackoverflow.com/questions/13338515/logout-to-add-a-friend-in-xmpp-smack)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:41:34.453

您为 XMPP 使用哪个库？我曾经单独使用过[SMACK API](http://www.igniterealtime.org/projects/smack/index.jsp)，它实际上做得很好。因此，在使用它时，您可以使用所谓的 Roster 对象管理您的联系人列表并注册一个侦听器，以便它使用适当的代码处理更改......还可以查看这些[教程](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/)和[JavaDoc](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/)。还有谷歌代码项目 - [asmack](http://code.google.com/p/asmack/) - 用于将其移植到 android。

# java - 战争部署异常

> ID：13303407
> 
> 赞同：0
> 
> 时间：2012-11-09T06:48:16.300
> 
> 标签：java, tomcat7, war, web.xml, url-pattern

我尝试在 tomcat 上部署战争，但遇到异常

```
SEVERE: ContainerBase.addChild: start:
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/DataProvider]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1646)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalArgumentException: Invalid <url-pattern> com/above/ServletInitializer in servlet mapping
        at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3217)
        at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3192)
        at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1305)
        at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1349)
        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 11 more

Nov 08, 2012 6:29:24 PM org.apache.catalina.startup.HostConfig deployWAR
SEVERE: Error deploying web application archive C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.32\webapps\DataProvider.war
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/DataProvider]]
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1646)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

Nov 08, 2012 6:29:24 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.32\webapps\docs
Nov 08, 2012 6:29:24 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [139] milliseconds.
Nov 08, 2012 6:29:24 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.32\webapps\examples
Nov 08, 2012 6:29:24 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.32\webapps\host-manager
Nov 08, 2012 6:29:24 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.32\webapps\manager
Nov 08, 2012 6:29:24 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.32\webapps\ROOT
Nov 08, 2012 6:29:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-apr-8081"]
Nov 08, 2012 6:29:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-apr-8010"]
Nov 08, 2012 6:29:25 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 6130 ms 
```

web.xml 内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>EaasWebApp</display-name>
  <servlet>
    <servlet-name> REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.above</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>REST Service</servlet-name>
    <url-pattern>/services/*</url-pattern>
  </servlet-mapping>
  <filter>
    <filter-name>CORS</filter-name>
    <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>CORS</filter-name>
    <url-pattern>/services/*</url-pattern>
  </filter-mapping>
  <servlet>
    <servlet-name>ServletInitializer</servlet-name>
    <servlet-class>com.above.ServletInitializer</servlet-class>
    <load-on-startup>0</load-on-startup>
  </servlet>
</web-app> 
```

收到无效的 url-pattern 异常

```
 <servlet>
    <servlet-name>ServletInitializer</servlet-name>
    <servlet-class>com.above.ServletInitializer</servlet-class>
    <load-on-startup>0</load-on-startup>
 </servlet> 
```

错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:38:16.673

错误是您的 servlet-name 的第一个声明在开头有一个空格：

```
 <servlet-name> REST Service</servlet-name> 
```

中的第二个声明`<servlet-mapping>`不

# java - Android：Imageviews之间的间距

> ID：13303408
> 
> 赞同：0
> 
> 时间：2012-11-09T06:48:19.887
> 
> 标签：java, android, android-imageview

嗨，我有 4 个并排的图像我正在尝试增加图像视图之间的间距...但是 itz 不起作用..在 java 中尝试了 setSpacing(int)...android:spacing 在 xml 布局中

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:orientation="horizontal" >
    <ImageView
        android:id="@+id/navigationImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:paddingLeft="15dp"
        android:spacing="15dp" />
    <ImageView
        android:id="@+id/streetViewImage"
        android:src="@drawable/streetview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:paddingLeft="15dp"
        android:spacing="15dp" />
    <ImageView
        android:id="@+id/phoneImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:paddingLeft="20dp"
        android:paddingRight="15dp"
        android:spacing="15dp" />
</LinearLayout> 
```

这是我的java代码

```
 ImageView Image = (ImageView) view.findViewById(R.id.navImage);
 Image.setImageResource(R.drawable.navigation);
 Image.setSpacing(5); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:31:10.007

您应该了解`padding`和之间的区别`margin`：

[SO上的填充和边距之间的区别](https://stackoverflow.com/questions/4619899/difference-between-a-views-padding-and-margin)

# sql-server-2008 - 管理员阻止自己删除特定的表？

> ID：13303412
> 
> 赞同：2
> 
> 时间：2012-11-09T06:48:36.880
> 
> 标签：sql-server-2008

**管理员**如何防止自己删除或截断特定表，因为有时表被意外截断或删除，制作视图不是一个好主意。如果我做一个触发器，它会在 db 的所有表中实现。我只想在特定表中实现它，在 sql server 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:59:27.737

```
Create TRIGGER [TR_ProtectCriticalTables]
ON DATABASE 
FOR 
DROP_TABLE

AS    
DECLARE @eventData XML,
    @uname NVARCHAR(50),
    @oname NVARCHAR(100),
    @otext VARCHAR(MAX),
    @etype NVARCHAR(100),
    @edate DATETIME
SET @eventData = eventdata()
SELECT
    @edate=GETDATE(),
    @uname=@eventData.value('data(/EVENT_INSTANCE/UserName)[1]', 'SYSNAME'),
    @oname=@eventData.value('data(/EVENT_INSTANCE/ObjectName)[1]', 'SYSNAME'),
    @otext=@eventData.value('data(/EVENT_INSTANCE/TSQLCommand/CommandText)[1]', 
            'VARCHAR(MAX)'),
    @etype=@eventData.value('data(/EVENT_INSTANCE/EventType)[1]', 'nvarchar(100)')
  IF @oname IN ('tbluser')-- You can give comma seperated list here
BEGIN
DECLARE @err varchar(100)
SET @err = 'Table ' + @oname  + ' is super duper protected and cannot be dropped.'
RAISERROR (@err, 16, 1) ;
ROLLBACK;
END
GO
ENABLE TRIGGER [TR_ProtectCriticalTables] ON DATABASE 
```

要禁用截断试试这个

```
EXEC sys.sp_cdc_enable_table
@source_schema = N'dbo',
@source_name = N'TestTable',
@role_name = NULL
GO 
```

这可能会导致一些其他问题，所以请在使用前检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:51:19.800

只需删除特殊管理员的权限目录即可。并创建第二个用户，该用户有权执行此类危险工作。

另请参见[GRANT 和 REVOKE](http://dev.mysql.com/doc/refman/5.1/en/grant.html) SQL 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:58:31.923

请为具有以下所有权限的超级管理员创建用户并创建触发器：

```
CREATE TRIGGER reminder2
ON Customer
with execute as owner
AFTER  DELETE 
AS
  truncate table Customer 
```

# python - PyCharm 中的标签颜色是什么意思？

> ID：13303413
> 
> 赞同：6
> 
> 时间：2012-11-09T06:48:37.113
> 
> 标签：python, pycharm

我最近开始使用 PyCharm，它的自动保存系统让我很困惑。彩色标签更令人困惑：不同的标签颜色是什么意思？有蓝色、黑色和红色的标签。有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:00:23.227

请参阅[文件状态要点](http://www.jetbrains.com/pycharm/webhelp/file-status-highlights.html)。选项卡背景颜色也可以根据[Scope](http://www.jetbrains.com/pycharm/webhelp/file-colors.html)不同。

# android - 如何创建保护源代码的应用程序构建？

> ID：13303414
> 
> 赞同：2
> 
> 时间：2012-11-09T06:48:45.397
> 
> 标签：android, apk

[一般来说，我们可以从这个参考链接](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file)所示的android安装包中获取源代码。

但是，是否有可能从逆向工程师那里保护实际的程序代码（源代码）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:56:42.347

你写的代码先转成class文件再转dex文件，所以不能直接查看代码。但是可以使用 dex 编译器对源代码进行反编译，但这需要一些好的知识，因此您必须对代码进行[混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)。谷歌默认提供proguard，以便您可以保护代码

[您可以从这里](http://developer.android.com/tools/help/proguard.html)阅读有关 proguard 的信息

**简而言之**，您无法隐藏源代码，而只需将此行添加`proguard.config=proguard.cfg`到您的`project.properties`文件中，这样就很难被解码。您可以[在此处](http://www.semdesigns.com/products/obfuscators/JavaObfuscationExample.html)查看示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:54:57.087

不，因为 android 系统必须能够读取它才能运行它。您可以使用[Proguard](http://developer.android.com/tools/help/proguard.html)之类的工具对其进行混淆，使其更难反编译，但没有办法让它完全不可能。

# drag-and-drop - 在放置区域中可调整大小的拖放

> ID：13303417
> 
> 赞同：0
> 
> 时间：2012-11-09T06:49:10.167
> 
> 标签：drag-and-drop

```
<link rel="stylesheet" href="themes/base/jquery-ui.css" />
<link rel="stylesheet" href="themes/base/jquery.ui.all.css">
<script src="jquery-1.8.2.js"></script>
<script src="ui/jquery-ui.js"></script>
<script src="ui/jquery.ui.core.js"></script>
<script src="ui/jquery.ui.widget.js"></script>
<script src="ui/jquery.ui.mouse.js"></script>
<script src="ui/jquery.ui.draggable.js"></script>
<script src="ui/jquery.ui.droppable.js"></script>
<script src="ui/jquery.ui.resizable.js"></script>
<script src="ui/jquery.ui.position.js"></script>
<script src="ui/jquery.ui.dialog.js"></script>
<link rel="stylesheet" href="demos.css">

<style>
    #gallery { float: left; width:640px; min-height: 12em; padding-top:5px; padding-left:12px } * html #gallery { height: 12em; } /* IE6 */
    .gallery.custom-state-active { background: #eee; }
    .gallery li { float: left; width: 96px; padding: 0.3em; margin: 0 0.4em 0.4em 0; text-align: center; }
    .gallery li h5 { margin: 0 0 0.4em; cursor: move; }
    .gallery li a { float: left; }
    .gallery li a.ui-icon-zoomin { float: left; }
    .gallery li img { width: 100%; cursor: move; }

    #trash { float: right; width: 100%; min-height: 50em; padding: 1%;} * html #trash { height: 18em; } /* IE6 */
    #trash h4 { line-height: 16px; margin: 0 0 0.4em; }
    #trash h4 .ui-icon { float: left; }
    #trash .gallery h5 { display: none; }
       </style>
<script>
$(function() {
    // there's the gallery and the trash
    var $gallery = $( "#gallery" ),
        $trash = $( "#trash" );

    // let the gallery items be draggable
    $( "li", $gallery ).draggable({
        cancel: "a.ui-icon", // clicking an icon won't initiate dragging
        revert: "invalid", // when not dropped, the item will revert back to its initial position
        containment: "document",
        helper: "clone",
        cursor: "move",
        scroll: false,              
    });
    // let the trash be droppable, accepting the gallery items
    $trash.droppable({
        accept: "#gallery > li",
        activeClass: "ui-state-highlight",
        scroll: false,      
        tolerance: "fit",
        drop: function( event, ui ) {
            deleteImage( ui.draggable );
            $("li",$trash).draggable({ containment: 'parent' ,cursor: 'crosshair', revert:false});//for dragable the image
        }
    });
    //let the gallery be droppable as well, accepting items from the trash
    $gallery.droppable({
        accept: "#trash li",
        activeClass: "custom-state-active",
        scroll: false,      
        drop: function( event, ui ) {
            recycleImage( ui.draggable );           
        },
    });
    // image deletion function
    var recycle_icon = "<a href='link/to/recycle/script/when/we/have/js/off' title='Click To Move in Gallery' class='ui-icon ui-icon-refresh'>Click To Move in Gallery</a>";
    function deleteImage( $item ) {     
        $item.fadeOut(function() {
            var $list = $( "ul", $trash ).length ?
                $( "ul", $trash ) :
                $( "<ul class='gallery ui-helper-reset'/>" ).appendTo( $trash );

            $item.find( "a.ui-icon-trash" ).remove();
            $item.append( recycle_icon ).appendTo( $list ).fadeIn(function() {
                //$item.animate({ width: "48px" }).find( "img" ).animate({ height: "36px" });
            });
            //resizing imge and getting it width and height START START             
            var res_id  = $($item).attr("id");//get li/image id dropprd hear
            $("#"+res_id).resizable({
                alsoResize:'#img_'+res_id,
                maxHeight: 400, 
                maxWidth: 400, 
                minHeight: 10,
                minWidth: 10 ,
                stop: function(event, ui){
                        var wid = ui.size.width;//size of image after resize width
                        var hei = ui.size.height;//size of image after resize height
                        //alert(hei+'='+wid);   
                    }
            });//resizing image and getting it width and height END END
        });
    }

    // image recycle function
    var trash_icon = "<a href='link/to/trash/script/when/we/have/js/off' title='Delete this image' class='ui-icon ui-icon-trash'>Delete image</a>";
    function recycleImage( $item ) {
        $item.fadeOut(function() {
            $item
                .find( "a.ui-icon-refresh" )
                    .remove()
                .end()
                .css( "width", "96px")
                .append( trash_icon )               
                .find( "img" )
                    .css( "height", "72px" )
                    .css("width", "96px")
                .end()              
                .appendTo( $gallery )
                .fadeIn();
                //.resizable({revert:"false"});
                //ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se
        });
    }
    // image preview function, demonstrating the ui.dialog used as a modal window
    function viewLargerImage( $link ) {
        var src = $link.attr( "href" ),
            title = $link.siblings( "img" ).attr( "alt" ),
            $modal = $( "img[src$='" + src + "']" );

        if ( $modal.length ) {
            $modal.dialog( "open" );
        } else {
            var img = $( "<img alt='" + title + "' width='384' height='288' style='display: none; padding: 8px;' />" )
                .attr( "src", src ).appendTo( "body" );
            setTimeout(function() {
                img.dialog({
                    title: title,
                    width: 400,
                    modal: true
                });
            }, 1 );
        }
    }
    // resolve the icons behavior with event delegation
    $( "ul.gallery > li" ).click(function( event ) {
        var $item = $( this ),
            $target = $( event.target );
        if ( $target.is( "a.ui-icon-trash" ) ) {
            deleteImage( $item );
        } else if ( $target.is( "a.ui-icon-zoomin" ) ) {
            viewLargerImage( $target );
        } else if ( $target.is( "a.ui-icon-refresh" ) ) {
            recycleImage( $item );
        }
        return false;
    });
});
</script>
<div class="ui-widget ui-helper-clearfix">
<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix"  style="overflow-y:scroll; overflow-x:hidden; height:25px"> 
    <li class="ui-widget-content ui-corner-tr" id="idid">
        <h5 class="ui-widget-header">1mehfil</h5>
        <img src="images/1mehfil.JPG" title="1mehfil" width="90" height="72" id="img_idid" />
        <!--<a href="images/high_tatras4.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>-->
        <a href="link/to/trash/script/when/we/have/js/off" title="Click to Move in Vision Board" class="ui-icon ui-icon-trash">Click to Move in Vision Board</a>
    </li>
    <li class="ui-widget-content ui-corner-tr" id="ididid">
        <h5 class="ui-widget-header">1mehfil</h5>
        <img src="images/8711215.jpg" title="8711215" width="90" height="72" id="img_ididid" />
        <!--<a href="images/high_tatras4.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>-->
        <a href="link/to/trash/script/when/we/have/js/off" title="Click to Move in Vision Board" class="ui-icon ui-icon-trash">Click to Move in Vision Board</a>
    </li>
</ul>
</div>
<div>&nbsp;</div>
<div id="response_div_result" style="padding-left:10px">
    <div id="trash" class="ui-widget-content ui-state-default">
        <h4 class="ui-widget-header"><span class="ui-icon ui-icon-trash">Create your vision</span>Create your vision</h4>
    </div>
</div> 
```

这是jquery中拖放的代码我在这个额外的功能中添加了一些额外的功能，比如它可以在放置后重新调整大小，但我也希望它可以在放置区域中拖动，放置后可以有人帮助我`<li>`可以再次拖动在任何地方的丢弃区域（仅限于丢弃区域内）。听到我用这个代码在拖放部分中进行拖动`$("li",$trash).draggable({ containment: 'parent' ,cursor: 'crosshair', revert:false});`- 目前它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:34:54.160

我想我会为你正在尝试做的事情制作一个快速原型。见小提琴：http: [//jsfiddle.net/chrismoutray/VjXqg/](http://jsfiddle.net/chrismoutray/VjXqg/)

现在回顾您的示例，我认为问题在于使用*淡出*，因为这可能会产生竞争条件，例如您在创建*拖放*元素的同时设置*可拖动*垃圾元素。

 *在我的示例中，我在 drop 处理程序中采取了以下步骤：

*   淡出可拖动元素，然后*在*淡出回调中
    *   操作可拖动元素（添加/删除子元素/样式）
    *   将可拖动元素附加到垃圾`ul`列表
    *   将元素设置为可拖动`{ containment: 'parent' }`
    *   最后淡入可拖动元素

我想这里的重点是我在淡出回调中做所有事情......*

# jquery - Worklight 和 jquery：我想获取 xml 中存在的链接并希望用行动态标记它们？

> ID：13303422
> 
> 赞同：1
> 
> 时间：2012-11-09T06:49:46.300
> 
> 标签：jquery, ibm-mobilefirst

上面附上了我的图像，它获取了远程服务器，它在内容页面中显示为行。我在同一个 xml 中有链接，我想将该链接标记到该行并单击它，用户应该使用页面加载。

我怎样才能拿到那个？

```
function displayFeeds(items){
    var ul = $('#itemsList');
    for (var i = 0; i < items.length; i++) {
        var li = $('<li/>').html(items[i].title);

        var l = $('<li/>').html(items[i].link);

        ul.append(li);

    } 
```

这就是我获取xml内容的方式。我也在获取链接，但不知道如何将其链接到该行。

请帮忙..问候，桑迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:07:22.453

您要么需要一个锚标记，要么需要绑定到 li 的点击事件。

```
var lineItems;

lineItems = $(items).map(function(){
  var item = $(this);
  return '<li><a href="'+item.link+'">'+item.title+'</a></li>'
}).get().join();

ul.append(lineItems); 
```

# ruby-on-rails - 我删除了一些旧版本的 gems，现在 rails 坏了

> ID：13303424
> 
> 赞同：0
> 
> 时间：2012-11-09T06:49:53.053
> 
> 标签：ruby-on-rails, ruby

长话短说，我的双启动 ubuntu 笔记本电脑的空间不足了。我决定删除一些旧版本的 gem 以腾出一些空间。太好了，除了现在我不能再让 rails 在我的机器上工作了 - rails 控制台和 rails 服务器出现故障。这是我在输入 rails s 时看到的错误；

```
jmtoporek@jmtoporek-laptop:~/rails/pskr2$ rails s
/home/jmtoporek/.rvm/gems/ruby-1.9.2-p180/gems/hpricot-0.8.6/lib/fast_xs.so: [BUG]  Segmentation fault
ruby 1.8.7 (2010-01-10 patchlevel 249) [i486-linux]

/usr/bin/rails: line 104:  4807 Aborted                 /usr/bin/ruby     /usr/share/rails/railties/bin/rails ${OVERWRITE_OPTION} "${RAILS_PKG_DESTINATION}" "${INTERNAL_OPTIONS}" -d $DATABASE
ln: target `/home/jmtoporek/rails/pskr2/s/vendor/' is not a directory: No such file or directory
ln: creating symbolic link `/home/jmtoporek/rails/pskr2/s/vendor/rails': No such file or directory
ln: creating symbolic link `/home/jmtoporek/rails/pskr2/s/doc/api': No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:45:01.743

我想重新安装 rails 就足够了，因为它安装了几个 gem 才能正常运行。只需运行`gem install rails`并查看它是否再次工作。

此外，如果您使用 RVM，您可以使用不同的安装执行如下操作：

`rvm use ruby-1.9.3-p286@rails328 --create --default`

..然后，再次安装导轨：

`gem install rails`

请记住，最后一个解决方案还需要您安装所有其他 gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:02:42.210

我重新安装了 railties - 尽管 gem 已经安装，但一定是有些东西搞砸了。我重新安装了railties，解决了这个问题。我希望我仔细查看错误消息。在 rails gem 目录中似乎有一个 railties 的副本。

# ubuntu - 代理服务器、URLfilter、squid

> ID：13303428
> 
> 赞同：0
> 
> 时间：2012-11-09T06:50:01.273
> 
> 标签：ubuntu, proxy, firewall, squid

我正在寻找我相信代理服务器将其集成到我们公司中，以比 ipcop+urlfilter（我们现在使用的）允许我们更精细地过滤互联网。我们试图实现的是能够为一些用户/个人电脑过滤一些网页，为一些用户/个人电脑过滤整个网络。我们在win2008r2环境下使用AD。Webgui 是必须的，因为在文件中管理规则是一件很痛苦的事情。

现在我在寻找什么？我正在安装 quintolabs 以查看提供的内容，但我不确定这是否是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:29:02.980

我们也使用 win2008r2 服务器。

我们有

> Squid3 + Winbind + ClamAV

此配置允许我们对 Active Directory 用户进行透明的 LDAP/KERBEROS 身份验证，并且所有流量都由 ClamAV 防病毒软件监控。

一切都是开源的，当然是免费的。

您可以为经过身份验证的用户设置高级访问规则，以允许/拒绝流量到白名单/黑名单页面。

你也可以在linux机器上安装包

> WEBMIN

您可以通过 Web UI 轻松管理 squid3，因此您不必在文件中管理访问列表，只需使用 Web 界面即可。

我不知道你还需要知道什么。如果你给我们更多的信息，也许我可以告诉你更多。

# sql - 有时 SQL Server 触发器未触发

> ID：13303432
> 
> 赞同：1
> 
> 时间：2012-11-09T06:50:10.213
> 
> 标签：sql, sql-server, sql-server-2008

我在我的`recharge`桌子上创建了一个触发器。它更新`onaccountregistry`表的余额。

但有时在我的表中插入行时`recharge`，它不会触发触发器。然后值不匹配。该`recharge`表每次都插入行。

我按如下方式创建了触发器。这不是复制表。我使用的是 SQL Server 2008 企业版。

请帮我解决这个问题

```
CREATE TRIGGER [dbo].[RechargeRefund] 
   ON [dbo].[ISRecharge]  
   FOR INSERT  
AS
   declare @tin char(9) 
   declare @depocd char(1) 
   declare @oldvalue money
   declare @newvalue money
begin
    select @tin = inserted.tin_subtin from inserted
    select @depocd = inserted.updatetype from inserted
    select @newvalue = inserted.DepositAmt from inserted
    select @oldvalue = Totdeposit from ISOnAcctRegistry where tin_subtin = @tin
end

if @depocd ='1'
begin
  update ISOnAcctRegistry
  set Totdeposit = @oldvalue + @newvalue
  where tin_subtin = @tin
end 

if @depocd ='2'
begin
  update ISOnAcctRegistry
  set Totdeposit = @oldvalue - @newvalue
  where tin_subtin = @tin
end
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:00:53.713

正如@marc 指出的那样，假设单行写入`inserted`是不好的——您的 3 个选择甚至可以为您的 3`inserted`个不同（任意）行的 3 个变量赋值`inserted`。

你可能想要的是：

```
update i1
set Totdeposit = Totdesposit + t2.Total
from ISOnAcctRegistry i1
        inner join
     (select
         tin_subtin,
         SUM(CASE updatetype
              WHEN 1 THEN DepositAmt
              WHEN 2 THEN -DepositAmt
         ELSE 0 END) as Total
      from inserted
      group by tin_subtin) t2
        on
            i1.tin_subtin = t2.tin_subtin 
```

但是您也许可以`ISOnAcctRegistry`用构建的索引视图替换这项工作（以及 中的这一列）-`ISRecharge`有一些限制，您*可以*构建一个自动跨行执行的视图，并且 SQL Server 将负责维护该值在后台为您服务。`SUM``ISRecharge`

`UPDATE`显然，目前，您的触发器不`DELETE`考虑`ISRecharge`. 索引视图会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T07:10:11.080

好吧，它当然行不通——你假设触发器**每行插入一次**。

但事实**并非**如此。

触发器**每`INSERT`批次**触发一次，伪表`Inserted`可能包含**多行**！

如果您确实得到了`INSERT`多行 - 您的语句在这里选择了哪一行？

```
select @tin = inserted.tin_subtin from inserted
select @depocd = inserted.updatetype from inserted
select @newvalue = inserted.DepositAmt from inserted
select @oldvalue = Totdeposit from ISOnAcctRegistry where tin_subtin = @tin 
```

您需要重写触发器，以便它可以处理**多行**`Inserted`- 然后它每次都会工作。

# jquery-mobile - 如何使用 OpenLayers 移动添加注释？

> ID：13303434
> 
> 赞同：0
> 
> 时间：2012-11-09T06:50:27.267
> 
> 标签：jquery-mobile, mobile, openlayers

我正在使用 Jquery mobile 和 OpenLayers mobile。

我想让用户能够绘制线条和多边形等特征。我还想让他们能够“编写”注释并将文本放置在地图上的某个点上。

有没有人有一个如何在地图上添加文本的小例子？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:14:27.257

使用一些 JavaScript 和 HTML 文本输入来实现文本输入。要保存注释，您可以尝试导出和导入[geojson](http://dev.openlayers.org/docs/files/OpenLayers/Format/GeoJSON-js.html) 您可以在地图标记上设置文本：`marker.icon.imageDiv.title = 'yourTitleHere';`

# php - 如何用php替换解析html中的字符串/单词？

> ID：13303440
> 
> 赞同：-3
> 
> 时间：2012-11-09T06:50:46.063
> 
> 标签：php, xml, dom, xml-parsing, html-parsing

我有桌子

```
<html>
  <body>
    <table id="data" class="outer">
        <tr><td>Date</td><td>12-09-12</td></tr>
        <tr><td>Price</td><td>15.00</td></tr>
        <tr><td>Count</td><td>67</td></tr>          
    </table>
  </body>
</html> 
```

我必须解析这个以给出超过 100 的 put 但我无法获得如何用数据库值中的新值替换 "Date" "12-09-12" 的值。

请给我一个小例子

```
$html = new simple_html_dom();
$html->load_file($page);

$items = $html->find('Date'); 
```

`

```
$s = '<html>
  <body>
    <table id="data" class="outer">
        <tr><td>Date</td><td>12-09-12</td></tr>
        <tr><td>Price</td><td>15.00</td></tr>
        <tr><td>Count</td><td>67</td></tr>          
 </table>
  </body>
</html>';
$document = new DOMDocument();
$document->loadHTML($s);

$oElement = $document->getElementById('data');
$tds = $oElement->getElementsByTagName('td');
if( 'td' == strtolower($tds->item(0)->tagName) AND 'date' == strtolower($tds->item(0)->nodeValue) )

{
    echo 'Old value: ' . $tds->item(1)->nodeValue;
    echo '<hr/>';

    $tds->item(1)->nodeValue = '13-08-11';
    echo $document->saveHTML(); //output modified HTML
}
?> 
```

`谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:33:11.360

可以使用[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)来完成。

```
<?php
$s = '<html>
  <body>
    <table id="data" class="outer">
        <tr><td>Date</td><td>12-09-12</td></tr>
        <tr><td>Price</td><td>15.00</td></tr>
        <tr><td>Count</td><td>67</td></tr>          
    </table>
  </body>
</html>';

$document = new DOMDocument();
$document->loadHTML($s);

$oElement = $document->getElementById('data');
if($oElement)
{
    $tds = $oElement->firstChild->childNodes;
    if( 'td' == strtolower($tds->item(0)->tagName) AND 'date' == strtolower($tds->item(0)->nodeValue) )
    {
        echo 'Old value: ' . $tds->item(1)->nodeValue;
        echo '<hr/>';

        $tds->item(1)->nodeValue = '13-08-11';
        echo $document->saveHTML(); //output modified HTML
    }
}
else
{
    echo 'No elements found with id="data"';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:01:13.823

使用[简单的 HTML DOM](http://simplehtmldom.sourceforge.net/)包可以像这样完成。

```
$s = '<html>
  <body>
    <table id="data" class="outer">
        <tr><td>Date</td><td>12-09-12</td></tr>
        <tr><td>Price</td><td>15.00</td></tr>
        <tr><td>Count</td><td>67</td></tr>          
    </table>
  </body>
</html>';

include 'simple_html_dom.php';
$html = str_get_html($s);
$html->find('table#data tr td', 1)->innertext = '13-08-11';
echo $html; 
```

`table#data tr td`选择器在带有`id="data"`. `$html->find('table#data tr td', 1)`返回第二个找到的元素（索引为 1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:14:39.957

```
<html>
  <body>
    <table id="data" class="outer">
        <tr><td>Date</td><td id="date">12-09-12</td></tr>
        <tr><td>Price</td><td>15.00</td></tr>
        <tr><td>Count</td><td>67</td></tr>          
    </table>
  </body>
</html> 
```

在 JavaScript 中：

```
var date = <?=$_row['date']?>;
$('date').html('date'); 
```

# java - 仅在发生错误或异常时才创建日志文件，而不使用 log4j

> ID：13303441
> 
> 赞同：1
> 
> 时间：2012-11-09T06:50:46.280
> 
> 标签：java, file, exception, logging, error-handling

我想维护一个日志文件或 txt 文件，我可以在其中维护异常详细信息以及 txt 或日志文件中的一些其他详细信息。场景是这样的

```
try {
    .......
} catch(exception e) {
    here the file should be created
} 
```

在不使用日志框架的情况下，什么是最好的优化解决方案。

这对我有用吗？

```
try  {
    // something
} catch (Exception ex) {
    ex.printStackTrace(new PrintStream(new File("error.log")));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:56:12.823

如果您不想使用任何日志框架，您可以查看[Java 日志框架](http://docs.oracle.com/javase/6/docs/technotes/guides/logging/overview.html)并使用它来创建自己的实现

[java.util.logging](http://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html)包含实现所需的所有必需类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:02:27.870

我不知道你为什么不喜欢使用 logger 框架。好的，你可以做的一件事是`FileWritter`在顶层创建对象并在你想要的类中使用它。

```
BufferedWriter bw = null;
String path = "your//file//path//where u want to save your log";
try {
   bw = new BufferedWriter(new FileWriter(new File(path)));
 } 
```

在你的代码中。

```
try
{
 .......
 }
catch(exception e)
{
   bw.write("here the file should be created");
   bw.flush();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:56:18.213

日志框架可帮助您维护日志文件。

如果您不想使用它们，您可以设计自己的日志记录机制，而无需承担写入文本文件的所有痛苦。

在 log4j 的情况下：

```
 1\. You can set the logging levels like debug,error,info etc...

 2\. You can set appenders like File Appender, Console Appender etc.. 
```

这两件事可能足以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:00:52.810

您仍然需要运行一些将所需信息附加到（日志）文件的代码。所以最后你将有一个*记录器*类，它提供一些静态方法，如*logException*或*logError*。一个简单的草稿：

```
public class MyLogger {

   public static log(Object sender, Throwable e) {
     String className = sender;
     String message = e.getMessage();
     append(sender, message);
   }

   private static void append(String classname, String message) {
     // append something to your file
   }
} 
```

您可能想要添加时间戳和一些行号信息，这些信息可从`Thread.currentThread().getStackTrace()[n]`（使用 n 的值，直到您从调用方法中找到帧，它是 2、3 或 4）

然后，每当您处理异常时，请执行

```
catch(SomeException e) {
   MyLogger.log(this, e);
} 
```

# mysql - 从映射表中选择类别

> ID：13303444
> 
> 赞同：3
> 
> 时间：2012-11-09T06:50:51.540
> 
> 标签：mysql, sql

我有 3 张桌子：

```
categories:
ID, category
"1","Cars"
"2","Trucks"
"3","Bikes"
"4","Planes"
"5","Boats"

users:
ID, username
"1","john"
"2","bob"
"3","billy"

users_categories:
ID, userid, categoryid
"1","1","2"
"2","1","5"
"3","2","3"
"4","3","2"
"5","3","4"
"6","3","5" 
```

Q1。我想要的是：

```
john,Trucks,Boats
bob,Bikes
billy,Trucks,Planes,Boats 
```

我来到了这个。类别的 Concat 就可以了。

```
SELECT U.`username`, (SELECT C.`category` FROM `categories` C LEFT JOIN `users_categories` UC ON C.`ID` = UC.`categoryid` WHERE U.ID = UC.userid) FROM  `users` U 
```

但我得到 #1242 - 子查询返回超过 1 行。

Q2。有没有更好的方法来构建这个？不会超过 50-100 个类别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:52:52.220

用来**[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)**达到你想要的

```
SELECT  a.username,
        GROUP_CONCAT(c.category)
FROM    users a
        INNER JOIN users_categories b
            On a.Id = b.userID
        INNER JOIN categories c
            ON b.categoryID = c.ID
GROUP BY a.ID 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/73184/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:56:26.327

如果您可以接受将类别作为逗号分隔的字符串，则可以使用 GROUP_CONCAT 函数。

让我们看看（我从未在mysql中尝试过自己）

```
select u.username,
       GROUP_CONCAT(DISTINCT c.Category order by c.Category SEPARATOR ',')
from users u
     join usersCategories uc 
       on u.ID = uc.userID
     join Categories c 
       on c.ID = uc.CategoryID 
```

抱歉，您可能必须将其调整为 MySQL 特定的语法。

# android - 通过相机获取最近捕获的图像的路径和图像名称

> ID：13303445
> 
> 赞同：3
> 
> 时间：2012-11-09T06:50:52.090
> 
> 标签：android, image, ftp, camera

我必须将捕获的图像上传到 ftp 服务器。我正在通过相机捕获图像，我想获取该图像的图像名称和路径。我使用以下代码获取图像路径：

```
int ACTION_TAKE_PICTURE = 1;
String selectedImagePath;
Uri mCapturedImageURI;

Button loadButton;
ImageView img;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_new_ftpsdemo);
     img = (ImageView)findViewById(R.id.image);

    ContentValues values = new ContentValues();
    values.put(MediaStore.Images.Media.TITLE, "yahoo.jpg");
    mCapturedImageURI  = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
    Intent intentPicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intentPicture.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);
    startActivityForResult(intentPicture,ACTION_TAKE_PICTURE);

}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == ACTION_TAKE_PICTURE){
        selectedImagePath = getRealPathFromURI(mCapturedImageURI);
        Log.v("selectedImagePath", selectedImagePath);
        img.setImageBitmap( BitmapFactory.decodeFile(selectedImagePath));
    }
}

public String getRealPathFromURI(Uri contentUri)
    {
        try
        {
            String[] proj = {MediaStore.Images.Media.DATA};
            Cursor cursor = managedQuery(contentUri, proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }
        catch (Exception e)
        {
            return contentUri.getPath();
        }
    } 
```

但我得到这样的图像路径：

```
/mnt/sdcard/DCIM/Camera/1352443194885.jpg 
```

因为我正在保存名称“yahoo.jpg”。我知道这可能是一个非常简单的问题，但我无法获得相同的图像名和路径。所以我无法将图像上传到 ftp 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:24:07.383

检查这个...把它放在你的 onActivityResult

```
 Uri selectedImage = intent.getData();

           String[] filePathColumn = {MediaStore.Images.Media.DATA};
           Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
           cursor.moveToFirst();
           int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
           String filePath = cursor.getString(columnIndex);
           Log.v("log","filePath is : "+filePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:00:38.937

创建路径时，您只是保存“标题”。您没有给出相机应该用来存储的实际路径和文件名。由于此相机使用您提供的“标题”将文件存储在其默认位置。

您在代码中一切正常，但只需执行以下操作以具有相同的文件名：

代替：

```
ContentValues values = new ContentValues();
values.put(MediaStore.Images.Media.TITLE, "yahoo.jpg");
mCapturedImageURI  =  getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values); 
```

用这个：

```
 StringBuilder path = new StringBuilder();
    path.append(Environment.getExternalStorageDirectory());
    path.append(// any location say "/Pictures/" //); // Do check if the folder is present. Else create one.
    path.append("yahoo");
        path.append(".jpg");
    File file = new File(path.toString());
    mCapturedImageURI = Uri.fromFile(file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:05:56.243

使用它来启动相机的 Intent：

哦。这`Uri targetURI`是一个全局声明。

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"your_app_name/camera");
else
    cameraFolder= StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

File photo = new File(Environment.getExternalStorageDirectory(), "your_app_name/camera/camera_snap.jpg");
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
targetURI = Uri.fromFile(photo);

startActivityForResult(getCameraImage, 1); 
```

并且在`onActivityResult()`：

```
getContentResolver().notifyChange(targetURI, null);

ContentResolver cr = getContentResolver();

try {       
    // SET THE IMAGE FROM THE CAMERA TO THE IMAGEVIEW
    bmpImageCamera = android.provider.MediaStore.Images.Media.getBitmap(cr, targetURI);

    // SET THE IMAGE FROM THE GALLERY TO THE IMAGEVIEW
    imgvwSelectedImage.setImageBitmap(bmpImageCamera);

} catch (Exception e) {
    e.printStackTrace();
} 
```

这段代码使用您选择的名称创建一个*文件夹。*您可以在此处更改文件夹名称：new`File(android.os.Environment.getExternalStorageDirectory(),"your_app_name/camera");`

此外，这会覆盖`camera_snap.jpg`您每次调用 Intent 以获取相机图像。

此代码不考虑内存不足异常，而只是演示如何将相机图像返回到您的应用程序。

编辑：差点忘了。如果您还没有这样做，您需要将此权限添加到您的`Manifest.xml`：`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:53:34.347

我用下面的代码解决了这个问题。它对我有用。

我已经提到了这个链接：[这里](https://stackoverflow.com/questions/10913682/how-to-capture-and-save-an-image-using-custom-camera-in-android)

只需要制作文件路径和图像名称全局变量

MyCameraActivity.java

```
public class MyCameraActivity extends Activity {
private Camera mCamera;
private CameraPreview mCameraPreview;
public static String imageFilePath;
public static String imageName;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mCamera = getCameraInstance();
    mCameraPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mCameraPreview);

    Button captureButton = (Button) findViewById(R.id.button_capture);
    captureButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCamera.takePicture(null, null, mPicture);
        }
    });
}

/**
 * Helper method to access the camera returns null if it cannot get the
 * camera or does not exist
 * 
 * @return
 */
private Camera getCameraInstance() {
    Camera camera = null;
    try {
        camera = Camera.open();
    } catch (Exception e) {
        // cannot get camera or does not exist
    }
    return camera;
}

PictureCallback mPicture = new PictureCallback() {
    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        File pictureFile = getOutputMediaFile();
        if (pictureFile == null) {
            return;
        }
        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
        } catch (FileNotFoundException e) {

        } catch (IOException e) {
        }
    }
};

private static File getOutputMediaFile() {
    File filePath = new File(
            Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
            "MyCameraApp");

    if (!mediaStorageDir.exists()) {
        if (!mediaStorageDir.mkdirs()) {
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }
    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
            .format(new Date());
imageName = timeStamp +".jpg"; // name of captured image
    File mediaFile;
    mediaFile = new File(mediaStorageDir.getPath() + File.separator
            + imageName);
    imageFilePath = mediaFile.toString(); // you can get path of image saved
    return mediaFile;
} 
```

}

CameraPreview.java:

```
public class CameraPreview extends SurfaceView implements
    SurfaceHolder.Callback {
private SurfaceHolder mSurfaceHolder;
private Camera mCamera;

// Constructor that obtains context and camera
@SuppressWarnings("deprecation")
public CameraPreview(Context context, Camera camera) {
    super(context);
    this.mCamera = camera;
    this.mSurfaceHolder = this.getHolder();
    this.mSurfaceHolder.addCallback(this);
    this.mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public void surfaceCreated(SurfaceHolder surfaceHolder) {
    try {
        mCamera.setPreviewDisplay(surfaceHolder);
        mCamera.startPreview();
    } catch (IOException e) {
        // left blank for now
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
    mCamera.stopPreview();
    mCamera.release();
}

@Override
public void surfaceChanged(SurfaceHolder surfaceHolder, int format,
        int width, int height) {
    // start preview with new settings
    try {
        mCamera.setPreviewDisplay(surfaceHolder);
        mCamera.startPreview();
    } catch (Exception e) {
        // intentionally left blank for a test
    }
} 
```

}

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >
<FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" />
<Button
    android:id="@+id/button_capture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Capture" />
</LinearLayout> 
```

androidmanifiest.xml 中需要以下权限：

```
<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

现在我可以获取最近捕获的图像的 imageName 和 imagepath 并轻松将此图像上传到 ftp 服务器。

快乐编码。

# android - 如果满足某些条件，则显示 AlertDialog

> ID：13303446
> 
> 赞同：0
> 
> 时间：2012-11-09T06:50:53.847
> 
> 标签：android, android-alertdialog

首先请多多包涵，因为我是 Android 新手。

我想写一个应用程序，如果满足条件，可以弹出一个对话框

例子 ：

公共类TestMax {

```
 public void main(String[] args) {
          int i = 5;
          int j = 5;
          int sum = i + j;

                   if (sum == 10) {

                // alert dialog box will appear and show the message -  "Answer is 10"

               }

    } 
```

感谢你的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:56:15.473

满足您的条件时添加：

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create();
alertDialog.setTitle("Title");
alertDialog.setMessage("Message");
alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int which) {
  // TODO Add your code for the button here.   }
});
// Set the Icon for the Dialog
alertDialog.setIcon(R.drawable.icon);
alertDialog.show(); 
```

请参阅[http://developer.android.com/reference/android/app/AlertDialog.html](http://developer.android.com/reference/android/app/AlertDialog.html)。 [http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:58:43.700

做这个。如果您只想显示一个警报对话框。

```
public void main(String[] args) 
{
        int i = 5;
        int j = 5;
        int sum = i + j;

        if (sum == 10) {
            new AlertDialog.Builder(yourclass.this)
                    .setTitle("Your answer is")
                    .setMessage(i)
                    .setNeutralButton("ok", null)
                    .setIcon(android.R.drawable.stat_sys_warning).show();
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:59:34.730

请尝试此代码....

弹出对话框的类

```
if (condition) {

                showAlertDialog(Activityname.this, "Internet Connection",
                        "You have internet connection", true);
            } else {

                showAlertDialog(Activityname.this, "No Internet Connection",
                        "You don't have internet connection.", false);
            } 
```

showdailog 的方法声明

```
 public void showAlertDialog(Context context, String title, String message, Boolean status) {
    AlertDialog alertDialog = new AlertDialog.Builder(context).create();

    // Setting Dialog Title
    alertDialog.setTitle(title);

    // Setting Dialog Message
    alertDialog.setMessage(message);

    // Setting alert dialog icon
    alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

    // Setting OK Button
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    });

    // Showing Alert Message
    alertDialog.show();
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:02:26.443

```
public void main(String[] args) {
          int i = 5;
          int j = 5;
          int sum = i + j;

                   if (sum == 10) {
                   showAlertDialog(Activityname.this, "Internet Connection",
                    "You have internet connection", true);

                // alert dialog box will appear and show the message -  "Answer is 10"

               }

       public void showAlertDialog(Context context, String title, String message,   Boolean status) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();

     // Setting Dialog Title
      alertDialog.setTitle(title);

    // Setting Dialog Message
    alertDialog.setMessage(message);

    // Setting alert dialog icon
    alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

    // Setting OK Button
   alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int which) {
       }
     });

   // Showing Alert Message
    alertDialog.show();

     } 
```

# python - urllib2.HTTPError：HTTP 错误 403：禁止

> ID：13303449
> 
> 赞同：122
> 
> 时间：2012-11-09T06:51:02.910
> 
> 标签：python, http, urllib

我正在尝试使用 python 自动下载历史股票数据。我尝试打开的 URL 以 CSV 文件响应，但我无法使用 urllib2 打开。我曾尝试按照前面几个问题中的说明更改用户代理，我什至尝试接受响应 cookie，但没有成功。你能帮忙吗？

*注意：同样的方法适用于 yahoo Finance。*

**代码：**

```
import urllib2,cookielib

site= "http://www.nseindia.com/live_market/dynaContent/live_watch/get_quote/getHistoricalData.jsp?symbol=JPASSOCIAT&fromDate=1-JAN-2012&toDate=1-AUG-2012&datePeriod=unselected&hiddDwnld=true"

hdr = {'User-Agent':'Mozilla/5.0'}

req = urllib2.Request(site,headers=hdr)

page = urllib2.urlopen(req) 
```

**错误**

> 文件“C:\Python27\lib\urllib2.py”，第 527 行，在 http_error_default 中引发 HTTPError(req.get_full_url(), code, msg, hdrs, fp) urllib2.HTTPError: HTTP Error 403: Forbidden

感谢你的协助

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-11-09T07:19:12.010

通过添加更多标题，我能够获取数据：

```
import urllib2,cookielib

site= "http://www.nseindia.com/live_market/dynaContent/live_watch/get_quote/getHistoricalData.jsp?symbol=JPASSOCIAT&fromDate=1-JAN-2012&toDate=1-AUG-2012&datePeriod=unselected&hiddDwnld=true"
hdr = {'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11',
       'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
       'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
       'Accept-Encoding': 'none',
       'Accept-Language': 'en-US,en;q=0.8',
       'Connection': 'keep-alive'}

req = urllib2.Request(site, headers=hdr)

try:
    page = urllib2.urlopen(req)
except urllib2.HTTPError, e:
    print e.fp.read()

content = page.read()
print content 
```

实际上，它只适用于这个额外的标题：

```
'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-04-24T09:09:18.147

这将适用于 Python 3

```
import urllib.request

user_agent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7'

url = "http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers"
headers={'User-Agent':user_agent,} 

request=urllib.request.Request(url,None,headers) #The assembled request
response = urllib.request.urlopen(request)
data = response.read() # The data u need 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-09-14T08:00:54.947

NSE 网站已更改，旧脚本对当前网站来说是半最佳的。此代码段可以收集安全的日常详细信息。详细信息包括代码、证券类型、前一收盘价、开盘价、最高价、最低价、平均价格、交易量、成交量、交易数量、交付数量以及交付与交易的百分比。这些方便地呈现为字典形式的列表。

## 带有请求和 BeautifulSoup 的 Python 3.X 版本

```
from requests import get
from csv import DictReader
from bs4 import BeautifulSoup as Soup
from datetime import date
from io import StringIO 

SECURITY_NAME="3MINDIA" # Change this to get quote for another stock
START_DATE= date(2017, 1, 1) # Start date of stock quote data DD-MM-YYYY
END_DATE= date(2017, 9, 14)  # End date of stock quote data DD-MM-YYYY

BASE_URL = "https://www.nseindia.com/products/dynaContent/common/productsSymbolMapping.jsp?symbol={security}&segmentLink=3&symbolCount=1&series=ALL&dateRange=+&fromDate={start_date}&toDate={end_date}&dataType=PRICEVOLUMEDELIVERABLE"

def getquote(symbol, start, end):
    start = start.strftime("%-d-%-m-%Y")
    end = end.strftime("%-d-%-m-%Y")

    hdr = {'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11',
         'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
         'Referer': 'https://cssspritegenerator.com',
         'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
         'Accept-Encoding': 'none',
         'Accept-Language': 'en-US,en;q=0.8',
         'Connection': 'keep-alive'}

    url = BASE_URL.format(security=symbol, start_date=start, end_date=end)
    d = get(url, headers=hdr)
    soup = Soup(d.content, 'html.parser')
    payload = soup.find('div', {'id': 'csvContentDiv'}).text.replace(':', '\n')
    csv = DictReader(StringIO(payload))
    for row in csv:
        print({k:v.strip() for k, v in row.items()})

 if __name__ == '__main__':
     getquote(SECURITY_NAME, START_DATE, END_DATE) 
```

除此之外，这是相对模块化的并且可以立即使用的代码片段。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-03-11T23:07:05.223

当您请求的服务器不知道请求来自哪里时，通常会发生此错误，服务器这样做是为了避免任何不必要的访问。您可以通过定义标头并将其沿 urllib.request 传递来绕过此错误

继承人代码：

```
#defining header
header= {'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) ' 
      'AppleWebKit/537.11 (KHTML, like Gecko) '
      'Chrome/23.0.1271.64 Safari/537.11',
      'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
      'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
      'Accept-Encoding': 'none',
      'Accept-Language': 'en-US,en;q=0.8',
      'Connection': 'keep-alive'}

#the URL where you are requesting at
req = urllib.request.Request(url=your_url, headers=header) 
page = urllib.request.urlopen(req).read() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-13T23:20:18.657

值得尝试的一件事就是更新 python 版本。几个月前，我的一个爬虫脚本停止在 Windows 10 上使用 403。任何 user_agents 都没有帮助，我正要放弃脚本。今天我在 Ubuntu 上使用 Python（3.8.5 - 64 位）尝试了相同的脚本，并且没有错误。Windows 的 python 版本有点旧，如 3.6.2 - 32 位。将 Windows 10 上的 python 升级到 3.9.5 - 64bit 后，我​​不再看到 403。如果你试一试，别忘了运行'pip freeze > requirements.txt'来导出包条目。我当然忘记了。这篇文章也是对我的提醒，当403将来再次出现时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-30T11:01:03.347

```
import urllib.request

bank_pdf_list = ["https://www.hdfcbank.com/content/bbp/repositories/723fb80a-2dde-42a3-9793-7ae1be57c87f/?path=/Personal/Home/content/rates.pdf",
"https://www.yesbank.in/pdf/forexcardratesenglish_pdf",
"https://www.sbi.co.in/documents/16012/1400784/FOREX_CARD_RATES.pdf"]

def get_pdf(url):
    user_agent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7'

    #url = "https://www.yesbank.in/pdf/forexcardratesenglish_pdf"
    headers={'User-Agent':user_agent,} 

    request=urllib.request.Request(url,None,headers) #The assembled request
    response = urllib.request.urlopen(request)
    #print(response.text)
    data = response.read()
#    print(type(data))

    name = url.split("www.")[-1].split("//")[-1].split(".")[0]+"_FOREX_CARD_RATES.pdf"
    f = open(name, 'wb')
    f.write(data)
    f.close()

for bank_url in bank_pdf_list:
    try: 
        get_pdf(bank_url)
    except:
        pass 
```

# html - 使用 twitter 引导程序的 Grails 页面布局

> ID：13303452
> 
> 赞同：0
> 
> 时间：2012-11-09T06:51:13.660
> 
> 标签：html, css, grails, twitter-bootstrap

嗨，我对 twitter bootstrap 很陌生。我已经安装了 grails 插件，我的`.gsp`文件如下所示：

```
<html>
   <head>
      <meta name="layout" content="main"/>
      <r:require modules="bootstrap"/>
   </head>   
<body>
    <div class="alert">
        <button type="button" class="close" data-dismiss="alert">×</button>
         <h4>Warning!</h4>
         Text goes here
    </div>
</body>   
</html> 
```

引导程序按预期工作。但是我的整个页面向左移动。看起来像 ：

![在此处输入图像描述](../Images/62201ea0aee07e19e5bd843cca9ccaa6.png)

不知道我在哪里犯错。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:03:19.260

您需要添加名为`container`.

```
<body>
<div class="container">
<div class="alert">
    <button type="button" class="close" data-dismiss="alert">×</button>
     <h4>Warning!</h4>
     Text goes here
</div>
</div>
</body> 
```

像这样......并检查。希望这对你有帮助。

[](http://www.w3resource.com/twitter-bootstrap/grid-system-tutorial.php)**EX的[**链接**](http://www.w3resource.com/twitter-bootstrap/grid-system-tutorial.php)**

# sencha-touch-2 - 披露按钮最初隐藏，然后可见

> ID：13303454
> 
> 赞同：1
> 
> 时间：2012-11-09T06:51:17.777
> 
> 标签：sencha-touch-2

我希望只有当我单击“编辑”按钮时，才能在列表的每个项目上看到披露按钮。我怎样才能做到这一点？？我试过“list.setOnItemDisclosure(true);” 单击编辑按钮但未出现披露。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:59:47.877

只需创建一个 css 类，其中 x-item-disclosure 将被隐藏：

```
.hidden-disclosure-list .x-list-disclosure {
  display: none;
} 
```

然后，当您想隐藏它们时，您只需执行以下操作：

```
list.addCls('hidden-disclosure-list'); 
```

当您想显示它们时，只需执行以下操作：

```
list.removeCls('hidden-disclosure-list'); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T08:08:49.777

操作列表的 onItemDisclosure 属性...单击编辑按钮切换列表的 onItemDisclosure 属性...

```
list.setOnItemDisclosure(true); 
```

# php - 将图像编码为字符串以包含在文档中

> ID：13303463
> 
> 赞同：2
> 
> 时间：2012-11-09T06:51:41.503
> 
> 标签：php, image-processing, svg, qr-code

**背景**

在我们公司，人工做的工作越少越好。我们的营销女士找到我，询问是否有办法使用 PHP 自动生成名片。我告诉她，如果她可以将模板保存为 SVG 文件，这应该不是问题。

所以她做到了。编辑文本非常简单，因为我只需找到详细信息空间并将其替换为用户输入。

**问题**

我目前遇到的最大问题是我从 Google Charts API 获得的二维码。二维码包含名片数据，便于保存到手机。通过调用 Google Charts API 检索 QR 码：

```
$request = "http://chart.apis.google.com/chart?chs=500x500&cht=qr&chld=M&chl=" . urlencode($vcard); 
```

`$vcard`我用 PHP 构建的 VCard在哪里。这是可行的，因为在扫描二维码时可以使用 VCard。

**我试过的**

由于 SVG 文件中的任何图像都被编码为文本，因此我尝试了以下方法：

```
file_get_contents($request); // Seems the encoding is of as there are weird characters in the result
img2php.class // Downloaded from PHP Classes, but only converts images in a directory 
```

**附加信息**

我意识到二维码是生成的PNG。不知道会不会影响回答。

另外，名片中的当前二维码编码如下：

```
<image overflow="visible" width="200" height="200"
xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEBZwFnAAD/
7AARRHVja3kAAQAEAAAAHgAA/+4AIUFkb2JlAGTAAAAAAQMA
EAMCAwYAAAReAAALrQAAHjX/2wCEABALCwsMCxAMDBAXDw0PFxsUEBAUGx8XFxcXFx8eFxoaGhoX
Hh4jJSclIx4vLzMzLy9AQEBAQEBAQEBAQEBAQEABEQ8PERMRFRISFRQRFBE
    ** random gibberish **
saaZZmll6QMgIAGkLbb5qxkhmSE47OSXBN9YXg81d+i5LV36LktWPktmRMsMqSFQrXIRg1v8bjuM
2IBmJtpbymu/Rclq79FyWrv0XJasl5p0mGQqABARbQW4fP8A/s//
2Q==" transform="matrix(0.2003 0 0 0.2003 56.5049 191.0313)">
</image> 
```

**问题**

有没有一种方法可以从 Google API 获取 QR 码，然后将其编码为字符串并将其添加到 SVG 模板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:21:42.770

而且我自己设法修复了它......并且通过使用更多的谷歌搜索。

首先，从 Google API 拉取图像：

```
$image = file_get_contents('http://chart.apis.google.com/chart?chs=500x500&cht=qr&chld=M&chl=' . urlencode($vcard)); 
```

然后只需使用[base64_encode](http://php.net/manual/en/function.base64-encode.php)将其编码为字符串：

```
$image = base64_encode($image); 
```

那行得通。二维码扫描正确。:D

# python - 烧瓶（使用 jinja2）可以使用“windows-1251”编码渲染模板吗？

> ID：13303464
> 
> 赞同：3
> 
> 时间：2012-11-09T06:51:44.453
> 
> 标签：python, crystal-reports, flask, jinja2

我为相当古老的报告系统编写了一个简单的前端，它使用 Crystal Reports 8 Web 组件服务器。我需要向这个 Web 组件发出“POST”请求。当我从使用标准 UTF-8 编码的页面发出请求时，所有表单数据也以 UTF-8 格式传递。这就是问题所在，因为 CR8 Web 组件服务器不理解 UTF-8（或者它理解了，我错了？）。我试图输入参数`accept-charset="ISO-8859-5"`并`accept-charset="windows-1251"`没有运气。

这里有更多信息，这可能很有用：

*   此前端将在带有 IIS6 的 Windows Server 2003 上运行，
*   唯一适合的浏览器是 IE，因为 CR8 Web Component Server 使用 ActiveX 组件。（还有一个 java 插件，但由于某种原因它根本不起作用）。

所以我需要flask（jinja2）来使用'windows-1251'编码来渲染模板，因为参数名称和值可以包含西里尔字符。我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:56:42.173

我找到了一个简单（甚至可能是愚蠢）的解决方案。而不是`return render_template('template.html', params**)`，我手动创建请求并将请求数据和标头设置为我需要的。

它看起来像这样：

```
r = Response()
    r.headers['Content-Type'] = 'text/html; charset=windows-1251'
    r.data = render_template('template.html', param1 = data).encode('cp1251') 
```

看起来像一个肮脏的黑客，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:44:08.503

如果您使用的是烧瓶，您是否阅读过以下内容：

[http://flask.pocoo.org/docs/unicode/](http://flask.pocoo.org/docs/unicode/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-26T11:07:55.293

在我的例子中，loaders.py 在几个地方有一个硬编码“utf-8”，我用“windows-1251”替换了它，对我来说一切正常！

# c# - 动态编译类库中的方法

> ID：13303468
> 
> 赞同：1
> 
> 时间：2012-11-09T06:52:00.690
> 
> 标签：c#, .net, vb.net

假设你有这个，它被编译成一个 dll：

```
namespace HelloWorld
{
   public class Hello
   {
        public void WriteHello()
        {
             Console.Writeline("Hello World");
        }

        **public void WriteHello2()
        {
             Console.Writeline("Hello World2");
        }**
   }
} 
```

我希望方法 WriteHello2 实际上在一个文本文件中，并从那里编译，在这个程序中。

**原因**

我想创建一个用户创建方法的界面。然后我会把这个方法写到一个文本文件中，这样每当程序运行时，它就会读入文本文件，并执行那段代码。

**例子**

假设我的 dll 仅包含 1 个方法，即 WriteHello。用户运行程序，然后创建一个新方法，比如 WriteHello2（他无法创建任何仅限于我的应用程序的方法）。现在 dll 应该包含 2 个方法。

我不确定这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:59:35.853

要从字符串编译代码，可以使用该[`CompileAssemblyFromSource`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromsource.aspx)方法。如果您希望保留更改，即让程序自行修改其二进制文件，事情会变得更加复杂。我不确定这是否是您想要的，但通过一些巧妙的临时文件处理和流程协调是可行的。

# android - EditText Settext 不适用于片段

> ID：13303469
> 
> 赞同：30
> 
> 时间：2012-11-09T06:52:09.607
> 
> 标签：android, android-edittext

我有 3 种屏幕状态的片段；添加、编辑和查看。在添加中，我创建一个实体并保存它。下次我在查看模式下打开它并使用设置实体名称

```
EditText entityName = (EditText) view.findViewById(R.id.entityName);    
entityName.setText(entity.getEntityname()); 
```

我从查看模式单击编辑按钮以打开编辑模式。我在这里更改实体名称并保存。这让我回到了视图屏幕。但我发现实体名称没有更新。我调试并发现它`entity.getEntityname()` 具有正确的值。我不确定为什么编辑文本没有新值。

有任何想法吗？

注意：我使用的是 android 版本 2.2

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-16T10:14:14.197

EditText 似乎有重置文本的问题`onCreateView`。所以这里的解决方案是重置`onResume`. 这行得通。

> onActivityCreated 也有问题。我在 onStart 中重置了 edittext 的内容，它可以工作。[归功于@savepopulation]

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-06-06T09:35:22.710

Android 中有一些 View 类应该在它们的容器分离时保存它们的状态。Fragment.onViewCreated() 应该在 View.onSaveInstanceState() 之前调用。所以如果你在方法 Fragment.onViewCreated() 中设置一个值。该值应在 View.onRestoreInstanceState(Parcelable state) 方法中清除。

比如TextView、RecyclerView等类。可以阅读TextView.java的代码：

```
 public Parcelable onSaveInstanceState() {
    Parcelable superState = super.onSaveInstanceState();

    // Save state if we are forced to
    final boolean freezesText = getFreezesText();
    boolean hasSelection = false;
    int start = -1;
    int end = -1;
    ....
    if (freezesText || hasSelection) {
        SavedState ss = new SavedState(superState);
        ....
    }
    ....
   } 
```

有参数来控制是否保存状态：“freezesText”和“hasSelection”。TextView 不能被选中，所以 hasSelection 为 false。函数 getFreezesText() 在 TextView 类中也返回 false。所以，TextView 不会保存状态。EditText.java 的代码：

```
 @Override
    public boolean getFreezesText() {
    return true;
    } 
```

EditText 返回 true，所以 EditText 应该保存状态。

> 有一些方法可以修复此错误：
> 
> > 1.执行EditText.getFreezesText()并返回false，并清除EditText中select的状态
> > 
> > 2.实现EditText的onSaveInstanceState，返回null。像这样：

```
 public Parcelable onSaveInstanceState() {
      super.onSaveInstanceState();
     return null;
 } 
```

> > 3.使用EditText.setSaveEnable(false);
> > 
> > 4.在xml中添加参数“saveEnable='false'”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-22T13:51:50.627

如前所述，EditText 似乎在 onCreateView 中重置文本存在问题。

这是因为一旦创建了一个片段，直到我们将它从后台堆栈中删除，它的方法 onResume 将被调用，因为视图不会再次创建。

所以这里的解决方案是重置onResume中的文字。即使您在该片段打开或您从另一个片段返回时锁定和解锁您的屏幕，这将始终有效

但是，如果您从包中设置此数据，则最好将该值保存在实例变量中，因为包可能为空，然后您可以解决空指针问题

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-22T13:38:15.437

根据@TusharVengrulekar，这就是你必须如何实现你的片段

```
public class ActionBar extends Fragment {

private TextView lbl_title;
private String title;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_action_bar, container, false);
    title = "Contacts";
    lbl_title = (TextView) view.findViewById(R.id.lbl_title);

    return view;
}

@Override
public void onStart(){
    super.onStart();

    lbl_title.setText(title);
}

@Override
public void onResume(){
    super.onResume();
}
}<!----> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-21T12:18:16.293

中也有问题`onActivityCreated`。我重置了edittext的内容`onStart`并且它可以工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-02T06:04:10.877

**这将适用于片段 100%**

```
 override fun onResume() {
    super.onResume()
    Handler(Looper.getMainLooper()).postDelayed({
       editText.setText("Abc")
    }, 500)

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-12T11:09:56.347

`onResume()`或者`onStart()`可以很好地重置 on`EditText`上的文本，`popBackStack()`但问题是当应用程序进入后台时，它们中的任何一个都将被触发，这不是应用程序的预期行为。我们也可以这样做，将文本重置为`EditText`-

```
override fun onViewStateRestored(savedInstanceState: Bundle?) {
   super.onViewStateRestored(savedInstanceState)
   binding.coolEt.setText("xyz")
} 
```

# c# - 删除 URL asp.net 中的文件扩展名

> ID：13303475
> 
> 赞同：1
> 
> 时间：2012-11-09T06:52:41.333
> 
> 标签：c#, asp.net, url-rewriting, seo

我目前正在我的网站中使用 URL 重写。

如果网址是`www.mywebsite.com/orders/Default.aspx?id=100`

它使网址为`www.mywebsite.com/orders/100`

如果有人试图破解 URL 并输入未知值，我会重定向到主页

现在我需要的是，如果有人试图破解 URL 并添加扩展名，如`.aspx`, `.jsp`, `.html`, `.html`, ....

例如：（`www.mywebsite.com/orders/100.aspx`黑客攻击后）。

我想删除这些扩展名并将查询字符串作为`www.mywebsite.com/orders/100`only 并处理它。

我在 StackOverflow 中看到了这种行为。

我能做到这一点吗？如果是怎么办？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:18:08.013

像你必须在 web 配置文件中配置的东西

```
<rewrite>
        <rules>
            <rule name="RewriteASPX">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="{R:1}.aspx" />
            </rule>
        </rules>
    </rewrite> 
```

这取自以下链接

[删除 HTML 或 ASPX 扩展](https://stackoverflow.com/questions/4481632/remove-html-or-aspx-extension)

# codeigniter - 关于使用 Codeigniter 的 Paypal

> ID：13303478
> 
> 赞同：-1
> 
> 时间：2012-11-09T06:53:07.003
> 
> 标签：codeigniter

我用codeigniter搜索了很多我无法找到Paypal解决方案的网站，大多数网站都说要从这个链接[CodeIgniter Wiki](http://codeigniter.com/wiki/PayPal_Lib/)下载，但它没有显示任何下载库，所以任何人都可以告诉我们如何开始在codeigniter中实现paypal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:45:33.067

我使用了 AngelEye 的解决方案 - 这是[介绍文章](https://www.x.com/devzone/articles/paypal-library-for-php-codeigniter-framework)和[下载链接](http://www.angelleye.com/download-codeigniter-php-library-for-paypal-payments-pro/)

# javascript - 使用javascript从字符串中删除字符

> ID：13303479
> 
> 赞同：11
> 
> 时间：2012-11-09T06:53:08.083
> 
> 标签：javascript

我有逗号分隔的字符串，比如

`var test = 1,3,4,5,6,`

我想使用 java 脚本从此字符串中删除特定字符

谁能建议我？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-09T06:58:46.553

JavaScript 字符串为您提供了[replace](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/replace)方法，该方法将替换第一个实例的字符串或替换所有实例的字符串作为参数`RegEx`，如果是全局的，则替换所有实例。

例子：

```
var str = 'aba';
str.replace('a', ''); // results in 'ba'
str.replace(/a/g, ''); // results in 'b' 
```

如果您提醒 str - 您将返回相同的原始字符串，因为字符串是不可变的。您需要将其分配回字符串：

```
str = str.replace('a', ''); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T06:57:25.450

使用`replace`，如果要删除多次出现的字符，请使用

像这样替换

```
var test = "1,3,4,5,6,";
var newTest = test.replace(/,/g, '-'); 
```

这里 newTest 将成为`"1-3-4-5-6-"`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T06:54:24.800

你可以使用 JavaScript`replace()`方法

```
var str="Visit Microsoft!";
var n=str.replace("Microsoft","My Blog"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T07:00:38.410

```
var test = '1,3,4,5,6';​​

//to remove character
document.write(test.replace(/,/g, '')); 

//to remove number
function removeNum(string, val){
   var arr = string.split(',');
   for(var i in arr){
      if(arr[i] == val){
         arr.splice(i, 1);
         i--;
      }
  }            
 return arr.join(',');
}

var str = removeNum(test,3);    
document.write(str); // output 1,4,5,6 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T07:03:00.760

你也可以

> var test1 = test.split(',');
> 
> 删除 test1[2];
> 
> var test2 = test1.toString();

玩得开心 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T07:08:28.770

您可以通过逗号将字符串拆分为一个数组，然后从该数组中删除特定元素 [字符或数字甚至字符串]。删除元素后，您可以再次将数组中的元素加入字符串

```
 ```
// Array Remove - By John Resig (MIT Licensed)
Array.prototype.remove = function(from, to) {
    var rest = this.slice((to || from) + 1 || this.length);
    this.length = from < 0 ? this.length + from : from;
    return this.push.apply(this, rest);
}; 
``` 
            回答 #7

赞同：0

时间：2019-06-03T18:12:22.333

你可以使用这个功能  

```
function removeComma(inputNumber,char='') {

        return inputNumber.replace(/,/g, char);
    } 
```

**更新**

```
 function removeComma(inputNumber) {
        inputNumber = inputNumber.toString();
        return Number(inputNumber.replace(/,/g, ''));
    } 
```

```

# php - 在使用 php 上传音频和 pdf 文件时需要帮助

> ID：13303481
> 
> 赞同：0
> 
> 时间：2012-11-09T06:53:22.887
> 
> 标签：php, file-upload

我遇到了文件上传问题。

我已经搜索了答案，但只找到了“增加 post_max_size 和 upload_max_filesize”的建议，这对我不起作用。

我无法上传大文件（约 20MB）小于 8MB 的文件可以正常工作，但任何更大的文件似乎都不起作用...我没有收到任何错误消息，但是当上传完成时，屏幕为空白，文件为在上传目录中找不到，以下是我的 php.ini 设置和我的环境

```
max_input_time -1
max_execution_time 600
memory_limit 512M
upload_max_filesize 100M
post_max_size 100M 
```

那么，有什么想法吗？我真的被困在这里无法解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:57:40.670

使用此代码进行文件上传

```
<?php
    $allowedExts = array("pdf", "mp3");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "pdf")
    || ($_FILES["file"]["type"] == "mp3")
    && ($_FILES["file"]["size"] < 20000)
    && in_array($extension, $allowedExts))
      {
      if ($_FILES["file"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
        }
      else
        {
            echo "Upload: " . $_FILES["file"]["name"] . "<br />";
            echo "Type: " . $_FILES["file"]["type"] . "<br />";
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
            echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";
            if (file_exists("upload/" . $_FILES["file"]["name"]))
              {
                  echo $_FILES["file"]["name"] . " already exists. ";
              }
            else
              {
                  move_uploaded_file($_FILES["file"]["tmp_name"],
                  "upload/" . $_FILES["file"]["name"]);
                  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
              }
        }
      }
    else
      {
      echo "Invalid file";
      }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:27:54.587

```
$_FILES["file"]["size"] < 20000 
```

20000 约为。20KB 不是 20MB

# java - 如何使用 selenium java 自动化 PHP-Flash Web 应用程序

> ID：13303483
> 
> 赞同：0
> 
> 时间：2012-11-09T06:53:28.100
> 
> 标签：java, php, flash, selenium, flash-builder

我需要使用 Flash 自动化 PHP 中的 Web 应用程序。是否可以使用带有 FlexUISelenium 或 FlexMonkium 的 selenium java 来自动化应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:53:59.363

如果它是没有 Flex 的纯 Flash，那么您应该在您的 Flash 应用程序中添加一些[类似这些](http://code.google.com/p/flash-selenium/)方法的外部方法，并从您的测试代码中调用它们以验证功能。如果它是 Flex，那么 FlexUISelenium 和 FlexMonkium 会帮助你——但你应该再次将这些库编译到你的 Flex 应用程序中——它们包含需要从 Selenium 调用的方法。

如果您不允许修改您的 Flash 应用程序，我建议您查看基于图像的工具，例如[Sikuli](http://www.sikuli.org/)

# asp.net - asp.net over 骑 css 菜单控制

> ID：13303484
> 
> 赞同：2
> 
> 时间：2012-11-09T06:53:36.243
> 
> 标签：asp.net, html, css

我正在创建一个 asp.net 网页，一些自动生成的 CSS 超出了我的样式表。我不确定属性将在哪里正确设置值，或者如何禁用我的 Web 应用程序自动生成的 CSS。这是代码。

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="FrontEnd.master.cs"     Inherits="pigninja.FrontEnd" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server" >
<title>Title</title>
<link href="../Styles/Styles.css" rel="Stylesheet" type="text/css" />
</head>
<body>
<form id="form1" runat="server">
<div id="pageWrapper">
<div id="header"></div>
<div id="navigation">
    <asp:Menu ID="Menu1" runat="server" Orientation="Horizontal" 
        Width="100%"   StaticItemFormatString="&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp; {0} &nbsp">
    <Items>
        <asp:MenuItem NavigateUrl="../Default.aspx" Text="Home" Value="Home">
        </asp:MenuItem>
        <asp:MenuItem NavigateUrl="../About.aspx" Text="About Me" Value="About Me">
        </asp:MenuItem>
        <asp:MenuItem NavigateUrl="../Programming.aspx" Text="Programming" 
            Value="Programming"></asp:MenuItem>
        <asp:MenuItem NavigateUrl="../Rants.aspx" Text="Rants" Value="Rants">
        </asp:MenuItem>
    </Items>
</asp:Menu></div>
<div id ="content"><asp:ContentPlaceHolder ID="Content" runat="server"> 
</asp:ContentPlaceHolder></div>
<div id="footer"><p>Footer</p></div>
</div>
</form>
</body>
</html> 
```

这是CSS

```
*
{
font-family: Arial, Sans-Serif;
}

body
{
margin: 0;
background-color:Black;
}

a
{
text-decoration: none;
color: #b30707;
} 

a:hover
{
text-decoration: underline;
}

#header
{
background-image: url(../img/header.jpg);
position:relative;
margin:auto;
height: 250px;
}

#pageWrapper
{
width:844px;
margin: auto;
background-color:#ccc;
}

#navigation
{
width: auto;
text-align:center;
height: 36px;
padding-top: 15px;
padding-left: 17px;
background-color: #9C989A
}

#content
{
border-style:solid;
border-width: 2px;
border-color: #b30707;
padding: 15px;
}

#footer
{
text-align:center;
} 
```

我添加了这一行来规避我的菜单控件没有正确跨越父元素的问题。一旦 CSS 按预期工作，我计划将其删除。

```
StaticItemFormatString="&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp; {0} &nbsp" 
```

这是按要求呈现的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><title>
Title
</title><link href="Styles/Styles.css" rel="Stylesheet" type="text/css" /><style   type="text/css">
/* <![CDATA[ */
#Menu1 { width:100%; }
#Menu1 img.icon { border-style:none;vertical-align:middle; }
#Menu1 img.separator { border-style:none;display:block; }
#Menu1 img.horizontal-separator { border-style:none;vertical-align:middle; }
#Menu1 ul { list-style:none;margin:0;padding:0;width:auto; }
#Menu1 ul.dynamic { z-index:1; }
#Menu1 a { text-decoration:none;white-space:nowrap;display:block; }
#Menu1 a.static { padding-left:0.15em;padding-right:0.15em; }
#Menu1 a.popout { background-image:url("/WebResource.axd?  d=xjCds24on9XfE0DBajC4vRjqPwEZnPWc2oYtv118cqG5ViUhvTqbbGX-  kFRHBgPTk01twuHMnUgYwxiSOFVm4FdDFd1DRzkQC6dPTjhsTD81&t=634773918900000000");background-  repeat:no-repeat;background-position:right center;padding-right:14px; }
/* ]]> */
</style></head>
<body>
<form method="post" action="" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE"     value="/wEPDwULLTEwMDUyNjYzMjhkZMqkGL/k2S4bUfDNJETNEEgreeQwj//8qMPH/3Jfp1j8" />
</div>

<script src="/WebResource.axd?d=JhWUzx8WLq0au7xqJj_xdb8v-NEKpWcJ1R4twSIpfaW-Hg2- LRc2Fqrqmb31NCEsThyJFzieaKJwGQI8BjHNp9tN4M8jNjJ1fHS70aQkb681&amp;t=634773918900000000"   type="text/javascript"></script>
 <div id="pageWrapper">
<div id="header"></div>
<div id="navigation"><a href="#Menu1_SkipLink"><img alt="Skip Navigation Links"  src="/WebResource.axd? d=uVlrphLtejMyCQfMUd5MSwr7OFiIQBNYbtiTqDgsAQmI5_6XjhY8AFmAwPz4RAV7D87YEb3m48XzVHtpmam77PhCI6     AVXXVAbALWvpCcB1w1&amp;t=634773918900000000" width="0" height="0" style="border- width:0px;" /></a><div id="Menu1">
<ul class="level1">
    <li><a class="level1"  href="Default.aspx">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  Home &nbsp</a>   </li><li><a class="level1"  href="About.aspx">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  About Me  &nbsp</a></li><li><a class="level1"  href="Programming.aspx">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  Programming  &nbsp</a></li><li><a class="level1"  href="Rants.aspx">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  Rants &nbsp</a>   </li>
</ul>
</div><a id="Menu1_SkipLink"></a></div>
<div id ="content">
<p>Content</p>
</div>
 <div id="footer"><p>Footer.</p></div>
</div>

<script type='text/javascript'>new Sys.WebForms.Menu({ element: 'Menu1', disappearAfter: 500, orientation: 'horizontal', tabIndex: 0, disabled: false });</script></form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:10:29.960

我最终做的是关闭通过属性窗口内联应用的 CSS。更具体地说，我将“IncludeStyleBlock”属性设置为 false。在我这样做之前，我从我的视图源中获取了自动生成的 CSS 并将它放在我的样式表中。然后我能够更好地控制 CSS，但它并没有解决我的问题。为了解决我的问题，我必须像这样在我的 asp:Menu 块中包含一个 CssClass="menuClass" 。

```
<asp:Menu ID="Menu1" runat="server" Orientation="Horizontal" 
        IncludeStyleBlock="False" StaticEnableDefaultPopOutImage="False"    CssClass="menuClass"> 
```

然后我依次设置我的 CSS 属性。

```
.menuClass a.static.highlighted
{
color:Red !important;
text-decoration:underline !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T16:05:05.477

ASP.NET 放入的锚标记会自动在菜单上方添加额外的垂直空间。一个锚标记会自动放在菜单上方，这会破坏 Internet Explorer 和 Google Chrome 中的呈现。即使使用带有图像的锚点，它也可以在 Mozilla Firefox 中正常工作。

要解决此问题，请将 SkipLinkText="" 属性添加到您的 ASP.NET 菜单控件，这将解决呈现问题。

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal" SkipLinkText=""> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:26:40.863

[众所周知](https://stackoverflow.com/questions/2655377/how-to-style-an-asp-net-menu-with-css)，默认的 Menu 控件对 CSS 不友好。
您可以通过使用 CSS 友好的菜单控制适配器来解决此问题。

看看asp.net 团队提供的这个[Menu 控件适配器。](http://www.asp.net/cssadapters/Menu.aspx)
它将帮助您摆脱在设置 asp.net 菜单样式时需要的大量 CSS hack。

如果您不知道控制适配器，您应该参考[演练](http://www.asp.net/cssadapters/WalkThru/WalkThrough.aspx)开始。

# android - 即使按下后退按钮，也不会在 AsynchTask 上停止下载

> ID：13303485
> 
> 赞同：0
> 
> 时间：2012-11-09T06:53:40.917
> 
> 标签：android, android-asynctask, android-alertdialog

我正在 AsynchTask 中下载 pdf 文件，因此在下载文件时，我的进度对话框正在更新。但是问题是，如果我按下后退按钮，我的警报框就会弹出，并且下载会在后台停止。我希望即使在调用警报对话框后它也应该继续下载，或者在弹出警报后暂停下载，如果我单击警报对话框的取消按钮，则继续下载一次。

这是一个片段，

```
@Override
protected Dialog onCreateDialog(int id)
{
 switch (id)
 {
  case progress_bar_type:
  pDialog = new ProgressDialog(this);
  pDialog.setMessage("Downloading file. Please wait...");
  pDialog.setIndeterminate(false);
  pDialog.setMax(100);
  pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
  pDialog.setCancelable(true);
  pDialog.show();
  pDialog.setOnKeyListener(new DialogInterface.OnKeyListener() 
  {
   @Override
   public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) 
   {
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
     running = false;

        AlertDialog.Builder  alertDialog = new AlertDialog.Builder(context);
        AlertDialog.setIcon(R.drawable.ic_launcher);
        alertDialog.setTitle("Ariisto");
        alertDialog.setMessage("Do you Want to Cancel the Download ?");
    alertDialog.setCancelable(true);
    alertDialog.setPositiveButton("YES", new DialogInterface.OnClickListener() 
        {
        @Override
public void onClick(DialogInterface dialog, int which) 
{
                                // TODO Auto-generated method stub

                                File externalFile = new File(Environment.getExternalStorageDirectory(),"downloadedfile.pdf");
                                externalFile.delete();
                                pDialog.dismiss();
                                running = false;
                                Log.d("External File", "DELETED");
                                pDialog.setProgress(0);
                                count = 2;

                            }
                        });
                        alertDialog.setNegativeButton("NO", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                // TODO Auto-generated method stub
                                new DownloadFileFromURL().execute(file_url);
                                running = true;
                                count = 0;
                            }
                        });

                        AlertDialog alert = alertDialog.create();

                            alert.show();

                    }

                    return false;

                }
            });

            return pDialog;
        default:
            return null;
        }
    }
    class DownloadFileFromURL extends AsyncTask<String, String, String> 
    {

        /**
         * Before starting background thread
         * Show Progress Bar Dialog
         * */

        @SuppressWarnings("deprecation")
        protected void onPreExecute()
        {
            super.onPreExecute();
            showDialog(progress_bar_type);
            publishProgress(""+(int)(0));
            running = true;
        }

        @Override
        protected void onCancelled() {
            // TODO Auto-generated method stub

            Log.d("------------","iNSIDE ON CANCELLED METHOD");

            super.onCancelled();
        }

        @Override
        protected String doInBackground(String... file_url) 
        {
            // TODO Auto-generated method stub
            int count;
            try
            {
                URL url = new URL(file_url[0]);
                URLConnection connection = url.openConnection();
                connection.connect();
                // getting file length
                int lenghtOfFile = connection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(), 8192);

                // Output stream to write file
                FileOutputStream output = new FileOutputStream("/sdcard/downloadedfile.pdf");

                byte data[] = new byte[1024];

                long total = 0;

                while (   ((count = input.read(data)) != -1) && (running == true)  ) 
                {

                    total += count;

                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress(""+(int)((total*100)/lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }

                output.flush();

                // closing streams
                output.close();
                input.close();
            }
            catch (Exception e)
            {
                Log.e("Error: ", " "+e.getMessage());
            }
            return null;
        }

        protected void onProgressUpdate(String... progress) 
        {
            // setting progress percentage
            pDialog.setProgress(Integer.parseInt(progress[0]));
        }
        @SuppressWarnings("deprecation")
        protected void onPostExecute(String file_url) 
        {
            // dismiss the dialog after the file was downloaded
            if(running == true){
                dismissDialog(progress_bar_type);
                // Displaying downloaded image into image view
                // Reading image path from sdcard
                String imagePath = Environment.getExternalStorageDirectory().toString() + "/downloadedfile.pdf";
                // setting downloaded into image view
                Log.d(imagePath, "show file");
                File file = new File(Environment.getExternalStorageDirectory(),"downloadedfile.pdf");
                Uri external = Uri.fromFile(file);

                viewPdf(external);
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:13:36.767

我有一个与此非常相似的要求。用户将单击 listItem，AsyncTask 将开始下载它，然后在完成后显示它。如果用户在下载完成之前点击后退按钮，则会显示一个警告对话框，询问是否中止下载。如果在显示该对话框时下载完成，它只会关闭该对话框并完成该活动。我没有时间提取和清理代码，但模式如下：

该活动有两个私有字段：

```
private DownloadTask downloader = null;
private AlertDialog dlgCancel = null; 
```

在 onBackPressed 中：

```
if( downloader != null ) {
    dlgCancel =....
    dlgCancel.show();
} else
    finish(); 
```

在 DownloadTask 的 onPostExecute 中：

```
if( isCancelled() ) {
    ... dismiss the download
} else { 
    if( dlgCancel == null ) {
        ... handle the download here ...
    } else {
        dlgCancel.dismiss();
        dlgCancel = null;
        Activity.finish();
    }
} 
```

最后，在 Abort-Download 按钮的 onClick 中：

```
downloader.cancel( true );
Activity.finish(); 
```

请注意，您需要注意 AsyncTask 的 doInBackground() 中的 isCancelled()，以便尽快做出反应。有些操作不会立即返回。

# sql - 如何使用两个表中的公共字段计数和分组编写 SQL

> ID：13303498
> 
> 赞同：2
> 
> 时间：2012-11-09T06:55:08.010
> 
> 标签：sql, join, count, group-by, sql-server-2008-r2

我在 SQL Server 2008 R2 中有两个表：

```
Store:                      Record:
--------------              ------------------------
Shape       ID              PickedShape     Finished
Circle      1               Circle          Y
Circle      2               Circle          N
Circle      3               Square          N
Square      1               Square          N
Square      2               Oval            Y
Triangle    1               Oval            Y 
```

我想编写一个 SQL 查询来输出两个表中所有可能的形状及其计数。我可以用愚蠢的方式写它，比如

```
select 
    'Circle', (select count(1) from Store where Shape = 'Circle'), 
    (select count(1) from Record where PickedShape = 'Circle'), 
    (select count(1) from Record where Finished = 'Y' and PickedShape = 'Circle') 
UNION
select 
    'Square', (select count(1) from Store where Shape = 'Square'), 
    (select count(1) from Record where PickedShape = 'Square'), 
    (select count(1) from Record where Finished = 'Y' and PickedShape = 'Square') 
UNION... 
```

继续，但这只是愚蠢而且效率不高。

我认为更聪明的方法是使用 group by。由于有些人可能不喜欢用勺子喂别人，所以这是我尝试过的

```
SELECT 
    Shape, COUNT(Shape) AS Available, Picked, Finished
FROM 
    Store 
FULL JOIN 
    (SELECT PickedShape, COUNT(1) As Picked, SUM(CASE WHEN Finished='Y' THEN 1 ELSE 0 END) AS Finished 
     FROM Record 
     GROUP BY PickedShape) t2 ON Store.Shape = t2.PickedShape
GROUP BY 
    Shape, Picked, Finished 
```

输出是

```
Shape   Available   Picked  Finished
NULL        0       2       2
Circle      3       2       1
Square      2       2       0
Triangle    1       NULL    NULL 
```

你可以看到问题出在哪里。

首先，我想在 Shape 下使用“Oval”而不是 NULL。使用 FULL JOIN 为我提供了两个表中的所有变体，但没有显示它们......

其次，我希望 Picked and Finished 为缺失的显示 0 而不是 NULL。

第三，如果可能的话，我希望 SQL 更高效。

你如何解决这些问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:41:50.163

我稍微修改了您的查询在您按形状分组的第一个查询中，但第一个查询中不存在“椭圆”。因此 Shape 从派生查询中接收。派生查询中不存在三角形，因此其数量等于 0。

```
SELECT 
  COALESCE(Shape, t2.PickedShape) AS Shape, COUNT(Shape) AS Available,
  ISNULL(Picked, 0) AS Picked, ISNULL(Finished, 0) AS Finished
FROM 
 Store 
FULL JOIN 
  (SELECT PickedShape, COUNT(1) As Picked, SUM(CASE WHEN Finished='Y' THEN 1 ELSE 0 END) AS Finished 
   FROM Record 
   GROUP BY PickedShape) t2 ON Store.Shape = t2.PickedShape
GROUP BY 
  Shape, t2.PickedShape, Picked, Finished 
```

# mysql - 按前五个重复 ID 排序

> ID：13303507
> 
> 赞同：-1
> 
> 时间：2012-11-09T06:55:45.640
> 
> 标签：mysql, sql-order-by

我的数据库中有一个表，`duplicate_id`其中包含多个 id，并且其中还包含许多重复的 id。我一直在尝试做的是对表中重复次数最多的前五个 id 进行排序`duplicate_id`。请让我知道我该怎么做

**表结构：** ID | 信息

**预期输出：**

身份证 | 重复次数

201 8

212 7

205 5

209 3

229 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:58:06.690

```
SELECT ID, COUNT(*) AS `Number of repeats`
FROM duplicate_id
GROUP BY ID
ORDER BY COUNT(*) DESC
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:57:34.403

尝试按以下顺序排序您的结果：

```
Select * from table order by repeats desc limit 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:02:23.237

好吧...试试这个（我不知道mysql，所以我不得不猜测）

```
select ID, 
       count(*) as 'Number of Repeats'
from   duplicate_ID
group  by ID
order  by 2 
```

另一种方法是

```
select ID, 'Number of Repeats'
from (
  select ID, 
         count(*) as 'Number of Repeats'
  from   duplicate_ID
  group by ID
  ) x
order by 'Number of Repeats' 
```

# json - json转html的代码

> ID：13303509
> 
> 赞同：0
> 
> 时间：2012-11-09T06:55:52.020
> 
> 标签：json, html-parsing

我有以下 json 格式。我想在 html 中显示每个字段。如何将值从 json 检索到 html

> [{"node_title":"king","nid":"6","Body":"
> 
> 这是国王
> 
> \n"},{"node_title":"sree","nid":"3","Body":"
> 
> ggbderfrtgrsf
> 
> \n"}]

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:02:24.863

```
 <!DOCTYPE html>
<html>
<body>
<h2>JSON Object Creation in JavaScript</h2>

<p>
Name: <span id="jname"></span><br />
Age: <span id="jage"></span><br />
Address: <span id="jstreet"></span><br />
Phone: <span id="jphone"></span><br />
</p>

<script>
var JSONObject= {
"name":"John Johnson",
"street":"Oslo West 555",
"age":33,
"phone":"555 1234567"};
document.getElementById("jname").innerHTML=JSONObject.name
document.getElementById("jage").innerHTML=JSONObject.age
document.getElementById("jstreet").innerHTML=JSONObject.street
document.getElementById("jphone").innerHTML=JSONObject.phone
</script>

</body>
</html> 
```

使用这样的东西。这是来自[w3Schools](http://www.w3schools.com/json/json_intro.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:21:17.240

使用[敲除.js](http://knockoutjs.com/)

```
<div>
   <!-- ko foreach: values -->
    <p>node_title: <span data-bind='text: node_title' ></span></p> 
    <p>nid: <span data-bind='text: nid'></span></p> 
    <p>Body: <span data-bind='text: Body'></span></p>
    <!-- /ko -->    
</div>​ 
```

javascript

```
var ViewModel = function(data) {
    this.values = ko.observableArray(data);
};

ko.applyBindings(new ViewModel([{"node_title":"king","nid":"6","Body":"This is king\n"},{"node_title":"sree","nid":"3","Body":"ggbderfrtgrsf\n"}]));​ 
```

[JSFiddle示例](http://jsfiddle.net/LkqTU/5241/)

# openoffice.org - 从openoffice calc中的单元格中提取数字

> ID：13303515
> 
> 赞同：8
> 
> 时间：2012-11-09T06:56:12.970
> 
> 标签：openoffice.org, openoffice-calc, libreoffice

我在开放式办公室有一个专栏，如下所示：

abc-23

abc-32

abc-1

现在，我只需要使用 calc 中的公式和正则表达式来获得数字 23、32 和 1 的总和。我怎么做？

我试过

```
=SUMIF(F7:F16,"([:digit:].)$") 
```

但不知何故，这不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-08-27T10:03:07.503

从 LibreOffice 6.4 开始，您可以使用新添加的[REGEX 函数](https://help.libreoffice.org/6.2/en-US/text/scalc/01/func_regex.html)通过正则表达式从单元格/文本中提取所有数字：

```
=REGEX(A1;"[^[:digit:]]";"";"g") 
```

**替换`A1`**为要从中提取数字的单元格引用。

## `REGEX`函数参数说明：

参数用分号隔开`;`

1.  `A1`：从中提取数字的值。可以是单元格引用 (like `A1`) 或引用的文本值 (like `"123abc"`)。以下正则表达式将应用于此单元格/文本。
2.  `"[^[:digit:]]"`: 匹配每一个不是十进制数字的字符。另请参阅[LibreOffice 中的正则表达式列表](https://help.libreoffice.org/6.2/en-US/text/shared/01/02100001.html?&DbPAR=WRITER&System=MAC)
    *   外部方括号`[]`封装了要搜索的字符列表
    *   `^`添加一个**NOT ，表示搜索列表中***未*包含的每个字符都匹配
    *   `[:digit:]`代表任何十进制数字
3.  `""`: 用空替换匹配的字符（每个非数字）=删除它们
4.  `"g"`: 替换所有匹配项（不要在第一个非数字字符后停止）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:12:41.757

不幸的是，Libre-Office 仅在查找/替换和搜索中支持正则表达式。如果这是一次性交易，我会将 A 列复制到 B 列，然后在 B 中使用 [data] [text to columns] 并使用 - 作为分隔符，将 B 列中的所有文本和C列中的数字。

或者，您可以在 B 列中使用 =Right(A1,find("-",A1,1)+1)，然后对 C 列求和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-26T17:46:41.157

我认为这并不完全是您想要的，但也许它可以帮助您或其他人。

这一切都是关于`substring`（在`Calc`被调用的`[MID][1]`函数中）：

**首先：**选择您的单元格（例如带有“ `abc-23`”内容）。

**其次：**输入起始长度（" `british`" --> `start length 4 = tish`）。

**之后：**要打印所有剩余的文本，您可以在参数中使用`[LEN][2]`带有单元格（“”）的函数（称为长度）`abc-23`。代码现在看起来像这样：

```
D15="abc-23"
=MID(D15; 5; LEN(D15)) 
```

输出是：`23`

当您编辑数字时（在此示例中为 23），没问题。但是，如果您**在之前更改任何内容**（文本“ `abc-`”），算法就会崩溃，因为开始长度被定义为“5”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-01T12:42:43.227

将字符串粘贴到单元格中，打开搜索和替换对话框 (ctrl + f) 扩展搜索选项标记正则表达式搜索 ([\s,0-9])([^0-9\s])+ 并将其替换为1美元

根据您的需要调整正则表达式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-03T04:50:09.263

我没有弄清楚如何直接在 OpenOffice/LibreOffice 中执行此操作。在网上搜索和尝试各种公式时遇到挫折后，我意识到我的工作表是一个简单的 CSV 格式，所以我在 vim 中打开它，并使用 vim 内置的类似 sed 的功能在 vim 命令模式下查找/替换文本：

```
:%s/abc-//g 
```

这仅对我有用，因为没有其他列具有此匹配文本。如果有其他列具有相同的文本，那么解决方案会更复杂一些。

如果您的工作表不是 CSV，您可以将列复制到文本文件并使用 vim 查找/替换，然后将数据粘贴回电子表格。对我来说，这比试图在 LibreOffice 中解决这个问题更令人沮丧……

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2015-10-29T14:03:38.360

在不知道是否真的有兴趣的情况下，我不会为解决方案而烦恼，但是，您可以编写一个宏来执行此操作。提取所有数字，然后通过检查文本中包含的数字来实现总和。

# c# - 使用 ADO.NET 更新 MySQL 行

> ID：13303519
> 
> 赞同：1
> 
> 时间：2012-11-09T06:56:22.783
> 
> 标签：c#, asp.net, mysql

我正在尝试使用 ASP.NET 从 ASP.NET 中更新 MySQL 数据库中的一行。

```
 MySqlConnection cnx = new MySqlConnection(con);
    MySqlDataAdapter adapter = new MySqlDataAdapter();

    DataTable dt = new DataTable();

    dt.Columns.Add("id", typeof(Int32) );
    dt.Columns.Add("config", typeof(string) );
    dt.TableName = "sharding_conf";
    DataRow dr =  dt.NewRow();
    dr["id"] = 1;
    dr["config"] = json;
    int ok = adapter.Update(dt);

    lblTest.Text = ok.ToString();

    cnx.Dispose();
    adapter.Dispose(); 
```

但是该行没有更新，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:10:14.837

```
Please you done like that ex: 

SqlConnection sqlConnection1 = new SqlConnection("Your Connection String");
SqlCommand cmd = new SqlCommand();

cmd.CommandText = "insert into tablename(colname1,columnname2) values(val1,val2)";
cmd.CommandType = CommandType.Text;
cmd.Connection = sqlConnection1;

sqlConnection1.Open();

cmd.ExecuteNonQuey();

sqlConnection1.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:13:07.373

我认为您缺少 mySqlconnection 实例作为参数[`MysqlDataAdapter`](http://www.devart.com/dotconnect/mysql/docs/Parameters.html)

如果不是，请尝试使用[`mySqlCommand`](http://www.devart.com/dotconnect/mysql/docs/Parameters.html)其中传递您的`Update`查询的替代方式。我只知道这么多。

而不是手动处理您的对象，而是使用[`Using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)语句。

请参阅此**[链接](http://www.codeproject.com/Articles/71346/Connecting-to-MySQL-Database-using-C-and-NET)**以获取更多理解。

# android - 是否可以从应该支持所有设备屏幕尺寸的 android 画布上的 URL 设置图像？

> ID：13303526
> 
> 赞同：0
> 
> 时间：2012-11-09T06:56:43.780
> 
> 标签：android

我正在尝试从画布上的 url 设置图像，并且所有设备屏幕都应支持该图像，在 android 中是否可以在没有九个补丁图像的情况下执行此操作？

此外，我无法从可绘制资源中为不同的屏幕尺寸设置不同尺寸的图像，因为我是从 URL 获取图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:36:08.483

我可以建议你一个选择，

```
URL url = new URL(urlString); //Convert url string to url object.
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setDoInput(true);
connection.connect();
InputStream input = connection.getInputStream();
Bitmap myImageBitmap = BitmapFactory.decodeStream(input);
Bitmap resizedImage = Bitmap.createScaledBitmap(myImageBitmap, dstWidth, dstHeight, true);
// dstWidth & dstHeight are the needed size of image. 
```

关于屏幕尺寸，您可以通过覆盖`onSizeChanged (int w, int h, int oldw, int oldh)`View 类的方法来获取它，其中 w & h 是屏幕的当前宽度和高度。

# c - 警告：由于数据类型的范围有限，比较总是正确的

> ID：13303528
> 
> 赞同：0
> 
> 时间：2012-11-09T06:57:02.620
> 
> 标签：c

我正在测试这个应该读取用户输入的函数，但它给我带来了分段错误

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

#define MAX_STRING_LENGTH 10

int 
readinput(char *input)
{
    int c;
    int i=0;
    while((c=getchar()) != EOF && c != '\n')  //Here is where the warning occurs.
    {
        input[i]=c;
        i++;
    }
    input[i]=0;
    if(strlen(input)>0)
    {
        if(isalpha(input[0]) && input[1]=='-' && isalpha(input[2]) && strlen(input)==3)
            return 0;
        else if(!strcmp(input, "quit"))
            return 1;
        else if(!strncmp(input, "save ", 5))
            return 2;
        else if(!strcmp(input, "undo"))
            return 3;
    }
    return -1;
}

int main()
{
   char *str;
   printf("write a string\n");
   int nr=readinput(str);
   printf("%d\n", nr);
   printf("%s\n", str);
   return 0;
} 
```

我确实注意到了我犯的愚蠢错误，但仍然存在分段错误，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:59:34.933

这是因为 EOF 被定义（在我的编译器中）为 -1 而 char 是无符号字节。所以它总是！=

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:59:44.443

```
 c != '/n' is wrong

 change it to 

  c != '\n' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T07:00:03.900

`c != '/n'`应该`c != '\n'`

`\`是一个转义字符，在它后跟 的情况下表示`n`换行符。 `/n`将被视为两个不同的字符，不能正确地与单个`char`变量进行比较。

至于你的分段错误，你需要`str`在你的`main`函数中分配一些空间：

```
char* str = malloc(sizeof(char)*MAX_STRING_LENGTH); 
```

或者

```
char str[MAX_STRING_LENGTH]; 
```

但是您还必须确保不要尝试读取字符数超过`str`数组可以容纳的字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T07:07:22.663

它出错是因为您从未为其分配空间`str`并且它指向一个随机位置，这导致 readinput 尝试将数据存储在不存在的位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T07:06:30.443

出现分段错误是因为您将未初始化的指针传递给 function `readinput()`。您需要执行以下操作：

```
char str[4096];

int nr = readinput(str); 
```

您应该传入数组的长度，以便被调用的代码可以验证它不会溢出其边界。或者你可以危险地生活并决定 4096 足够大，直到有人试图故意破坏你的程序。

* * *

最初的编译器警告是因为多字符常量`'/n'`的值（类型`int`）超出了可以存储在 a 中的值范围`char`，所以当`c`提升为时`int`，`!=`与（实现定义的）值的`'/n'`比较是一定是真的。因此警告：

```
Warning: comparison is always true due to limited range of data type 
```

所有多字符字符常量都有实现定义的值。没有可移植的多字符字符常量。

ISO/IEC 9899:2011 §6.4.4.4 字符常量

> ¶10 ...包含多个字符（例如， `'ab'`）的整数字符常量的值，或包含不映射到单字节执行字符的字符或转义序列的值是实现定义的。...

# c# - 无法初始化集合但 nhibernate 生成正确的 sql 并在 sql server 中执行没有错误

> ID：13303529
> 
> 赞同：2
> 
> 时间：2012-11-09T06:57:08.820
> 
> 标签：c#, nhibernate

NHibernate 遇到一些错误，例如“无法初始化集合”，但似乎已生成正确的 sql 并成功从数据库中检索数据。

这是我的代码和日志，请帮助检查它们。谢谢。

**(1) 域实体代码：**

```
[Serializable]
    class ProductionOrderLineItem : IProductionOrderLineItem
    {
        protected IProductionOrder _productionOrder;
        protected int? _lineNum;
        protected IItem _item;
        protected decimal? _baseQty;
        protected decimal? _plannedQty;
        protected decimal? _issuedQty;
        protected string _issueType;
        protected IWarehouse _warehouse;

        public virtual IProductionOrder ProductionOrder
        {
            get { return _productionOrder; }
            private set { _productionOrder = value; }
        }

        public virtual int? LineNum
        {
            get { return _lineNum; }
            private set { _lineNum = value; }
        }

        public virtual IItem Item
        {
            get { return _item; }
            private set { _item = value; }
        }

        public virtual decimal? BaseQty
        {
            get { return _baseQty; }
            private set { _baseQty = value; }
        }

        public virtual decimal? PlannedQty
        {
            get { return _plannedQty; }
            private set { _plannedQty = value; }
        }

        public virtual decimal? IssuedQty
        {
            get { return _issuedQty; }
            private set { _issuedQty = value; }
        }

        public virtual string IssueType
        {
            get { return _issueType; }
            private set { _issueType = value; }
        }

        public virtual IWarehouse Warehouse
        {
            get { return _warehouse; }
            private set { _warehouse = value; }
        }

        public override bool Equals(object obj)
        {
            if (null == obj)
                return false;
            var t = obj as IProductionOrderLineItem;
            if (null == t)
                return false;
            if (ProductionOrder == t.ProductionOrder && LineNum == t.LineNum && Item == t.Item)
                return true;
            return false;
        }

        public override int GetHashCode()
        {
            return string.Format("{0}#{1}#{2}", ProductionOrder.ProductionOrderId, LineNum, Item.ItemCode).GetHashCode();
        }
    } 
```

**(2) O/R 映射：**

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
<class name="MyProject.Production.ProductionOrderLineItem, MyProject" table="ProductionOrderLineItems" proxy="MyProject.Production.IProductionOrderLineItem, MyProject">
    <composite-id>
        <key-many-to-one name="ProductionOrder" class="MyProject.Production.ProductionOrder, MyProject" column="ProductionOrderId"/>
        <key-property name="LineNum" type="int" column="LineNum"/>
    </composite-id>
    <many-to-one name="Item" class="MyProject.Inventory.Item, MyProject">
        <column name="ItemCode" sql-type="nvarchar" length="20"/>
    </many-to-one> 
```

**(3) NHibernate 错误日志：**

```
2012-11-09 13:30:34,354 [4] DEBUG NHibernate.SQL [(null)] - SELECT lineitems0_.ProductionOrderId as ProductionOrderId1_, lineitems0_.LineNum as LineNum1_, lineitems0_.ProductionOrderId as ProductionOrderId9_0_, lineitems0_.LineNum as LineNum9_0_, lineitems0_.ItemCode as ItemCode9_0_, lineitems0_.BaseQty as BaseQty9_0_, lineitems0_.PlannedQty as PlannedQty9_0_, lineitems0_.IssuedQty as IssuedQty9_0_, lineitems0_.IssueType as IssueType9_0_, lineitems0_.warehouse as warehouse9_0_ FROM ProductionOrderLineItems lineitems0_ WHERE lineitems0_.ProductionOrderId=@p0;@p0 = 1680
2012-11-09 13:30:34,374 [4] DEBUG NHibernate.Event.Default.DefaultLoadEventListener [(null)] - loading entity: [MyProject.Production.ProductionOrder#1680]
2012-11-09 13:30:34,376 [4] DEBUG NHibernate.Event.Default.DefaultLoadEventListener [(null)] - entity found in session cache
2012-11-09 13:30:34,397 [4] DEBUG NHibernate.Driver.NHybridDataReader [(null)] - running NHybridDataReader.Dispose()
2012-11-09 13:30:34,399 [4] DEBUG NHibernate.AdoNet.AbstractBatcher [(null)] - Closed IDataReader, open IDataReaders :0
2012-11-09 13:30:34,400 [4] DEBUG NHibernate.AdoNet.AbstractBatcher [(null)] - DataReader was closed after 43 ms
2012-11-09 13:30:34,402 [4] DEBUG NHibernate.AdoNet.AbstractBatcher [(null)] - Closed IDbCommand, open IDbCommands: 0
2012-11-09 13:30:34,403 [4] DEBUG NHibernate.AdoNet.ConnectionManager [(null)] - aggressively releasing database connection
2012-11-09 13:30:34,404 [4] DEBUG NHibernate.Connection.ConnectionProvider [(null)] - Closing connection
2012-11-09 13:30:34,409 [4] DEBUG NHibernate.Util.ADOExceptionReporter [(null)] - could not initialize a collection: [MyProject.Production.ProductionOrder.LineItems#1680] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:29:55.537

查看所有内部异常及其消息。80% 的时间你都可以在这里找到解决方案。

如果这不能解决它：

1.  错误日志没有列出任何实际错误，但也许这就是你的意思？
2.  异常发生在哪里，你做了什么来触发它？

# javascript - 如何根据设备方向调用两个 HTML 文件

> ID：13303543
> 
> 赞同：0
> 
> 时间：2012-11-09T06:58:25.910
> 
> 标签：javascript, html, ipad

我正在从 JavaScript 函数调用两个 HTML`portrati.html`文件`ladnscape.html`

使用以下代码，当我们第一次加载时它可以在浏览器上运行，但是当我们改变方向时它不会改变文件。

```
<SCRIPT language="JavaScript">
 if(window.innerHeight < window.innerWidth){
    window.location="Landscape/index.html";
} 
else if (window.innerHeight > window.innerWidth){
    window.location="Potrait/index.html";
}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:20:08.173

iOS 上的 Safari 有一个事件：

```
window.onorientationchange 
```

您可以使用它来检测更改。

```
window.onorientationchange = function() {
    switch (window.orientation) {
        case 0: // portrait
            window.location = "Portrait/index.html";
            break;
        case 90: // Landscape
            window.location = "Landscape/index.html";
            break;
        case -90: // Other way round
            window.location = "OtherLandscape/index.html";
            break;
    }
} 
```

这仅从 iOS 4 开始运行。如果您使用的是旧版本，则应使用 onresize-Event：

```
window.onresize = function() {
     if(window.innerHeight < window.innerWidth){
         window.location="Landscape/index.html";
     } 
     else if (window.innerHeight > window.innerWidth){
         window.location="Potrait/index.html";
     }
} 
```

复制你的代码。

# android - 如何解决 Android 中的 NullPointerException 错误？

> ID：13303544
> 
> 赞同：4
> 
> 时间：2012-11-09T06:58:29.270
> 
> 标签：android, nullpointerexception, android-mediaplayer

下面的代码在 Eclipse 的模拟器中运行顺畅，但在我的 Android 手机和平板电脑上运行时出现问题。

```
public class RingerActivity extends Activity{
/** Called when the activity is first created. */
Button press;
boolean tone = true;
MediaPlayer mp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mp = new MediaPlayer();
    mp = MediaPlayer.create(RingerActivity.this, R.raw.alarm);
    //Error occurs at here
    mp.start();

    Handler h = new Handler();
    Runnable stopPlaybackRun = new Runnable() {
        public void run(){
            mp.stop();
            mp.release();
        }    
    };
    h.postDelayed(stopPlaybackRun, 20 * 1000);

    AudioManager manager = (AudioManager)getSystemService(AUDIO_SERVICE);
    if(manager!=null){
        manager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
        int maxVolume = manager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        manager.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolume, 0);
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event){

    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        Toast.makeText(this, "Volume Up", Toast.LENGTH_LONG).show();
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN){
        Toast.makeText(this, "Volume Down", Toast.LENGTH_LONG).show();
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

我在“mp.start()”行中得到一个“NullPointException”。我一直在研究这个问题一段时间，但我真的不知道发生了什么，我在我的 Android 智能手机和平板电脑（姜饼和 ICS）上都尝试了这个，但应用程序强制关闭。我需要你们的帮助...谢谢...

日志猫

```
11-09 15:41:09.909: E/AndroidRuntime(11975): FATAL EXCEPTION: main
11-09 15:41:09.909: E/AndroidRuntime(11975): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testing.ringer/com.testing.ringer.RingerActivity}: java.lang.NullPointerException
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.os.Looper.loop(Looper.java:150)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.app.ActivityThread.main(ActivityThread.java:4385)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at java.lang.reflect.Method.invokeNative(Native Method)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at java.lang.reflect.Method.invoke(Method.java:507)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at dalvik.system.NativeStart.main(Native Method)
11-09 15:41:09.909: E/AndroidRuntime(11975): Caused by: java.lang.NullPointerException
11-09 15:41:09.909: E/AndroidRuntime(11975):    at com.testing.ringer.RingerActivity.onCreate(RingerActivity.java:23)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
11-09 15:41:09.909: E/AndroidRuntime(11975):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
11-09 15:41:09.909: E/AndroidRuntime(11975):    ... 11 more 
```

林格清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.testing.ringer"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.RECORD_AUDIO"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".RingerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T07:01:25.877

NullPointerException 表示 mp 为空。这意味着 MediaPlayer.create() 失败。R.raw.alarm 存在吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:43:37.670

[NullPointerException](http://developer.android.com/reference/java/lang/NullPointerException.html)，导致当没有要使用的实例或数组时，最好跟踪到`put breakpoint and debug your code`。

看起来你的代码很完美，只要确定它是否`.mp3`存在？你完美地保存在`raw`文件夹中。

最后尝试卸载您现有的，然后清理您的项目并运行。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-25T17:27:04.883

您是否尝试清理项目？仅在清理项目后，新添加的资源才会显示在包资源管理器中。

# java - 如何使用java将iphone的png文件转换为标准的png文件

> ID：13303556
> 
> 赞同：1
> 
> 时间：2012-11-09T06:59:20.577
> 
> 标签：java, iphone, image, png

您知道，iphone 的 png 文件无法在 Windows 上使用图像阅读器显示。如何使用java将iphone的png文件转换为标准的png文件？

是否有任何开源库可以做到这一点？

任何回应将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:08:53.750

Java可以读取“iphone的png文件”吗？如果是这样，以 Windows 可以读取的形式将其写回¹到 PNG 将是微不足道的。

如果不是，您需要查看支持那种 PNG 风格的[JAI](http://www.oracle.com/technetwork/java/current-142188.html)或[SPI 。](http://docs.oracle.com/javase/7/docs/api/javax/imageio/spi/package-summary.html)

1.  详情请参阅[`ImageIO.write(RenderedImage,String,File)`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T11:06:54.253

是的，您可以使用 Java 将 iPhone PNG 文件转换为标准文件。请考虑下面的脚本链接。 [https://github.com/CuelogicTech/Convert-iOS-Application-PNG-images](https://github.com/CuelogicTech/Convert-iOS-Application-PNG-images)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T17:17:46.017

正如 leonbloy 所说，iOS 优化的 PNG 实际上根本不是 PNG，它们被认为是“CgBI”格式：http: [//iphonedevwiki.net/index.php/CgBI_file_format](http://iphonedevwiki.net/index.php/CgBI_file_format)

我知道第一次提出问题时这并不存在，但这里有一个 Java 转换器实现： [https ://github.com/viphe/ipng-converter](https://github.com/viphe/ipng-converter)

# php - 如何清除 Controller CakePHP 2.x 中的缓存？

> ID：13303558
> 
> 赞同：3
> 
> 时间：2012-11-09T06:59:22.183
> 
> 标签：php, facebook, cakephp, cakephp-2.0, browser-cache

我正在一个物业网站上工作，用户在其中创建列表，然后为了保存它，我们要求他通过 Facebook 连接。目前它工作得很好但是，当我创建另一个属性时（比如用户没有登录），后来我只是回到创建属性的页面，然后通过 facebook 连接.. 它确实登录了用户但是，没有创建属性..我尝试了各种方法，后来我发现一旦我清除浏览器缓存，它就会创建属性。

所以，我的问题是，如何使用 CakePHP 2.x 清除浏览器中的缓存？

另外，我尝试过：

纯 HTML：

```
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'> 
```

但是，它没有帮助。有没有办法通过 CakePHP 本身来做到这一点？还是需要解决 Facebook 问题？

请指教。

PS：`clearCache() does not work`我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:51:57.947

您可以使用`CakeResponse::disableCache()`

```
Example:

 <?php
        public function search() {
        // do something.
            $this->response->disableCache();
       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:10:21.657

除非您实际上是使用浏览器的人，否则您无法清除浏览器的缓存。（例如。`File->Options->Clear Cache`）

您所说的只是告诉浏览器首先不要缓存您的页面-您似乎已经知道该怎么做。

但是一旦它被缓存，它就会被他们的浏览器缓存，而不是你的代码。这将是一个安全问题，并且很容易被滥用，以允许您删除用户缓存。

# python - 如何根据其他列表从python列表中删除项目

> ID：13303565
> 
> 赞同：0
> 
> 时间：2012-11-09T06:59:34.383
> 
> 标签：python, django

我有

`list1 = [var1,var2,var3,var4,var5]`

和别的

`list2 = [var4, var2]`

现在我想减去它们，以便最终结果是

```
list1 = [var1,var3,var5] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T07:05:21.380

以这种方式使用列表理解：

```
l1 = [var1,var2,var3,var4,var5]
l2 = [var4, var2]

diff = [x for x in l1 if x not in l2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T07:02:55.980

Assumin 列表没有重复项，

```
list(set(list1)-set(list2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:05:07.880

您可以成组转换列表并获得它们之间的差异

```
list1 = [1,2,3,4]
list2 = [1, 3]
list1 = set(list1)
list2 = set(list2)
list1.difference(list2)
OUTPUT: set([2, 4]) 
```

# android - 应用程序已安装并有两个图标

> ID：13303568
> 
> 赞同：5
> 
> 时间：2012-11-09T06:59:43.620
> 
> 标签：android, icons, android-manifest

我制作了一个 android 应用程序，效果很好，但我的设备屏幕上有两个图标。我认为这可能是一个 AndroidManifest 问题。知道它可能是什么吗？

这是我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="pk.aeh.ideos.taa"
android:versionCode="1"
android:versionName="1.0" >

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" >
           <activity
        android:name=".Ghinho_congviecActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="Nhap_congviecActivity"></activity>
    <activity android:name="Sua_congviecActivity"></activity>
    <activity
        android:name=".Quizzes"
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".PlayGame" />
    <activity android:name=".Result" />

</application>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:02:42.673

这是。你有两个：

```
 <category android:name="android.intent.category.LAUNCHER" /> 
```

摆脱你不想要的那个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T07:02:51.130

这可能是因为您已将两个活动声明为 MAIN 和 LAUNCHER

```
 <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
         </intent-filter> 
```

在你的`Androidmanifest.xml`文件中。您只需要一个带有这些意图过滤器的活动，以便在安装应用程序时系统将知道哪个活动将用作主启动器活动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T07:05:04.300

您需要对您的`Manifest.xml`

```
<activity
    android:name=".Ghinho_congviecActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity>
<activity android:name="Nhap_congviecActivity"></activity>
<activity android:name="Sua_congviecActivity"></activity>
<activity
    android:name=".Quizzes"
    android:launchMode="singleTask">
</activity> 
```

我假设`Activity`with 属性`android:label="@string/app_name"`可能是您的主要活动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T07:04:06.903

这可能是因为您更改了软件包名称并使用不同的软件包名称安装了两次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T07:16:13.643

删除一个活动的意图过滤器，它会完美地工作。！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-17T11:58:43.153

您的清单文件应该只有一个具有以下意图过滤器的活动，您希望有一个图标的活动：

```
<intent-filter>
             <action android:name = "android.intent.action.MAIN" />
             <category android:name = "android.intent.category.LAUNCHER" />
     </intent-filter> 
```

根据您的描述，听起来有两个活动有这条线。检查你的清单...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-24T09:06:20.197

您只能在 AndroidManifest 上的 Activity 中声明一个 Intent 过滤器。

```
<intent-filter>
             <action android:name="android.intent.action.MAIN" />
             <category android:name="android.intent.category.LAUNCHER" />
     </intent-filter> 
```

如果您在 AndroidManifest 中使用了两个或多个意图过滤器，那么您将显示 2 个应用程序图标，因此请将其删除并设置一个意图过滤器。

我希望这对你有用。

# android - 如何从robotium将输出写入Excel？

> ID：13303580
> 
> 赞同：1
> 
> 时间：2012-11-09T07:01:06.297
> 
> 标签：android, eclipse, excel, robotium

我使用 POI 将输出写入 Excel。我的代码在普通的 Android 应用程序中运行良好。但是当我以 android j 单元运行应用程序时，写入 Excel 功能不起作用。这是我在机器人测试项目中使用的条件

```
if (solo.getButton("Submit").isShown()){

     new TestResult().resultToExcel("/mnt/sdcard/Test_output.xls",0, "TC_memory1", "passed","testcase passed",6);
}
else
{
     new TestResult().resultToExcel("/mnt/sdcard/Test_output.xls",0, "TC_memory1", "failed","testcase failed",6);
} 
```

任何人都可以建议一种使用robotium将输出写入excel文件的方法。

# objective-c - 如何组织具有循环依赖的 Core Data 实体？

> ID：13303582
> 
> 赞同：0
> 
> 时间：2012-11-09T07:01:19.620
> 
> 标签：objective-c, ios, cocoa-touch, core-data, circular-dependency

这是一个关于如何最好地组织 Core Data 中 NSManagedObjects 之间关系的概念性问题。

**当出现循环依赖时，如何在 Core Data 中组织实体？**

例如，假设我正在做一个社交食谱应用程序。这个应用程序允许您根据谁在制作每个食谱以及谁在购买每种食材来组织膳食。此外，每个食谱都是由不同的人创建的。因此，我提出以下 NSManagedObjects 及其各自的属性和关系：

`Chef`= uniqueID (String), username (String), Skill (String)
`>>`recipesToMake = (to-many) `Recipe`
`>>`ingredientsToBuy = (to-many)`Ingredient`

`Recipe`= uniqueTitle (String), authorID (String)
`>>`成分 = (to-many)`Ingredient`

`Ingredient`= 名称（字符串）、卡路里（整数 64）

**问题**

[_] 如果我有多个`Chef`'s 在同一个配方上工作，这是否意味着同一`Recipe`对象的多个副本存储在 Core Data 中，每个副本属于一个单独的`Chef`? 如果是这样，可以吗？如果没有，我如何`Recipe`在 Core Data 中创建一个对象并让多个`Chef`' 指向它，而它`Chef`本身可以通过 ? 指向多个`Recipe`对象`recipesToMake`？

[_] 如果给定一个食谱，我将如何检查`Chef`分配给它的 's ？我会在 Core Data 中获取那些`Chef`指向`Recipe`具有给定`uniqueTitle`属性的对象的对象吗？

[_] 由于一个`Chef`对象可以指向许多`Recipe`对象，因此将每个对象的作者存储`Recipe`为包含作者唯一 ID 的属性是否正确`Recipe`？我最初会考虑创建从`Recipe`to-one的关系，但这会在和对象`Chef`之间创建另一个循环依赖关系。`Chef``Recipe`

[_] 再一次，如果`Chef`can point to-many `Ingredient`objects via`ingredientsToBuy`并且`Recipe`can point-many `Ingredient`objects via `ingredients`，那么CoreData中是否会有同一个对象的多个副本`Ingredient`？

[_] 如果我允许`Recipe`对象拥有任意数量的作者，我将如何实现它？使用与`Chef`对象的关系似乎会创建循环依赖关系，而使用连接到`Chef` `uniqueID`'s 的属性似乎需要预先指定每个`Recipe`对象的最大作者数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:30:40.503

术语“循环依赖”在这里被否定使用，但您在 Core Data 中真正指的是关系和逆关系，实际上是推荐的。

当您构建一个类系统时，循环依赖是不需要的，这些类在两个方向上相互依赖过多，也称为耦合。它们确实是不可取的，但它更多地与代码流和逻辑相关，而不是在处理数据关系时。

以下是您的问题的答案：

1.  您有责任在代码中强制执行食谱的唯一性，这意味着您必须定义使两个食谱成为“相同”食谱的品质。您甚至可以比较配方中的每种成分，或者只需使用 uniqueTitle 即可比较配方的唯一性。有了它，您可以实现“更新或创建”设计模式，您首先通过其主键查找配方，在更简单的场景中是唯一标题。如果它已经存在，那么您可以简单地读取和/或更新该对象。否则将其创建为新的托管对象。对它的后续查询将获取刚刚创建的对象。然后，每个厨师都可以与该单个食谱对象建立关系。

2.  对于每个关系，最好也定义反向关系。在 Recipe 对象中，将其称为“ChefsMaking”，这可能是指向 Chef 对象的一对多关系。（它们结合起来形成“多对多”的关系）。在 Xcode 中，每个关系都有一个下拉框，您可以在其中设置其逆关系。

3.  我确实相信它可以创建多个引用相同类型对象的关系。这里有两种从食谱指向厨师的关系。一个是“ChefsMaking”，一种对多的关系。另一个是“作者”，一对一的关系，其反面将是 Chef 对象中的一对多“RecipesAuthored”关系。

4.  答案 1 中的相同原则适用于此。定义成分的唯一性，并让您的 Chefs 和 Recipes 通过获取已经存在的成分（通过其主键）或创建新的成分来指向成分。

5.  只需重命名您的关系作者，并使其成为一对多关系。

希望这可以帮助！

# android - execute() 调用异步任务，调用 doInBackground() 方法需要 1 秒

> ID：13303590
> 
> 赞同：2
> 
> 时间：2012-11-09T07:02:09.667
> 
> 标签：android, android-asynctask

我正在处理异步任务。当我调用异步任务时，调用我不想要的异步任务方法`execute()`需要 1 秒。`doInBackground()`有谁知道如何减少那个时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:05:46.480

这样的事情取决于系统。在多线程工作时，永远不要假设任何关于时间的事情！

无论如何，如果您的 AsyncTask 重复执行相同的工作，请尝试使用获取 Runnable 作为参数的 ExecutorService。ExecutorServices 不会自动销毁创建的线程，而是尝试重新使用它。这样可以减少开始时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:07:50.520

一秒调用`doInBackground()`，还是一秒返回结果？使用 an 的原因`AsyncTask`是从 UI 线程异步执行更长的操作。执行需要一段时间（例如 1 秒）的操作是它们存在的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T13:02:14.710

而不是`execute()`使用`executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, ...)`这种方式你不需要 ExecutorService。

# cassandra - 迁移 Cassandra 密钥空间

> ID：13303592
> 
> 赞同：1
> 
> 时间：2012-11-09T07:02:17.967
> 
> 标签：cassandra

我正在从 CASSANDRA 版本 1.1.2 迁移到 1.1.5。我有一些特定于 1.1.2 的密钥空间。将应用程序迁移到 1.1.5 版本后，我需要将旧密钥空间与当前版本一起使用。为此，我只是简单地备份了旧密钥空间并粘贴到新版本的 db->data 文件夹中。然后我尝试使用当前版本读取密钥空间。但这对我不起作用..任何人都可以给我迁移关键空间的解决方案..

提前致谢..

# c# - SharePoint Server 对象模型和 WCF

> ID：13303596
> 
> 赞同：0
> 
> 时间：2012-11-09T07:02:25.207
> 
> 标签：c#, wcf, sharepoint

我试图从 WCF 服务器内的项目访问包含 SharePoint Server 对象模型代码的 API。我的目的是下载 SharePoint 服务器上的文档。

我的代码在 WCF 服务器内。SharePoint 服务器是另一台服务器。

每当我尝试使用

```
SPSite.Exists(new Uri(spServerURL)) 
```

它不知道服务器。因此，当我将 WCF 应用程序池更改为在 Farm 管理员帐户下运行时，它运行良好。

这样做可以吗？否则会构成安全漏洞？

我应该如何尝试访问该文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:14:01.613

我认为将服务部署到现有的 SharePoint Web 应用程序会更好。因此，您的服务将在 SharePoint 应用程序池帐户下运行，因此，您的 SharePoint 服务权限不会出现问题。它也可用于您的 SharePoint 解决方案，如 http:////_vti_bin/ 之类的映射路径。这很有用，当您需要从 web contecxt 访问它时，您可以只使用相对路径 /_vti_bin/。

有关 SharePoint 2010 服务开发的详细信息，请查看[此链接。](http://blog.sharepointbits.com/2010/04/custom-wcf-services-in-sharepoint-2010_17.html)

# android - 在android中打开init.rc文件并追加一行

> ID：13303599
> 
> 赞同：0
> 
> 时间：2012-11-09T07:02:37.700
> 
> 标签：android

我想在android中的init.rc文件中添加一行。所以请告诉我如何打开并将一行附加到该文件。如果有人能详细解释一下，我将非常高兴，因为我是 android 新手。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:11:12.137

转到`system/core/rootdir/init.rc`路径并根据您的要求直接修改此文件。

# c# - 使用 JavaScript 输入后显示确认文本框

> ID：13303614
> 
> 赞同：0
> 
> 时间：2012-11-09T07:03:32.890
> 
> 标签：c#, javascript, asp.net

在开始之前，我想表达我对 JavaScript 语言一无所知。我唯一用过的就是 JQueryUI——甚至是复制粘贴。

目前，我有一个包含所有标准`TextBox`输入的用户注册页面。但是，每当用户在原始文本框中输入文本时，我想向下滑动辅助“确认电子邮件”和“确认密码”。

我知道社区喜欢帮助那些能够证明他们帮助自己的人，但我目前唯一需要展示的是我*试图*为此寻找解决方案并失败了。

有人可以告诉我一种方法吗？

**编辑：密码框的代码**

```
<div class="ctrlHolder">
    <asp:Label ID="Label9" runat="server" Font-Bold="True" Text="Password"></asp:Label>
    <asp:Label ID="Label11" runat="server" CssClass="styleLabelWatermarkWashout" Text="**********"></asp:Label>
    <br />
    <%--data-default-value="Placeholder text"--%>
    <asp:TextBox ID="txtRegisterPassword" runat="server" CssClass="textInput styleTextBoxCenter required"
        TextMode="Password" MaxLength="20"></asp:TextBox>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:25:56.503

因此，假设您可以创建类似于以下内容的标记：

```
<div class="ctrlHolder">
    <asp:Label ID="PasswordLabel" runat="server" Font-Bold="True" Text="Password"></asp:Label>
    <asp:Label ID="Label11" runat="server" CssClass="styleLabelWatermarkWashout" Text="**********"></asp:Label>
    <br />
    <%--data-default-value="Placeholder text"--%>
    <asp:TextBox ID="txtRegisterPassword" runat="server" CssClass="textInput styleTextBoxCenter required" TextMode="Password" MaxLength="20"></asp:TextBox>
</div>

<div id="confirm-password-box" class="ctrlHolder">
    <asp:Label ID="ConfirmPasswordLabel" runat="server" Font-Bold="True" Text="Confirm Password"></asp:Label>
    <asp:Label ID="Label12" runat="server" CssClass="styleLabelWatermarkWashout" Text="**********"></asp:Label>
    <br />
    <%--data-default-value="Placeholder text"--%>
    <asp:TextBox ID="txtConfirmRegisterPassword" runat="server" CssClass="textInput styleTextBoxCenter required" TextMode="Password" MaxLength="20"></asp:TextBox>
</div> 
```

您需要添加一些 CSS 规则以`#confirm-password-box`默认隐藏。然后，在页面的某处添加此脚本代码（最好尽可能靠近结束`</body>`标记）：

```
<script>

$(function(){

    $('#<%: txtRegisterPassword.ClientID %>').on('blur', function(event){

        $('#confirm-password-box').slideToggle('slow');

    });

});

</script> 
```

`blur`当控件失去焦点时发生该事件。您真的不想听`keyup`，因为每次用户在密码框中输入字符时都需要调用此代码...

请注意，这段特定的 jQuery 代码需要**jQuery 1.7 或更高版本**，因此请使用 NuGet 更新您的脚本引用（如果您没有使用其他任何需要旧版本 jQuery 的东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:13:52.943

我会在您正在处理的页面上添加对 jquery 的引用。然后制作一个新脚本（在页面上或在单独的`.js`文件中），将新函数附加到文本框的 onkeyup 事件。像这样的东西。

```
$(document).ready(function()
{
    $('mytextbox').bind('keyup', function() { 
        $('myCOnfirmationTextbox').slideDown();
    };
}); 
```

这会将此函数附加到与“mytextbox”类或 ID 对应的所有元素。因此，如果您有输入`<input type="text" id="email" class="emailInput"/>`，则可以使用`$('#email')`将事件绑定到此特定元素。或者您使用`$('.Emailinput')`绑定到电子邮件的所有输入元素。

顺便说一句，我还没有测试过代码，但是这个或非常类似的东西应该可以工作。

如果您使用单独的`.js`文件，请不要忘记在您的页面中也引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:09:40.033

填满电子邮件文本框后，您可以使用 innerHTML 在电子邮件文本框下方创建一个新文本框。如果你可以在这里发布代码，我可以给你代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:13:19.247

*   根据您的 html 替换此答案中的控件 ID。

您可以通过以下方式显示确认控件。

```
 $('#password').onfocusout(function() {   
      // This will show once you complete entering Email and Password.
      $('#confirmEmail').attr('display', 'inline');
      $('#confirmPassword').attr('display', 'inline');
    }); 
```

让我告诉你如何实现确认电子邮件。同样的东西可以用来实现确认密码。

当您离开确认电子邮件文本框时，比较用户在电子邮件和确认电子邮件文本框中输入的电子邮件。

这可以通过以下方式完成

```
$('#confirmEmail').onfocusout(function() {
  if($('#confirmEmail').val() == $('#Email').val())
{
      // Emails entered are same
}
else
{
     alert('Emails entered are not matching. Please reenter emails.');
}
}); 
```

同样，您可以检查确认密码。

# mysql - 每个 *.sql 文件批处理脚本的 mysqldump 表

> ID：13303615
> 
> 赞同：2
> 
> 时间：2012-11-09T07:03:35.173
> 
> 标签：mysql, batch-file, backup, mysqldump

我已经做了一些挖掘，但我找不到让 mysqldump 为每个表创建一个文件的方法。我有大约 100 个表（并且还在增长），我希望将它们转储到单独的文件中，而不必为我拥有的每个表编写一个新的 mysqldump 行。

例如，而不是包含我的数据库的所有表的 my_huge_database_file.sql。我想要 mytable1.sql、mytable2.sql 等

mysqldump 有这个参数还是可以用批处理文件来完成？如果有怎么办。

* * *

它用于备份目的。

我想我可能已经找到了一个解决方法，那就是制作一个小的 PHP 脚本来获取我的表的名称并使用 exec() 运行 mysqldump。

```
$result = $dbh->query("SHOW TABLES FROM mydb") ;

while($row = $result->fetch()) {

exec('c:\Xit\xampp\mysql\bin\mysqldump.exe -uroot -ppw mydb > c:\dump\\'.$row[0]) ;
} 
```

在我的批处理文件中，我只需执行以下操作：

```
php mybackupscript.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:11:36.883

`SHOW TABLES`您可以查询`INFORMATION_SCHEMA`数据库，而不是命令。通过这种方式，您可以轻松地转储每个数据库的每个表，并且还可以知道给定数据库中有多少表（即用于记录目的）。在我的备份中，我使用以下查询：

```
 SELECT DISTINCT CONVERT(`TABLE_SCHEMA` USING UTF8) AS 'dbName' 
       , CONVERT(`TABLE_NAME` USING UTF8) AS 'tblName'
       , (SELECT COUNT(`TABLE_NAME`)
    FROM `INFORMATION_SCHEMA`.`TABLES`
   WHERE `TABLE_SCHEMA` = dbName
GROUP BY `TABLE_SCHEMA`) AS 'tblCount'
    FROM `INFORMATION_SCHEMA`.`TABLES` 
   WHERE `TABLE_SCHEMA` NOT IN ('INFORMATION_SCHEMA', 'PERFORMANCE_SCHEMA', 'mysql')
ORDER BY 'dbName' ASC 
       , 'tblName' ASC; 
```

您还可以在`WHERE`子句中添加语法，例如`TABLE_TYPE != 'VIEW'`, 以确保视图不会被转储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:25:13.823

我无法对此进行测试，因为我没有安装 Windows MySQL，但这应该为您指明正确的方向：

```
@echo off
mysql -u user -pyourpassword database -e "show tables;" > tables_file
for /f "skip=3 delims=|" %%TABLE in (tables_file) do (mysqldump -u user -pyourpassword database %%TABLE > %%TABLE.sql) 
```

# ios - UITextField 委托中的核心数据更新导致崩溃

> ID：13303616
> 
> 赞同：0
> 
> 时间：2012-11-09T07:03:35.330
> 
> 标签：ios, ios5, core-data, delegates

我正在开发应用程序并简单地编辑单元格文本字段并完成编辑，我正在尝试更新核心数据，但应用程序获取堆栈，有时它会给出 SIGSTOP，有时它说无法分配更多内存有点错误，请帮助我解决这个问题.

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    if ((textField.tag - 999) > 0) {
        NSArray *visible = [self.productTable indexPathsForVisibleRows];
        UITableViewCell* cell = [self.productTable cellForRowAtIndexPath:[visible objectAtIndex:(textField.tag - 999)]];

        for (UIView* subview in [cell.contentView subviews]) {
            if ([subview isKindOfClass:[UITextField class]]) {
                textField = (UITextField*)subview;
                Product* myProduct        = (Product*)[self.productArray objectAtIndex:(textField.tag - 1000)];
                [myProduct setValue:[NSNumber numberWithFloat:[textField.text floatValue]] forKey:@"quantity"];
                [myProduct setValue:[NSNumber numberWithFloat:[myProduct.quantity floatValue] * [myProduct.rate floatValue]] forKey:@"amount"];
                NSLog(@"Product %@", myProduct);

                NSError *error; if (![self.managedObjectContext save:&error]) {
                    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
                    abort();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:12:37.627

看来您的子视图循环确实没有必要。
但是您对可见细胞的检查似乎存在缺陷。

*   您将获得所有可见单元格的索引路径。
*   您可以根据文本字段的标签选择这些索引路径之一。

--> 这会产生不可预知的结果。如果表格视图已滚动，则您的单元格在可见单元格数组中的确切索引不清楚。如果单元格已滚动到屏幕外，则数组将为空并且您会崩溃。

为什么这么复杂？
您需要的文本字段不正是传递给委托方法的文本字段吗？

你只需要这样：

```
UITableViewCell *cell = (UITableViewCell*) textField.superview.superview;
Product *myProduct = [self.fetchedResultsController objectAtIndexPath:
   [self.tableView indexPathForCell:cell]]; 
```

您正在使用`NSFetchedResultsController`，对吗？如果没有，你绝对应该！

# windows-phone-7 - windows phone 7中平铺图像的默认大小是多少

> ID：13303621
> 
> 赞同：1
> 
> 时间：2012-11-09T07:04:08.230
> 
> 标签：windows-phone-7

我想知道 windows phone 7.1 中平铺图像的实际大小是多少

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:52:25.103

这是答案： http:
[//msdn.microsoft.com/en-us/library/hh394033 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh394033(v=vs.92).aspx)

对于 WP7，默认平铺尺寸为**173x173**像素（开始屏幕上的平铺），**62x62**（所有应用列表中的平铺）。

# iphone - KVC Collection Accessor + index 0超出了空数组错误的范围

> ID：13303626
> 
> 赞同：0
> 
> 时间：2012-11-09T07:04:59.043
> 
> 标签：iphone, ios, cocoa-touch, key-value-observing, key-value-coding

我声明并合成了一个可变数组属性：

```
@property (nonatomic, strong) NSMutableArray *arrayOfTasks; 
```

我将[KVC 集合](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-BAJEAIEE)访问器用于相同的属性，并且我还有其他方法将在内部调用此 KVC 集合访问器方法，如下所示：

```
-(void)insertObject:(CSTaskAbstract *)inTask inArrayOfTasksAtIndex:(NSUInteger)index
{
        [[self arrayOfTasks] insertObject:inTask
                                  atIndex:index];
}
-(void)addObjectInArrayOfTasks:(CSTaskAbstract *)inTask
{
        [self insertObject:inTask
     inArrayOfTasksAtIndex:[[self arrayOfTasks] count]];
} 
```

只有在满足特定条件时，我才必须进行一些修改并将对象添加到数组中，因此为了确保此检查进入指定的方法，我在 -insertObject KVC Collection 访问器方法中包含以下内容：

```
-(void)insertObject:(CSTaskAbstract *)inTask inArrayOfTasksAtIndex:(NSUInteger)index
{
    if ([inTask isOperatable])
    {
        [[self arrayOfTasks] insertObject:inTask
                                  atIndex:index];
    }
}
-(void)addObjectInArrayOfTasks:(CSTaskAbstract *)inTask
{
        [self insertObject:inTask
     inArrayOfTasksAtIndex:[[self arrayOfTasks] count]];
} 
```

现在每次我触发`-addObjectINArrayOfTasks`方法并且如果`-isOperatable`条件返回布尔值 NO 时，应用程序崩溃，根本没有堆栈跟踪！（堆栈跟踪位于应用程序的 main() 处）。它所说的只是**“空数组错误的索引0超出范围”**。

我不明白为什么会这样，我还没有尝试访问数组，所以我没有让框架有机会抱怨我在索引 0 处没有元素。此外，我正在计算数组项的计数在访问数组外的对象之前到处检查。因为，如果我试图访问和元素超出边界索引，应用程序将在同一点崩溃，并让我确切地知道我试图在哪里访问超出边界的索引。那将是一个简单直接的解决方法。

现在，为了交叉验证，我在代码中做了一个小改动，看起来可行：

```
-(void)insertObject:(CSTaskAbstract *)inTask inArrayOfTasksAtIndex:(NSUInteger)index
{
        [[self arrayOfTasks] insertObject:inTask
                                  atIndex:index];
}
-(void)addObjectInArrayOfTasks:(CSTaskAbstract *)inTask
{
    if ([inTask isOperatable])
    {
        [self insertObject:inTask
     inArrayOfTasksAtIndex:[[self arrayOfTasks] count]];
    }
} 
```

我可以继续使用这种有效且不会崩溃的方法，但我的担忧如下：

1.  如果其他程序员想要从其他地方调用指定方法，那么在指定方法中添加相同的检查将是一个额外的优势。

2.  当我基于某些条件检查不将对象插入 KVC 集合访问器中的数组时，为什么应用程序会在第一种情况下崩溃？

感谢您的任何投入，

拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:47:56.077

我认为您看到的崩溃更可能与内部 KVC 行为有关，而不是与您的阵列有关。这可能是您看不到可用堆栈跟踪的原因。你是否在 Xcode 中启用了异常断点？

KVC 基本上期望`-insertObject:in<Key>AtIndex:`它将在给定索引处插入一个新对象（在您的情况下可能为 0）。由于它假定对象已插入，因此现在应该可以通过在给定索引处对对象的数据结构 (NSMutableArray) 进行排队来访问它。当条件演变为 NO 时，您无法插入此对象，这意味着当 KVO 尝试使用提供的索引进行查询时，可能出现索引越界异常。

您发布的第二个代码通过在不需要插入时不调用 KVC 集合访问器来避免此错误。

如果您想最大程度地减少某人错误地使用这些方法的机会，请仅`-addObjectInArrayOfTasks:`在您的公共标头中公开。此外，您可以记录这一点。如果您想绝对确定`-insertObject:in<Key>AtIndex:`不能在 int 上访问，您可以添加一个`NSAssert`, 来检查该方法是否是从 调用的`-addObjectInArrayOfTasks:`。

# reporting-services - SSRS：使用来自第一个查询的参数的多个查询报告

> ID：13303630
> 
> 赞同：0
> 
> 时间：2012-11-09T07:05:16.590
> 
> 标签：reporting-services, sql-server-2008-r2

我有一个看起来像这样的数据库表：

购买ID | 物品名称 | 项目颜色 | 购买日期

```
1       | Car       |  blue       | 11-03-12
2       | Plane     | red         | 12-03-12
3       | Car       | green       | 11-03-12 
```

我需要一份提供以下信息的报告：

项目名称（杰出） | @DateX 之前的购买次数（来自用户的参数）| 购买的绿色物品数量 |

我可以用所有可分辨的项目名称填写第一列，但不知道如何处理其他人......

据我所知，不可能将 SQL 查询插入表达式（是这样吗？）。我在 SQL 方面不是很有经验，也许可以用单个查询填充所有报告列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:09:07.927

在 sum 聚合中使用 if 语句。按 分组`ItemName`，列是：

*   `=Fields!ItemName.Value`
*   `=Sum(IIf(Fields!PurchaseDate.Value < Parameters!DateX.Value, 1, 0))`
*   `=Sum(IIf(Fields!ItemColor = "green", 1, 0))`

# iis - IIS 8 中的 Windows 身份验证

> ID：13303631
> 
> 赞同：1
> 
> 时间：2012-11-09T07:05:19.723
> 
> 标签：iis, windows-8, ravendb, windows-authentication, iis-8

我正在尝试在我的新 Windows 8 开发机器上设置 RavenDB。我已在该特定站点上启用 Windows 身份验证并禁用匿名身份验证。我以本地用户帐户登录，该帐户也是管理员的成员。这通常在我以前的 Windows 7 开发机器上运行良好。在这个我不断被要求登录。我尝试使用我登录的帐户，但我一直被要求登录。我只是想使用 RavenDB Studio。

我已经在 Chrome 和 IE 上尝试过这个 - 可能缺少一些明显/基本的东西，但想不出什么。请问有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:32:51.370

我使用的是不稳定的 1.2 build 2139。它已在 build 2140 中修复。

# iphone - 如何将子视图（其边缘的小图像视图）添加到 uiisement 控件中的段 1

> ID：13303635
> 
> 赞同：3
> 
> 时间：2012-11-09T07:05:36.900
> 
> 标签：iphone, objective-c, ipad, segment, uisegmentedcontrol

在我的 iPhone 应用程序中，我使用了一个具有三个段的 UI 段控制器。
我需要添加一个已经创建的子视图`to the second segment`，

为此，我使用了以下代码

```
[segment addSubview:ImgVw forSegment:1];

[segment addSubview:BlueButton forSegment:3]; 
```

它提示警告

> 未找到段的实例方法 addSubView 返回类型默认为 id

并使应用程序崩溃

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UISegmentedControl addSubview:forSegment:]：无法识别的选择器发送到实例 0x8a8a7a0”

我需要在 UISegment 控制器的很多地方为不同的段添加不同的子视图

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:33:17.960

在我看来，没有允许您在特定段插入 UiView 的方法。

但是你可以设置自定义图像请看下面的代码

```
NSArray *arrItem=[[NSArray alloc]initWithObjects:@"1", @"2",@"3",@"4",nil];
    UISegmentedControl *seg=[[UISegmentedControl alloc]initWithItems:arrItem];
    seg.frame=CGRectMake(10, 100, 300, 200);
    [seg insertSegmentWithImage:[UIImage imageNamed:@"SearchTransparent.png"] atIndex:2 animated:YES];
    [seg setWidth:90.0 forSegmentAtIndex:2];
    [self.view addSubview:seg]; 
```

# c - 动态数组自动收缩

> ID：13303637
> 
> 赞同：1
> 
> 时间：2012-11-09T07:06:12.877
> 
> 标签：c, arrays, algorithm, data-structures

在设计将缩小的动态数组时，有什么方法可以跟踪使用次数最多的索引，以及当该索引的持有对象被删除时，**找到新的最高使用索引**。

现在我可以想出一个简单`int last_used`的方法，然后将维护这个变量的成本收取到`func_delete`必须检查它是否删除最高的值，如果是，检查每个较小的值以寻找非空值。（数组将始终为空初始化）

```
if(last_index == deleted_index){

    while(last_index >0 && array[--last_index] != NULL)

    // if the array is now only half full, I realloc 
} 
```

还有其他聪明的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:15:28.293

对我来说看起来不错，但从逻辑上讲，如果函数总是删除最高的项目，那么在较小的索引处`func_delete`不应该有任何值。`NULL`所以这应该这样做：

```
if(last_index == deleted_index && array[last_index] != NULL) {
    //delete last item
    free(array[last_index]);
    //set to NULL and decrement
    array[last_index--] = NULL;
} 
```

**编辑**：

根据您的评论，我了解您要做什么，我认为您可以只跟踪插入函数中使用的最高索引：

```
void array_insert(array , element e, int index) 
{
    if (index > arr->highest_index) {
       arr->highest_index = index;
    }
    //insert element
} 
```

当你删除时，你检查索引是否是最高的。就像您正在做的那样，不要认为有更好的方法可以做到这一点，而不会使事情进一步复杂化，例如，您可以保留另一个排序的索引列表，这样当您删除最高索引时，您会找到下一个恒定的时间，但就像我说的，它使事情复杂化。但是，我认为另一种数据结构可能更有用，例如链表，在随机删除节点时效率更高，但在随机插入节点时效率更高。

# java - 在套接字接收上执行 while 循环的更好方法？

> ID：13303638
> 
> 赞同：2
> 
> 时间：2012-11-09T07:06:25.433
> 
> 标签：java

我有一个小型 java 程序，它监听来自套接字的行并将它们打印到 JTextArea。有一个更好的方法吗：

```
while(true){
 JTextArea.append(in.readLine())
} 
```

我在想像一个事件：

```
event.in.readLine(){
JTextArea.append(in.readLine())
} 
```

还是一个while循环是最好的方法？即使我为这个程序添加更多功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:39:07.860

使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)正确更新 UI 屏幕并且不阻塞 UI 线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:03:40.460

这些都没有。

```
String line;
while ((line = in.readLine()) != null)
{
    textArea.append(line);
}
in.close(); 
```

这必须在与 AWT 线程不同的线程上。

# objective-c - 通过 ViewController 传递整数

> ID：13303643
> 
> 赞同：0
> 
> 时间：2012-11-09T07:06:33.213
> 
> 标签：objective-c, integer, viewcontroller

我试图使在文本字段中输入的值更改下一个 ViewController 上的背景颜色，但该值无法在第二个视图控制器中读取。我如何使它能够识别价值？

视图控制器.h：

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController <UIImagePickerControllerDelegate,          UINavigationControllerDelegate>{    
IBOutlet UITextField *valueTextField;
}
- (IBAction)save:(id)sender;
@end 
```

视图控制器.m：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
// Get the stored data before the view loads
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
int value = [defaults integerForKey:@"value"];
NSString *valueString = [NSString stringWithFormat:@"%i",value];
// Update the UI elements with the saved data
valueTextField.text = valueString;

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)save:(id)sender {
[valueTextField resignFirstResponder];
int value = [[valueTextField text] integerValue];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setInteger:value forKey:@"value"];
[defaults synchronize];
NSLog(@"Data saved");
}

@end 
```

NextViewController.h：

```
#import <UIKit/UIKit.h>
@class ViewController;
@interface NextViewController : UIViewController
@end 
```

NextViewController.m:

```
#import "NextViewController.h"
#import "ViewController.h"

@interface NextViewController ()

@end

@implementation NextViewController

-(IBAction)displayClicks:(id)sender
{
if(value<20)
{
    self.view.backgroundColor = [UIColor redColor];
}
else {
    self.view.backgroundColor = [UIColor greenColor];
}

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:32:05.533

起初它毕竟不是调用父方法的好点。

```
- (void)viewDidLoad
{

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

// Get the stored data before the view loads
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
int value = [defaults integerForKey:@"value"];
NSString *valueString = [NSString stringWithFormat:@"%i",value];
// Update the UI elements with the saved data
valueTextField.text = valueString;

} 
```

在第二个视图控制器中，您从 UserDefaluts 读取“值”的值？

```
-(IBAction)displayClicks:(id)sender
{
if(value<20)
{
    self.view.backgroundColor = [UIColor redColor];
}
else {
    self.view.backgroundColor = [UIColor greenColor];
}

} 
```

if(value<20) 你从哪里拿？也许你以前吃过它？

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    int value = [defaults integerForKey:@"value"]; 
```

# android - 长按网格单元格内的网格样式菜单

> ID：13303644
> 
> 赞同：0
> 
> 时间：2012-11-09T07:06:33.143
> 
> 标签：android, android-gridview, android-contextmenu

我正在尝试实现与此类似的目标：

![在此处输入图像描述](../Images/fa7e8d53f348917785f0892d3b5e8274.png)

当用户在网格视图中长按网格单元格时，菜单应在网格单元格区域内绘制，如上所示。如果有人曾经尝试过类似的事情，或者是否有任何图书馆可以做同样的事情，请帮助我。

这是一个关于如何在长按时触发上下文菜单的代码片段。

我的活动课：

```
public class GridViewActivity extends Activity {

GridView gridView;

ImageAdapter mImageAdapter;

static final String[] MOBILE_OS = new String[] {
        "Android", "iOS", "Windows", "Blackberry"
};

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mImageAdapter = new ImageAdapter(this, MOBILE_OS);

    gridView = (GridView)findViewById(R.id.gridView1);

    registerForContextMenu(gridView);
    gridView.setAdapter(mImageAdapter);

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(getApplicationContext(),
                    ((TextView)v.findViewById(R.id.grid_item_label)).getText(),
                    Toast.LENGTH_SHORT).show();

        }
    });

}

@Override
public void onCreateContextMenu(ContextMenu iMenu, View iView, ContextMenuInfo iMenuInfo) {
    super.onCreateContextMenu(iMenu, iView, iMenuInfo);

    iMenu.setHeaderTitle("OPTIONS");
    iMenu.clear();
    iMenu.add(Menu.NONE, 0, Menu.NONE, "VIEW");
    iMenu.add(Menu.NONE, 1, Menu.NONE, "EDIT");
    iMenu.add(Menu.NONE, 2, Menu.NONE, "SHARE");
    iMenu.add(Menu.NONE, 3, Menu.NONE, "DELETE");
} 
```

图像适配器类：

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] mobileValues;
public LayoutInflater inflater;
public LinearLayout linearLayout;

public ImageAdapter(Context context, String[] mobileValues) {
    this.context = context;
    this.mobileValues = mobileValues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

        // set value into textview
        linearLayout = (LinearLayout)gridView.findViewById(R.id.linear1);
        TextView textView = (TextView) gridView
                .findViewById(R.id.grid_item_label);
        textView.setText(mobileValues[position]);

        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);

        String mobile = mobileValues[position];

        if (mobile.equals("Windows")) {
            imageView.setImageResource(R.drawable.windows_logo);
        } else if (mobile.equals("iOS")) {
            imageView.setImageResource(R.drawable.ios_logo);
        } else if (mobile.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.blackberry_logo);
        } else {
            imageView.setImageResource(R.drawable.android_logo);
        }

    } else {
        gridView = (View) convertView;
    }

    return gridView;
}

@Override
public int getCount() {
    return mobileValues.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
} 
```

}

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <GridView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridView1"
        android:numColumns="auto_fit"
        android:gravity="center"
        android:columnWidth="100dp"
        android:stretchMode="columnWidth"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    </GridView> 
```

移动.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginRight="10px"
        android:src="@drawable/android_logo" >
    </ImageView>

    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:layout_marginTop="5px"
        android:textSize="15px" >
    </TextView>

</LinearLayout> 
```

这里要实现的是，在网格单元上长按时，它应该用上面的视图替换这个特定的网格单元视图，并且每个框（即查看、编辑、共享和删除）都应该响应某个事件侦听器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:13:42.313

我会想象做这样的事情会在更大的屏幕上，对吧？但我想你可以让每个网格单元 a`RelativeLayout`并容纳那里的任何东西。然后当你长按时，添加另一个视图，可能是一个`LinearLayout`包含 4 个的视图，`TextViews`它可以说出你想要它说的内容。由于相对布局中的最低级别 View 会产生某种浮动效果，因此它可以工作。另外，您可以添加不透明度以使其透明。哦，我可能应该补充一点，Android 带有长按和放手功能，所以实现起来应该不会太糟糕。

# android - 从外部 SD 卡导入 SQLite 数据库

> ID：13303645
> 
> 赞同：3
> 
> 时间：2012-11-09T07:06:33.907
> 
> 标签：android, import, android-sqlite

尝试在我的应用程序中实现导入和导出功能。导出只是将文件复制到 sd 卡中。我已经完成了，但导入有点问题。因为导入应该删除前一个而不是我正在使用的当前数据库并加载前一个。我已经浏览了这个网站上关于在应用程序中从 sd 卡导入 sqlite 数据库的各种帖子。[导入数据库](https://stackoverflow.com/questions/6540906/android-simple-export-import-of-sqlite-database/6542214#6542214)，这里有答案，但我想知道何时调用此方法。？或任何其他解决方案。将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T07:17:15.687

我觉得这个[链接](http://androidgenuine.com/?tag=save-database-to-sdcard-android)将帮助你找到一个解决方案，基本上你必须检查你是否在清单文件中包含了读取和写入外部存储设备的权限，然后按照教程进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:29:55.670

参考[这个。](https://github.com/jgilfelt/android-sqlite-asset-helper/). 使用它，您可以将您的数据库（.sqlite）放在资产内的 zip 文件夹中。在安装时，它将解压缩并从您的 .sqlite 文件创建数据库。

# google-app-engine - 如何使用progerssbar在servlet中上传文件

> ID：13303646
> 
> 赞同：0
> 
> 时间：2012-11-09T07:06:33.603
> 
> 标签：google-app-engine

在我的项目中，我想更新*Google*应用中的*csv*文件。同时我想向最终用户显示*进度*条我该怎么做。如果您有总代码，请帮助我。

 **我在我的项目中使用*Serlvet、JSP 和 Google 应用程序。*

index.jsp：

```
 <form action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data" onsubmit="return validate()">
    <input type='file'>..... 
```

上传：

```
 Map<String, BlobKey> blobs = blobstoreService.getUploadedBlobs(req);
    BlobKey blobKey = blobs.get("myFile"); 
    if (blobKey == null) {
        res.sendRedirect("/");
    } else {
        res.sendRedirect("/serve?blob-key=" + blobKey.getKeyString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:15:22.987

我过去已经成功了：

[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)

> 具有多个文件选择、拖放支持、进度条和 jQuery 预览图像的文件上传小部件。支持跨域、分块和可恢复的文件上传和客户端图像大小调整。适用于任何支持标准 HTML 表单文件上传的服务器端平台（PHP、Python、Ruby on Rails、Java、Node.js、Go 等）。

由于数据传输机制是标准 POST，因此您也应该能够集成它。**

# mysql - 查询中的 MySQL 存储过程

> ID：13303649
> 
> 赞同：3
> 
> 时间：2012-11-09T07:06:56.367
> 
> 标签：mysql, sql, stored-procedures

我想做一个 MySQL 存储过程

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `SECTOR_INDUSTRY_SP` $$
CREATE PROCEDURE `SECTOR_INDUSTRY_SP`(IN RINSERIES TEXT, IN COMMUNITYIDS TEXT)
    READS SQL DATA
BEGIN
SELECT *
from PROFESSIONAL_IDENTITY_MERGED p , std_company_detail s
where (p.pim_company_id = s.cid) AND p.pim_community_id IN  ('+'+COMMUNITYIDS+'+')
AND p.pim_rin IN  ('+'+RINSERIES+'+');

END $$

DELIMITER ; 
```

如您所见，我有两个参数来调用此过程 RINSERIES，它们将是文本格式，例如 '12312,1234,1239'

```
SELECT *
    from PROFESSIONAL_IDENTITY_MERGED p , std_company_detail s
    where (p.pim_company_id = s.cid) AND p.pim_community_id IN  ('12312,1234,1239')
    AND p.pim_rin IN  ('2,5,8'); 
```

但我希望这个查询看起来像下面

```
SELECT *
        from PROFESSIONAL_IDENTITY_MERGED p , std_company_detail s
        where (p.pim_company_id = s.cid) AND p.pim_community_id IN  (12312,1234,1239)
        AND p.pim_rin IN  (2,5,8); 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:13:52.913

试试这个：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `SECTOR_INDUSTRY_SP` $$
CREATE PROCEDURE `SECTOR_INDUSTRY_SP`(IN RINSERIES TEXT, IN COMMUNITYIDS TEXT)
    READS SQL DATA
BEGIN

SET @s = CONCAT("SELECT *
from PROFESSIONAL_IDENTITY_MERGED p , std_company_detail s
where (p.pim_company_id = s.cid) AND p.pim_community_id IN  (", COMMUNITYIDS, ")
AND p.pim_rin IN  (",RINSERIES,")");

PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END $$

DELIMITER ; 
```

# debugging - 在 Chrome 开发工具中更改样式时中断

> ID：13303650
> 
> 赞同：48
> 
> 时间：2012-11-09T07:07:06.527
> 
> 标签：debugging, google-chrome-devtools

我只是想知道是否有人知道是否可以在 Chrome 开发工具中特定元素的特定 css 属性上添加断点，即当`#mydiv's`height 属性发生更改时，中断。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-09T08:07:57.687

您只能`<div style="height: 20px; width: 100%">`使用元素面板上下文菜单的`Break on...`|中断所有内联样式 ( ) 更改。`Attributes modifications`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-06-11T18:34:21.203

你可以这样做：

```
function observe(el, property) {
    var MutationObserver = window.WebKitMutationObserver;

    var observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            console.log('old', mutation.oldValue, 'new', mutation.target.style.cssText, 'mutation', mutation);
            if (mutation.attributeName == property) debugger;
        });
    }
    );

    var config = {
        attributes: true,
        attributeOldValue: true
    }

    observer.observe(el, config);
} 
```

然后您可以像这样在样式更改上设置断点：`observe(element, "style")`

它会在更改时中断，并且还会在控制台中打印旧值和新值。

# css - Google Chrome 中的 div 置换

> ID：13303656
> 
> 赞同：0
> 
> 时间：2012-11-09T07:07:36.427
> 
> 标签：css, html, positioning

我有三个 Div，周围的 Div 是“MainDiv”，里面的 Top Div 是“UpperDiv”，下一个是“FooterDiv”。

在 Mozilla 中一切正常，但在 Chrome 中，“FooterDiv”被移到我的 Aspx 页面的“右上角”......即**在右上角，与 MainDiv 相邻**。

它应该出现在此页面的底部。在这种情况下该怎么办？

感谢开发者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:11:26.473

试试这个：对于“UpperDiv”，如果您提到“lowerdiv”和“UpperDiv”，请明确：both 和 remove 以及任何 float:left。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:10:36.163

如果您使用浮动，那是您的问题。不要将浮点数用于您想要做的事情。

# php - php 简单的 xml 子节点到一个 foreach

> ID：13303657
> 
> 赞同：0
> 
> 时间：2012-11-09T07:07:36.527
> 
> 标签：php, simplexml

我有一个 XML 文件。它如下所示：

```
<Offers>
 <Offer>
  <OfferID>1</OfferID>
  <OfferName>Offer One</OfferName>
 </Offer>
 <Offer>
  <OfferID>2</OfferID>
  <OfferName>Offer Two</OfferName>
 </Offer>
</Offers> 
```

我有一个声明如下的变量：

```
$latest_offers = simplexml_load_file("Offers.xml"); 
```

现在我的问题是我怎样才能得到这样的输出：

```
foreach($offer as $item)
{
 echo <offerID>, <OfferName>...each and everything inside the offer nod
} 
```

我怎样才能做到这一点。尝试了很多但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:11:11.073

试试这个。

```
<?php
$latest_offers = simplexml_load_file("Offers.xml");
foreach($latest_offers->Offer as $offer) {
   echo $offer->offerID . ', ' . $offer->OfferName . '<br>';
}
?> 
```

# java - 跨子域的 JSESSIONID

> ID：13303660
> 
> 赞同：0
> 
> 时间：2012-11-09T07:07:51.357
> 
> 标签：java, session, cookies, jboss, subdomain

我试图让我的 JSESSIONID 位于“.mysite.com”，这样它就可以在子域之间共享。

我有一个 4.2.2 GA JBOSS 实例使用此方法执行此操作：http: [//shchekoldin.com/2010/05/27/sharing-jsessionid-across-subdomains/](http://shchekoldin.com/2010/05/27/sharing-jsessionid-across-subdomains/)（来自此处：[https://jira.jboss .org/browse/JBWEB-107](https://jira.jboss.org/browse/JBWEB-107)）使用自定义阀门方法。

然而，在 EAP 5.1 版本（我已经针对 JDK 1.6 编译）上，相同的自定义阀门没有启动。我添加了一些调试，但它从未被调用。

另外，我尝试通过非集群方法打开 server.xml 中的 SSO 选项（根据[https://community.jboss.org/wiki/JBossWebSingleSignOn](https://community.jboss.org/wiki/JBossWebSingleSignOn)），但这对其也没有影响。

有谁知道我如何让 JSESSIONID cookie 跨 JBOSS 5 上的子域？

（旁注，如果我有“foo.bar.mysite.com”，这个“.mysite.com”域存储在 cookie 中是否适用于多个子域 - 这是为了测试，在产品中我们只有一个级别）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-07T19:44:11.883

我也有同样的要求。在同一 .war 文件中具有子域和父域的站点之间共享会话。例如 www.baseball.sports.com 和 www.hockey.sports.com。要共享 JSESSION b/w 这两个站点需要在 jboss-web.xml 中添加域标签。

文件路径：/app/jboss/jboss-eap-6.1/standalone/deployments/mason_production/.ear/.war/WEB-INF。

添加以下条目：

.sports.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:37:48.400

我找到了我需要的东西：

您`<SessionCookie domain="example.com"/>`在应用程序的 WEB-INF/context.xml 下添加。

# playorm - PlayOrm 中的缓存

> ID：13303665
> 
> 赞同：1
> 
> 时间：2012-11-09T07:08:17.217
> 
> 标签：playorm

我想更多地了解缓存在 playorm 中是如何工作的。任何指针都会很棒。另外： 1\. 如果有任何可用的性能数据可以验证 Playorm 中的缓存。2\. 是否需要任何配置/设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:33:23.047

playorm 中的缓存很像休眠中的缓存。实际上有两个缓存在运行，可以称为写缓存和读缓存。

写入缓存是当您执行 put(Object entity)、put(Object entity) 等操作时，它会将这些 put 缓存在一个名为 NoSqlWriteCacheImpl 的类中。当你调用flush时，这个缓存被清空并清除。如果不刷新它，就无法清除此缓存。调用 clear 不会清除这个缓存，如果你不想写东西，只调用 flush 不会做 put 。此缓存是 PER NoSqlEntityManager。

然后读取缓存在一个名为 NoSqlReadCacheImpl 的类中。这个缓存就像hibernate的1级缓存，和hibernate一样是PER NoSqlEntityManager。当你读入内容时，它会通过这一层并被缓存，当你再次读入这些内容时，它会从缓存中读取，而不是进入 nosql 数据库。一个很好的例子是你得到一件 T 恤，然后得到它的用户（比如 bob），然后你得到一些其他对象并得到它的用户，恰好是 Bob ......这会导致缓存命中并且比一个更频繁地发生期待他们查询的东西。注意：在运行任何 NoSqlQuery 时，完全避免了 NoSqlReadCache！！！！它仅用于 find(Class c, List keys) 和 find(Class c, Object key) 方法。

# javascript - 将 UIWebView 突出显示的文本位置存储在数据库中

> ID：13303667
> 
> 赞同：0
> 
> 时间：2012-11-09T07:08:23.310
> 
> 标签：javascript, iphone, ios, cocoa-touch, uiwebview

我正在开发一个电子阅读器项目，用户可以在其中突出显示他们感兴趣的文本。我已经能够通过这段代码突出显示文本：

```
- (void)markHighlightedString:(id)sender {

// The JS File
NSString *filePath  = [[NSBundle mainBundle] pathForResource:@"HighlightedString" ofType:@"js" inDirectory:@""];
NSData *fileData    = [NSData dataWithContentsOfFile:filePath];
NSString *jsString  = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
[self.bookTextWebView stringByEvaluatingJavaScriptFromString:jsString];

// The JS Function
NSString *startSearch   = [NSString stringWithFormat:@"stylizeHighlightedString()"];
[self.bookTextWebView stringByEvaluatingJavaScriptFromString:startSearch];} 
```

stylizeHighlightedString() 是：

```
function stylizeHighlightedString() {

var range               = window.getSelection().getRangeAt(0);
var selectionContents   = range.extractContents();
var span                = document.createElement("span");

span.appendChild(selectionContents);

span.setAttribute("class","uiWebviewHighlight");
span.style.color            = "red";

range.insertNode(span);} 
```

现在，**我想将这个突出显示的文本信息保存在数据库中**，以便下次运行应用程序时可以显示以前突出显示的文本。

这是可行的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:12:35.600

为此，您可以将正在使用的脚本分成两个脚本。第一个将查询所选范围并[返回它](https://stackoverflow.com/questions/498965/return-value-javascript-uiwebview)。您可以解析返回的范围并为其创建一个 (Obj-)C 对象并存储它。第二个脚本将对提供的范围/范围进行实际突出显示。为此，您需要通过将范围作为 javascript 变量预先添加到 javascript 字符串来动态组合 javascript。

# c# - 通过 dtd 验证 xml，dtd 的不同目录

> ID：13303672
> 
> 赞同：4
> 
> 时间：2012-11-09T07:08:56.357
> 
> 标签：c#, xml, xml-validation, dtd

我正在尝试通过 .dtd 验证 xml 文件。我写了这个验证器：

```
 public bool Validation(XmlDocument xmlDoc)
    {
        var xml = XmldocToString(xmlDoc);
        var r = new XmlTextReader(new StringReader(xml));
        var settings = new XmlReaderSettings();
        var sb = new StringBuilder();
        settings.ProhibitDtd = false;
        settings.ValidationType = ValidationType.DTD;
        settings.ValidationEventHandler += (a, e) =>
        {
            sb.AppendLine(e.Message);
            _isValid = false;
        };
        XmlReader validator = XmlReader.Create(r, settings);
        while (validator.Read())
        {
        }
        validator.Close();

        return _isValid;
    } 
```

问题是我必须在解决方案的 bin 目录中有 dtd 文件。我想选择一个不同的目录来保存 .dtd 文件，但我真的找不到方法。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:57:58.497

在 Xml 文件中声明与 DTD 的关联：

## dtd 存储在远程服务器中的示例：

```
<!DOCTYPE Catalog PUBLIC "abc/Catalog" "http://xyz.abc.org/dtds/catalog.dtd"> 
```

查看该[wiki 页面](http://en.wikipedia.org/wiki/Document_Type_Definition#Associating_DTDs_with_documents)和[该站点](http://publib.boulder.ibm.com/infocenter/dstudio/v1r1m0/index.jsp?topic=/org.eclipse.wst.xmleditor.doc.user/topics/cxmlcat.html)以获取有关 Xml 文件和 DTD 关联的更多选项和信息。

## dtd 放置在本地 (SYSTEM) 的示例：

> **如何从文档中引用 DTD**：
> 
> 假设文档的顶部元素是**spec**并且 dtd 放置在**文件 mydtd 中，该文件位于加载文档的目录的子目录 dtds 中**：

```
<!DOCTYPE spec SYSTEM "dtds/mydtd"> 
```

> **备注**：
> 
> 系统字符串实际上是一个 URI-Reference（如 RFC 2396 中所定义），因此您可以使用完整的 URL 字符串来指示您的 DTD 在 Web 上的位置。如果您希望其他人验证您的文档，这是一件非常好的事情。还可以关联一个 PUBLIC 标识符（一个魔术字符串），以便在客户端的目录中查找 DTD，而不必在 Web 上找到它。DTD 包含一组元素和属性声明，但它们没有定义文档的根应该是什么。这作为 DOCTYPE 声明的第一个元素被明确告知解析器/验证器。

（摘自[**这里**](http://www.xmlsoft.org/xmldtd.html)）

# java - 将日期存储在数据库中是 Java 的最佳实践吗？

> ID：13303676
> 
> 赞同：10
> 
> 时间：2012-11-09T07:09:08.487
> 
> 标签：java, sql, mongodb, date, timestamp

我这样做的原因是，在任何数据库中存储为日期对象的日期往往以特定格式编写，这可能与您需要在前端呈现给用户的内容大不相同。我还认为，如果您的应用程序从不同类型的数据存储中提取信息，这将特别有用。一个很好的例子是 MongoDB 和 SQL 日期对象之间的区别。

但是，我不知道这是否是推荐的做法。我应该继续将日期存储为长（以毫秒为单位的时间）还是日期对象？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-09T07:11:52.837

关于 MongoDB，我不能代表它，但在 SQL 数据库中，不，这不是最佳实践。这并不意味着可能没有偶尔的用例，而是“最佳实践”没有。

将它们存储为日期，将它们检索为日期。您最好的选择是设置您的数据库以将它们存储为 UTC（松散地，“GMT”），以便数据是可移植的，并且您可以根据需要使用不同的本地时间（例如，如果数据库由地理上不同的用户使用） ，并在应用层处理从 UTC 到本地时间的任何转换（例如，通过`Calendar`或第三方日期库）。

将日期存储为数字意味着您的数据库难以报告、运行临时查询等。我犯过一次错误，我不会在没有充分理由的情况下重复这个*错误*。:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T07:13:04.060

这在很大程度上取决于：

*   您正在使用什么数据库及其日期/时间支持
*   您的客户需求（例如，您对*始终*使用 Java 的想法感到高兴）
*   你真正想表达什么信息
*   您的诊断工具

第三点可能是最重要的。想想你试图存储的值的真正含义。即使您显然没有使用 Noda Time，但希望我的[用户指南页面](http://noda-time.googlecode.com/hg-history/1.0.x/docs/userguide/type-choices.html)根据您的输入数据选择要使用的 Noda Time 类型可以帮助您清楚地考虑这一点。

**如果**您*只*使用过 Java，并且您的数据库对日期/时间类型没有非常好的支持，并且您只是试图表示“即时”（而不是特定时间的瞬间）时区，或带有偏移量的本地日期/时间，或只是一个本地日期/时间，或只是一个日期......），您可以轻松编写诊断工具将您的数据转换为更易于阅读的形式 - 然后存储a`long`是合理的。但这是一个相当长的“如果”列表。

如果您希望能够在数据库中执行日期操作——例如，询问发生在当月第一天的所有值——那么您可能应该使用日期/时间类型，注意时区。（我的经验是，当涉及到日期/时间类型时，大多数数据库至少有令人震惊的糟糕*记录。）*

一般来说，您应该使用能够满足您所有要求并且是该特定环境最*自然的*表示的任何类型。因此，在具有日期/时间类型的数据库中，当您与之交互时不会给您带来问题（例如，以未经请求的方式执行任意时区转换），请使用该类型。它将使各种事情变得更容易。

使用更“原始”的表示（例如 64 位整数）的优点正是数据库*不会*乱用它。您有效地从数据库中隐藏了数据的*含义*，具有该方法的所有正常优点和缺点（主要是缺点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T07:23:01.997

这取决于各个方面。当使用标准的“自纪元以来的秒数”时，有人只使用整数精度，他们的日期被限制在 1970-2038 年的范围内。

但也存在一些精度问题。例如，unix 时间*忽略闰秒*。每天被定义为具有相同的秒数。因此，当计算 unix 时间之间的时间增量时，您确实会遇到一些错误。

但更重要的是，您**假设您的所有日期都是完全已知**的，因为您的陈述不可能只减半指定日期的一半。在现实中，有很多你不知道秒（甚至毫秒）精度的事件。因此，如果表示允许指定例如仅*天*精度，则它是一个特征。理想情况下，您将存储日期及其精确信息。

此外，假设您正在构建一个日历应用程序。有时间，但也有当地时间。很多时候，您需要两个可用的信息。当调度重叠时，你当然可以在同步的时间内做到最好，所以这里的 long 会很好。但是，如果您还想确保不会在*当地时间*9-20 小时之外安排活动，您还需要始终**保留时区信息**。对于跨越多个位置的任何事情，您确实需要在日期表示中包含时区。假设您可以将您看到的所有日期转换为您当前的当地时间是非常幼稚的。

请注意，SQL 中的日期可能会导致奇怪的情况。我最喜欢的**MySQL 荒谬**之一是：

```
SELECT * FROM Dates WHERE date IS NULL AND date IS NOT NULL; 
```

*可能会*返回包含 date 的记录`0000-00-00 00:00:00`，尽管这违反了对逻辑的普遍理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T10:30:50.300

由于这个问题是用 MongoDB 标记的：MongoDB 不会将日期存储在 String 或其他什么中，它们实际上将其存储为 long ( [http://www.mongodb.org/display/DOCS/Dates](http://www.mongodb.org/display/DOCS/Dates) )：

> BSON 日期值将自 Unix 纪元（1970 年 1 月 1 日）以来的毫秒数存储为 64 位整数。v2.0+ ：此数字已签名，因此 1970 年之前的日期存储为负数。

由于 MongoDB 没有立即计划使用 SQL 在标准查询中具有的复杂日期处理功能（例如仅查询年份等），因此没有真正的缺点，它实际上可能会减少索引和存储的大小。

这里需要考虑一件事，聚合框架：[http](http://docs.mongodb.org/manual/reference/aggregation/#date-operators) ://docs.mongodb.org/manual/reference/aggregation/#date-operators有一些奇怪而美妙的事情，你只能使用支持的 BSON 日期类型但是，MongoDB 是否对您很重要取决于您的查询。

您是否认为自己需要聚合框架功能？或者将额外的物体放在头顶会很痛苦吗？

我个人的看法是，BSON 日期类型是一个很小的对象，如果没有它来存储文档，就会无缘无故地影响整个系统及其未来的兼容性。所以，是的，我会使用 BSON 日期类型而不是 long，我认为这样做是一种好习惯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T07:13:15.457

我认为存储日期不是最佳做法，因为这意味着您将无法执行任何特定于日期的查询。像 ：

```
where date between 
```

我们也无法轻松地使用 sql 查询从表中获取日期月份。

最好在 java 层中使用单个日期格式转换器并将日期转换为该日期并在整个应用程序中使用单个格式。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-11-09T07:16:30.877

恕我直言，如果您可以使用字符串，最好将日期存储在数据库中。因此，如果您不需要日历中的所有字段，请避免不必要的数据上下传输到服务器。Calendar 中有很多数据，Calender 的每个实例也很重。

因此，将其存储为 String ，仅包含所需的数据并将其转换回 Calendar ，无论何时需要它们并使用它们。

# php - 使用正则表达式和 preg_match_all 获取值

> ID：13303684
> 
> 赞同：1
> 
> 时间：2012-11-09T07:09:53.273
> 
> 标签：php, regex, preg-match-all

我有字符串数据

```
$pages = "mangaName=&authorArtist=asdas123s&genres=sn&genres[23]=on&genres[29]=on&status=&chrome=&submit=+";

function get_h1($file){
    $h1tags = preg_match_all('/\[(\w*)\]/is',$file,$patterns);
    $res = array();
    array_push($res,$patterns[2]);
    array_push($res,count($patterns[2]));
    return $res;
} 
```

我想获得流派[23]、流派[29]的编号

`[0] => 23 [1] => 29`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:13:55.987

```
$pages = "mangaName=&authorArtist=asdas123s&genres=sn&genres[23]=on&genres[29]=on&status=&chrome=&submit=+";

parse_str($pages, $parsed);

var_dump(array_keys($parsed['genres'])); // array(2) { [0]=> int(23) [1]=> int(29) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:55:49.843

zerkms 的答案是正确的，但如果你真的想使用正则表达式，请用这个来改变你的：

```
preg_match_all('/\[(\w*?)\]/is',$file,$patterns);
 note the non-greedy __^ 
```

# mongodb - 停止：未知实例 mongodb (Ubuntu)

> ID：13303685
> 
> 赞同：28
> 
> 时间：2012-11-09T07:10:02.243
> 
> 标签：mongodb, ubuntu, service, restart

我是 MongoDB 的新手。当我运行以下命令时：

```
sudo service mongodb start 
```

它向我展示了**"mongodb start/running, process 3566"**。但是当我尝试通过给出以下命令来停止时：

```
sudo service mongodb stop 
```

它显示**停止：未知实例：**。有没有人知道如何解决这个问题。

如果我给**sudo service mongodb restart**，我会收到以下消息：

```
stop: Unknown instance: 
mongodb start/running, process 3644 
```

PS：如果我只使用**mongod**，我可以启动服务器并通过给**mongo**连接 mongo shell 。

请建议我如何解决问题以及在提供**service mongodb start**后如何连接 mongo shell 。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T21:53:39.277

我刚碰到这个。问题可能出在您的 conf 文件中（显然，因为您重新安装了种子）

如果将其作为服务调用，则在 mongodb.conf 中不要设置 fork = true。这将阻止服务调用能够使用 service mongodb.conf status/stop/restart 访问它。

但是，删除 fork=True 行将缓解该问题。

看评论; 使用另一种解决方案，即使该解决方案已被接受。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-25T18:51:38.393

您收到`Unknown instance`错误的原因`upstart`是跟踪分叉进程`PID`实例的错误。`mongod`但是对此的正确解决方案不是通过`fork=true`从配置中删除行（如@GoingTharn 建议）来在前台运行进程，而是通过添加来帮助`upstart`捕获`PID`分叉进程的权利

```
expect daemon 
```

到`/etc/init/mongodb.conf`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-28T06:30:15.910

我遇到了完全相同的问题并做了以下事情：

*   删除了文件 mongod.lock（在我的例子中，这个文件位于 /var/lib/mongodb/）
*   从我的 mongo 客户端使用以下命令

> mongo——修复

这解决了这个问题。可能会注意到，在出现此问题之前，我曾发生过系统崩溃。因此，我认为问题是由于服务器恶魔的不正常关闭引起的。

如果您不确定原因，您可能希望查看日志文件（在我的情况下，我在 /var/log/mongodb/ 下找到它）。这可能会给你一些有用的提示。

谢谢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-28T13:18:16.230

我和你一样面对它。可能是因为我的电脑意外崩溃。我使用命令：`sudo top`（ubuntu），我发现 mongo 正在运行。我杀了它并启动了 mongo。一切都变得正确。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-09T10:36:43.250

我自己修好了。以下是我所做的：

```
 apt-get install mongodb 
```

并覆盖了 .conf 文件。之后一切正常。我希望这会对某人有所帮助。

# database - DataNucleus：未能将记录添加到新创建的表

> ID：13303687
> 
> 赞同：0
> 
> 时间：2012-11-09T07:10:13.277
> 
> 标签：database, google-app-engine, datanucleus

我收到以下错误：

```
12:05:59,782（主要）调试 [DataNucleus.Datastore] - 现在创建了 StoreManager
12:07:22,801（主要）调试 [DataNucleus.Datastore.Schema] - 列“TIP.ID”添加到表的内部表示。
12:07:22,802（主）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.Tip.id] -> 列 [TIP.ID] 使用“org.datanucleus”类型的映射.store.mapped.mapping.IntegerMapping" (org.datanucleus.store.rdbms.mapping.IntegerRDBMSMapping)
12:07:22,822（主要）调试 [DataNucleus.Datastore.Schema] - 列“”USER“.ID”添加到表的内部表示。
12:07:22,825（主）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.User.id] -> 列 ["USER".ID] 使用“org”类型的映射.datanucleus.store.mapped.mapping.IntegerMapping" (org.datanucleus.store.rdbms.mapping.IntegerRDBMSMapping)
12:07:22,828（主）调试 [DataNucleus.Datastore] - 表“USER”将管理类 name.antonsmirnov.tips.db.User 字段的持久性（继承策略 =“new-table”）
12:07:22,830（主要）调试 [DataNucleus.Datastore.Schema] - 列“”USER“.EMAIL”添加到表的内部表示。
12:07:22,836（主要）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.User.email] -> 列 ["USER".EMAIL] 使用“org”类型的映射.datanucleus.store.mapped.mapping.StringMapping" (org.datanucleus.store.rdbms.mapping.VarCharRDBMSMapping)
12:07:22,837（主）调试 [DataNucleus.Datastore.Schema] - 列“”USER“。”NAME“”添加到表的内部表示。
12:07:22,838（主）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.User.name] -> 使用类型映射的列 ["USER"."NAME"] “org.datanucleus.store.mapped.mapping.StringMapping”（org.datanucleus.store.rdbms.mapping.VarCharRDBMSMapping）
12:07:22,852（主要）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.User.tips] -> 列 [[none]] 使用“org.datanucleus”类型的映射.store.mapped.mapping.CollectionMapping" ()
12:07:22,857 (main) DEBUG [DataNucleus.Datastore] - Table TIP 将管理类 name.antonsmirnov.tips.db.Tip 的字段的持久性（继承策略 =“new-table”）
12:07:22,858（主）调试 [DataNucleus.Datastore.Schema] - 列“TIP.CREATED”添加到表的内部表示。
12:07:22,859（主要）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.Tip.created] -> 列 [TIP.CREATED] 使用“org.datanucleus”类型的映射.store.mapped.mapping.DateMapping" (org.datanucleus.store.rdbms.mapping.TimestampRDBMSMapping)
12:07:22,860（主要）调试 [DataNucleus.Datastore.Schema] - 列“TIP.LATITUDE”添加到表的内部表示。
12:07:22,861（主）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.Tip.latitude] -> 列 [TIP.LATITUDE] 使用“org.datanucleus”类型的映射.store.mapped.mapping.DoubleMapping" (org.datanucleus.store.rdbms.mapping.DoubleRDBMSMapping)
12:07:22,862（主）调试 [DataNucleus.Datastore.Schema] - 列“TIP.LONGITUDE”添加到表的内部表示。
12:07:22,863（主要）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.Tip.longitude] -> 列 [TIP.LONGITUDE] 使用“org.datanucleus”类型的映射.store.mapped.mapping.DoubleMapping" (org.datanucleus.store.rdbms.mapping.DoubleRDBMSMapping)
12:07:22,863（主要）调试 [DataNucleus.Datastore.Schema] - 列“TIP.TEXT”添加到表的内部表示。
12:07:22,864（主）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.Tip.text] -> 列 [TIP.TEXT] 使用“org.datanucleus”类型的映射.store.mapped.mapping.StringMapping" (org.datanucleus.store.rdbms.mapping.VarCharRDBMSMapping)
12:07:22,869（主）调试 [DataNucleus.Datastore.Schema] - 列“TIP.USER_ID”添加到表的内部表示。
12:07:22,870（主要）调试 [DataNucleus.Datastore.Schema] - 字段 [name.antonsmirnov.tips.db.Tip.user] -> 列 [TIP.USER_ID] 使用“org.datanucleus”类型的映射.store.mapped.mapping.PersistableMapping" (org.datanucleus.store.rdbms.mapping.IntegerRDBMSMapping)
12:07:22,873 (main) DEBUG [DataNucleus.Datastore.Schema] - 检查“USER”是否存在返回没有表
12:07:22,874（主）调试 [DataNucleus.Datastore.Schema] - 创建表“USER”
12:07:22,885（主）调试 [DataNucleus.Datastore.Schema] - 创建表“用户”
(
    ID INTEGER PRIMARY KEY 自增，
    电子邮件文本（255）空，
    “名称”文本（255）空，
     唯一（电子邮件）
)
12:07:22,887（主）调试 [DataNucleus.Datastore.Schema] - 执行时间 = 1 毫秒
12:07:22,890 (main) DEBUG [DataNucleus.Datastore.Schema] - 检查 TIP 的存在没有返回表
12:07:22,890（主）调试 [DataNucleus.Datastore.Schema] - 创建表提示
12:07:22,899（主要）调试 [DataNucleus.Datastore.Schema] - 创建表提示
(
    ID INTEGER PRIMARY KEY 自增，
    已创建时间戳 NULL，
    LATITUDE 双空，
    经度双 NULL，
    文本文本（255）空，
    USER_ID 整数 NULL
)
12:07:22,900（主）调试 [DataNucleus.Datastore.Schema] - 执行时间 = 1 毫秒
12:07:22,924（主要）调试 [DataNucleus.Datastore.Schema] - 在目录“”模式“”中创建索引“TIP_N49”
12:07:22,925（主要）调试 [DataNucleus.Datastore.Schema] - 创建索引 TIP_N49 ON TIP (USER_ID)
12:07:22,927（主）调试 [DataNucleus.Datastore.Schema] - 执行时间 = 0 毫秒
12:07:24,095（主要）调试 [DataNucleus.Datastore] - 检索连接“jdbc:sqlite::memory:, UserName=null, SQLiteJDBC”的 PreparedStatement
12:07:24,101（主要）调试 [DataNucleus.Datastore] - 关闭 PreparedStatement “org.sqlite.PrepStmt@23461d1”
12:07:24,113（主）调试 [DataNucleus.Datastore.Native] - 从“用户”U 中选择“名称.antonsmirnov.tips.db.User”作为 NUCLEUS_TYPE、U.EMAIL、U.ID、U.“名称”在哪里 U.EMAIL =
12:07:24,114（主）调试 [DataNucleus.Datastore.Retrieve] - 执行时间 = 1 毫秒
12:09:16,938（主要）调试 [DataNucleus.Datastore] - 检索连接“jdbc:sqlite::memory:, UserName=null, SQLiteJDBC”的 PreparedStatement
12:09:16,946 (main) WARN [DataNucleus.Datastore.Persist] - 使用语句 "INSERT INTO "USER" ("NAME",EMAIL) 值插入对象 "name.antonsmirnov.tips.db.User@55291cd" ?,?)" failed : [SQLITE_ERROR] SQL 错误或缺少数据库（没有这样的表：USER）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:18:40.427

您正在内存中使用 Sqlite 数据库。当连接关闭时它会消失。所以桌子没了...

# javascript - ExtJS - 网格面板所有检查

> ID：13303689
> 
> 赞同：0
> 
> 时间：2012-11-09T07:10:19.773
> 
> 标签：javascript, extjs3, gridpanel

我有一个问题......如果你知道这个，请写reple...

当我单击最向上的检查按钮 - 常用检查按钮时，网格面板中的所有项目都已选中或未选中...

可能吗？

不明白的可以看常见的网站email page...

当它不是 ExtJS 时，我可以做到。（Javascript）但我想知道它也在 ExtJS 中。

请帮助我...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:25:11.787

在这里你检查下面的链接你会找到你的问题的答案

[http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/grid-plugins.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/grid-plugins.html)

# http - 如何在没有 HttpServletresponse 的情况下发送对请求的响应

> ID：13303692
> 
> 赞同：-1
> 
> 时间：2012-11-09T07:10:42.963
> 
> 标签：http, jsp, servlets

嗨，请有人在这个问题上帮助我。

我有一个扩展 HttpServlet 的类和一个名为 doGet(HttpServletRequest request) 的方法

但是我没有 HttpServletResponse 。现在我想响应来自客户端的请求，因为我没有响应我如何响应请求。我可以创建能够使用反射在该类中动态创建它吗？ ..我的问题伪代码如下

```
protected void doGet(HttpServletRequest request)throws ServletException, IOException {//having only request as parameter in doGet()
   //Want to respond to a jsp with out having a response 
   //how can i create a response object if i got a HttpServletResponse response the code looks as follows 

    response.setContentType("text/html");
    PrintWriter pw = response.getWriter();
    String name = request.getParameter("username");
    String password = request.getParameter("password");
    if(name.equals("James")&& password.equals("abc")){
    response.sendRedirect("result.jsp");
  }
  else{
  pw.println("u r not a valid user");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:14:12.210

没有这样的方法`protected void doGet(HttpServletRequest request) throws ServletException, IOException`

方法签名是：

`protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException`

# ruby-on-rails-3 - Rails 资产路径在范围内的生产应用程序中不正确

> ID：13303695
> 
> 赞同：1
> 
> 时间：2012-11-09T07:11:18.157
> 
> 标签：ruby-on-rails-3, asset-pipeline

我有一个应用程序正在尝试部署到生产中的子目录。因此，我添加了一个`scope`块，内容如下：

```
scope "/sapa" do 
```

这适用于主代码，但由于某种原因，所有资产（由资产管道呈现）都以`/assets`而不是`/sapa/assets`（即 `

有谁知道为什么会发生这种情况或我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:15:06.583

资产管道不关心路线。[以下](http://guides.rubyonrails.org/asset_pipeline.html#changing-the-_assets_-path)是更改资产路径的方法：

```
config.assets.prefix = "/some_other_path" 
```

# jquery - jqGrid中的总金额

> ID：13303698
> 
> 赞同：0
> 
> 时间：2012-11-09T07:11:29.120
> 
> 标签：jquery, jqgrid

我是使用 jqGrid。

```
$("#list").jqgrid(){
    ....
    editurl:"editMedicineGridData.html",
    onCellSelect : function(rowid, iCol, cellcontent) {
        $('#prescribedDate').val(jQuery("#madicineGrid").jqGrid('getCell',rowid, 'PrescriptionDate'));
    },
    gridComplete: function(){ 
        var grid = $("#madicineGrid"),
            sum = grid.jqGrid('getCol','totalAmount', false, 'sum');
        $('#totalMedicineCharge').html(sum);
    },
    ondblClickRow: function (rowid,name,val,iRow,iCol) {
        $(this).jqGrid('editRow', rowid, true, null, null, null, {}, function (rowid) {
        });
    },
    afterSaveCell : function(rowid,name,val,iRow,iCol) {
        if(name == 'SaleQuantity') {
            var Qval = jQuery("#madicineGrid").jqGrid('getCell',rowid,iCol+1);
            var Aval = jQuery("#madicineGrid").jqGrid('getCell',rowid,iCol);
            jQuery("#madicineGrid").jqGrid('setRowData',rowid,{totalAmount: parseFloat(Aval) * parseFloat(Qval)});
        }
        var grid = $("#madicineGrid"),
            sum = grid.jqGrid('getCol','totalAmount', false, 'sum');
       $('#totalMedicineCharge').html(sum);
    } 
}); 
```

所以我想更新我的数据并更改它。我的问题是，当我使用双击行事件时，我无法调用`afterSaveCell`事件，而当我使用`afterSaveCell`事件时，请不要更新我的数据。我想要 Both.so 什么是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:01:36.377

[我之前在您之前的答案](https://stackoverflow.com/a/13285794/315935)中写过您不能将内联编辑与单元格编辑混合使用。**仅当您使用单元格编辑**`afterSaveCell`时才会调用回调。因此，您应该使用[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)的回调根据其他两列的新值重新计算该列的包含。例如，如果您有列并且需要根据列中的新值重新计算，您可以执行以下操作：**`aftersavefunc``totalAmount``amount``quantity``totalAmount`**

 **```
ondblClickRow: function (rowid,name,val,iRow,iCol) {
    $(this).jqGrid("editRow", rowid, {
        keys: true,
        aftersavefunc: function (rowid) {
            $(this).jqGrid("setCell", rowid, "totalAmount",
                parseFloat($(this).jqGrid("getCell", rowid, "amount")) *
                parseFloat($(this).jqGrid("getCell", rowid, "quantity")));
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:43:55.857

@Oleg 我的解决方案

```
$("#list").jqgrid(){
    ....
    editurl:"editMedicineGridData.html",
    onCellSelect : function(rowid, iCol, cellcontent) {
        $('#prescribedDate').val(jQuery("#madicineGrid").jqGrid('getCell',rowid, 'PrescriptionDate'));
    },
    gridComplete: function(){ 
        var grid = $("#madicineGrid"),
            sum = grid.jqGrid('getCol','totalAmount', false, 'sum');
        $('#totalMedicineCharge').html(sum);
    },
    beforeSubmitCell : function(rowid,celname,value,iRow,iCol)
    {
     if(celname=='SaleQuantity'){
return {'SaleQuantity':value,'id':rowid,'oper':'edit','Amount':jQuery("#madicineGrid").jqGrid('getCell',rowid,'Amount')};   
}},
afterSaveCell : function(rowid,name,val,iRow,iCol) {
        if(name == 'SaleQuantity') {
            var Qval = jQuery("#madicineGrid").jqGrid('getCell',rowid,'SaleQuantity');
            var Aval = jQuery("#madicineGrid").jqGrid('getCell',rowid,'Amount');
            jQuery("#madicineGrid").jqGrid('setRowData',rowid,{totalAmount: parseFloat(Aval) * parseFloat(Qval)});
        }
        var grid = $("#madicineGrid"),
            sum = grid.jqGrid('getCol','totalAmount', false, 'sum');
       $('#totalMedicineCharge').html(sum);
    } 
}); 
```**

# ios - 适用于 iOS 4.0 的 Facebook sdk

> ID：13303704
> 
> 赞同：1
> 
> 时间：2012-11-09T07:11:59.840
> 
> 标签：ios, xcode, facebook

我应该得到什么版本的 facebook sdk 才能让我的应用在 iOS 4.0 下得到支持？我有 xcode 4.5。

目前我有 facebook sdk 3.1，我已经从 iOS 5.0 测试到 6。但是 4.0 版本在显示使用 FBSession 类的错误消息时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:02:18.187

从下面的参考链接中，我们可以说 `Facebook iOS SDK 3.0 Beta`支持 iOS 4.0 及更高版本：

[Facebook iOS SDK 3.0 是否不能在 iOS 3.x 上运行？](https://stackoverflow.com/questions/11441067/will-facebook-ios-sdk-3-0-not-work-on-ios-3-x)

但对于 iOS 版 Facebook SDK 3.1，来自以下链接：

[https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/](https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/)

， 它说`Seamless Facebook Login across iOS versions: Lets your app work seamlessly on all iOS versions 4.3+ and easily integrates with the native login support in iOS 6`

希望它对你有帮助。

`Update`：从此链接参考[http://www.iphonehacks.com/2012/07/facebook-releases-sdk-3-0-for-ios.html](http://www.iphonehacks.com/2012/07/facebook-releases-sdk-3-0-for-ios.html)

改进的 Facebook API 支持：

批处理 SDK 请求，这将显着改善 Facebook API 调用的延迟。

适用于 iOS 的 Facebook SDK 3.0 还包括对将于今年秋季晚些时候发布的 iOS 6 的支持：

在 iOS 6 向用户发布后，SDK 将在可用时自动使用 iOS 6 中的本机 Facebook 登录。只需启用使用 Facebook 登录和`the SDK will ensure your apps work seamlessly on all iOS versions 4.0 and later`. SDK 将继续支持测试版的 iOS 6 集成，直到今年秋季晚些时候 Apple 的用户发布。

# sip - 黑莓 10 PJSIP 实施

> ID：13303705
> 
> 赞同：2
> 
> 时间：2012-11-09T07:12:03.677
> 
> 标签：sip, voip, pjsip, blackberry-10

最近，我对在 BlackBerry 10 平台上制作 PJSIP 应用程序产生了浓厚的兴趣。有没有人设法做这样的事情？我已经按照[https://trac.pjsip.org/repos/wiki/Getting-Started/BB10](https://trac.pjsip.org/repos/wiki/Getting-Started/BB10)上的说明构建了这些库，当然，我现在需要阅读文档并制作一个 BB10 应用程序。看到一些代码让我继续前进会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:13:26.710

我们在 Truphone 为 PJSIP 贡献了支持 BlackBerry 10 的补丁。它还没有完成，我们正在准备另一个补丁，以添加对一些蓝牙和 HDMI 连接的支持以进行音频路由。

无论如何，一旦编译完成，您需要编写一个包装器来将 PJSIP 与应用程序运行循环连接起来。让所有事件都坚如磐石并非易事。如果有足够的兴趣，我们很乐意将我们的项目作为一个开源项目开放。

# java - 在 Java 中确定 Zip 存档中文件的内容类型

> ID：13303707
> 
> 赞同：4
> 
> 时间：2012-11-09T07:12:21.363
> 
> 标签：java, archive, unzip

使用的环境是 Google App Engine。zip 文件已上传到 BlobStore。

我有以下代码：

```
ZipInputStream zis = ...
ZipEntry ze = zis.getNextEntry();
while( ze != null){
    System.out.println(ze.getName());
    ze = zis.getNextEntry();
} 
```

如何确定 zip 存档中每个文件的内容类型？`ze.getName`方法显示文件名。文件类型如何？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T07:27:48.960

您可以使用`mime type`代替尝试通过文件扩展名来猜测，在某些情况下可能会丢失。以下是建立`mime type`文件的选项：

1.  使用`javax.activation.MimetypesFileTypeMap`，例如：

    ```
    System.out.println("Mime Type of " + f.getName() + " is " +
        new MimetypesFileTypeMap().getContentType(f)); 
    ```

2.  使用`java.net.URL`

    ```
    URL u = new URL(fileUrl);
    URLConnection uc = u.openConnection();
    type = uc.getContentType(); 
    ```

3.  使用`Apache Tika`

    ```
    ContentHandler contenthandler = new BodyContentHandler();
    Metadata metadata = new Metadata();
    metadata.set(Metadata.RESOURCE_NAME_KEY, f.getName());
    Parser parser = new AutoDetectParser();
    // OOXMLParser parser = new OOXMLParser();
    parser.parse(is, contenthandler, metadata);
    System.out.println("Mime: " + metadata.get(Metadata.CONTENT_TYPE));
    System.out.println("Title: " + metadata.get(Metadata.TITLE));
    System.out.println("Author: " + metadata.get(Metadata.AUTHOR));
    System.out.println("content: " + contenthandler.toString()); 
    ```

4.  使用`JMimeMagic`

    ```
    MagicMatch match = parser.getMagicMatch(f);
    System.out.println(match.getMimeType()) ; 
    ```

5.  使用`mime-util`

    ```
    Collection<?> mimeTypes = MimeUtil.getMimeTypes(f); 
    ```

6.  使用[机器人](http://droid.sourceforge.net/wiki/index.php/Introduction)

    ```
    Droid (Digital Record Object Identification) is a software tool to 
    perform automated batch identification of file formats. 
    ```

7.  [孔径](http://aperture.wiki.sourceforge.net/Overview)框架

    ```
    Aperture is an open source library and framework for crawling and indexing
    information sources such as file systems, websites and mail boxes. 
    ```

有关上述每个选项的更多详细信息，请参阅[从文件中获取 Mime 类型。](http://www.rgagnon.com/javadetails/java-0487.html)

在这种情况下，最简单的方法是使用第一个解决方案 `javax.activation.MimetypesFileTypeMap`，例如：

```
MimetypesFileTypeMap mtft = new MimetypesFileTypeMap();
String mimeType = mtft.getContentType(ze.getName());
System.out.println(ze.getName()+" type: "+ mimeType); 
```

# umbraco - 如何在 Umbraco 4.8 中实现 global.asax

> ID：13303709
> 
> 赞同：0
> 
> 时间：2012-11-09T07:12:31.957
> 
> 标签：umbraco

我们使用 Umbraco 4.8 作为应用程序开发的 CMS。当应用程序发生任何错误时，它需要重定向到技术错误页面，我们需要将错误记录在数据库中。所以我们试图处理 `global.asax' 中的 application_error 事件，但无法在 umbraco 中添加 global.asax 和 application_error。

有没有办法`global.asax`在 Umbraco 4.8 中添加或 application_error 事件？

请帮我解决这个问题。

谢谢，

法扎鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:33:04.317

```
public class corHandleErrors : System.Web.HttpApplication
{
    protected override void Application_Error(object sender, EventArgs e)
    {

    }
} 
```

应该做的伎俩

# tfs - 为每个环境单独构建定义，tfs 2012

> ID：13303712
> 
> 赞同：0
> 
> 时间：2012-11-09T07:12:47.127
> 
> 标签：tfs, tfsbuild, tfs-2012

我想为每个环境创建一个构建定义。我总共有 3 个环境，例如 st、uat、demo。

在流程选项卡的“要构建的配置”中，我添加了 ST 配置，因为我需要这个环境来构建“stbuildefinition”。当我排队时，构建定义“已发布文件夹”出现在目标路径中，其中包含我的服务和 webapp 文件夹，这些文件夹到目前为止都很好。

但我的服务和 webapp 文件夹包含所有环境的所有 web.config 文件，如 st、uat 和 demo。但我只需要圣。

任何人都可以帮我找到解决方案。

# hadoop - 如何通过hadoop的提示运行GIS代码？

> ID：13303713
> 
> 赞同：2
> 
> 时间：2012-11-09T07:12:58.367
> 
> 标签：hadoop, gis

我正在通过 hadoop 的提示以下列方式运行 GIS 代码：

*   在 Eclipse 中编写了 GIS 代码，包括所有 GIS jar（相关）。
*   走进目录。我的 Eclipse 工作区在哪里。
*   通过在类路径中添加所有相关 jar 来编译代码。*（编译成功）。
*   建造了罐子。
*   现在使用 hadoop 运行相同的 jar：`bin/hadoop jar my_jar_file_name.jar my_pkg_structure.Main_class_file`

现在，尽管代码没有错误，但当我尝试通过 hadoop 的 propmpt 执行时，它给了我多个问题。

有没有可行的替代方法来做同样的事情而没有任何麻烦？

另请注意，gid 代码在 Eclipse 中运行良好。因为，我必须在 hadoop 上进行地理处理，所以我需要通过 hadoop 的提示符运行它。

# c++ - C ++内部类无法访问外部类的成员

> ID：13303717
> 
> 赞同：1
> 
> 时间：2012-11-09T07:13:05.673
> 
> 标签：c++

> **可能重复：**
> [内部类可以访问私有变量吗？](https://stackoverflow.com/questions/486099/can-inner-classes-access-private-variables)
> [内部类访问外部类](https://stackoverflow.com/questions/11405069/inner-class-accessing-outer-class)

我有一些简单的嵌套类，因此它们可以在没有额外输入的情况下与变量交互，但我的编译器给了我一个错误。我如何允许他们在不使用 &time 作为函数输入或在 Vect 类中包含变量 &time 的情况下进行交互？

我尝试使用相同的逻辑，您可以访问仅在代码中的数据，与函数原型位于相同的位置，而是包装在一个类中。这适用于我使用过的任何东西，除了其他类。谁能解释为什么？

我已经用定义之前的注释行标记了使用有问题的时间变量的地方。

```
/*********/
#define MAX_POLY 3

class Container
{
public:
    Container(void);
    ~Container(void);

    float time;/*********/
    class Vect
    {
        float P[MAX_POLY],iT;
    public:
        Vect(void){iT = 0.0f;P = {0,0,0};}
        ~Vect(void);

        float GetPoly(int n){return P[n];}
        float Render(void)
        {
            float t = time - iT;/*********/
            float temp[2] = {0,0};
            for(int n=0;n<MAX_POLY;n++)
            {
                temp[0] = P[n];
                for(int m=0;m<n;m++)
                    temp[0] *= t;
                temp[1] += temp[0];
            }
            return temp[1];
        }
        void SetPoly(int n,float f)
        {
            float t = time-iT;/*********/
            P[0] = P[2]*t*t + P[1]*t + P[0];
            P[1] = 2*P[2]*t + P[1];
            //P[2] = P[2];
            P[n] = f;
            iT = time;/*********/
        }
    }X;
};

int main()
{
    Container Shell;
    Shell.X.SetPoly(0,5);
    Shell.X.SetPoly(1,10);
    Shell.X.SetPoly(2,-1);
    for(int n=0;n<10;n++)
    {
        Shell.time = (float)n;
        cout << n << " " << Shell.X.Render() << endl;
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T07:20:16.493

您收到错误的原因（即使您没有发布实际错误，我也设法弄清楚了，请以后再做），是您实际上在函数中没有类的*实例*班级。您可能应该考虑这里的设计，但要快速解决它（并且“肮脏”），您可以添加一个在子类中设置实例的函数：`Container``Vect``Container`

```
class Container
{
    ...

    class Vect
    {
        Container *container;

    public:
        void SetContainer(Container &container)
            { this->container = &container; }

        float Render(void)
            {
                float T = container->time - iT;
                ...
            }

        ...
    } X;
};

int main()
{
    Container Shell;
    Shell.X.SetContainer(Shell);
    Shell.X.SetPoly(0,5);
    ...
} 
```

**编辑：**更好的方法是使用构造函数设置对父对象的引用（感谢 juanchopanza 的想法）：

```
class Container
{
    ...

    Container()
        : X(*this)
        { ... }

    class Vect
    {
        Container& container;

    public:
        Vect(Container& cont)
            : container(cont)
            { }

        float Render(void)
            {
                float T = container.time - iT;
                ...
            }

        ...
    } X;
}; 
```

我仍然认为这是一种肮脏的解决方案（但不像我的第一个那样肮脏），你应该考虑改变设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T07:31:33.740

“......嵌套类的成员对封闭类的成员没有特殊的访问权限，也没有对已授予封闭类友好的类或函数的特殊访问权限；应遵守通常的访问规则（第 11 条）。封闭类对嵌套类的成员没有特殊的访问权限；应遵守通常的访问规则（第 11 条）。..."

因此，让他们成为朋友。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T07:37:29.607

内部类不能访问外部类的非静态变量。这是 C++，我们必须在使用它的非静态成员数据之前实例化该对象。所以如果你想使用你的设计，你有两个选择：

1.  将变量（在您的情况下为时间）更改为静态。但是对于所有 Container 类，您只有一份时间副本。

2.  让嵌套类包含指向父类的指针。下面的代码与 Joachim 的解决方案类似，但我们不需要显式设置父级。

```
class Container {

    public:
      Container() : X(this) {}
      float time;

      class Vect {
      public:
        Vect(Container* parent) : parent_(parent) {}
        void foo() {
          myT = parent->time;
        }
      private:
        Container * parent_;
      } X;
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:27:13.627

基本上，类是对等的类。在 OOPs 原则中，每个类都被封装。那么内部类如何直接访问另一个类的成员。它违反了OOP的基本原则。

# jsp - 上传文件 jsp 和 servlet

> ID：13303719
> 
> 赞同：-2
> 
> 时间：2012-11-09T07:13:10.857
> 
> 标签：jsp, servlets, file-upload

我尝试上传一个文件（图像或 txt），然后我在 div 或 textarea 中显示该文件。我正在使用 jsp 和 java servlet。我正在寻找类似的例子，但我没有找到，谁能帮助我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:28:29.147

我用一个简单的ideea搜索解决了这个问题。上传后，我用 ajax 更改了背景 src，并指示一个用 blob 图像响应的 servlet。所以图像将在 div 背景中。

# android - Android：如何以不同的方式从 json 对象中获取 jsonarray

> ID：13303722
> 
> 赞同：0
> 
> 时间：2012-11-09T07:13:23.227
> 
> 标签：android, json, for-loop

我知道如何`jsonarray`从`jsonobject`. 我正在做下面的代码来获取 jsonarray。

```
JSONObject recvJson = new JSONObject(holder.toString());   
String numberByte= (String) recvJson.get("data");
String ts = (String) recvJson.get("time");
JSONObject temp2 = new JSONObject("{ \"data\" : " + numberByte+ "}");
JSONArray recvJarray = temp2.getJSONArray("data"); 

for (int i = 0; i < recvJarray.length(); i++) 
{
byteArray[i] = (byte) recvJarray.getInt(i); 
} 
```

但不想使用`for-loop`，不使用**for 循环**或**任何其他循环**想要**检索 jsonarray 数据值**。

我应该怎么做 ？？我已经完成了谷歌并看到了许多论坛，但是在不使用 for 循环的情况下成功地检索了数据。

**例如：** `I ll be getting 80 - 100 packets of 1024bytes per second from server, I want to retrieve this data & store it into bytearray`。通过使用 for-loop 大约需要 300 毫秒到 400 毫秒，而我在这之间丢失了许多数据包。所以我想使用不同的方法。如果有任何想法或解决方案来解决这个问题。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:20:57.937

尝试使用[gson](http://code.google.com/p/google-gson/)

它使用 java 反射将对象转换为 json 和 json 以使用简单的方法转换为对象

toJson(),fromJson() （它也适用于对象数组和列表）

但是您必须为 jsons 编写正确的类（包含所有字段）

阅读文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:20:59.893

您可以使用 GSON 来解析 json 对象。解码 json 数据更快更容易。检查这些链接。 [Gson1](http://www.techrepublic.com/blog/app-builder/use-gson-to-work-with-json-in-your-android-apps/1386) , [Gson2](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

# c# - 如何将带有日期的对象列表转换为以月份日期为索引的数组？

> ID：13303725
> 
> 赞同：0
> 
> 时间：2012-11-09T07:13:31.570
> 
> 标签：c#, .net, linq, list

转换`List<DayValue>`为数组的最简单方法是什么，其中索引是月份中的日期：

```
class DayValue 
{
    public DateTime Day { get; set; }
    public object Value { get; set; }
} 
```

我需要内联执行此操作，因为这将在 linq 中使用。我知道我可以遍历项目并设置数组值，但这需要完成

```
 list.FunctionThatConvertsItIntoArray() 
```

例子：

输入列表：

```
{ 2012-11-01, "Value1" }
{ 2012-11-03, "Value2" }
{ 2012-11-05, "Value3" } 
```

输出数组：

```
1 => "Value1"
2 => null
3 => "Value2"
4 => null
5 => "Value3"
6 => null
7 => null
8 => null    
9 => null 
10 => null
11 => null
12 => null
13 => null
14 => null
15 => null
16 => null
17 => null
18 => null
19 => null
20 => null
21 => null
22 => null
23 => null
24 => null
25 => null
26 => null
27 => null
28 => null
29 => null
30 => null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:00:47.333

```
var days = Enumerable.Range(1, 31)
                     .Select(i => list.Find(x => x.Day.Day == i))
                     .Select(d => d != null ? d.Value : null)
                     .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:58:31.403

这解决了我的问题：

```
Enumerable.Range(0, 31).Select(
    index => (list.FirstOrDefault(item => item.Day.Day == index) ?? new DayValue()).Value).ToArray(); 
```

完整的解决方案：

```
public class DayValue
{
    public DateTime Day { get; set; }
    public object Value { get; set; }
}

var list = new List<DayValue>();

list.Add(new DayValue { Day = new DateTime(2012, 11, 1), Value = "Value1" });
list.Add(new DayValue { Day = new DateTime(2012, 11, 3), Value = "Value2" });
list.Add(new DayValue { Day = new DateTime(2012, 11, 5), Value = "Value3" });

var result = Enumerable.Range(0, 31).Select(
    index => (list.FirstOrDefault(item => item.Day.Day == index) ?? new DayValue()).Value).ToArray(); 
```

# msbuild - 通过 MSBUILD 构建时未使用编译符号？

> ID：13303727
> 
> 赞同：0
> 
> 时间：2012-11-09T07:13:41.990
> 
> 标签：msbuild, symbols

我有一个项目，我在项目属性中添加了一个编译符号（MYSYMBOL）。从 VS 构建时，它工作得很好，应用程序也会相应地执行。

其他项目以这种方式定义了各种符号。

从 MSBUILD 构建时，由于某种奇怪的原因，MYSYBOL 被忽略，并且应用程序的行为就像从未设置过一样。

我尝试添加`/p:"DefineConstants=MYSYMBOL"`到 msbuild 调用，但随后构建失败，因为它似乎用这个单独替换每个项目的其他符号，所以一个程序集例如需要`MYSYMBOL + OTHERSYMBOL`但现在只获取`MYSYMBOL`.

这很奇怪，因为在通过 msbuild 构建时，它实际上对那些拥有它的项目使用了 OTHERSYMBOL。

有没有人知道`MYSYMBOL`在通过 msbuild 构建时可能导致项目属性不可用的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:17:08.660

原来，构建脚本自己声明了一组编译器符号，覆盖了单独项目设置中的那些，这反过来又导致了这个问题。

据我了解，您不能添加一个或多个编译器符号，因为您声明的任何内容都替换了项目的符号。

最终不得不传递整个解决方案中每个项目使用的每个符号。

太糟糕了 ：（

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:34:15.500

您需要向 DefineConstants 列表添加一个新符号（而不是覆盖整个 DefineConstants 列表）。这将做你想要的：

```
<PropertyGroup>
    <DefineConstants>MYSYMBOL;$(DefineConstants)</DefineConstants>
</PropertyGroup> 
```

# iphone - iPhone中的UIPickerview？

> ID：13303738
> 
> 赞同：1
> 
> 时间：2012-11-09T07:14:44.583
> 
> 标签：iphone, xcode, uipickerview

我是 Objective-C 的新手，我需要在触摸特定文本字段时创建一个 UIPickerView，该文本字段将填充 NSMutableArray 的项目。我已经实现了这段代码，但看不到添加的 pickerView。我仍然可以看到键盘触摸文本字段时弹出...我哪里错了..???

```
- (BOOL)textFieldDidBeginEditing:(UITextField *)textField {

    if( textField == txtstate)
    {
        [txtstate resignFirstResponder];
        pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 200, 320, 200)];

        pickerView.delegate = self;
        pickerView.dataSource = self;
        pickerView.showsSelectionIndicator = YES;
    [self.view addSubview:pickerView];

    }

    }
  - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
   {
return 1;
   }

  - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
  {
 [pickerView selectRow:1 inComponent:0 animated:NO];

txtstate.text= [[arr objectAtIndex:row] valueForKey:@"Code"]; 
  }

 - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
  {
return [arr count];
  }

  - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
 {

 return [arr objectAtIndex:row];
 } 
```

我的数组看起来像这样：

```
(
{
        Code = Wisconsin;
        Id = "6215b339-2959-4a3d-9430-f5bddb0a4eb9";
    },
        {
        Code = Wyoming;
       Id = "7972f963-9b3b-4ba6-a30c-d68bb9f59145";
    }
) 
```

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T07:07:45.167

```
u can add button on UITextField and add your picker at that button action . 
```

确保您的按钮应该是自定义类型的按钮，并将该按钮放在文本字段上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:19:55.250

如果你不给委托人`UITextField`命名，那么在方法`txtstate`中像下面这样给委托人`viewDidLoad:`

```
txtstate.delegate = self; 
```

# winapi - 赢32。如何将 POINT 转换为 LPARAM

> ID：13303748
> 
> 赞同：8
> 
> 时间：2012-11-09T07:15:35.983
> 
> 标签：winapi, lparam

我需要发送`WM_MOUSEWHEEL`消息。如何转换`POINT`为`LPARAM`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T07:20:08.040

只需使用[`MAKELPARAM`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632661%28v=vs.85%29.aspx)宏

```
MAKELPARAM( pt.x, pt.y ) 
```

# javascript - cq5.5中导入XML

> ID：13303749
> 
> 赞同：0
> 
> 时间：2012-11-09T07:15:55.053
> 
> 标签：javascript, html, aem

我想在 cq5.5 中导入我的数据。但是内容加载器的选项在 cq5.5 中不可用。如何在 cq5.5 中导入 xml。我们必须创建捆绑包还是有其他方法可以这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:28:08.147

我尚未验证该模块是否在 CQ5.5 中，但我认为[Sling JCR ContentLoader](http://svn.apache.org/repos/asf/sling/trunk/bundles/jcr/contentloader/)如果您自己添加它应该在 CQ 中工作，如果您的意思是那个模块。

除此之外，一种有用的模式是将 XML 文件放入文件夹中，通过 JCR 或 Sling 事件观察该文件夹，并使用任何合适的 XML 解析器或摘要器来处理它。这为您提供了充分的灵活性，并且使用正确的解析器应该允许您处理任意大小的 XML 文件。该场景类似于 Sling 的[espblog 示例](http://svn.apache.org/repos/asf/sling/trunk/samples/espblog/)检测和处理图像文件以创建缩略图的方式。

您还可以使用 CQ 的工作流引擎来检测特定文件夹中的 XML 文件并触发工作流步骤来处理/导入它们，这可能会让您通过 CQ 的工作流控制台更好地查看事物。

# macos - Mac App:com.killed app 因为“不允许使用 apple.developer.aps-environment entitlement”

> ID：13303755
> 
> 赞同：4
> 
> 时间：2012-11-09T07:16:51.197
> 
> 标签：macos, app-store, distribution

我在提交到 Mac App Store 之前验证 OSX 应用程序时遇到了问题。我按照 OS X 工作流程指南（第 79 页）来测试安装。我注意使用“Identitied without profiles”下出现的安装证书来创建安装包。然后我使用安装程序命令安装它： sudo installer -store -pkg "MyApplication.pkg" -target / 最后，应用程序安装在 /Application 中。但是，该应用程序无法启动，并且控制台显示了日志：“taskgated:killed com.companyname.appbundle 因为不允许使用 com.apple.developer.aps-environment 授权”

我确定为该 Apple ID 启用了 APNS，并且我还在[论坛](https://devforums.apple.com/message/732763)中找到了遇到相同问题的帖子：

有没有遇到问题？

# asp.net - 如何将我的 json 反序列化为类？

> ID：13303757
> 
> 赞同：0
> 
> 时间：2012-11-09T07:16:58.637
> 
> 标签：asp.net, json, web-services, arrays

我的 Json 字符串：

```
{"Result":[{"branch":"61","food":"Idli","food_photo":[255,216,255,22,....55,217],"preparation":"23","qty":"Pcs"}]} 
```

我的任务：1）当我反序列化 时，我的列表中的**food_photo为空。**2）如何在c#中将此json字符串反序列化为类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:35:42.850

在 stackoverflow 上查看很多类似的问题：

[将 JSON 字符串解析为对象的最简单的 C# 函数是什么？](https://stackoverflow.com/questions/2859753/what-is-simpliest-c-sharp-function-to-parse-json-string-into-object)

[将 JSON 对象反序列化为 C# 对象](https://stackoverflow.com/questions/10136049/deserialize-json-object-to-c-sharp-object)

# sharepoint - Sharepoint Designer 中不可用的页面布局

> ID：13303764
> 
> 赞同：2
> 
> 时间：2012-11-09T07:17:24.483
> 
> 标签：sharepoint, sharepoint-2010

`Page Layouts not available in Sharepoint Designer`. 难道是因为我有SP2010标准版？或者我可以通过某些设置使其可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:24:38.890

SharePoint Designer 在 2010 版本中进行了很多改进。导航要容易得多，因为我们现在有一个站点对象面板：

但是，有时缺少页面布局链接。这是一个常见的场景：

*   您在网站集中有一个子网站
*   发布功能在子网站中激活，但在网站集中未激活
*   您想在网站集级别编辑/添加页面布局，以在您的子网站中使用
*   在 SharePoint Designer 中打开网站集时，在“网站对象”面板中看不到页面布局

您现在有 2 个选项：

1.  您可以激活网站集中的发布功能（页面布局链接会返回）
2.  您可以使用所有文件链接并浏览到母版页和页面布局库 ( `_catalogs > masterpage`)

任何一个选项都可以，除非您真的不希望网站集中的发布功能。`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T15:50:48.050

转到您的网站集，然后转到**网站操作**->**网站设置**->**网站集管理**-> 并启用“SharePoint Server 发布基础结构。

你现在还**没有完成**。您应该再次返回您的站点设置（上一页），然后单击“**管理站点功能**”并激活“ **SharePoint Server 发布**”。

重新启动您的 SharePoint Designer，您将在左侧的导航面板中找到“**页面布局”**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T06:22:55.267

从 SharePoint 签入所需的页面布局，然后重新打开 SharePoint 设计器，您将找到它们

# objective-c - 如何渲染 html 以使高度完全适合它？

> ID：13303765
> 
> 赞同：0
> 
> 时间：2012-11-09T07:17:36.170
> 
> 标签：objective-c, ios, ios5, uiwebview, ios6

我正在尝试制作一个 tumblr 应用程序。当我对任何帖子发出获取请求时，他们会返回正文的 html。目前我正在使用 html 并将其推入 uiwebview。我设置了视图的宽度，因为它总是相同的，但我不知道如何计算它的高度。我正在尝试将其放入 uitable 中，因此我需要计算出每个单元格的高度。

所以基本上可以在渲染html后获得uiwebview的高度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:37:58.747

我使用 javascript 技巧来做到这一点。

在将 HTML 字符串加载到 UIWebView 之前，您需要将以下 javascript 添加到 HTML 字符串中。

```
NSMutableString *javaScript = [[NSMutableString alloc] init];
[javaScript appendString:@"<script type=\"text/javascript\">"];
[javaScript appendString:@"  window.onload = function() {"];
[javaScript appendString:@"    window.location.href = \"ready://\" + document.body.offsetHeight;"];
[javaScript appendString:@"  }"];
[javaScript appendString:@"</script>"]; 
```

当 UIWebView 完成渲染并知道所需的 UIWebView 高度以显示整个内容而无需上下滚动时，将触发此 javascript。高度由 javascript 变量 document.body.offsetHeight 给出

javascript 会将 UIWebView 导航到准备好的 url 方案：//

document.body.offsetHeight 的值存储为“主机”

您必须使用 UIWebView 委托拦截此请求，以便 UIWebView 不会导航到 ready://

```
- (BOOL)webView:(UIWebView*)webView
shouldStartLoadWithRequest:(NSURLRequest*)request
 navigationType:(UIWebViewNavigationType)navigationType {

    NSURL *url = [request URL];
    if (navigationType == UIWebViewNavigationTypeOther) {
        if ([[url scheme] isEqualToString:@"ready"]) {

            float contentHeight = [[url host] floatValue];
            NSLog(@"web height:%f",contentHeight);

            //You can use the contentHeight to resize the UIWebView frame

            return NO; //Prevent the UIWebView to navigate to this ready:// scheme
        }
    }
    return YES;
} 
```

“就绪”方案只是一个任意名称。基本上，JavaScript 要求 UIWebView 导航到 ready://234

“就绪”是自定义 URL 方案

“234”是 UIWebView 在不滚动的情况下呈现 HTML 内容所需高度的示例。

# php - 当ignore_user_abort（true）时我如何停止php脚本；设置？

> ID：13303767
> 
> 赞同：1
> 
> 时间：2012-11-09T07:18:09.380
> 
> 标签：php

我试图制作一个可以处理巨大文件的脚本，但我愚蠢地添加了这些行

```
set_time_limit(0);
ignore_user_abort(true); 
```

到脚本的顶部。在我注意到剧本进展缓慢，需要 1/3 年才能完成。我试图阻止它。我可以说它还在继续，因为它每小时都会用 GB 的数据填充我的错误日志。它说它来自那个脚本。我怎样才能阻止它？它已经持续了一天多。

我没有能力重新启动服务器本身，因为它的虚拟主机来自 bluehost

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:20:36.413

Bluehost 根据[他们的功能页面](http://www.bluehost.com/cgi/info/hosting_features)允许 SSH 访问，所以登录到那个页面，使用类似`top`的方法找到仍在运行的 PHP 进程，然后将其杀死（通过`kill -9 <process id>`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:20:25.073

`killall -9 %your_php_process_name%`. 或者`ps aux | grep php`第二列是一个pid。然后输入`kill -9 %pid%`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:24:00.400

如果您无法访问 SSH 控制台，您可以尝试使用 PHP`system`功能。`top`虽然不会工作。试试`ps`吧。

# redis - Redis Store 5MB 限制是否适用于 Express 中的会话支持？

> ID：13303772
> 
> 赞同：0
> 
> 时间：2012-11-09T07:19:08.297
> 
> 标签：redis, session-cookies, express

会话通常需要多少数据。如果我预计每天的访问量约为 1000 次，那么 Redis 主机免费计划的 5MB 限制对我有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:30:30.297

这取决于用于存储单个会话的数据结构类型。看看[这篇文章](http://nosql.mypopescu.com/post/1010844204/redis-memory-usage)，它总结了 redis 提供的数据结构的内存使用情况。[它在内存优化](http://redis.io/topics/memory-optimization)方面可能有点过时，但它仍然是粗略估计的好资源。

# android - 解析 JSON 时方法不支持错误。

> ID：13303776
> 
> 赞同：0
> 
> 时间：2012-11-09T07:19:31.280
> 
> 标签：android, json

我正在尝试 json 解析，但是当解析时给出错误 httppost 方法不受此 url 支持我在这里写下我的代码

[http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurants&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json](http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurants&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json)

```
SearchListActivity.java

 public class SearchlistActivity extends Activity {

    private static String url="http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurants&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json/";   private static final String TAG_RESULTS = "results";    private static final String TAG_RESPONSEDATA="responseData";    

        @Override
    public void onCreate(Bundle savedInstanceState)

    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.e("json ----","urlll---->"+url);       
        //JSONArray results = null;       
         JSONArray responseData=null;
     // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JsonParserSearch jParser = new JsonParserSearch();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts

             responseData = json.getJSONArray(TAG_RESPONSEDATA);
             Log.e("jsonnn data","sfsssss00000-------->"+responseData);

            }
        catch (JSONException e) {
            e.printStackTrace();
        }

    } }

> 
```

> Jsonparsersearch.java
> 
> > 公共类 JsonParserSearch { 静态 InputStream is = null; 静态 JSONObject jObj = null; 静态字符串 json = "";
> 
> ```
> // constructor
> public JsonParserSearch() {
> 
> }
> 
> public JSONObject getJSONFromUrl(String url) {
> 
>     // Making HTTP request
>     try {
>         // defaultHttpClient
>         DefaultHttpClient httpClient = new DefaultHttpClient();
>         HttpPost httpPost = new HttpPost(url);
> 
>         HttpResponse httpResponse = httpClient.execute(httpPost);
>         HttpEntity httpEntity = httpResponse.getEntity();
>         is = httpEntity.getContent();          
> 
>     } catch (UnsupportedEncodingException e) {
>         e.printStackTrace();
>     } catch (ClientProtocolException e) {
>         e.printStackTrace();
>     } catch (IOException e) {
>         e.printStackTrace();
>     }
> 
>     try {
> 
>         BufferedReader reader = new BufferedReader(new InputStreamReader(
>                 is, "iso-8859-1"), 8);
>         StringBuilder sb = new StringBuilder();
>         String line = null;
>         while ((line = reader.readLine()) != null) {
>             sb.append(line + "\n");
>         }
>         is.close();
>         json = sb.toString();
> 
>        Log.e("json object url","display"+json);
> 
>     } catch (Exception e) {
>         Log.e("Buffer Error", "Error converting result " + e.toString());
>     }
> 
>     // try parse the string to a JSON object
>     try {
>         jObj = new JSONObject(json);
>     } catch (JSONException e) {
>         Log.e("JSON Parser finaal", "Error parsing data " + e.toString());
>     }
> 
>     // return JSON String
>     return jObj;
> 
> }      } 
> ```

```
 >     > > lOGCAT ERROR
    >     > > 
    >     > > 11-09 12:23:17.700: E/json ----(481): urlll---->http://ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurants&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json 11-09 12:23:18.260: E/json object url(481): display<HTML> 11-09
    >     > 12:23:18.260: E/json object url(481): <HEAD> 11-09 12:23:18.260:
    >     > E/json object url(481): <TITLE>HTTP method POST is not supported by
    >     > this URL</TITLE> 11-09 12:23:18.260: E/json object url(481): </HEAD>
    >     > 11-09 12:23:18.260: E/json object url(481): <BODY BGCOLOR="#FFFFFF"
    >     > TEXT="#000000"> 11-09 12:23:18.260: E/json object url(481): <H1>HTTP
    >     > method POST is not supported by this URL</H1> 11-09 12:23:18.260:
    >     > E/json object url(481): <H2>Error 405</H2> 11-09 12:23:18.260: E/json
    >     > object url(481): </BODY> 11-09 12:23:18.260: E/json object url(481):
    >     > </HTML> 11-09 12:23:18.260: E/JSON Parser finaal(481): Error parsing
    >     > data org.json.JSONException: Value <HTML> of type java.lang.String
    >     > cannot be converted to JSONObject 11-09 12:23:18.270:
    >     > D/AndroidRuntime(481): Shutting down VM 11-09 12:23:18.270:
    >     > W/dalvikvm(481): threadid=1: thread exiting with uncaught exception
    >     > (group=0x4001d800) 11-09 12:23:18.290: E/AndroidRuntime(481): FATAL
    >     > EXCEPTION: main 11-09 12:23:18.290: E/AndroidRuntime(481):
    >     > java.lang.RuntimeException: Unable to start activity
    >     > ComponentInfo{com.example.ssss/com.example.ssss.SearchlistActivity}:
    >     > java.lang.NullPointerException 11-09 12:23:18.290:
    >     > E/AndroidRuntime(481):  at
    >     > android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    >     > 11-09 12:23:18.290: E/AndroidRuntime(481):  at
    >     > android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    >     > 11-09 12:23:18.290: E/AndroidRuntime(481):  at
    >     > android.app.ActivityThread.access$2300(ActivityThread.java:125) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:43:08.193

您正在尝试使用`POST`仅支持`GET`.

尝试使用 a`HttpGet`而不是`HttpPost`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:57:28.950

您应该使用`Get`请求而不是`POST`请求。

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //make async request 
    new myAsynctask().execute();
}

//********************************************
//get json string
public String getJSONString() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();

    String urlString="http://www.ajax.googleapis.com/ajax/services/search/local?v=1.0&q=restaurants&rsz=8&sll=-27.5595451,-48.6206452&radius=1000&output=json";

    HttpGet httpGet = new HttpGet(urlString);
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } else {
            Log.e(getClass().getSimpleName(), "Failed to download json response");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return builder.toString();
}
//********************************************
private class myAsynctask extends AsyncTask<Void, Void, String>{

    @Override
    protected String doInBackground(Void... params) {

        String jsonString=getJSONString();
        return jsonString;
    }
    @Override
    protected void onPostExecute(String jsonString) {
        super.onPostExecute(jsonString);
        Log.e(getClass().getSimpleName(), jsonString);
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:46:39.280

jParser.getJSONFromUrl(url) 使用 POST 方法，但你应该使用 GET

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:51:01.297

您收到的错误来自服务器，因为它不支持该实际 URL 的 POST。

在处理结果之前检查 HTTP 状态代码是一种很好的做法。通过调用来做到这一点`int statusCode = httpResponse.getStatusLine().getStatusCode();`。状态码 2XX 表示成功（[此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)列出的代码）。

您的代码的另一个问题是，尽管您正在创建一个 POST 请求，但所有信息都在请求的查询参数中提供。请求的 POST 部分（正文部分）实际上是空的。

```
MultipartEntity entity = new MultipartEntity();
entity.addPart("alma", new StringBody("beka", Charset.forName("UTF-8")));
entity.addPart("apple", new StringBody("frog", Charset.forName("UTF-8")));
httpPost.setEntity(entity); 
```

这是将参数作为 POST 参数添加到请求的示例...

# nunit - nunit-console.exe 在数百次测试后挂起

> ID：13303777
> 
> 赞同：0
> 
> 时间：2012-11-09T07:19:54.780
> 
> 标签：nunit

请帮我：

我在 Windows 控制台中运行 nunit。

经过 300 多次测试后，程序挂起。我不知道为什么。

```
C:\Projekte\Sochi2014_TP_testing\reporting>"NUnit 2.6"\bin\nunit-console.exe /la
bels /out=NUnitTestResult.txt /xml=NUnitTestResult.xml ..\bin\x86\Debug\Sochi201
4_TP_testing.dll
NUnit-Console version 2.6.0.12051
Copyright (C) 2002-20011 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment -
   OS Version: Microsoft Windows NT 6.1.7601 Service Pack 1
  CLR Version: 2.0.50727.5456 ( Net 3.5 )

ProcessModel: Default    DomainUsage: Single
Execution Runtime: net-3.5
Log4Net not configured. Looked for file: C:\Projekte\Sochi2014_TP_testing\bin\x8
6\Debug\log4net.config 
```

**我的问题的更多详细信息：**

我使用硒和specflow。Nunit 在“场景大纲”中挂断。之前的测试运行正常。当我使用鼠标时，浏览器 (FF 13) 已打开并正常运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:22:30.113

我的*猜测*是你有一个死锁的测试。您可以向 NUnit 添加超时：

```
nunit-console /timeout=10000 (other options as before) 
```

这为每个测试增加了 10 秒的超时时间。然后您应该能够查看哪些测试超时，并找出问题所在。测试的数量不应该成为问题——我的 Noda Time 项目有数千个测试运行没有问题，我确信这远不是使用 NUnit 的最大项目......

# python - 为什么nosetests 说--with-coverage 不是一个选项？

> ID：13303781
> 
> 赞同：7
> 
> 时间：2012-11-09T07:20:04.773
> 
> 标签：python, unit-testing, code-coverage, nosetests, coverage.py

我正在使用鼻子测试来自动发现和运行我的单元测试。我还想让它生成覆盖率报告。

当我使用以下命令运行鼻子测试时，一切正常

```
nosetests . 
```

我在网上查到要生成覆盖率，nosetests 有一个命令行参数`--with-coverage`。我还使用`nosetests --help`. 但是，每当我运行以下命令时，我都会得到以下输出

```
nosetests --with-coverage .
Usage: nosetests [options]

nosetests: error: no such option: --with-coverage 
```

我通过运行再次检查了覆盖插件是否已安装

```
nosetests --plugins 
```

覆盖率与许多其他插件一起显示在列表中。

我也知道我已经安装了覆盖，因为我可以使用以下方式手动运行覆盖数据收集：

```
coverage run test.py 
```

我是否滥用了 --with-coverage 选项？还是我还缺少其他东西？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:52:57.833

我从来没有让命令行选项工作。我按照 Janne Karila 的建议做了，并在我的项目主目录中创建了一个 setup.cfg 文件。一旦我有了那个文件，我就可以运行没有参数的鼻子测试，一切都会运行。

我在尝试创建文档时遇到的一个问题是我无法弄清楚配置中允许使用哪些参数。但事实证明，此处列出的任何命令[https://nose.readthedocs.org/en/latest/usage.html#options](https://nose.readthedocs.org/en/latest/usage.html#options)都可以使用。只需在命令前去掉双破折号。

作为参考，我当前的配置文件是

```
[nosetests]
verbosity=1
detailed-errors=1
with-coverage=1
cover-erase=1
cover-package=application
cover-html=1
cover-html-dir=htmlcov
where=tests 
```

这个配置文件说要使用覆盖率，删除之前运行的覆盖率，只报告应用程序包中的文件，并输出一个 html 报告到 htmlcov 目录。

希望这将有助于将来的其他人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T08:26:12.900

你的语法是正确的。这可能是您的环境有问题，请仔细检查您的 python 环境以及安装鼻子和覆盖范围的位置。作为健全性检查，您可以快速设置新的 virtualenv，安装鼻子，并使用覆盖选项运行命令。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-15T15:12:27.780

截至`nose 1.3.7`- [Pypy 上可用的最新版本](https://pypi.python.org/pypi/nose/)- 该命令不存在：

[https://github.com/nose-devs/nose/blob/release_1.3.7/nose/plugins/cover.py](https://github.com/nose-devs/nose/blob/release_1.3.7/nose/plugins/cover.py)

看起来文档是从**具有**这些选项`master`的项目分支生成的：

 **[https://github.com/nose-devs/nose/blob/master/nose/plugins/cover.py](https://github.com/nose-devs/nose/blob/master/nose/plugins/cover.py)

你*可以*做的是`nose`像这样从主分支安装：

`pip install git+https://github.com/nose-devs/nose@master --upgrade`

它会说它刚刚安装`1.3.7`，但这只是因为该版本尚未在项目`setup.py`文件中碰撞：[https ://github.com/nose-devs/nose/blob/master/setup.py#L4](https://github.com/nose-devs/nose/blob/master/setup.py#L4)

请记住，您刚刚安装了一个未发布的版本`nose`，可能还有其他错误。**

# php - php中的XML解析不起作用？

> ID：13303782
> 
> 赞同：0
> 
> 时间：2012-11-09T07:20:06.230
> 
> 标签：php, mysql, xml

我认为我从 mysql 查询中正确地在我的 php 脚本中创建了一个 xml 文档，但是即使 mysql 查询有效，我也没有得到一个 xml 文档作为回报（没有 php 错误可以帮助我）！

```
 <?php
    ...
    $result = $mysqli->query($sql);
    if ($result) {       //this query works, but no xml document produced as a result
    $d = new DOMDocument();
    $books = $d->createElement('hey');
    $hey->setAttribute('check','The Adventures of Tom Sawyer');
    $d->appendChild($books);
    $d->appendChild($hey);
    $d->appendChild($books);
    echo $d->saveXML();
}
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:26:04.393

```
$d->setAttribute('check','The Adventures of Tom Sawyer'); 
```

$d “是” DOMDocument 对象并且没有 DOMDocument::setAttribute() 方法。
使用[DOMElement::setAttribute()](http://docs.php.net/domelement.setattribute)或[DOMDocument::createAttribute()](http://docs.php.net/domdocument.createattribute)

```
if ($result) {
    $d = new DOMDocument();
    $books = $d->createElement('hey');
    $books->setAttribute('check','The Adventures of Tom Sawyer');
    $d->appendChild($books);
    echo $d->saveXML();
} 
```

# c# - 有没有办法检查 Lotus Notes 客户端是否使用 C# .NET 运行或打开

> ID：13303789
> 
> 赞同：-2
> 
> 时间：2012-11-09T07:20:19.703
> 
> 标签：c#, lotus

有没有办法检查 Lotus Notes 客户端是否使用 C# .NET 运行或打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:25:40.437

我不知道 Lotus Notes Client 的进程名称是什么——但您绝对应该知道。

这是查找记事本的示例。

```
Process[] notepads = Process.GetProcessesByName("notepad"); 
```

如果 Process[] 为空，则表示未找到匹配项。如果它不为空，则表示一个实例正在本地机器上运行。

MSDN：http: [//msdn.microsoft.com/en-us/library/z3w4xdc9.aspx](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:45:04.337

Lotus Notes 有几个进程，我建议你检查 nlnotes.exe 和 notes2.exe。如果其中之一存在，Notes 正在运行（版本 8+）

# jquery - ASP.Net MVC 的操作方法中缺少 URL 参数值

> ID：13303791
> 
> 赞同：0
> 
> 时间：2012-11-09T07:20:25.120
> 
> 标签：jquery, asp.net-mvc-3, url, asp.net-mvc-routing

我想将 textarea 值和其他一些参数传递给操作方法。所以我确实以下列方式使用了jquery。

**看法：-**

```
@Html.TextArea("aboutme")
<a id="@Profile.Id" title="@Profile.name" onclick="SubmitProfile(this)" >
 Submit</a> 
```

**jQuery方法： -**

```
function SubmitReview(e,count) {    
    var Text = "'"+jQuery("#aboutme").val()+"'";
    var url = 'http://' + window.location.host + '/Controller/ActionMethod?' + 'id=' + e.id       + '&name=' + e.title + '&aboutme=' + Text;
    jQuery("#Profile").load(url);

} 
```

**行动方法：-**

```
public ActionResult ActionMethod(string id,string name,string aboutme)
        {
            //
        } 
```

上面的代码工作正常，但是当任何一个参数值中包含 **空格**时。在 Jquery 方法中，URL 看起来不错。但在 action 方法中，它将值修剪到第一个空格，其余参数为空。

让我用一些例子来解释

假设 id='123',name='amith cho' ,aboutme='我是软件工程师'

Jquery方法中的Url

```
url='http://localhost/Controller/ActionMethod?id=123&name=amith cho ,aboutme=i am software engg' 
```

但它正在采取行动方法`id=123` `name=amith` `aboutme=null`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:23:05.680

如果您将输入值作为查询参数传递，您应该对输入值进行 url 编码。

```
function SubmitReview(e,count) {
    var Text = jQuery("#aboutme").val(); // quotes aren't necessary
    var url = 'http://' + window.location.host + '/Controller/ActionMethod?' 
                   + 'id=' + e.id 
                   + '&name=' + encodeURIComponent(e.title) 
                   + '&aboutme=' + encodeURIComponent(Text); 
    jQuery("#Profile").load(url);

} 
```

如果您的字符串包含未由 encodeURIComponent 处理的额外字符，您可以尝试此函数，该函数引用自[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)。将上面对 encodeURIComponent 的调用替换为对 this 的调用。

```
function fixedEncodeURIComponent (str) {
  return encodeURIComponent(str).replace(/[!'()]/g, escape).replace(/\*/g, "%2A");
} 
```

# java - jni代码在传递int时抛出UnSatisfiedLinkError

> ID：13303793
> 
> 赞同：1
> 
> 时间：2012-11-09T07:20:32.470
> 
> 标签：java, java-native-interface

`java.lang.UnsatisfiedLinkError`当我将整数传递给方法调用时，我得到了。如果我不传递任何参数，该函数就像一个魅力。我可能做错了什么？

> 线程“main”中的异常 java.lang.UnsatisfiedLinkError: JniTimer.jniWait(I)V at JniTimer.main(JniTimer.java:15)

Java 代码：

```
public class JniTimer {
    static {
        System.loadLibrary("JniTimer.dll");
    }

    public native void jniWait(int msec);

    public static void main(String[] args) {
        JniTimer myTimer = new JniTimer();
        int a = 100;
        myTimer.jniWait(a);

    }
} 
```

JNI 标头：

```
 /* DO NOT EDIT THIS FILE - it is machine generated */
   #include <jni.h>
   /* Header for class JniTimer */

   #ifndef _Included_JniTimer
   #define _Included_JniTimer
   #ifdef __cplusplus
   extern "C" {
      #endif
    /*
   * Class:     JniTimer
    * Method:    jniWait
    * Signature: (I)V
       */
      JNIEXPORT void JNICALL Java_JniTimer_jniWait (JNIEnv *, jobject, jint);

    #ifdef __cplusplus
  }
   #endif
   #endif 
```

JNI 实现：

```
 #include "stdafx.h"
    #include<jni.h>
    #include<windows.h>
    #include "JniTimer.h"
    #include <stdio.h>

    JNIEXPORT void JNICALL Java_JniTimer_jniWait(JNIEnv *env, jobject obj , jint ji ) {
    printf("Entered C methos") ;    //////JUST PRINTING FOR DEBUG     
        HANDLE hWaitEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
        if (hWaitEvent) {
            printf ("Inside wait");
            WaitForSingleObject(hWaitEvent,ji);
            CloseHandle (hWaitEvent);
        }
    } 
```

# java - 在 System.out.println 之前有条件地终止当前行

> ID：13303801
> 
> 赞同：1
> 
> 时间：2012-11-09T07:21:04.933
> 
> 标签：java, println, system.out

**编辑：**请注意，下面的代码是显示我想要做什么的*示例。*我真正的问题是，用 Raphael Schweikert 的话来说，**如何（如果可能的话）检查以前打印的输出？**换句话说，可以在占位符处放置什么测试`/*SOME TEST HERE*/`来确定光标`System.out`当前是否在新行的开头。

这可能是一个奇怪的问题。忍受我。假设以下 Java 代码：

```
public void method1() {
    method2();
    System.out.println("line1");
    method2();
    System.out.print("line2");
    method2();
}

public void method2() {
    System.out.println("method2");
}

OUTPUT when method1 called:
method2
line1
method2
line2method2 
```

请注意，line2 和 method2 打印输出出现在一行中的最后一行。我想避免这种情况，但我也不希望在 line1 打印输出后出现额外的空行。所以我想重写method2如下：

```
public void method2() {
    if (/* SOME TEST HERE */) {
        System.out.println();
    }
    System.out.println("method2");
}

OUTPUT when method1 called:
method2
line1
method2
line2
method2 
```

有没有可以在这里进行的测试来实现这一点？

*注意：请参阅顶部的编辑部分。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:44:28.150

不幸的是，我很确定这是不可能的。就您的应用程序而言，已发送的输出就是：已发送。如果您不想编写一些（可能仅限 JNI）代码来与封闭的控制台交互，那么您最好的希望是使用您自己的实现来跟踪发送的换行符。

我尝试使用包装 System.out（或 System.err）的 PrintStream 来执行此操作。这绝不是完整的，也缺乏原件的同步访问保护。此外，它依赖于超类的一些实现细节，这是一件坏事™。

```
import java.io.IOException;
import java.io.PrintStream;
public class LineEndingAwarePrintStream extends PrintStream {
    private boolean didEndLine;

    public LineEndingAwarePrintStream(PrintStream inner) {
        super(inner);
        didEndLine = false;
    }   

    @Override
    public void print(char arg0) {
        didEndLine = arg0 == '\n';
        super.print(arg0);
    }
    @Override
    public void print(char[] arg0) {
        if(arg0.length > 0) {
            didEndLine = arg0[arg0.length-1] == '\n';
        }
        super.print(arg0);
    }
    @Override
    public void print(String arg0) {
        if(arg0.length() > 0) {
            didEndLine = arg0.charAt(arg0.length()-1) == '\n';
        }
        super.print(arg0);
    }

    @Override
    public void println() {
        super.println();
        didEndLine = true;
    }
    @Override
    public void println(boolean arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(char arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(char[] arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(double arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(float arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(int arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(long arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(Object arg0) {
        super.println(arg0);
        didEndLine = true;
    }
    @Override
    public void println(String arg0) {
        super.println(arg0);
        didEndLine = true;
    }

    @Override
    public void print(boolean b) {
        super.print(b);
        didEndLine = false;
    }
    @Override
    public void print(double d) {
        super.print(d);
        didEndLine = false;
    }
    @Override
    public void print(float f) {
        super.print(f);
        didEndLine = false;
    }
    @Override
    public void print(int i) {
        super.print(i);
        didEndLine = false;
    }
    @Override
    public void print(long l) {
        super.print(l);
        didEndLine = false;
    }
    @Override
    public void print(Object obj) {
        super.print(obj);
        didEndLine = false;
    }
    public void assertNewLine() {
        if(!didEndLine) {
            this.println();
        }
    }

    public void printOnNewLine(Object arg) {
        this.assertNewLine();
        this.println(arg);
    }

    public static void main(String[] arg) {
        LineEndingAwarePrintStream out = new LineEndingAwarePrintStream(System.out);
        out.println("New line");
        out.printOnNewLine("Not two newlines");
        out.print("New line");
        out.println("No new line");
        out.print("New line");
        out.printOnNewLine("New line");
        out.append('3');
        out.printOnNewLine("New line");
        out.append("Test");
        out.append('\n');
        out.printOnNewLine("Not two newlines");
        out.append("Test\n");
        out.printOnNewLine("Not two newlines");
        out.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:47:45.467

啊，对不起，问题的标题与它的内容不同......

如果您想知道发送给`System.out`您的最后一个字符应该编写您自己的`PrintStream`派生类

```
class PrintStreamEx extends PrintStream {

   // replacing out code
   static PrintStream oldout = System.out;
   static PrintStreamEx newout = new PrintStreamEx();

   static {
        System.setOut(newout);
   }

   private char lastchar;

   // wrap old out
   public PrintStreamEx() {
       super(oldout);
   }

   // intercept all writing methods 
   // for example

   @Overrides
   public void print(String s) {
       lastchar = s.charAt(s.lenght()-1);
       super.print(s);
   }

   // provide a method to get last char
   public char lastChar() {
        return lastchar;
   }

} 
```

并包裹`System.out`进去。在您的班级内，您将能够保持发送的最后一个字符，如上所示。

要将您的课程设置为工作，您应该使用`System.setOut()`方法。

（我也修改了示例来实现这个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:22:45.383

改变

```
 System.out.print("line2") 
```

到

```
 System.out.println("line2") 
```

println 用新行打印东西

更正了一个

```
public void method1() {
method2();
System.out.println("line1");
method2();
System.out.println("line2");
method2();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:24:16.177

```
method2();
System.out.println("line1");
method2();
System.out.println("line2");
method2(); 
```

`System.out.print()`将在同一行打印输出

**输出**

```
method2
line1
method2
line2
method2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T07:25:17.210

使用三元运算符

`System.out.print("method2" + (newline?"\n":""));`

或者

`System.out.print((newline?"\n":"") + "method2");`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T07:26:56.003

```
static int k=0;
if(k<1)
{
System.out.print("method2.");
k=k+1;
}
else
{
System.out.println("method2");
} 
```

# c# - 读取可执行文件直到下一个 MZ

> ID：13303809
> 
> 赞同：-1
> 
> 时间：2012-11-09T07:22:05.250
> 
> 标签：c#, .net

我可以通过定义大小轻松读取整个可执行文件，或者我想读取多少字节，但是如果我想从头开始读取它直到下一个“MZ”怎么办？如果 2 个文件绑定在一起，我只想抓取前半部分，不知道它的大小。

mz binary stuff 1 - 我想要的那个 mz binary stuff 2

0x77, 0x90 == MZ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:00:18.113

您需要为每个[IMAGE_SECTION_HEADER](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680341%28v=vs.85%29.aspx) ( [pinvoke](http://www.pinvoke.net/default.aspx/Structures/IMAGE_SECTION_HEADER.html) ) 结构获取 SizeOfRawData 并从[IMAGE_NT_HEADERS32/64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680336%28v=vs.85%29.aspx)结构中附加 SizeOfHeaders 。

首先，您需要从 PE/PE+ 文件中获取[IMAGE_DOS_HEADER结构](http://www.pinvoke.net/default.aspx/Structures/IMAGE_DOS_HEADER.html)

之后，e_lfanew 字段会将您指向[IMAGE_NT_HEADERS32/64](http://www.pinvoke.net/default.aspx/Structures/IMAGE_NT_HEADERS.html)结构。（如果 Magic == 0x10b -> PE。如果 Magic = 0x20b -> PE+ 文件）

您可以从[IMAGE_FILE_HEADER](http://www.pinvoke.net/default.aspx/Structures/IMAGE_FILE_HEADER.html)结构中获得 sectionHeadersCount 的计数。

```
UInt32 startAddress = IMAGE_DOS_HEADER.e_lfanew + 4 + Marshal.SizeOf(typeof(IMAGE_FILE_HEADER)) + [IMAGE_FILE_HEADER][6].SizeOfOptionalHeader 

for(UInt32 loop = 0;loop < sectionHeadersCount;loop++)
{
    IMAGE_SECTION_HEADER section = /*Map offset to IMAGE_SECTION_HEADER structure Method*/(startAddress);
    startAddress += Marshal.SizeOf(typeof(IMAGE_SECTION_HEADER));//Offset to next section
}

// Example of Mapping function:
public T PtrToStructure<T>(UInt32 offset) where T : struct
{
    Byte[] bytes = this.ReadBytes(offset, (UInt32)Marshal.SizeOf(typeof(T)));

    GCHandle handle = GCHandle.Alloc(bytes, GCHandleType.Pinned);
    try
    {
         T result = (T)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));
         return result;
    } finally
    {
         handle.Free();
    }
} 
```

[详细的 PE/PE+ 说明](http://msdn.microsoft.com/en-us/library/ms809762.aspx)

# r - 嵌套 ifelse 语句中未使用的参数错误

> ID：13303810
> 
> 赞同：3
> 
> 时间：2012-11-09T07:22:05.040
> 
> 标签：r, if-statement

我正在制作一个输出星期几的函数，给定自 1970 年 1 月 1 日以来的天数。当它是一个`if then`语句链时，该函数运行良好，但我想在向量上使用该函数，所以我需要构建这个看起来很傻的`ifelse`语句链。

不幸的是，我不断收到此错误：

```
Error in ifelse(rem == 0, day = "Thursday", ifelse(rem == 1, day = "Friday",  : 
unused argument(s) (day = "Thursday")
Calls: dayFinder -> ifelse
Execution halted 
```

我无法弄清楚如何绕过它 - 看起来它只是忽略了声明的`then`一部分。`ifelse`我尝试向它提供各种样本数据集或数据点，但无法修复错误。

这是我的代码 - 在此先感谢。

```
dayFinder <- function(x){
#Assuming that '0' refers to January 1 1970
#Store given number
start <- x
#Initialize variable
day="Halloween"
#Divide x by 7 and store remainder
rem <- x%%7
#Determine the day
ifelse(rem==0, day="Thursday", 
    ifelse (rem==1, day="Friday", 
        ifelse (rem==2, day="Saturday", 
            ifelse (rem==3, day="Sunday", 
                ifelse (rem==4, day="Monday", 
                    ifelse(rem==5, day="Tuesday", 
                        if (rem==6)
                            {
                                day="Wednesday"
                                }))))))
return(day)
}

q = seq(7,50,1)
z = dayFinder(q)
z 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T07:35:25.580

链有一些问题`ifelse`，但我想首先提到一种以更易读的方式编写这种选择器的方法。

```
days.of.week <- c("Thursday", "Friday", "Saturday", "Sunday", "Monday", "Tuesday", "Wednesday")
x <- 21  # some value
day <- days.of.week[(x%%7) + 1]
day
[1] "Thursday" 
```

现在... 关于`ifelse`and 的使用`unused argument error`...
首先，请记住***ifelse* () 是一个 function**，因此当您编写类似 的语句时
`... ifelse(rem == 0, day="Thursday, ...`，R 将解释该`day="..."`部分，就好像您将***命名参数*** `day`传递给函数一样。
此外，一般来说，您应该避免使用`=`[大部分时间]，您可能的意思是使用`<-`.
无论如何，纠正了 ifelse 链应该看起来像

```
rem <- 21%%7
day <- ifelse(rem==0, "Thursday", 
         ifelse (rem==1, "Friday", 
           ifelse (rem==2, "Saturday", 
             ifelse (rem==3, "Sunday", 
               ifelse (rem==4, "Monday", 
                 ifelse(rem==5, "Tuesday", "Wednesday")
               )
             )
           )
         )
       ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-11T15:33:37.310

有比使用嵌套 if else 语句更好的条件重新编码方法。使用[dplyr::case_when](http://dplyr.tidyverse.org/reference/case_when.html)。它会真正改变你的生活。下面是使用 case_when 时的代码，更简洁：

```
 day <- case_when(
      rem==0 ~ "Thursday", 
      rem==1 ~ "Friday", 
      rem==2 ~ "Saturday", 
      rem==3 ~ "Sunday", 
      rem==4 ~ "Monday", 
      rem==5 ~ "Tuesday",
      rem==6 ~ "Wednesday"
    ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T09:40:31.347

```
dayFinder <- function(x) weekdays(as.Date("1970/1/1") + x)
dayFinder(21)
# [1] "Thursday"
dayFinder(c(21, 101))
# [1] "Thursday" "Sunday" 
```

# wolfram-mathematica - 在模块中没有完全评估？

> ID：13303811
> 
> 赞同：1
> 
> 时间：2012-11-09T07:22:06.890
> 
> 标签：wolfram-mathematica

如何强制评估模块中的所有符号？

```
vout[vin_] = Module[{x=vin,y},
    y = 200000*(1.2 - x);
    Print[y];
    y
];
Print[vout[0]]; 
```

我希望这会打印两次相同的东西（240000），但我得到的是：

```
200000*(1.2 - vin)
240000. 
```

知道如何在模块内获得扩展值（240000）吗？

编辑：`Print[Evaluate[y]];`在这种情况下也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:50:45.510

您应该输入“：=”而不是“=”，以便每次都正确地重新计算您的函数。

这工作正常

vout[vin_] := 模块[{x=vin,y}, y = 200000*(1.2 - x); 打印[y]；是]; 打印[vout[0]];

# php - 自定义 Zend 验证器

> ID：13303812
> 
> 赞同：0
> 
> 时间：2012-11-09T07:22:12.947
> 
> 标签：php, zend-framework, zend-validate

我想在 Zend 中创建一个自定义验证器。

例如我的代码：

```
$txt_state = new Zend_Form_Element_Text('state');
$txt_state->setLabel('State');

$txt_prop = new Zend_Form_Element_Text('pin');
$txt_prop->setLabel('Property'); 
```

现在我希望只有当这两个元素中的至少一个不为空时才必须提交表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:21:11.093

你可以这样做肮脏的方式是这样的：

```
if ($this->getRequest()->isPost()) {
    if (is_empty($form->getElement('state')->getValue())) {
        $form->getElement('pin')->setRequired();
    }
    if (is_empty($form->getElement('pin')->getValue())) {
        $form->getElement('state')->setRequired();
    }

   if ($form->isValid()) {
     //redirect to success page 
   } else {
    //do nothing, display errors messages, refill form 
   }
} 
```

或带有扩展 Zend_Form_Element 的清洁器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:24:36.237

在这里，您可以在控制器中添加这样的自定义验证。

```
$state = "YOUR VALUE";

$form->state->setValue($state);
$form->getElement('state')->setRequired();
$form->getElement('state')->addValidator( 'Alpha', true, array( 'messages' => array( 'notAlpha' => "Please enter alphabetic character only in state name.
") ));

$mArr = array('state'=>$state);

if( !$form->isValid($mArr) ){

    $myErrorArray[] = $form->getMessages();

    $is_error = 1;
} 
```

这里**$myErrorArray**包含您应用于元素状态的所有错误消息。

# php - 按 id 对表格元素的值进行分组

> ID：13303814
> 
> 赞同：0
> 
> 时间：2012-11-09T07:22:26.240
> 
> 标签：php, javascript, html, mysql

我正在制作一个可以修改玩家积分的网页。

表格结构是这样的 参赛者（文本），积分（输入文本字段，默认值为当前玩家的积分），提交

现在，在 mysql db 中，每个参赛者都有一个 id，我想做的是当有人更改玩家的分数并单击提交时，可以通过 id 关联哪个玩家提交了。这是在一个 html 表中组织的，我不知道如何对数据进行分组。任何人都可以帮忙吗？

好的，不确定这是否正确，因为我写得很快，但我希望你能明白。

```
$query = "SELECT `con`.`id`, `av`.`name` as `contestant`, `con`.`points` as `points`
          FROM `contestants` as `con`
          JOIN `mydb`.`avatars` as `av`
          WHERE `con`.`boardId`=$id";

$result = mysql_query($query) or die("ERROR:QUERY_FAILED " . mysql_error()); echo "<h4>Boards List</h4><br/>"; 

$numFields = mysql_num_fields($result);

echo "<table>";
        echo "<tr>";
            for($i = 0; $i < $numFields; $i++)
            {
                if(mysql_field_name($result,$i) != 'id')
                {
                    echo "<th>";
                        echo mysql_field_name($result,$i);
                    echo "</th>";
                }
            } 
        echo "</tr>";

        while($row = mysql_fetch_row($result))
        {
            echo "<tr>";
                for($i = 0; $i < $numFields; $i++)
                {
                    if(mysql_field_name($result, $i) == 'points')
                    {                                       
                        echo "<td><input name='points' type='number' min='0' max='45' value='$row[$i]'></td>";
                    }
                    else 
                    {
                        echo "<td>$row[$i]</td>";
                    }
                }
                echo "<td>
                    <input type='button' value='Save' onclick='SavePlayersData(this)'>
                    </td>";
                echo "</tr>";
        }
echo "</table>"; 
```

我需要一种方法来告诉 javascript 在保存玩家点时它应该处理哪个输入字段。希望这是有道理的。（顺便说一句，除了点之外，还会有更多的字段。这只是一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:01:29.330

使用“player1_points”、“player2_points”等值命名您的表单字段。在服务器上，循环接收所有值，查找这些字段。欢迎来到 1993。

编辑：给你自己一个工具包，比如 extjs，它会自动处理所有这些废话（以及更多）。ext4js 是对以前版本的巨大改进。

# haskell - xmonad 可以让我们经常使用的功能随时可用吗？

> ID：13303815
> 
> 赞同：1
> 
> 时间：2012-11-09T07:22:28.420
> 
> 标签：haskell, xmonad

我们有一些函数需要随时随地调用。例如：

```
(defun winG (qty pb ps)
    (- (* qty ps (- 1 SXF YHS)) (* 2 GHF) (* qty pb (+ 1 SXF))))

(defun winQ (qty pb ps)
    (- (* qty ps (- 1 SXF)) (* 2 GHF) (* qty pb (+ 1 SXF))))

(defun stopLoss (qty pb &optional (lossRate 0.02))
    (let ((tot (* qty pb (+ 1 SXF))))
        (format t "Stop Loss at:~$~%" (- pb (/ (* tot lossRate) qty)))
        (format t "Lost Money:~$(~d%)~%" (* tot lossRate) (* 100 lossRate))))

(defun div618 (p1 p2)
    (let ((ratio '(0\. 0.191 0.236 0.382 0.5 0.618 0.809 1.))
        (price #'(lambda (r) (if (<= p1 p2) (+ p1 (* (- p2 p1) r)) (- p1 (* (- p1 p2) r))))))
        (if (<= p1 p2)
            (dolist (r (reverse ratio)) (format t "-------~3$   ~$-------~%" r (funcall price r)))
            (dolist (r ratio) (format t "-------~3$  ~$-------~%" r (funcall price r)))))) 
```

现在我们使用stumpwm，它可以在启动后加载我们的函数，我们可以通过点击热键在任何时间和地点打开它的eval窗口来调用这些函数。这非常方便。然而，stumpwm 不像 xmonad 那样稳定。所以我们想用 xmonad 代替 stumpwm 并且我们不介意使用 haskell 来实现那些 Common Lisp 函数。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:37:52.603

你应该能够通过这样的事情来做到这一点

```
myKeys conf@(XConfig {XMonad.modMask = modm}) = M.fromList $
    [ ((modm,    xK_F1     ), spawn $ XMonad.terminal conf) --starts the terminal
    , ((mod4Mask,xK_F1     ), spawn "gvim" >> -- you can concatenate commands too
                              spawn "notify-send -t 1000 gVim" >> 
                              focusUrgent) -- or haskell functions
    , ((mod4Mask,xK_F2     ), spawn "lisp evaluate lispy function") 
    , ((modm,    xK_F3     ), haskellFunctionPortedFromLisp )] 
```

希望这可以帮助。

# android - 在android中显示汉字

> ID：13303820
> 
> 赞同：1
> 
> 时间：2012-11-09T07:22:50.010
> 
> 标签：android

我正在尝试使用 PHP 传入数据（来自服务器），并且数据由汉字组成。我正在尝试使用我确实设法检索数据的 JSON 解析器解析数据，但数据（中文）显示为`???`. 有人可以告诉我出了什么问题吗？

下面是我的解析器：

```
// function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    } 
```

正如在我的 logcat 上看到的那样。

```
11-09 07:18:53.939: D/Single Product Details(570): {"success":1,"search":[{"tel1":"67546498","generalEmail":"anderlab01@yahoo.com.sg","contactEmail":"jeff1285@hotmail.com","lineOfBusiness":"??????????? Manufacture,Import\/Export","postCode1":"738733","companyNameEng":" ANDER LAB PTE LTD ","repName1Eng":"Li Jianfu","address1":"Blk 20 Woodlands Link #04-40","fax1":"67544092","repName1Chi":"???","url":"www.bosun.com.sg"}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-07T07:10:10.007

我的数据库已经默认为utf8，遇到同样的问题。

添加通常的元标记“”后，问题仍然存在。

然后我创建了一个专用的connection.php来确保与mysql的所有通信都是charset utf8，注意mysqli_set_charset($bd, 'utf8')中的utf8中没有**“-” ！**

**连接.php**

```
<?php
    $mysql_hostname = "localhost";
    $mysql_user = "username";
    $mysql_password = "password";
    $mysql_database = "dbname";
    $prefix = "";
    $bd = mysqli_connect($mysql_hostname, $mysql_user, $mysql_password) or die("Could not connect database");
    mysqli_select_db($bd, $mysql_database) or die("Could not select database");
    if(!mysqli_set_charset($bd, 'utf8'))  {
        exit() ;
    }

?> 
```

这是发送检索数据的示例。

```
<?php

    //Include database connection details
    require_once('connection.php');

        enter code here

    //Create query
    $qry = "SELECT * FROM subject";
    $result = mysqli_query($bd, $qry);
    //  other stuff
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T10:58:41.383

解决了。您需要将 POST 编码为 utf8 。

```
 if(method == "POST"){
            // request method is POST
            // defaultHttpClient

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params,"utf-8")); <------ utf8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:36:40.430

您没有提供如何检索数据的代码片段。这是我的猜测，假设源字符集是 UTF-8，相应地替换为您的源编码。

```
InputStreamReader isr = new InputStreamReader(new ByteArrayInputStream(str.getBytes(Charset.forName("UTF-8"))), Charset.forName("UTF-8")); 
```

str 是您的 json 字符串。

更新：似乎您使用 检索`iso-8859-1`，因此尝试将您的代码更新为`UTF-8`.

注意：JSON 文本的字符编码始终为 Unicode。UTF-8 是唯一在线上有意义的编码，但也允许使用 UTF-16 和 UTF-32 ( [source](http://www.json.org/fatfree.html) )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:32:49.287

```
public static String test(){
String testResult= "";
try {
    HttpGet get = new HttpGet("http://xxxxx");//edit url removed.
    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = httpclient.execute(get);
    String result = EntityUtils.toString(response.getEntity());
    JSONObject obj = new JSONObject(result);
    if(!obj.isNull("title")){
        testResult= obj.getString("title");
        Log.d("Test","Test1:"+ testResult);
    }
} catch (JSONException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
return testResult;// 
```

}

从此代码中获取帮助..它肯定会帮助你..享受

# jquery-mobile - jQuery 刷新在手风琴集父级以下的多个级别的按钮

> ID：13303822
> 
> 赞同：0
> 
> 时间：2012-11-09T07:22:54.957
> 
> 标签：jquery-mobile, button, nested, refresh, accordion

我有多个手风琴集相互嵌套，它们构成了一种多类别排序列表。从 3 到 5 步进入手风琴巢穴的任何地方，我都可以开始拥有实际的项目（按钮），它们实际上是风格化的“A”元素。

我能够让嵌套的手风琴集在成功的 AJAX 返回时刷新，但似乎无法弄清楚如何让按钮刷新并采用 jQ 移动样式。

$('#main-market-list').find('div[data-role="collapsible-set"]').collapsibleset({refresh:true}); 什么是我用于手风琴组的，相同逻辑的按钮版本是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:53:14.223

您可以尝试`$(".ui-page-active").trigger("create")`强制 JQM 重新设置整个页面的样式。因此您的按钮也将与手风琴集一起设置样式。

编辑：您可以尝试`$('.button-class').button('refresh');`button-class 是您想要设置样式的链接的类名。

# c# - 使用 ANTLR 语法为 if 和 for 语句生成代码

> ID：13303823
> 
> 赞同：1
> 
> 时间：2012-11-09T07:22:57.030
> 
> 标签：c#, code-generation, antlr, antlr3

我正在编写一个解释器，它将我的 DSL 语言转换为 C#，然后将其编译并作为独立的可执行文件发布。我已经成功地处理了变量定义和一些基本的算术表达式计算。

到目前为止，我在**没有生成 AST 树**的情况下使用 ANTLR 完成了所有这些工作。我设法通过将动作代码嵌入到语法中来完成所有事情，如下所示：

```
statement
    : var_declaration
    | if_statement
    ;
// k = var or k = var.something.somethingelse
var_declaration
    : 
    varType=ID varName=ID ASSIGN r=rvalue
    {
        if(variablesTable.ContainsKey(varName.Text)){
            // Variable ID not defined yet, cannot continue;
            ReportError("A local variable '"+varName.Text+"' is already defined");
            return;
        }
        if(r == null){ ReportError ("No r-value specified"); return;}
    }
    ;

if_statement
    : 'if' expression s1=statement ('else' s2=statement)?

statement
    :...
expression
    :... 
```

我现在正在为如何处理和正确生成 if 和循环语句的代码而苦苦挣扎。

**问题**

1.  我是否必须构建一个 AST 树来处理条件和循环语句？
2.  我一遍又一遍地用谷歌搜索，但没有找到关于如何在有或没有 AST 树的情况下做到这一点的明确教程，你知道这方面有什么好的教程吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:10:05.757

看起来好像可以通过语法中嵌入的动作代码来检查 if 语句，但这是不推荐的处理方法，因为一旦语法变大，它就不会扩展。

# c# - 在.net4.0 C#中从XML中提取文件夹结构

> ID：13303828
> 
> 赞同：-1
> 
> 时间：2012-11-09T07:23:09.267
> 
> 标签：c#, .net, xml, xml-parsing

谢谢大家之前的回答……嘿，实际上我想从 XML 文档中提取文件和文件夹列表……这是我的 XML 文档，看起来像……

```
 <TrebuchetWorkspaceTemplate>
     <InputDocument>
        <BusinessDocument>
          <BusinessRequirement />
          <ProcessModel />
        </BusinessDocument>
        <FunctionalDocuments />
        <UseCases />
        <Agile />
    </InputDocument>
    <Miscellaneous /> 
```

这里 trebuschet 有 2 个子文件夹 inputdoc 和 miscell .....inpout doc 还有 5 个文件夹，其中 business doc 有 2 个子文件夹.....

现在我想提取内容并从中制作一个文件夹结构（希望你得到它）......并添加到 Capability 元素并返回它......但是我得到了一个错误的文件夹结构，而不是预计 6 有 18 个孩子......（如果你愿意，会给你）......这是我的计划......

```
 public Capability Parse(XElement xElem)
    {
     Capability capParent = newCapability();                                           

     capParent.Name =xElem.Name.LocalName;                               

      if (xElem.HasElements)
        {

            foreach (XElement xChild in xElem.Descendants())
            {
                Capability capChild = Parse(xChild);
                capParent.Children.Add(capChild);
            }
        }
        return capParent;
    } 
```

谁能帮我把代码弄好……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:49:27.727

使用[`.Elements()`](http://msdn.microsoft.com/en-us/library/bb342765)而不是[`.Descendants()`](http://msdn.microsoft.com/en-us/library/bb360635). `.Descendants()`给你所有的孩子，孙子，等等。`.Elements()`只给你直接的孩子。

# java - 寻找开源图标库

> ID：13303832
> 
> 赞同：3
> 
> 时间：2012-11-09T07:23:45.920
> 
> 标签：java, web, icons

对于我正在处理的 java 项目，我正在寻找一个不错的开源图标库以在 GUI 中使用。

我通过谷歌搜索找到了几个库，但还没有找到“恰到好处”的图标。在我开始将它们放入我的代码之前，我对其他开发人员使用的任何东西都感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:31:03.077

我的建议是尝试查看网页设计师的图标，你会得到更多的结果：

*   [http://www.webdesigncore.com/2012/03/09/20-free-gui-icon-sets-for-web-designers/](http://www.webdesigncore.com/2012/03/09/20-free-gui-icon-sets-for-web-designers/)
*   [http://www.hongkiat.com/blog/40-free-and-useful-gui-icon-sets-for-web-designers/](http://www.hongkiat.com/blog/40-free-and-useful-gui-icon-sets-for-web-designers/)
*   [http://ionicons.com](http://ionicons.com)

或者显然是搜索引擎：

*   [http://www.freeiconsweb.com](http://www.freeiconsweb.com)
*   [http://www.iconfinder.com/free_icons](http://www.iconfinder.com/free_icons)

此外，您可能更喜欢使用矢量图标构建**自己的字体：**

*   [https://icomoon.io](https://icomoon.io)

希望这可以帮助

# javascript - 如何使 HTML5 函数在一段时间后关闭脚本？

> ID：13303836
> 
> 赞同：-1
> 
> 时间：2012-11-09T07:23:58.973
> 
> 标签：javascript, html

我正在用 HTML5 制作横幅，我需要它在 20 秒后关闭。

它应该是 dhtml.external.close(); 并在 20 秒后设置超时。谁能帮我这个？

* * *

也许有可能以这种方式做某事？

```
 var close = document.createElement('a');
                close.style.display = 'block';
                close.href = "#";
                close.innerHTML = 'CLOSE';
                close.onclick = function() {
                    dhtml.external.close();
                }
                document.body.appendChild(close);

            }); 
```

但只是以某种方式设置时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:28:22.910

假设您的横幅元素有一个 id `"banner"`，可以这样做：

```
<div id=banner>BANNER !</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​

<script>
document.onload=function(){
  ​setTimeout(function(){
     var banner = document.getElementById('banner');
     banner.parentNode.removeChild(banner);    
  }, 20000);​
};
</script> 
```

[示范](http://jsfiddle.net/5bDUT/)

请注意，许多库可以帮助您在移除时制作最漂亮的动画。例如 jQuery 允许你慢慢淡出它：

```
setTimeout(function(){
   $('#banner').fadeOut(2000);
}, 20000);​ 
```

[示范](http://jsfiddle.net/VQxzt/)

* * *

**编辑 ：**

从您的评论开始，我可以向您建议：

```
var close = document.createElement('a');
close.style.display = 'block';
close.href = "#";
close.innerHTML = 'CLOSE';
close.onclick = function() {
     dhtml.external.close(); // is that a call to a library ? Is that IE specific ?
}
document.body.appendChild(close);
setTimeout(function(){
    document.body.removeChild(close);
}, 20000); 
```

[示范](http://jsfiddle.net/dystroy/EsxKQ/)

# facebook - 使用 App Access Token 搜索地点突然停止工作

> ID：13303838
> 
> 赞同：2
> 
> 时间：2012-11-09T07:24:09.383
> 
> 标签：facebook, facebook-graph-api, access-token

我正在使用应用访问令牌 (grant_type=client_credentials) 调用图形 API 来搜索 facebook 上的位置。查询

```
https://graph.facebook.com/search?type=place&center=50.785361,6.0334127 
```

使用可靠地返回搜索结果，但突然停止工作并出现以下错误：

```
{
  "error": {
    "message": "An unknown error has occurred.", 
    "type": "OAuthException", 
    "code": 1
  }
} 
```

我已经在 Graph API Explorer 上测试了调用。使用我的 facebook 用户的访问令牌，请求仍然返回所需的数据。使用此应用访问令牌的其他请求仍然有效，因此令牌很好。

有任何想法吗？

# java - JEXL 2.1.1 - 表达式字符串中的大十进制文字导致解析错误

> ID：13303841
> 
> 赞同：1
> 
> 时间：2012-11-09T07:24:26.180
> 
> 标签：java, jexl

我正在尝试在表达式字符串中使用 BigDecimal Literal
我正在使用 JEXL 2.1.1
我正在使用[http://commons.apache.org/jexl/reference/syntax.html#Literals中提到的文字后缀“h”](http://commons.apache.org/jexl/reference/syntax.html#Literals)

```
JexlEngine expressionFactory = new JexlEngine();
JexlContext context = new MapContext();
context.set ( "a", new BigDecimal( "0.0002" ));
Expression expression = expressionFactory.createExpression(" a > 42.0h "  );
boolean result=(Boolean)expression.evaluate( context ); 
```

我低于异常

```
org.apache.commons.jexl2.JexlException$Parsing: h@1:24 parsing error near '... , missing  ...'
at             org.apache.commons.jexl2.parser.JexlParser.jjtreeCloseNodeScope(JexlParser.java:126)
at org.apache.commons.jexl2.parser.Parser.ExpressionStatement(Parser.java:274)
at org.apache.commons.jexl2.parser.Parser.Statement(Parser.java:140)
at org.apache.commons.jexl2.parser.Parser.JexlScript(Parser.java:72)
at org.apache.commons.jexl2.parser.Parser.parse(Parser.java:24)
at org.apache.commons.jexl2.JexlEngine.parse(JexlEngine.java:1248)
at org.apache.commons.jexl2.JexlEngine.createExpression(JexlEngine.java:435)
at org.apache.commons.jexl2.JexlEngine.createExpression(JexlEngine.java:419) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:18:32.307

它看起来像一个文档错误。正确的大十进制后缀是“B”（而不是“H”）
正确的大整数后缀是“H”（而不是“B”）
这可以通过查看 ASTNumberLiteral.java 清楚地验证

我提出了这个问题[https://issues.apache.org/jira/browse/JEXL-141](https://issues.apache.org/jira/browse/JEXL-141)

# jquery-tokeninput - 版本 1.6.0 令牌输入不允许自定义输入

> ID：13303843
> 
> 赞同：1
> 
> 时间：2012-11-09T07:24:35.400
> 
> 标签：jquery-tokeninput

在 rails 项目中，我正在尝试实现 jquery 令牌输入（版本 1.6.0）插件。根据以下代码，令牌输入不允许自定义输入。它将选择仅在列表中的值。

例如：

```
   jQuery("#text_box_id").tokenInput(go_to_url, {
      令牌限制：20，
      允许自定义条目：真，
      防止重复：真
    });

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:27:08.050

您需要什么自定义条目？如果您想要用户输入的值，您可以手动将此值添加到您返回到 jquery-tokeninput 成功回调的 json 对象中。

# sql - 嵌套选择查询优化 - 执行缓慢

> ID：13303849
> 
> 赞同：3
> 
> 时间：2012-11-09T07:25:27.673
> 
> 标签：sql, sql-server, tsql

我有一个如下所示的查询：

```
SELECT 
    ROUND(SUM(AGLR      * BlokInsideAreaFactor), 2) AS AGLRSum,
    ROUND(SUM(Vaarsaed  * BlokInsideAreaFactor), 2) AS VaarsaedSum,
    ROUND(SUM(Vintsaed  * BlokInsideAreaFactor), 2) AS VintsaedSum,
    ROUND(SUM(Oliefroe  * BlokInsideAreaFactor), 2) AS OliefroeSum,
    ROUND(SUM(Baelgsaed * BlokInsideAreaFactor), 2) AS BaelgsaedSum
    .... (+ 10 more columns)
FROM
(
    SELECT
        AGLR,         
        Vaarsaed,     
        Vintsaed,     
        Oliefroe,     
        Baelgsaed, 
        .... (+ 10 more columns)
        Round((CASE WHEN bloktema.AREAL > 0 THEN 
        omraade.Geom.STIntersection(bloktema.Geom).STArea() / bloktema.AREAL ELSE 0 END), 2) 
            AS BlokInsideAreaFactor
    FROM [CTtoolsData].dbo.BlokAfgroedeGrp blokAfgroed
    INNER JOIN [CTtoolsTema].dbo.bloktema2012 bloktema
        ON (bloktema.bloknr = blokAfgroed.bloknr)
    INNER JOIN [CTtoolsTema].dbo.Area omraade 
        ON omraade.Geom.STIntersects(bloktema.GEOM) = 1
    where   omraade.Id = 296
            AND blokAfgroed.[Year] = 2012
) AS Q1 
```

我进行嵌套选择的原因是因为我必须先计算“BlokInsideAreaFactor”，然后再将其与外部选择中的其他列值相乘。

我最初的想法是我会以这种方式优化查询，因为“BlokInsideAreaFactor”每行只计算一次，而不是每行十五次（每列一次）。问题是查询变得非常非常慢这样做。查询大约需要 15 分钟，包含大约 4000 行。不幸的是，我们有老化的硬件，并且正在 SQLServer 2012 Express 上运行查询。

我查看了索引，似乎无法进一步优化。为什么看起来像这样的查询会变得如此缓慢，最重要的是有办法优化它吗？

**更新：**

涉及的表格如下所示：

**BlokAfgroedeGrp：**

*   列：Id（主键、身份）、BlokNr、Year、AGLR、Vaarsaed、Vintsaed...等。
*   索引：在 Id 上聚集，在 BlokNr + Year 上唯一非聚集

**Bloktema2012：**

*   列：Id（主键、身份）、BlokNr、Geom（几何）+其他（不重要）
*   索引：在 Id 上聚集，在 Geom 上空间，非唯一 - 在 Id + BlokNr 上非聚集，非唯一 - 仅在 BlokNr 上非聚集。

**区域：**

*   列：Id（主键、身份）、Geom（几何）+其他（不重要）
*   索引：在 Id 上聚集，在 Geom 上空间

我确保索引上没有任何碎片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:52:51.717

在了解了临时表之后，我最近回到了这个问题。我已经能够优化查询：

```
DECLARE @TempTable TABLE (AGLR float,         
    Vaarsaed float,     
    Vintsaed float,     
    Oliefroe float,     
    Baelgsaed float, 
    BlokInsideAreaFactor float)

INSERT INTO @TempTable (AGLR, Vaarsaed, Vintsaed, Oliefroe, Baelgsaed, BlokInsideAreaFactor)

SELECT
    AGLR,         
    Vaarsaed,     
    Vintsaed,     
    Oliefroe,     
    Baelgsaed,
    Round((CASE WHEN bloktema.AREAL > 0 THEN 
    omraade.Geom.STIntersection(bloktema.Geom).STArea() / bloktema.AREAL ELSE 0 END), 2) 
        AS BlokInsideAreaFactor
FROM [CTtoolsData].dbo.BlokAfgroedeGrp blokAfgroed
INNER JOIN [CTtoolsTema].dbo.bloktema2012 bloktema
    ON (bloktema.bloknr = blokAfgroed.bloknr)
INNER JOIN [CTtoolsTema].dbo.Area omraade 
    ON omraade.Geom.STIntersects(bloktema.GEOM) = 1
where   omraade.Id = 296
        AND blokAfgroed.[Year] = 2012

SELECT 
ROUND(SUM(AGLR      * BlokInsideAreaFactor), 2) AS AGLRSum,
ROUND(SUM(Vaarsaed  * BlokInsideAreaFactor), 2) AS VaarsaedSum,
ROUND(SUM(Vintsaed  * BlokInsideAreaFactor), 2) AS VintsaedSum,
ROUND(SUM(Oliefroe  * BlokInsideAreaFactor), 2) AS OliefroeSum,
ROUND(SUM(Baelgsaed * BlokInsideAreaFactor), 2) AS BaelgsaedSum
FROM @TempTable 
```

...所以现在查询大约需要 11 秒，而不是 15 分钟。

希望它可以帮助别人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T23:24:59.447

你为什么不声明一个变量，把你需要的数据集或值放入变量中，然后引用该变量来做所有的计算呢？然后，您只需要找到该值一次。

如果您不想这样做，您可以创建一个**[CTE（通用表表达式）](http://blog.sqlauthority.com/2011/05/10/sql-server-common-table-expression-cte-and-few-observation/ "关于 SQL Server 的 CTE")**表，这样您就**[可以引用并加入](http://blog.sqlauthority.com/2008/07/28/sql-server-simple-example-of-recursive-cte/ "递归 CTE")**该表，而不是在`where`子句中执行任何操作。

如果您不使用 SQL Server，那么您可以考虑使用临时表。

# mysql - 使用条件从多个表中检索数据

> ID：13303851
> 
> 赞同：-1
> 
> 时间：2012-11-09T07:25:34.243
> 
> 标签：mysql, sql, join

我有两张桌子：

1.  债务人

    *   `debtorid`
    *   `name`
    *   `inactive`
2.  货车

    *   `rfnwagonid`
    *   `dumpid`
    *   `customerid`
    *   `allocationdate`

`debtorid`有 2 个值 21 和 22：

*   21 表示客户
*   22 表示转储

我想显示整`rfnwagon`行，但不是使用`dumpid=21`and `customer_id=22`，而是使用 table 中的名称`debtor`。我试过这个但失败了：

```
SELECT 
    rfnwag.rfn_wagon_id,
    debtor.name,
    debtor.name,
    rfnwag.no_of_wagons,
    rfnwag.order_id,
    rfnwag.product_id,
    rfnwag.destination,
    rfnwag.allocation_date      
FROM rfn_wagon_allocation as rfnwag,
        debtors_master as debtor
WHERE rfnwag.customer_id=debtor.debtor_no AND rfnwag.dump_id=debtor.debtor_no" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:48:20.037

我认为这永远不会是真的：

```
debtor.debtor_no=debtor.name 
```

所以从你的 WHERE 子句中删除它。

你所说的“没有成功”到底是什么意思？没有行？行太多？不正确的行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:32:39.860

我很难完全理解您的要求，但是我`JOIN`在这里看不到任何内容，这在您使用多个表时是必需的。看看这个例子，也许它就是你需要的：[http ://www.w3schools.com/sql/sql_join_left.asp](http://www.w3schools.com/sql/sql_join_left.asp)

# iphone - 从应用程序中选择视频并将它们复制到文档目录中

> ID：13303854
> 
> 赞同：0
> 
> 时间：2012-11-09T07:25:41.373
> 
> 标签：iphone, file, video, uiimagepickercontroller, mpmediapickercontroller

我`UIImagePickerController`用来从 iPhone 的图片库中选择视频文件

```
imagePicker.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeMovie]; 
```

并且该代码工作正常，选择器向我显示了图库中的所有可用视频，但问题是`UIImagePickerController`不显示 iPhone 的所有视频，例如 Iphone 的 Video 文件夹中的视频以及 iPhone 上的同步视频。简而言之，它仅显示从 Iphone 录制的视频。但我的要求是在 Iphone 中显示所有视频并获取它们的路径，以便我可以使用`FileManager`.

我也尝试过使用

```
MPMediaPickerController *picker =
    [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeAnyAudio];

    picker.delegate                     = self;
    picker.allowsPickingMultipleItems   = YES;
    picker.prompt                       = NSLocalizedString (@"AddSongsPrompt", @"Prompt to user to choose some songs to play");

    [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleDefault animated:YES];

    [self presentModalViewController: picker animated: YES];
    [picker release]; 
```

但它也向我显示了 Iphone 的音乐文件而不是视频。请有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:31:29.260

尝试`initWithMediaTypes:MPMediaTypeAnyVideo`代替`initWithMediaTypes: MPMediaTypeAnyAudio`

另请参阅此链接以获取更多信息，[MPMediaItem_ClassReference](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaItem_ClassReference/Reference/Reference.html#//apple_ref/c/tdef/MPMediaType)

# hibernate - Hibernate 决定在运行时使用哪种获取策略

> ID：13303858
> 
> 赞同：1
> 
> 时间：2012-11-09T07:25:52.107
> 
> 标签：hibernate, fetch, hibernate-criteria

我有一个关于休眠的急切和延迟加载的问题。我有以下设置：

```
public Person {
  int prsnId;
  Set<Preferences> preferences;
  Set<ContactDetails> contactDetails;

  //constructor

  //getters & setters
} 
```

休眠映射：

```
<hibernate-mapping>
    <class name="be.bene.cris2.protocol.Person" table="BENE_CUST_PERSON" dynamic-update="true" dynamic-insert="true">
        <id name="prsnId" type="int">
            <column name="PRSN_ID" precision="10" scale="0" />
             <generator class="sequence">
                   <param name="sequence">CUST_PROR_SEQ</param>
            </generator>
        </id>
    <set access="field" name="preferences" table="PRSN_PREF" inverse="true">
        <key column="PRSN_ID" not-null="true"/>
        <one-to-many class="Preferences" not-found="ignore"/>
    </set>
    <set access="field" name="contactDetails" table="CNTCT_DETAILS" inverse="true">
        <key column="PRSN_ID" not-null="true"/>
        <one-to-many class="ContactDetails" not-found="ignore"/>
    </set>
    </class>
</hibernate-mapping> 
```

现在，当我执行以下查询时，我想知道是否可以在运行时决定例如应该预先加载首选项，但应该延迟获取 contactDetails，或者有时根本不获取。

```
Criteria criteria = session.createCriteria(Person.class);
    criteria.setFirstResult(startRow)
        .setMaxResults(pageSize)
        .add(Restrictions.eq("prsnId", id))
        .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)
    ;
List<Person> personList = criteria.list(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:50:16.697

您可以使用获取关联

```
criteria.setFetchMode("preferences", FetchMode.JOIN); 
```

在这种情况下，首选项将在同一个查询中与人员一起获取，并且联系人详细信息将被延迟获取（这意味着只有在您调用联系人详细信息集上的方法时才会获取它们）。

然而，问题在于连接提取不起作用`setFirstResult()`，`setMaxResults()`因为它们直接应用于 SQL 语句，因此用于设置 SQL 查询返回的第一行和最大行数。如果偏好是连接获取的，则一个人对应于多行（每个偏好一行）。

# jquery - 单击另一个div时如何获取值？

> ID：13303860
> 
> 赞同：0
> 
> 时间：2012-11-09T07:26:11.853
> 
> 标签：jquery

大家好，我正在研究 jquery，实际上我是新手，我需要做的是我`stock50`喜欢`items`和`price$99`那些项目（股票）在一个 div 中，我还有一个单独的 div，我有一个`imagebutton`当点击imagebutton 拥有它的项目（库存）应该将一个项目添加到我的另一个 div 并且库存应该减少，如剩余`stock49`意味着项目和价格 99 美元，如果我假设选择了剩余的两个项目`stock48`和 2 个项目应该添加到我的 div 和价格应该翻倍，所以这是我必须做的，我不知道请帮助建议我

这里有一些代码如下：

```
 <div class="conteinar">
     <div class="product">
        <img src="images/2215460001_14980_png_picture_1.png" />
        <span>Stock 10</span>
        <span>Price $99</span>
        <span><img src="images/ADDCart.png" /></span>
        </div>

        <div class="product">
        <img src="images/2215460001_14980_png_picture_1.png" />
        <span>Stock 50</span>
        <span>Price $99</span>
        <span><img src="images/ADDCart.png" /></span>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:09:35.223

您可以使用 data-* 属性将计数存储在跨度中。您可以通过这种方式使用 jQuery 添加属性：

```
$('spanSelector').attr('data-itemCount', '50'); 
```

因此，当您需要从该列表中删除项目时，请从计数中减去并将其设置为`data-count`自定义属性：

```
var newCount = parseInt($('spanSelector').attr('data-itemCount'))-1;
$('spanSelector').attr('data-itemCount', newCount); 
```

您还需要使用新计数来更新显示文本：

```
'Stock ' + $('spanSelector').attr('data-itemCount'); 
```

你可以用价格做同样的事情。将其存储为 data-price 并以相同的方式检索它并将其添加到您的总数中。

这应该让您朝着正确的方向开始。Data-* 属性是在 DOM 中存储数据的好方法。您不想存储大量的 data-* 属性，但对于您所说的，这是一个很好的途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:55:49.680

您需要为每个产品设置一个隐藏字段。在隐藏字段值哪个产品数量。然后，当任何人单击添加到购物车时，从中获取价值，`hidden field`然后`decrease`将 1 设置`SPAN`为显示。

# scala - 如何编写一个 consolePatternMatchListener 扩展点？

> ID：13303861
> 
> 赞同：4
> 
> 时间：2012-11-09T07:26:38.987
> 
> 标签：scala, eclipse-plugin, console

我正在从 scala 插件项目运行外部工具。该工具可能会在某些条件下生成错误/警告，我希望将其设为可点击，以便能够跳转到发生点。错误是消息具有以下语法：

```
<absolute_file_path>:<line_no>:ERROR: <message> 
```

搜索了一下了解到需要添加一个consolePatternMatchListener扩展点，得到如下示例：

```
<extension
         point="org.eclipse.ui.console.consolePatternMatchListeners">
      <consolePatternMatchListener
            class="com.example.ExampleConsolePatternMatcher"
            id="com.example.ExampleConsolePatternMatcher"
            regex=".*foo.*">
         <enablement>
            <test property="org.eclipse.ui.console.consoleTypeTest" value="exampleConsole"/>
         </enablement>
      </consolePatternMatchListener>
   </extension> 
```

由于我对 eclipse 插件开发非常陌生，所以我想知道如何在 plugin.xml->Extension Point 中编写上述扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:27:37.227

您可能会发现本教程很有用：[Eclipse Extension Points and Extensions](http://www.vogella.com/articles/EclipseExtensionPoint/article.html)

# php - 在php中将长数字拆分为小数字

> ID：13303866
> 
> 赞同：-2
> 
> 时间：2012-11-09T07:26:52.980
> 
> 标签：php

> **可能重复：**
> [如何在php中以某种格式显示数字](https://stackoverflow.com/questions/5402835/how-to-display-number-in-a-certain-format-in-php)

我有以下数字：`3234.54554545545`

```
I want to split it like 3234.54, means I want to display only 2 char after dot.

Following is something I am trying but its not working

<?php
$v = "3234.54554545";
$pos = strpos($v, '.');
$r = substr($v, count($pos) - 3);
echo $v."".$r;
?> 
```

实际结果：`3234.54554545545` 期望的输出：`3234.54`

请帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:28:27.477

您可以将[number_format](http://php.net/manual/en/function.number-format.php)函数用作：

```
$v = "3234.54554545";
$r = number_format($v, 2, '.', ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T07:30:30.667

为什么不能用[`number_format`](http://php.net/manual/en/function.number-format.php)？

```
<?php
    $v = "3234.54554545";
    $r = number_format($v, 2);
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T07:31:56.073

PHP 的类型非常灵活，数字字符串可以直接用作数字。

```
//This is true
('123.45' == 123.45) 
```

因此，您可以使用[`number_format`](http://php.net/number_format)格式化字符串。[`sprintf`](http://php.net/sprintf)如果您需要更多控制，也可以使用。

# php - PHP刷新页面将变量重新初始化为0

> ID：13303868
> 
> 赞同：1
> 
> 时间：2012-11-09T07:26:58.733
> 
> 标签：php

我正在使用 URL 将商品添加到购物车`?action=add`。我没有初始化变量`$count`并且收到以下错误：

```
Notice: Undefined index: count in C:\wamp\www\cart.php on line 31

Notice: Undefined index: count in C:\wamp\www\cart.php on line 32 
```

我知道我需要定义 $count 变量。($count = 0;) 但我不希望每次用户将新商品添加到购物车时刷新页面并将 SESSION 变量重置为 0。$count 需要用作下一页的计数器。我怎样才能做到这一点？

这是我的案例代码：

```
switch($action) { 
    case "add":
        if (isset($_SESSION['cart'][$comic_id])) {
            $count=$_SESSION['count']; //LINE 31
            $_SESSION['count']++; //LINE 32
            $_SESSION['cart'][$comic_id]++;

        } else {
            $_SESSION['cart'][$comic_id] = 1;
            }
    break; 
```

添加后 if (!isset($_SESSION['count'])) $_SESSION['count'] = 1;

```
<?php 
if(!isset($_SESSION)) {
     session_start();
}
$total = 0;
$page = 'cart';

$dbname = "crystal_fusion";
$dbhost = "127.0.0.1";
$dbuser = "root";
$dbpwd = "";

$link = mysql_connect($dbhost, $dbuser, $dbpwd);

mysql_select_db($dbname);

if(isset($_GET['comic_id'])){
    $comic_id = $_GET['comic_id'];
} else {
    $comic_id = NULL;}

$action = $_GET['action'];

if($comic_id && !productExists($comic_id)) {
    die("We apologise, but we can't seem to find the comic you were looking for!!!");
}

if (!isset($_SESSION['count'])) $_SESSION['count'] = 1; //added as suggested - now output is correct when adding multiples of 1 item. However, the count is wrong if more than 1 item is added.

switch($action) {
    case "add":
        if (isset($_SESSION['cart'][$comic_id])) {
            $count=$_SESSION['count'];
            $_SESSION['count']++;
            $_SESSION['cart'][$comic_id]++;

        } else {
            $_SESSION['cart'][$comic_id] = 1;
            }
    break;  
    case "remove":
        if (isset($_SESSION['cart'][$comic_id])) {
            $_SESSION['cart'][$comic_id]--;} 
        if($_SESSION['cart'][$comic_id] == 0) unset($_SESSION['cart'][$comic_id]); 
    break;  
    case "empty":
        unset($_SESSION['cart']); 
        session_destroy();
    break;  
}

require('header.php');
require('sidebar.php');
if (isset($_SESSION['cart'][$comic_id])){

    echo "<table border=\"0\" padding=\"10\" width=\"80%\">";
    echo "<td colspan=\"1\" align=\"left\"><a href=\"title.php\">Continue Shopping</a></div>";
    echo "<td colspan=\"6\" align=\"right\"><a href=\"$_SERVER[PHP_SELF]?action=empty\" onclick=\"return confirm('Crystal Fusion: Are you sure you wish to empty your cart?');\">Empty Cart</a></td>"; //empty cart link --Sam                      
    echo "<tr height=\"20px\">";
    echo "<tr height=\"20px\">";
    echo "<td align=center>Image</td><td align=center>Title</td><td align=center>Description</td><td colspan=3 align=center>Copies (+/-)</td><td align=center>Price</td>";
    echo "<tr height=\"20px\">";

    foreach($_SESSION['cart'] as $comic_id => $qty) {   

        $sql = sprintf("SELECT title, description, cost, image_thumbnail
                FROM comic 
                WHERE comic_id = %d;",$comic_id);

        $result = mysql_query($sql);

        if(mysql_num_rows($result) > 0) {

            list($name, $description, $price, $image_thumbnail) = mysql_fetch_row($result);

            $cost = $price * $qty;  
            $total = $total + $cost; 

            $cost = number_format($cost,2);
            $total = number_format($total,2);
            $description =  substr($description, 0, 250);

            echo "<br><tr>";
            echo "<td width=\"10px\" align=\"center\"><img height=100 align=center src=\"$image_thumbnail\">";
            echo "<td align=\"center\">$name</td>";
            echo "<td width=\"40%\" align=\"center\">$description...<a href=comic_dyn.php?comic_id=$comic_id>More Info</td>";
            echo "<td width=\"30px\" align=\"center\"><a href=\"$_SERVER[PHP_SELF]?action=add&comic_id=$comic_id\">+<br></a><td align=\"center\">$qty <td width=\"20px\" align=\"center\"><a href=\"$_SERVER[PHP_SELF]?action=remove&comic_id=$comic_id\">-</a></td>";
            echo "<td align=\"right\">$$cost</td>";
            echo "</tr>";           
        }

    }

    echo "<br><tr><tr height=100px>";
    echo "<td><td><td colspan=\"4\" align=\"right\">Total:</td>";
    echo "<td width=\"60px\" align=\"right\">$$total</td>";
    echo "<tr><td colspan=\"7\" align=\"right\"><a href=\"checkout_html.php\">Proceed to Checkout</a>";
    echo "<tr height=\"50px\">";
    echo "</table>";
}else{

    echo "Your cart is currently empty.";
    echo "<br><br><td colspan=\"1\" align=\"left\"><a href=\"title.php\">Continue Shopping</a></div>";

}

$_SESSION['totnamqty'][]=$name . " " . $qty . " " . $price;

function productExists($comic_id) { 
        $sql = sprintf("SELECT * FROM comic WHERE comic_id = %d;", $comic_id);
    return mysql_num_rows(mysql_query($sql)) > 0;
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:29:04.430

### 检查这些：

1.  您必须首先使用初始化**会话**`session_start();`。
2.  `$_SESSION['count']`在分配或对其执行 som 操作之前，请确保存在并初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:34:40.340

在使用某处之前，`$_SESSION['count']`您必须对其进行初始化。我认为您没有这样做，这就是您收到通知的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:42:31.940

请参阅以下链接以获取更多会话信息：

[W3Schools - PHP 课程](http://www.w3schools.com/php/php_sessions.asp)

*（我会发布 PHP.net 手册页，但我是新手，只能发布 2 个链接）*

此外，您可能还希望转换为使用 $_POST 变量，而不是通过 URL 传递键值对：

[PHP.net - $_POST](http://www.php.net/manual/en/reserved.variables.post.php)

# php - 我的 PHP 表单有问题

> ID：13303873
> 
> 赞同：0
> 
> 时间：2012-11-09T07:27:31.320
> 
> 标签：php, forms, redirect, checkbox

我无法获得复选框的值，收件人（管理员或内容编辑器）显示它显示“数组”或“A”。此外，页面会自动重定向，而不会首先出现表单。我该如何纠正这个问题？这是我的代码：

联系人.php

```
 <?php
    $errnam = "";
    $errmail = "";
    $errsub = "";
    $errrec = "";
    $hasErrors = false;

    if(isset ($_POST['submitted'])){
    $name = $_POST['name'];
    $email = $_POST['email'];
    $subject = $_POST['subject'];
    $recipient = $_POST['recipient'];
    $message = $_POST['message'];

            if(preg_match("/^[\w\-'\s]/", $_POST['name'])){
               $name = $_POST['name'];   
            }  
            else{  
                 $errnam ='<strong>Please enter a name.</strong>';
                 $hasErrors = true;  
            }  

            if (preg_match("/^[\w.-_]+@[\w.-]+[A-Za-z]{2,6}$/i", $email)){
              $email = $_POST['email'];

            }  
            else{  
                $errmail = '<strong>Please enter a valid email.</strong>';
                $hasErrors = true;  
            } 

            if(preg_match("/^[\w\-'\s]/", $_POST['subject'])){
                $subject = $_POST['subject'];

            }  
            else{  
                 $errsub = "<strong>Please enter a subject.</strong>";
                 $hasErrors = true; 
            }

            if (!empty($_POST['recipient'])) {  
             for ($i=0; $i < count($_POST['recipient']);$i++) {
                 $recipient = $_POST['recipient'];
                  }
           }else{
            $errrec = "<strong>Please select a recipient</strong>";
            $hasErrors = true; 
          } 
                $message = $_POST['message'];
    }

    if ($hasErrors){
        echo "<strong>Error! Please fix the errors as stated.</strong>";
    }else{
        header("Location: form.php?name=".$name."&email=".$email."&subject=".$subject. "&recipient=".$recipient. "&message=".$message);

    exit();

}
?> 
```

表单.php

```
<?php
$name = $_GET['name'];
$email = $_GET['email'];
$subject = $_GET['subject'];
$recipient = $_GET['recipient'];
$message = $_GET['message'];

echo "<h2>Thank You</h2>";
echo "<p>Thank you for your submission. Here is a copy of the details that you have sent.</p>"; 
echo "<strong>Your Name:</strong> ".$name. "<br />";
echo "<strong>Your Email:</strong> ".$email. "<br />";
echo "<strong>Subject:</strong> ".$subject. "<br />";
echo "<strong>Recipient:</strong>" .$recipient. "<br />";  
echo "<strong>Message:</strong> <br /> " .$message;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:21:27.180

您在主 if 语句之外有重定向，只需将其移入即可。

如果您返回“Array”，您也没有访问数组中的正确参数。

```
 for ($i=0; $i < count($_POST['recipient']);$i++) {
             $recipient = $_POST['recipient'][$i];
              } 
```

你需要改变你的功能

# google-maps-api-3 - 如何激活现有标记以在单击 Google Maps v3 中的单独链接时显示其信息窗口？

> ID：13303874
> 
> 赞同：0
> 
> 时间：2012-11-09T07:27:43.640
> 
> 标签：google-maps-api-3

我目前已经创建了标记，但我希望能够通过单击这些标记名称的单独列表来聚焦/显示标记的信息窗口。你如何做到这一点？我在网上找不到任何东西。

javascript:

```
<script type="text/javascript"> 
  var infowindow;
  var locations = { 0: { lat: 32.42, long: -99.68,  name: 'Taylor Swift', info: '<b>Taylor Swift</b><br/><img src="http://www.8notes.com/images/artists/taylor_swift.jpg" width="50">' }, 
                    1: { lat: 35.42, long: -95.68,  name: 'Lady Gaga', info: '<b>Lady Gaga</b><br/><img src="http://images2.fanpop.com/images/photos/7500000/L-G-lady-gaga-7557892-500-500.jpg" width="50">' },
                    2: { lat: 37.78, long: -122.32, name: 'Selena Gomez', info: '<b>Selena Gomez</b><br/><img src="http://videokeman.com/image/pics/SelenaGomezsongPics1YnhHMtsn4mUdCM.jpg" width="50">' }  
                  }                       

  var myLatlng = new google.maps.LatLng(locations[0].lat,locations[0].long);
  var myOptions = 
  {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

   var map = new google.maps.Map(document.getElementById("map_container"), myOptions);
   var markerBounds = new google.maps.LatLngBounds();

   $.each(locations, function(key, value) 
   {          
        var location  = new google.maps.LatLng(value.lat,value.long);
      var marker = new google.maps.Marker({
         position: location, 
         map: map,         
         title:value.name        
      });    

      markerBounds.extend(location);
      map.fitBounds(markerBounds);                          
      attachSecretMessage(marker, value);
   });

function attachSecretMessage(marker,value) 
{         
   google.maps.event.addListener(marker, 'click', function() 
   {      
        if (infowindow) infowindow.close();
      infowindow = new google.maps.InfoWindow(
       { content: value.info,
         size: new google.maps.Size(50,50)
       });     

      infowindow.open(map,marker);
   });    
}  

  </script> 
```

html正文：

```
<body>

<a id="showTaylorSwiftInfoWindow" href="#">Taylor Swift</a>
<a id="showLadyGagaInfoWindow" href="#">Lady Gaga</a>
<a id="showSelenaGomezInfoWindow" href="#">Selena Gomez</a>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:33:57.877

您需要将所有标记保存在一个数组中，以便您可以搜索并找到合适的标记。一旦你有了它，你就可以调用 click 事件处理程序，或者只是制作信息窗口并像在事件处理程序中一样打开它。

但重要的部分是您将标记保存在一个数组中，因为这是您在创建它们之后能够再次引用它们的唯一方法。

# javascript - 在 Linux 中使用 node JS 连接 Redis

> ID：13303879
> 
> 赞同：0
> 
> 时间：2012-11-09T07:27:59.967
> 
> 标签：javascript, linux, node.js, redis

我正在尝试使用节点 js 连接到 linux 中的 redis，如下所示

`var redis = require('redis');`

但是，得到如下错误。我在 linux 中安装了 redis-2.4.17，路径是 /home/masadmin/redis-2.4.17/src 请帮助了解如何在 linux 中使用节点连接到 redis。

```
module.js:340
    throw err;

          ^
Error: Cannot find module 'redis'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/home/masadmin/Vinod/prapprRedisLoad.js:2:13)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:39:06.393

您是否为您的应用程序安装了 Node.js Redis 模块？`npm install redis`（在与您的应用程序相同的目录中）将安装它。查看[此截屏视频](http://nodecasts.net/episodes/4-packages-and-npm)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T07:44:57.510

安装 Node.js Redis 模块后，我遇到了同样的错误。更改 NODE_PATH 环境变量后，我已修复它（错误）：

```
export NODE_PATH=$NODE_PATH:<YOUR_NODE.JS_HOME>/node_modules 
```

# c# - 使用 ADO.NET 将 JSON 文档插入 MySQL 中的行

> ID：13303881
> 
> 赞同：0
> 
> 时间：2012-11-09T07:28:13.647
> 
> 标签：c#, asp.net, mysql, ado.net

我想将 JSON 文档插入到我的 MySQL 数据库中的 varchar 列中。我正在用 ASP.NET 和 c# 开发我的应用程序。我使用以下命令：

```
MySqlCommand cmnd = new MySqlCommand("UPDATE sharding_conf SET config = \"" + json + "\" WHERE id = 1"); 
```

问题是 JSON 文档还包含 " 字符所以我得到一个错误。

```
You have an error in your SQL syntax; 
```

如何插入 JSON 文档？- 请注意，当我从数据库中读回数据并将其放入对象时，我打算对其进行反序列化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:34:18.263

使用参数化查询代替内联查询。所以使用：

```
MySqlCommand cmnd = new MySqlCommand("UPDATE sharding_conf SET config = @config WHERE id = 1");
cmnd.Parameters.Add("@config",json);

```

我不知道我的sql中是否使用了@或？但这就是它可以修复的方法。

# c# - 获取 ASCII 字符串

> ID：13303884
> 
> 赞同：1
> 
> 时间：2012-11-09T07:28:24.937
> 
> 标签：c#, .net

我只是想知道.Net 框架方法中是否有返回 ASCII 字符序列的方法？就像是：

```
public static string ascii()
{
    return "abcdefghijklmnuopqrstuvwxyz";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:59:25.467

事实上`String`已经实现了`IEnumerable<Char>`，所以你的代码已经是你需要的了。但是您可以通过更改返回类型使其更具体：

```
 public IEnumerable<Char> Ascii
    {
        get
        {
            return "abcdefghiklmnopqrstuvwxyz";
        }
    } 
```

如果您真的想以更 LINQish 的方式制作它，您还可以编写：

```
 public IEnumerable<Char> Ascii2
    {
        get
        {
            return Enumerable.Range((int)'a', 26).Select(i => (char)i);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:30:12.750

嗯，你在那儿写的。不，框架中没有任何东西可以这样做。为什么会有？这种方法并不能解决特定的问题，而且自己编写是非常微不足道的。但请注意，命名约定将规定名称`Ascii`:-)

# c++ - 从图片中检测最暗的固定大小正方形

> ID：13303886
> 
> 赞同：0
> 
> 时间：2012-11-09T07:28:27.193
> 
> 标签：c++, algorithm, image-processing

我有一张 2600x2600 的灰色图片。或者它可以看作是一个无符号短矩阵。我想找到最暗（或通过计算反向图片最亮）的正方形具有固定大小 N。N 可以参数化（如果有多个最暗的正方形，我想要全部）。

[我使用opencv](https://stackoverflow.com/questions/10581451/detection-of-rectangular-bright-area-in-a-image-using-opencv)读取了图像中矩形明亮区域的检测， 但它需要一个我没有的阈值，此外我搜索一个固定大小。

有没有人可以在 c++ 或 python 中找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:15:12.393

```
For each row of the image,
    Add up the N consecutive pixels, so you get W - N + 1 pixels.
For each column of the new image,
    For each consecutive sequence of N pixels, (H - N + 1)
        Add them up and compare to the current best. 
```

要将每个连续的像素序列相加，您可以减去最后一个像素，然后添加下一个像素。

如果可以修改，您还可以重用图像数组作为存储。如果没有，内存优化将只存储最新的列，并在第一个循环中的每个步骤中遍历它。

运行时间：O( *w* · *h* )

这是 C# 中的一些代码，用于演示这一点（忽略像素格式和任何潜在的溢出）：

```
List<Point> FindBrightestSquare(int[,] image, int N, out int squareSum)
{
    int width = image.GetLength(0);
    int height = image.GetLength(1);
    if (width < N || height < N)
    {
        return false;
    }

    int currentSum;
    for (int y = 0; y < height; y++)
    {
        currentSum = 0;
        for (int x = 0; x < width; x++)
        {
            currentSum += image[x,y];
            if (x => N)
            {
                currentSum -= image[x-N,y];
                image[x-N,y] = currentSum;
            }
        }
    }

    int? bestSum = null;
    List<Point> bestCandidates = new List<Point>();
    for (int x = 0; x <= width-N; x++)
    {
        currentSum = 0;
        for (int y = 0; y < height; y++)
        {
            currentSum += image[x,y];
            if (y >= N)
            {
                currentSum -= image[x, y-N];
                if (bestSum == null || currentSum > bestSum)
                {
                    bestSum = currentSum;
                    bestCandidates.Clear();
                    bestCandidates.Add(new Point(x, y-N));
                }
                else if (currentSum == bestSum)
                {
                    bestCandidates.Add(new Point(x, y-N));
                }
            }
        }
    }

    squareSum = bestSum.Value;
    return bestCandidates;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:57:10.417

您可以增加阈值，直到找到一个正方形，然后使用 2D FSM 来检测正方形。

这将产生匹配`O(width * height * bpp)`（在可能的最低阈值上进行二进制搜索，假设是二次幂范围）：

```
- set threshold to its maximum value 
- for every bit of the threshold
  - clear the bit in the threshold
  - if there is a match
    - record the set of matches as a result
  - else
    - set the bit
- if there is no record, then the threshold is its maximum.

to detect a square:
- for every pixel:
  - if the pixel is too bright, set its line-len to 0
  - else if it's the first column, set its line-len to 1
  - else set its line-len to the line-len of the pixel to the left, plus one

  - if the pixel line-len is less than N, set its rect-len to 0
  - else if it's the first row, set its rect-len to 1
  - else set its rect-len to the rect-len of the pixel above, plus one

  - if the rect-len is at least N, record a match. 
```

`line-len`表示足够暗的连续像素的数量。

`rect-len`表示足够长且对齐的连续暗像素行数。

对于视频捕获，将二进制搜索替换为从前一帧的阈值开始的线性搜索。

显然，你不可能比`theta(width/N * height/N)`最好的情况更好（因为你必须排除每个可能的位置以获得较暗的正方形）并且可以假设位深度是恒定的，所以这个算法对于固定的 N 是渐近最优的。它可能是作为输入的一部分，N 也是渐近最优的，因为（直观地）您必须考虑平均情况下的几乎每个像素。

# php - 检查包含单词 implode / 不同数组与数组相交的值

> ID：13303888
> 
> 赞同：-2
> 
> 时间：2012-11-09T07:28:38.370
> 
> 标签：php, arrays, implode, array-intersect

我想检查将数据输入数据库。检查如下

```
$implode1 = "cat, dog, chicken";

$implode2 = "cow, goat, cat"; 
```

如果变量中的猫`$implode1`也包含在变量`$implode2`中，则应显示警告消息。如何为上述问题编码？

请帮帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:32:26.043

```
$intersaction = array_intersect(array("cat", "dog", "chicken"), 
                                array("cat", "cow", "goat")    );

if (isset($intersaction["cat"])) {....} 
```

功能在[这里](http://php.net/manual/en/function.array-intersect.php)

# mysql - 跨域 ajax 调用在 IE 中不起作用

> ID：13303889
> 
> 赞同：0
> 
> 时间：2012-11-09T07:28:55.477
> 
> 标签：mysql, jquery

我正在做一个跨域ajax调用。这是在 mysql 数据库中插入数据。

```
var urlsearch = "http://192.168.10.113:8080/collective-intellegence/StoreClicks?userid=" + userId + "&query=" + query;
$.ajax({
    type: 'POST',
    url: urlsearch,
    dataType: 'json',
    success: function (data) {
    }
}); 
```

当我运行上面的代码时，它会显示一条错误消息

**XMLHttpRequest 无法加载 http://192.168.10.113:8080/collective-intellegence/StoreClicks?userid=1&query=python&url=http://www.ourgoalplan.com/KLMS/TipView.aspx?id=1785。Origin http://192.168.9.185 是 Access-Control-Allow-Origin 不允许的。**

但数据已成功在除 IE 之外的所有浏览器中插入数据库。

请帮忙解决问题

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:00:13.850

正如@davidrac 建议的那样，您可以使用 JSONP，如下所示：

```
jQuery.ajax({
    type: 'POST',
    url: urlsearch,
    dataType: 'jsonp',
    jsonp: 'json.wrf'
    success: function (data) {   }
}); 
```

您必须`json.wrf`使用回调函数的名称将参数添加到查询字符串中，才能从 Solr 获得正确填充的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:31:56.433

您可能应该使用 JSONP 或其他一些解决方法。

有关问题的解释，请参见[此处](http://en.wikipedia.org/wiki/Same_origin_policy)和[此处。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:32:57.007

当您从服务器输出响应时，请添加以下标头：

```
Access-Control-Allow-Origin: * 
```

这将使 IE 中的 XHR 允许。如需更多信息，请查看[HTTP 访问控制 (CORS)](https://developer.mozilla.org/en/docs/HTTP_access_control)。

如果是 PHP，你可以这样做：

```
<?php
    header("Access-Control-Allow-Origin: *");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:45:53.093

只要 IE 为 8+ 并且服务器响应包含`Access-Control-Allow-Origin: [Allowed origins]`HTTP 标头，此代码就应该可以工作。

```
If (XDomainRequet) {
   //just an example
  var xdr = new XDomainRequest();
  xdr.open("post", url);
  xdr.send();
}
else
{
  $.ajax({
    type: 'POST',
    url: urlsearch,
    dataType: 'json',
    success: function (data) {
    }
});
} 
```

# xml - 我怎样才能只删除标签

> ID：13303892
> 
> 赞同：2
> 
> 时间：2012-11-09T07:29:07.470
> 
> 标签：xml, perl, xml-twig

我只需要在 xml 文件中删除一些标签。

xml:

```
<p>Originally published <xref ref-type="bibr" rid="ref155">Klein, F. (1978)</xref> <i>Priam Books. Reproduced by permission of the author.</p> 
```

脚本：

```
use XML::Twig;
my $xml_twig_content = XML::Twig->new(
keep_encoding => 1,
twig_handlers => {
keep_atts_order => 1,
'xref' => \&xref,
},
pretty_print => 'indented',
);
$xml_twig_content->parsefile('sample.xml');

sub xref {
 my ($xml_twig_content, $xref) = @_;
 my $XrefName = $xref->att('ref-type');
 if ($XrefName =~ /^bibr$/si){
 $xref->delete;
 }
} 
```

我得到了输出：

```
<p>Originally published <i>Priam Books. Reproduced by permission of the author.</p> 
```

我需要输出：

```
<p>Originally published Klein, F. (1978) <i>Priam Books. Reproduced by permission of the author.</p> 
```

如何删除外部参照标签并保留其内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:56:18.647

您可以使用[`erase`- 方法](http://www.xmltwig.org/xmltwig/twig_dev.html#METHODS_XML_Twig_Elt_erase)：

> `erase`
> 
> 擦除元素：删除元素并将其所有子元素粘贴到其位置。

这是您的`sub`使用方法：

```
sub xref {
  my ( $twig, $xref ) = @_;
  $xref->erase;
} 
```

* * *

请注意，对我来说，您的示例 XML 没有解析，因为`<i>`没有关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:44:38.100

为什么`keep_encoding => 1`位在位内`twig_handlers`？文档中是否有错误？

我会以更简单的方式执行此操作，使用`twig_roots`/`twig_print_outside_roots`传递除`xref`您感兴趣的 s 之外的所有内容：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

XML::Twig->new( keep_encoding => 1,
                twig_roots => { 'xref[@ref-type=~/^(?i:bibr)/]' => sub { print $_->inner_xml; } },
                twig_print_outside_roots => 1,
              )
         ->parsefile('sample.xml'); 
```

该`twig_roots`选项仅针对正确`xref`的 s 触发。该`@ref-type=~/^(?i:bibr)/]`位使用 XPath 的 XML::Twig 扩展，允许您像在 Perl 中一样使用正则表达式，该`(?i:`部分使其不区分大小写。对于这些元素，打印内部 XML，而不是标签。

该`twig_print_outside_roots`选项（我知道这是一个很长的选项名称！）导致除外部参照元素之外的所有内容都按原样输出，因此您不必担心保持属性顺序或缩进，它将与原始 XML。

# java - 为 jQuery .click() 上的输入类型文件字段获取 null

> ID：13303893
> 
> 赞同：0
> 
> 时间：2012-11-09T07:29:15.500
> 
> 标签：java, jquery

我正在尝试使用 jQuery .click() 上传文件。当我在控制器中执行 request.getParameter() 时，我只得到文件名。此外，我无法读取只有文件名的文件。但是当我对表单使用操作时，我会得到文件的对象。但我不想对我的表单使用操作。

我的html是-

```
$(document).ready(function(){

$('#submitId').click(function(){
    var url=$("#urlId").val();
    var xsl=$("#xslId").val();
    alert(xsl);
    $.post('add.htm', {
        url:url,
        xsl:xsl
    },function(data){
        alert("done");
    });
});
});

<form:form commandName="domTool" enctype="multipart/form-data"
method="POST" >

        URL :
        <form:input  path="url"  id="urlId"/>

        Xsl File :
        <form:input type="file" id="xslId" path="file" />

        <input type="button" value="Submit" id="submitId"/>

</form:form> 
```

我的java代码是 -

```
@RequestMapping("add")
public String add(@ModelAttribute("tool") DomTool domTool,HttpServletRequest   request,HttpServletResponse response) throws JDOMException, IOException{

    System.out.println("file---------- "+tool.getFile());
    System.out.println("Url---------- "+domTool.getUrl());
    return "success";
} 
```

我得到了 url 的值，但我得到了 domTool.getUrl() 的空值。

请任何人帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:33:41.107

您不能以这种方式上传文件（通过传递其位置）。有关有效的技术，请参阅[此](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)问题。

# java - Composite-id hibernate 复杂映射

> ID：13303896
> 
> 赞同：2
> 
> 时间：2012-11-09T07:29:33.737
> 
> 标签：java, hibernate, hibernate-mapping, composite-key, composite-primary-key

我有 3 张桌子 A、B、C

```
Table A (
idA1 int unsigned not null,
idA2 int unsigned not null,
primary key(idA1, idA2)
)

Table B (
idB1 varchar(36) not null,
primary key(idB1)
)

Table C (
idC1 int unsigned not null,
idC2 varchar(36) not null,
idC3 int unsigned not null,
primary key(idC1, idC2, idC3),
foreign key(idC1, idC2) references A(idA1, idA2),
foreign key(idC3) references B(idB1)
) 
```

我对键表 A 使用 conposite-id 但后来遇到问题映射表 C 如何使用下一个结构进行休眠映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:52:43.473

我为我的问题找到了很好的解决方案

[解决方案](http://www.codeproject.com/Tips/419780/NHibernate-mappings-for-Composite-Keys-with-associ)

# winforms - Winforms DataGrid 列标题在右对齐时切断

> ID：13303898
> 
> 赞同：1
> 
> 时间：2012-11-09T07:29:44.627
> 
> 标签：winforms, datagrid

当我右对齐 Windows 窗体 Datagrid 中的列时，标题也右对齐，这很好（大多数情况下）。问题是，标题文本的最后一部分被切断了。是否有对此的实际修复，或者这是一个长期存在的错误？

请注意，这适用于 ye-olde DataGrid，而不是 DataGridView 类。

```
 AmountCol.MappingName = "Amount";
        AmountCol.HeaderText = Properties.Resources.strAmount;
        AmountCol.Alignment = HorizontalAlignment.Right; 
```

# android - 将片段计数保持为 1

> ID：13303906
> 
> 赞同：0
> 
> 时间：2012-11-09T07:30:27.057
> 
> 标签：android, android-fragments, actionbarsherlock

当我按下一个按钮时，我的应用程序会创建一个片段。我想确保只创建这个片段中的一个，例如，如果片段已经存在，则禁用按钮。

如何检查它是否只创建一个片段？是否可以获得片段计数，或者是否有一些选项将其限制为仅创建一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:48:04.830

您可以使用sandrstar 提到的方法。附加片段时，您可以首先检查它是否已附加。

例如，如果您要动态添加片段，则可以通过执行以下操作来阻止重新添加片段：

```
MyFragment myFragment = getFragmentManager().findFragmentByTag("MyFragmentTag")
if(myFragment == null)
{
   myFragment = MyFragment.newInstance();
   FragmentTransaction ft = getFragmentManager().beginTransaction();
   ft.add(R.layout.mylayout,myFragment,"MyFragmentTag");
   ft.commit();
} 
```

# ios - 按周显示 NSDates

> ID：13303909
> 
> 赞同：0
> 
> 时间：2012-11-09T07:30:38.607
> 
> 标签：ios, nsdate, nsdateformatter, nsdatecomponents

设想：

我有一个费用跟踪 iOS 应用程序，我将费用从费用详细视图控制器存储到表视图（带有获取的结果控制器）中，该表视图显示费用列表以及类别、金额和日期。我的实体“Money”中确实有一个日期属性，它是支出或收入的父实体。

问题：

我想要的是基本上对给定一周、一个月或一年的费用进行分类，并将其显示为部分标题标题，例如：（2012 年 10 月 1 日至 10 月 7 日），并据此显示费用金额和相关内容特定的一周。该视图中提供了两个按钮，如果我按下右侧按钮，它将一周增加一周（2012 年 10 月 1 日至 10 月 7 日现在显示 2012 年 10 月 8 日至 10 月 15 日），同样，左侧按钮将减少一周一个星期。

我将如何做到这一点？我正在尝试以下代码 - 不起作用。

```
- (void)weekCalculation
{
   NSDate *today = [NSDate date];  // present date (current date)

   NSCalendar* calendar = [NSCalendar currentCalendar];
   NSDateComponents* comps = [calendar components:NSYearForWeekOfYearCalendarUnit |NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:today];

   [comps setWeekday:1]; // 1: Sunday
   firstDateOfTheWeek = [[calendar dateFromComponents:comps] retain];
   [comps setWeekday:7]; // 7: Saturday
   lastDateOfTheWeek = [[calendar dateFromComponents:comps] retain];

   NSLog(@" first date of week =%@", firstDateOfTheWeek);
   NSLog(@" last date of week =%@", lastDateOfTheWeek);

   firstDateOfWeek = [dateFormatter stringFromDate:firstDateOfTheWeek];
   lastDateOfWeek = [dateFormatter stringFromDate:lastDateOfTheWeek];

} 
```

递增日期的代码 -

```
- (IBAction)showNextDates:(id)sender
{
   int addDaysCount = 7;

   NSDateComponents *dateComponents = [[[NSDateComponents alloc] init] autorelease];
   [dateComponents setDay:addDaysCount];

   NSDate *newDate1 = [[NSCalendar currentCalendar]
                    dateByAddingComponents:dateComponents
                    toDate:firstDateOfTheWeek options:0];

   NSDate *newDate2 = [[NSCalendar currentCalendar]
                    dateByAddingComponents:dateComponents
                    toDate:lastDateOfTheWeek options:0];

   NSLog(@" new dates =%@ %@", newDate1, newDate2);

} 
```

假设星期显示如下（2012 年 11 月 4 日 - 2012 年 11 月 10 日），我按下增量按钮，我在控制台中看到，日期更改为 2012 年 11 月 11 日和 2012 年 11 月 17 日，这是正确的，但如果我按下增量按钮再次，它再次显示相同的日期（2012 年 11 月 11 日和 2012 年 11 月 17 日）。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:15:10.353

在您的班级中声明`currentDate`为 a 。`@property`试试这个。

```
@property(nonatomic, retain) NSDate *currentDate; 
```

初始设置

```
self.currentDate = [NSDate date]; 
```

在调用此方法之前。

```
- (void)weekCalculation
{
   NSCalendar* calendar = [NSCalendar currentCalendar];
   NSDateComponents* comps = [calendar components:NSYearForWeekOfYearCalendarUnit |NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:self.currentDate];

   [comps setWeekday:1]; // 1: Sunday
   firstDateOfTheWeek = [[calendar dateFromComponents:comps] retain];
   [comps setWeekday:7]; // 7: Saturday
   lastDateOfTheWeek = [[calendar dateFromComponents:comps] retain];

   NSLog(@" first date of week =%@", firstDateOfTheWeek);
   NSLog(@" last date of week =%@", lastDateOfTheWeek);

   firstDateOfWeek = [dateFormatter stringFromDate:firstDateOfTheWeek];
   lastDateOfWeek = [dateFormatter stringFromDate:lastDateOfTheWeek];

} 
```

一旦视图被加载，`self.currentDate`值应该从`showNextDates`. 确保它没有在其他任何地方重置。

```
- (IBAction)showNextDates:(id)sender
{
   int addDaysCount = 7;

   NSDateComponents *dateComponents = [[[NSDateComponents alloc] init] autorelease];
   [dateComponents setDay:addDaysCount];

   NSDate *newDate1 = [[NSCalendar currentCalendar]
                    dateByAddingComponents:dateComponents
                    toDate:firstDateOfTheWeek options:0];

   NSDate *newDate2 = [[NSCalendar currentCalendar]
                    dateByAddingComponents:dateComponents
                    toDate:lastDateOfTheWeek options:0];

   NSLog(@" new dates =%@ %@", newDate1, newDate2);

   self.currentDate = newDate1;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T08:12:47.080

我在一个旧项目中需要类似的东西，并通过下面的代码实现了它。它将本周日期设置为 NSDate 变量，并在每个按钮单击中添加/删除 7 天的日期组件。这是代码：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];
NSDate *date = [NSDate date];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit|NSWeekdayCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit)  fromDate:date ];
//
[components setDay:([components day] - ([components weekday] )+2)];
self.currentDate = [calendar dateFromComponents:components];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"dd.MM.yyyy HH:mm:ss";
self.datelabel.text = [formatter stringFromDate:self.currentDate]; 
```

上面的代码计算本周开始并将其设置为 currentDate 变量。我有两个 UIButtons 与 UIActions 命名 prevClick 和 nextClick 调用设置下一个或上一个 weekstart 的方法：

```
- (IBAction)prevClick:(id)sender {
[self addRemoveWeek:NO]; 
```

}

```
-(void)addRemoveWeek:(BOOL)add{
NSCalendar *calendar = [NSCalendar currentCalendar];
[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit|NSWeekdayCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit)  fromDate:self.currentDate ];
components.day = add?components.day+7:components.day-7;
self.currentDate = [calendar dateFromComponents:components];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"dd.MM.yyyy HH:mm:ss";
self.datelabel.text = [formatter stringFromDate:self.currentDate]; 
```

}

```
- (IBAction)nextClk:(id)sender {
[self addRemoveWeek: YES]; 
```

}

# c# - 将 exe 引用复制到输出文件夹

> ID：13303910
> 
> 赞同：3
> 
> 时间：2012-11-09T07:30:40.010
> 
> 标签：c#, vb.net, visual-studio

假设我创建了一个 Visual Studio 类项目 A，它是一个 exe 的包装器。将 exe 复制到输出目录很容易。

现在我创建了另一个引用类 A 的项目 B。有没有办法设置项目 A，以便项目 B 在编译时也将 exe 复制到输出目录？就像 exe 是项目 A 的一种“复制本地依赖项”一样。

谢谢

查尔斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T09:40:35.653

对，这是一种方法。如果您将它们都放在 Visual Studio 中的同一解决方案中，它们将起作用。

1.  将参考项目 A 添加到项目 B。（如果我误解了你，反之亦然）
2.  右键单击解决方案并选择属性。
3.  在通用属性中，您选择项目依赖项。
4.  在项目下拉列表中选择项目 B 并在“取决于”-选中列表框中选中项目 A。（或相反亦然）
5.  构建项目。

您现在应该在 Project B 输出文件夹中拥有 Project A.exe。

要添加不在解决方案中的现有 exe，请将 exe 添加为对项目的引用。

# c# - 在 windows mobile 6.1 中检查数据库的存在

> ID：13303912
> 
> 赞同：1
> 
> 时间：2012-11-09T07:30:41.523
> 
> 标签：c#

如何检查 windows mobile 6.0 C# 代码中是否存在特定数据库或如何从 windows mobile 6.0 应用程序获取所有 .sdf 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:01:08.097

`if (!File.Exists(@"Program Files\ApplicationFolder\DatabseName.sdf"))

{ //输入你的代码.. }`

# mysql - 在 MySQL 表中指定约束

> ID：13303913
> 
> 赞同：0
> 
> 时间：2012-11-09T07:30:43.147
> 
> 标签：mysql, foreign-keys, constraints

我正在为我的系统设计数据库。有很多外键约束。

我想知道是否可以得到一些建议，是否应该执行以下哪一项：

1）在表创建过程中指定约束，即

```
CREATE TABLE IF NOT EXISTS abc
    (
    keyword VARCHAR(20) NOT NULL,
    id INT UNSIGNED NOT NULL,
    FOREIGN KEY (id) REFERENCES xyz(id) ON DELETE CASCADE ON UPDATE CASCADE
    )ENGINE=InnoDB; 
```

2）创建没有FK约束的表并稍后“更改”表，即，

```
CREATE TABLE IF NOT EXISTS abc
    (
    keyword VARCHAR(20) NOT NULL,
    id INT UNSIGNED NOT NULL,
    )ENGINE=InnoDB;
ALTER TABLE abc ADD CONSTRAINT fk_constraint FOREIGN KEY (id) REFERENCES xyz(id)
ON DELETE CASCADE ON UPDATE CASCADE; 
```

表 xyz 只是另一个以 'id' 作为主键的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:36:08.843

您可以立即创建 FK。但这并不总是可能的，因为它们可以以循环方式相互引用。此外，您可能希望稍后使用 FK 添加列。

一次添加它可能会稍微快一些，因为 MySQL 必须为某些更改验证和重建表结构（尽管我不确定添加 FK 是其中之一）。但是这个过程在空表上会相当快，所以当你添加 FK 时并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:35:48.640

结果将是相同的。所以，没有区别。

如果我创建新数据库，我会在一个语句中创建表及其外键。脚本会更好看。但在这种情况下，父表必须在子表之前创建。

如果您不想在创建表时考虑依赖关系，您可以在脚本开头以随机顺序创建表，然后使用 ALTER TABLE 添加外键。

# javascript - 需要一个解决方案来让网站在浏览器中禁用 javascript

> ID：13303919
> 
> 赞同：1
> 
> 时间：2012-11-09T07:31:13.063
> 
> 标签：javascript, noscript

我有一个使用大量 javascript 的网站。我的问题是禁用浏览器中的 javascript 选项，网站将无法正常运行。

我找到的两个解决方案是：

1.  我在页面的标题中添加了这个标签：

    ```
    <noscript><meta http-equiv="refresh" content="0; URL=/noscript.php" /> 
    ```

    加载时页面被重定向到新页面。但是在做一些研究。我在stackoverflow上发现它有seo问题，因为爬虫会索引noscript页面，从而影响网站的seo。

2.  当在 noscript 标记内禁用 javascript 时，只需显示一条类似于 stackoverflow 的消息。我认为他们还创建了单独的表单，在发生这种情况时使用服务器端验证。

除了在所有表单上重做服务器端验证的功能。有没有其他我可以使用的解决方案。另外我想知道解决方案 1 是否不是一个好的选择。正如我所见，facebook 也在使用它。

提前致谢。

我发现这可以按我想要的方式工作。想知道，你会怎么想？

```
<noscript>
 <font face=arial>JavaScript must be enabled in order for you to use the site.</font>      <style type="text/css">
#wrapper { display: none; }
</style>  
</noscript> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:12:07.547

正如评论中提到的，您应该始终在服务器端和客户端验证用户输入。这可能不是您想听到的答案（这首先意味着需要额外的工作），但如果您不这样做，那么您的网站就会受到攻击。

在构建需要支持非 JavaScript 用户的网站时，我发现从基本的 HTML/CSS 网站开始并在顶部添加 JavaScript 功能要容易得多。这称为[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)。

如果您不需要（或真的不想）支持非 JavaScript 用户，那么我会选择选项 2——请提示用户他们需要启用 JavaScript 才能使用网站的所有功能。

# c# - ComboBoxItem WPF 的常见 MouseMove 事件

> ID：13303920
> 
> 赞同：1
> 
> 时间：2012-11-09T07:31:21.813
> 
> 标签：c#, wpf, xaml

如何为 ComboBox 中的所有 ComboBoxItems添加一个`MouseMove` **事件？**

以下是我尝试过的。

```
<ComboBox Name="Test>  
    <ComboBoxItem MouseMove=TestMenuItem_MouseMove">Item1</ComboBoxItem>  
    <ComboBoxItem MouseMove=TestMenuItem_MouseMove">Item2</ComboBoxItem>
</ComboBox> 
```

是否有任何简单或标准的方法来编写上面的通用代码，而不是为每个 ComboBoxItem 编写事件？

我想从 XAML 代码中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:36:36.093

尝试：

```
<ComboBox Name="Test">  
    <ComboBox.ItemContainerStyle>
        <Style TargetType="ComboBoxItem">
            <EventSetter Event="MouseMove" Handler="TestMenuItem_MouseMove"/>
        </Style>
    </ComboBox.ItemContainerStyle>

    <ComboBoxItem>Item1</ComboBoxItem>  
    <ComboBoxItem>Item2</ComboBoxItem>
</ComboBox> 
```

# java - 启动tomcat后执行某事

> ID：13303921
> 
> 赞同：0
> 
> 时间：2012-11-09T07:31:22.890
> 
> 标签：java, tomcat

我在 apache tomcat 服务器中部署了 Web 应用程序，并且在部署主 Web 应用程序后，我需要启动另一个控制台应用程序（套接字服务器）。此套接字服务器与主应用程序位于同一 WAR 文件中，并且可以访问所有 bean 和 Web 应用程序的类。
我需要在使用已部署的 Web 应用程序启动 tomcat 后启动它（而不是在打开应用程序的索引页面或其他东西之后）
我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:34:24.837

你需要实现`ServletContextListner`接口

```
public class MyServletContextListener implements ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
    //Notification that the servlet context is about to be shut down.   
    }

    @Override
    public void contextInitialized(ServletContextEvent arg0) {
    // do all the tasks that you need to perform just after the server starts

    //Notification that the web application initialization process is starting
    }

} 
```

并在您的部署描述符中配置它`web.xml`

```
<listener>
    <listener-class>
        mypackage.MyServletContextListener
    </listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:33:50.157

使用ServletContextListener，可以在web.xml中配置

当网络应用程序启动以及网络应用程序停止时，您将获得句柄。

# linux - 拆分时提及扩展（linux）

> ID：13303922
> 
> 赞同：1
> 
> 时间：2012-11-09T07:31:27.780
> 
> 标签：linux, split

我有一个非常简单的问题：

```
exec('split -d -l 10 _.txt part'); 
```

这会将我的 _.txt 文件拆分为部分 part00、part01 等。我可以以某种方式为这些块设置文件扩展名吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:41:34.703

可以使用以下`--filter`文件中记录的选项`info coreutils 'split invocation'`：

```
split -d -l 10 _.txt part --filter='cat > $FILE.txt' 
```

这将创建*part00.txt*、*part01.txt*等等。似乎也适用于二进制文件（使用`-b`而不是`-l`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T02:19:28.127

```
# touch xaa xab xac; for f in xa{a..c};do echo mv -- "$f" "$f.txt";done 
```

# ruby-on-rails - 使用 Rails 和 Capistrano 部署在 EC2 上自动扩展

> ID：13303924
> 
> 赞同：8
> 
> 时间：2012-11-09T07:31:30.193
> 
> 标签：ruby-on-rails, amazon-ec2, amazon-web-services, capistrano

是否有一种通用策略来设置自动缩放脚本以更新 capistrano 部署层次结构中的代码，以便在自动缩放事件上启动 AMI 时从存储库中提取代码，以确保在自动缩放机器上运行的提交与非自动缩放上的提交匹配实例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T07:51:42.503

我运行一个有点像这样的设置。我选择不将实例设置为在启动时与 git 交互，因为：

*   我希望实例快速出现（部署 + 捆绑安装可能需要一段时间）
*   我希望扩大/替换实例不依赖于 GitHub、rubygems 等
*   我希望扩展一个实例非常简单

我所做的是我部署的应用程序位于/var/www/myapp。这实际上是一个单独的 EBS 卷，安装在该位置。文件系统是 xfs，因为您可以使用 xfs_freeze 安全地拍摄已安装卷的 ebs 快照

部署完成后，在钩子后的 capistrano 中，我对 /var/www/myapp 卷进行快照。然后我更新了自动缩放启动配置的块设备映射，说“当你启动一个实例时，从快照创建一个新卷并将它附加到 /dev/sdf.

启动时实例所要做的就是将该设备挂载到 /var/www/myapp，方法是编辑 /etc/fstab 或运行一个超级简单的启动时间脚本。Bundler 设置为将其 gems 保存在 /var/www/myapp/shared 中，因此 gems 也得到了照顾

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-27T09:26:09.503

以防万一有人掉到这里，我刚刚发现了这个宝石：

[https://github.com/lserman/capistrano-elbas](https://github.com/lserman/capistrano-elbas)

这将（如自述文件中所述）：

> *   将您的代码部署到连接到给定 AutoScale 组的每个正在运行的实例
> *   部署后，从正在运行的实例之一创建 AMI
> *   将带有新代码的 AMI 附加到新的 AWS 启动配置
> *   更新您的 AutoScale 组以使用新的启动配置
> *   删除 ELBAS 创建的任何旧 AMI
> *   删除 ELBAS 创建的任何旧启动配置

因此，它确保自动缩放组的所有实例（那些正在运行的和那些*未来*的）将运行相同的代码。

希望这可以帮助

# python - 如何在 matplotlib 中制作自定义图例

> ID：13303928
> 
> 赞同：48
> 
> 时间：2012-11-09T07:31:54.153
> 
> 标签：python, matplotlib

我目前以这种方式使用 matplotlib 生成我的图例：

```
if t==25:
    l1,l2 = ax2.plot(x320,vTemp320,'or',x320,vAnaTemp320,'-r')
elif t==50:
    l3,l4 = ax2.plot(x320,vTemp320,'ob',x320,vAnaTemp320,'-b')
else:
    l5,l6 = ax2.plot(x320,vTemp320,'og',x320,vAnaTemp320,'-g')
plt.legend((l1,l2,l3,l4,l5,l6), ('t=25 Simulation', 't=25 Analytical','t=50 Simulation', 't=50 Analytical','t=500 Simulation', 't=500 Analytical'),
   bbox_to_anchor=(-.25, 1), loc=2, borderaxespad=0.,prop={'size':12}) 
```

以某种方式起作用，请参见[1](https://i.stack.imgur.com/XgupM.jpg)。但是我在我的传说中重复了信息。

我宁愿分开传说。这样我就有了与时间 t 相对应的不同颜色的线条。一条法线作为我的分析解决方案，一个点代表我的模拟结果。

类似的东西

--（红线）t = 25

--（蓝线）t = 50

--（绿线）t = 500

o 模拟

-- 分析解决方案

现在有谁可以用 matplotlib 实现这一点？

![当前图像](../Images/07ac6a3812d89b949a70919bd839db4c.png)

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-10T05:04:46.530

您可以选择要在图例中显示的艺术家和标签，如下所示。您需要为图例中未实际绘制的元素创建自定义艺术家。

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0,10,31)

fig = plt.figure()
ax = fig.add_subplot(1,1,1)

#Plot analytic solution
ax.plot(x,1*x**2, color='r', label="t = 25")
ax.plot(x,2*x**2, color='b', label="t = 50")
ax.plot(x,3*x**2, color='g', label="t = 500")

#Plot simulation
ax.plot(x,1*x**2, color='r', linestyle='', marker='o')
ax.plot(x,2*x**2, color='b', linestyle='', marker='o')
ax.plot(x,3*x**2, color='g', linestyle='', marker='o')

#Get artists and labels for legend and chose which ones to display
handles, labels = ax.get_legend_handles_labels()
display = (0,1,2)

#Create custom artists
simArtist = plt.Line2D((0,1),(0,0), color='k', marker='o', linestyle='')
anyArtist = plt.Line2D((0,1),(0,0), color='k')

#Create legend from custom artist/label lists
ax.legend([handle for i,handle in enumerate(handles) if i in display]+[simArtist,anyArtist],
          [label for i,label in enumerate(labels) if i in display]+['Simulation', 'Analytic'])

plt.show() 
```

![示例图](../Images/300aa18dbb9090e3a7ca485bf15621af.png)

# c# - 如果在构建时不知道 DBMS 类型，我可以使用实体框架吗？

> ID：13303938
> 
> 赞同：2
> 
> 时间：2012-11-09T07:32:28.503
> 
> 标签：c#, .net, sql-server, oracle, entity-framework

我正在开发一个应用程序（CRUD WS），它连接到可以是 Oracle 或 SQL 服务器的单个数据库，并且类型是从配置文件中读取的。我可以使用 EF 来实现 DAL 吗？一些要求：

*   这些表没有主键，我无法添加它们。
*   C#/.NET 4.0
*   所有操作都已完成并始终直接提交到数据库
*   所有操作都是简单的 CRUD，没有任何内容被缓存以供读取
*   事务支持（一个请求可以处理多个表）-> 提交/回滚
*   该模型必须只为 10 个表构建，而 db 有数百个表
*   如果 db 是 oracle，则表被划分为表空间，并且并非所有这 10 个表都在同一个表空间中

如果我能做到这一点，一个链接或一个例子会很好。

我以其他方式提出了这个问题，但我立即获得了 2 票赞成票，所以这是我的第二次尝试。

# java - 针对 XSD 进行 XML 验证时出错

> ID：13303946
> 
> 赞同：0
> 
> 时间：2012-11-09T07:33:03.927
> 
> 标签：java, xml, xsd

我在java中编写了以下代码进行验证，但它总是返回true。即使我修改 XML 并使其与 XSD 不兼容，它仍然返回 true。请看一下。

```
public static boolean isValidXML(String filePath,String xsdFile){
    boolean bValue = true;
    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    try {
        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
        documentBuilderFactory.setNamespaceAware(true);
        DocumentBuilder parser = documentBuilderFactory.newDocumentBuilder();
        Document document = parser.parse(new File(filePath));

        Schema schema = schemaFactory.newSchema(new File(xsdFile));
        Validator validator = schema.newValidator();

        final List<SAXParseException> exceptions = new LinkedList<SAXParseException>();
        validator.setErrorHandler(new ErrorHandler()
        {
          public void warning(SAXParseException exception) throws SAXException
          {
            exceptions.add(exception);
          }

          public void fatalError(SAXParseException exception) throws SAXException
          {
            exceptions.add(exception);
          }

          public void error(SAXParseException exception) throws SAXException
          {
            exceptions.add(exception);
          }
        });
        validator.validate(new DOMSource(document));
    } catch (SAXException e) {
        bValue = false;
        logger.error("Error while Validating the XML."+e);
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return bValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:26:11.453

在您的`ErrorHandler`接口实现中，请尝试以下操作：

代替

```
exceptions.add(exception); 
```

请执行下列操作

```
throw exception; 
```

您的实现可能正在使用验证异常。您也可以`exceptions`根据其内容检查并返回。你为什么要填写一份以后永远不会使用的清单？

# c# - 根据当前日期计算日期

> ID：13303953
> 
> 赞同：-4
> 
> 时间：2012-11-09T07:33:36.540
> 
> 标签：c#, datetime, date-format

任何人都可以帮助我使用 C# 根据当前日期计算过去六个月、1 年、2 年的日期。例如，假设我当前的日期是`09-11-2012`我需要找出日期`09-05-2012, 09-05-2010,09-05-2009`等。我知道这是一个数学技巧，但我正在寻找与 C# 类似的实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:36:59.853

只需使用内置的日期和日历库。

快速的方法是使用`DateTime`类，但如果你想正确地做事，那么你会使用`Calendar`类，它可以让你更好地控制特定文化的信息（因为星期一是中国一周的第一天，但​​不是在法国）。

反正：

```
DateTime currentDate  = new DateTime( 2012, 11, 09 ); // assuming 9th November 2012
DateTime sixMonthsAgo = currentDate.AddMonths( -6 );
DateTime yearAgo      = currentDate.AddYears( -1 );
DateTime twoYearsAgo  = currentDate.AddYears( -2 ); 
```

顺便说一句，请不要以“dd-mm-yyyy”格式（无论是斜线还是破折号）写日期，因为它是模棱两可的 - 这个网站有大量的美国观众，出于某种原因'merkins 使用“mm/dd/yyyy "，这对我来说毫无意义。理想的格式是“yyyy-MMM-dd”（其中“mmm”是三个字母的月份名称，例如“Jan”、“Feb”、“Mar”等），或者至少在“yyyy-mm-dd”中" 格式，更符合 ISO 8601)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:35:50.730

使用**[日期时间](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)**

```
DateTime value = new DateTime(2012, 11, 09);
DateTime nYearsAgo = value.AddYears(-n); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T07:38:31.787

诀窍是在 DateTime 对象上使用`.AddMonths()`or`.AddYears()`方法，并提供一个负值来实现减法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T07:38:28.323

您可以查看[DateTime 方法](http://msdn.microsoft.com/en-us/library/497a406b.aspx)，更具体地说是[AddMonths](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)和[AddYears](http://msdn.microsoft.com/en-us/library/system.datetime.addyears.aspx)。

# android - 每当应用失去焦点时，都会调用 BraodcastReceiver。有什么办法可以压制这个？

> ID：13303955
> 
> 赞同：0
> 
> 时间：2012-11-09T07:33:43.103
> 
> 标签：android

我有一个从特定网站下载信息的应用程序，目前设置为每天执行一次。我遇到的问题是，如果我打开应用程序并收到一条短信，一旦弹出窗口出现，我的应用程序就会开始下载。我不知道从哪里开始尝试解决这个问题。有任何想法吗？

当前工作流程：MainActivity -> 启动 BroadcastReceiver，将 alarmManager 设置为在指定时间开始下载 -> 另一个 BroadcastReceiver 启动一个处理列表下载的 IntentService。差不多吧。

希望我在解释方面做得不错。

# python - gui 测试自动化脚本中的 OOP

> ID：13303960
> 
> 赞同：1
> 
> 时间：2012-11-09T07:33:55.147
> 
> 标签：python, oop, user-interface, automation

我正在为 web gui 进行测试自动化。这是一个大型产品，因此设计一个好的软件架构很重要。首先，我决定将测试数据与测试逻辑隔离开来。之后，我想以 oop 样式构建类，这有助于在短时间内处理更改。

我有以下 gui 设计： ![在此处输入图像描述](../Images/9e038727e2bb60e03a86adb478f9e0b9.png)

我认为我应该将菜单、导航和工具栏隔离在额外的类中，因为只有一个地方可以处理更改。我不知道这是否是最好的处理方式。还有其他选择可以处理吗？

PS：我正在使用带有 python 的 Squish Gui 测试自动化工具

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:15:40.367

你看过 Django 吗？编辑：我从第 1 段解释说 OP 将推出他自己的 oop gui web 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T08:12:04.130

最后，我在 Web 应用程序和测试逻辑之间使用了一个抽象层。测试开发人员只使用抽象类的方法。优点是测试开发人员不必了解 Web 应用程序的结构。

在使用该层 4 周后，可以非常快速地创建和处理我们的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T11:50:22.003

我们使用的“自动化设计”是使某些块自动化。每个测试场景都是由逻辑块（子场景）构建的。登录，填写表格1，填写表格2，报告结果，关闭申请。这些是我们自动化的项目，使用正确的参数集，您可以自动化所有场景。

你自动化的方式，也是一个好主意（也这样做了）。每个部分也是一个块。可以调用每个块并使用正确的参数，测试人员可以制作场景 Blok1(editbox1, "the text"; editbox2, "") 等。

在哪里考虑，您如何向功能测试人员表示这一点？他们会理解工作方式吗？（一些测试人员甚至害怕 XML……所以，让它变得简单。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T13:05:58.580

我所做的是，根据它们相关的 GUI 区域将功能分组在一起。例如，在您的示例中，您有 4 个主要部分。如果我们采用“可选工具栏”部分，您可以为该部分定义一个单独的功能组，并在该主功能下添加所有子功能。

例如，在 JavaScript 中，您可以执行以下操作：

```
var OptionalToolbar = {
    clickButton:function(btn){
        //your code goes here
    },

    getButtonCount:function(){
        //your code goes here
    }
} 
```

然后你可以从测试用例中调用这些可重用的函数。

```
OptionalToolbar.clickButton("Home"); 
```

这将使测试框架独立于测试逻辑，当然也将提高可维护性和可用性（按与它们相关的 GUI 区域逻辑分组的功能）。

我一直在使用这种技术来构建我的测试框架功能，并且在过去的 4 年中证明它是成功的。如果您维护明确定义的功能层，您总是可以非常快速地适应变化。

# iphone - IOS 的 AFNetworking 库中的 AFHTTPRequestOperation 类的操作被取消

> ID：13303961
> 
> 赞同：0
> 
> 时间：2012-11-09T07:33:56.710
> 
> 标签：iphone, ios, file-upload, afnetworking

我想使用 AFNetworking 上传多个视频。我准备了一个单身课程，例如：

@interface MFMediaFactoryAPIClient : AFHTTPClient{ } 使用此类，我正在使用以下方法上传多张照片或视频：

```
- (void)postPathWithMultipleRequests:(NSString *)path 
                       requestsArray:(NSMutableArray *)requestsArray 
                             success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
                             failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure uploadProgressBlock:(void (^)(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite))uploadProgressBlock

{  

// I have written one loop for preparing  request object. In loop i also written below code.

                AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

                [operation setUploadProgressBlock:uploadProgressBlock];
                [operation setCompletionBlockWithSuccess:success failure:failure];

                [self enqueueHTTPRequestOperation:operation];

} 
```

基本上，我正在准备一项上传视频的操作，并使用方法将其添加到 operationQueue 中：enqueueHTTPRequestOperation:operation。

但主要问题是操作运行了一段时间，即上传持续了一段时间，但是当我更改选项卡时（我正在使用选项卡栏应用程序，当我点击然后从每个选项卡 Web 服务请求使用上述类发出）并发送其他请求然后上述操作以某种方式被取消，我无法上传视频。

请帮助或建议我可以做些什么来避免这个问题？

对于上传多张照片或视频，还有其他更好的方法吗？请建议！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:52:42.307

您可以做的是在 Appdelegate 中创建 AFHTTPRequestOperation 的那个对象，这样它就会变成全局的。所以当它开始请求时，它不会停止，直到你强行停止它..

可能是这个帮助....

让我知道它是否有效！！！！！！！

快乐的编码......！！！！

# c# - 直线（分段拟合）图是什么意思？如何在 MS 图表中实现？

> ID：13303962
> 
> 赞同：2
> 
> 时间：2012-11-09T07:34:10.767
> 
> 标签：c#, winforms, mschart, linechart

我想在 MS Chart 中实现直线（Piece-wise-fit）图表。

我知道 X 轴上的点 [最小值 = 1.4 和最大值 = 2.2]。我已将所有这些点都放在折线图上。

现在的要求是我如何知道 X 轴上的点 [最小值 = 1.3 和最大值 = 2.3] 与直线（分段拟合）。

任何人都可以知道这个图表然后让我知道我该如何实现这个图表。

是否需要实现任何算法或其他任何东西？

请参阅我已经实施的附加屏幕。![在此处输入图像描述](../Images/2030ccb468be3f30d3f64441684c94d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:25:32.650

我自己纠正了这个问题。

我在图表类型中使用了 MS 图表最佳拟合曲线（样条曲线）。

# objective-c - 使用 ARC 下载和解压缩文件后出现内存警告

> ID：13303970
> 
> 赞同：0
> 
> 时间：2012-11-09T07:35:14.303
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting

我从服务器下载了一些 gzipped xml 文件，将其保存到文档文件夹并解压缩每个文件。之后我删除 .gz 文件。我对或多或少的 500 个文件循环执行此操作。当我使用仪器时，我看到在这个过程之后实时字节或多或少是 470MB。当我等待几秒钟时，ARC 将其清除，应用程序将使用 5mb 活动字节。但是因为它是一个同步过程，所以当我在下载和解压缩后没有停止时，我的应用程序会立即收到内存警告。至少我认为应该可以强制ARC释放内存？还是我有一个真正糟糕的代码，但我仍然没有看到？

非常感谢任何帮助或提示。

下载和解压：

```
for(NSString *filePath in filePaths){
    NSString *localPath = [[DownloadManager sharedInstance] downloadFile:filePath];
    if(localPath){
        //downloaded correctly
        if([self unzipFileAtPath:localPath]){
            [FileUtility deleteFileAtPath:localPath];
        }
    }
} 
```

解压方法：

```
+ (BOOL)unzipFileAtPath:(NSString *)path
{
    NSData *gzData = [NSData dataWithContentsOfFile:path];
    NSData *ungzippedData = [gzData gunzippedData];

    BOOL success = [ungzippedData writeToFile:[FormatUtility pathWithoutGz:path] atomically:NO];
    ungzippedData = nil;
    gzData = nil;

    return success;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:48:13.580

[用自动释放池](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)包裹你的 for 循环内部：

```
for (NSString* filePath in filePaths) {
    @autoreleasepool {
        // do work
    }
} 
```

这个问题实际上与ARC无关。类似的方法`dataWithContentsOfFile:`将返回一个新的自动释放对象实例。在封闭的自动释放池耗尽之前，这些对象不会被释放，默认情况下，这只发生在线程/操作结束或返回运行循环时。

当您在循环中分配许多临时对象时，就像您正在做的那样，您应该使用自己的自动释放池来确保这些临时对象不会不必要地累积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T03:12:40.043

`AFNetworking`使用2.6.4 和`AFDownloadRequestOperation`2.0.1下载非常大的 zip 文件（5GB！）时，我遇到了类似的问题。我发现这种内存问题是由 Flipboard [`FLEX`](https://github.com/Flipboard/FLEX)2.1.1 框架引起的。在我注释掉这条线后`[[FLEXManager sharedManager] setNetworkDebuggingEnabled:YES];`，它工作得很好。

# asp.net - asp.net web 服务中的类似会话的信息

> ID：13303974
> 
> 赞同：0
> 
> 时间：2012-11-09T07:35:33.770
> 
> 标签：asp.net, web-services

我添加了一个新的 asp.net 项目，它只在我的 MVC 应用程序之上托管（经典）WebServices。

Web 服务调用位于 Biz Layer Dll 中的 Biz Objects。

WebService 客户端就像普通用户一样，它们必须经过身份验证和每次操作的授权。

我在第一次调用时使用 SOAP 身份验证令牌来验证用户，然后在每次后续调用时传递该令牌。

BizObjects 访问 IUserSessionManager 以获取授权用户，然后根据请求调用授权用户。这对于 MVC 应用程序和调用 BusinessObjects 的 Windows 应用程序来说非常容易。那么如何将用户信息存储在我的 BusinessObjects 可以从中检索它们的以下系统中。（这对您来说可能很容易，但我不喜欢使用 Web 服务）

```
public class XyzUserSessionManager
{
    private static IXyzUserSessionManager _instance;
    public static IXyzUserSessionManager UserSessionManager
    {
        get { return _instance; }
        set { _instance = value; }
    }
    public static IXyzUserSession Current
    {
        get { return UserSessionManager.Current; }
    }
}

    public IXyzUserSession Current
    {
        get
        {
            if (HttpContext.Current == null || HttpContext.Current.Session == null || HttpContext.Current.Session[SessionKey] == null)
                return null;
            return (IXyzUserSession)HttpContext.Current.Session[SessionKey];
        }
        protected set
        {
            HttpContext.Current.Session[SessionKey] = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:23:11.017

您可以像常规 Web 应用程序一样启用会话状态支持。这是在每个方法的基础上完成的。在此处查看更多详细信息：http: [//msdn.microsoft.com/en-us/library/aa480509.aspx](http://msdn.microsoft.com/en-us/library/aa480509.aspx)

# sql - 从另一个表中替换 select 语句中的一行中的多个标签

> ID：13303982
> 
> 赞同：7
> 
> 时间：2012-11-09T07:36:16.597
> 
> 标签：sql, oracle

我有两张桌子。
一个是 answer_step_dtl
另一个是 tag_mst 如下

```
Ans_code                      Ans_Desc
-------------------------------------------
50000000000000005770       Enter <B><APN></B> and press Ok.       
40000000000000000164       Enter <B><ACCOUNTNAME></B> in connection name.
40000000000000000165       Enter <B><ACCOUNTNAME></B> in <APN>. 
```

等等。

我的 tag_mst 有这样的值

```
TAG_CODE                    TAG_NAME          TAG_VALUE
-------------------------------------------------------
100                          <APN>            EXAMPLE.COM
101                          <ACCOUNTNAME>    EXAMPLE 
```

现在我的要求是我想选择带有标签桅杆替换值的答案表格答案表。**一个 ans_desc 中可以有多个标签**。

我在想办法

1.  循环 answer_dtl 的结果，从单个记录中获取标签

2.  循环遍历记录中的多个标签，然后替换标签

3.  存储在临时表中，然后为新的临时表打开游标。

是不是这个方法。或者有什么简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:30:00.893

**编辑：**受[@Rob van Wijk](https://stackoverflow.com/users/99206/rob-van-wijk)[的注释启发，](http://rwijk.blogspot.fr/2009/11/recursive-subquery-factoring.html)使用（递归）CTE 的奖励查询需要 11g（R2？）：

```
SQL> WITH data AS (
  2     SELECT ans_code, Ans_Desc, tag_name, tag_value,
  3            row_number() OVER (partition BY ans_code ORDER BY t.rowid) no,
  4            row_number() OVER
  5               (partition BY ans_code ORDER BY t.rowid DESC) is_last
  6        FROM answer_step_dtl a
  7        JOIN tag_mst t ON a.ans_desc LIKE '%' || t.tag_name || '%'
  8  ), n(ans_code, no, is_last, replaced) AS (
  9     SELECT ans_code, no n, is_last,
 10            replace (ans_desc, tag_name, tag_value) replaced
 11       FROM data
 12      WHERE no = 1
 13     UNION ALL
 14     SELECT d.ans_code, d.no, d.is_last,
 15            replace (n.replaced, d.tag_name, d.tag_value) replaced
 16       FROM data d
 17       JOIN n ON d.ans_code = n.ans_code
 18        AND d.no = n.no + 1
 19  )
 20  SELECT *
 21    FROM n
 22   WHERE is_last=1;

ANS_CODE             NO IS_LAST REPLACED
-------------------- -- ------- ---------------------------------------
40000000000000000164  1       1 Enter <B>EXAMPLE</B> in connection
50000000000000005770  1       1 Enter <B>EXAMPLE.COM</B> and press Ok.
40000000000000000165  2       1 Enter <B>EXAMPLE</B> in EXAMPLE.COM. 
```

* * *

初步答案：

您可以使用 PL/SQL 函数。即使要替换多个标签，以下内容也将起作用：

```
CREATE OR REPLACE FUNCTION replacetags(p_desc VARCHAR2)
   RETURN VARCHAR2 IS
   l_result  LONG := p_desc;
   l_tag_pos INTEGER := 1;
   l_tag     tag_mst.tag_name%TYPE;
BEGIN
   LOOP
      l_tag     := regexp_substr(l_result, '<[^<]+>', l_tag_pos);
      l_tag_pos := regexp_instr(l_result, '<[^<]+>', l_tag_pos) + 1;
      EXIT WHEN l_tag IS NULL;
      BEGIN
         SELECT replace(l_result, l_tag, tag_value)
           INTO l_result
           FROM tag_mst
          WHERE tag_name = l_tag;
      EXCEPTION
         WHEN no_data_found THEN
            NULL; -- tag doesn't exist in tag_mst
      END;
   END LOOP;
   RETURN l_result;
END;

SQL> SELECT ans_code, replacetags(ans_desc)
  2    FROM answer_step_dtl;

ANS_CODE              REPLACETAGS(ANS_DESC)
--------------------- ----------------------------------------
50000000000000005770  Enter <B>EXAMPLE.COM</B> and press Ok.
40000000000000000164  Enter <B>EXAMPLE</B> in connection
40000000000000000165  Enter <B>EXAMPLE</B> in EXAMPLE.COM. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:43:33.340

试试这个：

```
select d."Ans_code",replace("Ans_Desc","TAG_NAME","TAG_VALUE")
from   answer_step_dtl d, tag_mst m
where "Ans_Desc" like '%'|| "TAG_NAME" || '%' 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!4/db35f/1)

# javascript - jsrender 检查字符串是否为空“”

> ID：13303983
> 
> 赞同：0
> 
> 时间：2012-11-09T07:36:20.217
> 
> 标签：javascript, jsrender

我想知道一个字符串是否为空我正在尝试做

```
 {{if closedOn !=  "" }} 
```

但它没有给我正确的输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:39:19.220

`{{if closedOn}}`

应该可以工作 - 假设 closedOn 可以是日期或您想要排除的值，例如 undefined/null/""。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:48:29.803

您可以像这样进行检查：

```
if (closedOn) {
     // closedOn is defined and it length > 0
} 
```

您的检查方式不正确，原因

```
(undefined != "") is true
(null != "") is true 
```

# sql-server - 转换后的 TIMESTAMP 的 SqlDataReader.GetString() 中的垃圾字符

> ID：13303985
> 
> 赞同：0
> 
> 时间：2012-11-09T07:36:23.650
> 
> 标签：sql-server, sql-server-2008-r2, sqlclient

我有一个 SELECT ，除其他外，

```
CONVERT(varchar(10), TIMESTAMP) 
```

其中时间戳定义为

```
[TIMESTAMP] [binary](8) NULL 
```

一些时间戳有错误的数据，这意味着它们不是像**0x30332F31372F3131**这样转换为**"03/17/11"**的东西，它们只有底部的四个字节，如**0x0000000002F09ADD**。

当我在 MSSMS 查询窗口中执行 SELECT 时，那些坏的会变成空白，这很好，但是当我使用 SqlDataReader 在我的程序中检索它们时，错误时间戳的字符串会出现垃圾字符，如**`" ðšÝ"`**.

关于我能做些什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:02:10.740

```
Select case when ISDate(CONVERT(varchar(10), TIMESTAMP))=1 then CONVERT(varchar(10), TIMESTAMP) else null end 
```

# php - 从数据库注册的用户密码和登录时输入的密码不匹配

> ID：13303986
> 
> 赞同：0
> 
> 时间：2012-11-09T07:36:30.633
> 
> 标签：php, hash, sha256

我已经注册了一个新用户，并使用以下散列方法将用户名、密码和盐保存在数据库中：

```
 if(isset($_POST['register']))
    {
    $password = $_POST['password']

    function sanitize($data)
    {
        $data=trim($data);
        $data=htmlspecialchars($data);
        $data=mysql_real_escape_string($data);
        return $data;
    }

    $password = sanitize($password);

    function createSalt()
    {
        $salt = bin2hex(mcrypt_create_iv(32,MYCRYPT_DEV_URANDOM));
        $hash = hash("sha256", $salt);
        $final = $salt.$hash;
        return $final;
    }

    $hashedPassword = hash("sha256", $password);
    $salt = createSalt();
    $hashedPassword = hash("sha256", $hashedPassword.$salt);

    $query = sprintf("INSERT INTO users(username, password, salt) VALUES('%s','%s','%s')",$username, $hashedPassword, $salt);
} 
```

稍后在尝试 login.php 时，我输入了注册时保存的相同密码，并使用以下代码检查输入的密码是否与数据库中的密码相同

```
if(isset($_POST['login']]))
{
            $password = $_POST['password']

    function sanitize($data)
    {
        $data=trim($data);
        $data=htmlspecialchars($data);
        $data=mysql_real_escape_string($data);
        return $data;
    }

    function validateUser()
    {
        session_regenerate_id (); //this is a security measure
        $_SESSION['valid'] = 1;
        $_SESSION['username'] = $username;
    }

    $password = sanitize($password);

    $query = sprintf("SELECT * FROM users WHERE username = '%s'",$username);
    $sql = mysql_query($query);
    $count = mysql_num_rows($sql);

    $row = mysql_fetch_array($sql);

    if($count<1)
    {
        echo $count;
        unset($_POST['login']);
        header("location:login.php");
        exit;
    }

    $hash = hash("sha256", $password);
    $salt = $row['salt'];
    $hash = hash("sha256",$hash.$salt);

    echo $hash."<br />".$row['password']."<br /><br />";

    if($hash != $row['password'])
    {
        unset($_POST['login']);
        header("location:login.php");
        exit;   
    }
    else
    {
        validateUser();
        unset($_POST['login']);
        header("location:index.php");
        exit;   
    }
} 
```

这些密码不匹配。请让我知道这段代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:31:58.913

您的代码没有任何问题。

存储在数据库中的 salt 值被截断，因为 varchar 值很低，将 salt 列的 varchar 值增加到 200-300 左右，然后试试这个.. 它会运行良好。

当我发现这搞砸了结果时，我捂住了脸。

丁斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:33:36.727

实际上我不明白为什么这不起作用，您显示的代码应该产生相同的值，也许您可​​以检查一下，您从数据库中读取的盐是否真的与您写入数据库的相同。

尽管如此，我不鼓励在这条路线上走得更远，这里有很多问题。

1.  首先，SHA-256 不是哈希密码的好选择，而是使用像**BCrypt**这样的慢速密钥派生函数。
2.  您不应该在没有必要的情况下转义输入数据，如果您需要转义它们，您应该只针对特定的目标系统进行转义（如果您要计算哈希，则没有任何意义）`htmlspecialchars`。`mysql_real_escape_string`
3.  要创建盐，您可以使用随机源，这很好。在创建盐之后使用散列，绝不会使盐更随机。
4.  数据库中不需要密码和盐两个单独的字段。Php 的`crypt()`函数将创建一个已经包含盐的哈希值。

我会邀请你阅读这篇关于[散列密码](http://www.martinstoeckli.ch/hash/hash.html)的教程，你也会找到一个 PHP 示例，我建议使用[phpass](http://www.openwall.com/phpass/)库。

# javascript - 如何以百分比调整 HTML 组件

> ID：13303988
> 
> 赞同：0
> 
> 时间：2012-11-09T07:36:37.393
> 
> 标签：javascript, html, css

我正在创建一个基本的 html 页面，我对此并不陌生。如以下屏幕截图所示。

![在此处输入图像描述](../Images/c630c33ac63f594273eca3b1afccb3fa.png)

如果 100% 宽度，它会显示我想要的对象。当我最小化它时，按钮文本没有正确显示。这是窗口最小化的屏幕截图，这样你们就可以清楚地知道我到底想要什么。

![在此处输入图像描述](../Images/6269738ad8e55e2b1510715c15c3d12d.png)

HTML 代码：

```
 <tr>
      <td><a href="Patientscreen.html">
        <div class="logn">Login</div>
      </a></td>
      <td width="39%" nowrap="nowrap"  ><a href="">
        <div class="frgt-pass"><span class="frgt-pass-txt"> Forgot Password</span></div>
      </a></td>
      <td width="41%" ><div class="Menu-dropdown" onclick="show_menu()" id="dropdown_button"> Menu
        <div id="dropdown_menu" class="hidden_menu">
                <li><a href="">About</a></li>
          <li><a href="">Ping Server</a></li>
          <li><a href="">Change server</a></li>
        </div>
      </div></td>
    </tr> 
```

CSS：

```
.logn-txt {
    font-family:Arial !important;
    color:#FFFFFF;
    font-size:2em;
    color:#aaaaaa;
    padding-right:2%;
}

.txt-box{
    background-image:url(../images/txt-box-BG%20.png);
    background-repeat:repeat-x;
    width:90%;
    height:58px;
    border:none;
    font-family:Arial !important;
    color:#000000;
    font-size:1.5em;
    padding-right:2%;
}

.logn-heading {
    font-family:Arial !important;
    font-size:32px;
    color:#FFFFFF;
    font-weight:bold;
    line-height:58px;
    margin-left:40%;
    line-height:88px;
    position:absolute;
}

.tbl {
    margin:auto; 
    margin-top:15%;
}

.frgt-pass {
    background-color:#FFFFFF;
    width:90%;
    height:4.5em;
    position:relative;
    white-space:nowrap;
}

.frgt-pass-txt {
    font-family:Arial !important;
    color:#324f85;
    font-size:1.8em;
    font-weight:bold;
    line-height:72px;
    text-align:center;
    margin-left:10%;
}

.logn {
    background-color:#FFFFFF;
    width:70%;
    height:72px;
    font-family:Arial !important;
    color:#324f85;
    font-size:178%;
    font-weight:bold;
    line-height:72px;
    text-align:center;
    position:relative;
    float:right;
    margin-right:15%;

} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:51:47.613

我建议只省略表格，而是使用 display: inline-block 类登录，forgtpass 和菜单下拉菜单或 display:table-cell 如果您希望元素始终保持在同一行。

```
 .ExampleClass
{
    border: 2px solid #CFE4AC;
    box-shadow: 0 0 10px #CFE4AC inset;
    cursor: pointer;
    display: inline-block;
    height: 6em;
    margin: 0.5em;
    overflow: auto;
    padding: 0 0 0 0.5em;
    text-align: left;
    vertical-align: top;
    width: 30%;
    font-size: small;
} 
```

# logback - Logback 配置：分解出可重用的部分

> ID：13303990
> 
> 赞同：3
> 
> 时间：2012-11-09T07:36:40.960
> 
> 标签：logback

有没有办法分解和参数化 Logback XML 配置的重复部分？除了文件名之外，我有许多不同的滚动文件附加程序配置基本相同。我将它与一堆关闭了“可加性”的记录器一起使用，这样我就可以将堆栈的不同部分重定向到不同的文件。这增加了一个由许多几乎相同的段组成的繁琐而冗长的配置文件。

我之前使用过 Logback 的`<include>`功能，但它并没有解决这个重用问题，因为我无法参数化包含的配置。我希望这样的功能看起来类似于：

```
<include resource="file-appender.xml">
    <property name="filePath" value="/where/logs/go" />
    <property name="baseLogger" value="com.mycompany.thatpartofthestack" />
</include> 
```

但据我了解，这是一厢情愿。是否有另一种方法可以通过模板、宏、函数或诸如此类的方式来分解 Logback 的配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:54:14.530

尝试在本地和/或上下文[范围内使用](http://logback.qos.ch/manual/configuration.html#scopes)[变量替换](http://logback.qos.ch/manual/configuration.html#variableSubstitution)。

也许最简单的方法是在某个资源文件中定义变量，比如`logback.properties`与每个应用程序捆绑在一起。此外，每个应用程序都会携带一个`logback.xml`文件导入`logback.properties`.

```
<configuration debug="true">
  <property resource="logback.properties" />
  <!-- set root level as given by the value of the root.level variable -->
  <!-- if root.level is undefined default to DEBUG -->
  <root level="${root.level:-DEBUG}"/>
</configuration> 
```

如果您希望在 webapp-A 中将根级别设置为 WARN，只需在`logback.properties`与 webapp-A 捆绑的文件中添加以下行。

```
root.level=WARN 
```

您可以将资源捆绑`logback.xml`到各种应用程序通用的工件中。

# c++ - Assert 在 C++ 中释放内存

> ID：13303991
> 
> 赞同：3
> 
> 时间：2012-11-09T07:36:49.217
> 
> 标签：c++, c, memory-management, assert

假设我们有一个程序，我们在其中分配了一些内存，然后在几行之后有一个**断言**语句。如果**assert**语句抛出错误，分配的内存会发生什么？在停止程序之前它会免费吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T07:42:39.923

[**`assert`**](http://en.wikipedia.org/wiki/Assert.h)失败时，将错误写入**stderr**并调用**[abort()](http://www.cplusplus.com/reference/clibrary/cstdlib/abort/)**。与**exit()**不同，它不执行用**[atexit()](http://www.cplusplus.com/reference/clibrary/cstdlib/atexit/)**注册的函数，也不调用析构函数。

因此，您的析构函数、清理代码等都不能被调用。所以这取决于操作系统，因为程序在“*意外*”终止之前没有释放内存。

* * *

这可能**是设计使然**，因为调用析构函数可能会导致一些进一步的错误。它在那个失败的断言处终止，不再执行任何代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T07:38:54.567

当`assert`失败导致您的程序停止运行时，内存保持分配状态。

作为破坏进程的一部分，任何现代桌面操作系统都会回收内存。一些嵌入式操作系统可能无法做到这一点，尽管我手头没有一个名字。

您可以使用 Valgrind 等实用程序以这种方式检测操作系统必须回收的内存。

# javascript - 我的 HTML 页面 JAVA 编程的经销商域注册 API

> ID：13303995
> 
> 赞同：1
> 
> 时间：2012-11-09T07:37:14.490
> 
> 标签：javascript, html, json, api, jquery

我目前已经签署了一项可以出售域名注册的服务，但是我需要将 API 集成到我的 HTML 页面中，任何人都知道如何去做，我知道在注册表上方的宫殿中获取它也是 API链接类似于[https://test.httpapi.com/api/domains/available.json?auth-userid=111111=0&auth-password=abcxy&domain-name&tlds&suggest-alternative](https://test.httpapi.com/api/domains/available.json?auth-userid=111111=0&auth-password=abcxy&domain-name&tlds&suggest-alternative)

其中，我的登录 ID：auth-userid=111111=0 我的密码：&auth-password=abcxy 命令参数：&domain-name&tlds&suggest-alternative

因此，由于我不在编程中，但我尝试通过查看其他域注册站点源代码在我的站点上实现它，但无济于事，并且我知道我需要某种带有 LOAD 或 GET POST 等命令的 JAVA 脚本在我遇到主要问题的 HTML 页面上显示结果，因为我已经成功地将 API 链接 & 链接到我的搜索框，但是当我搜索任何域名时，它打开上面提到的 API 链接为[https ://test.httpapi.com/api/domains/available.json](https://test.httpapi.com/api/domains/available.json)？在浏览器的 URL 中使用 ENCRYPTION 登录，但显示为“找不到文件错误”所以我能想到的只是它缺少在相同或不同页面中显示搜索结果的脚本程序。有人可以帮我吗。请我真的很感激。

这是我的 HTML 的表单 DIV：

```
 <div class="domain_finder"><div class="ribbon_large"><img src="images/ribbons/11_large.png" alt="" > </div>
                <form  name="form" id="checkAvailbiltyButton" method="get" action="https://httpapi.com/api/domains/available.json?auth-userid=111111=0&auth-password=abcxyz&domain-name=" class="domainsearch">
                    <fieldset>
                    <p><input type="text" id="dsearch" id="RegsiterDomainInput" value="www." class="light" /></p>
                    <p class="avail">Register .com, .co, .net, .org, .us, and more!</p>
                    <label class="print">Search</label>
                    <input type="submit" id="dsubmit" OnClick="doSubmitRegisterDomain();" value="" />
                    </fieldset>
                </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:43:09.623

你必须进行服务器端调用。当您通过表单打开网址时，每个人都可以看到密码。

您需要的是一种服务器端编程语言，例如：PHP Java (Servlets)

有了这个，您必须创建一个请求，加载 url 并解码答案。

# python - 如何更改python中父类函数返回的值

> ID：13303999
> 
> 赞同：0
> 
> 时间：2012-11-09T07:37:35.583
> 
> 标签：python, django

我有这个代码

```
class Mother:
        def getList()
            data['list'] = [2,3,4,5]
            data = json.dumps(data)
            return HttpResponse(data, mimetype='application/json', status=200)

class Child(Mother)
      def getList()
          ///////// 
```

在新函数中，我想获取列表并进行一些修改，例如减去其他列表并返回相同的 jsonresponse

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:39:44.940

您必须从响应返回部分中抽象出代码的列表生成部分。

Mother 的这段代码虽然不是完全无效的，但也不是可以工作的东西：

```
return HttpResponse(data, mimetype='application/json', status=200)
return list 
```

在第一个 return 语句之后，Python 不再执行该方法，因此第二个 return 将永远不会运行。

尝试像这样拆分它：

```
class Mother(object):
    def makeList(self)
        data['list'] = [2,3,4,5]
        data = json.dumps(data)
        return data

    def getList(self)
        data = self.makeList()
        return HttpResponse(data, mimetype='application/json', status=200)

class Child(Mother)
  def makeList(self)
      my_list = super(Child, self).makeList()
      # do something to it
      return my_list 
```

现在在 Mother 对象上有一个`makeList`方法，它构造实际的列表，并将`getList`其格式化为 HttpResponse 对象。

在 Child 中，`makeList`被覆盖，但首先从 Mother 调用版本。之后，您可以进行所需的任何修改，然后将其返回。当您调用`child.getList()`时，它将使用该新列表，然后将其呈现给 HttpResponse，因为它继承`getList`自 Mother。