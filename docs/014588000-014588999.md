# StackOverflow 问答 14588000-14588999

# android - Android 高级可滚动视图，如 MapView

> ID：14588003
> 
> 赞同：0
> 
> 时间：2013-01-29T16:54:18.063
> 
> 标签：android

类似于此图片的可滚动视图：

[http://s13.postimage.org/7eqznyzo7/advancedscroll.png](http://s13.postimage.org/7eqznyzo7/advancedscroll.png)

Android中有没有可以像MapView一样滚动的视图？我需要在该视图中添加一个 ImageView。

我试过[这个](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)，但它没有用。我尝试添加 ScrollView+Horizo​​ntal，但我得到了相同的结果。

# php - 使用 Ajax 发布表单数据，但发布数据在服务器上被截断

> ID：14588008
> 
> 赞同：0
> 
> 时间：2013-01-29T16:54:25.757
> 
> 标签：php, forms, jquery, post

我正在发送带有 2k+ 参数的表单数据，但服务器只收到不到一半的数据。

```
$.ajax({
    url: 'inner.php?option=param',
    type: 'POST',
    data: $('#form').serialize(),
    dataType: "text",
    success: function(data) {
        //success action
    },
    error:function (xhr, ajaxOptions){
        //error action
    }  
}); 
```

Ajax 发布的一些参数是-

```
1190583_1306134[]   1
1226739_1343934[] 
```

我的应用程序是用 PHP 编写的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T21:08:10.093

只是在完全相同的事情上浪费了 2 小时 - php 后端中的部分 $_POST 数据（~3500 中的~1000）。

在 apache 日志中找到了这个：

`Warning: Unknown: Input variables exceeded 1000\. To increase the limit change max_input_vars in php.ini. in Unknown on line 0, referer: http://app1.local/full_path`

这足以`max_input_vars`在 php.ini 中取消注释，将其更改为 10000 并重新启动 apache。在那之后一切都在工作；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:55:03.967

我认为您不需要发布*空元素*。

替换数据：`$('#form').serialize()`

有数据：`$('#form :input[value!='']').serialize()`。

希望它对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T13:43:01.810

我有同样的问题。我不知道为什么，但是 $.ajax trucantes 将数据作为字符串传递。

为了解决这个问题，请改用对象数据。

例如

```
$data=$('form').serialize();
$data=JSON.parse('{"' + decodeURI($data.replace(/&/g, "\",\"").replace(/=/g,"\":\"")) + '"}');
$.ajax({
       url:$url,
       data:$data,
       ...
}); 
```

希望这会有所帮助；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-13T05:47:56.687

对于任何发现错误**Request has been truncated** when using direct form Pickup via **data: new FormData(this)** on the *Firefox debuger-console*的任何人，整个数据实际上可能已经发布并且错误似乎是错误的。我不得不花了几个小时才意识到*谷歌浏览*器没有报告错误，并且在实际检查发布的图像时，它实际上正在上传。

顺便说一句，这样的直接表单拾取不需要**序列化**，甚至可以上传图像。

# php - MVC 和依赖注入，强制使用单例控制器？

> ID：14588011
> 
> 赞同：3
> 
> 时间：2013-01-29T16:54:31.357
> 
> 标签：php, model-view-controller, dependency-injection, singleton, inversion-of-control

我正在构建一个根据 MVC 原则运行并利用依赖注入的 PHP 框架。我想我的前控制器部分已关闭；有一个工作路由器实例化一个控制器实例并根据请求的 URI 调用适当的操作。

接下来是依赖注入。我想实现一个使用反射解决依赖关系的容器。在这样做时，我认为我的控制器遇到了问题。

有许多我称之为“系统依赖项”的东西需要可用于派生的控制器类。我实际上还没有创建所有这些依赖项，但控制器可以访问诸如 InputProvider 之类的服务（封装 get/post 参数或命令行参数），也许还有输出依赖项，这似乎是明智的。理想情况下，我会使用框架的 Container 将这些依赖项注入到控制器的构造函数中——但这是我遇到问题的地方。

如果我对控制器中的系统依赖项使用构造函数注入，那么如果派生控制器实现自己的构造函数，我将强制派生控制器管理基本控制器的依赖项。这似乎不是最用户友好的。另一种选择是对系统依赖项使用 setter 注入，但如果派生控制器在其构造函数中需要这些系统依赖项，则它们将无法访问这些系统依赖项。

我看到的唯一能提供两全其美的解决方案是让我的控制器成为单例。他们有一个私有构造函数，所以我可以安全地使用 setter 注入，而不必担心派生类的构造函数。相反，会有一个可覆盖的 initialize() 方法（假设我让方法注入以某种方式工作），它基本上履行了构造函数的角色（例如，派生控制器的初始化程序）。这样，构造函数注入被 initialize() 方法中的方法注入所取代，其中所有系统依赖项都可用，而无需派生控制器来管理它们。

但是，快速的谷歌搜索似乎一致认为单例控制器是不好的做法。我非常不确定如何进行。我可能对此进行了过度设计，但除了希望我的应用程序能够面向未来和可维护之外，我还认为它是应用最佳实践的一个小练习，所以我想“正确”地做事。
我认为这种情况下的最佳实践是将管理所需系统依赖项的责任传递给派生控制器。如果派生控制器确实需要它，则可能只应实例化依赖项。如果派生控制器可能永远不会使用它，为什么还要在基本控制器中注入 InputProvider？但与此同时，我不断回归用户友好性，`$this->input`成员可用，例如在像 CodeIgniter 这样的框架中。

我非常感谢对我的困境所做的任何和所有贡献。我也为文字墙道歉，但我想不出任何代码示例可以让解释工作变得更容易，因为现在对我来说这一切都太抽象了！

真诚的，
一个严重撕裂的个体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:28:46.213

几种解决方案是可能的：

*   禁止控制器使用`__construct()`：将其设为~~私有~~public final，并使控制器覆盖类似的东西`init()`并从构造函数中调用它。然后构造函数将注入所有依赖项（反射？其他东西？），以便它们都准备好在`init()`.

*   您可以使用现有的 DI 库，如[PHP-DI](http://mnapoli.github.com/PHP-DI/)（免责声明：我致力于此），它允许您定义依赖项，但在构造函数中可以使用它们（神奇的是，是的）。

像这样的东西：

```
<?php
use DI\Annotations\Inject;

class FooController {
    /**
     * @Inject
     * @var Bar
     */
    private $bar;

    public function __construct() {
        // The dependency is already injected
        $this->bar->sayHello();
    }

    public function setBar(Bar $bar) {
        return $this->bar = $bar;
    }
} 
```

例如，这就是我使用 Zend Framework 1 的方式。我不能使用构造函数，所以我注入属性。这是[ZF1 集成项目](https://github.com/mnapoli/PHP-DI-ZF1)。

# hibernate - 无法让@Transactional 和 Hibernate 4 一起工作

> ID：14588012
> 
> 赞同：1
> 
> 时间：2013-01-29T16:54:32.413
> 
> 标签：hibernate, spring-transactions

我试图让 Hibernate 4 和 Spring Transactions 一起玩。在这一点上，我只是想获得一个有效的 Hibernate 设置。

这是调用的方法。当我调用它时，我得到

```
"org.hibernate.HibernateException: createQuery is not valid without active transaction"

@Autowired
SessionFactory sessionFactory;

@Transactional
public SecurityUserDO findSecurityUser(String email)
{
    Session session = sessionFactory.getCurrentSession();

    Query query = session.createQuery( "from SecurityUserDO where email = :email" );
    query.setString( "email", email );
    return (SecurityUserDO) query.uniqueResult();
} 
```

这是配置：

```
<!-- use annotations to find beans in this package -->
<context:annotation-config/>
<context:component-scan base-package="com.jelli.phoenix.model" />

<!--  Default session factory. Requires a dataSource bean to be defined in another config.
This works with a embedded data source for integration test setup. For real deployment
the datasource should be a c3p0 pool. -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean" autowire="byName"
     depends-on="dataSource">
    <property name="configLocation">    
        <value>
            classpath:hibernate.cfg.xml
        </value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.current_session_context_class">thread</prop>

            <!-- Database connection settings --> 
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>

            <!-- Caching -->
            <prop key="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
            <prop key="hibernate.cache.use_second_level_cache">false</prop>
            <prop key="hibernate.cache.use_query_cache">false</prop>

            <!-- Performance Settings --> 
            <prop key="hibernate.jdbc.batch_versioned_data">true</prop>
            <prop key="hibernate.jdbc.use_streams_for_binary">true</prop>
            <prop key="hibernate.max_fetch_depth">1</prop>

            <!-- When SQL is logged, pretty-print it --> 
            <prop key="hibernate.format_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"></property>
</bean>

<!-- Use @Transaction annotations for managing transactions  -->    
<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/> 
```

数据源在另一个文件中指定。

我已经阅读了我能找到的每一篇文章。有几个说要删除

```
"&lt;prop key="hibernate.current_session_context_class"&gt;thread&lt;/prop&gt;", 
```

但这会导致`getCurrentSession()`失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:33:43.620

回答我自己的问题：

正如许多其他地方所概述的那样，问题是我有：

<prop key="hibernate.current_session_context_class">线程</prop>

这会禁用 Spring Transactions，但会在 SessionFactory.getCurrentSession() 不再起作用时产生问题。我的解决方法是编写一个实用程序类来调用 SessionFactory.openSession() 并将会话保存在 ThreadLocal 中。

我不得不说我真的不明白为什么 Spring Transactions 拒绝使用 Hibernate 的基于线程的会话上下文。

# pdf - 如何在树结构中制作 pdf 图层（可选内容组）

> ID：14588013
> 
> 赞同：3
> 
> 时间：2013-01-29T16:54:34.860
> 
> 标签：pdf, layer, ocg

我不久前发布了一个关于如何在 pdf 中使用可选内容组的问题。但现在我有一个新问题。如何使这些可选内容组以树状结构出现。

例如。我有 4 个不同的层。这些层都是OCG层。3 层是文本标签，1 层有 veccotr 图形。所以我希望它显示为：

```
Alllayers
   ---labels
       --layer1
       --layer2
       --layer3
   ---layer4 
```

我以 pdf 文档为例 ![在此处输入图像描述](../Images/4782dc5181421f8b27ba2f9cdef08ae4.png)

这是中文，中文字符是图层的名称。就是这个意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:10:44.953

这个问题的答案将取决于您使用哪个 pdf 库来生成文件。通常，您需要在可选内容配置字典中生成一个包含*Order 数组*的文件，该字典表示您要显示的树。

来自[PDF 参考文档](http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf)：

**键：**顺序
**类型：**数组
**说明：（**可选）一个数组，指定在符合标准的阅读器用户界面中显示可选内容组的顺序。数组元素可以包括以下对象： -
可选的内容组字典，其名称条目应由符合条件的阅读器显示在用户界面中。
- 可选内容组的数组，可由符合要求的阅读器以树形或大纲结构显示。每个嵌套数组可以选择将文本字符串作为其第一个元素，以用作符合标准的阅读器用户界面中的不可选择标签。

# iphone - 使用推送通知调用函数

> ID：14588020
> 
> 赞同：1
> 
> 时间：2013-01-29T16:54:58.877
> 
> 标签：iphone, objective-c

我为我的 iPhone 应用程序制作了自己的推送通知服务器。我正在向客户端设备发送不同的推送通知。现在有了一个特殊的通知，我想在 appDelegate 或任何地方调用一个特定的函数。

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:16:24.597

您不能指定要直接调用的函数

当应用程序启动时，`-(BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`被调用并通过选项下的注释`UIApplicationLaunchOptionsRemoteNotificationKey`

when the app is running, you have `application:didReceiveRemoteNotification:`

* * *

you could pass the NAME of a method to call with the notification! so:

```
...
NSString *methodName = [notificationUserInfo objectForKey:@"methodName"];
[self performSelector:NSSelectorFromString(methodName)];
... 
```

the server side JSON would contain the methodName key: as seen here we can Include all we like [APNS JSON PAYLOAD - more arguments](https://stackoverflow.com/questions/5954882/apns-json-payload-more-arguments)

```
{"aps":{"alert":"APP_NAME': BLA_BLA_BLA","sound":"default"}, "methodName":"xy"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:01:43.060

当用户通过通知启动应用程序时，它可能有不同的场景：

它没有启动，然后应用程序以默认方式启动，您可以通过以下方式处理通知：

```
-(BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    UILocalNotification *remoteNotif =
        [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if (remoteNotif) {
        //handle remote notification
    }
    ....
} 
```

如果应用程序在后台或前台，则调用委托方法

```
- application:didReceiveRemoteNotification: {
    if (application.applicationState == UIApplicationStateActive){
        //application was in foreground
    } else if (application.applicationState == UIApplicationStateInactive){
        //application was in background
    }
} 
```

此外，如果应用程序在前台 - 系统不显示警报，不要更改徽章图标或播放声音 - 您应该完全自己处理通知

# ios - iOS：loadView 的推荐模式

> ID：14588021
> 
> 赞同：2
> 
> 时间：2013-01-29T16:54:59.000
> 
> 标签：ios, uiview, uiviewcontroller, loadview

如果我在 UIViewController 中有一个*复杂*的视图层次结构，那么何时将主视图分解到它自己的类中是合适的，即使它不能在其他地方重用？如果我要这样做，该视图上的按钮的正确事件处理方法是什么 - addTarget 直接添加到按钮属性或通过视图类委托？

我与一位同事就我们是否应该始终创建一个单独的视图类进行了长时间的辩论。

（为了讨论的目的，让我们假设我们要不惜一切代价避免使用 NIB 文件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T14:44:37.637

MVC 应该始终保持控制器小而干净。我要求我的团队始终在逻辑上将复杂视图分成小视图。

至于添加控件，请始终尝试更简单的方法。必要时使用委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:45:05.127

您可以为一个视图控制器创建单独的视图。如果要根据特定条件加载特定视图，则可以使用一种自定义 init 方法将视图加载到给定的视图控制器

```
- (id)initWithView:(UIview *)view {

self = [super init];

if(self) {

    [self setView:view];
}

return self; 
```

}

如果您在视图中有不同的按钮，您可以在该视图本身中编写按钮操作方法。为了将这些操作传递给视图控制器，您可以在视图中编写协议并设置视图控制器实例以在视图控制器中委托和实现这些协议方法。为了区分动作，您可以为每个按钮设置标签，并据此在视图控制器中执行适当的动作。

# mongodb - MongoDB toLowerCase()

> ID：14588022
> 
> 赞同：2
> 
> 时间：2013-01-29T16:55:00.883
> 
> 标签：mongodb, mongo-shell

我有一个名为 Profiles 的集合，其中包含一个名为 emails 的数组。

我想将数组中的所有电子邮件字符串更改为小写。

```
db.Profiles.update({"emails":/@/i}, {$set: {"emails" : emails.toLowerCase()}}}) 
```

错误：

1 月 29 日星期二 16:52:28 SyntaxError: missing ) after argument list (shell):1

我还发现了这个：

```
db.Profiles.find().forEach(
  function(e) {
    e.emails = e.emails.toLowerCase();
    db.Profiles.save(e);
  }
) 
```

错误：

1 月 29 日星期二 16:51:41 类型错误：e.emails.toLowerCase 不是函数（shell）：3

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:03:34.067

您需要将 emails 数组中的每个字符串都小写。string[] 中没有 toLowerCase 函数。

例子：

```
db.Profiles.find().forEach(
   function(e) {
      for(var i = 0; i < e.emails.length; i++){ 
         e.emails[i] = e.emails[i].toLowerCase(); 
      }
      db.Profiles.save(e);  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T23:16:14.793

我找到了一种更简单快捷的方法

```
db.Profiles.find({email : { $exists: true}}).forEach(
 function(e) {
   e.email = e.email.toLowerCase();
    db.Profiles.save(e);
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T20:27:48.693

```
db.collectionname.find({ "Key_name": {$ne:null} }).forEach(function(doc) 
{
    db.collectionname.update(
        { _id: doc._id },
        { "$set": { "Key_name": doc.Key_name.toLowerCase() } }
    );
}); 
```

# android - Android 调试和发布 APK 渲染视图不同，ProGuard 未启用

> ID：14588024
> 
> 赞同：1
> 
> 时间：2013-01-29T16:55:03.097
> 
> 标签：android, debugging, views, release, proguard

我的 project.properties 没有启用 ProGuard。当我运行签名的发布 APK 时，`SurfaceView`透明活动中的 a 与底层内容（不需要）组合在一起。但是，当在调试模式下从 Eclipse 运行时，`SurfaceView`它不会与底层内容（所需的）合成。

如果没有运行默认的 ProGuard 配置，我对我的调试和发布版本可能有什么不同的想法感到新鲜。如果不是 ProGuard，那是什么？

# java - 这是 Swing 中 MVC 的正确实现吗？

> ID：14588027
> 
> 赞同：0
> 
> 时间：2013-01-29T16:55:07.190
> 
> 标签：java, swing, model-view-controller

我已经阅读了有关 MVC 的信息，但对如何使用 Swing 在 Java 中实现该概念存有疑问。这就是我想要的：

模型： `ListOfThings`包含一个`Collection`对象`Thing`。

控制器： `Controller`实例化`ListOfThings`并使用“添加”方法填充它（在内部创建一个新的`Thing`并将其添加到`Collection`）

视图：一个 Swing 接口，`ListOfThingsPanel`其中包含`ThingPanel`表示模型的组件。两者都扩展`JPanel`。`ThingPanel`包含各种组件，用于显示`Thing`它所链接的数据。它还有一个按钮，可以在列表中添加一个新的（空的）东西。click 事件调用`Controller`'s`addThing()`方法，该方法要求在其列表`ListOfThings`中添加一个新的。有一个事件/侦听器系统并侦听它以了解何时应该刷新视图。`Thing``ListOfThings``ListOfThingsPanel`

我这样做是否正确地遵循了 MVC 概念？

**更新：** 我仍在学习 Java，但我有编码经验，并且更愿意学习理论并在使用预制框架之前以自己的方式尝试它。虽然我知道 Swing 实现了 MVC 模式，但我已经阅读了它以特定方式（视图和控制器相结合）实现它，这可能不是最好的，并且不适用于其他情况。在我确定“Swing MVC”与“MVC”没有区别之前，我有点谨慎，或者这些差异不会影响我对基本思想的理解。

对我来说重要的一件事是学习真正将模型与视图分开，以允许我最终创建各种类型的各种视图（例如 Swing 以及控制台或更新到 JavaFX）这就是为什么我想避免任何事情在视图部分本身之外摆动特定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:19:57.243

虽然 Swing 框架已经实现了一种形式的 MVC（显式模型；JXyz 和 UI 类 = 控制器和视图），但这种严格的分离很少用于应用程序级别，而且看起来很奇怪。

首先，我建议遵循以下设计：

*   使用 POJO 实现客户端业务逻辑
*   在需要时使用自定义 Swing 模型（ListModel、TableModel）包装 POJO
*   使用 GUI builder 设计 GUI
*   使用 Mediator 模式来监听事件（JPanel 的一个自定义子类监听其子级的事件并更新其他子级或在需要时触发自己的自定义事件）

如果您想更进一步，请使用诸如 NetBeans 平台之类的 RCP（非常推荐）。

**编辑：**

这是在 Swing 中解释 MVC 的文章：

[http://www.oracle.com/technetwork/java/architecture-142923.html](http://www.oracle.com/technetwork/java/architecture-142923.html)

# database - Oracle ALL_UPDATABLE_COLUMNS 内容

> ID：14588028
> 
> 赞同：1
> 
> 时间：2013-01-29T16:55:11.400
> 
> 标签：database, oracle, oracle11g, oracle10g

我想了解Oracle系统表ALL_UPDATABLE_COLUMNS的内容。[文件](http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_2114.htm)说_

> ALL_UPDATABLE_COLUMNS 描述了连接视图中的所有列，这些列可由当前用户更新，但需要适当的权限。

我了解连接视图中的某些列如何无法更新，但令我惊讶的是，从该表中选择我发现常规表及其列也列在此处。当常规表的特定列不可更新时，是否存在任何情况？（假设我拥有表级别的更新权限）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:35:45.240

在某些情况下，表的列是不可更新的。例如，如果我创建了一个虚拟列（尽管这仅从 11.1 开始可用），我无法更新该列中的数据

```
SQL> ed
Wrote file afiedt.buf

  1  create table foo (
  2    col1 number,
  3    col2 number generated always as (round(col1,2)) virtual
  4* )
SQL> /

Table created.

SQL> insert into foo( col1 ) values( 1.77665 );

1 row created.

SQL> select * from foo;

      COL1       COL2
---------- ----------
   1.77665       1.78

SQL> update foo set col2 = 2;
update foo set col2 = 2
       *
ERROR at line 1:
ORA-54017: UPDATE operation disallowed on virtual columns 
```

但有趣的是，`all_updatable_columns`错误地表明我可以更新虚拟列

```
SQL> ed
Wrote file afiedt.buf

  1  select column_name, updatable, insertable, deletable
  2    from all_updatable_columns
  3   where owner = 'SCOTT'
  4*    and table_name = 'FOO'
SQL> /

COLUMN_NAME                    UPD INS DEL
------------------------------ --- --- ---
COL1                           YES YES YES
COL2                           YES YES YES 
```

如果我们将自己限制在 Oracle 10g（根据标签），我不相信有办法在无法更新的表中定义列。您可以将整个表放在只读表空间中，这将阻止您更新任何列。但我不希望这会反映在`all_updatable_columns`.

# ios - 如何升级 iOS Core Data 模型和数据

> ID：14588031
> 
> 赞同：2
> 
> 时间：2013-01-29T16:55:20.187
> 
> 标签：ios, core-data, migration

我有一个使用 Core Data（后端的 SQLite）的 iOS 应用程序。它只有一个实体，“项目”。该应用程序捆绑了一个 SQLite 文件，其中预先添加了数百个项目，因此当用户从 App Store 下载该应用程序时，它已经拥有数据。

唯一的实体具有`BOOL favorite`用户可以更改的属性，当然，用于检查项目是否在用户最喜欢的项目中。

我计划发布应用程序的更新，其中包含应用程序包中**预建**的更多项目（一个新的 SQLite 文件），但我想**保留用户的收藏夹**。同样，在这个版本中，我的核心数据模型将进行一些修改（我需要在“项目”实体中添加一些新属性）。新的项目集是旧项目的超集（旧版本应用程序中的项目**应**始终在新版本中）。

我一直在为此苦苦挣扎，但找不到解决方案。我能够升级数据模型，在我的实体中引入新属性，同时保持用户的最爱（执行所谓的*轻量级迁移*，但是我无法合并新旧项目。另一方面，我m 能够获得新的预添加项目，但随后与收藏相关的数据被丢弃。

有什么提示吗？谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:07:04.960

我终于设法解决了这个问题。

我的应用程序委托中有两个 NSPersistentStoreCoordinators、两个 NSManagedObjectContexts 和两个 NSManagedObjectModels：一组用于应用程序（更新后的），另一组指向旧商店。在我的应用程序委托`didFinishLaunchingWithOptions:`方法中，我从旧商店加载所有用户的收藏夹并将它们保存到新商店中。这是我在应用程序中唯一接触旧商店的地方。

总之谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:03:24.237

我建议在其中创建第二个数据库，其中包含您的新内容，但没有收藏夹。然后从旧数据库中提取收藏夹并将它们插入到新数据库中。删除旧数据库并替换为新数据库。这似乎是最直接的解决方案。对于这些情况，Core Data 中可能内置了一些功能，但这可能更容易。

# node.js - 猫鼬密码哈希

> ID：14588032
> 
> 赞同：58
> 
> 时间：2013-01-29T16:55:21.727
> 
> 标签：node.js, mongodb, mongoose

我正在寻找一种使用猫鼬将帐户保存到 MongoDB 的好方法。

我的问题是：密码是异步散列的。设置器不会在这里工作，因为它只能同步工作。

我想到了两种方法：

*   创建模型的实例并将其保存在哈希函数的回调中。

*   在“保存”上创建预挂钩

这个问题有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-01-30T01:48:29.013

mongodb 博客有一篇优秀的文章详细介绍了如何实现用户身份验证。

[http://blog.mongodb.org/post/32866457221/password-authentication-with-mongoose-part-1](http://blog.mongodb.org/post/32866457221/password-authentication-with-mongoose-part-1)

以下内容直接从上面的链接复制：

## 用户模型

```
var mongoose = require('mongoose'),
    Schema = mongoose.Schema,
    bcrypt = require('bcrypt'),
    SALT_WORK_FACTOR = 10;

var UserSchema = new Schema({
    username: { type: String, required: true, index: { unique: true } },
    password: { type: String, required: true }
});

UserSchema.pre('save', function(next) {
    var user = this;

    // only hash the password if it has been modified (or is new)
    if (!user.isModified('password')) return next();

    // generate a salt
    bcrypt.genSalt(SALT_WORK_FACTOR, function(err, salt) {
        if (err) return next(err);

        // hash the password using our new salt
        bcrypt.hash(user.password, salt, function(err, hash) {
            if (err) return next(err);
            // override the cleartext password with the hashed one
            user.password = hash;
            next();
        });
    });
});

UserSchema.methods.comparePassword = function(candidatePassword, cb) {
    bcrypt.compare(candidatePassword, this.password, function(err, isMatch) {
        if (err) return cb(err);
        cb(null, isMatch);
    });
};

module.exports = mongoose.model('User', UserSchema); 
```

## 用法

```
var mongoose = require(mongoose),
    User = require('./user-model');

var connStr = 'mongodb://localhost:27017/mongoose-bcrypt-test';
mongoose.connect(connStr, function(err) {
    if (err) throw err;
    console.log('Successfully connected to MongoDB');
});

// create a user a new user
var testUser = new User({
    username: 'jmar777',
    password: 'Password123'
});

// save the user to database
testUser.save(function(err) {
    if (err) throw err;
});

// fetch the user and test password verification
User.findOne({ username: 'jmar777' }, function(err, user) {
    if (err) throw err;

    // test a matching password
    user.comparePassword('Password123', function(err, isMatch) {
        if (err) throw err;
        console.log('Password123:', isMatch); // -&gt; Password123: true
    });

    // test a failing password
    user.comparePassword('123Password', function(err, isMatch) {
        if (err) throw err;
        console.log('123Password:', isMatch); // -&gt; 123Password: false
    });
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-11-22T13:24:51.013

对于那些愿意使用 ES6+ 语法的人可以使用这个 -

```
const bcrypt = require('bcryptjs');
const mongoose = require('mongoose');
const { isEmail } = require('validator');

const { Schema } = mongoose;
const SALT_WORK_FACTOR = 10;

const schema = new Schema({
  email: {
    type: String,
    required: true,
    validate: [isEmail, 'invalid email'],
    createIndexes: { unique: true },
  },
  password: { type: String, required: true },
});

schema.pre('save', async function save(next) {
  if (!this.isModified('password')) return next();
  try {
    const salt = await bcrypt.genSalt(SALT_WORK_FACTOR);
    this.password = await bcrypt.hash(this.password, salt);
    return next();
  } catch (err) {
    return next(err);
  }
});

schema.methods.validatePassword = async function validatePassword(data) {
  return bcrypt.compare(data, this.password);
};

const Model = mongoose.model('User', schema);

module.exports = Model; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-07-01T08:23:50.137

**TL;DR - 打字稿解决方案**

当我在寻找相同的解决方案但使用打字稿时，我来到了这里。因此，对于任何对上述问题的 TS 解决方案感兴趣的人，这里有一个我最终使用的示例。

进口&&内容：

```
import mongoose, { Document, Schema, HookNextFunction } from 'mongoose';
import bcrypt from 'bcryptjs';

const HASH_ROUNDS = 10; 
```

简单的用户界面和模式定义：

```
export interface IUser extends Document {
    name: string;
    email: string;
    password: string;
    validatePassword(password: string): boolean;
}

const userSchema = new Schema({
    name: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true },
}); 
```

用户模式预保存挂钩实现

```
userSchema.pre('save', async function (next: HookNextFunction) {
    // here we need to retype 'this' because by default it is 
    // of type Document from which the 'IUser' interface is inheriting 
    // but the Document does not know about our password property
    const thisObj = this as IUser;

    if (!this.isModified('password')) {
        return next();
    }

    try {
        const salt = await bcrypt.genSalt(HASH_ROUNDS);
        thisObj.password = await bcrypt.hash(thisObj.password, salt);
        return next();
    } catch (e) {
        return next(e);
    }
}); 
```

密码验证方法

```
userSchema.methods.validatePassword = async function (pass: string) {
    return bcrypt.compare(pass, this.password);
}; 
```

和默认导出

```
export default mongoose.model<IUser>('User', userSchema); 
```

注意：不要忘记安装类型包（`@types/mongoose`，`@types/bcryptjs`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-31T07:57:20.133

我认为这是用户Mongoose和bcrypt的好方法！</p>

### 用户模型

```
/**
 * Module dependences
*/

const mongoose = require('mongoose');
const Schema = mongoose.Schema;
const bcrypt = require('bcrypt');
const SALT_WORK_FACTOR = 10;

// define User Schema
const UserSchema = new Schema({
    username: {
        type: String,
        unique: true,
        index: {
            unique: true
        }
    },
    hashed_password: {
        type: String,
        default: ''
    }
});

// Virtuals
UserSchema
    .virtual('password')
    // set methods
    .set(function (password) {
        this._password = password;
    });

UserSchema.pre("save", function (next) {
    // store reference
    const user = this;
    if (user._password === undefined) {
        return next();
    }
    bcrypt.genSalt(SALT_WORK_FACTOR, function (err, salt) {
        if (err) console.log(err);
        // hash the password using our new salt
        bcrypt.hash(user._password, salt, function (err, hash) {
            if (err) console.log(err);
            user.hashed_password = hash;
            next();
        });
    });
});

/**
 * Methods
*/
UserSchema.methods = {
    comparePassword: function(candidatePassword, cb) {
        bcrypt.compare(candidatePassword, this.password, function(err, isMatch) {
            if (err) return cb(err);
            cb(null, isMatch);
        });
    };
}

module.exports = mongoose.model('User', UserSchema); 
```

### 用法

```
signup: (req, res) => {
    let newUser = new User({
        username: req.body.username,
        password: req.body.password
    });
    // save user
    newUser.save((err, user) => {
        if (err) throw err;
        res.json(user);
    });
} 
```

### 结果

[结果](https://i.stack.imgur.com/RVdO6.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-11T16:42:59.443

Mongoose 官方的解决方案要求在使用 verifyPass 方法之前先保存模型，这会造成混淆。以下内容对您有用吗？（我使用的是 scrypt 而不是 bcrypt）。

```
userSchema.virtual('pass').set(function(password) {
    this._password = password;
});

userSchema.pre('save', function(next) {
    if (this._password === undefined)
        return next();

    var pwBuf = new Buffer(this._password);
    var params = scrypt.params(0.1);
    scrypt.hash(pwBuf, params, function(err, hash) {
        if (err)
            return next(err);
        this.pwHash = hash;
        next();
    });
});

userSchema.methods.verifyPass = function(password, cb) {
    if (this._password !== undefined)
        return cb(null, this._password === password);

    var pwBuf = new Buffer(password);
    scrypt.verify(this.pwHash, pwBuf, function(err, isMatch) {
        return cb(null, !err && isMatch);
    });
}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-25T15:55:03.010

```
const mongoose = require('mongoose');
var bcrypt = require('bcrypt-nodejs');
SALT_WORK_FACTOR = 10;

const userDataModal = mongoose.Schema({
    username: {
        type: String,
        required : true,
        unique:true
    },
    password: {
        type: String,
        required : true
    }

});

userDataModal.pre('save', function(next) {
    var user = this;

    // only hash the password if it has been modified (or is new)
    if (!user.isModified('password')) return next();

    // generate a salt
    bcrypt.genSalt(SALT_WORK_FACTOR, function(err, salt) {
        if (err) return next(err);

        // hash the password using our new salt
        bcrypt.hash(user.password, salt, null, function(err, hash) {
            if (err) return next(err);

            // override the cleartext password with the hashed one
            user.password = hash;
            next();
        });
    });
});

userDataModal.methods.comparePassword = function(candidatePassword, cb) {
    bcrypt.compare(candidatePassword, this.password, function(err, isMatch) {
        if (err) return cb(err);
        cb(null, isMatch);
    });
};

// Users.index({ emaiId: "emaiId", fname : "fname", lname: "lname" });

const userDatamodal = module.exports = mongoose.model("usertemplates" , userDataModal)

//inserting document
     userDataModel.findOne({ username: reqData.username }).then(doc => {
            console.log(doc)
            if (doc == null) {
                let userDataMode = new userDataModel(reqData);
               // userDataMode.password = userDataMode.generateHash(reqData.password);
                userDataMode.save({new:true}).then(data=>{
                          let obj={
                              success:true,
                              message: "New user registered successfully",
                              data:data
                          }
                            resolve(obj)
                }).catch(err=>{
                                reject(err)
                })

            }
            else {
                resolve({
                    success: true,
                    docExists: true,
                    message: "already user registered",
                    data: doc
                }
                )
            }

        }).catch(err => {
            console.log(err)
            reject(err)
        })

//retriving and checking
      // test a matching password
                user.comparePassword(requestData.password, function(err, isMatch) {
                    if (err){ 

                        reject({
                            'status': 'Error',
                            'data': err
                        });

                        throw err;
                    } else  {
                        if(isMatch){

                            resolve({   
                                'status': true,
                                'data': user,
                                'loginStatus' : "successfully Login"
                            });

                            console.log('Password123:', isMatch); // -&gt; Password123: true

                        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-01T22:07:52.520

使用虚拟和实例方法的另一种方法：

```
/**
 * Virtuals
 */
schema.virtual('clean_password')
    .set(function(clean_password) {
        this._password = clean_password;
        this.password = this.encryptPassword(clean_password);
    })
    .get(function() {
        return this._password;
    });

schema.methods = {

    /**
     * Authenticate - check if the passwords are the same
     *
     * @param {String} plainText
     * @return {Boolean}
     * @api public
     */
    authenticate: function(plainPassword) {
        return bcrypt.compareSync(plainPassword, this.password);
    },

    /**
     * Encrypt password
     *
     * @param {String} password
     * @return {String}
     * @api public
     */
    encryptPassword: function(password) {
        if (!password)
            return '';

        return bcrypt.hashSync(password, 10);
    }
}; 
```

只需保存您的模型，虚拟就可以完成它的工作。

```
var user = {
    username: "admin",
    clean_password: "qwerty"
}

User.create(user, function(err,doc){}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-13T07:51:46.157

```
const bcrypt = require('bcrypt');

const saltRounds = 5;
const salt = bcrypt.genSaltSync(saltRounds);

module.exports = (password) => {
  return bcrypt.hashSync(password, salt);
}
```

```
const mongoose = require('mongoose')
const Schema = mongoose.Schema
const hashPassword = require('../helpers/hashPassword')

const userSchema = new Schema({
  name: String,
  email: {
    type: String,
    match: [/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/, `Please fill valid email address`],
    validate: {
      validator: function() {
        return new Promise((res, rej) =>{
          User.findOne({email: this.email, _id: {$ne: this._id}})
              .then(data => {
                  if(data) {
                      res(false)
                  } else {
                      res(true)
                  }
              })
              .catch(err => {
                  res(false)
              })
        })
      }, message: 'Email Already Taken'
    }
  },
  password: {
    type: String,
    required: [true, 'Password required']
  }
});

userSchema.pre('save', function (next) {
  if (this.password) {
      this.password = hashPassword(this.password)
  }
  next()
})

const User = mongoose.model('User', userSchema)

module.exports = User
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-29T18:40:46.593

经过一些研究我发现使用钩子会更好

[http://mongoosejs.com/docs/middleware.html](http://mongoosejs.com/docs/middleware.html)

它说：

用例：

异步默认值

我更喜欢这个解决方案，因为我可以封装它并确保一个帐户只能用密码保存。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-22T17:21:38.737

我用`.find({email})`而不是`.findOne({email}`）。

确保用于`.findOne(...)`获取用户。

例子：

```
const user = await <user>.findOne({ email }); 
```

# iphone - 子视图大小不正确？

> ID：14588034
> 
> 赞同：0
> 
> 时间：2013-01-29T16:55:23.393
> 
> 标签：iphone, ios, objective-c, xcode, ipad

首先让我说我不是 iOS 开发或 Objective-C 方面的专家。

我正在为当地慈善机构（它是一座教堂）制作一个应用程序，他们希望它支持轮换。

如果以纵向模式启动，该应用程序将按预期工作，我可以选择我的新子视图并且旋转它可以完美运行。

但是我需要它工作，以便它们可以随时旋转。主视图（启动时加载的）已经开箱即用；但我的子视图没有。

我在下面附上了 3 个屏幕截图来尝试解释我的意思。

这是它在纵向模式下的外观：

![肖像中的预期结果](../Images/b4f3362cc121f9f9037f5caba0a4dba6.png)

在风景中：

![横向尺寸错误](../Images/0c6cd19cc6bfb55b554030527f85f173.png)

回到纵向，我开始旋转应用程序：

![纵向尺寸错误](../Images/2931d048fce061e0925c05ea94e43a54.png)

如果有帮助，我会像这样添加子视图：

```
dailyPrayerView = [[DailyPrayerView alloc] initWithNibName:@"DailyPrayerView" bundle:nil];

[self.view addSubview:dailyPrayerView.view]; 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:58:42.103

检查 Interface Builder 中的自动调整大小掩码。它位于实用程序窗格的大小窗格中。您应该能够使其拉伸以适应屏幕，而不是保持不变的大小。

# ruby-on-rails - 如果尚未设置 cookie，则设置 cookie

> ID：14588039
> 
> 赞同：1
> 
> 时间：2013-01-29T16:55:40.960
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我怎么会用红宝石写这样的东西

```
 if( !cookies['isActive']){
    cookies['isActive'] = true
  } 
```

我正在考虑将其放入应用程序控制器中。或者也许有更好的方法。

如果还没有设置，我基本上想设置一个 cookie。它应该只在浏览器打开时存在。

然后在应用程序视图方面，我希望能够查看是否设置了该 cookie，如果没有设置，那么我希望能够运行一些脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:06:07.910

非常简单的运算符：`||=`.

```
cookies[:is_active] ||= true 
```

* * *

根据评论编辑：

在视图中阅读/使用它，例如：

```
<% if cookies[:is_active] %>
  You are active now
<% end %> 
```

# rebol - 将变量设置为当前脚本的文件名

> ID：14588040
> 
> 赞同：2
> 
> 时间：2013-01-29T16:55:41.617
> 
> 标签：rebol

如何将变量设置为当前正在执行的脚本的名称？例如在 VBS 中，它看起来像这样：`name = WScript.ScriptFullName`.

我尝试过类似的方法：`Script: system/options/script`然后我尝试将该变量打印到控制台，但它打印的是“脚本”而不是变量的值。

这样做的原因是我试图从脚本中读取：`text: read %Script`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:15:27.167

它应该只是：

```
Script: system/options/script
print Script 
```

如果要打印文件的内容，需要先读取，可以这样：

```
print read Script 
```

HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T00:21:46.547

如果您检查脚本对象，您将看到此详细信息

```
>> probe system/script
make object! [
    title: none
    header: none
    parent: none
    path: %/C/Rebol/
    args: none
    words: none
] 
```

所以你可以看到你真正想要的（我认为）是系统/脚本/标题，只要在脚本中提供

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T14:06:50.543

要设置的正确字段应该是 Rebol 程序头字段。您可以像这样设置它们

```
Rebol [
  title: 'myprogram
  file: %program
  content: true
]
probe system/script/header 
```

然后甚至不再需要阅读脚本，因为它已经在内容字段中。

# javascript - css 和 js 文件的缩小应该在构建步骤中还是手动完成？

> ID：14588043
> 
> 赞同：4
> 
> 时间：2013-01-29T16:55:45.140
> 
> 标签：javascript, css, minify

这里真的有两个问题。

1) 缩小应该手动完成还是作为构建的一部分完成？
2）缩小的文件是否应该受版本控制？

我正在尝试为我正在处理的当前项目定义前进的道路。我已经进行了一些速度评估，我相信我当前的站点只需添加一些压缩/缩小就可以有很大的性能改进。

这是基本设置

IBM Commerce 6.0
大量大型 js 文件（没有任何东西被缩小或压缩）
大量大型 css 文件（没有任何东西被缩小或压缩）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:38:21.913

> 缩小应该手动完成还是作为构建的一部分完成？

作为构建的一部分。这样你就不会忘记去做。在开发环境中通常不需要缩小代码，如果您发现需要调试仅在缩小代码中显示的问题，则可以手动构建。

您可以在登台服务器上测试缩小的代码。

> 缩小的文件应该受版本控制吗？

不是由您的源代码控制。如果您有历史建筑文物的档案，那么它们应该是其中的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:37:52.853

这一切都取决于。

有时根据配置设置动态完成此操作很有用。例如，如果你正在部署到一个测试环境，并且你已经缩小了你的 JS 并发现了一个只在那个环境中发生的错误，那么轻弹一个开关通常很方便，这样你的应用程序就可以开始提供未缩小的源文件以进行调试。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-29T17:21:13.967

你可以使用可以缩小和压缩 JS 和 CSS 的 smartoptimizer

并且可以缓存这个文件，直到文件没有变化。

[下载智能优化器](http://farhadi.ir/projects/smartoptimizer/)

该网站项目之一是关于使用 php 缩小和压缩 js 或 CSS。这个程序的优点是检测 js 和 css 然后缩小和压缩。如果 js 或 css 改变这个程序检测它并更新缩小和压缩文件

# python - TopLevelLookupException：找不到 uri 的模板

> ID：14588047
> 
> 赞同：1
> 
> 时间：2013-01-29T16:55:52.120
> 
> 标签：python, pyramid

当我想启动我的金字塔服务器时，它返回`TopLevelLookupException: Can not locate template for uri`错误。请解释一下问题出在哪里

```
from wsgiref.simple_server import make_server
from pyramid.config import Configurator
from pyramid.response import Response
from pyramid.view import view_config
import tweepy
import os

consumer_key=""
consumer_secret=""
access_key = ""
access_secret = "" 
here = os.path.dirname(os.path.abspath(__file__)) 
```

也许，问题出在这个“这里”的对象上。

```
def twitterfeed(request):
    auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
    auth.set_access_token(access_key, access_secret)
    api = tweepy.API(auth)
    statuses =  tweepy.Cursor(api.friends_timeline).items(20)
    data = Response('\n'.join([s.text.encode('utf8') for s in statuses]))
    print type(data)
    return {"data": data}

if __name__ == '__main__':
    settings = {}
    settings['reload_all'] = True
    settings['debug_all'] = True
    settings['mako.directories'] = os.path.join(here, 'templates')
    config = Configurator()
    config.add_view(twitterfeed, route_name='list', renderer='list.mako')
    config.add_route('list', '/')
    app = config.make_wsgi_app()
    server = make_server('0.0.0.0', 8000, app)
    server.serve_forever() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:49:59.270

感谢@swietyy，我的代码现在可以工作了

```
def twitterfeed(request):
   auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
   auth.set_access_token(access_key, access_secret)
   api = tweepy.API(auth)
   statuses =  tweepy.Cursor(api.friends_timeline).items(20)
   data = [s.text.encode('utf8') for s in statuses]
   return {"data": data}
#...
#...
#...
config = Configurator(settings=settings) 
```

# php - 同一服务器上的站点之间的 PHP 会话登录交叉

> ID：14588050
> 
> 赞同：5
> 
> 时间：2013-01-29T16:55:56.127
> 
> 标签：php, session, cross-domain

我有多个站点的 CentOS LAMP。我使用 PHP 会话变量登录到 wesites。我的问题是，如果您登录一个站点，您可以在同一服务器上打开另一个站点并且您将登录。这些站点是完全独立的，所以我希望它们必须分别登录。每个站点都有不同的用户数据库。

这是我在登录时填充的会话变量。

```
$_SESSION["username"] = "$username";
$_SESSION["user_id"] = "$user_id";
$_SESSION["act_type"] = "$act_type"; 
```

我创建了一个小样本，以便您可以重新创建问题

有 2 个单独的站点： /var/www/html/site1 /var/www/html/site2

每个站点有 2 个页面 index.php，secure.php 如果我登录一个，我可以在另一个站点上打开 secure.php。

***/var/www/html/site1/index.php***

```
<?php

session_start();

$user = 'jane';
$pass  = '654321';

if ( $user == $_POST[user] AND $pass == $_POST[pass] ) {

    $_SESSION[user] = $user;
    header("location: secure.php");
}
else {
    echo "Bad Login";
}

?>

<form name="form1" method="post" action="index.php">

    Username: <input name="user" type="text">
    <br />
    Password: <input name="pass" type="password">
    <br /><br />
    <input type="submit" name="Submit" value="Login">
</form> 
```

***/var/www/html/site1/secure.php***

```
<?php

session_start();

if ( !isset($_SESSION[user]) ) {

    header("location: index.php");
}

?>
Secure Page 
```

***/var/www/html/site2/index.php***

```
<?php

session_start();

$user = 'joe';
$pass  = '123456';

if ( $user == $_POST[user] AND $pass == $_POST[pass] ) {

    $_SESSION[user] = $user;
    header("location: secure.php");
}
else {
    echo "Bad Login";
}

?>

<form name="form1" method="post" action="index.php">

    Username: <input name="user" type="text">
    <br />
    Password: <input name="pass" type="password">
    <br /><br />
    <input type="submit" name="Submit" value="Login">
</form> 
```

***/var/www/html/site2/secure.php***

```
<?php

session_start();

if ( !isset($_SESSION[user]) ) {

    header("location: index.php");
}

?>
Secure Page 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-26T19:08:35.050

我和你的情况类似，两个站点在同一台服务器上并使用 IP（公司内部网）。有问题他们在哪里登录，如果你登出，也会互相破坏。我的解决方案是使用会话变量的前缀来表示各个站点。

**会话变量**

**站点 1**

```
$_SESSION["s1_username"] = $username;
$_SESSION["s1_user_id"] = $user_id;
$_SESSION["s1_act_type"] = $act_type; 
```

**站点 2**

```
$_SESSION["s2_username"] = $username;
$_SESSION["s2_user_id"] = $user_id;
$_SESSION["s2_act_type"] = $act_type; 
```

^这将使两个站点之间的登录信息分开，因此它们不会“流血”到另一个站点。但是当我们注销时呢？不会`session_destroy()`摆脱所有变量吗？这是我为此所做的：

**销毁会话/注销**

**站点 1**

```
foreach($_SESSION as $key => $value)
{
  if (strpos($key, 's1_') === 0)
  {
   unset($_SESSION[$key]);
  }
} 
```

**站点 2**

```
foreach($_SESSION as $key => $value)
{
  if (strpos($key, 's2_') === 0)
  {
   unset($_SESSION[$key]);
  }
} 
```

^这可以防止我的网站在您注销一个而不是另一个时破坏彼此的变量。

希望这可以帮助那里的人不要像我一样浪费6个小时！:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-09T10:03:50.497

你应该使用

```
session_name( 'site1' );
session_start(); 
```

您正在创建一个会话元组，例如`site1.user`覆盖*php.ini 的*default `PHPSESSID`。

在您的日志记录页面上调用它`index.php`， `session.php` `logout.php`。这是最常见的登录文件骨架，或者每次调用时`session_start()`，`session_name(<sess_name>)`都应该放在前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:58:22.557

我猜您在会话 cookie 设置之间存在冲突。您应该为每个站点使用单独的 php.ini 文件（如果可能的话）或在每个站点的入口点使用特定设置。看看[http://ar.php.net/manual/en/function.session-set-cookie-params.php](http://ar.php.net/manual/en/function.session-set-cookie-params.php)

# asp.net - 通过 http 和 html 上传文件所需的低级信息

> ID：14588052
> 
> 赞同：0
> 
> 时间：2013-01-29T16:56:02.447
> 
> 标签：asp.net, html, ajax, http

我一直在研究通过http上传文件的过程。我的问题是文件是如何通过 ajax 而不是通过整页回发上传的。我想知道文件是如何通过ajax传输的。我读 [了这篇](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)文章。提到的文章说，如果 FormData 不可用，则无法使用此方法。但我想知道是否有其他方法可以在不使用 iframe 方法的情况下使所有浏览器上的 ajax 文件上传工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:01:01.400

无需`FormData`您使用`iframe`. 或者，有一些库可以使用隐藏的闪光灯或银光来模拟功能。

# android - 我如何在列表视图中设置文本视图的标签值

> ID：14588054
> 
> 赞同：1
> 
> 时间：2013-01-29T16:56:08.547
> 
> 标签：android, listview, tags, textview

我有一个带有多列的列表视图，其中每一行都有几个文本视图。在每行中包括两个文本视图，带有`orientation="vertical"`.

在 xml 文件中，我可以设置每个 textview 的标签。然而，每个 textview 的这个标签在每一行中都是相等的。

如何设置每个文本视图的标签？id 也会出现同样的问题。第一排没问题。问题出在以下行中。

我放了一个带有示例的图像。

![在此处输入图像描述](../Images/216ee99e8b18331e642bd78bf0abad52.png)

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    ViewGroup rootView = (ViewGroup)inflater.inflate(R.layout.fragment_screen_slide_page, container,false);
    lv = (ListView)rootView.findViewById(android.R.id.list);

    ArrayList<HashMap<String, String>> mylistData =
            new ArrayList<HashMap<String, String>>();

    String[] columnTags = new String[] {"hour","col1", "col2", "col3","col4", "col5", "col6","col7", "col8", "col9","col10", "col11", "col12","col13","col14"};

    int[] columnIds = new int[] {R.id.tv_list_item1,R.id.tv_listRow_item1, R.id.tv_listRow_item2, R.id.tv_listRow_item3,R.id.tv_listRow_item4, R.id.tv_listRow_item5, R.id.tv_listRow_item6,R.id.tv_listRow_item7, R.id.tv_listRow_item8, R.id.tv_listRow_item9,R.id.tv_listRow_item10, R.id.tv_listRow_item11, R.id.tv_listRow_item12,R.id.tv_listRow_item13, R.id.tv_listRow_item14};
    for(int i=0; i<24; i++)
    {
       HashMap<String,String> map = new HashMap<String, String>();
        for(int j=0; j<15; j++)
         {
      if(j==0){
    map.put("hour", "0"+i+":00");
    if(i<10){
        map.put("hour", "0"+i+":00");   
    }
    else
        map.put("hour", i+":00");
}
else if(j>0){
    map.put(columnTags[j], "row”+i+”col"+j);
}
   }
   mylistData.add(map);
   }
    SimpleAdapter arrayAdapter =
        new SimpleAdapter(getActivity(), mylistData, R.layout.sechedule_list_row,
                      columnTags , columnIds);
    lv.setAdapter(arrayAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:07:46.370

这一个例子可以帮助你很多我认为[http://www.technotalkative.com/android-multi-column-listview/](http://www.technotalkative.com/android-multi-column-listview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:13:58.197

您必须创建自己的自定义适配器，然后在 getView 中为每个文本视图设置标签和 ID。

下面是一个如何使用getView [android的例子——自定义ListView，getView方法](https://stackoverflow.com/questions/14539356/android-custom-listview-getview-method)

# php - Onclick 事件更新 localhost 数据库

> ID：14588055
> 
> 赞同：0
> 
> 时间：2013-01-29T16:56:13.767
> 
> 标签：php, javascript, ajax, database, onclick

我有一个表格，表格有 5 行 8 列。此表代表音乐厅中的可用座位。单击提交按钮后，将调用一个javascript函数，目前是这样的：

```
 <script>
    function submit_tickets(form){
      var count=0;
      var booked_seats=new Array();
      var c = document.getElementById(form).getElementsByTagName('input');
      for (var i = 0; i < c.length; i++) {
        if (c[i].type == 'checkbox' && c[i].checked==true){
        booked_seats[count]=c[i].id;
        count++;
    //create an array with the booked seats' ID
    }
    }

//alert(booked_seats.length);
    } </script> 
```

调用此函数时，我希望同时根据预订的座位更新 localhost 数据库的表（包含所有 40 个座位 ID 的表）。我该怎么做，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:04:12.290

如果您愿意，我可以用本机 javascript 编写示例，但现在我将尝试使用 jQUery 来完成。

```
function submit_tickets(form){
    var seats=[];
    $(form).find("input:checked").each(function(){
        seats.push($(this).val());//i hope you do have a value for your input tags, and if not, then push $(this).attr('id') - but highly recommend you to follow w3c   

    });
    $.post("your/url/to/server",{seats:seats},function(data){
          console.log(data);//some info from server
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:04:12.953

我相信您需要使用 PHP 调用一个 php 文件，在该文件中完成数据库更新。您可能会考虑使用 jquery ajax，如[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - 如何管理生成的文件，使用 asp.net 保留多长时间

> ID：14588057
> 
> 赞同：1
> 
> 时间：2013-01-29T16:56:22.603
> 
> 标签：c#, asp.net

我有一个从模板生成 excel 文件的 Web 应用程序。

当新文件流式传输到客户端时，我删除了该文件。这在我的计算机上工作正常，但无论出于何种原因，当从另一台计算机访问网站时，文件在流式传输到客户端之前被删除，因此文件始终为空（0 字节）这是代码：

```
try
{
  Response.Clear();
  Response.ClearHeaders();
  Response.ContentType = "application/ms-excel";
  Response.AddHeader("content-disposition", "attachment;filename=" + newFN + ".xlsx");                            
  Response.TransmitFile(DestFile);
  Response.Flush();
  Response.End();
}
finally
{
  File.Delete(DestFile);
} 
```

为什么这在我的电脑上可以正常工作，而在另一台电脑上却不行？

我该怎么做才能删除生成的文件以及何时删除？我正在考虑像计划任务一样，按日期检查特定日期之前的所有文件，然后删除它们，但是还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:16:39.270

以下对我有用：

```
Response.Clear();
Response.ClearHeaders();
Response.ContentType = "application/ms-excel";
Response.AddHeader("content-disposition", "attachment;filename=" + newFN + ".xlsx");                            
Response.TransmitFile(DestFile);
Response.Flush();
File.Delete(DestFile);
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

`Response.BinaryWrite`但是如果文件正在动态生成，您应该考虑使用该方法。

# ios - UITapGestureRecognizer 在关闭 viewController 后导致崩溃

> ID：14588061
> 
> 赞同：2
> 
> 时间：2013-01-29T16:56:29.640
> 
> 标签：ios, objective-c, ipad

试图实现一个`UITapGestureRecognizer`表单模式视图控制器。如果用户在表单之外触摸，表单应该关闭，这样代码就可以正常工作。

问题是如果我手动关闭表单并尝试触摸任何观点，它仍然会尝试调用`UITapGestureRecognizer`方法和应用程序崩溃。

```
Error ::
    -[xxxxView handleTapBehind:]: message sent to deallocated instance

-(void)done
{
    [self.navigationController popViewControllerAnimated:YES];
        //send notification that folder has been created
        [[NSNotificationCenter defaultCenter] postNotificationName:@"refreshDetails" object:nil];
}
-(void)viewDidAppear:(BOOL)animated
{
    // gesture recognizer to cancel screen
    UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapBehind:)];
    [recognizer setNumberOfTapsRequired:1];
    recognizer.cancelsTouchesInView = NO; //So the user can still interact with controls in the modal view
    [self.view.window addGestureRecognizer:recognizer];

}

- (void)handleTapBehind:(UITapGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        CGPoint location = [sender locationInView:nil]; //Passing nil gives us coordinates in the window

        //Then we convert the tap's location into the local view's coordinate system, and test to see if it's in or outside. If outside, dismiss the view.

        if (![self.view pointInside:[self.view convertPoint:location fromView:self.view.window] withEvent:nil])
        {
            // Remove the recognizer first so it's view.window is valid.
            [self.view.window removeGestureRecognizer:sender];
            [self dismissModalViewControllerAnimated:YES];
        }
    }
} 
```

为什么`handleTapBehind:`在我关闭视图控制器后仍然调用？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:10:44.413

您将手势识别器添加到窗口：

```
[self.view.window addGestureRecognizer:recognizer]; 
```

并将目标设置为您的控制器；

因此，当您的控制器关闭时 - 它已被释放，但手势识别器仍然存在。当它触发时，它会尝试向您的控制器发送操作，而该控制器已经不存在。

因此，您应该将识别器添加到控制器的视图或在 viewWillDissaper 方法中将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:11:03.133

尝试使用手势识别器的委托方法，当您手动关闭 vc 并在 shouldReceiveTouch 中放置一个标志：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
   if(flag)
   {
      return NO;
   }
   return YES;
} 
```

不要忘记将委托设置为当前视图控制器。您现在也可以删除行 [self.view.window removeGestureRecognizer:sender];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T10:58:29.597

我想从@mikhail 的回答中添加代码

```
 (UITapGestureRecognizer *)senderTap

-(void)viewWillDisappear:(BOOL)animated{

     [self.view.window removeGestureRecognizer:senderTap];
} 
```

在我的代码中，当调用 ViewDidAppear 时，我在选择器方法中捕获 UITapGestureRecognizer (sender)。

# windows-8 - 我可以在不安装 Windows 8 的 2012 Express 的情况下开发 Windows 8 应用程序吗？

> ID：14588066
> 
> 赞同：1
> 
> 时间：2013-01-29T16:56:41.960
> 
> 标签：windows-8

> Microsoft 提供了两个旨在协同工作的免费工具，可帮助您开发、测试和部署 Windows 应用商店应用程序：适用于 Windows 8 的 Microsoft Visual Studio Express 2012 和适用于 Visual Studio 的 Blend。（这些工具需要 Windows 8。）

我的盒子里已经有太多的IDE了。其中之一是 Visual Studio 2012 Pro。如果我想开发 Windows 8 应用程序，特别是 HTML5 种类，我真的需要安装那个巨大的 SDK 以及适用于 Windows 8 的 Visual Studio Express 2012 吗？或者我可以只安装一些模板并添加一些 nuget 包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:58:38.787

您可以安装 Windows 8 SDK [http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)

# ios - UITapGestureRecognizer 为 locationInView 提供无效值：

> ID：14588067
> 
> 赞同：1
> 
> 时间：2013-01-29T16:56:49.183
> 
> 标签：ios

我已经找到了 locationInView 的问题：在 UITapGestureRecognizer 上总是给我纵向的 (0,-67) 和横向的 (0,268) 的 CGPoint。（如果我不将其转换为 UITapGestureRecognizer，我偶尔会在风景中得到 (0,180)。

这个问题在 iOS 5 Simulator 中不存在。它经常发生在 iOS 6 模拟器中，几乎 90% 的时间发生在 iOS 6 设备中。

我现在的猜测是手势识别器在调用动作方法时不再有效..但这没有意义，因为这意味着我们总是需要在委托方法中调用 locationInView:..

*细节：*

***我正在尝试做的事情：*** 识别 MKMapView 上的点击手势，隐藏该点以协调并将其显示为注释

***我做了什么：*** 在手势识别器的动作方法中..

```
CLLocationCoordinate2D coordinate = [self.mapView convertPoint:[(UITapGestureRecognizer *)sender locationInView:self.mapView] toCoordinateFromView:self.mapView]; 
```

我确实进行了自省以确保发件人确实是 UITapGestureRecognizer..

我也尝试过返回`YES`，`(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer`但这无济于事。

***应该发生什么：*** 坐标应该与地图上点击的点相对应。

***发生了什么：*** 坐标总是稍微偏左一点。

*更新：*

所以..我已经测试了所有的委托方法`<UIGestureRecognizerDelegate>`。在上面的动作方法和`– gestureRecognizer:shouldReceiveTouch:`手势识别器中都为 locationInView: 提供了无效的位置 (0,-64)。*（如上所述，它是 0,-67，但在几分钟前我将 Xcode 更新到最新版本后变为 0,-64，哈哈）*但是，`– gestureRecognizerShouldBegin:`它`– gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`给出了正确的 CGPoint。

我的问题是..这是预期的行为吗？还是我搞砸了什么？否则，这意味着我需要在其中一种委托方法中触发我的操作，因为我确实需要手势识别器的正确位置。不过，这个选项听起来不太正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:14:25.247

麻烦各位了，我已经查明原因了。

我只是留`locationInView:`在了`performBlock:`a 中`NSManagedObjectContext`，这很清楚，因为 UIGestureRecognizer 是 UI 的东西，而 iOS 中的规则 #1 是“UI 的东西只属于主线程”。这立即解释了 的不一致行为`locationInView:`以及为什么它更有可能在早期阶段成功。

*再次吸取教训：*将“手势识别器”阅读为`UIGestureRecognizer`. **“用户界面”**。

# php - 隐藏在循环中的 Smarty 值

> ID：14588068
> 
> 赞同：0
> 
> 时间：2013-01-29T16:56:50.303
> 
> 标签：php, recursion, smarty

我有以下聪明的结构（我已经删除了不必要的检查和可视化）：

```
[4] {$vip_comments = array()}
{foreach from=$comments item=comment}
    {include file="layouts/comments_deepscan.htm" show_only=$comment.id vip_id=$comment.id}
{/foreach}
[3] {$vip_comments|print_r:true} 
```

comments_deepscan 结构看起来像这样（我已经删除了不必要的检查和可视化）：

```
{foreach from=$comments item=comment}
    {if $comment.access_level == 5}
        [1] {$vip_comments[$vip_id] = true}
        [2] {$vip_comments|print_r:true}
        {break}
    {/if}
    {include file="layouts/comments_deepscan.htm" show_only=$comment.id vip_id=$vip_id}
{/foreach} 
```

在某些示例中，[1] 和 [2] 行已被调用，因此**$vip_comments**如下所示：

```
Array ( [10446] => 1 ) 
```

但是，当循环完成时，第 [3] 行给了我一个空数组。我认为，**$vip_comments**在深度扫描循环中不可见，因此它创建了一个新的空数组并将数据推入其中。我试图将它作为这样的参考传递（但它不起作用）：

```
{include file="layouts/comments_deepscan.htm" show_only=$comment.id vip_id=$comment.id vip_comments=&$vip_comments} 
```

如何在第 [4] 行的**$vip_comments数组中推送元素？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:19:23.880

您没有说您使用的是哪个 smarty 版本，对于 smarty 3，请尝试使用“范围”更改包含模板的范围

```
{include file="layouts/comments_deepscan.htm" scope=parent ... } 
```

我还将看看 {function}：[http](http://www.smarty.net/docs/en/language.function.function.tpl) : //www.smarty.net/docs/en/language.function.function.tpl ，这是您尝试做的更好的解决方案。

如果您使用的是 smarty 2，我认为无法完成。

但是，请注意 smarty 是一个面向表示的模板系统，并且（即使可以完成）在 php.ini 中执行所有这些处理数据和创建数组的逻辑操作会更快、更可取。

# wpf - 从 MVVM 动态添加控件到视图

> ID：14588082
> 
> 赞同：3
> 
> 时间：2013-01-29T16:57:37.737
> 
> 标签：wpf, mvvm

在 WPF 中，我使用的是 MVVM 模型。

我有一个带有 Dockpanel 的视图，我想为通过绑定找到的所有硬盘动态添加带有标签和文本框的 StackPanel。

因此我的 XAML 看起来像：

```
<DockPanel Grid.Row="1" HorizontalAlignment="Stretch" Margin="5">
       <ItemsControl ItemsSource="{Binding Harddisks}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel DockPanel.Dock="Right" HorizontalAlignment="Right" Margin="2.5,0,0,0">
                        <Label Content="{Binding Path=Label}" />
                        <TextBox Text="{Binding Path=GB_Free}" Width="100" IsReadOnly="True"/>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

它应该是四个标签和文本框，但只显示第一个标签和文本框。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:30:56.880

您在 ItemsControl 中的项目实际上并不是 DockPanel 的直接子项。您需要更改 ItemsControl 以指定 DockPanel 是 Panel。以下将导致 ItemsControl 创建一个 DockPanel 并将所有项目放置在其中（而不是 ItemsControl 默认使用的 StackPanel）。

更多信息：[MSDN：ItemsControl.ItemsPanel 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel%28v=vs.95%29.aspx)

```
 <ItemsControl ItemsSource="{Binding Harddisks}">
        <ItemsControl.ItemsPanel>
            <DockPanel Grid.Row="1" HorizontalAlignment="Stretch" Margin="5" />
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel DockPanel.Dock="Right" HorizontalAlignment="Right" Margin="2.5,0,0,0">
                    <Label Content="{Binding Path=Label}" />
                    <TextBox Text="{Binding Path=GB_Free}" Width="100" IsReadOnly="True"/>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

# python - 如何检查 Python 程序是否已在 Visual Studio 中启动？

> ID：14588088
> 
> 赞同：4
> 
> 时间：2013-01-29T16:58:05.593
> 
> 标签：python, visual-studio, visual-studio-2012, ptvs

我正在使用*Visual Studio 12*和*Python Tools for Visual Studio 1.5*来开发 Python 程序。这很好用。

现在我想在 Python 代码中检查我们是否在 Visual Studio 中运行。有没有简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:53:13.493

```
import sys
if '$visualstudio_py_debugger' in sys.modules:
    print("Running in Visual Studio")
else:
    print("Running outside Visual Studio") 
```

# c++ - 使用 GCC 在静态内存中分配 C++ 类

> ID：14588091
> 
> 赞同：2
> 
> 时间：2013-01-29T16:58:18.183
> 
> 标签：c++, gcc, heap-memory

我想在静态内存中分配大量类，而不是将堆用于使用 C++ 的嵌入式项目。目前，当我们对一个单独的 CPP 文件中的一个类执行以下操作时，该文件专门用于静态分配的类：

```
Config cfg(spi); 
```

据我所知，这是在堆上分配的。单步执行汇编代码，我看到 malloc 最终被调用。堆栈跟踪如下所示：

```
malloc()
__register_exitproc()
__static_initialization_and_destruction_0()
_GLOBAL__sub_I_periodic()
__libc_init_array
<reset vector> 
```

Config 类如下所示：

```
class Config
{
   public:
      Config(SPIDriver &spi);
      virtual ~Config();
   private:
      SPIDriver *_spi;
} 
```

然后实现如下所示：

```
Config::Config(SPIDriver &spi)
: _spi(&spi) {}
Config::~Config() {_spi = NULL;} 
```

有什么方法可以强制 GCC 将其放置在静态内存中而不是堆中？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:47:48.687

我终于找到了我的问题。Zack 是对的，正在调用 __register_exitproc 并将析构函数注册到链表中。这就是调用 malloc 的原因，所以为链表分配空间。我们的程序在裸机 ARM (Cortex M4) 上运行。所以类永远不会被破坏，因为当我们断电时，电源会丢失。幸运的是 __register_exitproc 是一个弱函数，所以我创建了这个函数的另一个版本，什么也不做。动态内存分配没有任何问题，它可以正常工作，但由于某种原因，在 __register_exitproc 中，它试图从具有奇数（字面意思）地址的内存位置将 32 位值加载到 ARM GPR 中。这会导致抛出硬故障异常。通过覆盖 __register_exirproc 我们可以防止发生此异常。

希望这对其他人有帮助。一如既往，谢谢或帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:03:50.927

您所有的混乱实际上都来自事实，即您不知道 cfg 是否在堆上分配。只是在启动时在某处调用 malloc 没有任何意义——即使对于 void 程序，libc 也会多次调用 malloc。

让我向您解释如何确定您的数据在哪里。

让我们从您的代码开始，一些修改：

```
#include "stdlib.h"

class Config
{
   public:
     Config(int spi) {_spi = &spi;}
     virtual ~Config() {;}
   private:
     int *_spi;
};

Config cfg(2);

int
main(void)
{
  int *x = new int(2);
  return 0;
} 
```

现在让我们编译它`g++ -g -O0 statstorage.cpp -static`

你有一个 .out 文件。现在我们必须查看您的数据实际在哪里。首先使用命令行调用 gdb，如下所示：

```
echo -e "start\nstep\np/x &cfg\np/x x\nquit" > .gdbinit && gdb a.out 
```

你会得到这样的输出：

```
$1 = 0x6add50
$2 = 0x6c5670 
```

其中 0x6add50 是您的 cfg 的地址，而 0x6c5670 是动态分配的 x 指针的地址。

现在让我们调用 readelf，比如`readelf -S a.out`

并查看部分在哪里。输出是（对于我的电脑）38 个部分。我们只需要地址字段和大小字段。我有：

```
 Address               Size
[23] .bss              ...  00000000006add00 ... 0000000000014d38
[24] __libc_freeres_pt ...  00000000006c2a38 ... 0000000000000030 
```

并且 __libc_freeres_pt 是具有最大非空地址的最后一段。

我们可以看到，0x6c5670 在外部加载的二进制文件（在堆本身中），而 cfg 在 bss 部分内。

这会产生，taht cfg**是**静态分配的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:14:00.400

如果你还没有“得到” malloc [和相关的 gubbins]，那么你将需要实现你自己的全局新函数，并使用例如一个大的 char 数组作为你的“堆”。

[这](https://stackoverflow.com/questions/8186018/how-to-properly-replace-global-new-delete-operators)是一个先前的问题，解释了如何编写自己的新/删除函数。您还应该能够编写一个`malloc`and`free`函数来为 C 样式分配实现相同的功能。

另一种方法当然是重写 glibc 或您正在使用的任何库的工作方式。如果您只做非常简单的事情，也可能是一种选择。但我的猜测是迟早你会需要动态分配，所以我认为编写你自己的[或调整现有的]是你最好的选择。

# asp.net-web-api - 如何在 ViewModel 上设置 Web API 调用所需的字段？

> ID：14588094
> 
> 赞同：3
> 
> 时间：2013-01-29T16:58:23.670
> 
> 标签：asp.net-web-api

我想知道是否有可能，或者如何将我的类上用作 Web API 调用的参数的字段标记为必需？我显然可以在收到消息后手动执行此操作，但我希望管道中内置了一些东西（比如在 MVC 中结合使用必需字段注释的 jQuery 自动返回到显示必需字段符号的 UI）所以我不必手动检查所有内容。

假设我有以下 ViewModel 类：

```
public class PersonViewModel
{
  public string FirstName {get; set;}

  public string MiddleName {get; set;}

  public string LastName {get; set;}

} 
```

这是我在一个简单的 Post 方法`PersonController`

```
public HttpResponseMessage Post(PersonViewModel person)
{

} 
```

假设`FirstName`and`LastName`字段是必需的*，但不是* `MiddleName`。我想知道的是，如果`Person`对象没有填充所需的字段之一，调用是否会自动以 HTTP 400 错误请求或类似的方式响应客户端？

基本上我必须手动完成所有这些工作，还是有办法让框架自动处理带注释的字段，所以我没有很多用于必填字段的样板验证代码？

我试图避免的手动方式：

```
if (ModelState.IsValid)
{
  if (person.LastName == string.empty)
  {
     return Request.CreateResponse(HttpStatusCode.BadRequest);
  }

} 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:09:08.533

WebAPI 确实具有验证功能。您应该能够将 FirstName 和 LastName 属性标记为 [Required]，然后使用此博客文章底部的操作过滤器发回适当的响应：

[http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx](http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx)

您可以在此处阅读有关 WebAPI 验证的更多信息：

[http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api)

# python - docopt + 模式验证

> ID：14588098
> 
> 赞同：5
> 
> 时间：2013-01-29T16:58:46.550
> 
> 标签：python, validation, parsing, schema, docopt

有没有更好的方法来处理这个验证：

```
#!/usr/bin/env python
""" command.

Usage:
  command start ID
  command finish ID FILE
  command (-h | --help)
  command (-v | --version)

Arguments:
  FILE     input file
  PATH     out directory

Options:
  -h --help     Show this screen.
  -v --version  Show version.
"""

from docopt import docopt
from schema import Schema, Use, SchemaError

if __name__ == '__main__':
    args = docopt(__doc__, version='command alpha')

    # Remove False or None keys from args dict
    for k, v in args.items():
        if (not v):
            args.pop(k)

    if 'start' in args:
        args.pop('start')
        schema = Schema({
            'FILE': Use(open, error='FILE should be readable'),
            'ID': Use(int, error='ID should be an int'),
        })
    elif 'finish' in args:
        args.pop('finish')
        schema = Schema({
            'FILE': Use(open, error='FILE should be readable'),
            'ID': Use(int, error='ID should be an int'),
        })

    try:
        args = schema.validate(args)
    except SchemaError as e:
        exit(e)

    print(args) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T18:59:12.463

我会做以下事情：

```
#!/usr/bin/env python
"""Command.

Usage:
  command start ID
  command finish ID FILE
  command (-h | --help)
  command (-v | --version)

Arguments:
  ID
  FILE     input file

Options:
  -h --help     Show this screen.
  -v --version  Show version.

"""
from docopt import docopt
from schema import Schema, Use, Or, SchemaError

if __name__ == '__main__':
    args = docopt(__doc__, version='command alpha')

    id_schema = Use(int, error='ID should be an int')
    file_schema = Or(None, Use(open, error='FILE should be readable'))
    try:
        args['ID'] = id_schema.validate(args['ID'])
        args['FILE'] = file_schema.validate(args['FILE'])
    except SchemaError as e:
        exit(e)

    print(args) 
```

尽管我希望**模式**可以使用单个模式而不是两个模式来表达相同的含义。我将尝试使将来能够制作如下模式：

```
schema = Schema({'ID': Use(int, error='ID should be an int'),
                 'FILE': Or(None, Use(open, error='FILE should be readable')),
                 object: object}) 
```

这意味着我只`object: object`关心`'ID'`并且`'FILE'`所有其他键/值都可以是任意对象。

# 更新

从 0.2.0 版开始，**schema**现在可以正确处理这种情况：

```
schema = Schema({'ID': Use(int, error='ID should be an int'),
                 'FILE': Or(None, Use(open, error='FILE should be readable')),
                 object: object}) 
```

# android - ProGuard：保留内部静态类但重命名父类

> ID：14588099
> 
> 赞同：0
> 
> 时间：2013-01-29T16:58:47.860
> 
> 标签：android, proguard

我想知道是否可以保留公共静态内部类的名称但重命名父类名。

我的代码如下所示：

```
public class MyDao extends AbstractDao {

    public static final String TABLENAME = "BOX_DOWNLOAD";

    public static class Properties {
        public final static Property ID = new Property(0, Long.class, "ID", true, "ID");
        public final static Property Name = new Property(1, String.class, "name", false, "NAME");
        public final static Property Done = new Property(2, Boolean.class, "done", false, "DONE");
        // SOME MORE CONSTANTS
    };

    // SOME CODE WHICH CAN BE OBFUSCATED

} 
```

我希望 ProGuard 替换：MyDao（类名）

```
the PROPERTIES' variables (ID, Name, Done) 
```

我希望 ProGuard 不替换：

```
TABLENAME (variable name)
PROPERTIES (className only) 
```

我试过这个

```
-keepclassmembers class * extends de.greenrobot.dao.AbstractDao {
  public static <fields>;
  public static class *;
} 
```

但这不起作用。类名没有被混淆。

// 编辑我忘了说有几个像 MyDao 这样的类。例如。MyDao1、MyDao2 等

我想使用通配符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:57:42.013

参照。ProGuard 手册 > 使用 >[保留选项](http://proguard.sourceforge.net/manual/usage.html#keepoptions)

```
-keepclassmembers class de.greenrobot.dao.MyDao {
    String TABLENAME;
}

-keep class de.greenrobot.dao.MyDao$Properties 
```

**更新：**当保留名称“MyDao$Properties”时，当前版本的 ProGuard 似乎也保留了名称“MyDao”（即使 InnerClasses 属性未保留）。这比严格必要的要保守一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T10:53:48.943

我制作了以下脚本，这对我有用。

```
-keep class my.dao.package.*$Properties {
    public static <fields>;
}

-keepclassmembers class my.dao.package.** {
    public java.lang.String TABLENAME;    
} 
```

我在内部类中使用了通配符，这很有效。

# android - 为 textview 启用滚动

> ID：14588100
> 
> 赞同：1
> 
> 时间：2013-01-29T16:58:50.427
> 
> 标签：android

我的活动有一个以下 xml。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".Activity1" >

<RelativeLayout
    android:id="@+id/titleStoryRelativeLayout"
    android:layout_weight="@string/titleWeight"
    android:layout_width="fill_parent"
    android:layout_height="0dip">
    <TextView
        android:id="@+id/titleStory"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</RelativeLayout>
<RelativeLayout
    android:id="@+id/contentTextViewLayout"
    android:layout_weight="@string/contentTextViewWeight"
    android:layout_width="fill_parent"
    android:layout_height="0dip">
    <TextView
        android:id="@+id/textViewStory1"
        android:layout_width="fill_parent"
              android:layout_height="wrap_content"/>
</RelativeLayout>
<RelativeLayout
    android:id="@+id/footerStoryRelativeLayout"
    android:layout_weight="@string/footerWeight"
    android:layout_width="fill_parent"
    android:layout_height="0dip>

    <Button
        android:id="@+id/buttonPrevious"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:onClick="loadPrevious"
        android:text="@string/stringButtonPrevious"/>

    <Button
        android:id="@+id/buttonNext"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:onClick="loadNext"
        android:text="@string/stringButtonNext"/> 
```

在这里，我正在从我的代码中动态加载我的 Textview (@+id/textViewStory1) 和一些文本。问题是在加载过程中，很少有行超出屏幕。我打算启用滚动，以便用户可以向下滚动以查看那些缺失的行。但是滚动应该只限制到最后一行而不是超出。关于如何设置的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:14:14.537

为您的文本视图设置这些设置：

```
android:maxLines = "AN_INTEGER"

android:scrollbars = "vertical" 
```

然后，您可以将其设置为在 java 中可滚动：

```
TextView.setMovementMethod(new ScrollingMovementMethod()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:48:15.920

您可以限制 TextView 的高度以匹配您想要查看的行数，然后将您的 TextView 放入 ScrollView

我做了一个简单的例子来证明这一点......

```
<ScrollView android:layout_height="30dp"
        android:layout_width="match_parent">
<TextView 
    android:layout_width="match_parent"
    android:layout_height="30dp"
    android:textSize="16sp"
    android:id="@+id/tv1"
    />
</ScrollView> 
```

观察我是如何固定 ScrollView 的高度并将 TextView 的高度与之匹配的。

[我在这里](https://stackoverflow.com/a/10140826/892055)之前已经回答了这个确切的问题，请在再次询问之前检查 SO 上的现有答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:18:28.373

尝试使用[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)（官方文档）

# user-interface - 适用于 Windows Mobile 6 的 UI 库

> ID：14588101
> 
> 赞同：0
> 
> 时间：2013-01-29T16:58:54.440
> 
> 标签：user-interface, windows-mobile-6

我需要一些帮助来查找带有控件的 Windows Mobile 6 图形库，以快速回答一些是/否问题。

[类似于此处显示的内容](http://www.telogis.com/images/mobile/truck-inspection-report.png)

另外，我需要做这样的[事情。](http://www.telogis.com/images/mobile/hours-of-service.png) 我不需要以完全相同的方式向它展示信息，但这绝对是一个加分项。

非常感谢您提前。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:58:16.267

The way I did it at the end was how josef said, I wrote my own control for the Yes/No answers and I designed a static class to draw over a predefined image with the format already stablished (I just draw the lines indicating what the driving did at a particular time)

# javascript - 在不调用 jquery 的情况下获取 ie 版本

> ID：14588106
> 
> 赞同：-5
> 
> 时间：2013-01-29T16:59:07.777
> 
> 标签：javascript, html

嗨首先（Jezen Thomas ty 你的代码帮助了我，但我不能使用它），我必须在不调用 jquery 的情况下使这段代码工作（因为我们不知道它是否会被支持），所以基本上我必须得到这段代码显示ie版本，只使用html和javascript

```
<html> 
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]--
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->              
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]-->
<head>
<title>A HTML document needs a title to be valid.</title>
</head>
<body>
<script type="text/javascript"> 
window.onload = function mytest(){
"use strict";
// Detecting IE
var oldIE
if ($('html').is('.ie6, .ie7, .ie8')) {
oldIE = 1;
    }

if (oldIE == 1) {
   document.write("version<ie9")
    } else {
   document.write(" version => ie9")
}
}
</script>
</body>
</html> 
```

我必须删除（$），但我不知道用什么替换它（我最近刚开始使用 javascript）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:06:32.350

警报（navigator.userAgent）；

我希望这能给你你需要的开始。

# git - 如何使用 git 管理软件的外部维护补丁？

> ID：14588112
> 
> 赞同：1
> 
> 时间：2013-01-29T16:59:22.697
> 
> 标签：git, openssh

我正在尝试将社区维护的 OpenSSH 补丁（[Roumen Petrov 的 X.509v3 实现](http://roumenpetrov.info/openssh/)）与我们自己的补丁结合起来。据我所知，这不适合常规解决方案，因为这个补丁很大，而且这个补丁的所有版本都非常绑定到特定的 OpenSSH 上游版本。OpenSSH 在补丁版本之上的明显升级是一个简单的合并冲突，这正是我想要避免的，但在 Git 中保持上游版本和补丁版本不同。

现在，我已经在 Git 中使用分支完成了这项工作：

```
master
gert/develop
vendor/orig
vendor/roumenpetrov 
```

和

*   `vendor/orig`作为一个简单的、原始的 OpenSSH 代码分支，每次提交 OpenSSH 发行版本之一，也被标记，例如`5.9p1`
*   `vendor/roumenpetrov`是一个分支，`vendor/orig`应用了相应的补丁，也被标记了，例如`5.9p1+x509-7.1`
*   `gert/develop`作为“日常开发”分支，基于`vendor/roumenpetrov`，现在有一些本地低影响提交。
*   `master`作为发布就绪代码的分支

我的目标基本上是这样的：

*   代码中所有更改的可检测性。例如“我们是否已经在 6.0p1 上`master`？” ->`git branch --contains <commit-of-openssh-6.0p1>`是/否答案。
*   轻松升级 OpenSSH 以及 Roumen 的补丁，与本地补丁的冲突最少。
*   将升级新版本视为单个提交：例如“升级到补丁到 X509-7.4”以及“升级到新的上游 6.0p1”。

实际上，我对上面的模型有疑问。假设我想升级到 6.0p1 以及来自 Roumen 的相应新 7.4 补丁。我应该怎么办？我找到了以下选项：

*   **升级、还原、升级、合并**

    1.  中`vendor/orig`，升级 OpenSSH 版本。
    2.  在`vendor/roumenpetrov`中，恢复之前的提交（`git revert 12345678`7.1 补丁）。
    3.  在`vendor/roumenpetrov`中，与 合并`vendor/orig`。
    4.  在`vendor/roumenpetrov`中，应用新补丁并提交。
    5.  在`gert/develop`, 合并`vendor/roumenpetrov`

    问题：1）要采取的很多操作，2）revert 操作是一个单独的提交，在阅读日志时会混淆（“6.0p1 release”->“revert X509 7.1”->“merge vendor/orig”->“apply X509 7.4".), 3) 恢复以及随后的重新修补操作可能会导致超过理想的冲突概率，对吧？

    优点：`git log vendor/orig..vendor/roumenpetrov`向我展示了实际的更改，尽管列出了四个提交。

*   **相同，但与`--no-commit`**

    1.  在`vendor/roumenpetrov`：`git revert -n <patch-7.1>`
    2.  在`vendor/roumenpetrov`：`git cherry-pick -n <openssh-6.0p1>`
    3.  In `vendor/roumenpetrov`:`git commit` *神奇地*将其识别为与来自消息的相同提交。

    问题：`git log vendor/roumenpetrov..vendor/orig`显示未应用 openssh-6.0p1，因为它具有不同的提交哈希 (diff=empty)。

*   **合并`--squash`**

    问题：同上，但有另一个原因。

*   **变基**

    问题：我们将此存储库推送到中央（尚未公开）位置。因此，据我所知，如果其他人也在这个分支上工作，那么`vendor/roumenpetrov`在较新的分支上重新定位不是一种选择。`vendor/orig`这也适用于其他远程分支。请参阅[此答案](https://stackoverflow.com/a/2219681/1254292)，了解为什么我认为重新定基不是我的情况的选择。

    [而且， svnpenn 提到](https://stackoverflow.com/questions/14588112/how-do-i-manage-externally-maintained-patches-on-software-with-git#comment20373580_14593959)的是真的吗？

    > 没有变基，你别无选择，只能进行丑陋的合并提交。

* * *

所以，退后一步，我最好的选择是什么？我是否必须因为来自 Roumen 的补丁取决于特定的 OpenSSH 版本而做出牺牲？我是否必须修改整个分支模型？还是我错过了一些非常基本的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:24:24.553

> OpenSSH 在补丁版本之上的明显升级是一个简单的合并冲突，这正是我想要避免的，但在 Git 中保持上游版本和补丁版本不同。

我处理这个问题的方法是将更改保存在单独的分支上

```
A--B--C
       \
        X--Y--Z 
```

那么如果提交是在上游进行的

```
A--B--C--D--E--F
       \
        X--Y--Z 
```

你可以将分支变基到新的`HEAD`

```
 A--B--C--D--E--F
                 \
                  X'--Y'--Z' 
```

`upstream`这避免了合并提交，并且如果人们决定这样做，它将很容易合并到 master 中。

[**参考**](http://github.com/dchelimsky/rspec/wiki/Topic-Branches)

# ruby-on-rails - 在不加载 Rails 的情况下进行测试：伪造的类需要在测试运行后“不伪造”

> ID：14588115
> 
> 赞同：0
> 
> 时间：2013-01-29T16:59:31.327
> 
> 标签：ruby-on-rails, rspec

我已经重构了我的测试套件的一部分，以便在执行测试时不加载轨道。下面的代码是一个测试文件的示例，它只加载 Rails 的选择片段。它还伪造了“项目”类。我的问题是这个伪造的项目类最终覆盖了正常的项目类，并且涉及该项目类的所有其他测试现在都失败了。

此测试文件运行后如何取消覆盖我的项目类？

```
require 'active_model'
require 'active_model/validations'
require 'active_record/callbacks'
require 'active_support/core_ext/string'
class Project
  include ActiveModel::Validations    
  include ActiveRecord::Callbacks
  def initialize(attributes = {})
    @general_media = attributes[:general_media]
  end
  attr_accessor :general_media
end

require_relative '../../../app/models/project/media.rb' 
```

更新：我认为这接近我需要的，除了我收到关于 Project 是未初始化常量的错误。我一定是错误地实例化了这个测试类。

```
require 'active_model'
require 'active_model/validations'
require 'active_record/callbacks'
require 'active_support/core_ext/string' #used for '.blank?' method

require_relative '../../../app/models/project/media.rb'

describe Project::Media do
  before(:all) do 

    class Project
      include ActiveModel::Validations    
      include ActiveRecord::Callbacks
      def initialize(attributes = {})
        @general_media = attributes[:general_media]
      end
      attr_accessor :general_media
    end

  end

  after(:all) { Object.send(:remove_const, :Project) }

  #then all the tests 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:46:43.330

您应该能够使用[`Module#remove_const`](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-remove_const).

```
Object.send(:remove_const, :Project) 
```

它是一种私有方法，因此您需要使用`send`而不是常规方法调用。

更新：

也许尝试以下方法：

```
require 'active_model'
require 'active_model/validations'
require 'active_record/callbacks'
require 'active_support/core_ext/string' #used for '.blank?' method

class Project
  include ActiveModel::Validations    
  include ActiveRecord::Callbacks
  def initialize(attributes = {})
    @general_media = attributes[:general_media]
  end
  attr_accessor :general_media
end

require_relative '../../../app/models/project/media.rb'

describe Project::Media do

  after(:all) { Object.send(:remove_const, :Project) }

  ... 
```

如果主题依赖于它，您将需要在描述块之前声明项目类。还假设您的`Media`模型在您需要之前依赖它。

Project 类的后续测试将需要重新加载它，假设它们是单独的测试`require`，如果您想要最小（快速）测试，您可以只在该测试文件中的项目模型类，或者如果您想要加载整个测试，则可以通过普通的 spec_helper Rails 应用程序（慢）。

正如评论中所讨论的，简单地存根 Project 类而不是重新定义它可能更容易。

# arrays - 使用 unique_ptr 的内存泄漏

> ID：14588117
> 
> 赞同：1
> 
> 时间：2013-01-29T16:59:40.357
> 
> 标签：arrays, memory-leaks, smart-pointers, unique-ptr

您好，我遇到了一个问题，我在处理`unique_ptr`数组变量时似乎正在泄漏内存。现在我已经隔离了问题发生的位置，但我不明白为什么会发生泄漏。我怀疑我可能在滥用，`unique_ptr`但在研究互联网和这个网站时，我没有发现我做错了什么。当它们`unique_ptr`在彼此之间传递时，两个函数之间会出现问题。我已经指出了感兴趣/重要的代码行，并省略了不相关的代码。

```
int doInstruction(SerialPort^ sPort, unsigned char cmdCode, 
   unique_ptr<unsigned char[]> &param, int sizeOfParam, 
   unique_ptr<char[]> &strMsg,int sizeOfMsg, 
   unique_ptr<unsigned char[]> &outputData){<<-- I pass in a unique_ptr 
                                                 by reference in order
                                                 to return data

    unique_ptr<unsigned char[]> tempOutput; <<--This is where the 
                                                unique_ptr starts
    unsigned char ack[] = ACK;
    unsigned char nack[] = NACK;
    unsigned char appErr = ERROR_BYTE;
    int a = 0;
    int dataPacketLength = 7 + sizeOfParam + sizeOfMsg;
    int sizeOfReply, errMsg;
    int errTrckr = 0;
    array<Byte>^ instruction = generateIns(cmdCode,param,sizeOfParam,
                                                        strMsg,sizeOfMsg);
    bool ackCheckStage = true;
    bool hasResponse = false;
    bool ackCheck = true;
    bool nackRepeat = false;

    switch(cmdCode){
        case INS_READCARD:
            hasResponse = true;
        break;
        case INS_RETRANSMIT:
            hasResponse = false;
            ackCheckStage = false;
        break;   
    }//end switch

    tempOutput = move(outputData);

    sendInstruction(instruction,dataPacketLength,sPort);

    while(a < 1){
        a++;
        errMsg = 0;
        errMsg = receiveMessage(sPort,tempOutput); <<--passes the unique_ptr
                                   to the receiveMessage function, this line
                                   is called twice, the first time it runs 
                                   fine but on the second run memory leaks

        //extract length of reply..only sent if message received successfully
        if(errMsg > 9){ 
            sizeOfReply = errMsg/10;
            errMsg = 0;
        }//end if
        if(errMsg == 0){ //success
            if(ackCheckStage){ //looking for acknowledgment
                if(sizeOfReply == 2 && tempOutput[0] == ack[0] 
                                  && tempOutput[1] == ack[1]){//acknowledged

                    if(hasResponse){ <<--This section decides if the while loop
                                            repeats or not, the issues occurs
                                            when the loop repeats the 2nd time
                        a--;
                        ackCheckStage = false;
                    }else{
                        outputData = move(tempOutput);
                        return 0;
                    }//end if
                }else if(){
                    //irrellevant code
                }//end if
            }else{ //looking at a message
                outputData = move(tempOutput); <<--after all is said and done
                                                   I return the unique_ptr
                return 0;
            }//end if
        }else{
            //irrellevant code
        }//end else if
    }//end while
    return -1;
}//end doInstruction

////////////The second function//////////////////////////////
int receiveMessage(SerialPort^ sPort, unique_ptr<unsigned char[]> &outData){<<--the
                                                         unique_ptr being passed by
                                                         reference so that data may
                                                         returned
    int length;
    int stopChecking = 0;
    unique_ptr<unsigned char[]> mData; <<--I create a temporary unique_ptr
                                           that I will work with within this
                                           function
    String^ output = "";
    int insReceived = 0; //starts at 0 so if everything is working 
                           it will not change into a 1
    mData = unique_ptr<unsigned char[]>(new unsigned char[2]);
    ^^--initialize the unique_ptr to store 2 bytes

    while(stopChecking == 0){
        stopChecking = findStartChar(mData,sPort);
    }//end while

    if(stopChecking == 1){
        output = gatherOutput(mData,2);//generating console output
        mData = unique_ptr<unsigned char[]>(new unsigned char[3]);
        ^^--discard old data and resize to store 3 bytes of data

        length = readLength(mData,sPort);<<--this seems to be working fine
        if(length > 0){
            if(!getSum(mData,sPort,3)){
                output = output + "," + gatherOutput(mData,3);//console output
                mData = unique_ptr<unsigned char[]>(new unsigned char[length+1]);
                ^^--discard old data and resize to store a generated
                    number of bytes of data

                    if(readData(mData,sPort,length+1) == 1){
                        if(!getSum(mData,sPort,length+1)){
                            output = output+","+gatherOutput(mData,length+1);
                            Console::WriteLine(output);
                            mData[length+1] = length;
                            outData = move(mData);<<--memory leak occurs here
                                                      first when this function
                                                      is called a second time
                            insReceived = length*10;
                        }else{
                            cout << "parity error\n";
                            insReceived = 3;
                        }//end if
                    }else{
                    }//end if
            }else{
            }//end if
        }else{
        }//end if
    }else{
    }//end if
    return insReceived;
}//end receiveMessage 
```

那么我是否在滥用`unique_ptr`类型？还是我忘记了它使用中的重要内容。我尝试在一个更简单的程序中重新创建问题，但它运行时没有泄漏。我一直在使用 VLD 和 Microsoft 的泄漏检测器代码检查泄漏。

# sql - 如何查找应用程序无法连接到 SQL Server 2008 的原因

> ID：14588119
> 
> 赞同：2
> 
> 时间：2013-01-29T16:59:44.960
> 
> 标签：sql

Windows 应用程序设置为使用 SQL Server 身份验证连接到 SQL Server。当我 RDP 到应用程序所在的盒子并启动应用程序时，它成功连接到 SQL Server。当客户在他的桌面上运行应用程序（他在网络上使用应用程序框）并启动应用程序时，连接失败（错误。服务器不存在或访问被拒绝）。客户可以在他的命令提示符中 ping SQL Server IP。然而，当我查看 SQL 服务器上的错误日志时，我没有看到他连接失败的日志。是什么阻止了他对 SQL Server 的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:10:15.583

您可能必须在 SQL Server 配置管理器中启用 TCP/IP 协议 - 默认情况下它是禁用的。

# javascript - 未调用 AJAX 成功回调函数

> ID：14588121
> 
> 赞同：2
> 
> 时间：2013-01-29T16:59:47.340
> 
> 标签：javascript, python, ajax, django

我在一个简单的网站上使用 python 和 js。我正在尝试从客户端调用一个方法并获得结果，但无论我做什么，成功功能都不会发生。

这是我的 JS

```
 $.ajax({
        url: "http://127.0.0.1:8000/api/gtest/",
        type: "POST",
        data: { information : "You have a very nice website, sir."},
        dataType: "json",
        success: function(data) {
            alert ("post is success");
        },
        error: function(request,error) { 
            alert(request.responseText);
            alert(error);
        }
    }); 
```

这是我的服务器端代码

```
def gtest(request):
    jsonValidateReturn = simplejson.dumps({"jsonValidateReturn": "ddddd"})
    return HttpResponse(jsonValidateReturn, content_type='application/json', mimetype='application/json') 
```

服务器响应调用 - "POST /api/gtest/HTTP/1.1" 200 31

试图在这里解决类似的问题，但没有成功：\无论我做什么，只调用错误函数。错误警报始终为空.. 没有实际消息。

我知道这可能是一个很小的变化，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:11:52.777

```
 $.ajax({
    url: "http://127.0.0.1:8000/api/gtest/",
    type: "POST",
    data: { 
         'information' : "You have a very nice website, sir.",
         'csrfmiddlewaretoken': '{{csrf_token}}'
    },
    contentType: "application/json;charset=utf-8",
    dataType: "json",
    success: function(data) {
        alert ("post is success");
    },
    error: function(request,error) { 
        alert(request.responseText);
        alert(error);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:25:45.540

我不能赞成 mccannf 的评论。

[他发布的链接](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)解决了这个问题，我从我的电脑上的一个文件中运行了 html 代码，我需要从服务器加载它，所以链接不会以 file:// 开头，而是以 http://

最好的祝福..

# iphone - 使用 title 属性的 iOS 搜索日历

> ID：14588122
> 
> 赞同：0
> 
> 时间：2013-01-29T16:59:51.837
> 
> 标签：iphone, ios, objective-c, calendar

我正在尝试制作一个允许用户在一个指定的日历中进行事件的应用程序。

问题是：

我找不到一个解决方案来知道是否有一个带有我想使用的标题的日历。

如果列表为空，我编写一个创建日历的代码，但如果列表不为空，我需要知道是否有我需要的日历`calendar.title`。

如果没有日历，我创建日历；如果有，我将事件添加到此日历。

下面是我正在使用的代码：

```
EKEvent *myEvent;
EKEventStore *store;
EKSource* localSource;
EKCalendar* newCal;

store = [[EKEventStore alloc] init];
myEvent = [EKEvent eventWithEventStore: store];
NSString* title         = [arguments objectAtIndex:1];
NSString* location      = [arguments objectAtIndex:2];
NSString* message       = [arguments objectAtIndex:3];
NSString* startDate     = [arguments objectAtIndex:4];
NSString* endDate       = [arguments objectAtIndex:5];
NSString* calendarTitle = [arguments objectAtIndex:6];
//NSString* calID = nil;
//int i = 0;

EKCalendar* calendar = nil;
if(calendarTitle == nil){
    calendar = store.defaultCalendarForNewEvents;
} else {
    NSIndexSet* indexes = [store.calendars indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
        *stop = false;
        EKCalendar* cal = (EKCalendar*)obj;
        if(cal.title == calendarTitle){
            *stop = true;
        }
        return *stop;
    }];

    if (indexes.count == 0) {
        //if list is empty i haven't calendars then i need to create it
        for (EKSource* source in store.sources)
        {
            if (source.sourceType == EKSourceTypeLocal)
            {
                localSource = source;
                break;
            }
        }

        if (!localSource) return;

        newCal = [EKCalendar calendarWithEventStore:store];
        calendar.source = localSource;
        calendar.title = calendarTitle;

        NSError* error;
        bool success = [store saveCalendar:newCal commit:YES error:&error];

        if (error != nil)

        {
            NSLog(error.description);
        }
        //calendar created

    } else {

        //!Empty List i need to search the calendar with the title = calendarTitle
        //And if there isn't i need to create it

        //calendar = [store.calendars objectAtIndex:[indexes firstIndex]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:55:49.437

我认为问题是您对indexesOfObjectsPassingTest 的实现。您没有返回任何索引，并且由于您在找到一个索引后尝试停止它，因此您应该只使用单数版本 indexOfObjectPassingTest。你可以很简单地写成这样：

```
 NSUInteger* indx = [store.calendars indexOfObjectPassingTest:^BOOL(EkCalendar *cal, NSUInteger idx, BOOL *stop) {
     return [cal.title isEqualToString:calendarTitle];
    }]; 
```

然后，检查后发现索引不是 NSNotFound 使用

```
calendar = store.calendars[indx]; 
```

# python - 使用 FREAK 时出错

> ID：14588124
> 
> 赞同：0
> 
> 时间：2013-01-29T16:59:57.897
> 
> 标签：python, opencv, python-2.7, freak

我正在尝试使用 FREAK 创建描述符提取器。但在以下行： `freakExtractor = cv2.DescriptorExtractor_create('FREAK')`

我收到一条错误消息： `freakExtractor = cv2.DescriptorExtractor_create('FREAK') AttributeError: 'module' object has no attribute 'DescriptorExtractor_create'`

有人可以告诉我确切的问题是什么，为什么我会收到这个错误？

我将 ubuntu 12.10 与 opencv 2.4.3 和 python 2.7 一起使用。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-11-28T13:17:41.110

我认为，

```
cv2.DescriptorExtractor_create('FREAK') 
```

不是python接口的一部分，只需使用最新的opencv就可以了，或者您可以简单地用c ++编写代码，该代码在c ++的那个版本中可用。

# javascript - 在屏幕上适合 9 个图片矩阵

> ID：14588125
> 
> 赞同：0
> 
> 时间：2013-01-29T16:59:59.067
> 
> 标签：javascript, html, css

我有 9 张图片要显示在屏幕上，因此它们占用了最大的空间，而且我没有滚动条。我想以 3*3 矩阵显示它们。我不知道尺寸是多少，但所有 9 个尺寸都是一样的。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:11:47.387

我做了一个 jsFiddle 并决定把它作为一个答案。

将正文和 html 设置为`height: 100%;`

```
html, body {
    height: 100%;
} 
```

并且有 9 个 div，背景图像向左浮动，宽度和高度为 33.3333%。

```
div {
    width: 33.3333%;
    height: 33.3333%;
    float: left;
} 
```

这就是它的全部！

演示：http: [//jsfiddle.net/D9WGv/](http://jsfiddle.net/D9WGv/)

# json - Json Schema-Json.NET 中的解析错误

> ID：14588128
> 
> 赞同：1
> 
> 时间：2013-01-29T17:00:12.220
> 
> 标签：json, json.net, jsonschema

我目前在解析我的 json 架构时遇到问题`Json.NET`。我的架构由一个数组组成，其项目可以是两种不同的类型，如下例所述：

```
"Operations": {
        "type": "array",
        "id": "Operations",
        "required": true,
        "items": {
            "type": [
                {
                    "type": "object",
                    "properties": {
                        "Sale_ID": {
                            "type": "number",
                            "id": "Sale_ID",
                            "required": false
                        },
                  },
                    "additionalProperties": false
                },
                {
                    "type": "object",
                    "properties": {
                        "Purchase_ID": {
                            "type": "number",
                            "id": "Purchase_ID",
                            "required": false
                        },
                  },
                    "additionalProperties": false
                } 
```

这个模式在多个验证器中得到验证，总是成功的。我试图将其解析为`JsonSchema`：

```
JsonSchema js = JsonSchema.Parse(schemaAsString); 
```

但是，我得到一个`JsonReaderException`：

> 异常 JSON 模式类型字符串令牌，得到 StartObject

我猜这是因为我的项目类型不是字符串。我想知道是否可以在中定义非字符串类型`Json.NET`，或者这是否是一个已知问题/限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:46:02.463

~~`Json.NET`不支持`type`属性中的复杂模式。~~

**更新：**

**[Json.NET Schema](http://www.newtonsoft.com/jsonschema)**现在完全支持 Draft 3 和 Draft 4，其中包括对 type 属性中复杂架构的支持。

# c++ - 重构为 RAII 时会遇到问题吗？

> ID：14588130
> 
> 赞同：1
> 
> 时间：2013-01-29T17:00:14.593
> 
> 标签：c++, raii

我有一个应用程序，其中包含大量似乎确实不需要的新对象，实例化的对象在使用后几行后在相同的上下文（函数）中被删除。

假设我可以将它们更改`new`为堆栈分配是否安全，或者我必须采取特殊考虑？

这些物体相对较轻，没有大的缓冲区或类似的东西。

编辑 ：

我发现的另一点是对象删除顺序更难控制。您必须更加小心事物的创建方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:08:59.377

除非您根据运行时条件创建不同类型的对象，否则应该没有问题。我的意思是，如果你有类似的东西：

```
A* pA;
if (condition)
  pA = new B();
else
  pA = new C(); 
```

那么你必须坚持指针; 否则，您将进入对象切片并错过虚拟呼叫。但是，如果您的代码很简单：

```
A* pA = new A();
// ...
delete pA; 
```

那么你会更好地使用堆栈分配。如果在对象创建和删除之间抛出异常，您将避免问题，这是最明显的优势之一。

[编辑：另一种可能性是覆盖`operator new`，正如 Mark B[在他的回答中](https://stackoverflow.com/questions/14588130/can-i-run-into-problems-when-refactoring-to-raii/14588917#14588917)所说。覆盖的主要用途`operator new`是优化特定类的内存分配；就您而言，这可能不会影响您。但是，是的，你的类有可能有一个重写`operator new`，它会做一些奇怪的事情，在这种情况下，你会改变程序的行为。]

一个好的经验法则是：除非必须，否则不要使用指针。当然，唯一能够决定你是否真的必须这样做的人是你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:41:36.747

我能想到几个考虑因素。

如果指针被多态使用（你的问题暗示不），那么你必须继续使用指针。在这种情况下，将其更改为使用适当的智能指针。

如果您的任何类在`operator new`内部覆盖，您可以通过不再调用这些方法来完全改变程序的行为。

否则，由于对象是轻量级的，因此更改为基于堆栈的对象似乎更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:22:52.523

这取决于您的特定环境；在没有看到实际代码的情况下，很难给出具体的建议。

但是，您至少可以考虑使用**智能指针**而不是分配调用的*原始*`new`指针（并因此注意正确调用`delete`）。

如果您的对象仅存在于函数范围内，您可能需要考虑`boost::scoped_ptr`或 C++11 的`std::unique_ptr`.

例如

```
#include <memory>

void f()
{
  std::unique_ptr<SomeClass> p( new SomeClass );
  p->DoSomething();
  ....

  // No need to call delete.
  // This helps making code exception-safe, and it's useful if you return from the function 
  // from different points (so you don't have to make different delete calls to properly
  // release resources).
} 
```

一般来说，在现代 C++ 代码中，*拥有*原始指针应该很少在少数地方使用，例如在作为直接资源管理器的类的类边界内（即使在这些情况下，通常也可以使用`std::unique_ptr`），或者当你实现你的自己的特殊数据结构等

# python - Twisted 中的多重响应

> ID：14588131
> 
> 赞同：2
> 
> 时间：2013-01-29T17:00:15.390
> 
> 标签：python, networking, twisted

我正在尝试`TCP`使用 Twisted 和 Pygame 开发简单的客户端/服务器游戏，但我在向客户端发送数据时遇到了困难。Twisted 不允许我连续发送多个响应。这就是我想要做的：

我有处理播放器状态更改并将它们重新发送给其他客户端的方法：

```
def handle_stateChanged(self, data):
    #get playerState from client and override local copy of player
    #check if all players are ready
    #if needed, change gameState form 'inLOBBY' to 'inGAME'
    #if gameState == 'inGAME', start 'proceed' method (see below)
    #send message about player and game state to others 
```

和`proceed`方法（使用 1s/30 调用一次`LoopingCall`）只需计算所有游戏内容并将其发送给玩家。这两个函数相互阻塞，分别工作得很好，但是当它们一起工作时，只有其中一个函数的数据到达目的地。像这样的东西也不起作用：

```
def dataRecived(self, data):
    ...
    sendData(data1) #only data1 is delivered
    sendData(data2)
    ... 
```

我不知道这是 TCP 的工作方式还是我对 Twisted 缺乏了解。我应该如何向客户端发送更新并在后台处理用户输入？

编辑：

```
class Server(Protocol):
    def __init__(self, factory):
        self.factory = factory
        self.player = None #when connection is made here goes my player class
        self.world = factory.world
        ...
        self.factory.loop = LoopingCall(self.proceed)

    def dataReceived(self, data):
        data = pickle.loads(data)
        #this calls 'handle_stateChanged'
        getattr(self, 'handle_{}'.format(data['header']))(data) #data[header] = 'stateChanged'

    def handle_stateChanged(self, data):      
        isReady = data['isReady']
        self.player.isReady = isReady

        if isReady:
            count = 0
            for connection in self.factory.connections.values():
                if connection.player.isReady:
                    count += 1

            if count == len(self.factory.connections) and count > 1 and self.world.state == 'inLOBBY':
                self.world.state = 'inGAME'
                self.world.playersDistribution(self.factory.connections)
                self.factory.loop.start(1 / 30)

        data['state'] = self.world.state
        data['players'] = self.getPlayers()        
        self.sendToOthers(data)

    def sendToOthers(self, data, omitId = None):
        connections = self.factory.connections

        for key in connections.keys():
            if key != omitId:
                connections[key].sendData(data)

    def proceed(self):
        #It's only a prototype of my method. 
        #The point is that the client keep getting
        #'test' and data from self.sendToOthers(data) in handle_stateChanged
        #is not being delivered even if the method (handle_stateChanged) is called

        if self.world.state != 'inGAME':
            return

        data = {'header' : 'message', 'body' : 'test'}
        #When i comment this out, handle_stateChanged works fine and sends data
        self.sendToOthers(data)

class ServerFactory(Factory):

    def __init__(self, world):
        self.world = world
        self.connections = {}

    def buildProtocol(self, addr):
        return Server(self) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:25:40.300

您的服务器存在远程任意代码执行漏洞。

在极少数情况下（如果有的话）您应该解开从网络接收到的数据。这样做允许任何对等方出于任意（可能是恶意的）目的劫持您的服务器。 [请注意 pickle 文档中的大红框](http://docs.python.org/2/library/pickle.html)。

除了这个严重的安全问题之外，您遇到的仅发送的第一条数据被解释的问题可能是由于两条数据在穿越网络时被连接在一起造成的。您的接收代码没有适当的框架支持，因此无法判断有两条消息。碰巧pickle会从第一条消息加载数据，然后忽略代表第二条消息的额外数据，有效地将这些数据丢弃在地板上。

如果您切换到更具表现力的协议（比裸 TCP 传输未成帧的 pickle 字符串更具表现力），例如[AMP](http://amp-protocol.net/) ，安全问题和成帧问题都可以解决。

# google-analytics - 破解 Google Analytics 进行多变量测试？

> ID：14588136
> 
> 赞同：2
> 
> 时间：2013-01-29T17:00:30.357
> 
> 标签：google-analytics, google-analytics-api, ab-testing, multivariate-testing

我想在我的站点中实现 MVT（多变量测试），并想知道是否可以使用 Google Analytics 和一些服务器端代码来执行此操作，而不是依赖昂贵的解决方案。

有建议的方法吗？

一种想法是让服务器端代码随机绘制一个元组，其中包含将出现的元素替代项，并将其中一个 GATC 代码（例如活动内容）设置为其字符串表示形式。例如，代码为文本绘制选项 #2，为图像绘制选项 #3，并将活动内容设置为“text2_image3”。以后可以很容易地在 Excel 或其他工具中分析结果。

它会起作用吗？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:31:51.123

如果您想编写自己的 JS，[https://github.com/danmaz74/ABalytics是一个不错的起点](https://github.com/danmaz74/ABalytics)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:38:56.410

If you wanted to go with a homemade solution instead of existing services (e.g. [Optimizely](https://www.optimizely.com/), [experimently](http://experiment.ly/), or [convert](http://www.convert.com/)) I'd suggest the following:

1.  **Generate the code**

    Your server side code generates the recipes (layouts) for the user based on whatever metrics you want . This is commonly just a % of traffic split. Don't forget to include the unaltered version to compare your data to.

2.  **Give it an identifier**

    When your server side code generates the recipes, it should include the a specific value for a custom variable for that page. This unique value should include an identifier to each recipe displayed on the page. E.g. if you have menu A, headline D, and body image G you'd have `A:D:G`. If you had menu C, headline E, body image I, you'd have `C:E:I`.

    The type of custom variable depends on your test. Session level would allow you to see how that specific recipe affected the user within a visit. A more standard method would be to set it to a visitor level would allow your recipes to have attribution on returning visits.

3.  **Run the test & analyze the results**

    From there, run the test, gather your data. Once you feel you have statistically significant results, you can stop the test and start to fully analyze your data.

### Notes

*   The names of the recipes should be unique. For instance, I used A - C for the menu, D - F for the headline, and G - I for the body image. This allows you to create segments based off of that recipe.
*   Don't forget to include the control recipe IDs in your test!
*   If you're running multiple tests (even if not at the same time), I'd strongly suggest prefixing the custom variable value with the test name / identifier.

This is essentially what Google Experiments does with A/B testing on their backend.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T08:49:42.940

我发现了这个项目，虽然有点老，但似乎很有趣：[https ://github.com/jamesyu/cohorts](https://github.com/jamesyu/cohorts)

# c++ - 重载 operator+ 时的差异

> ID：14588139
> 
> 赞同：0
> 
> 时间：2013-01-29T17:00:47.423
> 
> 标签：c++, overloading

当我重载 operator+ 时发生了一些奇怪的事情

我有一个单链表，我重载了 operator+ 和 operator=

这是我对两者的实现（编辑：使用 insertFront 和复制构造函数）：

```
 AnyList::AnyList(const AnyList& list)
{
count = list.getCount();
first = list.getFirst();
AnyList a;
a.setFirst(first);
a.setCount(count);

Node *current = first;
for (int i = 0; i < count; ++i)
{
    a.insertFront(current->getData());
    current = current ->getLink();
}
} 
```

-

```
 void AnyList::insertFront(int value)
{
Node *newNode = new Node;
newNode -> setData(value);
newNode -> setLink(first);
first = newNode;
++count;
}

AnyList AnyList::operator+ (const AnyList& list) const
{

Node *current = first;
Node *listCurrent = list.getFirst();

int sumHolder = 0;
AnyList temp;
while(current != NULL)
{
    sumHolder = current ->getData() + listCurrent ->getData();
    temp.insertFront(sumHolder);
    current = current ->getLink();
    listCurrent = listCurrent ->getLink();
}

return temp;
}

AnyList& AnyList::operator=(const AnyList& rightSide)
{

if(&rightSide != this)
{
    Node *travel = rightSide.getFirst();

    first = rightSide.getFirst();

    Node *original = first;

    while (travel != NULL)
    {
        original ->setData(travel ->getData());
        original ->setLink(travel ->getLink());
        travel = travel->getLink();
        original = original ->getLink();
    }
}

return *this;
} 
```

以下是主要内容：

```
AnyList mylist;
AnyList mylist2;

for (int i = 0; i < 10; ++i)
{
    mylist.insertFront(i);
}
for (int i = 10; i < 20; ++i)
{
    mylist2.insertFront(i);
}

mylist.print();
cout << endl << endl;
mylist2.print();
cout << endl;
AnyList sumList = mylist + mylist2;
sumList.print();
cout << endl; 
```

我的输出如下（这是我想要的输出）：

```
 9 8 7 6 5 4 3 2 1 0 

19 18 17 16 15 14 13 12 11 10

10 12 14 16 18 20 22 24 26 28 
```

所以，我的问题是，当我改为写：

```
 AnyList sumList;
sumList = mylist + mylist2;
sumList.print(); 
```

当它进入打印函数并尝试从函数 getData() 返回数据时出现错误访问错误

我超级不知道为什么会这样，任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:07:15.280

`mylist + mylist2`创建一个临时的，其析构函数在完整表达式的末尾被调用。您的赋值运算符执行浅拷贝，因此如果内存被调用的临时析构函数释放，`sumList`现在将具有悬空指针。

阅读如何进行深拷贝。

要对此进行测试，您可以暂时删除析构函数。只是为了测试 - 如果您正在管理资源，您将需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:09:59.307

这段代码

```
AnyList sumList = mylist + mylist2; 
```

调用复制构造函数而不是`operator=`（请参阅复制初始化）

和这个

```
sumList = mylist + mylist2; 
```

确实来电`operator=`

您的复制构造函数很可能会执行深层复制，这是正确的并且不会导致崩溃。你`operator=`做了浅拷贝，结果导致崩溃

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:10:58.700

Why do you get an error in one case and not the other? Because `AnyList sumList = mylist + mylist2;` *does not* call the = operator but instead invokes the copy constructor. Whereas

```
AnyList sumList;
sumList = mylist + mylist2; 
```

calls the default constructor and then invokes the = operator.

You haven't shown us enough of your code to be sure why it is crashing when you use the operator= but I'd suggest that Luchian Grigore's answer probably has the right of it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:11:27.733

Your assignment operator copies the "first" pointer from the other list, so that both lists end up sharing the same nodes. (The loop in the operator is just a long-winded way of doing nothing, since you're assigning each node's data an pointer to themselves). Presumably, the list has a destructor which deletes its nodes, so you will end up with both lists trying to delete the same nodes; hence the error (or some other undefined behaviour).

If you want the list to be copyable and assignable at all, which is perhaps not a good idea, then you will have to do a "deep" copy, creating new nodes for the assigned-to list. Also, remember to delete the old nodes before reassigning your pointers to them.

Better still, unless you're learning how to implement a linked list, use the containers provided by the standard library.

# c++ - 如何使模板类成为类的朋友？

> ID：14588143
> 
> 赞同：0
> 
> 时间：2013-01-29T17:01:12.883
> 
> 标签：c++, visual-studio-2010, templates, visual-c++

考虑以下部分代码：

```
namespace Util {
    template <class T>
    class SimpleSingleton
    {
    public:
        static T& getOne() {
            if (instance == NULL)
                instance = new T();
            return *instance;
        }
    private:
        static T* instance;
        // ...
    };
    T *Singleton<T>::instance = NULL;
}
class A
{
    friend class Util::Singleton<A>;
    //...
private:
    A() {};
    //...
};
typedef Util::Singleton<A> SingletonA;

void main()
{
    A a = SingletonA::Instance(); // c2248: 'A::A' : cannot access private member declared in class 'A'
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:20:28.130

改变

```
A a = SingletonA::Instance(); 
```

至

```
A& a = SingletonA::Instance(); 
```

如所写，代码尝试复制对象，但复制构造函数是私有的。

# python - Python 通过 gmail 发送自动电子邮件

> ID：14588149
> 
> 赞同：-5
> 
> 时间：2013-01-29T17:01:29.030
> 
> 标签：python, email, automation, gmail

我正在与一家使用 gmail 的公司合作。无论如何，我可以使用python每天发送两到三次带有提醒的自动电子邮件吗？从我用谷歌搜索或看到的内容来看，我只能找到一般如何使用 python 发送电子邮件的方法。无论如何要自动化它？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:12:39.460

如果我正确理解你的问题，听起来你唯一缺少的就是经常自动运行你的 Python 的东西。

我会推荐 crontab。通过终端，您可以键入：`crontab -e`。从那里，添加一个类似于以下内容的条目：

`0 0,4,8,12,16,20 * * * python /absolute/path/to/my/file.py`

“0,4,8,12,16,20”表示它将在每天午夜、凌晨 4 点、早上 8 点、中午 12 点、下午 4 点和晚上 8 点运行 python 脚本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T17:06:57.047

这是通过 gmail 通过 python 发送邮件的一个[很好的解决方案。](http://segfault.in/2010/12/sending-gmail-from-python/)

# c# - 如何使用 CertEnroll 生成扩展验证自签名证书？

> ID：14588150
> 
> 赞同：4
> 
> 时间：2013-01-29T17:01:31.023
> 
> 标签：c#, azure, com, x509, certenroll

由于 Windows Azure 中的一个错误，所有与来自 Windows 8 应用程序的 Azure REST API 一起使用的自签名客户端证书都必须指定为扩展验证证书。

为了提供更好的用户体验，我试图在远程服务器上生成这个自签名证书。我正在使用[Certificate Enrollment API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374863%28v=vs.85%29.aspx)，这是一个作为 Windows 一部分分发的 COM 库，如对[如何使用 C# 创建自签名证书](https://stackoverflow.com/q/13806299/138578)的问题的[回答中所述。](https://stackoverflow.com/a/13806300/138578)

代码基本相同，只是为了我自己的使用稍作修改：

```
public static X509Certificate2 CreateSelfSignedCertificate(
    string cname,
    string friendlyName,
    string password)
{
    // create DN for subject and issuer
    var dn = new CX500DistinguishedName();
    dn.Encode("CN=" + cname, X500NameFlags.XCN_CERT_NAME_STR_NONE);

    // create a new private key for the certificate
    CX509PrivateKey privateKey = new CX509PrivateKey();
    privateKey.ProviderName = "Microsoft Base Cryptographic Provider v1.0";
    privateKey.MachineContext = true;
    privateKey.Length = 2048;
    privateKey.KeySpec = X509KeySpec.XCN_AT_SIGNATURE; // use is not limited
    privateKey.ExportPolicy 
        = X509PrivateKeyExportFlags.XCN_NCRYPT_ALLOW_PLAINTEXT_EXPORT_FLAG;
    privateKey.Create();

    // Use the stronger SHA512 hashing algorithm
    var hashobj = new CObjectId();
    hashobj.InitializeFromAlgorithmName(
        ObjectIdGroupId.XCN_CRYPT_HASH_ALG_OID_GROUP_ID,
        ObjectIdPublicKeyFlags.XCN_CRYPT_OID_INFO_PUBKEY_ANY, 
        AlgorithmFlags.AlgorithmFlagsNone,
        "SHA512");

    // Create the self signing request
    var cert = new CX509CertificateRequestCertificate();
    cert.InitializeFromPrivateKey(
        X509CertificateEnrollmentContext.ContextMachine,
        privateKey,
        string.Empty);

    cert.Subject = dn;
    cert.Issuer = dn; // the issuer and the subject are the same
    cert.NotBefore = DateTime.Now;
    cert.NotAfter = DateTime.Now.AddYears(50); 
    cert.HashAlgorithm = hashobj;

    var clientAuthenticationOid = new CObjectId();
    clientAuthenticationOid.InitializeFromValue("1.3.6.1.5.5.7.3.2");

    // Set up cert to be used for Client Authentication.
    var oids = new CObjectIds();
    oids.Add(clientAuthenticationOid);

    var eku = new CX509ExtensionEnhancedKeyUsage();
    eku.InitializeEncode(oids);

    cert.X509Extensions.Add((CX509Extension)eku);

    // Add the certificate policy.
    var policy = new CCertificatePolicy();
    policy.Initialize(clientAuthenticationOid);

    // THIS IS WRONG - NEEDS A DIFFERENT QUALIFIER
    var qualifier = new CPolicyQualifier();
    qualifier.InitializeEncode(
        "c0",
         PolicyQualifierType.PolicyQualifierTypeUserNotice);

    policy.PolicyQualifiers.Add(qualifier);

    var policies = new CCertificatePolicies();
    policies.Add(policy);

    var ecp = new CX509ExtensionCertificatePolicies();
    ecp.InitializeEncode(policies);

    cert.X509Extensions.Add((CX509Extension)ecp);

    cert.Encode();

    // Do the final enrolment process
    var enroll = new CX509Enrollment();
    enroll.InitializeFromRequest(cert); // load the certificate
    enroll.CertificateFriendlyName = friendlyName;
    string csr = enroll.CreateRequest(); // Output the request in base64

    // and install it back as the response
    enroll.InstallResponse(
        InstallResponseRestrictionFlags.AllowUntrustedCertificate,
        csr,
        EncodingType.XCN_CRYPT_STRING_BASE64,
        ""); // no password

    // output a base64 encoded PKCS#12 for import to .NET
    var base64encoded = enroll.CreatePFX(
        password,
        PFXExportOptions.PFXExportChainWithRoot);

    // instantiate the target class with the PKCS#12 data
    return new X509Certificate2(
        System.Convert.FromBase64String(base64encoded),
        password,
        X509KeyStorageFlags.Exportable);
} 
```

我发现[`ICertificatePolicy`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375225%28v=vs.85%29.aspx)界面似乎代表了正确的结构类型，但我无法推断出使用权[`IPolicyQualifier`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376803%28v=vs.85%29.aspx)。在我的代码中，限定符是

为清楚起见，您可以在此处配置 Windows 8 证书管理器中的信息：

![在哪里启用扩展验证](../Images/09dac2f18291ffa2b84578c697a72456.png)

在证书上产生此属性：

![证书上的扩展验证属性](../Images/cefc3fb23a4f15af641b9307a147412d.png)

我的代码目前产生这个属性：

![证书上没有完全扩展的验证属性](../Images/d34031b2590307242d579aa7cf2f2a4f.png)

关闭，但还没有。

是否有另一种方法将数据加载到 中，`IPolicyQualifier`以便产生预期的结果，也许使用 InitialiseDecode 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:21:35.037

如果您想将客户端身份验证 OID 设置为“1.3.6.1.5.5.7.2”，那么我认为您的代码确实可以按预期工作。您如何验证代码没有设置此值？

我编写了以下代码来使用您的代码保存生成的证书：

```
X509Certificate2 xx = CreateSelfSignedCertificate("Avkash CNAME", "Test User Friendly Name", "xx");
byte[] bCertExported = xx.Export(X509ContentType.Pkcs12, "xx");
File.WriteAllBytes("c:\\Installbox\\test.pfx", bCertExported); 
```

在我在本地安装证书并检查它的客户端身份验证 OID 后，它确实显示如下：

![在此处输入图像描述](../Images/e5bc22537f19436c5dd2dba11597dd7d.png)

# sql - 如何订购具有全选功能的 UNION 查询

> ID：14588151
> 
> 赞同：2
> 
> 时间：2013-01-29T17:01:31.493
> 
> 标签：sql, database, ms-access

所以这个查询是针对数据库的组合框的，我试图对出现在里面的项目列表进行排序，但是它不起作用。这是查询

```
Select "*",  "<<All Records>>" 
FROM Treatment 
UNION 
Select Treatment.TreatmentID, Treatment.Treatment 
From Treatment; 
```

我尝试为查询的两个部分添加 Order By，并尝试切换它，仍然无法正常工作，有什么想法吗？我试过了`ORDER BY Treatment.TreatmentID`，因为那是那个表的主键

顺便说一句，当不涉及联合时，ORDER BY 本身就在第二部分起作用。目前，数据排序如下：

```
<<All Records>>
1 Treatment Name
8 Treatment Name
9 Treatment Namw
10 Treatment Name
11 Treatment Name 
12 Treatment Name
2 Treatment Name
Etc... 
```

数字是 ID，治疗名称（显然并非都称为治疗名称）来自治疗名称字段。我需要顶部的“所有记录”，然后按 ID 对联合的第二部分中的数据进行排序。

提前致谢，

亚当

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:04:24.473

您可以做的一件事是添加一个可用于对数据进行排序的字段：

```
Select "*" as AllRec,  "<<All Records>>" as Allrecords, 1 as SortOrder
FROM Treatment 
UNION 
Select Treatment.TreatmentID, Treatment.Treatment, 2 as SortOrder
From Treatment
ORDER BY SortOrder, AllRec; 
```

总是最后应用，`ORDER BY`所以它不会知道`Treatment.TreatmentID`列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:03:49.607

你可以这样做：

```
Select q.* from 
(Select "*", "<>" 
FROM Treatment UNION 
Select Treatment.TreatmentID, Treatment.Treatment 
From Treatment) q
ORDER BY q.whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T22:24:12.107

SELECT, "--- 所有记录 ---", SortOrder = 0

联盟

SELECT TreatmentID, Treatment, SortOrder = 1 FROM Treatment

ORDER BY SortOrder，处理；

* * *

*（只晚了两年半！）*

# asp.net - 在 Gridview 中找不到 TemplateField 控件

> ID：14588156
> 
> 赞同：0
> 
> 时间：2013-01-29T17:01:39.653
> 
> 标签：asp.net, gridview

我开始这个烂摊子是因为`GridViewInsertEventArgs.NewValues`没有从 TemplateField 返回我的值

我尝试访问我的 DropDownList`ctl00$MainContent$GridView1$ctl13$ctl07`我找到了它周围的所有项目，但是

没有`e.Row.Controls[7].Controls[0];`

```
e.Row.Controls[1].Controls[0] returns ctl00$MainContent$GridView1$ctl13$ctl01
e.Row.Controls[2].Controls[0] returns ctl00$MainContent$GridView1$ctl13$ctl02
e.Row.Controls[3].Controls[0] returns ctl00$MainContent$GridView1$ctl13$ctl03 
```

等等只有7个不起作用

```
 also tried 

e.Row.Cells[7].Controls[0] 
```

似乎服务器根本看不到控件

```
<table class="table" cellspacing="0" cellpadding="30" rules="all" border="1" id="MainContent_GridView1" style="color:#333333;border-color:Silver;border-style:Double;width:100%;border-collapse:collapse;">
    <tr style="color:White;background-color:#507CD1;font-weight:bold;">
        <th scope="col">Action</th>
        <th scope="col">SystemIdentifier_1</th>
        <th scope="col">SystemName_1</th>
        <th scope="col">Description_1_1</th>
        <th scope="col">DefaultValue_1</th>
        <th scope="col">DefaultDeviceTypeRef_1</th>
        <th scope="col">SqlDbType_1</th>
        <th scope="col">MaxParamSize_1</th>
    </tr>
    <tr style="background-color:White;">
        <td><a href="javascript:__doPostBack(&#39;ctl00$MainContent$GridView1$ctl13$ctl00&#39;,&#39;&#39;)" style="color:#333333;">Insert</a>&nbsp;</td>
        <td><input name="ctl00$MainContent$GridView1$ctl13$ctl03" type="text" title="SystemIdentifier_1" /></td>
        <td><input name="ctl00$MainContent$GridView1$ctl13$ctl04" type="text" title="SystemName_1" /></td>
        <td><input name="ctl00$MainContent$GridView1$ctl13$ctl05" type="text" title="Description_1_1" /></td>
        <td><input name="ctl00$MainContent$GridView1$ctl13$ctl06" type="text" title="DefaultValue_1" /></td>
        <td>
            <select name="ctl00$MainContent$GridView1$ctl13$ctl07">
                <option value="1">TC4020G</option>
                <option value="2">Warehouse Station</option>
                <option value="3">IssueStation</option>
                <option value="4">PersonalizationStation</option>
                <option value="5">Smart Card</option>
                <option value="6">Loader</option>
                <option value="7">Server Service</option>
            </select>
        </td>
        <td><input name="ctl00$MainContent$GridView1$ctl13$ctl08" type="text" title="SqlDbType_1" /></td>
        <td><input name="ctl00$MainContent$GridView1$ctl13$ctl09" type="text" title="MaxParamSize_1" /></td>
    </tr> 
```

我的组合框模板：

```
 public class ComboBoxTemplate : ITemplate
    {

        ListItemType _type;
        string _colName;
        Dictionary<string, string> _items;

        public ComboBoxTemplate(ListItemType type, string colname,Dictionary<string,string> items)
        {
            _type = type;
            _colName = colname;
            _items = items;
        }

        public void InstantiateIn(Control container)
        {
            try
            {
                switch (_type)
                {
                    case ListItemType.Item:

                        Label l = new Label();
                        l.DataBinding += l_DataBinding;
                        container.Controls.Add(l);

                        break;
                    case ListItemType.EditItem:

                        DropDownList ddl = new DropDownList();
                        foreach (var obj in _items)
                        {
                            ddl.Items.Add(new ListItem(obj.Value, obj.Key));
                        }
                        ddl.DataBinding += l_DataBinding;
                        container.Controls.Add(ddl);

                        break;
                }
            }
            catch (Exception ex)
            {

                return;
            }

        }

        void l_DataBinding(object sender, EventArgs e)
        {                 
            try
                    {
            GridViewRow container;
            object dataValue;
            switch (sender.GetType().ToString())
            {
                case "System.Web.UI.WebControls.Label":
                    Label label = (Label)sender;
                    container = (GridViewRow)label.NamingContainer;
                    dataValue = DataBinder.Eval(container.DataItem, _colName);
                    if (dataValue != DBNull.Value)
                    {
                        if (_items.ContainsKey(dataValue.ToString()))
                        {
                            label.Text = _items[dataValue.ToString()];
                        }
                        else
                        {
                            label.Text = dataValue.ToString();
                        }
                    }
                    break;
                //use the DatePickerControl.DatePicker type instead of ddl
                case "System.Web.UI.WebControls.DropDownList":

                    DropDownList ddl = (DropDownList)sender;
                    container = (GridViewRow)ddl.NamingContainer;

                    dataValue = DataBinder.Eval(container.DataItem, _colName);

                    if (dataValue != DBNull.Value)
                    {
                        ddl.SelectedValue = dataValue.ToString();

                    }
                    break;
                    }    

            }
            catch (Exception ex)
            {

                return;
            }
        }
    } 
```

像这样创建组合框（在数据绑定上）：

```
 var fkdata = Model.GridProvider.GetForgienKeyData(x);
                templateColumn.EditItemTemplate = new ComboBoxTemplate(ListItemType.EditItem, column.ColumnName, fkdata);
                templateColumn.ItemTemplate = new ComboBoxTemplate(ListItemType.Item, column.ColumnName, fkdata); 
```

# javascript - 将日期对象转换为日期字符串

> ID：14588158
> 
> 赞同：3
> 
> 时间：2013-01-29T17:01:47.377
> 
> 标签：javascript, jquery, date

我需要将日期对象转换为 SQL Server 可以理解的字符串。这是我到目前为止所拥有的：

```
(function() {
    Date.prototype.MMDDYYYY = function() {
        var month, day, year;
        month = String(this.getMonth() + 1);
        if (month.length === 1) {
            month = "0" + month;
        }
        day = String(this.getDate());
        if (day.length === 1) {
            day = "0" + day;
        }
        year = String(this.getFullYear());
        return month + '/' + day + '/' + year;
    }
})();

(function() {
    Date.prototype.HHMMSS = function() {
        var hour, minute, second;
        hour = String(this.getHours());
        minute = String(this.getMinutes());
        second = String(this.getSeconds());
        return '' + hour + ':' + minute + ':' + second;
    }
})();

function DateTimeFormat(objDate) {
    return objDate.MMDDYYYY() + ' ' + objDate.HHMMSS();
} 
```

我得到的错误是： Object Tue Jan 29 ...（东部标准时间）没有方法 MMDDYYYY。

这可能很明显，但我不明白如何制作原型。使用 jQuery 是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:19:53.553

我认为问题不在于范围，而是如何创建 objDate！我做了几次尝试，当 objDate 是一个字符串时会出现这个错误。所以，这段代码按预期工作，问题是传递给 DateTimeFormat 的参数：我认为它是这样创建的，`objDate = Date()`而不是`objDate = new Date()`. 后者将正确创建一个 Date 对象，而不是返回 String 格式的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:04:28.903

问题是您将字符串传递给函数`DateTimeFormat`。

你可以通过添加这个来确保它是一个日期对象......

```
objDate = new Date(objDate) 
```

# c - 在 c 中查找小于的位运算符

> ID：14588160
> 
> 赞同：8
> 
> 时间：2013-01-29T17:01:56.600
> 
> 标签：c, bitwise-operators

这是一个家庭作业，需要我想出一个函数来确定是否`x < y`，如果是，我必须返回`1`，只使用位运算符`( ! ~ & ^ | + << >> )`。我只被允许使用 constants `0 - 0xFF`，并假设一个 32 位整数。没有循环，铸造等。

我发现如果您只检查 4 位，您`x - y`可以确定是否`x`小于`y`. 如果`x`是`8`并且`y`是`9`结果将`1111`是`-1`。

```
int lessThan(int x, int y){
    int sub = x + (~y+1); 
```

我感到困惑的是现在如何将该结果与 进行比较`x`以确定它确实小于`y`。

我一直[在这里](https://stackoverflow.com/q/10096599/3160529)检查这篇文章。

但是我对这种解决问题的方法有点困惑。我已经计算出移位以实现**位涂抹**，但我对如何使用该结果来比较小于或大于的值感到困惑。我只是在寻找一点指导和清晰度，而不是解决方案，这不是我的意图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-25T15:25:56.797

我认为可以通过以下方式实现：

1.  异或两个数字，这会给你不同的位
2.  获取不同的最重要的位，因为这会有所作为
3.  检查最重要的位是否属于更大的值

代码：

```
int less(int x, int y) {
    //Get only diffed bits
    int msb = x ^ y;
    //Get first msb bit
    msb |= (msb >>  1);
    msb |= (msb >>  2);
    msb |= (msb >>  4);
    msb |= (msb >>  8);
    msb |= (msb >> 16);
    msb = msb - (msb >> 1);
    //check if msb belongs to y;
    return !((y & msb) ^ msb);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-18T16:48:10.433

实现减法的想法很好。

```
int sub = x + (~y+1); 
```

从这里，您只需要检查是否`sub`为负，即提取其符号位。这就是技术难点出现的地方。

假设`x`和`y`是无符号的 32 位整数。然后减法的结果可以用一个有符号的 33 位整数表示（检查它的最小值和最大值以查看）。也就是说，`x + (~y+1)`直接使用表达式没有帮助，因为它会溢出。

如果是 31 位无符号数怎么办`x`？`y`那么，`x + (~y+1)`可以用一个 32 位的有符号数来表示，它的符号位告诉我们是否`x`小于`y`：

```
answer(x, y) := ((x + (~y+1)) >> 31) & 1 
```

要将32 位`x`和`y`从 32 位转换为 31 位，请将它们的 MSB（最高有效位）和所有其他 31 位分成不同的变量：

```
msb_x = (x >> 31) & 1;
msb_y = (y >> 31) & 1;
x_without_msb = x << 1 >> 1;
y_without_msb = y << 1 >> 1; 
```

然后考虑它们的 MSB 的 4 种可能组合：

```
if (msb_x == 0 && msb_y == 0)
    return answer(x_without_msb, y_without_msb);
else if (msb_x == 1 && msb_y == 0)
    return 0; // x is greater than y
else if (msb_x == 0 && msb_y == 1)
    return 1; // x is smaller than y
else
    return answer(x_without_msb, y_without_msb); 
```

将所有这些 if 语句转换为一个大而丑陋的逻辑表达式是“读者练习”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:18:12.900

这是我的尝试（编译结果，x > y 然后 0，x < y 然后 1，x == y 然后 1）：

```
((((x + ~y) >> 31) + 1))^1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T20:56:24.117

只是想添加到这个讨论中，因为我不确定它是否已经被提及。这里的一些人提出了这一点

```
( x + ((~y) + 1)) >> 32) & 0x1 
```

不适用于溢出条件。对于二进制补码，整数 x 和 y 相加的溢出条件是：

x > 0, y > 0, (x+y) < 0

x < 0, y < 0, (x+y) > 0

在这种情况下，我们将 x 和 (-y) 相加，并且还必须在确定 (xy)<0 之前检查溢出条件

```
long isLess(long x, long y) {
    long xs= (x>>63) & 0x1L; 
    long ys= (y>>63) & 0x1L;
    long s = x + (~y +1L);

    long ss= (s>>63) & 0x1L;

    /*
    //Code without SOP result for clarity
    if(xs & ~ys & ~ss) return 1;
    if(~xs & ys & ss)  return 0;

    return ss;
    */

    return (((xs | ~ys | ~ss) & (~xs | ys | ss)) & ss) |
           (((~xs & ys & ss) | (xs & ~ys & ~ss)) & ~ss);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-17T20:46:14.903

为了知道是否`x < y`，您可以简单地询问是否`x - y < 0`。

换句话说， 的结果的符号是什么`x - y`。

既然你说你要假设 32 位整数，以下将提供正确的结果：

```
((x - y) >> 31) & 0x1 
```

# android - Android RSS 阅读器在第一次执行后中断

> ID：14588167
> 
> 赞同：0
> 
> 时间：2013-01-29T17:02:22.570
> 
> 标签：android, xml, xml-parsing, rss, sax

我正在为我的校报创建一个应用程序，但在尝试显示全文时遇到了问题。目前我有一个从 RSS 提要中提取的文章列表，当单击它时，它会显示文章的内容。然而，只有第一段显示在 TextView 中，无论它有多长。这让我也相信它与`<p></p>`HTML 标签有关。我对 RSS 提要或解析 XML 不是很熟悉（这是我第一次尝试），并且一直在寻找方法来完成我想要完成的工作。

来自：[Android TextView 一段后截断](https://stackoverflow.com/questions/13690273/android-textview-cuts-off-after-one-paragraph)

我正在根据上述问题的结果创建这个问题。我认为我的应用程序的问题与 TextView 及其属性有关，但是通过使用我在其中硬编码的纯文本运行得很好。

根据我尝试过的评论和事情，问题似乎在于应用程序如何从 RSS 提要中读取信息。就像我之前说的，这是我第一次在 Android 中使用 RSS 提要，我正在使用示例项目代码（可以在前面的问题中找到）。以下是与 RSS 提要相关的代码：

**RSSFeed** .java：

```
public class RSSFeed {

    private String title = null;
    private String description = null;
    private String link = null;
    private String pubdate = null;
    private String content = null;
    private List<RSSItem> itemList;

    RSSFeed(){
        itemList = new Vector<RSSItem>(0);
    }

    void addItem(RSSItem item){
        itemList.add(item);
    }

    RSSItem getItem(int location){
        return itemList.get(location);
    }

    List<RSSItem> getList(){
        return itemList;
    }

    void setTitle(String value){
        title = value;
    }
    void setDescription(String value){
        description = value;
    }
    void setLink(String value){
        link = value;
    }
    void setPubdate(String value){
        pubdate = value;
    }
    public void setContent(String value) {
        content=value;
    }

    String getTitle(){
        return title;
    }
    String getDescription(){
        return description;
    }
    String getLink(){
        return link;
    }
    String getPubdate(){
        return pubdate;
    }

    String getContent() {
        return content;
    }

} 
```

**RSSHandler** .java：

```
public class RSSHandler extends DefaultHandler {

// Feed and Article objects to use for temporary storage
private Article currentArticle = new Article();
private List<Article> articleList = new ArrayList<Article>();

// Number of articles added so far
private int articlesAdded = 0;

// Number of articles to download
private static final int ARTICLES_LIMIT = 15;

//Current characters being accumulated
StringBuffer chars = new StringBuffer();

/* 
 * This method is called every time a start element is found (an opening XML marker)
 * here we always reset the characters StringBuffer as we are only currently interested
 * in the the text values stored at leaf nodes
 * 
 * (non-Javadoc)
 * @see org.xml.sax.helpers.DefaultHandler#startElement(java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)
 */
public void startElement(String uri, String localName, String qName, Attributes atts) {
    chars = new StringBuffer();
}

/* 
 * This method is called every time an end element is found (a closing XML marker)
 * here we check what element is being closed, if it is a relevant leaf node that we are
 * checking, such as Title, then we get the characters we have accumulated in the StringBuffer
 * and set the current Article's title to the value
 * 
 * If this is closing the "Item", it means it is the end of the article, so we add that to the list
 * and then reset our Article object for the next one on the stream
 * 
 * 
 * (non-Javadoc)
 * @see org.xml.sax.helpers.DefaultHandler#endElement(java.lang.String, java.lang.String, java.lang.String)
 */
public void endElement(String uri, String localName, String qName) throws SAXException {

    if (localName.equalsIgnoreCase("title"))
    {
        Log.d("LOGGING RSS XML", "Setting article title: " + chars.toString());
        currentArticle.setTitle(chars.toString());

    }
    else if (localName.equalsIgnoreCase("description"))
    {
        Log.d("LOGGING RSS XML", "Setting article description: " + chars.toString());
        currentArticle.setDescription(chars.toString());
    }
    else if (localName.equalsIgnoreCase("pubDate"))
    {
        Log.d("LOGGING RSS XML", "Setting article published date: " + chars.toString());
        currentArticle.setPubDate(chars.toString());
    }
    else if (localName.equalsIgnoreCase("encoded"))
    {
        Log.d("LOGGING RSS XML", "Setting article content: " + chars.toString());
        currentArticle.setEncodedContent(chars.toString());
    }
    else if (localName.equalsIgnoreCase("item"))
    {

    }
    else if (localName.equalsIgnoreCase("link"))
    {
        try {
            Log.d("LOGGING RSS XML", "Setting article link url: " + chars.toString());
            currentArticle.setUrl(new URL(chars.toString()));
        } catch (MalformedURLException e) {
            Log.e("RSA Error", e.getMessage());
        }

    }

    // Check if looking for article, and if article is complete
    if (localName.equalsIgnoreCase("item")) {

        articleList.add(currentArticle);

        currentArticle = new Article();

        // Lets check if we've hit our limit on number of articles
        articlesAdded++;
        if (articlesAdded >= ARTICLES_LIMIT)
        {
            throw new SAXException();
        }
    }
}

/* 
 * This method is called when characters are found in between XML markers, however, there is no
 * guarantee that this will be called at the end of the node, or that it will be called only once
 * , so we just accumulate these and then deal with them in endElement() to be sure we have all the
 * text
 * 
 * (non-Javadoc)
 * @see org.xml.sax.helpers.DefaultHandler#characters(char[], int, int)
 */
public void characters(char ch[], int start, int length) {
    chars.append(new String(ch, start, length));
}

/**
 * This is the entry point to the parser and creates the feed to be parsed
 * 
 * @param feedUrl
 * @return
 */
public List<Article> getLatestArticles(String feedUrl) {
    URL url = null;
    try {

        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        url = new URL(feedUrl);

        xr.setContentHandler(this);
        xr.parse(new InputSource(url.openStream()));

    } catch (IOException e) {
        Log.e("RSS Handler IO", e.getMessage() + " >> " + e.toString());
    } catch (SAXException e) {
        Log.e("RSS Handler SAX", e.toString());
    } catch (ParserConfigurationException e) {
        Log.e("RSS Handler Parser Config", e.toString());
    }

    return articleList;
} 
```

}

**RSSItem** .java：

```
public class RSSItem {

private String title = null;
private String description = null;
private String link = null;
private String pubdate = null;
private String content = null;

RSSItem(){
}

void setTitle(String value){
    title = value;
}
void setDescription(String value){
    description = value;
}
void setLink(String value){
    link = value;
}
void setPubdate(String value){
    pubdate = value;
}
public void setContent(String value) {
    content=value;
}

String getTitle(){
    return title;
}
String getDescription(){
    return description;
}
String getLink(){
    return link;
}
String getPubdate(){
    return pubdate;
}

public String getContent() {
    return content;
}

@Override
public String toString() {
    // TODO Auto-generated method stub
    return title;
} 
```

}

**AllStoriesFragment** .java：

```
public class AllStoriesFragment extends ListFragment {

/*********************************************************************
 * RSS Async Task
 *********************************************************************/
public class RssLoadingTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        displayRss();
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        preReadRss();
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        //super.onProgressUpdate(values);
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        readRss();
        return null;
    }

}
/*********************************************************************
 * End RSS Async Task
 *********************************************************************/

private RSSFeed myRssFeed = null;

TextView feedTitle;
TextView feedDescription;

/*********************************************************************
 * Custom Array Adapter 
 *********************************************************************/

public class MyCustomAdapter extends ArrayAdapter<RSSItem> {

        public MyCustomAdapter(Context context, int textViewResourceId, List<RSSItem> list) {
            super(context, textViewResourceId, list);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            //return super.getView(position, convertView, parent);

            View row = convertView;

            if(row==null){
                LayoutInflater inflater=getActivity().getLayoutInflater();
                row=inflater.inflate(R.layout.row, parent, false);
            }
            //Set Item Title
            TextView listTitle=(TextView)row.findViewById(R.id.listtitle);
            listTitle.setText(myRssFeed.getList().get(position).getTitle());

            //Set Item PubDate
            TextView listPubdate=(TextView)row.findViewById(R.id.listpubdate);
            listPubdate.setText(myRssFeed.getList().get(position).getPubdate());

            if (position%2 == 0){
                listTitle.setBackgroundColor(0xff101010);
                listPubdate.setBackgroundColor(0xff101010);
            }
            else{
                listTitle.setBackgroundColor(0xff080808);
                listPubdate.setBackgroundColor(0xff080808);
            }

            return row;
        }
    }
    /*********************************************************************
     * End Custom Array Adapter 
     *********************************************************************/

   /** Called when the fragment is first created. */
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View v =  inflater.inflate(R.layout.fragment_allstories, null);
        Log.d("MainActivity", "AllStoriesFragment started.");

        feedTitle = (TextView)v.findViewById(R.id.feedtitle);
        feedDescription = (TextView)v.findViewById(R.id.feeddescription);
        startReadRss();

        return v ;
    }

   private void startReadRss(){
       new RssLoadingTask().execute();
   }

   private void preReadRss(){
       setListAdapter(null);

       Toast.makeText(getActivity(), "Reading RSS, Please wait.", Toast.LENGTH_LONG).show();
   }

   private void readRss(){
       try {
           URL rssUrl = new URL("http://www.campusslate.com/feed/");
           InputSource myInputSource = new InputSource(rssUrl.openStream());

           SAXParserFactory mySAXParserFactory = SAXParserFactory.newInstance();
           SAXParser mySAXParser = mySAXParserFactory.newSAXParser();

           RSSHandler myRSSHandler = new RSSHandler();

           XMLReader myXMLReader = mySAXParser.getXMLReader();

           myXMLReader.setContentHandler(myRSSHandler);
           myXMLReader.parse(myInputSource);

           myRssFeed = myRSSHandler.getFeed();
       } 
       catch (MalformedURLException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       } 
       catch (ParserConfigurationException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       } 
       catch (SAXException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       } 
       catch (IOException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       }
    }

   private void displayRss(){

       if (myRssFeed!=null){
           MyCustomAdapter adapter = new MyCustomAdapter(getActivity(), R.layout.row, myRssFeed.getList());
           setListAdapter(adapter);
       }
   }

   public void onListItemClick(ListView l, View v, int position, long id) {
       // TODO Auto-generated method stub
       Intent intent = new Intent(getActivity(), ShowDetails.class);
       intent.putExtra("keyPubdate", myRssFeed.getItem(position).getPubdate());
       intent.putExtra("keyLink", myRssFeed.getItem(position).getLink());
       intent.putExtra("keyTitle", myRssFeed.getItem(position).getTitle());
       intent.putExtra("keyContent", myRssFeed.getItem(position).getContent());
       startActivity(intent);
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId()){
    case (0): readRss();
      break;
    default:
      break;
    }

    return true;
   }
} 
```

ShowDetails.java 发布在另一个问题中，尽管代码可能与我目前的代码略有不同。现在的问题是列表中的每个项目都是从 RSS 源读取的最后一个项目。

如果我有足够的声誉，会发布图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:07:28.183

一个 XML 元素可能有多个文本节点。您的代码假定只有一个。`characters()`请在您的回调中使用附加操作，而不是设置操作。

# c# - 为什么在迭代集合时不应该修改集合

> ID：14588168
> 
> 赞同：2
> 
> 时间：2013-01-29T17:02:23.117
> 
> 标签：c#, .net, collections, ienumerable

我知道在.net 集合类型（或至少某些集合类型）中，当您对其进行迭代时，不允许修改集合。

例如在 List 类中存在这样的代码：

```
if (this.version != this.list._version)
 ThrowHelper.ThrowInvalidOperationException(ExceptionResource.InvalidOperation_EnumFailedVersion); 
```

但显然这是设计迭代器类的开发人员的决定，因为我可以提供一些实现`IEnumerable`，至少在底层集合被修改时不会抛出任何异常。

然后我有几个问题：

*   为什么在迭代集合时不应该修改集合？

*   是否可以创建一个支持在对其进行迭代时进行修改的集合，而不会出现任何其他问题？（注意：第一个答案也可以回答这个）

*   当 C# 编译器生成`Enumerator`接口实现时会考虑到这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:58:57.937

> 为什么在迭代集合时不应该修改集合？

迭代时可以修改某些集合，因此它不是全局坏的。在大多数情况下，*很难*编写一个有效的迭代器，即使底层集合被修改也能正常工作。在许多情况下，迭代器编写者会说他们只是不想处理它。

在某些情况下，当底层集合发生变化时，迭代器*应*该做什么并不清楚。有些情况是明确的，但对于其他情况，不同的人会期望不同的行为。每当您处于这种情况时，这表明存在更深层次的问题（您不应该改变正在迭代的序列）

> 是否可以创建一个支持在对其进行迭代时进行修改的集合，而不会出现任何其他问题？（注意：第一个答案也可以回答这个）

当然。

考虑这个迭代器的列表：

```
public static IEnumerable<T> IterateWhileMutating<T>(this IList<T> list)
{
    for (int i = 0; i < list.Count; i++)
    {
        yield return list[i];
    }
} 
```

如果您从基础列表中删除当前索引处或之前的项目，则迭代时将跳过项目。如果您在当前索引处或之前添加一个项目，则该项目将被复制。但是，如果您在迭代期间添加/删除超过当前索引的项目，那么就不会有问题。我们可以试着花点时间尝试查看是否从列表中删除/添加了一个项目并相应地调整索引，但它并不总是有效，因此我们无法处理所有情况。如果我们有类似的东西，`ObservableCollection`那么我们可以收到添​​加/删除及其索引的通知并相应地调整索引，从而允许迭代器处理底层集合的变异（只要它不在另一个线程中）。

由于 an 的迭代器`ObservableCollection`可以知道添加/删除任何项目的时间以及它们的位置，因此它可以相应地调整其位置。我不确定内置迭代器是否正确处理突变，但这里有一个可以处理底层集合的任何突变：

```
public static IEnumerable<T> IterateWhileMutating<T>(
    this ObservableCollection<T> list)
{
    int i = 0;
    NotifyCollectionChangedEventHandler handler = (_, args) =>
    {
        switch (args.Action)
        {
            case NotifyCollectionChangedAction.Add:
                if (args.NewStartingIndex <= i)
                    i++;
                break;
            case NotifyCollectionChangedAction.Move:
                if (args.NewStartingIndex <= i)
                    i++;
                if (args.OldStartingIndex <= i) //note *not* else if
                    i--;
                break;
            case NotifyCollectionChangedAction.Remove:
                if (args.OldStartingIndex <= i)
                    i--;
                break;
            case NotifyCollectionChangedAction.Reset:
                i = int.MaxValue;//end the sequence
                break;
            default:
                //do nothing
                break;
        }
    };
    try
    {
        list.CollectionChanged += handler;
        for (i = 0; i < list.Count; i++)
        {
            yield return list[i];
        }
    }
    finally
    {
        list.CollectionChanged -= handler;
    }
} 
```

*   如果一个项目从序列中的“早期”中删除，我们会正常继续而不跳过一个项目。

*   如果在序列中“更早”添加了一个项目，我们将不会显示它，但我们也不会显示其他项目两次。

*   如果一个项目从当前位置之前移动到之后，它将显示两次，但不会跳过或重复其他项目。如果一个项目从当前位置之后移动到当前位置之前，它将不会显示，但仅此而已。如果一个项目从集合中的后一个位置移动到另一个位置，则没有问题，移动将在结果中看到，如果它从较早的位置移动到另一个较早的位置，一切都很好，移动迭代器不会“看到”。

*   更换物品不是问题；但是，只有在当前位置“之后”时才能看到它。

*   重置集合会导致序列在当前位置优雅地结束。

请注意，此迭代器不会处理具有多个线程的情况。如果另一个线程在另一个线程迭代时改变了集合，则可能会发生不好的事情（项目被跳过或重复，甚至出现异常，例如索引超出范围异常）。这*确实*允许在迭代期间发生突变，其中要么只有一个线程，要么只有一个线程正在执行移动迭代器或改变集合的代码。

> 当 C# 编译器生成 Enumerator 接口实现时会考虑到这种情况吗？

编译器*不*生成接口实现；一个人会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T17:07:24.317

不允许在迭代集合时修改集合的一个重要原因是，如果集合中的元素被删除或插入新元素，它将导致迭代中断。（在集合中迭代工作的地方插入或删除了一个元素；现在下一个元素是什么？新的停止条件是什么？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:07:02.693

一个原因是线程安全。如果另一个线程正在添加到列表中，则无法保证迭代器`List<T>`以正确的方式从 a 的后备数组中读取，这可能会导致重新分配到新数组。

值得注意的是，即使枚举`List<T>`使用`for`循环也表现出这种缺乏线程安全性。

从[JaredPar 的这篇博客文章](http://blogs.msdn.com/b/jaredpar/archive/2009/02/11/why-are-thread-safe-collections-so-hard.aspx)中，他创建了一个`ThreadSafeList<T>`类：

> 该集合不再实现 IEnumerable。IEnumerable 仅在集合未在后台更改时才有效。以这种方式构建的集合无法轻松实现此保证，因此将其删除。

值得一提的是，并非所有的实现都`IEnumerable`不允许在枚举期间进行修改。[并发集合](http://blogs.msdn.com/b/pfxteam/archive/2008/08/12/8852005.aspx)可以，因为它们提供线程安全保证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:32:05.737

也许您可以这样做，但这将是超出 IEnumerable 和 IEnumerator 接口意图的意外行为。

[IEnumerable.GetEnumerator](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator%28v=vs.100%29.aspx)

> 只要集合保持不变，枚举数就保持有效。如果对集合进行了更改，例如添加、修改或删除元素，则枚举器将不可恢复地失效，并且其行为未定义。

这避免了像 LinkedList 这样的集合的问题。假设您有一个包含 4 个节点的链表，并且您迭代到第二个节点。然后改变链表，将第二个节点移动到链表的头部，将第三个节点移动到链表的尾部。到那时，对您的枚举器进行下一步甚至意味着什么？可能的行为将是模棱两可的，不容易猜到。当您通过其接口处理对象时，您不必考虑底层类是什么，以及该类及其枚举器是否允许修改。接口说修改使枚举器无效，所以事情应该是这样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T17:20:55.220

使用 yield 语句加载您要修改的元素并在事后这样做

如果您必须在迭代时修改集合（如果它可以被索引），请使用 for 循环并取消对象与循环声明的关联......但是您要确保在循环周围使用 lock 语句以确保您是唯一一个操纵对象的人......并且您在循环的下一次传递中牢记自己的操作......

# objective-c - 将类作为层返回

> ID：14588172
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:02:37.250
> 
> 标签：objective-c, cocos2d-iphone

这个问题正在使用`cocos2d with xcode`，但我认为一般目标 c 家伙可以处理它。

我有一个类，`CCLayer`我想将它作为一个层返回到我的主类并在那里显示（并且所有操作都发生在该层类中）。

所以“其他”类是：

```
CCSprite *r;

    -(id)set
    {
        r=[CCSprite spriteWithFile:@"c5.png"];
        r.position=ccp(50,50);
        [self addChild:r z:3];
        return self;

    } 
```

从主类我称之为：

```
recieverCircleLayer *r=[recieverCircleLayer alloc] ;
        [self addChild:[r  set ]]; 
```

所以什么都没有发生，我没有在屏幕上看到其他类的精灵。

我错过了什么？谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:53:31.893

您的第二个代码段应该是：

```
recieverCircleLayer *r = [[recieverCircleLayer alloc] init];
[self addChild:[r  set]]; 
```

你忘了`init`输入`alloc-init`。不管这是否完全解决了您的问题，这绝对是朝着正确方向迈出的一步。;)

此外，类名应该以大写字母开头，并且一直是驼峰式。例如，`RecieverCircleLayer`。

# mysql - mysql 基于自连接的枚举值

> ID：14588174
> 
> 赞同：1
> 
> 时间：2013-01-29T17:02:49.557
> 
> 标签：mysql, join, pivot, self-join

如何使用自加入根据枚举状态获取计数

我有一个名为“student”的表，其中我使用 enum 表示状态 0、1、2，其中 0 表示非活动，1 表示活动，2 表示已删除。

那是

```
studentid studentenrollid studentname studentstatus

1          3                 xyz          1

2          3                 xyz          2

3          8                 asda         1

4          7                 sdd          1

5          9                 asds         0

6          3                 xyz          1 
```

我需要根据 studentrollid 唯一的状态获取计数。

```
studentrollid | inactive | active | deleted

    3            0           2        1

    8            0           1        0

    7            0           1        0

    9            1           0        0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:18:19.503

请试试这个：

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/c8aa5/7)

```
select studentenrollid,
sum(case when studentstatus = 1 then 1
    else 0 end) as Active, 
sum(case when studentstatus = 0 then 1
    else 0 end) as Inactive, 
sum(case when studentstatus = 2 then 1
    else 0 end) as Deleted
from demo
group by studentenrollid
;

| STUDENTENROLLID | ACTIVE | INACTIVE | DELETED |
-------------------------------------------------
|               3 |      2 |        0 |       1 |
|               7 |      1 |        0 |       0 |
|               8 |      1 |        0 |       0 |
|               9 |      0 |        1 |       0 | 
```

[**另一个较短的查询：**](http://sqlfiddle.com/#!2/c8aa5/17)

```
select a.studentenrollid,
sum(a.studentstatus = 1) as Active, 
sum(a.studentstatus = 0) as Inactive,
sum(a.studentstatus = 2) as Deleted 
from demo a
group by a.studentenrollid
;

| STUDENTENROLLID | ACTIVE | INACTIVE | DELETED |
-------------------------------------------------
|               3 |      2 |        0 |       1 |
|               7 |      1 |        0 |       0 |
|               8 |      1 |        0 |       0 |
|               9 |      0 |        1 |       0 | 
```

## [MYSQL 5.1.61 版本查询](http://sqlfiddle.com/#!8/4a8fe/1)

* * *

**基于评论中给出的 OP 的 create statment/insert 语句：**

[SQLFIDDEL 演示 2](http://sqlfiddle.com/#!8/86b1f/3)

```
| STUDENTENROLLID | ACTIVE | INACTIVE | DELETED |
-------------------------------------------------
|               1 |      1 |        0 |       0 |
|               2 |      1 |        0 |       0 |
|               3 |      1 |        0 |       0 |
|              41 |      9 |        1 |       1 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:12:05.673

You can use an aggregate function with a `CASE` expression to *pivot* the data:

```
select studentenrollid,
  count(case when studentstatus = '0' then studentid end) InActive,
  count(case when studentstatus = '1' then studentid end) Active,
  count(case when studentstatus = '2' then studentid end) Deleted
from yourtable
group by studentenrollid 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/028df/5).

The result is:

```
| STUDENTENROLLID | INACTIVE | ACTIVE | DELETED |
-------------------------------------------------
|               3 |        0 |      2 |       1 |
|               7 |        0 |      1 |       0 |
|               8 |        0 |      1 |       0 |
|               9 |        1 |      0 |       0 | 
```

Edit #1, using the sample data that you placed in the comments:

```
CREATE TABLE IF NOT EXISTS demo 
( 
  studentid int(11) NOT NULL AUTO_INCREMENT, 
  studentenrollid int(11) NOT NULL, 
  studentstatus enum('0','1','2') NOT NULL DEFAULT '1', 
  PRIMARY KEY (studentid), 
  KEY studentenrollid (studentenrollid) 
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=84 ;

INSERT INTO demo (studentid, studentenrollid, studentstatus) 
VALUES
(22, 41, '2'),
(23, 1,'1'),
(24, 2, '1'),
(25, 3, '1'),
(26, 41, '1'),
(29, 41, '1'),
(30, 41, '1'),
(31, 41, '1'),
(32, 41, '1'),
(33, 41, '1'),
(34, 41,'1'),
(35, 41, '1'),
(36, 41, '1'),
(37, 41, '1') 
```

Your query would be:

```
select studentenrollid,
  count(case when studentstatus = '0' then studentid end) InActive,
  count(case when studentstatus = '1' then studentid end) Active,
  count(case when studentstatus = '2' then studentid end) Deleted
from demo
group by studentenrollid 
```

With the result (See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/d37b1/2)):

```
| STUDENTENROLLID | INACTIVE | ACTIVE | DELETED |
-------------------------------------------------
|               1 |        0 |      1 |       0 |
|               2 |        0 |      1 |       0 |
|               3 |        0 |      1 |       0 |
|              41 |        0 |     10 |       1 | 
```

Note, you are only getting a deleted count because that is the only value that you have in your data base (at least in the sample data).

# opengl-es-2.0 - 改为使用缓冲区实现此 OpenGL ES 2.0 代码

> ID：14588176
> 
> 赞同：0
> 
> 时间：2013-01-29T17:02:57.093
> 
> 标签：opengl-es-2.0, vbo

这段代码绘制了一个由数千个彩色方块组成的大网格。在每一帧上，它都会随机选择方块并将它们设置为新颜色。我想减少 CPU 负载。设置缓冲区和绘制的理想代码是什么？我只对 VBO 设置和 Open GL 绘图调用感兴趣。请记住，GPU 内存中的顶点颜色总是在变化，但顶点位置永远不会改变。

```
- (id)initWithBounds:(float)pLeft right:(float)pRight bottom:(float)pBottom top:(float)pTop
{
    if (self = [super init]) {

        effect = [[GLKBaseEffect alloc] init];
        effect.transform.projectionMatrix = GLKMatrix4MakeOrtho(pLeft, pRight, pBottom, pTop, 1, -1);;

        self.left = pLeft;
        self.right = pRight;
        self.bottom = pBottom;
        self.top = pTop;

        GLfloat gridWidth = self.right - self.left;
        GLfloat gridHeight = self.top - self.bottom;
        GLfloat halfWidth = gridWidth / 2;
        GLfloat halfHeight = gridHeight / 2;

        // Create the vertices for each point of the grid
        float cellSize = 8.f;

        CGSize screenSize = [UIApplication currentSize];
        numRows = screenSize.height / cellSize;
        numCols = screenSize.width / cellSize;
        int verticesPerRow = numCols + 1;

        int verticesPerCell = 4;
        int numVertices = numRows * numCols * verticesPerCell;
        GLKVector2 *vertices = malloc(sizeof(GLKVector2) * numVertices);
        int vertexIndex;

        // Note use of <= as there is 1 more vertex row/col than numRows/numCols
        for (int rowIndex = 0; rowIndex <= numRows; rowIndex++) {

            for (int colIndex = 0; colIndex <= numCols; colIndex++) {

                vertexIndex = (verticesPerRow * rowIndex) + colIndex;
                vertices[vertexIndex] = GLKVector2Make((cellSize * colIndex) - halfWidth, (cellSize * rowIndex) - halfHeight);
            }
        }

        // Create vertexIndices array which colours and vertices arrays wil be based on

        int triangleVerticesPerCell = 6; // Define 2 triangles per cell = 2 x 3 vertices
        numTriangleVertices = numRows * numCols * triangleVerticesPerCell;
        NSLog(@"numTriangleVertices %i", numTriangleVertices);
        //        numTriangleVertices = 6;

        int *vertexIndices = malloc(sizeof(int) * numTriangleVertices);
        int i = 0;

        for (int rowIndex = 0; rowIndex < numRows; rowIndex++) {

            for (int colIndex = 0; colIndex < numCols; colIndex++) {

                vertexIndex = (numCols * rowIndex) + colIndex + rowIndex;

                vertexIndices[i++] = vertexIndex;
                vertexIndices[i++] = vertexIndex + 1;
                vertexIndices[i++] = vertexIndex + verticesPerRow + 1;
                vertexIndices[i++] = vertexIndex;
                vertexIndices[i++] = vertexIndex + verticesPerRow + 1;
                vertexIndices[i++] = vertexIndex + verticesPerRow;
            }
        }

        // grid vertices
        //        int numTriangleVertices = 1 * triangleVerticesPerCell; // 1 cell
        triangleVertices = malloc(sizeof(GLKVector2) * numTriangleVertices);
        triangleColours = malloc(sizeof(GLKVector4) * numTriangleVertices);

        // Sets all values of array to 0
        //        memset(triangleVertices,0,sizeof(GLKVector2)*numVertices);

        GLKVector4 currColour;

        for (i = 0; i < numTriangleVertices; i++) {

            // Give a new colour to every new set of 6 vertices
            if(!(i % 6)) {

                currColour = GLKVector4Make(1.0 * arc4random_uniform(101)/100,
                                            1.0 * arc4random_uniform(101)/100,
                                            1.0 * arc4random_uniform(101)/100,
                                            1);
            }
            triangleColours[i] = currColour;

            // Next vertex
            triangleVertices[i] = vertices[vertexIndices[i]];
        }

        // Release memory later
        free(vertices);
        free(vertexIndices);

        [NSTimer scheduledTimerWithTimeInterval:.02
                                         target:self
                                       selector:@selector(timerUpdate:)
                                       userInfo:nil
                                        repeats:YES];

    }
    return self;
}

-(void) timerUpdate:(NSTimer*)timer {

    for(int i = 0; i < 100; i++) {

        int randomCellIndex = ((numRows * numCols)-1) * arc4random_uniform(10001)/10000;
        //        NSLog(@"randomCellIndex %i", randomCellIndex);
        // Loop through the random cell's vertices, setting thier colour
        GLKVector4 currColour = GLKVector4Make(1.0 * arc4random_uniform(101)/100,
                                               1.0 * arc4random_uniform(101)/100,
                                               1.0 * arc4random_uniform(101)/100,
                                               1);

        int startIndex = randomCellIndex * 6;

        for (int i = startIndex; i < startIndex + 6; i++) {

            triangleColours[i] = currColour;
        }
    }

}

-(void)render {
    //  NSLog(@"in EEScene's render");
    glClearColor(clearColor.r, clearColor.g, clearColor.b, clearColor.a);
    glClear(GL_COLOR_BUFFER_BIT);

    [effect prepareToDraw];

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 2,
                          GL_FLOAT, GL_FALSE, 0, triangleVertices);

    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, 4,
                          GL_FLOAT, GL_FALSE, 0, triangleColours);

    glDrawArrays(GL_TRIANGLES, 0, numTriangleVertices);

    glDisableVertexAttribArray(GLKVertexAttribPosition);
    glDisableVertexAttribArray(GLKVertexAttribColor);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:23:33.467

这个来自 Apple 的例子看起来像答案:)

[http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)

# c++ - c++/CLI c# dll事件导致_stat返回错误

> ID：14588178
> 
> 赞同：0
> 
> 时间：2013-01-29T17:03:01.290
> 
> 标签：c++, events, command-line-interface

ifile 在正常使用情况下为 0。当从托管类的 EventHandler 调用 DoesFileExist() 时，ifile 为 -1 (ENOENT)。

相同的方法，文件确实存在，但结果不同。

我们对混合模式事件消息传递有什么不了解？

```
BOOL DoesFileExist(CString sFile)
{
    struct _stat  c_file;   // structs for file operations
    errno_t err;
    int ifile = _stat( sFile, &c_file );
    if ( ifile EQ 0 )   // file exists.
    {
        return TRUE;
    }
    else    // ifile = -1, check the error type...
    {
         _get_errno( &err );
        if ( err NE ENOENT )
        {
            char tempchar[512];
            sprintf_s(tempchar,"Error in DoesFileExist = %d  File=",err);
            CString sError = tempchar + sFile;
            DEBUGMessage(sError);
        }
    }

    return FALSE;
} 
```

# c# - 如何从两个图像创建一个新图像，其中两个图像并排放置？

> ID：14588180
> 
> 赞同：1
> 
> 时间：2013-01-29T17:03:16.203
> 
> 标签：c#

我试过这段代码：

```
private void CreateAnimatedGif(string FileName1 , string FileName2)
        {
            Bitmap file1 = new Bitmap(FileName1);
            Bitmap file2 = new Bitmap(FileName2);
            Bitmap bitmap = new Bitmap(file1.Width + file2.Width, Math.Max(file1.Height, file2.Height));
            using (Graphics g = Graphics.FromImage(bitmap))
            {
                g.DrawImage(file1, 0, 0);
                g.DrawImage(file2, file1.Width, 0);
            }
            bitmap.Save(@"d:\test.gif", System.Drawing.Imaging.ImageFormat.Gif);
        } 
```

一般来说，它正在工作。但结果还不够好。

1.  自代码以来的第一张图像尝试使其高度相同，我在底部看到一些黑色空间。

2.  第二张图片比第一张大。第二张图片在右边。所以我需要它使第一个图像与第二个图像的大小/分辨率相同。

我该如何修复此代码？

这是将两者结合后的新图像结果的示例。为什么它不像我想要的那样好：

![在此处输入图像描述](../Images/5dac63eada34d6ce8b42b9b34d2012a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:12:56.590

您可以调整左侧图像的大小并设置一些图形属性以获得更好的质量并尽量[不要失去质量](https://stackoverflow.com/questions/87753/resizing-an-image-without-losing-any-quality#87763)：

```
using (Graphics g = Graphics.FromImage(bitmap))
{       
     //high quality rendering and interpolation mode
     g.SmoothingMode = SmoothingMode.HighQuality; 
     g.PixelOffsetMode = PixelOffsetMode.HighQuality; 
     g.InterpolationMode = InterpolationMode.HighQualityBicubic;

     //resize the left image
     g.DrawImage(file1, new Rectangle(0, 0, file1.Width, file2.Height));
     g.DrawImage(file2, file1.Width, 0);
} 
```

结果是：

![在此处输入图像描述](../Images/78f6f83b983bc776020602668c7320c0.png)

或者，如果您想根据新高度按比例调整它的大小，只需使用：

```
//calculate the new width proportionally to the new height it will have
int newWidth =  file1.Width + file1.Width / (file2.Height / (file2.Height - file1.Height));
Bitmap bitmap = new Bitmap(newWidth + file2.Width, Math.Max(file1.Height, file2.Height));
using (Graphics g = Graphics.FromImage(bitmap))
{       
     //high quality rendering and interpolation mode
     g.SmoothingMode = SmoothingMode.HighQuality; 
     g.PixelOffsetMode = PixelOffsetMode.HighQuality; 
     g.InterpolationMode = InterpolationMode.HighQualityBicubic;

     //resize the left image
     g.DrawImage( file1, new Rectangle( 0, 0, newWidth, file2.Height ) );
     g.DrawImage(file2, newWidth, 0);
} 
```

事实上结果更好：

![在此处输入图像描述](../Images/148a5f089b7d1858aafa416b215c702a.png)

# iphone - 从谷歌驱动器导出的文件有时没有内容长度标题字段

> ID：14588184
> 
> 赞同：3
> 
> 时间：2013-01-29T17:03:25.987
> 
> 标签：iphone, ios, objective-c, google-drive-api

我有一个应用程序从谷歌驱动器下载文件，导出为 pdf，使用`GTMHTTPFetcher`.

所有文件都已正确下载，但 fetcher 的`response.expectedContentLength`属性对某些文件返回 -1。响应还缺少这些文件的内容长度字段。

我尝试在请求的标头中将“Accept-Encoding”设置为“”，但这并不能解决问题。

任何想法如何解决这一问题？

# android - 将字符串转换为 JSON 对象解析数据时出错

> ID：14588186
> 
> 赞同：0
> 
> 时间：2013-01-29T17:03:31.320
> 
> 标签：android, json, parsing

我使用它在本地主机上完美运行的代码，但我试图在我的网络服务器上执行该代码，但在从字符串解析到 JSON 对象时解析其显示错误时没有出错

我的 JSON 解析器代码是

```
try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(
        is, "utf-8"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    json = sb.toString();
    Log.d("converted result", json);
} catch (Exception e) {
    Log.e("Buffer Error", "Error converting result " + e.toString());
}

// try parse the string to a JSON object
try {
    jObj = new JSONObject("{" + json +"}");
} catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
}

// return JSON String
return jObj; 
```

LogCat 信息

```
01-29 11:45:53.556: D/Search keyword:(921): saint louis
01-29 11:45:57.288: D/converted result(921): 
connected{"products":[{"pid":"406355","name":"852610 SOUTHCOUNTYMALL"},{"pid":"406356","name":"852611 SOUTHCOUNTYMALL"},{"pid":"406357","name":"852612 SOUTHCOUNTYMALL"}],"success":1}

01-29 11:45:57.288: E/JSON Parser(921): Error parsing data org.json.JSONException: Expected ':' after connected at character 11 of {connected{"products":[{"pid":"406355","name":"852610 SOUTHCOUNTYMALL"},{"pid":"406356","name":"852611 SOUTHCOUNTYMALL"},{"pid":"406357","name":"852612 SOUTHCOUNTYMALL"}],"success":1}
01-29 11:45:57.288: E/JSON Parser(921): } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:07:02.900

正如错误明确指出的那样，您的 JSON 无效，因为`connected`它前面的单词。

你需要让你的服务器停止发送这个词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:24:33.927

你有这个 JSON：

```
{connected{"products":[{"pid":"406355","name":"852610 SOUTHCOUNTYMALL"},{"pid":"406356","name":"852611 SOUTHCOUNTYMALL"},{"pid":"406357","name":"852612 SOUTHCOUNTYMALL"}],"success":1} 
```

这是无效的 JSON 格式，因为您在 JSON 的开头使用了错误的表达式“{connected”。也许，你应该得到这样的 JSON：

```
{"products":[{"pid":"406355","name":"852610 SOUTHCOUNTYMALL"},{"pid":"406356","name":"852611 SOUTHCOUNTYMALL"},{"pid":"406357","name":"852612 SOUTHCOUNTYMALL"}],"success":1} 
```

或像这样：

```
{"connected":[VALUE], "products":[{"pid":"406355","name":"852610 SOUTHCOUNTYMALL"},{"pid":"406356","name":"852611 SOUTHCOUNTYMALL"},{"pid":"406357","name":"852612 SOUTHCOUNTYMALL"}],"success":1} 
```

无论如何，我建议您使用 Gson 库来构建和获取 JSON。

# php - 如何在 cakephp 中使用 GD 库

> ID：14588194
> 
> 赞同：0
> 
> 时间：2013-01-29T17:03:52.400
> 
> 标签：php, cakephp, gd

我想将 GD 库与 cake php 一起使用，但我遇到了一些问题。这是我的view.ctp：

```
<?php
header("Content-type: image/png");
$img = @ImageCreate(200, 100);
$color = ImageColorAllocate($img, 255, 0, 0);
ImagePng($img);
?> 
```

但是当我尝试查看我的页面时，这是我得到的：

```
�PNG IHDR�d�H�HPLTE��   7IDATH����à�S�U�(~;IEND�B`� 
```

我的 GD 库很好地安装在我的服务器上（它出现在 phpinfo() 中）

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:29:24.687

您将需要创建一个新的**[视图布局](http://book.cakephp.org/2.0/en/views.html#layouts)**来渲染这些图像。

例如，使用以下内容创建一个新布局为“app/View/Layouts/image.ctp”

```
<?php 
header('Content-Type: image/png');
echo $this->fetch('content'); 
die(); 
```

然后在控制器的视图中添加

```
$this->layout = 'image'; 
```

现在应该为图像设置正确的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:28:04.363

您不应该在文件中使用该`header()`函数。`view.ctp`在将所有标头发送到浏览器后呈现视图。

最好的（实际上也是唯一的）方法是设置控制器中的所有标头参数。检查[设置标头](http://book.cakephp.org/2.0/en/controllers/request-response.html#setting-headers)以及如何设置不同标头的[CakeResponse 。](http://book.cakephp.org/2.0/en/controllers/request-response.html#CakeResponse)

# excel - 按代码排列的 Excel 范围

> ID：14588196
> 
> 赞同：0
> 
> 时间：2013-01-29T17:04:03.083
> 
> 标签：excel, excel-formula

我有一个特殊的问题，我似乎无法在 excel 中找到答案。我有一个单元格（E20），其值为：$G$7，我打算在将来修改单元格（E20）并将其用作过滤器。

当我希望将单元格 (E20) 的值用作公式的范围时，excel 会给我一个错误并显示问题：

```
=OFFSET($C$7,0,0,1,COUNTIF($D$8:"$G$7", ">0") +1 
```

主要是

```
COUNTIF($D$8:"$G$7" ... 
```

我怎样才能使这个 $G$7 值（来自 E20）成为真正的单元格引用，而没有“”围绕它？

注意：我已经尝试过 INDIRECT() 和 TEXT()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:14:50.110

假设您有一个名为 X 的单元格，其值为“$G$7”

您还需要将“$D$8:”附加到 INDIRECT() 内的此单元格值以引用“动态”范围：

```
=OFFSET($C$7,0,0,1,COUNTIF(INDIRECT("$D$8:" & X), ">0") + 1) 
```

此外，使用命名范围可能会帮助您跟踪此动态范围。

# c++ - 在 Windows 上交叉编译 XZ-5.XX

> ID：14588199
> 
> 赞同：0
> 
> 时间：2013-01-29T17:04:12.053
> 
> 标签：c++, gcc, cross-platform, xz

我想在 Windows 上交叉编译[xz-5.0.4](http://tukaani.org/xz/)。我已按照[INSTALL-Windows.txt](http://code.metager.de/source/xref/xz/windows/INSTALL-Windows.txt)中的说明进行操作，但收到错误消息

```
Initializing Automake:
checking for a BSD-compatible install... /bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether ln -s works... yes
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/c/devel/xz-5.0.4':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

有人可以帮我找到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:45:24.753

您的 gcc 有问题：configure 无法通过编译 void 文件的简单测试。

按照文档中的说明安装 GCC，接下来确保调用了它的二进制文件`gcc`（通常 Windows 发行版更喜欢 gcc-4.4 之类的东西），如果没有 - 创建符号链接。还要确保它在 PATH 中。

从命令行尝试命令`gcc test.c`，其中 test.c 是具有类似内容的文件`int main(void) { return 0; }`- 这是 configure 通常检查编译器的方式。如果它不起作用，让它起作用，然后再次配置。

# android - 使用 librtmp 构建 Android FFMPEG

> ID：14588203
> 
> 赞同：4
> 
> 时间：2013-01-29T17:04:20.870
> 
> 标签：android, ffmpeg

我一直在努力为启用 librtmp 的 Android 编译 FFMPEG。我已经在这里使用[Guardian Project](https://github.com/guardianproject/android-ffmpeg)成功构建了 FFMPEG ，但它没有 librtmp 支持。我发现这个问题的唯一答案是关于以前的 Stack Overflow 问题 ( [HERE](https://stackoverflow.com/questions/9634496/building-ffmpeg-with-librtmp-for-android) )，但它不想为我工作。

目前，我`librtmp.so.0`在 android-ffmpeg 文件夹中的 rtmpdump/librtmp 文件夹中拥有来自官方 rtmpdump android 构建的交叉编译文件。我的 configure_ffmpeg.sh 文件的摘录内容如下：

```
./configure \
$DEBUG_FLAG \
--arch=arm \
--cpu=cortex-a8 \
--target-os=linux \
--enable-runtime-cpudetect \
--prefix=$prefix \
--enable-pic \
--disable-shared \
--enable-static \
--cross-prefix=$NDK_TOOLCHAIN_BASE/bin/$NDK_ABI-linux-androideabi- \
--sysroot="$NDK_SYSROOT" \
--extra-cflags="-I../x264 -mfloat-abi=softfp -mfpu=neon" \
--extra-ldflags="-L../x264" \
--extra-cflags="-I/home/dan/android-ffmpeg/rtmpdump" \
--extra-ldflags="-L/home/dan/android-ffmpeg/rtmpdump -lrtmp"
\

--enable-version3 \
--enable-gpl \
\
--disable-doc \
--enable-yasm \
\
--enable-decoders \
--enable-encoders \
--enable-muxers \
--enable-demuxers \
--enable-parsers \
--enable-protocols \
--enable-filters \
--enable-avresample \
--enable-libfreetype \
\
--disable-indevs \
--enable-indev=lavfi \
--disable-outdevs \
\
--enable-hwaccels \
\
--enable-ffmpeg \
--disable-ffplay \
--disable-ffprobe \
--enable-ffserver \
--enable-network \
\
--enable-libx264 \
--enable-zlib \
--enable-librtmp \ 
```

当我尝试编译它时，它最终显示一个错误，并且我的 FFMPEG config.log 文件告诉我它找不到 -lrtmp。我很肯定我将它指向正确的目录......有人有什么想法吗？

问候

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T05:37:57.547

担，

这有点老了，也许没有太大帮助，因为它不是一个完整的答案，但我几个月来一直在努力解决这个问题。我的努力记录在 ffmpeg 论坛之一（此处：[http://ffmpeg.zeranoe.com/forum/viewtopic.php?](http://ffmpeg.zeranoe.com/forum/viewtopic.php?f=29&t=1383) f=29&t=1383 ）上，我也没有取得任何成功。

最终，在构建 librtmp 并告诉构建脚本在哪里找到它（并在 ffmpeg conf 文件中禁用 librtmp 的 pkg-config）之后，我总是有一个错误列表，例如

```
libavformat/librtmp.o: in function rtmp_read:libavformat/librtmp.c:153: error: undefined reference to 'RTMP_Read' 
```

*   所有列出它声称未定义的不同 RTMP 函数。但是头文件与其余所需文件一起存在。

我只是想把它放在这里以帮助您或其他仍在尝试使用 librtmp for Android 构建 ffmpeg 的人。

布拉德福德

# apache - 子目录的 Apache mod_rewrite 规则

> ID：14588205
> 
> 赞同：0
> 
> 时间：2013-01-29T17:04:26.363
> 
> 标签：apache, mod-rewrite, configuration, rewrite

我正在尝试设置重写规则，以便将 localhost/test/{this} 之后的任何内容转发到 localhost/test/index.php?{here}

我可以访问服务器，当前配置如下所示：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    <Directory /var/www/test/>
            AllowOverride All
            RewriteEngine On
            RewriteBase /
            RewriteRule ^(.*)$ index.php?$1      
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined 
```

但是目前，在访问 localhost/test/something 时没有显示 /localhost/test/index.php?something 它显示 localhost/index.php 所以它重写到错误的地方..有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:09:40.933

在 /var/www/test 中创建 .htaccess 文件

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:18:25.137

已解决.. 我发现每当我包含 AllowOverride All 时，它都会重定向到 /index.php，然后发现我在之前的测试中留下了一个 .htaccess 文件，这把事情搞砸了。删除，更新了我的规则，现在可以工作了。感谢帮助！

# ruby-on-rails - 使用 capistrano 部署应用程序

> ID：14588208
> 
> 赞同：1
> 
> 时间：2013-01-29T17:04:32.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capistrano, rvm-capistrano

我第一次尝试使用 Capistrano 部署我的应用程序，但我不断收到此错误：

```
cat: /var/rails/app/current/REVISION: No such file or directory 
```

这很正常，因为我还没有当前的修订版。我刚刚启动了以下命令：

```
cap deploy:setup
cap deploy:cold 
```

我不知道我错过了什么，所以任何帮助将不胜感激。

萨利姆

# django - POST 上的 Tastypie 外键验证

> ID：14588209
> 
> 赞同：2
> 
> 时间：2013-01-29T17:04:48.853
> 
> 标签：django, validation, tastypie

我很难弄清楚在美味派中进行复杂错误验证的最佳位置在哪里。

我有一个`ModelResource`

```
class CommentResource(ModelResource):
    object = fields.ToOneField(MasterPieceResource, "object")
    parent = fields.ToOneField("self", "parent", null=True) 
```

我想确保如果`POST`数据包含父对象，则父对象指向同一个对象。请注意，对象和父对象在`POST`数据中作为 uris提供

```
POST {
    parent: "/api/v1/comment/1/",
    object: "/api/v1/masterpiece/5/"
} 
```

进行此错误检查的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T18:00:07.167

查看 Tastypie[文档](http://django-tastypie.readthedocs.org/en/v0.9.11/validation.html)中的验证部分。您可以使用`FormValidation`或自定义`Validation`类。

# postgresql - PostgreSQL：在 Ubuntu 上重置 PostgreSQL 的密码

> ID：14588212
> 
> 赞同：114
> 
> 时间：2013-01-29T17:04:56.847
> 
> 标签：postgresql, unix

在 Ubuntu 中，我安装了 PostgreSQL 数据库并为服务器创建了一个超级用户。

如果我忘记了 postgresql 超级用户的密码，我该如何为该用户重置它（密码）？

我尝试卸载它，然后再次安装，但保留了之前创建的超级用户。

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2013-01-29T17:15:58.373

假设您是机器的管理员，Ubuntu 已授予您**sudo**以任何用户身份运行任何命令的权利。
还假设您没有限制`pg_hba.conf`文件（在`/etc/postgresql/9.1/main`目录中）的权限，它应该包含这一行作为第一条规则：

```
# Database administrative login by Unix domain socket  
local   all             postgres                                peer 
```

（关于文件位置：`9.1`是主要的 postgres 版本和`main`您的“集群”的名称。如果使用更新版本的 postgres 或非默认名称，则会有所不同。使用`pg_lsclusters`命令获取您的版本/系统的此信息）。

无论如何，如果`pg_hba.conf`文件没有该行，请编辑文件，添加它，然后使用`sudo service postgresql reload`.

然后您应该能够`psql`使用以下 shell 命令以 postgres 超级用户身份登录：

```
sudo -u postgres psql 
```

进入 psql 后，发出 SQL 命令：

```
ALTER USER postgres PASSWORD 'newpassword'; 
```

在此命令中，`postgres`是超级用户的名称。如果忘记密码的用户是`ritesh`，则命令为：

```
ALTER USER ritesh PASSWORD 'newpassword'; 
```

参考：[PostgreSQL 9.1.13 文档，第 19 章。客户端身份验证](http://www.postgresql.org/docs/9.1/interactive/client-authentication.html)

请记住，您需要在最后键入带有单个**S**的**postgres**

 **如果在命令历史记录或服务器日志中以明文形式留下密码是一个问题，psql 提供了一个交互式元命令来避免这种情况，作为替代`ALTER USER ... PASSWORD`：

```
\password username 
```

它通过双盲输入请求密码，然后根据设置对其进行哈希处理，并使用密码的哈希版本而不是明文版本向服务器[`password_encryption`](https://www.postgresql.org/docs/current/runtime-config-connection.html#GUC-PASSWORD-ENCRYPTION)发出命令。`ALTER USER`**

# javascript - ExtJS“创建”或“初始化”组件事件监听器

> ID：14588216
> 
> 赞同：1
> 
> 时间：2013-01-29T17:05:10.557
> 
> 标签：javascript, extjs, extjs4.1

所以任何 ExtJS 组件都有[`destroy`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-event-destroy)附加监听器的事件。这个事件的“逆”是什么，即一个可以在组件*创建*或*初始化*时附加监听器的事件？

我尝试了什么？我试图挂钩`initComponent`和`constructor`功能，但我宁愿有一个依赖于事件侦听器的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:30:11.327

Ext.Component 没有此事件（仅渲染、显示等）。但是您可以在以下方法中触发自定义事件：

```
...
initComponent: function() {
    this.callParent(arguments);
    this.fireEvent('init', {...});
}
... 
```

# iphone - UIBarButtonItem 在自定义 UINavigationBar 中相互重叠

> ID：14588217
> 
> 赞同：0
> 
> 时间：2013-01-29T17:05:10.787
> 
> 标签：iphone, ios, uinavigationbar, uibarbuttonitem, uinavigationitem

我正在尝试在我的自定义导航栏上实现两个按钮，一个用于自定义后退按钮，一个用于我的设置 UIViewController。当我第一次实现后退按钮时，它显示得很好并且工作得很好，我实现为 leftBarButtonItem。但是，当我尝试实现第二个 UIBarButtonItem 时，它与后退按钮重叠。

```
UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, [UIScreen     mainScreen].bounds.size.width, 41)];
navBar.delegate = self;   
UINavigationItem *topItem = [[UINavigationItem alloc] initWithTitle:@"Create QR(URL)"];
[navBar pushNavigationItem:topItem animated:NO];
UIImage *buttonImage = [UIImage imageNamed:@"back.png"];    
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];    
[button setImage:buttonImage forState:UIControlStateNormal];  

button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

[button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];

topItem.leftBarButtonItem = customBarItem;
UIImage *buttonImageSettings = [UIImage imageNamed:@"setting.png"];
UIButton *buttonSetting = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:buttonImageSettings forState:UIControlStateNormal];

buttonSetting.frame = CGRectMake(220, 0, buttonImageSettings.size.width,  buttonImageSettings.size.height);

[buttonSetting addTarget:self action:@selector(settings)    forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *customBarItemSetting = [[UIBarButtonItem alloc]   initWithCustomView:buttonSetting];

topItem.rightBarButtonItem = customBarItemSetting;    
[self.view addSubview:navBar]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:15:23.483

假设 iOS 5 以后添加您的自定义按钮：

```
[self.navigationItem setLeftBarButtonItems:[NSArray arrayWithObjects: customBarItem, customBarItemSetting, nil] animated:NO]; 
```

（来自问题：[如何在没有IB的情况下将2个按钮添加到右侧的UINavigationbar？](https://stackoverflow.com/questions/1803609/how-to-add-2-buttons-into-the-uinavigationbar-on-the-right-side-without-ib)）

# scala - 在 Play 2.1 中，使用什么来代替已弃用的 PushEnumerator

> ID：14588218
> 
> 赞同：8
> 
> 时间：2013-01-29T17:05:14.003
> 
> 标签：scala, playframework-2.1

PushEnumerator 在 Play 框架 2.1-RC 中被弃用。文档告诉我改用 Concurrent.broadcast 。但是，我推送的数据取决于用户，所以我不能向每个用户广播相同的数据。

换句话说，Concurrent.broadcast 将给我一个连接到许多迭代器的枚举器，而我需要许多连接到许多迭代器的枚举器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T01:38:00.757

下面是一个使用 Concurrent.unicast[E] 的简单示例：

```
// assume the following exist:
def readValueAsync(source: MySource): Future[Any]
val source: MySource = ...

// this is where the meat is:
val valueEnumerator = Concurrent.unicast[Any] {
  (channel: Concurrent.Channel[Any]) =>
    readValueAsync(source) onComplete {
      case Success(x: Any) => channel.push(x)
      case Failure(t) => channel.end(t)
    }
}

// you can then collect it using an iteratee
// since my enumerator never really ends, I only take 10 elements here
val result: List[Any] = 
  valueEnumerator through Enumeratee.take(10) run Interatee.getChunks[Any] 
```

# sql-server - CAST(hex_num AS 日期时间) - SQL Server 2008 R2

> ID：14588222
> 
> 赞同：2
> 
> 时间：2013-01-29T17:05:28.607
> 
> 标签：sql-server, datetime

导出数据时（rclick db | Tasks | Generate scripts ...）日期时间列以这种方式导出：

```
CAST(0xFFFF2E4600000000 AS DateTime) 
```

上

```
select CAST(0xFFFF2E4600000000 AS DateTime) 
```

..在 SQL Server Mgmt Studio 中我得到：

```
1753-01-01 00:00:00.000 
```

我需要在另一个程序中将此（即此处的 0xFFFF2E4600000000）转换为常规日期时间。

现在，我知道该格式对于 1900 年 1 月 1 日之后的日期是如何工作的：

```
first 4 bytes == the days since 1st Jan 1900
2nd 4 bytes == number of ticks since midnight (each tick is 1/300 of a second). 
```

这可行，但我无法弄清楚上面的十六进制数（0xFFFF2E4600000000）如何转换为 1753-01-01。2 的补码，1900 年到 1753 年之间的各种转换，等等 - 没有任何效果。它向我抛出的谷歌搜索结果也没有帮助。请指教！

*更新*：

无论如何，它似乎与 2 的补码有关，请参见以下内容，但在 Python shell 中它仍然不太有效：

```
>>> e=1900-1753
>>> e
147
>>> 
>>> e*=365
>>> e
53655
>>> e=e-(1<<32)
>>> e
-4294913641L
>>> hex(e)
'-0xffff2e69L' 
```

这接近 0xFFFF2E46 但并不完全存在。这里发生了什么？

*更新 2：*

闰日？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:20:37.670

在我看来很好：

```
declare @Sample as DateTime = '1753-01-01'
select @Sample as 'Sample', Cast( @Sample as VarBinary(8) ) as 'VarBinary',
  DateDiff( day, '1900-01-01', @Sample ) as 'DateDiff',
  Cast( DateDiff( day, '1900-01-01', @Sample ) as VarBinary(4) ) as 'Hex DateDiff' 
```

请注意，十六进制值被视为带符号的 32 位值。

如果问题是“为什么是 53,690？” 那么答案是：

```
; with Years as (
  select 1753 as Year, 0 as LeapYear
  union all
  select Year + 1,
    case
     when ( Year + 1 ) % 400 = 0 then 1
     when ( Year + 1 ) % 100 = 0 then 0
     when ( Year + 1 ) % 4 = 0 then 1
     else 0 end
    from Years
    where Year < 1900 )
  select 147 * 365 + Sum( LeapYear ) as Days from Years
  option ( maxrecursion 0 ) 
```

# jquery-mobile - 在 pagecreate 事件之后应用 jQueryMobile 初始化

> ID：14588225
> 
> 赞同：1
> 
> 时间：2013-01-29T17:05:44.597
> 
> 标签：jquery-mobile

我正在制作一个混合移动应用程序，我想在从 web 服务获取 html 后应用 jQueryMobile-initialize 方法..（通过“混合移动应用程序”我的意思是我从一个 html 页面开始，使用 jQueryMobile 进行样式设置，并且使用对 Web 服务的 ajax 调用来获取有关按钮单击等的数据。最后，我将所有这些都折叠到本机应用程序中。）

那么，有谁知道是否有类似（伪）
$.initWithJQueryMobile($('#my_div_id'))
注意：当我执行 ws 请求/响应时，我不会进入新的 data-role=page。

背景：你可能知道，当它初始化一个 html 文件时，jqm 会改变这个

```
 <select id="116" data-role="slider" >
    <option value='no'>No</option>                               
    <option value='yes'>Yes</option></select> 
```

进入这个 ![在此处输入图像描述](../Images/e4407f52fbfcf33d57ad568c86abad80.png)

我想在我的 web 服务返回之后执行此操作 - 在 pagecreate 事件触发很久之后。

当您单击或点击翻转开关（他们称之为）时，它会在是和否之间切换。

为了实现这一点，jqm 从根本上重写了具有跨度、div 和样式的 dom，并将 javascript 方法应用于翻转切换的 onclick。

我可以从 page-view-source 窃取 html，所以如果有人知道使之切换的 jqm js 方法，我可以从那里获取它（我知道，大黑客）。或者 …。我们可以使用 $.initWithJQueryMobile() 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:27:41.783

我想要 jqm-initialize 的标签是`<select>`jqm 将它们更改为翻转开关。jqm 让我们标记`<select>`为`data-role='slider'`

无论如何，我正在加载一堆选择以响应用户在邮政编码框中输入第 5 个数字。事实证明这是有效的：

```
// get an array of the &lt;select>s you want to initialize
var endorsement_controls =  $('div#divEndorsements select');
endorsement_controls.each(function(){
    // the next two lines make them flip toggles
    $(this).slider();
    $(this).slider('refresh');
}); 
```

`$.slider()`就是他们所说的小部件。我猜，如果不是所有的控件，大多数控件都有一个模拟。

我从[克雷格·布鲁克斯那里得到了改变游戏规则的暗示](http://craigbrookes.com/2012/02/08/jquerymobile-cannot-call-methods-on-listview-prior-to-initialization/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:12:07.843

首先，如果您想了解有关此主题的更多信息，请查看我的博客**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**。或者可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到。每个解决方案都带有一个或多个**`jsFiddle`**示例。

**[这是一个带有标记增强jsFiddle](http://jsfiddle.net/Gajotres/8uac7/)**的 $.ajax 调用的相当复杂的示例。

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#cars-data').empty();
    $.ajax({
        type: "POST",
        url: "/echo/xml/",
        dataType: "xml",
        data: {
            xml: "<cars><car><name>TOYOTA</name><country>JAPAN</country><pic>http://1call.ms/Websites/schwartz2012/images/toyota-rav4.jpg</pic><description>Toyota has announced that it will recall a total of 778,000 units that may have been manufactured with improperly-tightened nuts on the rear suspension.</description></car></cars>"
        },
        success: function(xml) {
            ajax.parseXML(xml);
        },
        error: function (request,error) {
            alert('Network error has occurred!');
        }
    });
});

$("#cars").live('pagebeforeshow', function () {
    $("#cars div[data-role='header'] h1").html(carObject.carName);
    $('#car-data').empty();
    $('#car-data').append('<li>Car Type:<span> ' + carObject.carName + '</span></li>');
    $('#car-data').append('<li>Car Country:<span> ' + carObject.carCountry + '</span></li>');        
    $('#car-data').append('<li>Car Description:<span> ' + carObject.description + '</span></li>');    
    $('#car-data').listview('refresh');   
    $('#car-img').attr('src' , carObject.img );    

});

var ajax = {  
    parseXML:function(result){
        $(result).find("car").each(function()
        {
            carObject.carName  = $(this).find('name').text();
            carObject.carCountry  = $(this).find('country').text();
            carObject.img  = $(this).find('pic').text();
            carObject.description  = $(this).find('description').text();

            $('#cars-data').append('<li><a href="#cars"><img src="' + carObject.img + '" title="sample" height="100%" width="100%"/><h3>Car type:<span> '+carObject.carName+'</span></h3><p>' + carObject.description + '</p></a></li>');
        });    
        $('#cars-data').listview('refresh');
        $('#index').append('<div data-role="footer" data-position="fixed"><h1>Dynamicaly added footer</h1></div> ');
        $('#index [data-role="content"]').append('<fieldset data-role="controlgroup"><legend>Choose:</legend><input type="radio" name="radio" id="radio1" value="1" checked="checked" /><label for="radio1">option 1</label></fieldset>');
        $('#index').trigger('pagecreate');
    }
}

var carObject = {
    carName : '',
    carCountry : '',
    img : '',
    description : ''    
} 
```

# sql - 从存储在表中的表/列名构建查询

> ID：14588228
> 
> 赞同：1
> 
> 时间：2013-01-29T17:05:49.103
> 
> 标签：sql, sql-server, tsql

我有一个`TABLES_IDS`看起来像这样的表：

```
Table_ID  Table_Name  Table_Column
--------  ----------  ------------
100       Attributes  Attribute_id
101       NewSamples  Section_id
... 
```

我有一个“第一个查询”，它返回多个`Table_Name`. 这`Table_Name`实际上是另一个表的名称，并且`Table_Column`是一列。我需要执行以下操作：

1.  对于每个获得`Table_Name`的 ，我需要检索相应的`Table_Column`值。
2.  使用`Table_Name`and `Table_Column`，创建一个新的 sql 查询，例如

    ```
    SELECT FROM Table_Name WHERE Table_Column = 12345 
    ```

3.  `Table_Name`对第一个查询返回的每一个自动重复everyting 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:07:53.830

如果我理解您的问题，您希望根据存储在此表中的表/列名运行一系列查询。您不能将表和列名作为变量或来自查询或表达式的结果引用，因此您需要使用动态 SQL，例如

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N'';

SELECT @sql = @sql + N'SELECT * FROM dbo.' 
  + QUOTENAME(Table_Name) + ' WHERE ' 
  + QUOTENAME(Table_Column) + ' = 12345;'
FROM dbo.TABLES_IDS
-- WHERE...
;

EXEC sp_executesql @sql; 
```

# user-interface - 具有许多页面的 Javafx 应用程序

> ID：14588230
> 
> 赞同：1
> 
> 时间：2013-01-29T17:05:57.083
> 
> 标签：user-interface, javafx, panels

我有一个关于在 javafx 中构建 gui 的问题。

例如，当我构建一个包含许多页面的程序时 - 起始页面包含几个按钮“添加用户”、“删除用户”、“更改用户数据” - 每个按钮都绘制一个不同的面板。这是我的问题 - 如何组织它们。当我将所有面板放在一个类中时，它会很快变得巨大并产生许多错误。也很难找到损坏的代码部分。是否应该在不同的类中定义每个面板？但如果是这样，从子菜单返回到主菜单就会出现问题。

或者另一个例子。程序的第一个面板是登录页面，下一页取决于插入的登录。

我应该如何组织很多面板？任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:52:34.623

如果您使用的是 fxml，那么您可以为每个面板创建一个单独的 fxml 文件和关联的 Controller 类。这会将面板中的视图与逻辑分开，并将每个面板的视图和逻辑与其他面板分开。

当您需要在面板之间实际共享数据时，技巧就变成了 - 例如，需要通知更改用户表单要更改的用户。在这种情况下，您需要有某种上下文信息。执行此操作的不同方法是：

1.  使用全局存储（类似于服务器的 http 会话）。
2.  [集成依赖注入框架](http://www.zenjava.com/2011/10/23/javafx-2-0-fxml-and-spring/)，例如 guice、spring 或 CDI。
3.  创建控制面板之间传递数据的[管理服务。](https://stackoverflow.com/questions/14511016/how-can-i-use-a-variable-from-another-controller-in-javafx)
4.  使用[事件总线](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)样式系统来共享数据。
5.  将您的应用程序实现为具有服务器管理状态[的 html 样式 Web 应用程序。](https://github.com/brunoborges/webfx)
6.  使用像现在（不幸的是）已经失效的[jfxflow](http://www.zenjava.com/jfx-flow/)这样的框架。

对于简单的应用程序，我会选择“创建控制面板之间传递数据的管理服务”，使用以下[简单项目作为模板](https://gist.github.com/4631319)。项目模板是一个程序，其中“程序的第一个面板是登录页面，下一页取决于插入的登录”。

如果您使用的是纯 Java 而没有 fxml，您可以查看其他一些不使用 fxml 的 Java 项目是如何组织的，并以类似的方式组织您的项目。例如，[JavaFX Ensemble App](http://www.oracle.com/technetwork/java/javafx/samples/index.html)、[willow 浏览器](http://code.google.com/p/willow-browse)和 JavaFX Henley Sales Data App（可作为与 Ensemble App 相同的示例代码包的一部分下载）。查看 Ensemble 源代码可能是一个不错的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T07:39:06.703

如果您的项目不是太大，那么我建议创建一个`Presenter`类，它可以控制舞台和程序流程，并显示许多`View`类中的一个。

这是演示者类的示例：

```
class Presenter {

public void showA(Stage mainStage){
    ViewA a = new ViewA();
    a.setOnBackButton(new ViewCallback(){
        public void call(){
            showB();
        }
    });
    mainStage.setScene(new Scene(a));
}

public void showB(Stage mainStage){
    ViewB b = new ViewB();
    b.setOnBackButton(new ViewCallback(){
        public void call(){
            showA();
        }
    });
    mainStage.setScene(new Scene(b));
}

} 
```

这是一个`view`身体的例子：

```
public class ViewA {

private ViewCallBack onBackButton = null;

public void setOnBackButton(ViewCallback callback){ onBackButton = callback; }

public void callBack() { if (onBackButton != null) onBackButton.call(); }

...

// somewhere in your code
Button b = new Button("shoot me!");
b.setOnAction(new EventHandler<ActionEvent>(){
    public void handle(ActionEvent event){
        callBack();
    }
});

} 
```

这是`ViewCallback`界面

```
public Interface ViewCallback {
    public void call();
} 
```

您可以使用这个简单的回调接口或`Callback<P,R>` [JavFX 通用回调接口](http://docs.oracle.com/javafx/2/api/javafx/util/Callback.html)。

# php - 来自 MySQL 表的 RecursiveArrayIterator

> ID：14588237
> 
> 赞同：1
> 
> 时间：2013-01-29T17:06:15.720
> 
> 标签：php, mysql, recursion, iterator

我正在寻找一个示例，应该如何构造作为 RecursiveArrayIterator 的参数传递的递归数组。我有一个带有 id、parent_id 和标题的 mysql 表：

```
id    parent_id   title
-----------------|-------------------
1         0      | Item 1
2         1      | Item 2
3         1      | Item 3
4         3      | Item 4
5         4      | Item 5 
```

我想从表中创建一个数组，可以将它传递给 RecursiveArrayIterator 来构建树、菜单、选项等。我已经尝试过这个“build_tree”函数[https://stackoverflow.com/a/8587437/1746522](https://stackoverflow.com/a/8587437/1746522)从 mysql 表创建一个数组。结果数组如下所示：

```
array (size=2)
  0 => 
    array (size=3)
      'id' => string '1' (length=1)
      'title' => string 'Item 1' (length=6)
      'parent_id' => string '0' (length=1)
      'children' => 
        array (size=2)
          0 => 
            array (size=3)
              ...
          1 => 
            array (size=3)
              ... 
```

但是当我将结果数组传递给 RecursiveArrayIterator 时，它看起来很奇怪。例如使用这个函数：

```
$array = new RecursiveArrayIterator($tree);
$iterater = new RecursiveIteratorIterator($array);  
foreach ($iterater as $key => $value) {
    $d = $iterater->getDepth();            
    echo "depth=$d k=$key v=$value\n";
} 
```

我有奇怪且无法使用的输出，例如：

```
depth=0 k=0 v=Array
depth=1 k=id v=1
depth=1 k=title v=Item 1
depth=1 k=parent_id v=0
depth=2 k=0 v=Array
depth=3 k=id v=2
depth=3 k=title v=Item 2
depth=3 k=parent_id v=1
depth=4 k=0 v=Array
.... 
```

深度是错误的，它遍历单个值而不是元素。传递给 RecursiveArrayIterator 的数组可能是“格式错误”并且应该以其他方式构造吗？

我期待看到这样的事情：

```
depth=0 k=1 v=Array
depth=1 k=2 v=Array
depth=1 k=3 v=Array 
```

其中 Array 包含节点的所有值，例如 parent_id 和 title，k 是 mysql 列 id 中的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:09:36.760

默认情况下，`RecursiveIteratorIterator`该类只会向您显示树的“叶子”。也就是说，树中不是数组的所有内容。

您想要初始化迭代器以显示数组节点以及叶子。然后，您只想为那些是数组的节点打印数据。

```
$array = new RecursiveArrayIterator($records);
$iterater = new RecursiveIteratorIterator($array, RecursiveIteratorIterator::SELF_FIRST);  
foreach ($iterater as $key => $value) {
    if (is_array($value)) {
        $d = $iterater->getDepth(); 
        echo "depth=$d k=$key value=$value\n";
    }
}

> depth=0 k=0 value=Array
> depth=0 k=1 value=Array
> depth=1 k=children value=Array
> depth=2 k=0 value=Array
> depth=2 k=1 value=Array 
```

此时，您会注意到有一个名为“children”的额外层会打乱您的深度计数。发生这种情况是因为节点的后代被放入他们自己的数组中。您可以跳过打印这些行，并发出有关数组中项目的更多数据，如下所示：

```
foreach ($iterater as $key => $value) {
    if (is_array($value) && $key !== 'children') {
        $d = $iterater->getDepth(); 
        echo "depth=$d k=$key title={$value['title']}\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:55:39.590

我的最终解决方案具有无限深度，只有一个查询，表中的所有信息以及对*RecursiveIteratorIterator*的所有功能（如*children*和*depth* ）的访问。我在我的解决方案中使用了两个数组。

**平面阵列**

```
select * from table 
```

并像往常一样创建平面数组：

```
$info[1] = array('parent_id' => 0, 'title' => 'Item 1');
$info[2] = array('parent_id' => 1, 'title' => 'Item 2');
$info[3] = array('parent_id' => 1, 'title' => 'Item 3');
$info[4] = array('parent_id' => 3, 'title' => 'Item 4');
$info[5] = array('parent_id' => 4, 'title' => 'Item 5'); 
```

使用*id*列作为数组索引。

**嵌套数组**

从仅包含项目 ID 的*$info*创建嵌套数组：

```
function tree_structure($info, $parent = 0) {    
    foreach ($info as $row) {
        if ($row['parent_id'] == $parent)
            $struc[$row['id']] = tree_structure($info, $row['id']);
    }    
    return $struc;        
} 
```

这个数组可以传递给 RecursiveArrayIterator。

你现在有两个数组：

*   $info - (flat) 包含关于你的节点的所有信息
*   $struc - （递归）包含节点的结构

**递归数组迭代器**

开始使用 RecursiveArrayIterator

```
 $array = new RecursiveArrayIterator($struc);
    $iterator = new RecursiveIteratorIterator($array, TRUE);
    $iterator->rewind();

    while ($iterator->valid()) {
        // Get the id
        $iterator->key();
        // Get the depth
        $iterator->getDepth();
        // Check if it has children
        $iterator->hasChildren();
        // Get the number of children
        sizeof($iterator->callGetChildren());
        // Get all information for the node from the flat array
        $info[$iterator->key()];

        $iterator->next();
    } 
```

代码中的*$info[$iterator->key()]*行起到了实际作用。通过这一行，您可以获得有关节点的所有信息，而不会弄乱结构。

# ruby - 如何在 Capybara 中准确使用同步？

> ID：14588241
> 
> 赞同：12
> 
> 时间：2013-01-29T17:06:28.673
> 
> 标签：ruby, rspec, capybara, browser-automation

如果如何使用 wait_until 非常清楚（我在通过本机 Webdriver 方法创建测试时使用了这样的方法），但不是新的同步方法（对不起:)）。我已经阅读了关于为什么不推荐使用 wait_until 的主题，我已经阅读了有关该主题的文章，我已经阅读了带有方法描述的文档，还阅读了描述存在的代码。但是我没有找到任何示例或教程如何准确地使用此方法。

请任何人提供一些我（可能还有其他人）可以看到并学习如何使用此方法的案例

例如案例

```
expect(actual).to equal(expected) 
```

只有在超时之后，我应该在哪里“放置”同步方法以获得负面异常？

UPD：对于那些有兴趣的人，请查看此链接：

[http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara](http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara)

[https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/base.rb#L44](https://github.com/jnicklas/capybara/blob/master/lib/capybara/node/base.rb#L44)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-24T23:08:10.050

我刚刚发现了一个需要使用#synchronize 的案例。我有一个帮助方法，它在页面上查找一个元素，如果它存在，它会单击它并返回一些在页面上更新的文本（通过 JavaScript）。在某些情况下，在找到元素并单击它之间，它可能会由于其他 JavaScript 代码而消失（并可能重新出现），并且可能引发 Selenium::WebDriver::Error::StaleElementReferenceError 异常。所以我像这样使用同步：

```
page.document.synchronize do
  element = first('#whatever')
  if element
    element.click
    find('#foo').text
  else
    nil
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T17:22:38.000

请参阅此可能对您有所帮助的辅助方法。在[https://gist.github.com/10c41024510ee9f235e0找到](https://gist.github.com/10c41024510ee9f235e0)

```
# spec/support/capybara_helpers.rb

module CapybaraHelpers
  def wait_for_whizboo
    start = Time.now
    while true
      break if [check for whizboo here, e.g. with page.evaluate_script]
      if Time.now > start + 5.seconds
        fail "Whizboo didn't happen."
      end
      sleep 0.1
    end
  end
end

RSpec.configure do |config|
  config.include CapybaraHelpers, type: :request
end 
```

# regex - 东京内阁和cygwin

> ID：14588242
> 
> 赞同：1
> 
> 时间：2013-01-29T17:06:30.103
> 
> 标签：regex, cygwin, dbm

我正在尝试在 Windows Cygwin 下安装[**Tokyo Cabinet**](http://fallabs.com/tokyocabinet)但运行时`./configure`出现以下错误：

```
configure: error: regex.h is required 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:02:33.130

从库存的 Cygwin 安装中，可以通过安装`gcc4-core`软件包来解决此问题。请务必检查`Select required packages (RECOMMENDED)`。

但是，如果您尝试交叉编译，则需要[**安装 PCRE**](http://kemovitra.blogspot.com/2009/07/mingw-porting-gnu-regex-to-windows.html)。

# c# - 如何创建一个文本框来保存路径

> ID：14588243
> 
> 赞同：0
> 
> 时间：2013-01-29T17:06:31.797
> 
> 标签：c#, visual-studio-2010, windows-forms-designer

我见过很多次，具有类似功能的程序`textbox`用于获取/保存`path`某些内容...上面有一个按钮，当您单击它时会提示您选择目录，您知道? 我怎么能这样做？我必须阅读一个`file.txt`，我需要我的应用程序来打开这个`file.txt`，我如何打开这个“提示”？然后我需要以`destination path`相同的方式保存...实际上是a`textbox`还是其他？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:08:12.557

您需要在文本框旁边创建一个按钮。

在按钮的 Click 事件处理程序中，创建并显示一个`SaveFileDialog`，然后将其结果分配给文本框的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:09:36.673

您需要在`OpenFileDialog`表单中添加一个（[MSDN 有更多信息](http://msdn.microsoft.com/en-gb/library/system.windows.forms.openfiledialog.aspx)）

这个样本应该比我能解释得更好！

```
private void button1_Click(object sender, System.EventArgs e)
{
Stream myStream = null;
OpenFileDialog openFileDialog1 = new OpenFileDialog();

openFileDialog1.InitialDirectory = "c:\\" ;
openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*" ;
openFileDialog1.FilterIndex = 2 ;
openFileDialog1.RestoreDirectory = true ;

if(openFileDialog1.ShowDialog() == DialogResult.OK)
{
    try
    {
        if ((myStream = openFileDialog1.OpenFile()) != null)
        {
            using (myStream)
            {
                // Insert code to read the stream here.
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:10:04.210

您可以使用 OpenFileDialog

```
string path;
OpenFileDialog file = new OpenFileDialog();
if (file.ShowDialog() == DialogResult.OK)
{
    path = file.FileName;
} 
```

现在文件路径被保存到字符串中，然后您可以操作该文件。

# c++ - visual C++ 将文本发送到光标

> ID：14588247
> 
> 赞同：0
> 
> 时间：2013-01-29T17:06:35.847
> 
> 标签：c++, cursor, nfc

我正在使用 NFC 阅读器读取 M1 卡的 UID，我想将此 UID 字符串插入光标当前所在的任何位置。例如在 url 框中，在记事本中（就像“条形码”阅读器输入设备，但这次使用 NFC UID）

我已经实现了读取 UID 的功能，现在我想做我的第二部分 - 将 UID 插入光标所在的任何位置。

我正在使用 Visual C++，你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:21:04.673

如果要模拟按键，可以添加输入事件：

```
INPUT inp;

inp.ki.dwFlags = 0;
inp.ki.wVk = 'A';
inp.ki.wScan = 0;
inp.ki.time = 0;
inp.ki.dwExtraInfo = NULL;
inp.type = INPUT_KEYBOARD;

SendInput(1, (LPINPUT) &inp, sizeof(inp));

inp.ki.dwFlags = KEYEVENTF_KEYUP;

SendInput(1, (LPINPUT) &inp, sizeof(inp)); 
```

这会发送一个按键，然后是“A”键的按键。您可以在一次调用中提交这些结构的数组，为了清楚起见，我省略了它。另请注意，密钥*不是*ascii，而是 VK 代码。碰巧的是，字母键由它们的大写值表示。

*显然，如果用户碰巧在他们想要*输入字符的地方没有光标，则可能会发生不良/意外的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:10:39.250

将文本放在剪贴板上。然后用户可以粘贴它。让用户控制，不要搞砸用户正在做的事情。

# javascript - 如何在 Javascript 中为服务器的 AjaxCall 编写测试方法？

> ID：14588248
> 
> 赞同：1
> 
> 时间：2013-01-29T17:06:42.147
> 
> 标签：javascript, asp.net-mvc-3, visual-studio-2010, qunit, chutzpah

工作ajax调用代码如下

```
$('#callControllerBtn').click(function () {
    currentlySelectedRow = grid.select();
    sendProductIDToController(currentlySelectedRow);
});

function sendProductIDToController(currentlySelectedRow) {
    $.ajax({
        url: "Home/sendProductID/", // Home = Controller , sendProductID = Action
        data: {
            ID: pID
        },
        cache: false,
        type: "POST",
        timeout: 10000,
        dataType: "json",
        success: function (result) {
            if (result) {
                alert("Successfully Completed");
                grid.removeRow(currentlySelectedRow);
                editor.value("");
            } else {
                alert("Failed");
            }
        }
    });
} 
```

现在我想编写相同的代码，但使用 JS 测试方法。我在 vs 2010 中使用 QUnit、ChutzPah，让我看看模拟/假 ajax 调用的好做法是什么，也用测试方法实现工作代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:23:53.393

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-test-your-javascript-code-with-qunit/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-test-your-javascript-code-with-qunit/)

查看异步章节。

您可以在 $.ajax() 对象文字参数中使用 JQuery 夹具属性来指定应将 ajax 调用重新路由到的静态文件。这是 JMVC 文档中对固定装置的一个很好的解释：

[http://javascriptmvc.com/docs.html#!jQuery.fixture](http://javascriptmvc.com/docs.html#!jQuery.fixture)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T14:10:29.490

我知道这个问题很老，但我遇到了同样的问题，这就是我解决它的方法：

我劫持了 $.ajax 函数不进行调用：

```
var $.ajaxResults = [];

$.ajax = function(options) {
    $.ajaxResults.push(options);
} 
```

根据具体情况，您可能需要一些更复杂的代码来捕获所有参数或其他任何东西。但在我的应用程序中，我总是使用 $.ajax(options)

然后，在测试中你可以这样做：

```
// the code below initializes the control and triggers an ajax call
$('#ddTest').dropdown();

// check if the ajax call was triggered
equal($.ajaxResults.length, 1, "there is one registered ajax call");

// ajax callback -> run the callback with fake data to populate the control
$.ajaxResults[0].success([
    { value: '1', label: 'one' },
    { value: '2', label: 'two' },
    { value: '3', label: 'three' }
]); 
```

这样你就可以同时检查调用参数和回调函数

# c# - 通过文件上传/多部分表单通过 POST 使用 REST WebService

> ID：14588249
> 
> 赞同：1
> 
> 时间：2013-01-29T17:06:45.637
> 
> 标签：c#, web-services, rest, post, multipartform-data

我有一个使用 Django 创建的 REST Web 服务方法，它处理/处理文件上传。如何使用 C# 从我的 windows-form/桌面应用程序中使用它？另外，有人可以解释一下我如何在 C# 中进行字典参数传递，就像下面的 python 代码段一样？

```
import requests
url = "http://<url>
files = {'file' : open("<filename>", "rb").read(), 'name':'sample.txt'}
r = requests.post(url, files) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T05:25:13.697

如果您可以使用 DNF45，那么 MultipartFormDataContent 将为您完成大部分繁重的工作。以下示例将模仿表单帖子的照片上传到 picpaste。然后它使用 HtmlAgility 来区分响应，这比您要求的要远得多，但是当您必须像使用 Web 服务一样使用交互式网页时，这是一件很方便的事情。

显然，您必须更改文件名以指向您自己计算机上的图片。这不应该是生产级的，只是我在弄清楚如何操作 picpaste，因为我太便宜了，无法支付 imgur 的费用。

```
using System;
using System.IO;
using System.Linq;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Net.Mime;

namespace picpaste1
{
  class Program
  {
    static void Main(string[] args)
    {
      var fi = new FileInfo(@"path\to\picture.png");
      using (var client = new HttpClient())
      using (var mfdc = new MultipartFormDataContent())
      using (var filestream = fi.OpenRead())
      using (var filecontent = new StreamContent(filestream))
      {

        filecontent.Headers.ContentDisposition = 
          new ContentDispositionHeaderValue(DispositionTypeNames.Attachment)
        {
          FileName = fi.Name,
          Name = "upload"
        };
        filecontent.Headers.ContentType = new MediaTypeHeaderValue("image/png");

        mfdc.Add(new StringContent("7168000"), "MAX_FILE_SIZE");
        mfdc.Add(filecontent);
        mfdc.Add(new StringContent("9"), "storetime");
        mfdc.Add(new StringContent("no"), "addprivacy");
        mfdc.Add(new StringContent("yes"), "rules");
        var uri = "http://picpaste.com/upload.php";
        var res = client.PostAsync(uri, mfdc).Result;
        var doc = new HtmlAgilityPack.HtmlDocument();
        doc.LoadHtml(res.Content.ReadAsStringAsync().Result);
        uri = doc.DocumentNode.SelectNodes("//td/a").First()
          .GetAttributeValue("href","NOT FOUND");
        res = client.GetAsync(uri).Result;
        doc.LoadHtml(res.Content.ReadAsStringAsync().Result);
        var foo = doc.DocumentNode.SelectNodes("//div[@class='picture']/a").First()
          .GetAttributeValue("href","NOT FOUND");
        Console.WriteLine("http://picpaste.com{0}", foo);
        Console.ReadLine();
      }
    }
  }
} 
```

如果响应是 JSON 而不是 HTML，这很可能用于 Web 服务，请使用 Newtonsoft.Json 解析器。整个网络都有教程。它全面且速度非常快，是我的首选武器。从广义上讲，您创建类来对您期望在 JSON 中的对象图进行建模，然后使用它们来键入通用方法调用。

```
using Newtonsoft.Json;

var res = client.PostAsync(uri, mfdc).Result;
Foo foo = JsonConvert.DeserializeObject<Foo>(res.Content.ReadAsStringAsync().Result); 
```

您可以从 NuGet 获得 HtmlAgility 和 Newtonsoft.Json。

# android - 只允许在以后的 API 中导入类？

> ID：14588251
> 
> 赞同：1
> 
> 时间：2013-01-29T17:06:49.400
> 
> 标签：android

我的项目支持 API8+。在一种方法中，我使用了仅在 API9 中可用的 ArrayDeque。因此，它用“@TargetApi(9)”注释，另外我在使用它之前检查了 Build.VERSION.SDK_INT。

现在，显然我有一个导入 java.util.ArrayDeque，它在针对 API8 构建时会引发错误。一旦我针对目标更高的 API 版本构建它，但在 API8 设备上运行，它会好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:12:00.133

> 一旦我针对目标更高的 API 版本构建它，但在 API8 设备上运行，它会好吗？

是的，假设您对此是正确的：

> 我在使用之前检查了 Build.VERSION.SDK_INT

在 API 级别 4 或更低的设备上运行它可能会遇到问题，因为这种向后兼容性在当时更令人讨厌。但是 API 级别 8 应该没问题，只要您从不在 API 级别 9 之前的设备上使用此类。

# python - 使用 Python、Flask 和 Celery 的并发异步进程

> ID：14588253
> 
> 赞同：7
> 
> 时间：2013-01-29T17:06:55.753
> 
> 标签：python, asynchronous, flask, celery

我正在开发一个小型但计算密集型的 Python 应用程序。计算密集型工作可以分成几个可以同时执行的部分。我正在尝试确定一个合适的堆栈来实现这一点。

目前我计划在 Apache2+WSGI 上使用 Flask 应用程序和 Celery 作为任务队列。

在下面，如果有 3 个或更多工作人员可用，will 和 execute 会同时执行`a_long_process()`吗`another_long_process()`？`yet_another_long_process()`进程执行时 Flask 应用程序会被阻塞吗？

从 Flask 应用程序：

```
@myapp.route('/foo')
def bar():
    task_1 = a_long_process.delay(x, y)
    task_1_result = task_1.get(timeout=1)
    task_2 = another_long_process.delay(x, y)
    task_2_result = task_2.get(timeout=1)
    task_3 = yet_another_long_process.delay(x, y)
    task_3_result = task_3.get(timeout=1)
    return task_1 + task_2 + task_3 
```

任务.py：

```
from celery import Celery
celery = Celery('tasks', broker="amqp://guest@localhost//", backend="amqp://")
@celery.task
def a_long_process(x, y):
    return something
@celery.task
def another_long_process(x, y):
    return something_else
@celery.task
def yet_another_long_process(x, y):
    return a_third_thing 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:28:04.403

您应该更改代码，以便工作人员可以并行工作：

```
@myapp.route('/foo')
def bar():
    # start tasks
    task_1 = a_long_process.delay(x, y)
    task_2 = another_long_process.delay(x, y)
    task_3 = yet_another_long_process.delay(x, y)
    # fetch results
    try:
        task_1_result = task_1.get(timeout=1)
        task_2_result = task_2.get(timeout=1)
        task_3_result = task_3.get(timeout=1)
    except TimeoutError:
        # Handle this or don't specify a timeout.
        raise
    # combine results
    return task_1 + task_2 + task_3 
```

此代码将阻塞，直到所有结果都可用（或达到超时）。

> 进程执行时 Flask 应用程序会被阻塞吗？

此代码只会阻止您的 WSGI 容器的一个工作人员。整个站点是否无响应取决于您使用的 WSGI 容器。（例如 Apache + mod_wsgi、uWSGI、gunicorn 等）大多数 WSGI 容器会产生多个工作人员，因此在您的代码等待任务结果时只有一个工作人员会被阻塞。

对于这种应用程序，我建议使用[gevent](http://www.gevent.org/)，它为每个请求生成一个单独的 greenlet，并且非常轻量级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:19:32.117

根据文档[`result.get()`](http://docs.celeryproject.org/en/master/reference/celery.result.html#celery.result.AsyncResult.get)，它会等到结果准备好后再返回，所以通常它实际上是阻塞的。但是，由于您有，如果任务完成时间超过 1 秒`timeout=1`，调用将引发 TimeoutError。`get()`

默认情况下，Celery 工作线程的并发级别设置[为等于可用 CPU 的数量](http://docs.celeryproject.org/en/latest/userguide/workers.html#concurrency)。并发级别似乎决定了可用于处理任务的线程数。因此，在并发级别 >= 3 的情况下，Celery 工作人员似乎应该能够同时处理那么多任务（也许具有更高 Celery 专业知识的人可以验证这一点？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T12:40:04.213

使用 celery canvas 的[Group](https://celery.readthedocs.org/en/latest/userguide/canvas.html#the-primitives)功能：

> group 原语是一个签名，它采用应该并行应用的任务列表。

这是文档中提供的示例：

```
from celery import group
from proj.tasks import add

g = group(add.s(2, 2), add.s(4, 4))
res = g()
res.get() 
```

哪个输出`[4, 8]`。

# asp.net - 更改gridview的边框颜色

> ID：14588258
> 
> 赞同：2
> 
> 时间：2013-01-29T17:07:12.447
> 
> 标签：asp.net, gridview, colors

使用Gridview显示存储在数据库中的表，我想将边框颜色更改为#dbddff。它不会接受这个或 dbddff，我该怎么办？

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="true" BorderColor="dbddff" AllowSoerting="true" Width="100px"  AutoGenerateColumns="false" DataSourceID="GridDataSource"> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:16:37.180

尝试将 BorderWidth 属性设置为 1px。

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="true" BorderWidth="1px" BorderColor="dbddff"  AllowSoerting="true" Width="100px"  AutoGenerateColumns="false" DataSourceID="GridDataSource"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-09T20:57:45.883

你的代码

问题是边框颜色中缺少#。这应该工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:14:48.273

您可以通过样式或样式表应用颜色吗？

```
#GridView1 {
    border: solid 1px #dbddff;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T02:47:42.750

您可以指定颜色或使用十六进制代码，在这种情况下，您需要在十六进制代码之前添加 #。边框的大小必须至少为 1 px 才能显示颜色。

# excel - 如何根据名称和 ID 在 C 列中计算“否”？

> ID：14588261
> 
> 赞同：1
> 
> 时间：2013-01-29T17:07:21.093
> 
> 标签：excel, vba, excel-formula, excel-2010

我有 3 列。

```
-----A-----B-----C-----
---Name----ID---Report 
```

在 AI 列中有名称（可以重复）
在 BI 列中有 ID（对于不同的名称可以使用相同的 ID 重复）
在 CI 列中有 Yes 和 No（对于相同的 ID 可以重复 NO）

我需要帮助来计算 John（A 列）在 C 列中的编号，但如果 B 列具有重复的 ID，则只计算一次。

我可以通过过滤器和其他东西来做到这一点，但我只需要使用公式来做到这一点。

这是我正在处理的文件（Dropbox 链接）
[Dropbox excel 文件链接](http://db.tt/zQm8zgR7)

这是我到目前为止得到的

```
=COUNTIF(A1:A1000,"*" & "John" & "*") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T19:49:18.907

您可以使用这样的单个公式：

`=SUM(IF(FREQUENCY(IF(A2:A200="John",IF(C2:C200="No",B2:B200)),B2:B200),1))`

那是一个“数组公式，需要用 CTRL+SHIFT+ENTER 确认

这为您的示例提供了 3 - 请注意，它要求 B 列数据为数字，这似乎是这里的情况.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:33:42.693

这似乎与您尝试做的非常接近

```
=SUMPRODUCT((A2:A1000="John")*(C2:C1000="No")*(IF(FREQUENCY(B2:B1000,B2:B999)>0,TRUE))) 
```

频率存在一个缺陷，它忽略了最后一行。如果我将频率公式更改为`FREQUENCY(B2:B1000,B2:B1000)`它会出错，因为它返回 10 个结果而不是所需的 9 个结果。

*编辑*

扩展其他范围可能比缩短 bins 数组更好。

```
=SUMPRODUCT((A2:A1001="John")*(C2:C1001="No")*(IF(FREQUENCY(B2:B1001,B2:B1000)>0,TRUE))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T19:05:38.493

我的想法是`D`用公式添加列`=COUNTIFS(A:A,"="&A2,B:B,"="&B2,C:C,"="&C2)`。这将为您提供每行的重复数。如果一行返回 3，则表示该配置还有另外两个实例。

接下来，创建一个新表，为了测试我在列`G`和`H`. 列`G`仅编号为 1、2、3 等，以`G2`. Name 是单元格中的标题和引用`H1`，在本例中为 John。然后将此公式放入单元格中`H2`：`=COUNTIFS(A:A,"="&$H$1,C:C,"=No",D:D,"="&G2)/G2`并将其向下拖动。它本质上是在计算每个“1”重复、“2”重复和“3”重复的实例（这实际上可能很有用）。然后只需对列求和`H`，您就应该得到答案。

# jquery-ui - jquery-UI模态窗体关闭按钮显示位置

> ID：14588267
> 
> 赞同：5
> 
> 时间：2013-01-29T17:07:34.690
> 
> 标签：jquery-ui, position

jquery ui 模态表单右上角的关闭按钮出现显示问题。我有一个例子：http: [//jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)

所以我做了：http: [//jsbin.com/atenac/3/edit](http://jsbin.com/atenac/3/edit)

如果单击创建新用户，您应该会看到关闭图标未正确显示。

我用 chrome(latest) 和 IE9 进行了测试。它从实际容器的右下角显示。

主题有问题，还是我遗漏了什么？如果您更改为基本 cdn，它可以工作，但对于任何其他 css，它都无法正常工作。

代码：

```
<head>
    <!-- base cdn: http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/themes/base/jquery-ui.css-->
    <link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.0/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>

</head>
<body>
    <div id="dialog-form" title="Create new user">
        <p class="validateTips">
            All form fields are required.</p>
        <form>
        <fieldset>
            <label for="name">
                Name</label>
            <input type="text" name="name" id="name" class="text ui-widget-content ui-corner-all" />
            <label for="email">
                Email</label>
            <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
            <label for="password">
                Password</label>
            <input type="password" name="password" id="password" value="" class="text ui-widget-content ui-corner-all" />
        </fieldset>
        </form>
    </div>
    <button id="create-user">
        Create new user</button>
</body>
<script>
    $(function () {
        $("#dialog-form").dialog({
            autoOpen: false,
            height: 300,
            width: 350,
            modal: true,
            buttons: {
                "Create an account": function () {
                    allFields.removeClass("ui-state-error");
                    $(this).dialog("close");

                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            },
            close: function () {
                allFields.val("").removeClass("ui-state-error");
            }
        });

        $("#create-user")
                  .button()
                  .click(function () {
                      $("#dialog-form").dialog("open");
                  });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T00:41:57.653

您似乎使用了不正确的样式表（版本 1.9.0）。链接到 CSS 的 1.10.0 版本似乎已修复它：http: [//jsbin.com/atenac/8/edit](http://jsbin.com/atenac/8/edit)

正确的 CSS 链接是： [http ://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.0/themes/smoothness/jquery-ui.css](http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.0/themes/smoothness/jquery-ui.css)

# javascript - 克隆/复制 JQGrid

> ID：14588269
> 
> 赞同：0
> 
> 时间：2013-01-29T17:07:38.887
> 
> 标签：javascript, jquery, jqgrid, copy

如果我有一个正确初始化的 jqgrid，并且有元素/数据。有没有办法让我将整个东西克隆/复制到一个变量中，然后将它附加到另一个 html 元素。

例如。

```
<table id="ratioTable" class="d" ></table> 
```

在表被初始化并将数据放入其中之后......在 JS 中调用一个函数来执行类似的操作。

```
m_Settings.reportElements.push($('#primaryCurrentInjectTable').jqGrid('getGridParam')); 
```

然后在另一个函数中做这样的事情..

```
function setReportElements(){
    var report = $('#reportDiv');
    var reportElements = m_Settings.reportElements;
    for(var ix = 0; ix < reportElements.length; ix++){
        report.append(reportElements[ix]);
    }
} 
```

这样做的目的是我有几个表需要复制并放入报告中。我认为最简单的方法就是复制整个表格，并将其附加到我的报告 div 中。这也是在本地运行的，所以虽然性能很重要，但我还有一些余地。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:12:16.937

Okay... figured it out as soon as I posted. Go figure.

Anyways... add "gbox_" to the beginning of your table id and it selects all elements.. like so.

```
m_Settings.reportElements.push($('#gbox_primaryCurrentInjectTable')); 
```

# php - 如何让 Netbeans PHPUnit 代码覆盖在 Windows 上运行？

> ID：14588271
> 
> 赞同：5
> 
> 时间：2013-01-29T17:07:44.553
> 
> 标签：php, netbeans, phpunit

我正在尝试让 Ne​​tbeans[代码覆盖率检查](http://netbeans.org/kb/docs/php/phpunit.html#code-coverage)功能正常工作。我在 Windows XAMPP 设置上使用 PHP，并设置了 PHPUnit，它似乎可以正常运行单元测试。

当我右键单击我的项目并选择“代码覆盖率 > 收集并显示代码覆盖率”时，它会在底部显示一个小条，上面写着“0%”，并且可以选择运行测试和获取报告。

我运行测试并检查报告，但它仍然保持在 0%。如果我检查报告，它会显示“没有数据 - 你运行你的代码了吗？” 我试过重新运行测试，但它仍然这样做。我也尝试过只运行该项目，并且“调试”该项目无济于事。

很难获得有关该主题的最新信息，但从 PHPUnit 文档来看，[Xdebug 可能存在问题](http://www.phpunit.de/manual/3.0/en/code-coverage-analysis.html)（我已启用它，但不知道它是否正常工作，因为我之前没有在 Netbeans 中使用过它）。一些旧消息来源说 Xampp 中有两个 php.ini（一个用于 Web，一个用于 CLI），但我找不到第二个（猜想这已经改变了）。

我确定我可能缺少一些相当基本的东西，比如 Xdebug 设置或其他东西......有什么帮助吗？

这是我的 php/php.ini 文件中的 XDebug 部分：

```
[XDebug]
zend_extension = "D:\xampp\php\ext\php_xdebug.dll"
;xdebug.profiler_append = 0
;xdebug.profiler_enable = 1
;xdebug.profiler_enable_trigger = 0
;xdebug.profiler_output_dir = "\xampp\tmp"
;xdebug.profiler_output_name = "cachegrind.out.%t-%s"
xdebug.remote_enable = 1
xdebug.remote_handler = "dbgp"
xdebug.remote_host = "127.0.0.1"
;xdebug.trace_output_dir = "\xampp\tmp" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T07:46:01.220

可能是由这个引起的：[http](http://forums.netbeans.org/topic47374.html) ://forums.netbeans.org/topic47374.html 。显然 PHPUnit 不能处理从 c:\ 开始并在 D: 上测试的东西。

因此，我使用 --coverage-html /path/to/directory 参数从命令行运行任何我想要覆盖报告的测试：

```
phpunit --bootstrap bootstrap.php --configuration phpunit.xml --coverage-html ./report ./unit 
```

最后一个参数 (./unit) 表示这将测试 unit/ 子目录中的 als 测试。

# javascript - 覆盖来自 Google Chrome 扩展的页面内容

> ID：14588277
> 
> 赞同：4
> 
> 时间：2013-01-29T17:08:02.317
> 
> 标签：javascript, html, css, google-chrome-extension

我正在编写一个非常简单的 Google Chrome 扩展程序，但遇到了如此多的问题，以至于对于如此悲惨规模的项目来说有点不知所措。

扩展是一个非常简单的扩展：到达任何页面（例如 google.com）后，页面内容被隐藏，用户面临一个问题，他必须正确回答......或者被重定向到其他页面提供正确答案的页面。换言之，除非他正确回答问题，否则用户不能访问互联网上的页面。

为了隐藏页面内容，我决定使用以下方法进行简单的覆盖：

# 方法#1

我尝试在当前文档的正文中附加一个简单的不透明，`div`其宽度/高度为 100%。那行得通，但是：`position: fixed;``z-index: 2147483647;`

*   页面的 CSS 不断干扰我的`div`.
*   Flash 内容偶尔会出现在它上面（至少在 Windows XP 上）。`embed`在整个页面上追逐s 并将其设置`wmode`为“透明”并没有帮助，偏移到 -10000px 或设置 `display:none;`只是缓解了但并没有解决问题。另请参阅[此问题](https://stackoverflow.com/questions/10372906/chrome-extension-jstree-iframe-drag-and-drop)。

# 方法#2

`iframe`我尝试在创建并注入页面的 GUI 中对 GUI 进行沙盒处理，使其行为`div`与上述方法完全相同。它完美地解决了第一种方法的问题，但是：

*   `iframe`显然，由于跨域策略，无法访问的内容。还有这种访问权限——我需要它为用户输入答案的输入字段分配处理程序，我需要记住谁从我的答案输入字段中窃取了焦点，以便在问题得到回答后将其归还，等等等等。 .
*   使用[消息传递](https://developer.chrome.com/extensions/messaging.html)对我不起作用，我*什至不确定是否应该*让它起作用，因为消息传递使整个事情变得过于复杂，并禁止我将应用程序用作简单的网页（即不作为扩展）。为什么还要打扰？

那么......我的方法哪里错了？有没有我不知道的第三个或第四个？

我很感激，但实际上并不需要代码作为答案。提示或推动正确的方向也一样好。

PS我想在某些时候有人会问我是否有代码要分享。我有，但有一堆。您具体想看哪一部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:44:56.780

# 方法#2

### 关注#1

> 显然，由于跨域策略，无法访问 iframe 的内容。还有这种访问——我需要它为用户输入答案的输入字段分配处理程序，我需要记住谁从我的答案输入字段中窃取了焦点，以便在问题得到回答后将其归还，等等等等。

是的，您访问 iframe 的内容是网页的所有代码，没有 CSP 等。

# 注入 iframe 的内容脚本。

我建议这是最好的方法，您可以将脚本注入到动态生成的 iframe 中，如此处所示并获取内容

## 示例实现

### 清单.json

```
{
    "name": "Iframe",
    "description": "",
    "version": "1",
    "manifest_version": 2,
    "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "myscript.js"
            ],
            "run_at": "document_end"
        },
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "anotherscript.js"
            ],
            "all_frames": true
        }
    ],
    "permissions": [
        "<all_urls>"
    ]
} 
```

### myscript.js

```
var iframe = document.createElement("iframe");
iframe.setAttribute("src", "https://www.facebook.com/plugins/like.php?href=http://allofrgb.blogspot.in/");
iframe.setAttribute("style", "border:none; width:150px; height:30px");
iframe.setAttribute("scrolling", "no");
iframe.setAttribute("frameborder", "0");
document.body.appendChild(iframe); 
```

### 另一个脚本.js

```
iframes = document.getElementsByTagName("iframe");
for (iframe in iframes){
    console.log(iframes[iframe].src);
}
console.log("In another Script"); 
```

如果您观察到控制台记录的消息，您会观察到消息被记录两次（`document`log + `iframe`log + `[any number of optional iframes in pages]*`）

`anotherscript.js`在状态期间运行的确实在动态生成的 iframe 中执行，但是您可以随时通过[chrome.tabs.executeScript()](https://developer.chrome.com/extensions/tabs.html#method-executeScript)`document idle`重新运行内容脚本。

### 关注#2

> 使用消息传递对我不起作用，我什至不确定是否应该让它起作用，因为消息传递使整个事情变得过于复杂，并禁止我将应用程序用作简单的网页（即不作为扩展）。为什么还要打扰？

你想达到什么目标？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-19T20:58:00.860

完全忘记了这个问题......最后我使用了方法 2，使用消息传递与 iframe 进行通信，它工作得很好。这是对那些有兴趣阅读代码的人的扩展仓库：[https ://github.com/olegskl/invasive-kanji](https://github.com/olegskl/invasive-kanji)

# cassandra - 如何使用 FluentCassandra 连接到 Cassandra

> ID：14588278
> 
> 赞同：1
> 
> 时间：2013-01-29T17:08:02.390
> 
> 标签：cassandra, fluentcassandra

我是 Cassandra 和 FluentCassandra 的新手。

在真实环境中：我们将在所有节点（多台服务器）中安装 Cassandra。

```
using (var db = new CassandraContext(keyspace: KeyspaceName, server: Server)) 
```

在这种情况下，应该提到什么作为服务器名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:38:58.950

只需提及多个服务器主机地址及其端口号即可。

# powershell - Powershell 选择字符串子字符串

> ID：14588279
> 
> 赞同：0
> 
> 时间：2013-01-29T17:08:08.090
> 
> 标签：powershell, powershell-2.0

我目前正在读取文件的内容并返回一个获取一行的模式。我现在能够自己获得正确的线路。如何对 $RunTimeLine 结果执行子字符串函数以返回前四个字符？

```
[string] $RunTimeLine = Select-String -Path $IDCSwiftFlowXMLFile -pattern "<time>" | ForEach-Object {$_.Line} 
```

$RunTimeLine 的输出 >>>>>>> 30 5 * * 2-6 2

我尝试执行以下操作，但没有返回任何内容

```
$StartTime = $RunTimeLine.substring(0,4) 
```

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:17:40.660

*如果*您有一个字符串，则 String.Substring 方法应该可以工作。如果你执行：

```
$StartTime = $RunTime.substring(0,4) 
```

它不返回任何内容，因为结果已分配给 $StartTime。这个输出是什么：

```
$StartTime 
```

如果没有然后尝试`$StartTime -eq $null`。前四个字符是否可能是空格，因此看起来没有输出。你可以用`$StartTime.Length`.

# java - JDeveloper 10 在我的戴尔 6520 上死机

> ID：14588282
> 
> 赞同：0
> 
> 时间：2013-01-29T17:08:21.010
> 
> 标签：java, jdeveloper

在我的 Dell 6520 上，JDeveloper 在使用期间会暂时冻结。每当我滚动浏览编辑器时，它通常会发生。与实际阅读文档相比，它花费更多时间冻结。这种情况发生得如此之多，以至于我团队中的所有开发人员都求助于使用 NotePad++。由于显而易见的原因，这不是最佳解决方案。目前，升级到最新版本 (11g) 也不是我们的选择。

这似乎是由于滚动期间发生的视频故障。我已经通过戴尔的网站查看了视频驱动程序更新，但似乎我的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:41:38.257

JDev 10g 的一个已知错误是它在 64 位系统上表现不佳。这里有一些你可以尝试的事情

1.  您可以使用不同的 JRE。JDeveloper 包含它自己的 JRE，它很可能是 32 位 JRE。您可以尝试安装 64 位 JRE 并将其与 JDeveloper 一起使用。这意味着使用独立于平台的安装程序而不是 Windows 安装程序来安装 JDeveloper。

2.  在虚拟机中运行它。运行 32 位 XP-VM 可能是一个合理的权宜之计。或者，安装 32 位版本的 Windows/Linux 并同时在其上进行开发。

3.  升级到 JDeveloper 11g。我知道你不能，但现在是开始计划迁移的时候了。另一种选择是迁移到 Eclipse 之类的东西进行开发并使用[OEPE](http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T08:16:58.743

我知道的老话题，但我只是遇到了这个问题`JDev 10.1.3`并将其放在这里以帮助其他人。

一个使用笔记本电脑在 Windows 上运行 JDeveloper 的人在 IDE 尝试滚动时出现严重的显示问题，因为它留下了可见的标记。最终解决方法是`AddVMOption -Dsun.java2d.noddraw=true`在`$JDEV_HOME/jdev/bin/jdev.conf`文件中添加。

[http://abakalidis.blogspot.com/2007/06/jdeveloper-1013x-screen-display.html](http://abakalidis.blogspot.com/2007/06/jdeveloper-1013x-screen-display.html)

# tridion - 带有 DD4T 的 Tridion 2011 - 组件实体上没有可用的元数据字段

> ID：14588288
> 
> 赞同：12
> 
> 时间：2013-01-29T17:08:37.137
> 
> 标签：tridion, tridion-2011, dd4t

我正在使用 Tridion 2011（使用 DD4T，提供 MVC webapp）。

多媒体组件的元数据字段（在 Tridion 中我的图像架构的元数据选项卡上指定）似乎没有填充 DD4T“组件”对象上的相应属性。eg`LinkedComponentFields[0].MetadataFields`为空且`Multimedia.AltText`为空。

具体来说，我所追求的领域是 AltText。但由于组件上的整个 MetadataFields 集合是空的，它显然没有通过任何元数据属性进行拉取。我尝试使用 TemplateBuilder 在组件模板中设置参数（我将“解析宽度和高度”设置为是，并将 MergeAction 设置为合并） - 这没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T18:49:42.607

它可能是由链接级别引起的。默认情况下，链接从您要发布的页面或组件开始跟随一级。您可以通过向模板调用添加一个称为链接级别的参数来增加此值。首先尝试使用 2 的值，然后增加直到它起作用。

# android - Android ICS 网络位置不更新，真正的解决方案？

> ID：14588289
> 
> 赞同：2
> 
> 时间：2013-01-29T17:08:52.640
> 
> 标签：android, gps, location, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

我在 Nexus 4 和三星 Galaxy S3 上看到了这个

仅通过网络提供商，我在很多情况下都无法获得 GPS/定位数据，直到手机重新启动。这不是我的用户的解决方案。

似乎有很多样板 GPS 和定位代码，以及经过调整的代码，只需要 Android 4.0+ 的不同逻辑，我想知道其他人是如何处理的。

基本上我的应用程序和其他 Play 商店应用程序将无法获取 GPS/定位数据，但 Google 地图应用程序仍然可以。

可能重复？当然，但是从我所看到的情况来看，相关问题中接受的答案都不够充分，需要确定这是否是一个已知的错误，或者是否有一些新的编码考虑可以完成而不涉及重新启动电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T16:20:58.777

我的解决方案是用 Google Play 服务替换我所有的定位代码。

# ios - 如何创建比设备屏幕更大的 UIImage？

> ID：14588293
> 
> 赞同：2
> 
> 时间：2013-01-29T17:09:06.857
> 
> 标签：ios, graphics, uiimage, instagram

我正在开发一个 iPhone 应用程序，它可以创建图片并将它们发布到 Facebook 和 Instagram。

Facebook 照片的正确尺寸似乎是 350x350，实际上这段代码创建了一个 350x350 的图像，正是我想要的：

```
-(UIImage *)createImage {
    UIImageView *v = [[UIImageView alloc] initWithFrame:CGRectMake(0, screenHeight/2-349, 349, 349)];
    v.image = [UIImage imageNamed:@"backgroundForFacebook.png"];  //"backgroundForFacebook.png" is 349x349.

    //This code adds some text to the image.

    CGSize dimensions = CGSizeMake(screenWidth, screenHeight);
    CGSize imageSize = [self.ghhaiku.text sizeWithFont:[UIFont fontWithName:@"Georgia"
                                                                       size:mediumFontSize]
                                     constrainedToSize:dimensions lineBreakMode:0];
    int textHeight = imageSize.height+16;
    UITextView *tv = [self createTextViewForDisplay:self.ghhaiku.text];
    tv.frame = CGRectMake((screenWidth/2)-(self.textWidth/2),s creenHeight/3.5,
                          self.textWidth/2 + screenWidth/2, textHeight*2);
    [v addSubview:tv];

    //End of text-adding code

    CGRect newRect = CGRectMake(0, screenHeight/2-349, 349, 349);
    UIGraphicsBeginImageContext(newRect.size);
    [[v layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *myImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [v removeFromSuperview];
    return myImage;
} 
```

但是当我使用相同的代码创建需要为 612x612 的 Instagram 图片时，我只得到文本，没有背景图片：

```
-(UIImage *)createImageForInstagram {
    UIImageView *v = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 612, 612)];
    v.image = [UIImage imageNamed:@"backgroundForInstagram.png"];  //"backgroundForInstagram.png" is 612x612.

    //...text-adding code...

    CGRect newRect = CGRectMake(0, 0, 612, 612);
    UIGraphicsBeginImageContext(newRect.size);
    [[v layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *myImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [v removeFromSuperview];
    return myImage;
} 
```

我做错了什么，我该如何解决？

（虽然我在这里，但我还要说我对使用图形上下文很陌生，所以如果代码中有任何尴尬，我会很感激你指出。）

**编辑：** 现在我将这两种方法简化为一种，这次我什至没有得到文本。啊！

```
-(UIImage *)addTextToImage:(UIImage *)myImage withFontSize:(int)sz {
    NSString *string=self.displayHaikuTextView.text;
    NSString *myWatermarkText = [string stringByAppendingString:@"\n\n\t--haiku.com"];
    NSDictionary *attrs = [NSDictionary dictionaryWithObjectsAndKeys:[UIFont fontWithName:@"Georgia" 
                                                                                     size:sz],
                                                                     NSFontAttributeName, 
                                                                     nil];
    NSAttributedString *attString = [[NSAttributedString alloc] initWithString:myWatermarkText attributes:attrs];
    UIGraphicsBeginImageContextWithOptions(myImage.size,NO,1.0);
    [myImage drawAtPoint: CGPointZero];
    NSString *longestLine = ghv.listOfLines[1];
    CGSize sizeOfLongestLine = [longestLine sizeWithFont:[UIFont fontWithName:@"Georgia" size:sz]];
    CGSize siz = CGSizeMake(sizeOfLongestLine.width, sizeOfLongestLine.height*5);
    [attString drawAtPoint: CGPointMake(myImage.size.width/2 - siz.width/2, myImage.size.height/2-siz.height/2)];
    myImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return myImage;
} 
```

当我传递参数`[UIImage imageNamed:"backgroundForFacebook.png"]`（图像 349x349）和`12`时，一切都很好。我明白了。当我传递参数`[UIImage imageNamed:"backgroundForInstagram.png"]`（图像 612x612）和`24`时，什么也没做。

现在我只是将文本放在较小的图像（@“backgroundForFacebook.png”）上，然后调整它的大小，但这会使文本模糊，我不喜欢。

**编辑：**只是为了涵盖基础知识，这里是 1）我调用此方法的方法（检查拼写）和 2）支持文件和构建阶段（显示图像实际上存在）的图像。我还尝试分配`longestLine`一个非变量 NSString。没运气。:(

![在此处输入图像描述](../Images/7eca2447a74e375a601442b959fd29b7.png)

![构建阶段](../Images/bbab344475b9fa88bd617e290f37c7a3.png)

![在此处输入图像描述](../Images/97d02db23316d331621227a963e0f9dd.png)

**进一步编辑：**好的，在上面记录图像的大小和比例`addTextToImage:`，这是我得到的较小图像的结果，即有效的图像：

```
2013-02-04 22:24:09.588 GayHaikuTabbed[38144:c07] 349.000000, 349.000000, 1.000000 
```

这就是我从更大的图像中得到的结果——太棒了。

```
Feb  4 22:20:36 Joels-MacBook-Air.local GayHaikuTabbed[38007] <Error>: CGContextGetFontRenderingStyle: invalid context 0x0
Feb  4 22:20:36 Joels-MacBook-Air.local GayHaikuTabbed[38007] <Error>: CGContextSetFillColorWithColor: invalid context 0x0

//About thirty more of these.

Feb  4 22:20:36 Joels-MacBook-Air.local GayHaikuTabbed[38007] <Error>: CGBitmapContextCreate: unsupported parameter combination: 0 integer bits/component; 0 bits/pixel; 0-component color space; kCGImageAlphaNoneSkipLast; 2448 bytes/row.
Feb  4 22:20:36 Joels-MacBook-Air.local GayHaikuTabbed[38007] <Error>: CGContextDrawImage: invalid context 0x0
Feb  4 22:20:36 Joels-MacBook-Air.local GayHaikuTabbed[38007] <Error>: CGBitmapContextCreateImage: invalid context 0x0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:06:15.663

单步执行代码。创建后`myImage`，进入控制台查看`myImage.size`and `myImage.scale`。`size`将数字乘以`scale`。

如果您的背景图像是 Retina 质量的，那么您的图像实际上是 1224 x 1224。

从[UIImage 文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)：

> 您应该避免创建尺寸大于 1024 x 1024 的 UIImage 对象。除了这样的图像会消耗大量内存之外，在 OpenGL ES 中将图像用作纹理或将图像绘制到视图或图层时，您可能会遇到问题。如果您正在执行基于代码的操作，例如通过将图像绘制到支持位图的图形上下文来调整大于 1024 x 1024 像素的图像大小，则此大小限制不适用。实际上，您可能需要以这种方式调整图像的大小（或将其分成几个较小的图像），以便将其绘制到您的视图之一。

如果您的图像实际上是 612*像素*（不是*points*），但您的代码将其渲染为 1224 像素，您只需将`scale`属性更改为 1.0。

如果您的图像实际上是 1224 像素，则您需要执行其他操作，例如

*   将您的代码放在位图支持的图形上下文中（即，`UIGraphicsBeginImageContext`围绕有问题的代码进行调用）
*   向用户显示较小的版本

但是，如果您的图片用于 Instagram，则不应为 1224 x 1224 :-)

**更新：** 我注意到您的应用与俳句相关，所以这里是俳句格式的答案：

> 大 UIImage？
> 
> 位图支持的图形上下文
> 
> 或者缩小到612

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:17:03.877

尝试这个

```
-(UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
//UIGraphicsBeginImageContext(newSize);
UIGraphicsBeginImageContextWithOptions(newSize, NO, 10.0);//  10.0 means 10 time bigger
[image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return newImage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T17:15:54.967

我总是支持显而易见的问题：

*   您的图像实际上是否正确命名/拼写为 backgroundForInstagram.png？
*   您是否已将其正确添加到您的项目中？
*   添加时，它是否在构建阶段的复制步骤中复制到设备？
*   在编辑的代码中调用时 ghv 中有什么？
*   渲染时 ghv.lines 的 item[1] 中有什么？

这些是我在调试这段代码时要考虑的事情。

# php - 如何在 Ubuntu 12.04 机器上安装 libpuzzle for PHP？

> ID：14588294
> 
> 赞同：0
> 
> 时间：2013-01-29T17:09:07.467
> 
> 标签：php, php-extension

我正在尝试安装 libpuzzle PHP 扩展，但我似乎无法让它工作。

我已尝试遵循以下说明：

> Puzzle 库也可以通过 PHP 使用，使用原生扩展。先决条件是 PHP 头文件、libtool、autoconf 和 automake。以下是安装扩展的基本步骤：
> 
> （在 OpenBSD 上：导出 AUTOMAKE_VERSION=1.9 ；导出 AUTOCONF_VERSION=2.61）
> 
> cd php/libpuzzle
> 
> php化
> 
> ./configure --with-libpuzzle
> 
> 打扫干净
> 
> 制作
> 
> 进行安装
> 
> 如果 libpuzzle 安装在非标准位置，请使用：./configure --with-libpuzzle=/base/directory/for/libpuzzle
> 
> 然后编辑您的 php.ini 文件并添加：
> 
> 扩展=libpuzzle.so

但是，当我尝试运行“./configure --with-libpuzzle”时，出现以下错误：configure: error: Please reinstall the libpuzzle distribution

请有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:14:08.757

当 Ubuntu 存储库中提供源代码时，您是否有理由从源代码编译？

```
sudo aptitude install libpuzzle-php 
```

或者`apt-get`，如果您喜欢这样：

```
sudo apt-get install libpuzzle-php 
```

如果您以某种方式在存储库中没有看到它，请执行以下搜索：

```
sudo aptitude search libpuzzle 
```

在我的 12.04 安装中显示了这一点：

```
p   libpuzzle-bin                 - quick similar image finder - runtime tool                               
p   libpuzzle-bin:i386            - quick similar image finder - runtime tool                               
p   libpuzzle-dev                 - quick similar image finder - development files                          
p   libpuzzle-dev:i386            - quick similar image finder - development files                          
p   libpuzzle-php                 - quick similar image finder - PHP bindings                               
p   libpuzzle-php:i386            - quick similar image finder - PHP bindings                               
p   libpuzzle1                    - quick similar image finder - shared library                             
p   libpuzzle1:i386               - quick similar image finder - shared library 
```

# jquery - jQuery UI 可拖放纯文本

> ID：14588299
> 
> 赞同：0
> 
> 时间：2013-01-29T17:09:27.130
> 
> 标签：jquery, jquery-ui

我需要将文本从浏览器外部拖放到网页，但我想使用 jQuery UI droppable 来接受纯文本。

这是一个使用 javascript 的教程，这对我有用：

[http://html5doctor.com/native-drag-and-drop/](http://html5doctor.com/native-drag-and-drop/)

但是我正在动态添加一些元素，并使用 liveQuery 和其他一些实现起来相当复杂的东西使它们可删除。

我尝试了类似的方法，它适用于可拖动元素，但不适用于纯文本：

```
 $('#cointainer').livequery(function () {
            $(this).droppable({
                drop: function (event, ui) {

                    alert("dropped");
                },
                greedy: true
            });
        }); 
```

是否可以使用 jQuery UI droppable 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:49:27.610

这是我得到的最接近的，它使用 jQuery 但**不是 jQuery UI droppable**。Hack around 是将您需要做的任何事情包装在函数中，并将此代码和 jQuery droppable 绑定在同一元素上，并从两个 drop 事件中调用相同的函数。这样您就可以同时支持可放置元素和文本放置。

```
 $('#cointainer').livequery(function () {

            $(this).bind('dragover', function (e) {
                e.preventDefault(); 
            });

            $(this).bind('dragenter', function (e) {
                e.preventDefault();
            });

            $(this).bind('drop', function (e) {

                e.preventDefault(); // prevent redirect

                if (e.originalEvent.dataTransfer.getData('Text') == ':)') {
                    $(this).append('<div>You dropped a smile!</div>');
                }

                e.stopPropagation(); // prevent bubbling, without this we would get duplicate items if parent is droppable too, acts like jQuery greedy: true;
            });
        }); 
```

# dependency-injection - DotNetNuke 模块开发 - 使用 StructureMap 的 IoC

> ID：14588301
> 
> 赞同：2
> 
> 时间：2013-01-29T17:09:35.720
> 
> 标签：dependency-injection, dotnetnuke, structuremap, dotnetnuke-module

我对 DotNetNuke 模块开发非常陌生，但相当精通 StructureMap 作为 IoC 容器以及 IoC 和依赖注入的概念。

我在这里关注 DNN 模块教程视频 - [http://www.dotnetnuke.com/Resources/Video-Library.aspx](http://www.dotnetnuke.com/Resources/Video-Library.aspx) - 但我不太清楚我将在哪里进行 StructureMap 初始化。

在 DNN 模块开发的框架内，我该在哪里做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T18:53:20.837

没有像在 DotNetNuke 中那样进行一次性初始化的好地方。DNN 没有给`Application_Start`事件一个干净的钩子。

我们采用的一种方法是实现一个执行[`HttpModule`](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)初始化的方法，并使用锁来确保它只发生一次。Ian Robinson 在他的 Beer Collection MVP 示例模块中有[一个例子](https://github.com/irobinson/BeerCollectionMVP/blob/b4537e8ce3129b1ea3a0826c8038b7403ab8a18a/HttpModules/RegisterDependencies.cs)，但似乎[有些删减了](https://github.com/irobinson/BeerCollectionMVP/commit/06a8e91f7af1eb5ab1261aecb9211641aa76c079)。这种方法的一个问题是它需要通过管道请求来设置所有内容。我们已经看到了计划任务（不在请求的上下文中运行）能够在没有此初始化的情况下启动的情况，然后因为没有任何依赖关系而崩溃。

# websphere-8 - eclipse 和 websphere 8.0 - 无法更改上下文根

> ID：14588302
> 
> 赞同：2
> 
> 时间：2013-01-29T17:09:35.907
> 
> 标签：websphere-8

我有用于 Eclipse 的 IBM 插件，它允许我在 websphere 8.0 服务器上进行开发。我正在使用eclipse（Juno Build）。

通常，在项目资源管理器中，我可以通过右键单击 >> 属性 >> Web 项目设置 >> 并在此处设置上下文根来更改应用程序的上下文根。我可以从字面上将该上下文根设置为任何内容，并且它不会改变任何内容。当我检查管理控制台时，它显示为“AppName”，而不是我在 Web 项目设置中设置的任何内容。那我无法在控制台中更改它，因为我可以单击的唯一按钮是“取消”。我可以更改所有文本字段，但是任何地方都没有保存按钮...

其他人遇到过这个问题吗？你做了什么来修复它，如果有的话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:11:47.440

您可以`Context Root`在 WebSphere 中设置 2 个位置。

第一个是在`application.xml`EAR 文件中的模块定义中（该文件在 WAS 8 中不是强制性的，但可以使用它）

第二个是在`ibm-web-ext.xml`WAR 里面的文件中。

记住`application.xml`设置会覆盖`ibm-web-ext.xml`设置是否重要。

当您在 UI 中设置上下文根时，它正在设置`ibm-web-ext.xml`文件，如果您有另一个定义，`application.xml`您将不会看到任何变化，正如您所经历的那样。

我的建议是，如果您使用`application.xml`总是在那里设置上下文根。

# sql - 复合主键与附加“ID”列？

> ID：14588304
> 
> 赞同：64
> 
> 时间：2013-01-29T17:09:38.213
> 
> 标签：sql, sql-server, database, database-design

如果我们有这样的表：

书籍（假装“ISBN”不存在）

*   作者
*   标题
*   版
*   出版年份
*   价格

有人可能会争辩说 {Author,Title,Edition} 可能是候选/主键。

是什么决定了候选/主键应该是 {Author,Title,Edition} 还是应该使用 ID 列，而 {Author,Title,Edition} 是唯一索引/键约束？

也是

*   作者 (PK)
*   标题（PK）
*   版本（PK）
*   出版年份
*   价格

更好，或者：

*   身份证（PK）
*   作者
*   标题
*   版
*   出版年份
*   价格

其中 {Author,Title,Edition} 是一个额外的唯一索引/约束？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-29T20:04:00.343

假设`{Author, Title, Edition}`唯一标识一本书，则以下成立：

1.  它是一个超级键——唯一标识一个元组（行）。

2.  它是不可约的——删除任何列都不会再使其成为键。

3.  它是一个候选键——一个不可约的超键是一个候选键。

现在让我们考虑 ID（整数）

我可以推断，`Book`表键将作为外键出现在少数其他表中，并且也会出现在少数索引中。因此，这将占用相当多的空间——比如三列 x 40 个字符（或其他......）——在每个表中加上匹配的索引。

为了使这些“其他”表和索引更小，我可以在表中添加一个唯一整数列`Book`作为键，该键将被引用为外键。像这样说：

```
alter table Book add BookID integer not null identity; 
```

由于`BookID`（必须）也是唯一的，该`Book`表现在有两个候选键。

现在我可以选择`BookID`作为主键。

```
alter table Book add constraint pk_Book primary key (BookID); 
```

但是，`{Author,Title,Edition}` **必须**保留一个键（唯一）以**防止**这样的事情：

```
BookID  Author      Title           Edition
-----------------------------------------------
  1      C.J.Date  Database Design     1
  2      C.J.Date  Database Design     1 
```

总而言之，添加`BookID`- 并选择它作为主要 - 并没有停止 `{Author, Title, Edition}`成为（候选）键。它仍然必须有自己的唯一约束，通常是匹配索引。

另请注意，从设计角度来看，此决定是在“物理级别”上完成的。一般来说，在设计的逻辑层面上，这`ID`并不存在——它是在考虑列大小和索引时引入的。因此，物理模式是从逻辑模式派生的。根据所使用的数据库大小、RDBMS 和硬件，这些大小推理都不会产生可衡量的效果——因此，将`{Author, Title, Edition}`其用作 PK 可能是非常好的设计——除非得到不同的证明。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-29T17:18:58.963

通常，您不希望主键更改值。这就是使用盲键或代理主键的原因。

假设您使用 Author 作为主键的一部分创建了 Book 表。

假设您在大约一年后发现您拼错了“Ray Bradbury”。或者更糟糕的是，你拼错了“Rachael Bloom”。想象一下，您必须修改多少数据库行才能更正拼写错误。想象一下必须更改多少索引引用。

但是，如果您有一个带有代理键的 Author 表，您只需更正一行。不必更改索引。

最后，数据库表名通常是单数（Book），而不是复数（Books）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-29T21:30:27.157

使用代理主键方案的另一个很好的理由是唯一性约束是否应该在将来发生变化（例如，需要添加 ISBN 以使一本书唯一）。重新键入您的数据会容易得多。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-29T17:29:19.513

与此相关的文章有很多。您的情况下复合键的问题：

1.  很难将书籍与其他实体联系起来
2.  很难在网格中编辑它们，因为大多数网格不支持复合键（例如 kendo 网格、jqgrid）
3.  您可能拼错了作者、标题、版本

规范化您的数据并像 (dasblinkenlight) 建议的那样仅向作者存储一个 ID 也是很好的。最坏的情况是，他/她会改变他/她的名字（例如她结婚了，她喜欢她的新名字）。

# .net - .NET Web API 应用程序令牌和用户身份验证

> ID：14588309
> 
> 赞同：3
> 
> 时间：2013-01-29T17:09:46.330
> 
> 标签：.net, api, authentication, web, token

> **可能重复：**
> [ASP.NET Web API 中的用户身份验证](https://stackoverflow.com/questions/11731683/user-authentication-in-asp-net-web-api)

致力于为我们的一些服务创建 Web API，并试图找到保护它的最佳方法。我们希望向任何希望使用 API 的应用程序/开发人员颁发 API 密钥。此外，一些 API 调用应该需要身份验证。

例如，服务调用 #1 执行基本获取。对于此调用，所需要的只是与调用者对应的令牌。服务调用 #2 会放置敏感信息。对于此调用，令牌是必需的，此外，与 put 请求关联的用户应经过身份验证。

是否有任何示例概述了这种类型的实现？我花了很多时间浏览网页，我发现似乎提供了基于令牌或用户身份验证的内容。我所见过的一切都没有。

* * *

这被标记为可能重复，这就是为什么我看到其他...

我在问如何合并一个令牌以将 Web 应用程序作为消费者进行身份验证，以及如何对使用我们服务的 Web 应用程序的用户进行身份验证。提供给可能重复项的链接仅说明了如何实现单级身份验证（表单或 Windows 身份验证）。它没有提供有关执行应用程序令牌和用户身份验证的信息。

# jboss7.x - 让 Cobertura 从 Jboss AS 7 中转储

> ID：14588315
> 
> 赞同：0
> 
> 时间：2013-01-29T17:10:09.623
> 
> 标签：jboss7.x, cobertura

我正在尝试获取 Jboss AS 7 应用程序的 Cobertura 代码覆盖率报告。我已经正确地检测了应用程序 java 工件，它们都部署得很好。但我无法让 Cobertura 在停止 AS 时转储 Cobertura.ser 报告。正如 Cobertura FAQ 中提到的，我已经使用 -Djboss.shutdown.forceHalt=false 启动了 AS，但这没有任何效果。任何线索可以做什么......我有不同的测试套件，我想生成覆盖率报告，所以停止 AS 是我从中转储 Cobertura.ser 的最佳选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:38:48.537

假设您在更新 jboss-setup/bin 文件夹中的 run.bat 文件时遇到问题，您可以替换该行吗

```
set JAVA_OPTS=%JAVA_OPTS% -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 
```

具有以下行的 run.bat 文件

```
set JAVA_OPTS=%JAVA_OPTS% -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.shutdown.forceHalt=false -Dnet.sourceforge.cobertura.datafile="%JBOSS_HOME%\bin\cobertura.ser" 
```

我假设'cobertura.ser' 放在你的jboss-setup/bin 文件夹中。

# django - 在 Django 应用程序中发送动态内容的方法

> ID：14588317
> 
> 赞同：1
> 
> 时间：2013-01-29T17:10:14.927
> 
> 标签：django, dynamic-data

我对这一切都很陌生，所以如果我使用的语言不能代表我所描述的内容，我深表歉意。

我正在开发一个 Django 应用程序，我的公司将使用它来监控它发送给各个银行的拍卖出价。我现在处于客户在一个页面上看到拍卖及其内容的阶段，而我们在不同的页面上看到几乎相同的东西。我*想要*发生的是让客户填写他们想要的所有东西的出价，点击“提交”，然后在我们的（管理）页面上，会弹出一个新列，其中包含银行名称和他们的出价在每个项目上。

我不认为我可以在 jQuery 中做到这一点。我必须使用 AJAX 吗？php？这些都是有效的方法吗？我真的不知道。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:23:12.680

我使用 PHP 和 Django。但最简单的构建方法是使用 Django+Ajax。

# java - 获取系统代理设置不起作用

> ID：14588320
> 
> 赞同：3
> 
> 时间：2013-01-29T17:10:35.030
> 
> 标签：java, proxy, proxyselector

我使用这段代码来获取 Java 中的系统代理：

```
System.setProperty("java.net.useSystemProxies", "true");
    List<Proxy> list = null;
    try
    {
        list = ProxySelector.getDefault().select(new URI("http://google.com"));
    }
    catch (final URISyntaxException e)
    {
        e.printStackTrace();
    } 
```

但是“列表”只包含`DIRECT`，而不是我在 Internet Explorer 中设置的设置。奇怪的是，在我们软件的早期版本中，完全相同的代码会返回正确的系统代理列表。

有谁知道什么可能使代码无法正常工作？

我添加了一些本地库，这是我唯一能想到的。但我仍然不知道这会如何影响这段代码。我在一个小测试应用程序中，在同一个 Eclipse 环境等中测试了相同的代码，它可以工作。但是当我在我的应用程序中调试相同的代码时，列表只包含`DIRECT`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:31:24.587

本机库是问题所在。我使用 NativeSwing，在 Swing 中嵌入 WebBrowser。执行 NativeInterface.open() 或 NativeInterface.initialize() 时，代理设置已更改，之后无法更改。因此，我现在读取代理设置并将它们保存到静态字段。然后当我需要它们时，我会从这个静态字段中读取它们。

故事还在继续：上述方法仅在 Eclipse 中有效。如果我双击 jar，我会得到*“本机端没有收到传入连接！”* . 其原因不是因为我使用的 NativeInterface，而是与 java 处理系统代理设置的方式有关。

我发现这篇文章：http: [//ideen2011.blogspot.de/2011/08/java-proxyselector-usesystemproxies-and.html](http://ideen2011.blogspot.de/2011/08/java-proxyselector-usesystemproxies-and.html)

简而言之：使用 ProxySelector.setDefault(null); 如果您希望套接字连接不受系统代理等的影响。至少这对我有所帮助，但我仍在努力了解后台到底发生了什么。

故事在 2015 年继续：前面提到的方法导致了这个问题：[JavaFX webview set Proxy](https://stackoverflow.com/questions/28152323/javafx-webview-set-proxy)

所以我建议而不是

```
ProxySelector.setDefault(null) 
```

使用

```
ProxySelector.setDefault(ProxySelector.getDefault()) 
```

# ruby-on-rails - Rails 3 在子目录中运行，找不到资产

> ID：14588321
> 
> 赞同：1
> 
> 时间：2013-01-29T17:10:37.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, asset-pipeline, sprockets

我正在使用[nginx](http://wiki.nginx.org)为两个 Rails 站点提供服务。Rails1 不使用资产管道，但 Rails2 使用。Rails2 也使用前缀来区别于 Rails1。例如：

```
http://myhost -> Rails1
http://myhost/abc -> Rails2

```

两个站点都在运行，但是**没有找到**对 Rails2 站点上资产的任何引用。

这是我的伪 nginx.conf 的样子：

```
http {
    上游轨道1 {
        服务器 127.0.0.1:3000；
    }
    上游轨道2 {
        服务器 127.0.0.1:3030；
    }
    服务器 {
        位置 ~ ^/assets/ {
            最大过期；
            add_header 缓存控制公共；
            access_log 关闭；
        }
        位置 /abc {
            proxy_pass http://rails2;
        }
        地点 / {
            proxy_pass http://rails1;
        }
    }
}

```

此外，我的 Rails 2 应用程序中的 routes.rb ：

```
Rails2App::Application.routes.draw do

  scope '/abc' do
    resources :projects
    root :to => 'home#index'
  end

end 
```

浏览到`http://myhost/abc/`Rails2 应用程序，打开没有 css 的页面，并出现以下错误：

```
获取 http://myhost/assets/application-asdasd.css 404（未找到）

```

我试过`config.assets.prefix = '/abc'`在 production.rb 文件中使用，但没有用。我还尝试了 ngnix.conf 文件中的不同变体，但也无济于事。

任何人都知道我做错了什么或错过了什么？

* * *

**更新**

我不太清楚为什么，但我能够使用@location 而不是上游来（错误地）工作。但我不得不将资产文件夹从 Rails2 应用程序移动到 Rails1 应用程序。不完全理想。

对服务器部分的更改：

```
位置〜^/（资产）/ {
    最大过期；
    add_header 缓存控制公共；
    access_log 关闭；
}

位置 ~ ^/(abc)/ {
    根 /rails2/public；
    try_files $uri/index.html $uri.html $uri @rails2;
    error_page 404 /404.html；
    error_page 422 /422.html;
    error_page 500 502 503 504 /500.html；
    error_page 403 /403.html;
}

地点 / {
    根 /rails1/public；
    try_files $uri/index.html $uri.html $uri @rails1;
    error_page 404 /404.html；
    error_page 422 /422.html;
    error_page 500 502 503 504 /500.html；
    error_page 403 /403.html;
}

位置@rails1 {
    proxy_pass http://127.0.0.1:3000;
}

位置@rails2 {
    proxy_pass http://127.0.0.1:3030;
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T21:17:29.303

从一个类似的问题：[https ://stackoverflow.com/a/3355589/417872](https://stackoverflow.com/a/3355589/417872)

你试过这个吗？

```
config.action_controller.relative_url_root = '/rails_app' 
```

我建议使用谷歌搜索如何从子目录中正确地为 rails 应用程序提供服务。这是您要处理的真正问题，快速搜索会返回几页有用的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T21:32:19.013

I had a similar problem running Rails 4 on Nginx in production environment. The solution I found was to specify the `root` path for the asset location in `nginx.conf`:

```
location ^~ /assets/ {
    root /home/rails/myapp/public;
    gzip_static on;
    expires max;
    add_header Cache-Control public;
} 
```

Hope this helps

# sql - 与 MS Access 相比，SQLite 非常慢

> ID：14588323
> 
> 赞同：2
> 
> 时间：2013-01-29T17:10:40.637
> 
> 标签：sql, database, sqlite, ms-access

按照[SO-ers 的建议](https://stackoverflow.com/questions/14324466/fast-sql-like-database-for-read-only-operations)，我将我拥有的一个 MS Access 数据库（一个小的，出于测试原因）转换为 SQLite。它有两个表，一个有 5k 个条目，另一个有 50k 个条目。

现在，我将在**QuLimma**和**QLexeis**下面展示的查询使用 Access 大约需要 60 毫秒（以下函数的总时间），而使用 SQLite 则需要高达 830 毫秒。

```
Dim i As Integer
Dim ms As Integer
ResultPin(0) = ""
ResultPin(1) = ""
ResultPin(2) = ""
ResultPin(3) = ""
ResultPin(4) = ""
i = 0
Multichoice = 0
ms = 0

Dim rsTblEntries As ADODB.Recordset
Set rsTblEntries = New ADODB.Recordset

Dim QuLimma As String, QLexeis As String
QuLimma = "SELECT Words.limma, Words.limmabody, Words.limmapro " & _
        "FROM Words " & _
        "GROUP BY Words.limma, Words.limmabody, Words.limmapro " & _
        "HAVING (((Words.limma)='" & StrLexeis & "'));"
QLexeis = "SELECT Limma.limmalexeis, Words.limma, Limma.limmabody, Words.limmapro, Limma.limmaexp " & _
        "FROM Limma INNER JOIN Words ON Limma.limmabody = Words.limmabody " & _
        "GROUP BY Limma.limmalexeis, Words.limma, Limma.limmabody, Words.limmapro, Limma.limmaexp " & _
        "HAVING (((Limma.limmalexeis)='" & StrLexeis & "'));"

rsTblEntries.Open QuLimma, CnDataParSQLite ', adOpenStatic, adLockOptimistic
If rsTblEntries.EOF = True Then
    rsTblEntries.Close
    rsTblEntries.Open QLexeis, CnDataParSQLite ', adOpenStatic, adLockOptimistic
    If rsTblEntries.EOF = True Then
        SearchQParagSQLite = False
    Else
        SearchQParagSQLite = True
        Do While rsTblEntries.EOF = False
            ms = ms + 1
            rsTblEntries.MoveNext
        Loop
        rsTblEntries.MoveFirst
        If ms > 1 Then
            Do While rsTblEntries.EOF = False
                ResultTemp(0, i) = rsTblEntries.Fields("limma").Value & "" 'rsWordPar!limma
                ResultTemp(1, i) = rsTblEntries.Fields("limmalexeis").Value & "" 'rsWordPar!limmalexeis
                ResultTemp(2, i) = rsTblEntries.Fields("limmabody").Value 'rsWordPar!limmabody
                If IsNull(rsTblEntries.Fields("limmapro").Value) = False Then ResultTemp(3, i) = rsTblEntries.Fields("limmapro").Value 'rsWordPar!limmapro
                rsTblEntries.MoveNext
                i = i + 1
                Multichoice = 1
            Loop
        Else
            Do While rsTblEntries.EOF = False
                ResultPin(0) = rsTblEntries.Fields("limma").Value & "" 'rsWordPar!limma
                ResultPin(1) = rsTblEntries.Fields("limmalexeis").Value & "" 'rsWordPar!limmalexeis
                ResultPin(2) = rsTblEntries.Fields("limmabody").Value 'rsWordPar!limmabody
                If IsNull(rsTblEntries.Fields("limmapro").Value) = False Then ResultPin(3) = rsTblEntries.Fields("limmapro").Value 'rsWordPar!limmapro
                rsTblEntries.MoveNext
                Multichoice = 0
            Loop
        End If
    End If
Else
     SearchQParagSQLite = True
     rsTblEntries.MoveFirst
     Do While rsTblEntries.EOF = False
        ResultPin(0) = rsTblEntries.Fields("limma").Value & "" 'rsWordPar!limma
        ResultPin(1) = "#"
        ResultPin(2) = rsTblEntries.Fields("limmabody").Value 'rsWordPar!limmabody
        If IsNull(rsTblEntries.Fields("limmapro").Value) = False Then ResultPin(3) = rsTblEntries.Fields("limmapro").Value 'rsWordPar!limmapro
        rsTblEntries.MoveNext
        i = i + 1
     Loop
End If
i = 0

rsTblEntries.Close
Set rsTblEntries = Nothing 
```

使用连接字符串：

```
CnDataParSQLite.ConnectionString = "DRIVER=SQLite3 ODBC Driver;" & _
                          "Database=" & strDataPath & "u.sl3;LongNames=0;Timeout=1000;NoTXN=0;SyncPragma=NORMAL;StepAPI=0;"
CnDataParSQLite.Open 
```

现在，在有人问“60ms 还不够快吗？”之前，我想说我这样做是因为我有其他 Access 文件和查询需要 3-4 秒并且想降低它们，所以是的，我希望在这个中从 60 毫秒下降到 30 毫秒或更少。

是我配置错误还是只是 SQLite 不快？我检查过，两者都返回正确的结果，没有奇怪的循环问题。

编辑：大部分时间都被第二个查询所消耗。

编辑 2：（从 db.sql 复制/粘贴）

表利马：

```
CREATE TABLE Limma ( id INTEGER PRIMARY KEY, limmabody INTEGER DEFAULT 0, limmalexeis VARCHAR2(100), limmastat VARCHAR2(50), limmaexp VARCHAR2(250));
INSERT INTO Limma VALUES (1, 1, 'υψικάμινος', 'ΣΠ', NULL);
INSERT INTO Limma VALUES (2, 1, 'υψίκορμος', 'ΣΠ', NULL);
INSERT INTO Limma VALUES (3, 1, 'υψίπεδο', 'ΑΠ', '<αρχ. υψίπεδον, ουδ. του επιθ. υψίπεδος<ύψι "ψηλά" + πέδον'); 
```

总计：64k 条目

表词：

```
CREATE TABLE Words ( id INTEGER PRIMARY KEY, limma VARCHAR2(100), limmabody INTEGER DEFAULT 0, limmapro VARCHAR2(200));
INSERT INTO Words VALUES (1, 'υψι (αχώριστο μόριο)', 1, NULL);
INSERT INTO Words VALUES (2, 'ομο (αχώριστο μόριο)', 2, NULL);
INSERT INTO Words VALUES (3, 'διχο (αχώριστο μόριο)', 3, NULL); 
```

总计：6k 条目

第一个字段“id”是唯一的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:33:59.163

您几乎从不想在可以使用 WHERE 标准的地方使用 HAVING。您正在评估所有可能的结果，然后在聚合后将它们剔除。您主要想使用 HAVING 标准，您试图根据汇总结果进行剔除。在这种情况下，您可以通过将 HAVING 逻辑移动到聚合之前的 WHERE 条件来实现相同的目的。这应该会大大加快您的查询速度。

也不需要使用 GROUP BY 逻辑，因为您没有返回任何聚合，只需使用 DISTINCT。

我会这样写：

```
QuLimma = "SELECT DISTINCT Words.limma, Words.limmabody, Words.limmapro " & _
    "FROM Words " & _
    "WHERE Words.limma ='" & StrLexeis & "';"
QLexeis = "SELECT DISTINCT Limma.limmalexeis, Words.limma, Limma.limmabody, Words.limmapro, Limma.limmaexp " & _
    "FROM Limma INNER JOIN Words ON Limma.limmabody = Words.limmabody " & _
    "WHERE Limma.limmalexeis ='" & StrLexeis & "';" 
```

对于使用您的表架构的这两个查询，这些索引应该优化查询：

```
CREATE NONCLUSTERED INDEX ix_words_1 ON Words (Limma) INCLUDE (Limmabody, Limmapro)
CREATE NONCLUSTERED INDEX ix_words_2 ON Words (Limmabody) INCLUDE (Limma, Limmapro)
CREATE NONCLUSTERED INDEX ix_limma_1 ON Limma (Limmabody, Limmalexeis) INCLUDE (Limmaexp) 
```

请记住，您拥有的每个附加索引在插入时都会产生成本。您必须权衡此成本与索引的收益。如果您的表包含静态数据，那么就没有害处。

# ibm-midrange - as400 crystal reports multi member files

> ID：14588332
> 
> 赞同：0
> 
> 时间：2013-01-29T17:11:04.600
> 
> 标签：ibm-midrange

I am using crystal reports to read files on an as400, some of the files are multi-member files. **how can i read a certain memeber without using the create alaisis command**?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T12:06:24.723

SQL 没有 Multiple Members 的概念，因此您需要使用 ALIAS。

```
create alias MyLib.MyAlias for MyLib.MyLogicalFile(MyMember);

select * from MyLib.MyAlias;

drop alias MyLib.MyAlias; 
```

参考：

*   [AS400多成员文件SQL查询](https://stackoverflow.com/questions/346512/sql-query-of-multi-member-file-on-as400?rq=1)
*   [为什么我的 As400 不能从新创建的成员别名中进行选择？](https://stackoverflow.com/questions/7194483/why-cant-my-as400-select-from-a-newly-created-member-alias)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:28:27.110

SQL 没有多成员文件的概念。没有特殊的 DB2 for i SQL 扩展可以帮助我们处理多成员文件。几乎所有仍然使用多成员文件的人都使用 CREATE ALIAS。

如果别名不适用于您的情况，请改为调用存储过程。SP 获取成员名称，执行 OVRDBF 并创建一个 SQL 结果集，然后 Crystal 可以对其进行迭代。

# .net - SQLite and .net String was not recognized as a valid DateTime

> ID：14588334
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:11:09.787
> 
> 标签：.net, vb.net, sqlite, visual-studio-2008

I'm using **VB.NET** and **VS 2008**, and having a problem selecting dates.

In the appointmentsmain table are 2 fields, StartDate and CustomerName

The StartDate contains dates formatted in this way ..

2013-01-29 11:16:41

```
Dim strSQL As String = "select * from  AppointmentsMain" 
```

Selecting all as above and reading via a **DataReader** throws the error. If I select the customername field only, it works fine.

I am using the `System.Data.SQLite` wrapper.

Below is the code. It breaks on the msgbox. Try

```
 Dim cn As SQLiteConnection

    Dim cmd As SQLiteCommand

    Dim rdr As SQLiteDataReader

    Dim strSQL As String = "select * from  AppointmentsMain"

    cn = New SQLiteConnection(strPublicConnectionString)

    cn.Open()

    cmd = New SQLiteCommand(strSQL, cn)

    rdr = cmd.ExecuteReader

    If rdr.Read Then

    MsgBox(rdr("startdate"))

    End If

    rdr.Close()

    cn.Close()

    Catch ex As Exception

    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:39:40.193

rdr("startdate") 返回什么？这是空的吗？不能解析成字符串吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:43:23.807

正如 Matthew 所说，首先要检查的是`rdr("startdate")`. 您的问题将其称为，`StartDate`但您的代码将其称为`startdate`，因此可能与区分大小写有关。您可以尝试`rdr("StartDate")`改用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-27T21:18:36.977

我也有这个问题。从我读过的内容来看，似乎不兼容的字符编码可能已应用于日期。我能够通过使用这样的东西来解决这个问题：

选择日期（开始日期）作为开始日期，... FROM AppointmentsMain

我知道这是一个老问题，但我无法在任何地方找到解决方案......

# vb.net - 删除组树中的逗号

> ID：14588335
> 
> 赞同：2
> 
> 时间：2013-01-29T17:11:13.003
> 
> 标签：vb.net, crystal-reports

我在 VB.Net 应用程序中创建了一个报表，并使用 Crystal Reports Viewer 控件来显示它。该报告按整数数据类型的字段分组。我已经成功地将字段格式化为字符串，以便它在报告上正确显示（即，没有任何千位分隔符或小数）。

现在的问题是，当我在查看器中打开组树时，该字段被视为整数（带有千位分隔符）。我已经尝试遵循这些文章 article1 、 article2 、 article3 中的解决方案[，](http://www.codeproject.com/Questions/179555/Avoiding-thousand-separator-in-Crystal-Report-Fiel)但[它们](https://stackoverflow.com/questions/13472161/how-to-remove-comma-from-crystal-report-string-and-from-integer-field)只[解决](http://scn.sap.com/thread/965536)了格式化字段显示的问题（我没有遇到问题）。

那么如何将整数显示格式化为组树上的字符串，而不是报表本身？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:40:20.200

进入组专家，选择您的组，然后点击“选项”。选择“选项”选项卡，然后标记“自定义组名称字段”复选框，然后选择“使用公式作为组名称”，最后输入公式`totext({table.field_you_are_grouping_on},0,'')`这将改变组的外观，包括在树中。

请注意，第二个参数`totext`控制小数位数，第三个参数控制千位分隔符（在我们的例子中为空字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:22:48.443

像这样为组创建一个公式：ToText({table.field},0)。

它将删除任何数千个分隔符。我经常用这个。

# c# - WPF: ListView & Editing ListViewItem

> ID：14588336
> 
> 赞同：2
> 
> 时间：2013-01-29T17:11:14.580
> 
> 标签：c#, wpf, listview

![enter image description here](../Images/80e7e3e06f7a497e07e8c5015646d442.png)

I want to be able to select an item and then edit its label:

*   Select an item
*   Item is highlighted
*   Click on it's label
*   Label's TextBlock is replaced with TextBox
*   Modify the label
*   Only one item can be edited at a time

End the editing:

1.  Click onto item's icon:
    *   TextBox is replaced back with TextBlock
    *   Item remains highlighted
2.  Another item is clicked:
    *   TextBox is replaced back with TextBlock
    *   Edited item is unselected
    *   Clicked item is selected and highlighted
3.  Any other area of the window is clicked:
    *   TextBox is replaced back with TextBlock
    *   Edited item remains highlighted

The behaviour should be pretty much as in Windows Explorer.

I managed to accomplish most of the requirements. Still I get random results. For example on first launch I could click straight onto label to edit it. The item itself remains not highlighted. This occurs only at start.

~~Also using the scroll-bar does not take focus off the list item. This allows to edit multiple items at the same time.~~

XAML

```
<Window x:Class="WPFComponents.DailyImages"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Model="clr-namespace:WPFComponents.Model"
    Title="Media Items" Height="300" Width="300">

<ListView x:Name="_mediaItemList" ItemsSource="{Binding MediaItems}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectionMode="Multiple"
          MouseLeftButtonDown="OnClickMediaList" IsSynchronizedWithCurrentItem="True">

    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="IsSelected" Value="{Binding IsSelected}" />
        </Style>
    </ListView.ItemContainerStyle>

    <ListView.ItemTemplate>
        <DataTemplate DataType="Model:MediaItem">
            <Grid Width="80" Margin="4">
                <Grid.RowDefinitions>
                    <RowDefinition></RowDefinition>
                    <RowDefinition></RowDefinition>
                </Grid.RowDefinitions>
                <Image HorizontalAlignment="Center" Stretch="Uniform" Source="{Binding Path=IconPath}" Width="70" />

                <StackPanel Grid.Row="2">
                    <TextBlock Text="{Binding Path=Date}" TextWrapping="Wrap" />

                    <TextBlock x:Name="_labelTextBlock" Text="{Binding Path=Label}" TextWrapping="Wrap"
                               PreviewMouseLeftButtonDown="OnClickLabelBlock">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Visible" />
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <TextBox x:Name="_labelTextBox" Text="{Binding Path=Label}" Visibility="Collapsed"
                             TextWrapping="WrapWithOverflow" TextAlignment="Center"
                             LostFocus="OnTextLostFocus">
                    </TextBox>
                </StackPanel>
            </Grid>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsEditing}" Value="True">
                    <Setter TargetName="_labelTextBlock" Property="Visibility" Value="Collapsed" />
                    <Setter TargetName="_labelTextBox" Property="Visibility" Value="Visible" />
                </DataTrigger>
            </DataTemplate.Triggers>

        </DataTemplate>
    </ListView.ItemTemplate>

    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel IsItemsHost="True" VerticalAlignment="Top" />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>

</ListView> 
```

Code

```
public partial class DailyImages
{
    public DailyImages()
    {
        InitializeComponent();

        ViewModel.DailyImages dailyImages = new ViewModel.DailyImages();
        _mediaItemList.DataContext = dailyImages;
    }

    private void OnClickLabelBlock(object sender, MouseButtonEventArgs e)
    {
        TextBlock notes = sender as TextBlock;
        if (notes == null) return;

        MediaItem selectedMedia = notes.DataContext as MediaItem;
        if (selectedMedia == null) return;

        // Multiple items might be selected
        // Clear all selected items
        _mediaItemList.SelectedItems.Clear();

        // Reselect
        selectedMedia.IsSelected = true;
        selectedMedia.IsEditing = true;

        Mouse.Capture(this, CaptureMode.SubTree);
    }

    private void OnTextLostFocus(object sender, RoutedEventArgs e)
    {
        TextBox textBox = sender as TextBox;
        if (textBox == null) return;

        MediaItem mediaItem = textBox.DataContext as MediaItem;
        if (mediaItem == null)
            return;

        // End the label editing
        mediaItem.IsEditing = false;

        ReleaseMouseCapture();
    }

    private void OnClickMediaList(object sender, MouseButtonEventArgs e)
    {
        // End the label editing
        foreach (MediaItem mediaItem in _mediaItemList.Items)
            mediaItem.IsEditing = false;

        ReleaseMouseCapture();
    }
} 
```

MediaItem.cs

```
public class MediaItem : INotifyPropertyChanged
{
    private bool _isEditing;
    private bool _isSelected;
    private string _label;

    public MediaItem()
    {
        IsEditing = false;
        _isSelected = false;
    }

    public bool IsEditing
    {
        get { return _isEditing; }
        set
        {
            if (_isEditing == value) return;
            _isEditing = value;
            OnPropertyChanged("IsEditing");
        }
    }

    public string Label
    {
        get { return _label; }
        set
        {
            _label = value;
            OnPropertyChanged("Label");
        }
    }

    public DateTime Date { get; set; }
    public string IconPath { get; set; }

    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            _isSelected = value;
            OnPropertyChanged("IsSelected");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

DailyImages.cs

```
public class DailyImages
{
    private ObservableCollection<MediaItem> _mediaItems;

    public DailyImages()
    {
        _mediaItems = new ObservableCollection<MediaItem>();

        _mediaItems.Add(new MediaItem {Label = "Image 1", IconPath = "Resources/Icon1.png"});
        _mediaItems.Add(new MediaItem {Label = "Image 2", IconPath = "Resources/Icon2.png"});
        _mediaItems.Add(new MediaItem {Label = "Image 3", IconPath = "Resources/Icon3.png"});
        _mediaItems.Add(new MediaItem {Label = "Image 4", IconPath = "Resources/Icon4.png"});
        _mediaItems.Add(new MediaItem {Label = "Image 5", IconPath = "Resources/Icon5.jpg"});
        _mediaItems.Add(new MediaItem {Label = "Image 6", IconPath = "Resources/Icon6.png"});
        _mediaItems.Add(new MediaItem {Label = "Image 7", IconPath = "Resources/Icon7.png"});
        _mediaItems.Add(new MediaItem {Label = "Image 8", IconPath = "Resources/Icon8.png"});
        _mediaItems.Add(new MediaItem {Label = "Image 9", IconPath = "Resources/Icon9.png"});
    }

    public ObservableCollection<MediaItem> MediaItems
    {
        get { return _mediaItems; }
        set { _mediaItems = value; }
    }
} 
```

Thanks for reading the long post.

I have searched and read many answers here in StackOverflow but none of them were great for me.

For example:

*   [How can a control handle a Mouse click outside of that control?](https://stackoverflow.com/questions/6761786/how-can-a-control-handle-a-mouse-click-outside-of-that-control)
*   [How to handle the event when click on empty space?](https://stackoverflow.com/questions/3554425/how-to-handle-the-event-when-click-on-empty-space)
*   [How to capture a mouse click on an Item in a ListBox in WPF?](https://stackoverflow.com/questions/1271375/how-to-capture-a-mouse-click-on-an-item-in-a-listbox-in-wpf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:46:31.393

也许在不同的状态下切换 IsReadonly 属性会更好？然后，您将不再需要切换可见性。此外，在这种情况下最好替换模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:50:02.453

您可能想要捕获列表视图上的滚动事件并显式移除元素上的焦点。

```
 ScrollViewer scrollViewer = GetVisualChild<ScrollViewer>(mTreeView);
    scrollViewer.ScrollChanged += new ScrollChangedEventHandler(scrollViewer..... 
```

并在处理程序中删除焦点。

查看此 stackoverflow 页面以将焦点从元素 [WPF 中移开：如何以编程方式从 TextBox 中移除焦点](https://stackoverflow.com/questions/2914495/wpf-how-to-programmatically-remove-focus-from-a-textbox)

# sql - SQL拆分列数据

> ID：14588339
> 
> 赞同：0
> 
> 时间：2013-01-29T17:11:19.727
> 
> 标签：sql, split

我的表中有一个名为的列，`display name`数据看起来像这样`John Smith`我正在寻找是否可以像这样拆分数据：

`display name as first name => John, display name as last name => Smith`

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:21:51.903

假设 MySQL，如果你总是有一个空格，这样的东西应该可以工作。

```
SELECT Substr(name, 1, Instr(name, ' ')) as FirstName,
   Substr(name, Instr(name, ' ')) as LastName
FROM DisplayName 
```

[这是一些Fiddle](http://sqlfiddle.com/#!2/427e2/3)示例，向您展示了它是如何工作的（以及何时不工作）。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T02:48:31.983

对于这个常见问题，有多种解决方案可用。如果您只是查询数据库，那么您可以使用@sgeddes 提供的示例。

现在，如果您想获取从该查询中获得的值并将其放在它自己的列中，您将需要创建一个新列；

```
alter table table_name
add column first_name varchar(30) COLLATE utf8_unicode_ci DEFAULT NULL
after col_name; 
```

⬆️ after 语句帮助您选择新列的位置。

然后您可以使用更新语句更新所述列；

```
update table_name
set first_name = SUBSTRING_INDEX(SUBSTRING_INDEX(display_name, ' ', 1), ' ', -1) 
```

这对我有用。祝你好运

# javascript - jQuery function running when it shouldn't

> ID：14588349
> 
> 赞同：1
> 
> 时间：2013-01-29T17:11:48.057
> 
> 标签：javascript, jquery, html

I have a function which only needs to run when the width is less then a specific value. I have done this with the `if ($(window).width() < n) { }` but the function also runs when the width is more then n..

The if `if ($(window).width() < n) { }` works fine since the background color changes (light gray for < 1000px and dark gray for > 1000px).

Since the function is running also when it shouldn't the layout of my page breaks (click the tabs and then resize to see this). When the function should not run regular tabs should be displayed as you can see, they are displayed correctly until you click they toggle (which is the function getting fired whereas it shouldn't).

Anyone who can help me?

[Code](http://jsfiddle.net/5f3AF/1/)

[Demo](http://jsfiddle.net/5f3AF/show/) (scroll < and > 1000px to see)

PS: I am aware the would be of a better use for although I have been limited to using a for this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:24:08.047

您不仅`if (windowsize < 1000)`需要了解当前状态。

```
if (is_large && windowsize < 1000)
{
    is_large = false;
    // rest of code to handle transition to small size
}
else if (!is_large)
{
    is_large = true;
    // code to handle transition to large size
} 
```

您还需要`is_large`在初始调用之前处理页面加载设置的情况`checkWidth()`。

# tags - GNU Global and GTAGS can't find class definitions

> ID：14588350
> 
> 赞同：5
> 
> 时间：2013-01-29T17:11:48.993
> 
> 标签：tags, gnu, gnu-global

I'm having trouble getting global to find class/struct definitions. I can find them with exuberant ctags and with cscope. All tag files are built from the same source file list. I configured and built global, et.al., only specifying --prefix. configure did find exhuberant and is using it. I've been trying global periodically over the years and it's always had this problem. Any ideas?

thanks, davep

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-04T00:16:04.177

只需导出这个变量就可以了。从手册页`gtags`-

`GTAGSFORCECPP If this variable is set, each file whose suffix is 'h' is treated as a C++ source file.`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T14:50:35.280

我发现我做错了什么。也许这会对某人有所帮助。

1.  仅仅因为 configure 发现 exuberant ctags 并不意味着它使它成为默认解析器。我的前 ctags 不支持 --gtags，也许这就是原因。在我的例子中，默认的解析器是原生的/内置的。
2.  本机解析器仅将 .h 视为 C 并且不查找 C++ 构造。奇怪的是，它也找不到结构。

我找到了 2 个修复：

1) 最好的，如果你有丰富的 ctags，将其设为默认值。丰富的默认配置可以正确处理 .h 文件。如果没有，请使用方法 2。在 .globalrc 中，更改

```
default:\   
  :tc=native:

to 

default:\   
  :tc=ctags: 
```

2) 如果您没有丰富的 ctags，请编辑 .globalrc 并将内置解析器的 langmap 行从

```
builtin-parser:\
 :langmap=c\:.c.h,yacc\:.y,asm\:.s.S,java\:.java,cpp\:.c++.cc.hh.cpp.cxx.hxx.hpp.C.H,php\:.php.php3.phtml:

to

builtin-parser:\
 :langmap=c\:.c,yacc\:.y,asm\:.s.S,java\:.java,cpp\:.c++.cc.hh.h.cpp.cxx.hxx.hpp.C.H,php\:.php.php3.phtml: 
```

即删除.h 与C 的关联并将其与C++ 关联。这可能会导致 C .h 文件出现问题。如果是这样，您可能需要将*所有*C++ .h 文件重命名为 .hh、.hpp、.hxx 等，如 langmap 中给出的那样。

根据我使用 C++ 的经验，看起来大多数人仍然使用 .h 作为头文件。

# android - Foursquare Android upload photo error

> ID：14588351
> 
> 赞同：0
> 
> 时间：2013-01-29T17:11:50.443
> 
> 标签：android, foursquare

I am adding a photo after checkin. I am using that checkinId to add photo. I am getting error response from post request.

> `{"meta":{"code":400,"errorType":"param_error","errorDetail":"Cannot add photo to this checkin (it is a duplicate)"},"response":{}}`

```
String URL_UPLOAD_PHOTO = "https://api.foursquare.com/v2/photos/add";
entity.addPart("v", new StringBody(sdf.format(cal.getTime()))); 
entity.addPart("checkinId", new StringBody(checkinId));
entity.addPart("public", new StringBody("1"));
entity.addPart("oauth_token", new     StringBody(FoursquareConstants.sharedPreference.getToken()));

ByteArrayBody imgBody = new ByteArrayBody(FrameActivity.tempPicByte, "image/jpeg",    "happyPhoto");
entity.addPart("image", imgBody); 
```

What's the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:10:47.663

这意味着照片已经上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T19:30:04.890

上传图片时，以下代码适用于我。

```
mBitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[] bitmapdata = stream.toByteArray();

HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("https://api.foursquare.com/v2/photos/add");

try 
{
    MultipartEntity entity = new MultipartEntity();
    entity.addPart("v", new StringBody("20121210")); 
    entity.addPart("venueId", new StringBody(venue.getId()));
    entity.addPart("public", new StringBody("1"));
    entity.addPart("oauth_token", new     StringBody(mAccessToken));
    ByteArrayBody imgBody = new ByteArrayBody(bitmapdata, "image/jpeg",    "FS_image");

    entity.addPart("image",imgBody);
    httppost.setEntity(entity);
    HttpResponse response = httpclient.execute(httppost);
    Log.v("response","" +response);
    responseResult = inputStreamToString(response.getEntity().getContent()).toString();
} 
catch (ClientProtocolException e) 
{
    Log.d(TAG, "Opening URL " +e);
} 
```

# meteor - 如何区分流星上不同浏览器/选项卡/窗口上的同一用户？

> ID：14588354
> 
> 赞同：1
> 
> 时间：2013-01-29T17:11:53.787
> 
> 标签：meteor

想象一下，我有一个用户在 2 个不同的浏览器选项卡、2 个不同的浏览器或 2 台不同的计算机上连接一个流星应用程序。

我的应用程序需要用唯一的 id (userid+???) 来区分它。

我可以用什么来在客户端和服务器上识别它？

例如，一个用例是用户锁定一个字段以便能够编辑它，我们不希望其他人编辑它，即使它是另一个选项卡/窗口/浏览器/计算机上的同一用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:21:21.650

就像是：

```
Meteor.startup(function () {
    window.uniqueUser = Meteor.uuid();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:26:18.120

您可能对[`browser-store`](https://github.com/awwx/meteor-browser-store#readme)哪个可以让您在多个打开的浏览器和选项卡之间反应性地共享数据感兴趣。

# powershell - SAP Scheduler 中的 Powershell 脚本

> ID：14588360
> 
> 赞同：1
> 
> 时间：2013-01-29T17:12:10.343
> 
> 标签：powershell, sap-basis

我有一个 Powershell 脚本，我正试图从 SAP 调度程序开始工作。当我在 ISE 中或从 .bat 文件运行脚本时，脚本运行良好。当从调度程序调用脚本时（使用相同的 .bat 文件），我的日志文件中出现错误。错误是“无法在空值表达式上调用方法”。我无法弄清楚错误在哪里，或者为什么它只在从 SAP 调度程序调用时才出现。如何获取错误的位置？我可以在 Catch 语句中添加一些内容来帮助识别错误吗？到目前为止，我什至无法抓住它。

* * *

我发现错误是从调度程序运行作业时未创建凭据。密码被加密并从文件中读取，并由此创建凭证。如果我通过 ISE 运行它，我无法弄清楚为什么它可以正常工作，但不能通过调度程序运行。文件权限可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:10:14.237

事实证明这是一个文件权限错误。运行作业的任务计划程序没有从文件中读取密码的权限。最后，我创建了一个将密码存储为安全字符串的作业，并将该作业作为服务 ID 运行。然后服务 ID 可以访问密码。由于它将始终是运行该作业的 ID，因此效果很好。

# mysql - Efficient MySQL Table Setup and Queries

> ID：14588362
> 
> 赞同：0
> 
> 时间：2013-01-29T17:12:20.010
> 
> 标签：mysql, performance, dataset, query-optimization

Suppose I have the following database setup (a simplified version from what I actually have):

```
Table: news_posting (500,000+ entries)
| --------------------------------------------------------------|
| posting_id  | name      | is_active   | released_date | token |
| 1           | posting_1 | 1           | 2013-01-10    | 123   |
| 2           | posting_2 | 1           | 2013-01-11    | 124   |
| 3           | posting_3 | 0           | 2013-01-12    | 125   |
| --------------------------------------------------------------|
PRIMARY posting_id
INDEX sorting ON (is_active, released_date, token)

Table: news_category (500 entries)
| ------------------------------|
| category_id   | name          |
| 1             | category_1    |
| 2             | category_2    |
| 3             | category_3    |
| ------------------------------|
PRIMARY category_id

Table: news_cat_match (1,000,000+ entries)
| ------------------------------|
| category_id   | posting_id    |
| 1             | 1             |
| 2             | 1             |
| 3             | 1             |
| 2             | 2             |
| 3             | 2             |
| 1             | 3             |
| 2             | 3             |
| ------------------------------|
UNIQUE idx (category_id, posting_id) 
```

My task is as follows. I must get a list of 50 latest news postings (at some offset) that are active, that are before today's date, and that are in one of the 20 or so categories that are specified in the request. Before I choose the 50 news postings to return, I must sort the appropriate news postings by token in descending order. My query is currently similar to the following:

```
SELECT DISTINCT posting_id
FROM news_posting np
INNER JOIN news_cat_match ncm ON (ncm.posting_id = np.posting_id AND ncm.category_id IN (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20))
WHERE np.is_active = 1
AND np.released_date < '2013-01-28'
ORDER BY np.token DESC LIMIT 50 
```

With just one specified `category_id` the query does not involve a `filesort` and is reasonably fast because it does not have to process removal of duplicate results. However, calling `EXPLAIN` on the above query that has multiple `category_id`'s returns a table that says that there is `filesort` to be done. And, the query is extremely slow on my data set.

Is there any way to optimize the table setup and/or the query?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:48:59.570

通过将其重写如下，我能够使上述查询比使用单值类别列表版本运行得更快：

```
SELECT posting_id
FROM news_posting np
WHERE np.is_active = 1
AND np.released_date < '2013-01-28'
AND EXISTS (
    SELECT ncm.posting_id
    FROM news_cat_match ncm 
    WHERE ncm.posting_id = np.posting_id
    AND ncm.category_id IN (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20)
    LIMIT 1
)
ORDER BY np.token DESC LIMIT 50 
```

现在我的数据集需要不到一秒钟的时间。

可悲的是，这甚至比只`category_id`指定一个还要快。这是因为新闻项目的子集比只有一个的要大`category_id`，所以它可以更快地找到结果。

现在我的下一个问题是，当一个类别只有很少的新闻及时传播的情况下，这是否可以优化？

以下在我的开发机器上仍然很慢。尽管它在生产服务器上足够快，但如果可能的话，我想对其进行优化。

```
SELECT DISTINCT posting_id
FROM news_posting np
INNER JOIN news_cat_match ncm ON (ncm.posting_id = np.posting_id AND ncm.category_id = 1)
WHERE np.is_active = 1
AND np.released_date < '2013-01-28'
ORDER BY np.token DESC LIMIT 50 
```

有没有人有任何进一步的建议？

# solr - 如何将非索引字段添加到 SOLR 结果

> ID：14588363
> 
> 赞同：2
> 
> 时间：2013-01-29T17:12:20.820
> 
> 标签：solr

我有一个化学搜索应用程序，我们将在其中使用标准分子匹配引擎执行分子搜索，并从引擎中检索化学结构的 ID 和命中的分数或相似度值。然后，我的应用程序将使用从引擎中检索到的 ID 列表调用 SOLR。我想将命中的分数添加到结果中。
1\. 我可以简单地将这个计算字段添加到 SOLR 的结果中吗？如何？
2\. 我可以实现一个 SIMILARITY 函数来提供它作为分数而不是由 Lucene 创建的分数吗？
3\. 我想按分数排序结果。分子搜索可以驱动这个我可以告诉 SOLR 保留作为搜索查询传递的 id 的顺序吗？
我们正在使用 SOLR 3.5。它是我们供应商提供的堆栈的一部分，不能只是升级它。我正在考虑实现一个自定义搜索处理程序来进行分子预搜索，然后使用输出搜索 solr。我对 SOLR 很陌生，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:50:18.477

如果您将 ID 发送到 Solr，然后按相同的 ID 进行排序，那么您实际上需要 Solr 做什么？或者您之后是否使用 Solr 查询从这些 ID 中进行子选择？

在任何情况下，如果您的实现允许您更改 solrconfig.xml，您应该能够潜入一个自定义请求处理程序，它应该允许您构建您的预处理和后处理。这是[一篇有点相关的文章](http://sujitpal.blogspot.ca/2011/02/solr-custom-search-requesthandler.html)。

关于自定义相似性，我不确定您的意思是您认为的意思（自定义请求处理程序是更高级别的拦截）。但是，如果您是认真的，[Wiki 会讨论](http://wiki.apache.org/solr/SchemaXml#Similarity)Solr 4 之前和之后的可能性。

# python - 在 Python for 循环中更新迭代值

> ID：14588367
> 
> 赞同：0
> 
> 时间：2013-01-29T17:12:39.237
> 
> 标签：python, for-loop

对 Python 很陌生，并且一直在编写一个脚本来挑选基本日志文件的某些行

基本上，该函数搜索文件的行，当它找到我想要输出到单独文件的行时，将其添加到列表中，然后还添加接下来的五行。然后在不同的函数中将输出输出到最后的单独文件。

在此之后我一直在尝试做的是跳转循环以从这五行中的最后一行继续，而不是再次遍历它们。我认为代码中的最后一行可以解决问题，但不幸的是没有。

是否有任何推荐的 for 循环变体可以用于此目的？

```
def readSingleDayLogs(aDir): 
print 'Processing files in ' + str(aDir)    + '\n'
lineNumber = 0
try:
    open_aDirFile = open(aDir)  #open the log file
    for aLine in open_aDirFile: #total the num. lines in file
        lineNumber = lineNumber + 1
    lowerBound = 0
    for lineIDX in range(lowerBound, lineNumber):          
        currentLine = linecache.getline(aDir, lineIDX)
        if (bunch of logic conditions):
                    issueList.append(currentLine)
                    for extraLineIDX in range(1, 6): #loop over the next five lines of the error and append to issue list
                        extraLine = linecache.getline(aDir, lineIDX+ extraLineIDX) #get the x extra line after problem line
                        issueList.append(extraLine)
                    issueList.append('\n\n')
                    lowerBound = lineIDX 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:20:16.430

您应该使用`while`循环：

```
line = lowerBound
while line < lineNumber:
    ...
    if conditions:
        ...
        for lineIDX in range(line, line+6):
           ...
        line = line + 6
    else:
        line = line + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:19:24.650

我会看类似的东西：

```
from itertools import islice

with open('somefile') as fin:
    line_count = 0
    my_lines = []
    for line in fin:
        line_count += 1
        if some_logic(line):
            my_lines.append(line)
            next_5 = list(islice(fin, 5))
            line_count += len(next_5)
            my_lines.extend(next_5) 
```

这样，通过`islice`在输入上使用，您可以将迭代器向前移动并在 5 行（如果接近文件末尾可能更少）耗尽后恢复。

这是基于如果我理解正确，您可以向前阅读文件，识别一行，并且只需要在该点之后固定数量的行，然后按正常方式恢复循环。（如果这就是你所追求的，你甚至可能不需要计算行数，因为它似乎只是为了`getline`而不是任何其他目的）。

如果你确实想要接下来的 5 个，并且仍然考虑下一行，你可以使用`itertools.tee`在错误行的点进行分支，`islice`然后让`fin`迭代器在下一行继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:20:11.907

for 循环在范围内使用迭代器，因此您可以更改循环变量。

考虑改用while循环。这样，您可以直接更新行索引。

# methods - Functional programming languages with methods, method chaining etc

> ID：14588369
> 
> 赞同：1
> 
> 时间：2013-01-29T17:12:42.080
> 
> 标签：methods, functional-programming, method-chaining

I've been investigating functional programming, and it occurred to me that there could be a functional language which has (immutable) objects with methods, and which therefore supports method chaining (where chainable methods would return new instances rather than mutating the instance the method is called on and returning it).

This would have readability advantages as...

```
o.f().g().h() 
```

... is arguably more readable than:

```
h(g(f(o))) 
```

It would also allow you to associate particular functions with particular types of object, by making them methods of those types (which I understand to be one advantage of object-oriented langauges).

Are there any languages which behave like this? Are there any reasons to believe that this would be a bad idea?

(I know that you can program like this in e.g Javascript, but Javascript doesn't enforce immutability.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:47:38.030

是的，例如，F# 使用正向管道 (|>) 运算符，这使得代码非常易读。例如，

```
(1..20)
  |> Seq.map(functionFoo)
  |> Seq.map(functionBoo) 
```

等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:42:15.553

[Frege](https://github.com/organizations/Frege)有这个，它被称为 TDNR（类型定向名称解析）。具体来说，如果 x 具有类型 T，并且 y 出现在 T 的命名空间中，则与*应用到 x 的命名空间 T*中的普通英语y`x.y`相同。`(T.y x)`

 *这方面的实际应用是：记录字段访问和访问本地（即 Java，因为 Frege 被编译为 Java）方法的便捷语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T08:21:44.503

您不需要对象，只需定义您自己的*反向应用*中缀运算符，大多数功能语言都允许您这样做。剩下的就是柯里化了。例如，在[OCaml](http://ocaml.org)中：

```
let (>>) x f = f x 
```

演示：

```
let f x y z = z * (x - y)
let g x = x + 1
let h x y = y * x

5 >> f 6 2 >> g >> h 2  (* = h 2 (g (f 6 2 5)) *) 
```

（或选择您喜欢的任何运算符名称；`|>`例如其他人使用的名称。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-13T21:24:24.863

[Scala](http://scala-lang.org)听起来很合适——它是一种混合功能/面向对象的语言。*

# c# - 制作一个随机向用户询问 5 个问题而不重复问题的程序

> ID：14588370
> 
> 赞同：-5
> 
> 时间：2013-01-29T17:12:41.487
> 
> 标签：c#

> **可能重复：**
> [在 C# 中随机化一个 List<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)

我想制作一个程序，随机问用户 5 个问题而不重复问题，如果问题是正确的，如果错误则继续下一个问题，直到他给出正确的答案，这是我编写的代码，但还是有一些问题，比如有重复，当用户输入错误的答案时，它只会停止一次，然后程序就关闭了！现在我怎样才能防止重复相同的问题，如果他输入错误的值不要继续下一个问题或程序关闭？

```
static void Main()
{
    next:
    Random question = new Random();
    int x = question.Next(5);
    string[] array = new string[5];
    array[0] = "-What is the capital of France";
    array[1] = "-What is the capital of Spain";
    array[2] = "-What is the captial of Russia";
    array[3] = "-What is the capital of Ukraine";
    array[4] = "-What is the capital of Egypt";

    Console.WriteLine(array[x]);

    string[] answer = new string[5];
    answer[0] = "Paris";
    answer[1] = "Madrid";
    answer[2] = "Moscow";
    answer[3] = "Kiev";
    answer[4] = "Cairo";

    string a = Console.ReadLine();

    if (a == answer[x])
    {
        Console.WriteLine("It's True \n*Next Question is:");
        goto next;
    }
    else
        Console.WriteLine("It's False \n*Please Try Again.");

    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:17:56.167

您可以使用 LINQ 打乱所问问题的索引

```
Random random = new Random();
var indexes = Enumerable.Range(0,array.Length).OrderBy(i => random.Next());

foreach(var index in indexes)
{
    Console.WriteLine(array[index]);
    do 
    {        
        string a = Console.ReadLine();

        if (a == answer[index]) {                
          Console.WriteLine("It's True\n");
          break;
        }

        Console.WriteLine("It's False \n*Please Try Again.");
    }
    while(true);
} 
```

解释：

`Enumerable.Range(0,array.Length)`将返回从零开始的整数值范围：`0, 1, 2, 3, 4`. 接下来这些数字将按随机数排序（即打乱）。它可能导致这些数字的任何组合，例如`3, 0, 1, 4, 2`。

* * *

顺便说一句，最好采用 OOP 方式并将相关数据（问题文本和答案）和逻辑（定义答案是否正确）放在一个地方：

```
public class Question
{
    public string Text { get; set; }
    public string Answer { get; set; }

    public bool IsCorrect(string answer)
    {
        return String.Compare(answer, Answer, true) == 0;
    }
} 
```

有了这个问题类，您的所有代码都将更具可读性：

```
var questions = new List<Question>()
{
    new Question { Text = "What is the capital of France?", Answer = "Paris" },
    new Question { Text = "What is the capital of Spain?", Answer = "Madrid" },
    new Question { Text = "What is the capital of Russia?", Answer = "Moscow" },
    new Question { Text = "What is the capital of Ukraine?", Answer = "Kiev" },
    new Question { Text = "What is the capital of Egypt?", Answer = "Cairo" }
};

Random random = new Random();

// randomizing is very simple in this case
foreach (var question in questions.OrderBy(q => random.Next()))
{
    Console.WriteLine(question.Text);

    do
    {
        var answer = Console.ReadLine();
        if (question.IsCorrect(answer))
        {
            Console.WriteLine("It's True");
            break;
        }

        Console.WriteLine("It's False. Please try again.");
    }
    while (true);
} 
```

您的下一步是实施`Survey`课程，该课程将举行问题提问、阅读答案和显示摘要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T17:31:32.920

除非绝对必要，否则不要使用 goto。

```
public class Program
{
    private static List<KeyValuePair<string, string>> questions = new List<KeyValuePair<string, string>>
    {
        new KeyValuePair<string,string>("-What is the capital of France", "Paris"),
        new KeyValuePair<string,string>("-What is the capital of Spain", "Madrid"),
        new KeyValuePair<string,string>("-What is the captial of Russia", "Moscow"),
        new KeyValuePair<string,string>("-What is the capital of Ukraine", "Kiev"),
        new KeyValuePair<string,string>("-What is the capital of Egypt", "Cairo"),
    };

    static void Main()
    {
        var questions = ShuffleQuestions();

        foreach(var question in questions)
        {
            bool done = false;
            while(!done)
            {
                Console.WriteLine(question.Key);
                string a = Console.ReadLine();

                if (a == question.Value)
                {
                    Console.WriteLine("It's True \n*Next Question is:");
                    done = true;
                }
                else
                    Console.WriteLine("It's False \n*Please Try Again.");
            }
        }

        Console.ReadLine();
    }

    private IEnumerable<KeyValuePair<string, string>> ShuffleQuestions()
    {
        var list = questions;
        var random = new Random();  
        int items = list.Count;  
        while (items > 1) {  
            items--;  
            int nextItem = random.Next(items + 1);  
            var value = list[nextItem];  
            list[nextItem] = list[items];  
            list[items] = value;  
        }

        return list;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T17:18:14.970

您可以创建一个洗牌的整数数组，代表提出问题的顺序：

```
// Create question order
var order = Enumerable.Range(0, array.Length).ToArray();
for (int i = order.Length - 1; i > 1; --i)
{
    var randomIndex = rnd.Next(i);
    var temp = order[randomIndex];
    order[randomIndex] = order[i];
    order[i] = temp;
}

// Ask the questions in shuffled order
foreach(int questionIndex in order)
{
    Console.Write(array[questionIndex]);
    bool answeredCorrectly = Console.ReadLine() == answer[questionIndex];
} 
```

# ssrs-2008 - 统计符合 SSRS 标准的客户

> ID：14588371
> 
> 赞同：0
> 
> 时间：2013-01-29T17:12:43.253
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix, ssrs-grouping

我在 SSRS 中构建了一个按客户分组的报告。我按客户的订单计数，因此输出如下所示：
![在此处输入图像描述](../Images/3a0df4f7b50429c5c54722c02f738041.png)

我需要在报告底部创建一个总计表达式，计算有订单的客户，所以我的总数为 2。我是 SSRS 的新手，无法弄清楚。写我的表达的适当方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:28:52.960

试试这个

```
Count(IIf(Fields!Orders.Value > 0, 1, Nothing)) 
```

# android - ViewPager 中的垂直滑动

> ID：14588372
> 
> 赞同：4
> 
> 时间：2013-01-29T17:12:43.640
> 
> 标签：android

我将 ViewPager 与 PagerAdapter 一起使用。是否可以在Android中实现垂直滑动，您可以在视图之间从上到下和从下到上滚动？我需要与 ViewPager 默认情况下相同的行为，但以垂直方式。我找到了方法 canScrollVertically() 但我想这不是我要找的。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:16:06.943

在本地，没有。

但是，Jake Wharton 有一个定向 ViewPager 可以做到这一点。

[https://github.com/JakeWharton/Android-DirectionalViewPager/](https://github.com/JakeWharton/Android-DirectionalViewPager/)

唯一的问题是他不再支持它，但它会让你开始。它甚至可能足以满足您的需求。

# google-chrome - 可以过滤 chrome devtools 网络选项卡中记录的请求吗？

> ID：14588373
> 
> 赞同：4
> 
> 时间：2013-01-29T17:12:45.373
> 
> 标签：google-chrome, google-analytics, google-chrome-devtools

我在我的应用程序中使用[MVC Mini Profiler](http://code.google.com/p/mvc-mini-profiler/)和 Google Analytics。

这些正在生成对服务器的调用，从而降低日志中请求的信噪比，是否可以忽略/过滤来自 Chrome 开发工具网络选项卡的某些请求，以便我可以专注于我的应用程序的其他 Ajax 请求制造？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:10:30.440

底部的过滤器（全部 | 文档 | 样式表 | 图片 | 脚本 | XHR | 字体 | WebSockets | 其他）让您可以按请求类型进行过滤。您甚至可以使用`Ctrl`键进行多选。如果您知道要忽略的请求类型，则可以选择所有其他请求类型。

请注意，您可能需要单击“过滤器”图标（它看起来像一个漏斗），然后过滤器选项才会出现。

如果您不想过滤特定类型的资源，可以使用`Ctrl`+`F`按 URL 搜索。您还可以使用“过滤器”框按 URL 进行过滤。~~（请注意，这是一个包含过滤器。无法指定排除过滤器。）~~

您可以在空格分隔的列表中使用包含和排除过滤器，例如`logo`如下所示，仅用于包含“徽标”的请求。**过滤`-results -negotiate`将过滤掉 MVC mini-profiler 结果和 URL 中带有“negotiate”的其他请求。**

下图中标记了“过滤器”图标、URL 过滤器和请求类型过滤器。

![过滤 chrome 开发工具请求的示例](../Images/5e55de4abaf99b640baea2361b8c19ef.png)

# c++ - Constructing a member object inside the parent class' constructor in C++

> ID：14588378
> 
> 赞同：1
> 
> 时间：2013-01-29T17:12:55.480
> 
> 标签：c++, constructor

I am currently learning OOP for a project I'm working on (I'm in highschool and have some experience with c++; this is my third 'large' (>3 months) c++ project.) I have the basics of C++ classes figured out and managed to make some of the classes for the project.

So these is my page.h header:

```
class cl_Page{
public:
  cl_Page(cl_LessonMoment *parent_param);
  cl_Page(cl_SoftRoot *parent_param);
  int parent_type;
  cl_LessonMoment *parent_lmoment;
  cl_SoftRoot *parent_softroot;

  char id[256];

  //<content>
  //Backgrounds.
  str_Color bgcolor;
  cl_Image bgimage;

  //Actual content
  vector<cl_Textbox> textboxes;
  vector<cl_Button> buttons;
  vector<cl_Image> images;
  //</content>
}; 
```

(include guards and such are not here, but they are in my project)

And this is my page.cpp:

```
cl_Page::cl_Page(cl_LessonMoment *parent_param){
  parent_lmoment = parent_param;
  parent_type = 1;
  id[0] = '\0';
  //bgimage(NULL);
  SetColor(bgcolor, 0x000000ff);
} 
```

(the other constructor is similar, it just sets a different type of parent)

My problem is that I want to call the constructor to bgimage (which is of cl_Image class type) inside my cl_Page constructor. If I try this (uncomment the line in the constructor), obviously it won't work.

So yeah, how do I call the constructor now? I really need to construct every member along with the cl_Page object.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:19:10.213

如果要`bgImage`在构造函数中创建对象`cl_Page`，它必须是指针 (1)，或者您应该使用构造函数的初始化列表 (2)，在这种情况下，这可能是一个更好的解决方案。

**1.** - 字段是指向 cl_Image 的指针

```
bgImage = new cl_Image(nullptr); 
```

**2.** - 使用构造函数的初始化列表

```
cl_Page::cl_Page(cl_LessonMoment *parent_param) :
      bgImage(nullptr) 
{
  parent_lmoment = parent_param;
  parent_type = 1;
  id[0] = '\0';
  SetColor(bgcolor, 0x000000ff);
} 
```

在那里你可以阅读更多关于构造函数的初始化列表：[http ://www.cprogramming.com/tutorial/initialization-lists-c++.html](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:16:18.710

您可以使用成员初始化列表来初始化变量：

```
cl_Page::cl_Page(cl_LessonMoment *parent_param)
: bgImage(NULL)
{
  parent_lmoment = parent_param;
  parent_type = 1;
  id[0] = '\0';
  SetColor(bgcolor, 0x000000ff);
} 
```

事实上，这是在构造函数中设置数据的首选方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:15:48.160

```
cl_Page::cl_Page(cl_LessonMoment *parent_param)
    : bgImage( nullptr )
{
  parent_lmoment = parent_param;
  parent_type = 1;
  id[0] = '\0';
  SetColor(bgcolor, 0x000000ff);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T17:17:15.190

您需要像这样初始化您的成员：

```
cl_Page::cl_Page(cl_LessonMoment *parent_param)
: parent_lmoment(parent_param)
, parent_type(1)
, bgimage(NULL)
{
    id[0] = '\0';
    SetColor(bgcolor, 0x000000ff);
} 
```

在构造函数的头部初始化指针这不是必需的，但我仍然推荐它。我还建议用 0 初始化另一个指针，如果您遇到错误，它可能会对您有所帮助；-)

# hlsl - 从 RWTexture2D 加载 在计算着色器中

> ID：14588381
> 
> 赞同：2
> 
> 时间：2013-01-29T17:13:00.683
> 
> 标签：hlsl, directx-11, compute-shader

我了解 HLSL 着色器模型 5.0 存在一个限制，即无法从非标量类型的 RWTexture2D 资源加载数据。也就是说，以下是非法的：

```
 RWTexture2D<float4> __color;
    float4 c = __color[PixelCoord];  // error here 
```

那么具体的解决方法是什么？我正在尝试在计算着色器中累积到 float4 缓冲区，如下所示：

```
 c = computeColor( ... );
    __color[PixelCoord] += c; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T02:21:27.583

尝试做：

float4 c = __color.Load(int3(UV, 0));

其中 UV 是您要采样的纹素在屏幕空间中的 xy 坐标（0 -> 分辨率）。

如果您需要写入它，请确保它是从 UAV 而不是着色器资源视图绑定的。

# javascript - Why am I getting "Invalid Date" from Date.prototype?

> ID：14588382
> 
> 赞同：5
> 
> 时间：2013-01-29T17:13:01.053
> 
> 标签：javascript

> **Possible Duplicate:**
> [Why does Chrome Dev Tool show a dates __proto__ as Invalid Date?](https://stackoverflow.com/questions/9725299/why-does-chrome-dev-tool-show-a-dates-proto-as-invalid-date)

I get a weird message when I look up the prototype of the `Date` object:

```
Date.prototype; // Invalid Date 
```

This is strange; why am I not getting the object from the prototype of `Date` as expected? Furthermore, the message that it returns is a string, but `typeof(Date.prototype)` returns "object". I also find that peculiar. Why am I getting this output?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:24:10.687

> **15.9.5 Properties of the Date Prototype Object**
> 
> The Date prototype object is itself a Date object (its [[Class]] is "Date") whose [[PrimitiveValue]] is NaN.

NaN is what's happening

# jquery - jQuery对表格行的高亮效果

> ID：14588385
> 
> 赞同：0
> 
> 时间：2013-01-29T17:13:07.497
> 
> 标签：jquery, highlight, effects

我有一个看起来像这样的表：

```
<table id="tblBranchCoverage">
    <thead>...</thead>
    <tbody>
        <tr class="coverageRow">
            <td class="countyCovered">
                <label="branchCountyCovered coverageDisplay">Barrow</label>
                ...
            </td>
            <td>
                ...
            </td>
        </tr>
        <tr class="coverageRow">
            <td class="countyCovered">
                <label="branchCountyCovered coverageDisplay">Cook</label>
                ...
            </td>
            <td>
                ...
            </td>
        </tr>
    </tbody>
</table> 
```

我正在尝试通过在行中查找标签的文本来对找到的行应用突出显示效果。

我尝试过的选择器包括：

```
$('#tblBranchCoverage tr label:contains("Barrow")').parent().parent().effect('highlight', {color: '#88AAFF'}, 1500);
$('label:contains("Barrow")').parents('tr').effect('highlight', {color: '#88AAFF'}, 1500); 
```

上面的两个选择器都找到了控制台中确定的正确行，但我收到了这个错误“ *TypeError: Object [object Object] has no method 'effect'* ”。

将效果应用于所选行的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:21:56.283

`.effect()`是 jQuery UI 的一部分 - [http://jqueryui.com/effect/](http://jqueryui.com/effect/)

您需要包含 jquery ui js 文件才能使其工作。

# c# - 了解 ado.net 连接池，而不是关闭连接

> ID：14588386
> 
> 赞同：0
> 
> 时间：2013-01-29T17:13:07.623
> 
> 标签：c#, ado.net, connection-pooling

在 Web 应用程序中不关闭连接有什么后果？

据我了解，假设您的池中有 100 个连接，如果您不关闭连接，并且连接超时相当高，这就是幕后发生的事情：

1.  打开连接从池中获取连接
2.  如果您不关闭它，它将保持打开状态，直到超时到期，然后一些后台线程将循环通过池并显式关闭/返回连接回池。

即使 c# 是托管的，但这并不意味着它会在页面请求正确结束后为您关闭东西？这就是超时设置的目的吗？ **或者 .net 运行时是否足够聪明，可以知道自从页面请求结束后，可以关闭连接？**

这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:19:55.000

连接池意味着当您关闭（或处置您的连接）时，它实际上并没有关闭，它只是返回到池中。这允许再次重新使用连接。

任何实现的托管对象都`IDisposable`应该在 using 语句中使用（大多数情况下，WCF 是一个明显的例外）。`SqlConnection`这样会导致调用关闭，并允许重新使用连接。

垃圾收集器会在某个时候拾取未处理的连接并处理它，但你永远不会知道什么时候，因为它不是确定性的。

Sql Connections 是一种有限的资源，您应该尽快关闭它们，以确保您不会用完池中的连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:24:38.497

始终建议您显式关闭所有连接以将它们释放到连接池以供另一个进程使用。

如果你有一个 SqlConnection 对象，它应该在页面请求之后被释放。这是因为 System.Web.UI.Page 和 SqlConnection 对象都实现了 IDisposable。当对 Page 的请求完成时，Page 对象被 Disposed。释放 SqlConnection 对象时，连接将关闭。这就是为什么您会看到在 using 语句中实现的 SqlConnection 对象的大多数用途：

```
 using (SqlConnection connection = new SqlConnection(
  "Integrated Security=SSPI;Initial Catalog=Northwind"))
    {
        connection.Open();      
        // Pool A is created.
    } 
```

始终建议显式关闭它或使用 using 语句。

有关更多详细信息，请参阅本文：http: [//msdn.microsoft.com/en-us/library/8xx3tyca.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

# ruby-on-rails - Mongoid 获取模型关联的日期时间

> ID：14588388
> 
> 赞同：0
> 
> 时间：2013-01-29T17:13:11.580
> 
> 标签：ruby-on-rails, mongodb, mongoid

是否可以获得两个模型之间关联的日期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:23:31.617

不，它没有内置方法，您必须在任一模型中创建一个 DateTime 字段，并在创建该模型的对象之间的关联时保存该值。

# java - Maven安装构建错误 - 依赖路径

> ID：14588390
> 
> 赞同：1
> 
> 时间：2013-01-29T17:13:20.583
> 
> 标签：java, spring, maven, struts

我已经转到项目文件夹和文件所在的目录并执行了一个`mvn clean`，`mvn install`但我得到了这个：

```
 [INFO] Unable to find resource ‘org.eclipse.core:org.eclipse.core.commands:pom:3.5.0.I20090525-2000’ in repository central (http://repo1.maven.org/maven2)
    [INFO]-------
    [ERROR] BUILD ERROR
    [INFO]---------
    [INFO] Failed to resolve artifact.

Couldn’t find a version in [1.0.0-v20070606] to match range [1.0.0,2.0.0) org.eclipse.equinox:app:jar:null from the specified remote repositories:
central (http://repo1.maven.org/maven2),
ABC.Pricing.R2(http://mksrvsub.XXXXX/nexus/content/repositories/ABC.pricing.R2),
abc-snapshots(http://artifactory-tmp.xxxxx:8081/nexus/content/groups/repor),
abc123 (http://mksrvsub.XXXXX/nexus/content/repositories/Release),
andromeda (http://artifactory-tmp.xxxxxxx:8081/nexus/content/repositories/andromeda),

path to dependency:
com.xxx:MyServcies:jar:7.7.0-SNAPSHOT
com.xxx:MyBaseServcies:jar:7.7.0-SNAPSHOT
com.xxx:MyStrutsServcies:jar:7.7.0-SNAPSHOT
com.yyy.SomeSpecialService:jar:7.7.0-SNAPSHOT
org.eclipse:get:jar:3.2.100-v20070530
org.eclipse.core:runtime:jar:3.3.100-v20070530 
```

项目pom文件：[链接](http://dl.dropbox.com/u/19509627/pom.xml)

信息：Java 版本：1.6.0_26

操作系统名称：windows xp，版本：5.1 arch:x86，

阿帕奇 Maven 2.2.1 (r801777; 2009-08-06 15:16:01-0400)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:51:44.377

如您所见，Maven 无法解析依赖 org.eclipse.core.commands 版本 3.5.0.I20090525-2000。存储库[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)不包含具有此版本号的工件。因此，您必须在 pom 文件中添加存储库描述。

就像是：

```
<repositories>
<repository>
<id>jboss-deprecated-repository</id>
<name>JBoss Deprecated Maven Repository</name>
<url>https://repository.jboss.org/nexus/content/repositories/deprecated/</url>
</repository>
...
<repositories> 
```

您也可以阅读[https://community.jboss.org/wiki/MavenGettingStarted-Users](https://community.jboss.org/wiki/MavenGettingStarted-Users)

# android - 如何在 Android 上安装 JavaCV 并使用 FrameGrabber

> ID：14588391
> 
> 赞同：7
> 
> 时间：2013-01-29T17:13:34.293
> 
> 标签：android, ffmpeg, javacv

有人可以告诉我我在哪里做错了吗？这些是我遵循的步骤：

1.  从 android 开发者网站下载了 adt-bundle-windows

2.  创建了一个新项目和一个 libs/armeabi 文件夹

3.  将 javacv-android-arm.jar、opencv-2.4.3-android-arm.zip 和 ffmpeg-1.0-android-arm.zip 中的所有 *.so 文件直接提取到新创建的“libs/armeabi”文件夹中，不创建任何新的子目录。

    （我不明白的部分是*“从 javacv-android-arm.jar 中提取所有 *.so 文件”*，我只是在 libs/armeabi 文件夹中插入了 javacv-android-arm.jar 文件）

4.  导航到项目 > 属性 > Java 构建路径 > 库，然后单击“添加 JAR...”。

5.  从新创建的“libs”文件夹中选择了 javacpp.jar 和 javacv.jar。

之后，我从这里下载了 OpenCV2.4.3，从[这里](http://ffmpeg.zeranoe.com/builds/win64/shared/ffmpeg-20121029-git-11d695d-win64-shared.7z)[下载了](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.3/OpenCV-2.4.3.exe/download)ffmpeg，并在我的 C:/ 根目录下提取了文件。最后在设置我的系统路径之后......，

```
C:\opencv\build\x64\vc10\bin;C:\ffmpeg-64\bin;C:\Program Files\Java\jdk1.7.0_10\bin 
```

...如果我尝试在我的 Android 应用程序中简单地使用 FrameGrabber ...

```
import com.googlecode.javacv.FFmpegFrameGrabber;
import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.*;
import com.googlecode.javacv.cpp.*;
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_calib3d.*;
import static com.googlecode.javacv.cpp.opencv_objdetect.*;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        FFmpegFrameGrabber i = new FFmpegFrameGrabber("/mnt/sdcard/SinglePerson.avi"); 
    } 
```

...我收到以下错误：

```
01-29 17:59:26.976: E/AndroidRuntime(30656): FATAL EXCEPTION: main
01-29 17:59:26.976: E/AndroidRuntime(30656): java.lang.NoClassDefFoundError: com.googlecode.javacv.FFmpegFrameGrabber
01-29 17:59:26.976: E/AndroidRuntime(30656):    at com.example.xxxxxxxxx.MainActivity.onCreate(MainActivity.java:23)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.Activity.performCreate(Activity.java:4465)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.os.Looper.loop(Looper.java:137)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.main(ActivityThread.java:4424)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at java.lang.reflect.Method.invokeNative(Native Method)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at java.lang.reflect.Method.invoke(Method.java:511)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at dalvik.system.NativeStart.main(Native Method) 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T20:24:00.977

因此，jar 文件基本上是一个 zip 文件，如果将扩展名更改为“.zip”，则可以像使用 OpenCV 和 FFMPEG 一样提取其中包含的文件。

因此，将“javacv-android-arm.jar”重命名为“javacv-android-arm.zip”，从中提取 .so 文件并将它们复制到 libs/armeabi。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-04T07:47:54.117

摇篮：

`compile 'org.bytedeco:javacv:1.0' compile 'org.bytedeco.javacpp-presets:opencv:2.4.11-0.11:android-x86' compile 'org.bytedeco.javacpp-presets:ffmpeg:2.6.1-0.11:android-x86' compile 'org.bytedeco.javacpp-presets:opencv:2.4.11-0.11:android-arm' compile 'org.bytedeco.javacpp-presets:ffmpeg:2.6.1-0.11:android-arm'`

这会将 javacv 集成到 android

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T13:06:19.997

使用这个例子：

[http://javacv4android.blogspot.com.br/2014/02/how-to-import-javacv-libraries-to.html](http://javacv4android.blogspot.com.br/2014/02/how-to-import-javacv-libraries-to.html)

稍后在 OnCreate 中：

```
try {
        FrameGrabber grabber2 = new FFmpegFrameGrabber(Environment
                .getExternalStorageDirectory().getAbsolutePath()
                + "/TESTE/spell.mp3");

        String t = "!";

        grabber2 = null;

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

如果不存在错误，没关系=）

对不起我的英语不好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-09T18:40:10.017

对于最新版本。在`build.gradle`：

```
repositories {
...
   mavenCentral()
}
dependencies {
...
   compile group: 'org.bytedeco', name: 'javacv', version: '1.2'
   compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version:   '3.1.0-1.2', classifier: 'android-arm'
   compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version:   '3.1.2-1.2', classifier: 'android-arm'
}
configurations {
   all*.exclude group: 'org.bytedeco', module: 'javacpp-presets'
} 
```

# c# - 禁用 WebAPI 的 Windows 身份验证

> ID：14588397
> 
> 赞同：52
> 
> 时间：2013-01-29T17:13:53.780
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我正在使用 MVC4 应用程序并使用 WebAPI 来获取/发送我的所有数据。在控制器中，我使用 HttpClient 请求来获取数据，一切正常。我面临的问题是，当在项目中启用 Windows 身份验证时，Web API 调用返回 401 Unauthorized 错误。

我的控制器中进行调用的代码是：

```
using (var client = new HttpClient())
{
    var invoiceDetailUrl = BASE_URL + Url.HttpRouteUrl(
        "DefaultApi",
        new { controller = "InvoiceDetails", id = id }
     );

     var result = client.GetAsync(invoiceDetailUrl).Result; 

 } 
```

站点必须启用 Windows 身份验证，但不一定是 Web API 控制器。我尝试在 web.config 中排除 API 控制器，如下所示：

```
<location path="api">
        <system.web>
            <authorization>
                <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

但是对 web.config 的添加什么也没做。

有什么建议么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-05-23T08:24:49.163

## 验证

Web API 假定身份验证发生在主机中。IIS 使用 HTTP 模块进行身份验证。asp.net 现在允许您通过 web.config 配置任何内置于 IIS 或 ASP.NET 的身份验证模块，或者编写您自己的 HTTP 模块来执行自定义身份验证。

![在此处输入图像描述](../Images/827ebac8413c1ada607b6681fae12776.png)

您可以同时使用多个身份验证，这不是问题。在您的情况下，您需要**Windows authentication 和 Anonymous authentication**。Windows 身份验证将*保护*您的网站，匿名身份验证将*打开*您的 Web Api。

## 在 IIS 中配置身份验证

**在 IIS Express 上托管** 打开“属性”窗格（通过 F4 而不是项目的属性），并应用所需的身份验证 将“匿名身份验证”设置为“禁用”。将“Windows 身份验证”设置为“启用”。

**在 IIS 7 或更高版本上托管** 在 IIS 管理器中，在功能视图中打开身份验证功能。启用/禁用所需的身份验证。如果身份验证系统不是一个选项（例如 Windows），您需要通过服务器管理器（添加角色服务）安装它。

## 授权

**asp.net授权**

在 ASP.NET 中，有两种方法可以授权对给定资源的访问：文件授权和 Url 授权。我不会在这里解释它，但你可以阅读这篇[文章](http://msdn.microsoft.com/en-us/library/wce3kxhd%28v=vs.100%29.aspx)。

重要的是您可以在 web.config 中允许/拒绝用户和/或组。

Windows 身份验证中的默认配置是只允许身份验证用户 *****，如下所示：

```
<authorization>
<deny users="?" ></deny>
</authorization> 
```

如果要允许匿名用户**？**在 url 位置“api”下，添加：

```
<location path="api">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

**Web API 授权**

asp.net Web Api 授权发生在管道的后面，更靠近控制器。当您授予对资源的访问权限时，这使您可以做出更精细的选择。

Web API 提供了一个内置的授权过滤器[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.http.authorizeattribute.aspx)。还有一个[AllowAnonymousAttribute](http://msdn.microsoft.com/en-us/library/system.web.http.allowanonymousattribute.aspx)。您可以在全局、控制器或操作上使用它。默认情况下，所有操作都是*授权*的。

## 测试 API

**通过浏览器**

集成的 Windows 身份验证适用于任何支持协商身份验证方案的浏览器。这是 Internet Explorer 和现在的 Chrome 的 cas：当浏览具有 Windows 身份验证的网站时，它们将自动提供 Windows 凭据。火狐不支持这种方案，所以我经常用这个浏览器测试认证。

**通过 HttpClient** 调用 Web Api（如浏览器）时，您的 HttpClient 需要提供凭据。这是通过使用适当的凭据配置 HttpClientHandler 来完成的。

```
//use default credentials aka Windows Credentials
HttpClientHandler handler = new HttpClientHandler()
{
    UseDefaultCredentials = true
};

//use username/password credentials
HttpClient client = new HttpClient(handler);

var handler = new HttpClientHandler {
    Credentials = new NetworkCredential(username, password)
};

var httpClient = new HttpClient(handler); 
```

希望这会帮助你。

在您的情况下，最后一件重要的事情是您的 Web Api**根本不允许匿名用户**！因为您在 HttpClientHandler 中使用*默认凭据*，这意味着您的服务需要 Windows 身份验证。您不必在开放和公共服务中配置任何凭据。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-12-05T20:00:54.370

我在尝试做一些非常相似的事情时遇到了这个问题，并想添加到上面给出的答案中。我还没有找到很多关于如何做到这一点的详细信息。只是网络上的点点滴滴。所以希望这会增加现有的内容。

我有一个包含 WebAPI 部分的 MVC4 应用程序。MVC 应用程序需要使用 Windows 身份验证，但 WebAPI 部分需要是匿名的并关闭 Windows 身份验证。虽然上述解决方案适用于 ncbl，但它不适用于我，因为在我的场景中我没有使用代码来处理凭据。在我的场景中，我想要一个基于 web.config 或 IIS 的解决方案。我从 Cyber​​maxs 的 web.config 解决方案开始并添加到其中。这就是我最终的结果。

```
<!-- Configure the virtual path api -->
<!-- This section is like a mini-web.config for the virtual path -->
<location path="api">
    <system.web>
        <authorization>
            <!-- All anonymous users access to the virtual path api -->
            <allow users="?" />
        </authorization>
    </system.web>
    <!-- Need to include the security overrides else it will inherit from the root of the application -->
    <system.webServer>
        <security>
            <authentication>
                <!-- Need to enable anonymous access and turn off Windows authentication for the virtual path -->
                <anonymousAuthentication enabled="true"/>
                <windowsAuthentication enabled="false"/>
            </authentication>
        </security>
    </system.webServer>
</location> 
```

对我来说，关键是将该`<system.webServer>`部分添加到 web.config，以便我可以覆盖此虚拟路径的身份验证。我尝试在 IIS 中执行此操作，但由于它是虚拟路径，即 /api 在 Web 服务器上不存在，这对我来说是不可能的。

*注意：请注意，IIS 可能有一个更高配置级别的配置文件来锁定该`<authentication>`部分，例如在 application.config 或 machine.config 中。一个元素可能将属性 allowOverride 设置为 false。起初我收到了 HTTP 错误 500.19 (HRESULT: 0x80070021) 并且必须进入 application.config 文件来更改此属性。[我在这里](http://support.microsoft.com/kb/942055)找到了有关此错误的更多详细信息。*

一旦我在 web.config 的部分中有这个附加部分`<location>`，我确保用`[AllowAnonymous]`. 然后砰……一切都开始起作用了。

这就是我为应用程序的根目录设置身份验证和授权的方式。

```
<system.web>
  <authentication mode="Windows" />
  <authorization>
    <!-- Deny all anonymous users at the root of the application -->
    <deny users="?" />
  </authorization>
</system.web> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-04T23:12:07.427

这是我需要做的：

```
<location path="api">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

# xcode - 在 iPad2 中硬编码 UIView 大小，在 iPad mini 上工作

> ID：14588398
> 
> 赞同：0
> 
> 时间：2013-01-29T17:13:53.747
> 
> 标签：xcode, ipad, uiview

我继承了一个应用程序，其中有一些全局变量，其中一个是 ViewsSize，它是 666（一个邪恶的程序员写了这个）。现在我假设一旦部署在 iPad mini 上这将不起作用？有人对以相对模式调整视图大小有更好的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:17:55.293

iPad Mini 具有与 iPad 2 完全相同的分辨率，甚至在视图方面也被视为相同。因此，虽然这是一种不好的做法，但它根本不会在 iPad Mini 上中断。所以你可以为这个继承的应用程序高枕无忧，只是不要复制它！

查看文档以了解`UIView.autoresizingMask`相对大小以供将来参考。

# function - 使用结构定义

> ID：14588399
> 
> 赞同：0
> 
> 时间：2013-01-29T17:13:54.843
> 
> 标签：function, scheme, racket

我一直在拉我的头发试图弄清楚这一点。我想设计一个函数接收一个学生，我让另一个学生具有相同的内容并且他的年龄转换为狗年。关于如何开始的任何想法？这个确切的问题将出现在我周五的开卷测试中。

```
(define-struct hsstudent (first-name last-name classroom overall-grade age))

(define hsstudent1 (make-hsstudent "Randy" "Smith" 'WH '-A 14))
(define hsstudent2 (make-hsstudent "Jon" "James" 'AH '-A 13 ))
(define hsstudent3 (make-hsstudent "Alex" "Manzi" 'LO '+A 16))
(define hsstudent4 (make-hsstudent "Kevin" "Matthews" 'WH '-A 14))
(define hsstudent5 (make-hsstudent "Issac" "Lewis" 'AH '-A 13 ))
(define hsstudent6 (make-hsstudent "Michael" "Gabbin" 'LO '+A 16)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:32:57.870

注意：当您说*design*时，这意味着您正在学习[基于 HTDP 的](http://www.ccs.neu.edu/home/matthias/HtDP2e/)课程。

您应该已经了解了一组非常具体的步骤来设计使用和生成结构的功能。您是否看过[Designing with Structures](http://www.ccs.neu.edu/home/matthias/HtDP2e/part_one.html#%28part._sec~3adesignstructs%29)并按照那里的步骤进行操作？如果是这样，您是否停留在此处列出的任何特定步骤？

这种方法的目的是帮助尽快查明概念问题，而不是在编码时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:32:14.213

您可以做的是使用结构选择器从学生那里获取值，然后将这些值提供给 make-hsstudent 以创建一个新学生。例如

```
(hsstudent-age hsstudent1) 
```

将返回 14。一般 (hsstudent-FIELDNAME student) 会给学生 FIELDNAME 的字段值。

# python - 构建 LXML。预编译的 .c Cython 文件丢失

> ID：14588404
> 
> 赞同：1
> 
> 时间：2013-01-29T17:14:14.253
> 
> 标签：python, lxml, cython

我必须从源代码构建 lxml。`https://github.com/lxml/lxml` 如文件所述`/doc/build.txt`，源代码应与预编译的 .c 文件一起提供。为什么我找不到他们？`/src/lxml`里面只有 .pyx 文件。.c 文件在哪里？

事实上，我在命令`lxml.etree.c`期间丢失了文件`python build`。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T18:38:57.643

你误读了 build.txt。它说

> lxml.etree 和 lxml.objectify 模块是用 Cython_ 编写的。但是，由于我们将 Cython 生成的 .c 文件与 lxml 版本一起分发，因此您不需要 Cython 从正常版本源构建 lxml。

因此，您需要获取“正常发布源”来预编译 C 文件，例如来自 [http://pypi.python.org/pypi/lxml](http://pypi.python.org/pypi/lxml)。如果您从 git 签出，则需要 Cython：

> *仅*当您有兴趣从开发人员来源的检查中构建 lxml（例如，测试尚未发布的错误修复）或者如果您想成为 lxml 开发人员，那么您确实需要一个有效的 Cython 安装。

# windows-phone-7 - Windows phone 长列表选择器

> ID：14588406
> 
> 赞同：0
> 
> 时间：2013-01-29T17:14:17.683
> 
> 标签：windows-phone-7, windows-phone-8, longlistselector

我有一个长列表选择器，每个列表框项目中都包含一个复选框。

长列表选择器绑定到包含图像名称和状态的列表

我想根据字段的状态选中或取消选中复选框。

我做了很多搜索，但我无法做到这一点，请帮忙。

XAML：

```
<phone:LongListSelector x:Name="lstBoxRates" Margin="0,27,-12,0" ItemsSource="{Binding Items}" Height="16776941" SelectionChanged="MainLongListSelector_SelectionChanged">
   <phone:LongListSelector.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                                <Image Width="54" Height="54">
                                    <Image.Source>
                                        <BitmapImage UriSource="{Binding LocalPath}" />
                                    </Image.Source>
                                </Image>
                                <TextBlock Text="{Binding name}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextSubtleStyle}"/>
                                <CheckBox x:Name="LBCheckBox" Content="{Binding LineOne}" IsChecked="{Binding IsChecked}" Height="75" Width="412" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked" />
                            </StackPanel>
                        </DataTemplate>
 </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

C＃：

```
 cView = new CViewModel(AppResources.DBConnectionString);
        List<UBCars> ubc = cView.GetAllCars();

        lstBoxRates.ItemsSource = ubc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:50:49.537

我尝试了您的代码，并且在进行这些更改后它可以工作：

1.  删除了 xaml 中的 ItemsSource 绑定。设置两次没有意义
2.  在您的模型（UBCars 类）中使用属性，而不是字段。

# delphi - 如何以另一种形式使用 RxChar ComPort

> ID：14588407
> 
> 赞同：-2
> 
> 时间：2013-01-29T17:14:21.437
> 
> 标签：delphi, delphi-7, tcomport

我有德尔福代码的问题......我有代码：

主要形式

```
unit MainForm;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, CPort, Menus, ComObj, StdCtrls;

type
  TMainForm = class(TForm)
    MainMenu1: TMainMenu;
    Berkas1: TMenuItem;
    Alat1: TMenuItem;
    erminal1: TMenuItem;
    ComPort1: TComPort;
    Button1: TButton;
    Memo1: TMemo;
    Button2: TButton;
    procedure erminal1Click(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure ComPort1RxChar(Sender: TObject; Count: Integer);
    procedure Button2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

implementation

uses
  ChildForm;

{$R *.dfm}

procedure TMainForm.erminal1Click(Sender: TObject);
var
  ChildForm: TChildForm;
begin
  ChildForm := TChildForm.Create(Application);
  ChildForm.Show;
end;

procedure TMainForm.Button1Click(Sender: TObject);
begin
  ComPort1.ShowSetupDialog;
end;

procedure TMainForm.ComPort1RxChar(Sender: TObject; Count: Integer);
var
  ComPort: TComPort;
  data: string;
begin
  inherited;
  ComPort := TComPort.Create(Self);
  ComPort1.ReadStr(data, 5);
  ChildForm.Memo1.Text := ChildForm.Memo1.Text+''+data+'';
end;

end. 
```

儿童表格：

```
unit ChildForm;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ComObj;

type
  TChildForm = class(TForm)
    Memo1: TMemo;
    Button1: TButton;
    Button2: TButton;
    Button3: TButton;
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  ChildForm: TChildForm;

implementation

uses
  MainForm;

{$R *.dfm}

procedure TChildForm.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Action := caFree;
end;

procedure TChildForm.Button1Click(Sender: TObject);
begin
  MainForm.ComPort1.Open;
end;

end. 
```

我想以子形式显示从我的设备输入的数据到备忘录。我将 comport 组件放在主窗体中。但是当我运行程序时，它说：

> 项目 Data.exe 引发异常类 EAccessViolation，并带有消息“模块“Data.exe”中地址 00466051 的访问冲突。读取地址 000002F8'。进程停止。使用 Step 或 Run 继续。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:54:54.493

如评论中所述，您的代码存在许多问题。

为了更好地实现与 comport 组件的父/子表单交互，请执行以下操作：

创建一个`TDataModule`（例如：DataModule1），将 comport 组件放在那里。

现在您可以从主窗体和子窗体访问 comport 组件。

将私有方法添加到您的子表单：

```
procedure TChildForm.ComPort1RxChar(Sender: TObject; Count: Integer);
var
  data: string;
begin
  DataModule1.ComPort1.ReadStr(data, 5);
  Self.Memo1.Text := Self.Memo1.Text+''+data+'';
end; 
```

当您在子窗体中打开 comport 时，请将 comport OnRxChar 事件设置为您的 TChildForm.ComPort1RxChar 方法。

在 TChildForm.OnClose 事件中，将 comport OnRxChar 事件设置为 nil 并关闭 comport。

# html - Canvas getImageData() 奇怪的问题

> ID：14588408
> 
> 赞同：2
> 
> 时间：2013-01-29T17:14:21.707
> 
> 标签：html, canvas, pixel

我最近遇到了一个很奇怪的问题，请看下面的代码片段

```
<canvas id="cancan" width="320", height="480">One color image</canvas>

<script type="text/javascript">
function imageLoaded(ev) {
    element = document.getElementById("cancan");
    c = element.getContext("2d");

    im = ev.target; // the image, assumed to be 200x200

    // read the width and height of the canvas
    width = element.width;
    height = element.height;

    // stamp the image on the left of the canvas:
    c.drawImage(im, 0, 0);

    // get all canvas pixel data
    imageData = c.getImageData(0, 0, width, height);     
    console.log(imageData.data[0] + " " + imageData.data[1] + " " + imageData.data[2]);
    // output is "243 52 47"
    // matlab and c# output is: "237 36 27"
}

im = new Image();
im.onload = imageLoaded;
im.src = "imgtest1.jpg"; // image is 320x480

</script> 
```

此示例中使用的 imgtest1.jpg 是常量 - 每个像素为 (237,36,27)。getImageData() 返回的像素颜色不同 - 它比从返回的颜色更亮 - 例如 - matlab - 任何想法可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:58:52.287

亮度或亮度或强度可以计算为 (R+G+B)/3（参见 HSI 颜色代码）。在您的示例代码结果之后，很明显您的输出图像比原始图像亮一点，因为您的 RGB 值高于原始值（来自[Matlab](http://www.mathworks.in/products/matlab/trial.html?s_iid=all_trial_ML_ff)或 C++）。

问题必须是“为什么你的代码计算出更高的值？”。我不知道，但您可以重新调整这些值以获得相同的亮度。

# c - 将 32 位 int 存储到 char 缓冲区中

> ID：14588412
> 
> 赞同：0
> 
> 时间：2013-01-29T17:14:38.553
> 
> 标签：c, udp, char, int

我正在使用一个 UDP 程序，该程序收集要发送到 char 数组中的数据，但我需要发送的数据是 32 位 int。我怎样才能发送这些数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T18:26:51.850

在 C 中，整数类型（或任何类型）可以安全地在字符数组中表示，并使用指针转换返回。这是由 C 标准保证的。

在套接字编程中，您通常希望对之前转换为网络字节顺序的整数执行此操作：

```
uint32_t translated_int = htonl(original_int);
char *binary_string = (char *)&translated_int;
// binary_string now a pointer to the translated_int, represented as a char array 
```

如果你需要一个*副本*来传递它，你可以这样做`memcpy`：

```
char binary_string[ sizeof(translated_int) ];
memcpy(binary_string, &translated_int, sizeof translated_int);
// binary_string now a copy of translated_int, represented as a char array 
```

如果你想把它翻译回来：

```
uint32_t translated_int, original_int;
memcpy(&translated_int, binary_string, sizeof translated_int);
original_int = ntohl(translated_int); 
```

# youtube-api - YouTube 分析 API 400 错误请求

> ID：14588413
> 
> 赞同：0
> 
> 时间：2013-01-29T17:14:38.753
> 
> 标签：youtube-api, oauth-2.0

我试图获取 YouTube 分析数据并获取相同的访问令牌。我已按照[https://developers.google.com/youtube/analytics/authentication](https://developers.google.com/youtube/analytics/authentication)给出的程序进行操作。我们得到了代码，但是当我尝试使用 POST 请求获取访问令牌时，我收到了 400 错误请求。请帮忙。

我的帖子请求：

```
POST /o/oauth2/token HTTP/1.1  //Post Rquest
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

code=4/M7LjucbJDYrZCMiqymuKCmbGxvJk...&
client_id=8465043....apps.googleusercontent.com&
client_secret=8gn6f7K...&
redirect_uri=https://qsmi.qualcomm.com/oauth2callback&
grant_type=authorization_code
response_type=4/M7LjucbJDYrZCMiqymuKCmbGxvJk... 
```

我们还必须要求将应用程序列入白名单，否则我会遗漏任何东西。请帮忙 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:32:41.910

You do **not** need whitelisting for using Analytics API.

You don't need "response_type" in your POST request as described under #4 in [https://developers.google.com/youtube/analytics/authentication#OAuth2_Flows](https://developers.google.com/youtube/analytics/authentication#OAuth2_Flows)

Please try omitting that.

But before that, you need do the step 1 first to grant access offline.

Example:

```
`https://accounts.google.com/o/oauth2/auth?
client_id=1084945748469-eg34imk572gdhu83gj5p0an9fut6urp5.apps.googleusercontent.com&
redirect_uri=http://localhost/oauth2callback&
scope=https://www.googleapis.com/auth/yt-analytics.readonly&
response_type=code&
access_type=offline` 
```

# jsf - 带有 primefaces 的新页面

> ID：14588419
> 
> 赞同：1
> 
> 时间：2013-01-29T17:15:05.227
> 
> 标签：jsf, primefaces

一个新手primefaces问题：

当我创建一个简单的 primeface 页面时，我应该放置什么来设置文本样式？

```
<h:body>
    <!-- Ok, what I put here to have styled the following H1 and outputText? -->
    <h1>Not styled h1</h1>
    <h:outputText value="Not styled text." />
</h:body>
</html> 
```

我可以通过将其放在 <\p:panel> 中来获得样式文本，但我发现将所有内容都放在面板中有点烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:07:57.503

使用 css 来改变它，这是最优雅的解决方案。如果您确定不使用原始类，则可以创建自己的类或覆盖现有的 primefaces 类。请记住`!important`在属性集的末尾添加。

```
.ui-panel
{
   border: black solid 1px !important;
} 
```

您可以按照[本教程](http://www.mkyong.com/jsf2/primefaces/how-to-override-primefaces-css/)了解如何以及在何处添加您的 css 参考，以便覆盖 Primefaces 样式。

# c# - 如何在MVC4的Controller中正确执行方法

> ID：14588420
> 
> 赞同：1
> 
> 时间：2013-01-29T17:15:07.113
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-4

我有一个简单的 MVC 应用程序，它从用户那里检索数据库服务器、数据库、用户名和密码以存储在 XML 文件中。我想在屏幕上添加一个“测试连接”按钮，并让它在控制器上执行一个名为 TestConnection 的方法。问题是 TestConnection 方法在单击时重置屏幕上的所有信息，因为返回的视图没有模型。（因为正在发生 GET 操作）。这是我的代码：

从控制器（命名`FrameworkConfigurationController.cs`）

```
 public ActionResult TestConnection()
    {
        return View("Index");
    }

    [HttpPost]
    public ActionResult TestConnection(FrameworkConfigurationViewModel viewModel)
    {           
        // TODO: Test will occur here
        viewModel.DbConnectionMessage = string.IsNullOrEmpty(viewModel.DatabaseName) ? "Connection unsuccessful" : "Connection successful";

        return View("Index", viewModel);
    } 
```

从我的观点（`FrameworkConfiguration/Index`）：

```
@model Framework.ViewModels.FrameworkConfigurationViewModel

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
 }

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>FrameworkConfigurationViewModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.ServerName)
    </div>

    @* Edited for brevity *@

    <button type="submit" onclick="location.href='@Url.Action("TestConnection")'">
       Test Connection</button>

    @Html.ValueFor(model => model.DbConnectionMessage)

    <p>
        <input type="submit" value="Save" />            
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to Dashboard", "Index", "Home")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

诚然，我是 MVC 编程的新手。我来自 Silverlight/MVVM 背景，所以这个概念对我来说并不陌生……网络编程的不连贯性是。我已经遵循了一些教程，但似乎没有一个涵盖这种类型的东西——每个例子都是人为的。我知道如何使用 webforms 和代码隐藏来做到这一点，但我想用 MVC 来完成这个。

有没有办法“强制”POST操作而不是GET？我的印象是

```
<button type="submit"> 
```

做到了。也许我写的 onclick 的实现是不正确的。我确信这是 HTML 101 的东西，但我似乎找不到一个简单的答案。

谢谢你的尽心帮助，

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:17:33.067

为什么不让 Test Connection 按钮触发 Ajax 操作来调用控制器并显示结果？

这样您就可以避免提交整个页面。

如果您不熟悉细节，这里有一个关于 Ajax 和 MVC 4 入门的很好的概述

[http://ofps.oreilly.com/titles/9781449320317/ch_AJAX.html](http://ofps.oreilly.com/titles/9781449320317/ch_AJAX.html)

# git - 如何在 magit 中搜索未暂存的更改？

> ID：14588421
> 
> 赞同：0
> 
> 时间：2013-01-29T17:15:09.850
> 
> 标签：git, emacs, magit

在编写代码时，我决定需要更改函数的名称。在进行了所有需要的更改之后，我只想提交那些命名更改，然后继续处理我之前所做的工作。使用 magit，我能够轻松地进行名称更改。但是，由于我有很多尚未提交的更改，因此我不确定是否已上演了所有需要的更改。

有没有办法搜索 magit 中的未分级更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:15:09.850

找了一圈，一无所获，我发现这其实很容易做到。

在 magit-status 缓冲区中，只需在“未暂存更改”行上按 shift-tab 即可显示所有未暂存更改。然后只需简单地使用常规 emacs 增量或正则表达式搜索来查看未暂存的更改。在“未暂存的更改”行上再次按 shift-tab 将隐藏未暂存的更改。

# rspec - 无法加载此类文件 -- mocha/object (LoadError)

> ID：14588424
> 
> 赞同：2
> 
> 时间：2013-01-29T17:15:13.010
> 
> 标签：rspec, ruby-on-rails-3.2, rspec2, spork, ruby-mocha

当我运行 rspec 进行测试时，我得到了这个错误：

无法加载此类文件 -- mocha/object (LoadError) 问题出在以下行`config.mock_with :mocha`：

这是我的 spec_helper.rb：

```
require 'rubygems'
require 'spork'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However, 
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rails'
  require 'capybara/rspec'
  #require 'spork/ext/ruby-debug'
  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each { |f| require f }

  RSpec.configure do |config|
    # == Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    config.mock_with :mocha

    #config.mock_with MultiMock::Adapter.for(:rspec, :mocha) #, :rr, :not_a_mock, ::NewMockFramework::RSpecAdapter)

    # config.mock_with :flexmock
    # config.mock_with :rr
    #config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

  end

end

Spork.each_run do
  include Devise::TestHelpers

  require 'factory_girl_rails'

  # reload all the models
  Dir["#{Rails.root}/app/models/**/*.rb"].each do |model|
    load model
  end

  # reload all factories
  FactoryGirl.factories.clear
  Dir.glob("#{::Rails.root}/spec/factories/*.rb").each do |file|
    load "#{file}"
  end

  # reload routes
  Hope::Application.reload_routes!

end

RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end
RSpec.configure do |config|
  config.extend ControllerMacros, :type => :controller
end 
```

那么，我在这里缺少什么？

**编辑**

这是完整的错误：

```
04:28:30 - INFO - Starting Spork for RSpec
Using RSpec
Preloading Rails environment
Loading Spork.prefork block...

*** Mocha deprecation warning: Test::Unit or MiniTest must be loaded *before* Mocha.

*** Mocha deprecation warning: If you're integrating with a test library other than Test::Unit or MiniTest, you should use `require 'mocha/api'` instead of `require 'mocha'`.

DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /home/dcaclab/RubymineProjects/coursebuilder/config/environment.rb:5)

[DEVISE] Devise.use_salt_as_remember_token is deprecated and has no effect. Please remove it.

Rack::File headers parameter replaces cache_control after Rack 1.5.

*** Mocha deprecation warning: Change `require 'mocha'` to `require 'mocha/setup'`.

*** Mocha deprecation warning: `require 'mocha/standalone'` has been deprecated. Please use `require 'mocha/api' instead.

cannot load such file -- mocha/object (LoadError)
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/rspec-core-2.9.0/lib/rspec/core/mocking/with_mocha.rb:2:in `<top (required)>'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:315:in `mock_with'
/home/dcaclab/RubymineProjects/coursebuilder/spec/spec_helper.rb:26:in `block (2 levels) in <top (required)>'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/rspec-core-2.9.0/lib/rspec/core.rb:94:in `configure'
/home/dcaclab/RubymineProjects/coursebuilder/spec/spec_helper.rb:21:in `block in <top (required)>'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork.rb:24:in `prefork'
/home/dcaclab/RubymineProjects/coursebuilder/spec/spec_helper.rb:6:in `<top (required)>'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork/test_framework.rb:138:in `block (2 levels) in preload'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork/app_framework/rails.rb:8:in `preload'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork/test_framework.rb:134:in `block in preload'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork.rb:62:in `exec_prefork'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork/test_framework.rb:120:in `preload'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:25:in `preload'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork/runner.rb:74:in `run'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/lib/spork/runner.rb:10:in `run'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/gems/spork-0.9.2/bin/spork:10:in `<top (required)>'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/bin/spork:19:in `load'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/bin/spork:19:in `<main>'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/bin/ruby_noexec_wrapper:14:in `eval'
/home/dcaclab/.rvm/gems/ruby-1.9.3-p362@course_builder/bin/ruby_noexec_wrapper:14:in `<main>' 
```

编辑 2

这是我的 Gemfile

```
source 'http://rubygems.org'

gem 'rails' , '3.2.11'

gem "heroku"

gem 'thin'

gem 'devise'#, '1.5.2'

gem 'will_paginate', '~> 3.0.2'

#gem 'nested_form', :git => 'git://github.com/fxposter/nested_form.git'

gem "simple_form"

gem "cancan"

gem 'kaminari'

gem 'foreigner'

gem "cocoon"

gem 'client_side_validations'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'#, "  ~> 3.1.0"
  gem 'coffee-rails'#, "~> 3.1.0"
  gem 'uglifier'
end

gem "jquery-rails"

gem "validate_url", "~> 0.2.0"

gem 'pg', :group => [:production]

gem 'haml'
# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'
group :test, :development do
  gem 'sqlite3'

  gem 'turn', :require => false
  gem "letter_opener"

  gem 'meta_request', '0.2.0'

  gem "rspec-rails", "2.9.0"

  gem 'guard-rspec'
  gem "spork"
  gem 'guard-spork'

  gem 'rb-inotify', '~> 0.8.8'

  gem "factory_girl_rails"

  gem "mocha", :require=> false
  gem 'capybara' #, :git => 'git://github.com/jnicklas/capybara.git'

  gem 'launchy'
  gem "capybara-webkit"

  gem "nifty-generators"

  gem 'sextant'

  gem 'haml-rails'
  gem 'hpricot'
  gem 'ruby_parser'
  #gem 'rspec-multi-mock', :git => 'git://github.com/endeepak/rspec-multi-mock.git'
end

group :test do
  #gem 'ruby-debug19', :require => 'ruby-debug'

end

gem 'execjs'

gem 'therubyracer' 
```

这是我的 Gemfile.lock

```
GEM
  remote: http://rubygems.org/
  specs:
    actionmailer (3.2.11)
      actionpack (= 3.2.11)
      mail (~> 2.4.4)
    actionpack (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.3.2)
    ansi (1.4.3)
    arel (3.0.2)
    bcrypt-ruby (3.0.1)
    builder (3.0.4)
    cancan (1.6.8)
    capybara (2.0.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 1.0.0)
    capybara-webkit (0.14.1)
      capybara (~> 2.0, >= 2.0.2)
      json
    childprocess (0.3.7)
      ffi (~> 1.0, >= 1.0.6)
    client_side_validations (3.2.1)
    cocoon (1.1.2)
    coderay (1.0.8)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    daemons (1.1.9)
    devise (2.2.3)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (1.0.0)
    excon (0.16.10)
    execjs (1.4.0)
      multi_json (~> 1.0)
    factory_girl (4.2.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (4.2.0)
      factory_girl (~> 4.2.0)
      railties (>= 3.0.0)
    ffi (1.3.1)
    foreigner (1.3.0)
      activerecord (>= 3.0.0)
    guard (1.6.2)
      listen (>= 0.6.0)
      lumberjack (>= 1.0.2)
      pry (>= 0.9.10)
      terminal-table (>= 1.4.3)
      thor (>= 0.14.6)
    guard-rspec (1.2.1)
      guard (>= 1.1)
    guard-spork (1.4.1)
      childprocess (>= 0.2.3)
      guard (>= 1.1)
      spork (>= 0.8.4)
    haml (3.1.7)
    haml-rails (0.3.5)
      actionpack (>= 3.1, < 4.1)
      activesupport (>= 3.1, < 4.1)
      haml (~> 3.1)
      railties (>= 3.1, < 4.1)
    heroku (2.34.0)
      heroku-api (~> 0.3.7)
      launchy (>= 0.3.2)
      netrc (~> 0.7.7)
      rest-client (~> 1.6.1)
      rubyzip
    heroku-api (0.3.7)
      excon (~> 0.16.10)
    hike (1.2.1)
    hpricot (0.8.6)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.2.0)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.6)
    kaminari (0.14.1)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
    launchy (2.1.2)
      addressable (~> 2.3)
    letter_opener (1.0.0)
      launchy (>= 2.0.4)
    libv8 (3.11.8.13)
    listen (0.7.2)
    lumberjack (1.0.2)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    meta_request (0.2.0)
      rack-contrib
      rails
    metaclass (0.0.1)
    method_source (0.8.1)
    mime-types (1.19)
    mocha (0.13.2)
      metaclass (~> 0.0.1)
    multi_json (1.5.0)
    netrc (0.7.7)
    nifty-generators (0.4.6)
    nokogiri (1.5.6)
    orm_adapter (0.4.0)
    pg (0.14.1)
    polyglot (0.3.3)
    pry (0.9.11.4)
      coderay (~> 1.0.5)
      method_source (~> 0.8)
      slop (~> 3.4)
    rack (1.4.4)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-contrib (1.1.0)
      rack (>= 0.9.1)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.11)
      actionmailer (= 3.2.11)
      actionpack (= 3.2.11)
      activerecord (= 3.2.11)
      activeresource (= 3.2.11)
      activesupport (= 3.2.11)
      bundler (~> 1.0)
      railties (= 3.2.11)
    railties (3.2.11)
      actionpack (= 3.2.11)
      activesupport (= 3.2.11)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rb-inotify (0.8.8)
      ffi (>= 0.5.0)
    rdoc (3.12)
      json (~> 1.4)
    ref (1.0.2)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rspec (2.9.0)
      rspec-core (~> 2.9.0)
      rspec-expectations (~> 2.9.0)
      rspec-mocks (~> 2.9.0)
    rspec-core (2.9.0)
    rspec-expectations (2.9.1)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.9.0)
    rspec-rails (2.9.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec (~> 2.9.0)
    ruby_parser (3.1.1)
      sexp_processor (~> 4.1)
    rubyzip (0.9.9)
    sass (3.2.5)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.29.0)
      childprocess (>= 0.2.5)
      multi_json (~> 1.0)
      rubyzip
      websocket (~> 1.0.4)
    sexp_processor (4.1.4)
    sextant (0.2.3)
      activesupport (>= 3.2)
      rails (>= 3.2)
    simple_form (2.0.4)
      actionpack (~> 3.0)
      activemodel (~> 3.0)
    slop (3.4.3)
    spork (0.9.2)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.7)
    terminal-table (1.4.5)
    therubyracer (0.11.3)
      libv8 (~> 3.11.8.12)
      ref
    thin (1.5.0)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.17.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    turn (0.9.6)
      ansi
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    validate_url (0.2.0)
      activemodel (>= 3.0.0)
    warden (1.2.1)
      rack (>= 1.0)
    websocket (1.0.7)
    will_paginate (3.0.4)
    xpath (1.0.0)
      nokogiri (~> 1.3)

PLATFORMS
  ruby

DEPENDENCIES
  cancan
  capybara
  capybara-webkit
  client_side_validations
  cocoon
  coffee-rails
  devise
  execjs
  factory_girl_rails
  foreigner
  guard-rspec
  guard-spork
  haml
  haml-rails
  heroku
  hpricot
  jquery-rails
  kaminari
  launchy
  letter_opener
  meta_request (= 0.2.0)
  mocha
  nifty-generators
  pg
  rails (= 3.2.11)
  rb-inotify (~> 0.8.8)
  rspec-rails (= 2.9.0)
  ruby_parser
  sass-rails
  sextant
  simple_form
  spork
  sqlite3
  therubyracer
  thin
  turn
  uglifier
  validate_url (~> 0.2.0)
  will_paginate (~> 3.0.2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:04:57.950

正如这里所说：[https://github.com/freerange/mocha#bundler](https://github.com/freerange/mocha#bundler)，您需要确保 Mocha 不是自动需要的，然后明确要求它`spec_helper.rb`

所以你`Gemfile`应该有这样的东西：

```
gem "mocha", :require => false 
```

然后你`spec_helper.rb`应该有以下（在你的其他要求没问题之后）：

```
require "mocha/setup" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:40:16.270

关于你提出的 mocha[问题](https://github.com/freerange/mocha/issues/130)，我已经更全面地[回答](https://github.com/freerange/mocha/issues/130#issuecomment-12885244)了这个问题，但基本上我认为你需要升级 rspec(-rails) 或降级 mocha。您使用的两个版本互不兼容。

# c# - 如何模拟具有 Fiddler 核心的服务器？

> ID：14588425
> 
> 赞同：0
> 
> 时间：2013-01-29T17:15:15.443
> 
> 标签：c#, fiddler, fiddlercore

我正在尝试在不将 fiddler 设置为其代理的情况下调试应用程序。

为此，我设置了基于 fiddler.core 的应用程序，该应用程序驻留在网络中的另一台计算机上，并向主机文件添加了一个条目。

这是应用程序的代码：

```
 private static Proxy googleEndpoint;

    static void Main(string[] args)
    {
        List<Fiddler.Session> oAllSessions =new List<Session>();

        Fiddler.FiddlerApplication.BeforeRequest += (i) => Console.WriteLine("Before request: "+i.fullUrl);
        FiddlerApplication.AfterSessionComplete += (i) =>
        {
            Console.WriteLine("After request: "+i.fullUrl);
            lock (oAllSessions)
            {
                oAllSessions.Add(i);
            }
        };

        //https://www.google.com.ua/

        googleEndpoint = FiddlerApplication.CreateProxyEndpoint(443, true, "www.google.com.ua");
        if (null != googleEndpoint)
        {
            Console.WriteLine("google.com.ua endpoint mounted");
        }
        else
        {
            Console.WriteLine("failed to mount google.com.ua endpoint");
        }

        Console.ReadKey();
        SaveSessionsToDesktop(oAllSessions);
    }

    private static void SaveSessionsToDesktop(List<Fiddler.Session> oAllSessions)
    {
        bool bSuccess = false;
        string sFilename = DateTime.Now.ToString("hh-mm-ss") + ".saz";
        try
        {
            try
            {
                Monitor.Enter(oAllSessions);
                TranscoderTuple oExporter = FiddlerApplication.oTranscoders.GetExporter("SAZ");

                if (null != oExporter)
                {
                    Dictionary<string, object> dictOptions = new Dictionary<string, object>();
                    dictOptions.Add("Filename", sFilename);
                    // dictOptions.Add("Password", "pencil");

                    bSuccess = FiddlerApplication.DoExport("SAZ", oAllSessions.ToArray(), dictOptions, null);
                }
                else
                {
                    Console.WriteLine("Save failed because the SAZ Format Exporter was not available.");
                }
            }
            finally
            {
                Monitor.Exit(oAllSessions);
            }

            WriteCommandResponse(bSuccess ? ("Wrote: " + sFilename) : ("Failed to save: " + sFilename));
        }
        catch (Exception eX)
        {
            Console.WriteLine("Save failed: " + eX.Message);
        }
    }

    public static void WriteCommandResponse(string s)
    {
        ConsoleColor oldColor = Console.ForegroundColor;
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.WriteLine(s);
        Console.ForegroundColor = oldColor;
    } 
```

但是当我尝试`https://www.google.com.ua`从目标机器访问时，请求现在超时。

Fiddler 应用程序显示它已收到`BeforeRequest`事件中的请求，但它从未发送回复（`AfterSessionComplete`从未被调用）。

为什么会发生这种情况，我该如何解决？

我如何为端口 80 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:48:13.370

我相信您牢记这样一个事实，除非您将客户端重新配置为信任 FiddlerServer 的根证书，否则它不会向 FiddlerCore 发出 HTTPS 请求。相反，它会在获得拦截证书后立即关闭连接。

如果您附加一个 BeforeResponse 事件处理程序，您会看到什么？它会火吗？

# java - Java 打印方块（未知字符）以及常规文本

> ID：14588435
> 
> 赞同：6
> 
> 时间：2013-01-29T17:15:34.840
> 
> 标签：java, file, csv

**代码：**

```
public class MainApplication {

      public static void main(String[] args) throws IOException {

              try{
                  // Open the file that is the first 
                  // command line parameter
                  FileInputStream fstream = new FileInputStream("data/temp.CSV");
                  BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
                  String strLine;
                  //Read File Line By Line
                  while ((strLine = br.readLine()) != null)   {
                  // Print the content on the console
                  System.out.println (strLine);
                  }
                  //Close the input stream
                  in.close();
                    }catch (Exception e){//Catch exception if any
                  System.err.println("Error: " + e.getMessage());
                  }
      }
} 
```

**CSV 文件数据：**

```
19/1/13 13:58:04    0   1610    0   419 0   0
19/1/13 13:58:05    0.01    1599    66  432 0   1
19/1/13 13:58:06    0.02    1603    47  423 0   2
19/1/13 13:58:07    0.03    1602    26  413 0   3
19/1/13 13:58:08    0.04    1605    130 412 0   4 
```

**输出：**

![错误画面](../Images/a67410edc3402fa679e9ebfaf8b33abc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:28:40.310

利用

```
BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-16LE")); 
```

代替

```
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T17:18:52.923

代替

```
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

和

```
BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-8")); 
```

替换`"UTF-8"`为文件的编码`.csv`。

`InputStreamReader`根据给定的字符集，使用此构造函数处理您的输入正确。如果您没有指定字符集并且有*奇怪*的输出，则表明文件以不同于系统默认编码的编码进行编码。

此外，你可以摆脱`DataInputStream`和写

```
BufferedReader br = new BufferedReader(new InputStreamReader(fstream, "UTF-16")); 
```

**编辑** *感谢亨利指出以下几点：*

查看您的输出，每个字符似乎都使用 2 个字节进行编码。这表明它的编码是 UTF-16。您应该`"UTF-16"`相应地在构造函数中使用。

# asp.net-mvc - ASP.NET MVC - HtmlHelper 和会话数据

> ID：14588441
> 
> 赞同：7
> 
> 时间：2013-01-29T17:15:59.473
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想创建一个搜索会话数据的助手，最好是这样的：

```
public static bool CheckForModerator(this HtmlHelper htmlHelper)
{
    return Session["isAdmin"];
} 
```

但我无法访问 Session[] 数据。我尝试浏览`htmlHelper`，但我也找不到 Session 那里。为了访问会话数据，我需要做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T17:30:01.157

```
using System.Web; 
```

进而

```
HttpContext context = HttpContext.Current;
return context.Session["isAdmin"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-10T20:01:09.883

更喜欢`(bool)htmlHelper.ViewContext.HttpContext.Session["IsAdmin"]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T17:28:40.653

尝试从`System.Web.HttpContext.Current.Session`

# php - 如何在 Magento 的自定义菜单下获取子类别

> ID：14588444
> 
> 赞同：0
> 
> 时间：2013-01-29T17:16:06.063
> 
> 标签：php, magento, drop-down-menu, magento-1.7

我已经成功地为我需要的每个特定类别创建了一个自定义下拉菜单，但其中一个需要加载子类别中的子类别，我无法让它工作。

没有“子类别中的子类别”的工作代码如下，但我需要了解如何在此代码上添加第三级。

```
 <!-- Vending -->
 <?php $main = Mage::getModel('catalog/category')->load(355) ?>
 <li class="eight"><a href="<?php echo $main->getUrl() ?>"><?php echo $main->getName(); ?></a>
 <?php $children = Mage::getModel('catalog/category')->getCategories(355); ?>
 <ul class="nav_static">
 <?php foreach ($children as $category): ?>
 <li>
 <a href="<?php echo $category->getRequestPath(); ?>">
 <?php echo $category->getName(); ?>
 </a>
 </li>
 <?php endforeach; ?>
 </ul>
 </li>
 <!-- END - Vending --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:33:45.283

好吧，正如我在[https://stackoverflow.com/a/14586422/653867](https://stackoverflow.com/a/14586422/653867)中建议的那样，您必须为您的二级类别加载一个类别对象：

```
$cat = Mage::getModel('catalog/category')->load($category->getEntityId()); 
```

然后你可以通过执行访问它的孩子

```
$children = $cat->getChildrenCategories(); 
```

$`children`变量是类型的集合`Mage_Catalog_Model_Resource_Category_Collection`，您可以遍历它以输出下一级类别

我认为，如果您首先在 $main 上调用 getChildrenCategories() ，您的代码可以改进一些。您不必在循环中加载每个孩子，这可能会影响性能。而是使用它（实际上可以通过递归调用进一步改进它，但是这种设置将包括创建额外的块，这对于这种特殊情况可能太麻烦了）：

```
 <?php $main = Mage::getModel('catalog/category')->load(355) ?>
 <li class="eight"><a href="<?php echo $main->getUrl() ?>"><?php echo $main->getName(); ?></a>
 <?php $children = $main->getChildrenCategories(); ?>
 <ul class="nav_static">
 <?php foreach ($children as $category): ?>
 <li>
 <a href="<?php echo $category->getUrl(); ?>">
 <?php echo $category->getName();

 $subCategories = $category->getChildrenCategories();
 foreach ($subCategories as $subCat) {
 /**
  *your code to output the next level categories
  */
 }
 ?>
 </a>
 </li>
 <?php endforeach; ?>
 </ul>
 </li> 
```

# php - 是否可以向 Java Web 服务发出 PHP SOAP 请求？

> ID：14588446
> 
> 赞同：1
> 
> 时间：2013-01-29T17:16:08.663
> 
> 标签：php

我有一个 URL：' [http](http://myurl.com/foo/bar.jws) ://myurl.com/foo/bar.jws ' 我正在尝试通过 PHP 与此 URL 建立 SOAP 连接，但它似乎不起作用。我错过了什么吗？

```
<?php
try { $soapObject = new SoapClient('http://myurl.com/foo/bar.jws'); }
catch(Exception $e) { die('SOAP connection failed: ' .$e->getMessage()); }
?> 
```

我收到此错误：

```
SOAP connection failed: SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://myurl.com/foo/bar.jws' : failed to load external entity "http://myurl.com/foo/bar.jws" 
```

# c# - 在我的代码执行中添加延迟的正确方法

> ID：14588447
> 
> 赞同：5
> 
> 时间：2013-01-29T17:16:08.753
> 
> 标签：c#, winforms

我正在尝试制作一个非常简单的逻辑游戏。这个想法是看到一个带有一定数量彩色方块（按钮）的矩阵，然后隐藏它们，玩家必须点击彩色方块。所以我需要在绘制正方形/按钮和返回原始颜色之间有 2 秒的延迟。所有代码都在一个`button_click`事件中实现。

```
private void button10_Click(object sender, EventArgs e)
{

    int[,] tempMatrix = new int[3, 3];
    tempMatrix = MakeMatrix();
    tempMatrix = SetDifferentValues(tempMatrix);
    SetButtonColor(tempMatrix, 8);
    if (true)
    {
        Thread.Sleep(1000);
       // ReturnButtonsDefaultColor();
    }
    ReturnButtonsDefaultColor();
    Thread.Sleep(2000);

    tempMatrix = ResetTempMatrix(tempMatrix);
} 
```

这是整个代码，但我需要的是在调用`SetButtonColor()`和`ReturnButtonsDefaultColor()`. `Thread.Sleep()`到目前为止，我所有的实验都没有成功。我在某些时候遇到了延迟，但从未显示彩色方块/按钮。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:24:46.567

您看不到按钮改变颜色，因为`Sleep`调用阻止消息被处理。

处理此问题的最简单方法可能是使用计时器。以 2 秒的延迟初始化计时器，并确保它默认禁用。然后，您的按钮单击代码启用计时器。像这样：

```
private void button10_Click(object sender, EventArgs e)
{
    // do stuff here
    SetButtonColor(...);
    timer1.Enabled = true; // enables the timer. The Elapsed event will occur in 2 seconds
} 
```

还有你的计时器的 Elapsed 事件处理程序：

```
private void timer1_TIck(object sender, EventArgs e)
{
    timer1.Enabled = false;
    ResetButtonsDefaultColor();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T17:28:06.977

您始终可以使用 TPL，它是最简单的解决方案，因为您不需要处理线程上下文或分段代码。

```
private async void button10_Click(object sender, EventArgs e)
{

    int[,] tempMatrix = new int[3, 3];
    tempMatrix = MakeMatrix();
    tempMatrix = SetDifferentValues(tempMatrix);
    SetButtonColor(tempMatrix, 8);
    if (true)
    {
       await Task.Delay(2000);
       // ReturnButtonsDefaultColor();
    }
    ReturnButtonsDefaultColor();
       await Task.Delay(2000);

    tempMatrix = ResetTempMatrix(tempMatrix);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T17:22:52.433

使用[计时器](http://msdn.microsoft.com/de-de/library/system.windows.forms.timer.aspx)。在滴答事件中调用 ReturnButtonsDefaultColor()，而不是您的 Thread.Sleep Start() 计时器。您可以使用第二个计时器而不是第二个 Thread.Sleep 或保存某种状态并在滴答事件中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:29:19.620

您可以使用任务：

```
 private void button10_Click(object sender, EventArgs e)
        {

            int[,] tempMatrix = new int[3, 3];
            tempMatrix = MakeMatrix();
            tempMatrix = SetDifferentValues(tempMatrix);
            SetButtonColor(tempMatrix, 8);

            Task.Factory.StartNew(
                () => 
                {
                    if (true)
                    {
                        Thread.Sleep(1000);
                        // ReturnButtonsDefaultColor();
                    }
                    ReturnButtonsDefaultColor(); //Need to dispatch that to the UI thread
                    Thread.Sleep(2000);

                    tempMatrix = ResetTempMatrix(tempMatrix); //Probably that as well
                });
        } 
```

WPF 中的调度与 Winforms 不同，google 应该很容易；）

# django - 具有复杂查询的 REST API

> ID：14588452
> 
> 赞同：3
> 
> 时间：2013-01-29T17:16:20.260
> 
> 标签：django, backbone.js

我不完全了解如何在后端使用 REST API 以及在前端使用骨干网络应用程序进行复杂查询。假设我有一个`user`与表有关系的`user_group`表：

```
user.group_ref => user_group.id 
```

如果我做 a `GET`on`/api/v1/user/1/?format=json`它会做类似的事情`SELECT * FROM users WHERE id = 1`。`JOIN`对，好的，现在......如果我想在`user_group`哪里`user.group_ref = user_group.id`立即访问`user_group`. 我不想进行额外的查询来获取该数据。

也许我的整个想法都错了......有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:34:33.133

REST 是一组约定。它不提供自动查询映射，因此您需要定义一个服务端点，然后实现它以返回您想要的任何内容。

在您的情况下，构成 URL 的典型方式如下：

```
GET /groups/(groupid)/users 
```

也就是说“给我属于这个组的所有用户”。或者：

```
GET /users?group=(groupid) 
```

风格上不太“RESTful”，但不会不必要地将组提升为顶级资源。

无论哪种方式，Backbone 都没有提供一种 OOTB 方式来从更复杂的资源中填充集合。对于简单的 CRUD 之外的任何内容，您都必须自己实现服务调用，或者创建一个单独的只读集合，并将`url`其映射到您的服务。就像是：

```
var UserGroupCollection = Backbone.Collection.extend({
  url: function() { return "groups/" + this.options.groupId + "/users"; }
});

var group = new UserGroupCollection({groupId:1});
group.fetch(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:30:34.103

REST API 可以单独实现，与前端没有任何关系，可以根据需要进行设计。

在您的情况下，如果您总是要通过查询用户获取 user_group.id，那么您应该将您的 SQL 永久更改为 JOIN 语句：SELECT * FROM users WHERE id = 1 JOIN user_group WHERE user.group_ref=user_group。 ID。

如果您需要有和没有用户组信息的查询。您可以设计两种 REST 方法，例如 (GET /api/v1/user/1?format=json) 用于没有组信息，以及 (GET /api/v1/userwithgroup/1?format=json) 用于具有组信息的方法.

在主干上，您可以有两个不同的模型来代表两者。

如果您的表中没有数百万用户，那么带有组信息的 SQL 应该会非常快，并且始终使用组信息会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:31:47.203

有一个名为 slumbber ( [http://slumber.in/](http://slumber.in/) ) 的 python 库，它建立在请求之上，用于 REST API 的明确目的。

# php - 在 PayPal 中设置 ipnNotificationUrl 变量

> ID：14588459
> 
> 赞同：0
> 
> 时间：2013-01-29T17:16:38.317
> 
> 标签：php, paypal, paypal-ipn

我正在尝试使用 PayPal AdaptivePayments API，并且正在尝试为 paypal IPN 设置 URL，该 URL 应该是“ipnNotificationUrl”，但我不知道在请求中添加它的位置。这是我的代码：

```
ini_set("track_errors", true);

//set PayPal Endpoint to sandbox
$url = trim("https://svcs.sandbox.paypal.com/AdaptivePayments/Pay");

/*
*******************************************************************
PayPal API Credentials
Replace <API_USERNAME> with your API Username
Replace <API_PASSWORD> with your API Password
Replace <API_SIGNATURE> with your Signature
*******************************************************************
*/

//PayPal API Credentials
$API_UserName = "sbapi_1287090601_biz_api1.paypal.com"; //TODO
$API_Password = "1287090610"; //TODO
$API_Signature = "ANFgtzcGWolmjcm5vfrf07xVQ6B9AsoDvVryVxEQqezY85hChCfdBMvY"; //TODO

//Default App ID for Sandbox    
$API_AppID = "APP-80W284485P519543T";

$API_RequestFormat = "NV";
$API_ResponseFormat = "NV";

//Create request payload with minimum required parameters
$bodyparams = array (   "requestEnvelope.errorLanguage" => "en_US",
                                            "actionType" => "PAY",
                                            "currencyCode" => "USD",
                                            "cancelUrl" => "http://www.paypal.com",
                                            "returnUrl" => "http://www.paypal.com",
                                            "receiverList.receiver(0).email" => "r_1_1266351681_biz@paypal.com", //TODO
                                            "receiverList.receiver(0).amount" => "20.0", //TODO
                                            "receiverList.receiver(1).email" => "r_2_1266352427_biz@paypal.com", //TODO
                                            "receiverList.receiver(1).amount" => "30.0" //TODO
                                            );

// convert payload array into url encoded query string
$body_data = http_build_query($bodyparams, "", chr(38));

try
{

    //create request and add headers
    $params = array("http" => array( 
                                                                     "method" => "POST",
                                                     "content" => $body_data,
                                                     "header" =>  "X-PAYPAL-SECURITY-USERID: " . $API_UserName . "\r\n" .
                                                                    "X-PAYPAL-SECURITY-SIGNATURE: " . $API_Signature . "\r\n" .
                                                                                    "X-PAYPAL-SECURITY-PASSWORD: " . $API_Password . "\r\n" .
                                                                                "X-PAYPAL-APPLICATION-ID: " . $API_AppID . "\r\n" .
                                                                                "X-PAYPAL-REQUEST-DATA-FORMAT: " . $API_RequestFormat . "\r\n" .
                                                                                "X-PAYPAL-RESPONSE-DATA-FORMAT: " . $API_ResponseFormat . "\r\n" 
                                                                                ));

    //create stream context
     $ctx = stream_context_create($params);

    //open the stream and send request
     $fp = @fopen($url, "r", false, $ctx);

    //get response
     $response = stream_get_contents($fp);

    //check to see if stream is open
     if ($response === false) {
        throw new Exception("php error message = " . "$php_errormsg");
     }

    //close the stream
     fclose($fp);

    //parse the ap key from the response
    $keyArray = explode("&", $response);

    foreach ($keyArray as $rVal){
        list($qKey, $qVal) = explode ("=", $rVal);
            $kArray[$qKey] = $qVal;
    }

    //set url to approve the transaction
    $payPalURL = "https://www.sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=" . $kArray["payKey"];

    //print the url to screen for testing purposes
    If ( $kArray["responseEnvelope.ack"] == "Success") {
        echo '<p><a href="' . $payPalURL . '" target="_blank">' . $payPalURL . '</a></p>';
     }
    else {
        echo 'ERROR Code: ' .  $kArray["error(0).errorId"] . " <br/>";
      echo 'ERROR Message: ' .  urldecode($kArray["error(0).message"]) . " <br/>";
    }

    /*
    //optional code to redirect to PP URL to approve payment
    If ( $kArray["responseEnvelope.ack"] == "Success") {

      header("Location:".  $payPalURL);
      exit;
       }
     else {
            echo 'ERROR Code: ' .  $kArray["error(0).errorId"] . " <br/>";
        echo 'ERROR Message: ' .  urldecode($kArray["error(0).message"]) . " <br/>";
     }
     */
}

catch(Exception $e) {
    echo "Message: ||" .$e->getMessage()."||";
  } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:31:10.897

它应该在 $bodyparms 数组中：

```
 "returnUrl" => "http://www.paypal.com",
 "ipnNotificationUrl" => "http://www.baseem.com/ipnhandler.php", 
```

# php - simplexml_load_file ：仅在文档开头允许的 XML 声明

> ID：14588461
> 
> 赞同：0
> 
> 时间：2013-01-29T17:16:55.103
> 
> 标签：php, xml, parsing, simplexml

我想用 SimpleXML 解析 PHP 中的 XML 文档。我使用`simplexml_load_file`并收到此错误：

`Warning: simplexml_load_file(): [myfile] parser error : XML declaration allowed only at the start of the document in /www/[...]/myphpfile.php on line 7`

我在 Google 上搜索过，问题似乎是 XML 文档中的标签之前有一些空格。我查了一下，之前没有空格。

这是我的代码：

```
libxml_use_internal_errors(true);
$sxml=simplexml_load_file($xml);
if ($sxml) {
 echo '<h2>'.$xml.'</h2>';
 echo '<p>author: <textarea>';
 foreach($sxml->author as $author) {
  if($author!=$strXML)
   echo $author.'\n';
  }
  echo '</textarea></p>';
}else {
  echo "Failed loading XML\n";
  foreach(libxml_get_errors() as $error)
    echo "\t", $error->message;
} 
```

**编辑：**错误是`Failed loading XML XML declaration allowed only at the start of the document Extra content at the end of the document`

XML 文档的第一个标签是`<?xml version="1.0" encoding="UTF-8"?>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T09:52:18.680

按照 Symfony2 的示例，我得到了这个错误：

```
<!-- validators.en.xliff -->
<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
    <file source-language="en" datatype="plaintext" original="file.ext">
        <body>
            <trans-unit id="1">
                <source>author.name.not_blank</source>
                <target>Saisissez un nom</target>
            </trans-unit>
        </body>
    </file>
</xliff> 
```

问题是第一行的评论！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T18:35:54.247

假设，我发现（实际上我第一次遇到这个错误）。

1.  我尝试了一个以第一行开头的 XML 文件`<?xml ...`（没有错误）
2.  我尝试了一个以第一行开头的 XML 文件`[space or/and new line]<?xml ...`（有错误）

// 两个错误（xml.xml 内容）

```
<?xml 版本="1.0" 编码="UTF-8"?>
<响应>
// 和
 <?xml 版本="1.0" 编码="UTF-8"?>
<响应>

$xml = simplexml_load_file("xml.xml");
$xml = new SimpleXMLElement(file_get_contents("xml.xml"));

```

因此，请确保 XML 文件以`<?xml ...`有效的 XML 标记（我的意思是 1\. 行）开头，从第一行删除所有空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-30T21:12:46.197

只需从头开始去除空格：

```
new \SimpleXMLElement(
  trim($xmlString)
); 
```

它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:36:42.023

先声明 $xsml 然后在 if 中使用它。

# java - 在 Eclipse 中为 java 安装 Windows Azure 访问控制服务过滤器插件有困难

> ID：14588463
> 
> 赞同：2
> 
> 时间：2013-01-29T17:17:03.427
> 
> 标签：java, eclipse, plugins, azure

我正在尝试使用此链接[http://msdn.microsoft.com/en-us/library/windowsazure/hh690946.aspx安装 ACS 插件](http://msdn.microsoft.com/en-us/library/windowsazure/hh690946.aspx)

但是，我收到了这个错误。

无法完成安装，因为某些依赖项无法满足 com.microsoftopentechnologies.acsfilter.feature.feature.group [0.2.0.201211010928] 无法在此环境中安装，因为其过滤器不适用。

知道需要做什么吗？

我有 Eclipse Juno

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:17:24.900

您使用的是 Windows 还是非 Windows 操作系统？如此[处](http://msdn.microsoft.com/en-us/library/windowsazure/hh690946.aspx)所述，此插件需要机器中的 Windows Azure SDK 1.8，如果没有它，您将遇到错误：

```
This plugin requires Windows Azure SDK 1.8\. This can be downloaded using the Web Platform Installer (WebPI) at http://go.microsoft.com/fwlink/?LinkID=252838\. However, if you don’t have it installed, when you create your first Windows Azure deployment project, the plugin will automatically install Windows Azure SDK 1.8. 
```

您可以先让一台测试 Windows 机器试一试，然后了解如何将代码移植到其他机器上。这不是实现您想要的干净的方法，但至少您有一些选择。

# ruby-on-rails - 这个 Rails cloudfront 自定义源设置是最优的吗？

> ID：14588465
> 
> 赞同：2
> 
> 时间：2013-01-29T17:17:06.557
> 
> 标签：ruby-on-rails, asset-pipeline, amazon-cloudfront

我已将 cloudfront 配置为使用 Heroku 作为其自定义来源。在`production.rb`文件中，我进行了以下设置：

```
middleware.insert_after('Rack::Cache', Rack::Deflater)
config.static_cache_control = "public, max-age=86400"
config.action_controller.asset_host = ENV["ASSET_HOST"] 
```

此外，我修改了样式表，因此在任何使用资产（图像/字体）的地方，我都使用了`asset_path`. 因此，我指望资产管道提供的摘要使我的资产到期。

这个云端设置如何？与资产加载有关的任何事情都可以改进吗？

# java - 从 doPost HttpServletRequest 读取 xml 时出错

> ID：14588471
> 
> 赞同：1
> 
> 时间：2013-01-29T17:17:29.050
> 
> 标签：java, xml, servlets

我正在尝试读取使用 http`doPost`方法发布的 XML 文件。使用 SAXParser 解析时会抛出异常：

```
Content is not allowed in prolog. 
```

doPost 代码是：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
{    
    ServletInputStream httpIn = request.getInputStream();        
    byte[] httpInData = new byte[request.getContentLength()];
    StringBuffer readBuffer = new StringBuffer();
    int retVal = -1;
    while ((retVal = httpIn.read(httpInData)) != -1)
    {
        for (int i=0; i<retVal; i++)
        {
            readBuffer.append(Character.toString((char)httpInData[i]));
        }                   
    }

    System.out.println("XML Received" + readBuffer);
    try 
    {
        SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
        ByteArrayInputStream inputStream = new ByteArrayInputStream(
            readBuffer.toString().getBytes("UTF-8"));
        final XmlParser xmlParser = new XmlParser();
        parser.parse(inputStream, xmlParser);               
    }
    catch (Exception e)
    {
        System.out.println("Exception parsing the xml request" + e);
    }
} 
```

这是我正在测试的 JUnit：

```
public static void main(String args[])
{    
    StringBuffer buffer = new StringBuffer();   
    buffer.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
    buffer.append("<person>");
    buffer.append("<name>abc</name>");
    buffer.append("<age>25</age>");
    buffer.append("</person>");

    try
    {
        urlParameters = URLEncoder.encode(buffer.toString(), "UTF-8");
    } 
    catch (Exception e1)
    {       
        e1.printStackTrace();
    }

    String targetURL = "http://localhost:8888/TestService";

    URL url;
    HttpURLConnection connection = null;  
    try 
    {
        //Create connection
        url = new URL(targetURL);
        connection = (HttpURLConnection)url.openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", "application/xml");
        connection.setRequestProperty("Content-Length", "" + 
            Integer.toString(urlParameters.getBytes("UTF-8").length));
        connection.setRequestProperty("Content-Language", "en-US");  
        connection.setUseCaches (false);
        connection.setDoInput(true);
        connection.setDoOutput(true);

        //Send request
        DataOutputStream wr = new DataOutputStream (
            connection.getOutputStream ());
        wr.writeBytes (urlParameters);
        wr.flush ();
        wr.close ();
    }
    catch (Exception e)
    {
        e.printStackTrace();           
    } 
```

我得到的 servlet 中的 XML 输出是这样的：

```
XML Received %3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E%3Cperson%3E% 
```

所以这会在 SAXparser 中引发异常：

我究竟做错了什么？我是以错误的方式发送 XML 还是以错误的方式读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:30:05.670

你假设

```
httpInData[i] 
```

是一个字符，而它是一个字节。您的内容是 UTF-8，这有很大的不同。请改用阅读器。

然后，您正在对您的 XML 进行 URLEncoding，这是无用的，因为它是一个 POST 数据。不要对其进行编码，只需发送数据。

代替

```
urlParameters = URLEncoder.encode(buffer.toString(), "UTF-8"); 
```

经过

```
urlParameters = buffer.toString(); 
```

此外，名称 urlParameter 选择不当，因为这是一个单独的帖子正文，不进入 url，也不是真正的参数。

# javascript - javascript确认对话框返回true后如何触发服务器端按钮的单击事件

> ID：14588478
> 
> 赞同：0
> 
> 时间：2013-01-29T17:17:58.253
> 
> 标签：javascript, asp.net, confirm, serverside-javascript

我有一个输入作为计数，在具有 hdncount 隐藏输入的转发器中命名。而且我有一个来自中继器的服务器端按钮。此脚本运行计数的 onblur 事件。如果客户端在确认时单击确定按钮，我想触发服务器端按钮的单击事件。我该怎么做呢？

```
<script type="text/javascript">

        function changeItemCount(input) {
            var hdnCount = $(input).closest("div").find("input[id=hdnCount]").val();
            var crrCount = $(input).closest("div").find("input[id=count]").val();

            if (hdnCount != crrCount) {
                var answer = confirm("Ürün adedi değiştirilecektir. Onaylıyor musunuz?");
                return answer;
            } else {
                return true;
            }
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:24:30.043

[如何从 ASP.NET 中的 JavaScript 触发按钮单击事件](https://stackoverflow.com/questions/7646162/how-to-fire-button-click-event-from-javascript-in-asp-net)

```
var answer = confirm("Ürün adedi değiştirilecektir. Onaylıyor musunuz?");

if(answer)
  __doPostBack('btnSubmit','OnClick'); //use the server-side ID of the control here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:23:58.220

将 OnClientClick 与 OnClick 一起使用

```
<asp:Button ID="btnGo" runat="server" Text="Go" OnClick="btnGo_Click" OnClientClick="return CheckGoJSEvents();" /> 
```

编辑：

没有看到您在模糊事件上执行了该函数。在这种情况下，您不会使用按钮的 OnClientClick。mattmanser 发布的答案是正确的。

如果您希望它通过单击按钮起作用，那么您可以使用此方法。对困惑感到抱歉。

# python - 从表格小部件中的选定单元格中检索单元格数据

> ID：14588479
> 
> 赞同：6
> 
> 时间：2013-01-29T17:18:01.707
> 
> 标签：python, pyqt4, qtablewidget

我正在制作一个库存控制程序，但在获取选定单元格的值时遇到了问题，我知道我需要使用“QtGui.QTableWidget.currentRow”和“QtGui.QTableWidget.currentColumn”来获取项目的位置。但是我似乎无法让它工作，因为当调用函数时没有选择任何内容，所以它返回-1，-1

有谁知道如何获得它，所以每次用户选择一个单元格时它都会运行“QtGui.QTableWidget.currentRow”和“QtGui.QTableWidget.currentColumn”？

我认为一旦我有了坐标，我需要获取实际数据的代码是 QtGui.QTableWidget.item ？

这是我用来获取行和列的代码：

```
row = self.table.currentRow
column = self.table.currentColumn
self.ID = self.table.item(row, column) 
```

当用户单击按钮添加库存时，程序应使用产品代码，在从用户那里获得添加的数量后，它必须对数据库进行更改

我正在使用 python 3.2 和 pyqt 4

任何帮助，将不胜感激

谢谢

山姆

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T17:58:18.940

当`QTableWidget`看到有人点击了它的一个单元格时，它将发出一个`cellClicked`事件 - 您需要连接到该事件。也许像

```
self.table.cellClicked.connect(self.cell_was_clicked) 
```

可能在您的设置代码中，功能`cell_was_clicked`可能类似于

```
def cell_was_clicked(self, row, column):
    print("Row %d and Column %d was clicked" % (row, column))
    item = self.table.itemAt(row, column)
    self.ID = item.text() 
```

我没用过`currentRow`，`currentColumn`因为你想在`click`. 这个函数记录[在这里](http://srinikom.github.com/pyside-docs/PySide/QtGui/QTableWidget.html#PySide.QtGui.PySide.QtGui.QTableWidget.cellClicked)（抱歉，我更喜欢 pyside - 它与 PyQT 几乎相同）。还要注意`itemAt`，而不是仅仅`item`- 因为您将在单元格中获得项目，而不是它的内容。使用 的`.text()`功能`QTableWidgetItem`获取内容。

注意 - 这是使用“插槽和信号”，特别是“新样式”。当您使用 PyQT4 和 Python 3 时，您应该对“新东西”没有任何问题:-)

您可能会考虑浏览插槽和信号[教程](http://eli.thegreenplace.net/2011/04/24/new-style-signal-slot-connection-mechanism-in-pyqt/)- 这可能会理顺这些抽象概念中的一些。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-29T14:58:43.930

这是对我有用的代码：

```
def get_selected_cell_value():
    current_row = self.sold_items_details_table.currentRow()
    current_column = self.sold_items_details_table.currentColumn()
    cell_value = table.item(current_row, current_column).text() 
```

# c# - 应跳过数据表中的重复项

> ID：14588484
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:18:17.193
> 
> 标签：c#, datatable, dataset

下面是输入文本文件。我通过数据表访问它，如下面的代码所示。

输入文件有以下数据：

```
ABC
D
E
F
1234
2345
2345
BAC
A
B
C
2345
ABC
D
E
F
12345 
```

我想得到以下输出：

```
ABC
D
E
F
1234
2345
2345
12345
BAC
A
B
C
2345 
```

这是我试图通过数据表或数据集获得上述输出的代码。

```
class Program
{
    private string dirCSV = @"C:\Prod.txt";
    // load the file in the data in the data set
    public DataSet loadCVS()
    {
        DataSet ds = new DataSet();
        try
        {

            string connString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=Text;", Path.GetDirectoryName(dirCSV));
            OleDbConnection conn = new OleDbConnection(connString);
            conn.Open();
            OleDbDataAdapter DA = new OleDbDataAdapter("SELECT * FROM Prod.txt", conn);
            DataTable DT = new DataTable();
            DA.Fill(DT);
            DT.DefaultView.Sort = "Item/Variant ASC";
            conn.Close();
        }     
        catch (Exception e){ /*Error*/}

        return ds;
    }
} 
```

这里会用到：

```
static void Main(string[] args)
{
    Program obj = new Program();
    obj.loadCVS();
} 
```

但是，我在数据表中获得了数据，但无法对日期进行排序，如上述格式的输出中所示。

你能帮忙吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:41:59.840

**为了避免重复记录，只需`Distinct`在您的查询中使用** ***它就会给出不同的记录......***

```
SELECT Distinct FieldName from Prod.txt 
```

**如果要删除 DATA TABLE 中的重复项，请尝试以下代码**

```
conn.Open();
OleDbDataAdapter DA = new OleDbDataAdapter("SELECT * FROM Prod.txt", conn);
DataTable DT = new DataTable();
DA.Fill(DT);
DT.DefaultView.Sort = "Item/Variant ASC";
Hashtable tempTable = new Hashtable();
ArrayList duplicateList = new ArrayList();
foreach (DataRow drow in DT.Rows)
 {
  if (tempTable.Contains(drow[yourcolName]))
     duplicateList.Add(drow);
  else
     tempTable.Add(drow[colName], string.Empty); 
 }
//Removes the duplicates from Datatable...
foreach (DataRow dRow in duplicateList)
  DT.Rows.Remove(dRow);

ds.Tables.Add(DT);
conn.Close(); 
```

# c# - 确定 IIS 请求的响应时间

> ID：14588491
> 
> 赞同：2
> 
> 时间：2013-01-29T17:18:47.810
> 
> 标签：c#, web-services, iis

我们有一个由第三方调用的 Web 服务。第三方的规则是服务必须在 10 秒内返回响应。

我们记录所有的处理时间，从我们收到请求到 web 方法退出。

我们的问题：我们的第三方告诉我们我们需要超过 10 秒，但根据我们的日志，我们在时限内很好地完成了处理。

我怀疑第三方存在连接问题，并且在我们完成处理后时间丢失了，但响应正在通过网络传输。我们的应用程序内日志记录无法捕获该时间（据我所知），因为我们的 Web 方法已经返回。

是否有任何我们可以使用的 IIS 日志记录功能来捕获返回响应所花费的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T02:52:34.563

日志中的 time-taken 条目说明了客户端将确认发送回服务器或重置连接所需的时间。

[http://blogs.msdn.com/b/mike/archive/2008/11/13/time-vs-time-taken-fields-in-iis-logging.aspx](http://blogs.msdn.com/b/mike/archive/2008/11/13/time-vs-time-taken-fields-in-iis-logging.aspx)

您还需要使用 win32-status 来确定何时出现问题。

# java - 如何使用 GWTQuery-UI

> ID：14588495
> 
> 赞同：1
> 
> 时间：2013-01-29T17:18:58.180
> 
> 标签：java, gwt, gwtquery

我试图理解 GWTQuery 是如何工作的，因为我正在尝试使用`slider`. 根据[Google](http://gwtquery-ui.googlecode.com/svn/demos/GwtQueryUi.html)的文档（`slider`选项卡位于左下角），并使用`AbstractSliderDemo`来自[此处](http://code.google.com/p/gwtquery-ui/source/browse/trunk/samples/src/main/java/gwtquery/samples/client/sliders/AbstractSliderDemo.java)的类，而后者又实现了[此处](http://code.google.com/p/gwtquery-ui/source/browse/trunk/samples/src/main/java/gwtquery/samples/client/Demo.java)`Demo`定义的接口，我只包含：`onModuleLoad`

```
Label e = $("#slider").widget();
Query q = new Query();
q.setupDemoElement(e.getElement()); 
```

但是在页面加载时，它会引发 NullPointer 异常。谁能指导我如何使用它。可能我在这里遗漏了一些东西。（我已将 GWTQuery 和 GWTQuery-UI jar 文件添加到构建路径，以及包含`<inherits name='gwtquery.plugins.Ui' />`在 XML 文件中）。

![在此处输入图像描述](../Images/ba23ea3a010218b9b009565610cef0b4.png)

这是我的项目的目录结构：

![在此处输入图像描述](../Images/285e05462ea8a637d9ba4f774e9a1ab7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:15:44.303

GwtQuery-Ui 只是 jquery-ui 的一个包装器。这意味着您需要注入 jquery 和 jquery-ui javascript 文件。查看[入门指南](http://code.google.com/p/gwtquery-ui/wiki/GettingStarted)og GwtQuery-ui

# c# - 在 .NET 3.5 中使用 URI 类时保持 url 编码

> ID：14588497
> 
> 赞同：5
> 
> 时间：2013-01-29T17:18:59.910
> 
> 标签：c#, .net, uri

我正在使用 .NET 3.5。

[此处](https://stackoverflow.com/questions/11034569/keep-url-encoded-while-using-uri-class/14581351#14581351)描述的两种解决方案（配置文件中的属性`"genericUriParserOptions"`和构造函数参数`"dontEscape"`）都不适用于 .NET 3.5。

我希望`URI`构造函数不会逃避（意味着我想要逃避`URL`部分）任何东西。现在我不能使用配置文件

```
genericUriParserOptions="DontUnescapePathDotsAndSlashes" 
```

因为此属性仅适用于 .NET 4.0。但我也不能`"dontEscape"`在构造函数中使用参数，`URI`因为构造函数在 .NET 3.5 中已过时并且始终为`false`.

如何`URI`在 .NET 3.5 中创建带有转义字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T14:16:32.053

**您应该只对用户名或 URL 中可能无效的其他部分进行编码。URL 编码 URL 可能会导致问题，因为这样的事情**：

```
string url = HttpUtility.UrlEncode("http://www.google.com/search?q=Example"); 
```

将产生

```
http%3a%2f%2fwww.google.com%2fsearch%3fq%3dExample 
```

这显然不会很好地工作。相反，您应该只对查询字符串中的键/值对的值进行编码，如下所示：

```
string url = "http://www.google.com/search?q=" + HttpUtility.UrlEncode("Example"); 
```

谢谢。

# functional-programming - SML 柯里化（功能编）？

> ID：14588498
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:19:05.910
> 
> 标签：functional-programming, sml, currying, fold

几天前我问过这个问题，但现在我对这个问题有了更多的了解。但是我仍然遇到操作员和操作数不同意的问题：

使用 ListPair.foldr 我需要创建一个函数 zipWith 组合成对的两个列表。整体函数的类型应该是：

```
zipWith : ('a * 'b -> 'c) -> 'a list -> 'b list -> 'c list

ListPair.foldr : ('a * 'b * 'c -> 'c) -> 'c -> 'a list * 'b list -> 'c

- zipWith (fn (x, y) => x + y) [1,2,3,4] [10,20,30,40];
  val it = [11,22,33,44] : int list 
```

我的尝试：

```
fun zipWith xs ys = ListPair.foldr(zipWith(x,y,z) => (x+y)::z) 0 xs ys 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:33:38.873

您的尝试有几处错误：

1.  参数。你有`zipWith xs ys`，但是类型说第一个参数必须是一个函数，所以把它改成`zipWith f xs ys`.
2.  您正在递归调用 zipWith 。不过，ListPair.foldr 会为您处理这些，所以不要这样做。
3.  您将 ListPair.foldr 0 作为其起始值。折叠函数总是采用*与返回值相同类型的起始值*- 我们希望 zipWith 返回一个列表，因此折叠函数应该将一个列表作为其起始值。空列表，即。

想想 ListPair.foldr 是如何工作的。我们可以一次做一个参数。ListPair.foldr 的类型是：

```
fn : ('a * 'b * 'c -> 'c) -> 'c -> 'a list * 'b list -> 'c 
```

第一个参数是一个函数类型：

```
fn : 'a * 'b * 'c -> 'c 
```

让我们以一个玩具函数为例：

```
fun foo (a, b, acc) = a+b :: acc 
```

此函数接受两个数字和一个列表，将两个数字相加，将它们放在列表的前面，然后返回它。类型是：

```
fn : int * int * int list -> int list 
```

这与 ListPair.foldr 的第一个参数中的类型签名很好地对应。

现在，让我们看看`ListPair.foldr foo`.

```
fn : int list -> int list * int list -> int list 
```

下一个参数是一个 int 列表 - 折叠的起始值。太好了，我们已经发现这是一个空列表。的类型`ListPair.foldr foo []`是：

```
fn : int list * int list -> int list 
```

最后一个参数是一个包含两个列表的元组。我们放入一些随机列表，并在 sml 解释器中进行尝试：

```
- ListPair.foldr foo [] ([1,2,3],[10,20,30])
> val it = [11, 22, 33] : int list 
```

现在，您需要做的就是用来自 zipWith 的参数替换 ListPair.foldr 的参数（foo 和两个随机列表），然后就完成了。

# c - Cortex R5 - 启动代码

> ID：14588501
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:19:13.397
> 
> 标签：c, gcc, embedded, arm, gnu

cortex r5 处理器的启动和链接器文件中包含什么？在对处理器进行重置后，我们需要遵循哪些确切步骤？（特定于 cortex r5）知道如何为 GNU-GCC for arm 执行此操作吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:55:10.237

您可以下载声称包含 Cortex R5 裸机启动代码的[DS-5 （我自己没有检查）。](http://ds.arm.com/downloads/)

来自 DS-5 的[变更日志](http://ds.arm.com/developer-resources/ds-5-development-studio-changelog/)

> > 示例：为 Cortex-R5(F) 处理器添加的裸机启动代码，包括向量表、异常处理程序、MPU、缓存、TCM 和 VFP 初始化，基于 Versatile Express R5x2 平台：startup_Cortex-R5

# html - 内联块浮动元素布局在调整窗口大小时搞砸了

> ID：14588502
> 
> 赞同：0
> 
> 时间：2013-01-29T17:19:20.723
> 
> 标签：html, css-float, percentage, css

我有 2 个 50% 的 div，里面有 2 个按钮。每个按钮都需要左右对齐。问题是，如果我应用浮动，布局会在调整窗口大小时变得疯狂。没有浮动元素可以很好地包裹，但两个按钮都只向左对齐。

这是jsfiddle：http: [//jsfiddle.net/dominicm/pcYhL/15/](http://jsfiddle.net/dominicm/pcYhL/15/)

如何在保持漂亮的调整大小布局的同时将一个按钮左对齐和另一个右对齐？

HTML：

```
<div class="menu">
<div id="www">
<input class="delAll" type="checkbox"><label class="delLabel" for="del-all">Delete</label>
<input class="pubAll" type="checkbox"><label class="pubLabel" for="pub-all">Publish</label>
<div>
<div id="d">
<input class="delete" type="submit" value="Delete Selected">
<input class="collapse" type="button" value="Collapse All">
</div>
<div id="p">
<input class="expand" name="expand" type="button" value="Expand All">
<input class="update" type="submit" value="Update Selected">
</div>
</div> 
```

CSS：

```
.menu{
    width:100%;
    height:80px;
    border-radius:7px;
    background-color:#666;
    text-align:center;
}
#www{
    width:100%;
    display:inline-block;
    background-color:yellow;
}
.delAll, .delLabel{

}
.pubAll, .pubLabel{

}

#d{
    width:50%;
    display:inline-block;
    background-color:red;
    min-width:140px;
    text-align:left;
}
#p{
    width:50%;
    display:inline-block;
    background-color:green;
    min-width:140px;
     text-align:right;
}

.delete{
    width:140px;
    margin-right:auto;
}
.update{
    margin:0;
    padding:0;
    width:140px;
}
.collapse{
    width:140px;
    float:right;
}
.expand{
    width:140px;
        float:left;
} 
```

# c# - 无法执行显式强制转换

> ID：14588504
> 
> 赞同：5
> 
> 时间：2013-01-29T17:19:27.283
> 
> 标签：c#, generics, activator

你能在这段代码中解释一下为什么：

```
private Dictionary<Type, Type> viewTypeMap = new Dictionary<Type, Type>();

public void ShowView<TView>(ViewModelBase viewModel, bool showDialog = false)
    where TView : IView
{
    var view = Activator.CreateInstance(viewTypeMap[typeof(TView)]);
    (IView)view.ShowDialog();
} 
```

我得到错误：

> “只有赋值、调用、递增、递减和新对象表达式可以用作语句。”

IView 定义了 ShowDialog() 方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T17:21:35.017

强制转换运算符的优先级低于成员访问运算符。

```
(A)B.C(); 
```

被解析为

```
(A)(B.C()); 
```

这不是法律声明。你应该写

```
((A)B).C(); 
```

如果您要转换`B`为`A`然后调用`C()`type `A`。

供您将来参考，优先级表在这里：

[http://msdn.microsoft.com/en-us/library/aa691323(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa691323(v=VS.71).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:26:37.960

为什么不尝试以下方法，以便将您的视图对象声明为 IView 而不是对象？

```
public void ShowView<TView>(ViewModelBase viewModel, bool showDialog = false) where TView : IView
{
    var view = (IView)Activator.CreateInstance(viewTypeMap[typeof(TView)]);
    view.ShowDialog();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:26:21.137

您可以在实例化时对其进行转换，然后如果多次使用它，则无需每次都重新转换它。

```
var view = (IView)Activator.CreateInstance(viewTypeMap[typeof(TView)]);
view.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T17:23:13.857

改变

```
(IView)view.ShowDialog(); 
```

到

`((IView) view).ShowDialog();`

埃里克解释了原因

# excel - 通过检查工作簿中的工作表名称来关闭用户窗体

> ID：14588505
> 
> 赞同：0
> 
> 时间：2013-01-29T17:19:30.487
> 
> 标签：excel, vba

通过使用命令按钮，可以通过检查工作簿中是否存在特定工作表名称来关闭用户窗体

```
Private Sub Close1_Click()
' Protect and Hide

 Dim ws As Worksheet

    For Each ws In ThisWorkbook.Sheets
        If InStr(1, ws.Name, "FSS-TEM-00025") Then
            (ws.Name, "FSS-TEM-00025" ).Select
            ActiveSheet.Protect DrawingObjects:=True, Contents:=True, Scenarios:=True
            ActiveWindow.SelectedSheets.Visible = False
            Unload Me
        Else
            Unload Me
        End If
    Next

    'Unload Me
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:41:09.103

这将起作用。在 If... 之后，您没有正确使用 ws 引用

```
Private Sub Close1_Click()
' Protect and Hide

Dim ws As Worksheet

For Each ws In ThisWorkbook.Sheets
    If InStr(1, ws.Name, "FSS-TEM-00025") Then
        ws.Select 'this line is different
        ActiveSheet.Protect DrawingObjects:=True, Contents:=True, Scenarios:=True
        ActiveWindow.SelectedSheets.Visible = False 'hides the activesheet
        Unload Me
    End If
Next

'Unload Me
End Sub 
```

而不是选择然后使用活动表：

```
ws.Select 'this line is different            
ActiveSheet.Protect DrawingObjects:=True, Contents:=True, Scenarios:=True 
```

只能是

```
ws.Protect DrawingObjects:=True, Contents:=True, Scenarios:=True 
```

# xslt - 不在我的 XSLT 中添加新行

> ID：14588509
> 
> 赞同：2
> 
> 时间：2013-01-29T17:19:36.377
> 
> 标签：xslt, newline

我不确定为什么我的 xslt 不会在我的输出中添加新行......这是我的 xslt....

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:output method="text" encoding="iso-8859-1"/>
  <xsl:variable name="newline"></xsl:variable>
  <xsl:template name="FairWarningTransform" match="/">    <!--@* | node()">-->

          <xsl:for-each select="//SelectFairWarningInformationResult">  

                <xsl:value-of select="ApplicationID"/>,<xsl:value-of select="USERID"/>
                &#10;
          </xsl:for-each>

        * Note.  This report outlines Fair warning entries into reported for the above time frame.

      </xsl:template>
</xsl:stylesheet> 
```

这是我的输出...

```
1,TEST1,test2, 
```

我希望它看起来像...

```
1,TEST
1,test2, 
```

为什么这个角色不创建换行符

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T17:22:03.807

尝试更换

```
&#10; 
```

和

```
<xsl:text>&#10;</xsl:text> 
```

这有助于 XSLT 将其与样式表中的其他空白区区分开来，后者是样式表格式的一部分（不是所需输出的一部分）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T17:25:53.690

XSLT 的默认行为是忽略样式表中完全为空白的任何文本节点（即使某些空白被编码为像 之类的实体也是如此`&#10;`），但保留了内部的文本除外`<xsl:text>`。

我建议替换这些行：

```
<xsl:value-of select="ApplicationID"/>,<xsl:value-of select="USERID"/>
&#10; 
```

有了这个：

```
<xsl:value-of select="concat(ApplicationID, ',', USERID, '&#10;')"/> 
```

这样，应该确保换行符包含在输出中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:24:32.773

尝试将其用作换行符而不是转义字符：

```
<xsl:text>
</xsl:text> 
```

# javascript - 从浏览器打印时jQuery是否运行？

> ID：14588511
> 
> 赞同：2
> 
> 时间：2013-01-29T17:19:42.127
> 
> 标签：javascript, jquery, css, printing

选择从浏览器打印后，我在呈现的模板页面上运行以下代码：

```
<script type="text/javascript">
$(function() {
    $("td:contains('Labour')").next("td").addClass("white");
    var thisTr = $("td:contains('Labour')").parent();
    thisTr.children().eq(2).addClass("white");
    thisTr.children().eq(3).addClass("white");
});
</script> 
```

CSS：

```
 @media print {
      body           { margin:auto; }
      .section       { page-break-inside:avoid; }
      div#sfWebDebug { display:none; }
      .white {color: white;}
    } 
```

我检查了代码，它在普通浏览器窗口中工作：http: [//jsfiddle.net/elen/vArH8/](http://jsfiddle.net/elen/vArH8/)

但是该`white`课程似乎不适用于弹出窗口以进行打印。我在 Chrome 和 Firefox 中尝试过。

浏览器是否允许在打印时运行 JavaScript？

* * *

回答我自己的愚蠢问题 - 如果我先将 jquery 插件添加到模板中会有所帮助！

以下代码完美运行：

```
<script type="text/javascript">
$(document).ready(function() {
    var thisTr = $("td:contains('Labour')").parent();
    thisTr.children().eq(1).empty();
    thisTr.children().eq(2).empty();
    thisTr.children().eq(3).empty();
    window.print();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:32:42.477

这不是 javascript 的问题，只是打印机不打印白色。它通常会丢弃 CSS 以使内容更具可读性。

您只想隐藏这些字段吗？您可以使用 .empty() 方法更轻松地实现这一目标。

# objective-c - NSPredicate 过滤嵌套的 CoreData 模型

> ID：14588512
> 
> 赞同：1
> 
> 时间：2013-01-29T17:19:42.670
> 
> 标签：objective-c, core-data, nspredicate

我有一个 CoreData 模型，如下所示：

国家 <---->>> 城市（一对多关系）

作为节/行结构列在 UITableView 中，即

===埃及===
开罗
亚历山大
Luxur
Ra​​s AlBar
。
.

===卡塔尔===
多哈
。
.
.

现在我有 UISearchBar 应该允许用户根据**国家名称或城市名称中输入的单词的存在来过滤 TableView**

因此，如果用户插入*“ar”*，则应显示以下内容：

===埃及===
拉斯阿尔巴
===卡塔尔===
多哈
。
.
.

在 CoreData 中找不到任何最佳查询来实现我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:24:45.453

你应该`NSFetchedResultsController`为此使用一个。您没有提及您是否是，但它可以更容易地显示`CoreData`到`TableView`.

无论如何，你的取货`NSFetchedResultsController`应该在城市上。不是国家。（同样，你没有说它是什么，但以防万一）。

所以你可以使用的谓词是......

```
NSPredicate *cityPredicate = [NSPredicate predicateWithFormat:@"name [cd]CONTAINS %@", text];
NSPredicate *countryPredicate = [NSPredicate predicateWithFormat:@"country.name [cd]CONTAINS %@", text];

NSPredicate *compoundPredicate = [NSCompoundPredicate orPredicateWithSubPredicates:@[cityPredicate, countryPredicate]]; 
```

然后，当您使用`compoundPredicate`fetch 时，您将获得所需的内容。

**如何设置你的 NSFetchedResultsController**

在您的**CountryTableViewController.m**文件中

**1** - 创建属性...

```
@property (nonatomic, strong) NSFetchedResultsController *fetchedResultsController;
@property (nonatomic, strong) NSManagedObjectContext *managedObjectContext; 
```

**2** - 从您的源中获取托管对象上下文...

```
self.managedObjectContext = [(AppDelegate*)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

**3** - 添加此方法...

```
#pragma mark - fetched results controller

- (NSFetchedResultsController*)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"City"];
    [request setFetchBatchSize:20];

    NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"country.name" ascending:NO];

    [request setSortDescriptors:[NSArray arrayWithObject:sd]];

    NSFetchedResultsController *aController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"country.name" cacheName:nil];

    aController.delegate = self;
    self.fetchedResultsController = aController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    return _fetchedResultsController;
} 
```

**4** - 对于过滤表的方法...

```
- (void)filterResultsWithText:(NSString*)text
{
    NSPredicate *cityPredicate = [NSPredicate predicateWithFormat:@"name [cd]CONTAINS %@", text];
    NSPredicate *countryPredicate = [NSPredicate predicateWithFormat:@"country.name [cd]CONTAINS %@", text];

    NSPredicate *compoundPredicate = [NSCompoundPredicate orPredicateWithSubPredicates:@[cityPredicate, countryPredicate]];

    [self.fetchedResultsController.fetchRequest setPredicate:compoundPredicate];

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Handle error
        //exit(-1);
    }

    [self.tableView reloadData];
} 
```

**5** - 显示数据

现在这将设置您的数据，您不再需要任何数组。

要显示它，您可以...

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
    return [sectionInfo numberOfObjects];
}

- (NSString*)tableView:(UITableView*)tableView titleForSection:(NSInteger*)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
    return [sectionInfo title];
} 
```

要在索引路径上获取国家/地区，您可以这样做...

```
Country *country = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

这将返回该索引路径处的国家/地区。

有一点需要设置，但是一旦你完成了它，你就会明白为什么它如此简单。

# c# - 如何在 Mono 中使用 XDocument 类

> ID：14588515
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:19:52.513
> 
> 标签：c#, linq, mono, unity3d, linq-to-xml

我正在尝试`XDocument`在.`Unity3D``Windows 7`

我做了以下事情：

*   添加了对`System.Xml.Linq`Mono 项目的引用。
*   包括命名空间：

    ```
    using System.Xml.Linq; 
    ```

*   将目标框架设置为：`Mono/.NET 3.5`
*   清理并重建项目

但仍然`Unity3D`抱怨它。这是控制台中的错误输出：

> Assets/Scripts/Editor/RoadManager/RoadManager.cs(3,18)：错误 CS0234：命名空间“System.Xml”中不存在类型或命名空间名称“Linq”。您是否缺少程序集参考？

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:22:46.960

这已经[讨论过](https://stackoverflow.com/questions/4912432/unity3d-and-system-xml-linq) [很多](http://forum.unity3d.com/threads/86428-Can-t-find-System.Linq.Xml) [次](http://answers.unity3d.com/questions/210822/problem-with-systemxmllinq.html?sort=oldest) [了](http://answers.unity3d.com/questions/46039/can-not-reference-systemxmllinq.html)，但是这些答案中很少有完整的。

如前所述，Unity3d 最高只支持 .NET 2.0 版本，而且似乎 System.Xml.Linq 是在 .NET 3.5 中引入的，而且它没有在任何地方的[Unity3d 兼容性列表中列出](http://docs.unity3d.com/Documentation/ScriptReference/MonoCompatibility.html)。

~~唯一要尝试的是将 Mono API 兼容级别设置为 2.0（菜单：编辑 > 项目设置 > 播放器并查看其他设置面板），但对于 Linq2SQL 来说，这似乎是一个错误的解决方案。~~

另一种可能的解决方案是自己将 DLL 添加到 Unity 编辑器中，如下所示：

> 尝试将 C:\Program Files (x86)\Unity\Editor\Data\Mono\lib\mono\2.0\System.Xml.Linq.dll 文件拖动到统一项目窗口中，就像拖动纹理或其他游戏资产一样。

如果这些都没有为您带来任何运气，那么**恐怕您不走运。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:23:34.007

Unity3D 仅支持 .Net 2.0，因此在 MonoDevelop/Visual Studio 中将兼容性设置为 .net 3.5 将不起作用。你将不得不在没有课程的情况下凑合。这显示了可用的库类：

[http://docs.unity3d.com/Documentation/ScriptReference/MonoCompatibility.html](http://docs.unity3d.com/Documentation/ScriptReference/MonoCompatibility.html)

另请参阅 UnityAnswers 中的这篇文章：http: [//answers.unity3d.com/questions/46039/can-not-reference-systemxmllinq.html](http://answers.unity3d.com/questions/46039/can-not-reference-systemxmllinq.html)

# c - 我如何摆脱这个c程序中的提示？

> ID：14588523
> 
> 赞同：1
> 
> 时间：2013-01-29T17:20:13.830
> 
> 标签：c, unix

```
#include <stdio.h>

int main() {
FILE *f ;
f = popen("passwd mukesh","w");
fprintf(f,"c\n");
fprintf(f,"c\n");
pclose(f);
} 
```

有什么办法可以摆脱提示并使用程序本身传递密码

更具体地说，作为`a.out`可执行文件的参数。

**编辑：或者这样的东西也不起作用：**

```
#include <unistd.h>   /* crypt(), etc.          */
#include <pwd.h>      /* getpass(), getpwnam(). */
#include <string.h>   /* strcmp(), etc.         */

void
main()
{
    /* buffers for reading in the user name and the password. */
    char user[21];
    char* password;
    /* storing the encrypted password, and the salt. */
    char* encrypted_password;
    char salt[2];
    /* user's "/etc/passwd" entry. */
    struct passwd* user_info;

    /* prompt the user for a user name. */
    printf("User name: ");
    fflush(stdout); /* flush the prompt to make sure the user sees it. */
    fgets(user, 20, stdin);
    /* fgets() stores also the new-line that the user typed in. so we */
    /* need to locate the new-line character, and truncate it.        */
    if (strchr(user, '\n'))
    (*(strchr(user, '\n'))) = '\0';

    /* prompt the user for their password. the getpass() function  */
    /* prints the given prompt, turns off echo (so the password    */
    /* typed won't be seen on screen), and returns the string that */
    /* the user types.                                             */
    password = getpass("Password: ");

    /* find the user's encrypted password, as stored in "/etc/passwd". */
    user_info = getpwnam(user);
    if (!user_info) {
        printf("login incorrect.\n");
        exit(1);
    }

    /* take the salt as stored in the password field of the user. */
    strncpy(salt, user_info->pw_passwd, 2);

    /* encrypt the given password using the found "salt". */
    encrypted_password = crypt(password, salt);

    /* compare the results of crypt, with the user's stored password field. */
    if (strcmp(user_info->pw_passwd, encrypted_password) != 0) {
        printf("login incorrect.\n");
        exit(1);
    }

    /* authentication succeeded... */
    printf("login successful.\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:27:25.343

你不能使用 passwd，但你可以使用带有 -p 标志的**usermod 。**从**man usermod**，

```
-p, --password PASSWORD
       The encrypted password, as returned by crypt(3).

       Note: This option is not recommended because the password 
 (or encrypted password) will be visible by users listing the processes. 
```

# javascript - Q.js 进度处理程序似乎没有触发

> ID：14588525
> 
> 赞同：1
> 
> 时间：2013-01-29T17:20:16.820
> 
> 标签：javascript, coffeescript, promise, q

我目前正在使用 Q.js 作为 Promise，因为它们实现了进度处理程序。然而，他们似乎并没有开火。我究竟做错了什么？它看起来很基本，所以我一定遗漏了一些东西。（下面的例子是用coffeescript写的）

```
Q = require('q')
squares = (list) ->
  deferred = Q.defer()
  result = list.map (e) ->
    r = e * e
    deferred.notify(r)
    return r
  deferred.resolve(result)
  return deferred.promise

squares([1,2,3,4,5,6,7,8,9,10])
  .then((result) ->
    console.log result
  ).progress((e) ->
    console.log e
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:26:25.460

`squares`同步执行，因此`deferred.notify`在`deferred.resolve`绑定任何侦听器之前调用。似乎已经实现的承诺仍然调用`fulfilled`回调，但没有任何`progress`回调。您可以像这样包装部分代码`setTimeout`：

```
Q = require('q')

squares = (list) ->
  deferred = Q.defer()
  setTimeout (->
    result = list.map (e) ->
      r = e * e
      deferred.notify(r)
      return r
    deferred.resolve(result)
    ), 0
  return deferred.promise

squares([1,2,3,4,5,6,7,8,9,10])
  .progress((e) ->
    console.log e
  ).then((result) ->
    console.log result
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T02:12:07.097

github上的这个讨论线程：OP和包维护者之间的[https://github.com/kriskowal/q/issues/188提供了详细的解释和解决方案。](https://github.com/kriskowal/q/issues/188)

总之，侦听器必须`.progress`在承诺者调用 之前通过调用来注册`.notify`。这意味着承诺者同步调用通知的示例可能会在`.progress`侦听器注册之前发生，因此该示例将出现故障。@bennedich 提供的 addTimeout 解决方案满足了这个要求。

此排序要求与在 promiser 调用`.then` *后*`.resolve`通过调用注册的侦听器的体验不一致。在这种情况下，尽管排序，仍会调用侦听器。但是要在之后调用该侦听器，Q 包必须执行*魔术*（请参阅戴巫师帽的家伙：[https](https://github.com/kriskowal) ://github.com/kriskowal ）。故意不为听众提供相同的魔法，`.progress`因此在这个和以前的答案中提到的排序要求。

高温高压

# windows - 如何在 eclipse/windows 中查找缺少所需字符串的文件？

> ID：14588533
> 
> 赞同：0
> 
> 时间：2013-01-29T17:20:41.990
> 
> 标签：windows, eclipse

是否有工具可以帮助我标记或列出目录中不包含特定字符串的所有文件（通常是代码文件，如 java、xml、sql 等）。

例如：我需要一个项目中不包含“作者”一词的所有文件的列表（文本可以是任意的）。

我在[这里](https://stackoverflow.com/questions/3231446/how-to-find-file-that-is-missing-a-required-string)看到了一个类似的问题，但它适用于 OS-X 而不是 Windows/eclipse 平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:41:23.043

一种简单的方法是制作树的副本，找到包含该单词的所有文件，然后将其删除。其余文件是不包含该单词的文件。

# crm - 将 ActiveXObject 转换为 Fetch 对象

> ID：14588534
> 
> 赞同：0
> 
> 时间：2013-01-29T17:20:50.393
> 
> 标签：crm, fetch, microsoft-dynamics, jscript

我正在使用 CRM Dynamics。有一个 JavaScript 使用 ActiveXObject 来解析请求，但我需要将其转换为 Fetch Request。

旧代码是这样的：

```
function fnSetStateActiveQuoteRequest() {
var xml = "" +
"<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
"<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">" +
GenerateAuthenticationHeader() +
"  <soap:Body>" +
"    <Execute xmlns=\"http://schemas.microsoft.com/crm/2007/WebServices\">" +
"      <Request xsi:type=\"SetStateQuoteRequest\">" +
"        <EntityId>" + Xrm.Page.data.entity.getId() + "</EntityId>" +
"        <QuoteState>Active</QuoteState>" +
"        <QuoteStatus>2</QuoteStatus>" +
"      </Request>" +
"    </Execute>" +
"  </soap:Body>" +
"</soap:Envelope>" +
"";

var xmlHttpRequest = new ActiveXObject("Msxml2.XMLHTTP");

xmlHttpRequest.Open("POST", "/mscrmservices/2007/CrmService.asmx", false);
xmlHttpRequest.setRequestHeader("SOAPAction", "http://schemas.microsoft.com/crm/2007/WebServices/Execute");
xmlHttpRequest.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
xmlHttpRequest.setRequestHeader("Content-Length", xml.length);
xmlHttpRequest.send(xml); 
```

我正在尝试将其转换为：

```
var _oService; 
var _sOrgName = "myOrg"; 
var _sServerUrl = Xrm.Page.context.getServerUrl();
function fnSetStateActiveQuoteRequest(){
var sFetch = '<fetch mapping="logical">';
 sFetch+=  '<entity name='+Xrm.Page.data.entity.getId()'>';
 sFetch+=  '</filter>';
 sFetch+=  '</entity>';
 sFetch+= '</fetch>';

 _oService = new FetchUtil(_sOrgName, _sServerUrl);
 var oEntity = _oService.Fetch(sFetch, myCallBack); 
} 
```

但我不知道如何声明 Request> 和 QuoteState>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:07:40.103

您遇到的问题是您正在查看的第一个 XML 是执行请求的序列化版本。Fetch 更像是一种查询语言，因此您的编写方式略有不同。

弄清楚 fetch xml 需要是什么样子的最简单方法是打开高级查找并手动执行搜索。高级查找为您提供了一个“下载 Fetch XML”按钮，为您省去编写所有 fetch 的麻烦！

因此，旧查询看起来像是在尝试返回实体“X”的所有记录，其中它处于活动状态并且状态原因为 2。如果我在高级查找中编写类似的内容（假设我正在寻找机会）我的查询可能如下所示：

```
<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='false'>
  <entity name='opportunity'>
    <attribute name='name' />
    <attribute name='customerid' />
    <attribute name='estimatedvalue' />
    <attribute name='opportunityid' />
    <order attribute='name' descending='false' />
    <filter type='and'>
      <condition attribute='statecode' operator='eq' value='0' />
      <condition attribute='statuscode' operator='eq' value='2' />
    </filter>
  </entity>
</fetch> 
```

这几乎是高级查找的下载获取 XML 的复制和粘贴。

# python - 试图搜索和替换“[”开头的方括号

> ID：14588535
> 
> 赞同：0
> 
> 时间：2013-01-29T17:20:51.070
> 
> 标签：python

我是python新手，所以如果这是一个愚蠢的问题，请原谅我：

我有一个 XML 文件，我正在执行一些搜索和替换。我需要替换的一件事是一个空格，后跟 [ 只是 [ （之前没有空格）。我尝试了以下但不断收到错误：

```
line = re.sub(' [','[',line) 
```

我假设它是因为方括号用于通配符，但我不知道语法应该是什么才能让它工作

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:22:52.190

这里根本不需要正则表达式。这会很好：

```
line = line.replace(' [', '[') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:22:51.227

您需要`[`使用反斜杠转义：

```
line = re.sub(r' \[','[',line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:23:37.007

```
>>> line=' [stuff]'
>>> re.sub(' \[','[',line)
'[stuff]' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:24:26.223

由于您使用`sub`的是正则表达式包，因此您需要转义括号，因为它用于表示正则表达式中的字符范围（例如 [az]）：

```
line = re.sub(' \[','[',line) 
```

# google-calendar-api - 自定义 Google 日历添加事件表单

> ID：14588537
> 
> 赞同：1
> 
> 时间：2013-01-29T17:20:54.390
> 
> 标签：google-calendar-api

是否可以使用 web 应用程序更改谷歌日历默认添加事件弹出窗口？我有一个独立的表单设置，当我让它工作时，它只有一堆表单字段，它们放在标题和说明中。

是否可以从日历应用程序内部调用该表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:25:17.427

我不认为您可以覆盖默认弹出窗口，除非您构建浏览器扩展，这与您使用 webapp 执行此操作的要求不兼容。

# css - 如何在图像下制作阴影？

> ID：14588539
> 
> 赞同：-2
> 
> 时间：2013-01-29T17:20:55.197
> 
> 标签：css

如何在不使用任何图像的情况下在图像下制作阴影以提供悬停效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:21:45.853

您使用 CSS 框阴影：

```
#example1 {
box-shadow: 10px 10px 5px #888;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:23:05.553

您可以使用 CSS3 完成此操作[`box-shadow`](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)，如下所示：

```
img {
    box-shadow: 10px 10px 10px #000;
} 
```

[JS 小提琴示例](http://jsfiddle.net/M4ukJ/1/)

[CSS3.info 教程](http://www.css3.info/preview/box-shadow/)

* * *

要使用 为图像提供“悬停效果” `box-shadow`，请使用[`:hover`](https://developer.mozilla.org/en-US/docs/CSS/%3ahover)选择器。

```
img:hover {
    box-shadow: 10px 10px 10px #000;
} 
```

[JS 小提琴示例](http://jsfiddle.net/M4ukJ/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:22:26.497

你可以这样做：

```
div {
  box-shadow: 10px 10px 5px #888888;
} 
```

# java - 使用 HBase 列还是使用 Avro 序列化数据更好？

> ID：14588540
> 
> 赞同：12
> 
> 时间：2013-01-29T17:20:59.840
> 
> 标签：java, hbase

我正在开发一个项目，该项目使用 HBase 存储用户的键/值信息。我们正在重新设计我们正在使用的 HBase 模式。正在讨论的两个选项是：

1.  使用 HBase 列限定符作为键的名称。这将使行宽，但非常稀疏。
2.  将所有数据转储到单个列中并使用 Avro 或 Thrift 对其进行序列化。

这两种方法的设计权衡是什么？一个比另一个更可取吗？他们有什么理由不使用 Avro 或 Thrift 存储数据吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T17:44:10.477

总之，我倾向于对每个键使用不同的列。

1）显然，您是在强加客户端使用 Avro/Thrift，这是另一个依赖项。这种依赖性意味着您可以消除某些工具的可能性，例如 BI 工具，它们希望在数据中找到值而不进行转换。

2) 在 avro/thrift 方案下，您几乎被迫将整个价值带到线上。根据一行中有多少数据，这可能无关紧要。但是，如果您只对“城市”字段/列限定符感兴趣，您仍然需要获取“付款”、“信用卡信息”等。这也可能会带来安全问题。

3) 如果需要，使用 Avro/Thrift 进行更新将更具挑战性。示例：您决定添加一个“hasIphone6”键。Avro/Thrift：您将被迫删除该行并使用添加的字段创建一个新行。在列方案下，将附加一个新条目，其中仅包含新列。对于单行，不大，但如果对十亿行执行此操作，则需要进行大的压缩操作。

4）如果已配置，您可以在 HBase 中使用压缩，这可能会超过 avro/thrift 序列化，因为它可以跨列族进行压缩，而不仅仅是针对单个记录。

5) 像 HBase 这样的 BigTable 实现非常适合非常宽、稀疏的表，因此不会像您预期的那样对性能造成影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-28T07:05:46.850

这个问题的正确答案有点复杂，所以我先给你 tl;dr。

**使用 Avro/Thrift/Protobuf**

您需要在记录与列中包含多少字段之间取得平衡。

您通常希望将经常访问的字段（原始问题中的“键”）一起放入 avro 记录之类的内容中，因为正如 cmonkey 所述，您不希望检索不会使用的额外数据的开销。

通过使行非常宽，由于 HFile 的存储方式，您将在获取列子集时增加查找时间。同样，确定什么是最佳的，取决于您的访问模式。

我还想指出，通过使用 avro 之类的东西，您还可以为自己提供可进化性。您不需要删除该行并使用包含新字段的记录重新添加它。Avro 有向后兼容和向前兼容的规则。这实际上使您的生活变得更加轻松，因为您可以读取新记录和旧记录，而无需重写数据或强制更新旧客户端代码。

您应该几乎总是在 HBase 中使用压缩（SNAPPY 始终是一个不错的选择）。

# jquery-plugins - 在树之间复制节点时，Jstree always_copy 不起作用

> ID：14588543
> 
> 赞同：1
> 
> 时间：2013-01-29T17:21:03.770
> 
> 标签：jquery-plugins, jstree, drag-and-drop

我真的被困在一个 jstree 问题上；我有两棵树，一棵“源”树和一棵“目的地”树。“源”树是一棵包含节点的扁平树，我希望将这些节点拖到“目标”树上来构建它。但是，在拖动之后，我需要保留这些节点，以便我可以重用它们。现在，如果我在拖动之前和拖动期间按下控制键，它将执行复制功能并离开源节点。但是，我不想让用户这样做；我希望树总是复制。这就是我使用此设置的原因，但它不适用于我的树。任何人都可以帮忙吗？这是导致此问题的代码，减去数据。谢谢！！

```
<script type="text/javascript">
    $(function () {
        $("#SourceTree").jstree({
            "json_data": {
                "ajax": {
                    "url": "Home/GetTree",
                    "type": "POST",
                    "contentType": "application/json; charset=utf-8",
                    "dataType": "json",
                    "data": function (n) {
                        var result = "{'id':'" + (n.attr ? n.attr("id").replace("node_", "") : "0") + "'}";                            
                        return (result);
                    }
                }
            },
            "crrm": {
                "move": {
                    "always_copy": "multitree",
                    // Do not allow a node move within this tree
                    "check_move": function () {
                        return false;
                    },
                }
            },
            "plugins": ["themes", "json_data", "ui", "types", "crrm", "dnd"]
        })

        $("#DestinationTree").jstree({
            "json_data": {
                "ajax": {
                    "url": "Home/GetTree",
                    "type": "POST",
                    "contentType": "application/json; charset=utf-8",
                    "dataType": "json",
                    "data": function (n) {
                        var result = "{'id':'" + (n.attr ? n.attr("id").replace("node_", "") : "0") + "'}";
                        return (result);
                    }
                }
            },
            "plugins": ["themes", "json_data", "ui", "types", "dnd", "crrm"]
        })
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:11:07.327

好的，我通过大量试验和错误弄清楚了：源树必须具有：1）“dnd”和“crrm”插件，如示例所做的那样 2）move.check_move 函数必须存在以及上面 3）我们不需要 move.always_copy，删除这个，这里不需要。

目标树必须有： 1) "dnd" & "crrm" 插件，如示例 2) 需要在此处添加 crrm.move.always_copy:true。“crrm”：{“移动”：{“always_copy”：真}}，

# javascript - Joomla！2.5 和 Virtuemart 2.0.18a $.facebox 未定义

> ID：14588551
> 
> 赞同：0
> 
> 时间：2013-01-29T17:21:33.500
> 
> 标签：javascript, jquery, joomla2.5, virtuemart, facebox

我正在使用 Joomla！2.5.8 和 Virtuemart 2.0.18a 并在添加到购物车时我得到“Typeerror $.facebox is undefined in vmprices.js (line 67)”。当我改变我的 Joomla！模板默认我丢失了这个错误。许多研究表明 jQuery 可以随时加载，但是当我禁用 VirtueMart jQuery 时，出现“jQuery 未定义”的错误。

我的网站是[http://bestgifs.am](http://bestgifts.am)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:01:16.277

原因是，您有多个由插件或模板包含的 jquery ..

facebox undefined 错误的最快修复方法是在关闭模板中的 body 标记之前包含此代码。

< script type="text/javascript" src="your_site_url/components/com_virtuemart/assets/js/facebox.js">

这个对我有用..

不要忘记从脚本标签中删除空格..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-31T19:53:58.340

它适用于 J1.5 + V2.0

# algorithm - 将一个整数数组分成两个大小相等的子数组？

> ID：14588553
> 
> 赞同：9
> 
> 时间：2013-01-29T17:21:37.370
> 
> 标签：algorithm, data-structures

我遇到了这个问题，找不到合理的解决方案。如何将未排序的整数数组划分为 2 个大小相等的子数组，以使子数组和之间的差异最小。

例如：给定一个整数数组 a[N]（未排序），我们希望将数组拆分为 a1 和 a2，其中 a1.length == a2.length 即 N/2 和（a1 中所有数字的总和 - a2) 中所有数字的总和应该是最小值。

为简单起见，我们假设所有数字都是正数，但可能会有重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:45:48.277

虽然其他人提到这是修改分区问题的一个案例，但我想更具体地说，它实际上是两台机器的[最小制造时间问题的一个特例。](http://en.wikipedia.org/wiki/Job_shop_scheduling)即，如果您解决两机制造时间问题并获得一个值`m`，您将获得最小差异`2*m - sum(i : i in arr)`

正如维基百科文章所述，对于超过 2 台机器，问题是 NP 完全的。但是，在您的情况下，通常提供近似答案的[List 调度算法](http://www.cse.hcmut.edu.vn/~ptvu/ppds/lec7.pdf)对于两台机器和三台机器的情况是最优的和多项式时间，给定一个非递增顺序的排序列表。

[有关此算法的详细信息以及更多理论结果，请参见此处](http://books.google.com/books?id=i3S9_GnHZwYC&lpg=PA455&ots=nCltodIuOy&dq=graham%20list%20scheduling%20algorithm&pg=PA455#v=onepage&q=graham%20list%20scheduling%20algorithm&f=false)。

# android - android向标题添加按钮（iOS外观）

> ID：14588555
> 
> 赞同：0
> 
> 时间：2013-01-29T17:21:39.197
> 
> 标签：android, android-layout, android-button

嘿，我正在尝试创建一个标题，中间有一个图像，右上角有一个按钮。

我发现这篇文章[如何在 android 中使用 iOS 中的文本和按钮制作标题](https://stackoverflow.com/questions/12815993/how-to-make-headers-in-android-with-text-and-buttons-like-in-ios)，以及以下教程[http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/](http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/)，我能够将图像放在中心并设置背景。但是，无论我做什么，我的按钮都不会出现在右上角。

我试图查看它是否被背景掩盖或者可能超出屏幕，但我找不到问题的原因。

我的 XML

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"> 
        <ImageView
            android:id="@+id/Header"
            android:src="@drawable/header"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#ff000000"
            android:layout_marginTop="5dp"
            android:gravity="center_horizontal"/>

                <Button
            android:id="@+id/lockButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="5.0dip"        
            android:text="TEST"
            />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:27:45.793

为什么不`relative`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/img_vs_navbar" >

<ImageView
    android:id="@+id/img_back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:src="@drawable/btn_setting_back" />

</RelativeLayout> 
```

`android:layout_centerInParent`你可以像这样使用它来把它放在中心。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/img_vs_navbar" >

    <ImageView
        android:id="@+id/img_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/btn_setting_back" />

</RelativeLayout> 
```

或者用`alignParentRight`把它放在右边

编辑：

这个是在一个xml中使用两个imageview

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/img_vs_navbar" >

    <ImageView
        android:id="@+id/img_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/btn_setting_back" />

    <ImageView
        android:id="@+id/img_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/btn_setting_back" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:38:30.043

试试这个 ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/Header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:background="#ff000000"
        android:gravity="center_horizontal"
        android:src="@drawable/header" />

    <Button
        android:id="@+id/lockButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="5.0dip"
        android:text="TEST" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:27:53.853

因为您的 ImageView 有一个 fill_parent 宽度，所以您需要为其添加一个权重属性。

```
android:layout_weight="1" 
```

如果您希望它跨越整行，您可以使用将 LinearLayout 更改为 RelativeLayout。

# wcf - 用于内部 Web 服务注册的工具/产品

> ID：14588556
> 
> 赞同：0
> 
> 时间：2013-01-29T17:21:43.027
> 
> 标签：wcf, web-services, registry, metadata, asmx

我们在交错的企业中有大量的 Web 服务 - asmx 和 WCF 服务。

我想以字典的形式集中有关它们的某些信息。信息

*   喜欢：它的作用 - 简单的英文版
*   部署在哪里
*   示例输入提要等...

有没有工具可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:27:50.963

您可以使用[WSO2 Governance Registry](http://wso2.com/products/governance-registry/)（免责声明：我与该公司没有任何关系）。

# c# - 更改子类型的函数的返回类型会破坏二进制兼容性吗？

> ID：14588558
> 
> 赞同：3
> 
> 时间：2013-01-29T17:21:51.707
> 
> 标签：c#, inheritance, binary-compatibility

让我们直接开始吧：

旧代码：

```
public interface IFoo {}
public class Foo : IFoo {}
...
public static IFoo Bar() { return new Foo(); } 
```

新代码：

```
public static Foo Bar() { return new Foo(); } 
```

显然这里应该没有问题，你在旧返回类型上所做的一切，你仍然可以在新返回类型上做， any`is`或`as`cast 应该和以前一样......

那么我是否破坏了二进制兼容性，或者我可以将其作为次要版本发布而不打扰用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:25:50.070

这会破坏二进制兼容性，但不会（大多数）编译时兼容性问题，因此它通常很容易迁移。

请注意，如果客户端代码从方法构造委托，它甚至可能是编译时中断。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T17:26:00.010

您可能会遇到围绕您的代码创建单元测试的人的问题。因为它是静态的，所以人们可以创建一个 FooAdapter，如下所示：-

```
public class FooAdapater(){ 
public IFoo GetFoo() { Return your static Bar; }
} 
```

然后他们可以创建一个模拟的 foo 适配器而不是返回一个模拟的 foo。您的代码会破坏这种情况。

所以，不，它不是二进制兼容的:-)

# ios - 在 iOS 中设置 CAGradient UIButton 的选定状态

> ID：14588560
> 
> 赞同：0
> 
> 时间：2013-01-29T17:21:53.260
> 
> 标签：ios, uibutton, subclass, cagradientlayer, uicontrolevents

嗨，我在我的一个视图控制器中使用角半径 CAGradientLayer 和边框颜色在代码中制作了一个自定义按钮，如下所示：

```
phoneButton = [CustomButton buttonWithType:UIButtonTypeCustom];
phoneButton.frame = CGRectMake(6, 363, 99, 48);
phoneButton.titleLabel.font = [UIFont fontWithName:@"Futura-Medium" size:14];
phoneButton.titleLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:1.0];
phoneButton.titleLabel.shadowOffset = CGSizeMake(0, 1);
[phoneButton setTitle:@"Phone" forState:UIControlStateNormal];
[phoneButton addTarget:self action:@selector(phone) forControlEvents:UIControlEventTouchUpInside];

gradient = [CAGradientLayer layer];
gradient.frame = phoneButton.bounds;
gradient.cornerRadius = 8;
gradient.borderColor = [[UIColor whiteColor]CGColor];
gradient.borderWidth = 2.0;
gradient.colors = [NSArray arrayWithObjects:(id)[[sharedManager cellGradientEnd] CGColor], (id)[[sharedManager cellGradientStart] CGColor], nil];
[phoneButton.layer insertSublayer:gradient atIndex:0];
[self.view addSubview:phoneButton]; 
```

现在我想在选择时设置按钮的选定/突出显示颜色。我该怎么做呢。我阅读了制作 UIbutton 子类并覆盖 setSelected 但我不知道如何去做。这是customButton subclass.m

```
#import "CustomButton.h"

@implementation CustomButton
@synthesize sharedManager;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    sharedManager = [[MySingleton alloc]init];

    }
return self;
}

-(void) setHighlighted:(BOOL)highlighted {

if(highlighted) {
    NSLog(@"Highlighted");

} else {
    NSLog(@"Not Highlighted");

}

[super setHighlighted:highlighted];
}

-(void) setSelected:(BOOL)selected {

if(selected) {
    NSLog(@"Selected");

} else {
    NSLog(@"Not Selected");
}
[super setSelected:selected];
}

@end 
```

或者只是调暗选择按钮会很好？我应该补充一点，该按钮不在 Xib 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:21:17.310

我只是通过在 subclass.m 中创建按钮的选定渐变和未选定渐变状态来解决这个问题，现在一切都很好！

```
- (CustomButton *)buttonWithType:(UIButtonType)type
{
  return [self buttonWithType:UIButtonTypeCustom];
}

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code

}
return self;
}

- (id)initWithCoder:(NSCoder *)coder
{
//Call the parent implementation of initWithCoder
self = [super initWithCoder:coder];

//Custom drawing methods
if (self)
{

    [self drawBackgroundLayer];
    [self drawHighlightBackgroundLayer];

    highlightBackgroundLayer.hidden = YES;

}

return self;
 }

-(void)loadSingleton{

sharedManager = [[MySingleton alloc]init];

}

- (void)layoutSubviews
{

// Set gradient frame (fill the whole button))
backgroundLayer.frame = self.bounds;

// Set inverted gradient frame
highlightBackgroundLayer.frame = self.bounds;

[super layoutSubviews];
}

- (void)drawBackgroundLayer
{
[self loadSingleton];
// Check if the property has been set already
if (!backgroundLayer)
{
    backgroundLayer = [CAGradientLayer layer];
    backgroundLayer.cornerRadius = 8;
    backgroundLayer.borderWidth = 1.5;
    backgroundLayer.borderColor = [UIColor whiteColor].CGColor;
    backgroundLayer.colors = [NSArray arrayWithObjects:(id)[[sharedManager  cellGradientEnd] CGColor], (id)[[sharedManager cellGradientStart] CGColor], nil];

    // Add the gradient to the layer hierarchy
    [self.layer insertSublayer:backgroundLayer atIndex:0];
   }
}

- (void)drawHighlightBackgroundLayer
{
[self loadSingleton];
if (!highlightBackgroundLayer)
{
    highlightBackgroundLayer = [CAGradientLayer layer];
    highlightBackgroundLayer.cornerRadius = 8;
    highlightBackgroundLayer.borderWidth = 1.5;
    highlightBackgroundLayer.borderColor = [UIColor whiteColor].CGColor;
    highlightBackgroundLayer.colors = [NSArray arrayWithObjects:(id)[[sharedManager cellSelectedGradientEnd] CGColor], (id)[[sharedManager cellSelectedGradientStart] CGColor], nil];

    [self.layer insertSublayer:highlightBackgroundLayer atIndex:1];
  }
} 
```

并将所选状态设置为开或关

```
- (void)setHighlighted:(BOOL)highlighted
{
NSLog(@"Selected");

// Disable implicit animation
[CATransaction begin];
[CATransaction setDisableActions:YES];

// Hide/show inverted gradient
highlightBackgroundLayer.hidden = !highlighted;
[CATransaction commit];

[super setHighlighted:highlighted];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:39:16.060

如果我正确理解您要做什么，我建议采用以下方法：

1.  移动`CAGradientLayer`你的`CustomButton`实现内部（所以它会变成一个`CustomGradientButton`）；

2.  当您想`selected`为自定义按钮设置状态时，`CAGradientLayer` `gradientColors`通过更改其饱和度和亮度来更改。

通过这样做，您的按钮将更改其在选定状态下的外观。

修改饱和度和亮度的一种方法可能是通过`UIColor`我的这一类：

```
@interface UIColor (LighterDarkerColor)

- (UIColor*)colorWithSaturation:(float)saturationFactor
                 brightness:(float)brightnessFactor;

@end

@implementation UIColor (LighterDarkerColor)

- (UIColor*)colorWithSaturation:(float)saturationFactor
                 brightness:(float)brightnessFactor {

  float hue = 0.0;
  float saturation = 0.0;
  float brightness = 0.0;
  float alpha = 0.0;

  if ([self getHue:&hue saturation:&saturation brightness:&brightness alpha:&alpha])
    return [UIColor colorWithHue:hue saturation:saturation*saturationFactor
                      brightness:brightness*brightnessFactor alpha:alpha];

  return self;
}

@end 
```

你可以这样做，例如：

```
UIColor* selectedColorStart = [[sharedManager cellGradientStart] colorWithSaturation:0.65 brightness:1.2]; 
```

以获得更不饱和、更亮的 cellGradientStart 颜色版本。然后在您的`setSelected`方法中，您将修改您的`CAGradientLayer`：

```
gradient.colors = [NSArray arrayWithObjects:(id)[selectedColorEnd CGColor], (id)[selectedColorStart CGColor], nil]; 
```

这种方法对我有用，尽管您需要根据您的情况微调饱和度和亮度的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T18:08:50.257

您是否尝试过调用`super`然后调用`setNeedsDisplay`自我？

它应该会导致您的显示功能在适当的时间被调用，并且在该代码中您应该检查选择/突出显示。

# java - 具有 Or 条件的正则表达式？

> ID：14588567
> 
> 赞同：0
> 
> 时间：2013-01-29T17:22:07.717
> 
> 标签：java, regex

是否可以在正则表达式中创建 OR 条件。

我正在尝试查找包含此类模式的文件名列表的匹配项

第一种情况

```
xxxxx-hello.file 
```

或第二种情况

```
xxxx-hello-unasigned.file 
```

这个 reg >`-hello.file`适用于第一种情况，但他们也是检查第二种情况的方法吗？

我不想创建两个正则表达式，如果可能的话想结合这两种情况。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:23:34.387

使组可选：

```
.*-hello(-unasigned)?[.]file 
```

* * *

如果性能是一个问题，您应该将该组设置为非捕获组：

```
.*-hello(?:-unasigned)?[.]file 
```

* * *

如果您希望它只匹配确切数量的字符，您应该为您的 OR 案例使用管道：

```
.{5}-hello[.]file|.{4}-hello-unasigned[.]file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:18:40.407

我在文件集中使用多个包含自己修复了这个问题。

这对我有用。不知道为什么 reg ex 没有工作。

```
<fileset dir="bin" >
                <include name="welcome-hello-unasigned.file" />
                <include name="welcome-hello.file" />
            </fileset> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:23:31.670

只需使用`|`：

```
.*-hello.file|.*-hello-unasigned.file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:23:39.800

```
*-hello.file|*-hello-unassigned.file 
```

使用 |

# asp.net-mvc - 如何验证已使用 MetadataType 扩展的实体？

> ID：14588576
> 
> 赞同：0
> 
> 时间：2013-01-29T17:22:38.570
> 
> 标签：asp.net-mvc, validation, entity-framework-4

我有一个 EF 实体 Respondent，它是由 EF 从数据库中自动生成的）。

我必须扩展此实体以添加一些验证规则和属性以在我的视图中使用：

```
[MetadataType(typeof(RespondentMetadata))]
public partial class Respondent { }

public class RespondentMetadata
{
    [Required]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }
} 
```

现在，在我的控制器中，我需要检查这个 Respondent 对象在 FirstName 中是否确实具有值（无需明确检查该值，因为我可能有大量具有各种验证规则的此类属性）。

此检查可以在 [HttpPost] 操作中不需要的任何地方进行（因此，此处为 ModelState.IsValid N/A）。

如何在代码中的任何位置验证整个实体？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:52:29.923

“Text-Book-Way”是为您的模型添加验证。

然后你可以做一个检查

```
if (Respondent.IsValid())
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T18:00:18.277

您可以使用该[`Validator.ValidateObject`](http://msdn.microsoft.com/en-us/library/dd411788.aspx)方法在代码中的任何位置执行验证，但为此您需要停止使用`MetadataTypeAttribute`并使用该方法显式关联元数据类[`TypeDescriptor.AddProviderTransparent`](http://msdn.microsoft.com/en-us/library/dd783170.aspx)。

样本：

```
var respondent = new Respondent();

var provider = new AssociatedMetadataTypeTypeDescriptionProvider(
    typeof (Respondent), 
    typeof (RespondentMetadata));

TypeDescriptor.AddProviderTransparent(provider, typeof (Respondent));

Validator.ValidateObject(
    respondent, 
    new ValidationContext(respondent, null, null)); 
```

该类`Validator`似乎不尊重该属性，因此这是我知道的唯一解决方法。

# algorithm - XTerm 中的调色板转换

> ID：14588577
> 
> 赞同：2
> 
> 时间：2013-01-29T17:22:40.677
> 
> 标签：algorithm, colors

`xterm`我们可以有 256、88 或 16 种颜色。我想知道，有没有一种算法可以从 256 色图表中获取颜色并在 88 色图表中找到匹配/等效颜色？

此外，有没有一种算法可以将 256 色表的颜色转换为 16 色表的颜色？

例如：如果颜色为`#00D700`(Light Green) -> `#00FF00`(Light Green in 16 color chart)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:37:39.603

# 颜色量化

在计算机图形学中，[颜色量化](http://en.wikipedia.org/wiki/Color_quantization)或彩色图像量化是减少图像中使用的不同颜色数量的过程，通常是为了使新图像在视觉上与原始图像尽可能相似。

# 海报化

此过程用于图像的海报化，这需要将连续渐变的[色调](http://en.wikipedia.org/wiki/Posterization)转换为几个色调较少的区域，从一种色调突然变化到另一种色调，最初是通过摄影过程来制作海报。

![在此处输入图像描述](../Images/69a1e426bcc91801ae9d55e8a51ec4b6.png)

# 算法

您所描述的创建调色板的过程与原始颜色相比更少但相似，尽管不完全是图像，但它属于这一类。你会发现这个算法有很多可能的实现，要么是“后处理”，要么是“量化”。

迄今为止，最流行的颜色量化和调色板优化算法是[Paul Heckbert](http://www.cs.cmu.edu/~ph/)在 1980 年发明的，是中[**值切割算法**](http://en.wikipedia.org/wiki/Median_cut)。

[您可以在伊利诺伊大学的这个站点](http://www.cs.uic.edu/bin/view/CS101/Code)中找到 Java 示例

# android - 使用 Android ndk 的 OpenCV -“无法解决”错误

> ID：14588578
> 
> 赞同：2
> 
> 时间：2013-01-29T17:22:43.963
> 
> 标签：android, opencv, android-ndk, java-native-interface

我正在使用 NDK 开发 OpenCV 项目。还有一些对 OpenCV 库的 Java 调用。java 调用当前工作正常，项目编译并运行良好。然而，一旦引入本机调用，应用程序就会崩溃，然后错误出现在引用的 .cpp 文件中，说明`could not be resolved`错误（例如`Symbol 'cv' could not be resolved`）。在打开 cpp 文件之前，似乎没有错误，这就是应用程序最初运行的方式。每次 Eclipse 重新启动时，错误才会出现，直到如前所述触发。

我事先在 OpenCV 提供的样本之一（即样本 3 - 本机）上测试了 cpp 文件，并且工作正常，因此它必须位于链接过程中的某个位置。

## 项目物业详情及问题研究

在扫描并比较当前有问题的项目的项目设置和成功运行的OpenCV的示例之后；我注意到的差异是：

*   项目`Current ToolChain`（在项目属性中`C/C++ Build`>下）是，而 OpenCV 的示例是. 我记得在某处读到这是推荐设置，但不确定为什么，但在将我的 Android 项目转换为 C/C++ 项目的早期，我不记得找到可调整的工具链选项。`Tool Chain Editor``Cygwin GCC``No ToolChain`

*   有问题的`Configuration`项目中的 是`Debug [Active]`，而 OpenCV 示例中的是`Default [Active]`. `Configuration`我在项目的下拉菜单中找不到后者作为选项。( `indexer build configuration`Under `C/C++ General`> `Indexer`) 反过来在我的项目有的地方也不同`Debug`，而 OpenCV 的示例有`Default`.

下面说明了我的项目的上述设置（不是 OpenCV 的示例）：

*工具链编辑器设置*

![工具链编辑器设置](../Images/561e5689fbda7df17ebd4a60cef4f3f1.png)

*索引器构建配置设置*

![索引器构建配置设置](../Images/06cf960a6bed8b8c6038530864613632.png)

该项目准备了推荐的建议，这些建议可以在大多数教程和有关此事的问题中找到；作为[添加必要的项目路径](https://stackoverflow.com/a/12450140/1446598)和[添加`NDKROOT`路径](https://stackoverflow.com/questions/12466074/opencv-native-samples-are-not-building/14527852#14527852)（也提到[这里](http://answers.opencv.org/question/2509/unresolved-inclusions-in-opencv-android-tutorial-4/)）。该`ndk-build`命令也已成功运行。

此外，cpp 文件中的方法名称被命名为我在 OpenCV 示例中观察到的命名约定，即它遵循这种模式；`Java_packageName_callingJavaClass_functionName`.

## 代码和详细结果

下面是`Android.mk`大纲：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

OPENCV_INSTALL_MODULES:=on
OPENCV_CAMERA_MODULES:=on

include <Full Path To OpenCV>\OpenCV\sdk\native\jni\OpenCV.mk

LOCAL_MODULE    := proc #The name referred to in System.loadLibrary() in the calling Android  activity
LOCAL_SRC_FILES := proc.cpp
LOCAL_LDLIBS +=  -llog -ldl

include $(BUILD_SHARED_LIBRARY) 
```

`Application.mk`如下：

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi 
```

* * *

**编辑**下面是第一次运行的 logcat 输出（之后，编译错误，即以`could not be resolved`错误的形式，在 cpp 中实现，因此除非重新启动 Eclipse，否则无法运行）。`median`是发生崩溃时调用的本机方法。

```
01-29 19:14:23.786: W/dalvikvm(8750): No implementation found for native Lcom/ocv/MainActivity;.median (JJ)V
01-29 19:14:23.786: W/dalvikvm(8750): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
01-29 19:14:23.786: E/AndroidRuntime(8750): FATAL EXCEPTION: main
01-29 19:14:23.786: E/AndroidRuntime(8750): java.lang.UnsatisfiedLinkError: median
01-29 19:14:23.786: E/AndroidRuntime(8750):     at com.ocv.MainActivity.median(Native Method)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at com.ocv.MainActivity.onActivityResult(MainActivity.java:155)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.app.Activity.dispatchActivityResult(Activity.java:3890)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3517)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3563)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.app.ActivityThread.access$2800(ActivityThread.java:126)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2068)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.os.Looper.loop(Looper.java:123)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at android.app.ActivityThread.main(ActivityThread.java:4633)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at java.lang.reflect.Method.invoke(Method.java:521)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-29 19:14:23.786: E/AndroidRuntime(8750):     at dalvik.system.NativeStart.main(Native Method) 
```

**编辑** 关于使用的代码；对于**.java 活动代码**，即`MainActivity.java`，下面是与本机功能相关的摘录。

```
 // package name
    package com.ocv;

    // Class header
    public class MainActivity extends Activity implements View.OnClickListener{

       // native method declaration    
       public native void median(long matAddrGr, long matAddrRgba);  

       protected void onActivityResult(int requestCode, int resultCode, Intent data) {

           if (OpenCVLoader.initDebug()){

               /* This is line 155 referenced from logcat */
               median(gray_img.getNativeObjAddr(), rgb_img.getNativeObjAddr());
              }
            }
          } 
```

关于本**机代码**，`proc.cpp`（遵循与从 OpenCV 示例中理解的类似模式）：

```
#include <jni.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <vector>

using namespace std;
using namespace cv;

extern "C" {
JNIEXPORT void JNICALL Java_com_ocv_MainActivity_median(JNIEnv*, jobject, jlong addrGray, jlong addrRgba)
{
    Mat* pMatGr=(Mat*)addrGray;
    Mat* pMatRgb=(Mat*)addrRgba;
    vector<KeyPoint> v;

    medianBlur(*pMatGr,*pMatRgb,3);
}
} 
```

关于**库加载**；OpenCV 已成功加载（在本机 cpp 文件出现错误之前的第一次运行中），如下所示（我什至在调用本机方法之前`Imgproc.cvtColor`在 Java 中成功调用（在活动中） ）： `MainActivity.java``median`

![成功加载 OpenCV，如 logcat 所示](../Images/e1f888acaa971da929b90b29f0580874.png)

导致的**语义错误**`proc.cpp`：

![cpp 语义错误](../Images/86f6ab7ea3653ae858f717ae9b1a9572.png)

* * *

## 问题

上述项目属性的观察是否可能与问题相关？如果可以，如何修改？如果没有，知道可能导致错误的原因是什么吗？

我正在使用 Eclipse Indigo Service Release 2（因此[这个](https://stackoverflow.com/a/13106635/1446598)对 Eclipse Juno 用户的解决方案不适用）。

我在网上发现了很多类似的问题（其中一些是前面链接的）；但到目前为止，建议的答案似乎都没有解决这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T23:58:32.967

1.  cd 到 jni 目录时，尝试使用 ndk-build 在命令行中构建它。
2.  如果它构建，关闭所有 cpp 编辑器窗口，重新启动 Eclipse 但不要打开任何 cpp 文件。将您的应用程序作为 Android 应用程序运行。
3.  如果运行正常，打开 cpp 文件 - 这次你会看到一个错误。
4.  擦除并重新键入所有“使用命名空间”字符串。我知道这听起来很奇怪，但是当您再次重新启动 Eclipse 时，错误应该会消失。当然，鉴于您的所有路径都是正确的。
5.  关于包含的警告仍然存在。我不知道为什么，但手机上的安装有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:18:02.260

当我遇到类似问题时，我不得不更改此目录

${ProjDirPath}/../../sdk/native/jni/include

有了这个

${ProjDirPath}/../OpenCV-2.4.3.2-android-sdk/sdk/native/jni/include

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-21T18:15:50.243

[这可能很有用。](https://stackoverflow.com/questions/10803685/eclipse-cdt-symbol-cout-could-not-be-resolved)

但是，有人说，eclipse在包含头文件时很难做到，这是eclipse的一个bug。

# css - CSS 相对（相对于什么？）位置

> ID：14588580
> 
> 赞同：0
> 
> 时间：2013-01-29T17:22:47.597
> 
> 标签：css

我正在制作一个网站，它只有几行，我只是制作了它的结构以查看它的外观，直到现在我以为我理解 CSS 中“相对”位置的含义。这是我的 HTML 和 CSS 代码。如果你看一下 CSS，你会在**#about div中看到**

```
position: relative;
top: 13%; 
```

在**#portfolio**

```
position: relative;
top: 0; 
```

但它不在**#wrap div**之上。如果我将其位置更改为**绝对**位置，它将位于顶部。所以我的问题是：#portfolio div 与什么相关？我认为它应该相对于 wrap 我认为它应该相对于 wrap 改变它的顶部位置。（很抱歉这篇文章的格式，如果你能更好地格式化它，那就太好了，我试过了，但太可怕了）

[链接到 HTML 和 CSS](http://jsfiddle.net/NEgVk/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:25:42.000

`position: relative;`如果您没有指定该选项，*则会*导致项目相对于它所在的位置定位。该项目仍然占用与它本来一样的“空间”，但可以移动。这与将其定位在其父级中没有任何关系。

例如：

```
position: relative;
top: 5px; 
```

*将导致该项目从原来*的位置向下移动 5 个像素。

```
position: relative;
top: -5px; 
```

会导致它从原本的位置向上移动 5 个像素。

另请注意，使用它可能导致对象与其他对象重叠或移动到其父对象之外，具体取决于您偏移它的程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:27:11.800

相对定位的元素是相对于其正常位置定位的。

因此，如果您有这样的 HTML：

```
<div style="height: 30px; padding: 0px; margin 0px;">Content</div>
<div style="height: 30px; padding: 0px; margin 0px; position:relative; top: -30px">Overlapping Content</div> 
```

第二个 div 将使第一个 div 黯然失色，因为它将从通常定位的位置向上移动 30 px。

老实说，在大多数网页设计中，相对定位很少与实际的上/下/左/右值一起使用。大多数`position: relative`仅在包含绝对定位元素的容器元素上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:47:52.687

css 属性`position:relative`在流中正常定位元素，然后添加 和 的`top, left, right`值`bottom`。

请参阅[MDN 上的 CSS 位置](https://developer.mozilla.org/en-US/docs/CSS/position)。

在您的情况下，`#about`并且`#portfolio`使用`position:relative;`.

`#about`占据 的 23% `#wrap`，因此顶部的`#portfolio`初始位置将位于 的 23% `#wrap`。

然后，你改变`#about`位置，`top:13%`所以它下降到 13%，但你设置`top:0;`为`#portfolio`，所以它保持在 23%。

如果你想让你的 div 定位在里面`#wrap`，你需要设置`position:absolute;`. 然后，它们将相对于它们最近的定位祖先（此处`#content`）或包含块进行定位。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T17:28:17.093

投资组合与“内容”相关，这意味着您放入“内容” div 的所有内容都将继承他的功能。

# python - 根据文件路径重命名和移动文件

> ID：14588591
> 
> 赞同：1
> 
> 时间：2013-01-29T17:23:07.460
> 
> 标签：python, rename, subdirectory, filetree

我正在尝试根据文件所在的树路径重命名文件，然后将重命名的文件移动到特定文件夹（基于其名称）。

因此，例如，我在路径 L:\a\b\c\d\e\f\file.pdf 中有一个文件我想将“file.pdf”重命名为“de f”

此外，所有子文件夹都在 c 处分支，所以我希望 python 扫描文件夹 c 中包含的子文件夹中的所有文档，以便根据上述模式重命名。即L:\a\b\c\x\y\z\file.pdf，file.pdf重命名为“xy z”；L:\a\b\c\q\r\s\file.pdf，file.pdf重命名为“qrs s”；等等

然后，我想根据它们的名称将所有这些文件移动到一个新的、已经存在的文件夹中。例如，对于文件“de f”，我想移动到 L:a\b\1\d\f\e。

我在 Python 编码方面还很陌生，我已经解决了一些难题，但我遇到了很多麻烦。这是我的一些代码，但我认为它不会很有用。

对于此代码，我必须使用 .py 文件将文件放入 CMD。它吐出我想要的名称（但带有我不想要的额外空格），它实际上并没有重命名文件，并且仅在我宁愿让代码查看时放入 CMD 的特定文件完成所有子文件夹并自动执行。请注意，我的代码（特别是第 6-7 行）特定于我想要的文件夹的实际命名方式，出于保密原因，我对树路径的名称进行了混淆，它只是让它更容易理解。

```
from sys import argv
script, filename = argv
txt = open(filename)
print "Here's your file %r:" % filename
string = "%r" % filename
print string [94:-17]
line = string [94:-17]
line = "%r" % line
for char in '\\':
line = line.replace (char, ' ')
print line 
```

做一些功课，这段代码将搜索并重命名我想要的目录中的所有文件，但是它并没有按照我想要的方式命名。同样，这并没有真正的帮助，但这是我所拥有的。

```
import glob, os
def rename(dir, pattern, titlePattern):
for pathAndFilename in glob.iglob(os.path.join(dir, pattern)):
title, ext = os.path.splitext(os.path.basename(pathAndFilename))
os.rename(pathAndFilename,
os.path.join(dir, titlePattern % title + ext))
rename(r'L:\a\b\c\', r'*.pdf', r'new(%s)' 
```

然后对于实际移动文件，我还没有编写任何代码 - 我很迷茫。我知道这是很多工作，但如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T10:39:45.223

当我发现这篇文章正在搜索类似的 bash 解决方案时，我为将遵循相同路径的人发布了一个答案：

```
#!/bin/bash

mkdir extracted
for var in "$@"
do
    for f in `find sources -name "$var"`
    do
        groupname=`echo $f | cut -d'/' -f 3`
        filename=`echo ${f##*/}`
        cp "$f" extracted/"${groupname}_$filename" -v
    done
done 
```

# mysql - mysql加入对一列的尊重

> ID：14588597
> 
> 赞同：1
> 
> 时间：2013-01-29T17:23:21.033
> 
> 标签：mysql, sql, join

我有两个这样的mysql表

```
CREATE  TABLE IF NOT EXISTS tbl1 (
`id` INTEGER(2) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT ,
`name` VARCHAR(20) NOT NULL
) ENGINE=InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE  TABLE IF NOT EXISTS tbl2 (
`tbl_id` INTEGER(2) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT ,
`id2` INTEGER(2) UNSIGNED NOT NULL ,
`email` VARCHAR(20) NOT NULL ,
FOREIGN KEY (`id2`) REFERENCES tbl1(`id`)
) ENGINE=InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

这是 tbl1 中的示例数据

```
1   hello
2   world
3   happy
4   end 
```

和 tbl2 中的示例数据

```
2   1   me@mail
3   2   my@mail
4   4   you@mail 
```

现在我想选择姓名和电子邮件加入两个表。这是sql

```
select name,email from tbl1 t1,tbl2 t2 where t2.id2 = t1.id; 
```

有了它，我得到了

```
hello   me@mail
world   my@mail
end     you@mail 
```

但我想要 tbl1 中的所有行

```
hello   me@mail
world   my@mail
happy   null or nothing or 0
end     you@mail 
```

我在这里卡住了。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:24:13.697

您应该使用`LEFT JOIN`：

```
select name,email 
from tbl1 t1
LEFT JOIN tbl2 t2 
  on t1.id = t2.id2; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/91ca7/1)。

您当前的查询使用的`INNER JOIN`将只返回两个表中匹配的行。即使 中没有匹配的行，也会`LEFT JOIN`返回中的所有记录。`tbl1``tbl2`

如果您需要帮助学习连接语法，这里是[连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# asp.net - 带有 JSON 的 JQuery UI 选项卡 beforeLoad 方法

> ID：14588601
> 
> 赞同：0
> 
> 时间：2013-01-29T17:23:33.027
> 
> 标签：asp.net, ajax, json, jquery-ui-tabs

我尝试动态加载选项卡的内容。Source 是由 [WebMethod] 属性修饰的 ASP.NET 方法。

```
[WebMethod]
public static string Result()
{
   return RenderControl("WebUserControl1.ascx");
} 
```

当此代码加载选项卡时，它工作正常：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Dynamic User Control</a></li>
    </ul>
    <div id="tabs-1">
    </div>
</div>

$.ajax({
    type: "POST",
    url: "WebForm1.aspx/Result", 
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        $('#tabs-1').html(msg.d);
    },
    error: function (msg){ 
        $('#tabs-1').html('Cannot load');
    }
}); 
```

但是，当标签的定义不同时：

```
<div id="tabs">
    <ul>
        <li><a href="WebForm1.aspx/Result">Dynamic user Control</a></li>
    </ul>
    <div id="tabs-1">
    </div>
</div> 
```

然后此调用加载整个页面内容并将其放入选项卡中。因此，我尝试将数据类型更改为 json，但随后整个选项卡加载在 ajax 调用中的某处失败。

```
$("#tabs").tabs({

    beforeLoad: function (event, ui) {
        ui.ajaxSettings.accepts = { json: "application/json, text/javascript" };
        ui.ajaxSettings.contentType = "application/json; charset=utf-8";
        ui.ajaxSettings.type = "POST";
        ui.ajaxSettings.dataTypes[0] = "json";

        ui.jqXHR.error = function () {
            $('#tabs-3').html('Cannot load');
        }
    },
}); 
```

检查了随请求发送了哪些标头，并且这些对 ajaxSettings 的修改根本不会发送到服务器。

你能指出我正确的方向吗？

使用的 JQuery-UI 版本是 1.10.0。使用的 JQuery 版本是 1.9.0。

编辑：在 Firebug 中检查 Content-Type 标头未根据 ajaxSettings 设置为 application/json。因此网页以 text/html 响应进行响应。确认如果请求标头被强制为 json（通过 live headers firefox addon），则返回 json 响应。有没有办法强制标签传递正确的 http 标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T08:26:04.980

UI 选项卡`beforeLoad`方法基本上是 Ajax`beforeSend`功能。对于您的特定问题，您必须执行以下操作

```
ui.jqXHR.setRequestHeader("Accept", "application/json, text/javascript");
ui.ajaxSettings.type = "POST";
ui.ajaxSettings.dataTypes[0] = "json"; 
```

这将更改请求的接受标头。

# jquery - IE7/8没有执行jQuery动画回调

> ID：14588605
> 
> 赞同：0
> 
> 时间：2013-01-29T17:23:45.837
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7

我有以下动画：

```
 $(this).animate({
              marginLeft: '-25%',
              width: "50%",
              minWidth: '400px',
              maxWidth: '700px',
              padding: 0,
              minHeight: "580px",
              height: 'auto',
              borderRadius: 0
            }, 1000, function () {
              alert("I'm not being displayed!!");
              $(this).addClass('completed');
            }); 
```

一切似乎都很好，但在 IE7 或 8 中没有调用回调。为什么会这样？我删除了borderRadius之后的最后一个逗号，它修复了原始动画问题，但现在这是新问题。任何人都可以帮忙吗？

编辑：

带有标点错误的最终警报实际上并不在代码中，我只是将它放在那里以避免人们指出 addClass 部分可能是问题所在！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:27:14.087

在“我”中添加一个转义

```
 $(this).animate({
                      marginLeft: '-25%',
                      width: "50%",
                      minWidth: '400px',
                      maxWidth: '700px',
                      padding: 0,
                      minHeight: "580px",
                      height: 'auto',
                      borderRadius: 0
                    }, 1000, function () {
                      alert('I\'m not being displayed!!'); // needed an escape
                      $(this).addClass('completed');
                    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:30:39.313

你也可以试试这个：

```
$(this).animate({
          marginLeft: '-25%',
          width: "50%",
          minWidth: '400px',
          maxWidth: '700px',
          padding: 0,
          minHeight: "580px",
          height: 'auto',
          borderRadius: 0
        }, 1000).promise().done(function(){
          alert("I'm not being displayed!!"); // <---use double quotes or escape them
          $(this).addClass('completed');
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:33:38.003

对于任何有兴趣的人，我都发现了问题所在。显然 IE 7 和 8 在处理`height: 'auto'`animate 函数时存在问题，这导致它无法触发回调。

我决定使用反复试验来注释某些属性，直到我在阅读了这个问题的答案后找到了罪魁祸首 - [jQuery example (in jsfiddle) working in firefox but not in IE8, 7](https://stackoverflow.com/questions/4655405/jquery-example-in-jsfiddle-working-in-firefox-but-not-in-ie8-7) - by [Jeff B](https://stackoverflow.com/users/179216/jeff-b)

# c - opencv中的颜色平均

> ID：14588606
> 
> 赞同：1
> 
> 时间：2013-01-29T17:23:47.663
> 
> 标签：c, opencv

我正在尝试计算 RGB 图像区域的平均颜色。图像的感兴趣区域由掩码表示。我`cvAvg`在 opencv 中使用了函数，但不知何故我不能正确地做到这一点。我使用了以下代码：

```
//Prepare the mask
CvMat*regionMask = cvCreateMat(inImage->height, inImage->width, CV_8UC1);
cvZero(regionMask);
uchar* maskData = regionMask->data.ptr;
if(some_cond)
   maskData[(p.y)*inImage->width + p.x] = 1;

//Compute average and set the output region
cvSet(outImage, cvAvg(inImage, regionMask), regionMask); 
```

这是结果：

输入第一张图像，然后是掩码，然后是输出图像。

![输入图像](../Images/5a19c58a58b66c11fcb606a4d41b06ae.png) ![面具](../Images/4e46f37f2d251a45cb795dd9d9040dd2.png) ![输出](../Images/d9a7ab06292530c2df8289ab652f2704.png)

我在这里做错了吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:57:47.713

我想到了。我用它替换了该语句 `maskData[(p.y)*inImage->width + p.x] = 1;`，`maskData[(p.y)*maskData->step + p.x] = 1;`它现在可以正常工作了。

谢谢。

# ios - Xcode 创建的对象代码格式是什么？

> ID：14588617
> 
> 赞同：0
> 
> 时间：2013-01-29T17:24:31.170
> 
> 标签：ios, objective-c, xcode

Xcode (iOS) 创建的对象代码格式是什么？它们存储在哪里？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:05:47.433

Xcode 生成[Mach-O 格式](http://en.wikipedia.org/wiki/Mach-O)的文件。

这是文档：[OS X ABI Mach-O 文件格式参考](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/MachORuntime/Reference/reference.html)。文件格式在 iOS 上是相同的。

# python - 是否可以使用 Python 向/从 .exe 传递消息？

> ID：14588623
> 
> 赞同：0
> 
> 时间：2013-01-29T17:24:51.077
> 
> 标签：python

我知道您可以使用 sys.argv 传入初始参数，但我很好奇的是您是否可以在 Python 程序和 .exe 之间建立某种运行通信。

例如，假设有问题的可执行文件只是我使用 PyInstaller 编译成二进制文件的另一个 Python 程序。它所做的只是等待某些东西向它发送消息，然后打印出所述消息。

类似于以下内容：

```
while True:
    message = self.queue.get() #Blocks until something is actually in the queue
    print message 
```

所以，我们把它变成一个.exe。现在，有没有办法向它发送消息？就像，一个人可以“挂钩”到那个消息队列并将东西推送到它吗？还是让 .exe 将内容发送到 python 程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:01:46.393

使用套接字来实现这种进程间通信（IPC）是很常见的。您可以在[Low-level networking interface](http://docs.python.org/2/library/socket.html#example)找到一个非常基本的方法。我将在这里复制它：

```
# Echo server program
import socket

HOST = ''                 # Symbolic name meaning all available interfaces
PORT = 50007              # Arbitrary non-privileged port
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
s.listen(1)
conn, addr = s.accept()
print 'Connected by', addr
while 1:
    data = conn.recv(1024)
    if not data: break
    conn.sendall(data)
conn.close()

# Echo client program
import socket

HOST = 'daring.cwi.nl'    # The remote host
PORT = 50007              # The same port as used by the server
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
s.sendall('Hello, world')
data = s.recv(1024)
s.close()
print 'Received', repr(data) 
```

尝试寻找**进程间通信**，你会发现很多信息。

# android - 安卓地图视图空白

> ID：14588627
> 
> 赞同：0
> 
> 时间：2013-01-29T17:25:05.067
> 
> 标签：android, map

我正在尝试使用 Map Api v2 几天但没有任何成功。这是我的代码：

```
package com.example.turkceasistanim;

import android.os.Bundle;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class MainActivity extends MapActivity  {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

当我运行这个应用程序时，我得到了一张这样的空白地图：http: [//i.stack.imgur.com/B7H4G.jpg](http://i.stack.imgur.com/B7H4G.jpg)

所以我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:53:13.470

这是由于您的 api 密钥。

首先，您需要拥有应用程序证书的 SHA-1 指纹。如果您尚未发布您的应用程序，则很可能您正在使用调试证书。

找到您的证书并使用 keytool 获取 SHA-1 指纹。然后获取 Map API v2 密钥。

指南可在以下链接中找到。

[获取 Google Maps Android API v2](https://developers.google.com/maps/documentation/android/start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:31:31.187

您是如何获得地图密钥的，您是否使用`release`密钥签署您的应用程序`keystore`，然后使用它来获取`MD5`密钥？

如果是，那么您将必须使用相同的密钥再次签署您的 apk 才能使用它，否则您将不会像您的情况一样看到该应用程序。

为此，请导出应用程序并使用您之前使用的相同密码和密钥库对其进行签名。

然后将`apk`文件复制到您的设备上并从那里安装它，它将起作用。

`debug keystore`或者最好使用Eclipse签署您的应用程序并直接运行它。

# gwt - 从 GWT 应用程序打开外部 URL

> ID：14588631
> 
> 赞同：0
> 
> 时间：2013-01-29T17:25:24.817
> 
> 标签：gwt

我正在尝试使用 GWT 从我的网站打开外部 URL 我尝试了这两种方法：

1.  `HTML html = new HTML("<a href=\"" + p.getUrl() + "\">" + p.getTitle() + "</a>");`
2.  `Anchor arch = new Anchor(p.getTitle(),true,p.getUrl(),"_blank" );`

在这种情况下：`p.getUrl()`返回`www.google.com`

在这两种情况下，我都会在浏览器中看到一个链接，但是当我单击它时，我收到了以下错误消息：

> HTTP 错误：404 NOT_FOUND RequestURI=/www.google.com

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:50:55.170

正确启动您的 URL - 您的 url 必须是`http://www.google.com`or `https://www.google.com`，而不是简单`www.google.com`的 .

当您在 Web 浏览器的地址栏中键入裸 url`www.google.com`时，它会起作用，因为它不是从另一个页面中请求的 - 当页面请求不以 <schema>:// 开头的 url 时，浏览器认为这是与当前页面不同的页面，而不是全新的 url。

# c# - 在 WinRT 环境中创建 Wordpress 帖子

> ID：14588634
> 
> 赞同：0
> 
> 时间：2013-01-29T17:25:32.210
> 
> 标签：c#, wordpress, windows-runtime

我目前正在尝试为 Windows 8 创建一个应用程序，允许用户为 wordpress 创建博客文章。这已经在 .Net 中使用 XMLRPC 和各种其他库（例如 JoeBlogs）完成了多次。但是，这些库中没有一个与 WinRT 兼容。

是否有任何可用的库或替代方法可以使用 c# 和 WinRT 创建 Wordpress 帖子。

干杯。

# wxwidgets - 交叉编译 为什么配置脚本——找不到 X11/Xlib.h？

> ID：14588643
> 
> 赞同：2
> 
> 时间：2013-01-29T17:25:58.640
> 
> 标签：wxwidgets, x11, cross-compiling

在 Ubantu 上交叉编译 wxGTK --- 为什么配置脚本 - 找不到 X11/Xlib.h？

我正在使用交叉编译器 -- arm-unknown-linux-gnueabi :------
[http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler -为你的树莓派/](http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/)

为 wxGTK 运行配置时出现错误。
[http://wiki.wxwidgets.org/Compiling_and_getting_started](http://wiki.wxwidgets.org/Compiling_and_getting_started)

> 我已经安装了 -- gtk+ for linux。

我已经安装了:----

> sudo apt-get update sudo apt-get install wx2.8-headers libwxgtk2.8-0 libwxgtk2.8-dev

它在这里 ： - - -

> /usr/include/gtk-2.0/

Xlib.h 在这里 :------------

> test -f /usr/include/X11/Xlib.h && echo "exists" 返回 -- 存在

当我运行配置命令时：-------

> `../configure --host=arm-unknown-linux-gnueabi --target=arm-unknown-linux-gnueabi --build= i686-pc-linux --enable-unicode --prefix=/opt/wxGTK_RPI_build`

configure.log 文件 --- Xlib.h 未检测到 :---------

```
>configure:32521: checking for X11/Xlib.h
>configure:32537: arm-unknown-linux-gnueabi-gcc -c   conftest.c >&5
>conftest.c:71:22: fatal error: X11/Xlib.h: No such file or directory compilation terminated. 
```

未找到 Xlib.h :----

所以当我使用给 - make :-------- 因为这个我得到错误

```
>../src/unix/utilsx11.cpp:31:22: fatal error: X11/Xlib.h: No such file or directory compilation terminated.
>make: *** [coredll_utilsx11.o] Error 1 
```

如果 Xlib.h 在那里，那么为什么找不到它?????????

```
>Even i have added to PATH -->>   /usr/include/X11/ 
```

有关所面临问题的更多详细信息：-- [http://forums.wxwidgets.org/viewtopic.php?f=19&t=36772&start=15](http://forums.wxwidgets.org/viewtopic.php?f=19&t=36772&start=15)

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T11:58:41.903

这当然意味着编译器需要 ARM 的 X11 头文件。

所以你必须首先为 ARM 交叉编译 X11。

# php - 在 Codeigniter(mod_rewrite) 中使用 .htaccess

> ID：14588647
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:26:03.053
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite

我正在尝试了解 mod_rewrite。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /indexl.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /indexl.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ indexl.php?/$1 [L]

    </IfModule> 
```

这是我在 CI 中的 .htacces 文件的内容。我使用这个文件是因为它可能适用于其他一些应用程序。但是，如果我更改 index.php 的名称，这将不起作用，我会在浏览器中获得目录结构。所以我想知道即使文件名是index.php它是否也能正常工作，还是会自动使用index.php。这不应该

```
RewriteRule ^(.*)$ indexl.php?/$1 [L] 
```

将每个请求重定向到 indexl.php？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:39:30.277

RewriteRule 片段根据给定的 URL 路径重定向。如果您使用 指定一个空的`http://example.com/`，则`-f`and`-d`检查不会失败。因此不会重写所述`indexl.php`脚本。

并且在没有任何`index.*`文件（无论是 .php 还是 .html）的情况下，Apaches 自动索引（目录列表）将接管。

但是，您可以使用：

```
DirectoryIndex indexl.php 
```

因此，如果路径为空，您的索引脚本仍将运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:41:16.577

我建议您查看[Code Igniter 用户指南](http://ellislab.com/codeigniter/user-guide/general/urls.html)。你会看到的：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这是 Code Igniter 用户使用的非常典型的重写。因此，如果您将其添加到应用程序目录根目录中的 .htaccess 文件中，您可以拥有如下网址：

```
example.com/my/page 
```

而不是

```
example.com/index.php/my/page 
```

# xml - XML 服务提要验证在针对架构的额外属性上中断

> ID：14588649
> 
> 赞同：2
> 
> 时间：2013-01-29T17:26:15.597
> 
> 标签：xml, xsd

给定一项支持旧的现有 XML 提要的任务。新请求正在向 XML 提要添加新属性。当我将新属性“CountryOfOrigin”添加到 XML 中，然后添加到架构中时，验证失败。现在，如果我从 XML 和模式中删除新属性，它就可以正常工作。这是具有新属性的新 XML，其下方是架构

**XML**

```
<TagOrder>
<Tag>
<Message>1</Message>
<TagType>R</TagType>
<ItemNumber>190</ItemNumber>
<ItemXRef>E039</ItemXRef>
<VendorXRef>E39H</VendorXRef>
<Lvl02Desc>NEAR</Lvl02Desc>
<Lvl03Desc>NUG</Lvl03Desc>
<Lvl04Desc>EARRING</Lvl04Desc>
<Lvl05Desc>14KT</Lvl05Desc>
<Lvl06Desc></Lvl06Desc>
<VendorShortName>TEST</VendorShortName>
<SRP>1325.00</SRP>
<RetailPrice>1325.00</RetailPrice>
<CountryOfOrigin>TEST</CountryOfOrigin>
</Tag>
</TagOrder> 
```

**架构**

```
<schema id="Data2-Tag" xmlns="http://www.w3.org/2001/XMLSchema">`
<element name="Transaction">
    <complexType>
        <sequence>

            <element name="TransactionId" minOccurs="1" maxOccurs="1">
                <simpleType>
                    <restriction base="long">
                    </restriction>
                </simpleType>
            </element>

            <element name="ClientId" minOccurs="1" maxOccurs="1">
                <simpleType>
                    <restriction base="long">
                    </restriction>
                </simpleType>
            </element>

            <element name="TagOrder" minOccurs="1" maxOccurs="unbounded">
                <complexType>
                    <sequence>

                        <element name="Tag" minOccurs="1" maxOccurs="unbounded">
                            <complexType>
                                <sequence>

                                    <element name="Message" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="int">
                                                <minExclusive value="0"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="TagType" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="1"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="ItemNumber" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="50"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="ItemXRef" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="20" />
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="VendorXRef" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="20" />
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="Lvl02Desc" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="4" /> 
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="Lvl03Desc" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="3" />
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="Lvl04Desc" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="9" />
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="Lvl05Desc" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="8" />
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="Lvl06Desc" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="3" />
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="Lab" minOccurs="0" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="20"></maxLength>
                                                <enumeration value="Cultured"/>
                                                <enumeration value="Lab Created"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="VendorShortName" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="3"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="SRP" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="decimal">
                                                <minInclusive value="0" />
                                                <fractionDigits value="2"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="RetailPrice" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="decimal">
                                                <minInclusive value="0" />
                                                <fractionDigits value="2"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                    <element name="CountryOfOrigin" minOccurs="1" maxOccurs="1">
                                        <simpleType>
                                            <restriction base="string">
                                                <maxLength value="100"/>
                                            </restriction>
                                        </simpleType>
                                    </element>

                                </sequence>
                            </complexType>
                        </element>

                    </sequence>
                </complexType>
            </element>

        </sequence>
    </complexType>
</element> 
```

如果我从两者中删除“CountryOfOrigin”，它就可以正常工作并验证。任何人都明白为什么 XML 不会针对模式进行验证？

谢谢^.^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:36:35.033

我能够验证以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Transaction>
    <TransactionId>123456789123</TransactionId>
    <ClientId>987654321</ClientId>
    <TagOrder>
        <Tag>
            <Message>1</Message>
            <TagType>R</TagType>
            <ItemNumber>190</ItemNumber>
            <ItemXRef>E039</ItemXRef>
            <VendorXRef>E39H</VendorXRef>
            <Lvl02Desc>NEAR</Lvl02Desc>
            <Lvl03Desc>NUG</Lvl03Desc>
            <Lvl04Desc>EARRING</Lvl04Desc>
            <Lvl05Desc>14KT</Lvl05Desc>
            <Lvl06Desc></Lvl06Desc>
            <VendorShortName>TES</VendorShortName>
            <SRP>1325.00</SRP>
            <RetailPrice>1325.00</RetailPrice>
            <CountryOfOrigin>TEST</CountryOfOrigin>
        </Tag>
    </TagOrder>
</Transaction> 
```

# mysql - 使用 id 从表中检索值

> ID：14588651
> 
> 赞同：2
> 
> 时间：2013-01-29T17:26:28.523
> 
> 标签：mysql, ruby-on-rails, ruby, model

嗨，我有一个团队表，然后是一个夹具模型：

```
 class Fixture < ActiveRecord::Base
attr_accessible :away_score, :away_team_id, :home_score, :home_team_id, :result, :week
 belongs_to :home_team, :class_name => 'Team'
 belongs_to :away_team, :class_name => 'Team'
end 
```

然后我有一个程序可以根据他们的团队 ID 生成固定装置，但我不确定在我的 rails 应用程序中的何处添加它，我试图根据我已经创建的 20 个团队在视图中显示固定装置，但不确定如何？所以我的输出将是主队 team_name id 1 和客队 team_name id 2 用于夹具 1 等......

```
teams = Array(1..20)
fixed_team = teams.shift   #The fixed competitor described in the algorithm
teams.length.times do |i|

   #Create the two groups listed in the algorithm
   teams = teams.rotate
   week_teams = teams.dup.unshift(fixed_team) 
   first_group, second_group = week_teams.each_slice(week_teams.length/2).to_a
   second_group.reverse!
   weeks_pairings = first_group.zip(second_group)

   #Output the week's pairings
   puts "Week #{i + 1}: #{weeks_pairings}"
end 

#Output:
#=> Week 1: [[1, 2], [3, 20], [4, 19], [5, 18], [6, 17], [7, 16], [8, 15], [9, 14],             [10, 13], [11, 12]]
#=> Week 2: [[1, 3], [4, 2], [5, 20], [6, 19], [7, 18], [8, 17], [9, 16], [10, 15],   [11, 14], [12, 13]]
#=> etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:54:38.157

假设`name`您的数据库（或更多）中有 20 个 Teams 条目（具有属性）：

```
teams = Team.first(20)
fixed_team = teams.shift   #The fixed competitor described in the algorithm
teams.length.times do |i|

   #Create the two groups listed in the algorithm
   teams = teams.rotate
   week_teams = teams.dup.unshift(fixed_team) 
   first_group, second_group = week_teams.each_slice(week_teams.length/2).to_a
   second_group.reverse!
   weeks_pairings = first_group.zip(second_group)

   puts "Week #{i+1}: "
   weeks_pairings.each do |pair_of_teams|
     puts "#{pair_of_teams[0].name} vs. #{pair_of_teams[1].name}"
   end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:57:12.410

我没有得到你的代码在做什么，但正如你在评论中所说，我建议你这样做。

**在Fixture**中添加此方法。调用**Fixture.create_fixture**

```
def self.create_fixture
  weeks_pairings = []
  teams = Team.all.map(&:name)
  fixed_team = teams.shift   #The fixed competitor described in the algorithm
  teams.length.times do |i|
    #Create the two groups listed in the algorithm
    teams = teams.rotate
    week_teams = teams.dup.unshift(fixed_team) 
    first_group, second_group = week_teams.each_slice(week_teams.length/2).to_a
    second_group.reverse!
    weeks_pairings << first_group.zip(second_group)
  end
    weeks_pairings #You can use this in view
end 
```

鉴于：

```
 <% Fixture.create_fixture.each_with_index do |week, games_list| %>
   <%= "<h3> Week #{week+1} </h3>" %>
   <ul>
     <% games_list.each do |teams| %>
       <li><b><%= "#{teams.first} Vs #{teams.last}" %></li>
     <% end %>
   </ul>
  <% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:54:30.620

您应该将算法的逻辑放入您的 Fixture 模型中；将其模块化为静态方法，例如

```
def self.show_fixtures
   #add algo here
end 
```

但是您必须修改代码以返回数组或其他一些数据结构。现在你可以做

```
Fixture.show_fixtures 
```

无论在哪里 - 在任何视图中，在控制器等中获得对决。

您还可以定义一个专用视图来显示灯具。首先，在 FixtureController 中添加一个动作

```
def show_fixtures
  @list = Fixture.show_fixtures
end 
```

然后，添加视图 /views/fixture/show_fixtures.html.your_extension 在视图中，您可以迭代 @list 数组并为夹具中的每个匹配渲染一个部分。

# python - 从格式化的字符串生成重新模式

> ID：14588661
> 
> 赞同：-2
> 
> 时间：2013-01-29T17:26:56.170
> 
> 标签：python, regex

我需要从已经格式化的字符串生成字符串正则表达式（或至少是格式字符串）。这是怎么做到的？

我的用例：我收到了一个名为“ **Collected stuff (part 3).doc** ”的文档标题，需要找到所有相关文档（例如 part1、part2 和 part 3）。复杂之处在于该文档可能被称为**非常古老的收集的东西 [part 2].txt**甚至是**Misc stuff, vol 4** .doc**

是否有捷径可寻？在 python 中的奖金。

谢谢。肯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:32:14.833

从逻辑上讲，您将如何将原始字符串与要匹配的内容联系起来？原始字符串的哪一部分存在于其他字符串中，它们有什么共同点？想出一个足够复杂的程序来覆盖你的所有基础，而且这是可靠的，这将是相当困难的。

我认为您最好的选择是提出首选匹配的层次结构。

例如，如果您从**"Collected stuff (part 3).doc"**开始，您可能想先尝试匹配包含括号内所有内容的内容，然后再开始尝试根据卷号匹配内容。

**非常旧的收集的东西 [part 2.txt**不是比**Misc 的东西更好的匹配，vol 4.doc**吗？

# search - 识别字符串中的名称

> ID：14588662
> 
> 赞同：3
> 
> 时间：2013-01-29T17:27:05.357
> 
> 标签：search, annotations, nlp, chunking

我想找到一种在我网站上的用户搜索查询中识别人名、地名等的好方法。例如，如果用户问“乔治华盛顿多大了”，我需要能够从预定义的列表中知道乔治华盛顿是一个人。

有些列表是全局的，有些是用户特定的。例如，如果他们问“约翰史密斯多大了”，我可能只想确定我的同事的特定约翰史密斯——如果他不是我的同事，我不想将他识别为一个人。

是否有任何 NLP 库或这些列表的爬行，我可以利用 Soundx、成熟的 NLP、拼写错误等功能？我可以手写，但我宁愿利用成熟的东西。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:10:45.377

你需要的叫做`Named Entity Recognition`

斯坦福 NLP 附带的最好的可用软件之一：http: [//nlp.stanford.edu/software/CRF-NER.shtml](http://nlp.stanford.edu/software/CRF-NER.shtml) （用 Java 编写）

如果你在另一个平台上，Ruby 和 Python 中有很好的开源项目。搜索“命名实体识别”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:47:47.583

您正在寻找的特定自然语言处理 (NLP) 任务称为`Named Entity Recognition`(NER)

除了斯坦福的[CRF-NER](http://nlp.stanford.edu/software/CRF-NER.shtml)`Natural Language ToolKit` （在 java 中）之外，来自( [NLTK](http://nltk.org/install.html) )的流行 python 选择通常用作 NER 任务的基线。

您可以尝试安装 NLTK，然后执行以下代码：

```
>>> from nltk.tokenize import word_tokenize
>>> from nltk.tag import pos_tag
>>> from nltk.chunk import ne_chunk
>>> sentence = "How old is John Smith?"
>>> ne_chunk(pos_tag(word_tokenize(sentence)))
Tree('S', [('How', 'WRB'), ('old', 'JJ'), ('is', 'VBZ'), Tree('PERSON', [('John', 'NNP'), ('Smith', 'NNP')]), ('?', '.')]) 
```

# c++ - Qt 中的 HTML 表单编码

> ID：14588663
> 
> 赞同：0
> 
> 时间：2013-01-29T17:27:06.253
> 
> 标签：c++, qt, url, qurl

似乎 QUrl 不支持 URL 的 HTML 表单编码/解码（将空格编码为加号等）。此功能是否位于 Qt 中的其他位置，或者我是否需要为它找到另一个库？在后一种情况下，您有什么建议？

# c++ - 使用模板对象的模板函数中存在无法识别的内容

> ID：14588664
> 
> 赞同：0
> 
> 时间：2013-01-29T17:27:11.400
> 
> 标签：c++, templates, template-specialization

Gcc (4.7.2) 在编译这段代码时会抛出一个小错误：

```
#include <iostream>

template<typename T>
struct test
{
    template<int n>
    int select() const
    {
        return n;
    }
};

template<typename T>
struct test_wrapper
{
    void print() const
    {
        std::cout << t.select<3>() << std::endl; // L.18
    }

    test<T> t;
};

int main()
{} 
```

错误是：

```
test3.cpp: In member function 'void test_wrapper<T>::print() const':
test3.cpp:18:34: error: expected primary-expression before ')' token 
```

例如，如果我更改`test<T> t`为专用类型，`test<void> t`则此错误消失。

哪里有问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:28:08.903

`template`在模板化构造中调用模板方法时需要使用关键字：

```
t.template select<3>(); 
```

# windows-8 - 允许部分用户免费访问 Windows 8 付费应用

> ID：14588667
> 
> 赞同：3
> 
> 时间：2013-01-29T17:27:19.700
> 
> 标签：windows-8, windows-store-apps, winjs

我正在将 Windows 8 应用程序部署到应用商店（付费应用程序），但是，我希望允许某些用户能够免费下载它 - 不是试用版，而是完整版。有没有办法做到这一点？就像某些用户有特殊代码一样？

我知道如果他们有开发者许可证，我们可以在本地安装它，但这对这些用户来说是不可行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:50:31.140

我不知道是否有“官方”的方式来做这件事，但是对于帮助我测试我的应用程序的那群人，我打算给他们 24 小时的时间来下载应用程序，然后将其价格设置为在商店中免费，然后在完成后返回付款。

当然，我对该应用程序的平均下载量是 5 天或更少，所以我预计不会损失很多收入，如果您希望每天下载 100 次，那可能是不切实际的：D

# android - 如何使用多个活动 android 保存活动状态

> ID：14588670
> 
> 赞同：1
> 
> 时间：2013-01-29T17:27:30.837
> 
> 标签：android, android-layout, android-activity, android-screen

我的应用程序中有两个`activities`A 和 B。我已经学会了如何在配置更改发生时保存和恢复所有数据。在我的应用程序中，用户必须从 A 转到活动 B（所有数据都在 B 中）。

现在，每当发生屏幕旋转时，应用程序都会重新启动并转到活动 A。

我怎样才能知道屏幕旋转发生之前的最后一个活动，以便我可以直接打开相同的活动并让我的用户继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:34:18.760

试试这个可能对你有帮助。

粘贴此代码第二个活动。**当屏幕方向改变时调用此方法。**

**例如：纵向到横向，反之亦然。**

取一个变量并操纵该变量值以了解以前的活动。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
   super.onConfigurationChanged(newConfig);
   //Write Logic for start the same activity like and restore the data.
   startActivity(new Intent(context,SecondActivity.class));
} 
```

# java - Apache Tika 停止记录

> ID：14588673
> 
> 赞同：1
> 
> 时间：2013-01-29T17:27:50.013
> 
> 标签：java, log4j, apache-tika, apache-commons-logging

我有一个 Java 应用程序，它使用 Apache Commons Logging 库来记录各种调试消息、错误等。它目前设置为记录到控制台。

这一切正常，但是当我在类路径中包含 Apache Tika 时（根据应用程序的不同部分的要求），日志记录突然停止工作。我已经尝试过重新排列类路径顺序，但似乎没有任何帮助。

Log4J 用于进行日志记录，并且属性文件设置正确（它在没有 Tika 的情况下工作）。让控制台显示 Log4J 调试消息表明，在我添加 Tika 之前和之后，它正在查找属性文件。

任何可能导致这种情况的想法 - 更重要的是，我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:59:58.317

我猜 Log4j 正在使用在类路径中找到的不同配置文件。尝试使用 -Dlog4j.debug 运行您的应用程序

如果您的应用程序在 Tomcat 中运行，您可以将其添加到：

```
export TOMCAT_OPTS="-Dlog4j.debug -Dlog4j.configuration=foobar.xml" 
```

运行它`debug`会告诉你 log4j 在哪里找到它的配置。

# sql - Oracle Join - 返回未连接的列

> ID：14588675
> 
> 赞同：0
> 
> 时间：2013-01-29T17:27:51.203
> 
> 标签：sql, oracle, join

我很难弄清楚这个查询的连接语法。

假设我从 Oracle SQL 查询中得到以下结果：

**结果1：**

```
Id1:    Id2:    Char1:    Char2:    ...   CharN:
123a    ABC     c1a       c2a       ...   cNa
123b    DEF     c1b       c2b       ...   cNb 
```

而且，在同一个数据库中，我有一个基于`Id2`以下内容的“映射表”：

**映射表：**

```
Id1:    Id2:
123a    ABC
234a    ABC
345a    ABC
456a    ABC
123b    DEF
234b    DEF 
```

而且，现在我想做的是`Id1`在匹配表中为每个`Id2`匹配的结果复制我的结果 - 给我最终结果：

**期望的结果：**

```
Id1:    Id2:    Char1:    Char2:    ...   CharN:
123a    ABC     c1a       c2a       ...   cNa
234a    ABC     c1a       c2a       ...   cNa
345a    ABC     c1a       c2a       ...   cNa
456a    ABC     c1a       c2a       ...   cNa
123b    DEF     c1b       c2b       ...   cNb
234b    DEF     c1b       c2b       ...   cNb 
```

换句话说，对匹配`Id1`的映射表中的每条记录重复更改结果`Id2`。

我正在尝试使用某种外部联接来做到这一点，但我根本无法获得正确的语法！

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:30:28.487

如果我正确理解您的问题，您不想加入 Id1，而是加入 Id2。试试这个：

```
SELECT M.Id1, M.Id2, R.Char1, R.Char2
FROM Mapping M 
   JOIN Result1 R ON M.Id2 = R.Id2 
```

如果您在 Result1 表中具有 Id2 的重复行，这可能会返回重复记录，在这种情况下，您必须告诉我们将其匹配到哪个记录或使用重复记录。

这是[SQL Fiddle](http://sqlfiddle.com/#!4/73dbc/1)。

祝你好运。

# xtk - X.matrix.rotate 似乎不起作用

> ID：14588679
> 
> 赞同：0
> 
> 时间：2013-01-29T17:27:57.163
> 
> 标签：xtk

所以，我一直有xtk的问题

var rotate = m.rotate($ANGLE, $IAXIS);

现在已经有相当长的一段时间了。基本上，我想做的是围绕某个轴在空间中旋转单个对象，而不移动其他对象或相机。我的想法是通过在包含对象的 transform.matrix 的 X.matrix 上应用旋转函数来做到这一点。

问题是，我根本无法让 X.matrix.rotate 工作。谁能给我至少一些示例函数调用的外观，以及如何定义 $IAXIS 因为我怀疑这可能是问题所在。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:58:10.823

啊，目前的轴应该是 goog.math.Vec3 就像在 camera3d.js 中一样

```
 var yAxisVector = new goog.math.Vec3(parseFloat(this._view.getValueAt(1, 0)),
      parseFloat(this._view.getValueAt(1, 1)), parseFloat(this._view
          .getValueAt(1, 2)));

  // we rotate around the Y Axis when the mouse moves along the screen in X
  // direction
  var rotateX = identity.rotate(angleX, yAxisVector); 
```

由于 goog.math.Vec3 在编译期间被最小化，我们现在还允许将轴作为数组 [x,y,z] 传递。

但是要转换一个对象，它更容易使用

```
var o = new X.object();
o.transform.rotateX(10);
o.transform.rotateY(10);
o.transform.rotateZ(10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:48:15.303

只是对此的更新：由于 Google 友好地对其闭包库进行了一些重大更改，我发现四元数表示法最适合解决这个问题。感谢大家的评论！

# python - 带有 Opencv Python 的 FREAK 描述符

> ID：14588682
> 
> 赞同：13
> 
> 时间：2013-01-29T17:28:05.577
> 
> 标签：python, opencv, feature-detection, freak

我试图使用 Opencv 在 Python 中实现 FREAK Descriptor。这是我正在使用的代码：

```
def surf_freak_detect(image,hessianThreshold):
    surfDetector = cv2.SURF(hessianThreshold)
    surfDetector=cv2.GridAdaptedFeatureDetector(surfDetector,50)
    keypoints = surfDetector.detect(image,None) 
    freakExtractor = cv2.DescriptorExtractor_create('FREAK')
    keypoints,descriptors= freakExtractor.compute(image,keypoints)
    del freakExtractor
    return keypoints,descriptors 
```

这是**初始化 Freak Descriptor**的正确方法吗？通过进行一些调试，我发现解释器在计算描述符时需要很长时间，然后最终崩溃。正确检测关键点。奇怪的是，**它有时有效**，**有时只是崩溃**！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-17T10:47:11.310

如果正确检测到关键点但程序在生成描述符时崩溃，那是因为**描述符区域**（围绕关键点）从图像中出来，并且**对不存在的位置进行了内存访问**。

您必须以某种方式限制怪异描述符的操作区域。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-20T03:55:31.933

现在 OpenCV 3.0 中有 FREAK 的 Python 绑定。[此处](http://docs.opencv.org/3.0-beta/modules/xfeatures2d/doc/extra_features.html?highlight=freak "这里")描述了其配置选项。它似乎缺少有关如何在 Python 中实际调用它的文档，但您可以像这样在 Python 中使用它：

```
freakExtractor = cv2.xfeatures2d.FREAK_create()
keypoints,descriptors= freakExtractor.compute(image,keypoints) 
```

（您必须从单独的特征检测器中获取关键点，就像您在上面的代码中所做的那样。）

# mysql - 如何在 MySQL 中的 varchar 字段上连接表

> ID：14588684
> 
> 赞同：4
> 
> 时间：2013-01-29T17:28:05.807
> 
> 标签：mysql

```
Table_1
type   |   description
Error      Some description
Success    Another description

Table_2
type   |   description
Error 1    Some description
Error 2    Another description
Error 3    Yet another description 
```

我需要通过 type 字段连接这两个表，这是两个表中的 varchar 数据类型。问题是，由于“错误”与“错误 1”或“错误 2”不同，当我比较两个字段时，它返回空结果。我试过了：

```
select * from Table_1 a
left join Table_2 using (type)

select * from Table_2
where type in (select distinct type from Table_1) 
```

任何帮助将不胜感激，在此先感谢

编辑：当 Table_1 中的类型包含在 Table_2 中的类型中时，我应该能够得到结果。我知道这有点难，但问题是在 Table_1 中我有针对不同场景的一般错误，而 Table_2 包含这些相同的错误，但旁边有更多信息。Table_2 充满了来自日志文件的数据，我几乎可以做任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:30:28.493

你的连接应该没问题。第三种方式：

```
select * from Table_1 a
left join Table_2 b on a.type = b.type 
```

如果您没有得到任何结果，则`type`列的值*不相等*。

**更新**

鉴于您的评论指出这`Table_1.type`是 的子字符串`Table_2.type`，您可以更改连接运算符：

```
select * from Table_1 a
left join Table_2 b on b.type LIKE '%' + a.type + '%' 
```

这种做法并不理想。谨慎使用。

# xml - xml 到 excel Asp.net MVC。解析器错误。遇到没有匹配开始标签的结束标签“ss:Row”

> ID：14588689
> 
> 赞同：1
> 
> 时间：2013-01-29T17:28:18.157
> 
> 标签：xml, asp.net-mvc, export-to-excel

我正在尝试使用 xml 模板导出到 Excel。每次我运行它时，它都会在代码行“ `</ss:Row>`”处给我一个解析器错误，这是 foreach 循环中的错误，如果我注释掉 foreach 循环它工作正常。有人知道是否应该为此添加一些设置吗？

```
@model PBD_DealerConsole.Models.ExportData
@{
Layout = null;
Response.ContentType = "application/vnd.ms-excel";
//Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("Content-Disposition", "attachment; filename=" + Model.FileName);
//Content-Disposition is defined in RFC-2183
var rows = Model.DetailsGrid.Count + 1;
}
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<ss:Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
  <ss:Worksheet ss:Name="Datagrid">
<ss:Table ss:ExpandedColumnCount="17" ss:ExpandedRowCount="@rows" x:FullColumns="1" x:FullRows="1" ss:DefaultRowHeight="20">
  <ss:Row ss:AutoFitHeight="0">
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Part #</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Description</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Cost</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Core</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Source</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">12 Mo Sales</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Mo No Sale</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">QOH</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">QOO</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Qty Avail</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Qty Req</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Avg Mo Supply</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Stocking Status</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Bin</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Last Sale Date</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Last Received Date</Data>
    </ss:Cell>
    <ss:Cell ecProperty="">
      <ss:Data ss:Type="String">Pkg of</Data>
    </ss:Cell>
  </ss:Row>
  @foreach (var row in Model.DetailsGrid)
  {
    <ss:Row>
        <ss:Cell>
            <ss:Data ss:type="String">@row.PartNumber</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.Description</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.Cost</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.Core</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerSource</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerTwelveMonthSales</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerMonthsNoSale</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerQOH</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerQOO</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.SellerQtyAvail</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.QtyReq</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerAvgMonthSupply</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerStockingStatus</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerBin</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerLastSale</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.BuyerLastReceived</Data>
        </ss:Cell>
        <ss:Cell>
            <ss:Data ss:type="String">@row.PackageQty</Data>
        </ss:Cell>
    </ss:Row>
}
  </ss:Table>
</ss:Worksheet>
</ss:Workbook> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:57:17.353

我发现解决方案看起来只是一个错字，在 foreach 循环的单元格部分：

```
<ss:Data ss:type="String">@row.QtyReq</Data> 
```

ss:type 应该以大写字母开头：

```
<ss:Data ss:Type="String">@row.QtyReq</Data> 
```

它现在工作正常。

# php - 尽管请求，但无法访问扩展权限

> ID：14588691
> 
> 赞同：1
> 
> 时间：2013-01-29T17:28:31.530
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

嗨，我无法访问扩展权限，尽管我在登录对话框中要求他们并在 developer.facebook.com 的应用程序管理中添加了这些权限这是我的代码：

```
 $facebook = new Facebook(array(
  'appId'  => 'xxxxxxxx',
  'secret' => 'xxxxxxxxxx',
  'cookie' => false
));

// See if there is a user from a cookie
$fbuser = $facebook->getUser();

if ($fbuser) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $FBUSER = $facebook->api('/me');
    $FBUSER1 = $facebook->api('/me/permissions');
    print_r($FBUSER1);
  } catch (FacebookApiException $e) {
    print_r($e);
    $USER=false;
  }
}
    $loginUrl = $facebook->getLoginUrl(array("scope"=>"email, publish_actions")); 
```

print_r($FBUSER1) 的结果是： Array ( [data] => Array ( ) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:17:45.890

这里提到的问题是我稍后添加了对电子邮件和 publish_actions 的请求，而我的帐户不知何故不接受，否则使用测试帐户可以正常工作。所以我想我终于找到了答案:)

# html - HTML表格中的双行

> ID：14588692
> 
> 赞同：5
> 
> 时间：2013-01-29T17:28:38.847
> 
> 标签：html, qt, qt4, qt4.8

我在 Qt 中创建 HTML 表：

```
QString css;
css = "<style type=\"text/css\">";
css += "table.tbl {border-width: 1px;border-style: solid;border-color: black;margin-top: 0px;margin-bottom: 0px;color: black;}";
css += "table.tbl td {padding: 3px;}";
css += "table.tbl th {padding: 3px;}";
css+="</style>";

QString text;
text="<table width=\"100%\" cellspacing=\"0\" class=\"tbl\">";
text+=("<tr><th>1</th><th colspan=\"2\">2</th><th>3</th><th></th></tr>");
text+=("<tr><td>1</td><td>2</td><td>3</td></tr>");
text+=("<tr><td colspan=\"2\">4</td><td>5</td><td>6</td></tr>");
text+=("<tr><td>7</td><td>8</td><td>9</td></tr>");
text+=("<tr><td>7</td><td>8</td><td>9</td></tr>");
text+=("<tr><td>7</td><td>8</td><td>9</td><td>8</td><td>9</td></tr>");
text+=("<tr><td>7</td><td>8</td><td>9</td></tr>");
text+=("<tr><td>7</td><td>8</td><td>9</td></tr>");
text+=("<tr><td>10</td><td>11</td><td>12</td></tr></table>"); 
```

然后我打印为 pdf 文档：

```
QPrinter printer;
printer.setOrientation(QPrinter::Landscape);
printer.setPageMargins(10,10,10,50,QPrinter::Millimeter);
QTextDocument *document=new QTextDocument();
document->setHtml(css+text);
QPrintDialog *dlg = new QPrintDialog(&printer, this);
if (dlg->exec() != QDialog::Accepted)
    return;
document->print(&printer); 
```

我的表格有单边框，但第三列和第四列之间有双线？我怎样才能摆脱它？由于我的声誉，我不能使用图像标签，但我的桌子的图像在这里：http: [//imgur.com/KW3pZEf](http://imgur.com/KW3pZEf)

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-20T10:12:57.027

我知道这是一个老问题，但尚未得到解答。自上周以来，我一直在使用 QTextBrowser 处理 QT 和 HTML 表格，所以这个问题引起了极大的兴趣。在您的代码中，您为 td 和 th 设置了相等的填充“3px”：

```
css += "table.tbl td {padding: 3px;}";
css += "table.tbl th {padding: 3px;}"; 
```

我相信这就是问题所在。由于“th”有自己的内置填充，您需要将其自定义填充减少 1px。将上面的代码替换为

```
css += "table.tbl td {padding: 3px;}";
css += "table.tbl th {padding: 2px;}"; 
```

应该做的伎俩。这是我在修改您的代码后实现的。

[![在此处输入图像描述](../Images/fde0a099ed3f54c8d79ea58dc3e1dd4e.png)](https://i.stack.imgur.com/aemjH.jpg)

# recursion - 使用递归创建 clojure 添加函数

> ID：14588695
> 
> 赞同：1
> 
> 时间：2013-01-29T17:28:41.303
> 
> 标签：recursion, clojure

我正试图用 clojure 来解决递归问题。我收到以下代码的堆栈溢出错误，有人能发现问题吗？

（我知道这是低效的，但它严格用于学习目的）

```
user=> (defn addall
         ([] 0)
         ([& x]
           (if (empty? x) 0)
           (+ (first x) (addall (rest x)))))
user/addall
user=> (addall 1)
StackOverflowError   clojure.lang.ArraySeq.next (ArraySeq.java:78) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:39:16.643

看起来你的括号是错误的——你`if`需要一个`else`表格。我怀疑你的意思是这样的：

```
(defn addall
  ([] 0)
  ([& x]
     (if (empty? x) 
         0   ;;; <=== no ')' after 0
         (+ (first x) (addall (rest x))))))  ;;; <== extra ')' here 
```

但是即使修复了这个问题，您的代码仍然是错误的：它假定使用多个参数调用它`(addall 1 2 3)`-- 但通过向自身传递一个列表来重复 -- `(addall [2 3])`。这会导致它陷入没有取得任何进展的循环中，您可以通过添加`print`语句来观察：

```
(defn addall
  ([] 0)
  ([& x]
     (print (str "new x: " x "\n"))
     (if (empty? x) 
         0   ;;; <=== no ')' after 0
         (+ (first x) (addall (rest x)))))) 
```

这实际上在我的计算机上产生了段错误！

此外，它有两个基本情况。我建议这样做：

```
(defn addall
  [xs]
  (if (empty? xs) 
      0
      (+ (first xs) 
         (addall (rest xs))))) 
```

用向量调用：

```
(addall [1 2 3]) 
```

或者，如果您想使用可变参数函数，您还需要`apply`：

```
(defn addall
  [& x]
  (print (str "new x: " x "\n"))
  (if (empty? x) 
      0
      (+ (first x) 
         (apply addall (rest x))))) ;;; <=== apply addall 
```

* * *

也就是说，您应该注意 Clojure 没有尾调用优化，这意味着此代码在输入中等大小时会失败。Clojure 鼓励使用`loop/recur`内置的序列处理函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:45:41.720

我认为这就是你想要的：

```
(defn addall ([x] (if (empty? x) 0 (+ (first x) (addall (rest x)))))) 
```

正如 Matt Fenwick 所提到的，您应该使用循环/递归。更惯用的方法是使用 reduce：

```
(reduce + [1 2 3 4 5]) 
```

clojure 中有很多很棒的工具，而且您通常不需要循环/递归或显式递归之类的东西。

# ember.js - emberjs，每个控制器中的错误控制器

> ID：14588696
> 
> 赞同：0
> 
> 时间：2013-01-29T17:28:45.680
> 
> 标签：ember.js

如果我有这样的模板：

```
<script type="text/x-handlebars" data-template-name="listbeer">
    {{#each controller}}
    <li>{{aname}}</li>
    {{/each}}
    </script> 
```

然后什么都不会显示。另一方面，如果我这样做：

```
<script type="text/x-handlebars" data-template-name="listbeer">
    {{#each DHApp.beerlistController}}
    <li>{{aname}}</li>
    {{/each}}
    </script> 
```

它有效，我从控制器显示的内容中获取列表。为什么是这样？在前一种情况下，我看到了什么控制器。请注意，我已将它们绑定在视图中，或者我认为：

```
DHApp.ListbeerView = Ember.View.extend({
        templateName: 'listbeer',
});
DHApp.listbeerView = DHApp.ListbeerView.create({
    controller: DHApp.listbeerController,
    contentBinding: 'controller.content'
}); 
```

所以我希望看到同样的情况。请注意，控制器是一个数组，正如我在上面所说的，如果我在每个循环中指定控制器

更新：如果我这样做

```
{{controller}} {{DHApp.listbeerController}} 
```

然后我得到

```
<DHApp.ListbeerController:ember192> <DHApp.ListbeerController:ember149> 
```

看起来我收到的是默认控制器，而不是我实例化的那个。

那么有没有办法将视图的控制器设置为我的实例化控制器。或者一种在路由之外获取自动实例化控制器的方法。我想访问控制器，这样我就可以在 ajax 响应、计时器和类似的东西中更新控制器模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:49:15.550

这很可能是上下文问题。默认情况下，控制器将是它被渲染到的模板的上下文。如果您执行以下操作：

```
 <script type="text/x-handlebars" data-template-name="listbeer">
  {{controller}}
  {{#each controller}} 
```

控制器很可能是 ApplicationController（如果没有显示更多的实现很难说）。

通常，您不会直接创建控制器，而是允许路由器创建控制器，这反过来将帮助您根据需要控制上下文。指南中有一些很好的例子：

[http://emberjs.com/guides/routing/rendering-a-template/](http://emberjs.com/guides/routing/rendering-a-template/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:43:27.097

如果您执行以下操作，情况会有所改善吗？因为需要使用get和set，而不是直接访问控制器。

```
DHApp.ListbeerView = Ember.View.extend({
        templateName: 'listbeer',
});
DHApp.listbeerView = DHApp.ListbeerView.create({
    controllerBinding: 'DHApp.listbeerController',
    contentBinding: 'controller.content'
}); 
```

此外，从代码的外观来看，您似乎使用的是旧版本的 Ember（或错误地实现了新的 Ember），因为如果控制器`DHApp`由 EmberJS 自动实例化，则无法再从变量中访问控制器，[而是处理与在路由器中与`this.controllerFor`](http://emberjs.com/guides/routing/setting-up-a-controller/)。

# c# - 模型粘合剂问题

> ID：14588698
> 
> 赞同：0
> 
> 时间：2013-01-29T17:28:48.597
> 
> 标签：c#, asp.net-mvc, model-binding

我在视图模型上有一个只读属性，它计算来自各种其他属性的值。我不希望它被帖子上的模型绑定器读取，因为并非所有源属性都可用。

```
public class MyView
{
     public int MyReadOnlyProperty
     {
         get 
         {
             int result;
             //do stuff 
             return result;
         }
     }
} 
```

我`[Bind(Exclude)]`在控制器方法中添加了一个属性，如下所示：

```
[HttpPost]
public ActionResult Create([Bind(Exclude = "MyReadOnlyProperty")]MyView viewModel)
{
} 
```

但是，活页夹仍会读取排除的属性。所以当我回发到上面的控制器方法时，`MyReadOnlyProperty`getter 会被执行；但*在*调用控制器方法之前。活页夹正在读取帖子上的属性似乎很奇怪：我希望它只是使用表单值设置它们。

谁能告诉我如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:31:20.773

试试这样：

```
[HttpPost]
public ActionResult Create(MyView viewModel)
{
   ModelState.Remove("MyReadOnlyProperty");
} 
```

希望能帮助到你

* * *

**编辑**

```
[Bindable(false)]
public int MyReadOnlyProperty
     {
         get 
         {
             int result;
             //do stuff 
             return result;
         }
     } 
```

# iphone - iPhone设备之间的蓝牙信号强度

> ID：14588699
> 
> 赞同：4
> 
> 时间：2013-01-29T17:28:48.777
> 
> 标签：iphone, ios, objective-c, ipad

我有两个通过蓝牙连接的 iphone 设备。是否有可能在这些设备之间获得信号强度？如果可能的话，如何？谢谢，KD

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T19:36:52.737

查看通过蓝牙将数据从一台设备传输到另一台设备的 Apple 示例项目。 [BTLE 苹果示例代码](http://developer.apple.com/library/ios/#samplecode/BTLE_Transfer/Introduction/Intro.html)

您可以通过 RSSI（接收信号强度指示）的值找出信号强度

在示例代码中，您将在收到数据时获得 RSSI 值。在 Project 中的 BTLECentralViewController.m 中检查以下方法：

```
- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI
{
    // Reject any where the value is above reasonable range
    if (RSSI.integerValue > -15) {
        return;
    }

    // Reject if the signal strength is too low to be close enough (Close is around -22dB)
    if (RSSI.integerValue < -35) {
        return;
    }

    NSLog(@"Discovered %@ at %@", peripheral.name, RSSI);

    // Ok, it's in range - have we already seen it?
    if (self.discoveredPeripheral != peripheral) {

        // Save a local copy of the peripheral, so CoreBluetooth doesn't get rid of it
        self.discoveredPeripheral = peripheral;

        // And connect
        NSLog(@"Connecting to peripheral %@", peripheral);
        [self.centralManager connectPeripheral:peripheral options:nil];
    }
} 
```

每次您从另一台设备收到广告数据时。您将从此收到一个 RSSI 值，您可以找到设备的强度和范围。

还可以查看[Wiki 上的 RSSI 详细信息](http://en.wikipedia.org/wiki/Received_signal_strength_indication)

我希望这会帮助你。

# android - Android：是否创建捆绑包

> ID：14588701
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:28:51.027
> 
> 标签：android, android-intent, bundle

> **可能的重复：**
> [意图和捆绑关系](https://stackoverflow.com/questions/7537877/intent-and-bundle-relation)

当我们需要将数据传递给另一个活动时，我看到了两种典型的方法：

1.  用于 Intent 对象的 putExtra 方法
2.  创建一个Bundle Object并使用Intent对象的putExtras方法

何时使用每种方法？优点还是缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:39:50.887

您只能使用 an 传递一组有限的值`Intent`，但如果您想将 10000 个值传递给 next `Activity`，在这种情况下，您可以创建一个`Bundle Object`并将所有值传递给它，然后轻松地将其`Bundle`放入您的 Intent 中。

这个问题之前回答过，请参考[Intent 和 Bundle 关系](https://stackoverflow.com/questions/7537877/intent-and-bundle-relation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:35:03.430

好吧，实际上我认为两者几乎相同，或者至少非常相似，最大的区别在于 Parcelable 和 Bundle 之间，

有关 Parcelable 的更多信息：[当您可以使用静态变量执行相同的任务时，为什么还要使用 parcelable？](https://stackoverflow.com/questions/6623697/why-use-parcelable-when-you-can-perform-the-same-task-using-static-variables)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:37:44.123

我认为这无关紧要......将Bundle写入另一个函数并读取它的数据更容易，而不是整个Intent。但是 Intents 的函数只是读取 Bundle

# java - JAX-WS Web 服务和 Spring 安全性

> ID：14588704
> 
> 赞同：2
> 
> 时间：2013-01-29T17:28:53.850
> 
> 标签：java, web-services, spring-security, jax-ws

我正在尝试为受 Spring Security 保护的应用程序开发 Web 服务。一切正常，除了一件事：我的 Web 服务应该是不安全的，并且 wsdl 应该在没有任何身份验证/授权的情况下提供。所以我添加了适当的拦截 URL 模式。但是，我无法访问 wsdl 页面。我被重定向到登录页面。通过良好的登录名/密码后，我可以访问 wsdl，但没有它们我不能。我尝试了很多模式，但都失败了。也许一些建议:)？

我的 Spring Security 代码（使用当前拦截 URL）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/resources/*" security="none" />

    <http auto-config="true" use-expressions="true">
        <intercept-url pattern="/auth/login" access="permitAll" />
        <intercept-url pattern="/auth/logout" access="permitAll" />
        <intercept-url pattern="/auth/denied" access="permitAll" />
        <intercept-url pattern="/**SampleInputImpl?wsdl**" access="permitAll" />
        <intercept-url pattern="/user" access="hasRole('ROLE_USER')" />
        <intercept-url pattern="/admin" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/*" access="isAuthenticated()" />

        <form-login login-page="/auth/login" authentication-failure-url="/auth/login?error=true"
            default-target-url="/" />

        <access-denied-handler error-page="/auth/denied" />

        <logout invalidate-session="true" logout-success-url="/auth/login?logout=true" />

    </http>

    <authentication-manager>
        <authentication-provider user-service-ref="userDetailsService">
            <password-encoder hash="md5" />
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:38:47.360

intercept-url 中的 Ant 模式不使用查询字符串，因此添加 ?wsdl 可能会导致 Spring Security 与您的 wsdl 不匹配。我建议尝试`<intercept-url pattern="/**/SampleInputImpl" access="permitAll" />`。

如果这不起作用，请提供您想要公开的 URL 并启用调试日志记录和发布日志。

# css - 用作背景图像时 SVG 的样式颜色

> ID：14588705
> 
> 赞同：2
> 
> 时间：2013-01-29T17:28:53.830
> 
> 标签：css, svg, background-image

> **可能重复：**
> [将 SVG 指定为背景图像并在 CSS 中设置 SVG 的样式？](https://stackoverflow.com/questions/7360723/specify-an-svg-as-a-background-image-and-also-style-the-svg-in-css)

当用作背景图像时，我需要更改 SVG 的颜色，如下所示：

`background-image:inline-image("../images/svg/test.svg");`

CSS 属性需要在*外部样式表*中。我知道它可以通过这样做从 SVG 文档链接：

`<?xml-stylesheet type="text/css" href="../../css/main.css" ?>`

这*在*将 SVG 嵌入 HTML 文档时有效：

`<embed id="envelope-svg" src="../images/svg/envelope.svg" type="image/svg+xml" />`

但是当用作背景图像时*不起作用。*这不可能吗？

# c# - 管理未在 Visual Studio 中引用的 DLL 的最佳方法是什么

> ID：14588709
> 
> 赞同：5
> 
> 时间：2013-01-29T17:29:07.627
> 
> 标签：c#, .net, visual-studio-2010, dll, dllimport

我正在使用 Visual Studio 2010 中的 C# .NET 项目。我正在集成一个具有 DLL 的硬件外围设备。我在我的项目中引用了 DLL 文件，并且代码编译/构建没有任何错误。当我运行我的应用程序时，我得到一个运行时错误，说它正在寻找另一个 DLL 文件。我在项目中引用的 DLL 似乎有 42 个其他 DLL 依赖于它。当我将这 42 个 DLL 放在输出目录 (bin/debug) 中时，应用程序运行得很好。

我的问题是：当 Visual Studio 无法将这些额外的 DLL 文件识别为依赖库时，管理这些额外 DLL 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:48:19.480

此方案与[部署 SQL Server Compact 文件](http://msdn.microsoft.com/en-us/library/aa983326%28v=VS.80%29.aspx)非常相似。在这种情况下，它被称为`Private File–Based Deployment`.
它还需要应用程序依赖的一些外部（非托管）DLL。

它归结为将 DLL 包含在您的项目中并将它们的`Copy to Output Directory`属性设置为`Copy if newer`. 成功构建后，它们将被复制到目标文件夹。

编辑：
根据您的评论，您似乎在安装应用程序时遇到问题（您在问题中完全没有提及），并且您已经`Custom Action`为安装程序编写了一个将这 42 个 DLL 复制到目标的问题。
CA 不需要这样做。只需右键单击您的安装程序项目 -> 查看 -> 文件系统。选择`Application Folder`，在右侧右键单击并选择`Add File`并添加您的 42 个 DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T18:21:07.597

如果您打算在编译时管理这些文件，您可以将构建后事件添加到项目中，以将所有必要的文件复制到输出目录。在此处将标志添加到 xcopy 以仅在更改时复制。

如果您的意思是在运行时安装程序将是您最好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T18:01:49.623

或者，您可以使用 ILMerge 之类的工具将它们组合起来以组合程序集。您只需添加对生成的程序集的引用。

[如何将多个程序集合并为一个？](https://stackoverflow.com/questions/8077570/how-to-merge-multiple-assemblies-into-one)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T18:15:12.503

您应该创建一个安装程序包，如果项目输出根据安装程序的需要进行配置，几乎所有安装程序都会引入引用 dll 的所有依赖项。这是我能想到的动态自动引入非引用依赖项的唯一方法。

# jquery - jQuery列表图标更改

> ID：14588710
> 
> 赞同：3
> 
> 时间：2013-01-29T17:29:11.437
> 
> 标签：jquery, html, list, dynamic, webpage

我有一个下拉列表和一些代码来执行操作以下拉孩子并更改列表图标：此小提琴上的完整设置：http: [//jsfiddle.net/Gwbfd/3/](http://jsfiddle.net/Gwbfd/3/)

```
$(document).ready(function(){
 $('.drawer').hide();
  $('.handle').click(function(){
    $(this).siblings().slideToggle('slow');
    $(this).closest('ul').toggleClass('expanded');
    $(this).closest('ul').toggleClass('collapsed');
                               });  
                             }); 
```

该列表是多层的，我遇到的问题是第二层有多个孩子，当我单击第二层孩子之一时，它会更改两个孩子的图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:10:58.027

您需要`li`直接设置元素的样式，这涉及对代码的一些修改：

```
$(document).ready(function(){
   $('.drawer').hide();
   $('li:has(ul)').addClass("collapsed");
   $('.handle').click(function(){
      $(this).siblings().slideToggle('slow');
      $(this).closest('li').toggleClass('expanded');
      $(this).closest('li').toggleClass('collapsed');
  });
}); 
```

在 CSS 中：

```
li.expanded{
list-style: outside url('http://www.theparisreview.org/images/expand-icon.png') none;
    margin-left: 30px;
}

li.collapsed{
    list-style: outside url('http://www.theparisreview.org/images/collapse-icon.png') none;
    margin-left: 30px;
} 
```

演示：http: [//jsfiddle.net/Gwbfd/8/](http://jsfiddle.net/Gwbfd/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:59:36.373

您正在调整包含两个次要项目的整个列表的列表样式。您需要在 li 级别而不是 ul 级别更改类。

```
 $('.handle').click(function(){
    var $this = $(this);
    $this.siblings().slideToggle('slow');
    $this.closest('li').toggleClass('expanded');
    $this.closest('li').toggleClass('collapsed');
                               });  
                             }); 
```

这不是一个完美的修复，但显示了一个有点工作的版本。我只是将 ul 更改为 li 并更新了 html。

[http://jsfiddle.net/Gwbfd/5/](http://jsfiddle.net/Gwbfd/5/)

# typescript - 如何连接从 TypeScript 0.8.0.0 升级到 0.8.1.1 的项目

> ID：14588714
> 
> 赞同：2
> 
> 时间：2013-01-29T17:29:36.677
> 
> 标签：typescript

在将 TypeScript 从 0.8.0.0 升级到 0.8.1.1 后，我正在重新访问一个旧项目。

Visual Studio 列出了这个错误：

命令 "C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0\tsc" "...\tsFile1.ts" "...\tsFile2.ts" 以代码 3 退出

但是，我的系统上现在不存在 tsc 文件的路径 ...\0.8.0.0... 。相反，它的 0.8.1.1。此路径信息存储在哪里？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:32:02.037

编辑您的项目文件；找到**BeforeBuild**条目，然后更正那里的路径。

例如

```
<Target Name="BeforeBuild">
 <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot;  @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

将其更改为

```
<Target Name="BeforeBuild">
 <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.1.1\tsc&quot;  @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

# algorithm - 简单的错误检查以替换闪存中的重复代码

> ID：14588717
> 
> 赞同：0
> 
> 时间：2013-01-29T17:29:54.670
> 
> 标签：algorithm, checksum, crc

我在**闪存**中有一个 16 位字段，用于存储*8 位数字*（更具体地说，是从 0 到 254 的封闭范围内的值）。我想使用额外的 8+ 位进行错误检查（不需要纠错），最明显的方法是简单地重复该值两次。**XMODEM**数据包编号方法仅稍微不那么明显：将数字存储在第一个八位字节中，255 减去第二个八位字节中的数字。

是否有更好的选项可以在可用空间中提供更强大的错误检测，并且易于实施且执行速度快？也许可以利用闪存位更可能从**1 变为 0**而不是**0 变为 1**的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:21:55.190

预先注意：我认为 XMODEM 方法是合理的，所以我会接受它并开始做一些更重要的事情。无论如何，你用算法标记了这个问题，所以你也可以用证明这一点的方式来解决这个问题......

由于您需要错误检测，最重要的部分是可以检测到任何更改的单个位，因此数字的两个表示不能仅相隔一个位，最好它们尽可能相距遥远。此外，并非每一个位的变化都同样可能发生。

如果将其建模为图形，您将获得由 16 位数字标识的顶点以及定义该转换概率的两个顶点之间的有向边。这将是一个完整的图表，因此请考虑如何存储它（如果您完全存储它而不是按需计算它）。您现在正在搜索的是一个正好有 255 个顶点且最大权重的圆形路径。

为此，只需使用具有重边倾向的 DFS 搜索任何具有 255 个顶点的圆形路径。从这个圆圈中，取其最轻的边并从图中删除所有非较重的边。然后，在生成的（可能已断开连接！）图表中重复搜索一个图表，直到您再也找不到一个。

最后，将您的输入值映射到（其中一个）剩余圆圈的顶点 ID，以将它们存储在您的闪存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:08:26.620

如果我正确理解了您的困境，那么您正在尝试检测由于使用闪存而消失的位。问题是如果它们在一个八位字节中消失，那么它们也会在其他八位字节中消失。所以这告诉你简单地复制是行不通的。

就个人而言，我会否定这个数字并存储它。这样，例如，如果值为 1（大部分为零），您将使用 11111110（大部分为 1），因此数据逐渐消失将是显而易见的。

如果退化到数据接近全零的地方真的很糟糕，那么问题就会变得更加严重。所以使用否定会有很大帮助，因为没有任何情况下所有数据都应该为零。

# java - 检查 Java 中的内存布局

> ID：14588718
> 
> 赞同：6
> 
> 时间：2013-01-29T17:29:58.407
> 
> 标签：java, memory-management

我正在尝试继承，出于教育目的，我想检查为各种对象分配的地址和对象中的字段。有没有一个工具可以让我看到 JVM 正在使用什么内存以及它的用途。

例如，如果我有两个类：

```
class A { int i,j; int f { ...} }
class B extends A { int c; /* more methods, overriding f and declaring new ones as well */ } 
```

并在对象中实例化这些类`a`和`b`.

有没有一种工具可以用来分析内存使用情况并准确查看为这些分配了哪些内存？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-19T03:20:14.150

由于发布了原始问题，情况发生了一些变化。

**jol**工具（Aleksey Shipilev的“java 对象布局”）现在是 OpenJDK 的一部分，允许您检查类的实际内存布局和使用情况。[http://openjdk.java.net/projects/code-tools/jol/](http://openjdk.java.net/projects/code-tools/jol/)

示例输出如下所示：

```
$ java -jar jol-cli/target/jol-internals.jar java.util.HashMap
  Running 64-bit HotSpot VM.
  Using compressed references with 3-bit shift.
  Objects are 8 bytes aligned.
  Field sizes by type: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]
  Array element sizes: 4, 1, 1, 2, 2, 4, 4, 8, 8 [bytes]

  java.util.HashMap object internals:
   OFFSET  SIZE       TYPE DESCRIPTION                    VALUE
        0     4            (object header)                01 00 00 00 (00000001 00000000 00000000 00000000)
        4     4            (object header)                00 00 00 00 (00000000 00000000 00000000 00000000)
        8     4            (object header)                0f 0f 3e e0 (00001111 00001111 00111110 11100000)
       12     4        Set AbstractMap.keySet             null
       16     4 Collection AbstractMap.values             null
       20     4        int HashMap.size                   0
       24     4        int HashMap.threshold              16
       28     4      float HashMap.loadFactor             0.75
       32     4        int HashMap.modCount               0
       36     4        int HashMap.hashSeed               0
       40     4    Entry[] HashMap.table                  []
       44     4        Set HashMap.entrySet               null
  Instance size: 48 bytes (estimated, add this JAR via -javaagent: to get accurate result)
  Space losses: 0 bytes internal + 0 bytes external = 0 bytes total 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:41:42.487

我想首先有一个关于如何在某些操作系统上运行 JVM 的图像是有启发性的，所以看看[The Java Virtual Machine](http://www.artima.com/insidejvm/ed2/jvmP.html)。此外，一个相关的问题是[https://softwareengineering.stackexchange.com/questions/151076/approaching-java-jvm-internals](https://softwareengineering.stackexchange.com/questions/151076/approaching-java-jvm-internals)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:33:36.403

不，不存在这样的工具，尽管[本文](http://www.codeinstructions.com/2008/12/java-objects-memory-structure.html)解释了内存布局如何在例如 OpenJDK 中工作的基础知识。（值得注意的是，类中的其他方法在该类的实例中占用零开销。）

# javascript - 适用于所有浏览器的 Tinymce onFocusOut

> ID：14588720
> 
> 赞同：2
> 
> 时间：2013-01-29T17:30:00.333
> 
> 标签：javascript, tinymce, onkeyup

我正在使用 tinymce 编辑器，遇到了一些麻烦。我正在尝试进行一些验证，因此我使用了 onKeyUp 进行验证，但是当您进入该字段时，它会立即给用户一个错误。我想通过尝试执行诸如 onFocusOut 之类的操作来解决此问题，以便仅在您单击开箱即用时才显示错误。

到目前为止我有这个

```
ev.onInit.add(function(ev, evt) {
    tinymce.dom.Event.add(ev.getDoc(), 'blur', function(e, t) {
       alert('Worky Work Work!');
    })
) 
```

但它只在Firefox中工作。我真的需要它在 Chrome 和 Safari 中工作，但我一直找不到所需的东西。帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:25:40.177

您应该将模糊处理程序应用于编辑器 iframe 正文而不是 iframe 文档。这是一个工作小提琴的链接：http: [//fiddle.tinymce.com/kCcaab/1](http://fiddle.tinymce.com/kCcaab/1)

# java - 无法将 java.util.ArrayList 的实例反序列化出 VALUE_STRING

> ID：14588727
> 
> 赞同：65
> 
> 时间：2013-01-29T17:30:16.827
> 
> 标签：java, json, arraylist, jackson, json-deserialization

我有一个用 Jersey 构建并部署在 AppEngine 中的 REST 服务。`application/json`REST 服务实现了使用媒体类型的动词 PUT 。数据绑定由 Jackson 执行。

动词使用以 JSON 表示的企业-部门关系

```
{"name":"myEnterprise", "departments":["HR","IT","SC"]} 
```

在客户端，我使用 gson 将 JSON 表示形式转换为 java 对象。然后，我将对象传递给我的 REST 服务，它工作正常。

**问题：**

当我的 JSON 表示在集合中只有一项时

```
{"name":"myEnterprise", "departments":["HR"]} 
```

服务无法反序列化对象。

```
ATTENTION: /enterprise/enterprise: org.codehaus.jackson.map.JsonMappingException: 
Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token at 
[Source: org.mortbay.jetty.HttpParser$Input@5a9c5842; line: 1, column: 2 
```

正如其他用户所报告的那样，解决方案是添加标志`ACCEPT_SINGLE_VALUE_AS_ARRAY`（例如，[Jersey: Can not deserialize instance of ArrayList out of String](https://stackoverflow.com/questions/14319573/jersey-can-not-deserialize-instance-of-arraylist-out-of-string)）。尽管如此，我并没有控制它，`ObjectMapper`因为在服务方面它是由杰克逊透明地制作的。

**问题：**

有没有办法`ObjectMapper`在服务端配置启用`ACCEPT_SINGLE_VALUE_AS_ARRAY`？注释？`web.xml`?

**代码详情**

Java 对象：

```
@XmlRootElement
public class Enterprise {
    private String name;
    private List<String> departments;

    public Enterprise() {}

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public List<String> getDepartments() {
        return departments;
    }
    public void setDepartments(List<String> departments) {
        this.departments = departments;
    }
} 
```

REST 服务端：

```
 @PUT
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    @Path("/enterprise") 
    public Response putEnterprise(Enterprise enterprise,
            @Context HttpServletRequest req){
         ...
    } 
```

客户端：

```
...
String jsonString = "{\"name\":\"myEnterprise\", \"departments\":[\"HR\"]}";
Enterprise enterprise = gson.fromJson(jsonString, Enterprise.class);
System.out.println(gson.toJson(enterprise));
response = webResource              
           .type(MediaType.APPLICATION_JSON)
           .put(ClientResponse.class,enterprise);
if (response.getStatus() >= 400) {
        throw new RuntimeException("Failed : HTTP error code : " + response.getStatus());
}
... 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-17T23:19:23.360

这是我的老问题的解决方案：

我实现了自己`ContextResolver`的以启用该`DeserializationConfig.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY`功能。

```
package org.lig.hadas.services.mapper;

import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;

import org.codehaus.jackson.map.DeserializationConfig;
import org.codehaus.jackson.map.ObjectMapper;

@Produces(MediaType.APPLICATION_JSON)
@Provider
public class ObjectMapperProvider implements ContextResolver<ObjectMapper>
{
   ObjectMapper mapper;

   public ObjectMapperProvider(){
       mapper = new ObjectMapper();
       mapper.configure(DeserializationConfig.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);
   }
   @Override
   public ObjectMapper getContext(Class<?> type) {
       return mapper;
   }
} 
```

在`web.xml`我将我的包注册到 servlet 定义中......

```
<servlet>
    <servlet-name>...</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>...;org.lig.hadas.services.mapper</param-value>        
    </init-param>
    ...
</servlet> 
```

...所有其余的都是由泽西/杰克逊透明地完成的。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-03-27T08:12:35.007

将此属性设置为 ObjectMapper 实例有效，

```
objectMapper.enable(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-04-09T10:10:24.040

你试试

```
[{"name":"myEnterprise", "departments":["HR"]}] 
```

方括号是关键点。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-05-22T12:40:58.520

从 Jackson 2.7.x+ 开始，有一种方法可以注释成员变量本身：

```
 @JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)
 private List<String> newsletters; 
```

更多信息：[杰克逊@JsonFormat](https://static.javadoc.io/com.fasterxml.jackson.core/jackson-annotations/2.9.8/com/fasterxml/jackson/annotation/JsonFormat.Feature.html#ACCEPT_SINGLE_VALUE_AS_ARRAY)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-03-10T13:37:43.910

对于通过搜索错误消息找到此问题的人，如果您在注释中犯了错误，例如使用单值字段的名称`@JsonProperty`注释-typed 属性，您也会看到此错误：`List`

```
@JsonProperty("someSingleValuedField") // Oops, should have been "someMultiValuedField"
public List<String> getMyField() { // deserialization fails - single value into List
  return myField;
} 
```

# sql-server-2008 - 我可以将 SQL Server Management Studio 2008 用于 2012 DB 吗？

> ID：14588731
> 
> 赞同：1
> 
> 时间：2013-01-29T17:30:29.250
> 
> 标签：sql-server-2008, sql-server-2012

这是必需的，因为所有开发人员都使用 Windows XP 桌面，并且 XP 不支持 SSMS 2012。所有开发人员的桌面上都安装了 SSMS 2008。如果可以从 SSMS 2008 连接到 SQL Server 2012，有什么限制 - 如果有的话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T08:05:24.547

不，你不能。
不支持。
除非他们发布了我一无所知的更新/服务包。

你需要安装 SSMS 2012。
因为你不能在 XP 上安装，也许 Navicat 可以工作。

# jquery - 使用 PhoneGap 在 Web 应用程序中显示来自远程服务器的图像

> ID：14588738
> 
> 赞同：0
> 
> 时间：2013-01-29T17:30:46.063
> 
> 标签：jquery, html, cordova, web-applications, mobile

我正在使用 PhoneGap 在 Android、iOS 和 Blackberry 上创建一个 HTML5 新闻应用程序。

这个应用程序从我用 PHP 构建的网站中提取文章。文章包含标题和内容以及图像。

我使用 JSON 获得文章标题和内容。获取图像的最佳方法是什么？

我应该只获取图像路径并在应用程序中显示对远程图像的引用吗？这种方法有什么问题（我认为Apple可能不赞成这种方法）？还是我应该下载图像并将其保存到文件系统？因此，即使离线我也会拥有它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:47:22.467

我认为你应该下载它并保存到文件系统，你可以检查远程服务器的大小，如果它改变了重新下载。使用大小也可以确保图像已成功下载。我认为苹果会对此很好，因为您没有将整个网站作为应用程序引用，而只是一些外部内容。

# apache - 如何在 Apache 网络服务器上的 ErrorDocument 或 DirectryIndex 中设置二进制文件下载

> ID：14588740
> 
> 赞同：0
> 
> 时间：2013-01-29T17:30:54.377
> 
> 标签：apache, .htaccess, security, malware

我想到的只是一个理论上的安全问题。

当您访问目录索引或错误文档时，是否可以通过 httaccess 设置 Apache 网络托管以向您提供二进制文件而不是文档？

它尝试了这样的事情，但没有奏效。我确信这是可能的，因为我遇到的一些恶意软件使用这种技术进行传播。任何人都知道它是如何完成的？

```
<目录/aaa>
    DirectoryIndex binaryPayload.exe
</目录>

ErrorDocument 404 binaryPayload.exe

```

这是一个明显的安全风险。你会如何建议你的 Apache 设置多个虚拟主机来抵抗这种线程？

# javascript - Angular JS 响应由 Javascript 所做的更改

> ID：14588741
> 
> 赞同：1
> 
> 时间：2013-01-29T17:30:55.410
> 
> 标签：javascript, angularjs

我是 AngularJS 的新手。我试图在特定值更改时更新我的​​元素，但是当值通过 JS 更改时不会触发更改；它们仅在输入框中手动输入/模糊值时才会发生。

我的简单示例来自 Angular 开发指南，在这里： *** [http://jsfiddle.net/3R5wn/](http://jsfiddle.net/3R5wn/) ***

```
<!-- Angular HTML -->
<div ng-app="">
<div ng-controller="InvoiceCntl">
  <b>Invoice:</b>
  <br>
  <br>
  <table>
   <tr><td>Quantity</td><td>Cost</td></tr>
   <tr>
   <td><input type="integer" min="0" ng-model="qty" required id="myqty"></td>
   <td><input type="number" ng-model="cost" required ></td>
   </tr>
  </table>
  <hr>
  <b>Total:</b> {{qty * cost | currency}}
</div>
</div>
<button onclick="document.getElementById('myqty').value=document.getElementById('myqty').value*1+1;">Increment Qty</button> 
```

角度控制器 JS：

```
//Angular Controller JS
function InvoiceCntl($scope) {
   $scope.qty = 1;
   $scope.cost = 19.95;
} 
```

请注意，当用户手动（通过键盘）更改数量/价格框中的值时，总数会更新。但是，当用户单击“增量”按钮时，总数不会更新。

谁能在我的简单示例中解释如何克服这个问题？我想避免一些过于 hacky 的事情，那么有处理这种情况的最佳实践吗？

笔记：

*   我打算在我的真实示例中使用 jQuery 微调器小部件来进行递增
*   我将使用自定义函数进行计算（与简单表达式相比）
*   我假设上述简单解决方案的解决方案将转化为我的微调器/自定义函数用例

**大编辑**

这是我正在使用的实际代码（抱歉，一个封闭的网络问题阻止了我首先发布）：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html ng-app="">
  <head>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/excite-bike/jquery-ui.css" type="text/css" rel="stylesheet" />

    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js" type="text/javascript"></script>
    <script src="script.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js" type="text/javascript"></script>
    <script>
    //inline JS here
    $(function() {
        var spinner = $( "#qtySpinner" ).spinner({
            spin: function( event, ui ) {
                qty++;
            }
        });
    });
    </script>
    <title>Angular Testing</title>
  </head>
  <body>
    <div ng-controller="InvoiceCntl">
      <b>Invoice:</b><br>
      <br>
      <table>
        <tr>
          <td>
            Quantity
          </td>
          <td>
            Cost
          </td>
        </tr>
        <tr>
          <td>
            <input id="qtySpinner" type="integer" min="0" ng-model="qty" required="" ng-change="calculate(qty,cost);">
          </td>
          <td>
            <input type="number" ng-model="cost" required="">
          </td>
        </tr>
      </table>
      <hr>
      <b>Total:</b> {{calculate(qty,cost)}}
    </div>
    <br>
    <b>Dummy Experimental Buttons</b>
    <br>
    <button onclick="alert($('#qtySpinner').val());$('#qtySpinner').val(10);">Set 10</button>
    <button ng-click="qty++">Inc</button>
  </body>
</html> 
```

Javascript在这里：

```
function InvoiceCntl($scope) {
   $scope.qty = 1;
   $scope.cost = 19.95;
   $scope.calculate = function calculate(xval, yval) {
                        return xval * yval;
                    };
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T17:32:19.627

Angular 的构建使您*不必*与 DOM 交互。相反，只需将计算 - 作为简单的 JavaScript - 放在一个`ng-click`属性中：

```
<button ng-click="qty++">Increment Qty</button> 
```

* * *

或者，您可以在您的 上放置一个方法`$scope`，然后您可以从内部调用该方法`ng-click`：

```
function InvoiceCntl($scope) {
   $scope.qty = 1;
   $scope.cost = 19.95;
   $scope.increment = function () {
      $scope.qty++;
   };
} 
```

然后，在您看来，只需调用该函数：

```
<button ng-click="increment()">Increment Qty</button> 
```

* * *

**更新：**要从角度摘要循环之外更新范围，您必须首先获取对范围的引用，进行更改，然后手动调用`$digest`，以便更新视图：

```
var scope = angular.element('#qtySpinner').scope();
scope.qty++;
scope.$digest(); 
```

# ios - 如何调试超载的篮板？

> ID：14588748
> 
> 赞同：14
> 
> 时间：2013-01-29T17:31:23.277
> 
> 标签：ios, core-graphics, instruments

我有一个`UIView`子类的几个实例`CAShapeLayer`作为子层添加到其层属性。

我正在`UIBezierPath`对这些层中的每一个进行动画更改，这看起来很棒并且性能很好，但是当我通过Instruments 中的**Activity Monitor**运行它时，它会在**进程****上达到约 90% 的 CPU 。`backboardd`**

 **我怎样才能获得有关这里发生的事情的更多信息？`backboardd`是 GPU 上核心图形/核心动画的幕后渲染，对吧？是否支持在某个地方的 Instruments 中进行进一步调试？我可以用**GCD**做一些花哨的事情来减少负载`backboardd`吗？

**编辑：**在与 Apple 将其升级为 TSI 后，他们已经确认这是这么多动画 CAShapeLayers 的“预期行为”。叹。他们确实[在此链接](http://developer.apple.com/library/ios/#qa/qa1673/_index.html)上提供了一个建议，其中包括不断暂停和取消暂停动画以模拟较低的帧速率。（因为这是每个 DisplayLink 锁定动画帧的计算结果`backboardd`）

```
-(void)pauseLayer:(CALayer*)layer {

    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
    layer.speed = 0.0;
    layer.timeOffset = pausedTime;
}

-(void)resumeLayer:(CALayer*)layer {

    CFTimeInterval pausedTime = [layer timeOffset];
    layer.speed = 1.0;
    layer.timeOffset = 0.0;
    layer.beginTime = 0.0;
    CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
    layer.beginTime = timeSincePause;
} 
```

最后，优秀的 Apple 技术人员指出，动画帧率控制“顺便提一句，会提出一个不错的 API 增强请求”——所以我正在做一个，**[你也应该这样](https://bugreport.apple.com/)**做。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:55:00.040

您需要尝试隔离您的问题。听起来您的图层层次结构不能很好地缩放并且变得太复杂了。

如果您使用较少的子类 CAShapeLayer 实例，您会看到相同的 CPU 活动吗？或者如果您尝试执行较少的动画？**

# sql - 在 MS SQL Server 2008 的 Pivot 中计算水平总计

> ID：14588751
> 
> 赞同：1
> 
> 时间：2013-01-29T17:31:28.937
> 
> 标签：sql, sql-server, pivot, subtotal

我想知道如何计算行小计。

我的表如下所示：

```
FCode   DMAR15  DMAR02  DMAR13  DMAR06
F83006     292     334     111     152
F83025     272     298      80     140
F83048     166     179      56      57
F83049      27      32      15      17
F83050     105     112      45      53
F83635     139     153      41      41 
```

我的脚本是：

```
SELECT [FCode],
       [DMAR15],
       [DMAR02],
       [DMAR13],
       [DMAR06],
       [PCVDR41],
       [PCVDR42],
       [CLDP031],
       [CLDP003],
       [CLDP012],
       [CLDP028],
       [CLDP023],
       [CLDP021],
       [CLDP016],
       [CLDP022]
FROM   (SELECT [FCode],
               [Aggregate],
               [QName]
        FROM   [dbo].[tblMiquestResults]
        WHERE  AuditDate = '2012-09-30') AS SourceTable 
PIVOT (AVG (Aggregate) FOR [QName] IN ([DMAR15], [DMAR02], [DMAR13], 
                                       [DMAR06], [PCVDR41], [PCVDR42], 
                                       [CLDP031], [CLDP003], [CLDP012], 
                                       [CLDP028], [CLDP023], [CLDP021], 
                                       [CLDP016], [CLDP022])) AS P 
```

我想让它看起来像这样：

```
FCode   DMAR15  DMAR02  DMAR13  DMAR06
F83006     292     334     111     152
F83025     272     298      80     140
F83048     166     179      56      57
F83049      27      32      15      17
F83050     105     112      45      53
F83635     139     153      41      41
Total     1001    1108     348     460 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:55:48.110

一种方法

```
SELECT CASE WHEN GROUPING([FCode]) = 1 THEN 'Total' ELSE [FCode] END AS [FCode],
       SUM([DMAR15]) AS DMAR15,
       SUM([DMAR02]) AS [DMAR02]
        /*TODO: Rest of columns*/
FROM   (SELECT [FCode],
               [Aggregate],
               [QName]
        FROM   [tblMiquestResults]) AS SourceTable 
PIVOT (AVG (Aggregate) FOR [QName] IN ([DMAR15], [DMAR02], [DMAR13], 
                                       [DMAR06], [PCVDR41], [PCVDR42], 
                                       [CLDP031], [CLDP003], [CLDP012], 
                                       [CLDP028], [CLDP023], [CLDP021], 
                                       [CLDP016], [CLDP022])) AS P 
GROUP BY GROUPING SETS ((FCode),()) 
```

[SQL小提琴](http://www.sqlfiddle.com/#!6/35cd5/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:12:31.187

好吧，鉴于您的上表（不查看您的查询），以下是执行`rowsum`.

[SQLFIDDLE 演示](http://sqlfiddle.com/#!3/1d81e4/10)

```
select a.fcode, a.DMAR15,  a.DMAR02,  
a.DMAR13,  a.DMAR06, (a.DMAR15 +  a.DMAR02 +
a.DMAR13 +  a.DMAR06) as RowSum
from demo a
;

|  FCODE | DMAR15 | DMAR02 | DMAR13 | DMAR06 | ROWSUM |
-------------------------------------------------------
| F83006 |    292 |    334 |    111 |    152 |    889 |
| F83025 |    272 |    298 |     80 |    140 |    790 |
| F83048 |    166 |    179 |     56 |     57 |    458 |
| F83049 |     27 |     32 |     15 |     17 |     91 |
| F83050 |    105 |    112 |     45 |     53 |    315 |
| F83635 |    139 |    153 |     41 |     41 |    374 | 
```

# c# - C# 中基于选择/轮询的框架

> ID：14588752
> 
> 赞同：-3
> 
> 时间：2013-01-29T17:31:29.747
> 
> 标签：c#, multithreading

我喜欢编写一个打开许多套接字和文件的应用程序。把它想象成网络服务器（在我的情况下这不是真的，但为了简化这里的问题）。

如果我在 Unix 上用 C 语言编写它，我会使用 poll/select 并且非常高效，因为我没有多个线程，所以一切都很容易编写，同时非常高效。

如果我使用多个线程来使用 CPU 的所有内核（鉴于我不想使用进程），我将使用 Unix FIFO 来传输消息并在每个线程上使用仍然轮询/选择（与文件/套接字/fifos 完美配合） /)。事情仍然非常简单，同时非常高效。

但是在使用 C# 时，似乎有不同的选择，并且大多数类根本不支持这种编程风格（HttpWebListener 只是一个例子）。我不喜欢这种`BeginInvoke`混乱，因为在后台发生了一些我无法控制的事情（线程池，优雅地关闭阻塞服务器，......）。

我想知道 C# 是否有任何类似的选择/轮询框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:38:19.030

您实际上可以在 C# 中使用相同的方法 - 您只需要使用提供[Select](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.select.aspx)和[Poll的较低级别的](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.poll.aspx)[Socket 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)。

话虽如此，在更高级别的类中建立在套接字之上的新异步方法往往具有许多优点。一旦你学习并理解了它们是如何运作的，它们就会非常高效，并且可以更好地进行开发。

这一直延伸到堆栈——“最高级别”的抽象是像[WCF](http://msdn.microsoft.com/en-us/library/ms731082.aspx)这样的框架，它在生产力、可靠性、安全性和易于开发的许多类型的应用程序方面提供了巨大的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:38:04.423

BeginInvoke（或基于 Begin/End 模式的任务）是 .NET 上异步编程的标准模型。它们确实强制继续回调在线程池上运行。如果您对此感到满意，那么 Begin/End 模型实际上是非常高效和好的（就像基于回调的代码一样好......）。

在我的脑海中，我看不出一个令人信服的理由为什么我不想使用线程池来完成回调。也许您可以使用 IOCP 来提高效率。

选择/轮询当然*不是*提高效率的方法。尽管 .NET 套接字支持它。

你说

> 优雅地关闭阻塞服务器

会是个问题。我不明白为什么。你能详细说明吗？

# voip - 音轨延迟

> ID：14588760
> 
> 赞同：0
> 
> 时间：2013-01-29T17:32:07.203
> 
> 标签：voip, android-audiomanager, audiotrack

我正在制作一个应用程序，它能够使用 AudioManager，特别是 AudioTrack 和 AudioRecord，在 WAN 上进行 VOIP 通信，AudioRecord 工作正常，但我在使用 AudioTrack 播放延迟方面存在严重问题。实在是太高了，无法接受。我正在接收 160 字节的块，我的音频设置是 16 位、8KHz、1 通道，因此，在我的 160 字节块中，我有大约 10 毫秒的块，我不会有明显的延迟

我知道他们有很多人有同样的问题，但是 VOIP 应用程序存在并且可能是我的问题。

PD：我正在用 Java 编程，我在摩托罗拉 Milestone（Droid，android 2.2）和另一部三星手机（android 2.3）之间进行了测试，我在两个播放设备上都有同样的问题。此外，我尝试将声音流式传输到我的计算机，并且它是实时的。这样，问题就出在播放器（AudioTrack）中。网络的延迟非常低（我在 WAN 上），我收到了超过 99% 的数据包（大约 16Kb/s）。

有什么方法可以继续使用 VOIP 程序并使其可用？

真的谢谢，除了这个问题，我还没有找到一些明确的解决方案，它肯定存在。它是一种非常常用和有用的，更多的是在通信设备中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:22:36.097

你使用UDP而不是TCP吗？如果没有，请考虑使用 Google 获取“Android UDP 示例”。如果是，抱歉打扰。

# asp.net - asp.net 按钮不会在更新面板中触发

> ID：14588763
> 
> 赞同：1
> 
> 时间：2013-01-29T17:32:18.060
> 
> 标签：asp.net, .net, vb.net

我在未触发的更新面板中有一个按钮（btnTransferAccept）。我将它添加为触发器，但它仍然什么也不做。该按钮应该触发 javascript 警报。如果我删除更新面板之外的按钮，它工作正常。

有任何想法吗？谢谢

这是我的代码：

```
 <asp:UpdatePanel ID="pnlTransferOwnership" ChildrenAsTriggers="true" runat="server" >
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="gvTransferOwner" />
            <asp:AsyncPostBackTrigger ControlID="btnTransferAccept" />
        </Triggers>
        <ContentTemplate>

            <asp:Gridview id="gvTransferOwner" CellPadding="0" GridLines="None" CellSpacing="0" runat="server" AutoGenerateColumns="false"
             onrowcommand="gvTransferOwner_RowCommand">
                <Columns>
                    <asp:TemplateField>    
                        <ItemTemplate>
                            <asp:HiddenField ID="hfID" Value='<%#Eval("ID") %>' runat="server" />
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField DataField="FirstName" HeaderText="First Name"  />
                    <asp:BoundField DataField="LastName" HeaderText="Last Name" />
                    <asp:BoundField DataField="EmailAddress" HeaderText="Email Address" />
                    <asp:buttonfield buttontype="Button" commandname="Select" headertext="Transfer" text="Select" />
                </Columns>
            </asp:Gridview>

            <div class="ui-dialog-buttonset">
                <asp:Button ID="btnTransferAccept" runat="server" CssStyle="display: none;" Text="Transfer" cssClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
            </div>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:23:23.100

不确定这是否是问题所在，但请尝试将触发器移动到内容模板下方。您的代码应如下所示：

```
<ContentTemplate>
....
</ContentTemplate>
<Triggers>
  <asp:AsyncPostBackTrigger ControlID="gvTransferOwner" />
  <asp:AsyncPostBackTrigger ControlID="btnTransferAccept" />
</Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:26:01.323

您需要将 javascript 警报放在 PageLoad 事件中，而不是 window onload 或 jquery ready 事件中。

下面的链接会给你详细的解释。

[http://encosia.com/document-ready-and-pageload-are-not-the-same/](http://encosia.com/document-ready-and-pageload-are-not-the-same/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T08:38:48.907

在执行更新面板时，尝试将所有 ctrl 与更新面板放在一起

```
 </ContentTemplate>
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="gvTransferOwner" />
        <asp:AsyncPostBackTrigger ControlID="btnTransferAccept" />
        </Triggers>
       </asp:UpdatePanel>

   and the whole with in a <div> 
```

# c - 我的变量在 C 中存储在内存的哪个位置？

> ID：14588767
> 
> 赞同：190
> 
> 时间：2013-01-29T17:32:22.070
> 
> 标签：c, memory, memory-management, types

考虑到内存分为四个部分：数据、堆、堆栈和代码，全局变量、静态变量、常量数据类型、局部变量（在函数中定义和声明）、变量（在主函数中）、指针在哪里，并且动态分配的空间（使用malloc和calloc）存储在内存中？

我认为他们将被分配如下：

*   全局变量------->数据
*   静态变量------->数据
*   常量数据类型 -----> 代码
*   局部变量（在函数中声明和定义）-------->栈
*   在主函数中声明和定义的变量----->堆
*   指针（例如 , `char *arr`）`int *arr`-------> 堆
*   动态分配空间（使用 malloc 和 calloc）--------> 堆栈

我只是从 C 的角度来指代这些变量。

如果我错了，请纠正我，因为我是 C 新手。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-01-29T17:39:05.243

你说对了其中一些，但是写这些问题的人至少在一个问题上欺骗了你：

*   全局变量------->数据（正确）
*   静态变量------->数据（正确）
*   常量数据类型 -----> 代码和/或数据。当常量本身存储在数据段中并且对它的引用将嵌入到代码中时，请考虑字符串文字
*   局部变量（在函数中声明和定义）-------->堆栈（正确）
*   在函数中声明和定义的变量`main`----->~~堆~~也堆栈（老师试图欺骗你）
*   指针(ex: `char *arr`, `int *arr`) ------->~~堆~~数据或堆栈，取决于上下文。C 允许您声明一个全局或`static`指针，在这种情况下，指针本身将在数据段中结束。
*   动态分配空间（使用`malloc`, `calloc`, `realloc`） -------->~~栈~~堆

值得一提的是，“栈”被官方称为“自动存储类”。

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2016-01-24T20:46:17.467

对于那些可能有兴趣了解这些内存段的未来访问者，我正在用 C 写关于 5 个内存段的要点：

**一些提醒：**

1.  每当执行 C 程序时，都会在 RAM 中分配一些内存用于程序执行。该内存用于存储经常执行的代码（二进制数据）、程序变量等。下面的内存段是相同的：
2.  通常有三种类型的变量：
    *   局部变量（在 C 中也称为自动变量）
    *   全局变量
    *   静态变量
    *   您可以有全局静态或局部静态变量，但以上三个是父类型。

**C中的5个内存段：**

# 1.代码段

*   代码段，也称为文本段，是包含频繁执行代码的内存区域。
*   代码段通常是只读的，以避免被缓冲区溢出等编程错误覆盖的风险。
*   代码段不包含程序变量，如局部变量（*在 C 中也称为自动变量*）、全局变量等。
*   基于 C 实现，代码段还可以包含只读字符串文字。例如，当您这样做时`printf("Hello, world")`，将在代码/文本段中创建字符串“Hello, world”。`size`您可以在 Linux 操作系统中使用命令验证这一点。
*   [进一步阅读](https://en.wikipedia.org/wiki/Code_segment)

# 数据段

数据段分为以下两部分，通常位于堆区域下方或在某些实现中位于堆栈上方，但数据段绝不位于堆和堆栈区域之间。

## 2.未初始化的数据段

*   该段也称为**bss**。
*   这是内存的一部分，其中包含：
    1.  **未初始化的全局变量** ***（包括指针变量）***
    2.  **未初始化的常量全局变量**。
    3.  **未初始化的局部静态变量**。
*   任何未初始化的全局或静态局部变量都将存储在未初始化的数据段中
*   例如：全局变量`int globalVar;`或静态局部变量`static int localStatic;`将存储在未初始化的数据段中。
*   如果您声明一个全局变量并将其初始化为`0`或`NULL`仍然会转到未初始化的数据段或 bss。
*   [进一步阅读](https://en.wikipedia.org/wiki/.bss)

## 3.初始化数据段

*   该段存储：
    1.  **初始化的全局变量** ***（包括指针变量）***
    2.  **初始化常量全局变量**。
    3.  **初始化局部静态变量**。
*   例如：全局变量`int globalVar = 1;`或静态局部变量`static int localStatic = 1;`将存储在初始化的数据段中。
*   该段可以**进一步分为初始化只读区和初始化读写区**。*初始化常量全局变量将进入初始化只读区，而其值可以在运行时修改的变量将进入初始化读写区*。
*   ***该段的大小由程序源代码中值的大小决定，在运行时不会改变***。
*   [进一步阅读](https://en.wikipedia.org/wiki/Data_segment)

# 4.堆栈段

*   堆栈段用于存储在函数内部创建的变量（*函数可以是主函数或用户定义的函数*），变量如
    1.  **函数的**局部变量*****（包括指针变量）*****
    ***   **传递给函数的参数***   **退货地址****
***   一旦函数执行完成，存储在堆栈中的变量将被删除。*   [进一步阅读](https://en.wikipedia.org/wiki/Stack-based_memory_allocation)**

 **# 5.堆段

*   该段是为了支持动态内存分配。如果程序员想要动态分配一些内存，那么在 C 中它是使用`malloc`、`calloc`或`realloc`方法完成的。
*   例如，当`int* prt = malloc(sizeof(int) * 2)`在堆中分配八个字节时，该位置的内存地址将被返回并存储在`ptr`变量中。根据`ptr`声明/使用的方式，变量将位于堆栈或数据段上。
*   [进一步阅读](https://en.wikipedia.org/wiki/Memory_management#HEAP)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-29T17:40:06.547

更正了你的错误句子

```
constant data types ----->  code //wrong 
```

局部常量变量----->栈

初始化的全局常量变量----->数据段

未初始化的全局常量变量-----> bss

```
variables declared and defined in main function  ----->  heap //wrong 
```

在主函数中声明和定义的变量----->堆栈

```
pointers(ex:char *arr,int *arr) ------->  heap //wrong

dynamically allocated space(using malloc,calloc) --------> stack //wrong 
```

pointers(ex:char *arr,int *arr) -------> 该指针变量的大小将在堆栈中。

考虑您正在动态分配 n 字节的内存（使用`malloc`or `calloc`），然后使指针变量指向它。现在`n`内存字节在堆中，指针变量需要 4 个字节（如果 64 位机器为 8 个字节），它将在堆栈中存储`n`内存块字节的起始指针。

注意：指针变量可以指向任何段的内存。

```
int x = 10;
void func()
{
int a = 0;
int *p = &a: //Now its pointing the memory of stack
int *p2 = &x; //Now its pointing the memory of data segment
chat *name = "ashok" //Now its pointing the constant string literal 
                     //which is actually present in text segment.
char *name2 = malloc(10); //Now its pointing memory in heap
...
} 
```

动态分配空间（使用 malloc、calloc）--------> 堆

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-29T17:42:31.743

一种流行的桌面架构将进程的虚拟内存分为几个*部分*：

*   文本段：包含可执行代码。指令指针取此范围内的值。

*   数据段：包含全局变量（即具有静态链接的对象）。细分为只读数据（如字符串常量）和未初始化数据（“BSS”）。

*   堆栈段：包含程序的*动态*内存，即所有线程的空闲存储（“堆”）和本地堆栈帧。传统上 C 栈和 C 堆过去都是从相反的两端长进栈段，但我相信这种做法已经被放弃了，因为它太不安全了。

AC程序通常将具有静态存储持续时间的对象放入数据段，将动态分配的对象放入空闲存储区，将自动对象放入其所在线程的调用堆栈中。

在其他平台上，例如旧的 x86 实模式或嵌入式设备上，情况显然可能完全不同。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-29T17:58:06.807

> *我只是从 C 的角度来指代这些变量。*

从*C 语言*的角度来看，重要的是范围、范围、链接和访问；究竟如何将项目映射到不同的内存段取决于各个实现，并且会有所不同。*语言标准根本*不谈论内存段。大多数现代架构的行为方式大致相同。块范围变量和函数参数将从堆栈分配，文件范围和静态变量将从数据或代码段分配，动态内存将从堆分配，一些常量数据将存储在只读段中， ETC。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-07-06T06:21:41.100

关于存储需要记住的一件事是[*as-if* rule](https://stackoverflow.com/a/46455917/918959)。编译器不需要将变量放在特定的位置——相反，它可以将它放在任何它喜欢的地方，只要编译的程序的行为*就像*它根据抽象 C 机器的规则在抽象 C 机器中运行一样。这适用于所有存储*期限*。例如：

*   一个未被访问的变量可以完全消除——它没有存储......任何地方。[示例](https://godbolt.org/z/dfRj90)- 查看生成的汇编代码中如何存在`42`但没有`404`.
*   一个没有被占用地址的具有自动存储持续时间的变量根本不需要存储在内存中。[一个例子是循环变量。](https://godbolt.org/z/MXIdo8)
*   `const`一个在内存中或实际上`const`不需要在内存中的变量。[示例](https://godbolt.org/z/s_KweJ)- 编译器可以证明这`foo`是有效`const`的，并将其使用内联到代码中。`bar`具有外部链接，编译器无法证明它不会在当前模块之外更改，因此它不是内联的。
*   分配的对象`malloc`不需要驻留在从堆分配的内存中！[示例](https://godbolt.org/z/RZNndt)- 请注意代码如何没有调用，`malloc`也没有将值 42 存储在内存中，它保存在寄存器中！
*   因此，已分配的对象`malloc`和引用丢失而无需解除分配对象而`free` *无需*泄漏内存...
*   分配的对象`malloc`不需要在 Unixen 上的程序 break ( )*下面的堆内...*`sbrk(0)`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-29T17:35:09.180

> 指针（例如：char *arr，int *arr）-------> 堆

不，它们可以在堆栈上或数据段中。他们可以指向任何地方。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-10T07:05:45.610

*   变量/自动变量--->堆栈部分
*   动态分配的变量--->堆部分
*   初始化的全局变量 -> 数据部分
*   未初始化的全局变量 -> 数据部分 (bss)
*   静态变量 -> 数据部分
*   字符串常量 -> 文本部分/代码部分
*   功能 -> 文本部分/代码部分
*   文本代码 -> 文本部分/代码部分
*   寄存器 -> CPU 寄存器
*   命令行输入 -> 环境/命令行部分
*   环境变量 -> 环境/命令行部分

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-18T14:25:52.363

**带有反汇编分析的 Linux 最小可运行示例**

由于这是标准未指定的实现细节，让我们看看编译器在特定实现上做了什么。

在这个答案中，我将链接到进行分析的特定答案，或者直接在此处提供分析，并在此处总结所有结果。

所有这些都在不同的 Ubuntu / GCC 版本中，并且跨版本的结果可能相当稳定，但如果我们发现任何变化，让我们指定更精确的版本。

**函数内部的局部变量**

无论是它`main`还是任何其他功能：

```
void f(void) {
    int my_local_var;
} 
```

如图：[gdb中<value优化输出>是什么意思？](https://stackoverflow.com/questions/5497855/what-does-value-optimized-out-mean-in-gdb/60552533#60552533)

*   `-O0`： 堆
*   `-O3`: 如果它们不溢出则注册，否则堆栈

有关堆栈存在的动机，请参见：[x86 汇编中寄存器上使用的 push/pop 指令的功能是什么？](https://stackoverflow.com/questions/4584089/what-is-the-function-of-the-push-pop-instructions-used-on-registers-in-x86-ass/33583134#33583134)

**全局变量和`static`函数变量**

```
/* BSS */
int my_global_implicit;
int my_global_implicit_explicit_0 = 0;

/* DATA */
int my_global_implicit_explicit_1 = 1;

void f(void) {
    /* BSS */
    static int my_static_local_var_implicit;
    static int my_static_local_var_explicit_0 = 0;

    /* DATA */
    static int my_static_local_var_explicit_1 = 1;
} 
```

*   如果初始化`0`或未初始化（因此隐式初始化为`0`）：`.bss`部分，另请参见：[为什么需要 .bss 段？](https://stackoverflow.com/questions/9535250/why-is-the-bss-segment-required/36725653#36725653)
*   否则：`.data`部分

**`char *`和`char c[]`**

如图：[C和C++中的静态变量存储在哪里？](https://stackoverflow.com/questions/93039/where-are-static-variables-stored-in-c-and-c/30642087#30642087)

```
void f(void) {
    /* RODATA / TEXT */
    char *a = "abc";

    /* Stack. */
    char b[] = "abc";
    char c[] = {'a', 'b', 'c', '\0'};
} 
```

TODO 是否也会将非常大的字符串文字放入堆栈？或者`.data`？还是编译失败？

**函数参数**

```
void f(int i, int j); 
```

必须通过相关的调用约定，例如：[https](https://en.wikipedia.org/wiki/X86_calling_conventions) ://en.wikipedia.org/wiki/X86_calling_conventions for X86，它为每个变量指定特定的寄存器或堆栈位置。

然后如[What does <value optimize out> mean in gdb 所示？](https://stackoverflow.com/questions/5497855/what-does-value-optimized-out-mean-in-gdb/60552533#60552533)，`-O0`然后将所有内容都放入堆栈中，同时`-O3`尝试尽可能多地使用寄存器。

但是，如果函数被内联，它们将被视为普通本地人。

**`const`**

我相信这没有什么区别，因为您可以将其排版。

相反，如果编译器能够确定某些数据永远不会被写入，那么理论上它可以将其放入，`.rodata`即使不是 const。

待办事项分析。

**指针**

它们是变量（包含地址，即数字），与其他所有变量一样 :-)

**malloc**

这个问题对 没有多大意义`malloc`，因为`malloc`它是一个函数，并且在：

```
int *i = malloc(sizeof(int)); 
```

`*i`是一个包含地址的变量，所以属于上述情况。

至于 malloc 在内部是如何工作的，当你调用它时，Linux 内核在其内部数据结构上将某些地址标记为可写，并且当它们最初被程序触及时，会发生错误，内核启用页表，从而允许访问没有 segfaul 发生：[x86 分页如何工作？](https://stackoverflow.com/questions/18431261/how-does-x86-paging-work)

但是请注意，这基本上正是`exec`系统调用在您尝试运行可执行文件时所做的事情：它标记要加载到的页面，并将程序写入那里，另请参见：[内核如何获取运行的可执行二进制文件linux？](https://stackoverflow.com/questions/8352535/how-does-kernel-get-an-executable-binary-file-running-under-linux/31394861#31394861)除了`exec`对加载到哪里有一些额外的限制（例如，代码[是不可重定位](https://stackoverflow.com/questions/2463150/what-is-the-fpie-option-for-position-independent-executables-in-gcc-and-ld/51308031#51308031)的）。

用于现代 2020 实现的确切系统调用`malloc`，`mmap`过去`brk`曾使用过：[malloc() 使用 brk() 还是 mmap()？](https://stackoverflow.com/questions/30542428/does-malloc-use-brk-or-mmap)

**动态库**

基本上得到`mmap`记忆：[https ://unix.stackexchange.com/questions/226524/what-system-call-is-used-to-load-libraries-in-linux/462710#462710](https://unix.stackexchange.com/questions/226524/what-system-call-is-used-to-load-libraries-in-linux/462710#462710)

**环境变量`main`和`argv`**

初始堆栈上方：[https](https://unix.stackexchange.com/questions/75939/where-is-the-environment-string-actual-stored) : //unix.stackexchange.com/questions/75939/where-is-the-environment-string-actual-stored TODO 为什么不在 .data 中？**

# java - 如何在每个单元格的基础上右对齐 SWT 表格单元格中的文本

> ID：14588769
> 
> 赞同：2
> 
> 时间：2013-01-29T17:32:36.663
> 
> 标签：java, swt, jface

我有一个由 JFace TableViewer 包装的 SWT 表。我知道如何右对齐整列：

```
TableColumn column = new TableColumn(viewer.getTable(), SWT.RIGHT); 
```

但是，我想要做的是根据输入在每个单元格的基础上改变对齐方式 - 基本上我只想右对齐包含数字的单元格。

我一直在尝试使用一个片段（取自[http://wiki.eclipse.org/JFaceSnippets#Snippet016TableLayout](http://wiki.eclipse.org/JFaceSnippets#Snippet016TableLayout)）。此表使用 CellLabelProvider。我想我也许可以改变方法中的对齐`update(ViewerCell cell)`方式，因为这种方法允许您在每个单元格的基础上设置例如背景颜色。但是，我找不到合适的东西来刺激。

有什么建议么？下面的完整片段。

```
import org.eclipse.jface.layout.TableColumnLayout;
import org.eclipse.jface.viewers.CellLabelProvider;
import org.eclipse.jface.viewers.ColumnWeightData;
import org.eclipse.jface.viewers.IStructuredContentProvider;
import org.eclipse.jface.viewers.ITableLabelProvider;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.Viewer;
import org.eclipse.jface.viewers.ViewerCell;
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;

/**
 * Snippet for alignment in a table viewer.
 */
public class TableViewerAlignmentSnippet {

  private class MyContentProvider implements IStructuredContentProvider {
    public Object[] getElements(final Object inputElement) {
      return (MyModel[]) inputElement;
    }

    public void dispose() {
    }

    public void inputChanged(final Viewer viewer, final Object oldInput, final Object newInput) {

    }
  }

  private class MyLabelProvider extends CellLabelProvider implements ITableLabelProvider {

    @Override
    public Image getColumnImage(final Object element, final int columnIndex) {
      return null;
    }

    @Override
    public String getColumnText(final Object element, final int columnIndex) {
      return element.toString();
    }

    @Override
    public void update(final ViewerCell cell) {
      // TODO - set alignment based on the cell text?
    }

  }

  public class MyModel {
    public int counter;

    public MyModel(final int counter) {
      this.counter = counter;
    }

    @Override
    public String toString() {
      return "Item " + this.counter;
    }
  }

  public TableViewerAlignmentSnippet(final Composite comp) {
    final TableViewer v = new TableViewer(new Table(comp, SWT.BORDER));
    v.setLabelProvider(new MyLabelProvider());
    v.setContentProvider(new MyContentProvider());
    v.getTable().setHeaderVisible(true);

    TableColumnLayout ad = new TableColumnLayout();
    comp.setLayout(ad);

    TableColumn column = new TableColumn(v.getTable(), SWT.NONE);
    column.setText("Column 1");
    column.setMoveable(true);
    ad.setColumnData(column, new ColumnWeightData(90, 290));

    column = new TableColumn(v.getTable(), SWT.NONE);
    column.setText("Column 2");
    column.setMoveable(true);
    ad.setColumnData(column, new ColumnWeightData(10, 200));

    MyModel[] model = createModel();
    v.setInput(model);
    v.getTable().setLinesVisible(true);
  }

  private MyModel[] createModel() {
    MyModel[] elements = new MyModel[10];

    for (int i = 0; i < 10; i++) {
      elements[i] = new MyModel(i);
    }

    return elements;
  }

  public static void main(final String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    new TableViewerAlignmentSnippet(shell);
    shell.open();

    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }

    display.dispose();

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:30:52.570

我认为您应该考虑为`OwnerDrawLabelProvider`要设置每个单元格对齐的列绘制单元格。

# python - Python 刮板（Scraperwiki）只拿到了一半的表

> ID：14588775
> 
> 赞同：2
> 
> 时间：2013-01-29T17:32:49.080
> 
> 标签：python, web-scraping, lxml, scraperwiki

我正在学习如何在 Scraperwiki 中使用 Python 编写爬虫。到目前为止一切都很好，但是我花了几天的时间来解决一个我无法解决的问题。我正在尝试从表中获取所有链接。它可以工作，但从 001 到 486 的链接列表中，它只会在 045 处开始抓取它们。 url/source 只是网站上的城市列表，来源可以在这里看到：
[http://www .tripadvisor.co.uk/pages/by_city.html](http://www.tripadvisor.co.uk/pages/by_city.html)和具体的 html 从这里开始：

```
 </td></tr>
  <tr><td class=dt1><a href="by_city_001.html">'s-Gravenzande, South Holland Province&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;Aberystwyth, Ceredigion, Wales</a></td>
  <td class=dt1><a href="by_city_244.html">Los Corrales de Buelna,  Cantabria&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;Lousada, Porto District, Northern Portugal</a></td>
  </tr>
  <tr><td class=dt1><a href="by_city_002.html">Abetone, Province of Pistoia, Tuscany&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;Adamstown, Lancaster County, Pennsylvania</a>       /td>
  <td class=dt1><a href="by_city_245.html">Louth, Lincolnshire, England&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;Lucciana, Haute-Corse, Corsica</a></td>
  </tr>
  <tr><td class=dt1><a href="by_city_003.html">Adamswiller, Bas-Rhin, Alsace&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;Aghir, Djerba Island, Medenine Governorate</a>       </td>
  <td class=dt1><a href="by_city_246.html">Luccianna, Haute-Corse, Corsica&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;Lumellogno, Novara, Province of Novara, Piedmont</a></td>
  </tr> 
```

我所追求的是从“by_city_001.html”到“by_city_486.html”的链接。这是我的代码：

```
 def scrapeCityList(pageUrl):

html = scraperwiki.scrape(pageUrl)
root = lxml.html.fromstring(html)

print html

links = root.cssselect('td.dt1 a')

for link in links:

    url = 'http://www.tripadvisor.co.uk' + link.attrib['href']
    print url 
```

在代码中调用如下：

```
 scrapeCityList('http://www.tripadvisor.co.uk/pages/by_city.html') 
```

现在，当我运行它时，它只会返回从 0045 开始的链接！

输出（045~486）

```
http://www.tripadvisor.co.ukby_city_045.html
http://www.tripadvisor.co.ukby_city_288.html
http://www.tripadvisor.co.ukby_city_046.html
http://www.tripadvisor.co.ukby_city_289.html
http://www.tripadvisor.co.ukby_city_047.html
http://www.tripadvisor.co.ukby_city_290.html and so on... 
```

我尝试将选择器更改为：

```
 links = root.cssselect('td.dt1') 
```

它像这样抓取 487 个“元素”：

```
<Element td at 0x13d75f0>
<Element td at 0x13d7650>
<Element td at 0x13d76b0> 
```

但我无法从中获得“href”值。当我在 cssselect 行中选择“a”时，我无法弄清楚为什么它会丢失前 44 个链接。我看过代码，但我不知道。

提前感谢您的帮助！

克莱尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:06:27.283

您的代码工作正常。你可以在这里看到它的实际效果：[https ://scraperwiki.com/scrapers/tripadvisor_cities/](https://scraperwiki.com/scrapers/tripadvisor_cities/)

我添加了保存到数据存储区，因此您可以看到它实际上处理了所有链接。

```
import scraperwiki
import lxml.html

    def scrapeCityList(pageUrl):
    html = scraperwiki.scrape(pageUrl)
    root = lxml.html.fromstring(html)
    links = root.cssselect('td.dt1 a')
    print len(links)
    batch = []
    for link in links[1:]: #skip the first link since it's only a link to tripadvisor and not a subpage
        record = {}
        url = 'http://www.tripadvisor.co.uk/' + link.attrib['href']
        record['url'] = url
        batch.append(record)
    scraperwiki.sqlite.save(["url"],data=batch)

scrapeCityList('http://www.tripadvisor.co.uk/pages/by_city.html') 
```

如果您使用第二个 css 选择器：

```
links = root.cssselect('td.dt1') 
```

那么您选择的是 td 元素而不是 a 元素（它是 td 的子元素）。您可以通过执行以下操作来选择 a：

```
url = 'http://www.tripadvisor.co.uk/' + link[0].attrib['href'] 
```

您在哪里选择 td 的第一个子元素（即 [0]）。

如果要查看 lxml.html 中元素的所有属性，请使用：

```
print element.attrib 
```

对于 td 给出：

```
{'class': 'dt1'}
{'class': 'dt1'}
{'class': 'dt1'}
... 
```

对于一个：

```
{'href': 'by_city_001.html'}
{'href': 'by_city_244.html'}
{'href': 'by_city_002.html'}
... 
```

# php - 在不损失质量或细节的情况下将图像从逐行扫描转换为隔行扫描？

> ID：14588776
> 
> 赞同：2
> 
> 时间：2013-01-29T17:32:59.060
> 
> 标签：php, image, converter, progressive

我正在尝试从根目录之外的目录中检索大图像。目前我只使用“fpassthru”，但这会根据上传时的内容逐步或交错加载图像。

如何使用 PHP 创建图像的完整副本，但将其转换为隔行扫描而不损失任何质量或细节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:37:39.727

如果您使用 PHP 附带的 GD 库，您可以使用它[`imageinterlace`](http://php.net/manual/en/function.imageinterlace.php)来完成此操作。

以下是示例：

```
<?php
// Create an image instance
$im = imagecreatefromgif('php.gif');

// Enable interlancing
imageinterlace($im, true);

// Save the interlaced image
imagegif($im, './php_interlaced.gif');
imagedestroy($im);
?> 
```

或者，您可以使用[ImageMagick](http://www.geom.uiuc.edu/events/courses/1996/cmwh/Stills/manipulating.html#Interlacing)。

# ios - iOS 上的离线反向地理编码

> ID：14588778
> 
> 赞同：0
> 
> 时间：2013-01-29T17:33:22.553
> 
> 标签：ios, objective-c, mapkit, geocoding, reverse-geocoding

有很多与这个问题有关的现有问题，但我已经尽可能多地查看了这些问题，但没有得到答案。

我正在尝试根据纬度和经度在 iOS 上执行离线反向地理编码查找。我希望能够提供纬度和经度，并提供该点所在的国家/地区。我可以使用 Geonames（例如：[http](http://api.geonames.org/countryCode?lat=45.03&lng=8.2&username=demo) ://api.geonames.org/countryCode?lat=45.03&lng=8.2&username=demo ）来做到这一点，但我需要离线类似的能力，设备上没有互联网功能。

`CLLocation`不提供足够可靠的离线服务来完成我正在做的事情，它依赖于您之前在线时制作的缓存，等等。混乱。

我试过这个：[https](https://github.com/drodriguez/reversegeocoding) ://github.com/drodriguez/reversegeocoding但没有运气，它需要一些稍微复杂/令人困惑的终端安装，使用我从未听说过的名为 Thor 的东西，并且正在呕吐各种错误，所以我放弃了。

我找到了一些可下载的地图，但这些地图似乎更加复杂，而且令人担忧的是，大小达到数百兆甚至千兆字节——远远超出了 iOS 应用程序的范围。我只需要国家，没有比这更小的（城市、街道、位置等），所以我想我应该能够得到一个小得多的文件。

所以我的关键问题是：是否有一些预先存在的数据库或工具，最好是支持 iOS，我可以提供纬度/经度，并获得一个国家？如果没有，我应该采取哪些步骤来让这些功能自己运行？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T00:20:24.833

`ReverseGeocodeCountry`是一个用于 iOS 的简单轻量级离线国家反向地理编码器，它有一个包含国家多边形数据的静态 JSON 文件，用于对任何 lat/lng 进行反向地理编码：

[https://github.com/krisrak/ios-offline-reverse-geocode-country](https://github.com/krisrak/ios-offline-reverse-geocode-country)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:47:52.653

“[世界各国](http://opengeocode.org/download/cow.php)”是一个`.csv`包含国家、坐标、本地化国名、首都和其他信息的文本文件。它似乎可以免费使用。您只需将其导入 SQLite 数据库。

**编辑**刚刚注意到你想要*反向*地理编码。该数据库仅适用于*正向*地理编码。

[您可以在http://www.gadm.org/download](http://www.gadm.org/download)下载所有国家/地区的 shapefile 。如果您下载 a `.kmz`，您可以将其解压缩到边界坐标列表中。您可能会每隔 5 或 10 个坐标获取更小的尺寸（精度更低）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-16T12:10:44.490

以防万一我可以推荐另一个好的书面离线地理编码库。 [https://github.com/Alterplay/APOfflineReverseGeocoding](https://github.com/Alterplay/APOfflineReverseGeocoding)

# javascript - 通过 jQuery 提交表单不起作用

> ID：14588779
> 
> 赞同：4
> 
> 时间：2013-01-29T17:33:33.913
> 
> 标签：javascript, forms, jquery

单击表单提交按钮时，我试图调用一个函数。页面不应该刷新，我想通过 AJAX 添加类别。

问题是当我手动将其添加到 html 文件时一切正常，但是当我尝试通过 将其添加到 javascript 函数中时`appendTo`，永远不会调用 click 函数。这里有什么问题？

Javascript：

```
$(".addCategoryBtn").click(function() {  
       console.log('add category clicked');
    }); 
```

JavaScript 函数的一部分：

```
html += '<br><br><form id="addCategory_form" action=""><input type="text" class="inptCategoryName" placeholder="Kategorie Name">&nbsp;<input type="text" class="inptHtmlColor" placeholder="Hintergrund: #000FFF">&nbsp;<input type="text" class="inptTextColor" placeholder="Text: #000FFF"><input type="button" value="Go" class="addCategoryBtn"></form></div>';

$(html).appendTo($('body')); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:41:31.723

对于动态内容，当使用 jquery 1.7 或更高版本时，使用[**on()**](http://api.jquery.com/on/)：

```
$("body").on('click','.addCategoryBtn',function() {  
    console.log('add category clicked');
}); 
```

对于 jQuery 1.6.x 及更低版本，包括 1.4.3 使用[**delegate()**](http://api.jquery.com/delegate/)：

```
$("body").delegate('.addCategoryBtn', 'click', function() {  
   console.log('add category clicked');
}); 
```

对于 jQuery 1.4.2 或更低版本，请在附加后使用[**bind ：**](http://api.jquery.com/bind/)

```
html += '<br><br><form id="addCategory_form" action=""><input type="text" class="inptCategoryName" placeholder="Kategorie Name">&nbsp;<input type="text" class="inptHtmlColor" placeholder="Hintergrund: #000FFF">&nbsp;<input type="text" class="inptTextColor" placeholder="Text: #000FFF"><input type="button" value="Go" class="addCategoryBtn"></form></div>';

$(html).appendTo($('body'));

$(".addCategoryBtn").bind("click", function() {  
    console.log('add category clicked');
}); 
```

不管怎样，无论你做什么，尽量避免[**live()**](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T17:35:59.163

因为动态内容事件必须使用[`on`](http://api.jquery.com/on/)函数绑定：

```
$("body").on('click','.addCategoryBtn',function() {  
       console.log('add category clicked');
}); 
```

# javascript - 根据多个下拉列表的结果加载特定的 div

> ID：14588782
> 
> 赞同：1
> 
> 时间：2013-01-29T17:33:36.123
> 
> 标签：javascript, html, drop-down-menu, onclick, listitem

编辑：如果列出的 Javascript 被完全删除，并且下拉菜单重新设置为`<div>`'s 内的样式`<li>`，并且最终的 div 是由 Javascript onclick 事件生成的，那么这种方法会容易得多吗？例如

```
 <a id="click_link">click me</a>

       $("#click_link").click(function(){
       $('#div').load('http://www.link.com/');
    }); 
```

* * *

不管怎样，眼前的问题...

我决定使用外观优雅的 javascript 解决方案凸显了我在 javascript 方面的大量经验不足！问题是，表面上看，很简单……

一旦在每个下拉菜单上选择了一个选项，我需要一个最终的 div 来加载，以便可以显示一个特定的按钮（一个购买具有指定选项的项目的链接，例如选择 Necklace D，使用 Stone Option B，和交付选项 A = 使用“购买”按钮加载 div #17)

下拉列表是通过 Javascript 填充和设置样式的 div（而不是使用更简单的`<form>`and`<input>`方法），可以灵活地为每个选项添加两行不同样式的文本等。 - 这是我进入领域的地方未知，我的经验不足。

隔离部分可在[此处完整查看](http://www.mennalloyd.com/test/buytest.html)

好的，到代码。这是Javascript：

```
function createByJson() {
    var pearlData = [                   
                    {description:'Choose your pearl...', value:'Pearls', text:'Pearls'},
                    {description:'Beautiful black stone', value:'Black Pearl', text:'Black Pearl'},
                    {description:'Classic white stone', value:'White Pearl', text:'White Pearl'}
                    ];
    $("#DropItPearls").msDropDown({byJson:{data:pearlData, name:'pearls', width: 200}}).data("dd"); 
        var blodeuweddData = [          
                    {description:'Choose your item...', value:'Blodeuwedd', text:'the Blodeuwedd Collection'},
                    {description:'A striking statement', value:'BlodeuweddCelticStatement', text:'Celtic Statement Piece'},
                    {description:'Gold laced flower and pearl', value:'BlodeuweddBracelet', text:'Bracelet'},
                    ];
    $("#DropItBlodeuwedd").msDropDown({byJson:{data:blodeuweddData, name:'blodeuwedd', width: 250}})
                                                            .msDropDown({on:{change:function(data, ui) {
                                                                                                                                                                    var val = data.value;
                                                                                                                                                                    if(val!="")
                                                                                                                                                                        window.location = val;
                                                                                                                                                                }}}).data("dd");
        var deliveryData = [                    
                    {description:'Choose your method...', value:'Delivery', text:'Delivery Options'},
                    {description:'4-6 weeks delivery', value:'Four Weeks', text:'Made To Order'},
                    {description:'(unavailable on this item)', value:'Rush', text:'Express Delivery', disabled:true}
                    ];
    $("#DropItDelivery").msDropDown({byJson:{data:deliveryData, name:'delivery', width: 200, selectedIndex: 1}}).data("dd");
         paymentData = [                    
                    {                                                                                                                               description:'How would you like to pay?', value:'Payment', text:'Payment Method'},
                    {image:'images/msdropdown/icons/Visa-56.png', description:'Secure online payment', value:'Visa', text:'Visa'},
                    {image:'images/msdropdown/icons/Paypal-56.png', description:'Secure online payment', value:'Paypal', text:'Paypal'},
                    {image:'images/msdropdown/icons/EmailPay-56.png', description:'Order by email', value:'Email Payment', text:'Send Your Details'},
                    {image:'images/msdropdown/icons/Mastercard-56.png', description:'(coming soon)', value:'Mastercard', text:'Mastercard', disabled:true},
                    {image:'images/msdropdown/icons/Collect-56.png', description:'(coming soon)', value:'Collection', text:'Order and Collect', disabled:true},
                    {image:'images/msdropdown/icons/Email-56.png', description:'email Menna', value:'Other Method', text:'Alternatives'}
                    ];
    $("#DropItPayments").msDropDown({byJson:{data:paymentData, name:'payments', width: 250}}).data("dd");
    }
    $(document).ready(function(e) { 
    //no use
    try {
        var pages = $("#pages").msDropdown({on:{change:function(data, ui) {
                                                var val = data.value;
                                                if(val!="")
                                                    window.location = val;
                                            }}}).data("dd");
        var pagename = document.location.pathname.toString();
        pagename = pagename.split("/");
        pages.setIndexByValue(pagename[pagename.length-1]);
        $("#ver").html(msBeautify.version.msDropdown);
    } catch(e) {
        //console.log(e);   
    }

    $("#ver").html(msBeautify.version.msDropdown);

    //convert
    $("select").msDropdown();
    createByJson();
    $("#tech").data("dd");
});
function showValue(h) {
    console.log(h.name, h.value);
}
$("#tech").change(function() {
    console.log("by jquery: ", this.value);
})
// 
```

和html：

```
<div id="dropOptions">
    <div id="dropOptionsTitle"><p>Item</p></div>
    <div id="DropItBlodeuwedd"></div>
</div>

<div id="dropOptions">
    <div id="dropOptionsTitle"><p>Precious Stones</p></div>
    <div id="DropItPearls"></div>
</div>

<div id="dropOptions">
     <div id="dropOptionsTitle"><p>Payment</p></div>
    <div id="DropItPayments"></div>
</div>

<div id="dropOptions">
    <div id="dropOptionsTitle"><p>Delivery</p></div>
     <div id="DropItDelivery"></div>
</div>

<div id="dropOptions">
    <div id="dropOptionsTitle"><p>Buy Now!</p></div>
     <div id="DropItBuy"></div>
</div> 
```

同样，工作版本可[在此处查看](http://www.mennalloyd.com/test/buytest.html)

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:33:18.890

我认为您想要的是让您的“购买”按钮动态读取下拉列表当前所说的内容并基于此构建重定向链接，而不是在每次下拉列表更改时尝试更新“购买”按钮。

从您的代码中，我看不到最终 URL 的形式应该是什么。例如，要获取交付选项的当前值，您可以检查`$('#DropItDelivery :selected').text()`类似于`"Made To Order"`.

立即购买！可以是一个读取这些值并使用基本字符串连接构造 URL`button`的`click`事件，例如：

```
window.location = "buynow.html?delivery=" + $('#DropItDelivery :selected').text() +
                  "&payment=" + $('#DropItPayments :selected').text()
                  // etc. 
```

当然，您必须在服务器上处理这些选项。

如果您想重定向到处理器的付款页面，您可以根据付款方式进行分支，并据此为他们提供您想要的 URL。

```
var pm = $('#DropItPayments :selected').text();
if (pm == "Visa")
{
    // Visa payment URL construction
}
else if (pm == "Send Your Details")
{
    // Send your details URL construction
}
// etc. 
```

# jquery - 为什么 KnockoutJs 不知道 JQuery 对 radioButton 所做的更改？

> ID：14588783
> 
> 赞同：0
> 
> 时间：2013-01-29T17:33:42.777
> 
> 标签：jquery, knockout.js

*更新*：我在下面发布了我的代码解决方案作为答案，如果有人想查看 KnockoutJs 自定义绑定的完整（且相当简单）示例，这可能会有所帮助。

* * *

**问题**：
当我使用 jQuery 设置单选按钮的选中状态时……似乎我的 KnockoutJs 视图模型没有跟踪此更改！

**场景**：
我有多个大 DIV，每个 DIV 都包含一个单选按钮。（这使用户可以更轻松地通过单击更大的区域来单击单选按钮。）当用户单击 div 中的某个位置时，我想为他们检查单选按钮......这很好用。但是，当尝试从绑定到此单选按钮的 viewModel 属性中读取值时......它尚未更新。:-(

*唯一一次更新viewModel*是如果我直接单击div 内的单选按钮。如果我只是单击 div 内的某个位置（它执行我的 jQuery），那么....即使收音机明显被选中.... knockoutjs viewModel 属性尚未更新为新值。

**问题：** 有人可以告诉我如何使用 jQuery 更改单选按钮的选中状态，并让 KnockoutJs 可以很好地播放并进行更新吗？

代码如下，这里是 jsFiddle：http: [//jsfiddle.net/CkEMA/67/](http://jsfiddle.net/CkEMa/67/)

```
<script>
    $(document).ready(function ()
    {
        var self = this;

        function ViewModel()
        {
            this.HourlyOrSalary = ko.observable("");
        }
        viewModel = new ViewModel();
        ko.applyBindings(viewModel, document.getElementById('divKnockout'));

        // Click event for DIV around radio button
        $('.divRadioWrapper').click(function ()
        {
            var radio = $(this).find('input[type="radio"]');
            radio.prop('checked', true);

        });

        // Just for testing...
        $('#testButton').click(function ()
        {
            var viewModelVal = viewModel.HourlyOrSalary();
            alert('Value --> ' + viewModelVal);
        });

    });
</script>

<style>
    .divRadioWrapper {
        background-color: #dde9f5;   /*#d8f5f0;*/  /* #dcfbff; */
        width: 75px; 
        padding: 5px 10px; 
        border: 1px solid lightgray;
        cursor: pointer;
        margin-bottom: 10px;
    }
</style>

<div id="divKnockout">
    <div class="divRadioWrapper">
        <input type="radio" name="formType" value="hourly" data-bind="checked: HourlyOrSalary"
        />Hourly</div>
    <div class="divRadioWrapper">
        <input type="radio" name="formType" value="salary" data-bind="checked: HourlyOrSalary"
        />Salary</div>
    <br />

    <input type="button" id="testButton" value="Display viewModel data" />    
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:12:07.580

**谢谢**

谢谢大家的回答。特别是，杨先生帮助我意识到我可能从一开始就以错误的方式思考它。按照他列出的教程，我继续为 knockoutjs 实现了我的第一个自定义绑定。虽然 BenjaminPaul 发布的答案肯定会通过 jQuery 解决问题，但我相信自定义绑定方法确实是一个更干净的解决方案，它允许分离 Young 先生所说的关注点。

**解决方案**

我想分享我最终在下面创建的解决方案，这是一个名为*fancyDivRadio*的 knockoutjs 自定义绑定。:-)

注意事项：

*   'fancyDivRadio' 必须绑定到包含单选按钮的 div。（不，我不想在 div 中自动生成单选按钮，这会限制我未来的样式选择或在 div 中包含其他项目的能力。）
*   正如您通过单击**下面的 jsFiddle 链接**所看到的那样，无论您单击彩色 DIV 中的哪个位置，viewModel 都会更新。 *奇迹般有效！* :)
*   缺点是我最终写了很多代码！！！（与 Benjamin Paul 建议的更直接的 jQuery 方法相反，它只有 3 行代码。）
*   好处是我可以在其他带有单选按钮的页面上重用此代码，我希望单选按钮更容易让用户单击。
*   我什至可以使用这种自定义绑定方法将一些 jQuery 动画添加到 DIV，这非常酷……它确实为您提供了很好的控制！
*   我很可能会将这个自定义绑定剪切并粘贴到一个单独的 JS 文件中，在那里我可以开始积累未来的自定义绑定。

**在这里试试吧！**: [http://jsfiddle.net/CkEMA/66/](http://jsfiddle.net/CkEMa/66/) （注意：固定 jsFiddle 链接。Github KO url 已损坏。）

编码：

```
<script>
    $(document).ready(function ()
    {
        ko.bindingHandlers.fancyDivRadio = {
            init: function (element, valueAccessor)
            {
                // Get radio button located inside this div
                var radio = $(element).find('input[type="radio"]');

                // When div is clicked, check the radio and trigger radio change event
                $(element).click(function ()
                {   
                    radio.prop('checked', true);
                    radio.change();
                });

                // When radio button is checked, update the viewModel property!!
                $(radio).change(function ()
                {
                    if (radio.prop('checked'))  // only if it was changed to checked
                    {
                        // Set viewModel property to value of the radio button that was clicked
                        var value = valueAccessor();
                        value(radio.val());
                    }
                });
            },
            update: function (element, valueAccessor, allBindingsAccessor)
            {
                var value = valueAccessor();
                var valueUnwrapped = ko.utils.unwrapObservable(value);

                // Get radio button located inside this div
                var radio = $(element).find('input[type="radio"]');

                // Set radio to be checked or unchecked
                var shouldBeChecked = valueUnwrapped == radio.val();
                radio.prop('checked', shouldBeChecked);
            }
        };

        function ViewModel()
        {
            this.HourlyOrSalary = ko.observable("");
        }
        viewModel = new ViewModel();
        ko.applyBindings(viewModel);        

    });
</script>

<style>
    .divRadioWrapper {
        background-color: #dde9f5;
        width: 75px; 
        padding: 5px 10px; 
        border: 1px solid lightgray;
        cursor: pointer;
        margin-bottom: 10px;
    }
</style>

<div>
    <div class="divRadioWrapper" data-bind="fancyDivRadio: HourlyOrSalary">
        <input type="radio" name="formType" value="hourly" />
        Hourly
    </div>
    <div class="divRadioWrapper" data-bind="fancyDivRadio: HourlyOrSalary">
        <input type="radio" name="formType" value="salary" />
        Salary
    </div>
    <br />

    <pre data-bind="text: ko.toJSON($data, null, 2)"></pre>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:45:40.893

这可能最好使用内置的 KnockOut Checked Binding Handler 来处理。或者，您可以使用自定义绑定处理程序构建更灵活的处理程序。 [http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

也有一个很好的教程。 [http://learn.knockoutjs.com/#/?tutorial=custombindings](http://learn.knockoutjs.com/#/?tutorial=custombindings)

Knockout 的重点是提供数据绑定处理程序和逻辑控制，因此您不必在其他方面浪费时间。

您可以通过 pre 标记查看正在执行的绑定。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-2.2.1.debug.js"></script>
</head>
<body>

            <input type="radio" name="formType" value="hourly" data-bind="checked: HourlyOrSalary" />Hourly

            <input type="radio" name="formType" value="salary" data-bind="checked: HourlyOrSalary" />Salary

        <br />

        <input type="button" id="testButton" value="Display viewModel data" />

    <pre data-bind="text: ko.toJSON($data, null, 2)"></pre>

    <script>

        $(document).ready(function()
        {
            var viewModel = {
                HourlyOrSalary: ko.observable("")

            };

            ko.applyBindings(viewModel);
        });

    </script>
</body>
</html> 
```

我只是想在这里补充一下...... Knockout 的重点是遵循 DRY 原则（不要重复自己），并练习模型（纯 JSON）、ViewModel（可观察模型 + 计算逻辑 + 验证）的良好分离) 和视图 (HTML)。这种分离是关键，因为它需要删除通常必须编写的用于向服务器发送和接收数据、向用户显示该数据以及在整个操作重新开始之前验证任何用户输入的内容。

你*可以*硬/手工编码整个事情。这是您自己的时间（或脚），因此当您编写大型解决方案而不必复制功能时，此类模式旨在节省您的时间（现在可能更晚）（请阅读我在这里*没有*说*代码*，因为功能可以不同的代码路径相同）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T17:37:11.437

我会在视图模型上设置值并允许更改通知为您选中该框...

```
// Click event for DIV around radio button
        $('.divRadioWrapper').click(function ()
        {
            var newValue = !viewModel.HourlyOrSalary();
            viewModel.HourlyOrSalary(newValue);

        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T17:45:31.317

选中的绑定在单击时触发，而不是值更改事件我为这种情况做了一个标签绑定

[http://jsfiddle.net/CkEMA/7/](http://jsfiddle.net/CkEMa/7/)

```
<input data-bind="checked: HourlyOrSalary, label: { caption: 'Hourly'}"
/></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T17:54:42.143

不需要自定义活页夹，只需修复拼写错误（divKnockous 而不是 divKnockout）并使用您的视图模型更改值：

```
 // Click event for DIV around radio button
    $('div.divRadioWrapper').on("click", function () {
        viewModel.HourlyOrSalary($(this).find(":radio").val());
    }); 
```

[http://jsfiddle.net/CkEMA/8/](http://jsfiddle.net/CkEMa/8/)

# batch-file - 如何使用 .bat 而不是追加到结尾添加使用文本文件的开头？

> ID：14588785
> 
> 赞同：4
> 
> 时间：2013-01-29T17:33:46.800
> 
> 标签：batch-file

我有一个返回数据列表的**批处理**文件。目前，每次我运行**脚本**时，它都会将新提取的数据附加到文本文件的末尾。有没有办法可以将新数据添加到文件的开头，而不是将其附加到末尾？我需要以这种方式工作，因为数据是*按时间顺序*提取的，并且我希望将文本文件从最新到最旧进行排序。

```
@ECHO OFF 
```

REM 用于将服务器用户统计信息记录到位于本地 c:\userlog 目录中的文本文件中

```
ECHO Terminal Server Users, %Date%, %TIME%>>c:\Userlogs\UserListTest.txt
quser /server:servername>>C:\Userlogs\UserListTest.txt

START C:\Userlogs\UserListTest.txt
Exit 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T05:25:02.883

以下将按您的意愿工作

```
 echo this will come at the begining of file >>log.txt
    type log1.txt >> log.txt
    del log1.txt
    ren log.txt log1.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T18:48:22.487

使用临时文件的一种方法。

prepend.bat：

```
:: copy existing file to a temporary file
copy c:\temp\existing.txt c:\temp\temp.txt
:: replace content with your new value
echo test >c:\temp\existing.txt
::  append content of temp file
for /F %%i in (c:\temp\temp.txt) do echo %%i >> c:\temp\existing.txt
:: remove tempfile
del c:\temp\temp.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T11:19:03.923

you can try using the code below.

```
@ECHO OFF
:: Store the string  you want to prepend in a variable
SET "text=%1"
:: copy the contents into a temp file
type userlist.txt > temp.txt
:: Now Overwrite the file with the contents in "text" variable
echo %text% > userlist.txt 
:: Now Append the Old Contents
type temp.txt >> userlist.txt
:: Delete the temporary file
del temp.txt 
```

Hope this solves your problem. :)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-06T22:23:10.570

Batch 中的一个大问题是构建有序数组，这必须通过文件来完成，Batch 中没有数组构造。您可以执行的一种强制将内容放入内存并批量保存一些 IOPS 的选项是使用 ramdisk，确保将文件路径抽象为变量。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-30T05:59:49.967

首先，读取文件的内容。将其附加到您要添加到开头的内容并将所有内容写入文件。

# ubuntu - Mono 3.0、Ubuntu 12.10、Nginx 和 ServiceStack

> ID：14588788
> 
> 赞同：4
> 
> 时间：2013-01-29T17:33:52.883
> 
> 标签：ubuntu, nginx, mono, servicestack

根据 ServiceStack 网站，使用 Mono 在 Linux 上启动和运行 ServiceStack 应该很容易。我已经在系统（Ubuntu 12.10）上安装了 nginx、mono 3.0 和 fastcgi。我已经使用[本](http://www.mono-project.com/FastCGI_Nginx)教程来运行 Nginx 和 fastcgi。在 MonoDevelop 中，我右键单击该项目，然后是 Tools -> Deploy to web。这会生成我要部署的文件。然后我将 dll 复制到 Ubuntu 上的 /var/www/project_folder 中。接下来我启动了 Nginx 和 fastcgi。我的 web.config 文件如下所示：

```
<?xml version="1.0"?>
<configuration>
   <system.web>
      <customErrors mode="Off"/>
      <httpHandlers>
         <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
      </httpHandlers>
      <compilation>
         <assemblies>
            <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
         </assemblies>
      </compilation>
   </system.web>
   <!-- Required for IIS 7.0 (and above?) -->
   <system.webServer>
      <validation validateIntegratedModeConfiguration="false" />
         <handlers>
            <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
         </handlers>
    </system.webServer>
</configuration> 
```

我还没有将 XSP 添加到服务器。当我转到服务器上的网页（远程地址）时，我收到一条错误消息，告诉我它找不到 ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory。web.config 文件与包含此 ServiceStackHttpHandlerFactory 的 dll 位于同一文件夹中。

任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:24:46.067

首先，如果您还没有阅读它们，您应该阅读关于让[ServiceStack 在 Mono/Linux 上运行](https://github.com/ServiceStack/ServiceStack/wiki)的 wiki 文档。

您复制了哪些 ServiceStack.dll 以及从哪里获得它们？这`ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory`是 ASP.NET 入口点，它在核心`ServiceStack.dll`二进制文件中可用。

如果找不到入口点 ServiceStack.dll，那么在 Mono FastCGI/ASP.NET 主机中查找 ServiceStack .dll 时一定有问题，在 ASP.NET 应用程序中，它应该位于与`/bin`您所在位置相关的文件夹`Web.Config`中. 如果所有文件都在正确的位置，则可能是文件权限问题。

# java - Intellij 输出信息过多

> ID：14588795
> 
> 赞同：3
> 
> 时间：2013-01-29T17:34:08.387
> 
> 标签：java, intellij-idea, output

想知道在执行带有参数的 java 应用程序时是否可以清理 intellij 的输出。我只需要查看应用程序名称之前的参数和所有信息对我没有用处，并希望我现在可以将它们关闭。

例如：

```
"C:\Program Files\Java\jdk1.7.0_11\bin\java" -Didea.launcher.port=7538 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.7.0_11\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\jce.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\jfxrt.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\resources.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext\zipfs.jar;C:\Users\asd\IdeaProjects\Assignment1\out\production\Assignment1;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain Problem2 25 -5 10 5frf 
```

如您所见，参数是最后 4 个单词。我只是想看看 app.java arg1 arg2 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:49:08.870

尽管我认为您无法更改这一点，但这个简单的 Java 解决方案怎么样：

```
class Something{

    public static void main(String[] args){
        for (String arg : args){
            System.out.println(arg);
        }
        System.out.println("--------");
    }

} 
```

看来我是对的。这是[“运行”视图](http://www.jetbrains.com/idea/webhelp/run-tool-window.html)的文档。它不包含有关执行此类操作的任何信息。

* * *

不要忘记在最终版本中删除它的一个想法是添加一个`//TODO Remove this`. IntelliJ 可以在一个列表中列出所有 ToDo，在您将其发送出去之前，您只需查看所有 todo 并将其删除。

另一个想法是`#define`通过简单地在发布代码时`public static final boolean RELEASED`设置a 来模拟 C 中的 a。`true`您可以检查该标志，现代 Java 编译器很可能会优化输出块。

# mysql - 返回多行的Mysql子查询

> ID：14588799
> 
> 赞同：2
> 
> 时间：2013-01-29T17:34:20.620
> 
> 标签：mysql, subquery

我正在尝试获取某个纬度和经度内的邮政编码，然后使用返回的邮政编码拉出给定区域内的所有帖子。纬度和经度的数字是变量，但出于测试目的，它们是硬数字。有人可以指导我正确的方向来完成这项工作吗？

查询 #1 - 作品选择帖子

```
SELECT user_id, session, zip, price, city, state, post_id, category, shortDesc,  fpi 
FROM post ORDER BY post.post_id DESC; 
```

查询 #2 - 作品选择区域中的邮政编码

```
SELECT count(value) as duplicate, value 
from (SELECT DISTINCT zipcode as value from zip 
  WHERE latitude BETWEEN 27.747 AND 28.147 
  UNION all 
   SELECT DISTINCT zipcode FROM zip 
   WHERE longitude BETWEEN -82.657 AND -82.257) 
as tbl group by value having count(value) > 1; 
```

查询为子查询

尝试：失败

```
SELECT user_id, session, zip, price, city, state, post_id, category, shortDesc,  fpi 
FROM post 
WHERE zip = (
  SELECT count(value) as duplicate ,value 
  from (SELECT DISTINCT zipcode as value from zip 
    WHERE latitude BETWEEN 27.747 AND 28.147 
    UNION all SELECT DISTINCT zipcode FROM zip 
     WHERE longitude BETWEEN -82.657 AND -82.257) 
  as tbl group by value having count(value) > 1) 
ORDER BY post.post_id DESC; 
```

错误 #1241 - 操作数应包含 1 列

下一次尝试：失败

```
SELECT user_id, session, zip, price, city, state, post_id, category, shortDesc,  fpi 
FROM post WHERE zip = (select distinct zipcode from zip 
  where latitude between 27.747 AND 28.147) 
  IN ( select distinct zipcode from zip 
    where longitude between -82.657 AND -82.257); 
```

1242 - 子查询返回多于 1 行

下一次尝试：失败

```
SELECT user_id, session, zip, price, city, state, post_id, category, shortDesc,  fpi 
FROM post 
WHERE zip = ANY (
  select distinct zipcode from zip 
  where latitude between 27.747 AND 28.147) 
IN ( select distinct zipcode from zip 
     where longitude between -82.657 AND -82.257); 
```

1064 - 您的 SQL 语法有错误；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:51:05.143

这应该有效。：

```
SELECT user_id, session, zip, price, city, 
  state, post_id, category, shortDesc, fpi 
FROM post WHERE zip in (SELECT DISTINCT zipcode as value 
                                      from zip 
                                    WHERE latitude BETWEEN 27.747 AND 28.147 
                                    and longitude BETWEEN -82.657 AND -82.257)
   ORDER BY post.post_id DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:51:17.993

我不确定你想要什么

试试这个

```
select user_id, session, zip, price, city, state, post_id, category, shortDesc,  fpi 
FROM post WHERE zip in
(SELECT DISTINCT zipcode from zip where 
(latitude BETWEEN 27.747 AND 28.147) AND (longitude BETWEEN -82.657 AND -82.257)) 
```

# ios - iOS 测量对象

> ID：14588801
> 
> 赞同：0
> 
> 时间：2013-01-29T17:34:26.593
> 
> 标签：ios, uiview, uilabel

我想知道我的数学 foo 是否刚刚关闭。

假设我有一个`UIView`758.0 宽的。我有一个方法可以将标签放在那个 UIView 中。我为文本传递了一个带有字符串对象的 NSArray `UILabel`- 一个数组有 3 个对象，一个有 4 个。第一个数组`UILabel`的宽度始终为 180.0。我希望将剩余空间`UIView`平均分配给剩余的数组对象。所以我这样做：

```
float space = (UIView.frame.size.width-180)/(NSArray.count-1); 
```

但是当创建剩余的 2 或 3`UILabel`秒时，我总是缺少一些空间。我没有考虑填充或其他什么吗？

这是我的控制台的输出：

```
2013-01-29 12:16:57.923 EUS Calculator[5388:c07] 758.000000::180.000000::578.000000::272.500000
2013-01-29 12:16:57.925 EUS Calculator[5388:c07] 758.000000::180.000000::578.000000::272.500000
2013-01-29 12:16:57.928 EUS Calculator[5388:c07] 758.000000::180.000000::578.000000::176.166672
2013-01-29 12:16:57.929 EUS Calculator[5388:c07] 758.000000::180.000000::578.000000::176.166672
2013-01-29 12:16:57.929 EUS Calculator[5388:c07] 758.000000::180.000000::578.000000::176.166672 
```

第一个数字是宽度`UIView`，第二个是第一个宽度`UILabel`，第三个是剩余空间，第四个是剩余空间/剩余数量`UILabels`。

# html - 如何在 li 元素中居中图像+文本

> ID：14588812
> 
> 赞同：0
> 
> 时间：2013-01-29T17:35:10.503
> 
> 标签：html, css

基本上我有 li 元素，其中包含一个小图标和一个文本，我想将这些元素水平和垂直居中。但是我没有让它工作，因为我没有真正的 CSS 经验。

我已经设法使用两个跨度和行高将元素垂直居中。但是我在水平居中失败了，因为文本对齐不适用于跨度，并且浮动中间不存在。

大家有什么想法吗？？

这是我的代码：

HTML：

```
echo "<li style=\"background-color:#f7f7f7; color:#2EA620;\"><span class=\"image\"><img src=\"Images/List/Teams/" . $temp . ".png\" /></span><span class=\"text\">".$obj_teams->Name."</span></li>"; 
```

CSS：

```
li {
    width:173px;
    height:30px;
    line-height:30px;
    font:"Myriad Pro";
    font-size:14px;
    padding-left:10px;
    padding-right:10px;
    border-bottom:1px solid;
    border-left:1px solid;
    border-right:1px solid;
    border-color:#CCC;
}

.image {
    float:left;
    text
}

.text {
    float:left;
    color:#2EA620;
    line-height:30px;
} 
```

这是它现在的样子的图像。（如果标记了我想要居中的元素）

![http://i.imgur.com/tI9Vulf.png](../Images/5cef5e0709f8948541a6f77243e81a10.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:41:19.313

你可以使用一个`text-align`规则：

```
li.center {
  text-align: center;
} 
```

看看这个小提琴的一个活生生的例子：

[http://jsfiddle.net/fX9jp/1/](http://jsfiddle.net/fX9jp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:43:09.433

尝试应用`text-align: center;`到您的跨度的父（或任何祖先）元素，因为跨度是一个内联元素（假设`.text`是您的跨度）。

或者尝试将 span 设置为块元素并将其左右边距设置为`auto`：

```
.text {
    display: block;
    margin: 0 auto;
} 
```

像 spans 这样的内联元素会响应`text-align`它们的祖先元素，而像 div 这样的块元素会响应将边距设置为`auto`. 请注意，元素内包含的文本将响应`text-align`放置在该元素上的内容（因为从技术上讲，该文本是该元素内的“文本节点”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:50:03.943

您的具体问题是您正在浮动图像并向左跨度，但随后希望它们居中。删除两者上的浮动，然后您可以将 text-align: center 放在您的 li 元素上。

```
li {
width:173px;
height:30px;
line-height:30px;
font:"Myriad Pro";
font-size:14px;
padding-left:10px;
padding-right:10px;
border-bottom:1px solid;
border-left:1px solid;
border-right:1px solid;
border-color:#CCC;
text-align:center;
}

.text {
color:#2EA620;
line-height:30px;
} 
```

# ruby-on-rails - 如何在我的 Rails 3.2 应用程序中设置开发人员特定数据

> ID：14588813
> 
> 赞同：0
> 
> 时间：2013-01-29T17:35:17.687
> 
> 标签：ruby-on-rails, git

我们有多个开发人员正在开发我们当前的应用程序。该应用程序使用云中的数据。我们使用的服务有一个 app_id 和一个 app_key。我们在每个环境（产品、开发、测试）的远程云上都有一个 app_id、app_key 对。问题是，当每个开发人员需要处理他/她自己的功能时，我们不想共享同一个远程应用程序（使用 app_id、app_key 对）。因此，每个开发人员都需要在此远程服务上拥有自己的配对。密钥存储在 yaml 文件中：

```
development:
  id: 4321
  key: 321

test:
  id: 12345
  key: 123

production:
  id: <%= ENV['MASTER_ID'] %>
  key: <%= ENV['MASTER_KEY'] %> 
```

我如何设置它，以便当每个开发人员开始开发一项功能时，他/她已经在他们的开发环境中拥有自己的密钥，并且他们不需要每次都将其复制/粘贴回此配置文件？

（如果有帮助，我们会使用 git）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:56:26.570

每个开发人员都应该`app_keys.yml`在他的本地开发驱动器中有一个，然后你只需将它添加到 .gitignore 文件中，这样它就不会被 git 跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:02:33.560

我们遵循以下设计，使密钥/信息依赖于各种工作机器/服务器等：

定义一个变量，在`environment.rb`其中存储`path`每台机器需要的所有（或单个）yml 文件的目录。

无论需要在何处加载这些密钥，都会通过文件中设置的路径获取 yml`environment.rb`文件。

这里的优点是每个系统在各种过程中只需要修改单个文件，即存储*path/to/keys/directory*`git`的 env 文件。每个开发/服务器都需要在该目录中具有文件模板，以复制这些文件并自行将适当的密钥正确放置在这些文件中。

# java - jflex语法中的空格分隔

> ID：14588821
> 
> 赞同：3
> 
> 时间：2013-01-29T17:35:54.683
> 
> 标签：java, jflex

假设我需要描述语言的简单语法

```
foo 2
bar 21 
```

但不是

```
foo1 
```

使用 jflex 我写了 smt 之类的

```
WORD=[a-zA-Z]+
NUMBER=[0-9]+
WHITE_SPACE_CHAR=[\ \n\r\t\f]

%state AFTER_WORD
%state AFTER_WORD_SEPARATOR

%%
<YYINITIAL>{WORD}               { yybegin(AFTER_WORD); return TokenType.WORD; }        
<AFTER_WORD>{WHITE_SPACE_CHAR}+ { yybegin(AFTER_WORD_SEPARATOR); return TokenType.WHITE_SPACE; }        
<AFTER_WORD_SEPARATOR>{NUMBER}  { yybegin(YYINITIAL); return TokenType.NUMBER; }        

{WHITE_SPACE_CHAR}+             { return TokenType.WHITE_SPACE; } 
```

但我不喜欢用于说单词和数字之间应该有空格的额外状态。我怎样才能简化我的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:36:15.390

解析时根本不需要空格标记。

摆脱`TokenType.WHITE_SPACE`，当您在词法分析器中获得空白时，只需忽略它而不是返回任何内容。

为了防止`'foo1'`，为它添加另一个规则`[A-Za-z0-9]`和另一个没有出现在语法中的标记类型；那么这是一个语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:43:52.960

根据我对 JFlex 的了解，如果您正确识别空格（似乎是这种情况），则不必使用额外的状态。只需为“标识符”制定一条规则，为“数字”制定另一条规则。

```
%%
{WORD}    { return TokenType.WORD; }
{NUMBER}  { return TokenType.NUMBER; } 
```

如果你的语言强制每一行只由一个标识符、一个空格和一个数字组成，这应该通过句法分析（即通过解析器）而不是词法分析来检查。

# javascript - 正确扩展 ExtJS 组件而不覆盖侦听器

> ID：14588823
> 
> 赞同：10
> 
> 时间：2013-01-29T17:36:00.590
> 
> 标签：javascript, extjs, extjs4.1

考虑以下示例类`Parent`：

```
Ext.define('Parent', {

    ...
    listeners: {
        render: {
            fn: doSomething
        },
    }, 
```

};

以及以下`Child`扩展默认值的类`Parent`：

```
Ext.define('Child', {
    extend: 'Parent',

    ...
    listeners: {
        afterrender: {
            fn: doSomething
        },
    },
}; 
```

即使`Child`没有指定监听器`render`（它只提供`afterrender`），`render`监听器（在类中定义）也不会在的组件渲染`Parent`时被触发；`Child`即监听器被新的*监听*器规范*覆盖。*

 *如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T18:09:57.697

您可以在 中指定处理程序`initComponent`，而不是使用`listeners`配置对象。

```
Ext.define('Child', {
    extend: 'Parent',

    ...
    initComponent: function() {
        this.on('afterrender', this.onAfterRender);
    },

    onAfterRender: function() {
        ...
    }
}; 
```

`listeners`config 方法不起作用的原因是[因为传递给的 config 对象`Ext.define`将`Ext.apply`'d](http://www.sencha.com/forum/showthread.php?143869-How-to-properly-extend-components-in-ExtJS-4.&p=637517&viewfull=1#post637517)传递给任何创建的新对象。换句话说，它完全覆盖了任何引用类型（例如`listeners`对象）。

使用`initComponent`是首选，因为它是专门为子类化而设计的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:35:59.427

好吧，目前框架中没有干净的解决方案；然而，像这样有点笨拙的东西可以相对安全地使用：

```
Ext.define('Child', {
    extend: 'Parent',

    listeners: Ext.merge(Parent.prototype.listeners || {}, {
        ...
    })
}); 
```

我必须承认它并不比使用好多少，`initComponent`但至少它更具声明性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T18:09:54.007

`initComponent`通过在using中声明事件处理程序来“修复”问题`on`。所以子类的示例代码是：

```
Ext.define('Child', {
    extend: 'Parent',

    ...
    initComponent : function(args) {
        var me = this;
        me.callParent(args);
        me.on('afterrender', me.doSomething, this);
    },
}; 
```

对我来说仍然不那么好看；如果有人有更好的解决方案，请回答问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-11T14:18:53.457

In version 6.02 configuring viewConfig with a new method in a child, will still keep other methods within viewConfig from the parent. Really good.*

# internet-explorer - .mht 文件在 Windows 7 上的 IE9 中显示为文本

> ID：14588824
> 
> 赞同：0
> 
> 时间：2013-01-29T17:36:06.967
> 
> 标签：internet-explorer, plaintext, mhtml

我使用 Windows 7 psr.exe 工具录制了一个 mht 文件。当我双击它时，我的 IE 会“按原样”显示文件内容，即纯文本。这是我在浏览器窗口顶部看到的：

```
From:
Subject:
Date:
MIME-Version: 1.0
Content-Type: multipart/related; type="text/html";
  boundary="=_NextPart_SMP_1cdfe45348001c2_0003fd8b_00000001"
This is a multi-part message in MIME format. 
```

如何解决？它只发生在一台电脑上——我局域网中的其他电脑正确显示 mht 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:40:16.603

我在这里找到了一个关于这个问题的有趣线程：

[http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/does-internet-explorer-9-no-longer-support-mht/fa40b200-cef5-4670-87c4-3a32edbea5af](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/does-internet-explorer-9-no-longer-support-mht/fa40b200-cef5-4670-87c4-3a32edbea5af)。

看来，MS Office 安装可能会影响在 IE 中查看 mht 文件的方式。作为这种情况的快速解决方法，可以在 MS Word 中正确打开 mht 文件。

# formatting - Fortran 中带有前导零的格式化输出

> ID：14588828
> 
> 赞同：16
> 
> 时间：2013-01-29T17:36:15.237
> 
> 标签：formatting, fortran

我有一些十进制数字需要在适当的时候写入带有前导零的文本文件。我对此进行了一些研究，我所看到的一切都表明：

```
 REAL VALUE
  INTEGER IVALUE

  IF (VALUE.LT.0) THEN
    IVALUE = CEILING(VALUE)
  ELSE
    IVALUE = FLOOR(VALUE)
  ENDIF
  WRITE(*,1) IVALUE, ABS(VALUE)-ABS(IVALUE)
1 FORMAT(I3.3,F5.4) 
```

据我了解，`IF`块和`ABS`部件应该允许它适用于 -100 < VALUE < 1000 的所有值。如果我设置`VALUE = 12.3456`，上面的代码应该产生“012.3456”作为输出，它确实如此。但是，如果我有类似的东西`VALUE = -12.3456`，我会得到“（3个星号）.3456”作为我的输出。我知道当语句中没有提供足够的字符时，通常会出现星号`FORMAT`，但是在这个例子中 3 个应该就足够了（“-”有 1 个字符，“12”有两个字符）。我还没有用类似的东西对此进行测试`VALUE = -9.876`，但我希望输出为“-09.8760”。

我对它的工作原理的理解有什么问题吗？还是我违反了这种技术的其他限制？

更新：好的，我已经对此进行了更多研究，它似乎是负值和`I3.3`格式的组合。如果 VALUE 为正并且我有`I3.3`，它将按预期放置前导零。如果 VALUE 是负数并且我只有`I3`作为我的格式，我会得到正确的值输出，但它会在负号之前用空格填充，而不是在负号之后用零填充（所以 -9.8765 输出为“-9.8765”，但是那个前导空格破坏了我使用 .txt 文件的目的，所以这是不可接受的）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T18:14:19.707

问题在于您的整数数据编辑描述符。您需要至少 3 位数字，`I3.3`并且字段宽度仅为 3。没有减号的位置。使用`I4.3`或，在 Fortran 95 及更高版本中，`I0.3`.

回答您的编辑：使用`I0.3`，它使用所需的最少字符数。

**但最后，你可能只是想要这个：`WRITE(*,'(f0.3)') VALUE`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:19:23.873

当然，我可以通过将其更改为

```
 REAL VALUE
  INTEGER IVALUE

  IF (VALUE.LT.0) THEN
    WRITE(*,1) FLOOR(ABS(IVALUE)), ABS(VALUE)-FLOOR(ABS(VALUE))
1   FORMAT('-',I2.2,F5.4)    
  ELSE
    WRITE(*,2) FLOOR(VALUE), ABS(VALUE)-FLOOR(BS(VALUE))
2   FORMAT(I3.3,F5.4)
  ENDIF 
```

但这感觉更笨重，实际上我将尝试在同一行中写入多个值，这将导致非常混乱的`IF`块或复杂的光标移动，如果可能的话，我想避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T19:07:12.037

作为给猫剥皮的另一种方法。我根本不想对数据进行算术运算，而只是处理格式：

```
character*8 fstring/'(f000.4)'/
val=12.34
if(val.gt.1)then
    write(fstring(3:5),'(i0)')6+floor(log10(val))
elseif(val.lt.-1)then
    write(fstring(3:5),'(i0)')7+floor(log10(-val))
elseif(val.ge.0)
    write(fstring(3:5),'(i0)')6
else
    write(fstring(3:5),'(i0)')7
endif
write(*,fstring)val 
```

只是为了使用支持字符函数的现代 fortran 的乐趣，您可以将其汇总到一个函数中并最终得到如下构造：

```
write(*,'('//fstring(val1)//','//fstring(val2)//')')val1,val2 
```

# android - 两个纬度和经度之间的旅行距离

> ID：14588829
> 
> 赞同：8
> 
> 时间：2013-01-29T17:36:26.817
> 
> 标签：android, google-api, latitude-longitude, google-directions-api

我正在计算并给出两组 Lat 和 Long 之间的距离，以便在路上旅行。

我看过 Google 的 Directions and Distance Matrix API。并且还做了很多关于SO的其他问题。

但是我无法找出最好的方法，您需要每次计算到大约 20-25 个位置的距离。

我们正在构建一个旅行应用程序，该应用程序需要用户在其所在位置的 Android 设备上提供此信息。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T20:39:32.287

如果您正在寻找行驶距离而不是最短距离，那么您可以尝试使用以下 URL 调用 API 服务：

```
http://maps.googleapis.com/maps/api/distancematrix/json?origins=54.406505,18.67708&destinations=54.446251,18.570993&mode=driving&language=en-EN&sensor=false 
```

这将导致 JSON 如下所示：

```
{
   "destination_addresses" : [ "Powstańców Warszawy 8, Sopot, Polska" ],
   "origin_addresses" : [ "majora Henryka Sucharskiego 69, Gdańsk, Polska" ],
   "rows" : [
      {
         "elements" : [
            {
               "distance" : {
                  "text" : "24,7 km",
                  "value" : 24653
               },
               "duration" : {
                  "text" : "34 min",
                  "value" : 2062
               },
               "status" : "OK"
            }
         ]
      }
   ],
   "status" : "OK"
} 
```

结果距离是两个位置之间的实际道路距离。

[您可以在Google 距离矩阵 API](https://developers.google.com/maps/documentation/distancematrix/)中找到更多详细信息

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T17:44:06.033

在你问之前，你可能想多搜索一点。

无论如何，使用 Haversine 公式

```
rad = function(x) {return x*Math.PI/180;}

distHaversine = function(p1, p2) {
  var R = 6371; // earth's mean radius in km
  var dLat  = rad(p2.lat() - p1.lat());
  var dLong = rad(p2.lng() - p1.lng());

  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) * Math.sin(dLong/2) * Math.sin(dLong/2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  var dist = R * c;

  return dist.toFixed(3);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-29T18:14:33.873

**它给出了两个位置之间的距离。**

首先，您需要获取源的纬度、经度和目的地的经度。在这个方法中传递这些。

它返回你他们之间的距离。

```
public float distanceFrom(float lat1, float lng1, float lat2, float lng2) {
    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) * Math.sin(dLng/2) * Math.sin(dLng/2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;
    int meterConversion = 1609;
    return new Float(dist * meterConversion).floatValue();
} 
```

# r - 尝试安装 R 包：“ggplot2”不可用

> ID：14588843
> 
> 赞同：1
> 
> 时间：2013-01-29T17:37:42.037
> 
> 标签：r, cran

如果您让我知道我应该运行什么，我可以发布更多数据，但这是错误和版本。

```
> install.packages("ggplot2", dependencies = TRUE)
Warning in install.packages :
  package ‘ggplot2’ is not available
Installing package(s) into ‘/home/johnny4000/R/x86_64-pc-linux-gnu-library/2.12’
(as ‘lib’ is unspecified)
Warning in install.packages :
  package ‘ggplot2’ is not available 
```

和版本

```
> version               
platform       x86_64-pc-linux-gnu          
arch           x86_64                       
os             linux-gnu                    
system         x86_64, linux-gnu            
status                                      
major          2                            
minor          12.1                         
year           2010                         
month          12                           
day            16                           
svn rev        53855                        
language       R                            
version.string R version 2.12.1 (2010-12-16) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:43:10.290

两种选择：

1.  更新您的 R 版本。版本 2.12 很旧（这是您应该选择的选项）。
2.  如果步骤 1 不可行，那么您可以尝试[存档](http://cran.r-project.org/src/contrib/Archive/)的包，但这可能会很棘手，因为您需要所有相关的依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:45:06.997

我以前遇到过这个问题，就我而言，每次都是以下问题之一：

1.  网络连接不良。有时，我的旧互联网连接会变得参差不齐，如果存储库连接成功但在传输存储库内容时连接中断，我会收到此错误。
2.  过时的存储库。所有存储库都不会一起更新，因为每个存储库都由不同的个人/组/组织管理。切换存储库可以为您提供不同的软件包选择和不同的版本。
3.  过时的 R 版本。我注意到您正在运行的 R 版本比当前稳定版本要旧几个版本。对于某些版本的 R，某些包似乎没有显示。我认为这与包中的某些依赖项列表有关。更新可能会解决此问题。

祝你好运！

# javascript - 获取解析的 XML 日期的子字符串

> ID：14588846
> 
> 赞同：1
> 
> 时间：2013-01-29T17:37:45.333
> 
> 标签：javascript, jquery, xml-parsing, substring

我只需要从这个解析的 XML 日期中获取子字符串

```
var cDateEnd = new Date(Date.parse(cDateEndXML)); 
```

目前输出如下：

```
Tue Jan 29 2013 00:00:00 GMT-0700 (MST) 
```

然而我需要的是

```
Tue Jan 29 2013 
```

每当我添加子字符串时，控制台都会打印出它没有方法“子字符串”

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:44:27.377

您应该首先将其转换为字符串。

```
var cDateEnd = new Date(Date.parse(cDateEndXML));
console.log(cDateEnd.toString().substring(0,15)); // prints "Tue Jan 29 2013" 
```

# javascript - Mootools 淡入淡出平滑效果

> ID：14588847
> 
> 赞同：0
> 
> 时间：2013-01-29T17:38:03.930
> 
> 标签：javascript, mootools

嗨，我需要叠加层在 mouseenter 和 mouseleave 上平滑淡入淡出。覆盖在 CSS 中设置为不显示（因为它需要这样，它会出现在 mouseenter 上）。如何创建漂亮的淡入淡出效果？

```
#overlay{
width:300px;
height:161px;
background-color: white;
position: absolute;
display: none;
top: -300px;
left: 150px;
}

    var xlImgOverlay = $('overlay');

// overlay for showing larger images
$$('.s_img .img_wrapper img').addEvents({
    mouseenter: function(){
        var xlImg = this.getAttribute('data-xl-img');
        console.log(xlImg);
        var xlImgEl = new Image();
        xlImgEl.src = xlImg;

        xlImgOverlay.grab(xlImgEl, 'top');
        xlImgOverlay.setStyle('display', 'block');
        el.setStyle('opacity', '0.7');
        console.log(xlImgOverlay);
        xlImgOverlay.fade('in', 500);

        },
    mouseleave: function(){
        xlImgOverlay.fade('out', 500);
        xlImgOverlay.empty();
        xlImgOverlay.setStyle('display', 'none');
        el.setStyle('opacity', '1');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:15:58.023

您不能同时使用 display: none 和 mouseenter 。最好将 mouseenter/mouseleave 事件放在 .img_wrapper 而不是图像本身上，这样事件才会真正触发。

# ruby-on-rails - 使用 ActsAsTaggableOn 重命名标签时出现问题

> ID：14588850
> 
> 赞同：0
> 
> 时间：2013-01-29T17:38:09.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-taggable-on

这是我的方法：

```
def rename
  old_tag = params[:old_tag]
  new_tag = params[:new_tag]

  if old_tag != new_tag
    # find any articles that use the old tag
    Article.tagged_with(old_tag).each do |article|
      # give articles with the old tag the new tag
      article.tag_list.add(new_tag)
      # remove the old tag
      article.tag_list.remove(old_tag)
      article.save
    end
  end

  render :json => "#{old_tag} renamed to #{new_tag}"
end 
```

我遇到的问题是`.save`在文章中添加了一个新标签，但没有删除旧标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:51:05.743

我面临的问题是更新标签将启动所有相关模型的验证，在我的情况下，验证失败是因为我的开发机器上没有可用的图像并且附件验证失败。

要忽略验证，我会这样做：

```
article.save(:validate => false) 
```

# python - 字符串连接：在 Python 代码中放置大量文本

> ID：14588851
> 
> 赞同：7
> 
> 时间：2013-01-29T17:38:14.443
> 
> 标签：python, string, python-2.7

假设我有一大段文字，比如说

> 喜马拉雅朝圣的第三轮也是最后一轮以一对宏伟的大型曼陀罗画作探索神圣空间的主题，这是对特定神灵居住的三维建筑空间的二维表示。这些画作可追溯至十四世纪和十六世纪，以鲜艳的色彩代表了喜金刚的宇宙观。展出的其他几幅画作描绘了不同藏族教派的历史老师。

在Java中我可以写成

```
"The third and final rotation of Himalayan Pilgrimage explores "
+ "the theme of Sacred Space with a pair of magnificent large "
+ "mandala paintings, two-dimensional representations of a "
+ "three-dimensional architectural space where a specific "
+ "deity resides. Dating to the fourteenth and sixteenth "
+ "centuries, these paintings represent, in vivid colors, "
+ "a cosmology of the deity Hevajra. Several other paintings"
+ " on view depict historic teachers of various Tibetan orders." 
```

然而，在 Python 中，如果我这样做，我会收到有关加号的抱怨`+`。相反，如果我使用`'''`缩进，我会得到一堆前导空格（缩进，因此代码易于阅读）。

有谁知道这个问题的解决方案：如何将一大段文本粘贴到 Python 代码中而不会产生空格？

我正在寻找的答案不是：将整个文本放在一行

同样，我需要添加跨越多行的文本，而不会产生额外的空白。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T17:42:06.827

*当您使用三引号字符串时，*您不必缩进：

```
class SomeClass(object):
    def somemethod(self):
        return '''\
This text
does not need to be indented
at all.
In this text, newlines are preserved.
'''
        # but do continue the next line at the right indentation. 
```

您还可以使用括号自动连接字符串：

```
foo = (
    "this text will be "
    "joined into one long string. "
    "Note that I don't need to concatenate these "
    "explictly. No newlines are included\n"
    "unless you insert them explicitly."
) 
```

因为 python 会自动将一个表达式中的连续字符串连接在一起（请参阅[*字符串文字连接*](https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation)）。

您仍然可以自由地使用`+`符号来显式连接字符串，但请使用括号使其成为一个表达式：

```
foo = (
    "this text will be " +
    "joined into one long string. " + 
    "It is concatenated " +
    "explictly using the `+` operator."
) 
```

另一种方法是在行尾之前使用反斜杠：

```
foo = "This is not " \
    "recommended" 
```

但我发现使用括号和字符串文字连接更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:53:13.877

有几种方法可以做到这一点，当您有多个字符串之间只有空格时，编译器会从它们创建一个字符串，如前所述。您也可以使用`\`转义行尾，就像这样。

```
SomeText="Something" \
         "Something else" 
```

或者

```
SomeText="Something" + \
         "Something else" 
```

这样做的缺点是你必须记住`\`每一行的。作为一般规则，使用`+`将许多字符串连接在一起是一个坏主意，因为它会为`+`找到的每个字符串创建一个副本，因为字符串是不可变的，这会花费很长时间。而是考虑使用`str.join`，像这样。

```
SomeText="\n".join(["Something",
                  "Something else",
                  "Last Item"]) 
```

请注意，这具有额外的优势，您可以`" "`根据您正在执行的操作（换行符或无字符）将 替换为其他分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:46:03.453

[`textwrap.dedent`](http://docs.python.org/2/library/textwrap.html#textwrap.dedent)将清理那些前导空格，而不会弄乱您的源缩进。

# android - 可以动态修改消息的对话框类

> ID：14588852
> 
> 赞同：0
> 
> 时间：2013-01-29T17:38:15.520
> 
> 标签：android

我正在寻找一个对话框类，其中设置为类实例的消息（例如，通过 setMessage）可以根据情况进行更改。这可能吗？还是设置为永久的消息（因此需要一个新的对话框实例）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:40:59.580

我猜你的意思是`AlertDialog`，因为正如@Sam 所说，`Dialog`没有`setMessage()`方法。当然，您可以使用相同的`AlertDialog`实例。只是`setMessage()`和展示。请记住，您将丢失以前的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:43:36.157

与[AlertDialog](https://developer.android.com/reference/android/app/AlertDialog.html)不同，通用[Dialog](https://developer.android.com/reference/android/app/Dialog.html)没有`setMessage()`方法。您可以使用`findViewById()`查找传递给的 TextView`setContentView()`并调用`setText()`它。或者，如果合适，只需使用 AlertDialog。

# javascript - 如何更改对 javascript 中元素的引用？

> ID：14588859
> 
> 赞同：0
> 
> 时间：2013-01-29T17:38:30.217
> 
> 标签：javascript, xml, dom

我想修改我的 xml 的一个元素。我必须查询它才能找到它，然后我似乎只能修改它的副本。我使用：`clientXML.querySelector("[id=XMLIssue-9]").childNodes[2].textContent;`来隔离有问题的元素。我想用这个替换元素`newXMLIssue.childNodes[0]`。它们都具有完全相同的结构。我做不到：

```
clientXML.querySelector("[id=XMLIssue-9]") = newXMLIssue.childNodes[0]; 
```

因为它会导致方程左侧的函数出现错误。我也试过：

```
var x = clientXML.querySelector("[id=XMLIssue-9]"); 
x = newXMLIssue.childNodes[0]; 
```

但这只会更改元素的副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:40:18.157

您必须致电[`replaceChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.replaceChild)父母：

```
var parent = clientXML.querySelector("[id=XMLIssue-9]");

parent.replaceChild(parent.childNodes[0], parent.childNodes[2]); 
```

# javascript - 内部函数无法访问匿名函数参数

> ID：14588867
> 
> 赞同：0
> 
> 时间：2013-01-29T17:39:10.110
> 
> 标签：javascript, scope, anonymous-function

我一直在尝试这样做

```
function test()
{
    $.getJSON("http://myurl.com",function (data){
        for( i=0; i<data.length; i++){
            test = createElement('img');
            test.onclick = function (){ myotherfun(data[i]); }
        }
    }
}

function myotherfun(data)
{
    alert(data);
} 
```

错误消息指出`data`范围未涵盖。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:42:52.693

现在您已经编辑了您的问题，我可以看到问题 XD

问题是该`onclick`函数将使用`data`and (更重要的是)的当前值`i`。所以本质上它正在寻找`data[data.length]`，根据 的定义`length`不存在。

相反，您需要“锁定”迭代器的值。以下是您的操作方法：

```
for(i=0; i<data.length; i++) {
  (function(i) {
    // do stuff that relies on i
  })(i);
} 
```

# mysql - 如何根据我没有的列值选择行，但它与我拥有的列值存在于同一行中？

> ID：14588869
> 
> 赞同：1
> 
> 时间：2013-01-29T17:39:12.947
> 
> 标签：mysql

假设我有一个如下表：

```
movie_author | movie_name | movie_price 
```

如果我有一行的movie_name 列值，我将如何进行查询以获取与包含我拥有的movie_name 的行中具有相同movie_author 的所有电影？

我可以在两个查询中执行此操作：第一个从与我拥有的 movie_name 对应的行中获取 movie_author，然后第二个获取具有相同 movie_author 的所有行，但是如何在一个查询中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:41:21.100

例如，使用`IN`：

```
SELECT * from movies m2 
WHERE m2.movie_author in (
    SELECT m1.movie_author 
    FROM movies m1
    WHERE m1.movie_name like '%AAA%'
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:45:10.067

您可以使用联接，如下所示：

```
SELECT m1.*
FROM movies m1 inner join movies m2
     on m1.movie_author = m2.movie_author
        and m2.movie_name='Movie name' 
```

# jquery - jQuery 滑块渲染错误

> ID：14588879
> 
> 赞同：1
> 
> 时间：2013-01-29T17:39:45.630
> 
> 标签：jquery, jquery-ui, google-chrome, jquery-ui-slider

滑动后，我在带有 jQ​​uery 滑块（下图）的 chrome 中遇到了一个奇怪的重绘错误。其他人得到这个问题，有解决办法吗？

![jQuery滑块重绘错误](../Images/793a3f72d529251f117e1558b27bc976.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:53:11.010

这实际上是 Chrome 的一个众所周知的问题。查看以下帖子：

[使用 JavaScript 为 DIV 设置动画会在 Chrome 上呈现工件](https://stackoverflow.com/questions/11924986/animating-a-div-with-javascript-renders-artifacts-on-chrome)

[修复 Google Chrome 上的蓝线](https://stackoverflow.com/questions/9674267/fix-blue-line-on-google-chrome?rq=1)

# javascript - 使用 Javascript 查找页面中的位置

> ID：14588880
> 
> 赞同：0
> 
> 时间：2013-01-29T17:39:45.523
> 
> 标签：javascript, jquery, css, razor, scroll

我有一个功能可以将我的索引页面滚动到特定的锚标记并更改背景图像。我现在遇到的问题是我需要使用菜单页面中的链接移动到索引页面中的锚点并更改该背景图像。我的菜单页面出现在我的索引页面的顶部。

我在索引页面中滚动的 Javascript 是：

```
 $('-Button-to-scroll-is-clicked').click(function () {
        clearInterval(ID);
        $('html, body').animate({
            scrollTop: $('-Anchor').position().top
        },
        3000);
        var IntID = setInterval(changeImg, 1500);
        function changeImgHome() {
            $('.imagemhome').css('background', 'url(-New-Image.jpg) top center no-repeat fixed');
        };
        ID = IntID;
        return false;
    }); 
```

我用于从菜单页面滚动索引页面的 Javascript 是：

```
 $('-Button-In-Menu-Page').click(function () {
         $('html, body').animate({
             scrollTop: $('-Anchor-In-Index-Page').position().top
         },
         3000);
         return false;
     }); 
```

正如我所说，我需要在我的索引页面中检查我在滚动后所处的位置（使用 window.scroll 函数），以便我可以适当地更改背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:24:26.037

好吧，首先，位置收集元素的位置。默认情况下，元素是内联放置的，并且具有静态位置并且没有位置坐标，因此使用 .position().top 将无法产生页面位置，除非您已经将所有这些东西都放在绝对位置。

不过这不是问题，因为我们有.offset。偏移量告诉您目标相对于文档的 x 和 y 位置，因此我们将使用它。

现在我们的函数应该是这样的

```
window.onready = function(){
    $(-Button-to-scroll).on('click',function(){
       var itemPos = $('target').offset().top;
       $('body,html').animate({scrollTop:itemPos},3000);
       $('.imagemhome').css('background', 'url(-New-Image.jpg) top center no-repeat fixed');
    }
} 
```

编辑：用于您的滚动。这不是最有效的方法，因为它基本上会在每次用户滚动时不断重写您的背景图像。

```
$('html').on('scroll',function(){
    var top = $(this).offset().top
    if ((top >= 200)||(top <= 300)){
        $('.imagemhome').css('background', 'url(-New-Image.jpg) top center no-repeat fixed');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:14:58.520

可以使用 检索您在页面上的当前位置`$(window).scrollTop()`。

# sql - 选择同时满足 SQL 中两个条件的项目

> ID：14588882
> 
> 赞同：4
> 
> 时间：2013-01-29T17:39:53.977
> 
> 标签：sql, data-processing, sqlyog

我有一个系统可以将字段中项目的 XYZ 位置报告给 SQL 数据库。我试图通过过滤已知的时间点来过滤误报（仅识别移动的项目），当项目通过一个点时，以及项目在通过一个点后应该在什么位置。

我的逻辑是，如果一个项目在一个位置和时间并且在另一个位置和时间，它一定已经移动了。

所以我有这个查询：

```
SELECT tag_ID, X_location*3.28, Y_location*3.28, locate_time
FROM tag_blink_history
WHERE 
     (LOCATE_TIME > '2013-01-29 11:05:51' 
     AND LOCATE_TIME < '2013-01-29 11:06:56' 
     AND ((y_location*3.28 > 61) 
     AND (y_location*3.28 < 67.5)) 
     AND ((x_location*3.28 > 14.5) 
     AND (x_location*3.28 < 17.5)))
     AND (((y_location*3.28 > 70) 
     AND (y_location*3.28 < 75)) 
     AND locate_time < '2013-01-29 11:06:50' )
ORDER BY tag_id DESC 
```

有任何想法吗？我意识到我用上述查询向 SQL 提出的要求是同时在两个地方（这不可能发生），但我想要的是同时存在于这两个空间约束中的记录 - 我想要它们同时存在的记录，而不是要求同时在两者中的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:46:25.177

我认为你需要自己加入——你当前的查询永远不会产生任何结果。

尝试这样的方法来获取在您的 WHERE Critera 中多次出现的标签 - 但是，您是否缺少第二个位置的某些标准？这个例子使用你上面的例子：

```
SELECT DISTINCT t.tag_ID
FROM tag_blink_history t
   JOIN tag_blink_history t2 ON t.tag_ID = t2.tag_ID AND (t.x_location <> t2.x_location OR t.y_location <> t2.y_location)
WHERE (t.LOCATE_TIME > '2013-01-29 11:05:51' 
      AND t.LOCATE_TIME < '2013-01-29 11:06:56' 
      AND ((t.y_location*3.28 > 61) AND (t.y_location*3.28 < 67.5)) 
      AND ((t.x_location*3.28 > 14.5) AND (t.x_location*3.28 < 17.5)))
      AND (((t2.y_location*3.28 > 70) AND (t2.y_location*3.28 < 75)) 
      AND t2.locate_time < '2013-01-29 11:06:50' )
ORDER BY t.tag_id DESC 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:41:01.337

您可以使用聚合（几种方法之一）：

```
SELECT tag_ID, min(X_location*3.28), max(X_location*3.28), min(Y_location*3.28), max(Y_location*3.28), min(locate_time), max(locate_time)
FROM tag_blink_history
WHERE 
     (LOCATE_TIME > '2013-01-29 11:05:51' 
     AND LOCATE_TIME < '2013-01-29 11:06:56' 
     AND ((y_location*3.28 > 61) 
     AND (y_location*3.28 < 67.5)) 
     AND ((x_location*3.28 > 14.5) 
     AND (x_location*3.28 < 17.5)))
     AND (((y_location*3.28 > 70) 
     AND (y_location*3.28 < 75)) 
     AND locate_time < '2013-01-29 11:06:50' )
GROUP BY
   tag_ID
HAVING
   (min(X_location) <> max(X_location))
   OR
   (min(Y_location) <> max(Y_location))
ORDER BY tag_id DESC 
```

上面的@sgeddes 自加入方法也不错；您还可以查看派生表。

# css-selectors - Selenium CSS 选择器按 id 和多个类

> ID：14588884
> 
> 赞同：10
> 
> 时间：2013-01-29T17:40:01.467
> 
> 标签：css-selectors, selenium-webdriver

第一次在这里使用 selenium，我想知道为什么：

```
final WebElement justAnId = findElement(By.cssSelector("#someId"));
final WebElement whatIWant = justAnId.findElement(
    By.cssSelector(".aClass.andAnother input[type=text]")
); 
```

有效，但不是：

```
final WebElement whatIWant = findElement(By.cssSelector(
    "div#someId.aClass.andAnother input[type=text]"
)); 
```

虽然他们看起来和我一样，但我得到：

```
org.openqa.selenium.NoSuchElementException: Unable to locate element:
{"method":"css selector","selector":"div#someId.aClass.andAnother input[type=text]"} 
```

这是 Selenium 中的预期行为还是错误？我快速浏览了 Selenium 中的错误跟踪器，但我没有看到任何相关内容。在提出一个不需要的问题之前，我想在这里问一下。另外据我了解，它在 IE6 中不起作用，但谁在乎。我在这次运行中使用了 Firefox。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-19T01:28:17.827

实际上，两者是完全不同的选择器。

这是您的 cssSelector：

```
div#someId.aClass.andAnother input[type=text] 
```

但你真正想写的是：

```
div#someId .aClass.andAnother input[type=text] 
```

注意 ID 和类之间的空格。你需要那个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T17:45:38.603

`findElement()`在当前上下文中找到一个元素，这意味着您的第一段代码实际上是在找到一个匹配的元素，该元素`.aClass.andAnother input[type=text]`包含在`#someId`. 具有该 ID 的元素可能包含也可能不包含这两个类；WebDriver 不假定您指的是相同的元素；`input`只要它的祖先是`#someId`and ，它就会找到`.aClass.andAnother`。

这与 完全不同，后者*仅*在`div#someId.aClass.andAnother input[type=text]`其中查找任何内容（即它是一个*同时*包含ID 和类的）。`input[type=text]``div#someId.aClass.andAnother` *`div`*

# visual-studio-2010 - Powershell 运行时

> ID：14588885
> 
> 赞同：3
> 
> 时间：2013-01-29T17:40:03.700
> 
> 标签：visual-studio-2010, powershell, windows-8, nuget

我在 Windows 8 下运行 VS 2010。安装 NuGet 并运行包管理器控制台后，我收到以下消息：

`Error: The Package Manager Console requires PowerShell 2.0 runtime, which is not detected on this machine. Please install the PowerShell 2.0 from http://support.microsoft.com/kb/968929 and restart Visual Studio.`

我知道 PowerShell 3.0 是随 Windows 8 自动安装的。为什么会弹出这个错误信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:56:38.050

虽然该`Windows Powershell 2.0 Engine`功能在 Windows 8 中默认启用，但您需要打开 .Net 3.5 才能实际使用它，如此[处](https://docs.microsoft.com/en-us/powershell/scripting/windows-powershell/install/installing-the-windows-powershell-2.0-engine)所述：

> 在 Windows 8 上，Windows PowerShell 2.0 引擎功能默认开启。但是，要使用它，您需要打开它需要的 Microsoft .NET Framework 3.5 选项。

请按照上述链接中的步骤使其正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:48:25.840

虽然默认安装 Windows 8 上的 PowerShell 3.0，但未安装 PowerShell 2.0。您可以进入程序和功能并选择“打开或关闭 Windows 功能”，然后您可以从那里选择 Windows PowerShell 2.0 进行安装。

# sql - SQL MIN() 作为子查询 - “不允许组函数”

> ID：14588892
> 
> 赞同：2
> 
> 时间：2013-01-29T17:40:21.230
> 
> 标签：sql, database

我正在尝试选择一个与另一列中的最小数字相对应的值，然后将其用于另一个表中的 SET 。

但它告诉我“这里不允许使用群组功能”

还有其他方法可以做到这一点吗？

```
UPDATE team 
SET OWNERID = (SELECT USERID
         FROM teamuser
         WHERE MIN(CREATETIME) 
         AND teamId = 5) 
WHERE teamId = 5 
```

（team 和 teamuser 表都有一个列 teamId）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:42:58.793

你应该做

```
UPDATE team 
SET OWNERID = (SELECT USERID
         FROM TEAMUSER 
         WHERE CREATETIME = (select min(CREATETIME) from TEAMUSER)
         AND teamId = 5
)
WHERE teamId = 5 
```

您不能在 where 子句中使用 agreggate 函数，只能在 group by 之后在 selects 或 Have 子句中使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:43:37.730

```
UPDATE team 
SET OWNERID = (SELECT USERID
         FROM TEAMUSER 
         WHERE CREATETIME = (SELECT MIN(CREATETIME) FROM TEAMUSER WHERE teamId = 5)
         AND teamId = 5) 
WHERE teamId = 5 
```

# python - 给定实例的方法如何获取实例？

> ID：14588905
> 
> 赞同：23
> 
> 时间：2013-01-29T17:41:05.093
> 
> 标签：python, class, methods, instance

```
class MyClass:
    def myMethod(self):
        pass

myInstance = MyClass()

methodReference = myInstance.myMethod 
```

`myInstance`现在，如果您现在只能访问，您可以获得参考`methodReference`吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-29T17:43:06.953

试试这个：

```
methodReference.im_self 
```

如果您使用的是 Python 3：

```
methodReference.__self__ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T17:45:14.120

如果您使用的是 Python 3：

```
methodReference.__self__ 
```

除此以外：

```
methodReference.im_self 
```

并且以类似的方式，对于班级：

```
methodReference.im_class 
```

对于这种代码发现，您应该安装 iPython 并使用选项卡，例如，在您的情况下 myReference.+TAB 会给出：

```
In [6]: methodReference. methodReference.im_class 
methodReference.im_func   methodReference.im_self 
```

因此，您不必担心记住太多事情——您知道该方法可能是由函数对象提供的，并且从 iPython 给出的建议中，通常很明显您正在寻找什么方法/属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:45:01.863

你可以自己解决这个问题 - 看看`dir`输出：

```
>>> dir(mr)
['__call__', ... '__str__', '__subclasshook__', 'im_class', 'im_func', 'im_self'] 
```

`im_*`实例是指为`instance methods`...定义的属性

它被定义的类，功能代码块，以及它所绑定的对象......

# c# - 需要一个 EF/Linq/MVC 库来封装/抽象文件系统

> ID：14588906
> 
> 赞同：0
> 
> 时间：2013-01-29T17:41:07.173
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, entity-framework-5

我们的系统接受上传的文件。它们存储在文件系统中，路径保存在实体框架`File`实体中。它可以工作，但不透明/不简单，并且有很多“活动部件”需要维护。

使用像 EF 这样的高级工具的想法意味着我不必担心平凡的 db 东西。我想要同样的东西，但要管理文件系统对象的存储库。

*是否有可以为我管理文件系统的库？*具有这些功能：

```
- storing files
- moving
- deleting
- detecting missing or corrupted files
- computing+comparing hashes
- working with image files
- extracting metadata
- determining paths; relative to webserver, absolute, etc.
- updating files
- referencing all this via a linq-like syntax
- hopefully integrated with EF
- etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:48:07.350

鲍比乙，

试试[http://sensenet.codeplex.com/](http://sensenet.codeplex.com/)它是一个开源的 asp.net DMS。

希望这可以帮助！

# google-drive-api - Google 驱动器可恢复上传和 CORS

> ID：14588923
> 
> 赞同：3
> 
> 时间：2013-01-29T17:41:45.973
> 
> 标签：google-drive-api, cors

我正在使用谷歌驱动器可恢复上传 API，并且在某些情况下看到缺少 CORS 标头。到 OPTIONS 的预飞行始终返回 200，但是在发出实际请求时，在某些情况下缺少标头，这意味着我无法读取响应。

在以下情况下看不到 CORS 标头： - 上传最终块 - 创建可恢复会话 - 查询会话状态

在以下情况下看到 CORS 标头： - 上传非最终块（308 状态响应）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:44:46.297

可恢复上传目前不完全支持 CORS。对不起。谷歌正在努力解决这个问题。

编辑：现在已修复。请参阅[http://github.com/googledrive/cors-upload-sample](http://github.com/googledrive/cors-upload-sample)

# java - 基于可自定义的键绑定执行不同的操作

> ID：14588924
> 
> 赞同：1
> 
> 时间：2013-01-29T17:41:47.937
> 
> 标签：java, oop, key-bindings

我需要从文件中读取可定制的操作并将它们绑定到程序的键。

如果我有这样的文件：

```
w:up
s:down
a:left
d:right 
```

我将如何让这个运行？

我看到它的唯一方法是这样做：

```
// hardcoded String to Action to turn "up" into an actual instruction
HashMap<String, Action> actions = new HashMap<String, Action();
actions.put("up", new Up());
actions.put("down", new Down()); // etc.

HashMap<Integer, Action> keybindings = new HashMap<Integer, Action>();
while (!endOfFile) {
    int key = letterToKeycode(getKey()); // gets keycode for letter
    Action action = actions.get(getCommand());
    keybindings.put(key, action);
    endOfFile = isEndOfFile();
} 
```

然后当我的 keylistener 方法被调用时，它会：

```
public void keyPressed(int keycode) {
    keybindings.get(keycode).doAction();
} 
```

并且`doAction()`会在每个`Action`班级。所以如果我有`Up()`，它会调用`person.moveUp()`。

如果我要重新绑定我的大部分键，可能会导致数百个只有几行的类。

上面的概念有一些东西，一个 switch 语句让我想避免它们。这样做有“更清洁”的技巧吗？

作为我的意思的一个例子，Eclipse 有你可以在首选项中设置的键绑定，所以当你按下一个键时，它会触发一个事件并根据这些设置解释键应该做什么。我正在尝试这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:06:00.393

与其自己创建，不如`Map`使用[*Key Bindings*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)；[`LinePanel`](https://stackoverflow.com/a/5797965/230513)是一个例子。您可能能够参数化或重构您的`Action`实现以减轻扩散。要保留用户定义的键分配，您可以调整[此处](https://stackoverflow.com/a/11724866/230513)引用的示例中使用的方法。

# php - 访问 Javascript 变量中的 JSON 数据

> ID：14588928
> 
> 赞同：3
> 
> 时间：2013-01-29T17:42:02.787
> 
> 标签：php, javascript, jquery, json

不得不问很尴尬，但我坦率地承认我是一个没有经验的 Javascript 开发人员，我就是想不通。希望这对其他人来说非常简单，我要提前感谢这里的每一个人，感谢这个网站不断为我提供的帮助。

几天前，我问[了这个问题](https://stackoverflow.com/questions/14538104/json-to-jquery-what-am-i-doing-wrong)，并且不再收到该错误。但是我在试图实际访问存储在变量中的数据时遇到了困难。我的 JSON 看起来像这样：

```
[
    {"id":"1","name":"Bob","haircolor":"Brown"},
    {"id":"2","name":"Carol","haircolor":"Red"}
] 
```

它进入一个像这样的变量：

```
var people=[];
$.getJSON("php/getpeople.php", function(data){ //getpeople.php generates the JSON
    people.push(data);
}); 
```

由于将人员初始化为数组，我不再收到任何错误消息。但我也无法访问人员的内容。`people.length`返回 0，并且`people[0]`和`people[1]`未定义。

它就在那里，我知道这一切都在那里，但我正忙着搞清楚在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:51:46.880

`people`仅在 ajax 事件发生**后**获取值。

将数据放入`people`数组后调用一些回调函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:52:33.500

试试这个：http: [//jsfiddle.net/hUq7k/](http://jsfiddle.net/hUq7k/)

```
$.getJSON("php/getpeople.php", function(data){ //getpeople.php generates the JSON
    $.each(data, function(i, people){
       console.log(people.id); //<------this should output "1, 2"
    });
}); 
```

确保你得到`response data`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:51:40.120

如果服务器实际上返回了预期的 JSON，则以下内容*应该有效：*

```
$.getJSON("php/getpeople.php", function(data){ //getpeople.php generates the JSON
    var people = data;
    alert("people.length: " + people.length);
    if (people.length > 0) {
        alert("people[0].id: " + people[0].id);
    }
}); 
```

以下不应该*工作*，即`people`will be `undefined`，因为 $.getJSON 是一个异步方法，并且此代码试图`people`在 AJAX 操作完成之前访问。

```
var people;
$.getJSON("php/getpeople.php", function(data){ //getpeople.php generates the JSON
    people = data;
});

alert("people.length: " + people.length);
if (people.length > 0) {
    alert("people[0].id: " + people[0].id);
} 
```

# java - 对于循环变量问题

> ID：14588929
> 
> 赞同：0
> 
> 时间：2013-01-29T17:42:03.070
> 
> 标签：java, android, for-loop, syntax-error

我开发了以下 for 循环来在下拉列表中设置数据。如果我在`.get()`方法上使用一个数字来选择和比较已单击的项目，这将非常有效，但显然这对于​​设置的整数值是无用的。

我收到“a”变量无法解析为变量的错误。

我真的不知道为什么？

这是代码：

```
List<String> list = new ArrayList<String>();
list.add("-");
list.add("Medical");
list.add("Business");
list.add("Family");
list.add("Other");
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
editTime.setAdapter(dataAdapter);

for(int a = 0; a < list.size(); a ++);
{
    // Error on the 'a' variable - cannot be resolved to a variable.    
    if(typeReturned == list.get(a));
    {
        // Error on the 'a' variable - cannot be resolved to a variable.
        editTime.setSelection(a);

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T17:43:43.800

`for`循环后有一个不必要的分号：

```
for(int a = 0; a < list.size(); a ++); 
```

如果不删除，就和写一样：

```
for(int a = 0; a < list.size(); a ++) { }
// a isn't in scope here any more. 
```

在你的条件之后你有同样的错误`if`。你也必须去掉那个分号。

另外，我认为`typeReturned`是 a `String`，而您正在将其与`==`. 这是个坏主意。您**必须**使用`.equals()`，如果要检查两个字符串是否具有相同的内容，请参阅：

[如何比较 Java 中的字符串](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T17:43:47.060

删除 for 循环末尾的分号

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T17:44:03.860

在 for 循环的末尾有一个备用分号。删除它应该可以解决问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-29T17:44:30.067

```
for(int a = 0; a < list.size(); a ++); 
```

去掉`;`最后的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-29T17:45:07.737

您必须删除“;” 之后`for`和之后`if`。

您改进的代码：

```
 for(int a = 0; a < list.size(); a ++) //WITHOUT SEMICOLON !
    {

    if(typeReturned == list.get(a)) //WITHOUT SEMICOLON !
    {

         editTime.setSelection(a);
    }

    } 
```

现在应该可以了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-29T17:46:18.827

for 后面有两个分号

```
for(int a = 0; a < list.size(); a ++); 
```

还有如果之后

```
if(typeReturned == list.get(a)); 
```

删除两者，它会工作

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-29T17:48:32.407

删除`if`和`for`语句后面的分号。

```
for(int a = 0; a < list.size(); a ++);   
if(typeReturned == list.get(a)); 
```

for 循环和 if 语句不是完整的语句，不能在它们后面加上分号。它们是用于检查和执行其后的块或行的条件语句。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T17:54:26.457

正如其他人所提到的，您的代码中也只有语法错误。

Java 中的分号表示语句的结束，因此您的 for 循环在遇到第一个分号的地方结束，而不管之后的花括号如何。其余代码被视为一个单独的块，变量“a”仅在 for 循环中是局部的，因此在第一个分号后不可见。

这同样适用于 if 语句后的分号。

```
for(int a = 0; a < list.size(); a ++);  //** REMOVE THIS SEMICOLON
    {

    // Error on the 'a' variable - cannot be resolved to a variable.    
    if(typeReturned == list.get(a));  //** REMOVE THIS SEMICOLON
    {
        // Error on the 'a' variable - cannot be resolved to a variable.
        editTime.setSelection(a);

    }

    } 
```

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-21T15:08:07.820

从 if 和 for 语句中删除分号。

# netbeans - 为什么 Netbeans 抱怨我的 GNUmakefile？

> ID：14588931
> 
> 赞同：2
> 
> 时间：2013-01-29T17:42:07.890
> 
> 标签：netbeans, makefile, gnu-make

我正在使用现有的 GNUmakefile 制作一个 Netbeans C++ 项目。我去了 File -> New Project -> C/C++ with Existing Sources 并选择了包含我当前文件（包括 GNUmakefile）的文件夹。

但是，当我运行我的应用程序时，出现以下错误。

```
make: Makefile: No such file or directory
make: *** No rule to make target `Makefile'. Stop.

BUILD FAILED (exit value 2, total time: 67 ms) 
```

我怀疑我的 Makefile 名为“GNUmakefile”，与“Makefile”不同。但是，我不想重命名“GNUmakefile”，因为我正在与其他想要保持相同的人一起研究这个项目。

这就是 Netbeans 抱怨我的 GNUmakefile 的原因吗？如何告诉 Netbeans 改用 GNUmakefile？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:06:04.423

看起来您必须调用 make as `make -f Makefile`，因此您明确（无论您是否意识到）说要使用名为`Makefile`. 否则，GNU make 会很乐意使用 GNUmakefile：

```
$ ls
GNUmakefile
$ cat GNUmakefile
all: ; @echo done
$ make
done
$ make -f Makefile
make: Makefile: No such file or directory
make: *** No rule to make target `Makefile'.  Stop. 
```

请注意，您只会收到在最后一种情况下报告的错误。所以你只需要改变你调用 GNU make 的方式。或者，您可以符号链接`Makefile`到`GNUmakefile`：

```
$ ln -s GNUmakefile Makefile
$ gmake -f Makefile
done 
```

# android - 自定义标题栏 与此类似

> ID：14588932
> 
> 赞同：0
> 
> 时间：2013-01-29T17:42:11.463
> 
> 标签：android, user-interface, titlebar, custom-titlebar

![在此处输入图像描述](../Images/095ca4f5c05c987fb264ce5a06fc1447.png)

我想在我的 Android 应用程序中创建一个自定义标题栏，有点像这样。如果我的问题看起来很愚蠢，请原谅，我是初学者。谁能告诉我它是标题栏还是操作栏？另外，如何将这种阴影黑色赋予标题栏/操作栏？PS：我在我的 Android 上使用 GingerBread。我的应用程序要求最低 SDK 版本为 4，但它也针对 Jelly bean。在 GingerBread 中，我无法使用 ActionBar。请帮我解决这个问题。将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:46:22.940

您将需要为此使用 ActionBarSherlock 库（这将允许您一直使用它回到 SDK 版本 4）。

它的样式相当容易，并且肯定是正确的方法。很多例子，因为它是一个非常流行的库。

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:47:42.490

如果您想以 min API 4 为目标，那么正如您所说，您将无法使用 ActionBar。

因此，您可以将您的栏创建为 LinearLayout 或带有您想要的任何按钮/图标的东西，并将其放在所有活动的顶部。如果您有很多，那么将 Bar（单击处理程序等）处理重构为 Activity 的子类，然后使用所有其他 Activity 扩展它可能是值得的。

将 9-patch png 设置为 LinearLayout 的背景可以轻松实现视觉效果。只需在 photoshop/Gimp 中制作您想要的渐变并将其放入 draw9Patch 以在边缘添加像素，使其能够很好地拉伸以适合任何屏幕。

**编辑：**按照其他人的建议使用 actionbar sherlock 可能比我建议的“手动”执行更好。

# jquery - jQuery 和主题在独立页面中不起作用

> ID：14588934
> 
> 赞同：0
> 
> 时间：2013-01-29T17:42:20.317
> 
> 标签：jquery, html, jquery-ui

我在玩 jQuery 手风琴小部件——我肯定错过了一些东西。[这里](http://jqueryui.com/resources/demos/accordion/default.html)的小部件看起来很棒。但是，如果我抓住那个 EXACT html 并创建一个独立的页面，然后在 IE 或 Chrome 中打开它，它看起来很糟糕。没有圆角，小的下拉箭头在页面的中间，而不是在标题上......我只想创建一个看起来与示例完全相同的手风琴小部件。

我在这里缺少什么，手风琴样式的 CSS 来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:46:02.973

你缺少的是[大量的 CSS](http://jqueryui.com/resources/demos/style.css)。这就是圆角、提供渐变和放置箭头的方法。

# javascript - JavaScript<->DOM 循环引用在现代浏览器中是否安全？

> ID：14588935
> 
> 赞同：1
> 
> 时间：2013-01-29T17:42:23.647
> 
> 标签：javascript, dom, garbage-collection

我正在构建一个 AJAX 应用程序，它大量使用显示数据的表。为了保持设计简单，能够将表行 (DOM) 与数据对象 (JavaScript) 联系起来非常好，反之亦然。因此，例如，如果单击一行，我知道该行与哪个数据对象一起使用，或者如果删除了一个数据对象，我很容易知道要从表中删除哪一行。几年前，当我尝试这个时，我最终遇到了很多内存泄漏。我知道 IE8+ 已经解决了其中的大部分问题。Chrome、FireFox 和 Safari 的现代版本怎么样？

这是代码的一个示例，这些天这“安全”吗？

```
// Email class, holds info about each email displayed in a table
function Email()
{
   this.To = "";
   this.From = "";
   this.Row = null;
}

// This array would actually come from an AJAX web service call
var Emails = new Array();
Emails[0] = new Email();
Emails[0].To = "whatever";
Emails[0].From = "hello";
Emails[1] = new Email();
Emails[1].To = "whatever";
Emails[1].From = "hello";

// Code like this would be used to build initial table, after this rows would
//  be added deleted as updates arrive via AJAX calls    
var table = document.createElement("table");
for(var x=0;x<Emails.length();x++)
{
   var row = table.insertRow(-1);
   row.Email = Emails[x]; // Is this safe?
   Emails[x].Row = row; // ...and also this?
   var cell = row.insertCell(-1);
   cell.innerHTML = Emails[x].To;
   cell = row.insertCell(-1);
   cell.innerHTML = Emails[x].From;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:03:58.497

这是安全的，因为在您的 javascript 和 DOM 元素超出范围（您的页面消失，javascript 对象超出范围）之后的某个时候，内存最终将被清理。

但是，我建议不要这样做。您基本上是在代码中创建一个表，然后将这些 DOM 元素与业务对象相关联。这是混合 UI 和逻辑。

相反，我建议使用[KnockoutJS](http://learn.knockoutjs.com/#/?tutorial=intro)让它为您处理所有 DOM 到 JavaScript 的绑定。使用 KnockoutJS，我会这样编写您的代码：

HTML：

```
<table>
   <tbody data-bind="foreach: Emails">
      <tr>
        <td data-bind="html: To"></td>
        <td data-bind="html: From"></td>
      <tr>
   </tbody>
</table> 
```

JavaScript：

```
var viewModel = {
   Emails: ko.observableArray()
};

makeSome.AjaxCall(function(emailResults) {
    viewModel.Emails(emailResults);
}

ko.applyBindigns(viewModel); 
```

现在您的 UI 保留在 DOM 中，而您的逻辑保留在 JavaScript 中。

作为额外的奖励，每当您向 viewModel.Emails 数组添加或删除电子邮件时，DOM 都会更新。例如，仅仅调用**viewModel.Emails.remove(someEmail)**会自动为你更新 DOM；.push 同上。

# java - javamail - 获取邮件正文内容格式错误

> ID：14588939
> 
> 赞同：2
> 
> 时间：2013-01-29T17:42:38.727
> 
> 标签：java, email, formatting, jakarta-mail, mime-message

当我尝试从电子邮件中检索消息正文时，它以半句话和奇怪的格式出现。任何帮助都会很棒...

代码：

```
protected void dumpPart(Part p) throws MessagingException, IOException
    {
        if (p.isMimeType("text/plain"))
        {
            if (!p.getContent().toString().equals(null))
                System.out.println((String)p.getContent());

        }
        else if (p.isMimeType("multipart/*"))
        {
            Multipart mp = (Multipart)p.getContent();

            for (int x = 0; x < mp.getCount(); x++)
            {
                dumpPart(mp.getBodyPart(x));
            }
        }
    } 
```

输出：

`The gist of PNM's protest in RP00-626 is that we shouldn't be able to`

`charge a transport or fuel fee for our imbalance netting and trading`

`service.`

`I aggress with PNM that our tariff language is`

`vague.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:48:13.520

我想我看到了问题。

你正在分块消息。

当您`dumpPart`使用每个块调用时，它会以新行打印出来。所以如果你的消息是分块链接这个

```
A: The gist of PNM's protest in RP00-626 is that we shouldn't be able to
B: charge a transport or fuel fee for our imbalance netting and trading
C: service. 
```

然后，当您重新组装它时，您将在每个块之后插入新行。

这样做将删除换行符。

```
protected void dumpPart(Part p, StringBuilder sb) throws MessagingException, IOException
    {
        if (p.isMimeType("text/plain"))
        {
            if (!p.getContent().toString().equals(null))
                sb.append((String)p.getContent());

        }
        else if (p.isMimeType("multipart/*"))
        {
            Multipart mp = (Multipart)p.getContent();

            for (int x = 0; x < mp.getCount(); x++)
            {
                dumpPart(mp.getBodyPart(x), sb);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:32:32.290

我看不出您的示例输出有问题。看起来两个句子分成五行，因为它可能在原始文本/纯文本部分中。原始部分的 Content-Type 可能为“text/plain; format=flowed”。在这种情况下，您需要自己实现“format=flowed”的语义（就像您正在阅读 html 部分一样）。JavaMail 只是提供对数据的访问，格式由您决定。

# php - 查询php序列化的字符串blob

> ID：14588941
> 
> 赞同：0
> 
> 时间：2013-01-29T17:42:48.170
> 
> 标签：php, mysql

我有一个存储序列化 php 字符串的字段。在 mysql 内部，此字段存储为 blob 数据类型。

是否可以在纯 mysql 中查询该字段以获取特定值？

通过查询，我的意思是作为序列化字符串的一部分，内部可能有一个值，例如“myval = 1”；我想匹配这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:49:05.427

尝试使用`LIKE`

```
SELECt * FROM table_a WHERE blob_value LIKE '%myval=1%'; 
```

# scala - scala中的作业评估为Unit有什么原因吗？

> ID：14588942
> 
> 赞同：1
> 
> 时间：2013-01-29T17:42:48.510
> 
> 标签：scala

> **可能重复：**
> [Scala 赋值评估到 Unit 而不是赋值的动机是什么？](https://stackoverflow.com/questions/1998724/what-is-the-motivation-for-scala-assignment-evaluating-to-unit-rather-than-the-v)

scala中的作业评估为Unit有什么原因吗？

```
var s:String = null

s = "hello"     // works
s += " world" 

(s = "hello") += " world" // dramatic problem 
```

或者括号有什么魔力？

# performance - 有没有使用 Fabric js 构建的高级应用程序？

> ID：14588944
> 
> 赞同：10
> 
> 时间：2013-01-29T17:42:57.080
> 
> 标签：performance, html, fabricjs

我有很多使用 Fabric.js 构建的简单应用程序或示例。

我可以使用 Fabric.js 制作高级应用程序吗？我想检查一些应用程序并查看它的性能，以便我确认 Fabric.js 也可以处理大型应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T00:28:26.457

我们专门为Printio.ru 上的[设计编辑器构建了 Fabric。](http://printio.ru/tees/new)每天有 1000 多名访客使用它。

来自其他大型网站的有[easel.ly——](http://easel.ly)视觉主题创建工具。还有[mywallsticker.de](http://www.my-wallsticker.de/index.php?cl=designer&html5=1&text=fabricjs)、[scrollkit.com](https://www.scrollkit.com/)等。[_](https://github.com/kangax/fabric.js/wiki/Who%27s-using-Fabric)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T10:23:49.397

此处列出了使用 FabricJS 的大型站点[https://github.com/kangax/fabric.js/wiki/Who%27s-using-Fabric](https://github.com/kangax/fabric.js/wiki/Who%27s-using-Fabric)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:26:07.833

[http://printio.ru/](http://printio.ru/)是最好的之一，您正在寻找什么样的高级应用程序？查看关于 google 群组的讨论 [https://groups.google.com/forum/?fromgroups#!forum/fabricjs](https://groups.google.com/forum/?fromgroups#!forum/fabricjs) 你会有所了解

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-27T12:24:57.330

我使用fabricjs 为android 构建[了DesignX 应用程序](https://play.google.com/store/apps/details?id=fida.pk.designx.thumbnail.poster.designer&hl=en)，其中几乎包括使用fabricjs 可能的所有内容。

# jquery - 如何在 JQuery 中将所有错误写入控制台

> ID：14588946
> 
> 赞同：1
> 
> 时间：2013-01-29T17:43:06.453
> 
> 标签：jquery, error-reporting

我刚刚开始使用 JQuery，但是在尝试访问不存在的变量时它没有写入任何错误，例如：

```
window.alert($.ui.keyCode.someNonExistingName);
switch(e.keyCode) {
    case $.ui.keyCode.someNonExistingName:
        ...
        break;
    ...
}
someNonExistingFunction(); 
```

将弹出一个包含（“未定义”）文本的窗口，但不会将错误写入控制台。另一方面，当它试图调用未定义的函数时，错误会打印到控制台并停止程序。

有没有办法设置错误级别报告以报告所有错误和警告，例如未定义变量的使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:10:38.780

使用未定义的变量不是错误，但访问未定义变量的属性或方法是错误的。没有办法捕获它，因为它实际上不是一个错误，只是 javascript 的工作原理。

但是，如果许多现代 javascript IDE 知道该变量似乎没有在任何地方定义，它就会为您添加下划线。例如，我使用 WebStorm ( [http://www.jetbrains.com/webstorm/](http://www.jetbrains.com/webstorm/) )，它会自动为我执行此操作，但这是一个常见功能。

# c# - 在 winRT 消息对话框中添加文本框

> ID：14588952
> 
> 赞同：3
> 
> 时间：2013-01-29T17:43:22.037
> 
> 标签：c#, .net, windows-runtime, winrt-xaml

我在 Windows 8 商店应用程序中工作，我试图弹出一个对话框，让用户在文本框中输入信息。

怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:55:21.893

[`InputDialog`](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/4d568d4e4c6a#WinRTXamlToolkit/Controls/InputDialog/InputDialog.cs)WinRT XAML Toolkit 中的控件就是这样做的。它基本上是一个带有 TextBox 和一些按钮的 Popup 控件。它也有一个[样本](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/4d568d4e4c6a#WinRTXamlToolkit.Sample/Views/Controls/InputDialogTestPage.xaml.cs)。最基本的一个是这样做的：

```
var dialog = new InputDialog();
var result = await dialog.ShowAsync(
    "This is the title",
    "This is the content/message",
    "Option 1",
    "Option 2",
    "Option 3"); 
```

结果是在单击的按钮上使用的字符串 - 例如“选项 1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T11:49:02.807

使用“Callisto”库，对于那些自定义对话框是最好的选择。通过详细说明它的代码示例来查看这个库。 [Callisto 代码示例](https://github.com/timheuer/callisto)。

我真的被这个问题困扰，发现这个解决方案非常有帮助。您可以在“自定义”对话框中添加任何您想要的内容。

# rest - 路由器、模型或视图，哪一个是发起者

> ID：14588962
> 
> 赞同：3
> 
> 时间：2013-01-29T17:43:46.550
> 
> 标签：rest, backbone.js, creation

我试图尽可能地延迟加载，

但是，我对如何开始感到困惑，这是我的“顺序理解”：

目标：创建一个联系人页面，其中包含服务器上现有的联系人

*   Step1.0：要使用路由器：`<div id="contacts">`必须存在才能触发规则，所以我退回到（Step0.9），
*   Step0.9：在body中创建了这个div。好吧，路由器找到#contacts，呵呵，不过这是个视图，ok，后退一步（Step0.8）。
*   Step0.8：擦除在 中创建的 div`body`并用视图替换它：

> ```
> contactsView = Backbone.View.extend 
> tagName: 'div',
> id: 'contacts' 
> ```

为了延迟加载，这个视图应该只在我的路由表中触发 #contact 时创建，但我只是从正文中删除它，它确实存在，我回到 Step1.0 ？？？

找到了一些教程，显示了全局变量设置......请，使用路由器、视图、它们的模型和集合的一般场景应该如何进行（答案不需要代码，每个步骤只需一行）？

我知道可以有多种方法，但是创建元素的最常见的主干步骤策略是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:00:34.280

我通常的做法是

*   有`div#contacts`负载在体内
*   路由器将 映射到路由器`#contacts`中的方法`showContacts`
*   showContacts 创建视图，将其附加到所需的 div

    `var view = new contactsView();`

    `$('#contacts').empty().append(view.el);`

    `view.render();`

*   您无需在定义中定义 id`contactsView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:25:15.233

*我不是 100% 确定我理解正确。如果我没有，请在评论中告诉我。*

您关于一般用法的问题似乎有些混淆`Backbone.Router`。当路由器将路由映射到 URL 片段`#contacts`时，这与具有 id 的 DOM 元素无关`#contacts`。井号恰好是 URL 片段**和** `id`CSS 选择器的标识符，但这就是相似性结束的地方。

通常我的路由器看起来像这样：

```
var AppRouter = Backbone.Router.extend({
  routes: {
    contacts: "contactList"
  },
  contactList: function() {
    var contacts = new ContactCollection();
    var view = new ContactListView({collection:contacts});
    view.render().$el.appendTo("#contacts");
  }
}); 
```

请注意，`#contacts`不需要将元素称为那个。您可以调用它`#pony`，也可以根据需要将视图直接渲染到文档中`body`。

因此，在这些方面，工作流程是：

1.  路由器被击中
2.  集合已初始化
3.  视图被渲染

# jquery - 淘汰赛和 jQuery 对话框 - 当视图模型绑定上下文不是 document.body 时？

> ID：14588965
> 
> 赞同：0
> 
> 时间：2013-01-29T17:44:01.103
> 
> 标签：jquery, data-binding, dialog, knockout.js, modal-dialog

假设我们有一个简单的模型和视图模型：

```
// Model
function Model(prop) {
     this.Prop = ko.observable(prop);
}

// View Model
function ViewModel(){
     var self = this;

     this.CurrentItem = ko.observable(new Model("abc"));

     this.Edit = function(){
          $(#"EditDiv").dialog("show");
     }
} 
```

然后是html：

```
<body>
      <input type="button" data-bind="click: Edit"/>
      <div id="EditDiv" data-bind="with: CurrentItem">
         <input type="text" data-bind="value: Property" />
      </div> 
</body> 
```

然后页面底部的脚本：

```
$(document).ready(function(){
      $("#EditDiv").dialog({ /* settings to hide it first. */ });

      ko.applyBindings(new ViewModel());
}); 
```

上面的代码有效，并且会弹出一个带有文本框的 jQuery 窗口，其中包含文本“abc”。

但是，如果我将页面划分为 div 并为每个 div 分配不同的模型视图，则绑定会中断：

```
<body>
     <div id="ForAnotherBindingContextDiv">
     </div>
     <div id="TargetContextDiv">
          <input type="button" data-bind="click: Edit"/>
          <div id="EditDiv" data-bind="with: CurrentItem">
              <input type="text" data-bind="value: Property" />
          </div>  
     </div>
</body> 
```

所以现在我们将绑定更改为：

```
ko.applyBindings(new ViewModel(), $("#TargetContextDiv")[0]); 
```

上面仍然会弹出编辑窗口，但是，文本框是空的。对我来说，这看起来像是绑定被破坏了，因为当我们调用 .dialog("show") 时，jQuery 将整个对话框设置放置在文档的根级别，这现在位于 .dialog("show") 的上下文之外`ViewModel`。

jQuery 是否可以选择不将整个对话框修复放在根级别？我可以采取不同的方法吗？（我也尝试了自定义绑定路由，它也不会绑定。如果这样的 div 的内容是静态的（没有绑定），它就可以工作，比如错误消息文本）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:50:38.927

我的绑定集合中有一个对话框绑定。更好地从逻辑中抽象出 DOM

[https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

演示 [http://jsfiddle.net/H8xWY/130/](http://jsfiddle.net/H8xWY/130/)

```
<div id="dialog" data-bind="dialog: { autoOpen: false, modal: true, title: dialogTitle }, template: { name: 'dialog-template', data: dialogItem, 'if': dialogItem }, openDialog: dialogItem"></div> 
```

# svm - 一类 SVM libSVM

> ID：14588967
> 
> 赞同：2
> 
> 时间：2013-01-29T17:44:04.203
> 
> 标签：svm, libsvm

假设我的特征向量是 (x1, x2, ...xn)

谁能给我一个使用 libSVM 训练一类 SVM 的代码？

我应该如何使用交叉验证来学习参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T11:34:50.533

这可能会帮助你

```
label=ones(Number Of your training instances,1); % You should generate labels for your only class!
model = svmtrain( label, Training Data , '-s 2 -t 2  -n 0.5' ) ; % You can change the parameters
[predicted_label,accuracy]=svmpredict(TestLabels,Test Set, model); 
```

# javascript - CSS3 过渡和 z-index

> ID：14588970
> 
> 赞同：3
> 
> 时间：2013-01-29T17:44:11.597
> 
> 标签：javascript, css, transitions

我正在处理我的项目，但我在 css 中遇到了 z-index 问题。我已经用谷歌搜索了一整天，但还没有找到适合我的解决方案。问题是，我得到另一个 div 下的 div。它必须是带有 z-index 的东西。希望有人能找出我做错了什么......

```
$(".box").click(function() {
  $(this).css({
    "-webkit-transform-style": "preserve-3d",
    "background-color": "red",
    "box-shadow": "0px 0px 10px red",
    "-webkit-transition:": "all .2s ease-in",
    "zoom": "1",
    "z-index": "10",
    "-webkit-transform": "rotateY(0deg)"
  });

  $(this).mouseleave(function() {
    $(this).css({
      "-webkit-transform-style": "preserve-3d",
      "background-color": "blue",
      "box-shadow": "",
      "-webkit-transition:": "all .2s ease-out",
      "zoom": "",
      "z-index": "1",
      "-webkit-transform": "rotateY(45deg)"
    });
  });
});
```

```
#blue {
  -webkit-perspective: 600px;
}
#blue .box {
  position: absolute;
  zoom: 0.7;
  background-color: blue;
  -webkit-transform: rotateY(45deg);
  -webkit-transition: all .2s ease-out;
  z-index: 0;
  height: 100px;
  width: 200px;
  margin-left: 50px;
  margin-top: 50px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="blue" class="container" style="margin-left: 50px">
  <div class="box" id="first"></div>
</div>
<div id="blue" class="container" style="margin-left: 200px">
  <div class="box" id="second"></div>
</div>
```

**我也把所有的东西放在了[jsFiddle](http://jsfiddle.net/aPKh6/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:28:51.313

导致您悲伤的是父元素（.container）。由于它们的 html 顺序以及它们是静态定位的事实，第二个 .container 的子元素将始终位于第一个 .container 的前面。

如果这是您必须使用的 html 结构，请将“位置：相对”添加到 .container 默认 css 并根据您的事件单独调整它们的 z-index。

```
#blue {
    position:relative;
}

$(".box").click(function () {
    $(this).css({"-webkit-transform-style":"preserve-3d",
                 "background-color":"red",
                 "box-shadow":"0px 0px 10px red",
                 "-webkit-transition":"all .2s ease-in",
                 "zoom":"1",
                 "z-index":"10",
                 "-webkit-transform":"rotateY(0deg)"});

    this.parentNode.style.zIndex = '1';

        $(this).mouseleave(function() {
        $(this).css({"-webkit-transform-style":"preserve-3d",
                     "background-color":"blue",
                     "box-shadow":"",
                     "-webkit-transition:":"all .2s ease-out",
                     "zoom":"",
                     "z-index":"1",
                     "-webkit-transform":"rotateY(45deg)"});

         this.parentNode.style.zIndex = '0';

       });
    }); 
```

[http://jsfiddle.net/aPKh6/10/](http://jsfiddle.net/aPKh6/10/)

此外，不应该在多个元素上使用 id。它是无效的，它还限制了您使用 javascript 进行更有效的元素选择的能力。

当您将事件侦听器嵌套在侦听器的函数中时，也有可能一次触发多个事件，但我不知道 jQuery 是否会为您处理这个问题。我一直发现最好单独声明它们并使用标志来查看一个是否在另一个之前被解雇。

# jquery - 滚动到元素在控制台中有效，但在代码中无效

> ID：14588972
> 
> 赞同：-1
> 
> 时间：2013-01-29T17:44:13.893
> 
> 标签：jquery, scroll

我正在使用此代码在表中查找一行，然后将该行滚动到视口的顶部：

```
$('html, body').animate({ 
    scrollTop: $('label:contains("' +textToFind+ '")').parents('tr').offset().top 
}, 1000); 
```

如果我用已知的有效标签文本替换“textToFind”，这在 js 控制台中可以正常工作。但它在我的脚本中不起作用。脚本中的所有其他 jquery 都在工作，我一遍又一遍地测试该行在代码中被正确选择（输出到控制台）。

我在这里能错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:06:35.457

正如我在评论中所说，我在 ajax 调用的成功函数中运行这个动画。将有问题的代码行移动到调用 ajax 调用的函数解决了问题并正确滚动到所需的行。

# reporting-services - 如何移动报表标题以与页眉对齐？

> ID：14588976
> 
> 赞同：0
> 
> 时间：2013-01-29T17:44:30.803
> 
> 标签：reporting-services, ssrs-2008

我的报告在报告正文中的任何数据元素之前都有一个报告标题。该报告还有一个页眉，该页眉出现在除第一页之外的所有页面上。问题是，作为报告正文一部分的报告标题从标题下方开始。我需要它从页面顶部的顶部边缘开始。页眉和报告页眉在相同的一般位置包含数字和日期，并且在页面之间切换 0.5 英寸的偏移很明显，需要修复。所需的解决方法是将第一页上的报表页眉向上移动 0.5 英寸，以便报表页眉和页眉上的共同元素重叠。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:56:37.783

我将您的问题解释为：*如何**将报告正文的顶部**移到页眉中？*

根据您的问题，我猜您想将某些东西从身体向上移动，因此它落在标题区域；可能通过负的最高利润或最高位置。**据我所知，这在 SSRS 中是不可能的。**

解决方案似乎很简单（没有关于您的数据的更多上下文或信息）：将您想要在标题*中显示的内容放在标题本身*（而不是正文）中。如果您不想在每一页上都显示它：使用表达式。如果该表达式需要来自数据集的信息，您必须创建一个从数据集中填充的内部参数，因为您无法访问标题中的数据集。

真正的问题是：你*为什么*想要这个？这是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)：您是在询问您的预期解决方案而不是实际问题吗？也许有更好的方法来解决 X。如果是这样，并且如果您需要帮助：请务必发布后续问题。

# javascript - 获取 HTML 表格行位置并在其旁边显示 div

> ID：14588977
> 
> 赞同：0
> 
> 时间：2013-01-29T17:44:36.753
> 
> 标签：javascript, jquery, html

我已经设法显示`<div>`哪个包含与表格行相关的图像，但我希望我`<div>`出现在单击的行旁边，如下所示：

![在此处输入图像描述](../Images/1dcbfc7a7f011534af553a9ea45c97f5.png)

在此示例中，当用户单击第二行时，`<div>`将显示在其旁边。那么，如何获得点击行的位置？

我尝试 [了这个](https://stackoverflow.com/questions/442404/dynamically-retrieve-the-position-x-y-of-an-html-element)和[这个](https://stackoverflow.com/questions/1769584/get-position-of-element-by-javascript)解决方案，但它们都返回表的位置而不是行的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:12:35.193

这是一个让您开始使用 jQuery 的示例 - [http://jsfiddle.net/CtWSf/](http://jsfiddle.net/CtWSf/)

```
$('td').click(function(e){
    var currentPosition = $(this).offset();
    $('.results').html(currentPosition.top);
}); 
```

对于这个标记 -

```
<table>
    <tr><td>1</td></tr>
    <tr><td>2</td></tr>
    <tr><td>3</td></tr>
    <tr><td>4</td></tr>
    <tr><td>5</td></tr>
</table>
<div class="results"></div> 
```

# jquery - jQuery .animate({left}) 在 IE 中不起作用

> ID：14588996
> 
> 赞同：1
> 
> 时间：2013-01-29T17:45:25.297
> 
> 标签：jquery, internet-explorer

我使用 jQuery 制作了一个快速的片段`.animate()`，它在 Safari、Chrome 和 Firefox 中完美运行，但是当我在 IE 中打开它时，开始动画开始，然后直接跳转到 then.fadeOut 部分开始的地方。有什么想法可以改变它以在 IE 中工作吗？

**jQuery**

```
$(document).ready(function(){   

//ACC LOGO COMES IN
$("#img1").animate({left:'+=470'},1000);
$("#img1").animate("pause");
$("#img1").animate("pause");
$("#img1").animate("pause");
//AVERY LOGO COMES IN
$("#img1").animate({left:'+=470'},1000);
$("#img1").animate("pause");
$("#img1").animate("pause");
$("#img1").animate("pause");
$("#img1").animate({left:'+=470'},1000);

//FADE OUT RED FADE INTO COLOR PHOTO
$("#img1").fadeOut("fast", function(){
    $("#img0").fadeOut(2000, function(){
        $("#img3").fadeOut(3000, function(){
            $("#img4").fadeOut(2000, function(){
                $("#img5").fadeOut(3000);
                });
            });
        });
//END OF FADE QUEUE
});

//END DOC READY BRACKET
}); 
```

**HTML**

```
 <div id="img1"><img src="images/slide_double.jpg" alt="" /></div>
    <div id="img0"><img src="images/slide_0.jpg" alt="" /></div>
    <div id="img3"><img src="images/slide_3.jpg" alt="" /></div>
    <div id="img4"><img src="images/slide_4.jpg" alt="" /></div>
    <div id="img5"><img src="images/slide_5.jpg" alt="" /></div>
    <div id="img6"><img src="images/slide_6.jpg" alt="" /></div> 
```

**CSS**

```
#slideshow {
background-image:url('images/slide_0.jpg');
height: 270px;
width: 460px;
overflow: hidden;
position: relative;
}

#img1 {
height: 270px;
width: 460px;
position: relative;
left: -940px;
} 

#img0 {
height: 270px;
width: 460px;
position: absolute;
z-index: 6;
}   

#img3 {
height: 270px;
width: 460px;
position: absolute;
z-index: 5
}

#img3 {
    height: 270px;
width: 460px;
position: absolute;
z-index: 4
}

#img4 {
height: 270px;
width: 460px;
position: absolute;
z-index: 3
}

#img5 {
height: 270px;
width: 460px;
position: absolute;
z-index: 2
}

#img6 {
height: 270px;
width: 460px;
position: absolute;
z-index: 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:53:52.777

没有`pause`使用`animate`JQuery 函数的选项

要模拟暂停，可以使用[`.delay()`](http://api.jquery.com/delay/)JQuery 函数。

**更新**

[http://jsfiddle.net/UQTY2/2/](http://jsfiddle.net/UQTY2/2/)

```
 $(document).ready(function () {
     $("#img1").animate({
         left: '+=470px' //ACC LOGO COMES IN 
     }, 1000).delay(1500).animate({
         left: '+=470'   //AVERY LOGO COMES IN
     }, 1000).delay(1500).animate({
         left: '+=470'
     }, 1000);
 }); 
```

# c++ - 数字上的 LLU 错误后缀

> ID：14588997
> 
> 赞同：5
> 
> 时间：2013-01-29T17:45:27.607
> 
> 标签：c++, visual-studio-2010

我有一个`LLU`用作 uint64 文字后缀的库。

Visual Studio 2010（在 windows7-64 上）抱怨“数字后缀错误”，修补库以使用`LL`作品。是否有一些预处理器定义或属性复选框我必须设置为启用`LLU`？

ps有人知道哪个是正确的行为吗？我一直认为 VC++ 所做的一切都与标准相反——但最近情况有所改善。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T10:11:48.073

查看我可用的标准（仅草稿，但相当新的版本），C++ 和 C 都将“ULL”和“LLU”定义为整数文字的有效后缀。这可能是 VS2010 没有遵循的最近更改，但我注意到 VS2012 做了完全相同的事情（即只有 ULL 有效）。

使用有符号和无符号文字*是*有区别的，这就是 MSVC 在您右移有符号值时的行为。有符号文字将被符号扩展，但无符号文字将用零填充。

换句话说，下面这个人为的例子：

```
unsigned long long l2 = ~0LL >> 5;
unsigned long long l3 = ~0ULL >> 5; 
```

...将在 MSVC 下产生两个不同的值。

因此，如果您的库期望通过规定无符号值来定义行为，那么将它们转换为无符号值可能会导致未定义的行为。

简而言之，我认为 MSVC 只接受一种形式的后缀有点顽皮，但最好的解决方法是切换“U”出现的位置，而不是完全删除它。